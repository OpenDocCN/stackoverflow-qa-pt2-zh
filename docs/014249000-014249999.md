# StackOverflow 问答 14249000-14249999

# iphone - 向 CGMutableRefPath 添加边框颜色和圆角

> ID：14249002
> 
> 赞同：1
> 
> 时间：2013-01-10T00:39:50.813
> 
> 标签：iphone, ios, objective-c, ipad

我的drawRect上有以下代码：

```
 CGMutablePathRef pathRef = CGPathCreateMutable();
     CGPathMoveToPoint(pathRef, NULL, 0, 220);
     CGPathAddLineToPoint(pathRef, NULL, rect.size.width, 220);
     CGPathAddLineToPoint(pathRef, NULL, rect.size.width, rect.size.height);
     CGPathAddLineToPoint(pathRef, NULL, 0, rect.size.height);
     CGPathCloseSubpath(pathRef); 
```

如何为此添加黑色边框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T00:46:45.173

确保你有一个上下文：

```
CGContextRef context = UIGraphicsGetCurrentContext(); 
```

进而：

```
aColor = [UIColor blackColor];
[aColor setStroke];
CGContextSetLineWidth(context, 2.0f);
CGContextAddPath(context, pathRef);
CGContextStrokePath(context); 
```

# image - 认识圆形

> ID：14249005
> 
> 赞同：1
> 
> 时间：2013-01-10T00:40:11.417
> 
> 标签：image, image-processing

我有个问题。我有几张这样的图片（.bmp 文件）：

# 1：

![一](../Images/ab96ab3ea7b88b4e25099c8ddb44c246.png)

# 2：

![二](../Images/389c63884203e382a5bc8b4cbedd0394.png)

# 3：

![三](../Images/2fffac7dc79f6c65753bee281788abb0.png)

# 4：

![四](../Images/16fe1d93b24515924f26824b0987ec28.png)

# 5：

![在此处输入图像描述](../Images/dff5f031c6db44e8cc21276003176c36.png)

我想知道图片上有多少个圆形。例如：

第一张图片：程序应该返回 1

第二张图片：程序应该返回 2

第三张图片：程序应该返回 5

第 4 张图片：程序应该返回 6

第 5 张图片：程序应该返回 8

你有什么想法？我想用 C# 或 Java 编写我的代码（如果你有任何库）。

我想过在圆形之间寻找这个紧密的区域，但我不知道该怎么做......，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T01:31:28.257

所以你的问题不是关于实际识别圆圈，而是关于分割重叠的圆圈。这是通过使用距离变换和简单的阈值处理来解决的。就那么简单。剩下的唯一步骤是计算连接组件的数量。

例如，这是 Matlab 代码：

```
f = yourimage;
dist = bwdist(f);
result = dist > (max(max(dist)))/1.5; 
```

以下是图像 1、3 和 5 的结果：

![在此处输入图像描述](../Images/6918bd006d0e2843d0b943e4103b8a8d.png) ![在此处输入图像描述](../Images/0b407fce8cbc0bb92fbb41561d599ff1.png) ![在此处输入图像描述](../Images/6963fd38e396a36122cc26afec23ca44.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T00:59:29.033

您可以使用[openCV 库](http://opencv.org)。标准接口是 C++，但可以使用[Java 接口](https://code.google.com/p/javacv/)。

这是一个相关的openCV0相关的SO答案，我相信你可以找到更多......

[houghcircles-参数识别球](https://stackoverflow.com/questions/11276390/houghcircles-parameters-to-recognise-balls)

*更新*

由于某种原因，这个答案被否决了，我不知道为什么。

这是openCV网站上[的教程](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_circle/hough_circle.html)

这是[openCV文档](http://opencv.willowgarage.com/documentation/cpp/imgproc_feature_detection.html#cv-houghcircles)

这[是 YouTube 上的一个小视频](http://www.youtube.com/watch?v=qeO2LnW2FBg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T01:33:30.367

这个问题的挑战在于圆形区域相接触。但是，在您的情况下解决此问题的一种简单方法是通过大量单像素步骤侵蚀这些图像。在维基百科上查看此页面：

[http://en.wikipedia.org/wiki/Erosion_](http://en.wikipedia.org/wiki/Erosion_(morphology) (形态学)

如果您使用 MATLAB，有一个名为的函数`bwmorph`将为您执行此操作，并`bwlabel`最终找出您在这里有多少对象。

也许您可以使用自己的自定义代码侵蚀这些图像。在这种情况下，您可以腐蚀，直到每个对象只剩下一个像素。

# css - CSS不透明度设置

> ID：14249017
> 
> 赞同：0
> 
> 时间：2013-01-10T00:41:14.963
> 
> 标签：css, firebug, opacity

我有以下 CSS 类：

```
.transparency
{    
  -webkit-opacity: 0.5;
  -moz-opacity: 0.5;
  filter:alpha(opacity=50);
} 
```

当我在 firebug 上查看加载的 CSS 文件中的类时，该类显示为空。所以在萤火虫中，它基本上是这样的：

```
.transparencyPlayPause
{
} 
```

当我将课程内容更改为此课程时，课程不再为空

.transparencyPlayPause { 显示：无；}

有没有其他人见过这样的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T00:43:11.007

Firefox 不支持这些属性，因此 Firebug 在规则中看不到任何已解析的属性。

您应该摆脱`-webkit-`and`-moz-`并添加`-ms-filter`.

# php - MySQL错误代码1054......新手需要帮助

> ID：14249026
> 
> 赞同：0
> 
> 时间：2013-01-10T00:42:14.300
> 
> 标签：php, mysql, database, web

我是一名新的网站开发人员，最近我拿起了一本“PHP 和 MySQL 的简单步骤”一书来帮助我学习这些语言。

一切正常，看起来很简单，但由于某种原因，我最近的三个练习中收到了错误消息。我查看了本书附带的示例\完成的文件，它们是相同的。有人可以告诉我这里的代码有什么问题吗？我得到一个`1054 error message`：

```
(42S22) : Unknown column 'make' in field list. 
```

这是我的代码：

```
CREATE TABLE IF NOT EXISTS phones
(
  id    INT AUTO_INCREMENT PRIMARY KEY ,
  make      CHAR(16) ,
  model     CHAR(16) ,
  platform  CHAR(16) 
) ;

INSERT INTO phones ( make , model , platform   )
VALUES  
( "Apple" , "iPhone" , "iOS" ) , 
( "RIM" , "Curve" , "BlackBerry" ) ,
( "HTC" , "Desire" , "Android" ) ,
( "Nokia" , "Lumia" , "Windows" ) ;

SELECT * FROM phones ;

SELECT id , make FROM phones ;
SELECT make , model FROM phones ;
SELECT id , platform FROM phones ; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T00:44:19.947

您是否有一个已经存在的电话桌，没有该列？如果是这样，那么 CREATE TABLE 的 IF NOT EXISTS 部分将忽略该语句。

# javascript - 对填充 Chrome 列表框的数组/对象/哈希进行排序

> ID：14249030
> 
> 赞同：0
> 
> 时间：2013-01-10T00:42:28.227
> 
> 标签：javascript, google-chrome, sorting

我有一个在我的页面上填充列表框的列表框。填充它的 javascript 哈希看起来很像这样：

```
wiget_cont = ({"39":{"name":"astronaut","id":"39","weight":"189"},
               "37":{"name":"corgi","id":"37","weight":"10"},
               "49":{"name":"zoologist","id":"49","weight":"313"}}); 
```

在 ie 和 firefox 中，列表框根据 name 键值的字母顺序填充。当然，chrome 对数字键进行排序，所以我的列表框会向后填充所有内容。

我试图取出散列的第二部分（就像所有以“名称”开头的对象一样）。id 显然在 key 和 hash 中都使用了。我的想法是用所有值对象提供对象数组，然后整理名称。然后使用该对象数组中的 id 作为键，将该数组作为值创建一个新的哈希（希望这有一定的意义）。这是最好的方法吗？由于框架和现有代码，我必须使用这种结构，进出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:54:37.470

您可以[`Object.keys`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)用来获取一个数组，然后按名称排序并在之后对其进行迭代

```
var wiget_cont = ({"39":{"name":"astronaut","id":"39","weight":"189"},
               "37":{"name":"corgi","id":"37","weight":"10"},
               "49":{"name":"zoologist","id":"49","weight":"313"}});

var keys = Object.keys(wiget_cont).sort(function (a, b) {return wiget_cont[a].name>wiget_cont[b].name;}),
    i = 0;

for (;i<keys.length;++i) { /* wiget_cont[keys[i]] ... */ } 
```

如果您不想`>`用于字符串比较，请查看[`.localeCompare`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/localeCompare).

# python-3.x - Matplotlib - 约 1000 个条形的堆积条形图

> ID：14249032
> 
> 赞同：1
> 
> 时间：2013-01-10T00:42:43.117
> 
> 标签：python-3.x, matplotlib, bar-chart

### 背景：

我正在开发一个程序来显示 3d 数据的 2d 横截面。数据以 x、y、z1、z2、z3 等格式存储在一个简单的文本 csv 文件中。我取一个起点和终点，并浏览数据集（约 110,000 行）以在这些点之间创建一行点两个位置，并将它们转储到一个数组中。这工作得很好，而且相当快（大约需要 0.3 秒）。然后显示这条线，我一直在创建一个 matplotlib 堆积条形图。但是，程序的总运行时间约为 5.5 秒。我已将大部分内容（价值 3 秒）缩小到下面的代码。
'values' 是一个包含 x、y 和 z 值加上前导标识符的数组，这部分代码中没有使用它。第一个 plt.bar 用于绘制条形部分，第二个用于创建 -2000 的任意楼层。为了生成连续查看的部分，我在每个条形之间使用了一个零间隔。

```
 import matplotlib.pyplot as plt

    for values in crossSection:
        prevNum = None
        layerColour = None
        if values != None:
            for i in range(3, len(values)):
                if values[i] != 'n':
                    num = float(values[i].strip())

                    if prevNum != None:
                        plt.bar(spacing, prevNum-num, width=interval, \
                                bottom=num, color=layerColour, \
                                edgecolor=None, linewidth=0)

                    prevNum = num

                    layerColour = layerParams[i].strip()

            if prevNum != None:        
                plt.bar(spacing, prevNum+2000, width=interval, bottom=-2000, \
                                    color=layerColour, linewidth=0)

        spacing += interval 
```

我确信有一种更有效的方法可以做到这一点，但我是 Matplotlib 的新手，仍然不熟悉它的功能。代码中时间的另一个主要用途是：

```
plt.savefig('output.png') 
```

这大约需要一秒钟，但我认为这是可以保存文件的，我对此无能为力。

### 问题：

`plt.bar()`有没有更快的方法通过使用更好的或不同的 Matplotlib 函数来生成相同的输出（堆积条形图或类似的东西） ？

***编辑：*** 我忘了在原始帖子中提到我正在使用 Python 3.2.3 和 Matplotlib 1.2.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:26:48.637

将其留在这里以防有人遇到同样的问题...
虽然与 using 不完全相同，但使用`bar()`足够大的数据集（足够大以至于 using`bar()`需要几秒钟），结果与`stackplot()`. 如果我使用 tcaswell 给出的方法将数据分类成图层并将其输入`stackplot()`到图表中，则会在 0.2 秒内创建，而不是 3 秒。

*编辑*

*tcaswell 提供的将数据转为层的代码：*

```
accum_values = []
for values in crosssection:
    accum_values.append([float(v.strip()) for v iv values[3:]])
accum_values = np.vstack(accum_values).T 
layer_params = [l.strip() for l in layerParams]
bottom = numpy.zeros(accum_values[0].shape) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T04:18:04.910

看起来您正在绘制每个条形图，您可以将序列传递给`bar`（参见此 [示例](http://matplotlib.org/examples/pylab_examples/bar_stacked.html)）

我认为是这样的：

```
accum_values = []
for values in crosssection:
    accum_values.append([float(v.strip()) for v iv values[3:]])

accum_values = np.vstack(accum_values).T 
layer_params = [l.strip() for l in layerParams]
bottom = numpy.zeros(accum_values[0].shape)

ax = plt.gca()
spacing = interval*numpy.arange(len(accum_values[0]))
for data,color is zip(accum_values,layer_params):
    ax.bar(spacing,data,bottom=bottom,color=color,linewidth=0,width=interval)
    bottom += data 
```

会更快（因为对 bar 的每次调用都会创建一个`BarContainer`，我怀疑您的问题的根源是您为每个 bar 创建一个，而不是为每一层创建一个）。

我真的不明白你在用顶部低于底部的条做什么，所以我没有尝试实现它，所以你必须稍微调整一下。

# android - 跨分片通信

> ID：14249034
> 
> 赞同：0
> 
> 时间：2013-01-10T00:42:58.000
> 
> 标签：android, sqlite, list, tabs, android-fragments

我正在开发一个应用程序，它有一个“艺术家列表”，一个包含大量乐队、表演者和/或作曲家的列表。它们按流派和相对受欢迎程度排序。
从主要活动您转到一个“乐队列表”活动，其中有两个选项卡。其中一个是“流派”选项卡，其中包含一般音乐流派的列表，当您单击每种流派时，您会被发送到其中也有两个选项卡的相应活动。第一个是“所有”选项卡，另一个是“流行”选项卡。每个选项卡都包含一个片段，其中包含一个过滤的 sqlite 数据库（“过滤”是指我有一个大数据库，它被过滤以在不同的片段中显示我想要的内容，而不是为每个片段/流派使用一个新数据库）。所以现在我有 7 个流派和 14 个类；
我现在想做的是将类的数量减少到只有两个（全部/流行），或者如果可能的话，甚至一个，通过再次过滤数据库为所有列表回收相同的片段。为了做到这一点，我需要从“流派”片段中发送一个字符串，其中包含按下的列表项（流派）的位置到包含“所有”和“流行”选项卡（片段）的活动，然后将该字符串进一步发送到片段，片段将使用它来过滤 sqlite 数据库。

我需要补充一点，我当然已经阅读了关于片段通信的 Android 开发人员指南，但我不知道如何在我的代码中使用他们的方法，因为我创建的片段有点不同，包括没有在xml，因此我不知道如何使用他们的`getSupportFragmentManager().findFragmentById(R.id.article_fragment);`方法以及更多类似的东西。

这是我创建所有片段的 TabListener：

```
public class TabListener<T extends Fragment> implements ActionBar.TabListener {
    private Fragment mFragment;
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    public TabListener(Activity activity, String tag, Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        if (mFragment == null) {
            mFragment = Fragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            ft.attach(mFragment);
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            ft.detach(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
} 
```

谢谢，
阿莱克萨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:19:16.950

如果您以编程方式创建片段并使用标签添加它们，您可以使用支持 FragmentManager 方法：findFragmentByTag(String tag)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:27:30.783

经过更多尝试后，我最终放弃了 setArguments() 和 getArguments() 并在父活动中使用了它：
`public int getPosition(){ return position; }`
......在子片段中使用了这个：
`position=((ParentActivity) getActivity()).getPosition();`
我不知道它是否是最有效的方法，但它有效很棒，并且对于像我这样的新手来说，将一些简单的数据发送到片段中是一件微不足道的事情。:)

# android - 在 Android 中处理未处理的异常

> ID：14249035
> 
> 赞同：3
> 
> 时间：2013-01-10T00:43:05.467
> 
> 标签：android, exception-handling

在 Windows phone 7 中，向开发人员提供了一个 Application_UnhandledException 事件，该事件提供了一个异常对象，其中包含发生的任何未处理异常的信息和堆栈跟踪。有机会将此对象存储在本地存储中。在下次启动时，我们可以检查这样的对象并将其通过电子邮件发送给开发人员。显然，这对于诊断生产崩溃很有价值。

Android中是否存在这样的事情？谢谢，加里

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T01:15:35.260

```
java.lang.Thread.setDefaultUncaughtExceptionHandler(UncaughtExceptionHandler handler) 
```

这是你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T09:39:38.160

扩展应用程序类

```
import android.app.Application;
import android.util.Log;

public class MyApplication extends Application {

    @Override
    public void onCreate() {
        super.onCreate();
        Thread.setDefaultUncaughtExceptionHandler(new UncaughtExceptionHandler() {

            @Override
            public void uncaughtException(Thread thread, Throwable ex) {
                Log.e("MyApplication", ex.getMessage());            

            }
        });
    }
} 
```

在 AndroidManifest.xml 文件中添加以下行作为 Application 属性

```
android:name=".MyApplication" 
```

# ios - 以 %i 形式获取 UISwitch 的值

> ID：14249038
> 
> 赞同：3
> 
> 时间：2013-01-10T00:43:28.093
> 
> 标签：ios, objective-c

我遇到了一个乏味的小问题。

我需要传递由 UISwitch 设置的值，所以由于它是一个布尔值，我认为它会返回一个整数，因此下面的代码中的 %i 。

我看过很多 UISwitched 的值显示如下：

```
if(nameOfSwitch.isOn)
{
  NSLog(@"The switch is on");
}
else
{
  NSLog(@"The switch is off");
} 
```

我需要布尔值，因为我需要这个：

```
NSString *value = [[NSString alloc] initWithFormat:@"Value of Switch %i" nameOfSwitch.on]; 
```

然而，这似乎总是返回打开 - 那么正确的方法是什么？

**我需要 UISwitch 的 UITextField.text 等价物**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T01:00:49.800

你可以试试

```
NSString *value = [[NSString alloc] initWithFormat:@"Value of Switch: %i",nameOfSwitch.isOn]; 
```

或者

```
NSString *value = [[NSString alloc] initWithFormat:@"Value of Switch: %@",nameOfSwitch.isOn?@"YES":@"NO"]; 
```

顺便说一句，它应该是

```
if(nameOfSwitch.isOn)
{
  NSLog(@"The switch is on");
}
else
{
  NSLog(@"The switch is off");
} 
```

编辑：如果您看到此开关为 ON，但没有得到您想要的 1，那么您的问题可能是您调用了错误的开关名称或者它不是同一个实例（您在 Interface Builder 中有一个你也可以通过代码初始化）

# ios - 如何处理 UIViewController 中的 UIApplicationDelegate 方法？

> ID：14249043
> 
> 赞同：4
> 
> 时间：2013-01-10T00:43:55.310
> 
> 标签：ios, uiviewcontroller, uiapplicationdelegate

我在基于选项卡的应用程序的选项卡上有一个 UIViewController，它连接了 UIApplicationDelegate。我想通过 UIApplicationDelegate 处理应用程序事件，但我没有在我的 UIViewController 中获取它们，它的方法没有被调用。

除了在我的 UIViewController 的接口声明中连接它之外，我应该怎么做？

```
@interface TestViewController : UIViewController<UIApplicationDelegate>
@end 
```

其他代表是作品，我可以处理它们，除此之外，UIApplication 及其代表应该有一些微不足道的“技巧”，但我找不到。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T00:48:48.123

如果您需要应用程序委托以外的类来响应各种应用程序事件，则让其他类注册各种应用程序通知。

比如处理app进入后台：

```
// Put this in the class that needs to deal with entering the background
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(backgrounding) name:UIApplicationDidEnterBackgroundNotification object:nil]; 
```

`UIApplication`有关所有通知的列表，请参阅文档。

不要忘记在`dealloc`类的方法中移除观察者。

# javascript - Jquery TypeError：尝试动态创建表时未定义a

> ID：14249046
> 
> 赞同：2
> 
> 时间：2013-01-10T00:44:21.393
> 
> 标签：javascript, jquery, jquery-datatables

我是 Jquery 的新手，并且一直在尝试让一些代码用于动态创建表。在这样做时，我提出了一个问题。我有一个将以 JSON 格式响应的 Web 服务，数据看起来像这样（示例）

```
{
        "aaData": [
            1
        ],
        "aaSorting": [
            1,
            "desc"
        ],
        "aoColumns": {
            "sTitle": "Title1"
        }
   } 
```

整个java脚本如下`

```
 $(document).ready
        (
            function() 
            {
                $.getJSON
                (
                    'http://intranet/testing/data/public.php', function(data) 
                    {
                        var newTable = '<thead><tr>'; 
                        $.each
                        (
                            data[0], function(key, value) 
                            {
                                newTable += "<th>" + key + "</th>";
                            }
                        );
                        newTable += "</tr></thead><tbody>";                  
                        $.each
                        (
                            data, function(key, row) 
                            {
                                newTable += "<tr>";
                                $.each
                                (
                                    row, function(key, fieldValue) 
                                    {
                                       newTable += "<td>" + fieldValue + "</td>";
                                    }
                                );
                                newTable += "</tr>";
                            }
                        );
                        newTable += '<tbody>';
                       $('#example').html(newTable);  
                    }
                );
                $('#example').dataTable(); 
            }
        );
    </script>` 
```

希望能在解决此问题方面提供一些帮助。

# java - ArrayList 是什么 意思是？

> ID：14249052
> 
> 赞同：0
> 
> 时间：2013-01-10T00:45:46.343
> 
> 标签：java, list, arraylist

这是我目前的情况：

```
import java.util.ArrayList;
import java.util.Scanner;

import com.sun.xml.internal.ws.api.pipe.NextAction;

import static java.lang.System.*;

public class NumberAnalyzer
{
private ArrayList<Number> list;

public NumberAnalyzer()
{

}

public NumberAnalyzer(String numbers)
{
    String nums = numbers;
    Scanner chopper = new Scanner(nums);
    while(chopper.hasNext()){
        int num = chopper.nextInt();
        list.add(num);
    }
    list = 
} 
```

我将如何转换一串数字，比如说`5 12 9 6 1 4 8 6`，并将它们添加到`ArrayList<Number>`我拥有的这个中？Eclipse 声明

> ArrayList 类型中的方法 add(int, Number) 不适用于参数 (int)。

**编辑** 这里是所有相关 .java 文件的 pastebin 链接：

[http://pastebin.com/9KDXLwbL](http://pastebin.com/9KDXLwbL) (NumberAnalyzer.java)

[http://pastebin.com/BGRpbpyH](http://pastebin.com/BGRpbpyH) (Number.java)

[http://pastebin.com/EhmZ6kKH](http://pastebin.com/EhmZ6kKH) （跑步班）

[http://pastebin.com/BCzeZytg（NumberTester.java](http://pastebin.com/BCzeZytg) 这个与 Number.java 配合得很好，它是实验室的一部分）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:05:59.353

问题是你有另一个类`Number`。以这种方式更改您的代码：

```
import java.util.ArrayList;
import java.util.Scanner;

public class NumberAnalyzer {

    private ArrayList<Number> list;

    public NumberAnalyzer() {
    }

    public NumberAnalyzer(String numbers) {
        list = new ArrayList<Number>();
        String nums = numbers;
        Scanner chopper = new Scanner(nums);
        while (chopper.hasNext()) {
            list.add(new Number(chopper.nextInt()));
        }
        chopper.close();
    }

} 
```

通过这种方式，您正在使用您的 class `Number`，而不是默认的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T00:55:55.440

`Number`显然，您在当前包中有自己的类。

因此，您的`ArrayList<Number>`不包含`java.lang.Number`，而是完全包含另一种类型。因此，您不能添加一个`int`；编译器无法将 a 转换为自定义类`int`的实例。`Number`

相反，您需要显式创建您的`Number`类的实例，或者摆脱它并使用`java.lang.Number`. （它`int`有一个隐式转换）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T00:55:26.403

如果要使用参数化方法，请使用 Integer 作为参数，同时将其添加到 Integer。

```
private ArrayList<Integer> list = new ArrayList<Integer>();
list.add(Integer.valueOf(num)); 
```

如果您不想使用参数化方法，只需将其作为 int 添加到列表中。

```
private ArrayList list = new ArrayList();
list.add(Integer.parseInt(num)); 
```

# c# - 如何使用托管代码在 C# 中获取剩余的可用堆栈/堆内存？

> ID：14249053
> 
> 赞同：0
> 
> 时间：2013-01-10T00:46:07.113
> 
> 标签：c#, xna

有没有办法仅使用托管代码在 C# 中获取剩余的空闲堆栈/堆内存？

具体来说，我不是指在当前分配状态下仍然可用的内存，而是指（将来）可以根据主机系统的主内存分配（如果需要）的所有内存。

该信息将用于对可用内存不足的系统采取措施，以防止系统内存不足。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:13:31.563

有一种称为 virtualquery 的方法可用于确定调用堆栈的大小。这里有一堆 C# 示例。

[检查 C 中可用的堆栈大小](https://stackoverflow.com/questions/53827/checking-available-stack-size-in-c)

[在 C# 中检查堆栈大小](https://stackoverflow.com/questions/2901185/checking-stack-size-in-c-sharp)

对于大堆分配，您可以尝试 MemoryFailPoint 来检查分配是否可能并引发不同的异常，然后 OOM [http://msdn.microsoft.com/en-us/library/system.runtime.memoryfailpoint.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.memoryfailpoint.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T01:49:17.563

答案主要由 AbdElRaheim 涵盖...关于 32 位系统的堆的附加说明。

如果您想一直检查堆分配的空间（顺便说一句，对于非 x64 程序有些有趣）：您不仅需要可用内存总量，还需要所有区域的映射并查看已分配的内容。您要寻找的最有趣的信息是加载到您的地址空间中的 DLL——即使有 1GB 空闲并不意味着你可以分配 1GB 块——如果加载了一些随机的本机 DLL，GC 可能无法将多个块组合在一起在中间。

如果你想走得那么远[——VirtualQuery](http://msdn.microsoft.com/en-us/library/aa366902%28v=VS.85%29.aspx)是一个可能的起点。

# iphone - UITextField 浮动

> ID：14249055
> 
> 赞同：0
> 
> 时间：2013-01-10T00:46:11.647
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我有一个文本字段，我需要用户在其中输入一个数字，我需要将此数字转换为浮点值并将其带到另一个视图。我找不到我的错误... Xcode 说它在“ `float valor = [[_inserir.text ] floatvalue];`”行。如果有人能找到我的错误在哪里，谢谢。

第一个视图.h：

```
#import <UIKit/UIKit.h>

@interface CedulasFirstViewController : UIViewController
@property (strong, nonatomic) IBOutlet UITextField *inserir;
- (IBAction)calc:(id)sender;

@end 
```

第一个视图.m：（我的变量名前的下划线，xcode自己放的，取出来不会改变任何东西）

```
#import "CedulasFirstViewController.h"
#import "CedulasSecondViewController.h"

@interface CedulasFirstViewController ()

@end

@implementation CedulasFirstViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)calc:(id)sender {

    float valor = [[_inserir.text ] floatvalue];

    CedulasSecondViewController *second [[[CedulasSecondViewController alloc] init]];

    second.valor = self.valor;

}
@end 
```

第二个视图.h：

```
#import <UIKit/UIKit.h>

@interface CedulasSecondViewController : UIViewController{

}

@end 
```

第二个视图.m：

```
#import "CedulasSecondViewController.h"

@interface CedulasSecondViewController ()

@end

@implementation CedulasSecondViewController

- (void)viewDidLoad
{

    NSString *numberFromTF [[NSString alloc] initWithFormat:@"%.2f", valor];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

谢谢

编辑：

如果有人能解释一下为什么 xcode 说要在变量之前加上这个下划线

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T03:53:17.807

您需要在这里做几件事。

首先，您已经在 中创建了一个属性`CedulasFirstViewController.h`，因此您需要在 中合成它`CedulasFirstViewController.m`。在`CedulasFirstViewController.m`中，在该行下方`@implementation CedulasFirstViewController`，键入

```
@synthesize inserir; 
```

然后，在该行`float valor = [[_inserir.text ] floatvalue];`中，有几个错误。您将您的属性视为实例变量，因此`_inserir.text`您应该使用`self.inserir.text`. 此外，您应该删除内部的一对括号，因为括号用于执行功能时，并且在`self.inserir.text`. `self.inserir.text`（或者`_inserir.text`，就此而言）只是一个对象。

所有这一切意味着产生错误的行应该如下所示：

```
float valor = [self.inserir.text floatvalue]; 
```

这段代码似乎还有其他一些问题，但如果你问这些问题，那应该是一个单独的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:26:01.877

以下功能会将您的文本转换为所需的格式。

```
 float val=[_inserir.text floatvalue];
 int val=[_inserir.text intvalue]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T00:48:30.850

错字是：

```
float valor = [[_inserir text ] floatValue]; 
```

# python - 一个大进程或许多小进程的内存使用率更好吗？

> ID：14249056
> 
> 赞同：5
> 
> 时间：2013-01-10T00:46:33.510
> 
> 标签：python, unix, memory, subprocess

我有一个需要大量内存的应用程序，它遍历一对数组，处理元素的每个组合。目前这个脚本非常需要内存。它最终使用了大约 3GB 的 RAM。

我的问题是这样的：

在一个大进程中处理元素的每个组合是否更节省内存？还是为每个组合启动一个新的子流程更好。

换句话说，执行选项 1 是否更好：

```
for i in param_set1:
    for j in paramset2:
        Do_A_Big_Job(i, j) 
```

或选项 2：

```
import subprocess

for i in param_set1:
    for j in paramset2:
        subprocess.call([Do_A_Big_Job_Script, i, j]) 
```

“更好”是指“使用更少的 RAM”。

谢谢！

**编辑** 我对内存使用情况非常好奇。当进程结束时，UNIX 系统会释放内存吗？*对于编写得相当*好的脚本，这是否比 python 的垃圾收集更有效？我没有很多可用的内核，所以我希望多个进程或多或少地并行运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:21:22.113

运行单个进程当然会使用更少的 RAM，但是很难利用多个 CPU/内核。

如果您不在乎需要多长时间，请运行单个进程。

作为一种折衷方案，您可以一次只运行几个进程，而不是一次启动它们。

# c# - 按钮文本，不一致

> ID：14249057
> 
> 赞同：2
> 
> 时间：2013-01-10T00:46:34.663
> 
> 标签：c#, button, text

为什么我第一次尝试更改此代码中的按钮文本**不起作用**，而第三次尝试却有效？

串行端口连接时，我的用户将不得不等待几秒钟。之后，我想提醒他他已经连接（第二次尝试可能会导致问题）。

我想让他知道一切都很好，这样他就不会想“duh”并单击两次。

失败。文本更改永远不会出现。

好的，为什么按钮文本的第三个更改有效，但第一个无效？我不知道第二个是否有效。

```
 /***********************************************************************
  * Button:  Connect Port                                               *
  ***********************************************************************/

 private void TheConnectPortButton_Click(object sender, EventArgs e) 
 {
     string OldText = TheConnectPortButton.Text;

     TheConnectPortButton.Text = "Busy, Please Wait";  /////// This never happens

     ButtonBoss.ButtonHandler_ConnectPort();

     TheConnectPortButton.Text = OldText;              /////// Not sure if this happens

     if (aUartSemaphoreThatTells.IfWeHaveConnectedToAPort == (int)aValueWhichIndicatesThat.YesWeHaveAGoodPortConnected)
     {
         TheConnectPortButton.Text = "Connected";      /////// This one does happen
     }

 } 
```

`aUartSemaphoreThatTells.IfWeHaveConnectedToAPort`例程也使用确保他不会第二`ButtonBoss`次连接，以及其他按钮例程（例如，确保我们在 Tx/Rx 或其他任何东西之前连接）。

我尝试在例程返回后更改代码看起来像这样......

```
 if (aUartSemaphoreThatTells.IfWeHaveConnectedToAPort == (int)aValueWhichIndicatesThat.YesWeHaveAGoodPortConnected)
    {
        TheConnectPortButton.Text = "Connected";
    }
    else
    {
        TheConnectPortButton.Text = OldText;
    } 
```

...我仍然得到相同的结果。

我的猜测（仅此而已）是线程以某种方式参与了所有这一切，并且串行端口例程通过一些我目前没有正确遵循的卷积来胜过按钮文本更改例程。

问题：在连接内容占用系统之前，我需要做什么才能更改文本？

（如果是这样的话）

问题 2：如果我不能做到这一点，我想我已经阅读了有关“灰色”按钮的文章，或者，我相信我在某个地方看到了我实际上可以让按钮在用户眼前消失，以便他无法再次单击它。欢迎提供示例代码的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T00:56:37.157

问题是您因此从同一个事件处理程序执行所有操作，因此按钮没有时间更新（重绘）。您可以调用`Application.DoEvents();`方法，但这根本不是一个好主意，请阅读[Application.DoEvents() 的使用](https://stackoverflow.com/questions/5181777/use-of-application-doevents)

我认为通常您应该将耗时的任务推送到单独的线程中，从中获取进度报告并更新您的 GUI。有很多方法可以创建“工作”线程并从中获得一些响应。例如，使用[BackgroundWorker 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)：

```
public partial class Form1 : Form
{
    public Form1() { InitializeComponent(); }

    private void button1_Click(object sender, EventArgs e)
    {
        BackgroundWorker w = new BackgroundWorker();
        w.WorkerReportsProgress = true;
        w.DoWork += new DoWorkEventHandler(w_DoWork);
        w.ProgressChanged += new ProgressChangedEventHandler(w_ProgressChanged);
        w.RunWorkerCompleted += new RunWorkerCompletedEventHandler(w_RunWorkerCompleted);
        w.RunWorkerAsync();
        button1.Text = "Started";
    }

    //may influence GUI, as this event handler is run on the GUI thread
    void w_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        button1.Text = "Job is done";
    }
    //may influence GUI, as this event handler is run on the GUI thread
    void w_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        button1.Text = e.ProgressPercentage.ToString();
    }
    //runs in the worker thread...should do the actual job
    //may influence GUI through `ReportProgress`
    //or through `Invoke` method
    void w_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker worker = sender as BackgroundWorker;
        for (int i = 1; i <= 10; i++)
        {
            Thread.Sleep(500);
            worker.ReportProgress(10 * i);
        }
    }
} 
```

或者您可以使用[任务类](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)：

```
public partial class Form1 : Form
{
    public Form1() { InitializeComponent(); }

    private void button1_Click(object sender, EventArgs e)
    {
        new Task(DoTask).Start();
    }

    void DoTask()
    {
        for (int i = 1; i <= 10; i++)
        {
            Thread.Sleep(500);
            //here you need to update GUI through `Invoke` method
            //as the GUI may only be influenced from the the thread,
            //where it's created
            this.Invoke(new Action<int>((j) =>
                {
                    button1.Text = j.ToString();
                }), 10 * i);
        }
    }
} 
```

# dns - 虚拟主机上的 nginx 子域配置

> ID：14249060
> 
> 赞同：7
> 
> 时间：2013-01-10T00:47:17.800
> 
> 标签：dns, nginx, webserver, subdomain

关于 nginx 子域配置的 SO 上有几个问题，但没有找到与我的完全相同的问题。

假设我从我们组织`some.example.com`的更高级别的网络管理员那里得到了一个虚拟主机。`example.com`我想`some.example.com`用作我的主要站点并使用`foo.some.example.com`和`bar.some.example.com`辅助用途（代理等）。我尝试了这个简单的配置并将其放在下面`sites-enabled`但没有用：

```
server {
    listen 80; 
    server_name some.example.com;
    root /home/me/public_html/some;
    index index.html index.htm;
}

server {
    listen 80; 
    server_name foo.some.example.com;
    root /home/me/public_html/foo;
    index index.html index.htm;
}

server {
    listen 80; 
    server_name bar.some.example.com;
    root /home/me/public_html/bar;
    index index.html index.htm;
} 
```

在此设置中`some.example.com`工作正常，但对于其他两个浏览器返回`could not find foo.some.example.com`. 我在 ubuntu 服务器上运行它。

这个配置有问题吗？还是我应该与更高级别的网络管理员（制作`foo.some.example.com`和`bar.some.example.com`注册）交谈？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T01:15:49.613

子域配置从父域的 DNS 服务器中的条目开始，查找将子域解析为 Web 服务器的 IP 地址。Web 服务器依次根据其对子域的配置委托请求。

如果您的子域中没有 DNS 设置，则 example.com 的管理员需要设置 CNAME 别名。别名将子域指向同一个 Web 服务器，该服务器托管父域的网站。为每个子域添加规范名称 (CNAMES)。一旦子域被解析为 Web 服务器的 IP 地址，Web 服务器就可以将请求路由到不同的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T10:46:49.517

CNAME 只是将网络流量获取到您的 IP 地址的一种方式。该请求仍将在 Host: 标头中包含原始名称。

# regex - 用 sed 替换目录中多个文件的文本

> ID：14249061
> 
> 赞同：2
> 
> 时间：2013-01-10T00:47:24.483
> 
> 标签：regex, unix, sed

出于安全原因，我需要在日志文件中隐藏 IP 地址。IP 地址是版本 4 和 6。如何隐藏地址，

IPv4 示例`123.4.32.16`被替换为`x.x.x.x`IPv6

示例`232e:23o5:te43:5423:5433:0000:ef09:23ff`被替换`x:x:x:x:x:x:x:x`？

是否可以使用单个`sed`命令来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T00:56:57.523

您可能需要为此使用**find**和**sed**。

假设您的日志具有扩展名“.log”：

```
find /path/to/logs -type f -name '*.log' -exec       \
sed -i -e 's,[0-9]\+\(\.[0-9]\+\)\{3\},x.x.x.x,g'    \
-e 's,[0-9a-f]\+\(:[0-9a-f]\+\)\{7\},x:x:x:x:x:x:x:x,gi' {} \; 
```

这是如何运作的？

1.  首先，我们要求**find**从**/path/to/logs**开始递归查找扩展名为**.log**的文件。**-type f**告诉 find 我们不要查找常规文件。

*****   对于每个文件，它将执行**sed**。**-i**参数告诉 sed 你想就地编辑文件。（查看[http://www.grymoire.com/Unix/Sed.html](http://www.grymoire.com/Unix/Sed.html)）**** 

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:10:39.633

我用这个：

`find . -name "*.log" -exec grep -izl PATTERN {} \; | xargs perl -i.orig -e -n 's/PATTERN/REPLACEMENT/g'`

您需要插入您的 PATTERN 并将 *.log 替换为其他内容，具体取决于您的日志文件的名称。

-i.orig 备份被替换为 .orig 扩展名的文件。

我发现这比我尝试过的其他事情相对要快。find/grep 组合来识别候选人，然后 perl 来做这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T00:58:54.423

一种使用`find`and的解决方案`perl`：

```
find /the/directory -type f -exec perl -pi -e '
    s/\b\d{1,3}(\.\d{1,3}){3}\b/x.x.x.x/g;
    s/\b[a-f\d]{1,4}(:[a-f\d]{1,4}){7}\b/x:x:x:x:x:x:x:x/gi' {} \; 
```

（在一行上输入）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T01:00:30.893

好吧，首先，您可能应该只修复正在执行日志记录的任何内容，以按照您想要的方式进行记录。

现在，如果您需要返回并修改历史文件，您可以考虑使用`sed`

```
sed -e 's/\b(\d{1,3}\.){3}\d{1,3}\b/x.x.x.x/' /path/to/file
sed -e 's/\b([:xdigit:]{4}:){7}[:xdigit:]{4}\b/x.x.x.x.x.x.x.x/' /path/to_file 
```****

# sql - Magento PDO异常

> ID：14249067
> 
> 赞同：0
> 
> 时间：2013-01-10T00:47:50.450
> 
> 标签：sql, magento

我收到以下错误。我需要做什么？是收藏品还是其他东西？

```
2013-01-10T00:22:41+00:00 ERR (3): 
exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '= '')' at line 3' in /home/****/domains/****je.com/public_html/lib/Zend/Db/Statement/Pdo.php:228
Stack trace:
#0 /home/****/domains/****je.com/public_html/lib/Zend/Db/Statement/Pdo.php(228): PDOStatement->execute(Array)
#1 /home/****/domains/****je.com/public_html/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#2 /home/****/domains/****je.com/public_html/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#3 /home/****/domains/****je.com/public_html/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#4 /home/****/domains/****je.com/public_html/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT `main_ta...', Array)
#5 /home/****/domains/****je.com/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php(389): Zend_Db_Adapter_Pdo_Abstract->query('SELECT `main_ta...', Array)
#6 /home/****/domains/****je.com/public_html/lib/Zend/Db/Adapter/Abstract.php(734): Varien_Db_Adapter_Pdo_Mysql->query('SELECT `main_ta...', Array)
#7 /home/****/domains/****je.com/public_html/lib/Varien/Data/Collection/Db.php(687): Zend_Db_Adapter_Abstract->fetchAll('SELECT `main_ta...', Array)
#8 /home/****/domains/****je.com/public_html/app/code/core/Mage/Core/Model/Resource/Db/Collection/Abstract.php(520): Varien_Data_Collection_Db->_fetchAll('SELECT `main_ta...', Array)
#9 /home/****/domains/****je.com/public_html/lib/Varien/Data/Collection/Db.php(521): Mage_Core_Model_Resource_Db_Collection_Abstract->getData()
#10 /home/****/domains/****je.com/public_html/lib/Varien/Data/Collection.php(729): Varien_Data_Collection_Db->load()
#11 /home/****/domains/****je.com/public_html/app/code/core/Mage/Sales/Model/Order/Api/V2.php(115): Varien_Data_Collection->getIterator()
#12 [internal function]: Mage_Sales_Model_Order_Api_V2->items(Object(stdClass))
#13 /home/****/domains/****je.com/public_html/app/code/core/Mage/Api/Model/Server/Handler/Abstract.php(292): call_user_func_array(Array, Array)
#14 /home/****/domains/****je.com/public_html/app/code/core/Mage/Api/Model/Server/Wsi/Handler.php(78): Mage_Api_Model_Server_Handler_Abstract->call('c4922f9265fbeae...', 'order.list', Array)
#15 [internal function]: Mage_Api_Model_Server_WSI_Handler->__call('salesOrderList', Array)
#16 [internal function]: Mage_Api_Model_Server_WSI_Handler->salesOrderList(Object(stdClass))
#17 /home/****/domains/****je.com/public_html/lib/Zend/Soap/Server.php(832): SoapServer->handle('<s:Envelope xml...')
#18 /home/****/domains/****je.com/public_html/app/code/core/Mage/Api/Model/Server/Wsi/Adapter/Soap.php(92): Zend_Soap_Server->handle()
#19 /home/****/domains/****je.com/public_html/app/code/core/Mage/Api/Model/Server.php(84): Mage_Api_Model_Server_WSI_Adapter_Soap->run()
#20 /home/****/domains/****je.com/public_html/app/code/core/Mage/Api/controllers/V2/SoapController.php(46): Mage_Api_Model_Server->run()
#21 /home/****/domains/****je.com/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(420): Mage_Api_V2_SoapController->indexAction()
#22 /home/****/domains/****je.com/public_html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
#23 /home/****/domains/****je.com/public_html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#24 /home/****/domains/****je.com/public_html/app/code/core/Mage/Core/Model/App.php(349): Mage_Core_Controller_Varien_Front->dispatch()
#25 /home/****/domains/****je.com/public_html/app/Mage.php(642): Mage_Core_Model_App->run(Array)
#26 /home/****/domains/****je.com/public_html/index.php(88): Mage::run('', 'store')
#27 {main} 
```

我需要做什么？

这是 PDO.php 中的部分（第 228 行），它指的是：

```
 public function _execute(array $params = null)
    {
        try {
            if ($params !== null) {
                return $this->_stmt->execute($params);
            } else {
                return $this->_stmt->execute();
            }
        } catch (PDOException $e) {
            #require_once 'Zend/Db/Statement/Exception.php';
            throw new Zend_Db_Statement_Exception($e->getMessage(), (int) $e->getCode(), $e);
        }
    } 
```

谢谢杰伦

# jquery - 记住 jQuery 在页面刷新和设置 Jquery cookie 插件后隐藏或显示

> ID：14249068
> 
> 赞同：0
> 
> 时间：2013-01-10T00:48:20.520
> 
> 标签：jquery, jquery-cookie

```
$(document).ready(function(){
var ScreenSizeHis = $.cookie(ScreenSizeHis);
    $("#arrow").bind('click', function(){
        $('#naviclosed').fadeIn("fast");
        $(window).unbind('resize');
    });
    $('#naviclosed').bind('click', function () {
        $('#naviclosed').fadeOut("fast");
        if ((ScreenSizeHis = $.cookie('ScreenSizeHis')) != undefined) {
            $(window).bind('resize', ScreenSize);
        }
    });
});
$(window).resize(function() {
    ScreenSize();
});
$(document).ready(function() {
 windowwidth = $(window).width();
if (windowwidth < 1040) {
    $('#naviclosed').fadeIn("fast");
}
if (windowwidth >= 1040) {
      $('#naviclosed').fadeOut("fast");
}
});
function ScreenSize()  {
  windowsize = $(window).width();
    if (windowsize < 1040) {
      $('#naviclosed').fadeIn("fast");
    }
    if (windowsize >= 1040) {
    $('#naviclosed').fadeOut("fast"); 
    }
} 
```

好的，在我放入 cookie 插件后，这些按钮甚至都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:50:05.813

您可以通过向 提供更多参数来设置 cookie `$.cookie`。单个参数用于检索：

```
//name, value, additional -- expire cookie in 30 days
$.cookie('ScreenSizeHis', ScreenSizeHis, {expires: 30}); 
```

# assembly - 对 8085 指令代码中 MVI 指令的二进制代码感到困惑。请参见

> ID：14249070
> 
> 赞同：1
> 
> 时间：2013-01-10T00:48:42.440
> 
> 标签：assembly, microprocessors, instruction-set, machine-language, 8085

考虑指令 MVI A,32H 将 32H 加载到寄存器 A（Intel 8085 微处理器）中。

我的书说它是一个双字节指令，其中第一个字节是操作码，第二个是操作数。第一个字节是 0011 1110（十六进制的 3E），第二个字节是 0011 0010（十六进制的 32）。

我对操作码部分如何准确地转换为机器码感到困惑。我的意思是......“0011 1110”的哪一部分代表“MVI”，它的哪一部分告诉要加载寄存器A？“3E”如何告诉微处理器这两个信息？那就是它必须加载数据以及目标寄存器。还是这整个操作码是预定义的，您无法将操作码中的“MVI”和“目标寄存器”分开？

我希望我的问题是有道理的，哈哈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T01:08:14.273

[http://www.pastraiser.com/cpu/i8085/i8085_opcodes.html](http://www.pastraiser.com/cpu/i8085/i8085_opcodes.html)

整个 0x3E 表示 MVI A。

从上面链接中的表格（假设它可以信任）

```
0x0E MVI C  00001110
0x1E MVI E  00011110
0x2E MVI L  00101110
0x3E MVI A  00111110

0x06 MVI B  00000110
0x16 MVI D  00010110
0x26 MVI H  00100110
0x36 MVI M  00110110 
```

该图表上的颜色编码强烈指示操作码解码器，如果 2 msbit 为 00，则如果低 2 位为 10，则如果位 2 为 1，则它是 MVI，位 3-6 确定哪个寄存器。基本上 0b00rrr110 是一个 MVI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-25T10:58:05.430

改进[这里](https://stackoverflow.com/a/14249242/11155208)给出的答案。 `MVI R,d8`将提供的 8 位数据 ( `d8`) 加载到指定的寄存器或内存位置 ( `R`)。有八种可能的选择，`R`即`B`、`C`、`D`、`E`、`H`、和。这八种可能性可以用三位编码如下。`L``M``A`

```
name | code
-----|-----
  B  | 000
  C  | 001
  D  | 010
  E  | 011
  H  | 100
  L  | 101
  M  | 110
  A  | 111 
```

`MVI R,d8`将寄存器名称编码为 8 位操作码本身，`00rrr110`其中`rrr`代表寄存器的 3 位代码，如上表所示。因此`MVI A,32H`将导致其第一个字节（操作码）为`00 111 110`or`0x3E`而第二个字节（数据）为`0x32`。

# javascript - JS Player --- Err : My Return false 不适用于 IE10 但适用于所有其他浏览器

> ID：14249075
> 
> 赞同：0
> 
> 时间：2013-01-10T00:48:55.863
> 
> 标签：javascript, jquery

嗨，我使用 javascript 制作了一个 mp3 播放器，它可以在除 IE10 之外的所有浏览器上完美运行

Ex of page : [http://www.mupiz.com/noon](http://www.mupiz.com/noon) (试着点击一首歌)

但是IE10遵循链接并忽略之前的脚本......

这是我的脚本：

```
 var list = $("#playlist").find("a:not(.songLink)");
    listNC=new Array();

    for (var i=0;i<list.length;i++) { // we get all the song

        list[i].rel = i; 

        $(list[i]).parent().parent().prepend("<td class='notplayed' width='25px'><img src='../../images/lecteur-B-playlist-play.png' style='z-index:10000'/></td>");
        listNC[i]=girlify(list[i].href);

        list[i].onclick = function(event) { // onclick on each link

                   if($(this).attr('class')!="songLink"){
            soundManager.stopAll(); 
            current = this.rel; 

                event.preventDefault();
                        lire_current(); // this play the song
                       return false; // **this does not work!**

                       }

        }; 
```

这是 CSS 的专用部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:20:00.780

你有很多混搭 jQuery 和常规 DOM 代码，这有点令人困惑。我认为它只能在其他浏览器中运行，这对你来说很不走运。最终，我相信 IE 在您的调用中遇到错误，`preventDefault`因为它具有不同的事件模型，并且您没有使用均衡的 jQuery 事件。这意味着`preventDefault`不做它的工作，并且`return false`由于错误而永远不会达到。

我将修改提取的代码如下：

```
var listNC = [],
    current;

$('#playlist')
    .find('a:not(.songLink)')
    .each(function (i) {
        var $this = $(this);

        $this
            .attr('rel', i)
            .parent()
                .parent()
                    .prepend('<td class="notplayed" width="25px"><img src="../../images/lecteur-B-playlist-play.png" style="z-index:10000"/></td>');

        listNC[i] = girlify($this.attr('href'));
    })
    .on('click', function (e) {
        soundManager.stopAll();
        current = $(this).attr('rel');

        lire_current();

        // Event control:
        e.preventDefault(); //keeps link from being followed

        //I don't think you want either of these next two lines:
        e.stopPropagation(); //keeps event from bubbling...probably not what you want
        return false; //causes same as calling e.preventDefault() e.stopPropagation()...probably not what you want
    }); 
```

我当然无法测试它，但我认为它会做你想要的。

# r - 如何仅获取特定行的标准化列？

> ID：14249082
> 
> 赞同：0
> 
> 时间：2013-01-10T00:49:26.843
> 
> 标签：r

> **可能重复：**
> [用于按索引对向量进行分区并在该分区上执行操作的惯用 R 代码](https://stackoverflow.com/questions/10748253/idiomatic-r-code-for-partitioning-a-vector-by-an-index-and-performing-an-operati)

[与如何仅获取特定行的列均值](https://stackoverflow.com/questions/12394332/how-to-get-column-mean-for-specific-rows-only) 相关？

我正在尝试在我的数据框中创建一个新列，它将“分数”列缩放为基于“圆形”列的部分。

```
Score     Quarter        
98.7      QTR 1 2011
88.6      QTR 1 2011
76.5      QTR 1 2011
93.5      QTR 2 2011
97.7      QTR 2 2011
89.1      QTR 1 2012 
79.4      QTR 1 2012
80.3      QTR 1 2012 
```

看起来像这样

```
Unit Score     Quarter         Scale        
 6    98.7      QTR 1 2011     1.01
 1    88.6      QTR 1 2011     .98 
 3    76.5      QTR 1 2011     .01
 5    93.5      QTR 2 2011     2.0
 6    88.6      QTR 2 2011     2.5
 9    89.1      QTR 1 2012     2.2
 1    79.4      QTR 1 2012     -.09
 3    80.3      QTR 1 2012     -.01
 3    98.7      QTR 1 2011     -2.2 
```

我不想标准化整个列，因为我想对数据进行趋势分析并真正了解单位相对于每个季度的表现如何，而不是 scale(data$Score) 将所有点相互比较，而不考虑轮次。

我试过这样的变种：

```
data$Score_Scale <-  with (data, scale(Score), findInterval(QTR, c(-Inf,"2011-01-01","2011-06-30", Inf)), FUN= scale) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T00:57:18.880

在这里使用`ave`可能是一个不错的选择：

获取您的数据：

```
test <- read.csv(textConnection("Score,Quarter
98.7,Round 1 2011
88.6,Round 1 2011
76.5,Round 1 2011
93.5,Round 2 2011
97.7,Round 2 2011
89.1,Round 1 2012
79.4,Round 1 2012
80.3,Round 1 2012"),header=TRUE) 
```

`scale`每组内的数据`Quarter`：

```
test$score_scale <- ave(test$Score,test$Quarter,FUN=scale)
test

  Score      Quarter score_scale
1  98.7 Round 1 2011  0.96866054
2  88.6 Round 1 2011  0.05997898
3  76.5 Round 1 2011 -1.02863953
4  93.5 Round 2 2011 -0.70710678
5  97.7 Round 2 2011  0.70710678
6  89.1 Round 1 2012  1.15062301
7  79.4 Round 1 2012 -0.65927589
8  80.3 Round 1 2012 -0.49134712 
```

为了清楚地表明这是可行的，以下是每个`Quarter`组的单独结果：

```
> as.vector(scale(test$Score[test$Quarter=="Round 1 2011"]))
[1]  0.96866054  0.05997898 -1.02863953
> as.vector(scale(test$Score[test$Quarter=="Round 2 2011"]))
[1] -0.7071068  0.7071068
> as.vector(scale(test$Score[test$Quarter=="Round 1 2012"]))
[1]  1.1506230 -0.6592759 -0.4913471 
```

# c# - 将 C# Levenshtein Distance 移植到 Java

> ID：14249086
> 
> 赞同：-1
> 
> 时间：2013-01-10T00:50:00.953
> 
> 标签：c#, java, c++, pointers, levenshtein-distance

我正在从现有的应用程序开发拼写检查器应用程序，任何人都可以帮助我更改这部分代码，我无法将指针移植`stackalloc`到 Java，因为不存在等效项。具有完全相同功能的 java 方法。

```
public static unsafe double GNULevenstein(string word1, string word2)
    {
        // this algorithm normally computes un-normalized distance between two string.
        fixed (char* word1Ptr = word1)
        fixed (char* word2Ptr = word2)
        {
            char* pointerToWord1 = word1Ptr;
            char* pointerToWord2 = word2Ptr;

            /* skip equal start sequence, if any */
            if (word1.Length >= word2.Length)
            {
                while (*pointerToWord1 == *pointerToWord2)
                {
                    /* if we already used up one string,
                     * then the result is the length of the other */
                    if (*pointerToWord1 == '\0') break;
                    pointerToWord1++; 
                    pointerToWord2++;
                }
            }
            else // wordl < word2
            {
                while (*pointerToWord1 == *pointerToWord2)
                {
                    /* if we already used up one string,
                     * then the result is the length of the other */
                    if (*pointerToWord2 == '\0') break;
                    pointerToWord1++; 
                    pointerToWord2++;
                }
            }

            /* length count #1*/
            int len1 = word1.Length - (int)(pointerToWord1 - word1Ptr);
            int len2 = word2.Length - (int)(pointerToWord2 - word2Ptr);

            /* if we already used up one string, then
             the result is the length of the other */
            if (*pointerToWord1 == '\0') 
                return ExportResult( len2 , word1.Length,word2.Length , false);
            if (*pointerToWord2 == '\0')
                return ExportResult(len1, word1.Length, word2.Length, false);

            /* length count #2*/
            pointerToWord1 += len1;
            pointerToWord2 += len2;

            /* cut of equal tail sequence, if any */
            while (*--pointerToWord1 == *--pointerToWord2)
            {
                len1--; 
                len2--;
            }

            /* reset pointers, adjust length */
            pointerToWord1 -= len1++;
            pointerToWord2 -= len2++;

            /* possible dist to great? */
            //if ((len1 - len2 >= 0 ? len1 - len2 : -(len1 - len2)) >= char.MaxValue) return 1;
            if (Math.Abs(len1 - len2) >= char.MaxValue)
                return ExportResult(1, false);  // no similarity

            char* tmp;
            /* swap if l2 longer than l1 */
            if (len1 < len2)
            {
                tmp = pointerToWord1; 
                pointerToWord1 = pointerToWord2; 
                pointerToWord2 = tmp;
                len1 ^= len2; 
                len2 ^= len1; 
                len1 ^= len2;
            }

            /* fill initial row */

            int i, j, n;

            n = (*pointerToWord1 != *pointerToWord2) ? 1 : 0;
            char* r = stackalloc char[len1 * 2];

            char* p1, p2;
            for (i = 0, p1 = r; i < len1; i++, *p1++ = (char)n++, p1++) 
            { /*empty*/}

            /* calc. rowwise */
            for (j = 1; j < len2; j++)
            {
                /* init pointers and col#0 */
                p1 = r + ((j & 1) == 0 ? 1 : 0);
                p2 = r + (j & 1);
                n = *p1 + 1;
                *p2++ = (char)n; p2++;
                pointerToWord2++;

                /* foreach column */
                for (i = 1; i < len1; i++)
                {
                    if (*p1 < n) n = *p1 + (*(pointerToWord1 + i) != *pointerToWord2 ? 1 : 0); /* replace cheaper than delete? */
                    p1++;
                    if (*++p1 < n) n = *p1 + 1; /* insert cheaper then insert ? */
                    *p2++ = (char)n++; /* update field and cost for next col's delete */
                    p2++;
                }
            }

            /* return result */
            return ExportResult( n - 1, word1.Length, word2.Length, false);
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T01:00:41.070

该方法看起来像是从 C/C++ 懒惰地移植而不是用 C# 编写的。C# 中的字符串操作通常足够快，以至于`unsafe`直接使用和处理`char*`s 是浪费时间和精力......

我只是用谷歌搜索了方法名称，看起来你只想要[Levenshtein distance](http://en.wikibooks.org/wiki/Algorithm_implementation/Strings/Levenshtein_distance#Java)的 Java 实现，所以，来自同一个链接：

```
public class LevenshteinDistance {
        private static int minimum(int a, int b, int c) {
                return Math.min(Math.min(a, b), c);
        }

        public static int computeLevenshteinDistance(CharSequence str1,
                        CharSequence str2) {
                int[][] distance = new int[str1.length() + 1][str2.length() + 1];

                for (int i = 0; i <= str1.length(); i++)
                        distance[i][0] = i;
                for (int j = 1; j <= str2.length(); j++)

                distance[0][j] = j;

            for (int i = 1; i <= str1.length(); i++)
                    for (int j = 1; j <= str2.length(); j++)
                            distance[i][j] = minimum(
                                            distance[i - 1][j] + 1,
                                            distance[i][j - 1] + 1,
                                            distance[i - 1][j - 1]
                                                            + ((str1.charAt(i - 1) == str2.charAt(j - 1)) ? 0
                                                                            : 1));

            return distance[str1.length()][str2.length()];
    }
} 
```

# css - 环境 LAMP - 自动编译 css 文件 (@import)

> ID：14249087
> 
> 赞同：0
> 
> 时间：2013-01-10T00:50:01.413
> 
> 标签：css, linux, module, web-traffic

和你们中的很多人一样，我有一个 css 文件重新组合我网站的所有 css 文件，使用

> @进口

我知道这不是最好的方法，特别是如果我们希望获得客户端和服务器之间的事务性能（更少的查询，更少的权重），但在我的情况下，访问者肯定会（在大多数情况下）访问所有我网站的页面，因此包含所有页面的所有 css 文件并不是一个非常糟糕的选择

但是使用导入方法，客户端将查询每个文件，例如我的 global.css 文件包含：

> @import 'test.css' @import 'index.css' @import 'love.css'

客户端会查询 global.css、test.css、index.css 和 love.css

我想知道 linux 中是否有一种方法或模块（我的专用服务器是 debian 6.0）自动将 test.css、index.css、love.css 的所有 css 包含到 global.css 中

然后客户端将只查询一个文件，global.css，其中包含所有的 css 代码

我知道有一些简单的方法/软件可以将多个 css 文件编译成一个 css 文件，但我正在寻找可以在服务器端自动执行此操作的东西

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T00:51:49.347

LessCSS 有一个[PHP 实现](http://leafo.net/lessphp/)，它的可移植性差不多。

# java - 这个java代码有什么问题？

> ID：14249091
> 
> 赞同：2
> 
> 时间：2013-01-10T00:50:25.357
> 
> 标签：java

我正在学习java。我正在阅读的书有一个问题，询问以下代码有什么问题？我在 NetBeans 中输入了代码，我可以看到错误，但为什么会出现此错误以及如何解决？

错误在代码上突出显示`public A(int t)`，它说

> 类 B 中的构造函数 B 不能应用于给定类型，需要 int，找不到参数，原因是实际参数列表和形式参数列表的长度不同。

这是代码：

```
public class Test {
    public static void main(String[] args) {
       B b = new B(5);
    }
}

class A extends B {
    public A(int t)  {
        System.out.println("A's constructor is invoked");
    }
}

class B  {
    public B(int k)   {
        System.out.println("B's constructor is invoked");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T00:52:39.457

当您`super class`有`args constructor`并且没有无参数构造函数时，您必须使用`super(args)`来自子类构造函数的调用显式调用它

```
class A extends B {
     public A(int t)  {
         super(t);
            System.out.println("A's constructor is invoked");
        }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T00:52:20.217

您需要调用超类的构造函数作为第一个语句`A(int)`：

```
public A(int t)  {
   super(t);
   System.out.println("A's constructor is invoked");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T00:54:38.277

B 类定义了构造函数，因此它没有公共隐式默认构造函数（没有参数）。`super(t)`如果零参数超类构造函数不可用，所有子类构造函数都必须通过 显式调用超类构造函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T00:55:20.230

B 类只有一个带`int`参数的构造函数。另一方面，您在 A 类中的构造函数（隐式）尝试调用 A 的超类（即 B）中不带参数的构造函数。这是错误的原因。至少有两种方法可以解决问题：

1.  在 B 类中创建一个无参数构造函数。

2.  显式调用 B 类中的构造函数，该构造函数将 int 作为参数。您可以使用`super`关键字来执行此操作。

# ember.js - 在 Emberjs 中创建和销毁视图

> ID：14249092
> 
> 赞同：0
> 
> 时间：2013-01-10T00:50:42.060
> 
> 标签：ember.js

我有一个列出客户端并允许用户在模式对话框中创建新客户端的应用程序。仅当我处理新的客户端按钮单击时，我才创建客户端视图并将其附加到 Dom。

我不确定视图是如何被破坏的或以什么频率完成的，所以在我创建 clientView 之前，我会保留它的副本，下次用户打算创建一个新客户端时，我会提供相同的视图。

这是正确的方法还是我宁愿在用户保存或取消操作时破坏视图，并在每次需要时继续创建新视图。

我查看了 connectOutlet 的源代码，显然每次调用 connectOutlet 时都会创建一个新视图。

任何人都可以验证这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:20:51.773

没错，connectOutlet 每次运行时都会创建一个新视图。通常，视图创建足够便宜，可以根据需要进行。因此，您无需担心保持视野。

# windows-8 - 在 windows 8 和 windows 服务器之间为 ftp 配置 iptables：rst 是否清除 nat？

> ID：14249098
> 
> 赞同：1
> 
> 时间：2013-01-10T00:51:19.453
> 
> 标签：windows-8, ftp, iptables, nat

根本问题是我无法通过 ftp 从 Windows 8 笔记本电脑通过我的 linux/iptables 防火墙（被动或主动 ftp，没关系）将文件上传到 Windows 服务器。适用于 Windows 7、Linux 以及当我移除防火墙时。

我记录了所有进出服务器的数据包，每次失败时都会显示相同的模式。在我看到从服务器到笔记本电脑的 RST 数据包之前，一切看起来都很正常。它来自和去往之前已设置和使用的端口。数据包被转发到笔记本电脑。到目前为止，它看起来不错。然后服务器使用与 RST 数据包中相同的源端口和目标端口发送 ACK FIN 数据包。这不会转发到笔记本电脑，我认为这是因为 RST 导致 nat 表断开该连接。这是应该发生的事情吗？如果没有，有人可以解释我应该如何设置我的防火墙吗？还是windows机器之间有问题？

我使用模块 nf_conntrack_ftp 和 nf_nat_ftp 来处理防火墙中的 ftp 和 nat。

谢谢！

# breeze - 查询不同的值

> ID：14249100
> 
> 赞同：0
> 
> 时间：2013-01-10T00:51:44.233
> 
> 标签：breeze

我现在正试图让它工作几个小时。我尝试了示例并阅读了文档，但我无法弄清楚。

我想使用名称字段从数据库中查询不同的值。我认为这应该有效，但事实并非如此。未找到 Distinct 方法

```
[HttpGet]
    public IQueryable<MvlOP> MvlOpsPerson(long mvlId)
    {
        System.Data.Entity.Infrastructure.DbQuery<MvlOP> query = ContextProvider.Context.MvlOps;

        query = query.Include("StatusOP");
        return query.Where(op => op.MvlId == mvlId).Distinct(new PropertyComparer<MvlOP>("Id_P"));
    } 
```

我收到以下错误：

```
ExceptionMessage=LINQ to Entities does not recognize the method 'System.Linq.IQueryable`1[MAHN.Model.MvlOP] Distinct[MvlOP](System.Linq.IQueryable`1[MAHN.Model.MvlOP], System.Collections.Generic.IEqualityComparer`1[MAHN.Model.MvlOP])' method, and this method cannot be translated into a store expression. 
```

ExceptionType=System.NotSupportedException

所以这是错误的。据我了解，微风不提供查询不同的值。查询全部和过滤不是一种选择。任何有关如何做到这一点的帮助都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:21:18.410

我发布了这个，所以可能需要它的人可以使用它。也许这可以通过某种方式得到改善。（受 Breeze DocCode 启发（感谢 Northwind 控制器中的 Partial Class Api 方法 :)）

可以通过以下方式查询不同的值：为了能够使用 Distinct(IEqualityComparer) 方法，查询必须在内存中作为 IEnumerable。EqualityComparer 不能转换为 SQL 语句。因此应用 where 子句，然后由比较器过滤结果记录。

`return query.AsQueryable()`: 为了能够使用 skip/take 和 inlineCount，查询必须是`IQueryable<T>`. 为此方法`AsQueryable()`。

```
//The API Method ----------
[HttpGet]
    public IQueryable<MvlOPPersonPartial> MvlOpsPerson(long mvlId)
    {
        var query = (from op in ContextProvider.Context.MvlOps
                      where op.MvlId == mvlId
                      select new MvlOPPersonPartial()
                          {
                              MvlId = op.MvlId,
                              Kundenname = op.Kundenname,
                              Kundennummer = op.Kundennummer,
                              Id_P = op.Id_P
                          })
                          .AsEnumerable()
                          .Distinct(new PropertyComparer<MvlOPPersonPartial>("Id_P"));
        return query.AsQueryable();
    }

public class MvlOp
{
...
    public string Kostenstelle { get; set; }
    public string Betreuer_Id { get; set; }
    public decimal? Id_P { get; set; }
    public string Kundenname { get; set; }
    public string Kundennummer { get; set; }
    public string Person_Typ1 { get; set; }
...
}

//The partial class needed for distinct values ------------
//MvlOP cannot be constructed in an LINQ to Entities query
public class MvlOPPersonPartial
{
    public long MvlId { get; set; }
    public string Kundenname { get; set; }
    public string Kundennummer { get; set; }
    public decimal? Id_P { get; set; }
}

//A generic comparer ---------------
public class PropertyComparer<T> : IEqualityComparer<T>
{
    private PropertyInfo _PropertyInfo;

    /// <summary>
    /// Creates a new instance of PropertyComparer.
    /// </summary>
    /// <param name="propertyName">The name of the property on type T 
    /// to perform the comparison on.</param>
    public PropertyComparer(string propertyName)
    {
        //store a reference to the property info object for use during the comparison
        _PropertyInfo = typeof(T).GetProperty(propertyName,
    BindingFlags.GetProperty | BindingFlags.Instance | BindingFlags.Public);
        if (_PropertyInfo == null)
        {
            throw new ArgumentException(string.Format("{0} is not a property of type {1}.", propertyName, typeof(T)));
        }
    }

    #region IEqualityComparer<T> Members

    public bool Equals(T x, T y)
    {
        //get the current value of the comparison property of x and of y
        object xValue = _PropertyInfo.GetValue(x, null);
        object yValue = _PropertyInfo.GetValue(y, null);

        //if the xValue is null then we consider them equal if and only if yValue is null
        if (xValue == null)
            return yValue == null;

        //use the default comparer for whatever type the comparison property is.
        return xValue.Equals(yValue);
    }

    public int GetHashCode(T obj)
    {
        //get the value of the comparison property out of obj
        object propertyValue = _PropertyInfo.GetValue(obj, null);

        if (propertyValue == null)
            return 0;

        else
            return propertyValue.GetHashCode();
    }

    #endregion
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:12:34.023

我认为问题在于实体框架 (EF) 无法使用您的 PropertyComparer。EF 仅支持没有比较器的 Distinct。

# android - Android Sherlock ActionBar Tab 无法正确分离 SupportMapFragment

> ID：14249104
> 
> 赞同：0
> 
> 时间：2013-01-10T00:51:55.817
> 
> 标签：android, android-actionbar, actionbarsherlock, actionbarsherlock-map

我有一个带有 Sherlock ActionBar 和支持库的 Android 项目。在 SherlockFragmentActivity 的 onCreate 中，我使用 2 个选项卡初始化了 ActionBar：

```
private void configureActionBar(){
    ActionBar actionBar = getSupportActionBar();
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    ActionBar.Tab tab = actionBar.newTab()
            .setText("Events")
            .setTabListener(new TabListener<SampleListFragment>(
                    this, "events", SampleListFragment.class));
    actionBar.addTab(tab);

    tab = actionBar.newTab()
            .setText("Map")
            .setTabListener(new TabListener<SupportMapFragment>(
                    this, "map", SupportMapFragment.class));
    actionBar.addTab(tab);
} 
```

问题是当我返回第一个选项卡时，屏幕是黑色的，带有灰色的地图控件。如果我在设备屏幕上关闭\，地图会完全删除，一切都很好。

TabListener 实现来自谷歌手册：

```
public class TabListener<T extends Fragment> implements ActionBar.TabListener {
private Fragment mFragment;
private final Activity mActivity;
private final String mTag;
private final Class<T> mClass;

/** Constructor used each time a new tab is created.
 * @param activity  The host Activity, used to instantiate the fragment
 * @param tag  The identifier tag for the fragment
 * @param clz  The fragment's Class, used to instantiate the fragment
 */
public TabListener(Activity activity, String tag, Class<T> clz) {
    mActivity = activity;
    mTag = tag;
    mClass = clz;
}

/* The following are each of the ActionBar.TabListener callbacks */

public void onTabSelected(ActionBar.Tab tab, FragmentTransaction ft) {
    // Check if the fragment is already initialized
    if (mFragment == null) {
        // If not, instantiate and add it to the activity
        mFragment = Fragment.instantiate(mActivity, mClass.getName());
        ft.add(android.R.id.content, mFragment, mTag);
    } else {
        // If it exists, simply attach it in order to show it
        ft.attach(mFragment);
    }
}

public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction ft) {
    if (mFragment != null) {
        // Detach the fragment, because another one is being attached
        ft.detach(mFragment);
    }
}

public void onTabReselected(ActionBar.Tab tab, FragmentTransaction ft) {
    // User selected the already selected tab. Usually do nothing.
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:41:36.630

我曾经在使用 SlidingMenu 实现 SupportMapFragment 时遇到过类似的问题，在搜索论坛后我发现这是 surfaceView 的问题，可以通过使用此方法设置地图透明来修复它：

```
private void setMapTransparent(ViewGroup group) {
        int childCount = group.getChildCount();
        for (int i = 0; i < childCount; i++) {
            View child = group.getChildAt(i);
            if (child instanceof ViewGroup) {
                setMapTransparent((ViewGroup) child);
            } else if (child instanceof SurfaceView) {
                child.setBackgroundColor(0x00000000);
            }
        }
    } 
```

只需在 SupportMapFragment 的 onCreateView 上调用该方法。

# jquery - jquery自动调整大小的div集

> ID：14249107
> 
> 赞同：0
> 
> 时间：2013-01-10T00:52:13.337
> 
> 标签：jquery, html, css

`wrapper`我的页面某处有一个固定大小的div。我想动态添加 child `div`，但我希望所有子 div 保持相同的大小。

有人知道任何插件吗？

**编辑**

我希望只在水平方向上添加 div。它是一个 1xN 网格。（感谢您的评论。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:50:12.220

这是一种将 div 添加到包装器 div 并修复其大小的方法：

**HTML**

```
<div id="wrapper" class="clearfix"></div>

<input type="button" id="AddDiv" value="AddDiv" /> 
```

**CSS**

```
.clearfix:before,
.clearfix:after {
    content: " "; 
    display: table; 
}
.clearfix:after {
    clear: both;
}

#wrapper {

}
#wrapper > div {
    height: 100px;
    width: 100px;
    margin-right: 10px;
    margin-bottom: 10px;
    background: #cc0000;
    float: left;
} 
```

**Javascript**

```
$('#AddDiv').on('click', function () {
    $('#wrapper').append($('<div />'));
}); 
```

**[演示](http://jsfiddle.net/UBE7m/)**

# javascript - 保存 cookie 的问题

> ID：14249109
> 
> 赞同：0
> 
> 时间：2013-01-10T00:52:16.063
> 
> 标签：javascript, html, cookies

我是 javascript 新手，我在编写 cookie 时遇到问题。这是我的代码

```
 function writeCookie(name, value, days){
        var cookie_expires;
        if (days) {
            var date = new Date();
            date.setTime(date.getTime()+(days*24*60*60*1000));
            cookie_expires = "; expires=" + date.toGMTString();
}
else {
    cookie_expires = "";
}
document.cookie = name + "=" + value + cookie_expires;

    } 
```

然后如果我调用这个函数

```
function check(){
      alert("all cookies"+document.cookie);
 } 
```

它什么也没给我。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:02:44.117

尝试使用这些函数来编写和获取 cookie：

```
function setCookie(c_name,value,exdays)
{
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
    document.cookie=c_name + "=" + c_value;
}

function getCookie(c_name)
{
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++)
    {
       x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
       y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
       x=x.replace(/^\s+|\s+$/g,"");
       if (x==c_name)
       {
           return unescape(y);
       }
    }
} 
```

# java - 我在我的书中做一个练习，这段代码显示错误

> ID：14249114
> 
> 赞同：-1
> 
> 时间：2013-01-10T00:52:55.113
> 
> 标签：java

```
public class Object {

    public static void main(String[] args) {
        BankAccount account;
        account = getAccount();

        JOptionPane.showMessageDialog(null, "The account balance of $"
                + account.getBalance());
        System.exit(0);
    }

    public static BankAccount getAccount() {
        String input;
        double balance;

        input = JOptionPane.showInputDialog("Enter");

        balance = Double.parseDouble(input);
        return new BankAccount(balance);
    }
} 
```

错误是它找不到“BankAccount”符号。我正在尝试返回一个对象并显示。代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T00:55:45.520

你实际上并没有声明一个`BankAccount`类。您有一个返回 a 的静态方法`BankAccount`，但它从未在任何地方声明过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T00:59:43.410

正如@Slaks 所说，这个名字`Object`不是一个好主意，因为 Java 已经有一个名为`Object`. 尝试为您的班级找到一个更具描述性的名称。

至于错误，编译器不知道 BankAccount 类是什么。您需要以某种方式提供此类。如果您还没有编写 BankAccount 类，则需要这样做。如果您已经编写了它，那么编译器将找不到它。解决此问题的确切方法取决于您如何编译代码。您使用的是 IDE 还是命令行编译器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T00:54:12.480

正如错误**明确**指出的那样，编译器不知道一个`BankAccount`类。

# python - 将输出序列化为 JSON - ValueError：检测到循环引用

> ID：14249115
> 
> 赞同：41
> 
> 时间：2013-01-10T00:53:13.933
> 
> 标签：python, json, python-2.7

我正在尝试将我的 mysql 查询的结果输出到 JSON。我在序列化 datetime.datetime 字段时遇到问题，所以我写了一个小函数来做到这一点：

```
def date_handler(obj):
    if hasattr(obj, 'isoformat'):
        return obj.isoformat()
    else:
        return obj 
```

然后在主代码中我正在运行：

```
products_json = []
for code in best_matching_codes:
    cur = db.cursor()
    query = "SELECT * FROM %s WHERE code LIKE '%s'" % (PRODUCTS_TABLE_NAME, product_code)
    cur.execute(query)
    columns = [desc[0] for desc in cur.description]
    rows = cur.fetchall()
    for row in rows:
        products_json.append(dict((k,v) for k,v in zip(columns,row)))   

return json.dumps(products_json, default = date_handler) 
```

但是，由于我编写了 date_handler 函数，我收到“ValueError：检测到循环引用”

```
127.0.0.1 - - [10/Jan/2013 00:42:18] "GET /1/product?code=9571%2F702 HTTP/1.1" 500 -
Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/flask/app.py", line 1701, in __call__
return self.wsgi_app(environ, start_response)
  File "/Library/Python/2.7/site-packages/flask/app.py", line 1689, in wsgi_app
response = self.make_response(self.handle_exception(e))
  File "/Library/Python/2.7/site-packages/flask/app.py", line 1687, in wsgi_app
response = self.full_dispatch_request()
  File "/Library/Python/2.7/site-packages/flask/app.py", line 1360, in full_dispatch_request
rv = self.handle_user_exception(e)
  File "/Library/Python/2.7/site-packages/flask/app.py", line 1358, in full_dispatch_request
rv = self.dispatch_request()
  File "/Library/Python/2.7/site-packages/flask/app.py", line 1344, in dispatch_request
return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/pisarzp/Desktop/SusyChoosy/susyAPI/test1.py", line 69, in product_search
return json.dumps(products_json, default = date_handler)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py", line 238, in dumps
**kw).encode(obj)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/encoder.py", line 201, in encode
chunks = self.iterencode(o, _one_shot=True)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/encoder.py", line 264, in iterencode
return _iterencode(o, 0)
ValueError: Circular reference detected 
```

我打破了什么？有没有更好的方法将输出序列化为 JSON？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-10T05:18:00.230

您作为参数传递的`default`函数只会被`json`模块本身不能序列化的对象调用。它必须返回一个可序列化的对象，或者引发一个 TypeError。

如果它不是您正在修复的一种类型（日期），您的版本将返回与您传递的相同对象。这导致了循环引用错误（这是误导性的，因为圆在被处理后位于一个对象和它自身之间`date_handler`）。

您可以通过更改以在其块`date_handler`中引发异常来开始解决此问题。`else`这仍然可能会失败，但是您可能随后可以使用如下代码找出导致问题的数据结构中的对象是什么：

```
def date_handler(obj):
    if hasattr(obj, 'isoformat'):
        return obj.isoformat()
    else:
        raise TypeError(
            "Unserializable object {} of type {}".format(obj, type(obj))
        ) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-29T11:42:21.473

而不是提高`TypeError`自己，您应该将调用中继到`JSONEncoder`的默认方法：

```
def date_handler(obj):
    if hasattr(obj, 'isoformat'):
        return obj.isoformat()
    else:
        json.JSONEncoder.default(self,obj) 
```

这也将提高`TypeError`并且是一种更好的做法，它允许`JSONEncoder`尝试和编码您的方法不能的类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-02T17:52:12.443

```
json.dumps(obj, default=method_name) 
```

> “method_name”函数必须返回一个序列化对象。

```
def method_name(obj):
    data = {
            '__class__': obj.__class__.__name__,
            '__module__': obj.__module__
           }
    data.update(obj.__dict__)
    return data 
```

# java - 避免嵌套 If Else / Switches - Java

> ID：14249116
> 
> 赞同：5
> 
> 时间：2013-01-10T00:53:17.827
> 
> 标签：java, polymorphism, if-statement

我正在审查一些代码（Java）并根据业务逻辑流程图进行更改。当前的代码依赖于大量的 if 语句——我想尝试摆脱这种情况。我一直在阅读有关多态性的内容，并试图围绕如何将其应用于我的情况而思考。我可以使它适用于单个条件级别，但很难将其进一步扩展到多个条件级别。代码将在运行时执行，此“逻辑”方法将传递上一步中的变量。

人为的例子：我们有 2 个动物园，“动物园 A”和“动物园 B”，以及“家”。这些中的每一个都是一个“地方”。在每个动物园中，我们有 4 个“位置”、“北”、“南”、“东”和“西”。“家”只有一个位置。我们想根据几个变量为一个人分配一个“目的地”，让他们知道他们应该去哪里。这些变量是：“地点”，与我们的地点（动物园 A、动物园 B、家）相关。'方向'，与我们的位置相关，（N，S，E，W）。流程图：

```
 |----- | 'HOME'
                |Place?| ----- >  *destination = 'home'*
                |----- |
     Zoo A          |                               Zoo B
    |---------------|----------------------------------------|
|----------|                                        |----------| 
|Direction?|                                        |Direction?| 
|----------|                                        |----------|
    |    North                                          |    North
    ----------- *destination = 'Zoo A North'            ----------- *destination = 'Zoo B North'
    |    East                                           |    East
    ----------- *destination = 'Zoo A East'             ----------- *destination = 'Zoo B East'
    |    South                                          |    South
    ----------- *destination = 'Zoo A South'            ----------- *destination = 'Zoo B South'
    |    West                                           |    West
    ----------- *destination = 'Zoo A West'             ----------- *destination = 'Zoo B West' 
```

因此，如果人 X 有一个动物园 A 的地点和一个南方向，那么他们应该有一个“动物园 A 南”的目的地

我的代码目前使用 If 语句非常难看：

```
if(Place = 'HOME')
    destination = 'HOME'
if(Place = 'Zoo A')
    if(Direction = North)
        destination = 'Zoo A North')
    if(Direct = East)
        destination = 'Zoo A East')
    ...
if(Place = 'Zoo B')
    if(Direction = North)
        destination = 'Zoo B North')
    if(Direct = East)
        destination = 'Zoo B East')
    ... 
```

我可以把它变成嵌套开关，变量为 ENUM。但我试图避免 if - else / switch 依赖，因为我有一个坏习惯，陷入其中。我尝试使用 Factory Design 来生成 Place 类，然后在每个位置和目的地上使用多态，但它开始在我的脑海中变得过于复杂。是否值得远离 if/switches？我只是想过度设计它吗？

关于如何处理这样的逻辑流程有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T01:36:30.150

这可以这样建模：

1.  使用根类`Place`，带有方法`calculateDestination(Person)`。Place 可以包含其中的其他地方。
2.  为and创建`Place`子类（当然，因为这些是实际的地方）。`Zoo``ZooQuadrant`
3.  该`Person`对象具有`currentPlace`和`currentDirection`

现在您将实例化这些类的对象来表示您的情况：

```
zooA = new Zoo("ZooA");
zooA.addChild(new ZooQuadrant(Direction.SOUTH));
... so on for every quadrant ...
... same for zooB ...
home = new Place("Home");
world = new Place("World");
world.addChild(home);
world.addChild(zooA);
world.addChild(zooB); 
```

当你想到达目的地时，你会打电话`world.calculateDestination(myPerson)`

`calculateDestination(Person)`是多态方法。继承层次结构中的每个级别都将根据该类的特定语义覆盖它。

1.  `Place`将有一个通用实现来测试`Person`实例当前是否在该节点（通过测试`Person`的值`currentPlace`），如果不是，它将调用它`calculateDestination`的每个子节点并返回它。
2.  `Zoo`s 将需要检查是否`currentPlace == this`，如果是，则调用`calculateDestination`它的每个象限并将任何积极的结果与其自己的结果相结合以返回`this.name + quadrantResult`。
3.  每个`ZooQuadrant`只需要检查 是否`currentDirection`等同于自己的方向，并相应地返回一个值。

注意：这只是为了说明多态是如何工作的，可能会有更好的实现。此外，这里我们同时使用多态性和递归，两者是独立的。

* * *

编辑：

至于是否需要增加复杂性，这取决于！在这里，我们使用一个非常小的对象图的简单示例。一旦您有数十个动物园，必须在这些动物园中添加更多象限，或者需要做出额外级别的决策（例如，如果每个象限都有子象限），嵌套的 if-else-if 方法（程序）变得非常毛茸茸的很快，而面向对象的方法仍然可以维护和理解。

像所有事情一样，如果您预见到决策会变得如此复杂，请使用 OO 方法。否则，每次都保持简单胜过*美观：使用正确的工具解决正确的问题。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T00:58:27.357

一种方法是您可以使用 getNorthDestination()、getEastDestination() 等方法创建父抽象类/接口“Place”。

然后创建一个名为“ZooA”和“ZooB”的“Place”子类/实现，并覆盖/实现 getXXXDestination() 方法以返回相应的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T01:06:38.743

从这里我看到至少三个类是 Place、Direction 和 Destination。

Place 将有一个 name 属性和一个 getName() 方法，名称被设置为 Zoo A、Zoo B、Home。

如果 Home 和 Zoo 具有不同的行为，您将创建 Place 的子类。在这种情况下，您可以这样做，因为 Home 没有方向，但 Zoo 有。

方向可以是一个包含北、东、西、南的枚举（它只是一种特殊类型的类）。

Destination 将有两个属性，即 Place 和 Direction。它还有一个方法 getDestination()

```
public String getDestination(){
    if (this.direction == null){
        result = this.place.getName();
    } else {
        result = this.place.getName() + " " + this.direction.getName();
    }
    return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T01:08:49.203

跟着格里坦的回答走。对于每条信息，您都应该问自己：“我真的需要为此开设课程吗？”。很多时候，答案是否定的。简单的字符串/数值变量就足够了。现在，您希望将这些变量与 getter/setter 方法结合起来，因为这是 java 所强调的，而不是直接引用公共变量（例如 C++）。引用简单的方法比例如测试要容易得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T01:17:31.800

你可以在其中创建一个包含 Zoo A 和 Zoo B 的新方法……你可以像 directionForZoo() 一样调用它，如果尝试使用 while 循环

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T05:27:12.313

如果您不想过度设计它，以下解决方法将是摆脱 if/else 的简单解决方案。但这不是一种优雅的方法。

您可以有一个地图，其中键是（地点+方向），值是相应的目的地。仅当 Place 和 Direction 值在您的程序中现在更像是静态的并且不太可能发生太大变化时，这才可以。

例如：将您的地点和相应的目的地存储在地图中

```
Map<String, String> destMap = new HashMap<String, String>();
destMap.put("HOME","HOME");
destMap.put("Zoo A+North","Zoo A North");
destMap.put("Zoo A+East","Zoo A East");
destMap.put("Zoo B+North","Zoo B North"); 
```

根据 Place 和 Direction 检索目的地：

```
destMap.get(Place + "+" + Direction); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-10T17:32:44.450

您的示例的一种可能解决方案是创建一个（可能是抽象的）`Location`类。这可以包含您的目的地的数据结构。这种数据结构的一种可能性是 a `Map<Direction, Location>`) 其中`Direction`是一个枚举，它可以用作映射到一个`Location`对象的键，该对象是该方向的目的地。您可以创建子类`Location`以创建`Home`、`Zoo`等类，也可以提供一个`name`区分不同`Location`s 的字段。或者您可以将这两者结合起来。

请注意，这是一个半生不熟的设计，可能会也可能不会满足您的需求。良好的 OO 设计需要经验和详细了解您要解决的问题的确切要求。我对前者有些了解，但对后者了解甚少。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-16T08:38:42.663

我尝试了一些建议的答案的变体。

我最终使用了一个嵌套的 switch case 块。不是最理想的，也是我想避免的，但出于我的目的，它更易于维护（它不会改变或扩展）。

我将@Ezequiel Muns 方法标记为正确，因为我的版本运行良好 - 它只是不是问题所需要的。

感谢所有的帮助。

# php - 如何以 php 表单对多个表单输入进行分组以进行发送

> ID：14249117
> 
> 赞同：0
> 
> 时间：2013-01-10T00:53:49.427
> 
> 标签：php, forms, input

我有一个非常简单的产品表格。每个产品都有一个复选框和数量字段，它们重复创建如下数据数组：

```
<form action="process.php" method="post">
<input type="checkbox" name="product[]" value="product 1" />
<input type="text" name="quantity[]" />

<input type="checkbox" name="product[]" value="product 2" />
<input type="text" name="quantity[]" />

<input type="submit" />
</form> 
```

然后我在 php 中按以下方式处理此表单：

```
//php script to retrieve data
$product    = isset($_POST['product'])  ? implode(', ', $_POST['product'])  : 'Not selected'; 
$quantity   = isset($_POST['quantity']) ? implode(', ', $_POST['quantity']) : 'Not mentioned'; 

$messageToSend = <<<END

Products:  $product - $quantity

END; 
```

输出结果例如：**Products: product 1, product 2 - 10, 2**

但我想要实现的是以下输出： **产品：产品 1 - x 10，产品 2 - x 2**

基本上我想弄清楚的是如何在我检索数据后在 php 脚本中为每个产品拆分和分组数据。

非常感激您的帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T00:59:40.823

1.  这看起来并不完全是 php。
2.  您只需要一起遍历两个列表：

    ```
    foreach ($quantity as $key => $quant) {
        echo $product[$key].' - x'.$quant;
    } 
    ```

这是一般的想法，但正如评论中提到的，单独这样做并不是真正的解决方案。

需要记住的一些事项：

1.  如果未选中复选框，它们将不会传递值，因此您获得的 $product 数组的大小不会与 $quantity 数组的大小相同，也不会按照您的意愿与 $quantity 数组对齐。（尝试以不同的方式命名您的复选框，即产品[1]）。- 谢谢 tmuguet
2.  如果没有选中任何复选框，您将不会获得数组，因此将其传递给 foreach 将生成您提到的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:10:03.090

试试这个：

```
<?php 
foreach($_POST['product'] as $key => $product){
   $quantity = isset($_POST['quantity'][$key])? $_POST['quantity'][$key]:'Not selected';
   $message[] = $product.' - x'.$quantity;
}
echo implode(',', $message);
?> 
```

# javascript - 关注非表单元素？

> ID：14249119
> 
> 赞同：1
> 
> 时间：2013-01-10T00:53:58.183
> 
> 标签：javascript, jquery, html, jhtmlarea

我只是想知道是否有办法将焦点放在非表单元素上。我问是因为我在项目中使用 jhtmlArea 插件（http://jhtmlarea.codeplex.com/ - 页面当前关闭）。它确实有效，除了因为它掩盖了 TEXTAREA 上的 IFRAME，IFRAME，不是表单元素，似乎不想获得焦点。我认为官方插件页面上的演示可能显示 IFRAME 专注于加载，但我不记得了，由于插件演示页面未加载，现在无法检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:32:59.167

终于让它在我的项目中工作，但由于某种原因，当我将解决方案放入 jsfiddle 时，它​​只能在 Chrome 中工作：http: [//jsfiddle.net/7kTrB/8/](http://jsfiddle.net/7kTrB/8/)

以下行似乎是最相关的部分：

```
this.iframe[0].contentWindow.focus(); 
```

# serialization - 在 Hadoop 中实现自定义可写？

> ID：14249128
> 
> 赞同：3
> 
> 时间：2013-01-10T00:54:55.037
> 
> 标签：serialization, hadoop, mapreduce

我在 Hadoop 中定义了一个自定义的 Writable 类，但是 Hadoop 在运行我的程序时给了我以下错误消息。

```
java.lang.RuntimeException: java.lang.NullPointerException
at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:115)
at org.apache.hadoop.io.SortedMapWritable.readFields(SortedMapWritable.java:180)
at EquivalenceClsAggValue.readFields(EquivalenceClsAggValue.java:82)
at org.apache.hadoop.io.serializer.WritableSerialization$WritableDeserializer.deserialize(WritableSerialization.java:67)
at org.apache.hadoop.io.serializer.WritableSerialization$WritableDeserializer.deserialize(WritableSerialization.java:40)
at org.apache.hadoop.mapred.Task$ValuesIterator.readNextValue(Task.java:1282)
at org.apache.hadoop.mapred.Task$ValuesIterator.next(Task.java:1222)
at org.apache.hadoop.mapred.Task$CombineValuesIterator.next(Task.java:1301)
at Mondrian$Combine.reduce(Mondrian.java:119)
at Mondrian$Combine.reduce(Mondrian.java:1)
at org.apache.hadoop.mapred.Task$OldCombinerRunner.combine(Task.java:1442)
at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.sortAndSpill(MapTask.java:1436)
at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.flush(MapTask.java:1298)
at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:437)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:415)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1136)
at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

引起：java.util.concurrent.ConcurrentHashMap.hash(ConcurrentHashMap.java:332) 处的 java.lang.NullPointerException....

EquivalenceClsAggValue 是我定义的 Writable 类的名称，这是我的类：

```
public class EquivalenceClsAggValue implements WritableComparable<EquivalenceClsAggValue>{

public ArrayList<SortedMapWritable> aggValues;  
public EquivalenceClsAggValue(){        

    aggValues = new ArrayList<SortedMapWritable>();
}
@Override
public void readFields(DataInput arg0) throws IOException {

    int size = arg0.readInt();

    for (int i=0;i<size;i++){
        SortedMapWritable tmp = new SortedMapWritable();
        tmp.readFields(arg0);
        aggValues.add(tmp);
    }       
}

@Override
public void write(DataOutput arg0) throws IOException {

    //write the size first
    arg0.write(aggValues.size());

    //write each element
    for (SortedMapWritable s:aggValues){
        s.write(arg0);
    }

} 
```

我想知道问题的根源是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T02:28:49.087

看起来你的`write(DataOutput)`方法有错误：

```
@Override
public void write(DataOutput arg0) throws IOException {
  //write the size first
  // arg0.write(aggValues.size()); // here you're writing an int as a byte

  // try this instead:
  arg0.writeInt(aggValues.size()); // actually write int as an int

  //.. 
```

查看[`DataOutput.write(int`)](http://docs.oracle.com/javase/6/docs/api/java/io/DataOutput.html#write%28int%29) vs的 API 文档[`DataOutput.writeInt(int)`](http://docs.oracle.com/javase/6/docs/api/java/io/DataOutput.html#writeInt%28int%29)

我还将修改您`SortedMapWritable`在 readFields 中创建的 tmp 局部变量以使用`ReflectionUtils.newInstance()`：

```
@Override
public void readFields(DataInput arg0) throws IOException {

  int size = arg0.readInt();

  for (int i=0;i<size;i++){
    SortedMapWritable tmp = ReflectionUtils.newInstance(
        SortedMapWritable.class, getConf());
    tmp.readFields(arg0);
    aggValues.add(tmp);
  }       
} 
```

请注意，要使其正常工作，您还需要修改类签名以扩展[`Configurable`](http://hadoop.apache.org/docs/r1.0.2/api/org/apache/hadoop/conf/Configured.html)（这样 Hadoop 将`Configuration`在您的对象最初创建时注入一个对象）：

```
public class EquivalenceClsAggValue 
          extends Configured 
          implements WritableComparable<EquivalenceClsAggValue> { 
```

# javascript - 是否可以一起复制 html 元素和元素画布？

> ID：14249129
> 
> 赞同：0
> 
> 时间：2013-01-10T00:55:00.637
> 
> 标签：javascript, html, canvas

我有红色矩形作为画布。

我有绿色矩形作为 html 元素。

[正如您在演示jsfiddle](http://jsfiddle.net/centerwow/ThZKR/)中看到的那样，我尝试将它们组合在一起作为一个画布元素

我的代码：

```
 <!DOCTYPE html>
<html>
<head>
<style type='text/css'>
    #myCanvas{
  width:300px; height:150px;
  border:1px solid #d3d3d3;
  position:absolute; top:0;left:0;
}
div{
  width:75px; height:75px;
  border:1px solid blue;
  position:absolute; top:0;left:50px;
  background-color:green;
}
button{
   position:absolute; top:0;left:150px;

}
  </style>
  </head>
<body>

<canvas id="myCanvas" >
Your browser does not support the HTML5 canvas tag.</canvas>
  <div></div>

<script>
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
ctx.fillStyle="red";
ctx.fillRect(10,10,50,50);

function copy()
{
var imgData=ctx.getImageData(10,10,50,50);
ctx.putImageData(imgData,10,70);
}
</script>

<button onclick="copy()">Copy</button>

</body>
</html> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:05:16.697

没有直接的方法将 html 元素作为图像获取，然后您可以轻松地将其放入画布中。但也许你可以通过截取 html 来实现。

你可能想看看这篇文章；

[截取网页截图](http://www.html5rocks.com/en/tutorials/streaming/screenshare/)

# angularjs - angular.js 验证错误信息

> ID：14249131
> 
> 赞同：2
> 
> 时间：2013-01-10T00:55:15.267
> 
> 标签：angularjs

我已经搜索并跟踪了角码很长时间，但找不到此错误消息的来源。我知道验证有效，但我的代码只有这个：

```
<span class="error" ng-show="myForm.input.$error.required">
        Required!</span>
      <span class="error" ng-show="myForm.input.$error.email">
        Not valid email!</span></br> 
```

但是出现了这个错误：![在此处输入图像描述](../Images/e65637a32b23757e9a989c8de11d3943.png)

我什至找不到连接可能会产生这种情况的地方。“请”这个词甚至不在角码中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-21T07:13:06.950

您可以在表单中添加“novalidate”以禁用本机 HTML5 验证。

```
<form name="form" class="css-form" novalidate> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-10T02:01:01.983

由于 HTML5 支持“type='email'”，浏览器正在生成此消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T06:05:32.817

这是由于 HTML5。如果您不想显示这些消息，请将以下内容添加到您的 CSS：

```
::-webkit-validation-bubble-message { display: none; } 
```

但是，目前这只适用于 WebKit 实现（Chrome）。

[更多信息](https://stackoverflow.com/a/5965505/1916258)

# emacs - Emacs “on-request” 完成接口，用于编写主要模式

> ID：14249132
> 
> 赞同：1
> 
> 时间：2013-01-10T00:55:15.513
> 
> 标签：emacs, elisp

我正在为一种语言编写主要模式，我想在“。”之后或按键之后提供完成。`process-send-string`完成是通过使用和向后台进程发送请求来确定的`set-process-filter`。返回的完成列表取决于后台进程解析文件的当前状态并被指示在该特定点给出完成。

我尝试过使用流行的`autocomplete`包，但实际上并没有考虑到这个用例。这部分是因为它提供了自动建议（即没有按键），这是我不需要的一个很好的功能。你提供给它调用的函数需要同步调用，而emacs过程控制是异步的。我已经按照[https://github.com/Golevka/emacs-clang-complete-async](https://github.com/Golevka/emacs-clang-complete-async)的方式编写了一些代码，但它根本感觉不健壮，并且让它工作起来非常繁琐。

我喜欢 中使用的菜单`autocomplete`，并且想知道什么最适合我的用例，最好同时看起来也不错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:11:47.103

您可以使用 同步等待后台进程的输出`accept-process-output`。您可能想看看最新版本`gud-gdb-completions`的.`gud-gdb-run-command-fetch-lines``gud.el`

# android - 无法初始化 ArrayList

> ID：14249133
> 
> 赞同：0
> 
> 时间：2013-01-10T00:55:15.590
> 
> 标签：android, arraylist, nullpointerexception

我敢肯定，非常简单的错误，只是出于某种原因有一个心理障碍！

我有一个包含其他对象的 ArrayList 的对象。当我尝试在构造函数中初始化列表时，它似乎没有初始化，当我尝试访问代码中的列表时，我得到一个空指针。

订单类变量：

```
private int covers;
    private int table;
    private ArrayList<MenuItem> items; 
```

这是订单类：

```
public Order(int covers, int table) {
    super();
    this.covers = covers;
    this.table = table;
    this.items = new ArrayList<MenuItem>();
} 
```

这是 MainActivity 中导致我出现问题的代码：

```
order = new Order();
    order.setCovers(2);
    order.setTable(1);
    order.addToOrder(new MenuItem("Item 1", 12.99));
    Toast.makeText(getApplicationContext(), "order size: " + order.getItems().size(), Toast.LENGTH_SHORT).show(); 
```

我希望 Toast 显示“1”。但是，当我运行调试器时，我注意到订单对象 ArrayList 属性等于 null。

知道为什么吗？提前致谢！

编辑： addToOrder 方法：

```
public void addToOrder(MenuItem m){
    items.add(m);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:02:22.720

您未能初始化 `items`。采用

```
vorder = new Order(int1, int2); 
```

代替

```
vorder = new Order(); 
```

`items`在里面初始化

```
public Order(int covers, int table) {

} 
```

不在默认构造函数上。

# java - 更新我的数据库后对我的程序进行更改？

> ID：14249134
> 
> 赞同：2
> 
> 时间：2013-01-10T00:55:17.860
> 
> 标签：java, mysql, sql, sql-insert

抱歉，如果我的问题不具体或之前已经回答过。我尝试寻找它并寻求更好的询问方式，但这是最准确的方式。

我用 Java 开发了一个程序，在其中我通过以下方式将新行插入到我的数据库中：

`INSERT INTO table_name VALUES (?,?,?)`

问题是我在程序的许多部分都有这个查询，现在我决定在我的表中添加第四列。我是否必须在程序中使用新问号更新每个查询？如果我不这样做，它会崩溃。

在这些情况下，最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T01:00:00.693

是的。

您需要添加额外的`?`（*参数占位符*），因为您正在使用`implicit` `INSERT`语句。这意味着您没有指定要插入值的表的列名。

```
INSERT INTO table_name VALUES (?,?,?)
// the server assumes that you are inserting values for all
// columns in your table
// if you fail to add value on one column. an exception will be thrown 
```

下次创建`INSERT`语句时，请确保在其上指定列名，以便通过添加额外列来更改表时，不会更新所有占位符。

```
INSERT INTO table_name (Col1, col2, col3) VALUES (?,?,?)
// the server knows that you are inserting values for a specific column 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T00:59:59.520

> 我是否必须在程序中使用新问号更新每个查询？

大概。在更新这些查询中的每一个时，您应该做的是将它们封装到一个对象中，可能使用数据源模式，例如[Table Data Gateway](http://martinfowler.com/eaaCatalog/tableDataGateway.html)或[Row Data Gateway](http://martinfowler.com/eaaCatalog/rowDataGateway.html)。这样您[就不会重复自己](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，并且下次更新表时，您只有一个地方可以更新查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T00:59:07.530

由于您使用的语法，您可能会遇到一些问题。我指的是缺少列名。`INSERT`一旦您更改表结构，您的查询就会开始失败。

如果您使用了以下语法： `INSERT INTO table_name (C1, C2, C3) VALUES (?,?,?)` 假设您的新列具有适当的默认值，那么它就可以正常工作。

# ios - IOS NSInputStream

> ID：14249139
> 
> 赞同：0
> 
> 时间：2013-01-10T00:55:35.250
> 
> 标签：ios, nsinputstream

使用 NSInputStream 时遇到问题。我有连接到服务器的客户端应用程序，然后服务器将开始通过 TCP 重复向我的客户端应用程序发送消息，大约每秒 1 条消息。服务器只是向客户端广播消息，消息是 xml 格式。服务器将消息作为一个数据包发送。

现在的问题是，当我从 NSInputStream 读取字节时，数据被截断，这意味着我不时收到 2 个单独的数据（部分 xml）响应，而不是接收 1 个完整的消息。我无法调试，因为当我从 NSInputStream 读取数据字节时它已经发生了。

我使用 Wireshark 分析我收到的每个数据包，当它发生时数据也被截断，因为 TCP 将部分数据重新传输到我的客户端。我试图记录每个部分数据字节，部分数据的总和始终在 1600 字节左右。

我不知道他们是如何设计和实现服务器端的，但我知道有很多人连接到该服务器并不断从中获取广播消息。

有人遇到这个问题吗？任何人都可以帮忙吗？数据是否可能超过最大大小并被拆分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:27:19.983

这本身不是问题。它是 TCP 设计的一部分，也是`NSInputStream`. 您可能会收到部分消息。处理这个事实是你的工作，等到你收到完整的消息，然后处理完整的消​​息。

1600 字节有点奇怪。我希望 1500 字节，因为这是最大的合法以太网数据包（或者特别是 1472 左右的某个地方，这是一个非常常见的 MTU，减去一些用于标头）。或者由于缓冲在`NSInputStream`. 但这些都不重要。您必须处理这样一个事实，即您不一定会在其边界处收到消息。

# xml - 想使用 XSL 1.0 匹配特定节点中值的每一次出现

> ID：14249140
> 
> 赞同：0
> 
> 时间：2013-01-10T00:55:36.033
> 
> 标签：xml, xslt, xslt-1.0

我想匹配特定节点值的第一次出现，我很难过。

我已经尝试过`<xsl:when test="root/content/contentType = root/content/contentType[.='generic'][1]">`，但它与每一次出现都匹配，就像`<xsl:when test="root/content/contentType[.='generic'][1]">`

我想以下面的输出 HTML 结尾。第一个项目有一个标题，但每个项目都有一个相同值的类。

这是我的 XML。

任何想法都非常感谢。

XML:

```
<root>
    <content>
        <contentType>ingredients</contentType>
        <listItems>
            <item>Item 1</item>
            <item>Item 2</item>
        </listItems>
    </content>
    <content>
        <contentType>generic</contentType>
        <listItems>
            <item>Item 1</item>
            <item>Item 2</item>
        </listItems>
    </content>
    <content>
        <contentType>generic</contentType>
        <listItems>
            <item>Item 1</item>
            <item>Item 2</item>
        </listItems>
    </content>
    <content>
        <contentType>ingredients</contentType>
        <listItems>
            <item>Item 1</item>
            <item>Item 2</item>
        </listItems>
    </content>
    <content>
        <contentType>directions</contentType>
        <listItems>
            <item>Item 1</item>
            <item>Item 2</item>
        </listItems>
    </content>
</root> 
```

期望的输出：

```
<div class="ingredients">
    <h2>Ingredients</h2>
    <ul>
        <li>Item 1</li>
        <li>Item 2</li>
    </ul>
</div>
<div class="generic">
    <h2>Generic</h2>
    <ul>
        <li>Item 1</li>
        <li>Item 2</li>
    </ul>
</div>
<div class="generic">
    <ul>
        <li>Item 1</li>
        <li>Item 2</li>
    </ul>
</div>
<div class="ingredients">
    <ul>
        <li>Item 1</li>
        <li>Item 2</li>
    </ul>
</div>
<div class="directions">
    <h2>Directions</h2>
    <ul>
        <li>Item 1</li>
        <li>Item 2</li>
    </ul>
</div> 
```

编辑：

XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:template match="/">

        <xsl:for-each select="root/content">
            <div>
                <xsl:attribute name="class"><xsl:value-of select="./contentType"/></xsl:attribute>

                <xsl:choose>
                    <xsl:when test="./contentType[.='ingredients'][1]">
                        <h2><xsl:value-of select="./contentType"/></h2>
                    </xsl:when>
                    <xsl:when test="./contentType[.='generic'][1]">
                        <h2><xsl:value-of select="./contentType"/></h2>
                    </xsl:when>
                    <xsl:when test="./contentType[.='directions'][1]">
                        <h2><xsl:value-of select="./contentType"/></h2>
                    </xsl:when>
                </xsl:choose>
                <ul>
                    <xsl:for-each select="listItems/item">
                        <li><xsl:value-of select="."/></li>
                    </xsl:for-each>
                </ul>
            </div>
        </xsl:for-each>       

    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:42:50.170

如果您热衷于了解 XSLT 的更多乐趣，那么您可能有兴趣知道您可以使用一种称为“Muenchian Grouping”的技术来解决这个问题。实际上，您正在按**内容**元素的**contentType**元素对内容元素进行分组，并对组中的第一个元素采取特殊操作（即给它一个**h2**标题）

首先，您定义一个键来代表您的组

```
<xsl:key name="content" match="content" use="contentType"/> 
```

因此，您正在寻找**内容**元素，并按**contentType**排列它们。

现在是稍微可怕的部分。您可以检查给定的**内容**元素是否是其**contentType组中的第一个元素**

```
 <xsl:if test="generate-id() = generate-id(key('content', contentType)[1])"> 
```

为了打破这一点，`key('content', contentType)[1]`返回当前**contentType的键中的第一个****内容**元素。然后，您需要将其与当前**内容**元素进行比较，以查看它们是否相同。为此，您可以使用**generate-id**来返回任何元素的唯一 ID。

 ******试试这个 XSLT

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="content" match="content" use="contentType"/>

   <xsl:template match="root/content">
      <div class="{contentType}">
         <xsl:if test="generate-id() = generate-id(key('content', contentType)[1])">
            <h2>
               <xsl:value-of select="contentType"/>
            </h2>
         </xsl:if>
         <xsl:apply-templates select="listItems"/>
      </div>
   </xsl:template>

   <xsl:template match="listItems">
      <ul>
         <xsl:apply-templates select="item"/>
      </ul>
   </xsl:template>

   <xsl:template match="item">
      <li>
         <xsl:value-of select="."/>
      </li>
   </xsl:template>
</xsl:stylesheet> 
```

对于分组问题，Muenchian Grouping 是解决问题的最有效方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:24:47.750

这个怎么样：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:template match="/">

        <xsl:for-each select="root/content">
            <div class="{contentType}">
                <xsl:if test="not(preceding::content[contentType = current()/contentType])">
                        <h2><xsl:value-of select="contentType"/></h2>
                </xsl:if>
                <ul>
                    <xsl:for-each select="listItems/item">
                        <li><xsl:value-of select="."/></li>
                    </xsl:for-each>
                </ul>
            </div>
        </xsl:for-each>       

    </xsl:template>
</xsl:stylesheet> 
```

这可能更干净一点：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:template match="content">
            <div class="{contentType}">
                <xsl:if test="not(preceding::content[contentType = current()/contentType])">
                        <h2><xsl:value-of select="contentType"/></h2>
                </xsl:if>
                <ul>
                   <xsl:apply-templates select="listItems" />
                </ul>
            </div>
    </xsl:template>
    <xsl:template match="listItem/item">
          <li><xsl:value-of select="."/></li>
    </xsl:template>
</xsl:stylesheet> 
```

这里的一个差异是您想要的输出具有大写的 h2 值，而在这种情况下它们不会。你知道吗？

我认为好的做法是在源 XML 中将类和标题作为单独的值，但如果你真的想在两个地方使用相同的值，你可以通过这样做将第一个字母大写：

```
<h2><xsl:value-of select="concat(translate(substring(contentType, 1, 1), 
   'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'), 
   substring(contentType, 2))"/></h2> 
```******

# batch-file - 我无法获得在批处理文件中使用 WMIC 的正确语法

> ID：14249147
> 
> 赞同：0
> 
> 时间：2013-01-10T00:56:19.850
> 
> 标签：batch-file, dos, wmic

这是我要运行的命令。我想获取我的 SQL Server 2008 实例的服务名称

FOR /F "delims==" %%G IN ('wmic service where (displayname like ^"%%sqlserver2008%%^")') DO echo %%G

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:04:55.517

首先你需要得到正确的 WMIC 命令，然后你需要让它在 FOR 命令中工作。

您正在寻找的基本 WMIC 命令是：

```
wmic service where "displayName like '%%sqlserver2008%%'" get name 
```

现在 FOR /F 有一些复杂性。WMIC 输出是 unicode 格式，它与 FOR /F 有一种奇怪的交互 - 不知何故， FOR /F 解析的每一行最后都包含一个额外的回车符。不需要的回车符包含在每个 FOR /F 迭代中。呸:(

一种有效的解决方案是请求 CSV 格式，在您感兴趣的列之外至少有一个额外的不需要的列。然后您可以设置 DELIMS 和 TOKENS 以获得所需的列。在您的情况下，State 列出现在 Name 之后，因此它是一个不错的候选者。

WMIC /CSV 格式在前面包含一个额外的节点列。

WMIC /CSV 格式在顶部包含一个空白行和一个标题行，可以使用 SKIP=2 跳过。

这是一个功能齐全的 FOR /F 解决方案。

```
for /f "skip=2 tokens=2 delims=," %%A in (
  'wmic service where "displayName like '%%sqlserver2008%%'" get name^,state /format:csv'
) do echo %%A 
```

# big-o - Big-O 表示法找到 c 和 n0

> ID：14249151
> 
> 赞同：15
> 
> 时间：2013-01-10T00:56:44.440
> 
> 标签：big-o

我刚刚被介绍给 Big-O 表示法，并且有人给了我一些问题。但是，我对如何确定`n0`. 我必须证明这`3n^3 +20n^2 + 5`是 O(n^3)。到目前为止，我有：

```
3n^3 + 20n^2 + 5 <= cn^3

(3 - c)n^3 + 20n^2 + 5 <= 0

5 <= n^3(c - 3) - 20n^2

5 <= n^2(n(c - 3) - 20) 
```

我只是不知道如何从这里找到 n0 和 c。有人介意解释吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-10T01:09:48.200

```
3n^3 + 20n^2 + 5 <= cn^3
=> 20n^2 + 5 <= cn^3 - 3n^3
=> 20n^2 + 5 <= n^3(c - 3)
=> 20n^2/n^3 + 5/n^3 <= n^3(c - 3)/n^3
=> 20/n + 5/n^3 <= c - 3
=> c >= 20/n + 5/n^3 + 3 
```

根据您希望大于条件开始的位置，您现在可以选择 n0 并找到值。

例如，对于 n0 = 1：

```
c >= 20/1 + 5/1 + 3 which yields c >= 28 
```

值得注意的是，根据 Big-O 表示法的定义，并不要求边界实际上如此紧密。由于这是一个简单的函数，您可以猜测并检查它（例如，为 c 选择 100 并注意该条件确实渐近地为真）。

例如：

```
3n^3 + 20n^2 + 5 <= (5 * 10^40) * n^3 for all n >= 1 
```

这个不等式成立就足以证明 f(n) 是 O(n^3)。

* * *

为了提供更好的证明，实际上需要证明两个常数，`c`并且`n0`存在使得`f(n) <= cg(n) for all n > n0`.

使用我们的 c = 28，这很容易做到：

```
3n^3 + 20n^2 + 5 <= 28n^3
20n^2 + 5 <= 28n^3 - 3n^3
20n^2 + 5 <= 25n^3
20/n + 5/n^3 <= 25

When n = 1: 20 + 5 <= 25 or 25 <= 25
For any n > 1, 20/n + 5/n^3 < 25, thus for all n > 1 this holds true.

Thus 3n^3 + 20n^2 + 5 <= 28n^3 is true for all n >= 1 
```

（这是一个做得很糟糕的“证明”，但希望这个想法能显示出来。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T01:07:36.993

```
3n^3 + 20n^2 + 5 <= cn^3

5 + 20n^2 <= n^3(c - 3)

5/n^3 + 20/n <= c - 3

For n0 = 20, c >= 5, since 5/n^3 + 20/n < 2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T01:19:43.513

如果你有 `f(n) = (3n^3 + 20n^2 + 5)` 并且你想看看它是否`O(g(n))`在哪里`g(n) = n^3`，我相信你可以将极限`f(n)/g(n)`作为n->无穷大。

因为限制是 3，你可以看到它的`3n^3 + 20n^2 + 5`增长速度只有`n^3`. 当你有一个多项式时`3n^3 + 20n^2 + 5`，你可以通过检查知道最大的阶项总是 的值`O(f(n))`。

找到 n [0]和 C 并没有多大帮助，但它是确定某事物的顺序的一种相对简单的方法。正如其他人在这里所说，您可以选择 n [0]然后计算 C。

如果你选择 n [0] = 1，那么你有`3*(1^3) + 20*1^2 + 5 = 28`. 所以如果`c1^3 <= 28`，c 必须是 28。你已经证明有 ac 和 n0 满足这个条件，所以你已经证明 f(n) 是 O(n^3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-07T02:03:21.470

除以 n^3 我们得到 3+20/n+5/n^3<=C 20/n+5/n^3<=C-3

取 C 值为 10 20/n+5/n^3<=7

我们需要针对不同的 n 值解决这个问题，直到满足条件 C=10 并且 n0 = 3 将给出解决方案

# c++ - 如何在矩阵中搜索相同值的区域？

> ID：14249153
> 
> 赞同：3
> 
> 时间：2013-01-10T00:56:47.953
> 
> 标签：c++, algorithm, search, matrix

我有一个这样的整数矩阵：

```
1 1 1 0 3 3 3 0 2 2
1 1 1 0 3 3 3 0 2 2
0 0 0 0 3 3 3 0 0 0 
2 2 0 0 3 3 3 0 4 4
0 0 0 0 0 0 0 0 0 0
1 1 1 1 1 0 4 4 4 0 
```

我有相同值的不同区域，由“0”分隔，我需要计算矩阵中有多少区域。我的算法基于“0”，每次发现“0”时都会出现一个新区域，所以我增加计数器。问题是我逐行搜索并多次输入同一区域。我只需要计算矩形区域。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T01:06:59.833

一种简单、快速的算法是遍历所有条目并在遇到每个区域时将其设置为零。这需要 O(N*M) 运行时间（每个条目最多访问两次）和 O(1) 额外内存。

要将区域设置为零，只需注意它开始的列，然后迭代到最右边的列。然后从左到右列遍历下面的行，将每个条目设置为零。

[工作](https://ideone.com/4Sw4AB)代码：

```
int count_regions( int *arr, int rows, int cols ) {
    int region_count = 0;

    for ( int first_index = 0; first_index != rows * cols; ++ first_index ) {
        if ( arr[ first_index ] == 0 ) continue;

        ++ region_count;

        int first_row = first_index / cols, first_col = first_index % cols;
        int last_col;
        for ( last_col = first_col;
              last_col != cols && arr[ first_row * cols + last_col ] != 0;
              ++ last_col ) ;

        for ( int last_row = first_row; 
              last_row != rows && arr[ last_row * cols + first_col ] != 0;
              ++ last_row ) {
            for ( int col = first_col; col != last_col; ++ col ) {
                arr[ last_row * cols + col ] = 0;
            }
        }
    }
    return region_count;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T01:04:01.970

绘画技术很好。这个想法是你投下一个完全覆盖一个区域的油漆炸弹。伪代码：

```
for (each space) {
  if (space has been painted or is a border) continue;
  else {
    numAreas++;
    drop paint bomb
  }
} 
```

油漆炸弹的工作原理是这样的：

```
paint space;
for (each adjacent space) {
  if (space has been painted or space is a border) continue;
  else {
    paint space;
    drop another bomb;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T01:07:17.307

一种方法是使用[*Flood Fill*](http://en.wikipedia.org/wiki/Flood_fill)算法来检测连续区域，如下所示：

假设初始矩阵只有正数，

*   准备一个`counter`，设置为`-1`
*   对于矩阵中的每个点：
*   如果单元格为零或负数，则跳过它；否则
*   洪水填充从具有负值的单元格开始`counter`
*   洪水填充结束后减少计数器

当您到达矩阵的末尾时，`counter`负数将等于连续编号区域的数量减一，即您需要的结果是`-(counter+1)`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T01:10:00.410

我一直很喜欢用于隔离组的 Union/Find 算法。但那是因为我有一个多年前写的旧实现。实现起来没什么大不了的，但使用 Flood Fill 可能更合适。

# r - R中的主成分分析（PCA）：使用哪个函数？

> ID：14249156
> 
> 赞同：6
> 
> 时间：2013-01-10T00:57:32.493
> 
> 标签：r, linear-algebra, pca, unsupervised-learning

谁能解释 prcomp 和 princomp 函数之间的主要区别是什么？

有什么特别的原因为什么我应该选择一个而不是另一个？如果这是相关的，我正在查看的应用程序类型是基因组（表达）数据集的质量控制分析。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T01:15:16.780

这两个函数之间存在差异 w/r/t

*   *函数参数*（调用函数时可以/必须传入的参数）；
*   *每个返回*的值；和
*   每个人用来计算主成分的数值*技术。*

## 用于计算 PCA 的数值技术

特别是，`princomp`应该*更快*（并且性能差异将随着数据矩阵的大小而增加），因为它通过*协方差矩阵*上的***特征向量分解***计算主成分，而*prcomp*通过***奇异值分解***（SVD）计算主成分在原始数据矩阵上。

 ***特征值分解仅针对*方阵*定义（因为该技术只是求解特征多项式）但这不是实际限制，因为特征值分解总是涉及从原始数据矩阵（协方差矩阵）计算的谓词步骤。

协方差矩阵不仅是平方的，而且通常比原始数据矩阵小很多（只要属性的数量小于行数，或者 n < m，这在大多数情况下都是正确的。

前者（特征向量分解）不太准确（差异通常不是实质性的），但要快得多，因为计算是在*协方差矩阵*而不是原始数据矩阵上执行的；例如，如果数据矩阵具有通常的形状，即 n >> m，即 1000 行和 10 列，则协方差矩阵为 10 x 10；相比之下，prcomp 在原始 1000 x 10 矩阵上计算 SVD。

我不知道基因组表达数据的数据矩阵的形状，但如果行数为数千甚至数百，那么*prcomp*将明显比*princomp*慢。我不知道您的上下文，例如，pca 是否在更大的数据流中作为单个步骤执行，以及净性能（执行速度）是否值得关注，所以我不能说这种性能是否确实与您的使用相关案子。同样，很难说这两种技术之间的数值精度差异是否显着，实际上这取决于数据。

## 返回值

*princomp*返回一个包含*七个*项目的列表；*prcomp*返回*五个*的列表。

```
> names(pc1)    # prcomp
    [1] "sdev"     "rotation" "center"   "scale"    "x"       

> names(pc2)    # princomp
    [1] "sdev"     "loadings" "center"   "scale"    "n.obs"    "scores"   "call" 
```

对于*princomp*，返回的最重要的项目是组件*分数*和*负载*。

这两个函数返回的值可以通过这种方式进行协调（比较）：*prcomp*返回一个称为*旋转*的矩阵，它等效于*princomp*返回的载荷矩阵。

如果将*prcomp 的* *旋转*矩阵乘以原始数据矩阵，则结果存储在以 x 为键的矩阵中

最后，*prcomp*有一个***绘图***方法，它给出了一个*碎石图*（显示每个变量/列的相对和累积重要性——我认为 PCA 最有用的可视化）。

## 函数参数

`prcomp`如果您设置`TRUE`参数`scale`和 这是两者之间的一个微不足道的区别，因为您可以使用该函数`center`在一行中缩放和平均居中您的数据。`scale`***

# dart - 像 Dart 的“Flash Messages”这样的 Rails

> ID：14249162
> 
> 赞同：1
> 
> 时间：2013-01-10T00:58:13.373
> 
> 标签：dart

有没有类似于 Rails 的 Dart 'Flash Messages' 的东西？欢迎任何建议。我试图在下一页顶部获取一条消息，但仅在我的表单中的 http 'POST' 之后，而不是在刷新或“GET”之后。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T02:10:39.840

> 有没有类似于 Rails 的 Dart 'Flash Messages' 的东西？

抱歉不行。您的问题有点暗示服务器正在生成 HTML 以响应客户端。Web UI 团队非常关注客户端应用程序，其中大部分逻辑都驻留在客户端上。这与 Rails 的工作方式完全不同。因此，我们自己没有像 Rails 这样专注于在服务器端生成 HTML 的框架。因此，我们没有像闪信这样的功能。

相反，如果您构建一个客户端应用程序，您可以使用 XHR 请求与服务器对话，然后客户端可以决定向用户显示什么消息，甚至无需重新加载页面。

# ruby-on-rails - 不能使用属于用户的模型进行新建/创建

> ID：14249172
> 
> 赞同：0
> 
> 时间：2013-01-10T00:59:26.980
> 
> 标签：ruby-on-rails, cancan

这是在最新版本的 cancan 和 rails 上。例程属于用户，用户有许多例程。以下用于列出和编辑正确记录的工作

`can :manage, Routine, :user => {:organization_id => user.organization_id}`

但它拒绝访问新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:07:35.917

错误可能是访问新的时候出现的，当创建新的例程时没有organization_id？

为什么不只是

```
can :manage, Routine 
```

你有什么特别的原因吗？

# php - '内容传输编码：7bit'

> ID：14249173
> 
> 赞同：0
> 
> 时间：2013-01-10T00:59:27.290
> 
> 标签：php

我这里有问题。我创建了一个 mail() PHP 脚本来发送附件，您通常会通过常规电子邮件提供商发送。问题是我只能发送不超过一定字符数的文件。例如，我可以发送一个名为“New Text Document”的文件，但如果我尝试发送一个名为“New Document of Microsoft Word (3)”的文件，它永远不会收到我的电子邮件。

有人可以告诉我为什么会这样吗？

这是代码 [http://pastebin.com/5PShDq5P](http://pastebin.com/5PShDq5P)

# android - 谷歌播放重复内容

> ID：14249175
> 
> 赞同：6
> 
> 时间：2013-01-10T00:59:31.663
> 
> 标签：android, google-play, policy

在 Google play TOS 和 Content Policy 中有一行说明`Do not post repetitive content`。如果我有 2 个相同的应用（相同的代码、相同的 UI）但有 2 个不同的名称，我是否违反了 Google Play 内容政策？会删除其中一个应用程序，还是两者都删除？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T01:34:05.957

您不应上传相同或非常非常相似的项目。

例如，您不应该向 Play 商店发送垃圾邮件。不要上传只做一件事的应用程序，然后更改包，然后重新上传。那是违规行为。

这包括更改名称，使其看起来不同，即使它是完全相同的东西。他们必须做不同的事情。

为清晰起见进行了编辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-11T05:00:23.653

我刚刚删除了 2 个应用程序，然后在上诉后恢复了不太受欢迎的应用程序。似乎如果应用程序具有相同的功能但完全不同的 UI（图像、布局、声音），它仍然属于重复内容。一线希望（尽管在询问时未确认）是根据我的电子邮件，使用不同的开发者帐户可能没问题：“例如，您的应用程序似乎提供与您的开发者帐户下的其他应用程序相似或相同的内容”

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-10T01:06:22.093

对于 Google Play，您需要有 2 个不同的包名称。因此，一个应用程序将位于 com.company.awesome 中，而另一个应用程序将位于 com.company.awesome-er 或类似的位置。这就是我发布免费和非免费版本的方式。

这一点尤其重要，因为免费应用永远不会成为付费应用。

# macros - 球拍宏，打印变量名称及其值的列表

> ID：14249178
> 
> 赞同：2
> 
> 时间：2013-01-10T00:59:58.430
> 
> 标签：macros, racket

我有这个宏：

```
(define-syntax inspect
  (syntax-rules ()
    [(_ x) (printf "~a is: ~a\n" 'x x)])) 
```

像这样工作：

```
(let ([x 2]) (inspect x))
>> x is: 2 
```

但我想做的是扩展它，以便我拥有

```
(_ x ...) 
```

并遍历提供的各种值，相应地打印出它们的变量名称和值。

IE

```
 (let ([x 2] [y 3]) (inspect x y))
    >> x is: 2
    y is: 3 
```

我有点卡在这部分。

例如，像这样：

```
(define-syntax (inspect stx)
  (datum->syntax
   stx
   (for ([i (cdr (syntax->list stx))])
     (printf "~a is: ~a" (syntax->datum i) i)))) 
```

我不确定如何在最后一行获得 i 的值。

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T13:27:56.033

不需要有两种模式的规则——你可以用 a 来做所有的事情`begin`：

```
(define-syntax-rule (inspect x ...)
  (begin (printf "~a is: ~a\n" 'x x) ...)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T02:46:27.353

这是一个解决方案：

```
(define-syntax inspect
  (syntax-rules ()
    [(_ x) (printf "~a is: ~a\n" 'x x)]
    [(_ x y ...) (begin (inspect x) (inspect y ...))])) 
```

请注意，子句的顺序很重要。

# javascript - Greasemonkey 函数在我的脚本中不起作用？

> ID：14249198
> 
> 赞同：2
> 
> 时间：2013-01-10T01:02:21.393
> 
> 标签：javascript, greasemonkey

我无法让我的 Greasemonkey 脚本工作......

```
GM_registerMenuCommand("What's My IP Address?", function(){

GM_xmlhttpRequest({
    method: "GET",
    url: "http://tools.ip2location.com/ib2",
    onerror: function(oEvent){ alert("Error " + oEvent.target.status + " occurred while receiving the document."); },
    onload: function(response){
        if (response.readyState !== 4 || response.status !== 200) return;
        // we can parse now
        var myregexp = /<a[^>]*>([\s\S]*?(?:Your IP Address)[\s\S]*?)<\/a>/i;
        var match = myregexp.exec(response.responseText);
        if (match != null) {
            // got match
            subject = match[1];
            // format first line
            subject_2 = subject.replace(/<br><b>/mg, " ");
            // remove html
            subject_3 = subject_2.replace(/<\/?[a-z][a-z0-9]*[^<>]*>|<!--[\s\S]*?-->/ig, "");
            // now remove whitespaces
            result = subject_3.replace(/^[ \s]*/mg, "");
        } else {
            // no match, error
            result = "I couldn't find your IP Address :(";
        }
        alert(result);
    }
});

});

(function(){

})(); 
```

没有任何反应`GM_registerMenuCommand`。

我可以发出警报，这样我就知道脚本正在运行，但是我该如何运行`GM_registerMenuCommand`呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T01:47:51.410

从 2.0 版开始，Greasemonkey 现在默认为`@grant none`.

您必须显式添加`@grant GM_xmlhttpRequest`到用户脚本元数据块，否则`GM_xmlhttpRequest`您的用户脚本将无法使用。

```
// ==UserScript==
[...]
// @grant GM_registerMenuCommand
// @grant GM_xmlhttpRequest
// ==/UserScript== 
```

# google-visualization - 为 Google Chart 引发的 IE8 中的“您的浏览器不支持图表”错误

> ID：14249200
> 
> 赞同：1
> 
> 时间：2013-01-10T01:02:30.333
> 
> 标签：google-visualization

我在 IE 标准文档模式下使用 IE8 并不断收到上述错误。它是实际的 IE8，而不是模拟器。该图表在 Firefox 和 Chrome 中完美呈现。它没有被任何 iframe 包裹。它适用于 IE7 和 IE8 兼容性视图。

我想我已经看过所有关于这个问题的帖子，无论是 Stackoverflow、Google Groups 还是其他什么的，但找不到任何真正的解决方案。

关于如何解决它的任何想法？

提前非常感谢。

# php - foreach 循环中的 PHP pcntl_fork

> ID：14249202
> 
> 赞同：0
> 
> 时间：2013-01-10T01:02:51.510
> 
> 标签：php, multithreading

我有一个 for each 循环是从一个大约 60,000 个字符串的数组中运行的，该数组是从一个文件中读取的。对于这些字符串中的每一个，我想运行一个以字符串作为参数的小型 python 文件。为了加快速度，我的计划是将每次执行都作为单独的线程运行。我尝试了以下方法，但这意味着每个孩子都进行了完整的 foreach 循环。

```
foreach($namesas $name)
{
    pcntl_fork();
    echo ++$count."\n";
    exec("python script.py -argument:".$name);
} 
```

如何使每个名称作为单独的线程运行？但随后不继续主 foreach 循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:08:17.143

见[https://stackoverflow.com/a/45966/1964163——](https://stackoverflow.com/a/45966/1964163)但如果你真的想使用 pcntl_fork，你需要检查它的返回值，看看你是否是子进程。pcntl_fork 的 PHP 文档页面上有示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:09:28.910

`pcntl_fork()`如您所见，创建与父级在同一执行点的脚本副本。

您可以通过检查以下内容的返回来检查此脚本是父脚本还是子脚本`pcntl_fork()`：

```
foreach($namesas $name)
{
    $pid = pcntl_fork();
    if(!$pid){
        //We are the child
        echo ++$count."\n";
        exec("python script.py -argument:".$name);
        break;//Jump out of loop in this child. Parent will continue.
    }
} 
```

# python - 将字符串组合在一起并计算总数

> ID：14249204
> 
> 赞同：0
> 
> 时间：2013-01-10T01:03:26.280
> 
> 标签：python, sql, group-by

有一组电子邮件地址和号码一起使用连接从 sql 中的数据库中取出。

```
SELECT ost_ticket.email, ost_ticket_response.time_taken
FROM ost_ticket
INNER JOIN ost_ticket_response
ON ost_ticket_response.ticket_id=ost_ticket.ticket_id
WHERE time_taken > 0 
```

输出

```
('log@tome.ie', 100)
('log@tome.ie', 100)
('log@tome.ie', 10)
('log@tome.ie', 2)
('temp@eircom.net', 30L)
('john@tome-ireland.com', 20L)
('1234567@tome.ie', 1234567L)
('log@tome.ie', 2L)
('log@tome.ie', 2L)
('valerie@tome.ie', 30L)
('john@cmi-tome.com', 10L)
('john@cmi-tome.com', 40L) 
```

想要能把所有的email地址都拿走，所以总有

```
log@tome.ie = 216
temp@eircom.net = 30
john@tome-ireland.com = 70
1234567@tome.ie = 1234567
john@cmi-tome.com = 50 
```

是否可以通过 sql 或输出后在 python 中执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T01:12:03.373

当您从数据库中提取数据时，请使用如下查询：

```
select emailaddress, sum(number) as total
from t
group by emailaddress 
```

# bash - Bash 脚本 - 将目录名称与字符串进行比较

> ID：14249210
> 
> 赞同：1
> 
> 时间：2013-01-10T01:03:57.930
> 
> 标签：bash

我正在使用此脚本在“站点”目录中的每个子目录中运行一个命令，不包括“所有”子目录。但是，当我运行它时，'all' 子目录仍在使用中，即使我使用 if 语句来排除它。

```
for dir in ~/htdocs/drupal/drupal/sites/*
  do
  if [ $dir = "/local/users/drupadm/htdocs/drupal/drupal/all" ]
    then
    continue
  fi
echo $dir
(cd $dir && /opt/webstack/php/5.2/bin/php /local/users/drupadm/drush/drush.php $1)
done 
```

布莱恩

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T01:08:33.140

您遗漏了`sites`子目录：

```
if [ "$dir" = /local/users/drupadm/htdocs/drupal/drupal/sites/all ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:09:03.527

```
IFS=$'\n'
for dir in `find ~/htdocs/drupal/drupal/sites/ -maxdepth 1 -type d ! -name all -printf '%p\n'`
do
    echo $dir
    (cd $dir && /opt/webstack/php/5.2/bin/php /local/users/drupadm/drush/drush.php $1)
done
IFS=' ' 
```

首先排除该目录，使用[find](http://linux.die.net/man/1/find)！

它被调用

```
find dir_name [tests...] 
```

我的命令使用的测试：

```
-maxdepth 1 
```

直系子女...

```
-type d 
```

... 查找目录 ...

```
! -name all 
```

... 未命名为“全部”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-10T01:10:54.563

您好，您需要执行以下操作

如果 [ $dir == "/local/users/drupalm/htdocs/drupal/drupal/all" ]

谢谢

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-10T01:19:19.177

尝试引用 $dir，您会发现名称中带有空格的目录会杀死您。您还可以在调用时使用 -vx 开关运行脚本，以查看读入的内容和执行的内容。bash -vx 我的脚本或设置 -vx 什么的。

# unit-testing - 我怎么知道我在“go test”中运行

> ID：14249217
> 
> 赞同：41
> 
> 时间：2013-01-10T01:05:17.373
> 
> 标签：unit-testing, go

当我运行“go test”时，我想使用不同的配置文件。我如何在我的代码中知道我是在测试上下文还是正常上下文中运行？是否有某种环境变量要检查？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2016-04-16T15:33:10.120

测试包在加载时会修改全局环境：它注册了很多命令行标志。因此，我们可以检查这些标志是否已注册：

```
func init() {
    if flag.Lookup("test.v") == nil {
        fmt.Println("normal run")
    } else {
        fmt.Println("run under go test")
    }
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-08-28T06:43:13.437

由于该`flag.Lookup("test.v")`方法对我不起作用，我想分享我自己的解决方案：

```
strings.HasSuffix(os.Args[0], ".test") 
```

或者

```
strings.Contains(os.Args[0], "/_test/") 
```

两者似乎都有效。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-10T11:20:59.557

一种可能性是使用[构建约束](http://golang.org/pkg/go/build/#hdr-Build_Constraints)。如果你运行`go test`为：

```
go test -tags testing pkgname 
```

然后，您可以使用该标签来选择哪些文件将包含在您的包的标准构建中，哪些文件将用于测试。

如果您将标准配置放在自己的文件中，则在顶部添加一行如下所示将确保它不用于测试：

```
// +build !testing 
```

然后，您可以将测试配置包含在其中一个文件中，或者包含在需要设置标记`*_test.go`的其他文件中。`testing`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-10T02:33:10.703

代码示例会有所帮助。但是从您的问题来看，听起来您已经在某处硬编码了配置文件的路径，而您可能想将其传递进去。

更改您正在测试的函数以获取定义配置文件的参数，然后在您的测试代码中传递与您在非测试代码中使用的路径不同的路径。在测试与生产时，您的代码采用不同的路径是不好的做法。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-03-07T08:59:05.147

该`flag.Lookup("test.v") == nil`方法似乎有效，但我建议使用[TestMain](https://golang.org/pkg/testing/#hdr-Main)，它专门设计用于允许对测试进行特定设置和拆卸。如果您在要测试的包中包含此方法，它将在您的单独测试之前调用，因此您可以在调用 m.Run() 之前设置全局标志或执行您想要执行的任何测试特定配置，如下所示

```
func TestMain(m *testing.M) {
    // test context initialization here
    os.Exit(m.Run())
} 
```

PS：这实际上是@calvin-sugianto 建议的，除了杜松子酒与它无关

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-11-20T00:50:52.307

该`flag.Lookup("test.v")`解决方案对我也不起作用（转到 1.13），而且我有很多服务要维护，并且`func TestMain(m *testing.M)`在每个服务中都使用该解决方案是不可行的。由于所有服务共享一个公共库，我提出了以下解决方案：

```
func isInTests() bool {
    for _, arg := range os.Args {
        if strings.HasPrefix(arg, "-test.v=") {
            return true
        }
    }
    return false
} 
```

这类似于`flag.Lookup("test.v")`解决方案，因为我们检查是否`-test.v`存在。

**编辑**：根据@mh-cbon 评论更新了代码

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-12-22T13:58:36.510

我是 golang 的新手，`flag.Lookup("test.v")`对我不起作用，所以我找到了通过在 init() 中设置 ENV 变量来识别上下文是否正在测试或正常的方法。

如果您有测试文件，例如 abc.text.go，请将环境变量“GO_ENV”设置为 init() 中的测试。

```
func init() {
    os.Setenv("GO_ENV", "testing")
} 
```

无论您想知道上下文，请使用 os.Getenv("GO_ENV")
abc.go

```
if os.Getenv("GO_ENV") == "testing" {

} else {

} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-11-09T00:44:26.527

与 Pram 的回答类似，我可能会在您运行测试时设置一个环境变量。

生成文件

```
test:
 ENV=testing go test ./... 
```

main.go

```
 env := os.Getenv("ENV") 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-23T08:15:19.147

Garrett 的更强大的解决方案是：

```
 func init() {
    if v := flag.Lookup("test.v"); v == nil || v.Value.String() != "true" {
        fmt.Println("normal run")
    } else {
        fmt.Println("run under go test")
    }
 } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-24T16:23:07.867

如果您尝试检测文件是否通过“go run”与可执行文件运行，此函数将检查目录是否包含“/Temp/go-build”（还检查 \ 是否支持 Windows）

```
if strings.Index(os.Args[0], "/Temp/go-build") != -1 || strings.Index(os.Args[0], "\\Temp\\go-build") != -1 {
    // ran with go run
} else {
    // ran as executable file
} 
```

# android - Android 组件托盘

> ID：14249231
> 
> 赞同：0
> 
> 时间：2013-01-10T01:07:10.917
> 
> 标签：android, netbeans, components, pallet

我在我的 netbeans ide（版本 7.1.1）中配置了 Android 4.0。我能够创建一个 Android 项目，但无法在工具部分看到任何组件托盘以拖放到布局主 xml 中？不幸的是，右键单击 xml 代码并没有给我一个“在图形编辑器上打开”选项。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:48:09.017

NBAndroid 中没有用于 Android 布局的 UI 设计器，我不知道任何其他对 NetBeans 的 Android 开发支持。您可以尝试布局预览[http://www.nbandroid.org/2012/11/early-version-of-preview-functionality.html](http://www.nbandroid.org/2012/11/early-version-of-preview-functionality.html)以查看您的项目将如何呈现。

# sql - 范围内的 Sql SUM

> ID：14249236
> 
> 赞同：3
> 
> 时间：2013-01-10T01:07:37.157
> 
> 标签：sql, oracle

我有数据，看起来像这样。为简单起见，我将显示`date`为 'Day' + number

```
Date     ID
-----------
Day1     A
Day1     B
Day1     C  
Day2     A
Day2     A
Day3     A
Day4     B
Day5     A 
```

我想计算每个 中有多少个 ID `date`。但是，每个日期都需要包含所有以前的日期计数。

意思是，如果用户选择范围从第 3 天到第 5 天。

```
Date    Count
Day3    Day1+Day2+Day3
Day4    Day1+Day2+Day3+Day4
Day5    Day1+Day2+Day3+Day4+Day5 
```

我能想到的就是每天使用“UNION”添加 3 个查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T01:10:43.283

您正在寻找 Oracle 支持的累积总和。

试试这个：

```
select date, sum(daycnt) over (order by date)
from (select date, count(*) as daycnt
      from t
      where date between DAY_START and DAY_END
      group by t
     ) t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:31:39.157

检查这些东西

```
select Dt, count(*)
from
(
 select t2.Date Dt
 from t t1, (select Date from t group by Date) t2
 where t1.Date < t2.Date
)
group by Dt 
```

# google-apps-script - 谷歌脚本：一个项目中的多个doPost

> ID：14249237
> 
> 赞同：2
> 
> 时间：2013-01-10T01:07:38.490
> 
> 标签：google-apps-script

请求摘要：

我知道 FormPanel 与 doPost(e) 一起使用。

但是，如果我有几个 formPanel 并且它们中的每一个都需要使用不同的 doPost(e) 集？

由于 doPost(e) 是固定名称，如何有一些不同的 doPost(e)，如 doPost1(e)、doPost(2) 等。

createSubmitButton 的问题相同，因为它会自动查找函数 doPost(e)，如何引导每个 formPanel 的提交触发正确的 doPostX(e)

如果上述不可行，是否意味着每个项目仅限于单个 doPost(e) 函数？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:45:41.627

doPost 和 doGet 函数可能存在的问题是每个项目最多只能有一个 doGet 和一个 doPost。这是因为这些功能使用共享资源，因此此类功能在一个项目的功能之间共享。

实际上有两种解决方法（至少我知道并且只测试了其中两种）来使用多个 doPost 查询，这些查询在一个项目中执行不同的操作。

最简单（也是最好的）方法是在单个 doPost 函数中使用不同的函数，每个任务都需要一个 doPost 函数。这里的诀窍是您需要在表单中添加一个隐藏字段，以帮助您区分项目中的不同表单。

然后您可以添加一个“if()else if()else”块来根据隐藏字段的值选择正确的函数。

例如，如果您有两个功能，您可以执行以下操作：

```
function doGet(e){
  var app=UiApp.createApplication();
  some stuff;
  return app; 
}

function doPost(e){

  some stuff

  if(e.parameter.form=="value1"){
    function1(e,otherParameters);
  }
 else if(e.parameter.form=="value2"){
    function2(e,otherParameters);
 }
 else{

 }

 some other stuff
}

function function1(e,otherParameters){

 var app=UiApp.getActiveApplication();
 var panel=app.createVerticalPanel();
 var formPanel=app.createFormPanel();
 var button=app.createSubmitButton();
 var formHidden=app.createHidden().setName("form");
 other widgets;
 panel.add(formHidden);
 panel.add(other widgets);
 panel.add(button);
 formPanel.add(panel);

 some stuff;
 app.add(formPanel);
}

function function2(e,otherParameters){
 var app=UiApp.getActiveApplication();
 var panel=app.createVerticalPanel();
 var formPanel=app.createFormPanel();
 var button=app.createSubmitButton();
 var formHidden=app.createHidden().setName("value2");
 other widgets different from those in function1;
 panel.add(formHidden);
 panel.add(other widgets);
 panel.add(button);
 formPanel.add(panel);

 some stuff different from what you have in function1;
 app.add(formPanel);
} 
```

您还可以创建另一个具有 doPost 功能的项目（例如 Project2），并将该项目部署为 Web 应用程序。

这个想法是，您可以使用 FormPanel 的 setAction("url") 方法将信息从给定表单发送到某些 url。使用此方法，您可以将表单的内容发送到将处理您的查询的网页。因此，如果您将此方法的字符串值设置为您的网络应用程序的 url，您将向该应用程序发送 google-script 表单的内容。这就是这个应用程序，它将使用它的 doPost 函数来处理查询。

此选项开发起来有点困难，并且存在当前根本无法处理来自 FileUpload 的 Blob 的缺点。

希望对你有帮助

干杯

尼古拉斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-27T20:14:05.507

注意：在`doPost()`传递控制权的子程序中，一定要使用`UiApp.getActiveApplication()`方法。在匆忙中，我花费的时间比我愿意承认的要多，因为我`UiApp.createApplication()`在每个子例程中都调用了该方法。

**编辑**

[这是演示多页表单的工作代码](http://pastebin.com/pX5P1NcA) ，即它执行初始操作`doGet()`，然后让您来回前进执行多个`doPost()`'s。`getForm()`所有这些都是在标准`doGet()`和函数调用的单个函数中完成的`doPost()`。

```
// Muliple page form using Google Apps Script

function doGet(eventInfo)  {return GUI(eventInfo)};
function doPost(eventInfo) {return GUI(eventInfo)};

function GUI (eventInfo) {
  var n = (eventInfo.parameter.state == void(0) ? 0 : parseInt(eventInfo.parameter.state));
  var ui = ((n == 0)? UiApp.createApplication() : UiApp.getActiveApplication());
  var Form;
  switch(n){
    case -1: {
      Form = ui.createFormPanel().add(ui.createHTML("<H3>Exited by submission of form "+eventInfo.parameter.formId+"</h3>"));
    } break;
    case 0: {
      Form = getForm(eventInfo,n); // Use identical forms for demo purpose only
    } break;
    case 1: {
      Form = getForm(eventInfo,n); // In reality, each form would differ but...
    } break;
    default: {
      Form = getForm(eventInfo,n) // each form must abide by (implement) the hidden state variable
    } break;
  }
  return ui.add(Form);
};

function getForm(eventInfo,n) {
  var ui = UiApp.getActiveApplication();

  // Increment the ID stored in a hidden text-box
  var state = ui.createTextBox().setId('state').setName('state').setValue(1+n).setVisible(true).setEnabled(false);
  var H1 = ui.createHTML("<H1>Form "+n+"</H1>");
  var H2 = ui.createHTML(
    "<h2>"+(eventInfo.parameter.formId==void(0)?"":"Created by submission of form "+eventInfo.parameter.formId)+"</h2>");

  // Add three submit buttons to go forward, backward and to validate the form
  var Next = ui.createSubmitButton("Next").setEnabled(true).setVisible(true);
  var Back = ui.createSubmitButton("Back").setEnabled(n>1).setVisible(true);
  var Stay = ui.createSubmitButton("Stay").setEnabled(n>0).setVisible(true);
  var Exit = ui.createSubmitButton("Exit").setEnabled(n>0).setVisible(true);
  var Buttons = ui.createHorizontalPanel().add(Back).add(Stay).add(Next).add(Exit);
  var Body = ui.createVerticalPanel().add(H1).add(H2).add(state).add(Buttons).add(getParameters(eventInfo));
  var Form = ui.createFormPanel().setId((n>0?'doPost[':'doGet[')+n+']').add(Body);

  // Add client handlers using setText() to adjust state prior to form submission
  // NB: Use of the .setValue(val) and .setValue(val,bool) methods give runtime errors!
  var onClickStayHandler = ui.createClientHandler().forTargets(state).setText(''+(parseInt(n)));
  var onClickBackHandler = ui.createClientHandler().forTargets(state).setText(''+(parseInt(n)-1));
  var onClickExitHandler = ui.createClientHandler().forTargets(state).setText('-1');
  Stay.addClickHandler(onClickStayHandler);
  Back.addClickHandler(onClickBackHandler);
  Exit.addClickHandler(onClickExitHandler);

  // Add a client handler executed prior to form submission
  var onFormSubmit = ui.createClientHandler()
  .forTargets(state).setEnabled(true) // Enable so value gets included in post parameters
  .forTargets(Body).setStyleAttribute("backgroundColor","#EEE");    
  Form.addSubmitHandler(onFormSubmit);

  return Form;
}

function getParameters(eventInfo) {
  var ui = UiApp.getActiveApplication();
  var panel = ui.createVerticalPanel().add(ui.createLabel("Parameters: "));
  for( p in eventInfo.parameter)
    panel.add(ui.createLabel(" - " + p + " = " + eventInfo.parameter[p]));
  return panel;
} 
```

该代码使用单个“隐藏”状态（此处以 a 可视化`TextBox`）和多个`SubmitButton`'s 来允许用户在表单序列中前进和后退，以及验证表单的内容。三个额外`SubmitButton`的 's 使用 's “重新连接” `ClientHandler`，它们在表单提交之前简单地修改隐藏状态。

**笔记**

*   在任何给定的形式中，您实际上可以拥有应用程序需要的任意数量的按钮；即多于或少于此处演示的四个。此示例中的`Stay`按钮有效地发布当前状态并重新加载相同的表单。请注意，这在功能上等同于执行服务器处理程序。可能的用途是例如。加载默认数据或将现有数据从/保存到数据库/工作表。

*   请注意`.setText(value)`在客户端处理程序中使用该方法。使用 Chrome 浏览器，如果我切换到`TextBox`'s`.setValue(value)`或`.setValue(value, fireEvents)`方法中的任何一个，我会收到奇怪的运行时错误。

*   `Script Property`我尝试（未成功）使用 a而不是隐藏的 TextBox来实现此逻辑。这需要使用服务器处理程序而不是客户端处理程序。行为不稳定，向我暗示异步服务器端事件是在表单提交事件之后发生的。

# c# - 如何停止多帧

> ID：14249240
> 
> 赞同：0
> 
> 时间：2013-01-10T01:08:07.483
> 
> 标签：c#, wpf, kinect

我正在做我的最后一年项目。关于 Kinect。我想在遇到手势时打印一个flytext。但我来了多帧。下面的列表是我的代码。

```
public void checkHand(Joint head, Joint rightHand, Joint leftHand)
{
    bool action;
    int i;

    action = (rightHand.Position.Y > head.Position.Y);

    if (action == true)
    {
        for(i=0;i<1;i++)
        {
        FlyingText.NewFlyingText(this.screenRect.Width / 30, new Point(this.screenRect.Width / 2, this.screenRect.Height / 2), "right Hand!");
        }
        action = false;

    }
} 
```

# c# - 正则表达式替换简单字符串

> ID：14249248
> 
> 赞同：0
> 
> 时间：2013-01-10T01:09:04.193
> 
> 标签：c#, .net, regex

我想使用正则表达式编写一段代码，让我替换括号内的任何值。采取以下案例

目标文本：构建 (123)

```
build (##-build-##)
build (111)
build (xxyyzz) 
```

在所有情况下，我都想在页面上找到“build ( *** )”这个词，并将其替换为我想要的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:13:56.100

代替：

```
\b(build \()[^)]+(\)) 
```

和：

```
\1yourreplacementhere\2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T01:13:47.903

试试这个代码，但要注意它会忽略嵌套括号：

```
var pattern = @"build \((.+)\)";
var regex = new Regex(pattern);
string[] strings =
{
    "build (##-build-##)",
    "build (111)",
    "build (xxyyzz)"
};
var results = strings.
    Select(s => regex.Replace(s, "(foo)")).
    ToArray();
//results = {build (foo), build(foo), build(foo)} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T01:16:48.393

使用模式`(?<=build\s)\([^)]*\)`：

```
var input = "build (##-build-##)";

var result = Regex.Replace(input, @"(?<=build\s)\([^)]*\)", "new value");

Console.WriteLine(result); 
```

# opengl - 如何使用 OpenGL 3/4

> ID：14249253
> 
> 赞同：1
> 
> 时间：2013-01-10T01:09:28.333
> 
> 标签：opengl

在我的新项目中，我想使用 OpenGL 版本 3/4，但我没有找到任何关于我必须使用哪些库或头文件的参考资料。

我查看了[官方的 OpenGL 主页](http://www.opengl.org/)，但在那里我找不到任何库。我必须在哪里下载新版本的 OpenGL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:16:03.483

正如 Pubby 在他的评论中所说，您仍然使用 OpenGL 库。但是您可能应该使用可以在[http://www.opengl.org/registry/](http://www.opengl.org/registry/)找到的库头文件，并且您必须以不同的方式创建上下文。例如，使用[GLFW](http://www.glfw.org/)，我会执行以下操作：

```
GLenum init_window(int w, int h)
{
        int major, minor, rev;
        GLenum glewResult;

        if (glfwInit() != GL_TRUE) {
                fprintf(stderr, "error: could not init GLFW\n");
                return GL_FALSE;
        }
        glfwGetVersion(&major, &minor, &rev);
        printf("GLFW %d.%d.%d\n", major, minor, rev);

        glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 4);
        glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 3);
        glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);
        glfwOpenWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);
        if (!glfwOpenWindow(w, h, 0,0,0,0, 24,0, GLFW_WINDOW)) {
                fprintf(stderr, "Could not open window\n");
                glfwTerminate();
                return GL_FALSE;
        }

        glfwGetGLVersion(&major, &minor, &rev);
        fprintf(stderr, "Context: OpenGL %d.%d.%d\n", major, minor, rev);

        glewExperimental = GL_TRUE;
        glewResult = glewInit();
        if (glewResult != GLEW_OK) {
                fprintf(stderr, "error: could not init GLEW\n");
                fprintf(stderr, "error: %s\n", glewGetErrorString(glewResult));
                glfwTerminate();
                return GL_FALSE;
        }
        return GL_TRUE;
} 
```

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:21:27.060

OpenGL 是由 GPU 供应商实现的库。如果你有一个不错的 GPU，那么你可能有 OpenGL 3 或 4。在 Windows 上，默认情况下只有 OpenGL 1.1，但供应商使用扩展实现“完整”的 OpenGL。一般来说，您应该使用一些帮助库来获取这些扩展（或编写您自己的代码:)）

如果你想使用“现代”OpenGL。至少尝试使用 OpenGL 3.3 的核心功能。

信息的重要来源：[http ://www.opengl.org/wiki/Main_Page](http://www.opengl.org/wiki/Main_Page)

书籍： http: [//www.starstonesoftware.com/OpenGL/](http://www.starstonesoftware.com/OpenGL/)

# azure - Azure 存储状态挂在“正在解析 DNS”

> ID：14249261
> 
> 赞同：2
> 
> 时间：2013-01-10T01:10:42.840
> 
> 标签：azure

我有一个刚刚在 Azure 上创建的新存储，我注意到状态停留在“正在解析 DNS”。关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T04:11:33.897

等待 1/2Hr 后。

我进行了搜索，发现了这个博客 我发现了这个博客[http://azarc3.wordpress.com/2012/09/28/azure-stuck-at-resolving-dns/#comment-74](http://azarc3.wordpress.com/2012/09/28/azure-stuck-at-resolving-dns/#comment-74)

作者认为这是一个缓存问题。

我刚刚关闭标签并再次登录。问题解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-13T23:51:46.027

我有同样的问题，通过在我的浏览器中点击刷新来修复它。无需注销或清除缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:25:29.557

仅供参考 第二天我注意到这个问题不再是问题。

# html - 如何将自定义参数传递给 Facebook 分享链接

> ID：14249266
> 
> 赞同：15
> 
> 时间：2013-01-10T01:10:54.030
> 
> 标签：html, facebook, hyperlink

> **可能重复：**
> [Facebook Sharer 如何选择图片？](https://stackoverflow.com/questions/1138460/how-does-facebook-sharer-select-images)

如何创建可以自定义共享的标题、图像、链接和描述的链接？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-10T01:10:54.030

### 自 2013 年 12 月 18 日起，这不再有效。有关替代方案，请参阅评论。

`http://www.facebook.com/sharer.php?s=100&p[title]=titleheresexily&p[url]=http://www.mysexyurl.com&p[summary]=mysexysummaryhere&p[images][0]=http://www.urltoyoursexyimage.com`

![在此处输入图像描述](../Images/8361e4b576ddec59d608c61c5d5a6fbd.png)

[http://blog.cjgammon.com/?p=336](http://blog.cjgammon.com/?p=336)

我厌倦了为此在谷歌上搜索网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:13:33.207

您可以通过使用 facebook 的开放图元标记来做到这一点。看看这里： [http ://davidwalsh.name/facebook-meta-tags](http://davidwalsh.name/facebook-meta-tags)

# javascript - 我的 JSON HTTP 请求有问题

> ID：14249268
> 
> 赞同：1
> 
> 时间：2013-01-10T01:11:05.483
> 
> 标签：javascript, ajax, json

前言：我是 JavaScript 新手，正在学习一些教程，但我被困在这里！

我在安装了 PHP 5.3.13 的 WAMP 上本地运行以下命令。我在控制台中没有收到任何错误，但由于某种原因没有显示任何内容！

有人知道为什么吗？

最小化的 JSON：

```
{"channel":{"title":"RSS Sample","description":"A sample RSS Feed","link":"http://www.website.com","copyright":"Copyright 2012"}} 
```

JavaScript：

```
var xhr = new XMLHttpRequest();

xhr.open("GET", "rss.json", true);

xhr.onreadystatechange = function() {
if (xhr.readystate === 4) {
    var status = xhr.status;

    if ((status >= 200 && status < 300) || status === 304) {
        var rss = JSON.parse(xhr.responseText);

        alert(rss.channel.description);
    } else {
        alert("Request unsuccessful");
    }
}
};

xhr.send(null); 
```

任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:24:39.937

正确的属性名称是`readyState`（大写“S”）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-10T01:16:41.953

我还没有见过以这种方式使用 JSON，尽管我更喜欢 php。

尝试使用 AJAX 获取该 JSON。它看起来像这样

```
$("#a_button").click(function() {
        $.ajax({
               type: "POST",
               url: "json.php",
               dataType: "json",
               cache: false,
               success: function(data)
               {
                    alert(data.smth);
               }
             });
        return false;
    }); 
```

总是使用这种方式，它工作得很好。

# asp.net - ASP.NET 应用程序从 Session.Remove 实现中引发 System.NullReferenceException

> ID：14249269
> 
> 赞同：5
> 
> 时间：2013-01-10T01:11:09.903
> 
> 标签：asp.net, session, nullreferenceexception

我们在 ASP.NET Web 应用程序中得到随机 System.NullReferenceException。我们正在使用 inproc 会话状态。堆栈跟踪：

```
System.NullReferenceException: Object reference not set to an instance of an object.
at System.Collections.Specialized.NameObjectCollectionBase.BaseRemove(String name)
at System.Web.SessionState.SessionStateItemCollection.Remove(String name)
at System.Web.SessionState.HttpSessionStateContainer.Remove(String name)
at System.Web.UI.SessionPageStatePersister.Save()
at System.Web.UI.Page.SaveAllState()
at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

问题似乎来自我们已经像这样覆盖的 Page.PageStatePersister 属性。

```
protected override PageStatePersister PageStatePersister {
  get {
    return new SessionPageStatePersister(Page); 
  }
} 
```

Reflector 显示 SessionPageStatePersister 在内部调用了 Session.Remove。

当直接在 Page 上调用 Session.Remove 时，我们会得到类似的随机 NullReferenceException。相关堆栈跟踪：

```
---> System.NullReferenceException: Object reference not set to an instance of an object.
at System.Collections.Specialized.NameObjectCollectionBase.BaseRemove(String name)
at System.Web.SessionState.SessionStateItemCollection.Remove(String name)
at System.Web.SessionState.HttpSessionStateContainer.Remove(String name)
at System.Web.SessionState.HttpSessionState.Remove(String name)
at PERH.WebFramework.Bases.PageBase.OnPreInit(EventArgs e) in 
```

任何想法，什么可能导致这些异常？

环境：

IIS6、Windows Server 2003 64 位、.net Framework 3.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-03-22T21:58:34.053

当同时处理同一用户（来自同一会话 ID）的请求时，可能会出现此问题。

这是因为`System.Web.SessionState.SessionStateItemCollection`在删除条目时不检查条目是否为空。

在该`System.Web.SessionState.SessionStateItemCollection.Remove(string name)`方法中，锁定是在私有集合上设置的，*`_serializedItems`*因此*Remove*操作是线程安全的。*然而，这个私有集合在添加*操作期间不会被锁定。考虑到它的*`_serializedItems`*行为类似于一个调整大小的数组（当条目数 >= 其容量的 1/2 时，容量会增加一倍，并且新条目用空值填充）并发添加可能会导致空值保留在集合中间的情况。条目只会从 [0; 条目计数]`_serializedItems`集合的范围。删除条目`Key`时，无需检查空值即可访问其属性。因此，如果集合中间的**空**`NullReferenceException`条目被删除，则获取强制转换。

默认情况下，所有具有相同会话 ID 的请求都会按顺序处理，除非`System.Web.Configuration.PagesSection.EnableSessionState`明确设置为`ReadOnly`. 在这种情况下，任何涉及将值添加到`System.Web.SessionState.HttpSessionState`（内部使用`System.Web.SessionState.HttpSessionStateContainer`而内部使用`System.Web.SessionState.SessionStateItemCollection`）的操作都应正确锁定以确保线程安全。

# android - Android SQLite RawQuery 结果总是说它在数据库中不存在时找到

> ID：14249271
> 
> 赞同：0
> 
> 时间：2013-01-10T01:11:17.330
> 
> 标签：android, sqlite

好的，所以当我查看这些示例时，我显然遗漏了一些东西。我有以下代码，它不断返回该项目存在的第一个 if 语句，但它对我查询的任何内容都执行此操作。我知道它们不存在，因为我查询的某些内容甚至不是 12 个字符并且不可能匹配。我的理解是使用 moveToFirst(); 要么返回它匹配的结果，但文档说 moveToFirst 只是将它移动到第一行并且天气它是成功的。所以，我认为为什么它总是成功是因为创建了游标并且游标确实移动到了第一行。如果这是怎么回事，我该如何检查数据库中是否存在值？感谢您的帮助，不知道为什么这会逃避我，前几天我用同样的方法让它工作，

```
 String selectQuery = "SELECT * FROM " + TABLE_NAMES + " WHERE " + COLUMN_NAME = '" + contents +"'";
    Cursor cursor = myDataBase.rawQuery(selectQuery, null);

    if (cursor.moveToFirst()) {
        contents = "The item" + contents +" is a valid.";
        tv.setText(contents);
    }else{
         contents = "The item " + contents + " is not a valid WIC item";
         tv.setText(contents);
    }
    close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:26:56.273

您的查询语句中有一些错误。请用以下内容替换它：

```
String selectQuery = "SELECT * FROM " + TABLE_NAMES + " WHERE " + COLUMN_NAME + "=" + contents; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:00:26.840

你确定`TABLE_NAMES`只包含一个名字吗？如果不是，结果将是真的

# android - MediaRecorder.AudioSource.DEFAULT 阻止通话中的音频

> ID：14249272
> 
> 赞同：2
> 
> 时间：2013-01-10T01:11:19.380
> 
> 标签：android, audio, record, android-mediarecorder

我正在开发一个应用程序，该应用程序使用 MediaRecorder 在拨打或接听电话时记录我自己的声音（使用`AudioSource.MIC`或）。`AudioSource.DEFAULT`我遇到的问题是，每当麦克风开始录音时，我就再也听不到通话中的任何声音了。删除应用程序后，我可以完美地听到所有内容。

为什么会这样？有没有办法在用麦克风录制我的声音时正常听我的电话？

PS：我不是在询问`AudioSource.VOICE_CALL`或任何我知道被阻止的事情等等。请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T08:16:15.607

```
<uses-permission android:name="android.permission.RECORD_AUDIO"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

recorder.reset();
        recorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
         //passing recorded file's path    
        recorder.setOutputFile(recording.getAbsolutePath()); 

        recorder.prepare();
        recorder.start(); 
```

# c# - 是否可以在 c# 的 lambda 表达式中使用可选/默认参数？

> ID：14249277
> 
> 赞同：25
> 
> 时间：2013-01-10T01:12:10.443
> 
> 标签：c#, lambda, optional-parameters

有没有办法在 c# 中使用带有[lambda 表达式的](http://msdn.microsoft.com/en-us/library/bb397687.aspx)[可选参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)（默认参数） ？我已经阅读了文档，但找不到任何可以说的方式。

为了说明，我可以定义使用可选参数来提供默认值的简单方法，如下所示：

```
void MyMethod(string arg = "default-value")
{ 
    Console.WriteLine(arg);
} 
```

我想知道的是我是否能够使用 lambda 表达式做同样的事情。

```
// gives a syntax error
Action<string> MyMethod = (arg = "default") => Console.WriteLine(arg); 
```

我可以使用委托处理具有默认值的可选参数，但这似乎有点笨拙。

```
delegate void MyDelegate(string arg = "default");
MyDelegate MyMethod = arg => Console.WriteLine(arg); 
```

或者，我可以检查 lambda 正文中的参数，例如...

```
 Action<string> MyMethod = (arg) => Console.WriteLine(string.IsNullOrEmpty(arg) ?
                                    "default" :
                                    arg); 
```

但这又显得有点笨拙。

是否可以使用可选参数在 c# 的 lambda 表达式中设置默认值？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-10T01:14:41.980

不，调用者（调用委托的代码）没有“看到” lambda 表达式，因此在那里指定默认参数没有意义。调用者看到的只是委托。例如，在您的情况下，调用代码*只*知道`Action<string>`- 编译器如何知道提供 lambda 表达式指定的默认值？

作为事情变得棘手的一个例子，想象一下这*是否*可行。然后考虑这段代码：

```
Action<string> action;
if (DateTime.Today.Day > 10)
{
    action = (string arg = "boo") => Console.WriteLine(arg); 
}
else
{
    action = (string arg = "hiss") => Console.WriteLine(arg);
}
action(); // What would the compiler do here? 
```

请记住，参数是由编译器*在调用站点*提供的——那么它应该如何处理最后一行呢？

这有点像拥有一个接口和一个实现——如果你在一个接口上有一个默认参数，那很好；如果你只在实现上拥有它，那么只有知道具体实现的调用者才会看到它。在 lambda 表达式的情况下，调用者实际上没有可见的实现可供使用：只有委托签名。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T01:27:56.327

lambda 将匹配分配给它的委托的签名；如果没有分配给委托，则 lambda 无法编译。

如果委托包含可选参数，则使用该委托可以选择提供参数。如果委托没有，那么该委托的使用不能省略任何参数。

虽然`Action`和`Func`代表非常方便，并且可以表示大多数签名，但它们不能表示任何带有可选参数的签名；您必须为此使用另一个委托定义。

请记住，`Action`并不是`Func`特别特别，它们只是每个人都使用的两个代表，因此他们不必担心为每件小事创建自己的代表。

# ms-access - MS Access VBA Addnew 返回现有记录？

> ID：14249280
> 
> 赞同：1
> 
> 时间：2013-01-10T01:12:17.477
> 
> 标签：ms-access, vba, dao

我有一个用 Microsoft Access 2010 编写的数据库应用程序。除此之外，它有两个相关的表：“订单”，其中包含有关订单的通用信息的条目，以及“框架订单”，其中包含有关特定类型订单的信息。它们由“OrderID”链接，这是“Orders”表的主键。

数据库分为前端和后端，所以这些是链接表。

这是用于创建一个全新的 Order 的代码，其中 FrameOrder 链接回它：

```
Private Sub FramingQuoteButton_Click()
    ' Create a new Order of type Framing, then create a Framing Order linking back to it
    Dim rs As DAO.Recordset
    Dim frs As DAO.Recordset
    Dim ThisOrderID As Long
    Dim ThisFrameOrderID As Long

    Set rs = CurrentDb.OpenRecordset("Orders")
    rs.AddNew
    rs!OrderType = "FRAME"
    rs!CustomerID = DefaultCustomerID()
    rs.Update
    rs.Bookmark = rs.LastModified
    ThisOrderID = rs!OrderID
    rs.Close

    Set frs = CurrentDb.OpenRecordset("FrameOrder")
    frs.AddNew
    frs!OrderID = ThisOrderID
    frs.Update <<<< This is where the problem shows up
    frs.Bookmark = frs.LastModified
    ThisFrameOrderID = frs!FrameOrderID
    frs.Close

    DoCmd.OpenForm "FrameOrder", , , "OrderID = " & ThisOrderID, , , "NEW"

    Set rs = Nothing
    Set frs = Nothing
End Sub 
```

所以首先我创建了一个全新的“订单”条目。然后我创建一个“FrameOrder”条目并将“OrderID”设置为我刚刚创建的“Order”的主键。

这就是问题所在：有时当我这样做时，上面显示的更新行会引发一个关键错误。当我在调试器中查看它时，似乎 frs.AddNew 调用生成了一个记录，其键是现有记录的键，位于表中间的某个位置！如果我在后端执行“压缩和修复数据库”，问题就会消失。

由于这个应用程序还在开发中，所以我经常将前后端文件复制到开发系统中，做一些工作，然后将它们复制回生产系统。这个问题在我完成这样的复制后最常出现（是的，我确保在复制之前关闭数据库）。

任何想法可能会发生什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:51:11.033

我建议刷新链接表，有时如果数据结构发生变化，这些变化不会传播到前端，就会出现这样的问题。我希望这行得通。

# c - while循环中的无限循环

> ID：14249287
> 
> 赞同：2
> 
> 时间：2013-01-10T01:12:51.373
> 
> 标签：c, loops, infinite

```
fp=fopen("Product.dat","rb+");
while (fread(&prod,sizeof (prod),1,fp)==1) {
    prod.stockquant = prod.stockquant + prod.stockorderquant;
    prod.stockorderquant = 0;
    fseek(fp, -sizeof(prod), SEEK_CUR);
    fwrite (&prod, sizeof(prod), 1, fp);
}
fclose (fp); 
```

一旦我进入while循环，我就会得到一个无限循环。文件指针是 fp，prod 是一个名为 PRODUCT 的 Struct 实例，stockquant 和 stockorderquant 都是 struct 中的变量。我正在尝试更改 stockquant 和 stockorderquant 的值。这是我为我的项目做的批量更新。我试图在编辑每个产品的 stockquant 和 orderquant 时浏览整个名为 product.dat 的文件。

为什么我得到一个无限循环？当我在检查 prod.id = userinput 的 if 语句中使用它时，此方法似乎有效。

有什么帮助吗？

一些额外的代码：

```
void batchupdate(void) { 
    system("cls");
    FILE *fp;
    int c=0;
    gotoxy(20,4);
    printf("****Batch Update Section****");
    char another='y';
    while(another=='y')
    {
        system("cls");
        gotoxy(15,6);
        printf("Are you sure you want to Batch update (Press Y or N)?");

        if((getch()=='y') || (getch() == 'Y')) {
        system("cls");
        int pos;

        fp=fopen("Product.dat","rb+");
        while(fread(&prod,sizeof(prod),1,fp)==1) {
                prod.stockquant = prod.stockquant + prod.stockorderquant;
                product.stockorderquant = 0;

                fseek(fp, -(sizeof(prod)), SEEK_CUR);
                fwrite (&prod, sizeof(prod), 1, fp);
                getchar();
                pos = ftell(fp);
                printf("%d",&pos);

        }
        fclose (fp);

        gotoxy(15,16);
        printf("Complete");
        gotoxy(15,18);
        printf("All products stock quantity have been updated. The stock order quantity has been reset");

        gotoxy(15,16);
        printf("Do you want to modify another product?(Y/N)");
        fflush(stdin);
        another=getch() ; }

    else { if((getch()=='n') || (getch() == 'N')) {
                mainmenu();
           }
    }
}
    returnfunction();
} 
```

这就是我列出我的产品的方式（它有效！）（请注意此处显示的订单数量与 stockorderquant 无关

```
void listproduct(void)  
{
    int x;
    FILE *fp;
    system("cls");
    gotoxy(1,1);
    printf("*********************************Product List*****************************");
    gotoxy(2,2);
    printf("Name              ID    Price  StockQuant  Order Quant  Description");
    x=4;
    fp=fopen("Product.dat","rb");
    while(fread(&prod,sizeof(prod),1,fp)==1){
        gotoxy(2,x);
        printf("%s",prod.prodname);
        gotoxy(20,x);
        printf("%d",prod.prodid);
        gotoxy(26,x);
        printf("%.2f",prod.price);
        gotoxy(34,x);
        printf("%d",prod.stockquant);
        gotoxy(46,x);
        printf("%d",prod.orderquantity);
        gotoxy(59,x);
        printf("%s",prod.description);
        printf("\n\n");
        x++;
    }
    fclose(fp);
    gotoxy(35,25);
    returnfunction();
} 
```

我的结构定义如下：

```
struct PRODUCT
{
    int id;
    char name[30];
    char desc[50];
    float price;
    int stockquant;
    int orderquant;
    int stockorderquant;
};

struct PRODUCT prod; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T01:36:37.580

让我引用手册页`fopen`：

> 读和写可以以任何顺序在读/写流上混合。请注意，ANSI C 要求文件定位函数在输出和输入之间进行干预，除非输入操作遇到文件结尾。（如果不满足此条件，则允许读取返回除最近写入之外的写入结果。）因此，在写入和读取操作之间放置一个`fseek(3)`或操作是一种很好的做法（在 Linux 下确实有时是必要的）`fgetpos(3)`这样的流。这个操作可能是一个明显的空操作（因为
> `fseek(..., 0L, SEEK_CUR)`它的同步副作用被称为。

`fseek`写完后调用，

```
fseek(fp, -sizeof(prod), SEEK_CUR);
fwrite (&prod, sizeof(prod), 1, fp);
fseek(fp, 0, SEEK_CUR); 
```

应该修复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T01:21:22.717

问题是

```
fseek(fp, -sizeof(prod), SEEK_CUR); 
```

将当前指针移动到`sizeof(prod)`当前文件指针之前，下一次读取将读取相同的记录，并移到之前，等等。

Hece，无限循环。

实际上，它一直只读取第一条记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T01:27:43.200

这句话

```
fwrite (&product, sizeof(prod), 1, fp); 
```

正在尝试存储一个名为 的结构`product`，而不是`prod`在文件中，并且可能会返回一个错误（未检查），这将阻止指针移动到要读取的下一条记录，从而使此代码一次又一次地读取同一条记录。

您应该存储`prod`刚刚更改的变量，并且不要忘记检查错误

```
if (fwrite (&prod, sizeof(prod), 1, fp)==-1)
    perror("fwrite error"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T01:26:40.603

您将遇到值问题，`-sizeof(prod)`因为`sizeof`返回一个无符号值。当你否定它时，它变成一个非常大的值，然后你隐式地将它转换为`long int`.

试试这个：

```
fseek(fp, -(int)sizeof(prod), SEEK_CUR); 
```

此外，您需要测试您是否`fwrite`成功，否则您将继续倒带。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T01:28:51.027

我相信你有一个无限循环，你总是重新寻找文件位置指示器：

```
fseek(fp, -sizeof(prod), SEEK_CUR); 
```

因此，您阅读了一个元素，然后重新搜索它，并且始终无限地阅读相同的元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-22T07:02:50.620

'long' 中 fseek() 的第二个默认参数类型。您需要将其类型转换为“long”，即 fseek(fp, -(long) sizeof(prod), SEEK_CUR);

# python - 将“Quoted-printable”编码更改为“utf-8”

> ID：14249288
> 
> 赞同：11
> 
> 时间：2013-01-10T01:12:53.207
> 
> 标签：python, encoding, python-3.x

我正在尝试使用 imaplib 阅读电子邮件。我收到此邮件正文：

```
=C4=EE=E1=F0=FB=E9 =E4=E5=ED=FC! 
```

那就是`Quoted-printable`编码。
我需要从中得到`utf-8`。它应该是`Добрый день!`

我用谷歌搜索了它，但它与 Python 的版本太乱了。它在 Python 3 中已经是 unicode，我不能`.encode('utf-8')`在这里使用。

我怎样才能将其更改为`utf-8`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-10T01:19:41.673

该[`quopri`模块](http://docs.python.org/2/library/quopri.html)可以将这些字节转换为未编码的字节流。然后，您需要从它们所在的任何字符集中解码它们，然后编码回`utf-8`.

```
>>> b = quopri.decodestring('=C4=EE=E1=F0=FB=E9 =E4=E5=ED=FC')
>>> print(b.decode('windows-1251'))
Добрый день 
```

# ios - Amazon S3 上传部分返回 null

> ID：14249290
> 
> 赞同：2
> 
> 时间：2013-01-10T01:13:13.330
> 
> 标签：ios, objective-c, amazon-web-services, amazon-s3

我正在尝试使用 Amazon S3 SDK 将大文件部分上传到 S3 服务器。我有以下代码：

```
-(void)multipartUpload:(NSData*)dataToUpload inBucket:(NSString*)bucket forKey:(NSString*)key
{
    //bool using3G = ![self isWifiAvailable];

    AmazonS3Client *s3 = [[AmazonS3Client alloc] initWithAccessKey:kS3ApplicationKey withSecretKey:kS3ApplicationSecret];

    s3.timeout = 99999999;

    @try {
        //[s3 createBucketWithName:bucket];

        S3InitiateMultipartUploadRequest *initReq = [[S3InitiateMultipartUploadRequest alloc] initWithKey:key inBucket:bucket];
        S3MultipartUpload *upload = [s3 initiateMultipartUpload:initReq].multipartUpload;
        S3CompleteMultipartUploadRequest *compReq = [[S3CompleteMultipartUploadRequest alloc] initWithMultipartUpload:upload];

        int numberOfParts = [self countParts:dataToUpload];

        for ( int part = 0; part < numberOfParts; part++ ) {
            NSLog(@"%d", part);

            NSData *dataForPart = [self getPart:part fromData:dataToUpload];

            // The S3UploadInputStream was deprecated after the release of iOS6.
            NSInputStream *stream = [NSInputStream inputStreamWithData:dataForPart];

            S3UploadPartRequest *upReq = [[S3UploadPartRequest alloc] initWithMultipartUpload:upload];
            upReq.partNumber = ( part + 1 );
            upReq.contentLength = [dataForPart length];
            upReq.stream = stream;
            upReq.delegate = self;

            S3UploadPartResponse *response = [s3 uploadPart:upReq]; // <----- null returned here :(
            [compReq addPartWithPartNumber:( part + 1 ) withETag:response.etag];
        }

        [s3 completeMultipartUpload:compReq];
    }
    @catch ( AmazonServiceException *exception ) {
        NSLog( @"Multipart Upload Failed, Reason: %@", exception  );
    }
    @catch (NSException *exception) {
        NSLog( @"Other exception %@", exception);
    }
} 
```

问题是 uploadPart 方法返回 null 而不是实际的服务器响应，这会导致下一行出现异常。

我已经实现了所有的委托方法来检查错误，但没有任何报告。

代码从这里复制： http: [//aws.amazon.com/articles/0006282245644577](http://aws.amazon.com/articles/0006282245644577)

任何想法为什么它不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T03:54:50.037

该`uploadPart`方法返回`nil`，因为您设置`delegate`了对象的属性`S3UploadPartRequest`。您需要`response.etag`在`request:didCompleteWithResponse:`委托方法中检索，或者在没有委托的情况下使用同步调用。AWS 开发人员博客解释了如何正确使用：http `AmazonServiceRequestDelegate`: [//mobile.awsblog.com/post/Tx2XVU3IRV1HBOJ/Using-the-AWS-SDK-for-iOS-Asynchronously-Part-I-Sync-vs-Async](http://mobile.awsblog.com/post/Tx2XVU3IRV1HBOJ/Using-the-AWS-SDK-for-iOS-Asynchronously-Part-I-Sync-vs-Async)

# mysql - mysql日期/时间计算

> ID：14249292
> 
> 赞同：1
> 
> 时间：2013-01-10T01:13:20.483
> 
> 标签：mysql, date, datetime, time

我有以下数据库结构：

mysql> 从调度程序中选择 *；

> ```
>  +----+-------------------+-----------+-----------+-----------+---------+----------+
>    | id | name              | daystart  | hourstart | dayend    | hourend | tariff   |
>    +----+-------------------+-----------+-----------+-----------+---------+----------+
>    |  6 | Monday morning    | Monday    | 00:00     | Monday    | 06:00   | economic |
>    |  8 | Monday night      | Monday    | 22:00     | Monday    | 00:00   | economic |
>    | 10 | Tuesday morning   | Tuesday   | 00:00     | Tuesday   | 06:00   | economic |
>    | 12 | Tuesday night     | Tuesday   | 22:00     | Tuesday   | 00:00   | economic |
>    | 14 | Wednesday morning | Wednesday | 00:00     | Wednesday | 06:00   | economic |
>    | 16 | Wednesday night   | Wednesday | 22:00     | Wednesday | 00:00   | economic |
>    | 18 | Thursday morning  | Thursday  | 00:00     | Thursday  | 06:00   | economic |
>    | 20 | Thursday night    | Thursday  | 22:00     | Thursday  | 00:00   | economic |
>    | 22 | Friday morning    | Friday    | 00:00     | Friday    | 06:00   | economic |
>    | 24 | Friday night      | Friday    | 22:00     | Friday    | 00:00   | economic |
>    | 26 | Saturday          | Saturday  | 00:00     | Saturday  | 00:00   | economic | 
>    | 28 | Saturday          | Sunday    | 00:00     | Sunday    | 00:00   | economic |
>    | 30 | Monday regular    | Monday    | 06:00     | Monday    | 22:00   | regular  |
>    | 32 | Tuesday regular   | Tuesday   | 06:00     | Tuesday   | 22:00   | regular  |
>    | 34 | Wednesday regular | Wednesday | 06:00     | Wednesday | 22:00   | regular  |
>    | 36 | Thursday regular  | Thursday  | 06:00     | Thursday  | 22:00   | regular  |
>    | 38 | Friday regular    | Friday    | 06:00     | Friday    | 22:00   | regular  |
>    +----+-------------------+-----------+-----------+-----------+---------+----------+
> 
>    mysql> select * from rate_tariffs;
>    +----+----------+----------+-------+----------+
>    | id | name     | group_id | price | currency |
>    +----+----------+----------+-------+----------+
>    |  2 | economic |        1 | 15.30 | UTT      |
>    |  4 | economic |        3 | 23.40 | UTT      |
>    |  6 | economic |        5 | 29.70 | UTT      |
>    |  8 | regular  |        1 | 18.00 | UTT      |
>    | 10 | regular  |        3 | 27.00 | UTT      |
>    | 12 | regular  |        5 | 34.20 | UTT      |
>    | 14 | economic |        7 | 3.00  | UTT      |
>    | 16 | regular  |        7 | 4.00  | UTT      |
>    +----+----------+----------+-------+----------+ 
> ```

这是什么：它是一个调度程序，应该根据当前日期和时间选择要使用的资费。

我希望使用单个 MySQL 查询来获取此信息。

到目前为止，由于某种原因无法正常工作：

> ```
>  mysql> select scheduler.name, rate_tariffs.name, scheduler.id, rate_tariffs.id,
>    CURTIME(), ( EXTRACT(HOUR_MINUTE FROm CURTIME())  - REPLACE(hourstart,':',"")) as 
>    diff , daystart, hourstart,dayend,hourend from rate_tariffs inner join scheduler 
>    on rate_tariffs.name=tariff where daystart=DATE_FORMAT(CURDATE(),'%W') and 
>    dayend=DATE_FORMAT(CURDATE(),'%W') and (EXTRACT(HOUR_MINUTE FROm CURTIME()) - 
>    REPLACE(hourstart,':',"")) >0 and ( REPLACE(hourend,':','') - EXTRACT(HOUR_MINUTE 
>    FROM CURTIME())) >0 and group_id=1;
>    
>    +------------------+----------+----+----+-----------+------+----------+-----------+----------+---------+
>    | name             | name     | id | id | CURTIME() | diff | daystart | hourstart | dayend   | hourend |
>    +------------------+----------+----+----+-----------+------+----------+-----------+----------+---------+
>    | Thursday morning | economic | 18 |  2 | 01:01:44  |  101 | Thursday | 00:00     | Thursday | 06:00   |
>    +------------------+----------+----+----+-----------+------+----------+-----------+----------+---------+
>    1 row in set (0.00 sec)
>    
>    mysql> 
> ```

不幸的是，这并非一直有效。

例如，在星期三 23:45:23 时，它不工作。一小时后，相同的查询开始工作（显示星期四）。

关于如何使这项工作更好（实际上使它工作）的任何想法？您可以在单个 SQL 查询中执行此操作的任何其他方式吗？你会以其他方式做到这一点吗？

PS：表格信息如下：

> ```
>  INSERT INTO `scheduler` VALUES (6,'Monday morning','Monday','00:00','Monday','06:00','economic'),(8,'Monday night','Monday','22:00','Monday','00:00','economic'),(10,'Tuesday morning','Tuesday','00:00','Tuesday','06:00','economic'),(12,'Tuesday night','Tuesday','22:00','Tuesday','00:00','economic'),(14,'Wednesday morning','Wednesday','00:00','Wednesday','06:00','economic'),(16,'Wednesday night','Wednesday','22:00','Wednesday','00:00','economic'),(18,'Thursday morning','Thursday','00:00','Thursday','06:00','economic'),(20,'Thursday night','Thursday','22:00','Thursday','00:00','economic'),(22,'Friday morning','Friday','00:00','Friday','06:00','economic'),(24,'Friday night','Friday','22:00','Friday','00:00','economic'),(26,'Saturday','Saturday','00:00','Saturday','00:00','economic'),(28,'Saturday','Sunday','00:00','Sunday','00:00','economic'),(30,'Monday regular','Monday','06:00','Monday','22:00','regular'),(32,'Tuesday regular','Tuesday','06:00','Tuesday','22:00','regular'),(34,'Wednesday regular','Wednesday','06:00','Wednesday','22:00','regular'),(36,'Thursday regular','Thursday','06:00','Thursday','22:00','regular'),(38,'Friday regular','Friday','06:00','Friday','22:00','regular');
> 
>    INSERT INTO `rate_tariffs` VALUES (2,'economic',1,'15.30','UTT'),(4,'economic',3,'23.40','UTT'),(6,'economic',5,'29.70','UTT'),(8,'regular',1,'18.00','UTT'),(10,'regular',3,'27.00','UTT'),(12,'regular',5,'34.20','UTT'),(14,'economic',7,'3.00','UTT'),(16,'regular',7,'4.00','UTT');
> 
>   CREATE TABLE `scheduler` (
>    `id` int(3) NOT NULL AUTO_INCREMENT,
>    `name` varchar(30) DEFAULT NULL,
>    `daystart` varchar(15) DEFAULT NULL,
>    `hourstart` varchar(6) DEFAULT NULL,
>    `dayend` varchar(15) DEFAULT NULL,
>    `hourend` varchar(6) DEFAULT NULL,
>    `tariff` varchar(16) DEFAULT NULL,
>    PRIMARY KEY (`id`)
>    ) ENGINE=InnoDB AUTO_INCREMENT=39 DEFAULT CHARSET=latin1;
> 
>    CREATE TABLE `rate_tariffs` (
>      `id` int(3) NOT NULL AUTO_INCREMENT,
>      `name` varchar(25) DEFAULT NULL,
>      `group_id` int(3) DEFAULT NULL,
>      `price` varchar(10) DEFAULT NULL,
>      `currency` varchar(10) DEFAULT NULL,
>      PRIMARY KEY (`id`)
>    ) ENGINE=InnoDB AUTO_INCREMENT=17 DEFAULT CHARSET=latin1 
> ```

谢谢，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:02:29.890

几点意见和建议。这将使它工作。

在 MySQL 中使用本机类型会更容易，尤其是日期和时间。所以我建议将开始/结束时间更改为`time`字段。像这样：

```
ALTER TABLE `scheduler` CHANGE `hourstart` `hourstart` TIME NULL DEFAULT NULL;
ALTER TABLE `scheduler` CHANGE `hourend` `hourend` TIME NULL DEFAULT NULL; 
```

接下来，调度程序说时间从星期四晚上 10 点开始（例如），到星期四上午 12 点结束。12am是早上，所以结束时间早于开始时间！所以我们需要把结束时间改成大于开始时间`(23:59:59)`。开始和结束时间也重叠一秒钟。让我们通过将结束时间减少 1 秒来使每个部分整齐地连接（但不重叠）。将任何无效时间设置为午夜前 1 秒。像这样：

```
UPDATE `scheduler` SET
hourend = SUBTIME(hourend, '00:00:01');

UPDATE `scheduler` SET
hourend = '23:59:59'
WHERE hourend < '00:00:00'; 
```

接下来，我们将调整 SQL 查询以使用我们的原生 MySQL 时间字段。唯一需要更改的是`WHERE`底部的两个语句。我们希望它检查小时是否在开始和结束之间：

```
SELECT scheduler.name, rate_tariffs.name, scheduler.id, rate_tariffs.id, CURTIME(), ( EXTRACT(HOUR_MINUTE FROm CURTIME())  - REPLACE(hourstart,':',"")) as diff , daystart, hourstart,dayend,hourend from rate_tariffs
INNER JOIN scheduler on rate_tariffs.name=tariff
WHERE daystart = DATE_FORMAT(CURDATE(),'%W')
    AND dayend = DATE_FORMAT(CURDATE(),'%W')
    AND CURTIME() >= hourstart
    AND CURTIME() <= hourend
    AND group_id = 1; 
```

# javascript - Javascript 或 jQuery 中脚本或插件的生命周期

> ID：14249293
> 
> 赞同：4
> 
> 时间：2013-01-10T01:13:24.287
> 
> 标签：javascript, jquery, html, lifecycle

我几乎是网络开发的新手，我正面临着 Javascript/jQuery。我想了解如何在 html 页面中执行脚本。我是一名 C/Java 程序员，对这些语言的引用可以帮助我。我知道如果我们想在页面加载后执行脚本，可以在标题或正文末尾插入脚本。我知道一个函数可以被一个 DOM 事件调用（我将事件与中断信号相关联）。我想知道的是如果这样的脚本：

```
<script type="text/javascript">
//<![CDATA[
var i=10;
if (i<5)
  {
  // some code
  }
//]]>
</script> 
```

在 body 或 head 元素中只执行一次或连续执行。jQuery 的行为方式是否与 Javascript 相同？插件呢？它们是在页面显示的所有时间内都存在（如并行线程）还是事件驱动（通过单击/调整大小等或使用计时器来调用它们）？我知道这是一个非常普遍的问题，可能无法用几行来解释，但非常感谢一些基本解释和一些文档的链接。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T01:24:05.277

jQuery 只是一个用 JavaScript 编写的库，主要简化 DOM 操作和处理 AJAX 请求。如果您想了解 JS 的工作原理，请暂时忘记 jQuery。

关于脚本执行：浏览器解析 HTML 并从中创建一个 DOM。当浏览器遇到`<script>`标签及其内容时，它会为其创建一个 DOM 元素，将其添加到树中并执行代码。然后它继续解析下一个标签，这意味着代码只执行一次。
在解析期间执行脚本的原因是脚本已经可以立即操作 HTML（使用，例如`document.write`（虽然不是很好的做法）），因此会更改解析器必须解析的内容。可以使用[`defer`属性](http://www.w3.org/TR/html4/interact/scripts.html#adef-defer)推迟脚本执行，直到文档被完全解析（尽管直到现在我还没有经常在实时代码中看到该属性）。

所有`script`标签共享相同的范围，全局范围和执行环境一直存在，直到您离开或重新加载页面。因此，在一个脚本中定义一个变量并在另一个脚本中访问它是完全有效的，事实上，当您在页面中包含诸如 jQuery 之类的库时，您正在执行此操作。

```
<script>
    var foo = 'bar';
</script>
<!-- other HTML code -->
<script>
    alert(foo);
</script> 
```

* * *

您可能会发现关于[s的](http://www.w3.org/TR/html4/interact/scripts.html)[HTML 文档`script`](http://www.w3.org/TR/html4/interact/scripts.html)很有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T01:18:26.987

该脚本将自上而下执行一次，就像您在页面中加载的任何其他内容一样。但是，加载的一部分将是与 DOM（文档对象模型，或浏览器的网页内部表示）交互，包括注册事件处理程序等；之后的点击、AJAX 响应等事件可以触发 JS 函数。

如果您习惯于 Java UI 开发，那么您会熟悉回调和基于事件的编程；如果您习惯于程序编码，那么这将是一个学习曲线。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T01:20:22.280

上面的代码只会执行一次。

jQuery 是基于 javascript 的，当然，它的行为方式与 javascript 相同。jQuery 使 javascript 更容易，并且还处理特定于浏览器的问题。

如果像您的示例中那样编写 Javascript 代码，它将在运行时执行，但它也可能是事件驱动的。在您刷新浏览器页面之前，代码结果的生命周期将一直存在。如果您使用计时器，javascript 的生命周期也可能是连续的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T01:37:52.280

有些脚本只是创建函数和对象，以后可以被事件调用，有些脚本实际上是在页面加载时对 DOM 做一些事情，有些脚本只是注册监听器。

jQuery 和他们的插件只是创建对象/函数，稍后可以由事件处理程序调用。

# android - 特定的EditText Android

> ID：14249299
> 
> 赞同：5
> 
> 时间：2013-01-10T01:13:48.760
> 
> 标签：android, android-edittext

我是 Android 的新手，几乎没有任何与`EditText`视图有关的工作，但我仍然收到了一些`EditText`我必须使用的图像。

![使用 som EditText 收到的图像](../Images/61c35de86213b18c26969f51909e808e.png)

[我在官方 Android 开发者页面](http://developer.android.com/guide/topics/ui/dialogs.html)`EditText`的自定义对话框中看到了一些类似的内容（图 5） 。 如您所见，每个 EditText 中都有一些下划线。 首先我认为，带有这样的下划线，是默认视图。但是当我尝试制作这样的 EditText 组件时，我遇到了问题，默认没有任何下划线，它只是一个简单的矩形，里面没有任何图像......我试图让这个组件成为另一个背景（创建选择器 xml 文件） ，设置一些背景图片......没有任何效果。 请给我建议：如何制作带有下划线的 EditBox，以及上面的图像。 PS 我正在使用 10 API Level (2.3.3) 和支持库来处理片段。

`EditText``EditText`

`EditText`

PSS 抱歉，信息很少。我是 Stackoverflow 的新手，不能发布图片和超过 2 个超链接...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:45:04.933

使用更高的 API 级别，默认情况下您的 EditText 将看起来像这样（假设您正在使用它的主题。尝试使用 API 级别 4.0 (14) 或 4.0.3 (15) 加载您的应用程序并查看。

另外，请查看[**此**](http://androiddrawables.com/widget.html)[**站点**](http://androiddrawables.com/)（特别是小部件）。您可以了解使用了哪些图形和背景。您应该能够毫无困难地使用基本的造型技术下载和应用这些背景。[](http://androiddrawables.com/widget.html)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:47:33.003

我解决了我的问题！

正如[burmat](https://stackoverflow.com/a/14250053/104223)告诉我的那样，我创建了一些带有简单橙色下划线的九个补丁图像。然后我将我`EditText`的插入到相对布局中。然后插入我需要的图像。

结果正是我想要的！**

# c++ - boost asio ssl - 连接成功后尝试发送请求

> ID：14249302
> 
> 赞同：0
> 
> 时间：2013-01-10T01:14:02.663
> 
> 标签：c++, boost, ssl, boost-asio

我修改了 boost 中包含的客户端示例。如果我在 handle_handshake 方法中发送我的请求，一切都会按预期进行。

我想做的是连接到服务器，成功后发送一个请求或多个请求。如果我尝试在 handle_handshake 之后发送请求，我会在 handle_write 例程中收到错误消息 - 未初始化。

所有调用都是异步的，因此有效的路径是调用 connect handle_handshake 称为 handle_handshake 调用一个将消息写入服务器的方法

我所做的唯一改变是我不调用handle_handshake 中的“发送消息”例程。

我的应用程序的工作方式与聊天示例非常相似（只有一个 execption - 我的不工作）

使用下面的代码一切正常。

```
void handle_handshake(const boost::system::error_code& error)
{
 if (!error)
 {
  std::stringstream request_;

  request_ << "GET /api/0/data/ticker.php HTTP/1.1\r\n";
  request_ << "Host: mtgox.com\r\n";
  request_ << "Accept-Encoding: *\r\n";
  request_ << "\r\n";
  boost::asio::async_write(socket_,boost::asio::buffer(request_.str())
 ,boost::bind(&client::handle_write, this, boost::asio::placeholders::error,
  boost::asio::placeholders::bytes_transferred));
}
else
{
  std::cout << "Handshake failed: " << error.message() << "\n";
}
}
} 
```

我错过了什么吗？连接后，我需要能够向服务器发出多个请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:31:30.167

我错过了一些东西。我有 io_service.run 的 asyc_connect 调用。接下来我调用了 asyc_write，然后使用了 io_service.run()。我需要在第一次通话后添加 io_service.reset()

提升文档 io_service.reset

当由于 io_service 停止或用完而返回这些函数的先前调用时，必须在任何第二组或以后调用 run()、run_one()、poll() 或 poll_one() 函数之前调用此函数工作。此函数允许 io_service 重置任何内部状态，例如“停止”标志。

# iphone - 在 CGMutablePath 中绘制 UIImage

> ID：14249304
> 
> 赞同：2
> 
> 时间：2013-01-10T01:14:04.610
> 
> 标签：iphone, ios, objective-c, ipad

给定一个 CGMutablePathRef 我如何在其中绘制一个 UIImage ？我知道你可以像下面这样画它：

```
 UIImage* scaledImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        [scaledImage drawAtPoint:CGPointMake(0, 0)];
        CGContextRestoreGState(context); 
```

但我不确定我是否有路径（这是一个带圆角的矩形）如何在其中添加图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:19:37.573

当您说“在 CGMutablePath 内绘制”时，我不得不假设您的意思是“**剪辑到**CGMutablePath”。在这种情况下，您只需将路径添加到当前上下文（`CGContextAddPath()`或任何路径构建函数，如`CGContextAddLineToPoint()`），然后调用`CGContextClip()`. 然后，您可以使用`drawAtPoint:`或之类的内容在上下文中绘制图像`CGContextDrawImage()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:19:54.267

我认为您正在选择艰难的方式来做到这一点。

您的方法假定您已经获得了位图并创建了基于位图的图形上下文。在你的地方，我只会使用 UIImage 的：

```
- (void)drawAtPoint:(CGPoint)point; 
```

# c# - 使面板控件透明

> ID：14249305
> 
> 赞同：2
> 
> 时间：2013-01-10T01:14:06.387
> 
> 标签：c#, winforms, panel, opacity

我有一个面板控件，上面有一张背景图片。我希望它改变不透明度，我将鼠标移到它上面。我怎样才能做到这一点？我试过了：

```
 btnExit.BackColor = Color.FromArgb(20,63,63,63);
  btnExit.BackColor = Color.FromArgb(20); 
```

但没有任何改变..任何想法为什么这不起作用？该面板位于另一个面板上，该面板也有背景图片。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:56:34.577

据我所知，可以使用您的方法完成，但我想您必须刷新控件。

```
btnExit.Refresh(); 
```

编辑：

首先将您的按钮[FlatStyle 设置为 Flat](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/b480e4ef-2ec8-4579-9ca6-7aa5ed23e9f2)。

```
this.btnExit.FlatStyle = System.Windows.Forms.FlatStyle.Flat; 
```

然后制作两个函数，分别称为 btnExit_MouseHover 和 btnExit_MouseLeave：

```
void btnExit_MouseHover(object sender, EventArgs e)
{
  btnExit.BackColor = Color.FromArgb(20, 63, 63, 63);
  btnExit.Refresh();
}

void btnExit_MouseLeave(object sender, EventArgs e)
{
  btnExit.BackColor = Color.FromArgb(100, 63, 63, 63);
  btnExit.Refresh();
} 
```

要激活这些功能，请添加两个 EventHandler：

```
btnExit.MouseHover += new EventHandler(btnExit_MouseHover);
btnExit.MouseLeave += new EventHandler(btnExit_MouseLeave); 
```

这可以解决问题，现在您只需将背景颜色更改为您喜欢的颜色；）。

# dynamics-crm-2011 - 无法在对话框查询 CRM 数据步骤中修改查询变量

> ID：14249309
> 
> 赞同：0
> 
> 时间：2013-01-10T01:14:36.747
> 
> 标签：dynamics-crm-2011, dynamics-crm

我正在尝试查询拥有特定案例的团队的所有成员。这是我构建的查询的屏幕截图：

![查询生成器](../Images/5dc57c04c2cd4375810e3823cf26546b.png)

这可以正常工作并返回属于拥有名为“Mike Test”的案例的团队的用户。但是，当我切换到 Modify Query Variables 选项卡并尝试根据对话框运行的情况使“Mike Test”条目动态化时，我没有像往常那样让文本框替换硬编码值。

![修改查询变量](../Images/3d05e005c16954f9ea13ea922b3acbba.png)

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:28:19.810

事实证明，您只能修改要查询的实体上的字段的查询变量，而不能修改相关实体上的字段。

# linux - 即使指定了“--32”，gcc 汇编器似乎也使用 x86_64

> ID：14249311
> 
> 赞同：2
> 
> 时间：2013-01-10T01:14:54.037
> 
> 标签：linux, kernel

我正在 64 位 linux 主机上构建 32 位 linux 内核。（主机和目标上的版本 2.6.9）。我正在执行以下操作：

```
make ARCH=i386 CFLAGS='-m32 -Iinclude/asm/mach-default' ASFLAGS='-march=i386 --32' 
```

即使我为 make 指定了 ASFLAGS，我仍然收到以下警告和错误：

```
 AS      usr/initramfs_data.o
  LD      usr/built-in.o
ld: warning: i386:x86-64 architecture of input file `usr/initramfs_data.o' is incompatible with i386 output

<snip>
  AS      arch/i386/kernel/entry.o
arch/i386/kernel/entry.S: Assembler messages:
arch/i386/kernel/entry.S:145: Error: suffix or operands invalid for `pushf' 
```

entry.S:145 处的代码是：

```
 pushfl                  # We get a different stack layout with call
                         # gates, which has to be cleaned up later.. 
```

有什么想法可以确保 AS 使用的是 i386（32 位），而不是 x86_64？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:36:27.403

对 linux 内核 makefile 的粗略检查似乎向我表明您应该使用`AFLAGS`，而不是`ASFLAGS`。我的顶级内核 makefile 的第 647 行说：

```
# Add user supplied CPPFLAGS, AFLAGS and CFLAGS as the last assignments 
```

# winapi - LayeredWindows 和可变 alpha 半透明 - 使用画笔？

> ID：14249314
> 
> 赞同：0
> 
> 时间：2013-01-10T01:15:22.343
> 
> 标签：winapi, gdi+, alphablending, layered-windows

我有一个分层窗口（使用 SetLayeredWindowAttributes）。如果我将整个窗口的 alpha 设置为 128 并在其上绘制黑色矩形，它会按预期工作（黑色矩形以大约 50% 的不透明度显示）。

但是，如果我在整个窗口上设置 aplha（当我调用 SetLayeredWindowAttributes 为 255 时），然后用设置为 50% 的画笔绘制黑色矩形，它们黑色矩形是纯实心的，没有任何半透明性。

我的印象是，一旦我以这种方式创建了一个分层窗口，我就可以使用不同级别的每像素 Alpha 来绘制它，这样这两个窗口就会绘制两个不透明度级别：

```
User32.SetLayeredWindowAttributes(this.Handle, (uint) TransparentColorKey.ToArgb(), 255, User32.LWA_ALPHA | User32.LWA_COLORKEY);

e.Graphics.FillRectangle( new SolidBrush(Color.FromArgb(200, 40, 40, 40)), myRect);
e.Graphics.FillRectangle( new SolidBrush(Color.FromArgb( 25, 40, 40, 40)), myRect); 
```

但是这两个矩形都具有相同的不透明度（我希望一个为 200，一个为 25）。我只能控制整个窗口的不透明度（SetLayeredWindowAttributes 中的 255）。

我在这里缺少什么，以便我可以以不同的 alpha 半透明度绘制不同的元素，甚至只是矩形？

顺便说一句，我想要 SetLayeredWindowAttributes（而不是 UpdateLayeredWindow），因为我正在使用设备上下文进行主动绘图。后一种方法需要一次性绘制并提供位图。谢谢！戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:00:49.500

我不知道您从哪里得到 SetLayeredWindowAttributes 应该允许您将 alpha 数据直接绘制到您的窗口的想法。从 MSDN 文档看来，它似乎只允许恒定的 alpha 或颜色键控。获得每像素 alpha 的唯一方法是使用 UpdateLayeredWindow。

# android - 如何从 android 活动中打开 zip 文件？

> ID：14249316
> 
> 赞同：1
> 
> 时间：2013-01-10T01:15:46.047
> 
> 标签：android, android-intent

我正在尝试从我的应用程序中打开一个 zip 文件，但它不起作用

`Uri uri = Uri.parse("file:///mtn/sdcard/download/teste.zip"); Intent it = new Intent(Intent.ACTION_VIEW, uri); startActivity(it);`

我已经尝试过其他选项，例如：

```
File file = new File("mnt/sdcard/download/teste.zip");
            Intent it = new Intent();
            it.setAction(android.content.Intent.ACTION_VIEW);
            it.setDataAndType(Uri.fromFile(file), "application/zip");
                startActivity(it); 
```

但它也不起作用。

[编辑]

如果我已经在手机中安装了 winzip 应用程序，我的应用程序调用 winzip 应用程序并打开存档，但我真正需要的是在我的本机应用程序中打开它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:44:15.840

如果要从 zip 文件中读取，请使用[ZipFile 。](http://developer.android.com/reference/java/util/zip/ZipFile.html)Android API 对 ZIP 格式有很好的支持。

```
ZipFile z = new ZipFile("/mtn/sdcard/download/teste.zip"); 
```

# html - 使用 fabric.js 将一系列图像添加到画布

> ID：14249322
> 
> 赞同：-1
> 
> 时间：2013-01-10T01:16:26.913
> 
> 标签：html

我正在使用 AJAX 在画布上返回我想要的图像列表。现在我想循环该集合并将图像添加到我的画布，这不起作用。有人可以帮忙吗？以下是我的代码（在 html 头部分）

```
<script>
    $(document).ready(function () {
        $.ajax({
            type: "POST",
            url: "http://localhost:7466/DataService.asmx/GetPersons",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {

                var person;
                person = response;

           //     var canvas = document.getElementById('myCanvas');
                //   var context = canvas.getContext('2d');

                var canvas = new fabric.Canvas('mycanvas');

                var i;
                for (i = 0; i < person.d.length; i++) {
                    //alert(person.d[i].URL);
                    var image = new Image();
                    image.src = person.d[i].URL;

                    var PosX = person.d[i].PosX;
                    var PosY = person.d[i].PosY;

                    fabric.Image.fromURL(image.src, function (oImg) {
                        oImg.set('Left',PosX).set('top',PosY);
                        canvas.add(oImg);
                    });
                }
           }
        });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:04:37.710

您是否尝试添加？

```
canvas.renderAll(); 
```

或者，在实例化您的画布元素后设置以下内容？：

```
canvas.renderOnAddition = true; 
```

# c++ - 在 OSX 山狮上使用带有 Qt 5 的 libzip

> ID：14249327
> 
> 赞同：0
> 
> 时间：2013-01-10T01:17:32.717
> 
> 标签：c++, qt, zip, unzip

我正在尝试使用 libzip 制作一个简单的训练程序来列出存档的内容（现在的目标:)。我正在使用 libzip 源。

。轮廓：

```
QT += widgets

SOURCES += \
    main.cpp \
    myZip.cpp \

INCLUDEPATH = /path/to/libzip

HEADERS += \
    myZip.h \ 
```

MCZip.h

```
#include <QtWidgets>
#include "zip.h"

class myZip : public QDialog
{
public:
    myZip(const char* filePath);

private:
    QTextEdit *m_fileListView;
    QString m_fileList;

    QPushButton *m_closeButton;

}; 
```

myZip.cpp

```
#include "my.h"

myZip::myZip(const char* filePath)
{
    setFixedSize(400, 400);

    m_fileListView = new QTextEdit;
    m_closeButton = new QPushButton("Close");

    int err = 0;
    struct zip *f_zip=NULL;

    f_zip = zip_open(filePath, ZIP_CHECKCONS, &err);

    if(err != ZIP_ER_OK)
    {
        QMessageBox::critical(this, "Error", "Cannot open the file!");
        return;
    }

    if(f_zip == NULL)
    {
        QMessageBox::critical(this, "Error", "File not found");
        return;
    }

    int fileCount = zip_get_num_files(f_zip);
    if (fileCount ==-1)
    {
        QMessageBox::critical(this, "Error", "The archive seems corrupted");
        return;
    }

    qDebug() << QString("There are %1 files in the archive").arg(fileCount);

    for (int i = 0; i < fileCount; i++)
    {
        m_fileList += QString(QString::fromLocal8Bit(zip_get_name(f_zip, i, ZIP_FL_UNCHANGED)) + "\n");
    }

    zip_close(f_zip);
    f_zip = NULL;

    m_fileListView->setText(m_fileList);

    QHBoxLayout *layout = new QHBoxLayout;
    layout->addWidget(m_fileListView);
    layout->addWidget(m_closeButton);

    setLayout(layout);

    QObject::connect(m_closeButton, SIGNAL(clicked()), this, SLOT(close()));

} 
```

主文件

```
#include <QApplication>
#include "MCCover.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    QString filePath = QFileDialog::getOpenFileName(this, "Open a file", QString(),
                                             "Zip archive (*.zip)"); 

    QByteArray byteArray = filePath.toUtf8();
    const char* cFilePath = byteArray.constData();

    myZip *fileList = new myZip(cFilePath);
    fileList.show();

    return app.exec();
} 
```

问题是当我编译时，我收到以下消息：

```
symbol(s) not found for architecture x86_64
collect2: ld return exit status 
```

当我查看输出时

```
Undefined symbols for architecture x86_64:
        "_zip_close", referenced from:
              myZip::myZip(char const*)in myZip.o
              myZip::myZip(char const*)in myZip.o
        "_zip_get_name", referenced from:
              myZip::myZip(char const*)in myZip.o
              myZip::myZip(char const*)in myZip.o
        "_zip_get_num_files", referenced from:
              myZip::myZip(char const*)in myZip.o
              myZip::myZip(char const*)in myZip.o
        "_zip_open", referenced from:
              myZip::myZip(char const*)in myZip.o
              myZip::myZip(char const*)in myZip.o
 ld: symbol(s) not found for architecture x86_64
 collect2: ld returned 1 exit status 
```

关于如何解决问题的任何想法？我找不到任何解决方案...

有关如何使用 libzip [法语] 的信息，我遵循了本教程：http: [//slash.developpez.com/tutoriels/c/utilisation-libzip/](http://slash.developpez.com/tutoriels/c/utilisation-libzip/)

配置：带有 clang_64 编译器的 OSX Mountain Lion 上的 Qt 5.0.0（默认）

谢谢

死侍

PS：在修改代码时，使用 qt 4.8.1 和 gcc 都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:00:21.213

你有两个选择：

*   将 libzip 构建为静态库，然后将您的项目链接到此静态库
*   将 libzip 的源文件添加到您的项目中

# bash - 从 gnome-terminal 中获取 bash 退出命令

> ID：14249328
> 
> 赞同：4
> 
> 时间：2013-01-10T01:17:39.297
> 
> 标签：bash, exit-code, gnome-terminal

从 bash 开始，我想在新终端中启动一个新进程，等待它完成，然后恢复退出代码。

例如，我想做这样的事情，但实际上恢复了有用的退出代码；

```
gnome-terminal -e "bash -c \" sleep 2s ; if [ '1' == '1' ] ; then exit 2 ; else exit 3 ; fi \""
echo gnome terminal returns $?

#gnome terminal returns 0 
```

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T18:13:14.267

你有没有想过这个？我意识到这不是您正在寻找的答案，但它可以在紧要关头工作：

```
$ gnome-terminal -e 'bash -c "bash -c \"exit 5\"; echo $? > \$\?"'
$ cat '$?' 
5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T11:24:40.693

您可能不得不依靠 fifo 在两个 shell 之间进行通信，因为`gnome-terminal`它似乎不会传播退出状态。这增加了在读取 fifo 时阻塞调用 shell 的好处，直到结果代码被写入。

```
sh$ TMPDIR=$(mktemp -d)
sh$ F=$TMPDIR/fifo
sh$ mkfifo $F
sh$ gnome-terminal -e 'bash -c "bash -c \"exit 5\"; echo $? > '"$F"'"'
sh$ cat $F
5
sh$ rm -rf $TMPDIR 
```

# .net - XP 与 Windows 7 / 8 上的 DateTime.Parse 不同

> ID：14249331
> 
> 赞同：4
> 
> 时间：2013-01-10T01:17:59.533
> 
> 标签：.net, windows, parsing, date, datetime

在 XP 和 Windows 7 上执行以下操作会在 .NET4 和 .NET2 控制台应用程序中产生不同的结果：

```
Console.WriteLine(String.Format("DateTime.Parse on Client: {0}", 
   DateTime.Parse("1998-10-31T00:00:00-04:00"))); 
```

.NET4
**在 XP 下返回：** 10/31/1998 12:00:00 AM
**在 Windows 7/Windows 8 下返回：** 10/30/1998 11:00:00 PM

.NET2
**在 XP 下返回：** 10/31/1998 12:00:00 AM
**在 Windows 7/Windows 8 下返回：** 10/31/1998 12:00:00 AM

为什么？？！？

从字符串中删除 TimeZone（-04:00）会导致该值在 XP 和 Windows 7 下的 .NET4 上相同。从字符串执行 DateTime.Parse 时，Windows XP 似乎在 .NET4 下以不同的方式应用时区偏移。有没有办法改变这种行为，使其在 .NET4 下保持一致，不受操作系统的影响（不涉及操作发送到 DateTime.Parse 的字符串）

**环境：** 所有机器都安装了最新补丁（可通过 Windows 更新获得），并配置为东部时间，并在“时区设置”中选中“自动调整夏令时时钟”。

我已经在带有 .NET4 的 Windows 7 机器和带有 .NET4.5 的 Windows 7 机器上确认了这种行为

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T16:33:22.253

计算历史日期的本地时间需要 .NET 知道在该日期有效的夏令时规则。这当然是一件非常棘手的事情，因为 DST 规则因地区和日期而异。

您的日期的 UTC 偏移量为 -4，这使其接近美国东部时区。与 DST 规则最相关的变化是 2005 年能源政策法案，该法案将 DST 的有效期限从 3 月的第 2 个星期日延长到 11 月的第 1 个星期日，并于 2007 年生效。因此，了解 1998 年 10 月 31 日的当地时间需要知道该法律尚未生效。

这就是差异的来源。Windows Vista 是第一个拥有这些 DST 更改数据库的 Windows 版本，.NET 4 是第一个开始使用它的 .NET 版本。XP 没有那个数据库，所以 .NET 只能假设当前的 DST 规则有效。

这是您在使用本地时间时需要处理的不可避免的损失。不要，使用UTC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:59:41.190

一个`DateTime`值不能代表任何任意偏移量。它只跟踪一个`.Kind`属性，可以是`UTC`、`Local`或`Unspecified`。

当您将*没有*偏移量的字符串解析为 a`DateTime`时，类型将为`Unspecified`.

当您将*带有*偏移量的字符串解析为 a`DateTime`时，类型将是`Local`，然后时间将根据您提供的偏移量和从本地时区确定的偏移量进行*调整*。

因此`1998-10-31T00:00:00-04:00`首先转换为 UTC `1998-10-30T20:00:00-00:00`，然后应用本地计算机的偏移量（在您的情况下为东部夏令时间 -05:00），您将获得`1998-10-30T23:00:00-05:00`.

正如 Hans 在他的回答中解释的那样，.Net 2.0 和 Windows XP 都无法正确区分同一时区内的夏令时差异。因此，无论是哪个日期，您总是会在东部返回 -04:00。

避免所有这些废话的最好方法是改用`DateTimeOffset`类型。它将跟踪您最初给它的偏移量，您可以在必要时对其进行转换。它存在于带有 SP1 的 .Net 2.0 中，但在 .Net 3.5+（包括 4.0）下，您还可以使用`TimeZoneInfo`该类轻松操作它。

因此，将您的代码更改为`DateTimeOffset.Parse("1998-10-31T00:00:00-04:00")`，您将处于更好的状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T01:32:53.903

听起来一台机器在其环境设置中检查了夏令时，而另一台没有。

# javascript - 将 jquery 变量转换为 javascript 函数

> ID：14249334
> 
> 赞同：2
> 
> 时间：2013-01-10T01:18:39.747
> 
> 标签：javascript, jquery

我有以下 javascript 代码：

```
// timer code
    var count=120;
    var pars = 0;
    var counter=setInterval(timer, 1000); // will  run it every 1 second
    var redirect="index.php";

    function timer(){
      if (count <= 0){
         window.location = redirect;
      } else{
          if(pars == 1){

          } else {
            count=count-1;
          }
      }
      document.getElementById("timer").innerHTML=":" + count ;
    } 
```

它在 div#timer 中显示一个计时器，我需要它在某些链接单击时暂停，如下所示：

```
$(".quad").click(function(){
    pars = 1;
}); 
```

由于我是 javascript 新手，我认为这个问题是由全局和私有变量引起的。你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:28:24.300

你的代码对我有用。确保在加载文档后注册您的 .click 事件：

```
$(document).ready(
    $(".quad").click(function(){
        pars = 1;
    });
}); 
```

您还应该使用

```
window.location.href = redirect; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T01:30:39.520

[这里](http://jsfiddle.net/EfVtR/2)也运行正常。这假定了其他人引用的 onload 函数。

使用起来更好：

```
 if(pars != 1){
        count=count-1;
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T01:32:04.697

确保两个代码片段都在同一范围内工作。如果您的点击处理程序代码包含在`document.ready`回调中，请将计时器代码也移动到回调中。

# javascript - Firefox 不发布表单元素值

> ID：14249335
> 
> 赞同：1
> 
> 时间：2013-01-10T01:18:52.253
> 
> 标签：javascript, forms, firefox, coldfusion, submit

我有一个非常简单的表格（.cfm 页面）。我在我的 javascript 文件中通过 AJAX 提交表单。该表单在 IE、Safari 和 Chrome 中运行良好，但在 FF (v18.0) 中不起作用。

这是我的表格：

```
<form name="LoginForm">
<input class="newstext" type="text" name="userLogin" id="userLogin">
<input class="newstext" type="password" name="passLogin" id="passLogin">
<input type="button" name="login" value=" Login " onClick="validateLogin();">
</form> 
```

Javascript代码：

```
function validateLogin() {

    if (document.getElementById('userLogin').value == '') {
    alert('Please enter your username');
    document.getElementById('userLogin').style.backgroundColor='yellow';
    document.getElementById('userLogin').focus();
    return false;
} 

if (document.getElementById('passLogin').value == '') {
    alert('Please enter your password');
    document.getElementById('passLogin').style.backgroundColor='yellow';
    document.getElementById('passLogin').focus();
    return false;
} 

ColdFusion.Ajax.submitForm("LoginForm", "loginForm_action.cfm", submitLoginCallback, submitLoginerrorHandler);
return true; 
```

}

当我尝试登录时，没有传递表单元素值。因此，当它点击 cfc 时，cfc 会显示“元素 USERLOGIN 在 FORM 中未定义。
错误发生在第 9 行。” 有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:21:22.943

当您发布问题时，StackOverflow 是否邀请您查看[此问题](https://stackoverflow.com/questions/6967297/getelementsbyname-not-working)？

**编辑从这里开始**

如果你没有被邀请去看，你就没有。

得到 6 票的答案是，“`document.getElementsByName()`返回一个数组，所以你必须通过索引来访问它：（`document.getElementsByName('staff_counter')[0]`取决于你有多少）。

您还可以访问一个`length`属性来检查匹配了多少元素。”

鉴于您遇到了未定义的变量问题，这对我来说很有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T02:03:01.620

好的，伙计们，这就是我为解决此问题所做的工作。

似乎当 Firefox 处理表单时，由于我`<form>`的标签位于标签内而导致 HTML 格式`<table>`错误，并且相应的结束标签 ( `</form>`) 也在`<table>`标签内。在表格周围移动表单标签后，表单按预期工作。

感谢大家试图帮助我解决这个难以解决的问题，对于我最初的问题中的困惑，我深表歉意。

大卫

# ruby-on-rails - 使用 rspec 测试 Json 参数

> ID：14249337
> 
> 赞同：0
> 
> 时间：2013-01-10T01:19:21.667
> 
> 标签：ruby-on-rails, ruby, json, rspec

我是 rspec 的新手，想问一下如何测试以下内容。

我有一个导入 json 提要的方法，我的目标是根据某些条件解析和保存某些数据。

例如：

```
def self.import(json_feed)
  #save certain pieces of data
end 
```

我想知道模拟 json 提要的最佳方法是什么？我应该创建一个 json 对象并将其保存到一个变量中，然后将其传入吗？或者对于这样的事情有更好的约定。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:34:37.603

```
class Foo
  class << self
    attr_reader :imported_json
  end

  self.import(json_feed)
    @imported_json = json_feed
  end
end

describe Foo do
  specify 'self.import' do
     some_json = {some: :json}.to_json
     Foo.import some_json
     Foo.imported_json.should == some_json
  end
end 
```

# asp.net - 如何从时间线隐藏使用 Graph API 创建的事件

> ID：14249338
> 
> 赞同：4
> 
> 时间：2013-01-10T01:19:20.907
> 
> 标签：asp.net, facebook-graph-api

我正在使用图形 api 为页面创建许多事件，一次最多几百个。但是，每个事件都会在时间轴上创建一个我不想发生的帖子。

创建事件时有没有办法让它不显示在时间线上？如果没有，我怎样才能在时间轴上获得对帖子 ID 的引用？如果有帮助，我将记录每个事件的 id 作为添加。

提前感谢您的任何帮助！

吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T17:19:14.837

我尝试将 'no_feed_story' 参数设置为 1，但它似乎没有奏效（至少在沙盒模式下）。

我最终做的是进行另一个查询以获取页面提要以查找提到事件创建的帖子的 id，然后将其删除（为此需要 publish_stream 权限）

这是 php 中的一个示例（对不起，我不使用 asp.net）：

```
// .. curl was configured and the event created just before this.
$newEventId = $result['id'];

curl_setopt($ch, CURLOPT_URL, "https://graph.facebook.com/$page/feed?access_token=$accessToken");

curl_setopt($ch, CURLOPT_POST, false);

$received_content = curl_exec($ch);

$result = json_decode($received_content, true);

foreach ($result['data'] as $feed)
{
  if ($feed['link'] == "https://www.facebook.com/events/$newEventId/")
  {
    $postId = $feed['id'];
    break;
  }
}

if (isset($postId))
{
  curl_setopt($ch, CURLOPT_URL, "https://graph.facebook.com/$postId?access_token=$accessToken");

  curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'DELETE');

  $received_content = curl_exec($ch);

  $result = json_decode($received_content, true);

  var_dump($result);
} 
```

# phpunit - 无法使用 CodeCoverage 和 Composer 重新声明类错误

> ID：14249339
> 
> 赞同：3
> 
> 时间：2013-01-10T01:19:32.407
> 
> 标签：phpunit, code-coverage, autoload, composer-php

使用 Composer 的 autoload.php 作为引导文件时，我遇到了 PHPUnit Code_Coverage 错误。我已经创建了自己的 boostrap.php 文件，并且简单地单独包含每个文件，一切正常。我是否偶然发现了 Composer 错误，或者我在某处犯了错误？

// 编辑：我正在使用所有东西的最新（最新）版本：PHPUnit 3.7.12、Code_Coverage 1.2.7、Composer b51a4a7

```
Fatal error: Cannot redeclare class C3\CDN\EdgeCast in /Users/kperrine/Projects/edgecast-custom-reports/src/C3/CDN/EdgeCast.php on line 11

Call Stack:
    0.0017     641760   1\. {main}() /Applications/MAMP/bin/php/php5.3.14/bin/phpunit:0
    0.2232    1111312   2\. PHPUnit_TextUI_Command::main() /Applications/MAMP/bin/php/php5.3.14/bin/phpunit:46
    0.2232    1112040   3\. PHPUnit_TextUI_Command->run() /Applications/MAMP/bin/php/php5.3.14/lib/php/PHPUnit/TextUI/Command.php:129
    0.3027    4636952   4\. PHPUnit_TextUI_TestRunner->doRun() /Applications/MAMP/bin/php/php5.3.14/lib/php/PHPUnit/TextUI/Command.php:176
   21.5764    6604032   5\. PHP_CodeCoverage_Report_HTML->process() /Users/kperrine/Projects/edgecast-custom-reports/vendor/phpunit/phpunit/PHPUnit/TextUI/TestRunner.php:384
   21.5764    6604240   6\. PHP_CodeCoverage->getReport() /Users/kperrine/Projects/edgecast-custom-reports/vendor/phpunit/php-code-coverage/PHP/CodeCoverage/Report/HTML.php:120
   21.5768    6663512   7\. PHP_CodeCoverage_Report_Factory->create() /Users/kperrine/Projects/edgecast-custom-reports/vendor/phpunit/php-code-coverage/PHP/CodeCoverage.php:158
   21.5769    6663512   8\. PHP_CodeCoverage->getData() /Users/kperrine/Projects/edgecast-custom-reports/vendor/phpunit/php-code-coverage/PHP/CodeCoverage/Report/Factory.php:64
   21.5769    6663512   9\. PHP_CodeCoverage->addUncoveredFilesFromWhitelist() /Users/kperrine/Projects/edgecast-custom-reports/vendor/phpunit/php-code-coverage/PHP/CodeCoverage.php:190
   21.5769    6664408  10\. PHP_CodeCoverage->processUncoveredFileFromWhitelist() /Users/kperrine/Projects/edgecast-custom-reports/vendor/phpunit/php-code-coverage/PHP/CodeCoverage.php:535
   21.5778    6757272  11\. include_once('/Users/kperrine/Projects/edgecast-custom-reports/src/C3/CDN/EdgeCast.php') /Users/kperrine/Projects/edgecast-custom-reports/vendor/phpunit/php-code-coverage/PHP/CodeCoverage.php:558 
```

我的 phpunit.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit backupGlobals="false"
         backupStaticAttributes="false"
         bootstrap="vendor/autoload.php"
         colors="true"
         convertErrorsToExceptions="true"
         convertNoticesToExceptions="true"
         convertWarningsToExceptions="true"
         processIsolation="false"
         stopOnFailure="false"
         syntaxCheck="false"
>
    <testsuites>
        <testsuite name="C3 EdgeCast Tests">
            <directory>./tests/</directory>
        </testsuite>
    </testsuites>

    <filter>
        <whitelist processUncoveredFilesFromWhitelist="true">
            <directory suffix=".php">src</directory>
        </whitelist>
    </filter>

    <logging>
        <log type="coverage-html" target="log/report" charset="UTF-8"
            highlight="false" lowUpperBound="35" highLowerBound="70"/>
    </logging>
</phpunit> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T00:38:03.773

问题在于我在项目中使用命名空间。我的项目命名空间是`C3\CDN\EdgeCast`（注意 EdgeCast 中的大写“C”），但是当我在测试文件中使用命名空间时，我不小心输入`use C3\CDN\Edgecast;`了（注意 Edgecast 中的小写“c”）。名称的不同导致 CodeCoverage 或 Composer（我不知道究竟是哪个）认为该类没有被包含，因此试图再次包含它。

故事的寓意：*始终仔细检查您的类和命名空间名称。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:27:20.140

phpunit 是否也与项目中的 composer 一起安装？如果是这样，您可能希望删除引导程序，因为它已经通过调用 phpunit 包含在内。

我不确定“仅单独包含每个文件”是什么意思。你的意思是如果你不使用自动加载器但手动包含东西它可以工作吗？那会很奇怪。使用自动加载器通常可以正常工作。

如果所有其他方法都失败了，您是否可以尝试使用 composer.json 和几个使其在运行 phpunit 时失败的类创建一个简单的重现案例？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T15:10:25.203

包含是在`processUncoveredFileFromWhitelist="true"`PHPUnit 包含所有`src`没有覆盖信息的文件的处理步骤期间进行的。

我的猜测是里面的东西包括一些东西。已经自动加载的类也可能是一个问题（iirc 作曲家只使用`require`而不是`require_once`（尽管正确！）被再次包含。

到目前为止，在所有出现此错误的情况下，都是因为代码中的 if include/require 语句。如果不是这种情况，而且它是可能的，那么这是 phpunit 中某个地方的一个问题，但是一个非常奇怪的问题。

始终有效的是设置`processUncoveredFileFromWhitelist="false"`仍会列出所有文件但不包括它们。未发现文件的覆盖信息将略有不同。（然后可以巧妙地猜测可执行的行数，而不是从 xdebug 中获取）

# org-mode - 在组织模式下，我应该使用单个顶级标题还是多个？

> ID：14249344
> 
> 赞同：2
> 
> 时间：2013-01-10T01:19:47.523
> 
> 标签：org-mode

我很困惑为我的 .org 文件使用单个顶级标题还是多个文件更好。换句话说，我是只使用一个带有单个星号的标题，还是在同一个文件中使用多个？无论哪种方式我都遇到了问题，所以让我解释一下，以便可以更客观地回答这个问题。

如果我使用一个顶级标题，我可以按一次或两次 Tab 键将所有子树展开到我想要的级别。我真的很喜欢这个。

不幸的是，当我导出到 html 时，我的 #+TITLE 属性最终成为页面的 H1，我最终得到一个 h2 和 h3 或更小的负载。我宁愿用我的单个 H1 为页面设置顶级标题，而不是从一开始就使用这么多较小级别的标题。

此外，一种方法或另一种方法是否还有其他问题？由于我只使用了几个月的 Org 模式，我不想真正依赖一种或另一种方式，结果却陷入死胡同，不得不重新处理我所有的 .org 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T02:23:18.977

您似乎错过的是`org-shifttab`，必然会以`S-tab`您喜欢的方式使用一个主标题扩展整个文件，但它适用于许多标题。因此**，您可以拥有许多**.

两者都可以，真的，只是口味问题。我使用了一些，因为我认为没有理由不使用第一级（了解`S-tab`帮助），但我不介意将所有内容都转移一个级别。

`org-shiftmetaright`事实上，我怀疑使用正则表达式替换，或者手动使用and ，从一个更改到另一个甚至不会那么难`…left`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:52:13.820

您可以通过添加以下行（通常来自导出模板）来控制 org-mode 中标题的显示：

```
#+OPTIONS:     H:2 num:t 
```

值得尝试这些以按照您需要的方式获得输出。

如果您想要一些介绍性文字，请使用

```
#+TEXT:        Some descriptive text 
```

而不是标题。

# java - NIO阻塞写入不起作用

> ID：14249353
> 
> 赞同：2
> 
> 时间：2013-01-10T01:20:28.840
> 
> 标签：java, sockets, nio, nonblocking

我最近一直在编写带有非阻塞套接字的基于 Java NIO 的服务器，并且在写出数据时遇到了一些问题。我现在知道在某些情况下非阻塞写入无法写入 ByteBuffer 中的部分或全部字节。

我目前处理这种情况的方法是倒带或压缩缓冲区，然后尝试在下一次选择迭代中再次发送它。这无论如何都会导致显着的性能损失，我必须快速发送数据。

我曾尝试使用类似的东西：

```
ByteBuffer bb = ...;
SocketChannel sc = ...;
while(bb.remaining() > 0) { 
 sc.write(bb); 
} 
```

但问题在于它可能会写入 0 个字节并仍然退出 while 循环。我不知道为什么，但似乎 write() - 方法将达到 ByteBuffer 的限制，无论它是否实际发送了所有字节。

我在使用这种写入方法时遇到的另一个问题是，即使我没有尝试阻塞写入，它有时在重负载下也会导致缓冲区溢出异常。

我迫切需要一些关于如何正确执行阻塞写入以及什么条件可能导致 SocketChannel.write(ByteBuffer) 溢出缓​​冲区的建议（当达到限制时它不应该停止吗？）。

提前致谢。

编辑：我仍然没有找到 sc.write(bb) 将缓冲区中的位置设置为 bb.limit() 的原因，即使它写了 0 个字节。在写入尝试失败后，我唯一的办法仍然是倒带缓冲区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:13:07.653

当使用非阻塞 IO 时，通常是在低延迟或高吞吐量之后。

不要通过压缩来移动缓冲区内的数据，而是分配所需长度的缓冲区（通常适合一条消息，单独的消息头）。并在将内容完全写入套接字后处理它们。如果您不能接受 GC，您可以使用 2 倍增长大小的缓冲区池。

如果吞吐量是您主要关心的问题，那么不要尝试直接写入套接字，而是使用 Selector 注册套接字可写性，并在套接字可写时尝试写入。为此，您需要维护等待发送的缓冲区队列。保持注册套接字可写性，直到此队列为空。在这种情况下，您最好使用[分散/收集](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/GatheringByteChannel.html)类型的 IO，因为它可以最大限度地减少应用程序中的系统调用数量。

```
write requester thread:
  ioloop.submit(buffer[]{msgheaderbuf, msgbodybuf}, sock);
selector thread (ioloop):
  submit(buffer[] bufs, socket sock):
    queue.enqueue(bufs);
    selector.register(sock, WRITABLE);
    selector.wakeup(); 
```

如果延迟很重要，那么首先尝试直接写入套接字，并且只有在写入失败时才将数据排入队列并注册套接字可写性，如上所述。这将需要额外的互斥锁来保护套接字不被直接写入和从选择器线程内写入（作为可写事件触发的结果）。

```
write requester thread:
  ioloop.submit(buffer[]{msgheaderbuf, msgbodybuf}, sock);
selector thread (ioloop):
  submit(buffer[] bufs, socket sock):
    size = sock.write(bufs);
    while (!bufs.empty() && !bufs[0].remaining()): bufs.pop_front();
    if (bufs.empty()) return;

    queue.enqueue(bufs);
    selector.register(sock, WRITABLE);
    selector.wakeup(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-17T13:35:56.020

这与缓冲区的写入方式有关。**如果您在多线程并发**配置中写入缓冲区，则此问题非常常见。

如果你做类似的事情

```
ByteBuffer bb = HashMap.get(ByteBufferForXParameter); 
```

假设有一个 100 字节的源 ByteBuffer，线程 1 正在写入 bb（来自同一个源），线程 2 也在尝试写入另一个缓冲区 bb1（但来自同一个源缓冲区），它们可能与位置冲突，所以当 thread1遍历循环一次，它写入了 0 到 10 个字节。Thread2 开始写入它可能会从 10 到 20 字节写入，依此类推..

如果缓冲区大小很小，则线程 1 可能会在线程 2 开始写入之前写入整个缓冲区。因此，当它尝试写入时，它将 bb1.hasRemaining() 设为 false 并退出循环！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-10T07:43:08.810

当输出套接字缓冲区中没有空间时，write(bb) 返回 0。您必须等待该缓冲区空闲时。第一个想法是 make `Thread.sleep(little time)`，但这肯定比使用阻塞套接字更糟糕。

如果你不能使用阻塞套接字，那么你必须重构你的程序，使它由异步部分组成：一个方法只开始写入，然后当套接字输出缓冲区中有空闲空间并且可以写入更多数据时调用另一个方法，当你所有的缓冲区数据都发送完毕后，我们需要调用一个方法来写入另一个缓冲区等。

Java 提供了在可以写入（和读取）时获得通知的方法—— `java.nio.channels.Selector`（nio 1）和`asynchronous channels`（nio2，仅从 Java 7 开始可用）。异步编程很复杂，因为它还需要线程操作和同步，所以从头开始编写异步服务器不是初学者的任务。选择一个准备好的库开始。例子有：[Netty——](https://netty.io/)一个复杂的，有很多特性的；[df4j](https://github.com/rfqu/df4j) - 一个用于异步计算的库，以 nio1 和 nio2 的接口为例（由我开发）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-03-03T16:58:42.707

我们也面临同样的问题。在我们的例子中，看起来客户端很慢并且我们的缓冲区已满，而 SocketChannel.write 最终导致 EAGAIN。

接下来是因为上面提到的while循环，它进入忙等待，不断返回EAGAIN，并且作为一个副作用，给CPU增加了高负载。

Thread.sleep 是一个临时的解决方法，现在我们必须重构完整的代码来处理这种情况。

# python - python - 没有赋值的列表理解

> ID：14249355
> 
> 赞同：13
> 
> 时间：2013-01-10T01:20:42.990
> 
> 标签：python, list-comprehension

今天我正在使用 BeautifulSoup 解析一个包含 zip 文件路径列表的目录索引，并遇到了一件有趣的事情。假设我想获取`href`标签的所有属性并将它们直接放入队列中：

```
q = Queue.Queue()
[q.put(tag['href']) for tag in soup.findAll('a')] 
```

我以前从未遇到过这样的情况，即可以内联使用推导而不将其分配给任何东西，只是通过一些例行调用生成另一个迭代器。这被认为是不好的做法吗？它本身是“pythonic”吗？是否有更好的单行方式将所有项目放入队列中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-10T01:29:26.207

这已被多次询问，例如，[here](https://stackoverflow.com/questions/5766816/applying-a-method-with-no-return-value-to-each-element-of-a-list)和[here](https://stackoverflow.com/questions/1080026/is-there-a-map-without-result-in-python)。但这是一个有趣的问题。列表推导旨在用于其他用途。

其他选项包括

1.  使用`map()`- 与您的样品基本相同
2.  使用`filter()`- 如果你的函数返回 None，你将得到一个空列表
3.  只是一个普通的`for`循环

而普通循环是最好的方法。在这种情况下，在语义上是正确的，所有其他方式，包括列表理解，滥用概念的副作用。

在 Python 3.x 中，`map()`并且`filter()`是生成器，因此在迭代它们之前什么都不做。因此，我们需要例如 a `list(map(...))`，这会使情况变得更糟。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-10T01:50:44.420

关于这个线程有很多意见，我只能从我组织的编码约定中发言。

有很多方法可以影响循环，但列表推导的一个关键属性是它们*创建列表*，在迭代序列中每个项目都有一个。

```
>>> import Queue
>>> q = Queue.Queue()
>>> [q.put(item) for item in range(5)]
[None, None, None, None, None]
>>> 
```

这个未使用的列表显然是浪费的。因此，这种构造是一个未使用返回值的列表推导；禁止出现在我们的代码库中。像上面这样的显式循环，或者生成的与消耗它的东西相结合，例如：

```
>>> any(q.put(item) for item in xrange(5))
False
>>> 
```

要不就：

```
>>> for item in xrange(5):
...     q.put(item)
...
>>> 
```

需要通过审核。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-10T01:25:02.560

如果你认为它是一个对由 soup.findAll 返回的列表的循环，它看起来像这样：

```
for tag in soup.findAll('a'):
    q.put(tag['href']) 
```

这可能是更“pythonic”的形式，因为“显式优于隐式”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-10T01:26:38.180

可能不是更好的单线，但我（个人）会考虑这样做而不是：

```
for tag in soup.findAll('a'):
    q.put(tag['href']) 
```

是不好的做法。首先，一个班轮将生成一个充满 的列表`[None]`，这可能效率更低。其次，不清楚代码在做什么。看到列表理解通常意味着结果列表将以某种方式使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-20T18:24:31.343

您可以在最新版本的 Python 中按照[此处](https://stackoverflow.com/questions/1080026/is-there-a-map-without-result-in-python)推荐的方式使用 any()

```
q = Queue.Queue()
any(q.put(tag['href']) for tag in soup.findAll('a')) 
```

# git - 合并的更改不会在本地分支推送到远程存储库中更新

> ID：14249359
> 
> 赞同：2
> 
> 时间：2013-01-10T01:21:12.050
> 
> 标签：git, branch

我从“origin/develop”创建了一个名为“myBranch”的分支。我在 myBranch 上进行本地更改。同时，其他人正在对 origin/develop 进行更改，因此我会定期获取该分支并将其与 myBranch 合并（使用“git pull”）。当我添加并提交，然后使用“git push origin master”将更改推送到与我的本地分支同名的远程存储库时，我只看到我的本地更改。来自 origin/develop 的所有合并更改不会与我的本地更改一起推送。

另外，我怎么知道“主人”是什么？是我现在所在的分支吗？？我将 myBranch 推送到远程存储库的方式显然有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:34:43.857

master 只是另一个分支名称。所以你推错了。你应该

```
git push origin myBranch:develop 
```

约定是*本地参考名称*：*您要推送到的 repo 上的参考名称*。如果省略冒号和姓氏，则假定您指的是同名的远程分支。

如果您添加`-u`参数，这将设置跟踪以指向 myBranch 在服务器上开发，现在您可以

```
git push 
```

完成后查看配置，您将看到 git 是如何记录的：

```
cat .git/config 
```

但是..你真的应该在你自己的仓库上开发。您的工作流程将是

```
git fetch  # will grab all the branches from the remote
git checkout develop  # will make a local develop branch that points to origin/develop
# do some work, commit, etc
git pull origin develop # this will merge for you
git push -u origin devolop # to set tracking 
```

最后一个只需要运行一次，然后你就可以了`git push`。

还将git设置为默认情况下仅推送您当前的分支

```
git config --global push.default current 
```

否则，如果他们设置了跟踪，它将推送您在本地拥有的所有分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:38:42.623

我想通了。它是： git push origin HEAD

我认为我的“主人”指向一个本地分支，所以它从来没有更新远程存储库。

可以在.git/config文件中查看master、origin、head等的指针。

感谢所有的帮助！

# ios - ios 相机上的 720P 与 1080P 相机缓冲区

> ID：14249360
> 
> 赞同：0
> 
> 时间：2013-01-10T01:21:17.707
> 
> 标签：ios, avfoundation, avcapturedevice

一些 iOS 设备的摄像头能够达到 720P，而另一些则是 1080P。

保持屏幕尺寸固定，显然 1080P 将提供更好的画面，因为我们在相同的屏幕尺寸中安装了更多像素。

但是，如果我们想使用以下方法操作像素：

```
-(void) captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection 
```

并且为了争论，我们不会在任何地方渲染它们，而是对它们进行计算。

显然，缓冲区的高度和宽度会更大，但 1080P 相机是否捕获更多像素，因为可能是因为相机“视野”更宽，因此没有提高质量，或者 1080p 相机是否在相同的“视野”内工作720p 相机的视觉”，它只是每英寸捕获更多像素，因此即使我不将缓冲区输出到图像，我也应该期望帧缓冲区有更多“颗粒/细节”。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:31:47.537

它们具有相同的视野，唯一的区别是 1080 从同一区域捕获更多像素。这就是为什么帧更大的原因，如果你在哪里打印原始帧，你会看到 1080 图像比 720 大，但图像是相同的。所以当你在同一个窗口中显示这个时，1080 看起来更漂亮。但是，所需的内存较高且帧的获取速度较低，如果您启用了“丢弃延迟帧”选项，您可能还会注意到 1080 分辨率下的丢帧率更高。

根据您的计算速度，您可能不得不进一步降低它，例如，如果您在哪里执行重型 OpenCV 风格的图像处理，如果需要平滑度，则使用 1080 根本不可能。

顺便说一句，这不是 iOS 或 OpenGL 问题。它只是解决方案的工作方式。甚至电视广播的质量也遵循相同的原则。

# jquery - 如何使用 Javascript 动态更改缩放级别？

> ID：14249364
> 
> 赞同：4
> 
> 时间：2013-01-10T01:22:19.850
> 
> 标签：jquery, viewport, pinchzoom

我试图弄清楚如何在 ios 的网页中重置缩放级别。似乎当用户进行缩放放大/缩小时，缩放功能不再起作用。我想要捏手势，但想以编程方式重置缩放。有人对使用 Javascript/jQuery 动态更改缩放有想法吗？

```
 <meta id="viewportMeta" name="viewport" content="user-scalable=1, initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5" /> 

$(文档).ready(函数 () {
      $("#zoomOut").click(function(){
            $('meta[name=viewport]').attr('content', 'initial-scale=0.5; maximum-scale1; user-scalable=1;');
        });

      $("#zoomIn").click(function(){
             $('meta[name=viewport]').attr('content', 'initial-scale=1; maximum-scale=1.0; user-scalable=1;');
        });
});

```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-10T02:32:03.627

- - - 更新 - - -

这在 iOS7 中不再是问题。Scott Jehl 在 github [scottjehl/iOS-Orientationchange-Fix](https://github.com/scottjehl/iOS-Orientationchange-Fix)上有更好的修复，适用于 iOS6。

------ 原始答案 ------

从这些中得到答案：

*   [从纵向旋转到横向时，iPad 布局会放大](https://stackoverflow.com/questions/5434656/ipad-layout-scales-up-when-rotating-from-portrait-to-landscape)
*   [如何在 iPhone 上更改方向时重置 Web 应用程序的比例/缩放？](https://stackoverflow.com/questions/2557801/how-do-i-reset-the-scale-zoom-of-a-web-app-on-an-orientation-change-on-the-iphon)

* * *

Jeremy Keith ( [@adactio](http://twitter.com/adactio) ) 在他的博客[Orientation and scale上有一个很好的解决方案](http://adactio.com/journal/4470/)

通过不设置标记的最大比例来保持标记的可扩展性。

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

然后在加载时使用 javascript 禁用可扩展性，直到使用此脚本再次允许可扩展性时开始执行手势：

```
if (navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i)) {
    var viewportmeta = document.querySelector('meta[name="viewport"]');
    if (viewportmeta) {
        viewportmeta.content = 'width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0';
        document.body.addEventListener('gesturestart', function () {
            viewportmeta.content = 'width=device-width, minimum-scale=0.25, maximum-scale=1.6';
        }, false);
    }
} 
```

# android - 游戏板的最佳图形类

> ID：14249365
> 
> 赞同：-1
> 
> 时间：2013-01-10T01:22:33.320
> 
> 标签：android, graphics

我正在创建我的第一个 Android 游戏，我想知道哪个类最适合创建游戏边框。

我的游戏很简单。我想制作一个具有例如 10 个字段的边框。如果我按下一个按钮（按钮独立于板），我想更改一个选定字段的颜色。

SurfaceView 是一个很好的解决方案，还是您可以提出更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:33:31.613

如果您不打算拥有大量元素、粒子效果、动画等（即简单的游戏），[画布](http://developer.android.com/reference/android/graphics/Canvas.html)可能是您最好的选择。

它很简单，相当快（对于简单的事情），并且在多个屏幕上都能很好地工作。

[您可以在此处](http://developer.android.com/guide/topics/graphics/2d-graphics.html)找到开发人员指南文章。

# python - 为什么 setup.py 显然成功安装了我的包但实际上未能安装依赖项？

> ID：14249367
> 
> 赞同：2
> 
> 时间：2013-01-10T01:22:49.357
> 
> 标签：python, pip, setuptools

下面是说明问题的终端会话：

```
$ pip install scrappy --user
Requirement already satisfied (use --upgrade to upgrade): scrappy in /home/louist/Documents/Python/Scrappy
Downloading/unpacking guessit (from scrappy)
  Downloading guessit-0.5.3.tar.gz (45Kb): 45Kb downloaded
  Running setup.py egg_info for package guessit

Downloading/unpacking tvdb-api (from scrappy)
  Downloading tvdb_api-1.8.2.tar.gz
  Running setup.py egg_info for package tvdb-api

Downloading/unpacking hachoir-metadata (from scrappy)
  Downloading hachoir-metadata-1.3.3.tar.gz (52Kb): 52Kb downloaded
  Running setup.py egg_info for package hachoir-metadata
    Warning: unable to recompile dialog.ui to dialog_ui.py using pyuic4
    (use command "-c egg_info --egg-base pip-egg-info --disable-qt" to disable this warning)

Downloading/unpacking hachoir-core (from scrappy)
  Downloading hachoir-core-1.3.3.tar.gz (91Kb): 91Kb downloaded
  Running setup.py egg_info for package hachoir-core

Downloading/unpacking hachoir-parser (from scrappy)
  Downloading hachoir-parser-1.3.4.tar.gz (359Kb): 359Kb downloaded
  Running setup.py egg_info for package hachoir-parser

    warning: no files found matching 'metadata_csv.py'
Installing collected packages: guessit, tvdb-api, hachoir-metadata, hachoir-core, hachoir-parser
  Running setup.py install for guessit

  Running setup.py install for tvdb-api

  Running setup.py install for hachoir-metadata
    Warning: unable to recompile dialog.ui to dialog_ui.py using pyuic4
    (use command "-c install --single-version-externally-managed --record /tmp/pip-3OxvBD-record/install-record.txt --install-headers /home/louist/.virtualenvs/test/include/site/python2.7 --user --disable-qt" to disable this warning)

    changing mode of build/scripts-2.7/hachoir-metadata from 664 to 775
    changing mode of build/scripts-2.7/hachoir-metadata-gtk from 664 to 775
    changing mode of build/scripts-2.7/hachoir-metadata-qt from 664 to 775
    deleting hachoir_metadata.egg-info/requires.txt

    changing mode of /home/louist/.local/bin/hachoir-metadata to 775
    changing mode of /home/louist/.local/bin/hachoir-metadata-gtk to 775
    changing mode of /home/louist/.local/bin/hachoir-metadata-qt to 775
  Running setup.py install for hachoir-core

  Running setup.py install for hachoir-parser
    deleting hachoir_parser.egg-info/requires.txt

    warning: no files found matching 'metadata_csv.py'
Successfully installed guessit tvdb-api hachoir-metadata hachoir-core hachoir-parser
Cleaning up...
(test)louist@ltpc:~/Documents/Python/Scrappy$ python
Python 2.7.3 (default, Sep 26 2012, 21:51:14) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import scrappy.core as scrappy
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "scrappy/core.py", line 10, in <module>
    import guessit
ImportError: No module named guessit 
```

简而言之，我做了以下事情：

1.  启动一个virtualenv`mkvirtualenv test`
2.  尝试安装我正在开发的软件包`pip install scrappy --user`
3.  启动 python 终端，然后尝试导入`scrappy.core`

这是我的 setup.py 文件：

```
#!/usr/bin/env python
from setuptools import setup

setup(
    name='Scrappy',
    version="0.2.7 alpha",
    author='Louis Thibault',
    author_email='louist87@gmail.com',
    packages=['scrappy'],
    include_package_data=True,
    install_requires=['guessit', 'tvdb_api', 'hachoir-metadata', 'hachoir-core', 'hachoir-parser'],
    url='https://github.com/louist87/scrappy',
    license='GPL 3.0',
    description='Rename video files based on information scraped from thetvdb.com',
    keywords=["TVDB", "thetvdb", "rename", "broadcatching", "media"],
    long_description=open('README.rst').read()
) 
```

关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T04:11:19.940

默认情况下，新的 virtualenv 不包括安装在它之外的包（没有`--system-site-packages`选项创建）。因此，您的`test`virtualenv 看不到安装到的软件包`~/.local`（由于`--user`选项）。

使用 --system-site-packages 选项创建 virtualenv，或者在激活的 virtualenv 中安装时不要使用 --user。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:08:41.430

我有一个类似的问题，这是一个发行版问题当我使用以下安装时 -

```
sudo apt-get install python-scrapy 
```

从命令行它工作。请确保在点击上述命令以获取当前版本之前更新您的存储库

# php - php select 获取一个变量，然后应用 if else 就可以了

> ID：14249368
> 
> 赞同：0
> 
> 时间：2013-01-10T01:22:52.133
> 
> 标签：php, mysql

我有一个正在开发的汽车租赁系统。当用户租车时，系统首先要检查可用汽车的数量是否大于0，如果是，则调整“AVAILABLE = AVAILABLE+1”（在MySQL跟踪汽车的表中），即意思是把车租给用户。另外，我正在尝试记录哪辆车去了哪个用户。所以我有另一个名为rentalrecords 的数据库表，它接收登录用户的用户名和租用汽车的ID 的值。现在，问题是，我的“IF-ELSE”部分没有按预期执行。

```
<div id="stylized" class="myform">
<form id="form" name="form" method="POST" action="renting.php" >
<h1>Rent a Car</h1>
<label>Car ID
<span class="small">eg. Enter 1 for Mer1</span>
</label>
<input type="text" name="ID" id="ID" />
<input type="submit" style="margin:30px 100px;" name="submit" value="Check-Out">
<div class="spacer"></div>

</form>
</div> 
```

现在，renting.php这个表单的动作如下：

```
<?php
session_start();
if(!session_is_registered(theUSERNAME)){
header("location:customer_login.php");
}

mysql_CONNECT("xx", "xx", "xx") OR DIE("Unable to connect");
mysql_SELECT_DB("xx") OR DIE("Unable to select database");
$ID = $_POST['ID'];
$result = mysql_query("SELECT AVAILABLE FROM car WHERE ID='$ID'");

if(mysql_fetch_array($result)>0)
{
$query="UPDATE car SET AVAILABLE=AVAILABLE-1 WHERE ID='$ID'";
mysql_query($query);
$query = "insert into rentalrecords (USERNAME,ID,RENTED_ON) values ('$_SESSION[theUSERNAME]','$_POST[ID]',CURDATE())";
$result = mysql_query($query);
header("location: list_Clogged.php");
}
else
{
echo "<script>alert('The car you chose is currently unavailable!'); location.href='rent.php';</script>"; 
}
?> 
```

即使我有 available=0，它仍然没有执行 else 部分，无论如何，它总是执行 IF 部分。ID 和 AVAILABLE 是我的名为“汽车”的 MySQL 表和出租记录表的属性，我只想插入这些值。我知道该脚本目前很容易被注入，但首先我想让事情正常工作！任何即时帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:27:41.813

您正在尝试计算资源...

```
if(mysql_fetch_array($result)>0) 
```

您需要获取结果，然后在这些结果中计算一个项目：

```
$res = mysql_fetch_assoc($result);

if($res[0]['AVAILABLE'] > 0) 
```

注意 $res[0] 表示结果的第一行。您还可以使用 mysql_fetch_row 获取单个结果。

请记住，根本不应该使用 mysql_ 函数。考虑切换到 mysqli 或 PDO。此外，您需要清理输入。你只是盲目的接受`$_POST['ID']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:25:40.860

mysql_fetch_array 函数并没有像你想象的那样做；它返回一个数组，而不是单个值。

# google-app-engine - 谷歌应用引擎评论并在 html 视图中检查开发环境

> ID：14249370
> 
> 赞同：3
> 
> 时间：2013-01-10T01:23:26.430
> 
> 标签：google-app-engine

我正在使用`*.html`Google App Engine 中的基本文件。

如何输入不会产生 html 评论的评论？例如[在 Rails](https://stackoverflow.com/questions/3095925/how-to-comment-code-in-rails-views)我会做`<%# comment %>`

另外，我如何检测它是一个开发环境（或检查 url 是否为 localhost），因此只触发某个 html 块？例如在 Rails 中我会这样做：

```
<% if Rails.env.development? %>
    <p>comment visible only in localhost!</p>
<% end %> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T01:25:55.350

至于评论，您可以使用与上面类似的语法：

```
{# some comment here #}
{{ variable }}
{% for some item in another_variable %}
    <p>{{ item }}</p>
{% endfor %} 
```

关于主机名部分，我不知道有任何内置模板可以处理这个问题。我建议在您的服务器端代码中进行此检查并将结果传递给模板。[这](https://stackoverflow.com/questions/1916579/in-python-how-can-i-test-if-im-in-google-app-engine-sdk)是一个应该完成您需要的问题/答案。从该答案中窃取代码，您可以在代码中定义一个变量，例如（使用 Python，因为我不确定您使用的是哪个运行时）：

```
dev_server = os.environ['SERVER_SOFTWARE'].startswith('Development') 
```

然后，您可以在模板中引用它（假设您将变量传递给模板`dev_server`），如下所示：

```
{% if dev_server %}
    <p>comment visible only in localhost!</p>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T04:29:30.620

如果您想在 App Engine 上使用 Java 编写条件代码，您可以将您的 html 编写为 JSP 文件。然后您可以使用条件块，并在最终输出中显示未显示的注释，例如，

```
 <%-- This comment will get removed by the JSP compiler --%>
  <!-- This is a regular html comment and will survive the JSP compiler untouched -->
  <p>Just some ordinary html in a JSP file here...</p>
  <h1>Hello StackOverflow!</h1>
<% if ( isSayGoodbye ) { %>
      <h3>Goodbye!</h3>
<% } %> 
```

至于测试您是否在 AppEngine 与开发环境中，请查看来自 Google 的这些 (Java) 文档：[https ://developers.google.com/appengine/docs/java/runtime#The_Environment](https://developers.google.com/appengine/docs/java/runtime#The_Environment)

```
if (SystemProperty.environment.value() ==
    SystemProperty.Environment.Value.Production) {
    // The app is running on App Engine...
} 
```

# testing - 学习 GEB 和 Spock

> ID：14249371
> 
> 赞同：9
> 
> 时间：2013-01-10T01:23:27.760
> 
> 标签：testing, groovy, automated-tests, spock, geb

我是一名尝试学习 GEB 和 Spock 的手动测试员。要学习这些，我是否必须具备 java 或 groovy 的先验知识？我一直在看GEB的书，有哪些先决条件、书籍或学习资源？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-10T01:54:10.577

我尝试编译一些必需品和一些“必备品”，当我拿起 Geb 时，我发现它们很有帮助。

1.  一些[时髦的魔法](https://learnxinyminutes.com/docs/groovy/)。本手册涵盖了学习 Groovy 所需的大部分内容，但出于显而易见的原因，如果您沉迷于该语言，则可能需要考虑[Groovy in Action](http://www.manning.com/koenig/)。虽然学习 Groovy 不需要 Java，但如果您来自 Java（闭包除外）或什至具有 Python 背景，您可能可以浏览本教程 15 分钟，并且您已经了解了）。

2.  一点硒。越多越好，但不要害怕，这一[页](http://seleniumhq.org/docs/03_webdriver.html)告诉你所有你需要知道的关于你通常会使用的 Selenium Webdriver 的信息。但要强调的是，越多越好。

3.  jQuery 选择器（每个人都说这很简单，但坦率地说，我每小时至少参考手册两次。我很笨，所以……）。如果您是 jQuery 新手，您可能希望从[基本选择器](http://api.jquery.com/category/selectors/basic-css-selectors/)开始，然后单击左侧导航菜单了解更多信息。请注意，并非所有 jQuery 选择器都适用于 Geb，但 Geb 教程的选择器部分并不是非常详尽且引人入胜。

4.  在我的测试用例结束时，我需要生成一个跨越多个测试用例的奇特报告，并且我在测试用例之间存在依赖关系。所以，我选择了[TestNG](http://testng.org/doc/index.html)而不是 Spock。坦白说，我没有给Spock太多机会。

5.  [PageObjects](https://github.com/SeleniumHQ/selenium/wiki/PageObjects)实际上不是 Geb 的先决条件，但 PageObjects 非常棒，以至于您永远不想在它之外考虑 Geb。PageObjects 是一个可爱的小模式，它表示您将 HTML 页面的结构包装到一个 Object 中，以便实际测试不必处理它。哈。得到你。让我用简单的英语说一下。

假设您有一个带有输入文本框的注册表单，其 id 为“nametext”。你将如何获得文本框的句柄？在 DOM 术语中，在 javascript 中，您只需执行

```
 document.getElementById("nametext") 
```

在 Selenium 中，你会做非常相似的事情

```
 driver.findElement(By.id("nametext")) 
```

所以，如果你想`Jason`在 Selenium 的文本框中填充，你会做一个

```
driver.findElement(By.id("nametext")).sendKeys("Jason"); 
```

如果您对所有输入字段都这样做，那么您的测试用例很快就会变得丑陋和可恶。取而代之的是，在 OO 术语中，您封装。您创建一个新类，说并将您的and`RegistrationPage`包装为：`findElement``sendKeys`

```
public class RegistrationPage{

    …

    public RegistrationPage fillRegistrationForm(String name, String email){

        driver.findElement(By.id("nametext")).sendKeys(name); 
        driver.findElement(By.id("emailtext")).sendKeys(email); 

    }

} 
```

从你的测试用例中，你会说

```
 RegistrationPage regPage=new RegistrationPage();
  regPage.fillRegistrationForm("Jason","jason@bourne.com"); 
```

*（更好的想法是将您的输入值包装到一个类中并将其传递给 fillRegistrationForm）*

事实上，Geb 以一种更好的方式利用 PageObjects - jQuery 选择器来拯救

```
class InputFormPage extends Page{

    …

    static content={
        name {$("input", id:"entry_0")}
        emailAddress {$("input", id:"entry_1")}
    }
 } 
```

在你的测试用例中，你会说

```
 name.value ("Jason")
 emailAddress.value ("jason@bourne.com") 
```

# compiler-construction - 编译/链接 GSL

> ID：14249373
> 
> 赞同：1
> 
> 时间：2013-01-10T01:23:47.197
> 
> 标签：compiler-construction, linker

对于使用 gsl 的程序，我有以下 Makefile：

```
CXX = g++
ARCH = -mtune=generic
COFLAGS = $(ARCH) -O3 -pipe -I./gsl
CXXFLAGS = -Wall $(COFLAGS)

PROGRAMS = myProgram
GSLFLAGS= -L./gsl/.libs -lgsl -L./gsl/cblas/.libs -lgslcblas -lm

all: $(PROGRAMS)
myProgram:  myProgram.cpp common.o 
    $(CXX) $(CXXFLAGS) $(GSLFLAGS) myProgram.cpp common.o -o myProgram
common.o: common.cpp common.h

common.o: common.h common.cpp 
    $(CXX) $(CXXFLAGS) $(BOOSTFLAGS) $(GSLFLAGS) -c common.cpp 
```

我在编译/链接期间得到以下输出：

```
g++: -lgsl: linker input file unused because linking not done 
```

知道有什么问题吗？

PS - 我知道 -c 标志参与其中，但删除它会导致其他问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T06:50:45.680

> 我在编译/链接期间得到以下输出

不，你没有。*您在编译*期间收到此警告，它*准确地*告诉您问题所在：您在命令行上传递`-lgsl`并`-c`一起传递，并且`-lgsl`在您*不*进行链接时被忽略（这是`-c`要求`g++`做的）。

现在，您的任何地方`Makefile`都没有单独`-c`的，因此您很可能没有剪切/粘贴整个`Makefile`，并且完全省略了与此处相关的详细信息。

**更新**：这是您不想要的行`$(GSLFLAGS)`：

```
 $(CXX) $(CXXFLAGS) $(BOOSTFLAGS) $(GSLFLAGS) -c common.cpp 
```

最后，这个链接行：

```
$(CXX) $(CXXFLAGS) $(GSLFLAGS) myProgram.cpp common.o -o myProgram 
```

错了：命令行上源/对象和库的顺序很[重要](http://webpages.charter.net/ppluzhnikov/linker.html)。正确的链接行应该是：

```
$(CXX) $(CXXFLAGS) myProgram.cpp common.o -o myProgram $(GSLFLAGS) 
```

# asp.net - 如何在 asp.net 中创建 PDF 文件

> ID：14249376
> 
> 赞同：0
> 
> 时间：2013-01-10T01:24:25.057
> 
> 标签：asp.net, pdf-generation, itextsharp

我第一次面对创建 pdf 文件。我遇到了 iTextSharp，但无法找到如何将 Listview 转换为 pdf 表格。创建自定义表格，需要很多时间，谁能告诉我如何将我的列表视图（我有一组 5-6 个结构复杂的列表视图）导出为 PDF，此外，我还想放图像。

这可以用 Crystal Report 完成吗，我使用的是 Visual web developer 2008 速成版。

谢谢。

# php - 如何在PHP中删除二维数组中的最后一个数组项

> ID：14249380
> 
> 赞同：3
> 
> 时间：2013-01-10T01:24:41.797
> 
> 标签：php

我有一个二维数组，并希望始终删除/取消设置下面代码示例中的最后一个数组项（在本例中为数组 [3]），然后再将其放入会话中。
我仍然是 php 的新手，并且尝试了以下但没有成功。
任何帮助将不胜感激。

```
if (is_array$shoppingCartContents)) {  
   foreach($shoppingCartContents as $k=>$v) {
      if($v[1] === 999999) {
         unset($shoppingCartContents[$k]);
      }
   }
}

$shoppingCartContents = Array
(
[0] => Array
    (
        [productId] => 27
        [productTitle] => Saffron, Dill & Mustard Mayonnaise 
        [price] => 6.50
        [quantity] => 3
    )

[1] => Array
    (
        [productId] => 28
        [productTitle] => Wasabi Mayonnaise 
        [price] => 6.50
        [quantity] => 3
    )

[2] => Array
    (
        [productId] => 29
        [productTitle] => Chilli Mayo
        [price] => 6.50
        [quantity] => 2
    )

[3] => Array
    (
        [productId] => 999999
        [productTitle] => Postage
        [price] => 8.50
        [quantity] => 1
    )
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T01:29:15.803

只需使用`array_pop()`

```
$last_array_element = array_pop($shoppingCartContents);
// $shoppingCartContents now has last item removed 
```

所以在你的代码中：

```
if (is_array($shoppingCartContents)) {  
    array_pop($shoppingCartContents); // you don't care about last items, so no need to keep it's value in memory
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:30:40.583

您的代码将失败，因为您使用字符串作为键，而不是数字，所以比较

`if($v[1] === 999999)`

永远不会匹配，应该检查`$v['productId']`.

对于您的用例，您可以只弹出最后一项，而不是遍历数组：

```
array_pop($shoppingCartContents); 
```

[array_pop](http://php.net/manual/en/function.array-pop.php)从数组中删除最后一项。它返回最后一项，但由于您不想保留最后一项，因此我们不保存返回值。

或者，如果您仍然想使用 unset，您可以[获取最后一个 key](https://stackoverflow.com/questions/2348205/how-to-get-last-key-in-an-array)，然后使用它取消设置。

最后，看起来你有一个真实的列表（即连续的数字索引），你可以用类似的东西逃脱`unset($shoppingCartContents[count($shoppingCartContents)-1])`;

话虽如此，array_pop 是要走的路。

# java - 将 ImageIcon 从类显示到 JSF 页面？

> ID：14249383
> 
> 赞同：1
> 
> 时间：2013-01-10T01:24:48.380
> 
> 标签：java, swing, jsp, jsf, imageicon

我正在学习 JSF 2.0 并且我有`ImageIcon`一个班级。我可以把这个展示`ImageIcon`给 JSF 页面吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T01:55:44.320

存在一些重大的概念性误解。

Java/JSF 在网络服务器上运行并生成 HTML。HTML 在 webbrowser 上运行，可以通过`<link>`,`<script>`和`<img>`元素中的（相对）URL 引用 CSS/JS/image 文件。`ImageIcon`是 Swing 的一部分，与这一切无关。

Swing 根本不生成任何 HTML。当您仍然尝试在由 HTTP 请求调用的 Java 类中“以 Swing 方式”运行它时，例如 JSF 支持 bean 类甚至是“普通的”servlet 类，那么它只会显示在屏幕上它连接到运行网络服务器的物理机器，而不是运行网络浏览器的物理机器（这正是运行 HTML 的地方）。

最终，您需要通过普通的 HTML 方式显示图标。也就是说，使用`<img>`元素，或者可能在具有 CSS`background-image`属性的块元素上。无论哪种方式，他们都必须指向一个返回图像的有效 URL（也就是说，当最终用户在浏览器的地址栏中输入该 URL 时，它应该看到完整的图像）。通常，这是通过将图像文件放置在公共 Web 内容中来实现的（您还存储 JSF (XHTML/JSP) 页面的地方。

在 JSF 中，您可以`<img>`使用组件生成 HTML 元素`<h:graphicImage>`。提供了以下 webcontent 文件夹结构

```
WebContent
 |-- META-INF
 |-- WEB-INF
 |-- resources
 |    `-- images
 |         `-- icon.png
 `-- index.xhtml 
```

和以下组件`index.xhtml`

```
<h:graphicImage name="images/icon.png" /> 
```

那么最终用户应该能够通过打开来看到所需的图像`index.xhtml`。

另一种方法是创建一个基于 Swing 的[小程序](http://docs.oracle.com/javase/tutorial/deployment/applet/index.html)或[webstart (JNLP)](http://docs.oracle.com/javase/tutorial/deployment/webstart/index.html)应用程序，将图像显示为`ImageIcon`并最终通过 HTML`<applet>`或`<object>`网页中的元素将其嵌入。但这很笨拙。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T01:27:59.650

除了将其呈现为服务器端的图像之外，我想说小程序将是`ImageIcon`进入网页的唯一另一种方法。

# java - Java:: 如何在超过 800 兆的文件无换行符中使用正则表达式

> ID：14249387
> 
> 赞同：0
> 
> 时间：2013-01-10T01:25:00.937
> 
> 标签：java, regex, string

如果我有超过 800 兆的数据，数据就是没有断线。我将使用正则表达式示例 Ex。

```
String.replaceAll("([a-z][a-z][.?!]+) ?([A-Z][a-z]+ )", "$1\r\n$2"); 
```

或其他。

请指导我如何在文件大小的情况下使用正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:36:45.120

只要你有足够的内存来加载内存中的数据，我就看不出为什么它不能完成。我认为如果它的 32 位系统 64 可以处理更大量的寻址并且那时它将使用它的 4gb ~ 限制，那么限制值将是架构。

您还需要将 java vm 设置为比默认的 vm max memory 设置大很多。例如

```
java -Xmx1g myprogram 
```

我仍然不会推荐它。没有办法可以先拆分文件。找到一个共同的界限。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:40:21.230

您绝对不想对这样的大小使用正则表达式。

如果您没有任何经典的 Unix 工具（sed、perl、awk）可以提供帮助，请查看 Guava 的[CharMatcher](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/CharMatcher.html)：以字节数组读取文件，将其转换为字符串，使用 CharMatcher 查找任何感兴趣的东西，如果是的话，写一个修改过的数组。

而且，当然，不要内联，而是在*另一个*文件中写入，如果您已成功执行转换，请重命名为原始文件。

例如，对于您的标点符号需求，您可以使用`CharMatcher.anyOf("?!.")`.

# python - 使用 getattr throwing 访问的绑定 Python 方法：“不接受任何参数（给定 1 个）”

> ID：14249390
> 
> 赞同：1
> 
> 时间：2013-01-10T01:25:12.800
> 
> 标签：python, class, getattr

在我无法理解的绑定方法、继承和 getattr 之间的交互中发生了一些相当奇怪的事情。

我有一个目录设置，如：

```
/a
__init__.py
start_module.py
  /b
  __init__.py
  imported_module.py 
```

import_module.py 包含许多类对象，其中一个是这种形式：

```
class Foo(some_parent_class):
    def bar(self):
       return [1,2,3] 
```

start_module.py 中的一个函数使用inspect 来获取表示imported_module.py 中的类的字符串列表。“Foo”是这些字符串中的第一个。目标是使用该字符串和 getattr.* 在 start_module.py 中运行 bar

为此，我使用以下形式的 start_module 代码：

```
for class_name in class_name_list:
  instance = getattr(b.imported_module, class_name)()
  function = getattr(instance, "bar")
  for doodad in [x for x in function()]:
     print doodad 
```

它确实成功地开始迭代列表理解，但是在第一个字符串“bar”上，我得到了一个奇怪的错误。尽管 bar 是一个绑定方法，据我所知，期望 Foo 的实例作为参数，我被告知：

TypeError: bar() 不接受任何参数（给定 1 个）

这使得我对 function() 的调用似乎传递了 Foo 实例，但代码并不期望接收它。

我真的不知道这里发生了什么，也无法通过查看 Google 和 Stack Overflow 来解析出一个解释。双重 getattr 是否会导致一些奇怪的交互？我对 Python 中的类对象的理解是否过于模糊？我很想听听你的想法。

*为了避免反模式，真正的最终目标是让 start_module.py 自动访问各种类的名称栏的所有方法，类似于 import_module.py 中的 Foo。我这样做是为了避免让我的继任者维护一个可能非常多的类似 Foo 的类的列表。

回答如下：我认为这里最大的收获是检查非常有用，如果您遇到的错误有共同的原因，请在继续寻找其他可能性之前绝对确保您已经排除了这种可能性。在这种情况下，我忽略了一个事实，即我正在查看的具有正确代码的模块可能不是由于最近对文件结构进行的编辑而被导入的模块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T01:34:49.107

由于您发布的示例代码是错误的，我猜您在某处有另一个带有 Foo 类的模块 - 可能`bar`是这样定义的

```
class Foo(object):
    def bar():   # <-- missing self parameter
        return [1,2,3] 
```

这确实给出了错误消息

```
>>> Foo().bar()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: bar() takes no arguments (1 given) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T01:28:28.440

类方法有一个`self`本质上是自动传递的参数。它只是您调用该方法的类实例。您不需要传递另一个参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T03:29:33.813

我无法重现您遇到的错误。这是我对一个简短的、自包含的可编译示例的尝试，从 Python shell 运行：

```
>>> class Foo(object):
    def bar(self):
        print("Foo.bar!")

>>> import __main__ as mod
>>> cls = getattr(mod, "Foo")
>>> inst = cls()
>>> func = getattr(inst, "bar")
>>> func()
Foo.bar! 
```

也许您可以尝试将您`inspect`的基础代码调整为像这样的示例，看看哪里出了问题。

# javascript - 使用 JS Regex 获取第一个值处理具有动态尾随值的字符串

> ID：14249393
> 
> 赞同：0
> 
> 时间：2013-01-10T01:25:21.217
> 
> 标签：javascript, jquery, regex

给定以下字符串变体：

```
var string = "groups/Da12312a"
var string = "groups/Da12312a/search"
var string = "groups/Da12312a/search/sam"
var string = "groups/3131"
var string = "groups/444/search"
var string = "groups/123asdadsZad/search/sam" 
```

我怎样才能只取回groups/后面的值并以第一个'/'结尾？

所需的输出：

```
Da12312a
Da12312a
Da12312a
3131
444
123asdadsZad 
```

使用 jQuery 还是 JavaScript？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T01:29:21.130

您可以使用该`split`方法。

```
string.split("/")[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T01:29:20.250

```
var output = string.split('/')[1]; 
```

[`String.split`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)参考。

这是一个[演示](http://jsfiddle.net/y65UG/1/)，其中包含您提供的示例和输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T01:31:14.373

我会使用一个简单的正则表达式。

```
var str = 'groups/foo';
var matches = /groups\/([^/]*)/.exec(str); 
```

**match**现在将包含一个数组，其中索引 0 是“groups/100”，索引 1 是“foo”。

```
["groups/foo", "foo"] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T01:34:51.430

如果你想要一个正则表达式，你可以使用以下内容：

```
/^[^\/]*?\/([^\/]*).*/ 
```

基本上，捕获的组会产生您想要的结果。

像这样使用：

```
"groups/Da12312a/search".match(/^[^\/]*?\/([^\/]*).*/)
["groups/Da12312a/search", "Da12312a"]

"groups/Da12312a".match(/^[^\/]*?\/([^\/]*).*/)
["groups/Da12312a", "Da12312a"]

"groups/3131".match(/^[^\/]*?\/([^\/]*).*/)
["groups/3131", "3131"] 
```

如您所见，在每种情况下，数组索引 [1] 都是您的结果。

希望有帮助。

# c# - 当 dll 文件必须位于特定应用程序目录中时，如何使用 VS 调试进程？

> ID：14249394
> 
> 赞同：0
> 
> 时间：2013-01-10T01:25:24.883
> 
> 标签：c#, java, visual-studio, debugging, visual-studio-2012

我想从 Visual Studio 2012 会话中调试 Java 进程。我的项目是 C# 和 C++。为了正常运行应用程序并测试我的代码，我有构建后事件将我的输出 dll 复制到 Java 应用程序的单独/特定文件夹中。

是否可以在不更改我的项目的目标构建目录的情况下将调试过程附加到 java 线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:30:30.330

在项目-> 属性-> 调试选项卡上选择“启动外部程序”。

您可能还需要调整“工作目录”和参数。选择您需要的调试器类型（如果自动检测无法按您需要的方式工作）。

# objective-c - 在没有循环导入的情况下引用视图的父级

> ID：14249395
> 
> 赞同：0
> 
> 时间：2013-01-10T01:25:38.610
> 
> 标签：objective-c

我有一个自定义 UIView 类，它需要了解它的父级（另一个不同的自定义 UIView 类）。

1.  父类必须导入子类的标题，因此它可以添加该类的子视图。
2.  子类必须导入父类的头文件，这样才能访问其方法和属性。它必须在其 .h 文件中而不是在其 .m 中进行导入，因为我需要将孩子的父级设为实例变量。
3.  如果我这样做，我会遇到循环导入问题。

如果有人能理解这一点，你能帮忙解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:36:15.687

您想要的通常称为前向声明。

有关更多信息，请参阅[Objective-C：前向类声明](https://stackoverflow.com/questions/5191487/objective-c-forward-class-declaration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:56:19.480

虽然您*可以*在子头文件中使用前向声明 ( `@class ParentClass`) 和对父 ( ) 的弱引用`@property (nonatomic, weak) ParentClass *parent`，但这通常**不是**一个好的编程习惯。

这通常不是一个好主意的原因：

1）随着项目变得越来越大，您可能会违反 DRY（“不要重复自己”），因为孩子需要某个类的父级......如果另一个父级稍后需要创建相同的子对象怎么办? 您必须创建一个新类，该类声明新父级的另一个前向类并对其具有弱属性。

2）这也可能导致意大利面条代码......如果您想向父母添加一个影响孩子正在使用的方法的新功能怎么办？您是否创建了一种新的但相似的方法，但略有不同（参见关于违反 DRY 的第 1 点）？您是否为原始方法创建输入（您还必须确保孩子现在知道此更改并传递适当的输入）。

相反，**委托**设计模式在这里效果更好。Apple 也经常在他们的图书馆中使用它。例如，`UITableView`声明一个委托和一个数据源，以便它可以将操作（单击单元格）和数据输入（创建自定义单元格）委托给其他拥有的类，而`UITableView`对象不必知道所述父类的实现。

有关一般**委托**模式的更多信息，请在此处查看 Wikipedia：

[http://en.wikipedia.org/wiki/Delegation_pattern](http://en.wikipedia.org/wiki/Delegation_pattern)

有关创建自己的教程`protocols`（如何在 iOS 中实现委托），请参阅此处的教程：

[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-custom-delegates/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-custom-delegates/)

有关一般 iOS 的高质量教程和介绍，包括委托和其他必要的 iOS 概念，请参见 Ray Wenderlich 的网站：

[http://www.raywenderlich.com/](http://www.raywenderlich.com/)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T01:34:23.767

有很多方法可以解决这个问题，例如，只需将对另一个类的引用声明为 id，并向其发送转发消息（在 Objective-C 中，您甚至不需要强制转换它们，编译器不会抱怨那个）。

例如：

```
@property(nonatomic,weak) id child; 
```

但是您可以通过使用处理这两个类的根控制器的方式来查看您的设计。这样，A 不直接与 B 对话，B 也不直接与 A 对话。相反，如果 A 想与 B 对话，则与 C 对话，C 与 B 对话，反之亦然。

# c++ - 类构造，但现在分配内存

> ID：14249404
> 
> 赞同：0
> 
> 时间：2013-01-10T01:27:06.943
> 
> 标签：c++

```
template <class _T1>
inline void constructInPlace(_T1 *_Ptr)
{
    new (static_cast<void*>(_Ptr)) _T1();
} 
```

我知道c++的新地方，我看不懂上面的语法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:30:01.070

这种语法称为[placement new](https://stackoverflow.com/questions/222557/what-uses-are-there-for-placement-new)。它允许您在您已经拥有的内存位置中构造对象。它不会为您分配内存。

在这种情况下，`T1`在 _Ptr 指向的内存位置中构造了一个对象，因为`new`expects `void*`，它被丢弃了。无论如何，强制转换都会隐式发生，看起来显式强制转换是为了明确意图。

# composer-php - 使用替代路径满足 Composer 平台依赖性

> ID：14249414
> 
> 赞同：0
> 
> 时间：2013-01-10T01:27:47.390
> 
> 标签：composer-php

如何使用替代路径满足 Composer 平台包依赖项？`php >=5.4`我有一个依赖`php54`. 有什么方法可以让 Composer 意识到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T09:14:19.717

您可以通过 php54 可执行文件运行 composer。要么明确地调用它，`php54 composer.phar ...`但如果你全局安装了 composer，那会很痛苦。在这种情况下，您最好执行一个名为 composer 的 shell 脚本，该脚本将使用 php54 调用 phar 文件或为其注册一个 bash 别名。

# java - Java 多人游戏网络概念

> ID：14249418
> 
> 赞同：1
> 
> 时间：2013-01-10T01:28:01.097
> 
> 标签：java, client-server, multiplayer, game-development

我正在用Java（客户端和服务器）开发一个多人回合制策略游戏。我在网络游戏方面没有太多经验，但我做过一些小事情，比如多客户端聊天和带套接字的 2 玩家井字游戏。我不是在找人为我编写代码，只是给我一些指导。

游戏经历了多个阶段：首先，用户连接并登录。在他获得主持/加入游戏的选项之后。在他加入游戏或有人加入他的游戏后，客户进入游戏阶段。游戏是 1v1，只需要每 5 秒来回发送一次数据（如果这很重要？）。我只需要一些关于如何设计客户端/服务器以通过这些“阶段”的指导。

这就是我目前正在考虑实现它的方式：

1.  建立连接后，该连接将有一个相应的变量来描述服务器上的状态。例如：0 是登录前，1 是登录后，2 是托管，等等...

2.  每当客户端向服务器发送数据时，它都会检查状态并相应地处理它。就像在登录之前发送数据一样，服务器将假定它是登录详细信息，如果它们有效，它将变量更改为 1 并告诉客户端前进。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:43:13.943

因为是完整的 Java + 客户端-服务器 + 游戏：

我建议你忘记使用直插座。

在我看来， [Java RMI](http://docs.oracle.com/javase/tutorial/rmi/index.html)是你最好的选择。

为什么？：

*   一旦你学会了它，它比套接字更容易。

*   您可以直接从您的 java 客户端/服务器调用远程方法。

*   您可以使用回调。（即服务器测试客户端仍然连接）

可能还有更多的原因……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T04:59:09.793

基本上你如何描述它就是它通常是如何完成的。只需让服务器侦听客户端连接，然后在客户端连接出现时在其自己的线程中处理它们。然后来回发送消息以确认状态（登录与退出、加入游戏等）以及在游戏中为玩家移动的消息。TCP 或 UDP 套接字将在短期内工作，但最终您可能会切换到主要基于 UDP 的系统，因为服务器和客户端之间发送的消息将相当小，并且延迟可能是关键，具体取决于游戏类型。

考虑通过 JSON 发送/接收消息（http://wiki.fasterxml.com/JacksonHome 是我上次检查的一个相当流行的 Java 解析器）。

此外，您需要在服务器端使用多个数据结构来有效地管理客户端及其状态。例如，您可以为每个客户端设置一个整数 ID，并`Map<Integer, Client>`使用一个用于存储所有当前连接的登录用户的 ID，其中`Client`是一些存储该用户当前状态的对象。

希望这能给你一些关于从哪里开始的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-10T02:43:22.513

您可以使用 Mina 或 Netty 作为 Nio 套接字框架。在服务器和客户端中都使用 Java 可以更容易地设计消息协议。当一个客户端移动时，您向服务器发送移动消息，然后服务器将消息推送回两个客户端。两个客户端在收到消息时一起移动。因此，如果避免网络延迟，两个客户端会同步移动。你可以看看用java编写的开源游戏框架。

[java游戏服务器引擎](https://github.com/kingston-csj/jforgame)

# mysql - 优化使用临时表和大量连接的 MySQL 查询

> ID：14249424
> 
> 赞同：0
> 
> 时间：2013-01-10T01:28:34.517
> 
> 标签：mysql, sql, centos

我有以下查询：

```
SELECT id, title, organisation, logo, body, state, state_name, state_order, closing_date, end_date, state_abbr, GROUP_CONCAT(portfolio_id SEPARATOR ',') portfolios, organisation_type_id, featured, hide_apply_link, hide_company_title,description
                FROM(
                    SELECT * FROM(
                        SELECT 
                            j.id, 
                            j.title, 
                            CONCAT(o.name,IF(j.organisation_department = '','',CONCAT(' - ',j.organisation_department))) organisation,
                            o.id organisation_id, 
                            o.logo logo,
                            j.body body,
                            j.plain_body plain_body,
                            IF(d.is_state = 1, s.name,d.name) state, 
                            d.name state_name,
                            d.order state_order,
                            IF(j.hide_closing_date = 1, 'N/A', DATE_FORMAT(j.end_date,'%d %b')) closing_date,
                            j.end_date end_date, 
                            j.created newest, 
                            pjc.category_id category, 
                            d.state_id sid, 
                            s.name state_abbr, 
                            p.id postcode,
                            pj.port_id portfolio_id,
                            o.organisation_type_id,
                            j.featured,
                            j.hide_apply_link,
                            j.hide_company_title,
                            o.description
                        FROM
                            commstratjobs.portfolio_job_category pjc,
                            commstratjobs.organisation o,
                            commstratjobs.display_category d,
                            commstratjobs.section_job sj,
                            commstratjobs.state s,
                            commstratjobs.portfolio_job pj,
                            commstratjobs.job j
                        LEFT JOIN  commstratjobs.postcode p ON p.id = j.postcode_id
                        WHERE pjc.job_id = j.id AND  j.id = sj.job_id AND
                                    sj.section_id = d.id AND
                                    j.organisation_id = o.id AND
                                    s.id = d.state_id AND
                                    pj.job_id = j.id AND
                                    j.published = 1 AND
                                    DATE(j.start_date) <= CURRENT_DATE AND
                                    DATE(j.end_date) >= CURRENT_DATE

                                    ) all_jobs  WHERE state_abbr = 'ACT' GROUP BY id, portfolio_id) all_jobs_grp GROUP BY id ORDER BY featured DESC, end_date ASC; 
```

我为每个 id 和加入 id 设置了索引

问题是上述每个查询的时间都超过了 10 秒。

有没有办法在上面优化？

以下是`EXPLAIN`语句的输出：

```
*************************** 1\. row ***************************
           id: 1
  select_type: PRIMARY
        table: <derived2>
         type: ALL
possible_keys: NULL
          key: NULL
      key_len: NULL
          ref: NULL
         rows: 21
        Extra: Using temporary; Using filesort
*************************** 2\. row ***************************
           id: 2
  select_type: DERIVED
        table: <derived3>
         type: ALL
possible_keys: NULL
          key: NULL
      key_len: NULL
          ref: NULL
         rows: 2700
        Extra: Using where; Using temporary; Using filesort
*************************** 3\. row ***************************
           id: 3
  select_type: DERIVED
        table: pjc
         type: index
possible_keys: NULL
          key: PRIMARY
      key_len: 24
          ref: NULL
         rows: 181535
        Extra: Using index
*************************** 4\. row ***************************
           id: 3
  select_type: DERIVED
        table: j
         type: eq_ref
possible_keys: PRIMARY,organisation_id
          key: PRIMARY
      key_len: 8
          ref: commstratjobs.pjc.job_id
         rows: 1
        Extra: Using where
*************************** 5\. row ***************************
           id: 3
  select_type: DERIVED
        table: o
         type: eq_ref
possible_keys: PRIMARY
          key: PRIMARY
      key_len: 8
          ref: commstratjobs.j.organisation_id
         rows: 1
        Extra:
*************************** 6\. row ***************************
           id: 3
  select_type: DERIVED
        table: p
         type: eq_ref
possible_keys: PRIMARY
          key: PRIMARY
      key_len: 8
          ref: commstratjobs.j.postcode_id
         rows: 1
        Extra: Using index
*************************** 7\. row ***************************
           id: 3
  select_type: DERIVED
        table: pj
         type: ref
possible_keys: PRIMARY
          key: PRIMARY
      key_len: 8
          ref: commstratjobs.j.id
         rows: 1
        Extra: Using where; Using index
*************************** 8\. row ***************************
           id: 3
  select_type: DERIVED
        table: d
         type: ALL
possible_keys: PRIMARY
          key: NULL
      key_len: NULL
          ref: NULL
         rows: 10
        Extra: Using join buffer
*************************** 9\. row ***************************
           id: 3
  select_type: DERIVED
        table: s
         type: eq_ref
possible_keys: PRIMARY
          key: PRIMARY
      key_len: 1
          ref: commstratjobs.d.state_id
         rows: 1
        Extra:
*************************** 10\. row ***************************
           id: 3
  select_type: DERIVED
        table: sj
         type: eq_ref
possible_keys: PRIMARY
          key: PRIMARY
      key_len: 9
          ref: commstratjobs.pjc.job_id,commstratjobs.d.id
         rows: 1
        Extra: Using index
10 rows in set (1.05 sec) 
```

# sql - Amazon RDS 是否支持 SQL 事务日志？

> ID：14249426
> 
> 赞同：0
> 
> 时间：2013-01-10T01:28:52.053
> 
> 标签：sql, database, amazon-web-services, sql-server-2008-r2, rds

Amazon RDS (sql-server) 是否支持 sql 事务日志？如果是这样

如何通过 RDS 界面启用它？我怎样才能访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:48:51.667

如果您打开了自动快照，那么您可以通过 DB Snapshots Automated 下的 AWS RDS 界面查看它。您可以在设置数据库时选择进行自动备份。 [http://aws.amazon.com/rds/faqs/](http://aws.amazon.com/rds/faqs/)在自动备份和数据库快照下，它更多地讨论了这个过程。

我不知道的是如何在创建数据库后启用自动备份。

# c# - 事件触发两次

> ID：14249427
> 
> 赞同：1
> 
> 时间：2013-01-10T01:28:55.500
> 
> 标签：c#, events

我会尽力说明我的情况。

我正在使用 C# 开发一个软件，它允许多个用户同时编辑一个公共目录下的同一个文件，并查看其他人所做的更改。

因此，我使用 FileSystemWatcher 来监视文件中的更改（以更新其他人的更改）和文本框的 textchanged（以保存对文件的更改，以便其他人的屏幕也将被更新）。

如果我输入字符（两个事件都被触发一次），它就可以工作 如果我尝试删除任何形式的字符（退格、删除等）它就不起作用它不会删除任何字符，并且光标总是重置到位置 0。我使用 box.SelectionStart 移动光标，当我输入字符时它正在工作。

我放了一个计数器来检查，我发现当我尝试删除字符时，两个事件都被触发了两次。

我试图搜索，但我得到了不同的答案......

提前致谢

```
using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    using System.Windows;
    using System.Windows.Controls;`enter code here`
    using System.Windows.Data;
    using System.Windows.Documents;
    using System.Windows.Input;
    using System.Windows.Media;
    using System.Windows.Media.Imaging;
    using System.Windows.Navigation;
    using System.Windows.Shapes;
    using System.Windows.Forms;
    using System.IO;
    using System.Windows.Threading;

    namespace SharedFileEditor
    {
        public partial class EditorView : Window
        {
            private EditorModel model;
            private FileSystemWatcher watcher;
            private string path;
            private int count = 0;
            private int count2 = 0;

            public EditorView()
            {
                InitializeComponent();
                model = new EditorModel();
                this.DataContext = model;
            }

            private void OpenClicked(object sender, RoutedEventArgs e)
            {
                using (OpenFileDialog dialog = new OpenFileDialog())
                {
                    dialog.Filter = "Text files (*.txt)|*.txt";
                    if (dialog.ShowDialog() == System.Windows.Forms.DialogResult.OK)
                    {
                        watcher = new FileSystemWatcher(System.IO.Path.GetDirectoryName(dialog.FileName), "*.txt");
                        Console.WriteLine(System.IO.Path.GetDirectoryName(dialog.FileName));
                        watcher.Changed += new FileSystemEventHandler(OnChanged);
                        watcher.EnableRaisingEve`enter code here`nts = true;
                        path = dialog.FileName;
                        HandleOpen(dialog.FileName);
                    }
                }
            }

            internal void HandleOpen(string path)
            {
                FileStream f = File.Open(path, FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.ReadWrite);
                StreamReader reader = new StreamReader(f);
                model.Content = reader.ReadToEnd();
                reader.Close();
            }

            private void OnChanged(object source, FileSystemEventArgs e)
            {
                if (this.Box.Dispatcher.CheckAccess())
                {
                    try
                    {
                        FileStream f = File.Open(path, FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.ReadWrite);
                        StreamReader reader = new StreamReader(f);
                        model.Content = reader.ReadToEnd();
                        this.Box.CaretIndex = model.Cursor;
                        reader.Close();
                        Console.WriteLine("read:" + count2++);
                    }
                    catch (IOException x)
                    {
                        Console.WriteLine(x.Message);
                    }
                }
                else
                {
                    this.Box.Dispatcher.Invoke(
                    new updateContent(OnChanged), source, e);
                }
            }

            private void ContentChanged(object sender, TextChangedEventArgs e)
            {
                FileStream f = File.Open(path, FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.ReadWrite);
                StreamWriter writer = new StreamWriter(f);
                writer.Write(this.Box.Text);
                model.Cursor = this.Box.SelectionStart;
                model.Content = this.Box.Text;
                writer.Close();
                Console.WriteLine("write:"+count++);
            }

            public delegate void updateContent(object source, FileSystemEventArgs e);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:05:37.530

我想通了...这与我的应用程序的工作方式有关。通过将 EnableRaisingEvents 标志设置为 false 并稍后返回 true 来解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T15:33:46.050

我认为您的问题的实际答案包含在这篇文章中： [FileSystemWatcher Changed event is raise两次](https://stackoverflow.com/questions/1764809/filesystemwatcher-changed-event-is-raised-twice)

总而言之，这是`FileSystemWatcher`课堂上的一个错误。保存过程通常分批进行。你的`FileSystemWatcher`班级把他们都捡起来了。

# google-maps - fusiontablecell 对象通过 fusion table 从 kml 中检索值

> ID：14249429
> 
> 赞同：0
> 
> 时间：2013-01-10T01:29:02.457
> 
> 标签：google-maps, kml, google-maps-markers, google-fusion-tables, infowindow

目前我正在使用多边形 KML 和 fusion table 进行项目我已经将 kml 上传到 fusion table 并共享它，通过使用 mao id，在我的自定义网页中，它们显示正确，现在我需要添加地址搜索功能在自定义页面中，我的目标是将 kml 多边形信息和搜索结果信息显示到一个信息窗口中，

我可以显示标记地址信息，也可以通过单击显示多边形信息窗口，但它们是分开的，无法在一个信息窗口中显示

# c++ - 使用带有指向内置类型的指针的 LuaBridge

> ID：14249438
> 
> 赞同：0
> 
> 时间：2013-01-10T01:30:12.247
> 
> 标签：c++, binding, lua, luabridge

让我们考虑以下 C 函数：

```
void returnMultipleValuesByPointer(int* ret0, int* ret1, int* ret2)
{
    *ret0 = 0;
    *ret1 = 1;
    *ret2 = 2;
} 
```

如何使用 LuaBridge 在 Lua 中公开它？所有文档和示例都说明了指向对象是类的复杂情况，但我找不到如何处理这样一个简单的情况......

简单的方法（即`luabridge::getGlobalNamespace(L).addFunction("test", &returnMultipleValuesByPointer))`编译但不理解将通过地址传递的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:52:03.433

你不能直接这样做。您必须编写一个将参数转换为返回值的包装方法。这就需要编写这样的方法。例如，如果这些是*纯*返回值（即：它们不带参数）：

```
int lua_ReturnMultipleValuesByPointer(lua_State *L)
{
  int ret0;
  int ret1;
  int ret2;
  returnMultipleValuesByPointer(&ret0, &ret1, &ret2);
  lua_pushinteger(L, ret0);
  lua_pushinteger(L, ret1);
  lua_pushinteger(L, ret2);
  return 3;
} 
```

You will need to register this with "addCFunction", since it's a standard Lua function.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:46:37.790

如果你想做的是这样的：

```
a=0
b=0
c=0
test(a,b,c)
-- NOW a is 0, b is 1, c is 2 
```

我不认为这是可能的。您应该恢复到这样的 lua 调用：

```
a,b,c=test() 
```

现在， test 可以这样声明：

```
luabridge::getGlobalNamespace(L).addCFunction("test", &returnMultipleValues)

int returnMultipleValues (lua_State* L) {
    push(L,0);
    push(L,1);
    push(L,2);
    return 3;
} 
```

# asp.net - session、httphandler、java小程序协同工作

> ID：14249441
> 
> 赞同：0
> 
> 时间：2013-01-10T01:30:32.280
> 
> 标签：asp.net, applet, httphandler

我有一个 aspx 页面，请参阅：

```
<%@ Page Language="C#" %>
<%

    HttpContext.Current.Session["UserID"] = "ABC1";
    Response.Write(HttpContext.Current.Session["UserID"].ToString());

%>
<script>
    var parameters = { OpenURL: "test.pdf", java_arguments: "-Xmx256m" };
  var attributes = {archive:"webviewerS.jar,jPDFViewerS.jar", code:"qoppa.webViewer.PDFWebViewer", width:"100%", Height:"95%"};
  var version = "1.6.0";

  deployJava.runApplet(attributes, parameters, version);
</script> 
```

页面加载并创建了一个会话变量，我还添加了一个自定义 httphandler 来处理 pdf 的 http 请求，每个用户输入带有 .pdf 的路径都会运行该类

```
response.Cookies["UserID"].HttpOnly = false;
if (HttpContext.Current.Session["UserID"] != null)
{

        response.ContentType = "application/pdf";
        response.WriteFile(request.PhysicalPath);

}
else
{
    response.Write("access denied");
} 
```

此脚本的主要测试目标是只能通过使用该 aspx 页面中的 java 小程序来查看 pdf。但最后，

var 参数 = { OpenURL：“ ***test.pdf*** ”，java_arguments：“-Xmx256m”}；

java小程序请求加载pdf，但似乎**无法**在httphandler处检测到会话，但是如果我在加载.aspx页面后直接键入.pdf路径，则上面的代码是成功的。

如果applet请求pdf文件，seesion["UserID"]的结果为null，为什么检测不到session值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:41:17.377

您是否尝试过使用[Fiddler](http://www.fiddler2.com/)或[Charles](http://www.charlesproxy.com/)之类的工具来查看从浏览器返回到服务器的小程序请求？

根据服务器配置，通常会调用一个 cookie`ASP.NET_SessionId`或可能调用一个查询字符串参数来维护会话。`sessionId`

来自[ASP.NET 会话状态概述](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)

> 默认情况下，SessionID 值存储在 cookie 中。但是，您也可以将应用程序配置为将 SessionID 值存储在“无 cookie”会话的 URL 中。

Java 小程序可能不会在请求中包含此内容，因此服务器认为这是一个不同的会话。

# ios - Restkit 映射复杂的嵌套数组

> ID：14249445
> 
> 赞同：1
> 
> 时间：2013-01-10T01:31:00.387
> 
> 标签：ios, objective-c, xml, restkit, nsset

我正在尝试使用 restkit 来读取/解析 xml 提要。其中包含一组嵌套的艺术家。我可以映射其他关系，但不清楚我要如何处理下面的艺术家关系。

我的数据集如下所示：

```
<JamBase_Data>
<Results_Title>Jersey City, NJ</Results_Title>
<event>
<event_id>1896611</event_id>
<artists>
    <artist>
        <artist_id>96929</artist_id>
        <artist_name>The Happy Problem</artist_name>
    </artist>
    <artist>
        <artist_id>29817</artist_id>
        <artist_name>Craig Greenberg</artist_name>
    </artist>
    </artists>
<event_date>1/9/2013</event_date>
<venue>
<venue_id>48553</venue_id>
<venue_name>The Cake Shop</venue_name>
<venue_city>New York</venue_city>
<venue_state>NY</venue_state>
<venue_zip>10002</venue_zip>
</venue>
<event_url>
http://www.jambase.com/Shows/Event.aspx?eventID=1896611
</event_url>
</event>
</JamBase_Data> 
```

映射：

```
RKObjectMapping *eventMapping = [RKObjectMapping mappingForClass:[Event class]];
RKObjectMapping *artistMapping = [RKObjectMapping mappingForClass:[Artist class]];
RKObjectMapping *venueMapping = [RKObjectMapping mappingForClass:[Venue class]];

[artistMapping mapKeyPathsToAttributes: @"artist_name",@"artist_name", nil];
[venueMapping mapKeyPathsToAttributes: @"venue_city",@"venue_city",@"venue_state",@"venue_state", @"venue_name", @"venue_name", nil];

[objectManager.mappingProvider setMapping:eventMapping forKeyPath:@"JamBase_Data.event"];

[eventMapping mapKeyPath:@"artists" toRelationship:@"artists" withMapping:artistMapping];
[eventMapping mapKeyPath:@"venue" toRelationship:@"venue" withMapping:venueMapping]; 
```

场地.h

```
@interface Event : NSObject
@property (nonatomic, strong) NSSet *artists;
@property (strong, nonatomic) Venue *venue; 
```

@结尾

艺术家.h

```
@interface Artist : NSObject
@property (nonatomic, strong) NSNumber *artist_id;
@property (nonatomic, strong) NSNumber *artist_name; 
```

我可以让场地正确映射，但无法弄清楚如何让艺术家进行映射。我需要做些什么来告诉对象管理器结束事件吗？

任何帮助将不胜感激，因为这是我第一次涉足 iOS 开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:56:35.923

您在 XML 中看到的 Artists 对象转换为 NSArray。现在它包含了 Artists 类型的对象。你有没有这样想过？

# c# - C# - 索引超出范围

> ID：14249446
> 
> 赞同：0
> 
> 时间：2013-01-10T01:31:08.273
> 
> 标签：c#, c++, list, vector, compiler-errors

我正在尝试将 C++ 类转换为 C#，并在此过程中学习 C++。我以前从未遇到过 vector<>，我的理解是这就像 C# 中的 List<> 函数。在类转换期间，我使用 List futures_price = New List(Convert.ToInt32(no_steps) + 1); 重写了代码。一旦我运行代码，我就会收到“索引超出范围”错误。

环顾 SOF 后，我认为问题在于参数超出了与此相关的索引范围，但我没有看到使用以下代码解决此问题的简单解决方案。

特别是，这是触发错误的行：futures_prices[0] = spot_price * Math.Pow(d, no_steps);

以下是完整代码：

```
public double futures_option_price_call_american_binomial(double spot_price, double option_strike, double r, double sigma, double time, double no_steps)
        {

           //double spot_price, // price futures contract
           //double option_strike, // exercise price
           //double r, // interest rate
           //double sigma, // volatility
           //double time, // time to maturity
           //int no_steps

            List<double> futures_prices = new List<double>(Convert.ToInt32(no_steps) + 1);
               //(no_steps+1);
           //double call_values = (no_steps+1);
            List<double> call_values = new List<double>(Convert.ToInt32(no_steps) + 1);

           double t_delta = time/no_steps;
           double Rinv = Math.Exp(-r*(t_delta));
           double u = Math.Exp(sigma * Math.Sqrt(t_delta));
           double d = 1.0/u;
           double uu= u*u;
           double pUp   = (1-d)/(u-d);   // note how probability is calculated
           double pDown = 1.0 - pUp;

           futures_prices[0] = spot_price * Math.Pow(d, no_steps);

            int i;

            for (i=1; i<=no_steps; ++i) futures_prices[i] = uu*futures_prices[i-1]; // terminal tree nodes
            for (i=0; i<=no_steps; ++i) call_values[i] = Math.Max(0.0, (futures_prices[i]-option_strike));
            for (int step = Convert.ToInt32(no_steps) - 1; step >= 0; --step)
            {
                for (i = 0; i <= step; ++i)
                {
                    futures_prices[i] = d * futures_prices[i + 1];
                    call_values[i] = (pDown * call_values[i] + pUp * call_values[i + 1]) * Rinv;
                    call_values[i] = Math.Max(call_values[i], futures_prices[i] - option_strike); // check for exercise
                };
            };

            return call_values[0];
        } 
```

以下是 C++ 的原始源代码：

```
double futures_option_price_call_american_binomial(const double& F, // price futures contract
                           const double& K, // exercise price
                           const double& r, // interest rate
                           const double& sigma, // volatility
                           const double& time, // time to maturity
                           const int& no_steps) { // number of steps
   vector<double> futures_prices(no_steps+1);
   vector<double> call_values (no_steps+1);
   double t_delta= time/no_steps;
   double Rinv = exp(-r*(t_delta));
   double u = exp(sigma*sqrt(t_delta));
   double d = 1.0/u;
   double uu= u*u;
   double pUp   = (1-d)/(u-d);   // note how probability is calculated
   double pDown = 1.0 - pUp;
   futures_prices[0] = F*pow(d, no_steps);
   int i;
   for (i=1; i<=no_steps; ++i) futures_prices[i] = uu*futures_prices[i-1]; // terminal tree nodes
   for (i=0; i<=no_steps; ++i) call_values[i] = max(0.0, (futures_prices[i]-K));
   for (int step=no_steps-1; step>=0; --step) {
      for (i=0; i<=step; ++i)   {
     futures_prices[i] = d*futures_prices[i+1];
     call_values[i] = (pDown*call_values[i]+pUp*call_values[i+1])*Rinv;
     call_values[i] = max(call_values[i], futures_prices[i]-K); // check for exercise
      };
   };
   return call_values[0];
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T01:32:43.760

A 一`List<double>`开始是空的，直到您向其中添加项目。（传递构造函数参数只是设置容量，防止代价高昂的调整大小）

你不能访问`[0]`，直到你`Add()`它。

要按您的方式使用它，请改用数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:58:19.270

正如 SLaks 所说，在这种情况下最好使用数组。C# 列表填充了 Add 方法，并通过 Remove 方法删除了值......这将更加复杂并且内存/性能昂贵，因为您还要替换值。

```
public Double FuturesOptionPriceCallAmericanBinomial(Double spotPrice, Double optionStrike, Double r, Double sigma, Double time, Double steps)
{
    // Avoid calling Convert multiple times as it can be quite performance expensive.
    Int32 stepsInteger = Convert.ToInt32(steps);

    Double[] futurePrices = new Double[(stepsInteger + 1)];
    Double[] callValues = new Double[(stepsInteger + 1)];

    Double tDelta = time / steps;
    Double rInv = Math.Exp(-r * (tDelta));
    Double u = Math.Exp(sigma * Math.Sqrt(tDelta));
    Double d = 1.0 / u;
    Double uu = u * u;
    Double pUp = (1 - d) / (u - d);
    Double pDown = 1.0 - pUp;

    futurePrices[0] = spotPrice * Math.Pow(d, steps);

    for (Int32 i = 1; i <= steps; ++i)
        futurePrices[i] = uu * futurePrices[(i - 1)];

    for (Int32 i = 0; i <= steps; ++i)
        callValues[i] = Math.Max(0.0, (futurePrices[i] - optionStrike));

    for (Int32 step = stepsInteger - 1; step >= 0; --step)
    {
        for (Int32 i = 0; i <= step; ++i)
        {
            futurePrices[i] = d * futurePrices[(i + 1)];
            callValues[i] = ((pDown * callValues[i]) + (pUp * callValues[i + 1])) * rInv;
            callValues[i] = Math.Max(callValues[i], (futurePrices[i] - option_strike));
        }
    }

    return callValues[0];
} 
```

# javascript - 主干集合中的绑定

> ID：14249451
> 
> 赞同：0
> 
> 时间：2013-01-10T01:31:47.143
> 
> 标签：javascript, jquery, backbone.js, bind

当我同步我的集合时，服务器会返回一个 JSON 对象，我想将其作为新模型添加到我的集合中。我已经这样设置了：

```
syncCollection: function() {    
        Backbone.sync('create', this,  {
          success: function (msg) {
              console.log(this);
              this.add(msg, {at: 0});

          }
    }, this);
    } 
```

问题是“this”似乎并不指向集合，而是默认指向全局窗口对象。我试图绑定`this`到集合，但它似乎不起作用：

```
initialize: function() {
        _.bindAll(this, 'syncCollection');
    }, 
```

如何使用 .bind 确保`this`指向集合而不是窗口对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:36:32.680

`var that = this`在外部函数的开头（即之前`Backbone.sync`）添加，并在内部函数中替换为（即`this`）。`that``success`

注意：在 JavaScript`this`中，总是指我们正在执行的函数的**所有者**，或者更确切地说，指的是函数作为方法的对象。

顺便说一句，您不必使用`_.bindAll`，`_.bind`就足够了。

# c++ - Allegro 原生对话无法识别

> ID：14249456
> 
> 赞同：0
> 
> 时间：2013-01-10T01:32:29.857
> 
> 标签：c++, allegro

我设置了 allegro5，简单的程序（比如显示一个窗口，用黑色背景填充它）工作正常。但是，当我尝试导入其他标题（如本机对话框）时，我遇到了问题。例如，在编译此代码时

```
#include <allegro5/allegro.h>
#include <allegro5/allegro_native_dialog.h>

int main(){

   if(al_init()) {
      al_show_native_message_box(al_get_current_display(),
                                 "Window Title",
                                 "Content Title",
                                 "The error message here",
                                 NULL, ALLEGRO_MESSAGEBOX_ERROR);
      return 0;
   }

   return 0;
} 
```

像这样

`g++ -L/usr/local/lib -L/usr/lib -o "Allegro" ./main.o -lallegro_main -lallegro`

我收到这个错误

```
Undefined symbols for architecture x86_64:
  "_al_show_native_message_box", referenced from:
      _al_mangled_main()     in main.o 
```

知道谁来解决这个问题吗？我很肯定所有头文件都存在，并且 /usr/local/libs 中似乎有适当的库。

编辑：我还尝试将 -lallegro_native_dialog 标志添加到 g++，但无济于事。取而代之的是错误`library not found for -lallegro_native_dialog`提示，在其他地方看到了建议，并认为我会试一试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:53:28.903

`-lallegro_dialog`不是`-lallegro_native_dialog`！_

# node.js - nodejs上的mongoskin不报重复错误

> ID：14249460
> 
> 赞同：1
> 
> 时间：2013-01-10T01:33:03.723
> 
> 标签：node.js, mongodb

我尝试使用 mongoskin 在 nodejs 上两次向 mongodb 插入相同的条目。为集合指定了唯一索引。但是，第二次插入时没有给出错误。我应该怎么做才能检测是否存在重复错误？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T01:56:34.850

确保您使用的是安全模式。要将安全模式用作连接的默认值，您可以在创建连接时将其指定为参数。来自[mongoskin 文档](https://github.com/kissjs/node-mongoskin)：

```
var db = mongoskin.db([
  '192.168.0.1:27017/?auto_reconnect=true',
  '192.168.0.2:27017/?auto_reconnect=true',
  '192.168.0.3:27017/?auto_reconnect=true'
], {
  database: 'testdb',
  safe: true
}, {
  connectArbiter: false,
  socketOptions: {
    timeout: 2000
  }
}); 
```

安全模式指示客户端`getLastError`在每次操作后调用，这是它知道是否有错误的方式。因此，您通常要确保打开安全模式！

# c++ - 为模板类重载 operator[] - c++

> ID：14249461
> 
> 赞同：0
> 
> 时间：2013-01-10T01:33:08.063
> 
> 标签：c++, operator-overloading

刚刚为模板数组类编写了一个代码（我知道它还没有完成），并试图记住如何重载运算符（同时没有特别的困难......）。

无论如何，在考虑如何实现时，`operator[]`我想知道如果索引超出数组边界会发生什么......我很确定我不可能返回 NULL（因为返回类型），对? 如果是这样，如果索引超出范围，我应该返回什么？

这是代码，其中大部分对我的问题来说是多余的，但它可能会帮助任何谷歌运营商重载的人，所以我发布了完整的代码......

```
#ifndef __MYARRAY_H
#define __MYARRAY_H

#include <iostream>
using namespace std;

template <class T>
class MyArray
{
    int phisicalSize, logicalSize;
    char printDelimiter;
    T* arr;

public: 
    MyArray(int size=10, char printDelimiter=' ');
    MyArray(const MyArray& other);
    ~MyArray() {delete []arr;}

    const MyArray& operator=(const MyArray& other);
    const MyArray& operator+=(const T& newVal);

    T& operator[](int index);

    friend ostream& operator<<(ostream& os, const MyArray& ma)
    {
        for(int i=0; i<ma.logicalSize; i++)
            os << ma.arr[i] << ma.printDelimiter;
        return os;
    }
};

template <class T>
T& MyArray<T>::operator[]( int index )
{
    if (index < 0 || index > logicalSize)
    {
        //do what???
    }

    return arr[index];
}

template <class T>
const MyArray<T>& MyArray<T>::operator+=( const T& newVal )
{
    if (logicalSize < phisicalSize)
    {
        arr[logicalSize] = newVal;
        logicalSize++;
    }

    return *this;
}

template <class T>
const MyArray<T>& MyArray<T>::operator=( const MyArray<T>& other )
{
    if (this != &other)
    {
        delete []arr;
        phisicalSize = other.phisicalSize;
        logicalSize = other.logicalSize;
        printDelimiter = other.printDelimiter;
        arr = new T[phisicalSize];

        for(int i=0; i<logicalSize; i++)
            arr[i] = other.arr[i];
    }

    return *this;
}

template <class T>
MyArray<T>::MyArray( const MyArray& other ) : arr(NULL)
{
    *this = other;
}

template <class T>
MyArray<T>::MyArray( int size, char printDelimiter ) : phisicalSize(size), logicalSize(0), printDelimiter(printDelimiter)
{
    arr = new T[phisicalSize];
}

#endif 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T01:36:49.227

`operator[]`通常不进行边界检查。大多数可以具有范围的标准容器都使用单独的函数 ，`at()`该函数经过范围检查并引发`std::out_of_range`异常。

您可能也想实现`const T& operator[]`重载。

# wordpress - 数据表服务器端 wordpress 集成

> ID：14249462
> 
> 赞同：1
> 
> 时间：2013-01-10T01:33:10.193
> 
> 标签：wordpress, datatables, server-side

所以，我继承了一个基于数据表构建的 Intranet 站点。基本上它是在 Wordpress 中制作的，然后显示用户在数据表中填写的自定义字段。但是它在每个帖子中查询 40 列，超过 2k 条目，因此当用户尝试查看表中的数据时，它现在陷入停顿状态。

我正在尝试为此利用 Datatables 的服务器端方面，但由于 sql 数据的格式化方式而遇到了一些麻烦。

任何人都可以就如何设置 server_processing.php 文件（我正在使用这个：[http](http://datatables.net/development/server-side/php_mysql) ://datatables.net/development/server-side/php_mysql ）提供任何帮助：

1.  根据 wp_posts.ID 索引显示行
2.  根据不同的表 (wp_postmeta) 显示此行中的列，其中每个列值在 wp_postmeta 表中由在 1 中找到的 ID 单独索引
3.  将整行链接到 wp_posts 表中的 url

如果有人有任何想法，我将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:46:39.170

绝对是 WordPress 的插件是最有效的。AJAX 可能与使用 WordPress 编辑功能等核心的 JQuery 发生冲突/导致问题。我会去 WordPress.org 并在插件下查找帮助。还有付费/高级 Intranet 插件，例如 Simple Intranet。：） 克里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T19:42:42.653

可能您可能对这个插件感兴趣 - 看起来它完全符合您的要求：[http ://wpdatatables.com](http://wpdatatables.com)

服务器端处理的示例：[http ://wpdatatables.com/display-mysql-table-in-wordpress/](http://wpdatatables.com/display-mysql-table-in-wordpress/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T10:47:56.497

您肯定需要一个包含 DataTables 功能的 Wordpress 表格插件。您可以考虑使用 Tabulizer for Wordpress ( [http://www.tabulizer.com](http://www.tabulizer.com) )，它支持服务器端处理并仅在需要时通过 Ajax 调用加载表数据。还有一个数据源缓存以提高性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-16T18:33:01.897

WordPress 或 Core PHP 中的 Ajax 数据表或服务器端处理数据表。

> **HTML 代码**

```
<table id="student_table" width="100%">
    <thead>
        <tr>
            <th>Roll No.</th>
            <th>Full Name</th>
            <th>Phone</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>

    </tbody>
    <tfoot>
        <tr>
            <th>Roll No.</th>
            <th>Full Name</th>
            <th>Phone</th>
            <th>Action</th>
        </tr>
    </tfoot>
</table> 
```

> **jQuery代码**

```
jQuery('#student_table').DataTable({
    "bProcessing": true,
    "serverSide": true,
    "ajax":{
        "url": FrontendConfig.ajaxurl+'?action=getStudentsFromExamIdAjax&exam_nounce=exam_nounce_data&exam_id=1',
        type: "post",
    }
}); 
```

> **WordPress 或 PHP 代码**

```
add_action('wp_ajax_getStudentsFromExamIdAjax', 'getStudentsFromExamIdAjax' );
add_action('wp_ajax_nopriv_getStudentsFromExamIdAjax', 'getStudentsFromExamIdAjax' );

function getStudentsFromExamIdAjax(){
    if(empty($_GET['action']) || empty($_GET['exam_id'])){
        wp_send_json_error( new \WP_Error( 'Bad Request' ) );
    }

    if(isset($_GET['exam_id']) && $_SERVER['REQUEST_METHOD'] === 'POST' && wp_verify_nonce( $_GET['exam_nounce'], 'exam_nounce_data' )):

        $exam_id = (isset($_GET['exam_id'])) ? absint($_GET['exam_id']) : '';

        /*@ You can create a function to get the data here */
        $students = getStudentsFromExamId($exam_id);

        $tdata = [];
        foreach ($students as $key => $value):
            $tdata[$key][] = $value->roll_no;
            $tdata[$key][] = $value->name;
            $tdata[$key][] = $value->phone;
            $tdata[$key][] = 'action here';
        endforeach;

        $total_records = count($tdata);

        $json_data = array(

            /* $_REQUEST['draw'] comes from the datatable, you can print to ensure that */

            "draw"            => intval( $_REQUEST['draw'] ), 
            "recordsTotal"    => intval( $total_records ),
            "recordsFiltered" => intval( $total_records  ),
            "data"            => $tdata
        );

        echo json_encode($json_data);
    endif;

    wp_die();
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-12-30T11:37:00.933

**自定义.js**

```
jQuery( document ).ready(function() {
alert('test');
 jQuery('#employee_grid').DataTable({
          "bProcessing": true,
          "serverSide": true,              
          "ajax":{
             url :ajax_url_object.ajax_url+'?action=getStudentsFromExamIdAjax&exam_nounce=exam_nounce_data&exam_id=1', // json datasource
             type: "POST",  // type of method  ,GET/POST/DELETE
             error: function(){
               jQuery("#employee_grid_processing").css("display","none");
             }
           }
   });  }); 
```

> WordPress 或 PHP 代码

```
function theme_styles1() 
```

{

```
$template_dir_uri =content_url();
$pluginurl =plugins_url();

//====================js
wp_enqueue_style( 'vpn-custom-style1','https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css', true );

wp_enqueue_style( 'vpn-custom-boostrap1','https://cdn.datatables.net/1.11.3/css/dataTables.bootstrap4.min.css', true );

wp_enqueue_script( 'vpn-script11','https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js', true );
wp_enqueue_script( 'vpn-script21','https://cdn.datatables.net/1.11.3/js/dataTables.bootstrap4.min.js', true );

wp_enqueue_script( 'vpn_script31', plugin_dir_url( __FILE__ ).'js/custom.js', true ); 
```

//============ ajax url

```
$urls= array('ajax_url'=> admin_url( 'admin-ajax.php' ),
                'site_url' => site_url()
                );
wp_localize_script( 'vpn_script31', 'ajax_url_object',$urls); 
```

}

add_action('wp_enqueue_scripts', 'theme_styles1',99);

```
div class="wrap">   
    <h1>Service List</h1>
<div class="container">
    <table id="employee_grid" class="display" width="100%" cellspacing="0">
        <thead>
            <tr>
                <th>Empid</th>
                <th>Name</th>
                <th>Salary</th>
                <th>Age</th>
            </tr>
        </thead>

        <tfoot>
            <tr>
                <th>Empid</th>
                <th>Name</th>
                <th>Salary</th>
                <th>Age</th>

            </tr>
        </tfoot>
    </table>
</div> 
```

add_action('wp_ajax_getStudentsFromExamIdAjax', 'getStudentsFromExamIdAjax' ); add_action('wp_ajax_nopriv_getStudentsFromExamIdAjax', 'getStudentsFromExamIdAjax');

函数 getStudentsFromExamIdAjax(){

```
global $wp;

$servername = "localhost:3308";
$username = "root";
$password = "";
$dbname = "demo";

$conn = mysqli_connect($servername, $username, $password, $dbname) or die("Connection failed: " . mysqli_connect_error());
$params = $columns = $totalRecords = $data = array();

$params = $_REQUEST;
// echo "<pre>";
// print_r($params);
// die;

//define index of column
$columns = array( 
    0 =>'id',
    1 =>'employee_name', 
    2 => 'employee_salary',
    3 => 'employee_age'
);

$where = $sqlTot = $sqlRec = "";

// check search value exist
if( !empty($params['search']['value']) ) {   
    $where .=" WHERE ";
    $where .=" ( employee_name LIKE '".$params['search']['value']."%' ";    
    $where .=" OR employee_salary LIKE '".$params['search']['value']."%' ";

    $where .=" OR employee_age LIKE '".$params['search']['value']."%' )";
}

// getting total number records without any search
$sql = "SELECT * FROM `employee` ";
$sqlTot .= $sql;
$sqlRec .= $sql;
//concatenate search sql if value exist
if(isset($where) && $where != '') {

    $sqlTot .= $where;
    $sqlRec .= $where;
}

$sqlRec .=  " ORDER BY ". $columns[$params['order'][0]['column']]."   ".$params['order'][0]['dir']."  LIMIT ".$params['start']." ,".$params['length']." ";

$queryTot = mysqli_query($conn, $sqlTot) or die("database error:". mysqli_error($conn));

$totalRecords = mysqli_num_rows($queryTot);

$queryRecords = mysqli_query($conn, $sqlRec) or die("error to fetch employees data");

//iterate on results row and create new index array of data
while( $row = mysqli_fetch_row($queryRecords) ) { 
    $data[] = $row;
}   

// echo "<pre>";
// print_r($data);
// die;

$json_data = array(
        "draw"            => intval( $params['draw'] ),   
        "recordsTotal"    => intval( $totalRecords ),  
        "recordsFiltered" => intval($totalRecords),
        "data"            => $data   // total data array
        );

echo json_encode($json_data);  // send data as json format 
```

}

# linux - os.Mkdir 和 os.Mkdir 所有权限

> ID：14249467
> 
> 赞同：86
> 
> 时间：2013-01-10T01:33:50.060
> 
> 标签：linux, go

我试图在我的程序开始时创建一个日志文件。

`/log`如果没有创建目录，我需要检查目录是否存在，然后继续创建日志文件。

好吧，我尝试使用`os.Mkdir`（以及`os.MkdirAll`），但是无论我在第二个参数中输入什么值，我都会得到一个没有权限的锁定文件夹。为了获得用户文件夹的读/写，这应该是什么值？我以为会，`0x700`但它似乎不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2015-07-01T02:11:04.487

您可以直接使用八进制表示法：

```
os.Mkdir("dirname", 0700) 
```

**权限位**

```
+-----+---+--------------------------+
| rwx | 7 | Read, write and execute  |
| rw- | 6 | Read, write              |
| r-x | 5 | Read, and execute        |
| r-- | 4 | Read,                    |
| -wx | 3 | Write and execute        |
| -w- | 2 | Write                    |
| --x | 1 | Execute                  |
| --- | 0 | no permissions           |
+------------------------------------+

+------------+------+-------+
| Permission | Octal| Field |
+------------+------+-------+
| rwx------  | 0700 | User  |
| ---rwx---  | 0070 | Group |
| ------rwx  | 0007 | Other |
+------------+------+-------+ 
```

[Unix 权限入门](https://stackoverflow.com/a/35895436/395461)

**常见权限用法**

**0755**常用于 Web 服务器。所有者可以读、写、执行。其他人都可以读取和执行但不能修改文件。

**0777**每个人都可以读写和执行。在 Web 服务器上，不建议对您的文件和文件夹使用“777”权限，因为它允许任何人向您的服务器添加恶意代码。

**0644**只有所有者可以读写。其他人只能阅读。没有人可以执行该文件。

**0655**只有所有者可以读写文件，但不能执行文件。其他人都可以读取和执行，但不能修改文件。

[www.maketecheasier.com/file-permissions-what-does-chmod-777-means/](http://www.maketecheasier.com/file-permissions-what-does-chmod-777-means/)

**Linux 上的目录权限**

在 Linux 上对目录应用权限时，权限位的含义与常规文件不同。（[来源](https://unix.stackexchange.com/a/21252)）

**读取位**用户可以读取目录中包含的文件名。
**写入位**如果还设置了执行位，用户可以{添加、重命名、删除}文件名。
**执行位**用户可以进入目录并访问里面的文件。

[https://unix.stackexchange.com/a/21252](https://unix.stackexchange.com/a/21252)

**权限计算器**

[![权限计算器](../Images/95c224b1906b632517409d7543b1abd7.png)](http://permissions-calculator.org/)

一个方便的[权限计算器](http://permissions-calculator.org/)。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-17T13:51:14.910

@Daniel 在他的回答中的陈述并不真正正确，而且它谈到了一个十进制数，然后使用一个八进制数，正如@SashaCrofter 在他的评论中正确指出的那样。

实际上，只要它代表合理的 Unix 权限，您的权限值的*形式*并不重要。

由于 POSIX 文件系统上的权限位以三位的形式出现——三位用于所有者、组和其他访问，加上三位修饰符（例如粘性位）——习惯上使用八进制数将权限表示为每个*数字*八进制数表示一个三位值。

因此，当你在 Go 代码中使用 0700 时，前导 0 被去除，仅用于告诉解析器它看到一个八进制数字文字，以下三个字母依次代表所有者、组和其他权限。如果您还想设置组粘性位以及使文件系统对象组可读和可执行，您可以指定 02750 等等。

请注意，文件系统对象获得的实际权限进一步受到`umask`创建该对象的进程的活跃度的调节。

为了更好地掌握这些主题，最好阅读`chmod`有关类 Unix 操作系统的手册页和一般文献。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2020-05-06T21:19:40.613

您可以将 umask 重置为 0。我将其称为主文件中的第一件事

```
syscall.Umask(0) 
```

例子

```
_ = os.MkdirAll("/tmp/dirs/1", 0664)
syscall.Umask(0)
_ = os.MkdirAll("/tmp/dirs/2", 0664) 
```

结果

```
/tmp/dirs$ stat -c '%A %a %n' *
drw-r--r-- 644 1
drw-rw-r-- 664 2 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-01-29T08:31:18.150

除了其他答案，请记住，在 Unix 和 Linux 风格的操作系统上，所有程序都使用*umask*设置运行。umask 在许多情况下默认为 022 或有时为 002，是系统将从文件和目录创建请求中*自动删除的权限集。*

这意味着大多数程序——这个规则有几个例外——应该使用模式`0666`来创建文件和模式`0777`来创建目录。用户的*配置，记录在运行过程中，说明要**拿走*这些权限中的哪一个。如果用户的设置是`022`，我们创建一个文件 mode `0666`，我们得到的实际设置是`rw-r--r--`：用户读写，组只读，其他人只读。

如果用户希望将可写性扩展到他们的组，他们只需将他们的 umask 设置为`2`：现在他们取消其他人的写入权限，但将其留给他们的组。现在使用 mode 创建新文件`rw-rw-r--`。*程序*没有改变：它仍然使用它的`0666`模式。但是*文件*是用 mode 创建的`0664`。

同样，如果您调用`os.Mkdir`or `os.MkdirAll`，`0777`则 umask 将带走不需要的权限，让您拥有正确的权限。

但我提到有例外。其中包括复制敏感信息的程序，这些信息仅供用户使用：这些程序通常应`0700`为目录和`0600`文件使用模式。它们*可能*包括充当系统用户而不是任何个人的长期运行的服务器......尽管这些服务器*可以*使用正确的 umask 运行，在这种情况下，`0777`或者`0666`很好。

你必须在这里应用一些判断。具有特别安全意识的程序，例如 ssh 或类似程序，可能希望使用有限的权限，甚至可能希望检查（使用`os.Lstat`或类似的）权限对重要目录是否适当严格。

（注意umask*不适*用于`os.Chmod`通话，这里直接*选择*模式。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-09-08T23:07:36.013

确保您设置所需权限的一种方法是使用非常方便的`FileMode`常量，而不用八进制计算复杂的计算`os`：

[https://golang.org/pkg/os/#FileMode](https://golang.org/pkg/os/#FileMode)

我通常将`os.ModePerm`（实际上编码为`0777`）用于完全许可的目录，例如缓存或临时文件所需的目录，但您的里程可能会有所不同。要设置附加位（粘性等），正如@kostix 所指出的那样，必须处理 Go 中标志的八进制表示问题，您总是可以使用类似的东西：

```
if err := os.MkdirAll("my/tmp/dir", os.ModeSticky|os.ModePerm); err != nil {
  ... handle error ...
} 
```

[去游乐场](https://play.golang.org/p/Qb9pV_gSqVW)

与往常一样，*再次*值得一提的是，这些权限`umask`被设置的任何内容“过滤”。

# android - 尝试从包裹中检索数据

> ID：14249468
> 
> 赞同：0
> 
> 时间：2013-01-10T01:33:53.793
> 
> 标签：android, unmarshalling, parcelable

我有一个包含 MenuItem 对象的 ArrayList 的订单对象。这两个类都实现了 Parcelable 接口。

当我尝试从新活动中的 Intent 检索对象时，出现以下错误：

> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.example.waitron5/com.example.waitron5.SectionsActivity}：android.os.BadParcelableException：解组时 ClassNotFoundException：com.example.waitron5.MenuItem

这是我发送 Order 对象的代码：

```
i = new Intent(v.getContext(), SectionsActivity.class);
            i.putExtra("data", order);
            startActivity(i); 
```

这是我检索 Order 对象的母鹿：

```
Intent i = getIntent();
    if(i != null && i.hasExtra("data"))
    {
        order = i.getParcelableExtra("data");
        Toast.makeText(
            this.getApplicationContext(), 
            "recieved order object, covers: " + 
                order.getCovers() + 
                " table no: " + 
                order.getTable() + 
                " order size: " + 
                order.getItems().size(), 
            Toast.LENGTH_SHORT).show(); 
```

订单类别：

```
package com.example.waitron5;

import java.util.ArrayList;
import android.os.Parcel;
import android.os.Parcelable;

public class Order implements Parcelable {

    private int covers;
    private int table;
    private ArrayList<MenuItem> items;

    public Order(){
        super();
        this.items = new ArrayList<MenuItem>();

    }

    public static final Parcelable.Creator<Order> CREATOR = 
    new Parcelable.Creator<Order>() {

        @Override
        public Order createFromParcel(Parcel source) {
            return new Order(source);
        }

        @Override
        public Order[] newArray(int size) {
            return new Order[size];
        }

    };

    public Order(int covers, int table) {
        super();
        this.covers = covers;
        this.table = table;
        this.items = new ArrayList<MenuItem>();
    }

    public int getCovers() {
        return covers;
    }

    public void setCovers(int covers) {
        this.covers = covers;
    }

    public int getTable() {
        return table;
    }

    public void setTable(int table) {
        this.table = table;
    }

    public ArrayList<MenuItem> getItems() {
        return items;
    }

    public void setItems(ArrayList<MenuItem> items) {
        this.items = items;
    }

    //add to order
    public void addToOrder(MenuItem m){
        items.add(m);
    }

    //remove from order
    public void removeFromOrder(MenuItem m){
        items.remove(m);
    }

    public Order(Parcel source) {
        this();
        readFromParcel(source);
    }

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        // TODO Auto-generated method stub
        dest.writeInt(covers);
        dest.writeInt(table);
        dest.writeList(items);
    }

    @SuppressWarnings("unchecked")
    private void readFromParcel(Parcel source) {
        // TODO Auto-generated method stub
        covers = source.readInt();
        table = source.readInt();
        source.readList(items, null);

    }
} 
```

菜单项类：

```
package com.example.waitron5;

import android.os.Parcel;
import android.os.Parcelable;

public class MenuItem implements Parcelable {

    private String name;
    private double price;
    private int qty;
    private String info;

    public MenuItem(String name, double price) {
        super();
        this.name = name;
        this.price = price;
    }
    public MenuItem() {
        // TODO Auto-generated constructor stub
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public double getPrice() {
        return price;
    }
    public void setPrice(double price) {
        this.price = price;
    }

    public int getQty() {
        return qty;
    }
    public void setQty(int qty) {
        this.qty = qty;
    }
    public String getInfo() {
        return info;
    }
    public void setInfo(String info) {
        this.info = info;
    }
    @Override
    public String toString() {
        return name;
    }

    //Parcelable methods.
    public static final Parcelable.Creator<MenuItem> CREATOR = 
        new Parcelable.Creator<MenuItem>() {

        @Override
        public MenuItem createFromParcel(Parcel source) {
            return new MenuItem(source);
        }

        @Override
        public MenuItem[] newArray(int size) {
            return new MenuItem[size];
        }
    };

    public MenuItem(Parcel source) {
        this();
        readFromParcel(source);
    }

    private void readFromParcel(Parcel source) {
        name = source.readString();
        price = source.readDouble();
    }

    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(name);
        dest.writeDouble(price);
    }
} 
```

关于可能发生的事情有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:28:08.777

我解决了我的问题。问题如下：

在订单类中。

```
public void writeToParcel(Parcel dest, int flags) {

    dest.writeInt(covers);

    dest.writeInt(table);

    dest.writeList(items);

} 
```

应该：

```
public void writeToParcel(Parcel dest, int flags) {

    dest.writeInt(covers);

    dest.writeInt(table);

    dest.writeTypedList(items);

} 
```

和

```
private void readFromParcel(Parcel source) {

    covers = source.readInt();

    table = source.readInt();

    source.readList(items, null);

} 
```

应该：

```
private  void readFromParcel(Parcel source) {

    covers = source.readInt();

    table = source.readInt();

    items = new ArrayList<MenuItem>();

    source.readTypedList(items,  MenuItem.CREATOR);

} 
```

# java - java.lang.NullPointerException 问题

> ID：14249472
> 
> 赞同：0
> 
> 时间：2013-01-10T01:34:16.420
> 
> 标签：java, android, nullpointerexception, android-logcat

我意识到这通常是一个简单的问题，但我一直在查看此站点和其他站点上的其他类似问题，但无法修复代码，也无法准确查看错误来自何处。我的问题似乎是调用分配给按钮的 OnClickListener，但我又可能错了。我基本上是从另一个有效的应用程序中直接复制了这段代码（只做了很少的改动）。这个事实让我更加困惑。提前感谢您对这个相对简单的问题的帮助。

代码：

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.update_activity);

    final Handler handler;
    handler = new Handler();

    final EditText getCustID = (EditText) findViewById(R.id.customer);
    final EditText custvar1 = (EditText) findViewById(R.id.var1);
    final EditText custvar2 = (EditText) findViewById(R.id.var2);
    final EditText custvar3 = (EditText) findViewById(R.id.var3);

    class sendGET implements Runnable
    {
        private String url;

        public sendGET(String mUrl)
        {
            url = mUrl;
        }

        public void run()
        {
            try
            {
                //Declare HttpClient and HttpGet
                HttpClient client = new DefaultHttpClient();
                HttpGet httpget = new HttpGet(url);

                //Run HttpGet
                client.execute(httpget);

            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

    class getCustomerData implements Runnable
    {       
        public void run()
        {
            try
            {
                InputStream stream = null;
                XMLparser xmlParser = new XMLparser();
                List<Customer> customers = null;

                String parseUrl = URL + getCustID.getText().toString();

                try
                {
                    stream = downloadUrl(parseUrl);
                    customers = xmlParser.parse(stream);
                }
                finally
                {
                    stream.close();
                }

                final Customer data = customers.get(0);

                handler.post(new Runnable() {
                    public void run() {
                        custvar1.setText(String.valueOf(data.var1));
                        custvar2.setText(String.valueOf(data.var2));
                        custvar3.setText(String.valueOf(data.var3));
                    }
                });
            }
            catch (IOException e)
            {
                //return getResources().getString(R.string.connection_error);
            }
            catch (XmlPullParserException e)
            {
                //return getResources().getString(R.string.xml_error);
            }
        }

        private Customer readCustomer(XmlPullParser parser) throws XmlPullParserException, IOException
        {
            parser.require(XmlPullParser.START_TAG, null, "customer");
            String custID = null;
            String var1 = null;
            String var2 = null;
            String var3 = null;

            while(parser.next() != XmlPullParser.END_TAG)
            {
                if (parser.getEventType() != XmlPullParser.START_TAG)
                {
                    continue;
                }
                String name = parser.getName();
                if (name.equals("CustID"))
                {
                    custID = readCustID(parser);
                } else if (name.equals("custvar1"))
                {
                    var1 = readVar1(parser);
                } else if (name.equals("custvar2"))
                {
                    var2 = readVar2(parser);
                } else if (name.equals("custvar3"))
                {
                    var3 = readVar3(parser);
                } else
                {
                    skip(parser);
                }

            }
            return new Customer(custID, var1, var2, var3);
        }

        private String readCustID(XmlPullParser parser) throws IOException, XmlPullParserException
        {
            parser.require(XmlPullParser.START_TAG, null, "CustID");
            final String custID = readText(parser);
            parser.require(XmlPullParser.END_TAG, null, "CustID");
            return custID;
        }

        private String readVar1(XmlPullParser parser) throws IOException, XmlPullParserException
        {
            parser.require(XmlPullParser.START_TAG, null, "custvar1");
            String var1 = readText(parser);
            parser.require(XmlPullParser.END_TAG, null, "custvar1");
            return var1;
        }

        private String readVar2(XmlPullParser parser) throws IOException, XmlPullParserException
        {
            parser.require(XmlPullParser.START_TAG, null, "custvar2");
            String var2 = readText(parser);
            parser.require(XmlPullParser.END_TAG, null, "custvar2");
            return var2;
        }

        private String readVar3(XmlPullParser parser) throws IOException, XmlPullParserException
        {
            parser.require(XmlPullParser.START_TAG, null, "custvar3");
            String var3 = readText(parser);
            parser.require(XmlPullParser.END_TAG, null, "custvar3");
            return var3;
        }

        private String readText(XmlPullParser parser) throws IOException, XmlPullParserException
        {
            String result = "";
            if (parser.next() == XmlPullParser.TEXT)
            {
                result = parser.getText();
                parser.nextTag();
            }
            return result;
        }

        private void skip(XmlPullParser parser) throws IOException, XmlPullParserException
        {
            if (parser.getEventType() != XmlPullParser.START_TAG)
            {
                throw new IllegalStateException();
            }
            int depth = 1;
            while (depth != 0)
            {
                switch (parser.next()) {
                case XmlPullParser.END_TAG:
                    depth --;
                case XmlPullParser.START_TAG:
                    depth++;
                    break;
                }
            }
        }

        class XMLparser
        {       
            public List<Customer> parse(InputStream in) throws XmlPullParserException, IOException {
                try
                {
                    XmlPullParser parser = Xml.newPullParser();
                    parser.setInput(in, null);
                    parser.nextTag();
                    return readXML(parser);
                } finally {
                    in.close();
                }
            }

            private List<Customer> readXML(XmlPullParser parser) throws XmlPullParserException, IOException
            {
                List<Customer> custData = new ArrayList<Customer>();

                parser.require(XmlPullParser.START_TAG, null, "xml");
                while (parser.next() != XmlPullParser.END_TAG)
                {
                    if (parser.getEventType() != XmlPullParser.START_TAG)
                    {
                        continue;
                    }
                    String name = parser.getName();

                    //Look for customer tag
                    if (name.equals("customer"))
                    {
                        custData.add(readCustomer(parser));
                    }
                    else
                    {
                        skip(parser);
                    }
                }

                return custData;
            }
        }

        private InputStream downloadUrl(String urlString) throws IOException
        {
            URL url = new URL(urlString);
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setReadTimeout(10000);
            conn.setConnectTimeout(15000);
            conn.setRequestMethod("GET");
            conn.setDoInput(true);

            //start the query
            conn.connect();
            InputStream stream = conn.getInputStream();
            return stream;
        }
    }

    final Button getData = (Button) findViewById(R.id.getData);
    getData.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v)
        {
            //Declare and start thread
            final Runnable mGetData = new getCustomerData();
            final Thread getData = new Thread(mGetData);
            getData.start();
        }
    });

    final Button submit = (Button) findViewById(R.id.Submit);
    submit.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            //set url
            String url = "**removed**";
            url += "var1=" + custvar1.getText().toString() + "&var2=" + custvar2.getText().toString() + "&var3=" + custvar3.getText().toString();

            //Declare and start thread
            final Runnable mConnect = new sendGET(url);
            final Thread Connect = new Thread(mConnect);
            Connect.start();
        }
    });
}

public class Customer
{
    public final String custID;
    public final String var1;
    public final String var2;
    public final String var3;

    private Customer()
    {
        custID = null;
        var1 = null;
        var2 = null;
        var3 = null;
    }

    private Customer(String custID, String var1, String var2, String var3)
    {
        this.custID = custID;
        this.var1 = var1;
        this.var2 = var2;
        this.var3 = var3;

    }
} 
```

日志错误：

```
01-09 19:20:53.478: W/dalvikvm(911): threadid=11: thread exiting with uncaught exception (group=0x40a13300)
01-09 19:20:53.478: E/AndroidRuntime(911): FATAL EXCEPTION: Thread-99
01-09 19:20:53.478: E/AndroidRuntime(911): java.lang.NullPointerException
01-09 19:20:53.478: E/AndroidRuntime(911):  at us.rns.editdata.UpdateActivity$1getCustomerData.run(UpdateActivity.java:90)
01-09 19:20:53.478: E/AndroidRuntime(911):  at java.lang.Thread.run(Thread.java:856)
01-09 19:20:54.408: W/IInputConnectionWrapper(911): showStatusIcon on inactive InputConnection 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:37:31.327

您的 downloadUrl 方法失败。

```
InputStream stream = null;
XMLparser xmlParser = new XMLparser();
List<Customer> customers = null;

String parseUrl = URL + getCustID.getText().toString();

try
{
    stream = downloadUrl(parseUrl);
    customers = xmlParser.parse(stream);
}
finally
{
    stream.close();
} 
```

流对象设置为 null，然后您分配`stream = downloadUrl(parseUrl)`.

downloadUrl 方法失败，没有为`stream`.

然后，您尝试关闭`finally`子句中的流。

```
private InputStream downloadUrl(String urlString) throws IOException
{
    URL url = new URL(urlString);
    HttpURLConnection conn = (HttpURLConnection) url.openConnection();
    conn.setReadTimeout(10000);
    conn.setConnectTimeout(15000);
    conn.setRequestMethod("GET");
    conn.setDoInput(true);

    //start the query
    conn.connect();
    InputStream stream = conn.getInputStream();
    return stream;
} 
```

在这个方法上放一个断点，并通过它进行调试。请返回它正在中断的确切行。我怀疑是`conn.connect();`或`InputStream stream = conn.getInputStream();`

我也会在 finally 子句中这样做：

```
finally
{
    if(stream != null)
        stream.close();
} 
```

它也可能是以下内容：

您需要移动所有这些：

```
final EditText getCustID = (EditText) findViewById(R.id.customer);
final EditText custvar1 = (EditText) findViewById(R.id.var1);
final EditText custvar2 = (EditText) findViewById(R.id.var2);
final EditText custvar3 = (EditText) findViewById(R.id.var3);

final Button getData = (Button) findViewById(R.id.getData);

final Button submit = (Button) findViewById(R.id.Submit); 
```

进入 onResume，而不是 onCreate()

# ios - 数组不删除重复项

> ID：14249475
> 
> 赞同：1
> 
> 时间：2013-01-10T01:34:30.107
> 
> 标签：ios, objective-c, xcode, core-data

我正在尝试将数组从核心数据加载到表视图中。有些值是重复的。因此，在我用来获取数据的数组中，我试图告诉数组删除所有重复项，然后将其显示在表格视图中。但由于某种原因，它没有删除重复项。这是代码：

**更新**

```
- (void)viewDidLoad
{
    fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *weightEntity = [NSEntityDescription entityForName:@"Tracking" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:weightEntity];
    result = [self.managedObjectContext executeFetchRequest:fetchRequest error:nil];

    NSMutableArray *cleaningArray= [NSMutableArray new];
    NSSet *duplicatesRemover = [NSSet setWithArray:result];
    [duplicatesRemover enumerateObjectsUsingBlock: ^(id obj, BOOL* stop)
    {
        if(![cleaningArray containsObject: obj])
        {
            [cleaningArray addObject: obj];
        }
    }];

    cleanArray = [cleaningArray copy];

    [super viewDidLoad];

    // Do any additional setup after loading the view.
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    static NSString *CellIdentifier = @"Cell";

    mainCell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (mainCell == nil) {
        mainCell = [[dictionaryTableCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    Entity *person = [cleanArray objectAtIndex:indexPath.row];
    mainCell.nameLabel.text = person.date;

    return mainCell;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"%@", [cleanArray objectAtIndex:0]);
    return   cleanArray.count;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:50:37.113

-containsObject 比较字符串（如 [string1 isEqual:string2]）所以你可以这样做

```
NSArray* result = @[@"test",@"string",@"test",@"line"];
    NSMutableArray* cleanArray = [[NSMutableArray alloc] init];

   for (id object in result) {
        if (![cleanArray containsObject:object])
            [cleanArray addObject:object];
    }

NSLog (@"cleanArray %@",cleanArray); 
```

日志：

```
cleanArray (
    test,
    string,
    line
) 
```

*更新*
@dreamlax，我一直在和@Zack 聊天。似乎 NSSet / isEqual 问题是一个红鲱鱼。“结果”数组不包含 NSString，它包含对 Core Data 的获取请求，每个请求当然都是唯一的，即使返回的数据不是。该数组与表视图紧密耦合，表视图根据请求执行这些获取请求。

所以 Zack 需要做的就是将 Core Data 从他的 Table View 中分离出来，预先获取他想要比较的唯一性字符串，并将这个唯一的数组提供给 Table View。NSSet 可以很好地获得一组独特的结果。

```
fetchRequest = [[NSFetchRequest alloc] init]; 
NSEntityDescription *weightEntity = 
        [NSEntityDescription entityForName:@"Entity" 
                                 inManagedObjectContext:self.managedObjectContext]; 
[fetchRequest setEntity:weightEntity]; 
result = [self.managedObjectContext executeFetchRequest:fetchRequest 
                                                      error:nil]; 
NSMutableSet *dateSet = [NSMutableSet alloc] init]; 

for (id object in result) { 
    Entity *person = object; 
    NSString* dateString = person.date; 
    [dateSet addObject:dateString]; 
} 

self.dateArray = [dateSet allObjects]; 
```

然后在他的tableView中：

mainCell.nameLabel.text = [cleanArray objectAtIndex:indexPath.row];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T02:23:56.810

归功于 dreamlax，这是覆盖 isEqual: 方法的问题，这就是为什么`NSSet`不删除重复对象的原因。

在您的实体中，覆盖 isEqual 方法并在所有字段相等时返回 true，例如：

```
- (BOOL)isEqual:(id)anObject
{
    return self.attribute_1 == anObject,attribute_1 && ... && self.attribute_N== anObject.attribute_N; // Primitive types comparison in this example
} 
```

# c - 很难将二维数组传递给函数

> ID：14249478
> 
> 赞同：0
> 
> 时间：2013-01-10T01:34:43.423
> 
> 标签：c

所以我正在处理这段代码，我试图将一个二维数组传递给一个函数，如下所示：

函数签名：void f(array[4][4],int n);

```
int array [4][4];
f(&array[0][0],16)
for (int i=0;i<n;i++) // I'm working by c99 standard.
{
 hist[ *(&array[0][0] +i) ] ++ ;  // I know the max value in array[4][4] , and hist is initialized accordingly.
}
} 
```

我只是不断收到有关不兼容类型的各种错误，例如，我得到“预期 (*)[4] 但类型是 int * help ? :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:37:02.653

`&array[0][0]`是一个 int 指针。

指针不能转换为二维数组。因此，您需要像`f(array, 16)`. 基本上你正在传递一个`int*`与不兼容的`int[][4]`.

值得指出的是，这对一维数组有效（尽管它是不必要的并且可能会造成混淆）：

```
void g(int x[]) {}
int arr[4];
g(arr); //valid of course
g(&arr[0]); //also valid 
```

[这](https://stackoverflow.com/a/12813676/567864)解释了为什么它与多维数组不同。

# asp.net - 带有 sessionState 配置集的 ASP.NET 会话超时

> ID：14249481
> 
> 赞同：0
> 
> 时间：2013-01-10T01:34:55.720
> 
> 标签：asp.net

我有这条线：

```
<sessionState mode="InProc" timeout="960"/> 
```

在我的 Web.config 文件中，但会话仍然在大约 25 分钟后超时。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:42:34.077

检查应用程序池配置。假设您有 IIS7，请转到应用程序的池高级属性，然后检查 Process Model Idle Timeout 属性。

# java - ArrayList 的并发修改异常

> ID：14249482
> 
> 赞同：0
> 
> 时间：2013-01-10T01:34:59.510
> 
> 标签：java, arraylist, java.util.concurrent, concurrentmodification

我有一个问题`ConcurrentModificationException`。

我有一个我定义`ArrayList`的`Complex`类。我添加了两个`Complex`es，并尝试*为每个*循环做一个，但我得到了`ConcurrentModificationException`. 但是，当我删除该行时，我没有收到任何错误。我需要那些初始点`(1,0)`来`(-1,0)`计算我以后需要的点。

```
 for (Iterator<Complex> num = dots.iterator(); num.hasNext();) {
            // ConcurrentModificationException
            Complex aComplex = num.next();
            // clone it and clear
            temp.add(new Complex(aComplex));
            dots.clear();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:40:41.647

迭代时不能修改集合。如果你要移动dots.clear(); 和 temp.clear() 外部迭代；它会得到解决。如果需要，您可以在需要清除这些集合时创建一个标志；迭代结束后，您可以清除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T01:41:32.597

大多数迭代器实现不允许修改底层结构，除非它具有迭代器本身（`remove`方法）上定义的语义。

因此，在您在迭代结构时清除结构的所有代码部分中，您将*获得*一个`ConcurrentModificationException`.

# c - C程序目录扫描器仅适用于一个目录

> ID：14249486
> 
> 赞同：0
> 
> 时间：2013-01-10T01:35:25.267
> 
> 标签：c, file, directory, coredump

我的代码在这里假设扫描所有 .wor 文件的目录，并将每个文件中的信息提取到一个新的 .csv 文件中。
但是，它仅适用于一个目录（我正在编写此 c 程序的目录，其中包含 2 个 .wor 文件和一些文本文件）。当我尝试进入一个只有 3 个 .wor 文件的不同目录时，它给了我一条错误消息，我分配它在 file==NULL 时显示；从这一行：

```
 if (fs == NULL)
    {
        puts ("Cannot open source file");

        return 1;
    } 
```

如果我一起删除这个 if 语句，它会显示“总线错误（核心转储）”错误。

我不知道发生了什么，有什么我没有在这里做的吗？

这是我的完整代码：

```
 #include <stdio.h>
 #include <string.h>
 #include <stdlib.h>
 #include <sys/types.h>
 #include <dirent.h>
 #include <unistd.h>
 #include <errno.h>

 int main(int argc, char **argv) {

char directory[100];
char buff[100];
char delims[] = " :=";
char *result = NULL;
char *customer;
char *device;
char *testprog;
char *software;
char *dutboardid;
char *corlbox;
int i=0;
DIR * FD;
struct dirent* in_file;
int c=0;

/*printf ("Enter directory:");                                   
    scanf ("%s",directory);*/

    FILE * ft = fopen ( "workorderlist.csv", "w" ) ;    /* Open file to write to*/
    if ( ft == NULL )
    {
           puts ( "Cannot open target file" ) ;
           exit( 1 ) ;
    }

    fprintf (ft, "Work Order,Customer,Device,Test_Prog,Software,DUT_board_id,Corl box\n");

/* Open Directory*/

if (NULL == (FD = opendir ("/home/iselabs/dwang/pinscale/workorder/practice"))) 
    {

        puts ("Cannot open directory");

    return 1;
    }

    while ((in_file = readdir(FD))) 
    {

    if (!strcmp (in_file->d_name, "."))
        continue;
    if (!strcmp (in_file->d_name, ".."))    
        continue;

    /* Open files to read from  */

size_t len = strlen(in_file->d_name);
if (len >= 4 && memcmp(in_file->d_name + len - 4, ".wor", 4) == 0)   /* checks if file ends with .wor */
{

FILE * fs = fopen(in_file->d_name, "r");       /* open file to read */

    if (fs == NULL)
    {
        puts ("Cannot open source file");

        return 1;
    }

    /* Scanning each file for targeted words: */

while( fgets(buff, 100,fs) != NULL )      
{   
 result = strtok( buff, delims );          
    while(result != NULL){                   
            if((strcmp(result,"Customer")==0)){ 
        result = strtok(NULL,delims);  
        customer = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(customer, result);
        for(i=0;i<strlen(customer)+1;i++){ if(customer[i] == '\n') break; }
        customer[i] = ' ';
        }

            if((strcmp(result,"name")==0)){ 
        result = strtok(NULL,delims);  
        customer = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(customer, result);
        for(i=0;i<strlen(customer)+1;i++){ if(customer[i] == '\n') break; }
        customer[i] = ' ';
        }

            if(strcmp(result,"device")==0){ 
        result = strtok(NULL,delims);  
        device = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(device, result);
        for(i=0;i<strlen(device)+1;i++){ if(device[i] == '\n') break; } 
        device[i] = ' ';
        }

            if(strcmp(result,"test_prog")==0){ 
        result = strtok(NULL,delims);  
        testprog = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(testprog, result);
        for(i=0;i<strlen(testprog)+1;i++){ if(testprog[i] == '\n') break; } 
        testprog[i] = ' ';
        }

            if(strcmp(result,"Rev")==0 || strcmp(result,"use")==0){ 
        result = strtok(NULL,delims);  
        software = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(software, result);
        for(i=0;i<strlen(software)+1;i++){ if(software[i] == '\n') break; } 
        software[i] = ' ';
        }

        if(strcmp(result,"rev")==0){ 
        result = strtok(NULL,delims);  
        software = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(software, result);
        for(i=0;i<strlen(software)+1;i++){ if(software[i] == '\n') break; } 
        software[i] = ' ';
        }

            if(strcmp(result,"DUT_board_id")==0){ 
        result = strtok(NULL,delims);  
        dutboardid = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(dutboardid, result);
        for(i=0;i<strlen(dutboardid)+1;i++){ if(dutboardid[i] == '\n') break; } 
        dutboardid[i] = ' ';
        }                   
        else if (strcmp(result,"DUT_board_id")==1){
        corlbox = "N/A";
        }

            if(strcmp(result,"box")==0){ 
        result = strtok(NULL,delims);  
        corlbox = (char*)malloc((strlen(result)+1)*sizeof(char));
        strcpy(corlbox, result);
        for(i=0;i<strlen(corlbox)+1;i++){ if(corlbox[i] == '\n') break; } 
        corlbox[i] = ' ';
        }
        else if (strcmp(result,"box")==1){
        corlbox = "N/A";
        }           
        result = strtok(NULL,delims);
    }

}

fprintf (ft, "%s,%s,%s,%s,%s,%s,%s\n", in_file->d_name, customer, device, testprog, software, dutboardid, corlbox);

printf(in_file->d_name);
printf("\n");
fclose (fs) ;
c++;

}
}
printf("Total Workorders Found: %d \n", c);
    fclose ( ft ) ;
return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:37:38.690

您需要将目录名称与您尝试打开的文件名结合起来，或者`chdir()`在尝试打开文件之前可能会调用。

您可以`malloc`根据目录名称的组合长度、文件名、路径分隔符 ( `/`) 的额外字符和空终止符的额外字符来创建缓冲区。

然后使用`sprintf( buffer, "%s/%s", directory, filename);`获取文件的完整路径，然后尝试打开它。

在您的错误字符串中添加一个`printf`带有您尝试打开的文件的名称，以帮助调试。

# c++ - Qt 字符串问题

> ID：14249488
> 
> 赞同：1
> 
> 时间：2013-01-10T01:36:07.093
> 
> 标签：c++, string, qt

所以我制作了一个简单地制作“随机”句子的程序。它从基于使用 ctime 的种子的 7 个列表中选择一个名词和一个颜色形容词。现在我正在尝试将其转换为控制台应用程序。我的问题是我无法正确显示它。我需要将所有内容都放在一个标签上，而不是 cout。

> 错误：没有匹配函数调用 'QLabel::setText(std::string&)'

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <cstdlib>
#include <iostream>
#include <ctime>

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_newSentence_clicked()
{
    std::string noun[7] = {"cow", "tree", "marker", "cereal", "calendar", "rug", "hammer"};
    std::string color[7] = {"red", "orange", "yellow", "green", "blue", "indigo", "violet"};

    srand(time(0));
    int nounRandomizer = (rand()%5);
    int colorRandomizer = ((rand()+1)%5);

    std::string sentence = "The"+noun[nounRandomizer]+" is "+color[colorRandomizer]+".";

    ui->sentenceDisplay->setText(sentence);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T01:41:48.060

从 QLabel[参考](http://doc.qt.digia.com/qt/qlabel.html)中，setText 函数`const QString&`作为输入参数，但您传入了 std::string。您可以从 std::string 构造一个 QString 对象，然后传递给它。

例如：

```
ui->sentenceDisplay->setText(QString::fromStdString(sentence)); 
```

# jquery - Facebook API：使用 jquery 解析 FB.api 响应

> ID：14249490
> 
> 赞同：-1
> 
> 时间：2013-01-10T01:36:11.320
> 
> 标签：jquery, facebook, facebook-graph-api

以下代码正在返回`null`状态。

```
FB.api("/me/statuses", function(response){
                console.log(response); 
                var statuses = $.parseJSON(response.data[0]);
                console.log(statuses);
            }); 
```

但响应对象看起来像：

```
Object {data: Array[25], paging: Object}
data: Array[25]
0: Object
1: Object
2: Object
3: Object
4: Object
5: Object
6: Object
7: Object
8: Object
9: Object
10: Object
11: Object
12: Object
13: Object
14: Object
15: Object
16: Object
17: Object
18: Object
19: Object
20: Object
21: Object
22: Object
23: Object
24: Object 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:48:49.053

`response`不是 JSON 字符串。Facebook SDK 已经将其解析为一个对象。

因此，您`response.data`无需任何解析即可使用。

[https://developers.facebook.com/docs/reference/javascript/FB.api/](https://developers.facebook.com/docs/reference/javascript/FB.api/)

# ruby - case语句中的正则表达式中的命名组

> ID：14249498
> 
> 赞同：2
> 
> 时间：2013-01-10T01:36:37.583
> 
> 标签：ruby, regex, switch-statement

> **可能的重复：**
> [在 Ruby 的情况下使用带有正则表达式匹配的命名捕获......什么时候？](https://stackoverflow.com/questions/9642009/using-named-captures-with-regex-match-in-rubys-case-when)

我正在尝试更频繁地使用命名组（捕获具有提供名称的组），以使我的代码更具可读性。

我正在尝试找出如何为`case`声明做到这一点：

```
date_field = "Wk 9"
date = case date_field
when /^Wk (?<weeks>\d+)$/ then 7 * Integer(weeks)
else raise "Unexpected date_field #{date_field.inspect}"
end 
```

给我

```
NameError: undefined local variable or method `weeks' for main:Object 
```

不像

```
date_field = "Wk 9"
/^Wk (?<weeks>\d+)$/ =~ date_field
date = 7 * Integer(weeks)
date # => 63 
```

有没有办法从案例陈述中做一个命名组？

我能找到的最相似的问题：[如何使用正则表达式和反向引用编写 Ruby switch 语句（case...when）？](https://stackoverflow.com/questions/6803647/how-to-write-a-ruby-switch-statement-case-when-with-regex-and-backreferences)，但接受的答案只谈论使用`$1`to `$9`。

# algorithm - 计算通过网格的哈密顿路径数量的最佳方法是什么？

> ID：14249499
> 
> 赞同：1
> 
> 时间：2013-01-10T01:36:41.850
> 
> 标签：algorithm, combinatorics

所以我试图解决一个关于计算通过网格的路径数的问题。问题或多或少如下：

> 给定一个 x x y 维度的矩形网格，计算从左上角到左下角恰好访问每个顶点一次的路径数

我试过蛮力解决这个问题，但它似乎是 O(n!) 并且在大尺寸时非常慢。

我当前的方法从左上角的节点开始，递归地检查每个尚未访问的相邻节点，将其保存到 backPath 列表。如果函数到达终点并且每个节点都已被访问，它会将 backPath 添加到解决方案列表中以计算路径的总数。

然而，这是非常缓慢的。我知道有改进算法的动态方法，（包括[这里](http://www.cs.cornell.edu/~wdtseng/icpc/notes/dp1.pdf "这里")的一篇文章）但对动态编程/记忆不太熟悉，我无法弄清楚如何实现改进。到目前为止，我所做的唯一改进是防止函数在访问所有其他节点之前遍历完成节点，这只会将运行时间减少约 40%。我没有 DP 方面的经验，到目前为止，我还不能真正有效地将教程应用于我的问题。

**编辑我**[在这里](https://stackoverflow.com/questions/14248317/what-is-a-better-algorithm-for-finding-routes-that-traverse-all-vertices-in-a-gr)问了一个类似的问题，答案让我更好地了解了我真正在寻找什么信息，但我仍然坚持如何将 DP / 其他运行时间减少方法应用于这个特定问题。

谢谢您的帮助。

# prolog - 为什么 gprolog 需要这么多内存？

> ID：14249501
> 
> 赞同：1
> 
> 时间：2013-01-10T01:36:48.333
> 
> 标签：prolog, gnu-prolog

以下来自 top 命令：

```
 size  res 
1127 ***       1  20    0   117M  2196K ttyin   0   0:00  0.00% gprolog

1149 ***       1  23    0 10700K  3728K ttyin   0   0:00  0.00% swipl 
```

它的 RES 是合理的，但它的大小与 swipl 相比太大了。

操作系统是freebsd 9.0。

真挚地！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T11:11:22.910

在您的 ps/top-listing 中有两个数字：分配的虚拟内存（大小）和实际使用的物理内存（res）。由此看来，GNU Prolog 最初使用的内存比 SWI 少。即：GNU 为 2196K，SWI 为 3728K。

但是你不能仅从这些数字得出任何相关的结论。您唯一可以说的是，具有顶层的默认环境需要大量内存才能启动 - 前提是您没有使用另一个程序“分页”进程......

两个系统都试图将内存消耗保持在较低水平，但水平不同：

[GNU Prolog](http://www.gprolog.org/)为跳过未使用的内置谓词的独立可执行文件提供编译。可执行代码的处理方式与 C 类似：因此它以只读方式映射到物理内存中。如果您运行此类可执行文件的多个实例，它们都将为可执行文件共享相同的物理内存。

不利的一面是，GNU Prolog 缺乏垃圾收集。对于堆（copystack）和原子（可符号化）。为了避免溢出处理，内存区域被大量分配。但这只是对虚拟内存的保留。据我所知，所有当前的 Unix 变体都会过度使用虚拟内存，因此这不会占用相应的交换空间。

另一方面，[SWI-Prolog将其 Prolog 代码分配在可写内存中。](http://www.swi-prolog.org/)此外，在 GC 期间内存被“触及”（标记/未标记）。因此，Prolog 程序不能在不同的 SWI 实例之间共享，即使[像 mergemem 这样的动态重新共享也不行](http://www.complang.tuwien.ac.at/ulrich/mergemem/)。也就是说，mergemem（或类似的）可以页面共享它，但在下一次 db-GC 时，它是写时复制不共享的。请参阅链接如何共享可以减少 SICStus 的内存消耗。但是 SWI 具有多线程支持，这在一定程度上促进了共享。

SWI 拥有最好和最完整的堆和原子垃圾收集器之一。

因此，您的里程可能会有所不同。毫无疑问，最好的系统将结合两者的优点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T08:46:04.943

`gprolog`映射所有堆栈（其大小通过环境变量控制）。默认值为`16MB for the trail`，约束和本地堆栈`+ 32MB for the heap`。还有原子表（也通过环境变量控制）。在大多数情况下，默认值很高。注意：由于这是虚拟内存（通过 mmap），因此仅在需要时才进行物理分配。所以分配大量内存并不是真正的问题（但是交换应该足以满足最大所需的内存）。无论如何，您可以重新定义它们（例如，如果您不使用 FD 求解器，您可以将 CSTRSZ env var 设置为 0）。

**SWI Prolog 在需要时动态地增加（并且我想减少）其内部堆栈的大小。所以在开始时需要很少的内存。**

# wordpress - Wordpress 获取分类 Wordpress 的术语

> ID：14249503
> 
> 赞同：0
> 
> 时间：2013-01-10T01:36:56.100
> 
> 标签：wordpress, taxonomy

我有两个分类法，我需要建立一个基于另一个分类法的术语列表。

分类 1 - Auto_Brand

分类 2 - 城市

我知道我可以使用`$terms = get_terms("auto_brands"); or $terms = get_terms("city");,`，但是我如何构建代码以仅在该城市附加了 auto_brand 的情况下获取该城市？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:23:53.003

分类法不直接与其他分类法交互。它们仅与 Post 对象交互并封装。我能想到的唯一方法是使用 WP_Query 运行分类查询来收集所有使用 BOTH 分类的帖子，然后遍历每个帖子以构建一组独特的术语：

```
$args = array(
    'post_type' => 'post',
    'tax_query' => array(
        'relation' => 'AND',
        array('taxonomy' => 'auto_brand'),
        array('taxonomy' => 'city')
    )
);
$q = new WP_Query($args); //Get the posts

$found_terms = array(); //Initialize Empty Array
$taxonomies = array('auto_brand', 'city'); //Taxonomies we're checking
$args = array('fields'=>'names'); //Get only the names
foreach($q->posts as $t_post) //Begin looping through all found posts
{
    $post_terms = wp_get_post_terms($t_post->ID, $taxonomies, $args);
    $found_terms = array_merge($found_terms, $post_terms); //Build Terms array
}
$unique_terms = array_unique($found_terms); //Filter duplicates 
```

这是未经测试的，但它应该让您朝着正确的方向开始。

# javascript - 我如何在 Node.js (JavaScript) 中等待？l 需要暂停一段时间

> ID：14249506
> 
> 赞同：589
> 
> 时间：2013-01-10T01:37:22.923
> 
> 标签：javascript, node.js, async-await, yield

我正在为个人需求开发一个控制台脚本。我需要能够暂停很长时间，但是，根据我的研究，Node.js 无法按要求停止。一段时间后，阅读用户的信息变得越来越困难......我已经看到了一些代码，但我相信他们必须在其中包含其他代码才能工作，例如：

```
 setTimeout(function() {
    }, 3000); 
```

但是，我需要这行代码之后的所有内容才能在一段时间后执行。

例如，

```
 // start of code
    console.log('Welcome to my console,');

    some-wait-code-here-for-ten-seconds...

    console.log('Blah blah blah blah extra-blah');
    // end of code 
```

我也见过类似的东西

```
 yield sleep(2000); 
```

但是 Node.js 不承认这一点。

我怎样才能实现这种延长的暂停？

* * *

## 回答 #1

> 赞同：756
> 
> 时间：2017-01-31T12:05:14.897

**2021 年 1 月更新**：您甚至可以在 Node REPL 交互式使用`--experimental-repl-await`标志中进行操作

```
$ node --experimental-repl-await
> const delay = ms => new Promise(resolve => setTimeout(resolve, ms))
> await delay(1000) /// waiting 1 second. 
```

老问题的新答案。今天（~~2017~~年 1月，2019 年 6 月）要容易得多。您可以使用[新`async/await`语法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function)。例如：

```
async function init() {
  console.log(1);
  await sleep(1000);
  console.log(2);
}

function sleep(ms) {
  return new Promise((resolve) => {
    setTimeout(resolve, ms);
  });
} 
```

~~要在不安装和插件的情况下使用`async/await`开箱即用，您必须使用 node-v7 或 node-v8，使用`--harmony`标志。~~

**2019 年 6 月更新：**通过使用最新版本的 NodeJS，您可以立即使用它。无需提供命令行参数。今天甚至谷歌浏览器也支持它。

**2020 年 5 月更新：** 很快您将能够在`await`异步函数之外使用语法。在这个例子中的顶层

```
await sleep(1000)
function sleep(ms) {
  return new Promise((resolve) => {
    setTimeout(resolve, ms);
  });
} 
```

[该提案处于第 3 阶段](https://github.com/tc39/proposal-top-level-await)。您现在可以通过使用 webpack 5 (alpha) 来使用它，

**更多信息：**

*   Nodejs 中的 Harmony 标志：[https ://nodejs.org/en/docs/es6/](https://nodejs.org/en/docs/es6/)
*   所有 NodeJS 版本供下载：[https ://nodejs.org/en/download/releases/](https://nodejs.org/en/download/releases/)

* * *

## 回答 #2

> 赞同：519
> 
> 时间：2018-03-06T20:47:32.153

没有任何依赖关系的最短解决方案：

```
await new Promise(resolve => setTimeout(resolve, 5000)); 
```

* * *

## 回答 #3

> 赞同：249
> 
> 时间：2013-01-10T01:46:21.703

最好的方法是将代码分解为多个函数，如下所示：

```
function function1() {
    // stuff you want to happen right away
    console.log('Welcome to My Console,');
}

function function2() {
    // all the stuff you want to happen after that pause
    console.log('Blah blah blah blah extra-blah');
}

// call the first chunk of code right away
function1();

// call the rest of the code and have it execute after 3 seconds
setTimeout(function2, 3000); 
```

它类似于**JohnnyHK**的解决方案，但更整洁且更易于扩展。

* * *

## 回答 #4

> 赞同：183
> 
> 时间：2016-06-01T17:51:08.363

这是一个简单的阻塞技术：

```
var waitTill = new Date(new Date().getTime() + seconds * 1000);
while(waitTill > new Date()){} 
```

只要您的脚本中不会发生任何其他事情（如回调），它就会被*阻止。*但由于这是一个控制台脚本，也许它就是你所需要的！

* * *

## 回答 #5

> 赞同：159
> 
> 时间：2013-01-10T01:44:53.520

将延迟后要执行的代码放入`setTimeout`回调中：

```
console.log('Welcome to My Console,');
setTimeout(function() {
    console.log('Blah blah blah blah extra-blah');
}, 3000); 
```

* * *

## 回答 #6

> 赞同：98
> 
> 时间：2017-01-13T18:56:36.873

## 在节点 7.6.0 或更高版本上

Node原生支持等待：

```
const sleep = (waitTimeInMs) => new Promise(resolve => setTimeout(resolve, waitTimeInMs)); 
```

那么如果你可以使用异步函数：

```
await sleep(10000); // sleep for 10 seconds 
```

或者：

```
sleep(10000).then(() => {
  // This will execute 10 seconds from now
}); 
```

## 在较旧的节点版本上（原始答案）

我想要一个在 Windows 和 Linux 中工作的异步睡眠，而不需要长时间循环占用我的 CPU。我尝试了 sleep 包，但它不会安装在我的 Windows 机器上。我最终使用：

[https://www.npmjs.com/package/system-sleep](https://www.npmjs.com/package/system-sleep)

要安装它，请键入：

```
npm install system-sleep 
```

在您的代码中，

```
var sleep = require('system-sleep');
sleep(10*1000); // sleep for 10 seconds 
```

奇迹般有效。

* * *

## 回答 #7

> 赞同：69
> 
> 时间：2017-10-13T00:14:29.037

# 使用现代 Javascript 的简单优雅的睡眠功能

```
function sleep(millis) {
    return new Promise(resolve => setTimeout(resolve, millis));
} 
```

没有依赖，没有回调地狱；就是这样 ：-）

* * *

考虑到问题中给出的示例，这就是我们在两个控制台日志之间休眠的方式：

```
async function main() {
    console.log("Foo");
    await sleep(2000);
    console.log("Bar");
}

main(); 
```

“缺点”是您的主要功能现在也必须`async`如此。但是，考虑到您已经在编写现代 Javascript 代码，您可能（或至少应该！）在您的代码中使用`async`/ `await`，所以这真的不是问题。今天所有的现代浏览器都[支持](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function#Browser_compatibility)它。

`sleep`为那些不习惯和胖箭头运算符的人提供一些功能`async/await`，这是编写它的冗长方式：

```
function sleep(millis) {
    return new Promise(function (resolve, reject) {
        setTimeout(function () { resolve(); }, millis);
    });
} 
```

但是，使用胖箭头运算符可以使其更小（并且更优雅）。

* * *

## 回答 #8

> 赞同：52
> 
> 时间：2016-04-22T17:40:54.683

你可以使用这个[www.npmjs.com/package/sleep](https://www.npmjs.com/package/sleep)

```
var sleep = require('sleep');
sleep.sleep(10); // sleep for ten seconds 
```

* * *

## 回答 #9

> 赞同：37
> 
> 时间：2017-10-24T00:38:40.510

如果您想“编码高尔夫”，您可以在此处制作其他一些答案的较短版本：

```
const sleep = ms => new Promise(resolve => setTimeout(resolve, ms)); 
```

但在我看来，真正理想的答案是使用 Node 的`util`库及其`promisify`函数，它就是为这类事情而设计的（制作以前存在的非基于 Promise 的东西的基于 Promise 的版本）：

```
const util = require('util');
const sleep = util.promisify(setTimeout); 
```

在任何一种情况下，您都可以通过使用`await`来调用您的`sleep`函数来暂停：

```
await sleep(1000); // sleep for 1s/1000ms 
```

**编辑：**如评论中所述，您甚至可以将其减少到一行：

```
const sleep = require('util').promisify(setTimeout); 
```

或者，如果您甚至不想费心制作`sleep`函数：

```
await require('util').promisify(setTimeout)(1000); 
```

* * *

## 回答 #10

> 赞同：36
> 
> 时间：2013-08-21T14:11:27.147

这个问题很老了，但最近 V8 添加了可以完成 OP 要求的生成器。[在诸如suspend](https://github.com/jmar777/suspend)或[gen-run](https://github.com/creationix/gen-run)之类的库的帮助下，生成器通常最容易用于异步交互。

下面是一个使用挂起的例子：

```
suspend(function* () {
    console.log('Welcome to My Console,');
    yield setTimeout(suspend.resume(), 10000); // 10 seconds pass..
    console.log('Blah blah blah blah extra-blah');
})(); 
```

相关阅读（通过无耻的自我宣传）：[发电机有什么大不了的？](http://devsmash.com/blog/whats-the-big-deal-with-generators).

* * *

## 回答 #11

> 赞同：22
> 
> 时间：2016-11-18T18:50:04.200

在 Linux/nodejs 上，这对我有用：

> const spawnSync = require('child_process').spawnSync;
> 
> var sleep = spawnSync('sleep', [1.5]);

它正在阻塞，但它不是一个繁忙的等待循环。

您指定的时间以秒为单位，但可以是一小部分。我不知道其他操作系统是否有类似的命令。

* * *

## 回答 #12

> 赞同：14
> 
> 时间：2013-09-06T13:58:46.873

我最近创建了一个更简单的抽象，称为**wait.for**以在同步模式下调用异步函数（基于节点光纤）。还有一个基于即将推出的 ES6 生成器的版本。

[https://github.com/luciotato/waitfor](https://github.com/luciotato/waitfor)

使用**wait.for**，您可以调用任何标准的 nodejs 异步函数，就好像它是一个同步函数一样，而不会阻塞节点的事件循环。

您可以在需要时按顺序编码，这（我猜）非常适合简化您的脚本以供个人使用。

使用**wait.for**您的代码将是：

```
require('waitfor')

..in a fiber..
//start-of-code
console.log('Welcome to My Console,');
wait.miliseconds(10*1000); //defined in waitfor/paralell-tests.js - DOES NOT BLOCK
console.log('Blah blah blah blah extra-blah');
//endcode. 
```

此外，任何异步函数都可以在*同步*模式下调用。检查示例。

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2013-01-10T11:22:37.633

由于javascript引擎（v8）基于事件队列中的事件序列运行代码，因此没有严格的javascript在指定时间后准确触发执行。也就是说，当您设置几秒钟以稍后执行代码时，触发代码纯粹基于事件队列中的顺序。因此触发代码执行可能需要超过指定时间。

所以 Node.js 紧随其后，

```
process.nextTick() 
```

稍后运行代码而不是 setTimeout()。例如，

```
process.nextTick(function(){
    console.log("This will be printed later");
}); 
```

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2021-06-10T08:15:54.223

尝试使用 Promise，它在 NodeJS 中对我有用

一个班轮

```
await new Promise(resolve => setTimeout(resolve, 5000)); 
```

或将其作为`NodeJS`重复使用的功能

```
const sleep = async (milliseconds) => {
    await new Promise(resolve => setTimeout(resolve, milliseconds));
} 
```

使用类似的功能

```
await sleep(5000) 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-05-18T00:34:15.630

有了 ES6 支持`Promise`，我们可以在没有任何第三方帮助的情况下使用它们。

```
const sleep = (seconds) => {
    return new Promise((resolve, reject) => {
        setTimeout(resolve, (seconds * 1000));
    });
};

// We are not using `reject` anywhere, but it is good to
// stick to standard signature. 
```

然后像这样使用它：

```
const waitThenDo(howLong, doWhat) => {
    return sleep(howLong).then(doWhat);
}; 
```

请注意，该`doWhat`函数`resolve`成为`new Promise(...)`.

另请注意，这是异步睡眠。它不会阻塞事件循环。如果您需要阻塞睡眠，请使用此库，该库借助 C++ 绑定实现阻塞睡眠。（尽管在 Node 等异步环境中需要阻塞睡眠的情况很少见。）

[https://github.com/erikdubbelboer/node-sleep](https://github.com/erikdubbelboer/node-sleep)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-10-31T21:40:43.733

为了在javascript中“等待”，使用promise是最佳答案所示的方法。

那么如何使用呢？

下面是一个简单的例子，一个 5 秒的子进程以非阻塞的方式为一个 4 秒的主进程排队参数。

```
const wait = (seconds) => 
    new Promise(resolve => 
        setTimeout(() => 
            resolve(true), seconds * 1000))

const process = async (items, prepTask, mainTask) => {
    const queue = [];
    let done = false;

    items.forEach((item, i) => {
        prepTask(item).then(() => {
            queue.push(item);
            if (i == items.length -1) {
                done = true;
            }
        })
    })

    while (!done || queue.length) {
        if (queue.length) {
            const workload = queue.shift();
            await mainTask(workload)
        } else {
            console.log('waiting for subtask to queue')
            await wait(1);
        }
    }
}

// Usage Example

const ids = [1,2,3,4,5,6,7,8,9,10];

const prepTask = async (id) => {
    await wait(id * 5)
    return id * 5;
}

const mainTask = async (workload) => {
    console.log('excuting workload: ', workload);
    const result = await wait(4);
    return { workload, result }
}

process(ids, prepTask, mainTask)
    .then(() => console.log('done')) 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-03-08T09:58:52.340

```
let co = require('co');
const sleep = ms => new Promise(res => setTimeout(res, ms));

co(function*() {
    console.log('Welcome to My Console,');
    yield sleep(3000);
    console.log('Blah blah blah blah extra-blah');
}); 
```

上面这段代码是解决 Javascript 的异步回调地狱问题的副作用。这也是我认为 Javascript 成为后端有用语言的原因。实际上，在我看来，这是引入现代 Javascript 的最令人兴奋的改进。要完全理解它是如何工作的，需要完全理解生成器是如何工作的。`function`后跟 a的关键字`*`在现代 Javascript 中称为生成器函数。npm 包`co`提供了一个运行生成器的运行器函数。

本质上，生成器函数提供了一种使用`yield`关键字暂停函数执行的方法，同时，`yield`在生成器函数中，可以在生成器内部和调用者之间交换信息。这为调用者提供了一种机制，可以从异步调用中提取数据`promise`并将解析的数据传递回生成器。实际上，它使异步调用同步。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-11-08T14:11:34.580

这是一个moment.js 风格的模块，基于[@atlex2 建议的脏阻塞方法](https://stackoverflow.com/a/37575602/1889273)。*仅用于测试*。

```
const moment = require('moment');

let sleep = (secondsToSleep = 1) => {
    let sleepUntill = moment().add(secondsToSleep, 'seconds');
    while(moment().isBefore(sleepUntill)) { /* block the process */ }
}

module.exports = sleep; 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2017-03-22T14:54:04.667

很简单，我们将等待 5 秒以等待某个事件发生（这将由代码中其他地方的 done 变量设置为 true 来指示）或者当超时到期时，我们将每 100 毫秒检查一次

```
 var timeout=5000; //will wait for 5 seconds or untildone
    var scope = this; //bind this to scope variable
    (function() {
        if (timeout<=0 || scope.done) //timeout expired or done
        {
            scope.callback();//some function to call after we are done
        }
        else
        {
            setTimeout(arguments.callee,100) //call itself again until done
            timeout -= 100;
        }
    })(); 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2017-04-13T18:49:13.730

对于某些人来说，接受的答案不起作用，我找到了另一个答案，它对我有用：[如何将参数传递给 setTimeout() 回调？](https://stackoverflow.com/questions/1190642/how-can-i-pass-a-parameter-to-a-settimeout-callback)

```
var hello = "Hello World";
setTimeout(alert, 1000, hello); 
```

'hello' 是被传递的参数，你可以在超时时间之后传递所有的参数。感谢@Fabio Phms 的回答。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2020-06-24T16:26:53.627

```
function doThen(conditional,then,timer) {
    var timer = timer || 1;
    var interval = setInterval(function(){
        if(conditional()) {
            clearInterval(interval);
            then();
        }
    }, timer);
} 
```

示例用法：

```
var counter = 1;
doThen(
    function() {
        counter++;
        return counter == 1000;
    },
    function() {
        console.log("Counter hit 1000"); // 1000 repeats later
    }
) 
```

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2016-11-29T09:19:15.423

如果您只是出于测试目的而需要暂停当前线程执行，请尝试以下操作：

```
function longExecFunc(callback, count) {

    for (var j = 0; j < count; j++) {
        for (var i = 1; i < (1 << 30); i++) {
            var q = Math.sqrt(1 << 30);
        }
    }
    callback();
}
longExecFunc(() => { console.log('done!')}, 5); //5, 6 ... whatever. Higher -- longer 
```

* * *

## 回答 #23

> 赞同：-3
> 
> 时间：2017-03-13T21:11:57.753

其他答案很好，但我想我会采取不同的策略。

如果您真正想要的是减慢 linux 中的特定文件：

```
 rm slowfile; mkfifo slowfile; perl -e 'select STDOUT; $| = 1; while(<>) {print $_; sleep(1) if (($ii++ % 5) == 0); }' myfile > slowfile  & 
```

节点 myprog 慢文件

这将每五行休眠 1 秒。节点程序将与编写器一样慢。如果它正在做其他事情，它们将继续以正常速度。

mkfifo 创建一个先进先出的管道。这就是使这项工作发挥作用的原因。perl 行将根据您的需要快速写入。$|=1 表示不缓冲输出。

* * *

## 回答 #24

> 赞同：-4
> 
> 时间：2016-11-06T08:08:38.153

在阅读了这个问题的答案后，我整理了一个简单的函数，如果你需要，它也可以进行回调：

```
function waitFor(ms, cb) {
  var waitTill = new Date(new Date().getTime() + ms);
  while(waitTill > new Date()){};
  if (cb) {
    cb()
  } else {
   return true
  }
} 
```

* * *

## 回答 #25

> 赞同：-5
> 
> 时间：2016-09-09T09:24:46.753

有关更多信息

```
yield sleep(2000); 
```

你应该检查[Redux-Saga](https://github.com/yelouafi/redux-saga "Redux-Saga")。但它特定于您选择 Redux 作为您的模型框架（尽管严格来说不是必需的）。

# java - 如何扫描自定义注释的类？

> ID：14249509
> 
> 赞同：0
> 
> 时间：2013-01-10T01:37:46.513
> 
> 标签：java, annotations

我有我的自定义注释，我想在运行时扫描所有类以查找此注释。做这个的最好方式是什么？我没有使用弹簧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T02:03:32.200

您可以使用[反射库](http://code.google.com/p/reflections/)首先确定类名，然后使用`getAnnotations`检查注释：

```
Reflections reflections = new Reflections("org.package.foo");

Set<Class<? extends Object>> allClasses = 
                 reflections.getSubTypesOf(Object.class);

for (Class clazz : allClasses) {
   Annotation[] annotations = clazz.getAnnotations();

   for (Annotation annotation : annotations) {
     if (annotation instanceof MyAnnotation) {
        MyAnnotation myAnnotation = (MyAnnotation) annotation;
        System.out.println("value: " + myAnnotation.value());
     }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:03:54.663

`getClass().getAnnotations()`如果您不想循环遍历先前的结果，您可能会使用或要求特定注释从类中获取注释。为了使注释出现在结果中，它的保留时间必须是 RUNTIME。例如（不完全正确）：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface MyAnnotation {} 
```

检查 Javadoc：[Class#getAnnotation(Class)](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getAnnotation%28java.lang.Class%29)

之后，您的课程应该像这样注释：

```
@MyAnnotation public class MyClass {} 
```

# ember.js - 强制控制器始终充当 Ember 中模型的代理

> ID：14249513
> 
> 赞同：2
> 
> 时间：2013-01-10T01:38:13.930
> 
> 标签：ember.js, ember-data

我正在循环一个 ArrayController 的内容，其内容设置为 RecordArray。每条记录都是 DS.Model，比如 Client

```
{{# each item in controller}}
{{item.balance}}
{{/each}} 
```

balance 是 Client 模型的属性，调用 item.balance 将直接从模型中获取属性。我想应用一些格式来平衡以货币格式显示。实现此目的的简单方法是将计算属性 balanceMoney 添加到 Client 对象并在那里进行格式化：

```
App.Client = DS.Model({
 balance: DS.attr('balance'),

 balanceMoney: function() {
   // format the balance property
   return Money.format(this.get('balance');
 }.property('balance')
}); 
```

这很好地达到了目的，但 balanceMoney 计算属性的正确位置是客户端控制器而不是客户端模型。我的印象是，Ember 首先在控制器中查找属性，然后如果没有找到，则尝试在模型中检索它们。但是，这一切都不会发生，对 item.balanceMoney 的调用将被忽略并且永远不会到达控制器。

是否可以以某种方式配置控制器以在所有情况下始终充当模型的代理。

更新 - 使用 emberjs 主存储库中的最新版本，您可以配置数组控制器以通过控制器代理解析记录的方法，方法是覆盖 ArrayController 中的 lookupItemController 方法。该方法应返回不带“控制器”后缀的控制器名称，即客户端而不是客户端控制器。仅`itemControllerClass`在数组控制器中设置属性目前似乎不起作用。

```
lookupItemController: function( object ) {
        return 'client';
    }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T05:18:21.523

这是最近添加到主：[https ://github.com/emberjs/ember.js/commit/2a75cacc30c8d02acc83094b47ae8a6900c0975b](https://github.com/emberjs/ember.js/commit/2a75cacc30c8d02acc83094b47ae8a6900c0975b)

在撰写本文时，它还没有出现在任何已发布的版本中。它很可能是 1.0.0.pre.3 的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T12:26:10.243

如果您只是在格式化之后，另一种可能性是制作车把助手。例如，您可以实现自己的 {{formatMoney item.balance}} 助手。

对于更一般的东西，我做了这个来包装一个`sprintf`实现（从几个中选择一个）：

```
Ember.Handlebars.registerHelper('sprintf', function (/*arbitrary number of arguments*/) {
    var options = arguments[arguments.length - 1],
        fmtStr = arguments[0],
        params = Array.prototype.slice.call(arguments, 1, -1);

    for (var i = 0; i < params.length; i++) {
        params[i] = this.get(params[i]);
    }

    return vsprintf(fmtStr, params);
}); 
```

然后你可以做`{{sprintf "$%.2f" item.balance}}`。

但是，@luke-melia 提供的解决方案将更加灵活——例如让您在控制器中*计算*余额，而不是简单地格式化单个值。

**编辑：**

我应该提到一个警告，因为它并不明显：上述解决方案不会创建*绑定的*车把助手，因此不会反映对基础模型值的更改。应该有一个`registerBoundHelper`已经提交给 Ember.js 来解决这个问题，但这也还没有发布。

# regex - 正则表达式匹配问题

> ID：14249515
> 
> 赞同：0
> 
> 时间：2013-01-10T01:38:24.833
> 
> 标签：regex

我有一个具有以下格式的字符串

some_string = ",,,xxx,,,xxx,,,xxx,,,xxx,,,xxx,,,xxx,,," 这是一个名为 f 的文本文件的内容

我想在 xxx 中搜索特定术语（假设该术语是“硅”）

请注意，xxx 可以全部不同，并且可以包含任何特殊字符（包括元字符），但换行符除外

```
match = re.findall(r",{3}(.*?silicon.*?),{3}", f.read())
print match 
```

但这似乎不起作用，因为它返回的结果格式为： ["xxx,,,xxx,,,xxx,,,xxx,,,silicon", "xxx,,,xxx,,,xxx, ,,xxsiliconxx"] 但我只希望它返回 ["silicon", "xxsiliconxx"]

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:46:47.047

尝试以下正则表达式：

```
(?<=,{3})(?:(?!,{3}).)*?silicon.*?(?=,{3}) 
```

例子：

```
>>> s = ',,,xxx,,,silicon,,,xxx,,,xxsiliconxx,,,xxx'
>>> re.findall(r'(?<=,{3})(?:(?!,{3}).)*?silicon.*?(?=,{3})', s)
['silicon', 'xxsiliconxx'] 
```

我假设中的内容`xxx`可以包含逗号，而不是三个连续的逗号，否则它将结束该字段。如果部分中的内容`xxx`不能包含任何逗号，则可以使用以下内容：

```
(?<=,{3})[^,\r\n]*?silicon.*?(?=,{3}) 
```

您当前的方法不起作用的原因是，即使`.*?`尝试匹配尽可能少的字符，匹配仍然会尽早开始。因此，例如，正则表达式`a*?b`将匹配整个字符串`"aaaab"`。正则表达式唯一一次会提前开始位置是当正则表达式无法匹配时，并且由于`,,,`可以通过 匹配，因此`.*?`您的匹配将始终从字符串的开头或在上一个匹配之后开始。

lookbehind 和 lookahead 用于解决 JaredC 在评论中提出的问题，基本上`re.findall()`不会返回重叠匹配，因此您需要前导和尾随`,,,`不是匹配的一部分。

# c# - 用c#连接mysql

> ID：14249520
> 
> 赞同：0
> 
> 时间：2013-01-10T01:39:29.440
> 
> 标签：c#, mysql

我正在构建 ac# windows 应用程序，它将与远程服务器中的 mysql 数据库连接。

我正在使用以下连接脚本

```
string connectionString;
connectionString = "SERVER = eu5.org;UID = myuserid; PASSWORD = mypassword; DATABASE = mydatabasename;";
connection = new MySqlConnection(connectionString); 
```

它显示错误无法连接到数据库。

PS：Mysql数据库在eu5.org服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:03:43.167

就我个人而言，我更喜欢使用[MySql Workbench](http://www.mysql.com/products/workbench/) IDE 来测试连接并在可能的情况下直接工作（查询）数据库。我使用过的大多数托管数据库通常将服务器定义为 Instance.[DomainName] 所以我希望您的服务器 URL 类似于 MySql1.eu5.org

下面是我使用[MySql Connector](http://www.mysql.com/downloads/connector/net/)测试的连接字符串，更改参数。

```
<connectionStrings>
    <add name="MySqlConnection" connectionString="server=INSTANCENAME.DOMAINNAME.COM;UID=USERNAME;password=PASSWORD;database=DATABASENAME;Persist Security Info=True;" providerName="MySql.Data.MySqlClient"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:08:23.423

只需阅读常见问题解答：

> 许多人只想使用数据库，但他们的网站托管在其他地方。我们为我们托管的网站提供免费数据库。因此，外部访问无一例外地被阻止。

--> [http://www.freewebhostingarea.com/faq.html](http://www.freewebhostingarea.com/faq.html)

因此无法从外部来源访问您的 MySQL-DB。只允许本地主机

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T01:47:43.167

你的代码是正确的。使用 MySQL 浏览器，例如[http://mysql-query-browser-for-windows.apponic.com/](http://mysql-query-browser-for-windows.apponic.com/)检查您的数据库是否可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T01:42:08.030

确保您的服务器应该已启动...

# uiscrollview - UICollectionView 水平连续循环

> ID：14249525
> 
> 赞同：9
> 
> 时间：2013-01-10T01:40:20.457
> 
> 标签：uiscrollview, ios6, scroll, uicollectionview, uicollectionviewcell

所以我有一个 UICollectionView，每个单元格都有自定义 UIViews。UIView 占据了整个屏幕，您可以水平导航到 4 个不同的 UIView/单元格中的每一个。这一切都很好，并使用寻呼机来指示您在 collectionview 的哪个页面上。

我环顾了谷歌等，看看是否可以在您导航通过最后一个单元格后让它循环回到开头。例如：

我从第 3 个单元格开始，导航到第 4 个单元格，然后当我向右滑动时，它将返回第一个单元格（寻呼机将反映您在第一页上）并从那里继续。

这很容易做到吗？还是我错过了什么？

谢谢，杰克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T02:13:42.120

您只需要 3 个 UIView 来保存当前视图左侧的图像、当前视图右侧的图像以及当前屏幕上的中间视图。

假设我们有 UIImages ABCD 和 UIViews 1 2 和 3

我们正在查看视图 2，图像 B。左页将带我们到图像 A，右页将带我们到图像 C。

当您向左/向右滑动页面时，视图 3 成为带有图像 C 的屏幕视图。当分页停止时，您交换视图内容，因此用户实际上再次查看中间的 UIView2，带有图像 C。视图 1 具有图像B，视图 3 有图像 D。

再次向右滚动，然后进行同样的随机播放。现在你有

```
View 1 -> image C
View 2 -> image D
View 3 -> image A 
```

下一页右

```
View 1 -> image D
View 2 -> image A
View 3 -> image B 
```

以此类推，在任一方向上无止境

2011 年有一个关于这个主题的精彩 WWDC 视频。它值得挖掘。[这是 UIScrollView 演示视频](http://bit.ly/wwdc2011ScrollView)（[文档为 PDF](http://bit.ly/wwdc2011ScrollViewPdf)）您不需要集合视图来执行此操作，尽管没有理由不应该...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T01:44:59.967

准备好迎接这种热度了吗？

因此，在我的主视图控制器的 viewDidLoad 中，我确定了要加载到数组中 uicollectionview 单元格中的视图：

```
NSArray *vcs = [@"view5", @"view1", @"view2", @"view3", @"view4", @"view5", @"view1"] 
```

我还将我们的 pagecontrol 计数设置为：

```
self.pageControl.numberOfPages = vcs.count - 2; // for the fake first and last cells 
```

然后我在主视图控制器的 viewDidLoad 中实例化视图控制器，并将 collectionview 的 alpha 设置为 0。然后在我们的 scrollViewDidEndDecelerating 中我处理轮播（从最后一个单元格到第一个单元格，从第一个单元格到最后一个）并更新 pageControl 以反映“真实”的页码。

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    // Snaps into the cell    
    CGFloat pageWidth = scrollView.frame.size.width;
    float fractionalPage = scrollView.contentOffset.x / pageWidth;
    NSInteger page = lround(fractionalPage);

    self.pageControl.currentPage = page - 1; // because our first cell is the last cell for animation purposes only

    // Carousel from first to last and last to first while updating pagecontrol
    if (page == 0) {
        [self.collectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForRow:self.activeGaugeClusters.count - 2 inSection:0]
                                    atScrollPosition:UICollectionViewScrollPositionLeft
                                            animated:NO];
        // Set our pagecontrol circles to the appropriate page indicator        
        self.pageControl.currentPage = self.activeGaugeClusters.count - 2;

    } else if (page == self.activeGaugeClusters.count -1) {
        [self.collectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForRow:1 inSection:0]
                                    atScrollPosition:UICollectionViewScrollPositionLeft
                                            animated:NO];
        self.pageControl.currentPage = 0;
    }
} 
```

然后在 collectionview 实现中，我执行以下操作：

```
numberOfItemsInSection = vcs.count 
```

和 viewDidAppear 用于加载第一个单元格（无论是 indexPath.row == 1 或 2 或 3 处的单元格...（1 是第一个真实页面而不是 0）

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self.collectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForRow:self.lastGaugePanel inSection:0]
                                atScrollPosition:UICollectionViewScrollPositionLeft
                                        animated:NO];
    self.pageControl.currentPage = self.lastGaugePanel - 1;
    [UIView animateWithDuration:0.5 animations:^{
        self.collectionView.alpha = 1.0;
    }];
} 
```

我想大概总结一下。主 vc 和 collectionview 的其余实现都是标准的。所以现在我有一个集合视图，可以加载其他视图和它们的 VC，每个视图都有自己的动画或其他内容。我将 indexPath.row 保存到 NSUserDefaults 以便我离开时所在的单元格是下一次加载时显示的第一个单元格。

希望这对某人有所帮助，我知道它对我有用，不幸的是，不鼓励使用 3rd 方库，所以我不得不建立这个坏男孩（在@He Was 的帮助下，再次感谢！）

# c# - 可以在 MVC 控制器名称中使用“控制器”吗

> ID：14249535
> 
> 赞同：1
> 
> 时间：2013-01-10T01:41:23.120
> 
> 标签：c#, model-view-controller, controller, naming-conventions

因为MVC中的所有Controller都是以“Controller”为后缀的，我的控制器命名为LocalControllerController可以吗？

这会藐视或违反任何 MVC 命名规则吗？

在 @Url.Action("Index", "LocalController") 这样的助手中调用我的控制器“LocalController”会引起任何问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:55:42.557

从技术角度来说应该没问题。

从我的角度来看，具有此类名称的代码的可读性是有问题的和令人困惑的，但它是主观的，您需要自己决定。

# java - 定义具有 void 返回类型的方法是一种好的设计实践吗？

> ID：14249540
> 
> 赞同：1
> 
> 时间：2013-01-10T01:42:06.560
> 
> 标签：java

所以我有一个这样的功能：

```
public void doSomeWork(List<Item> items){
    //modify the items
    return;
} 
```

返回 void 是一个好的设计，还是只返回列表更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T01:50:24.583

查看 JDK 本身。你看到返回的方法了`void`吗？（我愿意。）

您的选择与正确或正确的错误观念无关。这是关于您是否希望允许副作用。

您可以通过以下两种方式之一编写该方法：

```
public void doSomeWork(List<Item> items){
    // You can't modify the items reference, but you can modify the List that it points to by adding or removing Items.
} 
```

这具有修改通过它的列表的副作用。如果客户不知道，这可能会给他们带来不愉快的惊喜。

第二种方式意味着传入一个 List 并返回修改后的版本：

```
public List<Item> doSomeWork(List<Item> items){
    List<Item> modified = new ArrayList<Item>(items);
    // modify the returned List
    return modified;
} 
```

这样对客户来说并没有什么意外：传入的 List 保持不变。这是一种更实用的风格。它也很“流畅”。但它是以更多内存为代价的，因为您分配了一个新列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T01:43:33.150

当然。如果没有什么可返回，则返回类型为`void`. 您也不需要明确的`return;`声明。只是让执行从函数的底部掉下来。

```
public void doSomeWork(List<Item> items){
    //modify the items
} 
```

问题归结为你是否有一个有意义的返回值。不这样做完全没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T01:44:14.600

如果不返回任何东西在语义上是有意义的，那么不返回任何东西是完全可以的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T01:45:52.353

即使它是无效的，如果您需要在某些时候退出方法，您可以使用 return;。否则不需要这样做。

```
public void doSomeWork(List<Item> items){
   if(some condition){
   return;
   }
    // Do my work
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T01:51:46.787

有时方法不需要返回值。它的所有工作都只是在内部完成，没有任何迹象表明真的需要出去。

这是一种很好的设计实践，尤其是具有诸如设置器和`init()`方法之类的功能。这些都不需要向调用它的人返回值以指示任何内容。

# javascript - 在 Intelli-j idea 中扩展 javascript 'class' 的最佳方法

> ID：14249547
> 
> 赞同：2
> 
> 时间：2013-01-10T01:42:31.730
> 
> 标签：javascript, intellij-idea

用于扩展 javascript“类”（注意引号）的最佳方法是什么，以便 Intell-J IDEA 知道该对象有父对象，并为父方法提供更好的完成支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:55:32.567

Intellij 了解某些继承样式（Ext-JS、Prototype...），因此如果它支持您的库，您无需执行任何操作。万无一失（哈哈）的方法是添加JSDoc

```
/**
 * @class MyBase
 */
function MyBase() {}
MyBase.prototype.do = function() {};

/**
 * @class MySub
 * @extends MyBase
 */
function MySub() {}
MySub.prototype.doMore = function() {}; 
```

但是，我已经向他们提交了很多错误，这通常是错误的，并且似乎可以与不同的版本一起工作和中断。如果它在某些情况下对您不起作用，您应该提交一个错误。

这张截图告诉你 Intellij 确实理解 MySub 继承自 MyBase（见左边的（o）？它是说 do 方法被覆盖了）

![在此处输入图像描述](../Images/0dedb81f10918e45a4b17fe8cb190893.png)

# javascript - 一页中有许多切换幻灯片元素

> ID：14249551
> 
> 赞同：2
> 
> 时间：2013-01-10T01:42:54.960
> 
> 标签：javascript, jquery

我多次使用这个脚本来隐藏一些文本：

```
$(document).ready(function(){
  $("#button_to_click_to_toggle").click(function(){
    $("#hidden_div").slideToggle("medium");
  });
}); 
```

我想让它不可能一次切换两个隐藏的 div。

**例子：**

单击一个按钮 (#button1) = 显示与该按钮关联的隐藏 div (#div1)。

单击另一个按钮 (#button2) = 显示与该按钮关联的 div (#div2)，同时 #div1 关闭（滑动关闭）。

单击另一个按钮 (#button3) = 显示与该按钮关联的 div (#div3)，同时 #div2 关闭（滑动关闭）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:54:57.500

`.button`为所有按钮和`.div`所有 div添加一个类。那么这只是一个问题：

```
$(".button").on('click', function () {
  var id = this.id.replace('button', '');

  //properly toggle visibility of selected div
  if ($("#div" + id).is(":visible")) {
     $("#div" + id).slideUp();
  }
  else {
    $("#div" + id).slideDown();
  }
   //hide all divs except the selected one
   $(".div").not("#div" + id).slideUp();
}); 
```

[http://jsfiddle.net/6Lhxm/](http://jsfiddle.net/6Lhxm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:03:12.563

也可以在点击时隐藏所有 div，然后只显示相关的一个：

javascript:

```
$(document).ready(function () {
  $("button").click(function () {
    $("div").hide();
    $(this).next().show();
  });
}); 
```

html:

```
<button type="button">one</button>
<div id="one">one</div>
<button type="button">two</button>
<div id="two">two</div>
<button type="button">three</button>
<div id="three">three</div> 
```

[http://jsfiddle.net/x7Ehq/](http://jsfiddle.net/x7Ehq/)

# intellisense - Intellisense - 使用除向上/向下箭头之外的其他键迭代列表

> ID：14249553
> 
> 赞同：2
> 
> 时间：2013-01-10T01:43:11.733
> 
> 标签：intellisense

我想知道是否可以在 VS 2012 中自定义 IntelliSense 的行为。如果可以的话，我还安装了 Resharper。我的愿望是尽量减少我的手在核心键上的移动量。通常，当 IntelliSense 出现时，我开始输入并将列表缩小到 3-4 个项目。然后我需要将右手移到向下箭头键上。我想知道是否可以使用 Space 键循环浏览 3-4 个项目的短列表，然后按 Enter 或 ; 选择我想要的值。我总是可以继续输入我想要的项目，但有时需要 6 次以上的击键，因为名称相似。无论如何只是想知道，因为我认为这将提高速度。

# c++ - setsockopt 参数 SO_RCVTIMEO 中的阻塞是什么意思

> ID：14249557
> 
> 赞同：1
> 
> 时间：2013-01-10T01:43:36.863
> 
> 标签：c++, setsockopt

当我从 msdn[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740476%28v=vs.85%29.aspx)查看 setsockopt 时。我遇到了一个参数 SO_RCVTIMEO，它的描述是“*设置超时，以毫秒为单位，用于阻止接收调用。* ”我认为套接字侦听操作是事件驱动的，这意味着当内核从 NIC 卡中耗尽帧时，它会通知我的程序套接字，所以呢阻塞是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T02:02:42.197

recv 和 WSARecv 函数是阻塞的。它们不是事件驱动的（至少不是在调用级别）。即使阻塞有超时（通过`SO_RECTIMEO`选项设置），就您的代码而言，它们不是事件驱动的。在这种情况下，它们只是伪阻塞（可以说是非阻塞，具体取决于超时时间有多短）。

当您调用 WSARecv 时，它会等到准备好读取数据。虽然数据尚未准备好读取，但它只是等待。这就是为什么它被认为是阻塞的。

* * *

你说得对，网络的核心是事件驱动的。在引擎盖下，计算机本质上是事件驱动的。这是硬件的工作方式。硬件中断本质上是事件。你是对的，在低级别发生的事情是你的 NIC 卡告诉操作系统它已经准备好被读取。在那个级别上，它确实是基于事件的。

问题是 WSARecv 等待该事件。

* * *

这是一个希望清楚的类比。想象一下，由于某种原因你不能离开你的房子。现在想象你的朋友 F 住在隔壁。此外，假设您的另一个朋友 G 在您家。

现在想象一下，你给 G 一张纸，上面有一个问题，让他把它拿给 F。

发送问题后，假设您发送 G 去获取 F 的回复。这就像 recv 调用。G 会等到 F 写下他的回答，然后他会把它带给你。如果 F 还没有写，G 不会立即转身回来。

这就是差距的来源。G确实知道“F写了！” 事件，但你不是。你不是直接看那张纸。

设置超时意味着你告诉 G 在放弃和回来之前最多等待一段时间。在这种情况下，G 仍在等待 F 写入，但如果 F 在几毫秒内没有写入`x`，G 就会转身空手而归。

基本上recv的伪代码大致如下：

```
1) is data available?
  1a) Yes: read it and return
  1b) No: GOTO 2
2) Wait until an event is received
  2a) GOTO 1 
```

* * *

我知道这是一个非常复杂的解释，但我的主要观点是：recv 与事件交互，而不是你的代码。recv 阻塞，直到收到这些事件之一。如果设置了超时，它会阻塞直到收到这些事件之一，*或者*达到超时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T02:03:08.707

默认情况下，套接字不是事件驱动的。您必须编写额外的代码来启用它。相反，套接字最初是在阻塞模式下创建的。这意味着默认情况下，对`send()`、`recv()`或`accept()`的调用将无限期地阻塞调用线程，直到请求的操作完成。

对于`recv()`，这意味着调用线程被阻塞，直到至少有 1 个字节可从套接字的接收缓冲区读取，或者直到发生套接字错误，以先发生者为准。 `SO_RCVTIMEO`允许您在阻塞读取上设置超时，因此如果在超时过去之前没有可用的传入数据，则会`recv()`以`WSAETIMEDOUT`错误退出。

实现超时的另一种方法是将套接字设置为非阻塞模式，然后通过`ioctlsocket(FIONBIO)`超时`select()`调用，然后调用`recv()`或`accept()`仅在`select()`报告套接字处于可读状态时调用，并且`send()`仅当`select()`报告套接字处于可写状态。但这需要更多代码来管理套接字进入阻塞状态的情况，从而导致操作失败并`WSAEWOULDBLOCK`出现错误。

# django - 将参数从客户端数据表发送到 django 服务器代码

> ID：14249558
> 
> 赞同：1
> 
> 时间：2013-01-10T01:43:38.817
> 
> 标签：django, datatable

我正在使用插件数据表和 django。

我有在 urls.py 中查看 ajax_table 的 url：

```
url(r'^someurl/$', 'someapp.views.ajax_table', name='ajax_table'), 
```

这样我就可以从我的数据表中调用函数 ajax_table。

```
var datatable = $("#my_table").dataTable({
    "bJQueryUI" : true,
    "bProcessing":true,
    "bServerSide": true,
    "sAjaxSource": "{% url ajax_table %}",
    "sPaginationType": "custompagination"
}; 
```

它工作正常。

但是当我尝试将一些参数从客户端发送到服务器代码时：

```
"sAjaxSource": "{% url ajax_table %}?param=some_number" 
```

我无法在服务器端获取此参数（打印“无参数”）：

```
def ajax_table(request):
    print 'param: %s' % request.GET.get('param','no param') 
```

如何正确发送参数到服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:07:45.783

这不是 django 问题（就 django 而言，您在这里做的是正确的事情），这是一个数据表问题。您不能将参数直接添加到`sAjaxSource`参数中，您必须使用数据表 API 来完成。

以下[文档](http://www.datatables.net/examples/server_side/custom_vars.html)描述了如何以参数的形式向服务器发送额外的数据。

# bluetooth - 我可以直接通过蓝牙发送 arduino 程序吗？

> ID：14249561
> 
> 赞同：6
> 
> 时间：2013-01-10T01:43:59.680
> 
> 标签：bluetooth, arduino

我很想通过蓝牙上传我的 arduino 草图，但我不知道从哪里开始。这是我正在进行的一个更大项目的一部分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T04:13:41.687

是的，这很容易做到。看到[这个帖子](https://web.archive.org/web/20150914170240/http://letsmakerobots.com/node/30915)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-30T16:13:16.180

这是我写的详细操作指南，其中包括 Windows 的说明和更简单的电路，用于将 HC-05 与常见的分线板一起使用（强烈建议将模块放在分线板上）：​<a href="http:/ /makezine.com/projects/diy-arduino-bluetooth-programming-shield/" rel="nofollow">http://makezine.com/projects/diy-arduino-bluetooth-programming-shield/

# regex - 查找字符串中字符的位置

> ID：14249562
> 
> 赞同：92
> 
> 时间：2013-01-10T01:44:07.747
> 
> 标签：regex, string, r

我想在字符串中找到一个字符的位置。

说：`string = "the2quickbrownfoxeswere2tired"`

我希望函数返回`4`-中s`24`的字符位置。`2``string`

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-01-10T01:47:44.947

您可以使用`gregexpr`

```
 gregexpr(pattern ='2',"the2quickbrownfoxeswere2tired")

[[1]]
[1]  4 24
attr(,"match.length")
[1] 1 1
attr(,"useBytes")
[1] TRUE 
```

或者可能`str_locate_all`来自`stringr`作为包装器的包（从1.0 版开始）~~`gregexpr`~~ `stringi::stri_locate_all``stringr`

```
library(stringr)
str_locate_all(pattern ='2', "the2quickbrownfoxeswere2tired")

[[1]]
     start end
[1,]     4   4
[2,]    24  24 
```

请注意，您可以简单地使用`stringi`

```
library(stringi)
stri_locate_all(pattern = '2', "the2quickbrownfoxeswere2tired", fixed = TRUE) 
```

基地的另一个选择`R`是

```
lapply(strsplit(x, ''), function(x) which(x == '2')) 
```

应该工作（给定一个字符向量`x`）

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-10-06T23:16:50.203

这是另一个简单的选择。

```
> which(strsplit(string, "")[[1]]=="2")
[1]  4 24 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-09-27T03:32:39.257

您可以使用 unlist 将输出设为 4 和 24：

```
unlist(gregexpr(pattern ='2',"the2quickbrownfoxeswere2tired"))
[1]  4 24 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-08T02:35:59.233

在str1中找到str2第n次出现的位置（参数顺序与Oracle SQL INSTR相同），如果没有找到返回0

```
instr <- function(str1,str2,startpos=1,n=1){
    aa=unlist(strsplit(substring(str1,startpos),str2))
    if(length(aa) < n+1 ) return(0);
    return(sum(nchar(aa[1:n])) + startpos+(n-1)*nchar(str2) )
}

instr('xxabcdefabdddfabx','ab')
[1] 3
instr('xxabcdefabdddfabx','ab',1,3)
[1] 15
instr('xxabcdefabdddfabx','xx',2,1)
[1] 0 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-12T09:08:31.143

要仅查找第**一个**位置，请使用`lapply()`with `min()`：

```
my_string <- c("test1", "test1test1", "test1test1test1")

unlist(lapply(gregexpr(pattern = '1', my_string), min))
#> [1] 5 5 5

# or the readable tidyverse form
my_string %>%
  gregexpr(pattern = '1') %>%
  lapply(min) %>%
  unlist()
#> [1] 5 5 5 
```

要仅查找**最后**的位置，请使用`lapply()`with `max()`：

```
unlist(lapply(gregexpr(pattern = '1', my_string), max))
#> [1]  5 10 15

# or the readable tidyverse form
my_string %>%
  gregexpr(pattern = '1') %>%
  lapply(max) %>%
  unlist()
#> [1]  5 10 15 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-03T18:50:21.733

你也可以使用`grep`：

```
grep('2', strsplit(string, '')[[1]])
#4 24 
```

# arrays - 字符串元胞数组到matlab结构

> ID：14249564
> 
> 赞同：3
> 
> 时间：2013-01-10T01:44:15.173
> 
> 标签：arrays, matlab, struct, cell

我需要创建一个 matlab 结构，`ds=struct('name',{{'my_name_is'},{'matlab_thining_hair'}})`它存储为一个 1x2 结构数组，其中包含字段：名称。调用 ds.name 生成输出：

> > ds.name
> > 
> > ans = '我的名字'
> > 
> > ans = 'matlab_thinging_hair'

请注意输出中的单引号。它们很重要。也就是说，我需要使用以下变量创建上述结构： X = [1x46 char] [1x47 char] 即 1x2 单元格，我认为这实际上是一个字符串单元格数组。除其他外，我尝试了以下方法：

`Y = cell2struct(X, 'name', 1)'`

这会产生一个具有字段名称的 1x2 结构数组，但是对 Y 的调用会生成输出：

> > Y.name
> > 
> > ans = my_name_is
> > 
> > ans = matlab_thinging_hair

请注意，输出中缺少单引号，尽管 Y 和 ds 都是具有字段名称的 1x2 结构数组，但字段值的格式不同，并且结构的字节大小也不同。如何将字段值格式化为字符数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:58:09.297

在调用 cell2struct 之前，将您的 char 字符串粘贴到另一层单元格中。代替：

```
X = { 'foo', 'bar' } 
```

尝试：

```
X = { {'foo'}, {'bar'} } 
```

也就是说，一个 1×2 单元格，其单元格内容本身就是单元格，而不是字符。然后`cell2struct(X, 'name', 1)`应该给你一个带有单元格数组字段的结构数组。

如果您现有的 X 是一个 cellstr，我认为您可以调用`num2cell`它来将每个单元格向下推入另一层单元格间接层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T02:34:27.437

在第一种情况下，您创建了一个结构，其中包含两个字段，其值为元胞数组。元胞数组以引号显示。

在第二种情况下，您的结构字段具有您想要的 char 数组。字符数组不带引号显示。

您可以通过输入命令提示符 {'abc'} 然后输入 'abc' 来验证这一点。

在第一种情况下，您可以通过在单元格括号外传递字符串来创建非单元格数组字段值。

ds=struct('name',{'my_name_is','matlab_thinging_hair'})

# java - 禁用或拦截窗口外的拖放

> ID：14249566
> 
> 赞同：3
> 
> 时间：2013-01-10T01:44:28.080
> 
> 标签：java, swing, drag-and-drop, awt, jtabbedpane

我已经按照这个例子的形式实现了一组可拖动的选项卡： [如何使用 Java Swing 实现可拖动的选项卡？](https://stackoverflow.com/questions/60269/how-to-implement-draggable-tab-using-java-swing)

一切似乎都按我的意愿工作，但是，当我拖动到主面板之外时，桌面将成为有效的放置目标（结果放置被接受并标记为成功）。

有没有办法拦截这个下降以对我们的根窗格之外的下降做出反应？检测起来很简单，但我不清楚如何在外界之前实际捕捉到下降。

在调用 DragSourceListener 的 dragDropEnd 时，拖放已经执行，并且似乎没有一个好的方法来结束在 dragOver/Exit/Whatever 中的拖动。

哎呀，如果这样的工作会很好：

```
@Override
public void dragOver(DragSourceDragEvent dragEvent)
{
    DragEnabledTabTransferData data = getTabTransferData(dragEvent);
    DragSourceContext dragSourceContext = dragEvent.getDragSourceContext();
    if (data == null)
    {
        dragSourceContext.setCursor(DragSource.DefaultMoveNoDrop);
        return;
    }
    if (!data.getTabbedPane().getRootPane().getBounds().contains(dragEvent.getLocation()))
    {
        dragSourceContext.dragDropEnd(new DragSourceDropEvent(dragSourceContext, 999, true));
    }
} 
```

相反，阻力继续拖动。我有，但是为我的麻烦找了一个 DragDropEnd。

有任何想法吗？听到唯一的解决方案是让一些隐藏的最大化全局窗格仅充当捕获窗口外事件的放置目标，我会感到非常难过。

这是一个工作示例。如果您将选项卡拖到 Linux 中的桌面，它会尝试将传输数据转换为 Serializable 并且不高兴。如果您想直接跳到我上面指出的内容，我正在玩的拖拽评论为“这是我假设我们能够拦截东西的地方”。

```
/** "Simple" example of DnD tabbed panes. Sourced from Eugene Yokota:
 * http:stackoverflow.com/questions/60269/how-to-implement-draggable-tab-using-java-swing */
import java.awt.*;
import java.awt.datatransfer.*;
import java.awt.dnd.*;
import javax.swing.*;

public class DnDTabbedPane extends JTabbedPane {
    private static final String NAME = "TabTransferData";
    private final DataFlavor FLAVOR = new DataFlavor(DataFlavor.javaJVMLocalObjectMimeType, NAME);

    public DnDTabbedPane() {
        super();
        final DragSourceListener dsl = new DragSourceListener() {
            public void dragEnter(DragSourceDragEvent e) {
                e.getDragSourceContext().setCursor(DragSource.DefaultMoveDrop);
            }

            public void dragExit(DragSourceEvent e) {
                e.getDragSourceContext().setCursor(DragSource.DefaultMoveNoDrop);
            }

            /**
             * This is where I'd assume we'd be able to intercept stuff 
             * so drops don't happen where we don't want them to.
             */
            public void dragOver(DragSourceDragEvent e) {
                TabTransferData data = getTabTransferData(e);
                if (data == null) {
                    e.getDragSourceContext().setCursor(DragSource.DefaultMoveNoDrop);
                    return;
                }
                //This is where I ended up robokilling the drag via hackery
                e.getDragSourceContext().setCursor(DragSource.DefaultMoveDrop);
            }
            public void dragDropEnd(DragSourceDropEvent e) {}
            public void dropActionChanged(DragSourceDragEvent e) {}
        };

        final DragGestureListener dgl = new DragGestureListener() {
            public void dragGestureRecognized(DragGestureEvent e) {

                Point tabPt = e.getDragOrigin();
                int dragTabIndex = indexAtLocation(tabPt.x, tabPt.y);
                if (dragTabIndex < 0) {
                    return;
                }
                e.startDrag(DragSource.DefaultMoveDrop,new TabTransferable(DnDTabbedPane.this, dragTabIndex), dsl);
            }
        };

        new DropTarget(this, DnDConstants.ACTION_COPY_OR_MOVE, new CDropTargetListener(), true);
        new DragSource().createDefaultDragGestureRecognizer(this, DnDConstants.ACTION_COPY_OR_MOVE, dgl);
    }

    private TabTransferData getTabTransferData(DropTargetDropEvent a_event) {       
        try {
            return (TabTransferData) a_event.getTransferable().getTransferData(FLAVOR);             
        } catch (Exception e) {}

        return null;
    }

    private TabTransferData getTabTransferData(DropTargetDragEvent a_event) {
        try {
            return  (TabTransferData) a_event.getTransferable().getTransferData(FLAVOR);                
        } catch (Exception e) {}

        return null;
    }

    private TabTransferData getTabTransferData(DragSourceDragEvent a_event) {
        try {
            return (TabTransferData) a_event.getDragSourceContext().getTransferable().getTransferData(FLAVOR);              
        } catch (Exception e) {}

        return null;        
    }

    class TabTransferable implements Transferable {
        private TabTransferData m_data = null;
        private DataFlavor[] flavors = {FLAVOR};
        public TabTransferable(DnDTabbedPane a_tabbedPane, int a_tabIndex) {
            m_data = new TabTransferData(DnDTabbedPane.this, a_tabIndex);
        }

        public Object getTransferData(DataFlavor flavor) {
            return m_data;
        }

        public DataFlavor[] getTransferDataFlavors() {
            return flavors;
        }

        public boolean isDataFlavorSupported(DataFlavor flavor) {
            return flavor.getHumanPresentableName().equals(NAME);
        }       
    }

    class TabTransferData {
        DnDTabbedPane m_tabbedPane = null;
        int m_tabIndex = -1;

        public TabTransferData(DnDTabbedPane a_tabbedPane, int a_tabIndex) {
            m_tabbedPane = a_tabbedPane;
            m_tabIndex = a_tabIndex;
        }
    }

    class CDropTargetListener implements DropTargetListener {
        public void dragEnter(DropTargetDragEvent e) {
            if (isDragAcceptable(e)) {
                e.acceptDrag(e.getDropAction());
            } else {
                e.rejectDrag();
            }
        }

        public void drop(DropTargetDropEvent a_event) {
            if (isDropAcceptable(a_event)) {
                convertTab(getTabTransferData(a_event),
                getTargetTabIndex(a_event.getLocation()));
                a_event.dropComplete(true);
            } else {
                a_event.dropComplete(false);
            }
        }

        private boolean isTransferableGood(Transferable t, DataFlavor flavor)
        {
            return t == null || t.isDataFlavorSupported(flavor);
        }

        private boolean isDataGood(TabTransferData data)
        {
            if (DnDTabbedPane.this == data.m_tabbedPane && data.m_tabIndex >= 0) {
                return true;
            }
            return false;
        }

        public boolean isDragAcceptable(DropTargetDragEvent e) {
            Transferable t = e.getTransferable();
            if (!isTransferableGood(t, e.getCurrentDataFlavors()[0])) {
                return false;
            }
            return isDataGood(getTabTransferData(e));
        }

        public boolean isDropAcceptable(DropTargetDropEvent e) {
            Transferable t = e.getTransferable();
            if (!isTransferableGood(t, e.getCurrentDataFlavors()[0])) {
                return false;
            }
            return isDataGood(getTabTransferData(e));
        }

        public void dragExit(DropTargetEvent e) {}
        public void dropActionChanged(DropTargetDragEvent e) {}
        public void dragOver(final DropTargetDragEvent e) {}
    }

    private int getTargetTabIndex(Point a_point) {
        for (int i = 0; i < getTabCount(); i++) {
            Rectangle r = getBoundsAt(i);
            r.setRect(r.x - r.width / 2, r.y, r.width, r.height);
            if (r.contains(a_point)) {
                return i;
            }  
        }
        return -1;
    }

    private void convertTab(TabTransferData a_data, int a_targetIndex) {
        DnDTabbedPane source = a_data.m_tabbedPane;
        int sourceIndex = a_data.m_tabIndex;
        if (sourceIndex < 0) {
            return;
        }  

        Component cmp = source.getComponentAt(sourceIndex);
        String str = source.getTitleAt(sourceIndex);

        if (a_targetIndex < 0 || sourceIndex == a_targetIndex) {
            return;
        } 
        source.remove(sourceIndex);
        if (a_targetIndex == getTabCount()) {
            addTab(str, cmp);
        } else if (sourceIndex > a_targetIndex) {
            insertTab(str, null, cmp, null, a_targetIndex);
        } else {
            insertTab(str, null, cmp, null, a_targetIndex - 1);
        }
    }

    public static void main(String[] args)
    {
        JFrame window = new JFrame();
        DnDTabbedPane tabbedPane = new DnDTabbedPane();
        for(int i=0; i< 5; i++)
        {
            tabbedPane.addTab("I'm tab "+i, new JLabel("I'm tab "+i));
        }
        window.add(tabbedPane);
        window.setSize(400, 200);
        window.setVisible(true);
    }
} 
```

到目前为止，我能做的最好的事情就是在我们跳出父母时调用这种效果。

```
 Component rootPane = SwingUtilities.getRoot(component);
    Rectangle bounds = rootPane.getBounds();
    if (!bounds.contains(location))
    {
        Robot robot = null;
        try
        {
            robot = new Robot();
        } catch (AWTException e)
        {
            return;
        }
        robot.keyPress(KeyEvent.VK_ESCAPE);
        robot.keyRelease(KeyEvent.VK_ESCAPE);
    } 
```

这是一个彻底的黑客，并没有解决我的问题。我想拦截最终的 drop 事件，看看它是否在框架之外并在它自己的 JFrame 中生成选项卡。

如果我使用的是 NetBeans、MyDoggy 或 Eclipse 框架，我想这一切都会为我神奇地处理。唉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:17:52.393

没有办法直接取消拖动。见[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4502185](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4502185)

我希望通过更改光标向用户显示不允许在桌面上放置。

您的 DragSourceListener`dsl`在 dragOver 方法中有一个 DragSourceDragEvent ，它告诉您目标操作在桌面上是 NONE。

改成这样：

```
public void dragOver(DragSourceDragEvent e) {

    TabTransferData data = getTabTransferData(e);

    if( data == null || e.getTargetActions() == DnDConstants.ACTION_NONE ) {
        e.getDragSourceContext().setCursor( DragSource.DefaultMoveNoDrop );
        return;
    }

    e.getDragSourceContext().setCursor( DragSource.DefaultMoveDrop);
} 
```

如果你真的想取消，那么你必须使用你的 ESC 解决方案或类似的东西：

```
 try {
        new Robot().mouseRelease( InputEvent.BUTTON1_MASK ); // if Button1 was the only Button to start a Drag
    } catch( AWTException e1 ) {
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T19:26:59.197

正如@oliholz 所证实的那样，没有办法做到这一点，而不必通过击键强制取消。

但是，出于创建可撕下选项卡的需要，我发现创建一个浮动窗格，它本身就是一个放置目标侦听器，感觉像是最干净的解决方案：

```
package com.amish.whatever;

import java.awt.MouseInfo;
import java.awt.Point;
import java.awt.dnd.DnDConstants;
import java.awt.dnd.DropTarget;
import java.awt.dnd.DropTargetDragEvent;
import java.awt.dnd.DropTargetDropEvent;
import java.awt.dnd.DropTargetEvent;
import java.awt.dnd.DropTargetListener;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JLabel;
import javax.swing.JWindow;
import javax.swing.Timer;

public class TearAwayTab extends JWindow {
    MousePoller mousePoller = new MousePoller();
    public TearAwayTab() {
        this.add(new JLabel("FLONT"));
        this.pack();
        new DropTarget(this, DnDConstants.ACTION_COPY_OR_MOVE, new EasyDropTarget(), true);
        this.setVisible(false);
    }

    private void center(Point location)
    {
        Point center = new Point();
        center.setLocation(location.x-this.getWidth()/2, location.y-this.getHeight()/2);
        TearAwayTab.this.setLocation(center);
    }

    public void attach(Point location)
    {
        center(location);
        mousePoller.start();
        this.setVisible(true);
    }

    public void detach()
    {
        mousePoller.stop();
        this.setVisible(false);
    }

    private int DELAY = 10;
    private class MousePoller extends Timer{
        public MousePoller(){
            super(DELAY, new ActionListener() {
                private Point lastPoint = MouseInfo.getPointerInfo().getLocation();
                @Override
                public void actionPerformed(ActionEvent e) {
                    Point point = MouseInfo.getPointerInfo().getLocation();

                    if (!point.equals(lastPoint)) {
                        center(point);
                    }

                    lastPoint = point;
                }
            });
        }
    }

    private class EasyDropTarget implements DropTargetListener
    {

        @Override
        public void dragEnter(DropTargetDragEvent dtde) {
            dtde.acceptDrag(dtde.getDropAction());
        }

        @Override
        public void dragOver(DropTargetDragEvent dtde) {}

        @Override
        public void dropActionChanged(DropTargetDragEvent dtde) {}

        @Override
        public void dragExit(DropTargetEvent dte) {}

        @Override
        public void drop(DropTargetDropEvent dtde) {
            dtde.dropComplete(true);
            detach();
            System.out.println("DROP Intercepted");
        }
    }
} 
```

带有 MousePoller 的位可以解决鼠标太快地擦洗鼠标侦听器无法可靠地更新位置的问题。我尝试过使用运动监听器，并且能够很容易地逃离漂浮物的界限。

回到第一个示例，我现在将撕开选项卡包含为选项卡式窗格的私有成员，并在退出或进入我的放置区域时调用附加和分离：

```
 final DragSourceListener dsl = new DragSourceListener() {
            public void dragEnter(DragSourceDragEvent e) {
                e.getDragSourceContext().setCursor(DragSource.DefaultMoveDrop);
                Rectangle bounds = SwingUtilities.getRoot(DnDTabbedPane.this).getBounds();

                if(bounds.contains(e.getLocation())){
                    tearTab.detach(); 
                }
            }

            public void dragExit(DragSourceEvent e) {
                e.getDragSourceContext().setCursor(DragSource.DefaultMoveNoDrop);
                tearTab.attach(e.getLocation());
            }
            ... 
```

这还有一个额外的好处，那就是在拖出然后重新进入的情况下保留 DnD 操作。

感谢您的输入。如果您有任何其他想法/意见，我会全力以赴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T19:00:31.487

这与选项卡没有直接关系，但阻止拖动到桌面的一种方法是将拖动的任何内容包装在自定义包装器类中。然后，当您制作 TransferHandler 时，制作一个 DataFlavor localFlavor = new ActivationDataFlavor(YourWrapperClass.class, DataFlavor.javaJVMLocalObjectMimeType, "description"); 接下来，重写 createTransferable 方法以拥有 new DataHandler(passedInComponent, localFlavor.getMimeType()); 并返回一个新的 Transferable，您在其中重写了所有方法以仅具有您的 localFlavor。最后，在 importData 方法中，确保将数据导入为 localFlavor 类型。这将防止拖到 deaktop，因为您定义的风味是 JVM 本地的。

# c# - Lidgren 网络，无法连接

> ID：14249567
> 
> 赞同：5
> 
> 时间：2013-01-10T01:44:35.257
> 
> 标签：c#, networking

在我的 lindgren 网络测试中，我无法让我的客户端连接到我的服务器。我尝试了多种连接方式，但是当我尝试连接时它总是停止。对不起，如果这是一个广泛的问题，但我做错了什么？这是我的代码：

```
class Program
{
    static NetPeerConfiguration serverconfig;
    static NetPeerConfiguration clientconfig;
    static NetServer server;
    static NetClient client;

    static void Main()
    {
        Console.Title = "LidgrenNetworkTest";
        Console.ForegroundColor = ConsoleColor.Yellow;
        Console.WriteLine("LidgrenNetworkTest console initialized.");
        Console.ForegroundColor = ConsoleColor.Gray;
        Console.Write("Color codes: ");
        Console.ForegroundColor = ConsoleColor.Yellow;
        Console.Write("System ");
        Console.ForegroundColor = ConsoleColor.Gray;
        Console.Write("Input ");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Write("Sent ");
        Console.ForegroundColor = ConsoleColor.Cyan;
        Console.Write("Received");
        Console.ForegroundColor = ConsoleColor.Yellow;
        Console.WriteLine("\n");

        Console.WriteLine("Configuring server...");
        serverconfig = new NetPeerConfiguration("LidgrenNetworkTest");
        serverconfig.EnableMessageType(NetIncomingMessageType.ConnectionApproval);
        serverconfig.EnableMessageType(NetIncomingMessageType.DiscoveryRequest);
        serverconfig.LocalAddress = NetUtility.Resolve("localhost");
        serverconfig.Port = 8080;
        Console.WriteLine("Server configured.");

        Console.WriteLine("Configuring client...");
        clientconfig = new NetPeerConfiguration("LidgrenNetworkTest");
        clientconfig.EnableMessageType(NetIncomingMessageType.DiscoveryResponse);
        Console.WriteLine("Client configured.");

        Console.WriteLine("Initializing server...");
        server = new NetServer(serverconfig);
        server.Start();
        Console.WriteLine("Server initialized.");

        Console.WriteLine("Initializing client...");
        client = new NetClient(clientconfig);
        client.Start();
        Console.WriteLine("Client initialized.");

        Thread serverthread = new Thread(StartServer);
        serverthread.Start();

        StartClient();

        Console.ForegroundColor = ConsoleColor.Yellow;
        Console.WriteLine("Connecting client to server...");
        //client.Connect(new IPEndPoint(NetUtility.Resolve("localhost"), 8080));
        client.DiscoverLocalPeers(8080);

        AcceptConsoleInput();
    }

    static void StartServer()
    {
        NetIncomingMessage message;

        while ((message = server.ReadMessage()) != null)
        {
            switch (message.MessageType)
            {
                case NetIncomingMessageType.DiscoveryRequest:
                    Console.ForegroundColor = ConsoleColor.Cyan;
                    Console.WriteLine("(Server) Got request from client.");
                    NetOutgoingMessage response = server.CreateMessage();
                    response.Write((byte)1); // Do I need to do this?
                    server.SendDiscoveryResponse(response, message.SenderEndPoint);
                    break;
                case NetIncomingMessageType.ConnectionApproval:
                    Console.ForegroundColor = ConsoleColor.Cyan;
                    Console.WriteLine("(Server) Connection accepted.");
                    message.SenderConnection.Approve();
                    break;
                case NetIncomingMessageType.DebugMessage:
                    Console.ForegroundColor = ConsoleColor.Cyan;
                    Console.WriteLine("(Server) Debug: " + message.ReadString());
                    break;
                default:
                    Console.ForegroundColor = ConsoleColor.Cyan;
                    Console.WriteLine("(Server) Unrecognized message type! (" + message.MessageType + ")");
                    break;
            }
            server.Recycle(message);
        }
    }

    static void StartClient()
    {
        NetIncomingMessage message;

        while ((message = server.ReadMessage()) != null)
        {
            switch (message.MessageType)
            {
                case NetIncomingMessageType.DiscoveryResponse:
                    Console.ForegroundColor = ConsoleColor.Cyan;
                    Console.WriteLine("(Client) Got response from server.");
                    client.Connect(message.SenderEndPoint);
                    Console.WriteLine("(Client) Attempting to connect to server...");
                    break;
                case NetIncomingMessageType.DebugMessage:
                    Console.ForegroundColor = ConsoleColor.Cyan;
                    Console.WriteLine("(Client) Debug: " + message.ReadString());
                    break;
                default:
                    Console.ForegroundColor = ConsoleColor.Cyan;
                    Console.WriteLine("(Client) Unrecognized message type! (" + message.MessageType + ")");
                    break; 
            }
            client.Recycle(message);
        }
    }

    static void AcceptConsoleInput()
    {
        string input = Console.ReadLine();

        if (!string.IsNullOrWhiteSpace(input))
        {
            // Send input from client to server.
        }

        AcceptConsoleInput();
    }
} 
```

此外，它卡住的地方： ![控制台](../Images/e7f24bd0837976e396e9abb6c2c783cc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:18:50.753

我发现你的错误：

在你的`void StartClient()`，你正在设置`message = server.ReadMessage()`你的 while 循环。

这实际上应该是`message = client.ReadMessage()`。

回复晚了非常抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-24T22:33:01.047

解决方案

```
using System;
using System.Threading;
using System.Collections.Generic;
using Lidgren.Network;
using System.Net;

namespace ChatClient
{
  class Program
  {
    static NetPeerConfiguration serverconfig;
    static NetPeerConfiguration clientconfig;
    static NetServer server;
    static NetClient client;

    static void Main()
    {
      NetPeerConfiguration serverconfig = new NetPeerConfiguration("chat");
      serverconfig.Port = 8081;
      serverconfig.MaximumConnections = 100;
      server = new NetServer(serverconfig);
      Thread serverthread = new Thread(StartServer);
      serverthread.Start();

      NetPeerConfiguration clientconfig = new NetPeerConfiguration("chat");
      clientconfig.AutoFlushSendQueue = false;
      client = new NetClient(clientconfig);
      Thread clientthread = new Thread(StartClient);
      clientthread.Start();
      AcceptConsoleInput();

    }

    static void StartServer()
    {
      server.Start();
      NetIncomingMessage message;

      while (true)
      {
        message = server.WaitMessage(500);
        if (message != null)
        {
          switch (message.MessageType)
          {
            case NetIncomingMessageType.DiscoveryRequest:
              NetOutgoingMessage response = server.CreateMessage();
              response.Write((byte)1); // Do I need to do this?
              server.SendDiscoveryResponse(response, message.SenderEndPoint);
              break;
            case NetIncomingMessageType.DebugMessage:
              Console.ForegroundColor = ConsoleColor.Cyan;
              Console.WriteLine("(Server) Debug: " + message.ReadString());
              break;
            case NetIncomingMessageType.StatusChanged:
              NetConnectionStatus status = (NetConnectionStatus)message.ReadByte();

              string reason = message.ReadString();
              Console.WriteLine(NetUtility.ToHexString(message.SenderConnection.RemoteUniqueIdentifier) + " " + status + ": " + reason);

              if (status == NetConnectionStatus.Connected)
                Console.WriteLine("Remote hail: " + message.SenderConnection.RemoteHailMessage.ReadString());
              break;
            case NetIncomingMessageType.Data:
              // incoming chat message from a client
              string chat = message.ReadString();

              // broadcast this to all connections, except sender
              List<NetConnection> all = server.Connections; // get copy
                                                            //all.Remove(message.SenderConnection);
              Console.WriteLine(all + "hello ");

              NetOutgoingMessage om = server.CreateMessage();
              server.SendMessage(om, all, NetDeliveryMethod.ReliableOrdered, 0);

              break;
            default:
              Console.ForegroundColor = ConsoleColor.Cyan;
              Console.WriteLine("(Server) Unrecognized message type! (" + message.MessageType + ")");
              break;
          }
        }
        server.Recycle(message);
      }
      Thread.Sleep(1);
    }

    static void StartClient()
    {
      client.Start();
      client.DiscoverLocalPeers(8081);
      NetOutgoingMessage hail = client.CreateMessage("This is the hail message");

      NetIncomingMessage message;

      while (true)
      {
        message = client.WaitMessage(500);
        if (message != null) { 
        switch (message.MessageType)
        {
            case NetIncomingMessageType.DiscoveryResponse:
              Console.WriteLine("(Client) Got response from server.");
              client.Connect(message.SenderEndPoint, hail);
              Console.WriteLine("(Client) Attempting to connect to server...");
              break;

            case NetIncomingMessageType.DebugMessage:
            Console.WriteLine(message.ReadString());
            break;
          case NetIncomingMessageType.ErrorMessage:
            Console.WriteLine(message.ReadString());
            break;
          case NetIncomingMessageType.WarningMessage:
            Console.WriteLine(message.ReadString());
            break;
          case NetIncomingMessageType.VerboseDebugMessage:
            Console.WriteLine(message.ReadString());
            break;
          case NetIncomingMessageType.Data:
            string chat = message.ReadString();
            break;
          case NetIncomingMessageType.StatusChanged:
            NetConnectionStatus status = (NetConnectionStatus)message.ReadByte();
            Console.WriteLine(status.ToString());
            break;
          default:
            Console.ForegroundColor = ConsoleColor.Cyan;
            Console.WriteLine("(Client) Unrecognized message type! (" + message.MessageType + ")");
            break;
        }
      }
        client.Recycle(message);
      }
    }

    static void AcceptConsoleInput()
    {
      string input = Console.ReadLine();

      if (!string.IsNullOrWhiteSpace(input))
      {
        NetOutgoingMessage om = client.CreateMessage(input);
        client.SendMessage(om, NetDeliveryMethod.ReliableSequenced);
        client.FlushSendQueue();
      }

      AcceptConsoleInput();
    }
  }
} 
```

我改变了很多，所以我可以测试每个部分。我发现问题是消息几乎立即变为空。我将其更改为连续检查并继续检查，即使它为空。

# php - simplexml_load_string -- 相同的对象属性

> ID：14249569
> 
> 赞同：0
> 
> 时间：2013-01-10T01:44:37.510
> 
> 标签：php, xml, simplexml

```
<item>
    <title>Avoid tornado death by spinning backwards</title>
    <link>www.example.com/survival_tips</link>
    <pubDate>Mon, 13 Aug 2043 00:16:21 +0000</pubDate>
    <dc:creator>Helen Hunt</dc:creator>
    <description></description>
    <content:encoded></content:encoded>
    <category domain="post_tag" nicename="surv"><![CDATA[Survival]]></category>
    <category domain="category" nicename="tip"><![CDATA[Tips]]></category>
    <category domain="category" nicename="torn"><![CDATA[Tornados]]></category>
</item> 
```

考虑上面的 XML。我可以通过以下方式轻松访问标题：

```
$feed = simplexml_load_string($xml);

foreach ($feed->channel->item as $entry) {
     echo $entry->title.", ";
} 
```

我怎样才能为所有`<category...>`领域做到这一点？（我意识到如果它们被包裹在父`<Categories>`标签中，我可以做到这一点，但事实并非如此。

预期输出：`Survival, Tips, Tornados`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:51:32.897

对于这种特定情况，我建议通过[函数](http://php.net/SimpleXMLElement.xpath)[^(*Docs*)](http://php.net/SimpleXMLElement.xpath)`category`将元素作为数组获取：[`SimpleXMLElement::xpath`](http://php.net/SimpleXMLElement.xpath)

 *```
foreach ($feed->channel->item as $entry) {
    echo $entry->title . ", " . implode(', ', $entry->xpath('category'));
} 
```

这为您的单个示例项目提供了：

```
Avoid tornado death by spinning backwards, Survival, Tips, Tornados 
```

并做了。;) 另请参阅[`implode`^(*Docs*)](http://php.net/implode)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T01:48:51.670

## 编辑

更新以反映“项目”循环中的迭代

```
foreach ($feed->channel->item as $entry) {

    $categories = array();
    foreach ($entry->category as $category) {
        $categories[] = (string) $category;
    }

    echo 'In ', $entry->title, ': ', implode(', ', $categories);
} 
```

请参阅[示例 #4 访问 SimpleXML 中的非唯一元素](http://php.net/manual/en/simplexml.examples-basic.php#example-5281)*

# html - 为什么我的 CSS 不显示？

> ID：14249574
> 
> 赞同：-2
> 
> 时间：2013-01-10T01:45:38.913
> 
> 标签：html, css, web

*   css 文件 =`base.css`
*   .html 文件 =`base.html`
*   链接=`<link rel="stylesheet" type="text/css" href="/base.css" />`
*   CSS位置=`C:\Users\user\S\St\static\base.css`
*   html位置=`C:\Users\user\S\St\Templates\base.html`

当我运行我的网页时，只显示 html。当我将浏览器直接指向 css 文件时，我得到的只是写在文件中的文字，如下所示：

```
body{background-color:blue} 
```

我不知道为什么这不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T01:51:53.510

这是因为你的网址是错误的。如果你的根是

```
C:\Users\user\S\St\ 
```

然后你的css链接应该看起来像

```
<link rel="stylesheet" type="text/css" href="../static/base.css" /> 
```

有很多资源有更多关于这方面的信息，比如这个： [http ://www.htmlhelp.com/reference/css/style-html.html](http://www.htmlhelp.com/reference/css/style-html.html)

# php - Wordpress 网站上奇怪的 json_encode 行为

> ID：14249588
> 
> 赞同：0
> 
> 时间：2013-01-10T01:46:33.810
> 
> 标签：php, json, wordpress

我为图像数据创建了一个测试页。它将在我的浏览器中显示一页 JSON 图像数据。在我的 Firefox Web 开发者控制台（见截图）中，我会看到所有 60 个图片 url 都出现了，但奇怪的是在图片之后还请求了大约 15 或 16 个 Wordpress 博客/帖子 url。这些 url 在页面源中无处可见，因此我不知道浏览器如何或为什么请求它们。如果结果格式不是 json 编码的，我看不到这些无关的帖子出现。

这是我的测试代码，精简到最基本的部分：

```
<?php

if( !empty($_REQUEST['json']) ){

    //get image data here
$images = array();
$imagesjson = file_get_contents('test.json'); 
$images = json_decode($imagesjson);
$result['images'] = $images;

// return results
if ($_REQUEST['json'] == 'json') {print_r(json_encode($result));} 
else {print_r($result);}

}

?> 
```

你可以在这里看到它的实际效果：

[http://www.bangstyle.com/test/jsontest.php?json=json](http://www.bangstyle.com/test/jsontest.php?json=json) - json 结果

[http://www.bangstyle.com/test/jsontest.php?json=nojson](http://www.bangstyle.com/test/jsontest.php?json=nojson) - 非 json 结果

我打开了一个 Firefox Web 控制台（工具->Web 开发人员->Web 控制台）并确保只选择了“日志记录”和“网络”按钮，然后使用不同的查询字符串加载了上面的 jsontest.php 文件。在第一种情况下，我看到除了图片之外还请求了大约 16 篇博客文章，尽管它们的网址在实际页面中没有（你可以在这张图片中看到其中 4 篇）：

![Firefox 控制台结果](../Images/7e3765dd617c5c9a477efcc844438950.png)

对于非 json 响应，这些博客文章没有出现，这正是我想要的。

我只是无法理解正在发生的事情。结果需要是 JSON，但它不应该请求这些额外的博客文章。一些奇怪的网络服务器配置会导致这种情况吗？

# php - 命名空间的 SimpleXMLElement addChild 问题

> ID：14249594
> 
> 赞同：1
> 
> 时间：2013-01-10T01:47:03.693
> 
> 标签：php, simplexml, addchild

这真的很简单。我想，但它没有表现，因为它删除了“媒体：”......[`$item->addChild`](http://php.net/manual/en/simplexmlelement.addchild.php)`('media:thumbnail')`

我想知道如何使用 SimpleXMLElement 完成以下操作。

```
$thumbnail=$item->addChild('media:thumbnail');
$thumbnail->addAttribute('url', $row['url']);
$thumbnail->addAttribute('height', '81');
$thumbnail->addAttribute('width', '144');
//Output <media:thumbnail url="http://myurl.com/my.jpg" width="144" height="81" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T05:01:08.217

正确答案：

```
 $thumbnail=('media:thumbnail', '', 'http://search.yahoo.com/mrss/');
    $thumbnail->addAttribute('url', $row['url']);
    $thumbnail->addAttribute('height', '81');
    $thumbnail->addAttribute('width', '144');
    //Output <media:thumbnail url="http://myurl.com/my.jpg" width="144" height="81" /> 
```

# c++ - 当容器在 C++ 中为 const 时，如何对容器持有的对象进行非 const 访问

> ID：14249595
> 
> 赞同：0
> 
> 时间：2013-01-10T01:47:07.737
> 
> 标签：c++, pointers, const-correctness

我在下面的示例中说明了两个类和一些附加功能代码之间的关系。该类`MiddleMan`包含几个指向`DataObject`类实例的指针容器。我想强制对一个容器中的数据对象进行只读访问，同时允许对另一个容器中的数据容器进行写访问。的用户`MiddleMan`永远不能直接修改容器本身（`ptr_vector`成员）。

`DataObject`我猜想通过`MiddleMan`const 成员函数访问指针时会发生 const 提升。我怎样才能避免这种情况？在我的对象关系中，`MiddleMan`在逻辑上不拥有`DataObject`实例。因此，我不希望`DataObject`实例受到 const 保护。

我已经使用了`boost::ptr_vector`容器，因为我知道 STL 容器对于这类事情可能会更成问题。虽然没有解决我的问题。我很高兴在 const_cast 中使用`MiddleMan`，但我不知道如何使用。

```
// const correctness access through middleman example
// g++ -I/Developer/boost  ptr_container_ex.cc
#include <boost/ptr_container/ptr_vector.hpp>

struct DataObject
{
    DataObject(size_t n) : _data(new float[n]) {}
    ~DataObject() {delete _data;}
    float * dataNonConst() { return _data; }
    const float * dataConst() const { return _data; }
    float * _data;
};

struct MiddleMan
{

    typedef boost::ptr_vector<DataObject> containerVec_t;

    const containerVec_t & inputVars() const { return _inputVars; }
    const containerVec_t & outputVars() const { return _outputVars; }

    void addInputVar(  DataObject * in  ) { _inputVars.push_back( in ); }
    void addOutputVar( DataObject * out ) { _outputVars.push_back( out ); }

    containerVec_t _inputVars, _outputVars;

};

// just an example that the DataObject instances are managed externally
DataObject g_dataInstances[] = {DataObject(1), DataObject(2), DataObject(3)};

MiddleMan theMiddleMan;

int main()
{
    theMiddleMan.addInputVar( &g_dataInstances[0]);  // this is just setup
    theMiddleMan.addOutputVar( &g_dataInstances[1]);

    const MiddleMan & mmRef = theMiddleMan; // I actually only have a const ref to work with

    // read data example
    const MiddleMan::containerVec_t & inputs = mmRef.inputVars();
    float read = inputs[0].dataConst()[0];

    // write data example
    const MiddleMan::containerVec_t & outputs = mmRef.outputVars();
    float * data_ptr = outputs[0].dataNonConst(); // COMPILER ERROR HERE:

    return 0;
} 
```

我得到编译器输出：

```
ptr_container_ex.cc: In function ‘int main()’:
ptr_container_ex.cc:49: error: passing ‘const DataContainer’ as ‘this’ argument of ‘float* DataContainer::dataNonConst()’ discards qualifiers 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T05:17:45.730

您需要在每个不具有 const 访问权限的地方排除 const 修饰符：

```
containerVec_t & outputVars() { return _outputVars; } //Change definition in MiddleMan class

MiddleMan::containerVec_t & outputs = theMiddleMan.outputVars(); //Change reference type
float * data_ptr = outputs[0].dataNonConst(); //No compiler error here 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-10T22:33:58.227

一种工作场景用于`const_cast`访问 outputVars。我无法返回对整个容器的引用，但我可以获得返回开始和结束迭代器所需的功能。

```
// const correctness access through middleman example
// g++ -I/Developer/boost  ptr_container_ex.cc
#include <boost/ptr_container/ptr_vector.hpp>

struct DataObject
{
    DataObject(size_t n) : _data(new float[n]) {}
    ~DataObject() {delete _data;}
    float * dataNonConst() { return _data; }
    const float * dataConst() const { return _data; }
    float * _data;
};

struct MiddleMan
{
    typedef boost::ptr_vector<DataObject> containerVec_t;

    containerVec_t::iterator outputVarsBegin() const { return const_cast<containerVec_t&>(_outputVars).begin(); }
    containerVec_t::iterator outputVarsEnd() const { return const_cast<containerVec_t&>(_outputVars).end(); }

    const containerVec_t & inputVars() const { return _inputVars; }

    void addInputVar(  DataObject * in  ) { _inputVars.push_back( in ); }
    void addOutputVar( DataObject * out ) { _outputVars.push_back( out ); }

    containerVec_t _inputVars, _outputVars;

};

// just an example that the DataObject instances are managed externally
DataObject g_dataInstances[] = {DataObject(1), DataObject(2), DataObject(3)};

MiddleMan theMiddleMan;

int main()
{
    theMiddleMan.addInputVar( &g_dataInstances[0]);  // this is just setup
    theMiddleMan.addOutputVar( &g_dataInstances[1]);

    const MiddleMan & mmRef = theMiddleMan; // I actually only have a const ref to work with

    // read data example
    const MiddleMan::containerVec_t & inputs = mmRef.inputVars();
    float read = inputs[0].dataConst()[0];

    // write data example
    float * data_ptr2 = mmRef.outputVarsBegin()->dataNonConst(); // WORKS

    return 0;
} 
```

# android - 在应用程序内从互联网下载文件，无需用户干预

> ID：14249597
> 
> 赞同：0
> 
> 时间：2013-01-10T01:47:25.140
> 
> 标签：android

我需要从互联网上下载一个文件来更新路径中的一些资源文件

```
"/data/data/" + context.getPackageName() + "/databases/" 
```

方法

```
public static void updateDB(){
removeOldCopies();
//how to download a file in a specific directory without open browser????
} 
```

应该在没有用户干预的情况下执行此操作，只显示一个进度对话框

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T05:17:01.867

您可以使用 AsyncTask 在 PreExecute() 方法中显示进度对话框，并在 PostExecute() 方法中隐藏/关闭它。

```
ProgressDialog prog = new ProgressDialog(this); // Create Progress Dialog

private class DownloadFile extends AsyncTask<Void, Integer, Void>{

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        //Display progressDialog before download starts
        prog.show();

    }

    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        prog.hide(); //Hide Progress Dialog else use dismiss() to dismiss the dialog
    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        InternetManager in = new InternetManager("http://url-to-download");
        in.fileRequest(); 
        return null;
    }
} 
```

`in.fileRequest()`将为您提供您打算下载的文件，然后使用[FileOutputStream.write(bytes[])](http://docs.oracle.com/javase/6/docs/api/java/io/FileOutputStream.html#write%28byte%5B%5D%29)将其写入文件。

最后`AsyncTask`打通电话，

```
DownloadFile dd = new DownloadFile();
dd.execute(); 
```

`InternetManager`执行互联网相关任务的类。

```
public class InternetManager {
    HttpClient httpclient;
    HttpGet httpget;
    HttpResponse httpresponse;
    HttpEntity httpentity;
    String url;
    String response = null;
    byte[] data = null;

    public InternetManager(String url) {
        this.url = url;
    }
    public byte[] fileRequest() {
        httpclient = new DefaultHttpClient();
        httpget = new HttpGet(url);
        try {
            httpresponse = httpclient.execute(httpget);
            httpentity = httpresponse.getEntity();
            data = EntityUtils.toByteArray(httpentity);
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.v("", "File downloaded URL: " + url);
        return data;
         }
} 
```

# xml - 在 PHP、simplexml 中读取 XML 时如何转义冒号

> ID：14249598
> 
> 赞同：1
> 
> 时间：2013-01-10T01:47:32.847
> 
> 标签：xml, simplexml, php

我有一个 XML 文件，我正在尝试使用 PHP 获取变量。XML 文件如下所示：

```
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:dcq="http://purl.org/dc/terms/" xmlns="http://www.skype.com/go/skypeweb">
<Status rdf:about="urn:skype:skype.com:skypeweb/1.1"> 
```

您可以在此处查看完整的 XML 文件：http: [//mystatus.skype.com/username.xml](http://mystatus.skype.com/username.xml)

我使用 simplexml 扩展将 xml 输入转换为 PHP 对象`$xml`。当我稍后尝试在文件中导航时：

```
$variable = $xml->rdf:RDF->Status->presence; 
```

由于“rdf:RDF”中的冒号，它给了我一个错误：

> 解析错误：语法错误，意外的“：”

如何在不更改 XML 文件的情况下转义冒号或稍后在文件中导航？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T02:43:42.817

如果我没记错的话，simplexml 开始定位于文档（顶部）元素，因此在这种情况下您无需担心 rdf:RDF。你试一试：

```
$xml->Status->presence 
```

一般来说，访问具有特定命名空间的节点的方法似乎是使用 ->children(namespaceUri)，如下所示：

```
$xml->children('http://www.w3.org/2005/Atom')->entry->title 
```

对于这样的事情：

```
<a:feed xmlns:a="http://www.w3.org/2005/Atom">
   <a:entry>
      <a:title>hello</a:title>
   </a:entry>
</a:feed> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T13:09:28.030

您的初始代码：

```
$variable = $xml->rdf:RDF->Status->presence; 
```

不起作用，因为它正在创建*语法错误*：

> 解析错误：语法错误，第 8 行 /test.php 中的意外 ':'

属性名称中的冒号无效。PHP 常用的处理方式是花括号：

```
$xml->{'rdf:RDF'}->Status->presence 
```

然后你发现你得到了*未定义的属性*通知：

> 注意：尝试在第 8 行的 /test.php 中获取非对象的属性

这是第一手的，因为这样的属性不存在，`var_dump`表明：

```
var_dump($xml);

class SimpleXMLElement#1 (1) {
  public $Status =>
  class SimpleXMLElement#2 (2) {
    public $statusCode =>
    string(1) "1"
    public $presence =>
    array(13) {
      [0] =>
      string(1) "1"
      ...
    }
  }
} 
```

但是，除此之外，即使有一个以命名空间为前缀的元素名称的子元素，它也不会那样工作。这*永远不会*起作用，所以*总是*没有定义这样的属性。

但是，之前的转储概述的是，您*正在*寻找的属性是`$Status`：：

```
$variable = $xml->Status->presence; 
```

所以你只是找错地方了。是`var_dump($variable)`：

```
class SimpleXMLElement#4 (13) {
    string(1) "1"
    string(7) "Offline"
    string(12) "Déconnecté"
    string(7) "Offline"
    string(15) "オフライン"
    string(6) "離線"
    string(6) "脱机"
    string(7) "Offline"
    string(7) "Offline"
    string(12) "Non in linea"
    string(12) "Desconectado"
    string(15) "Niepodłączony"
    string(7) "Offline"
} 
```

# oracle - 来自 SAS 数据集的 Oracle 表

> ID：14249600
> 
> 赞同：2
> 
> 时间：2013-01-10T01:47:42.820
> 
> 标签：oracle, sas, dataset

我试图从 SAS 数据集创建 Oracle 表。我在很多情况下都取得了成功，但被困在一个特定的数据集上。我在下面提供日志文件。我正在 Linux 上使用 SAS 9 和 Oracle 11.2.0.1.0。

有什么建议么？

```
1          libname dibsdata "/data2/dibyendu/Jan_9/on_demand/";
NOTE: Libref DIBSDATA was successfully assigned as follows:
      Engine:        V9
      Physical Name: /data2/dibyendu/Jan_9/on_demand
2          libname myora oracle user=sasuser password=XXXXXXXXXX path=CIOEDATA ;
NOTE: Libref MYORA was successfully assigned as follows:
      Engine:        ORACLE
      Physical Name: CIOEDATA
3          data myora.on_demand;
4              set dibsdata.on_demand;
5          run;

NOTE: SAS variable labels, formats, and lengths are not written to DBMS tables.
ERROR: Error attempting to CREATE a DBMS table. ERROR: ORACLE execute error: ORA-00904: : invalid identifier..
NOTE: The DATA step has been abnormally terminated.
NOTE: The SAS System stopped processing this step because of errors.
NOTE: SAS set option OBS=0 and will continue to check statements. This might cause NOTE: No observations in data set.
WARNING: The data set MYORA.ON_DEMAND may be incomplete.  When this step was stopped there were 0 observations and 48 variables.
ERROR: ROLLBACK issued due to errors for data set MYORA.ON_DEMAND.DATA.
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.00 seconds

ERROR: Errors printed on page 1.
2                                                          The SAS System                           17:00 Wednesday, January 9, 2013

NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           1.24 seconds
      cpu time            0.04 seconds 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T14:19:43.353

Oracle 错误**ORA-00904**表示您正在尝试使用无效的列名创建表。您很可能有一个名称超过 30 个字符的 SAS 变量，或者是一个 Oracle 保留字。例如，这个 SAS 数据集中的两个变量在 Oracle 中是非法的：

```
data a;
  column_name_too_long_for_oracle = 1;
  date = today(); /* This is a reserved word */
run; 
```

这是[Oracle 11g 保留字列表](http://docs.oracle.com/cd/E11882_01/server.112/e17118/ap_keywd001.htm)。检查 SAS 数据集中的变量名称，并将它们重命名为 Oracle 中的合法名称。例如，如果违规者是名为**DATE**的 SAS 变量，您可以尝试以下操作：

```
data myora.on_demand;
   set dibsdata.on_demand(rename=(DATE=PROJ_DATE));
run; 
```

# jquery - 使用jquery刷新后如何保持下拉选择

> ID：14249605
> 
> 赞同：3
> 
> 时间：2013-01-10T01:48:02.427
> 
> 标签：jquery, sql, asp-classic, ado

当有人在下拉列表中选择项目时，我正在使用 jquery 刷新页面。但随后它会返回默认选择。

（这可以防止用户使用两个下拉菜单进行搜索。）

如何获取下拉菜单以保存在页面刷新时选择的项目？

下面的代码：

```
<%@ LANGUAGE="VBSCRIPT" %>
<%
pagetitle="Contractor Details"
%>
<!--#INCLUDE VIRTUAL="/_lib/include/header.htm"-->
<!--#INCLUDE VIRTUAL="/_lib/include/menu.htm"-->
<script>
$(document).ready(function() {
    $("#abn,#cat").change(function () {
    this.form.submit();
})
});
</script>
<div class="twoColumnRow">
<div class="twoColumnContent">
<p class="breadCrm"><a href="/index.htm">Home</a> <span>&gt;</span> <a href="/tools/index.htm">Tools of the Trade</a> <span>&gt;</span> <a href="/tools/finance/index.htm">Finance and Purchasing</a><span>&gt;</span> <a href="/tools/finance/procurement/index.htm">Procurement and Contracts information</a></p>
<div class="contentPad">
<!-- Start of main content -->

<p class="imageRight">&nbsp;</p>
<h1><%=pagetitle%></h1>

<%
        Dim connectString, connect, conDB, sconDB, con, scon, src_abn, src_cat
        connectString = "Driver={Microsoft Text Driver (*.txt; *.csv)}; DBQ=" & Server.MapPath("data")
              src_abn = Request.QueryString("abn")
              src_cat = Request.QueryString("cat")
        set connect = Server.CreateObject("ADODB.connection")
        connect.open connectString

        if src_abn = "all" and src_cat = "all" then
        conDB = "SELECT * FROM cont.csv"    
        elseif src_abn = "all" then
        conDB = "SELECT * FROM cont.csv WHERE " & src_cat & " = 'Yes'"  
        elseif src_cat = "all" then
        conDB = "SELECT * FROM cont.csv WHERE ucase(abn) LIKE ucase('%"+src_abn+"%')"   
        else 
        conDB = " SELECT * FROM cont.csv WHERE " & src_cat & " = 'Yes' AND ucase(abn) LIKE ucase('%"+src_abn+"%')"
        end if

        sconDB = "SELECT * FROM cont.csv"   

        set con = connect.execute(conDB)
        set scon = connect.execute(sconDB)
%>
<h2>Search results</h2><hr />
<% if not con.BOF then %>
<div style="margin-top:1em">

  <form action="dbresults.htm" method="get">

      <p>Company name:<br/>
      <select id="abn" name="abn">
        <option label="All companies" value="all"></option>
        <% while (NOT scon.EOF) %>
        <option label="<%=scon("legal")%>" value="<%=scon("abn")%>"></option>
        <%scon.MoveNext()
                          Wend %>
      </select>
      </p>
     <p>Categories for Creative Design:<br/>
      <select id="cat" name="cat">
        <option class="group" label="All categories" value="all"></option>
        <option class="group" label="Strategic brand, marketing and communications advice" value="a"></option>
        <option class="group" label="Graphic design and layout" value="b"></option>
        <option class="group" label="Forms design" value="c"></option>
        <option class="group" label="Web design and development" value="d"></option>
        <option class="group" label="Authoring services" value="e"></option>
        <option class="group" label="Editorial services" value="f"></option>
        <option class="group" label="Translation services" value="g"></option>
        <option class="group" label="Photography and film services" value="h"></option>
        <option class="group" label="Scanning and digitisation services" value="i"></option>
        <option class="group" label="Multimedia editing services" value="j"></option>
      </select>
    </p>
    <input type="submit" value="Search" />
  </form>
  <br /><hr />

    <table style="font-size:.9em;" class="contentTable">
          <tr>
                <th>ABN:</th>
                <th>Company Name:</td>
          </tr>
  <% con.Movefirst() %>
  <% while (NOT con.EOF) %>
          <tr>
                <td><%=con("abn")%></th>
                <td><a href="dbcomp.htm?abn=<%=con("abn")%>&cat=all"><%=con("legal")%></a></td>
          </tr>
  <%
    con.MoveNext()
    Wend
  %>
</table>

</div>
<% else %>
    <% scon.Movefirst() %>
  <form action="dbresults.htm" method="get">

      <p>Company name:<br/>
      <select name="abn">
        <option label="All companies" value="all"></option>
        <% while (NOT scon.EOF) %>
        <option label="<%=scon("legal")%>" value="<%=scon("abn")%>"></option>
        <%scon.MoveNext()
                          Wend %>
      </select>
      </p>
     <p>Categories for Creative Design:<br/>
      <select name="cat">
        <option label="All categories" value="all"></option>
        <option label="Strategic brand, marketing and communications advice" value="a"></option>
        <option label="Graphic design and layout" value="b"></option>
        <option label="Forms design" value="c"></option>
        <option label="Web design and development" value="d"></option>
        <option label="Authoring services" value="e"></option>
        <option label="Editorial services" value="f"></option>
        <option label="Translation services" value="g"></option>
        <option label="Photography and film services" value="h"></option>
        <option label="Scanning and digitisation services" value="i"></option>
        <option label="Multimedia editing services" value="j"></option>
      </select>
    </p>
    <input type="submit" value="Search" />
  </form>
  <br /><hr />
<p>No records match your query.</p>
<p><a href="dbtest.htm">Return to search page</a></p>
<%
  end if
  con.close
%>

<!-- End of main content -->
</div> <!-- end contentPad div -->
</div> <!-- end twocolumncontent div -->
<div class="twoColumnLinks">

<!--<div class="relatedLinks">
<h3>Related Links</h3>
<ul>
<li><a href="/index.htm">Related link 1</a></li>
</ul>
</div>--> <!-- end relatedlinks div -->
<!--#INCLUDE VIRTUAL="/_lib/include/quicklinks.htm"-->
<!--#INCLUDE VIRTUAL="/_lib/include/mylinks.htm"-->
</div> <!-- end twocolumnlinks div -->
</div> <!-- end twocolumnrow div -->
<!--#INCLUDE VIRTUAL="/_lib/include/footer.htm"--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:52:57.990

将属性“selected”添加到您选择的选项标签：

```
<option label="some label" value="some value" selected>Some text</option> 
```

# twitter - 推文、位置、关键字和数据

> ID：14249608
> 
> 赞同：0
> 
> 时间：2013-01-10T01:48:22.697
> 
> 标签：twitter, location, foursquare

我正在尝试对人们在冬天去的地方进行一些分析。我采用的方法是从特定城市（例如纽约）获取带有关键字的推文`Foursquare`。然后使用该用户的四方数据来查看他/她的签到并尝试跟踪模式。

所以，我被困在第一阶段。如何从 ONE city 和关键字 FOURSQUARE 获取这些推文。我不确定我是否理解如何正确使用流 API 并且 ReST API 不起作用（显示未授权）

你能告诉我一个菜鸟了解做上述过程的过程的详细过程吗？另外，如果您有更好的方法来分析签到趋势，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:57:16.997

你想阅读这些：

[https://dev.twitter.com/docs/api/1/get/search](https://dev.twitter.com/docs/api/1/get/search) https://dev.twitter.com/docs/platform-objects/places

您可以给 Twitter 一个纬度/经度坐标和一个半径，或者您可以使用“地点”字段作为过滤器。无论哪种方式，都希望对其进行微调以满足您的需求。您还需要考虑到很多人可能会在未启用定位服务的情况下发推文。

如果要使用 REST API，则需要从 twitter 获取 API 密钥。

# c# - 删除组合框数据源中的选定值

> ID：14249619
> 
> 赞同：0
> 
> 时间：2013-01-10T01:50:00.997
> 
> 标签：c#, combobox, datasource

我有一个窗口表单，其中管理员将用户名和密码分配给某个员工。它有一个名为 cmboEmpName 的组合框，其中包含员工的姓名。

当新按钮单击时，消息框将确认该操作。如果单击是，我想删除组合框中的选定值。但是我的代码给了我一个错误..

```
Items collection cannot be modified when the DataSource property is set. 
```

这是我的代码：

```
 if (MessageBox.Show("Are you want to add new record?", "Confirm New Record", MessageBoxButtons.YesNo) == DialogResult.Yes)
            {
                MessageBox.Show("Record successfully added!");
                sqlcom.ExecuteNonQuery();
                sqlcon.Close();
                cmboEmpName.Items.Remove(cmboEmpName.Items[cmboEmpName.SelectedIndex]);
                cmboEmpName.Refresh();

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:06:09.760

您应该做的是从最初绑定到组合框的集合中删除该项目。之后重新绑定到组合框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:14:38.277

cmboEmpName 的数据源属性设置为什么？您需要修改底层数据结构。因此，如果您将数据源设置为`List<String>`对象，则修改该对象，然后在组合框上调用 DataBind。

# c - 使用 popen(3) 与系统交互的 C 程序与 bash shell 相比如何？

> ID：14249628
> 
> 赞同：1
> 
> 时间：2013-01-10T01:51:07.067
> 
> 标签：c, linux

以这种方式使用 C“shell 模拟器”让用户向内核发送命令（在 linux 中）是否有任何限制？作为一个事后思考的问题，如果您将用户设置为没有 shell 访问权限，是什么阻止他们使用类似的东西与内核交互？（比如说通过 php 从 shell_exec 运行程序）？

（通过限制用户，我的意思是在 /etc/passwd 中）谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:57:41.137

好的，这里有几个问题。

首先，popen 作为一种模拟 shell 的方式并不是非常令人满意，因为您将无法创建自己的管道，并且您将不断地与权限和类似的事情作斗争。

其次，无论如何，popen 并不能特别保护您免受恶意命令的侵害。

您真正*想要*的是使用*[受限制的 shell](http://www.gnu.org/software/bash/manual/html_node/The-Restricted-Shell.html)*。

**更新**

在回答你的第二个问题时，几乎没有。这就是为什么你应该*非常*小心地使用它。

# opengl - OpenGL、VAO 和多个缓冲区

> ID：14249634
> 
> 赞同：28
> 
> 时间：2013-01-10T01:51:33.097
> 
> 标签：opengl

我正在使用 OpenGL 编写一个小图形引擎（通过 OpenTK 和 C#）。

为了定义顶点属性，我有一个 VertexDeclaration 类，其中包含一组 VertexElement 结构，这些结构映射到 glEnableVertexAttribArray/glVertexAttribPointer 调用。

此外，为了支持多个顶点流，我有一个特殊的结构来保存顶点缓冲区、顶点声明、顶点偏移和实例频率（如 XNA 的 VertexBufferBinding 结构）。

目前，每当调用绘图调用时，我都会遍历所有设置的顶点流并绑定它们的顶点缓冲区，应用顶点声明，禁用未使用的顶点属性并绘制图元。

我想使用 VAO 将 glEnableVertexAttribArray 调用缓存到其中，并且每当应用顶点流时，绑定 VAO 并更改其数组缓冲区绑定。

这是对 VAO 的正确使用吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-10T02:25:48.267

> 这是对 VAO 的正确使用吗？

没有¹。

`glVertexAttribPointer` [`GL_ARRAY_BUFFER` **使用在调用函数时**](http://www.opengl.org/wiki/Vertex_Specification#Vertex_Buffer_Object)[绑定到的缓冲区对象](http://www.opengl.org/wiki/Vertex_Specification#Vertex_Buffer_Object)。所以你不能这样做：

```
glVertexAttribPointer(...);
glBindBuffer(GL_ARRAY_BUFFER, bufferObject);
glDrawArrays(...); 
```

这*不会*使用`bufferObject`; 它将使用最初调用`GL_ARRAY_BUFFER`时绑定的任何内容。`glVertexAttribPointer`

VAO 捕获此状态。因此，对于每个顶点属性，VAO 将存储调用时绑定到的任何缓冲区对象`GL_ARRAY_BUFFER`。这使您可以执行以下操作：

```
glBindVertexArray(VAO);
glBindBuffer(GL_ARRAY_BUFFER, buffer1);
glVertexAttribPointer(0, ...);
glVertexAttribPointer(1, ...);
glBindBuffer(GL_ARRAY_BUFFER, buffer2);
glVertexAttribPointer(2, ...); 
```

属性 0 和 1 将来自`buffer1`，而属性 2 将来自`buffer2`。VAO 现在捕获了所有这些状态。要渲染，您只需执行以下操作：

```
glBindVertexArray(VAO);
glDraw*(); 
```

简而言之，如果你想改变一个属性在 OpenGL 中的存储来源，你也必须改变*它的格式*。即使是相同的格式，也必须`glVertexAttribPointer`再次调用。

¹：本讨论假设您*没有*使用新的[ARB_vertex_attrib_binding](http://www.opengl.org/registry/specs/ARB/vertex_attrib_binding.txt)。或者，正如众所周知的那样，“ [**Direct3D 究竟如何进行顶点属性绑定。**](http://www.opengl.org/wiki/Vertex_Specification#Separate_attribute_format) ”如果您碰巧使用提供此扩展的实现，您可以有效地做您所说的，因为属性格式与缓冲区对象的存储。同样，折磨的逻辑`glVertexAttribPointer`也消失了。

一般来说，我们在 OpenGL 世界中解决这个问题的方法是将尽可能多的东西放在同一个缓冲区对象中。如果做不到这一点，只需为每个对象使用一个 VAO。

# java - 如何使用 Apache POI 获取 MS Excel 单元格的别名

> ID：14249635
> 
> 赞同：1
> 
> 时间：2013-01-10T01:51:42.747
> 
> 标签：java, excel, apache-poi

我有一个 Excel 文件，文件中的某些单元格有别名，我想循环文件中的所有单元格并打印一个有别名的单元格，我正在使用 Apache POI（Microsoft 文档的 Java API）来执行此操作，但我没有找到获取单元格别名的方法，请参阅下面的代码。

```
for (int i=0;i<wb.getNumberOfSheets();++i) {
    Sheet sheet1 = wb.getSheetAt ;
    for (Row row : sheet1) {
        for (Cell cell : row) {
            // Check if the Cell has an alias
        }
    }
} 
```

如何为单元格添加别名

鼠标单击选择Sheet中的单元格，然后编辑名称框（功能框左侧）为单元格输入别名并按Enter，此时您可以通过单击下拉箭头选择单元格在名称框的右侧并为其选择别名。详情请看图片。

![在此处输入图像描述](../Images/207213485f5feb3b50b1d8f99061d4f8.png)

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T06:43:43.070

你可以在你的代码中遵循这个：

1）首先，你可以得到整个excel的别名：

```
 int NameTotalNumber = workbook.getNumberOfNames(); 
```

2）然后你可以像这样在你的循环中得到它们：

```
 for (int NameIndex =0; NameIndex<NameTotalNumber; NameIndex++)
    {
        Name nameList = wb.getNameAt(NameIndex);
        System.out.println( "AliasName: "+nameList.getNameName());  

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:01:09.340

我已经提供了这个。

```
 for (int NameIndex =0; NameIndex<NameTotalNumber; NameIndex++)
    {
        Name nameList = wb.getNameAt(NameIndex);
        System.out.println( nameList.getNameName());     
    } 
```

# google-closure-compiler - 在 soy 文件中声明数组

> ID：14249638
> 
> 赞同：1
> 
> 时间：2013-01-10T01:51:54.757
> 
> 标签：google-closure-compiler

我对谷歌关闭很陌生。我不知道如何在大豆文件（谷歌闭包）中声明和赋值给数组。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:08:48.280

只是将其移至答案以供将来参考：

这为我编译： {let $P : [1,2,3,4]/} - 编译为： var output = opt_sb || 新大豆.StringBuilder(); var P__soy461 = [1, 2, 3, 4]; 所以它应该可以正常工作

# android - Galaxy S3 通过 OTG APP 丢弃 DSLR 相机 包括日志

> ID：14249639
> 
> 赞同：0
> 
> 时间：2013-01-10T01:51:56.157
> 
> 标签：android

我正在寻找有关 Galaxy S3 i9300 和我们的应用程序遇到的问题的任何意见。

我们使用 Stock ICS 并测试了三星更新程序的 JB 4.11 以及 Nexus 4 上使用的基本代码。无论哪个版本我们都有相同的问题。

我们的应用程序允许我们将钥匙卡与连接的 DSLR 通过 OTG 电缆拍摄的照片相关联，并标记图像并通过无线传输它们。一位摄影师使用 Android 设备扫描钥匙卡，然后给该人拍照，然后 S3 将图像传输到我们创建的图像处理服务器。

我们已经在几款 Android 设备上进行了测试，包括带有 ICS 的 Verizon Samsung Galaxy Nexus、exus 7 以及 ACER A110，并且没有出现任何问题。

S3 上的问题是它在批量传输端点（传输图像）上工作正常，但在我们监视它不喜欢的新数据的中断端点上。在 Nexus 上，我们每秒触发 10 次中断没有问题，但这很快就会杀死 S3。延长超时有帮助，但不能解决问题。这仅发生在 S3 设备上，这是最令人沮丧的部分，因为我们在最初的测试中没有看到这个问题，而且我们现在在现场有 8 台设备，每次断开连接时，您都必须重新启动 S3。

当 USB 关闭并需要重新启动设备才能再次工作时，即使在相机断开连接的情况下，也会以 5 秒的间隔反复记录

```
D/UsbHostManager( 2190): onUEvent(device) :: action = remove, devtype = usb_interface, device = /proc/bus/usb/002/001, product =
1d6b/1/300, type = 9/0/0, interface = 9/0/0, devpath = /devices/platform/s5p-ohci/usb2/2-0:1.0
E/UsbHostManager( 2190): usbDeviceRemoved :: deviceName = /dev/bus/usb/002/001
D/UsbHostManager( 2190): onUEvent(device) :: action = remove, devtype = usb_interface, device = /proc/bus/usb/001/001, product =
1d6b/2/300, type = 9/0/0, interface = 9/0/0, devpath = /devices/platform/s5p-ehci/usb1/1-0:1.0
E/UsbHostManager( 2190): usbDeviceRemoved :: deviceName = /dev/bus/usb/001/001
D/UsbHostManager( 2190): onUEvent(device) :: action = add, devtype = usb_interface, device = /proc/bus/usb/001/001, product = 1d
6b/2/300, type = 9/0/0, interface = 9/0/0, devpath = /devices/platform/s5p-ehci/usb1/1-0:1.0
D/UsbHostManager( 2190): usbDeviceAdded : device :: /dev/bus/usb/001/001 [1d6bh:0002h] [09h,00h,00h] (Hub(Full speed Hub ))
W/UsbHostManager( 2190): /dev/bus/usb/001/001 is put on a blocklist [1d6bh:0002h:09h:00h:00h]
D/UsbHostManager( 2190): usbDeviceAdded : device :: /dev/bus/usb/002/001 [1d6bh:0001h] [09h,00h,00h] (Hub(Full speed Hub ))
W/UsbHostManager( 2190): /dev/bus/usb/002/001 is put on a blocklist [1d6bh:0001h:09h:00h:00h]
D/UsbHostManager( 2190): onUEvent(device) :: action = add, devtype = usb_interface, device = /proc/bus/usb/002/001, product = 1d
6b/1/300, type = 9/0/0, interface = 9/0/0, devpath = /devices/platform/s5p-ohci/usb2/2-0:1.0 
```

我们也只有 S3 的 WIFI 问题，它无法连接到安装在整个位置的 Cisco 无线。其他 Android 设备连接没有问题。S3 能够与自主 WAP 一起工作，这就是我们现在正在测试的方式。

我们还有一个连接到 S3 的移动刷卡器，它可以正常工作。（ID-TECH 班车）。

我的开发人员在现场，互联网访问非常有限。这就是我发布这个问题的原因。请提前接受我的道歉，但我们正在寻找任何想法，尽管开发人员确信这是 USB 硬件的问题，因为其他一切都使用相同的代码，只有 S3 有这两个问题。他非常有经验，并且花费了比他在现场解决此问题的时间更多的时间。如果我们无法确定这两个问题，我们将不得不寻找另一台设备。仅供参考，思科正在运行较旧的 WISM，但其他​​ Android 设备可以正常连接。

GT-i9300 S3也是国际版。

我们测试了 8 个单独的 GT-i9300 S3 设备，它们都有相同的问题。

# postgresql - Postgres psql 输出不带转义字符的字符串

> ID：14249641
> 
> 赞同：2
> 
> 时间：2013-01-10T01:52:02.450
> 
> 标签：postgresql, psql

我在 PostgreSQL 中有一个类型为 bytea 的列，通常包含文本数据。我想获取具有完整换行符和制表符的特定行的该列的值，而不是 psql 输出的八进制转义字符。例如，我运行：

```
psql -Atc 'SELECT my_column from my_table limit 1;' 
```

我得到如下输出：

```
Foo\015\012Bar\011This is some text. 
```

相反，我想要：

```
Foo
Bar This is some text. 
```

我意识到我可以只使用 grep，这就是我正在做的，但我想知道是否有一些简单的方法可以通过 psql 来做到这一点。我尝试将值类型转换为类型文本，但这似乎没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T11:50:53.417

尝试以这种方式将您的 bytea 转换为 ascii：

```
psql -Atc "SELECT convert_from (my_column, 'SQL_ASCII') from my_table limit 1;" 
```

# ios - iOS XCode Storyboard 控件移动，现在在模拟器中看起来很奇怪

> ID：14249642
> 
> 赞同：0
> 
> 时间：2013-01-10T01:52:32.777
> 
> 标签：ios, xcode, storyboard, simulator

我正在通过 iTunes 大学学习 iOS 课程并从事计算器项目。我移动了情节提要上的控件，以便为顶部的另一个控件腾出空间。情节提要上的一切看起来都很好，但是在模拟器中运行时，控件堆叠在一起，相互重叠，有些显然不在模拟器屏幕的顶部。这导致了以下非常相关的问题。

1.  如何在故事板上移动控件？我去了每个控件的大小检查器（在我的例子中是按钮）并更改了“Y”值（将其增加了 10）。我对每个控件都这样做了。我在做的时候没有考虑它，因为正如我所说，故事板上的一切看起来都很好。有没有更好的方法来移动控件？我不知道如何一次抓取多个控件并移动它们。抓住所有并移动或除一个以外的所有移动将是理想的。

2.  我预计有人会说，“我们需要更多信息。”我如何显示故事板？某处有xml文件吗？故事板是如何保存的？我应该如何显示模拟器的结果？

3.  一般来说，到底发生了什么？为什么模拟器中的情况看起来如此不同？

4.  有没有更好的论坛/小组来向新手询问有关 iOS 编程的问题？

我的规格如下： XCode 4.5.2 Ios 模拟器版本设置为 6.0 和 iPhone

还需要什么其他信息吗？提前致谢，

戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:55:16.393

尝试将您的模拟设备尺寸设置为“自由形式”而不是“推断”。这个屏幕有点小，所以控件不再重叠。最新的xcode默认设置为ios6（iPhone 5的屏幕尺寸）

**编辑**为了更好地了解 xcode IDE，请参阅苹果提供的文档（包括屏幕截图以确保清晰）

[https://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/000-About_Xcode/about.html#//apple_ref/doc/uid/TP40010215](https://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/000-About_Xcode/about.html#//apple_ref/doc/uid/TP40010215)

# jquery - CSS id 选择器不工作

> ID：14249643
> 
> 赞同：2
> 
> 时间：2013-01-10T01:52:45.740
> 
> 标签：jquery, css, css-selectors

我正在尝试使用 jQuery 进行一些悬停操作，但我认为选择器不起作用。这是HTML：

```
<div id="footer">
            <ul>
                <li><a href="#">Start a Something</a></li>
                <li><a href="#">Send a Gift</a></li>
                <li><a href="#">How It Works</a></li>
                <li><a href="#">Secure Service</a></li>
                <li><a href="#">About Company</a></li>
                <li><a href="#">Blog</a></li>
                <li><a href="#">Contact</a></li>
            </ul>

            <ul>
                <li>&copy; 2012 Company</li>
                <li><a href="#">Terms of Use and Privacy</a></li>
            </ul>
        </div> 
```

这是jQuery：

```
$('#footer ul li').mouseover(function(){
        $(this).animate({
            color: "white"
        }, 200);
    }).mouseout(function(){
        $(this).animate({
            color: "#bcbdbd"
        }, 200);
}); 
```

我应该使用什么选择器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T01:59:06.033

为什么哦，为什么你使用 jQuery 来完成这个任务？

原始的 CSS！

```
#footer ul li a { /* or even just "#footer a" */
    color: #bcbdbd;
    transition: color 0.2s ease;
    -webkit-transition: color 0.2s ease;
    /* Chrome does not yet support the un-prefixed version */
}
#footer ul li a:hover { /* same comment as above */
    color: #fff;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T01:56:11.223

```
$('#footer ul li a').hover(... 
```

它们是链接，因此`<li>`不会改变它们的颜色。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T01:55:59.937

我认为你应该使用：

```
$('#footer ul li a'); 
```

您的选择器没有错，但您应该将这些动作处理程序和动画应用到`<a>`标签上。

在包装中调整颜色`<li>`不会覆盖`<a>`标签默认的颜色

**编辑：**

至于您想要实现的目标的答案，您将在尝试仅使用 JQuery 覆盖 CSS :hover 时遇到问题。但是 JQuery UI在他们的 animate() [http://jqueryui.com/animate/中使用了](http://jqueryui.com/animate/)[http://api.jquery.com/jQuery.cssHooks/](http://api.jquery.com/jQuery.cssHooks/)

使用它，在 .hover() 或 .mouseover() 上使用动画将覆盖默认的 CSS :hover 属性以使用 JQuery 的动画。

示例：http: [//jsbin.com/udahe3/399/](http://jsbin.com/udahe3/399/)

在其他地方回答 SO：[Override a:hover with jQuery?](https://stackoverflow.com/questions/2053693/override-ahover-with-jquery)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T01:58:04.143

您可以改为定位**A**元素：

```
$('#footer ul a') 
```

# javascript - 获取访问令牌的框 api 错误：无效的 grant_type 参数或缺少参数

> ID：14249648
> 
> 赞同：3
> 
> 时间：2013-01-10T01:53:09.537
> 
> 标签：javascript, oauth-2.0, box-api

我正在尝试获取访问令牌并使用以下 url 发布 HTTP 请求并接收

```
{
  "error":"invalid_request",
  "error_description":"Invalid grant_type parameter or parameter missing"
} 
```

错误信息 。不管我怎么尝试。我在收到代码后几秒钟就发布了，所以我不认为代码可能是故障点。

发布[https://api.box.com/oauth2/token?grant_type=authorization_code&code=H23sCQmlzsEJSEyhKXj19yb1LWew9MPk&client_id=xyz&client_secret=123](https://api.box.com/oauth2/token?grant_type=authorization_code&code=H23sCQmlzsEJSEyhKXj19yb1LWew9MPk&client_id=xyz&client_secret=123)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T02:24:14.697

我认为您可以尝试`grant_type=...`在请求正文中发送，而不是作为查询字符串。

这是该特定请求的文档示例：

`curl https://api.box.com/oauth2/token \`
`-d 'grant_type=authorization_code&code={your_code}&client_id={your_client_id}&client_secret={your_client_secret}' \`
`-X POST`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T14:20:15.563

我一直有同样的问题，约翰的解决方案奏效了。您需要将它们编码为 POST 数据，而不是像获取访问代码时那样在 url 中包含参数。

我正在使用适用于 Chrome 的 Postman 插件，并在单击按钮 `Key-Value`后在下方字段中输入参数。`x-www-form-urlencoded`

# mysql - MYSQL 中的条件排序。应该影响行的一部分

> ID：14249663
> 
> 赞同：2
> 
> 时间：2013-01-10T01:55:04.397
> 
> 标签：mysql, sql-order-by

![在此处输入图像描述](../Images/2dfb5aaee8e6aef51038ba62aac19244.png)

左表是我查询的结果。我需要将其排序为正确的表格。

我需要`order by p_id`，如果`level >= 2`。右表的蓝色框是 的目标`order by`。

是否可以？当然这是一个例子。实际数据有数百个，确实需要排序。

我搜索了很多，但找不到相同的案例。

编辑：此表将返回为`java.util.ArrayList`. 如果这种'order by' 是不可能的，它可能在`java.util.ArrayList`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T02:12:42.477

我确信在 MySQL 中的一个查询中是不可能的。

在右侧的图表中，订购分两个单独的步骤完成：

1.  按编号排序

2.  如果 level >= 2，则按 p_id 对每个块进行排序

这在 MySQL 中很难做到，因为您需要识别块然后迭代它们，分别对每个块进行排序。

我已经做了类似的事情，需要在块内排序，然后从这些有序块中进行选择。你可以[在这里](https://gist.github.com/4498861)查看，但正如我所说，我认为 SQL 代码非常复杂，涉及 5 个临时表。您可能需要更少的临时表，但这仍然是一个非常复杂的过程，非常缓慢且难以维护。

> “实际数据有数百个，确实需要整理。”

有什么理由不能在代码中随意排序吗？

```
$blockStart = FALSE;
$count = 0;

foreach($dataArray as $data){

   if($blockStart === FALSE){
      $blockStart = $count;
   }

   if($data['level'] < 2){ //Block has finished
       sortBlock($dataArray, $blockStart, $count);
       $blockStart = $count;
   } 

    $count++;
}

sortBlock($dataArray, $blockStart, $count - 1);

function sortBlock($dataArray, $indexStart, $indexEnd){

    //Sort the elements of $dataArray, between $indexStart and $indexEnd inclusive
    //by the value of p_id
} 
```

当你可以在 Java 中用 1/10 的程序员时间解决它（并且可能让它执行得更快）时，试图解决 MySQL 中的一般编程问题并不是一个好的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:04:32.750

可以在 SQL 中执行此操作，但在 MySQL 中这将是一个非常非常复杂的查询。这是方法。

(1) 创建一个子查询，该子查询具有原始 id 和某事物是否处于第 2 级的指示符。此表中的 id 将定义最终订单。

(2) 接下来，为上表中的每个组创建一个单独的计数器。在其他数据库中，您将使用`row_number()`. 在我的 SQL 中，这需要一个相关的子查询。这提供了从 id 到新排序的映射。

(3) 接下来，为每个组创建一个计数器，但这次使用所需的顺序（根据非 level2 组的 id，根据您的排序规则）。

(4) 将表连接在一起以获得匹配。

(5) 按原id排序。

这是一个尝试：

```
select altord.*
from (select t.*,
             (select count(*) from t t2 where t2.id <= t.id and ((t2.level = 2 and t1.level = 2) or (t2.level <> 2 and t1.level <> 2))
             ) as seqnum
      from t
     ) ord join
     (select t.*,
             (select count(*) from t t2 where (t2.id <= t.id and t2.level <> 2 and t.level <> 2) or (t2.level = 2 and t.level = 2 and (t2.pid < t.pid or t2.pid = t.pid and t2.id < t.id)))
             ) as seqnum
    ) altord
    on ord.seqnum = altord.seqnum
order by ord.id 
```

我不确定这个 SQL 是否正确，但这个想法可以在单个查询中实现。

# java - 您如何使用单独的类来确定结果？

> ID：14249675
> 
> 赞同：-1
> 
> 时间：2013-01-10T01:56:22.370
> 
> 标签：java, arrays, list, arraylist

我的问题出在我的“NumberAnalyzer.java”类中，我应该能够使用“Number.java”类来确定 ArrayList 中的数字是否为奇数（以及稍后的偶数和完美数），但因为“Number.java”中的“isOdd()”方法本身不会读取 int 或其他变量，我无法找到一种方法来测试每个数字以在“NumberAnalyzer”的“countOdds”方法中生成“oddCount” .java" 增加以从 runner 类生成字符串中奇数的数量。

**NumberAnalyzer.java**

```
import java.util.ArrayList;
import java.util.Scanner;

import com.sun.xml.internal.ws.api.pipe.NextAction;

import static java.lang.System.*;

public class NumberAnalyzer
{
private ArrayList<Number> list;

public NumberAnalyzer()
{

}

public NumberAnalyzer(String numbers)
{
    list = new ArrayList<Number>();
    String nums = numbers;
    Scanner chopper = new Scanner(nums);
    while(chopper.hasNext()){
        int num = chopper.nextInt();
        list.add(new Number(num));
    }
    chopper.close();
    System.out.println(list);
}

public void setList(String numbers)
{
    list = new ArrayList<Number>();
    String nums = numbers;
    Scanner chopper = new Scanner(nums);
    while(chopper.hasNext()){
        int num = chopper.nextInt();
        list.add(new Number(num));
    }
    chopper.close();

}

public int countOdds()
{
  int oddCount=0;
  for(int i = 0; i < list.size(); i++){
      if(Number.isOdd()== true){
          oddCount++;
      }
  }
  return oddCount;
}

public int countEvens()
{
  int evenCount=0;

  return evenCount;
}

public int countPerfects()
{
    int perfectCount=0;

  return perfectCount;
}

public String toString( )
{
    return "";
}
} 
```

**数字.java**

```
public class Number
{
private Integer number;

public Number()
{

}

public Number(int num)
{
    number = num;
}

public void setNumber(int num)
{
    number = num;
}

public int getNumber()
{
    return number;
}   

public boolean isOdd()
{
    if(number%2==0){
        return false;
    }
    return true;
}

public boolean isPerfect()
{
    int total=0;
    for(int i = 1; i < number; i++){
        if(number%i==0){
            total+= i;
        }
    }

    return (number==total);
}   

public String toString( )
{
    String output = getNumber() + "\n" + getNumber()+ "isOdd == " + isOdd() + "\n" + getNumber()+ "isPerfect==" + isPerfect()+ "\n\n";
    return output;
}
} 
```

**跑步者班**

```
import java.util.ArrayList;
import java.util.Scanner;
import static java.lang.System.*;

public class Lab16b
{
public static void main( String args[] )
{
    NumberAnalyzer test = new NumberAnalyzer("5 12 9 6 1 4 8 6");
    out.println(test);
    out.println("odd count = "+test.countOdds());
    out.println("even count = "+test.countEvens());
    out.println("perfect count = "+test.countPerfects()+"\n\n\n");

    //add more test cases

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:47:54.123

你打电话时

```
test.countOdds()); 
```

控制转到 NumberAnalyzer.java

```
public int countOdds()
{
  int oddCount=0;
  for(int i = 0; i < list.size(); i++){
      if(Number.isOdd()== true){
          oddCount++;
      }
  }
  return oddCount;
} 
```

在这里，您`Number.isOdd()`通过类名调用方法作为静态方式，但我认为您不能这样做，因为`isOdd()`它不是静态的。

这是编译时错误

**解决方案：**

迭代您的列表并将值从列表中一一发送到`isOdd(int val)`方法。

尝试将`isOdd()`方法设为静态，它接受一个数字参数并返回真或假。

像你一样根据返回类型增加你的计数器。

# c# - 在 asp.net 中执行批量 CRUD 操作的更好方法

> ID：14249679
> 
> 赞同：0
> 
> 时间：2013-01-10T01:56:47.160
> 
> 标签：c#, asp.net, sql-server, asp.net-mvc

我目前正在开发一个 asp.net 应用程序，它允许用户上传 CSV 文件并读取和更新 SQL 表中的值。通常可能有 500 条记录和 8 个参数。

使用 sqlbulkcopy，可以将 CSV 文件直接上传到表中。但是此选项需要将所有逻辑写入另一个存储过程并在批量复制后调用它。

如果我可以遵循任何其他方法来实现这一点，请告诉我。

注意：表参数不是一个选项，因为它是 SQL Server 2005。

# .net - 使用 context.Entry() 在 EF 5 中执行部分更新的异常

> ID：14249680
> 
> 赞同：1
> 
> 时间：2013-01-10T01:56:51.760
> 
> 标签：.net, entity-framework, entity-framework-5, dbcontext

我正在尝试使用 DbContext 方法仅对已更改的字段执行更新，[如](https://stackoverflow.com/a/5567616/41211)`Entry()`StackOverflow 上所述：

当我在我的`Name`和`StartDate`字段上执行此操作时，一切都运行良好，我的 SQL UPDATE 语句在更新过程中仅包含 Name 和 StartDate，而不是我的实体的每个字段，但是当我现在尝试更新子对象的属性时当`Company.TradingName`我收到此异常时：

> *“属性路径 'Company.TradingName' 中的属性 'Company' 不是类型 'Franchise' 的复杂属性。属性路径必须由除最终属性之外的所有复杂属性组成。”*

我的代码只是像这样遍历字段 ( `new[] {"Name", "StartDate", "Company.TradingName"}`)的字符串数组（`item`我的特许经营实体在哪里我的属性属于）：

```
foreach (var propertyName in changedPropertyNames)
{
    _context.Entry(item).Property(propertyName).IsModified = true;
} 
```

有任何想法吗？更新复杂属性*应根据*[此处](http://msdn.microsoft.com/en-us/data/jj592677)EF 文档的“获取和设置复杂属性的当前值或原始值”部分中的文档进行。

* * *

请求的模型（由 EF5 生成）：

```
public partial class Franchise
{
    public System.Guid Id { get; set; }
    public string Name { get; set; }
    public System.DateTime StartDate { get; set; }

    public virtual Company Company { get; set; }
} 
```

该`Company`模型也非常简单，只有公共字符串 Name、TradingName 和其他一些。没有什么邪恶的东西可以干扰我不会想到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:13:44.880

`Company`似乎不是一个复杂的属性，而是一个导航属性，因此您无法使用虚线属性路径访问它。您需要获取相关实体的条目，然后将属性设置为相应修改。

# python - 如何将前缀应用于字典访问？

> ID：14249683
> 
> 赞同：3
> 
> 时间：2013-01-10T01:57:00.757
> 
> 标签：python

我正在模仿`ConfigParser`模块的行为来编写一个高度专业化的解析器，该解析器利用我使用的特定应用程序的配置文件中的一些明确定义的结构。配置文件的几个部分包含数百个以`Variable_`或为前缀的变量和例程映射`Routine_`，如下所示：

```
[Map.PRD]
Variable_FOO=LOC1
Variable_BAR=LOC2
Routine_FOO=LOC3
Routine_BAR=LOC4
...

[Map.SHD]
Variable_FOO=LOC1
Variable_BAR=LOC2
Routine_FOO=LOC3
Routine_BAR=LOC4
... 
```

我想保持`ConfigParser`每个部分存储为单个字典的基本结构，因此用户仍然可以访问经典语法：

```
config.content['Mappings']['Variable_FOO'] = 'LOC1' 
```

但也可以使用深入到本节的简化 API：

```
config.vmapping('PRD')['FOO'] = 'LOC1'
config.vmapping('PRD')['BAR'] = 'LOC2'
config.rmapping('PRD')['FOO'] = 'LOC3'
config.rmapping('PRD')['BAR'] = 'LOC4' 
```

目前，我正在通过将部分存储在一个特殊的子类中`dict`来实现这一点，我已经在该子类中添加了一个`prefix`属性。解析器的`variable`and属性将-like 对象的属性设置为or然后修改句柄的属性，将前缀与键粘合在一起以访问适当的项目。它正在工作，但涉及大量样板来实现所有相关的细节，如支持迭代。`routine``prefix``dict``'Variable_'``'Routine_'``__getitem__``__setitem__``dict`

我想我的理想解决方案是放弃子类`dict`，并让`variable`and`routine`属性以某种方式呈现`dict`下面没有前缀的普通对象的“视图”。

## 更新

这是我实施的解决方案，主要基于@abarnet 的回答：

```
class MappingDict(object):
    def __init__(self, prefix, d):
        self.prefix, self.d = prefix, d
    def prefixify(self, name):
        return '{}_{}'.format(self.prefix, name)
    def __getitem__(self, name):
        name = self.prefixify(name)
        return self.d.__getitem__(name)
    def __setitem__(self, name, value):
        name = self.prefixify(name)
        return self.d.__setitem__(name, value)
    def __delitem__(self, name):
        name = self.prefixify(name)
        return self.d.__delitem__(name)
    def __iter__(self):
        return (key.partition('_')[-1] for key in self.d
                if key.startswith(self.prefix))
    def __repr__(self):
        return 'MappingDict({})'.format(dict.__repr__(self))

class MyParser(object):
    SECTCRE = re.compile(r'\[(?P<header>[^]]+)\]')
    def __init__(self, filename):
        self.filename = filename
        self.content = {}
        lines = [x.strip() for x in open(filename).read().splitlines() 
                 if x.strip()]
        for line in lines:
            match = re.match(self.SECTCRE, line)
            if match:
                section = match.group('header')
                self.content[section] = {}
            else:
                key, sep, value = line.partition('=')
                self.content[section][key] = value
    def write(self, filename):
        fp = open(filename, 'w')
        for section in sorted(self.content, key=sectionsort):
            fp.write("[%s]\n" % section)
            for key in sorted(self.content[section], key=cpfsort):
                value = str(self.content[section][key])
                fp.write("%s\n" % '='.join([key,value]))
            fp.write("\n")
        fp.close()
    def vmapping(self, nsp):
        section = 'Map.{}'.format(nsp)
        return MappingDict('Variable', self.content[section])
    def rmapping(self, nsp):
        section = 'Map.{}'.format(nsp)
        return MappingDict('Routine', self.content[section]) 
```

它是这样使用的：

```
config = MyParser('myfile.cfg')
vmap = config.vmapping('PRD')
vmap['FOO'] = 'LOC5'
vmap['BAR'] = 'LOC6'
config.write('newfile.cfg') 
```

由此产生`newfile.cfg`的反映`LOC5`和`LOC6`变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T02:22:56.293

我不认为你想在这里继承。您最终会得到两个单独的`dict`对象，您必须在加载时创建它们，然后在保存时将它们粘贴在一起......</p>

如果这是可以接受的，那么您甚至不需要在正常操作期间为前缀而烦恼；只需在保存时添加前缀，如下所示：

```
class Config(object):
    def save(self):
        merged = {'variable_{}'.format(key): value for key, value 
                  in self.variable_dict.items()}
        merged.update({'routine_{}'.format(key): value for key, value 
                       in self.routine_dict.items()}
        # now save merged 
```

如果您希望该`merged`对象始终可见，但不希望经常被调用，请将其设为`@property`.

如果您想`merged`定期访问字典，同时访问两个子字典，那么是的，您需要一个视图：

> 我想我的理想解决方案是放弃子类 dict 并让全局和例程属性以某种方式呈现下面没有前缀的普通 dict 对象的“视图”。

这对于继承将是非常困难的。当然不是继承自`dict`; 如果您使用的是 Python 3，继承 from`builtins.dict_items`可能会起作用，但它似乎仍然有些牵强。

但是有了委托，这很容易。每个子字典只包含对 parent 的引用`dict`：

```
class PrefixedDict(object):
    def __init__(self, prefix, d):
        self.prefix, self.d = prefix, d
    def prefixify(self, key):
        return '{}_{}'.format(self.prefix, key)
    def __getitem__(self, key):
        return self.d.__getitem__(self.prefixify(key))
    def __setitem__(self, key, value):
        return self.d.__setitem__(self.prefixify(key), value)
    def __delitem__(self, key):
        return self.d.__delitem__(self.prefixify(key))
    def __iter__(self):
        return (key[len(self.prefix):] for key in self.d 
                if key.startswith(self.prefix)]) 
```

你不会以这种`dict`方式免费获得任何方法——但这是一件好事，因为无论如何它们大多都不正确，对吧？明确委派你想要的人。（如果您确实有一些想要按原样通过，请使用`__getattr__`它。）

除了在概念上更简单且更难因意外忘记覆盖某些内容而搞砸之外，这还意味着它`PrefixDict`可以使用任何类型的映射，而不仅仅是`dict`.

* * *

所以，无论你走哪条路，这些对象是在哪里以及如何创建的？

简单的答案是它们是您在构造 a 时创建的属性`Config`：

```
def __init__(self):
    self.d = {}
    self.variable = PrefixedDict('Variable', self.d)
    self.routine = PrefixedDict('Routine', self.d) 
```

如果这需要是动态的（例如，可以有任意一组前缀），请在加载时创建它们：

```
def load(self):
    # load up self.d
    prefixes = set(key.split('_')[0] for key in self.d)
    for prefix in prefixes:
        setattr(self, prefix, PrefixedDict(prefix, self.d) 
```

如果您希望能够即时创建它们（所以`config.newprefix['foo'] = 3`添加`'Newprefix_foo'`），您可以这样做：

```
def __getattr__(self, name):
    return PrefixedDict(name.title(), self.d) 
```

但是一旦你使用了动态属性，你真的不得不质疑使用字典（项目）语法是否更简洁，比如`config['newprefix']['foo']`. 一方面，这实际上会让你调用其中一个子字典`'global'`，就像你原来的问题一样......</p>

或者您可以首先构建字典语法，使用通常称为的`attrdict`（搜索 ActiveState recipes 和 PyPI 以获取 3000 个实现......），它可以让您自动生成`config.newprefix`mean `config['newprefix']`，因此您可以在具有有效标识符时使用属性语法，但回退当您不这样做时，请使用字典语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:50:42.823

如何进行有几个选项。

最简单的可能是使用嵌套字典，所以`Variable_FOO`变成`config["variable"]["FOO"]`. 您可能希望将 a`defaultdict(dict)`用于外部字典，以便在向它们添加第一个值时不必担心初始化内部字典。

另一种选择是在单个字典中使用元组键。也就是说，`Variable_FOO`会变成`config[("variable", "FOO")]`。使用代码很容易做到这一点，因为您可以简单地分配给`config[tuple(some_string.split("_"))]`. 不过，我想在这种情况下，您也可以只使用未拆分的字符串作为您的密钥。

最后一种方法允许您使用所需的语法（在哪里`Variable_FOO`访问为`config.Variable["FOO"]`），通过在幕后使用`__getattr__`and a ：`defaultdict`

```
from collections import defaultdict

class Config(object):
    def __init__(self):
        self._attrdicts = defaultdict(dict)

    def __getattr__(self, name):
        return self._attrdicts[name] 
```

您可以使用 for 的行为来扩展它`__setattr__`，`__delattr__`但可能没有必要。这种方法的唯一严重限制（给定问题的原始版本）是属性名称（如`Variable`）必须是合法的 Python 标识符。您不能使用带有前导数字的字符串、Python 关键字（如`global`）或包含空格字符的字符串。

这种方法的一个缺点是它更难以以编程方式使用（例如，通过您的配置文件解析器）。要读取 的值`Variable_FOO`并将其保存，`config.Variable["FOO"]`您可能需要使用全局`getattr`函数，如下所示：

```
 name, value = line.split("=")
 prefix, suffix = name.split("_")
 getattr(config, prefix)[suffix] = value 
```

# ruby-on-rails - rails - 从终端隐藏“编码源”

> ID：14249684
> 
> 赞同：0
> 
> 时间：2013-01-10T01:57:07.403
> 
> 标签：ruby-on-rails

我是 ROR 的新手，我在处理所有向终端窗口吐出的文本时遇到问题。主要是，我网页中的 html 在终端窗口中重复出现，我真的只是想看看重要的东西比如 sql 查询和错误消息。我浪费了很多时间在终端窗口中滚动，试图从填满屏幕的所有 HTML 中找到我需要的 b/c。

是否有禁用“编码源”输出的选项？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:35:05.130

您可以提高您的日志级别
Rails 指南提供了一个很好的示例
[http://guides.rubyonrails.org/debugging_rails_applications.html#log-levels](http://guides.rubyonrails.org/debugging_rails_applications.html#log-levels)
确保您是否正在开发以更改它`config/environments/development.rb`

我不知道这是否真的能解决你的问题，因为我不确定你正在寻找什么输出。较高的日志级别可能会将婴儿与洗澡水一起扔掉。

# mysql - SELECT id HAVING 最大数量的 id

> ID：14249689
> 
> 赞同：15
> 
> 时间：2013-01-10T01:57:48.647
> 
> 标签：mysql, sql, select, group-by, having-clause

有一个包含 item_id 和 color_id 的产品表。我正在尝试获取具有最多非空实例的 color_id 。

这失败了：

```
SELECT color_id 
  FROM products 
 WHERE item_id=1234 
 GROUP BY item_id 
HAVING MAX(COUNT(color_id)) 
```

和

```
Invalid use of group function 
```

这

```
SELECT color_id, COUNT(color_id)
  FROM products 
 WHERE item_id=1234 
 GROUP BY item_id 
```

退货

```
color_id count
1, 323
2, 122
3, 554 
```

我正在寻找具有最多实例的 color_id 3。

有没有一种快速简便的方法可以在没有 2 个查询的情况下获得我想要的东西？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-10T02:03:26.397

```
SELECT color_id AS id, COUNT(color_id) AS count 
FROM products 
WHERE item_id = 1234 AND color_id IS NOT NULL 
GROUP BY color_id 
ORDER BY count DESC
LIMIT 1; 
```

这将为您提供 color_id 和该 color_id 的计数，按从最大到最小的计数排序。我想这就是你想要的。

* * *

为您的编辑...

```
SELECT color_id, COUNT(*) FROM products WHERE color_id = 3; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-10T02:05:18.880

```
SELECT color_id
FROM
    (
        SELECT  color_id, COUNT(color_id) totalCount
        FROM    products 
        WHERE   item_id = 1234 
        GROUP   BY color_id 
    ) s
HAVING totalCount = MAX(totalCount) 
```

**更新 1**

```
SELECT  color_id, COUNT(color_id) totalCount
FROM    products 
WHERE   item_id = 1234 
GROUP   BY color_id 
HAVING  COUNT(color_id) =
(
  SELECT  COUNT(color_id) totalCount
  FROM    products 
  WHERE   item_id = 1234 
  GROUP   BY color_id 
  ORDER BY totalCount DESC
  LIMIT 1  
) 
```

*   [SQLFiddle 演示（*有领带*）](http://sqlfiddle.com/#!2/8b660/5)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T02:13:16.757

```
SELECT 
  color_id, 
  COUNT(color_id) AS occurances
FROM so_test
GROUP BY color_id
ORDER BY occurances DESC
LIMIT 0, 1 
```

这是一个带有基本表的示例小提琴，显示它的工作原理：[sql fiddle](http://sqlfiddle.com/#!2/bcced/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-13T13:52:59.220

为简单起见，在 Oracle 中使用内置函数（仅适用于 Oracle 数据库 11g+ 版本）：

```
select stats_mode(color_id) from so_test 
```

这将返回颜色 ID 的最高出现次数。

# sql - 如何尽可能公平地进行 SQL 查询性能测试？

> ID：14249691
> 
> 赞同：0
> 
> 时间：2013-01-10T01:58:08.280
> 
> 标签：sql, performance, sql-server-2008

我正在使用 SQL Server 2008 R2 并试图测试一些具有不同写作风格的 SQL 查询的性能。这些涉及 udf、视图、内联、连接、枢轴等。

经过相当多的测试，我可以说 udf 超级慢，所以现在我将它们扩展到我的查询中。但是随着性能测试的进行，我越来越难以区分，因为我得到的结果不一致。

例如，我测试了一个充满连接的查询和一个将一些连接移动到内联选择的查询。内联样式的性能越来越好，直到我将所有连接都移到内联选择中，它的性能比原来的差得多。

另一件事是执行时间，这是非常不可靠的。对于同一个查询，执行时间也不同且不一致。就像我打开 SQL Profiler 时一样，即使我看到更高的 CPU 时间，Reads，Writes，执行时间也可以更快！

我真的需要一个尽可能公平的好方法来测试 SQL 查询。执行计划没有帮助。我需要诸如 CPU 周期（而不是经过时间）、读取、写入、内存之类的数字，这些数字是我可以计算的并且是一致的。我需要一种方法来强制使用相同的测试环境。我尝试了 DBCC DROPCLEANBUFFERS，但这没有帮助。

谢谢！

# api - 在 API 中实现刷新令牌

> ID：14249692
> 
> 赞同：1
> 
> 时间：2013-01-10T01:58:12.267
> 
> 标签：api, authentication, access-token

现在我的网站有一个使用签名密钥身份验证（使用 PHP 客户端访问）保护的 API。现在，我想介绍使用 JavaScript 客户端与某些端点一起使用。

我所做的是要求客户端通过 PHP 客户端进行身份验证并接收访问令牌和刷新令牌。然后它能够​​将该令牌传递给 javascript 客户端，并可以从那里访问端点。

现在，我遇到的问题是在访问令牌过期时刷新它。有没有一种方法可以在不需要客户端再次使用 PHP 客户端的情况下完成此操作？

我不想使用 PHP 客户端的原因是因为使用 api 的应用程序完全用 javascript 编写，因此使用 php 客户端需要重定向页面，从而丢失应用程序的状态。

我不想使用 OAuth，因为我不希望用户必须授予对客户端的访问权限。我拥有客户端和 api，并且永远不会创建任何 3rd 方客户端。

# image-processing - 如何使归一化互相关对均匀区域的微小变化具有鲁棒性

> ID：14249694
> 
> 赞同：2
> 
> 时间：2013-01-10T01:58:22.093
> 
> 标签：image-processing, statistics

问题描述如下：

给定两组数据：A= { 91 87 85 85 84 90 85 83 86 86 90 86 84 89 93 87 89 91 95 97 91 92 97 101 101 }，

B = {133 130 129 131 133 136 131 131 135 135 133 133 133 131 135 131 129 131 132 132 130 127 129 137 134}，

如果 A 表示来自 (x,y) 位置周围背景图像的一组像素，则 B 表示来自不同图像的 (x,y) 周围光照变化的另一组像素。

计算得到的归一化互相关 (NCC) = 0.184138251（来自[http://en.wikipedia.org/wiki/Cross-correlation#Normalized_cross-correlation](http://en.wikipedia.org/wiki/Cross-correlation#Normalized_cross-correlation)）

计算出来的 NCC 告诉我们集合 A 与集合 B 不同。但实际上，A 和 B 是不同光照条件下的同一组像素。

这表明 NCC 对相对变化很小的数据集的微小变化非常敏感。例如，如果标准差和平均值之间的比率代表每个数据集中的相对变化，那么在集合 A = 0.057684745 中，在集合 B = 0.018484007 中的相对变化。

谁能帮我弄清楚如何在 NCC 公式中加入相对变化因子，因此修改后的 NCC 对数据集中的小变化具有鲁棒性，其中每组内的变化非常小？此外，修改后的 NCC 的输出仍然需要为 -1 到 1。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:38:44.147

这里有两个问题：

1.  对噪声具有鲁棒性
2.  对光照变化具有鲁棒性。

对于噪声鲁棒性，我建议您应用一些去噪算法。根据您的应用程序、计算约束、知识……您可以尝试简单的中值滤波，或更复杂的双边滤波或非局部方法。这些算法中的每一个都将保留图像的大部分精细结构（这对 NCC 很重要）。

然后，为了对光照变化具有鲁棒性，您可以先应用一个简单的直方图匹配过程。如果效果不够好，您应该尝试由 Julie Delon 专门针对这种立体匹配案例开发的[Midway 算法(pdf)。](http://perso.telecom-paristech.fr/~delon/Pdf/2004_Midway_Image_Equalization_JMIV.pdf)它相对容易实现（我使用 OpenCV/C++ 在几个小时内就完成了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:39:50.520

在相关之前标准化图像可能会有所帮助！如果您有选择，我建议您在 [这里](http://www.ee.oulu.fi/mvg/files/pdf/acivs08-bcifsm.pdf)测试相位相关性，您会发现一篇非常有趣的论文，希望对您有所帮助

# ruby - 为什么在 Ruby 中 Float::INFINITY == Float::INFINITY？

> ID：14249697
> 
> 赞同：6
> 
> 时间：2013-01-10T01:59:05.613
> 
> 标签：ruby, math

在数学中 2 无穷大不相等，也不大于或小于那时。那么给了什么？

在 irb 中，Float::INFINITY == Float::INFINITY（在 ruby​​ 1.9.3 中测试）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T02:08:54.580

用更专业的术语来说，这一切都归结为浮点运算的 IEEE 754 标准。

> IEEE 754 标准确实隐含地将 Infinity == Infinity 定义为 true。标准的相关部分是第 5.7 节：“[在两个 IEEE 754 值之间] 可能存在四种互斥关系：小于、等于、大于和无序。最后一种情况出现在至少一个操作数为 NaN 时。”
> 
> 在任何一对浮点值之间，这四种关系中的一种是正确的。因此，由于 Infinity 不是 NaN，因此 Infinity 就自身而言不是无序的。让 (Infinity < Infinity) 和 (Infinity > Infinity) 之一为真不会是一致的，因此 (Infinity == Infinity)。

这取自[http://compilers.iecc.com/comparch/article/98-07-134](http://compilers.iecc.com/comparch/article/98-07-134)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T02:03:53.073

虽然在大多数集合论中存在多种不同的无穷大，但实数表示的无穷大通常表示[扩展实数线](http://en.wikipedia.org/wiki/Extended_real_number_line)的无穷大，其中 +∞ 和 -∞ 是专门选择大于和小于所有实数的值。在此设置中，∞ = ∞ 和 -∞ = -∞。

不相等的集合理论无穷大是[基数](http://en.wikipedia.org/wiki/Cardinal_number)或[序数](http://en.wikipedia.org/wiki/Ordinal_number)，通常不会用浮点值表示。它们分别测量集合中的大小和位置，因此最好作为另一种类型的概括，例如整数类型。如果您想存储这些类型的值，您可能会有一个自定义类型来表示无限序数或无限基数。

此外，集合论的无穷大绝对有可能彼此相等。ℵ [0] = ℵ [0]，例如（尽管 ℵ [0] ≠ ℵ [1]）。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T02:10:29.577

大多数现代计算机使用 IEEE 浮点数来表示实数。这些提供了对实数的近似值，而不是真实的东西。特别是有两个值代表所有无限值，+infinity 和 -infinity。就像你不能用二进制完全准确地表示 0.1 或 1/3 一样，无穷大是近似值。

因此，所有+无穷大彼此相等，所有-无穷大彼此相等。

# rally - TestSet 对象上的 TestCases 字段为空

> ID：14249703
> 
> 赞同：3
> 
> 时间：2013-01-10T02:00:12.487
> 
> 标签：rally

我编写了一个 Rally 应用程序来报告测试集和测试用例。今天突然间，我的应用程序在它的查询中没有得到任何 TestCases。

为了简化这一点，我将把我的应用程序排除在外，我只是使用 Web 服务 api 运行查询：[https ://rally1.rallydev.com/slm/doc/webservice/index.jsp?version=1.40](https://rally1.rallydev.com/slm/doc/webservice/index.jsp?version=1.40)

如果我查询一个测试集，那么应该包含测试集中的测试用例列表的测试用例字段对于肯定有测试用例的测试集返回为空。直到最近几天的某个时候，这一直运行良好（我们今天使用了该应用程序，并且在我们最后一次使用它时没有得到任何测试用例，我们得到了并且没有发生任何变化）。

如果我在 Rally 的 Track->Iteration Status 中查看测试用例并展开测试集以查看所有测试用例，它们就会出现。所以它们就在那里，只是出于某种原因，Web 服务 API 没有返回它们。

在过去的两个小时里，我一直在阅读 API 文档并搜索 Google 以查看是否有其他人遇到过这个问题，或者是否有任何改变导致了这个问题，但我没有找到任何东西。

我已经确认包含 TestCase 对象列表的其他对象（例如 TestFolders）正确地返回了 TestCase 列表。我还确认我能够查询应在列表中返回的各个 TestCases。我还确认我能够查询特定 TestSet 和 TestCase 的 TestCaseResult。

所以我真的很难过。看起来好像只是 TestSet.TestCases 不起作用，我无法找到任何具体的原因或关联可能是原因的不相关的东西。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:42:07.887

Rally 的 DevOps 团队在 2013 年 1 月 10 日晚上发布了针对此问题的修复程序。通过 WSAPI 进行的 TestSet 查询应该再次与成员 TestCases 进行适当的水合。如有任何问题或疑虑，请联系[Rally 支持。](http://www.rallydev.com/open-support-case)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:46:03.540

这是一个错误 - Rally 的工程团队已经意识到这个问题并正在努力修复。[请向Rally 支持](http://www.rallydev.com/open-support-case)提交案例，以报告/获取有关缺陷解决方案的状态更新。

# php - 选择“请选择”选项时如何清空选择框

> ID：14249704
> 
> 赞同：0
> 
> 时间：2013-01-10T02:00:14.630
> 
> 标签：php, jquery

我有一个下拉菜单和一个空的选择框：

```
<select name="session" id="sessionsDrop">
    <option value="">Please Select</option>
    <option value='20'>EWYGC - 10-01-2013 - 09:00</option>
    <option value='22'>WDFRK - 11-01-2013 - 10:05</option>
</select> </p> 

$studentSELECT = "";  
$studentSELECT .= '<select name="studenttextarea" id="studentselect" size="6">';
$studentSELECT .= '</select>'; 
```

以上在`addstudent.php`页面中：

现在发生的事情是我有一个 php 代码，根据从下拉菜单中选择的评估，它运行一个查询，如果找到来自 db 的行，它会在选择框中显示学生列表，如果没有行找到然后它只是显示一条消息，说明在选择框中的评估中没有找到学生。下面的代码位于`addedstudents.php`页面中，可通过 ajax 访问。

```
$studentnum = $currentstudentstmt->num_rows();   
$studentSELECT = "";     

if($studentnum == 0){
    $studentSELECT .= "<option disabled='disabled' class='red' value=''>No Students currently in this Assessment</option>"; 
} else {   
    while ( $currentstudentstmt->fetch() ) {
       $studentSELECT .= sprintf("<option disabled='disabled' value='%s'>%s - %s %s</option>", $dbStudentId, $dbStudentAlias, $dbStudentForename, $dbStudentSurname) . PHP_EOL; 
    }
}

echo $studentSELECT; 
```

我遇到的问题是，如果用户选择该`Please Select`选项，它仍会显示消息，指出未找到任何评估，这是因为此查询中显然没有模块，因此它认为没有行显示该消息。但是如果选择了该选项，我不希望它被显示`Please Select`，我只希望选择框为空。

问题是，即使我尝试使用 jquery 来执行此操作，但发生的情况是选择框变空，但几毫秒后又返回消息。

我的问题是，如果`Please Select`从下拉菜单中选择该选项，那么能够显示空选择框的最佳方法是什么？

下面是通过 jquery 的尝试：

```
$('#sessionsDrop').change( function(){
    if( $(this).val() == '' ){
        $('#studentselect').val('');                   
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:08:02.543

只需添加`disabled`到“请选择”框的标记，如下所示：

```
<select name="session" id="sessionsDrop">
    <option disabled value="">Please Select</option>
    <option value='20'>EWYGC - 10-01-2013 - 09:00</option>
    <option value='22'>WDFRK - 11-01-2013 - 10:05</option>
</select> </p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:11:52.710

不是最好的方法，但它与 jquery ......

```
.ajax({
    success: function () {
        //your current code here 
        if ($('#sessionsDrop').val() == "") {
            $('#studentselect').children().remove();
        }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T06:04:53.250

你有两个选择；在 UI 级别或服务器级别或两者上过滤它。

1.）在 js/jquery 级别（我只需要给你一个描述/伪代码，这样你就可以解释这个）

如果选择的值是`""`然后不继续，则过滤掉；与@vortextangent 的答案相同，仅检查您是否`$('#sessionsDrop').val() != ""`应该继续

2.）在服务器端级别我假设在你可以查询你的数据库之前你有这个 `$_POST['session']`或`$_GET['session']`包含下拉列表的值

如果`$_POST['session']`或`$_GET['session']`两者都是`''`（空白），你只需要抓住它，你不应该继续进行数据库查询

# c++ - 可以在 OpenCV 中隐藏带有 cv 前缀的函数吗？

> ID：14249706
> 
> 赞同：0
> 
> 时间：2013-01-10T02:00:27.917
> 
> 标签：c++, c, opencv

我正在使用 C++，并使用“g++”编译和链接到 OpenCV2。困扰我的一件事是所有旧的 cv 前缀函数仍然可用并且“污染”了我的应用程序。

是否可以使 OpenCV1 C cv 前缀函数在我的应用程序范围内不可用，而只保留 OpenCV2`cv::`命名空间函数？

注意：我有一段时间没有写 C，所以如果这是一个愚蠢的问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:42:51.000

It depends on what do you really need. If you just want to make this code:

```
CvArr *arr;
cvAvg(arr);
cvAcc(arr, arr); 
```

"not working" - you can just add this:

```
#define cvAvg nothing_interesting_cvAvg
#define cvAcc nothing_interesting_cvAcc
//you can change nothing_interesting_... to anything, but you can't use the same text more than once
//you include files
//...
//after your include files
#undef cvAvg
#undef cvAcc 
```

before including any OpenCV file. If you now try to compile code you will see:

```
error C3861: 'cvAvg': identifier not found 
```

If you change you code to use `nothing_interesting_cvAvg(arr);` instead of `cvAvg(arr);`, it will compile fine, but linker will fail, because:

```
: error LNK2019: unresolved external symbol _nothing_interesting_cvAvg referenced in function _main 
```

Note that this will work only for this 2 functions, so you will have to find all functions which you want to "disable" and write similar code manually.
Functions which use "deactivated" functions will work fine, because they are already compiled, linked, etc - you will just call them from some files without changing anything in this files.

# android - 当列表视图为空时如何对齐文本视图？

> ID：14249709
> 
> 赞同：0
> 
> 时间：2013-01-10T02:00:42.590
> 
> 标签：android, eclipse, android-layout, listview, android-listview

所以这是我的问题：

[![点击](../Images/a688dfba28546b1719fa1bc4fe765fdb.png)](https://i.stack.imgur.com/yzYBA.png)

我这里有一个`edittext`, 2`textviews`和 2 `listviews`。此活动的功能是搜索活动。当您键入某个单词或短语时，可能会在工具或文章中出现结果。我的主要问题是，当工具和文章都找不到那个词时，我想要红框中的那个，是这样的：

[![点击此处查看图片](../Images/9b31bcaf910cc694931319728005e27c.png)](https://i.stack.imgur.com/Di3B5.png)

但我不知道怎么做。我尝试隐藏`listview`s 但仍然失败。那么你能帮我解决这个问题吗？这是`xml`文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/navbar_search"
        android:paddingLeft="5dp" >

        <ImageView
            android:id="@+id/buttonBack"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:src="@drawable/btn_back" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/violet"
        android:padding="5dp" >

        <EditText
            android:id="@+id/editTextSearch"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="@string/hint_search"
            android:paddingLeft="35dp" >
        </EditText>

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/editTextSearch"
            android:layout_centerVertical="true"
            android:layout_marginLeft="5dp"
            android:src="@drawable/search" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="@color/blue"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:paddingTop="5dp" >

        <TextView
            android:id="@+id/textArticlesResult"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/label_articles"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@color/black"
            android:textStyle="bold" />

        <ListView
            android:id="@+id/listViewArticlesResult"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_below="@+id/textArticlesResult"
            android:cacheColorHint="@color/white"
            android:scrollbars="none" 
            android:visibility="gone" >
        </ListView>
    </RelativeLayout>
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="@color/blue"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:paddingTop="5dp" >

        <TextView
            android:id="@+id/textToolsResult"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:text="@string/label_tools"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@color/black"
            android:textStyle="bold" />

        <ListView
            android:id="@+id/listViewToolsResult"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_below="@+id/textToolsResult"
            android:cacheColorHint="@color/white"
            android:scrollbars="none" >
        </ListView>
    </RelativeLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="46dp" >

        <ImageView
            android:id="@+id/tabHome"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:contentDescription="@string/desc"
            android:scaleType="fitXY"
            android:src="@drawable/tab_home_unselected" />

        <ImageView
            android:id="@+id/tabFb"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:contentDescription="@string/desc"
            android:scaleType="fitXY"
            android:src="@drawable/tab_fb_unselected" />

        <ImageView
            android:id="@+id/tabSearch"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:contentDescription="@string/desc"
            android:scaleType="fitXY"
            android:src="@drawable/tab_search_selected" />

        <ImageView
            android:id="@+id/tabFaves"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:contentDescription="@string/desc"
            android:scaleType="fitXY"
            android:src="@drawable/tab_myfaves_unselected" />

        <ImageView
            android:id="@+id/tabSettings"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:contentDescription="@string/desc"
            android:scaleType="fitXY"
            android:src="@drawable/tab_settings_unselected" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:27:58.767

我所做的是以编程方式隐藏视图。就我而言，我想在内容提供者返回一个空字符串时隐藏 TextView。通过以下方式执行此操作：

```
TextView address = (TextView) findViewById(R.id.address);
address.setVisibility(View.GONE); 
```

当您通过以下方式获得非空字符串时，不要忘记重新启用 TextView：

```
address.setVisibility(View.VISIBLE); 
```

请注意，`View.INVISIBLE`这只会使 TextView 消失。 `View.GONE`使得 TextView 甚至没有在布局中考虑。

# javascript - 使用 Greasemonkey 向页面添加 html 内容的基本方法？

> ID：14249712
> 
> 赞同：19
> 
> 时间：2013-01-10T02:01:19.093
> 
> 标签：javascript, html, greasemonkey, tampermonkey

是否有一种 Greasemonkey 方法可以将基本 HTML 内容附加到`<body>`标签之后或结束之前的页面末尾？

我找到了 before/after 方法，但我需要知道可能会逐页更改元素的名称。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-10T02:09:39.053

快速而肮脏的方式：请仅`innerHTML`用于***全新***内容。

```
var newHTML         = document.createElement ('div');
newHTML.innerHTML   = '             \
    <div id="gmSomeID">             \
        <p>Some paragraph</p>       \
        etc.                        \
    </div>                          \
';

document.body.appendChild (newHTML); 
```

* * *

* * *

**一个完整的脚本**，展示了更好的 jQuery 方式（以及新的 ECMAScript 6，多行字符串）：

```
// ==UserScript==
// @name     YOUR_SCRIPT_NAME
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==
//--- The @grant directive is used to restore the proper sandbox.

$("body").append ( `
    <div id="gmSomeID">
        <p>Some paragraph</p>
        etc.
    </div>
` ); 
```

* * *

* * *

这两种方法都会像这样放置新内容：

```
<!-- NEW STUFF INSERTED HERE -->
</body> 
```

这是一个很好的地方。

即使 HTML 位于页面的*末尾*，您也可以使用 CSS 将其*显示*在任何地方，例如：

```
GM_addStyle ( "                         \
    #gmSomeID {                         \
        position:       fixed;          \
        top:            0px;            \
        left:           0px;            \
    }                                   \
" ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-19T01:53:10.970

如果您不想转义多行 html - 您可以将 HTML 放在本地文件中，然后使用`GM_getResourceText`. 确保您已[启用 Greasemonkey/Tampermonkey 以使用本地文件。](https://stackoverflow.com/questions/9931115/run-greasemonkey-on-html-files-located-on-the-local-filesystem)

例如：

```
// ==UserScript==
// @name         Tamper Test
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  try to take over the world!
// @author       You
// @match        file:///C:/david/sandbox/tampermonkey/tamper.html
// @require http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js
// @resource html      file:///C:/david/sandbox/tampermonkey/foo.html
// @resource style     file:///C:/david/sandbox/tampermonkey/style.css
// @grant        GM_addStyle
// @grant  GM_getResourceText
// ==/UserScript==

(function() {
    'use strict';

    $("body").append('<div id = "dwj-tamper">new content from tamper script</div>');  

    GM_addStyle(GM_getResourceText("style"));    
    $("body").append(GM_getResourceText("html"));

})(); 
```

如果篡改脚本仅供您自己使用，则此解决方案很好。您可以类似地在线保存资源。例如：

```
// @resource pastebin http://pastebin.com/raw/9WfbN24i

//...

 $("body").append(GM_getResourceText("pastebin")); 
```

也有效

[![在此处输入图像描述](../Images/24dc44292fa048a43d37df6b10a360a7.png)](https://i.stack.imgur.com/Obi7d.png)

# android - 为什么即使webView的OnTouchEvent返回false，父布局也无法获取到webview touchEvent？

> ID：14249715
> 
> 赞同：1
> 
> 时间：2013-01-10T02:01:28.737
> 
> 标签：android, webview, parent, touch-event

我将 webview 放入 LinearLayout，最外面的是 RelativeLayout。我希望 webview 对触摸事件做出反应（例如一些 javascript 效果），然后将事件传递给 RelativeLayout。RelativeLayout 是消费者。但是即使 webView 的 OnTouchEvent 返回 false，它的父 LinearLayout 也无法获取事件，更不用说 RelativeLayout。但是如果我将 webview 更改为 textview 它可以工作，我很困惑？

任何帮助将不胜感激。谢谢！

# xml - 从非xml格式中提取xml数据

> ID：14249716
> 
> 赞同：0
> 
> 时间：2013-01-10T02:01:28.957
> 
> 标签：xml, regex

我有一个包含大量垃圾数据的文件，我想从中提取一些格式正确的 XML。

我想提取的一点是：

```
<random stuff....;'/>
<GET_FW_VERSION
   FIRMWARE_VERSION = "1.77"
   FIRMWARE_DATE = "Apr 23 2009"
   MANAGEMENT_PROCESSOR = "iLO2"
   LICENSE_TYPE = "iLO 2 Advanced"
    />
more non xml stuff 
```

所以我只想取出`<GET_FW_VERSION>`

我曾经这样做过：

```
string FW_VERSION = Regex.Match(result, "<GET_FW_VERSION>.*</GET_FW_VERSION>", RegexOptions.Singleline).ToString(); 
```

但这并没有结束`</GET_FW_VERSION>`

还有另一种方法来编写该正则表达式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:26:47.500

只要没有任何属性值包含序列“/>”，这应该可以工作。

```
string FW_VERSION = Regex.Match(result, 
   "<GET_FW_VERSION.*/>|<GET_FW_VERSION.*>.*</GET_FW_VERSION>", 
   RegexOptions.Singleline).ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:16:38.240

请注意，`.`在正则表达式中意味着：

> ***`.`*** 通配符：匹配任何单个字符，除了`\n`

尝试使用这个正则表达式：

```
(?:<GET_FW_VERSION[^>]*>|<GET_FW_VERSION[^>]*>.*</GET_FW_VERSION>) 
```

解释：

> **`|`** 匹配由竖线`|`字符分隔的任何一个元素。
> 
> ***`[^character_group]`*** 否定：匹配任何不在`character_group`.
> 
> ***`(?:subexpression)`*** 定义一个非捕获组。

# c++ - cimg 显示呈现黑色

> ID：14249717
> 
> 赞同：0
> 
> 时间：2013-01-10T02:01:54.653
> 
> 标签：c++, cimg

使用 CImg；我会保持这个快速和简单。

```
CImg<float> i = *spectralImages->at(currentImage);
disp.display(i);
float* f = i.data(); 
```

disp 显示黑色图像，尽管通过 *(f)、*(f+1)、*(f+2) 等正在检索正确的数字（255.0、245.0 等）

我整天都在做这件事。我错过了 CImg 的怪癖吗？

**编辑：** 将文件另存为 BMP 似乎可以得到正确的结果，所以绘制它只是一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:23:24.163

如果您的 CImg 图像仅包含一个值或几个相等的值，则默认显示会将它们显示为黑色图像，因为标准化应用于显示的像素值。由于 CImg 能够管理任何类型的图像（包括浮点值），它总是将 [0,255] 中的像素值归一化以进行显示（当然，它不会更改对象中的像素值，它只是在内部对它们进行归一化其显示）。因此，如果您的图像具有单个像素值，则归一化将始终为“0”，因此结果为黑色图像。

这意味着您可能没有使用正确的像素标准化参数构造您的 CImgDisplay 显示（默认情况下，它是启用的）。disp 应该这样构造：

```
CImgDisplay disp(100,100,"my display",0); 
```

禁用像素值的默认归一化。

# c++ - 是否有复制 Visual Studio 的 C++ 自动识别样式的命令行工具？

> ID：14249726
> 
> 赞同：0
> 
> 时间：2013-01-10T02:02:31.853
> 
> 标签：c++, visual-studio-2010, indentation

我想在提交到我们的 linux 托管的颠覆存储库时强制执行我们的样式指南中的缩进规则。我们的缩进规则是 Visual Studio 2010“编辑->高级->格式选择”命令所允许的，缩进设置为 2 个空格。（这是团队协商的结果——如果我坚持更具侵略性的风格，整个政策就会失去团队的支持）

所以我需要一个可以复制 Visual Studio 使用的相同缩进规则的 unix 工具或脚本。然后我可以从 subveriion pre-commit 钩子中调用它，如果该工具完全更改了提交的文件，则阻止提交。

我试过查看[astyle](http://astyle.sourceforge.net)、[bcpp](http://invisible-island.net/bcpp/bcpp.html)和[indent](http://www.gnu.org/software/indent/)，但我不能让它们中的任何一个产生与 Visual Studio 相同的输出。astyle 给出了最接近的结果，但坚持缩进行延续不止一个缩进。

针对评论进行编辑：我们的开发人员定期设置新计算机，偶尔（一年几次）忘记正确设置每个开发人员的 VS 缩进选项。直到提交之后很久才发现这一点，此时需要修复大量代码。我们已经检查了发现大部分错误的选项卡。开发人员要求我寻找更好的解决方案来帮助他们避免错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:53:22.777

我一直在寻找一致的团队设置，但刚刚找到了[EditorConfig](http://editorconfig.org/)。您在首选编辑器中安装了许多插件，这些插件可以读取源代码存储库中提交的设置。

# ios - 加载了“FriendViewController”笔尖，但未设置视图出口。

> ID：14249727
> 
> 赞同：-1
> 
> 时间：2013-01-10T02:02:39.597
> 
> 标签：ios, facebook-fql

我正在关注这个关于如何运行 FQL 查询的漂亮教程（https://developers.facebook.com/docs/howtos/run-fql-queries-ios-sdk/），但不幸的是我遇到了一个意想不到的问题确定如何解决。我能够跟踪拉取数据并一直跟踪到第三步（在实现它之后，程序崩溃）我已经通过我的程序只是为了看看我是否犯了错误，但我没有看到任何错误。有人可以给我一个关于在这种情况下我需要如何修复插座的建议吗？谢谢你。

**FriendViewController.h**

```
#import <UIKit/UIKit.h>

@interface FriendViewController : UITableViewController
@property (strong, nonatomic) NSArray *data;
@end 
```

**FriendViewController.m**

```
#import "FriendViewController.h"

@interface FriendViewController ()
@property (strong, nonatomic) UIToolbar *toolbar;
@end

@implementation FriendViewController

@synthesize data = _data;
@synthesize toolbar = _toolbar;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{    

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
    // Add a toolbar to hold a Done button that will dismiss this view controller
    self.toolbar = [[UIToolbar alloc] init];
    self.toolbar.barStyle = UIBarStyleDefault;
    [self.toolbar setAutoresizingMask:UIViewAutoresizingFlexibleWidth];
    [self.toolbar sizeToFit];

    UIBarButtonItem *doneButton = [[UIBarButtonItem alloc]
                                   initWithBarButtonSystemItem:UIBarButtonSystemItemDone
                                   target:self
                                   action:@selector(doneButtonPressed:)];

    UIBarButtonItem *space = [[UIBarButtonItem alloc]
                              initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace
                              target:nil
                              action:nil];

    self.toolbar.items = [NSArray arrayWithObjects:space, doneButton, nil];
    [super viewDidLoad];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.
    return [self.data count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell =
    [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc]
                initWithStyle:UITableViewCellStyleDefault
                reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.text = [[self.data objectAtIndex:indexPath.row]
                           objectForKey:@"name"];
    UIImage *image = [UIImage imageWithData:
                      [NSData dataWithContentsOfURL:
                       [NSURL URLWithString:
                        [[self.data objectAtIndex:indexPath.row]
                         objectForKey:@"pic_square"]]]];
    cell.imageView.image = image;

    return cell;
}
/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
    }   
}
*/

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    return self.toolbar;
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return self.toolbar.frame.size.height;
}
- (void)doneButtonPressed:(id)sender
{
    // Dismiss view controller based on supported methods
    if ([self respondsToSelector:@selector(presentingViewController)]) {
        // iOS 5+ support
        [[self presentingViewController] dismissModalViewControllerAnimated:YES];
    } else {
        [[self parentViewController] dismissModalViewControllerAnimated:YES];

    }
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:11:56.940

在`FriendViewController.xib`中，`view`从您的文件所有者到您的实际视图的连接要么断开连接，要么一开始就从未连接。UIViewController 不是成为朋友并为您加载视图，而是通过异常（漂亮）将您的应用程序关闭。

# jquery - 使用 jQuery 更改前置

> ID：14249728
> 
> 赞同：0
> 
> 时间：2013-01-10T02:02:39.177
> 
> 标签：jquery, prepend

到目前为止我的 jQuery：

```
jQuery(document).ready(function($) {

    $(".spoiler").hide();
    $(".spoiler-title").prepend('+ ');

    $('.spoiler-title').bind('click', function(){
        $(".spoiler-title").prepend('- ');
        $('.spoiler').animate({height: 'toggle'}, 100);

    });

}); 
```

所以很明显它是错误的，因为每次你点击它只会添加一个'-'并且它不会删除旧的'+'前置。那么你将如何删除那个新的前置并将它返回到原来的'+'？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:05:08.937

试试这个：

```
jQuery(document).ready(function($) {

    $(".spoiler").hide();
    $(".spoiler-title").prepend('<span class="prependedSign plus">+ </span>');

    $('.spoiler-title').bind('click', function(){
        if($(".prependedSign").hasClass("minus"))
        {
            $(".prependedSign").remove();
            $(".spoiler-title").prepend('<span class="prependedSign plus">+ </span>');
        }
        else
        {
            $(".prependedSign").remove();
            $(".spoiler-title").prepend('<span class="prependedSign minus">- </span>');
        }
        $('.spoiler').animate({height: 'toggle'}, 100);

    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T02:08:02.987

P您可以继续使用 prepend，但由于该跨度的内容将是 + 或 -，您可以使用类似的东西`$('.spoiler-title span').text('+ ');`，而不是使用 .text('-') 更改它。

请考虑此代码并根据需要进行更改：

```
(function($){ $(function(){
  $('.spoiler-title').click(function(){
    $(this).toggleClass('minus').next('.content').slideToggle();
    if($(this).hasClass('minus')){
      $(this).children().text('- ');
    } else { $(this).children().text('+ '); }
  });
}); })(jQuery); 
```

我不知道你那里有什么，但这是一个[工作小提琴](http://jsfiddle.net/Seventh/3wZ9r/2/)，所以你可以看到我是怎么做到的。希望对你有帮助！另请注意，我没有使用 $(document).ready()。此更改对代码没有影响，但它将以相同的方式工作并且它是“无冲突​​”的，因此请开始使用它。还有其他方法可以避免“$”冲突，但这是我个人使用的一种。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T03:35:11.450

试试这个

```
jQuery(document).ready(function($) {

        $(".spoiler-title").text('+ ');
        $(".spoiler").hide();

        $('.spoiler-title').bind('click', function(){

             if($(this).text().indexOf("- ") > -1)
             {
                   $(this).text('+ ');
                   $(".spoiler").hide();
             }
             else
             {
                  $(this).text('- ');
                  $(".spoiler").animate({height: 'toggle'}, 100);              
             }

        });

    }); 
```

# php - mysqli_real_escape_string 无法正常工作

> ID：14249729
> 
> 赞同：1
> 
> 时间：2013-01-10T02:02:38.583
> 
> 标签：php

我已经搜索过，但我发现似乎没有任何效果。

我的问题是，当使用特殊字符作为 ' 输入查询中断。现在，我尝试在我的字符串上使用 mysqli_real_escape_string，但这会返回一个空白值。我读到 mysqli_real_escape_string 应该放在数据库连接之后，据我所知，这就是我所做的，但它返回空白值。

这是代码：

```
<?php

session_start();

if (isset($_POST['submit'])) {
    require_once 'connect.php';

    $title = mysqli_real_escape_string($_POST['title']);
    $article = mysqli_real_escape_string($_POST['article']);

    $query = "INSERT INTO Articles
                (Title, content)
                VALUES 
                ('$title', '$article')";

    $result = mysqli_query($connect, $query) or die('could not query database');

    $_SESSION['artcle'] = 1;
    $_SESSION['artcle'] = $title;

    mysqli_close($connect);
    header('Location: CENSORED');
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:05:28.250

您忘记了资源参数：

```
$title = mysqli_real_escape_string($connect, $_POST['title']); 
```

[PHP 手册](http://us3.php.net/manual/en/mysqli.real-escape-string.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-30T04:42:05.227

或者

```
$title = $connect->real_escape_string($_POST['title']); 
```

# java - 获取 webapp 上下文的 URL（基本 URL）

> ID：14249730
> 
> 赞同：21
> 
> 时间：2013-01-10T02:02:41.043
> 
> 标签：java, jakarta-ee, web-applications, servlets

有时您需要在 servlet/JSP/whatever 基于`HttpServletRequest`. 类似**http://server.name:8080/context/**的东西。Servlet API 没有单一的方法来实现这一点。

直接的方法是将所有 URL 组件附加到 a `StringBuffer`，例如

```
ctxUrl = sb.append(req.getScheme()).append("://")
.append(req.getgetServerName()).append(":")
.append(req.getServerPort()) etc 
```

我想知道这个替代方案是否有任何问题（快 10 倍）：

```
ctxUrl = req.getRequestURL();
ctxUrl = ctxUrl.substring(0, ctxUrl.lastIndexOf("/"))); 
```

上述两种方法*总是*会产生相同的结果吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-10T02:07:02.647

它被称为“基本 URL”（您可以在 HTML`<base>`标记中使用的那个）。您可以通过以下方式获得它：

```
StringBuffer url = req.getRequestURL();
String uri = req.getRequestURI();
String ctx = req.getContextPath();
String base = url.substring(0, url.length() - uri.length() + ctx.length()) + "/"; 
```

您的`ctxUrl.substring(0, ctxUrl.lastIndexOf("/")));`方法将在具有多个文件夹（如`http://server.name:8080/context/folder1/folder2/folder3`.

### 也可以看看：

*   [如何在不包含上下文根名称的情况下使用相对路径？](https://stackoverflow.com/questions/4764405/how-to-use-relative-paths-without-including-the-context-root-name)（对于 JSP 答案）
*   [如何获取基本 URL？](https://stackoverflow.com/questions/6878275/how-get-the-base-url)（对于 JSF 答案）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-11-22T00:13:44.517

以下将获取上下文 URL 并适当地解决问题。

```
URI contextUrl = URI.create(req.getRequestURL().toString()).resolve(req.getContextPath()); 
```

这将对端口、斜杠等进行所有必要的处理。它也适用于根上下文，因为 req.getContextPath() 将返回`""`

如果您使用的是代理服务器，您需要确保`Host:`传入原始请求（例如[Apache ProxyPass 指令到`ProxyPreserveHost`](https://stackoverflow.com/a/6101477/242042).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-12T05:29:41.877

认为，

我们想从 Java Web 应用程序项目中的任何地方获取*[http://server.name:8080/context/](http://server.name:8080/context/)*。

```
String uri = request.getRequestURI();
//uri = "/context/someAction"
String url = request.getRequestURL().toString();
// url = "http://server.name:8080/context/someAction"
String ctxPath = request.getContextPath();
// ctxPath = "/context";
url = url.replaceFirst(uri, "");
// url = "http://server.name:8080"
url = url + ctxPath;
//url = "http://server.name:8080/context" 
```

使用这个代码块，我们可以得到 URL

# xaml - xaml 将 Listview 元素绑定到另一个数据源 (WinRT)

> ID：14249732
> 
> 赞同：0
> 
> 时间：2013-01-10T02:02:42.993
> 
> 标签：xaml, winrt-xaml

我有一个 viewModel，它由一个类和一个 Observable 集合组成

```
class MyViewModel
{
    public string SomeName {set; get;};
    public ObservableCollection<ItemName> ItemNames {set; get;}
} 
```

在页面中，我将页面本身的 DataContext 设置为此对象，即

```
MyViewModel myModel = new MyViewModel("111");
this.DataContext = myModel; 
```

然后我在页面设计中有一个引用数据上下文的 ListView，我可以使用 ItemSource 属性从中获取值

```
<ListView
....
ItemsSource="{Binding Path=ItemNames}"> 
```

但是，在这个 ListView 中，**我如何访问“SomeName”属性？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T00:31:24.637

我正在使用 WinRT，我发现它的工作方式是将源设置为“绑定”，然后将路径提供给对象

```
Text="{Binding Source={Binding}, Path=SomeName}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:25:25.200

列的`ListView`需求定义。每列可以绑定到不同的属性。

在你的情况下：

```
<ListView 
....
ItemsSource="{Binding Path=ItemNames}">
    <ListView.View>
        <GridView>
            <GridViewColumn Header="The Name" DisplayMemberBinding="{Binding SomeName}" />
        </GridView>
    </ListView.View>
</ListView> 
```

# r - 在R中的嵌套列表上应用

> ID：14249734
> 
> 赞同：0
> 
> 时间：2013-01-10T02:03:05.397
> 
> 标签：r, list

我需要将函数应用于嵌套列表。第一个列表项的结构是：

```
str(ldf[[1]])
List of 3
 $ Header   :List of 10
  ..$ abif                : chr "ABIF"
  ..$ version             : int 101
  ..$ DirEntry.name       : raw [1:4] 74 64 69 72
  ..$ DirEntry.number     : int 1
  ..$ DirEntry.elementtype: int 1023
  ..$ DirEntry.elementsize: int 28
  ..$ numelements         : int 99
  ..$ dataoffset          : int 97865
  ..$ datahandle          : int 0
  ..$ unused              : num [1:47] 0 0 0 0 0 0 0 0 0 0 ...
 $ Directory:'data.frame':  99 obs. of  7 variables:
  ..$ name       : chr [1:99] "ANME" "CMNT" "CMNT" "CMNT" ...
  ..$ tagnumber  : int [1:99] 1 1 2 3 4 5 1 1 1 1 ...
  ..$ elementtype: int [1:99] 19 18 18 18 18 18 19 19 19 18 ...
  ..$ elementsize: int [1:99] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ numelements: int [1:99] 13 29 29 29 29 29 10 10 4 9 ...
  ..$ datasize   : int [1:99] 13 29 29 29 29 29 10 10 4 9 ...
  ..$ dataoffset : int [1:99] 140 97720 97749 97778 97807 97836 97686 97696 1346454016 95088 ...
 $ Data     :List of 99
  ..$ ANME.1  : chr "AFLP-Default"
  ..$ CTID.1  : chr "GS#12-081"
  ..$ CTNM.1  : chr "GS#12-081"
  ..$ CTOw.1  : chr "PAB"
  ..$ CTTL.1  : chr "Comment:"
  ..$ CpEP.1  : chr "\001"
  ..$ DATA.1  : int [1:8960] 1 -2 -3 -3 -2 2 0 0 1 2 ...
  ..$ DATA.2  : int [1:8960] -2 3 4 5 2 -3 0 0 -2 -1 ...
  ..$ DATA.3  : int [1:8960] 0 0 -6 -6 -2 3 -5 1 3 1 ...
  ..$ DATA.4  : int [1:8960] -1 -1 3 2 1 -5 3 -4 -4 -6 ...
  ..$ DATA.5  : int [1:544] 0 0 0 0 0 0 0 0 0 0 ...
  ..$ DATA.6  : int [1:544] 0 0 0 0 0 0 0 0 0 0 ...
  ..$ DATA.7  : int [1:544] 6 6 6 6 6 6 15 15 15 15 ...
  ..$ DATA.8  : int [1:544] 60 60 60 59 59 59 59 59 59 59 ... 
```

假设我对 $Data$DATA.1 中的值感兴趣。如何将函数应用于每个 $Data$DATA.1 ？像 ：

```
findpeaks(ldf[[1]]$Data$DATA.1,threshold=500)
findpeaks(ldf[[2]]$Data$DATA.1,threshold=500)
findpeaks(ldf[[x]]$Data$DATA.1,threshold=500)
... 
```

来自：[如何将函数应用于嵌套列表？](https://stackoverflow.com/questions/7337360/how-do-you-apply-a-function-to-a-nested-list)我得到：

```
lapply(ldf, function(x) lapply(lapply(x, '[[', 'Data'), function(x) findpeaks(ldf[[x]]$Data$DATA.1,threshold=500))) 
```

ldf[[x]] 中的错误：尝试选择少于一个元素

这个列表是否深度嵌套使用 lapply ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:18:48.513

根据 joran 的评论，这是工作代码：

```
lapply(ldf,function(x) findpeaks(x$Data$DATA.1,threshold=500)) 
```

# .net - 数百个端口打开后 Start() 的 TcpListener 性能问题

> ID：14249739
> 
> 赞同：2
> 
> 时间：2013-01-10T02:03:28.017
> 
> 标签：.net, sockets, windows-7, network-programming, tcplistener

在我开始之前......这不是为了生产；这个问题实际上只是在制作测试应用程序时出现的。我自己和另一位开发人员正在四处寻找 .net 以这种方式表现不佳的原因。它可能根本不是.net，它可能是操作系统，我希望有人能对这个话题有所了解：

创建我的测试应用程序是为了处理来自我们的生产应用程序的数百个连接，这些连接通过 TCP 连接到数百个设备，因为它更容易模拟 500-700 台 PC，然后在我的办公室堆叠 500-700 台物理机器运行一些端口软件。

如果您有兴趣找到解决方案，我创建了一个示例块，您可以将其复制/粘贴到您的测试 VS 中。它非常简单且易于复制。

问题：

*   随着每个端口的打开，下一个端口打开所需的时间越来越长。
*   CPU在创建了几百个之后才创建一个端口是相当紧张的

笔记：

*   线程数正常...非常低（任务管理器中有 16 个线程）
*   句柄计数也是正常的，因为它添加了每个套接字。
*   内存使用看起来也很正常
*   使用反射器查看 .net 库以查看 Start() 正在做什么，它看起来像正常的套接字调用。

示例代码：

```
using System;
using System.Diagnostics;
using System.Net;
using System.Net.Sockets;

namespace SocketPerformanceTest
{
    class Program
    {
        static void Main(string[] args)
        {
            const int socketToOpen = 500;
            const int socketStartingPoint = 45000;
            var sw = new Stopwatch();
            for (var i = 0; i < socketToOpen; i++)
            {
                var thisPort = socketStartingPoint + i;
                try
                {
                    var listener = new TcpListener(IPAddress.Any, thisPort);
                    sw.Restart();
                    listener.Start();
                    sw.Stop();
                    Console.WriteLine("Started Port {0} in {1}", thisPort, sw.Elapsed);
                }
                catch{}
            }
        }
    }
} 
```

控制台输出：

当测试应用程序第一次启动时，请注意每个端口的执行时间都在缓慢上升。秒表包装了 Start() 方法：

```
Started Port 45000 in 00:00:00.0086440
Started Port 45001 in 00:00:00.0131427
Started Port 45002 in 00:00:00.0125916
Started Port 45003 in 00:00:00.0140987
Started Port 45004 in 00:00:00.0214274
Started Port 45005 in 00:00:00.0166746
Started Port 45006 in 00:00:00.0178583
Started Port 45007 in 00:00:00.0203611
Started Port 45008 in 00:00:00.0187707
Started Port 45009 in 00:00:00.0209386
Started Port 45010 in 00:00:00.0229595
Started Port 45011 in 00:00:00.0298687
Started Port 45012 in 00:00:00.0331132
Started Port 45013 in 00:00:00.0312815
Started Port 45014 in 00:00:00.0295004
Started Port 45015 in 00:00:00.0312391
Started Port 45016 in 00:00:00.0326538
Started Port 45017 in 00:00:00.0329316
Started Port 45018 in 00:00:00.0330471
Started Port 45019 in 00:00:00.0353324
Started Port 45020 in 00:00:00.0391780
Started Port 45021 in 00:00:00.0405106
Started Port 45022 in 00:00:00.0391909
Started Port 45023 in 00:00:00.0410726
Started Port 45024 in 00:00:00.0519416 
```

打开大约 400 个端口后，请注意每个端口需要多长时间才能启动。1-2秒？此操作的 CPU 也很高：

```
Started Port 45399 in 00:00:01.3031324
Started Port 45400 in 00:00:01.2686192
Started Port 45401 in 00:00:01.2367192
Started Port 45402 in 00:00:01.3912566
Started Port 45403 in 00:00:01.2710675
Started Port 45404 in 00:00:01.2500153
Started Port 45405 in 00:00:01.2685378
Started Port 45406 in 00:00:01.3358896
Started Port 45407 in 00:00:01.2972177
Started Port 45408 in 00:00:01.3002466
Started Port 45409 in 00:00:01.4087936
Started Port 45410 in 00:00:01.5042491
Started Port 45411 in 00:00:01.2869177
Started Port 45412 in 00:00:01.3284299
Started Port 45413 in 00:00:01.3202311
Started Port 45414 in 00:00:01.4406063
Started Port 45415 in 00:00:01.3534663
Started Port 45416 in 00:00:01.7562387
Started Port 45417 in 00:00:01.5572173
Started Port 45418 in 00:00:01.4617214
Started Port 45419 in 00:00:02.1260768
Started Port 45420 in 00:00:01.6841706
Started Port 45421 in 00:00:01.7514512
Started Port 45422 in 00:00:01.5182234 
```

问题：

*   为什么每个端口打开的时间比最后一个端口要长？
*   为什么CPU越来越高
*   难道我做错了什么？有没有更有效的方法来打开套接字并监听连接？
*   这是操作系统问题还是.net 问题？我在 Windows 7 上进行了测试，您认为如果我在服务器操作系统上进行测试会有所不同吗？我相信带有 2008 R2 和 Win7 SP 的内核是相同的，所以不确定这是否重要。

硬件：

*   Win7 x64 Ultimate、8 GB 内存、I7、SSD 等

找到解决方案对我来说并不重要，但这会很好。我想让这个模拟器应用程序启动，并在合理的时间内监听 500-700 个唯一的 TCP 端口。如果有更好的方法，请告诉我......我对正在发生的事情或替代选择非常感兴趣。

谢谢！

**更新 1**

在几乎没有任何 CPU/内存的 Raspberry Pi 设备上对其进行了测试，它几乎是即时的。其他人在评论中说这是即时的……有人说他们看到了同样的事情。我也在另一台电脑上测试过，同样的问题。禁用防火墙、AV 等。我真的很好奇为什么会这样。

# symfony - Symfony2：在错误页面中显示错误

> ID：14249741
> 
> 赞同：0
> 
> 时间：2013-01-10T02:03:50.310
> 
> 标签：symfony

我正在尝试自定义我的错误页面，但我无法显示我的错误页面的最终错误。假设我在编写自定义 404 错误页面时犯了一个错误：如何调试该错误？另外，我有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:14:55.737

覆盖`exception_full.html.twig`模板。那个将在开发/调试模式下显示。

# ios - 使用 Urban Airship & Phonegap，无法注册设备：“Device token is nil”

> ID：14249745
> 
> 赞同：5
> 
> 时间：2013-01-10T02:04:07.497
> 
> 标签：ios, cordova, urbanairship.com

从 git hub 上的最新示例 (https://github.com/urbanairship/phonegap-ua-push) 来看，使用 Phonegap/Cordova 最新 v2.3.0 的全新构建，我们在 iOS 上注册设备时遇到了问题UA。在我们更新到最新版本之前，我们没有任何问题。我们正在像这样注册设备：

```
function on_reg(error, pushID) {
    console.log("UA Registration complete.")
}

push = window.pushNotification
push.registerEvent('registration', on_reg) 
```

但是每次调用该代码时，都会收到一条错误消息，提示“**设备令牌为零。稍后将尝试注册**”。除非那永远不会发生。

这是日志：

> 2013-01-09 17:38:29.378 分组 [271:907] [D] -[UAPush updateRegistration] [第 589 行] 检查注册状态
> 
> 2013-01-09 17:38:29.380 分组 [271:907] [D] -[UAPush updateRegistration] [第 609 行] 设备令牌为零。稍后将尝试注册
> 
> 2013-01-09 17:38:29.744 Grouped[271:907] [D] +[UAKeychainUtils getDeviceID] [Line 275] 从钥匙串中检索到设备 ID 信息。
> 
> 2013-01-09 17:38:29.745 Grouped[271:907] [D] +[UAKeychainUtils getDeviceID] [Line 279] 设备 ID 结果不为零。
> 
> 2013-01-09 17:38:29.746 分组 [271:907] [D] +[UAKeychainUtils getDeviceID] [第 288 行] 加载的设备 ID：C1E75722-ED34-4513-BBA5-CB9EDEBBD117
> 
> 2013-01-09 17:38:29.747 Grouped[271:907] [D] +[UAKeychainUtils getDeviceID] [Line 289] 加载的型号名称：iPhone4,1
> 
> 2013-01-09 17:38:32.724 Grouped[271:907] [D] -[UAAnalytics requestDidSucceed:response:responseData:] [Line 461] 分析数据发送成功。状态：200

我们做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T03:06:59.990

我将此错误追溯到最新版本的 PhoneGap 中所做的更改：

> 对于 iOS，device.platform 曾经返回“iPhone”、“iPad”或“iPod Touch”——现在它（正确地）返回“iOS”。

这与 PushNotification.js 模块冲突，返回错误信息：

```
// Registration

PushNotification.prototype.registerForNotificationTypes = function (types, callback) {
if(device.platform == "iPhone" || device.platform == "iPad" || device.platform == "iPod touch") {
this.call_native(callback, "registerForNotificationTypes", [types])
}
} 
```

将其更改为**device.platform == "iOS"**可以解决问题。

*Urban Airship，如果你想在[https://github.com/urbanairship/phonegap-ua-push/blob/master/ios-sample/www/lib/PushNotification.js](https://github.com/urbanairship/phonegap-ua-push/blob/master/ios-sample/www/lib/PushNotification.js)更新你的 git，我相信很多人会很感激它！*

# php - 比较数据/对同一张表中的数据运行“差异报告”

> ID：14249749
> 
> 赞同：1
> 
> 时间：2013-01-10T02:04:38.473
> 
> 标签：php, mysql

我有一个名为“项目”的表

```
id       month       year       **itemname**       distmoney
 1        12         2012         chicken           20
 2        12         2012         pork              15
 3        11         2012         chicken           21
 4        11         2012         pork              15 
```

我正在尝试对具有相同名称的项目运行“差异报告”。

所以对于鸡肉，它出现在第 12 个月和第 11 个月。如果这两个月的 distmoney 不同，我想回应一个警告或类似的东西。在我上面的例子中，鸡肉的 distmoney 在第 12 个月是 20，但在第 11 个月是 21。所以，“警告！” 应该得到回应。然而，对于猪肉来说，distmoney 保持不变，所以我只会回应“没有问题”或类似的东西。

我该怎么做呢？

谢谢你的帮助。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:14:44.643

您可以查看列中`GROUP BY`的行`itemname`并查看列中有多少不同的值`distmoney`。如果有多个不同的值，则可能存在问题。

```
SELECT 
    name,
    IF(COUNT(DISTINCT distmoney) > 1, 'warning!', 'no issues') AS status
FROM
    items
GROUP BY
    name 
```

# ruby - 为 ruby 脚本创建 shell 命令

> ID：14249752
> 
> 赞同：1
> 
> 时间：2013-01-10T02:05:00.490
> 
> 标签：ruby, shell, unix

假设我有一个 ruby​​ 脚本，可以打印一些消息，例如`Hello World`

现在，我可以制作自定义 shell 命令，比如`printMessage`将控制权传递给我的 ruby​​ 脚本吗？

这样每当我`printMessage`从命令行键入时，它就会打印`Hello World`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:09:20.433

将此添加到您的 .bashrc 或 .bash_profile

```
alias printMessage='ruby /path/to/file.rb' 
```

应该这样做。除非我误解了这个问题。

并将`puts`打印到命令行。完成此操作后，您必须重新加载 bash 配置文件才能使其正常工作。只需键入`source ~/.bashrc`以重新加载它。

可能要`chmod`存档。

选择：

```
alias printMessag='ruby -e "puts \"Hello World\""' 
```

也应该工作。

# wordpress - WordPress get_the_tag 作为列表

> ID：14249755
> 
> 赞同：0
> 
> 时间：2013-01-10T02:05:11.463
> 
> 标签：wordpress, tags

```
 <?php
$posttags = get_the_tags();
if ($posttags) {
  foreach($posttags as $tag) {
    echo $tag->name . ' '; 
  }
}
?> 
```

这在它输出的标签之间放置了一个空格，但是我如何在每个标签之前放置一些东西以便我可以将它们包装在`<li>`标签中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:12:49.903

您是否尝试过使用“the_tags()”？它可能更适合您的需要。

您可以使用一些标签使其看起来像一个列表（或任何您喜欢的）。检查此链接以获取更多信息，并始终参考法典： [使用 the_tags() 函数](http://codex.wordpress.org/Function_Reference/the_tags)

在此链接中，我们有以下示例：

```
<?php the_tags('<ul><li>','</li><li>','</li></ul>'); ?> 
```

对您的另一个很好的参考是[Wordpress Stackexchange](https://wordpress.stackexchange.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:12:57.640

[Wordpress Codex](http://codex.wordpress.org/)是 WP 相关功能的绝佳资源。您可以修改[`get_the_tags()`](http://codex.wordpress.org/Function_Reference/get_the_tags)参考页面上的示例函数之一以输出标签列表：

```
function list_tags() {
    $posttags = get_the_tags();
    if ($posttags) {
        echo "<ul>\n";
        foreach ($posttags as $tag) {
            echo "<li>{$tag->name}</li>\n";
        }
        echo "</ul>\n";
    }
} 
```

或者使用`the_tags`内置函数将标签列表包装在列表中：

```
<?php the_tags('<ul><li>','</li><li>','</li></ul>'); ?> 
```

# ios - 在应用程序运行时恢复 sqlite 持久存储的正确方法？

> ID：14249756
> 
> 赞同：1
> 
> 时间：2013-01-10T02:05:16.343
> 
> 标签：ios, objective-c, sqlite, backup, restore

我正在尝试在应用程序运行时在我的应用程序中实现备份/恢复系统。我创建了数据库的备份并将其放入 Backups 文件夹中。如果我想恢复，我删除我的持久存储，删除原始文件，复制备份并重新连接。我下面的代码有效。我的问题是，我这样做正确吗？我所做的事情是否有任何风险？感谢您对我的代码的任何反馈：

```
- (BOOL)resetApplicationModel {

    // ----------------------
    // This method removes all traces of the Core Data store and then resets the application defaults
    // ----------------------

    NSError *_error = nil;
    NSURL *_storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"Database.sqlite"];

    NSPersistentStore *_store = [persistentStoreCoordinator persistentStoreForURL:_storeURL];

    // Remove the SQL store and the file associated with it
    if ([persistentStoreCoordinator removePersistentStore:_store error:&_error]){
        [[NSFileManager defaultManager] removeItemAtPath:_storeURL.path error:&_error];
    }

    if (_error) {
        NSLog(@"Failed to remove persistent store: %@", [_error localizedDescription]);
        return NO;
    }

    [persistentStoreCoordinator release], persistentStoreCoordinator = nil;
    [managedObjectContext release], managedObjectContext = nil;

    NSString *applicationDocumentDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *originalFile = [applicationDocumentDirectory stringByAppendingPathComponent:@"Database.sqlite"];

    NSString *backupDatabaseFolder = [applicationDocumentDirectory stringByAppendingPathComponent:@"Backups"];
    NSString *backupFile = [backupDatabaseFolder stringByAppendingPathComponent:[NSString stringWithFormat:@"DatabaseBackup.sqlite"]];

    [[NSFileManager defaultManager] copyItemAtPath:backupFile toPath:originalFile error:nil];

    // Rebuild the application's managed object context
    rootViewController.managedObjectContext = nil;
    rootViewController.managedObjectContext = self.managedObjectContext;

    return YES;
} 
```

# http - 我们如何在 ANT 中重用 https 连接？

> ID：14249764
> 
> 赞同：0
> 
> 时间：2013-01-10T02:05:52.327
> 
> 标签：http, ant, https, get

我在 ANT 中有一个 HTTPS GET 任务，它从我的服务器下载文件。问题是每次我必须下载一个文件时，我都必须生成一个新的 HTTPS 连接。

我有很多文件需要下载，所以自然地重新创建新的 HTTP 连接会导致一些悲伤。

ANT 中有没有办法重用 HTTPS/HTTP 连接，以便我可以通过同一个可重用连接下载所有文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:03:50.600

不是开箱即用。要么编写自己的“get”任务，要么考虑其他替代方案，如[scp task](http://ant.apache.org/manual/Tasks/scp.html)。

# 更新

我突然想到一个自定义任务可以接受一个 ANT 文件集，然后使用 HTTP 连接池并行获取文件。

关键问题是这实际上有多大帮助。您是否测量过此问题导致的额外延迟？

也许不是尝试优化 HTTP 连接，而是并行获取文件可能更简单？以下代码使用 4 个线程：

```
<target name="fetch">
    <parallel threadCount="4">
      <get dest="file1.jar" src="https://..."/>
      <get dest="file2.jar" src="https://..."/>
      <get dest="file3.jar" src="https://..."/>
      <get dest="file4.jar" src="https://..."/>
      <get dest="file5.jar" src="https://..."/>
      <get dest="file6.jar" src="https://..."/>
      <get dest="file7.jar" src="https://..."/>
      ..
      ..
    </parallel>
</target> 
```

# iphone - 无法使标签接收字符串

> ID：14249766
> 
> 赞同：0
> 
> 时间：2013-01-10T02:06:27.123
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

**编辑：**

我在一个视图中有一个文本字段、一个按钮和一个标签，在另一个视图上有一个标签，它们由**不同**的视图控制器控制，在我的代码中，我获取文本字段的浮点值并将其转换为字符串，然后我把它串入两个标签。但问题是，只有带有文本字段的视图上的标签和按钮接收它，另一个标签，即在另一个视图上，不接收任何东西！

第一个.h

```
 #import <UIKit/UIKit.h>

@interface NotasFirstViewController : UIViewController
@property (strong, nonatomic) IBOutlet UITextField *tfield;
- (IBAction)calcular:(id)sender;
-(IBAction)clicarFora:(id)sender;
-(IBAction)tirarteclado:(id)sender;
@property (strong, nonatomic) NSString *valorstr;
@property (strong, nonatomic) IBOutlet UILabel *mostradordeteste;
@end 
```

第一个.m

```
#import "NotasFirstViewController.h"
#import "NotasSecondViewController.h"

@interface NotasFirstViewController ()

@end

@implementation NotasFirstViewController
@synthesize valorstr;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)calcular:(id)sender {

    float valor = [_tfield.text floatValue];
    NSString *valorstr = [[NSString alloc] initWithFormat:@"%.2f", valor];
    NSLog(@"%.2f", valor);
    NSLog(valorstr);
    _mostradordeteste.text = valorstr;
    NotasSecondViewController *second = [[NotasSecondViewController alloc] init];

}

-(IBAction)clicarFora:(id)sender{

    [_tfield resignFirstResponder];

}
-(IBAction)tirarteclado:(id)sender{

    [sender resignFirstResponder];

}

@end 
```

第二个.h

```
#import <UIKit/UIKit.h>

@interface NotasSecondViewController : UIViewController{

    NSString *valorclasstwo;
    IBOutlet UILabel *classe2labelvalor;

}

@end 
```

秒.m

```
#import "NotasSecondViewController.h"
#import "NotasFirstViewController.h"

@interface NotasSecondViewController ()

@end

@implementation NotasSecondViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(void)teste{

    NotasFirstViewController *n1 = [[NotasFirstViewController alloc] init];
    valorclasstwo = [n1 valorstr];
    classe2labelvalor.text = valorclasstwo;
}

@end 
```

![连接优先](../Images/5df4ca33d173adfd982c3eca2885e730.png)

![连接秒](../Images/f2063ed092473290187455e73ed0c78b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:16:59.420

查看两个标签的出口是否正确连接（黑色圆圈）。如果圆圈没有被填满，那么就有问题了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T05:16:02.197

在 Interface Builder 中检查 Label 的绑定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T05:40:37.013

首先检查您的插座设置为标签是否正确。如果没问题，那么首先使用 XIB 给出标签值并检查一个静态值是否到来。如果值你得到正确的值，那么在将值从一个视图控制器传递到另一个视图控制器时就会出现问题。确保您`property`以正确的方式创建。

```
@property (nonatomic, strong) NSString *strLabel; 
```

然后将`@synthesize`其正确放入 .m 文件中。如果你已经完成了这件事，那么调试你的代码并将值传递给这个视图控制器。

还有一件事像这样从第一个视图控制器设置您的值。

```
WebLinkViewController *sampleView = [[WebLinkViewController alloc] init] ;
sampleView.stringTitle = strTitle;
[self.navigationController pushViewController:sampleView animated:YES]; 
```

如果您以这种方式进行操作，您还将在另一个视图控制器中获得价值，您需要使用`breakpoint`. 希望这会帮助你。

# java - JavaFX FXML 无法在 Mac OS 中正确加载

> ID：14249767
> 
> 赞同：0
> 
> 时间：2013-01-10T02:06:46.280
> 
> 标签：java, eclipse, macos, javafx, fxml

我在运行 mac os 的项目成员时遇到了 FXML 加载问题。我对 java 代码中的整个 JavaFX 加载过程相当陌生，但这就是我的代码目前的设置方式。该类称为 ControlPanel.java，fxml 是 controlPanel.fxml，它包含 onAction# 方法，我使用 ControlPanel.java 作为这些方法的控制器。它在 Windows 操作系统上运行良好，但是当我们尝试在 Eclipse 中运行它时，它会打开但不显示任何内容。只是想知道我是否做错了什么。我在文档的顶层定义了控制器，它是一个 anchorPane ***fx:controller="project.fx.ControlPanel"***

```
public static void main(String[] args) {
    Application.launch(ControlPanel.class, (java.lang.String[])null);
}

@Override
public void start(Stage primaryStage) {
    try {

        Parent page = (Parent) FXMLLoader.load(getClass().getResource("controlPanel.fxml"), null, new JavaFXBuilderFactory());

        Scene scene = new Scene(page);
        primaryStage.initStyle(StageStyle.TRANSPARENT);
        primaryStage.setScene(scene);
        primaryStage.show();
    } catch (Exception ex) {
        Logger.getLogger(ControlPanel.class.getName()).log(Level.SEVERE, null, ex);
    }

}

@FXML
protected void doSomething() {
    System.out.println("Done something");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:00:39.290

首先，您正在创建 ControlPanel 的第二个实例（通过 Application.launch() 创建的第一个实例）。所以你应该设置控制器实例或使用不同的类作为控件。

我们需要查看更多代码来说明为什么它不能在 Mac 上运行但在 Windows 上运行

# php - 从套接字读取 PHP Mongo 错误

> ID：14249768
> 
> 赞同：4
> 
> 时间：2013-01-10T02:06:52.603
> 
> 标签：php, mongodb

最近几天，我的错误日志充满了这个错误：

```
send_package: error reading from socket: The socket is closed 
```

我真的不知道这是从哪里来的。看起来我的 MongoDB 服务器没有打开 TCP 套接字，但我真的只是在猜测。

有没有人见过这个错误或知道如何处理它？

产生错误的行是：

```
$mongo = new Mongo("mongodb://user:pwd@host/db",array('timeout'=>6000)); 
```

我也偶尔会从 Pimple DIC 中进入：

```
 class HurstDI extends \Pimple
    {
        public function __construct(){
            $this['mongoUser'] = 'user';
            $this['mongoPwd'] = 'pwd';
            $this['mongoHost'] = "host/db";
            $this['mongoTimeout'] = 6000;
            $this['mongodb'] = function($c){
            return new \MongoClient("mongodb://{$c['mongoUser']}:{$c['mongoPwd']}@{$c['mongoHost']}");
        };
    }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T02:17:15.377

PHP/mongoclient + Apache + MongoDB存在一个[已知问题](https://jira.mongodb.org/browse/PHP-158)，其中无效的持久连接被 Apache 进程保持打开状态。

尝试重新启动您的 Apache Web 服务器。

会发生什么：

*   Apache 在正常请求期间打开与 MongoDB 服务器的连接。
*   大概，在某个时候你已经重新启动了你的 MongoDB 服务器
*   Apache/PHP 永远不会识别连接在 MongoDB 重新启动期间关闭并保留之前打开的持久连接

解决此问题的唯一方法是重新启动 Apache（强制它终止所有工作线程并创建新连接）。

让我知道这是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T10:57:56.943

增加超时可能会有所帮助。

*   "socketTimeoutMS" ：在超时之前套接字上的发送或接收需要多长时间。
*   "wTimeoutMS" ：它控制服务器等待写关注得到满足的毫秒数。
*   "connectTimeoutMS" ：在超时之前打开连接需要多长时间（以毫秒为单位）。

    ```
    $m = new MongoClient("mongodb://127.0.0.1:27017", array("connect"=>TRUE, "connectTimeoutMS"=>10, "socketTimeoutMS"=>10, "wTimeoutMS"=>10));

        $db= $m->mydb;
        $coll = $db->testData;
        $coll->insert($paramArr); 
    ```

# android - 独立于片段生命周期运行的计时器。当前正在使用服务，该服务被杀死

> ID：14249776
> 
> 赞同：1
> 
> 时间：2013-01-10T02:08:20.867
> 
> 标签：android, timer, android-service

目前，我正在使用远程服务作为计时器（只需要增加时间和秒以显示用户在健身房呆了多长时间）并通过处理程序与片段进行通信。我这样做是因为我需要计时器独立于片段的生命周期及其父活动而持续存在。在大多数情况下，它就像一个魅力。但是我的一些朋友注意到计时器偶尔会停止，我没有日志，但我能想到的唯一合乎逻辑的情况是远程服务被杀死。

我知道当系统认为有必要时，后台服务有资格被杀死，所以我想知道是否有人可以提供建议的架构更改？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:10:35.663

我决定最好的方法是将服务带到前台，允许用户通过通知查看他们签到的时间，通知通过服务每秒更新一次。

# javascript - 推入数组对象

> ID：14249778
> 
> 赞同：1
> 
> 时间：2013-01-10T02:08:51.447
> 
> 标签：javascript, arrays, object

```
test = [{
         property1: "value 1",
         property2: "value 2"
       }]; 
```

如果我这样做

```
test.push[{property3: "value 3"}]; 
```

我得到一个新对象。我想将它添加到现有对象。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T02:11:24.847

```
test[0].property3 = "value 3"; 
```

或者

```
test[0]['property3'] = "value 3"; 
```

# windows-runtime - 在 Windows 8 商店应用程序处于后台时播放音乐

> ID：14249782
> 
> 赞同：0
> 
> 时间：2013-01-10T02:09:14.680
> 
> 标签：windows-runtime, media-player, background-audio

所以我尝试了几种不同的方法，这就是我所在的位置：

我使用此线程中显示的方法在 App.xaml 中设置 MediaElement（[导航到其他页面后继续播放的全局 MediaElement](https://stackoverflow.com/questions/10935107/global-mediaelement-that-continues-playing-after-navigating-to-other-page)）。切换窗格时保持音乐播放效果很好......

我设置播放器处理程序的方式是将所有方法（例如播放、暂停、下一曲目等）添加到 LayoutAware 页面。这样我就可以从任何视图控制播放器。当应用程序处于焦点时效果很好

如果我离开播放音乐的原始视图，并切换到另一个应用程序，它会继续在后台播放，这就是我想要的

但是，如果我先更改为不同的视图，然后将应用程序移至后台，它就会停止！

只有当我离开第一次开始播放音乐的面板时，它才会这样做。

例如，如果我这样做：

```
1\. launch the app

2\. select a track (launches NowPlaying View)

3\. Play the track and leave it on that same view

4\. Navigate to a different app or the desktop, leaving the app running in the background 
```

该应用程序继续播放音乐。

如果我那么：

```
5\. Navigate back to the app

6\. click "Back" to select a different track

7\. navigate to a different app or the desktop leaving the app running in the background 
```

音乐停止！

任何人都知道为什么会发生这种情况？如果您需要更多关于我如何设置的说明，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:22:24.670

哎呀，这完全是用户错误。

我在页面加载中添加了 MediaControl 事件的处理程序，但随后将 OnNavigatedFrom 删除。

我将注销代码移到了 Unloaded 事件中，现在它们保留在原处，以便音乐可以继续播放！

总而言之：确保您的 MediaControl 事件处理程序到位并在范围内保持音乐在后台播放！

# python - 在 Python 中更改对象的超类

> ID：14249793
> 
> 赞同：3
> 
> 时间：2013-01-10T02:10:34.267
> 
> 标签：python, reflection

我正在阅读有关 Python 中的反射的内容，并遇到了以下声明：

> 结构反射。可以修改类提供的方法集和对象​​具有的字段集。我们还可以修改对象作为实例的类，以及类继承的超类集。

[此处](http://www.reflection.uniovi.es/nrrs/description.shtml)对此进行了说明。

我尝试实现一个可以在 Python 中修改实例类的示例：

```
class Child():
    nmbrMovies = 0
    nmbrBooks  = 3

class Adult():
    nmbrMovies = 2
    nmbrBooks  = 5

class Member(Child):
    pass 
```

我想有一个成员类的实例，`x`它最初继承自 Child 类，因此继承了可以在虚构图书馆中租借的最大数量的电影和书籍。当人员/成员变为 时`Adult`，我想简单地将成员的超类更改为`Adult`. 我知道这不是实现这种结构的简单方法，但我想要一个示例来测试 Python 的这种功能。

有人知道我想要做的事情是否可行吗？还是我误解了 Python 的那个属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T02:18:08.733

```
class Child():
    nmbrMovies = 0
    nmbrBooks  = 3

class Adult():
    nmbrMovies = 2
    nmbrBooks  = 5

class Member(Child):
    pass

x = Member() 
```

`Member`开始继承自`Child`：

```
print(Member.__bases__)
# (<class __main__.Child at 0xb74a141c>,) 
```

可以将其更改为`Adult`：

```
Member.__bases__ = (Adult,)
print(Member.__bases__)
# (<class __main__.Adult at 0xb74a144c>,) 
```

现在`x.nmbrMovies`发现`Adult.nmbrMovies`：

```
print(x.nmbrMovies)
# 2 
```

也可以更改实例的类。`x`开始作为一个实例`Member`：

```
print(x.__class__)
# __main__.Member 
```

但我们可以将其更改为`Child`：

```
x.__class__ = Child
print(x.nmbrMovies)
# 0 
```

# c - 尝试在 Mac OSX 上设置 clang 和 llvm 以使用 gedit 运行 runC

> ID：14249796
> 
> 赞同：0
> 
> 时间：2013-01-10T02:10:43.553
> 
> 标签：c, llvm, clang

我一直在尝试让 clang 在 mac OSX 10.8 中工作时遇到问题，我是一名学生，目前正在学习 C，班级希望我使用名为 runC 的脚本在 gedit 中设置一个环境。一切正常，但是当我尝试编译 gedit 时说：

“需要 clang+llvm-3.1 才能使用 runc。尝试从[http://clang.llvm.org/](http://clang.llvm.org/)下载这个包”

我已经尝试为 mac 构建它，但还没有运气，如果有人知道如何做到这一点，请向我解释！我对终端很熟悉，但不太熟悉，如果有些事情可能让我感到困惑，我很抱歉。

（学校还提供了一个 ubuntu 构建，所有内容都设置好了，但如果可能的话，我宁愿不使用它，因为它是通过虚拟盒子实现的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:56:43.633

拿滑铁卢的cs136？我也遇到了这个问题。我认为这是因为 llvm 刚刚更新到 3.2 并且 runC 脚本还没有更新。

# javascript - 在加载包含图像之前渲染 Extjs4 面板

> ID：14249802
> 
> 赞同：0
> 
> 时间：2013-01-10T02:11:26.140
> 
> 标签：javascript, extjs

我有一个自定义容器，它有两个“xtype:image”组件。我发现第一次渲染面板时，它是在图像完全加载之前完成的，即它是在没有图像的情况下渲染的。

在初始渲染之后，任何会触发重新渲染的东西都会解决这个问题，比如 F5 甚至 F12 来打开开发工具。

我的猜测是，当渲染发生时，图像还没有完全加载。

有没有办法在图像完全加载后进行面板渲染？

# c++ - 用“多重组合”键表示查找表的数据结构

> ID：14249803
> 
> 赞同：3
> 
> 时间：2013-01-10T02:11:37.377
> 
> 标签：c++, oop

您将如何设计用于查找的表数据结构？

我基本上要代表下表

```
Country             Activity        Legal_Age
European            Drink           18
European            Drive           21
American            Drink           21
American            Drive           18 
```

这里我的键是（国家和活动），值是 Legal_age。

我想过使用 std::map 来分解这个问题（分解成单独的地图），如下所示。

national_Activity_age_map

```
European            European_Activity_age_map
American            American_Activity_age_map 
```

European_Activity_age_map

```
Drink           18
Drive           21 
```

American_Activity_age_map

```
Drink           21
Drive           18 
```

但这里的问题是，随着原始表的列数不断增长，要添加和维护的地图数量也在不断增长。

假设美国选择为美国公民和非公民设定单独的饮酒年龄。然后我将不得不添加新的映射并修改现有的映射。

是否有一种简单且干净的方法可以在 DataStructure 中表示此数据，该数据结构接受多因子键并产生一个值？

有一些类似的问题，如下所示，但没有解决我的具体问题。 [您将使用什么数据结构来表示这种数据格式？](https://stackoverflow.com/questions/1072574/what-datastructure-would-you-use-to-represent-this-format-of-data)

更新：我不能在工作中使用 Boost 功能，因为它必须被移植（或类似的东西）。是否有我可以使用的 C++ (gcc 4.1.2) 功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T02:21:44.427

试试[Boost Multi-Index](http://www.boost.org/doc/libs/1_52_0/libs/multi_index/doc/index.html)。

> Boost Multi-index Containers Library 提供了一个名为 multi_index_container 的类模板，它支持构建容器来维护一个或多个具有不同排序和访问语义的索引。索引提供类似于 STL 容器的接口，使使用它们变得熟悉。对同一元素集合进行多索引的概念是从关系数据库术语中借用的，它允许本着多索引关系表的精神来规范复杂的数据结构，其中简单的集合和映射是不够的。

# markdown - Markdown 到 docx，包括复杂的模板

> ID：14249811
> 
> 赞同：72
> 
> 时间：2013-01-10T02:12:16.783
> 
> 标签：markdown, docx, pandoc

我已经自动化了我的构建，使用 Pandoc 将 Markdown 文件转换为 DOCX 文件。我什至为最终文档的样式使用了参考文档。我使用的命令是：

```
pandoc -f markdown -t docx --data-dir=docs/rendering/ mydoc.md -o mydoc.docx 
```

由`reference.docx`Pandoc 提取，Pandoc使用与参考文档相同的样式进行`docs/rendering`渲染。`mydoc.docx`

但是，`reference.docx`包含的不仅仅是样式。它包含公司徽标、序言等。

如何自动将 Markdown 内容与`reference.docx`. 我的解决方案需要在 Linux 上运行。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2017-01-03T14:21:12.880

> **更新**
> 
> 使用用户 Christian Long 建议的管道版本：
> 
> ```
> pandoc -t latex mydoc.md | pandoc -f latex --data-dir=docs/rendering/ -o mydoc.docx 
> ```

* * *

我知道这来晚了，但我假设人们在最初的问题出现三年后仍在寻找解决方案——我知道我是。

我的解决方案是使用 LaTeX 作为 markdown 和 docx 之间的中介（实际上，我是从 org-mode 转换的，但有相同的区别）。所以在你的情况下，我相信一个单一的解决方案是：

```
pandoc -f markdown -t latex -o mydoc.tex mydoc.md && \
pandoc -f latex -t docx --data-dir=docs/rendering/ -o mydoc.docx mydoc.tex 
```

这可能会让你更接近你的目标。当然，Pandoc 可以处理大约数百个参数，并且可能有一些方法可以使这个参数更漂亮。自从您第一次发布问题以来，它也得到了很多更新。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-07T00:16:07.733

理想情况下，您可以使用自定义 docx 模板，但 pandoc 还不支持。`reference.docx`文件只允许将自定义样式嵌入到新创建的 docx 文件中。

幸运的是，您可以使用 odt 而不是 docx 来近似这一点。您可以相当轻松地修改[默认 OpenDocument 模板](https://github.com/jgm/pandoc-templates/blob/master/default.opendocument)以包含您的自定义徽标、序言和其他内容。将自定义模板与`reference.odt`文件结合使用以获取所有样式和自定义内容。

获得 odt 格式的文件后，您可以使用任意数量的命令行工具将 odt 转换为 docx。例如，在 Linux 上，您可以运行

```
libreoffice --invisible --convert-to docx test.odt 
```

或者在 OS X 上：

```
/Applications/LibreOffice.app/Contents/MacOS/soffice.bin --invisible --convert-to docx test.odt 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-11-22T14:41:09.473

理想情况下，PanDoc 会增加这个功能[，但看起来不太可能](https://groups.google.com/forum/#!searchin/pandoc-discuss/reference$20docx/pandoc-discuss/_KyoGN1Zf5g/uqFJWjYE_Q4J)很快。

我不知道有什么工具可以直接完成这项工作，但您可能会退回到合并`reference.docx`和您的 PanDoc 生成`mydoc.docx`的代码中。

.docx 格式是（主要是）XML 文件的 ZIP 存档。最重要的是`word/document.xml`。如果您使用 XML 工具从一个文件中获取（大部分）`document.xml`文件并将其插入到另一个文件中，那么您将获得更接近您需要的东西。

如果插图有帮助，我可以在 Ruby 中编写一个示例。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-11-04T11:19:29.527

## 更新：此功能不完整

我在一些复杂的模板上使用它，发现它很好地映射了字体、公司徽标等。但是要使用 .docx -> .docx，我必须手动将标题样式应用于章节/分节符。字体是正确的，但切片不正确。我将尝试 .md -> .docx 接下来。

* * *

此功能现在在 Pandoc 中可用，如下所述：

[Markdown 到 docx，包括复杂的模板](https://stackoverflow.com/questions/14249811/markdown-to-docx-including-complex-template)

从上面的链接：

```
pandoc  input --reference-docx=my-reference.docx -o out.docx 
```

其中`my-reference.docx`(nb not a `.dotx`) 可以是：

*   当前文件夹或
*   由 --data-dir 定义的文件夹或
*   data-dir 的系统默认文件夹是
    *   $HOME/.pandoc 在类 UNIX 系统上
    *   C:\Documents And Settings\USERNAME\Application Data\pandoc 在 Windows XP 上你不应该再使用
    *   C:\Users\USERNAME\AppData\Roaming\pandoc 在 Windows Vista 或更高版本上。

# c# - 为大文件下载设置超时

> ID：14249812
> 
> 赞同：2
> 
> 时间：2013-01-10T02:12:24.793
> 
> 标签：c#, jquery, asp.net, webforms

我有一个 ASPX WebForms 站点，用户可以在其中请求文件下载。下载链接是调用文件的 LinkBut `Response.Redirect()`​​ton `.ashx`。

我需要对其进行修改，以便如果它在 20 秒内没有返回，它会对将异步处理请求排队的 Web 服务进行不同的调用。问题是，我不知道如何设置 Response.Redirect 的超时。

我知道设置超时的唯一地方是 JQuery.Ajax 调用，它似乎根本不下载文件。我还需要能够测试超时，以便进行备用呼叫并调整 UI。我对如何构建它有一些余地；例如，我读到一篇博客说要创建一个 iframe 并将 iframe.src 设置为下载器 .ashx。这有效，但我再次无法指定超时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:20:12.347

我认为这不能解决您的问题，但您可以在 web.config 中设置页面的超时时间。例如，

```
 <location path="Page.aspx">
    <system.web>
        <httpRuntime executionTimeout="60" />
    </system.web>
</location> 
```

[ASP.NET HTTP 运行时设置。](http://msdn.microsoft.com/en-us/library/e1f13641%28v=vs.71%29.aspx)

# jquery - jquery刷新并加载带有表的页面

> ID：14249818
> 
> 赞同：1
> 
> 时间：2013-01-10T02:13:14.980
> 
> 标签：jquery, html, grails, gsp

我的 Jquery 有问题。所以，问题是每当我提交表格并获得结果表时。我的页面刷新，无法在 Jquery 对话框中加载结果。这是我的代码

```
<script>
    $(function () {
      $("#dialog").dialog({
        autoOpen: false,
        height: 600,
        width: 1000,
        show: "blind",
        hide: ""
      });

      $("#opener").click(function () {
        $("#dialog").dialog("open");
        return true;
      });
    });
</script> 
```

对于我的html：

```
<form id="searchtable" >

              <label>Search by Username :</label><input type ="text" name="searchid" style="border: 1px solid black">

                <input  type ="submit" name ="search" id="opener">
                <br>
                <%-- search table --%>
                  Results:
                  <div id="dialog" title="Search Result">
                  <table border ="1" id="normal">
                  <tbody>
                          <tr>
                              <th>ID</th>
                              <th>Username</th>

                          </tr>
                  </tbody>

                  <g:each in = "${example}">
                          <tr>
                              <td>${it.ID}</td>
                              <td>${it.username}</td>

                         </tr>
                  </g:each>
                  </table>
                  </div>

              <%--List Table--%>
               <table border ="1" id="normal">
               <tbody>
                      <tr>
                          <th>ID</th>
                          <th>Username</th>

                      </tr>
                </tbody>
              <g:each in = "${result}">
                        <tr>

                          <td>${it.ID}</td>
                          <td>${it.username}</td>

                        </tr>
              </g:each>
            </table>
    </form> 
```

所以提交值后，我需要处理控制器中的值并将其传递回 html 以显示出来。但它只是刷新并且无法加载。所以有人知道该怎么做吗？我只需要在表单提交->刷新->对话框出现结果后加载它。非常感谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:40:39.537

使用 jQuery 的 load() 函数，您可以向预期的控制器发送请求并让它呈现一个 HTML 响应（对话框的内容），该响应将在成功响应时加载到 #dialog 元素中。

```
<script>
    $(function () {
      $("#dialog").dialog({
        autoOpen: false,
        height: 600,
        width: 1000,
        show: "blind",
        hide: ""
      });

      $('#searchtable').submit( function () {
        var searchId = $('input[name="searchid"]').val();
        $('#dialog').load('/url/to/controller', { "searchid": searchId }, function () {
          $(this).dialog('open');
        });
        return false;
      });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T02:42:49.493

你需要这样的东西：

```
$(function () {
    $("#dialog").dialog({
        autoOpen: false,
        height: 600,
        width: 1000,
        show: "blind",
        hide: ""
    });

    $("#searchtable").on('submit', function() {
        alert("submit handler has fired");
        $.ajax({
            url: ...,
            data: $(this).serialize(),
            type: ...,
            success: function(html){
                //do something with the `html` returned from the server here
                alert(html);
                $("#dialog").dialog("open");
            },
            error: function(jqXHR, textStatus, errorThrown){
                alert('error: ' + textStatus + ': ' + errorThrown);
            }
        });
        return false;//suppress natural form submission
    });
}); 
```

参考 jQuery 的[$.ajax() 文档](http://api.jquery.com/jQuery.ajax/)，您将不得不填补空白。

# java - 为什么tomcat默认线程池大小这么大？

> ID：14249824
> 
> 赞同：12
> 
> 时间：2013-01-10T02:13:43.460
> 
> 标签：java, multithreading, tomcat

我注意到默认的 tomcat 7 线程池大小似乎是 200。

> 但是普通的 CPU 似乎有 16 个内核。

所以只能并行执行 16 个线程

> 为什么tomcat使用这么多线程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T02:18:22.163

多年来，许多单核计算机已经出现并且能够以“伪并行”模式运行功能，也就是说，您可能有 16 个线程以真正并行模式运行，而其他线程以伪并行模式运行。

有关更多信息，请查看：[并行计算](http://en.wikipedia.org/wiki/Parallel_computing)

为了回答您的问题，这些线程对于处理请求很有用，其中一些将用于处理 http 请求，而其他线程将用于调用应用程序逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-26T12:04:37.387

在 200 个线程中，只有 16 个线程在 16 核机器上运行。典型 Web 应用程序的逻辑是执行一些轻量计算和繁重的数据库查询。在 200 个线程中，只有少数在做计算，大部分都在等待数据库的响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T04:28:54.953

大多数现实生活中的 Web 应用程序使用数据库来存储应用程序数据，因此往往是磁盘密集型的。太多线程同时访问磁盘会导致磁盘抖动。因此，限制线程数在具有数据库的 Web 应用程序上确实有意义。

# ios - 为唯一日期创建 UITableView 部分

> ID：14249825
> 
> 赞同：2
> 
> 时间：2013-01-10T02:14:02.307
> 
> 标签：ios, objective-c, uitableview, nsdate

`UITableView`我正在寻找为每个唯一日期创建一个部分。

我的数据被格式化为一个对象数组，每个对象都包含一个`NSDate`内部。

最初，我使用 dateFormatter @"yyyy-MM-dd" 将每个日期转换为字符串，并相应地比较日期字符串。但这很慢，而且似乎是错误的方式。

我还尝试使用以下方法从中删除时间`NSDate`：

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar];
NSDateComponents *components = [gregorian components: NSUIntegerMax fromDate: trip.startTime];
[components setHour: 0];
[components setMinute: 0];
[components setSecond: 0];
NSDate *newDate = [gregorian dateFromComponents: components]; 
```

但是在使用数组函数时：

```
[allDays indexOfObject:newDate] 
```

我从来没有在重复的日期匹配。有谁知道如何干净地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:31:58.043

所以，实际上我最终做的是创建一个数组字典来存储我的对象。字典中的每个键都是一天，对象是我的对象数组（行程）

```
for(Trip *trip in allTrips)
{

    NSString *dateString = [self dayString:trip.startTime];
    NSMutableArray *dayArray = [dict objectForKey:dateString];

    //is the day in the dictionary?
    if (dayArray == nil)
    {
        //This day is not in the dictionary

        //create an empty array
        dayArray = [[NSMutableArray alloc]init];

        //add the array to the dictionary
        [dict setObject:dayArray forKey:dateString];

    }

    //add the trip to the array
    [dayArray addObject:trip];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:17:04.087

`indexOfObject:`使用`isEqual:`方法来比较对象。因此，您可以在自定义子类中覆盖它：

```
- (BOOL) isEqual:(id)object
{
    NSDateComponents* c1= [[NSCalendar currentCalendar]  components: NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit fromDate: self ];
    NSDateComponents* c2= [[NSCalendar currentCalendar]  components: NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit fromDate: object ];
    return [c1 isEqual: c2];
} 
```

# angularjs - 嵌套指令元素无法编译

> ID：14249831
> 
> 赞同：1
> 
> 时间：2013-01-10T02:14:56.607
> 
> 标签：angularjs, directive

我正在寻找有关嵌套 AngularJS 指令的帮助：

[http://jsfiddle.net/vankirkc/ezN3M/28/](http://jsfiddle.net/vankirkc/ezN3M/28/)

例如，我定义了一组自定义指令元素，包括容器和项目。我这样安排它们：

```
<container>
  <item />
  <item />
  <item />
</container> 
```

然后定义每一个。您可以从附加的 jsFiddle 中看到，没有为嵌套项调用编译函数，但是当项元素​​被移出容器时，它们是（表明编译函数本身没有问题。

为什么嵌套指令不触发编译事件？

这大致基于 Angular 主页上的这个示例：

[http://jsfiddle.net/vankirkc/HpHeW/](http://jsfiddle.net/vankirkc/HpHeW/)

我无法弄清楚为什么他们的孩子正确解析而我的孩子却没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:26:33.667

当您使用嵌入时，您必须将`ng-transclude`指令添加到您的模板元素之一。如果您将`group`指令的模板更改为：

```
template: '<div ng-transclude></div>', 
```

一切都会奏效。

PS：您的指令声明语法对于您正在做的事情过于冗长，但在技术上是正确的。

# c - 我一辈子都想不通为什么我的 C 程序崩溃了

> ID：14249834
> 
> 赞同：1
> 
> 时间：2013-01-10T02:15:16.647
> 
> 标签：c, binary-tree

我有一个 uni 任务，我必须在其中实现一个二叉搜索树。它必须获取信息并将其写入磁盘，并在树中保存一个索引。但是，每当我调用与树有关的函数时，程序就会崩溃。以下代码片段是我的 bTree.h 文件，以及导致崩溃的代码。

```
/* binary tree ADT */

#include <stdlib.h>
#include <stdio.h>
#include <string.h>

#define DATA_LENGTH 12
#define POS_LENGTH 8

struct INFO
{
    char data[DATA_LENGTH];
    int filePos;
};

struct NODE
{
    struct INFO data;
    struct NODE *left;
    struct NODE *right;
};

/* 
format for index data file

data identifier     12 bytes
position in file    8 bytes
--end of record--   total 20 bytes

*/

/* 
 Given a binary tree, return true if a node 
 with the target data is found in the tree. Recurs 
 down the tree, chooses the left or right 
 branch by comparing the target to each node. 
*/ 

int lookupPos(struct NODE *node, char target[]) 
{ 
    int length = strlen(target);

    // 1\. Base case == empty tree 
    // in that case, the target is not found so return false 
    if (node == NULL) 
    { 
        return -1; 
    }        

    else 
    { 
        // 2\. see if found here, in which case return file pos. 
        if (strncmp(target, node->data.data, length) == 0)
        {
            return node->data.filePos;
        }       

        else 
        { 
            // 3\. otherwise recur down the correct subtree 
            if (strncmp(target, node->data.data, length) < 0)
        {
            return lookupPos(node->left, target);
        }

            else 
            {
                return lookupPos(node->right, target); 
            }
        }    
    } 
} 

/* 
 Give a binary search tree and a number, inserts a new node 
 with the given number in the correct place in the tree. 
 Returns the new root pointer which the caller should 
 then use (the standard trick to avoid using reference 
 parameters). 
*/ 
struct NODE *insert(struct NODE *node, char info[], int pos) 
{ 
    int length = strlen(info);
    // 1\. If the tree is empty, return a new, single node 
    if (node == NULL) 
    { 
        struct INFO stuff; 
        strncpy(stuff.data, info, DATA_LENGTH);
        stuff.filePos = pos;

        node->data = stuff; 
        node->left = NULL; 
        node->right = NULL;

        return(node); 

    }    

    else 
    { 
        // 2\. Otherwise, recur down the tree 
        if (strncmp(info, node->data.data, length) <= 0) 
        {
            node->left = insert(node->left, info, pos); 
        }

        else 
        {
            node->right = insert(node->right, info, pos);
        }

        return(node); // return the (unchanged) node pointer 
    } 
} 

struct NODE *loadTree(char filename[]) //cIndex.dat for customers, pIndex.dat for products
{
    struct NODE *node;
    char data[DATA_LENGTH];
    char posStr[POS_LENGTH];

    FILE* file; 
    file = fopen(filename,"rb");

    char c;
    fseek(file, 0, SEEK_SET);

    while((c = fgetc(file)) != EOF) //reads until EOF char
    {
        fseek(file, -1, SEEK_CUR); 

        fread(data, sizeof(char), DATA_LENGTH, file);
        fread(posStr, sizeof(char), POS_LENGTH, file);

        insert(node, data, atoi(posStr));

    }       

    fclose(file);

    return node;
}

int saveTree(struct NODE *node, char filename[], int posInFile)
{
    FILE *file;
    file = fopen(filename, "r+b");

    char c;
    char posStr[POS_LENGTH];

    fseek(file, posInFile, SEEK_SET);

    while((c = fgetc(file)) != EOF)
    {
        fseek(file, -1, SEEK_CUR);

        fwrite(node->data.data, sizeof(char), DATA_LENGTH, file);
        sprintf(posStr, "%d", node->data.filePos);
        fwrite(posStr, sizeof(char), POS_LENGTH, file);

        posInFile = ftell(file);

        saveTree(node->left, filename, posInFile);
        saveTree(node->right, filename, posInFile);
    }

    fclose(file);

    return 1;
}

int getSize(struct NODE *node)
{
    if (node==NULL) 
    { 
        return 0; 
    }

    else 
    { 
        return( getSize(node->left) + 1 + getSize(node->right)); 
    } 
} 
```

现在有问题的代码片段：

```
int filePos = getSize(tree); 
```

和

```
insert(tree, cust.id, filePos);
saveTree(tree, "cIndex.dat", 0); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:20:11.197

你永远不会分配内存。在您的`insert`功能中：

```
if (node == NULL) 
{ 
    struct INFO stuff; 
    strncpy(stuff.data, info, DATA_LENGTH);
    stuff.filePos = pos;

    node->data = stuff; 
    node->left = NULL; 
    node->right = NULL;

    return(node); 

} 
```

“如果`node`是`NULL`然后开始分配东西给它”。哎呀！

你需要做的是：

```
node = malloc( sizeof(struct NODE) ); 
```

* * *

我认为的另一个主要问题是：

```
struct NODE *loadTree(char filename[])
{
    struct NODE *node;
    ...
} 
```

您必须初始化`node`为，`NULL`因为您`insert`稍后会在内部使用它的值。

并且 Daniel Fischer 已经指出你的字符串`loadTree`可能太短了一个字节（因此你不能可靠地调用`strlen`它们和相关的字符串函数）。

# windows-mobile-6.5 - 在 Windows Mobile 6.5 上禁用 SK1 和 SK2

> ID：14249844
> 
> 赞同：-1
> 
> 时间：2013-01-10T02:17:49.760
> 
> 标签：windows-mobile-6.5

我想在 Windows Mobile 6.5 上禁用 softkey1 和 softkey2。以下是注册表：

[HKEY_CURRENT_USER\SOFTWARE\Microsoft\Today\Keys\112]

@=""

打开=""

[HKEY_CURRENT_USER\SOFTWARE\Microsoft\Today\Keys\113]

@=""

打开=""

当我将 \Keys\112 和 \Keys\113 的两个值都分配为空时，它将使用默认的软键值。但是当我将每个值分配给空白时，softkey1 和 softkey2 的标签消失了，这很好，但是当我单击 softkey1 和 softkey2 所在的位置时，弹出消息说错误，因为它找不到处理申请该密钥。想知道我是否可以禁用它们？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:13:29.067

您不应该以这种方式处理软键的注册表。更好地赋予它们完整的价值。

如果您想获得自助服务终端模式设备，请将密钥分配给自助服务终端应用程序或锁定的程序启动器。

当您将不受支持的值分配给注册表项时，您不应该怀疑操作系统的行为会很奇怪。

据我所知，没有办法禁用主屏幕上的软键。但是您可以子类化菜单栏并拒绝在该位置单击“鼠标”。请注意，按下 F1 和 F2 硬件键仍会触发软键分配的功能。因此您也必须捕获并拒绝 F1 和 F2 键消息。

我的主页上有很多关于信息亭模式应用的信息。

# node.js - 协作中间件的首选架构是什么？

> ID：14249847
> 
> 赞同：1
> 
> 时间：2013-01-10T02:18:10.980
> 
> 标签：node.js, express, connect

如果我创建了一个数据库支持的路由中间件来检查一些数据，并且我希望它现在传递给视图/渲染中间件，那么我最好的方法是什么？

我是不是该：

*   将我获取的数据附加到请求对象并将我的渲染层设置为链中的下一个？
*   直接调用渲染层就好像我自己的路由器像中间件一样调用它？
*   也许还有其他建议？

我正在寻找一些通用的架构建议，这些建议可以帮助我确保我创建的每个功能组件最终不会变得不可维护且规模庞大。我读过的一些内容倾向于将事物分解为尽可能多的模块，这让我认为上面的两个选项可能很好。

但也许一个更好，或者我缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:12:10.950

如果您使用快速路由，鼓励重用和简单的可靠架构如下所示：

```
app.use(errorHandler); // errorHandler takes 4 arguments so express calls it with next(err)
app.get('/some/route.:format?', checkAssumptions, getData, sendResponse); 
```

...其中 checkAssumptions、getData 和 sendResponse 只是示例 - 您可以根据应用程序的需要制作更长或更短的路由链。此类函数可能如下所示：

```
function checkAssumptions(req, res, next) {
  if (!req.session.user) return next(new Error('must be logged in'));
  return next();
}

function getData(req, res, next) {
  someDB.getData(function(err, data) {
    if (err) return next(err);
    // now our view template automatically has this data, making this method reusable:
    res.localData = data;
    next();
  });
}

function sendResponse(req, res, next) {
  // send JSON if the user asked for the JSON version
  if (req.params.format === 'json') return res.send(res.localData);

  // otherwise render some HTML
  res.render('some/template');
} 
```

# php - 刷新时显示的登录信息不正确：PHP LOGIN SCRIPT

> ID：14249849
> 
> 赞同：0
> 
> 时间：2013-01-10T02:18:22.227
> 
> 标签：php, login

好的...所以...我的第一个问题在这里，请多多包涵。

我已经制作了一个包含注册、MySQL 数据库等的登录脚本。到目前为止，它运行良好。除了刷新页面时，即使我还没有输入任何信息，它也会给我不正确的登录信息错误。第一次加载页面，或者如果我登录一个假用户，然后注销，它会起作用。但这是代码

```
 if($_SESSION["logged"])
{
         print_secure_content();
}
else {
        if(!$_SESSION["logging"])
        {  
        $_SESSION["logging"]=true;
        echo "Login:";
        loginform();
        }
         else if($_SESSION["logging"])
           {
                 $number_of_rows=checkpass();
                 if($number_of_rows==1)
                        {       
                         $_SESSION[user]=$_POST[userlogin];
                         $_SESSION[logged]=true;
                         echo"<h1>you have logged in successfully</h1>";
                         print_secure_content();
                        }
                else{
                                   echo "wrong password or username, please try again";
                                    loginform();

                        }
                }

         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:22:11.053

那是因为您正在存储是否在`$_SESSION`.

当显示登录表单时，`$_SESSION['logging']`设置为`true`。然后，您成功登录（它仍然设置为 true）。下次您看到登录表单时，它仍设置为`true`，因此它会尝试检查您的用户名/密码组合，从而检查错误。

与其`$_SESSION['logging']`用来确定是否应该验证用户名/密码，不如检查`$_POST`数组中是否存在用户名和密码字段，因为这些字段仅在用户提交表单时出现。

# javascript - 使用anyorigin在javascript中获取JSON

> ID：14249850
> 
> 赞同：0
> 
> 时间：2013-01-10T02:18:46.313
> 
> 标签：javascript, jquery, json, fetch

我正在尝试获取数据，但以下脚本不起作用。你能帮我弄清楚吗？

```
function initialize() {
$.getJSON('http://anyorigin.com/get?url=http%3A//www.wawhost.com/appProject/fetchmarker.php&callback=?', function (data) {
localStorage.jsontext = data.contents;
});
}

localStorage.jsontext = localStorage.jsontext.replace('(', '{"temp":');
localStorage.jsontext = localStorage.jsontext.replace(')', '}');

obj = JSON.parse(localStorage.jsontext);

for(var i=0;i<=5;i++) {
document.write('<img src="' + obj.temp[i].image + '" />');
document.write(obj.temp[i].id);
document.write(obj.temp[i].location);
document.write('<br>');
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:30:59.690

您确实意识到`http://www.wawhost.com/appProject/fetchmarker.php`提供了 jsonp。

```
function initialize() {
    $.getJSON('http://www.wawhost.com/appProject/fetchmarker.php?callback=?', function (data) {
        for(var i=0;i<data.length;i++) {
            document.write('<img src="' + data[i].image + '" />');
            document.write(data[i].id);
            document.write(data[i].location);
            document.write('<br>');
        }
    });
}
initialize(); 
```

[http://jsfiddle.net/mowglisanu/BWfxw/](http://jsfiddle.net/mowglisanu/BWfxw/)

# javascript - 为什么将 $(this) 分配给 var

> ID：14249852
> 
> 赞同：2
> 
> 时间：2013-01-10T02:18:52.440
> 
> 标签：javascript, jquery, this, scope

> **可能重复：**
> [var $this = this 的原因是什么](https://stackoverflow.com/questions/7234282/what-is-the-reason-for-var-this-this)

为什么 $(this) 应该在函数范围内？它比直接引用 $(this) 有什么好处？

# 例子：

```
function Name(){
    var $this = $(this)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T02:21:30.777

该`$`函数根据传入的值*构建一个 jQuery 对象。*如果你不断地一遍又一遍地调用它，你就会一遍又一遍地构建同样的东西。很多人反而选择*缓存*结果，以避免重复。

# java - 是否可以使用 Wine 在 Linux 上运行 Eclipse Portable？

> ID：14249856
> 
> 赞同：0
> 
> 时间：2013-01-10T02:20:02.523
> 
> 标签：java, linux, windows, eclipse, wine

我正在尝试在 Linux 和 Windows 之间同步 Eclipse 安装，因此我在 Windows 上安装了 EclipsePortable 并将 EclipsePortable 安装移动到 Linux Mint。是否可以使用 Wine 在 Linux 上运行 Eclipse Portable？我在 Windows 的 Dropbox 上安装了 Eclipse Portable，然后尝试在 Linux 上使用 Wine 运行它，但它只是显示加载屏幕然后崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:01:36.883

虽然 Eclipse 是基于 Java 的应用程序，但是它的一些平台模块依赖于本地代码，例如本地启动器和 SWT。

这就是为什么 Eclipse 为不同的主机提供不同的分布。

从技术上讲，您仍然可以拥有一个可移植的 Eclipse。您可以将特定于主机的插件安装到一个 Eclipse 实例中，但它没有 UI 来执行此操作。在主机（AKA linux）中启动这些 Eclipse 时，Eclipse 不会加载适用于 Windows 的插件。

总之是可以做到的，但是对于普通用户来说难度很大。到目前为止，我不知道它的指南。

只有我的两分钱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-30T11:21:55.197

为了记录，是的，你可以。

对我来说，重要的关键是设置正确的架构和自定义 Wine 文件夹：

```
export WINEPREFIX=~/.wine-myapp
export WINEARCH=win32 
```

然后你应该安装你的 Java jvm，例如：

```
wine jre-8u181-windows-i586.exe 
```

就我而言，我可以为 32 位安装 Oracle Java v8，但永远不能为 64 位安装相同的版本。为此，我使用 Windows 版本的 OpenJDK 或将 Windows 机器上的安装复制到我的 Wine 安装中。

您可以使用以下方式启动 Eclipse：

```
WINEPREFIX=~/.wine-myapp2 WINEARCH=win32 ~/.wine-myapp//drive_c/Program\ Files/eclipse/eclipse.exe 
```

更多次要细节在我的博客文章[http://olea.org/diario/2018/07/27/EPF_Composer_in_Linux.html](http://olea.org/diario/2018/07/27/EPF_Composer_in_Linux.html)

我唯一的麻烦是 GUI 小部件看起来很丑。

# ios - 如何播放可以通过 iPhone 上的屏幕锁定按钮关闭的音频

> ID：14249857
> 
> 赞同：3
> 
> 时间：2013-01-10T02:20:02.600
> 
> 标签：ios, audio

我正在 iPhone 上开发一个 VOIP 应用程序，但在执行传入铃声功能时遇到了一些麻烦。我希望来电铃声可以在后台和手机锁定状态下播放。振铃器可以通过 iPhone 的硬件按钮消除，类似于原生电话呼叫行为。
1.当用户按下屏幕锁定时，铃声应该被静音 2.当静音按钮打开时，铃声应该被静音。

我无法通过将音频会话类别设置为播放模式或环境来解决问题。播放类别不支持屏幕锁定和静音按钮。环境类别不支持背景音频。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:06:34.710

为了使手机上音量按钮更改的音频静音，您需要注册以下通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(volumeChangedDuringDisconnectionAlert:) name:@"AVSystemController_SystemVolumeDidChangeNotification" object:nil]; 
```

然后在您的选择器功能中，使您的警报静音或做任何您想做的事情。

至于在用户解锁屏幕时静音音频，您很可能必须在应用程序委托中的`- (void)applicationWillEnterForeground:(UIApplication *)application`or函数中选择它。`- (void)applicationDidBecomeActive:(UIApplication *)application`

如果您有任何问题，请告诉我。

# android - 带有图像背景的 Android 布局控件

> ID：14249862
> 
> 赞同：0
> 
> 时间：2013-01-10T02:20:28.493
> 
> 标签：android, android-layout

我有一个以图像为背景的 Activity，背景设置为与父对象匹配。背景图像中有 TextViews 应该放置并显示数据的区域。我的问题是如何布局 TextView 控件，以便它们出现在背景的适当位置，而不管屏幕尺寸如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:24:50.123

您需要在其中使用 a[`FrameLayout`](http://developer.android.com/reference/android/widget/FrameLayout.html)与您的图像，[`RelativeLayout`](http://developer.android.com/reference/android/widget/RelativeLayout.html)在`FrameLayout`包含您的视图元素的内部。

查看[RelativeLayout 文档](http://developer.android.com/guide/topics/ui/layout/relative.html)和[本 FrameLayout 教程](http://mobile.tutsplus.com/tutorials/android/android-sdk_frame-layout/)，了解如何执行此操作的更多详细信息。

# android - Android 2-way SSL 实现

> ID：14249863
> 
> 赞同：1
> 
> 时间：2013-01-10T02:20:43.103
> 
> 标签：android

我找不到这方面的任何信息。最好的是 Android 中的 1 路服务器端 SSL 实现。

这可以做到吗？任何参考，我可以参考？我在 Android 开发者网站上也找不到任何信息。

# android - 需要字符串资源 id 的 Android 库项目中的 Android 库项目

> ID：14249868
> 
> 赞同：1
> 
> 时间：2013-01-10T02:21:52.483
> 
> 标签：android, android-resources

我有自己的 Android 库项目（例如 libA）。在其 libs/ 文件夹中，它使用另一个第三方 Android 库 B.jar，其中包含它自己使用的 res/strings。在我最终的 Android 应用程序项目“C”中，它包括 libA。当 B.jar 中的代码运行并尝试引用它为自己提供的字符串时，资源 id 为 0。现在，libA 也有 res/strings，它可以正常访问它们。我可以看到 aapt -S 命令引用了我的 Android 库项目 libA 的目录。所以问题是如何从我的 Android 库项目正在使用的第 3 方 .jar 文件中编译资源？

就像俄罗斯套娃！:)

# java - 可配置的自动装配 NullPointerException

> ID：14249870
> 
> 赞同：0
> 
> 时间：2013-01-10T02:22:13.283
> 
> 标签：java

我有一个用 @Configurable 注释的 GenericServlet 类，它有一个名为 dao 的字段，它由 spring 自动装配，但它没有正确地自动装配，而不是在使用它时抛出 nullpointerexception。我尝试使用 @Qualifier 强制执行 Spring DI，但它仍然返回 null；

```
@Configurable
public class GenericServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    @Autowired
    @Qualifier("genericDaoImpl")
    private GenericDAO dao;
}

@Repository
@Qualifier("genericDaoImpl")
@Transactional(propagation=Propagation.REQUIRED, isolation=Isolation.DEFAULT, rollbackFor={Exception.class, SQLException.class, DataAccessException.class}, timeout=9999)
public class GenericDAOImpl implements GenericDAO {

    @Autowired
    @Qualifier("jdbcTemplate")
    private JdbcTemplate jdbcDao;
}

<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"

    <!-- Enable Spring Application Context -->
    <context:spring-configured />

    <!-- Enable @Required @Autowired @PreDestroy @PostConstruct @Resource -->
    <context:annotation-config />

    <!-- Scan class file in class path for annotated component -> @Component, @Repository, @Service, and @Controller  -->
    <context:component-scan base-package="com.breeze.bis.core.service.jdbcTemplate" />

    <!-- Enable load time weaving for @Configurable -->
    <context:load-time-weaver aspectj-weaving="autodetect" />

    <!-- Alternate method to enable @Autowired -->
    <bean class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"/>

    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
        <property name="jdbcUrl" value="jdbc:mysql://localhost:3306/vbossdb" />
        <property name="driverClass" value="com.mysql.jdbc.Driver" />
        <property name="user" value="root" />
        <property name="password" value="root" />
    </bean>

    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
        <constructor-arg type="javax.sql.DataSource" ref="dataSource"></constructor-arg>
    </bean>

    <bean id="genericDaoImpl" class="com.breeze.bis.core.service.jdbcTemplate.GenericDAOImpl">
        <property name="jdbcDao" ref="jdbcTemplate"></property> 
    </bean>

    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource"></property> 
    </bean>

    <bean id="ehcache" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean"> 
        <property name="configLocation" value="WEB-INF/ehcache.xml"></property>
        <property name="shared" value="true"></property>
    </bean>

</beans> 
```

请让我知道这个配置有什么问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:35:02.027

如果我正确地记住了我的 Spring 注释，`@Qualifier`则不会继续使用您要识别的 bean。相反，您应该将其注释为`@Repository("genericDaoImpl")`.

# java - for-each 循环如何工作？

> ID：14249871
> 
> 赞同：10
> 
> 时间：2013-01-10T02:22:15.457
> 
> 标签：java, recursion, for-loop, foreach

当它调用一个方法时，for-each 循环是如何工作的，无论是递归还是不同的方法？

例子：

```
for(String permutation : permute(remaining))
    {   

      // Concatenate the first character with the permutations of the remaining chars
      set.add(chars.charAt(i) + permutation);
    } 
```

顺便说一下，**permute**方法接受一个字符串并返回一个集合。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T02:26:39.510

根据声明的[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2)，`enhanced for`表达式：

```
for ( FormalParameter : Expression ) Statement 
```

执行如下：

```
for (I #i = Expression.iterator(); #i.hasNext(); ) {
    VariableModifiersopt TargetType Identifier =
        (TargetType) #i.next();
    Statement
} 
```

因此，`Expression`（必须是 type `Iterable`）只有`iterator()`一次调用它的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T02:25:47.383

调用一次，存储结果，执行 foreach。

像这样：

```
Collection<String> temp = permute(remaining);
for(String permutation : temp) {
...
} 
```

编辑：如果这是递归的，那真的没有区别。每一层递归都有自己的范围，因此也有自己的“临时”变量。因此置换函数将递归到最低级别，然后每个更高级别将依次执行其*完全独立* `foreach`的循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T05:17:53.580

如果我们编译这个测试

```
class Test {
    public static void main(String[] args) throws Exception {
        Set<String> set = new HashSet<>();
        for (String s : set) {
        }
    }
} 
```

并用 JAD 反编译 Test.class 我们会看到 javac 用这段代码替换了 for-each

```
 Set set = new HashSet();
    String s;
    for(Iterator iterator = set.iterator(); iterator.hasNext();)
        s = (String)iterator.next(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T02:24:00.993

Foreach 循环适用于任何实现该`Iterable`接口的类，并且只是用于调用`hasNext()`和`next()`在`Iterator`. 相同的线程相同的循环并且该函数被调用一次。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T02:27:10.943

在您的示例中，在进入循环*之前*`permute(remaining)`评估结果。虽然增强的 for 循环实际上只不过是迭代器的语法糖，但它仍然遵循与其他循环相同的原则——它必须有一个集合来操作，然后才能执行其他任何操作。

 *一个更简单的例子是这样的：

```
while(input.hasNext()) 
```

您可能会在读取不定行数的项目中看到这种情况。`input.hasNext()`必须先评估表达式，然后才能循环。*

# iphone - UITableView 重用单元格的噩梦，如何在 4 行后停止重复而不重用单元格以提高性能？

> ID：14249876
> 
> 赞同：0
> 
> 时间：2013-01-10T02:23:04.590
> 
> 标签：iphone, ios, xcode, cocoa-touch, uitableview

我试图找出执行以下操作的正确方法：在 UITableView 的每一行中显示 3 个按钮。但它一直在重复，当我删除 if(cell == nil) 时它停止重复，但是当我滚动回顶部时，旧行变为空白。我在这里遗漏了一些明显的东西吗？

```
-(NSInteger)tableView:(UITableView*)tableView numberOfRowsInSection:(NSInteger)section
{
    pageNumbers = [models count]/3;
    pageNumbers+=1;
    return pageNumbers;
}

-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"cell";

    UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];

        if(totalRows+1 <= [models count])
        {
            UIButton* btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            btn.frame = CGRectMake(0, 1, 104, 160);
            IconEntity* iconForImage = [models objectAtIndex:totalRows];
            [btn setImage:iconForImage.TheImage forState:UIControlStateNormal];
            [btn addTarget:self action:@selector(buttonPressedAction:) forControlEvents:UIControlEventTouchUpInside];
            [btn setTag:1];

            UILabel* lbl = [[UILabel alloc] init];

            NSString* some_name = iconForImage.TheName;
            lbl.text = some_name;
            lbl.frame = CGRectMake(0, 1, 80, 80);

            [btn addSubview:lbl];
            [cell.contentView addSubview:btn];

            totalRows+=1;
        }

        if(totalRows+1 <= [models count])
        {
            UIButton* btn2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            btn2.frame = CGRectMake(108, 1, 104, 160);
            IconEntity* iconForImage = [models objectAtIndex:totalRows];
            [btn2 setImage:iconForImage.TheImage forState:UIControlStateNormal];
            [btn2 addTarget:self action:@selector(buttonPressedAction:) forControlEvents:UIControlEventTouchUpInside];
            [btn2 setTag:2];

            UILabel* lbl = [[UILabel alloc] init];
            lbl.text = iconForImage.TheName;
            lbl.frame = CGRectMake(0, 1, 80, 80);

            [btn2 addSubview:lbl];
            [cell.contentView addSubview:btn2];
            totalRows+=1;
        }

        if(totalRows+1 <= [models count])
        {
            UIButton* btn3 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            btn3.frame = CGRectMake(216, 1, 104, 160);
            IconEntity* iconForImage = [models objectAtIndex:totalRows];
            [btn3 setImage:iconForImage.TheImage forState:UIControlStateNormal];
            [btn3 addTarget:self action:@selector(buttonPressedAction:) forControlEvents:UIControlEventTouchUpInside];
            [btn3 setTag:3];

            UILabel* lbl = [[UILabel alloc] init];
            lbl.text = iconForImage.TheName;
            lbl.frame = CGRectMake(0, 1, 80, 80);

            [btn3 addSubview:lbl];
            [cell.contentView addSubview:btn3];
            totalRows+=1;
        }

    [cell setFrame:CGRectMake(cell.frame.origin.x, cell.frame.origin.y, cell.frame.size.width, 440)];
    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

    return cell;
} 
```

它不再重复，但我无法向后滚动单元格变为空白

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:45:35.210

像这样试试

```
-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellIdentifier = [NSString stringWithFormat:@"cell%d",indexPath.row];

    UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if(cell==nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];

        if(totalRows+1 <= [models count])
        {
            UIButton* btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            btn.frame = CGRectMake(0, 1, 104, 160);
            IconEntity* iconForImage = [models objectAtIndex:totalRows];
            [btn setImage:iconForImage.TheImage forState:UIControlStateNormal];
            [btn addTarget:self action:@selector(buttonPressedAction:) forControlEvents:UIControlEventTouchUpInside];
            [btn setTag:1];

            UILabel* lbl = [[UILabel alloc] init];

            NSString* some_name = iconForImage.TheName;
            lbl.text = some_name;
            lbl.frame = CGRectMake(0, 1, 80, 80);

            [btn addSubview:lbl];
            [cell.contentView addSubview:btn];

            totalRows+=1;
        }

        if(totalRows+1 <= [models count])
        {
            UIButton* btn2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            btn2.frame = CGRectMake(108, 1, 104, 160);
            IconEntity* iconForImage = [models objectAtIndex:totalRows];
            [btn2 setImage:iconForImage.TheImage forState:UIControlStateNormal];
            [btn2 addTarget:self action:@selector(buttonPressedAction:) forControlEvents:UIControlEventTouchUpInside];
            [btn2 setTag:2];

            UILabel* lbl = [[UILabel alloc] init];
            lbl.text = iconForImage.TheName;
            lbl.frame = CGRectMake(0, 1, 80, 80);

            [btn2 addSubview:lbl];
            [cell.contentView addSubview:btn2];
            totalRows+=1;
        }

        if(totalRows+1 <= [models count])
        {
            UIButton* btn3 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            btn3.frame = CGRectMake(216, 1, 104, 160);
            IconEntity* iconForImage = [models objectAtIndex:totalRows];
            [btn3 setImage:iconForImage.TheImage forState:UIControlStateNormal];
            [btn3 addTarget:self action:@selector(buttonPressedAction:) forControlEvents:UIControlEventTouchUpInside];
            [btn3 setTag:3];

            UILabel* lbl = [[UILabel alloc] init];
            lbl.text = iconForImage.TheName;
            lbl.frame = CGRectMake(0, 1, 80, 80);

            [btn3 addSubview:lbl];
            [cell.contentView addSubview:btn3];
            totalRows+=1;
        }

    [cell setFrame:CGRectMake(cell.frame.origin.x, cell.frame.origin.y, cell.frame.size.width, 440)];
    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
}
    return cell;
} 
```

# python - Python：如何将未知的多维数组放入一维数组中

> ID：14249885
> 
> 赞同：0
> 
> 时间：2013-01-10T02:24:24.140
> 
> 标签：python, arrays, multidimensional-array

我想知道在 python 中如何获取多维数组并将其放入一维列表中。这件事有效：

```
a = [[1,2],[3,4]]
sum(a,[]) 
```

我明白了：[1,2,3,4]

但是，如果我有一个维度未知或维度不恒定的多维：

```
a = [1,[3,4,[5,6,7]]] 
```

如何得到这个：[1,2,3,4,5,6,7]

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T02:35:04.413

```
def flatten(lis):
    for i in lis:
        if isinstance(i, collections.Iterable) and not isinstance(i, basestring):
            for sub in flatten(i):
                yield sub
        else:
            yield i 
```

取自[克里斯蒂安](https://stackoverflow.com/a/2158532/1907098)对[这个问题的解决方案](https://stackoverflow.com/q/2158395/1907098)

如果你想返回一个列表，你可以使用这个：

```
def flatten(lis):
    flat_list = []
    for i in lis:
        if isinstance(i, collections.Iterable) and not isinstance(i, basestring):
            flat_list.extend(flatten(i))
        else:
            flat_list.append(i)
    return flat_list 
```

然而，对于大列表，生成器函数效率更高，因为它在计算下一个值之前不会计算下一个值，这与将其值存储在内存中的列表不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T02:34:31.763

一种方法是使用递归，这样的事情应该可以工作：

```
def flatten_list(l):
    new_l = []
    for item in l:
        if type(item) == type([]):
            new_l += flatten_list(item)
        else:
            new_l.append(item)
    return new_l 
```

我没有测试这段代码，但想法就在那里。

# ivy - 无法解决 Ivy 中的依赖关系

> ID：14249886
> 
> 赞同：1
> 
> 时间：2013-01-10T02:24:35.563
> 
> 标签：ivy

我遇到了一个奇怪的事情。我使用常春藤检索标签将罐子放在某个地方。如果我编写如下代码：

```
 <target name="test">
        <ivy:retrieve pattern="lib/[artifact](.[ext])" sync="true" type="jar" conf="webInfLib"/>
    </target> 
```

它工作正常。但是，如果我添加如下内容：

```
 <target name="test">
        <ivy:cachepath pathid="ivy.path" />
        <ivy:retrieve pattern="lib/[artifact](.[ext])" sync="true" type="jar" conf="webInfLib"/>
    </target> 
```

它将抛出“不可能解决依赖关系”。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:55:25.193

无法重现您的问题。使用的是什么版本的 ivy？

# 例子

使用了以下软件版本：

```
Apache Ant(TM) version 1.8.2
Apache Ivy 2.3.0-rc2 
```

## 构建.xml

```
<project name="demo" default="build" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="init" description="Use ivy to resolve classpaths">
        <ivy:cachepath pathid="ivy.path" />
        <ivy:retrieve pattern="lib/[artifact](.[ext])" sync="true" type="jar" conf="webInfLib"/>
    </target>

    <target name="build" depends="init" description="build project">
    </target>

    <target name="clean" description="Cleanup build files">
        <delete dir="lib"/>
    </target>

    <target name="clean-all" depends="clean" description="Additionally purge ivy cache">
        <ivy:cleancache/>
    </target>

</project> 
```

## 常春藤.xml

```
<ivy-module version="2.0">
    <info organisation="com.myspotontheweb" module="demo"/>

    <configurations>
        <conf name="webInfLib"  description="add jar to web-inf/lib folder"/>
    </configurations>
    <dependencies>
        <dependency org="javax.servlet" name="servlet-api" rev="2.4" conf="webInfLib->default"/>
    </dependencies>

</ivy-module> 
```

# python - sys.stderr 是 Python3 中的块设备还是字符设备？

> ID：14249888
> 
> 赞同：2
> 
> 时间：2013-01-10T02:24:50.763
> 
> 标签：python, c, linux, buffer, device

在 C 语言中，如果我编写这样的代码：

```
#include <stdio.h>
#include <unistd.h>
int main() 
{
    while(1)
    {
        fprintf(stdout,"hello-std-out");
        fprintf(stderr,"hello-std-err");
        sleep(1);
    }
    return 0;
} 
```

标准输出不会显示，因为它是块设备。但是 stderr 会显示，因为它不是。

**但是，如果我在Python3**中编写类似的代码：

```
import sys
import time
if __name__ == '__main__':
    while True:
        sys.stdout.write("hello-std-out")
        sys.stderr.write("hello-stderr")
        time.sleep(1) 
```

如果我不刷新这些缓冲区，stdout 和 stderr 都不会显示。这是否意味着 sys.stderr 也是 Python 中的块设备？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T03:14:08.383

如果您没有看到 stderr，那么您在 Python3 上，其中文本 IO 层在连接到 tty 时是行缓冲的，否则不管`-u`选项是块缓冲的。

缓冲问题与字符/块设备无关。

# jquery - $.Ajax 调用不执行 XMLHttpRequest？

> ID：14249889
> 
> 赞同：0
> 
> 时间：2013-01-10T02:25:11.563
> 
> 标签：jquery, ajax

以下代码没有进行任何 AJAX 调用（Firebug 的控制台上没有出现任何内容）

```
<SCRIPT type="text/javascript" src="js/jquery-1.8.3.js"></SCRIPT>
<script type="text/javascript">
$(document).ready(function() {
  alert( "hola" );
  $.ajax({
    url: "index.php?action=ajaxMenu&sa=get",
    dataType: "json",
    success: function(data, status, xhttp) {
      if ( data ) { alert ('Got Data'); } else { alert('No Data'); }
    }
  })
})
</script> 
```

第一个警报被执行。

但是，如果我手动输入 url，我会得到以下响应：

```
{"data":[{"id":"3","name":"Menu 1"},{"id":"4","name":"menu2"}]} 
```

应该是简单的，我想。

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T02:34:22.697

`file:///`出于安全原因，Chrome 不允许您通过 执行 XHR 请求。使用本地服务器，例如 WAMP、EasyPHP 或 XAMPP 进行测试`=]`。

Chrome 可能的解决方法是使用以下选项从命令行启动它：

> --allow-file-access-from-files

但老实说，你迟早会遇到其他安全限制，因此使用本地服务器是要走的路。

# html - 如何将 eBay 产品图片放置在彼此下方，每张图片之间有间距

> ID：14249890
> 
> 赞同：0
> 
> 时间：2013-01-10T02:25:26.487
> 
> 标签：html, image

我在网上找到了以下代码：

```
<center><table>
<tr>
<td><a href="" http:="" imageshack.us="" photo="" my-images="" 838="" tmp423.jpg=""   '=""><img src="http://img838.imageshack.us/img838/7602/tmp423.jpg" width="300" height="300"></a>
</td>
<td><a href="" http:="" imageshack.us="" photo="" my-images="" 402="" dsc1324o.jpg="" '=""><img src="http://img402.imageshack.us/img402/7982/dsc1324o.jpg" width="300" height="300"></a>
</td>
<td><a href="" http:="" imageshack.us="" photo="" my-images="" 338="" dsc1325v.jpg="" '=""><img src="http://img338.imageshack.us/img338/135/dsc1325v.jpg" width="300" height="300"></a>
</td>
</tr>
</table></center> 
```

将图像并排放置，每个图像之间有间距。我正在尝试将每个图像放置在彼此下方，并在 eBay 列表描述中的每个图像之间放置间距。将每个图像放置在彼此下方并在每个图像之间放置间距的 html 代码是什么？我需要更改或添加到上面的代码中以使图像居中并位于彼此下方且每个图像之间有间距？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:41:00.250

您将所有内容都放在一个表格行 ( `<tr></tr>`) 中，这就是为什么所有内容都水平显示的原因。没有 CSS 的最简单的垂直获取方法是将每个图像放在一个表格行中。此外，不管`'=""`是什么，它都抛弃了 HTML 语法。修复它或摆脱它。就像现在一样，它什么也没做。最后，您没有关闭图像标签。

尝试这个：

```
<center><table>
<tr>
    <td><a href="" http:="" imageshack.us="" photo="" my-images=""        838="" tmp423.jpg=""><img src="http://img838.imageshack.us/img838/7602/tmp423.jpg" width="300"  height="300"></img></a></td>
</tr>
<tr>
    <td><a href="" http:="" imageshack.us="" photo="" my-images="" 402="" dsc1324o.jpg=""><img src="http://img402.imageshack.us/img402/7982/dsc1324o.jpg" width="300" height="300"></img></a></td>
</tr>
<tr>
    <td><a href="" http:="" imageshack.us="" photo="" my-images="" 338="" dsc1325v.jpg=""><img src="http://img338.imageshack.us/img338/135/dsc1325v.jpg" width="300" height="300"></img></a></td>
</tr>
</table></center> 
```

# wpf - NoResize 无 WIndowStyle 未显示在任务栏中 WPF 窗口在最小化时创建一个幽灵窗口

> ID：14249891
> 
> 赞同：0
> 
> 时间：2013-01-10T02:25:37.097
> 
> 标签：wpf, window

```
<Window WindowStyle="None" WindowState="Minimized" ResizeMode="NoResize" 
        ShowInTaskbar="False"> 
```

当我使用 WindowStyle、WindowState、ResizeMode 和 ShowInTaskbar 的这些设置最小化 WPF 窗口时，会出现如下所示的幽灵窗口：

![鬼窗](../Images/5a1b317eb96f6d7661ec31b08339b760.png)

出现在桌面...

当我将 ShowInTaskbar 属性更改为“True”时，不会显示幽灵窗口，但我不希望该窗口显示在任务栏中，所以这不是解决方案......

有没有人遇到过这个问题，有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:38:27.670

如果你想最小化到托盘，试试这个

```
 public MainWindow()
    {
        InitializeComponent();
        System.Windows.Forms.NotifyIcon trayIcon = new System.Windows.Forms.NotifyIcon();
        trayIcon.Icon = new System.Drawing.Icon("myIcon.ico");
        trayIcon.Visible = true;
        trayIcon.Click += (s, e) =>
        {
            Show();
            WindowState = WindowState.Normal;
        };
    }

    protected override void OnStateChanged(EventArgs e)
    {
        if (WindowState == WindowState.Minimized)
        {
            Hide();
        }
        base.OnStateChanged(e);
    } 
```

# android - 从 Android 中的静态 Handler 调用非静态方法

> ID：14249896
> 
> 赞同：1
> 
> 时间：2013-01-10T02:26:06.627
> 
> 标签：android

这一天我一直在谷歌搜索，但找不到一个简单的解决方案来回答我的问题。我有 Lint 警告“这个 Handler 类应该是静态的，否则可能会发生泄漏”所以我遵循 Romain Guy 和许多其他人提出的逻辑，并按如下方式构建了我的 Handler。

```
public static class MyHandler extends Handler {
    private final WeakReference<CustomTrophyCreateActivity> mActivity;

    MyHandler(CustomTrophyCreateActivity activity) {
        mActivity = new WeakReference<CustomTrophyCreateActivity>(activity);
    }

    @Override
    public void handleMessage(Message msg) {

    if (mActivity != null) {
    Activity activity = mActivity.get();
        if (activity != null) {
            // Call non static method in enclosing activity.. CANT DO THIS
            startUploadPhoto();
        }
    }           
} 
```

所以基本问题是..我如何从已设为静态的处理程序中调用此非静态方法以避免内存泄漏？

我真的很想避免让 startUploadPhoto() 成为静态的，因为 1）它不需要是 2）它需要大量的工作来改变变量。我完全理解为什么会弹出这个 lint 警告。我似乎无法找到一个简单的解决方案来摆脱它。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:33:41.460

您需要使用引用来调用该方法，而不是隐式封闭类。尝试`activity.startUploadPhoto();`

# ios - iOS中有没有像purge这样的命令？

> ID：14249903
> 
> 赞同：0
> 
> 时间：2013-01-10T02:26:54.520
> 
> 标签：ios, memory

在 MacOsx 中，我们可以通过终端清理内存，比如这个页面显示[http://www.electrictoolbox.com/purge-free-inactive-memory-mac-osx/](http://www.electrictoolbox.com/purge-free-inactive-memory-mac-osx/) 我们可以在终端中输入“purge”命令行。那么，在未越狱的 iOS 中，我们如何以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:00:52.690

`purge`不是您认为的工具。它刷新磁盘缓存。这是您在实践中通常永远不想做的事情。它当然不会“清理内存”。的目的`purge`是模拟冷启动条件，以便您可以进行性能测试。

也就是说，不，您不能在 iOS 上执行此操作。

# ios - 复制标题部分在 Xcode 的构建阶段中不可见

> ID：14249906
> 
> 赞同：2
> 
> 时间：2013-01-10T02:27:18.643
> 
> 标签：ios, macos, xcode4.5

我已经阅读了与此相关的其他帖子，但它们与我遇到的问题不同。

我正在从一个支持 OS X 平台的项目过渡到一个支持 iOS 的新项目。

我确实打开了一个项目，其中 Copy Headers 子标题可见。它支持的平台是 OS X，这就是我要过渡的平台。

![使用复制标题构建阶段](../Images/2a3149b2c15fc6d1588d3062742f8ec0.png)

我希望使用 Copy Headers 构建阶段的新 iOS 项目如下所示：

![没有复制标题的构建阶段](../Images/29a4509aa6fc1273df02c7be840c3a79.png)

谁能告诉我为什么这些项目有不同的构建阶段子标题？我可以在 Build Settings 下看到的唯一区别是前一个示例没有**Prefix Header**而后者有**Copy Files**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:35:57.627

谢谢，@CodaFi。你的回答回答了我的问题。单击窗口底部的 +“添加构建设置”，我可以选择将复制标题添加到我的新项目中。为了完整起见，如果我以后遇到问题，我会不遗余力，尽管你说它没有提供任何好处，但我会觉得包括这个选项更安全，因为 iOS 只支持静态库而不支持动态库。

伟大的！

# java - eclipse中非静态对象错误的静态引用

> ID：14249911
> 
> 赞同：-2
> 
> 时间：2013-01-10T02:28:14.083
> 
> 标签：java, arrays, arraylist

当我尝试调用时，Eclipse 给了我静态引用非静态对象错误`isOdd()`，`Number.java`但由于`isOdd()`不包含任何参数，我不能像往常一样调用外部方法。

**NumberAnalyzer.java**

```
import java.util.ArrayList;
import java.util.Scanner;

import com.sun.xml.internal.ws.api.pipe.NextAction;

import static java.lang.System.*;

public class NumberAnalyzer
{
private ArrayList<Number> list;

public NumberAnalyzer()
{

}

public NumberAnalyzer(String numbers)
{
    list = new ArrayList<Number>();
    String nums = numbers;
    Scanner chopper = new Scanner(nums);
    while(chopper.hasNext()){
        int num = chopper.nextInt();
        list.add(new Number(num));
    }
    chopper.close();
    System.out.println(list);
}

public void setList(String numbers)
{
    list = new ArrayList<Number>();
    String nums = numbers;
    Scanner chopper = new Scanner(nums);
    while(chopper.hasNext()){
        int num = chopper.nextInt();
        list.add(new Number(num));
    }
    chopper.close();

}

public int countOdds()
{
  int oddCount=0;
  for(int i = 0; i < list.size(); i++){
      if(Number.isOdd()== true){
          oddCount++;
      }
  }
  return oddCount;
}

public int countEvens()
{
  int evenCount=0;

  return evenCount;
}

public int countPerfects()
{
    int perfectCount=0;

  return perfectCount;
}

public String toString( )
{
    return "";
}
} 
```

**数字.java**

```
public class Number
{
private Integer number;

public Number()
{

}

public Number(int num)
{
    number = num;
}

public void setNumber(int num)
{
    number = num;
}

public int getNumber()
{
    return number;
}   

public boolean isOdd()
{
    if(number%2==0){
        return false;
    }
    return true;
}

public boolean isPerfect()
{
    int total=0;
    for(int i = 1; i < number; i++){
        if(number%i==0){
            total+= i;
        }
    }

    return (number==total);
}   

public String toString( )
{
    String output = getNumber() + "\n" + getNumber()+ "isOdd == " + isOdd() + "\n" + getNumber()+ "isPerfect==" + isPerfect()+ "\n\n";
    return output;
}
} 
```

**跑步者班**

```
import java.util.ArrayList;
import java.util.Scanner;
import static java.lang.System.*;

public class Lab16b
{
public static void main( String args[] )
{
    NumberAnalyzer test = new NumberAnalyzer("5 12 9 6 1 4 8 6");
    out.println(test);
    out.println("odd count = "+test.countOdds());
    out.println("even count = "+test.countEvens());
    out.println("perfect count = "+test.countPerfects()+"\n\n\n");

    //add more test cases

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:30:47.603

你似乎有`list`全球性。做就是了

```
 for(int i = 0; i < list.size(); i++){
          if(list.get(i).isOdd()){
              oddCount++;
          }
      } 
```

这样你实际上得到了一个`Number`from`list`并且可以调用该`isOdd()`方法。

请注意，您不需要`== true`检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T02:31:52.920

`Number.isOdd`适用于一个`Number`实例。由于您的`for`循环覆盖了`List`( `list`) 的索引范围`Numbers`，因此您可以替换

```
if (Number.isOdd() == true) { 
```

和

```
if (list.get(i).isOdd() == true) { 
```

或更好

```
if (list.get(i).isOdd()) { 
```

# java - 跳过 ViewScoped bean 中的 BeanValidator，其中 f:param 嵌套在 p:commandButton 中

> ID：14249912
> 
> 赞同：0
> 
> 时间：2013-01-10T02:28:25.300
> 
> 标签：java, jsf, primefaces, bean-validation, view-scope

我正在使用 BeanValidator（扩展 javax.faces.validator.BeanValidator），在某些情况下我需要阻止验证，因为某些操作不需要它。我的验证器检查请求参数映射中是否存在值为“ignore_validation”的“validationBean”参数，如果找到，则跳过验证。

我在**ViewScoped**托管 bean 中很难做到这一点。通过执行以下操作单击某些按钮时，我试图跳过验证：

```
<p:commandButton id="button" icon="ui-icon-plusthick" onclick="createDialogWidget.show()">
    <f:param name="validationBean" value="ignore_validation"/>
</p:commandButton> 
```

在我的 BeanValidator 中，我试图获取参数并跳过验证：

```
public void validate(FacesContext context, UIComponent component, Object value) {
    String validationBean = context.getExternalContext().getRequestParameterMap().get("validationBean");
    if (validationBean != null && validationBean.equals("ignore_validation")) {
            return;
    }
    ...
} 
```

但是，上面的“validationBean”变量为空，即没有找到参数。因此，正在执行验证。

为什么请求参数映射中没有参数？这个概念有什么问题吗？在某些情况下是否有其他推荐的方法来跳过 BeanValidator 验证？

我正在使用 primefaces 3.2.4、Mojarra 2.1.2 和 Tomcat 6.0.36。

谢谢！

# hibernate - hibernate - 一对一映射，如何使用注释获取关联对象？

> ID：14249913
> 
> 赞同：1
> 
> 时间：2013-01-10T02:28:43.210
> 
> 标签：hibernate, annotations

我有 2 个对象`Customer`和`CustomerAcctSetting`. `CustomerAcctSetting`有外键`CUSTOMER_ID`。我的问题是当我得到一个`Customer`对象时，我无法获得关联的对象`CustomerAcctSetting`并且只返回 null。

下面是2个休眠对象：

**`Customer.java`**

```
@Entity
@Table(name = "CUSTOMER")
public class Customer extends BaseDomain{
    .
    .
    .
    private CustomerAcctSetting customerAcctSetting;

    @Id
    @Override
    @GeneratedValue(generator = "increment")
    @GenericGenerator (name = "increment", strategy = "increment")
    @Column (name = "CUSTOMER_ID", unique = true, nullable = false, insertable = false, updatable = false)
    public int getId() {
        return super.getId();
    }

    .
    .
    .

    @OneToOne
    @JoinColumn(name = "CUSTOMER_ID")
    public CustomerAcctSetting getCustomerAcctSetting() {
        return customerAcctSetting;
    }

    public void setCustomerAcctSetting(CustomerAcctSetting customerAcctSetting) {
        this.customerAcctSetting = customerAcctSetting;
    }
} 
```

**`CustomerAcctSetting.java`**

```
@Entity
@Table(name = "CUSTOMER_ACCT_SETTING")
public class CustomerAcctSetting extends BaseDomain{
    private int customerId;
    .
    .
    .

    @Id
    @Override
    @GeneratedValue(generator = "increment")
    @GenericGenerator (name = "increment", strategy = "increment")
    @Column (name = "CUSTOMER_ACCT_SETTING_ID", unique = true, nullable = false, insertable = false, updatable = false)
    public int getId() {
        return super.getId();
    }

    .
    .
    .

    @Column(name = "CUSTOMER_ID")
    public int getCustomerId() {
        return customerId;
    }

    public void setCustomerId(int customerId) {
        this.customerId = customerId;
    }
} 
```

我没有在 中包含任何映射，`Customer`因为`CustomerAcctSetting`我不必`Customer`从`CustomerAcctSetting`. 我只放`CUSTOMER_ID`了`CustomerAcctSetting`.

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T03:23:37.490

我通过使用`mappedBy="Customer"`in解决了这个问题`Customer`并添加了`Customer`in`CustomerAcctSetting`和`@JoinColumn`.

以下是课程：

**客户.java**

```
@Entity
@Table(name = "CUSTOMER")
public class Customer extends BaseDomain{
    .
    .
    .
    private CustomerAcctSetting customerAcctSetting;

    @Id
    @Override
    @GeneratedValue(generator = "increment")
    @GenericGenerator (name = "increment", strategy = "increment")
    @Column (name = "CUSTOMER_ID", unique = true, nullable = false, insertable = false, updatable = false)
    public int getId() {
        return super.getId();
    }

    .
    .
    .

    @OneToOne(mappedBy="customer")
    public CustomerAcctSetting getCustomerAcctSetting() {
        return customerAcctSetting;
    }

    public void setCustomerAcctSetting(CustomerAcctSetting customerAcctSetting) {
        this.customerAcctSetting = customerAcctSetting;
    }
} 
```

**`CustomerAcctSetting.java`**

```
@Entity
@Table(name = "CUSTOMER_ACCT_SETTING")
public class CustomerAcctSetting extends BaseDomain{
    private Customer customer;
    .
    .
    .

    @OneToOne
    @JoinColumn (name="CUSTOMER_ID", insertable=false, updatable=false)
    public Customer getCustomer() {
        return customer;
    }

    public void setCustomer(Customer customer) {
        this.customer = customer;
    }
} 
```

# python - Ghostscript PDF to PNG：单词的字符间距在结果图像中变得混乱

> ID：14249916
> 
> 赞同：1
> 
> 时间：2013-01-10T02:29:57.147
> 
> 标签：python, pdf, fonts, png, ghostscript

从 pdf 文件中，我成功地为 pdf 中的每一页生成了 1 个 png 图像。

问题是，无论我使用什么设置，对于某些页面，GhostScript 都会弄乱字体间距，以至于在某些 png 中，一个单词看起来像是 2 个或 3 个单词。

这是一个问题，因为我在印象笔记中使用这些文件会弄乱预期的搜索结果。因此，搜索“Providers”不会返回任何内容，因为在 png 文件中，它显示为“Pro vid er rs”（或“Users”显示为“Use rs”）。

Dropbox 链接到屏幕截图，左侧显示源 pdf 的原始文本，右侧显示生成的 png --> [http://dl.dropbox.com/u/13267240/ScreenClip.png](http://dl.dropbox.com/u/13267240/ScreenClip.png)

我是 Ghostscript 的新手，不知道为什么会这样。

这是我正在使用的命令行（在 Python 中）：

cmd = "gswin%sc " % (SYS_PROCESSOR_ARCH) + "-q -dNOPAUSE -dBATCH -dPDFFitPage=true -sDEVICE=png16m -r%s " % (PNG_RES) + "-sOutputFile=" + '"%s\%s -pg-%%d.%s" "%s"' % (outputdir, outputFileNamePrefix, suffix, pdfSourceFile)

或在运行时评估：

gswin64c -q -dNOPAUSE -dBATCH -dPDFFitPage=true -sDEVICE=png16m -r300X300 -sOutputFile="C:\EPTK-TMP\02-01-Introduction-pg-%d.png" "C:\EPTK-TMP\02 -01-Introduction.pdf"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T06:50:24.807

PDF 示例中的字体是无衬线字体（没有线条的小装饰性结尾等...），PNG 示例中的字体是衬线字体（带有小装饰性...）。

所以 GhostScript 在进行 PDF 到 PNG 的转换时由于某种原因没有使用正确的字体。这可能有几个原因：

1) 字体可能没有嵌入到 PDF 文件中，因此 GhostScript 必须找出其他东西。

2) 这些字体在您的系统上也可能不可用，因此 GhostScript 只需将它们替换为一些默认值。这会改变字母的外观，可能还会改变字母的宽度，从而产生间距问题。

所以问题是您是否首先生成PDF。如果是这样，您可能需要做得更好，以便 GhostScript 可以使用嵌入的字体。如果您没有生成 PDF，您可以尝试找出您拥有的这些 PDF 文件中使用了哪些字体，并确保它们可用于您系统上的 GhostScript。

我对 GhostScript 不太熟悉，但也许这些字体已经在您的系统上，这只是 GhostScript 找不到它们的问题。在这种情况下，请查看是否有命令行参数将其指向系统上正确的字体文件夹。

# java - 为什么 Scala Source.fromURL 比 Apaches IOUtils 慢？

> ID：14249918
> 
> 赞同：1
> 
> 时间：2013-01-10T02:30:06.680
> 
> 标签：java, scala, io

我试图弄清楚是否有一种更快的方法可以使用 Scala 从 URL 获取内容。使用 Apache `IOUtils`，我能够比`Source.fromURL`在 Scala 中更快地获取内容。以下是两者的代码：

使用 Java：

```
 try {
        tmp=IOUtils.toString(new URL("http://gizmodo.com"));
        tmp=tmp.substring(tmp.indexOf("360\" title=")+12);
        tmp=tmp.substring(0,tmp.indexOf("\""));
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

使用斯卡拉：

```
 val gizmodoPageLines = Source.fromURL("http://gizmodo.com").getLines.mkString("\n")
  val pos=gizmodoPageLines.indexOf("360\" title=")
  var tmp=gizmodoPageLines.substring(pos+12)
  tmp.substring(0,tmp.indexOf("\"")) 
```

在 Java 中大约需要：155899 ns

在 Scala 中：343880 ns

为什么 Scala 代码这么慢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T02:46:51.640

因为在您的第一个中您正在从缓冲区中读取，而在您的第二个中您正在逐行读取。

Source.getLines 不打算作为 IOUtils 或任何其他库的灵丹妙药替代品，它旨在逐行阅读。你可以在 Scala 中完美地使用 IOUtils。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T05:52:52.527

看看你的连接有多慢（获得 gizmodo 需要 2 到 6 分钟），你可能会发现 Scala 和 Java 之间的读取速度不是问题，而是互联网连接不可靠。如果您真的想测试速度差异，请尝试从本地服务器提供文件，这样您就可以从等式中删除互联网连接速度。

最后，对于高级 HTTP 客户端，我会查看[Spray HTTP Client](http://spray.io/documentation/spray-can/examples)。Spray 是一个非常好的非阻塞（使用 Actors）HTTP 工具集。

# jquery - 如何使用 $.startajax 和 $.closeajax 在 ajax 调用期间显示加载面板

> ID：14249919
> 
> 赞同：-2
> 
> 时间：2013-01-10T02:30:08.523
> 
> 标签：jquery

大家好，我想使用 $.ajaxstart() 和 $.ajaxcomplete() 在 ajax 调用期间显示加载面板，任何人都可以给我一段代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:41:48.277

您提供的信息很少，所以我只是尝试通过使用`beforeSend`and`done`事件来处理您的请求，为您提供另一种处理方式。

```
$.ajax({
  url: "demo.html",
  beforeSend: function ( xhr ) {
       // Make your init action of the progress
  }
}).done(function ( data ) {
      // End action of the progress
}); 
```

您可以在此处的 jQuery 文档中找到任何内容：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)和此处[http://api.jquery.com/Ajax_Events/](http://api.jquery.com/Ajax_Events/)

# java - 从 Java Servlet 执行时 Imagemagick 无法打开文件

> ID：14249921
> 
> 赞同：1
> 
> 时间：2013-01-10T02:30:29.083
> 
> 标签：java, terminal, imagemagick, exec

我正在尝试使用 imagemagick 和 Java 将文件从 png 转换为 pdf。当我执行 imagemagick 命令以实际将多个 png 合并为一个 pdf 时，我已经完成了所有工作。该命令本身看起来很正常，并且在终端中执行时可以正常工作，但是我的应用程序给了我错误，显示 imgck 无法打开文件（即使它存在并且我已将文件夹的权限设置为 777 ：

```
line: convert: unable to open image `"/Users/mk/Documents/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/sch-java/print-1357784001005.png"': No such file or directory @ error/blob.c/OpenBlob/2642. 
```

这是我的命令：

`/opt/local/bin/convert "/Users/mk/Documents/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/sch-java/print-1357784001005.png" "/Users/mk/Documents/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/sch-java/print-1357784001219.png" "/Users/mk/Documents/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/sch-java/complete-exportedPanel2013-01-1003:13:17.212.pdf"`

还有我的 Java 代码：

```
String filesString = "";

for (String s : pdfs){
    filesString += "\""+ s + "\" ";
}

Process imgkProcess = null;

BufferedReader br = null;
File f1 = new File(pdfs[0]);

//returns true
System.out.println("OE: "+f1.exists());

String cmd = imgkPath+"convert "+ filesString+ " \""+outputPath+outName+"\"";
try {
    imgkProcess = Runtime.getRuntime().exec(cmd);
    InputStream stderr = imgkProcess.getErrorStream();
    InputStreamReader isr = new InputStreamReader(stderr);
    br = new BufferedReader(isr);
} catch (IOException e1) {
    msg = e1.getMessage(); 
}

imgkProcess.waitFor();

while( (line=br.readLine() ) != null){
    System.out.println("line: "+line);
} 
```

从表单获取请求后，整个代码从 java servlet 控制器执行。有什么想法会导致这种情况吗？我正在使用最新的 imgck、jdk 和 osx 10.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:57:28.807

一些东西：

*   当产生除了真正琐碎的进程之外的任何东西时，通常使用 ProcessBuilder 比使用 Runtime.exec() 更好 - 它可以让您更好地控制

*   即使使用 ProcessBuilder，编写一个满足您需要的 shell 脚本通常效果更好。然后产生一个进程来运行脚本。与在 ProcessBuilder 中相比，您在 shell 脚本中获得了更多的控制权

*   请记住，生成的进程不是 shell。例如，它不能计算表达式或扩展 shell 变量。如果需要，则必须执行 shell（如 sh 或 bash）。更好的是，如上所述编写一个 shell 脚本

*   如果您需要做的只是执行一些 ImageMagick 命令，那么 jmagick（ImageMagick 的 Java 接口）可能会更容易 - 请参阅[http://www.jmagick.org/](http://www.jmagick.org/)

*   实际上，由于您将图像组装成 PDF，iText 库 - [http://itextpdf.com](http://itextpdf.com)可能是完成这项工作的最佳工具，因为它是本机 Java 代码，不需要生成本机进程，并且会因此更便携。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:20:14.913

通过将所有参数添加到 arrayList 然后将其转换为 String 数组来解决它。

```
ArrayList<String> cmd = new ArrayList<String>();
cmd.add(imgkPath+"convert");

for (int i=0, l=pdfs.length; i<l; i++){
    cmd.add(pdfs[i]);
}
cmd.add(outputPath+outName);

imgkProcess = Runtime.getRuntime().exec(cmd.toArray(new String[cmd.size()])); 
```

# javascript - css 动画仍然比 ios 6+ 中的 javascript 动画快吗？

> ID：14249930
> 
> 赞同：2
> 
> 时间：2013-01-10T02:31:19.807
> 
> 标签：javascript, css, mobile-safari

要为元素设置动画，我们可以使用 css 动画，也可以在 javascript 中进行。

阅读此内容，似乎 css 动画有望比 javascript 动画更快地呈现，因为浏览器可以在本机代码中执行 css 动画。此信息是从 2008 年至 2011 年的帖子中收集的。

使用 ios 6，情况仍然如此吗？在发行说明中，我发现了这个项目：

```
"WebKit no longer always creates hardware-accelerated layers 
for elements with the -webkit-transform: preserve-3d option. 
Authors should stop using this option as a way to get hardware 
acceleration." 
```

[http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)

由于我对网络动画还很陌生，所以我不确定当前的状态是什么，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:33:00.690

CSS 动画和过渡总是比 JavaScript 快，因为只需处理一条指令，而不是必须遵循相同效果所需的所有 JS 指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:53:57.683

我将发布消息解释为“*不再保证`preserve-3d`强制硬件加速*的值”（并且不应用作断言 HA 的黑客手段）。如果 UA 选择*不*使用 HA，它将有充分的理由。

无论如何，本机实现的 CSS 过渡仍然比手动 JS 动画快（至少在一般情况下）。此外，当您可以使用简短的 [基本] CSS 实现相同的目标时，没有理由使用 JavaScript。

# bash - OPTIND 变量如何在 shell 内置 getopts 中工作

> ID：14249931
> 
> 赞同：15
> 
> 时间：2013-01-10T02:31:24.550
> 
> 标签：bash, shell, getopts

我的shell脚本很简单，如下：

```
 while getopts "abc:" flag; do
         echo "$flag" $OPTIND $OPTARG
  done 
```

我做了一些测试如下：

```
Blank@Blank-PC:~/lab/shell/getopts_go$ sh foo.sh -abc CCC Blank
a 1
b 1
c 3 CCC

Blank@Blank-PC:~/lab/shell/getopts_go$ sh foo.sh -a -b -c CCC Blank
a 2
b 3
c 5 CCC

Blank@Blank-PC:~/lab/shell/getopts_go$ sh foo.sh -ab -c CCC Blank
a 1
b 2
c 4 CCC

Blank@Blank-PC:~/lab/shell/getopts_go$ sh foo.sh -a -bc CCC Blank
a 2
b 2
c 4 CCC 
```

我无法理解如何`OPTIND`使用不同的命令行调用，我对输出感到困惑。

你能帮忙弄清楚计算的机制`OPTIND`吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-10T03:42:49.080

根据`man getopts`，`OPTIND`是下一个要处理的参数的索引（起始索引为 1）。因此，

在`sh foo.sh -abc CCC Blank`arg1 is 中`-abc`，所以当 next is ( )`a`时我们仍在解析 arg1 。next is 时也是如此，我们仍在 arg1 ( ) 中。当我们在 时，因为需要一个参数 ( )，所以是（arg2 是 CCC，我们跳过它）。`b``a 1``c``b 1``c``c``CCC``OPTIND``3`

在`sh foo.sh -a -b -c CCC Blank`中，arg1 是`a`arg2 是`b`arg3 是`c`arg4 是`CCC`。所以我们得到`a 2, b 3, c 5`.

在`sh foo.sh -ab -c CCC Blank`args 中是 (1: `-ab`, 2: `-c`, 3:`CCC`和 4: `Blank`)。所以我们得到：`a 1, b 2, c 4`。

在`sh foo.sh -a -bc CCC Blank`args 中是 (1: `-a`, 2: `-bc`, 3: `CCC`, 4: `Blank`) 我们得到`a 2, b 2, c 4`.

# css - 生成具有相同内容的 css 类

> ID：14249943
> 
> 赞同：2
> 
> 时间：2013-01-10T02:32:50.953
> 
> 标签：css, sass

我有下面的sass。在其中我有几个 charx 类，其中 x 介于 1...7 之间。是否可以以更简洁的方式定义它们而不是单独定义它们中的每一个？

```
$first-color: #666666;
$second-color: #0066CC;

@mixin letter($color){
    color: $color;
}

.char1{
    @include letter($first-color);
}

.char2{
    @include letter($second-color);
}

.char3{
    @include letter($first-color);
}

.char4{
    @include letter($second-color);
}

.char5{
    @include letter($first-color);
}

.char6{
    @include letter($second-color);
}

.char7{
    @include letter($first-color);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T02:48:24.650

你可以用纯 CSS 实现同样的效果：

```
$first-color: red;
$second-color: salmon;

span:nth-of-type(2n-1) {
  color: $first-color;
}

span:nth-of-type(2n) {
  color: $second-color;
} 
```

或者，您可以使用该[`@while`](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#id13)指令：

```
$i: 1;
@while $i <= 7 {
  .char#{$i}{
    @include letter($first-color);
  }

  .char#{$i+1}{
    @include letter($second-color);
  }  

  $i: $i + 2;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T03:13:22.177

为什么不直接使用`even`和`odd`规则？就像这样，您将能够添加无限元素，而无需每次都触摸您的 CSS。

```
$first-color: #666666;
$second-color: #0066CC;

@mixin letter($color){
      color: $color;
}

.chars div:nth-child(even){
       @include letter($first-color);
}

.chars div:nth-child(odd){
       @include letter($second-color);
} 
```

[这是](http://codepen.io/nobitagit/pen/rckbC)我的 Codepen 上的一个示例。

# ruby-on-rails - 用于管理员的 Rails 3 特定控制器呈现默认的“显示”视图

> ID：14249945
> 
> 赞同：0
> 
> 时间：2013-01-10T02:33:04.573
> 
> 标签：ruby-on-rails, view-inheritance

这是我的问题，我正在尝试按照这个很好的教程在我的应用程序中实现一个单独的管理层：http: [//iain.nl/backends-in-rails-3-1](http://iain.nl/backends-in-rails-3-1)

一切都很顺利，但在views/backend/items/index.html.erb中，有一个共同点：

```
<%= link_to 'Show', item %> 
```

我得到了默认的应用程序视图：views/items/show 而不是 backend/views/items/show

对索引页面的调用是从 backend/items_controller 进行的，但似乎 Rails 3 视图继承正在跳过链中的第一部分。

任何的想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:49:33.130

从显示的教程中，它应该是：

```
link_to 'show', resource_path(resource) 
```

?

# sql - 提交查询以根据日期返回多列？

> ID：14249947
> 
> 赞同：0
> 
> 时间：2013-01-10T02:33:10.463
> 
> 标签：sql, sqlite

我有一张表格，列出了员工的服务电话。我设置了一个视图来查看表格中的发票总和。

```
Select EmployeeID, SUM(InvoiceAmount) as "Total $ Amount Of Calls For January"
From Calls
WHERE Date BETWEEN '2013/01/01' AND '2013/01/31'
Group by EmployeeID 
```

这很好用，但我必须每个月查看十二次，这似乎有点多余。我希望能够使用子查询来显示 EmployeeID，然后在下面列出每个月的总数。

```
EmployeeID   JAN   FEB   MAR   APR ...
john         444   555   342   654
jim          945   675   232   465 
```

我尝试了很多东西，但都无法接近……我需要这样的东西，但那行得通……

```
SELECT   
EmployeeID, 

(SELECT SUM(InvoiceAmount) FROM Orders WHERE DATE BETWEEN '2013/01/01' AND '2013/01/31') AS JAN,

(SELECT SUM(InvoiceAmount) FROM Orders WHERE DATE BETWEEN '2013/02/01' AND '2013/02/28') AS FEB,

(SELECT SUM(InvoiceAmount) FROM Orders WHERE DATE BETWEEN '2013/03/01' AND '2013/03/31') AS MAR,

FROM Calls 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T02:37:47.633

你可以这样做：

```
SELECT EmployeeID, 
    SUM(
        CASE
            WHEN strftime('%m', Date) = '01'
                THEN InvoiceAmount
            ELSE 0
        END) AS 'Jan',
    SUM(
        CASE
            WHEN strftime('%m', Date) = '02'
                THEN InvoiceAmount
            ELSE 0
        END) AS 'Feb',
    ...
    SUM(
        CASE
            WHEN strftime('%m', Date) = '12'
                THEN InvoiceAmount
            ELSE 0
        END) AS 'Dec'
FROM Calls
WHERE Date BETWEEN '2013-01-01' AND '2013-12-31'
GROUP BY EmployeeID 
```

如果您正在查看特定年份，这很有效。

## [看到它在行动](http://sqlfiddle.com/#!7/c4bc7/1)

# jquery - 如何通过单击背景关闭模式（Twitter Bootstrap）

> ID：14249950
> 
> 赞同：8
> 
> 时间：2013-01-10T02:33:27.703
> 
> 标签：jquery, twitter-bootstrap, background, modal-dialog

嗨，我将 twitter 引导模式的默认设置设置为在用户单击背景时不关闭

```
$.fn.modal.defaults = {
    backdrop: 'static'
  , keyboard: false
  , show: false
} 
```

但是，在一种特殊情况下，我需要覆盖此默认值以允许用户单击背景以关闭模式。

我试图在显示特定模式时覆盖它

```
//Modal to be displayed and allow user to close it by clicking on background
view = new Onethingaday.Views.Muses.MuseModalView
  model: @options.muse

$('.modal').html view.render().el
$('.modal').bind 'shown', =>
  $('.modal').modal
    'backdrop': true
  ('.modal').unbind 'show'
$('.modal').modal('show') 
```

但是，我上面的代码不起作用。任何人都知道如何修改代码以使其工作。此外，上面的代码似乎正在改变我在应用程序中所有模式的默认行为，这不是我想要的。如何仅为这个特定模式（即 MuseModalView）更改背景？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T20:35:19.797

我今天正在处理类似的问题。起初，我发现了这个讨论：[https](https://github.com/twitter/bootstrap/issues/1202) ://github.com/twitter/bootstrap/issues/1202 。有人建议将 isShown 设置为 false，以防止模式窗口在背景点击时关闭：

```
$('myelement').data('modal').isShown = false 
```

我不能说我喜欢这个 hack，尤其是当我发现**模式窗口在单击确定/取消按钮时没有正确关闭时**- 而 isShown 设置为 false。我找不到更好的解决方案，所以我这样做了：我设置了全局默认背景：“静态”（在背景点击时禁用关闭）并添加了以下代码：

```
 $('#myModal').on('shown', function () {
    $("div.modal-backdrop").on('click', function() {
      if(myCondition == true) {
        $('#myModal').modal('hide');
      }
    })
  }); 
```

具有 modal-backdrop 类的 div 在模态窗口打开时动态附加到正文，并在关闭时删除 -**对于每个模态窗口**。这意味着如果我们堆叠模态窗口，我们应该确保正确处理这个问题。所以，我稍微调整了上面的代码：

```
 $('#myModal').on('shown', function () {
    $("div.modal-backdrop").each(function(){
      if($(this).data('wired') !== 'true'){
        $(this).on('click', function() {
          if(myCondition == true){
            $('#myModal').modal('hide');
          }
        }).data('wired', true);
      }
    })
  }); 
```

仅当 myCondition 为 true 时，此代码才应关闭模式窗口。它对我来说应该可以正常工作，我希望这也能帮助你和任何会遇到类似问题的人。

# ruby-on-rails - 如何在 Rails 中动态设置 perform_caching

> ID：14249954
> 
> 赞同：3
> 
> 时间：2013-01-10T02:34:00.157
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching

我想控制是否在运行时执行缓存。

我写了一个如下的管理操作来测试这个想法（试图将其设置为 true）：

```
 def togglecache
    Rails.configuration.action_controller.perform_caching = true
    render :index
  end 
```

但是设置后，缓存仍然没有生效。

如果可能的话，如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:44:52.090

```
 ActionController::Base.perform_caching = true
  Rails.cache.clear
  load 'app/controllers/name_controller.rb' 
```

# haskell - 为什么 Haskell 中没有用于联积类型的简单语法？

> ID：14249955
> 
> 赞同：11
> 
> 时间：2013-01-10T02:34:13.087
> 
> 标签：haskell, functional-programming, computer-science, category-theory

Haskell 中的产品类型很容易定义：

```
data Person String String 
```

是两种类型的产品。两种类型的联产品是

```
type Shape=Either Circle Rectangle 
```

但是，虽然产品很容易扩展到三种或更多类型，但对于副产品来说似乎并不那么简单。这种差异背后是否有理论依据，或者纯粹是技术原因？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-10T02:40:49.460

# php - Netbeans 单元测试

> ID：14249960
> 
> 赞同：2
> 
> 时间：2013-01-10T02:34:50.730
> 
> 标签：php, unit-testing, netbeans, phpunit

我正在使用 Netbeans 7.2.1 并且遇到了 PHP 单元测试组件的问题。

我创建了一个名为“Calculator.php”的 .php 文件。当我尝试为此文件创建单元测试时，出现以下错误：

'"@php_bin@"' 不是内部或外部命令、可运行程序或批处理文件。

我是否正确地说问题是我的 PHP.exe 的路径在我的环境变量中不正确？

我可以帮忙解决这个问题吗？

提前致谢。

**编辑**

我已将系统环境变量更改如下：

变量名：“@php_bin@”和变量值：“C:\Program Files (x86)\PHP\php.exe”

然而，这并不能解决问题。我可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:03:02.363

我认为你是对的，错误处理环境变量中指定的路径，你应该用 php 二进制文件的路径替换@php_bin@。我猜 PEAR 或 PHPUnit 安装程序应该这样做。查看此[链接](http://www.yiiframework.com/forum/index.php?/topic/14995-wamp-netbeans-phpunit-selenium-yii/)并按照说明进行操作。

# c# - 为什么我会收到不一致的可访问性错误？

> ID：14249963
> 
> 赞同：2
> 
> 时间：2013-01-10T02:35:01.543
> 
> 标签：c#

对不起，我是 C# 和 WPF 的新手。

```
namespace MyProgram
{
    /// <summary>
    /// Description of TSearchFiles.
    /// </summary>
    public class TSearchFiles
    {
        private TBoolWrapper canceled;

        public TSearchFiles(TBoolWrapper bw)
        {
            canceled = bw;
        }

        public List<TPhotoRecord> GetFilesRecursive(string b)
        {

            List<TPhotoRecord> result = new List<TPhotoRecord>();
            return result;
        }
    }
} 
```

我收到此错误消息：

```
Error   1   Inconsistent accessibility: return type 'System.Collections.Generic.List<MyProgram.TPhotoRecord>' is less accessible than method 'MyProgram.TSearchFiles.GetFilesRecursive(string)' 
```

如何解决？代码在 Winforms 中编译得很好

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T02:36:54.337

可能`TPhotoRecord`类是`private`，即

```
private class TPhotoRecord
{
    //...
} 
```

只要您`List<TPhotoRecord>`在公共类的公共方法中返回 a ：

```
public class TSearchFiles
{
    //...
    public List<TPhotoRecord> GetFilesRecursive(string b){/*...*/}
} 
```

`TPhotoRecord`不能少访问，即它也应该是`public.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T02:39:24.320

你`class TPhotoRecord`应该是公开的，因为方法`public List<TPhotoRecord> GetFilesRecursive(string b)`是公开的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T03:50:03.857

你的`TPhotoRecord`类是私有的，所以你不能在公共方法的返回类型中谈论它。

# javascript - 使用 javascript 对具有相同属性的 div 进行分组

> ID：14249970
> 
> 赞同：2
> 
> 时间：2013-01-10T02:35:37.050
> 
> 标签：javascript, jquery, html, css

我正在尝试将具有相同属性的 div 分组并将它们放入容器 div 中。生成了 div。结构看起来像这样。

```
<div class="cleanse">A</div>
        <div class="treat">B</div>
        <div class="prime">C</div>

        <br><br><br>
        <div class="product"><img alt="red" src="http://aar.co/508-859-thickbox/therapy-ball-small-red.jpg" width="100px"></div>
        <div class="product"><img alt="blue" src="http://www.valleyvet.com/swatches/11178_L_230_vvs.jpg" width="100px"></div>
        <div class="product"><img alt="red" src="http://aar.co/508-859-thickbox/therapy-ball-small-red.jpg" width="100px"></div>
        <div class="product"><img alt="yellow" src="http://debenhams.scene7.com/is/image/Debenhams/304028400423?$ProdLarge$" width="100px"></div>
        <div class="product"><img alt="blue" src="http://www.valleyvet.com/swatches/11178_L_230_vvs.jpg" width="100px"></div> 
```

到目前为止我没有工作的脚本是

```
$(function(){
        $('.product').each(function(){
            if ($(this).is('[red]')) {
                $(this).appendTo($('.cleanse'));
            } else {
                 if ($(this).is('[blue]')) {
                        $(this).appendTo($('.treat'));
                 } else {
                      if ($(this).is('[yellow]')) {
                        $(this).appendTo($('.prime'));  
                      }
                 }
            }
            }
    }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T02:39:28.253

使用[`has`](http://api.jquery.com/has-selector/)过滤器：

```
$(function() {
    var $products = $('.product');

    $products.filter(':has([alt=red])').appendTo('.cleanse');
    $products.filter(':has([alt=blue])').appendTo('.treat');
    $products.filter(':has([alt=yellow])').appendTo('.prime');
}); 
```

这是小提琴：http: [//jsfiddle.net/qxRY4/1/](http://jsfiddle.net/qxRY4/1/)

* * *

如果您正在处理更大的数据集，则可能需要使用循环。就是这样：

```
$(function() {
    var $products = $('.product');
    var map = {
        red: 'cleanse',
        blue: 'treat',
        yellow: 'prime'
    };

    $.each(map, function (attr, className) {
        $products.filter(':has([alt=' + attr + '])').appendTo('.' + className);
    });
}); 
```

这是小提琴：http: [//jsfiddle.net/qxRY4/2/](http://jsfiddle.net/qxRY4/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:41:11.100

试试这个：

```
$(function(){
    var colorMap = {red: "cleanse", blue: "treat", yellow: "prime"};
    $('.product > img').each(function(){
        var el = $(this);
        el.appendTo($('.' + colorMap[el.attr('alt')]));
    });    
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T02:41:22.830

[http://jsfiddle.net/y9CS7/2/](http://jsfiddle.net/y9CS7/2/)

```
$(function() {
    var $prod = $('.product');

    $prod.find('[alt="red"]').appendTo($('.cleanse'));
    $prod.find('[alt="blue"]').appendTo($('.treat'));
    $prod.find('[alt="yellow"]').appendTo($('.prime'));
}); 
```

这将移动父级`<div>`

```
$(function() {
    var $prod = $('.product');

    $prod.find('[alt="red"]').parent().appendTo($('.cleanse'));
    $prod.find('[alt="blue"]').parent().appendTo($('.treat'));
    $prod.find('[alt="yellow"]').parent().appendTo($('.prime'));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T02:44:11.417

如果你想保持迭代`.product`，首先你需要选择 img 标签，不仅如此，因为这将是 div，而不是带有 alt 的图像标签：

```
$(function(){
        $('.product').each(function(){
            if ($("img",this).is('[alt="red"]')) {
                $(this).appendTo('.cleanse');
            } else {
                 if ($("img",this).is('[alt="blue"]')) {
                        $(this).appendTo('.treat');
                 } else {
                      if ($("img",this).is('[alt="yellow"]')) {
                        $(this).appendTo('.prime');  
                      }
                 }
            }
        }
}); 
```

# python - 为什么Python的回合这么奇怪？

> ID：14249971
> 
> 赞同：13
> 
> 时间：2013-01-10T02:35:41.300
> 
> 标签：python, floating-point, rounding

我的代码：

```
 #!/usr/bin/python
  # -*- coding: utf-8 -*-
  print (round(1.555, 1))  # It seems normal
  print (round(1.555, 2))  # Why it is not output 1.56?
  print (round(1.556, 2))  # It seems normal 
```

输出：

```
 sam@sam:~/code/python$ ./t2.py
  1.6
  1.55
  1.56
  sam@sam:~/code/python$ 
```

`round(1.555, 1)`输出`1.6`。

为什么不`round(1.555, 2)`输出`1.56`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-10T02:48:46.503

看看[文档](http://docs.python.org/2/library/functions.html#round)：

> **注意**for 浮点数的行为`round()`可能令人惊讶：例如，`round(2.675, 2)`给出`2.67`而不是预期的 `2.68`。这不是错误：这是因为大多数小数部分不能完全表示为浮点数。有关详细信息，请参阅*[浮点算术：问题和限制](http://docs.python.org/2/tutorial/floatingpoint.html#tut-fp-issues)*。

如果您继续挖掘（即单击该链接），您会发现一个与您的示例类似的示例：

> 内置`round()`函数的文档说它四舍五入到最接近的值，从零开始四舍五入。由于小数部分`2.675`正好在`2.67`和之间`2.68`，因此您可能期望这里的结果是 (二进制近似值) `2.68`。不是，因为当十进制字符串`2.675`转换为二进制浮点数时，它再次被二进制近似值替换，其精确值为
> 
> ```
> 2.67499999999999982236431605997495353221893310546875 
> ```

字符串格式也不能解决您的问题。浮点数并没有按照您期望的方式存储：

```
>>> '{:0.2f}'.format(1.555)
'1.55' 
```

这并不是真正的“修复”，但 Python 确实有一个`decimal`模块，该模块专为浮点运算而设计：

```
>>> from decimal import Decimal
>>> n = Decimal('1.555')
>>> round(n, 2)
Decimal('1.56') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T02:38:34.783

直接来自文档：

> 浮点数的 round() 行为可能令人惊讶：例如，round(2.675, 2) 给出 2.67 而不是预期的 2.68。这不是错误：这是因为大多数小数部分不能完全表示为浮点数。有关详细信息，请参阅[浮点算术：问题和限制](http://docs.python.org/2/tutorial/floatingpoint.html#tut-fp-issues)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T02:40:27.367

来自[http://docs.python.org/2/library/functions.html#round](http://docs.python.org/2/library/functions.html#round)：

笔记

浮点数的 round() 行为可能令人惊讶：例如，round(2.675, 2) 给出 2.67 而不是预期的 2.68。这不是错误：这是因为大多数小数部分不能完全表示为浮点数。有关详细信息，请参阅浮点算术：问题和限制。

# jsf-2 - 从 preRenderView 重定向不维护 FacesMessages

> ID：14249973
> 
> 赞同：0
> 
> 时间：2013-01-10T02:35:57.110
> 
> 标签：jsf-2, facelets

> **可能重复：**
> [从 preRender 导航后无法保留面部消息](https://stackoverflow.com/questions/13144611/cant-keep-faces-message-after-navigation-from-prerender)

完成用户帐户验证后，我想进行重定向。我还想使用 FacesMessage 报告用户帐户验证发生的情况。重定向工作正常，但 FacesMessage 不会在整个重定向中维护。

这是我的代码。

## 验证帐户.xhtml

```
 <!DOCTYPE html>
    <html lang="en" xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    </h:head>
    <h:body>
        <h:form acceptcharset="UTF-8" name="validateAccountActionForm" id="validateAccountActionForm" prependId="false">
            <f:metadata>
                <f:event type="preRenderView" listener="#{validateAccountAction.validateUserAccount}"></f:event>
            </f:metadata>
        </h:form>
    </h:body>
    </html> 
```

## ValidateAccountAction.java

```
 @ManagedBean(name="validateAccountAction")
    @RequestScoped
    public class ValidateAccountAction {

    public void validateUserAccount(){
        ------------;
        ------------;
        performNavigation("accountValidationMessage.faces");
    }

    public void performNavigation(String pageName){
        FacesContext ctx = FacesContext.getCurrentInstance();
            Flash flash = ctx.getExternalContext().getFlash();
            flash.setKeepMessages(true);
            addMessage(null,"Congratulations! Your Account Successfully Validated.");
        ConfigurableNavigationHandler nav = (ConfigurableNavigationHandler)ctx.getApplication().getNavigationHandler();
        nav.performNavigation(pageName+"?faces-redirect=true");
        }

        public void addMessage(String clientId, String infoMessage){
            // if clientId is null then the message is applied for whole form.
            FacesContext facesContext = FacesContext.getCurrentInstance();
            Severity severityError = FacesMessage.SEVERITY_INFO;
            FacesMessage facesMessage = new FacesMessage(infoMessage);
            facesMessage.setSeverity(severityError);
            facesContext.addMessage(clientId, facesMessage);
        } 

    } 
```

## accountValidationMessage.xhtml

```
 <!DOCTYPE html>
        <html lang="en" xmlns="http://www.w3.org/1999/xhtml"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:ui="http://java.sun.com/jsf/facelets">
        <h:head>
            <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
        </h:head>
        <h:body>
        <h:form acceptcharset="UTF-8" name="validateSuccessForm" id="validateSuccessForm" prependId="false">
               <h:messages style="padding-left: 10px;" infoClass="infoMsgs" errorClass="errMsgs" layout="table"/>
            </h:form>
        </h:body>
        </html> 
```

## 消息处理程序.java

```
public class MessageHandler implements PhaseListener {

    private static final long serialVersionUID = 1250469273857785274L;
    private static final String sessionToken = "MULTI_PAGE_MESSAGES_SUPPORT";

    public PhaseId getPhaseId() {
        return PhaseId.ANY_PHASE;
    }

    /*
     * Check to see if we are "naturally" in the RENDER_RESPONSE phase. If we
     * have arrived here and the response is already complete, then the page is
     * not going to show up: don't display messages yet.
     */
    // TODO: Blog this (MultiPageMessagesSupport)
    public void beforePhase(final PhaseEvent event) {
        FacesContext facesContext = event.getFacesContext();
        this.saveMessages(facesContext);

        if (PhaseId.RENDER_RESPONSE.equals(event.getPhaseId())) {
            if (!facesContext.getResponseComplete()) {
                this.restoreMessages(facesContext);
            }
        }
    }

    /*
     * Save messages into the session after every phase.
     */
    public void afterPhase(final PhaseEvent event) {
        if (!PhaseId.RENDER_RESPONSE.equals(event.getPhaseId())) {
            FacesContext facesContext = event.getFacesContext();
            this.saveMessages(facesContext);
        }
    }

    @SuppressWarnings("unchecked")
    private int saveMessages(final FacesContext facesContext) {
        List<FacesMessage> messages = new ArrayList<FacesMessage>();
        for (Iterator<FacesMessage> iter = facesContext.getMessages(null); iter.hasNext();) {
            messages.add(iter.next());
            iter.remove();
        }

        if (messages.size() == 0) {
            return 0;
        }

        Map<String, Object> sessionMap = facesContext.getExternalContext().getSessionMap();
        List<FacesMessage> existingMessages = (List<FacesMessage>) sessionMap.get(sessionToken);
        if (existingMessages != null) {
            existingMessages.addAll(messages);
        } else {
            sessionMap.put(sessionToken, messages);
        }
        return messages.size();
    }

    @SuppressWarnings("unchecked")
    private int restoreMessages(final FacesContext facesContext) {
        Map<String, Object> sessionMap = facesContext.getExternalContext().getSessionMap();
        List<FacesMessage> messages = (List<FacesMessage>) sessionMap.remove(sessionToken);

        if (messages == null) {
            return 0;
        }

        int restoredCount = messages.size();
        for (Object element : messages) {
            facesContext.addMessage(null, (FacesMessage) element);
        }
        return restoredCount;
    }
} 
```

## 面孔-config.xml

```
<lifecycle>
    <phase-listener>
        com.test.web.ssc.component.MessageHandler
    </phase-listener>
</lifecycle> 
```

这里的问题是页面重定向到 accountValidationMessage.faces，但消息没有显示。

我也使用这个类 MessageHandler.java 来保留重定向消息。我可以对此进行一些更改，以便我可以解决这个问题吗？

# youtube - YouTube 视频 API 不适用于以破折号开头的 ID

> ID：14249978
> 
> 赞同：1
> 
> 时间：2013-01-10T02:36:24.063
> 
> 标签：youtube, youtube-api

我正在从 YouTube 的 API 访问数据，一切正常，但我遇到的问题是，当 videoID 的开头有一个破折号 (-) 时，它没有返回 json 数据。

```
$videoID = -FIHqoTcZog;
$json = json_decode(file_get_contents("http://gdata.youtube.com/feeds/api/videos?q={$videoID}&alt=json")); 
```

但是，我可以使用以下方法像往常一样返回缩略图：

```
$thumbnail = "http://i4.ytimg.com/vi/".$videoID."/mqdefault.jpg"; 
```

这是我用来从我想要的上述 json 中提取信息的代码。

```
$title = $json->{'feed'}->{'entry'}[0]->{'title'}->{'$t'};
$description = $json->{'feed'}->{'entry'}[0]->{'media$group'}->{'media$description'}->{'$t'};
$thumbnail = "http://i4.ytimg.com/vi/".$videoID."/mqdefault.jpg";   
$ratings = ((round($json->{'feed'}->{'entry'}[0]->{'gd$rating'}->{'average'}, 1)/$json->{'feed'}->{'entry'}[0]->{'gd$rating'}->{'max'})*100)."%";
$views = number_format($json->{'feed'}->{'entry'}[0]->{'yt$statistics'}->{'viewCount'});
$duration = $json->{'feed'}->{'entry'}[0]->{'media$group'}->{'yt$duration'}->{'seconds'}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:41:52.513

您确定您只是遇到了前面有破折号的 ID 的问题吗？您粘贴的代码不应使用任何 Youtube ID，因为 gdata 提要作为 JSON 的一部分返回一些带有“$”字符的文本。该字符是一个 PHP 标识符，因此尝试在提要返回的任何内容上运行 json_decode 函数时都会出现 500 个错误。

解决问题的一种方法是使用 json_decode 的第二个参数为您提供关联数组而不是对象，如下所示：

```
$json = json_decode(file_get_contents("http://gdata.youtube.com/feeds/api/videos?q={$videoID}&alt=json"),true); 
```

当然，这也需要您使用数组，但后续代码更改应该是最小的。

如果您在使用完全相同的代码的其他视频中没有出现错误，也许您可​​以将其发布在这里？

# android - 撤销个人权限后更新会话

> ID：14249980
> 
> 赞同：6
> 
> 时间：2013-01-10T02:36:42.080
> 
> 标签：android, session, facebook-android-sdk

我正在尝试为用户提供通过复选框（Android 版 Facebook SDK）设置/撤销发布权限的选项。下面提供了代码。一切正常，除了撤销负责检查发布权限的代码后惨遭失败。

我知道 Session 无法知道用户在登录后是否撤销了任何权限。处理这种情况的正确方法是什么？我是否必须手动查询可用权限，或者有没有办法无缝地重新创建具有基本权限的会话？

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    ...
    publishCheckbox = (CheckBox) view.findViewById(R.id.publishCheckbox);
        publishCheckbox.setOnClickListener(new View.OnClickListener(){

            @Override
            public void onClick(View v) {
                CheckBox chb = (CheckBox) v;
                if (chb.isChecked() && checkForPublishPermission() == false){
                    requestPublishPermissions();                            
                }
                else{
                    removePublishPermissions();
                }   

            }

        });
    ...
}

private void requestPublishPermissions() {
    Session session = Session.getActiveSession();
    if ( session!= null && session.isOpened()){
        Session.NewPermissionsRequest newPermissionsRequest = new Session.NewPermissionsRequest(this, PERMISSIONS).setRequestCode(REAUTH_ACTIVITY_CODE);
        newPermissionsRequest.setCallback(callback);
        session.requestNewPublishPermissions(newPermissionsRequest);
    }               
}   

private void removePublishPermissions() {       
    Request r = new Request(Session.getActiveSession(), PUBLISH_ACTIONS_PERMISSION_PATH, null, HttpMethod.DELETE);
    r.setCallback(new Request.Callback() {

        @Override
        public void onCompleted(Response response) {
            publishCheckbox.setEnabled(true);                               
        }
    });
    r.executeAsync();
    publishCheckbox.setEnabled(false);
}

private boolean checkForPublishPermission(){
    boolean result = false;

    Session session = Session.getActiveSession();

    if (session == null || !session.isOpened()) {
        result = false;
    }
    else{
        List<String> permissions = session.getPermissions();
        if (permissions.containsAll(PERMISSIONS)) {
            result = true;
        }
    }       

    return(result);
}   

private void onSessionStateChange(Session session, SessionState state, Exception exception) {
    if (state.isOpened()) { 
        ...
        publishCheckbox.setChecked(checkForPublishPermission());
        ...
    } else if (state.isClosed()) {          
        ...                             
    }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-11T22:42:19.773

好吧，每次我需要这样的检查时，我最终都会请求用户权限，类似于以下内容：

```
private void checkForPublishPermission(){
    mPublishCheckbox.setEnabled(false);
    Request r = new Request(Session.getActiveSession(), PUBLISH_ACTIONS_PERMISSION_PATH, null, HttpMethod.GET);
    r.setCallback(new Request.Callback() {

        @Override
        public void onCompleted(Response response) {
            if (response != null) {
                GraphObject o = response.getGraphObject();              
                    if ( o != null){
                        JSONArray data = o.getInnerJSONObject().optJSONArray("data");                       
                        mCanPublish = (data.optJSONObject(0).has("publish_actions"))?true:false;                            
                        mPublishCheckbox.setChecked(mCanPublish);                                                       
                    }
            }
            mPublishCheckbox.setEnabled(true);
        }
    });
    r.executeAsync();
} 
```

# tweetsharp - 在 TweetSharps ListTweetsOnSpecifiedUserTimeline 中使用 max_id 进行分页与游标

> ID：14249984
> 
> 赞同：0
> 
> 时间：2013-01-10T02:37:13.427
> 
> 标签：tweetsharp

在[http://dev.twitter.com/docs/working-with-timelines](http://dev.twitter.com/docs/working-with-timelines)上的“使用时间线”文档中， Twitter 建议使用`max_id`参数进行光标定位，而不是尝试逐页浏览时间线。查看 Twitter API 方法的文档`GET statuses/user_timeline` [http://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline](http://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)有一个可选`max_id`参数、无`page`参数和其他有用的参数，例如`include_rts`包括转推。但是 TweetSharp 方法的重载`ListTweetsOnSpecifiedUserTimeline`只包括`page`而不是`max_id`. 是否可以使用 TweetSharp 使用光标方法（而不是分页）检索指定的用户时间线，如果可以，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:06:47.330

找到了。它作为单独的方法包含在 TweetSharp 中：`IEnumerable<TwitterStatus> ListTweetsOnSpecifiedUserTimelineBefore(string screenName, long maxId);`

# python - wxPython wxScrolledWindow 函数引发 TypeError

> ID：14249989
> 
> 赞同：2
> 
> 时间：2013-01-10T02:37:39.993
> 
> 标签：python, python-2.7, wxpython, scrollbar

我正在尝试学习如何将 wxPython`wxScrolledWindow`类用于项目，但我遇到了障碍。

我已经设置了一个程序，该程序使面板派生自`wxScrolledWindow`包含控件列表的类；面板的客户端故意太小而无法一次显示所有控件。我设法在面板的一侧获得了一个滚动条，但单击它什么也没做。此外，每当我尝试从对象调用与滚动条相关的继承函数之一时，都会收到一个奇怪的错误：

```
Traceback (most recent call last):
  File "C:\Python27\Projects\Supervisor\test.py", line 69, in <module>
    frame = MyFrame(None, "Test Bench")
  File "C:\Python27\Projects\Supervisor\test.py", line 18, in __init__
    self.mainpanel = MyPanel(self)
  File "C:\Python27\Projects\Supervisor\test.py", line 62, in __init__
    self.SetScrollRate(10, 10)
  File "C:\Python27\lib\site-packages\wx-2.8-msw-unicode\wx\_windows.py", line 179, in SetScrollRate
    return _windows_.ScrolledWindow_SetScrollRate(*args, **kwargs)
TypeError: in method 'ScrolledWindow_SetScrollRate', expected argument 1 of type 'wxScrolledWindow *' 
```

我看过很多例子，我不知道我在哪里犯了错误。

我在 MS Windows 下使用 Python 2.7.3、wxPython 2.8。我实际上已经设法完成了很多事情而没有遇到严重的问题，当然也没有这样的事情。

我的代码如下：

```
# Test.py
#
# Dummy file for testing things that are too complex to type into the shell
# directly.

import wx

class MyFrame(wx.Frame):

    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent, title=title)

        self.SetSize((800, 500))
        self.Center()

        self.Bind(wx.EVT_CLOSE, self.OnClose)

        self.mainpanel = MyPanel(self)
        self.mainpanel.SetMaxSize(self.GetVirtualSize())

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.mainpanel)

        self.SetSizer(sizer)
        self.Show(True)

        mpsize = self.mainpanel.GetSize()
        mvsize = self.mainpanel.GetVirtualSize()
        vsize = self.GetVirtualSize()

        self.SetClientSize((mpsize[0], vsize[1]))
        self.mainpanel.SetSize((mpsize[0], vsize[1]))
        self.mainpanel.SetVirtualSize(mvsize)

    def OnClose(self, e):
        self.Destroy()

class MyPanel(wx.ScrolledWindow):

    def __init__(self, parent):

        wx.Panel.__init__(self, parent,
                          style = wx.VSCROLL)

        sizer = wx.GridBagSizer(10, 10)

        self.egps = []
        for i in range(20):
            leftbit = wx.StaticText(self, label = "Item " + str(i))
            midbit = wx.TextCtrl(self, id = wx.ID_ANY)
            rightbit = wx.CheckBox(self, id = wx.ID_ANY, label = "Checkbox")

            self.egps.append([leftbit, midbit, rightbit])

        for i in range(len(self.egps)):
            sizer.Add(self.egps[i][0], (i,0))
            sizer.Add(self.egps[i][1], (i,1))
            sizer.Add(self.egps[i][2], (i,2))

        self.SetSizer(sizer)
        self.SetScrollRate(10, 10)

if __name__ == "__main__":
    app = wx.App(False)

    frame = MyFrame(None, "Test Bench")

    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:45:36.660

好吧，我觉得有点傻。进一步审查后，问题是我改编了从 wx.Panel 继承的旧类的代码。因此，我有`wx.Panel.__init__`... 行而不是`wx.ScrolledWindow.__init__`... 行。

有趣的是，你盯着代码看了很长时间却看不到它……但是帖子一上来，它就在那里。:P

# javascript - 如何根据客户端asp.net中的某些条件禁用单选按钮的回发？

> ID：14249991
> 
> 赞同：1
> 
> 时间：2013-01-10T02:37:44.253
> 
> 标签：javascript, asp.net, radio-button, postback, selectedindexchanged

我在表单中定义了一个单选按钮列表。当用户选择任何选项时，我们会进行回发，然后执行业务逻辑。现在的问题是，我想在用户检查单选按钮选项时添加用户确认；当用户选择确定时，只有我想继续。

示例流程：
1\. 假设选中单选按钮中的 FirstItem。
2\. 用户会去选择第二个项目 - 然后我想添加一个确认，比如“你确定吗” -
3\. 如果用户选择 NO
      那么我应该在没有回发的情况下恢复检查更改
    否则
       执行回发然后业务逻辑

代码如下：

```
<form id="form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<div>
    <asp:UpdatePanel ID="UpdatePanelCheckBoxes" runat="server" UpdateMode="Always">
        <ContentTemplate>
            <asp:RadioButtonList ID="rdo" runat="server" RepeatDirection="Horizontal" AutoPostBack="true"
                OnSelectedIndexChanged="LabourScheduleType_CheckedChanged">
                <asp:ListItem Text="1" Value="1" onClick="confirmcheck();"></asp:ListItem>
                <asp:ListItem Text="2" Value="2" onClick="confirmcheck();"></asp:ListItem>
            </asp:RadioButtonList>
        </ContentTemplate>
    </asp:UpdatePanel>
</div>
</form> 
```

代码隐藏代码是这样的

我还写了一个javascript函数来控制回发

```
<script type="text/javascript">

    function confirmcheck() {
        var retVal = confirm("test");
        return retVal;
    }

</script> 
```

我尝试了所有方法，例如添加 onclick 之类的属性，然后在方法中返回 false 等等。不知何故，回发总是发生，我也不知道如何恢复更改的支票！从过去的 4 个小时开始，我为此发疯了。

**编辑1：**

我在互联网上搜索并找到了解决我一半问题的方法！

```
 <asp:UpdatePanel ID="UpdatePanelCheckBoxes" runat="server" UpdateMode="Always">
        <ContentTemplate>
            <asp:RadioButton ID="RadioButton1" OnCheckedChanged="aaa_cc"  GroupName="aa" runat="server" AutoPostBack="true" Text="test1" />
            <asp:RadioButton ID="RadioButton2" OnCheckedChanged="aaa_cc"  GroupName="aa" runat="server" AutoPostBack="true" Text="test2" />
        </ContentTemplate>
    </asp:UpdatePanel> 
```

文件背后的代码：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            RadioButton1.Attributes.Add("onClick", "this.blur(); return RadioClick(this);");
            RadioButton2.Attributes.Add("onClick", "this.blur(); return RadioClick(this);");
        }
    } 
```

Javacript 是这样的：

```
<script type="text/javascript">

    function RadioClick(radioButton)
    {
        if (confirm('Are you sure?'))
        {
            __doPostBack(radioButton.id,'');
        }
        else
        {
            return false;
        }
    }

</script> 
```

**唯一的问题是当我返回 false 时，单选按钮中的值会丢失，即没有选择任何单选按钮:(**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:45:39.860

试试`OnClientClick='return confirmcheck();'`。`onclick`当页面被渲染时，该值将被渲染为属性的值。此外，如果默认处理将继续，返回结果将发出信号。

`OnClick`指定服务器端事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:57:15.517

尝试这个：

```
<asp:ListItem Text="1" Value="1" onClick="if(!confirmcheck()) return false;"></asp:ListItem>
<asp:ListItem Text="2" Value="2" onClick="if(!confirmcheck()) return false;"></asp:ListItem> 
```

在 onClick 中返回 true 或 false 也会阻止回发的发生，所以我们只在 confirmcheck() 为 false 时返回。

我测试过并且有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T09:19:14.403

在单选按钮的 HTML 声明中包含“EnableViewState=true”。包含此属性后，您的 EDIT1 解决方案应该可以工作，因此如果您返回 false，则状态不会丢失。

# c# - 从多个点按需加载模块

> ID：14249994
> 
> 赞同：0
> 
> 时间：2013-01-10T02:37:55.890
> 
> 标签：c#, module, prism

我正在使用 IModuleManager 按需实现 Unity PRISM 模块。假设有多个点需要模块的功能。`moduleManager.LoadModule("MyModule")`即使模块之前可能已经加载，我是否有权在这些点上调用？它不会重新加载是吗？

这是最佳实践吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:06:15.190

当您查看[Prism 模块化快速入门时](http://msdn.microsoft.com/en-us/library/ff921068%28v=pandp.40%29.aspx)

你会发现这个方法负责加载模块

```
 protected override void OnMouseLeftButtonUp(MouseButtonEventArgs e)
    {
        base.OnMouseLeftButtonUp(e);

        if (!e.Handled)
        {
            if ((this.moduleTrackingState != null) && (this.moduleTrackingState.ExpectedInitializationMode == InitializationMode.OnDemand) && (this.moduleTrackingState.ModuleInitializationStatus == ModuleInitializationStatus.NotStarted))
            {
                this.RaiseRequestModuleLoad();
                e.Handled = true;
            }
        }
    } 
```

请注意，有一个条件阻止调用`this.RaiseRequestModuleLoad();` when `ModuleInitializationStatus`is not `ModuleInitializationStatus.NotStarted`。

我试图摆脱它并发现以下内容：

1.  `moduleManager.LoadModule("YourModule");`多次调用不会抛出异常。

2.  模块的`Initialize`方法仅在您第一次加载模块时被调用。

模块加载意味着模块组件从磁盘传输到内存中。所以...如果每次都重新加载你真的不应该那样做。只是为了回答您的问题“这是最佳做法吗？” 我不得不说......这肯定不是。我无法告诉您每次调用时是否都会重新加载它，`moduleManager.LoadModule("YourModule");`但恕我直言，您应该只加载一次模块，因为它们也执行一次。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-18T05:02:23.480

同意 Viktor，[此线程](http://compositewpf.codeplex.com/discussions/429481)中的响应建议不要调用 LoadModule，而是使用 IModuleCatalog 和 IModuleManager 检查 ModuleState。

这是该帖子的代码片段：

```
(...)

 var module = this.moduleCatalog.Modules.FirstOrDefault(m => m.ModuleName == "MyModule");
            if (module != null)
            {
                if (module.State != ModuleState.Initialized)
                {
                    moduleManager.LoadModuleCompleted += moduleManager_LoadModuleCompleted;
                    moduleManager.LoadModule("MyModule");
                }
                else
                {

                    //Initialization logic

                }
            }
        }

        void moduleManager_LoadModuleCompleted(object sender, LoadModuleCompletedEventArgs e)
        {
            moduleManager.LoadModuleCompleted -= moduleManager_LoadModuleCompleted;

            if (e.ModuleInfo.ModuleName == "MyModule")
            {
                //Initialization logic
            }
        }

(...) 
```

# java - 如果对象引用是静态的，是否意味着该对象的属性也是静态的？

> ID：14249995
> 
> 赞同：1
> 
> 时间：2013-01-10T02:37:57.227
> 
> 标签：java, object, static

例如我有一个这样的类：

```
public class StaticObjectReference{
     private static StaticObjectReference instance;
     private Vector queue;

     public static StaticObjectReference getInstance(){
         if(instance == null){
              instance = new StaticObjectReference();
         }

         return instance;
     }

     public Vector getQueue(){
         queue = new Vector();
         return queue;
     }
} 
```

接下来的两个类称为`StaticObjectReference`类。

```
public class CallerOne{
    Vector queue1;

    public void callObjectInstance1(){
         queue1 = StaticObjectReference.getInstance().getQueue();
    }
}

class CallerTwo{
    Vector queue2;

    public void callObjectInstance2(){
         queue2 = StaticObjectReference.getInstance().getQueue();
    }
} 
```

CallerOne`queue1`类中的 是 CallerTwo 类中的同一个实例`queue2`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:39:29.240

您正在使用该类的相同实例`StaticObjectReference`来访问队列，所以是的，它们是同一个队列。

**请注意**，这与**静态的****事实****没有** 直接关系。这个类**实现了****[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)**还有更多的事情要做，所以这个类只有一个实例。**`instance`**

正如布赖恩指出的那样，这个实现**不是线程安全的**。检查 wikipedia 链接以获取线程安全方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T02:54:41.910

> 如果对象引用是静态的，是否意味着该对象的属性也是静态的？

如果你从字面上看这个问题是没有意义的……这可能是你不确定的根源。

术语静态（在 Java 中）意味着变量属于一个类，而不是实例或方法调用。这里被标记为的东西`static`是一个*变量*。变量和变量中包含的值之间的区别是至关重要的。

*对象引用*不能是静态的。静态性对于对象引用来说不是一个有意义的属性。这根本没有意义。对象引用是一个值，而不是变量。

虽然`static`变量*包含*对对象的引用，但（通常）不会使其包含的对象引用（或它引用的对象）成为静态的。除了术语问题，如果你改变一个`static`变量，这个变量最初引用的对象*可能*会消失。这显然是非静态行为。

实际上，`instance`变量的静态性和`queue`正交性问题。如果变量*声明*为`static`，则它们是静态的。否则他们不是。

现在您的代码确保¹永远只有一个`StaticObjectReference`. `static`但这是您编写类的方式的一个紧急属性，与这两个变量的声明（或其他）无关。而且我们不会将此属性称为“静态性”。我们称之为“单身”......如果你能原谅我滥用英语......

* * *

^(1 - 实际上，它并不总是保证这一点，因为它不是线程安全的，如所写。)

# jquery - jquery - 回到顶部

> ID：14249998
> 
> 赞同：31
> 
> 时间：2013-01-10T02:38:33.813
> 
> 标签：jquery

[我在这里](http://jsfiddle.net/robert/fjXSq/)看到了这个小提琴样本

想要在出现"到最高层"的时候点击！应该平滑或缓慢滚动到顶部

```
$(window).scroll(function() {
    if ($(this).scrollTop()) {
        $('#toTop').fadeIn();
    } else {
        $('#toTop').fadeOut();
    }
}); 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-10T02:41:05.390

```
$("#toTop").click(function () {
   //1 second of animation time
   //html works for FFX but not Chrome
   //body works for Chrome but not FFX
   //This strange selector seems to work universally
   $("html, body").animate({scrollTop: 0}, 1000);
}); 
```

[http://jsfiddle.net/fjXSq/161/](http://jsfiddle.net/fjXSq/161/)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-10T02:45:01.813

[用解决方案更新了 JSFiddle](http://jsfiddle.net/mnQb6/)

```
$(window).scroll(function() {
    if ($(this).scrollTop()) {
        $('#toTop').fadeIn();
    } else {
        $('#toTop').fadeOut();
    }
});

$("#toTop").click(function() {
    $("html, body").animate({scrollTop: 0}, 1000);
 }); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-12-20T09:35:32.790

首先让我们创建按钮。

```
<a href="#" class="scrollToTop">Scroll To Top</a> 
```

现在我们可以使用以下 CSS 设置按钮样式。

```
<style>
.scrollToTop{
    width:100px; 
    height:130px;
    padding:10px; 
    text-align:center; 
    background: whiteSmoke;
    font-weight: bold;
    color: #444;
    text-decoration: none;
    position:fixed;
    bottom:75px;
    right:40px;
    display:none;
    background: url('arrow_up.png') no-repeat 0px 20px;
}
.scrollToTop:hover{
    text-decoration:none;
}
</style> 
```

将以下内容复制并粘贴到 Javascript 文件中以添加 Javascript 功能。

```
<script>
$(document).ready(function(){

    //Check to see if the window is top if not then display button
    $(window).scroll(function(){
        if ($(this).scrollTop() > 100) {
            $('.scrollToTop').fadeIn();
        } else {
            $('.scrollToTop').fadeOut();
        }
    });

    //Click event to scroll to top
    $('.scrollToTop').click(function(){
        $('html, body').animate({scrollTop : 0},800);
        return false;
    });

});
</script> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-11-30T11:31:55.270

[见 JS 小提琴](https://jsfiddle.net/rms2014/orxp04pq/)

```
 $(window).on("scroll",function() {
        if ($(this).scrollTop() > 50 ) {
            $('#toTop').fadeIn(400);
        } else {
            $('#toTop').fadeOut(400);
        }
    });

    $("#toTop").on("click",function() {
        $("html, body").animate({scrollTop: 0}, 1200);
     }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-16T12:00:42.310

```
$(document).ready(function(){ 
   $(window).scroll(function(){ 
       if ($(this).scrollTop() > 100) { 
           $('#toTop').fadeIn(); 
       } else { 
           $('#toTop').fadeOut(); 
       } 
   }); 
   $('#toTop').click(function(){ 
       $("html, body").animate({ scrollTop: 0 }, 600); 
       return false; 
   }); 
}); 
```

现场演示、完整脚本和教程可以从这里查看 - [使用 jQuery 和 CSS 的返回顶部按钮](http://www.codexworld.com/back-to-top-button-using-jquery-css/)