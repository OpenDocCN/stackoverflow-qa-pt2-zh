# StackOverflow 问答 14789000-14789999

# c++ - C++ 重命名文件@C:\Windows\System32\Drivers

> ID：14789000
> 
> 赞同：-1
> 
> 时间：2013-02-09T14:12:11.327
> 
> 标签：c++, windows, rename

已解决：看看后面的帖子

任务：重命名一个名为 TabletFilter.sys 的文件（它是我的图形输入板驱动程序），因为 Windows 8（我的操作系统）应用程序需要其他驱动程序，然后是 photoshop 的引脚压力。我想编写一个 c++ 程序，将所有驱动程序文件重命名为 .old

基于来自 cplusplus.com 的重命名示例的代码

```
#include <stdio.h>

int main ()
{
  int result;
  char oldname[] ="TabletFilter.sys";
  char newname[] ="TabletFilter.sys.old";
  result= rename( oldname , newname );
  if ( result == 0 )
    puts ( "File successfully renamed" );
  else{
    result= rename( newname , oldname );
    if( result == 0)
      puts ( "File successfully renamed" );
    else
      perror( "Error renaming file" );
  }
  return 0;
} 
```

我也试过“以管理员身份运行”，但我仍然得到

```
Error renaming file: No such file or directory 
```

我能做些什么？

* * *

编辑：

该文件肯定在同一个文件夹中...我将它们都复制到那里...即使在 c:\windows\ 我也尝试过...并且我使用了清单

```
Executable: TabletRenameDriver.exe 
Manifest: TabletRenameDriver.exe.manifest
Sample application manifest file:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"> 
  <assemblyIdentity version="1.0.0.0"
     processorArchitecture="X86"
     name="TabletRenameDriver"
     type="win32"/> 
  <description>Description of your application</description> 
  <!-- Identify the application security requirements. -->
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel
          level="requireAdministrator"
          uiAccess="false"/>
        </requestedPrivileges>
       </security>
  </trustInfo>
</assembly> 
```

我尝试了 uiAccess 真假。

是的，我的权限有问题驱动程序已加载，但我仍然能够更改他的名字......不知道为什么，但它可能。我试过了。我想用 C++ 解决这个问题，所以请不要告诉我有很多脚本语言可以很好地处理这个问题；-) 我知道这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:57:10.380

错误信息

```
No such file or directory 
```

表示当前目录不包含文件名`"TabletFilter.sys"`或`"TabletFilter.sys.old"`.

你可以做的是：

1.  指定文件的完整路径。
2.  确保当前目录在您的代码执行时是包含您的文件的目录。

然而，即使你这样做了，你的程序也很可能会失败。您可能没有足够的权限来修改该文件夹的内容。如果操作系统已加载驱动程序，您尝试重命名的文件可能会被锁定。

正如@Hans 指出的那样，[文件系统重定向器](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa384187.aspx)很可能会让您感到困惑。避免这种情况的最好方法是对我们来说使用 64 位进程。

我认为没有理由在这里使用 C++ 程序。重命名文件是最适合脚本语言的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T10:22:49.073

感谢你的帮助

我完成了我的程序，现在可以正常运行

注意：通过 VS2012 设置添加“requireAdministrator”uiAccess="false"

```
#include <stdio.h>
#include <stdlib.h>
#include <Windows.h>

void main ()
{
    bool success = false;
    bool somethingWentWrong = false;
    PVOID OldValue = NULL;
    if( Wow64DisableWow64FsRedirection(&OldValue) ) 
    {
        success = MoveFile("C:\\Windows\\System32\\Drivers\\TabletFilter.sys", "C:\\Windows\\System32\\Drivers\\TabletFilter.sys.old");
        if(success){
          puts("from .sys to .sys.old");
          success = MoveFile("C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.sys", "C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.sys.old");
          if(!success){ puts("ERROR: C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.sys not found"); somethingWentWrong = true;}
          success = MoveFile("C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.inf", "C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.inf.old");
          if(!success){ puts("ERROR: C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.inf not found"); somethingWentWrong = true;}
          success = MoveFile("C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.cat", "C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.cat.old");
          if(!success){ puts("ERROR: C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.cat not found"); somethingWentWrong = true;}
        }else{
          puts("from .sys.old to .sys");
          success = MoveFile("C:\\Windows\\System32\\Drivers\\TabletFilter.sys.old", "C:\\Windows\\System32\\Drivers\\TabletFilter.sys");
          if(!success){ puts("ERROR: C:\\Windows\\System32\\Drivers\\TabletFilter.sys.old not found"); somethingWentWrong = true;}
          success = MoveFile("C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.sys.old", "C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.sys");
          if(!success){ puts("ERROR: C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.sys.old not found"); somethingWentWrong = true;}
          success = MoveFile("C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.inf.old", "C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.inf");
          if(!success){ puts("ERROR: C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.inf.old not found"); somethingWentWrong = true;}
          success = MoveFile("C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.cat.old", "C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.cat");
          if(!success){ puts("ERROR: C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.cat.old not found"); somethingWentWrong = true;}
        }
        if(somethingWentWrong){
          puts ( "ERROR: File were set to standart!" );
          success = MoveFile("C:\\Windows\\System32\\Drivers\\TabletFilter.sys.old", "C:\\Windows\\System32\\Drivers\\TabletFilter.sys");
          if(!success){ puts("ERROR: C:\\Windows\\System32\\Drivers\\TabletFilter.sys.old not found"); somethingWentWrong = true;}
          success = MoveFile("C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.sys.old", "C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.sys");
          if(!success){ puts("ERROR: C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.sys.old not found"); somethingWentWrong = true;}
          success = MoveFile("C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.inf.old", "C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.inf");
          if(!success){ puts("ERROR: C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.inf.old not found"); somethingWentWrong = true;}
          success = MoveFile("C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.cat.old", "C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.cat");
          if(!success){ puts("ERROR: C:\\Windows\\System32\\DriverStore\\FileRepository\\tabletfilter.inf_amd64_e7d03235d8288d3b\\TabletFilter.cat.old not found"); somethingWentWrong = true;}
        }else
          puts ( "File successfully renamed" );
        Wow64RevertWow64FsRedirection(OldValue);
    }
    for(unsigned long tick = GetTickCount() / 1000;  tick + 2 > GetTickCount() / 1000;){
    }
} 
```

~~只有 48 行代码......脚本可以更短吗？~~

PS：一段时间后重温这篇文章，我认为有很多方法可以不同地处理这个问题。然而，要点仍然存在：如果你想做这样的事情，你必须以管理员权限运行......并且可能使用循环、列表/向量和一些适当的字符串操作:-P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T10:28:37.193

Windows 需要其中许多驱动程序才能启动。如果您确实成功地重命名了它们，那么当您重新启动时，您的机器将会发生不好的事情 - 即您的机器将无法启动。

作为一般规则，不要管 C:\Windows 中的所有内容，但这个建议对于 C:\Windows\drivers 目录要重要十倍。触摸此文件夹及其中的任何内容，后果自负。

# objective-c - 指针和整数objective-c之间的有序比较

> ID：14789001
> 
> 赞同：1
> 
> 时间：2013-02-09T14:12:52.637
> 
> 标签：objective-c

我已经搜索过这个并且实际上找到了很多结果，但是我是一个初学者，所以在我的具体案例中使用他们的答案时遇到了问题。

我的代码：

```
 + (NSUInteger)maxRank { return [self rankStrings].count - 1; }

  - (void)setRank:(NSUInteger )rank {
      if(rank <= [PlayingCard maxRank]) {
          _rank = rank;
      }
  } 
```

“self rankStrings”只是一个包含多个字符串的数组。

if 语句当然是给出错误的那一行。我只是无法理解错误是如何发生的，我实际上是从斯坦福的一个叫 Paul 的人那里学习的，这正是他的代码*，*唯一的区别是他的工作和我的工作差别不大。

据我了解，maxRank 返回一个 NSUInteger（不是指针），并且在“rank”的设置器中，“rank”也不是指针。我只是不明白。rank 属性如下所示：

```
@property (nonatomic) NSUInteger rank; 
```

希望有人能提出答案，因此让我自己头疼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:53:36.777

属性 maxRank 被声明为 .h 文件中的指针。删除属性声明中的 * 修复了它。

# azure - 丰富 Azure ACS 安全令牌

> ID：14789003
> 
> 赞同：0
> 
> 时间：2013-02-09T14:13:03.603
> 
> 标签：azure, wif, acs

我们正在考虑将 ACS 作为我们的联合 STS。我们可以将我们自己的自定义 STS 配置为 IP-STS，以及 Facebook、Live 和 Google 等“内置”身份提供者。然而，我们得到的索赔相当“差”。ACS 中的声明转换仅在非常简单的场景中有所帮助。
我们正在寻找处理“遗失索赔”情况的最佳实践。我们认为我们需要在 ACS 前面放置一个“装饰 STS”。当 ACS 返回一个安全令牌时，这个装饰器可以用额外的声明“丰富”安全令牌。如果只是缺少声明，它可以设置一些用户界面来要求用户（一次）完成她的个人资料。这样，无论用户来自哪里，我们都有应用程序需要的声明。这是一个好主意吗 ？在这种情况下，“最佳实践”是什么？（ACS 似乎不允许任何程序化扩展。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T21:50:39.173

您想要的称为 RP-STS，并且设置起来非常简单。联邦可以被认为是一个链，在 ACS 的情况下，这通常是 RP -> ACS -> IdP，其中令牌请求从左向右移动，令牌从右向左移动。在联邦链中，每个实体只明确知道它的邻居。你想要的是 RP -> RP-STS -> ACS -> IdP。事实上，ACS 也可以被认为是一个 RP-STS，因为它既不是身份提供者也不是依赖方。您只是在链中添加另一个链接，这没关系，因为联邦链可以任意长。

您的 RP-STS 将有两个主要操作：

1.  当 RP 发送登录请求时，将该请求的详细信息（例如原始 RP 的域和回复地址、任何 RP 上下文等）打包到 wctx 中，并创建一个到 ACS 的 this 登录请求。
2.  When ACS sends a token back to the RP-STS, unpack the context, add any value needed (such as prompting the user for more details or looking up a profile) and then issue a new token with the added claims and any claims ACS issued that you want to keep.

What you're effectively doing in this case is outsourcing the authentication to Google/FB/etc. to ACS because you don't want to deal with those protocols, and then adding your own value after authentication is complete. From ACS's point of view, there is only one RP registered: your RP-STS. From your actual RP's perspective, there is only one identity provider: your RP-STS.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T16:14:19.370

我认为答案实际上取决于确切的情况。ACS 并非旨在管理配置文件，因此它可以和应该做什么，关于传出索赔或多或少受到设计的限制 - 它是一个中间人，在所有但一个情况下。

除了管理服务身份之外，它只能处理从身份提供者收到的输入，并且没有管理用户配置文件或类似内容的权限。

考虑到这一点，我认为您实际上只有两个合理的选择-您的身份提供的信息提供了更多信息，这些信息可以通过 ACS 并可能被 ACS 转换，或者您的应用程序通过 ACS 从 IP 接收基本身份并管理其扩展配置文件。

[我在这里](http://yossidahan.wordpress.com/2012/02/19/end-to-end-authentication-and-authorisation-scenario-for-mvcacs/)写过后者

# java - 如何使用 CSS 制作移动虚线边框？

> ID：14789006
> 
> 赞同：4
> 
> 时间：2013-02-09T14:13:11.090
> 
> 标签：java, css

我在输入文本元素周围显示虚线边框 `border: 1px dashed black`：

我可以以某种方式定义一个“偏移量”来告诉浏览器从哪里开始边框？

我的目标是定义一个计时器，并改变虚线边框的偏移量（使用 java GWT element.setAttribute()），从而模拟顺时针移动的虚线边框结果。

是否有任何现有的 CSS 边界偏移量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T16:23:14.313

使用动画 .gif 作为 div 的背景有一个有点复杂的解决方法来实现类似的效果，无论您想要“加边框”的任何内容都放置在第二个 div 中，该第二个 div 嵌套在第一个 div 中，边距为 1px。

动画 .gif 应该是一个小正方形 (8px x 8px)，有 3px 宽的对角线从左到右穿过它（您可以调整大小来调整线条的宽度）。当此图像只有一个像素的宽度或高度可见时，它似乎是一个移动的虚线边框。

Matthew Taylor 在他的博客中详细介绍了这项技术：http: [//matthewjamestaylor.com/blog/animated-photoshop-selection-on-a-web-page](http://matthewjamestaylor.com/blog/animated-photoshop-selection-on-a-web-page)。

# html - html5：为所有浏览器输入相同长度的类型编号（或文本，如果无法识别）

> ID：14789007
> 
> 赞同：0
> 
> 时间：2013-02-09T14:13:11.873
> 
> 标签：html, input, numbers

向所有最流行的浏览器添加一些属性以`<input type="number">`使该元素的长度相同的最佳方法是什么？

实际上，我使用 size="5"`<input type="text" size="5">`但我最好使用 type="number"。

`<input type="number" size="5" min="1" max="10000" value="1000">`所以我把 size 属性也看对了吗？

还有更多可能的改进，以便所有浏览器都具有**相同**的元素宽度吗？

另外（如果可能的话）我会在最近的将来做到这一点，所以我不应该在一年左右的时间内改变它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:34:14.357

最好的选择是使用 css 设置输入的大小：

```
input[type=number]{
    width: ...;
} 
```

那么你确定它在所有浏览器中都是一样的

# c# - 使用 Sql 3layered 样式的登录表单

> ID：14789013
> 
> 赞同：0
> 
> 时间：2013-02-09T14:13:53.323
> 
> 标签：c#, sql, 3-tier

我正在尝试使用 Sql server management studio 为我的应用程序制作一个像样的登录表单。我应该做 3 层。

我认为它们都是正确的，在我的主要形式中，我有 2 个 txtboxes 和一个按钮，但是我不知道如何连接一个和另一个，当我输入用户名和密码时，他们会使用数据库检查它们是否都正确.

到目前为止，我得到了：

```
public class UsersDB
{
    public static Users GetUsers(string username, string password)
    {

        SqlConnection conn = QuizzesDB.GetConnection();
        Users user = new Users();

        string selectStatement =
            "SElECT * " +
            "FROM Users" +
            "WHERE User_Name = @User_Name" +
            "AND Password = @Password";
        SqlCommand selectCommand = new SqlCommand(selectStatement, conn);
        selectCommand.Parameters.AddWithValue("@User_Name", username);
        selectCommand.Parameters.AddWithValue("@Password", password);

        try
        {
            conn.Open();
            SqlDataReader reader = selectCommand.ExecuteReader();
            while (reader.Read())
            {
                user.username = reader["User_Name"].ToString();
                user.password = reader["Password"].ToString();
            }
            reader.Close();
        }
        catch (SqlException ex)
        {
            throw ex;
        }
        finally
        {
            conn.Close();
        }
        return user;
    }
} 
```

我从数据库中获取信息的类。

第二类是

```
public class Users
{
    private string cUsername;
    private string cPassword;

    public Users() { }

    public string username
    {
        get { return cUsername; }
        set { cUsername = value; }
    }
    public string password
    {
        get { return cPassword; }
        set { cPassword = value; }
    }
} 
```

我试过这样的事情：但我总是得到一个错误“'='附近的语法不正确”。

```
private void btnLogin_Click(object sender, EventArgs e)
    {
        string userName = txtUsername.Text;
        string password = txtPassword.Text;
        Users user = new Users();
        user = UsersDB.GetUsers(userName, password);
        try
        {
            user = UsersDB.GetUsers(userName, password);
            if (user == null)
            {
                MessageBox.Show("wrong username or password", "Login");
            }
            else
            {
                MessageBox.Show("login succesvol", "Login");
            }
        }
        catch (Exception ex){
            throw ex;
        }           
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:47:15.763

除了糟糕的编码风格之外，您的 SQL 查询还有一个小问题：

```
string selectStatement =
        "SElECT * " +
        "FROM Users" + // <-- you need an space before "
        "WHERE User_Name = @User_Name" + // <-- also here
        "AND Password = @Password"; 
```

为什么不使用单行查询？

```
string selectStatement =
    "SElECT * FROM Users WHERE User_Name = @User_Name AND Password = @Password"; 
```

如果你真的需要多行查询，为什么不使用[逐字字符串](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)呢？

```
string selectStatement =  @"
    SElECT * 
    FROM Users
    WHERE User_Name = @User_Name
    AND Password = @Password"; 
```

# c++ - MFC C++ 文件上传，http post 返回无效的 win api

> ID：14789018
> 
> 赞同：1
> 
> 时间：2013-02-09T14:14:58.473
> 
> 标签：c++, file-upload, mfc, http-post

我正在尝试使用 MFC C++ 上传文件，但由于某种原因，我在上传时收到无效文件。我觉得这可能是由于我使用的标题或帖子信息错误导致的问题，但经过几个小时的尝试后我找不到我的错误。这是我的代码。如果各位专家能详细说明我的错误，我将不胜感激，以便我纠正它...

```
void CFileUpload::UploadByPost(CString strFileName,CString  strServerUrl,CString strServerUploadFile)
{

DWORD dwTotalRequestLength;
DWORD dwChunkLength;
DWORD dwReadLength;
DWORD dwResponseLength;
CHttpFile* pHTTP = NULL;

dwChunkLength = 64 * 1024; 
void* pBuffer = malloc(dwChunkLength);
CFile file ;

if (!file.Open(strFileName.GetBuffer(),
  CFile::modeRead | CFile::shareDenyWrite))
 {
        return;
   }

CInternetSession session(L"sendFile");
CHttpConnection *connection = NULL;

try
{
    //Create the multi-part form data that goes before and after the actual file upload.

    CString strHTTPBoundary = _T("FFF3F395A90B452BB8BEDC878DDBD152");       
    CString strPreFileData = MakePreFileData(strHTTPBoundary, file.GetFileName());
    CString strPostFileData = MakePostFileData(strHTTPBoundary);
    CString strRequestHeaders = MakeRequestHeaders(strHTTPBoundary);
    dwTotalRequestLength = strPreFileData.GetLength() + strPostFileData.GetLength() + file.GetLength();

    connection = session.GetHttpConnection(/*L"www.YOURSITE.com"*/strServerUrl.GetBuffer(),NULL,INTERNET_DEFAULT_HTTP_PORT);

    pHTTP = connection->OpenRequest(CHttpConnection::HTTP_VERB_POST, strServerUploadFile.GetBuffer());//_T("/YOUURL/submit_file.pl"));
    pHTTP->AddRequestHeaders(strRequestHeaders);
    pHTTP->SendRequestEx(dwTotalRequestLength, HSR_SYNC | HSR_INITIATE);

    //Write out the headers and the form variables
    pHTTP->Write((LPSTR)(LPCSTR)strPreFileData.GetBuffer(), strPreFileData.GetLength());

    //upload the file.

    dwReadLength = -1;
    int length = file.GetLength(); //used to calculate percentage complete.
    while (0 != dwReadLength)
    {
        dwReadLength = file.Read(pBuffer, dwChunkLength);
        if (0 != dwReadLength)
        {
        pHTTP->Write(pBuffer, dwReadLength);
        }
    }

    file.Close();

    //Finish the upload.
    pHTTP->Write((LPSTR)(LPCSTR)strPostFileData.GetBuffer(), strPostFileData.GetLength());
    pHTTP->EndRequest(HSR_SYNC);

    //get the response from the server.
    LPSTR szResponse;
    CString strResponse;
    dwResponseLength = pHTTP->GetLength();
    while (0 != dwResponseLength )
    {
        szResponse = (LPSTR)malloc(dwResponseLength + 1);
        szResponse[dwResponseLength] = '\0';
        pHTTP->Read(szResponse, dwResponseLength);
        strResponse += szResponse;
        free(szResponse);
        dwResponseLength = pHTTP->GetLength();
    }

    TRACE(L"%s",strResponse.GetBuffer());

    //close everything up.
    pHTTP->Close();
    connection->Close();
    session.Close();
}
catch(CInternetException* e)
{
    TRACE(L"error: %d \n",e->m_dwError);
}
catch(CFileException* e)
{
    TRACE(L"error: %d \n",e->m_cause);
}
catch(...)
{
    TRACE(L" unexpected error");
}

} 
```

这是我的标题和发布功能

```
CString CFileUpload::MakeRequestHeaders(CString& strBoundary)
{
    CString strFormat;
    CString strData;
    strFormat = _T("Content-Type: multipart/form-data; boundary=%s\r\n");
    strData.Format(strFormat, strBoundary);
    return strData;
}

CString CFileUpload::MakePreFileData(CString& strBoundary, CString& strFileName)
{
CString strFormat;
CString strData;

strFormat += _T("--%s");
strFormat += _T("\r\n");
strFormat += _T("Content-Disposition: form-data; name=\"file\"; filename=\"%s\"");
strFormat += _T("\r\n");
strFormat += _T("Content-Type: text/plain");
strFormat += _T("\r\n");
strFormat += _T(" XXXXX ");
strFormat += _T("\r\n\r\n");

strData.Format(strFormat, strBoundary,/* m_Name, strBoundary,*/ strFileName);

return strData;
}

CString CFileUpload::MakePostFileData(CString& strBoundary)
{

    CString strFormat;
CString strData;

strFormat = _T("\r\n");
strFormat += _T("--%s");
strFormat += _T("\r\n");
strFormat += _T("Content-Disposition: form-data; name=\"submit\"");
strFormat += _T("\r\n\r\n");
strFormat += _T("");
strFormat += _T("\r\n");
strFormat += _T("--%s--");
strFormat += _T("\r\n");

strData.Format(strFormat, strBoundary, strBoundary);

return strData;

} 
```

它总是返回无效文件，我使用的文件服务器代码如下

```
<?php
$allowedExts = array("log", "txt");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "text/plain")
)
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Error: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Stored in: " . $_FILES["file"]["tmp_name"];
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

这是表格

```
<html>
<body>

<form action="upload_file.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file"><br>
<input type="submit" name="submit" value="Submit">
</form>

</body>
</html> 
```

注意：- 我不能使用 boost 或 poco、curl 或任何第三方库.. 只有 win32 或 mfc。

这是制作前和制作后的数据：

标题

```
"Content-Type: multipart/form-data; boundary=FFF3F395A90B452BB8BEDC878DDBD152
" 
```

预文件

```
"--FFF3F395A90B452BB8BEDC878DDBD152
Content-Disposition: form-data; name="Filename"; filename="ddd.txt"
Content-Type: text/plain
Content-Transfer-Encoding: binary

" 
```

发布文件

```
"
--FFF3F395A90B452BB8BEDC878DDBD152
Content-Disposition: form-data; name="submit" value="submit"

--FFF3F395A90B452BB8BEDC878DDBD152--
" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T23:44:58.257

最后我得到了错误....这不是因为 post 或 pre 文件数据或 header 或服务器脚本，而是因为我从 http 对象调用 write 函数并将 unicode 转换为 ansi 而没有任何适当的转换....我不知道为什么我没有意识到我这个愚蠢的错误哈哈……但为了其他人，我也想分享这些信息……

```
pHTTP->Write((LPSTR)(LPCSTR)strPreFileData.GetBuffer(), strPreFileData.GetLength()); 
```

必须改为

```
pHTTP->Write((LPSTR)(LPCSTR)CW2A(strPreFileData.GetBuffer()), strPreFileData.GetLength()); 
```

还有帖子文件版本

```
 pHTTP->Write((LPSTR)(LPCSTR)strPostFileData.GetBuffer(), strPostFileData.GetLength()); 
```

到

```
 pHTTP->Write((LPSTR)(LPCSTR)CW2A(strPostFileData.GetBuffer()), strPostFileData.GetLength()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:59:24.443

好吧，您的服务器端代码中有三种情况可能出错：

```
if ((($_FILES["file"]["type"] == "text/plain")
)
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts)) 
```

除了可怕的缩进和大括号放置之外，您是否尝试过分别测试每个条件以便您知道 php 部分到底认为什么是错误的？

[错误已被删除]

# sql-server - 索引视图死锁

> ID：14789019
> 
> 赞同：2
> 
> 时间：2013-02-09T14:15:04.223
> 
> 标签：sql-server, deadlock, isolation-level, indexed-view

我一直在为这个僵局拉头发：

![僵局](../Images/7c42bcc88a4cfdef8865999f930bcd27.png)

[[放大](https://i.stack.imgur.com/ZpVY5.png)]

IX_OrderAmounts 是在 Amount 表上进行聚合的索引视图。左侧的事务（可重复读取 - 尽管已提交读取也会发生同样的情况）仅在 Amount 表中插入一行。右侧的事务（已提交读）更新了 Amount 表中的几行（2 - 3 行）（全部在一个 UPDATE 语句中）。

现在我不明白为什么左边的事务，只需要插入一行，需要获取第二个更新锁。

因为死锁在我不直接更新的索引视图上，所以我不能真正使用 SQL 提示（或者至少我不知道如何使用）。

我该如何解决这个死锁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:52:10.110

**可用于解决死锁的典型方法包括：**

*   添加和删​​除索引。
*   添加索引提示。
*   修改应用程序以以类似的模式访问资源。
*   从事务中删除活动，如触发器。
*   尽可能缩短交易时间。

    在 SQL Server 中，您还可以最大限度地减少锁定争用，同时保护事务免受未提交数据修改的脏读，使用以下任一方法：

    *   **READ_COMMITTED_SNAPSHOT 数据库选项设置为 ON**的 READ COMMITTED 隔离级别。
    ***   SNAPSHOT 隔离级别。**

 **加载侧重于锁定的 SQL Profiler，启动专门针对该数据库死锁的脚本，并将其提供给数据库引擎优化顾问，并查看建议。

**脚注**： http: [//support.microsoft.com/kb/832524](http://www.codeproject.com/Articles/42547/SQL-SERVER-How-To-Handle-Deadlock)

[[1]：http: [//support.microsoft.com/kb/832524](http://support.microsoft.com/kb/832524)

[http://www.codeproject.com/Articles/42547/SQL-SERVER-How-To-Handle-Deadlock](http://www.codeproject.com/Articles/42547/SQL-SERVER-How-To-Handle-Deadlock)

之前的Stackoverflow加锁问题[如何解决死锁问题？](https://stackoverflow.com/questions/928830/how-to-solve-deadlock-problem)**

# java - 当用户单击刷新/F5 时，如何避免从主应用程序重定向到 gwt 应用程序？

> ID：14789020
> 
> 赞同：0
> 
> 时间：2013-02-09T14:15:17.013
> 
> 标签：java, javascript, gwt, url-rewriting

在我的应用程序中，我在 iframe 中包含了 GWT 模块。

单击 GWT 模块中的按钮时，我正在分配新的 url，它只是我的应用程序的一部分，新 url 的内容进入/同一窗口。

```
Hyperlink eventStatusLink = new Hyperlink(moveToMainApplication, "");

    eventStatusLink.addClickHandler(new ClickHandler() 
    {
        @Override
        public void onClick(ClickEvent event) {
            String eventStatusUrl = "/company/MainAppServlet?action=Launch&ID="+ IDFromGWT";
            // info("eventStatusUrl:"+eventStatusUrl);
            Window.Location.assign(eventStatusUrl);
        //Also called native method ::$wnd.location.href = url; not useful for me

        }
    }); 
```

我能够重定向到我的主应用程序，但如果用户在主应用程序上按 F5/Refresh 键，则页面将重定向到我的 GWT 应用程序。

Window.Location.assign/replace 不替换浏览器中的主应用程序 url 为什么？

有没有办法使用 GWT 做到这一点？

在我的 mainApplication 用户可以按 f5/刷新键

如何避免从我的主应用程序重定向到 gwt 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:33:03.160

是你要找的吗？

`Window.Open`您可以通过使用并将目标设置为在同一窗口中打开所需的网址`_self`

```
com.google.gwt.user.client.Window.open(url, "_self",
           "param1=value," + 
           "param2=value");
} 
```

希望上面的代码能给你一个提示。

并查看GWT [PlaceManager](http://www.jarvana.com/jarvana/view/net/customware/gwt/presenter/gwt-presenter/1.1.1/gwt-presenter-1.1.1-javadoc.jar!/net/customware/gwt/presenter/client/place/PlaceManager.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T07:52:45.577

这对我来说很好:)

```
Hyperlink eventStatusLink = new Hyperlink(moveToMainApplication, "");

    eventStatusLink.addClickHandler(new ClickHandler() 
    {
        @Override
        public void onClick(ClickEvent event) {
            String eventStatusUrl = "/company/MainAppServlet?action=Launch&ID="+ IDFromGWT";
            // info("eventStatusUrl:"+eventStatusUrl);
            //Window.Location.assign(eventStatusUrl);
          redirectToOtherModule(eventStatusUrl);

        }
    }); 
```

本机方法如下：

```
 public static native String redirectToOtherModule(String url) /*-{
         return $wnd.redirectToOtherModule(url);
        }-*/; 
```

//MyGWTModule.html

```
function redirectToOtherModule(url){
                window.top.location.href = url;
            } 
```

# javascript - jsPlumb 工具包

> ID：14789025
> 
> 赞同：0
> 
> 时间：2013-02-09T14:16:23.910
> 
> 标签：javascript, jquery-ui, jsplumb

jsPlumb 工具包中是否可以根据要绘制和连接的对象的数量和类型动态定位内容。我的意思是目前他们给出的[示例](http://jsplumbtoolkit.com/jquery/perimeterAnchorsDemo.html)使用 css 来定位每个节点，当我们动态生成可视化时这不是一个好的选择，因为我们不知道网络中有多少对象（节点）可用。是否可以使其动态化？

注意：jsplumb 中的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T02:15:11.487

不，这取决于你来定位你的元素。jsPlumb 只是简单地“探测”它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-12T10:33:06.240

是的，这是可能的（好吧，在接受答案四年后，但仍然如此）。考虑如何首先绘制节点。例如，如果您想绘制树或组织结构图，您可能希望通过设置表面选项布局类型来使用[分层布局，如下所示：](https://jsplumbtoolkit.com/docs/toolkit/layout-hierarchical.html)

```
var toolkit = jsPlumbToolkit.newInstance();

//... load data...

var surface = toolkit.render({
    container:"someElement",
    layout:{
    type:"Hierarchical",
    parameters:{
      padding:[ 50, 50 ]
    }
  }
}); 
```

使用这种布局类型时，jsplumb 会自动动态定位节点。

# javascript - 如何动态放置 jQuery :gt()？

> ID：14789027
> 
> 赞同：-2
> 
> 时间：2013-02-09T14:16:34.447
> 
> 标签：javascript, jquery

有一个 jQuery`:gt()`选择器，它允许选择索引大于匹配集中索引的所有元素。

我可以这样使用它：

```
$(this).find('a:gt(30)'); 
```

问题是我正在使用 var 代替：

```
var opt = $("#div").text(); 
```

如何`:gt()`在变量旁边设置选择器：

```
var opt = $("#div").text();

$(this).find(opt:gt(30)); 
```

这似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:27:26.053

您只需要使用字符串连接。

```
$(this).find(opt + ":gt(30)") 
```

例如，如果`opt`的值为`"a"`. 然后表达式`opt + ":gt(30)"`将计算为`"a:gt(30)"`。

您需要小心这`opt`是一个有效的选择器。

# asp.net - 如何使用静态页面或数据库创建教程网站

> ID：14789032
> 
> 赞同：-2
> 
> 时间：2013-02-09T14:17:02.747
> 
> 标签：asp.net, html, sql-server

如何创建一个教程网站？

我必须创建一个数据库来存储教程内容吗

或为所有教程创建静态页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:22:03.223

使用 CMS 维护教程网站要简单得多。有不同的可用。

在我看来， [Wordpress](http://wordpress.org/)一开始会满足您的需求，但它是在 PHP 上运行的。

如果你想在 asp.net 上运行一些东西，你可以试试[BlogEngine.NET 。](http://www.dotnetblogengine.net/)

# sql - 简单地使用外键来防止数据插入？SQL

> ID：14789033
> 
> 赞同：3
> 
> 时间：2013-02-09T14:17:04.960
> 
> 标签：sql, foreign-keys

为表执行插入操作时，会根据其父表自动检查外键以确保该值存在。如果它不存在，则插入失败。

我的问题是，仅为了插入数据检查而将值设置为外键是错误的吗？

我正在尝试做的一些书呆子背景：

我正在建立一个摔跤数据库来复习大学以来我忘记的一切。作为一个摔跤迷，我认为把它作为一个话题会保持我的兴趣（而且确实如此）。

```
Create Table Superstar
(
    Superstar_ID Int Not Null Primary Key Identity (100,1),
    Employee_ID Int Not Null Foreign Key References Employee(Employee_ID),
    Alignment_ID Int Not Null Foreign Key References Alignment(Alignment_ID),
    SuperStar_Name Varchar(50) Not Null,
    SuperStar_Weight Varchar(50) Not Null,
    SuperStar_Height Varchar(50) Not Null,
    Billed_From Varchar(50) Not Null,
    Active Bit Not Null
)

Create Table Title
(
    Title_ID Int Not Null Primary Key Identity(1,1),
    Title_Name Varchar(50) Not Null,
    Title_Description Varchar(50) Not Null,
    **Current_Holder Int Foreign Key References Superstar(Superstar_ID),
    Former_Holder Int Foreign Key References Superstar(Superstar_ID),**
    Active Bit Not Null
)

Create Table Superstar_Title
(
    Superstar_Title_ID Int Not Null Primary Key Identity (1,1),
    Title_ID Int Not Null Foreign Key References Title(Title_ID),
    Superstar_ID Int Not Null Foreign Key References Superstar(Superstar_ID)
) 
```

对于“Title”表，我将 Current_Holder 和Former_Holder 字段设置为外键，以检查Superstar_ID 在插入时实际存在的Superstar 表。

这是非常错误的吗？仅将外键用于内置检查约束？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T14:20:37.910

这就是约束的全部意义——检查数据是否一致。所以，不，这完全没问题。实际上，这是鼓励 - 保持您的数据完整性，这样您就不会得到不存在的人“持有”的东西。

**编辑**：我所说的“鼓励”的意思是，虽然你应该这样做，但技术使你不能这样做。如果您想手动检查，那么您可以自由地不在数据库中强制执行外键关系。但是，您**必须**在某处执行检查，否则您将得到无用的数据。而且由于您正在复习您的 SQL 技能，那么我想最好利用您正在使用的 RDMBS 的所有功能。

# export - 从 3ds Max 导出到 XNA

> ID：14789045
> 
> 赞同：0
> 
> 时间：2013-02-09T14:18:40.767
> 
> 标签：export, 3dsmax, 3d-modelling, 3d-model

我在 3Ds Max 中创建了一些 3Ds 模型，但是在我导出为 FBX 文件并将其加载到 XNA 之后，渲染的模型没有来自 3Ds Max 的任何映射和纹理？

有人知道如何导出这些贴图和纹理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:31:19.057

我有同样的问题，现在就解决了。在渲染纹理之前，您需要“烘烤”它。这是你如何做到的。[http://www.delta3d.org/article.php?story=20051115140557167&topic=tutorials](http://www.delta3d.org/article.php?story=20051115140557167&topic=tutorials)遵循这个直到你完成纹理烘焙。我建议您在使用自己的纹理之前使用材质编辑器添加简单的颜色。添加颜色后做烘烤的事情！获得 .tga 文件后，将其放入项目的 Texture 文件夹中。此外，当模型上有纹理或颜色时，将其导出到项目中的 Models 文件夹。现在 .fbx 文件具有对 .tga 文件的引用。如果失败请添加评论...

干杯..

# python - Django ORM 和闭包表

> ID：14789046
> 
> 赞同：6
> 
> 时间：2013-02-09T14:18:46.817
> 
> 标签：python, sql, django, django-queryset, transitive-closure-table

我正在尝试使用闭包表对组织为分层树的数据进行建模。表示树中节点的条目并不花哨，定义如下。

```
class Region(models.Model):
    RegionGuid = models.CharField(max_length=40, unique=True, db_column='RegionGUID', blank=True)
    CustomerId = models.IntegerField(null=True, db_column='CustomerID', blank=True)
    RegionName = models.CharField(max_length=256, db_column='RegionName', blank=True)
    Description = models.TextField(db_column="Description", blank=True)
    class Meta:
        db_table = u'Region' 
```

节点之间的路径使用以下闭包表定义。它由到祖先节点的 FK、到后代节点的 FK 以及祖先和后代之间的路径长度（即节点数）组成：

```
class RegionPath(models.Model):
    Ancestor = models.ForeignKey(Region, null=True, db_column='Ancestor', blank=True)
    Descendant = models.ForeignKey(Region, null=True, db_column='Descendant', blank=True)
    PathLength = models.IntegerField(null=True, db_column='PathLength', blank=True)
    class Meta:
        db_table = u'RegionPath' 
```

现在我将如何检索所有`Region`行及其各自的父节点（即 RegionPath.PathLength = 1）？我的 SQL 有点生锈，但我认为 SQL 查询应该是这样的。

```
SELECT r.* from Region as r 
LEFT JOIN 
(SELECT r2.RegionName, p.Ancestor, p.Descendant from Region as r2 INNER JOIN RegionPath as p on r2.id = p.Ancestor WHERE p.PathLength = 1) AS Parent
on r.id = Parent.Descendant 
```

非常感谢使用 Django 的 QuerySet API 表达这一点的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-29T09:36:07.047

通过将 related_name 添加到外键，如下所示：

```
class RegionPath(models.Model):
    Ancestor = models.ForeignKey(Region, null=True, db_column='Ancestor', blank=True, related_name="ancestor")
    Descendant = models.ForeignKey(Region, null=True, db_column='Descendant', blank=True, related_name="descendants")
    PathLength = models.IntegerField(null=True, db_column='PathLength', blank=True)
    class Meta:
        db_table = u'RegionPath' 
```

您可以查询任一关系：

```
children = Region.objects.filter(ancestors__PathLength=1)
parents = Region.objects.filter(descendants__PathLength=1) 
```

我在一个非常相似的模型上进行了测试。您可能需要添加 .distinct()，您可能需要 select_related() 以减少查询。

# android - android如何在按钮之间留出一些空间并在每个按钮上方制作白线

> ID：14789048
> 
> 赞同：1
> 
> 时间：2013-02-09T14:18:52.920
> 
> 标签：android, android-xml, android-button

我有两个带有 xml 背景的按钮，我想在它们之间保留一些空间，因为它们彼此正好过去，我也想在它们上面放白线，我会告诉你我是如何尝试的，但它不起作用我

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="25dip"

    android:orientation="horizontal"

    android:weightSum="2" >

    <Button
        android:background="@drawable/button_selector"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textColor="#FFFFFF"
        android:gravity="center"
        android:textStyle="bold"
        android:text="@string/b_save" />

    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textColor="#FFFFFF"
        android:gravity="center"
        android:background="@drawable/button_selector"
        android:text="@string/b_cancel" />
</LinearLayout> 
```

### xml背景

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <padding android:top="10dip"
        android:bottom="10dip"/>

    <!-- Gradient Bg for listrow -->
    <gradient
        android:useLevel="false"
        android:angle="270"
        android:centerColor="#000000"
        android:endColor="#FFFFFF"
        android:startColor="#808080" />
</shape> 
```

![在此处输入图像描述](../Images/d559d43add9fc56dcb159bd94a313ed6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T09:01:44.723

看一下这个

![在此处输入图像描述](../Images/6853a765946876885664bf2c0b9191c9.png)

### bg_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <padding android:top="10dip"
        android:bottom="10dip"/>

    <!-- Gradient Bg for listrow -->
    <gradient
        android:useLevel="false"
        android:angle="270"
        android:centerColor="#808080"
        android:endColor="#000000"
        android:startColor="#FFFFFF" />
</shape> 
```

### button_bg.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <padding android:top="10dip"
        android:bottom="10dip"/>

    <!-- Gradient Bg for listrow -->
    <gradient
        android:useLevel="false"
        android:angle="270"
        android:centerColor="#000000"
        android:endColor="#808080"
        android:startColor="#FFFFFF" />
</shape> 
```

### 你的 xml

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="25dip"
    android:orientation="horizontal"
    android:background="@drawable/bg_selector"
    android:weightSum="2" >

    <Button
        android:background="@drawable/bg_selector"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textColor="#FFFFFF"
        android:gravity="center"
        android:textStyle="bold"
        android:layout_marginRight="4dip"
        android:layout_marginLeft="10dip"
        android:text="@string/b_save" />

    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textColor="#FFFFFF"
        android:gravity="center"
        android:layout_marginLeft="4dip"
        android:layout_marginRight="10dip"
        android:background="@drawable/bg_selector"
        android:text="@string/b_cancel" 
        android:textStyle="bold"/>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:22:24.047

在您的 XML 中使用以下代码绘制一条*水平线*：

```
<View
                android:layout_width="match_parent"
                android:layout_height="1dp"
                android:layout_marginTop="5dp"
                android:background="#ColorValue" /> 
```

要绘制垂直线，只需更改 和 的`android:layout_width`值 `android:layout_height`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-09T10:58:46.260

Pur 1) android:layout_marginTop="10dp" 和
2) android:layout_marginBottom="10dp" in xml 这应该足以满足您的工作，

第一个点将与顶部保持距离，第二个点将与底部保持距离

# html - 浏览器不关心基于 IMG 元素的大小

> ID：14789049
> 
> 赞同：0
> 
> 时间：2013-02-09T14:18:59.613
> 
> 标签：html, css, image, responsive-design

我最近一直在尝试这个问题；

```
<div class="row">
    <div class="column">
        <img id="first" width=275 height=385 src="flower-275x385.jpg" />
    </div>
    <div class="column">
        <img id="second" width=100 height=400 src="flower-275x385.jpg" />
    </div>
    <div class="column">
        <img id="third" width=500 height=150 src="flower-275x385.jpg" />
    </div>
    <div class="column">
        <img id="fourth" width=75 height=150 src="flower-275x385.jpg" />
    </div>
    <div class="column">
        <img id="fifth" width=750 height=550 src="flower-275x385.jpg" />
    </div>
</div>

<style>
    .row {
        width:100%;
        overflow:hidden ;
    }
    .column {
        width:20% ;
        float:left ;
    }

    .column img {
        width:100% ;
        height:auto ;
    }

</style> 
```

在 HTML 端，同一图像有许多不同的尺寸，
但浏览器只处理**图像自然尺寸**，
这就是为什么所有图像在 JSFiddle 的结果端呈现相同尺寸，
强制浏览器处理基于 HTML 的宽度/高度？

这是它的[JSFiddle](http://jsfiddle.net/akkara/e2jQD/2/)。

**编辑：**似乎没有 JS：[我的解决方案](http://jsfiddle.net/akkara/e2jQD/12/)就没有办法做到这一点，感谢上面的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:25:46.620

[`width:100% ;`](http://jsfiddle.net/e2jQD/3/)如果您希望应用标记中指定的大小，[请](http://jsfiddle.net/e2jQD/3/)[从 CSS中取出。](http://jsfiddle.net/e2jQD/3/)否则，所有图像的大小都将与其容器的宽度相匹配，并且您已将所有容器设置为相同的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T14:26:07.320

如果您想要具有相同的宽度但自动计算的高度，请首先删除您在图像上应用的高度样式：

```
.column img {
    width:100% ;
    /*height:auto ;*/
} 
```

然后，从图像中删除所有宽度和高度值：

```
<img id="first" src="flower-275x385.jpg" /> 
```

见：http: [//jsfiddle.net/e2jQD/10/](http://jsfiddle.net/e2jQD/10/)

# hibernate - Hibernate batch_size 最佳值

> ID：14789052
> 
> 赞同：3
> 
> 时间：2013-02-09T14:19:36.397
> 
> 标签：hibernate

有人可以建议我如何选择最物有所值的`hibernate.jdbc.batch_size`吗？
如果内存和 CPU 不是问题，可以使用 500 之类的值。

编辑：
在[本章](http://docs.jboss.org/hibernate/orm/4.0/devguide/en-US/html/ch04.html)中，它说使用 10 到 50 之间的值。但没有提及原因。任何人都可以假设这种限制的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T14:21:48.577

Hibernate 文档建议使用 5 到 30 之间的值。最佳值完全取决于您的应用程序、数据和数据库。尝试各种值并衡量每个值的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-19T09:26:48.507

最大值为 50。最小值为 10。对于 10K 记录，50 是好的

# android - 克隆 Android 应用程序

> ID：14789053
> 
> 赞同：0
> 
> 时间：2013-02-09T14:19:43.163
> 
> 标签：android

我为 android 制作了一个应用程序，但我需要创建同一个应用程序的副本。我必须将包名称以及所有其他生成的文件 (/bin) 更改为应用程序的新名称。

除了已经提到的那些之外，这两个应用程序（原始和复制）之间的差异仅在于字符串和样式文件。

有什么简单的方法可以做到这一点吗？（也许创建一个库，我不知道该怎么做）谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:23:07.653

我不确定在这种情况下你的困难是什么。您只需制作项目文件夹的副本，然后将其作为现有项目导入 Eclipse。在您的 Android 清单中，您将修改包名称，并且您的 strings.xml 将针对新值（以及您的样式 XML 文件）进行修改。

# ssrs-2008 - SSRS 报告在生产服务器上超时？

> ID：14789056
> 
> 赞同：1
> 
> 时间：2013-02-09T14:20:02.573
> 
> 标签：ssrs-2008, reporting-services

我们使用 SSRS 2008 进行报表开发，然后在 Sharepoint 站点上部署所有报表。我们面临 SSRS 报告在生产服务器上超时的问题。它们在测试服务器、集成服务器和 UAT 服务器上运行良好。（不到 3 分钟）。在生产 Sharepoint 网站上，他们花费了 10 多分钟。

*   我检查了 UAT 和 Prod 的索引，它们是最新的，并且两个环境的底层 DDL 是相同的。
*   统计数据是最新的。
*   两台服务器上的数据量也相同。我想不通，为什么他们在产品服务器上超时？

# c# - 语言资源文件的构造函数在 WPF 中生成为内部而不是公共

> ID：14789057
> 
> 赞同：2
> 
> 时间：2013-02-09T14:20:07.173
> 
> 标签：c#, wpf, xaml, constructor, resources

```
namespace PcgTools.PcgToolsResources {
    using System;

   ... some comments
    global::System.CodeDom.Compiler.GeneratedCodeAttribute("System.Resources.Tools.StronglyTypedResourceBuilder", "4.0.0.0")]
[global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
[global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
public class Strings {

    private static global::System.Resources.ResourceManager resourceMan;

    private static global::System.Globalization.CultureInfo resourceCulture;

    [global::System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1811:AvoidUncalledPrivateCode")]
    internal Strings() {
    } 
```

问题是最后一行：

```
internal Strings() {
} 
```

运行应用程序时返回 XAML 错误。上面的文件是一个生成的文件（来自 strings.resx）。

我现在必须在每个资源文件更改为后更改该行：

```
public Strings() {
} 
```

有谁知道要改变什么才能让它由公共而不是内部自动生成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T14:49:28.650

可能的解决方案是使用自定义代码生成器。见那里：[http ://www.guysmithferrier.com/post/2008/09/Silverlight-And-Strongly-Typed-Resource-Classes.aspx](http://www.guysmithferrier.com/post/2008/09/Silverlight-And-Strongly-Typed-Resource-Classes.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-28T12:48:22.503

[如何更改 Resources.resx 模板](https://stackoverflow.com/questions/16293285/how-to-change-resources-resx-template/16294692)的副本，该模板具有以下由 Htin Aung 编写的已接受答案

* * *

![在此处输入图像描述](../Images/164aed381ee4c3a8b37e7f4edc3375e3.png)

您可以在资源文件中将访问修饰符更改为公共。

# c++ - 初始化结构包含对结构的引用

> ID：14789058
> 
> 赞同：5
> 
> 时间：2013-02-09T14:20:08.930
> 
> 标签：c++, data-structures, struct, initialization

是否可以有一个包含对结构的引用的结构。这些是如何初始化的？请参阅下面的简短示例。

谢谢

```
typedef struct {
  int a;
}typeInner1;

typedef struct {
  int b;
}typeInner2;

typedef struct {
  typeInner1 &one;
  typeInner2 &two;
}typeOuter;

void fun2(typeOuter *p){
  p->one.a =2;
  p->two.b =3;
}

void fun(typeInner1 &arg1,typeInner2 &arg2){
  typeOuter *ptr = new typeOuter;//<-- how to write initializer
  fun2(ptr);
}

int main(){
  typeInner1 arg1;
  typeInner2 arg2;
  fun(arg1,arg2);

  //now arg1.a should be 2 and arg2.a=3
} 
```

好的，感谢所有输入。我还必须修改 typeOuter 的 typedef 以使其工作。下面的完整工作代码供其他人找到这篇文章。

```
#include <cstdio>
typedef struct {
  int a;
}typeInner1;

typedef struct {
  int b;
}typeInner2;

typedef struct typeOuter_t {
  typeInner1 &one;
  typeInner2 &two;
  typeOuter_t(typeInner1 &a1, typeInner2 &a2) : one(a1), two(a2) {}
}typeOuter;

void fun2(typeOuter *p){
  p->one.a =2;
  p->two.b =3;
}

void fun(typeInner1 &arg1,typeInner2 &arg2){
  typeOuter *ptr = new typeOuter(arg1,arg2);
  fun2(ptr);
}

int main(){
  typeInner1 arg1;
  typeInner2 arg2;
  fun(arg1,arg2);

  //now arg1.a shoule be 1 and arg2.a=3
  fprintf(stderr,"arg1=%d arg2=%d\n",arg1.a,arg2.b);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T14:23:49.923

给出`typeOuter`一个合适的构造函数：

```
struct typeOuter
{
  typeInner1 &one;
  typeInner2 &two;
  typeOuter(typeInner1 &a1, typeInner2 &a2) : one(a1), two(a2) {}
};

void fun(typeInner1 &arg1, typeInner2 &arg2) {
  typeOuter *ptr = new typeOuter(arg1, arg2);
  fun2(ptr);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T14:29:27.387

在 C++11 之前，您需要一个 struct 的构造函数`typeOuter`，并在初始化列表中初始化成员引用：

```
typeOuter(typeInner1& i1, typeInner2& i2) : one(i1), two(i2) {} 
```

使用 C++11，您还可以选择直接使用初始化列表（无需自己定义构造函数）：

```
typeOuter *ptr = new typeOuter { arg1, arg2 }; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-09T14:24:57.103

在 C++ 中，您可以为您的`struct`. 结构基本上是具有`public`默认访问修饰符的类。

```
struct Example
{
    // struct fields..

    Example(); // initialize struct objects.
    ~Example(); // perform clean up if necessary.
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-09T14:29:18.557

您的问题不在于引用`struct`s，而在于一般初始化引用。引用不能被默认初始化，无论它们是对 a`struct`还是对内置类型的引用。

```
int& x; // ERROR! Non-initialized reference to int
C& y; // ERROR! Non-initialized reference to a struct C
int z;
C w;
int& a = z; // OK: Initialized reference to int
C& b = w; // OK: Initialized reference to struct C 
```

`struct`另一方面，当您的引用是 a 的成员变量时（无论它们引用什么类型），它们必须在您`struct`构造时立即绑定（就像常规引用一样）。默认构造您的`struct`然后绑定引用不是一个选项，因为它分两步完成，并且在第一步之后引用将未初始化。

因此，您必须为您提供一个*构造函数*`struct`并在那里初始化您的引用：

```
struct typeOuter {
  typeOuter(typeInner1& o, typeInner2& t) : one(o), two(t) { }
  typeInner1 &one;
  typeInner2 &two;
}; 
```

您的`fun()`函数将如下所示：

```
void fun(typeInner1 &arg1,typeInner2 &arg2){
    typeOuter *ptr = new typeOuter(arg1, arg2);
    fun2(ptr);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-09T14:40:06.927

您可以添加构造函数，但也可以使用聚合初始化和工厂函数。这适用于所有版本的 C++：

```
struct A
{
   int& i;
};

A make_a(int& i)
{
   A a = {i};
   return a;
}

int main()
{
   int i = 0;
   A* a = new A(make_a(i));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-09T14:42:05.223

嗯..

```
#include <cstdio>

struct typeInner1
{
    typeInner1(int a = 0) : m_a(a) {} // typeInner1 constructor
    int m_a;
};

struct typeInner2
{
    typeInner2(int b = 0) : m_b(b) {} // typeInner2 constructor
    int m_b;
};

struct typeOuter
{
    typeOuter(typeInner1& one, typeInner2& two) : m_one(one), m_two(two) {} // typeOuter constructor

    typeOuter& set(int a, int b) { m_one.m_a = a; m_two.m_b = b; return *this; }
    typeOuter& print() { printf("typeInner1 a is %i and typeInner2 b is %i\n", m_one.m_a, m_two.m_b); return *this; }

    typeInner1& m_one;
    typeInner2& m_two;
};

typeOuter fun(typeInner1& arg1, typeInner2& arg2)
{
    return typeOuter(arg1, arg2);
}

int main()
{
  typeInner1 arg1;
  typeInner2 arg2;

  fun(arg1, arg2).print().set(101, 202).print().set(202, 303).print();

  return 0;
} 
```

输出

```
typeInner1 a is 0 and typeInner2 b is 0
typeInner1 a is 101 and typeInner2 b is 202
typeInner1 a is 202 and typeInner2 b is 303 
```

# css - SVG 或 HTML 中像素完美的一致文本宽度

> ID：14789059
> 
> 赞同：4
> 
> 时间：2013-02-09T14:20:27.197
> 
> 标签：css, svg, cross-browser, typography

[在jsFiddle](http://jsfiddle.net/Da2CK/)上查看这个演示（或[在此处托管](http://romi.heliohost.org/genesis.svg)）：

*   我有一个粗略（99.99％）圆形的svg路径
*   沿着这条路径，我使用“textpath”svg 元素放置文本
*   我希望文本的结尾尽可能准确地与开头相遇（理想情况下是像素完美），以便形成一个连续的文本循环

这是代码的摘录（删除了所有文本值）：

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
version="1.1" viewBox="0 0 480 480" preserveAspectRatio="xMidYMid" height="100%"
width="100%">
    <defs>
        <style type="text/css">
            /* for some reason, SVG font import doesn't work in Chrome or Firefox! */
            @font-face {
                font-family: Libertine;
                src: url(LinLibertine_R.svg#LinLibertineO);
            }
            @font-face {
                font-family: Libertine2;
                src: url(LinLibertine_Rah.ttf);
            }
            /* Chrome seems to round to the nearest 0.5 em; also, does not display em-widths consistently with Firefox (though px-widths are consistent) */
            .ex1 {
                font: 0.85em Libertine2;
            }
            .measurement {
                font: 1.0em monospace;
            }
        </style>
        <text id="day1">...</text>
        <text id="day2">...</text>
        <text id="day3">...</text>
        <text id="day4">...</text>
        <text id="day5">...</text>
        <text id="day6">...</text>
        <text id="day7">...</text>
    </defs>
    <g transform="translate(240,240)">
        <g transform="translate(-240,-240)">
            <circle r="1" cx="240" cy="27" fill="black" />
            <path id="circle" d="M 240,20 a 220,220, 0 1,1 -0.0001,0.0000 Z"
            fill="none" stroke="red" stroke-width="0" />
            <path id="inner-circle" d="M 240,40 a 200,200, 0 1,1 -0.0001,0.0000 Z"
            fill="none" stroke="red" stroke-width="0" />
            <text class="ex1" fill="black">
                <!-- this RTL text-along-path is displayed backwards (ie sdrawkcab) in
                Chrome; manual CSS overrides (e.g. unicode-bidi) cause blank/white screen
                -->
                <textPath xlink:href="#circle" method="stretch">...</textPath>
            </text>
            <text class="measurement" fill="grey">
                <textPath xlink:href="#inner-circle" method="stretch">A0 A1 A2 A3 A4 A5 A6 A7 A8 A9 B0 B1 B2 B3 B4 B5 B6 B7 B8 B9 C0 C1 C2 C3 C4 C5 C6 C7 C8 C9 D0 D1 D2 D3 D4 D5 D6 D7 D8 D9 E0 E1 E2 E3 E4 E5 E6 E7 E8 E9 F0 F1 F2 F3 F4 F5 F6 F7 F8 F9 G0 G1 G2 G3 G4 G5 G6 G8 G9</textPath>
            </text>
        </g>
    </g>
</svg> 
```

到目前为止，我能做的最好的事情是通过 CSS 导入字体，这*大致*标准化了浏览器的宽度。

请注意，Chrome 不会读取经过微调的字体大小值（例如，它似乎将 0.87em 舍入到 0.85em），并且似乎具有与 Firefox 不同的文本渲染引擎，即使字体大小是一致的。例如，1em 的字体大小将上面示例中的内部“测量圆圈”渲染为 Firefox 中刻度“F9”中的 F，而 Chrome 几乎呈现到刻度“F4”的开头，这个问题被简化为在字体大小中使用 px 单位时的单个字符宽度差异。

您还会注意到 Chrome 不正确地呈现从右到左 (RTL) 文本，并且手动 CSS 覆盖（使用 'unicode-bidi' 和 'direction' 指令）导致完全失败（根本没有 SVG 呈现）。

不用说——有很多问题。到目前为止，这是一个有趣的实验，但我们将不胜感激任何对标准化的帮助。

就我自己的解决方案而言；我正在考虑使用 LinuxLibertine svg-font 中的字体规范手动指定每个字符的位置，这是找出呈现不一致的根源的一种非常俗气的替代方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:11:18.497

仅依赖 SVG 和 TTF 的问题在于，您将在非 webkit 浏览器中遇到像素完美问题。其中一些甚至根本不会渲染。（愚蠢的 IE7）。虽然它不是 100% 完美，但 Fontsquirrel 的生成器在大多数情况下都能让我使用我的 webfonts。

[http://www.fontsquirrel.com/tools/webfont-generator](http://www.fontsquirrel.com/tools/webfont-generator)

我的经验法则是为特定浏览器使用以下格式。这似乎是仅使用 SVG/TTF 的 2 倍，但实际上并非如此，并且在像素完美方面会为您省去很多麻烦。

**TTF** - 适用于大多数浏览器，但缺乏 IE 和 iOS Safari。
**EOT** - 仅限 IE。
**WOFF** - 压缩的新兴标准。
**SVG** - iPhone/iPad。

这个 CSS 将涵盖一个系列中的所有格式：

```
@font-face {
    font-family: 'Libertine';
    src: url('Libertine-webfont.eot');
    src: url('Libertine-webfont.eot?#iefix') format('embedded-opentype'),
         url('Libertine-webfont.woff') format('woff'),
         url('Libertine-webfont.ttf') format('truetype'),
         url('Libertine-webfont.svg#LibertineRegular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

然后是连接的 HTML：

```
<style type="text/css" media="screen">
    .ex1 {font: 18px/27px 'Libertine', Arial, sans-serif;}
    }
</style> 
```

希望这会有所帮助，或者不只是进一步混淆你。：/我倾向于这样做。

# ruby-on-rails - 如何使用 Rspec 测试使用 Paperclip 的模型是否正在验证上传文件的大小？

> ID：14789060
> 
> 赞同：3
> 
> 时间：2013-02-09T14:20:35.057
> 
> 标签：ruby-on-rails, ruby, rspec, paperclip

该模型：

```
class Attachment < ActiveRecord::Base

  belongs_to :narrative

  attr_accessible :description, :user_id, :narrative_id

  has_attached_file :file

  validates_presence_of :user_id
  validates_presence_of :narrative_id
  validates_attachment :file, :presence => true,
                       :size => {:less_than => 20.megabytes}
end 
```

不起作用的测试：

```
describe Attachment do
  it { should validate_presence_of :file }
  it { should validate_size_of :file } # validate_size_of does not exist
end 
```

我想避免将 20 MB 的文件转储到 repo 中只是为了测试这一点。有没有一种类似于我上面尝试过的方法可以真正起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T14:44:11.767

我做到这一点的最好方法是使用 Paperclip 的内置[shoulda 匹配器](http://rdoc.info/github/thoughtbot/paperclip/Paperclip/Shoulda/Matchers)。该链接上的文档非常好，但以下是文档中您可以使用它做什么的概述：

在 spec_helper.rb 中，您需要使用匹配器：

```
require "paperclip/matchers" 
```

并包含模块：

```
Spec::Runner.configure do |config|
  config.include Paperclip::Shoulda::Matchers
end 
```

验证附件大小的示例：

```
describe User do
  it { should validate_attachment_size(:avatar).
                less_than(2.megabytes) }
end 
```

如果您有兴趣，可以[在 GitHub 上找到匹配器的源代码](https://github.com/thoughtbot/paperclip/tree/master/lib/paperclip/matchers)

# c# - 根据字符串获取类、方法和参数

> ID：14789062
> 
> 赞同：1
> 
> 时间：2013-02-09T14:20:42.773
> 
> 标签：c#

如果可能的话，我如何根据字符串检查一个类是否存在，如果该类确实存在，则获取该对象的新实例。

我这里有这个方法来检查一个对象是否有方法。

```
public static bool HasMethod(object objectToCheck, string methodName)
{
    Type type = objectToCheck.GetType();
    return type.GetMethod(methodName) != null;
} 
```

那么在那之后我怎么能检查一个方法所采用的参数呢？

这一切都可能吗？

* * *

**回答**

获取课程：

```
public T GetInstance<T>(string namespace, string type)
{
    return (T)Activator.CreateInstance(Type.GetType(namespace + "." + type));
} 
```

获取方法：

```
public static bool HasMethod(object objectToCheck, string methodName)
{
    Type type = objectToCheck.GetType();
    return type.GetMethod(methodName) != null;
} 

...

dynamic controller = GetInstance<dynamic>(controllerString);
if (HasMethod(controller, actionString))
{
    controller.GetType().GetMethod(actionString);
} 
```

获取参数

```
MethodInfo mi = type.GetMethod(methodName);
if (mi != null)
{
    ParameterInfo[] parameters = mi.GetParameters();
    // The parameters array will contain a list of all parameters
    // that the method takes along with their type and name:
    foreach (ParameterInfo parameter in parameters)
    {
        string parameterName = parameter.Name;
        Type parameterType = parameter.ParameterType;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:25:48.220

您可以在使用该[`GetParameters`](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.getparameters.aspx)方法检索到的 MethodInfo 实例上使用该`GetMethod`方法。

例如：

```
MethodInfo mi = type.GetMethod(methodName);
if (mi != null)
{
    ParameterInfo[] parameters = mi.GetParameters();
    // The parameters array will contain a list of all parameters
    // that the method takes along with their type and name:
    foreach (ParameterInfo parameter in parameters)
    {
        string parameterName = parameter.Name;
        Type parameterType = parameter.ParameterType;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:38:27.587

看来您已经想出了如何获取方法。使用 MethodInfo.GetParameters 获取参数也很容易。

但是，我在这里猜测您想在调用该方法之前检查它的签名。当方法具有以下签名时，您应该小心方法可能具有可选或通用参数：

```
 // Accepts 'Test(12345);' and implicitly compiles as 'Test<int>(12345)'
    public void Test<T>(T foo) { /* ... */ } 
```

或者

```
 // Accepts signatures for 'Test(string)' and 'Test()' in your code
    public void Test(string foo = "") { /* ... */ } 
```

此外，当您调用方法时，.NET 会处理隐式转换以及协变和继承等事情。例如，如果您使用 byte 参数调用 Foo(int)，.NET 会在调用之前将该字节转换为 int。换句话说，大多数方法签名都接受很多参数类型。

调用方法也可能不像看起来那么容易。使用 GetParameters() 获取 ParameterInfo 对象并检查它们是否设置了“IsOptional”标志。（见下文）

检查签名的最简单方法是使用 MethodInfo.Invoke 简单地调用它。如果您的参数数量与 GetParameters -> 调用中的参数数量相同。否则，检查 IsOptional。如果是，则使用'DefaultValue'检查它是否具有默认值，否则使用类型的默认值（类类型为null，值类型为默认ctor）。

困难的方法是手动进行重载解析。我已经写了很多关于如何在这里实现它的文章：[从重载集中获取最佳匹配重载](https://stackoverflow.com/questions/14315437/get-best-matching-overload-from-set-of-overloads/14336566)

# multi-touch - UIView 子类忽略第二次触摸

> ID：14789066
> 
> 赞同：0
> 
> 时间：2013-02-09T14:21:30.387
> 
> 标签：multi-touch, objective-c++

我正在制作一个 iOS 游戏，并且我编写了一个 UIView 子类，它应该可以捕获触摸事件，并且它可以按预期的方式进行单次触摸。但是，如果我已经用一根手指触摸屏幕，然后用另一根手指在别处触摸它，则不会调用“touchesBegan”进行第二次触摸。

这是该类的实现：（Objective-C++）

```
#import "BATouchInput.h"

#include "BotsApp.h"

@implementation BATouchInput

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    for (UITouch* touch in touches) {
        std::cout << "touch started" << std::endl;
        BotsApp::getSingletonPtr()->touchDown(touch);
    }
    std::cout << "--------------" << std::endl;
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    std::cout << [touches count] << std::endl;
    for (UITouch* touch in touches) {
        BotsApp::getSingletonPtr()->touchMoved(touch);
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    for (UITouch* touch in touches) {
        BotsApp::getSingletonPtr()->touchUp(touch);
    }
}

@end 
```

我正在通过这段代码创建这个类的一个实例：

```
BATouchInput * touchRecieverView = [[BATouchInput alloc] initWithFrame: [[UIScreen mainScreen] applicationFrame]];
        [[[UIApplication sharedApplication] keyWindow] addSubview: touchRecieverView]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:31:26.497

您可能需要将[`multipleTouchEnabled`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/multipleTouchEnabled)视图的属性值设置为`YES`（此属性的默认值为`NO`）。

# iphone - 使 ios 6 应用程序项目与 iOS 5 兼容 - 向后

> ID：14789067
> 
> 赞同：-5
> 
> 时间：2013-02-09T14:21:32.900
> 
> 标签：iphone, ios, xcode, xcode4.2

这个问题适用于带有 Xcode 4.2 的 iOS 5。这就是我为 iOS 开发而运行的。

我从 git hub [InstaOverlay](https://github.com/mmackh/MAImagePickerController-of-InstaPDF)下载了一个示例项目，当我查看它的目标时，它显示“6.0”，所以我将它切换到 5.0 并尝试编译代码。从我的屏幕截图中可以看出，我无法走得太远。吨和吨的错误。

所以我的问题是，代码本身是否存在问题，或者为 iOS 6 制作的项目永远无法在 iOS 5 上运行？我认为用户能够使应用程序向后兼容？

有什么建议么

![在此处输入图像描述](../Images/0ddcaacb760bbc0889a08753ccc6594d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:29:24.520

**一般回答**

是的，应用程序可以向后兼容 iOS5 或更早版本。“可能”是这里的重要问题 -**这样做可能非常耗时**，具体取决于您的应用程序的功能，它使用的 API 等等。另一方面，非常简单的项目可以正常工作，如果他们使用非常标准自 (iOS) 时间开始以来，API 无需太多更改即可使用。

显然，如果您的应用程序仅使用 iOS6 功能，那么您将陷入困境。否则，是的，您可以这样做，但要准备好花时间这样做——不仅要编写/更改代码，还要测试它。

所以就您而言，是的，该项目已“损坏”，我们的意思是不是为旧版本的 iOS 编写的。如果只是像更改项目设置一样简单！

以下是制作向后兼容应用程序的一些策略：

*   **如果 API 上存在变体，并且具有不同兼容性的不同方法，则使用最兼容的变体。**例如，一些`NSFileManager`方法出现在较新版本的 iOS 中，但较旧的变体仍然有效。Apple 倾向于不顾一切地发布使用新代码的源代码 (IME)，而没有任何关于“顺便说一句，这不适用于旧版本的 iOS”，因此需要小心

*   **如果您想让某些功能仅出现在较新的 iOS 版本上，您需要在运行时检查所需的方法/API 是否可用，并且仅在它们可用时使用它们。**在这些情况下，您还需要小心链接您的项目和“弱链接”某些项目。

*   如果真的需要iOS3的兼容性，就不能用ARC；它必须是老式的内存管理。iOS4 支持 ARC，但有一些运行时限制：不支持自动取消引用。

电影播放是更新更好的 API 可用但旧的 API 仍然存在的典型示例。旧版本`MPMoviePlayerController`是 iOS4 之前的版本，然后`MPMoviePlayerViewController`出现在 iOS4 中（注意“视图”这个词——它是一个成熟的`UIViewController`. 通常您想使用后者，但为了 iOS3 兼容性，您会根据运行时检查决定使用前者。

**具体答案**

你的问题`CV_XADD`: 这看起来像是一个预处理器定义，它在`#define`某个地方，但编译器没有拾取它。如需提示，请尝试`CV_XADD`通过搜索来查找 的定义`#define CV_XADD`。如果找不到，请尝试`CV_XADD`在所有结果中寻找 just 并寻找定义。

您是否尝试过在谷歌上搜索“CV_XADD 预期表达式”这一术语？我得到了一些与这个问题有关的命中。

您的项目正在使用 C++，这增加了一些复杂性！

# windows-installer - Windows安装包：msi和exe。有什么区别？

> ID：14789075
> 
> 赞同：0
> 
> 时间：2013-02-09T14:22:22.383
> 
> 标签：windows-installer, visual-studio-setup

在构建 Visual Studio 安装项目时，它会生成两个文件：`[ProgramName].msi`和`setup.exe`. 每个人的目的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:01:47.927

MSI 文件是主包，它包含所有文件、注册表项、自定义操作等...由[Windows Installer 服务 (msiexec.exe)](http://en.wikipedia.org/wiki/Windows_Installer)加载并相应执行。

EXE 文件实际上是一个包装器，旨在为 Windows Installer 不支持的功能提供额外支持。最重要的功能是安装先决条件。但是，还有其他商业设置创作工具在 EXE 中包含更多支持，例如压缩支持以最小化包大小、自定义 UI 主题，或者可能创建单个混合包而不是两个单独的 MSI（x86 和 x64）。

# java - (Java) 屏幕闪烁

> ID：14789082
> 
> 赞同：0
> 
> 时间：2013-02-09T14:23:08.403
> 
> 标签：java, screen, repaint, flicker

我已经开始用 Java 编写一个小而简单的引擎（用于游戏）。当我重新粉刷屏幕时，它有时会闪烁。我查找了这个问题的答案，并建议使用摇摆计时器的答案（这就是我正在做的）。以下是相关的代码（我在一些评论中添加）：

```
public class Game extends JPanel implements ActionListener {
private static final long serialVersionUID = 1L;

private static Window window;
private static ObjectUpdater objects;
private static Timer timer;

private static boolean init = false;

public Game(){
    timer = new Timer(30,this);
    timer.start();
}

public static void main (String[] self){
    new Game();
}

private static void initialize(){
    //Tests
    //Setting up the window
    window = new Window();

    //Setting up the updater
    objects = new ObjectUpdater();

    new Picture(Path.images+Path.img_black,10);
    // These are just some objects for the game...

    Entity r = new Entity(new Picture(Path.images+Path.img_lapras,0));
    r.setVelocity(0.5,0);
    Entity r2 = new Entity(new Picture(Path.images+Path.img_lapras,1));
    Vector i = new Vector(0,0.5);
    r2.setVelocity(i.values()[0],i.values()[1]);
}
// This is where repaint(); is called.
public void actionPerformed(ActionEvent e) {
    setDoubleBuffered(true);
    if (init == false){
        initialize();
        init = true;

    }

    objects.update(); // This updates all the game object's information
    window.update(); // This updates the window itself, it's literally: repaint();

}
} 
```

这是窗口对象的代码，因为这也是发生事情的地方。

```
public class Window extends JFrame{
private static final long serialVersionUID = 1L;

public static int refresh_rate = 25;
public static Picture[] image_list =  new Picture[0]; // All the images I want to render
private static String win_title = "Window"; // The name of the window
private static int[] win_xy = {640,360}; // The size of the window

public Window(){
    //initializes window 
    setTitle(win_title);
    //setUndecorated(true);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setSize(win_xy[0],win_xy[1]);
    setLocationRelativeTo(null); 
    setVisible(true);
    setResizable(false);

}

public static int[] getWinSize(){
    return win_xy;
}

// Here I'm just "painting" everything in the image_list array...
public void paint(Graphics g) {
    super.paint(g);
    Graphics2D g2d = (Graphics2D) g;
    for (Picture i:image_list){
        g2d.drawImage(i.getPic(), i.getXY()[0], i.getXY()[1], null); 
    }
    Toolkit.getDefaultToolkit().sync();
    g.dispose();
}

public static void addPicture(Picture element){// This adds images to the image_list
    Picture[] result = Arrays.copyOf(image_list, image_list.length +1);
    result[image_list.length] = element;
    image_list = result;
    Arrays.sort(image_list);

}

public void update() {
    repaint();

}

} 
```

就是这样……谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T20:29:32.037

顶级包含（例如`JFrame`）不是双缓冲的。这是我们不建议从顶级容器扩展的原因之一。

相反，为您自己创建一个自定义组件（`JPanel`例如）并覆盖它的`paintComponent`方法（不要忘记调用`super.paintComponent`）

查看

*   [图像未加载](https://stackoverflow.com/questions/12642852/the-images-are-not-loading/12648265#12648265)
*   [如何让线条动画更流畅？](https://stackoverflow.com/questions/13540534/how-to-make-line-animation-smoother/13547895#13547895)
*   [Java弹跳球](https://stackoverflow.com/questions/13022754/java-bouncing-ball/13022788#13022788)

对于一些例子

# django - Django - 2app 2 在一个页面中查看 2 个模板

> ID：14789084
> 
> 赞同：0
> 
> 时间：2013-02-09T14:23:31.663
> 
> 标签：django, django-templates, django-views

我正在尝试进入 django dev，但我对此还是个新手……这是我的问题：

我有 ：

*   App1 - 用于处理我的网站发布
*   查看 1
*   模板 1 管理 view1：index.html

*   App2 命名成员 - 用于管理用户

*   查看 2
*   模板 2 管理 view2：login.html

基本上，第一组是我的主页，第二组是用户登录表单。我想将我的登录表单嵌入到站点主页上的右侧菜单中，就像我们在许多站点上看到的那样。

*   View 1 / templates 1 从 base.html 扩展了我的内容块

    ```
    def MainHomePage(request):
    homepage = HomePage.objects.get(pk=1)
    context = {'homepage': homepage}
    return render_to_response('index.html', context, context_instance=RequestContext(request)) 
    ```

*   查看 2 / 模板 2 使用我的登录表单从 base.html 扩展了我的 right_menu

    ```
    def LoginRequest(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect('/profile/')
        if request.method =='POST':
        form =LoginForm(request.POST)
        if form.is_valid():
            username = form.cleaned_data['username']
            password = form.cleaned_data['password']
            member = authenticate(username=username, password=password)
            if member is not None:
                login(request, member)
                return HttpResponseRedirect('/')
            else:
                return render_to_response('login.html', {'form':form}, context_instance=RequestContext(request))
           else:
                return render_to_response('login.html', {'form':form}, context_instance=RequestContext(request))
    else:
        form = LoginForm()
        context = {'form':form}
        return render_to_response('login.html', context, context_instance=RequestContext(request)) 
    ```

我不知道该怎么做！我想也许我应该在 view1 中导入 view2 并返回一个正确的响应，如果它们也应该合并模板呢？看不到它们是如何被 2 个不同的 url 调用的。好吧，我有点迷路了，如果有人能启发我的想法，我会很高兴...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:19:45.300

查看您的登录视图，它似乎没有做任何您需要嵌入`LoginRequest`视图之类的事情。相反，您可以将表单作为上下文传递给主页模板，将其显示在您想要的位置，并将其操作更改`form`为由`LoginRequest`. 这样，`LoginRequest`视图的行为就像从 login.html 登录时一样

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-09T14:52:49.030

您的[模板](https://docs.djangoproject.com/en/dev/ref/templates/#templates)实际上会执行“指向”。例如，用户将登陆 MainHomePage，它基本上是 index.html 模板。在该模板中，您将定义登录表单。Login 表单的操作可以指向 LoginRequest 视图。

我想指出，您不需要单独的应用程序来管理用户。这可以通过[使用/扩展 Django 的管理站点](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#module-django.contrib.admin)来完成。

此外，您应该考虑阅读他们的[教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)，因为它涵盖了您正在尝试做的事情并介绍了大部分核心功能。

希望这可以帮助。

# c# - 如何在c#中将xml绑定到JSTree控件

> ID：14789087
> 
> 赞同：0
> 
> 时间：2013-02-09T14:24:15.383
> 
> 标签：c#, jquery, asp.net, xml

我通过 web 服务检索格式如下的 xml。我们如何将此 xml 与 JSTree 绑定。寻找绑定和捕获节点的OnSelect事件的例子

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfTerm_Child xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
 <Term_Child>
<TermID>2021</TermID>
<Name>A. Geographic locations</Name>
<ParentID>0</ParentID>
</Term_Child>
<Term_Child>
 <TermID>3602</TermID>
<Name>Oceania</Name>
<ParentID>2021</ParentID>
</Term_Child>
<Term_Child>
<TermID>3604</TermID>
<Name>Australasia</Name>
<ParentID>3602</ParentID>
</Term_Child>
<Term_Child>
<TermID>3621</TermID>
<Name>New Zealand</Name>
<ParentID>3604</ParentID>
</Term_Child>
<Term_Child>
<TermID>3619</TermID>
<Name>Pacific Islands</Name>
<ParentID>3604</ParentID>
</Term_Child>
 <Term_Child>
<TermID>3585</TermID>
<Name>Polynesia</Name>
 <ParentID>3619</ParentID>
 </Term_Child>
 </ArraryOfTerm> 
```

# mysql - MySQL 匹配和分组多个术语

> ID：14789088
> 
> 赞同：1
> 
> 时间：2013-02-09T14:24:19.600
> 
> 标签：mysql, match-against

我有可用的数据出现在评论中。这些评论实际上是关于 PHP、Java 等技能的。

现在我想以一种可以找到按技能分组的总记录的方式使用 Match Against。因此，例如，如果我将数据与某些技能进行匹配，则数据应显示为：

```
Skills    Total
..................
Java     10
PHP       5 
```

类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:49:40.450

[http://www.sqlfiddle.com/#!2/fcea4/1](http://www.sqlfiddle.com/#!2/fcea4/1)

```
SELECT skill, sum(comment REGEXP skill)
FROM comments,skills
GROUP BY skill 
```

# c# - 在 for 循环中创建标签数组时出现 NullReferenceException 错误

> ID：14789090
> 
> 赞同：0
> 
> 时间：2013-02-09T14:24:28.400
> 
> 标签：c#, forms, nullreferenceexception, labels

我知道关于这个错误有很多线程，但我真的尽我最大的努力来理解解决方案，但似乎无法让它发挥作用。

我编写了一个简单的测试程序，它给出了错误（下面的代码）。我应该指出，对于实际程序，我想创建大量标签，并且数量在运行时会有所不同，所以我不能只是在代码中手动创建它们。

任何帮助将非常感激。

```
namespace Test
{
    public partial class Form1 : Form
    {

        Label[] label = new Label[3];

        public Form1()
        {
            InitializeComponent();              
        }

        private void button1_Click(object sender, EventArgs e)
        {            
           for (int i = 0; i < 3; i++)
           {
              label[i].Location = new Point(10, 10 + 40*i);
              label[i].Text = "My name is label " +i;
              this.Controls.Add(label[i]);                
           }
           MessageBox.Show("Done");   
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:28:22.293

您创建了一个标签数组，而没有实际创建标签。

将此行添加为 for 循环中的第一行：

```
label[i] = new Label(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:28:54.367

您尚未将数组的任何成员初始化为 a `Label`- 该数组包含空值。

```
 Label[] label = new Label[3];

    public Form1()
    {
        label[0] = new Lablel();
        label[1] = new Lablel();
        label[2] = new Lablel();

        InitializeComponent();              
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T14:30:29.417

您应该从列表中创建每个标签，将行添加到循环的开头：

```
label[i] = new Label(); 
```

# html - 子组合器 (>) css 会影响兄弟元素吗？

> ID：14789094
> 
> 赞同：1
> 
> 时间：2013-02-09T14:25:34.310
> 
> 标签：html, css

下面是我的 HTML

```
<ul>
<li>title1
    <ul>
        <li>subtitle1.1</li>
        <li>subtitle1.2</li>
    </ul>
</li>
<li>title2
    <ul>
        <li>subtitle2.1</li>
        <li>subtitle2.2</li>
    </ul>
</li>
</ul> 
```

这是CSS

```
 ul > li {
            color: red;
        } 
```

我只期待`title1`并且`title2`是红色的。但是所有兄弟元素，即`subtitlle1.1`, `subtitlle1.2`, `subtitlle2.1`,`subtitlle2.2`都变成了红色。

子组合子应该只影响子，但是这里的兄弟姐妹继承了顶级子的财产。您能否详细说明一下现场发生的情况？如果我只希望上面的标题部分为红色，那么 CSS 应该是什么样子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T14:33:58.583

该样式也适用于字幕，不是因为它们在外部列表中，而是因为它们是自己列表的直接子级。

在给出标记且没有其他信息的情况下，没有选择器只能针对第一级列表。

如果您知道列表在另一个元素内，则可以使用直接子组合器来定位外部列表：

```
div > ul > li {
  color: red;
} 
```

您可以覆盖内部列表的样式：

```
ul > li {
  color: red;
}
ul > li > ul> li {
  color: black;
} 
```

如果您可以将 id 或类添加到外部列表，则可以使用它来定位它，并且它不会应用于内部列表，因为它们没有该 id 或类：

```
.myList > li {
  color: red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:59:36.090

## 幕后

这是因为该`color`属性是[默认继承的](http://www.w3.org/TR/CSS21/colors.html#colors)。因此，如果您在顶部元素（例如`<body>`）上定义颜色，它将应用于所有不覆盖此属性的子元素。这对于[CSS 的核心级联机制至关重要](http://www.w3.org/TR/CSS21/cascade.html#value-def-inherit)。

## 解决方案

要解决您的问题，您可以：

### HTML 解决方案：添加更多语义

首先，将您的文本包装到一个带有（也许添加一个类属性）的标签中：

```
<ul>
  <li><span class="term">title1</span>
    ...
  </li>
    ...
</ul> 
```

然后定义颜色：

```
ul > li > span,
ul .term {
  color: red; # only apply to the span
} 
```

*   **pro：**添加语义并更有效地使用 CSS；
*   **缺点：**未排序列表 ( `<ul>`) 的使用并没有真正适应。我会推荐使用[定义列表](http://html5doctor.com/element-index/#dl-element)( `<dl>`)。

### CSS 解决方案：覆盖属性

您可以简单地强制字幕使用您想要的任何颜色：

```
ul > li > ul > li {
  color: black; # back to default document color
} 
```

*   **亲：**仅 CSS ；
*   **缺点：**添加额外的规则，降低可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T14:36:28.467

我会为标题添加一个标签包装器并以这种方式对其进行样式设置：

```
<ul>
<li><span>title1</span>
    <ul>
        <li>subtitle1.1</li>
        <li>subtitle1.2</li>
    </ul>
</li>
<li><span>title2</span>
    <ul>
        <li>subtitle2.1</li>
        <li>subtitle2.2</li>
    </ul>
</li>
</ul> 
```

在这种情况下，您的 CSS 将是：

```
ul > li > span {
    color: red;
} 
```

这样只有 title1 和 title2 会变成红色。

# android - 转换为 Dalvik 格式失败 facebook/AccessToken$SerializationProxyV1

> ID：14789095
> 
> 赞同：3
> 
> 时间：2013-02-09T14:25:34.747
> 
> 标签：android, android-library

这是我的日志：

```
[2013-02-09 19:48:50 - Dex Loader] Unable to execute dex: Multiple dex files define Lcom/facebook/AccessToken$SerializationProxyV1;
[2013-02-09 19:48:50 - MainActivity] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lcom/facebook/AccessToken$SerializationProxyV1; 
```

我试过了

*   清理项目
*   删除 libs 文件夹
*   重启 Eclipse
*   删除 android-support-v4.jar

但他们都没有解决我的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T18:53:11.437

好吧，这取决于您是仅构建 Facebook SDK，还是将其作为库包含在您自己的 Android 项目中（我想是这种情况）。如果您的项目文件夹中有一些 JAR（作为 JAR 添加到项目中），请将它们删除并将它们复制到项目根目录之外的某个位置，然后再次将它们添加为外部 jar。这个问题可能是[重复的](https://stackoverflow.com/questions/2759793/android-getting-error-conversion-to-dalvik-format-failed)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-22T07:23:34.280

以上都不对我有用。我在 libs 和 Android Dependencies 文件夹中有重复的 facebooksdk.jar 文件。

我从 libs 文件夹中删除了 facebooksdk.jar 文件，它起作用了。

# php - 关于 PHP 声明

> ID：14789101
> 
> 赞同：0
> 
> 时间：2013-02-09T14:26:04.260
> 
> 标签：php, if-statement

谁能帮我为这个语句编写代码

```
<?php if(get_post_meta($post->ID, "price", $single = true) != ""){ ?>
<?php echo get_post_meta($post->ID, "price",$single = true); ?>
<?php } ?> 
```

如果在我的自定义字段中为空，我希望语句继续使用此代码

```
<?php $asin = get_post_meta($post->ID, 'asin', true);
echo azon_us_price($asin);
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:29:24.517

我想你想这样做：

```
<?php
if(!empty(get_post_meta($post->ID, "price", $single = true))){ 
  echo get_post_meta($post->ID, "price",$single = true); 
} else {
  $asin = get_post_meta($post->ID, 'asin', true);
  echo azon_us_price($asin);
}
?> 
```

# java - 如何使这个java动画流畅？

> ID：14789107
> 
> 赞同：0
> 
> 时间：2013-02-09T14:26:28.007
> 
> 标签：java, animation, timer

我需要用我的框架和它的内部面板进行动画运动。

当用户点击一个特定的内部面板（一个在框架内的面板）时，另一个面板被添加到框架中`contentPane`，然后框架和新面板的宽度都会增加，但我总是希望我的框架位于屏幕中间。我以这种方式解决了动画：

```
Container container=getContentPane();
int i=0;
ActionListener run = new ActionListener()
{
    @Override
    public void actionPerformed(ActionEvent e)
    {

        frame.setSize(new Dimension(frame.getSize().width + 20, 550));
        frame.setLocationRelativeTo(null);
     //newp is the panel which is just added
        newp.setPreferredSize(new Dimension(newp.getSize().width + 20, 550));
        revalidate();
        repaint();
        container.revalidate();
        container.repaint();
        if (i > 20)
        {
            previousPanel = newp;
            i = 0;
            setInnerPanel(); // add another panel to added panel
            container.revalidate();
            container.repaint();
            timer.stop();
        }
        i++;

    }
};
timer = new Timer(15, run);
timer.setRepeats(true);
timer.start(); 
```

现在有一个重要的问题。动画不流畅。我将计时器延迟更改为 20 或更多，但没有出现良好的流畅动画...如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T09:42:04.847

快速示例，持续时间可变...

```
public class TestAnimatedWindow {

    public static void main(String[] args) {
        new TestAnimatedWindow();
    }

    public TestAnimatedWindow() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new AnimatedPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class AnimatedPane extends JPanel {

        private GridBagConstraints gbc = new GridBagConstraints();
        private Timer anim;
        private long startTime;
        private int duration = 1000;
        private Rectangle startBounds, targetBounds;
        private JPanel top;
        private JPanel bottom;
        private JSlider durationSlider;
        private JLabel durationLabel;
        private JPanel content;

        public AnimatedPane() {
            top = new JPanel();
            bottom = new JPanel(new GridBagLayout());
            content = new JPanel(new GridBagLayout());
            durationLabel = new JLabel("1000");
            durationSlider = new JSlider(125, 5000);
            durationSlider.setMajorTickSpacing(1000);
            durationSlider.setMinorTickSpacing(500);
            durationSlider.setPaintTicks(true);
            durationSlider.setValue(1000);

            GridBagConstraints gbcBottom = new GridBagConstraints();
            gbcBottom.weightx = 1;
            gbcBottom.fill = GridBagConstraints.HORIZONTAL;
            bottom.add(durationSlider, gbcBottom);
            gbcBottom.weightx = 0;
            gbcBottom.fill = GridBagConstraints.NONE;
            bottom.add(durationLabel, gbcBottom);

            durationSlider.addChangeListener(new ChangeListener() {
                @Override
                public void stateChanged(ChangeEvent e) {
                    int value = durationSlider.getValue();
                    durationLabel.setText(Integer.toString(value));
                }

            });

            setLayout(new BorderLayout());
            gbc.gridwidth = GridBagConstraints.REMAINDER;
            JButton grow = new JButton("Grow");
            top.add(grow, gbc);

            add(top, BorderLayout.NORTH);
            add(content);
            add(bottom, BorderLayout.SOUTH);

            grow.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    // Stop any animation...
                    anim.stop();
                    // Get the window...
                    Window window = SwingUtilities.windowForComponent(AnimatedPane.this);
                    // What's the windows current bounds...
                    startBounds = window.getBounds();

                    // Add a new component...
                    JPanel panel = new JPanel(new GridBagLayout());
                    panel.add(new JLabel("Boo"));
                    panel.setBorder(new LineBorder(Color.RED));
                    content.add(panel, gbc);

                    // Calculate the bounds we want the window to get to 
                    targetBounds = new Rectangle();
                    // Add in the insets of the windows borders
                    Insets insets = window.getInsets();
                    // Get out preferred size...
                    Dimension size = getPreferredSize();
                    // Add in the border size...
                    size.width += insets.left + insets.right;
                    size.height += insets.top + insets.bottom;
                    targetBounds.setSize(size);

                    // Calculate the viewable position...
                    // Get the viewable screen bounds...
                    Rectangle viewBounds = getScreenViewableBounds();
                    Point p = new Point();
                    // Calculate the center of the screen...
                    p.x = ((viewBounds.width - size.width) / 2) + viewBounds.x;
                    p.y = ((viewBounds.height - size.height) / 2) + viewBounds.y;
                    targetBounds.setLocation(p);

                    // Divisibale by 2, stop the animation jitters
                    if (targetBounds.width % 2 != 0) {
                        targetBounds.width++;
                    }
                    if (targetBounds.height % 2 != 0) {
                        targetBounds.height++;
                    }
                    // Get the time that the animation started...
                    startTime = System.currentTimeMillis();
                    // Get the duration of the animation...
                    duration = durationSlider.getValue();
                    // Start animation...
                    anim.restart();
                }

            });

            // Timer set to about 25 fps...
            anim = new Timer(40, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    // Get the current timer
                    long now = System.currentTimeMillis();
                    // Calculate the difference between now and the start of the animation...
                    long diff = now - startTime;
                    // Get out window...
                    Window window = SwingUtilities.getWindowAncestor(AnimatedPane.this);
                    // The bounds of the window to use
                    Rectangle bounds = targetBounds;
                    // If we've not reached the end of animation cycle...
                    if (diff < duration) {
                        // Calculate the progress of the aniamtion...
                        // That is, the amount of time the animation has been running for
                        // and the duration
                        double progress = (double) diff / (double) duration;
                        // Calculate the bounds over the progress range...
                        bounds = calculateProgress(startBounds, targetBounds, progress);
                        // Divisiable by 2..
                        if (bounds.width % 2 != 0) {
                            bounds.width++;
                        }
                        if (bounds.height % 2 != 0) {
                            bounds.height++;
                        }
                    } else {
                        // Stop the timer..
                        ((Timer) e.getSource()).stop();
                    }
                    // Update the windows bounds
                    window.setBounds(bounds);
                }
            });
            anim.setRepeats(true);
            anim.setCoalesce(true);
            anim.setInitialDelay(0);
        }
    }

    public static Rectangle calculateProgress(Rectangle startBounds, Rectangle targetBounds, double progress) {
        Rectangle bounds = new Rectangle();
        if (startBounds != null && targetBounds != null) {
            bounds.setLocation(calculateProgress(startBounds.getLocation(), targetBounds.getLocation(), progress));
            bounds.setSize(calculateProgress(startBounds.getSize(), targetBounds.getSize(), progress));
        }
        return bounds;
    }

    public static Dimension calculateProgress(Dimension startSize, Dimension targetSize, double progress) {
        Dimension size = new Dimension();
        if (startSize != null && targetSize != null) {
            size.width = calculateProgress(startSize.width, targetSize.width, progress);
            size.height = calculateProgress(startSize.height, targetSize.height, progress);
        }
        return size;
    }

    public static Point calculateProgress(Point startPoint, Point targetPoint, double progress) {
        Point point = new Point();
        if (startPoint != null && targetPoint != null) {
            point.x = calculateProgress(startPoint.x, targetPoint.x, progress);
            point.y = calculateProgress(startPoint.y, targetPoint.y, progress);
        }
        return point;
    }

    public static int calculateProgress(int startValue, int endValue, double fraction) {
        int value = 0;
        int distance = endValue - startValue;
        value = (int) ((float) distance * fraction);
        value += startValue;
        return value;
    }

    public static Rectangle getScreenViewableBounds() {
        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice gd = ge.getDefaultScreenDevice();
        return getScreenViewableBounds(gd);
    }

    public static Rectangle getScreenViewableBounds(GraphicsDevice gd) {
        Rectangle bounds = new Rectangle(0, 0, 0, 0);
        if (gd != null) {
            GraphicsConfiguration gc = gd.getDefaultConfiguration();
            bounds = gc.getBounds();
            Insets insets = Toolkit.getDefaultToolkit().getScreenInsets(gc);

            bounds.x += insets.left;
            bounds.y += insets.top;
            bounds.width -= (insets.left + insets.right);
            bounds.height -= (insets.top + insets.bottom);
        }
        return bounds;
    }
} 
```

# php - 从 Twitter 搜索 API 重写日期

> ID：14789109
> 
> 赞同：0
> 
> 时间：2013-02-09T14:26:36.490
> 
> 标签：php, twitter, date-format

我目前正在根据某个搜索创建一个 PHP 函数来检索 Twitter 提要。

我对 json 没有任何困难来获得我想要的一切并将其转换为 PHP。

我只有一个问题，就是日期格式。当我得到它时，它是这样的：

```
Sat, 09 Feb 2013 14:08:27 +0000 
```

有人知道哦，我怎么能把它变成这样：2013 年 2 月 9 日，14:08

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:31:53.027

将日期输入其中之一`strtotime`，这将为您提供随后可以与该`date`方法一起使用的东西。

```
$formattedDate = date('d M Y, H:i', strtotime(yourdate)); 
```

或者，或者，采用 OOP 方式并使用`DateTime`对象，然后使用`DateTime::format`

```
$dt = new DateTime(yourdate);
$formattedDate = $dt->format('d M Y, H:i'); 
```

# asp.net-mvc - 为什么身份验证 URL 未正确呈现

> ID：14789111
> 
> 赞同：0
> 
> 时间：2013-02-09T14:26:53.793
> 
> 标签：asp.net-mvc, web-config, forms-authentication, webforms

我的代码： `<authentication mode="Forms"> <forms loginUrl="~/CRMLogin/LogOn" timeout="2880"/> </authentication>`

我要这个 ： `http://localhost:13664/CRMLogin/LogOn?ReturnUrl=%2fCRM%2fAddNewCRM`

但我得到了这个： `http://localhost:12340/Account/Login?ReturnUrl=%2fCRM%2fAddNewCRM`

我已经写了代码 loginUrl="~/CRMLogin/LogOn" 以及为什么我得到这个帐户/登录。我不知道。我在另一个项目中尝试过同样的方法，但在那里工作正常。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:34:04.557

尝试在您的 中添加以下密钥`<appSettings>`：

```
<appSettings>
    <add key="loginUrl" value="~/CRMLogin/LogOn" />
    ...
</appSettings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T23:04:57.267

尝试遵循[此](https://stackoverflow.com/questions/5009565/asp-net-mvc3-and-windows-auth-on-iis-keeps-redirecting-to-account-login)解决方案，它应该可以防止自动重定向到帐户控制器

# vb.net - 控制数组 vb.net

> ID：14789112
> 
> 赞同：0
> 
> 时间：2013-02-09T14:27:21.077
> 
> 标签：vb.net

我试图在 VB.net 中为购物系统编写一个程序。它将读取数据库并填充表单上的项目。该应用程序在可滚动面板内的标签中显示产品名称等信息。我在运行时创建对象并分配诸如文本之类的值。我正在为代码使用循环。

如果我使用的是 vb 6，我将有一个控制数组，并使用索引和我的计数器来显示数据。由于我在 vb.net 中这样做，我无法做到这一点.. 任何解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T15:09:48.947

VB.NET 不支持控件数组，这与 VB6 的意义相同。不过，你可以做类似的事情。例如，如果你想用相同的方法处理来自多个控件的事件，你可以这样做：

```
Private Sub MyClickHandler(sender As Object, e As EventArgs) Handles _
    Button1.Click, _
    Button2.Click, _
    Button3.Click

    Dim buttonThatWasClicked As Button = CType(sender, Button)
    ' Do something...
End Sub 
```

如果你想创建一个可以循环的控件数组，你可以这样做，如下所示：

```
Dim myTextBoxes() As TextBox = New TextBox() { TextBox1, TextBox2, TextBox3 }
For i As Integer = 0 to myTextBoxes.Length - 1
    myTextBoxes(i).Text = ...
Next 
```

或者，如果您一致地命名控件，则可以在表单`Controls`集合中按名称找到它们。例如，如果您有三个名为`TextBox1`、`TextBox2`和的文本框`TextBox3`，您可以像这样循环它们：

```
For i As Integer = 1 to 3
    Dim t As TextBox = CType(Me.Controls("TextBox" & i.ToString()), TextBox)
    t.Text = ...
Next 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T14:32:29.973

VB.NET 本身没有控件数组。

但是，您*可以*创建一个控件数组并将控件分配给数组的每个元素，尽管您也可以使用`List(Of Control)`.

这将允许您遍历集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T15:02:47.063

VB.NET 中没有 Control 数组。但是您可以遍历[Panel.Controls](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controls.aspx)集合。所有控件都在该集合中（如果它们都在同一个面板中）。

```
 For i = 0 To Panel1.Controls.Count - 1

        Dim control = Panel1.Controls(i)

        'Do something with control..

    Next 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T21:18:00.487

首先，您为什么不能为此使用网格？- 这将是显而易见的解决方案（因为它在 VB6 中也是如此）。

预计到达时间。. .但如果您必须，此代码段将添加一组标签到您的表单。您将需要对此进行修改，例如将 for next 循环替换为 for each r as mydataset.mytabledatarow in mydataset.mydatable 等

```
 For i = 1 To 10
        Dim l As New Label
        l.Location = New System.Drawing.Point With {.x = 10, .y = i * 30}
        Me.Controls.Add(l)
        l.Text = "test " & i.ToString
   Next 
```

# c++ - 具有有效期的许可系统

> ID：14789114
> 
> 赞同：3
> 
> 时间：2013-02-09T14:27:38.067
> 
> 标签：c++, encryption, licensing, crypto++

我想根据[这篇文章](http://www.codeproject.com/articles/99499/implementation-of-the-licensing-system-for-a-softw)实现一个简单的许可系统。

一切正常。但现在我想添加一个到期日期，我不知道如何。

有人可以解释我如何添加到期日期吗？确切地知道如何实现并不重要，但我需要了解它背后的算法:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T15:05:06.617

最有用的方法是让服务器检查密钥是否仍然有效。这使得它很难伪造。

但是，如果您不想（出于某种原因）使用“在线”技术，那么您需要将到期日期存储在客户端使用的数据中的某个位置。它可以加密，但您的软件必须包含解密密钥。因为在某些时候，您的应用程序必须将当前日期与到期日期进行比较。

正如其他人所说，花费大量精力来使其难以破解很容易，但迟早会归结为一些简单的比较“它是否过时？”，并且该代码总是可以“坏了”通过更换`if (!in_date) exit_with_message("License expired...");`ith `if (false) ...`。所以，除非你在 100 多个不同的地方做那种事情，并且让代码在每个地方看起来都非常不同 [不要调用相同的函数，不要使用相同的消息，不要使用相同的计算，不要使用相同的结果等]

我想使用我们在家用机器上使用的编译器[在家中做一些与工作相关的项目！]。它内置了“演示许可证”，因此您可以尝试一下，但是在 10000 行源代码之后就停止了。所以我在二进制文件中查找了所有出现的 10000 。我认为有三个地方包含 10000。我更改了一个，尝试编译超过 10000 行的测试样本，但它仍然失败 - 将其改回并更改下一个：哇，它工作了......现在， coder 本来可以让它变得更加困难，但是如果我足够感兴趣，我相信我也可以解决这个问题。这比获得第二个许可证、在我的家用机器上安装许可证服务器等要容易得多。

还要记住，大多数破坏这种东西的人不是为了钱，而是为了挑战。如果很难，那只是更大的动力！

编辑：

我会做这样的事情：

1）创建一个license.dat，其中包含：

*   某种许可证号。
*   到期日期（有点加密）
*   上述两个组件的加密哈希）

2) 加载软件时[或在您的软件中定期]，加载 license.dat。

3) 验证许可证文件的哈希。

4) 检查当前日期是否大于到期日期。

5）如果检查一切正常，继续，否则退出一些相关消息。

我无法真正建议您如何存储/加密日期。一个选项是一个 64 位整数，该整数已根据 a `time_t`（以秒为单位的时间）进行了适当的“加扰”。加密可能更像是“不要让它如此明显地表明它是时间戳”的情况 - 但哈希实际上是保护您的时间戳的原因。

# php - 使php时间，在今天的时间加一天

> ID：14789117
> 
> 赞同：0
> 
> 时间：2013-02-09T14:28:14.430
> 
> 标签：php, sql

我正在创建一个存储用户详细信息的应用程序。其中一个字段是创建时间和用户希望其帐户处于活动状态的天数。我`date('c')`用来将时间存储在`created`表字段中。现在，如果用户选择他希望他的帐户仅活动一天，我如何将这一天添加到当前`date('c')`并将其存储到我的下一个表字段中`valid_till`。

后来我打算检查当前`date('c')`是否在`created`and`valid_tll`字段之间，然后用户帐户处于活动状态，否则该帐户被删除。

我想使用 sql 触发器来删除帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:30:15.690

您可以使用 PHP 的[strtotime()](http://php.net/strtotime)：

```
$valid_till = date('c', strtotime('+1 day')); 
```

[您可以在 PHP 手册的Supported Date and Time Formats](http://www.php.net/datetime.formats.php)部分阅读有关可能格式的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:34:48.330

为什么不使用 SQL，根据您使用的引擎，您可以使用 create= NOW()、expires NOW() + 间隔 number_of_days 之类的东西，sql 引擎为您处理日期，您无需费心创建php时代并与他们一起工作..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T14:53:32.680

这是一个基于 SQL 的解决方案。您可以将其转换为更新或插入。

```
SELECT
    `created`,
    CONCAT(
        DATE_FORMAT(
            DATE_ADD(SUBSTRING(`created`,1,10), INTERVAL 1 DAY), '%Y-%m-%d'
        ),
        RIGHT(`created`,15)
    ) AS 'valid_till'
FROM `some_table` 
```

但我建议使用 SQL`UTC_TIMESTAMP()`而不是 PHP 日期函数，并使用`TIMESTAMP`数据类型而不是a 的行，`(VAR)CHAR`以便您在 SQL 端进行更轻松的计算。

# mysql - 带有连接的 mySQL 表查询

> ID：14789121
> 
> 赞同：1
> 
> 时间：2013-02-09T14:29:14.133
> 
> 标签：mysql, sql, select, join

我有四个表如下：

**1\. wmu_kpi_cateogries：**（*KPI 类别表*）

*   类别ID
*   类别标题
*   已验证

> 数据：包含 5 个 KPI 类别

**2\. wmu_kpi_subcategories：（**带有*KPI 子类别的表*）

*   子类别_id
*   子类别标题
*   类别ID
*   已验证

> 数据：对于 category_id 为 1,2 和 3 的 KPI 类别包含 4 个 KPI 子类别。具有 4 和 5 的 KPI 类别分别具有 3 和 6 个子类别。

**3\. wmu_designations**（*公司名称表*）

*   designation_id
*   designation_title
*   section_id

> 数据：包含10个名称

**4\. wmu_designation_to_kpis**（*将 KPI 值应用于每个指定时填写的表格*）

*   empkpi_id
*   designation_id
*   类别ID
*   subcategory_id
*   目标价值

> 数据：表格在将kpi类别和子类别值分别分配给每个名称时填写的表格。

如何编写一个查询来显示每个名称的每个类别和子类别的名称及其值？

每个表的样本数据

“category_id” “category_title” “category_description” “isvalid” “category_year” “1” “财务” “” “1” “2013”​​ “2” “增长” “” “1” “2013”​​ “3” “风险” “ ""1""2013""4""服务质量"""1""2013""5""人""""1""2013"

* * *

“subcategory_id” “subcategory_title” “subcategory_description” “category_id” “isvalid” “1” “AM：预付费用（SR）” “0” “1” “1” “2” “AM：预付费用团队目标成就” “0”“1”“1”“3”“经纪：净佣金贡献（RC 目标的 50%）（%）”“0”“1”“1”“4”“经纪：净佣金贡献团队目标成就““0”“1”“1”“5”“IB：管理费贡献（％）”“0”“1”“1”“6”“AM：净销售比率（SR）=订阅/赎回”“ 0" "2" "1" "7"“上午：已完成交易 (#)= 新订阅数”“0”“2”“1”“8”“经纪业务：客户群增量：新客户 + 重新激活客户 (#)”“0”“2”“1 " "9" "上午 + 经纪：新 HNW 客户保留新 HNW 客户数（余额 > 2M）/丢失/转移 HNW 客户数（余额 = 0）" "0" "2" "1" "10" " AM + Brokerage：RB 贡献：成功交易/与 RB 联合访问的次数“0”“2”“1”“11”“新细分客户（＃）1 in +100 M（每地区半年）3 in 20-100 M（每个区域半年一次） 5 in 2-20 M（每个区域半年一次） 总计 = 每个区域 18 个，总共 54 个""0""2""1""12"“合规违规 (#)” “0” “3” “1” “13” “高风险逾期审计例外情况 (#)” “0” “3” “1” “14” “对投资中心的高优先级质量评论(#)" "0" "4" "1" "15" "WM 相关投诉减少 (%)" "0" "4" "1" "16" "高净值客户来电报告（余额 >=2 M ) (#) 2 次访问客户 +100 M（每年每个 IA/IO） 2 次访问客户 20-100 M（每年每个 IA/IO） 1 次访问客户 2-20 M（每年每个 IA/IO）" " 0" "4" "1" "17" "不同客户的访问次数（每个 IA/IO 每天 2 次）" "0" "4" "1" "18"“高净值客户数量（余额 >=2 M）/IA/IO 数量”“0”“5”“1”“19”“IA 和 IO 员工数量/投资中心数量”“0”“5” "0" "20" "中心经理、公民社会组织和经纪人员工的数量/投资中心的数量" "0" "5" "1" "21" "按地区/地区访问的员工会议 2 每年 (#)" "0 ” “5” “1” “22” “与不同的 IA/IO 联合访问（每周 3 次）（#）” “0” “5” “1” “23” “访问不同中心（每周 3 次）（ #)" "0" "5" "1" "24" "针对计划的训练 (%)" "0" "5" "1" "25"“领导能力（#）”“0”“5”“1”

* * *

“designation_id” “designation_title” “designation_description” “section_id” “isvalid” “issales” “1” “财富管理负责人” “” “1” “1” “1” “2” “顾问负责人” “” “1” “ 1” “1” “3” “区域顾问经理” “” “1” “1” “1” “4” “IA/IO” “” “1” “1” “1” “5” “中心负责人” “”“1”“1”“1”“6”“中心区域经理”“”“1”“1”“1”“7”“中心经理”“”“1”“1”“1” “8” “CSO” “” “1” “1” “1” “9” “经纪人” “” “1” “1” “1”

* * *

“empkpi_id” “type_id” “employee_id” “designation_id” “category_id” “subcategory_id” “target_value” “kpi_year” “1” “1” “0” “1” “1” “0” “25” “2013”​​ “2 ""1""0""1""1""0""50""2013""3""1""0""1""1""0""0""2013""4"" 1” “0” “1” “1” “0” “40” “2013”​​ “5” “1” “0” “1” “1” “0” “0” “2013”​​ “6” “1” “0” “1” “1”“0”“10”“2013”​​“7”“1”“0”“1”“0”“0”“0”“2013”​​“8”“1”“0”“1”“0”“0 ""0""2013""9""1""0""1""2""0""25""2013""10""1""0""1""2""0"" 20”“2013”​​“11”“1”“0”“1”“2”“0”“20”“2013”​​“12”“1”“0”“1”“2”“0”“20” “2013”​​ “13” “1” “0” “1” “2” “0”“20” “2013”​​ “14” “1” “0” “1” “2” “0” “20” “2013”​​ “15” “1” “0” “1” “2” “0” “0” ""2013""16""1""0""1""0""0""0""2013""17""1""0""1""0""0""0"" 2013”​​ “18” “1” “0” “1” “3” “0” “15” “2013”​​ “19” “1” “0” “1” “3” “0” “50” “2013” “20” “1” “0” “1” “3” “0” “50”“2013”​​“21”“1”“0”“1”“0”“0”“0”“2013”​​“22”“1”“0”“1”“0”“0”“0” “2013”​​ “23” “1” “0” “1” “4” “0” “20” “2013”​​ “24” “1” “0” “1” “4” “0” “50” “2013” ““25”“1”“0”“1”“4”“0”“50”“2013”​​“26”“1”“0”“1”“4”“0”“0”“2013”​​“ 27” “1” “0” “1” “4” “0” “0”“2013”​​“28”“1”“0”“1”“0”“0”“0”“2013”​​“29”“1”“0”“1”“0”“0”“0”“2013 ““30”“1”“0”“1”“5”“0”“15”“2013”​​“31”“1”“0”“1”“5”“0”“20”“2013”​​“ 32” “1” “0” “1” “5” “0” “20” “2013”​​ “33” “1” “0” “1” “5” “0” “20” “2013”​​ “34” “1” “0” “1” “5” “0” “0” “2013”​​ “35” “1” “0” “1” “5” “0” “0” “2013”​​ “36” “1” “0” “1” “5” “0” “0” “2013” “37” “1” “0” “1” “5” “0” “20” “2013”​​ “38” “1” “0” “1” “5” “0” “20” “2013”​​ “39” ““1”“0”“1”“0”“0”“0”“2013”​​“40”“1”“0”“1”“0”“0”“0”“2013”“36” “1” “0” “1” “5” “0” “0” “2013”​​ “37” “1” “0” “1” “5” “0” “20” “2013”​​ “38” ""1""0""1""5""0""20""2013""39""1""0""1""0""0""0""2013""40"" 1” “0” “1” “0” “0” “0” “2013”“36” “1” “0” “1” “5” “0” “0” “2013”​​ “37” “1” “0” “1” “5” “0” “20” “2013”​​ “38” ""1""0""1""5""0""20""2013""39""1""0""1""0""0""0""2013""40"" 1” “0” “1” “0” “0” “0” “2013”“1”“0”“1”“5”“0”“20”“2013”​​“39”“1”“0”“1”“0”“0”“0”“2013”​​“40”“1 ""0""1""0""0""0""2013"“1”“0”“1”“5”“0”“20”“2013”​​“39”“1”“0”“1”“0”“0”“0”“2013”​​“40”“1 ""0""1""0""0""0""2013"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:33:10.410

假设表上的所有字段`wmu_designation_to_kpis`都是*NON-NULLABLE*，`INNER JOIN`每个表都可以。但是，如果某些字段为*NULLABLE*，请更改`INNER JOIN`为`LEFT JOIN`.

```
SELECT  a.empkpi_id,
        b.designation_title,
        c.category_title,
        d.Subcategory_title,
        a.target_value
FROM    wmu_designation_to_kpis a
        INNER JOIN wmu_designations b
            ON a.designation_id = b.designation_id
        INNER JOIN wmu_kpi_cateogries c
            ON a.category_id = c.category_id
        INNER JOIN wmu_kpi_subcategories d
            ON a.subcategory_id = d.subcategory_id 
```

要全面了解联接，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# android - HTC 感觉的布局

> ID：14789127
> 
> 赞同：1
> 
> 时间：2013-02-09T14:29:31.767
> 
> 标签：android, layout, android-relativelayout

我正在尝试创建支持所有屏幕的布局

所以，我添加了布局文件夹，如

布局小

布局-大

布局-xlarge

布局-w600dp

我把它们都编辑成合适的

但是当我在 HTC Sensation 2.1 中运行应用程序时，它们出现的位置不正确

这是布局的代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/mainlayout"
tools:context=".SebhaActivity"
android:background="#4b6702"
 >

<ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/sebha_bg"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:scaleType="fitCenter" />

<TextView
    android:id="@+id/zakr"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="58dp"
    android:gravity="center"
    android:text="@string/first_zekr"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#FFFFFF"
    android:textSize="25dp" />

<Button
    android:id="@+id/azkar"
    android:layout_width="100dp"
    android:layout_height="40dp"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:text="@string/Azkar" />

<Button
    android:id="@+id/karaza"
    android:layout_width="135dp"
    android:layout_height="135dp"
    android:layout_above="@+id/zakr"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="74dp"
    android:background="@drawable/button_green"
    android:text="0"
    android:textColor="#FFFFFF"
    android:textSize="38dp" 
    android:scaleType="fitCenter" />

</RelativeLayout> 
```

模拟器将其显示为我想要的..

![模拟器](../Images/b542c51d57b974865c605c046b06fd6c.png)

但我的手机显示如下..

![宏达电](../Images/5a3a31c7d32ba0a5a5230e3c30eb00f5.png)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:19:53.357

如果您希望子视图显示在 RelativeLayout 中的另一个子视图下方，则应使用特定约束来实现该效果。所以如果你有一个 id 为 first_element 并且想要低于它的东西，你会这样做：
android:layout_below="@id/first_element"

如果你想要一个元素沿着底部你可以这样做：
android:id="@+id/bottom_element"
android:layout_alignParentBottom="true"

如果你想要一个上面的元素：
android:layout_above="@id/bottom_element"

现在，您将一件事居中，但您将其他事情设置为具有一定的底部边距和大小以及类似的东西。但是当屏幕大小发生变化时，您的元素不再像在不同大小的屏幕上那样排列。解决方案是使用明确指定您希望将事物相对放置的约束。

你可以在这里看到一个教程：http:
[//developer.android.com/guide/topics/ui/layout/relative.html](http://developer.android.com/guide/topics/ui/layout/relative.html)

# python - App Engine 搜索表达式中的“计数”函数有什么作用？

> ID：14789128
> 
> 赞同：0
> 
> 时间：2013-02-09T14:29:39.347
> 
> 标签：python, api, google-app-engine, search

在 SortExpressions 和 FieldExpressions 中。此处记录了可在这些表达式中使用的函数之一`count(field)`：[https](https://developers.google.com/appengine/docs/python/search/overview#Expressions) ://developers.google.com/appengine/docs/python/search/overview#Expressions ？

它说它会查找 certin 字段的值的数量，但这是否意味着您可以分配字段名称列表，或者多次使用相同的字段名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:33:24.347

> 这是否意味着您可以分配字段名称列表，或多次使用相同的字段名称？

两者都没有的意思。它返回查询中匹配记录的总数。

像`COUNT(*)`在[SQL 查询](http://www.w3schools.com/sql/sql_func_count.asp)中一样使用它。

# php - 在后台php ffmpeg中转换视频？

> ID：14789136
> 
> 赞同：0
> 
> 时间：2013-02-09T14:30:31.257
> 
> 标签：php, apache, debian, exec

我想用 exec()、FFMPEG php 转换视频。我想在后台运行脚本。我怎样才能做到这一点？

```
/*** convert video to flash ***/ 

$v = date('H-i-s');

//   exec("ffmpeg -i uploaded_files/770530705510e88ec723a3-20130111_1221_43.avi -ar 22050 -ab 32 -f flv -s 320x240 flash/".microtime()."video.flv 1> flash/".$v."_block.txt 2>&1");

$cmd = 'ffmpeg -i uploaded_files/770530705510e88ec723a3-20130111_1221_43.avi -ar 22050 -ab 32 -f flv -s 320x240 flash/'.microtime().'.flv';

$outputfile = $v.'.txt.';
$pidfile = $v.'_id.txt.';

      exec(sprintf("%s > %s 2>&1 & echo $! >> %s", $cmd, $outputfile, $pidfile)); 
```

这是我的代码，但不要做任何事情。我想用 php 运行脚本，但我不想等待 http 加载时间直到脚本完成......

或者我如何使用 exec() 运行 something.php；? 如果我可以运行 php，那我就很容易做出我需要的一切。(linux debian, apache2, php5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:35:03.707

最好的方法是在队列中添加一个作业，让服务器以异步方式处理 ffmpeg 转换。

用户必须手动重新检查服务器是否已经完成工作。

你必须做这样的事情：

1.  创建队列数据库表。
2.  如果应该完成新的 ffmpeg 转换，请将作业添加到队列表。
3.  在服务器上添加一个 cronjob，它会自动查找新作业并执行您的 ffmpeg 转换。[更多细节在这里。](http://www.thegeekstuff.com/2011/07/php-cron-job/)
4.  当 cronjob 完成转换后，将作业标记为已完成，删除它，或者其他什么。

# iphone - 仅在 iPad（模拟器或设备）上崩溃 - [__NSArrayM insertObject:atIndex:]

> ID：14789138
> 
> 赞同：0
> 
> 时间：2013-02-09T14:31:11.593
> 
> 标签：iphone, ios, ipad

我尝试在 iPad（设备和模拟器）上测试 iPhone（非通用）应用程序，但出现此错误：

```
2013-02-09 15:25:23.907 iFormularioNew_Free[5160:c07] CRASH: *** -[__NSArrayM insertObject:atIndex:]: object cannot be nil
2013-02-09 15:25:23.910 iFormularioNew_Free[5160:c07] Stack Trace: (
    0   CoreFoundation                      0x0204d02e __exceptionPreprocess + 206
    1   libobjc.A.dylib                     0x0151ee7e objc_exception_throw + 44
    2   CoreFoundation                      0x02000b6a -[__NSArrayM insertObject:atIndex:] + 314
    3   CoreFoundation                      0x02000a20 -[__NSArrayM addObject:] + 64
    4   UIKit                               0x00545894 -[UIViewController _addChildViewController:performHierarchyCheck:notifyWillMove:] + 344
    5   UIKit                               0x00553b8c -[UIViewController(UIContainerViewControllerProtectedMethods) addChildViewController:] + 68
    6   iFormularioNew_Free                 0x0003a27c -[BannerViewController loadView] + 348
    7   UIKit                               0x00543ff8 -[UIViewController loadViewIfRequired] + 73
    8   UIKit                               0x00544232 -[UIViewController view] + 33
    9   iFormularioNew_Free                 0x0003aa81 __63-[BannerViewController bannerView:didFailToReceiveAdWithError:]_block_invoke + 49
    10  UIKit                               0x004ae067 +[UIView(UIViewAnimationWithBlocks) _setupAnimationWithDuration:delay:view:options:animations:start:completion:] + 506
    11  UIKit                               0x004ae276 +[UIView(UIViewAnimationWithBlocks) animateWithDuration:animations:] + 99
    12  iFormularioNew_Free                 0x0003a9fb -[BannerViewController bannerView:didFailToReceiveAdWithError:] + 283
    13  iAd                                 0x00072d23 -[ADBannerView _sanitizeAndForwardErrorToDelegate:] + 254
    14  iAd                                 0x00072991 __28-[ADBannerView setDelegate:]_block_invoke_0 + 92
    15  iAd                                 0x00072916 -[ADBannerView setDelegate:] + 266
    16  iFormularioNew_Free                 0x0003a0ae -[BannerViewController initWithContentViewController:] + 382
    17  iFormularioNew_Free                 0x0000336e -[AppDelegate application:didFinishLaunchingWithOptions:] + 4718
    18  UIKit                               0x00460157 -[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:] + 266
    19  UIKit                               0x00460747 -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1248
    20  UIKit                               0x0046194b -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 805
    21  UIKit                               0x00472cb5 -[UIApplication handleEvent:withNewEvent:] + 1022
    22  UIKit                               0x00473beb -[UIApplication sendEvent:] + 85
    23  UIKit                               0x00465698 _UIApplicationHandleEvent + 9874
    24  GraphicsServices                    0x0193adf9 _PurpleEventCallback + 339
    25  GraphicsServices                    0x0193aad0 PurpleEventCallback + 46
    26  CoreFoundation                      0x01fc2bf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
    27  CoreFoundation                      0x01fc2962 __CFRunLoopDoSource1 + 146
    28  CoreFoundation                      0x01ff3bb6 __CFRunLoopRun + 2118
    29  CoreFoundation                      0x01ff2f44 CFRunLoopRunSpecific + 276
    30  CoreFoundation                      0x01ff2e1b CFRunLoopRunInMode + 123
    31  UIKit                               0x0046117a -[UIApplication _run] + 774
    32  UIKit                               0x00462ffc UIApplicationMain + 1211
    33  iFormularioNew_Free                 0x0000202d main + 141
    34  iFormularioNew_Free                 0x00001f55 start + 53
)
2013-02-09 15:25:23.953 iFormularioNew_Free[5160:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil'
*** First throw call stack:
(0x204d012 0x151ee7e 0x2000b6a 0x2000a20 0x545894 0x553b8c 0x3a27c 0x543ff8 0x544232 0x3aa81 0x4ae067 0x4ae276 0x3a9fb 0x72d23 0x72991 0x72916 0x3a0ae 0x336e 0x460157 0x460747 0x46194b 0x472cb5 0x473beb 0x465698 0x193adf9 0x193aad0 0x1fc2bf5 0x1fc2962 0x1ff3bb6 0x1ff2f44 0x1ff2e1b 0x46117a 0x462ffc 0x202d 0x1f55)
libc++abi.dylib: terminate called throwing an exception 
```

如果我得到 iADSuite 示例代码并且我从通用更改为 iphone 并在 ipad（设备或模拟器）上测试应用程序，我会得到相同的错误。哪里有问题？

编辑：代码：

这里崩溃：

```
_bannerViewController = [[BannerViewController alloc] initWithContentViewController:self.tabBarController];
self.window.rootViewController = _bannerViewController; 
```

BannerViewController.m

```
NSString * const BannerViewActionWillBegin = @"BannerViewActionWillBegin";
NSString * const BannerViewActionDidFinish = @"BannerViewActionDidFinish";

@interface BannerViewController () <ADBannerViewDelegate>

@end

@implementation BannerViewController {
    ADBannerView *_bannerView;
    UIViewController *_contentController;
}

- (instancetype)initWithContentViewController:(UIViewController *)contentController
{
    self = [super init];
    if (self != nil) {
        // On iOS 6 ADBannerView introduces a new initializer, use it when available.
        if ([ADBannerView instancesRespondToSelector:@selector(initWithAdType:)]) {
            _bannerView = [[ADBannerView alloc] initWithAdType:ADAdTypeBanner];
        } else {
            _bannerView = [[ADBannerView alloc] init];
        }
        _bannerView.delegate = self;
        _contentController = contentController;
    }
    return self;
}

- (void)loadView{
    UIView *contentView = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [contentView addSubview:_bannerView];
    [self addChildViewController:_contentController];
    [contentView addSubview:_contentController.view];
    [_contentController didMoveToParentViewController:self];
    self.view = contentView;
}

#if __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_6_0
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return [_contentController shouldAutorotateToInterfaceOrientation:interfaceOrientation];
}
#endif

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation{
    return [_contentController preferredInterfaceOrientationForPresentation];
}

- (NSUInteger)supportedInterfaceOrientations{
    return [_contentController supportedInterfaceOrientations];
}

- (void)viewDidLayoutSubviews{
    CGRect contentFrame = self.view.bounds, bannerFrame = CGRectZero;
#if __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_6_0
    // If configured to support iOS <6.0, then we need to set the currentContentSizeIdentifier in order to resize the banner properly.
    // This continues to work on iOS 6.0, so we won't need to do anything further to resize the banner.
    if (contentFrame.size.width < contentFrame.size.height) {
        _bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
    } else {
        _bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierLandscape;
    }
    bannerFrame = _bannerView.frame;
#else
    // If configured to support iOS >= 6.0 only, then we want to avoid currentContentSizeIdentifier as it is deprecated.
    // Fortunately all we need to do is ask the banner for a size that fits into the layout area we are using.
    // At this point in this method contentFrame=self.view.bounds, so we'll use that size for the layout.
    bannerFrame.size = [_bannerView sizeThatFits:contentFrame.size];
#endif

    if (_bannerView.bannerLoaded) {
        contentFrame.size.height -= bannerFrame.size.height;
        bannerFrame.origin.y = contentFrame.size.height;
    } else {
        bannerFrame.origin.y = contentFrame.size.height;
    }
    _contentController.view.frame = contentFrame;
    _bannerView.frame = bannerFrame;
}
- (void)bannerViewDidLoadAd:(ADBannerView *)banner{
    [[NSNotificationCenter defaultCenter] postNotificationName:BannerViewActionWillBegin object:self];

    [UIView animateWithDuration:0.25 animations:^{
        [self.view setNeedsLayout];
        [self.view layoutIfNeeded];
    }];
}
- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error {
    [[NSNotificationCenter defaultCenter] postNotificationName:BannerViewActionDidFinish object:self];

    [UIView animateWithDuration:0.25 animations:^{
        [self.view setNeedsLayout];
        [self.view layoutIfNeeded];
    }];
}
- (BOOL)bannerViewActionShouldBegin:(ADBannerView *)banner willLeaveApplication:(BOOL)willLeave {
    return YES;
}
- (void)bannerViewActionDidFinish:(ADBannerView *)banner{} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T01:14:14.747

我删除了我之前的答案，而是发布了这个新答案。

查看堆栈跟踪。问题是由于调用：

```
_bannerView.delegate = self; 
```

这会导致一连串的调用导致`loadView`方法`BannerViewController`在仍在`initWithContentViewController:`执行的过程中被调用。但此时，`_contentController`ivar 尚未设置。

鉴于设置委托会启动广告加载并需要视图，最好的解决方案是等待并`_bannerView.delegate`在`viewDidLoad`方法中设置。

另一种解决方案是将`initWithContentViewController:`方法中的调用重新排序为：

```
- (instancetype)initWithContentViewController:(UIViewController *)contentController {
    self = [super init];
    if (self != nil) {
        // This must be called before you set the delegate on _bannerView
        _contentController = contentController;

        // On iOS 6 ADBannerView introduces a new initializer, use it when available.
        if ([ADBannerView instancesRespondToSelector:@selector(initWithAdType:)]) {
            _bannerView = [[ADBannerView alloc] initWithAdType:ADAdTypeBanner];
        } else {
            _bannerView = [[ADBannerView alloc] init];
        }
        _bannerView.delegate = self;
    }

    return self;
} 
```

另一个解决方案是摆脱`loadView`实现并将所有代码（减去创建内容视图）放在`viewDidLoad`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T15:06:32.657

如果没有代码，我无法指出确切的问题出在哪里，但错误很明显：您正在尝试将“nil”对象插入 NSMutableArray，但此类不允许！

NS 数组和字典不能将 nil 存储为值：如果你这样做，应用程序会引发异常（如果你不处理它，应用程序会崩溃）。

编辑：从调用堆栈中，您会看到错误在：

```
6   iFormularioNew_Free                 0x0003a27c -[BannerViewController loadView] + 348 
```

所以你应该看看 loadView 方法，在这一行：

```
[self addChildViewController:_contentController]; 
```

我确定当它崩溃时 _contentController 为零（addChildViewController 将控制器添加到父级拥有的子控制器数组中）。我留给你去发现为什么它是 nil ;)

# java - 从 Java 访问 Kotlin 类对象

> ID：14789139
> 
> 赞同：16
> 
> 时间：2013-02-09T14:31:15.140
> 
> 标签：java, kotlin

我有一个 Kotlin 类，它有一个类对象，例如

```
public class Foo {
    public class object {
        public val SomeValue : Int = 0
    }
} 
```

如果我在 Java 中使用这个类，我如何访问类对象中的 SomeValue？如果它是一个具有静态属性的 Java 类，我只会使用 Foo.SomeValue - 但我不能在这里这样做。

IntellIJ 显示我可以访问`Foo.object.$instance`，但`$instance`没有 getSomeValue 或类似的东西。如果我尝试使用 $instance.SomeValue ，当我构建错误消息时会说：

> SomeValue 在 Foo.object 中具有私有访问权限

我正在使用 Kotlin 0.5.1。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2020-03-09T12:39:02.350

作为一种解决方法，您应该能够使用以下命令使 Kotlin 字段可见`@JvmField`：

```
@JvmField var addressLocationBox: ToOne? = null 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-10T10:25:36.673

getSomeValue() 的“缺失”是 IDE 中的一个错误。如果你使用它，它编译OK。我创建了一个问题：http: [//youtrack.jetbrains.com/issue/KT-3337](http://youtrack.jetbrains.com/issue/KT-3337)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-04-07T11:06:20.707

```
data class YourClass(@JvmField val name: String) 
```

# android - 来自按钮的 StartActivity 上的 NullPointeException

> ID：14789140
> 
> 赞同：0
> 
> 时间：2013-02-09T14:31:17.040
> 
> 标签：android, nullpointerexception

我正在尝试通过按钮的 onClickListener 启动活动，但总是出现 Null 指针异常。我已经搜索并尝试了很多不同的东西，但我找不到我犯了错误的地方。这是相关的代码/类

崩溃活动：

```
 public class DisplayData extends Activity{

    TextView displayData;
    DataObjectsProvider provider;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.displaydb);

        provider = new DataObjectsProvider(this);
        displayData = (TextView) findViewById(R.id.tvDisplayData);      
        displayData.setText(provider.getAlldobjects().toString());
    }

} 
```

（我试过推荐提供者和 setText 代码）

来自工作主要活动的 onClickListener：

```
bDisplay.setOnClickListener(new OnClickListener(){

        public void onClick(View v) {
            // TODO Auto-generated method stub
             Intent intent = new Intent(MainActivity.this, DisplayData.class);
            startActivity(intent);
        }

    }); 
```

这是崩溃活动的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
       android:id="@+id/tvDisplayData"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="showData"
       android:textAppearance="?android:attr/textAppearanceMedium" />

</ScrollView> 
```

（我已经尝试过，只有线性布局和文本视图）

这是Android清单代码：

```
<activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

   <activity
        android:name=".DisplayData"
        android:label="" >
    </activity> 
```

难道我做错了什么？是否有任何我看不到的错误或我遗漏了什么？

**编辑：** 日志：

> 02-09 23:52:35.002: W/dalvikvm(24849): threadid=1: 线程退出未捕获异常 (group=0x40c971f8) 02-09 23:52:35.052: E/AndroidRuntime(24849): 致命异常: main 02-09 23:52:35.052: E/AndroidRuntime(24849): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.d69.dancesongsdb/com.d69.dancesongsdb.DisplayData}: java.lang.NullPointerException 02- 09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app。 ActivityThread.handleLaunchActivity(ActivityThread.java:1981) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.ActivityThread.access$600(ActivityThread.java:123) 02-09 23:52:35.052 : E/AndroidRuntime(24849): 在 android.app.ActivityThread$H。handleMessage(ActivityThread.java:1147) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.os.Handler.dispatchMessage(Handler.java:99) 02-09 23:52:35.052: E/ AndroidRuntime(24849): 在 android.os.Looper.loop(Looper.java:137) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.ActivityThread.main(ActivityThread.java:4424 ) 02-09 23:52:35.052: E/AndroidRuntime(24849): at java.lang.reflect.Method.invokeNative(Native Method) 02-09 23:52:35.052: E/AndroidRuntime(24849): at java. lang.reflect.Method.invoke(Method.java:511) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787 ) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554) 02-09 23:52:35.052: E/AndroidRuntime(24849 ):在 dalvik.system.NativeStart.main(Native Method) 02-09 23:52:35.052: E/AndroidRuntime(24849): 由: java.lang.NullPointerException 02-09 23:52:35.052: E/AndroidRuntime(24849) ): 在 com.d69.dancesongsdb.DataObjectsProvider.getAlldobjects(DataObjectsProvider.java:58) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 com.d69.dancesongsdb.DisplayData.onCreate(DisplayData.java: 19) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.Activity.performCreate(Activity.java:4465) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 02-09 23: 52:35.052: E/AndroidRuntime(24849): ... 11 更多主要（本机方法）02-09 23:52:35.052：E/AndroidRuntime（24849）：由：java.lang.NullPointerException 02-09 23:52:35.052：E/AndroidRuntime（24849）：在 com.d69。 dancesongsdb.DataObjectsProvider.getAlldobjects(DataObjectsProvider.java:58) 02-09 23:52:35.052: E/AndroidRuntime(24849): at com.d69.dancesongsdb.DisplayData.onCreate(DisplayData.java:19) 02-09 23: 52:35.052: E/AndroidRuntime(24849): 在 android.app.Activity.performCreate(Activity.java:4465) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.Instrumentation.callActivityOnCreate (Instrumentation.java:1049) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 02-09 23:52:35.052: E/AndroidRuntime (24849): ... 11 更多主要（本机方法）02-09 23:52:35.052：E/AndroidRuntime（24849）：由：java.lang.NullPointerException 02-09 23:52:35.052：E/AndroidRuntime（24849）：在 com.d69。 dancesongsdb.DataObjectsProvider.getAlldobjects(DataObjectsProvider.java:58) 02-09 23:52:35.052: E/AndroidRuntime(24849): at com.d69.dancesongsdb.DisplayData.onCreate(DisplayData.java:19) 02-09 23: 52:35.052: E/AndroidRuntime(24849): 在 android.app.Activity.performCreate(Activity.java:4465) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.Instrumentation.callActivityOnCreate (Instrumentation.java:1049) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 02-09 23:52:35.052: E/AndroidRuntime (24849): ... 11 更多lang.NullPointerException 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 com.d69.dancesongsdb.DataObjectsProvider.getAlldobjects(DataObjectsProvider.java:58) 02-09 23:52:35.052: E/AndroidRuntime(24849 ): 在 com.d69.dancesongsdb.DisplayData.onCreate(DisplayData.java:19) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.Activity.performCreate(Activity.java:4465) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android. app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 02-09 23:52:35.052: E/AndroidRuntime(24849): ... 11 更多lang.NullPointerException 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 com.d69.dancesongsdb.DataObjectsProvider.getAlldobjects(DataObjectsProvider.java:58) 02-09 23:52:35.052: E/AndroidRuntime(24849 ): 在 com.d69.dancesongsdb.DisplayData.onCreate(DisplayData.java:19) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.Activity.performCreate(Activity.java:4465) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android. app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 02-09 23:52:35.052: E/AndroidRuntime(24849): ... 11 更多java:58) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 com.d69.dancesongsdb.DisplayData.onCreate(DisplayData.java:19) 02-09 23:52:35.052: E/AndroidRuntime( 24849): 在 android.app.Activity.performCreate(Activity.java:4465) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 02 -09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 02-09 23:52:35.052: E/AndroidRuntime(24849): ... 11更多的java:58) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 com.d69.dancesongsdb.DisplayData.onCreate(DisplayData.java:19) 02-09 23:52:35.052: E/AndroidRuntime( 24849): 在 android.app.Activity.performCreate(Activity.java:4465) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 02 -09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 02-09 23:52:35.052: E/AndroidRuntime(24849): ... 11更多的Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 02-09 23:52:35.052: E/AndroidRuntime(24849): ... 11 更多Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 02-09 23:52:35.052: E/AndroidRuntime(24849): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 02-09 23:52:35.052: E/AndroidRuntime(24849): ... 11 更多

**EDIT2** 我已经放弃了 db4o 并用 sqlite 重新创建了我的类。但是这个错误仍然发生在活动上。我也编辑了崩溃活动的代码。最新行（使用提供程序）是导致崩溃的行。我已经通过更改使用以下代码启动活动的按钮的代码在主要活动上对其进行了测试：

```
public void onClick(View v) {       
    Toast.makeText(MainActivity.this, provider.getAlldobjects().toString(), Toast.LENGTH_LONG).show(); 
```

并且数据库的项目在 toast 上显示正确。在主要活动上（来自上面的代码），我已经用与崩溃活动完全相同的方式声明了 DataObjectsProvider 类。我无法理解为什么一项活动有效，而另一项活动无效。

数据对象提供者：

```
public class DataObjectsProvider {

  // Database fields
  private SQLiteDatabase database;
  private DbHelper dbHelper;
  private String[] allColumns = { DbHelper.COLUMN_ID,
      DbHelper.COLUMN_SONGNAME, DbHelper.COLUMN_SONGARTIST, DbHelper.COLUMN_SONGGENRE };

  public DataObjectsProvider (Context context) {
        dbHelper = new DbHelper(context);
      }

  public void open() throws SQLException {
        database = dbHelper.getWritableDatabase();
      }

      public void close() {
        dbHelper.close();
      }

      public DataObjects createDataObjects (String songName, String songArtist, String songGenre){
        ContentValues values = new ContentValues();
        values.put(DbHelper.COLUMN_SONGNAME, songName + ", ");
        values.put(DbHelper.COLUMN_SONGARTIST, songArtist + ", ");
        values.put(DbHelper.COLUMN_SONGGENRE, songGenre);
        long insertId = database.insert(DbHelper.TABLE_SONGS, null,
                values);
            Cursor cursor = database.query(DbHelper.TABLE_SONGS,
                allColumns, DbHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null);
            cursor.moveToFirst();
            DataObjects newDobject = cursorToDataObjects(cursor);
            cursor.close();
            return newDobject;

      }

      public void deleteDobjects(DataObjects dobjects) {
            long id = dobjects.getId();
            System.out.println("Comment deleted with id: " + id);
            database.delete(DbHelper.TABLE_SONGS, DbHelper.COLUMN_ID
                + " = " + id, null);
          }

      public List<DataObjects> getAlldobjects() {
            List<DataObjects> dobjects = new ArrayList<DataObjects>();

            Cursor cursor = database.query(DbHelper.TABLE_SONGS,
                allColumns, null, null, null, null, null);

            cursor.moveToFirst();
            while (!cursor.isAfterLast()) {
              DataObjects dobject = cursorToDataObjects(cursor);
              dobjects.add(dobject);
              cursor.moveToNext();
            }
            // Make sure to close the cursor
            cursor.close();
            return dobjects;
          }

    private DataObjects cursorToDataObjects(Cursor cursor) {
        DataObjects dobject = new DataObjects();
        dobject.setId(cursor.getLong(0));
        dobject.setSongName(cursor.getString(1));
        dobject.setSongArtist(cursor.getString(2));
        dobject.setSongGenre(cursor.getString(3));
        return dobject;
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:38:06.787

如果没有堆栈跟踪，很难看出问题所在（后一篇）。

但从我所见，看起来 NPE 可能来自这两行中的任何一行：

```
displayData = (TextView) findViewById(R.id.tvDisplayData);      
displayData.setText(provider.list.toString()); 
```

displayData（TextView）为空，或者提供者的列表。您确定要在提供者的构造函数中创建列表吗？

编辑：

错误位于 DataObjectsProvider 的第 24 行：

```
"at com.d69.dancesongsdb.DataObjectsProvider.(DataObjectsProvider.java:24)" 
```

编辑2：

你从来没有叫开。因此数据库对象为空。这是你的崩溃。您还可以在移动到操作之前检查您从该查询中检索到的光标是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T22:48:29.370

最后，搜索和阅读减少了我的愚蠢。我试图在不先打开数据库的情况下进行查询。在 MainActivity 上，数据库是从另一个方法调用（用于存储项目）打开的，但在 DisplayData 活动上不是。所以需要先使用：

```
provider.open(); 
```

接着：

```
provider.getAllObjects(); 
```

# image - CUDA 中值滤波器无法正常工作

> ID：14789149
> 
> 赞同：1
> 
> 时间：2013-02-09T14:32:50.750
> 
> 标签：image, filter, cuda, median

我自己学习了 CUDA，并尝试实现一个简单的中值滤波器来进行图像处理。这就是我想出的，但我似乎无法用它产生的图像获得任何好的结果。例如，输出的图片相对没有噪点，但图片的饱和度似乎更高，当我尝试这张来自 Wikipedia 的[泰迪熊](http://upload.wikimedia.org/wikipedia/commons/4/41/Median_filter_example.jpg)图片时，它的鼻子不知为何变绿了。我变得非常沮丧，无法想到任何新的想法，所以如果有人能在代码中看到问题，我将不胜感激。谢谢！

这是核函数：

```
__global__ void median_filter(int *input, int *output, int IMAGE_W, int IMAGE_H){

    __shared__ float window[BLOCK_W*BLOCK_H][9];

    int x, y, tid;
    int i, j, iMin, temp;

    x = blockIdx.x*blockDim.x + threadIdx.x;
    y = blockIdx.y*blockDim.y + threadIdx.y;
    tid = threadIdx.y*blockDim.y + threadIdx.x;

    if(x>=IMAGE_W && y>=IMAGE_H)
        return;

    /* setting 3x3 window elements for median */
    if(y==0 && x==0)
        window[tid][0] = input[y*IMAGE_W+x];
    else if(y==0 && x!=0)
        window[tid][0] = input[y*IMAGE_W+x-1];
    else if(y!=0 && x==0)
        window[tid][0] = input[(y-1)*IMAGE_W+x];
    else
        window[tid][0] = input[(y-1)*IMAGE_W+x-1];

    window[tid][1] = (y==0)?input[y*IMAGE_W+x]:input[(y-1)*IMAGE_W+x];

    if(y==0 && x==IMAGE_W-1)
        window[tid][2] = input[y*IMAGE_W+x];
    else if(y!=0 && x==IMAGE_W-1)
        window[tid][2] = input[(y-1)*IMAGE_W+x];
    else if(y==0 && x!=IMAGE_W-1)
        window[tid][2] = input[(y-1)*IMAGE_W+x+1];
    else
        window[tid][2] = input[(y-1)*IMAGE_W+x+1];

    window[tid][3] = (x==0)?input[y*IMAGE_W+x]:input[y*IMAGE_W+x-1];
    window[tid][4] = input[y*IMAGE_W+x];
    window[tid][5] = (x==IMAGE_W-1)?input[y*IMAGE_W+x]:input[y*IMAGE_W+x+1];

    if(y==IMAGE_H-1 && x==0)
        window[tid][6] = input[y*IMAGE_W+x];
    else if(y!=IMAGE_H-1 && x==0)
        window[tid][6] = input[(y+1)*IMAGE_W+x];
    else if(y==IMAGE_H-1 && x!=0)
        window[tid][6] = input[y*IMAGE_W+x-1];
    else
        window[tid][6] = input[(y+1)*IMAGE_W+x-1];

    window[tid][7] = (y==IMAGE_H-1)?input[y*IMAGE_W+x]:input[(y+1)*IMAGE_W+x];

    if(y==IMAGE_H-1 && x==IMAGE_W-1)
        window[tid][8] = input[y*IMAGE_W+x];
    else if(y!=IMAGE_H-1 && x==IMAGE_W-1)
        window[tid][8] = input[(y+1)*IMAGE_W+x];
    else if(y==IMAGE_H-1 && x!=IMAGE_W-1)
        window[tid][8] = input[y*IMAGE_W+x+1];
    else
        window[tid][8] = input[(y+1)*IMAGE_W+x+1];

    __syncthreads();

    /* sorting window to find median */
    for(j=0; j<8; j++){
        iMin = j;
        for(i=j+1; i<9; i++){
            if(window[tid][i] < window[tid][iMin]){
                iMin = i;
            }
        }
        if(iMin != j){
            temp = window[tid][iMin];
            window[tid][iMin] = window[tid][j];
            window[tid][j] = temp;
        }
        __syncthreads();
    }

    output[y*IMAGE_W + x] = window[tid][4];
} 
```

主要功能：

```
int main(){
    /*loading picture*/
    char picture[50] = "before.bmp";

    FILE *image = fopen(picture, "rb");

    if(image == NULL)
    {
        printf("Load picture error!\n");
        system("pause");
        exit(1);
    }

    BITMAPFILEHEADER bmpFHeader;
    BITMAPINFOHEADER bmpIHeader;
    fread(&bmpFHeader, sizeof(BITMAPFILEHEADER), 1, image);
    fread(&bmpIHeader, sizeof(BITMAPINFOHEADER), 1, image);

    int imgWidth = bmpIHeader.biWidth;
    int imgHeight = bmpIHeader.biHeight;

    int img_size = imgWidth * imgHeight * sizeof(int);

    int * imgeRedChannel_x = (int *)malloc(img_size);
    int * imgeGreenChannel_x = (int *)malloc(img_size);
    int * imgeBlueChannel_x = (int *)malloc(img_size);

    int * deviceInputRed;
    int * deviceInputGreen;
    int * deviceInputBlue;

    int * deviceOutputRd;
    int * deviceOutputGreen;
    int * deviceOutputBlue;

    for(int i = imgHeight-1; i>=0; i--)
    {
        for(int j = 0; j<imgWidth; j++)
        {

                fread(&(imgeGreenChannel_x[i * (imgWidth) + j]), sizeof(unsigned char), 1, image);
                fread(&(imgeBlueChannel_x[i * (imgWidth) + j]), sizeof(unsigned char), 1, image);
                fread(&(imgeRedChannel_x[i * (imgWidth) + j]), sizeof(unsigned char), 1, image);

        }
    }

    cudaMalloc((void **) &deviceInputRed, sizeof(int) * imgHeight * imgWidth);
    cudaMalloc((void **) &deviceInputBlue, sizeof(int) * imgHeight * imgWidth);
    cudaMalloc((void **) &deviceInputGreen, sizeof(int) * imgHeight * imgWidth);
    cudaMalloc((void **) &deviceOutputRd, sizeof(int) * imgHeight * imgWidth);
    cudaMalloc((void **) &deviceOutputBlue, sizeof(int) * imgHeight * imgWidth);
    cudaMalloc((void **) &deviceOutputGreen, sizeof(int) * imgHeight * imgWidth);

    int dimA = imgWidth*imgHeight;
    int numThreadsPerBlock = 256;
    int numBlocks = dimA / numThreadsPerBlock;
    int sharedMemSize = numThreadsPerBlock*sizeof(int);

    dim3 dimGrid(numBlocks);
    dim3 dimBlock(numThreadsPerBlock);

    cudaMemcpy(deviceInputRed,imgeRedChannel_x,sizeof(int) * imgHeight * imgWidth,cudaMemcpyHostToDevice);
    checkCUDAError("memcpy h-d r");
    cudaMemcpy(deviceInputGreen,imgeGreenChannel_x,sizeof(int) * imgHeight * imgWidth,cudaMemcpyHostToDevice);
    checkCUDAError("memcpy h-d g");
    cudaMemcpy(deviceInputBlue,imgeBlueChannel_x,sizeof(int) * imgHeight * imgWidth,cudaMemcpyHostToDevice);
    checkCUDAError("memcpy h-d b");

    median_filter<<< dimGrid , dimBlock, sharedMemSize>>> (deviceInputRed, deviceOutputRd, imgHeight, imgWidth);
    checkCUDAError("kernel invocation r");
    median_filter<<< dimGrid , dimBlock, sharedMemSize>>> (deviceInputGreen, deviceOutputGreen, imgHeight, imgWidth);
    checkCUDAError("kernel invocation g");
    median_filter<<< dimGrid , dimBlock, sharedMemSize>>> (deviceInputBlue, deviceOutputBlue, imgHeight, imgWidth);
    checkCUDAError("kernel invocation b");

    cudaMemcpy(imgeRedChannel_x, deviceOutputRd, imgHeight * imgWidth * sizeof(int), cudaMemcpyDeviceToHost);
    checkCUDAError("memcpy d-h r");
    cudaMemcpy(imgeGreenChannel_x, deviceOutputGreen, imgHeight * imgWidth * sizeof(int), cudaMemcpyDeviceToHost);
    checkCUDAError("memcpy d-h g");
    cudaMemcpy(imgeBlueChannel_x, deviceOutputBlue, imgHeight * imgWidth * sizeof(int), cudaMemcpyDeviceToHost);
    checkCUDAError("memcpy d-h b");

    cudaFree(deviceInputRed);
    cudaFree(deviceOutputRd);
    cudaFree(deviceInputGreen);
    cudaFree(deviceOutputGreen);
    cudaFree(deviceInputBlue);
    cudaFree(deviceOutputBlue);

    /*saving new picture*/
    fclose(image);

    char title[50]="after";
    strcat(title, ".bmp");

    remove(title);
    image = fopen(title,"wb");

    fwrite(&bmpFHeader, sizeof(BITMAPFILEHEADER), 1, image);
    fwrite(&bmpIHeader, sizeof(BITMAPINFOHEADER), 1, image);

    for(int i = imgHeight-1; i>=0; i--)
    {

        for(int j = 0; j<imgWidth; j++)
        {
            int b = imgeBlueChannel_x[i * (imgWidth) + j];
            int g = imgeGreenChannel_x[i * (imgWidth) + j];
            int r = imgeRedChannel_x[i * (imgWidth) + j]; 

            if(b>255)b=255;
            if(g>255)g=255;
            if(r>255)r=255;

            fwrite(&g, sizeof(unsigned char), 1, image);
            fwrite(&b, sizeof(unsigned char), 1, image);
            fwrite(&r, sizeof(unsigned char), 1, image);
        }
    }

    printf("Success!\n");
    fclose(image);
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:33:40.080

鼻子变绿意味着您的代码中有溢出，但这很奇怪，因为中值过滤器永远不会产生溢出。你肯定有一个混乱的代码，内核没有多大意义，尤其是你正在做的大量额外工作。

在非线性过滤器中，我建议您先尝试实现最小或最大过滤器，看看它们是否有效。[这是来自 CUDA 的CUVI](http://cuvilib.com/)库的Max Filter 的工作代码。您的中值内核应该与此没有什么不同：

```
__global__ void median_8u_c3( unsigned char* out,
                              unsigned int width,
                              unsigned int widthStep,
                              unsigned int height){

int xIndex = blockIdx.x*BLOCK_SIZE + threadIdx.x;
int  yIndex = blockIdx.y*BLOCK_SIZE + threadIdx.y;
int tid = yIndex * widthStep + (3*xIndex);

if(xIndex>=width|| yIndex>=height) return;

int limitX = anchorX + fHeight - 1;
int limitY = anchorY + fWidth - 1;

unsigned char MAX_R = 0 , MAX_G = 0, MAX_B = 0;  

 // Instead of Max filter code in the for loops below, you can have median code
for(Cuvi32s i=anchorX ; i<= limitX; i++)
    for(Cuvi32s j=anchorY ; j<= limitY; j++)
    {
        MAX_R = (tex2D(tex8,3*(xIndex + i)  , yIndex + j) > MAX_R) ? tex2D(tex8,3*(xIndex + i)  , yIndex + j) : MAX_R;
        MAX_G = (tex2D(tex8,3*(xIndex + i)+1, yIndex + j) > MAX_G) ? tex2D(tex8,3*(xIndex + i)+1, yIndex + j) : MAX_G;
        MAX_B = (tex2D(tex8,3*(xIndex + i)+2, yIndex + j) > MAX_B) ? tex2D(tex8,3*(xIndex + i)+2, yIndex + j) : MAX_B;
    }

out[tid] = MAX_R;
out[tid + 1] = MAX_G;
out[tid + 2] = MAX_B;
} 
```

注意：我使用的是 Textures 的输入。

# php - 将字符串拆分为字符串数组和php中拆分字符的计数

> ID：14789153
> 
> 赞同：1
> 
> 时间：2013-02-09T14:33:47.437
> 
> 标签：php, arrays, string, split

我需要将 String 拆分为单个字符 Strings 的数组并获取拆分字符的计数。

例如，拆分“字符”将给出数组`"c", "h", "a", "r", "a", "c", "t", "e", "r"`。

**编辑**

是否可以使用内置函数计算拆分的字符串字符？

```
Array ( [c] => 2 [h] => 1 [a] => 2 [r] => 2 [t] => 1 [e] => 1 ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T14:36:38.623

[**阵列`$array`**

```
$array = str_split('Cat'); 
```

**拆分`str_split()`后将如下所示：**

```
ARRAY
{
   [0] = 'C'
   [1] = 'a'
   [2] = 't'
} 
```

**回答已编辑的问题**

是的，您可以使用该功能`count_chars()`

```
$str = "CHARACTERS";

$array = array();

foreach (count_chars($str, 1) as $i => $val) {
   array[] = array($str, $i);
} 
```

**将输出以下内容：**

```
ARRAY
{
   [0] = ARRAY("C" => 2)
   [1] = ARRAY("H" => 1)
} 
```

ETC

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T14:35:28.627

使用 php 函数[str_split](http://php.net/manual/en/function.str-split.php)，示例如下：

```
$array = str_split("cat"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-09T14:36:15.413

利用[`str_split`](http://www.php.net/manual/en/function.str-split.php)

```
$array = str_split("cat"); 
```

* * *

尝试[`count_chars`](http://php.net/manual/en/function.count-chars.php)：

```
<?php
$data = "Two Ts and one F.";

foreach (count_chars($data, 1) as $i => $val) {
   echo "There were $val instance(s) of \"" , chr($i) , "\" in the string.\n";
}
?> 
```

上面的示例将输出：

```
There were 4 instance(s) of " " in the string.
There were 1 instance(s) of "." in the string.
There were 1 instance(s) of "F" in the string.
There were 2 instance(s) of "T" in the string.
There were 1 instance(s) of "a" in the string.
There were 1 instance(s) of "d" in the string.
There were 1 instance(s) of "e" in the string.
There were 2 instance(s) of "n" in the string.
There were 2 instance(s) of "o" in the string.
There were 1 instance(s) of "s" in the string.
There were 1 instance(s) of "w" in the string. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T14:36:14.460

您需要使用[str_split](http://www.php.net/manual/en/function.str-split.php)

IE

```
$array = str_split($str, 1); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-09T14:36:55.580

在此处使用爆炸[文档](http://www.php.net/manual/en/function.explode.php)

```
 /* A string that doesn't contain the delimiter will simply return a one-length array of the original string. */
 $input1 = "hello";
 $input2 = "hello,there";
 var_dump( explode( ',', $input1 ) );
 var_dump( explode( ',', $input2 ) ); 
```

# java - 如果我有两个 java 类（A 和 B），我如何确保 A 在 B 之前编译肯定？

> ID：14789154
> 
> 赞同：0
> 
> 时间：2013-02-09T14:33:51.563
> 
> 标签：java, compilation

有什么方法可以确保 Java 中类的特定编译顺序？这两个类可以在不同的文件中。有没有办法在不修改类代码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:50:30.757

通常情况下，你不会。

任何一个：

*   使用一次调用重新编译所有“.java”文件`javac`，
*   使用 Java 构建工具（例如 Ant 或 Maven）并让它*为*您整理所有这些东西，或者
*   把它留给IDE。

# javascript - Javascript 循环行为

> ID：14789157
> 
> 赞同：4
> 
> 时间：2013-02-09T14:34:08.547
> 
> 标签：javascript, arrays, loops, theory

该`alltones`数组包含音乐音阶中所有可能的音符。

```
var alltones = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B" ]; 
```

我想获取用户输入的音调，然后构造一个包含数组某些元素的列表。

假设我从`alltones[5]`or开始`"F"`，并希望从该点获取数组的每个第二个元素并将其放入我的列表中，直到我回到`"F"`. 数组更像是一个圆而不是直列表。一旦循环到达最后一个元素，我有点不确定数组如何运行。

我是否通过根据用户输入生成一个新数组来解决问题。或者 JavaScript 是否知道一旦到达数组末尾就循环回到数组的开头，以便将数组视为一个圆圈？

一个例子：用户输入 = F
我正在寻找的输出是从 F 计数（每两个项目），直到我们回到数组到 F
所以所需的输出将是 => FGABC# D#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T14:50:36.717

没有[现有的 Array 方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/prototype#Methods)可以执行您想要的操作，但可以使用[`Array.prototype.slice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)and轻松定义[`Array.prototype.concat`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/concat)：

```
// move i elements from the start of the array to the end of the array
Array.prototype.lcycle = function(i) {
  var xs = this.slice(0,i);
  var ys = this.slice(i);
  return ys.concat(xs)
};
// move i elements from the end of the array to the start of the array
Array.prototype.rcycle = function(i) {
  var xs = this.slice(0,-i);
  var ys = this.slice(-i);
  return ys.concat(xs);
}; 
```

然后你可以使用`lcycle`and`rcycle` 作为普通的数组方法：

```
>>> alltones.lcycle(3)
[ "D#" , "E" , "F" , "F#" , "G" , "G#" , "A" , "A#" , "B" , "C" , "C#" , "D" ]
>>> alltones.rcycle(4)
[ "G#" , "A" , "A#" , "B" , "C" , "C#" , "D" , "D#" , "E" , "F" , "F#" , "G" ] 
```

请注意，这两种方法都返回一个新数组。如果你想改变原始数组，你可以使用[`Array.prototype.splice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice).

```
// move i elements from the start of the array to the end of the array, mutating the original array
Array.prototype.lcycle_m = function(i) {
  var args = this.splice(0,i);
  args.unshift(0);
  args.unshift(this.length);
  this.splice.apply(this, args);
};
// move i elements from the end of the array to the start of the array, mutating the original array
Array.prototype.rcycle_m = function(i) {
  var args = this.splice(-i);
  args.unshift(0);
  args.unshift(0);
  this.splice.apply(this, args);
}; 
```

同样，您可以将`lcycle_m`and`rcycle_m`用作普通数组方法：

```
>>> alltones.lcycle_m(3)
>>> alltones
[ "D#" , "E" , "F" , "F#" , "G" , "G#" , "A" , "A#" , "B" , "C" , "C#" , "D" ]
>>> alltones.rcycle_m(3)
>>> alltones
[ "C" , "C#" , "D" , "D#" , "E" , "F" , "F#" , "G" , "G#" , "A" , "A#" , "B" ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:45:46.957

您可以在两个循环中执行此操作，因为 JS 没有内置对圆圈的支持。

```
for (var i = users_input; i < alltones.length; i += 1) {
  ... use alltones[i] for calc
}
for (var i = 0; i < users_input; i += 1) {
  ... use alltones[i] for calc
} 
```

或沿着这条线的东西。真的没有必要创建一个新数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T14:48:25.930

这个怎么样：

```
function getNotes(index) {
  var list = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B" ];
  return list.splice(index).concat(list).filter(function(note, i) {
    return i % 2 == 0;
  });
}
getNotes(3); // ["D#", "F", "G", "A", "B", "C#"] 
```

这样做是首先重新组织数组，以便将所选索引移到开头，将之前的所有内容移到末尾，然后过滤掉所有其他音符。如果您希望该`getNotes`函数使用字符串，则可以使用该`indexOf`方法。`indexOf`和`filter`（上面使用的）是 ECMAScript 5 的一部分，因此您可能需要 polyfill，具体取决于您计划支持的浏览器。

这是一个[带有一些示例的小提琴](http://jsfiddle.net/SQNan/1/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T15:07:54.340

这是到达数组末尾后循环回到数组开头的方法：

`arr[index%arr.length]`，如果`index`> `arr.length`，它将“循环”到开始。

这项技术非常高效，几乎适用于所有语言。

```
var alltones = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B" ];

function generateMusic(startIndex) {
    var i = 0, music = [],
        tonesCount = alltones.length

    do { 
        music.push(alltones[(startIndex+i)%tonesCount]); 
    } while ((i+=2) < tonesCount);

    return music;
} 
```

结果：

```
console.log(generateMusic(3)); //["D#", "F", "G", "A", "B", "C#"]
console.log(generateMusic(5)); //["F", "G", "A", "B", "C#", "D#"] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-09T15:07:02.980

在两个循环中执行此操作，一个用于从初始点之后开始的数组成员，另一个从头开始是更好的方法；这里的关键是从头开始，这取决于我们在数组末尾的位置。

您可以创建一个通用函数，例如

```
 var alltones = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B" ];

  function build_tones(arr, start, jump_by){

  var new_list = [];

           //finish first iteration and get the last index so that we can offset accordingly from the beginning
             var get_last = (function(){
               var last;
              for(i = start; i <= arr.length; i+=jump_by){
                new_list.push(arr[i]);
                last = i;
                }
              return last;
              })();

     //do the second iteration by picking up from the index left and continue from first

    for(i = 0 + arr.length%get_last; i < start; i+=jump_by){
    new_list.push(arr[i]);
    }

    return new_list;

  }

 var result = build_tones(alltones, 5, 2);
 console.log(result); 
```

# android - 阿拉伯语键盘退格问题android

> ID：14789161
> 
> 赞同：1
> 
> 时间：2013-02-09T14:34:27.367
> 
> 标签：android, android-edittext, arabic, backspace

我有一个编辑文本，当我在其中写阿拉伯文本并选择任何其他视图并返回我的编辑文本并尝试使用退格键时，文本没有被删除，我无法在文本中移动光标

有人可以帮忙吗？

# php - PHP SQL GET 和 OR？

> ID：14789165
> 
> 赞同：1
> 
> 时间：2013-02-09T14:35:02.163
> 
> 标签：php, sql, get

用于 SQL 查询。

是否可以通过 GET 传递 OR？

```
variable=value OR othervalue 
```

或者更容易定义多个变量，然后从多个变量中进行 SQL 过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:20:04.950

你应该`GET`像这样传递你的参数：

```
script.php?variable[]=happy&variable[]=sad 
```

在您的脚本中，这些将`$_GET[variable]`作为数组存储：

```
大批
(
    [0] => 快乐
    [1] => 伤心
)

```

然后您可以绑定参数并发送您的语句（尚未测试）：

```
<?php
$link = mysqli_connect('localhost', 'my_user', 'my_password', 'world');

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$type = '';

$query = 'SELECT column FROM bubbles WHERE variable IN (';

for($i = 0; $i < count($_GET[variable]); $i++) {
   $query .= '?';
   $type .= 's';
   if($i+1 < count($_GET[variable])) $query .= ', ';
}

$query .= ')';

$stmt = mysqli_prepare($link, $query);

call_user_func_array('mysqli_stmt_bind_param', array_merge(array($stmt, $type), $_GET[variable])); 

/* execute prepared statement */
mysqli_stmt_execute($stmt);

/* close connection */
mysqli_close($link);
?> 
```

# android - 在异步任务中吐司

> ID：14789169
> 
> 赞同：2
> 
> 时间：2013-02-09T14:35:22.183
> 
> 标签：android, android-asynctask, toast

请帮助如何使用这个。我正在登录并验证所有错误和可能的异常。这是我的代码`

```
EditText un, pw;
ImageButton login;
TextView error;
ProgressDialog pd;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    un=(EditText)findViewById(R.id.txtUsername);
    pw=(EditText)findViewById(R.id.txtPassword);
    login=(ImageButton)findViewById(R.id.btnLogin);
    error=(TextView)findViewById(R.id.errTxt);

    login.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            new login().execute();

        }

    });

}
public class login extends AsyncTask{

    @Override
    protected Object doInBackground(Object... params) {
        // TODO Auto-generated method stub

        ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
        postParameters.add(new BasicNameValuePair("username", un.getText().toString()));
        postParameters.add(new BasicNameValuePair("password", pw.getText().toString()));
        //String valid = "1";
        String response = null;

        try {

            response = CustomHttpClient.executeHttpPost("http://www.cjcld.org/dvts1/mobile/login.php", postParameters);
            String res=response.toString();
           // res = res.trim();
            res= res.replaceAll("\\s+","");                              
            //error.setText(res);

           if(Integer.parseInt(res)>0){

            postParameters.add(new BasicNameValuePair("id", res));
             String result = null;
           try
           {
              result = CustomHttpClient.executeHttpPost("http://www.cjcld.org/dvts1/mobile/status.php", postParameters);
              String res2=result.toString();
              res2= res2.replaceAll("\\s+","");    

              if(Integer.parseInt(res2)>0){

               Intent myIntent = new Intent(getApplicationContext(), dashboard.class); 
               Bundle logval = new Bundle();

              logval.putString("uid", res);
              logval.putString("did", res2);
               myIntent.putExtras(logval);
               startActivity(myIntent);
              }else{

                  Toast.makeText(getApplicationContext(),"No Delivery", Toast.LENGTH_LONG).show();
              }
           }
           catch(Exception e)           
           {

               Toast.makeText(getApplicationContext(),e.toString(), Toast.LENGTH_LONG).show();
           }
           }
            else
            {

                Toast.makeText(getApplicationContext(),"Sorry!! Incorrect Username or Password", Toast.LENGTH_LONG).show();
            }
        } catch (Exception e) {

                Toast.makeText(getApplicationContext(),e.toString(), Toast.LENGTH_LONG).show();
        }
        return null;
    }

} 
```

当 toast 将要执行时，程序将关闭并提示错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:32:57.607

您需要在主用户界面线程中执行此操作。像这样

```
 MainActivity.this.runOnUiThread(new Runnable() {
                                    @Override
                                    public void run() {
                                        Toast.makeText(MainActivity.this,"call your toast from the main ui thread",300).show();
                                    }
                                }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:46:15.347

`doInBackground`是一个后台非 UI 线程，您**不能从那里进行 UI 活动**。

另一方面，UI 线程是 onPreExecute、onProgressUpdate 和 onPostExecute。您的 UI 活动应该只发生在这三个功能之一中。

您应该尝试**在 doInBackground() 中设置一个标志**，然后检查标志的值`onPostExecute`并相应地显示 Toast 消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T14:42:40.980

由于您没有发布错误，因此无法确定，但根据经验**，您不应从后台线程修改 UI**。我猜祝酒词有资格作为 UI 修改？

`onPostExecute`尝试从or`onProgressUpdate`方法启动 Toast（以及仪表板活动的意图）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T14:44:01.747

您不能从异步任务的 onBackground 方法所在的后台线程 Toast。[http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground(Params...)](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground(Params...))。

例如，您可以覆盖

```
protected void onPostExecute (Result result) 
```

或者

```
protected void onProgressUpdate (Progress... values) 
```

和 Toast，因为它们在 UI 线程上运行。

# javascript - 当我关注页面中的另一个元素时，如何将选择保留在 div 中？

> ID：14789170
> 
> 赞同：0
> 
> 时间：2013-02-09T14:35:26.377
> 
> 标签：javascript, jquery, textselection

我正在使用文本编辑器，我从 @TimDown 的 [rangy](https://code.google.com/p/rangy/)库中受益匪浅，但是当我选择一些文本并专注于文本输入以在其上写入链接时，*此链接将应用于稍后的选择*，我失去了选择，选择变为未选中！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:44:12.650

您可以将选择保存在变量中，如下所示：

```
 var sel = window.getSelection().getRangeAt(0);   //get cursor position
  sel = [[sel.startContainer,sel.startOffset],  
         [sel.endContainer,sel.endOffset]
  ];   //save cursor position (start and end);
  /*Do whatever, let the user change selected element*/ 
```

现在，当您在变量中进行选择时，您可以做任何您想做的事情。但是不能改变参与选择的节点，否则选择会指向无效范围。
现在您可以再次选择文本：

```
 var range = document.createRange();  //Creade range object. This is not IE compatible!
  range.setStart(sel[0][0], sel[0][1]);  //Load start from our variable
  range.setEnd(sel[1][0], sel[1][1]);    //Load end too
  var s = window.getSelection();
  s.removeAllRanges();  //I'm not sure this is necessary
  s.addRange(range); 
```

然后你可以得到文本：

```
 alert("Selected: "+s.toString()); 
```

# php - php字符串到foreach中的数组输出

> ID：14789176
> 
> 赞同：-3
> 
> 时间：2013-02-09T14:36:19.267
> 
> 标签：php, string

我的原始数据是`"aaa","bbb","ccc"`，如何将字符串转换为数组？

如何得到这样的结果`aaa<hr />bbb<hr />ccc<hr />`？我的代码只返回`"aaa","bbb","ccc"<hr />`。

```
$str = '"aaa","bbb","ccc"';
$ddd = array($str);
foreach($ddd as $aaa){
    echo $aaa.'<hr />';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:41:06.877

这将完成这项工作：

```
<?php
$str = '"aaa","bbb","ccc"';

$array = explode(',', $str);

foreach ($array as $element) {
    echo substr($element, 1, -1).'<hr />';
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T14:44:14.677

您的数据看起来像格式良好的 CSV。

您可以使用[str_getcsv()](http://php.net/str_getcsv)将数据直接读取到数组中：

```
$str = '"aaa","bbb","ccc"';
$array = str_getcsv($str);

foreach ($array as $item) {
    echo $item . '<hr />';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T14:44:29.780

我会使用 str_replace 来切换逗号，`<hr />`我也为你删除了 "。

**例如**

```
$str = '"aaa","bbb","ccc"';
echo str_replace('"', '', str_replace(',','<hr />',$str)); 
```

可能不是最好的方法，但它会起作用:)

# xml - 如何获取 xml 文件的一个孩子

> ID：14789180
> 
> 赞同：1
> 
> 时间：2013-02-09T14:36:24.363
> 
> 标签：xml, actionscript-3, flash, apache-flex, flex4.5

我连续几个小时研究了这个问题。但我找不到它。我真的需要你指导 flex 移动应用程序。

我只想使用一个 xml 孩子（不是全部）

例如 ; 我只想要这个人的照片“艾伦鹧鸪”

这是 xml 文件： [http ://adobeevangelists.com/evangelists.xml](http://adobeevangelists.com/evangelists.xml)

这是我的项目；

```
 xmlns:s="library://ns.adobe.com/flex/spark" title="HomeView"  creationComplete="view1_creationCompleteHandler(event)" >

<fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;

        protected function view1_creationCompleteHandler(event:FlexEvent):void
        {
            adres.send();
        }

    ]]>
</fx:Script>

<fx:Declarations>       
    <s:HTTPService id="adres" url="http://adobeevangelists.com/evangelists.xml"/>                
</fx:Declarations>

<s:Image id="picture" x="50" y="500" source="{adres.evangelist.(name == 'Allen Partridge').profileimage}" /> 

<s:List left="0" right="0" top="0" bottom="500" dataProvider="{adres.lastResult.evangelists.evangelist}" labelField="name" ></s:List> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:07:57.977

如果您只想要 的第一个元素`evangelists`，您可以简单地执行以下操作：

```
evangelistsXML.evangelist[0] 
```

你也可以搜索一个值，所以如果你“只想要 Allen Partridge 的头像”，你可以这样做（假设只有一个 Allen Partridge）：

```
evangelistsXML.evangelist.(name == 'Allen Partridge').profileimage 
```

# javascript - 在服务器和客户端之间共享 JavaScript 模型代码，这种方法有效吗？

> ID：14789183
> 
> 赞同：1
> 
> 时间：2013-02-09T14:36:37.877
> 
> 标签：javascript, node.js, backbone.js, requirejs, amd

我开始学习 Node.js 和 Backbone。我想在服务器和客户端之间共享一些代码（与[[1]](https://stackoverflow.com/questions/3225251/how-can-i-share-code-between-node-js-and-the-browser)和[[2]](https://stackoverflow.com/questions/11277870/can-the-code-in-the-server-of-node-js-be-accessed-by-the-client)相关）。更深入：

*   共享模型的**默认值**。默认值用于填充表单（客户端），而它们在服务器端强制执行
*   共享**验证规则**以便 DRY 并执行客户端/服务器验证
*   共享实例方法

所以我的想法是用一个`factory`对象来封装通用代码（默认值、验证规则、公共实例方法），并`factory`根据环境（Node.js 或 AMD 模块）适配对象。

这段代码又快又脏，可能不起作用。这是一个好方法还是只是浪费时间？

```
(function (factory) {
    if (typeof exports === 'object') { // Node.js
        var config    = require('../config/config.json'),
            Sequelize = require('sequelize'),
                    _ = require('underscore');

        var User = {
            receiveSms: {
                type: Sequelize.BOOLEAN, allowNull: false
            },
            receiveNewsletter: {
                type: Sequelize.BOOLEAN, allowNull: false
            }
        };

        // Add defaultValue for each returned by 
        _.each(factory.defaults, function (value, key) {
            if(_.has(User, key)) {
                User[key].defaultValue = value;
            }
        });

        module.exports = function () {
            (new Sequelize(config.database, config.username, config.password))
                .define('User', User);
        };
    } else if (typeof define === 'function' && define.amd) { // AMD
        define(['backbone', 'uderscore'], function (Backbone, _) {
            return Backbone.Model.extend(factory);
        });
    }
}(function () {
    return { // To be adapted
        defaults: {
            receiveSms: false,
            receiveNewsletter: true
        }
    }
})); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-04T20:38:07.020

就我个人而言，我会避开 requirejs，因为它要求你重写你的模块以适应他们的规范，随着 Ecmascript 标准的发展，它最终将失效。

目前，我建议研究“gulp”流式构建系统。使用它，您会发现将共享的 js 脚本通过管道传输到可公开访问的目录非常容易，然后可以从客户端加载该目录。将 node js 模块转换为浏览器脚本的一种常用技术是使用“浏览器”-魔术！

进程：gulp.src > gulp-browserify > gulp.dest > ??? > 利润。

进一步阅读：http: [//viget.com/extend/gulp-browserify-starter-faq](http://viget.com/extend/gulp-browserify-starter-faq)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:51:28.737

我认为使用 require.js 是一个更好的解决方案（尤其是对于在多个文件中使用下划线之类的框架）。您应该只对在运行时更改的对象使用工厂。例如一个购物车（但即使在这个例子中，我认为使用在实例化时作为参数提供给你的函数的骨干集合更合适）。在此处查看更多信息：[http ://requirejs.org/docs/node.html](http://requirejs.org/docs/node.html)

# svn - 从 svn 获取最新版本号

> ID：14789190
> 
> 赞同：2
> 
> 时间：2013-02-09T14:37:46.487
> 
> 标签：svn, svnkit

我创建了一个 SVN 存储库。我正在使用 SVN Kit 中提供的 api 提交文件。

```
ourClientManager.getCommitClient().doCommit(paths, keepLocks, "", force, recursive); 
```

在这样做之前，我想知道文件是否被其他人修改。我试图从 svn 获取最新的修订号或日期，并与文件上的进行比较。但我无法得到它。任何人都可以告诉我如何识别文件在我处理文件时被某些人修改过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T07:39:13.200

你可以结合：

*   “ [svnkit: 如何从 SVN DB 获取最新的修订号？](https://stackoverflow.com/questions/11223554/svnkit-how-to-get-latest-revision-number-from-svn-db) ” （获取 SVN 存储库的最新修订）

```
repository.setAuthenticationManager(authManager);
SVNDirEntry 条目 = repository.info(".", -1);
System.out.println("最新版本：" + entry.getRevision());

```

和：

*   " [Get previous modified revision of a file using svnkit](https://stackoverflow.com/questions/5462384/get-previous-modified-revision-of-a-file-using-svnkit) " (获取当前文件的过去修订版本)

```
logEntry.getRevision();

```

# android - QuickContactBadge 覆盖

> ID：14789194
> 
> 赞同：2
> 
> 时间：2013-02-09T14:38:35.563
> 
> 标签：android, quickcontactbadge

我在我的应用程序中使用 QuickContactBadge，它运行良好。

但是，徽章在右下角显示了一个小的叠加层。我想它在那里表明它是一张`QuickContactBadge`图片，而不仅仅是一张图片。我对此完全没问题，但是，由于我`Holo.Light`在我的应用程序中使用，联系人徽章显示为*黑色*覆盖。例如，在带有 的股票拨号器中`Holo.Dark`，覆盖层很浅。

我理解这样做的原因，但是在大多数联系人照片上，深色叠加层很难看，而浅色叠加层对大多数人都有效。

那么，我怎样才能覆盖覆盖，并强制徽章显示光（即 for `Holo.Dark`）覆盖？

查看 Android 源代码`QuickContactBadge`，`Drawable`覆盖层的`mOverlay`, 是私有的，因此无法从我的应用程序直接访问。在`Drawable`构造函数中设置：

```
public QuickContactBadge(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);

    TypedArray styledAttributes = mContext.obtainStyledAttributes(R.styleable.Theme);
    mOverlay = styledAttributes.getDrawable(
            com.android.internal.R.styleable.Theme_quickContactBadgeOverlay);
    styledAttributes.recycle();

    mQueryHandler = new QueryHandler(mContext.getContentResolver());
    setOnClickListener(this);
} 
```

我假设我必须扩展整个`QuickContactBadge`类来解决这个问题，但我对 Android 和 Java 都很陌生，所以我不知道如何做到这一点。我之前已经扩展`ListAdapter`了 s，但是当我尝试扩展这个徽章时，我遇到了必须访问内部 Android 资源的问题，而我不能。

我能想到的另一个解决方案是“欺骗”我正在使用的徽章，`Holo.Dark`但我不知道该怎么做。

有没有人做过类似的事情，或者至少可以为我指明正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:49:41.453

尝试使用 ImageView 而不是 QuickContactBadge

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-04T20:15:02.427

在 SDK 21 中，Google 添加了一个`setOverlay(Drawable drawable)`方法。

它接受 null，因此隐藏装饰器并保留 QuickContactBadge 功能的另一个选项是：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
    contactBadge.setOverlay(null);
} 
```

# php - 在 php 中将 .jpg url 替换为 .mp4 新扩展名

> ID：14789200
> 
> 赞同：-2
> 
> 时间：2013-02-09T14:39:13.830
> 
> 标签：php

我希望有人可以提供一些建议。

我有图像位置（示例） src="http://www.abc.com/uploads/images/name123.jpg" （我已经在使用图像）

我现在为每个图像都有一个视频，我将视频命名为与图像相同，并希望继续使用页面上的图像

即：[http ://www.abc.com/uploads/videos/name123.mp4](http://www.abc.com/uploads/videos/name123.mp4)

如果可以，请提供帮助，希望有一些优雅的字符串替换功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:47:45.757

如果您只想将“.jpg”替换为“.mp4”，请尝试使用`str_replace()`.

```
 $src="http://www.example.com/uploads/images/name123.jpg";
$src2 = str_replace('.jpg', '.mp4', $src);
echo $src2; 
```

# java - 如何拆分ArrayList的元素？

> ID：14789205
> 
> 赞同：0
> 
> 时间：2013-02-09T14:39:49.530
> 
> 标签：java, arraylist

我有`ArrayList`。我需要用 "," 分割这个 ArrayList 的每个元素，结果得到 `ArrayList<ArrayList<String>>`. 如何正确地做到这一点？这是我尝试过的代码：

```
ArrayList<ArrayList<String>> list = new ArrayList<ArrayList<String>>();
   try {
    ArrayList<String> lines = rf.readLines(filename);         
        for (int i = 0; i<=lines.size(); i++){
            String[] items = lines.get(i).split(",");
        }
    }  
    catch(IOException e)  
    {   
        System.out.println("Unable to create "+filename+": "+e.getMessage());                
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T14:47:28.527

您需要将`line`数组转换为 an`ArrayList`并将其添加到`list`. 这应该可以解决问题。

```
list.add(new ArrayList<String>(Arrays.asList(items))); 
```

# php - 过滤文件扩展名的 if 语句

> ID：14789206
> 
> 赞同：0
> 
> 时间：2013-02-09T14:39:49.973
> 
> 标签：php

我正在创建一个允许用户上传图像的脚本，但现在我想包含一个简单的 if 语句，它只接受 gif 和 png 。这是我的代码，但它似乎没有按照它必须的方式工作。

```
#extention filter
$allowed = array("image/gif","image/png");  
if(!in_array($files,$allowed)){
 $error_message = 'Only jpg, gif, and pdf files are allowed.';
  $error = 'yes';
  echo $error_message;
  exit();
}   #extention 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T15:01:19.217

```
 $filename=$_FILE['name']['filename_in_html'];  //you can change this with your filename
    $allowed='png,jpg';  //which file types are allowed seperated by comma

    $extension_allowed=  explode(',', $allowed);
    $file_extension=  pathinfo($filename, PATHINFO_EXTENSION);
    if(array_search($file_extension, $extension_allowed))
    {
        echo "$extension_allowed allowed for uploading file";
    }
    else
    {
        echo "$extension_allowed is not allowed for uploading file";
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T14:55:48.507

```
$file_type = $_FILES['name']['type']; //returns the mimetype

$allowed = array("image/png", "image/gif", "application/pdf");
if(!in_array($file_type, $allowed)) {
  $error_message = 'Only png, gif files are allowed.';
  $error = 'yes';
} 
```

希望它可以帮助解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T14:41:39.000

```
$path_parts = pathinfo('/path/emptyextension.');
var_dump($path_parts['extension']); 
```

这将返回确切的扩展名，您可以根据需要进行比较。

# c# - 带有文本框控件的 AJAX 触发器

> ID：14789214
> 
> 赞同：0
> 
> 时间：2013-02-09T14:40:39.933
> 
> 标签：c#, asp.net, ajax, triggers, controls

当我将 ID 为“MessageTextBox”的“TextBox”控件放入 ID 为“UpdatePanel2”的 UpdatePanel 的“触发器”中时，这个 ID 为“MessageTextBox”的“TextBox”不想通过 AJAX 回发。ID 为“MessageButton”的“Button”控件工作正常，但这个 TextBox 不想工作。为什么 ？

```
 <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
    <br />

         <asp:TextBox ID="MessageTextBox" runat="server" AutoPostBack="true" Height="150px" Width="400px"></asp:TextBox>

    <br />    
        <asp:Button ID="MessageButton" runat="server" Text="Send" OnClick="MessageButton_Click" />
    <br />
    <br />
    <asp:UpdatePanel ID="UpdatePanel2" runat="server">
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="MessageButton" />
            <asp:AsyncPostBackTrigger ControlID="MessageTextBox" />
        </Triggers>
        <ContentTemplate>
             <asp:DataList ID="ChatDataList" runat="server" >
        <HeaderTemplate>
            <table style="border:1px solid red">
        </HeaderTemplate>
        <ItemTemplate>
                <tr>
                    <td><asp:Label ID="lblRaterName" runat="server" Text='<%#      Eval("Text")%>'></asp:Label></td>
                </tr>
        </ItemTemplate>                 
        <FooterTemplate>
            </table>
        </FooterTemplate>
    </asp:DataList>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

**当我像这样包装这个“TextBox”控件时，一切正常，但我更喜欢触发器的其他方式（不像上面的代码那样工作的方式）：**

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
             <asp:TextBox ID="MessageTextBox" runat="server" Height="150px" Width="400px"></asp:TextBox>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:51:18.993

您应该`EventName`在您的`AsyncPostBackTrigger`:

```
<asp:AsyncPostBackTrigger ControlID="MessageTextBox" EventName="TextChanged" /> 
```

*只有*失去焦点时，TextBox 才会触发回发。

或者，您可以使用[ScriptManager.RegisterAsyncPostBackControl](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.registerasyncpostbackcontrol.aspx)方法注册您的文本框`Page_Load`：

```
ScriptManager1.RegisterAsyncPostBackControl(MessageTextBox); 
```

或者您甚至可以使用脚本强制更新面板回发：

```
<script type="text/javascript">
        function refreshUpdatePanel() {
            __doPostBack('<%= UpdatePanel2.UniqueID %>', '');
        }
</script>
<asp:TextBox ID="MessageTextBox" runat="server" AutoPostBack="true" Height="150px" Width="400px" onblur="javascript:refreshUpdatePanel()"></asp:TextBox> 
```

# c++ - Visual Studio 中的嵌套 lambda

> ID：14789215
> 
> 赞同：2
> 
> 时间：2013-02-09T14:40:40.737
> 
> 标签：c++, c++11, lambda, visual-studio-2012

我正在尝试在 Visual Studio 2012 中保存一个嵌套的 lambda 函数。

```
class Wrap
{
public:
  typedef function<void(Wrap*)> Method;
  Method method;
  std::map<string, Wrap> methods;
};

Wrap x;
x.method = [](Wrap *arg) {
    Wrap::Method t = [](Wrap*) {};
    arg->methods["child"].method = t;
}; 
```

这会产生此错误：

> 错误 C2678：二进制`'<'`：未找到采用左操作数类型的运算符`const std::string`（或没有可接受的转换）

我不能对这个错误做出正面或反面。

我已经在 g++ 和 clang 中对此进行了测试。他们可以编译它。 [http://liveworkspace.org/code/4kVlUY$72](http://liveworkspace.org/code/4kVlUY%2472)

我将如何让 Visual Studio 编译它？任何解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T14:53:02.160

该问题与您的期望完全无关：

```
#include <string> 
```

解决它。似乎比较运算符需要`<string>`显式包含，而如果包含 just ，则定义类本身`<map>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:52:59.307

您的代码可以使用 GCC 4.7.2、Clang 3.2、ICC 13.0.1 正常编译。

**如果**您在 LiveWorkSpace 上发布的示例中省略了标头，它`#include`在VC10 上也可以正常编译。`<string>`

可能，stdlibc++ 实现包括您直接从其他头文件中获取的头文件`#include`，而 MS 的 C++ 标准库实现并非如此。

尝试添加该`#include`指令，问题应该会消失。

# database - PL/SQL 触发器从一个表上的 INSERT 更新另一个表

> ID：14789223
> 
> 赞同：5
> 
> 时间：2013-02-09T14:42:04.147
> 
> 标签：database, oracle, plsql

我正在使用 SQL 和 Oracle 数据库，需要一些帮助 - 触发器是我难以理解的东西。

当我将一行插入表 A 时，我需要一个触发器，以便它更新表 B 上的一行：特别是主键与刚刚添加到表 A 的行的相应外键匹配的行。

因此，例如表 A 中的列 X 是引用表 B 中的列 Y（主键）的外键。当我向表 AI 中添加一行时，需要表 B 的列 Z 将 1 添加到其列 X = Y 列的行中的数值。

根据我对触发器的有限理解，这是我迄今为止在 SQL 中所能得到的，以防它有帮助（我意识到它不是很好，将其视为伪代码）：

```
CREATE OR REPLACE TRIGGER test_trig
AFTER INSERT OR UPDATE ON tableA
FOR EACH ROW

BEGIN
  UPDATE tableB
  SET columnZ = columnZ + 1
  WHERE tableA.columnX = tableB.columnY;
END test_trig;
/ 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T15:16:10.137

尝试这个 ：

语法将是

```
CREATE OR REPLACE TRIGGER test_trig
AFTER INSERT OR UPDATE ON tableA
FOR EACH ROW

BEGIN
  UPDATE tableB
  SET columnZ = columnZ + 1
  WHERE tableB.columnX = :NEW.columnX;
END test_trig; 
/ 
```

:new.columnX 引用表 A columnX。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:04:36.493

足够好的开始。

首先-让我们解决这个问题-这没有很好地标准化-您描述的值似乎应该在运行时而不是在数据操作时计算。

考虑以下：

插入 = +1 到列 - 好的

更新=？我想并不总是对该列 +1 - 可能仅在修改某些其他数据时。例如 - 如果我更新表一个集合 col1=col1。也许你想要的也许不是。

删除=？删除是否意味着列的-1？

对于语法：

```
WHERE tableA.columnX = tableB.columnY; 
```

应该

```
WHERE :new.columnX = tableB.columnY; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T15:17:54.547

如果 tableB.columnZ 表示被引用的 tableA 记录的计数，那么除非 tableA 的引用列可以更改，否则触发 tableA 的 UPDATE 是没有意义的。

第一种情况：tableA.ReferenceColumn 不变：

```
CREATE OR REPLACE TRIGGER test_trig
AFTER INSERT ON tableA
FOR EACH ROW
BEGIN

  UPDATE tableB
  SET columnZ = columnZ + 1
  WHERE tableB.columnX = :NEW.columnX;
END test_trig;
/ 
```

第二种情况：tableA.ReferenceColumn 确实发生了变化：

```
CREATE OR REPLACE TRIGGER test_trig
AFTER INSERT OR UPDATE OF columnX ON tableA
FOR EACH ROW

BEGIN

  IF UPDATING AND nvl(:OLD.columnX,0) <> 0 THEN
      UPDATE tableB
      SET columnZ = columnZ - 1
      WHERE tableB.columnX = :OLD.columnX;
  END IF:

  IF nvl(:NEW.columnX,0) <> 0 THEN
      UPDATE tableB
      SET columnZ = columnZ + 1
      WHERE tableB.columnX = :NEW.columnX;  
  END IF;

END test_trig;
/ 
```

第三种情况：tablaA 记录可以被删除：

```
CREATE OR REPLACE TRIGGER test_trig
AFTER INSERT OR DELETE OR UPDATE OF columnX ON tableA
FOR EACH ROW

BEGIN
  IF (UPDATING OR DELETING) AND nvl(:OLD.columnX,0) <> 0 THEN
      UPDATE tableB
      SET columnZ = columnZ - 1
      WHERE tableB.columnX = :OLD.columnX;
  END IF:

  IF nvl(:NEW.columnX,0) <> 0 THEN
      UPDATE tableB
      SET columnZ = columnZ + 1
      WHERE tableB.columnX = :NEW.columnX;  
  END IF;
END test_trig;
/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T22:23:30.533

我猜你正在为（A）保留历史（B）计数器或（C）数据完整性问题实施某种机制。如果是这种情况，我建议使用 pl/sql 包执行更新，该包将处理所有必要的更新/其他 DML 操作。应用程序通过 pl/sql 包更新数据是最佳实践。通过这种方式，您可以在内部控制流程，并且更易于维护。另外，当您忘记该表上有触发器时，您可以在将来保存自己的问题。

我可以为您提供一个关于触发器的提示 -**在您决定使用触发器之前，请确保您已经用尽了所有其他可能性**。

# java - 从泛型获取课程不起作用

> ID：14789226
> 
> 赞同：1
> 
> 时间：2013-02-09T14:42:33.743
> 
> 标签：java, generics

我现在真的很困惑。我在另一个项目中使用以下代码没有任何问题：

```
public class ReadOnlyTable<T extends Model> implements ReadOnly<T> {
protected at.viswars.database.framework.core.DatabaseTable datasource;
private boolean debug = true;

protected ReadOnlyTable() {
    initTable();
}

protected void reloadDataSource() {
    initTable();
}

private void initTable() {
    boolean readOnlyClass = false;
    if (getClass().getSuperclass().equals(ReadOnlyTable.class)) readOnlyClass = true;

    Class<T> dataClass = (Class<T>) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0]; 
```

最后一行将毫无问题地运行。现在我做了第二个项目，因为我在阅读课程时遇到问题，我尝试做最简单的情况：

```
public class GenericObject<T> implements IGenericObject<T> {
public GenericObject() {
    init();
}

private void init() {
    Class<T> clazz = (Class<T>)((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0];
} 
```

}

这个类在这里被实例化：

```
 GenericObject<String> go = new GenericObject<String>(); 
```

在我的第二个示例中，我将始终收到以下错误消息：

线程“主”java.lang.ClassCastException 中的异常：java.lang.Class 无法转换为 java.lang.reflect.ParameterizedType

我错过了什么？？这让我发疯。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T21:44:52.930

无法从中`String`检索`go`。对象实例化表达式 ( `new GenericObject<String>()`) 的类型参数在运行时的任何地方都不存在。这是类型擦除。

*当一个类*或*接口*扩展或实现具有特定类型参数的另一个类或接口时，您尝试使用的技术关注。例如`class Something extends GenericObject<String>`。那么就可以从类对象中得到这个*声明信息了。*这与您正在做的事情完全无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T14:50:53.443

您正在调用`getGenericSuperclass()`，但您的类没有*通用*超类。它的超类是`Object`，不能`ParameterizedType`像错误所说的那样转换为。

您可能想要使用`getGenericInterfaces()[0]`，因为您的类只实现了一个接口。

更多信息在这里：[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getGenericInterfaces()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getGenericInterfaces())

# php - 加载器，它还显示网页加载的百分比

> ID：14789230
> 
> 赞同：2
> 
> 时间：2013-02-09T14:43:12.247
> 
> 标签：php, javascript, jquery, html, ajax

我的网站上有一个加载器，它在显示任何文本、图片和其他内容之前加载网页的所有照片。因此，我将背景、主包装器（带有设计）等的代码与页面中的所有图像（`style="width:0;height:0;visibility:hidden;"`以及其他使它们不可见的东西）一起放置。有了这个，我放了一些东西说加载.......

**HTML：**

```
<body onLoad="load()">
<div class="main-wrapper" id="main-wrapper">
     <p>Loading.....</p>
</div>
<img src="xxxxx" class="hidden">
<img src="xxxxx" class="hidden">
<img src="xxxxx" class="hidden">
<img src="xxxxx" class="hidden"> 
```

**Javascript：**

```
function load()
{
document.getElementById('main-wrapper').innerHTML = "Text I Want <img src="x"";>
} 
```

这使得我想要在加载所有图像后显示的文本。现在我在 .innerHTML=""; 中编写我想要的内容没有问题。

请告诉我一种方法，以便我也可以告诉使用任何编码语言加载的百分比。还请告诉我是否有更好的方法来做到这一点，但同时告诉加载百分比。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:06:03.233

一个简单的解决方案，只计算图像的数量而不考虑图像的大小，就像（只是一个简单的例子......）：

```
function loadPage(html) {
  // html contains the html to add to #main-wrapper

  // put the html in an element to count the images in it
  var el = $("<div>").html(html);
  var imgCount = el.find("img").length;
  var count = 0;
  var percentage = 0;

  $("img", el).load(function() {
    count++;
    if (imgCount === count) {
      $("#main-wrapper").html(html);
    } else {
      percentage = (count / imgCount) * 100;
      $("#main-wrapper").html("loading ("+ percentage + "%) ...");
    }
  });
} 
```

在加载之前很难获得图像大小；我最近没有尝试过，但在 Firefox 中很容易获得尺寸之前，但不可能将它们放入例如 webkit 中。

# iphone - 在 iPhone monotouch 的屏幕之间传输数据（比如 Monodroid Intent on monotouch）

> ID：14789233
> 
> 赞同：0
> 
> 时间：2013-02-09T14:44:03.337
> 
> 标签：iphone, xamarin.ios

在 monodroid 做一些操作时，我使用了 Intents。例如，在“保存的搜索”和“搜索”页面的一个应用程序中，我有一个活动，当我想调用这个活动时，我使用了这样的代码：

```
 var filename = SearchFileList [args.Position];
            Intent intent = new Intent (this, typeof(SearchAroundYouActivity));
            intent.PutExtra (AppConstants.SearchAction, AppConstants.SavedSearch);
            intent.PutExtra (AppConstants.SearchOption, StorageClass .SearchPath +"/" + filename + "/State.rsf");
            intent .PutExtra (AppConstants .SavedSearchName , StorageClass .SearchPath +"/" + filename);
            StartActivity (intent); 
```

然后在创建活动中使用此代码：

```
action = Intent.GetStringExtra (AppConstants.SearchAction);
            if (action == AppConstants.SavedSearch) {
                NormalFilter = ((RPLApp)Application).typeOfShow.Content .filter .ToString ();
                ((RPLApp)Application).typeOfShow.Load (Intent.GetStringExtra (AppConstants.SearchOption));
                SaveName = Intent .GetStringExtra (AppConstants .SavedSearchName );
            } 
```

通过这种方法，我可以检测是否加载保存的数据或运行新的搜索。

问题是这样的：我们如何在 monotouch 中做这样的事情？

也许我们可以在屏幕类中定义一些静态变量，然后检查它们的值是否适合这个提议，但是这样的解决方案是否是推荐的、好的和最好的方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:45:29.640

在 iOS 上，您应该能够像通常在 C# 中那样在 2 个类之间传递这些值。Android 在要求东西被序列化和传递方面有点奇怪`Intent`。

因此，例如，您可以在点击事件中执行以下操作：

```
var myController = new MyController();
myController.SetSomeField = true; //Or pass anything you want in via properties or methods
PresentViewController(myController, true, null); 
```

如果您想获得更多“跨平台-y”，您可以为两个平台使用信使实现。我[这里](https://github.com/jonathanpeppers/XPlatUtils/blob/master/XPlatUtils/Messenger.cs)有一个，我认为 MvvmCross 正在开发一个——不确定它是否还在。

# javascript - 使用 jQuery/JS 获取并相应地乘/除它的内容

> ID：14789244
> 
> 赞同：2
> 
> 时间：2013-02-09T14:45:19.293
> 
> 标签：javascript, jquery, html, css

我正在为希望使用 Intel GM965 芯片组升级其处理器的用户开发一个易于使用的比较表。可以在这里找到 - [http://dylricho.com/archive/gm965/](http://dylricho.com/archive/gm965/)

我实际上是为自己制作的，因为我很快就会从 M 575 升级到 T9500，但我想我还是把它上传给其他人使用。

无论如何，我一直在尝试找到一种简单的方法来使用 jQuery/JavaScript 将数字（在表格单元格元素中找到）乘以或除以 1000。例如，如果用户想要转换千兆赫兹，则可以使用此方法到兆赫，所以比较多个 CPU 更容易。

正如您从上面的链接中看到的那样，我有一种工作方式，尽管我必须在 JS 文件中手动列出每个处理器条目。我希望有一种简单的方法来获取**时钟频率**列的每个值，然后单击表头中的红色单位进行乘法或除法。

在我看来，我有一个这样的代码，它看起来应该可以工作，但它没有：

```
$('.clock').text() / 1000; // To get back to GHz from MHz 
```

为方便起见，下面列出了必要的 JS 文件：

*   dylricho.com/archive/gm965/changeTitlesOnLoad.js
*   dylricho.com/archive/gm965/convertClockToMHz.js
*   dylricho.com/archive/gm965/convertClockToGHz.js

在*convertClockToMHz.js*文件中，您可以看到我当前正在手动列出每个处理器条目。

我知道我可以继续手动完成所有操作，但列表会相当大，如果使用一行代码会更好。

谢谢你，迪伦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T14:54:04.173

`$('.clock').text() / 1000;`不做任何事情，因为您没有传递任何参数`text()`来更新 DOM。

试试这个：

```
$('.clock').text(function(index, oldText){    
     return parseFloat( oldText / 1000, 2);    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:53:11.553

另一种方法是预先计算表中的所有值并隐藏显示选定的值

```
<table>
    <td>
        <div class="field degrees faren">32</div>
        <div class="field degrees celci">0</div>
    </td>
</table> 
```

然后像

```
$(".field.degrees").hide('fast')
$(".field.degrees.celci").show('fast') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T14:54:50.147

```
$("#clock-2 a").click( function() {
     $(".clock").each( function() {
         var s = parseFloat($(this).text(), 10);
         var num = s/1000;
         $(this).html(num);
      });
}); 
```

# .htaccess - .htaccess：不同主机的不同AuthUserFile路径

> ID：14789246
> 
> 赞同：1
> 
> 时间：2013-02-09T14:45:27.517
> 
> 标签：.htaccess, .htpasswd

我正在开发一个必须在本地和远程服务器上运行的应用程序。使用文件保护一个`htpasswd`目录。这就是我必须在`htpasswd`文件中定义文件路径的方式`htaccess`：

```
AuthUserFile ../app/some-folder/.htpasswd 
```

不幸的`app`是，服务器上需要该文件夹，但我在本地没有该文件夹。相反，路径必须如下所示：

```
AuthUserFile /Volumes/some/very/long/path/some-folder/.htpasswd 
```

我们是否可以在 if/else 语句中根据当前主机切换此 AuthUserFile 路径（**编辑：**或者更好的是，本地不需要任何身份验证）？或者是否有另一种解决方法可以使这个文件在我的本地和远程主机上都工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T09:33:56.040

没关系，我想通了。我把这个放在我的`.htaccess`：

```
AuthName "Protected"
AuthType Basic
AuthUserFile path/to/.htpasswd
Require valid-user
Order deny,allow
Deny from all
Allow from 127.0.0.1
Satisfy Any 
```

这允许从本地 IP 建立的任何连接无需输入密码即可通过。不完美，但适用于我的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-27T15:17:13.090

在 Apache 2.4+ 中，您可以使用带有in的`If`指令。`%{HTTP_HOST}``.htaccess`

```
<If "%{HTTP_HOST} == 'localhost'">
AuthUserFile /development-path/.htpasswd
</If>

<Else>
AuthUserFile /production-path/.htpasswd
</Else> 
```

# highcharts - d.select 不是函数

> ID：14789250
> 
> 赞同：1
> 
> 时间：2013-02-09T14:45:49.810
> 
> 标签：highcharts

我正在尝试使用向下钻取饼图（请参阅[jsfiddle](http://jsfiddle.net/Lzhm6/16/ "jsfiddle")）。我在以下帖子中找到了答案： [Highcharts Pie Chart Drilldown not shown on third Drill](https://stackoverflow.com/questions/7422616/highcharts-pie-chart-drilldown-not-showing-on-third-drill)

这完美地满足了我的需求，但是当我单击饼图向下钻取到下一个级别时出现错误。错误是： `d.select is not a function`即在`d.select(null,a.ctrlKey||a.metaKey||a.shiftKey)`

你能帮帮我吗？？？？

谢谢JC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:25:36.450

解决方案非常简单。默认情况下，单击事件选择点（单击此处的任意点：http: [//highcharts.com/demo/pie-basic](http://highcharts.com/demo/pie-basic)）。

在您的点单击处理程序中，您破坏了单击点（通过使用 setData 方法设置新数据），但您不取消默认操作，因此 Highcharts 试图选择不存在的点，这会导致错误。

正如我之前写的，解决方案很简单，你可以在

```
point: {
  events: {
    click: function() {
      var drilldown = this.drilldown;

      if (drilldown) { // drill down
        setChart(drilldown.name, drilldown.categories, drilldown.data, drilldown.color);
      } else { // restore
        setChart(name, categories, data);
      }

      // return false to prevent default action
      return false;
    }
  }
}, 
```

在这里你可以找到一个工作演示：http: [//jsbin.com/ocegap/1](http://jsbin.com/ocegap/1)

# ffmpeg - 为 windows phone 8 构建 ffmpeg

> ID：14789252
> 
> 赞同：6
> 
> 时间：2013-02-09T14:46:04.397
> 
> 标签：ffmpeg, h.264

我如何为 windows phone 8、arm 构建 ffmpeg？我找不到任何关于它的信息。

我可以在 windows phone 8 中从 c++ 调用 h.264 硬件编码器/解码器吗？看起来媒体基金会太有限了。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:42:37.270

AFAIK 由于缺少工具链，目前无法为 Windows Phone 8 编译 ffmpeg。但是有一个 Windows 8 端口的 kickstarter 项目（[http://www.kickstarter.com/projects/1061646928/vlc-for-the-new-windows-8-user-experience-metro](http://www.kickstarter.com/projects/1061646928/vlc-for-the-new-windows-8-user-experience-metro)），说明会有还有一个适用于 ARM 平板电脑的版本。一旦他们使用可能的工具链发布项目，该项目很可能也可以针对 Windows Phone 8 进行编译（可能进行一些修改）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T22:44:02.410

Checkout MoliPlayer for Windows Phone 8。它应该使用 FFMPEG 作为解码器库来支持各种视频/音频编解码器。（还有别的事吗？）

所以我猜FFMPEG可以为WP8编译。但是，MoLi 团队可能不会分享他们定制的构建 GCC 工具链。

# java - 为每个列表项创建一个带有服装背景的列表

> ID：14789255
> 
> 赞同：0
> 
> 时间：2013-02-09T14:46:16.113
> 
> 标签：java, android, android-layout, android-listview

我刚开始使用 Android，我在网上搜索我找不到我的问题的解决方案：

我有一个哈希图，其中键是课程名称，值是截止日期前的天数。我想从这个哈希图中列出一个列表，如果我有不到 1/2 天，则该项目的背景颜色为红色，否则为绿色。

我开始使用阵列适配器，但找不到解决方案：

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
    R.layout.list_costum_text, R.id.list_content, values);

    setListAdapter(adapter); 
```

目前“values”只是一个带有课程名称的数组。我现在正在查看 Costum 适配器，但我仍然对它们有一些问题

编辑：

如果我按照关于 vogella 的教程进行操作，我可以完成这项工作（我正在修改主要活动）：

```
import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ArrayAdapter;

public class MainActivity extends ListActivity {
  public void onCreate(Bundle icicle) {
  super.onCreate(icicle);

   String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
    "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
    "Linux", "OS/2" };

   ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
    R.layout.list_costum_text, R.id.red_list, values);

setListAdapter(adapter);

setContentView(R.layout.activity_main);
 }
 } 
```

其中activity_main.xml 是一个ListView 布局，list_costum_text 包含两个编辑文本（一个是red_list）。

我无法理解自定义适配器的工作原理，也是因为我无法在主要活动中对其进行测试！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:56:28.290

您应该通过扩展 ArrayAdapter 创建自定义适配器，然后编写自己的 getView() 方法。

在评论中请求后的附加信息

任何适配器大致做的是：它为每个项目获取您的 xml 布局，膨胀然后用值填充 UI 元素。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.rowlayout, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.label);
    ImageView imageView = (ImageView) rowView.findViewById(R.id.icon);
    textView.setText(values[position]);
    // Change the icon for Windows and iPhone
    String s = values[position];
    if (s.startsWith("iPhone")) {
      imageView.setImageResource(R.drawable.no);
    } else {
      imageView.setImageResource(R.drawable.ok);
    }
return rowView; 
```

}

这只是取自[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)的示例，但您会明白的。这并不难。

# jquery - jQuery UI 不会将主题应用于按钮

> ID：14789257
> 
> 赞同：0
> 
> 时间：2013-02-09T14:46:40.477
> 
> 标签：jquery, css, jquery-ui, button, jquery-ui-button

我想将 jQuery UI 主题应用到按钮上，但我做不到！为什么？这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<html>
<head>
<script src="_code/js/jquery.js" type="text/javascript"></script>  
<script src="_code/js/jquery-ui-1.10.0.custom.min.js" type="text/javascript"></script>
<link href="_code/css/redmond/jquery-ui-1.10.0.custom.min.css" rel="stylesheet" type="text/css">
</head>
<body>
<button>Button</button>
</body>
</html> 
```

结果是一个没有 jQuery UI 主题的普通按钮！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:53:15.597

那是因为您还没有写任何关于将特定主题应用于按钮的内容。请了解 jquery 的基本语法和用法：[w3schoos.com](http://www.w3schools.com/jquery/default.asp)。您链接的文件通常会为它们提供 javascript 函数，这些函数会在您编写一些 jquery 代码时发生。还需要一些 jquery 代码。如果您是从网站上获取的，请获取完整的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T14:58:22.310

jQuery UI 与 jQuery Mobile 不同，它不会自动将小部件应用到页面中的元素。

您必须在元素周围显式创建一个[按钮](http://api.jqueryui.com/button/)`<button>`小部件：

```
$(document).ready(function() {
    $("button").button();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T16:10:51.113

这是因为您刚刚包含了 jquery UI 文件。如果您出于不同目的调用 jquery UI 中可用的功能，则 jquery UI 可以工作。例如-

$( "#txtprofession" ).autocomplete({ source: availableTags });

这是自动完成功能的代码。这里是“#txtprofession”，这是我希望在其上实现自动完成功能的文本框的 ID。如果我不调用 jquery UI 中可用的 autocomplete() 函数，直到那时 jquery UI主题不会在文本框上实现，因为某些类将通过调用该函数在该文本框上传递。

# objective-c - 如何在采用 NSString 的方法中使用 NSMutableString？

> ID：14789265
> 
> 赞同：1
> 
> 时间：2013-02-09T14:47:50.897
> 
> 标签：objective-c, cocoa, nsmutablestring, nsscanner

NSScanner 接受一个指向 NSString 的指针：

```
NSMutableString *myString;
...
[scanner scanUpToCharactersFromSet:charSet intoString:&myString];
[myString appendString:@"hello"]; 
```

但是 myString 是可变的，所以当我稍后尝试进行追加时出现错误，说我正在尝试改变一个不可改变的。我是否必须创建临时副本并来回移动，还是有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T15:37:49.933

要么做

```
NSString *myString; //this is just a variable identifier, no object was created and assigned to it yet
...
//scanner will create a NSString and write it to myString. It won't know it is passed to a variable typed NSMutableString or NSString
[scanner scanUpToCharactersFromSet:charSet intoString:&myString];

//instead of creating mutable string you can create a new immutable by appending a string
myString = [myString stringByAppendingString:@"hello"]; 
```

或[更好：查看下一个代码片段]

```
NSMutableString *myString; //this is just a variable identifier, no object was created and assigned to it yet
...

//scanner will create a NSString and write it to myString. It won't know it is passed to a variable typed NSMutableString
[scanner scanUpToCharactersFromSet:charSet intoString:&myString];
//myString contains a NSString now, not NSMutableString

myString = [myString mutableCopy]; // make a mutable copy and assign it to the variable
[myString appendString:@"hello"]; 
```

* * *

在第二种方法中，您将在短时间内不一致 NSMutable 类型变量将保存不可变字符串。这绝对是一个缺陷。解决方案一更清洁。如果你喜欢两个，你应该引入第二个 NSString 变量并将其传递给扫描仪，然后将它的可变副本传递给你的 NSMutableString。

```
NSString *tempString;
NSMutableString *myString; 
...

[scanner scanUpToCharactersFromSet:charSet intoString:&tempString];

myString = [tempString mutableCopy];
[myString appendString:@"hello"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T15:49:48.240

如果您需要**重复**多次，请只使用一个可变字符串：

```
NSMutableString *mutableString = [NSMutableString string];
NSString *string = nil;

[scanner scanUpToCharactersFromSet:charSet1 intoString:&string];
[mutableString appendString:string];

[scanner scanUpToCharactersFromSet:charSet2 intoString:&string];
[mutableString appendString:string];

//... 
```

无需复制它们或进行任何其他转换。

# macos - 使用自动布局时如何获得正确的帧原点？

> ID：14789273
> 
> 赞同：4
> 
> 时间：2013-02-09T14:48:42.343
> 
> 标签：macos, cocoa, nsview, autolayout

使用Interface Builder，我有一个带有多行NSTextField（标签）的NSView，在它的正下方是一个NSComboBox。由于标签的高度是动态的（例如，取决于使用的翻译），组合框的位置也是动态的（因为组合框的位置使用约束链接到标签）。

我试图在自动布局后获得组合框的正确位置。这样做一定很容易，但由于某种原因，我无法让它发挥作用。我可以使用 [NSViewfittingSize] 获得标签的调整大小，但 [NSView frame] 返回错误的 Y 位置（它只返回 IB 中使用的位置）。所以我的问题基本上是如何在自动布局后重新定位框架？

仅供参考，我在覆盖的 [NSView loadView] 方法中请求 frame 属性。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T14:30:09.830

你云观察你的 NSView 的框架：

```
@implementation MyViewController {
    BOOL _isViewFrameKVORegistered;
}

- (void)loadView
{
    [super loadView];

    [self registerViewFrameKVO];
}

- (void)willChangeViewFrame
{
    NSLog(@"will change frame");
}

- (void)didChangeViewFrame
{
    NSLog(@"did change frame");
}

# pragma mark KVO
- (void)registerViewFrameKVO {
    [self addObserver:self forKeyPath:@"view.frame" options:NSKeyValueObservingOptionNew | NSKeyValueObservingOptionPrior context:NULL];
    _isViewFrameKVORegistered = YES;
}

- (void)unregisterViewFrameKVO {
    [self removeObserver:self forKeyPath:@"view.frame"];
    _isViewFrameKVORegistered = NO;
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if([keyPath isEqualToString:@"view.frame"]) {
        if ([change[@"notificationIsPrior"] boolValue]) {
            [self willChangeViewFrame];
        } else {
            [self didChangeViewFrame];
        }
    }
}

- (void)dealloc
{
    [self unregisterViewFrameKVO];
}

@end 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T19:33:57.297

NSView 没有 loadView 方法。你是说 NSViewController 的 loadView 吗？如果是这样，我认为获得实际框架还为时过早。您可以尝试覆盖 updateConstraints 并在那里签入。在 iOS 中，您可以在 viewDidAppear 中执行此操作： -- 我不确定 OS X 的等效项是什么。另一种可能性是在 viewDidMoveToWindow 中。

# php - 使用子查询转换 SQL 语句

> ID：14789276
> 
> 赞同：0
> 
> 时间：2013-02-09T14:49:11.147
> 
> 标签：php, zend-framework

我正在使用 Zend Framework 开发一个网站。后端数据库是 MySQL。当我将以下 SQL 复制并粘贴到 phpMyAdmin 时，它的执行没有任何错误。但是，我无法将这样的 SQL 转换为带有多个子查询，因此它可以在 Zend Framework 之上运行。

```
update 
    tb_data_proposal_crpf_reviewer
set
    is_commented = 0
where
    id IN (
    select 
        t.id
    from
        (
        select
            r.id as id
        from
            tb_data_proposal_crpf_reviewer r
            left join tb_data_panel_member m on m.id = r.panel_member_id
        where
            r.proposal_crpf_id = :crpf_id and
            r.is_commented = 1 and
            m.panel_code IN (
                select
                    distinct(s.panel_code)
                from
                    tb_data_proposal_crpf_stage s
                where
                    s.proposal_crpf_id = :crpf_id and
                    s.crp_stage_code = 1
            )
        ) as t
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:54:46.220

所有子查询都需要有一个别名，因此请尝试更新：

```
 where
        s.proposal_crpf_id = :crpf_id and
        s.crp_stage_code = 1
) 
```

到

```
 where
        s.proposal_crpf_id = :crpf_id and
        s.crp_stage_code = 1
) as u
  ^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:00:04.377

如果第一个查询给出的结果与第二个查询相同，您可以拆分逻辑以首先加载所有受影响的 id，然后通过通常的 Zend 方法对其进行更新。

不幸的是，我无法验证第一个查询。

第一的：

```
select
  distinct(r.id) as id
from
  tb_data_proposal_crpf_reviewer AS r
  left join tb_data_panel_member AS m
    on
      m.id = r.panel_member_id
        and
      m.panel_code = r.panel_code
where
  r.proposal_crpf_id = :crpf_id
    and
  r.is_commented = 1
    and
  r.crp_stage_code = 1 
```

第二：

```
select
    r.id as id
from
    tb_data_proposal_crpf_reviewer r
    left join tb_data_panel_member m on m.id = r.panel_member_id
where
    r.proposal_crpf_id = :crpf_id and
    r.is_commented = 1 and
    m.panel_code IN (
        select
            distinct(s.panel_code)
        from
            tb_data_proposal_crpf_stage s
        where
            s.proposal_crpf_id = :crpf_id and
            s.crp_stage_code = 1
    )
) as t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T02:15:38.883

在这里查看 Mindlock 的答案，它使用子查询对我有用，希望它也能帮助你

[zend-framework-zend-db-select-how-to-join-custom-subquery-table](https://stackoverflow.com/questions/5792229/zend-framework-zend-db-select-how-to-join-custom-subquery-table)

# c# - 将 UTC 时间转换为 DateTime 对象

> ID：14789277
> 
> 赞同：0
> 
> 时间：2013-02-09T14:49:23.950
> 
> 标签：c#, .net

我有一个 UTC 时间字符串，我需要在 C# 中的 Datetime 对象中进行转换。

我已经尝试了以下示例，但它不起作用。任何人都可以帮忙吗？

```
long ticks = long.Parse(ateOn);
DateTime ateOnDate = new DateTime(ticks,DateTimeKind.Utc); 
```

其中 ateOn 是字符串中的 UTC 时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:56:54.747

```
long l = 1360417399227;
var dt = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc)
         .Add(TimeSpan.FromMilliseconds(l)); 
```

# vhdl - 超出非静态循环限制

> ID：14789278
> 
> 赞同：1
> 
> 时间：2013-02-09T14:49:24.350
> 
> 标签：vhdl, xilinx

我想实现用于 256 位向量的汉明权重计算的 K&R 算法。我在 vhdl 中编写了我的代码：

```
entity counter_loop is
    Port ( dataIn : in  STD_LOGIC_VECTOR (255 downto 0);
              dataOut : out STD_LOGIC_VECTOR (8 downto 0);
           threshold : in  STD_LOGIC_VECTOR (8 downto 0);
           clk : in  STD_LOGIC;
           flag : out  STD_LOGIC);
end counter_loop;

architecture Behavioral of counter_loop is
    signal val : STD_LOGIC_VECTOR (255 downto 0) := X"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF";
begin
    process (clk)
        variable count : STD_LOGIC_VECTOR (8 downto 0):= "000000000";       
    begin
        flag <= '0';
        val <= dataIn;
        --if(clk'event and clk = '1') then 
            while (val > 0) loop
                count := count+1;
                val <= (val and (val-1));
                if (count > threshold) then
                    flag <= '1';
                end if;
            end loop;
                dataOut <= count;
        --end if;
    end process;
end Behavioral; 
```

但是，在使用 Xilinx 合成它时，错误出现为

第 53 行：超出非静态循环限制

请问有什么线索吗？

PS：第 53 行是 - while (val > 0) 循环

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T19:17:25.707

因此，我将忽略实际符合时间安排的事情（`val - 1`很昂贵）并实际谈论您的逻辑。

这是您的一段代码：

```
signal val : std_logic_vector(255 downto 0) := (others => '1');

process (clk)
begin
    while (val > 0) loop
        val <= (val and (val-1));
    end loop;
end process; 
```

`val`是信号，不是变量。这意味着它将在您完成增量周期时更新。在这种情况下，永远不会。所以你有一个无限循环。

* * *

如果你只是想计算一个数字的popcount，那么你为什么不这样做呢。尽管我怀疑这也能满足时间要求（可能需要在多个时钟周期内分解）。

```
process (clk)
    variable count : std_logic_vector(8 downto 0) := "0" & x"00";
begin
    if rising_edge(clk) then
        for i in dataIn'range loop
            if dataIn(i) = '1' then
                count := count + 1;
            end if;
        end loop;

        dataOut <= count_i;
    end if;
end process; 
```

* * *

最后，大多数人会争辩说，为 C 代码设计的算法通常在硬件中表现不佳，因为硬件具有与固定处理器不同的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T14:17:30.723

您需要了解 a`signal`和之间的区别`variable`。

当您分配给 a 时，`signal`您只安排下一个时间点的更改（在像您这样的计时流程中，这是您的流程结束的时间，并且当前计划执行的所有其他流程也有）。

所以当你`val <= something`在一个循环中写的过程中，`val`只会被安排更新。当进程检查它的值时，`val`它看到的是当前值，而不是预定的值。您需要使用变量以这种方式跟踪事物。

但是，如其他地方所述，如果您只想计算那些，它会容易得多：

```
count:=0;
for i in dataIn'range loop
   if dataIn(i) = '1' then 
      count:=count+1; 
   end if;
end loop; 
```

# django - PyCharm 2.7 + django 1.4.3 + 无法导入flup.sever.fcgi_fork

> ID：14789282
> 
> 赞同：0
> 
> 时间：2013-02-09T14:49:41.007
> 
> 标签：django, pycharm, fastcgi, flup

操作系统：Windows 7 Django：1.4.3

**所采取的行动：**

*   从 PyCharm 2.6.3 升级到 PyCharm 2.7
*   打开一个在 PyCharm 2.6.3 上运行良好的项目。
*   `manage.py run`在 PyCharm 下运行
*   收到未安装flup的错误（在PyCharm 2.6.3中不需要flup）
*   跑到`pip install flup`命令行

    `C:\>pip install flup`

    下载/解压flup 下载flup-1.0.3.dev-20110405.tar.gz (57kB): 57kB 下载 运行setup.py egg_info 获取flup包

    安装收集的包：flup 运行 setup.py install for flup

    `Successfully installed flup`
    打扫干净...

*   `manage.py run`在 PyCharm 下运行

收到以下错误：

```
runnerw.exe C:\Python27\python.exe "C:\Program Files\JetBrains\PyCharm 2.7\helpers\pycharm\django_manage.py" runfcgi C:/<location of my project>
Can't import flup.server.fcgi_fork

Process finished with exit code 0 
```

**问题：**我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T07:40:17.260

fcgi_fork 在像 os 一样的 unix 中使用。如果你想在 Windows 中运行，只需像下面这样运行：

```
python manage.py runfcgi thread=4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:20:03.750

问题是 manage.py 命令的自动完成功能默认为 PyCharm 2.7 下不太常用的`runfcgi`，而不是`runserver`.

现在我必须输入`runs`.

# audio - Web Audio API 中的 FFT 数据对应什么？

> ID：14789283
> 
> 赞同：32
> 
> 时间：2013-02-09T14:49:52.167
> 
> 标签：audio, fft, html5-audio, web-audio-api

我使用了来自 Analyzer 节点的 FFT 数据，使用`getByteFrequencyData`Web Audio API 中的方法来创建频谱可视化器，如下所示：

![频谱可视化器](../Images/12f9c559eb2bdafa3967d562847614b6.png)

在这种情况下，我有 256 个数据箱。这里面的数字到底对应什么？是不是每个频率分量的分贝级。如果是这样，我怎么知道每个 bin 的频率值对应于什么？

我想知道，所以我可以尝试构建图形 eq，因此想知道在哪些点指示滤波器频带。理想情况下，我想表示从 20Hz 到 20kHz 的频率，并相应地绘制它们之间的间隔。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-09T16:12:53.440

是的，`getByteFrequencyData`会产生一个介于 0 到 255 之间的标准化值数组。（它将数据复制到传入的数组中）。

频带被平均分割，因此数组的每个元素 N 对应于：

```
N * samplerate/fftSize 
```

因此，第一个 bin 为 0。
假设采样率为 44100，a`<analyzerNode>.fftSize`为 512，则第二个 bin 为：86.13 Hz，依此类推...

[在dsp](https://dsp.stackexchange.com/questions/2818/extracting-frequencies-from-fft)和[SO](https://stackoverflow.com/questions/4364823/how-to-get-frequency-from-fft-result)上，您会发现这两个问题和答案很有用：

请注意，您的 sampledata 的长度是 的一半`<analyzerNode>.fftSize`，有效地将频率范围限制为采样率的一半。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-09T16:11:23.127

对于 256 个 bin，每个 bin 的间隔约为 86 Hz（44100 kHz 采样率 / fftSize，其中 fftSize 是 bin 数量的两倍）。所以你从零开始，然后以 86 Hz 的增量上升。

箱中的实际值只是表示每个频率在信号中存在多少（即频率有多“响亮”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-06T10:20:18.800

TL；DR 我想它会产生 dBu

* * *

如果有人，就像我不是一名音频工程师一样，努力试图找出一个合适的尺度（它的实际含义）来自`getByteFrequencyData`/`getFloatFrequencyData`这里的结果是我的发现：

*   首先查看这个[网络音频规范](https://webaudio.github.io/web-audio-api/#conversion-to-db) ，我们可以找到一个从 a`frequency data`到`dB value`自身的方程

> Y[k]=20log10X^[k]

*   那么你可以尝试[从维基百科阅读这篇文章](https://en.wikipedia.org/wiki/Decibel)

并且看到dBu计算看起来非常相似 [![分贝](../Images/4eb5e30f307e531fa1d6f519ddbdb659.png)](https://i.stack.imgur.com/SAJ6y.png)

*   以前我看过[这个视频以了解基础知识](https://www.youtube.com/watch?v=SYt6xwaI9AY&t=8s)

*   所以建立一个比例以将dB显示为dBu，零位于-4dBu（我希望这是有道理的） [![分贝刻度](../Images/4ab3874254a98d5867fb3b4a05cdd66e.png)](https://i.stack.imgur.com/t85vz.png)

*   现在尝试用适当的流来验证这个比例。所以我可以产生-24 dBFS（-18dBFS = +4dBu，这应该是一个标准？）信号应该是 -18 + -24 + 4 - -4 = -34 在上面的比例。这就是我最终得到的 [![在此处输入图像描述](../Images/d8a0872c878d41204d4cda8a94c42961.png)](https://i.stack.imgur.com/4GhNk.png)

# java - 以有效的方式将 XML 解析为 JAVA POJO

> ID：14789302
> 
> 赞同：13
> 
> 时间：2013-02-09T14:52:35.957
> 
> 标签：java, xml, parsing, pojo

如何以有效的方式为以下xml解析和创建java pojo？请建议任何有效的解析器。

XML 格式是

```
<?xml version="1.0" encoding="utf-8"?>
<CCMainRootTag ID="12">
  <Header TableName="TableName"    TableVersion="12" TableID="12" CreatedDate="2013-02-09T15:35:33" CreatedByUserName="ABC" CreatedBySystem="ABC" />
  <ClassPrimary ID="12" Code="Y" DescriptionDK="DK language " DescriptionUK="" DefDK="" DefUK="" IFDGUID="">
    <ObjectClass ID="12" Code="YA" DescriptionDK="DK Language" DescriptionUK="" DefDK=""     DefUK="" IFDGUID="">
      <Synonym>
        <Concept Description="Description" Language="DK" />
        <Concept Description="" Language="UK" />
        <Concept Description="Description" Language="DK" />
        <Concept Description="" Language="UK" />
        <Concept Description="Description" Language="DK" />
        <Concept Description="" Language="UK" />
        <Concept Description="Description" Language="DK" />
        <Concept Description="" Language="UK" />
      </Synonym>
    </ObjectClass>
    <ObjectClass ID="12" Code="YB" DescriptionDK="DK Language" DescriptionUK="" DefDK="" DefUK="" IFDGUID=""> </ObjectClass>
    <ObjectClass ID="12" Code="YC" DescriptionDK="DK Language" DescriptionUK="" DefDK="" DefUK="" IFDGUID=""> </ObjectClass>
    <ObjectClass ID="12" Code="YD" DescriptionDK="DK language" DescriptionUK="" DefDK="" DefUK="" IFDGUID=""> </ObjectClass>
  </ClassPrimary>
</CCMainRootTag> 
```

我已经使用了这个[链接](http://code.google.com/p/pojoxml/)，但是它的性能很慢并且有问题没有有效的 pojo。

我想解析它以一种有效的方式为我提供直接的 java pojo。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-09T14:55:59.663

您可以使用[JAXB](http://www.oracle.com/technetwork/articles/javase/index-140168.html)将 XML 转换为 Java POJO。但在您最终确定解决方案之前，[请检查此站点](http://www.javacodegeeks.com/2011/12/jaxb-sax-dom-performance.html)以进行性能比较。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-21T02:15:40.830

对于那些寻找 JAXB 代码来将 xml 转换为 java 对象的人：

```
//Convert xml to String first
Element partyLoaderRequest; // your xml data
String xmlString = new XMLOutputter().outputString(partyLoaderRequest);   
InputStream is = new ByteArrayInputStream(xmlString.getBytes());
DocumentBuilder docBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
Document document = docBuilder.parse(is);
org.w3c.dom.Element varElement = document.getDocumentElement();
JAXBContext context = JAXBContext.newInstance(Person.class);
Unmarshaller unmarshaller = context.createUnmarshaller();
JAXBElement<Person> loader = unmarshaller.unmarshal(varElement, Person.class);
Person inputFromXml = loader.getValue(); 
```

而 Person 有适当的 XML 注释：

```
@XmlRootElement(name="Person")
public class CimbWlAdminUserAmendInput {
    @XmlElement(name="companyName",required=true,nillable=false) 
    private String companyName;
    ...
    //setters getters
    @XmlTransient
    public String getCompanyName() {
        return companyName;
    }

    public void setCompanyName(String companyName) {
        this.companyName = companyName;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-04T22:54:17.903

JacksonXmlModule 可以处理序列化和反序列化。

```
// Item.class - use lombok or create g/setters
@JsonPropertyOrder({"name", "description", "note"})
public class Item { 
   private String name;
   private String description;
   private String note;
}

// Test.class
package hello.service;

import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.fasterxml.jackson.dataformat.xml.JacksonXmlModule;
import com.fasterxml.jackson.dataformat.xml.XmlMapper;

import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;
import hello.entity.Item;
import org.junit.Before;

import org.junit.Test;

import java.util.ArrayList;
import java.util.List;

import static org.junit.Assert.*;

public class NameServiceImplTest {

    ObjectMapper objectMapper;

    @Before
    public void setup() {
        JacksonXmlModule xmlModule = new JacksonXmlModule();
        xmlModule.setDefaultUseWrapper(false);
        this.objectMapper = new XmlMapper(xmlModule);
        this.objectMapper.enable(SerializationFeature.INDENT_OUTPUT);
    }

    @Test
    public void serializeTest() {

        // Wrapper
        @JacksonXmlRootElement(localName = "names")
        class Names {
            public List<Item> item = new ArrayList<>();
        }

        Item item = new Item();
        item.setName("Vladimir");
        item.setDescription("Desc");
        item.setNote("Note");

        Item item2 = new Item();
        item2.setName("Iva");
        item2.setDescription("Desc2");
        item2.setNote("Note2");

        Names names = new Names();
        names.item.add(item);
        names.item.add(item2);

        try {
            String xml = objectMapper.writeValueAsString(names);
            assertNotNull(xml);
            System.out.println(xml);
        } catch (Exception e) { // IOException
            System.out.println(e.getMessage());
            fail();
        }
    }

    @Test
    public void deserializeTest() {
        String xml = "<names>" +
                "<item><name>name</name><description>desc</description><note>note</note></item>" +
                "<item><name>name</name><description>desc</description><note>note</note></item>" +
                "</names>";

        try {
            List<Item> names = objectMapper.readValue(xml, new TypeReference<List<Item>>() {});
            names.forEach(item -> {

                assertEquals("name", item.getName());
                assertEquals("desc", item.getDescription());
                assertEquals("note", item.getNote());

            } );
        } catch (Exception e) { // IOException

        }

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-25T18:22:57.643

```
public class XmlConvertUtil {

    public static void main(String[] args) {
        ResultDataSet resultDataSet = new ResultDataSet(new DtInformation("0", "Success"), new DtData("980000001"));
        //Method which uses JAXB to convert object to XML
        System.out.println(JaxbObjToXML(resultDataSet));
    }

    public static Object JaxbXmlToObj(String xmlString, Object obj) {

        JAXBContext jaxbContext;
        try {
            jaxbContext = JAXBContext.newInstance(obj.getClass());

            Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();

            Object resultDataSet = (Object) jaxbUnmarshaller.unmarshal(new StringReader(xmlString));

            //System.out.println(resultDataSet);
        }
        catch (JAXBException e) {
            e.printStackTrace();
        }
        return obj;
    }

    public static String JaxbObjToXML(Object object) {
        String xmlContent = null;
        try {
            //Create JAXB Context
            JAXBContext jaxbContext = JAXBContext.newInstance(object.getClass());

            //Create Marshaller
            Marshaller jaxbMarshaller = jaxbContext.createMarshaller();

            //Required formatting??
            jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
            jaxbMarshaller.setProperty(Marshaller.JAXB_FRAGMENT, Boolean.TRUE);

            //Print XML String to Console
            StringWriter sw = new StringWriter();

            //Write XML to StringWriter
            jaxbMarshaller.marshal(object, sw);

            //Verify XML Content
            xmlContent = sw.toString();
            //System.out.println(xmlContent);
        }
        catch (JAXBException e) {
            e.printStackTrace();
        }
        return xmlContent;
    }
} 
```

# c++ - Visual Studio 2012 总是编译所有源代码文件

> ID：14789308
> 
> 赞同：1
> 
> 时间：2013-02-09T14:53:06.283
> 
> 标签：c++, visual-studio-2012

我正在使用 Visual Studio 2012，如果我更改了一个 .cpp 源文件，Visual Studio 2012 总是会编译所有源代码文件。

我怎样才能解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T16:50:51.423

我自己想通了。我正在为我的项目文件使用带有 Paragon (10) Windows 驱动程序的 HFS+ 驱动器。在那里，Visual Studio 总是编译所有源文件。然后我把它移到 NTFS 驱动器上，现在一切都很好。它只编译更改的源文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T15:08:16.237

以我的经验，这通常意味着您的项目有一个已添加的 .h 文件，但该文件不再存在于磁盘上。VS（真的是msbuild）认为该文件是一个生成的文件，并且由于它不存在，因此需要进行重建以便生成标头。

要找出是否是这个问题，请查看 VS 解决方案资源管理器中的头文件文件夹，并验证列出的每个文件确实存在于磁盘上。有时 VS 会用不同的图标显示丢失的文件。如果确实不再需要该文件，则应将其从项目中删除。

另一个可能的原因是错误的 .tlog 文件。这些是 msbuild 在构建期间创建的文件，用于跟踪构建的输入（有助于检测 .rc 中列出的 .ico 文件等内容，但未明确添加为项目中的文件）。如果您在 VS 之外使用源代码控制和同步，有时依赖文件会被愚弄以为找不到依赖项，并再次假定它是生成的文件。此处的修复是递归删除项目目录下的所有 tlog 文件（例如： del /s *.tlog ）。这些文件会重新生成，因此删除它们是完全安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-28T07:59:01.310

我也遇到过这个问题。经过一番研究，我发现 /MP 被配置了两次：一方面在 C/C++ General-Tab 中，选项“多处理器编译”设置为“是 (/MP)”，另一方面作为附加选项命令行部分。附加选项激活了“从父级或项目默认值继承”并用 /MP 填充。

删除附加选项中的冗余条目 /MP 为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T15:02:07.453

只需使用`Ctrl+F7`快捷方式。这将仅编译该文件，因此要观察更改，您需要将目标文件重新链接在一起（该项目的完整构建）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-10-26T00:08:52.917

我正在使用 MS Visual Studio 2012 并看到 IDE 坚持编译 stdafx.cpp（#included "stdafx.h"），即使我命令它编译一个完全不同的单个 .cpp 文件。我确保我有“不使用预编译头文件”以确保编译不会尝试使用 stdafx.cpp 和 stdafx.h 构建 stdafx.pch。IDE 仍然坚持在编译我的其他单个 .cpp 文件之前构建 stdafx.cpp。只是为了它，我删除了我的 stdafx.cpp 文件，并且有效。现在，当我使用“Build:Compile”命令时，只会编译我的单个 .cpp 文件！这对我来说听起来像是一个 IDE 错误！

# mysql - cakephp 将查询转换为 cakephp 模型查询

> ID：14789313
> 
> 赞同：0
> 
> 时间：2013-02-09T14:53:23.053
> 
> 标签：mysql, cakephp, model

我有 2 个模型 Scale 和 Step，其中模型 Scale 有很多 Step。数据库表是：

```
scale : id | name | s1 | s2 | s3 | s4 | s5 | s6 | s7
step : id | val 
```

我想在 cakephp 结构中编写以下查询...

```
select s.id, s1.val as v1, s2.val as v2, s3.val as v3, s4.val as v4, s5.val as v5, s6.val as v6, s7.val as v7
from scale s
join step s1 on s.s1 = s1.id
join step s2 on s.s2 = s2.id
join step s3 on s.s3 = s3.id
join step s4 on s.s4 = s4.id
join step s5 on s.s5 = s5.id
join step s6 on s.s6 = s6.id
join step s7 on s.s7 = s7.id 
```

你能帮我语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:14:59.597

我建议你改变你的数据库结构。而不是在 Scale 中将 Step 绑定到 s1、s2、s3...等，这有一些缺点，其中一个是它限制您每个 Scale 只能执行 7 个步骤，并且并不是一个真正好的关系数据库模型，我建议您创建第三个表，称为 ScaleSteps，并包含三列：

```
id | ScaleId | StepId 
```

假设您有一个 id 为 7 的 Scale 条目，并且该 Scale 有与之关联的 Step 条目 1、2 和 3，结果表将如下所示：

```
id | ScaleId | StepId
1  | 7       | 1
1  | 7       | 2
1  | 7       | 3 
```

然后使用：hasOne、belongsTo...等设置您的 CakePHP 模型关系，例如：

```
class Scale extends Model {
var $name = "Scale";
var $hasMany = "ScaleStep"; 
}

class ScaleStep extends Model {
var $name = "ScaleStep";
var $belongsTo = "Step";    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:21:44.867

```
$this->find('all', array(

        'fields' => array('s1.val', 's2.val'),
        'joins' => array(array(
            'table' => 'step',
            'alias' => 's1',
            'type' => 'inner',
            'conditions' =>array('Scale.s1 = s1.id')
            ),array(
            'table' => 'step',
            'alias' => 's2',
            'type' => 'inner',
            'conditions' =>array('Scale.s2 = s2.id')
            ),
        ),
        'conditions' => array('Scale.id = '.$id.'')
        )); 
```

# intellij-idea - Intellij IDEA 中的代码定义窗口？

> ID：14789316
> 
> 赞同：2
> 
> 时间：2013-02-09T14:53:58.137
> 
> 标签：intellij-idea

Intellij IDEA 中有代码定义窗口吗？我知道有快速定义视图，但我不喜欢它，因为它一旦失去焦点就会自动关闭。我希望它保持打开状态并在光标下显示标识符的定义。也许有一个插件可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:58:57.570

`Quick Definition`窗口可以固定，它将作为`Find`面板中的选项卡打开，但不会自动更新，如果您打开新定义，它将再次出现在弹出窗口中。[欢迎功能请求](http://youtrack.jetbrains.com/issues/IDEA#newissue=yes)。

# java - java.sql.Connection 隔离级别

> ID：14789321
> 
> 赞同：3
> 
> 时间：2013-02-09T14:54:38.860
> 
> 标签：java, sql, isolation-level

我正在编写一些没有给我预期结果的尖峰代码。

我有一个基本上是几行计数器的表。其他表使用这些行来生成应该是唯一 ID 的内容。当我运行下面的代码时，我例外的是到达 select 语句的第一个线程将获取该行或表上的锁，从而停止对唯一 id 值的所有读取或写入。然而，第二个线程总是在第一个线程之前完成，因为它被休眠了 1 秒，因此它们都读取相同的值并写入相同的值，所以它只增加一次，而不是我例外的两次。

我的代码有什么问题，还是我对隔离级别的理解不正确？

我已经删除了样板代码。使用 MySQL 数据库的标准 sql.Connection。

```
private void incrementValue() {

        connection
                .setTransactionIsolation(Connection.TRANSACTION_SERIALIZABLE);

        statement = connection.createStatement();

        System.out.println(Thread.currentThread().getName()
                + " doing select");
        resultSet = statement.executeQuery("select * from counter");
        System.out.println(Thread.currentThread().getName()
                + "after select");
        if (counter++ == 0) {
            Thread.sleep(1000);
        }
        String incrementedValue = getIncrementedValue(resultSet);

        statement.executeUpdate("update counter set counter='"
                + incrementedValue + "'");

}

private String getIncrementedValue(ResultSet resultSet) throws SQLException {
    String value = "";
    if (resultSet.next()) {
        System.out.println(Thread.currentThread().getName() + "Value was "
                + resultSet.getString(1));

        value = (new Integer(resultSet.getString(1)) + 1) + "";

    }

    return value;

} 
```

这是从 main 调用的

```
public static void main(String[] args) {
    DatabaseExample databaseExample = new DatabaseExample();

    Runnable runnable = new Runnable() {

        @Override
        public void run() {
            DatabaseExample databaseExample = new DatabaseExample();
            databaseExample.incrementValue();
        }
    };
    new Thread(runnable).start();

    databaseExample.incrementValue();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T15:00:56.797

即使在 SERIALIZABLE 隔离级别，也可以并行进行多项选择。如果要在 select 子句的行上加锁，请使用`select ... for update`.

参考：

[http://dev.mysql.com/doc/refman/5.1/en/select.html](http://dev.mysql.com/doc/refman/5.1/en/select.html)：

> 如果将 FOR UPDATE 与使用页锁或行锁的存储引擎一起使用，则查询检查的行将被写锁定，直到当前事务结束。使用 LOCK IN SHARE MODE 设置一个共享锁，允许其他事务读取检查的行，但不能更新或删除它们。

[http://dev.mysql.com/doc/refman/5.1/en/set-transaction.html#isolevel_serializable](http://dev.mysql.com/doc/refman/5.1/en/set-transaction.html#isolevel_serializable)：

> 可序列化
> 
> 此级别类似于 REPEATABLE READ，但如果禁用自动提交，InnoDB 会将所有普通 SELECT 语句隐式转换为 SELECT ... LOCK IN SHARE MODE。

# machine-learning - 如何使用 Mallet 命令行提示报告精度和召回分数？

> ID：14789324
> 
> 赞同：2
> 
> 时间：2013-02-09T14:55:03.907
> 
> 标签：machine-learning, document-classification, mallet

我正在使用 Mallet 的 MaxEnt 分类器进行文本分类。Mallet 提供了使用命令行提示报告准确性和 F1 分数的能力。

有没有办法使用命令行提示报告精度和召回分数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T10:53:43.997

好吧，经过一番调查，我发现没有直接从命令行报告Precision和Recall的方法。但是，通过在您的 java 代码中使用 Mallet 接口很容易做到这一点，如下所述： http: [//mallet.cs.umass.edu/classifier-devel.php](http://mallet.cs.umass.edu/classifier-devel.php)

# c++ - 具有关系的 QRelationalTable 类别

> ID：14789328
> 
> 赞同：0
> 
> 时间：2013-02-09T14:55:58.243
> 
> 标签：c++, sql, qt

我在 Qt 中有一个小问题。我有两张桌子，一张有`products`，一张有`categories`。我想在 中显示产品列表`QTableView`。没什么大不了的。在一列中分配类别的关系和显示名称而不是 id 也没什么大不了的。

但是，在`categories`我有一个内部关系，所以我可以制作子类别。通过使用`parentId`.

这就是问题所在......我怎样才能显示这种关系`QTableView`？我的意思是，它不仅会显示产品所属类别的名称，还会显示所有父类别，例如这样：

有3类：

*   食物（没有父母）
*   水果（含父母食物）
*   柑橘（含亲本水果）

产品：

*   橙色分配给柑橘类。

在`TableView`列中`Category`它应该是：

> 食品/水果/柑橘

或者

> 食品->水果->柑橘

或类似的东西...

怎么做？子类化`QRelationalTableModel`并建立附加关系？或者为该专栏制作代表？或者两者兼而有之？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:05:12.347

阿雷迪做到了……

我做了什么：为了桌子`categories`

```
CREATE TABLE categories (id INTEGER PRIMARY KEY AUTOINCREMENT, name VARCHAR(100), parent NUMERIC) 
```

创建的表`categories_closure`（所有 SQL 语句都用于 SQLite）：

```
CREATE TABLE categories_closure (parent NUMERIC, child NUMERIC, depth NUMERIC) 
```

接下来，创建了一些触发器来自动化我的闭包表

```
CREATE TRIGGER categories_delete AFTER DELETE ON categories
BEGIN
    DELETE FROM categories_closure WHERE child=OLD.id;
    UPDATE categories SET parent=OLD.parent WHERE parent=OLD.id;
END;

CREATE TRIGGER categories_insert AFTER INSERT ON categories
BEGIN
    INSERT INTO categories_closure (parent, child, depth) VALUES (NEW.id, NEW.id, 0);
    INSERT INTO categories_closure (parent, child, depth)
        SELECT p.parent, c.child, p.depth+c.depth+1
            FROM categories_closure p, categories_closure c
            WHERE p.child=NEW.parent AND c.parent=NEW.id;
END;

CREATE TRIGGER categories_update AFTER UPDATE OF id,parent ON categories
BEGIN
    DELETE FROM categories_closure WHERE child=OLD.id;
    INSERT INTO categories_closure (parent, child, depth) VALUES (NEW.id, NEW.id, 0);
    INSERT INTO categories_closure (parent, child, depth)
        SELECT p.parent, c.child, p.depth+c.depth+1
        FROM categories_closure p, categories_closure c
        WHERE p.child=NEW.parent AND c.parent=NEW.id;
    UPDATE categories SET parent=NEW.id WHERE parent=OLD.id;
END; 
```

现在我可以通过简单的查询获取所有父类别的字符串，我创建了一个视图

```
CREATE VIEW categories_resolved AS
SELECT
    id,
    group_concat(name, ' ') AS fullname,
    group_concat(parent) AS branch
FROM (
    SELECT
        c.id,
        cc.parent,
        c2.name
    FROM categories c
    LEFT JOIN categories_closure cc ON c.id=cc.child
    LEFT JOIN categories c2 ON c2.id=cc.parent
    ORDER BY cc.depth DESC
)
GROUP BY id
ORDER BY id ASC 
```

最后我在关系中使用了这个视图`QSqlRelationalTableModel`而不是`categories`表。简单，无需创建模型、视图、代理、委托或修改 Qt 类的代码。

# include - JavaFX 场景生成器和 fx:include

> ID：14789332
> 
> 赞同：6
> 
> 时间：2013-02-09T14:56:44.823
> 
> 标签：include, javafx-2, scenebuilder

我想知道如何`fx:include`与 JavaFX Scene Builder 结合使用，因此：

想象一下我有一个`BorderPane`（文件`borderpane.fxml`）。在中心部分，我想放置一个`Label`应该在单独的 FXML 文件中定义的文件，例如`label.fxml`.

**第一个问题**：由于`label.fxml`将被集成到一个容器（BorderPane）中，它本身不需要一个。但是，SceneBuilder 仅提供将布局创建为容器的选项？

**第二个问题**：我可以`label.fxml`手动创建，然后`borderpane.fxml`手动调整以包含`label.fxml`. 然后我可以毫无问题地使用 SceneBuilder 加载borderpane.fxml 文件。但是，当我现在更改标签的文本并选择“保存”时，不是`label.fxml`修改，而是`borderpane.fxml`修改如下：

```
# borderpane.fxml  
<fx:include source="label.fxml" text="the new label text" /> 
```

新的标签文本应该写入`label.fxml`，而不是写入`borderpane.fxml`当前所做的事情。

*   难道我做错了什么？

*   SceneBuilder 是否不打算与 fx:include 一起使用？

*   我想为我的 GUI 的一部分使用单独的控制器，我认为这是非常合乎逻辑/正常的，所以这个实际的使用场景有希望以某种方式得到 SceneBuilder 的支持吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-16T16:10:49.187

[Scene Builder 2](http://www.oracle.com/technetwork/java/javase/downloads/javafxscenebuilder-info-2157684.html)似乎解决了您提到的两个问题。

**第一个（解决的）问题**：根节点不必是`Pane`. 例如，它可以是一个`Label`

**第二个（已解决）问题**：菜单`File > Include > FXML...`可用于包含外部 FXML 文件。无法编辑包含的文件。无论如何，右键单击文档视图中的节点将显示“编辑包含的文件”菜单项，这将打开该文件的另一个场景生成器窗口。

总之，**Scene Builder 2 正确处理了`fx:include`元素**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T17:17:52.203

我不知道使用场景构建器将节点添加到嵌入式 FXML 控件的任何方法。

但是，您可以使用 Java 代码执行此操作。如果您的borderpane.fxml 使用名为#setCentre 的方法定义了一个控制器来添加节点，那么您可以在borderpane.fxml 的父控制器中加载label.fxml 并使用您定义的方法添加标签。

但是有一个问题，您是在给出一个简化的示例，还是实际上是在为标签和边框窗格创建 FXML 文件？如果是这样，那么我认为这实际上会使您的程序比仅将控件添加到更大的控件更复杂。

# c++ - 获取包含类的类型

> ID：14789333
> 
> 赞同：4
> 
> 时间：2013-02-09T14:56:46.853
> 
> 标签：c++

我希望有一个宏使用它所使用的类的类型，而不将该名称传递给宏。为此，我尝试了`typedef decltype(*this) my_type;`，但`this`只能在非静态成员函数中使用。有任何想法吗？

编辑（评论副本）：

我制作了一个基类和一组宏，它们使用 CRTP 无缝实现类数据的三重缓冲。当一个三重缓冲类从另一个三重缓冲类继承时，复杂性就出现了，实际上有两个基础——隐藏在宏中的 CRTP 基础和显式基础。因为显式基也继承自 CRTP 基的不同实例化，派生类中的成员函数在两个基之间发生冲突。我正在编写一个宏来通过重新实现派生类中的函数来自动解决这个冲突。这种重新实现需要派生类的类型来访问 CRTP 类的正确实例化，因此是原始问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:52:51.463

**警告**：以下内容*不*符合标准。它仅在我传递`-fpermissive`给 GCC 时才有效，并且在编译时会打印出丑陋的警告：

```
#include <type_traits>

#define JOIN( A, B ) JOIN_INTERNAL( A, B )
#define JOIN_INTERNAL( A, B ) A##B
#define UNIQUE_NAME JOIN( unique_prefix_to_typedef_this_, __LINE__ )

template< typename T > struct class_type;
template< typename T, typename C > struct class_type< T C::* > { typedef C type; };

#define TYPEDEF_THIS void UNIQUE_NAME(); typedef class_type< decltype( &UNIQUE_NAME ) >::type

struct A
{
  TYPEDEF_THIS my_type;
  static_assert( std::is_same< my_type, A >::value, "my_type is not A if this fails" );
};

int main()
{
} 
```

我希望您可以使用它，否则我很确定没有符合标准的解决方案。

# javascript - 为什么 Javascript 会自动混合我的颜色？

> ID：14789339
> 
> 赞同：4
> 
> 时间：2013-02-09T14:57:36.217
> 
> 标签：javascript, html, canvas, colors

我刚开始使用 Javascript 和 HTML5，所以我很可能犯了一些非常愚蠢的错误。事实上，我希望这就是全部，并且这是一个简单的解决方法。

这是我得到的输出：

![奇怪，错误的图像](../Images/511b08562d5b2ccc72436170b821d450.png)（[自己试试吧](https://stackoverflow.com/q/14789339/1048572)！）

我想要发生的只是在灰色矩形上绘制一个蓝色矩形，两种颜色都是它们自己的东西。我真的很困惑为什么这种混合是默认设置（在我的机器上使用 Chrome）。

这是最小的工作示例（再次，对于我的机器）：

(html)

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Simple Canvas Game</title>
    </head>
    <body>
        <script src="js/game.js"></script>
    </body>
</html> 
```

（javascript，这是game.js）

```
//set up the canvas
var canvas = document.createElement("canvas");
var ctx = canvas.getContext("2d");
canvas.width = 512;
canvas.height = 480;
document.body.appendChild(canvas);

// Draw everything
var render = function () {
    ctx.clearRect(50, 50, 100, 100);

    ctx.fillStyle = "rgb(240, 240, 240)";
    ctx.fillRect(0, 0, 100, 100);

    ctx.strokeStyle="rgb(0, 0, 255)";
    ctx.strokeRect(20,20,150,100);
}

setInterval(render, 10); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T15:06:11.267

这不是混合，只是描边是 1 个像素宽，画布中的坐标是正方形的坐标，而线条在正方形之间。您的线条在像素之间移动并且是抗锯齿的。如果您希望您的笔画与像素对齐，您需要使用像 (99.5,99.5) 这样的坐标，而不是 (100,100)。很难描述，但有很多可用的文档。

长话短说，您必须将整个绘图代码翻译 0.5,0.5。尝试类似：

```
ctx.save();
ctx.translate(0.5,0.5);

ctx.clearRect(50, 50, 100, 100);

ctx.fillStyle = "rgb(240, 240, 240)";
ctx.fillRect(0, 0, 100, 100);

ctx.strokeStyle="rgb(0, 0, 255)";
ctx.strokeRect(20,20,150,100);
ctx.restore(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:02:34.297

检查[`globalCompositeOperation`选项](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Compositing)。似乎您已将其设置为`"lighter"`，而您想要默认值`"source-over"`。

# javascript - 如何显示小数

> ID：14789342
> 
> 赞同：-1
> 
> 时间：2013-02-09T14:58:05.387
> 
> 标签：javascript

我尝试了很多例子，但需要知道如何编码

我在表单中有以下代码：

```
 document.getElementById("65_element10").value=parseInt(document.getElementById("63_element10").value)+parseInt(document.getElementById("64_element10").value); 
```

并且需要将结果显示为 99.99 但是我如何更改代码，我想我需要使用这样的东西：

```
NumberFormat currencyFormatter = NumberFormat.getCurrencyInstance();
double price = 2.50000000000003;
System.out.println(currencyFormatter.format(price)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:03:24.497

使用`parseFloat`而不是`parseInt`.

如果你只想要两个十进制数字，那么像这样使用它：

```
var a = parseFloat(document.getElementById("63_element10").value);
var b = parseFloat(document.getElementById("64_element10").value);
var sum = a+b;
document.getElementById("65_element10").value = parseFloat(sum).toFixed(2); 
```

请注意，JavaScript 不是 Java。你不能混合它！

# c# - 检索大约 100k 数据以自动完成的最佳方法

> ID：14789346
> 
> 赞同：0
> 
> 时间：2013-02-09T14:58:31.053
> 
> 标签：c#, sql-server, xml

我有一个州的地址列表。它接近 10 万条记录。现在，当用户在网站上的文本框中输入内容时，它将通过上面的列表自动完成。目前我正在使用将数据存储到 xml 中并为它制作 chache。是最好的方法还是我必须为它创建表并创建视图或 sp 来检索数据？如果表格是最好的方式，而不是我必须如何设计它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:13:47.397

100k真的没那么大。一个平面文件应该没问题，因为您真的只需要将这些信息存储在内存中，以便以后加载它。使用关系模型的全部好处是您可以快速过滤大量数据，但是 100k 真的很容易在内存中排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T16:00:15.647

您是否考虑过在该列上设置索引？使用索引，检索数据将非常快，尤其是在地址不经常更改的情况下。

# php - PHP XML 编辑现有 xml 并添加数据

> ID：14789347
> 
> 赞同：-1
> 
> 时间：2013-02-09T14:58:33.533
> 
> 标签：php, xml, simplexml

所以我有以下xml结构：

```
<Application>
        <Properties>
            <Property>
                <Name>blabla</Name>
                <Value>123</Value>
            </Property>
        </Properties>
</Application> 
```

我想用 PHP 添加另一个“属性”子项。一个例子可能是：

```
<Application>
        <Properties>
            <Property>
                <Name>blabla</Name>
                <Value>123</Value>
                                <Name>example test</Name>
                <Value>another value</Value>
            </Property>
        </Properties>
</Application> 
```

这是我当前的php代码：

```
<?php
    $xml = simplexml_load_file("Application.xml"); 

    $sxe = new SimpleXMLElement($xml->asXML()); 

    $properties = $sxe->addChild("Property");
    $properties->addChild("Name", "namehere"); 
    $properties->addChild("Value", "random value here"); 

    $sxe->asXML("Application.xml");
?> 
```

但它只是将它添加到 xml 的末尾。之后`</Application>`，那不是我们想要的。

我希望它在`<Property>`孩子中添加它。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:09:31.037

您需要在标签内部遍历`<Application>`到`<Properties>`标签。

使用`xpath()`.

```
$propNode = $sxe->xpath('/Application/Properties');
$property = $propNode[0]->addChild('Property'); 
```

这是[phpfiddle](http://phpfiddle.org/main/code/grj-t83)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:55:38.673

如果要将孩子添加到特定元素，则必须这样说：

```
$properties = $sxe->Properties->addChild("Property");
                    ^^^^^^^^^^ 
```

[在线演示](http://eval.in/9451)

如果有多个`Properties`元素并且您不想指定第一个元素，则可以使用从零开始的数组索引，例如`0`第一个（默认），`1`第二个：

```
$properties = $sxe->Properties[1]->addChild("Property"); 
```

[在线演示](http://eval.in/9450)

# javascript - 带有图像的下拉菜单（没有像 jquery 这样的库）

> ID：14789352
> 
> 赞同：3
> 
> 时间：2013-02-09T14:59:28.193
> 
> 标签：javascript, html, css, drop-down-menu

我正在创建一个包含图像的下拉菜单。我的目标是：

*   它不能使用任何外部库（所以 jquery 出来了）
*   它应该尽可能使用 css 而不是 javascript
*   它必须是跨浏览器兼容的
*   功能必须与常规 html 选择选项下拉菜单相同
*   当未启用 javascript 时，它必须回退到常规的选择选项 html 下拉菜单

我基本上已经到了那里，这是我拥有的大致工作的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"/>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <style type="text/css">
.select_outermost_unfocus
{
    background-color:red;
    border: 5px solid red;
    overflow: hidden;
    display: none;/*initial value - will be changed with js*/

    /*prevent highlighting*/
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
.select_outermost_unfocus:hover
{
    cursor: pointer;
}
.select_outermost_focus:hover
{
    cursor: pointer;
}
.select_outermost_focus/*when the select area is clicked then cap its size*/
{
    overflow-y: scroll;
    overflow: -moz-scrollbars-vertical;
    height: 100px;
}
.select_outermost_focus:focus .unchosen_element/*when the select area is clicked then show all options*/
{
    display: inline-block;
}
.chosen_element
{
    float: left;
    background-color: lightblue;
    white-space: nowrap;/*keep text on one line*/
    clear: both;
}
.unchosen_element
{
    background-color:grey;
    display: none;
    float: left;
    white-space: nowrap;/*keep text on one line*/
    clear:both;
}
#invisible_screen
{
    background-color:green;
    position: relative;
    top:0;
    left:0;
    bottom:0;
    right:0;
}
        </style>
        <script type='text/javascript'>
//global vars
selected_element_id = 'option1';//initialise
showing_options = false;
window.onload = function() {
//  if(document.getElementById('no_tabindex').getAttribute('tabIndex') !== null) { //mimic safari
    if(document.getElementById('select_pretty').getAttribute('tabIndex') !== null) {
        document.getElementById('fallback_select').style.display = 'none';/*hide the html select element*/
        document.getElementById('select_pretty').style.display = 'inline-block';/*show the js pretty select element*/
        instate_select_box();
        hide_options();
    }
    else {
        alert('tabindex not supported - could be safari');
    };
};
function show_options(e) {
    showing_options = true;
    document.getElementById('select_pretty').onmouseup = null; //kill the event until unhover
    document.getElementById('select_pretty').className = 'select_outermost_focus';
    document.getElementById('select_pretty').focus();/*invoke class .select_outermost_focus .unchosen_element*/
    setTimeout(function() {
        document.getElementById('option1').onmousedown = function() {option_clicked('option1');};
        document.getElementById('option2').onmousedown = function() {option_clicked('option2');};
        document.getElementById('option3').onmousedown = function() {option_clicked('option3');};
        document.getElementById('option4').onmousedown = function() {option_clicked('option4');};
        document.getElementById('option5').onmousedown = function() {option_clicked('option5');};
    }, 500);
};
function option_clicked(option_id) {
    document.getElementById(selected_element_id).className = 'unchosen_element';
    selected_element_id = option_id;//save globally
    document.getElementById(selected_element_id).className = 'chosen_element';
    hide_options();
//  document.getElementById('select_pretty').onmouseout = instate_select_box;
    instate_select_box();
};
function instate_select_box(e) {
//alert('mouseout');
    document.getElementById('select_pretty').onmouseup = show_options;//ready for next time the box is neded
    document.getElementById('select_pretty').onmouseout = null;
};
function hide_options() {
    if(!showing_options) {return;};
    document.getElementById('option1').onclick = null;
    document.getElementById('option2').onclick = null;
    document.getElementById('option3').onclick = null;
    document.getElementById('option4').onclick = null;
    document.getElementById('option5').onclick = null;
    document.getElementById('select_pretty').className = 'select_outermost_unfocus';
    showing_options = false;
};
        </script>
    </head>
    <body>
        <div id='no_tabindex'></div>
        <div id='fallback_select'>
            <select>
                <option>andora</option>
                <option>uae</option>
                <option>afghanistan</option>
                <option>cook islands</option>
                <option>germany</option>
            </select>
        </div>
        <a class='select_outermost_unfocus' id='select_pretty' tabindex=0>
            <div class='chosen_element' id='option1'><img src='http://www.crwflags.com/fotw/misc/wad.gif'>andora</div>
            <div class='unchosen_element' id='option2'><img src='http://www.crwflags.com/fotw/misc/wae.gif'>uae</div>
            <div class='unchosen_element' id='option3'><img src='http://www.crwflags.com/fotw/misc/waf.gif'>afghanistan</div>
            <div class='unchosen_element' id='option4'><img src='http://www.crwflags.com/fotw/misc/wck.gif'>cook islands</div>
            <div class='unchosen_element' id='option5'><img src='http://www.crwflags.com/fotw/misc/wde.gif'>germany</div>
        </a>
    </body>
</html> 
```

它目前不是很漂亮，但是一旦我使功能正常工作，这将很容易修复。

我遇到的问题是，当我单击第一个选项以选择它时，它被选中但随后触发事件以再次显示所有选项。这显然不是常规 html 选择选项下拉菜单的工作方式。

我已经尝试实现一个锁存器和一个超时，但到目前为止我还没有成功实现这两个。我目前正在 chrome 上进行测试。任何人都可以让它工作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T16:26:09.170

我花了一段时间才弄清楚如何解决您的问题，但最终我找到了解决方案。

我正在谈论的解决方案需要一个变量`mousedown`，它告诉我们是否`select_pretty`被点击。如果是，`option_clicked`则不应继续，除非`mousedown`是`false`。

一些事件处理程序何时采取行动也有一些变化。查看下面的代码并与原始版本进行比较。

这是您的工作下拉菜单：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"/>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <style type="text/css">
.select_outermost_unfocus
{
    background-color:red;
    border: 5px solid red;
    overflow: hidden;
    display: none;/*initial value - will be changed with js*/

    /*prevent highlighting*/
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
.select_outermost_unfocus:hover
{
    cursor: pointer;
}
.select_outermost_focus:hover
{
    cursor: pointer;
}
.select_outermost_focus/*when the select area is clicked then cap its size*/
{
    overflow-y: scroll;
    overflow: -moz-scrollbars-vertical;
    height: 100px;
}
.select_outermost_focus:focus .unchosen_element/*when the select area is clicked then show all options*/
{
    display: inline-block;
}
.chosen_element
{
    float: left;
    background-color: lightblue;
    white-space: nowrap;/*keep text on one line*/
    clear: both;
}
.unchosen_element
{
    background-color:grey;
    display: none;
    float: left;
    white-space: nowrap;/*keep text on one line*/
    clear:both;
}
#invisible_screen
{
    background-color:green;
    position: relative;
    top:0;
    left:0;
    bottom:0;
    right:0;
}
        </style>
        <script type='text/javascript'>
//global vars
selected_element_id = 'option1';//initialise
showing_options = false;
mousedown = false;
window.onload = function() {
//  if(document.getElementById('no_tabindex').getAttribute('tabIndex') !== null) { //mimic safari
    if(document.getElementById('select_pretty').getAttribute('tabIndex') !== null) {
        document.getElementById('fallback_select').style.display = 'none';/*hide the html select element*/
        document.getElementById('select_pretty').style.display = 'inline-block';/*show the js pretty select element*/
        instate_select_box();
        hide_options();
    }
    else {
        alert('tabindex not supported - could be safari');
    };
};
function show_options(e) {
    showing_options = true;
    document.getElementById('select_pretty').onmousedown = null; //kill the event until unhover
    document.getElementById('select_pretty').className = 'select_outermost_focus';
    document.getElementById('select_pretty').focus();/*invoke class .select_outermost_focus .unchosen_element*/
    document.getElementById('option1').onmouseup = function() {option_clicked('option1');};
    document.getElementById('option2').onmouseup = function() {option_clicked('option2');};
    document.getElementById('option3').onmouseup = function() {option_clicked('option3');};
    document.getElementById('option4').onmouseup = function() {option_clicked('option4');};
    document.getElementById('option5').onmouseup = function() {option_clicked('option5');};
};
function option_clicked(option_id) {
    if (mousedown)
        return;

    document.getElementById(selected_element_id).className = 'unchosen_element';
    selected_element_id = option_id;//save globally
    document.getElementById(selected_element_id).className = 'chosen_element';
    hide_options();
//  document.getElementById('select_pretty').onmouseout = instate_select_box;
    instate_select_box();
};
function select_pretty_mousedown(e)
{
    mousedown = true;
    show_options();
};
function select_pretty_mouseup(e)
{
    mousedown = false;
};
function instate_select_box(e) {
//alert('mouseout');
    document.getElementById('select_pretty').onmousedown = select_pretty_mousedown;
    document.getElementById('select_pretty').onmouseup = select_pretty_mouseup;
    document.getElementById('select_pretty').onmouseout = null;
};
function hide_options() {
    if(!showing_options) {return;};
    document.getElementById('option1').onmouseup = null;
    document.getElementById('option2').onmouseup = null;
    document.getElementById('option3').onmouseup = null;
    document.getElementById('option4').onmouseup = null;
    document.getElementById('option5').onmouseup = null;
    document.getElementById('select_pretty').className = 'select_outermost_unfocus';
    showing_options = false;
};
        </script>
    </head>
    <body>
        <div id='no_tabindex'></div>
        <div id='fallback_select'>
            <select>
                <option>andora</option>
                <option>uae</option>
                <option>afghanistan</option>
                <option>cook islands</option>
                <option>germany</option>
            </select>
        </div>
        <a class='select_outermost_unfocus' id='select_pretty' tabindex=0>
            <div class='chosen_element' id='option1'><img src='http://www.crwflags.com/fotw/misc/wad.gif'>andora</div>
            <div class='unchosen_element' id='option2'><img src='http://www.crwflags.com/fotw/misc/wae.gif'>uae</div>
            <div class='unchosen_element' id='option3'><img src='http://www.crwflags.com/fotw/misc/waf.gif'>afghanistan</div>
            <div class='unchosen_element' id='option4'><img src='http://www.crwflags.com/fotw/misc/wck.gif'>cook islands</div>
            <div class='unchosen_element' id='option5'><img src='http://www.crwflags.com/fotw/misc/wde.gif'>germany</div>
        </a>
    </body>
</html> 
```

# php - 显示列名

> ID：14789360
> 
> 赞同：1
> 
> 时间：2013-02-09T15:00:10.107
> 
> 标签：php, mysql, database, class, mysqli

此类用于通过 mysqli 管理数据库。我坚持使用准备好的语句来显示给定表的所有列名。

```
class databaseManager {
    function showTable ($tableName, $mysqli) {
        $stmt = $mysqli -> prepare("SHOW COLUMNS FROM ?");
        $stmt -> bind_param('s', $tableName);
        $stmt -> execute();

        while ($stmt -> fetch) {
            $Field;
        }

        $stmt -> free_result();
    }
} 
```

我收到错误“在非对象上调用成员函数 bind_param()”，但 $mysqli 连接存在，所以我认为 mysqli -> prepare 是错误的。

编辑：显然我通过了 $mysqli

```
$databaseManager = new databaseManager();
$databaseManager -> showTable("blog", $mysqli); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:07:49.803

首先，您没有进行任何错误处理。始终检查所有数据库交互的结果。

例如，

```
$stmt = $mysqli->prepare("SHOW COLUMNS FROM ?");
if (!$stmt) {
    throw new Exception($mysqli->error);
} 
```

因此，您将从数据库中收到一条错误消息。

接下来，您不能通过准备好的语句绑定标识符。
因此，根据[文档，您必须将其列入白名单或正确格式化](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)

顺便说一句，我认为这样的功能没有多大意义。我为此目的使用控制台，其他人通常通过 PHPMyAdmin 看到他们的数据库结构

此外，使用裸 API 也不是最佳选择。通过使用一些抽象层，您可以在一行中编写代码：

```
function showTable ($tableName) {
    return $this->db->getCol("SHOW COLUMNS FROM ?n", $tableName);
} 
```

不过，您不需要此查询来显示表格内容，因为列名始终已存在于结果集中。因此，只需先请求您的数据，然后从中提取列名

通过使用上面提到的这样一个库，它会是这样的

```
$data  = $this->db->getAll("SELECT * FROM ?n", $tableName);
$names = array_keys($data[0]); 
```

但是 PHPMyAdmin 仍然做得更好，试一试

如果您需要某种在线表格编辑器，*很少有*这样直接的方式工作。总是有一些问题需要对数据进行预处理或后处理。对于任何复杂的数据结构，您总是以专用代码告终。例如，显示漂亮的列标题。
但是对于一些普通的字符串值，它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:01:34.410

按照设计，表名和列名不能参数化。但是您仍然可以将它连接到字符串上并用反引号将其包裹起来，作为对 sql 注入的第一级防御。

```
 $stmt = $mysqli -> prepare("SHOW COLUMNS FROM `" . $tableName . "`");
    $stmt -> execute(); 
```

# android - Android ViewFlipper Inside ScrollView

> ID：14789361
> 
> 赞同：0
> 
> 时间：2013-02-09T15:00:11.740
> 
> 标签：android, viewflipper

我正在使用视图翻转器在图像上显示一堆图像，比如一个滑块，我在其中实现了左右滑动来切换图像的功能，现在我的一些图像大于屏幕尺寸（就高度而言）被隐藏了。

我想在 ScrollView 中添加我的 ViewFlipper 但使用它我无法使用滑动功能这里是我的代码

XML 布局

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/mover"
android:fillViewport="true">

    <ViewFlipper android:id="@+id/flipper" 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"> 
    </ViewFlipper> 
```

主要活动

```
public class MainActivity extends Activity {

ViewFlipper viewFlipper;
ScrollView moverHandle;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    int gallery_grid_Images[]={R.drawable.itema,R.drawable.itemb,
            R.drawable.itemc,R.drawable.itemd,
            R.drawable.iteme,R.drawable.itemf,
            R.drawable.itemg,R.drawable.itemh,
            R.drawable.itemi,R.drawable.itemj,
    };
    viewFlipper = (ViewFlipper) findViewById(R.id.flipper);
     for(int i=0;i<gallery_grid_Images.length;i++)
     {
        //  This will create dynamic image view and add them to ViewFlipper
            setFlipperImage(gallery_grid_Images[i]);
     }
     moverHandle = (ScrollView) findViewById(R.id.mover);
     moverHandle.setOnTouchListener(new OnSwipeTouchListener() {
         public void onSwipeRight() {
                Toast.makeText(MainActivity.this, "right", Toast.LENGTH_SHORT).show();
                viewFlipper.showPrevious();
            } 
         public void onSwipeLeft() {
                Toast.makeText(MainActivity.this, "left", Toast.LENGTH_SHORT).show();
                viewFlipper.showNext();
            } 
     });
}

private void setFlipperImage(int res) {
    ImageView image = new ImageView(getApplicationContext());
    image.setBackgroundResource(res);
    viewFlipper.addView(image);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

 } 
```

我的触控监听器终于来了

```
public class OnSwipeTouchListener implements OnTouchListener {

View view;
MotionEvent motionEvent;

private final GestureDetector gestureDetector = new GestureDetector(new GestureListener());

public boolean onTouch(final View v, final MotionEvent event) {
    return gestureDetector.onTouchEvent(event);
}

private final class GestureListener extends SimpleOnGestureListener {

    private static final int SWIPE_THRESHOLD = 100;
    private static final int SWIPE_VELOCITY_THRESHOLD = 100;

    @Override
    public boolean onDown(MotionEvent e) {
        return true;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        boolean result = false;
        try {
            float diffY = e2.getY() - e1.getY();
            float diffX = e2.getX() - e1.getX();
            if (Math.abs(diffX) > Math.abs(diffY)) {
                if (Math.abs(diffX) > SWIPE_THRESHOLD && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                    if (diffX > 0) {
                        onSwipeRight();
                    } else {
                        onSwipeLeft();
                    }
                }
            } else {
                if (Math.abs(diffY) > SWIPE_THRESHOLD && Math.abs(velocityY) > SWIPE_VELOCITY_THRESHOLD) {
                    if (diffY > 0) {
                        onSwipeBottom();
                    } else {
                        onSwipeTop();
                    }
                }
            }
        } catch (Exception exception) {
            exception.printStackTrace();
        }
        return result;
    }
}

public void onSwipeRight() {
}

public void onSwipeLeft() {
}

public void onSwipeTop() {
}

public void onSwipeBottom() {
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:52:25.890

尝试以下链接中的代码 [http://techin-android.blogspot.co.uk/2011/11/swipe-event-in-android-scrollview.html#!/2011/11/swipe-event-in-android -scrollview.html](http://techin-android.blogspot.co.uk/2011/11/swipe-event-in-android-scrollview.html#!/2011/11/swipe-event-in-android-scrollview.html) 覆盖 Gesture 的 onTouch 事件似乎是罪魁祸首。

# objective-c - 为什么有些人将方法放在 .h 文件和接口代码中？

> ID：14789362
> 
> 赞同：0
> 
> 时间：2013-02-09T15:00:21.110
> 
> 标签：objective-c, cocoa-touch

最近我一直想知道为什么人们有时会将方法放在代码的 .h 和接口区域中。我只是问，因为我知道这不是完全必要的。

例如：

```
.h

@interface ViewController : UIViewController

- (IBAction) methodOne:(id)sender;
- (BOOL) doesChickenTasteGood; 
```

并且：

```
.m

import "ViewController.h"

@interface ViewController ()
- (IBAction) methodOne:(id)sender;
- (BOOL) doesChickenTasteGood;

@end

@implementation ViewController

- (IBAction) methodOne:(id)sender {
      NSLog(@"Yay you poked me");
}

- (BOOL) doesChickenTasteGood {
      return YES;
}

@end 
```

我只是想知道我是否应该将我的一些方法放在这些领域。

编辑：我不是在问为什么有人会在 .h 和代码的接口部分重新声明这些方法。我只是在问为什么有人会将方法放在 .m 文件的实现之外。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T15:29:50.133

如果您希望它对其他类可见，您将在标头中声明一个方法。仅在实现文件中声明的方法在编译时对其他类是不可见的，因此实际上是*私有*的（由于 Objective-C 的动态调度机制，它们仍然可以被调用，但您至少会收到警告。）

方法被放置在`@interface`实现文件的一个块中，作为在使用之前声明它们存在的一种方式。这允许更有条理的代码（例如，一个`@interface`只包含图形方法的块，或者一个只包含数学方法的块），同时保持对调用者的隐私。

如果您的标头中没有方法，那么调用代码将不知道如何处理您的类的实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T15:29:01.903

.h 文件构成类的公共方法。如果您希望其他人能够调用您的`doesChickenTasteGood`方法，则需要在 .h 中声明它，因为其他类会这样做`#import`。

# android - 通过共享首选项在 App Start 上加载 Activity

> ID：14789363
> 
> 赞同：0
> 
> 时间：2013-02-09T15:00:24.413
> 
> 标签：android, sharedpreferences

我有一个使用共享首选项的应用程序（第一次），但是，我要运行的第一个活动是检查设置的首选项的活动。因此，当应用程序加载时，您会看到这个“黑屏”，然后加载正确的活动。

我的应用程序正在扩展一个导航活动，我确实尝试将它从这个活动中运行出来，但是，我没有 onStart、onCreate() 等......因为它只是在膨胀 Actionbar Sherlock 菜单。如果我添加 onStart() 我得到一个错误。如果我添加，我会得到一个无限循环：

```
onStart(){getPrefs();super.onStart();} 
```

那么，任何人都可以与我分享我应该如何/在哪里运行它，以便用户不会得到“黑屏”然后是正确的活动？我只想在应用程序启动时启动正确的活动。

这是我目前加载活动的方式：

```
public class MainActivity extends NavigationActivity {
    private AQuery aq;
    SharedPreferences myPrefs;
    private String lp;
    private String TAG = "GET PREFS";

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // show no back arrow
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        setContentView(R.layout.activity_firstload);

        aq = new AQuery(this);

        getPrefs();

        aq.id(R.id.tv).text("Loading...");

    }

    private void getPrefs() {
        // Get the xml/preferences.xml preferences
        SharedPreferences prefs = PreferenceManager
                .getDefaultSharedPreferences(getBaseContext());
        lp = prefs.getString("defaultreport", "");
        Log.v(TAG, lp);

        if (lp.equals("esac")) {
            Toast.makeText(MainActivity.this, "ESAC", Toast.LENGTH_LONG)
                    .show();
            Intent i = new Intent(MainActivity.this, ESACActivity.class);
            startActivity(i);
        } else if (lp.equals("sac")) {
            Toast.makeText(MainActivity.this, "SAC", Toast.LENGTH_LONG)
                    .show();
            Intent i = new Intent(MainActivity.this, SACActivity.class);
            startActivity(i);
        } else if (lp.equals("msar")) {
            Toast.makeText(MainActivity.this, "MSAR", Toast.LENGTH_LONG)
                    .show();
            Intent i = new Intent(MainActivity.this, MSARActivity.class);
            startActivity(i);
        }

    }

} 
```

我的 NavigationActivity 包含：

```
onCreateOptionsMenu(Menu menu)

and 

onOptionsItemSelected(MenuItem item) 
```

编辑：：

我曾考虑在启动时添加启动画面以适应此设置更改，但希望看到另一个简化的解决方案。

编辑编辑::

我尝试了@MrZander 的建议，但在我的清单中遇到了问题。

```
<application
        android:allowBackup="true"
        android:icon="@drawable/acricon"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock" 
        android:name="com.Conditions.MainActivity" //This loads the PREFS fine
        >
        <activity
            android:name="com.Conditions.SACActivity" //However, defining this negates the PREFS. My apps first screen is defined by the PREFS. 
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:label="@string/title_activity_main"
            android:screenOrientation="portrait"
            android:theme="@style/Theme.Sherlock"
            android:uiOptions="splitActionBarWhenNarrow" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:39:54.187

我会覆盖应用程序的`Application`

[http://developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

类似这样的东西：

```
public class MyApplication extends Application{
    @Override
    public void onCreate() {
        //Shared prefs here
    }
} 
```

并在清单的`<application>`标签中添加此属性：`android:name="com.your.package.MyApplication"`

# java - Java SWT 更新文本控件

> ID：14789366
> 
> 赞同：0
> 
> 时间：2013-02-09T15:00:30.067
> 
> 标签：java, swt, paint

自 1996 年以来，我编写了很多 java 代码，但从未尝试过 SWT。虽然我会选择一些非常简单的东西开始，但我很早就陷入了困境，即使我之前有几本 SWT/Jface/RCP 书籍对我的问题没有帮助。

我正在尝试使命令行应用程序在 SWT 窗口中运行。它不需要用户的任何输入，它只需要显示 sysout。该应用程序很少生成超过 30 行的 sysout。

```
public class TestGui implements Runnable {

private Display display;
private Shell shell;
private Text text;

public void run() {
    display = new Display();
    shell = new Shell(display, SWT.DIALOG_TRIM);
    shell.setText("SWT Test");
    shell.setSize(new Point(800, 400));
    shell.setLayout(new FillLayout());
    text = new Text(shell, SWT.MULTI | SWT.V_SCROLL | SWT.READ_ONLY);
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch())
            display.sleep();
    }
}

void addMessage(String s) {
    text.append(s);
    text.append("\n");
}

void close() {
    display.dispose();
}

public static void main(String[] args) {
    TestGui pr = new TestGui();
    pr.run();
    pr.addMessage("add some text");
    pr.close();
}
 } 
```

我运行它，我看到带有光标的窗口令人放心地闪烁，但其中没有其他内容。在关闭窗口之前，我似乎无法运行对 addMessage() 方法的调用，当然到那时 Shell 已被释放，所以我得到了一个异常。

我确定我错过了一个关键步骤...

谢谢

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:06:37.883

问题是您的方法中的`while`循环一直*等到**实际处置*显示，因此这种方法只能在处置显示*后*完成。`run`**`run`**

 ***我不是 SWT 专家，但请尝试将`while`循环移动到您的`main`方法中，或者将调用移动`addMessage`到您的`run`方法中。无论您采用哪种方式，您都必须在等待处理框架*之前添加消息。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:17:17.320

正如回复所指出的，我发布的原始示例中的问题是添加消息的代码从未被执行。所以我分离了一个单独的线程并从那里调用消息。我仍在努力，当我有时间让它正常工作时会发布更新。***

# git - Git - 我刚刚将一个空的代表克隆到我的项目基目录中，将其完全擦除。我可以撤消这个吗？

> ID：14789367
> 
> 赞同：-1
> 
> 时间：2013-02-09T15:00:36.137
> 
> 标签：git, github, repository, clone, sync

我有一个包含我的整个项目的本地文件夹，并想把它放在 github 上。我注意到我已经有了那个项目的旧存储库（它是空的），所以我想，也许我可以将它克隆到我的本地项目文件夹中，它会神奇地为我合并它？不，事实证明这只是完全擦除了我的项目文件夹（因为代表是空的）。

我正在使用[github for Windows](http://windows.github.com/)应用程序来管理它，这是我使用它的第一天（或者完全是 git），这解释了我缺乏知识。

有什么办法可以撤消这个，还是我注定要失败？我在这个项目上投入了几个月的工作，最新的备份已经超过四个月了，所以如果可以撤消这对我来说意义重大！

**更新：**回收站是空的。我刚刚下载了 Recuva，我目前正在对该文件夹进行深度扫描。希望它能给我一些东西，但我怀疑它会让我恢复一切。仍然欢迎想法！

**更新：**原来它可能没有擦除文件夹，并且我有一个更新版本的项目可用。我的错！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:10:10.600

git clone 不应该接触目录中已经存在的文件，事实上，你在克隆时所在的文件夹甚至都不是工作目录。它将在下面创建一个新的工作目录。如果您尝试克隆到已经存在的文件夹中，git 将退出并出现错误

# asp.net-mvc - 作为 jquery ajax 函数的结果返回一个数组

> ID：14789370
> 
> 赞同：2
> 
> 时间：2013-02-09T15:01:15.420
> 
> 标签：asp.net-mvc, arrays, jquery, json.net

我想通过ajax调用从控制器返回一个数组以查看，我的数组是一个通用数组（对象列表，例如`Employee`类的实例）。

我想要对结果进行循环并可以访问对象属性，例如`Name`，我不知道如何从 C# 操作（json 或 ...）返回通用数组以获取结果，

动作的返回类型是什么？

这是我的代码：

```
$.ajax({
url: '@Url.Action("EditDayRequest", "Message")',
type: 'Post',
cache: false,
data: { IsChecked: $(this).is(':checked')},
success: function (result) {
// i want to loop here on returned array and get values
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:08:51.427

假设您的客户 ViewModel 看起来像这样

```
public class CustomerVM
{
   public string Name { set;get;}
   public string JobTitle { set;get;}
} 
```

您可以使用该方法从您的 Action 方法返回 Json `Json`。

```
[HttpPost]
public ActionResult EditDayRequest()
{
  var customerArray=GetCustomerArrayFromSomewhere();
  return Json(new { Items=customerArray.ToList()});
} 
```

在你的成功回调中，你可以遍历 Items

```
success:function(result){
   $.each(result.Items,function(index,item){
       alert(item.Name);
       alert(item.JobTitle);
   });

} 
```

# wordpress - 带有自定义字段的 Wordpress 列表页面

> ID：14789379
> 
> 赞同：0
> 
> 时间：2013-02-09T15:02:14.463
> 
> 标签：wordpress, wordpress-theming

我正在一个带有菜单的网站上工作，该菜单列出了所有具有特定菜单的页面并加载标题和使用“高级自定义字段”生成的自定义字段图像我可以显示标题但是当我尝试显示图像时在所有菜单链接上显示当前页面的自定义字段图像

这是一个示例“ [http://appelhat.dk/bordplader/](http://appelhat.dk/bordplader/) ”，当鼠标触摸页面的按钮时，菜单会向上移动。

这是代码

```
<nav id="main-navigation">
        <ul>
            <?php 
                $template = 'gallery.php';
                $Pages = $wpdb->get_col("SELECT post_id FROM $wpdb->postmeta WHERE meta_key = '_wp_page_template' AND meta_value = '$template'");
                foreach($Pages as $Page) {
                    $exclude_Pages .= $Page . ',';
                }
                $pages = get_pages("include=$exclude_Pages"); 

            foreach ( $pages as $page ): 

                $title = $page->post_title
                ?>
                <li>
                    <a href="<?php echo get_page_link( $page->ID ); ?>">
                        <span class="title"><?php echo $title ?></span>
                    <?php 
                        $attachment_id = get_field('front_billede');
                        $size = "thumbnail"; 
                        $image = wp_get_attachment_image_src( $attachment_id, $size );
                    ?>
                    <img src="<?php echo $image[0]; ?>" />
                    </a>
                </li>
            <?php endforeach; ?>   
        </ul>
    </nav> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T22:15:43.773

也许尝试使用[get_post_meta](http://codex.wordpress.org/Function_Reference/get_post_meta)而不是 get_field。听起来 get_field 正在调用全局 $post->ID 而不是所需的 $page->ID。

`$attachment_id = get_post_meta($page->ID, 'front_billede', true);`

或者，您可以创建一个辅助循环 - 使用[WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)或[get_posts](http://codex.wordpress.org/Function_Reference/get_posts)以确保所有标签都使用适当的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-08T07:18:15.007

知道这是一个相对古老的问题，但是如果您想在这种情况下使用 get_field ，那么您可以简单地使用重载方法：

```
$attachment_id = get_field('front_billede', $page->ID); 
```

此外，如果您想在 Wordpress 中创建这样的自定义菜单，那么我会推荐自定义 Walker。这是我之前使用的一个示例：

```
class WP_Image_Walker extends Walker_Page {
    function start_lvl( &$output, $depth = 0, $args = array() ) {
        $indent = str_repeat("\t", $depth);
        $output .= "\n$indent<ul class='children list-inline'>\n";
    }

    function start_el( &$output, $page, $depth = 0, $args = array(), $current_page = 0 )
    {
        if ( $depth ) {
            $indent = str_repeat("\t", $depth);
        }
        else {
            $indent = '';
        }

        extract($args, EXTR_SKIP);
        $css_class = array('page_item', 'page-item-'.$page->ID);

        if ( !empty($current_page) ) {
            $_current_page = get_page( $current_page );
            _get_post_ancestors($_current_page);
            if ( isset($_current_page->ancestors) && in_array($page->ID, (array) $_current_page->ancestors) )
                $css_class[] = 'current_page_ancestor';
                if ( $page->ID == $current_page )
                    $css_class[] = 'current_page_item';
                elseif ( $_current_page && $page->ID == $_current_page->post_parent )
                    $css_class[] = 'current_page_parent';
            } elseif ( $page->ID == get_option('page_for_posts') ) {
                $css_class[] = 'current_page_parent';
            }

            $css_class = implode( ' ', apply_filters( 'page_css_class', $css_class, $page, $depth, $args, $current_page ) );

            $image = get_field('image_field', $page->ID);

            $output .= $indent . '<li class="' . $css_class . '">' . '<a href="' . get_permalink($page->ID) . '">';
            $output .= '<img src="' . $image['url'] . '" alt="' . apply_filters( 'the_title', $page->post_title, $page->ID ) . '" />' . '</a>';

            if ( !empty($show_date) ) {
                if ( 'modified' == $show_date )
                    $time = $page->post_modified;
                else
                    $time = $page->post_date;

            $output .= " " . mysql2date($date_format, $time);
        }
    }
} 
```

然后在您的页面菜单中使用它，如下所示：

```
<?php wp_page_menu(array('walker' => new WP_Image_Walker(), 'container' => 'false', 'menu_class' => 'nav-home') ); ?> 
```

# php - PHP Simple HTML Dom：获取childNodes nodeValue？

> ID：14789380
> 
> 赞同：1
> 
> 时间：2013-02-09T15:02:20.267
> 
> 标签：php, html, dom, nodevalue

一个.php：

```
<ul id="ul1">
    <li id="pt1">Point 1
         <ul id="ul2">
             <li id="pt11">Point 1.1</li>
             <li id="pt12">Point 1.2</li>
                <pre class="CodeDisplay">
                some codes
                </pre>
             <li id="ref">Reference: <a href="link.html" target="_blank">link</a></li>
         </ul>
    </li> 
</ul> 
```

我只想获得 nodeValue“Point 1”。在 JS 中，它是：

```
alert(document.getElementsByTagName("li")[0].childNodes[0].nodeValue); 
```

但我想在 PHP（简单 HTML Dom）中获取 nodeValue；这是另一个 PHP 页面 (b.php) 中的代码片段：

```
<?php

include('simple_html_dom.php');
$html = file_get_html('http://lifelearning.net63.net/a.php');

// stuck here:
echo $html->getElementsByTagName('ul',0)->getElementsByTagName('li',0)->nodeValue;
//

?> 
```

我使用了 textContent 但它只是提取了第 1 点下的内容后代。这不是我想要的。我只想要“第 1 点”。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:55:09.667

试试这个：

```
<?php
include('simple_html_dom.php');
$html = file_get_html('http://lifelearning.net63.net/a.php');
echo $html->find('li[id=pt1] li', 0)->innertext; 
```

上面的代码片段找到了第一个（下降到`li#pt1`）匹配`li`的标签，并给出了你的内部文本（文本之间的内容，包括其中的所有 HTML，如果有的话）。

查看[SimpleHTMLDom 文档](http://simplehtmldom.sourceforge.net/manual.htm)。您可以通过多种方式和示例从 HTML 输出中找到内容（ID、类等）。SimpleHTMLDom 主要遵循 jQuery/CSS 选择器。

请注意，如果您不使用`innertext`方法，它会返回一个 SimpleHTMLDom 节点，您需要在显示之前处理该节点。

如果没有匹配的元素，它将返回`E_WARNING`错误消息。因此，请确保您的输入包含需要的元素或确保该元素带有`isset()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T11:05:43.607

在网上其他人的帮助下，建议一个更简单的解决方案：

```
$html = new DOMDocument();
$html->loadHTMLFile('http://lifelearning.net63.net/a.php');
echo $html->getElementsByTagName('li')->item(0)->childNodes->item(0)->textContent; // returns "Point 1" 
```

我学到的是

首先，在我的情况下，不需要任何外部库，DOMDocument 可以完成获取网页的 HTML DOM 的工作。

其次，使用 item() 和 childNodes。非常类似于 JS 中的内容：

```
document.getElementsByTagName("li")[0].childNodes[0].nodeValue 
```

但感谢您的所有回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T15:50:24.157

你可能会找这个

```
 <?php  $str2 =     ' <ul id="ul1"> ' ;?>
 <?php  $str2 .=    '<li id="pt1"><div>Point 1</div> ' ;?>
 <?php  $str2 .=    ' <ul id="ul2"> ' ; ?>
 <?php  $str2 .=    '     <li id="pt11">Point 1.1</li>' ; ?>
 <?php  $str2 .=    '    <li id="pt12">Point 1.2</li>' ; ?>
 <?php  $str2 .=    '     <pre class="CodeDisplay">' ; ?>
 <?php  $str2 .=    '     some codes' ; ?>
 <?php  $str2 .=    '     </pre>' ; ?>
 <?php  $str2 .=    '    <li id="ref">Reference: <a href="link.html" target="_blank">link</a></li>' ; ?>
 <?php  $str2 .=    '  </ul>' ; ?>
 <?php  $str2 .=    '   </li> ' ; ?>
 <?php  $str2 .=    ' </ul>' ; ?>

 <?php

 function getTextBetweenTags($string, $tagname) {
     $pattern = "/<$tagname ?.*>(.*)<\/$tagname>/";
     preg_match($pattern, $string, $matches);
     return $matches[1];
     }

   $txt = getTextBetweenTags($str2, "div");
   echo $txt;
   ?>

   will output : -->  Point 1 
```

# mysql - MySQL - 插入时在另一个字段值中使用字段值

> ID：14789386
> 
> 赞同：0
> 
> 时间：2013-02-09T15:03:11.020
> 
> 标签：mysql, sql, database, insert

我想在插入新行时在另一个字段的值中使用一个字段的值（自动递增）。

插入新行时，产品 ID 会自动生成，但我想在另一个动态生成 HTML 链接的字段中使用该产品 ID。

例如

**身份证 | 关联**

1 | products.php?id=*

（ products.php?id=* 显然会被包裹在 html 'a' 标签中）

我希望 ID 值是插入时显示 * 的位置。

有没有办法做到这一点，所以这个过程不是手动的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:16:11.713

您可以使用[触发器](http://dev.mysql.com/doc/refman/5.5/en/triggers.html)

```
delimiter //

    CREATE TRIGGER trigger_name BEFORE INSERT ON products
    FOR EACH ROW 
    BEGIN
        SET NEW.link = CONCAT(NEW.link, NEW.id);
    END;//

delimiter ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T23:23:35.027

拥有这个解决方案似乎不是最好的主意。您确定链接将始终采用这种格式吗？您确定他们永远不需要其他参数（即组 ID）吗？您尝试做的是以两种不同的格式存储实际上相同的数据（一种是 id，另一种是唯一的 href）。

这将导致其他问题，例如数据不一致（即有缺陷的软件可能会创建 id=123 的行并链接为 'products.php?id=666' - 请参阅 - 从数据库的角度来看，没有任何东西可以保护您免受对您的记录调用可能破坏数据一致性的更新语句。

现在一般来说：确保您的 ID 有一个 true 来源，并且您始终引用此 true 来源以动态生成在此 ID 中中继的其他数据。因此，在您的示例中，我建议使用一个函数，该函数将根据从数据库重试的 ID 动态生成链接。即不同的框架已经内置了为您执行此操作的方法（groovy，spring，我打赌也有 PHP 框架），您也可以编写自己的简单函数来生成链接（即像这个伪代码：

```
getProductLink (int id) { printf ("product.php?id=%d",id) ;} 
```

以这种方式完成后，如果您决定更改 url 结构，则无需更改数据库中的任何数据（并且您将；））。PS：如果您真的想从数据库中获取列表，请编写一个 mysql 函数，该函数将根据提供的 ID 为您动态生成链接。

满怀善意在未来刺你很多痛苦

# javascript - jQuery 同时切换“滑动”和“淡出”动画

> ID：14789388
> 
> 赞同：6
> 
> 时间：2013-02-09T15:03:23.377
> 
> 标签：javascript, jquery

jQuery 有 a`slideToggle`和 a `fadeToggle`，但它们不能很好地配合使用（参见 fiddle [here](http://jsfiddle.net/Y2yvd/)）：

```
$('div').on('click', function () {
    $('span')
        .slideToggle({duration: 'slow', queue: false})
        .fadeToggle({duration: 'slow', queue: false});
}); 
```

我怎样才能同时*拥有*`slide`和`fade`切换？

 ** * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-09T15:06:56.083

使用`.animate()`如下：

```
$('span').animate({
  height: "toggle",
  opacity: "toggle"
}); 
```*

# java - 在另一台计算机上的另一个 Eclipse 实例中打开一个 Eclipse 项目

> ID：14789389
> 
> 赞同：1
> 
> 时间：2013-02-09T15:03:24.357
> 
> 标签：java, eclipse, project

我在台式计算机上使用 Eclipse 创建了一个包含两个包的 Java 项目。每个包都有许多文件，包括一些 JUnit 测试。项目根目录位于我的 Dropbox 文件夹中，我现在正试图从我的笔记本电脑打开这个项目，但无法访问我的桌面。

我已经设法使用“导入”项目

`File -> Import -> General -> Existing Projects into Workspace`

但导入的项目仅部分类似于我桌面上的项目。

在我的桌面上，我的结构是

```
MarsRover
L src
| L org.ChrisWilson.MarsRover
|   L File1.java
|   L File2.java
|   L File3.java
|
L tests
  L org.ChrisWilson.MarsRoverTests
    L Test1.java
    L Test2.java
    L Test3.java 
```

因此，我`MarsRover`在顶部调用了该项目，在其下方调用了两个`src`目录`tests`。每个目录都包含一个包，称为包，`org.ChrisWilson.MarsRover`每个`org.ChrisWilson.MarsRoverTests`包都包含源文件和测试文件。

我导入的项目如下所示：

```
MarsRover
L bin
| L org
|   L ChrisWilson
|     L MarsRover
|       L File1.class
|       L File2.class
|       L File3.class
|     L MarsRoverTests
|       L Test1.class
|       L Test2.clas
|       L Test3.class
L src
| L org
|   L ChrisWilson
|     L MarsRover
|       L File1.java
|       L File2.java
|       L File3.java
|
L tests
  L org
    L ChrisWilson
      L MarsRoverTests
        L Test1.java
        L Test2.java
        L Test3.java 
```

我的两个包都丢失了，现在一切都只是一个目录。我不再能够运行我的项目或测试。

我想要的是能够在不同计算机上运行的 Eclipse 中打开我的项目并拥有第一个项目结构。我是 Eclipse 和 Java 的新手，欢迎任何关于如何在不同计算机上尽可能轻松地使用这两个工具的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:06:43.257

存在“冲突文件”的风险。温恩，您的项目同时在桌面和笔记本上打开，他们对 projectconfig 进行了更改，这些更改可能无法通过 Dropbox 合并。所以最好转移到 git 或类似的东西（也许在 bitbucket.org）并忽略 eclipse 的 .metdata-dir （每个客户都有自己的项目配置）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:13:20.530

我在创建 Maven 项目（其中 pom.xml 描述布局等）方面有很好的经验。

目前最简单的方法是创建新的 maven 项目并将现有代码移入其中。

您将需要一个带有“m2e”的 Eclipse 发行版（或从 Eclipse 市场下载“m2e”），然后您可以将项目复制到新计算机并使用 Import -> Existing maven projects 那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T15:17:29.243

您似乎只是在 Navigator 视图（显示文件和文件夹）中查看项目结构，而不是在 Package Explorer 视图（显示源文件夹和包）中查看它。

使用窗口 - 显示视图... - 包资源管理器。

# batch-file - 检查 cmd shell 中的两个变量是否指向同一个文件夹的可靠方法

> ID：14789391
> 
> 赞同：3
> 
> 时间：2013-02-09T15:03:34.890
> 
> 标签：batch-file, cmd

不能仅通过比较这些变量来检查：

```
C:\>set "d1=C:\"
C:\>set "d2=C:\Windows\.."
C:\>if %d1%==%d2% (echo true) else (echo false)
false 
```

我可以用`pushd`和`popd`和其他变量组成一个复杂的结构，但没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T17:08:04.683

您可以使用一个小函数对变量进行标准化。

```
set d1=C:\
set d2=C:\Windows\..
call :normalize d1
call :normalize d2
if "%d1%"=="%d2%" (echo true) else (echo false)
exit /b

:normalize
setlocal EnableDelayedExpansion
for /F "delims=" %%M in ("!%1!") do (
    endlocal
    set "%1=%%~dpM"
)
exit /b 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T20:14:20.840

类似于 jeb 的解决方案，但使用 FOR 而不是被调用的子程序

```
for %%A in ("%d1%") do for %%B in ("%d2%") do if "%%~fA"=="%%~fB" (echo true) else (echo false) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T15:44:51.320

不知道它是否适合您的需要，但您可以在第一个目录上创建一个文件，然后检查它是否存在于第二个目录中：

```
echo test > %d1%\checkthisfile.txt
if exist %d2%\checkthisfile.txt (echo true) 
```

# java - 具有匿名 Comparable 的 Collections.sort 给出错误

> ID：14789392
> 
> 赞同：1
> 
> 时间：2013-02-09T15:03:42.107
> 
> 标签：java, collections

首先，我不得不说我确实广泛地寻找了这个问题的答案，但我无法找到它。

基本上，我使用的格式与许多其他站点使用的格式完全相同，但我的 NetBeans 对此给出了错误。

我的代码：

```
package ocr;

public class Property {    
    public static final int METHOD_NORMAL_SEARCH = 1;
    public static final int METHOD_ADVANCED_SEARCH = 2;

    private String property;
    private ArrayList<String> names;
    protected HashMap<String, Integer> values;

    public Property(String propertyName, ArrayList<String> names) {
        this.property = propertyName;
        this.names = new ArrayList<>();
        this.values = new HashMap<>();
        for (String s : names) {
            this.names.add(s);
        }
    }

    public void add(String value, int method) {
        values.put(value, method);
    }

    public int calculateSimilarity(String value) {
        if (names.isEmpty()) {
            throw new IllegalArgumentException("names cannot be empty.");
        }
        LevenshteinDistance ld = new LevenshteinDistance();
        ArrayList<Integer> list = new ArrayList<>();
        for (String n : names) {
            list.add(ld.calculate(value, n));
        }
        Collections.sort(list);
        return list.get(0);
    }

    public void search(File input) {
        HashMap<String, Values> table = new HashMap<>();    //Maps word to {similarity, location in file}
        CustomScanner scanner = new CustomScanner(input);

        while (scanner.hasNext()) {
            String next = scanner.next();
            table.put(next, new Values(calculateSimilarity(next), scanner.getPosition()));
        }

        //Sorting on similarity
        Collections.sort(table, new Comparator<Values>() {
            @Override public int compare(Values val1, Values val2) {
                return Integer.signum(val1.similarity - val2.similarity);
            }
        });
    }

    public void advancedSearch(File input) {

    }

    public void print() {
        System.out.println("--" + property + "--");
        for (Map.Entry<String, Integer> entry : values.entrySet()) {
            System.out.println("Value: " + entry.getKey() + " / Method: " + entry.getValue());
        }
    }

    private class Values {
        private int similarity;
        private int position;

        public Values(Integer similarity, Integer position) {
            this.similarity = similarity;
            this.position = position;
        }

        public int getSimilarity() {
            return similarity;
        }

        public int getPosition() {
            return position;
        }
    }
} 
```

我得到的错误：

```
C:\Users\Frank\Documents\NetBeansProjects\OCR\src\ocr\Property.java:62: error: no suitable method found for sort(HashMap<String,Property.Values>,<anonymous Comparator<Property.Values>>)
        Collections.sort(table, new Comparator<Values>() {
    method Collections.<T#1>sort(List<T#1>,Comparator<? super T#1>) is not applicable
      (no instance(s) of type variable(s) T#1 exist so that argument type HashMap<String,Property.Values> conforms to formal parameter type List<T#1>)
    method Collections.<T#2>sort(List<T#2>) is not applicable
      (cannot instantiate from arguments because actual and formal argument lists differ in length)
  where T#1,T#2 are type-variables:
    T#1 extends Object declared in method <T#1>sort(List<T#1>,Comparator<? super T#1>)
    T#2 extends Comparable<? super T#2> declared in method <T#2>sort(List<T#2>)
1 error 
```

显然也欢迎所有其他建议。

我要么真的没有注意到一些明显的错误，要么这里可能会出现一些更难的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T15:06:51.450

您无法对 HashMap 进行排序。这没有道理。可以对 List 进行排序。可以对数组进行排序。但不是 HashMap。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-09T15:12:24.537

`Collection.sort`不申请 a函数只是接收 a并没有实现这个接口`Map`。如果您需要对项目进行排序，请考虑使用 a而不是.[`Collections#sort`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)`List``Map``Map`[`TreeMap`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)`HashMap`

# haskell - 如何从 Haskell 中的文件中读取二叉树

> ID：14789396
> 
> 赞同：1
> 
> 时间：2013-02-09T15:04:24.590
> 
> 标签：haskell

我已经定义了树的类型。

```
data Tree a = Empty | Node a (Tree a) (Tree a) deriving (Read , Eq, Ord, Show) 
```

现在，在一个文本文件中，我有二叉树，例如：

```
(7 (3 (1 () ()) (5 () ())) (11 (9 () ()) (13 () ()))) 
```

如何编写一个函数来读取树的这种表示并构造 Tree 类型的树？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T19:10:38.150

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T17:02:58.417

你正在编写一个解析函数。基本类型类似于`String -> Tree Int`，但有一些强大的改进值得考虑。

首先，并不是所有`String`的 s 实际上都可以翻译成`Tree`s （即`")"`绝对不是一棵树），所以最好将函数细化为类似 的类型`String -> Maybe (Tree Int)`，`Maybe`monad 表示可能的失败。

其次，您可能真的不想重新发明`Int`解析器。您可以使用`Read`typeclass 来访问解析器的集合。所以你可能

*   然后再次细化类型`Read a => String -> Maybe (Tree a)`
*   导入`Safe`模块以访问`readMay :: Read a => String -> Maybe a`
*   然后只需构建`Tree`解析组件。

第三，`Tree`s 是高度递归的，你的括号 Lispy 语法是高度递归的，你的解析器也应该是。为此，专注于只解析单个节点`"(...)"`，然后根据需要递归解析内部节点。

最后，您可能希望最终考虑一些更强大的解析工具。`Parsec`它比`Read`类更强大，并且可以轻松地从更小、更简单的部分构建更复杂、更递归的解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T16:44:13.420

让我给你一些提示：

1.  树是一种自相似结构。听起来你应该使用...

2.  `()`代表一棵树`Empty`

3.  树的表示具有这种结构`(string_data_with_type_a string_tree string_another_tree)`。似乎这两个括号可以省略，空格分隔这三个参数。

就这样。祝你旅途愉快，哈斯凯勒。

如果你问，我可以给你答案。

# javascript - 重命名对象中的字段

> ID：14789405
> 
> 赞同：4
> 
> 时间：2013-02-09T15:05:27.443
> 
> 标签：javascript

如果我有以下对象：

```
JsonObj = {
    "frames": {
        "cinema": {
            "sourceSize": { "w": 256, "h": 200 },
            "frame": { "x": 0, "y": 0, "w": 256, "h": 192 }
        },
        "tree": {
            "sourceSize": { "w": 128, "h": 110 },
            "frame": { "x": 0, "y": 302, "w": 70, "h": 96 }
        }
    }
}; 
```

`parsedJSON`使用以下 JavaScript 代码将此 JSON 对象解析为变量：

```
var parsedJSON = JSON.parse(JsonObj); 
```

我如何将“框架”属性重命名为`parsedJSON`其他名称？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-09T15:07:41.367

将 设置为指向`somethingElse`的引用，然后删除。`frames``frames`

```
parsedJSON.somethingElse = parsedJSON.frames;
delete parsedJSON.frames; 
```

这里重要的是它`frames`只是一个指向对象的指针；如果你删除`frames`指针，`somethingElse`仍然引用一个有效的对象。

* * *

^(另请注意，没有“JSON 对象”之类的东西；你有一个对象的 JSON 表示，它是一个字符串，*或者*你有一个对象（通常可以通过对象文字符号定义，这通常是混淆所在）。)

# jquery - 如何使用jquery自动完成获取不在自动完成列表中的文本？

> ID：14789410
> 
> 赞同：0
> 
> 时间：2013-02-09T15:06:06.350
> 
> 标签：jquery, jquery-ui

```
 var options = {
       select: function(event,ui) {

         searchIndex = $.inArray(ui.item.value, arrayA)
   },
   source: function(req, response) {
        var re = $.ui.autocomplete.escapeRegex(reg, term);
        var matcher = new RegExp("^" + re + "i");
        response($.grep(arrayA, function(item, index) {
        return matcher.test(item);
    })); 
  } 
```

};

鉴于上面列出的自动完成选项，我如何获取未在数组列表 (arrayA) 中列出但在输入回车键后在输入文本区域中键入的文本？

```
 <input type=text id="searchAText" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-03T09:36:25.723

是的，这是老话题了。但我也需要找出列表之外的值。

当我使用更改事件而不是选择事件时，我成功了，并检查了 ui.item 是否为 null 以及它的值是否在 $(this).val() 中。

所以在你的情况下，它会是这样的：

```
change: function(event,ui) {
    if (ui.item == null)
    searchIndex = $.inArray($(this).val(), arrayA);
    else
    searchIndex = $.inArray(ui.item.value, arrayA);
}, 
```

# r - 是否可以从 C# 中调用用户定义的（自定义）R 函数？

> ID：14789417
> 
> 赞同：5
> 
> 时间：2013-02-09T15:06:44.653
> 
> 标签：r, c#-4.0

是否可以从 C# 中调用用户定义的（自定义）R 函数？

例如用 R 编写的简单矩阵乘法函数：

```
matrix_mult = function(a, b) {
c = a %*% b;
return c;
} 
```

如何从 c# 调用这个 R 函数 matrix_mult(a,b)？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T21:24:59.127

经过一番研究，我自己找到了答案。

1) 在 MS Visual Studio 中打开现有或新项目。

2) 安装 R.NET (NuGet) [http://rdotnet.codeplex.com](http://rdotnet.codeplex.com)

安装很简单：菜单：Visual Studio (2012) > Library Package Manager > Package Manager Console type "Install-Package R.NET"

3) 在 R 中初始化一个函数并从 C# 调用它 有关R 中的数据类型，请参见[http://rdotnet.codeplex.com/documentation](http://rdotnet.codeplex.com/documentation)

```
using RDotNet;

class Program
{
    static void Main(string[] args)
{
    // Set the folder in which R.dll locates.
    var envPath = Environment.GetEnvironmentVariable("PATH");

    // check the version and path on your computer
    var rBinPath = @"C:\Program Files\R\R-2.14.1\bin\x64";

    Environment.SetEnvironmentVariable("PATH", envPath + System.IO.Path.PathSeparator + rBinPath);

    using (REngine engine = REngine.CreateInstance("RDotNet"))
    {
        // Initializes settings.
        engine.Initialize();

        // create an R function
        // R style
        // See: http://rdotnet.codeplex.com/wikipage?title=Examples&referringTitle=Home

        Function matrix_mult = engine.Evaluate(@"matrix_mult <- function(a,b){ 
        c = a %*% b;
        return(c);
        }").AsFunction();

        NumericMatrix d = engine.Evaluate(@"d <- matrix_mult(a,b)").AsNumericMatrix();

        Console.WriteLine("Matrix d:");
        engine.Evaluate("print(d)");

        // convert NumericMatrix of R to double[,] of .net
        double[,] darr = new double[d.RowCount, d.ColumnCount];
        d.CopyTo(darr, d.RowCount, d.ColumnCount);

        Console.ReadKey();
    }
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T20:20:02.800

简短的回答：没有。

稍长的答案：错误的工具链。Windows 上的 R 是使用 MinGW gcc 端口构建的。链接介于不可能到非常脆弱之间。

您只能通过使用两台机器的弱耦合来做到这一点，其中一台机器上有[Rserve](http://rforge.net/Rserve)，并且有一个 .Net / C# 连接到它。有一些解决方案，例如[RserveCLI](http://rservecli.codeplex.com/)。

# r - 列表中列的数据类型 - R

> ID：14789420
> 
> 赞同：3
> 
> 时间：2013-02-09T11:56:35.640
> 
> 标签：r, dataset, mode

我想“提取”R中列表中不同列的数据类型。

我正在使用以下功能：

```
my.data.types <- t(sapply(loansData,
             function(x) c(typeof(x), storage.mode(x), mode(x)))) 
```

但是，我得到的数据类型与我拥有的数据不同。

例如， loan. purpose 存储字符串，但我得到的结果如下：

```
loan.purpose                   "integer" "integer" "numeric" 
```

如何获取列的数据类型？

谢谢，

迭戈

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T04:44:34.827

正如cbeleites所指出的，这个问题的答案是

```
sapply (loansData, class) 
```

# javascript - jQuery iframe 关键字

> ID：14789421
> 
> 赞同：1
> 
> 时间：2013-02-09T15:07:00.170
> 
> 标签：javascript, jquery, html, iframe

如何检查 iframe 是否包含某个文本关键字然后显示/显示它...？

ocr iframe 将包含动态生成的文本，我需要获取某些部分

我拥有的代码不起作用：

```
 <iframe id="ocr"></iframe>

    $('#ocr:contains("keyword")').addClass("highlight");

    if ($('#ocr').text().indexOf("keyword") != -1){alert('found keyword');} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:14:47.173

```
$("#ocr").highlightTextarea({
words: ["\\B@\\w+"],
color: "lightblue",
id: "mark"
}); 
```

[http://jsfiddle.net/sQVe/uhHnN/3/](http://jsfiddle.net/sQVe/uhHnN/3/)

尝试这样的事情......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:48:26.750

您需要分析 iframe 的内容，而不仅仅是 iframe 元素本身。您可以使用[`contents()`](http://api.jquery.com/contents/).

例如：

```
if($("#ocr").contents().find('body').text().indexOf("keyword") != -1)
{
    alert('Keyword found');
} 
```

# python - 如何使用 Python 的 PySphere 获取 VmWare Workstation VM

> ID：14789425
> 
> 赞同：4
> 
> 时间：2013-02-09T15:07:21.200
> 
> 标签：python, vmware-workstation

**更新：**即使我尝试创建**共享虚拟机**并更改该虚拟机的位置，问题仍然存在。

我试图`D:\VMs\CentOS-Backup\CentOS-Secondary-Server.vmx`使用[PySphere 访问](http://code.google.com/p/pysphere/)位于的虚拟机时遇到了困难。

请你帮助我好吗？

到目前为止，我所做的只是：

```
from pysphere import VIServer

server = VIServer()
server.connect("127.0.0.1", "my_system_login", "my_system_password")

# prints 'VMware Workstation'
print server.get_server_type()

# prints '5.1'
print server.get_api_version()

# Exception
vm = server.get_vm_by_path(r"D:\VMs\CentOS-Backup\CentOS-Secondary-Server.vmx")

vm.power_on() 
```

提到的例外是：

```
Traceback (most recent call last):
  File "C:\Program Files (x86)\JetBrains\PyCharm 2.7\helpers\pydev\pydevd.py", line 1473, in <module> 
    debugger.run(setup['file'], None, None)
  File "C:\Program Files (x86)\JetBrains\PyCharm 2.7\helpers\pydev\pydevd.py", line 1117, in run
    pydev_imports.execfile(file, globals, locals) #execute the script
  File "D:/Projects/PyUnitTesting/pyunittest/launcher.py", line 13, in <module>
    vm = server.get_vm_by_path(r"D:\VMs\CentOS-Backup\CentOS-Secondary-Server.vmx")
  File "C:\dev\Python27\lib\site-packages\pysphere\vi_server.py", line 291, in get_vm_by_path
    FaultTypes.OBJECT_NOT_FOUND)
pysphere.resources.vi_exception.VIException: [Object Not Found]: Could not find a VM with path 'D:\VMs\CentOS-Backup\CentOS-Secondary-Server.vmx' 
```

请注意，我也安装了**VIX API**。但没有执行任何与系统 PATH 添加相关的特定操作。如果我真的需要这样做，你能给我一个提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-19T23:41:33.190

我终于想通了！您需要确保虚拟机是共享的。虚拟机->管理->共享...

然后它们将显示在 server.get_registered_vms() 下，然后您可以使用 get_vm_by_name。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:05:33.933

根据文档，我认为您不应该向 VM 提供原始文件路径。我认为有一个内部路径值：

[http://code.google.com/p/pysphere/wiki/GettingStarted#Getting_VM_properties](http://code.google.com/p/pysphere/wiki/GettingStarted#Getting_VM_properties)

1.  get_vm_by_path：通过虚拟机配置文件路径检索虚拟机。要通过 VMWare VI Client 获取此值：
    1.  右键单击资源树中的 vm 图标，然后选择“编辑设置...”
    2.  转到“选项”选项卡。
    3.  该值位于“虚拟机配置文件”字段中

他们的示例代码显示了这一点：

```
vm1 = server.get_vm_by_path("[DataStore1] Ubuntu/Ubuntu-10.vmx") 
```

# oracle - 如何将指纹模板移动到oracle数据库

> ID：14789426
> 
> 赞同：1
> 
> 时间：2013-02-09T15:07:31.167
> 
> 标签：oracle, blob, fingerprint

我正在使用数字角色，你是 4500 和 oracle 数据库，我遇到了将指纹模板存储到数据库的问题，这是我的代码的一部分

```
string sqlInsert = "insert into mytable(ID,FINGERPRINT)";
       sqlInsert += "values (:i_ID,:i_FINGERPRINT)";

OracleParameter iID = new OracleParameter();
        iID.OracleDbType = OracleDbType.Varchar2;
        iID.Value = textBox1.Text;
        iID.ParameterName = "i_ID";

OracleParameter iFINGERPRINT = new OracleParameter();
        iFINGERPRINT.OracleDbType = OracleDbType.Blob;
        iFINGERPRINT.Direction = ParameterDirection.Input;
        iFINGERPRINT.Value = Data.Templates[5];
        iFINGERPRINT.ParameterName = "i_FINGERPRINT";

cmdInsert.Parameters.Add(iID);
cmdInsert.Parameters.Add(iFINGERPRINT);
cmdInsert.ExecuteNonQuery(); 
```

注意：Data.Templates[5] 是指纹模板格式

我收到错误“无效的参数绑定”是什么意思？有人可以帮助我吗？我应该怎么办？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T04:33:03.640

```
 string path="C:\\Fingerprintimage.bmp";
                    FileStream fls;
                    fls = new FileStream(path, FileMode.Open, FileAccess.Read);
                    byte[]  blob = new byte[fls.Length];
                    fls.Read(blob, 0, System.Convert.ToInt32(fls.Length));
                    fls.Close();
                    string q="";
                    q = "insert into mytable(ID,FINGERPRINT) values(" + 1 + ", :BlobParameter)";
                    OracleParameter blobParameter = new OracleParameter();
                    blobParameter.OracleDbType = OracleDbType.Blob;
                    blobParameter.ParameterName = "BlobParameter";
                    blobParameter.Value = blob;
                    cmd = new OracleCommand(q, conn);
                    cmd.Parameters.Add(blobParameter);
                    cmd.ExecuteNonQuery(); 
```

# c++ - 静态类型语言中的合并运算符

> ID：14789430
> 
> 赞同：0
> 
> 时间：2013-02-09T15:07:47.970
> 
> 标签：c++, python

我对合并运算符不是很熟悉——我只是从一些 Python 用法中知道它到底是什么。

就我而言，合并运算符是一种*混合器*或*合并*运算符，它将不同的表达式结果组合成一个唯一值。

Python 中的这个表达式的计算结果为`"some value"`：

```
value = True and "some value" 
```

而这个是`False`：

```
value = False and "some value" 
```

我可以使用一些表达式来评估，而不是直接使用布尔值，但是在静态类型语言（如 C++）中，这是行不通的——除非使用模板，我猜。

我的问题是：是否有任何静态类型的语言支持`coalescing operators`，或者*评估表达式问题*是这些语言不支持此功能的原因？

只是为了添加一些上下文，我最近一直在尝试在 C++ 中操作接近这些表达式的东西，但它总是会导致`expected primary-expression before`错误——据我推断问题出在语言类型方法上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:12:48.670

简而言之，没有。

C++ 不是 Python（或 PHP 或其他一些“高级语言”）。在 Python 中，变量可以从包含布尔值变为包含字符串到包含浮点数。在 C 和 C++ 中，变量被声明为包含特定类型。有一些方法可以在同一个结构中存储不同的类型，例如“Boost::variant”，它的作用类似于 Python 内部所做的——它在数据结构中具有“这个变量是什么类型”。

# php - PHP cURL 帖子字段无法正常工作

> ID：14789436
> 
> 赞同：0
> 
> 时间：2013-02-09T15:08:07.173
> 
> 标签：php, post, curl, http-post

如果有人能帮我解决这个问题，那就太好了。这就是我到目前为止所拥有的。当我运行它并回显 dom 内容时，我仍然会看到登录页面。但我看不出我做错了什么。

```
 $target_url = "https://secretsales.com/";
    $fields = array('email' => 'abc', 'password' => '123');
    $postFields = http_build_query($fields, '', '&');

    // make the cURL request to $target_url
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_USERAGENT, $userAgent);
    curl_setopt($ch, CURLOPT_URL, $target_url);
    curl_setopt($ch, CURLOPT_FAILONERROR, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_AUTOREFERER, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $postFields);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    $html = curl_exec($ch);

    // parse the html into a DOMDocument
    $dom = new DOMDocument();
    @$dom -> loadHTML($html);

    // grab all the on the page
    $xpath = new DOMXPath($dom);

    echo $dom->saveHTML(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:34:21.547

添加这个：

```
curl_setopt ($ch, CURLOPT_COOKIEJAR, dirname(__FILE__) . "/tmp/cookies.txt");
curl_setopt ($ch, CURLOPT_COOKIEFILE, dirname(__FILE__) . "/tmp/cookies.txt"); 
```

这会将 cookie 存储到指定的目录中，因此您可能必须创建该目录。

# java - 如何检测 NativeEvent 中的数字键？

> ID：14789437
> 
> 赞同：0
> 
> 时间：2013-02-09T15:08:10.497
> 
> 标签：java, javascript, events, gwt

看着`com.google.gwt.dom.client.NativeEvent extends JavaScriptObject`，我怎样才能检测到事件是否是一个数字？我想过`Character.isDigit(event.getKeyCode())`，但这会给我一个错误：

> Character 类型中的方法 isDigit(char) 不适用于参数 (int)

我怎么能检测到他的呢？我为此使用 GWT Java。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T11:15:37.347

## 解决方案 1

```
addKeyPressHandler( new KeyPressHandler()
{
  public void onKeyPress( KeyPressEvent event )
  {
   char charCode = event.getCharCode();
   if ( Character.isDigit( charCode ) )
   {
    System.out.println("This is a digit!!!");
   }
  }
} 
```

## 解决方案 2

```
public void onBrowserEvent( com.google.gwt.cell.client.Cell.Context context, Element parent, String value, NativeEvent event, ValueUpdater<String> valueUpdater )
    {       
        if ( "keypress".equals( event.getType() ) )
        {
            int charCode = event.getCharCode();
            if ( !Character.isDigit( ( char ) charCode ) )
            {
              System.out.println("This is a digit!!!");
            }
        }
        super.onBrowserEvent( context, parent, value, event, valueUpdater );
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T10:57:33.503

原来，我必须做一个演员表：`(char) event.getKeyCode();` 这种方式`isDigit(char)`可以毫无问题地使用。

# c# - 如何在没有编译时常量的情况下设置可选参数

> ID：14789439
> 
> 赞同：19
> 
> 时间：2013-02-09T15:08:26.223
> 
> 标签：c#, parameters, optional

有没有办法写下面的C#方法：

```
public string Download(Encoding contentEncoding = null) {
    defaultEncoding = contentEncoding ?? Encoding.UTF8;
    // codes...
} 
```

添加了默认参数，因此它看起来像这样：

```
public string Download(Encoding contentEncoding = Encoding.UTF8) {
    // codes...
} 
```

不使用编译时常量？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-09T15:10:01.973

简而言之。不。

可选参数必须是编译时常量或值类型。

来自MSDN 上的[命名和可选参数（C# 编程指南）](http://msdn.microsoft.com/en-us/library/dd264739.aspx)：

> 每个可选参数都有一个默认值作为其定义的一部分。如果没有为该参数发送任何参数，则使用默认值。默认值必须是以下表达式类型之一：
> 
> *   一个常量表达式；
> *   形式的表达式`new ValType()`，其中`ValType`是值类型，例如枚举或结构；
> *   形式的表达式`default(ValType)`，其中`ValType`是值类型。

* * *

您似乎想要实现的目标可以通过重载来实现：

```
public string Download()
{
   return Download(Encoding.UTF8);
}

public string Download(Encoding contentEncoding)
{
   defaultEncoding = contentEncoding ?? Encoding.UTF8;
   // codes...
} 
```

请注意，这与可选参数并不完全相同，因为默认值会通过可选参数硬编码到调用者中（这就是存在限制的原因）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-09T15:11:10.473

使用重载：

```
public string Download(Encoding contentEncoding)
{
   // codes...
}

public string Download()
{
    return Download(Encoding.UTF8);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-27T10:06:48.163

```
public static string Download(Encoding encoder = null)
{
    if (encoder == null)
        encoder = Encoding.Default

   string returnVal="";
   // do something

    return returnVal;
} 
```

# excel - 删除行并维护输入范围

> ID：14789444
> 
> 赞同：0
> 
> 时间：2013-02-09T15:08:58.170
> 
> 标签：excel, excel-2003, vba

我想知道是否有人可以帮助我。

几个星期以来，我一直在尝试找到一种解决方案，让用户可以执行以下操作：

*   删除有和没有数据的行，
*   移动所有包含数据的行，使它们一个在另一个之下，
*   在保持定义的“输入范围”的同时

我整理了以下脚本，它清除了单元格内容，因此不会改变“输入范围”。

```
Sub DelRow()

      Dim msg

          Sheets("Input").Protect "handsoff", userinterfaceonly:=True
          Application.EnableCancelKey = xlDisabled
          Application.EnableEvents = False
          msg = MsgBox("Are you sure you want to delete this row?", vbYesNo)
          If msg = vbNo Then Exit Sub
          With Selection
              Application.Intersect(.Parent.Range("A:S"), .EntireRow).Interior.ColorIndex = xlNone
              Application.Intersect(.Parent.Range("T:AE"), .EntireRow).Interior.ColorIndex = 42
              Selection.SpecialCells(xlCellTypeConstants).ClearContents
              Application.Intersect(.Parent.Range("C:AE"), .EntireRow).Locked = True
              Application.Intersect(.Parent.Range("AG:AG"), .EntireRow).Locked = True
          End With
              Application.EnableEvents = True
      End Sub 
```

**更新代码**

```
Sub DelRow()
Dim RangeToClear As Range
Dim msg As VbMsgBoxResult

'Sheets("Input").Protect "handsoff", userinterfaceonly:=True
Application.EnableCancelKey = xlDisabled
Application.EnableEvents = False
msg = MsgBox("Are you sure you want to delete this row?", vbYesNo)
If msg = vbNo Then Exit Sub
With Selection
    Application.Intersect(.Parent.Range("A:S"), .EntireRow).Interior.ColorIndex = xlNone
    Application.Intersect(.Parent.Range("T:AE"), .EntireRow).Interior.ColorIndex = 42
    On Error Resume Next
    Set RangeToClear = Selection.SpecialCells(xlCellTypeConstants)
    On Error GoTo 0    ' or previously defined error handler
    If Not RangeToClear Is Nothing Then
        RangeToClear.ClearContents
    Else
    Selection.Sort Key1:=Range("B7"), Order1:=xlAscending, Header:=xlNo, _
        OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
        DataOption1:=xlSortNormal
    End If
    Application.Intersect(.Parent.Range("C:AE"), .EntireRow).Locked = True
    Application.Intersect(.Parent.Range("AG:AG"), .EntireRow).Locked = True
End With
Application.EnableEvents = True
End Sub 
```

但是，问题在于，如果用户选择空白行，他们会收到“错误 400”消息，并且不会将行向上移动以位于彼此下方。

正如我所说，我花了很多时间试图找到一个没有任何成功的解决方案。

如果有人可以看看这个并就我如何实现这一目标提供一些指导，我真的会非常感激。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:32:30.597

如果选择为空白，则该行将`Selection.SpecialCells(xlCellTypeConstants).ClearContents` 失败，因为没有`xlCellTypeConstants`. 您需要对此进行测试，并且仅在有内容时才清除内容：

编辑：尝试回答排序问题

我认为您无论如何都只想排序，所以我只是将`Sort`.移到`ClearContents`. 不过，我对 UsedRange 进行了排序，我认为这不是您想要的。您需要定义要排序的范围，可以使用 Excel 中的名称管理器或在您的代码中定义为命名范围。

```
Sub DelRow()
Dim RangeToClear As Range
Dim msg As VbMsgBoxResult

Sheets("Input").Protect "handsoff", userinterfaceonly:=True
Application.EnableCancelKey = xlDisabled
Application.EnableEvents = False
msg = MsgBox("Are you sure you want to delete this row?", vbYesNo)
If msg = vbNo Then Exit Sub
With Selection
    Application.Intersect(.Parent.Range("A:S"), .EntireRow).Interior.ColorIndex = xlNone
    Application.Intersect(.Parent.Range("T:AE"), .EntireRow).Interior.ColorIndex = 42
    On Error Resume Next
    Set RangeToClear = Selection.SpecialCells(xlCellTypeConstants)
    On Error GoTo 0    ' or previously defined error handler
    If Not RangeToClear Is Nothing Then
        RangeToClear.ClearContents
    End If
    'You need to define a range that you want sorted
    'here I've used UsedRange
    ActiveSheet.UsedRange.Sort Key1:=Range("B7"), Order1:=xlAscending, Header:=xlNo, _
                   OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
                   DataOption1:=xlSortNormal

    Application.Intersect(.Parent.Range("C:AE"), .EntireRow).Locked = True
    Application.Intersect(.Parent.Range("AG:AG"), .EntireRow).Locked = True
End With
Application.EnableEvents = True
End Sub 
```

# java - 局部变量未初始化 catch-22

> ID：14789445
> 
> 赞同：0
> 
> 时间：2013-02-09T15:09:05.533
> 
> 标签：java

Java新手在这里！我需要创建一个 Java 方法来保持传递给它的值的总和。但是，如果我使用局部变量并继续对其进行初始化，我将失去运行平衡。有没有解决的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:10:21.420

使用类的成员变量。如果要计算传递给类的所有对象的值，请使用静态变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T15:10:33.303

是的..声明一个字段。

```
public class Summation{

    private int total;

    public void sumUp(int n){
        total += n;
   }
} 
```

如果您有兴趣，在其他语言（如 C/C++）中，您*可以*通过以下方式完成：

```
 void sumUp(int n){
    static int total = 0; 
    total+=n;

 } 
```

这确保了它`total`被声明一次，并在随后的调用中将其添加到`sumUp`. 由于 Java 是面向对象的，因此不允许这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T15:17:16.613

好吧，刘易斯已经回答了。但是作为新手，请理解其背后的逻辑。所有局部变量都存储在堆栈中，当线程从方法中出来时会被销毁，而实例变量则存储在堆中，这将在对象生命周期内保持不变。它应该可以帮助您了解 Java 的其他基础知识

# javascript - javascript拖放不起作用

> ID：14789447
> 
> 赞同：0
> 
> 时间：2013-02-09T15:09:11.313
> 
> 标签：javascript, html

我正在尝试将页面上的图像拖放到页面中心。我可以看到正在拖动的图像，但仍然留下了一个副本。当我放下它时，它会回到原来的位置。

谁能告诉我我做错了什么以及为什么我看到这个错误：

> NS_ERROR_INVALID_POINTER：组件返回失败代码：0x80004003 (NS_ERROR_INVALID_POINTER) [nsIDOMHTMLDivElement.appendChild]

`ev.target.appendChild(document.getElementById(data))`

这是代码的输出：

```
<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title></title>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
        <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
        <link rel="stylesheet" href="/resources/demos/style.css" />
        <link rel="stylesheet" href="../dominoes/css/dominoes.css" type="text/css" />
    <!--[if IE]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script>
    function allowDrop(ev) {
        ev.preventDefault();
    }

    function drag(ev){
        ev.dataTransfer.setData("Text",ev.target.id);
    }

    function drop(ev)        {
        ev.preventDefault();
        var data=ev.dataTransfer.getData("Text");
        ev.target.appendChild(document.getElementById(data));
    }
    </script>
  </head>
  <body> 

<div id="board">
    <div id='playArea' ondrop='drop(event)' ondragover='allowDrop(event)'>
        <div id="Play2Right">
            <div style="background-color: red;" class="bones_Play2Right">51</div>
            <div style="background-color: red;" class="bones_Play2Right">61</div>
            <div style="background-color: red;" class="bones_Play2Right">65</div>
            <div style="background-color: red;" class="bones_Play2Right">62</div>
            <div style="background-color: red;" class="bones_Play2Right">44</div>
            <div style="background-color: red;" class="bones_Play2Right">33</div>
            <div style="background-color: red;" class="bones_Play2Right">20</div>
        </div>
        <div id="Play2Top">
            <div style="background-color: green;" class="bones_Play2Top">32</div>
            <div style="background-color: green;" class="bones_Play2Top">50</div>
            <div style="background-color: green;" class="bones_Play2Top">42</div>
            <div style="background-color: green;" class="bones_Play2Top">31</div>
            <div style="background-color: green;" class="bones_Play2Top">53</div>
            <div style="background-color: green;" class="bones_Play2Top">52</div>
            <div style="background-color: green;" class="bones_Play2Top">41</div>
        </div>
        <div id="Play2Left">
            <div style="background-color: black;" class="bones_Play2Left">22</div>
            <div style="background-color: black;" class="bones_Play2Left">10</div>
            <div style="background-color: black;" class="bones_Play2Left">0</div>
            <div style="background-color: black;" class="bones_Play2Left">43</div>
            <div style="background-color: black;" class="bones_Play2Left">30</div>
            <div style="background-color: black;" class="bones_Play2Left">55</div>
            <div style="background-color: black;" class="bones_Play2Left">63</div>
        </div>
        <div id="Play2Active">
            <img draggable="true" ondragstart="drag(event)" class="bones_Play2Active"
            src="/dominoes/css/images/60.png" alt="60">
            <img draggable="true" ondragstart="drag(event)" class="bones_Play2Active"
            src="/dominoes/css/images/66.png" alt="66">
            <img draggable="true" ondragstart="drag(event)" class="bones_Play2Active"
            src="/dominoes/css/images/54.png" alt="54">
            <img draggable="true" ondragstart="drag(event)" class="bones_Play2Active"
            src="/dominoes/css/images/21.png" alt="21">
            <img draggable="true" ondragstart="drag(event)" class="bones_Play2Active"
            src="/dominoes/css/images/11.png" alt="11">
            <img draggable="true" ondragstart="drag(event)" class="bones_Play2Active"
            src="/dominoes/css/images/64.png" alt="64">
            <img draggable="true" ondragstart="drag(event)" class="bones_Play2Active"
            src="/dominoes/css/images/40.png" alt="40">
        </div>
    </div>
</div>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T21:46:40.077

您将`Text`数据设置为`id`拖动元素的数据：

```
ev.dataTransfer.setData("Text",ev.target.id); 
```

但是您的可拖动元素没有`id`：

```
<img draggable="true" ondragstart="drag(event)" class="bones_Play2Active"
        src="/dominoes/css/images/60.png" alt="60"> 
```

因此这段代码：

```
document.getElementById(data) 
```

正在做同样的事情：

```
document.getElementById('') 
```

它不会返回有效元素，因此您的调用`ev.target.appendChild`将失败，因为没有元素作为参数传递。

# android - 将整个屏幕与 LinearLayout 一起使用的问题

> ID：14789449
> 
> 赞同：0
> 
> 时间：2013-02-09T15:09:26.940
> 
> 标签：android, android-layout

我有这个非常简单的布局，2 个按钮，复选框，搜索栏和一些文本。它目前在 LinearLayout 上，我只能使用一半的屏幕，最多 5-6 行。我试图将按钮拖到按钮上，但我不能。就像他们被困在仅覆盖屏幕上半部分的框架中。任何建议如何解决这个问题？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/statusText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/timerText"
        android:layout_alignParentTop="true"
        android:layout_marginTop="31dp"
        android:text="@string/statusText"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <CheckBox
        android:id="@+id/timerCB"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/timerTime"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="44dp"
        android:onClick="activateTimer"
        android:text="@string/timerCB" />

    <Button
        android:id="@+id/stop_button"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="20dp"
        android:onClick="stopOperation"
        android:text="@string/stop_button" />

    <Button
        android:id="@+id/start_button"
        android:layout_width="319dp"
        android:layout_height="wrap_content"
        android:layout_above="@+id/stop_button"
        android:layout_alignParentRight="true"
        android:onClick="startOperation"
        android:text="@string/start_button" />

    <TextView
        android:id="@+id/timerText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/statusText"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="71dp"
        android:enabled="false"
        android:text="@string/timerText"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <SeekBar
        android:id="@+id/timerTime"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/timerText"
        android:layout_marginTop="32dp"
        android:enabled="false"
        android:max="90" />

</RelativeLayout> 
```

我的日志是这样的：

```
02-09 17:01:41.107: E/AndroidRuntime(12469): FATAL EXCEPTION: main
02-09 17:01:41.107: E/AndroidRuntime(12469): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.remoteswitch/com.example.remoteswitch.MainActivity}: java.lang.ClassCastException: android.widget.Button cannot be cast to android.widget.CheckBox
02-09 17:01:41.107: E/AndroidRuntime(12469):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-09 17:01:41.107: E/AndroidRuntime(12469):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-09 17:01:41.107: E/AndroidRuntime(12469):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-09 17:01:41.107: E/AndroidRuntime(12469):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-09 17:01:41.107: E/AndroidRuntime(12469):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-09 17:01:41.107: E/AndroidRuntime(12469):    at android.os.Looper.loop(Looper.java:137)
02-09 17:01:41.107: E/AndroidRuntime(12469):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-09 17:01:41.107: E/AndroidRuntime(12469):    at java.lang.reflect.Method.invokeNative(Native Method)
02-09 17:01:41.107: E/AndroidRuntime(12469):    at java.lang.reflect.Method.invoke(Method.java:511)
02-09 17:01:41.107: E/AndroidRuntime(12469):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-09 17:01:41.107: E/AndroidRuntime(12469):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-09 17:01:41.107: E/AndroidRuntime(12469):    at dalvik.system.NativeStart.main(Native Method)
02-09 17:01:41.107: E/AndroidRuntime(12469): Caused by: java.lang.ClassCastException: android.widget.Button cannot be cast to android.widget.CheckBox
02-09 17:01:41.107: E/AndroidRuntime(12469):    at com.example.remoteswitch.MainActivity.allocatePointers(MainActivity.java:60)
02-09 17:01:41.107: E/AndroidRuntime(12469):    at com.example.remoteswitch.MainActivity.onCreate(MainActivity.java:42)
02-09 17:01:41.107: E/AndroidRuntime(12469):    at android.app.Activity.performCreate(Activity.java:5104)
02-09 17:01:41.107: E/AndroidRuntime(12469):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-09 17:01:41.107: E/AndroidRuntime(12469):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:43:15.977

对于外部 LinearLayout 你试过了吗

```
 android:layout_height="match_parent" 
```

我也可以问你为什么选择

```
android:layout_height="0dp" 
```

为您的小部件？是否有理由不使用“wrap_content”或非零值？

# android - 如何连接 Android 应用程序连接到网络服务

> ID：14789451
> 
> 赞同：0
> 
> 时间：2013-02-09T15:09:30.653
> 
> 标签：android

我创建了一个小应用程序，我想通过这个应用程序将数据（通过 wifi 或蓝牙）发送到 PC/服务器。

1.  我正在考虑创建一个将在 PC 上运行的 Web 服务，并将不断地监听任何传入的客户端请求。

2.  一旦它收到来自客户端的请求，就会发生数据传输。在 web 服务接收到数据后，它应该自动打开一个应用程序/GUI 窗口，显示接收到的数据。

我的问题是我可以在 JAVA 中使用 TCP/IP 创建一个 Web 服务并让它在后台持续运行并监听客户端请求吗？另外，一旦 web 服务检测到客户端请求并接收到数据，我如何启动 GUI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:23:58.633

我建议在服务器端使用 WS，您可以在客户端使用[Ksoap android 库。](http://code.google.com/p/ksoap2-android/)创建一个后台线程，使用新数据更新 UI。使用适合您的解决方案的 AsyncTask、Loader 或 Handler。（阅读[官方参考资料](http://developer.android.com/reference/packages.html)了解更多信息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T15:37:35.710

使用 SQL Server 管理桌面上的数据并在 Visual Studio 上的 .NET 中创建 Web 服务。

然后连接到应用程序中的 Web 服务，并使用 Web 服务从数据库中设置/获取数据。

*可能有用的链接：*

**如何在 .NET 中创建 Web 服务（不包括在 Android 中的实现）：** [http ://srikanthtechnologies.com/blog/dotnet/wsdaljava.aspx](http://srikanthtechnologies.com/blog/dotnet/wsdaljava.aspx)

**如何将您的服务与 Android 连接：**

[http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html](http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html)

[http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap](http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap)

[http://adrianandroid.blogspot.in/2012/05/access-c-net-web-service-in.html](http://adrianandroid.blogspot.in/2012/05/access-c-net-web-service-in.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T19:07:57.380

最好的方法是创建一个 Web 服务并将您的应用程序连接到 Web 服务，您可以使用工具[http://www.wsdl2code.com](http://www.wsdl2code.com)创建连接和解析数据所需的所有代码:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-26T21:45:12.110

您可以通过使用 node.js 或 php 创建端点/路由然后将其托管在云上来轻松实现此目的。我想我现在喜欢使用 firebase 来托管，你可能不会尝试它真的很酷。在创建那些将连接到您的数据库的端点之后，您可以使用 http get 或 post 请求，具体取决于您希望在您的移动应用程序中从您的数据库中获得什么。如果你正在为 android 创建使用 Retrofit 进行 http 连接。

# css - 如何创建这种阴影效果？

> ID：14789455
> 
> 赞同：0
> 
> 时间：2013-02-09T15:10:11.740
> 
> 标签：css, html

我正在尝试创建类似于[这种阴影效果](https://www.jossandmain.com/)，并检查了 chrome 中的 CSS，但我仍然没有得到我想要的，我当前的代码是：

```
.imageShadow {
    background: #fff;
    -webkit-box-shadow: 0 0 5px 0 #bbb;
    box-shadow: 0 0 5px 0 #bbb;
    height: 293px;
} 
```

注意：我的图像高度是 293px

这适用于所有浏览器吗？

有人有想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T15:14:26.683

如果你的意思是漂亮的、弯曲的阴影，那么当前状态下的 CSS 是不允许的。他们没有使用 CSS 来做到这一点，他们使用了[图像精灵](https://secure.common.josscdn.com/st4/stores/common/jossandmain/sprites/sprite_jm_shadow_v1.png)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-09T15:15:45.323

这是一个显示 css box-shadow 兼容性的图表：

[http://caniuse.com/css-boxshadow](http://caniuse.com/css-boxshadow)

IE 9+、Firefox 4+、Safari 5+ 和 Chrome 都支持该样式。

# android - 谷歌授权

> ID：14789458
> 
> 赞同：2
> 
> 时间：2013-02-09T15:10:33.643
> 
> 标签：android, google-authentication

我是基于谷歌地图的应用程序的新手，并且正在尝试使用它。我使用了以下 mainfest

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.abhishekbietcs.locomap"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<permission
      android:name="com.abhishekbietcs.locomap.permission.MAPS_RECEIVE"
      android:protectionLevel="signature"/>
    <uses-permission android:name="com.abhishekbietcs.locomap.permission.MAPS_RECEIVE"/>

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.abhishekbietcs.locomap.Mapme"
        android:label="@string/title_activity_mapme" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="my key" />
</application> 
```

我从这段代码中得到了我的调试证书 sh1 fngrprint

```
keytool.exe -list -alias androiddebugkey -keystore ".....\.android\debug.keystore" -storepass android -keypass android -v 
```

这是我的xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".Mapme" >
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/map"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 class="com.google.android.gms.maps.SupportMapFragment"/> 
```

现在，当我在手机中安装时，log cat 中出现谷歌授权失败。请帮助我找出我做错的地方，提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:24:03.567

在创建使用 Google Maps API 的应用程序之前，您必须执行几个步骤：

*   [在 Google API 控制台 ( https://code.google.com/apis/console](https://code.google.com/apis/console) )中创建 Google API 项目
*   启用适用于 Android 的 Google Maps API（在“服务”选项卡中）
*   创建新的客户端 ID（您应该输入 SHA1 密钥和您的应用程序包名称）

你做了所有这些吗？如果是，请提供包含授权失败信息的 logcat 输出。

# jsf - Eclipse 中不存在 Java Server Faces

> ID：14789463
> 
> 赞同：1
> 
> 时间：2013-02-09T15:12:23.200
> 
> 标签：jsf

我在 Mac OS 10.5.8 上开发我已经安装了 java 1.6 (soylatte) 并且设置正确：java -version java version "1.6.0_03-p3" Java(TM) SE Runtime Environment (build 1.6.0_03- p3-landonf_19_aug_2008_14_55-b00)

我下载了带有 WTP 内容的 Eclipse Juno。

我使用 JSP 技术创建了一个 Web 应用程序。我正在考虑进行代码修改以使用 JSF 技术。所以我下载了 Apache myFaces 2.1 jar 并将它们添加到我的 WEB-INF/lib 目录中。

问题是在项目属性/项目面孔部分，我无权访问 Java Server Faces 复选框。

我错过了什么？

[编辑] 回应 BalusC 的评论。在我的项目属性的“Project Faces”部分中，没有显示“Java Server Faces”的复选框。有很多复选框（例如 JPA、XDoclet 等），但没有 JSF

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T09:46:14.747

下面是两个很好的教程，它们将引导您完成使用 Eclipse 创建 JSF 应用程序的过程：

[在 Eclipse 中创建 JavaServer Faces JSF 应用程序](http://viralpatel.net/blogs/tutorial-creating-javaserver-faces-jsf-application-in-eclipse-jsf-project-jsf-tutorial/) [如何使 Eclipse IDE 支持 JSF 2.0](http://www.mkyong.com/jsf2/how-to-make-eclipse-ide-supports-jsf-2-0/)

您的 Java 版本 1.6 和 Eclipse 版本（Juno，版本 4）是正确的。既然您澄清说 JSF 甚至不存在，我的第一反应是 Eclipse 出于某种原因无法读取 JSF jar 文件。[这里](https://stackoverflow.com/questions/8145364/how-to-enable-the-jsf-facet-in-eclipse-user-library)已经提出了一个类似的问题。

# wpf - 绑定集合子属性更新

> ID：14789466
> 
> 赞同：1
> 
> 时间：2013-02-09T15:12:27.510
> 
> 标签：wpf, properties, observablecollection

我在更新使绑定 ObservableCollection 子属性的 Listview 的值时遇到问题，

我的主要视图模型

```
public class ClienteViewModel : ViewModelBase
    {
...
    public ContatoViewModel ContatoViewModel
    {
      get
      {
         contatoViewModel = new ContatoViewModel(db,ClienteSelecionado);
         return contatoViewModel;
      }
      set
      {
         this.contatoViewModel = value;
         RaisePropertyChanged("ContatoViewModel");
      }
   }
} 
```

辅助视图模型

```
 public class ContatoViewModel : ViewModelBase
    {
      public ObservableCollection<Contato> Contatos{
           // list values 
           }

      public ICommand addContato{get;set;}

      public ICommand removeContato{get;set;}

      public Contato SelectedContato{get;set;}

    }
} 
```

XAML：

```
 <ListView ItemsSource="{Binding ContatoViewModel.Contatos},UpdateSourceTrigger=PropertyChanged"> 
```

或者

```
 <ListView DataContext="{Binding ContatoViewModel}" ItemsSource="{Binding Contatos,UpdateSourceTrigger=PropertyChanged}" > 
```

或者

```
 <Grid DataContext="{Binding ContatoViewModel}">
  <ListView ItemsSource="{Binding Contatos,UpdateSourceTrigger=PropertyChanged}" >
 </Grid> 
```

值显示正常，但是当我插入一些值并调用 raisePropertyChanged ObservableCollection() 时，什么也没更新。

但是如果列表在 ViewModel 中，主要功能正常。我应该怎么做才能使其与子属性一起使用？

# php - PHP命名空间混淆中的类路径等效项

> ID：14789468
> 
> 赞同：0
> 
> 时间：2013-02-09T15:13:04.117
> 
> 标签：php, namespaces

我公司的一个产品（我也是）使用的是 PHP 5.2。

我想切换到 5.4，所以我第一次用 5.4 做一些基本测试。

根据 PSR 0，我遵循以下文件夹结构进行简单测试：

```
Projectfolder
   |
   + index.php
   |
   + lib
      |
      + vendor
          |
          +  mylib
               |
               + MyClass.php (Having namespace \mylib ) 
```

这是我们的代码，称为`MyClass.php`：

```
namespace \mylib;
class MyClass {
    public $testA;
    public function MyClass(){
        $this->testA = "test entry";
    }
} 
```

我的问题是如何在 index.php 文件中获取 MyClass 的实例？

在命名空间之前，我可以这样做：

```
include "lib/vendor/mylib/MyClass.php";
$myClass = new MyClass();
echo $myClass->testA; 
```

现在使用命名空间，我尝试以下代码：

```
<?PHP
use mylib\MyClass
$myClass = new MyClass();
echo $myClass->testA; 
```

但是，我收到以下错误：

> 致命错误：找不到类 'mylib\MyClass' ...

我的问题是，我如何告诉 PHP 在文件夹中查找命名空间文件`lib\vendor`。

在 Java 中，我们通常定义一个类路径。PHP中有类似的设置吗？

正如命名空间教程中的一些示例所示，我需要包含所有 PHP 文件，其中包含要使用的所有类（10、20、50 任意数量）。我想这不应该是这样，否则在 PHP 中引入命名空间的整个目的都会失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:26:17.303

即使 WITH 命名空间，您也必须包含文件。命名空间用于在包含这些类之后引用它们。

这样你就可以

```
include "lib/vendor/mylib/MyClass.php";
use mylib;
\mylib\myClass::myFunction(); 
```

没有`new MyClass();`

有关详细示例，请参见[http://php.net/manual/en/language.namespaces.php](http://php.net/manual/en/language.namespaces.php)

# asp.net - ASP.NET 可以使用 net.tcp 协议连接到 WCF 吗？

> ID：14789469
> 
> 赞同：1
> 
> 时间：2013-02-09T15:13:07.343
> 
> 标签：asp.net, wcf, net.tcp

在 netTcpBinding 协议中有一个 WCF Windows 服务正在侦听，据我所知，这是微软的专有协议（如果我错了，请纠正我）。我需要编写一个使用 WCF 服务的网站。我知道某些 PHP 只能连接到 SOAP（basicHttpBinding 或 wsHttpBinding）中的 WCF 服务，所以我需要编写另一个 SOAP 代理。

[Internet 上的一些评论](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/ebc881de-1f5d-478a-adbb-042a003ffaff/)表明，可以让 ASP.NET 网站通过 net.tcp 协议连接到 WCF 服务。这是真的吗？我应该去哪里看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:48:59.320

您对 netTcpBinding 的理解是正确的。它是专有的，只能从 .NET 客户端访问。由于 ASP.NET 是 .NET，因此您可以毫无问题地使用 WCF 服务。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-09T15:39:10.480

当然，ASP.NET Web 应用程序可以使用 net.tcp 绑定连接到 WCF 服务，但不能通过 Internet！如果应用程序和服务不在同一台服务器或同一 Intranet 上，它将无法工作，您必须选择 HTTP 绑定。

从我下面的评论来看：是的 net.tcp 可以在互联网上工作，但不是在所有情况下都不建议使用它（在 MSDN 上查看）。当然，如果整个服务器控制是我们的，我们可以试一试，但如果不是（由第 3 方成员托管的应用程序和服务），让它工作的机会不是那么高（例如端口阻塞、net.Tcp 侦听器已禁用，net.Tcp 端口共享不起作用或已禁用）

# javascript - jQuery动画在开始和结束时颠簸

> ID：14789471
> 
> 赞同：3
> 
> 时间：2013-02-09T15:13:25.087
> 
> 标签：javascript, jquery, css, twitter-bootstrap

[这是我的代码（请参见此处](http://jsfiddle.net/dLVWr/)的小提琴）：

```
$('div').on('click', function () {
    $('.well')
        .stop()
        .animate({
        height: "toggle",
        opacity: "toggle"
    });
}); 
```

我有一个`.well`带有以下内容的引导程序。通过查看下面的内容，请注意动画开始和结束处的不连续性。

如何避免这些动画不连续性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T15:18:37.307

看看这个[http://jsfiddle.net/dLVWr/1/](http://jsfiddle.net/dLVWr/1/)：

**html:**

```
<div>Click to show/hide</div>
<div class='container'>
    <div class='well'>....</div>
</div>
<div>Stuff below</div> 
```

**js：**

```
$('div').on('click', function () {
    $('.container')
        .stop()
        .animate({
        height: "toggle",
        opacity: "toggle"
    });
}); 
```

您的代码的问题是`well`div 同时具有文本高度和填充。当切换不透明度和高度时，首先，内容高度为零，即填充。这就是跳跃的原因。

为避免这种情况，请确保您应用的 div`.animate`没有边距/填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T15:31:17.187

有一个小插曲，因为您正在为内容的高度设置动画而忽略它的外部高度。

这意味着一旦元素被切换`padding`， ,`border`和值就会生效。也就是说，在动画完成后隐藏它或动画在显示时开始。`margin``display`

你应该[`.slideToggle()`](http://api.jquery.com/slideToggle/)改用。

```
$('div').on('click', function () {
    $('.well').stop().animate();
}); 
```

# arduino - Arduino 串行输入字符串分布在多行上

> ID：14789477
> 
> 赞同：0
> 
> 时间：2013-02-09T15:14:09.967
> 
> 标签：arduino, serial-communication

首先，很抱歉标题混乱。我正在尝试在我的 arduino 上制作一个简单的程序，以回显从串行监视器接收到的串行输入。我的代码是这样的：

```
String string= "";
String string2 = "";

void setup()
{
    Serial.begin(9600);

}

void loop() {

    string = "";

    while(Serial.available() > 0)
    {
        string += (char) Serial.read();
        Serial.flush();

    }

    if(string != "")
    {
        Serial.println(string); 
    }

} 
```

但是当我上传它并打开串行监视器并输入任何内容时，它分布在几行中，如下所示：

```
Input: Why are you doing this?

W
hy 
are y
ou doin
g this? 
```

我已经坚持了几个小时了。我的设备是 Arduino Uno（官方），我在 Windows 7 上运行。在此先感谢您的帮助。

编辑： Serial.print(string) 什么都不返回，控制台屏幕留空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:19:24.747

使用`Serial.print(string);`而不是 println()

> **println()**将数据作为人类可读的 ASCII 文本打印到串行端口，后跟回车符（ASCII 13 或“\r”）和换行符（ASCII 10 或“\n”）。

参考：[http ://arduino.cc/en/Serial/Println](http://arduino.cc/en/Serial/Println)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:33:33.933

只需在您的 while 循环中稍作延迟，代码如下：

```
String string= "";
String string2 = "";

void setup()
{
    Serial.begin(9600);

}

void loop() {

    string = "";

    while(Serial.available() > 0)
    {
        string += (char) Serial.read();
        Serial.flush();
        delay(10);

    }

    if(string != "")
    {
        Serial.println(string); 
    }

} 
```

# java - 方法重载中奇怪的 Java 空行为

> ID：14789478
> 
> 赞同：14
> 
> 时间：2013-02-09T15:14:11.650
> 
> 标签：java, null, overloading

我有以下代码片段：

```
public static void foo(Object x) {
    System.out.println("Obj");
}
public static void foo(String x) {
    System.out.println("Str");
} 
```

如果我打电话`foo(null)`为什么没有歧义？为什么程序调用`foo(String x)`而不是`foo(Object x)`？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-09T15:15:28.943

> 为什么程序调用`foo(String x)`而不是`foo(Object x)`

这是因为`String`类扩展自`Object`，因此更具体到`Object`. 因此，编译器决定调用该方法。请记住，编译器总是选择最具体的方法来调用。请参阅[JLS 的第 15.12.5 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.5)

> 如果多个成员方法既可访问又适用于方法调用，则有必要选择一个为运行时方法分派提供描述符。Java 编程语言使用选择最具体方法的规则。
> 
> 非正式的直觉是，如果第一个方法处理的任何调用可以传递给另一个方法而不会出现编译时类型错误，那么一个方法比另一个方法更具体。

但是，如果您有两个带有参数 -`String`和的方法`Integer`，那么您会收到`ambiguity`错误`null`，因为编译器无法确定哪个更具体，因为它们是非协变类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-09T15:21:10.797

1.  根据`null`定义， of 的**类型是所有其他引用类型的子类型**。引用 JLS 4.1：

    > 空引用始终可以进行扩展引用转换为任何引用类型。

2.  调用中涉及的方法签名的解析遵循所有兼容签名集合中**最具体的签名原则。**（JLS 15.12.2.5\. 选择最具体的方法）。

总之，这意味着`String`在您的示例中选择了重载。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-09T15:18:40.130

它正在调用[*最具体*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.5)的方法。

由于 String 是 Object 的子类，因此 String 比 Object 更“具体”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-09T15:17:12.940

当在参数对两个参数都有效的两种方法之间进行选择时，编译器将始终选择最具体的参数作为匹配项。在这种情况下，`null`是一个可以作为 an`Object`和 a处理的文字`String`。`String`更具体，并且是`Object`编译器使用它的子类。

# mongodb - MongoDB中的缩放器值与数组

> ID：14789480
> 
> 赞同：1
> 
> 时间：2013-02-09T15:14:29.487
> 
> 标签：mongodb

考虑关注两个集合并关注注释。你觉得哪一个更合适？

```
// #1
{x:'a'}
{x:'b'}
{x:'c'}
{x:['d','e']}
{x:'f'} 
```

.

```
//#2
{x:['a']}
{x:['b']}
{x:['c']}
{x:['d','e']}
{x:['f']} 
```

一些事实：

*   字段`x`通常只有一个值 (95%)，有时甚至更多 (5%)。
*   Mongodb 在查询时的行为与 {x:['a']} 类似 {x:'a'}。
*   MongoVUE 直接在#1 中显示缩放器值并在`Array[0]`#2 中显示。
*   使用#1，当你想追加一个新值时，你必须转换数据类型
*   #1 在某些 CRUD 操作中可能会快一点（？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:59:17.507

为了放大@ZaidMasud 的观点，我建议使用 sclars 或数组，不要将两者混合使用。如果你有不可避免的理由同时拥有两者（比如遗留数据），那么我建议你非常熟悉 Mongo 查询如何处理数组；乍一看并不直观。例如看[这个谜题](http://www.kchodorow.com/blog/2012/12/27/mongodb-puzzlers-1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T16:57:33.530

从模式设计的角度来看，即使 MongoDB 允许您为键值对存储不同的数据类型，这样做也不一定是一个好主意。如果没有令人信服的理由使用不同的数据类型，通常最好对给定的键/值对使用相同的数据类型。

因此，鉴于这种推理，我更喜欢＃2。在这种情况下，应用程序代码通常会更简单。此外，如果您需要使用[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)，您会发现拥有统一类型很有用。

# hibernate - 将 hibernate-mapping dtd 移动到项目的文件夹

> ID：14789485
> 
> 赞同：0
> 
> 时间：2013-02-09T15:14:48.280
> 
> 标签：hibernate, dtd

此时我的 Hibernate 映射文件解析异常：

```
Caused by: org.dom4j.DocumentException: Server returned HTTP response code: 503 for URL: http://www.jboss.org/dtd/hibernate/hibernate-mapping-3.0.dtd Nested exception: Server returned HTTP response code: 503 for URL: http://www.jboss.org/dtd/hibernate/hibernate-mapping-3.0.dtd
    at org.dom4j.io.SAXReader.read(SAXReader.java:484)
    at org.hibernate.internal.util.xml.MappingReader.readMappingDocument(MappingReader.java:78)
    ... 43 more 
```

这是因为[http://www.jboss.org/](http://www.jboss.org/)暂时不可用 所以我想将 DTD 文件移动到我本地项目的路径。如果我只是删除 url 的第一部分（只留下 hibernate-mapping-3.0.dtd）我会得到一个错误：

```
Caused by: org.dom4j.DocumentException: C:\Programs\eclipse juno\hibernate-mapping-3.0.dtd (File not found) Nested exception: C:\Programs\eclipse juno\hibernate-mapping-3.0.dtd (File not found)
at org.dom4j.io.SAXReader.read(SAXReader.java:484)
at org.hibernate.internal.util.xml.MappingReader.readMappingDocument(MappingReader.java:78)
... 43 more 
```

我可以将它放到适当的文件夹中，但将来我可能会在生产环境中遇到同样的问题。所以我只想知道如何存储这个与项目路径相关的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:47:56.760

为了解决这个问题，我将 DTD 关键字从 PUBLIC 更改为 SYSTEM 并删除了 FPI。关于它的更多信息可以在这里找到：[http ://en.wikipedia.org/wiki/Document_Type_Declaration](http://en.wikipedia.org/wiki/Document_Type_Declaration)

# pari-gp - Pari/GP：用户定义函数

> ID：14789491
> 
> 赞同：2
> 
> 时间：2013-02-09T15:15:12.843
> 
> 标签：pari-gp

我已经定义了一些 arity 1 的函数，比如`func1(-)`和`func2(-)`。我已经对它们进行了测试，发现它们实际上做了他们应该做的事情。

我希望定义第三个函数，比如`func3(-)`，输出 和 的`func1(-)`差异`func2(-)`。这就是我所做的

```
func3(k) = {j=func1(k)-func2(k); print(j)} 
```

然而，它并没有返回它应该返回的东西。让我们假设`func1(5)`输出 10 和`func2(5)`输出 2。那么，`func3(5)`应该输出 8，对吗？相反，它返回`func1(5)`一行中的输出，`func2(2)`另一行中的输出，然后返回零（即使相应输出的差异不是 0）。

你知道 的定义有什么问题`func3(-)`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T15:24:34.790

GP 用户函数返回最后评估的值。在这里，它是 'print(j)' 命令的结果，它打印 j（副作用）并返回 'void'，当必须给它一个值时，它被类型转换为 0，就像这里一样。

```
f1(x) = 10
f2(x) = 2
f3(x) = f1(x) - f2(x) 
```

正确返回 8。您没有提供 func1 / func2 函数的代码，但我希望您包含一个“打印”语句，也许希望它返回一个值。这就是为什么您在 0 之前的不同行上获得输出的原因。

如果您不喜欢这种“return-last-evaluation-result”行为，您可以使用显式的“return (result)”语句。

# javascript - 与 .click(function() {...}); 绑定的对象；对点击没有影响

> ID：14789493
> 
> 赞同：1
> 
> 时间：2013-02-09T15:15:29.967
> 
> 标签：javascript, jquery, jquery-selectors, onclick

我正在尝试将一个函数绑定到一个跨度元素以滚动幻灯片（特别是 rcarousel 插件）。那是javascript代码：

```
$('.forward').click(function() {
    $("#carousel").rcarousel("next");
});

$('.rewind').click(function() {
    $("#carousel").rcarousel("goToPage", 0);
}); 
```

现在，这段代码在 document.ready 函数中，前进按钮 $(".forward") 可以正常工作并成功滚动幻灯片，但就像快退按钮被浏览器完全忽略一样。chrome devtools 控制台没有抛出任何错误；如果我在控制台中粘贴相同的代码，.rewind 就会神奇地开始工作。

有谁知道那里有什么魔法？

PS：在同一个 document.ready 函数中还有其他绑定，每个都完美无缺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-25T12:14:27.640

轮播按钮由轮播动态更改，因此您需要使用委托事件处理程序，附加到不变的祖先（`document`默认情况下没有更近的方便）：

```
$(document).on('click', '.forward', function() {
    $("#carousel").rcarousel("next");
});

$(document).on('click', '.rewind', function() {
    $("#carousel").rcarousel("goToPage", 0);
}); 
```

委托事件的工作原理是监听事件冒泡到一个不变的祖先，*然后*应用 jQuery 选择器，*然后*将函数应用于*导致事件*的任何单击元素。这意味着元素只需要在事件时间匹配，而不是*事件注册时间）。

注意：不要连接委托的事件处理程序，`'body'`因为样式会导致主体的高度为零并且不响应冒泡的鼠标事件。

# c++ - 如何使类的方法成为 const

> ID：14789496
> 
> 赞同：-2
> 
> 时间：2013-02-09T15:16:09.167
> 
> 标签：c++

怎么写是对的：

```
bool const f(...);
or bool f(...) const ;
or const bool f(...)  ; 
```

我的意思是它们之间是否有区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T15:21:29.260

1.  `const bool f();`说它返回一个永远不会改变其值的 const bool
2.  `bool f() const;`说 f 是一个 const 函数，不会修改类中的任何变量

在情况 1 中`const bool f();`，返回的 bool 必须声明为 const 并在声明时或在类的构造函数中初始化。

```
const bool f() { return m_bool; } 
```

其中 m_bool 被声明为`const bool m_bool = false;`

在情况 2 中`bool f() const;`，返回值不保证它永远不会被更改，但函数本身保证它不会更改类内的任何数据成员，并且它不会调用任何未声明为 const 的成员函数。（[有些例外情况适用](http://msdn.microsoft.com/en-us/library/4h2h0ktk.aspx)）

```
bool f() const { return m_bool; } // valid
bool f() const { m_bool = false; return m_bool; } // invalid, m_bool cannot be changed from a const function. 
```

其中 m_bool 可以声明为`const bool m_bool = false;`或者`bool m_bool;`

* * *

更多关于 const 变量的信息可以在[这里](http://msdn.microsoft.com/en-us/library/357syhfh.aspx)找到，更多关于 const 函数的信息可以在[这里](http://msdn.microsoft.com/en-us/library/6ke686zh.aspx)找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T15:20:07.763

1.  布尔常量 f(...);
2.  布尔 f(...) 常量；
3.  const bool f(...) ;

1 和 3 是同一个东西，只是`const`和的顺序不同`bool`。这两个意味着返回的布尔值是一个常数。但是由于您的代码很可能会执行类似的操作`bool b = myobject.f();`，因此该变量`b`是`f()`无论如何返回的值的副本，因此没有区别。

2 使`this`函数内部的指针`f()`a `const T *this`（其中 T 是您的类） - 意味着不允许修改类中的任何内容。这可能是您最初要求的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T15:20:39.760

函数名前面是返回类型。`const`in a 类型适用于它左边的任何东西，除非它左边没有任何东西，在这种情况下它适用于右边的任何东西。所以第一个和第三个返回类型是`const` `bool`s，第二个是非`const` `bool`。有`const`返回类型意味着返回的值不能被修改。

在`const`函数参数列表之后使函数成为`const`函数。这仅适用于成员函数（即在类中声明）。`const`成员函数只能在对象`const`上调用。因此，如果您有一个`foo`具有非`const`成员函数的类`f`，您将无法这样做：

```
const foo a_foo;
a_foo.f(); // Error because a_foo is const but f is not a const member function 
```

所以选项 1 和 3 是相同的——它们是`const`返回 a 的非函数`const bool`——而选项 2 是不同的——它是一个`const`返回 a 的函数`bool`。

# c# - 我想对 sql 命令中的多个变量使用 if 语句

> ID：14789500
> 
> 赞同：0
> 
> 时间：2013-02-09T15:16:33.037
> 
> 标签：c#, sql, ajax, variables, if-statement

我是编程新手。学习 C# 和使用 Visual Studio

我制作了一个带有两个文本框的文件。使用 javascript 将这些文本框的内容传输到另一个文件

列表文件

```
<script type="text/javascript">
        function RunAjax1(custId) {
            var custId = document.getElementById("customerId").value;
            //var custName = document.getElementById("customerName").value;
            jQuery.ajax(
                {
                    url: "CustActions.aspx?id=" + custId +"&custName="+customerName,
                    type: "GET"
                }

                ).done(function (responseText) {
                    jQuery("#display").html(responseText)
                });
        }
        </script> 
```

我想在 sql 命令之前使用 if 语句以使用一个或两个变量（以不为空的为准）。customerid 是整数，而 customerName 是字符串。

代码如下：

动作文件

```
<%      SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["connectionString"].ToString());
             string cmdText = @"SELECT * FROM Customers where id= @_id";
             SqlCommand cmd = new SqlCommand(cmdText, con);
             cmd.Parameters.Add("_id", SqlDbType.Int).Value = Convert.ToInt16(Request["id"].ToString());
             cmd.Parameters.Add("custName_",SqlDbType.VarChar).Value=Convert.ToChar(Request["custName"].ToString());
             DataTable dt = new DataTable();
             con.Open();
             dt.Load(cmd.ExecuteReader());
             con.Close();
         foreach (DataRow dr in dt.Rows)
            {
                Response.Write(string.Format(@"<tr>
                                                    <td>{0}</td>
                                                    <td>{1}</td> 
```

那就是我想要一个像下面这样的声明

```
if (_id is Notnull)
{
string cmdText = @"SELECT * FROM Customers where id= @_id";

}
else
{

string cmdText = @"SELECT * FROM Customers where customerName= @custName_"; 
```

}

加上对动作文件的变量声明

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:24:21.367

```
<%       SqlConnection con = new   SqlConnection(ConfigurationManager.ConnectionStrings["connectionString"].ToString());
         string cmdText = _id != null
                            ? @"SELECT * FROM Customers where id= @_id"
                            : @"SELECT * FROM Customers where customerName= @custName_";
         SqlCommand cmd = new SqlCommand(cmdText, con);
         cmd.Parameters.Add("_id", SqlDbType.Int).Value = Convert.ToInt16(Request["id"].ToString());
         cmd.Parameters.Add("custName_",SqlDbType.VarChar).Value=Convert.ToChar(Request["custName"].ToString());
         DataTable dt = new DataTable();
         con.Open();
         dt.Load(cmd.ExecuteReader());
         con.Close(); 
```

这是你想要的吗？但是，不建议将这么多代码放入您的 aspx 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:43:56.293

最好让你的代码接受 2 个参数，然后让存储过程处理空值，并且它有 if 语句

像这样

```
Create proc dosomething
(
-- initialized the values to null if no value is passed in 
@id tinyint = NULL
@CustomerName varchar 100 = NULL
)
BEGIN
if @tinyint is NULL and CustomerName is not null
 SELECT * FROM Customers where id= @id ";

END
BEGIN
if @CustomerName is NULL and @tinyint is NOT NULL
 SELECT * FROM Customers where customerName= @Customername";

END

BEGIN
if @CustomerName is NULL NOT  and @tinyint is NOT NULL
 SELECT * FROM Customers where (customerName= @Customername and id = @id) ";

END 
```

# javascript - jquery向下滑动和隐藏问题

> ID：14789511
> 
> 赞同：2
> 
> 时间：2013-02-09T15:17:35.327
> 
> 标签：javascript, jquery

请检查此代码：

```
 var data = $(".others-involved-div-wrapper-tobe-copied").html();
 data = '<div class="others-involved-div-wrapper" >'+data+'</div>';
 $(".others-involved-div-wrapper:last").after(data).slideDown("slow");
 if ($(".others-involved-div-wrapper").length > 1){
     $(".others-involved-div-wrapper:last .delete-more-others-involved").show();
 } 
```

这里的 slideDown 效果不起作用。如果我在 div 中不显示任何数据，则看不到数据

```
data = '<div class="others-involved-div-wrapper" style="display:none;" >'+data+'</div>'; 
```

如果我这样做`data = data.hide();`，它显示错误隐藏不是一个功能。

当附加该数据值时，我只需要滑动效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:26:50.117

> data = data.hide() 不起作用，因为它只是 HTML 文本而不是 jquery 对象。

检查是否

```
$(".others-involved-div-wrapper:last").after(data) 
```

返回一个 jquert 对象。这可能是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T15:40:40.467

除非有我不知道的原因，否则您似乎将 jQuery 与变量分配混淆了。也许这可能对你有用：

```
 var content = $(".others-involved-div-wrapper-tobe-copied").html(),
     data = '<div class="others-involved-div-wrapper" >'+ content +'</div>';

 $(".others-involved-div-wrapper:last").after(data).slideDown("slow");

 if ($(".others-involved-div-wrapper").length > 1){

     $(".others-involved-div-wrapper:last .delete-more-others-involved").show();

 } 
```

@GautamJeyaraman 是对的，您不能将 jquery 方法应用于非 jQuery 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T15:53:26.653

您还可以使用 jQuery 元素创建构造重构您的代码。

```
$("<div/>", {
    "class": "others-involved-div-wrapper",
    "html": $(".others-involved-div-wrapper-tobe-copied").html()
}).hide().insertAfter("div:last").slideDown("slow"); 
```

或者，甚至使用`.clone()`.

```
$(".others-involved-div-wrapper-tobe-copied")
.clone()
.toggleClass("others-involved-div-wrapper-tobe-copied others-involved-div-wrapper")
.hide()
.insertAfter(".others-involved-div-wrapper:last")
.slideDown("slow"); 
```

# java - 无法在 Java 中创建数学对象？

> ID：14789512
> 
> 赞同：3
> 
> 时间：2013-02-09T15:17:37.717
> 
> 标签：java

我正在尝试在 Java 中创建数学的对象。理想情况下，不需要创建这样的实例，因为它只有静态方法和参数。我只想创建它，不管它是否允许。因此，当我创建数学类对象时，会显示编译器错误，指出数学类构造函数不可见。

但是我查看了Math类的代码，并没有提供显式构造函数，所以java会提供一个默认的构造函数，可以在外面访问。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T15:19:50.697

这是正确的行为。的[构造函数`Math`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Math.java#Math.%3Cinit%3E%28%29)是`private`因为它只包含`static`实用方法：

```
private Math() {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T15:22:07.420

这是来自 Java[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html)。

```
public final class Math {

    /**
     * Don't let anyone instantiate this class.
     */
    private Math() {}
} 
```

文档注释本身足以回答您的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-09T15:25:53.710

如果你看一下 Math 类的定义，它的构造函数是私有的：

```
private Math() {} 
```

这意味着类的创建者不希望用户能够创建此类的实例。这是有道理的，因为它是一个实用类，这意味着类中的任何方法都不依赖于对象的状态。您只需要传递方法参数值，它就会为您提供预期的结果。这就是为什么 Math 类中的所有方法都是静态的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T15:19:44.287

你不能这样做，因为它的构造函数是私有的。您在 API 中看不到构造函数，因为未列出私有方法。

举个例子：

```
public class SampleClass {

    private static int var1 = 1;
    private static int var2 = 1;
    private static int var3 = 1;

    private SampleClass () {
        // This constructor will prevent the default constructor from being invoked
    }

    public static void runMethod1() {
        System.out.println("Value is:" + var1);
    }

    public static void runMethod2() {
        System.out.println("Value is:" + var2);
    }

    public static void runMethod3() {
        System.out.println("Value is:" + var3);
    }

} 
```

您只能从同一类内部创建此类的实例。如果您尝试从其他地方创建它，您将失败。

# android - 对于 FragmentStatePagerAdapter 创建的 Fragment，Fragment getView() 始终返回 null

> ID：14789519
> 
> 赞同：9
> 
> 时间：2013-02-09T15:18:29.083
> 
> 标签：android, android-layout, android-fragments, fragmentstatepageradapter

我已经阅读了很多关于片段的内容。发现其他人在检索片段视图时遇到问题，因为始终返回 null 但没有答案解决了我的问题。我想做的是创建一个图片库。我有一个包含图像视图的片段。为了显示片段，我使用了 android.support.v4.view.ViewPager。并喂`ViewPager`我使用一个`android.support.v4.app.FragmentStatePagerAdapter`.

问题是，当一切都构建并显示图像时，我想将当前显示的图像保存到磁盘。所以我需要获取当前的片段图像视图，但我不能，因为 fragment.getView() 总是为空，与片段关联的活动也为空，我不知道为什么会这样。这里有一些代码，看看是否有人可以在这里提供帮助：

这是我的片段：

```
public class ImageViewURLFragment extends Fragment 
{
    String _url;

    @Override
    public View onCreateView(LayoutInflater inflater,
            ViewGroup container, Bundle savedInstanceState) 
    {
        // The last two arguments ensure LayoutParams are inflated
        // properly.
        View rootView = new ImageViewURL(getActivity(), _url);

        return rootView;
    }

    public void setImageURL(String imgURL)
    {
        _url=imgURL;
    }
} 
```

这是我的适配器：

```
public class ImageViewURLCustomAdapter extends FragmentStatePagerAdapter 
{
    List<String> _urls=new ArrayList<String>();

    public ImageViewURLCustomAdapter(FragmentManager fm) 
    {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) 
    {
        ImageViewURLFragment fragment = new ImageViewURLFragment();
        fragment.setImageURL(_urls.get(i));

        return fragment;
    }

    public String getItemUrl(int i)
    {
        return _urls.get(i);
    }

    @Override
    public int getCount() {
        return _urls.size();
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return "OBJECT " + (position + 1);
    }

    public void addImageURL(String url)
    {
        _urls.add(url);
    }
} 
```

这是主要活动，请注意带有 get 的评论：

```
public class MainActivity extends FragmentActivity 
{
    ImageViewURLCustomAdapter _iva=null;
    ViewPager _vp=null;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        _iva = new ImageViewURLCustomAdapter(
                        getSupportFragmentManager());
        _iva.addImageURL("http://upload.wikimedia.org/wikipedia/commons/b/b4/Saturn_(planet)_large.jpg");
        _iva.addImageURL("http://planetthreesixty.com/sites/default/files/planet.jpg");

        _vp = (ViewPager) findViewById(R.id.viewpager);
        _vp.setAdapter(_iva);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) 
    {
        if(item.getItemId()==R.id.saveToSD)
        {
            int index= _vp.getCurrentItem();
            Fragment fragment=_iva.getItem(index);

            //THis is where I need to get fragment view, but always returns null
                    View view= fragment.getView();
            ImageView iv=(ImageView)view.findViewWithTag("imageView");
            Bitmap bmp=iv.getDrawingCache();

        }

        return super.onOptionsItemSelected(item);
    }
} 
```

对不起，很长的消息来源，我已经清理了我能做的一切，但我想展示所有的游戏部件。有人能猜到发生了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-09T16:03:05.283

> 所以我需要获取当前的片段图像视图，但我不能，因为 fragment.getView() 总是为空，与片段关联的活动也为空，我不知道为什么会这样。

发生这种情况是因为您期望`_iva.getItem(index);`返回与指定索引对应的页面使用的`Fragment`。`ViewPager`这不会发生，因为`ViewPager`已经调用了该`getItem`方法来获取它需要的片段，并且在您调用该`getItem`方法之后，您将获得一个新`ImageViewURLFragment`实例。这个新实例没有绑定到`Activity`( `getActivity()`returns `null`) 并且它的视图没有被创建。

当您`FragmentStatePagerAdapter`尝试使用下面的代码来获取当前可见的代码时`Fragment`：

```
if (item.getItemId()==R.id.saveToSD) {
     int index = _vp.getCurrentItem();
     Fragment fragment = _vp.getAdapter().instantiateItem(_vp, index);
     //... 
```

# scala - 对象交叉引用和初始化顺序

> ID：14789521
> 
> 赞同：0
> 
> 时间：2013-02-09T15:18:32.787
> 
> 标签：scala, object, initialization, initialization-order

我有以下代码：

```
abstract class SuperClass (cs: Seq[C]) {
  def init {}
}

object A extends SuperClass(Seq(B, C))
object B extends SuperClass(Seq(A, D))
object C extends SuperClass(Seq(A, B))
object D extends SuperClass(Seq(C, B, A))
object E extends SuperClass(Seq(B, A, B))

object Initializer {
  def init {
    A.init
    B.init
    C.init
    D.init
    E.init
  }
} 
```

所以一开始，因为每个对象都有更多的东西要初始化，所以我打电话

```
Initializer.init 
```

然后在程序中的某个时刻，当我使用`cs`对象的参数时，我得到 a`NullPointerException`因为其中引用的对象之一`Seq`确实是`null`（打印到控制台显示）。即对对象的引用`init`比引用它们的其他对象的调用晚`init`，往往被设置为`null`。

这是一个有趣的情况。我在这里有一个所谓的任意交叉引用，我不知道如何正确实现初始化而不将其完全引入外部方法（无论如何这都是封装的分解）。尤其是用户可能被赋予创建他们自己的单例扩展`SuperClass`类的能力。

用尽可能少的样板来做到这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T20:39:17.677

我想出了以下解决方案。[好吧，它是Instantiating immutable pair objects](https://stackoverflow.com/questions/7507965/instantiating-immutable-paired-objects)的一半副本，但是 Seq 定义的依赖关系是一个额外的维度。

```
abstract class SuperClass (cs: => Seq[SuperClass]) {
  SuperClass.collected += this
  def init {}
}
object SuperClass {
  private val collected = ListBuffer[SuperClass]()
  def init = collected.foreach(_.init)
}
object Initializer {
  def init {
    A // access the root object
    SuperClass.init // call init on all automatically created dependent objects
  }
} 
```

# cakephp - cakephp：从插件访问控制器

> ID：14789526
> 
> 赞同：0
> 
> 时间：2013-02-09T15:18:47.670
> 
> 标签：cakephp, cakephp-2.1

我正在使用蛋糕 2.2。我想修改一个 UserMgmt 插件以使用父应用程序中的几个模型和控制器。

我在插件中有一个需要访问“Hotels”控制器和“GetHotels”操作的视图。我的插件视图有：

```
 $this->Js->get('#UserRegionId')->event('change',
  $this->Js->request(array(
     'controller'=>'Hotels',
 'action'=>'GetHotels'
), array(
'update'=>'#UserCategoryId',
'async' => true,
'method' => 'post',
'dataExpression'=>true,
'data'=> $this->Js->serializeForm(array(
            'isForm' => true,
            'inline' => true))
    )
)
); 
```

我怀疑我需要在 UserMgmt.UsersController 的类定义之前添加 app::uses

```
 App::uses('Hotel','Model');
  App::uses('Hotels','Controller'); 
```

但我是它不工作。

我收到错误错误：

```
 Error: [MissingControllerException] Controller class HotelsController could not be found. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:42:09.603

您在视图中的代码没有在内部访问控制器。`$this->Js->request()`正在通过 ajax 调用 url。所以你不需要`App::uses()`.

将控制器/动作设置为小写。url 通常总是小写的（或者至少它们应该是为了理智的缘故！）。

```
'controller'=>'hotels',
'action'=>'get_hotels' 
```

要测试这些是否有效，请自己直接访问路径：

```
http://yourdomain.com/hotels/get_hotels 
```

# xml - XML 不会针对某些 XSD 进行验证

> ID：14789529
> 
> 赞同：1
> 
> 时间：2013-02-09T15:19:03.283
> 
> 标签：xml, xsd, prefix, xml-validation, xml-error

XML（简化）：

```
<?xml version="1.0" encoding="UTF-8"?>
<mx:XMLimport xmlns:mx="http://www.w3.org/2001/XMLSchema" 
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <Leverancier>nn</Leverancier>
    <Bestandsversie>1.1.0.0</Bestandsversie>
</mx:XMLimport> 
```

XSD：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            elementFormDefault="qualified">
    <xsd:element name="XMLimport">
        <xsd:complexType>
            <xsd:sequence>
              <xsd:element name="Leverancier" type="xsd:string" minOccurs="1"/>
              <xsd:element name="Bestandsversie" type="xsd:string" minOccurs="1"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

如果我`mx:`从 XML 的根元素中删除前缀，它验证就好了。我迷失在名称空间中，现在我在互联网上搜索了几个小时。我无法更改 XML，因此必须调整 XSD 以允许`mx:`前缀。验证器给出此错误：

```
ERROR: Element '{http://www.w3.org/2001/XMLSchema}XMLimport':
       No matching global declaration available for the validation root. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:28:58.710

我假设您的问题是 XSD 应该是什么样子才能匹配您的 XML。这是更正后的 XSD：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xsd:schema targetNamespace="http://www.w3.org/2001/XMLSchema" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="XMLimport">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="Leverancier" type="xsd:string"/>
                <xsd:element name="Bestandsversie" type="xsd:string"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>  
</xsd:schema> 
```

您的 XSD 没有定义`targetNamespace`属性。因此，您的**XMLimport**必须在实例文档中显示没有命名空间；这就是为什么当您从XML 文档中的**XMLimport**中删除命名空间时，它变得有效。

如果您添加`targetNamespace="http://www.w3.org/2001/XMLSchema"`，您现在将拥有一个可以验证您的 XML 的 XSD；通常，targetNamespace 的值必须与文档元素的命名空间相匹配（变色龙 XSD 是一种特殊情况）。

这里起作用的另一件事是`elementFormDefault`默认情况下是`unqualified`. 此设置使内部元素`Leverancier`没有`Bestandsversie`命名空间。

另一件需要注意的事情是，虽然用户定义的内容以`http://www.w3.org/2001/XMLSchema`命名空间为目标是非常不寻常的，但 XSD 1.0 规范中没有明确禁止用户以该命名空间为目标的规定。这与您在示例 XML 中看到的其他命名空间不同`http://www.w3.org/2001/XMLSchema-instance`：明确禁止在用户定义的 XSD 中定位此命名空间。

[这篇 SO 帖子](https://stackoverflow.com/questions/7190572/targetnamespace-and-xmlns-without-prefix-what-is-the-difference/7200002#7200002)也可能会有所帮助。

# ruby-on-rails - 未定义的方法link_to_remote错误Rails

> ID：14789542
> 
> 赞同：0
> 
> 时间：2013-02-09T15:20:09.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我做了一个 link_to_remote 但这是错误：

```
NoMethodError in Tasks#index

Showing /Users/overallduka/youimports_app/app/views/tasks/index.html.erb where line #6 raised:

undefined method `link_to_remote' for #<#<Class:0x1022c76f0>:0x10216ff00>
Extracted source (around line #6):

3: <div id="all_tasks">
4: <% @tasks.each do |task| %>
5: &nbsp;<%= task.title %><br />
6: <p class="about_task"><%= link_to_remote task.status,"alert('aaa')" %> <%= task.about %></p>
7: <% end %>
8: </div> 
```

我不知道出了什么问题，我制作了一个样本警报进行测试，但错误仍然存​​在，我不知道我认为有什么问题是：

任务中的 NoMethodError#index

显示 /Users/overallduka/youimports_app/app/views/tasks/index.html.erb 其中第 6 行提出：

#<#:0x10216ff00> 的未定义方法 `link_to_remote' 提取的源代码（第 6 行附近）：

```
<% @tasks.each do |task| %>
&nbsp;<%= task.title %><br />
<p class="about_task"><%= link_to_remote (status(task.status)),"alert('aaa')" %> <%= task.about %></p>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:29:26.067

`link_to_remote`和其他远程 ajax 助手已在 rails 3 中删除并移至 gem `https://github.com/rails/prototype_legacy_helper`。如果您只是在单击链接后尝试运行简单的 js，请`link_to_function`改用

```
link_to_function 'test_alert', 'alert("test")' 
```

# listview - kendoui：显示外键值而不是 ID

> ID：14789545
> 
> 赞同：0
> 
> 时间：2013-02-09T15:20:26.623
> 
> 标签：listview, foreign-keys, kendo-ui

我有一个 kendo ui listView 并且在编辑模式下我使用下拉列表来处理我的外键，这些在显示外键值而不是 ID 时工作正常，但是在首先加载的正常视图模式下显示外键 ID 而不是价值。

我只是想知道当想要显示外键值时最佳做法是什么。我尝试通过在数据源读取调用中使用“INNER JOIN”语句来解决 SQL 级别的问题，但这会在执行和更新/创建时导致字段冲突，因为原始表中不存在外键值字段。

这是我的贷方下拉代码

```
var dsLenders = new kendo.data.DataSource({
transport: {
read: {
          url: "../data/lenders/",
          dataType: "jsonp"
      },
      parameterMap: function(options, operation) {
          if (operation === "read") {
              return options;
          }
      }
    }
}); 
```

这是列表视图的代码

```
var claimListView = $("#formClaim").kendoListView({
      dataSource: remoteDataSource,
      template: kendo.template($("#viewTemplate").html()),
      editTemplate: kendo.template($("#formTemplate").html()),
      dataBound: function(e) {
          this.edit(this.element.children().first());
     }
  }).data("kendoListView"); 
```

这是我在editTemplate中的下拉列表，它加载了工作正常的贷方列表

```
<input name="idldr_clm" data-bind="value:idldr_clm" data-value-field="id_ldr" data-text-field="name_ldr" data-option-label="Select" data-source="dsLenders" data-role="dropdownlist" /> 
```

现在在这里我在普通视图模板视图中使用什么来显示贷方。但它显示的是 ID 而不是贷方名称。我希望它拉出贷方的名字。

```
<input value="#= idldr_clm #" class="k-input k-textbox" readonly /> 
```

# bundling-and-minification - 为 UglifyJS2 指定仅空白选项

> ID：14789546
> 
> 赞同：3
> 
> 时间：2013-02-09T15:20:29.307
> 
> 标签：bundling-and-minification, uglifyjs, gruntjs, uglifyjs2

我正在尝试使用 grunt 在使用 UglifyJS2 的项目中缩小 javascript 文件。

UglifyJS2 是否有任何选项，例如 WHITESPACE_ONLY（存在于 Closure Compiler 中）？

为了达到这种效果，我必须在 GruntFile.js 中的选项节点中传递哪些值？

```
uglify: {
        options: {
            mangle: { toplevel: false },
            squeeze: { dead_code: false }
        },
        'dist': {
            src: '**/*.js',
            dest: '**/*.js'
        }
    } 
```

# ios - 将数据 SQlite 加载到 htmlString iOS

> ID：14789550
> 
> 赞同：1
> 
> 时间：2013-02-09T15:20:51.443
> 
> 标签：ios, objective-c, xcode, sqlite

我有一个从 sqlite 数据库读取的应用程序，使用此方法读取数据并将其包含在对象中......我检查了 NSLog

```
#import "ViewController1.h"
#import "Ricetta.h"
#import "AppDelegate.h"

static sqlite3_stmt *leggiStatement = nil;

@interface ViewController1 ()

@end

@implementation ViewController1

@synthesize Webmain, oggetto2;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization

    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    //percorso file su cartella documents
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    NSString *path = [documentsDir stringByAppendingPathComponent:@"Rice.sqlite"];

    //controllo se il file esiste
    if(![[NSFileManager defaultManager] fileExistsAtPath:path])
    {
        //se non esiste lo copio nella cartella documenti
        NSString *pathLocale=[[NSBundle mainBundle] pathForResource:@"Rice" ofType:@"sqlite"];
        if ([[NSFileManager defaultManager] copyItemAtPath:pathLocale toPath:path error:nil] == YES)
        {
            NSLog(@"copia eseguita");
        }       
    }

    [self personalizzaAspetto];

    [self carica_ID];

   // NSString * query = @" SELECT Immagine, Titolo, Descrizione FROM LIBRO";
   // NSArray * arrayQuery = [[NSArray alloc] initWithObjects:@"Immagine",@"Titolo",@"Descrizione",nil];
   // NSArray * arrayElementi = [self caricaValoriMain:query :arrayQuery];

        Webmain= [[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 320, 365)];
        NSString *htmlString =[NSString stringWithFormat:@"<html> \n"
                               "<head> \n"
                               "<style type=\"text/css\"> \n"
                               "body {font-family: \"%@\"; font-size: %@;}\n"
                               "</style> \n"
                               "</head> \n"
                               "<body><center><img src='%@'/></center></body><center><h1>%@</h1></center><body bgcolor=\"#FFFFFF\" text=\" #ffa500\">%@</body></html>" ,@"futura",[NSNumber numberWithInt:15],oggetto2.Immagine,oggetto2.Titolo,oggetto2.Descrizione];

        [Webmain loadHTMLString:htmlString baseURL:nil];

        [self.view addSubview:Webmain];

-(void)carica_ID{

      sqlite3 *database = NULL;

      NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
      NSString *documentsDir = [documentPaths objectAtIndex:0];
      NSString *dbPath = [documentsDir stringByAppendingPathComponent:@"Rice.sqlite"];

    if(sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK)
    {
        if(leggiStatement==nil){
        const char *sql = "select Immagine,Titolo,Descrizione from LIBRO WHERE RicettaID=1";

        if(sqlite3_prepare_v2(database, sql, -1, &leggiStatement, NULL) != SQLITE_OK)
           NSAssert1(0, @"Errore creazione compiledState '%s'", sqlite3_errmsg(database));

            }

            //while(sqlite3_step(leggiStatement) == SQLITE_ROW)
            if(SQLITE_DONE != sqlite3_step(leggiStatement))
            {

                NSString *titolo = [[NSString alloc] initWithUTF8String:(char *)sqlite3_column_text(leggiStatement, 1)];
                NSLog(@"%@",titolo);
                oggetto2.Titolo=titolo;

                NSString *descrizione = [[NSString alloc] initWithUTF8String:(char *)sqlite3_column_text(leggiStatement, 2)];
                NSLog(@"%@",descrizione);
                oggetto2.Descrizione = descrizione;

                NSString *image= [[NSString alloc]initWithUTF8String:(char *)sqlite3_column_text(leggiStatement, 0)];
                NSLog(@"%@",image);
                oggetto2.Immagine= image;

        }

        sqlite3_finalize(leggiStatement);
    }

 sqlite3_close(database);

}

@end 
```

我的问题是我不能把它们放在 webMain ... webMain 中的对象仍然是空的。

我不使用Xib。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T22:06:02.430

在提供的代码片段中，您永远不会执行`alloc`and `init`of `oggetto2`。因此，它是`nil`，因此尝试设置其属性将一事无成。

除了您现有的`NSLog`陈述之外，我还建议您在执行之前做一些正确`NSLog`的事情，因为通过查看源代码可以更轻松地了解您的 HTML 发生了什么，而不是尝试从空白的 Web 视图中进行推断。`htmlString``loadHTMLString`

* * *

与您的问题无关，但您可能不应该有可能`sqlite3_stmt`在您完成静态后重用的代码。第一次调用时，`carica_ID`您将初始化 static `leggiStatement`。但你最终做了一个`sqlite_finalize`但不设置`leggiStatement`为`nil`. 如果您曾经第二次调用此方法，它不会`sqlite3_prepare_v2`再次调用，但您将释放与您之前的`leggiStatement`.

几个简单的修复：

*   不要使`leggiStatement`静态全局变量，而是使其成为方法的局部非静态变量；

*   如果你这样做`sqlite3_finalize`，请确保你也设置`leggiStatement`为`nil`；或者

*   不要调用`sqlite3_finalize`，而只是调用`sqlite3_reset`，这将重置准备好的语句，但不会释放其资源。

# android - 同一 Activity 中每个 Spinner 项目的不同内容

> ID：14789552
> 
> 赞同：0
> 
> 时间：2013-02-09T15:20:59.800
> 
> 标签：android, android-activity, spinner

从 中选择项目后如何显示不同的内容`Spinner`？我想创建一个`Spinner`连锁店的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:11:22.943

> 我希望微调器始终在顶部。唯一改变的是微调器下的内容

在您的活动中创建一个简单的方法来刷新下面的布局`Spinner`（将保持不变）。该方法将从`OnItemSelectedListener`. `Spinner`它会是这样的：

```
private void changeAdress(int newSelectedAdress) {
    // The ImageView and the TextView will be already in the layout
    ImageView map = (ImageView) findViewById(R.id.theIdOfTheImage);
    // Set the image. You know the current address selected by the user
    // (the newSelectedAddress int) so get it from the array/list/database
    // where you stored it
    // also set the image
} 
```

`onItemSelected`从回调中调用上述方法：

```
yourSpinnerRefference.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View view,
                int position, long id) {
                          changeAddress(position);              
        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {

        }
    }); 
```

如果这不是您想要的，请解释。

编辑：制作两个数组来保存您的数据：

```
int[] images = {R.drawable.imag1, R.drawable.imag2 ..etc...};
//also for the text
String[] text = {"text1", "text2 ...etc...}; 
```

然后按照我上面推荐的方法使用这两个数组：

```
private void changeAdress(int newSelectedAddress) {
     ((ImageView)findViewById(R.id.mapView1)).setImageResource(images[newSelectedAddress]); 
     // assing an id to the TextView in your layout and do the same as above.
} 
```

不需要多个`ImageView`and `TextViews`。

# c# - C# 中的 XML 解析器错误

> ID：14789566
> 
> 赞同：0
> 
> 时间：2013-02-09T15:23:39.217
> 
> 标签：c#, xml, xml-parsing

我正在尝试创建一个函数来解析这样的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<list name="Grocery List" author="Ian" desc="Saturday grocery list">

        <item color="black" done="false">Milk</item>
        <item color="black" done="false">Eggs</item>
        <item color="blue" done="false">Water</item>

</list> 
```

它正确解析属性，但无法返回列表项的值。这是它使用的函数和类：

```
class List
{
    public string[] listItems;
    public string[] colorArray;
    public string[] doneArray;
    public string listName;
    public string listAuthor;
    public string listDesc;
    public string err;       
} 
```

读者定义：

```
class ListReader
{
    public List doListParse(string filename)
    {
         List l = new List();

         int arrayCount = 0;

         try
         {
             XmlReader r = XmlReader.Create(filename);

             while (r.Read())
             {
                 if (r.NodeType == XmlNodeType.Element && r.Name == "list")
                 {
                     //Get the attributes of the list
                     l.listName = r.GetAttribute("name");
                     l.listAuthor = r.GetAttribute("author");
                     l.listDesc = r.GetAttribute("desc");

                     while (r.NodeType != XmlNodeType.EndElement)
                     {
                         r.Read();
                         if (r.Name == "item")
                         {
                             r.Read();
                             if (r.NodeType == XmlNodeType.Text)
                             {
                                 //Get The Attributes
                                 l.colorArray[arrayCount] = r.GetAttribute("color");
                                 l.doneArray[arrayCount] = r.GetAttribute("done");

                                 //Get The Content
                                 l.listItems[arrayCount] = r.Value.ToString();

                                 arrayCount++;
                             }
                             r.Read();
                         }
                     }
                 }
             }
         }
         catch (Exception e)
         {
             l.err = e.ToString();
         }

         return l;
    }
} 
```

当我执行程序时，它给出了这个异常：

System.NullReferenceException：对象引用未设置为对象的实例。

这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T15:32:17.903

我建议您使用序列化程序。[`XmlSerializer`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)班级还算不错。它将简化您的代码。

因此，首先定义将映射到此 XML 结构的模型：

```
[XmlRoot("list")]
public class GroceryList
{
    [XmlAttribute("name")]
    public string Name { get; set; }

    [XmlAttribute("author")]
    public string Author { get; set; }

    [XmlAttribute("desc")]
    public string Description { get; set; }

    [XmlElement("item")]
    public Item[] Items { get; set; }
}

public class Item
{
    [XmlAttribute("color")]
    public string Color { get; set; }

    [XmlAttribute("done")]
    public bool Done { get; set; }

    [XmlText]
    public string Value { get; set; }
} 
```

然后简单地反序列化 XML：

```
class Program
{
    static void Main()
    {
        var serializer = new XmlSerializer(typeof(GroceryList));
        using (var reader = XmlReader.Create("groceriesList.xml"))
        {
            var list = (GroceryList)serializer.Deserialize(reader);
            // you could access the list items here
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:42:03.943

您可以使用 Linq To Xml。

```
var xElem = XDocument.Parse(xml).Element("list"); //or XDocument.Load(filename)
var list = new
            {
                Name = xElem.Attribute("name").Value,
                Author = xElem.Attribute("author").Value,
                Desc = xElem.Attribute("desc").Value,
                Items = xElem.Elements("item")
                            .Select(e => new{
                                Color = e.Attribute("color").Value,
                                Done = (bool)e.Attribute("done"),
                                Value = e.Value,
                            })
                            .ToList()
            }; 
```

# actionscript-3 - flash.filesystem.FileStream 中的数据损坏错误或开发人员错误？

> ID：14789568
> 
> 赞同：1
> 
> 时间：2013-02-09T15:23:43.880
> 
> 标签：actionscript-3, air

我正在实现一些由文件支持的数据结构，并使用随机读写访问来更新结构。

并且偶然发现了一个坏错误或我的代码不正确。

经过数小时的检查和调试，它归结为以下片段，它隔离了错误？行为。

在循环内部，我应该在位置 0 处写入、读取和覆盖字节。您会期望，在代码运行后，最终会得到一个包含 1 字节的文件`0x39`。相反，文件增长，写入不是在位置 0 而是在 EOF 发生。多次运行代码将导致文件越来越大。

如果您注释掉该行`fs.readByte();`，则代码将按预期运行。

```
import flash.filesystem.File;
import flash.filesystem.FileStream;
import flash.filesystem.FileMode;

var tf:File=File.userDirectory.resolvePath("test.txt");
var fs:FileStream=new FileStream();

fs.open(tf,FileMode.UPDATE);

for (var i=0;i<10;i++){
   fs.position=0;
   fs.writeByte(0x30+i);
   fs.position=0;
   fs.readByte(); //if you comment this line out, results are as expected
}

fs.close();
trace(tf.size); 
```

请，如果有人对此进行测试并得出与我相同的结论，即这是一个错误，请在 adobe 的错误库中对此错误进行投票，以便他们考虑修复它。

[在 ADOBE 的错误库中投票错误](https://bugbase.adobe.com/index.cfm?event=bug&id=3498173 "错误 3498173")！

否则，如果有人能告诉我我做错了什么，我将不胜感激。

TX狮子座

编辑：一些澄清

```
//Alright, since the loop example caused some confusion about whether or not
//there would be use for such code I'll try with another snippet, that is hopefully
//closer to some real application.
//
//The code updates some bytes in the file 
//and afterwards reads some bytes somewhere else in the file, eg. a header field.
//This time not in a loop but triggered by a timer, which could of course also
//be some event handler.
//
//I hope this makes the problem more apparent

import flash.utils.ByteArray;
import flash.filesystem.File;
import flash.filesystem.FileStream;
import flash.filesystem.FileMode;   

var tf=File.userDirectory.resolvePath("test.txt");
var fs:FileStream=new FileStream();
var timerID:int;
var count:int=0;

var fileAction:Function=function(){
    var dataToWrite:ByteArray=new ByteArray();
    var dataToRead:ByteArray=new ByteArray();

    dataToWrite[0]=0x31;
    dataToWrite[1]=0x32;

    fs.position=2;
    fs.writeBytes(dataToWrite);
    fs.position=0;
    fs.readBytes(dataToRead,0,2);  //this read will corrupt the previous write!!!
                                   //instead updating two bytes at 0x02 
                                   //it will write to the end of file,
                                   //appending two bytes
    count++;
    if (count>10) {
        clearInterval(timerID);
        fs.close();
        trace("Excpected file size: 4")
        trace("Actual size: "+tf.size);

    }

}

fs.open(tf,FileMode.UPDATE);
fs.position=0;
fs.writeByte(0x30);
fs.writeByte(0x30);

timerID=setInterval(fileAction,100); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T21:30:26.583

虽然我同意您的期望是基于文档建立的，但我不确定读取刚刚编写的内容有什么用，尤其是在`FileStream`对象的循环中，因为它对性能造成了不必要的影响。你能提供一个用例吗？

API 中可能存在未记录的限制`FileStream`，以避免过度减速或阻碍同步或异步处理。

如果您必须在循环中写入一个字节后读取它，您可以使用一个`ByteArray`对象来执行此操作，然后该对象将被写入一次`FileStream`

```
package 
{
    //Imports
    import flash.display.Sprite;
    import flash.filesystem.File;
    import flash.filesystem.FileStream;
    import flash.filesystem.FileMode;
    import flash.utils.ByteArray;

    //Class
    public class Main extends Sprite 
    {
        //Constructor
        public function Main():void 
        {
            var ba:ByteArray = new ByteArray();

            for (var i:uint = 0; i < 10; i++)
            {
               ba.position = 0;
               ba.writeByte(0x30 + i);
               ba.position = 0;
               ba.readByte();
            }

            var fs:FileStream = new FileStream();
            var tf:File = File.desktopDirectory.resolvePath("test.txt");

            fs.open(tf, FileMode.UPDATE);
            fs.writeBytes(ba);
            fs.close();

            trace(tf.size);
        }
    }
} 
```

# arduino - Arduino计算频率 - 我在这里做错了什么？

> ID：14789574
> 
> 赞同：5
> 
> 时间：2013-02-09T15:24:03.953
> 
> 标签：arduino

在电子产品和 Arduino 方面，我是新手——所以最好的方法就是玩弄它，对吧？

我已经开始了一个利用 LDR（光密度电阻器）的小项目，并想用它来计算光束被阻挡或关闭的频率。

出于调试目的，我设置了一个以定义频率（5 Hz 等）闪烁的小 LED，并使用 LCD 显示输出。

![展示](../Images/3280e83df6933f0a8bebef9385cada8b.png)

我的右上角有问题......它似乎执行错误。它的目的是显示注册的频率，但在调试时我已将其设置为以 5 秒（5,000 毫秒）的间隔显示计数。但无论我设置什么频率，它似乎都是最大值（当我让它显示正确的数字 [5 sec x 5 Hz = 25] 我将除以时间间隔并以 Hz 为单位得到结果）。它还显示 24.0 for 9 Hz 等。

我也有这个：[YouTube 视频](http://www.youtube.com/watch?v=oRT8ssRL02U)

...但一开始的一些摸索导致 LED 移动了一点，所以它计数错误。但最终它“有效”..但 24.0 保持不变

这是我的代码：

```
#include <LiquidCrystal.h>

LiquidCrystal lcd(7, 8, 9, 10, 11 , 12);
int booBlocked = 0;
int counter = 0;
int checkValue = counter + 1;

int ledPin = 3;                // LED connected to digital pin 3
int value = LOW;                // previous value of the LED
long previousMillis = 0;        // will store last time LED was updated
long freqency = 5; // Hz (1/sec)
long thousand = 1000;
long interval = thousand / freqency; // milliseconds
//long interval = 59;           // interval at which to blink (milliseconds)

int tValue = 0; // Threshold value used for counting (are calibrated in the beginning)
long pMillis = 0;
long inter = 5000;
int pCount = 0;
float freq = 0;  // Calculated blink frequency...

void setup() { 
  lcd.begin(16, 2);
  lcd.setCursor(0,1);  lcd.print(interval);
  lcd.setCursor(4,1);  lcd.print("ms");

  pinMode(ledPin, OUTPUT);      // sets the digital pin as output 

  lcd.setCursor(0,0);  lcd.print(freqency);
  lcd.setCursor(4,0);  lcd.print("Hz");
}

void loop() {
  // Print LDR sensor value to the display  
  int sensorValue = analogRead(A0);
  lcd.setCursor(7,1);
  lcd.print(sensorValue);
  delay(100);

  if (millis() > 5000){
    doCount(sensorValue);
    updateFreq();
    lcd.setCursor(7+5,0);
    lcd.print(freq);
  } else {
    setThresholdValue(sensorValue);
    lcd.setCursor(7+5,1);
    lcd.print(tValue);
  }

 // LED BLINK
  if (millis() - previousMillis > interval) {
    previousMillis = millis();   // remember the last time we blinked the LED
    // if the LED is off turn it on and vice-versa.
    if (value == LOW)
      value = HIGH;
    else
      value = LOW;
    digitalWrite(ledPin, value);
  }    
}

void updateFreq(){
 long now = millis();
 long t = now - pMillis;
 if (t >= 10000) {
   freq = (float) (counter - pCount);
   //freq = ((float) (counter - pCount)) / (float) 10.0;
   pMillis = now;   // remember the last time we blinked the LED
   pCount = counter;
  } 
}

void setThresholdValue(int sensorValue){
  if (sensorValue > int(tValue/0.90)){
    tValue = int (sensorValue*0.90);
  }
}

void doCount(int sensorValue){
    // Count stuff
  if (sensorValue < tValue){
    booBlocked = 1;
    //lcd.setCursor(0,0);
    //lcd.print("Blocked");
  } else {
    booBlocked = 0;
    //lcd.setCursor(0,0);
    //lcd.print("       ");    
  }

  if (booBlocked == 1) {
   if (counter != checkValue){
    counter = counter + 1;
    lcd.setCursor(7,0);
    lcd.print(counter);
   }   
  } else {
   if (counter == checkValue){
    checkValue = checkValue + 1;
     }
   }
} 
```

## 更新

更“干净”的代码（请参阅我自己的答案）

```
#include <LiquidCrystal.h>
// Initiate the LCD display
LiquidCrystal lcd(7, 8, 9, 10, 11 , 12); // see setup at http://lassenorfeldt.weebly.com/1/post/2013/02/ardunio-lcd.html
long updateInterval = 150;                // ms
long updateTime = 0;

// Declare the pins
int ledPin = 3;                       // LED connected to digital pin 3

// LED setup
int value = LOW;                      // previous value of the LED
long previousMillis = 0;              // will store last time LED was updated 
long freqency = 16;                   // Hz (1/sec)
long thousand = 1000;
long blinkInterval = thousand / freqency;  // milliseconds

//// LDR counter variables ////
// Counting vars
static int counter = 0;
int booBlocked = 0;
int checkValue = counter + 1;
// Calibration vars
long onBootCalibrationTime = 5000;     // time [time] to use for calibration when the system is booted
static int threshold = 0;              // Value used for counting (calibrated in the beginning)
float cutValue = 0.90;                 // Procent value used to allow jitting in the max signal without counting.

// Frequency vars
float freq = 0;                        // Calculated blink frequency...
long frequencyInterval = 5000;        // time [ms] 
long pMillis = 0;
int pCount = 0;

void setup() {
  // Setup the pins
  pinMode(ledPin, OUTPUT);      // sets the digital pin as output 

  // display static values
  lcd.begin(16, 2);
  lcd.setCursor(0,0);  lcd.print(freqency);
  lcd.setCursor(4,0);  lcd.print("Hz");
  lcd.setCursor(0,1);  lcd.print(blinkInterval);
  lcd.setCursor(4,1);  lcd.print("ms");

  // Setup that allows loggin
  Serial.begin(9600);  // Allows to get a readout from Putty (windows 7)
}

void loop() {  
  long time = millis();
  int sensorValue = analogRead(A0);

  // Blink the LED
  blinkLED(time);

  // Calibrate or Count (AND calculate the frequency) via the LDR
  if (time < onBootCalibrationTime){
    setThresholdValue(sensorValue);
  } else {    
    doCount(sensorValue);
    updateFreq(time);
  }

  // Update the LCD
  if (time > updateTime){
    updateTime += updateInterval;  // set the next time to update the LCD

   // Display the sensor value
    lcd.setCursor(7,1);  lcd.print(sensorValue);
   // Display the threshold value used to determined if blocked or not
    lcd.setCursor(7+5,1);  lcd.print(threshold);
   // Display the count
    lcd.setCursor(7,0);
    lcd.print(counter);
   // Display the calculated frequency
    lcd.setCursor(7+5,0);  lcd.print(freq);   
  }  
}

void blinkLED(long t){
  if (t - previousMillis > blinkInterval) {
    previousMillis = t;   // remember the last time we blinked the LED
    // if the LED is off turn it on and vice-versa.
    if (value == LOW)
      value = HIGH;
    else
      value = LOW;
    digitalWrite(ledPin, value);
  }
}

void setThresholdValue(int sValue){
  if (sValue > int(threshold/cutValue)){
    threshold = int (sValue*cutValue);
  }
}

void doCount(int sValue){
  if (sValue < threshold){
    booBlocked = 1;
  } else {
    booBlocked = 0;  
  }

  if (booBlocked == 1) {
   if (counter != checkValue){
    counter = counter + 1;
   }   
  } else {
   if (counter == checkValue){
    checkValue = checkValue + 1;
     }
   }
}

void updateFreq(long t){
 long inter = t - pMillis;
 if (inter >= frequencyInterval) {
   freq = (counter - pCount) / (float) (inter/1000);
   pMillis = t;           // remember the last time we blinked the LED
   pCount = counter;
  } 
} 
```

这段代码不能解决我的问题，但更容易阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:48:01.247

您的计划的问题是光密度电阻器会吸收周围的所有环境光，因此对环境完全敏感。

还有其他项目希望吗？这似乎是一种工程学习体验，而不是编码体验。

你有没有想过汽车项目？就我个人而言，我更喜欢家庭自动化，但电机项目几乎是立竿见影的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:24:13.370

我建议`doCount()`按照这些思路重新编写您的函数，以使事情更简单，更容易掌握：

```
void doCount(int sensorValue){

  static int previousState;
  int currentState;

  if ( previousState == 0 ) {
      currentState = sensorValue > upperThreshold;
  } else {
      currentState = sensorValue > lowerThreshold;
  }

  if ( previousState != 0 ) {
      if ( currentState == 0 ) {
          counter++;
      }
  }

  previousState = currentState;

} 
```

例如，让`lowerThreshold`和`upperThreshold`分别为前一个 的 90% 和 110%，`tValue`并且您有一个滞后来平滑对嘈杂 ADC 读数的反应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T15:58:39.617

我想我发现了其中一个错误..我使用的`delay()`是引起了一些麻烦的..

我清理了代码：

```
#include <LiquidCrystal.h>
// Initiate the LCD display
LiquidCrystal lcd(7, 8, 9, 10, 11 , 12); // see setup at http://lassenorfeldt.weebly.com/1/post/2013/02/ardunio-lcd.html
long updateInterval = 150;                // ms
long updateTime = 0;

// Declare the pins
int ledPin = 3;                       // LED connected to digital pin 3

// LED setup
int value = LOW;                      // previous value of the LED
long previousMillis = 0;              // will store last time LED was updated 
long freqency = 16;                   // Hz (1/sec)
long thousand = 1000;
long blinkInterval = thousand / freqency;  // milliseconds

//// LDR counter variables ////
// Counting vars
static int counter = 0;
int booBlocked = 0;
int checkValue = counter + 1;
// Calibration vars
long onBootCalibrationTime = 5000;     // time [time] to use for calibration when the system is booted
static int threshold = 0;              // Value used for counting (calibrated in the beginning)
float cutValue = 0.90;                 // Procent value used to allow jitting in the max signal without counting.

// Frequency vars
float freq = 0;                        // Calculated blink frequency...
long frequencyInterval = 5000;        // time [ms] 
long pMillis = 0;
int pCount = 0;

void setup() {
  // Setup the pins
  pinMode(ledPin, OUTPUT);      // sets the digital pin as output 

  // display static values
  lcd.begin(16, 2);
  lcd.setCursor(0,0);  lcd.print(freqency);
  lcd.setCursor(4,0);  lcd.print("Hz");
  lcd.setCursor(0,1);  lcd.print(blinkInterval);
  lcd.setCursor(4,1);  lcd.print("ms");

  // Setup that allows loggin
  Serial.begin(9600);  // Allows to get a readout from Putty (windows 7)
}

void loop() {  
  long time = millis();
  int sensorValue = analogRead(A0);

  // Blink the LED
  blinkLED(time);

  // Calibrate or Count (AND calculate the frequency) via the LDR
  if (time < onBootCalibrationTime){
    setThresholdValue(sensorValue);
  } else {    
    doCount(sensorValue);
    updateFreq(time);
  }

  // Update the LCD
  if (time > updateTime){
    updateTime += updateInterval;  // set the next time to update the LCD

   // Display the sensor value
    lcd.setCursor(7,1);  lcd.print(sensorValue);
   // Display the threshold value used to determined if blocked or not
    lcd.setCursor(7+5,1);  lcd.print(threshold);
   // Display the count
    lcd.setCursor(7,0);
    lcd.print(counter);
   // Display the calculated frequency
    lcd.setCursor(7+5,0);  lcd.print(freq);   
  }  
}

void blinkLED(long t){
  if (t - previousMillis > blinkInterval) {
    previousMillis = t;   // remember the last time we blinked the LED
    // if the LED is off turn it on and vice-versa.
    if (value == LOW)
      value = HIGH;
    else
      value = LOW;
    digitalWrite(ledPin, value);
  }
}

void setThresholdValue(int sValue){
  if (sValue > int(threshold/cutValue)){
    threshold = int (sValue*cutValue);
  }
}

void doCount(int sValue){
  if (sValue < threshold){
    booBlocked = 1;
  } else {
    booBlocked = 0;  
  }

  if (booBlocked == 1) {
   if (counter != checkValue){
    counter = counter + 1;
   }   
  } else {
   if (counter == checkValue){
    checkValue = checkValue + 1;
     }
   }
}

void updateFreq(long t){
 long inter = t - pMillis;
 if (inter >= frequencyInterval) {
   freq = (counter - pCount) / (float) (inter/1000);
   pMillis = t;           // remember the last time we blinked the LED
   pCount = counter;
  } 
} 
```

它没有我希望的那么精确。但我相信这可能是由于我闪烁 LED 的方式。

我还发现`float cutValue = 0.90;`有影响...将条降低到 0.85 会降低计算频率.. ??

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T10:32:27.680

在 Albert 非常好心地帮助我使用他很棒的 [FreqPeriodCounter 库之后，我完全更改了代码](http://www.avdweb.nl/arduino/hardware-interfacing/frequency-period-counter.html)

我还加了一个电位器来控制频率

这是我的代码：

```
#include <FreqPeriodCounter.h>
#include <LiquidCrystal.h>

// FrequencyCounter vars
const byte counterPin = 3;  // Pin connected to the LDR
const byte counterInterrupt = 1; // = pin 3
FreqPeriodCounter counter(counterPin, micros, 0);

// LCD vars
LiquidCrystal lcd(7, 8, 9, 10, 11 , 12); // see setup at http://lassenorfeldt.weebly.com/1/post/2013/02/ardunio-lcd.html
long updateInterval = 200;                // ms
long updateTime = 0;

// LED vars
int ledPin = 5;                       // LED connected to digital pin 3
int value = LOW;                      // previous value of the LED
float previousMillis = 0;              // will store last time LED was updated 
static float freqency;                   // Hz (1/sec)
static float pfreqency;
static float blinkInterval;  // milliseconds

boolean logging = true;              // Logging by sending to serial

// Use potentiometer to control LED frequency
int potPin = 5;    // select the input pin for the potentiometer
int val = 0;       // variable to store the value coming from the sensor

void setup(void){ 
  // Setup the pins
  pinMode(ledPin, OUTPUT);      // sets the digital pin as output 

  val = analogRead(potPin);
  freqency = map(val, 0, 1023, 0, 25);                   // Hz (1/sec)
  pfreqency = freqency;
  blinkInterval = 1000 / (freqency*2);                  // milliseconds

  // LCD display static values
  lcd.begin(16, 2);
  lcd.setCursor(0,0);  lcd.print(freqency);
  lcd.setCursor(4,0);  lcd.print("Hz");
  lcd.setCursor(14,0);  lcd.print("Hz");
  lcd.setCursor(0,1);  lcd.print(blinkInterval);
  lcd.setCursor(4,1);  lcd.print("ms");

  //   
  attachInterrupt(counterInterrupt, counterISR, CHANGE);

  // Logging
  if (logging) {Serial.begin(9600);}
}

void loop(void){ 
  // Loop vars
  float time = (float) millis();
  float freq = (float) counter.hertz(10)/10.0;

  // Blink the LED
  blinkLED(time);

  if (logging) {
    if(counter.ready()) Serial.println(counter.hertz(100));
  }

  // Update the LCD
  if (time > updateTime){
    updateTime += updateInterval;  // set the next time to update the LCD
    lcdNicePrint(7+3, 0, freq); lcd.setCursor(14,0);  lcd.print("Hz"); 
    val = analogRead(potPin);
    freqency = map(val, 0, 1023, 1, 30);

    if (freqency != pfreqency){
      pfreqency = freqency;      
      blinkInterval = 1000 / (freqency*2);                  // milliseconds

      lcdNicePrint(0,0, freqency);  lcd.setCursor(4,0);  lcd.print("Hz");
      lcd.setCursor(0,1);  lcd.print(blinkInterval);
      lcd.setCursor(4,1);  lcd.print("ms");
    }
  }
}

void lcdNicePrint(int column, int row, float value){
  lcd.setCursor(column, row);  lcd.print("00");
  if (value < 10) {lcd.setCursor(column+1, row);  lcd.print(value);}
  else {lcd.setCursor(column, row);  lcd.print(value);}
}  

void blinkLED(long t){

  if (t - previousMillis > blinkInterval) {
    previousMillis = t;   // remember the last time we blinked the LED
    // if the LED is off turn it on and vice-versa.
    if (value == LOW)
      value = HIGH;
    else
      value = LOW;
    digitalWrite(ledPin, value);
  }
}

void counterISR()
{ counter.poll();
} 
```

# java - Spring cacheManager 不是单例的？

> ID：14789576
> 
> 赞同：0
> 
> 时间：2013-02-09T15:24:26.390
> 
> 标签：java, spring, inversion-of-control

我对 spring AnnotationConfigApplicationContext 有一些问题。

主要目的是创建一个可以在应用程序服务器上运行或独立运行的 Spring 配置。子任务从这个创建子上下文，这将由同一 AppServer 上的另一个应用程序使用。但是cacheManager有点麻烦。

那是我的代码：又名 AbstractConfig

```
package org.zib.test.a;

import org.springframework.cache.CacheManager;
import org.springframework.cache.annotation.EnableCaching;
import org.springframework.cache.concurrent.ConcurrentMapCache;
import org.springframework.cache.support.SimpleCacheManager;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import java.util.Arrays;

@Configuration
@EnableCaching
public class ConfigA {

    @SuppressWarnings("UnusedDeclaration")
    public static ApplicationContext getContext() {
        return ContextA.getInstance().getContext();
    }

/**
 * use {@link org.zib.test.b.ContextB}
 */
public static <T> T getBean(Class<T> bean) {
    return ContextB.getInstance().getContext().getBean(bean);
}
/**
 * use {@link ContextB}
 */
public static <T> T getBean(String name, Class<T> bean) {
    return ContextB.getInstance().getContext().getBean(name, bean);
}

    @Bean(name = "cacheManager")
    public CacheManager cacheManager() {
        // configure and return an implementation of Spring's CacheManager SPI
        SimpleCacheManager cacheManager = new SimpleCacheManager();
        cacheManager.setCaches(Arrays.asList(new ConcurrentMapCache("default")));
        return cacheManager;
     }

 } 
```

又名 AbstractContext

```
package org.zib.test.a;

import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class ContextA {
    private ApplicationContext applicationContext;

    public static ContextA instance;

    public static ContextA getInstance() {
        synchronized (ContextA.class) {
            if (instance == null)
                instance = new ContextA();
        }
        return instance;
    }

    private ContextA() {
        AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext();
        applicationContext.register(ConfigA.class);
        applicationContext.registerShutdownHook();
        applicationContext.refresh();
        this.applicationContext = applicationContext;
    }

    public ApplicationContext getContext() {
        return applicationContext;
    }
} 
```

模式配置（例如，WebLogicConfig）

```
package org.zib.test.b;

import org.springframework.cache.annotation.EnableCaching;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.*;
import org.zib.test.a.ConfigA;

@Configuration
@EnableCaching
@Import(ConfigA.class)
public class ConfigB {

    @SuppressWarnings("UnusedDeclaration")
    public static ApplicationContext getContext() {
        return ContextB.getInstance().getContext();
    }
    /**
     * use {@link ContextB}
     */
    public static <T> T getBean(Class<T> bean) {
        return ContextB.getInstance().getContext().getBean(bean);
    }
    /**
     * use {@link ContextB}
     */
    public static <T> T getBean(String name, Class<T> bean) {
        return ContextB.getInstance().getContext().getBean(name, bean);
    }
} 
```

语境：

```
package org.zib.test.b;

import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.zib.test.a.ContextA;

public class ContextB {
    private ApplicationContext applicationContext;

    public static ContextB instance;

    public static ContextB getInstance() {
        synchronized (ContextB.class) {
            if (instance == null)
                instance = new ContextB();
        }
        return instance;
    }

    private ContextB() {
        AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext();
        applicationContext.register(ConfigB.class);
        applicationContext.setParent(ContextA.getInstance().getContext());
        applicationContext.registerShutdownHook();
        applicationContext.refresh();
        this.applicationContext = applicationContext;
    }

    public ApplicationContext getContext() {
        return applicationContext;
    }
} 
```

最后 - 模块配置：

```
package org.zib.test.c;

import org.springframework.cache.CacheManager;
import org.springframework.cache.annotation.EnableCaching;
import org.springframework.cache.concurrent.ConcurrentMapCache;
import org.springframework.cache.support.SimpleCacheManager;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import java.util.Arrays;

@Configuration
@EnableCaching
public class ConfigC {

    @SuppressWarnings("UnusedDeclaration")
    public static ApplicationContext getContext() {
        return ContextC.getInstance().getContext();
    }
    /**
     * use {@link ContextC}
     */
    public static <T> T getBean(Class<T> bean) {
        return ContextC.getInstance().getContext().getBean(bean);
    }

    /*DELTE BY SUGGESTION OF Tomasz Nurkiewicz
    @Bean(name = "cacheManager")
    public CacheManager cacheManager() {
        SimpleCacheManager cacheManager = new SimpleCacheManager();
        cacheManager.setCaches(Arrays.asList(new ConcurrentMapCache("default")));
        return cacheManager;
    }*/
} 
```

及其背景：

```
package org.zib.test.c;

import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.zib.test.a.ContextA;
import org.zib.test.b.ContextB;

public class ContextC {
    private ApplicationContext applicationContext;

    public static ContextC instance;

    public static ContextC getInstance() {
        synchronized (ContextC.class) {
            if (instance == null)
                instance = new ContextC();
        }
        return instance;
    }

    private ContextC() {
        AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext();
        applicationContext.register(ConfigC.class);
        applicationContext.setParent(ContextA.getInstance().getContext());
        applicationContext.registerShutdownHook();
        applicationContext.refresh();
        this.applicationContext = applicationContext;
    }

    public ApplicationContext getContext() {
        return applicationContext;
    }
} 
```

我的测试课：

```
package org.zib.test;

import org.springframework.cache.CacheManager;
import org.zib.test.a.ConfigA;
import org.zib.test.c.ConfigC;

public class Test {
    public static void main(String[] args) {
        Object cm1 = ConfigC.getBean(CacheManager.class);
        Object cm2 = ConfigA.getBean(CacheManager.class);

        if (cm1 == cm2)
            System.out.println("equals");
        else
            System.out.println("unequal");
    }
} 
```

我已经花了很多时间来解决这个问题 - 如果有人能帮助我，我会很高兴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:55:02.973

如果我理解正确`A`是有两个孩子的父上下文：`B`和`C`. 您定义`cacheManager`了两次：在 parent`ConfigA`和一个 child`ConfigC`中。不同的应用程序上下文可以有相同的 bean，这就是为什么你会得到两个不同的实例。

换句话说，如果您要求`cacheManager`from `ConfigC`，它会返回在该上下文中定义的那个。`ConfigB`但是如果你从or请求它`ConfigA`，它会从`ConfigA`（其他实例）返回一个。

它们仍然是单例，但在单个应用程序上下文的范围内。顺便说一句，你能描述一下你想用这个相当复杂的架构实现什么吗？

# iphone - iOS : 如何在谷歌地图上启用音频方向

> ID：14789580
> 
> 赞同：13
> 
> 时间：2013-02-09T15:24:57.327
> 
> 标签：iphone, ios, objective-c, ipad, google-maps

我正在使用下面的代码从我的 iOS 应用程序中打开 Google 地图，我在该应用程序中传递了地点的起点和终点。

它从起点正确导航到终点，但不引导**音频（语音）**。

我想启用语音指导功能。

请帮忙

```
ClientState *clientState = [ClientState sharedInstance];            
CLLocation *currentLocation = clientState.currentLocation;            

NSString *googleMapsURLString = [NSString stringWithFormat:@"maps://maps.google.com/?xyz=xyz&saddr=%1.8f,%1.8f&daddr=%@,%@",
         currentLocation.coordinate.latitude, currentLocation.coordinate.longitude, trip.pickupLatitude, trip.pickupLongitude];

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:googleMapsURLString]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-18T23:45:15.067

地图应用程序将为您处理音频指导。您不需要启用它。如果您打开 Apple Maps URL 方案或 Google Maps 应用程序，如果用户打开了音频，它将通过音频引导用户。语音导航仅适用于 Apple Maps App 的特定手机。iPhone 5 和 4S 有语音方向，而 iPhone 4 和 3GS 没有。就像 iPhone 4 上没有 Siri，也没有 Siri 语音导航。

有关更多讨论，请参阅Apple 上的[此线程](https://discussions.apple.com/thread/4312963?start=15&tstart=0)。

# c++ - libwebsockets 与 WebSockets++

> ID：14789586
> 
> 赞同：2
> 
> 时间：2013-02-09T15:25:52.283
> 
> 标签：c++, c, websocket

我将使用 WebSocket 技术制作一个实时多人游戏。但是，我不确定我应该使用哪个服务器实现。我找到了两个适合我需要的成熟（足够）库。libwebsockets 和 WebSockets++。

有人试过吗？有人能指出这两个库之间的主要区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T19:53:25.347

您可以查看[QWebSockets](http://kurtpattyn.github.io/QWebSockets/)，它是用 Qt 编写的，适用于客户端和服务器。

# javascript - 当“用户可缩放”设置为“是”时检测捏缩放

> ID：14789588
> 
> 赞同：6
> 
> 时间：2013-02-09T15:25:55.363
> 
> 标签：javascript, android, jquery, hammer.js, jquery-events

`meta name="viewport"`当设置为时，如何检测缩放的缩放比例（或缩放距离）`user-scalable=yes`？

我已经在 Android 上进行了测试，但如果`meta name="viewport"`设置为`user-scalable=yes`. 如果`meta name="viewport"`设置为，`user-scalable=no`则可以检测到缩放缩放，但我无法放大文档。

这是我对 jsFiddle 的测试：

Hammer.js：http: [//jsfiddle.net/pE42S/](http://jsfiddle.net/pE42S/)

```
var pziW = "test";
var viewport_width = $(window).innerWidth();
var zoom = 0;

var hammer = new Hammer(document.getElementById("touchme"));

hammer.ontransformstart = function(ev) {
    console.log("ontransformstart");
    console.log(ev);
    //pziW = $(window).innerWidth() / 2 * ev.scale;
    zoom = ev.scale;
    var msg = "ontransformstart " + pziW + " scale " + zoom;
    log(msg);
};
hammer.ontransform = function(ev) {
    console.log("ontransform");
    console.log(ev);
    zoom -= ev.scale;
    viewport_width+=viewport_width*zoom;
    zoom = ev.scale;
    pziW=viewport_width;
    //pziW = $(window).innerWidth() / 2 * ev.scale;
    jqUpdateSize();
    var msg = "ontransform " + pziW + " scale " + zoom;
    log(msg);
};
hammer.ontransformend = function(ev) {
    console.log("ontransformend");
    console.log(ev);
    var msg = "ontransformend " + pziW + " scale " + zoom;
    log(msg);
}; 
```

TouchSwipe：http: [//jsfiddle.net/pE42S/1/](http://jsfiddle.net/pE42S/1/)

```
$(function() {      
    $("#touchme").swipe( {
        pinchStatus:function(event, phase, direction, distance , duration , fingerCount, pinchZoom) {
            console.log("pinchStatus");
            console.log(event);
            pziW=viewport_width - distance;
            $("#log").text(pziW);
            jqUpdateSize();
        },
        fingers:2,  
        pinchThreshold:0  
    });
}); 
```

有人有答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-25T09:44:20.303

现在您可以为此使用 Visual Viewport API（并非适用于所有浏览器）。只是检查`window.visualViewport.scale > 1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-22T10:43:53.850

实现这一点的一种方法是使用通用的 touchstart 处理程序：

*   等到用户开始触摸至少两个点（ event.touches.length > 1）
*   注意两个触摸的 x 和 y 开始坐标，附加 touchend 监听器
*   等到触摸结束。
*   移除 touchend 监听器并测量距离。

使用手势事件和 event.scale 属性更容易，有关更多详细信息，请参阅[最简单的方法来检测捏合的最佳答案。](https://stackoverflow.com/questions/11183174/simplest-way-to-detect-a-pinch)

# c++ - Visual Studio 2012 中的 float 和 double 类型

> ID：14789590
> 
> 赞同：0
> 
> 时间：2013-02-09T15:26:13.690
> 
> 标签：c++, visual-c++, visual-studio-2012, floating-point

我正在学习第 11 个标准的 C++。我对C++了解不多

在我的大学里，有 Visual Studio 2005。我有一个项目将摄氏度转换为华氏度。这段代码在我的大学 Visual Studio 2005 中运行良好：

```
#include <iostream>

int main()
{
   float f,cs;

    cin>>cs;
    cout<<"\n celsius = "<<cs;
    f=1.8*cs+32.0;
    cout<<"f = "<<f;
} 
```

但是当我在修改后在 Visual Studio 2012 中运行此代码时：

```
#include "stdafx.h"
#include <iostream>
using namespace std;

int main()
{
   float f,cs;

   cin>>cs;
   cout<<"\n cs = "<<cs;
   f=1.8*cs+32.0;
   cout<<"f = "<<f;
} 
```

它给了我以下错误：

> 可以从 double 转换为 float

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T15:28:34.607

`double`当您将 1.8（这是一个文字）乘以 时，您会收到一个警告，`cs`产生一个`double`. 在 C++ 中，如果您有一个具有两种不同类型的表达式，则会对具有最大值范围的类型执行*类型提升；*for这意味着转换`double`为. 然后将其分配给 a ，它可能无法表示(是 32 位 IEEE 浮点数，是 64 位的完整值范围。) 因此发出警告。`float``cs``double``float``double``float``double`

您可以通过编写以下内容来解决此问题：

```
f=1.8f*cs+32.0f; 
```

或通过更改`f`为 type `double`。

注意：您的代码正在编译，这只是一个警告，而不是错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T15:29:10.400

这不是错误，而是警告。您的代码仍然可以编译。它警告您，您有一些类型的值`double`，您正试图将其压缩到`float`. 它发生的原因是因为浮点字面量（例如`1.8`and `32.0`）是`double`默认类型的。a 乘以 a`double`得到`float`a `double`，因此 的结果`1.8*cs+32.0`是 type `double`。如果你想要`float`s，你必须做`1.8f`and `32.0f`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T15:30:01.937

在这一行中：`f=1.8*cs+32.0;`您正在使用浮点常量，默认为 type `double`。您需要使用浮动后缀`f`来指定它`float`：`f = 1.8f * cs + 32.0f;`

请参阅[C++ 浮点常量](http://msdn.microsoft.com/en-us/tfh6f0w2%28v=vs.71%29.aspx)

# azure - [AzureDirectory] Lucene.NET 索引在我们重新启动 webrole 时损坏

> ID：14789591
> 
> 赞同：1
> 
> 时间：2013-02-09T15:26:15.867
> 
> 标签：azure, lucene, lucene.net

我们在我们的项目中使用 Lucene.NET，并通过 AzureDirectory 库 ( [https://azuredirectory.codeplex.com/](https://azuredirectory.codeplex.com/) )使用它

我们有一个 webrole 和一个 worker 角色。索引是通过工作角色线程创建和更新的。我们通过创建一个 IndexSearcher 从 webrole 进行搜索。现在我面临的问题是 - 当我们使用管理控制台升级 cspkg 以升级 prodn 服务器上的位时，已创建的 lucene 索引突然停止工作。我们收到如下错误：

未找到文件 _2c.fdt (FileNotFoundException)

在 Lucene.Net.Index.SegmentInfos.FindSegmentsFile.Run() 在 C:\Dev\code\Lucene.Net\Index\SegmentInfos.cs: Lucene.Net.Index.DirectoryIndexReader.Open 的第 741 行（目录目录，布尔值 closeDirectory , IndexDeletionPolicy deletePolicy) in C:\Dev\code\Lucene.Net\Index\DirectoryIndexReader.cs: Lucene.Net.Index.IndexReader.Open(Directory directory, Boolean closeDirectory, IndexDeletionPolicy deletePolicy) in C:\Dev\ 中的第 140 行code\Lucene.Net\Index\IndexReader.cs：Lucene.Net.Index.IndexReader.Open（目录）的第 257 行在 C:\Dev\code\Lucene.Net\Index\IndexReader.cs：Lucene 的第 236 行.Net.Search.IndexSearcher..ctor（目录目录）在 C:\Dev\code\Lucene.Net\Search\IndexSearcher.cs:line 91

但是，当我重新检查 lucene blob 容器时，确实存在特定的 .fdt 文件。事实上，在升级之前，搜索工作得非常好。我什至确保在升级位之前关闭 webrole 和 worker 角色（只是为了确保在升级发生时索引没有得到更新）——但这也导致了这种损坏。

请注意，我确信使用 RAMDirectory 作为缓存的 AzureDirectory。

工人角色代码片段：

```
 public static void CreateNewEntities(List<string> smids)
    {
        AzureDirectory azureDirectory = GetAzureDir();
        IndexWriter indexWriter = new IndexWriter(azureDirectory, CommonAnalyzer.getAnalyzer());
        indexWriter.SetUseCompoundFile(false);

        foreach (string smid in smids)
        {
            List<Document> docs = GetDocs(smid);    // Gets docs for this entity
            foreach (Document d in docs)
            {
                indexWriter.AddDocument(d);
            }
        }

        indexWriter.Close();
    }

    public static void EditEntityInIndex(List<string> smids)
    {
        // delete this surfmark from the index, and recreate the same
        AzureDirectory azureDirectory = GetAzureDir();
        IndexWriter indexWriter = new IndexWriter(azureDirectory, CommonAnalyzer.getAnalyzer());
        indexWriter.SetUseCompoundFile(false);

        foreach (string smid in smids)
        {
            indexWriter.DeleteDocuments(new Term(IndexingFields.ID, smid));
            List<Document> docs = GetDocs(smid);
            foreach (Document d in docs)
            {
                indexWriter.AddDocument(d);
            }
        }
        indexWriter.Flush();
        indexWriter.Close();
    } 
```

Web 角色代码段（用于搜索）：

```
 public static IndexSearcher GetIndexSearcher()
    {//Method to get the indexsearcher obj which is refreshed every 10 mins
        long ctime = DateTime.Now.Ticks/TimeSpan.TicksPerMillisecond;
        if (_srchr == null || ctime - _srchrTime > 600000)  // refresh every 10 mins
        {

        _srchr = new IndexSearcher(GetAzureDir());
        _srchrTime = DateTime.Now.Ticks/TimeSpan.TicksPerMillisecond;

        }

        return _srchr;
    }

        string[] fields = { /*list of fields to be searched on*/};
        IndexSearcher searcher = GetIndexSearcher();
        Hits hits = searcher.Search(mainQuery); 
```

有人可以在这里帮忙吗？

谢谢

卡皮尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:00:05.377

我将首先使用 Process Monitor 来验证丢失的文件是否位于您认为的位置 - 当服务器配置从您下方更改时，在升级期间很容易（至少对我而言）遇到这样的错误.

# java - BinaryTree - 带开关盒

> ID：14789593
> 
> 赞同：2
> 
> 时间：2013-02-09T15:26:16.870
> 
> 标签：java, switch-statement, binary-tree

我玩了一下二叉树并构建了一个菜单，当我单击创建树时，用户可以选择是构建二叉树、向他构建的二叉树插入值还是删除它。树被创建，然后菜单再次出现，现在我想在这棵树中放一个数字，但是在案例中没有设置该变量，每个案例都应该设置它的变量？或者你可以使用全局变量？
这是我的菜单类代码。

```
import java.util.Comparator;
 import java.util.Scanner;

 public class TreeMenu {

 public static void main(String[] args) {

     while(true ){
         System.out.println("\n------------Menu-----------");
         System.out.println("1\. Create Tree");
         System.out.println("2\. Delete Tree");
         System.out.println("3\. Insert Value INTO the tree");
         System.out.println("4\. Exit ");
         System.out.println("Please Select Your Choice");

         Scanner choice = new Scanner(System.in); 
         int i = choice.nextInt();
         if(i>0 && i<=4){
         switch (i)
          {

            case 1:{

                System.out.println("Creating a Tree Please Wait........");
                Comparator comp = new IntegerComparator();
                BST tree1 = new BST(comp);
                break;
            }
            case 2:{
                System.out.println("You Chose TWO");
                break;
            }
            case 3:{
                Scanner Number = new Scanner(System.in); 
                 int num = Number.nextInt();
                 tree1.insert(num);

            }
            case 4:{
                System.exit(0);

            }

           }

          }
         else{
             System.out.println("There is no number in the menu like that "+i);
             System.exit(0); 

         }
     }

 }

 } 
```

我如何使用创建并插入他的值的同一棵树？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T15:32:38.740

声明`tree1`为私有全局变量

```
 public class TreeMenu {
    private static BST tree1 = null;
    ..... 
```

现在`tree1`在里面实例化它`switch case 1`，然后你可以在里面使用相同的树变量`case 2`

A thing to note is you would need to do error checking in `case 2 and 3`, if `tree1 == null`, that would mean no tree has been created yet.

# android - 如何在 SharedPreferences 中存储 ArrayList

> ID：14789594
> 
> 赞同：1
> 
> 时间：2013-02-09T15:26:18.910
> 
> 标签：android

在不使用数据库的情况下存储对象的最快方法是什么？

例如，我想存储一个列表，我可以返回并添加或删除酒店到/从，但我不想创建一个数据库，所有这些麻烦似乎都是多余的。

我如何将数组列表存储在共享首选项或类似简单的东西中？

```
public class Hotel{
  String id, name, address, phoneNumber;
  public String getName(){
    return name;
  }
etc
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T15:33:55.623

我的建议：

1.  使用[Gson](http://code.google.com/p/google-gson/)将任何类型的对象转换为字符串
2.  将该字符串保存在 SharedPreferences
3.  [使用 Gson](https://sites.google.com/site/gson/gson-user-guide)反转过程以检索您的对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T15:42:35.823

```
//Retrieve the values
Set<String> set = new HashSet<String>();
set = myScores.getStringSet("key", null);

//Set the values
Set<String> set = new HashSet<String>();
set.addAll(listOfExistingScores);
scoreEditor.putStringSet("key", set);
scoreEditor.commit(); 
```

# java - 使用 Java 进行高效的“Pinging”

> ID：14789596
> 
> 赞同：1
> 
> 时间：2013-02-09T15:26:38.540
> 
> 标签：java, mysql, multithreading, concurrency

我怎样才能最有效地浏览一个包含 12,000 个 IP 地址的数据库并用它们 ping 打开一个套接字？目前我的工作是这样的：

*   获取列表中的所有 IP
*   对于每个 IP，打开一个新线程，该线程打开一个与服务器的套接字并从它接收一个数据包。
*   在新线程上，根据 IP 在线的天气以及打开套接字时返回的内容更新信息。

我当前的解决方案有效，只需很长时间才能通过数据库一次。我正在尝试找到一种非常快速地通过数据库的方法；但是，我不知道从哪里开始。任何帮助表示赞赏，谢谢！

编辑：我打开一个套接字并发送一个 TCP 数据包，然后存储信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T17:03:57.257

尝试为此使用netty（NIO）之类的东西。您可以将您的请求分散到一个线程中的所有 IP（无论出于何种原因），然后在另一个线程中等待返回。您当前的方法使用线程来管理所有远程主机的异步答案，这似乎没问题并且可以工作，但是生产线程只是为了等待并不是最佳选择。更好地打开大量连接，发送数据包，等待结果并让操作系统管理等待。

如果要执行需要不可预测时间的并发计算，请仅使用多个线程。如果您有如此明确定义的任务，例如打开大量套接字、发送数据和等待响应，请在 java 中使用 NIO 框架（顺便说一句。通常这里单个线程就足够了）。

# java - 将数组索引除以下一个索引 Java

> ID：14789601
> 
> 赞同：-1
> 
> 时间：2013-02-09T15:27:23.327
> 
> 标签：java, arrays

我仍在学习 Java，并且对数组有疑问。

我的数组：

```
 double arr[] = {1.8, 3.6, 5.0, 2.0}; 
```

我的问题是如何将第一个索引除以下一个等等，但不是最后一个索引。每个索引都将除以 2。因此结果数组如下所示：

```
double arr[] = {0.5, 0.72, 2.5, 2.0}; 
```

通过这种方式，我走在正确的轨道上：

```
public static void main(String [] args){
    double arr[] = {1.8, 3.6, 5.0, 2.0};

    for(int j = 0; j < arr.length; j++){
        arr[j] = arr[0] / arr[1];
        arr[j] = arr[1] / arr[2];

        System.out.println(arr[j]);
    }
} 
```

我不确定如何继续，感谢所有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:44:55.860

```
public static void main(String[] args) {
    double arr[] = { 1.8, 3.6, 5.0, 2.0 };
    double[] resultArr = new double[arr.length];

    for (int i = 0; i < arr.length - 1; i++) {
      double result = arr[i] / arr[i + 1];
      resultArr[i] = result;

    }
    resultArr[arr.length - 1] = arr[arr.length - 1];

  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T15:39:23.240

尝试这个：

```
for(int j = 0; j < arr.length-1; j++){
        arr[j] = arr[j] / arr[j+1];
        System.out.println(arr[j]);
    }
System.out.println(arr[arr.length-1]);  // this will print the last element 
```

`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T15:43:03.057

这应该有效：

```
public static void main(String [] args) {
  double arr[] = {1.8, 3.6, 5.0, 2.0};
  int j;
  System.out.print("[");
  for(j = 0; j < arr.length - 1 ; j++) {
    arr[j] = arr[j] / arr[j+1];
    System.out.print(arr[j] + " , ");
  }
  System.out.println(arr[j] + "]");
} 
```

正如您在循环内部看到的那样，`j`表示每次迭代中的索引。你的数组看起来像：

`{1.8, 3.6, 5.0, 2.0}` `arr.length`是`4`，索引是：`0 1 2 3`

```
 ^    ^    ^    ^
  |    |    |    |
  0    1    2    3 
```

所以我们在数组上移动，将每个元素 ( `j`) 除以下一个元素 ( `j+1`) 并打印它。

# powershell - 具有动态函数名称的调用命令

> ID：14789602
> 
> 赞同：4
> 
> 时间：2013-02-09T15:27:25.013
> 
> 标签：powershell, powershell-remoting

我发现了这篇很棒的帖子：[在带参数的函数上使用 Invoke-Command -ScriptBlock](https://stackoverflow.com/questions/8448808/using-invoke-command-scriptblock-on-a-function-with-arguments)

我正在尝试使函数调用 ( `${function:Foo}`) 动态化，就像我想传递函数名称一样。

我试过这个：

```
$name = "Foo"
Invoke-Command -ScriptBlock ${function:$name} 
```

但这失败了。我也尝试了各种转义序列，但就是不能让函数名是动态的。

* * *

编辑：为清楚起见，我添加了一个小测试脚本。当然，想要的结果是调用`ExternalFunction`.

```
Function ExternalFunction()
{
  write-host "I was called externally"
}

Function InternalFunction()
{
    Param ([parameter(Mandatory=$true)][string]$FunctionName)
    #working: Invoke-Command -ScriptBlock ${function:ExternalFunction}
    #not working: Invoke-Command -ScriptBlock ${invoke-expression $FunctionName}
    if (Test-Path Function:\$FunctionName) {
    #working,but how to use it in ScriptBlock?
    }
}

InternalFunction -FunctionName "ExternalFunction" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T19:42:46.603

替代解决方案：

```
function foo {'I am foo!'}

$name = 'foo'

$sb = (get-command $name -CommandType Function).ScriptBlock
invoke-command -scriptblock $sb 
```

我是富！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T15:54:07.210

您可以尝试以下方法。它在尝试运行它之前测试指定的名称是否是一个有效的函数：

```
$myfuncnamevar = "Foo"
Invoke-Command -ScriptBlock {
    param($name)
    if (Test-Path Function:\$name) { 
        #Function exists = run it
        & $name
    }
} -ArgumentList $myfuncnamevar 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T15:52:38.777

很简单：

```
invoke-expression  $name 
```

或者如果您想保留调用命令进行远程处理，例如

```
Invoke-Command -ScriptBlock { invoke-expression  $name} 
```

# php - index.php 之后的目录层次结构

> ID：14789604
> 
> 赞同：3
> 
> 时间：2013-02-09T15:27:53.840
> 
> 标签：php, url, directory

我相信这可能是一个蹩脚的问题，但我找到了这个网址：

[http://www.trickingpt.com/index.php/componentes/componente-artigos/tricks/basicmoves?id=125](http://www.trickingpt.com/index.php/componentes/componente-artigos/tricks/basicmoves?id=125)

问题很简单：

一个 url 怎么可能在一个 php 文件之后有一个文件夹层次结构，然后是 get 参数？

起初我认为这将是一些我不知道的脚本技巧，但后来我在页面上注意到了这一点，导致了上面提到的另一个：

href="/index.php/componentes/componente-artigos/tricks/basicmoves?id=125"

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:33:23.967

这很简单。`index.php`用于读取请求的`$_SERVER["PATH_INFO"]`路径（index.php 之后的部分），然后执行适当的代码以返回响应。

链接的网站很可能正在使用处理这些 url 并将此“文件夹层次结构”路径路由到相应控制器的框架。例如，就像[Kohana 框架](http://kohanaframework.org/3.3/guide/kohana/routing)一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:31:36.687

您可以通过获取 $_SERVER['REQUEST_URI'] 来获取整个 URL。

# html - 100% 高度在 IE 中不起作用

> ID：14789605
> 
> 赞同：0
> 
> 时间：2013-02-09T15:28:00.167
> 
> 标签：html, css, internet-explorer

我目前在 IE 中显示 100% 高度的 div 时遇到一些问题，它在所有其他浏览器中都可以正常工作，只是 IE 给我带来了一些麻烦，我不知道如何解决它。
这是我的一些代码：
HTML：

```
<div id="content">

    <div id="box-01" class="slide" style="color: #F26964; background-color: #003218;">
        <div class="text-content">
TEXT GOES HERE
        </div>
    </div>

    <div id="box-02" class="slide" style="color: #F2F1EF; background-color: #70858E;">

            <div class="text-content">
TEXT GOES HERE
            </div>
    </div>

    <div id="box-03" class="slide" style="color: #F2F1EF; background-color: #003218">

            <div class="text-content">
TEXT GOES HERE
            </div>
    </div>

</div> 
```

CSS：

```
html, body {
    margin:0;
    padding:0;
    height:100%;
    border:none
}

#content {
    width: 100%;
    height: 100%;
    margin: 0;
    position: absolute;
    top: 0px;
    left: 0px;
}

.slide {
    width: 100%;
    height: 100%;
    margin: 0 auto;
    text-align: center;
    position: relative;
    display: table;
    vertical-align: middle;

    background: no-repeat 50% 50%;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}

.text-content {
    text-align: center;
    display: table-cell;
    vertical-align: middle;
    text-transform: uppercase;  
} 
```

所以我有一组相对定位的 div，每个都适合浏览器窗口大小，就像我说的那样，这在除 IE 之外的每个浏览器中都可以正常工作，特别是 100% 高度样式属性无法识别。
在做了一些研究之后，我发现这可能与表格中的文本有关（这是必要的，因为我想将文本水平和垂直居中）但我不知道这个问题如何得到解决，任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T19:49:00.903

这里讨论了许多策略：http: [//blog.themeforest.net/tutorials/vertical-centering-with-css/](http://blog.themeforest.net/tutorials/vertical-centering-with-css/)

这似乎适用于 IE FF 和 Chrome： [http ://codepen.io/anon/pen/asqpL](http://codepen.io/anon/pen/asqpL)

# php - 如果帐户类型 = x 转到链接 1 否则如果帐户类型 = y 则转到链接 2？

> ID：14789606
> 
> 赞同：0
> 
> 时间：2013-02-09T15:27:59.940
> 
> 标签：php, mysql, hyperlink

我的网站上有两种类型的用户，“免费”和“高级”。基本上我有一个消息系统，列出了消息和发送消息的用户。

当您单击用户的名称/图像时，它将链接到`'profile.php?id=(user_id)'`

我想要做的是，如果发送消息的用户的帐户类型=“免费”，那么我想在点击时将用户带到不同的链接。

我对php真的很陌生，不知道该怎么做，请有人给我一个例子来说明我如何做到这一点。这是我当前的代码。

功能：

```
function message_account_type() {
            global $connection;
            global $_SESSION;
            global $profile_id;
            global $message_id;
            $query = "SELECT ptb_users.account_type, ptb_messages.from_user_id
                        FROM ptb_users, ptb_messages
                        WHERE ptb_messages.from_user_id = \"$profile_id\"
                        AND ptb_profiles.user_id = ptb_messages.from_user_id ";
            $message_account_type = mysql_query($query, $connection);
            confirm_query($query, $connection);
            return $message_account_type;
        } 
```

php:

```
<?php
$message_account_type = message_account_type();
while ($type = mysql_fetch_array($message_account_type)) 
if ($type['account_type'] == 'Premium')  {
echo "<a href=\"profile.php?id={$inbox['from_user_id']}\" ><img width=\"50px\" height=\"50px\" src=\"data/photos/{$inbox['from_user_id']}/_default.jpg\" /></a>";?></div><div class="message_text"><?php echo "<a href=\"profile.php?id={$inbox['from_user_id']}\">{$inbox['display_name']}</a>"; ?><? } ?>

<?php
$message_account_type = message_account_type();
while ($type = mysql_fetch_array($message_account_type)) 
if ($type['account_type'] == 'Free')  {
echo "<a href=\"members.php?id={$inbox['from_user_id']}\" ><img width=\"50px\" height=\"50px\" src=\"data/photos/{$inbox['from_user_id']}/_default.jpg\" /></a>";?></div><div class="message_text"><?php echo "<a href=\"members.php?id={$inbox['from_user_id']}\">{$inbox['display_name']}</a>"; ?><? } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:53:16.113

我真的不知道为什么你们中的许多人`<?php`无缘无故地打开和关闭文档中的标签......

一个较短的版本是：

```
<?php
function is_premium_user($profile_id)
{
    $query = sprintf("SELECT ptb_users.account_type WHERE ptb_messages.from_user_id = '%s' AND account_type = 'Premium' LIMIT 1", $profile_id );
    $result = mysql_query($query);
    if (!mysql_fetch_assoc($result))
        return false;
    return true;
}
$message_account_type = message_account_type();
while ($type = mysql_fetch_array($message_account_type)) 
if (is_premium_user($profile_id))
    echo '<a href="profile.php?id='.$inbox['from_user_id'].'><img width="50px" height="50px" src="data/photos/'.$inbox['from_user_id'].'/_default.jpg"/></a></div><div class="message_text"> <a href="profile.php?id='.$inbox['from_user_id'].'">'.$inbox['display_name'].'</a>'; 
else
    echo '<a href="members.php?id='.$inbox['from_user_id'].'><img width="50px" height="50px" src="data/photos/'.$inbox['from_user_id'].'/_default.jpg"/></a></div><div class="message_text"> <a href="members.php?id='.$inbox['from_user_id'].'">'.$inbox['display_name'].'</a>'; 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:39:10.953

最好的办法是在`profile.php`. 例如，在您的身上，`profile.php`您可以执行以下操作：

```
$the_user = new User($_REQUEST['id']);
$include_file = ($the_user->account_type == 'free') ? 'free' : 'premium';
include($include_file.'-profile.php'); 
```

# facebook - facebook-php-sdk 如何将照片上传到墙或相册？

> ID：14789608
> 
> 赞同：0
> 
> 时间：2013-02-09T15:28:25.237
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

嗨，伙计们，我是 php programin 和 facebook 应用程序的新手，我找到了这段代码，它适用于 TEXT 帖子，但我的要求是我也必须上传图片，我尝试通过 addin ['source' => '$image_source'] 在 arrey 但不起作用...我如何上传照片？

```
<?php
include_once("config.php");

if($_POST)
{
    //Post variables we received from user
    $userPageId     = $_POST["userpages"];
    $userMessage    = $_POST["message"];
    $image_source = "http://www.example.com/image.jpg"
    if(strlen($userMessage)<1) 
    {
        //message is empty
        $userMessage = 'No message was entered!';
    }

        //HTTP POST request to PAGE_ID/feed with the publish_stream
        $post_url = '/'.$userPageId.'/feed';

        //posts message on page statues 
        $msg_body = array(
        'message' => $userMessage,
        'source' => '$image_source'
        );

    if ($fbuser) {
      try {
            $postResult = $facebook->api($post_url, 'post', $msg_body );
        } catch (FacebookApiException $e) {
        echo $e->getMessage();
      }
    }else{
     $loginUrl = $facebook->getLoginUrl(array('redirect_uri'=>$homeurl,'scope'=>$fbPermissions));
     header('Location: ' . $loginUrl);
    }

    //Show sucess message
    if($postResult)
     {
         echo '<html><head><title>Message Posted</title><link href="style.css" rel="stylesheet" type="text/css" /></head><body>';
         echo '<div id="fbpageform" class="pageform" align="center">';
         echo '<h1>Your message is posted on your facebook wall.</h1>';
         echo '<a class="button" href="'.$homeurl.'">Back to Main Page</a> <a target="_blank" class="button" href="http://www.facebook.com/'.$userPageId.'">Visit Your Page</a>';
         echo '</div>';
         echo '</body></html>';
     }
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T16:01:16.283

您不能使用`feed`端点发布照片。您应该在`/me/photos`获得`publish_stream`许可的情况下使用。要发布到相册，您需要`/ALBUM_ID/photos`端点

```
 $msg_body = array(
    'message' => $userMessage,
    'source' => '@'.'$image_source'
   );

   $postResult = $facebook->api('/me/photos/','post', $msg_body); 
```

要使用与您的网站无关的网址，您需要使用`url`

```
 $msg_body = array(
    'message' => $userMessage,
    'url' => 'http://somepage.com/img.png'
   ); 
```

# asp.net-mvc - MVC 自动完成功能不起作用

> ID：14789616
> 
> 赞同：0
> 
> 时间：2013-02-09T15:29:33.417
> 
> 标签：asp.net-mvc, autocomplete

我知道那里有很多帖子，但我根本无法弄清楚我在自动完成中做错了什么。

我有一个像这样的 ProductController

```
public JsonResult AutocompleteMethod(string searchstring) //searchString null here
        {
              Product ob=new Product();
              List<Product> newLst = ob.GetProducts();
              var suggestions = from s in newLst select s.productName ;
              var namelist = suggestions.Where(n=>n.StartsWith(searchstring));
              return Json(namelist, JsonRequestBehavior.AllowGet);
         } 
```

鉴于我有：

```
 <p>
        Find by name:<%: Html.TextBox("Txt") %>
    </p>

     <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
     <script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
     <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js" type="text/javascript"></script>

     <script type="text/jscript">
         $(function () {
             debugger;

             $('#Txt').autocomplete({ source: '/Product/AutocompleteMethod' });

         });
     </script> 
```

但**SearchString**总是`NULL`在控制器功能中。

你能弄清楚是什么错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:38:09.247

AFAIK 参数被称为`term`，而不是`searchstring`，所以：

```
public ActionResult AutocompleteMethod(string term)
{
    List<Product> newLst = new Product().GetProducts();
    var namelist = 
        from p in newLst 
        where p.StartsWith(term)
        select new 
        {
            value = p.Id, // you might need to adjust the Id property name here to match your model
            label = p.productName
        };
    return Json(namelist, JsonRequestBehavior.AllowGet);
} 
```

我也非常怀疑这`productName`是自动完成插件会识别的属性。您可以尝试使用`value`and `label`，如我在示例中执行的投影所示。

# java - 设计一个可变的复杂类及其在java中的构造

> ID：14789619
> 
> 赞同：0
> 
> 时间：2013-02-09T15:30:14.250
> 
> 标签：java, design-patterns, builder

我正在设计一个复杂的配置类作为 API 设计的一部分。配置类大致看起来像这样..（我忽略了泛型/访问修饰符等）

```
class Configuration {
    One obj1;
    Two obj2;
}

class One {
      List<Double> values;
}

class Two {
      double value;
      Map<String, Double> data;
} 
```

这就是我想要完成的：

*   我希望用户能够在第一时间轻松创建此配置类并提交到服务器。
*   然后他们可以更改此类的任何部分并将更新的配置发送到服务器。

使用和避免哪些设计模式？

使此类不可变并使用构建器模式会更好吗？或者只是在配置类上提供各种修改方法，这样他们就可以就地修改相同的配置类（在所有级别），而不必为每次更新创建一个新的配置类。我认为 Builder 模式仅适用于不可变类。

问题：

*   有没有办法在这种类型的场景中利用 Builder 模式？
*   还是像我上面提到的那样在 Configuration 类上提供 mutator 方法更好？
*   还是有其他更好的模式可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:07:14.967

我认为您应该使用原型模式：在您的代码中，您可以添加包含所有类型配置的映射，该映射将有一个名为“currentConfiguration”的键，值将是应该加载的配置。地图还可以包含可以存储在地图中的其他配置，并且可以在需要时替换当前配置。从地图中获取配置后，您只需克隆配置对象，用户就可以做任何他喜欢的事情。更改后，他可以使用特定名称将配置保存在地图中。因此用户可以获得与他需要的非常接近的配置对象并相应地对其进行配置。代码应如下所示：`public class CloudRepository {

```
private Map<String, Configuration> rep;

public CloudRepository(Configuration current){
    rep = new HashMap<String, Configuration>();
    rep.put("current", current);
}

public Configuration getConfiguration(String string){
    return (Configuration) rep.get(string).clone();
}

public void addConfiguration(String name, Configuration conf){
    rep.put(name, conf);
}

public void replaceCurrentConfiguration(Configuration conf){
    rep.put("current", conf);
} 
```

}

您还可以编写更多代码来处理配置的历史记录。你也可以考虑让这个类单例

# mongodb - Mongodb KeyFile 太开放权限

> ID：14789622
> 
> 赞同：19
> 
> 时间：2013-02-09T15:30:52.680
> 
> 标签：mongodb, permissions

我按照 mongodb 站点上的教程创建了一个三成员副本集（在单独的服务器中）。

我在 /etc/mongodb.conf 中配置了以下内容：

叉=真

keyFile=/srv/mongodb/keyFile

我已经在那个位置创建了 keyFile 并且服务器总是在 keyFile 中告诉我“权限太开放”

有什么问题？

提前致谢

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-09T21:02:24.293

从[文档](http://docs.mongodb.org/manual/administration/replica-sets/#security-considerations-for-replica-sets)：

> 密钥文件在 UNIX 系统上不得具有组或“世界”权限

因此，如果你运行它，你应该没问题（替换实际路径）：

```
chmod 600 /path/to/keyfile 
```

您还应该确保密钥文件由您用于运行 mongod/mongos 进程的同一用户拥有，否则设置上述权限会导致错误（只有拥有该文件的用户才能以 600 权限访问它）。

# macos - OSX：找到移动的文件

> ID：14789627
> 
> 赞同：2
> 
> 时间：2013-02-09T15:31:33.670
> 
> 标签：macos, filesystems

当我移动文件时，一些 MacOSX 应用程序（如 iTunes）并没有真正的问题——它们仍然很容易找到移动的文件（而且我很确定它们以前没有打开过该文件）。

他们是怎么做到的？我能想到的一种可能性是 FS 事件通知系统。（[相关问题](https://stackoverflow.com/questions/645321/how-to-dectect-new-or-modified-files-in-mac-osx)）

但我记得我看过一些绝对文件句柄/id 左右，我想也许他们总是可以通过该文件句柄查询当前文件名。有没有类似的东西？也许是inode nr，但这有点太少了，因为我不确定如何从inode nr 获取文件名以及如何打开文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:47:11.557

正如 Albert 提到的 Alias Manager 已被折旧，替换的是[URL Bookmark](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURL/initByResolvingBookmarkData%3aoptions%3arelativeToURL%3abookmarkDataIsStale%3aerror%3a)方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:44:16.533

我认为您正在寻找的是[`NSURL`](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)的书签 - 由于 Apple 的短视网页设计，我在 iPad 上无法生成正确的链接，但其本质是您从 URL 获取书签并随后可以解析返回到 URL 的书签。系统会在此期间解决文件中的任何移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T15:36:55.433

我刚刚发现了[Alias Manager](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/Alias_Manager/Reference/reference.html)，这听起来像是我正在寻找的东西。不幸的是，这似乎已被弃用。（[相关问题](https://stackoverflow.com/questions/9673601/locate-file-after-move)）[关于弃用的一些信息。](https://github.com/nathanday/ndalias/issues/3)

（[另一个相关问题](https://stackoverflow.com/questions/1468394/keep-a-reference-to-a-file-after-it-has-moved-in-objective-c)）还有提供此类功能的[NSURL 类。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)

Python代码：

```
import AppKit

def getFileNativeId(filepath):
    if not os.path.isfile(filepath): return None
    filepath = os.path.abspath(filepath)
    filepath = unicode(filepath)

    url = AppKit.NSURL.alloc().initFileURLWithPath_(filepath)   

    bookmark = url.bookmarkDataWithOptions_includingResourceValuesForKeys_relativeToURL_error_(AppKit.NSURLBookmarkCreationPreferFileIDResolution,None,None,None)
    bytes = bookmark[0].bytes().tobytes()

    return bytes

def getPathByNativeId(fileid):
    nsdata = AppKit.NSData.alloc().initWithBytes_length_(fileid, len(fileid))
    url, _, _ = AppKit.NSURL.URLByResolvingBookmarkData_options_relativeToURL_bookmarkDataIsStale_error_(nsdata, AppKit.NSURLBookmarkResolutionWithoutUI, None,None,None)

    if not url: return None

    return unicode(url.path()) 
```

# c# - 取消挂钩事件时检测到 FatalExecutionEngineError

> ID：14789628
> 
> 赞同：2
> 
> 时间：2013-02-09T15:31:35.300
> 
> 标签：c#, exception, fatal-error

作为我论文的一部分，我正在开发一个客户端/服务器应用程序，并选择使用它`SocketAsyncEventArgs`来获得网络操作方面的最大性能。今天下午，我决定对创建 20 个线程并每个线程发送 100,000 条 UDP 消息的应用程序进行快速而肮脏的压力测试。在应用程序快结束时出现以下异常：

![在此处输入图像描述](../Images/f7264f1755f03fe562fa165781fbe279.png)

我该如何寻找异常的原因？或者有没有人知道为什么它会在一个看似随机的地方摔倒？

我相信大部分时间都可以重新制作，并且很乐意在必要时提供代码。

更新：

我在 .Net 4.0 版上运行了完全相同的代码，没有错误。据我所知，这似乎是 .Net 4.5/Compliers/Jit 的问题。任何关于如何缩小例外范围的想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T09:52:12.317

是否只在调试时出现？我见过类似的情况，只有在 x86 上调试 x86（不是任何类型）时才会出现这些错误。

# python - 从 urllib2 隐藏 UserWarning

> ID：14789631
> 
> 赞同：2
> 
> 时间：2013-02-09T15:32:08.497
> 
> 标签：python, python-2.7, urllib2

我使用带有密码管理器的开瓶器，当我第一次使用我的开瓶器时，我会收到以下警告消息：

```
/usr/lib/python2.7/urllib2.py:894: UserWarning: Basic Auth Realm was unquoted
  url, req, headers) 
```

我的应用程序似乎运行良好，但如何隐藏此消息？

PS：我使用：

```
Python 2.7.3 (default, Jan  2 2013, 16:53:07) 
[GCC 4.7.2] on linux2 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-09T15:39:40.340

使用该[`warnings`模块](http://docs.python.org/2/library/warnings.html)过滤掉代码中的特定警告：

```
import warnings

warnings.filterwarnings("ignore", category=UserWarning, module='urllib2') 
```

# java - 解析公司信息

> ID：14789634
> 
> 赞同：-2
> 
> 时间：2013-02-09T15:32:18.777
> 
> 标签：java, parsing, web-scraping, html-parsing, finance

我想知道是否有人知道如何成功解析公司名称“Alcoa Inc.”。显示在下面的 URL 中。显示图片会容易得多，但我没有足够的声誉。任何帮助，将不胜感激。

[http://www.google.com/finance?q=NYSE%3AAA&ei=LdwVUYC7Fp_YlgPBiAE](http://www.google.com/finance?q=NYSE%3AAA&ei=LdwVUYC7Fp_YlgPBiAE)

到目前为止，这是我尝试使用 jsoup 解析 div 类的方法：

```
 <div class="appbar-snippet-primary">
<span>Alcoa Inc.</span>
</div>

public Elements htmlParser(String url, String element, String elementType, String returnElement){

        try {

            Document doc = Jsoup.connect(url).get();
            Document parse = Jsoup.parse(doc.html());

            if (returnElement == null){

                return parse.select(elementType + "." + element);

            }

            else {

                return parse.select(elementType + "." + element + " " + returnElement);

            }

        }  

public String htmlparseGoogleStocks(String url){

        String pr = "pr";
        String appbar_center = "appbar-snippet-primary";
        String val = "val";

        String span = "span";
        String div = "div";
        String td = "td";

        Elements price_data;
        Elements title_data;
        Elements more_data;

        price_data = htmlParser(url, pr, span, null);

        title_data = htmlParser(url, appbar_center, div, span);

        //more_data = htmlParser(url, val, td, null);

        //String stockprice = price_data.text().toString();
        String title = title_data.text().toString();

        //System.out.println(more_data.text());

        return title; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:59:54.770

我自己会分析感兴趣的页面的源 HTML，然后使用 JSoup 提取信息。例如，使用一个非常小的 JSoup 程序，如下所示：

```
import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;

public class GoogleFinance {

   public static final String PAGE = "https://www.google.com/finance?q=NASDAQ:XONE";  

   public static void main(String[] args) throws IOException {
      Document doc = Jsoup.connect(PAGE).get();

      Elements title = doc.select("title");

      System.out.println(title.text());
   }
} 
```

你得到回报：

> ExOne Co：纳斯达克股票代码：XONE 行情和新闻 - Google 财经

没有比这更容易的了。

# c++ - 关于在 C++ 中返回容器：指针 VS 非指针

> ID：14789637
> 
> 赞同：1
> 
> 时间：2013-02-09T15:32:49.730
> 
> 标签：c++, function, return, containers

我需要弄清楚这一点。使用下面的代码：

```
vector<unsigned long long int> getAllNumbersInString(string line){
    vector<unsigned long long int> v;   
    string word;
    stringstream stream(line);
    unsigned long long int num;

    while(getline(stream, word, ',')){
    num = atol(word.c_str());
    v.push_back(num);
    }

    return v;
} 
```

此示例代码只是将输入字符串转换为存储在向量中的一系列 unsigned long long int。

在上面的这种情况下，如果我有另一个函数调用这个函数，并且我们在向量中似乎有大约 100,000 个元素，这是否意味着，当我们返回它时，将创建一个新向量并且将创建与该向量相同的元素在函数中，然后返回时会消除函数中的原始向量？到目前为止我的理解正确吗？

通常，我会以这样一种方式编写代码，即所有函数在涉及到容器时都会返回指针，但是，在程序设计方面，根据我上面的理解，**我们是否应该在涉及到容器时总是返回一个指针**？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T15:37:43.457

最`std::vector`有可能（如果您的编译器优化已打开）直接在函数的返回值中构造。这称为复制/移动省略，是允许编译器进行的优化：

> 在具有类返回类型的函数的 return 语句中，当表达式是具有与函数返回类型相同的 cv 非限定类型的非易失性自动对象（函数或 catch 子句参数除外）的名称时，通过将自动对象直接构造到函数的返回值中，可以省略复制/移动操作

此引用取自 C++11 标准，但与 C++03 类似。重要的是要注意复制/移动省略根本不需要发生 - 这完全取决于编译器。大多数现代编译器将毫无问题地处理您的示例。

如果没有发生省略，C++11 仍然会为您提供比 C++03 更多的好处：

*   在 C++03 中，如果没有复制省略，返回`std::vector`这样的 a 将涉及，如您所说，将所有元素复制到返回的对象，然后销毁本地`std::vector`.

*   在 C++11 中，`std::vector`将被*移出*函数。移动允许返回`std::vector`的人*窃取*`std::vector`即将被销毁的内容。这比复制内容效率高得多。

    你可能已经预料到对象会被复制，因为它是一个左值，但是有一个特殊的规则使这样的复制首先被视为移动：

    > 当满足省略复制操作的标准 [...] 并且要复制的对象由左值指定时，首先执行为复制选择构造函数的重载决策，就好像对象由右值指定一样。

至于是否应该返回指向容器的指针：答案几乎肯定是否定的。除非完全必要，否则不应传递指针，并且在必要时，最好使用智能指针。正如我们所看到的，在您的情况下，根本没有必要，因为按值传递它几乎没有开销。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T15:36:09.440

使用任何合理的编译器按值返回是安全的，我会说更可取。C++ 标准允许*复制省略*，在本例中[*称为返回值优化*(NRVO)](http://en.wikipedia.org/wiki/Return_value_optimization)，这意味着您担心的额外复制不会发生。

请注意，这是允许修改程序的可观察行为的优化案例。

注意 2\. 正如其他答案中提到的，C++11 引入了移动语义，这意味着，在`RVO`不适用的情况下，您可能仍然有一个非常便宜的操作，将返回的对象的内容转移到呼叫者，召集者。在 的情况下`std::vector`，这是非常便宜的。但请记住，并非所有类型都可以移动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-09T15:35:50.930

你的理解是正确的。
但是编译器可以通过**[RVO 和 NRVO](http://www.efnetcpp.org/wiki/Return_value_optimization)**应用复制省略并删除正在生成的额外副本。

> **当涉及到容器时，我们是否应该总是返回一个指针？**

如果可以，当然应该避免按值返回，尤其是对于非 POD 类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-09T15:36:14.690

这取决于[您是否需要引用语义](https://stackoverflow.com/questions/14539624/memory-management-patterns-in-c/14539873#14539873)。

一般来说，如果你不需要引用语义，我会说你不应该使用指针，因为在 C++11 中容器类支持移动语义，所以按值返回集合很快。此外，编译器可以省略对移动构造函数的调用（这称为命名返回值优化或 NRVO），因此不会引入任何开销。

但是，如果您确实需要为您的集合创建单独的、一致的视图（即*aliases*），以便例如在共享该向量所有权的几个地方“看到”返回向量中的插入，那么您应该考虑返回一个智能指针。

# delphi - 将文件从本地复制到 SharePoint 服务器位置

> ID：14789638
> 
> 赞同：2
> 
> 时间：2013-02-09T15:32:57.567
> 
> 标签：delphi, file, sharepoint, copy

现在在我的 PC 上，我可以使用资源管理器在我们的 SP 服务器上打开一个位置（例如[http://sp.myhost.com/site/Documents/](http://sp.myhost.com/site/Documents/)位置）。从那里我可以从我的 C:\ 驱动器复制/粘贴一个文件。

我需要以编程方式复制复制过程。FileCopy() 不这样做 - 似乎是导致问题的 http:// 位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:22:08.247

服务器是否允许**WebDAV**访问？如果是，则有适用于 Delphi 的 WebDAV 客户端，包括[Indy 10](http://atozedsoftware.newsgroups.archived.at/indy.general/200511/0511224307.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T07:28:23.567

如果您不使用 BLOB 存储，所有 SharePoint 文件都作为 BLOB 对象存储在数据库中。

当您使用资源管理器访问文件时，您正在使用 Windows 服务，该服务正在从 SharePoiont 读取文件并将其呈现给您。这样，您可以在手动将它们从 SharePoint 下载后立即复制和粘贴。

为了能够自动执行此操作，您应该使用下一个 SP API 代码来实现：

```
 using (SPSite site = new SPSite("http://testsite.dev"))
        {
            using (SPWeb web = site.OpenWeb())
            {
                using (FileStream fs = File.OpenRead(@"C:\Debug.txt"))
                {
                    byte[] buffer = new byte[fs.Length];
                    fs.Read(buffer, 0, (int) fs.Length);

                    SPList list = web.GetList("Lists/Test AAD");
                    SPFile f = list.RootFolder.Files.Add("/Shared Documents/"+Path.GetFileName(fs.Name), buffer);
                }
            }
        } 
```

这会将新的“Debug.txt”文件添加到从磁盘 C 读取的“共享文档”库中。要对每个文件执行此操作，只需遍历文件夹中的每个文件。每次添加文件时，您只能打开一次网页并循环...

希望能帮助到你，

安德鲁

# c# - itextsharp：获取所有页面中的表头

> ID：14789644
> 
> 赞同：2
> 
> 时间：2013-02-09T15:33:45.263
> 
> 标签：c#, .net, itextsharp

我在下面有这段代码，请帮我在每一页中重复表格标题。我在网上尝试了几个可用的选项，但它们不起作用。我是第一次使用 ItextSharp。谢谢

```
 int columns = gv.Columns.Count;
    int rows = gv.Rows.Count;
    int tableRows = rows + 3;   
    string flName = "";

    if (gv.ID == "gvShares")
    {
        flName = "Share_Statement.pdf";
    }

    if (gv.ID == "gvSavingAccStmt")
    {
        flName = "Main_Saving_Account_Statement.pdf";
    }

    Document Doc = new Document();
    PdfWriter.GetInstance(Doc, Response.OutputStream);
    Doc.Open();

    BaseFont bfTimes = BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.CP1252, false);
    Font times = new Font(bfTimes, 9, Font.NORMAL, Color.BLACK);

    //string imageFilePath = HttpContext.Current.Server.MapPath("/Image/Sacco_Logo.jpg");

    string test = System.Web.HttpContext.Current.Server.MapPath(".");

    string substr = test.Remove(test.Length - 6);

    //string imageFilePath = "\\app\\Image\\Sacco_Logo.jpg";//"\\app\\Image\\Sacco_Logo.jpg";
    iTextSharp.text.Image jpg = iTextSharp.text.Image.GetInstance(substr + "\\Image\\Sacco_Logo.jpg");

    //Resize image depend upon your need
    jpg.ScaleToFit(75f, 75f);

    jpg.SpacingAfter = 10f;

    jpg.Alignment = Element.ALIGN_LEFT;

    //Doc.Add(jpg);

    PdfPTable table = new PdfPTable(1);
    table.DefaultCell.Border = PdfPCell.NO_BORDER;
    table.WidthPercentage = 100;

    PdfPCell cell = new PdfPCell( table.DefaultCell);
    cell.Border = PdfPCell.BOTTOM_BORDER;
    cell.PaddingBottom = 5;

    Phrase phrase = new Phrase();
    phrase.Add(new Chunk(jpg, 0, 0));
    phrase.Add(new Chunk("Kenya Diaspora Sacco"));        
    cell.AddElement( phrase );
    table.AddCell(cell);

    Doc.Add(table);

    Phrase phrNewLine = new Phrase("\n");

    Doc.Add(phrNewLine);

    Paragraph TitlePhrasePh = new Paragraph("Membership Savings Account Statement", times);
    TitlePhrasePh.SetAlignment("Center");        
    Doc.Add(TitlePhrasePh);

    Doc.Add(phrNewLine);

    Paragraph PhUsername = new Paragraph("Name: " + Username, times);
    PhUsername.SetAlignment("Left");
    Doc.Add(PhUsername);

    Paragraph PhAccount = new Paragraph("Account Number: " + AccountNumber, times);
    PhAccount.SetAlignment("Left");
    Doc.Add(PhAccount);

    iTextSharp.text.Table gridViewTable = new iTextSharp.text.Table(columns, tableRows);
    gridViewTable.BorderWidth = 1;
    gridViewTable.BorderColor = new Color(0, 0, 255);
    gridViewTable.Cellpadding = 1;
    gridViewTable.Cellspacing = 1;

    gridViewTable.AddCell(new Paragraph("Date", times));
    gridViewTable.AddCell(new Paragraph("Type", times));
    gridViewTable.AddCell(new Paragraph("Description", times));

    if (gv.ID == "gvShares")
    {
        gridViewTable.AddCell(new Paragraph("Sell[KHSH]", times));
    }

    gridViewTable.AddCell(new Paragraph("Debit[KHSH]", times));

    if (gv.ID == "gvShares")
    {
        gridViewTable.AddCell(new Paragraph("Buy[KHSH]", times));
    }

    gridViewTable.AddCell(new Paragraph("Credit[KHSH]", times));

    if (gv.ID == "gvShares")
    {
        gridViewTable.AddCell(new Paragraph("Balance", times));
    }
    else if (gv.ID == "gvSavingAccStmt")
    {
        gridViewTable.AddCell(new Paragraph("Balance[KHSH]", times));
    }

    for (int rowCounter = 0; rowCounter < rows; rowCounter++)
    {
        for (int columnCounter = 0; columnCounter < columns; columnCounter++)
        {
            string strValue = gv.Rows[rowCounter].Cells[columnCounter].Text;
            gridViewTable.AddCell(new Paragraph(strValue, times));
        }
    }

    Doc.Add(gridViewTable);
    Doc.Close();
    Response.ContentType = "application/pdf";
    Response.AddHeader("content-disposition", "attachment; filename=" + flName);
    Response.End(); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-11T06:49:05.517

您需要使用对象的`HeaderRows`属性`PdfPTable`。

```
PdfPTable table = new PdfPTable(1);
table.HeaderRows = 1; 
```

将`HeaderRows`属性设置为 value`n`后，您添加到表中的下一`n`行将被视为标题行，并将在每个新页面上重复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-01T16:04:51.770

像这样：

```
 PdfPTable table = new PdfPTable(12);
        table.HeaderRows = 1; /*---->> this property repeats the headers of an iTextSharp PdfPTable on each page */
        table.TotalWidth = 900f;
        table.LockedWidth = true;
        //table.HorizontalAlignment = 0;
        float[] widths = new float[] { 20f, 32f, 13f, 24f, 20f, 20f, 30f, 15f, 15f, 20f, 20f, 60f };
        table.SetWidths(widths); 
```

# javascript - 使用 css/js 检测数字或字母

> ID：14789645
> 
> 赞同：0
> 
> 时间：2013-02-09T15:33:49.637
> 
> 标签：javascript

我想检测并设置特殊字母的样式。例如这样的：

> 身体[“p”]/身体[“2”]

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:52:05.307

您可以通过一个相当简单的替换逐个节点地执行此操作，但它不会很好地扩展。

鉴于标记：

```
<p>Peter Rabbit ate all of Potter's pickling cukes.</p> 
```

如果您想为该文本中的所有字母**p添加样式，您可以选择段落节点并在任何****p**周围添加跨度（假设单个段落）：

```
var graf = document.getElementsByTagName('p')[0];
graf.innerHTML = graf.innerText.replace(/(p)/gi,'<span class="fancy">$1</span>'); 
```

也就是说，这只适用于纯文本节点；例如，如果您在`span`标签中已经有一个`p`标签，它会被替换弄乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T15:40:07.177

你不能使用 CSS。唯一的非元素（css-created）[伪元素](http://www.w3.org/TR/selectors/#pseudo-elements)是`::first-line`and `::first-letter`。

但是，您可以使用 JS 通过 DOM 进行搜索，并在要突出显示的字母周围创建标签。使用正则表达式和 javascript检查[html 中的突出显示词 - 几乎就在那里](https://stackoverflow.com/q/10416643/1048572)如何做到这一点。

# java - 准确计时函数运行所需的时间

> ID：14789646
> 
> 赞同：0
> 
> 时间：2013-02-09T15:33:51.663
> 
> 标签：java, queue

我正在尝试记录将特定数量的字符串入队和出队到链表队列所花费的时间。

如果我手动设置字符串的数量，则每次运行程序时都会返回或多或少相同的经过时间。

但是，如果我要求用户输入（如下所示），并输入相同的数字，则程序运行大多数时间需要两倍的时间。我不明白这是怎么发生的，因为直到调用排队和出队函数之前我才启动计时器。

```
public static void main(String[], args){
    long start, elapsed;
    int num = Integer.parseInt(javax.swing.JOptionPane.showInputDialog("State the number of elements to queue:"));
    System.out.println("Processing " + num + " strings..."); 

    Queue lq = new LinkedQueue();

    // timing section
    start = System.nanoTime();    
    testQueue(num, lq);
    elapsedTime = System.nanoTime() - start;
} 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:47:52.850

您期待确定性行为，我猜您是在具有正常操作系统的 PC 上运行该程序。所以不可能期望确切的时间，主要是因为：

1.  你正在运行一个虚拟机来执行 java 代码
2.  VM 在操作系统中运行。

虚拟机做你无法控制的事情，操作系统也一样。因此，除非您在适当的环境中运行程序，否则您只能粗略猜测您的程序将花费多少时间来执行。

垃圾收集器可能会在执行过程中中断您的程序，或者调度程序可能会将您安排到另一个更重要的进程，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:43:39.193

没有更多信息很难说。很可能是等待用户输入以某种方式阻止了 JIT 编译器编译该函数，并且它最终被解释并花费了更长的时间。

# php - joomla 3.0 中的每个模板有多个文本分隔符样式

> ID：14789650
> 
> 赞同：0
> 
> 时间：2013-02-09T15:34:02.393
> 
> 标签：php, joomla, joomla-extensions, joomla3.0, joomla-module

让我先解释一下我要做什么。在 joomla 3.0 中，我为我的模板[http://docs.joomla.org/Help30:Menus_Menu_Item_Text_Separator](http://docs.joomla.org/Help30:Menus_Menu_Item_Text_Separator)创建了一个 Menu_Item_Text_Separator 覆盖。似乎 joomla 只能识别每个模板一个默认的文本分隔符，如果您只想要一个就可以了。但理想情况下，我希望可以选择在我的模板文件夹中选择自定义文件夹以及 joomla 识别的默认文件夹。通知您这是我为实现它所做的工作。

1.  在我的模板中，我有一个名为 html 的文件夹，其中有一个名为 mod_menu 的文件夹。
2.  在 mod_menu 文件夹中，我有名为 .php 的文件：

default_separator.php custom_separator.php

1.  然后我进入菜单管理器并编辑要为其显示文本分隔符的菜单项。
2.  然后我转到“模板样式” [http://docs.joomla.org/Help30:Menus_Menu_Item_Text_Separator](http://docs.joomla.org/Help30:Menus_Menu_Item_Text_Separator)并查找我的自定义样式。但我只能选择默认的。

所以我想知道这是否是 joomla 的工作方式，每个模板只能有一个默认值。但是有可能不止一个吗？

欢迎任何建议。

问候

w9914420

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:44:06.683

抱歉，评论太长了。

好吧，让我们从头开始。模板在 templateDetails.xml 文件中定义了一组参数。模板样式是简单的记录，其中包含有关模板的信息和您选择的参数选项数组。您可以为给定模板制作任意数量的模板样式。每个样式都有自己的名称。在菜单中，您可以选择任何样式并将其分配给菜单项。……

您所说的与模板样式无关。您正在谈论为 mod_menu 使用布局覆盖。因为您使用的是与核心布局文件同名的文件，所以您应该得到 1:1 的替换。

根据我对您想要做什么的理解，您应该为 default_separator 和 default.php 创建一个新的命名替换项。那是因为替代布局字段将寻找 default.php 的替代品，比如 yourname.php ，然后在该替代品中，当您加载名为 separator 的模板时，它会自动寻找 yourname_separator 而不是 default_separator 因为它假定您正在追加_separator 到基本名称。如果你这样做，它有一些优点，例如你将能够制作更复杂的布局，并且它允许你有条件地加载不同的子布局，例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T06:21:10.507

我认为您将模板样式与菜单模块的样式混淆了。除非您的模板中有一个参数指定了 mod_menu 布局的选择，否则模板样式对您没有帮助。转到模块管理器并选择您想要应用样式的模块。使用该字段选择所需的布局。或者，如果它是 css 样式，请使用 style 选项。也可能是您真正想要的是应用模块 chrome。这可以通过编辑模块来完成。如果您想拥有具有不同布局或样式的相同菜单，您可能需要为该菜单制作额外的模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T18:14:24.110

我重新思考了我想要做什么。我试图做的事情无法通过我希望的方法来实现——为那个文本分隔符创建一个模板是不切实际的，尽管我现在已经发现了如何将模板参数值输入到布局覆盖中。

谢谢艾琳的时间

问候 w9914420

# c# - 我绝对需要在每个 MSHTML 对象上调用 ReleaseComObject 吗？

> ID：14789652
> 
> 赞同：7
> 
> 时间：2013-02-09T15:34:21.247
> 
> 标签：c#, com, mshtml

我将 MSHTML 与 WebBrowser 控件一起使用，因为它使我可以访问 WebBrowser 不具备的内容，例如文本节点。我在这里和网络上看到过一些帖子，人们说您必须`ReleaseComObject`为您引用的每个 COM 对象调用。所以，假设我这样做：

`var doc = myBrowser.Document.DomDocument as IHTMLDocument2;`

我需要释放`doc`吗？如何`body`在此代码中：

`var body = (myBrowser.Document.DomDocument as IHTMLDocument2).body;`

这些对象不是由 RCW 包装的，一旦不再引用它们就会释放它们吗？如果不是，最好使用终结器（而不是使用 Dispose）为它们中的每一个创建一个包装器，该终结器会在垃圾收集器启动后立即释放它们（这样我就不需要担心手动处置它们）？

问题是，我的应用程序有内存泄漏，我相信与此有关。根据 ANTS 内存分析器，其中一个函数（以及许多其他碰巧使用 MSHTML 对象的函数）持有对一组`Microsoft.CSharp.RuntimeBinder.Semantics.LocalVariableSymbol`对象的引用，这些对象位于第 2 代中使用内存的对象的顶部列表中：

```
internal static string GetAttribute(this IHTMLDOMNode element, string name)
{
    var attribute = element.IsHTMLElement() ? ((IHTMLElement)element).getAttribute(name) : null;
    if (attribute != null) return attribute.ToString();
    return "";
} 
```

不知道这里出了什么问题，因为`attribute`只是一个字符串。

这是 ANTS profiler 的 Instance Retention Graph 上显示的另一个函数（我添加了一堆`FinalReleaseComObject`s 但仍然显示）：

```
private void InjectFunction(IHTMLDocument2 document)
{
    if (null == Document) throw new Exception("Cannot access current document's HTML or document is not an HTML.");

    try
    {
        IHTMLDocument3 doc3 = document as IHTMLDocument3;
        IHTMLElementCollection collection = doc3.getElementsByTagName("head");
        IHTMLDOMNode head = collection.item(0);
        IHTMLElement scriptElement = document.createElement("script");
        IHTMLScriptElement script = (IHTMLScriptElement)scriptElement;
        IHTMLDOMNode scriptNode = (IHTMLDOMNode)scriptElement;
        script.text = CurrentFuncs;
        head.AppendChild(scriptNode);
        if (Document.InvokeScript(CurrentTestFuncName) == null) throw new Exception("Cannot inject Javascript code right now.");
        Marshal.FinalReleaseComObject(scriptNode);
        Marshal.FinalReleaseComObject(script);
        Marshal.FinalReleaseComObject(scriptElement);
        Marshal.FinalReleaseComObject(head);
        Marshal.FinalReleaseComObject(collection);
        //Marshal.FinalReleaseComObject(doc3);
    }
    catch (Exception ex)
    {
        throw ex;
    }
} 
```

我添加了，`ReleaseComObject`但该函数似乎仍然持有对某些东西的引用。这是我的函数现在的样子：

```
private void InjectFunction(IHTMLDocument2 document)
{
    if (null == Document) throw new Exception("Cannot access current document's HTML or document is not an HTML.");

    try
    {
        IHTMLDocument3 doc3 = document as IHTMLDocument3;
        IHTMLElementCollection collection = doc3.getElementsByTagName("head");
        IHTMLDOMNode head = collection.item(0);
        IHTMLElement scriptElement = document.createElement("script");
        IHTMLScriptElement script = (IHTMLScriptElement)scriptElement;
        IHTMLDOMNode scriptNode = (IHTMLDOMNode)scriptElement;
        script.text = CurrentFuncs;
        head.AppendChild(scriptNode);
        if (Document.InvokeScript(CurrentTestFuncName) == null) throw new Exception("Cannot inject Javascript code right now.");
        Marshal.FinalReleaseComObject(scriptNode);
        Marshal.FinalReleaseComObject(script);
        Marshal.FinalReleaseComObject(scriptElement);
        Marshal.FinalReleaseComObject(head);
        Marshal.FinalReleaseComObject(collection);
        Marshal.ReleaseComObject(doc3);
    }
    catch (Exception ex)
    {
        MessageBox.Show("Couldn't release!");
        throw ex;
    }
} 
```

这`MessageBox.Show("Couldn't release!");`条线永远不会被击中，所以我认为一切都已正确发布。以下是 ANTS 显示的内容：

![ANTS 内存分析器截图](../Images/2694a2f9e923d0cd3c3f8c79872985d0.png)

我不知道那个站点容器是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T15:51:20.667

RCW 将在 RCW 完成后释放 COM 对象，因此您无需创建执行此操作的包装器。你打电话`ReleaseComObject`是因为你不想等待最终确定；这与 Dispose 模式的基本原理相同。所以创建可以`Dispose`d 的包装器不是一个坏主意（并且有一些例子

对于，您还应该在一个单独的变量中`var doc = myBrowser.Document.DomDocument ...;`捕获它。任何时候你引用一个 COM 对象的属性来产生另一个对象，确保释放它。`.Document``ReleaseComObject`

在`GetAttribute`中，您将元素投射到另一个界面。在 COM 编程中，[这增加了另一个引用](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682521%28v=vs.85%29.aspx). 你需要做类似的事情，`var htmlElement = (IHTMLElement) element;`这样你也可以发布它。

**编辑**- 这是使用 COM 对象时使用的模式：

```
IHTMLElement element = null;
try
{
    element = <some method or property returning a COM object>;
    // do something with element
}
catch (Exception ex) // although the exception type should be as specific as possible
{
    // log, whatever

    throw; // not "throw ex;" - that makes the call stack think the exception originated right here
}
finally
{
    if (element != null)
    {
        Marshal.ReleaseComObject(element);
        element = null;
    }
} 
```

这确实应该为您拥有的每个 COM 对象引用完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T20:43:06.340

也许这篇文章带来了一些启示：

[MSDN 关于 COM 引用计数的工作原理以及调用 AddRef 和 Release 时的一些基本规则](http://support.microsoft.com/kb/104138/en-us)

在您的情况下， Release 是 ReleaseComObject

# facebook - Facebook App - 获取用户总数

> ID：14789655
> 
> 赞同：4
> 
> 时间：2013-02-09T15:35:04.223
> 
> 标签：facebook, facebook-javascript-sdk, facebook-php-sdk

我已经创建了 Facebook 应用程序。我想显示使用我的应用程序的用户总数。如何获取应用程序用户总数？

注意：使用 javascript 或 php sdk

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T15:52:41.903

查看 Facebook 图形 API 文档：

[http://developers.facebook.com/docs/reference/api/insights/](http://developers.facebook.com/docs/reference/api/insights/)

例子 ：

> [https://graph.facebook.com/2439131959](https://graph.facebook.com/2439131959)
> 
> [https://graph.facebook.com/YOUR-APP-ID/insights/application_active_users?since=1329724800&until=1329984000](https://graph.facebook.com/YOUR-APP-ID/insights/application_active_users?since=1329724800&until=1329984000)

# matlab - 将 MATLAB 链接到 DLL 库

> ID：14789656
> 
> 赞同：5
> 
> 时间：2013-02-09T15:35:33.047
> 
> 标签：matlab, dll

我正在尝试从 MATLAB 工具包“ [oscmex](http://sourceforge.net/projects/oscmex) ”中执行一些示例代码。该工具包允许通过 MATLAB 使用 OSC 协议进行通信。我认为这个问题是不具体的；它应该适用于以这种方式设置的*任何工具包。*

撇开原因不谈，我在启动和运行工具包时遇到了一些简单的麻烦。该工具包没有任何文档。只是一组六个 DLL 文件（在一个目录中）和一组四个 MATLAB '.m' 示例代码文件（在另一个目录中）。我过去使用的每个工具包要么是内置工具包，要么具有直观（半自动）的安装过程。

下载工具包后，我尝试的第一件事是简单地运行一个“.M”示例代码。这失败了，因为代码的第一行包含函数*osc()*，MATLAB（当前）无法识别该函数。

所以，我想也许我需要将“.M”文件移动到与 DLL 相同的文件夹中；也许 MATLAB 会看到 DLL 中的函数。没有骰子。

所以，我意识到我必须在启动时以某种方式将 MATLAB 链接到 DLL。我尝试将 DLL 添加到文件夹并在“pathdef.m”文件中添加一个条目。这也失败了。

我在某处读过我可以使用*loadlibrary()*函数加载 DLL 文件。因此，我尝试对 DLL 文件执行此操作。这在第一个文件上失败了：

```
>> loadlibrary('osc_free_address.dll')

Error using loadlibrary>lFullPath (line 587)
Could not find file osc_free_address.h. 
```

我开始用尽选项...如何启动并运行这组 DLL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:45:06.667

浏览这个库的[网页](http://sourceforge.net/projects/oscmex)，这些 DLL 似乎只是[mex](http://www.mathworks.com/help/matlab/creating-c-c-and-fortran-programs-to-be-callable-from-matlab-mex-files.html)文件的**旧形式。** 因此，它们不应**在**共享库的上下文中使用（例如，使用and ），而应直接编译为 mex 文件。
**`loadlibrary``calllib`**

 **为此，我建议采取以下步骤：

1.  确保你为你的 Matlab 配置了一个可以工作的 mex 编译器。
    在 matlab 中，键入：

    ```
    >> mex -setup 
    ```

    这将指导您完成配置过程。我了解您正在使用 Windows 机器，我通常使用 Visual Studio 编译器 - 最适合我。

2.  这个库的 README 文件表明 OSC

    > 需要 liblo 0.22 或更高版本。见[http://plugin.org.uk/liblo/](http://plugin.org.uk/liblo/)

    确保您拥有此库并且它位于您的内部`LD_LIBRARY_PATH`（例如，有关详细信息，请参见[this question](https://stackoverflow.com/questions/2188658/shared-library-locations-for-matlab-mex-files)或[mex docs](http://www.mathworks.com/help/matlab/creating-c-c-and-fortran-programs-to-be-callable-from-matlab-mex-files.html)）。

3.  [从他们的存储库](http://sourceforge.net/p/oscmex/code/4/tree/trunk/src/)中获取OSC 库的**源**代码。

4.  使用 matlab 编译源代码

    ```
    >> mex -O -largeArrayDims osc_free_address.c
    >> mex -O -largeArrayDims osc_free_server.c 
    ```

    对于所有 7 个 c 源文件，依此类推。在对 c 文件进行混合后，您将拥有可以从 Matlab 运行的 mex 文件，就好像它们是常规函数一样。正如 Andrew Mao 所建议的，您可能会发现使用[库的 make 文件](http://sourceforge.net/p/oscmex/code/4/tree/trunk/src/osc_make.m)
    很有用。

祝你好运，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:42:50.610

如果您查看该软件的构建，它正在编译 mex 文件，而不是 DLL（共享库）：http: [//sourceforge.net/p/oscmex/code/4/tree/trunk/src/osc_make.m](http://sourceforge.net/p/oscmex/code/4/tree/trunk/src/osc_make.m)。

我会尝试使用 mex 命令而不是 dll 命令（也许文件只是名称错误。）更好的是，我会使用源代码中的构建文件自己用 mex 编译文件。

请注意，说明还说您需要 liblo-0.22 才能运行该库，因此请确保您也可以访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:19:31.190

尝试将扩展名从 .dll 更改为 .mexw32（在 win32 中）或 .wexw64（在 win64 中）。这是一个很长的镜头，但它可能会奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T05:53:46.643

我查看了您的 OSC 工具包。似乎它们是由 MATLAB mex 编译的。但是，没有提到它们是为哪种架构建造的。您可以`mexext`在 MATLAB 命令提示符处键入以查找 MATLAB mex 文件的扩展名。然后，将 DLL 扩展名更改为给定的扩展名。如果原始 mex 与您的 matlab 兼容，则 MATLAB 可以轻松访问 DLL。只需确保将文件夹添加到您的 MATLAB 路径即可。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-12T05:14:12.840

共享库不能直接使用。正如您所提到的，您需要使用`loadlibrary`. 根据文档，`loadlibrary`需要两个参数（至少）。第一个参数是文件名，第二个参数是包含函数和外部变量定义的头文件。如果您不提供头文件，MATLAB 会查找与 DLL 同名的文件。话虽如此，您需要有权访问头文件，或者至少如果您知道函数的外观，则需要为 DLL 编写头文件。

我在 MATLAB 中使用过 DLL。只要涉及到 DLL，MATLAB 就不是很友好。特别是，如果 DLL 是用 C（或 C++）以外的语言编写的，您将无法将函数加载到 MATLAB 中。

此外，MATLAB 只能支持一些特定的 DLL。根据您的 MATLAB 版本，您需要了解 MATLAB 是否支持共享库。看看[这里](http://www.mathworks.com/support/compilers/R2012a/win64.html)

简而言之，将 DLL 加载到 MATLAB 中并不容易。您需要从 DLL 获得一些信息。**

# ruby-on-rails - has_many 关系为空的 Activerecord 请求

> ID：14789660
> 
> 赞同：0
> 
> 时间：2013-02-09T15:36:00.023
> 
> 标签：ruby-on-rails, postgresql

我正在尝试进行数据库查询，它只返回 has_many 关系不为空的结果。下面是 has_many :gift_images 的示例：

```
Gift.joins(:gift_images).includes(:gift_images, :comments, :category, :user).select("gifts.*, COUNT(gift_images.id) AS gcount").where("gcount > 0") 
```

类似的东西，但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:39:20.417

您不能在 where 语句上使用别名，请尝试以下操作

```
Gift.where("(SELECT COUNT(*) FROM gift_images WHERE gift_images.gift_id = gifts.id) > 0") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T16:35:10.490

我更喜欢尽可能减少数据库查询的“SQL-ish”。

```
Gift.where(id: GiftImage.where('gift_id IS NOT NULL').select('gift_id') ).count 
```

# git - 将存储库从 git 导入到 gerrit

> ID：14789666
> 
> 赞同：29
> 
> 时间：2013-02-09T15:36:41.030
> 
> 标签：git, gerrit

我有两个关于 Gerrit 的问题：

1.  **如何将现有的 Git 存储库转换或导入 Gerrit 的格式？**有很多没有 Gerrit 控制的提交，我想简单地将这些提交推送到 Gerrit 项目中。

    我看到了两种方法：

    1.  将现有的裸 Git 目录复制到 Gerrit，然后将其添加到数据库。这是一种安全的方法吗？

    2.  将所有提交从我的本地存储库推送到 gerrit 存储库。

2.  **如何将存储库从 Gerrit 恢复为原始 Git 格式？**是否需要删除 Gerrit 的特殊`*/for/*`分支才能做到这一点？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-09T16:08:24.610

首先：没有特殊的“Gerrit 格式”。Gerrit 使用常规的 git 存储库。

1.  在 Gerrit 中创建一个新项目（无需初始提交）。将创建的存储库作为远程添加到现有存储库并简单地推送。您可以将 Gerrit 配置为允许直接推送到存储库（绕过审查），从而允许您导入整个存储库。

    或者，如果您可以直接访问 Gerrit 的存储库位置（例如，通过 SSH 或在本地文件系统上），您可以直接推送到存储库（无论 Gerrit 创建它的位置），完全绕过 Gerrit。但是，之后您需要刷新 Gerrit 缓存，以便 Gerrit 注意到存储库 HEAD 已更新。

2.  如前所述，没有“Gerrit 格式”。只需从 gerrit 克隆您的存储库，一切都很好。您无需担心任何特殊分支。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-25T11:07:02.237

我将很多git项目导入gerrit，我发现最简单的方法是将git存储库的xy.git目录复制到gerrit存放git repos的目录。gerrit 进程重新启动后，新项目在新项目列表中，您可以编辑描述和访问权限。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-09T16:00:11.287

1.  只需在 Gerrit 中创建新项目，然后将 git 存储库推送到那里。如果你想绕过审查，直接推送到 master 而不是 refs/for/master。您需要为自己添加执行此操作的权限。

    我认为错误消息可能是由于您尚未将 ssh 密钥导入 Gerrit 造成的。

2.  只需从 Gerrit 克隆存储库。它不会包含任何额外的分支。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-01T19:36:37.113

附加信息...

因此，您可以将 git 存储库直接复制到 gerrit 数据位置，它会在重新启动（或刷新缓存 (reindex)）后显示。

但是您将丢失存储库中的重要配置，这可能会阻止推送、创建分支、审查等功能。

如果你查看 repo，你会发现它缺少 'refs/meta/config' 分支。因此，在没有更改的正常系统中，这将继承自所有项目，但这可能是您配置中的任何项目。

修复配置的步骤：

1.  项目清单
2.  复制 git 仓库
3.  刷新缓存/重启gerrit/reindex
4.  从项目列表视图中打开 repo
5.  点击分支
6.  在修订版“HEAD”处输入“refs/meta/config”的新分支名称
7.  从项目常规视图中单击“编辑配置”。
8.  这会在此分支中创建一个文件 (project.config) 用于配置。添加一些默认配置，或者取自工作存储库，或者如下所示：

例如

```
[access]
   inheritFrom = All-Projects 
```

9.  单击保存，然后单击关闭。
10.  点击评论（给它+2）
11.  单击 Publish Edit 将此更改保存到 gerrit。

您现在可以像其他项目一样使用具有合理继承配置的存储库。

# python - 在 Flask 中按文件分离 SQLAlchemy 模型

> ID：14789668
> 
> 赞同：50
> 
> 时间：2013-02-09T15:37:17.643
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

我见过的许多 Flask 应用程序示例将模型直接存储在主应用程序文件[中](http://maximebf.com/blog/2012/10/building-websites-in-python-with-flask/)（[http://pythonhosted.org/Flask-SQLAlchemy/quickstart.html，http://maximebf.com/blog/2012/10/](http://pythonhosted.org/Flask-SQLAlchemy/quickstart.html)[用flask/在python中构建网站](http://maximebf.com/blog/2012/10/building-websites-in-python-with-flask/)）。其他的（[http://flask.pocoo.org/docs/patterns/sqlalchemy/](http://flask.pocoo.org/docs/patterns/sqlalchemy/)）有一个“models.py”文件，其中放置了模型。

如何让我的 Flask 应用程序从单独的文件（例如“User.py”）导入模型？当我尝试使用以下内容创建 User.py 文件时：

```
from app import db

class User(db.Model):
    [...] 
```

我收到以下错误：

```
File "/Users/stackoverflow/myapp/models/User.py", line 1, in <module>
from app import db
ImportError: No module named app 
```

当我插入`from models import User`我的模块文件时。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-09T16:14:25.453

这个答案非常有帮助：[https](https://stackoverflow.com/a/9695045/353878) ://stackoverflow.com/a/9695045/353878 。

我不需要立即初始化数据库。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-02-09T15:50:53.623

```
from app.database import Base

class User(Base):
__tablename__ = 'users' 
```

应该是这样吗？？

# javascript - 如何在 mvc razor 中交替 2 onchange() 函数？

> ID：14789670
> 
> 赞同：-1
> 
> 时间：2013-02-09T15:37:29.940
> 
> 标签：javascript, jquery, asp.net-mvc, onchange, cascadingdropdown

我有级联下拉列表，我应该在每个`onchange()`事件中将表单数据发送到控制器。这就是为什么我应该对`onchange()`下拉列表事件进行 2 种不同的操作。

**1）这会在 dropdowlists 的每个 onchange() 事件中向控制器发送数据：（这是我的第一个下拉列表）**

```
@Html.DropDownListFor(model => model.CategoryId, ViewBag.CategoryList as IEnumerable<SelectListItem>, "-",
 new { id = "CategoryDDL", onchange = "$('#MyForm').trigger('submit');" }) 
```

**2）这是用于级联下拉列表：**

```
<script type="text/javascript">
    $(function () {
        $("#CategoryDDL").change(
        function () {
            loadLevelTwo(this);
        });
        loadLevelTwo($("#CategoryDDL"));
    });

function loadLevelTwo(selectList) {
       // my some code...
    }
</script> 
```

在这种情况下，当我更改 `CategoryDDL` 下拉列表时，会混合 2 个操作。它试图一起做 2 个操作。

我想替换它们。首先是级联操作，然后是数据提交操作。我怎样才能做到这一点？

**编辑：**

没有`loadLevelTwo()`功能，一切正常：当我更改下拉列表时，请求转到控制器以过滤产品。然后我添加`loadLevelTwo()`了级联下拉列表。因为我有 2 个下拉列表。我想当我更改第一个下拉列表时，第二个下拉列表会自动更新。我的脚本就是这样做的。但是，这些事件混合在一起。在控制器中，我有过滤级联下拉列表的操作：

```
public ActionResult FilterProducts(CriteriaModel model) {} 
```

和

```
public ActionResult GetSubCategoryByCategoryId(int id) {} 
```

这些方法同时起作用。一条线在任何行动中起作用，然后进入其他行动。然后返回第一个动作，因此，当动作返回视图时，它被包围。我在函数之后发送表单`loadLevelTwo()`，但它不能解决问题：

```
 loadLevelTwo($("#CategoryDDL"));
    $('#MyForm').trigger('submit'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:46:13.633

我会摆脱服务器端的 onchange 并在 clienside 上做所有事情：

```
$(function () {
        $("#CategoryDDL").change(
        function () {
            loadLevelTwo(this);
        });
        loadLevelTwo($("#CategoryDDL"));
        $('#MyForm').trigger('submit');
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T17:00:46.373

目前还不清楚你要求做什么。如果您只是想提交表单并调用`loadLevelTwo`，您可以通过脚本中的单个绑定来实现（并`onchange`从 razor 中删除）：

```
$(function () {
    $("#CategoryDDL").on('change', function() {
        loadLevelTwo(this); // load the next level

        $("#MyForm").submit(); // submit the form
    });
}); 
```

这将连续完成这两项任务。

# macos - 为什么 host_statistics64() 返回不一致的结果？

> ID：14789672
> 
> 赞同：18
> 
> 时间：2013-02-09T15:37:36.710
> 
> 标签：macos, memory, darwin, mach

为什么 OS X 10.6.8 中的 host_statistics64() （我不知道其他版本是否有这个问题）返回的免费、活动、非活动和有线内存的计数加起来不等于 ram 的总量？为什么它缺少不一致的页数？

以下输出表示十秒内未分类为空闲、活动、非活动或有线的页面数（大约每秒采样一次）。

```
458
243
153
199
357
140
304
93
181
224 
```

产生上述数字的代码是：

```
#include <stdio.h>
#include <mach/mach.h>
#include <mach/vm_statistics.h>
#include <sys/types.h>
#include <sys/sysctl.h>
#include <unistd.h>
#include <string.h>

int main(int argc, char** argv) {
        struct vm_statistics64 stats;
        mach_port_t host    = mach_host_self();
        natural_t   count   = HOST_VM_INFO64_COUNT;
        natural_t   missing = 0;
        int         debug   = argc == 2 ? !strcmp(argv[1], "-v") : 0;
        kern_return_t ret;
        int           mib[2];
        long          ram;
        natural_t     pages;
        size_t        length;
        int           i;

        mib[0] = CTL_HW;
        mib[1] = HW_MEMSIZE;
        length = sizeof(long);
        sysctl(mib, 2, &ram, &length, NULL, 0);
        pages  = ram / getpagesize();

        for (i = 0; i < 10; i++) {
                if ((ret = host_statistics64(host, HOST_VM_INFO64, (host_info64_t)&stats, &count)) != KERN_SUCCESS) {
                        printf("oops\n");
                        return 1;
                }

                /* updated for 10.9 */
                missing = pages - (
                        stats.free_count     +
                        stats.active_count   +
                        stats.inactive_count +
                        stats.wire_count     +
                        stats.compressor_page_count
                );

                if (debug) {
                        printf(
                                "%11d pages (# of pages)\n"
                                "%11d free_count (# of pages free) \n"
                                "%11d active_count (# of pages active) \n"
                                "%11d inactive_count (# of pages inactive) \n"
                                "%11d wire_count (# of pages wired down) \n"
                                "%11lld zero_fill_count (# of zero fill pages) \n"
                                "%11lld reactivations (# of pages reactivated) \n"
                                "%11lld pageins (# of pageins) \n"
                                "%11lld pageouts (# of pageouts) \n"
                                "%11lld faults (# of faults) \n"
                                "%11lld cow_faults (# of copy-on-writes) \n"
                                "%11lld lookups (object cache lookups) \n"
                                "%11lld hits (object cache hits) \n"
                                "%11lld purges (# of pages purged) \n"
                                "%11d purgeable_count (# of pages purgeable) \n"
                                "%11d speculative_count (# of pages speculative (also counted in free_count)) \n"
                                "%11lld decompressions (# of pages decompressed) \n"
                                "%11lld compressions (# of pages compressed) \n"
                                "%11lld swapins (# of pages swapped in (via compression segments)) \n"
                                "%11lld swapouts (# of pages swapped out (via compression segments)) \n"
                                "%11d compressor_page_count (# of pages used by the compressed pager to hold all the compressed data) \n"
                                "%11d throttled_count (# of pages throttled) \n"
                                "%11d external_page_count (# of pages that are file-backed (non-swap)) \n"
                                "%11d internal_page_count (# of pages that are anonymous) \n"
                                "%11lld total_uncompressed_pages_in_compressor (# of pages (uncompressed) held within the compressor.) \n",
                                pages, stats.free_count, stats.active_count, stats.inactive_count,
                                stats.wire_count, stats.zero_fill_count, stats.reactivations,
                                stats.pageins, stats.pageouts, stats.faults, stats.cow_faults,
                                stats.lookups, stats.hits, stats.purges, stats.purgeable_count,
                                stats.speculative_count, stats.decompressions, stats.compressions,
                                stats.swapins, stats.swapouts, stats.compressor_page_count,
                                stats.throttled_count, stats.external_page_count,
                                stats.internal_page_count, stats.total_uncompressed_pages_in_compressor
                        );
                }

                printf("%i\n", missing);
                sleep(1);
        }

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-04-08T20:40:59.783

**TL;博士：**

*   `host_statistics64()`从不同来源获取信息，这可能会花费时间并可能产生不一致的结果。
*   `host_statistics64()`通过名称类似的变量获取一些信息`vm_page_foo_count`。但并非所有这些变量都被考虑在内，例如`vm_page_stolen_count`不是。
*   众所周知，`/usr/bin/top`将*被盗页面添加到**有线页面*的数量中。这是一个指标，表明在计算页数时应考虑这些页数。

**笔记**

*   我正在使用*Darwin Kernel Version 16.5.0 xnu-3789.51.2~3/RELEASE_X86_64 x86_64 开发*macOS 10.12，但所有行为都是完全可重现的。
*   我将链接很多我在我的机器上使用的 XNU 版本的源代码。可以在这里找到：[xnu-3789.51.2](https://opensource.apple.com/source/xnu/xnu-3789.51.2/)。
*   您编写的程序与(and )`/usr/bin/vm_stat`的包装器基本相同。相应的源代码可以在这里找到：[system_cmds-496/vm_stat.tproj/vm_stat.c](https://opensource.apple.com/source/system_cmds/system_cmds-496/vm_stat.tproj/vm_stat.c.auto.html)。`host_statistics64()``host_statistics()`

**如何`host_statistics64()`适应 XNU 以及它是如何工作的？**

正如 Widley 所知，OS X 内核被称为*XNU（**X** NU IS **N** OT **U** NIX）*并且*“是一个混合内核，将卡内基梅隆大学开发的 Mach 内核与来自 FreeBSD 的组件和用于编写称为 IOKit 的驱动程序的 C++ API 相结合。”* （[https://github.com/opensource-apple/xnu/blob/10.12/README.md](https://github.com/opensource-apple/xnu/blob/10.12/README.md)）

虚拟内存管理 (VM) 是*Mach*的一部分，因此`host_statistics64()`位于此处。让我们仔细看看它的实现，它包含在[xnu-3789.51.2/osfmk/kern/host.c](https://opensource.apple.com/source/xnu/xnu-3789.51.2/osfmk/kern/host.c.auto.html)中。

函数签名是

```
kern_return_t
host_statistics64(host_t host, host_flavor_t flavor, host_info64_t info, mach_msg_type_number_t * count); 
```

第一个相关行是

```
[...]
processor_t processor;
vm_statistics64_t stat;
vm_statistics64_data_t host_vm_stat;
mach_msg_type_number_t original_count;
unsigned int local_q_internal_count;
unsigned int local_q_external_count;
[...]
processor = processor_list;
stat = &PROCESSOR_DATA(processor, vm_stat);
host_vm_stat = *stat;

if (processor_count > 1) {
    simple_lock(&processor_list_lock);

    while ((processor = processor->processor_list) != NULL) {
        stat = &PROCESSOR_DATA(processor, vm_stat);

        host_vm_stat.zero_fill_count += stat->zero_fill_count;
        host_vm_stat.reactivations += stat->reactivations;
        host_vm_stat.pageins += stat->pageins;
        host_vm_stat.pageouts += stat->pageouts;
        host_vm_stat.faults += stat->faults;
        host_vm_stat.cow_faults += stat->cow_faults;
        host_vm_stat.lookups += stat->lookups;
        host_vm_stat.hits += stat->hits;
        host_vm_stat.compressions += stat->compressions;
        host_vm_stat.decompressions += stat->decompressions;
        host_vm_stat.swapins += stat->swapins;
        host_vm_stat.swapouts += stat->swapouts;
    }

    simple_unlock(&processor_list_lock);
}
[...] 
```

我们得到`host_vm_stat`which 是 type `vm_statistics64_data_t`。正如`typedef struct vm_statistics64`您在[xnu-3789.51.2/osfmk/mach/vm_statistics.h](https://opensource.apple.com/source/xnu/xnu-3789.51.2/osfmk/mach/vm_statistics.h.auto.html)中看到的那样。[我们从xnu-3789.51.2/osfmk/kern/processor_data.h](https://opensource.apple.com/source/xnu/xnu-3789.51.2/osfmk/kern/processor_data.h.auto.html)`PROCESSOR_DATA()`中定义的 makro 获取处理器信息。我们通过简单地将相关数字相加来填充所有处理器。`host_vm_stat`

如您所见，我们发现了一些众所周知的统计数据，例如`zero_fill_count`或`compressions`但并非全部包含在`host_statistics64()`.

接下来的相关行是：

```
stat = (vm_statistics64_t)info;

stat->free_count = vm_page_free_count + vm_page_speculative_count;
stat->active_count = vm_page_active_count;
[...]
stat->inactive_count = vm_page_inactive_count;
stat->wire_count = vm_page_wire_count + vm_page_throttled_count + vm_lopage_free_count;
stat->zero_fill_count = host_vm_stat.zero_fill_count;
stat->reactivations = host_vm_stat.reactivations;
stat->pageins = host_vm_stat.pageins;
stat->pageouts = host_vm_stat.pageouts;
stat->faults = host_vm_stat.faults;
stat->cow_faults = host_vm_stat.cow_faults;
stat->lookups = host_vm_stat.lookups;
stat->hits = host_vm_stat.hits;

stat->purgeable_count = vm_page_purgeable_count;
stat->purges = vm_page_purged_count;

stat->speculative_count = vm_page_speculative_count; 
```

我们重用`stat`并使其成为我们的输出结构。然后我们用两个被称为和`free_count`的总和来填充。我们以相同的方式收集其他剩余数据（通过使用名为 的变量）或通过获取我们在上面填写的统计数据。`unsigned long``vm_page_free_count``vm_page_speculative_count``vm_page_foo_count``host_vm_stat`

*1\. 结论*我们从不同来源收集数据。来自处理器信息或来自名为`vm_page_foo_count`. 这会花费时间，并且可能会导致一些不一致的问题，因为 VM 是一个非常快速且连续的过程。

让我们仔细看看已经提到的变量`vm_page_foo_count`。它们在[xnu-3789.51.2/osfmk/vm/vm_page.h](https://opensource.apple.com/source/xnu/xnu-3789.51.2/osfmk/vm/vm_page.h.auto.html)中定义如下：

```
extern
unsigned int    vm_page_free_count; /* How many pages are free? (sum of all colors) */
extern
unsigned int    vm_page_active_count;   /* How many pages are active? */
extern
unsigned int    vm_page_inactive_count; /* How many pages are inactive? */
#if CONFIG_SECLUDED_MEMORY
extern
unsigned int    vm_page_secluded_count; /* How many pages are secluded? */
extern
unsigned int    vm_page_secluded_count_free;
extern
unsigned int    vm_page_secluded_count_inuse;
#endif /* CONFIG_SECLUDED_MEMORY */
extern
unsigned int    vm_page_cleaned_count; /* How many pages are in the clean queue? */
extern
unsigned int    vm_page_throttled_count;/* How many inactives are throttled */
extern
unsigned int    vm_page_speculative_count;  /* How many speculative pages are unclaimed? */
extern unsigned int vm_page_pageable_internal_count;
extern unsigned int vm_page_pageable_external_count;
extern
unsigned int    vm_page_xpmapped_external_count;    /* How many pages are mapped executable? */
extern
unsigned int    vm_page_external_count; /* How many pages are file-backed? */
extern
unsigned int    vm_page_internal_count; /* How many pages are anonymous? */
extern
unsigned int    vm_page_wire_count;     /* How many pages are wired? */
extern
unsigned int    vm_page_wire_count_initial; /* How many pages wired at startup */
extern
unsigned int    vm_page_free_target;    /* How many do we want free? */
extern
unsigned int    vm_page_free_min;   /* When to wakeup pageout */
extern
unsigned int    vm_page_throttle_limit; /* When to throttle new page creation */
extern
uint32_t    vm_page_creation_throttle;  /* When to throttle new page creation */
extern
unsigned int    vm_page_inactive_target;/* How many do we want inactive? */
#if CONFIG_SECLUDED_MEMORY
extern
unsigned int    vm_page_secluded_target;/* How many do we want secluded? */
#endif /* CONFIG_SECLUDED_MEMORY */
extern
unsigned int    vm_page_anonymous_min;  /* When it's ok to pre-clean */
extern
unsigned int    vm_page_inactive_min;   /* When to wakeup pageout */
extern
unsigned int    vm_page_free_reserved;  /* How many pages reserved to do pageout */
extern
unsigned int    vm_page_throttle_count; /* Count of page allocations throttled */
extern
unsigned int    vm_page_gobble_count;
extern
unsigned int    vm_page_stolen_count;   /* Count of stolen pages not acccounted in zones */
[...]
extern
unsigned int    vm_page_purgeable_count;/* How many pages are purgeable now ? */
extern
unsigned int    vm_page_purgeable_wired_count;/* How many purgeable pages are wired now ? */
extern
uint64_t    vm_page_purged_count;   /* How many pages got purged so far ? */ 
```

这是很多关于我们只能使用`host_statistics64()`. 这些统计数据中的大部分都在[xnu-3789.51.2/osfmk/vm/vm_resident.c](https://opensource.apple.com/source/xnu/xnu-3789.51.2/osfmk/vm/vm_resident.c.auto.html)中更新。例如，此函数将页面释放到空闲页面列表：

```
/*
*   vm_page_release:
*
*   Return a page to the free list.
*/

void
vm_page_release(
    vm_page_t   mem,
    boolean_t   page_queues_locked)
{
    [...]
    vm_page_free_count++;
    [...]
} 
```

很有趣的是`extern unsigned int vm_page_stolen_count; /* Count of stolen pages not acccounted in zones */`。什么是被盗页面？似乎有一些机制可以从某些列表中取出一个页面，即使它通常不会被分页。这些机制之一是推测页面列表中页面的*年龄。*[xnu-3789.51.2/osfmk/vm/vm_page.h](https://opensource.apple.com/source/xnu/xnu-3789.51.2/osfmk/vm/vm_page.h.auto.html)告诉我们

```
* VM_PAGE_MAX_SPECULATIVE_AGE_Q * VM_PAGE_SPECULATIVE_Q_AGE_MS
* defines the amount of time a speculative page is normally
* allowed to live in the 'protected' state (i.e. not available
* to be stolen if vm_pageout_scan is running and looking for
* pages)...  however, if the total number of speculative pages
* in the protected state exceeds our limit (defined in vm_pageout.c)
* and there are none available in VM_PAGE_SPECULATIVE_AGED_Q, then
* vm_pageout_scan is allowed to steal pages from the protected
* bucket even if they are underage.
*
* vm_pageout_scan is also allowed to pull pages from a protected
* bin if the bin has reached the "age of consent" we've set 
```

确实`void vm_pageout_scan(void)`是增量`vm_page_stolen_count`。[您可以在xnu-3789.51.2/osfmk/vm/vm_pageout.c](https://opensource.apple.com/source/xnu/xnu-3789.51.2/osfmk/vm/vm_pageout.c.auto.html)中找到相应的源代码。

我认为在计算 VM 统计信息时不会考虑被盗页面`host_statistics64()`。

**证明我是对的**

证明这一点的最好方法是手动编译 XNU `host_statistics64()`。我没有机会这样做，但很快就会尝试。

幸运的是，我们并不是唯一对正确的 VM 统计数据感兴趣的人。因此，我们应该看看 well known（ `/usr/bin/top`XNU 中不包含）的实现，它在此处完全可用：[top-108](https://opensource.apple.com/source/top/top-108/)（我刚刚选择了[macOS 10.12.4 版本](https://opensource.apple.com/release/macos-10124.html)）。

让我们看一下[top-108/libtop.c](https://opensource.apple.com/source/top/top-108/libtop.c.auto.html)，我们在其中找到以下内容：

```
static int
libtop_tsamp_update_vm_stats(libtop_tsamp_t* tsamp) {
    kern_return_t kr;
    tsamp->p_vm_stat = tsamp->vm_stat;

    mach_msg_type_number_t count = sizeof(tsamp->vm_stat) / sizeof(natural_t);
    kr = host_statistics64(libtop_port, HOST_VM_INFO64, (host_info64_t)&tsamp->vm_stat, &count);
    if (kr != KERN_SUCCESS) {
        return kr;
    }

    if (tsamp->pages_stolen > 0) {
        tsamp->vm_stat.wire_count += tsamp->pages_stolen;
    }

    [...]

    return kr;
} 
```

`tsamp`是[top-108/libtop.h](https://opensource.apple.com/source/top/top-108/libtop.c.auto.html)`libtop_tsamp_t`中定义的结构类型。除其他外，它包含和.`vm_statistics64_data_t vm_stat``uint64_t pages_stolen`

如您所见，如我们所知，`static int libtop_tsamp_update_vm_stats(libtop_tsamp_t* tsamp)`被`tsamp->vm_stat`填满。`host_statistics64()`然后它检查是否`tsamp->pages_stolen > 0`并将其添加`wire_count`到`tsamp->vm_stat`.

*2.结论*`host_statistics64()`如果我们只使用as in`/usr/bin/vm_stat`或您的示例代码，我们将无法获得这些被盗页面的数量！

**为什么`host_statistics64()`按原样实施？**

老实说，我不知道。分页是一个复杂的过程，因此实时观察是一项具有挑战性的任务。我们必须注意到，它的实现似乎没有错误。我认为，如果我们能够访问`vm_page_stolen_count`. `/usr/bin/top`如果被盗页面的数量不是很大，则执行不计算被盗页面。

另一个有趣的事情是函数上方的注释`static void update_pages_stolen(libtop_tsamp_t *tsamp)`是`/* This is for <rdar://problem/6410098>. */`. [Open Radar](https://openradar.appspot.com/page/1)是 Apple 软件的错误报告网站，通常以评论中给出的格式对错误进行分类。我无法找到相关的错误；也许是关于丢失的页面。

我希望这些信息能对你有所帮助。如果我设法在我的机器上编译最新（和定制）版本的 XNU，我会告诉你的。也许这会带来有趣的见解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-01T05:20:45.903

刚刚注意到，如果你添加`compressor_page_count`到混合中，你会更接近机器中的实际 RAM 数量。

这是一个观察，而不是解释，如果有正确记录的链接，那就太好了！

# drupal - 在 Netbeans 的“新项目”下添加选项“Drupal 项目”

> ID：14789679
> 
> 赞同：2
> 
> 时间：2013-02-09T15:38:25.380
> 
> 标签：drupal, netbeans, netbeans-7, netbeans-platform, netbeans-plugins

是否可以在 Netbeans 的“新项目”下添加新选项，以便我可以选择新项目 >> PHP >> Drupal 项目。这将创建一个已经包含 Drupal 文件的新项目。这可以在Netbean中做到这一点吗？

基本上自动完成下载 Drupal 项目文件并使用 Netbeans 进行设置的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:13:59.190

有可能编写 netbeans 插件，但我不知道任何这样做的。但是考虑使用[Drush——](http://drupal.org/project/drush)它是一个强大的命令行工具，可以让你用一个命令下载 drupal 核心：

```
drush dl drupal 
```

和许多其他事情（清除缓存、运行更新、下载和启用贡献模块等）

# javascript - 如何以编程方式设置 dojox.form.CheckedMultiSelect 的值？

> ID：14789680
> 
> 赞同：2
> 
> 时间：2013-02-09T15:38:25.553
> 
> 标签：javascript, dojo

我有一个以编程方式创建的 CheckedMultiSelect。

```
new dojox.form.CheckedMultiSelect({
        id: 'products',
        name: 'products',
        multiple: true,
        readOnly: false,
        store: store,
    },'products').startup(); 
```

到现在为止还挺好。多选已创建。现在，我使用多选打开网页，选中一些复选框并使用 Chrome 控制台：

```
var productSelect = dijit.byId("products");
productSelect.get('value');
[4, 3] 
```

[4, 3] 是一个检查值数组。

我的下一步是取消选中以前选中的框并再次使用 Chrome 控制台：

```
productSelect.set('value', [4, 3]); 
```

这就是问题发生的地方。'set' 功能不起作用。未选择框。

我什至试过

```
productSelect.set('value', ['4', '3']); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T11:37:24.970

好的，我在[这里](http://dojotoolkit.org/documentation/tutorials/1.6/selects_using_stores/)找到了答案。

> 但是，dijit.form.Select 有一个重要的限制：**它的实现方式不能很好地处理非字符串项目标识。**特别是，通过 select.set("value", id) 以编程方式设置小部件的当前值将不适用于非字符串（例如数字）身份。

解决方案是将商店中的 id 转换为字符串并使用

```
productSelect.set('value', ['4', '3']); 
```

# heroku - 从 s3 提供文件

> ID：14789681
> 
> 赞同：0
> 
> 时间：2013-02-09T15:38:51.500
> 
> 标签：heroku, ruby-on-rails-3.1, amazon-s3, flash

我需要利用 s3 缓存文件的优势，我决定将 mu swf 文件放在 amazon 存储桶中，但在 chrome 日志中出现禁止错误

如何让一个托管在 heroku 的 swf 文件来加载托管在亚马逊存储桶的 swf 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:35:16.240

如果我理解正确，您可能会遇到跨域加载（crossdomain.xml）的问题。有关如何解决它的详细答案，请参阅此链接：[为 Amazon S3 编写 Flash crossdomain.xml](https://stackoverflow.com/questions/9527624/writing-flash-crossdomain-xml-for-amazon-s3)

# php - 获取多级计数

> ID：14789682
> 
> 赞同：1
> 
> 时间：2013-02-09T15:38:52.810
> 
> 标签：php, sql

我正在尝试获取存储在数据库中的每个用户的下线数量（用户带来的推荐），例如：

```
 ------------------------------------
           + UserID      +  refferedby
       ------------------------------------
       l    23           l      80
       l    25           l      23  
       l    36           l      25
       l    75           l      36
       l    98           l      75
       l    24           l      98
       l    209          l      24 
```

25带来的总推荐量应该是：23,80,36,75,98,24,204

伪：

```
function getalldownlines(){
    // Get all users id  and store in array
    // loop through the array to get each users total downlines by calling function get_all()
}

function  get_all(){
    // get all users downline and downlines brought by user to the last user
    // it should keep count each and every one of them
    return $count;
} 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:43:26.640

你有几个选择。

第一个也是显而易见的，是在 PHP 中创建一个递归函数，它返回一个用户的推荐，然后用每个用户再次调用自身。

另一种选择是直接在 SQL 中进行。~~例如 MySQL 支持递归，但其他一些 RDBMS 不支持。我不确定标准 SQL 是否支持递归语法。~~

**更新**：似乎我错了。MySQL 不支持递归查询；PostgreSQL、Firebird 和 MS Sql Server 等等。

以下伪代码需要完成。我的 PHP-fu 有点生疏了：

```
function getalldownlines()
{
    $sqlcmd = "SELECT UserID FROM table";

    // fill array $arr with data from SQL

    foreach ($id in $arr)
    {
        $count = get_all($id);
        $numreferreds[$id] = $count;
    }
} 
```

* * *

```
function get_all($id)
{
    $sqlcmd = "SELECT referredby FROM table WHERE UserId='$id'";

    $count = 0;

    // fill array $arr with data from SQL

    foreach ($referred in $arr)
    {
        $count += get_all($referred);
    }

    return $count;
} 
```

# mongodb - 查找数组字段不为空的 MongoDB 记录

> ID：14789684
> 
> 赞同：651
> 
> 时间：2013-02-09T15:39:06.643
> 
> 标签：mongodb, mongoose

我所有的记录都有一个名为“图片”的字段。该字段是一个字符串数组。

我现在想要这个数组不为空的最新 10 条记录。

我已经用谷歌搜索了，但奇怪的是我没有找到太多关于这个的东西。我已经阅读了 $where 选项，但我想知道这对本机函数有多慢，以及是否有更好的解决方案。

即便如此，这也行不通：

```
ME.find({$where: 'this.pictures.length > 0'}).sort('-created').limit(10).execFind() 
```

什么都不返回。不`this.pictures`带长度位确实有效，但当然它也会返回空记录。

* * *

## 回答 #1

> 赞同：1124
> 
> 时间：2014-08-05T15:24:27.547

如果您还有没有密钥的文档，您可以使用：

```
ME.find({ pictures: { $exists: true, $not: {$size: 0} } }) 
```

如果涉及，MongoDB 不使用索引`$size`，所以这里有一个更好的解决方案：

```
ME.find({ pictures: { $exists: true, $ne: [] } }) 
```

如果您的属性可能具有无效值（如或其他），那么您可以[按照此答案](https://stackoverflow.com/a/52465830/968799)[中](https://docs.mongodb.com/manual/reference/operator/query/type/)的建议`null` `boolean`添加额外的检查：[`$types`](https://docs.mongodb.com/manual/reference/operator/query/type/)

使用 mongo >= 3.2：

```
ME.find({ pictures: { $exists: true, $type: 'array', $ne: [] } }) 
```

使用 mongo < 3.2：

```
ME.find({ pictures: { $exists: true, $type: 4, $ne: [] } }) 
```

自 MongoDB 2.6 版本以来，您可以与 operator 进行比较`$gt`，但这可能会导致意外结果（您可以[在此答案](https://stackoverflow.com/questions/14789684/find-mongodb-records-where-array-field-is-not-empty/42601244#42601244)中找到详细说明）：

```
ME.find({ pictures: { $gt: [] } }) 
```

* * *

## 回答 #2

> 赞同：198
> 
> 时间：2013-02-09T16:02:48.853

经过一番查看，尤其是在 mongodb 文档中，以及令人费解的部分，这就是答案：

```
ME.find({pictures: {$exists: true, $not: {$size: 0}}}) 
```

* * *

## 回答 #3

> 赞同：127
> 
> 时间：2013-07-16T02:58:52.243

这也可能对您有用：

```
ME.find({'pictures.0': {$exists: true}}); 
```

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2017-03-04T20:49:39.793

查询时您关心两件事 - 准确性和性能。考虑到这一点，我在 MongoDB v3.0.14 中测试了几种不同的方法。

TL;DR`db.doc.find({ nums: { $gt: -Infinity }})`是最快和最可靠的（至少在我测试的 MongoDB 版本中）。

*编辑：这不再适用于 MongoDB v3.6！请参阅此帖子下的评论以获取潜在的解决方案。*

### 设置

我插入了 1k 个带有 oa 列表字段的文档，1k 个带有空列表的文档，以及 5 个带有非空列表的文档。

```
for (var i = 0; i < 1000; i++) { db.doc.insert({}); }
for (var i = 0; i < 1000; i++) { db.doc.insert({ nums: [] }); }
for (var i = 0; i < 5; i++) { db.doc.insert({ nums: [1, 2, 3] }); }
db.doc.createIndex({ nums: 1 }); 
```

我认识到这不足以像我在下面的测试中那样认真对待性能，但它足以展示各种查询的正确性和所选查询计划的行为。

### 测试

`db.doc.find({'nums': {'$exists': true}})`返回错误的结果（对于我们想要完成的事情）。

```
MacBook-Pro(mongod-3.0.14) test> db.doc.find({'nums': {'$exists': true}}).count()
1005 
```

--

`db.doc.find({'nums.0': {'$exists': true}})`返回正确的结果，但使用完整的集合扫描也很慢（`COLLSCAN`解释中的注意阶段）。

```
MacBook-Pro(mongod-3.0.14) test> db.doc.find({'nums.0': {'$exists': true}}).count()
5
MacBook-Pro(mongod-3.0.14) test> db.doc.find({'nums.0': {'$exists': true}}).explain()
{
  "queryPlanner": {
    "plannerVersion": 1,
    "namespace": "test.doc",
    "indexFilterSet": false,
    "parsedQuery": {
      "nums.0": {
        "$exists": true
      }
    },
    "winningPlan": {
      "stage": "COLLSCAN",
      "filter": {
        "nums.0": {
          "$exists": true
        }
      },
      "direction": "forward"
    },
    "rejectedPlans": [ ]
  },
  "serverInfo": {
    "host": "MacBook-Pro",
    "port": 27017,
    "version": "3.0.14",
    "gitVersion": "08352afcca24bfc145240a0fac9d28b978ab77f3"
  },
  "ok": 1
} 
```

--

`db.doc.find({'nums': { $exists: true, $gt: { '$size': 0 }}})`返回错误的结果。这是因为无效的索引扫描没有推进任何文档。如果没有索引，它可能是准确的，但速度很慢。

```
MacBook-Pro(mongod-3.0.14) test> db.doc.find({'nums': { $exists: true, $gt: { '$size': 0 }}}).count()
0
MacBook-Pro(mongod-3.0.14) test> db.doc.find({'nums': { $exists: true, $gt: { '$size': 0 }}}).explain('executionStats').executionStats.executionStages
{
  "stage": "KEEP_MUTATIONS",
  "nReturned": 0,
  "executionTimeMillisEstimate": 0,
  "works": 2,
  "advanced": 0,
  "needTime": 0,
  "needFetch": 0,
  "saveState": 0,
  "restoreState": 0,
  "isEOF": 1,
  "invalidates": 0,
  "inputStage": {
    "stage": "FETCH",
    "filter": {
      "$and": [
        {
          "nums": {
            "$gt": {
              "$size": 0
            }
          }
        },
        {
          "nums": {
            "$exists": true
          }
        }
      ]
    },
    "nReturned": 0,
    "executionTimeMillisEstimate": 0,
    "works": 1,
    "advanced": 0,
    "needTime": 0,
    "needFetch": 0,
    "saveState": 0,
    "restoreState": 0,
    "isEOF": 1,
    "invalidates": 0,
    "docsExamined": 0,
    "alreadyHasObj": 0,
    "inputStage": {
      "stage": "IXSCAN",
      "nReturned": 0,
      "executionTimeMillisEstimate": 0,
      "works": 1,
      "advanced": 0,
      "needTime": 0,
      "needFetch": 0,
      "saveState": 0,
      "restoreState": 0,
      "isEOF": 1,
      "invalidates": 0,
      "keyPattern": {
        "nums": 1
      },
      "indexName": "nums_1",
      "isMultiKey": true,
      "direction": "forward",
      "indexBounds": {
        "nums": [
          "({ $size: 0.0 }, [])"
        ]
      },
      "keysExamined": 0,
      "dupsTested": 0,
      "dupsDropped": 0,
      "seenInvalidated": 0,
      "matchTested": 0
    }
  }
} 
```

--

`db.doc.find({'nums': { $exists: true, $not: { '$size': 0 }}})`返回正确的结果，但性能很差。从技术上讲，它会进行索引扫描，但它仍然会推进所有文档，然后必须过滤它们）。

```
MacBook-Pro(mongod-3.0.14) test> db.doc.find({'nums': { $exists: true, $not: { '$size': 0 }}}).count()
5
MacBook-Pro(mongod-3.0.14) test> db.doc.find({'nums': { $exists: true, $not: { '$size': 0 }}}).explain('executionStats').executionStats.executionStages
{
  "stage": "KEEP_MUTATIONS",
  "nReturned": 5,
  "executionTimeMillisEstimate": 0,
  "works": 2016,
  "advanced": 5,
  "needTime": 2010,
  "needFetch": 0,
  "saveState": 15,
  "restoreState": 15,
  "isEOF": 1,
  "invalidates": 0,
  "inputStage": {
    "stage": "FETCH",
    "filter": {
      "$and": [
        {
          "nums": {
            "$exists": true
          }
        },
        {
          "$not": {
            "nums": {
              "$size": 0
            }
          }
        }
      ]
    },
    "nReturned": 5,
    "executionTimeMillisEstimate": 0,
    "works": 2016,
    "advanced": 5,
    "needTime": 2010,
    "needFetch": 0,
    "saveState": 15,
    "restoreState": 15,
    "isEOF": 1,
    "invalidates": 0,
    "docsExamined": 2005,
    "alreadyHasObj": 0,
    "inputStage": {
      "stage": "IXSCAN",
      "nReturned": 2005,
      "executionTimeMillisEstimate": 0,
      "works": 2015,
      "advanced": 2005,
      "needTime": 10,
      "needFetch": 0,
      "saveState": 15,
      "restoreState": 15,
      "isEOF": 1,
      "invalidates": 0,
      "keyPattern": {
        "nums": 1
      },
      "indexName": "nums_1",
      "isMultiKey": true,
      "direction": "forward",
      "indexBounds": {
        "nums": [
          "[MinKey, MaxKey]"
        ]
      },
      "keysExamined": 2015,
      "dupsTested": 2015,
      "dupsDropped": 10,
      "seenInvalidated": 0,
      "matchTested": 0
    }
  }
} 
```

--

`db.doc.find({'nums': { $exists: true, $ne: [] }})`返回正确的结果，速度稍快，但性能仍然不理想。它使用 IXSCAN，它只推进具有现有列表字段的文档，但随后必须一一过滤掉空列表。

```
MacBook-Pro(mongod-3.0.14) test> db.doc.find({'nums': { $exists: true, $ne: [] }}).count()
5
MacBook-Pro(mongod-3.0.14) test> db.doc.find({'nums': { $exists: true, $ne: [] }}).explain('executionStats').executionStats.executionStages
{
  "stage": "KEEP_MUTATIONS",
  "nReturned": 5,
  "executionTimeMillisEstimate": 0,
  "works": 1018,
  "advanced": 5,
  "needTime": 1011,
  "needFetch": 0,
  "saveState": 15,
  "restoreState": 15,
  "isEOF": 1,
  "invalidates": 0,
  "inputStage": {
    "stage": "FETCH",
    "filter": {
      "$and": [
        {
          "$not": {
            "nums": {
              "$eq": [ ]
            }
          }
        },
        {
          "nums": {
            "$exists": true
          }
        }
      ]
    },
    "nReturned": 5,
    "executionTimeMillisEstimate": 0,
    "works": 1017,
    "advanced": 5,
    "needTime": 1011,
    "needFetch": 0,
    "saveState": 15,
    "restoreState": 15,
    "isEOF": 1,
    "invalidates": 0,
    "docsExamined": 1005,
    "alreadyHasObj": 0,
    "inputStage": {
      "stage": "IXSCAN",
      "nReturned": 1005,
      "executionTimeMillisEstimate": 0,
      "works": 1016,
      "advanced": 1005,
      "needTime": 11,
      "needFetch": 0,
      "saveState": 15,
      "restoreState": 15,
      "isEOF": 1,
      "invalidates": 0,
      "keyPattern": {
        "nums": 1
      },
      "indexName": "nums_1",
      "isMultiKey": true,
      "direction": "forward",
      "indexBounds": {
        "nums": [
          "[MinKey, undefined)",
          "(undefined, [])",
          "([], MaxKey]"
        ]
      },
      "keysExamined": 1016,
      "dupsTested": 1015,
      "dupsDropped": 10,
      "seenInvalidated": 0,
      "matchTested": 0
    }
  }
} 
```

--

`db.doc.find({'nums': { $gt: [] }})`是危险的，因为取决于所使用的索引，它可能会产生意想不到的结果。这是因为无效的索引扫描不推进任何文档。

```
MacBook-Pro(mongod-3.0.14) test> db.doc.find({'nums': { $gt: [] }}).count()
0
MacBook-Pro(mongod-3.0.14) test> db.doc.find({'nums': { $gt: [] }}).hint({ nums: 1 }).count()
0
MacBook-Pro(mongod-3.0.14) test> db.doc.find({'nums': { $gt: [] }}).hint({ _id: 1 }).count()
5

MacBook-Pro(mongod-3.0.14) test> db.doc.find({'nums': { $gt: [] }}).explain('executionStats').executionStats.executionStages
{
  "stage": "KEEP_MUTATIONS",
  "nReturned": 0,
  "executionTimeMillisEstimate": 0,
  "works": 1,
  "advanced": 0,
  "needTime": 0,
  "needFetch": 0,
  "saveState": 0,
  "restoreState": 0,
  "isEOF": 1,
  "invalidates": 0,
  "inputStage": {
    "stage": "FETCH",
    "filter": {
      "nums": {
        "$gt": [ ]
      }
    },
    "nReturned": 0,
    "executionTimeMillisEstimate": 0,
    "works": 1,
    "advanced": 0,
    "needTime": 0,
    "needFetch": 0,
    "saveState": 0,
    "restoreState": 0,
    "isEOF": 1,
    "invalidates": 0,
    "docsExamined": 0,
    "alreadyHasObj": 0,
    "inputStage": {
      "stage": "IXSCAN",
      "nReturned": 0,
      "executionTimeMillisEstimate": 0,
      "works": 1,
      "advanced": 0,
      "needTime": 0,
      "needFetch": 0,
      "saveState": 0,
      "restoreState": 0,
      "isEOF": 1,
      "invalidates": 0,
      "keyPattern": {
        "nums": 1
      },
      "indexName": "nums_1",
      "isMultiKey": true,
      "direction": "forward",
      "indexBounds": {
        "nums": [
          "([], BinData(0, ))"
        ]
      },
      "keysExamined": 0,
      "dupsTested": 0,
      "dupsDropped": 0,
      "seenInvalidated": 0,
      "matchTested": 0
    }
  }
} 
```

--

`db.doc.find({'nums.0’: { $gt: -Infinity }})`返回正确的结果，但性能不佳（使用完整的集合扫描）。

```
MacBook-Pro(mongod-3.0.14) test> db.doc.find({'nums.0': { $gt: -Infinity }}).count()
5
MacBook-Pro(mongod-3.0.14) test> db.doc.find({'nums.0': { $gt: -Infinity }}).explain('executionStats').executionStats.executionStages
{
  "stage": "COLLSCAN",
  "filter": {
    "nums.0": {
      "$gt": -Infinity
    }
  },
  "nReturned": 5,
  "executionTimeMillisEstimate": 0,
  "works": 2007,
  "advanced": 5,
  "needTime": 2001,
  "needFetch": 0,
  "saveState": 15,
  "restoreState": 15,
  "isEOF": 1,
  "invalidates": 0,
  "direction": "forward",
  "docsExamined": 2005
} 
```

--

`db.doc.find({'nums': { $gt: -Infinity }})`令人惊讶的是，这非常有效！它给出了正确的结果，而且速度很快，从索引扫描阶段推进了 5 个文档。

```
MacBook-Pro(mongod-3.0.14) test> db.doc.find({'nums': { $gt: -Infinity }}).explain('executionStats').executionStats.executionStages
{
  "stage": "FETCH",
  "nReturned": 5,
  "executionTimeMillisEstimate": 0,
  "works": 16,
  "advanced": 5,
  "needTime": 10,
  "needFetch": 0,
  "saveState": 0,
  "restoreState": 0,
  "isEOF": 1,
  "invalidates": 0,
  "docsExamined": 5,
  "alreadyHasObj": 0,
  "inputStage": {
    "stage": "IXSCAN",
    "nReturned": 5,
    "executionTimeMillisEstimate": 0,
    "works": 15,
    "advanced": 5,
    "needTime": 10,
    "needFetch": 0,
    "saveState": 0,
    "restoreState": 0,
    "isEOF": 1,
    "invalidates": 0,
    "keyPattern": {
      "nums": 1
    },
    "indexName": "nums_1",
    "isMultiKey": true,
    "direction": "forward",
    "indexBounds": {
      "nums": [
        "(-inf.0, inf.0]"
      ]
    },
    "keysExamined": 15,
    "dupsTested": 15,
    "dupsDropped": 10,
    "seenInvalidated": 0,
    "matchTested": 0
  }
} 
```

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2015-02-06T15:10:19.163

从 2.6 版本开始，另一种方法是将字段与空数组进行比较：

```
ME.find({pictures: {$gt: []}}) 
```

在 shell 中测试它：

```
> db.ME.insert([
{pictures: [1,2,3]},
{pictures: []},
{pictures: ['']},
{pictures: [0]},
{pictures: 1},
{foobar: 1}
])

> db.ME.find({pictures: {$gt: []}})
{ "_id": ObjectId("54d4d9ff96340090b6c1c4a7"), "pictures": [ 1, 2, 3 ] }
{ "_id": ObjectId("54d4d9ff96340090b6c1c4a9"), "pictures": [ "" ] }
{ "_id": ObjectId("54d4d9ff96340090b6c1c4aa"), "pictures": [ 0 ] } 
```

因此，它正确地包含了`pictures`具有至少一个数组元素的文档，并排除了`pictures`为空数组、不是数组或缺失的文档。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2018-09-23T11:51:53.460

### 检索所有且仅“图片”为数组且不为空的文档

```
ME.find({pictures: {$type: 'array', $ne: []}}) 
```

如果使用[3.2](https://docs.mongodb.com/v3.2/reference/operator/query/type/)之前的 MongoDb 版本，请使用`$type: 4`. `$type: 'array'`请注意，此解决方案甚至不使用[$size](https://docs.mongodb.com/manual/reference/operator/query/size/)，因此索引没有问题（“查询不能对查询的 $size 部分使用索引”）

其他解决方案，包括这些（接受的答案）：

> ME.find({ 图片: { $exists: true, $not: {$size: 0} } }); ME.find({ 图片: { $exists: true, $ne: [] } })

是**错误**的，因为即使“图片”是`null`、`undefined`、 0 等，它们也会返回文档。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-06-15T08:27:04.020

您可以使用以下任何方法来实现此目的。
两者还注意不为其中没有请求的键的对象返回结果：

```
db.video.find({pictures: {$exists: true, $gt: {$size: 0}}})
db.video.find({comments: {$exists: true, $not: {$size: 0}}}) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-12-03T17:51:47.467

```
db.find({ pictures: { $elemMatch: { $exists: true } } }) 
```

`$elemMatch`匹配包含数组字段且至少有一个元素与指定查询匹配的文档。

因此，您将所有数组与至少一个元素进行匹配。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-05-19T20:43:46.647

使用`$elemMatch`运算符：根据文档

> $elemMatch 运算符匹配包含数组字段的文档，其中至少一个元素匹配所有指定的查询条件。

`$elemMatches`确保该值是一个数组并且它不为空。所以查询将类似于

`ME.find({ pictures: { $elemMatch: {$exists: true }}})`

PS 此代码的变体可在 MongoDB 大学的 M121 课程中找到。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-10T19:28:01.620

您还可以在 Mongo 运算符 $exists 上使用辅助方法[Exists](http://mongoosejs.com/docs/api.html#query_Query-exists)

```
ME.find()
    .exists('pictures')
    .where('pictures').ne([])
    .sort('-created')
    .limit(10)
    .exec(function(err, results){
        ...
    }); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-02-28T06:16:51.703

```
{ $where: "this.pictures.length > 1" } 
```

使用 $where 并传递 this.field_name.length ，它返回数组字段的大小并通过与数字比较来检查它。如果任何数组的值大于数组大小必须至少为 1。所以所有数组字段的长度都大于 1，这意味着它在该数组中有一些数据

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-11-13T19:17:30.517

这也有效：

```
db.getCollection('collectionName').find({'arrayName': {$elemMatch:{}}}) 
```

* * *

## 回答 #13

> 赞同：-9
> 
> 时间：2015-02-09T20:29:28.370

```
ME.find({pictures: {$exists: true}}) 
```

就这么简单，这对我有用。

# grails - grails 许多按钮在一个表单上

> ID：14789685
> 
> 赞同：1
> 
> 时间：2013-02-09T15:39:08.130
> 
> 标签：grails, button, submit

我有一个表单，您可以在其中从选择器中选择某些内容，然后单击并对其进行成像，然后将其触发到控制器。目前的问题是图像是提交按钮，我可以发送参数，所以我不知道点击了哪个图像。我当前的代码如下：

```
 <g:form controller="profile" action='postFromAlbum'>
        <g:select name="child" from="${names}" value="" noSelection="['':'All Children']"/>   <br

               <g:each in="${pictures}">

                   <g:submitButton name="submit" class="image3" type="image" src="${it.urlThumb}" alt="no Picture"></g:submitButton>

               </g:each>
        </g:form> 
```

有没有人知道更好的方法或知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T22:51:43.520

一种方法是创建一个类似于[actionSubmit](http://grails.org/doc/2.2.x/ref/Tags/actionSubmit.html)的支持`params`，就像[在这个问题](https://stackoverflow.com/a/10941682/207791)中一样。

另一种 hacky 方法是设置一个不可见的文本/单选字段并将其值设置在按钮的`onclick`.

# jsp - 如何将安全 URL 请求从一个 Web 服务器应用程序发送到同一服务器上的另一个应用程序？

> ID：14789697
> 
> 赞同：0
> 
> 时间：2013-02-09T15:39:46.420
> 
> 标签：jsp, web-applications, servlets, cookies, security

我在同一台服务器上有 2 个 Tomcat Web 应用程序；它们都受登录/会话保护。我需要将 URL 请求从一个应用程序发送到另一个应用程序。在我的 URL 请求中，我添加了一个字段以绕过接收 Web 应用程序的会话安全性。

我仍然想确保只有特定的请求才能绕过安全性。所以，我首先将我的请求发送到同一个应用程序中的一个安全 JSP，然后我在我的请求中添加一个带有一些安全密钥的 cookie，将此请求转发给第二个应用程序，然后在接收 servlet 中读取此 cookie 以允许绕过。

这个设计够安全吗？还能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:07:01.803

*   好吧，使用cookie应该已经足够好了，但是你可以通过加密它们来加强保存。

`preferable way to encrypt/decrypt` 使用[HMAC](http://en.wikipedia.org/wiki/Hmac)

*   同样在 cookie 中，`you can store the ipaddress of the originating request and always validate against the valid list in Application 2`

# mysql - 当数据库更新时，我可以在 Yii 视图中收到通知吗？

> ID：14789698
> 
> 赞同：1
> 
> 时间：2013-02-09T15:39:57.823
> 
> 标签：mysql, yii

我想在 Mysql 数据库更新时收到通知，并且在更新完成时该通知应该停止（通过添加“NEW”）。我想知道最简单的方法。请问有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:05:22.267

Yii 作为一个单纯的运行在服务器上的 PHP 框架，是做不到这样的事情的。这对于客户端-服务器架构至关重要。服务器**无法**主动更新客户端。

客户端（即用户计算机）可以采取主动。它可以向服务器发送请求。然后，也只有这样，服务器才能响应客户端。

您将需要在客户端上运行 Javascript。Javascript 轮询服务器（通过 ajax）以查看数据库是否正在更新。如果 javascript 轮询并发现服务器响应：“数据库完成”，则 Javascript 可以添加“新”标志。

# javascript - 悬停显示多个元素的jQuery

> ID：14789699
> 
> 赞同：-4
> 
> 时间：2013-02-09T15:40:02.723
> 
> 标签：javascript, jquery, html, css

我有一个页面，其中包含多行这样的行，每行都包含在`<div id="result">`;

```
<div id="result"><a href="http://www.domain.com/">Link Name</a><iframe src="http://www.domain.com/" style="width:285px;height:285px;border:0px;margin:0px" scrolling="no"></iframe></div> 
```

我目前正在使用以下 jQuery`<a>`在悬停时显示标签；

```
$(document).ready(function(){
    $('#result iframe').hover(function(){
        $('#result a').fadeIn(200);
    },function(){
        $('#result a').fadeOut(200);
    });
}); 
```

但是，悬停仅适用于第一个`<div id="result">`，并且还显示每个`<a>`标签，`<div id="result">`而不仅仅是用户悬停的标签。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:54:32.457

假设我了解您的奇怪之处：

**html**

```
 <div class="result">
        <a href="http://www.domain.com/" style="display:none;">Link Name</a>
        <iframe src="http://www.domain.com/" style="width:285px;height:285px;border:0px;margin:0px;background:red;" scrolling="no"></iframe>
    </div>
    <div class="result">
        <a href="http://www.domain.com/" style="display:none;">Link Name</a>
        <iframe src="http://www.domain.com/" style="width:285px;height:285px;border:0px;margin:0px;background:red;" scrolling="no"></iframe>
    </div> 
```

**jQuery**

```
$('.result iframe').hover(function(e) {
   $(this).parent().find('a').fadeIn(); 
}, function() {
     $(this).parent().find('a').fadeOut();   
}); 
```

见[小提琴](http://jsfiddle.net/soyuka/CgGjN/4/)

用悬停编辑。

Nb：`e.preventDefault();`如果您不希望通过单击提交链接，则在单击事件上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T16:20:28.533

你可以试试这个——`results`改班

```
$(document).ready(function(){
    $('.result').hover(function(){ // <-- change to class.. and bind to wrapper div
        $(this).find('a').fadeIn(200);
    },function(){
        $(this).find('a').fadeOut(200);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T15:44:27.703

试试这样：

```
$(document).ready(function(){
$('#result iframe').hover(function(){
    $('#result a').fadeIn(200);
    $('#result a').fadeOut(200);
});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T16:00:58.120

如果您只想捕获`<a>`标签，而不是每个标签，而是特定的标签`<div id="result">`，您可以尝试在您的 jQuery 代码中指定它，例如：

```
$(document).ready(function(){
    $('#result:nth-child(1) iframe').hover(function(){
        $('#result:nth-child(1) a').fadeIn(200);
    },function(){
         $('#result:nth-child(1) a').fadeOut(200);
    });
}); 
```

所以这将只针对第一个 id="result" 的 div。通过更改 nth-child(0) - nth-child(1) - nth-child(2) 来捕捉其他人...

另一种解决方案：您还可以为每个`<a>`标签设置一个 id，或者您也可以使用一个类来捕获您需要的特定元素。

# playframework-2.0 - 如何在 play 2 框架中手动添加表单中的错误

> ID：14789702
> 
> 赞同：13
> 
> 时间：2013-02-09T15:40:08.347
> 
> 标签：playframework-2.0

我正在尝试在表单中添加一些错误，但我的代码无法编译。
特别是，官方play 2 api似乎不正确。
我们可以看到errors()返回validationError列表
[http://www.playframework.com/documentation/api/2.0/java/play/data/Form.Field.html#errors()](http://www.playframework.com/documentation/api/2.0/java/play/data/Form.Field.html#errors())

无论如何，如果我尝试

```
 ValidationError e = new ValidationError("name", "user already exist",new ArrayList());
 filledForm.errors().add(e); 
```

我得到一个错误，方法 add 不存在。
我发现它是一个哈希图，但以下代码无法编译：

```
 filledForm.errors().put("name","s"); 
```

如何添加错误？谢谢

编辑：解决感谢 Julien Lafont

```
 ValidationError e = new ValidationError("name", "user already exist",new ArrayList());
 ArrayList<ValidationError> errors = new ArrayList<ValidationError>();
 errors.add(e);
 filledForm.errors().put("name",errors);
 return badRequest(loginForm.render(filledForm)); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T09:17:51.907

简短的方法是

> fillForm.reject("name","用户已经存在");
> 
> return badRequest(loginForm.render(filledForm));

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-17T16:29:24.810

您可以使用 withError：

```
filledForm.withError("name", "user already exist") 
```

您也可以添加全局错误：

```
filledForm.withGlobalError("eneric error") 
```

来源： [https ://github.com/playframework/playframework/blob/3bebfa7c1226a438a687ec9a0a3e5c23e5aefa09/framework/src/play/src/main/scala/play/api/data/Form.scala#L252](https://github.com/playframework/playframework/blob/3bebfa7c1226a438a687ec9a0a3e5c23e5aefa09/framework/src/play/src/main/scala/play/api/data/Form.scala#L252)

# activiti - timeCycle 活动不起作用

> ID：14789705
> 
> 赞同：0
> 
> 时间：2013-02-09T15:40:33.457
> 
> 标签：activiti

我正在使用 activiti 5.11 我指定这样的重复间隔（我尝试两种表达式）：

```
<intermediateCatchEvent id="timerintermediatecatchevent1" name="TimerCatchEvent">
  <timerEventDefinition>
      <timeCycle>0 0/1 * * * ?</timeCycle>
  </timerEventDefinition></intermediateCatchEvent>

<timerEventDefinition>
<timeCycle>R3/PT1M</timeCycle></timerEventDefinition> 
```

但是即使我指定了重复的时间间隔，定时器也只被调用一次而不执行任何重复，我在定时器分支之后使用intermediateThrowEvent 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:20:19.303

第二个表达式我不确定它是否应该工作，第一个应该（每分钟）。

但是你所展示的对于一个过程来说看起来有点奇怪。您有一个中间事件，每分钟都会“触发”。

我怀疑正在发生的事情如下：计时器没有任何持续时间（它不会在那里等待任何时间）。在它到达计时器后，因为它没有持续时间，所以流程实例继续并完成。当流程实例完成时，计时器不会运行。如果您希望该过程在计时器处停止，您可能还应该设置一个持续时间。

# iphone - 计算MKPolyline路径的距离？

> ID：14789706
> 
> 赞同：3
> 
> 时间：2013-02-09T15:40:38.527
> 
> 标签：iphone, ios, objective-c, path

我想获得 MKPolyline 路径的米数，这样我就可以告诉用户完成路径还剩下多少米。

我一直在寻找可以做的事情，但我什么也得不到。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T15:57:17.000

听起来很乏味，除非您想自己进行数学运算，否则您可能不得不迭代考虑行的`points`，将每个转换为 a`CLLocation`并在每个之间使用它`-distanceFromLocation:`，总结为适当的总数。

# c# - 打印多页

> ID：14789709
> 
> 赞同：1
> 
> 时间：2013-02-09T15:40:50.960
> 
> 标签：c#, printing

我在作业程序的最后一部分遇到问题，我必须进行多项选择测试，最后给出测试的可打印版本。老师给了我们能够打印多页的代码，但它似乎只复制第一页。我试图弄乱代码以使其工作，但它要么使第一页无穷无尽，要么程序崩溃导致我的索引计数器超出了我创建的存储问题和答案的数组。这是我停下来的地方。

```
private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
{

    Font titleFont = new Font("Brush Script Std", 25);
    Font typeFont = new Font("Times New Roman", 15);

    int questionCount = 1;
    int xcoordinate = 20, ycoordinate = 140;
    String IndexQuestion, IndexAnswerA, IndexAnswerB, IndexAnswerC, IndexAnswerD, IndexCorrectAnswer;

    if (testTaken == "yes")
    {
        e.Graphics.DrawString("Visual Basic Assessment Questions",
                titleFont, Brushes.Black, 100, 20);

        e.Graphics.DrawString("Page" + pageCount,
                typeFont, Brushes.Black, 100, 90);

        while (Index < 10)
        {
            IndexQuestion = DataTier.allTestQuestions[Index].Question.ToString();
            IndexAnswerA = DataTier.allTestQuestions[Index].AnswerA.ToString();
            IndexAnswerB = DataTier.allTestQuestions[Index].AnswerB.ToString();
            IndexAnswerC = DataTier.allTestQuestions[Index].AnswerC.ToString();
            IndexAnswerD = DataTier.allTestQuestions[Index].AnswerD.ToString();
            IndexCorrectAnswer = DataTier.allTestQuestions[Index].CorrectAnswer.ToString();
            e.Graphics.DrawString(questionCount + "." + DataTier.allTestQuestions[Index].Question, typeFont, Brushes.Black, xcoordinate, ycoordinate);
            ycoordinate += 20;
            e.Graphics.DrawString(IndexAnswerA, typeFont, Brushes.Black, xcoordinate, ycoordinate);
            ycoordinate += 20;
            e.Graphics.DrawString(IndexAnswerB, typeFont, Brushes.Black, xcoordinate, ycoordinate);
            ycoordinate += 20;
            e.Graphics.DrawString(IndexAnswerC, typeFont, Brushes.Black, xcoordinate, ycoordinate);
            ycoordinate += 20;
            e.Graphics.DrawString(IndexAnswerD, typeFont, Brushes.Black, xcoordinate, ycoordinate);
            ycoordinate += 20;
            e.Graphics.DrawString("Correct Answer is: " + IndexCorrectAnswer, typeFont, Brushes.Red, xcoordinate, ycoordinate);

            ycoordinate += 60;
            questionCount += 1;
            Index += 1;
            if (ycoordinate >= e.MarginBounds.Bottom)
            {
               pageCount++; 
               e.HasMorePages = true;
            }
    }
} 
```

编辑：我已将上面的代码更改为现在的代码。它进入下一页并制作瓷砖，但页数显示为 6 而不是 2（仅假设为 2 页长），并且第二页是所有问题的空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:37:45.230

```
 pageCount = 1;
    Index = 0; 
```

该代码属于 BeginPrint 事件处理程序，即在打印开始时调用的事件处理程序。您的 PrintPage 事件处理程序会为每个页面调用，您应该只绘制每个特定页面上的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:49:56.840

每个页面都会调用此方法，因此您必须为下次调用保留这些变量的值，以便知道您要去哪里。

似乎 Index 是在方法之外定义的，因此如果在调用 print 之前将其设置为零并且不要在此处将其归零，它可能会执行您想要的操作。

# database - 根据用户与主数据库的 Yii 动态数据库连接

> ID：14789711
> 
> 赞同：4
> 
> 时间：2013-02-09T15:40:52.693
> 
> 标签：database, yii, multi-tenant

我的项目是基于多租户SaaS。

我有多个客户（公司），每个客户都有多个用户——他们都将使用相同的数据库布局。

每个客户都有自己的数据库，因此在用户身份验证期间，我想构建一个主数据库，将用户与该用户的公司数据库相关联。

每个数据库的结构都是相同的……只是数据不同。

这样我们就可以为不同的公司保留不同的数据库，这样就不会在数据库中混入数据。

编写应用程序时，客户端的数量（以及数据库的数量）是未知的，因此不可能在引导脚本中包含所有连接。

现在，我想要做的是，动态更改引导程序中的数据库连接，或者能够为登录的用户动态创建新连接。在 Yii 中是否有一个简单的解决方案并且仍然使用 AR ，查询建设者？

我看到了这个解决方案，但对我不起作用[http://www.yiiframework.com/forum/index.php?/topic/5385-dynamic-db-connection/](http://www.yiiframework.com/forum/index.php?/topic/5385-dynamic-db-connection/)

这就是我今天的配置文件对于运行一个数据库的脚本的外观，我想调用一个主数据库来控制用户属于哪个数据库以及应用程序在 Yii 中使用，知道吗？

```
<? php

 $language = 'en'; 

  $currencyBaseCode = 'USD';

 $theme = 'default';

 $connectionString = 'mysql:host=localhost;port=3306;dbname=master';

 $username = 'root';

 $password = 'YOUR PASS';

 $memcacheServers = array( // An empty array means memcache is not used.

 array(

'host' => '127.0.0.1',

'port' => 11211, // This is the default memcached port.

 'weight' => 100,

  ),

  );

  $adminEmail = 'EMAIL ADDRESS';

  $installed = true; // Set to true by the installation process.

  $maintenanceMode = false; // Set to true during upgrade process or other maintenance tasks.

  $instanceConfig = array(); //Set any parameters you want to have merged into configuration array.

  //@see CustomManagement

  $instanceConfig['components']['request']['hostInfo'] = 'website url';

  $instanceConfig['components']['request']['scriptUrl'] = '/app/index.php';

  $urlManager = array (); // Set any parameters you want to customize url manager. 
  ? > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:07:30.770

在配置文件中定义主数据库，并使用普通的 AR 类连接到它以检索凭据。然后，关闭连接。

然后[扩展 AR 类，特别是`getDbConnection()`方法](http://www.yiiframework.com/forum/index.php?/topic/5385-dynamic-db-connection/)。获取相关凭据，并将它们作为参数传递给新的 CDbConnection 对象。

获取凭据的初始 DB 请求将极大地拖累性能，因此您应该使用 Redis 或 Memcached 将它们真正存储在内存中。Yii 本身并不这样做。

有几种不同的方法：

*   不同的前端控制器加载不同的配置文件，每个配置文件由单独的应用程序动态生成或销毁。
*   一个大数据库。每条记录都有一个键来定义它属于哪个客户端。
*   一个大数据库。可以通过使用客户端名称作为表名的一部分来复制表。

使用 Yii 这些都不是一件容易的事，因为这并不是 Yii 的设计初衷。

# django - 修改更改列表上的单个对象 django admin

> ID：14789713
> 
> 赞同：0
> 
> 时间：2013-02-09T15:41:37.683
> 
> 标签：django, admin

```
class WidgetManagerAdmin(FilterSiteAdmin, OrderedModelAdmin):
      list_display = ('title', 'position', 'is_published', 'order', 'reorder',)
      list_editable = ('position', 'is_published',)
      ordering = ('position','order',) 
```

在此模型上，管理员“位置”是一个由选择表示的可编辑字段

我想为单个对象动态修改此选择。因此，我可以在需要时单独将此字段设为只读，并且还可以修改选择中的选项数量。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:42:42.273

一种方法是通过为您的管理类使用自定义表单类来设置该字段，就`readonly`好像它具有您正在寻找的条件一样。

例子：

```
class YourClassAdminForm(forms.ModelForm):
    class Meta:
        model = YourModel

    def __init__(self, *args, **kwargs):
        super(YourClassAdminForm, self).__init__(*args, **kwargs)

        # Check for your criteria to be `readonly`
        if self.instance.whatever:
            style = 'border:none;background-color:transparent;color:#666;cursor:default;'
            self.fields['position].widget_attrs={'readonly': True, 'style': style} 
```

您还可以在同一 if 语句中修改选项。Django 管理员不为更改列表中的只读字段提供样式，这就是我为小部件添加一些内联 CSS 的原因。

希望对您有所帮助。

# android - Android Universal Image Loader 更改 HxW url 参数

> ID：14789716
> 
> 赞同：0
> 
> 时间：2013-02-09T15:41:49.117
> 
> 标签：android, universal-image-loader

当我将图像 URI 传递给 imageLoader.displayImage 时，它​​会自动在每个 url 的末尾附加 _[W]x[H]。有没有办法覆盖该字符串，或完全阻止它被附加？

我正在调用的 API 已经为高度和宽度设置了查询字符串参数。如果我可以覆盖这个值，那就太好了。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:20:33.927

本附录仅用于内存缓存。所以同一张图片的不同大小可以缓存在内存中。本附录不适用于 HTTP 请求。

# c# - 如何改进这个 C# 动画代码

> ID：14789723
> 
> 赞同：0
> 
> 时间：2013-02-09T15:42:28.030
> 
> 标签：c#, animation, sleep

我有下面的代码，它是选取框标签的实现。我希望选取框标签在计算机上以最有效的速度运行，同时在不同的计算机上保持恒定的速度。我希望最小化跳过的“帧”数量，以便程序充分利用正在运行的计算机。但与此同时，我不一定要消耗 100% 的 CPU（这些陈述是否相互矛盾？我不确定）。

目前，我为动画循环的每次迭代都睡了 10 毫秒。这对我来说感觉很浪费，而且似乎它可能会减慢可能需要额外 10 毫秒的较慢计算机上的动画。我不确定在 sleep 方法中使用的最佳价值是什么，或者我是否应该睡觉。我已经阅读了一些关于 Sleep(0) 和 Sleep(1) 以及 Yield 和 SpinWait 的内容，但我无法理解这一切。

过多地调用 Invalidate 也是一件坏事吗？我可以通过调用它来超载它吗？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Drawing;
using System.ComponentModel;
using System.Diagnostics;
using Timer = System.Timers.Timer;
using System.Threading;

namespace Scoreboard
{
    public class MarqueeLabel : Label
    {
        private float _marqueeOffset;
        private float _marqueeMeasurement;

        public MarqueeLabel()
        {
            UseCompatibleTextRendering = true;

            this.SetStyle(ControlStyles.DoubleBuffer, true);
            this.SetStyle(ControlStyles.OptimizedDoubleBuffer, true);
            this.SetStyle(ControlStyles.AllPaintingInWmPaint, true);
            this.SetStyle(ControlStyles.UserPaint, true);

            Thread t = new Thread(ThreadRun);
            t.IsBackground = true;
            t.Start();
        }

        public void ThreadRun()
        {
            long time = DateTime.Now.Ticks;
            long diff = 0;

            while (true)
            {
                float step = -((float)diff / (20 * TimeSpan.TicksPerMillisecond)); //change "frame" based on the elapsed time
                _marqueeOffset = _marqueeOffset >= -_marqueeMeasurement ? _marqueeOffset + step : Width;

                Invalidate();
                Thread.Sleep(10); // how long should i wait here?

                long temp = DateTime.Now.Ticks;
                diff = temp - time;
                time = temp;
            }
        }

        protected override void OnPaint(PaintEventArgs e)
        {
            StringFormat stringFormat = new StringFormat();
            stringFormat.FormatFlags = StringFormatFlags.NoClip | StringFormatFlags.NoWrap;
            stringFormat.Trimming = StringTrimming.None;
            stringFormat.Alignment = StringAlignment.Near;

            Rectangle rect = ClientRectangle;
            rect.X += (int)_marqueeOffset;
            e.Graphics.DrawString(Text, Font, new SolidBrush(ForeColor), rect, stringFormat);
        }

        protected override void OnTextChanged(EventArgs e)
        {
            base.OnTextChanged(e);
            MeasureText();
        }

        protected override void OnFontChanged(EventArgs e)
        {
            base.OnFontChanged(e);
            MeasureText();
        }

        void MeasureText()
        {
            _marqueeMeasurement = CreateGraphics().MeasureString(Text, Font).Width;
        }
    }
} 
```

# javascript - 输入 type="file" 以在 javascript 中读取文件的替代方法

> ID：14789726
> 
> 赞同：2
> 
> 时间：2013-02-09T15:42:54.747
> 
> 标签：javascript, filereader

我想知道在给定文件名和路径的情况下，是否有任何方法可以在客户端使用 javascript 读取文件。我知道通读的方法：`input type="file"`.

我的意思是无需打开文件浏览器并选择文件，只需使用文件名读取它，例如 fopen。
如果不是其他方法，如何从文件名和路径在 javascript 中实例化 File 对象？

看到答案，我想多介绍一下我的目的。我并没有真正制作网页。我将浏览器用作任何系统上都可用的软件。html 页面都将是本地的。我这样做是为了让我拥有 js 的力量。鉴于这种情况，有没有办法设置允许它读取文件的权限标志？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T15:44:56.700

有[Drag 'n Drop](https://developer.mozilla.org/en-US/docs/DragDrop/Recommended_Drag_Types#file) API 这将是使用 JS 读取文件的另一个选项

* * *

总会有障碍，因此您的代码不会直接从客户端的文件系统中读取。这是为隐私和安全目的而设计的。

*   扩展/插件 - 沙盒将成为您的敌人，限制文件系统访问

*   Java Applet - 需要签名证书才能读取文件系统。自签名证书将生成“Will You Trust This Applet”提示，作为安全提示。

*   Input type=file - 让用户可以选择是否选择文件

*   拖放 - 让用户可以选择是否拖入文件

*   XHR - 同源策略会阻止您，尤其是当您在本地而不是在服务器上执行页面时。

*   JSONP - 但是，由于这绕过了 SOP，因此您的文件应该是 JSONP 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T05:01:13.757

我找到了我的问题的解决方案，在这里......确实，我们对 javascript 有限制，即每当用户或页面请求文件时，它必须通过弹出的额外窗口，但如果所有文件您可能要求在已知文件夹中，然后您可以要求用户指向压缩文件夹。可以使用[zip.js 之](http://gildas-lormeau.github.com/zip.js/core-api.html)类的工具打开压缩文件夹中需要的文件。谢谢 ：）

# ios - 存储试用期日期

> ID：14789729
> 
> 赞同：0
> 
> 时间：2013-02-09T15:43:04.273
> 
> 标签：ios, objective-c, cocoa-touch, nsuserdefaults

我正在实施一个试用版，然后将模型订阅到我的应用程序中，该模型允许用户免费使用该应用程序 14 天，然后在试用期结束时它会提醒他们试用期结束，他们需要订阅才能继续使用.

我在第一次打开应用程序时设置一个`NSDate`对象。`standardDefaults`然后它将当前日期与存储的日期进行比较，并将返回的时间间隔与 14 天的秒数进行比较。

我的问题是：`standardDefaults`如果用户删除应用程序，是否保留在内存中？如果没有，如何防止用户删除然后重新下载应用程序以重新开始试用期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T15:53:50.433

**Apple 对他们的沙盒**概念以及如果删除应用程序，所有数据都将被删除这一事实感到非常自豪。

确保此信息不会丢失的唯一方法是将其保存到服务器上的**数据库**中，并从您的应用程序中定期检查。

这作为技术解决方案。但是请确保，如果您打算在那里发布它，Apple 是否会允许在**AppStore中使用它。**

Apple 禁止试用版，但我不确定，如果您可以在一段时间内免费提供应用内购买的内容，然后再开始计费。

但主要规则是：曾经免费提供给用户的东西必须保持免费。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T16:23:25.610

有些应用程序对某些功能有试用期。查看 Puffin Browswer 或 ChessFree，它们都提供过期的功能。Puffin 允许 Flash 支持（实际上非​​常酷的功能！），几天后该功能被删除。尽管浏览器的其余部分仍然可以访问，但它的主要目的已被删除。

ChessFree 为您提供积分，您可以将这些积分用于不同的事情、课程、玩游戏、退步等……我不确定当您用完积分时会发生什么，但似乎您真的无法再做任何事情了。

如果我要实现这样的东西，我只会在钥匙串中保存一个变量，告诉他们还剩多少天或他们安装它的日期（作为字符串）。这样，如果应用程序被卸载，它也不会被删除（即使应用程序被删除，钥匙串项目也会保持存储，所以只要你想检查/减少/增加它）。我可能会为达到过期时间限制的用户保留一些功能（如 Puffin），但老实说，我相信这取决于你。

# jenkins - 如何让詹金斯运行“pip install”？

> ID：14789730
> 
> 赞同：15
> 
> 时间：2013-02-09T15:43:07.393
> 
> 标签：jenkins, continuous-integration, pip

我有一个 git repo，想让 jenkins 克隆它然后运行

```
virtualenv venv --distribute
/bin/bash venv/source/activate
pip install -r requirements.txt
python tests.py 
```

詹金斯的控制台输出是：

```
+ virtualenv venv --distribute
New python executable in venv/bin/python
Installing distribute..........................done.
Installing pip...............done.
+ /bin/bash venv/bin/activate
+ pip install -r requirements.txt
Downloading/unpacking flask (from -r requirements.txt (line 1))
  Running setup.py egg_info for package flask

SNIP

creating /usr/local/lib/python2.7/dist-packages/flask

error: could not create '/usr/local/lib/python2.7/dist-packages/flask': Permission denied

----------------------------------------
Command /usr/bin/python -c "import setuptools;__file__='/var/lib/jenkins/workspace/infatics-website/build/flask/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /tmp/pip-hkdBAi-record/install-record.txt failed with error code 1
Storing complete log in /home/jenkins/.pip/pip.log
Build step 'Execute shell' marked build as failure
Finished: FAILURE 
```

我试过在命令之前添加 sudo ，但它也不起作用：

```
+ sudo pip install -r requirements.txt
sudo: no tty present and no askpass program specified
Sorry, try again.
sudo: no tty present and no askpass program specified
Sorry, try again.
sudo: no tty present and no askpass program specified
Sorry, try again.
sudo: 3 incorrect password attempts
Build step 'Execute shell' marked build as failure
Finished: FAILURE 
```

任何想法如何解决这个问题？此外，当我以 jenkins 用户身份在终端中运行 pip install -r requirements.txt 时，它不需要 sudo 权限。我可以让 jenkins（进程）以 jenkins 用户身份运行吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-11T18:40:28.737

`sudo`您必须运行 use才能运行这一事实`pip`是一个很大的警告，即您的虚拟环境无法正常工作。构建输出显示`pip`正在您的系统站点包目录中安装需求，这不是 virtualenv 的工作方式。

您的构建脚本实际上并没有保留激活的虚拟环境。激活脚本设置的环境变量在子 bash 进程中设置，不会传播到构建脚本。您应该获取`activate`脚本而不是运行单独的 shell：

```
virtualenv venv --distribute
. venv/bin/activate 
pip install -r requirements.txt
python tests.py 
```

如果您将其作为一个构建步骤运行，那应该可以工作（并将您的软件包安装在*venv*中）。如果要添加更多步骤，则需要在其他步骤中设置 PATH 环境变量。您最好提供完整路径`pip`并`python`确保您不依赖系统包安装。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-21T13:28:21.740

尝试使用

```
stage('test') {
     agent {
          docker {
               image 'qnib/pytest'
          }
     }
     steps {
          sh 'virtualenv venv && . venv/bin/activate && pip install -r requirements.txt && python tests.py'
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-05T09:53:53.247

我完全同意所说的话....但是为了让这更“詹金斯”

创建一个基本项目 - 并在自定义步骤中执行类似这样的操作

```
PROJECT="Tree"

rm -Rf ~/Builds/$PROJECT
CODE_HOME=~/Builds/$PROJECT/code
PYENV_HOME=~/Builds/$PROJECT/python
export PYENV_HOME
export PYTHONPATH=""
echo "Creating new Python env"
/usr/local/bin/python3 -m venv  --clear $PYENV_HOME
source $PYENV_HOME/bin/activate

echo "Get Project"
mkdir -p $CODE_HOME
cd $CODE_HOME
git clone https://github.com/MyUsername/MyTree.git .

pip install --upgrade pip
pip install nose
pip install coverage
pip install -r requirements.txt
python setup.py build
python setup.py install 
```

在此之后，您可以进行鼻子测试等...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-10T11:50:59.287

这是我为使 Jenkins 在 Windows 机器上执行 pip 安装要求所做的工作：

在“执行 Windows 批处理命令”管道中

```
REM activate venv, update pip and install package
cmd /k "cd <path to your directory like C:\WebAPI> & .\venv\Scripts\activate.bat & python -m pip install -U pip & pip install -r .\requirements.txt" 
```

`cmd /k`执行 windows 命令提示符，您可以在那里添加任何命令。`&`是管道运营商。所以你可以有多个命令

# java - JTable+mysql数据库

> ID：14789731
> 
> 赞同：-1
> 
> 时间：2013-02-09T15:43:10.520
> 
> 标签：java, mysql, database, swing, jtable

我想将在 jtable 上输入的信息保存到 mysql 数据库。我专门将学生的分数从 jtable 保存到数据库中。这是我的代码片段，应该通过单击 gui 上的“保存”按钮来保存项目。

```
private void btnSaveActionPerformed(java.awt.event.ActionEvent evt)
{                                                                                               
  tblMarkSheet.getRowCount();
      try 
      { 

        String sql = "INSERT INTO marksheet(examName,streamName,className,termName,academicYear,pupilID,mathematics,english,kiswahili,science,SS_CRE,total) VALUES('" + cboExamName.getSelectedItem() + "','" + cboStream.getSelectedItem() + "','" + cboClass.getSelectedItem() + "','" + cboTerm.getSelectedItem() + "','" + cboAcademicYear.getSelectedItem() + "','" + Integer.parseInt(tblMarkSheet.getValueAt(row, 0).toString()) + "','" + Integer.parseInt(tblMarkSheet.getValueAt(row, 1).toString()) + "','" + Integer.parseInt(tblMarkSheet.getValueAt(row, 2).toString()) + "','" + Integer.parseInt(tblMarkSheet.getValueAt(row, 3).toString()) + "','" + Integer.parseInt(tblMarkSheet.getValueAt(row, 4).toString()) + "','" + Integer.parseInt(tblMarkSheet.getValueAt(row, 5).toString()) + "','" + Integer.parseInt(tblMarkSheet.getValueAt(row, 6).toString()) + "') ";
        stmt.execute(sql);
        JOptionPane.showMessageDialog(null, "Marks Saved successfully!");

      }
      catch (Exception e) 
      {
       JOptionPane.showMessageDialog(this, e.getMessage());
       e.printStackTrace();
      }
} 
```

我收到以下错误：

```
java.lang.NullPointerException
    at AmsProject.MarkSheet.btnSaveActionPerformed(MarkSheet.java:445)
    at AmsProject.MarkSheet.access$100(MarkSheet.java:18)
    at AmsProject.MarkSheet$3.actionPerformed(MarkSheet.java:185)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

我希望我可以在此处粘贴带有行号的代码，但我的 IDE 在显示数字时存在问题。第 445 行是这个

```
System.out.println(Integer.parseInt(tblMarkSheet.getValueAt(row, 6).toString())); 
```

第 18 行：

```
public class MarkSheet extends javax.swing.JFrame { 
```

和第 185 行：

```
btnSaveActionPerformed(evt); 
```

请帮帮我。我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:47:14.460

使用[Statement#executeUpdate](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29)进行数据库写入操作。也使用`PreparedStatement`而不是`Statement`防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。

从您的更新来看，变量`tblMarkSheet`似乎是`null`：

```
System.out.println(Integer.parseInt(tblMarkSheet.getValueAt(row, 6).toString())) 
```

检查它是否已正确分配并且在`actionPerformed`方法范围内可用。例如，确保您没有在实例化它的地方创建此变量的本地实例。

# html - 可以添加带有 css 伪内容的图像标题吗？

> ID：14789734
> 
> 赞同：0
> 
> 时间：2013-02-09T15:43:31.067
> 
> 标签：html, css, pseudo-element

我正在寻找最简单、最易于维护的方法：

![在此处输入图像描述](../Images/4170a2237c58577ee6d1f48720f86640.png)

这些是文本段，将附加到整个站点的某些图像中。他们都说同样的话，但是图像多种多样，并且来自 CMS。

我知道如何使用设置为相对位置的图像和在绝对定位的子 div 中使用“有更好的方法”的 div 来做到这一点。

但是，由于这需要将 HTML 添加到每个接受此处理的图像中，因此我正在寻找一种使用 :before 伪元素的 css 类来执行此操作的方法。到目前为止，将类应用于包装链接没有任何效果：

```
<a href="#" class="tabw"><img src="imagepath" alt=""></a>

.tabw img:before {
content: 'theres a better way';
color: red;
font-size: 18px;
} 
```

这种事情可能吗？在 CSS 中拥有全部内容意味着我所要做的就是让 CMS 在需要时应用 class 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:50:20.350

我会用 jQuery 这样做：

**html**

```
<div class="thumb">
    <img src="http://www.zupmage.eu/up/NvBtxn7LHl.png" alt="cover"/>
    <div class="caption">My caption</div>
</div> 
```

**CSS**

```
.thumb {
    position:relative;
    width:230px;
    height:230px;
}

.thumb img {
    max-width:100%;
}

.thumb .caption {
    display:none;
    position:absolute;
    top:0;
    height:20px;
    line-height:20px;
    width:100%;
    text-align:center;
    background:rgba(255,255,255,0.5);
} 
```

**jQuery**

```
$('.thumb').hover(function() {
    $(this).find('.caption').fadeIn();
}, function() {
    $(this).find('.caption').hide();
}); 
```

见[小提琴](http://jsfiddle.net/soyuka/zm937/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T19:56:56.603

**发现此线程的任何人的注意事项：** 在 Firefox 21 和 IE 9/10 中，这不适用于超大图像。即使全局设置为 max-width: 100%，它也会强制图像为 100%

我必须遵循上面选择的答案，**但**将 A 标签设置为`display:block`而不是`display:inline-block`修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T15:58:48.620

是的，`::before`不要`::after`在图像上工作。但是您可以将它们应用于包装链接：

```
a{
  position: relative;
}

a, a > img{
  display:inline-block;
}

a::before{
  content: 'theres a better way';
  position: absolute;    
  left: 0;
  top: 0;     
  width: 80%;
  height: 20px;
  left: 10%;  
  background: #000;
  opacity: 0.4;      
  color: red;
  font-size: 18px;
} 
```

[演示](http://jsfiddle.net/yHqE6/)

如果您想在 HTML 中添加文本，则必须在链接中放置一个带有它的真实元素（并对它应用相同的规则，但没有`content`）

# java - 将生日添加到我的 Employee 类 java

> ID：14789736
> 
> 赞同：0
> 
> 时间：2013-02-09T15:43:56.570
> 
> 标签：java, calendar

我敢肯定，当您第一次学习编程时，我们会创建某种程序来教我们接口、抽象和多态性。嗯，这就是我现在正在尝试做的事情。

我正在使用 Java 进行编码，并且正在尝试创建一个抽象员工类。不过，我遇到了一个小问题。我想为员工添加生日，但我不确定如何使用日历。

我希望能够像存储员工姓名一样存储生日，即 `public String employeeName;`。将其创建为变量将允许我在其上使用 getter 和 setter。

员工构造函数看起来像这样：

```
public Employee(String name, int idNumber, String Gender, 
    int year, int month, int day) 
```

总结一下如何使用日历创建生日变量，如果我想获取生日日期（无论设置为什么），我该怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T19:58:12.637

也许这是一种方法：

```
// declare  birthday as Date:

private Date birthday;

public Employee(String name, int idNumber, String gender, 
    int year, int month, int day) {

    this.name  = name;
    this.idNumber = idNumber;
    this.gender = gender;
    initBirthday(year, month, day);
}

private void initBirthday(int year, int month, int day) {
    // all int should be greater than 0 
    if (year > 0 && month > 0 && day > 0) {
        Calendar cal = Calendar.getInstance();
        cal.set(year, month-1 , day, 0, 0, 0);
// OR the explicit way 
 //           cal.set(Calendar.YEAR, year);
 //           cal.set(Calendar.MONTH, month - 1); // january == 0 !!!!
 //           cal.set(Calendar.DAY_OF_MONTH, day);
 //           cal.set(Calendar.HOUR,0);
 //           cal.set(Calendar.MINUTE,0);
 //           cal.set(Calendar.SECOND,0);
            birthday = cal.getTime(); // this returns a Date
    } else {
       // set birthday to a default value...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:47:35.067

您应该使用 java.util.Date（已弃用）或 java.util.Calendar，而不是使用 3 个不同的变量。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-09T15:46:52.527

Private DatebirthdayDate ... getter 将只是 Return birtdayDay 或 private CalendarbirthDate 和 getter 将是 retirnbirthdayDate.getDate()

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-09T15:47:31.230

你可以使用[`java.util.Date`](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html). 因此，您的`Employee`课程将如下所示：

```
public class Employee {
  private Date Birthday;
  public Employe(Date birthday) {}
} 
```

这就是想法。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-09T15:48:45.460

Java 在 java.util 包中提供了 Date 类，该类封装了当前的日期和时间。

还要在Employee的构造函数中传递Date Of Birth的参数：

```
import java.util.*;

public Employee(String name, int idNumber, String Gender, 
    int year, int month, int day, Date dob) 
```

# middleman - 中间人 3.0.11 不知道 template=html5-haml

> ID：14789737
> 
> 赞同：0
> 
> 时间：2013-02-09T15:44:04.480
> 
> 标签：middleman

我正在关注主网站上的入门。我复制粘贴：

```
middleman init my_new_mobile_project --template=html5-haml 
```

未知项目模板 'html5-haml'

```
middleman init my_new_mobile_project --template=html5 
```

作品...

中间人 3.0.11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T23:10:09.600

我也刚刚经历过，`html5-haml`对于以前的中间人版本，模板的说明似乎是遗留的。当前的 Middleman 不附带它，并且正在开发的[Middleman-HTML5BP-HAML](https://github.com/dannyprose/Middleman-HTML5BP-HAML)模板克隆`~/.middleman/html5bphaml/`和使用`middleman init my_new_project --template=html5bphaml`给我带来了问题，它安装了整个 gemset 并且依赖于旧的 gem，而不是使用提供的模板的那些.

作者说它很快就会与 Middleman 捆绑在一起，所以我希望在这种情况下模板的行为与其他模板的行为相似。

# java - 具有包访问权限的跨包继承（默认访问权限）

> ID：14789738
> 
> 赞同：3
> 
> 时间：2013-02-09T15:44:12.443
> 
> 标签：java, inheritance, package

所以我在包 A 中有一个名为 Vehicle 的类，在包 B 中有一个名为 Car 的类。 Car 类扩展了 Vehicle，因此它从 Vehicle 继承了某些元素。我的问题是 Car 继承了什么？

我认为它继承了所有公共方法和变量，但是在我的分配中，我有具有包访问权限的变量（不是公共的，不是私有的），所以我必须从 Vehicle in Car 中重新声明所有变量，对吗？此外，不清楚的是我们是否可以使用 equals() 方法比较 Car 和 Vehicle 对象，因为即使它们具有相同的名称，变量也不相同。另外，即使我在构造函数 Car 中使用 super()，我为什么还要重新声明所有变量？变量不是在 Vehicle 中启动的吗？另外，既然我必须从 Vehicle 中重新声明所有变量，那么我从 Vehicle 继承的所有公共方法都完全没用吗？从只有包访问权变量的类继承有什么意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:59:51.353

你理解错了。它继承了 Vehicle 类的所有内容。包保护的元素不能从子类*访问，仅此而已。*所以你不能访问这些字段和方法，你也不能覆盖它们。但这并不意味着您需要重新声明它们。

让我们举个例子。假设您设计了一个 Vehicle 类，并允许子类覆盖并访问车辆的颜色。但是假设您不希望子类与车辆的引擎发生冲突。因此，您将拥有以下内容：

```
public class Vehicle {
    private Engine engine;
    protected Color color = Color.BLACK;

    public Vehicle() {
        this.engine = new Engine();
    }

    public final void start() {
        System.out.println("starting engine...");
        engine.start();
        System.out.println("engine started");
    }

    public final Color getColor() {
        return this.color;
    }
}

public class Car extends Vehicle {

    public Car(Color color) {
        super();
        this.color = color;
    }
} 
```

汽车是交通工具。所以既然你可以启动一辆车，你也可以启动一辆车。由于汽车有发动机，汽车也有发动机。不可能从 Car 类内部修改引擎或对引擎做任何事情，因为它是 Vehicle 类的私有的，但汽车有一个。

`color`但是，该字段受到保护。这意味着 Car 类可以访问该字段。例如，它在构造函数中对其进行了修改，以便能够具有除黑色之外的另一种颜色。

试试下面的代码：

```
Car car = new Car();
car.start(); 
```

你会看到引擎启动了。

# sqlite - 如何使用 sqlite3.exe 从导出的 .sql 脚本创建数据库

> ID：14789739
> 
> 赞同：5
> 
> 时间：2013-02-09T15:44:16.553
> 
> 标签：sqlite

尝试将 SqlCe 数据库转换为 SQLite，我将其导出到`.sql`文件中。现在我将如何使用这个文件`sqlite.exe`创建一个数据库？`.sql`

把`sql3.exe`文件放在哪里？在 cmd 提示符或shell
中使用什么命令语法？`sqlite.exe`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T03:06:25.913

使用以下命令行：

```
sqlite3 -init dump.sql newsqlite.db "" 
```

它将`newsqlite.db`通过执行来自`dump.sql`. sqlite3 需要空字符串`""`才能自动退出。

如果`newsqlite.db`文件已经存在一些数据，导入可能会失败，除非您使用`IF NOT EXISTS`所有表和索引创建语句。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T15:52:59.047

放在`sqlite3.exe`你想放的任何地方，只要你记得那个地方，你就可以`sqlite3`从那里开始。

在命令提示符下将脚本应用于数据库（可能是新创建的）：

```
sqlite3.exe my-new-db.somesuffix < myscript.sql 
```

`sqlite3`在交互式会话中执行脚本：

```
sqlite3.exe my-new-db.somesuffix
....
.read myscript.sql
.... 
```

两种变体有时都是有效且可用的。（注意：如果您`.sql`是为非 sqlite 数据库生成的，我希望它需要进行一些更改才能在 . 中工作`sqlite3`。存储过程和用户​​定义的函数之类的东西肯定会丢失）。

# php - 使用 PHP 5.3 进行 JSON 编码

> ID：14789749
> 
> 赞同：0
> 
> 时间：2013-02-09T15:45:14.923
> 
> 标签：php, json, encode

我正在尝试将数据转换为 json，我可以对输出进行硬编码，但需要使用 MySQL 数据和一些代码动态生成代码来计算结果。json 输出将采用以下格式：

```
 {
      "inits": {
"version": "18.05.04_EP1",
"source": "Live",
"lowid": "265067",
"highid": "265068",
"ql": "300",
"name": "Ofab Shark Mk 1",
"inits": [
  {
    "-init": "430",
    "-percent": "100",
    "-slider": "DEF>===========][<AGG"
  },
  {
    "-init": "530",
    "-percent": "90",
    "-slider": "DEF>==========][=<AGG"
  },
  {
    "-init": "630",
    "-percent": "81",
    "-slider": "DEF>=========][==<AGG"
  },
  {
    "-init": "730",
    "-percent": "72",
    "-slider": "DEF>========][===<AGG"
  },
  {
    "-init": "830",
    "-percent": "63",
    "-slider": "DEF>=======][====<AGG"
  },
  {
    "-init": "930",
    "-percent": "54",
    "-slider": "DEF>======][=====<AGG"
  },
  {
    "-init": "1030",
    "-percent": "45",
    "-slider": "DEF>=====][======<AGG"
  },
  {
    "-init": "1130",
    "-percent": "36",
    "-slider": "DEF>====][=======<AGG"
  },
  {
    "-init": "1290",
    "-percent": "27",
    "-slider": "DEF>===][========<AGG"
  },
  {
    "-init": "1590",
    "-percent": "18",
    "-slider": "DEF>==][=========<AGG"
  },
  {
    "-init": "1890",
    "-percent": "9",
    "-slider": "DEF>=][==========<AGG"
  },
  {
    "-init": "2190",
    "-percent": "0",
    "-slider": "DEF>][===========<AGG"
  }
] 
```

} }

"inits": [init, percent, slider] 需要在循环内才能生成结果。我可以通过使用静态地做到这一点：

```
 array (
   'inits' => 
 array (
'version' => '18.05.04_EP1',
'source' => 'Live',
'lowid' => '265067',
'highid' => '265068',
'ql' => '300',
'name' => 'Ofab Shark Mk 1',
'inits' => 
array (
  0 => 
  array (
    '-init' => '430',
    '-percent' => '100',
    '-slider' => 'DEF>===========][<AGG',
  ),
  1 => 
  array (
    '-init' => '530',
    '-percent' => '90',
    '-slider' => 'DEF>==========][=<AGG',
  ),
  2 => 
  array (
    '-init' => '630',
    '-percent' => '81',
    '-slider' => 'DEF>=========][==<AGG',
  ),
  3 => 
  array (
    '-init' => '730',
    '-percent' => '72',
    '-slider' => 'DEF>========][===<AGG',
  ),
  4 => 
  array (
    '-init' => '830',
    '-percent' => '63',
    '-slider' => 'DEF>=======][====<AGG',
  ),
  5 => 
  array (
    '-init' => '930',
    '-percent' => '54',
    '-slider' => 'DEF>======][=====<AGG',
  ),
  6 => 
  array (
    '-init' => '1030',
    '-percent' => '45',
    '-slider' => 'DEF>=====][======<AGG',
  ),
  7 => 
  array (
    '-init' => '1130',
    '-percent' => '36',
    '-slider' => 'DEF>====][=======<AGG',
  ),
  8 => 
  array (
    '-init' => '1290',
    '-percent' => '27',
    '-slider' => 'DEF>===][========<AGG',
  ),
  9 => 
  array (
    '-init' => '1590',
    '-percent' => '18',
    '-slider' => 'DEF>==][=========<AGG',
  ),
  10 => 
  array (
    '-init' => '1890',
    '-percent' => '9',
    '-slider' => 'DEF>=][==========<AGG',
  ),
  11 => 
  array (
    '-init' => '2190',
    '-percent' => '0',
    '-slider' => 'DEF>][===========<AGG',
  ),
), 
```

), )

但是，我不知道如何调用任何方法来填充每个数组（init、percent、slider）的数组数据。我是 PHP 新手，很难找到 PHP 的正确用法，我是 ac# 开发人员。如果有人可以提供帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:52:11.913

你应该使用`for`. 我不知道您到底想要填充什么，但代码如下：

```
//Let $ar be the array you have posted
for($i=0;$i<count($ar["inits"]["inits"]); $i++) {
   $ar["inits"]["inits"][$i]["-slider"]="something";
} 
```

# plugins - Notepad ++悬停预览链接或颜色？

> ID：14789750
> 
> 赞同：23
> 
> 时间：2013-02-09T15:45:16.303
> 
> 标签：plugins, hover, notepad++, preview

我想知道是否有一个选项或**插件**，它允许我们**在悬停时预览****CSS 颜色**或**图像**，如下所示：

![在此处输入图像描述](../Images/20aa18934a9655734b900940f078a510.png)

而且，如果您将**鼠标悬停在 img src 上**- 预览 img ...？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-09-20T15:17:32.233

试试“记事本++的快速颜色选择器”。您双击十六进制颜色，会弹出一个颜色选择器以及一个预览。另一个很酷的事情是，如果您愿意，它会提供更多与“主题”相匹配的颜色。

**[这是链接快速颜色选择器](https://github.com/nulled666/nppqcp)**

***旁注：****曾经有一个功能或插件，直到最近，它实际上用颜色突出显示了十六进制代码的文本。在 N++ 更新后它突然出现，然后在另一个更新后消失了。无法弄清楚如何再次启用它。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:18:50.710

[在颜色预览方面， HTML 颜色](http://npp.campulka.net/)是我见过的最接近的东西。安装后，您可以选择颜色代码并单击按钮以显示预览。在预览中，您只需单击几下即可更改颜色。它也可用于插入新的颜色代码。

我从未见过的图像预览。

# c++ - C++ 函数调用顺序（增强） - 困惑

> ID：14789759
> 
> 赞同：0
> 
> 时间：2013-02-09T15:46:51.383
> 
> 标签：c++, visual-studio, visual-c++, boost, rounding

我有一个小 C++ 问题。首先，“我的”语言是 Java，所以我是 C++ 新手。我有这个功能：

```
double readableDouble( double input )
{
    return   (int)(input*100+0.5)/100.0;
} 
```

如您所见，没有什么特别的。现在我从另一个函数（在同一个类中）调用该函数：

```
 cout << readableDouble(4434.21121131234323243) <<endl; // result: 4434.22 all okay
        cout << readableDouble(tempTrack.getLenght()/1000.0); // result: 30.56 all okay
        string lenght = boost::lexical_cast<string>(readableDouble((tempTrack.getLenght()/1000.0))); // result 30.55999999999982\. expected: 30.56 
```

getLenght() 返回一个双精度值。（两次通话相同的两倍）

我不太确定这是怎么回事？

.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T15:52:40.683

[从另一个帖子](https://stackoverflow.com/questions/5016464/boostlexical-cast-conversion-double-to-string-c)（信用到[麦克风](https://stackoverflow.com/users/35656/mic)）：

> 从[boost lexical_cast](http://www.boost.org/doc/libs/1_45_0/libs/conversion/lexical_cast.htm)的文档中：
> 
> 对于更多涉及的转换，例如精度或格式需要比 lexical_cast 的默认行为提供的更严格的控制，建议使用传统的字符串流方法。如果转换是数字到数字，则 numeric_cast 可能提供比 lexical_cast 更合理的行为。
> 
> 例子：
> 
> ```
> #include <sstream>
> 
>     #include <iomanip>
> 
>     int main() {
>         std::ostringstream ss;
>         double x = 5;
>         ss << std::fixed << std::setprecision(2);
>         ss << x;
>         std::string s = ss.str();
>         return 0;
>     } 
> ```

# assembly - 斐波那契：汇编语言

> ID：14789763
> 
> 赞同：1
> 
> 时间：2013-02-09T15:47:20.960
> 
> 标签：assembly, x86, dos, fibonacci

我正在尝试将斐波那契数列模拟到用户给出的数字。我得到了这个代码，但它只要求用户输入一位数。它只接受从 3 到 9 的输入。

```
.MODEL SMALL

.STACK 64

.DATA
        VAL1    DB      01H
        VAL2    DB      01H
        LP      DB      00H
        V1      DB      00H
        V2      DB      00H
        NL      DB      0DH,0AH,'$'

.CODE

MAIN PROC
        MOV AX,@DATA
        MOV DS,AX

        MOV AH,01H
        INT 21H
        MOV CL,AL
        SUB CL,30H
        SUB CL,2

        MOV AH,02H
        MOV DL,VAL1
        ADD DL,30H
        INT 21H

        MOV AH,09H
        LEA DX,NL
        INT 21H

        MOV AH,02H
        MOV DL,VAL2
        ADD DL,30H
        INT 21H

        MOV AH,09H
        LEA DX,NL
        INT 21H

DISP:
        MOV BL,VAL1
        ADD BL,VAL2

        MOV AH,00H
        MOV AL,BL
        MOV LP,CL
        MOV CL,10
        DIV CL
        MOV CL,LP

        MOV V1,AL
        MOV V2,AH

        MOV DL,V1
        ADD DL,30H
        MOV AH,02H
        INT 21H

        MOV DL,V2
        ADD DL,30H
        MOV AH,02H
        INT 21H

        MOV DL,VAL2
        MOV VAL1,DL
        MOV VAL2,BL

        MOV AH,09H
        LEA DX,NL
        INT 21H

        LOOP DISP

        MOV AH,4CH
        INT 21H

MAIN ENDP
END MAIN 
```

我试图修改它，让它接受两位数的输入，但它崩溃了。这是修改后的代码：

```
.MODEL SMALL

.STACK 64

.DATA
Input db 13, 10, "Input the number of sequence: $"
Output db 13, 10, "The sequence is $"
        VAL1    DB      01H
        VAL2    DB      01H
        LP      DB      00H
        V1      DB      00H
        V2      DB      00H
        NL      DB     ' $'
        INP1A   DB      ?
        INP1B   DB      ?
        inputNum DB     ?

.CODE

MAIN PROC
        MOV AX,@DATA
        MOV DS,AX

        ;display Input message
        LEA DX, Input
        MOV AH, 09h
        INT 21h

        ;gets the tens digit of sequence number
        MOV AH,01h
        INT 21h
        SUB AL,'0'
        MOV INP1B,AL

        ; gets the ones digit of sequence number
        MOV AH,01h
        INT 21h
        SUB AL,'0'
        MOV INP1A,AL

        ;makes the two digits of the sequence number a whole number
        MOV AL, INP1B
        MOV CH, 10
        MUL CH
        MOV BL, INP1A
        ADD BL, AL
        MOV inputNum, BL
        ADD inputNum, '0'

        ;input --> CL
        MOV CL, inputNum
        SUB CL,30H
        SUB CL,2

        ;display Output message
        LEA DX, Output
        MOV AH, 09H
        INT 21H

        ;display first Fib number : 1
        MOV AH,02H
        MOV DL,VAL1
        ADD DL,30H
        INT 21H

        ;display space
        MOV AH,09H
        LEA DX,NL
        INT 21H

        ;display second Fib number : 1
        MOV AH,02H
        MOV DL,VAL2
        ADD DL,30H
        INT 21H

        ;display space
        MOV AH,09H
        LEA DX,NL
        INT 21H

DISP:
        ;adds the two previous numbers
        MOV BL,VAL1
        ADD BL,VAL2     ; new added number

        MOV AH,00H
        MOV AL,BL       ; new number ---> AL

        MOV CL,10   
        MOV LP,CL       ; LP will have value of CL (inputNumber)
        DIV CL
        MOV CL,LP

        MOV V1,AL       ; V1 = new number (added)
        MOV V2,AH       ; V2 = null

        MOV DL,V1       ; DL = new number
        ADD DL,30H  ; DL -> string  
        MOV AH,02H      ; print value of V1
        INT 21H

        MOV DL,V2       ; DL = V2 (null)
        ADD DL,30H      ; DL -> string
        MOV AH,02H      ; print value of V2
        INT 21H

        MOV DL,VAL2     ; DL = new added number
        MOV VAL1,DL     ; VAL1 = DL = new added number
        MOV VAL2,BL     ; VAL2 = new added number = VAL2

        ; display space
        MOV AH,09H
        LEA DX,NL
        INT 21H

        LOOP DISP

        MOV AH,4CH
        INT 21H

MAIN ENDP
END MAIN 
```

有什么解决方案可以解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T20:19:54.920

存在一个问题：

```
;makes the two digits of the sequence number a whole number
MOV AL, INP1B
MOV CH, 10
MUL CH
MOV BL, INP1A
ADD BL, AL
MOV inputNum, BL
ADD inputNum, '0' 
```

Add '0' 用于将十六进制数字转换为其 ASCII 表示（'0' 是 0x30，'1' 是 0x31，等等）。如果您有两位数，那将是 0 到 99 之间的数字。如果大于 10，则添加“0”会给出不正确的值。但是，这不应该使您的程序崩溃。

# jquery - Rails 和 ajax 全局错误处理问题

> ID：14789764
> 
> 赞同：2
> 
> 时间：2013-02-09T15:47:21.933
> 
> 标签：jquery, ruby-on-rails, ajax, error-handling, pjax

我有以下全局 ajax 错误处理程序：

```
App.Utils.AjaxGlobalErrorHandler = {

  isUnauthenticatedStatus: function (request) {
    var status = request.status
    return status == 403;
  },

  displayError: function() {
    $('#ajax-error-modal-window').modal('show');
    $('#ajax-error-message').append("An error occurred. Please, try again.");
  },

  errorMsgCleanup: function() {
    $('#ajax-error-modal-window').on('hidden', function() {
      $('#ajax-error-message').empty();
    });
  },

  handleUnauthorized: function() {
    if ($('#signin').length == 0) {
      window.location = '/signin';
    }
    else {
      $('#signin').trigger('click');
    }
  },

  bindEvents: function() {
    $(document).ajaxError(function(e, xhr, settings, exception) {
      if (App.Utils.AjaxGlobalErrorHandler.isUnauthenticatedStatus(xhr)) {
        App.Utils.AjaxGlobalErrorHandler.handleUnauthorized();
      }
      else {
        App.Utils.AjaxGlobalErrorHandler.displayError();
        App.Utils.AjaxGlobalErrorHandler.errorMsgCleanup();
      }
    });
  }

}; 
```

然后是您的标准 Rails 全局异常处理：

```
class ApplicationController < ActionController::Base
  rescue_from Exception, :with => :handle_exceptions

  protected

  def handle_exceptions(e)
    case e
    when AbstractController::ActionNotFound, ActiveRecord::RecordNotFound, ActionController::RoutingError
      not_found
    else
      internal_error(e)
    end
  end

  def not_found
    render :file => "#{Rails.root}/public/404.html", :layout => false, :status => 404
  end

  def internal_error(exception)
    if Rails.env == 'production'
      ExceptionNotifier::Notifier.exception_notification(request.env, exception).deliver
      render :file => "#{Rails.root}/public/500.html", :layout => false, :status => 500
    else
      throw exception
    end
  end

end 
```

如您所见，我的 ajax 错误处理显示了一个对话框。我遇到的问题是，当我通过引发`ActiveRecord::RecordNotFound`返回 html 响应的控制器操作中的异常来测试错误处理时，在 Rails 呈现 404 页面之前触发 ajaxError 事件，对话框是显示，然后在呈现 404 页面后消失。我没想到在这种情况下会触发 ajaxError 事件。有人可以解释为什么吗？当异常应该由服务器端处理时，如何避免触发 ajaxError？ **顺便说一句，我正在使用 pjax**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:48:48.193

这是因为 jQuery 将 404 处理为错误：[https ://github.com/jquery/jquery/blob/master/src/ajax.js#L613](https://github.com/jquery/jquery/blob/master/src/ajax.js#L613)

在示例中，您提供的服务器在应用程序控制器中捕获 ActiveRecord::RecordNotFound 异常并返回#not_found 的结果。作为响应，jQuery 检测到 404 并引发 ajaxError 事件。

希望这可以帮助。

# performance - 当前 CPU 的成本更高：算术运算还是条件？

> ID：14789771
> 
> 赞同：5
> 
> 时间：2013-02-09T15:47:53.097
> 
> 标签：performance, cpu, conditional-statements, arithmetic-expressions

20-30 年前，除法等算术运算是 CPU 成本最高的运算之一。在一段重复调用的代码中保存一个部门是显着的性能提升。但是今天的 CPU 具有快速的算术运算，并且由于它们大量使用[指令流水线](https://en.wikipedia.org/wiki/Instruction_pipeline)，因此条件会破坏有效的执行。如果我想优化代码以提高速度，我应该更喜欢算术运算而不是条件吗？

## 示例 1

假设我们要实现模运算`n`。什么会表现得更好：

```
int c = a + b;
result = (c >= n) ? (c - n) : c; 
```

或者

```
result = (a + b) % n; 
```

?

## 示例 2

假设我们将 24 位有符号数字转换为 32 位。什么会表现得更好：

```
int32_t x = ...;
result = (x & 0x800000) ? (x | 0xff000000) : x; 
```

或者

```
result = (x << 8) >> 8; 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:53:16.787

如果你想优化速度，你应该告诉你的编译器优化速度。现代编译器通常会在这方面胜过您。

出于这个原因，我有时会惊讶地尝试将汇编代码与原始源相关联。

优化源代码的*可读性*，让编译器做它最擅长的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T16:06:50.520

编译器的作者和构建硬件的人已经挑选和腌制了所有低调的果实。如果你是那种需要问这样的问题的人，你不可能手动优化任何东西。

虽然在 20 年前，相对称职的程序员可以通过下降到汇编来进行一些优化，但现在它是专家的领域，专门研究目标架构；此外，优化不仅需要了解程序，还需要了解它将处理的数据。一切都归结为启发式、不同条件下的测试等。

简单的性能问题不再有简单的答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-09T16:36:33.977

我希望在示例 #1 中，第一个会表现得更好。编译器可能会应用一些小技巧来避免分支。但是您正在利用编译器极不可能推断出的知识：即总和始终在范围内`[0:2*n-2]`，因此一个减法就足够了。

例如#2，第二种方式在现代 CPU 上速度更快，而且更易于遵循。在任何一个版本中，明智的评论都是合适的。（看到编译器将第一个版本转换为第二个版本，我不会感到惊讶。）

# sql - 用 2 个外键内连接到一个主键

> ID：14789773
> 
> 赞同：4
> 
> 时间：2013-02-09T15:48:05.890
> 
> 标签：sql, sql-server, tsql, join

我有一个名为 branch (branchid, branchname) 的表和另一个名为 transfer transfer(tranferid, sourcebranch, destinationbranch) 的表

sourcebranch 和destinationbranch 都是分支表的branchid 的Fk。我需要显示一个看起来像这样的查询

**Tranferid Source Destination 4 uk us**

但我能得到的只是这样的东西

**Transferid Source Destinationid 4 uk 3**

查询样本

*从 branch.branchid == transfer.sourcebranch 上的转移内部连接分支中选择 tranferid、branch.branchname、transfer.destinationbranch*

如何让目标分支显示。我心目中的CTE

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T15:49:54.843

您需要在表`branch`上连接`transfer`两次，以便获得每列的值。

```
SELECT  a.*, 
        b.branchName AS sourceBranchName,
        c.branchName AS destinationBranchName
FROM    transfer a
        INNER JOIN branch b
            ON a.sourcebranch = b.branchID
        INNER JOIN branch c
            ON a.destinationbranch = c.branchID 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# mysql - 将组合框添加到链接到数据表的数据网格

> ID：14789778
> 
> 赞同：2
> 
> 时间：2013-02-09T15:48:30.370
> 
> 标签：mysql, vb.net, datagrid, datatable, wpfdatagrid

我的程序是一个用 VB.net 编写的 WPF 应用程序。我也接受面向 C# 的答案，因为我应该能够理解和/或转换。

我有一个数据表，我通过 MySqlDataAdapter 填充了我的 MySQL 数据库中的数据。

我的 dataGrid 目前有 AutoGenerateColumns="TRUE"。

我将我的 dataTable 数据加载到我的 dataGrid 中`DataGrid1.ItemsSource = MyDataTable.DefaultView`

在我的表中，我有一个标有“callType”的列，我希望它是一个组合框（DataGridComboBoxColumn）

我已经尝试了各种可以被描述为在黑暗中丢失的东西。

是否有人能够将我推向正确的方向或向我展示一些有关如何在与该 dataGrid 的数据链接的 dataGrid 中创建组合框列的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:01:32.783

检查[如何：自定义 DataGrid 控件中的自动生成的列？](http://msdn.microsoft.com/en-us/library/cc903950%28v=vs.95%29.aspx). 它说 ：

> 您可以处理 AutoGeneratingColumn 事件来修改、替换或取消正在生成的列。当 ItemsSource 属性更改且 AutoGenerateColumns 属性为 true 时，对于绑定数据类型中的每个公共、非静态属性，AutoGeneratingColumn 事件发生一次。

xml:

```
<DataGrid AutoGeneratingColumn="DataGrid_AutoGeneratingColumn"  /> 
```

代码 ：

```
Private Sub DataGrid_AutoGeneratingColumn(sender As System.Object, e As System.Windows.Controls.DataGridAutoGeneratingColumnEventArgs)

        If e.PropertyName = "callType" Then

            Dim combo As New DataGridComboBoxColumn

            combo.ItemsSource = MyItemsSource
            combo.DisplayMemberPath = "TypeName" 
            combo.SelectedValuePath = "TypeID"

            Dim comboBinding As New Binding("callType")
            combo.SelectedValueBinding = comboBinding

            e.Column = combo

        End If

    End Sub 
```

# c++ - 为什么这个帕斯卡三角程序不起作用？

> ID：14789782
> 
> 赞同：0
> 
> 时间：2013-02-09T15:48:53.757
> 
> 标签：c++, pascals-triangle

行是用户输入的。

```
cout << "Input the number of rows: ";
cin >> row;
column=row;

int triangle[row][column];

for (i=0;i<=row;i++){
    for (j=0;j<=column;j++){
           triangle[i][j]=0;
    }
}

for (i=0;i<=row;i++){
    for (j=0;j<=i;j++){
           if (j==0 || j==i){
           triangle[i][j]=1;
           } else {
           triangle[i][j]=triangle[i-1][j]+triangle[i-1][j-1];
           }
    }
}

cout << "Pascals triangle with " << row << " rows.";

for (i=0;i<=row;i++){
    for (j=0;j<=i;j++){
        cout << triangle[i][j] << "\t";
    }
    cout << endl;
} 
```

当行为 7 时，它确实给出了正确的结果，但是当输入的行大于 8 时，它会以某种方式崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:52:32.803

很可能`triangle`没有为您使用的索引声明足够的内存。如果`row==column==8`那么你需要像这样声明它：

```
double triangle[9][9]; 
```

因为 C++ 使用从零开始的索引，这允许索引在 0 到 8 范围内（包括 0 到 8）。您的声明很可能是这样的：

```
double triangle[8][8]; 
```

# asp.net - 编辑列表视图时使用代码隐藏填充 DDL

> ID：14789795
> 
> 赞同：0
> 
> 时间：2013-02-09T15:50:18.693
> 
> 标签：asp.net, listview, drop-down-menu

我有一个带有 LayoutTemplate、ItemTemplate 和 EditTemplate 的 ListView。列表视图绑定到代码隐藏中的数据表。项目模板由标签和复选框组成。列表视图只会显示一条记录。在 ItemTemplate 中，列表视图效果很好。单击“编辑”按钮时，将调用我的 ItemEditing 方法，该方法具有以下内容。顺便说一句，EditTemplate 有文本框复选框和 4 个下拉列表。

```
Protected Sub ListView1_ItemEditing(ByVal sender As Object, ByVal e As ListViewEditEventArgs) Handles ListView1.ItemEditing

    ListView1.EditIndex = e.NewEditIndex

    'Create SQL, Execute and save to Datatable and bind to ListView1
    'Session("SID") is the ID of the Subject we are viewing.
    LoadData(Session("SID"))

End Sub 
```

不幸的是，由于下拉列表中有 lo ListItems，我收到一个错误，即绑定失败，因为下拉列表中不存在该值。

所以我试图在 ItemCreated 时填充我的下拉列表......我的代码是......

```
Protected Sub ListView1_ItemCreated(ByVal sender As Object, ByVal e As ListViewItemEventArgs) Handles ListView1.ItemCreated

    Try
        Dim ddl_Type As DropDownList = ListView1.EditItem.FindControl("ddl_Type")
        Dim ddl_Suitability As DropDownList = ListView1.EditItem.FindControl("ddl_Suitability")
        Dim ddl_Brands As DropDownList = ListView1.EditItem.FindControl("ddl_Brands")
        Dim ddl_Status As DropDownList = ListView1.EditItem.FindControl("ddl_Status")

        'We need to populate ddls
        SqlStr = "SELECT Type As ddlText FROM tbl_SType ORDER BY Type"
        PopulateDDL(ddl_Type, SqlStr, "Please Select...")

        SqlStr = "SELECT Suitability As ddlText FROM tbl_Suitability ORDER BY Suitability"
        PopulateDDL(ddl_Suitability, SqlStr, "Please Select...")

        SqlStr = "SELECT Brand As ddlText FROM tbl_Brands ORDER By Brand"
        PopulateDDL(ddl_Brands, SqlStr, "Please Select...", "Other...")

        SqlStr = "SELECT StatusText As ddlText, Status As ddlValue FROM tbl_Status ORDER BY Status"
        PopulateDDLvalue(ddl_Status, SqlStr, "Not Visited Yet", "0")
    Catch ex As Exception

    End Try

End Sub 
```

但是 FindControl 找不到控件。关于我哪里出错的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:05:39.253

作为一种解决方法，您可以将数据绑定保留在 ItemDataBound 事件中，并以编程方式设置下拉列表的选定值。我知道这很痛苦，但它可以解决您遇到的问题。

# c++ - 双向链表的复制构造函数

> ID：14789800
> 
> 赞同：-3
> 
> 时间：2013-02-09T15:50:43.157
> 
> 标签：c++

我在制作复制构造函数时遇到问题。考虑下面的代码：

在 List.h 中

```
template <class T>
struct ListNode
{
    T value;
    ListNode<T> *next;
    ListNode<T> *prev;

    ListNode(T theVal)
    {
        this->value = theVal;
        this->next = NULL;
        this->prev = NULL;
    }
};

template <class T>
class List
{
    ListNode<T> *head;

public:
    List();
    List(const List<T>& otherList); // Copy Constructor.
    ~List();
    }; 
```

在 list.cpp 中

```
template <class T>
List<T>::List()
{
    head=NULL;
}
template <class T>
List<T>::~List()
{
}
template <class T>
List<T>::List(const List<T>& otherList)
{
} 
```

//我有谷歌的问题。概念很简单。创建一个新的头并为其节点分配旧列表节点的//值。// 所以因为我已经尝试了以下。

```
ListNode<T> *old = head; // pointer to old list.
ListNode<T> *new;// pointer to new head.

while (old->next!=NULL){
new->value = old->value;
old = old->next; 
} 
```

// 唯一的问题是如何创建一个指向我的新复制列表的新头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:58:58.770

整个问题尚不清楚，代码存在许多问题，包括无用的析构函数和不复制赋值运算符。

一般不能在一个`.cpp`文件中定义模板，整个模板定义必须对代码的所有用户可见，这通常意味着在头文件中定义整个模板。

```
ListNode<T> *new;// pointer to new head. 
```

`new`是 C++ 中的关键字，不能用于变量名。

> // 唯一的问题是如何创建一个指向我的新复制列表的新头。

复制了什么清单？您实际上并未复制任何内容或创建任何新节点。

您需要创建节点的副本`otherList`

```
template <class T>
List<T>::List(const List<T>& otherList)
{
  ListNode<T>* node = otherList.head;
  ListNode<T>** tail = &head;
  while (node)
  {
    *tail = new ListNode<T>(node->value);
    tail = &tail->next;
    node = node->next;
  }
} 
```

# php - PHP 社交分享添加计数器

> ID：14789803
> 
> 赞同：2
> 
> 时间：2013-02-09T15:50:53.763
> 
> 标签：php

这是一个社交分享脚本。我想回显每个数组以显示链接。有人可以解释一下我该怎么做吗？

这是**分享按钮**部分

```
function simple_social_sharing( $attr_twitter = null, $attr_items = null ) {

    $share_items = array ();

    // set each item
    $item_facebook = array(
        "class" => "facebook",
        "href" => "http://www.facebook.com/sharer.php?u={$url}&amp;t={$browser_title_encoded}",
        "text" => "Share on Facebook"
    );
    $item_twitter = array(
        "class" => "twitter",
        "href" => "http://twitter.com/share?text={$page_title_encoded}&amp;url={$url}&amp;via={$twitter_account}",
        "text" => "Share on Twitter"
    );

    // test whether to display each item
    if($item_toggles) {
        // explode into array
        $item_toggles_array = explode( ",", $item_toggles );
        // set each item on or off
        $show_facebook = $item_toggles_array['0'];
        $show_twitter = $item_toggles_array['1'];
    }
    else {
        $display_all_items = 1;
    }

    // form array of items set to 1
    if( $show_facebook==1 || $display_all_items ) {
        array_push( $share_items, $item_facebook );
    }
    if( $show_twitter==1 || $display_all_items) {
        array_push( $share_items, $item_twitter );
    }

    // if one or more items
    if ( ! empty( $share_items ) ) {
        // create output
        foreach ( $share_items as $share_item ) {   
            $share_output = "<a class=\"ss-share-link ico-{$share_item['class']}\" href=\"{$share_item["href"]}\" rel=\"nofollow\" target=\"_blank\">{$share_item['text']}</a>\n";      
        }
        // echo output
        echo $share_output;
    }

} 
```

我试图通过这种方式来做到这一点**echo simple_social_sharing($share_output[1]);** 但没有奏效。

# windows - Windows HOST 文件 - 仅重定向目录

> ID：14789817
> 
> 赞同：0
> 
> 时间：2013-02-09T15:52:26.303
> 
> 标签：windows, redirect, host

对于个人用途，我需要将网站上的远程目录重定向到本地目录。我几乎可以肯定我必须将这些东西放入 Windows 主机文件中。我想做类似的事情：

```
#Local remote
mywebsite.com/directory localhost/directory 
```

但我想继续访问`mywebsite.com/whatever`where `whatever`is different of `directory`。

有没有办法做到这一点，还是我需要使用浏览器插件？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T16:00:16.423

hosts 文件仅用于将主机名转换为 IP 地址。您不能以这种方式阻止/重定向任何自定义 URL。

如果您正在为此搜索外部应用程序，我认为**Fiddler**是您所需要的：[http ://www.fiddlertool.com/fiddler/dev/scriptsamples.asp](http://www.fiddlertool.com/fiddler/dev/scriptsamples.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T15:55:00.663

hosts 文件只允许您为某些主机名设置 IP 地址。它不会在这里帮助你。浏览器插件在这里似乎有点矫枉过正，但这是可能的。您可以尝试找到一个 HTTP 代理，它允许您以您想要的方式更改请求。

无论如何，这将需要一些外部应用程序/插件。

# php - 合并循环中的数组

> ID：14789825
> 
> 赞同：2
> 
> 时间：2013-02-09T15:52:55.443
> 
> 标签：php, arrays, merge

我有一组数组作为从 mysql 表查询的结果，在“while”循环中制作：

```
while ($row = mysql_fetch_array($result)) {
    $k_id =  $row['kw'];
    $path[$level] = $k_id;

    if(array_search('7', $path)) {
        $it = new CachingIterator(new ArrayIterator($path));
        $t1 = array();
        foreach ( $it as $v ) {
            $var = array("no" => $v,"to" => 0);
            if ($it->hasNext()) {
                $var["to"] = $it->getInnerIterator()->current();
            }
            $t1[] = $var;
        }

        extract($t1, EXTR_PREFIX_ALL, "t1");

        for ($i = 0; $i < sizeof($t1); $i++) {
            $dmp = print_r($t1[$i], result);
            echo $dmp."<br />";
        }
    }     
} 
```

echo $dmp 的结果是一组数组：

```
Array ( [no] => 2 [to] => 1 )
Array ( [no] => 1 [to] => 4 )
Array ( [no] => 4 [to] => 7 )
Array ( [no] => 7 [to] => 0 )
Array ( [no] => 2 [to] => 1 )
Array ( [no] => 1 [to] => 5 )
Array ( [no] => 5 [to] => 7 )
Array ( [no] => 7 [to] => 0 )
Array ( [no] => 2 [to] => 1 )
Array ( [no] => 1 [to] => 6 )
Array ( [no] => 6 [to] => 7 )
Array ( [no] => 7 [to] => 0 )
Array ( [no] => 2 [to] => 1 )
Array ( [no] => 1 [to] => 3 )
Array ( [no] => 3 [to] => 7 )
Array ( [no] => 7 [to] => 0 ) 
```

我的问题是如何合并具有相同“否”键值的数组

mysql_fetch 之前的 var_dump：

```
array(0) { } array(1) { [0]=> string(1) "2" } array(2) { [0]=> string(1) "2" [1]=> string(1) "1" } array(3) { [0]=> string(1) "2" [1]=> string(1) "1" [2]=> string(1) "4" } 
```

因此，我想获得数组，我可以轻松地从以下位置生成这样的代码：

```
 "nodeTo": "4", 
    "nodeFrom": "1"

"nodeTo": "5", 
    "nodeFrom": "1"

"nodeTo": "6", 
    "nodeFrom": "1"

"nodeTo": "3", 
    "nodeFrom": "1"

    "id": "1" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:28:25.463

```
foreach ($t1 as $dmp) {
    $combined[$dmp["no"]][] = $dmp["to"];
} 
```

结果：

```
Array
(
    [2] => Array
        (
            [0] => 1
            [1] => 1
            [2] => 1
            [3] => 1
        )

    [1] => Array
        (
            [0] => 4
            [1] => 5
            [2] => 6
            [3] => 3
        )

    [4] => Array
        (
            [0] => 7
        )

    [7] => Array
        (
            [0] => 0
            [1] => 0
            [2] => 0
            [3] => 0
        )

    [5] => Array
        (
            [0] => 7
        )

    [6] => Array
        (
            [0] => 7
        )

    [3] => Array
        (
            [0] => 7
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T16:26:21.730

**我真的建议您在从 sql 获取结果时直接创建正确的数组结构。这将为您节省额外的 foreach 循环。**

为了完整起见，我为您准备了一个示例，您可以如何按照您的设想进行操作：（为了好玩；））

```
$a = array (
    array ('no' => 2, 'to' => 1), //  |___ will be merged
    array ('no' => 2, 'to' => 1), //  |
    array ('no' => 2, 'to' => 2),
    array ('no' => 3, 'to' => 2)
);

$result = array();
foreach($a as $item) {
    if(!array_key_exists($item['no'], $result)) {
        $result[$item['no']] = array($item['to']);
    } else if(!in_array($item['to'], $result[$item['no']], TRUE)) {
        $result[$item['no']][] = $item['to'];
    }
}

// get all to values with no=2 :
$elements = $result[2]; 
```

转换后结果数组的 var_dump 可能有助于理解发生了什么：

```
//
var_dump($result);

/* Output:

array(2) {
  [2] =>  <---- 'no' value as index
  array(2) {
    [0] =>    -
    int(1)     |__ different 'to' values
    [1] =>     |
    int(2)    -
  }
  [3] => <---- 'no' value as index
  array(1) {
    [0] =>
    int(2)   <------ 'to' value for 'no'==3
  }
}

*/ 
```

正如我所说，您应该在从 sql 中获取结果时直接创建此数组结构。不幸的是，没有内容`$path`我不能说如何实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T16:20:27.217

你可以更换

```
 $t1[] = $var; 
```

和

```
$t1[$v][] = $var; 
```

它将根据 ID 进行分组...关于如何输出结果的示例：

```
foreach ( $t1 as $no => $group ) {
    echo "Merge $no <br />" ;
    foreach ( $group as $list ) {
        var_dump($list);
    }
} 
```

# java - Criteria.uniqueResult 返回 null，但没有抛出错误

> ID：14789833
> 
> 赞同：1
> 
> 时间：2013-02-09T15:53:51.557
> 
> 标签：java, mysql, hibernate, criteria-api

我只是在学习休眠，我正在尝试查询一个表以找到一个具有特定 ID 的人。当我调用criteria.unique 结果时，没有抛出错误，但它返回一个空值，谁能帮我弄清楚发生了什么？

```
@Entity
@Table(name="employees")
public class Employee {
private long emp_no; 
private Date birth_date; 
private String first_name;
private String last_name;
private char gender;
private Date hire_date; 

private Set<DepartmentEmp> department_emp = new HashSet<DepartmentEmp>(); 
private Set<DepartmentManager> department_manager = new HashSet<DepartmentManager>();
private Set<Projects> projects; 
private ContactInfo contactInfo; 

public Employee(){};
public Employee(long empt_no, Date birth_date, String first_name, String last_name, 
        char gender, Date hire_date){
        this.emp_no = emp_no;
        this.birth_date = birth_date; 
        this.first_name = first_name;
        this.last_name = last_name;
        this.gender = gender; 
        this.hire_date = hire_date; 
}

 @Id
 @Column(name="emp_no")
    public long getEmp_no() { return emp_no; }
    public void setEmp_no(long emp_no) {this.emp_no=emp_no;}

 @Column(name="birth_date")
    public Date getBirth_date() { return birth_date; }
    public void setBirth_date(Date birth_date) {this.birth_date = birth_date;}

 @Column(name="first_name")
    public String getFirst_name() { return first_name; } 
    public void setFirst_name(String name) { this.first_name = name; }

 @Column(name="last_name")
    public String getLast_name() { return last_name; } 
    public void setLast_name(String name) { this.last_name = name; }

 @Column(name="gender")
    public char getGender() { return gender; } 
    public void setGender(char gender) {this.gender = gender;}

  @Column(name="hire_date")
    public Date getHire_date() { return hire_date; } 
    public void setHire_date(Date hire_date) {this.hire_date = hire_date;}

    @OneToOne(cascade=CascadeType.ALL, fetch=FetchType.LAZY)
    @JoinColumn(name="emp_no")
    public ContactInfo getContactInfo() { return contactInfo; }
    public void setContactInfo(ContactInfo info) { this.contactInfo = info; }

  @OneToMany(mappedBy="employee", targetEntity=DepartmentEmp.class,
    cascade=CascadeType.ALL)
  @Fetch(value = FetchMode.SELECT) 
    public Set<DepartmentEmp> getDepartment_emp() { return department_emp; }
    public void setDepartment_emp(Set<DepartmentEmp> department_emp) { this.department_emp = department_emp; }

    @OneToMany(mappedBy="employee", targetEntity=DepartmentManager.class,
    cascade=CascadeType.ALL)
    @Fetch(value = FetchMode.SELECT) 

    public Set<DepartmentManager> getDepartment_manager() { return department_manager; }
    public void setDepartment_manager(Set<DepartmentManager> department_manager) { this.department_manager = department_manager; }

    @ManyToMany
      @JoinTable(name="employee_projects", 
            joinColumns={@JoinColumn(name="employee_emp_no")},
            inverseJoinColumns={@JoinColumn(name="projects_proj_num")})
    @Fetch(value = FetchMode.SELECT) 
        public Set<Projects> getProjects() { return projects; }
        public void setProjects(Set<Projects> projects) { this.projects = projects; }

    public void print() {
        System.out.printf("%d: %s %s %s %c %s\n", emp_no, birth_date.toString(), first_name, last_name, gender, hire_date.toString()); 
    } 

    public static void list()
    {
        Session session = HibernateContext.getSession();
        Criteria criteria = session.createCriteria(Employee.class);
        criteria.addOrder(Order.asc("emp_no"));

        List <Employee> employees = criteria.list();
        System.out.println("All Employees:");
        for (Employee employee : employees) {
            employee.print();
        }
        session.close();
    }

    //TODO finish 4 methods

    public static Employee find(long emp_no){
        Employee prototype = new Employee();
        prototype.setEmp_no(emp_no);
        Example ex = Example.create(prototype);

        Session sess = HibernateContext.getSession();
        Criteria criteria = sess.createCriteria(Employee.class);
        criteria.add(ex);

        Employee e = (Employee) criteria.uniqueResult();
        return e;
    }
    public static Employee find(String first, String last){
        Employee prototype = new Employee();
        prototype.setFirst_name(first);
        prototype.setLast_name(last);
        Example ex = Example.create(prototype);

        Session sess = HibernateContext.getSession();
        Criteria criteria = sess.createCriteria(Employee.class);
        criteria.add(ex);

        Employee e = (Employee) criteria.uniqueResult();

        sess.close();
        return e;
    }
    public static void main(String [] args){
           Class klasses [] = {Employee.class, DepartmentEmp.class, DepartmentManager.class, ContactInfo.class,
                                Salaries.class, Titles.class, Department.class, Projects.class};
            HibernateContext.addClasses(klasses);
            Employee.find((long)10001).print();
    }
  } 
```

休眠上下文：

```
public class HibernateContext {

public static AnnotationConfiguration config = null;
public static SessionFactory factory = null;

/**
 * sets configuration if null
 */
private static void setConfiguration(){
    if(config == null){
        config = new AnnotationConfiguration();
        config.configure();
    }
}

/**
 * sets factory if null
 */
private static void setFactory(){
    if(factory == null){
        setConfiguration();
        factory = config.buildSessionFactory();
    }
}

/**
 * Opens session from the factory
 */
public static Session getSession(){
    setFactory();
    return factory.openSession();
}

/**
 * Creates a schema from the configuration
 */
public static void createSchema(){
    setConfiguration();
    (new SchemaExport(config)).create(true, true);

}

/**
 * Adds a new class object to the database
 */
public static void addClass(Class c){
    setConfiguration();
    config.addAnnotatedClass(c);
}

/**
 * Adds a list of class objects to the database
 */
public static void addClasses(Class classes[]){
    for(Class c : classes){
        addClass(c);
    }
} 
```

}

我省略了其他类，因为它们不参与此查询，但是当我在 Employee 中运行主函数时，堆栈跟踪只是在 find.print(); 处显示空指针异常；线。我知道数据库已填充并且正在运行 Employee.list() 工作只是找到，所以我正在努力找出究竟是什么问题。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:57:52.397

没有堆栈跟踪，很难找到问题所在，这就是我的猜测：

如果我们看到你的 print 方法；

```
public void print() {
        System.out.printf("%d: %s %s %s %c %s\n", emp_no, birth_date.toString(),
 first_name, last_name, gender, 
hire_date.toString()); 
    } 
```

即使 Employee 对象正确返回 .. 在`print`你得到的值， `hire_date` 如果你没有给予 the `hire_date` 并`employee object`试图调用hire_date.toString() 它会给出`null pointer exception`。

确定返回的 Employee 对象是否`hire_date`有

# maven - 如何将 Maven 命令行参数传递给内联 Groovy 脚本

> ID：14789836
> 
> 赞同：1
> 
> 时间：2013-02-09T15:54:46.317
> 
> 标签：maven, groovy, maven-release-plugin

我正在使用[maven-release-plugin](http://maven.apache.org/maven-release/)发布一些工件。在`release:perform`目标期间，我想运行一个内联 Groovy 脚本，它使用我的 SCM 凭据来执行一些任务。

这是我的一个片段`pom.xml`

```
...     
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-release-plugin</artifactId>
  <version>2.4</version>
  <configuration>
    <goals>
      clean
      deploy
      org.codehaus.gmaven:gmaven-plugin:execute
    </goals>
  </configuration>
</plugin>
<plugin>
  <groupId>org.codehaus.gmaven</groupId>
  <artifactId>gmaven-plugin</artifactId>
  <version>1.3</version>
  <executions>
    <execution>
      <id>default-cli</id>
      <goals>
        <goal>execute</goal>
      </goals>
      <configuration>
        <source>
           log.info "Username: ${project.properties.username} account"
        </source>
      </configuration>
    </execution>
  </executions>
</plugin>
... 
```

我调用Maven如下

```
mvn -B release:prepare release:perform -Dusername=foo -Dpassword=bar 
```

我得到以下输出：

```
Username: null account 
```

我试图查看[GMaven](http://docs.codehaus.org/display/GMAVEN/Executing+Groovy+Code)官方页面，但似乎缺少一些片段......

任何想法？

* * *

**编辑**

`goals`我通过传递部分中的凭据完成

```
...     
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-release-plugin</artifactId>
  <version>2.4</version>
  <configuration>
    <goals>
      clean
      deploy
      org.codehaus.gmaven:gmaven-plugin:execute -Dusername=${username} -Dpassword=${password}
    </goals>
  </configuration>
</plugin>
... 
```

命令行是一样的： `mvn -B release:prepare release:perform -Dusername=foo -Dpassword=bar`

正如[@khmarbaise](https://stackoverflow.com/users/296328/khmarbaise)所说， Maven 的发布周期似乎是分叉的。我不确定它是否将所有命令行参数传递给分叉进程。所以这样做就像我在强迫 CLI 参数前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:07:35.490

我建议使用 maven-release-plugin 的[-Darguments=](http://maven.apache.org/maven-release/maven-release-plugin/prepare-mojo.html#arguments)参数，因为在发布周期内，maven 将被分叉，这似乎是这里的问题。

像这样

```
mvn -B release:prepare release:perform -Darguments="-Dusername=foo -Dpassword=bar" 
```

注意报价。

# algorithm - 是否必须“在多项式时间内完成 p‌r‌o‌b‌l‌e‌m 的减少”才能使其成为 NP 完全？

> ID：14789840
> 
> 赞同：3
> 
> 时间：2013-02-09T15:55:02.977
> 
> 标签：algorithm, np-complete, np

对于一个 NP 完全问题，它必须属于 NP 类，并且必须有一个多项式时间算法将其简化为一个 NP 完全问题。

现在，如果我们只有一个指数时间算法来减少。这个问题还会被称为 NP-complete 吗？还是不存在这样的问题？

编辑：另外请告诉我是否存在任何此类问题，如果存在，那么它属于哪个类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T15:58:52.340

只有当其他 NP 问题可以在多项式时间内归约到它时，它才能被认为是 NP 完全的。这是一个有用的定义的原因是，如果我们找到一个多项式时间算法，它会自动为所有 NP 问题给出一个。如果我们允许指数时间减少，但找到了减少问题的多项式时间解决方案，那实际上并不能帮助我们解决我们将其减少到的问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T19:11:18.033

```
Are such problems NP-complete? 
```

没有。证明：

让你的问题 = A。

让 NP 完全问题在（至少）指数时间 = B 中减少。“至少”因为您可以做额外的琐碎工作来达到指数时间，或者遵循不太理想的方法（证明有不存在更有效的减少策略可能非常困难，可能与 N != NP 在同一个球场，迄今为止，尚未解决）。

由于 B 是 NP 完全的，[“NP 中的每个问题都可以在多项式时间内简化为 B”](http://en.wikipedia.org/wiki/NP-complete#Formal_definition_of_NP-completeness)。

如果 A 在 NP 中，那么它必须是多项式时间可约化为 B。但它不是，所以它不在 NP 中。

因此它不能是NP完全的。

更简单地说 - NP 中的任何问题最多需要和 A 一样难，而且显然不是。

```
Are there such problems? 
```

我在想这**可能**是个问题：（递归[背包](http://en.wikipedia.org/wiki/Knapsack_problem)）（我不介意评论是否是聪明人做的）

给定一组项目，每个项目都有一个权重和一个值，找到一个具有最大总权重 A 的子集，并在该子集中找到具有某个最大总权重 C 的子集，目标是最大化两者的值之和子集。

```
To which class does it belong? 
```

我很确定这些没有专门的名称，但我认为其中很多（或全部？）都是[NP-hard](http://en.wikipedia.org/wiki/NP-hard)。证明：（至少对于上面的问题，假设是这样的问题）

定义：[“如果...（一个 NP 完全问题）L 可以通过具有 H 的预言机的预言机在多项式时间内解决，则问题 H 是 NP-hard”](http://en.wikipedia.org/wiki/NP-hard)。

让我们假设上面的例子就是这样一个问题，让它 = H。所以假设我们有一个可以在恒定时间内解决上述问题的预言机。但是背包问题只是上述（C = 0）的一个特例，因此我们可以使用预言机在常数时间（即多项式时间）内解决背包问题。

不确定是否可以通用地证明它。但是任何给定的问题都可以通过将给定问题简化为上述问题或通过将给定问题简化为背包问题来解决。

**编辑：**哦，看起来他们可能确实有一个名字，[2-EXPTIME](http://en.wikipedia.org/wiki/2-EXPTIME)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T20:54:12.027

复杂性理论中的完整性总是针对特定类型的归约来定义的，有时从上下文中知道，因此没有明确提及。著名的 NP 完全问题类被定义为多项式时间减少的完全问题，原因在 Richard Rast 的回答中给出。

您可以为 EXPTIME 减少定义一类 NP 完全问题，但这个类不是很有趣。如果减少是允许指数时间的，那么它可以完全解决原始问题并产生目标问题的平凡实例。这意味着 NP 中的每个问题都可以通过这种类型的归约归约为所有其他问题，因此 NP 中的每个问题都是 NP 完全的，以减少指数时间。

简短版本：只有当它们（至少被认为是）弱于被归约的问题类别时，归约才有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-22T23:29:12.670

如前所述，您的问题的方向是错误的。如果 NP 中的每个问题 B 都可以在多项式时间内归约到问题 A，则问题 A 是 NP 完全的。所以我假设您的问题是，这种归约是否必须在多项式时间而不是指数时间内。

如果您允许指数时间减少：采取以下决策问题 X：“输入是否为 YES？” 这几乎是最简单的决策问题。如果输入是YES，答案是YES，如果输入不是YES，答案是NO。但是 NP 中的每个问题都可以在指数时间内简化为问题 X。当然，我们不想将问题 X 称为“NP 完全”。因此，不允许指数时间减少，因为允许它会使术语“NP-complete”完全没有意义。

# php - 为什么mysqli插入不起作用？

> ID：14789847
> 
> 赞同：1
> 
> 时间：2013-02-09T15:55:47.497
> 
> 标签：php, mysql, sql, sql-insert

我正在尝试将数据插入到我的 MySQL 表中，但没有运气。我的代码如下所示：

```
$mysqli = mysqli_connect("localhost","login info");

if ($mysqli->connect_errno) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}

if (isset($_POST['submit'])) {
    $number = $_POST['number'];
    $road = $_POST['road'];
    $postcode=$_POST['postcode'];
    $price=$_POST['price'];
    $type=$_POST['type'];
    $bedrooms=$_POST['bedrooms'];
    $agent=$_POST['agent'];
    $featured=$_POST['featured'];
    $keywords=$_POST['keywords'];

    $mysqli->query("
        INSERT INTO listings-rent
            (number, road, postcode, price, type, bedrooms, agent, featured, keywords)
        VALUES
            ('$number','$road','$postcode','$price','$type','$bedrooms','$agent','$featured','$keywords')");
} 
```

连接很好，没有返回错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T15:56:43.473

您的表名应该用反引号括起来，因为它包含非字母数字字符。

```
INSERT INTO `listings-rent` (...) VALUES (...) 
```

并且请参数化这些值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T16:03:03.500

[如本文档](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)中所述，您的表名具有`-`MySQL 中不带引号的表名不支持的字符。试试这个：

```
$mysqli->query("INSERT INTO `listings-rent` (number, road, postcode, price, type, bedrooms, agent, featured, keywords) VALUES ('$number','$road','$postcode','$price','$type','$bedrooms','$agent','$featured','$keywords')"); 
```

要查看错误，您可以使用[此处](http://php.net/manual/en/mysqli.error.php)`echo $mysqli->error;`提到的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T16:05:42.200

可能您的表名中缺少 ``

我会建议：

```
 if (TRUE == $mysqli->query("INSERT INTO `listings-rent` (number, road, postcode, price, type, bedrooms, agent, featured, keywords) VALUES ('$number','$road','$postcode','$price','$type','$bedrooms','$agent','$featured','$keywords')"))

        echo "its working!"

    else

         echo $mysqli->error; 
```

这样你就会看到问题

其他选项我建议它打印失败的查询并使用 phpmyadmin 手动插入并检查它为什么不工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-24T06:14:21.160

试试这个：

```
$mysqli = mysqli_connect("localhost", "your_db_username" , "your_db_password" , "database_name") 
```

对于本地服务器，通常用户名为 root，密码为空。所以在这种情况下复制粘贴这个：

```
$mysqli = mysqli_connect("localhost", "root" , "" , "login info") 
```

# jsp - 在运行时填充组合框 jsp

> ID：14789849
> 
> 赞同：0
> 
> 时间：2013-02-09T15:56:17.527
> 
> 标签：jsp, combobox, runtime

我在jsp中有1个组合框，它在加载表单时填充了来自sql db的值

```
 <td width="150">
      <%
         Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
         Connection cn = DriverManager.getConnection("jdbc:odbc:mydsn");;
          Statement s = cn.createStatement();

           ResultSet re = s.executeQuery("select distinct From1 from station");
       %>

        <select>
        <%
         while (re.next()) {
            String un = re.getString("From1");
         %>
         <option value="<%= un%>"><%= un%></option>
        <%
        }
         %>
         </select>
</td> 
```

我在它下面有另一个组合框，我希望根据第一个组合框的选定值来填充它...请帮助代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:10:21.157

好的，这听起来像一个单页向导。

假设你有这个星座：

```
<form method="get" name="blah">
   <select name="first">...</select>
   <select name="second">...</select>
</form> 
```

所以表格有三种状态：

1.  空（未选择）
2.  一半（第一个下拉列表已填充）
3.  完整（第一个和第二个下拉列表已填充）

第一个阶段由 no-request-params 标识。

第二阶段由请求参数“first”的存在来标识。

第三个，完整状态，由请求参数“first”和“second”的存在来标识。

解决方案很简单：

1.  复制你的代码
2.  在示例中将选择命名为“第一”和“第二”。
3.  在第二部分周围，封装了一个 "if(request.getParameter("first")!=null) {" 和 "}"
4.  将 javascript-listener 添加到第一个选择中，例如

    ```
    onchange="document.forms.blah.submit()"; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T07:44:11.023

首先，我更喜欢 JQuery 框架。

好吧，您应该使用 AJAX，将选定的值传递给指向 Java-Servlet 的 URL 并在那里执行逻辑。

```
$.ajax({
 data: 'value=option',
 type: 'POST',
 url: 'processDataServlet.jsp'
 success: function (data) {
   $('td').append(data);
 } 
}); 
```

否则，如果您已经加载了该条件的数据，则可以使用简单的 JavaScript“if”条件：

```
<option onSelected="checkCondition($(this))" value="...." .... />

function checkCondition(var element) {
 var val = element.val();
 if(val = "myValue") {
   alert("Value selected");
 }
} 
```

# c - 编译 C 以允许缓冲区溢出

> ID：14789850
> 
> 赞同：9
> 
> 时间：2013-02-09T15:56:19.417
> 
> 标签：c, compilation, buffer-overflow

我正在学习缓冲区溢出，并正在尝试制作一个。我有这个代码：

```
#include <stdio.h>

char *secret = "password";

void go_shell() {
    char *shell =  "/bin/sh";
    char *cmd[] = { "/bin/sh", 0 };
    setreuid(0);
    execve(shell,cmd,0);
}

int authorize() {
    char password[64];
    printf("Enter Password: ");
    gets(password);
    if (!strcmp(password,secret)) {
        return 1;
    }
    else {
        return 0;
    }
}

int main() {
    if (authorize()) {
        printf("login successful\n");
        go_shell();
    } else {
        printf("Incorrect password\n");
    }
    return 0;
} 
```

我用 gcc 编译它，然后在 gdb 中运行它

我输入了大约 100 个“A”作为密码，程序崩溃了。

问题是没有寄存器被覆盖到`0x4141414141414141`

我用谷歌搜索了这个并将`-fno-stack-protector`标志添加到`gcc`，这允许 RBP 被覆盖`0x4141414141414141`但没有别的。

我想知道是否有办法编译代码以便可以覆盖 RIP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:54:49.233

如果您使用`-fno-stack-protector`. 您在 GDB 中看不到`RIP`值的原因是在更新`0x4141414141414141`之前引发了一般保护错误。`RIP`（如果发生页面错误，GPF 处理程序通常从交换加载页面并从失败的指令开始恢复执行。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T01:29:37.113

在 x32 上出现 EIP 0×41414141 崩溃的原因是，当程序将先前保存的 EIP 值从堆栈中弹出并返回 EIP 时，CPU 会尝试在内存地址 0×41414141 处执行指令，这会导致段错误。（当然它必须在执行之前获取页面）

现在，在 x64 执行期间，当程序将先前保存的 RIP 值弹出回 RIP 寄存器时，内核会尝试执行内存地址 0×4141414141414141 处的指令。首先，由于规范形式的寻址，任何虚拟地址的第 48 位到第 63 位都必须是第 47 位的副本（以类似于符号扩展的方式），否则处理器将引发异常。如果这不是问题——内核在调用页面错误处理程序之前会进行额外的检查，因为最大用户空间地址是 0x00007FFFFFFFFFF。

回顾一下，在 x32 架构中，地址在没有任何“验证”的情况下传递给页面错误处理程序，该处理程序尝试加载触发内核发送程序段错误的页面，但 x64 并没有做到这一点。

测试它，用 0×0000414141414141 覆盖 RIP，你会看到预期值被放置在 RIP 中，因为内核通过了预检查，然后像 x32 情况一样调用了页面错误处理程序（当然，这会导致程序碰撞）。

# javascript - 对齐组对象中的图像和文本

> ID：14789851
> 
> 赞同：3
> 
> 时间：2013-02-09T15:56:37.967
> 
> 标签：javascript, html, fabricjs

尝试使用图像和文本对象创建组对象。它有点像一个图标，然后是文本。无法正确对齐对象。我可以手动设置左侧、顶部和调整它们，但文本、字体等可能会在运行时更改。

当字体/文本长度发生变化时，对齐会再次混乱。有没有办法确保文本总是在图像之后开始（不管文本长度、字体等）

如果没有内置织物的方法来执行此操作，是否有任何解决方法可以解决问题？这是我试过的代码和下面的jsFiddle链接，你可以看到图像和文本是如何重叠的。谢谢。

```
var canvas = new fabric.Canvas('canvas');
fabric.Image.fromURL('http://i.imgur.com/vews5Vd.jpg', function(img) {
    var img1 = img.scale(1).set({ left: 0, top: 0 });
    var text = new fabric.Text('the_text_sample', {
                fontFamily: 'Arial',
                fontSize:30,
                left:img1.width,
                top:10,

            });
    var group = new fabric.Group([ img1,text ], { left: 200, top: 200 });
    canvas.add(group);
}); 
```

[http://jsfiddle.net/gCpnz/](http://jsfiddle.net/gCpnz/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T19:10:44.417

你已经接近了...只要确保将 text.top 属性设置为等于 half-image-height + half-text-height。与 text.left 同上。

*创建文本对象后*，可以使用 text.getBoundingRectWidth() 和 text.getBoundingRectHeight() 获取文本宽度/高度。

所以你的代码变成：

```
var scaleFactor=1.0
var canvas = new fabric.Canvas('canvas');
fabric.Image.fromURL('http://i.imgur.com/vews5Vd.jpg', function(img) {
    var img1 = img.scale(scaleFactor).set({ left: 0, top: 0 });
    var text = new fabric.Text('the_text_sample', {
                fontFamily: 'Arial',
                fontSize:30,
            });
            text.set("top",img.height*scaleFactor/2+text.getBoundingRectHeight()/2);
            text.set("left",-img.width*scaleFactor/2+text.getBoundingRectWidth()/2);  

    var group = new fabric.Group([ img1,text ], { left: 200, top: 200 });
    canvas.add(group);
}); 
```

这是一个小提琴：

[http://jsfiddle.net/m1erickson/5Wzvg/](http://jsfiddle.net/m1erickson/5Wzvg/)

# java - Checkstyle 在最终变量的命名约定上与普通 Java 不同吗？

> ID：14789857
> 
> 赞同：1
> 
> 时间：2013-02-09T15:57:14.427
> 
> 标签：java, variables, naming-conventions, final, checkstyle

对于私有 final 变量，Checkstyle 建议使用匹配 '^[az][a-zA-Z0-9]*$' 的名称。最终变量不应该全部大写吗？

例如，Checkstyle 想要 test、tEST 或 testTest。大会通常不是 TEST 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T15:58:48.670

只有`public static final`变量 - 那些充当常量的变量。

# c - C、写系统调用，写int

> ID：14789864
> 
> 赞同：1
> 
> 时间：2013-02-09T15:58:10.287
> 
> 标签：c, low-level

我在 Jon Erickson 的书[Hacking: The Art of Exploitation](https://rads.stackoverflow.com/amzn/click/com/1593271441)中找到了这个来源，

```
userid = getuid(); // get the real user ID
// Writing data
if(write(fd, &userid, 4) == -1)  // write user ID before note data
    fatal("in main() while writing userid to file");
write(fd, "\n", 1); // terminate line 
```

我尝试编译这段代码，发现在我写的文件上，userid（就是我上面代码中写的）不对；他们只是写了奇怪的字符（我认为在这里写它并不重要）。所以问题是我试图将一个传递`int`给一个需要的函数`char *`，因为我想写的文件上的结果是错误的。

所以这是一个错误，对吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T16:01:26.220

该[`write()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/write.html)函数需要一个`void *`作为它的缓冲区；它写入任意二进制数据。如果您需要转换为字符串，请使用`printf()`.

您没有显示 的​​声明`userid`，但该`write()`行应写为：

```
if (write(fd, &userid, sizeof(userid)) != sizeof(userid)) 
```

这将检测短写入（不太可能是整数类型的问题）和其他问题，并且无论`userid`. 因此，该行的原始版本可以说是有问题的。否则，错误似乎在您的期望中，而不是代码本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T16:02:55.283

不，这不是错误，而是您的误解。该`write`调用将只写入内存中的内容，即二进制表示。你需要一些东西`fprintf`来获得一个可读的版本。

例如，7 的二进制表示可能是四个字节 0、0、0 和 7，这不太可能看起来像文本表示，单个字节 55（假设为 ASCII）。

It's also a bad idea to hardcode type lengths like 4 for an integer since that's not portable. Better would be to use something like `sizeof(userid)`.

# c# - C Sharp 存储过程在第二次运行时超时

> ID：14789865
> 
> 赞同：0
> 
> 时间：2013-02-09T15:58:36.850
> 
> 标签：c#, sql-server, wpf, sql-server-2012

我正在通过 C sharp 调用存储过程，由于某种奇怪的原因，它在第二次运行时超时。

调用存储过程的代码：

```
 private void LoadData()
    {
        BackgroundWorker bw = new BackgroundWorker();

        bw.DoWork += new DoWorkEventHandler(bw_LoadData);
        bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_LoadDataComplete);

        Busy.IsBusy = true;
        Busy.BusyContent = "Loading Data";
        bw.RunWorkerAsync();
    }
    void bw_LoadData(object sender, DoWorkEventArgs e)
    {

            SqlConnection con = new SqlConnection(Logic.GetConnectionString());
            con.Open();
            SqlCommand com = new SqlCommand("spGetUserData", con);
            com.CommandType = System.Data.CommandType.StoredProcedure;
            com.Parameters.Add(new SqlParameter("@UID", uid));

          //Timeouts here on the second run
     SqlDataReader readUserData = com.ExecuteReader();
            while (readUserData.Read())
            {

                    origname = readUserData[0].ToString();
                    origemail = readUserData[1].ToString();
                    origcontact = readUserData[2].ToString();
                    origadd1 = readUserData[3].ToString();
                    origadd2 = readUserData[4].ToString();
                    origstate = readUserData[5].ToString();
                    origcity = readUserData[6].ToString();
                    origzip = readUserData[7].ToString();

                    origcountry = readUserData[8].ToString();

            }
            con.Close();
            con.Dispose();
            e.Result = "OK";

    }
    void bw_LoadDataComplete(object sender, RunWorkerCompletedEventArgs e)
    {

        Busy.IsBusy = false;
        txtFullName.Text =  origname;
      txtEmail.Text  = origemail ;
         txtContact.Text= origcontact;
         txtAdd1.Text= origadd1;
       txtAdd2.Text=  origadd2 ;
        txtState.Text=  origstate;
         txtCity.Text= origcity;
       txtZip.Text =  origzip;
       cboCountry.SelectedItem = origcountry;

    } 
```

窗口加载事件期间的第一个方法调用..按预期工作。

```
 private void Window_Loaded_1(object sender, RoutedEventArgs e)
    {
        LoadData();

    } 
```

发生超时的第二种方法调用。

```
 void bw_ChangeEmailComplete(object sender, RunWorkerCompletedEventArgs e)
     {
        if (e.Result.ToString() == "OK")
        {
            Busy.IsBusy = false;
          MessageBox.Show("The Email Address was changed successfully", "Message", MessageBoxButton.OK, MessageBoxImage.Information);

        }
        else
        {
            Busy.IsBusy = false;
            MessageBox.Show("An Unexpected Error occured or email already exist", "Error", MessageBoxButton.OK, MessageBoxImage.Error);

        }
        LoadData();

    } 
```

最后是存储过程

```
 Create Proc [dbo].[spGetUserData]
         @UID varchar(50)
         AS
         Select FullName,Email,Contact,Address1,Address2,State,City,Zip,Country,SubDate,SID
         FROM Users
         Where UID = @UID 
```

**更新**

尝试此操作并手动处理数据读取器后仍然无法正常工作

```
 using (SqlConnection con = new SqlConnection(Logic.GetConnectionString()))
            {

                using (SqlCommand com = new SqlCommand("spGetUserData", con))
                {
                    com.CommandType = System.Data.CommandType.StoredProcedure;
                    com.Parameters.Add(new SqlParameter("@UID", uid));

                    con.Open();
                    using (var readUserData = com.ExecuteReader())
                    {
                        while (readUserData.Read())
                        {

                                origname = readUserData[0].ToString();
                                origemail = readUserData[1].ToString();
                                origcontact = readUserData[2].ToString();
                                origadd1 = readUserData[3].ToString();
                                origadd2 = readUserData[4].ToString();
                                origstate = readUserData[5].ToString();
                                origcity = readUserData[6].ToString();
                                origzip = readUserData[7].ToString();

                                origcountry = readUserData[8].ToString();

                        }

                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:01:48.700

您忘记处置您的 DataReader `readUserData`，.

把它放在一个`using`声明中：

```
using (var readUserData = com.ExecuteReader())
{
    while (readUserData.Read())
        ...
} 
```

（也`using`用于您的 SqlConnection -`using`比手动调用`Close()`和/或更好`Dispose()`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T16:09:48.633

构建您的代码，以便您的连接、命令、阅读器等......自动关闭或处理。请参见下面的示例。

```
using (SqlConnection conn = new SqlConnection(--Conn String Here--)
{
    using (SqlCommand cmd = conn.CreateCommand())
    {
        // Set Conn Properties Here
        Conn.Open();
        using (SqlDataReader rdr = cmd.ExecuteReader())
        {

        } // Reader automatically disposed here
    }
} // Conn automatically closed here 
```

# sql - SQL 将两个查询合二为一

> ID：14789868
> 
> 赞同：0
> 
> 时间：2013-02-09T15:58:51.047
> 
> 标签：sql

这些是我拥有的三个表的简化版本：

```
Books
BookID (PK)
AuthorID
...

Purchases
PurchaseID (PK)
CustomerID
BookID
Date
...

Authors 
AuthorID (PK)
Name
... 
```

我希望表格之间的联系是不言自明的，但我会给出一个简短的解释：作者和书籍之间以及书籍和购买之间存在一对多的关系。

现在我想从给定作者写的书籍中选择一本书，并且已经购买了 X 次以上。

我可以查询给定作者的书籍：

```
SELECT * FROM Books where AuthorID = 'some author'; 
```

但我只想要那些已经购买超过​​X次的书。

```
 SELECT BookID from Purchases WHERE ...(where the occurance of BookID>X) 
```

我不知道如何完成这个查询，或者即使有可能。然后我想将它与第一个查询结合起来，如果可能的话，使用 INNER JOIN。

我愿意接受设计有缺陷。也许购买表应该简单地将 BookID 作为 PK 并有一个购买数量的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:01:51.763

`LEFT JOIN`将允许显示记录，即使他们尚未购买。的值`totalSold`将为 0。

```
SELECT  a.BookID,
        b.Name,
        COUNT(c.BookID) totalSold
FROM    Books a
        INNER JOIN Authors b
            ON a.authorID = b.AuthorID
        LEFT JOIN   Purcahses c 
            ON a.BookID = c.BookID
WHERE   b.Name = 'AuthorName'
GROUP   BY a.BookID, b.Name
HAVING  COUNT(c.BookID) >= x -- <<== where X is the number of purchase 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T16:04:05.607

```
SELECT * FROM
Books INNER JOIN Purchases USING (BookID) 
WHERE AuthorID = ? 
GROUP BY BookID 
HAVING COUNT(BookID) > ?; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T16:06:15.670

```
SELECT b.*, a.Name as author_name
FROM Books b
INNER JOIN Authors a ON (a.AuthorId = b.AuthorId)
INNER JOIN 
(
SELECT BookID
--if you also want to include number of purchases to resultset, 
-- uncomment the line below
-- ,count(1) as cnt
from Purchases 
GROUP BY BookID
HAVING count(1) > x
)c ON (c.BookID = b.BookID) 
```

# jquery - IE 跨域 jSONP 到谷歌应用脚 本内容服务

> ID：14789870
> 
> 赞同：2
> 
> 时间：2013-02-09T15:58:54.650
> 
> 标签：jquery, internet-explorer, google-apps-script, cross-domain, jsonp

我有一个脚本，它使用内容服务从谷歌应用程序 scriptDB 获取一些 JSON 数据。我正在使用 jQuery JSONP（因为它显然是来自 GAS 的跨域）。在 Chrome 和 safari 上一切正常，但在 IE 上，我当然遇到了问题。

我遇到了这篇[IE/MSDN 文章](http://msdn.microsoft.com/en-us/library/gg622941%28v=vs.85%29.aspx)，它描述了现在需要将跨域 JSONP 作为特定的 mime 类型才能与 IE 一起使用 - 但我不相信在 Google Apps Script Content 服务中我可以将 mime 类型更改为可接受的值之一。

因此，相反，我一直在查看 xDomainRequest - 但是这段代码带有 SCRIPT5：在 xdr.open() 行上的 IE9 和 IE10 上访问被拒绝。

```
 if (window.XDomainRequest) {
    // its IE
    var xdr = new XDomainRequest();
    xdr.open("get", url);
    xdr.onload = function() {
        deferred.resolve(JSON.parse(xdr.responseText));
    }
    xdr.onerror(function() {
        deferred.reject("error with IE xdomain request for " + url);
    });
    xdr.send();

  }
  else {
    $.getJSON(url, null, 
        function (data) {
            deferred.resolve(data);
    })
    .error(function(res, status, err) {
        deferred.reject("error " + err + " for " + url);
    });
  }

  return deferred.promise(); 
```

正在获取的 URL 是 [https://script.google.com/macros/s/AKfycbzc0yBs8FfUZyJP1IhGpeTx-MsC288Ml6VYHjnqN9B9Kl3phHuh/exec?panelset=xliberation_panel&callback=](https://script.google.com/macros/s/AKfycbzc0yBs8FfUZyJP1IhGpeTx-MsC288Ml6VYHjnqN9B9Kl3phHuh/exec?panelset=xliberation_panel&callback=)？

整个脚本是[http://xliberation.com/s/badgemanager.html](http://xliberation.com/s/badgemanager.html)

我看过很多与此相关的主题的帖子，但我无法做出任何工作。有没有人明确地想出用于 IE/GAS 组合的 JSONP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:53:45.373

在问题跟踪器上提交功能请求；我们没有理由不能添加您需要的类型。（作为回答，我认为之前没有人在跟踪器上提出过这个问题，我们也没有意识到这一点。）

# javascript - 将整个模块拉入当前范围 Node.js

> ID：14789875
> 
> 赞同：1
> 
> 时间：2013-02-09T15:59:48.863
> 
> 标签：javascript, node.js, coffeescript, commonjs

我试图在 require 调用后将整个模块拉入另一个文件的当前范围。

例如，如果我的模块如下所示：

```
exports.chai = require "chai"
exports.mocha = require "mocha"
exports.Q = require "q" 
```

然后如何访问单个变量，就像它们是当前文件中的全局变量一样？因此，我可以键入 chai，而不是做类似 requireVar.chai 的事情？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T15:29:47.957

Using coffeescript, I recommend you use the [destructuring assignment](http://coffeescript.org/#destructuring) feature:

```
{chai, mocha, Q} = require 'some_module'

// use chai, mocha and Q for good stuff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T16:05:42.240

如果您*真的**非常*想这样做，我想您可以使用`with`：

```
with (require('yourMod')) {
    // use chai, mocha etc.
} 
```

请注意，没有人喜欢`with`，尤其是[Douglas Crockford](http://www.yuiblog.com/blog/2006/04/11/with-statement-considered-harmful/)。实际*使用* `requireVar.chai`是**好的**；它消除了关于来源的任何歧义*，* `chai`并使您易于理解代码/模块的结构。

如果你觉得打字很无聊`requireVar`，就把它写得很短；`a.chai`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T16:02:46.620

你不能这样做：

```
var requireVar = require('yourmod')
  , chai = requireVar.chai
  , mocha = requireVar.mocha
  , Q = requireVar.Q
  ;

//then use chai, mocha and Q afterwards
chai.hoo();
mocha.mon();
Q.tip(); 
```

# ios - 如果动画，UIScrollView 滚动到不同的位置

> ID：14789883
> 
> 赞同：0
> 
> 时间：2013-02-09T16:00:36.563
> 
> 标签：ios, cocoa-touch, uiscrollview

我有一个简单而困难的问题：

```
[self.scrollViewForKeyboard setContentOffset:CGPointMake(0, self.contentOffsetYBeforeEditing) animated:NO];
[self.scrollViewForKeyboard setContentOffset:CGPointMake(0, self.contentOffsetYBeforeEditing) animated:YES]; 
```

在我的应用程序的某个点有不同的效果：不动画内容偏移将滚动到预期的位置，但是使用设置的动画标志更改内容偏移会使`UIScrollView`向下滚动太远。如果我单击/点击混乱的`UIScrollView`，它将重置到上面动画消息设置的正确位置。如果我自己使用动画块为滚动设置动画，一切正常。

确切的情况在这里很难解释，因为我显示的内容有点复杂，所以我的问题是：有没有可能，动画以`UIScrollView`某种方式干扰了我的应用程序的其他部分？一般什么情况下会导致这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:58:17.803

一个可能的原因是另一个动画同时或几乎同时发生，影响滚动视图的框架或 contentSize。

# java - 制作可滚动表格

> ID：14789884
> 
> 赞同：3
> 
> 时间：2013-02-09T16:00:37.370
> 
> 标签：java, swing, user-interface, jdbc, jlist

我正在用 Java 制作这个程序，我在其中向通过套接字连接的人出售东西。我通过 JDBC 加载产品和价格很好，但我想在可滚动表中显示产品及其旁边的价格。现在我只有这个 JList，我在其中加载了产品的名称：

请点击以下链接了解问题。

![在此处输入图像描述](../Images/3bb7cbe836bc6643669e515f926f9134.png)

我应该使用哪些元素以及如何完成我所需要的？

谢谢阅读。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T16:46:05.820

你需要`JTable`使用`JScrollPane`

**更新**了参考示例链接：

[这个参考示例](https://kodejava.org/how-do-i-create-a-scrollable-jtable-component/)，[这](http://www.javatpoint.com/java-jtable)可能会对您有所帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T16:04:50.633

我认为您可以使用swing 中的[JTable组件来完成此操作。](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-09T16:18:56.783

使用带有 JScrollPane 的 JTable 从上到下或从左到右滚动。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-09T16:21:12.767

您需要 JScrollPane 中的 JTable。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-10T03:43:01.460

您需要使用[JTable](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html)和[JScrollPane](http://docs.oracle.com/javase/6/docs/api/javax/swing/JScrollPane.html)

**示例代码：**

```
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;

public class ProductTableExample {

    public static void main( String[] str ) {
        String[] colName = new String[] { "Product Name" ,"Price" };
        Object[][] products = new Object[][] { 
                { "Galleta" ,"$80" },
                { "Malta" ,"$40" },
                { "Nestea" ,"$120" },
                { "Tolta" ,"$140" } 
            };

        JTable table = new JTable( products, colName );

        JFrame frame = new JFrame( "Simple Table Example" );

        // create scroll pane for wrapping the table and add
        // it to the frame
        frame.add( new JScrollPane( table ) );
        frame.pack();
        frame.setVisible( true );       
    }

} 
```

# cocoa - [NSWindowController initWithWindowNibName:owner] 中的窗口控制器以外的所有者？

> ID：14789887
> 
> 赞同：4
> 
> 时间：2013-02-09T16:00:57.110
> 
> 标签：cocoa, xib, nswindow, nib, nswindowcontroller

我想知道的是我初始化的窗口控制器如何

```
NSWindowController *c=[[NSWindowController alloc] initWithWindowNibName:@"Win" owner:myObj] 
```

如果 myObj 不是控制器本身，知道它应该在 Win.xib 文件中控制哪个窗口吗？通常我将窗口控制器设置为所有者，这样我就可以在 IB 中设置它的窗口和插座。内存管理是否全部由窗口控制器完成，即使它不是所有者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T20:34:38.757

窗口控制器将执行顶级对象的内存管理，即使它不是所有者。从`NSWindowController` [类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindowController_Class/Reference/Reference.html)：

> 不管文件的所有者是谁，窗口控制器都负责释放它加载的 nib 文件中的所有顶级对象。

但是，窗口控制器通常是 NIB 的所有者，连接其*窗口*插座通常是它知道要控制哪个窗口的方式。也可以使用该`-setWindow:`方法显式设置它。

可以想象`NSWindowController`在 NIB 的顶级对象中搜索一个窗口来控制插座是否未连接，但我认为它不会那样做。

你有没有观察到一些你不理解的行为？它以前如何？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-04T15:04:49.200

此方法适用于您拥有基于文档的应用程序的情况；见`NSDocument`。在这种情况下，您将创建一个`NSDocument`NIB 文件所有者的实例（`NSDocument`有一个`-setWindow:`方法但没有 getter）。控制器仍然会从文档实例中了解它的窗口。代码大致是：

```
NSDocument * document = ...;
NSWindowController * winCtrl = [[NSWindowController alloc]
   initWithWindowNibName:@"SomeNib" owner:document];
[document addWindowController:winCtrl];
[winCtrl loadWindow]; 
```

现在文档是 NIB 文件的所有者，但窗口控制器仍然接收到对分配给文档的窗口的引用。

当然，此代码仅用于演示目的，正确的方法实际上是子类`NSDocument`，覆盖`makeWindowControllers`，并在那里启动所有必需的控制器。

如果您的文档始终只有一个来自单个 NIB 文件的窗口，您也可以将`NSDocument`属性设置`windowNibName`为您的 NIB 文件的名称，然后调用默认`makeWindowControllers`实现，大致执行以下操作：

```
NSWindowController * winCtrl = [[NSWindowController alloc]
   initWithWindowNibName:self.windowNibName owner:self];
[self addWindowController:winCtrl]; 
```

还要检查 GNUStep 的实现`NSWindowController`，它可能与 Apple 的不同（Apple 的不是开源的，所以我们不知道），但它的行为应该是相同的：

```
- (void) loadWindow
{
  NSDictionary *table;

  if ([self isWindowLoaded]) 
    {
      return;
    }

  table = [NSDictionary dictionaryWithObject: _owner forKey: NSNibOwner];
  if ([NSBundle loadNibFile: [self windowNibPath]
        externalNameTable: table
        withZone: [_owner zone]])
    {
      _wcFlags.nib_is_loaded = YES;

      if (_window == nil  &&  _document != nil  &&  _owner == _document)
        {
          [self setWindow: [_document _transferWindowOwnership]];
        }
      else
        {
          // The window was already retained by the NIB loading.
          RELEASE(_window);
        }
    }
  else
    {
      if (_window_nib_name != nil)
        {
      NSLog (@"%@: could not load nib named %@.nib", 
         [self class], _window_nib_name);
    }
    }
} 
```

来源： [https ://github.com/gnustep/libs-gui/blob/master/Source/NSWindowController.m](https://github.com/gnustep/libs-gui/blob/master/Source/NSWindowController.m)

它将使用私有方法从其文档中获取窗口，`_transferWindowOwnership`但前提是加载后没有设置窗口，设置一个文档并且该文档已设置为加载的 NIB 文件的所有者。

# node.js - 如何强制 NPM 在不同文件夹中查找已安装的包？

> ID：14789892
> 
> 赞同：1
> 
> 时间：2013-02-09T16:01:06.280
> 
> 标签：node.js, npm, docpad

混乱的 Docpad 安装。

现在 Docpad 在 /usr/bin/docpad /usr/lib/node_modules

当 NPM 查看 /usr/ **local** /bin/docpad /usr/ **local** /node_modules

我可以为 npm 指定正确的目录，它应该在其中查找已安装的模块吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:30:07.393

您可能只需要设置`$NODE_PATH`环境变量，查看[文档](http://nodejs.org/api/modules.html#modules_loading_from_the_global_folders)以获取有关加载模块的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T20:12:06.883

最后，删除了 Node.js 和 npm（从 docpad 脚本安装）。

从 chris-lea/node.js ppa 再次安装 node.js 和 npm。

通过 npm 从 ppa 中删除 docpad。然后是 node.js 和 npm 他们 selfs，然后是整个 ppa。

从 docpad 脚本安装 node.js 和 npm。

# java - 使用压缩的缓冲图像转换

> ID：14789893
> 
> 赞同：0
> 
> 时间：2013-02-09T16:01:06.883
> 
> 标签：java, bufferedimage, javax.imageio

尝试读取缓冲的 bmp 图像，然后通过压缩转换为 jpeg。缓冲的图像行有问题。谢谢，任何帮助表示赞赏。

```
public void jpegconvert(String Fname, String Crate)
{

BufferedImage image =  ImageIO.read(Fname);

Iterator<ImageWriter> i = ImageIO.getImageWritersByFormatName("jpeg"); 

// Just get the first JPEG writer available 
ImageWriter jpegWriter = i.next(); 

// Set the compression quality to 0.8 
ImageWriteParam param = jpegWriter.getDefaultWriteParam(); 
param.setCompressionMode(ImageWriteParam.MODE_EXPLICIT); 
param.setCompressionQuality(0.8f); 

// Write the image to a file 
FileImageOutputStream out = new FileImageOutputStream(new File("newimage.jpg")); 
jpegWriter.setOutput(out); 
jpegWriter.write(null, new IIOImage(image, null, null), param); 
jpegWriter.dispose(); 
out.close();
}
} 
```

**悬停错误是这样说的：**

```
no suitable method found for read(String)
    method ImageIO.read(ImageInputStream) is not applicable
      (actual argument String cannot be converted to ImageInputStream by method invocation conversion)
    method ImageIO.read(URL) is not applicable
      (actual argument String cannot be converted to URL by method invocation conversion)
    method ImageIO.read(InputStream) is not applicable
      (actual argument String cannot be converted to InputStream by method invocation conversion)
    method ImageIO.read(File) is not applicable
      (actual argument String cannot be converted to File by method invocation conversion) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:40:38.390

问题出在这个特定的代码上：
`ImageIO.read(Fname);`
因为`Fname`它是一个`String`检查[API 的读取方法](http://docs.oracle.com/javase/1.4.2/docs/api/javax/imageio/ImageIO.html)，它`String`在任何重载方法中都没有作为参数

此[参考资料](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/2d/images/examples/LoadImageApp.java)可能对您有所帮助

# android - 如何确保只有与“Travel and Locals”相关的广告才会显示在我的 AdMob 应用中？

> ID：14789900
> 
> 赞同：0
> 
> 时间：2013-02-09T16:01:39.993
> 
> 标签：android, admob

我有一个显示餐厅的应用，我希望我的 admob 只显示与餐厅、酒店等相关的广告

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:07:35.717

At the moment, you cannot set this kind of filter. From the AdMob help documentation:

> Can I filter or manage the keyword targeted and GCAN ads that run in my application? Do the existing filters I set for my application apply to these ads?
> 
> No, at this time you are not able to apply any filters on the content of keyword-targeted or GCAN ads that run inside your application.

More information here: [http://support.google.com/admob/answer/1307264?hl=en](http://support.google.com/admob/answer/1307264?hl=en)

Did that answer your question?

# java - 在 Android 上创建设置向导

> ID：14789905
> 
> 赞同：7
> 
> 时间：2013-02-09T16:02:32.617
> 
> 标签：java, android, eclipse, user-interface, wizard

在我的应用程序中，我需要在开始时询问用户一些信息。就像谷歌在用户首次启动手机时询问用户一样。

使用 Java 和 Android，我如何为我的应用程序制作相同类型的设置向导？我可以创建多个活动，当移动到向导中的下一页时，我会启动它。这似乎不是一个好方法。

我想使用 Eclipse 的 GUI builder 来设计它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T16:10:23.333

这里也解释了创建向导：https: [//plus.google.com/113735310430199015092/posts/6cVymZvn3f4](https://plus.google.com/113735310430199015092/posts/6cVymZvn3f4)

您可以在此处获取代码： [https ://github.com/romannurik/android-wizardpager](https://github.com/romannurik/android-wizardpager)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T16:09:15.133

最好的方法是在 android 中使用 Shared Preferences。 [http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html) 您只需要检查该值是否尚未设置，然后显示您的设置向导，否则直接进入应用程序。

您也可以在对话框中显示向导，或者另一种方式是与 UI 一起开发一个单独的活动。

# sql - 将多列的出现次数计为总数

> ID：14789928
> 
> 赞同：1
> 
> 时间：2013-02-09T16:05:13.953
> 
> 标签：sql

第一次在这里发帖... :)

我所拥有的是：

*   客户/型号

    *   一个 / 1
    *   一个 / 1
    *   乙 / 1
    *   乙 / 1
    *   C / 2
    *   日/1

我需要展示的是：

*   型号/总数

*   1 / 3

*   2 / 1

我的代码是：

```
SELECT  Client, Model, COUNT(Model) Total
FROM    Table
GROUP BY Client, Model 
```

但这所做的只是返回两列的每次出现。有人可以帮忙吗？

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T16:09:07.870

要计算每个模型的不同客户端的数量：

```
SELECT  Model
,       COUNT(distinct Client) Total
FROM    Table
GROUP BY 
        Model 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!2/7a9ac/1/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T16:10:28.367

看起来您想要每个模型的“客户”数量；所以试试这个：

```
select model
     , count(distinct client) as Total
from   table
group by model 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T16:08:11.710

这是由 Group by 中的 Client 引起的。从您的查询中排除客户。尝试这个 ：

```
SELECT Model, COUNT(Model) Total
FROM Table
GROUP BY MODEL 
```

# python - python打印一行相同的空间

> ID：14789930
> 
> 赞同：0
> 
> 时间：2013-02-09T16:05:36.257
> 
> 标签：python, loops, printing

我需要在同一个地方打印'ok'。有什么办法吗？

我找到了解决方案，但它们不能正确使用 IDLE：

```
 while (count < 9):
      if statusm == "<Status>OK</Status>":
         print "ok", 
```

我希望每个“好的”都在同一行。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T16:11:41.430

像这样的东西？

**代码：**

```
for i in range(5):
    print '\b\b\bok', 
```

或者，如果您的 'ok' 在行首，您可以使用单个 '\r' 代替：

```
for i in range(5):
    print '\rok', 
```

**输出：**

```
ok 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-06T21:19:46.947

例如，如果您想在完全相同的位置打印“OK”，您可以执行以下操作：

```
for i in range(0, 10000):
    print("\rOK", end='') 
```

结果 ：

```
OK 
```

在同一个控制台点上写了 10000 次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T16:12:59.077

那 ？：

```
from sys import stdout

count = 1    
statusm = "<Status>OK</Status>"
while (count < 9):
      if statusm == "<Status>OK</Status>":
          stdout.write('OK')
          count += 1 
```

编辑

我认为在 IDLE 中不可能只做一个 OK。但是下面的代码将给出控制台中可能发生的事情的想法：

```
from sys import stdout
from time import sleep

several = ("<Status>OK</Status>",
           "<Status>bad</Status>",
           "<Status>OK</Status>",
           "<Status>bad</Status>",
           "<Status>yes</Status>",
           "<Status>OK</Status>",
           "<Status>none</Status>",
           "<Status>bad</Status>",
           "<Status>OK</Status>",
           "<Status>yes</Status>")

good = ('OK','yes')

for i,status in enumerate(several):
    y = str(i)
    stdout.write(y)
    stdout.write(' OK' if any(x in status for x in good) else ' --')
    sleep(1.0)
    stdout.write('\b \b\b \b\b \b')
    for c in y:  stdout.write('\b \b') 
```

结果

```
OKOKOKOKOKOKOKOK 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T16:34:59.697

如果您需要一次打印一个，请使用其他答案之一。这将一次打印它们：

```
my_var = ''
while (count < 9):
      if statusm == "<Status>OK</Status>":
         my_var += 'ok'
print my_var 
```

# java - SmartGWT Img 设置应用程序路径

> ID：14789934
> 
> 赞同：0
> 
> 时间：2013-02-09T16:06:14.497
> 
> 标签：java, smartgwt

当我`Img`在 SmartGWT 中创建对象时，它的主路径是 [myapp]/images/ 但我想`Img`从外部服务器获取，如何设置它的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T21:15:37.903

如果我没记错的话，`Img`对象应该反映 HTML`<img>`标记的行为。如果我是正确的，那么您应该能够在构建时指定图像的 URL。

```
 Img myImg = new Img("http://www.example.com/image.gif"); 
```

查看[img](http://www.w3schools.com/tags/att_img_src.asp)标签文档。

# java - 如何从代码中使用 Google 翻译 API

> ID：14789937
> 
> 赞同：4
> 
> 时间：2013-02-09T16:06:36.520
> 
> 标签：java, android, google-translate

我正在尝试创建一个向*translate.google.com*发送单词的应用程序，获取翻译结果并将其显示给用户。我编写了 URL，但我不知道如何从网页中提取单词/短语。

伪示例：en 是英语代码，es 是西班牙语代码

```
String from = "en";
String to = "es";
String word = "hello"; //this will be user input text really
String URL = "http://www.translate.google.com/#" + from + "/" + to + "/" + word; 
```

因此请求 URL 看起来像[http://www.translate.google.com/#en/es/hello](http://www.translate.google.com/#en/es/hello)

我现在需要能够从结果框中检索信息并将其放入字符串中，以便将其显示给用户。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T16:12:12.870

谷歌翻译提供用于检索翻译的 API。您应该使用 json 对象和 GET 请求到谷歌翻译服务器。在[此链接](https://developers.google.com/translate/v2/using_rest?hl=it)中，您可以找到带有代码示例的官方开发人员指南。

# actionscript-3 - 打 mc 时播放 AS3 声音

> ID：14789940
> 
> 赞同：0
> 
> 时间：2013-02-09T16:07:02.877
> 
> 标签：actionscript-3, flash, flash-cs5.5

我有这样的脚本

```
 var idsya1:Idsya1 = new Idsya1(); 
    var iqlab1:Iqlab1 = new Iqlab1(); 
    var ikhsya1:Ikhsya1 = new Ikhsya1(); 

    if (idsya_1.hitTestObject(idsyabox_1))
     {
       idsya_1.enabled = false;
      //idsya_1.visible = false;
      idsya_1.buttonMode = false;
      idsya_1.x = 145.30 ;
      idsya_1.y = 168.05;
      idsya1.play();
      score+=10;
      skor.text = " " + score;
         }

     if (iqlab_1.hitTestObject(iqlabbox_1))
     {
       iqlab_1.enabled = false;
    //   iqlab_1.visible = false;
       iqlab_1.buttonMode = false;
       iqlab_1.x = 719.95;
       iqlab_1.y = 155.25;
       iqlab1.play();
      score+=10;
      skor.text = " " + score;
     }

    if (ikhsya_1.hitTestObject(ikhsyabox_1))
     {
       ikhsya_1.enabled = false;
       //idsya_1.visible = false;
       ikhsya_1.buttonMode = false;
       ikhsya_1.x = 459.95;
       ikhsya_1.y = 198.75;
      ikhsya1.play();
      score+=10;
      skor.text = " " + score;
     } 
```

Idsya1、Iqlab1 和 Ikhsya1 是来自库的声音..idsya_1、ikhsya_1 和 iqlab_1 是一个影片剪辑。

我的问题是，当 idsya_1 击中 idsyabox_1 时，会播放 idsya1 声音，并且它起作用了，但是当 ikhsya_1 击中 ikhsyabox_1 时，播放的声音也是 ikhsya1 和 idsya1，当 iqlab_1 击中 iqlabbox_1 时，所有声音都会播放..为什么会这样？ ?

我的意思是当 idsya_1 击中 idsyabox_1 然后播放的声音是 idsya1 声音

当 iqlab_1 击中 iqlabbox_1 时，播放的声音是 iqlab1 声音

当 ikhsya_1 击中 ikhsyabox_1 时，播放的声音是 ikhsya1 声音

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:19:59.743

可能是因为您正在循环中检查碰撞，并且每次该循环触发时，它都会检查您的每个奇怪名称是否存在碰撞`MovieClips`并相应地播放声音。如果您想为每个声音播放一次，请尝试使用`Boolean`属性来测试它是否已播放。所以你会有这样的事情：

```
if (iqlab_1.hitTestObject(iqlabbox_1) && !iqlab_1SoundHasPlayed) // checking if the sound has already played
 {
   iqlab_1.enabled = false;
//   iqlab_1.visible = false;
   iqlab_1.buttonMode = false;
   iqlab_1.x = 719.95;
   iqlab_1.y = 155.25;
   iqlab1.play();
  score+=10;
  skor.text = " " + score;

  iqlab_1SoundHasPlayed = true;
 } 
```

# html - CSS - 伪类 :before 和 :after 转换

> ID：14789941
> 
> 赞同：0
> 
> 时间：2013-02-09T16:07:15.103
> 
> 标签：html, css

我正在尝试为伪类`:before`和`:after`. 我无法达到我希望的结果。

[请看一下这个例子](http://cssdeck.com/labs/tkhg2myl)。

这一切对我来说似乎都是合乎逻辑的，但我很确定我错过了一点。过渡是行不通的。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:13:28.140

似乎并非所有浏览器都支持这一点。看看[css-tricks.com](http://css-tricks.com/transitions-and-animations-on-css-generated-content/)

但是，在您的 div 中添加一个元素以实现所需的结果并不复杂。

# uiviewcontroller - 添加视图控制器 .h 和 .m？

> ID：14789945
> 
> 赞同：0
> 
> 时间：2013-02-09T16:07:35.830
> 
> 标签：uiviewcontroller, uistoryboard

这听起来像是一个菜鸟问题，但是当我将视图控制器添加到我的故事板时，如何为该控制器创建一个新的 .h 和 .m 并将它们连接到它？

对不起，我是新来的。

我很感激任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:20:35.950

有几种方法

文件->新建->“新建文件”或右键单击要放置视图控制器的组并选择“新建文件”

你会得到一个文件类型的弹出窗口 - 你想要的类型是'Objective-c class'

下一个屏幕显示您的类名（即 MyNewViewController）和您希望它继承的对象类型的空格。在你的情况下`UIViewController`

希望有帮助。

# java - 使用 Image.getInstance 调整 pdf 图像的大小

> ID：14789961
> 
> 赞同：1
> 
> 时间：2013-02-09T16:08:54.373
> 
> 标签：java, image, pdf, resize, itext

我有以下代码。我正在尝试将 pdf 页面的实例作为图像，调整图像大小，然后添加回文档。

```
for (int i=1; i<=reader.getNumberOfPages();i++){
          PdfImportedPage page = writer.getImportedPage(reader, i);
          Image image = Image.getInstance(page);
          float currentWidth = image.getWidth();
          float currentHeight = image.getHeight();
          image.scalePercent(50);
          float newWidth = image.getWidth();
          float newHeight = image.getHeight();
} 
```

我创建浮点变量来查找缩放前后图像的宽度和高度。这是我面临的问题。当前和新的高度和宽度完全相同。他们不会改变。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:20:52.073

你有没有尝试过：

```
 float newWidth = image.getScaledWidth();
 float newHeight = image.getScaledHeight(); 
```

# r - 存在交互项时逻辑回归中的优势比

> ID：14789966
> 
> 赞同：1
> 
> 时间：2013-02-09T16:09:47.370
> 
> 标签：r

我正在将`SAS`命令与`R`. 考虑一下我想评估一次暴露（如`CAT`where`1 equals high`和`0 equals low`）和`one cofounding variable` （如`cholesterol` `leve`, `CHL`）对疾病变量（如`CHD`）的影响。为了`SAS`获得优势比的数值，例如，当模型包含交互项（如 ()）时，考虑`CHL`等于 220 且`HPT`等于 1的特定值`CC = CAT*CHL`，命令为：

```
PROC GENMOD data=l2 DESCENDING;
MODEL CHD=CAT CHL CC/LINK=LOGIT DIST=BINOMIAL;
ESTIMATE CAT 1 CC 220 /EXP;
RUN; 
```

我只想在 R 中找到这样的命令。在 R 中是否有任何代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T20:47:14.917

复制我之前的评论作为答案：我相信 OP 正在询问具有 4 列的数据情况，并且需要

```
mdl <- glm(CHD ~ CAT + CHOL + CC, data=df, "binomial") 
```

听从您的建议。然而，更好的是不单独计算交互项，而是使用公式机制来表示与“*”运算符的交互：

```
mdl <- glm(CHD ~ CAT * CHOL , data=df, "binomial") 
```

这将为您提供主效应和交互系数。它还可以更好地使用 predict 方法，在这种方法中，您不会因为可能输入与主效应不匹配的交互项而被绊倒。我不确定 /EXP 选项在 SAS 中产生了什么，但我猜它可能会返回优势比。这给出了预测的概率：

```
predict(mdl, data.frame(CHL=220, HPT=1), type= "response") 
```

我不认为每个协变量的单个值可以产生优势比，除非您隐含地假设协变量平均值的基线。您可以通过以下方式获得有用的信息：

```
exp( diff( predict(mdl, data.frame(CHL=c(220, mean(df$CHL) ) , HPT= c(1,0) )  ) ) ) 
```

这旨在是（尽管在没有数据的情况下未经测试并且可能需要一些进一步的算术）比较一个 CHL = 220 的人和一个没有高血压的人的优势比以及无论队列的平均值如何胆固醇可能是。

加州大学洛杉矶分校生物统计学页面非常适合学习这一点，您也许可以[在此页面](http://www.ats.ucla.edu/stat/examples/iglm/default.htm)上获取一些数据示例：

对于想要使用 SAS 的先验知识的人来说，还有一些资源：

[http://r4stats.com/2012/06/13/why-r-is-hard-to-learn/](http://r4stats.com/2012/06/13/why-r-is-hard-to-learn/)

[http://www.revolutionanalytics.com/news-events/free-webinars/2011/intro-to-r-for-sas-spss/](http://www.revolutionanalytics.com/news-events/free-webinars/2011/intro-to-r-for-sas-spss/)

[免费 PDF，后来扩展为整本书：](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&ved=0CE8QFjAD&url=https://science.nature.nps.gov/im/datamgmt/statistics/R/documents/R_for_SAS_SPSS_users.pdf&ei=sboWUbuBGKXgiwKonoGIDA&usg=AFQjCNGrXje-Xxn8L8OqCtfQI69Cfs2IpA&bvm=bv.42080656,d.cGE&cad=rja)

# sql - 如何在 PLSQL 中获取分组输出

> ID：14789970
> 
> 赞同：2
> 
> 时间：2013-02-09T16:10:10.563
> 
> 标签：sql, oracle, string-aggregation

我有两张桌子：

```
表1：测试1

描述测试1

员工编号(6)
资格代码编号(2)

表2：测试2

描述测试2

资格代码编号(2)
资格名称 varchar2(10)

```

```
select * from test1 
```

```
120633 10
120633 20
120633 30

```

```
select * from test2 
```

```
10 平衡计分卡
20 马华
30 人工商管理硕士

```

我想从两个表中选择，我想得到输出：

```
empcode :120633 学历 : BSC,MCA,MBA

```

如何获得上述输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:39:11.480

如果您有 Oracle 11 或更高版本，则可以使用该`LISTAGG`功能，如下所示：

```
select empcode
     , listagg(qualification_name, ',') 
          within group (order by qualification_name) as names
from   test1 
join   test2 
on     test2.qualification_code=test1.qualification_code
group by empcode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T15:02:15.617

你也可以使用收集

```
select empcode , collect(qualification_name) as qualifications
from   test1 , test2
where  test1.qualification_code = test2.qualification_code
group by empcode 
```

您还可以使用用户定义的集合类型——在使用 PL/SQL 时非常有用。

看看[这个](http://www.oracle-developer.net/display.php?id=306)（非常好的博客）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T16:35:27.620

当我搜索“oracle create list from sql”时，我找到了 ListAgg。在你的情况下，你会想要这样的东西：

```
select empcode
, ListAgg(qualification_name, ',') 
within group (order by empcode) qualifications
from test1 join test2 on test1.qualification_code = test2.qualification_code
group by empcode 
```

我不知道这一点，但我认为它很漂亮。

# jquery - 延迟后如何调用 jQuery 脚本？

> ID：14789974
> 
> 赞同：0
> 
> 时间：2013-02-09T16:10:37.850
> 
> 标签：jquery

我在做这件事时遇到了一些麻烦——我知道我们可以使用 jQuery 中的 delay() 函数来延迟运行一个函数，但是如果你想延迟调用一个外部 jQuery 脚本呢？我找到了与前一个问题有关的讨论，但不是后者。如果问题看起来过于简单，请原谅 - 我是 jQuery 的新手。

这是我的 HTML 页面中的一段相关代码：

```
<script>
    $(document).ready(function () {
        $("div.logo").fadeIn(3000);
        $("div.logo").delay(1000).fadeOut(1500); // slideUp("slow")
    });
</script>

<script type="text/javascript">
    $(document).ready(function() {
        $('div.slider_class').queue();
    });
</script> 
```

我正在尝试做的快速描述如下：

1.  一个盒子淡入，延迟一段时间，然后淡出。
2.  一个[s3slider 画廊](http://www.serie3.info/s3slider/)淡入，并具有图片幻灯片。

我将不胜感激任何指示和建议...谢谢！巴乔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:16:14.837

```
$("div.logo").fadeIn(3000).delay(1000).fadeOut(1500, function(){
  // do your gallery fade here
}); 
```

它将在 3 秒内淡出，再等一秒，然后在 1.5 秒内淡出，然后调用你在回调中输入的任何内容`fadeOut`

# ios - ios 6 - 一个允许用户在街上创建地图注释的应用程序返回具有相同坐标的多个注释

> ID：14789975
> 
> 赞同：0
> 
> 时间：2013-02-09T16:10:42.493
> 
> 标签：ios, ios6, mkmapview, cllocationmanager, cllocation

我正在构建一个应用程序，让用户在附近走动时构建自己的地图注释。我现在正在测试这个。

一切都很顺利我看到当我在街上创建地图注释时，它们会立即显示在设备地图上。问题是有时我看到在创建多个之后它们都显示为一个引脚。即它们具有相同的纬度和经度，但它们具有不同的标题和字幕。这意味着程序实际上是在创建单独的对象，但为它们分配相同的坐标。

我检查以确保程序在创建新对象时不会重写旧对象。

似乎 CLlOcation 管理器提供了相同的坐标。我不确定如何进行。

CLLocation 管理器会给出错误的坐标吗？

谢谢

这是我在 cllocationmanager 实例中实现的代码

```
 -(void)locationManager:(CLLocationManager*)_manager
   didUpdateToLocation:(CLLocation *)newLocation
      fromLocation:(CLLocation *)oldLocation
 {
   NSLog(@"%s %d", __PRETTY_FUNCTION__, __LINE__);
   self.userLocation = newLocation;
   NSLog(@"USer location latitude = %.4f", self.userLocation.coordinate.latitude );
   NSLog(@"USer location longitude = %.4f", self.userLocation.coordinate.longitude);
   if (self.userLocation)
   {
        [_locMgr stopUpdatingLocation];
    }

   } 
```

* * *

编辑

我想具体来说，我想了解的是如何在我的应用程序中获取用户位置的更新读数，这与蓝点的值相同，蓝点不断为用户的位置设置动画，以便它在用户移动时移动移动。我似乎无法从 CLLocation 管理器中获得该读数。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T16:20:08.130

当您打开位置管理器时，您通常会得到一份旧读数。在决定使用它之前，您应该检查读数的时间戳和水平精度。

# java - java - 如何将列表中的值与java中的参数进行比较？

> ID：14789976
> 
> 赞同：0
> 
> 时间：2013-02-09T16:10:46.520
> 
> 标签：java, android, list

我正在尝试创建一个函数来检查一个级别是否保存在 SQLite 数据库中。如果是，并且新分数大于表中的分数，那么我想对其进行编辑。我创建了一个似乎工作正常的编辑函数和一个添加到数据库的函数，该函数在被检查的级别不存在时调用。

这是我的功能

```
 void isHighScore(String level, int score) {
    List<String> scores = getHighScore();
    List<String> levels = getHighScoreLevel();

    for (int i = 0; i < levels.size(); i++) {

        int scoreVal = Integer.parseInt(scores.get(i));
        String levelVal = levels.get(i).toString();

        if (levelVal == level && scoreVal < score) {
            try {
                editScore(level, score);
            } catch (Exception e) {}
        }
    }
    if (!levels.contains(level)) {
        createHighScoreEntry(level, score);
    }
} 
```

到目前为止，只有创建入口函数在工作，所以我的主要问题在于 for 循环。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:14:16.900

您不应该使用 == 来比较字符串，因为它不会检查字符串是否实际上相等。您应该使用的是 String.equals() 或 String.compare() 或 String.contains()

String.equals() 检查它们是否相等。如果是这样，它返回 true

String.compare() 检查它们是否相等。如果是，则返回 0，否则返回 -1 或 1，具体取决于差异。

String.contains() 更通用，它会检查字符串中是否包含单词、字符或短语，如果它返回 true。

您可以使用此站点作为每个站点的参考 [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)

# delphi - 从 TResourceStream 读取

> ID：14789983
> 
> 赞同：0
> 
> 时间：2013-02-09T16:11:53.110
> 
> 标签：delphi

我正在尝试从资源文件中读取一些 gif 和位图，我正在使用资源黑客将图像包含到 project.res 文件中，但我使用的代码似乎没有返回正确的图像数量。

下面是我想要做的

```
Stream := TResourceStream.Create(HInstance,'EMOTES','BIN');
GetMem(Buffer,40000);
Stream.Read(StreamCount,4);
For I := 0 To StreamCount - 1 Do Begin
  Stream.Read(StreamSize,4);
  Stream.Read(Buffer^,StreamSize);
  ImageStream := TMemoryStream.Create;
  ImageStream.Write(Buffer^,StreamSize);
  ImageStreamList.Add(ImageStream);
  ImageStream.Free;
End;
FreeMem(Buffer);
Stream.Free; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T16:35:19.943

您似乎正在尝试从资源加载 GIF 文件。像这样做：

```
Stream := TResourceStream.Create(HInstance, 'EMOTES', 'BIN');
try
  image.LoadFromStream(Stream);
finally
  Stream.Free;
end; 
```

where`image`是类型的实例化对象`TGIFImage`。

我真的无法弄清楚您的代码要做什么。也许您有多个图像。在这种情况下，为每个图像创建一个资源，每个资源具有不同的名称。请注意，我并不是指每张图像一个 .res 文件。您可以将所有图像放入一个 .rc 文件中，每个资源具有不同的名称。然后将该 .rc 文件编译为 .res 文件并链接到您的应用程序。

# c# - 在 C# 中，如何检查 List<> 中对象的属性是否包含字符串？

> ID：14789984
> 
> 赞同：1
> 
> 时间：2013-02-09T16:12:03.097
> 
> 标签：c#, generics

假设我有一个像这样的对象：

```
class Thing {
  string Id;
  string Name;
  string Message;
} 
```

和一个`List<Thing>`。在将 a 添加`new Thing`到列表之前，我想检查以确保列表尚未包含该事物，但我没有完全相同的事物可与之比较（所以不能做`list.Contains(Thing)`，但我想做类似的东西）

Thing.Message 属性可能相同，但其他属性不同。

如何检查`List<Thing>`它是否包含`Thing`一个 .Message 属性等于特定字符串的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T16:13:36.327

林克！

```
if (myList.Any(t => t.Message == "hello")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T16:16:41.977

```
var addedThing = new Thing {…};
if (!things.Any(t=>t.Message == addedThing.Message)) {
    things.Add(addedThing);
} 
```

# android - 在 < 3 的旧 Android 上使用 largeHeap 的技巧？

> ID：14789985
> 
> 赞同：4
> 
> 时间：2013-02-09T16:12:09.447
> 
> 标签：android, memory-management, graphhopper

当我试图分配超过约。我的 graphhopper 项目在 Android 2.3（三星 Galaxy 1）上 30MB 我遇到了 OutOfMemory 错误。但我认识到，对于同一设备上的 Firefox 和 skobbler 等应用程序，分配超过 80MB 的空间是有可能的！至少我在任务管理器中看到了90甚至120MB的已用内存！

我发现较新的 Android 版本 >= 3 允许设置大堆标志 (largeHeap=true)，但是 Firefox 的人如何为 Android 2.3 执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T11:18:45.130

我认为可能是这些应用程序正在使用可能超出限制的本机内存（它们从本机代码请求内存）。

即使没有本机代码，也应该可以通过使用[ByteBuffer](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html)并调用 allocateDirect 来做到这一点。这可以使用[这个 hack](https://stackoverflow.com/q/3908520/194609)来验证。

**更新遗憾的是，根据**[这篇文章](http://www.badlogicgames.com/wordpress/?p=2367)，这只能通过本机代码实现。他们已将其包装在 java[实用程序调用](https://github.com/libgdx/libgdx/blob/32c6cd2768bba27bff0d5c6a026ca65771131671/gdx/src/com/badlogic/gdx/utils/BufferUtils.java#L287)中。但对于评论者“Delyan”，建议使用以下仅限 Java 的 hack 来进行图像处理：

```
BitmapFactory.Options opts = new BitmapFactory.Options();
Field field = opts.getClass().getField("inNativeAlloc");
field.setBoolean(opts, true); 
```

但是：*“也就是说，请记住这是**危险**的。如果设备内存不足，oomkiller 会先追踪你。没有警告，没有什么，只是 SIGKILL。所以，比以往任何时候都更要回收你没有的东西'不需要而且非常非常小心！”*

**更新 2**最终我们可以像流行的[Java-Chronicle 项目](https://github.com/peter-lawrey/Java-Chronicle/blob/master/chronicle/src/main/java/com/higherfrequencytrading/chronicle/impl/UnsafeExcerpt.java)中那样通过反射来访问[sun.misc.Unsafe](https://stackoverflow.com/q/5357390/194609)吗？

# hadoop - Amazon EMR：在 S3 中发现“无输出”

> ID：14789988
> 
> 赞同：0
> 
> 时间：2013-02-09T16:12:17.300
> 
> 标签：hadoop, amazon-web-services, amazon-s3, mapreduce, elastic-map-reduce

在 Amazon EMR 中运行作业时，我在 S3 中没有得到任何输出。

我指定了参数：

```
-inputfile s3n://exdsyslab/data/file.txt -outputdir s3n://exdsyslab/output 
```

当我检查作业日志时，我看到作业已成功完成。但是我的bucket exdsyslab的输出文件夹中没有输出。

我还尝试了另一件事。

我链接了两个工作：创建工作流时指定的参数：

```
-inputfile s3n://exdsyslab/data/file.txt -outputdir s3n://exdsyslab/result -outputdir1 s3n://exdsyslab/result1 
```

第二个工作的输入是第一个工作的输出。

当程序运行时，我在第二个作业中遇到了以下异常：

```
The output folder, "result", already exists. 
```

发生这种情况是因为该目录是由链中的第一个作业创建的。如何为 mapreduce 链中的第二个作业指定输入和输出？

为什么在参数中指定的 s3 存储桶中有输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:39:10.603

要获得正确的输出，请使用以下命令：

```
-inputfile s3n://exdsyslab/data/file.txt -output s3n://exdsyslab/output 
```

请注意，输出目录由“-output”指定。

对于链接作业：您不能按照您指定的方式进行操作，您必须为现有作业创建多个步骤才能执行它。这个其他答案可能会对您有所帮助：[https ://stackoverflow.com/a/11109592/1203129](https://stackoverflow.com/a/11109592/1203129)

对于您的特定情况，输入/输出目录必须如下所示：

第1步：

```
 -inputfile s3n://exdsyslab/data/file.txt -output s3n://exdsyslab/result 
```

第2步：

```
 -input s3n://exdsyslab/result -output s3n://exdsyslab/result1 
```

# c - 如何确定哪一个更快，占用内存更少？

> ID：14789993
> 
> 赞同：0
> 
> 时间：2013-02-09T16:12:55.210
> 
> 标签：c, performance, memory

**情况1 ：**

```
int fun(int num)
{
    if (num == 1)
        return 1;
    else
        return num * fun(num - 1);
} 
```

**案例二：**

```
int fun(int num)
{
    int i = 1;
    do
    {
        i = i * num;
        num--;
    }
    while (num);
    return i;
} 
```

我在面试问题中得到了上述问题并询问，哪个更快并且占用更少的内存。我真的不知道，如何找到哪个更快，除了我只是通过数代码行来猜测。但是，我认为，这不是正确的方法。请任何人帮助我，我应该考虑什么来解决这类问题。

**更新**

我要求的不仅仅是上述情况的一般情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T16:19:21.497

这取决于您正在使用的编译器和优化（一个好的编译器可以将第一个代码变成迭代），但是，一般来说，第二个解决方案会更快并且占用更少的内存（因为递归调用需要创建一个堆栈帧）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T16:28:14.370

## 代码大小

关于代码大小，我将第一个实现放入文件`f1.c`，第二个放入`f2.c`.

```
$ gcc -c f1.c f2.c
$ size f1.o f2.o
__TEXT  __DATA  __OBJC  others  dec hex
123 0   0   0   123 7b  f1.o
119 0   0   0   119 77  f2.o
$ gcc -O3 -c f1.c f2.c
$ size f1.o f2.o
__TEXT  __DATA  __OBJC  others  dec hex
372 0   0   0   372 174 f1.o
362 0   0   0   362 16a f2.o
$ 
```

请注意，两种实现的代码大小差别很小。有趣的是，优化后的代码比未优化的代码大得多（大约是未优化代码的三倍）。

（编译器：Mac OS X 10.7.5 上的 GCC 4.7.1。）

您应该注意到阶乘（这是这些函数实现的）增长非常快。事实上，13！太大而无法放入 32 位无符号整数 21！太大而无法放入 64 位无符号整数，而 35！太大而无法放入 128 位无符号整数（如果您能找到具有这种类型的计算机）。

* * *

## 代码速度——逆势而上的发现！

另外，请注意假设。我希望迭代解决方案比递归解决方案更快。然而，测量表明并非如此。

测试在配备 2.3 GHz Intel Core i7（和 16 GiB 内存，但内存不是此计算的一个因素）的 MacBook Pro 上运行。

测量表明，当优化代码时，递归解决方案始终比纯迭代解决方案快一点，这与我的预期完全相反，但说明了为什么需要进行性能测量。

### 优化代码

```
# iteration
# Count    = 10
# Mean     =   0.799869
# Variance =   0.000011

# recursion
# Count    = 10
# Mean     =   0.750904
# Variance =   0.000014 
```

后来我添加了一个查找表函数，其时间为：

```
# lookuptab
# Count    = 10
# Mean     =   0.213836
# Variance =   0.000004 
```

我添加了一个函数，它简单地返回其输入参数来测量测试工具开销，它给出了：

```
# over-head
# Count    = 10
# Mean     =   0.211325
# Variance =   0.000001 
```

所以数组查找的计算成本非常小。

### 未优化的代码

如果您曾经怀疑过优化器的能力，那么将优化时间与这些时间进行比较，以获得未优化的构建。

```
# iteration
# Count    = 10
# Mean     =   1.852833
# Variance =   0.000020

# recursion
# Count    = 10
# Mean     =   2.937954
# Variance =   0.000059 
```

和查找表版本：

```
# lookuptab
# Count    = 10
# Mean     =   0.730275
# Variance =   0.000026 
```

和开销版本：

```
# over-head
# Count    = 10
# Mean     =   0.633132
# Variance =   0.000009 
```

## 一般观察

*   简单的“代码行”不足以告诉您有关性能的任何信息。
*   测量胜过猜测。
*   优化器很好。

简单地计算代码行数不是一个好的指导方针的原因是不同的行有不同的成本。例如，包含对`sin()`,`cos()`和等函数的调用的单行代码`tan()`（可能）比包含单个整数算术运算和赋值的 20 行代码要昂贵得多。

当比较两个非常相似的函数时（如问题中所示），更复杂的递归往往比简单的迭代慢。但是，正如所证明的那样，当编译器设法优化时，这种猜测的结果可能是错误的，尤其是对于像阶乘这样的简单尾递归函数。

* * *

## 计时细节

这是一个测试程序：

```
static int fun1(int num)
{
    if (num == 1)
        return 1;
    else
        return num * fun1(num - 1);
}

static int fun2(int num)
{
    int i=1;
    do{
        i = i * num;
        num--;
    } while (num);
    return i;
}

static int fun3(int num)
{
    static const int factorial[] =
    {   1, 1, 2, 6, 24, 120, 720, 5040, 40320,
        362880, 3628800, 39916800, 479001600,
    };
    enum { MAX_FACTORIAL_NUM = (sizeof(factorial)/sizeof(factorial[0])) };
    if (num < 0 || num >= MAX_FACTORIAL_NUM)
        return 0;
    else
        return factorial[num];
}

static int fun4(int num)
{
    return num;
}

#include "timer.h"
#include <stdio.h>

static void tester(char const *name, int (*function)(int))
{
    char buffer[32];
    Clock  clk;
    unsigned long long sumfact = 0;

    clk_init(&clk);
    clk_start(&clk);
    for (int i = 0; i < 100000000; i++)
        sumfact += (*function)(i % 12 + 1);
    clk_stop(&clk);
    printf("%s: %s (%llu)\n", name, clk_elapsed_us(&clk, buffer, sizeof(buffer)), sumfact);
}

int main(void)
{
    for (int i = 0; i < 10; i++)
    {
        tester("recursion", fun1);
        tester("iteration", fun2);
        tester("lookuptab", fun3);
        tester("over-head", fun4);
    }
    return(0);
} 
```

测试代码小心翼翼地尽可能对称地对待这两个函数，并交替测试每个函数，以减少后台进程干扰性能的机会。（在这些测试中，通常在后台运行的 BOINC 进程被关闭；之前问题的时间经验表明它们严重影响了结果，并在结果中引入了更多的可变性。）

### `-O3`优化 ( ) 构建的原始时间

没有查找表或开销函数的早期版本的程序。

```
recursion: 0.754428 (4357969100681262)
iteration: 0.799330 (4357969100681262)
recursion: 0.749773 (4357969100681262)
iteration: 0.798897 (4357969100681262)
recursion: 0.747794 (4357969100681262)
iteration: 0.800977 (4357969100681262)
recursion: 0.748282 (4357969100681262)
iteration: 0.792708 (4357969100681262)
recursion: 0.748342 (4357969100681262)
iteration: 0.798776 (4357969100681262)
recursion: 0.748377 (4357969100681262)
iteration: 0.801641 (4357969100681262)
recursion: 0.750115 (4357969100681262)
iteration: 0.802468 (4357969100681262)
recursion: 0.750807 (4357969100681262)
iteration: 0.802829 (4357969100681262)
recursion: 0.751296 (4357969100681262)
iteration: 0.796841 (4357969100681262)
recursion: 0.759823 (4357969100681262)
iteration: 0.804221 (4357969100681262)

real        0m15.575s
user        0m15.556s
sys         0m0.027s 
```

### 未优化构建的原始时间

没有查找表或开销函数的早期版本的程序。

```
recursion: 2.951282 (4357969100681262)
iteration: 1.852239 (4357969100681262)
recursion: 2.932758 (4357969100681262)
iteration: 1.851512 (4357969100681262)
recursion: 2.924796 (4357969100681262)
iteration: 1.862686 (4357969100681262)
recursion: 2.946792 (4357969100681262)
iteration: 1.846961 (4357969100681262)
recursion: 2.941705 (4357969100681262)
iteration: 1.849099 (4357969100681262)
recursion: 2.938599 (4357969100681262)
iteration: 1.852089 (4357969100681262)
recursion: 2.930713 (4357969100681262)
iteration: 1.854765 (4357969100681262)
recursion: 2.935669 (4357969100681262)
iteration: 1.851478 (4357969100681262)
recursion: 2.938975 (4357969100681262)
iteration: 1.856979 (4357969100681262)
recursion: 2.938250 (4357969100681262)
iteration: 1.850521 (4357969100681262)

real        0m47.980s
user        0m47.939s
sys         0m0.041s 
```

我注意到两个阶乘函数的代码中都有一个错误；当被要求计算 0! 时，两者都进入长时间运行的循环（并通过溢出 32 位类型调用各种未定义的行为`int`），它实际上定义良好并且值为 1。这就是为什么在测试工具中调用是`(*function)(i % 12 + 1)`而不是`(*function)(i % 13)`我最初写的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-09T16:17:37.180

(1) 使用递归，并且可能是堆栈溢出的主题。(2) 是迭代的，并且使用恒定的内存量。我会说 (2) 应该更快。

如果您查看反汇编代码，（1）将具有`call`比递增/递减循环计数器更昂贵的指令。但是，我相信如果您将 1 作为参数传递给函数， (1) 可能会更快。如果参数大于 1，则 (2) 应该更快地执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T16:17:40.097

循环比函数调用更简单，它涉及到它何时被编译为程序集。

您可以通过在调用一段代码之前和之后测量和比较时间戳和内存使用情况来测量所用时间和内存使用情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-09T16:20:52.973

迭代（没有递归的第二个）更快。

通过性能分析检查这篇文章：http: [//www.codeproject.com/Articles/21194/Iterative-vs-Recursive-Approaches](http://www.codeproject.com/Articles/21194/Iterative-vs-Recursive-Approaches)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-09T16:28:00.353

使用更多内存的原因是在递归解决问题时会占用空间。问题不在于递归本身，因为递归可以实现为不使用堆栈空间（至少在某些语言中，您可以使用“尾”递归而不会受到惩罚）。但是，正如所写，它不是尾递归，递归调用的结果需要与`num`活动调用的结果相乘（这可以写得更好，抱歉）。

# c# - 多线程服务器

> ID：14789998
> 
> 赞同：0
> 
> 时间：2013-02-09T16:13:12.407
> 
> 标签：c#, wcf, iis-7.5, wcf-binding

我正在编写一个测试 WCF 服务器，其方法是添加 2 个数字并等待可配置的毫秒数。

我写了一个 wcf 客户端。当我打开此客户端的两个实例时 - 在客户端 A 上，等待值为 50 秒，在另一个客户端 B 上，等待值为 0 秒。我希望当客户端 A 正在运行（长进程）时，客户端 B 会立即得到响应。

但是它不起作用。我一直在关注本教程[WCF Concurrency](http://www.codeproject.com/Articles/89858/WCF-Concurrency-Single-Multiple-and-Reentrant-and#Pre-requisite)

为什么它不适合我？

**WCF 服务**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;

namespace WCFService
{
    //[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall,ConcurrencyMode = ConcurrencyMode.Multiple,UseSynchronizationContext = true)]
    //[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall,ConcurrencyMode = ConcurrencyMode.Single)] 
    //[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple)]
    //[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession,ConcurrencyMode = ConcurrencyMode.Multiple)]
    //[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall, ConcurrencyMode = ConcurrencyMode.Multiple)]
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession,ConcurrencyMode = ConcurrencyMode.Multiple)]
    public class WCFJobsLibrary : IWCFJobsLibrary
    {

        public ReturnClass AddNumbers(int FirstNumber, int SecondNumber, int Delay) //Add two numbers and wait a predefined interval
        {
            ReturnClass myReturnClass = new ReturnClass(-1, null, null, 0);
            try
            {             

                myReturnClass.ErrorCode = 1;
                myReturnClass.Result = FirstNumber + SecondNumber;
                System.Threading.Thread.Sleep(Delay); // Wait
                return myReturnClass;

            }
            catch (Exception ex)
            {              
                myReturnClass.ErrorCode = -1;
                myReturnClass.ErrorMessage = ex.ToString();
                return myReturnClass;
            }

        }

    }
} 
```

**WCF 客户端**

```
try
            {

                radTextBoxResult.Text = ""; // Reset Result
                ServiceReference1.WCFJobsLibraryClient Client = new ServiceReference1.WCFJobsLibraryClient();
                Client.Endpoint.Address = new System.ServiceModel.EndpointAddress(radTextBoxbaseAddress.Text);
                WCFClient.ServiceReference1.ReturnClass AddNumbers_Result;
                AddNumbers_Result = Client.AddNumbers(int.Parse(radTextBoxFirstNumber.Text), int.Parse(radTextBoxSecondNumber.Text), int.Parse(radTextBoxDelay.Text));

                if (AddNumbers_Result.ErrorCode < 0)
                {
                    // If exception happens, it will be returned here
                    MessageBox.Show(AddNumbers_Result.ErrorCode.ToString() + " " + AddNumbers_Result.ErrorMessage + " " + AddNumbers_Result.ExMessage);
                }

                else
                {

                    radTextBoxResult.Text = AddNumbers_Result.Result.ToString();

                }

            }

            catch (Exception ex)
            {

                MessageBox.Show(ex.Message.ToString());

            } 
```

**应用程序配置**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <behaviors>
            <serviceBehaviors>
                <behavior name="">
                    <serviceMetadata httpGetEnabled="true" />
                    <serviceDebug includeExceptionDetailInFaults="false" />
                  <serviceThrottling maxConcurrentCalls="16" maxConcurrentInstances="2147483647" maxConcurrentSessions="10" />
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <services>
            <service name="WCFService.WCFJobsLibrary">
                <endpoint address="" binding="wsHttpBinding" contract="WCFService.IWCFJobsLibrary">
                    <identity>
                        <dns value="localhost" />
                    </identity>
                </endpoint>
                <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
                <host>
                    <baseAddresses>
                        <add baseAddress="http://localhost:8732/Design_Time_Addresses/WCFService/WCFJobsLibrary/" />
                    </baseAddresses>
                </host>
            </service>
        </services>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:49:24.887

问题可能是 InstanceContextMode = InstanceContextMode.PerSession 设置，因为您的 2 个调用共享同一个会话。尝试 InstanceContextMode = InstanceContextMode.PerCall。

这两个调用都使用您的服务的一个实例，但如果第一个调用将其停止 50 秒，那么第二个调用处理将等到线程重新开始工作并为第一个调用提供服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T17:04:19.510

问题是我在主线程上的 winform 应用程序中启动服务。您需要在单独的线程上启动 WCF，如下所示。

**C# 代码**

```
private void radButtonStartWCFService_Click(object sender, EventArgs e)
{
    try
    {
        Thread Trd = new Thread(() => StartWCFServer());
        Trd.IsBackground = true;
        Trd.Start();

        radButtonStartWCFService.Enabled = false;
        radButtonStartWCFService.Text = "WCF Server Started";

    }

    catch(Exception ex)
    {
        MessageBox.Show(ex.Message.ToString());
    }
}

private void StartWCFServer()
{

    try
    {
        sHost = new ServiceHost(typeof(WCFService.WCFJobsLibrary));
        sHost.Open();

    }

    catch (Exception ex)
    {

        MessageBox.Show(ex.Message.ToString());

    }
} 
```