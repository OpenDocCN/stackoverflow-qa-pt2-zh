# StackOverflow 问答 13379000-13379999

# c# - 强制任务在继续更新 UI 之前等待

> ID：13379002
> 
> 赞同：1
> 
> 时间：2012-11-14T12:40:58.110
> 
> 标签：c#, multithreading, task-parallel-library, wait

全部，我想更新 a`ToolStripMenu`以显示`SqlConnection`失败。我希望错误消息显示一段时间`timeToWaitMs`（以毫秒为单位），然后在一段时间和一些操作后将 UI 刷新回正常状态。目前我正在做（删除了一些不必要的细节）

```
public void ShowErrorWithReturnTimer(string errorMessage, int timeToWaitMs = 5000)
{
    // Update the UI (and images/colors etc.).
    this.toolStripLabelState.Text = errorMessage;

    // Wait for timeToWait and return to the default UI.
    Task task = null;
    task = Task.Factory.StartNew(() =>
        {
            task.Wait(timeToWaitMs);
        });

    // Update the UI returning to the valid connection.
    task.ContinueWith(ant =>
        {
            try
            {
                // Connection good to go (retore valid connection update UI etc.)!
                this.toolStripLabelState.Text = "Connected";
            }
            finally
            {
                RefreshDatabaseStructure();
                task.Dispose();
            }
        }, CancellationToken.None,
            TaskContinuationOptions.None,
            mainUiScheduler);
} 
```

我遇到的问题`task.Wait(timeToWaitMs);`是导致`Cursors.WaitCursor`显示 - 我不想要这个。如何强制显示错误消息一段时间，然后返回非错误状态？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T12:46:03.183

我根本不会在这里使用任务 - 至少在没有 C# 5 中的异步功能的情况下不会。在 C# 5 中你可以写：

```
await Task.Delay(millisToWait); 
```

但在你明白之前，我只会使用适合你的 UI 的计时器，例如[`System.Windows.Forms.Timer`](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)或[`System.Windows.Threading.DispatcherTimer`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx). 只需使用您当前获得的作为计时器的“tick”处理程序的延续，并适当地安排它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:28:50.453

您可以使用计时器，而不是 task.Wait()。您可以让它等待一段时间。一旦计时器计时，回调就可以开始更新。

```
var timer = new Timer(timeToWaitMs);
timer.Elapsed += (s, e) =>
                              {
                                  timer.Stop();
                                  UpdateValidConnection();
                              };

private void UpdateValidConnection()
{
    Task.Factory.StartNew(() =>
    {
        try             
        {
            this.toolStripLabelState.Text = "Connected";
        }
        finally
        {
            RefreshDatabaseStructure();
        }
    }, CancellationToken.None, TaskCreationOptions.None, mainUiScheduler);
} 
```

# android - Android：Activity A -> C，但是 C -> B -> A 通过后退按钮，怎么做？

> ID：13379005
> 
> 赞同：3
> 
> 时间：2012-11-14T12:41:11.657
> 
> 标签：android

我有三个活动：A，B，C。活动A可以启动B或C。当A启动C时，我只需按下后退按钮即可返回A。但我想“返回”到 B，然后到 A（第二次按下后退按钮）。

我尝试以这种方式使用 TaskBackStack：

```
final TaskStackBuilder builder = TaskStackBuilder.create(this)
    .addParentStack(this)
    .addNextIntent(new Intent(this, B.class))
    .addNextIntent(new Intent(this, C.class));
builder.startActivities(); 
```

但它不起作用......有人可以帮助我吗？

对不起我的英语，提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T12:50:37.490

覆盖活动 C 中的 onBackPressed 方法。

```
 @Override
                public void onBackPressed() {
                    super.onBackPressed();
                    //finish();
                        Intent intent = new Intent(ActivityC.this,ActivityB.class);
                        startActivity(intent);
                     } 
```

如果你写完成，你可以去活动 A，因为你来自活动 A。这就是为什么使用意图。就像在活动 B 中一样。

```
@Override
public void onBackPressed() {
     super.onBackPressed();
     //finish();
     Intent intent = new Intent(ActivityB.this,ActivityA.class);
     startActivity(intent);
} 
```

让我知道状态？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T12:45:35.600

覆盖你的`onKeyDown`方法

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {

            //Do stuff, like launching a new activity

            return true;
        }
        return super.onKeyDown(keyCode, event);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T12:52:50.827

[使用 Activity Lifecycle](http://developer.android.com/reference/android/app/Activity.html)进入此开始。您将对此有更好的了解。转到此[在 Android 中从另一个调用一个 Activity](https://stackoverflow.com/questions/5152564/calling-one-activity-from-another-in-android)。你会在谷歌上找到很多例子。试试看..[例子之一](http://www.mkyong.com/android/android-activity-from-one-screen-to-another-screen/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T14:17:16.567

在尝试回答您的问题之前，我对您在活动之间导航的方法有一些评论。一般来说，这种方法不是一个好主意，因为这样做，您没有遵循 Android 导航模式，这会使您的应用程序对用户不友好，因为大多数 Android 应用程序都使用导航模式。

Android导航模式[说](http://developer.android.com/training/design-navigation/ancestral-temporal.html)：

> 时间导航，或历史画面之间的导航，深深植根于 Android 系统。所有 Android 用户都希望后退按钮将他们带到上一个屏幕，而不管其他状态如何。历史屏幕集始终植根于用户的 Launcher 应用程序（手机的“主”屏幕）。也就是说，按下 Back 足够多的时间应该会让你回到 Launcher，之后 Back 按钮将不会执行任何操作。

但是，使用 Android 模式在您的应用程序中导航还有另一种可能，但我相信这不是您问题的解决方案。你可以看看[向上导航](http://developer.android.com/design/patterns/navigation.html#up-vs-back)

最后，我有一个关于使用覆盖 OnBackPressed() 来启动新活动的解决方案的相关评论。**你真的应该避免这种情况**，因为使用它，你会让你的时间导航变得疯狂。因为当你在 OnBackPressed 内部创建一个 Activity 时，你总是在 Android Stack 上放置一个新的 Activity，所以这里有两个问题：

1.  堆栈可以根据用户行为快速增长
2.  很难摆脱你的应用程序（很难让你的堆栈变空）

# javascript - Javascript颜色选择器问题

> ID：13379008
> 
> 赞同：0
> 
> 时间：2012-11-14T12:41:18.010
> 
> 标签：javascript, html

我正在用 HTML5 和 JS 构建一个简单的绘图应用程序。我无法更改画布背景的颜色。

我有一个调用颜色选择器的输入框。当值改变时，它应该调用 getBgColor() 函数并更新画布。但是该功能甚至没有被执行，我不知道为什么！

输入框：

```
 <input id = "bgcolor_select" type="text" value="Background Color" onclick="colorPicker(event)" onchange="getBgColor()"/> 
```

值改变时输入框调用的函数：

```
function getBgColor(){
    console.log("Bg Color: " + document.getElementById("bgcolor_select").value);
    context.fillStyle = document.getElementById("bgcolor_select").value;
    context.fillRect(0,0, canvas.width, canvas.height);
    } 
```

当我运行我的应用程序时，当我选择颜色时，我可以看到字段中的值发生变化，但由于某种原因它没有调用该函数。如果我在值中添加一个字符并将其删除，那么它会调用该函数。

任何帮助appriciated！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:52:55.943

设置时，不会触发`input.value = ...`任何事件。`change`这仅在用户通过实际文本框更改值时发生。您可以自己手动触发它，但在这种情况下，您可以直接调用`getBgColor()`。

# mongodb - Spring Data MongoDB索引查询子文档

> ID：13379009
> 
> 赞同：0
> 
> 时间：2012-11-14T12:41:18.593
> 
> 标签：mongodb, spring-data

在[MongoDB 文档](http://www.mongodb.org/display/DOCS/Indexes#Indexes-AdditionalNotes "MongoDB 文档")中，我们有以下示例：

```
db.factories.insert( { name: "xyz", metro: { city: "New York", state: "NY" } } );
db.factories.ensureIndex( { metro : 1 } );
// this query can use the above index:
db.factories.find( { metro: { city: "New York", state: "NY" } } ); 
```

我目前正在寻找一种解决方案来在 spring 数据中归档这个查询。我的第一种方法是

```
Query.query(Criteria.where("metro")
    .andOperator(Criteria.where("city").is("New York")
    .and("state").is("NY"))) 
```

但这会导致以下查询

```
{ "metro" : { } , "$and" : [ { "city" : "New York" , "state" : "NY"}]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:58:16.350

最后我通过摆弄找到了解决方案：

```
Query.query(Criteria.where("metro").is(
    Query.query(
        Criteria.where("city").is("New York")
        .and("state").is("NY")).getQueryObject()
    )
)
// results in { metro: { city: "New York", state: "NY" } } 
```

希望这是正确的方法......

# php - 使用 NOT 运算符的 PHP 字符串切换

> ID：13379013
> 
> 赞同：0
> 
> 时间：2012-11-14T12:41:28.860
> 
> 标签：php, switch-statement

我正在处理的投资组合网站的标题中有一个小的 switch 语句，它控制哪些链接显示在哪个页面上。$id 的值来自 GET 变量，即 - '?id=index'。

```
 switch($id) {
    case "index":
        //Show links to content
    case !"index":
        //Show link to index
    case !"about":
        //show link to about page
} 
```

问题是 NOT 运算符在最后两种情况下不起作用。我希望当用户不在索引页面上时显示索引的链接，以及关于页面的链接。目前，所有链接都显示在索引页面上（当 $id == "index 时），并且 NONE 显示在任何其他页面上。

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T12:44:36.073

之所以如此，是因为它应该如此。

`switch`使用`==`运算符进行比较。所以在第二种情况下，你实际上是在测试是否

```
$id == (!"index") 
```

这将始终评估为，`false`因为任何字符串都是`true`，而不是真实的`false`。

这意味着，在您的情况下，最好使用`if`and `else`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:46:43.650

抱歉，但是您尝试做的只是`switch`/`case`构造的无效语法。

最接近您正在寻找的内容是使用该`default`选项。这就像一个最终`case`选项，它处理没有被前面的任何`case`s 捕获的所有值。

```
switch($id) {
    case "index":
        //Show links to content
    case "about":
        //Show link to about page
    default:
        //show link to default page.
} 
```

另外 - 不要忘记`break;`每个块的末尾`case`，否则它会掉到下一个，这可能会导致一些意想不到的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:47:19.663

`!"index"`可能会评估为`false`（但我对它没有导致语法错误感到惊讶）并且您实际上将拥有以下语句：

```
switch($id){
    case "index": //...
    case false: // ...
    case false: // ...
} 
```

当你想使用`switch`时，你需要这样做：

```
switch($id){
    case "index": // ...
    case "about": // ...
    default: 
        // Additional statements here, note that $id != "index" is already covered 
        // by not entering into case "index"
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T12:48:18.413

switch case 不接受复杂的表达式。不！运算符是**逻辑**运算符。它适用于这样的表达式。

```
!$x; // true if $x = false 
```

或作为**比较运算符**：

```
 $a != $b; // Not equal
 // or 
 $a !== $b // not identical 
```

从手册。

> [switch](http://no.php.net/manual/en/control-structures.switch.php)语句的 case 表达式可以是计算结果为简单类型的任何表达式，即整数或浮点数和字符串。数组或对象不能在此处使用，除非它们被取消引用为简单类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T12:49:51.703

您的代码所做的是将 $id 与三个值进行比较：“index”、!“index”（无论它是什么意思）和 !“about”。

我不确定你的方法。您应该尝试 if/else 或三元运算符。

希望它有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T12:53:36.780

Switch 不提供自定义运算符。

```
 switch ( $id ) {
     case 'index':
          // $id == 'index'

          break;

     case 'about':
          // $id == 'about'

          break;

     case 'help':
     case 'info':
           // $id == 'info' or $id == 'help'

           break;

     default:
          // all other cases
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-22T09:39:42.523

当然，您可以通过以下方式解决此问题：

```
switch($id){
    case ($id != 'index'):
        echo 'this is not index';
        break;
    case 'index':
        echo 'this is index';
        break;
    case 'foo':
        echo 'this is foo!';
        break;
    default:
        break;
} 
```

然而，这个例子是有缺陷的，因为第一个 case 语句只会捕获任何不是 'index' 的东西，因此你不应该使用 case 'foo' 或 default 语句

# silverlight - Silverlight RIA UsingCustomMethod 不起作用

> ID：13379016
> 
> 赞同：0
> 
> 时间：2012-11-14T12:41:33.273
> 
> 标签：silverlight, wcf-ria-services

SL5 和最新的 RIA 服务，来自 XAML：

```
context.RemoveAccountFromRole(draggedPerson); 
```

使用 Invoke 属性时在域服务中调用它：

```
 [Invoke]
 public void RemoveAccountFromRole(Account draggedPerson) 
```

但是当我使用时：

```
[Update(UsingCustomMethod = true)]
public void RemoveAccountFromRole(Account draggedPerson) 
```

当我设置断点时，它永远不会到达域服务。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:43:23.367

这是一个 DomainContext 问题 - 我从错误的上下文中调用

这是从代码隐藏中引用 XAML DomainContext 的方法。

```
custDomainContext context = (custDomainContext)AccountsDataSourceT32.DomainContext;
context.RemoveAccountFromRole(draggedPerson, roleID);
AccountsDataSourceT32.SubmitChanges(); 
```

# sunspot-rails - sunspot_rails 宝石

> ID：13379021
> 
> 赞同：0
> 
> 时间：2012-11-14T12:42:10.620
> 
> 标签：sunspot-rails

目前我正在将搜索逻辑迁移到太阳黑子搜索引擎，我有一个查询如何在多态关联中实现搜索。

这是模型内容

类供应商 < ActiveRecord::Base has_and_belongs_to_many :specialties end

供应商表字段名称，toll​​_free，信用

类专业 < ActiveRecord::Base has_and_belongs_to_many :vendors end

专业表字段名称、created_at、updated_at

如何使用专业名称进行搜索并显示结果在哪里添加可搜索的该关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T07:29:12.697

我已经在这样的模型中实现了太阳黑子搜索

```
searchable do
    autocomplete :vendor_name, :using => :name
    text  :name,:credit,:toll_free
    text :specialties do |vendor| 
      vendor.specialties.map { |specialty| specialty.name } 
    end  
  end 
```

在控制器中

```
 @search = Vendor.search(:include=>[:specialties]) do
  fulltext params[:search]
  paginate :page => params[:page], :per_page => 30 
 end
 @vendors = @search.results 
```

我关注了这个网站

[https://github.com/sunspot/sunspot/wiki/Adding-Sunspot-search-to-Rails-in-5-minutes-or-less](https://github.com/sunspot/sunspot/wiki/Adding-Sunspot-search-to-Rails-in-5-minutes-or-lesshttps://github.com/sunspot/sunspot/wiki/Adding-Sunspot-search-to-Rails-in-5-minutes-or-less)

我正在分享我在项目中使用太阳黑子搜索引擎的经验..

# html - 在网页中添加 Google 搜索

> ID：13379026
> 
> 赞同：8
> 
> 时间：2012-11-14T12:42:38.170
> 
> 标签：html, search

我想将搜索添加到静态站点。最简单的方法是通过在实际查询中附加“site:www.acme.com”来简单地查询 Google，以便 Google 将搜索限制在该站点。

理想情况下，我想在浏览器中执行此操作，以避免在服务器上安装 PHP。使用表单，我不知道如何附加搜索项：

```
<form action=http://www.google.com?q="site:www.acme.com+...">
<input type=text id=search_item>
</form> 
```

有人知道客户端解决方案吗？我应该为此使用一些 JavaScript 吗？

谢谢你。

* * *

编辑：当使用 "method=get" 和 "input name=q value="site:www.acme.com "" 时，浏览器确实会用 "www.google.com?q="site:www.acme .com some item”，但我宁愿避免使用“site:www.acme.com”预设输入框，因为用户会觉得这很奇怪，可能会删除它。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-14T12:45:00.840

您只需将表单方法设置为“get”，在您要搜索的站点中添加一个额外的隐藏元素，它会自动将其粘贴到 URL 后面，如下所示：

```
<form action="https://google.com/search" method="get">
<input type="hidden" name="sitesearch" value="http://acme.com" />
<input type="text" name="q" />
</form> 
```

因为这就是 HTML 表单默认的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:53:13.317

你可以这样做：

```
<script type="text/javascript">

function google_search()
{
window.location = "http://www.google.com/search?q=site:www.acme.com+" + encodeURIComponent(document.getElementById("q").value);
}

</script>

<form onSubmit="google_search()">
<input type="text" name="q" id="q" value="" />
<input type="submit" value="search" onClick="return google_search()" />
</form> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-02-19T03:53:18.363

```
 <form method="get" action="http://google.com/search">

    <input type="text" name="q" required autofocus>
    <input type="submit" value="Google search">

  </form>
```

**如果您想使用必应搜索引擎，请将“google”替换为“bing”。**

# php - PHPExcel解析带有“数字存储为文本”警告的.XLS文件返回#VALUE

> ID：13379030
> 
> 赞同：3
> 
> 时间：2012-11-14T12:42:57.583
> 
> 标签：php, numbers, phpexcel, xls

我的代码使用**getFormattedValue()**方法将数据拉入**PHP**。

这是 .xls 的问题部分，**在 D 列带有“数字存储为文本”**：

```
Excel cells contains next values:   D7 -> 0,43;  E7 -> =D7*1,2;  F7 -> =E7*11,2;
getFormattedValue() returns:          0,43;        #VALUE!;          #VALUE!;
getCalculatedValue() also returns     0,43;        #VALUE!;          #VALUE!;
getValue() returns                    0,43;        D7*1.2;           E7*11.2; 
```

如果我按照它的建议在excel中修复它，以编号。然后 getFormattedValue() 工作得很好。但我不能告诉客户你的 xls 是错误的......

所以问题，是否有可能让 PHPExcel 像 Excel 一样工作？或者也许是其他一些方法来完成这项工作。

感谢您的帮助和时间！

**--- 编辑 1 ---**

**基本上这是对马克贝克**回答的评论。

我想找到一个不包括对 .xls 文件进行任何更改的解决方案。我不知道它会是什么结构，问题单元在哪里，等等。

有什么方法可以让 PHPExcel 识别这些单元格吗？也许 MS Excel 是如何做到的？或者找出我们的方法来做到这一点。

我考虑尝试将单元格值自行划分，如果我们得到 1，那么这是一个数字单元格。AND\OR 查找包含在数学计算中的单元格。为了更好地理解我的意思 - 单元格 E7 包含 D7 * 1,2。所以，我们可以检查 - D7 是数字吗？类似的东西。

目前我对这个问题没有任何解决方案......所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T16:49:07.563

在从列 E​​ 和 F 中的单元格获取值之前，您需要将列 D 中的这些字符串值转换为有效数字（使用小数点而不是逗号）。如果有问题的单元格始终位于同一列中（或位于最不可预测）您可以在加载工作簿时使用单元格活页夹来处理此转换。

**编辑**

您需要创建一个活页夹，例如：

```
class PHPExcel_Cell_AdvancedValueBinder 
    extends PHPExcel_Cell_DefaultValueBinder 
    implements PHPExcel_Cell_IValueBinder
{
    public function bindValue(PHPExcel_Cell $cell, $value = null)
    {

        // sanitize UTF-8 strings
        if (is_string($value)) {
            $value = PHPExcel_Shared_String::SanitizeUTF8($value);
        }

        // Find out data type
        $dataType = parent::dataTypeForValue($value);

        if ($dataType === PHPExcel_Cell_DataType::TYPE_STRING && 
            !$value instanceof PHPExcel_RichText) {
            if (preg_match('/^\d+,\d+$/', $value)) {
                list($w, $d) = explode(',', $value);
                $value = (float) $w . '.' . $d;
                $cell->setValueExplicit($value, PHPExcel_Cell_DataType::TYPE_NUMERIC);
                return true;
            }
        }

        // Not bound yet? Use parent...
        return parent::bindValue($cell, $value);
    }
} 
```

# asp.net - 向 asmx Web 服务发出请求时出错

> ID：13379033
> 
> 赞同：0
> 
> 时间：2012-11-14T12:43:04.300
> 
> 标签：asp.net, web-services, soap

我正在向 ASMX Web 服务发出如下请求 -

```
private HttpWebResponse SendSoap12Msg(string url, string method, 
                       Dictionary<string, string> KeyValue)
{
    StringBuilder SoapMessage = new StringBuilder();
    SoapMessage.Append("<?xml version='1.0' encoding='utf-8'?>");
    SoapMessage.Append(@"<soap12:Envelope xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'");
    SoapMessage.Append(@" xmlns:xsd='http://www.w3.org/2001/XMLSchema'>");
    SoapMessage.Append(@" xmlns:soap12='http://www.w3.org/2003/05/soap-envelope'");
    //SoapMessage.Append(@" xmlns:soap12='http://schemas.xmlsoap.org/wsdl/soap12/'");
    SoapMessage.Append("<soap12:Body>");
    SoapMessage.Append("<");
    SoapMessage.Append(method);
    SoapMessage.Append(@" xmlns='http://tempurl.org/'>");

    foreach (KeyValuePair<string, string> kvp in KeyValue)
    {
        SoapMessage.Append("<");
        SoapMessage.Append(kvp.Key);
        SoapMessage.Append(">");
        SoapMessage.Append(kvp.Value);
        SoapMessage.Append("</");
        SoapMessage.Append(kvp.Key);
        SoapMessage.Append(">");
    }
    SoapMessage.Append("</");
    SoapMessage.Append(method);
    SoapMessage.Append(">");
    SoapMessage.Append("</soap12:Body>");
    SoapMessage.Append("</soap12:Envelope>");

    // Build HttpWebRequest
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(new Uri(url));
    request.Method = "POST";
    request.ProtocolVersion = HttpVersion.Version11;
    request.ContentType = "application/soap+xml; charset=\"utf-8\"";
    //request.Accept = "application/soap+xml";

    // Send SOAP Envelope
    byte[] data = Encoding.UTF8.GetBytes(SoapMessage.ToString());
    request.ContentLength = data.Length;
    Stream requestStream = request.GetRequestStream();
    requestStream.Write(data, 0, data.Length);
    requestStream.Close();

    return (HttpWebResponse ) request.GetResponse();
} 
```

但是，每当发送请求时，我都会收到`500 - Internal Server Error`一个响应。使用这些深入挖掘异常 -

```
catch (WebException ex)
{
    Response.ContentType = "text/html";
    Response.Write("---------- Start: A WebException occured ----------<br />");
    Response.Write("Returned Content Type: " + ex.Response.ContentType); 
    Response.Write("<br />");
    Response.Write("Is From Cache: " + ex.Response.IsFromCache);
    Response.Write("<br />");
    Response.Write("Response URI: " + ex.Response.ResponseUri.ToString());
    Response.Write("<br />");
    Response.Write("ToString: " + ex.Response.ToString());
    Response.Write("<br />");
    Response.Write("ReadToEnd: " + 
            new StreamReader(ex.Response.GetResponseStream()).ReadToEnd()); 
    Response.Write("<br />");
    Response.Write("---------- End: A WebException occured ----------");
} 
```

我得到以下输出 -

```
---------- Start: A WebException occured ----------
Returned Content Type: application/soap+xml; charset=utf-8
Is From Cache: False
Response URI: (the target uri, as expected)
ToString: System.Net.HttpWebResponse
ReadToEnd: soap:ReceiverServer was unable to process request. ---> 'soap12' is an undeclared prefix. Line 1, position 40.
---------- End: A WebException occured ---------- 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:12:21.133

确保 SOAP1.2 的绑定已添加到 web.config，并且已为该服务配置并启用它们。

```
<wsdl:binding name="ServiceSoap12" type="tns:ServiceSoap"> 
```

接着

```
<configuration>
  <system.web>
    <webServices>
      <protocols>
        <add name="HttpSoap12"/>
      </protocols>
    </webServices>
  </system.web>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:16:50.393

我看到您正在构建的 SOAP 请求中唯一缺少的是`<request>`方法名称之后和参数之前的标记。忽略它有时会产生这样的错误，或者使请求到 WS 实体的转换失败。

尝试以下操作（为简洁起见，省略了一些内容）：

```
SoapMessage.Append(String.Format(@"<{0} xmlns='http://tempurl.org/'>", method));
SoapMessage.Append("<request>");    // Line added

foreach (KeyValuePair<string, string> kvp in KeyValue)
{
    SoapMessage.Append(String.Format("<{0}>", kvp.Key));
    SoapMessage.Append(kvp.Value);
    SoapMessage.Append(String.Format("</{0}>", kvp.Key));
}

SoapMessage.Append("</request>");   // Line added
SoapMessage.Append(String.Format("</{0}>", method)); 
```

巧合的是，我和我们的一个客户遇到了这个问题，原因是缺少请求标签。在某些情况下，您可以安全地忽略它，但有时它显然是强制性的。我还添加了 的使用`String.Format`，这使得代码更短更容易理解。

**编辑：** 我看到的唯一另一件事是您在请求标头中设置[SOAP 操作。](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383528)您可以通过以下方式添加它：

```
request.Headers.Add("SOAPAction:", "http://tempurl.org/YourMethodname"); 
// You might need to try some variations. 
// Or replacing tempurl.org with the actual domain. 
```

如果你用谷歌搜索“C# HttpWebRequest SoapAction”，你会发现更多的人得到错误 500；特别是在请求中省略它时。

另请参阅，此博客条目与您尝试的操作几乎完全相同：http: [//mikehadlow.blogspot.nl/2006/05/making-raw-web-service-calls-with.html](http://mikehadlow.blogspot.nl/2006/05/making-raw-web-service-calls-with.html)

# magento - 如何覆盖magento中的product.js文件

> ID：13379034
> 
> 赞同：9
> 
> 时间：2012-11-14T12:43:06.047
> 
> 标签：magento

我想覆盖 product.js 文件以在某些函数中添加一些额外的值。我已将文件从 js/mage/adminhtml/product.js 复制到我的文件夹，如 js/myfolder/myproduct.js。我该如何使用我尝试文件的功能，但它对我不起作用。当我更改对象名称时，它不会显示任何错误，但没有发生任何事情，`(Products.Gallery = Class.create()`原来是 Product.Gallery = Class.create();)。谁能告诉我如何在不与原始功能冲突的情况下使用 myproduct 的所有功能。

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-14T16:30:50.723

假设您`function loadImage`要从`js/mage/adminhtml/product.js`产品编辑页面中覆盖。

创建您的自定义 js: `js/myfolder/myproduct.js`:

```
Product.Gallery.addMethods({
    loadImage : function(file) {
        alert('hi there');
        var image = this.getImageByFile(file);
        this.getFileElement(file, 'cell-image img').src = image.url;
        this.getFileElement(file, 'cell-image img').show();
        this.getFileElement(file, 'cell-image .place-holder').hide();
    }
}); 
```

参考： http: [//prototypejs.org/learn/class-inheritance.html](http://prototypejs.org/learn/class-inheritance.html)

然后在您的布局 xml 中添加您的自定义 js：

```
<adminhtml_catalog_product_edit>
    <reference name="head">
        <action method="addJs"><script>myfolder/myproduct.js</script></action>
    </reference>
</adminhtml_catalog_product_edit> 
```

使用此方法，`function loadImage`仅当您包含您的`js/myfolder/myproduct.js`.

PS：确保`js/myfolder/myproduct.js`包含在之后`js/mage/adminhtml/product.js`（尽管默认情况下因为`js/mage/adminhtml/product.js`包含在`<default>`标签中）

# html - 我需要用颜色填充没有标题的区域的整个单元格

> ID：13379039
> 
> 赞同：1
> 
> 时间：2012-11-14T12:43:19.463
> 
> 标签：html, css, oracle-apex

我需要根据返回的数量用颜色填充基于特定计数 sql 的整个单元格。

**我试过的解决方案：**

pl/sql 根据计数给出一个 background_color 替换字符串。此字符串在列格式属性中传递，如下面的代码

```
<table>
  <td WIDTH=30 HEIGHT=30 onclick="window.open('http://page.com" bgcolor=#BG_COLOR# >#COUNT(*)#</td>
</table> 
```

page.com 是在同一窗口中显示 sql 的所有结果（不计数）的页面

**问题：**

整个单元格没有被颜色填满。可能是单元格可以调整大小或可以做一些事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:29:20.180

您可以通过使用报告来解决这个问题，但它需要一些 javascript/动态操作才能真正使单元格的背景发生变化。即使您生成一些 html 代码，您的单元格也不会被填充 100%，因为它也会被包装在报告的 html 结构中（即 TD 元素）。
您可以创建一个新的报告模板（共享组件 > 模板），但即便如此，您仍然必须在 sql.xml 中生成一些 html 代码。

如果您只有 1 条记录和 1 个单元格并且最终需要在其中生成一些 html，那么我实际上不会使用报告区域。使用 PLSQL 区域并在其中生成一些 HTML。例如：

```
DECLARE
   lCount NUMBER;
   lColour VARCHAR2(50);
BEGIN
   SELECT count(*)
     INTO lCount
     FROM emp;

   IF lCount < 10 THEN
      lColour := 'blue';
   ELSIF lCount > 10 THEN
      lColour := 'red';
   END IF;

   htp.p('div style="background-color: '||lColour||'; width: 30px; height: 30px;">'||lCount||'</div>');
END; 
```

您可能必须更改区域模板才能完全满足您的需求。您可以随时复制并更改它，以便它对您生成的 html 的影响最小。

# spring - 使用 queryDSL 通过属性名称获取动态属性谓词

> ID：13379043
> 
> 赞同：3
> 
> 时间：2012-11-14T12:43:33.840
> 
> 标签：spring, spring-data, spring-data-jpa, querydsl

我使用 Query DSL 生成的实体 EntitySerializer 以便使用 QueryDSL（与 SpringData 集成）查询 JPA 实体。

我从客户端属性名称接收，我想为可以添加 (AND) 到其他谓词的属性创建谓词。

我不知道如何从 EntitySerializer 中获取与我的属性名称匹配的谓词/路径。例如，假设我们有一个 Person 实体（具有自动生成的 QPerson 类），它具有我想要过滤的“名称”属性（最后我想创建一个通用方法）。这是通用方法：

```
Public Predicat getPredicatByPropertyName(String propertyName)  {
      QPerson p = QPerson.person;
      person.getPredicat(“propertyName”).like(“tom”);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T07:31:14.010

要创建 String 类型的属性，只需使用以下代码段

```
new StringPath(p, propertyName) 
```

然后可以像这样使用它来创建一个 Predicate 实例

```
new StringPath(p, propertyName).like("tom") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-17T16:44:19.487

我做的略有不同，因为正如蒂莫所说的那样工作并不简单，这里是：

```
query.from(play);
query.where( Expressions.stringPath(play, "name").eq("New play") ); 
```

我知道它也可以通过单独执行来实现：

```
StringPath column = Expressions.stringPath(play, "name");

query.from(play);
query.where( column.eq("New play") ); 
```

# javascript - 如何使用 url 更新谷歌地理位置？

> ID：13379044
> 
> 赞同：2
> 
> 时间：2012-11-14T12:43:37.863
> 
> 标签：javascript, jquery, html, geolocation

我对使用地理位置非常陌生，我的客户提供了一个 url 并要求我显示 url 包含的所有负载。网址是：

```
http://maps.google.co.uk/maps?q=119+5th+Avenue,+New+York,+NY+10003,+USA&hl=en&ll=40.713956,-73.828125&spn=146.915575,14.414062&sll=50.064192,-21.445312&sspn=141.347566,14.414063&oq=119+Fifth+Avenue+New+York+NY+10003+USA+&hnear=119+5th+Ave,+New+York,+10003,+United+States&t=m&z=2 
```

我在网络上得到了一个示例工作，并实施了，这很好。现在我需要更新我下载的函数以适用于上述 url，并且需要显示 url(above) 包含的所有位置，我不知道要更新到函数

任何人帮助我显示更新我的功能以显示我上面`http`包含的所有位置？

我下载的功能：

```
<script type="text/javascript">
var locations = [
  ['Bondi Beach', 40.713956, -73.828125, 4],
  ['Coogee Beach', 146.915575, 14.414062, 5],
  ['Cronulla Beach', 50.064192, -21.445312, 3],
  ['Manly Beach', 141.347566, 14.414063, 2]
];
var map = new google.maps.Map(document.getElementById('map'), {
  zoom: 11,
  center: new google.maps.LatLng(),
  mapTypeId: google.maps.MapTypeId.ROADMAP
});
var infowindow = new google.maps.InfoWindow();
var marker, i;
for (i = 0; i < locations.length; i++) {  
  marker = new google.maps.Marker({
    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
    map: map
  });
  google.maps.event.addListener(marker, 'click', (function(marker, i) {
    return function() {
      infowindow.setContent(locations[i][0]);
      infowindow.open(map, marker);
    }
  })(marker, i));
}
</script> 
```

提前致谢。如果有人放小提琴，那就没问题了。

# java - 更改“问题加载小部件”文本

> ID：13379046
> 
> 赞同：1
> 
> 时间：2012-11-14T12:43:58.710
> 
> 标签：java, android, android-layout, android-widget, android-xml

我想知道是否可以将“问题加载小部件”对话框更改为“小部件仅在纵向屏幕上工作”。那可能吗？

我知道这不是最好的程序，但我试图支持很多屏幕，widget_info.xml 对 minHeight 和 minWidth 参数完全不灵活，只在横向模式下出错。我的所有活动都旨在使用 Manifest 中的 android:screenOrientation 和 android:configChanges 参数纵向工作。

# php - 从 php 使用 crontab

> ID：13379047
> 
> 赞同：0
> 
> 时间：2012-11-14T12:44:00.847
> 
> 标签：php, cron, crontab

我在设置允许我从 PHP 脚本管理 cron 作业的服务器时遇到了麻烦。这个想法是：用户可以根据需要创建任意数量的任务，并可以为每个任务设置警报。将警报保存到 MySQL 数据库后，我想在用户指定的时间为该条目创建一个 cronjob。

逻辑非常简单，但我对 unix 用户/文件权限感到沮丧。问题是，用户“www-data”没有运行 crontab 的权限，因此我不能使用它通过 php 脚本中的 shell_exec 调用来管理 cronjobs。我已经阅读了很多关于类似问题的教程/线程，但没有任何运气。我能得到的最接近的是我应该确保 www-data 用户有权运行 crontab（我很肯定它没有）。但是，我将“www-data”用户放入“crontab”组，我在“/etc/cron.d”目录中创建了“cron.allow”文件，但仍然没有。

顺便说一句，我正在使用 $output = shell_exec("crontab -u www-data -l") 来查看它是否正常工作（如果 $output == null 则出现错误）。

我应该怎么做才能使它工作？或者我应该使用一些不同的方法（也许我可以有一些 www-data 可写的文件并在 crontab 配置中设置它应该在那里检查 cronjobs，但我也不知道该怎么做）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:51:25.030

我的应用程序运行的系统似乎非常奇怪地处理 cron.allow/cron.deny 文件（至少就我对这些文件的理解而言）。我删除`/etc/cron.allow`了文件，突然 www-data 用户可以在 php 脚本中使用 crontab 命令。我不知道为什么它不能在 cron.allow 文件中声明 www-data 用户，但现在看起来它可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:48:24.297

编辑：您可以将修改后的文件放入`/etc/cron.d`其中，该文件也可用于 cron comamnds。

免责声明：我没有这样做（尽管如果我能记得上次我是如何做到的，我会被诅咒的）

# javascript - Javascript：这是构造函数已知的实例名称吗？

> ID：13379051
> 
> 赞同：0
> 
> 时间：2012-11-14T12:44:24.650
> 
> 标签：javascript, constructor, instance

我有一个

```
var code = new CodeObject(); 
```

有没有办法在 CodeObject 函数中获取实例的名称（示例中的“代码”）？

就像是：

```
function CodeObject() {
    this.id = this.instanceName;
} 
```

提前致谢

我知道总的来说事情真的是不可预测的，但我是一个非常特殊的情况，构造函数总是以上面显示的方式调用。

而且我需要它，因为我想使用实例的名称而不必将其传递给构造函数以避免重复字符（包含调用的 JSP 文件已经太大了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:19:31.433

```
function hello() {
  var name = /function ([^\(]+)/.exec(this.constructor)[0];
  alert(name);
} 
```

# html - 如何在页面上进行水平滚动

> ID：13379053
> 
> 赞同：8
> 
> 时间：2012-11-14T12:44:30.800
> 
> 标签：html, css, scroll, horizontal-scrolling

我有 div 在其中放置内部 div 我需要使所有内部 div 成行并且应该显示水平滚动条（我知道这听起来很疯狂，但我需要那个）。我尝试了容器宽度自动和溢出滚动，但没有。

如何做到这一点？

我的标记：

```
 <!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8">
  <title>text-overflow</title>
  <style>
  body{
    width: auto;
  }
  #items{
  overflow-x: scroll;
  width: auto;
  }
  .item{
     display: inline-block;
     width: 400px;
     height: 100px;
     border:1px solid;
  }
  </style>
 </head>
 <body>

        <div id="items">
           <div class="item">
             Item content
           </div>
           <div class="item">
             Item content
           </div>
           <div class="item">
             Item content
           </div>
           <div class="item">
             Item content
           </div>
           <div class="item">
             Item content
           </div>
           <div class="item">
             Item content
           </div>
        </div>

 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-14T12:47:58.013

使用`white-space: nowrap;`在`#items`

```
#items{
    overflow-x: scroll;
    width: auto;
    white-space: nowrap;
} 
```

[**演示**](http://jsfiddle.net/Bhjvg/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T12:51:26.963

只需将#items 设置为 height 和 overflow-x:auto。

```
#items{
      overflow-x: auto;
      width: auto;
       height: 200px;
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-23T22:37:17.167

```
<div style="overflow-x:scroll;">
  <div style="width:1600px;">
    <div style="width:1500px;">
      <table>
        <tr>
          <td>  Your Value  </td>
        </tr>
      </table>
    </div>
  </div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-02T04:13:59.893

**我想你想要这样的东西......**

```
:root {
  --gutter: 20px;
}

.app {
  padding: var(--gutter) 0;
  display: grid;
  grid-gap: var(--gutter) 0;
  grid-template-columns: var(--gutter) 1fr var(--gutter);
  align-content: start;
}

.app > * {
  grid-column: 2 / -2;
}

.app > .full {
  grid-column: 1 / -1;
}

.hs {
  display: grid;
  grid-gap: calc(var(--gutter) / 2);
  grid-template-columns: repeat(6, calc(50% - var(--gutter) * 2));
  grid-template-rows: minmax(150px, 1fr);

  overflow-x: scroll;
  scroll-snap-type: x proximity;
  padding-bottom: calc(.75 * var(--gutter));
  margin-bottom: calc(-.25 * var(--gutter));
}

/* Demo styles */

html,
body {
  height: 100%;
}

body {
  display: grid;
  place-items: center;
  background: #456173;
}

ul {
  list-style: none;
  padding: 0;
}

h1,
h2,
h3 {
  margin: 0;
}

.app {
  width: 375px;
  height: 667px;
  background: #DBD0BC;
  overflow-y: scroll;
}

.hs > li,
.item {
  scroll-snap-align: center;
  padding: calc(var(--gutter) / 2 * 1.5);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background: #fff;
  border-radius: 8px;
}
```

```
<div class="app">
  <h1>Some headline</h1>

  <ul class="hs">
    <li class="item">test</li>
    <li class="item">test</li>
    <li class="item">test</li>
    <li class="item">test</li>
    <li class="item">test</li>
    <li class="item">test</li>
  </ul>

  <div class="container">
    <div class="item">
      <h3>Block for context</h3>
    </div>
  </div>
</div>
```

# sql - 避免在 UPDATE 语句中多次调用标量函数

> ID：13379057
> 
> 赞同：6
> 
> 时间：2012-11-14T12:44:40.293
> 
> 标签：sql, sql-server, tsql

有没有办法修改下面的`UPDATE`语句，使标量函数只被调用一次，而不是两次？

```
UPDATE a
    SET SomeField = b.SomeField
    FROM TableA AS a
    JOIN TableB b ON b.Link = a.Link
    WHERE b.CostMin <= @Cost * dbo.OneScalarFunction(@CurrencyFrom, b.Currency)
        AND b.CostMax >= @Cost * dbo.OneScalarFunction(@CurrencyFrom, b.Currency) 
```

**PS**使用`BETWEEN`运算符无济于事 - SQL Server 无论如何都会调用标量函数两次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T12:48:29.430

试试**BETWEEN**运算符。

```
WHERE functionCall(..) BETWEEN minValue AND maxValue 
```

[http://www.w3schools.com/sql/sql_between.asp](http://www.w3schools.com/sql/sql_between.asp)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T13:02:07.623

这通常显着提高性能，但需要您将标量函数更改为内联表值函数。

```
UPDATE
  a
SET
  SomeField = b.SomeField
FROM
  TableA AS a
CROSS APPLY
  dbo.oneInlineTableValuedFunction(@CurrencyFrom, e.Currency) AS ITVF
INNER JOIN
  TableB b
    ON b.Link = a.Link
WHERE
      b.CostMin <= @Cost * ITVF.exchangeRate
  AND b.CostMax >= @Cost * ITVF.exchangeRate 
```

尽管表值函数返回表，但您***可以***选择只返回一行和一个字段。然后您将它有效地用作标量函数 - 但是，您将获得 SQL Server 如何优化上述查询的所有好处......
- 如果 TVF 是内联的*（而不是多语句）*
- TVF 被扩展了进入查询
- 结果是性能明显优于标量函数

内联表值函数示例：

```
CREATE FUNCTION dbo.oneInlineTableValuedFunction (
                      @currencyFrom   VARCHAR(32),
                      @currencyTo     VARCHAR(32)
)
RETURNS TABLE
AS
RETURN (
  SELECT
    exchangeRate
  FROM
    dbo.someTable
  WHERE
        currencyFrom = @currencyFrom
    AND currencyTo   = @currencyTo
) 
```

*故意微不足道*

关于此的一个示例帖子： [标量函数内联和性能](http://dataeducation.com/scalar-functions-inlining-and-performance-an-entertaining-title-for-a-boring-post/)

如果你在网上搜索，`INLINE CROSS APPLY SCALAR FUNCTION PERFORMANCE`我相信你会得到更多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T12:49:35.010

您可以尝试使用 BETWEEN （如下所示），尽管您需要对其进行测试，因为我有一个偷偷摸摸的怀疑数据库可能会将其拆分为 >= 和 <= 无论如何执行它..

```
UPDATE a
    SET SomeField = b.SomeField
    FROM TableA AS a
    JOIN TableB b ON b.Link = a.Link
    WHERE  @Cost * dbo.OneScalarFunction(@CurrencyFrom, e.Currency) BETWEEN b.CostMin AND b.CostMax 
```

# c# - 如何将 WPF TreeView 的所有元素作为列表获取？

> ID：13379058
> 
> 赞同：2
> 
> 时间：2012-11-14T12:44:40.330
> 
> 标签：c#, .net, wpf, treeview

我需要以普通列表的形式访问 TreeView 的节点（就像所有展开的节点一样）才能按 Shift 键进行多选。有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T15:45:08.823

Here is a method that will retrieve all the TreeViewItems in a TreeView. Please be aware that this is an extremely expensive method to run, as it will have to expand all TreeViewItems nodes and perform an updateLayout each time. As the TreeViewItems are only created when expanding the parent node, there is no other way to do that.

If you only need the list of the nodes that are already opened, you can remove the code that expand them, it will then be much cheaper.

Maybe you should try to find another way to manage multiselection. Having said that, here is the method :

```
 public static List<TreeViewItem> FindTreeViewItems(this Visual @this)
    {
        if (@this == null)
            return null;

        var result = new List<TreeViewItem>();

        var frameworkElement = @this as FrameworkElement;
        if (frameworkElement != null)
        {
            frameworkElement.ApplyTemplate();
        }

        Visual child = null;
        for (int i = 0, count = VisualTreeHelper.GetChildrenCount(@this); i < count; i++)
        {
            child = VisualTreeHelper.GetChild(@this, i) as Visual;

            var treeViewItem = child as TreeViewItem;
            if (treeViewItem != null)
            {
                result.Add(treeViewItem);
                if (!treeViewItem.IsExpanded)
                {
                    treeViewItem.IsExpanded = true;
                    treeViewItem.UpdateLayout();
                }
            }
            foreach (var childTreeViewItem in FindTreeViewItems(child))
            {
                result.Add(childTreeViewItem);
            }
        }
        return result;
    } 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-14T13:40:33.473

这是你问的；

```
private static TreeViewItem[] getTreeViewItems(TreeView treeView)
{
    List<TreeViewItem> returnItems = new List<TreeViewItem>();
    for (int x = 0; x < treeView.Items.Count; x++)
    {
        returnItems.AddRange(getTreeViewItems((TreeViewItem)treeView.Items[x]));
    }
    return returnItems.ToArray();
}
private static TreeViewItem[] getTreeViewItems(TreeViewItem currentTreeViewItem)
{
    List<TreeViewItem> returnItems = new List<TreeViewItem>();
    returnItems.Add(currentTreeViewItem);
    for (int x = 0; x < currentTreeViewItem.Items.Count; x++)
    {
        returnItems.AddRange(getTreeViewItems((TreeViewItem)currentTreeViewItem.Items[x]));
    }
    return returnItems.ToArray();
} 
```

使用您的控件作为第一个参数调用，例如；

```
getTreeViewItems(treeView1); 
```

# c - 创建 MessageBox 时如何解决强制转换警告

> ID：13379059
> 
> 赞同：3
> 
> 时间：2012-11-14T12:44:43.383
> 
> 标签：c, winapi, gcc, mingw

(1) **[已解决！]**

```
wcex.hIcon = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_APPLICATION)); 
```

警告：从指针转换为不同大小的整数 [-Wpointer-to-int-cast]

**解决方案**

我通过使用解决了

```
wcex.hIcon = LoadIcon(NULL, IDI_APPLICATION); 
```

因为我看过`IDI_APPLICATION`定义，它被定义为

```
#define IDI_APPLICATION MAKEINTRESOURCE(32512) 
```

诡异的？*联合国PEU。*

(2) **[已解决！]**

```
MessageBox(NULL,
        _T("Call to RegisterClassEx failed!"),
        _T("Win32 Guided Tour"),
        NULL); // < here 
```

警告：传递 'MessageBoxW' 的参数 4 从没有强制转换的指针生成整数 [默认启用]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:52:20.260

1) 从[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648072(v=vs.85).aspx)

`To use one of the predefined icons, set the hInstance parameter to NULL and the lpIconName parameter to one of the following values.`

所以要`MAKEINTRESOURCE(IDI_APPLICATION)`用作第二个参数，可选的第一个应该是`NULL`.

如果不是那样......那么这就是你设置回报的方式，`wcex.hIcon`需要是一个指针，而不是一个`int`. `LoadIcon`返回一个`HICON`类型，它是 a 的 typedef，`HANDLE`它是 a 的 typedef，`VOIDP`它是 a 的 typedef`void *`

所以如果你这样做：

```
int wcex.hIcon = LoadIcon(...) 
```

你会收到`cast from pointer to integer`警告。

2) 从[这里开始](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505(v=vs.85).aspx)，前三个参数`MessageBox()`是可选的，第四个不是。当它期望一个`UINT`

# haskell - 在什么情况下一元计算是尾递归的？

> ID：13379060
> 
> 赞同：28
> 
> 时间：2012-11-14T12:44:44.917
> 
> 标签：haskell, monads, tail-recursion

在 Haskell Wiki 的[Recursion in a monad](http://www.haskell.org/haskellwiki/Recursion_in_a_monad)中，有一个声称是[尾递归](http://www.haskell.org/haskellwiki/Tail_recursion)的例子：

```
f 0 acc = return (reverse acc)
f n acc = do
    v  <- getLine
    f (n-1) (v : acc) 
```

虽然命令式表示法让我们相信它是尾递归的，但它一点也不明显（至少对我而言）。如果我们脱糖`do`，我们会得到

```
f 0 acc = return (reverse acc)
f n acc = getLine >>= \v -> f (n-1) (v : acc) 
```

并重写第二行导致

```
f n acc = (>>=) getLine (\v -> f (n-1) (v : acc)) 
```

所以我们看到它`f`发生在 的第二个参数中`>>=`，而不是在尾递归位置。我们需要检查`IO`'`>>=`以获得答案。显然**，将递归调用作为`do`块中的最后一行并不是尾递归函数的充分条件。**

* * *

假设一个*monad 是尾递归的*，当且仅当此 monad 中的每个递归函数定义为

```
f = do
    ...
    f ... 
```

或等效地

```
f ...  =  (...) >>= \x -> f ... 
```

是尾递归的。我的问题是：

1.  哪些单子是尾递归的？
2.  是否有一些通用规则可以用来立即区分尾递归单子？

* * *

**更新：**让我举一个具体的反例：`[]`根据上述定义，monad 不是尾递归的。如果是，那么

```
f 0 acc = acc
f n acc = do
    r <- acc
    f (n - 1) (map (r +) acc) 
```

必须是尾递归的。然而，对第二条线进行脱糖会导致

```
f n acc = acc >>= \r -> f (n - 1) (map (r +) acc)
        = (flip concatMap) acc (\r -> f (n - 1) (map (r +) acc)) 
```

显然，这不是尾递归，恕我直言。原因是递归调用不是计算的结束。它执行多次，并将结果组合起来以形成最终结果。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-14T17:46:10.583

引用自身的一元计算永远不会是尾递归的。然而，在 Haskell 中你有懒惰和 corecursion，这才是最重要的。让我们使用这个简单的例子：

```
forever :: (Monad m) => m a -> m b
forever c' = let c = c' >> c in c 
```

这样的计算在恒定空间中运行当且仅当`(>>)`它的第二个参数是非严格的。这与列表非常相似，并且`repeat`：

```
repeat :: a -> [a]
repeat x = let xs = x : xs in xs 
```

由于`(:)`构造函数的第二个参数是非严格的，因此它可以工作并且可以遍历列表，因为您有一个有限的弱头范式（WHNF）。只要消费者（例如列表折叠）只要求WHNF，它就可以工作并在恒定空间中运行。

在这种情况下，消费者`forever`是解释一元计算的任何东西。如果 monad 是`[]`，那么`(>>)`当它的第一个参数是空列表时，它的第二个参数是非严格的。所以`forever []`会导致`[]`，而`forever [1]`会发散。在`IO`monad 的情况下，解释器本身就是运行时系统，在那里你可以认为`(>>)`它的第二个参数总是非严格的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T14:11:19.033

真正重要的是恒定的堆栈空间。由于懒惰，您的第一个示例是[尾递归模 cons 。](http://en.wikipedia.org/wiki/Tail_call#Tail_recursion_modulo_cons)

将`(getLine >>=)`被执行并消失，我们再次调用`f`. 重要的是，这发生在一定数量的步骤中 - 没有 thunk 积聚。

你的第二个例子，

```
f 0 acc = acc
f n acc = concat [ f (n - 1) $ map (r +) acc | r <- acc] 
```

`n`在其 thunk 构建中将仅是线性的 (in )，因为从左侧访问结果列表（再次由于惰性，因为`concat`它是非严格的）。如果它在头部被消耗，它可以在 O(1) 空间中运行（不计算线性空间 thunk，`f(0), f(1), ..., f(n-1)`在左边缘）。

更糟糕的是

```
f n acc = concat [ f (n-1) $ map (r +) $ f (n-1) acc | r <- acc] 
```

或用`do`- 表示法，

```
f n acc = do
  r <- acc
  f (n-1) $ map (r+) $ f (n-1) acc 
```

因为信息依赖有额外的强迫。同样，如果给定 monad 的绑定是严格操作。

# c# - 使用带有 c# .net 的 xelement 获取空元素

> ID：13379061
> 
> 赞同：0
> 
> 时间：2012-11-14T12:44:46.773
> 
> 标签：c#, .net, xml, linq-to-xml, xelement

让我们考虑以下 xml 文档：

```
<contact>
    <name>Hines</name>
    <phone>206-555-0144</phone>
    <mobile>425-555-0145</mobile>
</contact> 
```

我从中检索一个值

```
var value = parent.Element("name").Value; 
```

`NullReferenceException`如果“名称”不存在，上面的代码将抛出一个错误，因为 Element 在 C# 中将返回 null 而在 vb.net 中则不会，这将抛出空值。

所以我的问题是确定根节点下方的 xml 节点何时丢失并取而代之的是一个空值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T12:52:03.293

您可以创建一个可以轻松重用的扩展方法。将其放在静态类中

```
public static string ElementValue(this XElement parent, string elementName)
{
    var xel = parent.Element(elementName);
    return xel == null ? "" : xel.Value;
} 
```

现在你可以这样称呼它

```
string result = parent.ElementValue("name"); 
```

* * *

**更新**

如果`null`在元素不存在时返回而不是空字符串，则可以区分空元素和不存在元素。

```
public static string ElementValue(this XElement parent, string elementName)
{
    var xel = parent.Element(elementName);
    return xel == null ? null : xel.Value;
} 
```

```
string result = parent.ElementValue("name");
if (result == null) {
    Console.WriteLine("Element 'name' is missing!");
} else {
    Console.WriteLine("Name = {0}", result);
} 
```

* * *

**编辑**

Microsoft 在 .NET Framework 类库的不同位置使用以下模式

```
public static bool TryGetValue(this XElement parent, string elementName,
                                                     out string value)
{
    var xel = parent.Element(elementName);
    if (xel == null) {
        value = null;
        return false;
    }
    value = xel.Value;
    return true;
} 
```

可以这样称呼

```
string result;
if (parent.TryGetValue("name", out result)) {
    Console.WriteLine("Name = {0}", result);
} 
```

* * *

**更新**

在 C# 6.0 (Visual Studio 2015) 中，Microsoft 引入了 null 传播运算符，`?.`大大简化了事情：

```
var value = parent.Element("name")?.Value; 
```

即使未找到该元素，这也会简单地将值设置为 null。

`??`如果你想返回另一个值，你也可以将它与 coalesce 运算符结合使用`null`：

```
var value = parent.Element("name")?.Value ?? ""; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T12:52:58.860

只需将您的元素转换为一些可为空的类型。XElement 有[一堆重载的显式转换运算符](http://msdn.microsoft.com/en-us/library/ff986933.aspx)，它们会将元素值转换为所需的类型：

```
string value = (string)parent.Element("name"); 
```

在这种情况下，如果找不到元素`<name>`，您将获得值等于 的字符串`null`。**不会引发 NullReferenceException**。

我认为如果元素在 xml 中不存在，那么`null`是该元素唯一合适的值。但是，如果您确实需要使用空字符串，那么：

```
string value = (string)parent.Element("name") ?? ""; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:46:09.263

```
var value = parent.Element("name") != null ? parent.Element("name").Value : "" 
```

# xml - 将 Xml 保存到 SQL 保留重音符号中

> ID：13379063
> 
> 赞同：2
> 
> 时间：2012-11-14T12:44:52.330
> 
> 标签：xml, sql-server-2008, non-ascii-characters

我正在使用 log4Net 和 SQL Server 2008 来存储来自外部服务的 XML 响应。
在响应中有西班牙字符，例如 É，但是当它存储在具有列类型 xml 的表中时，我得到 Ã‰</p>

在配置中，我已经像这样映射了参数：

```
<parameter>
    <parameterName value="@message"/>
    <dbType value="String"/>
    <size value="-1"/>
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%message"/>
    </layout>
  </parameter> 
```

如何存储和保存口音？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:31:59.357

log4net 或 SQL 没有问题。问题是提琴手网络服务响应是正确的。但是使用 Web 服务的进程使用的是这样的代码：

```
var webclient = new WebClient ();
var response = webClient.UploadString (url, method, data); 
```

添加：

```
webClient.Encoding = System.Text.Encoding.UTF8, 
```

在制作上传字符串之前使其正常工作

# android - 如何计算在 mediaplayer android 中下载的字节数

> ID：13379068
> 
> 赞同：2
> 
> 时间：2012-11-14T12:45:07.070
> 
> 标签：android, android-mediaplayer

我正在使用`MediaPlayer`.

我在回调中设置了数据源、调用`preparyAsync()`、调用。`start()``onPrepared()`

现在我想知道流媒体播放歌曲时媒体播放器下载的字节数。

有没有办法跟踪字节数？

它不会是一首歌，而是一个 mp3 流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:30:46.233

我知道您想知道下载的压缩数据的字节数，而不是 MediaPlayer 中未压缩数据的字节数，后者与播放的音频长度成正比。（例如，在使用 VBR 的情况下，压缩数据可能不成比例）。

要获得下载的压缩数据的字节数，您需要计算 MediaPlayer 下载的流的字节数，但我相信访问下载的流的唯一方法是实现一个为 MediaPlayer 提供数据的本地流代理，或者第二种解决方案就是将流保存到本地文件，然后用MediaPlayer打开这个文件，但是后面的解决方案有一些限制，因为MediaPlayer会锁定本地文件，无法追加数据。

对于第一个解决方案，请参阅this solution on how to implement a proxy to feed MediaPlayer: [MediaPlayer stutters at start of mp3 player](https://stackoverflow.com/questions/5343730/mediaplayer-stutters-at-start-of-mp3-playback/5432091#5432091)

# caching - 当值为空时如何避免缓存？

> ID：13379071
> 
> 赞同：60
> 
> 时间：2012-11-14T12:45:12.167
> 
> 标签：caching, guava

我正在使用 Guava 来缓存热数据。当缓存中不存在数据时，我必须从数据库中获取它：

```
public final static LoadingCache<ObjectId, User> UID2UCache = CacheBuilder.newBuilder()
        //.maximumSize(2000)
        .weakKeys()
        .weakValues()
        .expireAfterAccess(10, TimeUnit.MINUTES)
        .build(
        new CacheLoader<ObjectId, User>() {
            @Override
            public User load(ObjectId k) throws Exception {
                User u = DataLoader.datastore.find(User.class).field("_id").equal(k).get();
                return u;
            }
        }); 
```

我的问题是当数据库中不存在数据时，我希望它返回`null`并且不进行任何缓存。但是 Guava 将`null`密钥保存在缓存中，并在我得到它时抛出异常：

> com.google.common.cache.CacheLoader$InvalidCacheLoadException：CacheLoader 为密钥 shisoft 返回了 null。

我们如何避免缓存`null`值？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-11-14T13:42:44.257

如果找不到用户，只需抛出一些异常，并在使用[`get(key)`](https://google.github.io/guava/releases/21.0/api/docs/com/google/common/cache/LoadingCache.html#get%28K%29)方法时在客户端代码中捕获它。

```
new CacheLoader<ObjectId, User>() {
    @Override
    public User load(ObjectId k) throws Exception {
        User u = DataLoader.datastore.find(User.class).field("_id").equal(k).get();
        if (u != null) {
             return u;
        } else {
             throw new UserNotFoundException();
        }
    }
} 
```

来自[`CacheLoader.load(K)`](https://google.github.io/guava/releases/21.0/api/docs/com/google/common/cache/CacheLoader.html#load%28K%29)Javadoc：

> ```
> Returns:  
>   the value associated with key; must not be null  
> Throws:  
>   Exception - if unable to load the result 
> ```

回答您对缓存空值的疑问：

> 返回与此缓存中的键关联的值，如有必要，首先加载该值。**在加载完成之前，不会修改与此缓存关联的可观察状态**。

*（来自[`LoadingCache.get(K)`](https://google.github.io/guava/releases/21.0/api/docs/com/google/common/cache/LoadingCache.html#get%28K%29)Javadoc）*

如果抛出异常，则加载不会被视为完成，因此不会缓存新值。

**编辑**：

请注意，在[Caffeine](https://github.com/ben-manes/caffeine)中，它是 Guava 缓存 2.0 的一种，并且“使用受 Google Guava 启发的 API 提供内存缓存”，您[*可以*`null`从`load`方法返回](https://static.javadoc.io/com.github.ben-manes.caffeine/caffeine/2.6.2/com/github/benmanes/caffeine/cache/CacheLoader.html#load-K-)：

> ```
>  Returns:
>    the value associated with key or null if not found 
> ```

如果您可以考虑迁移，您的数据加载器可以在找不到用户时自由返回。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-11-14T13:23:14.697

简单的解决方案：使用`com.google.common.base.Optional<User>`而不是`User`作为值。

```
public final static LoadingCache<ObjectId, Optional<User>> UID2UCache = CacheBuilder.newBuilder()
        ...
        .build(
        new CacheLoader<ObjectId, Optional<User>>() {
            @Override
            public Optional<User> load(ObjectId k) throws Exception {
                return Optional.fromNullable(DataLoader.datastore.find(User.class).field("_id").equal(k).get());
            }
        }); 
```

编辑：我认为@Xaerxess 的回答更好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-04T06:58:25.297

面临同样的问题，因为源中的缺失值是正常工作流程的一部分。没有找到比自己使用`getIfPresent`,`get`和`put`方法编写一些代码更好的方法了。请参阅下面的方法，其中`local`是`Cache<Object, Object>`：

```
private <K, V> V getFromLocalCache(K key, Supplier<V> fallback) {
    @SuppressWarnings("unchecked")
    V s = (V) local.getIfPresent(key);
    if (s != null) {
        return s;
    } else {
        V value = fallback.get();
        if (value != null) {
            local.put(key, value);
        }
        return value;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-08T10:22:03.167

当您想缓存一些 NULL 值时，您可以使用其他表现为 NULL 的人员。

在给出解决方案之前，我建议您不要将 LoadingCache 暴露在外部。相反，您应该使用方法来限制缓存的范围。

例如，您可以`LoadingCache<ObjectId, List<User>>`用作返回类型。然后，当您无法从数据库中检索值时，您可以返回空列表。您可以使用 -1 作为 Integer 或 Long **NULL**值，您可以使用 "" 作为 String **NULL**值，依此类推。在此之后，您应该提供一种方法来处理 NULL 值。

```
when(value equals NULL(-1|"")){
   return null;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-15T10:57:24.873

我使用 getIfPresent

```
@Test
    public void cache() throws Exception {
        System.out.println("3-------" + totalCache.get("k2"));
        System.out.println("4-------" + totalCache.getIfPresent("k3"));
    }

    private LoadingCache<String, Date> totalCache = CacheBuilder
            .newBuilder()
            .maximumSize(500)
            .refreshAfterWrite(6, TimeUnit.HOURS)
            .build(new CacheLoader<String, Date>() {
                @Override
                @ParametersAreNonnullByDefault
                public Date load(String key) {
                    Map<String, Date> map = ImmutableMap.of("k1", new Date(), "k2", new Date());
                    return map.get(key);
                }
            }); 
```

# active-directory - 可以使用 LDAP 从 AD 检索键值结果列表吗？

> ID：13379072
> 
> 赞同：0
> 
> 时间：2012-11-14T12:45:13.293
> 
> 标签：active-directory, ldap

我需要从 AD 中检索某个属性值以获取人员列表。这可以在一个请求中完成，还是我需要发出与要检索此属性的人一样多的请求？

搜索范围是整个子树

我也应该能够识别对应的人的属性值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:54:11.350

使用适当的基础对象、范围、所需的属性值列表以及将匹配列表中所有条目的过滤器将搜索请求传输到目录服务器。目录服务器将返回搜索结果 - 每个返回的条目一个，如果有的话 - 一个描述搜索请求结果的整数，以及一个包含返回条目数的整数，如果有的话。每个搜索结果将包含条目的可分辨名称和所请求的属性，假设连接授权状态的访问控制允许返回属性值。

### 也可以看看

*   [LDAP：掌握搜索过滤器](http://ff1959.wordpress.com/2011/09/21/mastering-ldap-search-filters/)
*   [LDAP：搜索最佳实践](http://www.ldapguru.info/ldap/ldap-search-best-practices.html)
*   [LDAP：编程实践](http://ff1959.wordpress.com/2011/10/27/ldap-programming-best-practices/)

# django - 查看用户是否刚刚登录？

> ID：13379074
> 
> 赞同：1
> 
> 时间：2012-11-14T12:45:22.203
> 
> 标签：django, django-authentication

我想在用户登录后立即显示一条消息。有没有办法做到这一点，不涉及`django.contrib.auth`从源中包含并在`add_message`那里添加一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:49:34.870

检查这个[问题](https://stackoverflow.com/questions/1990502/django-signal-when-user-logs-in)的第二个答案。您可以将登录处理程序绑定到`user_logged_in`信号。

# macos - 未显示在模型表中添加的 NSButton 的手形光标

> ID：13379075
> 
> 赞同：4
> 
> 时间：2012-11-14T12:45:26.133
> 
> 标签：macos, cocoa, cursor, mouseover, nsbutton

我将 NSButton 子类化并创建了自己的类，在其中添加了代码以在鼠标指针移到按钮上时显示手形光标。它适用于在普通视图中添加的按钮。但是当我对模型表中的按钮使用相同的类时，光标没有出现。可能是什么原因？任何想法！

这是我在 NSButton 子类中添加的代码

```
- (void)resetCursorRects {
/*
 * change cursor type to a poiting finger when it gets into HyperLink frame.
 */
[super resetCursorRects];
[self addCursorRect:[self bounds] cursor:[NSCursor pointingHandCursor]]; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-31T17:59:02.903

在 Interface Builder 中，确保您的工作表的 Window/Panel 已`Title Bar`检查。

由于它是一张工作表，因此标题栏实际上是不可见的，但由于某种原因，当此属性关闭时，光标跟踪似乎被禁用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T10:41:58.370

Instand 的 Subclassing 创建一个`Category`NSButton。并覆盖该
`resetCursorRects`方法（与上述相同）。

`#import`将新类别添加到您的控制器并尝试。

如果你不熟悉`Category`试试[这个](http://mobile.tutsplus.com/tutorials/iphone/objective-c-categories/)。

# oop - 枚举属性太多？

> ID：13379076
> 
> 赞同：1
> 
> 时间：2012-11-14T12:45:26.210
> 
> 标签：oop, enums

我的系统目前在不同的环境中运行。

我的系统上有一个环境枚举，像这样

```
public enum Environment {

    [UsePayPal(false)]
    [ServerInstallDir("InstallPathOnServer")]
    [IntegrationSystemURI("localhost/someFakeURI")]
    [UpdateSomeInfo(true)]
    [QueuePrefix("DEV")]
    [UseCache(false)]
    [AnotherSystemURI("localhost/anotherFakeURI")]
    Development = 0,

    [UsePayPal(false)]
    [ServerInstallDir("InstallPathOnBUILDServer")]
    [IntegrationSystemURI("build-server/someFakeURI")]
    [UpdateSomeInfo(true)]
    [QueuePrefix("QA")]
    [UseCache(false)]
    [AnotherSystemURI("build-server/anotherFakeURI")]
    QA = 1,

    [UsePayPal(true)]
    [ServerInstallDir("InstallPathOnServer")]
    [IntegrationSystemURI("someservice.com/URI")]
    [UpdateSomeInfo(true)]
    [QueuePrefix("PRD")]
    [UseCache(true)]
    [AnotherSystemURI("anotherservice/URI")]
    Production = 2,
} 
```

我正在这样工作，因为我不喜欢这样的代码

```
if(CURRENT_ENVIRONMENT == Environment.QA || CURRENT_ENVIRONMENT == Environment.DEV)
    EnableCache() 
```

或者

```
if(CURRENT_ENVIRONMENT == Environment.QA || CURRENT_ENVIRONMENT == Environment.DEV){
    DoSomeStuff();
} 
```

因为我认为这将我的逻辑分散在整个系统中，而不是在一个点上。

如果有一天我添加了另一个测试环境，我不需要检查我的代码来查看我是否像在开发、QA 或生产环境中工作一样。

好的，但是，通过所有这些配置，我最终可能会在我的 Enum 上获得过多的属性，比如说，在 3 年内每个枚举值将有 15~20 个属性，这看起来很奇怪。

你们有什么感想？你通常如何处理这种情况？它的属性真的太多了，还是这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T12:49:29.723

创建一个`Environment`具有`private`构造函数和描述环境所需的尽可能多的属性的类，并将`static readonly`实例公开为公共属性。您还可以拥有`Environment.Current`指向这些实例之一的属性。

示例代码：

```
sealed class Environment
{
    // The current environment is going to be one of these -- 1:1 mapping to enum values
    // You might also make these properties if there's fine print pointing towards that
    public static readonly Environment TestEnvironment;
    public static readonly Environment ProductionEnvironment;

    // Access the environment through this
    public static Environment Current { get; set; }

    static Environment()
    {
        TestEnvironment = new Environment {
            UsePayPal = false,
            ServerInstallDir = "/test"
        };
        ProductionEnvironment = new Environment { 
            UsePayPal = true, 
            ServerInstallDir = "/prod"
        };
    }

    // Environment propeties here:
    public bool UsePayPal { get; private set; }
    public string ServerInstallDir { get; private set; }

    // We don't want anyone to create "unauthorized" instances of Environment
    private Environment() {}
} 
```

像这样使用它：

```
Environment.Current = Environment.TestEnvironment;

// later on...
Console.WriteLine(Environment.Current.ServerInstallDir); 
```

# java - Java中运算符的优先级不适用

> ID：13379080
> 
> 赞同：1
> 
> 时间：2012-11-14T12:45:52.197
> 
> 标签：java, operators, operator-precedence

我有这段代码，根据这个页面[，](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html) 下面的输出应该正确地给我，98.24，但这给了我 68.8，我在这里缺少什么？

```
public class Qn1 
{
    public static void main(String[] args)
    {
       double cel = 36.8;
       double fah = ((9 / 5 )* cel) + 32;
       System.out.println(cel + "deg C =" + fah +" deg F");
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T12:47:37.573

在括号中使用`9.0 / 5`而不是。`9 / 5`

`9 / 5`是整数除法，其值为`1`。因此结果。您只需要将*分子*或*分母*之一设为*双精度/浮点*值即可强制*浮点除法*。

```
((9 / 5 ) * cel) + 32  = (1 * 36.8) + 32 = 68.8 
```

你需要的是： -

```
((9.0 / 5 ) * cel) + 32  = (1.8 * 36.8) + 32 = 66.24 + 32 = 98.24 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:47:51.770

```
double fah = ((9.0 / 5 )* cel) + 32; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T12:47:59.787

问题是你没有使用`double`但是`int`. 利用

```
double fah = ((9d / 5d) * cel) + 32d; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T12:49:31.490

至少使用一个`double`操作数：

```
double fah = 9.0 / 5 * cel + 32;

double fah = 9 / 5.0 * cel + 32;

double fah = 9.0 / 5.0 * cel + 32; 
```

这三种方式都是有效的，注意括号是不必要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T12:48:47.647

`9`是整数，所以是`5`：`9/5`使用整数除法也是如此，这意味着它的结果是 1（整数）而不是 1.8（浮点数）

```
1*36.8 +32 = 68.8 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T12:48:55.640

整数算术中的 9 / 5 是 1

# c# - 从 Xslt 中的嵌入代码中获取 Xml

> ID：13379085
> 
> 赞同：2
> 
> 时间：2012-11-14T12:46:14.977
> 
> 标签：c#, xml, xslt, xml-serialization

我想用 Xslt 文件转换我的 Xml。我可以访问使用 C# 在嵌入式代码段中使用 Xslt 进行转换的 Xml。

```
<![CDATA[
    public string GetSomething(string path)
    {
        // Get the whole Xml that is transforming
        // And do something with it    
        // return result
    }
]]>

<xsl:value-of select ="GetSomething(courier:_appointment)"/> 
```

可能吗？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:56:38.463

xslt 内部有一些脚本支持，但是 via *：*使用*扩展对象*[`<msxsl:script>`](http://msdn.microsoft.com/en-us/library/ms256042.aspx)可能是一个更好的主意。基本上，您编写一个常规的 C# 对象（尽管您需要将其标记为 COM 可调用的 IIRC），并通过添加它，特别是- 并在此过程中将其与特定的骨灰盒相关联。然后，您的 xslt 为 url (ie ) 声明一个 xml 命名空间别名，并在代码中使用。*`XsltArgumentList`[`AddExtensionObject`](http://msdn.microsoft.com/en-us/library/system.xml.xsl.xsltargumentlist.addextensionobject.aspx)`xmlns:myExtension="blah blah"``myExtension:someMethod(...)`*

 *[MSDN](http://msdn.microsoft.com/en-us/library/system.xml.xsl.xsltargumentlist.addextensionobject.aspx)上有一个完整的示例。*

# jquery - jquery setInterval ie9 不触发

> ID：13379087
> 
> 赞同：3
> 
> 时间：2012-11-14T12:46:25.040
> 
> 标签：jquery, internet-explorer, internet-explorer-9, setinterval

正如标题所说。适用于 chrome 和 firefox，只有 IE9 给了我这个问题。当我直接定位框架时它确实有效（example.com/#target）我不认为这是没有加载对象的问题

```
 setInterval("myFunc()",1);      

    function myFunc(){   
    if ($(shop).is(":target")) {
        $('#nav').removeClass('nav').addClass('navopen');
        $('#content').removeClass('content').addClass('contenthide');
        $('.bgopen').removeClass('bgopen');
        $('#shpbg').addClass('bgopen'); 
    } else if ($(about).is(":target")) {
        $('#nav').removeClass('nav').addClass('navopen');
        $('#content').removeClass('content').addClass('contenthide');
        $('.bgopen').removeClass('bgopen');
        $('#abtbg').addClass('bgopen'); 
    } else if ($(contact).is(":target")) {
        $('#nav').removeClass('nav').addClass('navopen');
        $('#content').removeClass('content').addClass('contenthide');
        $('.bgopen').removeClass('bgopen');
        $('#cntbg').addClass('bgopen'); 
    } else if ($(blog).is(":target")) {
        $('#nav').removeClass('nav').addClass('navopen');
        $('#content').removeClass('content').addClass('contenthide');
        $('.bgopen').removeClass('bgopen');
        $('#extbg').addClass('bgopen'); 
    } else if ($(collective).is(":target")) {
        $('#nav').removeClass('nav').addClass('navopen');
        $('#content').removeClass('content').addClass('contenthide');
        $('.bgopen').removeClass('bgopen');
        $('#colbg').addClass('bgopen'); 
    } else if ($(main).is(":target")) {
        $('#nav').removeClass('navopen').addClass('nav');
        $('#content').removeClass('contenthide').addClass('content');
        $('.bgopen').removeClass('bgopen'); 
        $('#bgmain').addClass('bgopen');
    } else if ($(pmt).is(":target")) {
        $('#nav').removeClass('nav').addClass('navopen');
        $('#content').removeClass('content').addClass('contenthide');
        $('.bgopen').removeClass('bgopen');
        $('#abtbg').addClass('bgopen'); 
    }

    else {

    }} 
```

我试过将它包装在窗口（加载），文档（准备好）中无济于事......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:52:38.800

你真的应该重构你的代码！

在您的情况下，设置延迟为 1 毫秒的间隔是没有用的，并且只会导致错误，因为浏览器调用间隔回调函数的最小值超过了 1 毫秒。

更改您的逻辑代码并尝试使用此代码：

```
setInterval(myFunc,100); 
```

# c++ - 量子计算机会影响 C++ 语言吗？

> ID：13379089
> 
> 赞同：2
> 
> 时间：2012-11-14T12:46:35.660
> 
> 标签：c++, portability, quantum-computing

量子计算机的出现可能还需要几十年的时间。尽管如此，由于如今软件变得异常复杂，因此很高兴知道 C++（开发此类软件最常用的编程语言之一）是否能够将自己投射到量子计算成为常态的未来，并且除了跨平台的可移植性，确保此类软件在几十年内的可移植性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T12:48:22.517

量子计算永远不会成为“常态”。它并不适合一切。它适用于解决一些传统算法难以解决的问题，但我们不会把它扔在所有事情上，而是在量子计算机上运行我们的小 C++ 实用程序。

所以，不，我不这么认为。

# php - 偶尔的视频广告打破自定义 WP 主题？

> ID：13379091
> 
> 赞同：0
> 
> 时间：2012-11-14T12:46:41.120
> 
> 标签：php, wordpress

所以我为我的朋友建立了这个 Wordpress 主题。设计已经确定，所以我只是构建了我认为/认为是一个非常强大的模板。

一路走来，我们遇到了一些问题，最后一个绊脚石是右侧边栏顶部的广告块。

如果您刷新直到它显示视频，它会破坏所有内容 - 不仅是侧边栏调用下方的内容，还有正文。

谁能给我一些见解？我要疯了。我在这个项目上工作太久了，只想解决这个最后的问题。

[http://www.touchlinetalk.com/](http://www.touchlinetalk.com/)

救命啊！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:08:15.210

您的代码无效（检查[http://validator.w3.org/](http://validator.w3.org/)）。很多元素没有关闭、重叠、一些锚点没有关闭等。添加视频可能会引入新的 div 元素或类似的东西，这实际上会干扰页面中重叠的其他元素并破坏布局。您应该提供一个指向不起作用的页面的链接（称为“概念证明”），而不是指向正常的页面。如果您使用的是 WordPress，这里有一个非常方便的功能，可以避免非封闭标签：`force_balance_tags()`. 它关闭尚未关闭的标签。更多信息在这里：[http ://codex.wordpress.org/Function_Reference/force_balance_tags](http://codex.wordpress.org/Function_Reference/force_balance_tags)

# ember.js - Emberjs - CollectionView 中的车把操作

> ID：13379094
> 
> 赞同：1
> 
> 时间：2012-11-14T12:46:54.393
> 
> 标签：ember.js

我在这里遇到了一个奇怪的问题。我想在“ParentView”中捕捉渲染的 Ember.CollectionView 中的一个动作。

```
{{#collection contentBinding="view.content"}}
    <a href="#" {{action insideCollection target="parentView">{{view.content}}</a>
{{/collection}} 
```

但是 CollectionView 中的 parentView 仍然是 View 的子类，而不是 ParentView 本身（在我的示例中为 ApplicationView）。那么，我怎样才能在我的 ApplicationView 中捕获 Handlebars-Action？

这是一个自己看问题的小提琴：http: [//jsfiddle.net/smgMt/3/](http://jsfiddle.net/smgMt/3/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:34:21.507

使用`collection`帮助器时，会为块中的每个内容创建一个隐式视图。所以在这里，如果你想访问ApplicationView，你必须调用两次parentView。

第二个提示是您必须在此链前面加上关键字`view`才能访问当前视图属性。

```
<script type="text/x-handlebars" data-template-name="application">
  <h1>Hello from Ember.js</h1>
  <button {{action test target="view"}}>Click to Test</button>
  {{#collection contentBinding="view.content" tagName="ul"}}
    <a href="#" {{action insideAction target="parentView.parentView"}}>{{view.content}}</a>
 {{/collection}}
</script>​ 
```

[http://jsfiddle.net/smgMt/14/](http://jsfiddle.net/smgMt/14/)

# vhdl - 在 VHDL 中使用 fpga 处理中断

> ID：13379096
> 
> 赞同：1
> 
> 时间：2012-11-14T12:47:15.517
> 
> 标签：vhdl, interrupt, fpga, interrupt-handling

我正在为 fpga 编写输入，并且 dsp 需要与 vhdl 中的双端口内存共享 dpram 控件进行交互。我有外部 IO 从一侧的 SPI 总线到 fpag 以与 dsp 通信，另一方面有一个摄像头到 dsp。所以我的输入就像 Havinf 在每次 FSM 使用 dsp 读取和写入中断后重置 FIFO。

现在我的问题是

1.  我想一次启用一些特定的中断并禁用其他中断。
2.  当使用逻辑 XOR 函数进行屏蔽时，来自 UART 的其他中断会超时。
3.  完成此操作后，相机会收到信号但无法控制。

我使用以下算法来处理所有异步输入：

1.  在 event2reg_array_proc 中：将所有输入保存到并行缓冲区“fifo_data_input_array”，每个输入（标志）应放入单独的缓冲区。
2.  在 reg_array2fifo_proc2 中：串行读取每个缓冲区并将它们保存在 fifo“fifo320x32”中。
3.  在主 FSM 中读取 fifo 的输出并进行适当的处​​理，每个周期只读取一个值，应该是一个标志。

如果您得到一些即使在处理后仍保留在寄存器中的标志，原因可能是：

1.  在 event2reg_array_proc: 和 reg_array2fifo_proc2: 中，如果一个标志（在缓冲区中）已写入 fifo，则应将其从缓冲区中清除。我使用“fifo_cnt”来控制它。您可以使用模拟来检查。
2.  Line Camera 发送 FRAME_VALID 信号和 LINE_VALID 信号一样，所以你可以用 Line Camera 得到很多 CAM2DSP_FRAME_SYNC_FLAG。

因此，任何人都可以建议任何算法在相机仍在与 DSP 通信时启用特定中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:16:41.243

您的问题措辞不够明确，无法正确回答。但有一点很清楚：XOR 不是中断掩码的好选择！根据中断处理程序的逻辑，AND 或 OR 将是更好的选择。

# iphone - 通过 UIBezierPath 移动 CALayer

> ID：13379100
> 
> 赞同：5
> 
> 时间：2012-11-14T12:47:23.210
> 
> 标签：iphone, ios, cocoa-touch, core-animation, calayer

我有一个层会在 UIBezierPath 上从 A 点移动到 B 点。我发现了很多示例，它们是指 CAAnimation 和 UIBezierPath。但我只需要将我的图层从指定点移动到贝塞尔路径上的另一个点。

![在此处输入图像描述](../Images/db028bcc9ecc2746f4cd529345fc5f82.png)

任何建议，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-20T12:28:21.883

希望这会有所帮助。

```
UIBezierPath *trackPath = [UIBezierPath bezierPath];
.
.
.
CAKeyframeAnimation *anim = [CAKeyframeAnimation animationWithKeyPath:@"position"];
anim.path = trackPath.CGPath;
anim.repeatCount = 1;
anim.duration = 2.0;
[layerToAnimate addAnimation:anim forKey:@"pathGuide"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T05:53:26.947

如果您的贝塞尔路径是一个圆形甚至半个圆形，您可以跳过该路径，而是将点添加到更大的方形图层。将该点设置为距该较大方形图层的中心的固定距离。然后，您可以围绕中心旋转 z 轴上较大的图层，无论您需要它移动多少度数。似乎它会简化一些事情，但我不确定你还需要它做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T22:54:19.173

我一直想做这样的事情并找到本教程，它展示了如何遵循特定的路径。它使用汽车（CALayer）和 UIBezierpath 作为赛道，并按以下顺序解决：

定义汽车应遵循的路径（在本例中为您的 BezierPath） 绘制定义轨道的黑线；(N/A) 绘制轨道的白色虚线中心线；（不适用）创建定义汽车的层；（您的图层）沿路径为汽车设置动画。（你问什么！）

您可以在此处查看参考帖子：http: [//nachbaur.com/2011/01/07/core-animation-part-4/](http://nachbaur.com/2011/01/07/core-animation-part-4/)

你也可以在这里下载源代码： [http ://cdn5.nachbaur.com/wp-content/uploads/2011/01/CALayerAnimTest.zip?25881d](http://cdn5.nachbaur.com/wp-content/uploads/2011/01/CALayerAnimTest.zip?25881d)

希望这可以帮助！

问候，

乔治。

# qt4 - pyInstaller 2.0 和 qt setWindowIcon 命令的问题

> ID：13379101
> 
> 赞同：1
> 
> 时间：2012-11-14T12:47:24.943
> 
> 标签：qt4, pyqt, pyinstaller

简单的 Qt 应用程序：

```
from PyQt4 import QtGui, QtCore
import sys, atexit

class ApplicationWindow(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)
        self.setAttribute(QtCore.Qt.WA_DeleteOnClose)
        self.setWindowTitle("application main window")
        self.file_menu = QtGui.QMenu('&File', self)
        self.menuBar().addMenu(self.file_menu)
        self.menuBar().addSeparator()

        self.main_widget = QtGui.QWidget(self)

qApp = QtGui.QApplication(sys.argv)
aw = ApplicationWindow()   
aw.show()
sys.exit(qApp.exec_())
qApp.exec_() 
```

运行没有问题，我可以使用 pyInstaller 构建一个运行良好的 exe。

我添加以下行：

```
iconfile = QtGui.QIcon('C:/pyinstaller/img/image1.png')
aw.setWindowIcon(iconfile) 
```

就在 aw.show() 之前（也在代码中的其他地方尝试过）

这个运行作为 python 文件很好，但是当使用 pyInstaller 构建时，exe 在运行时崩溃，我尝试使用资源文件和其他图像格式，但问题仍然存在。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:19:31.970

通过恢复到 pyInstaller v.1.5.1 解决（某种程度上），显然是 v2.0 中的一个错误。

# django - appfog django 静态文件

> ID：13379103
> 
> 赞同：3
> 
> 时间：2012-11-14T12:47:30.723
> 
> 标签：django, django-staticfiles, appfog

我有一个项目，实际上是来自 appfog ( [https://github.com/appfog/af-python-django](https://github.com/appfog/af-python-django) ) 的测试，它在 localhost 中运行顺利。但是它不起作用，至少静态文件一旦部署在appfog上就无法识别。我只改变了模板的位置。

这是测试页面[http://st-test.eu01.aws.af.cm/](http://st-test.eu01.aws.af.cm/)。同样，管理页面也没有 css [http://st-test.eu01.aws.af.cm/admin/](http://st-test.eu01.aws.af.cm/admin/)

这是我的配置（setting.py）

```
STATIC_ROOT = ''

STATIC_URL = '/static/'

STATICFILES_DIRS = (
)

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
) 
```

我也试过

```
STATIC_ROOT = os.path.join(os.path.abspath(os.path.dirname(__file__)), 'static') 
```

但没有任何改变。

我尝试在本地进行 collectstatic ，然后更新存储库中的文件，但没有任何效果。

你们中有人知道如何使它工作吗？

顺便说一句，在我使用的模板`{% load staticfiles %}`中`{% static "css/style.css" %}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:08:59.120

这对我有用：

设置.py：

```
import os
ROOT_PATH = os.path.dirname(__file__)

STATIC_ROOT = os.path.join(ROOT_PATH, 'static')
STATIC_URL = '/static/' 
```

网址.py：

```
(r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT}), 
```

# php - PHP 中的 $_GET 和静态

> ID：13379109
> 
> 赞同：-1
> 
> 时间：2012-11-14T12:47:43.300
> 
> 标签：php, static, get

例如，我从 FooStatic 中的 url 获取 name=carl 并希望使用 Carl 启动 $Name ，以便我可以从另一个函数中使用它。我可以这样做吗？还是有其他更好的方法来做到这一点？

```
class Foo {

private static $Name = "name";

public static function FooStatic(){

    if (isset($_GET["name"])){
        self::$Name = $_GET["name"];
        return true;
    } else {
        return false;
    }       
} 
```

我正在使用该名称从另一个班级获取更多信息

```
public static function getSomething() {
    if (isset($_GET[self::$Name])) {
        $name = $_GET[self::$Name];
        $ret = $someClass->Foo($name);
        return $ret;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:53:50.140

GET 变量是全局变量，因此您可以随时从几乎任何地方获取它们（如果它在相同的执行范围内），如果这是您所要求的。

# ruby-on-rails - 如何将 sunsupot-rails 与 rails 2.3.14 一起使用

> ID：13379111
> 
> 赞同：1
> 
> 时间：2012-11-14T12:47:52.330
> 
> 标签：ruby-on-rails, ruby, sunspot-rails, sunspot-solr

我克隆了由 rails 2.3.14 和 sunspot-rails 1.2.1 组成的项目我如何为这个项目配置 sunspot？任何帮助

问候 Ateq

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:36:54.333

您可以通过[github.com/outoftime/sunspot](https://github.com/outoftime/sunspot)教程配置 sunspot-rails。

希望这对您有所帮助。

# entity-framework - 使用子实体保存实体框架时出错

> ID：13379128
> 
> 赞同：0
> 
> 时间：2012-11-14T12:48:45.247
> 
> 标签：entity-framework

我有以下模型：

```
public class Job
{
    [Key]
    public int JobID { get; set; }
    public string Status { get; set; }
    public DateTime JobDate { get; set; }
    public string JobTitle { get; set; }
    public int? Cleaner { get; set; }
    public int? Client { get; set; }
    public int EstTime { get; set; }

    public virtual Client ClientInfo { get; set; }
    public virtual Valeter ValeterInfo { get; set; }
} 
```

这在 OnModelCreating 中：

```
// Relationship Job -> Valeter
        modelBuilder.Entity<Job>()
            .HasOptional<Valeter>(u => u.ValeterInfo)
            .WithMany()
            .HasForeignKey(e => e.Cleaner); 
```

（注意：它使用的是现有数据库）。当我尝试执行以下操作时：

```
if (ModelState.IsValid)
{
   db.Entry(job).State = EntityState.Modified;
   db.SaveChanges();
} 
```

它通常工作正常，除非我将 Cleaner 值更改为其他值，然后我得到错误：

> 发生参照完整性约束冲突：定义参照约束的属性值在关系中的主体对象和从属对象之间不一致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:31:09.557

`job.ValeterInfo != null` *如果和 ，* 通常会发生此异常`job.ValeterInfo.ValeterId != job.Cleaner`。因此，最简单的解决方案是在将导航属性附加到上下文`null`之前将其设置为：`job`

```
if (ModelState.IsValid)
{
    job.ValeterInfo = null;
    db.Entry(job).State = EntityState.Modified;
    db.SaveChanges();
} 
```

这看起来有点奇怪，就像一个黑客。但问题是为什么`job.ValeterInfo`不是`null`当您将数据发布到控制器操作时。当您将状态设置为 时`job`，`Modified`您只会更新作业的标量属性（包括`Cleaner`），而不是任何属性`job.ValeterInfo`或任何关系。因此，您不需要首先将`job.ValeterInfo`属性发送到服务器。

无论如何，您有一个不一致之处： FK`job.Cleaner`已更改，但相关实体`job.ValeterInfo`（尤其是其主键属性`ValeterId`）未更改。EF 不知道哪个代表正确的关系：外键属性值还是导航属性值？这种歧义导致异常。

# android - Android NDK如何从图像数组创建图像

> ID：13379129
> 
> 赞同：0
> 
> 时间：2012-11-14T12:48:45.687
> 
> 标签：android, android-ndk, java-native-interface

我有一个`JintArray`. `JNI`从那我想创建一个图像文件。

现在我正在通过将该数组传递给java端然后将该数组制作为图像来创建图像。但是连续使用时看起来很慢。

为了创建更多的图像，我想自己做这个过程`JNI`。

```
 jintArray ret = (*env)->NewIntArray(env, pixels);
    (*env)->SetIntArrayRegion(env, ret, 0, pixels, (jint *)pixbuf);
    free(pixbuf);
    LogD("NBridge: Returning data.");
    return ret; 
```

这就是我最后要做的。ret 是我拥有的图像数组。

**编辑** Java 代码以将 int[] 转换为图像

**像素是我从 jni 得到的 int[] 。**

```
 Bitmap bmp_ss = Bitmap.createBitmap(bitmap_width,
                bitmap_height,
                Bitmap.Config.ARGB_8888);
        bmp_ss.setPixels(pixels, 0, screen_width,
                0, 0, screen_width, screen_height);
 Matrix rotator = new Matrix();
            switch (rotation) {
            case (Surface.ROTATION_0):
                break;
            case (Surface.ROTATION_90):
                rotator.postRotate(0);
                break;
            case (Surface.ROTATION_180):
                rotator.postRotate(180);
                break;
            case (Surface.ROTATION_270):
                rotator.postRotate(0);
                break;

    bmp_ss = Bitmap.createBitmap(bmp_ss, 0, 0, screen_width, screen_height, rotator, false);
try {
                fos = new FileOutputStream(file);
            } catch (FileNotFoundException e) {
                throw new InvalidParameterException();
            }
            bmp_ss.compress(CompressFormat.JPEG, 25, fos); 
```

# javascript - 如何完全删除 Grid 及其列

> ID：13379134
> 
> 赞同：0
> 
> 时间：2012-11-14T12:49:10.207
> 
> 标签：javascript, extjs, dom-events, extjs4.1, extjs-mvc

我已经实现了扩展 Ext.grid.Panel 的网格 A 并实现了一些扩展网格 A 的其他网格。对于所有扩展网格 A 的网格，我通过其父网格的构造函数向它们添加了一个额外的列（网格一个）

```
constructor: function() {       

    this.columns.push({
        xtype: 'gridcolumn',
        //id: 'removeColumn',
        header: '',
        sortable: false,
        dataIndex: 'action',
        width: 25,
        renderer: function (action, metaData, record, row, col, store, gridView) {
            if (action == 'add') return icon = '<img style="height: 15px;width: 15px;"  src="images/add.png"/>';
            else return icon = '<img style="height: 15px;width: 15px;"  src="images/close.png"/>';
        }

    });

    this.callParent(arguments);
} 
```

所以上面的代码在网格 A 的所有子网格的末尾添加了一个额外的列。我已经在一个面板上添加了所有这些网格（比如 GridsPanel ），这些网格进一步添加到一个选项卡中。GridsPanel 是可关闭的（也可以通过按钮在 Tab 中重新添加）。单击关闭按钮时，它会成功关闭，但是每当我将 GridsPanel 重新添加到选项卡时，网格 A 在所有子网格的末尾添加两列。事实是 Grid A 没有添加两列，但是在关闭 GridsPanel 之前添加的列仍然存在并且没有被删除。类似地，关闭 GridsPanel 并通过单击按钮再次创建它将向子网格添加另一列，从而使添加的列总数为 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:04:12.930

我得到了解决方案，并想与其他人分享它，因为它可能会帮助其他人。问题实际上在于在构造函数中每个子网格的末尾添加了额外的列。在网格事件中添加额外的列`viewready`解决了这个问题。

```
viewready: function(object){

        column = {
            xtype: 'gridcolumn',
            //id: 'removeColumn',
            detachOnRemove : false,
            header: '',
            sortable: false,
            dataIndex: 'action',
            width: 25,
            renderer: function (action, metaData, record, row, col, store, gridView) {
                if (action == 'add') return icon = '<img style="height: 15px;width: 15px;"  src="images/add.png"/>';
                else return icon = '<img style="height: 15px;width: 15px;"  src="images/close.png"/>';
            }

        };

        object.headerCt.insert(object.columns.length, column);
        object.getView().refresh();
} 
```

因此，以这种方式添加列会完全破坏网格及其列。

# knockout.js - 使用 requirejs 定义的模型继承

> ID：13379139
> 
> 赞同：0
> 
> 时间：2012-11-14T12:49:22.220
> 
> 标签：knockout.js, requirejs

我有一个使用 knockout.js 和 require.js 库的 wep 应用程序。假设我有一个“用户”模型和一个“客户”模型。我希望客户模型从用户继承，所以我现在有以下代码：

用户.js

```
define(['knockout'], function(ko){

    return function User(){

        var self = this;
        self.id = ko.observable();
        self.firstname = ko.observable();
        self.name = ko.observable();
    };
}); 
```

客户.js

```
define(['knockout', 'model/user'], function(ko, User){

    return function Customer(){

        var self = this;
        self.address = ko.observable();
    };
    Customer.prototype = new User();
}); 
```

当我使用以下代码创建客户时：

```
var c = new Customer();
c.id(1);
c.firstname("John");
c.name("Doe");
c.address("Unknown"); 
```

然后我在 Chrome 控制台中收到以下错误：

```
Uncaught TypeError: Object #<Customer> has no method 'id' 
```

当我只设置地址属性时，我没有看到这个错误，所以我假设继承有问题。非常欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:53:16.580

以下行将永远不会执行，因为您之前使用了 return：

```
Customer.prototype = new User(); 
```

对此进行更新`customer.js`：

```
define(['knockout', 'model/user'], function(ko, User){

    function Customer (){

        var self = this;
        self.address = ko.observable();
    };
    Customer.prototype = new User();
    return Customer;
}); 
```

# c# - ImageControl Sitefinity 的 LayoutTemplatePath

> ID：13379140
> 
> 赞同：0
> 
> 时间：2012-11-14T12:49:24.607
> 
> 标签：c#, layout, sitefinity, toolbox

我们正在尝试通过创建一个单独的 toolbox.config 条目并指定一个自定义 LayoutTemplate 来创建内置 Sitefinity ImageControl 的扩展版本。

这基本上是有效的，但是当从编辑器的工具箱中拖动控件时，它没有我们在配置中指定的自定义 LayoutTemplate，它使用默认的 ImageControl LayoutTemplate。

如果我们手动将小部件高级设置中的值更改为我们的新模板，则一切正常。但是，显然就可用性而言，这是毫无用处的。

小部件没有在 toolbox.config 中提取 LayoutTemplate 是一个错误，还是我们需要做其他事情才能自动提取它？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:03:12.590

对我来说这听起来像是一个错误，您应该通过票务系统提出错误报告。

与此同时，您是否尝试过使用 Josh Morales 发布的此博客的选项 2：

[映射 Sitefinity 小部件的外部模板](http://www.sitefinity.com/blogs/joshmorales/posts/josh-morales-blog/2011/05/10/mapping_external_templates_for_sitefinity_4_widgets)

它是为版本 4 编写的，但仍应在 5 中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:19:27.220

我仍在调查此事，但除了 Seans 的建议之外，您还可以从图像控件继承，通过覆盖属性值以指向您的模板来硬编码布局模板路径，然后将该控件添加到工具箱用不同的名字。

这是一个极端的解决方法，因为如果这是一个错误并在下一个版本中得到解决，您将不得不返回并再次替换它们以使用工具箱属性......

但这是一个选择！当我知道更多关于为什么这不能按您期望的方式工作时，我会回来...

# html - https页面中的http内容

> ID：13379147
> 
> 赞同：1
> 
> 时间：2012-11-14T12:49:44.277
> 
> 标签：html, http, web

在我的具有 SSL 认证 URL 的网站中，我需要包含静态内容的 http 内容 - JS、CSS、图像等。

例如，`https://www.example.com`将参考的页面`http://subdomain.example.com/images/a.jpg`。

有没有办法在 HTTPS 页面中包含 HTTP 元素，避免浏览器中的任何安全警报？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T12:52:42.193

不可以。安全警告的存在是有原因的，无法绕过。

如果有人通过中间人攻击改变了 JS 途中怎么办？他们可以添加自己的代码并拥有对 DOM 的完全访问权限，从而使 SSL 毫无价值。

为了安全起见，您需要通过 HTTPS 加载整个页面，而不仅仅是 HTML 文档。如果你是安全的，那么关于不安全的警告就会消失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T13:03:39.870

调用静态资产时无需定义 http://。你可以使用相对协议的 url，基本上你可以这样做：

```
<img src="//subdomain.abc.com/images/a.jpg" alt=""> 
```

它将通过与您所在页面相同的协议获取图像。[保罗爱尔兰人会在他的博客](http://paulirish.com/2010/the-protocol-relative-url/)上比我解释得更好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T12:53:02.893

如果您的 https 页面包含 http 内容，我认为您无法绕过安全警报（在提供安全警报的浏览器上）。但请检查引用是否也适用于 https（当然取决于服务器）。如果是这样，您可以使用像 //subdomain.example.com/images/a.jpg 这样的 URL，这意味着将使用页面本身的协议（http 或 https）。

# extjs - ExtJs - 通过 div 类获取元素？

> ID：13379148
> 
> 赞同：8
> 
> 时间：2012-11-14T12:49:47.600
> 
> 标签：extjs, extjs4.1

如何通过类名获取 Div的**ExtJs 组件对象？**

说我的 div 是：

```
<div class="abc"></div> 
```

如何让这个 Div 的 ExtJs 对象执行例如`getWidth()`

注意：没有`id`给出。

**我尝试了什么：**

```
Ext.select(".abc")
Ext.query(".abc") 
```

* * *

**编辑：**

错误： `Object has no method 'getWidth'`

```
<div id="main">
<div class="abc"></div>
</div> 
```

```
 var d = Ext.get( "main" );
  d.query('.abc').getWidth(); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-14T13:08:22.163

采用

```
var dom = Ext.dom.Query.select('.abc');
var el = Ext.get(dom[0]); 
```

这将返回一个`Ext.Element`. 然后，您可以像这样在 el 上使用 ext 方法

```
el.on('click', function(){}, scope); 
```

或者

```
el.getWidth() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T13:13:31.323

我相信你的意思是[Ext.dom.Element](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element)（不是 ExtJs 组件对象）。如果是，请尝试此代码

```
var d = Ext.get( "main" );
alert(d.down('.abc').getWidth());​ 
```

[演示](http://jsfiddle.net/molecule/UYv6Z/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-01T15:16:19.467

对于 Ext4 及更高版本，您可以使用以下内容：

```
Ext.ComponentQuery.query('panel[cls=myCls]'); 
```

你会得到这个组件的数组

来源：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentQuery](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentQuery)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-08T20:28:20.913

```
Ext.select('abc'); 
```

此方法也适用于 EXT 4。

在您的示例中，只需在调用类名字符串时删除点即可。

# jquery - Aspx 页面和部分加载

> ID：13379158
> 
> 赞同：1
> 
> 时间：2012-11-14T12:50:24.013
> 
> 标签：jquery, asp.net, partial

我的问题是指拆分复杂的页面加载以改善用户体验。

**信息：**

我有一个普通的 aspx 页面，其中包含许多控件，这些控件执行复杂而繁琐的任务。加载页面时会自动（默认）执行此任务。所有这些组件都拆分为 div，并根据活动选项卡隐藏和显示 JQuery。因此，通过选项卡它隐藏或显示控件组、组件等。这些控件应保持在同一页面上并按此时的方式排列。

**问题：**

这个页面的问题是它有时会变得非常大，而且因为他们执行昂贵的任务，第一次加载页面需要一些时间，所以用户体验很差。因此，换句话说，性能非常糟糕，有时需要几分钟才能完全加载页面。

**问题：**

如何解决这个问题呢？我正在考虑将其拆分为某些部分并按需加载这些部分，但我不知道以后如何加载它们，我无法访问加载和这些控件的工作，我唯一想做的是不知何故，客户端，按需加载。所以一开始只加载第一个选项卡上的那些控件，然后如果我单击选项卡 2，我将加载与此选项卡相关联的那些控件......等等

但是我该怎么做，基本上主要是客户端？我可以将它们放在 div 中并对 div 说，直到说完才加载，然后我说它会再次执行某种页面加载？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:03:18.353

您可以在选择另一个选项卡时按需执行 ajax 加载，而不是在页面加载时执行，这是如何从 jquery 调用服务器端方法的示例：

[Jquery Ajax 加载图片](https://stackoverflow.com/questions/8761713/jquery-ajax-loading-image)

[jquery ajax加载某些div](https://stackoverflow.com/questions/5611746/jquery-ajax-load-certain-div)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:55:24.213

将昂贵的控件加载任务移至相关的选项卡处理程序，而不是在初始页面加载时全部完成。您可以在服务器端执行此操作，避免事后从客户端返回不必要的行程。

初始页面加载时，性能影响发生在服务器端。在这种情况下，以客户为中心的解决方案将不起作用 - 性能损失已经发生。您可以使用 AJAX，但在您的情况下，这可能意味着重新编写所有数据访问逻辑。

# javascript - 删除动态创建的按钮

> ID：13379161
> 
> 赞同：-1
> 
> 时间：2012-11-14T12:50:28.953
> 
> 标签：javascript, html

我正在制作一个离线工作的英语到印地语音译网页。我使用了 HTML 和 javascript，因此该文件适用于所有操作系统的所有浏览器。

如果用户每次都在同一台计算机、同一台浏览器上工作，我已经添加了对通过 cookie 记住单词的支持。

当用户键入 word 时，会根据存储在 cookie 中的数据库动态创建按钮。有没有办法可以在右键单击动态创建的按钮时关联操作？

另外，我想要那个动态创建的按钮应该在右键单击它时消失吗？我想要这个是因为，如果用户想从他的词汇数据库中删除一个错误的条目（在上面提到的 cookie 中）。

目前，我可以一次性删除所有动态按钮

```
id-of-span-which-holds-dynamic-buttons.innerHTML = ''; 
```

更长的方法是删除所有按钮，然后从数据库中弹出单词并根据当前数据库重新创建建议。有没有更简单的方法？

如果有人想看看我在说什么，我可以在哪里发布我的网页代码 ( **>51KB )？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:57:29.597

> 我添加了对通过 cookie 记住单词的支持

这是一个非常糟糕的主意。它会在每个 HTTP 请求中产生很大的开销 - 最终它会达到请求变得太大而服务器无法处理的地步 - 然后可能会开始发生坏事。HTML5 对本地存储有适当的支持。用它。

> 有没有办法可以在右键单击动态创建的按钮时关联操作

浏览一下网络 - 您是否在任何地方看到了类似的实现？我从来没有。试图接管鼠标右键是个坏主意。

# c - Ansi C - 函数需要指向数组的指针

> ID：13379164
> 
> 赞同：1
> 
> 时间：2012-11-14T12:50:35.840
> 
> 标签：c, arrays, pointers, ansi

我用 ANSI C 编写程序，并且有一个函数，其中我将指针传递给信号量数组`struct sembuf semb[5]`。

现在该函数的标题如下所示：

```
void setOperations(struct sembuf * op[5], int nr, int oper) 
```

但我收到警告：

```
safe.c:20: note: expected ‘struct sembuf **’ but argument is of type ‘struct sembuf (*)[5]’ 
```

如何解决这个问题？

**编辑**
调用：

```
setOperations(&semb, prawa, -1); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T12:58:01.977

如果要将指针传递给数组而不是指针数组，这就是函数的声明方式：

```
void setOperations(struct sembuf (*op)[5], int nr, int oper); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T12:52:27.997

您当前的声明 ( `struct sembuf * op[5]`) 表示一个由 5 个指针组成的数组`struct sembuf`。

数组无论如何都是作为指针传递的，所以在你需要的标题中：`struct sembuf op[5]`. 无论如何都会传递指向数组的指针。不会复制任何数组。声明此参数的另一种方法是`struct sembuf *op`，它是指向 的指针`struct sembuf`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T13:43:40.480

你可能过于复杂了......

如果你想传递一个结构数组，它实际上与传递任何数组没有什么不同。一旦你有了数组，获取地址就很简单了，让我给你一个简单的例子：

假设你有这个结构：

```
typedef struct s {
    int a;
    int b;
} mys; 
```

如果你想在你的中静态声明它，`main()`你可以这样做：

```
int main(int argc, char *argv[])
{
    mys local[3];
    memset(local, 0, sizeof(mys)*3);   // Now we have an array of structs, values are 
                                       // initialized to zero.

    // as a sanity check let's print the address of our array:
    printf("my array is at address: %#x\n", local);

    changeit(local, 3);  // now we'll pass the array to our function to change it 
```

现在我们可以让我们的函数接受数组并更改值：

```
void changeit(mys remote[], int size)
{
    int count;
    printf("my remote array is at address: %#x\n", remote); //sanity check
    for(count = 0; count < size; count++) {
        remote[count].a = count;
        remote[count].b = count + size;
    }
} 
```

一旦返回，我们可以`main()`使用其他循环打印值，例如：

```
for(int count = 0; count < 3; count ++)
    printf("struct[%d].a = %d\n struct[%d].b = %d\n", 
           count, local[count].a, count, local[count].b); 
```

我们将得到一些如下所示的输出：

```
>> ./a.out
   my array is at address: 0xbf913ac4
   my remote array is at address: 0xbf913ac4
   struct[0].a = 0
   struct[0].b = 3
   struct[1].a = 1
   struct[1].b = 4
   struct[2].a = 2
   struct[2].b = 5 
```

所以你可以看到它是同一个数组（相同的地址），这就是你如何将结构数组传递给另一个函数。这清楚了吗？

# mongodb - mongo 实例运行了多长时间

> ID：13379170
> 
> 赞同：5
> 
> 时间：2012-11-14T12:51:10.340
> 
> 标签：mongodb, ubuntu

我在 Ubuntu 10.04.4 LTS 的机器上运行 MongoDb

我有一种方法可以在不访问 mongo 日志文件的情况下找到它在不重新启动的情况下运行了多长时间

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T14:50:40.980

在 mongo 外壳中

```
db.serverStatus().uptime 
```

这将以秒为单位打印正常运行时间

您可以使用以下内容：

```
// minutes
db.serverStatus().uptime / 60

// hours
db.serverStatus().uptime / 3600

// days
db.serverStatus().uptime / 86400 
```

更方便的方法：

```
mongo --quiet --eval "db.serverStatus().uptime" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T14:38:23.190

如果可以，请尝试：

```
ps -ef 
```

这个对我有用。您将获得所有进程的 STIME（开始时间）字段，包括 mongodb。

我得到类似的东西

```
my_user_id 12853     1  0 Nov13 pts/1    00:00:00 /bin/bash ./bin/start_mongodb_mongod.sh 
```

# c# - Asp.net 的 AutoEventWireup 和反射？

> ID：13379177
> 
> 赞同：4
> 
> 时间：2012-11-14T12:51:38.530
> 
> 标签：c#, asp.net, .net, .net-4.0, autoeventwireup

`AutoEventWireup`使用*反射*搜索页面方法`page_eventName`

[微软](http://msdn.microsoft.com/en-us/library/system.web.configuration.pagessection.autoeventwireup.aspx)

> 当 AutoEventWireup 为 true 时，处理程序会在运行时根据其名称和签名自动绑定到事件。对于每个事件，ASP.NET 搜索根据 Page_eventname 模式命名的方法，例如 Page_Load 或 Page_Init。

问题 ：

*他对每个*请求都这样做吗？

我查看了`temporary internet files`（at`Microsoft.net`文件夹...），看看他是否保存了另一个包含显式处理程序附件的文件 - 并且*找不到*任何 .

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T14:13:52.687

正如@Marc 所说，ASP.NET 似乎为此使用了缓存。见内部`TemplateControl.HookUpAutomaticHandlers`。

此方法的一部分使用[dotPeek](http://www.jetbrains.com/decompiler/)：

```
internal void HookUpAutomaticHandlers()
{
  ...
  object obj = TemplateControl._eventListCache[(object) this.GetType()];
  if (obj == null)
  {
    lock (TemplateControl._lockObject)
    {
      obj = TemplateControl._eventListCache[(object) this.GetType()];
      if (obj == null)
      {
        IDictionary local_1_1 = (IDictionary) new ListDictionary();
        this.GetDelegateInformation(local_1_1);
        obj = local_1_1.Count != 0 ? (object) local_1_1 : TemplateControl._emptyEventSingleton;
        TemplateControl._eventListCache[(object) this.GetType()] = obj;
      }
    }
  }
  ... 
```

私有`GetDelegateInformation`方法负责为控件创建委托。 `TemplateControl._eventListCache`是一个`Hashtable`持有每个模板控件的委托。

所以，回答你的问题：

> 他对每个请求都这样做吗？

答案是不。ASP.NET 执行一次来填充 this `Hashtable`，然后使用缓存的值。

# cilk-plus - 如何开始使用 cilk++

> ID：13379178
> 
> 赞同：0
> 
> 时间：2012-11-14T12:51:51.780
> 
> 标签：cilk-plus

我想使用 cilk++ 编写并行代码。我想知道在 Windows 或 ubuntu 10.04 中入门的最简单方法。我应该如何开始使用 cilk++。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:52:11.610

cilk++ 是 Cilk 对 C++ 扩展的早期实现。它不再受支持。

Cilk 已在英特尔 Composer XE C++ 编译器以及 GCC 的“cilkplus”分支中实现。

我将从Cilk Plus 网站上的文章[http://www.cilkplus.org/which-license开始。](http://www.cilkplus.org/which-license)请注意，GCC 的“cilkplus”分支不在 GCC 4.8 流中，该流正在积极开发中。

*   Barry Tannenbaum - 英特尔 Cilk Plus 运行时开发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:52:47.990

到这里。

[Cilk Plus OSS 网站](http://www.cilkplus.org/download#runtime-sources)

# java - 如何在 Maven 中使用 51Degrees.Mobi

> ID：13379179
> 
> 赞同：0
> 
> 时间：2012-11-14T12:51:55.380
> 
> 标签：java, maven-2, servlet-filters, 51degrees

我正在尝试让 51Degrees.mobi 与我的 Maven、JSF 和 Java 项目一起工作，但是到目前为止我还没有运气。我已经从[http://51degrees.mobi/Support/Documentation/Java.aspx](http://51degrees.mobi/Support/Documentation/Java.aspx)下载了 2 个 jars并按照说明进行操作。我现在有一个看起来像这样的过滤器

```
 import fiftyone.mobile.detection.BaseDeviceInfo;
    import fiftyone.mobile.detection.Provider;
    import fiftyone.mobile.detection.binary.BinaryException;
    import fiftyone.mobile.detection.binary.Reader; 

     public void doFilter(ServletRequest request, ServletResponse response,FilterChain chain) throws IOException, ServletException {

    HttpServletRequest httpRequest = (HttpServletRequest) request;
    String s = httpRequest.getHeader("user-agent");

    //Create a Provider object
      Provider p;
    try {
        p = Reader.create();

    } catch (BinaryException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    //Provider p = Reader.create(PATH_TO_PREMIUM_DATA);

      //Read in a HttpServletRequest or User Agent String
      BaseDeviceInfo b = p.getDeviceInfo(s);

      //Get the value of a property
      String result = b.getFirstPropertyValue("IsMobile");

      //Check the property value
      if(result.equals("True")){
        System.out.println("This is mobile");
      }

      if(result.equals("False")){
        System.out.println("This is not mobile");
      }

      //Before exiting your application, ensure you dispose of the Provide to
      //release it's resources such as it's thread pool
       p.destroy();
   } 
```

那不会引发任何错误。从网上看，我发现了我必须添加到 pom 文件中的依赖关系，我拥有它

```
 <dependency><!-- Start 51Degrees.mobi dependencies -->
        <groupId>mobi.51degrees</groupId>
        <artifactId>detection</artifactId>
        <version>2.1.15.1</version>
    </dependency><!-- End 51Degrees.mobi dependencies --> 
```

文件本身再次没有引发错误，但是当我在目录中使用 mvn clean install 时，出现以下错误

```
 [ERROR] COMPILATION ERROR :
     [INFO] -------------------------------------------------------------
     [ERROR] \ea\portals\redirectionportal\src\main\java\com\filters\MyFilter.java:[18,32]          error: package fiftyone.mobile.detection does not exist

     [ERROR] \ea\portals\redirectionportal\src\main\java\com\filters\MyFilter.java:[19,32] error: package fiftyone.mobile.detection does not exist

     [ERROR] \ea\portals\redirectionportal\src\main\java\com\filters\MyFilter.java:[20,39] error: package fiftyone.mobile.detection.binary does not exist

     [ERROR] \ea\portals\redirectionportal\src\main\java\com\filters\MyFilter.java:[21,39] error: package fiftyone.mobile.detection.binary does not exist

     [ERROR] \ea\portals\redirectionportal\src\main\java\com\filters\MyFilter.java:[45,4] error: cannot find symbol

     [ERROR] \ea\portals\redirectionportal\src\main\java\com\filters\MyFilter.java:[47,7] error: cannot find symbol

     [ERROR] \ea\portals\redirectionportal\src\main\java\com\filters\MyFilter.java:[50,11] error: cannot find symbol

     [ERROR] \ea\portals\redirectionportal\src\main\java\com\filters\MyFilter.java:[60,4] error: cannot find symbol

     [INFO] 8 errors
     [INFO] -------------------------------------------------------------
     [INFO] ------------------------------------------------------------------------
     [INFO] BUILD FAILURE
     [INFO] ------------------------------------------------------------------------
     [INFO] Total time: 3.730s
     [INFO] Finished at: Wed Nov 14 12:45:35 GMT 2012
     [INFO] Final Memory: 16M/39M
     [INFO] ------------------------------------------------------------------------
     [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.1:compile (default-         compile) on project redirectionportal: Compilation failure: Compilation failure:
     [ERROR] \ea\portals\redirectionportal\src\main\java\com\filters\MyFilter.java:[18,32]          error: package fiftyone.mobile.detection does not exist
     [ERROR]
     [ERROR] \ea\portals\redirectionportal\src\main\java\com\filters\MyFilter.java:[19,32] error: package fiftyone.mobile.detection does not exist
     [ERROR]
     [ERROR] \ea\portals\redirectionportal\src\main\java\com\filters\MyFilter.java:[20,39] error: package fiftyone.mobile.detection.binary does not exist
     [ERROR]
     [ERROR] \ea\portals\redirectionportal\src\main\java\com\filters\MyFilter.java:[21,39] error: package fiftyone.mobile.detection.binary does not exist
     [ERROR]
     [ERROR] \ea\portals\redirectionportal\src\main\java\com\filters\MyFilter.java:[45,4] error: cannot find symbol
     [ERROR]
     [ERROR] \ea\portals\redirectionportal\src\main\java\com\filters\MyFilter.java:[47,7] error: cannot find symbol
     [ERROR]
     [ERROR] \ea\portals\redirectionportal\src\main\java\com\filters\MyFilter.java:[50,11] error: cannot find symbol
     [ERROR]
     [ERROR] \ea\portals\redirectionportal\src\main\java\com\filters\MyFilter.java:[60,4] error: cannot find symbol
     [ERROR] -> [Help 1]
     [ERROR]
     [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
     [ERROR] Re-run Maven using the -X switch to enable full debug logging.
     [ERROR]
     [ERROR] For more information about the errors and possible solutions, please read the following articles:
     [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:37:53.220

根据[规则](https://stackoverflow.com/faq#promotion)，我声明我在 51Degrees.mobi 作为一名 Java 开发人员工作。如果您解决了您的问题，我不确定此时查看页面？所以我想我会添加更多信息。

首先，如果您有两个 Jar 文件，那么您使用的是 2.1.16.1 而不是 2.1.15.1，尽管这不会直接影响您的问题，但我想我会说清楚:)。

此外，在发布当前答案后，最近通过 maven 中央存储库提供了 51Degrees.mobi 的 2.1.16.1 版解决方案。所以现在你要做的就是把这个依赖添加到你的 pom 中：

```
 <dependency><!-- Start 51Degrees.mobi dependencies -->
    <groupId>net.sourceforge.fiftyone-java</groupId>
    <artifactId>51Degrees.mobi.detection.core</artifactId>
    <version>2.1.16.1</version>
</dependency><!-- End 51Degrees.mobi dependencies --> 
```

如果您希望使用我们的第二个 jar，只需将“core”替换为“webapp”即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:59:39.143

确保您`51Degrees.mobi`的存储库中有（本地或远程）。我在 Maven 公共存储库中进行了快速搜索，但找不到它。

如果 jar 在您的本地文件夹中的某个位置。您可以使用

```
mvn install:install-file -Dfile=your-artifact-1.0.jar \
                         [-DpomFile=your-pom.xml] \
                         [-Dsources=src.jar] \
                         [-Djavadoc=apidocs.jar] \
                         [-DgroupId=org.some.group] \
                         [-DartifactId=your-artifact] \
                         [-Dversion=1.0] \
                         [-Dpackaging=jar] \
                         [-Dclassifier=sources] \
                         [-DgeneratePom=true] \
                         [-DcreateChecksum=true] 
```

检查链接[Maven 安装插件](http://maven.apache.org/plugins/maven-install-plugin/usage.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T13:08:00.570

尝试在您的存储库中找到该 jar：该 jar 应位于此处：

```
~/.m2/repository/mobi/51degrees/detection/2.1.15.1/ 
```

如果在那里找到它，请检查它是否包含包下的类

`fiftyone.mobile.detection`

- 更新 -

如果您没有找到这个 jar，您可以使用以下选项之一：

1.  使用“系统”范围依赖——它使你的构建平台/环境依赖，所以我不推荐它，尽管它是最简单的方法。

2.  使用`mvn install:install-file`它会将您的 jar 放入您的本地 maven 存储库。它比第一种方法好得多，但是您仍然需要在每个本地环境中运行 maven 之前使用此命令/您的本地存储库被清除...

3.  在服务器上的某处维护您自己的 maven 存储库，映射 maven 以使用此存储库。这是迄今为止我所知道的最好的方法。最好的办法是使用存储库代理，如“Nexus”或“Artifactory”。在最坏的情况下，您可以将存储库创建为普通文件系统，并使其可以通过 Web 服务器（如 apache）访问。在此存储库中，您将能够存储公共 maven 存储库中不存在的第三方 jar、您自己的工件，或者可能不是免费/开源的工件，因此无法在公共 maven 存储库中维护（例如您可以使用的商业软件）。

希望这可以帮助

# c# - 使用 TPL 并行运行任务

> ID：13379184
> 
> 赞同：2
> 
> 时间：2012-11-14T12:52:19.247
> 
> 标签：c#, asynchronous, task-parallel-library, state-machine

我有一个简单的（只是一个测试）状态机，它接受以下输入字符串`abc`和`ac`. 状态机设置如下：

`s1 --> 'a' --> s2`
`s2 --> 'b' --> s3`
`s3 --> 'c' --> s4`
`s2 --> s4 (Epsilon transition)`

s1 是开始状态
s4 是接受状态

我想使用 TPL 来并行执行`s1->s2->s3->s4`（`s1->s2->s3->s4`彼此独立）。

如果我传入“abc”作为机器接受的输入，即

`> Thread 1 - Consumed: a, from State: 1 to State: 2`
`> Thread 2 - Consumed: b, from State: 2 to State: 3`
`> Thread 3 - Epsilon transition from State: 2 to State: 3`
`> Thread 4 - Consumed: c, from State: 3 to State: 4`
`> Thread 4 - Accepted in state 4`

`Time taken = 19`

`Input 'abc' is valid` `Press any key to exit`

但是，如果我传入“ac”，我会得到：

`> Thread 1 - Consumed: a, from State: 1 to State: 2`
`> Thread 2 - Epsilon transition from State: 2 to State: 3`
`> Thread 3 - Consumed: c, from State: 3 to State: 4`
`> Thread 3 - Accepted in state 4`
`> Thread 4 - Consumed: c, from State: 3 to State: 4`
`> Thread 4 - Accepted in state 4`

`Time taken = 39`

`Input 'ac' is not valid (Reason: RejectedAmbiguous)` `Press any key to exit`

由于某种原因，状态机两次接受相同的输入（在状态 4 中接受），这是不可能的，因为并行执行的两条线都接受不同的输入。

由于代码太多，我不会发布所有代码，但我会发布主要部分，以便您了解我做错了什么。

```
public enum eResult
{
    Accepted = 0,
    RejectedAmbiguous,
    RejectedNoResults,
    RejectedNoInitialState
}

public eResult Execute()
{
    var startState = States.FirstOrDefault(s => s.Initial);
    if (startState == null) return eResult.RejectedNoInitialState;

    tasks.Clear();

    CancellationTokenSource cts = new CancellationTokenSource();
    Task t = new Task(() =>
        {
            foreach(Transition tr in getTransitions(startState))
            {
                var tr = trans[n];
                var actor = new Actor(tr.FromState, this.input);
                Task<Actor> task = Task<Actor>.Factory.StartNew(obj =>
                    {
                        return doTransitionFunction(tr, cts).Invoke((Actor)obj);
                    }, actor, cts.Token);
                buildContinuationTask(Transitions[tr], task, cts);
                tasks.Add(task);
            }
        }, cts.Token);

    t.RunSynchronously();

    try
    {
        Task.WaitAll(tasks.ToArray());
    }
    catch (AggregateException ae)
    {
        foreach (Exception e in ae.Flatten().InnerExceptions)
        {
            Console.WriteLine(e.Message);
        }
    }

    eResult result = eResult.Accepted;

    if (!results.Any()) result = eResult.RejectedNoResults;
    else if (results.Where(r => r.State.Accepted).Count() > 1) result = eResult.RejectedAmbiguous;

    return result;
}

IEnumerable<Transition> getTransitions(AtomicState state)
{
    return Transitions.Keys.Where(k => k.FromState == state);
}

bool isAccept(Actor parcel)
{
    return (parcel.State.Accepted && parcel.Cursor.EOF());
}

Func<object, Actor> doTransitionFunction(Transition transition, CancellationTokenSource cts)
{
    return new Func<object, Actor>(obj =>
    {
        var ts = (Actor)obj;
        var cur = ts.Cursor.Peek();
        if (transition.Epsilon || transition.Input.Invoke() == cur)
        {
            if (!transition.Epsilon) ts.Cursor.MoveNext();
            ts.State = Transitions[transition];
            OnTransitioned(this, new TransitionedEventArgs(transition.FromState, ts.State, cur, transition.Epsilon, Task.CurrentId));
            if (isAccept(ts))
            {
                OnAccepted(this, new AcceptedEventArgs(ts.State, Task.CurrentId));
                results.Add(ts);
                cts.Cancel();
            }
        }
        return ts;
    });
}

void buildContinuationTask(AtomicState s, Task<Actor> antecedentTask, CancellationTokenSource cts)
{
    var trans = getTransitions(s).ToArray();
    for (int n = 0; n < trans.Count(); n++)
    {
        Transition tr = trans[n];
        Task<Actor> continuation = antecedentTask.ContinueWith<Actor>(antecdent =>
            {
                if (!cts.IsCancellationRequested)
                    return doTransitionFunction(tr, cts).Invoke((Actor)antecdent.Result.Clone());
                else
                    return (Actor)antecdent.Result.Clone();
            }, cts.Token, TaskContinuationOptions.OnlyOnRanToCompletion, TaskScheduler.Current);
        buildContinuationTask(Transitions[tr], continuation, cts);
        tasks.Add(continuation);
    }
} 
```

如果这是不可能的，请纠正我，但我想要发生的是：

对于第一个并行任务接受`abc`作为输入：

s1 是`Task<Actor>`
s2 是 s1 的延续
s3 是 s2 的延续
s4 是 s3 的延续

对于第二个并行任务接受`ac`：

s1 是`Task<Actor>`
s2 是 s1 的延续
s3 是 s2 的延续（这是 epsilon 移动）
s4 是 s3 的延续

这两个任务都有自己的`Actor`对象副本，该副本将从主要的先行任务传递到后续任务。

我知道我快到了，我只需要解开这最后一个谜团。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:34:35.160

在阅读了有关 TPL DataFlow 的信息后，这是我的尝试，它似乎按照我想要的方式工作。

```
public interface IScrollableCursor
{
    void MoveNext();
    void MovePrevious();
    void MoveFirst();
    void MoveLast();
    bool BOF();
    bool EOF();
    char Peek();
    int CurrentPosition { get; }
}

[Serializable]
public abstract class AtomicState
{
    protected int stateId;
    protected bool accepted;

    public int StateId
    {
        get
        {
            return stateId;
        }
    }

    public AtomicState( int stateId )
    {
        this.stateId = stateId;
        this.accepted = false;
    }

    public AtomicState( int stateId, bool accepted )
        : this( stateId )
    {
        this.accepted = accepted;
    }

    public abstract bool Initial { get; }

    public bool Accepted
    {
        get
        {
            return accepted;
        }
    }

}

[Serializable]
public struct Actor : ICloneable
{
    private AtomicState state;
    private IScrollableCursor cursor;

    public AtomicState State
    {
        get
        {
            return state;
        }
        set
        {
            state = value;
        }
    }

    public IScrollableCursor Cursor
    {
        get
        {
            return cursor;
        }
    }

    public Actor( AtomicState state, IScrollableCursor cursor )
    {
        this.state = state;
        this.cursor = cursor;
    }

    public object Clone()
    {
        return this.DeepClone();
    }

}

public class Transition
{
    protected AtomicState fromState;
    protected Func<Char> input;
    protected bool epsilon;

    public AtomicState FromState
    {
        get
        {
            return fromState;
        }
    }

    public Func<Char> Input
    {
        get
        {
            return input;
        }
    }

    public bool Epsilon
    {
        get
        {
            return epsilon;
        }
    }

    public Transition( AtomicState fromState, Func<Char> input )
    {
        this.fromState = fromState;
        this.input = input;
    }

    public Transition( AtomicState fromState, bool epsilon )
        : this( fromState, null )
    {
        this.epsilon = epsilon;
    }

}

public class EpsilonTransition : Transition
{
    public EpsilonTransition( AtomicState fromState )
        : base( fromState, true )
    {
    }
}

public eResult Execute()
{
    var startState = States.FirstOrDefault( s => s.Initial );
    if ( startState == null ) return eResult.RejectedNoInitialState;

    tasks.Clear();

    CancellationTokenSource cts = new CancellationTokenSource();

    ExecutionDataflowBlockOptions options = new ExecutionDataflowBlockOptions();
    options.MaxDegreeOfParallelism = 4;
    options.CancellationToken = cts.Token;

    // transitions an actor onto it's next state
    TransformBlock<Tuple<Transition, Actor>, Actor> actorTransitioner = new TransformBlock<Tuple<Transition, Actor>, Actor>( tr =>
        {
            return doTransitionFunction( tr.Item1, cts ).Invoke( tr.Item2 );

        }, options );

    BroadcastBlock<Actor> actorTransitionerBroadcaster = new BroadcastBlock<Actor>( a => { return a; } );

    ActionBlock<Actor> actorProcessor = new ActionBlock<Actor>( a =>
        {
            foreach ( Transition t in getTransitions( a.State ) )
            {
                actorTransitioner.Post( new Tuple<Transition, Actor>( t, (Actor)a.Clone() ) );
            }
        } );

    // link blocks
    actorTransitioner.LinkTo( actorTransitionerBroadcaster );
    actorTransitionerBroadcaster.LinkTo( actorProcessor );

    actorTransitionerBroadcaster.Post( new Actor( startState, input ) );

    try
    {
        actorTransitioner.Completion.Wait();
    }
    catch ( AggregateException ex )
    {
        foreach ( Exception ae in ex.Flatten().InnerExceptions )
        {
            Console.WriteLine( ae.Message );
        }
    }

    eResult result = eResult.Accepted;

    if ( !results.Any() ) result = eResult.RejectedNoResults;
    else if ( results.Where( r => r.State.Accepted ).Count() > 1 ) result = eResult.RejectedAmbiguous;

    return result;
} 
```

我添加了我尝试中使用的构造，因此更容易复制。有必要我将发布整个代码（大约 12 个类）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:48:38.377

在提出一个更简单的解决方案后，我设法回答了我自己的问题。我推断 TPL DataFlow 不适合这种情况，因为它会创建循环数据网络，无法确定计算是否已完成。所以我决定把它完全装箱，然后回到绘图板上。

我最终发现 Paralell.ForEach() 完全符合我的要求，通过利用所有处理器内核并行运行每个转换：

```
public eResult Execute()
{
    var startState = States.FirstOrDefault( s => s.Initial );
    if ( startState == null ) return eResult.RejectedNoInitialState;

    CancellationTokenSource cts = new CancellationTokenSource();
    CancellationToken token = cts.Token;

    Task t = new Task( () =>
        {
            Parallel.ForEach( getTransitions( startState ), new ParallelOptions { MaxDegreeOfParallelism = 4 }, tr =>
            {
                var a0 = new Actor( tr.FromState, (IScrollableCursor)this.input.DeepClone() );
                var a1 = doTransitionFunction( tr, cts ).Invoke( a0 );
                if ( a0.State != a1.State )
                    processRecursively( a1.State, a0, cts );

            } );

        }, cts.Token );

    t.RunSynchronously();

    eResult result = eResult.Accepted;

    if ( !results.Any() ) result = eResult.RejectedNoResults;
    else if ( results.Where( r => r.State.Accepted ).Count() > 1 ) result = eResult.RejectedAmbiguous;

    return result;

}

void processRecursively( AtomicState s, Actor a0, CancellationTokenSource cts )
{
    Parallel.ForEach( getTransitions( s ), tr =>
        {
            var a1 = doTransitionFunction( tr, cts ).Invoke( a0 );
            if ( a0.State != a1.State )
                processRecursively( a1.State, a1, cts );
        } );
} 
```

# php - URL 参数被（可能）mod_security 拒绝

> ID：13379189
> 
> 赞同：2
> 
> 时间：2012-11-14T12:52:27.630
> 
> 标签：php, apache, mod-security

我买了一个应用程序，但目前我看到错误 406，因为查询参数包含奇怪的字符：

index.php?Page=Addons&Addon=dynamiccontenttags&ajax=1&Action=ShowDynamicContentTag&EditorName=myDevEditControl&ContentArea=html&PageName=%%PAGE%%

如果你看到最后一个参数是 &PageName=%%PAGE%%

我浏览，发现 mod_security 是禁止它的那个。由于我在 apache 方面不是太熟练，我发现自己很难与我的托管支持沟通这个问题。

我想知道：

1.  如果我请求禁用 mod_security，我是否会将我的网站置于风险之中？
2.  对于更简单的解决方案，我是否可以在 .htaccess 中添加任何规则，以便 mod_security 绕过值 %%PAGE%% ？
3.  对于复杂的解决方案，如果我想询问我的托管支持，我应该给他们什么 mod_security 规则？

谢谢大家！

# android - 如何使用嵌套片段（Android 4.2）在 ViewPager 中添加片段

> ID：13379194
> 
> 赞同：55
> 
> 时间：2012-11-14T12:52:52.647
> 
> 标签：android, android-fragments, android-viewpager, android-support-library, android-nested-fragment

我有一个`ViewPager`三个`Fragments`，每个都显示一个`List`（或`Grid`）。

在新`Android API level 17`版本（Jelly Bean 4.2）中，其中一个功能是[嵌套片段](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)。新的功能描述说：

> 如果您使用 ViewPager 创建向左和向右滑动并占用大部分屏幕空间的片段，您现在可以将片段插入到每个片段页面中。

所以，如果我理解正确，现在我可以在里面创建一个`ViewPager`with `Fragments`（例如，里面有一个按钮），当用户按下按钮时显示另一个`Fragment`而不松动`ViewPager`使用这个新功能。

我花了我的早上试图实现这几种不同的方式，但我无法让它工作......有人可以添加一个简单的例子来说明如何实现这个吗？

PS：我只对这样做感兴趣，`getChildFragmentManager`以了解如何工作。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-11-15T03:59:25.907

假设您已经创建了正确的 xml 布局。现在在另一个 Fragment 托管的 ViewPager 中显示 Fragment 非常简单。

以下是显示子片段的父片段：

```
class ParentViewPagerFragment : Fragment() {

  override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
    val root = inflater.inflate(R.layout.fragment_parent_viewpager, container, false)

    val viewPager = root.findViewById(R.id.viewPager) as ViewPager
    // Important: Must use the child FragmentManager or you will see side effects.
    viewPager.adapter = MyAdapter(childFragmentManager)

    val tabStrip = root.findViewById<TabLayout>(R.id.pagerTabStrip)
    tabStrip.setupWithViewPager(viewPager)

    return root
  }

  class MyAdapter internal constructor(fm: FragmentManager) : FragmentPagerAdapter(fm) {

    override fun getCount(): Int = 4

    override fun getItem(position: Int): Fragment {
      val args = Bundle().apply { putInt(ChildFragment.POSITION_KEY, position) }
      return ChildFragment.newInstance(args)
    }

    override fun getPageTitle(position: Int): CharSequence = "Tab $position"
  }

  companion object {
    val TAG: String = ParentViewPagerFragment::class.java.name
  }
} 
```

在实例化 FragmentPagerAdapter 时使用**Fragment.getChildFragmentManager()**很重要。另请注意，您不能在子片段上使用**Fragment.setRetainInstance()**，否则会出现异常。为简洁起见，省略了导入。

**源代码可以在：** [https ://github.com/marcoRS/nested-fragments](https://github.com/marcoRS/nested-fragments)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-14T15:27:19.507

**编辑：** 如果您想替换 a 中页面的所有内容，`ViewPager`您仍然可以使用嵌套片段，但需要进行一些更改。检查下面的示例（`FragmentActivity`设置`ViewPager`和 与`PagerAdapter`前面的代码片段相同）：

```
// this will act as a fragment container, representing one page in the ViewPager
public static class WrapperFragment extends Fragment implements
        ReplaceListener {

    public static WrapperFragment newInstance(int position) {
        WrapperFragment wp = new WrapperFragment();
        Bundle args = new Bundle();
        args.putInt("position", position);
        wp.setArguments(args);
        return wp;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        FrameLayout fl = new FrameLayout(getActivity());
        fl.setId(10000);
        if (getChildFragmentManager().findFragmentByTag("initialTag") == null) {
            InitialInnerFragment iif = new InitialInnerFragment();
            Bundle args = new Bundle();
            args.putInt("position", getArguments().getInt("position"));
            iif.setArguments(args);
            getChildFragmentManager().beginTransaction()
                    .add(10000, iif, "initialTag").commit();
        }
        return fl;
    }

    // required because it seems the getChildFragmentManager only "sees"
    // containers in the View of the parent Fragment.   
    @Override
    public void onReplace(Bundle args) {
        if (getChildFragmentManager().findFragmentByTag("afterTag") == null) {
            InnerFragment iif = new InnerFragment();
            iif.setArguments(args);
            getChildFragmentManager().beginTransaction()
                    .replace(10000, iif, "afterTag").addToBackStack(null)
                    .commit();
        }
    }

}

// the fragment that would initially be in the wrapper fragment
public static class InitialInnerFragment extends Fragment {

    private ReplaceListener mListener;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        mListener = (ReplaceListener) this.getParentFragment();
        LinearLayout ll = new LinearLayout(getActivity());
        Button b = new Button(getActivity());
        b.setGravity(Gravity.CENTER_HORIZONTAL);
        b.setText("Frame " + getArguments().getInt("position"));
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Bundle args = new Bundle();
                args.putInt("positionInner",
                        getArguments().getInt("position"));
                if (mListener != null) {
                    mListener.onReplace(args);
                }
            }
        });
        ll.setOrientation(LinearLayout.VERTICAL);
        ll.addView(b, new LinearLayout.LayoutParams(250,
                LinearLayout.LayoutParams.WRAP_CONTENT));
        return ll;
    }

}

public static class InnerFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        TextView tv = new TextView(getActivity());
        tv.setText("InnerFragment in the outher Fragment with position "
                + getArguments().getInt("positionInner"));
        return tv;
    }

}

public interface ReplaceListener {
    void onReplace(Bundle args);
} 
```

快速浏览一下它可以工作，但可能会出现问题，因为我没有对其进行过多测试。

> 有人可以举一个简单的例子来说明如何做到这一点吗？

使用嵌套片段似乎很容易，直到 Commonsware 提供更详细的示例，您可以尝试以下代码：

```
public class NestedFragments extends FragmentActivity {

    @Override
    protected void onCreate(Bundle arg0) {
        super.onCreate(arg0);
        ViewPager vp = new ViewPager(this);
        vp.setId(5000);
        vp.setAdapter(new MyAdapter(getSupportFragmentManager()));
        setContentView(vp);
    }

    private static class MyAdapter extends FragmentPagerAdapter {

        public MyAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            return WrapperFragment.newInstance(position);
        }

        @Override
        public int getCount() {
            return 8;
        }
    }

    public static class WrapperFragment extends Fragment {

        public static WrapperFragment newInstance(int position) {
            WrapperFragment wp = new WrapperFragment();
            Bundle args = new Bundle();
            args.putInt("position", position);
            wp.setArguments(args);
            return wp;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            LinearLayout ll = new LinearLayout(getActivity());
            FrameLayout innerFragContainer = new FrameLayout(getActivity());
            innerFragContainer.setId(1111);
            Button b = new Button(getActivity());
            b.setText("Frame " + getArguments().getInt("position"));
            b.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    InnerFragment innerFragment = new InnerFragment();
                    Bundle args = new Bundle();
                    args.putInt("positionInner",
                            getArguments().getInt("position"));
                    innerFragment.setArguments(args);
                    FragmentTransaction transaction = getChildFragmentManager()
                            .beginTransaction();
                    transaction.add(1111, innerFragment).commit();
                }
            });
            ll.setOrientation(LinearLayout.VERTICAL);
            ll.addView(b, new LinearLayout.LayoutParams(
                    LinearLayout.LayoutParams.MATCH_PARENT,
                    LinearLayout.LayoutParams.WRAP_CONTENT));
            ll.addView(innerFragContainer, new LinearLayout.LayoutParams(
                    LinearLayout.LayoutParams.MATCH_PARENT,
                    LinearLayout.LayoutParams.MATCH_PARENT));
            return ll;
        }

    }

    public static class InnerFragment extends Fragment {

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            TextView tv = new TextView(getActivity());
            tv.setText("InnerFragment in the outher Fragment with position "
                    + getArguments().getInt("positionInner"));
            return tv;
        }

    }

} 
```

我很懒，把所有的东西都写在代码里，但我确信它可以与膨胀的 xml 布局一起工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-22T18:30:01.090

我为索引 2 和 3 创建了一个包含 3 个元素和 2 个子元素的 ViewPager，这就是我想要做的。

![在此处输入图像描述](../Images/3088a4944d54c6f4e78c29ecc5804106.png)

我在 StackOverFlow 以前的问题和答案的帮助下实现了这一点，这里是链接。

[ViewPagerChildFragments](https://github.com/rukmaldias/ViewPagerChildFragments)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-26T15:46:51.570

在您的应用中轻松使用导航组件！然后在您的侦听器中，复制以下代码：

```
findNavController().navigate('Your action Id) 
```

*   IDE 自动为您创建的操作 ID。

# html - 用于翻译的 HTML 标签

> ID：13379195
> 
> 赞同：1
> 
> 时间：2012-11-14T12:52:55.103
> 
> 标签：html, language-translation

如果写在文章中，我应该使用什么 HTML 标记和标签。

```
This `foreign word` translated from foreign language as `this word in native reader language word`. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:55:36.837

`lang`对属性使用最合适的标记（如果没有更好的表现，则使用通用元素） 。

```
<body lang="en">
<!-- etc -->
<p><span lang="de">unbekanntes Flugobjekt</span> is German for UFO.</p> 
```

这通常不会提供自动翻译，但浏览器/浏览器扩展可以选择提供这种机制。谷歌翻译等翻译工具可能会使用它作为识别“来自”语言的提示。文字转语音软件可以使用它来选择发音指南。等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:05:34.590

没有专门用于此类目的的 HTML 标记。这实际上取决于页面上使用的人类语言的约定以及演示风格。通常，在提及单词或表达时使用引号或斜体，而不是在正常使用中使用它们。对于这些，HTML 中有不同的选项。引号最好这样写，根据语言规则使用适当的字符，尽管有些人仍然认为`q`标记很有用。对于斜体，您可以使用`i`标记或 CSS `font-style: italic`。

无论如何，如果以某种方式标记翻译与您的目的相关，例如为了以后统一样式，最好的办法是使用类。

原则上建议使用`lang`标记，并且它正在获得一些实际的重要性（例如，用于自动断字）。在以下示例中，`span`标记仅用于指示语言（因为您需要一个元素）：

`The French word “&lt;span lang=fr>cheval</span>” means “horse”.`

# python - python中具有预定义大小的多维数组

> ID：13379198
> 
> 赞同：1
> 
> 时间：2012-11-14T12:52:56.973
> 
> 标签：python, numpy

我想创建一个具有预定义大小的多维数组。在 CI 中会执行以下操作：

```
int multi_array[5][6][7]; 
```

如何在 Python 中创建这样的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T12:55:22.083

```
np.empty((5, 6, 7), dtype=int) 
```

或者，如果你想让它填零，

```
np.zeros((5, 6, 7), dtype=int) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T12:54:48.883

```
import numpy as np
a = np.ndarray((5,6,7), dtype=int) 
```

*注意：* 该数组将包含创建时未分配内存中发生的任何垃圾。如果您稍后要使用数据填充此表单，您可能更喜欢使用此表单，以提高效率。否则，您可能更愿意使用`np.zeros`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T13:27:49.557

请记住，这`numpy`是一个非标准扩展，尽管您现在可以在大多数系统上找到它。如果您需要在纯 python 中执行此操作，您可以尝试以下操作：

```
multi_array = []
for i in xrange(5):
    list2 = []
    for j in xrange(6):
        list3 = []
        for k in xrange(7):
            list3.append(0)
        list2.append(list3)
    multi_array.append(list2) 
```

当然，更好的方法是动态执行此操作（在加载数据时左右），因为`python`变量不打算像在`C`.

# c# - 区分日期/时间与版本

> ID：13379201
> 
> 赞同：2
> 
> 时间：2012-11-14T12:52:59.650
> 
> 标签：c#, .net, validation, date

遇到一个奇怪的问题。前几天在我们的代码中。我想出了一个快速修复方法，但我不禁想知道是否有更好的方法。

当将通过 QueryString 提交的字符串值解析为最终在 SQL 存储过程中结束的类型化对象时，就会出现问题。对于大多数最终比较类型，比较字符串很好，但是要对日期执行“小于”或“大于”等操作，必须首先将字符串转换为日期。

所以我们这样做了——值在从查询字符串中提取出来后作为字符串提交到函数中：

```
if (DateTime.TryParse(value, out newTime))
{
    value = newTime.ToStringIsoUtc();
}

return value 
```

多年来一直运行良好，直到有人试图提交一个由三部分组成的版本号。突然 1.3.1 变成了 2001-03-01 并且比较停止工作。

我的快速解决方法是检查潜在的“日期”中是否有多个点，如果有，请将其保留为字符串。简单的。但问题是，虽然我们的客户目前没有使用除 UTC 日期格式以外的任何其他日期格式，但当我查看 Wikipedia 并发现有多少国家使用 dd.mm.yy 之类的标准日期格式时，我感到害怕。

有没有更好的方法可以从日期中分辨出未键入的版本号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:12:46.313

*仅凭*日期值是无法做到这一点的。您*真正*需要的是另一个值，指示`DateTime`查询字符串中的格式是什么。

以您的`1.3.1`格式为例。谁能说它真的不能解释为 2011 年 1 月 3 日（从左到右而不是从右到左看）。

你有两个选择：

*   如果您想要一个完全开放的值，您需要一个提示，表明应该如何解释它（您将使用它来调整您的调用以将调用中的选项设置为 `DateTime.TryParse`），以及如果未提供提示，那么当输入不明确时，结果可能无法确定

*   拒绝任何不符合预期格式的内容。

在处理用户输入时，第一个更可取，因为您希望让用户尽可能轻松并降低进入门槛。

请注意，如果用户输入来自使用 HTML 5 的网页，您应该知道标签`input`允许输入类型。这不仅有利于允许浏览器提供标准化（至少，跨平台）输入此类数据的方式，而且还提供了数据传输格式的标准化，这意味着您的输入更多地属于# 2 比 #1 中的要高。`date``datetime`

在处理从 API 进行的调用时，第二个更可取，因为可以修改 DateTime 实例（或它们的表示）以符合您的期望（因为它们在调用您的 API 之前已经在内存中具有强类型表示）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:12:15.477

> 多年来一直运行良好，直到有人试图提交一个由三部分组成的版本号。突然 1.3.1 变成了 2001-03-01 并且比较停止工作。

这就是您应该使用**DateTime ParseExact(string s,string format,IFormatProvider povider)的原因**

```
using System;
using System.Globalization;

public class Example
{
   public static void Main()
   {
      string dateString, format;  
      DateTime result;
      CultureInfo provider = CultureInfo.InvariantCulture;

      // Parse date-only value with invariant culture.
      dateString = "06/15/2008";
      format = "d";
      try {
         result = DateTime.ParseExact(dateString, format, provider);
         Console.WriteLine("{0} converts to {1}.", dateString, result.ToString());
      }
      catch (FormatException) {
         Console.WriteLine("{0} is not in the correct format.", dateString);
      } 

      // Parse date-only value without leading zero in month using "d" format.// Should throw a FormatException because standard short date pattern of  // invariant culture requires two-digit month.
      dateString = "6/15/2008";
      try {
         result = DateTime.ParseExact(dateString, format, provider);
         Console.WriteLine("{0} converts to {1}.", dateString, result.ToString());
      }
      catch (FormatException) {
         Console.WriteLine("{0} is not in the correct format.", dateString);
      }

      // Parse date and time with custom specifier.
      dateString = "Sun 15 Jun 2008 8:30 AM -06:00";
      format = "ddd dd MMM yyyy h:mm tt zzz";
      try {
         result = DateTime.ParseExact(dateString, format, provider);
         Console.WriteLine("{0} converts to {1}.", dateString, result.ToString());
      }
      catch (FormatException) {
         Console.WriteLine("{0} is not in the correct format.", dateString);
      }

      // Parse date and time with offset but without offset's minutes. // Should throw a FormatException because "zzz" specifier requires leading  // zero in hours.
      dateString = "Sun 15 Jun 2008 8:30 AM -06";
      try {
         result = DateTime.ParseExact(dateString, format, provider);
         Console.WriteLine("{0} converts to {1}.", dateString, result.ToString());
      }   
      catch (FormatException) {
         Console.WriteLine("{0} is not in the correct format.", dateString);
      } 

      dateString = "15/06/2008 08:30";
      format = "g";
      provider = new CultureInfo("fr-FR");
      try {
         result = DateTime.ParseExact(dateString, format, provider);
         Console.WriteLine("{0} converts to {1}.", dateString, result.ToString());
      }   
      catch (FormatException) {
         Console.WriteLine("{0} is not in the correct format.", dateString);
      } 
   }
} 
```

[来源](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)

# android - 如何在 SQLite for Android 中编写查询？

> ID：13379205
> 
> 赞同：-3
> 
> 时间：2012-11-14T12:53:09.430
> 
> 标签：android, sqlite

我正在研究 Android SQLite 数据库，我的要求是从两个表中获取数据。桌子是地位和食客。

状态表：

![在此处输入图像描述](../Images/96e8ddb67ad7fb3bbb4bfd43c3d2858e.png)

食客表：

![在此处输入图像描述](../Images/4a218772d72c673623ae5e02800327e8.png)

我的目的是当 diners 表中的 din-status_color 列值和状态表中的 color_status-id 列值相等时，从状态表中获取 color_desc 的数据。

如何在 Android SQLite 中编写查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:58:12.887

这是一个完整的教程，它对我有帮助，我希望也能帮助你。

[很好的教程](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

这个适合[初学者](http://vimaltuts.com/android-tutorial-for-beginners/android-sqlite-database-example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:38:52.927

首先遍历 diners 表并从列“din_status_color”中获取所有值（可能都大于 0）

之后遍历状态表并将“color_status-id”与 diners 表中的“din_status_color”进行比较。如果匹配，则返回 color_desc。

这将帮助您：

```
protected String getColorDesc(){
    String[] din_status_color = {"din-status_color"};
    String[] color_desc = {"color_desc"};

    Cursor cursor = database.query("diners", din_status_color, "din_status_color > '0'", null, null, null, null);
    cursor.moveToFirst();

    Cursor cursor2 = database.query("status", color_desc, "color_status-id = '" + cursor.getInt(0) + "'", null, null, null, null);
    cursor2.moveToFirst();

    String colorDesc = cursor2.getString(0);

    cursor2.close();
    cursor.close();

    return colorDesc;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:31:26.093

我不是 SQLite 专家，但我认为一个简单的 join 语句应该可以工作。这样的事情可能会让你开始。

```
 Cursor c = database.rawQuery("select diners.id, status.color_desc from dinners inner join status on status.color_status_id = diners.din_status_color"); 
```

在此示例中，光标将具有晚餐 id 和 color_desc

# sql-server - 如果非数字或 TSQL 中的实际数值，则为 null

> ID：13379208
> 
> 赞同：2
> 
> 时间：2012-11-14T12:53:24.033
> 
> 标签：sql-server, tsql, isnumeric

如果 isumeric() 函数返回 1，我试图获取字符串的数值，如果返回 0，则返回 NULL。但我只有在它是数字时才得到 1，如果不是数字，我得到 1 或 null。是否可以使用下面的代码返回数值（而不是 1）？

```
select '14-154877-0' as actual_string, replace('14-154877-0', '-', '') as numeric_value, nullif(isnumeric(replace('14-154877-0', '-', '')), 0) as numeric_value_or_null /* Here I wold like to return the numeric value instead of 1 */

select 'some text' as actual_string, replace('some text', '-', '') as numeric_value, nullif(isnumeric(replace('some text', '-', '')), 0) as numeric_value_or_null /* OK */ 
```

**样本数据**

插入语句是 excel 连接函数的结果。

正如建议的那样，我使用了 case 表达式和 try_convert() （用于 MSSQL 2012）函数，它们工作正常。有没有更好的方法来做这种插入？

```
if object_id('tempdb..#temp_table') is not null
    begin
        drop table #temp_table;
    end;

create table #temp_table (
        int_column int,
        varchar_column varchar(50)
    );

insert into #temp_table (int_column, varchar_column) values (case when isnumeric(replace('111----111', '-', '')) = 1 then replace('111----111', '-', '') end, 'string data 1');
insert into #temp_table (int_column, varchar_column) values (case when isnumeric(replace('text', '-', '')) = 1 then replace('text', '-', '') end, 'string data 2');
insert into #temp_table (int_column, varchar_column) values (try_convert(int, replace('258--', '-', '')), 'string data 3');
insert into #temp_table (int_column, varchar_column) values (try_convert(int, replace('123', '-', '')), 'string data 4');

select * from #temp_table;

/*
    |   int_column  |   varchar_column  |
    |   111111      |   string data 1   |
    |   NULL        |   string data 2   |
    |   258         |   string data 3   |
    |   123         |   string data 4   |
*/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:03:48.507

也许：

```
SELECT value as actual_string
, replace(value, '-', '') as numeric_value
, CASE ISNUMERIC(replace(value, '-', ''))
  WHEN 1 THEN CAST(replace(value, '-', '') AS FLOAT)
  ELSE NULL END AS numeric_value_or_null
FROM TableName 
```

[**在里面摆弄**](http://sqlfiddle.com/#!3/b4ee7/5/0)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T13:05:22.663

如果您在 2012 年（我假设为您的数据选择适当的数据类型`INT`）

```
SELECT TRY_CONVERT(INT, replace(value, '-', '')) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T13:00:24.750

使用 case 语句有什么问题？例如

```
declare @text varchar(50)
set @text = '747467'

select 
    case
        when isnumeric(@text) <> 1 then null
        else cast(@text as decimal)
    end as numeric_or_null 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T13:02:20.400

```
select '14-154877-0' as actual_string, replace('14-154877-0', '-', '') as numeric_value, case when isnumeric(replace('14-154877-0', '-', ''))=1 then Cast(replace('14-154877-0', '-', '') as Numeric) else null end as numeric_value_or_null /* Here I wold like to return the numeric value instead of 1 */ 
```

# xml - 将块从左侧移动到内容（帐户导航） Magento（1 列布局）

> ID：13379213
> 
> 赞同：0
> 
> 时间：2012-11-14T12:53:40.373
> 
> 标签：xml, magento, magento-1.7

我希望这不是一个愚蠢的问题，我认为这将是一个基本的 local.xml 更新，但似乎无法让它工作。

问题; 我已经在我的 Magento 站点中设置了 1 列布局，然后删除了包含“customer_account_navigation”的左列（显然）。然后我尝试更新我的 local.xml 以将“customer_account_navigation”移动到“内容”，但这会破坏网站。

下面的代码，对此的任何帮助都会很棒（请原谅任何程度的愚蠢遗漏）。

```
<customer_account_index>
<reference name="root">
        <action method="setTemplate"><template>page/1column.phtml</template></action>
    </reference>
<reference name="left">
    <remove name="customer_account_navigation"/>
</reference>
<reference name="content">
        <block type="customer/account_navigation" name="customer_account_navigation" template="customer/account/navigation.phtml">
</reference>
</customer_account_index> 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:55:10.487

好的，所以我终于不再是个白痴并想通了。我基本上将我当前正在开发的一个 magento 站点中的帐户索引页面的布局从 2 列页面更改为单列布局。然后问题是将帐户导航添加回单列布局的主要内容......在尝试了一些事情之后，我意识到使用多个元素来创建帐户导航块。我今天早上更新了我的 local.xml，终于让它工作了，代码如下。

```
<customer_account_index>
    <reference name="root">
        <action method="setTemplate"><template>page/1column.phtml</template></action>
    </reference>
    <reference name="content">
        <block type="customer/account_navigation" name="customer_account_navigation" before="-" template="customer/account/navigation.phtml">
             <action method="addLink" translate="label" module="customer"><name>account</name><path>customer/account/</path><label>Account Dashboard</label></action>
             <action method="addLink" translate="label" module="customer"><name>account_edit</name><path>customer/account/edit/</path><label>Account Information</label></action>
             <action method="addLink" translate="label" module="customer"><name>address_book</name><path>customer/address/</path><label>Address Book</label></action>
        </block>
    </reference>
</customer_account_index> 
```

# jasper-reports - 变量表达式包含另一个变量

> ID：13379216
> 
> 赞同：0
> 
> 时间：2012-11-14T12:54:07.360
> 
> 标签：jasper-reports, ireport

我试图将一些变量放在另一个变量的变量表达式中。例如：

`$V{sum} = $F{quantity} * ${price}`，其中 sum 是没有任何计算的简单变量 `$V{total} = $F{disb} * $V{price}`，其中 total 具有“Sum”计算类型。

结果我收到了错误的金额。

但如果我使用：

```
$V{total} = $F{disb} * $F{quantity} * ${price} 
```

金额有效。

变量表达式中的变量给出错误值有什么原因吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:07:13.477

如果您在文本字段中输出第一个示例的 $V{total}，则需要确保根据您的报告正确设置了**评估时间。**您很可能希望将现场评估时间设置为“报告”。

评估时间决定了在报告的生成生命周期中实际*处理*动态计算变量的时间。

# c# - MSDN 代码示例中缺少空格和换行符

> ID：13379218
> 
> 赞同：1
> 
> 时间：2012-11-14T12:54:30.633
> 
> 标签：c#, vb.net, xaml, msdn

最近我注意到 MSDN 上的大多数代码示例都缺少重要的格式字符，例如空格和换行符。

例如，[Setter.TargetName 属性的](http://msdn.microsoft.com/en-us/library/system.windows.setter.targetname.aspx)这个页面有一些示例 XAML，但它没有格式化，并且元素名称和属性之间没有空格：

```
<Stylex:Key="Slider_Thumb"TargetType="{x:Type Thumb}"><SetterProperty="OverridesDefaultStyle"Value="true"/><SetterProperty="Width"Value="14"/><SetterProperty="Height"Value="14"/><SetterProperty="Template"><Setter.Value><ControlTemplateTargetType="{x:Type Thumb}"><GridWidth="14"Height="14"><EllipseFill="{TemplateBinding Foreground}"/><EllipseStroke="{TemplateBinding BorderBrush}"StrokeThickness="1"x:Name="ThumbCover"><Ellipse.Fill><LinearGradientBrushEndPoint="0,1"StartPoint="0,0"><LinearGradientBrush.GradientStops><GradientStopColor="#CCFFFFFF"Offset="0"/><GradientStopColor="#00000000"Offset=".5"/><GradientStopColor="#66000000"Offset="1"/></LinearGradientBrush.GradientStops></LinearGradientBrush></Ellipse.Fill></Ellipse></Grid><ControlTemplate.Triggers><TriggerProperty="IsDragging"Value="true"><SetterTargetName="ThumbCover"Property="Fill"><Setter.Value><LinearGradientBrushEndPoint="0,1"StartPoint="0,0"><LinearGradientBrush.GradientStops><GradientStopColor="#CCFFFFFF"Offset="1"/><GradientStopColor="#00000000"Offset=".5"/><GradientStopColor="#66000000"Offset="0"/></LinearGradientBrush.GradientStops></LinearGradientBrush></Setter.Value></Setter></Trigger></ControlTemplate.Triggers></ControlTemplate></Setter.Value></Setter></Style> 
```

有没有其他人有这个问题，我能做些什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T12:59:42.410

`Auto-Formatting event`在你的VS中启用`paste from clipboard`（工具->选项）-

![在此处输入图像描述](../Images/62dae9013400cf0a07d0873f7974333f.png)

只要您将代码粘贴到 XAML 文件中，它就会格式化您的 xaml，但您需要手动修复一些间距问题。

# scala - Scala 中使用惰性求值或融合的迭代器？

> ID：13379219
> 
> 赞同：14
> 
> 时间：2012-11-14T12:54:32.303
> 
> 标签：scala, scalaz, iterate

我听说迭代者很懒，但是他们*到底*有多懒呢？或者，是否可以将迭代器与后处理功能融合，从而不必构建中间数据结构？

例如，我是否可以在我的迭代对象中`Stream[Option[String]]` **从 a`java.io.BufferedReader`**构建一个 100 万个项目，然后`None`以组合方式过滤掉 s，而不需要将整个 Stream 保存在内存中？并且同时保证我不炸堆？或类似的东西 - 它不必使用`Stream`.

我目前正在使用 Scalaz 6，但如果其他迭代实现能够以更好的方式做到这一点，我很想知道。

请提供完整的解决方案，包括关闭`BufferedReader`和调用`unsafePerformIO`（如果适用）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T00:01:38.290

这是一个使用 Scalaz 7 库的快速迭代示例，演示了您感兴趣的属性：常量内存和堆栈使用。

## 问题

首先假设我们有一个大文本文件，每行都有一串十进制数字，我们想要找到所有至少包含 20 个零的行。我们可以像这样生成一些样本数据：

```
val w = new java.io.PrintWriter("numbers.txt")
val r = new scala.util.Random(0)

(1 to 1000000).foreach(_ =>
  w.println((1 to 100).map(_ => r.nextInt(10)).mkString)
)

w.close() 
```

现在我们有了一个名为`numbers.txt`. 让我们用以下命令打开它`BufferedReader`：

```
val reader = new java.io.BufferedReader(new java.io.FileReader("numbers.txt")) 
```

它不是太大（约 97 兆字节），但足以让我们很容易地看到我们的内存使用是否在我们处理它时实际上保持不变。

## 设置我们的枚举器

首先是一些进口：

```
import scalaz._, Scalaz._, effect.IO, iteratee.{ Iteratee => I } 
```

还有一个枚举器（请注意，为了方便起见，我将`IoExceptionOr`s更改为 s ）：`Option`

```
val enum = I.enumReader(reader).map(_.toOption) 
```

Scalaz 7 当前不提供枚举文件行的好方法，因此我们一次将文件分块处理一个字符。这当然会非常缓慢，但我不会在这里担心，因为这个演示的目标是展示我们可以在恒定内存中处理这个大文件，而不会破坏堆栈。该答案的最后一部分提供了一种性能更好的方法，但在这里我们将仅在换行符处进行拆分：

```
val split = I.splitOn[Option[Char], List, IO](_.cata(_ != '\n', false)) 
```

`splitOn`而且，如果采用指定*不*拆分位置的谓词这一事实使您感到困惑，那么您并不孤单。`split`是我们的第一个枚举示例。我们将继续将我们的枚举器包装在其中：

```
val lines = split.run(enum).map(_.sequence.map(_.mkString)) 
```

现在我们在monad中有一个`Option[String]`s的枚举器。`IO`

## 使用枚举对象过滤文件

接下来是我们的谓词——请记住，我们说过我们想要至少有 20 个零的行：

```
val pred = (_: String).count(_ == '0') >= 20 
```

我们可以把它变成一个过滤枚举器并将我们的枚举器包装在其中：

```
val filtered = I.filter[Option[String], IO](_.cata(pred, true)).run(lines) 
```

我们将设置一个简单的操作，仅打印通过此过滤器的所有内容：

```
val printAction = (I.putStrTo[Option[String]](System.out) &= filtered).run 
```

当然，我们还没有真正读过任何东西。为此，我们使用`unsafePerformIO`：

```
printAction.unsafePerformIO() 
```

现在我们可以看到`Some("0946943140969200621607610...")`s 慢慢滚动，而我们的内存使用量保持不变。它很慢，错误处理和输出有点笨拙，但我认为对于大约九行代码来说还不错。

## 从迭代器获取输出

那是`foreach`-ish 用法。我们还可以创建一个更像折叠的迭代器——例如收集通过过滤器的元素并将它们返回到一个列表中。只需重复上面的所有内容直到`printAction`定义，然后改写：

```
val gatherAction = (I.consume[Option[String], IO, List] &= filtered).run 
```

启动该操作：

```
val xs: Option[List[String]] = gatherAction.unsafePerformIO().sequence 
```

现在去喝杯咖啡（可能需要离得很远）。当你回来时，你要么有一个`None`（在`IOException`某个地方的情况下），要么有一个`Some`包含 1,943 个字符串的列表。

## 自动关闭文件的完整（更快）示例

为了回答您关于关闭阅读器的问题，这里有一个完整的工作示例，大致相当于上面的第二个程序，但有一个负责打开和关闭阅读器的枚举器。它也快得多，因为它读取的是行，而不是字符。首先是导入和几个辅助方法：

```
import java.io.{ BufferedReader, File, FileReader }
import scalaz._, Scalaz._, effect._, iteratee.{ Iteratee => I, _ }

def tryIO[A, B](action: IO[B]) = I.iterateeT[A, IO, Either[Throwable, B]](
  action.catchLeft.map(
    r => I.sdone(r, r.fold(_ => I.eofInput, _ => I.emptyInput))
  )
)

def enumBuffered(r: => BufferedReader) =
  new EnumeratorT[Either[Throwable, String], IO] {
    lazy val reader = r
    def apply[A] = (s: StepT[Either[Throwable, String], IO, A]) => s.mapCont(
      k =>
        tryIO(IO(reader.readLine())).flatMap {
          case Right(null) => s.pointI
          case Right(line) => k(I.elInput(Right(line))) >>== apply[A]
          case e => k(I.elInput(e))
        }
    )
  } 
```

现在是枚举器：

```
def enumFile(f: File): EnumeratorT[Either[Throwable, String], IO] =
  new EnumeratorT[Either[Throwable, String], IO] {
    def apply[A] = (s: StepT[Either[Throwable, String], IO, A]) => s.mapCont(
      k =>
        tryIO(IO(new BufferedReader(new FileReader(f)))).flatMap {
          case Right(reader) => I.iterateeT(
            enumBuffered(reader).apply(s).value.ensuring(IO(reader.close()))
          )
          case Left(e) => k(I.elInput(Left(e)))
        }
      )
  } 
```

我们准备好了：

```
val action = (
  I.consume[Either[Throwable, String], IO, List] %=
  I.filter(_.fold(_ => true, _.count(_ == '0') >= 20)) &=
  enumFile(new File("numbers.txt"))
).run 
```

现在阅读器将在处理完成后关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:52:45.003

我应该进一步阅读......这正是 enumeratees 的用途。枚举值在 Scalaz 7 和 Play 2 中定义，但在 Scalaz 6 中没有定义。

枚举用于“垂直”组合（在“垂直整合行业”的意义上），而普通迭代器以“水平”方式组合。

# c - 在 STM32 上用 C 语言生成纳秒延迟

> ID：13379220
> 
> 赞同：11
> 
> 时间：2012-11-14T12:54:36.247
> 
> 标签：c, stm32, lcd

我正在使用[STM32F2](http://www.st.com/stm32f2)控制器，并通过 8 位并行接口与[ST7036](https://www.lcd-module.com/eng/pdf/zubehoer/st7036.pdf) LCD 显示器连接。

数据表说地址保持和建立时间之间应该有 20 纳秒的延迟。

如何在 C 中生成 20 纳秒的延迟？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-01T19:38:19.107

使用`stopwatch_delay(4`下面的 ) 来完成大约 24ns 的延迟。它使用 STM32 的 DWT_CYCCNT 寄存器，该寄存器专门用于计算实际时钟滴答，位于地址 0xE0001004。

要验证延迟精度（请参阅`main`），您可以调用`STOPWATCH_START`、运行`stopwatch_delay(ticks)`，然后调用`STOPWATCH_STOP`并使用 进行验证`CalcNanosecondsFromStopwatch(m_nStart, m_nStop)`。`ticks`根据需要进行调整。

```
uint32_t m_nStart;               //DEBUG Stopwatch start cycle counter value
uint32_t m_nStop;                //DEBUG Stopwatch stop cycle counter value

#define DEMCR_TRCENA    0x01000000

/* Core Debug registers */
#define DEMCR           (*((volatile uint32_t *)0xE000EDFC))
#define DWT_CTRL        (*(volatile uint32_t *)0xe0001000)
#define CYCCNTENA       (1<<0)
#define DWT_CYCCNT      ((volatile uint32_t *)0xE0001004)
#define CPU_CYCLES      *DWT_CYCCNT
#define CLK_SPEED         168000000 // EXAMPLE for CortexM4, EDIT as needed

#define STOPWATCH_START { m_nStart = *((volatile unsigned int *)0xE0001004);}
#define STOPWATCH_STOP  { m_nStop = *((volatile unsigned int *)0xE0001004);}

static inline void stopwatch_reset(void)
{
    /* Enable DWT */
    DEMCR |= DEMCR_TRCENA; 
    *DWT_CYCCNT = 0;             
    /* Enable CPU cycle counter */
    DWT_CTRL |= CYCCNTENA;
}

static inline uint32_t stopwatch_getticks()
{
    return CPU_CYCLES;
}

static inline void stopwatch_delay(uint32_t ticks)
{
    uint32_t end_ticks = ticks + stopwatch_getticks();
    while(1)
    {
            if (stopwatch_getticks() >= end_ticks)
                    break;
    }
}

uint32_t CalcNanosecondsFromStopwatch(uint32_t nStart, uint32_t nStop)
{
    uint32_t nDiffTicks;
    uint32_t nSystemCoreTicksPerMicrosec;

    // Convert (clk speed per sec) to (clk speed per microsec)
    nSystemCoreTicksPerMicrosec = CLK_SPEED / 1000000;

    // Elapsed ticks
    nDiffTicks = nStop - nStart;

    // Elapsed nanosec = 1000 * (ticks-elapsed / clock-ticks in a microsec)
    return 1000 * nDiffTicks / nSystemCoreTicksPerMicrosec;
} 

void main(void)
{
    int timeDiff = 0;
    stopwatch_reset();

    // =============================================
    // Example: use a delay, and measure how long it took
    STOPWATCH_START;
    stopwatch_delay(168000); // 168k ticks is 1ms for 168MHz core
    STOPWATCH_STOP;

    timeDiff = CalcNanosecondsFromStopwatch(m_nStart, m_nStop);
    printf("My delay measured to be %d nanoseconds\n", timeDiff);

    // =============================================
    // Example: measure function duration in nanosec
    STOPWATCH_START;
    // run_my_function() => do something here
    STOPWATCH_STOP;

    timeDiff = CalcNanosecondsFromStopwatch(m_nStart, m_nStop);
    printf("My function took %d nanoseconds\n", timeDiff);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-14T13:24:26.860

我发现的第一个 Stm32f2 规范假设时钟频率为 120 MHz。这大约是每个时钟周期 8ns。在连续的写或读/写操作之间，您需要大约三个单周期指令。在 C 中，`a++;`可能会这样做（如果 a 位于堆栈中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-29T17:56:15.443

您应该查看芯片中可用的 FSMC 外设。虽然配置可能很复杂，特别是如果您没有放入为其设计的内存部分，您可能会发现您的并行接口设备很好地映射到其中一种内存接口模式。

这些类型的外部存储器控制器必须具有大量可配置的时序选项，以支持各种不同的存储器芯片，这样您就能够保证数据表所需的时序。

能够做到这一点的好处是您的 LCD 将看起来像任何旧的内存映射外围设备，抽象出较低级别的接口细节。

# javascript - AngularJS 解决一个承诺

> ID：13379222
> 
> 赞同：1
> 
> 时间：2012-11-14T12:54:39.677
> 
> 标签：javascript, angularjs

我正在学习如何从[示例](https://github.com/johnlindquist/angular-resolve/blob/master/client/js/app.js)中使用解析，并将其应用于我的 Todo 脚本。

然后我意识到一个问题，该示例仅向我展示了当我第一次访问此路线时如何解决 GET 调用以获取待办事项列表。

但是，在同一路线的同一页面中，我有一个添加按钮来发布新的待办事项，还有一个清除按钮来删除已完成的项目。

看着我`$scope.addTodo = function() {`，`$scope.clearCompleted = function () {`我想在行动后再次解决我的 TodoList。我怎样才能做到这一点？

这是我的代码。在我的代码中，初始`resolve: { todos: TodosListResl }`值是有效的，它会触发`TodosListResl`函数并产生承诺。但是，我不知道如何处理`addTodo`以及`clearComplete`何时再次解决待办事项列表。

![在此处输入图像描述](../Images/7e6fd6f7dcd0589cc2a064e1ffaffe8a.png)

main.js

```
var todoApp = angular.module('TodoApp', ['ngResource', 'ui']);
todoApp.value('restTodo', 'api/1/todo/:id');

todoApp.config(function ($locationProvider, $routeProvider) {
    $routeProvider.when("/", { templateUrl: "Templates/_TodosList.html", 
        controller: TodosListCtrl, resolve: { todos: TodosListResl } });
    $routeProvider.otherwise({ redirectTo: '/' });
});

//copied from example, works great
function TodoCtrl($scope, $rootScope, $location) {
    $scope.alertMessage = "Welcome";
    $scope.alertClass = "alert-info hide";

    $rootScope.$on("$routeChangeStart", function (event, next, current) {
        $scope.alertMessage = "Loading...";
        $scope.alertClass = "progress-striped active progress-warning alert-info";
    });
    $rootScope.$on("$routeChangeSuccess", function (event, current, previous) {
        $scope.alertMessage = "OK";
        $scope.alertClass = "progress-success alert-success hide";

        $scope.newLocation = $location.path();
    });
    $rootScope.$on("$routeChangeError", 
        function (event, current, previous, rejection) {
        alert("ROUTE CHANGE ERROR: " + rejection);
        $scope.alertMessage = "Failed";
        $scope.alertClass = "progress-danger alert-error";
    });
}
//also copied from example, works great.
function TodosListResl($q, $route, $timeout, $resource, restTodo) {
    var deferred = $q.defer();
    var successCb = function(resp) {
        if(resp.responseStatus.errorCode) {
            deferred.reject(resp.responseStatus.message);
        } else {
            deferred.resolve(resp);
        }
    };
    $resource(restTodo).get({}, successCb);
    return deferred.promise;
}
//now, problem is here in addTodo and clearCompleted functions, 
//how do I call resolve to refresh my Todo List again? 
function TodosListCtrl($scope, $resource, restTodo, todos) {
    $scope.src = $resource(restTodo);
    $scope.todos = todos;
    $scope.totalTodos = ($scope.todos.result) ? $scope.todos.result.length : 0;

    $scope.addTodo = function() {
        $scope.src.save({ order: $scope.neworder, 
                          content: $scope.newcontent, 
                          done: false }); 
                        //successful callback, but how do I 'resolve' it?
    };
    $scope.clearCompleted = function () {
        var arr = [];
        _.each($scope.todos.result, function(todo) {
            if(todo.done) arr.push(todo.id);
        });
        if (arr.length > 0) $scope.src.delete({ ids: arr }); 
        //successful callback, but how do I 'resolve' it?
    };   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:03:41.627

我认为你错过了`resolve`. 的要点`resolve`是“[延迟路由更改，直到加载数据](https://stackoverflow.com/questions/11972026/delaying-angularjs-route-change-until-model-loaded-to-prevent-flicker)。在您的情况下，您已经在一条路线上，并且您希望留在该路线上。但是，您想`todos`在成功回调时更新变量。在这种情况下, 你不想使用`resolve`. 而只是做需要做的事情. 例如

```
$scope.addTodo = function() {
    $scope.src.save({ order: $scope.neworder, 
                      content: $scope.newcontent, 
                      done: false }, function () {
        todos.push({ order: $scope.neworder, 
                      content: $scope.newcontent, 
                      done: false });
    }); 
                    //successful callback, but how do I 'resolve' it?
}; 
```

另外，我注意到您`_`最有可能使用的是 Underscore 库。你不需要为此使用另一个库，因为 Angular 已经有了[`$angular.forEach()`](http://docs.angularjs.org/api/angular.forEach).

# javascript - 使用 javascript 按名称抓取 html 框架

> ID：13379223
> 
> 赞同：0
> 
> 时间：2012-11-14T12:54:39.670
> 
> 标签：javascript, frame, same-origin-policy

我想按名称查找框架。我可以检测到相应的框架集，并且我知道我的框架的名称为“body”。我该如何处理？是否可以为此使用jQuery？此外，这些框架不在同一个域上，所以稍后我也必须考虑同源策略（我想为 src 元素设置值），所以也许你可以告诉我一个解决这两个问题的解决方案。提前致谢。

我的HTML：

```
<frameset border="0" framespacing="0" frameborder="0" rows="50,*">
<frame noresize="noresize" name="navigation" src="xxx"></frame>
<frame name="body" src="yyy"></frame>
</frameset> 
```

我的 JavaScript：

```
var framesets = self.parent.document.getElementsByTagName("FRAMESET");
var firstFrameset = framesets[0];
var bodyFrameList = firstFrameset.document.getElementsByName("body"); // Baaamm!
var matches = bodyFrameList.length;
var bodyFrame = bodyFrameList[0]; 
```

我对此的 JQuery 试验也没有工作：

```
var firstFrameset = framesets[0];
var $firstFrameset = jQuery(firstFrameset);
var bodyFrameList = $firstFrameset('frame[name=body]'); 
```

# sql-server - 从数据库读取 NVARCHAR 后，TClientDataset Widestring 字段的大小翻倍

> ID：13379228
> 
> 赞同：14
> 
> 时间：2012-11-14T12:55:02.707
> 
> 标签：sql-server, delphi

我正在将我们的一个 Delphi 7 项目转换为 Delphi X3，因为我们想要支持 Unicode。我们使用 MS SQL Server 2008/R2 作为我们的数据库服务器。在将一些数据库字段从 VARCHAR 更改为 NVARCHAR（并将随附的 ClientDatasets 中的字段更改为 ftWideString）后，随机崩溃开始发生。在调试时，我注意到 TClientDataset/DbExpress 的一些意外行为：

对于 NVARCHAR(10) 数据库列，我在客户端数据集中手动创建一个 TWideStringField，并将“Size”属性设置为 10。该字段的“DataSize”属性告诉我需要 22 个字节，这是预期的，因为 TWideStringField 的编码是 UTF-16 ，所以它需要每个字符两个字节和一些空间来存储长度。现在，当我在 ClientDataset 上调用“CreateDataset”并将数据集写入 XML（使用 .SaveToFile）时，在 XML 文件中，该字段定义为

`<FIELD WIDTH="20" fieldtype="string.uni" attrname="TEST"/>`

这对我来说看起来不错。

现在，不是调用 .CreateDataset，而是调用 TClientDataset 上的 .Open，以便它通过链接的组件 ->TDatasetProvider->TSQLDataset（.CommandText = 从表中选择 *）->TSQLConnection 获取数据。当我检查监视列表中字段的属性时，Size 仍然是 10，Datasize 仍然是 22。但是，在保存到 XML 文件后，该字段被定义为

`<FIELD WIDTH="40" fieldtype="string.uni" attrname="TEST"/>`

..宽度增加了一倍？

最后，如果我在 TClientDataset 上调用 .Open 而不事先创建任何字段定义，则字段的大小随后将为**20（不正确！）**和数据大小 42。保存到 XML 后，该字段仍定义为

`<FIELD WIDTH="40" fieldtype="string.uni" attrname="TEST"/>`

有谁知道这里出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-13T12:44:20.850

在 SQLCommand 组件（在 DatasetProvider 之前）检查字段类型及其大小。

大小加倍可能是两个隐式“转换”的结果：首先 - 服务器提供 NVarchar 数据，该数据存储在 ansi-string 字段中（并且每个字节都成为一个单独的字符），其次 - 它存储在 clientdataset 类型为 Widestring 的字段中，每个字符变为 2 个字节（大小加倍）。

请注意，在先前版本的 Delphi 中，ClientDataset 的字段与相应的查询/命令字段之间的字符串字段大小不匹配不会导致异常，但从 XE* 之一开始，它通常会导致 AV。因此，您必须在迁移期间仔细检查字符串字段大小。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-11T15:55:37.367

听起来因为列数据类型被更改，它给你带来了意想不到的问题。我的建议是 1\. 备份表，有多种方法，形象地说是挑毒 2\. 删除表， 3\. 重新创建表， 4\. 将旧表中的数据导入到新创建的表中。看看是否有帮助。

当列数据类型发生变化时，SQL 表不喜欢它，这样做可能会出现意想不到的问题。所以尝试一下，在最坏的情况下，你可能浪费了十分钟的时间来尝试一个可能的解决方案。

# yesod - 市场上的 Yesod Web 框架

> ID：13379229
> 
> 赞同：1
> 
> 时间：2012-11-14T12:55:03.693
> 
> 标签：yesod

Yesod Web Framework for Haskell 是否在 Internet 上任何已建立的站点上使用，除了 yesodweb.net？有公司在使用吗？

我正在考虑创建一个站点并正在研究框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:10:15.713

[wiki 上](https://github.com/yesodweb/yesod/wiki/Powered-by-Yesod)有一个免费贡献的列表。

但目前用谷歌搜索“由 Yesod 提供支持”会得到 63.200 页。

使用多引擎网站应该过滤很多。[以 IxQuick](https://www.ixquick.com/do/search)为例。[ITools](http://itools.com/search/web-search#q=%22powered+by+yesod%22&submit=Search&tool=bing-web-search)允许切换搜索引擎。

[Google-groups Yesod 论坛](https://groups.google.com/forum/?fromgroups#!members/yesodweb)目前有 383 名感兴趣的成员。

# c# - 寻找示例代码以通过触摸 WinRT xaml 圆形按钮或像立体声收音机按钮一样旋转的图像

> ID：13379230
> 
> 赞同：2
> 
> 时间：2012-11-14T12:55:07.827
> 
> 标签：c#, xaml, rotation, touch, windows-runtime

我正在寻找通过触摸或鼠标旋转 WinRT xaml 圆形按钮或图像（如立体声收音机按钮）的示例代码。想法是能够以无限的方式触摸控件向左向右旋转。增量值用于增加或减少另一个对象的值。旋转角度并不重要。只是将控件向右或向左转动的动作是。

任何关于实现这一目标的好方法的提示将不胜感激？

这里的部分代码：

```
private RotateTransform rotateTransform;

void ManipulationStarting(object sender, ManipulationStartingRoutedEventArgs e)
{
   e.Handled = true;

   var image = sender as Image;
   var container = image.Parent as UIElement;

   var localCenter = new Point(image.ActualWidth / 2, image.ActualHeight / 2);
   var pivot = new ManipulationPivot(localCenter, 20);
   e.Pivot = pivot;

    rotateTransform.CenterX = image.ActualWidth / 2;
    rotateTransform.CenterY = image.ActualHeight / 2;

    e.Container = container;
 }

 void ImageManipulationDelta(object sender, ManipulationDeltaRoutedEventArgs e)
 {
      e.Handled = true;

      var image = sender as Image;

      double newAngle;
      var valueDrawline = 1;
      if (e.Delta.Rotation < 0)
      {
          valueDrawline = -1;
          newAngle = rotateTransform.Angle - (1 + e.Delta.Rotation);
      }
      else
      {
          valueDrawline = 1;
          newAngle = rotateTransform.Angle + (1 + e.Delta.Rotation);
      }

      rotateTransform.Angle = newAngle;
      image.RenderTransform = rotateTransform;
  } 
```

“真正的”问题来自不恒定的方向。例如：当我用鼠标或手指从左到右转动控件时，该值应该增加+1。这不适用于当前代码，因为该值主要以 +1 递增，但即使我仍然转向该方向，也以 -1 递增。为了更清楚，让我们假设我想用我的控件绘制一条水平线。我需要将其向右旋转以向右绘制，反之以向左绘制。使用此代码，它会朝着正确的方向前进，但沿线的路径要退很多步...

提前发送

# java - 在会话范围内保存变量而不使它们成为静态？

> ID：13379232
> 
> 赞同：0
> 
> 时间：2012-11-14T12:55:19.020
> 
> 标签：java, jsf, jsf-2, scope, java-ee-6

这是一个菜鸟问题，对不起。

我开发了一个 jsf-2 应用程序（在 Tomcat 上），它在会话范围内声明了一个大控制器 bean。

现在，我犯的错误是将所有会话范围的变量作为*静态*变量放在这个 bean 中，认为它们不会在应用程序的不同实例之间共享。但它们是——静态变量在同一个 JVM 上的所有应用程序实例之间共享，这实际上是有道理的。无论如何，我所有的代码目前都是这样的：

```
@SessionScoped
@ManagedBean
public ControllerBean{
static private String aString = "session wide value for a string";
//static getter and setter for astring

}

@viewscoped
@ManagedBean
public class OneRandomViewScopedBean{
String oneString = ControllerBean.getAString();
//operations on this string...
ControllerBean.setAString(newValueForString);
} 
```

我能否获得有关如何重构代码以删除 ControllerBean 中的静态变量的指针？我想解决方案很简单，但我现在看不到。

注意：我不需要持久化数据，因为数据量很小，并且在应用程序关闭后它们可能会消失

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T13:12:55.110

删除`static`修饰符（这确实是一个巨大的错误；这个问题不是 JSF 特有的，而只是基本的 Java。在继续 JSF 之前，我真的会花更多的时间来学习基本的 Java）并用于[`@ManagedProperty`](http://docs.oracle.com/javaee/6/api/javax/faces/bean/ManagedProperty.html)注入其他 bean 或其属性。

```
@ManagedBean
@SessionScoped
public class ControllerBean {

    private String aString = "session wide value for a string";
    // Non-static getter and setter for aString.

    // ...
}

@ManagedBean
@ViewScoped
public class OneRandomViewScopedBean {

    @ManagedProperty("#{controllerBean}")
    private ControllerBean controllerBean;
    // Setter for controllerBean. Getter is not mandatory.

    public void someAction() {
        controllerBean.setAString(newValueForString);
    }

    // ...
} 
```

### 也可以看看：

*   [JSF 2.0 中的通信 - 相互注入托管 bean](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#InjectingManagedBeansInEachOther)

# android - Android 应用程序在上网时开始运行缓慢

> ID：13379233
> 
> 赞同：0
> 
> 时间：2012-11-14T12:55:18.927
> 
> 标签：android

我的应用程序会在后台下载数据（如果可用）。我正在为此使用 AsyncTask，但是当我的 web 服务无法访问或 web 服务响应时间过长时，我的应用程序开始工作非常缓慢或根本不工作。我正在使用这段代码在我的 AsyncTask 中联机：

```
 /* Open connection. */
 URL url = new URL(webserviceLink);
 HttpURLConnection connection = (HttpURLConnection) url.openConnection();
 connection.setRequestMethod("GET");

 /* Create input stream. */
 inputStream = connection.getInputStream();

 while ((bytesRead = inputStream.read(buffer, 0, bufferSize)) > 0) {
       fileOutputStream.write(buffer, 0, bytesRead);
       counter += bytesRead;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:58:59.197

[http://developer.android.com/reference/java/net/URLConnection.html#setConnectTimeout(int](http://developer.android.com/reference/java/net/URLConnection.html#setConnectTimeout(int) ) `public void setConnectTimeout (int timeoutMillis)`

像这样设置小的连接超时：`connection.setConnectTimeout(5*1000);`

**编辑**：您也可能想使用此方法设置读取超时：

`public void setReadTimeout (int timeoutMillis)`

# ios - 在 Objective-C 中将货币字符串转换为浮点数

> ID：13379236
> 
> 赞同：5
> 
> 时间：2012-11-14T12:55:28.863
> 
> 标签：ios, objective-c, swift, nsstring, nsnumberformatter

我的目标很简单，我有一个存储本地化货币值的文本字段（例如 $1,000.00），我需要从文本字段中取回该值作为浮点数，以便对文本字段执行一些测试。

代码非常简单，首先我将 NSNumber 格式化为本地化字符串，如下所示：

```
NSNumberFormatter* formatter = [[NSNumberFormatter alloc] init];
formatter.locale = [NSLocale currentLocale];
formatter.numberStyle = NSNumberFormatterCurrencyStyle;
textfield.text = [formatter stringFromNumber:number]; 
```

一切正常，但是我做相反的事情来从这个本地化字符串中获取 doubleValue ：

```
NSNumberFormatter* formatter = [[NSNumberFormatter alloc] init];
formatter.locale = [NSLocale currentLocale];
formatter.numberStyle = NSNumberFormatterCurrencyStyle; //also tested with NSNumberFormatterDecimalStyle

double d = [formatter numberFromString:textfield.text].doubleValue; 
```

问题是格式化程序只返回我的字符串的整数值而不是小数，更糟糕的是，如果它是加拿大本地化字符串（20 000,00 $），它只返回 20。

我已经搜索了一段时间，但找不到任何关于这种行为的信息。解决方法当然是在将 NSNumber 格式化为文本字段之前存储它，然后测试这个 nsnumber，但我真的不觉得它漂亮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-26T02:30:55.790

在 Swift 中，您可以通过类似的方式将语言环境设置为货币格式，然后获取双精度：

```
 var locale = NSLocale.currentLocale()
    var formatter = NSNumberFormatter()
    formatter.locale = NSLocale(localeIdentifier: "en_US")
    formatter.numberStyle = NSNumberFormatterStyle.CurrencyStyle

    var moneyDouble = formatter.numberFromString(textField.text)?.doubleValue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:11:47.533

正如 Giuseppe 指出的那样，答案非常简单，我因为没有考虑而将头撞在墙上。

```
double d = [NSDecimalNumber decimalNumberWithString:textfield.text locale:[NSLocale currentLocale]].doubleValue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-16T20:19:49.827

对 zavtra 的答案的略微增强，它返回一个浮点数并且不强制语言环境标识符为`en_US`（Swift 2）：

```
func floatFromTextFieldText() -> Float {
    let formatter = NSNumberFormatter()
    formatter.locale = NSLocale.currentLocale()
    formatter.numberStyle = NSNumberFormatterStyle.CurrencyStyle
    guard let amount = self.text else { return 0.0 }
    return formatter.numberFromString(amount)!.floatValue
} 
```

# java - struts2让我发疯

> ID：13379239
> 
> 赞同：2
> 
> 时间：2012-11-14T12:55:43.420
> 
> 标签：java, struts2, type-conversion, struts2-interceptors, interceptorstack

我一直在尝试制作一个java项目。它使用 Struts 2 标签。每当单击它时都会有一个按钮`Update`，它应该更新数据库中的值。

但我收到此错误：

> 没有为操作 com.comviva.im.ui.action.sysadmin.CUGAction 和结果输入定义结果

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:28:39.737

> 没有为操作 com.comviva.im.ui.action.sysadmin.CUGAction 和结果输入定义结果

这意味着您`input`在 Struts.xml 中缺少此操作的结果的映射

标准工作流程

> JSP -> 拦截器栈 -> 动作

在到达动作之前中断，很可能是由 ConversionError 拦截器（例如，将字符串发送到整数），并且它甚至在没有到达动作的情况下就返回了。

阅读有关[**Struts2 INPUT 结果**的更多信息：它是如何工作的？如何处理转换/验证错误？](https://stackoverflow.com/a/23450365/1654265)

当它试图回来时，它找不到去哪里。

所以你必须定义一个`input`结果类型：

```
<action name="CUGAction" class="com.comviva.im.ui.action.sysadmin.CUGAction">
    <result name="success">/your.jsp</result>
    <result name="input">/your.jsp</result>
</action> 
```

[然后用`<s:fielderror />`](https://stackoverflow.com/a/30025745/1654265)和打印出 JSP 中的错误[，`<s:actionerrors />`](https://stackoverflow.com/a/13154159/1654265)并尝试找出发生了什么。

# javascript - 在 jQuery 插件扩展中访问 this.element 的问题

> ID：13379241
> 
> 赞同：0
> 
> 时间：2012-11-14T12:56:05.577
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我正在尝试扩展现有的 jQuery 插件，但遇到了一些问题，之前已经讨论过，不幸的是与我的情况并不完全相关。基本上，我的代码做这样的事情

```
(function($) {
    var self = $.ech.multiselect.prototype,
        orig_create = self._create,
        orig_init = self._init;
    var extensionMethods = {
        elemental: null,
        tooltip: function(e){
            var id = self.elemental.attr("id");
            //code
        },
        _create: function() {
            var ret = orig_create.apply(this, arguments);
            //code
            return ret;
        },
        _init: function() {
            var ret = orig_init.apply(this, arguments);
            this.elemental = this.element;
            return ret;
        },
        _bindEvents: function() {
            self.tooltip(e);
        }
    };

    $.extend(true, self.options, {tooltip: true});
    $.extend(true, self, extensionMethods);

})(jQuery); 
```

我的问题是我试图在“元素”对象中存储对 this.element 的引用，以便我可以使用它来获取工具提示（）中控件的 ID。然而，它不起作用，我几乎放弃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:17:16.493

您正在使用`self`，它是原型对象本身。您想要`this`，它指的是实例并具有正确的属性：

```
tooltip: function(e){
    var id = this.elemental.attr("id");
}, 
```

和：

```
_bindEvents: function() {
    this.tooltip(e);
} 
```

原型中的`elemental`永远不应该设置，因为每个实例的元素不同。

# python - 检查单词的第一个字母是否是元音

> ID：13379243
> 
> 赞同：10
> 
> 时间：2012-11-14T12:56:16.677
> 
> 标签：python, list, search

我正在尝试使用python编写一个函数来检查给定单词的第一个字母，例如“ball”是大写还是小写的元音。例如：

```
#here is a variable containing a word:
my_word = "Acrobat"

#letters in vowel as a list
the_vowel = ["a","e","i","o","u"] 
```

如何检查“Acrobat”中的第一个字母是列表中的元音之一？我还需要考虑它是大写还是小写？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-14T12:57:52.267

尝试`my_word[0].lower() in the_vowel`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-14T13:04:38.223

我不知道它是否比这里已经发布的答案更好，但你也可以这样做：

```
vowels = ('a','e','i','o','u','A','E','I','O','U')
myWord.startswith(vowels) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-14T13:00:01.700

这里有一些提示可以帮助您弄清楚。

从字符串中获取单个字母的下标字符串。

```
>>> 'abcd'[2]
'c' 
```

请注意，第一个字符是字符零，第二个字符是字符一，依此类推。

接下来要注意的是，大写字母不等于小写字母：

```
>>> 'a' == 'A'
False 
```

`upper`幸运的是，python 字符串具有`lower`更改字符串大小写的方法：

```
>>> 'abc'.upper()
'ABC'
>>> 'a' == 'A'.lower()
True 
```

要测试我们列表中的成员资格`in`：

```
>>> 3 in [1, 2, 3]
True
>>> 8 in [1, 2, 3]
False 
```

因此，为了解决您的问题，将下标绑定在一起以获得单个字母， `upper`/`lower`调整大小写，并使用`in`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-14T12:58:47.597

```
my_word = "Acrobat"
the_vowel = "aeiou"

if myword[0].lower() in the_vowel:
    print('1st letter is a vowel')
else:
    print('Not vowel') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-17T09:44:35.427

我的代码看起来像这样。

```
original = raw_input("Enter a word:")
word = original.lower()
first = word[0]
vowel = "aeiou"

if len(original) > 0 and original.isalpha():
    if first in vowel:
        print word
        print first
        print "vowel!"
    else:
        print word
        print first
        print "consonant 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-11T21:41:18.187

```
x = (input ("Enter any word: "))
vowel = "aeiouAEIOU"
if x[0] in vowel:
    print ("1st letter is vowel: ",x)       
else:
    print ("1st letter is consonant: ",x) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-13T16:56:47.493

这是我的做法，因为在将输入的单词存储为变量之前需要先检查它：

```
original = raw_input('Enter a word:')

if len(original) > 0 and original.isalpha():
    word = original.lower()
    first = word[0]
    if first in ['a','e','i','o','u']:
        print "vowel"
    else:
        print "consonant"
else:
    print 'empty' 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-05-24T11:37:12.700

这是 codecadmy.com 上练习的解决方案：

```
original = raw_input('Enter a word:')
word = original.lower()
first = word[0]
vowel = "aeiou"

if len(original) > 0 and original.isalpha():
   if first in vowel:      
       print 'vowel'
   else:   
       print 'consonant'
else:
   print 'empty' 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-10-13T04:36:36.690

变化：

```
if my_word[0] in ('a','e','i','o','u'):
   print(' Yes, the first letter is vowel ')
else:
   print(' No, the first letter is not vowel ') 
```

所以，这是找出第一个字母是元音还是不是元音的简单代码！如果您在 python 或 js 中有任何进一步的查询，请将其注释掉。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-06-27T08:19:58.207

```
import ast,sys
input_str = sys.stdin.read()

if input_str[0] in ['a','e','i','o','u','A','E','I','O','U']:
    print('YES')
else:
    print('NO') 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-10-17T10:02:07.413

将 the_vowel 定义为字典会比列表快吗？

```
the_vowel = {"a":1,"e":1,"i":1,"o":1,"u":1}
my_word[0].lower() in the_vowel 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-05-21T12:14:21.567

**反元音功能**

```
def anti_vowel(text):
    vowel = ["a","e","i","o","u"]
    new_text = ''
    for char in text:
        if char.lower() in vowel:
            continue
        else:
            new_text += char
    print new_text
    return new_text 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-07-31T21:02:19.870

```
x = raw_input("Enter a word: ")  
vowels=['a','e','i','o','u']
for vowel in vowels:
    if vowel in x:
        print "Vowels"
    else:
        print "No vowels" 
```

这将打印出 5 行，如果其中任何一行包含表示元音的行，则表示存在元音。我知道这不是最好的方法，但它确实有效。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-09-04T16:33:11.223

```
inp = input('Enter a name to check if it starts with vowel : ') *# Here we ask for a word*

vowel = ['A','E','I','O','U', 'a','e','i','o','u']   *# This is the list of all vowels*

if inp[0] in vowel:
    print('YES')        *# Here with the if statement we check if the first alphabet is a vowel (alphabet from the list vowel)*

else:
    print('NO')     *# Here we get the response as NO if the first alphabet is not a vowel* 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-09-21T17:05:34.893

让我们以更简单的方式来做

```
def check_vowel(s1):
       v=['a','e','i','o','u']
       for i in v:
            if s1[0].lower()==i:
                   return (f'{s1} start with Vowel word {i}')
       else:
        return (f" {s1} start with Consonants word {s1[0]}")
 print(check_vowel("orange")) 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2021-07-12T14:35:49.300

```
my_word = "Acrobat"
the_vowel = ["a", "e", "i", "o", "u"]

if my_word[0].lower() in the_vowel:
     print(my_word + " starts with a vowel")
else:
     print(my_word + " doesnt start with a vowel") 
```

# pthreads - pthread_getspecific 和互斥锁

> ID：13379248
> 
> 赞同：1
> 
> 时间：2012-11-14T12:56:24.657
> 
> 标签：pthreads, mutex, thread-local

我想为 strerror_r 调用创建线程本地缓冲区并编写我自己的线程安全 char * my_strerror(int) ，它将使用线程本地缓冲区并调用 strerror_r。

在阅读 R.Stevens 在 Unix 环境中的高级编程中关于 pthread_getspecific() 的示例时，我感到有差异 -**为什么在下面的示例中使用互斥锁？**

书中的例子：

```
#include <limits.h>
#include <string.h>
#include <pthread.h>
#include <stdlib.h>

静态 pthread_key_t 键；
静态 pthread_once_t init_done = PTHREAD_ONCE_INIT;
pthread_mutex_t env_mutex = PTHREAD_MUTEX_INITIALIZER;

extern char **环境；

静态空白
线程初始化（无效）
{
    pthread_key_create(&key, 免费);
}

字符 *
getenv（常量字符*名称）
{
    诠释 i, len;
    字符 *envbuf;

    pthread_once(&init_done, thread_init);
    pthread_mutex_lock(&env_mutex);
    envbuf = (char *)pthread_getspecific(key);
    如果（envbuf == NULL）{
        envbuf = malloc(ARG_MAX);
        如果（envbuf == NULL）{
            pthread_mutex_unlock(&env_mutex);
            返回（空）；
        }
        pthread_setspecific（键，envbuf）；
    }
    len = strlen（名称）；
    for (i = 0; environ[i] != NULL; i++) {
        if ((strncmp(name, environ[i], len) == 0) &&
          (环境[i][len] == '=')) {
            strcpy(envbuf, &environ[i][len+1]);
            pthread_mutex_unlock(&env_mutex);
            返回（环境缓冲区）；
        }
    }
    pthread_mutex_unlock(&env_mutex);
    返回（空）；
}

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T09:16:27.287

需要互斥锁来保护`environ`变量，例如 from `putenv`。但是，锁定调用的位置很糟糕，最好紧跟在`strlen`.

# c# - 从 C# 中的两个类添加到列表

> ID：13379252
> 
> 赞同：-7
> 
> 时间：2012-11-14T12:56:53.073
> 
> 标签：c#

我有一堂课的清单。我需要从另一个类填充列表。然后我需要访问列表中的一两个其他类。我不想使用静态列表。这是如何在 C# 中完成的。我已经尽力了。但并不成功。任何人都可以举个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:05:31.263

使用 get 我会建议

这是列表所在的位置

```
class A
{

    private list<Objects> myList = new list<Objects>();

    public list<Objects> getList()
    {
        return myList;
    }
} 
```

这是您要使用它的地方

```
class B
{
    private list<Objects> myNewList = new list<Objects>();
    A a = new A();

    public void setList()
    {
        myNewList = a.getlist();
    }
} 
```

像这样的东西。如果在不同的文件中，请记住相同的命名空间以便类相互了解

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T13:15:21.703

这听起来像是公共财产的工作。

```
// I'm assuming a List of strings, fix accordingly
public class A
{
    //Not autoimplemented to ensure it's always initialized
    private List<string> items = new List<string>();
    public List<string> Items
    {
        get { return items; }
        set { items = value; }
    }
}

public class AnyoneElse
{
     void someMethod()
     {
         A someVar = new A();

         someVar.Items.Add("This was added from outside");

         MessageBox.Show(someVar.Items.First());
     }
} 
```

应该适当地调整访问修饰符（它们主要取决于您的命名空间结构。此外，类和消费者是否在同一个程序集中？无论如何，这一点应该足够清楚）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T13:10:51.107

这是您需要的基本示例

```
public class YourOriginalClass
{
    /// <summary>
    /// The list you want to access
    /// </summary>
    public List<YourType> YourList { 
       get; 
       set; 
    }
}

// Here another class where you can use the list
public class YourSecondClass
{
    public void EditMyList()
    {
       YourOriginalClass test = new YourOriginalClass();
       test.YourList = new List<YourType>();
       // then you can populate it
    }
} 
```

# android - 使用 NotificationManager 的异常

> ID：13379255
> 
> 赞同：0
> 
> 时间：2012-11-14T12:57:06.997
> 
> 标签：android, android-alarms

我有一个应用程序，其中需要在数据库中存储的时间值上播放警报。当我删除语句“notification.defaults=Notification.DEFAULT_SOUND|Notification.DEFAULT_VIBRATE;”时，在该警报时间出现通知而不播放警报。当我插入上述语句时，警报会通过强制关闭我的应用程序来播放。我的警报类如下：

```
public class AlarmManager extends BroadcastReceiver {

sampleDatabase appdb;
SQLiteDatabase sqldb;
Cursor cursor;
int today,prev;
Intent in;

@Override
public void onReceive(Context context, Intent intent)
{
    NotificationManager manger = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.icon , "Yahrzeit" , System.currentTimeMillis());
    in = new Intent(context,FirstAppActivity.class);
    in.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    PendingIntent contentIntent = PendingIntent.getActivity(context, 0, in, 0);
    notification.setLatestEventInfo(context, "ALERT!!!!", "Time Over" , contentIntent);
    notification.defaults=Notification.DEFAULT_SOUND|Notification.DEFAULT_VIBRATE;
    notification.flags = Notification.FLAG_INSISTENT;
    appdb = new sampleDatabase(context);
    sqldb = appdb.getReadableDatabase();
    cursor = sqldb.query(sampleDatabase.TABLE_SEC, null, null, null, null, null, null);
    cursor.moveToFirst();
    Calendar cal = Calendar.getInstance();
    cal.set(Calendar.SECOND, 0);
    today = (int)(cal.getTimeInMillis()/1000);
    Log.e("Naga","Alarm");
    Log.e("today",Integer.toString(today));
    prev = 0;
    cursor.moveToPrevious();
    while(cursor.moveToNext())
    {
        int dbdate = cursor.getInt(cursor.getColumnIndex(sampleDatabase.ALARMSET));
        int id = cursor.getInt(cursor.getColumnIndex(sampleDatabase.ROW_ID));
        Log.e("dbdate",Integer.toString(dbdate));
        if((dbdate<=today)&&(dbdate>prev))
        {
            manger.cancelAll();
            manger.notify(1, notification);
            sqldb.execSQL("DELETE from " + sampleDatabase.TABLE + " where " + sampleDatabase.ROW_ID + "=" + id);
            sqldb.execSQL("DELETE from "+sampleDatabase.TABLE_SEC + " where " + sampleDatabase.ROW_ID + "=" + id);

        }
        prev = dbdate;
    }
    cursor.close();
    sqldb.close();

} 
```

我的logcat视图是这样的（我已经插入了振动权限，然后也出现了这个错误。）：

```
 11-14 18:09:18.000: ERROR/AndroidRuntime(757): FATAL EXCEPTION: main
 11-14 18:09:18.000: ERROR/AndroidRuntime(757): java.lang.RuntimeException: Unable to  start receiver com.nagainfo.firstAp.AlarmManager: java.lang.SecurityException: Requires VIBRATE permission
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2821)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at android.app.ActivityThread.access$3200(ActivityThread.java:125)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at android.os.Handler.dispatchMessage(Handler.java:99)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at android.os.Looper.loop(Looper.java:123)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at android.app.ActivityThread.main(ActivityThread.java:4627)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at java.lang.reflect.Method.invokeNative(Native Method)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at java.lang.reflect.Method.invoke(Method.java:521)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at dalvik.system.NativeStart.main(Native Method)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757): Caused by: java.lang.SecurityException: Requires VIBRATE permission
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at android.os.Parcel.readException(Parcel.java:1247)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at android.os.Parcel.readException(Parcel.java:1235)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at android.app.INotificationManager$Stub$Proxy.enqueueNotificationWithTag(INotificationManager.java:274)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at android.app.NotificationManager.notify(NotificationManager.java:110)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at android.app.NotificationManager.notify(NotificationManager.java:90)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at com.nagainfo.firstAp.AlarmManager.onReceive(AlarmManager.java:52)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2810)
 11-14 18:09:18.000: ERROR/AndroidRuntime(757):     ... 10 more 
```

请帮助我。我的清单是：

```
<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".FirstAppActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
            <activity android:name=".addtable"
                      android:label="@string/app_name">
              </activity>
              <activity android:name=".showTime"
                        android:label="@string/app_name">
              </activity>
              <activity android:name=".edittable"
                        android:label="@string/app_name">
              </activity>
               <receiver android:name="AlarmManager">
                </receiver>
              <uses-permission android:name="android.permission.READ_CALENDAR"/>
              <uses-permission android:name="com.android.alarm.permission.SET_ALARM"/>
              <uses-permission android:name="android.permission.VIBRATE"/>
</application> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T13:00:19.133

```
Caused by: java.lang.SecurityException: Requires VIBRATE permission 
```

将 VIBRATE 权限添加到您的清单。

```
<uses-permission android:name="android.permission.VIBRATE" /> 
```

您已将此标签放置在您的应用程序标签中。它应该在应用程序标签之外。像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"

    package="name.xml"
    android:versionCode="24"
    android:versionName="3.4" >

    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.READ_CALENDAR"/>
    <uses-permission android:name="com.android.alarm.permission.SET_ALARM"/>
    <uses-permission android:name="android.permission.VIBRATE"/>

    <application android:icon="@drawable/icon" android:label="@string/app_name">

        <activity android:name=".FirstAppActivity"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
               <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

       <activity android:name=".addtable"
             android:label="@string/app_name">
        </activity>

        <activity android:name=".showTime"
               android:label="@string/app_name">
        </activity>

        <activity android:name=".edittable"
               android:label="@string/app_name">
        </activity>

        <receiver android:name="AlarmManager">
        </receiver>

    </application> 
```

# javascript - 如何获取我们在谷歌地图中丢下街景小人的点的坐标

> ID：13379256
> 
> 赞同：1
> 
> 时间：2012-11-14T12:57:12.210
> 
> 标签：javascript, jquery, google-maps, google-street-view

我在这里有一个演示[http://jsfiddle.net/coderslay/vQVTq/](http://jsfiddle.net/coderslay/vQVTq/)

**js**如下_

```
function initialize() {
    var fenway = new google.maps.LatLng(42.345573,-71.098326);
    var panoramaOptions = {
        enableCloseButton : true,
        visible: false
    };
    var panorama = new  google.maps.StreetViewPanorama(document.getElementById("pano"), panoramaOptions);
    var mapOptions = {
      center: fenway,
      zoom: 14,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      streetView : panorama
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    google.maps.event.addListener(panorama, "visible_changed", function() {
        if (panorama.getVisible() && $("#pano").is(':visible')){
            //moving the pegman around the map
        }else if(panorama.getVisible() && $("#pano").is(':hidden')){
            $("#pano").show();
            $("#map_canvas").removeClass('bigmap');
            $("#map_canvas").addClass('minimap');
        }
        google.maps.event.addListener(panorama, "closeclick", function() {
            $("#pano").hide();  
            $("#map_canvas").removeClass('minimap');
            $("#map_canvas").addClass('bigmap');         
        });
    }); 
```

**CSS**在这里

```
#container {
width:500px;
height: 500px ;
position: relative;
}

#map_canvas, 
#pano {
    position: absolute;
    top: 0;
    left: 0;
}

#map_canvas {
    z-index: 10;
}

.bigmap{
    width:100%;
    height:100%;
}

.minimap{
    width:50%;
    height:100%;
}​ 
```

当我将街景小人拖到地图上的任何一点时，地图就会分成两部分。一个是普通视图，另一个是街景。现在我想在法线贴图上显示街景小人掉落的位置。如何获取该特定点的坐标。这样我就可以平移到那个位置。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:22:05.913

我认为您可以在 StreetViewPanorama 类上使用 getPosition() 方法。

```
google.maps.event.addListener(panorama, "visible_changed", function() {
  map.setCenter(panorama.getPosition());
}); 
```

# php - PHP foreach 循环会减慢实时仪表板的速度。我有哪些选择？

> ID：13379257
> 
> 赞同：2
> 
> 时间：2012-11-14T12:57:21.410
> 
> 标签：php, xml, cron

我正在使用 PHP 从呼叫中心获取有关 80 个用户的可用性数据。我希望每 5 秒向 CallCenter 查询每个用户的状态/可用性，并将结果显示在仪表板上。

CallCenter 一次只能通过 URL 查询一个用户，并且用户名在 url 中（因此 url 不是恒定的）。CallCenter 的答案在 XML 页面中。我一直在使用**fopen()**来读取 url / XML 的内容，因为这始终是随机生成的 XML 名称，因此查询 url 指向一个目录，而不是确切的 xml url。

我的所有东西都使用**foreach**循环，其中唯一的 url 用于 USER001，读取 XML 页面的内容并更新变量。演示代码：

**用户数组：**

```
$users = array( 
        "username" => array("fullname" => "Full Name",
                            "status" => ""  
                            ),
        "username" => array("fullname" => "Full Name",
                            "status" => "")
                ); 
```

**Foreach 循环：**

```
foreach($users as $username => $userstatus) {
$url = 'http://'.$username.':PasswordForUser@serveraddress.com:80/callcenter/'.$username.'/services/callcenter/';
$get = fopen($url, "r");
    if ($get) {
        while (!feof($get)) {
            $status = fgets($get, 4096);
        }
        fclose($get);
    }
if(strpos($status, 'Available')) { $users[$username]["status"] = "Available"; } else { $users[$username]["status"] = "Offline"; } 
```

}

**问题：**
我有一个 jquery 脚本，它每 5 秒刷新一次仪表板，因此每 5 秒向 CallCenter 服务器查询所有用户。

这可行，但查询实际上需要 1 多分钟才能完成循环并将所有结果返回到仪表板页面。CallCenter 用户可以看到在给定时间有多少用户/代理可用，以便他们知道是否有足够的代理可用以处理 CallCenter 负载，这一点至关重要。

**可能的解决方案：**
什么是我的案例的最佳解决方案？

我想到的是为每个用户创建一个 PHP 页面。有一个 CRONJOB，每 x 小时运行一次页面（刷新），页面上有一个脚本，每 5 秒循环通过 XML 查询到 CallCenter。在每个循环结束时（每 5 秒），用户状态被发送到并更新收集器页面。每个用户页面将结果发送到收集器页面，然后仪表板页面每 5 秒将数据获取到收集器页面。

**这是一个“聪明”的解决方案吗？你会推荐什么，你会如何编码？**
（我是 PHP 初学者）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:41:09.427

首次使用

```
echo microtime(true) 
```

在 GET 查询之前和之后确定您从呼叫中心获得的响应速度 - 这将使您了解您的最大收益是否来自 (A) 查询数量或 (B) 单个查询的速度询问。

如果您无法让呼叫中心更改他们的数据流程，您也将不得不走这条路线，如下所述：

**线程化你的 ajax/jQuery 调用。**

当您的页面刷新时 - 执行 4-6 次 ajax 调用，将线程 ID 传递给脚本，然后溢出用户数据收集，即：每个线程 80 / 4 = 20 个用户（大多数浏览器只能处理几个 http 请求，所以不要创建太多线程，因为它们基本上会堆叠并等待一个完成 - 这不是你想要的） - 一旦返回数据，你可以简单的 jquery 写入一个 id 即：

```
<div id="threadresults1"></div>
<div id="threadresults2"></div>
<div id="threadresults3"></div>
... 
```

希望这很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:32:40.217

我必须完全同意@Alexandru Mihai 在他上面的评论中的观点。

不要在 php 中运行 foreach 循环，而是将其放到 jQuery 级别，并将您的 php 脚本仅用作一对一代理。这将占用更多资源，但同时您将能够同时运行无限数量的线程/读取，因为 JS 依赖于回调，而 php 一次只需要处理一个名称。

所以即使你的代理脚本落后了，你仍然会在 js 级别上得到其他操作员的有效响应，因此整个过程会感觉流畅且响应迅速。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T13:35:58.133

由于我们在评论中建立了用户列表是静态定义的，并且不会以某种方式查询，因此您可以让页面了解用户列表。

然后你可以为每个用户异步查询一个php页面：queryPage.php?username=john

在该页面中，您只需查询该特定用户的呼叫中心。因此，为所有 60 个用户设置 60 个异步请求而不是仅 1 个应该对您的情况有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T16:15:51.290

只是想感谢所有回复的用户。我不认为这种方法可以很好地解决我的问题，所以我按照我在最初帖子中的建议结束了。我创建了多个页面，每 1 分钟运行一个 cronjob 并收集数据。然后其他页面每 x 秒获取一次数据。

# c# - 根据唯一性对列表进行分组

> ID：13379258
> 
> 赞同：6
> 
> 时间：2012-11-14T12:57:24.523
> 
> 标签：c#, linq, list, lambda

这个问题是[Convert List<T> to Dictionary with strategy的略微修改版本](https://stackoverflow.com/questions/13377885/convert-listt-to-dictionary-with-strategy/13378005#13378005)

我有 List < DTO >，其中 DTO 类看起来像这样，

```
private class DTO
    {
        public string Name { get; set; }
        public int Count { get; set; }
    } 
```

我创建对象并将其添加到列表中。

```
var dto1 = new DTO { Name = "test", Count = 2 };
var dto2 = new DTO { Name = "test", Count = 3 };
var dtoCollection = new List<DTO> {dto1, dto2}; 
```

现在我的要求是我需要从 dtoCollection 创建一个 List，其中 Name 字段在整个 List 中应该是唯一的。

例如，如果您将上述 dtoCollection 转换为所需的 List from，则结果列表应如下所示：

列表 <DTO> 计数应为 1；

列表中的对象应该是单个 DTO，**名称**为“test”，**计数**为 5

其中 Count 是通过对 Name 字段相同的所有 DTO 中的 Count 字段求和获得的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T13:00:16.030

尝试：

```
var result = dtoCollection.GroupBy(dto => dto.Name)
                          .Select(group => new DTO 
                                           {
                                               Name = group.Key,
                                               Count = group.Sum(dto => dto.Count) 
                                           })
                          .ToList(); 
```

这通过按名称对 DTO 进行分组，然后从每个组中提取一个新的 DTO，该 DTO 由组的键和计数设置为其成员计数的总和。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T13:00:59.923

```
var newList = dtoCollection.GroupBy(d => d.Name)
             .Select(g => new DTO(){ Name=g.Key, Count=g.Select(d => d.Count).Sum()})
             .ToList(); 
```

# c# - 遍历类 Tree 并转换为需要的类型

> ID：13379262
> 
> 赞同：0
> 
> 时间：2012-11-14T12:57:37.587
> 
> 标签：c#, class, traversal

我有一个类似的课程：

```
public class Channel
{
   public string Title {get;set;}
   public Guid Guid {get;set;}
   public List<Channel> Children {get;set;}
   // a lot more properties here
} 
```

我需要将此类树转换为相同的树结构，但具有较少的属性（以及不同的属性名称），即：

```
public class miniChannel
{
    public string title {get;set;}
    public string key {get;set;}
    public List<miniChannel> children {get;set;}
    // ALL THE OTHER PROPERTIES ARE NOT NEEDED
} 
```

我在想用以下函数遍历树会很容易：

```
public IEnumerable<MyCms.Content.Channels.Channel> Traverse(MyCms.Content.Channels.Channel channel)
{
    yield return channel;
    foreach (MyCms.Content.Channels.Channel aLocalRoot in channel.Children)
    {
        foreach (MyCms.Content.Channels.Channel aNode in Traverse(aLocalRoot))
        {
            yield return aNode;
        }
    }
} 
```

我应该如何更改函数以便我可以返回一个`IEnumerable<miniChannel>` ，或者，是否有其他方法可以做到这一点？请注意，我无法更改源类`Channel`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:00:49.573

我只是递归地将树转换为新类型：

```
miniChannel Convert(Channel ch)
{
    return new miniChannel
    {
        title = ch.Title,
        key = ch.Guid.ToString(),
        children = ch.Children.Select(Convert).ToList()
    };
} 
```

# xpages - REST 服务 - 性能不佳问题

> ID：13379274
> 
> 赞同：0
> 
> 时间：2012-11-14T12:58:17.690
> 
> 标签：xpages

我在 XPage (XAgent) 中使用 REST 服务控件，但遇到性能缓慢的问题。

代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
    xmlns:xe="http://www.ibm.com/xsp/coreex">
    <xe:restService id="byNameFirst" pathInfo="Read">
        <xe:this.service>
            <xe:viewItemFileService var="entry" defaultColumns="true"
                count="3000">
                <xe:this.viewName><![CDATA[#{javascript:context.getUrl().getParameter("view")}]]></xe:this.viewName>
            </xe:viewItemFileService>
        </xe:this.service>
    </xe:restService>
</xp:view> 
```

XAgent 使用以下命令调用：server/dbpath/xRestService.xsp/Read?view=lookupREST

服务器是带有 UP1 的 Domino 8.5.3 视图 (lookupREST) 是 FTIndexed 并且有 15 个非计算列。我已经尝试设置计数（返回的行数）。

*   设置 count 为 10，数据在 60ms 内返回（平均来自 20 个请求）
*   将 count 设置为 100，数据在 2s 内返回（平均来自 20 个请求）（！）
*   设置count为1000，2s内返回数据（平均20次请求）
*   将计数设置为 3000，数据在 5.5 秒内返回（平均来自 20 个请求）（！）

结果：返回 10 很快，100 很慢，1000 很慢，3000 很慢..

我希望它更快。我应该期望比这更快的响应吗？我已经用其他 xpage、表单、页面等测试了整体服务器 http 性能，我觉得它很好。

我还使用 viewJsonService 进行了测试。我觉得比较慢。使用 3000 作为计数平均约 10 秒。

那么，问题是我应该期望比这更快的响应时间吗？这种缓慢的性能可能是什么原因？还是按预期执行？

任何信息/提示将不胜感激微笑

问候， 皮特·克杰伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:58:45.080

您需要先将其与服务器的基线进行比较。由于您使用的是视图，因此您可以使用

```
http://yourserver/yourdb.nsf/viewName?ReadViewEntries&OutputFormat=JSON&Count=1000 
```

这为您提供了原始服务器性能（您需要调整服务器设置以一次获得超过 1000 个）。如果结果相差不大，则观察您的服务器 I/O (DiskQueue) 以确定瓶颈

# windows - 在 Windows 8 中从 Metro 应用程序触发关机/重启的最佳方式

> ID：13379276
> 
> 赞同：1
> 
> 时间：2012-11-14T12:58:19.683
> 
> 标签：windows, windows-8, microsoft-metro

我刚刚开始使用 Windows 8 应用程序开发。作为第一个项目，我创建了一个应该能够关闭、重新启动从计算机注销用户的 Metro 应用程序。界面全部完成，但我不知道如何关闭它。是否可以使用以下内容，如果可以，您有示例吗？

```
%windir%\System32\shutdown.exe /s /t 0 
```

还是我可以调用的 API 中有什么东西？如果不能，我是否可以在项目中包含一个 .bat 文件并调用它来启动关机？

非常感谢

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:13:57.017

据我所知，这是不可能的，使用您上面概述的方法当然也不可能。Windows 应用商店应用程序（以前称为“Metro”的应用程序）在高度沙盒环境中运行，因此您无法访问 Windows 目录来调用`shutdown.exe`. 现有的安全模型（应该）使得几乎不可能完成诸如重启或关机操作之类的任务——也就是说（并且应该）坚定地由用户而不是应用程序来决定。

# sql - 聚合函数的linq to SQL组合

> ID：13379279
> 
> 赞同：2
> 
> 时间：2012-11-14T12:58:23.870
> 
> 标签：sql, linq, count, distinct

有没有办法简化它并让它更快？在 SQL 中，我在同一个查询中使用 count(*) 和 count(distinct)，这给了我更快的结果

谢谢一堆。

```
int numberOfUsers = (from u in db.UseLogs
                     where u.DocID == docID 
                        && u.LogDate >= fromDate 
                        && u.LogDate <= to
                     select u.UserID).Distinct().Count();

int numberOfVisits = (from u in db.UseLogs
                      where u.DocID == docID 
                         && u.LogDate >= fromDate 
                         && u.LogDate <= to
                      select u).Count(); 
```

**结论**

LINQ 中没有 Count(Distinct)。并非每条 SQL 语句都可以转换为 LINQ。

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:57:09.573

这是你要找的吗？

```
from u in db.UseLogs
where u.DocId == docId && u.LogDate >= fromDate && u.LogDate <= to
group u by true into g
select new
{
    Count = g.Count(),
    DistinctUserCount = g.Select(x => x.UserId).Distinct().Count()
} 
```

您将需要检查它是否实际上比运行两个查询更快，或者性能增益是否值得失去可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:36:24.417

不完全是您想要实现的目标，但可能同样快：

```
var query = 
    from u in db.UseLogs
    where u.DocId == docId && u.LogDate >= fromDate && u.LogDate <= to
    group u by u.UserID into g
    select new
    {
        Visits = g.Count()
    };

    int numberOfUsers  = query.Count();
    int numberOfVisits = query.Sum(q=>q.Visits); 
```

它只执行一次 SQL 并在内存中进行求和。

# sockets - 使用 BSD 套接字对 IPv6 进行分段

> ID：13379290
> 
> 赞同：0
> 
> 时间：2012-11-14T12:59:21.937
> 
> 标签：sockets, networking, ipv6, fragmentation

我正在为 IPv4 和 v6 编写 PMTUD 应用程序。我在 Ubuntu 12.04 上这样做，但我想让它尽可能独立于操作系统，这就是我偶然发现问题的地方。

默认情况下，IPv6 数据包会被发送方分段，我不知道如何关闭此行为。我找到了一些套接字选项，例如 IPV6_MTU_DISCOVER 和 IPV6_DONTFRAG，但我在 linux/in6.h 下找到了这些选项，这无济于事，因为我使用的是 netinet 标头系列，而且它们都不是在 netinet/in.h 下 - 尽管 IPV6_MTU_DISCOVER 应该是有[据此](http://linux.die.net/man/7/ipv6)。我错过了什么吗？

编辑：让我澄清一下。我有一个套接字（AF_INET6，SOCK_RAW，IPPROTO_ICMPV6），我希望通过它发送一个这样大小的 ICMPv6 数据包，我会收到一个回复​​，告诉我它太大了，从那个回复中我会得到路径 MTU。但是，要真正获得整个路径的 MTU，我还必须考虑传出设备的 MTU。

我正在使用 miredo 来隧道 IPv6，它具有一组最小大小的 MTU，例如 1280。发送大于 1280 的数据包将导致所述数据包的碎片（我在 Wireshark 中观察到这种行为），但我需要套接字拒绝发送数据包并通知我，而不是将其分段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T15:53:26.720

您不需要自己执行此操作。MTU 发现应该自动发生。这样做的副作用是，路径上的所有设备都必须允许 ICMP V6 数据包通过。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-15T04:38:06.427

> 默认情况下，发送方将 IPv6 数据包分段

不会。默认情况下，TCP 数据包会被发送方和中间路由器分段。

> ，我不知道如何关闭此行为。

您*无法*将其关闭。您当然可以尝试，但唯一的结果将是无法交付。如果路由器需要对数据包进行分段并且您不允许它，它将改为丢弃它。但是，发送主机也需要分段，以适应路径 MTU，您无法停止。如果您正确编写接收器，即期望它正在读取字节流而不是离散消息，那么数据包是否在传输过程中被分段应该对您没有影响。

# hadoop - 在将平面文件中的数据加载到配置单元表中时获取空值

> ID：13379299
> 
> 赞同：18
> 
> 时间：2012-11-14T12:59:48.710
> 
> 标签：hadoop, null, hive, hdfs, flat-file

在将平面文件中的数据加载到配置单元表中时，我得到了空值。
我的表结构是这样的：

```
hive> create table test_hive (id int,value string); 
```

我的平面文件是这样的：input.txt

```
1   a
2   b
3   c
4   d
5   e
6   F
7   G
8   j 
```

当我运行以下命令时，我得到空值：

```
hive> LOAD DATA LOCAL INPATH '/home/hduser/input.txt' OVERWRITE INTO TABLE test_hive;
hive> select * from test_hive;
OK<br>
NULL    NULL
NULL    NULL
NULL    NULL
NULL    NULL
NULL    NULL
NULL    NULL
NULL    NULL
NULL    NULL 
```

**截屏：**

```
hive> create table test_hive (id int,value string);
OK
Time taken: 4.97 seconds
hive> show tables;
OK
test_hive
Time taken: 0.124 seconds
hive> LOAD DATA LOCAL INPATH '/home/hduser/input2.txt' OVERWRITE INTO TABLE test_hive;
Copying data from file:/home/hduser/input2.txt
Copying file: file:/home/hduser/input2.txt
Loading data to table default.test_hive
Deleted hdfs://hydhtc227141d:54310/app/hive/warehouse/test_hive
OK
Time taken: 0.572 seconds
hive> select * from test_hive;
OK
NULL    NULL
NULL    NULL
NULL    NULL
NULL    NULL
NULL    NULL
NULL    NULL
NULL    NULL
NULL    NULL
Time taken: 0.182 seconds 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-15T05:54:41.923

Hive 中的默认字段终止符是 ^A。您需要在 create table 语句中明确提及您正在使用不同的字段分隔符。

与 Lorand Bending 在评论中指出的类似，使用：

```
CREATE TABLE test_hive(id INT, value STRING) 
ROW FORMAT DELIMITED FIELDS TERMINATED BY ' '; 
```

您无需指定位置，因为您正在创建托管表（而不是外部表）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-25T17:29:55.600

您面临的问题是因为在您的数据中，字段由“”分隔，并且在创建表时您没有提及字段分隔符。因此，如果您在创建 hive 表时未提及字段分隔符，默认情况下 hive 将 ^A 视为分隔符。

因此，要解决您的问题，您可以重新创建提及以下语法的表，它会起作用。

`CREATE TABLE test_hive(id INT, value STRING) ROW FORMAT DELIMITED FIELDS TERMINATED BY ' ';`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-24T16:07:49.433

解决方案非常简单。表格没有以正确的方式创建。

您的问题或任何其他问题的简单解决方案是知道如何加载数据。

> CREATE TABLE [IF NOT EXIST] mytableName(id int,value string)
> 
> 行格式分隔
> 
> 由“/t”终止的字段
> 
> 存储为文本文件；

现在让我解释一下代码：

1.  第一行创建您的表格。[IF NOT EXIST] 是可选的，它告诉表是否存在不要覆盖它。它更多的是安全措施。

2.  第二行 在表级别为结构化字段指定分隔符。

3.  第三项 您可以包含任何单个字符，但默认为“\001”。'/t' 用于制表符空间：在您的情况下为 '|' 用于彼此相邻并由 | 分隔的数据 ' ' 代表一个字符空间。等等...

4.  第四行：指定要存储数据的文件类型。该文件可以是 TEXTFILE、SEQUENCEFILE、RCFILE 或 BINARY SEQUENCEFILE。或者，可以将数据的存储方式指定为 Java 输入和输出类。

本地加载时：

> LOCD DATA LOCAL INPATH '/your/data/path.csv' [OVERWRITE] INTO TABLE myTableName;

始终尝试通过简单的 select* 语句检查您的数据。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-25T09:58:22.520

Hive 的默认记录和字段分隔符列表：

1.  \n

2.  ^一个

3.  ^B

4.  ^C

按 ^V^A 可以在 Vim 中插入 ^A。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-10T10:50:02.867

元素是用空格还是制表符分隔？让它的标签按照以下步骤操作。如果分隔空间使用 ' ' 而不是 '\t' 好的。

```
hive> CREATE TABLE test_hive(id INT, value STRING) row format
   delimited fields terminated by '\t' line formated by '\n' stored as filename; 
```

比你必须输入

```
hive> LOAD DATA LOCAL INPATH '/home/hduser/input.txt' OVERWRITE INTO TABLE test_hive;

hive> select * from test_hive; 
```

现在您将获得准确的预期输出“文件名”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-07T09:43:19.957

请检查数据集日期列，它应遵循日期格式 yyyy-mm-dd 如果字符串的格式为“yyyy-mm-dd”，则返回对应于该年/月/日的日期值。如果字符串值与此格式不匹配，则返回 NULL。 [Hive 官方文档](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Types#LanguageManualTypes-date)

# r - R中的宏变量

> ID：13379301
> 
> 赞同：0
> 
> 时间：2012-11-14T12:33:41.530
> 
> 标签：r, data-management

我的表中有 300 多个变量。我只想选择其中几个变量来运行许多程序。Lm()、glm() 等..我有超过 10 个程序，我每次都需要运行这些变量。这些少数变量每次都可能发生变化，这取决于输出是否令人满意。

我想知道如何在 R 中做到这一点。任何帮助，或者即使有人可以指向以前的线程都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:50:01.533

如果您只想选择几个变量，而不是整个数据框（或 SQL 用语中的表），一个简单的方法是在运行您的程序集之前使用“子集”函数对数据框进行子集化，例如

```
newdata <- subset(mydata, select=c(ID, Weight)) 
```

这只会从“mydata”数据框中拉出 2 个变量（ID 和权重）。

然后，您可以在每次变量更改时更改此语句。

顺便说一句：宏变量是一个 SAS 术语，你是从 SAS 转换一些东西吗？

# android - 滚动视图在 Android 中不起作用

> ID：13379307
> 
> 赞同：4
> 
> 时间：2012-11-14T13:00:19.617
> 
> 标签：android, android-layout, layout, scrollview

我的布局中的 ScrollView 不起作用。这个问题可能很愚蠢。我已经浪费了一个小时。

这是我的 XML 布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="1100dp"
    android:layout_height="1500dp"
    android:fillViewport="true"
    android:background="#f7f7f7"
    android:layout_weight="1"
    android:orientation="vertical"
    android:padding="25dp" >

<LinearLayout
    android:id="@+id/container"
    android:layout_width="1100dp"
    android:layout_height="fill_parent" 
    android:orientation="vertical">

    <TextView
        android:id="@+id/account_heading"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="10dp"
        android:text="ACCOUNT"
        android:textColor="#f44b3b"
        android:textSize="18dp" />

    <LinearLayout
        android:layout_width="900dp"
        android:layout_height="2dp"
        android:layout_marginBottom="10dp"
        android:background="#f44b3b" >
    </LinearLayout>

    <RelativeLayout
        android:layout_width="1100dp"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dp"
            android:layout_marginLeft="10dp"
            android:text="Email"
            android:textColor="#333333"
            android:textSize="22dp" />

        <EditText
            android:id="@+id/email"
            android:layout_width="500dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="300dp"
            android:layout_toRightOf="@+id/textView1"
            android:ems="10"
            android:inputType="textEmailAddress" >
        </EditText>
    </RelativeLayout>

    <LinearLayout
        android:layout_width="900dp"
        android:layout_height="1dp"
        android:layout_marginBottom="10dp"
        android:background="#c6c6c6" >
    </LinearLayout>

    <RelativeLayout
        android:layout_width="1100dp"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/change_password"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dp"
            android:layout_marginLeft="10dp"
            android:text="Change Password"
            android:textColor="#333333"
            android:textSize="22dp" />

        <EditText
            android:id="@+id/change_password_et"
            android:layout_width="500dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="170dp"
            android:layout_toRightOf="@+id/change_password"
            android:ems="10"
            android:inputType="text" >
        </EditText>
    </RelativeLayout>

    <LinearLayout
        android:layout_width="900dp"
        android:layout_height="1dp"
        android:layout_marginBottom="10dp"
        android:background="#c6c6c6" >
    </LinearLayout>

    <RelativeLayout
        android:layout_width="1100dp"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/facebook"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dp"
            android:layout_marginLeft="10dp"
            android:text="Facebook"
            android:textColor="#333333"
            android:textSize="22dp" />

        <EditText
            android:id="@+id/facebook_et"
            android:layout_width="500dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="255dp"
            android:layout_toRightOf="@+id/facebook"
            android:ems="10"
            android:inputType="text" >
        </EditText>
    </RelativeLayout>

    <LinearLayout
        android:layout_width="900dp"
        android:layout_height="1dp"
        android:layout_marginBottom="10dp"
        android:background="#c6c6c6" >
    </LinearLayout>

    <RelativeLayout
        android:layout_width="1100dp"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/twitter"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dp"
            android:layout_marginLeft="10dp"
            android:text="Twitter"
            android:textColor="#333333"
            android:textSize="22dp" />

        <EditText
            android:id="@+id/twitter_et"
            android:layout_width="500dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="280dp"
            android:layout_toRightOf="@+id/twitter"
            android:ems="10"
            android:inputType="text" >
        </EditText>
    </RelativeLayout>

    <LinearLayout
        android:layout_width="900dp"
        android:layout_height="1dp"
        android:layout_marginBottom="10dp"
        android:background="#c6c6c6" >
    </LinearLayout>

    <TextView
        android:id="@+id/profile_heading"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="10dp"
        android:text="Heading"
        android:textColor="#f44b3b"
        android:textSize="18dp" />

    <LinearLayout
        android:layout_width="900dp"
        android:layout_height="2dp"
        android:layout_marginBottom="10dp"
        android:background="#f44b3b" >
    </LinearLayout>

    <RelativeLayout
        android:layout_width="1100dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp" >

        <TextView
            android:id="@+id/Gender"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dp"
            android:layout_marginLeft="10dp"
            android:text="Gender"
            android:textColor="#333333"
            android:textSize="22dp" />

        <Spinner
            android:id="@+id/gender_spinner"
            android:layout_width="500dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="280dp"
            android:layout_toRightOf="@+id/Gender" />
    </RelativeLayout>

    <LinearLayout
        android:layout_width="900dp"
        android:layout_height="1dp"
        android:layout_marginBottom="10dp"
        android:background="#c6c6c6" >
    </LinearLayout>

    <RelativeLayout
        android:layout_width="1100dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp" >

        <TextView
            android:id="@+id/Birthday"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="170dp"
            android:text="Birthday"
            android:textColor="#333333"
            android:textSize="22dp" />

        <Button
            android:id="@+id/setDate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/Birthday"
            android:onClick="showDatePickerDialog"
            android:text="Pick date" />

        <EditText
            android:id="@+id/birthdayet"
            android:layout_width="500dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="100dp"
            android:layout_toRightOf="@+id/Birthday"
            android:ems="10"
            android:inputType="text"
            android:text="Birthday"
            android:textColor="#f44b3b"
            android:textSize="18dp" >
        </EditText>
    </RelativeLayout>

    <LinearLayout
        android:layout_width="900dp"
        android:layout_height="1dp"
        android:layout_marginBottom="10dp"
        android:background="#c6c6c6" >
    </LinearLayout>

    <RelativeLayout
        android:layout_width="1100dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp" >

        <TextView
            android:id="@+id/zipcode"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dp"
            android:layout_marginLeft="10dp"
            android:text="Zip Code"
            android:textColor="#333333"
            android:textSize="22dp" />

        <EditText
            android:id="@+id/zip"
            android:layout_width="500dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="270dp"
            android:layout_toRightOf="@+id/zipcode"
            android:ems="10"
            android:inputType="number" >
        </EditText>
    </RelativeLayout>

    <LinearLayout
        android:layout_width="900dp"
        android:layout_height="1dp"
        android:layout_marginBottom="10dp"
        android:background="#c6c6c6" >
    </LinearLayout>

    <TextView
        android:id="@+id/heading"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="10dp"
        android:text="COOL"
        android:textColor="#f44b3b"
        android:textSize="18dp" />

    <LinearLayout
        android:layout_width="900dp"
        android:layout_height="2dp"
        android:layout_marginBottom="8dp"
        android:background="#f44b3b" >
    </LinearLayout>      

</LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:03:53.277

去除那个

```
android:layout_weight="1"

android:orientation="vertical" 
```

从滚动视图。和`fill_parent` 布局高度..

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="1100dp"
    android:layout_height="fill_parent"
    android:fillViewport="true"
    android:background="#f7f7f7"
    android:padding="25dp" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:13:46.903

在 ScrollView 属性中替换了这个

```
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

并且也被移除了

```
android:layout_weight ="1" 
```

这工作得很好。感谢@TechEnd

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T14:01:42.270

只需在 Scrollview 属性中进行更改，如下所示：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:fillViewport="true"
android:background="#f7f7f7"
android:layout_weight="1"
android:orientation="vertical"
android:padding="25dp" > 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-13T08:37:51.370

从此活动的清单中删除：`"android:windowSoftInputMode="adjustPan"`

它肯定会起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T13:03:16.543

你需要关闭你的

`< ScrollView> </ScrollView>`

我没有看到它，或者你只是忘记发布它？？？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-26T11:43:08.297

```
 <ScrollView
                android:layout_width="match_parent"
                android:layout_height="40dp"
                android:fadeScrollbars="false"
                android:scrollbarStyle="insideInset"
                android:scrollbarThumbVertical="@drawable/scrollview_thumb"
                android:scrollbarTrackVertical="@drawable/custom_scroll_style">
            <EditText
                android:id="@+id/input_customer_email"
                android:layout_width="match_parent"
                android:layout_height="40dp"
                android:clickable="false"
                android:longClickable="false"
                android:focusable="false"
                android:inputType="textMultiLine"
                android:hint="Customer's Email Address" />
            </ScrollView> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-21T14:38:43.517

在我的例子中，ListView 将持有一个适配器，用于为垂直堆栈的按钮充气。我已经手动计算并分配了 ListView 高度（以所有按钮都展开的方式）。我遇到的滚动问题是，在 ScrollView 内使用 ListView （滚动发生的地方，如果我在 ListView 的边界之外单击并尝试滚动。而滚动不会发生，如果我尝试通过在 ListView 的边界内单击来滚动） . 我浏览了多个 stackoverflow 答案/android 文档，还尝试了一些自定义 ListView/LinearLayout（带适配器），但最终没有任何效果。然后，我理解了逻辑并使 ListView 具有 NestedScrolling 实现，它就像魅力一样工作。

我刚刚对我的代码进行了这个更改

```
myListView.setNestedScrollingEnabled(true); 
```

# ios - 界面旋转适用于 iOS 6，但不适用于 iOS5

> ID：13379310
> 
> 赞同：0
> 
> 时间：2012-11-14T13:00:24.780
> 
> 标签：ios, uiview, rotation, ios6, uitabbarcontroller

我的应用轮换在装有 iOS6 的 iPad 3 和 iPad 2 上正常工作，但在装有 iOS5 的 iPad1 上却没有。

我正在使用标签栏控制器和 5 视图控制器。在每个视图控制器上，我都有以下代码：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration{
if(self.interfaceOrientation == UIDeviceOrientationPortrait||self.interfaceOrientation == UIDeviceOrientationPortraitUpsideDown){
    self.view=self.VerticaleAppunti;
    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"FONDO_VERT.jpg"]];
}
if(self.interfaceOrientation == UIDeviceOrientationLandscapeLeft||self.interfaceOrientation == UIDeviceOrientationLandscapeRight){
    self.view=self.OrizzontaleAppunti;
    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"FONDO.jpg"]];
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:58:49.967

您可以尝试在 ios 5 中实现此方法以更改方向：

```
 - (BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
   //support for all orientation change 
    return YES;
} 
```

[ios5 中的方向支持](https://stackoverflow.com/questions/8785186/orientation-support-in-ios5)

# ios - MonoTouch，改变tableview数据

> ID：13379311
> 
> 赞同：0
> 
> 时间：2012-11-14T13:00:26.747
> 
> 标签：ios, xamarin.ios

我正在使用分组表视图来呈现数据。我是 MonoTouch 的新手，所以我一直在按照示例和教程开始。

现在我有一个 UITableView，里面填满了数据，并且想要更改 tableview 中的数据。我该如何做到这一点，最好以“成本效益”的方式（成本是电话资源）。

我有两个用于填充表格视图的类，TableSource 和 TableItem。TableSource 类扩展了 UITableViewSource。TableSource 有以下方法：int NumberOfSections、int RowsInSection、string TitleForHeader、void RowSelected、UITableViewCell GetCell

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:49:01.510

更新表格的基础数据源，然后调用表格视图的 ReloadData() 方法。这将使用更新的数据重新绘制表格。

另请参阅：[Monotouch - ReloadData()](https://stackoverflow.com/questions/4514783/monotouch-reloaddata)

# php - 评论框问题；未在网站上呈现的数据

> ID：13379313
> 
> 赞同：0
> 
> 时间：2012-11-14T13:00:33.663
> 
> 标签：php

我对php相当陌生，最近遇到了一个问题。

我使用 PHP 和 MySQL 在我的网站上创建了一个评论框，它运行良好，但存在一个主要问题。仅当评论适合 html 评论框的一行时，评论才会呈现在网站上/存储在数据库中。每当我输入较长的文本时，它根本不会保存任何内容。

这是我使用的代码：

```
<?php
mysql_connect("localhost","x","x");
mysql_select_db("fendersh_cdreviews");
$name=$_POST['name'];
$comment=$_POST['comment'];
$submit=$_POST['submit'];
$dbLink = mysql_connect("localhost", "x", "x");
    mysql_query("SET character_set_client=utf8", $dbLink);
    mysql_query("SET character_set_connection=utf8", $dbLink);
if($submit)
{
if($name&&$comment)
{
$insert=mysql_query("INSERT INTO cdreviews (name,comment) VALUES ('$name','$comment') ");
}
else
{
echo "please fill out all fields";
}
}
?>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<form action="cds.php" method="POST">
<table style="margin-left:15px; background-color:none; border-top: 1px dotted black; border-bottom: 1px dotted black; padding-bottom:5px;">
<tr><td><p style="margin-bottom:-20px;">Name:</p> <br><input type="text" name="name"/></tr>
<tr><td colspan="2"><p style="margin-bottom:-5px;">Comment:</p> </td></tr>
<tr><td colspan="5"><textarea name="comment" rows="3" cols="50"></textarea>
<tr><td colspan="2"><input type="submit" name="submit" value="Comment"></td></tr>
</table>
</form>
<?php
$dbLink = mysql_connect("localhost", "x", "x");
    mysql_query("SET character_set_results=utf8", $dbLink);
    mb_language('uni');
    mb_internal_encoding('UTF-8');
$getquery=mysql_query("SELECT * FROM cdreviews ORDER BY id DESC");
while($rows=mysql_fetch_assoc($getquery))
{
$id=$rows['id'];
$name=$rows['name'];
$comment=$rows['comment'];
echo "<p><b>$name</b>; $comment </p>"
;}
?> 
```

出于安全原因，我已将用户名和密码替换为 X。

这就是我正在使用的代码，它工作正常。

它可以连接到数据库；我已将列参数设置为 TEXT。

那里有什么我应该改变的吗？

希望有人可以进一步帮助我。

问候

杰克

# python - 类定义级别的lambda中的Python self，Eclipse吠叫，但解释器工作，这是标准化的吗？

> ID：13379314
> 
> 赞同：1
> 
> 时间：2012-11-14T13:00:37.713
> 
> 标签：python, eclipse, lambda, pydev

我有以下代码（缩短为只留下必需品）：

```
class Strange():
    def setter(self, val):
         self._val = val

    val = property(lambda: self._val, setter) 
```

Eclipse Helios 中的 PyDev 声称 self 是不可见的，我认为这应该是正确的，并且与 Python 的明确哲学一致。然而，代码在 ipython 2.7 中运行良好，并在代码库中使用。

这是一个安全漏洞，一个词汇范围的怪癖吗？或者是否有解释这一点的 PEP 或文档，它只是 PyDev 遗漏了什么？

编辑：回答评论：它适用于我的机器，也许你的 Python 和操作系统版本不同。但是，谢谢，这以某种方式回答了我关于它不是标准行为的问题。

这是我的控制台输出：

```
barszcz:~ $ uname -a
Linux barszcz 3.4.9-1-ARCH #1 SMP PREEMPT Wed Aug 15 18:59:31 CEST 2012 x86_64 GNU/Linux
barszcz:~ $ ipython2
Python 2.7.3 (default, Apr 24 2012, 00:00:54) 
Type "copyright", "credits" or "license" for more information.

IPython 0.13 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details.

In [1]: %cpaste
Pasting code; enter '--' alone on the line to stop or use Ctrl-D.
:class Strange():
:    def setter(self, val):
:         self._val = val
:
:    val = property(lambda: self._val, setter)
:
:<EOF>

In [2]: Strange
Out[2]: __main__.Strange

In [3]: Strange()
Out[3]: <__main__.Strange instance at 0x26425f0> 
```

EDIT2：好的，所以我在调用时遇到错误`Strange().val`，就像 Martijn 建议的那样。但奇怪的是它是运行时错误而不是字节码编译错误：

```
In [4]: Strange().val
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-4-88f3db8b81d0> in <module>()
----> 1 Strange().val

TypeError: <lambda>() takes no arguments (1 given) 
```

我希望 lambda 的内容已经在执行`Strange`定义时运行...如果有人已经收到定义错误，请在评论中告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:53:00.660

您的代码不正确。

它解析，您可以实例化该类 - 您甚至可以设置，但如果您尝试从那里访问`val`，您会得到一个。`TypeError``val`

实际上，您的代码中还有另一个错误：您没有继承自`object`- 这使您的类成为 Python 2 中的[“旧样式类”](https://stackoverflow.com/questions/54867/old-style-and-new-style-classes-in-python)，并且属性根本不适用于它们。

在我们的代码段中归因和获取值`val`不会显示明显的错误，因为在归因时将完全绕过 setter。

但是，唯一缺少的是`self`lambda 表达式本身的参数（当然，它是一个新的样式类）：

```
class Strange(object):
    def setter(self, val):
         self._val = val

    val = property(lambda self: self._val, setter) 
```

# java - 如何使用没有 id/name 或任何其他唯一标识符的 selenium 定位元素？

> ID：13379315
> 
> 赞同：2
> 
> 时间：2012-11-14T13:00:40.480
> 
> 标签：java, selenium, selenium-rc, selenium-webdriver

页面中有两个字段：用户名和密码（在下面的代码中用**突出显示）。需要使用 selenium 向其中输入数据。但是，除了 tabIndex 之外，这两个对象都具有相同的标识符元素。请帮助我了解如何识别元素（请参阅 html）。

请注意：下面的代码对我有用，但用户将无法看到在 GUI 中输入的数据。我希望在 UI 上看到数据。

谢谢，迈克

```
@FindBy(name="cams_cb_username")
private WebElement emailId;

@FindBy(name="cams_cb_password")
private WebElement password;   
((JavascriptExecutor)DriverFactory.getDriver()).executeScript("arguments[0].setAttribute('value',arguments[1]);", emailId, "username");
((JavascriptExecutor)DriverFactory.getDriver()).executeScript("arguments[0].setAttribute('value',arguments[1]);", password, "pwd"); 
```

这是HTML。

```
<form action="/vito-mma/activateLogin.do" method="post" name="loginForm">
<input type="hidden" value="vitocom" name="cams_security_domain">
<input type="hidden" value="/vito-mma/showPlans.do" name="cams_original_url">
<input type="hidden" value="http" name="cams_login_config">
<input type="hidden" value="" name="cams_cb_partner">
<fieldset class="mma-signin">
<div class="clearfix">

<**input class="bigtext e-hint" type="text" value="" name="e_hint_dummy_input" size="25" autocomplete="off" tabindex="1" style="display: inline;"**>

<input class="bigtext e-hint" type="text" title="Email address" value="" tabindex="1" size="25" name="cams_cb_username" style="display: none; background-color: rgb(255, 255, 255);" autocomplete="off">
</div>
<div class="clearfix">

<**input class="bigtext e-hint" type="text" value="" name="e_hint_dummy_input" size="25" autocomplete="off" tabindex="2"**>

<input class="bigtext e-hint" type="password" title="Password" value="" tabindex="2" size="25" name="cams_cb_password" style="display: none; background-color: rgb(255, 255, 255);" autocomplete="off">
</div>
</fieldset>
<div class="indent">
</form> 
```

**注意：** 用 Xpath 试过：没用。使用 IDE 记录用户名 (name="cams_cb_username")。用过这个 - 也没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:06:57.437

对于这些类型的字段，最好使用 Xpath。因为我也是 Xpath 新手，所以有办法，我该怎么做：

*   安装[Selenium IDE](http://seleniumhq.org/projects/ide/)并单击（并输入）您要输入的字段
*   在 selenium IDE 中，您将看到 IDE 使用的定位器。你可以进一步改变它

xpath 将看起来像`//input/div`或类似的东西。我不知道确切，在这里我真的是新手

然后在代码中使用

```
@FindBy(xpath="/the/xpath/provided/by/selenium_ide") 
```

**编辑**

看到这张图片 ![在此处输入图像描述](../Images/cdbc057d5f0b0ba6907d65f042fff227.png)

在这里，我使用 Selenium IDE 创建了简单的测试任务 - 打开您的问题，单击搜索框并输入“搜索”

在最后一个命令中，IDE 向我提出了最明显的定位器解决方案。但我可以改变这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T13:12:51.557

您可以自定义 xpath 以使用`tabindex`属性和`name`属性：

```
@FindBy(xpath="\\input[@name='cams_cb_username' and @tabindex='1']")
private WebElement emailId;

@FindBy(xpath="\\input[@name='cams_cb_password' and @tabindex='2']")
private WebElement password; 
```

或者，您可以使用这样的东西：

```
WebElement username = wait.until(presenceOfElementLocated(By.xpath("\\input[@name='cams_cb_username' and @tabindex='1']")));
WebElement password = driver.findElement(By.xpath("\\input[@name='cams_cb_password' and @tabindex='2']"));
username.clear();
username.sendKeys(username);
password.clear();
password.sendKeys(password);
password.submit(); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T14:27:01.717

首先，在您的帖子中，您标记的两个输入与描述中的输入不同（`@FindBy(name="cams_cb_username")`& `@FindBy(name="cams_cb_password")`。

但是，对于您用 标记的内容`**`，相应的 CSS 选择器是：

1.  第一 ：`.clearfix:nth-child(1) input[name="e_hint_dummy_input"]`

2.  第二个 ：`.clearfix:nth-child(2) input[name="e_hint_dummy_input"]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T08:50:59.653

您可以直接使用名称来定位元素：如 1.For usrname 使用：selenium.type("cams_cb_username","your UN"); 2.密码使用：selenium.type("cams_cb_password","your PWD"); 或者你可以使用：对于用户名：//input[@name='cams_cb_username']; 对于密码：//输入[@name='cams_cb_password'];

这些应该有效。

# java - org.apache.sling.scripting.jsp.jasper.JasperException：无法加载标记处理程序类

> ID：13379317
> 
> 赞同：0
> 
> 时间：2012-11-14T13:00:49.230
> 
> 标签：java, jsp, osgi, taglib, sling

我正在开发一个 Apache Sling WCMS 并使用 java 标签库来呈现一些数据。

我正在使用 IntelliJ IDEA 10.0

我用以下描述符和处理程序类定义了一个 jsp 标签库：

* * *

TLD 文件包含：

```
<?xml version="1.0" encoding="UTF-8"?>
<taglib version="2.1" xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd">
  <tlib-version>1.0</tlib-version>
  <short-name>taglibdescriptor</short-name>
  <uri>http://bob/taglibs</uri>
  <tag>
      <name>testTag</name>
      <body-content>tagdependent</body-content>
      <tag-class>org.bob.taglibs.test.TestTagHandler</tag-class>
  </tag>
</taglib> 
```

* * *

标记处理程序类：

```
package org.bob.taglibs.test;

import javax.servlet.jsp.tagext.TagSupport;

public class TestTagHandler extends TagSupport{

    @Override
    public int doStartTag(){
        try {
            pageContext.getOut().print("<h1>Helloooooooo</h1>");
        } catch(Exception e) {
            return SKIP_BODY;
        }
        return EVAL_BODY_INCLUDE;
    }
} 
```

* * *

我将标签库打包为[BobTagLib.jar](http://babak-behzadi.persiangig.com/other/BobTagLib.jar)并使用 Sling Web 控制台将其部署为捆绑包。

* * *

我在部署在我的 Sling 存储库中的 jsp 页面中使用了这个标签库：

index.jsp：

```
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="bob" uri="http://bob/taglibs" %>

<html>
  <head><title>Simple jsp page</title></head>
  <body>
     <bob:testTag/>
  </body>
</html> 
```

* * *

（已编辑）清单.MF

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.3
Created-By: Bob Tech
Built-By: babak
Bundle-Version: 1.0.0
Bundle-Name: Bob Tag Library
Build-Jdk: jdk1.6.0_18
Bundle-Vendor: The Bob Technology Foundation
Bundle-ManifestVersion: 2
Bundle-SymbolicName: org.bob.taglibs
Bundle-Category: sling 
```

调用页面会导致以下异常：

```
org.apache.sling.scripting.jsp.jasper.JasperException: /apps/TagTest/index.jsp(7,5) Unable to load tag handler class "org.bob.taglibs.test.TestTagHandler" for tag "bob:testTag"
... 
```

谁能给我一个解决方案？

在此之前，我们会感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:16:18.043

看起来您的 taglib 已找到，但 org.bob.taglibs 包未由您的包导出，因此对 JSP 脚本和其他包不可见。

添加一个

```
Export-Package: org.bob.taglibs.*;version=1.0 
```

MANIFEST.MF 的标题应该可以解决这个问题。

如果这不能解决您的问题，您可能需要将您的 taglib 与已知可以工作的[Sling JSP taglib进行比较。](http://svn.apache.org/repos/asf/sling/trunk/bundles/scripting/jsp-taglib/)

# tomcat - 配置 Spring MVC 应用程序

> ID：13379320
> 
> 赞同：1
> 
> 时间：2012-11-14T13:01:06.950
> 
> 标签：tomcat, spring-mvc, configuration

在 ASP.NET 中，我有`.config`配置我的应用程序的 XML 文件。能够登录到服务器并在需要更改配置时简单地编辑 XML 真是太好了。应用程序自我检测到这一点并自动重新启动。

*如何使用 Spring MVC 获得同样的便利？*

（目前我将 MVC 应用程序导出到`.war`部署在 Tomcat Web 应用程序管理器中的文件。例如，如果我需要更改设置，`root-context.xml`我需要再次导出、取消部署和部署应用程序。这是一个乏味且有风险的操作。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:11:32.120

您可以将弹簧配置存储在您的战争之外（fe 在`conf`您的 tomcat 的文件夹中）。

下面的代码片段`web.xml`告诉 spring 在哪里可以找到配置文件：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>file:/foo/bar/root-context.xml</param-value>
</context-param> 
```

或者您可以移动需要经常将其从您`root-context.xml`的属性文件更改为属性文件的东西，然后将其放置在战争之外。

在您的弹簧配置中定义一个属性占位符以访问属性文件：

```
<context:property-placeholder location="file:/foo/bar/root-context.properties /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T13:03:52.193

例如，您可以创建带有扩展名的[Java 属性配置文件](http://en.wikipedia.org/wiki/.properties)，并将它们放在文件夹中。这样的文件可能包含`.properties``development.properties``production.properties``/WEB-INF/spring`

```
myApp.Username = somename 
```

然后从以下位置引用文件`root-context.xml`：

```
<bean id="applicationProperties" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="/WEB-INF/spring/production.properties"/>
</bean> 
```

将`root-context.xml`文件中的配置值与类似的字符串一起使用

```
<property name="username" value="${myApp.Username}" /> 
```

部署`.war`文件时，您会注意到该文件夹`name of app/WEB-INF/spring/`​​将出现在您的网络服务器上的部署文件夹中（例如`/var/lib/tomcat7/webapps`）。在这里您也可以找到`root-context.xml`。虽然未经验证，但我假设如果您在文本编辑器中编辑这些文件并重新启动 Tomcat，您将实现您想要的。

# matlab - 如何缩放边界框坐标？

> ID：13379321
> 
> 赞同：2
> 
> 时间：2012-11-14T13:01:06.693
> 
> 标签：matlab

我正在通过以下方式提取 blob 的轮廓：

```
bw = im2bw(image, threshold);
boundaries = bwboundaries(bw);
plot(boundaries(:, 2), boundaries(:, 1), 'k', 'LineWidth', 2); 
```

我现在想做的是缩放`boundaries`，以便我可以`boundaries`在原始内部绘制一个较小的版本`boundaries`。是否有捷径可寻？

下面是一个关于结果应该是什么样子的示例：黑色是原始边界框，红色是相同的边界框，只是缩放（但与黑框具有相同的中心）。

![在此处输入图像描述](../Images/c0ab375802d8aa5eff48a16dd40241ab.png)

**编辑：** 我想我可以单独缩放每个点，但是我仍然需要重新定位坐标。有没有更好的方法来做到这一点？

```
scale = 0.7
nbr_points = size(b, 1);
b_min = nan(nbr_points, 2);
for k = 1 : nbr_points
    b_min(k, :) = ([scale 0; 0 scale] * b(k, 1:2)')';
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:37:30.963

只需创建一个执行此操作的函数应该很容易。

```
function scaledB = scaleBoundaries(B,scaleFactor)
% B is a cell array of boundaries. The output is a cell array
% containing the scaled boundaries, with the same center of mass
% as the input boundaries.

%%    
for k = 1:length(B)
   scaledB{k} = B{k} .* scaleFactor;
   com = mean(B{k}); % Take the center of mass of each boundary
   sCom = mean(scaledB{k}); % Take the center of mass of each scaled boundary
   difference = com-sCom; % Difference between the centers of mass
   % Recenter the scaled boundaries, by adding the difference in the 
   % centers of mass to the scaled boundaries:
   scaledB{k}(:,1) = scaledB{k}(:,1) + difference(1);
   scaledB{k}(:,2) = scaledB{k}(:,2) + difference(2);
end
end 
```

或者您是否想避免出于速度目的而未优化的东西？

# iis-7.5 - 将 IIS 绑定到选定的 IP 和端口组合

> ID：13379325
> 
> 赞同：1
> 
> 时间：2012-11-14T13:01:30.540
> 
> 标签：iis-7.5

我在为我的需要配置 IIS 时遇到问题。让我们从我的情况开始：

1.  应用程序在端口 443 上侦听 IP 地址 AAAA。
2.  IIS 网站在端口 80 上侦听 IP 地址 AAAA。
3.  IIS 网站在端口 443 上侦听 IP 地址 BBBB。

我的机器配置为具有两个 IP 地址 AAAA 和 BBBB 我的应用程序仅绑定到 AAAA:443 端点。我希望 IIS 只使用 AAAA:80 和 BBBB:443。站点绑定是正确的，但 IIS 仍然绑定到 AAAA:80、AAAA:443、BBBB:80 和 BBBB:443。因为它绑定到 AAAA:443，所以我自己的应用程序无法再收听它并且无法启动。

我曾尝试使用`netsh http add listener`，但我无法限制 IIS 使用特定的 IP/端口组合。我只能指定 IP 地址，所以它仍然会绑定到 AAAA:443。

有谁知道解决方案？我认为 IIS 绑定到所有可用的 IP 地址有点疯狂，即使我将站点绑定设置为仅一个 IP 地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-05T13:28:56.477

这可以通过 netsh 完成，请参阅此处的说明 [http://support.microsoft.com/kb/954874](http://support.microsoft.com/kb/954874)

您也可以告诉 IIS 绑定哪个 IP 地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T23:11:15.947

侦听 IP 的不是 IIS。它是许多服务使用的 HTTP 驱动程序，而不仅仅是 IIS。不幸的是，完成您想要的唯一方法是让 IIS 之外的应用程序使用 HTTP 驱动程序。我相信这个最简单的方法是使用 WCF。

请参阅[未在 IIS 中托管时通过 HTTP 公开 WCF 服务](https://stackoverflow.com/questions/1697716/exposing-wcf-services-via-http-when-not-hosted-in-iis)

# windows-8 - 如何让 RabbitMQ 管理命令行工具在 Windows 上工作

> ID：13379327
> 
> 赞同：5
> 
> 时间：2012-11-14T13:01:31.647
> 
> 标签：windows-8, rabbitmq

我已按照[RabbitMQ 管理命令行工具](http://www.rabbitmq.com/management-cli.html)的说明进行操作，但在使用

```
python.exe rabbitmqadmin.exe 
```

给我一个错误：

```
ERROR: Action not specified 
```

和：

```
rabbitmqadmin --help 
```

显示：

![在此处输入图像描述](../Images/d6e3fb7228e960da22b3bb0bb507fc39.png)

真的是这样还​​是我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T14:51:03.300

不要将 rabbitmqadmin 重命名为 rabbitmqadmin.exe - 它真的不是一个可执行文件。这就是您看到的（非常具有误导性的）“由于不兼容而无法启动”消息的原因。

```
ERROR: Action not specified 
```

是由于...未指定操作。

但是您可能缺少的一点是，在 Windows 上，您**总是**需要使用 python.exe 为调用添加前缀，例如：

```
python.exe rabbitmqadmin --help
python.exe rabbitmqadmin declare exchange name=my-exchange type=topic 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-08T17:51:07.510

该错误的意思正是它所说的，您没有通过指定命令正确调用rabbitmqadmin。

## **关于如何使用 rabbitmqadmin 的演练：**

对我来说，可执行文件被称为：`rabbitmqadmin`从这里下载： [https ://www.rabbitmq.com/management-cli.html](https://www.rabbitmq.com/management-cli.html)

**在没有任何选项的情况下从命令行执行它，你会得到一个错误：**

```
eric@dev ~$ python rabbitmqadmin
ERROR: Action not specified
rabbitmqadmin --help for help 
```

**获得有关通用选项的帮助：**

```
eric@dev ~$ python rabbitmqadmin --help
<prints a mountain of help> 
```

**获取可以运行的子命令列表：**

```
python rabbitmqadmin help subcommands 
```

**获取用户列表：**

```
eric@dev ~$ python rabbitmqadmin list users
+-------+------------------------------+---------------+
| name  |        password_hash         |     tags      |
+-------+------------------------------+---------------+
| guest | oiz5zGozWya1qBblv6gbFrGYCnA= | administrator |
+-------+------------------------------+---------------+ 
```

**列出虚拟主机：**

```
eric@dev ~$ python rabbitmqadmin list vhosts
+------+----------+----------------+-------------------------+----------+----------+---------+
| name | messages | messages_ready | messages_unacknowledged | recv_oct | send_oct | tracing |
+------+----------+----------------+-------------------------+----------+----------+---------+
| /    | 0        | 0              | 0                       | 1218     | 1028     | False   |
| foo  |          |                |                         |          |          | False   |
+------+----------+----------------+-------------------------+----------+----------+---------+ 
```

**列出交易所：**

```
eric@dev ~$ python rabbitmqadmin list exchanges
+-------+--------------------+---------+-------------+---------+----------+
| vhost |        name        |  type   | auto_delete | durable | internal |
+-------+--------------------+---------+-------------+---------+----------+
| /     |                    | direct  | False       | True    | False    |
| /     | amq.direct         | direct  | False       | True    | False    |
| /     | amq.fanout         | fanout  | False       | True    | False    |
| /     | amq.headers        | headers | False       | True    | False    |
| /     | amq.match          | headers | False       | True    | False    |
| /     | amq.rabbitmq.log   | topic   | False       | True    | False    |
| /     | amq.rabbitmq.trace | topic   | False       | True    | False    |
| /     | amq.topic          | topic   | False       | True    | False    |
| /     | logs               | fanout  | False       | False   | False    |
| /     | my-exchange        | topic   | False       | True    | False    |
+-------+--------------------+---------+-------------+---------+----------+ 
```

**以默认用户身份登录并获取节点：**

```
python rabbitmqadmin --username=guest --password=guest list nodes

<prints mountain of information about nodes> 
```

**以访客身份登录并列出队列：**

```
eric@dev ~$ python rabbitmqadmin --username=guest --password=guest list queues
+-------+--------------------------------+-------------+-----------+---------+------------------------+---------------------+--------+----------+----------------+-------------------------+---------------------+--------+---------+
| vhost |              name              | auto_delete | consumers | durable | exclusive_consumer_tag |     idle_since      | memory | messages | messages_ready | messages_unacknowledged |        node         | policy | status  |
+-------+--------------------------------+-------------+-----------+---------+------------------------+---------------------+--------+----------+----------------+-------------------------+---------------------+--------+---------+
| /     | amq.gen-hWC6xdjX3g5GABc2nED-YQ | True        | 1         | False   |                        | 2014-09-08 13:24:34 | 14048  | 0        | 0              | 0                       | rabbit@ip-15-1-5-54 |        | running |
+-------+--------------------------------+-------------+-----------+---------+------------------------+---------------------+--------+----------+----------------+-------------------------+---------------------+--------+---------+ 
```

# sql-server - 将 Excel 的时间值导入 SQL Server

> ID：13379328
> 
> 赞同：0
> 
> 时间：2012-11-14T13:01:33.130
> 
> 标签：sql-server, excel-formula

在 Excel 中，我们有 TimeValue 函数，例如：TIMEVALUE("5:12:00 AM") 将返回 0.216666667

现在，我有员工的进入时间（7:10），我想将这些时间作为 TimeValue 值保存到 SQL Server 中。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:06:39.750

```
Select Cast(0.216666667 as dateTime)

Select Cast(Cast('5:12' as dateTime) as Float)
Select Cast(Cast('7:10' as dateTime) as Float) 
```

# actionbarsherlock - 支持库 r11

> ID：13379329
> 
> 赞同：4
> 
> 时间：2012-11-14T13:01:42.063
> 
> 标签：actionbarsherlock

我想使用实际版本的支持库 r11 中的新功能（尤其是嵌套片段）。ABS 4.2.0 可以做到这一点吗？

谢谢， 米尔科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:53:00.757

最新的支持库 r11 似乎在 ABS 4.2 上运行良好。我用版本 r11 替换了 ABS 4.2 附带的支持库，我还没有发现任何问题。我能够嵌套片段。

# c# - Monodroid Project 编译成功但之后出现错误

> ID：13379331
> 
> 赞同：2
> 
> 时间：2012-11-14T13:01:43.400
> 
> 标签：c#, visual-studio-2010, xamarin.android

在我的 VS2010 解决方案中，我有几个 Monodroid 项目，它们相互引用（没有圆圈）。

编译成功完成，但编译后发生许多错误（所有错误均未找到类型和方法）。当我删除相关参考并再次添加时，这些错误会暂时消失。

我为调试目的制作了这个解决方案，因为在原始解决方案中，我只有一个 monodroid 项目，并且我引用了 .Net 程序集。在原始解决方案中，我没有任何错误，但调试可能性很差。c# 文件仅链接到项目中，而不是物理添加。

这可能是一个 monodroid/VS 问题吗？

示例错误是：

> 命名空间“Festo”中不存在类型或命名空间名称“Common”（您是否缺少程序集引用？）

问题是这个命名空间确实存在，但是在一个引用的 Android 程序集中。OnlineCompiler 不识别它？

> 'Festo.EditorSDK.Translation.TranslationTable.Translate(string, Festo.EditorSDK.Data.Variable)' 的最佳重载方法匹配有一些无效参数

但是有一个函数可以接受这些类型和数量的参数，但和以前一样，在引用的 Android 程序集中。

如果我通过“重建解决方案”按钮明确编译我的解决方案，则编译成功。真的很奇怪！

# mysql - MySql TEXT / BLOB 类型的最大声明列长度是多少？

> ID：13379333
> 
> 赞同：2
> 
> 时间：2012-11-14T13:01:50.613
> 
> 标签：mysql, blob, clob

### 序幕

*   我的问题忽略了“您实际上可以在客户端和服务器之间传输的最大值取决于可用内存量和通信缓冲区的大小”。
*   我在这里也没有考虑 Unicode。我知道如果一个字符使用超过 1 个字节的存储空间，则 TEXT 列的实际最大长度（字符数）会减少。

在此处咨询 MySql 文档时：http: [//dev.mysql.com/doc/refman/5.5/en/storage-requirements.html](http://dev.mysql.com/doc/refman/5.5/en/storage-requirements.html)，我可以为我的问题得出 2 个答案...

1）更明显的答案：

```
TINYBLOB   : 2 ^  8 - 1 = 255
BLOB       : 2 ^ 16 - 1 = 65535
MEDIUMBLOB : 2 ^ 24 - 1 = 16777215
LONGBLOB   : 2 ^ 32 - 1 = 4294967295 
```

2）更复杂的答案：

```
TINYBLOB   : 2 ^  8 - 1 = 255
BLOB       : 2 ^ 16 - 2 = 65534
MEDIUMBLOB : 2 ^ 24 - 3 = 16777213
LONGBLOB   : 2 ^ 32 - 4 = 4294967292 
```

MySql 将实际数据的大小与该数据一起存储。为了存储该大小，它将需要：

*   数据 < 256 B 时为 1 个字节
*   数据 < 64 KB 时为 2 个字节
*   数据 < 16 MB 时为 3 个字节
*   数据 < 4 GB 时为 4 个字节

因此，要存储数据加上数据的大小，并防止其超过所需存储的 256 / 64K / 16M / 4G 字节，在确定声明的最大值时需要 -1 / -2 / -3 / -4 因子列长度​​（不是 -1 / -1 / -1 / -1）。我希望这是有道理的 ：）

### 问题

这2个答案哪个是正确的？（假设其中之一是。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:13:29.493

# image - 发送带有 base64 图像的邮件（图像仍未显示）

> ID：13379334
> 
> 赞同：1
> 
> 时间：2012-11-14T13:01:51.793
> 
> 标签：image, email, base64

我搜索了一些有关如何发送带有 base64 图像的电子邮件的信息。因此，即使用户没有互联网访问权限，outlook 也会显示它。

所以在开发了这个功能之后，这就是我的服务器出来的：

```
------=b417c3e4c5f511fc316f75b6df52181a
Content-Type: multipart/alternative;  boundary="----=b417c3e4c5f511fc316f75b6df52181a"

------=b417c3e4c5f511fc316f75b6df52181a
Content-Type: text/html; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD></HEAD>
<BODY>
<p style="margin:0; padding:0;">some text before image</p>
<p style="margin:0; padding:0;">&nbsp;</p>
<p style="margin:0; padding:0;">
<img src="cid:29843881" />
</p>
<p style="margin:0; padding:0;">&nbsp;</p>
<p style="margin:0; padding:0;">&nbsp;</p>
<p style="margin:0; padding:0;">&nbsp;</p>
<p style="margin:0; padding:0;">some text after image</p>
</BODY>
</HTML>
------=b417c3e4c5f511fc316f75b6df52181a-- 

------=b417c3e4c5f511fc316f75b6df52181a
Content-Type: image/png; name="29843881.png"
Content-Transfer-Encoding: base64 
Content-ID: <29843881>
Content-Description: 29843881.png

-- IMAGE IN BASE64 with many lines..... --

 ------=b417c3e4c5f511fc316f75b6df52181a-- 
```

问题是在 Outlook 中，图像显示损坏的图片。我试图在本网站的 base64 中复制/粘贴我的图像：[http](http://www.motobit.com/util/base64-decoder-encoder.asp) ://www.motobit.com/util/base64-decoder-encoder.asp ，它正确地向我显示了图像。

那么有人知道为什么我的邮件被发送但 Outlook（或任何网络浏览器）无法向我显示图像吗？

# wcf - 需要帮助了解 Microsoft 服务跟踪查看器日志

> ID：13379336
> 
> 赞同：3
> 
> 时间：2012-11-14T13:02:01.963
> 
> 标签：wcf, web-services, svctraceviewer

我正在使用 Microsoft Service Trace Viewer 检查日志中的异常。例外是：

```
An error occurred while receiving the HTTP response to ...someservice.svc.
This could be due to the service endpoint binding not using the HTTP protocol.
This could also be due to an HTTP request context being aborted by the server
(possibly due to the service shutting down). See server logs for more details. 
```

Web服务已启动并正在运行，我可以很好地访问它。我正在使用来自同一个 Web 服务的方法生成多个报告，除了一个之外，一切都很好。（这份报告有很多数据）。我猜这与返回太多数据/超时有关，但我如何使用 Microsoft Service Trace Viewer 进行检查？（我是这个工具的新手）。

这是我的异常字符串：

```
<ExceptionString>System.ServiceModel.CommunicationException: An error occurred
while receiving the HTTP response to http://someservice.svc. This could be due
 to the service endpoint binding not using the HTTP protocol. This could also
be due to an HTTP request context being aborted by the server (possibly due to
the service shutting down). See server logs for more details. --->

System.Net.WebException: The underlying connection was closed: An unexpected
error occurred on a receive. --->

System.IO.IOException: Unable to read data from the transport connection: An
existing connection was forcibly closed by the remote host. --->

System.Net.Sockets.SocketException: An existing connection was forcibly
closed by the remote host
   at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at System.Net.PooledStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at System.Net.Connection.SyncRead(HttpWebRequest request, Boolean userRetrievedStream, Boolean probeRead)
   --- End of inner exception stack trace ---
   at System.Net.HttpWebRequest.GetResponse()
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   --- End of inner exception stack trace ---</ExceptionString> 
```

请帮忙，我真的不知道这里...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:21:42.057

要尝试获取更具体的错误，请在客户端和服务上启用跟踪，请参阅下面的链接以获取更多信息。拥有 .svclog 文件后，使用跟踪查看器将其打开，然后单击以红色突出显示的任何活动以查看详细信息 - 如果您超过了 WCF 限制（例如 MaxReceivedMessageSize），它应该出现在客户端或服务的日志中。

[http://msdn.microsoft.com/en-us/library/ms733025.aspx](http://msdn.microsoft.com/en-us/library/ms733025.aspx)

[如何打开 WCF 跟踪？](https://stackoverflow.com/questions/4271517/how-to-turn-on-wcf-tracing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T20:37:19.300

我遇到的一个常见原因是 DataContractSerializer 异常。通常它对我来说是一个循环引用。

通常我要做的是在服务中的某处留下一个注释代码块，该代码块使用 DataContractSerializer 手动序列化即将返回的对象。您将从它生成的异常中获得更有用的消息。

假设您有一个“值”变量，这是完成任务的一种方法：

```
var xs = new DataContractSerializer(value.GetType());
var ms = new MemoryStream();
xs.WriteObject(ms, value); 
```

然后我将执行代码来检查异常。

# javascript - 如何向 mvcClientValidationMetadata 添加新的验证规则？

> ID：13379339
> 
> 赞同：0
> 
> 时间：2012-11-14T13:02:08.930
> 
> 标签：javascript, jquery, validation, asp.net-mvc-2

我有一个表单，其中包含两个需要相等的字段（密码和密码确认）。我创建了一个类属性来检查它，并且在服务器端它工作得很好。在客户端，它什么也不做。我需要消息出现在 ValidationSummary 中（“重复密码”需要与“密码”相同）。

我意识到检查这些字段的最简单方法是将规则手动添加到 window.mvcClientValidationMetadata。我试图这样做，但没有任何效果。

我的代码：

```
<% using (Html.BeginForm("ResetPassword", "Account", FormMethod.Post}))
   { %>
<%= Html.ValidationSummary() %>
    <div>
        <%= Html.ValidationMessageFor(m => m.Email)%>
        <%= Html.LabelFor(m => m.Email)%>
    </div>
    <div>
        <%= Html.TextBoxFor(m => m.Email)%>
        <% Html.ValidateFor(m => m.Email);%>
    </div>
    <div>
        <%= Html.ValidationMessageFor(m => m.PasswordModel.Password)%>
        <%= Html.LabelFor(m => m.PasswordModel.Password)%>
    </div>
    <div>
        <%= Html.PasswordFor(m => m.PasswordModel.Password)%>
    </div>
    <div>
        <%= Html.ValidationMessageFor(m => m.PasswordModel.PasswordRepeated)%>
        <%= Html.LabelFor(m => m.PasswordModel.PasswordRepeated)%>
    </div>
    <div>
        <%= Html.PasswordFor(m => m.PasswordModel.PasswordRepeated)%>
    </div>
    <div>
        <%= Html.ValidationMessageFor(m => m.PasswordModel.PasswordRepeated)%>
        <%= Html.LabelFor(m => m.PasswordModel.PasswordRepeated, true)%>
    </div>
<% } %> 
```

`Html.EnableClientValidation`方法在生成此表单之前执行。

下面你会找到我的问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:02:08.930

您可能做的最糟糕的事情是执行完全相同的代码 - 您将覆盖现有规则。

要添加验证规则，您需要在`<% } %>`关闭`using(...`BeginForm 后立即放置此代码：

```
<% } %>

<script type="text/javascript">

    window.mvcClientValidationMetadata[0]["Fields"].push( //check if the '0' is number corresponding to your form validation metadata
      {
          "FieldName": "PasswordModel.PasswordRepeated", // name attribute of the element
          "ReplaceValidationMessageContents": false,
          "ValidationMessageId": "PasswordModel_PasswordRepeated_validationMessage", //id of the ValidationMessageFor (if needed)
          "ValidationRules":
          [
            {
                "ErrorMessage": 'Password repeated needs to be the same as Password',
                "ValidationParameters": "#PasswordModel_Password", //'params' parameter in your validation function, can be an object
                "ValidationType": "propertiesMustMatch" //name of the validation function placed in $.validator.methods
            }
          ]
      }
    );

</script> 
```

propertiesMustMatch 函数检查给定字段是否相等（jQuery equalTo 在我们的系统中无法正常工作）。

没有“Uncaught TypeError: Cannot call method 'push' of undefined”异常，因为 mvcClientValidationMetadata 是在`<script>`元素 put where `<% } %>`is 中生成的。

# c# - AM/PM 本地化（AMDesignator、PMDesignator）

> ID：13379343
> 
> 赞同：1
> 
> 时间：2012-11-14T13:02:18.880
> 
> 标签：c#, asp.net

我正在尝试在 C# 中将 AM 和 PM 本地化为日期时间。

使用 C# 的“PMDesignator”和“AMDesignator”返回的值有多可靠（如下面的代码）？

如何使用相同的代码处理以下两种情况？

```
 //Line# Output
                                                                        //----- ------
void Main()                                                             //1
{                                                                       //2
    DateTime dt = DateTime.Now; // it is 5:56 PM now                    //3 it is 5:56 PM now   
                                                                        //4
    //Japanese                                                          //5
    var JapaneseCulture = new System.Globalization.CultureInfo("ja");   //6 
    Console.WriteLine(JapaneseCulture.DateTimeFormat.PMDesignator);     //7     午後
    Console.WriteLine(JapaneseCulture.DateTimeFormat.AMDesignator);     //8     午前
    Console.WriteLine(dt.ToString("t",JapaneseCulture));                //9     17:56
    Console.WriteLine(dt.ToString("hh:mm tt",JapaneseCulture));         //10    05:56 午後
                                                                        //11
    //German                                                            //12
    var GermanCulture = new System.Globalization.CultureInfo("de");     //13    
    Console.WriteLine(GermanCulture.DateTimeFormat.PMDesignator);       //14    (blank)
    Console.WriteLine(GermanCulture.DateTimeFormat.AMDesignator);       //15    (blank)
    Console.WriteLine(dt.ToString("t",GermanCulture));                  //16    17:56
    Console.WriteLine(dt.ToString("hh:mm tt",GermanCulture));           //17    05:56
} 
```

日语 -
PMDesignator、AMDesignator 有值，
但在使用“t”时未在第 9 行显示。
在这种情况下，第 10 行中指定的格式（“hh:mm tt”）给出了更正确的输出。

德语 -
PMDesignator、AMDesignator 没有值，
因此在第 16 行中使用“t”会给出正确的输出，
而使用“hh:mm tt”的第 17 行会给出错误的输出。

[编辑：阅读评论后：]“t”是否相当可靠地给出了“典型”使用的格式？（我之前没有本地化经验，所以我不太清楚这些值的可靠性）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T04:57:05.023

.NET 中的[标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)将为用户的文化做正确的事情。在您的情况下，只需使用：

```
var culture = new CultureInfo("ja");
var dt = DateTime.Now;
Console.WriteLine(dt.ToString("t", culture)); // t => Short Time format. 
```

如果特定业务需求*确实需要，则仅使用*[自定义](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)覆盖特定于文化的格式。

 *微软在本地化工作上投入了大量资金，以确保格式、翻译等对每个人都是正确的。*

# testing - 如何从 EclEmma 的测试覆盖中排除方法？

> ID：13379348
> 
> 赞同：2
> 
> 时间：2012-11-14T13:02:45.753
> 
> 标签：testing, eclipse-plugin, junit3, eclemma

我正在使用 EclEmma 插件来检查 maven 项目的测试覆盖率。它可以工作，但它会根据**测试**类中的所有功能给出覆盖结果。由于那里有一些 getter、setter 和私有函数，我想将它们排除在计算测试覆盖率之外。有什么办法吗？

# ios - 实施应用内购买的非续订订阅类型

> ID：13379349
> 
> 赞同：1
> 
> 时间：2012-11-14T13:02:48.540
> 
> 标签：ios, in-app-purchase, subscription

我计划在我的应用程序中使用非续订订阅类型的应用内购买。我有一些问题：

*   我可以允许用户选择订阅的开始日期/时间吗？

例如，用户想要订阅一周，从 11 月 14 日（星期三）到 11 月 20 日（星期二）。

*   我可以允许用户订阅不同的时间段（将来）吗？

例如，今天是 11 月 14 日，用户想要订阅 11 月（11 月 19 日星期一至 11 月 25 日星期日）和 12 月（12 月 1 日星期六至 12 月 31 日星期一）的一周。

*   我可以从服务器（通过 Web 服务）控制订阅逻辑吗？

例如，当用户购买一周的订阅时，信息会存储在服务器上。在相同或不同设备上连续登录时，将从服务器接收订阅状态。请注意，应用程序（固有地）需要注册/登录机制才能工作。

ps 我没有使用自动续订订阅类型的应用内购买，原因有很多，包括我不能因为以下指南：

> 11.15 应用程序只能对期刊（报纸、杂志）、商业应用程序（企业、生产力、专业创意、云存储）和媒体应用程序（视频、音频、语音）使用自动续订订阅，否则应用程序将被拒绝。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T04:23:35.773

根据我的经验，这里是对我自己问题的回答。

> 我可以允许用户选择订阅的开始日期/时间吗？

是的。

> 我可以允许用户订阅不同的时间段（将来）吗？

我最终没有这样做，但根据我收到的反馈，你可以。

> 我可以从服务器（通过 Web 服务）控制订阅逻辑吗？

是的。

# filter - 如何将几个 QualifierFilter 应用于 HBase 中的一行

> ID：13379350
> 
> 赞同：7
> 
> 时间：2012-11-14T13:02:53.410
> 
> 标签：filter, hbase, database-scan

我们想用两个 QualifierFilters 过滤 HBase 表上的扫描。意味着我们只想获取表中确实具有某个列“col_A”**和**（！）某个其他列“col_B”的行。

我们当前的方法如下所示：

```
FilterList filterList = new FilterList(FilterList.Operator.MUST_PASS_ALL);
Filter filter1 = new QualifierFilter(CompareOp.EQUAL, new BinaryComparator("col_A".getBytes()));
filterList.addFilter(filter1);
Filter filter2 = new QualifierFilter(CompareOp.EQUAL, new BinaryComparator("col_B".getBytes()));
filterList.addFilter(filter2);

Scan scan = new Scan();
scan.setFilter(filterList);
... 
```

尽管 HBase 表中有几行确实具有“col_A”和“col_B”列，但 ResultScanner 不会返回此扫描的任何结果。

如果我们只将 filter1 应用于扫描，一切正常，我们会得到所有具有“col_A”的行。如果我们只将 filter2 应用于扫描，它是相同的。我们确实得到了所有具有“col_B”的行。

只有当我们结合这两个过滤器时，我们才会得到任何结果。

什么是仅从表中获取具有 col_A 和 col_B 的行的正确方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-17T21:37:58.367

我认为这条线是问题所在 -

```
FilterList filterList = new FilterList(FilterList.Operator.MUST_PASS_ALL); 
```

你希望它是——

```
FilterList filterList = new FilterList(FilterList.Operator.MUST_PASS_ONE); 
```

过滤器将尝试查找同时具有列限定符且不存在此类列的列

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T21:59:24.947

您可以通过定义以下过滤器来实现此目的：

```
List<Filter> filters = new ArrayList<Filter>(2);
byte[] colfam = Bytes.toBytes("c");
byte[] fakeValue = Bytes.toBytes("DOESNOTEXIST");
byte[] colA = Bytes.toBytes("col_A");
byte[] colB = Bytes.toBytes("col_B");

SingleColumnValueFilter filter1 = 
    new SingleColumnValueFilter(colfam, colA , CompareOp.NOT_EQUAL, fakeValue);  
filter1.setFilterIfMissing(true);
filters.add(filter1);

SingleColumnValueFilter filter2 = 
    new SingleColumnValueFilter(colfam, colB, CompareOp.NOT_EQUAL, fakeValue);          
filter2.setFilterIfMissing(true);
filters.add(filter2);

FilterList filterList = new FilterList(FilterList.Operator.MUST_PASS_ALL, filters);
Scan scan = new Scan();
scan.setFilter(filterList); 
```

这里的想法是为您要查找的每一列定义一个`SingleColumnValueFilter`，每列都有一个假值和一个`CompareOp.NOT_EQUAL`运算符。即：这样的 SingleColumnValueFilter 将返回给定名称的所有列。

来源： http: [//mapredit.blogspot.com/2012/05/using-filters-in-hbase-to-match-two.html](http://mapredit.blogspot.com/2012/05/using-filters-in-hbase-to-match-two.html)

# git - Bitbucket 无法推送团队 repo（身份验证失败）

> ID：13379352
> 
> 赞同：1
> 
> 时间：2012-11-14T13:03:05.883
> 
> 标签：git, authentication, bitbucket

当我在我的 Bitbucket 个人帐户中创建一个 repo 时，我可以推送任何我想要的东西。因此，我的 SSH 密钥已在 Bitbucket 中正确注册。

但是当我的一个团队（我是管理员）创建一个仓库时，我不能再推送了。当我尝试这样做时，我收到“身份验证失败”。

我错过了什么？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T18:44:21.160

这可能是因为环境 bitbucket 中的一些不稳定，如果错误仍然存​​在，我相信这是 ssh 密钥的配置，我遇到了同样的问题，但更新后一切正常。

如果未解决，请发送电子邮件至 support@bitbucket.org 并提及此问题。

看那个例子：

[https://bitbucket.org/site/master/issue/7803/getting-500-internal-server-error-since](https://bitbucket.org/site/master/issue/7803/getting-500-internal-server-error-since)

# haskell - 在 Haskell 中查找函数的行号

> ID：13379356
> 
> 赞同：4
> 
> 时间：2012-11-14T13:03:32.387
> 
> 标签：haskell, graphics, compiler-construction, pragma, livecoding

我正在尝试创建一个 Haskell 程序，该程序在屏幕上绘制一些简单的 2d 形状，但是当您将鼠标悬停在每个形状上时，它会打印创建形状的源代码行。

为了做到这一点，我希望能够创建带有尺寸参数和指示行号的最终参数的形状。像这样的东西：

```
rect1 = Shape(Rectangle 2 2 lineNumber) 
```

这将创建一个宽度为 2 像素、高度为 2 像素的矩形，并使用函数 lineNumber 来存储编写这段代码的行。Haskell中是否存在这样的功能？创建一个简单吗？

我搜索了堆栈溢出并发现[了这个问题](https://stackoverflow.com/questions/2314110/haskell-equivalent-of-cs-line)，其中回答者建议可以使用 C++ 中的 __LINE__ pragma 来实现类似的效果。这是最好的方法还是有办法在纯 Haskell 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T22:14:16.947

您可以使用 Template Haskell 来做到这一点，它在技术上是另一个 GHC 扩展，但可能在某种程度上比 C 预处理器更“纯”。

[代码从这里](https://stackoverflow.com/questions/7073471/whats-the-correct-way-to-have-template-haskell-wrap-a-function-with-source-info)窃取并稍作修改。

```
{-# LANGUAGE TemplateHaskell #-}

module WithLocation (withLocation) where
import Language.Haskell.TH

withLocation' :: String -> IO a -> IO a
withLocation' s f = do { putStrLn s ; f }

withLocation :: Q Exp
withLocation = withFileLine [| withLocation' |]

withFileLine :: Q Exp -> Q Exp
withFileLine f = do
    let loc = fileLine =<< location
    appE f loc

fileLine :: Loc -> Q Exp
fileLine loc = do
    let floc = formatLoc loc
    [| $(litE $ stringL floc) |]

formatLoc :: Loc -> String
formatLoc loc = let file = loc_filename loc
                    (line, col) = loc_start loc
                in concat [file, ":", show line, ":", show col] 
```

像这样使用它（来自另一个模块）：

```
{-# LANGUAGE TemplateHaskell #-}

module Main where
import WithLocation

main = do
  $withLocation $ putStrLn "===oo0=Ü=0oo=== Kilroy was here" 
```

# javascript - mvc3 razor - url.action javascript 错误 onClick 事件

> ID：13379363
> 
> 赞同：1
> 
> 时间：2012-11-14T13:04:05.687
> 
> 标签：javascript, asp.net-mvc-3, razor

我的 url.action 和我的 javascript onClick 事件调用有问题。我想要做的是将我的控制器和 actionresult 方法作为我的 javascript 的参数传递，但我不断收到以下错误：

Microsoft JScript 运行时错误：语法错误，无法识别的表达式：/UserManager/filterGrid

对于此代码：

```
<div class="webgrid-filter">

    <input name="User logged in" type="checkbox"  onclick="filterGrid('@Url.Action("filterGrid", "UserManager")')" id="chkboxGridFilter" />

</div> 
```

**看法**

```
@model IEnumerable<UserManager.Models.vw_UserManager_Model>

@*@model UserManager.Models.vw_UserManager_Model
*@
@{
    ViewBag.Title = "User Manager Dashboard";
}

    @Html.ActionLink("Create New User", "CreateUser")

<div class="webgrid-filter">

    <input name="User logged in" type="checkbox"  onclick="filterGrid('@Url.Action("filterGrid", "UserManager")')" id="chkboxGridFilter" />

</div>

<div class="webgrid-wrapper">

@{
    ViewBag.Title = "Jobs";
    WebGrid grid = new WebGrid(Model, canPage: true, canSort: true, rowsPerPage: 15, selectionFieldName: "selectedRow", fieldNamePrefix: "gridItem");

}

    @grid.GetHtml(
    fillEmptyRows: true,
        tableStyle: "webgrid",
                alternatingRowStyle: "webgrid-alternating-row",
                headerStyle: "webgrid-header",
                footerStyle: "webgrid-footer",
                selectedRowStyle: "webgrid-selected-row",
            rowStyle: "webgrid-row-style",
        mode: WebGridPagerModes.All,
columns: new[] {
    grid.Column("UserName"),
    grid.Column("salutation"),
    grid.Column("FirstName"),
    grid.Column("LastName"),
    grid.Column("Password"),
    //grid.Column("isactive"),
    //grid.Column(header: "Is logged in?", format: (model) => @Html.Raw("<input type='checkbox' checked='" + ((model.isactive) ? "checked" : "unchecked") + "' />")),  
    grid.Column(header: "User logged in", format: @<text><input name="User logged in" 
      type="checkbox"  @(item.isactive == true ? "Checked" : null) onclick="logUserOff('@Url.Action("LogUserOff", "UserManager", new {userid = item.userid} )')" id="chkboxIsActive" /></text>),
    grid.Column("isApproved"),  
    grid.Column("MaxConcurrentUsers"),
    grid.Column("email"),
    grid.Column("group_name"),
   grid.Column("module_name"), 

     grid.Column(header:"Edit", format:@<text><div id="btnEditSelectedRow">
         "@Html.ActionLink("Edit record", "EditUser", "UserManager", new {
         userid = item.userid,
         salutation = item.salutation,
         firstname = item.FirstName, 
         lastname = item.LastName, 
         password = item.Password, 
         isactive = item.isactive,
         isapproved = item.IsApproved,
         maxconcurrentusers = item.MaxConcurrentUsers,
         email = item.email, 
         module = item.module_name, 
         group = item.group_name }, null)</div></text>),

    grid.Column(header:"Delete", format:@<text><div id="btnDelSelectedRow">
        "@Html.ActionLink("Delete record", "DeleteUser", "UserManager", new {
         userid = item.userid,
         username = item.UserName,
         salutation = item.salutation,
         firstname = item.FirstName, 
         lastname = item.LastName, 
         password = item.Password, 
         isactive = item.isactive, 
         email = item.email, 
         module = item.module_name, 
         group = item.group_name }, null)</div></text>)

})
</div><br />

<script type="text/javascript">
    $(document).ready(function () {

        // Disable checkboxs where a user is not active.
        $(".webgrid-wrapper input:not(:checked)").attr("disabled", "disabled");

        // Style tables.
        function jQueryUIStyling() {
            $('input:button, input:submit').button();

            $('.webgrid-wrapper').addClass('ui-grid ui-widget ui-widget-content ui-corner-all');
            $('.webgrid-title').addClass('ui-grid-header ui-widget-header ui-corner-top');
            jQueryTableStyling();
        } // end of jQueryUIStyling

        function jQueryTableStyling() {
            $('.webgrid').addClass('ui-grid-content ui-widget-content');
            $('.webgrid-header').addClass('ui-state-default');
            $('.webgrid-footer').addClass('ui-grid-footer ui-widget-header ui-corner-bottom ui-helper-clearfix');
        } // end of jQueryTableStyling
    });
</script>
<script type="text/javascript">
    function logUserOff(url) {
        var answer = confirm('Are you sure you want to save this data?')
        if (answer) {
//            alert(url + ": " + value);

            $.ajax({
                url: url,
                type: "POST"
//                data: value
            }).done(function () {
                $(this).addClass("done");
            });

            return true;
        }
        else {
            return false;
        }
    };
</script>

<script type="text/javascript">

    function filterGrid(url) {
        alert($(url).val());
    }

</script> 
```

这是javascript：

```
<script type="text/javascript">

    function filterGrid(url) {
        alert($(url).val());
    }

</script> 
```

错误源自 jquery-1.5.1：

```
throw"Syntax error, unrecognized expression: "+a 
```

有人知道我在做什么错吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:32:03.193

此错误 ID 导致您在警报中显示 URL 值的方式。

你应该这样写

```
function filterGrid(url) {
    alert(url);
} 
```

# asp.net-mvc - 可选对象上的 MVC 必填字段

> ID：13379367
> 
> 赞同：2
> 
> 时间：2012-11-14T13:04:23.790
> 
> 标签：asp.net-mvc, validation

我有一个复杂的视图模型，它有一些子类。为了一个简单的例子，我们假设有一个子类。

该子类通过渲染局部视图来显示。用户可以在界面中切换该视图，完全隐藏整个内容。

现在有两个有效的输入选项：

1.  用户选择隐藏部分并且不填写任何内容。整个事情应该被忽略。
2.  用户选择查看部分，现在他必须填写。有些字段是必需的，有些不是。

处理这个问题的好方法是 MVC 验证？我无法将这些字段标记为必填，因为回发将发布空值，并且服务器端逻辑会说 ModelState.IsValid 为假，因为缺少字段。

当然，我可以丢失 [Required] 属性并自己手动进行检查，但我想知道是否没有更好的方法来获得相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:23:29.780

最简单的方法是这样的[ASP.NET MVC 3 Data Annotation: Add validation dynamic](https://stackoverflow.com/questions/6109277/asp-net-mvc-3-data-annotation-add-validation-dynamically)。

对于更难（更好一点）的解决方案，请阅读：[DataAnnotations“NotRequired”属性](https://stackoverflow.com/questions/10722428/dataannotations-notrequired-attribute)

# regex - 为什么在 \s 匹配正则表达式中的字符串边框时引入了 \b？

> ID：13379368
> 
> 赞同：4
> 
> 时间：2012-11-14T13:04:25.387
> 
> 标签：regex

我看到有`\b`一个我从未使用过的，我想知道如果没有`\b`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T13:09:57.633

> 我想知道如果没有 \b 是不可能的，是否有人可以给我用例。

该表达式`\b`只是您已经可以使用其他构造执行的操作的便捷简写。

例如，如果您的正则表达式引擎有环视，则`\b`等效于以下更长的表达式：

```
(?<=\w)(?!\w)|(?<!\w)(?=\w) 
```

类似地`\w`,`\d`等只是使用字符类已经可以完成的事情的简写，例如`[A-Za-z0-9_]`或`[0-9]`。您通常希望使用简短版本，因为每次都写出完整的定义很麻烦，更难阅读并且增加了出错的风险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T13:38:19.247

它们是完全不同的东西。

`\s`是一个“**空白字符**”。这意味着它是预定义字符类的快捷方式，其中包含空格字符`\t, \r, \n`或空格。`\s`匹配其中一个字符。

`\b`是一个“**词界**”。它是一个零宽度断言，与预定义的字符类有关`\w`。零宽度断言意味着它的宽度为 0，即它不匹配字符。它确实匹配满足断言的位置。这里的断言将是一侧的单词字符和另一侧的非单词字符。[Mark 已经提供了长版本`\b`](https://stackoverflow.com/a/13379440/626273)和[Oded 一个`\b`匹配](https://stackoverflow.com/a/13379388/626273)的例子。

`\w`是一个“**单词字符**”，表示它包含类似`[a-zA-Z0-9_]`. 在某些语言中，它基于 Unicode 并包含所有字母。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T13:05:35.630

它们在不同的事物`\s`上匹配——在空格、`\b`单词边界上匹配。

一个很好的例子是字符`.`。

在字符串中`hello.hi`：

`\s`不会匹配`.`，但`\b`会在它之前和之后匹配。

# sql - SQL查询以获取与基于group by的列的最大值对应的另一列的值

> ID：13379370
> 
> 赞同：3
> 
> 时间：2012-11-14T13:04:32.920
> 
> 标签：sql, group-by, max

我有下表：

```
ID     BLOWNUMBER    TIME            LADLE
---    ----------    ----------      -----
124      1           01/01/2012        2
124      1           02/02/2012        1
124      1           03/02/2012        0
124      2           04/01/2012        1
125      2           04/06/2012        1
125      2           01/03/2012        0 
```

我想要一组`TIME`的最大值。`LADLE``ID & BLOWNUMBER`

需要输出：

```
124        1       01/01/2012
124        2       04/01/2012
125        2       04/06/2012 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T13:24:50.333

如果您使用的是 SQL Server（或其他支持 CTE 和 的引擎`ROW_NUMBER`），则可以使用此 CTE（公用表表达式）查询：

```
;WITH CTE AS 
(
   SELECT 
      ID, BlowNumber, [Time],
      RN = ROW_NUMBER() OVER (PARTITION BY ID, BLOWNUMBER ORDER BY [Time] DESC)
   FROM Sample
)
SELECT *
FROM CTE
WHERE RN = 1 
```

在此处查看此[SQL Fiddle 以获得在线现场演示](http://www.sqlfiddle.com/#!3/85ad8/3)。

此 CTE 按 对您的数据进行“分区” `(ID, BLOWNUMBER)`，并且该`ROW_NUMBER()`函数为每个“分区”分配从 1 开始的数字，按`[Time]`列排序（最新的时间值在前）。

然后，您只需从该 CTE 中进行选择，并使用它`RN = 1`来获取每个数据分区的最新数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:53:26.790

如果您使用的是 sqllite（可能也与其他数据库兼容）；你可以这样做：

```
select 
    ct.id
    , ct.blownumber
    , time 
from 
    new 
    , (
        select 
            id
            , blownumber
            , max(ladle) as ldl 
        from 
            new 
        group by 
            id
            , blownumber
    ) ct
where 
    ct.id = new.id
    and ct.blownumber = new.blownumber
    and ct.ldl = new.ladle; 
```

# java - 寻找带有仿函数的并发映射

> ID：13379371
> 
> 赞同：3
> 
> 时间：2012-11-14T13:04:34.887
> 
> 标签：java, multithreading, concurrency, java.util.concurrent

如果我查看 Java 中的 ConcurrentHashMap，
特别是 putIfAbsent 方法，该方法的典型用法是：

```
ConcurrentMap<String,Person>  map = new ConcurrentHashMap<>();
map.putIfAbsent("John",new Person("John")); 
```

问题是 Person 对象总是被初始化。
是否有一些帮助器集合（可能是一些提供此
功能的 java 框架）会给我类似的 ConcurrentHashMap 行为，并且可以使用仿函数或任何其他方法来构造值对象，
以及构造代码（即 - functor.execute( ) ) 只有当映射不包含给定键的值时才会被调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:08:11.860

唯一的方法是使用锁定。您可以通过首先使用检查来最小化这种影响。

```
if(!map.containsKey("John"))
    synchronized(map) {
        if(!map.containsKey("John"))
           map.put("John", new Person("John"));
    } 
```

您需要锁定的原因是您需要在创建 Person 时保留映射，以防止其他线程同时尝试添加相同的对象。ConcurrentMap 不直接支持这样的阻塞操作。

如果您需要最小化锁定到特定键，您可以执行以下操作。

```
ConcurrentMap<String, AtomicReference<Person>> map = new ConcurrentHashMap<String, AtomicReference<Person>>();

String name = "John";

AtomicReference<Person> personRef = map.get(name);
if (personRef == null)
    map.putIfAbsent(name, new AtomicReference<Person>());
personRef = map.get(name);
if (personRef.get() == null)
    synchronized (personRef) {
        if (personRef.get() == null)
            // can take a long time without blocking use of other keys.
            personRef.set(new Person(name));
    }
Person person = personRef.get(); 
```

# maven - 在 pom.xml 中包含 QRGen

> ID：13379372
> 
> 赞同：0
> 
> 时间：2012-11-14T13:04:36.253
> 
> 标签：maven, qr-code

我正在使用spring + hibernate在maven中开发应用程序，我需要制作二维码，所以
我找到了本教程[http://viralpatel.net/blogs/create-qr-codes-java-servlet-qr-code-java /](http://viralpatel.net/blogs/create-qr-codes-java-servlet-qr-code-java/)
在该教程中，正在使用以下库：
xzing 和 qrgen (net.glxn.qrgen)

我在 pom.xml 中添加了对 xzing 及其运行的依赖，但 qrgen 需要他自己的 repo，所以
我在该页面上包含了类似的存储库： http: [//kenglxn.github.com/QRGen/](http://kenglxn.github.com/QRGen/)：
但似乎[http： //kenglxn.github.com/QRGen/repository](http://kenglxn.github.com/QRGen/repository)已关闭

任何人都知道新的（或确切的）回购地址，或者可以告诉我我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:14:37.730

基本上，您有一个（公共）存储库中不可用的第三方 JAR。如果您有一个用作代理的公司范围的存储库，那最好。为这项任务设置 Nexus 非常容易。然后您可以将 JAR 导入到该存储库（例如，Nexus 具有默认的“第三方库”存储库设置）。如果您没有这样的存储库，则需要将 JAR 导入本地存储库，但这会限制成功构建到您的机器 - 显然不是您使用 Maven 时想要的。有关本地导入的语法，请参见[此处](http://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html)。

当然，您可以将网络驱动器设置为公司范围的存储库，有些人认为这比设置 Nexus 或任何其他存储库服务器更容易。相信我，这不值得，从一开始就以正确的方式去做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:24:05.437

1.2 版现在可从 maven 中心[http://search.maven.org/#artifactdetails%7Cnet.glxn%7Cqrgen%7C1.2%7Cjar](http://search.maven.org/#artifactdetails%7Cnet.glxn%7Cqrgen%7C1.2%7Cjar)

请用：

```
<dependency>
    <groupId>net.glxn</groupId>
    <artifactId>qrgen</artifactId>
    <version>1.2</version>
</dependency> 
```

# c# - c# App config settings windows 8 - 访问 tmp 文件被拒绝

> ID：13379375
> 
> 赞同：1
> 
> 时间：2012-11-14T13:04:43.553
> 
> 标签：c#, settings, configurationmanager

这个问题最初发布为“加载配置文件时出错：访问路径 c:\Program Files (x86)\... denied”，但我没有成功找到解决方案。

我的应用程序是在 Windows 7 上编写的，它是使用 Visual Studio 2010 编写的 32 位应用程序。当我尝试在 Windows 8 系统上部署此应用程序时，应用程序在 form_Load 期间失败，并出现关于访问 tmp 文件的错误EXE 的目录。我不是直接创建这个临时文件，但它的名称与 C# GetTempFileName 方法生成的名称一致。错误消息中还引用了 EXE 配置文件 (MyApp.exe.config) 的名称。

我使用 ConfigurationManager 在启动时存储我的所有应用程序设置，所以我猜测它与此有关。如果我在 Windows 8 系统上构建应用程序，它在 Windows 8 系统上运行良好，但如果部署在 Windows 7 系统上，则会产生相同的错误。我还不知道究竟是哪一行代码导致了错误，但调用归结为

```
System.Configuration.Configuration config =
            ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);

config.AppSettings.Settings.Add(settingName, settingValue);

config.Save();

ConfigurationManager.RefreshSection("appSettings"); 
```

Windows 7 和 8 系统都是 64 位的，但应用程序是 32 位的。在此先感谢您提供解决此问题的任何建议。

我使用 Settings 类来处理配置数据，而 TEMP 变量就是我所期望的，我的 user\AppSettings\Local\Temp。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T02:57:17.273

遇到的问题是在 Windows 8 的评估版上，这就是所有可用的。在许可版本的 Windows 8 Pro 上运行该应用程序可以完美运行。

感谢您的回复。

# c++ - 在 Visual Studio 2012 中调试 C DLL 文件时无法单步执行代码

> ID：13379380
> 
> 赞同：2
> 
> 时间：2012-11-14T13:04:55.387
> 
> 标签：c++, c, visual-studio, dll, visual-studio-debugging

我有一个单独的 Visual Studio*解决方案*，其中包含用 C 编写的 DLL。我在另一个解决方案中使用它；在控制台 C++ 项目中。在调试控制台项目时，我进入了一个 DLL 函数。

但是，打开页面时会报告`There is no source code available for the current location`调用堆栈位置`MyConsole.exe!_tailMerge_MyLibrary_dll()`。我在控制台项目中使用延迟加载 DLL 文件。当显示无源代码页面时，我检查输出窗口并找到加载的 DLL 行的符号。为什么 Visual Studio 2012 无法单步执行此 DLL 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T08:59:45.640

我有同样的问题，以下解决了我的问题。我在主项目的属性页面上将“调试器类型”设置为“混合”。我的主要项目是托管代码，而 .dll 是本机的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:29:35.617

它发生在处理外部项目时，Visual Studio 会询问您是否有代码。如果您取消该过程，请求的文件将被添加到解决方案中的列表中，并且它会记住不再请求该文件。

检查您的`Solution Property Pages > Debug Source Files`. 首先，确保您的文件**不在 Do not look for these source files: 中**，然后确保在**包含源代码的目录中**添加源的位置。这应该有助于解决问题。

# google-drive-api - 如果文件已共享给组并且组被删除，则无法检索权限

> ID：13379381
> 
> 赞同：3
> 
> 时间：2012-11-14T13:04:58.050
> 
> 标签：google-drive-api

我遇到了 Google Drive api 的问题。如果您将文档共享到某个组，则该组被删除，文件的权限不再能够被拉取。

重现步骤。
1\. 通过 UI 在驱动器中创建文档
2\. 将文档共享到 google 内部组
3\. 通过 cPanel 删除组。
4.尝试使用驱动API拉取文件的权限。

语言：Java Drive API：v2
调用：

```
public static void retrievePermissions(Drive serv, ArrayList<Permission> perms, String userEmail, String fileId, String title) throws Exception {  

PermissionList permissions = null;  
int retry = 5;  

while (retry > 0) { 
   try {  
       permissions = serv.permissions().list(fileId).execute();  
       perms.addAll(permissions.getItems());  
       retry = 0;  
   }catch(com.google.api.client.googleapis.json.GoogleJsonResponseException je){  
       je.printStackTrace();  
       System.err.println("JSON EXCEPTION DOC TITLE :: " + title + " :: user " + userEmail);  
       retry = 0;  
} catch (Exception e) {  
       retry = retryError(e, retry, printStackTrace);  
       if (retry == 0)  
       throw e;  
}  
}  
} 
```

错误消息：

```
com.google.api.client.googleapis.json.GoogleJsonResponseException: 500 OK
{
"code" : 500,
"message" : null
}
at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:143)
at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:114)
at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:40)
at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:417)
at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:328)
at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:449)
at com.promevo.gsd.utils.gData_Drive_Util.retrievePermissions(gData_Drive_Util.java:119)
at com.promevo.gsd.docs.Initial_Run_Docs.doAcls(Initial_Run_Docs.java:254)
at com.promevo.gsd.docs.Initial_Run_Docs.storeDocs(Initial_Run_Docs.java:224)
at com.promevo.gsd.docs.Initial_Run_Docs.pullPageOfDocs(Initial_Run_Docs.java:188)
at com.promevo.gsd.docs.Initial_Run_Docs.doWork(Initial_Run_Docs.java:108)
at com.promevo.gsd.docs.Initial_Run_Docs.run(Initial_Run_Docs.java:99)
at com.google.apphosting.utils.servlet.DeferredTaskServlet.performRequest(DeferredTaskServlet.java:136)
at com.google.apphosting.utils.servlet.DeferredTaskServlet.service(DeferredTaskServlet.java:99)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:383)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:04:02.640

我在使用 python 库时看到了同样的行为，因为“未知组”出现在权限列表中，我得到了 500 错误。

# android - AQuery 通过代理加载图片

> ID：13379387
> 
> 赞同：0
> 
> 时间：2012-11-14T13:05:34.550
> 
> 标签：android, proxy

我尝试在我的 android 项目中使用 AQuery（又名 android-query）库加载照片。这是我的代码：

```
public class AQueryTestActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_aquery_test);

    System.setProperty("http.proxyHost", "some.proxy");
    System.setProperty("http.proxyPort", "8080");

    AQuery aq = new AQuery(this);
    AQUtility.debug(true);

    aq.id(R.id.text_view).text("Text set by AQuery");

    aq.id(R.id.teaser_image).image("http://farm4.static.flickr.com/3531/3769416703_b76406f9de.jpg");
} 
```

当我使用

```
BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream())); 
```

图像加载没有问题。

AQuery 是否忽略代理设置？有没有办法调试这个？

我使用**AQUtility.debug(true)**但在 Logcat 中找不到 android-query 记录的任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:13:31.397

似乎 AQuery（版本 0.23.16）目前正在忽略代理主机的系统属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-27T03:49:56.810

如果未授予**Internet 权限，AQuery 将默默地忽略它。**

您也可以使用**AQUtility.setDebug(true);**

# algorithm - 找到小于数字的最大 x^y

> ID：13379390
> 
> 赞同：0
> 
> 时间：2012-11-14T13:05:49.497
> 
> 标签：algorithm, math

我有数字 A（从数字 0、1、2、3 构建）。我想找到最小的 x 和 y，如果我这样做 x^yi 得到的最大数字小于 A

x^y <= A x^y 是最大的

加 x 和 y 不能是十进制数，只能是“整数”

例如：

```
A = 7 => x^y = 2^2
A = 28 => x^y = 3^3
A = 33 => x^y = 2^5 
```

ETC

**编辑：** 正如 izomorphius 在评论中建议的那样，它总是有 x = A 和 y = 1 的解决方案。但这不是理想的结果。我希望 x 和 y 尽可能接近数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:10:05.437

一个天真的解决方案可能是：

`a^y`通过做一些常数，与 A 的“最接近但不更高”的数字`a`是：

`a^(floor(log_a(A)))`[哪里`log_a(A)`是底的对数`a`，`A`可以像`log(A)/log(a)`大多数编程语言一样计算]

通过迭代`a`范围内的所有 s，`[2,A)`您可以找到这个数字。

这个解决方案是你的 pow/log 复杂性`O(A * f(A))`在哪里`f(A)`

**PS**如果您希望您`y`的`[2,sqrt(A)]`指数`O(sqrt(A) * f(A))`（

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:56:03.040

目前尚不清楚您在问什么，但我会尝试猜测。

我们首先求解`z^z = a`一个实数的方程`z`。让`u`和`v`分别`z`向下和向上四舍五入。在这三个候选`(u,u)`中`(v,u)`，`(u,v)`我们选择最大的不超过一个`a`。

示例：考虑案例`a = 2000`。我们`z^z = 2000`通过数值方法（见下文）求解以获得近似解`z = 4.8278228255818725`。我们向下取整以获得`u = 4`和`v = 5`。我们现在有三个候选人`4^4 = 256`，`4^5 = 1023`和`5^4 = 625`。它们都小于`2000`，因此我们采用给出最大答案的那个，即`x = 4`，`y = 5`。

这是Python代码。该功能`solve_approx`可以满足您的需求。它适用于`a >= 3`. 我相信您可以独自应对这些`a = 1`案件`a = 2`。

```
import math

def solve(a):
    """"Solve the equation x^x = a using Newton's method"""
    x = math.log(a) / math.log(math.log(a)) # Initial estimate
    while abs (x ** x - a) > 0.1:
        x = x - (x ** x - a) / (x ** x * (1 + math.log(x)))
    return x

def solve_approx(a):
    """"Find two integer numbers x and y such that x^y is smaller than
    a but as close to it as possible, and try to make x and y as equal
    as possible."""
    # First we solve exactly to find z such that z^z = a
    z = solve(a)
    # We round z up and down
    u = math.floor(z)
    v = math.ceil(z)
    # We now have three possible candidates to choose from:
    # u ** zdwon, v ** u, u ** v
    candidates = [(u, u), (v, u), (u, v)]
    # We filter out those that are too big:
    candidates = [(x,y) for (x,y) in candidates if x ** y <= a]
    # And we select the one that gives the largest result
    candidates.sort(key=(lambda key: key[0] ** key[1]))
    return candidates[-1] 
```

这是一个小演示：

```
 >>> solve_approx(5)
 solve_approx(5)
 (2, 2)
 >>> solve_approx(100)
 solve_approx(100)
 (3, 4)
 >>> solve_approx(200)
 solve_approx(200)
 (3, 4)
 >>> solve_approx(1000)
 solve_approx(1000)
 (5, 4)
 >>> solve_approx(1000000)
 solve_approx(1000000)
 (7, 7) 
```

# python - 如何从谷歌应用引擎数据存储中加载所有图像？

> ID：13379392
> 
> 赞同：0
> 
> 时间：2012-11-14T13:05:56.337
> 
> 标签：python, google-app-engine, jinja2

我的代码如下。它仅加载第一个图像表单“帖子”数据库。我怎样才能从数据库中加载所有图像？？？？

```
import webapp2
import os
import jinja2
from google.appengine.ext import db
from google.appengine.api import images 
```

神社模板代码

```
template_dir = os.path.join(os.path.dirname(__file__), 'templates')
jinja_env = jinja2.Environment(loader = jinja2.FileSystemLoader(template_dir),
                           autoescape = True)

class Handler(webapp2.RequestHandler):
    def write(self, *a, **kw):
        self.response.out.write(*a, **kw)

    def render_str(self, template, **params):
        t = jinja_env.get_template(template)
        return t.render(params)

    def render(self, template, **kw):
        self.write(self.render_str(template, **kw)) 
```

html图片上传

```
form="""
<form action="/" enctype="multipart/form-data" method="post">
          <div><label>Avatar:</label></div>
          <div><input type="file" name="img"/></div>
          <input type="submit" value="switch">
          </form>
""" 
```

图像数据库

```
class Greeting(db.Model):
    avatar = db.BlobProperty() 
    created = db.DateTimeProperty(auto_now_add = True) 
```

这是为了形象。但它只加载第一个图像表单“帖子”数据库。如何从数据库中加载所有图像？

```
class Image(Handler):
    def get(self):
        posts = db.GqlQuery("select * from Greeting order by created desc")
        for post in posts:

            self.response.headers['Content-Type'] = 'image/jpg'
            self.response.out.write(post.avatar) 
```

MainHandler 并调整图像大小

```
class MainHandler(Handler):
    def get(self):
        self.response.out.write(form)
    def post(self):
        avatar = images.resize(self.request.get('img'), 400, 400)
        greeting = Greeting()
        greeting.avatar = db.Blob(avatar)
        greeting.put()    

app = webapp2.WSGIApplication([('/', MainHandler),
                               ('/img', Image),],
                               debug=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:56:18.847

而不是`for post in posts`在处理程序调用 Image 时通过您的`jinja2`模板迭代帖子 ()。使用 . 将帖子传递到您的模板`self.response.out.write(posts)`。

jinja2 模板：

```
{% for post in posts %}
    {{post}}
{% endfor %} 
```

# ios - 如何将 NSUserdefault 的值放入 URL

> ID：13379394
> 
> 赞同：0
> 
> 时间：2012-11-14T13:06:03.403
> 
> 标签：ios, url, nsuserdefaults

我有这个网址`NSURL *url = [NSURL URLWithString:@"http://site.com/ArcGIS/rest/services/POI_Data/MapServer/0/query?&where=ToegangsNr+%3D+5002&returnGeometry=true&outSR=4326&f=json"];`

但我想用 NSUserdefault 更改字符串中的 5002 值`_phonenumber`。

我怎样才能做到这一点？

这个函数的另一个代码是：

```
ASIHTTPRequest *_request = [ASIHTTPRequest requestWithURL:url];
__weak ASIHTTPRequest *request = _request;

request.requestMethod = @"POST";
[request addRequestHeader:@"Content-Type" value:@"application/json"];
[request appendPostData:[json dataUsingEncoding:NSUTF8StringEncoding]];
// 5
[request setDelegate:self];
[request setCompletionBlock:^{
    [MBProgressHUD hideHUDForView:self.view animated:YES];

    NSString *responseString = [request responseString];
    NSLog(@"Response: %@", responseString);
    [self plotCrimePositions:request.responseData];

}];
[request setFailedBlock:^{
    [MBProgressHUD hideHUDForView:self.view animated:YES];
    NSError *error = [request error];
    NSLog(@"Error: %@", error.localizedDescription);
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:21:07.057

```
 NSURL *url = [NSURL URLWithString:@"http://site.com/ArcGIS/rest/services/POI_Data/MapServer/0/query?&where=ToegangsNr+%3D+5002&returnGeometry=true&outSR=4326&f=json"];
NSString *urlString = [url absoluteString];
urlString = [urlString stringByReplacingOccurrencesOfString:@"5002" withString:[userDefaults objectForKey:@"_phoneNumber"]];
NSLog(@"%@",urlString);
url = [NSURL URLWithString:urlString];
NSLog(@"%@",url); 
```

希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:31:05.987

试试这个：

```
NSString *urlStr = [NSString stringWithFormat:@"http://site.com/ArcGIS/rest/services/POI_Data/MapServer/0/query?&where=ToegangsNr+%%3D+%@&returnGeometry=true&outSR=4326&f=json", [[NSUserDefaults standardUserDefaults] objectForKey:@"_phonenumber"]];
NSURL* url = [NSURL URLWithString:urlStr]; 
```

# iphone - 没有按钮的 UIAlertView 以及如何关闭它

> ID：13379398
> 
> 赞同：3
> 
> 时间：2012-11-14T13:06:13.370
> 
> 标签：iphone, xcode, uialertview

在我的应用程序获得服务器响应之前，我在警报视图中有活动指示器。该应用程序将数据发送到服务器，并且警报视图显示，当服务器向我发送响应时如何关闭它。这是我的警报中的代码

```
 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Canceling reservation" message:@"please wait" delegate:self cancelButtonTitle:nil otherButtonTitles: nil];
        [alert show];

        UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

        // Adjust the indicator to place at the bottom of the dialog window.
        indicator.center = CGPointMake(alert.bounds.size.width / 2, alert.bounds.size.height-50);
        [indicator startAnimating];
        [alert addSubview:indicator]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T13:07:24.460

```
[alert dismissWithClickedButtonIndex:0 animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:12:26.377

你可以使用[MBProgressHUD](https://github.com/jdg/MBProgressHUD)而不是标准的 UIAlertView 来做类似的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T13:10:35.790

您可以使用`dismissWithClickedButtonIndex:`委托方法来关闭 alertView。

```
[alert dismissWithClickedButtonIndex:0 animated:YES]; 
```

确保`alert`在`@Interface`.

> **dismissWithClickedButtonIndex：动画：**
> 
> 关闭接收器，可选择使用动画。
> 
> `- (void)dismissWithClickedButtonIndex:(NSInteger)buttonIndex animated:(BOOL)animated Parameters`
> 
> **按钮索引**
> 
> ```
> The index of the button that was clicked just before invoking this method. The button indices start at 0. 
> ```
> 
> **动画**
> 
> ```
> YES if the receiver should be removed by animating it first; otherwise, NO if it should be removed immediately with no animation. 
> ```
> 
> 讨论
> 
> 在 iOS 4.0 中，您可能希望在应用程序移至后台时调用此方法。当应用程序移到后台时，警报视图不会自动关闭。此行为与以前版本的操作系统不同，后者在应用程序终止时会自动取消。关闭警报视图使您的应用程序有机会保存更改或中止操作并执行任何必要的清理，以防您的应用程序稍后终止。可用性
> 
> ```
> Available in iOS 2.0 and later. 
> ```
> 
> 在 UIAlertView.h 中声明

请参考[UIAlertView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAlertView_Class/UIAlertView/UIAlertView.html)

# javascript - 清洁数学解决方案以迭代循环轮播

> ID：13379399
> 
> 赞同：0
> 
> 时间：2012-11-14T13:06:34.570
> 
> 标签：javascript, for-loop, carousel

我正在努力为此想出一个干净的解决方案：

*   轮播有 7 个项目，所以 0 - 6。
*   索引 3 是中间的
*   例如，如果单击第二个项目（索引 1），则每个项目需要向右移动 2 个位置。如果单击最后一项（索引 6），则需要向左移动 3 个位置。

```
功能中心CarouselOn（索引，回调）{
  var items = $('li', carousel);
  var middleIdx = Math.floor(items.length / 2);
  变种方向=空；
  var iterCount = 0;

  if(index === middleIdx) 返回；

  如果（索引> middleIdx）{
    方向='左';
    iterCount = (index - middleIdx);
  }
  别的 {
    方向='右';
    iterCount = (middleIdx - 索引);
  }

  $('li', 轮播).each(function(k, v) {
    var li = $(v);

    // 这里我需要向左或向右迭代n个地方
    // 例如：
    // 方向 = 左，iterCount = 3
    // 然后每个 li 按索引将需要这个序列：
    // 0: 6, 5, 4
    // 1: 0, 6, 5
    // 2: 1, 0, 6
    // 3: 2, 1, 0
    // 4: 3, 2, 1
    // 5: 4, 3, 1
    // 6: 5, 4, 3（这个移动到中心 - 索引 3）
  });

}
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:34:48.917

this does not include any code for animation, and it also assumes that the `carousel` element is the parent `<ul>` of the `<li>`s.

It *should* be unnecessary to change the indicies of each `<li>` for every 'move'. All you really need to do is move the last element to the first position, or the first element to the last position (depending on direction you are moving). I also added a `timeout` of 1 second so you should be able to see it stepping through.

```
function centerCarouselOn(index, callback) {
  var items = $('li', carousel);
  var middleIdx = Math.floor(items.length / 2);
  var direction = null;
  var iterCount = 0;

  if(index === middleIdx) return;

  // if iterCount is positive, we are going right; else, we are going left
  iterCount = middleIdx - index;

  // this funciton gets called recursively until all moves are complete
  function moveCarousel() {
    if (iterCount===0) return;

    if (iterCount > 0) {
      // take the last element, prepend it to the carousel
      $('li', carousel).last().prependTo(carousel);
      iterCount--;
    } else if (iterCount < 0) {
      // take the first element, append it to the carousel
      $('li', carousel).first().appendTo(carousel);
      iterCount++;
    }

    // execute callback to apply css changes at each step
    callback();

    // set a delay, then repeat.
    window.setTimeout(moveCarousel, 1000);
  }

  // start moving the carousel
  moveCarousel(iterCount);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:36:02.003

谢谢大家的关注，最后我是这样处理的：

```
function centerCarouselOn(index, callback) {
  var items = $('li', carousel);
  var numItems = carousel.children().length;
  var middleIdx = Math.floor(items.length / 2);
  var direction = null;
  var iterCount = 0;

  if(index === middleIdx) return;

  if(index > middleIdx) {
    direction = 'left';
    iterCount = (index - middleIdx);
  }
  else {
    direction = 'right';
    iterCount = (middleIdx - index);
  }

  $('li', carousel).each(function(k, v) {
    var li = $(v);

    // Here I need to iterate n places to the left or right
    // e.g:
    // direction = left, iterCount = 3
    // Then each li by index would need this sequence:
    // 0: 6, 5, 4
    // 1: 0, 6, 5
    // 2: 1, 0, 6
    // 3: 2, 1, 0
    // 4: 3, 2, 1
    // 5: 4, 3, 1
    // 6: 5, 4, 3 (this one moves to center - index 3)

    if(direction === 'right') {
      for(var i = k; i < (k + iterCount); i++) {
        var thisIter = i;
        var nextIter = (++thisIter >= numItems) ? (thisIter - numItems) : thisIter;

        console.log(k + ': ' + nextIter);

      }
    }
    else {
      for(var i = k; i > (k - iterCount); i--) {
        var thisIter = i;
        var nextIter = (--thisIter < 0) ? (numItems + thisIter) : thisIter;

        console.log(k + ': ' + nextIter);
      }
    }
  });
} 
```

结果动画看起来像这样很糟糕，所以我只是在计算最终位置（作为奖励，它更有效）：

```
$('li', 轮播).each(function(k, v) {
  var li = $(v);

  var nextIdx = 0;

  如果（方向==='对'）{
    nextIter = ((k + iterCount) > (numItems - 1)) ？((k + iterCount) - numItems) : (k + iterCount);
  }
  别的 {
    nextIter = (k - iterCount) >= 0 ？(k - iterCount) : numItems - (iterCount - k);
  }

  _animateTo(li, nextIter, 方向);
});
```

# matlab - matlab中的逆拉普拉斯变换

> ID：13379400
> 
> 赞同：2
> 
> 时间：2012-11-14T13:02:36.410
> 
> 标签：matlab

我使用哪个命令`f(t)`从其拉普拉斯变换中获取原始函数？

即，我将拉普拉斯变换插入`s`变量中，我想得到`f(t)`.

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T13:13:35.623

您可以使用该[`ilaplace`](http://www.mathworks.com/help/symbolic/ilaplace.html)功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:15:19.243

在 Matlab 中，您可以使用`ilaplace`计算拉普拉斯逆变换的函数。像往常一样，Matlab 文档非常好：

[http://www.mathworks.co.uk/help/symbolic/ilaplace.html](http://www.mathworks.co.uk/help/symbolic/ilaplace.html)

# jquery - 提交按钮延迟后如何删除课程？

> ID：13379401
> 
> 赞同：2
> 
> 时间：2012-11-14T13:06:34.440
> 
> 标签：jquery, removeclass

我对提交按钮进行了延迟，并添加了一个类，该类为按钮提供了灰色。

```
$(document).ready(function () {
    $('#buttonDelay').click(function() {
        var delay =  $(this);
        delay.addClass('inactive');
        delay.prop('disabled', true);
        setTimeout(function() {
            delay.prop('disabled', false);
        }, 8000).removeClass('inactive');                      
    });
}); 
```

现在我想删除“非活动”类，以便按钮恢复原来的颜色。但是上面的代码不起作用。有人有什么想法吗？

另见：http: [//jsfiddle.net/wPaUv/9/](http://jsfiddle.net/wPaUv/9/)

干杯，凯西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:08:37.257

`removeClass`是一个 jQuery 方法，你不能用`setTimeout`函数链接它。

```
$(document).ready(function () {
    $('#buttonDelay').click(function() {
        var delay =  $(this);
        delay.prop('disabled', true).addClass('inactive')
        setTimeout(function() {
            delay.prop('disabled', false).removeClass('inactive');
        }, 8000);
    });
}); 
```

[http://jsfiddle.net/yphKm/](http://jsfiddle.net/yphKm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:10:06.070

```
$(document).ready(function () {
$('#buttonDelay').click(function() {
    var delay =  $(this);
    delay.addClass('inactive');
    delay.prop('disabled', true);
    setTimeout(function() {
        delay.prop('disabled', false).removeClass('inactive');
    }, 8000);                      
});
}); 
```

您刚刚将 removeClass 部分添加到错误的行。

# sharepoint - 在 SPServices 中获取用户的电子邮件 ID

> ID：13379403
> 
> 赞同：3
> 
> 时间：2012-11-14T13:06:48.920
> 
> 标签：sharepoint, spservices

我正在使用 SPServices（GetListItems 方法）从共享点列表中获取一些信息。该列表包含一个“人员或组”类型字段，该字段返回用户的数字 ID 和名称（显示名称），以分号分隔，例如“43#;John Doe”。我需要该字段中所有用户的电子邮件地址（在所有返回的行中）。任何人都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T16:07:59.577

保罗你摇滚:)

从保罗的最后评论中，我得到了所需的东西。这是完美的。:)

您唯一需要的是将以下内容添加到调用中

```
CAMLQueryOptions: "<QueryOptions><ExpandUserField>True</ExpandUserField></QueryOptions>", 
```

所以我的示例调用变成了这个

```
$().SPServices({ operation: "GetListItems", async: false, listName: "Assignees", webURL: "https://col.wow.telenor.com/sites/go/",
            CAMLViewFields: "<ViewFields Properties='True'/>",
            CAMLQuery: "",
            CAMLQueryOptions: "<QueryOptions><ExpandUserField>True</ExpandUserField></QueryOptions>",
            completefunc: function (xData,Status) {

                $(xData.responseXML).SPFilterNode("z:row").each(function () {

                    try {
                    //ows_Name1 is a field of type "People or Group" the after adding CAMLQueryOptions this field returns all the fields
                    // propeties of user i.e. Displayname,ID,email id, domain login, sip ID etc all separate by #
                        var title = $(this).attr("ows_Name1"); 
                    // Splitting the resultant string with # give you string array of all the properties. In my case email ID is at 
                    // index 3.
                        var userEmail = userText.split('#')[3];
                    // Below line is added to remove the trailing "," from email id
                        userEmail = userEmail.substring(0,userEmail.indexOf(','));

                    }
                    catch (e) {
                        alert('Exception: ' + e.message);
                    }
                });
            }
        }); 
```

对不起，保罗，我必须取消标记你的答案并做出这个答案:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:19:02.100

@Mujaba，

我之前通过获取用户名并使用 People 服务和 SearchPrincipals 方法进行搜索来完成此操作...这是一个示例：

```
var userEmail = '';
var userId    = '43';
$().SPServices({
    operation:      "SearchPrincipals",
    searchText:     "John Doe",
    async:          true,
    completefunc:   function(xData, status){
        $(xData.responseXML).find("PrincipalInfo")
            .each(function(){
                var thisUser = $(this);
                if ($.trim(thisUser.find("UserInfoID").text()) == userId) {
                    userEmail = $.trim(thisUser.find("Email").text());

                    alert("User's email: " + userEmail);

                    return false;
                }
            });
    }
}); 
```

保罗。

# java - 云计算中调度算法的资源

> ID：13379404
> 
> 赞同：2
> 
> 时间：2012-11-14T13:06:51.943
> 
> 标签：java, cloud

我正在寻找一些关于云计算架构和结构的书籍和资源。我想了解云计算中的调度算法，并用 Java 编程语言实现其中的一种。首先，我必须了解云计算，然后我必须研究 DO 和云计算调度，并使用 Java 编程语言实现其中之一，我想要这个项目的良好资源。

# c++ - QFont 中两行文本之间的垂直偏移量是多少？

> ID：13379407
> 
> 赞同：1
> 
> 时间：2012-11-14T13:06:59.247
> 
> 标签：c++, qt, text, qpainter

它只是`QFontMetrics::height()`，还是它`QFontMetrics::height()+QFontMetrics::leading()`？

例如，在这段代码中：

```
painter.drawText(QRect(x, y, 1000, 1000), "line1");
y += lineOffset;
painter.drawText(QRect(x, y, 1000, 1000), "line2");
y += lineOffset;
painter.drawText(QRect(x, y, 1000, 1000), "line3"); 
```

需要什么值`lineOffset`才能使行间隔，就像使用了此代码一样：

```
painter.drawText(QRect(x, y, 1000, 1000), "line1\nline2\nline3"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:12:09.293

正如[文档](http://doc.qt.digia.com/qt/qfontmetrics.html#lineSpacing)告诉您的那样，`lineSpacing()`是两条线之间的垂直距离，它是`height()`（字体高度）和`leading()`.

# accelerometer - ADXL345 atmega16

> ID：13379409
> 
> 赞同：1
> 
> 时间：2012-11-14T13:07:16.847
> 
> 标签：accelerometer, atmega16

我刚刚开始了需要将 ADXL345 连接到我的 Atmega16 的项目。我想将设备 ID 放在屏幕上并读取轴。到目前为止，我无法与 ADXL345 通信。ON LCD 仅出现 0 我将不胜感激。

```
#include <avr/io.h>
#include <stdlib.h>
#include <util/delay.h>
#include "hd44780.h"
#define F_CPU 1000000UL
/*-----------------------Rejestry ADXL345---------------------*/
char POWER_CTL = 0x2D;  //Power Control Register 0x08 measurement
char DATA_FORMAT = 0x31;
char BW_RATE = 0X2C;
char FIFO = 0x38; //fifo ctl 
char DATAX0 = 0x32; //X-Axis Data 0
char DATAX1 = 0x33; //X-Axis Data 1
char DATAY0 = 0x34; //Y-Axis Data 0
char DATAY1 = 0x35; //Y-Axis Data 1
char DATAZ0 = 0x36; //Z-Axis Data 0
char DATAZ1 = 0x37; //Z-Axis Data 1
char DEVICEID = 0x00;
#define  Read_Byte_SPI( addr )   ADXL_write( 0x80 | addr , 0xFF );
/*------------------PORTY SPI---------------*/
#define SPI_CS      PB4
#define DDR_SPI     DDRB
#define DD_MOSI     PB5
#define DD_MIOS     PB6
#define DD_SCK      PB7
/*vcc<->vs*/
//--------------------------------------Funkcje-------------------
unsigned int init_port(void) //ports 4 lcd
{DDRD =0x00; PORTD =0x07 ; }
/*function 4 lcd*/
static void lcd( int a){ LCD_LOCATE(2,0); char buff[2]; char tab[2]; /*itoa(a,buff,10);*/ sprintf(a, %d", buff); lcd_puts(buff); 
  } 
/**
 * This writes to a register with the data passed to the address passed
 * @param unsigned char cReg - the address of the register you wish to write to
     * @param unsigned char cData - the data you wish to write to the register
 */
unsigned char ADXL_write(unsigned char cReg, unsigned char cData){
   set_spics();
   /* Start transmission send register */
   SPDR = cReg;
   /* Wait for transmission complete */
   while(!(SPSR & (1<<SPIF)))
   { /* NOOP */ }
   SPDR = cData;
   /* Wait for transmission complete */
   while(!(SPSR & (1<<SPIF)))
  { /* NOOP */ }
   clear_spics();
   return SPDR;
   }

   uint8_t ADXL_read(unsigned char addr) {  // read ADXL345 - 128+ addrs, back 8 bits - found this       in         another topic
  int8_t ans; 
  set_spics(); 
  SPDR = 0x08 | addr; 
  loop_until_bit_is_set(SPSR, SPIF); 
  SPDR = 0xFF;                    
  loop_until_bit_is_set(SPSR, SPIF); 
  ans = SPDR; 
  clear_spics(); 
  return(ans);}
   //inicjalizacjia SPI
   void Init_SPI(){
    // make the MOSI, SCK, and SS pins outputs
    DDRB |= ( 1 << DD_MOSI ) | ( 1 << DD_SCK ) | ( 1 << SPI_CS );

    DDRB &= ~( 1 << DD_MIOS );

    /* Enable SPI, Master, set clock rate fck/128 */
    SPCR = (1<<SPE)|(1<<MSTR)|(1<<SPR0)|(1<<SPR1);
}

//Control SS=CHIP SELECT ADXL345
void clear_spics(){
    PORTB |= _BV(SPI_CS); // high
    _delay_ms(30);}

void set_spics(){
    PORTB &=~ _BV(SPI_CS); // low
   _delay_ms(30);}

void ADXL_init(void){
//init ADXL
ADXL_write(DATA_FORMAT,0x08); //pełna rozdzielczość DATASHEET STRONA 26 4SPI
ADXL_write(BW_RATE, 0x0A) ; //100hz
ADXL_write(POWER_CTL,0x08);
ADXL_write(FIFO, 0); //FIFO Wylacozny

}

/*------------------------główna petla---------------------------*/

int main(void)
{
    /* tab for strings */
    char str1[] = "Czujnik ADXL 345";

    /* init lcd*/
    lcd_init();
    /* LCD UP  */
    LCD_DISPLAY(LCDDISPLAY);
    LCD_CLEAR;         
LCD_LOCATE(1,1);
lcd_puts(str1);
init_port();/*port init*/
Init_SPI();//SPIUP
_delay_ms(50);
ADXL_init(); //ADXL345 config
_delay_ms(50);
while(1)
{   
int8_t k;   

k=Read_Byte_SPI( DEVICEID );
lcd(k);
_delay_ms(5000);

k=ADXL_read(DATAX0);
lcd(k);
_delay_ms(5000); 
  } 
```

`>

# android - 如何将soap请求中的字符串数组发送到webservice

> ID：13379418
> 
> 赞同：1
> 
> 时间：2012-11-14T13:08:09.443
> 
> 标签：android, web-services, wsdl, ksoap2

我无法将我的请求发送到网络服务。

字符串数组不接受并向我显示错误。

我想在肥皂请求中发送数组字符串，但向我显示错误。

我的网络服务：

```
 This XML file does not appear to have any style information associated with it. The document tree is shown below.
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:typens="urn:HostIranSmsWebService" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" name="HostIranSmsWebService" targetNamespace="urn:HostIranSmsWebService">
<types>
<xsd:schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="urn:HostIranSmsWebService">
<xsd:complexType name="ArrayOfstring">
<xsd:complexContent>
<xsd:restriction base="soapenc:Array">
<xsd:attribute ref="soapenc:arrayType" wsdl:arrayType="xsd:string[]"/>
</xsd:restriction>
</xsd:complexContent>
</xsd:complexType>
<xsd:complexType name="ArrayOfint">
<xsd:complexContent>
<xsd:restriction base="soapenc:Array">
<xsd:attribute ref="soapenc:arrayType" wsdl:arrayType="xsd:int[]"/>
</xsd:restriction>
</xsd:complexContent>
</xsd:complexType>
<xsd:complexType name="AccountInfo">
<xsd:all>
<xsd:element name="numbers" type="typens:ArrayOfstring"/>
<xsd:element name="defaultNumber" type="xsd:string"/>
<xsd:element name="receiveUrl" type="xsd:string"/>
<xsd:element name="sent" type="xsd:int"/>
<xsd:element name="received" type="xsd:int"/>
<xsd:element name="credit" type="xsd:int"/>
<xsd:element name="remaining" type="xsd:int"/>
</xsd:all>
</xsd:complexType>
</xsd:schema>
</types>
<message name="send">
<part name="username" type="xsd:string"/>
<part name="password" type="xsd:string"/>
<part name="to" type="xsd:string"/>
<part name="msg" type="xsd:string"/>
<part name="from" type="xsd:string"/>
<part name="time" type="xsd:int"/>
</message>
<message name="sendResponse">
<part name="sendResponse" type="xsd:int"/>
</message>
<message name="sendToMany">
<part name="username" type="xsd:string"/>
<part name="password" type="xsd:string"/>
<part name="to" type="typens:ArrayOfstring"/>
<part name="msg" type="xsd:string"/>
<part name="from" type="xsd:string"/>
<part name="time" type="xsd:int"/>
</message>
<message name="sendToManyResponse">
<part name="sendToManyResponse" type="typens:ArrayOfint"/>
</message>
<message name="deliveryStatus">
<part name="username" type="xsd:string"/>
<part name="password" type="xsd:string"/>
<part name="recipientId" type="xsd:int"/>
</message>
<message name="deliveryStatusResponse">
<part name="deliveryStatusResponse" type="xsd:int"/>
</message>
<message name="verifyReceive">
<part name="username" type="xsd:string"/>
<part name="password" type="xsd:string"/>
<part name="ticket" type="xsd:string"/>
</message>
<message name="verifyReceiveResponse">
<part name="verifyReceiveResponse" type="xsd:boolean"/>
</message>
<message name="accountInfo">
<part name="username" type="xsd:string"/>
<part name="password" type="xsd:string"/>
</message>
<message name="accountInfoResponse">
<part name="accountInfoResponse" type="typens:AccountInfo"/>
</message>
<message name="changePassword">
<part name="username" type="xsd:string"/>
<part name="password" type="xsd:string"/>
<part name="newPassword" type="xsd:string"/>
</message>
<message name="changePasswordResponse">
<part name="changePasswordResponse" type="xsd:void"/>
</message>
<message name="changeTrafficRelay">
<part name="username" type="xsd:string"/>
<part name="password" type="xsd:string"/>
<part name="newURL" type="xsd:string"/>
</message>
<message name="changeTrafficRelayResponse">
<part name="changeTrafficRelayResponse" type="xsd:void"/>
</message>
<portType name="HostIranSmsWebServicePort">
<operation name="send">
<documentation>Send one SMS.</documentation>
<input message="typens:send"/>
<output message="typens:sendResponse"/>
</operation>
<operation name="sendToMany">
<documentation>Send one SMS to many.</documentation>
<input message="typens:sendToMany"/>
<output message="typens:sendToManyResponse"/>
</operation>
<operation name="deliveryStatus">
<documentation>Check SMS delivery status.</documentation>
<input message="typens:deliveryStatus"/>
<output message="typens:deliveryStatusResponse"/>
</operation>
<operation name="verifyReceive">
<documentation>Verify sms validity when you receive an sms</documentation>
<input message="typens:verifyReceive"/>
<output message="typens:verifyReceiveResponse"/>
</operation>
<operation name="accountInfo">
<documentation>Get account info.</documentation>
<input message="typens:accountInfo"/>
<output message="typens:accountInfoResponse"/>
</operation>
<operation name="changePassword">
<documentation>Change account password.</documentation>
<input message="typens:changePassword"/>
<output message="typens:changePasswordResponse"/>
</operation>
<operation name="changeTrafficRelay">
<documentation>Change traffic relay.</documentation>
<input message="typens:changeTrafficRelay"/>
<output message="typens:changeTrafficRelayResponse"/>
</operation>
</portType>
<binding name="HostIranSmsWebServiceBinding" type="typens:HostIranSmsWebServicePort">
<soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
<operation name="send">
<soap:operation soapAction="urn:HostIranSmsWebServiceAction"/>
<input>
<soap:body use="encoded" namespace="urn:HostIranSmsWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</input>
<output>
<soap:body use="encoded" namespace="urn:HostIranSmsWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</output>
</operation>
<operation name="sendToMany">
<soap:operation soapAction="urn:HostIranSmsWebServiceAction"/>
<input>
<soap:body use="encoded" namespace="urn:HostIranSmsWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</input>
<output>
<soap:body use="encoded" namespace="urn:HostIranSmsWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</output>
</operation>
<operation name="deliveryStatus">
<soap:operation soapAction="urn:HostIranSmsWebServiceAction"/>
<input>
<soap:body use="encoded" namespace="urn:HostIranSmsWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</input>
<output>
<soap:body use="encoded" namespace="urn:HostIranSmsWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</output>
</operation>
<operation name="verifyReceive">
<soap:operation soapAction="urn:HostIranSmsWebServiceAction"/>
<input>
<soap:body use="encoded" namespace="urn:HostIranSmsWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</input>
<output>
<soap:body use="encoded" namespace="urn:HostIranSmsWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</output>
</operation>
<operation name="accountInfo">
<soap:operation soapAction="urn:HostIranSmsWebServiceAction"/>
<input>
<soap:body use="encoded" namespace="urn:HostIranSmsWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</input>
<output>
<soap:body use="encoded" namespace="urn:HostIranSmsWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</output>
</operation>
<operation name="changePassword">
<soap:operation soapAction="urn:HostIranSmsWebServiceAction"/>
<input>
<soap:body use="encoded" namespace="urn:HostIranSmsWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</input>
<output>
<soap:body use="encoded" namespace="urn:HostIranSmsWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</output>
</operation>
<operation name="changeTrafficRelay">
<soap:operation soapAction="urn:HostIranSmsWebServiceAction"/>
<input>
<soap:body use="encoded" namespace="urn:HostIranSmsWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</input>
<output>
<soap:body use="encoded" namespace="urn:HostIranSmsWebService" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
</output>
</operation>
</binding>
<service name="HostIranSmsWebService">
<port name="HostIranSmsWebServicePort" binding="typens:HostIranSmsWebServiceBinding">
<soap:address location="http://sms.hostiran.net/webservice/v1/index.php"/>
</port>
</service>
</definitions> 
```

我的代码：

```
public String sendToMany(String username,String password,Category to,String msg,String from,Long time){
    SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    soapEnvelope.implicitTypes = true;
    soapEnvelope.dotNet = true;
    SoapObject soapReq = new SoapObject("urn:HostIranSmsWebService","sendToMany");
    soapReq.addProperty("username",username);
    soapReq.addProperty("password",password);
    soapEnvelope.addMapping("urn:HostIranSmsWebService","to",new Category().getClass());

    soapReq.addProperty("to",to);

    soapReq.addProperty("msg",msg);
    soapReq.addProperty("from",from);
    soapReq.addProperty("time",time);

    soapEnvelope.setOutputSoapObject(soapReq);
    HttpTransportSE httpTransport = new HttpTransportSE(url);

    try{

            httpTransport.call("urn:HostIranSmsWebService/sendToMany", soapEnvelope);

    }catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

public class Category extends Vector<String> implements KvmSerializable
{
    /**
     * 
     */
    private static final long serialVersionUID = -1166006770093411055L;

    @Override
    public Object getProperty(int arg0) {
            return this.get(arg0);
    }

    @Override
    public int getPropertyCount() {
            return this.size();
    }

    @Override
    public void getPropertyInfo(int arg0, Hashtable arg1, PropertyInfo arg2) {
            arg2.name = "string";
            arg2.type = PropertyInfo.STRING_CLASS;
    }

    @Override
    public void setProperty(int arg0, Object arg1) {
            this.add(arg1.toString());
    }
    } 
```

我的请求代码：

```
Category to =new Category();
to.add("1111111111");
to.add("2222222222");
to.add("3333333333");
String res = sendToMany("user1", "pass1", to, "hi", "",Long.valueOf(0)); 
```

日食中的错误：

```
11-14 16:19:51.317: D/msg(681): org.xmlpull.v1.XmlPullParserException: expected: END_TAG {http://schemas.xmlsoap.org/soap/envelope/}Body (position:END_TAG </{http://schemas.xmlsoap.org/soap/envelope/}SOAP-ENV:Fault>@2:199 in java.io.InputStreamReader@44c28540) 
```

有人可以帮我解决问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:50:19.067

请理解这一点“到目前为止，SOAP 编码仅由于某些历史原因而存在，标准 Web 服务框架不支持包括 Axis2、Metro 和 CXF 在内的 SAOP 编码。” 这在这篇文章中得到了清晰的解释，[http://ssagara.blogspot.com/2011/10/soap-encoding-and-axis2.html](http://ssagara.blogspot.com/2011/10/soap-encoding-and-axis2.html)

但即使你想使用它，基本上你的请求应该看起来像这样以匹配你的网络服务。

```
<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:HostIranSmsWebService" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:sendToMany soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
         <username xsi:type="xsd:string">?</username>
         <password xsi:type="xsd:string">?</password>
         <to xsi:type="urn:ArrayOfstring" soapenc:arrayType="xsd:string[]"/>
         <msg xsi:type="xsd:string">?</msg>
         <from xsi:type="xsd:string">?</from>
         <time xsi:type="xsd:int">?</time>
      </urn:sendToMany>
   </soapenv:Body>
</soapenv:Envelope> 
```

阅读此博客为您的项目生成一个工作客户端。[http://ssagara.blogspot.com/2011/10/soap-encoding-and-axis2.html](http://ssagara.blogspot.com/2011/10/soap-encoding-and-axis2.html)。正如它所描述的，您可以使用 Axis2 的 wsdl 编写脚本来为这个 wsdl 生成一个工作客户端。请仔细阅读博客并使用`wsdl2java.sh -uri service.wsdl -d xmlbeans`命令获取工作客户端。

您可以使用本教程来获得进一步的想法。[http://onjava.com/pub/a/onjava/excerpt/jsoap_5/index1.html?page=2](http://onjava.com/pub/a/onjava/excerpt/jsoap_5/index1.html?page=2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T14:36:52.643

我可以使用以下内容向 SOAP (WCF) 端点发送 XML 请求：（*发布我的“确切”版本以避免误译）*

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>
        <MyServiceAction xmlns="http://myservicehost.com/">
            <somestringparameter>aaaaaaaa-0b11-432e-bf14-d8bb5e52e56a</somestringparameter>
            <anotherstring>dont care</anotherstring>
            <thisisanarray arrayType="string[]"><item type="string">OMS.PartnerService</item></thisisanarray>
        </MyServiceAction >
    </soap:Body>
</soap:Envelope> 
```

对应一个（C#）方法：

```
[OperationContract(Name = "MyServiceAction")]
bool MyServiceAction(string somestringparameter, string anotherstring, string[] thisisanarray) { ... } 
```

在我的例子中，我不需要指定肥皂信封 ( `<soap:Envelop xmlns:soap...>`) 和我的 Action 的命名空间 ( `<MyServiceAction xmlns=...>`) 之外的命名空间。`string[]`我已经看到了为属性值和声明特定命名空间的其他示例`string`，但我不需要它们。

但是从您的 Eclipse 错误中听起来您的 XML 生成不正确？你必须手动关闭一个元素吗？

# python - Python ZeroMQ REQ/REP 客户端绑定永远等待

> ID：13379425
> 
> 赞同：3
> 
> 时间：2012-11-14T13:08:50.907
> 
> 标签：python, zeromq

我只是在 python 中为一个项目尝试 zeromq。我正在尝试绑定“客户端”并将服务器连接到固定位置。我有一个简单的 REQ/REP 设置，可以在本地正常工作，但似乎在网络上什么也没做。如果我反转绑定，那么这也适用于网络。

相关代码为：

```
def respond(sock):
    message = sock.recv()
    response = "world"
    sock.send(response)
    print("Received '{0:s}', sent '{1:s}'.".format(message, response) )

def request(sock):
    message = "Hello"
    sock.send(message)
    response = sock.recv()
    print("Sent '{0:s}', recieved '{1:s}'".format(message, response) )

def main():
    opts = get_opts()
    if opts.client:
        sock = CONTEXT.socket(zmq.REQ)
        sock.bind("tcp://*:{0:d}".format(opts.port) )
        request(sock)
    if opts.server:
        sock = CONTEXT.socket(zmq.REP)
        sock.connect("tcp://{0:s}:{1:d}".format(opts.address, opts.port) )
        while True:
            respond(sock) 
```

这里有一个（非）工作示例：[https ://gist.github.com/4071783](https://gist.github.com/4071783)

连接到远程地址时，似乎什么也没有发生。如果我检查 tcpdump，我当然可以看到端口上的活动：

```
12:20:18.846927 IP server.58387 > client.5555: Flags [.], ack 1, win 3650, options [nop,nop,TS val 718051 ecr 46170252], length 0
12:20:18.847156 IP client.5555 > server.58387: Flags [P.], seq 1:3, ack 1, win 227, options [nop,nop,TS val 46170252 ecr 718051], length 2
12:20:18.847349 IP server.58387 > client.5555: Flags [P.], seq 1:3, ack 1, win 3650, options [nop,nop,TS val 718051 ecr 46170252], length 2
12:20:18.847373 IP client.5555 > server.58387: Flags [.], ack 3, win 227, options [nop,nop,TS val 46170252 ecr 718051], length 0
12:20:18.847553 IP client.5555 > server.58387: Flags [P.], seq 3:16, ack 3, win 227, options [nop,nop,TS val 46170252 ecr 718051], length 13
12:20:18.847645 IP server.58387 > client.5555: Flags [.], ack 3, win 3650, options [nop,nop,TS val 718051 ecr 46170252], length 0
12:20:18.848286 IP server.58387 > client.5555: Flags [.], ack 16, win 3650, options [nop,nop,TS val 718051 ecr 46170252], length 0 
```

但是`send()`and`recv()`仍然被阻塞，好像在等待连接一样。有谁知道这是什么或可以建议如何调试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:22:54.273

你能ping通远程地址吗？0MQ 只是在这个级别使用 TCP，所以如果连接失败，那是因为您尝试连接的地址无法访问。

# sql - 以编程方式创建用于删除和创建具有依赖顺序的数据库视图的脚本

> ID：13379426
> 
> 赞同：-1
> 
> 时间：2012-11-14T13:08:50.960
> 
> 标签：sql, sql-server, dependencies, views

我只看到[这个话题](https://stackoverflow.com/questions/5541086/script-all-views-functions-proceudres-in-a-sql-server-database-in-dependency-ord)。这与我的问题非常相似。但我不想使用任何第三方来创建脚本。我想以依赖顺序和编程方式创建删除和创建数据库视图的脚本。我怎么能做这样的事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T10:49:37.170

最后我发现我的答案是这样的，但请记住，这仅适用于具有一个嵌套级别的视图。不多 ！：

```
SELECT MIN(Row) AS Row, CreateCmd FROM ( 
SELECT Row_Number() OVER (ORDER BY S.Row) As Row, S.CreateCmd FROM ( 
SELECT 0 AS Row, RTRIM(ISNULL(smv.definition, ssmv.definition)) AS CreateCmd 
FROM sys.all_objects AS v 
LEFT OUTER JOIN sys.sql_modules AS smv ON smv.object_id = v.object_id 
LEFT OUTER JOIN sys.system_sql_modules AS ssmv ON ssmv.object_id = v.object_id 
INNER JOIN (SELECT object_id, referenced_major_id FROM sys.sql_dependencies 
GROUP BY object_id, referenced_major_id) AS a ON v.object_id = a.referenced_major_id
WHERE (v.type = 'V' OR v.type = 'P' OR v.type = 'IF' OR v.type = 'TF' OR v.type =    'FN') 
AND SCHEMA_NAME(v.schema_id) = N'dbo' AND is_ms_shipped <> 1 
AND smv.execute_as_principal_id IS NULL AND ssmv.execute_as_principal_id IS NULL 
GROUP BY v.Name, smv.definition, ssmv.definition 
UNION ALL 
SELECT 1 AS Row, RTRIM(ISNULL(smv.definition, ssmv.definition)) AS CreateCmd 
FROM sys.all_objects AS v 
LEFT OUTER JOIN sys.sql_modules AS smv ON smv.object_id = v.object_id 
LEFT OUTER JOIN sys.system_sql_modules AS ssmv ON ssmv.object_id = v.object_id 
INNER JOIN (SELECT object_id, referenced_major_id FROM sys.sql_dependencies 
GROUP BY object_id, referenced_major_id) AS a ON v.object_id = a.object_id
WHERE (v.type = 'V' OR v.type = 'P' OR v.type = 'IF' OR v.type = 'TF' OR v.type = 'FN') 
AND SCHEMA_NAME(v.schema_id) = N'dbo' AND is_ms_shipped <> 1 
AND smv.execute_as_principal_id IS NULL AND ssmv.execute_as_principal_id IS NULL 
GROUP BY v.Name, smv.definition, ssmv.definition 
) S GROUP BY S.Row, CreateCmd 
) D GROUP BY CreateCmd ORDER BY Row 
```

# php - 使 $_POST 数据可以安全地通过电子邮件发送

> ID：13379427
> 
> 赞同：3
> 
> 时间：2012-11-14T13:08:54.417
> 
> 标签：php, email

我了解`mysql_real_escape_string`等等，但是当我只是发送电子邮件时呢？

所以我有表单和文本框，直接通过电子邮件将`$_POST`数据发送给用户是否有任何漏洞？我猜他们将无法执行任何 PHP .. 或者如果他们从网址运行它，他们可以吗？我不确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T13:11:50.167

如果直接发送到电子邮件，那就没问题了。如果它被存储在数据库中以显示在管理员页面（如帮助台等）上，那么它需要为 html 输出和 mysql 进行转义。您可以使用许多函数来转义 mysql：

*   如果使用 PDO，则使用准备语句： http: [//php.net/manual/en/pdo.prepare.php](http://php.net/manual/en/pdo.prepare.php)
*   否则我会使用： http: [//php.net/manual/en/mysqli.real-escape-string.php](http://php.net/manual/en/mysqli.real-escape-string.php)

这就是说，因为电子邮件可以包含 HTML，如果您不想收到人们在其中放入虚假 HTML 的电子邮件`<blink>`（这真的很烦人），那么您可以使用`htmlspecialchars()`： http: [//php.net/manual/en/function .htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php)

如果您担心电子邮件中的 Javascript，那么使用`htmlspecialchars()`上面提到的也可以避免这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T13:22:59.773

问题是**不信任用户输入**。最大的问题是，当您从**POST**变量中设置电子邮件地址或密件抄送时。可以在请求上设置任何电子邮件地址。

但是可以通过您的表单向用户发送链接或其他内容。为此，您应该实施验证码。机器人无法将带有定义值的表单发送给任何人。

最后一个解决方案是表单中的隐藏文本字段。您可以使用 CSS 隐藏它们。当该字段不为空时，您知道机器人已填充它们。

[但是我认为当你用htmlspecialchars()](http://php.net/manual/en/function.htmlspecialchars.php)转义你的 POST 变量时它很好

所以有很多可能性来保护表格。您不仅应该使用其中之一，还应该信任用户。

# c# - 带有 GetFields 和 GetProperties 的 DumpObject 例如带有嵌套类

> ID：13379431
> 
> 赞同：3
> 
> 时间：2012-11-14T13:09:26.387
> 
> 标签：c#, reflection, compact-framework, dump, getproperties

这是我在stackoverflow中的第一个问题，我是使用反射的初学者。

我想转储对象实例的所有值以供参考（以跟踪测试中使用的值）。我使用的是 Compact Framework 3.5，而不是完整的框架。请记住您的建议。

想象一下以下课程：

```
public class Camera : IDisposable
{
    public Camera.FilenameProperties SnapshotFile;
    public double DigitalZoomFactor { get; set; }
    public bool DisplayHistogram { get; set; }
    public int ImageUpdateInterval { get; set; }
    public Camera.ImprintCaptionPosType ImprintCaptionPos { get; set; }
    public string ImprintCaptionString { get; set; }
} 
```

其中“特殊”类型是：

```
 public class FilenameProperties
    {
        public string Directory { get; set; }
        public string Filename { get; set; }
        public Camera.FilenamePaddingType FilenamePadding { get; set; }
        public Camera.ImageType ImageFormatType { get; set; }
        public Camera.ImageResolutionType ImageResolution { get; set; }
        public int JPGQuality { get; set; }

        public void Restore();
        public void Save();

        public enum Fnametype
        {
            tSnapshot = 0,
            tCircularCapture = 1,
        }
    }
    public enum ImprintCaptionPosType
    {
        Disabled = 0,
        LowerRight = 1,
        LowerLeft = 2,
        LowerCenter = 3,
        UpperRight = 4,
        UpperLeft = 5,
        UpperCenter = 6,
        Center = 7,
    } 
```

现在，我可以获得相机实例的“基本”名称和属性以及字段名称：

```
Camera cam = new Camera();
dumpProperties(cam);
...
    void dumpProperties(object oClass)
    {
        System.Diagnostics.Debug.WriteLine(oClass.ToString());

        FieldInfo[] _Info = oClass.GetType().GetFields(BindingFlags.Public | BindingFlags.Instance);
        for(int i = 0; i<_Info.Length; i++)
        {
            System.Diagnostics.Debug.WriteLine(_Info[i].Name + ":'" + _Info[i].GetValue(oClass).ToString()+"'");
        }

        foreach (PropertyInfo pi in oClass.GetType().GetProperties()) 
        {
            System.Diagnostics.Debug.WriteLine(pi.Name + ":'" + pi.GetValue(oClass, null) 
                + "' Type=" + pi.PropertyType.ToString());
        }
    } 
```

然后得到这样的东西：

```
Intermec.Multimedia.Camera
SnapshotFile:'Intermec.Multimedia.Camera+FilenameProperties'
DigitalZoomFactor:'1' Type=System.Double
DisplayHistogram:'False' Type=System.Boolean
ImageUpdateInterval:'1' Type=System.Int32
ImprintCaptionPos:'Disabled' Type=Intermec.Multimedia.Camera+ImprintCaptionPosType
ImprintCaptionString:'' Type=System.String 
```

现在，对于像 DigitalZoomFactor 和 ImageUpdateInterval 这样的简单属性，我得到了我需要的东西，但是对于嵌套类（正确的措辞？），我只得到类型，例如使用 SnapshotFile。对于嵌套枚举，我得到的值与“ImprintCaptionPos”一样。

如何获取嵌套值的值，例如 SnapshotFile 字段/属性的 FilenameProperties.Filename？

如果我使用 dumpProperties(cam.SnapshotFile)，我会得到我正在寻找的输出：

```
Intermec.Multimedia.Camera+FilenameProperties
Directory:'\Program Files\FrmCamera' Type=System.String
Filename:'myphoto' Type=System.String
ImageFormatType:'JPG' Type=Intermec.Multimedia.Camera+ImageType
FilenamePadding:'None' Type=Intermec.Multimedia.Camera+FilenamePaddingType
ImageResolution:'Medium' Type=Intermec.Multimedia.Camera+ImageResolutionType
JPGQuality:'100' Type=System.Int32 
```

但是我怎样才能自动化呢？

我做了很多搜索和测试编码，但无法找到解决方案。问题似乎是让该字段的实例能够遍历它。

我没有 Camera 类的源代码，因此无法在其中添加或删除代码。

任何人都可以帮忙吗？

我需要得到类似调试器显示的东西： ![在此处输入图像描述](../Images/2a4e821ece9764ef488616e63005e88a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:19:13.257

如果您的属性是一个类，您只需要使用递归，并循环回该方法。这是我们使用的 XML 序列化例程的示例，它使用反射有效地遍历目标的属性，并`XElement`从中生成一个。您的逻辑会有所不同，因为您不会构建 XML，但您将要做的事情的结构将非常相似。

```
public XElement Serialize(object source, 
                          string objectName, 
                          bool includeNonPublicProperties)
{
    XElement element;
    var flags = BindingFlags.Instance | BindingFlags.Public;
    if(includeNonPublicProperties) 
    {
        flags |= BindingFlags.NonPublic;
    }

    var props = source.GetType().GetProperties(flags);

    var type = source.GetType();

    string nodeName;
    if(objectName == null)
    {
        if (type.IsGenericType)
        {
            nodeName = type.Name.CropAtLast('`');
        }
        else
        {
            nodeName = type.Name;
        }            
    }
    else
    {
        nodeName = objectName;
    }

    element = new XElement(nodeName);

    foreach (var prop in props)
    {
        string name = prop.Name;
        string value = null;
        bool valIsElement = false;

        if (!prop.CanRead) continue;

        if(prop.PropertyType.IsEnum)
        {
            value = prop.GetValue(source, null).ToString();
        }
        else 
        {
            string typeName;

            if (prop.PropertyType.IsNullable())
            {
                typeName = prop.PropertyType.GetGenericArguments()[0].Name;
            }
            else
            {
                typeName = prop.PropertyType.Name;
            }

            switch (typeName)
            {
                case "String":
                case "Boolean":
                case "Byte":
                case "TimeSpan":
                case "Single":
                case "Double":
                case "Int16":
                case "UInt16":
                case "Int32":
                case "UInt32":
                case "Int64":
                case "UInt64":
                    value = (prop.GetValue(source, null) ?? string.Empty).ToString();
                    break;
                case "DateTime":
                    try
                    {
                        var tempDT = Convert.ToDateTime(prop.GetValue(source, null));
                        if (tempDT == DateTime.MinValue) continue;
                        value = tempDT.ToString("MM/dd/yyyy HH:mm:ss.fffffff");
                    }
                    catch(Exception ex)
                    {
                        continue;
                    }
                    break;
                default:
                    var o = prop.GetValue(source, null);
                    XElement child;
                    if (o == null)
                    {
                        child = new XElement(prop.Name);
                    }
                    else
                    {
                        child = Serialize(o, prop.Name, includeNonPublicProperties);
                    }

                    element.Add(child);
                    valIsElement = true;
                    break;
            }
        }

        if (!valIsElement)
        {
            element.AddAttribute(name, value);
        }
    }

    return element;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:47:20.847

[好的，我找到了一种方法（一种解决方法）来使用此处](http://geekswithblogs.net/paulwhitblog/archive/2007/07/20/114076.aspx "这里")的代码获取所有属性（在 XML 中但谁在乎）：

输出类似于 xml，但对我来说可以接受。这里摘录：

```
<xml version="1.0" encoding="utf-8">
<Camera xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
...
    <ImprintCaptionPos>Disabled</ImprintCaptionPos>
        <SnapshotFile>
        <Directory>\\Program Files\\FrmCamera</Directory>
        <Filename>myphoto</Filename>
        <ImageFormatType>JPG</ImageFormatType>
        <FilenamePadding>None</FilenamePadding>
        <ImageResolution>Medium</ImageResolution>
        <JPGQuality>100</JPGQuality>
    </SnapshotFile>
... 
```

在我的代码中，我只需要调用

```
 string s = serialization.mySerialize.SerializeObject<Intermec.Multimedia.Camera>(cam); 
```

获取实例所有当前属性的“转储”。

感谢大家的帮助。可能我的问题被误解了，反思无法给出我想要的。

谢谢

约瑟夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T13:29:55.507

您必须像对外部类所做的那样对所有内部对象成员进行迭代。将是您为完整的 .NET 类型实现它的练习。下面是简单实现的伪代码

```
void dumpProperties(object target)
{
    if (target.GetType().IsSimple() || target.GetType().IsMethodImplemented("ToString"))
        System.Diagnostics.Debug.WriteLine(target.ToString());
    else if (target is IEnumerable)
    {
        foreach (object item in (IEnumerable)target)
        {
            System.Diagnostics.Debug.WriteLine(dumpProperties(target));
        }
    }
    else
    {
        foreach (FieldInfo fieldInfo in target.GetType().GetFields(BindingFlags.Public | BindingFlags.Instance))
        {
             System.Diagnostics.Debug.WriteLine(dumpProperties(fieldInfo.FieldHandle.Value));
        }
        foreach (PropertyInfo propertyInfo in oClass.GetType().GetProperties())
        {
                  System.Diagnostics.Debug.WriteLine(dumpProperties(propertyInfo.GetGetMethod().MethodHandle.Value));
        }
    }
} 
```

或者您可以使用[Cinchoo 框架](http://cinchoo.com/category/utilities/?orderby=ID&order=ASC)，它具有转储任何对象的内置功能。

```
Console.WriteLine(ChoObject.ToString(camera)); 
```

# javascript - 在单个函数下在 visualsearch.js 中集成方面匹配和值匹配

> ID：13379432
> 
> 赞同：3
> 
> 时间：2012-11-14T13:09:35.977
> 
> 标签：javascript, jquery, backbone.js, autocomplete, jquery-autocomplete

最近我一直在寻找一个好的自动完成插件，我遇到了 visualsearch.js 插件。它真的让我很感兴趣。我想知道的是，不是为用户选择的构面提供值匹配，而是可以在所有构面类别中获取用户输入的值匹配。就像用户输入“AP”一样，用户应该在“access”、“country”等所有方面都匹配到单词“AP”。

为了正确解释，我想以编程方式获取构面和匹配值。不是通过一组固定的输入。我找到了一种方法，就是这样

[http://jsfiddle.net/HRuAP/49/](http://jsfiddle.net/HRuAP/49/)

因此，如果我们在 job facet 中选择 job.name，它应该选择 facet name as`job : job.name`而不是将其显示为`job.name:`并再次进行一些值匹配。我试图将值匹配和方面匹配集成到一个函数中，因此两者都发生在单击一次。

我对视觉搜索回调的输入是 JSONJ 格式。`{"Regions":[{"name":"africa"}],"Company":[{"name":"google"}],"Persons":[{"name":"marc zuckerberg"},{"name":"matt romney"}]}`

是否可以使用视觉搜索来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:15:44.627

你可以试试这个，我也有同样的情况。

尝试混合两个插件。

一个是 jquery 自动完成，另一个是[http://ioncache.github.com/Tag-Handler/](http://ioncache.github.com/Tag-Handler/)来创建标签

首先，我将“类别”和“多值”脚本集成到一个中，并在自动完成中添加了分面类别划分。

然后添加[http://ioncache.github.com/Tag-Handler/](http://ioncache.github.com/Tag-Handler/)以便在输入或选择时创建标签

这是脚本部分

```
function split( val ) {
            return val.split( /,\s*/ );
        }

function extractLast( term ) {
            return split( term ).pop();
        }

$(document).ready(function(){
$(".methodButton").button();

                $("#callback_tag_handler").tagHandler({
                    autocomplete: false,
                    onAdd: function(tag) { console.log('Added tag: ' + tag); return 1; },
                    onDelete: function(tag) { console.log('Deleted tag: ' + tag); return 1; }
                });

  $.widget( "custom.catcomplete", $.ui.autocomplete, {
        _renderMenu: function( ul, items ) {
            var that = this,
                currentCategory = "";
            $.each( items, function( index, item ) {
                if ( item.category != currentCategory ) {
                    ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                    currentCategory = item.category;
                }
                that._renderItemData( ul, item );
            });
        }
    });  
       var data = [
            { label: "anders", category: "" },
            { label: "andreas", category: "" },
            { label: "antal", category: "" },
            { label: "annhhx10", category: "Products" },
            { label: "annk K12", category: "Products" },
            { label: "annttop C13", category: "Products" },
            { label: "anders andersson", category: "People" },
            { label: "andreas andersson", category: "People" },
            { label: "andreas johnson", category: "People" }
        ];

       $( ".tagInputField" )
            // don't navigate away from the field on tab when selecting an item
            .live( "keydown", function( event ) {
                if ( event.keyCode === $.ui.keyCode.TAB &&
                        $( this ).data( "autocomplete" ).menu.active ) {
                    event.preventDefault();
                }
            }).catcomplete({
                minLength: 0,
                source: function( request, response ) {
                    // delegate back to autocomplete, but extract the last term
                    response( $.ui.autocomplete.filter(
                        data, extractLast( request.term ) ) );
                },
                focus: function() {
                    // prevent value inserted on focus
                    return false;
                },
                select: function( event, ui ) {
                    var terms = split( this.value );
                    // remove the current input
                    terms.pop();
                    // add the selected item
if(ui.item.category=" "){
terms.push("Text : "+ ui.item.value );
}else{
terms.push(ui.item.category+" : "+ ui.item.value );
}

                    // add placeholder to get the comma-and-space at the end
//addTag();
                    terms.push( "" );
                    this.value = terms.join( " " );
                    return false;
                }
            });
      }); 
```

HTML部分是

```
<div id="container">
            <ul id="callback_tag_handler"></ul>
</div> 
```

谢谢 Vineeth

# html - 如何在其他两个 div 之间放置一个 div

> ID：13379435
> 
> 赞同：1
> 
> 时间：2012-11-14T13:09:46.200
> 
> 标签：html, jquery-ui-draggable

我有一个带有许多 DIV 的页面。我希望能够单击 div 并将其拖动到新位置。当我放下 div 时，我希望页面上的其他 div 能够“腾出空间”并继续前进！所以我的页面看起来像这样。

![页面上的 div](../Images/539fad8b69c709b2ce3e74428aa46735.png)

我正在使用 jQuery EasyUI 使 div 成为“可拖动的”，但是当我将 div 放到新位置时，我得到...

![我不想要的](../Images/61617699654656f6cee211580aa62959.png)

我想要的是 div 像这样“卡入”到位......

![我想要的是](../Images/b031c83eafb0738a3ae4e06a59667337.png)

我一直在寻找有关如何执行此操作的线索，但找不到。我真的很感激任何指针甚至提示。

**编辑：** 我应该补充一点，这一切都保存在 MVC 视图中。

# java - 获取直播电视视频流（像素）

> ID：13379436
> 
> 赞同：0
> 
> 时间：2012-11-14T13:09:51.050
> 
> 标签：java, android, streaming, google-tv, television

有没有办法获得直播电视流，例如在像素级别上对其进行分析。

我的目标是检查直播电视流（例如使用 java），例如广播电台徽标是否可见。

有没有机会通过谷歌电视获得这个流？
是否有机会通过笔记本电脑的 dvb-t 卡或 dvb-s 接收器获得此流？

需要任何进一步的信息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T23:21:31.950

不，Google TV 需要遵守[HDCP](http://en.wikipedia.org/wiki/Hdcp) - 所以他们不能让您触摸电视流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-11T01:42:45.380

2014 LG EzySign 电视支持 HDMI 输入“电视节目”的显示，可缩放以显示在使用 Adob​​e AIR 桌面应用程序开发的模板中，该模板允许希望在与电视相同的屏幕上显示其他媒体的用户填充模板程序。

2014 年三星智能标牌电视在同样的事情上做得更好。

大多数（如果不是全部）电视制造商已经修改了他们的电视设备，以支持我们在硬件和软件中称为画中画 (PIP) 的比喻。

所以这不是真的，而且从来没有这样说......“不。Google TV 需要遵守 HDCP - 所以他们不能让你触摸电视流。”

是的，谷歌和我们所有人都需要遵守 HDCP，但是当涉及到侵犯版权的索赔时，硬件中的 HDCP 合规性和软件中的 HDCP 合规性是两件不同的事情，因此，早期的声明是一个似是而非的论点，无法得出合理的结论.

HDCP 本身并没有办法禁止 PIP 的使用和显示，许多电视设备在硬件中合法支持了几十年，直到那时，因为没有人有软件在软件中进行 PIP。此外，当前的电视开发平台证明了这一说法。简单地确定 HDCP 内容将以哪种屏幕分辨率显示并不侵犯版权，或者无论 PIP 是在硬件中完成还是 PIP 是在软件中完成，PIP 都不存在。

我一直在挑战律师约 10 年，以证明 FUD 持续存在，但没有人能够证明他们的主张；他们正在做的是试图阻碍创新。

这也似乎是事实，Android L 现在支持在软件中进行 PIP，但具体如何以及如何仍然是模糊的。这些是我能够确定的事实，这就是我今晚在这里的原因……

..看看其他人是否已经在尝试学习如何使用 Android L OS 以编程方式管理 PIP

# jquery - Jquery UI Autocomplete 不再允许用鼠标选择选项

> ID：13379439
> 
> 赞同：5
> 
> 时间：2012-11-14T13:09:56.350
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我最近更新了 jquery ui 及其自动完成插件 - 但是在较新的版本中，它不会让我通过鼠标单击来选择选项，我必须使用向上和向下箭头。如何通过鼠标单击重新启用选择？

顺便说一句，新版本是 1.9.1，旧版本是 1.8.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T09:17:30.397

在我的情况下，鼠标选择功能被过时的第三方 jQuery 插件禁用。这个线程让我知道可能出了什么问题：http: [//forum.jquery.com/topic/autocomplete-click-to-select-item-not-working-in-1-9-1](http://forum.jquery.com/topic/autocomplete-click-to-select-item-not-working-in-1-9-1)

我使用的是旧版本的 jquery 验证插件（https://github.com/jzaefferer/jquery-validation）。我一个接一个地禁用了一个插件，看看是哪个导致了不当行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-01T12:59:56.400

我遇到了同样的问题，即使使用当时 1.11.4 可用的最新版本的 jquery-ui

**检查文件jquery-ui.js**中的源代码，我发现了这样一段：

```
"click .ui-menu-item": function( event ) {
                    var target = $( event.target );
                    if ( !this.mouseHandled && target.not( ".ui-state-disabled" ).length ) {
                        this.select( event );

                        // Only set the mouseHandled flag if the event will bubble, see #9469.
                        if ( !event.isPropagationStopped() ) {
                            this.mouseHandled = true;
                        } 
```

问题是`mouseHandled`var 设置为`true`. 但它只有在`event`传播没有停止的情况下才会发生。

因此，作为解决方案，我像这样定义了我的自动完成功能：

```
$('.autocomplete').autocomplete({
  source: ['value1','value2','value3','value4'], //my source
  select: function(event, ui){
    event.stopPropagation(); //the select event will work next time you click
    //your logic comes here ...
  }
}) 
```

它对我有用，我希望它对你有用！=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T21:36:57.833

最新版本已修复此问题。

[只需从http://jqueryvalidation.org/](http://jqueryvalidation.org/)更新到最新版本的 jquery.validate.js 。例如下载微软的Ajax CDN（欢迎盗链） [http://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.1/jquery.validate.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.1/jquery.validate.js)

# javascript - 如何使用带有数据属性的 jquery .not 或 .filter？

> ID：13379443
> 
> 赞同：1
> 
> 时间：2012-11-14T13:10:10.987
> 
> 标签：javascript, jquery, jquery-mobile, filter, selector

今天的 Javascript 问题...我正在努力让选择器正确。

`jqmData(bound) === true`我需要选择jQuery 链式语句中没有的元素。这就是我所拥有的：

```
var swipesOnPage = $('div.photoswipeable');
...
swipesOnPage.not(':jqmData(bound="true")')
            .jqmData('bound', true )
            .each( function(){
                // do stuff
            }); 
```

我需要标记接受“治疗”的标签，这样我就不会在它们上重新运行代码。但是我无法正确选择选择器，因此我设置的所有元素`jqmData("bound",true)`每次都会重新选择。

**问题：**
如何正确使用带有数据属性的`not`or语句？`filter`

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:11:54.837

```
var $someCollection = $('div.photoswipeable').filter(function() {
    return $(this).jqmData("bound") !== true;
}); 
```

# android - 获取 Android 设备上的设置列表

> ID：13379444
> 
> 赞同：0
> 
> 时间：2012-11-14T13:10:12.137
> 
> 标签：android

我想获取 Android 设备上所有设置的列表。那就是Wi-Fi、蓝牙、声音、显示……这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:17:28.880

您搜索的大部分内容都在 PackageManager 中：尝试`getPackageManager().hasSystemFeature(PackageManager.FEATURE_BLUETOOTH);` 检查此页面以获得其他信息：http: [//developer.android.com/reference/android/content/pm/PackageManager.html](http://developer.android.com/reference/android/content/pm/PackageManager.html)。这不是您真正想要的列表，但我希望它对您有所帮助。

# android - 是否有任何工具/插件可以在调试/运行时监控应用程序的内存使用情况

> ID：13379445
> 
> 赞同：4
> 
> 时间：2012-11-14T13:10:14.357
> 
> 标签：android, eclipse

我正在创建一个适用于大型图像和数据缓存的应用程序。我正在使用一款高端型号的手机，我相信它可以比其他手机更好地处理内存问题。只是想确保它也可以在其他手机上执行。eclipse中是否有任何工具或应用程序可以监控内存使用情况。如果我能看到堆大小，那就太好了；活动结束后是否立即对数据进行垃圾收集；等等

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:30:53.693

您要查找的主要是 DDMS 中的堆和分配跟踪器。在 Eclipse 中，您可以通过单击打开 DDMS 透视图`Window->Open Perspective->Other...->DDMS`。

进入透视图后，您可以单击要跟踪的设备，在选项卡中找到要跟踪的应用程序`Devices`。单击`Update Heap`按钮（它是一个绿色圆柱图标），`Heap`右侧的选项卡将打开。Allocation Track 在该角度也可用于跟踪对象分配。

除此之外，还有[Eclipse Memory Analyzer](http://www.eclipse.org/mat/)工具可能会派上用场。

[DDMS 文档。](http://developer.android.com/tools/debugging/ddms.html)

[相关答案。](https://stackoverflow.com/questions/6766898/monitor-the-memory-ocuppied-by-my-app-in-android)

# javascript - 如何将多列 radcombo 框值绑定到文本框客户端？

> ID：13379446
> 
> 赞同：0
> 
> 时间：2012-11-14T13:10:19.407
> 
> 标签：javascript, telerik, rad-controls, radcombobox

我正在使用多列 rad 组合框，因为我有 5 列，如代码、名称、描述、日期、备注。当组合框选择更改时，除了组合框的值字段和文本字段外，我必须将这 3 列值绑定到 3 个文本框。任何人都知道请分享一个例子。

我的组合框的 aspx 页面代码是

```
<table>
<tr>
<td>
    <telerik:RadComboBox ID="cmbTendernoticeno" runat="server" MarkFirstMatch="true" 
                                                        AllowCustomText="false" TabIndex="2" DropDownWidth="230px" HighlightTemplatedItems="true"
                                                        EmptyMessage="--Select--" AutoPostBack="True" CausesValidation="false"
                                                         onselectedindexchanged="cmbTendernoticeno_SelectedIndexChanged">

    <HeaderTemplate>
        <table style="width: 200px;">
            <tr>
                <td style="width: 100px;">
                    Tendor No.
                </td>
                <td style="width: 100px;">
                    Tendor date
                </td>
               <td style="width: 100px;">
                    Code
                </td>
                <td style="width: 100px;">
                    Code
                </td>
                <td style="width: 100px;">
                    Code
                </td>

            </tr>
        </table>
    </HeaderTemplate>
    <ItemTemplate>
        <table style="width: 200px;">
            <tr>
                <td style="width: 100px;">
                    <%#DataBinder.Eval(Container.DataItem, "NOTICE_NO")%>
                </td>
                <td style="width: 100px;">
                    <%#DataBinder.Eval(Container.DataItem, "NOTICE_DATE", "{0:dd/MMM/yyyy}")%>
                </td>
                 <td style="width: 100px;">
                    <%#DataBinder.Eval(Container.DataItem, "ACCEPT_DATE")%>
                </td>
                 <td style="width: 100px;">
                    <%#DataBinder.Eval(Container.DataItem, "TENDER_OPEN_DATE")%>
                </td>
                 <td style="width: 100px;">
                    <%#DataBinder.Eval(Container.DataItem, "OPENING_PLACE")%>
                </td>
            </tr>
        </table>
    </ItemTemplate>
    </telerik:RadComboBox>
</td>
</tr>
<tr>
    <td>
        <label>
            Tender Date</label><sup>*</sup>
    </td>
    <td>
        :
    </td>
    <td>
        <telerik:RadTextBox ID="txtTenderDate" runat="server" TabIndex="3" Enabled="false">
        </telerik:RadTextBox>

    </td>
    <td>
    </td>
    <td>
        <label>
            Last Date for reciept of Tender</label><sup>*</sup>
    </td>
    <td>
        :
    </td>
    <td>
        <telerik:RadTextBox ID="txtLastdtforrcptTender" runat="server" TabIndex="4" Enabled="false">
        </telerik:RadTextBox >

    </td>
</tr>
<tr>
    <td>
        <label>
            Date of Opening</label><sup>*</sup>
    </td>
    <td>
        :
    </td>
    <td>
        <telerik:RadTextBox  ID="txtDateofOpening" TabIndex="5" runat="server" Enabled="false">
        </telerik:RadTextBox >

    </td>
    <td>
    </td>
    <td>
        <label>
            Place of Opening</label><sup>*</sup>
    </td>
    <td>
        :
    </td>
    <td>
        <telerik:RadTextBox ID="txtPlaceofopening" MaxLength="500" runat="server" TabIndex="6" Enabled="false">
            <ClientEvents OnKeyPress="validateAlphanumeric" />
        </telerik:RadTextBox>

    </td>
</tr>
</table> 
```

cs文件代码是

```
 public void fillTendernoticeno()
        {
            DataSet ds = new DataSet();
            ds = ObjpsBal.fillTendernoticeno();
            cmbTendernoticeno.DataTextField = "NOTICE_NO";
            cmbTendernoticeno.DataValueField="NOTICE_DATE";
            cmbTendernoticeno.DataSource=ds;
            cmbTendernoticeno.DataBind();
        } 
```

现在我想获取组合框多列值（NOTICE_DATE，ACCEPT_DATE，TENDER_OPEN_DATE，OPENING_PLACE）并且必须显示在正确的文本框中。

# windows - 如何列出 Win32 命名空间的内容？

> ID：13379447
> 
> 赞同：7
> 
> 时间：2012-11-14T13:10:25.243
> 
> 标签：windows, winapi, path, namespaces, nt-native-api

有没有办法列出`Win32 Device Namespaces`（UNC 路径前缀：）`\\.\`和`Win32 File Namespaces`（UNC 路径前缀：）的内容`\\?\`？

目标是拥有一个适合作为*命令行*^((1))工具的应用程序，该工具可以使用 UNC（通用命名约定）对其进行导航。是否已经为此编写了工具？我知道 WinObj 但这不是开源和 GUI 工具。

同样，如何列出 ? 下可用的命名空间`NT namespace`？

~~是否有处理这些的 Windows API 调用？~~ **[正如Hans Passant](https://stackoverflow.com/users/17034/)和[Roger Lipscombe](https://stackoverflow.com/users/8446/)在评论中指出的那样， **更新 2** WinApi 不适合于此，[NT Native API](https://en.wikipedia.org/wiki/Native_API)是。**

 ****更新 1**如果它们没有被 winapi 公开，[WinObj](http://technet.microsoft.com/en-us/sysinternals/bb896657.aspx)如何列出它们？

参考：http: [//msdn.microsoft.com/en-us/library/aa365247%28VS.85%29.aspx#paths](http://msdn.microsoft.com/en-us/library/aa365247%28VS.85%29.aspx#paths)

* * *

(1): Win32 控制台**

# c - “L”宏（？）是如何定义的？

> ID：13379451
> 
> 赞同：10
> 
> 时间：2012-11-14T13:10:44.617
> 
> 标签：c, winapi

```
static TCHAR szWindowClass[] = L"foo"; 
```

`L`被“粘合”到字符串`"foo"`上。怎么来的？我习惯的函数或宏类似于`L("foo");`

谁能解释一下 L 是怎么粘在绳子上的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-14T13:12:27.920

`L`不是宏，它只是宽 ( `wchar_t`, "Unicode") 字符串文字的标准前缀；这个概念类似于文字的`L`后缀，`long int`文字的`f`后缀`float`等等¹。

顺便说一句，如果你使用`TCHAR`s 你不应该`L`直接使用；相反，您应该使用`_T()`or`TEXT()`宏，如果应用程序是为“Unicode”编译的（即定义为），它会`L`在文字的开头添加，或者如果编译目标是“ANSI”（定义为），则不添加任何内容。`TCHAR``WCHAR``TCHAR``CHAR`

* * *

1.  尽管在我看来这很令人困惑——为什么算术类型的后缀和宽字符串文字的前缀？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T13:14:32.423

它不是宏，而是编译器将其识别为具有某些特殊含义的前缀的标记。

eg`l`作为产生`long`文字的后缀也会发生同样的情况，如`long x = 42l;`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-14T13:15:13.637

这不是宏，就像`42ul`不是宏一样：它告诉编译器“foo”是一个**宽**字符串。

在旁注中，实际上“宽字符串”到底是什么并没有那么明确*，*因此它不是可移植的。除非您出于 API 原因*必须*使用 TCHAR / ，否则`L"foo"`最好使用 C++11 Unicode 支持（如果您可以使用 C++11 支持）：( `u8"foo"`UTF-8) 或`U"foo"`(UTF-32)，加上适当的字符串/数组类型。

个人建议：不要使用 UTF-16。大多数人并不真正理解它，正如关于“宽”字符串的争论所证明的那样。;-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-13T15:06:58.880

这个怎么样？

`#ifdef _UNICODE`

`#define L(str) L##str`

`#else`

`#define L(str) str`

`#endif`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-13T20:19:34.540

这个问题迟到了，但这在几年前就困扰了我。这是一些文档的链接，给出了 L 的定义以及其他一些文档。

[cppreference.com 字符串文字](http://en.cppreference.com/w/cpp/language/string_literal)

```
L " (unescaped_character|escaped_character)* " (2)
2) Wide string literal. The type of a L"..." string literal is const wchar_t[]. 
```

还有一篇关于[新字符串文字的维基百科文章](https://en.wikipedia.org/wiki/C%2B%2B11#New_string_literals "新的字符串文字")

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-07T10:33:18.660

基于@Doo Hyeok Kim 改进它

```
#define DIAG "diag"
// innerally macro
#define __W(quote_string) L ## quote_string
// robust macro
#define _W(quoted_string_or_defined_string) __W(quoted_string_or_defined_string)
//std::wcout << _W(DIAG) << ", " << _W("_W(\"diag2\")") << ", " << __W("__W(\"diag3\")") <<std::endl; 
```

# windows-phone-7 - Windows Phone Dev 中的 SQLITE db 中的表未更新

> ID：13379452
> 
> 赞同：1
> 
> 时间：2012-11-14T13:10:45.323
> 
> 标签：windows-phone-7, sqlite

我的 Windows Phone 7.1 项目中有一个现有的 sqlite 数据库。我能够对数据库执行选择查询......但我无法对数据库中的表执行插入或更新查询。例如，我运行以下命令：

```
//Update operation
    public void Update<T>(string statement) where T : new()
    {
        try
        {
            Open();
            SQLiteCommand cmd = db.CreateCommand(statement);
            int i = cmd.ExecuteNonQuery();

        }
        catch (SQLiteException ex)
        {
            System.Diagnostics.Debug.WriteLine("updation failed: " + ex.Message);
            throw ex;
        }
} 
```

这执行得非常好并且没有抛出异常，表明更新成功。但是当我看到数据库时，我得到的是旧记录而不是更新的记录。我已经通过在 SQLITE 浏览器中运行它来交叉验证查询，它工作正常。但是当我运行该应用程序时，它没有。执行 nonQuery 语句时我得到 1，这意味着记录已更新。但不幸的是，事实并非如此。

对此的任何帮助表示赞赏。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:50:15.397

我没有看到提交事务代码。默认情况下，事务会回滚。

另外，您知道[DatabaseSchemaUpdater](http://msdn.microsoft.com/en-us/library/microsoft.phone.data.linq.databaseschemaupdater%28v=vs.95%29.aspx)类吗？这是我用来在我的应用程序中升级数据库模式[的示例，效果很好。](http://www.windowsphonegeek.com/articles/Windows-Phone-Local-Database-Schema-Upgrade-Part1---Adding-new-columns)这篇文章是关于添加列的，但是该类也有 AddTable<…> 方法。不要忘记阅读第二条评论。

# java - 在不使用数组的情况下返回 3 个变量的最小值

> ID：13379454
> 
> 赞同：-3
> 
> 时间：2012-11-14T13:10:51.190
> 
> 标签：java, min

我有三个变量 ab c。我想要一种方法（在java中）选择这些变量的最小值并将其加1而不使用数组对值进行排序。

有没有办法做到这一点 ？

在程序开始时，所有这些变量都将为零。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T13:13:07.433

`Math.min(Math.min(a,b), c) + 1`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T13:13:56.377

```
int a = 1;
int b = 2;
int c = 3;

int min = Math.min(a, Math.min(b, c)) + 1; 
```

# android - 如何在一秒钟内收集 100 个加速度计读数

> ID：13379455
> 
> 赞同：0
> 
> 时间：2012-11-14T13:10:54.340
> 
> 标签：android, accelerometer

大家好，我正在开发一个收集三个方向（x，y，z）加速度的 android 应用程序，我需要可信任的代码，让我可以在一秒钟内准确收集 100 个读数，请帮助我。此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:32:59.327

当您使用 SensorManager.registerListener() 时，您可以根据需要设置速率参数。速率是事件之间的延迟（以微秒为单位）。

# android - doInBackground 在 Android 片段中不起作用

> ID：13379456
> 
> 赞同：-1
> 
> 时间：2012-11-14T13:10:57.487
> 
> 标签：android, android-asynctask, android-fragments

我有一个片段 Fragment1。在那个片段中我正在解析 XML 并填充列表视图。我必须在片段的背景中执行函数解析和填充列表视图。这样它就不会打扰用户。当我使用 Asynctask 并定义填充doInBackground 中的列表视图函数显示错误，例如“执行 doinbackground() 时发生错误”。我在这里做错了什么？

这是我的片段

片段1=>

```
public class Kerala extends Fragment{
   static String URL = "";
// XML node keys
static final String KEY_HEAD = "item"; // parent node
//static final String KEY_TITLE = "title";
static final String KEY_DATE = "pubDate";
public static String headflag="";
int f=0;
GridView list;
    KeralaAdapter adapter;

  public static String[] Title;
    public static String[] Description;
    public static String[] Tit;
    public static String[] Tit2;
    public static String[] Desc;
    public static String[] Desc2;

    public static String[] image;
    public static String[] Date;
    public static String[] Flash;
    public static String[] Fl;
    public static String[] Fl2;

private TextView mMessageView;
private Button mClearButton;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // Inflating layout
    View v = inflater.inflate(R.layout.kerala_fragment, container, false);
    // We obtain layout references

    return v;

}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    new ProgressAsyncTask().execute();

}

 public void populate_listview()
 {

     URL="http://www.abcd.com/en/rssfeeds/9/latest/rss.xml";

    ArrayList<HashMap<String, String>> newsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_HEAD);
    // looping through all song nodes <song>
    NodeList itemLst = doc.getElementsByTagName("item");
    String MarqueeStr="";

    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);

        //map.put(KEY_DATE, parser.getValue(e, KEY_DATE));

        newsList.add(map);

 }

    list=(GridView)getActivity().findViewById(R.id.grid2);

    // Getting adapter by passing xml data ArrayList
            adapter=new KeralaAdapter(getActivity(), newsList);        
            list.setAdapter(adapter);

}

 public void StartProgress(){
        new ProgressAsyncTask().execute();
    }

    public class ProgressAsyncTask extends 
        AsyncTask<Void, Integer, Void> {

        int myProgress;

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();

            myProgress = 0;

        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);

        }

        @Override
        protected Void doInBackground(Void... arg0) {
            // TODO Auto-generated method stub

                keralaparser.parse();//here I am calling both functions
            populate_listview();

            return null;
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            // TODO Auto-generated method stub

        }

        }
} 
```

这是我的错误日志，

```
11-14 18:29:42.705: E/AndroidRuntime(10530): java.lang.RuntimeException: An error occured while executing doInBackground()
11-14 18:29:42.705: E/AndroidRuntime(10530):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at java.lang.Thread.run(Thread.java:856)
11-14 18:29:42.705: E/AndroidRuntime(10530): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
11-14 18:29:42.705: E/AndroidRuntime(10530):    at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4056)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at android.view.ViewRootImpl.focusableViewAvailable(ViewRootImpl.java:2210)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:657)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:657)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:657)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:657)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:657)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:657)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:657)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at android.view.View.setFlags(View.java:6736)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at android.view.View.setFocusableInTouchMode(View.java:4714)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at android.widget.AdapterView.checkFocus(AdapterView.java:705)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at android.widget.GridView.setAdapter(GridView.java:186)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at com.madhyamam.malayalam2.Kerala.populate_listview(Kerala.java:149)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at com.madhyamam.malayalam2.Kerala$ProgressAsyncTask.doInBackground(Kerala.java:215)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at com.madhyamam.malayalam2.Kerala$ProgressAsyncTask.doInBackground(Kerala.java:1)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
11-14 18:29:42.705: E/AndroidRuntime(10530):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:18:18.770

您正在对异步线程中的 ui 进行更改。将您将新适配器分配给列表的最后 3 行从您的 populate_listview() 方法移动到 onPostExecute()。此方法在您的 ui 线程上执行，并且可以更改您的 ui。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:17:51.760

打电话给`populate_listview();`你`onPostExecute()`的`Asynctask`..

日志显示

> 引起：android.view.ViewRootImpl$CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能触摸它的视图。

UI 不能直接跨线程更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T15:01:01.113

使用 AsyncTask 的想法是执行后台进程，但在后台进程期间不会访问/修改当前 UI 的任何元素。这是一个不同的线程。如果您正在尝试更新/编辑当前活动/片段/UI的列表（例如：ListView /自定义LinearLayout，如列表视图一样实现），那么您可以考虑在后台进程中生成列表[可能是普通的旧Java对象（ POJO）或可能是视图 - 新实例/膨胀]并作为 doInBackground() 方法的结果返回它：

```
@Override
protected View doInBackground(Void... params) {
    return generateListResults();
} 
```

在此之后，您现在可以访问/修改您当前的活动/片段/UI。这可能在 onPostExecute() 方法内部，将结果作为参数传递，可能如下所示，[遵循 doInBackground() 方法]：

```
@Override
protected void onPostExecute(View result) {
    resultContainer.addView(result);
    dialog.dismiss();
    super.onPostExecute(result);
} 
```

您可以选择在启动后台进程之前显示加载对话框：

```
@Override
protected void onPreExecute() {
    dialog = ProgressDialog.show(context, res.getString(R.string.searching), res.getString(R.string.wait), true);
    resultContainer.removeAllViews();
    super.onPreExecute();
} 
```

# java - 如何处理 GraphicsProgram（ACM 库）的窗口大小？

> ID：13379458
> 
> 赞同：3
> 
> 时间：2012-11-14T13:11:08.520
> 
> 标签：java, acm-java-libraries

我想定义窗口的大小，但我没有找到一个干净的方法来做到这一点。SetSize() 给出了一个奇怪的结果：

```
public class Test extends GraphicsProgram {

    public void run() {

        setSize(400, 600);
        add(new GLabel("Width: " + getWidth(), 30, 30));
        add(new GLabel("Height: " + getHeight(), 30, 50));
    }

} 
```

结果是 384 x 542。间隙始终相同 (-16 x -58)，因此很容易构建一个变通方案。有没有办法直接定义有用像素的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-29T07:39:25.417

在研究斯坦福课程项目（突破）的代码时，我找到了解决方案。GraphicsProgram 不会根据其字段 、、`WIDTH`等自动构建。因此我们需要设置[acm.program.GraphicsProgram](http://cs.stanford.edu/people/eroberts/jtf/javadoc/complete/acm/program/GraphicsProgram.html)从[java.applet.Applet](http://docs.oracle.com/javase/6/docs/api/java/applet/Applet.html)继承的窗口大小。只需添加一个and即可完成工作。`HEIGHT``EAST``CENTER``resize()``resize()``pause()`

```
public class Test extends GraphicsProgram {
    private static final int WIDTH = 400;
    private static final int HEIGHT = 600;
    private static final int PAUSE = 10; // or whatever interval you like

    public void run() {
        this.resize(WIDTH,HEIGHT);
        pause(PAUSE);
        // game logic here
        ...
    }

} 
```

这`pause()`是必要的，因为调整大小需要时间。如果您在调整大小后立即添加组件，它可以避免组件的错误位移。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-09T12:43:39.613

```
public void init() {

    setSize(400, 600);

} 
```

而不是在 run 方法中设置大小，而是在 init 上执行！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-21T20:28:16.560

下课以后：
`public static final int APPLICATION_WIDTH = 900; // x size of window`

运行前：
`public static final int APPLICATION_HEIGHT = 540; // y size of window`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-10T11:54:23.720

无需 setSize 或调整大小。

您只需要添加这两个公共变量：

```
/** Width and height of application window in pixels */
public static final int APPLICATION_WIDTH = 400;
public static final int APPLICATION_HEIGHT = 600; 
```

如果您需要完全使用 WIDTH 和 HEIGHT 这两个：

```
/** Dimensions of window (usually the same) */
private static final int WIDTH = APPLICATION_WIDTH;
private static final int HEIGHT = APPLICATION_HEIGHT; 
```

# asp.net-mvc - ASP.NET MVC 中的 CompositeType

> ID：13379466
> 
> 赞同：1
> 
> 时间：2012-11-14T13:11:34.177
> 
> 标签：asp.net-mvc, wcf, composite-types

我使用 .NET Framework 4.5。创建了一个新项目 WCF，其中已经有一个使用 CompositeType 的示例。然后创建了控制台和 ASP.NET MVC 4 应用程序。在两个项目中进一步添加了服务参考。为什么在项目 ASP.NET MVC 4 中生成了一个空类（参考中）？如果去掉服务接口中的 CompositeType 就万事大吉了。在控制台应用程序中没有这样的问题，一切都正确创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:27:47.270

这是 VS 2012 中的一个已知问题。在修复可用之前，您可以使用以下变通方法来使您的工作正常。看看这个博客。

[http://blogs.msdn.com/b/praburaj/archive/2012/08/23/add-service-reference-adding-empty-reference-cs-in-mvc-4-projects-of-vs-2012。 aspx](http://blogs.msdn.com/b/praburaj/archive/2012/08/23/add-service-reference-adding-empty-reference-cs-in-mvc-4-projects-of-vs-2012.aspx)

在 VS 2012 MVC 4 项目中，您是否在使用“添加服务引用”对话框向 WCF 服务添加服务引用时发现了一个空的 reference.cs 文件？

这是您可以做的：

检查您的错误选项卡是否显示一些错误，例如...

警告 1 自定义工具警告：无法导入 wsdl:portType

详细信息：运行 WSDL 导入扩展时引发异常：System.ServiceModel.Description.DataContractSerializerMessageContractImporter

错误：类型“Newtonsoft.Json.Linq.JToken”是不支持的递归收集数据合同。考虑修改集合“Newtonsoft.Json.Linq.JToken”的定义以删除对自身的引用。

错误源的 XPath：//wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:portType[@name='IService1']

如果是这样，您可以使用以下解决方法：

1.  在添加服务引用对话框 -> [高级...] -> 在引用的程序集中重用类型（默认选中） -> 选择非默认的“在指定的引用程序集中重用类型”单选 -> 确保排除 Newtonsoft.Json。列表中的 dll。现在尝试添加服务引用，看看是否成功。

2.  或者，您可以在生成代理时删除此 Newtonsoft.Json.dll 的引用，并在代理生成完成后将其添加回来。

# actionbarsherlock - ActionBarSherlock 库的最佳构建目标？

> ID：13379467
> 
> 赞同：1
> 
> 时间：2012-11-14T13:11:40.853
> 
> 标签：actionbarsherlock

ABS 网站上的文档似乎略有不一致。

在[http://actionbarsherlock.com/usage.html](http://actionbarsherlock.com/usage.html)上它说“由于它在 Ice Cream Sandwich 上使用本机操作栏及其相关类，因此该库要求它和您的项目都使用 Android 4.0 或更高版本进行编译。 " 这对我来说意味着可以使用 API 16 构建项目和库。

但是，在[http://actionbarsherlock.com/faq.html](http://actionbarsherlock.com/faq.html)上它说“库本身必须针对 Android 4.0（API 级别 14）构建。您的项目应尽可能使用最新版本的 SDK 构建，只要它是 4.0 或更高版本。” 这对我来说意味着 API 16 适合该项目，但该库应该使用 API 14 构建。

那么，我的问题是，图书馆是 16 还是 14？

在此先感谢，感谢 Jake 撰写和支持 ABS。

乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:05:02.067

ActionBarSherlock 旨在决定启动时间：

1.  使用系统内置的 ActionBar 等小部件和类

2.  使用 ABS 的兼容 ActionBar 等小部件和类

它使用您的构建目标来做出决定。如果您以 4.0 为目标，则具有 4.0 的设备将在您的应用程序中使用其内置的小部件和类。具有 4.1 及更高版本的设备将执行相同的操作。任何版本低于 4.0（因此，3.2 及以下）的设备都将使用兼容性 ABS 的东西。

将目标更改为 4.1 将使 4.0 使用兼容性 ABS 的东西，这有点不必要但不是真的有害。但只使用设备上的内容几乎总是更好。因此，我建议将其保持在 4.0。

旁注：3.0 - 3.2 也有一个 ActionBar 类，但它缺少 4.0 中添加的许多功能，因此最好在这些版本中使用 ABS。

# jsf - 使用 EL 将 java.util.Date 值转换为字符串

> ID：13379468
> 
> 赞同：3
> 
> 时间：2012-11-14T13:11:40.667
> 
> 标签：jsf, jstl, el

如何使用 JSTL 和 EL比较`java.util.Date`价值？`String`

这是模型：

```
private Date myDate; // Wed Jan 01 00:00:00 CET 1001 
```

这是视图：

```
<c:if test="#{bean.myDate eq 'Wed Jan 01 00:00:00 CET 1001'}">
    <h:outputText value="#{bean.myDate}">
        <f:convertDateTime pattern="EEEE dd MMM yyyy @ HH:mm:ss" />
    </h:outputText>
</c:if> 
```

然而，条件总是评估为假。我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T13:24:04.880

如果你的环境支持 EL 2.2，直接调用它的[`toString()`](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#toString%28%29)方法即可。

```
<c:if test="#{bean.myDate.toString() eq 'Wed Jan 01 00:00:00 CET 1001'}"> 
```

如果您没有，请将其转换为`String`first 通过将其内联为`<c:set>`.

```
<c:set var="myDate">#{bean.myDate}</c:set>
<c:if test="#{myDate eq 'Wed Jan 01 00:00:00 CET 1001'}"> 
```

* * *

**与具体问题无关**，这是比较日期的一种相当奇怪的方式。它对语言环境和时区的变化非常敏感（如果网页访问者使用非英语语言环境并且您的 web 应用程序支持非英语语言环境，则测试`Wed Jan`将失败，如果网络服务器移动到非 CET 时区，则测试on`CET`会失败）。您不想`1001`直接比较它还是按年比较或固定模式之类的`1001-01-01`？此外，我还想知道您为什么不在`rendered`JSF`<h:outputText>`组件的属性中进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T10:14:57.753

in jsf 1.2

this code works for me :

```
 <webuijsf:button
                            actionExpression="#{guiRettificaBilPuntuale_2.button4_action}"
                            id="button4" text="#{bundle.TastoModificaRiga}" 
                            rendered="#{ bilDetailsTable.value.settStatus eq 'N' or bilDetailsTable.value.starttime eq aLGUISessionBean_01.monthCurrentPublBilDate ? false : true}"> 
```

and starttime and monthCurrentPublBilDate are both dates (java.Date) so you can transform string in Date and compare them

# eclipse - 为 IResource 包装类使用默认的 Common Navigator Action Set

> ID：13379478
> 
> 赞同：0
> 
> 时间：2012-11-14T13:12:21.867
> 
> 标签：eclipse, eclipse-plugin

我正在开发一个 Eclipse 插件。我的视图扩展了 CommonNavigator。视图的内容是 MyWrapper 类的层次结构

```
class MyWrapper implement IAdaptable{
IResource resource;
MyWrapper parent;
List<MyWrapper> children;
} 
```

我想显示与默认通用导航器显示相同的弹出菜单。我已经注册了一个 AdapterFactory，它使 MyWrapper 适应 IResource。

显示的操作列表：

*   新的
*   从上下文中删除（禁用）
*   进口
*   出口
*   刷新
*   证实
*   团队
*   与之比较
*   从本地历史恢复
*   特性

我需要的菜单操作列表：

*   复制
*   粘贴
*   改名

有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:17:17.447

本教程说明如何添加这些操作：[构建基于通用导航器的查看器，第一部分：定义查看器](http://scribbledideas.blogspot.com/2006/05/building-common-navigator-based-viewer.html) 搜索添加“org.eclipse.ui.navigator.resources.*”的部分

# mysql - 优化查询——它正在使用文件排序。（包括解释、查询和显示创建表）

> ID：13379482
> 
> 赞同：3
> 
> 时间：2012-11-14T13:12:33.167
> 
> 标签：mysql

我想知道为什么我的查询不使用索引“created_2”，它涵盖了查询中使用的所有字段。它似乎使用文件排序。选择索引的规则是什么？

询问：

```
SELECT * FROM (`stories`) WHERE `image_full_url` != '' AND `order` != 0 ORDER BY `created` DESC, `order` DESC LIMIT 5 
```

创建表：

```
| stories | CREATE TABLE `stories` (
  `id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `news_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `title` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created` datetime DEFAULT NULL,
  `author` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `author_title` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `image_caption` text COLLATE utf8_unicode_ci,
  `image_credit` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `image_full_url` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `body` text COLLATE utf8_unicode_ci,
  `summary` text COLLATE utf8_unicode_ci,
  `external_url` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `order` int(10) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `news_type` (`news_type`),
  KEY `created` (`created`),
  KEY `news_type_2` (`news_type`,`created`),
  KEY `created_2` (`created`,`image_full_url`,`order`),
  KEY `image_full_url` (`image_full_url`,`order`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci | 
```

解释：

```
mysql> explain SELECT * FROM (`stories`) WHERE `image_full_url` != '' AND `order` != 0 ORDER BY `created` DESC, `order` DESC LIMIT 5;
+----+-------------+---------+-------+----------------+----------------+---------+------+------+-----------------------------+
| id | select_type | table   | type  | possible_keys  | key            | key_len | ref  | rows | Extra                       |
+----+-------------+---------+-------+----------------+----------------+---------+------+------+-----------------------------+
|  1 | SIMPLE      | stories | range | image_full_url | image_full_url | 768     | NULL |   25 | Using where; Using filesort |
+----+-------------+---------+-------+----------------+----------------+---------+------+------+-----------------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:52:55.220

完整的规则集在[这里](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)，并声明`order by`如果它引用索引的非连续部分，则不能使用该索引。如果您将索引从 ( `created`, `image_full_url`, `order`) 更改为 ( `created`, `order`, `image_full_url`)，那么它可能会被使用。

# python - 分发可执行模块

> ID：13379483
> 
> 赞同：0
> 
> 时间：2012-11-14T13:12:37.173
> 
> 标签：python, module, distribution, packaging

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:21:03.127

1.  使用`distribute`or `setuptools`，前者是后者的一个分支，有一些改进和更好的文档。`distutils`任何一个都比 Python 标准库的一部分高出一大步。

2.  您需要一个控制台脚本，为其定义一个入口点：

    ```
    entry_points = {
        'console_scripts': [
            'foo = my_package.some_module:main_func',
            'bar = other_module:some_func',
        ], 
    ```

    where`foo`和`bar`will 是您可以在命令行上调用的脚本。指定的函数将`sys.argv[1:]`作为第一个也是唯一的参数调用。

3.  让安装工具来处理；它在 Windows 上运行良好。:-)

# javascript - 从 javascript 函数更新 groovy 字符串中的多个参数

> ID：13379490
> 
> 赞同：0
> 
> 时间：2012-11-14T13:12:53.383
> 
> 标签：javascript, grails, groovy

好的，我是 javascript/grails 新手，我不确定在这里做什么。

基本上我有一个使用多个参数调用的 javascript 函数，我想将它们替换为 grails 可解析字符串。

我有许多 grails 下拉菜单，它们调用 javascript 函数来链接到另一个页面，其中包含需要传递的多个参数（项目编号和数量）。

这是选择：

```
<g:select optionKey="key" optionValue="value" value="${item.getQty()}" name="qty" from="[1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9]"
onchange="goToPage('qty${item.id}',this.value)"></g:select> 
```

javascript函数：

```
<script type="text/javascript">
function goToPage(itemId, val){
window.location.href="${createLink(controller:'GOrder' ,action:'updateShoppingCart' params:[item: "", qty: ""])}" + itemId + val;
} 
```

因此，它需要 itemId 和 val，将它们连接起来，并用连接后的值替换最后一组引号。我想要发生的是为每个参数替换一组引号。

我真的不明白连接字符串的样子实际上是如何替换一个值的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:43:21.663

你把你的服务器和客户端混在一起了。这

```
${createLink(controller:'GOrder' ,action:'updateShoppingCart' params:[item: "", qty: ""])} 
```

在将 GSP 呈现为 HTML 时，由 Grails 在服务器端进行评估，因此您最终在 JavaScript 中得到的结果类似于

```
function goToPage(itemId, val){
  window.location.href="/myapp/GOrder/updateShoppingCart?item=&amp;qty=" + itemId + val;
} 
```

您可能想要的只是在 Grails 端生成直到问号的基本 URL，然后在 JavaScript 中的客户端添加查询参数

```
function goToPage(itemId, val){
  window.location.href=
     "${createLink(controller:'GOrder', action:'updateShoppingCart'
         ).encodeAsJavaScript()}?item=" + encodeURIComponent(itemId)
    + "&amp;qty=" + encodeURIComponent(val);
} 
```

请注意我添加的方式`encodeAsJavaScript()`- 在生成要包含在 JavaScript 字符串文字中的值时，您应该始终使用它，它将反斜杠转义任何需要它的东西。同样，您添加到 URL 的任何 JavaScript 字符串都需要使用 JavaScript`encodeURIComponent`函数进行编码 - 例如，如果值为`itemId`“item one”，您需要附加`item%20one`到 URL。

# html - Get rid of scrollbar in a fixed-width/fluid mixed layout

> ID：13379495
> 
> 赞同：0
> 
> 时间：2012-11-14T13:13:08.077
> 
> 标签：html, css, layout, fluid-layout

My problem is demonstrated by this fiddle: [http://jsfiddle.net/pschyska/HAPLU/](http://jsfiddle.net/pschyska/HAPLU/)

```
<div class="main">
  <div class="header">header</div>
  <div class="navigation">nav<br>nav<br><nav<br>nav<br></nav<br></div>
  <div class="col1 col-collapsed">col1<br><br></div>
  <div class="dynamic">
    <div class="col2 col-large">
        col2<br><br>col2<br><br>col2<br><br>col2<br><br>col2<br><br>
        col2<br><br>col2<br><br>col2<br><br>col2<br><br>col2<br><br>
        col2<br><br>col2<br><br>col2<br><br>col2<br><br>col2<br><br>
        col2<br><br>col2<br><br>col2<br><br>col2<br><br>col2<br><br>
        col2<br><br>col2<br><br>col2<br><br>col2<br><br>col2<br><br>
        col2<br><br>col2<br><br>col2<br><br>col2<br><br>col2<br><br>
        col2<br><br>col2<br><br>col2<br><br>col2<br><br>col2<br><br>
        col2<br><br>col2<br><br>col2<br><br>col2<br><br>col2<br><br>
        col2<br><br>col2<br><br>col2<br><br>col2<br><br>col2<br><br>
        col2<br><br>col2<br><br>col2<br><br>col2<br><br>col2<br><br>
    </div>
    <div class="col3 col-large">col3</div>
  </div>
</div>

 .header {
   height: 20px;
 }

 .main {
   height: 100%;
   position: absolute;
   width: 100%;
 }

 .main .navigation {
   position: absolute;
   height: 100%;
   width: 50px;
 }

 .main .col-collapsed {
   position: absolute;
   left: 50px;
   height: 100%;
   width: 100px;
   overflow-x: hidden;    
   overflow-y: auto;
 }

 .main .dynamic {
   margin-left: 150px;
   height: 100%;
 }

 .main .col-large {
   height: 100%;
   width: 50%;
   float: left;
   overflow-x: hidden;    
   overflow-y: auto;

 }

 .main {
   background-color: #5555ee;
 }

 .header {
   color: white;
   background-color: black;
 }

 .navigation {
   background-color: blue;
 }

 .col1 {
   background-color: #aaaa00;
 }

 .col2 {
   background-color: #00ffbb;
 }

 .col3 {
   background-color: #ff00bb;
 }

 .dynamic {
   background-color: #5af00a;
 } 
```

I need the header to be fixed height, and the first 2 columns (`.navigation`, `.col1`) to be fixed width. The next 2 columns should share the remaining horizontal space evenly. All 4 columns `.navigation`, `.col1`, `.col2`, `.col3` must be "100%", actually "100% minus header-height". I didn't get his to work. The columns height is always equal to the document height, and I get a vertical scrollbar the same size as header height.

Bonus: I don't like that nested `.dynamic` attribute at all. It's just boilerplate without semantic. Is there another way to do it? Without it, the columns would take 50% of the document's width, not 50% of the remaining space each.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:41:23.760

你不要尝试桌子。这是您的情况的原始结构。对需要固定宽度的 td 使用宽度属性。两者的其余部分将平均共享剩余空间。

```
 <div>
<table style="width:100%" border="1">
    <thead>
    <th colspan="4">This is header</th>
    </thead>
    <tbody>
    <tr>
    <td width="10%">col1</td>
    <td width="20%">col2</td>
    <td>col3</td>
    <td>col4</td>
    </tr>
    </tbody>
</table>
</div> 
```

# java - Pass String from One class to another class

> ID：13379499
> 
> 赞同：2
> 
> 时间：2012-11-14T13:13:26.793
> 
> 标签：java, class

I have this 1st clas:

```
 private class proceedAL implements ActionListener
{
public void actionPerformed(ActionEvent z)
    {
        String x = (String)mouseB.getActionCommand();
        String y = (String)monitorB.getActionCommand();
        ComputerSimulator me = new connect(x,y);
    }

} 
```

and another class:

```
public class ComputerSimulator extends JFrame
{
public void connect(String x, String y)
{
   String i, j;
   c2.setText(x);
   c3.setText(y);
} 
```

* * *

This error appears: cannot find symbol - class connect

What am I missing? I'm just a starter in Programming, need some help guys

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:14:58.367

实例化类的对象并调用其方法的正确方法是：

```
ComputerSimulator e = new ComputerSimulator();
e.connect(x, y); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T13:16:04.220

`connect`确实不是类。它是类中的一种方法`ComputerSimulator`。

您应该首先创建对象：

`ComputerSimulator me = new ComputerSimulator()`

现在您可以调用方法`connect`：`me.connect(x, y);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T13:15:06.603

`connect`不是一个类，它是类上的一个**方法**`ComputerSimulator`。您正在调用该`connect`方法，就好像它是构造函数一样，您需要这样做

```
ComputerSimulator computerSimulator = new ComputerSimulator();
computerSimulator.connect(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T13:16:12.280

你错了，你只能`new`上课（比如`ComputerSimulator`）。

一旦你有了那个类的实例，你就可以使用它的公共方法（比如`connect`）->`me.connect(x, y);`

顺便说一下，`throws`仅指异常处理。

# php - PHP foreach 添加随机间隙/空白

> ID：13379502
> 
> 赞同：1
> 
> 时间：2012-11-14T13:13:32.337
> 
> 标签：php, html, foreach, html-table, inline-styles

我有以下 PHP。在这里，我正在创建一个表，遍历传入数据的键和值，并将它们添加到行中。接收邮件时，它会在内联样式中添加随机间隙/空格，例如：

看`bord er:4px solid #E4F5FD;`

```
<td valign="top" style="padding:5px;border-collapse:collapse;bord er:4px solid #E4F5FD;text-transform:capitalize;font-family:arial;font-size:12px;background:#FFFFFF;"> 
```

和

看`background:#FFF FFF;`

```
padding:5px;border-collapse:collapse;border:4px solid #E4F5FD;text-transform:capitalize;font-family:arial;font-size:12px;background:#FFF  FFF;color:#888888; 
```

我不知道为什么会这样，以前有人遇到过这个问题吗？

请记住我正在学习 PHP，所以请善待。

```
$data_output .= '<table align="center" border="0" cellspacing="0" cellpadding="0" style="border-collapse:collapse;background:#E4F5FD;border:0;width:680px;">';

    foreach ($data_html as $key => $value) {

        $data_output .= '<tr>';
        $data_output .= '<td valign="top" style="padding:5px;border-collapse:collapse;border:4px solid #E4F5FD;text-transform:capitalize;font-family:arial;font-size:12px;background:#FFFFFF;"><b>'.str_replace('_',' ',$key).'</b></td>';

        $values = '';
        foreach($value as $v) {
          $values .= $v.'<br />';
        }

        $z = '';
        if($values == ''){
            $z = $value;
        } else {
            $z = $values;
        }

        $data_output .= '<td valign="top" style="padding:5px;border-collapse:collapse;border:4px solid #E4F5FD;text-transform:capitalize;font-family:arial;font-size:12px;background:#FFFFFF;color:#888888;">'.str_replace('_',' ',$z).'</td>';
        $data_output .= '</tr>';
    }

    $data_output .= '</table>';

$from = 'website@bla.clo.uk';
$to = $_POST['email'];
$cc = 'me@bla.co.uk';
$subject = 'bla stuff';
$body = $data_output;

$headers = '';
$headers .= "From: $from\n";
$headers .= "Cc: $cc\r\n";
$headers .= "Reply-to: $from\n";
$headers .= "Return-Path: $from\n";
$headers .= "Message-ID: <" . md5(uniqid(time())) . "@" . $_SERVER['SERVER_NAME'] . ">\n";
$headers .= "MIME-Version: 1.0\n";
$headers .= "Content-type: text/html; charset=iso-8859-1" . "\n";
$headers .= "Date: " . date('r', time()) . "\n";

if (mail($to, $subject, $body, $headers)){
    echo 'sent';
} else {
    echo 'fail';
    die();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:44:33.047

> 确保每行内容的长度不超过 78 个字符，也不超过 998 个连续字符。

这就是问题所在，我在每行和单元格的末尾添加了“\n”以中断行内容。

```
foreach ($data_html as $key => $value) {
        $data_output .=
        '<tr>'."\n".
        '<td style="border:4px solid #DADADA;background:#FFFFFF;text-transform:capitalize;">' . str_replace('_',' ',$key) . '</td>'."\n".
        '<td style="border:4px solid #DADADA;background:#FFFFFF;">' . $value . '</td>'."\n".
        '</tr>'."\n";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:17:15.080

你的没有什么问题`$_data_output`。

检查您说正在查看的邮件客户端中的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:34:11.263

这不是 foreach 循环的问题，而是表的问题。有时（至少在某些浏览器中）html 标记中 td 之间的实际空间会按原样呈现到网页中。

为避免这种情况，请添加`font-size:0`到您的表格类，然后再次为您的 td 类定义字体大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:06:36.163

欢迎来到电子邮件格式的世界 - 您的问题很可能是您正在查看最终结果/电子邮件的电子邮件客户端 - 对此进行测试：

```
file_put_contents('test.htm',$data_output); 
```

运行此脚本并打开文件并查看该输出文件中的样式中是否有空格（RAW 输出）

如果是这样，脚本就是问题所在，如果不是，您的电子邮件客户端正在格式化电子邮件，因为大多数电子邮件客户端解析传入的电子邮件，更改样式和内联标签，删除标签和各种可怕的东西......

做谷歌搜索 -[这个](https://www.google.co.za/search?q=emails%20get%20parsed%20on%20the%20client%20side&oq=emails%20get%20parsed%20on%20the%20client%20side&sugexp=chrome,mod=10&sourceid=chrome&ie=UTF-8#hl=en&sclient=psy-ab&q=email%20clients%20change/parse%20html%20source&oq=email%20clients%20change/parse%20html%20source&gs_l=serp.3...15277.17833.2.18028.13.12.1.0.0.7.460.3286.2-1j5j3.9.0.les;..0.0...1c.1.jjEWyKmYbGA&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=bf5259a7412284cb&bpcl=38626820&biw=1517&bih=758)，你会找到相关的文章....

# c# - 无法连接到 SQL 数据库 - 用户名和密码丢失

> ID：13379503
> 
> 赞同：0
> 
> 时间：2012-11-14T13:13:32.400
> 
> 标签：c#, sql, winforms, linq, scope

我有一些代码有困难。我认为变量卡在我正在调用的方法中，当我再次运行该方法时，变量不再存在。

下面是我的主要示例：

```
 public partial class Login : Form
{

    public Login()
    {
        InitializeComponent();
    }
    sqlconnect sql = new sqlconnect();
    public string pass;
    public string user;

    public void button1_Click(object sender, EventArgs e)
    {
        //Username and password textboxes send to public strings
        user = textBox1.Text;
        pass = textBox2.Text;

            try
            {
                //try connecting to SQL database using SQL class
                sql.GetSqlConnection();
                sql.myConnection.Open();
                this.Hide();

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        } 
```

下面是 SQL 连接类：

```
 namespace NHS_Workshop_System
         {

public class sqlconnect
{
    public SqlConnection myConnection { get; set; }
    Settings1 set = new Settings1();
    Login var = new Login();

    public SqlConnection GetSqlConnection()
    {
        if (myConnection == null)
            myConnection = new SqlConnection("user id="+(var.user)+"; password="+(var.pass)+";server="+(set.SelectServer)+";Trusted_Connection="+(set.SelectContype)+";database="+(set.SelectDataBase)+"; connection timeout="+(set.Condrop)+"");

        return myConnection;
    }

} 
```

}

因此，当我尝试登录时，它可能第一次工作，但如果另一个表单尝试运行该方法，则用户名和密码丢失。我不确定如何使变量成为全局变量，以便每次运行该方法时它都会调用这些细节而不会失败。因此，它第二次在另一个表单上使用 sqlconnection 时，前消息指出用户名和密码不存在。如果是这样的话，这是一个范围界定问题，有人可以阐明我如何解决这个问题，这可能是一种获得 SQL 服务器访问权限的新方法吗？谢谢你扯掉我的头发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:22:57.393

以下是您现在的问题的答案。但是我强烈建议你考虑一下你在做什么，因为你的类逻辑似乎不是很好。我看到您尝试实现单例很好，但是如果您愿意，您仍然可以创建更多的 sqlconnect 实例。

* * *

在您的 Login 类中，传递此 Login 实例，以便 sqlconnector 知道用户并传递此处声明的用户。

```
public partial class Login : Form
{

// Old style - sqlconnect sql = new sqlconnect();
sqlconnect sql;
public string pass; // These arent declared and wont be of use for your sql connect class
public string user;

public Login( String pass, String user )
{
    this.pass = pass;
    this.user = user;
    // Now that we have a login with declared variables, pass it to the sqlconnect object
    this.sql = new sqlconnect(this);
    InitializeComponent();
} 
```

现在在您的 sqlconnect 类中，在您的 Login 变量为空之前。现在你已经在你的构造函数中收到了它的一个实例，它设置了它的变量，

```
public class sqlconnect
{
    public SqlConnection myConnection { get; set; }
    Settings1 set = new Settings1();
    // Here you maked a new one, use the existing instead from which this class is called.
    // changed variable named from var to login..
    Login login; 

    // *NEW* Constructor where you pass your login object
    public sqlconnect(Login login)
    {
        this.login = login;
    }

    public SqlConnection GetSqlConnection()
    {
        if (myConnection == null)
            myConnection = new SqlConnection("user id="+(login.user)+"; password="+(login.pass)+";server="+(set.SelectServer)+";Trusted_Connection="+(set.SelectContype)+";database="+(set.SelectDataBase)+"; connection timeout="+(set.Condrop)+"");

        return myConnection;
    }

} 
```

# javascript - 寻找 jQuery html 项目进行实践

> ID：13379507
> 
> 赞同：0
> 
> 时间：2012-11-14T13:13:45.153
> 
> 标签：javascript, jquery, html, css

我正在寻找一些 UI 项目，比如一些应用程序，其中包括 Javascript、jQuery、JSON、HTML 和 CSS，我可以通过这些应用程序来学习自己。我经历过理论知识，但实际知识来自编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:17:08.267

使用[github](http://github.com)、[google code](https://code.google.com/)、[sourceforge](http://sourceforge.net/)等搜索和查看处于各个开发阶段的各种真实或演示项目。在这一切中，您可以通过技术进行搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:18:11.493

你可以看看：

*   [代码堵塞](https://code.google.com/codejam/)
*   [罗塞塔代码](http://rosettacode.org/wiki/Welcome_to_Rosetta_Code)
*   [采访街](https://www.interviewstreet.com/challenges/)
*   [码学院](http://www.codecademy.com/tracks/jquery)
*   [我认为有用的这个教程](http://www.impressivewebs.com/jquery-tutorial-for-beginners/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T13:20:56.197

一个很好的学习所有这些技术的方法是你自己的小聊天程序，像这样：

[http://anantgarg.com/2009/05/13/gmail-facebook-style-jquery-chat/](http://anantgarg.com/2009/05/13/gmail-facebook-style-jquery-chat/)

# android - 在 DatePickerDialog 中使用 DatePicker setMaxDate() 时出现 NullPointerException

> ID：13379512
> 
> 赞同：8
> 
> 时间：2012-11-14T13:13:54.373
> 
> 标签：android, datepickerdialog

我正在使用 DatePickerDialog，并且我正在尝试设置最小和最大日期，以便用户只能选择前 24 小时或接下来 24 小时内的日期。

这是代码。（请注意，如果在 Android 3.0 或更高版本上运行，它只会尝试设置最小/最大范围。）

```
private void showDatePickerDialog() {
    DatePickerDialog.OnDateSetListener listener = new DatePickerDialog.OnDateSetListener() {
        @Override
        public void onDateSet(DatePicker view, int year, int monthOfYear,
                              int dayOfMonth) {
            calendar.set(Calendar.YEAR, year);
            calendar.set(Calendar.MONTH, monthOfYear);
            calendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);
            onCalendarChanged();
        }
    };

    DatePickerDialog dialog = new DatePickerDialog(this,
                                                   listener,
                                                   calendar.get(Calendar.YEAR),
                                                   calendar.get(Calendar.MONTH),
                                                   calendar.get(Calendar.DAY_OF_MONTH));
    setDatePickerDialogRange(dialog);
    dialog.show();
}

@SuppressLint("NewApi")
private void setDatePickerDialogRange(DatePickerDialog dialog) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        DatePicker picker = dialog.getDatePicker();
        long oneDayMilliseconds = 24 * 60 * 60 * 1000;
        long nowMilliseconds = new Date().getTime();
        long minDate = nowMilliseconds - oneDayMilliseconds;
        long maxDate = nowMilliseconds + oneDayMilliseconds;
        picker.setMinDate(minDate);
        picker.setMaxDate(maxDate);
    }
} 
```

这在 2.2 设备上运行时工作正常，但在 4.0.4 设备（Galaxy Tab 2 7.0）上，我得到这个异常：

```
11-14 07:58:08.917: E/AndroidRuntime(16611): FATAL EXCEPTION: main
11-14 07:58:08.917: E/AndroidRuntime(16611): java.lang.NullPointerException
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.CalendarView.onScroll(CalendarView.java:910)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.CalendarView.access$600(CalendarView.java:74)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.CalendarView$2.onScroll(CalendarView.java:771)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.AbsListView.invokeOnItemScrollListener(AbsListView.java:1391)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.ListView.layoutChildren(ListView.java:1705)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.AbsListView.onLayout(AbsListView.java:2040)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.View.layout(View.java:11330)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.ViewGroup.layout(ViewGroup.java:4235)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1644)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1502)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1415)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.View.layout(View.java:11330)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.ViewGroup.layout(ViewGroup.java:4235)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.View.layout(View.java:11330)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.ViewGroup.layout(ViewGroup.java:4235)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1644)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.LinearLayout.layoutHorizontal(LinearLayout.java:1633)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1417)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.View.layout(View.java:11330)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.ViewGroup.layout(ViewGroup.java:4235)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.View.layout(View.java:11330)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.ViewGroup.layout(ViewGroup.java:4235)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.View.layout(View.java:11330)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.ViewGroup.layout(ViewGroup.java:4235)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.View.layout(View.java:11330)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.ViewGroup.layout(ViewGroup.java:4235)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1644)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1502)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1415)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.View.layout(View.java:11330)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.ViewGroup.layout(ViewGroup.java:4235)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.View.layout(View.java:11330)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.ViewGroup.layout(ViewGroup.java:4235)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.View.layout(View.java:11330)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.ViewGroup.layout(ViewGroup.java:4235)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.View.layout(View.java:11330)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.ViewGroup.layout(ViewGroup.java:4235)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1548)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2505)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.os.Looper.loop(Looper.java:137)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at android.app.ActivityThread.main(ActivityThread.java:4514)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at java.lang.reflect.Method.invokeNative(Native Method)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at java.lang.reflect.Method.invoke(Method.java:511)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
11-14 07:58:08.917: E/AndroidRuntime(16611):    at dalvik.system.NativeStart.main(Native Method) 
```

这会立即发生。DatePickerDialog 永远不会显示。

如果我注释掉该`setMaxDate()`行，那么它工作正常。在这种情况下，会遵守最短日期。

如果我将其更改为`setMaxDate(nowMilliseconds)`，我仍然会收到 NullPointerException。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-09T14:15:15.307

已经为此工作了一段时间。这是Android中的一个错误。只需关闭日历视图就可以了：

```
picker.setCalendarViewShown(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:34:50.270

Try replacing:

```
setDatePickerDialogRange(dialog);
dialog.show(); 
```

to:

```
dialog.show();
someView.post(new Runnable() {
  public void run() {
    setDatePickerDialogRange(dialog);
  }
}); 
```

(where `someView` is some `View`, or a `Handler` if you have one)

This will delay the call to `setDatePickerDialogRange()` until after the dialog has been rendered and may be a workaround for your problem.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T14:59:07.157

```
I have seen an issue.. 
```

DatePicker`setMinDate()`并且`setMaxDate()`当新日期与旧的最小/最大日期相同时不起作用

请参考以下链接。 [DatePicker setMinDate() 和 setMaxDate() 上的错误](https://code.google.com/p/android/issues/detail?id=53255)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-31T19:47:43.087

这有效> = API 19。不知道是否有效。谢谢@JGGerrits。

```
Calendar min = (Calendar) minDate.clone();
Calendar max = (Calendar) maxDate.clone();
Calendar selected = (Calendar) selectedDate.clone();
min.set(Calendar.HOUR_OF_DAY, 0);
max.set(Calendar.HOUR_OF_DAY, 23);
selected.set(Calendar.HOUR_OF_DAY, 12);

DatePickerDialog datePickerDialog =
      new DatePickerDialog(context, callBack, selected);

if(Build.VERSION.SDK_INT <= Build.VERSION_CODES.KITKAT) {
  datePickerDialog.getDatePicker().setCalendarViewShown(false);
}

datePickerDialog.getDatePicker().setMinDate(min.getTimeInMillis());
datePickerDialog.getDatePicker().setMaxDate(max.getTimeInMillis());
datePickerDialog.show(); 
```

# lotus-notes - Lotus Notes Api：创建/删除日历条目

> ID：13379516
> 
> 赞同：1
> 
> 时间：2012-11-14T13:14:03.720
> 
> 标签：lotus-notes

我不熟悉 Lotus Notes。任务如下：我需要实现监听“日历条目创建/删除”事件的插件。并将此调度 (iCal) 数据发送到某个 Web 服务，以便它可以在另一个系统中同步。如果有人能给我一些向量，我需要在哪里找到解决方案，如何订阅这样的事件，我将不胜感激？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:45:53.777

您需要查看代理，特别是在创建/修改文档时运行的类型。对于删除，请查看数据库上的 QueryDocumentDelete 事件。在这两个代码点之间，您可以添加必要的逻辑来响应日历（或其他）文档的创建和删除。

您必须检查文档表单以确定正​​在处理的文档是否是日历事件，但之后应该很简单。

请注意，在创建文档和运行代理之间可能会有延迟。

更新：在代理中，您需要从数据库对象中获取未处理的文档集合并对其进行操作。使用 LotusScript，它看起来像这样：

```
Dim s as New NotesSession
Dim db as NotesDatabase
Dim docCollection as NotesDocumentCollection
Set db = s.CurrentDatabase
Set docCollection = db.UnprocessedDocuments 
```

然后，您可以从那里循环遍历文档集合并处理每个 NotesDocument 对象。

# jmeter - 如果控制器与预处理器一起使用

> ID：13379518
> 
> 赞同：4
> 
> 时间：2012-11-14T13:14:14.020
> 
> 标签：jmeter

在一个`Simple Controller`我放了一个`JDBC PreProcessor`和一个`If Controller`的目的是为了`If Controller`应该使用预处理器的结果。由于元素的优先级，控制器在 PreProcessor 之前解释并且无法评估异常值。

如何强制 PreProcessor 在 Controller 之前运行？

换句话说，我如何根据动态前提条件运行或跳过样本？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T13:59:23.583

我找到了原因和解决方案。预处理器属于采样器。但是（这没有描述）他们只是在采样器之前直接评估。评估后，其他采样器和控制器可以使用预处理器的结果。

在我的例子中，我首先使用了 PreProcessor，然后是带有子 Sampler 的 Conroller。在这种情况下，预处理器没有在适当的时间进行评估，因为控制器之前没有采样器：

```
1\. PreProcessor
2\. Controller (can't use the PreProcessor's result)
  2.1\. Sampler 
```

## 解决方案

如果任何 Sampler 在 Controller 之前，则 PreProcessor 将在 Controller 之前进行评估。一个采样器（例如测试操作、调试采样器或任何“无操作”采样器）必须位于预处理器和控制器之间。在这种情况下，运行顺序是预期的：

```
1\. PreProcessor
2\. Sampler (can use the PreProcessor's result)
3\. Controller (can use the PreProcessor's result) 
```

# entity-framework - 将 EF 迁移合并到新的 InitialCreate

> ID：13379519
> 
> 赞同：50
> 
> 时间：2012-11-14T13:14:28.897
> 
> 标签：entity-framework, entity-framework-5, entity-framework-migrations

我使用 EF 迁移已经有一段时间了，我的项目中有 100 多个迁移文件。我想在继续之前将这些合并到一个迁移中 - 即我想用一个新版本替换现有的 InitialCreate 迁移，该版本将我所有的后续更改都考虑在内，这样我就可以删除所有其他迁移文件。

如果我不担心丢失数据库中的所有数据，我很容易做到这一点，但我是。

我怎样才能做到这一点，同时保持所有数据完好无损，并通过运行 Update-Database （我认为使用[Julie Lerman 概述的方法](http://thedatafarm.com/blog/data-access/using-ef-migrations-with-an-existing-database/)是不可能的）从头开始（没有数据）重新创建数据库的能力？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-10-06T12:48:29.173

考虑阅读 Rick Strahl 的这篇好文章： [https ://weblog.west-wind.com/posts/2016/jan/13/resetting-entity-framework-migrations-to-a-clean-slate](https://weblog.west-wind.com/posts/2016/jan/13/resetting-entity-framework-migrations-to-a-clean-slate)

基本上，该解决方案并非微不足道，需要的不仅仅是将所有迁移重置为一个，因为您有两个场景需要适合 ONE 迁移类：

*   创建一个新数据库 => 迁移类应该包含每个表创建
*   我的数据库已经是最新的 => 我需要一个空的迁移类

解决方案：这个过程的想法基本上是这样的：数据库和 EF 架构是最新的，并且是您想要的方式，所以我们将删除现有的迁移并创建一个新的初始迁移。

总之，执行此操作的步骤是：

*   从数据库中删除 _MigrationHistory 表
*   删除项目的 Migrations 文件夹中的单个迁移文件
*   在包管理器控制台中启用迁移
*   PMC 中的添加迁移初始值
*   注释掉 Initial Migration 中 Up 方法内的代码
*   PMC 中的更新数据库（除了创建迁移条目什么都不做） 删除 Initial 方法中的注释 您现在基本上已将架构重置为最新版本。
*   在所需数据库上执行注释掉的迁移后，取消注释迁移代码

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-14T14:37:14.893

如果您不关心保留此迁移，我所做的是删除迁移文件夹中的所有内容，然后在连接字符串中定位一个新数据库（或传入一个新数据库）。之后，您可以运行 add-migration 命令：

```
add-migration InitialCreate 
```

它应该为您创建迁移。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-14T12:16:36.843

以下过程的好处是无需对 DB 进行任何操作，__MigrationHistory 可以保持原样。如果您有多个具有不同版本结构的不同环境，它也将起作用 - 只要您有匹配的分支。

我将最后一次迁移变成了初始迁移。诀窍是使用最旧版本的代码和正在使用的数据库，用新的初始迁移替换其最后一次迁移并删除所有以前的迁移。较新的分支保留较新的迁移，因此在合并到旧分支后这些迁移仍然有效。

所以从 OLDEST 分支开始 - 通常是 PROD - 并执行以下操作：

1.  删除除最后一次迁移之外的所有迁移
2.  删除上次迁移中“Up”和“Down”方法中的迁移代码
3.  将上次迁移的构建操作更改为“无”以让 EF 忽略它
4.  更改活动连接以指向本地数据库数据库。
5.  确保此本地 DB 数据库不存在
6.  添加迁移初始
7.  将创建的“初始”迁移中的向上和向下代码复制到最后一次迁移
8.  删除初始迁移
9.  将上次迁移的构建操作更改回“编译”
10.  报到
11.  合并更改
12.  在 LocalDB DB 上的 DEV 分支中进行测试 - 它应该进行新的初始迁移以及后续迁移，没有问题
13.  在最新数据库的主分支中测试 - 它不应该做任何事情

上面的注释仅在您不向迁移中添加 EF 自身不执行的内容时才有效。例如，如果您添加数据库视图等，那么新创建的迁移将不会获得这些，它只会获得 EF 根据您的代码生成的脚本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-14T16:19:06.820

删除所有迁移或重新生成它们有缺点，因此我们采取了一种方法，我们合并了所有旧迁移。

它需要一些脚本。您在此处阅读了详细信息[https://www.bokio.se/engineering-blog/how-to-squash-ef-core-migrations/](https://www.bokio.se/engineering-blog/how-to-squash-ef-core-migrations/)并在此处查看脚本[https://github.com/bokio/EFCoreTools/tree /main/MigrationSquasher](https://github.com/bokio/EFCoreTools/tree/main/MigrationSquasher)

基本是以下步骤（从博客文章复制）：

**我们的方法概述**

1.  从旧迁移创建一个新的新数据库（我们稍后将使用它进行比较）
2.  找到一个合适的目标迁移作为新的初始迁移（我们选择了一个大约 3 个月大的迁移）
3.  编写一个脚本，将所有早期迁移的 Up() 方法合并到新迁移的 Up() 方法中。我们忽略了 Down() 因为我们不将它用于旧迁移。
4.  生成此迁移并将其添加到项目中。在我们的例子中，我们称之为 20200730130157_SquashedMigrations1.cs。我们使用了我们选择的目标迁移的快照。
5.  生成第二个准备迁移，该迁移插入到 20200730130157_SquashedMigrations1.cs 已经运行的迁移历史记录中。我们将此称为 20200730130156_SquashedMigrations1_prep.cs。请注意那个稍小的时间戳，以确保它在真正迁移之前运行。
6.  删除旧的迁移
7.  将我们的配置指向一个新数据库并运行迁移。
8.  使用 Visual Studio 中的 Sql Schema Compare 比较我们生成的架构是否相等。
9.  解决问题，直到我们拥有相同的模式。这部分有点复杂，但我会回到它。
10.  合并和（好的，我们确实在本地和暂存数据库上运行了更多测试）

我希望这对其他人有帮助。EF 团队正在考虑改进这个故事，所以如果您对您的要求有反馈，它可能会帮助他们现在发布[https://github.com/dotnet/efcore/issues/2174](https://github.com/dotnet/efcore/issues/2174)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-04T10:18:14.500

我们遇到了同样的问题。我们找到的一般解决方案是

*   归档 Nuget 包上的旧迁移/上下文（包括依赖项并使用不同的命名空间以避免冲突）
*   删除所有迁移并从头开始创建新的 Init (InitV2) 迁移。
*   更改我们应用程序的启动顺序：
    *   如果数据库包含第一个旧的 Init 迁移，则
        *   使用 Nuget 包迁移数据库以确保它是最新的
        *   然后擦除 __EFMigrationHistory 表的内容并在表中插入新的迁移
    *   之后在新的上下文中使用标准的 Migrate 方法
*   而已 ！

这个解决方案比较简单。它解决了所有情况

*   新数据库（将使用 InitV2）
*   旧数据库（将升级到最后一个 V1 迁移，然后升级到 v2 数据库的最后一个版本）

*请注意，如果您在 v1 迁移中使用了自定义脚本/sql(...)，则必须检查 v2 Init 迁移是否需要它。*

为确保一切正常，我们从 v1 迁移创建了一个空数据库，从 v2 init 迁移创建了另一个数据库，并进行了架构和数据差异（使用 Visual Studio SQL Server 工具）

# joomla - 如何在 Joomla 视图中更改加载布局？

> ID：13379522
> 
> 赞同：10
> 
> 时间：2012-11-14T13:14:37.093
> 
> 标签：joomla, joomla2.5

默认 `parent::display($tpl);`加载`components/com_my_component/views/my_component/tmpl/default.php`，但在某些情况下，我需要加载位于附近同一文件夹中的其他 php 文件`default.php`（例如`components/com_my_component/views/my_component/tmpl/lol.php`）。如何从`view.html.php`.

附言

尝试加载`loadTemplate`和`setLayout`方法没有运气。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T13:42:11.753

自己解决了问题。需要使用方法[setLayout](https://api.joomla.org/cms-3/classes/Joomla.CMS.Layout.FileLayout.html#method_setLayout)并注意输入语法

```
$this->setLayout('dafault:lol');
parent::display($tpl); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-05T13:09:10.427

默认情况下，joomla`layout`在 URL 中查找关键字来决定要显示的布局。如果此变量为空或不存在，`tmpl/default.php`则将加载布局。

通过编辑您的`view.html.php`文件，您可以使用 JView API 设置默认布局，例如[`$this->setLayout('lol')`](https://docs.joomla.org/API17:JView::setLayout)将使 URL`example.com/yourview`等效于`example.com/yourview?layout=lol`.

但是，**仅此更改将导致 Joomla 覆盖其默认行为**，以便忽略该`layout`请求。这意味着该请求`example.com/yourview?layout=lmao`还将显示`example.com/yourview`=`example.com/yourview?layout=lol`

您可以通过在函数周围添加条件来轻松解决此问题，`setLayout`这样只有当`layout`关键字不存在时，您才会将默认布局设置为`lol`，例如

> ```
>  <?php 
>     # ...
> 
>       function display($tpl = null) {
>         # ...
> 
>         # Edit : Set the default layout to 'lol'
>         $layout = JRequest::getWord('layout', '');
>         if (empty($layout)) $this->setLayout("lol");
> 
>         // Display the view
>         parent::display($tpl);
>       }
> 
>     # ... 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-05T06:55:02.580

我不断地回到这个问题上，但我还没有找到令人满意的解决方案。

从 J1.5 一直到 J3.4，对我来说有效的方法一直是在 view.html.php 中设置 $tpl 变量

如果 $tpl 为空或 "" 则默认显示 tmpl/default.php。

如果您将 $tpl 更改为字符串，例如 $tpl="stacker" 那么它将查找并显示 tmpl/default_stacker.php

我已经在 MVC 中看到了关于更改它的各种不同理论，因此它不需要 default_ 借口。例如 tmpl/stacker.php 没有一个对我有用。

# mysql - 休眠mysql问题

> ID：13379524
> 
> 赞同：0
> 
> 时间：2012-11-14T13:14:44.487
> 
> 标签：mysql, hibernate

我希望从 hibernate.cfg.xml 做两件事 mysql 数据库；

1.  要有 utf8 字符，这样它就可以保存字符 č,ć,ž,đ,š 并按原样重新使用它们，而不是 ? 在挂毯应用中。

2.  修复 com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException

> 连接关闭后不允许操作。由于基础异常/错误，连接被隐式关闭：** BEGIN NESTED EXCEPTION ** com.mysql.jdbc.exceptions.jdbc4.CommunicationsException MESSAGE：从服务器成功接收的最后一个数据包是 48709 毫秒前。最后一个成功发送到服务器的数据包是在 48709 毫秒前，比服务器配置的“wait_timeout”值长。您应该考虑在应用程序中使用之前使连接有效性过期和/或测试，增加客户端超时的服务器配置值，或使用 Connector/J 连接属性“autoReconnect=true”来避免此问题。

我的 hibermate.cfg.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD//EN"
   "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
  <session-factory>
    <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="connection.url">jdbc:mysql://localhost/200</property>
    <property name="connection.username">root</property>
    <property name="connection.password">123</property>
    <property name="connection.autoReconnectForPools">true</property>
    <property name="connection.autoReconnect">true</property>
    <property name="hibernate.connection.useUnicode">true</property>
    <property name="hibernate.connection.characterEncoding">UTF-8</property>
    <property name="hibernate.connection.charSet">UTF-8</property>
    <property name="connection.pool_size">5</property>
    <property name="hbm2ddl.auto">update</property>

    <!-- Print SQL to stdout. -->
    <property name="show_sql">true</property>
    <property name="format_sql">true</property>
    <property name="use_sql_comments">true</property>
    <property name="generate_statistics">true</property>

    <property name="hibernate.transaction.flush_before_completion">false</property>

    <!-- Mapping files -->
    <mapping class="domaci.entities.Korisnik"/>
    <mapping class="domaci.entities.Magazin"/>
    <mapping class="domaci.entities.Rubrika"/>
    <mapping class="domaci.entities.Strana"/>

  </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:45:14.113

好吧，在您的 cfg 文件中，您还需要将字符集设置为 utf-8 的 č,ć,ž,đ,š 字符：

```
default-character-set=utf8 
```

或类似的东西，...，我不是很喜欢这种休眠的东西，但我知道你需要这样做。“**字符集=utf-8** ”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T19:46:47.963

下一个命令也增加了服务器超时：

```
set @@global.wait_timeout=31536000 
set @@session.wait_timeout=31536000 
```

# variables - Fortran 中的 (real(ra)) 变量声明

> ID：13379526
> 
> 赞同：1
> 
> 时间：2012-11-14T13:14:48.263
> 
> 标签：variables, fortran, declaration

我正在尝试阅读用 Fortran 90 编写的代码。在变量声明中，它具有例如：

```
real(ra) :: X 
```

我无法找出`ra`这段代码中可以引用的内容。我以为会是这样的东西`real(kind=8)`有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:11:55.160

是的

```
real(ra) :: X 
```

就好像

```
real(kind=8) 
```

事实上，如果 ra=8 也是一样的！kind= 在这里是可选的。

至于找到它 ra 将是一个参数。它可能与上面的声明在同一个例程中，它可能在例程使用的模块中，或者我想它可能在例程中包含的文件中。可能有不同的选择，但它会以某种方式在范围内。

那么为什么不使用第二种形式呢？这是因为种类数不可移植并且因编译器而异 - 例如

```
[luser@cromer stackoverflow]$ cat kind.f90 
Program real_kinds

  Implicit None

  Real( 8 ) :: a

End Program real_kinds
[luser@cromer stackoverflow]$ gfortran kind.f90 
[luser@cromer stackoverflow]$ nagfor kind.f90
NAG Fortran Compiler Release 5.3.1 pre-release(904)
Warning: kind.f90, line 7: Unused local variable A
Error: kind.f90, line 5: KIND value (8) does not specify a valid representation method
Errors in declarations, no further processing for REAL_KINDS
[NAG Fortran Compiler error termination, 1 error, 1 warning] 
```

因此，最好使用用 selected_real_kind 内在函数初始化的参数来指定种类：

```
[luser@cromer stackoverflow]$ cat kind.f90 
Program real_kinds

  Implicit None

  Integer, Parameter :: wp = Selected_real_kind( 12, 70 )

  Real( wp ) :: a

  Write( *, * ) Kind( a )

End Program real_kinds
[luser@cromer stackoverflow]$ gfortran kind.f90
[luser@cromer stackoverflow]$ ./a.out
           8
[luser@cromer stackoverflow]$ nagfor kind.f90
NAG Fortran Compiler Release 5.3.1 pre-release(904)
[NAG Fortran Compiler normal termination]
[luser@cromer stackoverflow]$ ./a.out
 2 
```

可能会做你想做的事。selected_real_kind 的常见替代方法是

```
Integer, Parameter :: wp = Kind( 1.0d0 ) 
```

所以总而言之，它是相同的，只是更好的是如果仔细完成它更便携。

（最后我真的应该说 kind 值与用于存储变量的字节数没有任何关系）

# html - MVC Web 应用程序 - 前端开发人员的最佳工作流程？

> ID：13379527
> 
> 赞同：4
> 
> 时间：2012-11-14T13:14:50.617
> 
> 标签：html, css, asp.net-mvc, razor, less

我在一家网络公司工作，程序员正在开发一个当前正在使用 MVC 框架构建的网络应用程序。作为前端开发人员，我需要为此应用程序编写 html、jquery 和 css。

该设置由带有 cshtml 文件的视图组成。我的问题是，在这种设置下发展为前端人员的最佳方式是什么？

我目前正在 Dreamweaver 中打开文件并以这种方式编辑 css 和 html，将文件保存并上传到我们的开发服务器。然后我进入浏览器刷新并查看我的更改。

如果这很重要，我正在使用更少的引导程序。另一个问题是cshtml文件与dreamweaver不兼容，我可能只是使用纯文本编辑器，但我喜欢dreamweaver的唯一一点是自动上传到FTP的保存功能，这节省了我很多时间.

当然有更好的方法来编辑这些 cshtml 文件吗？或者是这种东西的最佳方式？我很想知道其他人会如何去做这种工作。

谢谢，非常感谢任何输入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T13:37:16.737

**TL;博士**

*   我建议您首先进行网页设计，至少以原型格式（您的可交付成果将是 html 和 css，也许还有一些 js）
*   .net 开发团队然后完成`cshtml`工作，整合您的设计
*   然后，您需要同时参与审查和修复结果

**更详细**

AFAIK 仍然没有 Razor`.cshtml`文件的 WYSIWYG 编辑器，因此它们需要[手工制作](https://stackoverflow.com/questions/9440748/layout-cshtml-in-mvc3-with-razor-has-view-mode)。

我建议您（作为网页设计师）为开发团队提供尽可能纯 html 格式的每个网页的 html + css 原型（即所有具有必要类 + id 的 html 元素，并且可能至少也是第一个通过`js`/`jquery`需要）。另外，指出页面的公共位，以便开发人员可以提取`Layouts`/母版页`Partial Views`等。

`.cshtml`这里的基本原理是，除非您有 .net 经验以及 IIS 或 Cassini 手头，否则尝试编写代码没有什么意义，因为代码需要调试。如果您在更改 html 时破坏了剃须刀代码，则通过 FTP 连接到您的服务器的缺点将很明显。

然后，开发团队的工作就是确保生成的 html`.cshtml`与您的 html 布局相匹配。

请记住尽可能保持您的 html 干净，并使用 css 中的所有样式。

随着时间和经验的积累，您还应该能够掌握剃刀语法，然后您和开发团队可以转移职责，以便您就传入和传出 MVC 控制器（ViewModels、ViewBags、TempData）的数据达成一致, 和 Post data / Json 等），然后你可以自己布局html `cshtml`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:16:56.213

我通常将网站设置为在我的开发 PC 上从 IIS 运行，在 Visual Studio 中手动编辑 cshtml 和 css 文件并刷新我的浏览器以查看更改。

对于 css 的一些微调，我可能会在浏览器中使用 Firebug 或 IE Developer 工具栏（取决于浏览器）进行试验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:27:34.370

这里有几个建议

*   您可以在 Mac 上创建 HTML 示例页面并对其进行样式设置，以后可以轻松地在此基础上处理布局文件。如果您对服务器端的东西根本不感兴趣，这是完美的。以这种方式完成的样式有很多 nuget 包。其他人更容易使用/消费。您不必这样做，但您可以创建一个 nuget 包以便于共享。如果您不知道 nuget 是什么，请查看此链接[http://docs.nuget.org/](http://docs.nuget.org/)

*   您可以在 Mac 上的 Windows 上使用并行[http://www.parallels.com/products/desktop/](http://www.parallels.com/products/desktop/) 并使用 Visual Studio Web Express 和 IIS 在那里测试/开发您的应用程序

*   训练营并不难。根据您的网速，最多可能需要一个小时。

希望这可以帮助

# html - &元素

> ID：13379528
> 
> 赞同：1
> 
> 时间：2012-11-14T13:14:57.513
> 
> 标签：html, markup

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:26:05.833

两者都无效，但我会选择您的第一个选项：

```
<strong><cite>word</cite></strong> 
```

这种用法与单词更紧密地联系在一起，它允许强者强调引文的重要性，而不仅仅是引文中的单词。

使用文档： http: [//www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-cite-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-cite-element)

使用文档： http: [//www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-strong-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-strong-element)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T13:48:02.460

两种嵌套方式`cite`和`strong`语法都是正确的。它们之间的区别是高度理论化的，几乎不相关，尽管它可能会影响样式（例如，如果您在两者上设置颜色`cite`和`strong`）。

但是要解决理论问题：`<strong><cite>word</cite></strong>`意味着强调“词”作为作品（例如，一本书）的标题，而`<cite><strong>word</strong></cite>`意味着“词”作为强调的表达方式是作品的标题——所以强调将是在标题本身。因此，第一种选择听起来更合乎逻辑。

无论哪种方式，它几乎不会对搜索引擎产生影响。一些搜索引擎可能会将文档的其余部分视为不那么重要。（或者，换一种说法，他们可能会为元素的内容分配稍大的*相对*权重`strong`，相对于一般页面的内容。）

# python - 你能从傅里叶变换计算原始信号的幅度/功率吗？

> ID：13379536
> 
> 赞同：3
> 
> 时间：2012-11-14T13:15:20.240
> 
> 标签：python, numpy, scipy, signal-processing, fft

在使用 scipy.fftpack.fft() 对一些样本进行离散傅立叶变换并绘制这些样本的幅度后，我注意到它不等于原始信号的幅度。两者之间有关系吗？

有没有办法在不反转变换的情况下从傅立叶系数计算原始信号的幅度？

这是一个幅度为 7.0 和 fft 幅度为 3.5 的正弦波示例

```
from numpy import sin, linspace, pi
from pylab import plot, show, title, xlabel, ylabel, subplot
from scipy import fft, arange

def plotSpectrum(y,Fs):
 """
 Plots a Single-Sided Amplitude Spectrum of y(t)
 """
 n = len(y) # length of the signal
 k = arange(n)
 T = n/Fs
 frq = k/T # two sides frequency range
 frq = frq[range(n/2)] # one side frequency range

 Y = fft(y)/n # fft computing and normalization
 Y = Y[range(n/2)]

 plot(frq,abs(Y),'r') # plotting the spectrum
 xlabel('Freq (Hz)')
 ylabel('|Y(freq)|')

Fs = 150.0;  # sampling rate
Ts = 1.0/Fs; # sampling interval
t = arange(0,1,Ts) # time vector

ff = 5;   # frequency of the signal
y = 7.0 * sin(2*pi*ff*t)

subplot(2,1,1)
plot(t,y)
xlabel('Time')
ylabel('Amplitude')
subplot(2,1,2)
plotSpectrum(y,Fs)
show() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T15:06:01.063

是的，[Parseval 定理](https://en.wikipedia.org/wiki/Parseval_theorem)告诉我们频域中的总功率等于时域中的总功率。

您可能看到的是正向 FFT 中比例因子的结果。这个比例因子的大小是一个约定问题，但最常见的是 N 的因子，其中 N 是数据点的数量。但是它也可以等于 1 或 sqrt(N)。请检查您的 FFT 文档。

另请注意，如果您仅从一半的频域箱中获取功率（通常在时域信号是纯实数并且您在频域中具有复杂的共轭对称性时进行），那么需要注意 2 的因子。

# python - 如何使用 HTML 表单按钮停止 Python 子进程？

> ID：13379538
> 
> 赞同：0
> 
> 时间：2012-11-14T13:15:21.703
> 
> 标签：python, html, django

我使用 Django 作为 Web 框架。在单个 HTML 页面上，我有一个表单，其目的是在我单击其提交按钮时启动 Python 子进程。表单的字段将填充将传递给该子流程的参数。

现在，我希望能够使用另一个表单按钮停止同一个子进程，最好是在同一个表单中。我怎样才能做到这一点？这可能并不难，但我目前不知道如何以简单而优雅的方式完成它。有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:38:58.750

您必须在会话中保留对进程的引用。给每个提交按钮一个不同的“名称”属性，如果这个信号停止，终止子进程。

```
from subprocess import Popen
if 'start' in request.POST:
    p = Popen("do something")
    request.session['myprocess'] = p
elif 'stop' in request.POST:
    request.session['myprocess'].kill() 
```

形式：

```
<form method="POST">
<input type="submit" name="start" value="start"/>
<input type="submit" name="stop" value="stop"/>
</form> 
```

这是否有效取决于您的会话存储后端。

# r - 多维数组的R数组索引

> ID：13379540
> 
> 赞同：5
> 
> 时间：2012-11-14T13:15:30.860
> 
> 标签：r, multidimensional-array

我对 R 中的多维数组有一个简单的数组索引问题。我正在做很多模拟，每个模拟都以矩阵形式给出结果，其中条目被分类为类别。所以例如一个结果看起来像

```
aresult<-array(sample(1:3, 6, replace=T), dim=c(2,5), 
               dimnames=list(
                 c("prey1", "prey2"), 
                 c("predator1", "predator2", "predator3", "predator4", "predator5"))) 
```

现在我想将我的实验结果存储在一个 3D 矩阵中，其中前两个维度与 in 相同，`aresult`第三个维度包含属于每个类别的实验数量。所以我的计数数组应该看起来像

```
Counts<-array(0, dim=c(2, 5, 3), 
              dimnames=list(
                c("prey1", "prey2"), 
                c("predator1", "predator2", "predator3", "predator4", "predator5"),
                c("n1", "n2", "n3"))) 
```

在每次实验之后，我想将第三维中的数字增加 1，使用中的值`aresults`作为索引。

我怎么能不使用循环来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:41:51.093

这听起来像是矩阵索引的典型工作。通过`Counts`使用三列矩阵进行子集化，每一行指定我们要提取的元素的索引，我们可以自由地提取和增加我们喜欢的任何元素。

```
# Create a map of all combinations of indices in the first two dimensions
i <- expand.grid(prey=1:2, predator=1:5)

# Add the indices of the third dimension
i <- as.matrix( cbind(i, as.vector(aresult)) )

# Extract and increment
Counts[i] <- Counts[i] + 1 
```

# macos - 隐藏 Dock 图标而不关闭窗口

> ID：13379541
> 
> 赞同：7
> 
> 时间：2012-11-14T13:15:51.623
> 
> 标签：macos, cocoa, dock

我正在创建一个应用程序，我想让用户能够在运行时显示或隐藏停靠图标。我有一个带有复选框的首选项窗口，设置用户默认值，它使用 KVO 触发以下代码：

```
if (!hideDockIcon) {
    TransformProcessType(&psn, kProcessTransformToForegroundApplication);
} else {
    TransformProcessType(&psn, kProcessTransformToUIElementApplication);
} 
```

这可行，但是在隐藏时，首选项窗口会直接关闭（这很有意义，因为它现在是一个后台应用程序）。但是，我注意到 MS 的 SkyDrive 客户端设法隐藏图标，同时保持“首选项”窗口打开。我一直无法找出如何做到这一点，有人有想法吗？

我也尝试过使用`[NSApp setActivationPolicy: NSApplicationActivationPolicyRegular]`and `NSApplicationActivationPolicyAccessory`/`NSApplicationActivationPolicyProhibited`但这对我不起作用；`Accessory`不隐藏停靠图标，`Prohibited`也关闭窗口并且似乎`[NSApp activateIgnoringOtherApps:YES]`被忽略了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T17:26:00.007

我偶然发现了[这个线程](http://www.cocoabuilder.com/archive/cocoa/284023-prevent-nswindow-from-hiding-with-app.html)，建议执行以下操作以防止隐藏窗口：

```
[window setCanHide:NO]; 
```

这只是涵盖隐藏。如果您的窗口关闭，您可能会尝试使用窗口委托？有一个电话可以让你防止窗口被关闭

```
- (BOOL)windowShouldClose:(id)sender 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-07T15:18:26.543

我通过不在同一个运行循环中激活应用程序解决了这个问题：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [NSApp activateIgnoringOtherApps:YES];
}); 
```

迅速：

```
dispatch_async(dispatch_get_main_queue()) { 
    NSApp.activateIgnoringOtherApps(true)
} 
```

我正在调用 dispatch_async 来安排块在几纳秒后的下一个运行循环之一中执行。这使进程有机会完成隐藏自己。

# objective-c - 使用来自 NSURLCache 的数据

> ID：13379542
> 
> 赞同：0
> 
> 时间：2012-11-14T13:15:52.047
> 
> 标签：objective-c, ios, nsurlcache

我已经设置了一个 NSURLCache 并将 sharedcache 设置为初始化的缓存。

当我在 NSURLConnection 委托中记录大小时，我可以看到缓存大小在增长。

由于某种原因，当请求相同的数据时，再次向服务器发出请求，缓存大小的日志显示日志保持相同的大小。

这向我表明缓存工作正常，但由于某种原因，URL 加载器没有从缓存中提取。

我对请求使用默认缓存策略，并仔细检查了响应中的标头。

在这里阅读之后，我看到其他人提到了同样的问题，并将内存容量和磁盘容量设置为相同的值可以解决他们的问题，但这对我不起作用。每次都发出新请求，而不是从缓存中提取。

在发出请求之前检查数据缓存是否明智？我没有看到 NSURLRequest 方法的缓存策略参数的意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:23:01.840

HTTP 还可以让服务器告诉您如何缓存 - 它可以禁止缓存（并设置最大缓存时间）

可能会影响 SDURLCache

* * *

反正也看看[UIWebView 和 NSURLCache 有麻烦的关系](https://stackoverflow.com/questions/2090286/uiwebview-and-nsurlcache-have-a-troubled-relationship?rq=1)

据说 UIWebView 不起作用

# php - 确认删除无效

> ID：13379546
> 
> 赞同：0
> 
> 时间：2012-11-14T13:16:12.387
> 
> 标签：php, javascript, html

我有一个购买信用的链接。我想当点击链接确认显示所以如果用户点击是链接直接。但是在我的页面中，当我单击是或否链接时，会将我定向到 href 链接。表示是或否不是不同的和链接工作。

```
 <script>
    <!--
    function confirmbuy() {
    if (confirm("Are You Sure???")) {
    return true;
    } else {
    return false;
    }
    }
    //-->
    </script>
<a href="buy.php" onclick="confirmbuy();">Buy</a> 
```

我测试此代码的提交按钮并正常工作，但链接不起作用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:17:10.450

你需要返回`confirmbuy()`函数的结果，否则事件永远不会被取消。

```
<a href="buy.php" onclick="return confirmbuy();">Buy</a> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T13:17:21.620

您的事件处理函数（由内部事件属性的值定义）不返回任何内容。它只是调用`confirmbuy`然后停止。

如果你想返回`confirmbuy`then 的返回值，你必须明确地这样做：

```
onclick="return confirmbuy();"> 
```

你不会有这个问题是`confirmbuy`事件处理程序：

```
ref_to_link.addEventListener('click', confirmbuy); 
```

我建议阅读更多关于[addEventListener](https://developer.mozilla.org/en/DOM/element.addEventListener)和[Unobtrusive Javascript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T13:19:46.113

内联处理程序实际上是放入一个函数中，该函数被设置为单击事件的处理程序。所以基本上你的代码相当于：

```
a.addEventListener("click",function(e){
    confirmbuy();
}) 
```

如您所见，此处理程序不会返回 false，因此事件会正常进行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T13:18:19.130

你需要：

```
onclick="return confirmbuy();" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-14T13:18:42.590

更好的..

```
<a href="buy.php" onclick="return confirm('Are You Sure???');">Buy</a> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-14T13:19:04.187

修复并删除了不必要的代码：

```
<a href="buy.php" onclick="return confirm('Are You Sure???');">Buy</a> 
```

# objective-c - dequeueReusableCellWithIdentifier 总是返回 nil（不使用情节提要）

> ID：13379547
> 
> 赞同：9
> 
> 时间：2012-11-14T13:16:12.560
> 
> 标签：objective-c, ios, uitableview, deque

我正在使用重用标识符以**编程方式创建单元格。**

**注意**- 我没有使用情节提要来创建单元格

每当单元出列时，单元为 nil，因此需要使用 alloc 重新创建单元，这很昂贵。

**编辑（添加了 1 个问题并更正了代码）**

**问题**

*   为什么这个出队总是返回 nil ？我该如何纠正它？
*   出队是否仅在与故事板/笔尖文件一起使用时才起作用？

**代码**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(!cell) //Every time cell is nil, dequeue not working 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T13:24:48.420

您需要先将 as 设置`CellIdentifier`为`Cell`. 你这样做吗？当您创建一个新单元格时，您需要为其分配此标识符`Cell`。只有这样 iOS 才能`dequeueReusableCellWithIdentifier`使用该标识符。以编程方式你可以这样做 -

```
UITableViewCell *cell = [[UItableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:@"Cell"]; 
```

您也可以从 Interface Builder 设置标识符 -

![在此处输入图像描述](../Images/81d91fa5d78942bc61ec4cc83dfc65ee.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-14T21:25:17.977

我犯了几个错误：

1.  我正在使用的子类`UITableViewController`，但是在子类之外创建 tableView
2.  `tableView`在表格视图控制器中创建了一个，它在表格视图控制器中返回`self.tableView`索引路径的单元格时，我使用`self.tableView`的是`tableView`.
3.  此外，请确保将单元标识符声明为`static`

    ```
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
    ```

因为`tableView`和`self.tableView`代表不同的表，单元格没有从同一个表中出列，因此总是`nil`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T13:45:18.740

此代码应该生成警告“控制到达非无效函数的结尾”，因为您实际上并没有返回任何内容。添加`return cell;`到函数的末尾。此外，您永远不会将重用标识符添加到新创建的单元格中。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";    
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    return cell;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-29T13:03:40.863

首先在**viewDidLoad**方法中声明tableViewCell 的**单元格标识符为：**

 **```
[tableView registerClass:UITableViewCell.class forCellReuseIdentifier:@"MyCell"]; 
```

现在回想具有相同标识符**“MyCell”**的 UITableViewCell 实例：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyCell" forIndexPath:indexPath]; 
```

进一步只是填满单元格..现在逻辑执行有限数量的单元格能够有效地显示非常大的列表（使用出队概念）。

**但请记住**为单元格中使用的每个 UIView 分配值（如果需要，甚至为零），否则会发生文本/图像的覆盖/重叠。**

# grails - 大规模部署 Grails 应用程序

> ID：13379552
> 
> 赞同：1
> 
> 时间：2012-11-14T13:16:27.190
> 
> 标签：grails, deployment, backend, frontend

我开始研究 Grails，我觉得编写一个包含服务、控制器、RESTful 界面和一些简单视图的简单原型 Web 应用程序很舒服。

部署的常用方法是将 Web 应用程序打包成 .war（或 .zip 用于插件），然后将其部署到应用程序服务器，例如 Tomcat。

假设我将前端集成到一个更大的现有前端/门户中，我不想将它与一些可能很重的后端打包在一起并将所有这些放在同一个应用程序服务器上，这最初是为了托管前端/门户代码。此外，后端可能会提供其他应用程序使用的服务。

考虑可扩展性的灵活性，是否有可能（或根本需要？）通过打包将前端（视图，可能是一些控制器）和后端（可能是 REST 控制器？，服务，域）单独部署到不同的主机两个独立的模块？有人有大规模推出 Grails 应用程序的经验吗？

# jpa - 使用 EclipseLink 在 JBoss AS7 中 JTA 控制事务，需要事务

> ID：13379557
> 
> 赞同：0
> 
> 时间：2012-11-14T13:16:41.240
> 
> 标签：jpa, transactions, eclipselink, jboss7.x, jta

# 环境

应用服务器：**JBoss AS7 (7.1.1 Final)**

JPA 实现：**EclipseLink (2.4.1)**

操作系统：Windows 7 数据库：PostgreSQL 8.4

# 更新2，解决了

问题是我实例化了 AccountService 类，而不是使用`@EJB`. 修复该 EntityManager 在服务中被正确感染并且在执行时事务可用`em.persist(account);`

# 更新

我做了一个最小的项目来显示我的问题。发布到 Github：

[https://github.com/gotling/jboss-eclipselink-problem](https://github.com/gotling/jboss-eclipselink-problem)

我有两个可能相关的问题，因为我不理解 EJB 的正确使用。

1.  我无法在持久性 JAR 中将 EnityManager 注入 AccountService.java，从而导致 NullPointerException。

2.  如果在构造函数中将 EntityManager 发送到 AccountService，则在执行 em.persist 时找不到事务。

# 项目结构

EJB

*   库/persistanceunit.jar

*   网络服务.war

# 问题

我试图让 JBoss 管理我的 Java EE 服务中的事务。问题是 EclipseLink 在尝试持久化实体时似乎没有获取 JBoss 管理的事务。

我已按照指南[https://community.jboss.org/wiki/HowToUseEclipseLinkWithAS7](https://community.jboss.org/wiki/HowToUseEclipseLinkWithAS7)（备选方案 1 和备选方案 2 第 4 步）了解如何使用 EclipseLink 配置 JBoss。

# 设置

## 战争

实体管理器像这样在 web-service.war 中注入：

```
@WebService(....)
public class NotificationConsumerImpl implements NotificationConsumer {
    @PersistenceContext(unitName="foo")
    EntityManager em;

    public void notify(Notify notify) {
        AccountService accountService = new AccountService(em);
        accountService.create(notify);
    }
} 
```

在上面的类和服务类之间实际上有一个控制器类，其中对 Account 对象进行了转换，将其删除以缩短代码。

## 持久性单元

实体是这样创建的

persistanceunit.jar 中的 AccountService.java

```
@Stateless
public class AccountService {
    private EntityManager em;

    public AccountService(EntityManager em) {
        this.em = em;
    }

    public void create(Account account) {
        em.persist(account);
    }
} 
```

# 堆栈跟踪

当调用应该持久化 Account 实体的 WS 时，我在*em.persist(account); 上得到一个异常；*

`... Caused by: javax.persistence.TransactionRequiredException: JBAS011469: Transaction is required to perform this operation (either use a transaction or extended persistence context) at org.jboss.as.jpa.container.AbstractEntityManager.transactionIsRequired(AbstractEntityManager.java:692) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final] at org.jboss.as.jpa.container.AbstractEntityManager.persist(AbstractEntityManager.java:562) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final] at se.magos.service.AccountService.create(AccountService.java:50) [persistenceunit-0.0.1-SNAPSHOT.jar:]`

# 问题

1.  我已启用跟踪日志记录。*id.au.ringerc.as7.eclipselinkpersistence*不应该在日志中可见吗？

2.  是否有可能以某种方式将 EntityManager 注入persistanceunit.jar 内的服务类中？

3.  这应该在哪个 JBoss / EclipseLink 版本中开箱即用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:45:41.677

您应该使用 注释 bean`@TransactionManagement(TransactionManagementType.CONTAINER)`和注释`create`方法`@TransactionAttribute(TransactionAttributeType.REQUIRED)`。第一个注解是为了让应用服务器知道事务是由容器管理的，后者是为了让方法启动一个事务，如果没有当前的事务，只要它被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T07:36:28.373

问题是 AccountService 类是实例化的，而不是使用`@EJB`注释注入的。修复 EntityManager 后，在服务中正确注入，并且在执行 em.persist(account); 时事务可用；

### 前

```
@WebService(....)
public class NotificationConsumerImpl implements NotificationConsumer {
    @PersistenceContext(unitName="foo")
    EntityManager em;

    public void notify(Notify notify) {
        AccountService accountService = new AccountService(em);
        accountService.create(notify);
    }
} 
```

### 后

```
@WebService(....)
public class NotificationConsumerImpl implements NotificationConsumer {
    @PersistenceContext(unitName="foo")
    EntityManager em;

    @EJB
    AccountService accountService;

    public void notify(Notify notify) {
        accountService.create(notify);
    }
} 
```

# node.js - 在 Node.js 上的 Express 中扩展 View 类

> ID：13379558
> 
> 赞同：1
> 
> 时间：2012-11-14T13:16:43.407
> 
> 标签：node.js, express, monkeypatching

我想覆盖 Node.js 中使用的 Express 框架中的 View 类。我想增加查找方法，但如果不更改 Express 和 App 模块，我看不到这样做的方法。我更喜欢从 Express 框架派生，但我想不出一个巧妙的方法来做到这一点。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:24:47.173

在我看来，您应该能够：

```
var View = require('express/lib/view');

// Keep reference to original lookup method
var _lookup = View.prototype.lookup;

// Override lookup method
View.prototype.lookup = function (path) {
    // Your implementation here
}; 
```

**更新：**

运行它作为演示：

```
var View = require('express/lib/view');
var _lookup = View.prototype.lookup;
var express = require('express');

View.prototype.lookup = function (path) {
    console.log('LOOKUP!!! ' + path);

    return _lookup.call(this, path);
};

var app = express();

app.get('/', function (req, res) {
    res.render('foo.jade');
});

app.listen(3000); 
```

跑

```
node app & sleep 1 && curl localhost:3000 
```

我希望这将证明这种重写方法的可行性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:07:44.337

这取决于您使用的 Express 版本。

仅当您的应用程序使用版本 3 之前的 Express 时，您才能轻松地扩充视图查找代码

自 Express 3.0 以来，这不再可行。

您可以查看我的旧相关答案之一以获取示例代码： [Node.js + Express 上的多个视图路径](https://stackoverflow.com/questions/11315351/multiple-view-paths-on-node-js-express/11326059#11326059)

# java - Reflection Method.getParameterTypes() - 对象数组参数

> ID：13379560
> 
> 赞同：2
> 
> 时间：2012-11-14T13:16:54.290
> 
> 标签：java, reflection

我正在使用反射来获取所有方法参数名称。

问题是当参数之一是类型时： the.package.myobject [] (array)

```
String name = method.getParameterTypes()‬[0].getName() 
```

我得到：[the.package.myobject;] //字母 L 和符号 ;

如何获得纯类型名称？（没有子串）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T13:20:38.857

您需要检查`type.isArray()`，如果是，请使用`getComponentType()`.

```
final Class<?> c = method.getParameterTypes()[0];
final String name = (c.isArray()? c.getComponentType() : c).getName(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:18:49.433

最有可能你想要的是

```
Class firstType = method.getParameterTypes()‬[0];

// will be null if not an array.
Class firstComponentType = firstType.getComponentType(); 
```

# android - java.lang.NullPointerException 显示在 mBoundService.setAlarm(c);

> ID：13379580
> 
> 赞同：1
> 
> 时间：2012-11-14T13:18:05.807
> 
> 标签：android, nullpointerexception, serviceconnection

我想在用户选择某个日期时提醒他。[我在这里](http://blog.blundell-apps.com/notification-for-a-user-chosen-time/)找到了一个余数的例子，但我得到了一个`NullPointerException`.

```
package com.example.eventremainder;

import java.util.Calendar;

import com.example.eventremainder.R;
import com.example.eventremainder.Service.ScheduleClient;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.ContentValues;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.provider.Contacts;
import android.provider.ContactsContract;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

public class AddEventActivity extends Activity{
    private EditText nameEditText,phoneet;
    TextView dobm;
    private DatePicker datePicker;
    private Button ok,browse;
    private String checkedevent;
    private Spinner spinner;
    private ScheduleClient scheduleClient;
    private static final String[] arrayString={"BirthDay","MarriageDay"};
     public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.selectevent);
            nameEditText=(EditText)findViewById(R.id.editText1);
            phoneet=(EditText)findViewById(R.id.phneno);
            dobm=(TextView)findViewById(R.id.dobm);
            datePicker=(DatePicker)findViewById(R.id.scheduleTimePicker);
            spinner=(Spinner)findViewById(R.id.spinner1);
            ok=(Button)findViewById(R.id.ok);
            browse=(Button)findViewById(R.id.browse);
            ok.setEnabled(false);
            scheduleClient=new ScheduleClient(AddEventActivity.this);
            scheduleClient.doBindService();
      }

    public void onResume()
    {
        super.onResume();
        nameEditText.addTextChangedListener(tw);
        dialogBox();
    }
    TextWatcher tw=new TextWatcher() {
        public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {
            if(String.valueOf(arg0).equals(""))
            {
                ok.setEnabled(false);
            }
            else{
                ok.setEnabled(true);
            }
        }
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
        }
        public void afterTextChanged(Editable arg0) {
            if(!nameEditText.getText().toString().equals("")){
                ok.setEnabled(true);
            }
        }
    };
     public void dialogBox()
      {
            ArrayAdapter<String > arrayAdapter=new ArrayAdapter<String>(AddEventActivity.this, android.R.layout.simple_dropdown_item_1line, arrayString);
            spinner.setAdapter(arrayAdapter);
            spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
          public void onItemSelected(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    checkedevent=arrayString[arg2];
                }
                public void onNothingSelected(AdapterView<?> arg0) {
                }
            });

            browse.setClickable(true);
            ok.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    SQLiteDatabase sqLiteDatabase=null;
                    sqLiteDatabase=openOrCreateDatabase("eventremainder", 0 ,null);
                    String checkedname="---";
                    String phone="--";
                    int day=0,month=0,year;
                    checkedname=nameEditText.getText().toString().trim();
                    day=datePicker.getDayOfMonth();
                    year=datePicker.getYear();
                    month=datePicker.getMonth();
                    String month2=month(month);
                    String date=""+day+"-"+(month2);
                    Calendar c=Calendar.getInstance();
                    c.set(year, month, day);
                    c.set(Calendar.HOUR_OF_DAY, 0);
                    c.set(Calendar.MINUTE, 0);
                    c.set(Calendar.SECOND, 0);
                    // Ask our service to set an alarm for that date, this activity talks to the client that talks to the service
                    scheduleClient.setAlarmForNotification(c);
                    try{
                    String selection="name=? and event=? and day=? and month=?";
                    String[] whereArgs1={checkedname,checkedevent,""+day,month2};
                    Cursor cursor=sqLiteDatabase.query("eventstable", null, selection, whereArgs1, null, null, null);
                    if(cursor.moveToNext())
                    {
                        throw new IndexOutOfBoundsException();
                    }
                    else
                    {
                    ContentValues cv=new ContentValues();
                    cv.put("name", checkedname);
                    cv.put("event", checkedevent);
                    cv.put("day",day);
                    cv.put("month", month2);
                    cv.put("monthint", month);
                    cv.put("year", year);
                    cv.put("phone_no",phone);
                    nameEditText.setText("");
                    phoneet.setText("");
                    long l=sqLiteDatabase.insert("eventstable", null, cv);
                    if(l!=-1l)
                    {

                        Toast.makeText(getApplicationContext(), checkedname  +  checkedevent  + " Added " , Toast.LENGTH_LONG).show();
                        switchToTab(checkedevent);
                    }
                    }
                    }
                    catch (IndexOutOfBoundsException e) {
                        nameEditText.setError("These Details are already exists");
                    }
                    finally{
                        sqLiteDatabase.close();
                    }
                }
            });

      }

     public String month(int month)
    {
        String month1=null;
        switch (month) {
        case 0:month1="Jan";
            break;
        case 1:month1="Feb";
        break;
        case 2:month1="Mar";
        break;
        case 3:month1="Apr";
        break;
        case 4:month1="May";
        break;
        case 5:month1="Jun";
        break;
        case 6:month1="Jul";
        break;
        case 7:month1="Aug";
        break;
        case 8:month1="Sep";
        break;
        case 9:month1="Oct";
        break;
        case 10:month1="Nov";
        break;
        case 11:month1="Dec";
        break;

        }
        return month1;
    }
     public void browsemethod(View arg0)     {

         Intent intent =new Intent(getApplicationContext(), ContactsListActivity.class);
         startActivityForResult(intent, 1);
     }
     protected void onActivityResult(int requestCode, int resultCode, Intent data) {
          super.onActivityResult(requestCode, resultCode, data);
          if(resultCode==RESULT_OK && requestCode==1){
           String name  = data.getStringExtra("name");
           String phone=data.getStringExtra("phonenumber");
           tw.onTextChanged(name, 5, 5, 5);
               nameEditText.setText(name);

               phoneet.setText(phone);
          }
    }
     public boolean onKeyDown(int keyCode,KeyEvent event)
     {
         super.onKeyDown(keyCode, event);
         switch (keyCode) {
        case KeyEvent.KEYCODE_BACK:
            AlertDialog.Builder alertdialogbuilder=new AlertDialog.Builder(AddEventActivity.this);
            alertdialogbuilder.setTitle("Do you want to exist from application");
            alertdialogbuilder.setPositiveButton("yes", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    finish();
                }
            });
            alertdialogbuilder.setNegativeButton("No", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {

                }
            });
            alertdialogbuilder.create();
            alertdialogbuilder.show();
            return true;

        default:
            break;
        }
        return false;

     }
     public void switchToTab(String tab)
     {
         TabMainActivity tabMainActivity=(TabMainActivity) this.getParent();
                 if(tab.equalsIgnoreCase("BirthDay"))
             {

                     tabMainActivity.switchTab(0);
             }
         else {
             if(tab.equalsIgnoreCase("MarriageDay"))
             {
                 tabMainActivity.switchTab(1);

             }
         }

     }
}
</b>

another class i ussed is scheduleclient 
<b>
package com.example.eventremainder.Service;

import java.util.Calendar;

import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.IBinder;

/**
 * This is our service client, it is the 'middle-man' between the
 * service and any activity that wants to connect to the service
 * 
 * @author paul.blundell
 */
public class ScheduleClient {

    // The hook into our service
    private ScheduleService mBoundService;
    // The context to start the service in
    private Context mContext;
    // A flag if we are connected to the service or not
    private boolean mIsBound;

    public ScheduleClient(Context context) {
        mContext = context;
    }

    /**
     * Call this to connect your activity to your service
     */
    public void doBindService() {
        // Establish a connection with our service
        mContext.bindService(new Intent(mContext, ScheduleService.class), mConnection, Context.BIND_AUTO_CREATE);
        mIsBound = true;
    }

    /**
     * When you attempt to connect to the service, this connection will be called with the result.
     * If we have successfully connected we instantiate our service object so that we can call methods on it.
     */
    private ServiceConnection mConnection = new ServiceConnection() {
        public void onServiceConnected(ComponentName className, IBinder service) {
            // This is called when the connection with our service has been established, 
            // giving us the service object we can use to interact with our service.

            mBoundService = ((ScheduleService.ServiceBinder) service).getService();
        }

        public void onServiceDisconnected(ComponentName className) {
            mBoundService = null;
        }
    };

    /**
     * Tell our service to set an alarm for the given date
     * @param c a date to set the notification for
     */
    public void setAlarmForNotification(Calendar c){
        mBoundService.setAlarm(c);
    }

    /**
     * When you have finished with the service call this method to stop it 
     * releasing your connection and resources
     */
    public void doUnbindService() {
        if (mIsBound) {
            // Detach our existing connection.
            mContext.unbindService(mConnection);
            mIsBound = false;
        }
    }
} 
```

它在 处显示空指针异常`mBoundService.setAlarm(c)`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:32:54.827

看起来服务没有成功绑定。连接不会立即返回，但由于您在事件处理程序中调用它，这很可能不是问题。您是否正确注册了服务？尝试在 onServiceConnected() 方法中放置一些调试语句/断点，以验证它是否实际被调用/何时被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T08:26:43.527

我也面临同样的问题..出于某种原因，我在 onCreate 方法中调用了它..但是当我从其他事件中调用它时，它工作正常..我知道，我迟到了，但这可能是一个可以帮助其他人的解决方案

# authentication - Glassfish 认证流程

> ID：13379584
> 
> 赞同：1
> 
> 时间：2012-11-14T13:18:15.493
> 
> 标签：authentication, glassfish

我不太了解 Glassfish 的身份验证过程（在我的例子中是 V3）。

对于 JSE 简单应用程序，我们使用 JAAS API 通过回调处理程序和登录上下文对用户进行身份验证。

对于 Glassfish 等应用服务器，我们使用领域来验证用户身份。这些领域使用 JAAS，但实现了一些应用逻辑代码以插入到 Glassfish 结构中，并且凭据通过容器传递到领域以对用户进行身份验证。凭证是通过“一种”回调处理程序获得的，它们是 BASIC、FORM、DIGEST 和 CLIENT-CERT。

那正确吗 ？

现在，也有 SAM（服务器身份验证模块），我不知道它们在身份验证过程中发生的确切时间？我认为 SAM 在请求过程中发生在领域之前，但我不确定......有人可以确认吗？SAM 是回调处理程序吗？

谢谢

# php - mysql_connect() 错误信息

> ID：13379588
> 
> 赞同：3
> 
> 时间：2012-11-14T13:18:20.300
> 
> 标签：php, mysql, apache

我已经安装了Apache2.2，然后安装了PHP5.4.8。我无法让我的新`.php`文件加载到浏览器中，因为它一直给我错误`Fatal error: Call to undefined function mysql_connect()`。当我加载`test.php`其中只有这个的文件时： `<?php phpinfo(); ?>`它返回一个页面，该页面显示有关 PHP 的信息，但它会显示它只显示的 MySQL 模块`mysqlnd`。那是什么？此外，我浏览了该`php.ini`文件并取消了 MySQL 集成的正确行的注释，并编辑了 Apache2.2 httpd 文件。有没有人知道为什么 MySQL 不工作？提前致谢。

此外，我尝试了该网站上的许多解决方案以及许多谷歌搜索。我似乎无法弄清楚。:-(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:43:44.957

1) 看看[选择 MySQL API](http://php.net/manual/en/mysqlinfo.api.choosing.php)。建议使用[`mysqli`](http://php.net/manual/en/book.mysqli.php)扩展。

2) 根据对[扩展的其他更改](http://www.php.net/manual/en/migration54.extensions-other.php)，MySQL 扩展[mysql](http://www.php.net/manual/en/book.mysql.php)、[mysqli](http://www.php.net/manual/en/book.mysqli.php)和[PDO_mysql](http://www.php.net/manual/en/ref.pdo-mysql.php)现在使用[mysqlnd](http://www.php.net/manual/en/book.mysqlnd.php)作为默认库。
来自[MySQL Native Driver - mysqlnd](http://www.php.net/manual/en/mysqlnd.overview.php)站点的引用：

> *虽然 MySQL Native Driver 是作为 PHP 扩展编写的，但需要注意的是，它并没有为 PHP 程序员提供新的 API。**MySQL 数据库连接的程序员 API 由 MySQL 扩展 mysqli 和 PDO MYSQL 提供**。这些扩展现在可以使用 MySQL Native Driver 的服务与 MySQL 服务器进行通信。因此，**您不应将 MySQL Native Driver 视为 API**。*

这意味着，该`mysqlnd`扩展不会导出您可以在脚本中使用的任何功能，而是充当您的代码与`mysql`, `mysqli`,`pdo_mysql`扩展之一之间的桥梁。

你提到，那只`phpinfo()`显示mysqlnd。您没有看到标题为`MySQL`那里的部分的事实意味着`mysql`在（Windows）中未启用（注释掉）扩展，`php.ini`或者您的 php 未使用 mysql 支持（Linux）编译。有关安装 MySQL 扩展的更多详细信息，请参见[此处](http://php.net/manual/en/mysql.installation.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:25:38.737

你的操作系统是什么？

要成功连接 MySQL，您应该：

*   安装 MySQL 服务器
*   配置 PHP 以使用正确的 mysql 套接字：（在 php.ini 中搜索 mysql.default_socket - 将其指向 mysql 服务器）。
*   重新启动 Web 服务器 - Apache

# java - 在 Eclipse 中混合 scala、maven 和 java - 单元测试

> ID：13379591
> 
> 赞同：7
> 
> 时间：2012-11-14T13:18:30.480
> 
> 标签：java, eclipse, scala, maven, scalatest

我有一个 java maven 项目，我想用 scala 进行单元测试。但是，由于 java 和 scala 使用它们自己的编译器，我如何在一个 Eclipse 项目中混合使用 java 和 scala 代码。由于这个 Scala 代码不会在 Eclipse 中编译，因为 java 编译器需要 java 语法。

目前我的项目基于 Eclipse，它们是基于 java 的项目。它们是否需要转换为不同的项目类型，例如 scala ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:27:31.967

如果您只想从 Scala 测试 Java 代码，那么设置这样的 maven 项目非常容易。由于我不是 eclipse 用户，我不确定它如何与 eclipse 一起使用。我用 IntelliJ 测试过，效果很好。eclipse也不应该有任何问题。

我创建了一个简单`pom.xml`的方法，它只使用 scala 编译器进行测试，并将普通的 java 编译器用于主要的 java 代码。

`pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.stackoverflow.Q13379591</groupId>
    <artifactId>Q13379591</artifactId>
    <version>1.0-SNAPSHOT</version>

    <name>${project.artifactId}-${project.version}</name>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <scala.version>2.9.2</scala.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.scala-lang</groupId>
            <artifactId>scala-library</artifactId>
            <version>${scala.version}</version>
        </dependency>
        <dependency>
            <groupId>org.scalatest</groupId>
            <artifactId>scalatest_${scala.version}</artifactId>
            <version>2.0.M4</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.scala-tools</groupId>
                <artifactId>maven-scala-plugin</artifactId>
                <version>2.15.2</version>
                <executions>
                    <execution>
                        <id>scala-test-compile</id>
                        <phase>test-compile</phase>
                        <goals>
                            <goal>testCompile</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <args>
                        <arg>-g:vars</arg>
                        <arg>-make:transitive</arg>
                        <arg>-dependencyfile</arg>
                        <arg>${project.build.directory}/.scala_dependencies</arg>
                    </args>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.scalatest</groupId>
                <artifactId>scalatest-maven-plugin</artifactId>
                <version>1.0-M2</version>
                <configuration>
                    <reportsDirectory>${project.build.directory}/surefire-reports</reportsDirectory>
                    <junitxml>.</junitxml>
                    <filereports>WDF TestSuite.txt</filereports>
                    <stdout>W</stdout> <!-- Skip coloring output -->
                </configuration>
                <executions>
                    <execution>
                        <id>scala-test</id>
                        <goals>
                            <goal>test</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

现在这是我要测试的一个简单的 Java 类：

`src/main/java/com/stackoverflow/Hello.java`

```
package com.stackoverflow;

/**
 * @author maba, 2012-11-14
 */
public interface Hello {
    String hello();
} 
```

`src/main/java/com/stackoverflow/HelloJava.java`

```
package com.stackoverflow;

/**
 * @author maba, 2012-11-14
 */
public class HelloJava implements Hello {

    public String hello() {
        return "Hello Java";
    }
} 
```

最后是 ScalaTest 测试类。

`src/test/scala/com/stackoverflow/HelloJavaTest.scala`

```
package com.stackoverflow

import org.scalatest.FlatSpec

/**
 * @author maba, 2012-11-14
 */
class HelloJavaTest extends FlatSpec {
  "HelloJava" should "be instance of Hello" in {
    val hello = new HelloJava
    val result = hello match {
      case f:Hello => true
    }
    assert(result)
  }

  it should "say Hello Java" in {
    val helloJava = new HelloJava
    assert(helloJava.hello === "Hello Java")
  }
} 
```

您现在可以使用以下命令运行它：

```
mvn test 
```

我可以在 IntelliJ 中右键单击测试用例并运行测试。在eclipse中也应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:21:58.650

maven-scala-plugin 可以对 Scala 和 Java 代码进行联合编译。从 Scala 2.7 开始，Scala 通常可以进行联合编译。

# zend-framework - Zend Framework 如何禁用控制器

> ID：13379601
> 
> 赞同：-1
> 
> 时间：2012-11-14T13:19:10.837
> 
> 标签：zend-framework, zend-controller-router

当我把这个地址放在 example.com/js/config 时，我需要为 JS 加载一个配置文件，但路由器加载一个控制器并显示错误，因为控制器不存在。在引导文件中，我放置了一个 _init 方法：

```
 protected function _initJsConfig(){
    $this->bootstrap('frontController');
    $oFront = $this->getResource('frontController');
    $oFront->setRequest(new Zend_Controller_Request_Http());
    $oRequest = $oFront->getRequest();
    $oRequest->setDispatched(false);
    //$oFront = Zend_Controller_Front::getInstance()->getRequest();
    if($oRequest->getControllerName() == 'js' && $oRequest->getActionName() == 'config'){
        include('/config/config.js.php');

        return;
    }
} 
```

但这不起作用。有任何想法吗？此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:53:48.103

默认 ZF`.htaccess`不会提供`.php`文件夹以外`index.php`的`public`文件，因此将该`.php`文件移出公共空间。

把它放在`application/configs`或类似的地方。

您可能会修改您的文件以`.htaccess`仅提供一个`.php`文件，但您确实不希望`.php`服务器上的公共空间中有任意文件。

# google-analytics - 是否有任何 Google Analytic Streaming/Real-time API？

> ID：13379602
> 
> 赞同：2
> 
> 时间：2012-11-14T13:19:16.923
> 
> 标签：google-analytics, google-analytics-api

我正在为 Google Analytic 寻找流式传输/实时 API 任何参考或文档来源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-04T08:27:23.727

这是。现在谷歌已经为谷歌分析推出了新的实时 API。此 API 与 Google Analytics API 非常相似。[它提取给定维度和指标](https://developers.google.com/analytics/devguides/reporting/realtime/dimsmets/)中的 Google Analytics（分析）实时数据

要开始开发此 API，您可以从[此处获取 API 参数](https://developers.google.com/analytics/devguides/reporting/realtime/v3/devguide)

# vb.net - VB.Net 一些函数的区别

> ID：13379603
> 
> 赞同：3
> 
> 时间：2012-11-14T13:19:19.873
> 
> 标签：vb.net, function

我已经搜索过，但找不到任何关于。

我想知道两者之间的区别：

`Hex()`和`Hex$()`

和

`CInt()`和`Convert.ToInt32()`- 使用一个或另一个改变了我的应用程序中某些值的结果，我想知道何时使用一个或另一个。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T21:53:42.940

`Hex()`在 VB.NET 中，和之间没有真正的区别`Hex$()`——它们都调用相同的函数。美元符号只是表明该函数将返回一个字符串（它已经这样做了）。旧的 VB 曾经有一个区别，但现在早已不复存在。

`CInt ()`和`Convert.ToInt32 ()`/之间有细微的差别`Int32.Parse ()`，[这里](http://www.panopticoncentral.net/2004/06/07/conversion-operators-in-vb/)有一篇关于这个的非常好的帖子。我个人使用`CInt`或`Int32.Parse`取决于输入 - 前者用于数字转换（例如，Long to Integer，正如帖子解释`CInt`的那样在这种情况下要快得多），后者用于字符串转换（“123”到 Integer，因为它更容易指定文化/格式选项）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T13:37:36.477

`Hex()`返回一个变体（VarType String）并`Hex$()`返回一个真正的字符串。

来源：[http ://forums.codeguru.com/showthread.php?18417-hex-hex](http://forums.codeguru.com/showthread.php?18417-hex-hex)

`CInt()`已弃用。`Int32.Parse()`是首选方法。

来源：[http ://forums.asp.net/p/681608/681796.aspx](http://forums.asp.net/p/681608/681796.aspx)

# algorithm - 线段集合的最佳交点？

> ID：13379604
> 
> 赞同：4
> 
> 时间：2012-11-14T13:19:25.583
> 
> 标签：algorithm, math, geometry, computational-geometry

我有许多 2D 线段，它们都应该在一个点相交，但不会因为早期计算中的噪声而无法减少。

是否有一种算法来计算所有线段的交点的最佳近似值。类似于到所有线段的最小平均距离的点，不一定位于任何线段上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:44:10.057

Amit 的第一条评论就是您的答案。我会解释为什么。

让`p_i`成为您的交点和`c = 1/n sum(p_i)`。让我们证明最小化和任意点之间`c`的平均距离：`d(a)``p_i``a`

```
d(a) = 1/n sum( |a-p_i|^2 ) 
```

被平均的`d(a)`是，使用内积符号，

```
|a-p_i|^2 = <a-p_i, a-p_i> = |a|^2 + |p_i|^2 - 2<a,p_i>` 
```

的平均值`<a,p_i>`是`<a,c>`，使用点积的双线性特性。所以，

```
d(a) = |a|^2 - 2<a,c> + 1/n sum( |p_i|^2 ) 
```

同样地

```
d(c) = |c|^2 - 2<c,c> + 1/n sum( |p_i|^2 ) = -|c|^2 + 1/n sum( |p_i|^2 ) 
```

减去两个

```
d(a) - d(c) = |a|^2 - 2<a,c> + |c|^2 = |a-c|^2 
```

因此，将`d(c)`两边相加，到任意点的平均距离`a`为

```
d(a) = d(c) + |a-c|^2 
```

由于所有项都是正数，因此`|a-c|^2`在为零时最小化，换句话说，当`a = c`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:04:58.073

如果我们可以自由选择一个度量，距离平方和可能会给出一个简单的算法。

我们可以将到直线#i 的距离平方表示为点坐标的函数，我们将得到`(A[i]x,x)+(b[i],x)+c[i]`，`A[i]`是一个 3x3 矩阵，`b[i]`- 向量，`c[i]`- 数，(a,b) - 标量乘法。

他们的总和将是`(A[sum]x,x)+(b[sum],x)+c[sum]`。

这种函数的最小值是`x=-inverse(A[sum])b[sum]/2`。

# xcode - 使用“将文件添加到项目”似乎是一个浅拷贝

> ID：13379608
> 
> 赞同：1
> 
> 时间：2012-11-14T13:19:33.273
> 
> 标签：xcode

通过第 4 版 Objective-C 编程书来学习 Objective-C。

在使用 Xcode 4.5.2 创建 Fraction_Calculator 项目时，我使用“将文件添加到项目”从以前的名为 Fraction 的项目中复制了 Fraction.h 和 Fraction.m 文件。然后我在 Fraction_Calculator 中修改了 Fraction.h，惊讶地发现这个文件也在 Fraction 项目中进行了修改，这意味着“将文件添加到项目”使用浅拷贝。

有没有办法在项目之间深度复制文件，或者模块可重用性在这个平台上不是已经完成的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:22:30.083

确保选中“将项目复制到目标组的文件夹（如果需要）”。

如果要将整个项目复制为克隆，则创建快照，然后将快照导出到新目录。否则，浅拷贝也会遇到同样的问题。

# ruby-on-rails - CanCan 错误地拒绝管理员访问

> ID：13379610
> 
> 赞同：3
> 
> 时间：2012-11-14T13:19:48.307
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, cancan

我正在使用其他人的代码，而且我对 Rails 相当缺乏经验，而且我遇到了 CanCan & Devise 的问题。

尝试登录时（使用我知道的凭据，因为它们以前工作过，并且我检查了数据库并成功使用了重置功能）我收到一个错误屏幕说明。

```
CanCan::AccessDenied in AdminController#index

You are not authorized to access this page.

app/controllers/admin_controller.rb:4:in `index'
config/initializers/quiet_assets.rb:6:in `call_with_quiet_assets' 
```

并在终端

```
Started POST "/users/sign_in" for 127.0.0.1 at 2012-11-14 13:13:01 +0000
  Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓",  "authenticity_token"=>"T8CJkCIEA3r7ROiknVp/vbEgeKCBZEjl3uYd+46G7no=", "user"=>{"email"=>"pass@user.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
WARNING: Can't verify CSRF token authenticity
  User Load (0.3ms)  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'pass@user.com' LIMIT 1
(0.2ms)  BEGIN
(0.3ms)  UPDATE `users` SET `last_sign_in_at` = '2012-11-14 11:10:56', `current_sign_in_at` = '2012-11-14 13:13:01', `sign_in_count` = 219, `updated_at` = '2012-11-14 13:13:01' WHERE `users`.`id` = 1
(0.1ms)  COMMIT
Redirected to http://core.lvh.me:3000/admin
Completed 302 Found in 355ms

Started GET "/admin" for 127.0.0.1 at 2012-11-14 13:13:02 +0000
  Processing by AdminController#index as HTML
Completed 500 Internal Server Error in 265ms

CanCan::AccessDenied (You are not authorized to access this page.):
  app/controllers/admin_controller.rb:4:in `index'
  config/initializers/quiet_assets.rb:6:in `call_with_quiet_assets' 
```

admin_controller.rb

```
class AdminController < ApplicationController

  def index
   authorize! :index, :admin (#line 4)
  end 
```

能力.rb

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user (not logged in)

    case user.role_name

    when "super_admin"
      # can do everything
      can :manage, :all

    when "franchise_admin"
      can [:read, :search, :all, :up_down_index], Article
      can [:old_feed, :sites, :new_feed], MobileFeed
      can [:new, :read, :update], SiteSpecificArticle, site_id: user.site_id
      can [:index, :new_site_essentials], :admin

    when "franchise_editor"
      can [:new, :read, :update], SiteSpecificArticle { |ssa| ssa.site.customer.sites.include?(user.site) }
      can [:old_feed, :sites, :new_feed], MobileFeed
      can [:read, :search, :all, :up_down_index], Article

    when "site_admin"
      # can CRUD users for their site
      can :manage, User, site_id: user.site_id
      # can edit content for their site
      can [:read, :update], ArticleSitePermission, site_id: user.site_id
      can [:read, :update], CoreArticleSiteVisibility, site_id: user.site_id
      can [:new, :read, :update], SiteSpecificArticle, site_id: user.site_id
      can [:new, :read, :update], FrontPageCampaign, site_id: user.site_id
      can [:new, :read, :update], FrontPageTimeBasedArticle, site_id: user.site_id
      can [:new, :read, :update], FrontpageArticle, site_id: user.site_id
      can [:index, :new_site_essentials], :admin
      can [:read, :search, :all, :up_down_index, :hidden_in_this_site], Article
      can [:old_feed, :sites, :new_feed], MobileFeed
      can [:index, :create], TrackMood
      can :site_styles, Site

    when "editor"
      # can edit content for their site
      can [:read, :update], ArticleSitePermission, site_id: user.site_id
      can [:read, :update], CoreArticleSiteVisibility, site_id: user.site_id
      can [:new, :read, :update], SiteSpecificArticle, site_id: user.site_id
      can :manage, FrontPageCampaign, site_id: user.site_id
      can :manage, User, site_id: user.site_id
      can [:new, :read, :update], FrontPageTimeBasedArticle, site_id: user.site_id
      can [:new, :read, :update], FrontpageArticle, site_id: user.site_id
      can [:old_feed, :sites, :new_feed], MobileFeed
      can [:index, :new_site_essentials], :admin
      can [:read, :search, :all, :up_down_index, :hidden_in_this_site], Article
      can [:index, :create], TrackMood
      can :site_styles, Site

    else
      # guest user (not logged in)
      can [:read, :search, :up_down_index], Article
      can [:old_feed, :sites, :new_feed], MobileFeed
      can [:index, :create], TrackMood
      can :site_styles, Site
    end
  end
end 
```

对此问题的任何帮助将不胜感激。即使这只是尝试调试问题的另一个步骤。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T03:41:43.187

Github 上的 CanCan wiki 指出：

“添加 authorize_resource 将创建一个调用 authorize! 的前置过滤器，如果存在则传递资源实例变量。如果未设置实例变量（例如在 index 操作中），它将传入类名。例如，如果我们有一个 ProductsController，它将在每个操作之前执行此操作。”

```
authorize!(params[:action], @product || Product) 
```

您的问题是您正在尝试授权 :admin 符号的 :index 操作，而实际上您必须授权管理对象或模型，如下所示：

```
authorize!(:index, @admin) 
```

我想你误解了授权！方法并尝试为角色 :admin 授权索引操作，但所有 CanCan 的东西都是基于 current_ability 授权的，这应该是登录后用户会话上设置的第一件事。CanCan 为你做这件事，使用这个默认的 ApplicationController 方法：

```
def current_ability
    @current_ability ||= Ability.new(current_user)
end 
```

但这意味着您需要有另一个名为 current_user 的方法来返回当前用户 (doh)。检查你是否有这个设置，如果没有，那么设置它并将 :admin 更改为 @admin （你必须实例化，我认为类似于`current_user.admin`(?) ）。

还有一件事：如果您只是为了调试而进行这样的授权，好吧，没问题，但是如果您正在考虑像这样手动授权每个操作，请不要这样做。CanCan 有一个名为 的方法`load_and_authorize_resource`，它既为控制器的每个操作授权 current_user，也将变量@model（例如@products）实例化为：`Product.accessible_by(current_ability)`。当您拥有一些用户只能在某些情况下查看或管理的内容时，这非常有效，例如编辑他们自己的个人资料。当然，您必须在ability.rb 文件中进行设置。这个方法是这样的：

```
class AdminController < ApplicationController

    load_and_authorize_resource

    def index
        # @admins here will have every admin that the user can see
    end

end 
```

如果您有一些不需要授权的操作，您可以说：

```
load_and_authorize_resource, :only => [:action1, :action2]
load_and_authorize_resource, :except => [:action1, :action2] 
```

或者还有：

```
load_and_authorize_resource
skip_authorize_resource, :only => [:action1]
skip_authorize_resource, :except => :action2 #can be both an array or single symbol 
```

我希望这可以帮助你和任何有这个问题的人:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:50:18.940

您可以尝试更改为：

```
class AdminController < ApplicationController

  def index
    authorize! :index, :super_admin (#line 4)
  end 
```

# django - 日期时间 Django。将法语的第一个字母大写

> ID：13379612
> 
> 赞同：0
> 
> 时间：2012-11-14T13:20:00.717
> 
> 标签：django, date, datetime

在我的 django 应用程序中，我在模板中显示了一个 dateTime：

```
 {{object.date}} 
```

我不想用法语显示它。所以在我的设置中，我把

```
 LANGUAGE_CODE = 'fr_FR'
       DATETIME_FORMAT = ('l d F Y - H:i') 
```

一切正常，除了日期的第一个字母没有大写，而它是英文的。

我想我必须直接在django代码中修改它，但我不知道在哪里可以找到它。

任何帮助都会非常受欢迎。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:19:34.333

基于 Leandro 的回答，您可以尝试`{{ object.date|date:"DATETIME_FORMAT"|capfirst }}`先将日期转换为格式，然后再大写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:36:07.070

您可以使该标签自己[大写](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#capfirst)：

```
{{ object.date|capfirst }} 
```

这应该总是大写第一个字母。

# java - 挂起 MDB 中的队列

> ID：13379613
> 
> 赞同：2
> 
> 时间：2012-11-14T13:20:01.547
> 
> 标签：java, jms, weblogic, jboss-mdb

我们有一个正在使用的应用程序`JMS Queue`和一个`MDB`. 我希望一次只能向`MDB`from发送一条消息`Queue`。我的意思是，一旦`MDB`收到来自 的消息`Queue`，它应该暂停`Queue`并且一旦处理完成，`Queue`应该恢复 。我可以为此编写代码吗，`MDB`或者我可以进行任何配置`ejb-jar.xml`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:30:47.147

我不得不对 GlassFish 做一次同样的事情。您可以告诉您的应用程序服务器在每个 MDB 的使用者上创建，然后您的 MDB 将一次处理一条消息。在 glassfish 中做到这一点：

> 打开 GlassFish Server 管理控制台，导航到 Configuration -> configuration-name -> EJB Container 节点，然后选择 MDB Settings 选项卡。

指定：

`Maximum Pool Size:` **1**

玻璃鱼就是这样。重新启动服务器，您就可以开始了。检查[此](http://docs.oracle.com/cd/E18930_01/html/821-2431/abebw.html#abedi)和[此](https://stackoverflow.com/questions/9152654/jms-and-messagedriven-ejb-bean)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:34:17.093

Implement your MDB as:

```
@MessageDriven(name = "SingleThreadedMdb ", activationConfig = {
   @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
   @ActivationConfigProperty(propertyName = "destination", propertyValue = "queue/myQueue"),
   @ActivationConfigProperty(propertyName = "acknowledgeMode", propertyValue = "Auto-acknowledge"),
   @ActivationConfigProperty(propertyName = "maxSession", propertyValue = "1"),
   @ActivationConfigProperty(propertyName = "consumerWindowSize", propertyValue = "0")
})
public class SingleThreadedMdb implements MessageListener {

  @Override
  public void onMessage(Message message) {
  }

} 
```

Configure the queue in `standalone-full.xml` as:

```
<address-setting match="jms.queue.myQueue">
  <dead-letter-address>jms.queue.DLQ</dead-letter-address>
  <expiry-address>jms.queue.ExpiryQueue</expiry-address>
  <redelivery-delay>0</redelivery-delay>
  <max-delivery-attempts>1</max-delivery-attempts>
  <max-size-bytes>10485760</max-size-bytes>
  <address-full-policy>BLOCK</address-full-policy>
  <message-counter-history-day-limit>10</message-counter-history-day-limit>
</address-setting> 
```

Under jms destinations add:

```
<jms-queue name="myQueue">
  <entry name="/queue/myQueue"/>
  <durable>true</durable>
</jms-queue> 
```

# eclipse - 使 Eclipse 密钥适应 Mac osx

> ID：13379615
> 
> 赞同：3
> 
> 时间：2012-11-14T13:20:18.733
> 
> 标签：eclipse, macos, keyboard-shortcuts

我在 OSX 上使用 Eclipse。对于我使用的一些快捷方式`CTRL`和一些`CMD`.

示例：++`CTRL`用于打开类型，但`SHIFT`++用于调用层次结构。`T``CTRL``ALT``H`

有没有快捷键分布较少的 Mac 方案？

# android - ViewPager 使用了错误的条目

> ID：13379616
> 
> 赞同：1
> 
> 时间：2012-11-14T13:20:26.820
> 
> 标签：android, download, android-viewpager

我有以下课程来展示一些图像......我已经实现了将图像下载到 sd 卡的能力。如果我通过它们一切都很好（图像+标题显示）但是如果我从某个图像开始下载，使用另一个 url（另一个图像）所以我以某种方式认为我的 ViewPager 没有正确更新或其他东西。

这是我的课：

```
public class ImagePagerActivity extends BaseActivity {

private ViewPager pager;

LinearLayout buttonBar;
TextView txtTitle;

String urlOfImageToDownload;

public static final int DIALOG_DOWNLOAD_PROGRESS = 0;
private ProgressDialog mProgressDialog;

private static DisplayImageOptions options;

ImageView imageView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.ac_image_pager);
    Bundle bundle = getIntent().getExtras();
    String[] imageUrls = bundle.getStringArray(Extra.IMAGES);
    String[] imageTitles = bundle.getStringArray(Extra.TITLES);
    int pagerPosition = bundle.getInt(Extra.IMAGE_POSITION, 0);

    options = new DisplayImageOptions.Builder()
            .cacheOnDisc().showImageForEmptyUri(R.drawable.no_image)
            .imageScaleType(ImageScaleType.IN_SAMPLE_POWER_OF_2)
            .build();

    pager = (ViewPager) findViewById(R.id.pager);
    pager.setAdapter(new ImagePagerAdapter(imageUrls, imageTitles));
    pager.setCurrentItem(pagerPosition);
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    if (imageView.getDrawable() == null)
        menu.getItem(0).setEnabled(false);
    return true;
}

public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(0, 0, 0,
            getString(R.string.save_image)).setIcon(android.R.drawable.ic_menu_save);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case 0:
            Random randomGenerator = new Random();
            int randomInt = 0;
            for (int idx = 1; idx <= 10; ++idx) {
                randomInt = randomGenerator.nextInt(100000);
            }

            imageView.setDrawingCacheEnabled(true);
            Bitmap b = imageView.getDrawingCache();
            try {
                b.compress(CompressFormat.JPEG, 100,
                        new
                        FileOutputStream(Environment.getExternalStorageDirectory()
                                .getPath() + "/DCIM/image" + randomInt + ".jpg"));
                Crouton.makeText(ImagePagerActivity.this,
                        "Bild erfolgreich gespeichert",
                        Style.INFO)
                        .show();
            } catch (FileNotFoundException e) {
                Crouton.makeText(ImagePagerActivity.this,
                        "Fehler beim speichern von Datei",
                        Style.ALERT)
                        .show();
            }

            startDownload();

            return true;
    }
    return false;
}

private void startDownload() {
    String url = urlOfImageToDownload;
    Log.e(MainActivity.LOG_TAG, "url=" + urlOfImageToDownload);
    new DownloadFileAsync().execute(url);
}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
        case DIALOG_DOWNLOAD_PROGRESS:
            mProgressDialog = new ProgressDialog(this);
            mProgressDialog.setMessage(getString(R.string.downloading_image));
            mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            mProgressDialog.setCancelable(false);
            mProgressDialog.show();
            return mProgressDialog;
        default:
            return null;
    }
}

@Override
protected void onStop() {
    imageLoader.stop();
    super.onStop();
}

private class ImagePagerAdapter extends PagerAdapter {

    private String[] images;
    private String[] titles;
    private LayoutInflater inflater;

    ImagePagerAdapter(String[] images, String[] imageTitles) {
        this.images = images;
        this.titles = imageTitles;
        inflater = getLayoutInflater();
    }

    @Override
    public void destroyItem(View container, int position, Object object) {
        ((ViewPager) container).removeView((View) object);
    }

    @Override
    public void finishUpdate(View container) {
    }

    @Override
    public int getCount() {
        return images.length;
    }

    @Override
    public Object instantiateItem(View view, int position) {
        final FrameLayout imageLayout = (FrameLayout) inflater.inflate(
                R.layout.item_pager_image, null);
        imageView = (ImageView) imageLayout
                .findViewById(R.id.image);
        final ProgressBar spinner = (ProgressBar) imageLayout
                .findViewById(R.id.loading);
        txtTitle = (TextView) imageLayout.findViewById(R.id.txtTitle);

        urlOfImageToDownload = images[position];

        buttonBar = (LinearLayout) imageLayout.findViewById(R.id.buttonBar);

        txtTitle.setText(titles[position]);

        imageLoader.displayImage(images[position], imageView, options,
                new ImageLoadingListener() {
                    @Override
                    public void onLoadingStarted() {
                        spinner.setVisibility(View.VISIBLE);
                    }

                    @Override
                    public void onLoadingFailed(FailReason failReason) {
                        switch (failReason) {
                            case IO_ERROR:
                                break;
                            case OUT_OF_MEMORY:
                                break;
                            case UNKNOWN:
                                break;
                        }

                        spinner.setVisibility(View.GONE);
                        imageView.setImageResource(android.R.drawable.ic_delete);
                    }

                    @Override
                    public void onLoadingComplete(Bitmap bm) {
                        spinner.setVisibility(View.GONE);
                    }

                    @Override
                    public void onLoadingCancelled() {
                        spinner.setVisibility(View.GONE);
                    }
                });

        ((ViewPager) view).addView(imageLayout, 0);
        return imageLayout;
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view.equals(object);
    }

    @Override
    public void restoreState(Parcelable state, ClassLoader loader) {
    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate(View container) {
    }

}

class DownloadFileAsync extends AsyncTask<String, String, String> {

    @SuppressWarnings("deprecation")
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(DIALOG_DOWNLOAD_PROGRESS);
    }

    @Override
    protected String doInBackground(String... aurl) {
        int count;

        try {

            URL url = new URL(aurl[0]);
            URLConnection conexion = url.openConnection();
            conexion.connect();

            int lenghtOfFile = conexion.getContentLength();

            Random rand = new Random();
            int randomNumber = rand.nextInt(100000);

            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream(
                    "sdcard/nature_" + randomNumber + ".jpg");

            byte data[] = new byte[1024];

            long total = 0;

            while ((count = input.read(data)) != -1) {
                total += count;
                publishProgress("" + (int) ((total * 100) / lenghtOfFile));
                output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();
        } catch (Exception e) {
        }
        return null;

    }

    protected void onProgressUpdate(String... progress) {
        mProgressDialog.setProgress(Integer.parseInt(progress[0]));
    }

    @Override
    protected void onPostExecute(String unused) {
        dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
        Crouton.makeText(ImagePagerActivity.this,
                getString(R.string.image_saved),
                Style.CONFIRM)
                .show();
    }
  }
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:37:14.807

问题：

当用户第一次在 ViewPager 中`instantiateItem(..)`查看图像时，该图像将被调用并且该字段`urlOfImagetoDownload`将被设置为正确的`URL`：

```
urlOfImageToDownload = images[position]; 
```

但是，如果用户现在返回到他之前看到的已经实例化的图像，`instantiateItem(...)`则*不会*被调用并且`urlOfImageToDownload`会持有错误`URL`的（前一个图像的）。

解决方案：

您可以使用`ViewPager#getCurrentItem()`检索当前图像的索引，然后 在用户单击下载时使用该索引`images[]`获取正确的图像。`URL`

# rtc - 许可证“IBM 企业平台开发人员”

> ID：13379623
> 
> 赞同：1
> 
> 时间：2012-11-14T13:21:03.053
> 
> 标签：rtc, rational-team-concert

我看到我们安装的 RTC 包含一个名为“IBM Enterprise Platforms 开发人员”的许可证的 60 天试用版。有关许可证的信息是；

> IBM Enterprise Platforms 开发人员许可证专为积极参与该项目的专业开发人员而设计。除了 Developer 许可提供的功能之外，此许可还增加了高级构建，包括依赖管理、构建影响分析、升级支持 (z/OS)、部署支持（z/OS、IBM i、UNIX 和 Linux）和高级上下文意识搜索。它专为面向 System z 和 Power Systems 平台的开发团队而设计。

问题是，如果我们在 IBM 平台上根本不工作，这个许可证是否会增加一些有用的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:57:41.227

尽管最后一句话提到了 IBM 平台，但我们（大型组织）正在使用这些许可证进行 Windows 和 Unix 开发。

有趣的是“具有依赖性管理、构建影响分析、部署支持（z/OS、IBM i、UNIX 和 Linux）和高级上下文感知搜索的高级构建”。

所以是的，您可以在 IBM 平台之外使用这些许可证。

我们也有简单的“开发人员”许可，如“ [Rational 解决方案中的许可用于协作生命周期管理 (CLM) 2012](https://jazz.net/library/article/825/) ”中所述。

# jquery - jQuery .next() 和 .closest() 不起作用

> ID：13379629
> 
> 赞同：0
> 
> 时间：2012-11-14T13:21:21.090
> 
> 标签：jquery

我有这个 HTML 文档，

```
<strong><a href='#' class='showMore'>Show More</a></strong>
<div class='more'>This is it</div> 
```

我想`div.more`在鼠标悬停时显示`a.showMore`。

```
$("a.showMore").hover(function()
{
    $(this).closest('.more').show();

},function()
{

}); 
```

我仍然无法显示更多框。我错过了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:23:06.313

您可以使用以下内容：

```
$("a.showMore").hover(function() {
    $(this).parent().next(".more").toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:34:53.983

您的代码无法正常工作的原因是因为您正在使用最接近（），它正在遍历 DOM，试图获取祖先：[http ://api.jquery.com/closest/](http://api.jquery.com/closest/)

.more 是您的 a 标签的兄弟，因此请改用它：

```
$("a.showMore").hover(function()
{
    $(this).siblings('.more').toggle();
});​ 
```

编辑：您在我发布后编辑了标记，这将与以下标记一起使用：

```
<a href='#' class='showMore'><strong>Show More</strong></a>
<div class='more'>This is it</div> 
```

# java - 嵌套泛型类型中的泛型类型参数

> ID：13379630
> 
> 赞同：4
> 
> 时间：2012-11-14T13:21:21.333
> 
> 标签：java, scala, collections, interface

我已经将此接口编写为框架的一部分。

```
public interface CollectionFactory {

    public <T> Collection<T> newCollection();
} 
```

但我希望实现者能够定义集合的返回类型，这样他们就不必像这样强制转换：

```
public interface CollectionFactory<C extends Collection> {
    public C newCollection();
} 
```

问题是我在 T 上失去了类型安全性。我希望它是

```
public interface CollectionFactory<C extends Collection> {
     public <T> C<T> newCollection();
} 
```

而且我不想像这样提前指定 T ：

```
public interface CollectionFactory<T, C extends Collection<T>> {
    public C newCollection();
} 
```

据我所知，这是不可能的。
**有人想给我一个惊喜吗？**

另外，就像开胃菜一样，有没有人知道类似的东西是否可以用... ***Scala***？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:44:49.240

在 Scala 中，如果您想对两者进行参数化，您可以使用[更高种类的类型](https://stackoverflow.com/questions/6246719/what-is-a-higher-kinded-type-in-scala)：`C``T`

```
// means that C has a single type parameter and C[T] extends Seq[T] whatever T is
// or C[_] <: Seq[_] which means C[T] must extend Seq[Something] but not necessarily Seq[T]
trait SeqFactory[C[T] <: Seq[T]] { 
  def newSeq[T]: C[T]
} 
```

示例实现：

```
object ListFactory extends SeqFactory[List] { 
  def newSeq[T] = List() 
} 
```

您是正确的，这不能在 Java 中完成，但根据目的，@Dylan 或 @CostiCiudatu 的解决方案可能足够好，即使它们的类型安全性较低。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T13:40:36.023

在每个方法调用的基础上，您可以尝试以下操作：

```
public interface CollectionFactory {
    public <T, C extends Collection<T>> C newCollection();
} 
```

# python - Tornado: get_argument -- 我应该自己逃避输入吗？

> ID：13379631
> 
> 赞同：3
> 
> 时间：2012-11-14T13:21:21.737
> 
> 标签：python, database, sql-injection, tornado

我正在为单页应用程序运行 Tornado Web 服务器。客户端正在向服务器发布，我正在使用`tornado.web.RequestHandler.get_argument()`它来获取输入。

测试时，我似乎无法强制执行 SQL 注入错误。看起来好像`get_argument()`以某种方式逃避了输入。从登录表单（用户名+密码）进行 POST 时，我尝试了各种技巧来强制执行简单的 SQL 注入，但无济于事。

编辑2：

哈哈！我最后设法进行了 SQL 注入：DI URL 转义了一些输入，我可以看到注入的 SQL 语句一直到 DB 模块。我从登录表单生成的查询没有被提交，因为它应该是一个 SELECT 语句 - 所以我实际上无法更改数据库。

**如果查询永远不会被提交并且整个查询（包括注入的）的输出被隐藏，会造成什么样的损害？**

例如，如果查询应该是，但是用户名的`SELECT * FROM Users WHERE UserID='USERNAME' AND Password='PASSWORD';`输入有一个 INSERT 注入，所以我们最终得到：`USERNAME``USERNAME'; INSERT INTO Users (UserID, Password) VALUES ('hacker', 'hacked'); --`

`SELECT * FROM Users WHERE UserID='USERNAME'; INSERT INTO Users (UserID, Password) VALUES ('hacker', 'hacked'); --' AND Password='PASSWORD';`

我一般都知道 SQL 注入的危险，我只是对这个细节感到好奇。我也知道我应该散列和加盐密码，上面的代码是为了示例而进行的简化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T23:31:13.643

Tornado 只转义模板中的字符串以避免 HTML 问题。如果你只是在做类似的事情，`print self.get_argument('ihack')`你会得到发送的原始字符串。

您应该使用带有注入预防的 MySQLdb：

```
 cursor.execute("SELECT * FROM user_info WHERE email = %s", email) 
```

而不是：

```
 cursor.execute("SELECT * FROM user_info WHERE email = %s" % email)   # BAD! 
```

这将保护您的 SQL，就像模板保护您的 HTML 一样。

# linux - 如何判断 fanotify 事件指的是哪条路径

> ID：13379632
> 
> 赞同：3
> 
> 时间：2012-11-14T13:21:23.797
> 
> 标签：linux, fanotify

我想知道在我的系统上以什么顺序打开了哪些文件，以便从磁盘中预取它们。似乎[fanotify](http://lwn.net/Articles/339253/)应该非常适合监控整个系统的开放事件。但据我所知，该`fanotify_event_metadata`结构没有包含路径的字段。那么如何判断给定事件指的是哪条路径呢？或者是 fanotify 查找路径名的错误方法，我是否必须使用 inotify 为整个树递归注册手表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:04:29.167

您可以使用`readlink`on `/proc/self/fd/<fdnum>`，其中`fdnum`指的是事件的`fd`成员`struct fanotify_event_metadata`。

# c# - 无法在 MVC 4 中进行本地化

> ID：13379633
> 
> 赞同：0
> 
> 时间：2012-11-14T13:21:33.993
> 
> 标签：c#, asp.net-mvc, localization, asp.net-mvc-4, resourcebundle

我一直在尝试关注在[此处](http://afana.me/post/aspnet-mvc-internationalization-part-2.aspx)找到的博客文章。我添加了一个新程序集来托管我的资源文件（我使用了一个单独的程序集，因为资源可能需要在多个项目之间共享）。我在 web.config 中添加了以下内容：

```
 <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="MyResources.Resources"/>   <!-- New entry for resources -->
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

我已经为测试目的添加了资源字符串到一些文件中。现在我似乎遇到的问题是我无法将资源设置为默认值以外的任何内容。例如，在生成的资源文件设计器中有以下内容：

```
 /// <summary>
    ///   Looks up a localized string similar to Log in was unsuccessful. Please correct the errors and try again..
    /// </summary>
    public static string Account_LoginUnsuccessful {
        get {
            return ResourceManager.GetString("Account_LoginUnsuccessful", resourceCulture);
        }
    } 
```

如果我在此方法中设置断点，`resourceCulture`则除了 null 之外什么都没有。即使我尝试了以下方法：

在 Global.asax.ca 中：

```
 protected void Application_AcquireRequestState(object sender, EventArgs e)
    {
        var culture = new System.Globalization.CultureInfo("fr");

        // Modify current thread's cultures            
        Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;
        Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture(culture.Name);
    } // End of Application_AcquireRequestState 
```

在我所有其他控制器都继承的基本 mvc 控制器中：

```
 protected override void Initialize(System.Web.Routing.RequestContext requestContext)
    {
        SetCulture(requestContext.HttpContext.Request);
        base.Initialize(requestContext);
    }

    protected override void ExecuteCore()
    {
        SetCulture(Request);

        base.ExecuteCore();
    }

    protected override void Execute(System.Web.Routing.RequestContext requestContext)
    {
        SetCulture(requestContext.HttpContext.Request);
        base.Execute(requestContext);
    }

    protected override IAsyncResult BeginExecute(System.Web.Routing.RequestContext requestContext, AsyncCallback callback, object state)
    {
        SetCulture(requestContext.HttpContext.Request);

        metrics = Metrics.BeginTimer();
        return base.BeginExecute(requestContext, callback, state);
    }

    private void SetCulture(HttpRequestBase Request)
    {
        string cultureName = "fr";
        // Validate culture name
        cultureName = CultureHelper.GetImplementedCulture(cultureName); // This is safe

        // Modify current thread's cultures            
        Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(cultureName);
        Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;
    } 
```

现在，据我了解，设置线程当前文化应该会导致我的资源文件文化发生变化。我似乎无法在我的生活中得到这样的工作（因此我尝试在大约十个不同的地方设置文化）。

关于我在这里做错了什么有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:31:37.870

只是为了验证，尝试在 ActionFilterAttribute 中设置语言：

```
public class ChangeLanguageAttribute : ActionFilterAttribute
{

  public override void OnActionExecuting(
     ActionExecutingContext filterContext)
  {
     string languageCode = "fr";

     CultureInfo info =
       CultureInfo.CreateSpecificCulture(languageCode.ToString());

     Thread.CurrentThread.CurrentCulture = info;
     Thread.CurrentThread.CurrentUICulture = info;
  }
} 
```

这是我使用的确切代码，所以我知道这是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T17:22:13.343

这是我想出的代码，它应该在**Application_OnBeginRequest**上：

```
public void Application_OnBeginRequest(object sender, EventArgs e)
        {
            System.Globalization.CultureInfo NC = new System.Globalization.CultureInfo(1036, true);
            NC.NumberFormat.CurrencyDecimalDigits = 2;
            NC.NumberFormat.CurrencySymbol = "euro";
            NC.NumberFormat.CurrencyDecimalSeparator = ".";
            NC.NumberFormat.PercentDecimalSeparator = ".";
            NC.NumberFormat.NumberDecimalSeparator = ".";
            NC.NumberFormat.CurrencyGroupSeparator = "";
            NC.NumberFormat.PercentGroupSeparator = "";
            NC.NumberFormat.NumberGroupSeparator = "";
            System.Threading.Thread.CurrentThread.CurrentCulture = NC;
        } 
```

# c++ - 使用自定义模式进行序列化并使用 Boost 进行随机访问

> ID：13379635
> 
> 赞同：0
> 
> 时间：2012-11-14T13:21:44.123
> 
> 标签：c++, serialization, boost-serialization

我在这里问是因为我已经尝试过搜索，但我不知道这些东西是否存在以及它们的名字是什么。

我开始用自定义模式解释我的意思是：假设我需要序列化 ​​foo、bar 和 boo 类型的对象或数据，通常库会以非常简单的方式为用户处理这个，首先出现在序列化过程，所以如果我首先序列化所有的 foo，它们被写在文件的“顶部”，所有的 bar 和 boo 都在 foo 之后。

现在我想在我的文件中保持顺序并根据自定义模式组织事物，这可以通过 Boost 实现吗？哪个部分提供此功能？

第二件事，与第一件事密切相关，我还想以一种不必解析和读取所有先前值以仅提取我感兴趣的值的方式访问我的序列化二进制文件，有点像基于内存地址工作并提供随机访问而不强迫您解析所有其他地址的 RAM。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:54:38.017

关于第一个问题：Boost 序列化库对于将对象转换为其序列化形式后会发生什么是不可知的。它通过使用输入和输出流来做到这一点。文件就是这样 - fostream/fistream。但是，对于其他类型的流，您所说的顺序/模式没有意义。想象一下，你正在通过网络发送序列化的对象——库不知道它必须重新排列对象的顺序，事实上，一旦它们被发送，它就不能这样做。因此，它不支持您要查找的内容。

您可以做的是创建一个包装器，它要么只是缓存对象的序列化版本并将它们排列在内存中，然后再告诉它将它们写出到文件中，或者知道由于您正在处理文件，它可以`tellg`稍后文件中的适当位置并追加（这种方法需要您存储写入文件的对象的位置）。

至于第二件事——随机存取文件读取。您必须确切地知道对象在内存中的位置。如果您知道文件的结构不会改变，则可以`seekg`在将文件流交给 boost 以进行反序列化之前对其进行处理。但是，如果文件结构发生变化，您仍然需要知道文件中对象的位置。如果您不想解析文件以找到它，则必须在序列化期间将其存储在某处。例如 - 您可以在文件顶部维护一种对象注册表。你仍然需要解析它，但它应该只是一件简单`[Object identifier]-[location in file]`的事情。

# javascript - 如何在 html 画布中运行和显示处理代码（当前位于 document.body 的一部分）？

> ID：13379640
> 
> 赞同：2
> 
> 时间：2012-11-14T13:22:02.943
> 
> 标签：javascript, jquery, processing

注意：我知道我可以导入 .pde 文件，但我需要在屏幕上运行代码，所以我不会使用它。

我的三个以下尝试失败了。我不知道哪一个更接近实现，我不喜欢一个，只要它产生预期的结果。通过帮助我进行任何尝试/建议新尝试来感谢帮助。

第一次尝试） - 使用`getText`下面编写的函数，但是在生成的 jscode 变量中可以找到一些不是代码的文本，因此处理实例不起作用。

```
 function getText(n) { 
      var s = []; 
      function getStrings(n, s) { 
        var m; 
        if (n.nodeType == 3) { // TEXT_NODE 
          s.push(n.data); 
        } 
        else if (n.nodeType == 1) { // ELEMENT_NODE 
          for (m = n.firstChild; null != m; m = m.nextSibling) { 
            getStrings(m, s); 
          } 
        } 
      } 
      getStrings(n, s); 
      var result = s.join(" "); 
      return result; 
    } 
            var processingCode = getText(document.body)
    processingCode.replace(/<[^>]+>¦&[^;]+;/g,'').replace(/ {2,}/g,' ');
    var jsCode = Processing.compile(processingCode).sourceCode;
    alert(jsCode); 
    var canvas =  document.getElementById("mysketch");
    var processingInstance = new Processing(canvas, jsCode);

          ....

<span class="sketch">
    <canvas id="mysketch"></canvas>

</span> 
```

第二次尝试）与上面相同，但添加了一个标签，`id="all_processing_code"`但无论如何都无法弄清楚如何获取文本。这不起作用：

```
 var processingCode = getText(document.getElementbyId(all_processing_code)); 
```

第三次尝试）删除了 getText 并尝试使用 JQuery`text()`来隔离代码。虽然在混合 JS 和 Jquery 时遇到了麻烦。尝试了不同的东西，但没有奏效。什么是适当的混合方式？我应该使用什么脚本类型？这很令人困惑。

```
 <script type="text/jquery">
    var processingCode = $('#all_processing_code').text();
    //processingCode.replace(/<[^>]+>¦&[^;]+;/g,'').replace(/ {2,}/g,' ');
var jsCode = $.Processing.compile(processingCode).sourceCode;
alert(jsCode); 
var canvas =  $(#'mysketch');
var processingInstance = new $.Processing($('canvas'), $('jsCode'));

}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T01:48:13.790

首先，检查您的处理代码是否由带有 id 的 html 元素（如 div 或其他东西）包装。如果不是，请这样做！

举个例子：

```
<div id="mycode">
    void setup() {
        background(0);
    }
</div> 
```

在此之后，检查您的代码中是否声明了 getProcessingSketchId() 函数。在 JavaScript 模式下处理 IDE 已经使用该函数导出 html 文件。如果没有，请在您的`<head>`:

```
<script type="text/javascript">
    // convenience function to get the id attribute of generated sketch html element
    function getProcessingSketchId () { return 'yourcanvasid'; }
</script> 
```

**在使用 JQuery 之前，您可以**在 html 中包含来自 google api 的 JQuery 包括这一行 ：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
    // convenience function to get the id attribute of generated sketch html element
    function getProcessingSketchId () { return 'yourcanvasid'; }
</script> 
```

假设您想在页面刚刚加载时运行处理代码，只需将此代码附加到 getProcessingSketchId() 声明之后。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
    // convenience function to get the id attribute of generated sketch html element
    function getProcessingSketchId () { return 'yourcanvasid'; }
    $(document).ready(function() {
        new Processing(getProcessingSketchId(), $('#mycode').html());
    });
</script> 
```

您可以在任何其他`<script type="text/javascript">`.

最后，你会得到这样的东西：

```
<html>
    <head>
    <!-- Your title, meta tags, stylesheet and all other stuff here -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">
        // convenience function to get the id attribute of generated sketch html element
        function getProcessingSketchId () { return 'yourcanvasid'; }
        $(document).ready(function() {
            new Processing(getProcessingSketchId(), $('#mycode').html());
        });
    </script>
    </head>
        <body>
        <div id="mycode">
            void setup() {
                background(0);
            }
        </div>
   </body>
</html> 
```

# c# - wpf表面2\. 0 ElementMenuItem

> ID：13379643
> 
> 赞同：1
> 
> 时间：2012-11-14T13:22:18.260
> 
> 标签：c#, wpf, visual-studio-2010, xaml, pixelsense

我尝试用 wpf 为表面 2.0/pixelsense 实现一个简单的菜单。

```
<s:SurfaceWindow x:Class="MenuTrial.SurfaceWindow1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:s="http://schemas.microsoft.com/surface/2008" 
xmlns:MenuTrial="clr-namespace:MenuTrial"
xmlns:Properties="clr-namespace:MenuTrial.Properties"
Title="MenuTrial"
>

 <Grid Name="MenuGrid" Height="102" VerticalAlignment="Bottom">
    <s:ScatterView HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <s:ScatterView.Resources>
            <Image x:Shared="false" x:Key="IconPhoto" Source="Resources\Icons\photo.png"/>
            <Image x:Shared="false" x:Key="IconCopy" Source="Resources\Icons\copy.png"/>
        </s:ScatterView.Resources>

        <s:ScatterViewItem Height="139"
                           Width="224"
                           Orientation="-23"
                           Background="#FF787878">
        <s:ElementMenu
            Name="MainMenu"
            ActivationMode="AlwaysActive"
            ActivationHost="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type s:ScatterViewItem}}}"
        >
        <s:ElementMenuItem Header="Menu1"/>
      <s:ElementMenuItem Header="Menu2"/>
             <s:ElementMenuItem Header="{x:Static Resources:Resources.IconPhoto}" Icon="{StaticResource IconPhoto}">
                  <s:ElementMenuItem Header="{x:Static Resources:Resources.Copy}" Icon="{StaticResource IconCopy}" Command="{x:Static MenuTrial:SurfaceWindow1.ShowMessageCommand}" CommandParameter="{Binding Path=Header, RelativeSource={x:Static RelativeSource.Self}}"/>
                  <s:ElementMenuItem Header="Menu 3.2" />
                  <s:ElementMenuItem Header="Menu 3.3"/>
            </s:ElementMenuItem>
    </s:ElementMenu>
        </s:ScatterViewItem>
    </s:ScatterView>
    <TextBlock x:Name="textMessage" Width="500" Margin="40" TextAlignment="Center" HorizontalAlignment="Center" VerticalAlignment="Bottom" FontFamily="Segoe360" FontSize="17" />
</Grid> 
```

问题是，我得到了一个未知的图片错误。键不能为 NULL 或英文。在 Header="{x:Static Resources....

这与 Surface 示例中的完全一样。我只想在单击菜单项时显示一条消息。

谁能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:25:18.700

如果您`MenuItem`在`Resources`section 下定义它，则需要为其提供一个`x:Key`值。没有 Key 就不能声明资源 -

```
<s:ElementMenuItem Header="{x:Static Resources:Resources.IconPhoto}"
                   Icon="{StaticResource IconPhoto}"
                   x:Key="MyMenuItem">
                  ....
</s:ElementMenuItem> 
```

# truecrypt - 如何在 Windows 上构建 TrueCrypt？

> ID：13379644
> 
> 赞同：18
> 
> 时间：2012-11-14T01:15:41.783
> 
> 标签：truecrypt

我正在尝试编译 TrueCrypt。我正在使用来自[https://github.com/syglug/truecrypt](https://github.com/syglug/truecrypt)的说明。

我设置了 3 个环境变量 ( `pkcs`, `ddk`, `MSVC16_ROOT`) 并在 msvc2008 中打开了项目。这不在说明中，但我需要安装 NASM，所以我安装了它并将 NASM 放在 PATH 中。现在，当我构建时，我得到以下信息。即使 IDE 可以选择取消构建，编译器没有执行任何操作并且系统处于空闲状态，它也会结束。

在这一步之后 Crypto.lib 确实存在

```
1>------ Build started: Project: Crypto, Configuration: Release Win32 ------
2>------ Build started: Project: Boot, Configuration: Release Win32 ------
3>------ Build started: Project: Driver, Configuration: Release Win32 ------
2>Performing Makefile project actions
3>Performing Makefile project actions
1>Performing Custom Build Step
3>------ Building truecrypt.sys: Release x86 ------
1>Aes_hw_cpu.asm 
2>Microsoft (R) C/C++ Optimizing Compiler Version 8.00c    
2>Copyright (c) Microsoft Corp 1984-1993\. All rights reserved.
3>The syntax of the command is incorrect.
3>Project : error PRJ0002 : Error result 255 returned from 'C:\Windows\SysWow64\cmd.exe'.
3>Build log was saved at "file://c:\unzipped\tc\Driver\Release\BuildLog.htm"
3>Driver - 1 error(s), 0 warning(s)
1>Performing Custom Build Step
1>Aes_x86.asm 
1>Compiling...
1>Whirlpool.c
1>Twofish.c
1>Sha2.c
1>Sha1.c
1>Serpent.c
1>Rmd160.c
1>Des.c
1>Cast.c
1>Blowfish.c
1>Aestab.c
1>Aeskey.c
1>Generating Code...
1>Creating library...
1>Build log was saved at "file://c:\unzipped\tc\Crypto\Release\BuildLog.htm"
1>Crypto - 0 error(s), 0 warning(s) 
```

它只是挂起。它没有使用任何 CPU，IDE 似乎不知道它失败或停止了。再次运行时，我得到了这个

```
1>------ Build started: Project: Boot, Configuration: Release Win32 ------
2>------ Build started: Project: Driver, Configuration: Release Win32 ------
1>Performing Makefile project actions
2>Performing Makefile project actions
2>------ Building truecrypt.sys: Release x86 ------
1>Microsoft (R) C/C++ Optimizing Compiler Version 8.00c    
1>Copyright (c) Microsoft Corp 1984-1993\. All rights reserved.
2>The syntax of the command is incorrect. 
```

我已经安装了 msvc2012，所以我也试过了。我遇到同样的问题

```
1>------ Build started: Project: Crypto, Configuration: Release Win32 ------
2>------ Build started: Project: Boot, Configuration: Release Win32 ------
3>------ Build started: Project: Driver, Configuration: Release Win32 ------
1>  Performing Custom Build Tools
1>  Aes_hw_cpu.asm 
3>  ------ Building truecrypt.sys: Release x86 ------
2>  Microsoft (R) C/C++ Optimizing Compiler Version 8.00c    
2>  Copyright (c) Microsoft Corp 1984-1993\. All rights reserved.
2>  
3>  The syntax of the command is incorrect.
3>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.MakeFile.Targets(38,5): error MSB3073: The command "echo ------ Building truecrypt.sys: Release x86 ------
3>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.MakeFile.Targets(38,5): error MSB3073: cmd.exe /c BuildDriver.cmd -build -release -x86 "C:\unzipped\tc\\Common" "C:\unzipped\tc\\Crypto" "C:\unzipped\tc\Driver\"
3>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.MakeFile.Targets(38,5): error MSB3073: if errorlevel 1 exit %errorlevel%
3>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.MakeFile.Targets(38,5): error MSB3073: echo.
3>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.MakeFile.Targets(38,5): error MSB3073: echo ------ Building truecrypt.sys: Release x64 ------
3>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.MakeFile.Targets(38,5): error MSB3073: BuildDriver.cmd -build -release -x64 "C:\unzipped\tc\\Common" "C:\unzipped\tc\\Crypto" "C:\unzipped\tc\Driver\"" exited with code 255.
1>  Performing Custom Build Tools
1>  Aes_x86.asm 
1>  Aeskey.c
1>  Aestab.c
1>  Blowfish.c
1>  Cast.c
1>  Des.c
1>  Rmd160.c
1>  Serpent.c
1>  Sha1.c
1>  Sha2.c
1>  Twofish.c
1>  Whirlpool.c
1>  Generating Code...
1>  Crypto.vcxproj -> C:\unzipped\tc\Crypto\Release\Crypto.lib 
```

当我再次取消/构建时，我得到以下信息

```
1>------ Build started: Project: Boot, Configuration: Release Win32 ------
2>------ Build started: Project: Driver, Configuration: Release Win32 ------
2>  ------ Building truecrypt.sys: Release x86 ------
2>  The syntax of the command is incorrect.
2>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.MakeFile.Targets(38,5): error MSB3073: The command "echo ------ Building truecrypt.sys: Release x86 ------
2>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.MakeFile.Targets(38,5): error MSB3073: cmd.exe /c BuildDriver.cmd -build -release -x86 "C:\unzipped\tc\\Common" "C:\unzipped\tc\\Crypto" "C:\unzipped\tc\Driver\"
2>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.MakeFile.Targets(38,5): error MSB3073: if errorlevel 1 exit %errorlevel%
2>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.MakeFile.Targets(38,5): error MSB3073: echo.
2>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.MakeFile.Targets(38,5): error MSB3073: echo ------ Building truecrypt.sys: Release x64 ------
2>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.MakeFile.Targets(38,5): error MSB3073: BuildDriver.cmd -build -release -x64 "C:\unzipped\tc\\Common" "C:\unzipped\tc\\Crypto" "C:\unzipped\tc\Driver\"" exited with code 255.
1>  Microsoft (R) C/C++ Optimizing Compiler Version 8.00c    
1>  Copyright (c) Microsoft Corp 1984-1993\. All rights reserved.
1> 
```

这里有什么问题？如何构建 TrueCrypt？我正在运行 Windows 7 64 位

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-16T09:54:42.413

[我可以从https://github.com/syglug/truecrypt](https://github.com/syglug/truecrypt)成功构建所有项目。我主要遵循[readme.txt](https://github.com/syglug/truecrypt/blob/master/Readme.txt)的说明。因为说明不够详细，所以我在下面描述了我所做的所有步骤。如果您对某些步骤有其他疑问，我将提供其他详细信息。

我使用了安装在 Windows 7 X64 上的 Visual Studio 2008。如果需要，我可以使用 Visual Studio 2010 或 2012 重现相同的内容。

1.  我从 MSDN 下载（我有订阅）Visual C++ 1.52: [en_vc152.exe](https://msdn.microsoft.com/en-us/subscriptions/securedownloads/hh442898#searchTerm=&ProductFamilyId=82&Languages=en&PageSize=10&PageIndex=0&FileId=0)。它是自解压的EXE文件。`MSVC15`为了保持路径大多很短，并且在我直接提取的目录名称中没有空格`C:\`。所以我有例如 16 位 VC 编译器的旧二进制文件`C:\MSVC15\BIN`。
2.  [我将从ftp://ftp.rsasecurity.com/pub/pkcs/pkcs-11/v2-20](ftp://ftp.rsasecurity.com/pub/pkcs/pkcs-11/v2-20)下载的所有文件放在目录中`C:\PKCS-11`。像所有依赖文件一样的`C:\PKCS-11\pkcs11.h`文件将位于同一目录中`C:\PKCS-11`
3.  我从[http://www.nasm.us/pub/nasm/releasebuilds/2.10.05/下载了](http://www.nasm.us/pub/nasm/releasebuilds/2.10.05/)[NASM](http://www.nasm.us/)的当前版本 2.10.05 。我在目录中提取[了 nasm-2.10.05-win32.zip 。](http://www.nasm.us/pub/nasm/releasebuilds/2.10.05/win32/nasm-2.10.05-win32.zip)所以可以在.`C:\nasm-2.10.05``nasm.exe``C:\nasm-2.10.05`
4.  我下载了[适用于 Windows](http://gnuwin32.sourceforge.net/packages/gzip.htm)的Gzip[二进制文件](http://gnuwin32.sourceforge.net/downlinks/gzip-bin-zip.php)。我提取到. 所以包含.`gzip-1.3.12-1-bin.zip``C:\gzip-1.3.12-1-bin``C:\gzip-1.3.12-1-bin\bin``gzip.exe`
5.  我之前已经在目录中安装了 Windows DDK `C:\WinDDK\7600.16385.1`。
6.  我从[https://github.com/syglug/truecrypt](https://github.com/syglug/truecrypt)下载[了 truecrypt-master.zip](https://github.com/syglug/truecrypt/archive/master.zip)。我将它提取到目录中。这样就可以在目录中找到。`C:\truecrypt-master``Crypto.vcproj``C:\truecrypt-master\Crypto`

因为我不喜欢修改全局环境变量，所以我创建了以下批处理文件：

```
SET MSVC16_ROOT=C:\MSVC15
SET PKCS11_INC=C:\PKCS-11
PATH=C:\nasm-2.10.05;C:\gzip-1.3.12-1-bin\bin;%PATH%
"C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\devenv.exe" 
```

在批处理文件的最后一行，将启动 Visual Studio 2008 ( `devenv.exe`)。它继承了 CMD.EXE（启动 Visual Studio 2008 的父进程）中设置的所有环境变量。

[自述](https://github.com/syglug/truecrypt/blob/master/Readme.txt)文件中描述的解决方案文件“TrueCrypt.sln”不包含在[github](https://github.com/syglug/truecrypt)上的源代码中。因此，我打开了在子目录中找到的每个项目文件`C:\truecrypt-master`并对其进行了编译。它是`Crypto.vcproj`（从`C:\truecrypt-master\Crypto`），`Boot.vcproj`（从`C:\truecrypt-master\Boot\Windows`），`Driver.vcproj`（从`C:\truecrypt-master\Driver`），`Format.vcproj`（从`C:\truecrypt-master\Format`）和`Mount.vcproj`（从`C:\truecrypt-master\Mount`）。

我可以成功编译所有项目。唯一的小问题是在构建`Format.vcproj`和`Mount.sln`. 文件`Format.tlb`和`Mount.tlb`存在于*子目录*中。所以我修复了引用 TLB 文件的`C:\truecrypt-master\Format\Format.rc`行`C:\truecrypt-master\Mount\Mount.rc`

```
IDR_FORMAT_TLB          TYPELIB                 ".\\Format\\Format.tlb" 
```

和

```
IDR_MOUNT_TLB           TYPELIB                 ".\\Mount\\Mount.tlb" 
```

稍后我会以 Pull Request 的形式将相应的修复程序发布到[https://github.com/syglug/truecrypt](https://github.com/syglug/truecrypt)。

**更新**：必须在文件中更改`BuildDriver.cmd`该行

```
set TC_BUILD_ARCH=x64 WNET 
```

到

```
set TC_BUILD_ARCH=x64 
```

能够构建驱动程序。

此外，构建行应该使用正确的路径，例如`"$(SolutionDir)..\Crypto"`和`"$(SolutionDir)..\Common"`（请参阅 Visual Studio 中的 nmake 选项）。如果不需要使用它`TrueCrypt.sln`。`C:\TrueCrypt7.1a`

**更新 2**：编译项目后，您将`C:\TrueCrypt7.1a\Release\Setup Files`在文件中或`C:\truecrypt-master\Release\Setup Files`文件中看到

![在此处输入图像描述](../Images/643c35710b8a4f68b0372b27e935b505.png)

该文件`TrueCrypt Setup.exe`仅存在于（从您稍后在评论中发布`C:\TrueCrypt7.1a`的链接[www.truecrypt.org下载）。](http://www.truecrypt.org/downloads2)正如我在评论中提到的，您需要将 Visual Studio 2008 配置为使用 Windows SDK 7 而不是默认的 6.0a 才能成功编译安装项目。

将要编译的驱动程序**未**使用 Microsoft 签名进行数字签名。因此，Windows 7 默认不信任驱动程序。因此，要验证驱动程序是否正常工作，您必须`F8`在计算机启动期间按下并禁用驱动程序签名：

![在此处输入图像描述](../Images/06e38b1dfaea99e3a9040ba974567498.png)

之后，您将能够执行`TrueCrypt.exe`（例如从`C:\TrueCrypt7.1a\Release\Setup Files`目录）。你会收到警告

![在此处输入图像描述](../Images/8a1f104c68305d2e9cb4fbb84ff1b780.png)

但是`TrueCrypt.exe`会起作用，你会看到

![在此处输入图像描述](../Images/b5200404c58e930e56856a14f41d3477.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T08:37:01.307

看起来您已修改 PATH 环境变量，并且某些文件夹路径包含引号 ("") 标记。Windows 不再需要引号以避免与空格混淆。错误 PRJ0002：从“C:\Windows\SysWow64\cmd.exe”返回的错误结果 255”在修复此问题后消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T18:53:59.237

对于陷入此 PKEY_AppUserModel_ID 问题的每个人：它通过在第一个函数（）之前在 Setup.c 中定义以下内容来工作：

```
EXTERN_C const PROPERTYKEY DECLSPEC_SELECTANY PKEY_AppUserModel_ID =
{ { 0x9F4C2855, 0x9F79, 0x4B39,
{ 0xA8, 0xD0, 0xE1, 0xD4, 0x2D, 0xE1, 0xD5, 0xF3, } }, 5 }; 
```

亲切的问候

# php - filetype() 在 Windows 7 上返回符号链接的目录

> ID：13379645
> 
> 赞同：0
> 
> 时间：2012-11-14T13:22:34.957
> 
> 标签：php, windows-7, symlink

无论[filetype()](http://de2.php.net/manual/en/function.filetype.php)文档如何，PHP 5.4.7 在 Windows 7 上的符号链接上都返回“dir”。

在 Windows 7 上检测符号链接的最可靠方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:29:27.430

[is_link()](http://de2.php.net/manual/en/function.is-link.php)在您的情况下返回什么？也许你可以用它来测试链接。

提供的链接 ( [http://php.net/manual/en/function.is-link.php](http://php.net/manual/en/function.is-link.php) ) 在第一条评论中包含了适用于 Windows 的解决方法。这很丑陋，但我想它可以完成工作。

# eclipse - Web 应用程序无法在 Eclipse 中启动

> ID：13379649
> 
> 赞同：2
> 
> 时间：2012-11-14T13:22:54.150
> 
> 标签：eclipse, tomcat7

我基于这个例子创建了一个 webapp：

[http://code4reference.com/2012/09/hello-world-web-application/](http://code4reference.com/2012/09/hello-world-web-application/)

我已使用 eclipse 4.2 将其转换为动态 Web 项目。结构是：

```
MyProject
 -> src
 -> webapp
    -> WEB-INF
      -> appContext
         -> beans.xml
         -> mappings.xml
      -> web.xml 
```

我在 eclipse 中设置服务器时指定了本地安装的 tomcat 7。当我运行服务器（使用上面的网络应用程序）时，我得到：

```
14-11-2012 14:12:08 org.apache.catalina.core.AprLifecycleListener init
...
14-11-2012 14:12:09 org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:MyProject' did not find a matching property.
14-11-2012 14:12:09 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
14-11-2012 14:12:09 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
14-11-2012 14:12:09 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 563 ms
14-11-2012 14:12:09 org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
14-11-2012 14:12:09 org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.32
14-11-2012 14:12:09 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
14-11-2012 14:12:09 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
14-11-2012 14:12:09 org.apache.catalina.startup.Catalina start
INFO: Server startup in 680 ms 
```

然后什么也没有发生。我试图访问这个网址：

```
http://localhost:8080/HelloWorld/hi 
```

但获得 HTTP 状态 404 - /HelloWorld/hi。是否有任何日志可以将我指向出错的方向？

编辑：我也尝试遵循本指南：

[http://www.eclipse.org/webtools/community/tutorials/BuildJ2EEWebApp/BuildJ2EEWebApp.html](http://www.eclipse.org/webtools/community/tutorials/BuildJ2EEWebApp/BuildJ2EEWebApp.html)

但给出相同的结果 - 没有任何反应。我试图在该行中放置一个断点：

```
String userAgent =  req.getHeader("user-agent"); 
```

在：

```
public class SnoopServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        String userAgent =  req.getHeader("user-agent"); 
```

但它永远不会到达那条线。如果我在 Eclipse 中右键单击项目（MyWebApp）并选择“运行方式 -> 在服务器上运行”，则会在 Eclipse 中打开浏览器：

![在此处输入图像描述](../Images/7972bf858679103e285251526db866fa.png)

项目添加到服务器：

![在此处输入图像描述](../Images/3d41aaefe1d0b12c7aa89080eaae7805.png)

并在 Eclipse 中运行：

![在此处输入图像描述](../Images/8710f32aafbdf688939c04b8a6ccd562.png)

这是 com.sample.SnoopServlet 的内容：

```
package com.sample;
import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class SnoopServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        String userAgent =  req.getHeader("user-agent");
        String clientBrowser =  "Not known!";   
        if( userAgent != null)
            clientBrowser = userAgent;
        req.setAttribute("client.browser",clientBrowser );
        req.getRequestDispatcher("/showBrowser.jsp").forward(req,resp);
    }
} 
```

这是 web.xml 的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
    version="2.4">

    <servlet>
        <servlet-name>Snoop Servlet</servlet-name>
        <servlet-class>com.sample.SnoopServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Snoop Servlet</servlet-name>
        <url-pattern>/snoop/*</url-pattern>
    </servlet-mapping>

    <!-- Don't remove the below section -->
    <welcome-file-list>
        <welcome-file></welcome-file>
    </welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:26:53.943

1.  下载 Tomcat 源代码并构建它。
    一个。按照 BUILDING.txt 中的说明进行操作。如果您已经拥有 JDK 和 Ant（您可能已经拥有），那么这将变得快速而简单。
    湾。将 /output/build 目录移动到某处并重命名它，例如。/home/me/apache-tomcat-7.0.29

2.  在 Eclipse 中，窗口->显示视图->服务器

3.  右键单击服务器->新建->服务器

4.  Apache- > Tomcat v7.0 服务器 服务器的主机名：localhost
    b. 服务器名称：随便你（Tomcat 7）
    c．服务器运行环境：Apache Tomcat v7.0
    d. 结束

5.  可选）双击您的新
    服务器 编辑所需的端口

6.  现在在 Eclipse 中，右键单击->新建->动态 Web
    项目 为您的项目命名：NO SPACES OR IT WILL NOT WORK (My_Tomcat_Project)
    b. 目标运行时：Apache Tomcat v7.0
    c。Web 模块：Web 模块 3.0
    d. 配置：Apache Tomcat v7.0 的默认配置
    e. 完成
    f。编写您的网络应用程序

7.  保存项目。

8.  将其部署到 Tomcat 服务器（从 Project Explorer 拖放到服务器视图）

9.  启动服务器

10.  你完成了！
    a) 导航以`localhost:{port}/{Project_Name}/{url_pattern}`查看描述您的新 Web 服务的网页。
    b) 例如。`http://localhost:8080/My_Tomcat_Project/hello`
    c) 从这里您可以访问生成的 WSDL 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T19:56:35.330

我最近遇到了类似的问题，帮助我的一件事是了解应用程序文件部署到哪里以及从哪里部署。我把我的发现放在了[这里](https://stackoverflow.com/questions/2119351/how-does-eclipse-deploy-web-applications-using-wtp/14105487#14105487)。

在我的特殊情况下，我发现我只部署了编译的类文件，但没有部署我的 WEB-INF/* 文件，因此没有 web.xml 文件来启动应用程序。验证所有tomcat服务器配置和部署程序集配置正确后，我想到了：右键单击服务器->“清理”。这将完成清理部署目录并重新发布。

我的工作空间不知何故陷入了“发布”没有发布所有内容并且需要清理它的状态。请注意，“清理”项目不会清理部署目录，也不会让我摆脱糟糕的状态。另请注意，“清理 Tomcat 工作目录”会清理 ./work 目录，也不清理应用程序目录。

# css - 如何格式化单个 html a href 文本以具有多个 css 属性（两个不同的字体系列）

> ID：13379650
> 
> 赞同：0
> 
> 时间：2012-11-14T13:22:55.143
> 
> 标签：css, font-family, graphical-logo

我想在一个 href 上使用两个不同的字体系列创建一个带有 CSS 的徽标

例如

```
<style>
    a#logo{
        "LogoWith" - font-family:sans;
        "TwoFontFamilies" - font-family:Ariel;
    }

</style>

<a id="logo" href="#">LogoWithTwoFontFamilies</a> 
```

我知道我写的 CSS 是错误的。我似乎无法找到在单个字符串上应用两种不同字体系列的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T13:25:57.030

只需在`a`标签中间使用跨度：

```
<style>
   a#logo .oneFont { font-family: sans-serif; }
   a#logo .twoFont { font-family: Arial; }
   a#logo .redFont { color: red; }
   a#logo .blueFont { color: blue; }
</style>

<a id="logo" href="#">
    <span class="oneFont">LogoWith</span>
    <span class="twoFont">TwoFontFamilies</span>
    <span class="redFont">AsManyAsYou</span>
    <span class="blueFont">WantToUse</span>
</a> 
```

# php - 一键提交多个表单，用于 php 和 javascript

> ID：13379663
> 
> 赞同：1
> 
> 时间：2012-11-14T13:23:47.367
> 
> 标签：php, javascript, forms, post

是否可以一键提交两份表格？一个表单的值由 JavaScript 生成，另一个表单由 PHP 生成。

我举了一个例子来说明我正在尝试什么。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>

<?php
Class testing{

    function text_test(){
        ?>
        <form method="post" name="postform">
        <input type="textbox" name="text"/>
        <input type="submit" onclick ="submit_form()" name="submit"/>
        </form>
        <?php
    }

    function display(){
        echo $_POST['text'];
        echo $_POST['js_input'];
     }
 }
$test = new testing();
$test->text_test();

if(isset($_POST['js_form'])){
    $test->display();
}
?>

<script type="text/javascript">
    var jsvariable = "js_test";
</script>

<form method="post" name="js_form">
<input type="hidden" name="js_input"    value="document.getElementByName(jsvariable).value" />
</form>

<script type="text/javascript">
function submit_form(){
    $('postform').each(function () {
            $(this).ajaxForm();  //Initialize as ajaxForm
            var options = {
               context: this
            }                 
            $(this).ajaxSubmit(options); //Submit form with options above
    });
    $('js_form').each(function () {
        $(this).ajaxForm();  //Initialize as ajaxForm
        var options = {
           context: this
        }                 
        $(this).ajaxSubmit(options); //Submit form with options above
     });
 }
 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:44:02.307

我认为不可能进行两次连续的 submit() 调用，因为调用 submit() 意味着您正在发出 HTTP 请求（GET、POST 等）并且服务器会将您的页面转发到其他地方。这意味着永远不会到达第二个 submit() 。

发送阻塞异步 POST/GET 调用，然后调用 submit() 甚至第二个 POST/GET 可能会更好。

**编辑1**

请参阅此线程，了解如何[在 php 中进行异步 GET 请求](https://stackoverflow.com/questions/962915/how-do-i-make-an-asynchronous-get-request-in-php)。下一篇引自此来源

file_get_contents 会做你想做的事

```
$output = file_get_contents('http://www.example.com/');
echo $output; 
```

编辑：一种触发 GET 请求并立即返回的方法。

引自[http://petewarden.typepad.com/searchbrowser/2008/06/how-to-post-an.html](http://petewarden.typepad.com/searchbrowser/2008/06/how-to-post-an.html)

```
function curl_post_async($url, $params)
{
    foreach ($params as $key => &$val) {
      if (is_array($val)) $val = implode(',', $val);
        $post_params[] = $key.'='.urlencode($val);
    }
    $post_string = implode('&', $post_params);

    $parts=parse_url($url);

    $fp = fsockopen($parts['host'],
        isset($parts['port'])?$parts['port']:80,
        $errno, $errstr, 30);

    $out = "POST ".$parts['path']." HTTP/1.1\r\n";
    $out.= "Host: ".$parts['host']."\r\n";
    $out.= "Content-Type: application/x-www-form-urlencoded\r\n";
    $out.= "Content-Length: ".strlen($post_string)."\r\n";
    $out.= "Connection: Close\r\n\r\n";
    if (isset($post_string)) $out.= $post_string;

    fwrite($fp, $out);
    fclose($fp);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:51:18.043

您可以通过 Ajax 单独提交它们。这是一个使用 jQuery 和[Form Plugin](http://www.malsup.com/jquery/form/)的示例。应该让你开始。

```
 $('form').each(function () {
            $(this).ajaxForm();  //Initialize as ajaxForm
            var options = {
               success: succesCallback,
               error: errorCallback,
               context: this
            }                 
            $(this).ajaxSubmit(options); //Submit form with options above
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T14:55:09.373

查看您的代码，您正在尝试提交表单并随后提交辅助表单...

```
if(isset($_POST['submit'])) {
    ?>
    <script type="text/javascript">
        document.js_form.submit();
    </script>
    <?php 
```

如果您的第二个表单数据不依赖于提交的第一个表单，您可以简单地将表单元素附加到 php 表单 - 见下文

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript">

    var jsvariable = "js_test";

    $(document).ready(function(){
      //append form elements here...
      $('#form').append('<input type="hidden" name="js_input" value="'+jsvariable+'" />');
    });

</script>

<?php
Class testing{

    function text_test(){
        ?>
        <form method="post" name="postform" id="form">
        <input type="textbox" name="text"/>
        <input type="submit" name="submit"/>
        </form>
        <?php
    }

    function display(){
        echo $_POST['text'] . '<br>';
        echo $_POST['js_input'];
    }
}

$test = new testing();
$test->text_test();

if(isset($_POST['submit'])) {
    $test->display();
}

?> 
```

# jquery - Rails 动作缓存和 MimeType

> ID：13379666
> 
> 赞同：0
> 
> 时间：2012-11-14T13:24:00.013
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

有没有办法将动作缓存与设置 Mime Type 标头的请求一起使用？

目前，rails 似乎将缓存存储为作为 url 路径的键，但不处理 Mime 类型标头。

# c# - linq to sql 可空日期问题

> ID：13379670
> 
> 赞同：0
> 
> 时间：2012-11-14T13:24:05.620
> 
> 标签：c#, .net, date, linq-to-sql

```
int ddlshopID = ddlSupervisorShop.SelectedItem == null ? 0 : ddlSupervisorShop.SelectedValue.ToInt32();
DateTime today = DateTime.Now;
List<int> supervisorShopList = shops.Select(a => a.ShopID).ToList<int>();
totalSales = (from ds in db.DailySales
              join p in db.Products on ds.ProductID equals p.ProductID
              where ds.IsActive == true && 
                    p.IsActive == true && 
                    ds.SaleDate.Value.Month == today.Month && 
                    ds.SaleDate.Value.Year == today.Year &&
                    ddlshopID == 0 ? supervisorShopList.Contains(ds.ShopID) : ds.ShopID == ddlshopID
              group ds by new
              {
                  p.ProductCategoryID,
                  p.IsActive,
              }
              into g
              select new TotalPriceDivision
              {
                  TotalPrice = g.Sum(a => a.Quantity * a.PerPrice),
                  DivisionID = g.Key.ProductCategoryID
              }).ToList<TotalPriceDivision>(); 
```

在这段代码中，行

```
ds.SaleDate.Value.Month == today.Month && ds.SaleDate.Value.Year == today.Year 
```

不影响查询结果。`ds.SaleDate`是数据库中可为空的日期值（不是日期时间）。是不是因为这个？如果是，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:34:44.237

```
where ds.IsActive && // don't compare boolean with true
      p.IsActive &&
      ds.SaleDate.HasValue && // add this condition
      ds.SaleDate.Value.Month == today.Month && 
      ds.SaleDate.Value.Year == today.Year &&
      ddlshopID == 0 ? supervisorShopList.Contains(ds.ShopID) : ds.ShopID == ddlshopID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:01:18.283

我发现这有什么问题。

出人意料地、难以置信地和愚蠢地

如果我将我的查询订购为

```
where ds.IsActive == true
&& p.IsActive == true
&& ds.SaleDate.Value.Month == today.Month
&& ds.SaleDate.Value.Year == today.Year
&& ddlshopID == 0 ? supervisorShopList.Contains(ds.ShopID) : ds.ShopID == ddlshopID 
```

日期条件不影响查询结果并且返回错误。

如果我将其订购为

```
where ds.IsActive == true
&& p.IsActive == true
&& ddlshopID == 0 ? supervisorShopList.Contains(ds.ShopID) : ds.ShopID == ddlshopID
&& ds.SaleDate.Value.Month == today.Month
&& ds.SaleDate.Value.Year == today.Year 
```

它按我的预期工作

我仍然无法相信这怎么可能。如果您认为一定有其他原因，请向我解释。

# javascript - extjs panelgrid 替代方案

> ID：13379676
> 
> 赞同：1
> 
> 时间：2012-11-14T13:24:29.597
> 
> 标签：javascript, extjs, extjs4, accordion

浏览 ExtJS 文档时，我迷失在名称中，找不到我需要的组件。我想显示这样的对象的属性：

> 姓名：姓名
> 
> 地址：地址

对于 JSF，我会使用带有 outputText 标签的 panelgrid。有没有这样的组件？还有别的：我想让这个面板像手风琴或类似的东西一样“可关闭”，这样用户可以在不需要时隐藏信息，但我不能让手风琴面板的大小适应内容。当我在 primefaces 中使用手风琴面板时，如果内容发生变化，面板会调整大小。有什么办法可以用 ExtJS 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:37:11.837

好吧，这个怎么样：

```
Ext.create('Ext.data.Store', {
    storeId:'simpsonsStore',
    fields:['name', 'email', 'phone'],
    data:{'items':[
        { 'name': 'Lisa',  "email":"lisa@simpsons.com",  "phone":"555-111-1224"  },
        { 'name': 'Bart',  "email":"bart@simpsons.com",  "phone":"555-222-1234" },
        { 'name': 'Homer', "email":"home@simpsons.com",  "phone":"555-222-1244"  },
        { 'name': 'Marge', "email":"marge@simpsons.com", "phone":"555-222-1254"  }
    ]},
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
});

Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    collapsible: true,
    store: Ext.data.StoreManager.lookup('simpsonsStore'),
    columns: [
        { text: 'Name',  dataIndex: 'name' },
        { text: 'Email', dataIndex: 'email', flex: 1 },
        { text: 'Phone', dataIndex: 'phone' }
    ],
    height: 200,
    width: 400,
    renderTo: Ext.getBody()
}); 
```

# ssl - ldap_mod_add() 修改：服务器不愿意在

> ID：13379680
> 
> 赞同：1
> 
> 时间：2012-11-14T13:24:43.840
> 
> 标签：ssl, active-directory, ldap

想在 Centos 上使用带有 SSL 的 ldap_mod_add 命令，但收到以下错误消息；

```
PHP Warning: ldap_mod_add (): Modify: Server is unwilling to perform in ... 
```

但是 SSL ldapsearch 命令运行良好；

```
ldapsearch -x -H ldaps://winsvr.intra -b dc=windows, dc=intra -D "DOMAIN\user"-w "123456" 
```

所需的**Windows.pem**文件位于**/etc/ssl/certs/windows.pem目录中，并且在****/etc/openldap/ldap.conf**中有相应的行。

确实得到了上述错误消息。

我还应该配置什么才能正常工作？

**更新：**

一切都好。问题是我不认识现有的 AD 用户。这就是 ldap_mod_add 返回上述错误消息的原因（它无法通过 ldap_mod_add 添加相同的 AD 用户）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:56:14.617

您的 PHP 示例中的 LDAP 客户端显然正在执行更新，而该`ldapsearch`工具正在执行搜索，而不是在它上面指出一个点。服务器的配置、所涉及的目标条目的性质以及所涉及的任何访问控制都可能会影响更新，但不会影响搜索。

# node.js - 在单元测试中测试从服务器提供的 URL

> ID：13379681
> 
> 赞同：0
> 
> 时间：2012-11-14T13:24:44.570
> 
> 标签：node.js, mocha.js, supertest

我正在使用 Mocha 和 supertest 在我的 NodeJS 服务器中进行一些简单的测试。我现在想测试这种情况：

1.  在超集中使用我的应用程序我提出请求
2.  响应中包含一个 URL
3.  我现在需要测试这个 URL 是否正确（通过 HTTP）

该 URL 将与在超集中运行的服务器相同。因此，如果我第一次调用`.get('/some-data')`生成的 URL 将是完全限定的，例如`http://localhost:3456/a-path`.

我不清楚如何设置它，或者是否可以使用这些工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:58:39.080

Yout 可能只需要[请求](https://github.com/mikeal/request)之类的东西，然后他们发出 http-request 并检查状态码是否为 200 等。

# android - 如何获取我在 android 的邮件客户端中配置的电子邮件 ID？

> ID：13379692
> 
> 赞同：0
> 
> 时间：2012-11-14T13:25:39.457
> 
> 标签：android, email, email-client

我有一个页面，用户可以在其中看到邮件。在该页面中，我将菜单选项提供为“回复”，“回复全部”。当用户单击回复/回复全部时，我正在启动选择器对话框（用户可以在其中选择他使用的内置应用程序可以在回复时使用。现在当他选择任何应用程序时，现在我想获取我在该应用程序中配置的电子邮件 ID。

我们怎么能得到？任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:36:54.040

```
<uses-permission android:name="android.permission.GET_ACCOUNTS" />

Pattern emailPattern = Patterns.EMAIL_ADDRESS; 
Account[] accounts = AccountManager.get(context).getAccounts();
for (Account account : accounts) {
    if (emailPattern.matcher(account.name).matches()) {
        String possibleEmail = account.name;
    }
} 
```

# python - Python/C API 中的内存泄漏和引用计数

> ID：13379696
> 
> 赞同：1
> 
> 时间：2012-11-14T13:26:02.883
> 
> 标签：python, memory-leaks, python-module, python-c-api, reference-counting

我对 Python 及其 C API 很陌生。我仍然不明白引用计数是如何工作的。我编写了一个粒子跟踪模块，它向 python 公开了我过去编写和测试过的许多 C++ 线程跟踪函数。（据我所知，他们自己没有内存泄漏）。

当我在 Python 中反复调用其中一个函数时，我可以看到内存使用量增长缓慢。我相信某处存在内存泄漏（可能无处不在：O）我在主跟踪功能的相关片段下方复制，以便有人可以指出我是否应该调用 Py_DECREFs（例如在 item_py 上？）

```
PyObject* _track_particles() {

        // more code here ... (no Python/C API  calls) 

        PyObject* result_py = PyTuple_New(particles.size());
        for(int i=0; i<particles.size(); ++i) {
            PyObject* item_py = PyTuple_New(2);
            if (lost_at_turn_idx[i] == PARTICLE_NOT_LOST) {
                int offset = i * (nr_turns+1) * 6 + nr_turns * 6;
                PyTuple_SetItem(item_py, 0, Py_True);
                PyTuple_SetItem(item_py, 1, Py_BuildValue("(dddddd)", 
                            data_out[offset + rx], data_out[offset + px],   
                            data_out[offset + ry], data_out[offset + py],
                            data_out[offset + de], data_out[offset + dl]));
            } else {
                PyTuple_SetItem(item_py, 0, Py_False);
                PyTuple_SetItem(item_py, 1, 
                        Py_BuildValue("(ii)", lost_at_turn_idx[i], 
                                              lost_at_element_idx[i]));
            }
            PyTuple_SetItem(result_py, i, item_py);
        }       
        return result_py;
    } 
```

ps：发现[这个参考](http://edcjones.tripod.com/refcount.html)有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:32:21.553

这相关吗[？](http://docs.python.org/2/faq/extending.html#how-do-i-use-py-buildvalue-to-create-a-tuple-of-arbitrary-length)

> 改为使用`t = PyTuple_New(n)`，并用对象填充它`PyTuple_SetItem(t, i, o)`- 请注意，这会“吃掉” 的引用计数`o`，所以你必须这样`Py_INCREF()`做。

我不完全确定这段话是否清楚，但这可能是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-16T05:55:28.827

**编辑**：非常感谢@DavidW 向我指出这一点（见评论）。你[肯定需要`Py_INCREF` `Py_True`and`Py_False`](https://docs.python.org/3/c-api/bool.html)。当你做你不应该做的事情时，C 会做一些奇怪的事情，但很难说这是否会导致你的记忆问题。

晚了几年，但老实说，你的代码看起来~~不错~~。`result_py`正在被返回，因此只需要`Py_DECREF`由调用者`_track_particles`（我假设`_track_particles`在你的 C++ 代码中有一个调用者，因为在它的签名`PyObject *self`中定义了），而引用被. 您的其他新参考资料被盗，所以这也不是问题。有趣的是，您给出了一个不需要单个的代码片段。`PyObject *args``item_py``PyTuple_SetItem``PyTuple_SetItem``Py_DECREF`

你如何检查你的内存泄漏？我知道这很旧，但是 Python 3 带有[tracemalloc](https://docs.python.org/3/library/tracemalloc.html)，所以你可以用它包装一个函数调用来检查。

# c# - 单选按钮事件执行两次

> ID：13379699
> 
> 赞同：1
> 
> 时间：2012-11-14T13:26:07.403
> 
> 标签：c#, winforms

在我的项目中，有两个单选按钮。我`CheckedChanged`通过这样做给了同样的事件
：

```
DoctorRadioButton.CheckedChanged += new EventHandler(RadioButton_CheckedChanged);
PatientRadioButton.CheckedChanged += new EventHandler(RadioButton_CheckedChanged); 
```

我将两个 RadioButtons 都保留在 a`Panel`中，以使它们为真，而另一个为假。
现在的问题是我在`RadioButton_CheckedChanged`事件中实现了一个非常大的代码。
每当用户更改两个 RadioButtons 中的任何一个的状态时，该事件都会引发两次。
经过这么多小时我得到了答案，事件被引发了两次，因为两个 RadioButton 状态都被改变了（因此，事件将被引发两次）。为了解决这个问题，我试图暂时解除事件，如下所示：

**RadioButton_CheckedChanged**事件：（*不工作*）

```
 if (DoctorRadioButton.Checked)
     {
         PatientRadioButton.CheckedChanged -= RadioButton_CheckedChanged; //Un
         //
         //My functions       
         //
         PatientRadioButton.CheckedChanged += new EventHandler(RadioButton_CheckedChanged);
     }
     else
     {
         DoctorRadioButton.CheckedChanged -= RadioButton_CheckedChanged;
         //
         //My functions         
         //
         DoctorRadioButton.CheckedChanged += new EventHandler(RadioButton_CheckedChanged);
     } 
```

即使事件执行了两次。我知道我在 Hooking 和 Unhooking 中做错了什么。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:49:57.860

您可以检查发件人 RadioButton 并相应地放置您的代码，如下所示 -

```
 void RadioButton_CheckedChanged(object sender, EventArgs e)
    {
        RadioButton senderRadioButton = sender as RadioButton;
        if (senderRadioButton.Equals(DoctorRadioButton))
        // OR senderRadioButton.Name == "DoctorRadioButton"
        {
            // Place your code here for DoctorRadioButton.
        }
        else
        {
            // Place your code here for PatientRadioButton.
        }
    } 
```

**更新**

如果您不能对两个单选按钮使用两个不同的处理程序，并且只想在选中复选框的情况下执行代码，您可以这样做 -

```
 void RadioButton_CheckedChanged(object sender, EventArgs e)
    {
        RadioButton senderRadioButton = sender as RadioButton;
        if (senderRadioButton.IsChecked)
        {
            // Place your code here for check event.
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:32:13.690

对于一个非常简单（尽管很粗略）的解决方案是*不*挂接两个单选按钮，而仅将其中一个挂接到处理程序：由于选中一个单选会取消选中另一个单选按钮，因此它将按预期工作。

更复杂的方法是使用支持属性，如下所示：

```
class myForm
{
    private bool radioStatus = false; // depends on the default status of the radios
    private bool RadioStatus 
    {
        get{return radioStatus;} set {radioStatus = value; Checked_Changed();}
    }

    public myForm()
    {
    // Lambdas as handlers to keep code short.
    DoctorRadioButton.CheckedChanged += (s,args)=> 
        { if((s as RadioButton).Checked) RadioStatus = true; };
    PatientRadioButton.CheckedChanged += (s,args)=> 
        { if((s as RadioButton).Checked) RadioStatus = false; };
    }

    void Checked_Changed()
    {
        if (RadioStatus) // = true --> DoctorRadioButton was checked
        {
            //code
        }
        else // = false --> PatientRadioButton was checked
        {
            //other code
        }
    }
} 
```

这种方法的优点是允许您从 UI 中抽象一点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T13:33:22.430

Put both radio buttons in the same panel or groupbox and automatically they will be grouped so that only one can be selected at a time.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-09T04:53:06.090

这是一个较晚的解决方案，但我发现您的问题没有正确答案，所以我发布它可能对您有用

*为单选按钮创建单击事件，并简单地放置您的代码，因为每次单击您的单选按钮都会被选中并且您的代码会执行*:):):)

```
private void DoctorRadioButtons_Click(object sender, EventArgs e)
        {
           //Your code on Doctor Radio Button
        }

private void PatientRadioButton_Click(object sender, EventArgs e)
        {
           // Your code on Patient Radio Button
        } 
```

# java - kSOAP2 中没有类型信息

> ID：13379702
> 
> 赞同：0
> 
> 时间：2012-11-14T13:26:26.923
> 
> 标签：java, android, web-services, soap, ksoap2

我正在尝试从`Android`. `kSOAP`（我已经尝试过`2.4`并且现在正在使用`3.0.0 RC5`）似乎是一个好方法。我可以很好地访问该服务

```
SoapObject soapRequest = new SoapObject(NAMESPACE, METHOD_NAME);
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.setOutputSoapObject(soapRequest);
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
androidHttpTransport.debug=true;
androidHttpTransport.call(SOAP_ACTION, envelope);
Log.d("soap", androidHttpTransport.responseDump); 
```

但没有类型信息。

这尤其糟糕，因为返回类型是一个类型的数组，该类型具有多个子类型，并且响应中只有超类型的属性，无论数组中的项目是哪种类型。

如何获得正确输入的响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:57:27.253

对于一组对象响应，您可以[在此处查看](http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks#sending/receiving_array_of_complex_types_or_primitives)，您需要的几乎所有东西都在那里。[这个答案](http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks#sending/receiving_array_of_complex_types_or_primitives)是一种从响应中解析复杂对象的方法，经过测试
。 希望这有帮助。

# php - PHP在值之间拆分数组

> ID：13379703
> 
> 赞同：0
> 
> 时间：2012-11-14T13:26:28.137
> 
> 标签：php, arrays, foreach, slice

我有一个数组，其数据设置如下

```
[0] =>"npage:new",
[1] =>"data:data",
[2] =>"data:data",
[3] =>"npage:new",
[4] =>"data:data",
[5] =>"data:data",
[6] =>"data:data",
[7] =>"npage:new",
[8] =>"data:data",
[9] =>"data:data", 
```

我试图重新排列数组，以便在每个“npage:new”它为它和下一个“npage:new”之间的数据创建另一个索引。直到最后一组没有“npage:new”但仍需要索引。例子：

```
[0] =>    
     "data:data",
     "data:data",
[1] =>
     "data:data",
     "data:data",
     "data:data",
[2] =>
     "data:data",
     "data:data", 
```

我有以下内容，但它返回一个空白数组&我认为我把事情复杂化了。

```
 $source[] = the array
    $destination =  array();
$startval = "new";
$found = 0;
$starindex = 0;

foreach ($source as $index => $value){
if ($value === $startval) {
$found = $value;
$startindex = $index;
} 
    elseif ( $value === $found) {
$destination[] = array_slice($source, $startindex, $index - $startindex + 1);
$found = 0;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:32:46.530

自从我不写php以来已经很长时间了，但尝试这样的事情：

```
$source[] = the array
$destination =  array();
$startval = "new";
$ix = -1;

foreach ($source as $index => $value) {
    if ($value === $startval) {
        $ix++;
        $dest[$ix] = array();
    } 
    else {
        array_push($dest[$ix], $index.":".$value;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:38:57.030

见：[http ://codepad.org/QCWTahnq](http://codepad.org/QCWTAhnq)

```
<?php
$source = array("npage:new", "data:data", "data:data", "npage:new", "data:data", "data:data", "data:data", "data:data", "npage:new", "data:data", "npage:new", "data:data", "data:data");
$final =  array();
$newpage = "npage:new";

$temp = array();

foreach ($source as $index => $value) {
    if ($value == $newpage) {
        if(!empty($temp)) {
            $final[] = $temp;
            $temp = array();
        }
    } 
    else {
        $temp[] = $value;
    }
}

if(!empty($temp))
   $final[] = $temp;

print_r($final);
?> 
```

# javascript - 如何使用 ExtJs Grid 控件获取 auto_complete 组合框结果？

> ID：13379704
> 
> 赞同：0
> 
> 时间：2012-11-14T13:26:31.217
> 
> 标签：javascript, extjs

我正在使用 ExtJs 组合框自动完成功能，我想在 ExtJs Grid 中获取搜索结果。我在 Sencha 网站上阅读了 ExtJs 组合文档，发现 tpl 属性可用于为搜索结果制作自定义模板，但它不接受 ExtJs 网格控件。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:42:11.653

你不能开箱即用。tpl 属性允许您使用 XTemplate 创建您想要的任何 HTML 结构（包括表格），但不能创建另一个 Ext 组件。

# list - 如何在 java-me 中使用菜单将列表添加到屏幕

> ID：13379711
> 
> 赞同：1
> 
> 时间：2012-11-14T13:27:13.897
> 
> 标签：list, java-me, midp, lcdui

我对 java-me 列表有疑问。我可以创建一个列表并将其添加到屏幕，但我无法在屏幕底部添加任何菜单，例如“返回”。

我使用了这段代码：

```
String[] degerler = {"StringItem", "TextField", "DateField","ImageItem", "Gauge", "ChoiceGroup","List", "Alert", "Sounds"};

favlistelement = new List("Reservation type", List.IMPLICIT,degerler, null); 
```

我使用以下代码将其添加到屏幕：

```
disp.setCurrent(favlistelement ); 
```

事实上，我有一个名为的表单变量，`favoritesscreen,`我想将列表添加到此屏幕，并带有“返回”之类的菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:39:14.660

我以这种方式解决了我的问题

```
 backfavorites = new Command("Back",Command.BACK,0);

    favlistelement = new List("Favorites:", List.IMPLICIT);
    favlistelement.append("Incoming 1", null);
    favlistelement.append("Incoming 2", null);    
    favlistelement.append("Incoming 3", null);

    favlistelement.addCommand(backfavorites);
    favlistelement.setCommandListener(this); 
```

我试图将侦听器、命令添加到我的表单变量中，但我尝试将这些添加到我的列表元素变量中，因此它得到了解决。

在屏幕中显示：

```
disp.setCurrent(favlistelement); 
```

# menu - 另一种语言的菜单项的不同链接

> ID：13379713
> 
> 赞同：1
> 
> 时间：2012-11-14T13:27:17.890
> 
> 标签：menu, joomla1.5, multilingual

我在 Joomla 1.5 站点中有一个菜单项，当它是希腊语（默认语言）时需要一个特定链接，而当它是英语时需要另一个链接。

我已经看到[了这个问题](https://stackoverflow.com/questions/10681962/how-to-hide-a-menu-item-for-a-certain-language-in-joomla)，它可能给了我一个提示，但我需要更详细的帮助。我什至不知道我需要在哪些文件中插入代码。如何找出语言 ID 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:38:37.197

为什么让它复杂化，我知道在 3.0 中，我想至少回到菜单项中的 1.5，您可以选择链接显示的语言。因此，您有两个链接项目，一个显示给英语观众，一个显示给希腊语观众。

Ps 为什么你还在用 1.5，现在官方不支持了，我强烈建议你升级到至少 2.5 [Joomla 1.5 结束生命](http://docs.joomla.org/Upgrading_and_Migrating_Joomla)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:11:32.530

我不知道您是否在您的网站上使用 SEF...但是将 JoomFish 用于多语言很容易为不同语言的同一菜单项创建不同的链接。只需为您需要的菜单项进行翻译并为此输入不同的别名。例如，您有一个链接`www.mysite.com/gk/contacts`。当您翻译`Contacts`英文菜单项并输入别名`conatact-us`时，您将获得如下链接：`mysite.com/en/contact-us`。我希望它对你有帮助。

# javascript - 有没有办法从在浏览器外运行的程 序触发 DOM 事件？

> ID：13379716
> 
> 赞同：1
> 
> 时间：2012-11-14T13:27:52.890
> 
> 标签：javascript, events, dom, browser, simulation

我有自己的网络应用程序在浏览器中运行。我想从在浏览器外运行的程​​序触发 DOM 事件。设置这种交互的最佳方式是什么？我最好的选择是将击键发送到浏览器并在我的网络应用程序中处理这些？

我更喜欢通用的解决方案，但如果某些浏览器（例如 Chrome）对此有特定的功能，我也有兴趣找出答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:36:37.330

1.  要模拟来自 javascript 的事件，[请使用 Event.simulate 库](https://stackoverflow.com/questions/2524697/javascript-event-simulation-library)。
2.  要从浏览器外部触发模拟，通常让您的 javascript[使用 AJAX 或 COMET 轮询/由您的外部应用程序通知](https://stackoverflow.com/questions/7445928/call-javascript-function-from-outside-the-browser)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:45:15.220

尝试将按键从应用程序发送到浏览器时，您会遇到大量麻烦、跨浏览器问题和安全问题。我不建议尝试。

您最好的选择是使用 AJAX 轮询之类的东西，或者更好（如果可能的话）使用套接字并设置您的两个应用程序以通过某种类型的服务层/API 相互通信。

查看 socket.io 以获得在 Web 应用程序端执行此操作的好方法，其他应用程序的设置将取决于它所使用的语言。

# c# - 控制台窗口颜色、KeyUp、KeyDown 和 KeyPress 事件

> ID：13379717
> 
> 赞同：1
> 
> 时间：2012-11-14T13:27:58.887
> 
> 标签：c#, colors, console-application, keypress

1）如何更改背景颜色，使其看起来像这样？

![截屏](../Images/9503871a965e8ea17895bc160943e4cf.png)

ConsoleColor 只用文字改变行，我需要改变整个屏幕；所以不要说ConsoleColor。

2) 如何使用 KeyUp、KeyDown 和 KeyPress 事件？以及如何为不同的键设置不同的操作？
尽管我刚刚开始使用 C#，但我发现了很多关于这些事件的指南，因此最好提供解释（而不仅仅是代码）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:32:39.840

> 如何更改背景颜色

您必须在设置[BackgroundColor](http://msdn.microsoft.com/en-us/library/system.console.backgroundcolor.aspx)*后*清除控制台，例如

```
Console.BackgroundColor = ConsoleColor.Blue;
Console.Clear(); 
```

> 如何使用 KeyUp、KeyDown 和 KeyPress 事件？

您将使用[Console.ReadKey](http://msdn.microsoft.com/en-us/library/system.console.readkey.aspx)并处理每种键类型，例如

```
var input = Console.ReadKey();
switch (input.Key)
{
    case ConsoleKey.LeftArrow:
        // handle left arrow
        break:
    case ConsoleKey.RightArrow:
        // handle right arrow
        break;
    ...
} 
```

# javascript - 多列的交叉过滤器？

> ID：13379723
> 
> 赞同：1
> 
> 时间：2012-11-14T13:28:41.083
> 
> 标签：javascript, crossfilter

我有地区和年份的数据：

```
region  year   value
A       1900   60
A       1901   70
B       1900   78
B       1901   90 
```

像这样为地区和年份设置交叉过滤器是否正确？

```
myFilter = crossfilter(data)

byRegionAndYear = myFilter.dimension(function(d){
      return d.region + d.year
}) 
```

以及如何获得过滤查询的结果？（现在我使用 top(xxx)）

byRegionAndYear.filterExact("A1970").top(100);

# php - 会话未在 codeigniter curl 请求时触发

> ID：13379725
> 
> 赞同：1
> 
> 时间：2012-11-14T13:28:49.330
> 
> 标签：php, codeigniter, curl

我从这里[https://github.com/philsturgeon/codeigniter-curl](https://github.com/philsturgeon/codeigniter-curl)使用 codeigniter curl 库创建了一个远程访问，然后使用下面的代码登录，然后我得到了很好的响应，我已经登录了。

```
 $this->load->library('curl');        
    $opt = array(
        'COOKIEJAR' => 'curl_sess/cookie.txt',
        'COOKIEFILE' => 'curl_sess/cookie.txt',
    );

    $array = array(
        'email' => 'user@example.com',
        'password' => 'somepassword'
    );
    echo $this->curl->simple_post('http://remoteweb.com/cek_login', $array, $opt); 
```

然后我想创建另一个需要登录状态的请求，例如：

```
 $array = array();
    echo $this->curl->simple_get('http://remoteweb.com/get_datadeposit', $array); 
```

但我什么也没得到，因为我在第一次请求时的登录会话没有引入第二次请求。如何实现这一点，或者我错过了什么......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:12:38.707

尝试

```
$this->load->library('curl');
$opt = array(
    CURLOPT_COOKIEJAR => 'curl_sess/cookie.txt',
    CURLOPT_RETURNTRANSFER => true
);
$array = array(
    'email' => 'user@example.com',
    'password' => 'somepassword'
);
echo $this->curl->simple_post('http://remoteweb.com/cek_login', $array, $opt); 
```

# html - 内容 CSS 结束后停止过度滚动

> ID：13379726
> 
> 赞同：0
> 
> 时间：2012-11-14T13:28:48.927
> 
> 标签：html, css, wordpress, scroll, position

我有一个非常简单的网站，它有一个粘在页面底部的页脚和一个在内容太长时可以滚动的内容区域，并且内容的末尾将清除页脚，如下所示。如果内容适合页面，则不显示滚动条。

![这是一个页面内容太长的页面，可以滚动到页面底部，容器末尾会清除页脚顶部](../Images/515b5d54ad24887a267ced717c4bd99d.png)

然而，最近我无法检测到的一些 CSS/php 更改意味着页面没有在主要内容 div 的底部下方有这个巨大的区域，用户可以像这样向下滚动。

正常的页面视图，一切看起来都应该如此。 ![div 位于页面顶部正下方的正常页面视图](../Images/73cc2d3b385ee7e5233b861aa681234a.png)

这是现在每个页面的视图，用户可以滚动到主要内容 div 的末尾以下，以显示下面这个巨大的空白区域。 ![页面现在滚动到内容 div 的下方](../Images/ae45b512291e80a1f87ceca4c89583b7.png)

一天前它工作得很好，我不知道下一步该往哪里看。我检查了所有的 css 以确保没有语法错误，我检查了所有的 wordpress 模板文件以确保没有未关闭的 div，反之亦然。

有谁知道尝试解决这个问题的起点？这种类型的东西有一个常见的错误吗？如果您需要指向样式表或 html 的链接，请询问（因为太长而没有复制）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:46:28.310

不知道你为什么使用淡入淡出元素。肯定是导致问题的原因。

添加此 CSS 以通过隐藏它来解决您的滚动问题。

```
#fade { display: none; } 
```

# numbers - 将字符转换为数字

> ID：13379732
> 
> 赞同：1
> 
> 时间：2012-11-14T13:29:04.623
> 
> 标签：numbers, lisp, char

我正在读取一个平面文件 - 为了使用读取的字符，我想将它们转换为数字。我写了一个将字符串转换为向量的小函数：

```
(defun string-to-vec (strng)
  (setf strng (remove #\Space strng)) 
    (let ((vec (make-array (length strng))))
      (dotimes (i (length strng) vec)
        (setf (svref vec i) (char strng i))))) 
```

但是，这会返回一个带有字符条目的向量。缺少`char-code`用于将单位编号字符转换为函数中的数字，是否有一种简单的方法可以从文件中将数字读取为数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:37:21.653

除了 Rainer 的回答，让我提一下[`read-from-string`](http://www.lispworks.com/documentation/HyperSpec/Body/f_rd_fro.htm)（请注意，Rainer 的代码比重复应用更有效，`read-from-string`因为它只创建一次流）和[`parse-integer`](http://www.lispworks.com/documentation/HyperSpec/Body/f_parse_.htm)（唉，没有`parse-float`）。

请注意，如果您正在阅读 CSV 文件，您可能应该使用现成的库而不是编写自己的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T14:10:46.577

上图更短：

```
? (map 'vector #'identity (remove #\Space "123"))
#(#\1 #\2 #\3) 
```

您可以转换字符串：

```
(defun string-to-vector-of-numbers (string)
  (coerce 
   (with-input-from-string (s string)
     (loop with end = '#:end
           for n = (read s nil end)
           until (eql n end)
           unless (numberp n) do (error "Input ~a is not a number." n)
           collect n))
   'vector)) 
```

但是直接从文件中读取数字会更容易。使用`READ`，它可以读取数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T22:56:16.083

请注意，`read`-like 函数受阅读器宏的影响。

举个例子：

```
* (defvar *foo* 'bar)

*FOO*
* (read-from-string "#.(setq *foo* 'baz)")

BAZ
19
* *foo*

BAZ 
```

如您所见`read-from-string`，可以隐式设置一个变量。您可以通过设置为禁用`#.`阅读器宏，但无论如何，如果输入中只有整数，则考虑改用。`*read-eval*``nil`[`parse-integer`](http://www.lispworks.com/documentation/HyperSpec/Body/f_parse_.htm)

# vb.net - (500) 网站登录脚本上的内部服务器错误

> ID：13379733
> 
> 赞同：1
> 
> 时间：2012-11-14T13:29:09.033
> 
> 标签：vb.net, httpwebrequest, httpwebresponse

大家好，我在互联网上找到了一个可以登录 facebook 的脚本，这很好用，但现在我尝试在另一个网站上登录，但出现 500 错误。

```
 Dim cookieJar As New Net.CookieContainer()
    Dim request As Net.HttpWebRequest
    Dim response As Net.HttpWebResponse
    Dim strURL As String = "http://xtract.basdistributie.nl:4040/Account/LogOn"

       Try 
        request = Net.HttpWebRequest.Create(strURL)
        request.UserAgent = "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)"
        request.Method = "GET"
        request.CookieContainer = cookieJar
        response = request.GetResponse()

        For Each tempCookie As Net.Cookie In response.Cookies
            cookieJar.Add(tempCookie)
        Next

        'Send the post data now
        request = Net.HttpWebRequest.Create(strURL)
        request.UserAgent = "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)"
        request.Method = "POST"
        request.AllowAutoRedirect = True
        request.CookieContainer = cookieJar

        Dim writer As StreamWriter = New StreamWriter(request.GetRequestStream())
        writer.Write("username=???????&password=????????")
        writer.Close()

        response = request.GetResponse()

        'Get the data from the page
        Dim stream As StreamReader = New StreamReader(response.GetResponseStream())
        Dim data As String = stream.ReadToEnd()
        response.Close()

        If data.Contains("BAS Distribution Xtract") = True Then
            MsgBox("ingelogd")
        End If
        MsgBox(data)
    Catch e As Exception
        If TypeOf e Is WebException AndAlso DirectCast(e, WebException).Status = WebExceptionStatus.ProtocolError Then
            Dim errResp As WebResponse = DirectCast(e, WebException).Response
            ' read the error response
            Using respStream As Stream = errResp.GetResponseStream()
                MsgBox(e.ToString)
            End Using
        End If
    End Try 
```

错误消息位于 response = request.GetResponse () 我也尝试使用 Fidler 来获得更好的错误消息，但从未使用过这个。我还在互联网上读到了一些错误是因为网站是内置 asp 而不是 .net 这是真的吗？

所有帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:40:26.617

facebook 的登录机制不适用于这个其他站点的原因是因为它们可能没有相同的登录表单参数。

这是您应该如何进行的（尽管此时无法给出确切的答案）

1.  使用浏览器导航到您要登录的网站
2.  检查登录表单的 HTML 以获取实际的参数名称。例如，该站点可能使用“uname”而不是“用户名”之类的东西。
3.  编辑您的代码为表单上的每个输入发布一个值

如果这不起作用：

1.  安装 WireShark 或类似的东西，以便您可以查看 HTTP 流量
2.  使用浏览器导航到网站
3.  使用浏览器登录并使用wireshark 查看登录请求。特别注意 POST 变量的名称和值以及头信息
4.  根据需要更新您的脚本

如果您需要第 4 步的帮助，请编辑您的帖子以包含第 3 步中的信息。

**线鲨**

下面是有关如何在此处使用wireshark 的简要说明。我不会详细介绍过滤或类似的东西。你可以用你的眼睛来过滤：P

当你打开wireshark时，你会看到一个接口列表。第 1 步是选择一个接口...

*   如果您通过 wifi 连接，请选择其中一个 wlan 接口。希望只有一个。否则，您可以依靠反复试验来获得正确的结果
*   如果您通过网线连接，则选择 eth0。希望只有一个等。

如果没有显示接口列表，则窗口左上方应该有一个图标，看起来有点像打印机。单击它将让您选择接口（单击开始开始捕获）。

登录您的网站（使用您的浏览器）并通过单击带有红色 x 的 icno 立即停止捕获。

现在你需要找到正确的数据包......

您感兴趣的协议是 HTTP。您正在访问的域的名称可能会显示在信息列中。现在我只是假设它确实如此。如果它不只是这样说作为评论。此外，如果您看到 SSL，那么这可能没用。我对ssl还不是很了解...

好的，所以您现在可以识别您发送到 Web 应用程序的数据包。找到一个说 POST 的，看看里面有什么。如果那是您的登录内容，那么这是一场胜利。

记下所有看起来相关的信息。

现在，如果您使用您的应用程序重复整个过程以尝试登录并找到该登录数据包，那么您可以发现差异。

# charts - 如何绘制百分比回撤线？

> ID：13379739
> 
> 赞同：1
> 
> 时间：2012-11-14T13:29:33.433
> 
> 标签：charts, line, javafx-2

下图显示了我的问题

![在此处输入图像描述](../Images/82b0a22c8a941be22319fe4a6348a8a0.png)

我想做的是：

1) 先用鼠标左键单击 A 点

2) 鼠标左键第二次点击 B 点，现在出现从 A 到 B 的线

3) 按下鼠标左键并向右拖动时，假设 A 到 B 为 100%，以固定百分比距离绘制 5 条回撤线。

所以第 1 行绘制在 B 点 (0% AB ret)，第 2 行是 25%(AB)，第 3 行是 50%(AB)，第 4 行是 75%(AB)，第 5 行是 100%(AB) .

这是绘制线的代码

```
import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.chart.CategoryAxis;
import javafx.scene.chart.LineChart;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.scene.control.Label;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.Pane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Line;
import javafx.scene.shape.LineTo;
import javafx.scene.shape.MoveTo;
import javafx.scene.shape.Path;
import javafx.stage.Stage;

public class Lines extends Application {

Path path;

public static void main(String[] args) {
    launch(args);
}

@Override
public void start(Stage stage) {

    final CategoryAxis xAxis = new CategoryAxis();
    final NumberAxis yAxis = new NumberAxis(1, 11, 0.1);
    yAxis.setTickUnit(1);
    //yAxis.setPrefWidth(35);
    yAxis.setMinorTickCount(10);
    yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) {
        @Override
        public String toString(Number object) {
            String label;
            label = String.format("%7.2f", object.floatValue());
            return label;
        }
    });
    final LineChart<String, Number> lineChart = new LineChart<String, Number>(xAxis, yAxis);

    lineChart.setCreateSymbols(false);
    lineChart.setAlternativeRowFillVisible(false);
    lineChart.setLegendVisible(false);

    XYChart.Series series1 = new XYChart.Series();

    series1.getData().add(new XYChart.Data("Jan", 1.5));
    series1.getData().add(new XYChart.Data("Feb", 4));
    series1.getData().add(new XYChart.Data("Mar", 2.5));
    series1.getData().add(new XYChart.Data("Apr", 5));
    series1.getData().add(new XYChart.Data("May", 6));
    series1.getData().add(new XYChart.Data("Jun", 10.5));
    series1.getData().add(new XYChart.Data("Jul", 6));
    series1.getData().add(new XYChart.Data("Aug", 7.5));
    series1.getData().add(new XYChart.Data("Sep", 7.5));
    series1.getData().add(new XYChart.Data("Oct", 6));
    series1.getData().add(new XYChart.Data("Nov", 5.5));
    series1.getData().add(new XYChart.Data("Dec", 4));

    BorderPane bp = new BorderPane();
    bp.setCenter(lineChart);
    Scene scene = new Scene(bp, 800, 600);
    lineChart.setAnimated(false);
    lineChart.getData().addAll(series1);

    Lines.MouseHandler mh = new Lines.MouseHandler( bp );
    bp.setOnMouseClicked( mh );
    bp.setOnMouseMoved( mh );

    stage.setScene(scene);

    path = new Path();
    path.setStrokeWidth(1);
    path.setStroke(Color.BLACK);

    scene.setOnMouseDragged(mh);
    scene.setOnMousePressed(mh);
    bp.getChildren().add(path);
    stage.setScene(scene);
    stage.show();
}

class MouseHandler implements EventHandler< MouseEvent > {
private boolean gotFirst    = false;
private Line    line;
private Pane    pane;
private double  x1, y1, x2, y2;

public MouseHandler( Pane pane ) {
    this.pane = pane;
}    
@Override
public void handle( MouseEvent event ) {
    if( event.getEventType() == MouseEvent.MOUSE_CLICKED ) {
        if( !gotFirst ) {
            x1 = x2 = event.getX();
            y1 = y2 = event.getY();
            line = new Line( x1, y1, x2, y2 );

            pane.getChildren().add( line );

            gotFirst = true;
        } 
        else {
            line = null;
            gotFirst = false;
        }
    } 
        else {
            if( line != null ) {
                x2 = event.getX();
                y2 = event.getY();
                // update line
                line.setEndX( x2 );
                line.setEndY( y2 );
        }
     }
  }
  }
  } 
```

如何做到这一点？

谢谢！

# python - 在 Python 类中清理临时文件夹的正确方法

> ID：13379742
> 
> 赞同：34
> 
> 时间：2012-11-14T13:29:40.357
> 
> 标签：python, destructor, temporary-directory

我正在创建一个类，我想在其中生成一个临时文件夹工作区，这些文件夹将在对象的生命周期内持续存在，然后被删除。我在 def **init**中使用 tempfile.mkdtemp()来创建空间，但我读过我不能依赖**del**被调用。

我想要这样的东西：

```
class MyClass:
  def __init__(self):
    self.tempfolder = tempfile.mkdtemp()

  def ... #other stuff

  def __del__(self):
    if os.path.exists(self.tempfolder): shutil.rmtree(self.tempfolder) 
```

是否有另一种/更好的方法来处理这种清理？我正在阅读有关“与”的信息，但它似乎只在函数中有用。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-14T13:42:59.657

警告：你永远不能*保证*临时文件夹会被删除，因为用户总是可以硬杀你的进程，然后它就不能运行其他任何东西。

也就是说，做

```
temp_dir = tempfile.mkdtemp()
try:
    <some code>
finally:
    shutil.rmtree(temp_dir) 
```

* * *

由于这是一个非常常见的操作，Python 有一种特殊的方式来封装“做某事，执行代码，清理”：*上下文管理器*。你可以自己写如下：

```
@contextlib.contextmanager
def make_temp_directory():
    temp_dir = tempfile.mkdtemp()
    try:
        yield temp_dir
    finally:
        shutil.rmtree(temp_dir) 
```

并将其用作

```
with make_temp_directory() as temp_dir:
    <some code> 
```

（请注意，这使用`@contextlib.contextmanager`创建上下文管理器的快捷方式。如果您想以原始方式实现一个，您需要使用`__enter__`和`__exit__`方法创建一个自定义类；`__enter__`将创建并返回临时目录并`__exit__`删除它。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-02-21T00:07:04.060

处理临时文件和目录的一个好方法是通过上下文管理器。这就是您可以使用[tempfile.TemporaryFile](http://docs.python.org/2.7/library/tempfile.html#tempfile.TemporaryFile)或[tempfile.NamedTemporaryFile](http://docs.python.org/2.7/library/tempfile.html#tempfile.NamedTemporaryFile)的方式——一旦您退出`with`语句（通过正常退出、返回、异常或其他任何方式），文件/目录及其内容将从文件系统中删除。

对于 Python 3.2+，这是内置为[tempfile.TemporaryDirectory](http://docs.python.org/3.2/library/tempfile.html#tempfile.TemporaryDirectory)：

```
import tempfile

with tempfile.TemporaryDirectory() as temp_dir:
    ... do stuff ... 
```

对于早期的 Python 版本，您可以轻松创建自己的上下文管理器来执行完全相同的操作。这里与@katrielalex 答案的区别在于将 args 传递给`mkdtemp()`和 try/finally 块，以确保在引发异常时清理目录。

```
import contextlib
import shutil

@contextlib.contextmanager
def temporary_directory(*args, **kwargs):
    d = tempfile.mkdtemp(*args, **kwargs)
    try:
        yield d
    finally:
        shutil.rmtree(d)

# use it
with temporary_directory() as temp_dir:
    ... do stuff ... 
```

请注意，如果您的进程被硬杀（例如`kill -9`），那么目录将不会被清理。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-24T07:13:05.363

另一种使用方法`contextlib`是使您的对象可关闭，并使用[`closing`](https://docs.python.org/2/library/contextlib.html#contextlib.closing)上下文管理器。

```
class MyClass:
    def __init__(self):
        self.tempfolder = tempfile.mkdtemp()

    def do_stuff():
        pass

    def close(self):
        if os.path.exists(self.tempfolder):
            shutil.rmtree(self.tempfolder) 
```

然后使用上下文管理器：

```
from contextlib import closing

with closing(MyClass()) as my_object:
    my_object.do_stuff() 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-02-21T22:36:41.930

其他答案指出，您可以使用上下文管理器或要求您的用户显式调用某种类型的清理功能。如果可以的话，这些都很棒。然而，有时因为你在一个大型应用程序中并且你嵌套了多个层，所以没有地方可以连接这个清理，而且你上面没有清理方法或上下文管理器。

在这种情况下，您可以使用 atexit：[https ://docs.python.org/2/library/atexit.html](https://docs.python.org/2/library/atexit.html)

```
import atexit

class MyClass:
  def __init__(self):
    self.tempfolder = tempfile.mkdtemp()
    atexit.register(shutil.rmtree, self.tempfolder)

  def ... #other stuff 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-29T11:30:11.027

正如[Bluewind](https://stackoverflow.com/users/953022/bluewind)所说，您必须确保将上下文管理器的 yield 部分包装在 try: finally 语句中，否则任何异常都不会在上下文管理器中得到正确处理。

来自[Python 2.7 文档](http://docs.python.org/2.7/library/tempfile.html)

> 在生成器产生的地方，嵌套在 with 语句中的块被执行。然后在退出块后恢复生成器。如果块中发生未处理的异常，它会在生成器中在产生产生的点重新引发。因此，您可以使用 try...except...finally 语句来捕获错误（如果有），或确保进行一些清理。如果捕获异常只是为了记录它或执行某些操作（而不是完全抑制它），则生成器必须重新引发该异常。否则，生成器上下文管理器将向 with 语句指示异常已被处理，并且将继续执行 with 语句之后的语句。

此外，如果您使用的是 Python 3.2+，您应该查看[这个小宝石](http://docs.python.org/3.2/library/tempfile.html)，它已经为您很好地包装了以上所有内容

> tempfile.TemporaryDirectory(suffix='', prefix='tmp', dir=None)
> 
> 此函数使用 mkdtemp() 创建一个临时目录（提供的参数直接传递给底层函数）。生成的对象可以用作上下文管理器（请参阅使用语句上下文管理器）。在上下文完成（或临时目录对象的销毁）后，新创建的临时目录及其所有内容将从文件系统中删除。
> 
> 可以从返回对象的 name 属性中检索目录名称。
> 
> 可以通过调用 cleanup() 方法显式清理目录。
> 
> 3.2 版中的新功能。

# ruby-on-rails-3 - 如何单独访问引导文件

> ID：13379746
> 
> 赞同：0
> 
> 时间：2012-11-14T13:29:57.457
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

现在 Bootstrap 在 Rails 中运行，我想完全访问所有 Bootstrap 文件，以根据需要排除（或包含）资产，另外添加我自己的资产、变量——我之前做过（并且发现很容易）开始学习 Rails。

我的问题：将整个引导文件夹从`C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems\bootstrap-sass-2.1.1.0\vendor\assets\stylesheets`我的 Rails 应用程序文件夹复制`..\Rails\Sample_App\vendor\assets\stylesheets`到默认情况下是否是一个好习惯？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:13:58.240

我只需在 Gemfile 中添加 gem 并手动包含文件。

```
#application.css.less
@import "variables.less";
@import "mixins.less"; 
```

有关如何执行此操作的非常好的截屏视频，您可以观看[http://railscasts.com/episodes/329-more-on-twitter-bootstrap](http://railscasts.com/episodes/329-more-on-twitter-bootstrap)解释该技术的地方

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:50:42.443

你是什​​么意思“完全访问”？当你使用`bootstrap-sass`gem 时，你已经拥有了 bootstrap 的所有样式表和 javascript。要使用它们，您只需要添加：

*   `@import "bootstrap"`在你的`custom.css.scss`文件中。
*   `//= require bootstrap`在你的`application.js`文件中。

因此，如果您想添加自己的资产，只需将它们放入，在您的或任何您的 scss 文件 `app/assets/stylesheet`中创建您自己的变量，然后您就可以使用它们。`custom.css.scss`

您可以使用所有较少的引导变量，但您需要进行少量更改。Bootstrap 使用的是 less, variable is defined: `@varibale`, 使用`bootstrap-sass`gem，你可以在 scss 文件中使用 bootstrap 的 less 变量，只需更改`@`为`$`, 表示`$variable`.

如果您不想使用样式表是 scss 文件，并且您想单独放置资产：

*   `app/assets`是您放置所有资产的地方，仅由应用程序使用
*   `lib/assets`是您的资产被许多应用程序共享的地方。
*   `vendor/assets`是您放置其他开发人员或插件的复制资产的地方...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:38:17.593

如果您不希望它们在生产中使用，这会覆盖 gem 的已安装文件，而只是想查看文件以供参考，那么您应该简单地将 git 存储库克隆到与您的项目不同的目录中。所以**在其他一些目录**中，执行这个：

```
git clone git://github.com/twitter/bootstrap.git 
```

当然，你可以随时在[Github上方便地在线浏览源代码](https://github.com/twitter/bootstrap)

# ios - ARC 访问器会自动处理 GCD 内存管理吗？

> ID：13379752
> 
> 赞同：1
> 
> 时间：2012-11-14T13:30:14.947
> 
> 标签：ios, cocoa-touch, grand-central-dispatch

> **可能重复：**
> [ARC 是否支持调度队列？](https://stackoverflow.com/questions/8618632/does-arc-support-dispatch-queues)

像这样声明 GCD 属性时：

```
@property (assign, atomic) dispatch_queue_t myQueue; 
```

`dispatch_retain`访问器是否通过对and的适当调用来合成`dispatch_release`，还是我仍然需要编写自己的手动保留/释放？

# delphi - 这是怎么内存泄漏的？

> ID：13379753
> 
> 赞同：3
> 
> 时间：2012-11-14T13:30:17.050
> 
> 标签：delphi, memory-leaks, fastmm

FastMM 将此行报告为内存泄漏的来源：

```
StrClassName := MidStr (curLine, length(START_OF_CLASSNAME)+1, length(curline)+1) 
```

`Copy`和怎么了`MidStr`？这只是Delphi 2007编译器的bug，还是以后的版本也有这个问题？这是FastMM 报告副本的[链接，以及我的应用程序如何显示这些类型的报告的](http://pastebin.com/QL2Qx21r)[图像](http://imgur.com/iwTHp)。看，为了显示节点，`VirtualTreeView`我需要一个新的数据类型。我称之为 TMemoryLeak。当我解析报告时，我给出了我`TMemoryLeak`的类名、调用堆栈、它的大小等。但是当应用程序关闭并且 FastMM 启动时，上面的复制行似乎泄漏了内存。我取消分配调用堆栈的大小，整个对象，但是作为字符串的 ClassName 字段总是会占用内存。

**更新（来自评论）**

这是声明和构造函数和解构函数。至于生命周期 - 一旦对象用于显示节点树，就会调用对象的解构函数，之后它们就过时了，并且被释放（我希望如此）。

```
TMemoryLeak = class(TObject)
    private
      fID              :integer;
      fSize            :integer;
      fTotalSize       :integer;
      fCallStack       :TStringList;
      fClassName       :string;
      fRepeatedInstance:integer;

    public
      property ID               :integer      read fID                write fID;
      property TotalSize        :Integer      read fTotalSize         write fTotalSize;
      property Size             :integer      read fSize              write fSize;
      property CallStack        :TStringList  read fCallStack         write fCallStack;
      property ClassName        :string       read fClassName         write fClassName;
      property RepeatedInstance :integer      read fRepeatedInstance  write fRepeatedInstance;
      class function Equal(xA: TMemoryLeak; xB: TMemoryLeak): Boolean;
      procedure clear;
      constructor create;
      destructor destroy; override;
  end;

  TMemoryLeakList=class(TObjectList)
    private
      fSortType         :TMlSortType;
      fSortDirection    :TMLSortDirection;
      fTotalLeakSize    :integer;
      fClassName        :string;
      fRepeatedInstance :Integer;
      fID               :Integer;
      function  GetItem(Index: Integer): TMemoryLeak;
      procedure SetItem(Index: Integer; const Value: TMemoryLeak);

    public
      property Items[Index: Integer]:TMemoryLeak      read GetItem             write SetItem; default;
      property TotalLeakSize        :integer          read fTotalLeakSize      write fTotalLeakSize;
      property SortType             :TMLSortType      read fSortType           write fSortType;
      property SortDirection        :TMLSortDirection read fSortDirection      write fSortDirection;
      property ClassName            :string           read fClassName          write fClassName;
      property RepeatedInstance     :integer          read fRepeatedInstance   write fRepeatedInstance;
      property ID                   :Integer          read fID                 write fID;

      function Add(AObject: TMemoryLeak): Integer;
      procedure Clear();
      procedure Sort;

      constructor create;
      destructor destroy; override;
  end;

constructor TMemoryLeak.create;
  begin
    inherited;
    fCallStack := TStringList.create;
    fRepeatedInstance:=0;
  end;
  destructor TMemoryLeak.destroy;
  begin
    clear;
  end;
  procedure TMemoryLeak.clear;
  begin
    fCallStack.Clear;
  end;
  class function TMemoryLeak.Equal(xA, xB: TMemoryLeak): Boolean;
  var i:Integer;
  begin
    Result:=False;

    if xA.ClassName = xb.ClassName then
    begin
      if xA.size = xb.size then
      begin
        if xA.CallStack.Count = xB.CallStack.Count then
        begin
          for i := 0 to xa.CallStack.Count - 1 do
          begin
            if CompareStr(xA.CallStack[i], xB.CallStack[i]) <> 0 then
            begin
             break;
            end;
          end;
          if i = xa.CallStack.Count then
            Result:=True;
        end
      end
    end

  end;

  { TMemoryLeakList }

  constructor TMemoryLeakList.create;
  begin
    inherited;
    fSortType         :=stID;
    fSortDirection    :=sdAsc;
    fClassName        :='';
    fRepeatedInstance :=0;
  end;
  destructor TMemoryLeakList.destroy;
  begin
    Clear;
  end;
  procedure TMemoryLeakList.Clear;
  var i : Integer;
  begin
      for i := 0 to Count - 1 do
        Items[i].clear;
  end; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T13:54:14.403

有道理的解释是你有内存泄漏。

我认为您对 FastMM 泄漏报告的工作方式有误解。您似乎从泄漏报告中推断出`Copy`，`MidStr`等是造成泄漏的原因。事实并非如此。当内存被分配但随后没有被释放时会报告泄漏。对于 和 之类的函数`Copy`，`MidStr`它们的工作是创建新字符串，这自然会涉及内存分配。报告泄漏是因为为保存字符串缓冲区而创建的内存未释放。当其余代码未能释放该内存时，分配功能不是`Copy`or的错。`MidStr`

Delphi 2007 是一个成熟的产品，已知字符串的内存管理是正确的。也许你做了一些绕过字符串引用计数的手动内存复制。`nil`您是否通过调用来设置一些变量/字段`FillChar`？`FreeMem`您是否使用而不是处理记录`Dispose`？前者不会减少字符串引用计数。像这样的事情是泄漏的可能原因。

* * *

查看您发布的代码的摘录，这是一个问题：

```
destructor TMemoryLeakList.destroy;
begin
  Clear;
end; 
```

您未能调用继承的析构函数。这意味着列表的成员不会被破坏。这就解释了为什么你的字符串没有被破坏。

事实上，您不需要为列表类提供析构函数。只需删除它并让继承的`TObjectList`析构函数完成工作。由于`OwnsObjects`默认为`True`，因此列表中的任何成员在从列表中删除以及列表本身被销毁时都会被销毁。

如果您的`Clear`方法实际上清除了列表，那么就会发生这种情况。但你`Clear`的不是真实的`Clear`。容器中的实数`Clear`预计会移除所有成员。您应该删除`Clear`并依赖继承的版本。

在`TMemoryLeak`中，您也无法调用继承的析构函数。并且也无法销毁该类拥有的字符串列表实例。

总而言之，我会像这样编写这些构造函数和析构函数：

```
constructor TMemoryLeak.Create;
begin
  inherited;
  fCallStack := TStringList.Create;
end;

destructor TMemoryLeak.Destroy;
begin
  fCallStack.Free;
  inherited;
end;

constructor TMemoryLeakList.Create;
begin
  inherited;//by default OwnsObjects is set to True, list manages member lifetime
  fSortType :=stID;
  fSortDirection :=sdAsc;
end; 
```

然后删除`destructor`, 并删除`Clear`方法。继承自的版本`TObjectList`就足够了。

在您声明的评论中：

> 一旦对象用于显示节点树，就会调用对象的析构函数。之后它们就过时了，并被释放（我希望如此）。

我会说这很有可能没有帮助。由于您在模式下创建了对象列表`OwnsObjects`，因此您根本不应该破坏列表的成员。您已经要求列表本身执行此操作。你们两个都做不到。而“我希望”的评论并没有让我对这段代码是正确的充满信心。

由于我们看不到您的所有代码，因此我无法确定这就是它的全部问题。

底线是您的代码有泄漏。相信 FastMM！

# maven - Artifactory 中的依赖解析配置

> ID：13379754
> 
> 赞同：12
> 
> 时间：2012-11-14T13:30:23.513
> 
> 标签：maven, dependencies, pom.xml, artifactory

最近我们开始与 Artifactory 合作。我们按照 Artifactory 的建议配置了 settings.xml。然而，我们在运行“mvn compile”时下载 jars 时遇到问题，即使它们出现在 Artifactory repo 中。显式添加 repo1-cache 解决了编译问题，但下载是从远程存储库而不是从 Artifactory 执行的。

```
<repository>
    <id>My Repository</id>
    <name>MyRepository-releases</name>
    <url>http://mvn-srv:8081/artifactory/repo1</url>
</repository> 
```

应该在 settings.xml 中添加什么来自动解决依赖关系并从工件中获取它们而不是每次都访问远程服务器？

### 设置.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<settings
xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd"
xmlns="http://maven.apache.org/SETTINGS/1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<profiles>
    <profile>
        <repositories>
            <repository>
                <snapshots>
                    <enabled>false</enabled>
                </snapshots>
                <id>central</id>
                <name>libs-release</name>
                <url>http://mvn-srv:8081/artifactory/libs-release</url>
            </repository>
            <repository>
                <snapshots>
                    <enabled>true</enabled>
                </snapshots>
                <id>snapshots</id>
                <name>libs-snapshot</name>
                <url>http://mvn-srv:8081/artifactory/libs-snapshot</url>
            </repository>
        </repositories>
        <pluginRepositories>
            <pluginRepository>
                <snapshots>
                    <enabled>false</enabled>
                </snapshots>
                <id>central</id>
                <name>plugins-release</name>
                <url>http://mvn-srv:8081/artifactory/plugins-release</url>
            </pluginRepository>
            <pluginRepository>
                <snapshots />
                <id>snapshots</id>
                <name>plugins-snapshot</name>
                <url>http://mvn-srv:8081/artifactory/plugins-snapshot</url>
            </pluginRepository>
        </pluginRepositories>
        <id>artifactory</id>
    </profile>
</profiles>
<activeProfiles>
    <activeProfile>artifactory</activeProfile>
</activeProfiles>
<servers>
    <server>
        <id>MyRepository</id>
    </server>
</servers> 
```

### 编译错误：

```
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 14.355s
[INFO] Finished at: Wed Nov 14 14:52:31 IST 2012
[INFO] Final Memory: 4M/15M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project common: Could not resolve dependencies for project com.myc
ompany.app:common:jar:1.0-SNAPSHOT: The following artifacts could not be resolved: commons-jxpath:co
mmons-jxpath:jar:1.3-osgi, xpp3:xpp3_min:jar:1.1.3.4.O-osgi, net.java.dev.stax-utils:stax-utils:jar:
20080702-osgi, net.sf.saxon:saxon:jar:8.9.0.4-osgi, net.sf.saxon:saxon-dom:jar:8.9.0.4-osgi, net.sf.
saxon:saxon-xqj:jar:8.9.0.4, dom4j:dom4j:jar:1.6.1-osgi, mx4j:mx4j-jmx:jar:2.1.1-osgi, mx4j:mx4j-imp
l:jar:2.1.1-osgi, mx4j:mx4j-tools:jar:2.1.1-osgi, mx4j:mx4j-remote:jar:2.1.1-osgi, com.yourkit:yjp-c
ontroller-api-redist:jar:9.0.8, org.apache.geronimo.specs:geronimo-jms_1.1_spec:jar:1.1-osgi, common
s-codec:commons-codec:jar:1.3-osgi, commons-httpclient:commons-httpclient:jar:3.1-osgi, quartz:quart
z-all:jar:1.6.6: Could not find artifact commons-jxpath:commons-jxpath:jar:1.3-osgi in central (http
://mvn-srv:8081/artifactory/libs-release) -> [Help 1] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T14:52:04.643

添加到@duncan-jones 出色的答案，解决问题的好方法是执行[Trace Artifact Retrieval](http://wiki.jfrog.org/confluence/display/RTF/Artifactory%27s+REST+API#ArtifactorysRESTAPI-TraceArtifactRetrieval)调用，在您的情况下：

```
http://mvn-srv:8081/artifactory/libs-release/commons-jxpath/commons-jxpath/1.3-osgi/commons-jxpath-1.3-osgi.jar?trace 
```

[顺便说一句，我什至在repo1](http://repo1.maven.org/maven2/commons-jxpath/commons-jxpath/)中都没有看到 1.3-osgi 版本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T14:09:59.893

您需要确保您的虚拟存储库映射到您期望的真实存储库。

例如，`libs-release`通常会映射到内部和外部版本存储库。也许这是错误的配置，导致它无法访问您想要的存储库。

在 Artifactory 中，转到 Admin 页面并查看*Configuration > Repositories*。在页面底部，查看您的虚拟存储库。双击它们将显示包含的内容。

对我来说，`libs-release`包括和。后者是另一个虚拟存储库，它映射到我安装中列出的所有外部存储库，例如 codehaus、repo1、jboss、google-code...`libs-release-local``ext-release-local``remote-repos`

也许缺少这些虚拟存储库之一`repo1`？

# windows - 最适合存储程序数据以供网络使用的地方

> ID：13379758
> 
> 赞同：1
> 
> 时间：2012-11-14T13:30:38.343
> 
> 标签：windows, storage, crm, datastore

我目前正在开发 CRM 应用程序。该应用程序适用于多个用户，因此我需要一个合适的文件夹来存储文档、笔记以及最重要的数据库等内容。此文件夹应在所有用户之间共享，也应通过网络共享。

在线搜索后，似乎建议使用此文件夹：“C:\Users\Public\Public Documents”。然而，对于我们的客户来说，这似乎是一个相当“难以找到”的文件夹，他们大部分都很少甚至没有使用计算机的经验。

我们的非程序员建议简单地使用“C:\CRM\”，因为即使是新用户也很容易找到（而且在备份过程中不太可能忘记！）

我一直试图找出这两个文件夹的（技术）起伏是什么，但我发现很难得到一个明确的答案。所以基本上我的问题是：

谁能向我解释为什么我不应该使用“C:\CRM\”，而应该使用“C:\Users\Public\Public”？当我使用“C:\CRM\”时会遇到什么问题？

提前致谢！

# wcf - WCF 服务：带有证书的 serviceCredentials 的行为 - 我应该如何为 Azure 配置它？

> ID：13379762
> 
> 赞同：0
> 
> 时间：2012-11-14T13:30:54.837
> 
> 标签：wcf, security, azure, certificate

我有`Service1`以下配置的简单 WCF 服务：

```
<behaviors>
  <serviceBehaviors>
    <behavior name="SecuredBehavior">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug httpHelpPageEnabled="true" includeExceptionDetailInFaults="true"/>
      <serviceCredentials type="System.ServiceModel.Description.ServiceCredentials">
        <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="WCFS.Service1,WCFS"/>
        <serviceCertificate findValue="BasicWCFCert" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName" />
        <windowsAuthentication includeWindowsGroups="false"/>
      </serviceCredentials>
    </behavior>
  </serviceBehaviors>
</behaviors>
<bindings>
  <wsHttpBinding>
    <binding name="SecuredWsHttpBinding">
      <security mode="Message">
        <message clientCredentialType="UserName"/>
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<services>
  <service name="WCFS.Service1" behaviorConfiguration="SecuredBehavior">
    <endpoint address="" binding="wsHttpBinding" bindingConfiguration="SecuredWsHttpBinding"
      name="End1" contract="WCFS.IService1" />
  </service>
</services> 
```

因此，在我的开发机器上，我正在使用此服务，证书“BasicWCFCert”存储在“我的”（个人）位置的 LocalMachine 中。

在 Azure 中发布此服务之前，我应该如何更改它？如何告诉 Service1 使用上传到 Azure 的证书之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:36:41.457

您是否尝试在角色配置屏幕中附加证书，如下所示？

`certmgr.msc`您可以通过运行并转到相关证书来获取指纹。

![在此处输入图像描述](../Images/d3537f46199b7c5cd0d4982221c4fcd8.png)

# php - 如果屏幕分辨率 <1000px，则显示不同的站点

> ID：13379774
> 
> 赞同：-1
> 
> 时间：2012-11-14T13:31:42.810
> 
> 标签：php, iphone, css, media

我有一个客户预算有限，无法负担我使用 CCS 媒体查询构建响应式站点的费用，因此我想构建一个迷你站点，它的流动性并在屏幕分辨率小于特定分辨率时被重定向到。

最佳做法是什么？

亲切的问候，布拉德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:37:02.687

您可以使用 window.screen 来获取屏幕的分辨率。

[window.screen 文档](http://www.javascriptkit.com/howto/newtech3.shtml)

您可以检查宽度并相应地进行重定向。

```
<script type="text/javascript">        
        if (window.screen.availablewidth < 1000)
        {
            window.location.href = "http://sizeForSmallRez";
        }
        else
        {
            window.location.href = "http://siteForLargeRez";
        }
</script> 
```

​这里 [是一个小提琴的例子](http://jsfiddle.net/A3NnK/5/) *（这个例子使用jquery）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:35:39.283

我会使用[**Twitter Bootstrap**](http://twitter.github.com/bootstrap/)。我认为这是你最好的选择，特别是因为听起来你是从头开始的。

如果您包含此 CSS 框架，您可以非常快速地设置一个响应式站点，该站点适用于台式机、平板电脑和手机。它并不完美，但它绝对是快速和简单的。

阅读[实时网格系统](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)，它就像在 HTML 标签中添加一些类一样简单，还了解[响应式设计](http://twitter.github.com/bootstrap/scaffolding.html#responsive)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T14:33:23.770

好的，我做了一些研究，发现了这个非常简单的代码片段！

```
if (window.screen.width < 1000) {
window.location = 'm.mysite.com'; 
```

}

# php - 为什么多 cURL 下载大小为 0 位的文件？

> ID：13379776
> 
> 赞同：0
> 
> 时间：2012-11-14T13:31:47.473
> 
> 标签：php, multithreading, curl, command-line

我使用这个类进行多线程 cUrl 文件下载；

在本地机器上下载文件内容，文件是空的；

我错过了什么？

```
<?php

/**
 * Crawler class file.
 *
 * CRAWLER
 *
 */
class CrawlerCommand extends CConsoleCommand {

    private $instance_crawler_id;
    private $instance_crawler_url_limit = 10;
    public $multi_exec_curl_files = array();
    public $collection = array();
    public static $userAgents = array(
        'FireFox3' => 'Mozilla/5.0 (Windows; U; Windows NT 5.1; pl; rv:1.9) Gecko/2008052906 Firefox/3.0',
        'GoogleBot' => 'Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)',
        'IE7' => 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)',
        'Netscape' => 'Mozilla/4.8 [en] (Windows NT 6.0; U)',
        'Opera' => 'Opera/9.25 (Windows NT 6.0; U; en)'
    );
    public static $options = array(
        CURLOPT_USERAGENT => 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)',
        CURLOPT_AUTOREFERER => true,
        CURLOPT_FOLLOWLOCATION => true,
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_FRESH_CONNECT => true,
        CURLOPT_COOKIEJAR => "cookies.txt",
        CURLOPT_COOKIEFILE => "cookies.txt",
        CURLOPT_SSL_VERIFYPEER => false,
        CURLOPT_CONNECTTIMEOUT => 5,
        CURLOPT_TIMEOUT => 10,
            //CURLOPT_COOKIESESSION => false,
    );

    /**
     * Executes the command.
     * @param array command line parameters for this command.
     */
    public function run($args) {
        // $args gives an array of the command-line arguments for this command

        for ($i = 0; $i < 50; $i++) {
            echo PHP_EOL;
        }

        //check if we need to create a new crawler instance; if all html sources from the active url's have been downloaded, there is no point to recrawl
        $day = date('d', time());
        $sql = "select * from `url` where `instance_crawler_day`!='$day' and `status`='1' order by `id` asc limit $this->instance_crawler_url_limit;";
        $cmd = Yii::app()->db->createCommand($sql);
        $rows = $cmd->queryAll();

        $actual_files = count($rows);
        //are there any files left to download for today ?
        if ($actual_files > 0) {

            //creating a new unique crawler instance
            $model_instance_crawler = new InstanceCrawler();
            $model_instance_crawler->day = $day;
            $model_instance_crawler->month = date('m', time());
            $model_instance_crawler->year = date('Y', time());
            if ($model_instance_crawler->save()) {

                //locking x url's for the crawler to download time at a time
                $sql = "update `url` set `instance_crawler_id`='$model_instance_crawler->id', `instance_crawler_day`='$model_instance_crawler->day' where `instance_crawler_day`!='$model_instance_crawler->day' and `status`='1' limit $this->instance_crawler_url_limit;";
                $cmd = Yii::app()->db->createCommand($sql);
                $cmd->query();

                $robots_txt = new RobotsTXT();

                $robots_txt->load_robots_from_db();

                $time = strtotime('-60 days');

                $sql = "SELECT u.*
FROM url AS u
JOIN product p ON p.`url_id` = u.id
JOIN product_follower pf ON pf.`product_id` = p.`id` AND pf.`created`>:time
JOIN `user` us ON us.id = pf.`user_id`
WHERE us.`status` = 1
GROUP BY u.id
order by `u`.`website_id` asc";

                //selecting x rows that belong to the new crawler instance
                $sql = "select * from `url` where `instance_crawler_id`='$model_instance_crawler->id' and `instance_crawler_day`='$day' and `status`='1' order by `id` asc;";
                $cmd = Yii::app()->db->createCommand($sql);
                $rows = $cmd->queryAll();

                if (count($rows) > 0) {

                    foreach ($rows as $row) {
                        $this->collection[$row['website_id']]['items'][] = $row;
                    }

                    foreach (array_keys($this->collection) as $key) {

                        $this->collection[$key]['urls'] = 0;

                        $collection2[] = $this->collection[$key];
                    }

                    $this->collection = $collection2;

                    $collection2 = null;

                    $this->processCollection();

                    //on dew, comment
                    $this->multiCurl($this->multi_exec_curl_files);
                    //CurlTool::downloadFile($url, $fileName, $fields = null, $verbose = false);
                }
            }
        } else {
            echo 'There are no files left to download today. Come back tomorow.' . PHP_EOL;
        }

        echo PHP_EOL . 'DONE' . PHP_EOL;
    }

    /**
     * Provides the command description.
     * This method may be overridden to return the actual command description.
     * @return string the command description. Defaults to 'Usage: php entry-script.php command-name'.
     */
    public function getHelp() {
        return 'Usage: how to use this command';
    }

    private function checkCounters() {
        $status = false;
        foreach ($this->collection as $key => $value) {
            if ($value['urls'] < count($value['items']))
                $status = true;
        }
        return $status;
    }

    public function processCollection() {
        //print'<pre>';
        //print_r($this->collection);
        $w = 0;
        while ($this->checkCounters()) {
            foreach ($this->collection as $key => $value)
                if ($value['urls'] < count($value['items'])) {
                    echo 'downloading file: ' . ($value['items'][$value['urls']]['id']) . '.html' . PHP_EOL;
                    //prepare the array for the multi thread cURL downloading process
                    $this->multi_exec_curl_files[$value['items'][$value['urls']]['id']] = array('link' => $value['items'][$value['urls']]['link']);
                    //$this->downloadFile($value['items'][$value['urls']]['url'], CRAWLER_FILES . ($value['items'][$value['urls']]['id']) . '.html');
                    //echo $value['items'][$value['urls']]['link'].'<br>';
                    //CurlTool::downloadFile($value['items'][$value['urls']]['link'], ($value['items'][$value['urls']]['id']) . '.html');
                    $this->collection[$key]['urls']++;
                }
            $w++;
            if ($w > count($this->collection))
                $w = 0;
        }
    }

    public function multiCurl($res, $options = "") {

        if (count($res) <= 0)
            return False;

        $handles = array();

        if (!$options) // add default options
            $options = self::$options;

        // add curl options to each handle
        foreach ($res as $k => $row) {
            $ch{$k} = curl_init();
            $options[CURLOPT_URL] = $row['link'];
            curl_setopt_array($ch{$k}, $options);
            $handles[$k] = $ch{$k};
        }

        $mh = curl_multi_init();

        foreach ($handles as $k => $handle) {
            curl_multi_add_handle($mh, $handle);
        }

        $running_handles = null;
        //execute the handles
        do {
            $status_cme = curl_multi_exec($mh, $running_handles);
        } while ($cme == CURLM_CALL_MULTI_PERFORM);

        while ($running_handles && $status_cme == CURLM_OK) {
            if (curl_multi_select($mh) != -1) {
                do {
                    $status_cme = curl_multi_exec($mh, $running_handles);
                } while ($status == CURLM_CALL_MULTI_PERFORM);
            }
        }

        foreach ($res as $k => $row) {
            $res[$k]['error'] = curl_error($handles[$k]);
            print_r($res[$k]['error']);
            if (!empty($res[$k]['error'])) {
                $res[$k]['data'] = '';
            } else {
                //$res[$k]['data'] = curl_multi_getcontent($handles[$k]);  // get results
                file_put_contents(CRAWLER_FILES . $k . '.html', curl_multi_getcontent($handles[$k]));
            }

            // close current handler
            curl_multi_remove_handle($mh, $handles[$k]);
        }
        curl_multi_close($mh);
        return $res; // return response
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:59:19.800

[使用http://www.somacon.com/p537.php](http://www.somacon.com/p537.php)找到了答案

我弄错了一些变量名，通过比较两个代码，我找到了它们

```
<?php
// LICENSE: PUBLIC DOMAIN
// The author disclaims copyright to this source code.
// AUTHOR: Shailesh N. Humbad
// SOURCE: http://www.somacon.com/p539.php
// DATE: 6/4/2008

// index.php
// Run the parallel get and print the total time
$s = microtime(true);
// Define the URLs
$urls = array(
  "http://localhost/r.php?echo=request1",
  "http://localhost/r.php?echo=request2",
  "http://localhost/r.php?echo=request3"
);
$pg = new ParallelGet($urls);
print "<br />total time: ".round(microtime(true) - $s, 4)." seconds";

// Class to run parallel GET requests and return the transfer
class ParallelGet
{
  function __construct($urls)
  {
    // Create get requests for each URL
    $mh = curl_multi_init();
    foreach($urls as $i => $url)
    {
      $ch[$i] = curl_init($url);
      curl_setopt($ch[$i], CURLOPT_RETURNTRANSFER, 1);
      curl_multi_add_handle($mh, $ch[$i]);
    }

    // Start performing the request
    do {
        $execReturnValue = curl_multi_exec($mh, $runningHandles);
    } while ($execReturnValue == CURLM_CALL_MULTI_PERFORM);
    // Loop and continue processing the request
    while ($runningHandles && $execReturnValue == CURLM_OK) {
      // Wait forever for network
      $numberReady = curl_multi_select($mh);
      if ($numberReady != -1) {
        // Pull in any new data, or at least handle timeouts
        do {
          $execReturnValue = curl_multi_exec($mh, $runningHandles);
        } while ($execReturnValue == CURLM_CALL_MULTI_PERFORM);
      }
    }

    // Check for any errors
    if ($execReturnValue != CURLM_OK) {
      trigger_error("Curl multi read error $execReturnValue\n", E_USER_WARNING);
    }

    // Extract the content
    foreach($urls as $i => $url)
    {
      // Check for errors
      $curlError = curl_error($ch[$i]);
      if($curlError == "") {
        $res[$i] = curl_multi_getcontent($ch[$i]);
      } else {
        print "Curl error on handle $i: $curlError\n";
      }
      // Remove and close the handle
      curl_multi_remove_handle($mh, $ch[$i]);
      curl_close($ch[$i]);
    }
    // Clean up the curl_multi handle
    curl_multi_close($mh);

    // Print the response data
    print_r($res);
  }

}
?> 
```

和

```
<?php
// r.php
// This script runs a variable amount of time
// and generates a variable amount of data

// Output a random amount of blank space
$s = microtime(true);
$m = rand(500,1000);
for($i = 0; $i < $m; $i++) {
  print "         \n";
  usleep(10);
}

// Print time taken and the value of the "echo" parameter
print isset($_REQUEST["echo"]) ? $_REQUEST["echo"] : "";
print " in ";
print round(microtime(true) - $s, 4)." seconds";
exit();
?> 
```

# java - 容器对象中的通用 getter

> ID：13379777
> 
> 赞同：2
> 
> 时间：2012-11-14T13:31:55.330
> 
> 标签：java, oop

某些容器类包含基类“Table”的对象列表（如 WoodTable、MetalTable ...）。每个 Table 类都保留其 MaterialType（MaterialType.Wood、MaterialType.Metal...）。问题是如何为可以返回 Table 的每个子类的容器类提供适当的 getter 方法。

到目前为止，我找到了以下方法：

1.以材料类型为参数的Getter。如果 T 的类型不对应于 materialType，这里的危险是 ClassCastException：

```
<T extends Table> T getTable(MaterialType materialtype)
WoodenTable table = getTable(MaterialType.Wood);
MetalTable table = getTable(MaterialType.Wood); // ups... exception 
```

2.带Class参数的Getter。安全但对用户来说不是很清楚（与作为参数的 MaterialType 相比）：

```
<T extends Table> T getTable(Class<T> tableClass)
WoodenTable table = getTable(WoodenTable.class); 
```

3.每个表子类的Getter。使用繁琐，编写和添加新的表子类：

```
WoodenTable getWoodenTable()
WoodenTable table = getWoodenTable(); 
```

4.Getter for just Table 接口。如有必要，在容器类之外进行强制转换。

```
Table getTable(MaterialType materialType)
WoodenTable woodenTable = (WoodenTable)getTable(MaterialType.Wood) 
```

还有其他（更好的）方法吗？如果不是，那么其中哪一个最合适或最不臭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:35:46.367

应该就是这么简单：

```
public Table getTable()  
{  
     return this.table;
} 
```

这将返回一个`Table`对象，由调用者来处理他们想要的。类似于以下块：

```
public Collection<String> getCollection()  
{  
     return new ArrayList<String>();
} 
```

主体返回 a`ArrayList`但函数实际上返回 a `Collection`。使用对象之间最常见接口的定义良好的 API 将为您提供同样的灵活性。

**编辑**

> 是的，这可能是一个用例，但我通常还需要类似的东西：for(Table t : TableContainer) { (SubClassA)t.doSomethingSpecificForA();} 这就是我的问题的开始。

让我们假设以下接口和实现：

```
 public interface Table  
    {  
        Table getTable();  
        void doSpecial();  
    }

public class WoddenTable implements Table  
{  
     ...  
     public Table getTable()  
     {  
         return this;
     }    

     public void doSpecial()  
     {  
         mySpecial();  
     }  

     private void mySpecial()  
     {  
         System.out.println("Wooden");  
     }  
}    

public class MetalTable implements Table  
{  
     ...  
     public Table getTable()  
     {  
         return this;
     }    

     public void doSpecial()  
     {  
         mySpecial();  
     }  

     private void mySpecial()  
     {  
         System.out.println("Metal");  
     } 
} 
```

和以下代码：

```
public static void main(String[] args)  
{  
        Collection<Table> tables = new ArrayList<Table>();  
        tables.add(new WoodenTable());  
        tables.add(new MetalTable());  
        for(Table table : tables)  
        {  
              table.doSpecial();  
        }  
} 
```

这里的方法是有一个共享的公共 API。并且每个类的内部都没有暴露，因此为每个类做某事的需要`special`隐藏在公共接口后面。这可以防止必须执行检查实例或任何其他杂乱的方法来解决此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T14:06:08.937

我建议不要将表视为具有属性（材料）的数据结构，而应开始将它们视为“人”（[对象思维](https://rads.stackoverflow.com/amzn/click/com/0735619654)）。不要从他们那里得到“材料”。相反，让他们暴露他们的行为。

当您更改表的设计时，您将自动更改其容器的设计。很明显，容器不应该关心桌子的材料，而应该让**他们**控制他们是想离开容器还是留在里面。

# c++ - 在 Box2D Web 的主体内定位圆形

> ID：13379778
> 
> 赞同：0
> 
> 时间：2012-11-14T13:31:55.633
> 
> 标签：c++, html, box2d

我不得不彻底修改这个问题，因为我认为我对我的问题不够明确。

我正在尝试学习 Box2D Web 的诀窍。当我想学习如何将多个形状放在一个刚体中（以形成响应性凹形体）时，我开始遇到问题。我做出的一个假设是，这种特征只有在我可以改变形状的位置时才会真正有用（这样我就可以控制整个刚体的样子）。一个例子是创建一个具有两个矩形形状的“L”形主体，其中一个位于第一个形状的下方和右侧。

到目前为止，我已经做到了这一点——我找到了 SetAsOrientedBox 方法，您可以在其中将框传递到第三个参数（中心）中的位置。

一切都很好。但是当我试图在一个刚体中创建两个圆形时，我发现了不良行为。我的直觉是使用 SetLocalPosition 方法（在 b2CircleShape 类中找到）。这似乎在一定程度上起作用。在调试绘制中，主体会做出应有的物理响应，但在视觉上（在调试中）它似乎并没有在其位置绘制形状。它只是在中心位置绘制圆形。我知道这可能是 Box2D 的调试绘制逻辑的问题 - 但对我来说似乎很奇怪，没有关于这个问题的在线模式。人们会认为在身体坐标空间的不同位置创建两个圆形将是一种流行且有据可查的现象。显然不是。

下面是我用来创建身体的代码。假设世界已经有效地传递到这个范围：

```
// first circle shape and def

var fix_def1 = new b2FixtureDef;

fix_def1.density = 1.0;
fix_def1.friction = 0.5;
fix_def1.restitution = .65;
fix_def1.bullet = false;

var shape1 = new b2CircleShape();

fix_def1.shape = shape1;
fix_def1.shape.SetLocalPosition(new b2Vec2(-.5, -.5));
fix_def1.shape.SetRadius(.3);

// second circle def and shape

var fix_def2 = new b2FixtureDef;

fix_def2.density = 1.0;
fix_def2.friction = 0.5;
fix_def2.restitution = .65;
fix_def2.bullet = false;

var shape2 = new b2CircleShape();

fix_def2.shape = shape2;
fix_def2.shape.SetLocalPosition(new b2Vec2(.5, .5));
fix_def2.shape.SetRadius(.3);

// creating the body

var body_def = new b2BodyDef();

body_def.type = b2Body.b2_dynamicBody;

body_def.position.Set(5, 1);

var b = world.CreateBody( body_def );

b.CreateFixture(fix_def1);
b.CreateFixture(fix_def2); 
```

请注意，我将 Box2D Web ( [http://code.google.com/p/box2dweb/](http://code.google.com/p/box2dweb/) ) 与 HTML5 画布一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:25:48.100

看起来您实际上根本没有使用标准的调试绘图，而是您自己编写的一个函数 - 这解释了缺乏关于它的在线模式（后世的[pastebin](http://pastebin.com/ywCvkNeS)）。

查看 box2dweb 源代码并查看这些函数以获取工作参考： b2World.prototype.DrawDebugData
   b2World.prototype.DrawShape
   b2DebugDraw.prototype.DrawSolidCircle

您可以使用画布上下文 'arc' 函数来避免使用 sin/cos 计算点，然后绘制单独的线来制作圆的需要。它还允许浏览器使用它知道的最有效的方式来渲染曲线，例如。某些浏览器上的硬件支持。

由于您似乎想要进行自定义渲染，因此需要注意的另一个陷阱是 DrawCircle 和 DrawSolidCircle 的不同调用签名。其中第二个采用轴方向参数，因此如果您错误地使用了三参数版本，Javascript 将默默地使用轴的颜色参数，留下一个未定义的颜色参数。几个小时的乐趣！

```
DrawCircle(center, radius, color)
DrawSolidCircle(center, radius, axis, color) 
```

# html - 应用到包含、扩展没有服务器 www 的 html 文档

> ID：13379782
> 
> 赞同：0
> 
> 时间：2012-11-14T13:32:12.150
> 
> 标签：html

我是前端开发人员，在工作中我在 Apache 服务器上使用 Twig 和 Symfony2。但现在我必须在大学的人机交互课程中用 HTML、CSS 制作模型。我需要一些应用程序才能在 html 文件中包含其他 html 文件，用其他 html 文件扩展 html 文件 - 类似于 Twig 中的包含和扩展功能。存在这样的东西吗？

我宁愿不使用 html 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:45:50.547

您可以使用[服务器端包含](http://en.wikipedia.org/wiki/Server_Side_Includes)- 但这需要服务器（因此得名！！）

然后，例如，您可以为每个页面添加一个标题：

```
<!--#include virtual="header.html" --> 
```

*Apache、nginx、lighttpd 和 IIS 是支持这种语言的四大 Web 服务器。*

您的另一个选择是使用 JavaScript 和[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)来拉入其他内容后加载。

# magento - 自定义导航 - 按品牌购物

> ID：13379784
> 
> 赞同：1
> 
> 时间：2012-11-14T13:32:15.570
> 
> 标签：magento

是否可以在导航菜单中动态填充“按品牌购买”下拉菜单。我试图避免手动将每个品牌添加为子类别。

我们正在运行最新版本的 magento 企业版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:14:39.293

是的，有几种方法可以做到这一点：

1) 使用诸如[FME Shop by Brand之类的模块](http://www.fmeextensions.com/shop-by-manufacturers.html)

2）您可以手动执行以下步骤：

*   为您的产品创建一个名为“品牌”的属性
*   加载您的产品系列
*   遍历每个项目并获取品牌，并将其放入数组中
*   从数组中删除重复项（现在您有一个品牌列表）
*   为每个品牌创建实用的 cms 页面
*   在每个 cms 页面中仅显示具有该品牌的产品

第二种方法的缺点是需要很多时间（与按品牌模块的商店相对便宜的成本相比）

# eclipse-plugin - 如何从 Eclipse 插件访问 JDT“静态”图标？

> ID：13379789
> 
> 赞同：2
> 
> 时间：2012-11-14T13:32:30.933
> 
> 标签：eclipse-plugin, eclipse-jdt

我发现了如何访问一些图标：

```
ISharedImages images = JavaUI.getSharedImages();
Image image = images.getImage(ISharedImages.IMG_WHATEVER); 
```

但是，`ISharedImages`其中是常量修饰符图标`IMG_FIELD_PUBLIC`等`IMG_OBJS_PRIVATE`，但我找不到任何`static`修饰符。

我相信这个列表中的所有图标都应该以某种方式可以访问，但是如何访问呢？ [http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fref-156.htm](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fref-156.htm)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:02:23.630

不幸的是，我知道您是否使用内部呼叫的唯一方法。添加`org.eclipse.jdt.ui`为项目的依赖项。然后就可以使用JDT内部机制了：

```
JavaPluginImages.get(JavaPluginImages.IMG_OBJS_CLASS); // returns an Image 
```

我认为你可以使用任何你想要的图标。

# r - 如何使用子集函数和变量删除数据框列？

> ID：13379790
> 
> 赞同：4
> 
> 时间：2012-11-14T13:32:38.140
> 
> 标签：r

我有一个包含一堆列的数据框。我想删除名为**age**的列之一。

```
type.name <- "age" 
```

所以我尝试了

```
df <- subset(df, select = -type.name) 
```

但它会抛出错误：*invalid argument to unary operator*。

但是，这确实有效

```
df <- subset(df, select = -age) 
```

如何让它与变量一起动态工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:39:01.327

它适用于

```
subset(df, select = -eval(parse(text=type.name))) 
```

和

```
subset(df, select = names(df) != type.name) 
```

和

```
"[[<-"(df, type.name, value = NULL) 
```

# r - 在 R CRAN 包 'extRemes' 中使用 .RDA 文件

> ID：13379801
> 
> 赞同：2
> 
> 时间：2012-11-14T13:32:58.720
> 
> 标签：r

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T22:15:36.023

我遇到了同样的问题。本教程的 html 版本提供了指向原始 .r 文件的链接：[http://www.isse.ucar.edu/extremevalues/data/index.html](http://www.isse.ucar.edu/extremevalues/data/index.html)。只需点击指向 PORTw.R 文件副本的链接并将 URL 传递到“读取数据”对话框中，数据就会按照最初的预期读入工作区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:29:15.583

RDA 文件需要使用'load' 加载。当您“读取数据”时，您正在使用“read.table”。

# ios - 覆盖 UIScrollView 缩放的“位图缩放”效果

> ID：13379802
> 
> 赞同：1
> 
> 时间：2012-11-14T13:32:59.850
> 
> 标签：ios, cocoa-touch, uiscrollview, uikit

在我的 iPad 应用程序[Universal Combat Log](https://github.com/doxxx/universal-combat-log)（新布局分支）中，我有一个 UIView 子类（UCLLineChartView），它包含一个 UIScrollView，而滚动视图又包含另一个 UIView 子类（ChartView）。ChartView 有多个子层，每个子层用于添加到图表中的每一行数据。UCLLineChartView 绘制轴和标记。这些视图/层的内容完全是自定义绘制的，没有使用任何库存视图（例如 UIImageView）。

我在缩放时遇到问题——它像图像一样缩放 ChartView，这使得绘制的线条变得模糊和拉伸。我希望这条线保持清晰，最好是在用户进行缩放时，但经过 3 天的黑客攻击，我无法让它工作。

如果我覆盖 ChartView 上的 setTransform 以从变换中获取比例因子但不调用`[super setTransform]`，则滚动视图的 zoomScale 保持为 1。我尝试保留给定的变换并覆盖变换方法以返回它。我尝试通过更改 ChartView 的中心和边界来复制 setTransform 的效果，但我无法完全正确地获得行为，而且它似乎仍然没有影响滚动视图的 zoomScale。似乎滚动视图的缩放比例取决于 setTransform 的效果，但我无法确定如何。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:44:01.383

您需要做的是更新`contentScaleFactor`chartView 的。您可以通过在`scrollViewDidEndZooming:withView:atScale:`或 中添加以下代码来做到这一点`scrollViewDidZoom:`。

```
CGFloat newScale = scrollView.zoomScale * [[UIScreen mainScreen] scale];
[self.chartView setContentScaleFactor:newScale]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:39:22.230

我已经找到了一个解决我的问题的方法，这个方法并不太严重。在你的 UIScrollViewDelegate 中：

```
- (void)scrollViewWillBeginZooming:(UIScrollView *)scrollView withView:(UIView *)view
{
    [_contentView beginZoom];
}

- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale
{
    CGSize size = scrollView.bounds.size;
    CGPoint contentOffset = _scrollView.contentOffset;

    CGFloat newScale = _contentView.scale;
    newScale = MAX(newScale, kMinZoomScale);
    newScale = MIN(newScale, kMaxZoomScale);

    [_scrollView setZoomScale:1.0 animated:NO];
    _scrollView.minimumZoomScale = kMinZoomScale / newScale;
    _scrollView.maximumZoomScale = kMaxZoomScale / newScale;

    _contentView.scale = newScale;

    CGSize newContentSize = CGSizeMake(size.width * newScale, size.height);

    _contentView.frame = CGRectMake(0, 0, newContentSize.width, newContentSize.height);
    _scrollView.contentSize = newContentSize;

    [_scrollView setContentOffset:contentOffset animated:NO];

    [_contentView updateForNewSize];
    [_contentView setNeedsDisplay];
} 
```

在您的内容视图中，声明一个 scale 属性和以下方法：

```
- (void)beginZoom
{
    _sizeAtZoomStart = CGSizeApplyAffineTransform(self.frame.size, CGAffineTransformMakeScale(1/self.scale, 1));
    _scaleAtZoomStart = self.scale;
}

- (void)setTransform:(CGAffineTransform)transform
{
    self.scale = _scaleAtZoomStart * transform.a;
    self.frame = CGRectMake(0, 0, _sizeAtZoomStart.width * self.scale, _sizeAtZoomStart.height);

    [self updateForNewSize];
    [self setNeedsDisplay];
} 
```

如果您的内容视图使用子图层，您需要通过将以下内容添加到子图层的委托来禁用它们的隐式动画：

```
- (id<CAAction>)actionForLayer:(CALayer *)layer forKey:(NSString *)event
{
    // prevent animation of the individual layers so that zooming doesn't cause weird jitter
    return (id<CAAction>)[NSNull null];
} 
```

这里的基本思想是重写的 setTransform 使用变换矩阵中的比例因子来计算内容视图的新比例因子，然后相应地调整内容视图的大小。滚动视图自动调整内容偏移以保持内容视图居中。

scrollViewDidEndZooming 代码保持缩放有界。

例如，在旋转设备时处理调整滚动视图的大小会更加复杂。

# reporting-services - 无法在报告服务中加载文件或程序集

> ID：13379804
> 
> 赞同：3
> 
> 时间：2012-11-14T13:33:06.543
> 
> 标签：reporting-services

我创建了一个报告本地化项目，其中包含一个类文件和三个 .resx 文件。在类文件中，我编写了代码，根据文化找到合适的 .resx 文件，并读取给定键的值。

之后，我建立项目，将 .dll 复制到“ **C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies** ”并更改 RSPreviewPolicy.config，我在其中添加了一个新的 PermissionSet for Report本地化和一个 CodeGroup 标签授予 .dll 权限。

我所做的下一步是创建报告，引用 .dll 并编写一个表达式来测试本地化。

我收到以下错误：

“无法加载表达式宿主程序集。详细信息：无法加载文件或程序集

我显然错过了一些东西，但我不知道是什么？

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T06:21:59.050

我找到了答案。问题是在 Visual Studio 预览模式下查看报告的权限。

首先，我将*dll*（带有本地化类）放入下一个位置：

**C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies**。

之后，我需要更改`RSPreviewPolicy.config`存在于同一文件夹位置的文件以应用一些安全权限。

有问题，我提到我已经添加了一个**PermisionSet**，但现在我确信没有必要这样做。

我刚刚将两个具有权限级别的**CodeGroup**部分更改`Execution`为具有`FullTrust`权限级别，如下所示：

```
<CodeGroup
    class="UnionCodeGroup"
    version="1"
    PermissionSetName="FullTrust"
    Name="Report_Expressions_Default_Permissions"
    Description="This code group grants default permissions for code in report expressions and Code element. ">
    .
    .
    .
</CodeGroup>
<CodeGroup
    class="FirstMatchCodeGroup"
    version="1"
    PermissionSetName="FullTrust"
    Description="This code group grants MyComputer code Execution permission. ">
    .
    .
    .          
</CodeGroup> 
```

关于您的 Visual Studio 版本，您必须选择适当的文件夹路径：

*   对于 VS 2015 --- *C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\PrivateAssemblies*
*   对于 VS 2013 --- *C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\PrivateAssemblies*
*   对于 VS 2010 --- *C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies*

# ruby-on-rails-3 - How to replace Rails' Session

> ID：13379809
> 
> 赞同：0
> 
> 时间：2012-11-14T13:33:31.557
> 
> 标签：ruby-on-rails-3, session

I'm storing the *Rails Sessions* in database using *Active Record Store*. At some point I want to replace the actual *Rails Session* for another one extracted from the database.

Let's say the *Session to restore* ID comes in the param `session_id`.

How can I retrieve the Session to restore and replace the actual session?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:35:14.750

我发现最简单的方法是在 before_filter

```
def restore_session
  return if params[:session_id].blank?

  restored_session = ActiveRecord::SessionStore::Session.find_by_session_id(params[:session_id])
  if restored_session
    session.update(restored_session.data)
    restored_session.destroy
  end
end 
```

# android - Eclipse 无法识别 ADT 21 更新

> ID：13379811
> 
> 赞同：12
> 
> 时间：2012-11-14T13:33:34.223
> 
> 标签：android, eclipse, eclipse-plugin, adt, android-4.2-jelly-bean

我刚刚将 Ecipse 的 ADT 插件更新到 v21，但重新启动后它无法正常工作。

不知何故，插件的版本是 21.0.0.v201210310015-519525，但 SDK 验证告诉我我正在使用 v20.2.v201207191942-407447 并强制我更新。

我试过删除插件，但通过帮助 > 关于 > 安装详细信息是不可能的。恢复到旧安装让我重新安装更新，但结果相同。

我正在使用 Eclipse Juno 20120614-1722

谁能指出我解决这个问题的方向？

* * *

**更新：**

事实证明，Windows 7 UAC 在这里发挥了作用。我以为我以管理员身份运行 eclipse，但我没有。奇怪的是，Eclipse 试图安装更新但失败了，却没有提到它没有权限在没有管理权限的情况下更改文件。下次启动时，安装程​​序认为它已更新，但文件没有。

**解决方案：**

*   在管理员模式下运行（通过在快捷方式中将其设置为标准或关闭 UAC）
*   回滚到以前的安装（Help > About Eclipse > Installation Details > Installation History >（选择以前的安装）Revert ）
*   重启 Eclipse（一定要有管理员权限）
*   更新没有问题:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T12:54:32.540

您必须更新 eclipse 以使其支持最新的 ADT。为此，您必须选择帮助->安装新软件，然后使用此链接更新站点：[https](https://dl-ssl.google.com/android/eclipse/) ://dl-ssl.google.com/android/eclipse/ 。之后更新开发者工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T19:37:56.763

事实证明，Windows 7 UAC 在这里发挥了作用。我以为我以管理员身份运行 eclipse，但我没有。奇怪的是，Eclipse 试图安装更新但失败了，却没有提到它没有权限在没有管理权限的情况下更改文件。下次启动时，安装程​​序认为它已更新，但文件没有。

**解决方案：**

*   在管理员模式下运行（通过在快捷方式中将其设置为标准或关闭 UAC）
*   回滚到以前的安装（Help > About Eclipse > Installation Details > Installation History >（选择以前的安装）Revert ）
*   重启 Eclipse（一定要有管理员权限）
*   更新没有问题:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T18:10:09.483

正如凯文格兰特所说。我一一更新组件，它对我有用。

我的 Eclipse 是**Juno**版本：4.2.1 Build id：M20120914-1800 与 Fedora 17 一起安装。

我注意到我在“安装详细信息”的“已安装软件”选项卡中看不到广告。我不得不相信这是朱诺的错。因为我已经在其他运行 eclipse indigo 的工作站中为 eclipse 升级了 adt。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T16:33:03.697

我遇到了同样的问题。我按照您的建议做了很多事情，从插件/元数据/功能中删除了文件夹，似乎没有一个工作。我用谷歌搜索了如何卸载 ADT，在你卸载它的同一个地方，有一个更新它的按钮。

[卸载安卓 ADT](https://stackoverflow.com/questions/9097163/uninstalling-android-adt)

只需选择任何不是工具 21 的东西并单独更新它。为我工作（我从更新 ADT 开始）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T18:48:51.140

下面的答案[在](https://stackoverflow.com/a/13460374/922756)几台有这个问题的机器上对我有用，不需要卸载或任何其他猴子业务。

“转到 SDK 管理器并转到 FILE -> RELOAD 解决了问题”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-06T19:55:04.677

将 SDK Manager v21.0 更新到 v21.1 后遇到同样的问题。我已经尝试过建议的解决方案，但对我不起作用。但是我从 developer.android 网站本身找到了一个快速的解决方案，我按照您可以在[此处](http://developer.android.com/sdk/installing/installing-adt.html)找到的“疑难解答安装”部分进行操作。

快速预览解决方案： 1\. 下载 ADT Plugin zip 文件（不要解压）。2\. 启动 Eclipse，然后选择帮助 > 安装新软件。3\. 单击右上角的添加。4\. 在添加存储库对话框中，单击存档。5\. 选择下载的 ADT-21.1.0.zip 文件，点击确定。6\. 输入“ADT Plugin”作为名称，然后单击“确定”。7\. 在可用软件对话框中，选中开发人员工具旁边的复选框，然后单击下一步。（我添加，还要检查 NDK） 8\. 在下一个窗口中，您将看到要下载的工具列表。点击下一步。9\. 阅读并接受许可协议，然后单击完成。

如果您收到安全警告，提示无法确定软件的真实性或有效性，请单击“确定”。

1.  安装完成后，重新启动 Eclipse。

# ios - Use UIRefreshControl for UIWebView

> ID：13379815
> 
> 赞同：14
> 
> 时间：2012-11-14T13:33:58.023
> 
> 标签：ios, xcode, webview, ios6

I saw the UIRefreshControl in iOS 6 and my question is if it is possible to refresh a WebView by pulling it down and than let it pop up like in mail? Code I used rabih is the WebView:

```
UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
    [refreshControl addTarget:self action:@selector(handleRefresh:) forControlEvents:UIControlEventValueChanged];
    [rabih addSubview:rabih]; 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-05-02T20:36:28.617

这是您可以使用下拉刷新 UIWebview 的方式：

```
- (void)viewDidLoad
{
   [super viewDidLoad];
   // Do any additional setup after loading the view, typically from a nib.

   // Make webView a delegate to itself

   // I am going to add URL information
   NSString *fullURL = @"http://www.umutcankoseali.com/";
   NSURL *url = [NSURL URLWithString:fullURL];
   NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
   _webView.delegate = (id)self;
   [_webView loadRequest:requestObj];

   UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
   [refreshControl addTarget:self action:@selector(handleRefresh:) forControlEvents:UIControlEventValueChanged];
   [_webView.scrollView addSubview:refreshControl]; //<- this is point to use. Add "scrollView" property.
}

-(void)handleRefresh:(UIRefreshControl *)refresh {
   // Reload my data
   NSString *fullURL = @"http://www.umutcankoseali.com/";
   NSURL *url = [NSURL URLWithString:fullURL];
   NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
   [_webView loadRequest:requestObj];
   [refresh endRefreshing];
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-07T14:11:14.257

在**Swift**中使用这个，

假设您想在 WebView 中拉动刷新，

所以试试这个代码：

```
override func viewDidLoad() {
    super.viewDidLoad()
    addPullToRefreshToWebView()
}

func addPullToRefreshToWebView(){
    var refreshController:UIRefreshControl = UIRefreshControl()

    refreshController.bounds = CGRectMake(0, 50, refreshController.bounds.size.width, refreshController.bounds.size.height) // Change position of refresh view
    refreshController.addTarget(self, action: Selector("refreshWebView:"), forControlEvents: UIControlEvents.ValueChanged)
    refreshController.attributedTitle = NSAttributedString(string: "Pull down to refresh...")
    YourWebView.scrollView.addSubview(refreshController)

}

func refreshWebView(refresh:UIRefreshControl){
    YourWebView.reload()
    refresh.endRefreshing()
} 
```

在 Objective-C 中，我使用了这个：

```
- (void)addPullToRefreshToWebView{
    UIColor *whiteColor = [UIColor whiteColor];
    UIRefreshControl *refreshController = [UIRefreshControl new];
    NSString *string = @"Pull down to refresh...";
    NSDictionary *attributes = @{ NSForegroundColorAttributeName : whiteColor };
    NSAttributedString *attributedString = [[NSAttributedString alloc] initWithString:string attributes:attributes];
    refreshController.bounds = CGRectMake(0, 0, refreshController.bounds.size.width, refreshController.bounds.size.height);
    refreshController.attributedTitle = attributedString;
    [refreshController addTarget:self action:@selector(refreshWebView:) forControlEvents:UIControlEventValueChanged];
    [refreshController setTintColor:whiteColor];
    [self.webView.scrollView addSubview:refreshController];
}

- (void)refreshWebView:(UIRefreshControl*)refreshController{
    [self.webView reload];
    [refreshController endRefreshing];
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-07T17:46:09.240

我刚刚很快将其添加到我的代码中：

```
[webserver.scrollView addSubview:refreshControl] 
```

所以看起来它`UIWebView`本身就是一个`UIScrollView`你可以附加的东西。希望它对你有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-14T21:32:47.740

我实际上已经尝试过了，但出现了错误。

> ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“UIRefreshControl 只能由 UITableViewController 管理”

我可以在 UIScrollView 和 UICollectionView 中使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T13:38:01.890

现在我不相信它是。您实际上不能将它与任何 UITableView 一起使用。tableView 需要成为 UITableViewController 的一部分才能正确使用。

也就是说，您可能可以在 UIWebView 上方粘贴一个并手动控制其框架和值。UITableViewController 已更新为使用其 refreshControl 属性自行完成的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T13:52:08.493

看看[CKRefreshControl](https://github.com/instructure/CKRefreshControl)，您可以根据自己的需要进行自定义。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-11T00:02:50.897

我的答案基于@Zaid Pathan 的答案，但已针对 Swift 4 进行了更新。

```
class WebViewController: UIViewController, WKUIDelegate, WKNavigationDelegate {

var refreshController:UIRefreshControl!
var webView: WKWebView!

override func viewDidLoad() {
    super.viewDidLoad()
//Your webView initializing

    webView.scrollView.bounces = true //DONT FORGET IT!!!

    refreshController = UIRefreshControl()

    refreshController.bounds = CGRect(x: 0, y: 50, width: refreshController.bounds.size.width, height: refreshController.bounds.size.height)
    refreshController.addTarget(self, action: #selector(self.refreshWebView(refresh:)) , for: UIControlEvents.valueChanged)
    refreshController.tintColor = #colorLiteral(red: 1.0, green: 1.0, blue: 1.0, alpha: 1.0)
    webView.scrollView.addSubview(refreshController)
}

@objc func refreshWebView(refresh:UIRefreshControl){
    webView.reload()
} 
```

最后，不要忘记停止重新加载：

```
func webView(_ webView: WKWebView, didFinish navigation: WKNavigation!) {
    if refreshController.isRefreshing{
        refreshController.endRefreshing()
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-31T14:30:50.303

扩展 @umut-can-köseali 答案以在刷新结束时更好地控制 UIRefreshControl：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    _refreshControl = [[UIRefreshControl alloc] init];
    [_refreshControl addTarget:self action:@selector(handleWebViewRefresh:) forControlEvents:UIControlEventValueChanged];
    [self.webView.scrollView addSubview:_refreshControl]; //<- this is point to use. Add "scrollView" property.
}

- (void)webView:(UIWebView *)_webView didFailLoadWithError:(NSError *)error {
    [_refreshControl endRefreshing];
}

- (void)webViewDidFinishLoad:(UIWebView *)_webView {
    NSString *navigatorUrl = _webView.request.URL.absoluteString;
    if( navigatorUrl && ![navigatorUrl isEqualToString:@""]) {
        NSString *host=_webView.request.URL.host;
        NSString *path=_webView.request.URL.path;
        [_refreshControl endRefreshing];
    }
} 
```

# jquery - jquery最后添加的元素

> ID：13379816
> 
> 赞同：1
> 
> 时间：2012-11-14T13:34:10.533
> 
> 标签：jquery

我正在通过 jQuery 加载一些 HTML 元素：

考虑这种情况：

```
<li>test</li> (1)
<li>test</li> (2)
<li>test</li> (3) 
```

如果我做：

```
 $("body").find('li:last') 
```

我将得到最后一个 li 元素，即我标记为 (3) 的那个，如果我总是按顺序添加项目，那会很好。但是，如果我在两者之间添加一个新元素：

```
<li>test</li> (1)
<li>test</li> (2)
<li>test</li> (4)<-
<li>test</li> (3) 
```

:last 不会，因为我添加的元素不是列表中的最后一个。

我如何获得对（4）的参考？

编辑：请不要 eq() 解决方案，我需要它是动态的，我不能总是知道元素在上下文中的添加位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T13:37:07.517

没有内置方法可以知道添加的最后一个元素是什么。您必须自己跟踪它。

至少有几种方法可以做到这一点。

1.  您可以在代码中保留对它的引用。

2.  你可以使用一个[`data-*`属性](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-*-attributes)或一个类，然后再去寻找它，例如：

    ```
    // Get the last
    var last = $("[data-last]");

    // When adding
    $("[data-last]").removeAttr("data-last"); // clear from previous
    $(....).append(...).attr("data-last", 1); // set on the new one 
    ```

    或者

    ```
    // Get the last
    var last = $(".last");

    // When adding
    $(".last").removeClass("last");       // clear from previous
    $(....).append(...).addClass("last"); // set on the new one 
    ```

3.  ***（添加）***：由于只有**一个**“最后”元素，我认为[Armen](https://stackoverflow.com/a/13379983/157247)使用 an`id`是有道理的，尽管不是他这样做的方式。根本不需要计数器，只需使用`last`：

    ```
    // Get the last
    var list = $("#last");

    // When adding a new one
    $("#last").attr("id", "");
    $(...).append(...)[0].id = "last"; // Or .attr("id", "last"); 
    ```

我更喜欢~~#1~~ #3，但#1 和#2 有一些真实的用例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T13:37:19.800

添加最后一个元素时，您可以尝试添加一个类：

```
.addClass("lastAdd"); 
```

然后你会得到参考`$(".lastAdd")`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T13:37:38.640

只需将一些属性添加到您的“li”元素（例如 id）并按此属性值进行搜索。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T13:44:05.190

初始化新变量

```
var counter = 1; 
```

添加元素增量计数器后

```
$('<li id=newli' + counter +'>test</li>').appendTo('body');
counter++; 
```

当你可以得到那个项目时，打电话给：

```
var Id = $('#newli' + counter);
$(Id). 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T13:48:45.070

如果你真的需要 jQuery 来调用你按顺序插入的元素，你必须添加你自己的函数（你也可以改变它，但我不推荐它......）：

```
var inserted = [];
$.fn.insertBeforeAndRecall = function(){
    inserted.push(this);
    this.insertBefore(arguments);   
}
function getLastInserted() {
    return inserted[inserted.length-1];
} 
```

您可以通过调用`insertBeforeAndRecall`而不是`insertBefore`.

[示范](http://jsfiddle.net/dystroy/bXbc5/)

# python - 如何在 Python/Numpy 中矢量化一个简单的 for 循环

> ID：13379823
> 
> 赞同：6
> 
> 时间：2012-11-14T13:34:26.330
> 
> 标签：python, numpy, scipy, vectorization

我发现了许多如何在 Python/NumPy 中矢量化 for 循环的示例。不幸的是，我不知道如何使用矢量化形式减少我的简单 for 循环的计算时间。在这种情况下甚至可能吗？

```
time = np.zeros(185000)
lat1 = np.array(([48.78,47.45],[38.56,39.53],...)) # ~ 200000 rows
lat2 = np.array(([7.78,5.45],[7.56,5.53],...)) # same number of rows as time
for ii in np.arange(len(time)):
    pos = np.argwhere( (lat1[:,0]==lat2[ii,0]) and \
                       (lat1[:,1]==lat2[ii,1]) )
    if pos.size:
        pos = int(pos)
        time[ii] = dtime[pos] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:13:21.853

这是一个解决方案。我不确定是否可以对其进行矢量化。如果你想让它抵抗“浮动比较错误”，你应该修改`is_less`和`is_greater`. 整个算法只是一个二分搜索。

```
import numpy as np

#lexicographicaly compare two points - a and b

def is_less(a, b):
    i = 0
    while i<len(a):
        if a[i]<b[i]:
            return True
        else:
            if a[i]>b[i]:
                return False
        i+=1
    return False

def is_greater(a, b):
    i = 0
    while i<len(a):
        if a[i]>b[i]:
            return True
        else:
            if a[i]<b[i]:
                return False
        i+=1
    return False

def binary_search(a, x, lo=0, hi=None):
    if hi is None:
        hi = len(a)
    while lo < hi:
        mid = (lo+hi)//2
        midval = a[mid]
        if is_less(midval, x):
            lo = mid+1
        elif is_greater(midval, x):
            hi = mid
        else:
            return mid
    return -1

def lex_sort(v): #sort by 1 and 2 column respectively
    #return v[np.lexsort((v[:,2],v[:,1]))]
    order = range(1, v.shape[1])
    return v[np.lexsort(tuple(v[:,i] for i in order[::-1]))]

def sort_and_index(arr):
    ind = np.indices((len(arr),)).reshape((len(arr), 1))
    arr = np.hstack([ind, arr]) # add an index column as first column
    arr = lex_sort(arr)
    arr_cut = arr[:,1:] # an array to do binary search in
    arr_ind = arr[:,:1] # shuffled indices
    return arr_ind, arr_cut

#lat1 = np.array(([1,2,3], [3,4,5], [5,6,7], [7,8,9])) # ~ 200000 rows
lat1 = np.arange(1,800001,1).reshape((200000,4))
#lat2 = np.array(([3,4,5], [5,6,7], [7,8,9], [1,2,3])) # same number of rows as time
lat2 = np.arange(101,800101,1).reshape((200000,4))

lat1_ind, lat1_cut = sort_and_index(lat1)

time_arr = np.zeros(200000)
import time
start = time.time()

for ii, elem in enumerate(lat2):
    pos = binary_search(lat1_cut, elem)
    if pos == -1:
        #Not found
        continue
    pos = lat1_ind[pos][0]
    #print "element in lat2 with index",ii,"has position",pos,"in lat1"
print time.time()-start 
```

注释打印是您拥有 lat1 和 lat2 相应索引的地方。在 200000 行上工作 7 秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T08:05:42.423

找到所有匹配项的最快方法可能是对两个数组进行排序并一起遍历它们，就像这个工作示例：

```
import numpy as np

def is_less(a, b):
    # this ugliness is needed because we want to compare lexicographically same as np.lexsort(), from the last column backward
    for i in range(len(a)-1, -1, -1):
        if a[i]<b[i]: return True
        elif a[i]>b[i]: return False
    return False

def is_equal(a, b):
    for i in range(len(a)):
        if a[i] != b[i]: return False
    return True

# lat1 = np.array(([48.78,47.45],[38.56,39.53]))
# lat2 = np.array(([7.78,5.45],[48.78,47.45],[7.56,5.53]))
lat1 = np.load('arr.npy')
lat2 = np.load('refarr.npy')

idx1 = np.lexsort( lat1.transpose() )
idx2 = np.lexsort( lat2.transpose() )
ii = 0
jj = 0
while ii < len(idx1) and jj < len(idx2):
    a = lat1[ idx1[ii] , : ]
    b = lat2[ idx2[jj] , : ]
    if is_equal( a, b ):
        # do stuff with match
        print "match found: lat1=%s lat2=%s %d and %d" % ( repr(a), repr(b), idx1[ii], idx2[jj] )
        ii += 1
        jj += 1
    elif is_less( a, b ):
        ii += 1
    else:
        jj += 1 
```

这可能不是完美的pythonic（也许有人可以想到使用生成器或itertools 更好的实现？）但是很难想象任何依赖于一次搜索一个点的方法会在速度上击败它。

# java - Use Solrj in java exception

> ID：13379825
> 
> 赞同：1
> 
> 时间：2012-11-14T13:34:37.433
> 
> 标签：java, apache, solr

I wanna use Solrj in netbeans, I write this code:

```
import org.apache.solr.client.solrj.SolrServerException;
import org.apache.solr.client.solrj.impl.CommonsHttpSolrServer;
import org.apache.solr.common.SolrInputDocument;

import java.io.IOException;

public class SolrjPopulator {
  public static void main(String[] args) throws IOException, SolrServerException {
    CommonsHttpSolrServer server = new CommonsHttpSolrServer("http://localhost:8983/solr");
    for(int i=0;i<1000;++i) {
      SolrInputDocument doc = new SolrInputDocument();
      doc.addField("cat", "book");
      doc.addField("id", "book-" + i);
      doc.addField("name", "The Legend of Po part " + i);
      server.add(doc);
      if(i%100==0) server.commit();  // periodically flush
    }
    server.commit(); 
  }
} 
```

When I run example I get this exeption:

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/httpclient/HttpConnectionManager 
```

Why my code didn't work? What I have to do?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:39:04.687

将缺少的库添加到用于执行应用程序的类路径中。[jar-finder 有一些包含此类](http://www.jarfinder.com/index.php/java/info/org.apache.commons.httpclient.HttpConnectionManager)的库，它可能是 commons-httpclient。

# php - How to manipulate data when the website is in 3 languages?

> ID：13379826
> 
> 赞同：0
> 
> 时间：2012-11-14T13:34:40.753
> 
> 标签：php, mysql, database-design

I will develop a website using the bellows tools:

Joomla ,Mysql,wampserver (I will code with PHP).

A user (according to the privileges) should choose the language then he can:

-Subscribe in our website (by filling a form name, last name, gender, profession, field of activity..)

-Search a list of the subscriber by choosing multiple criteria.

My question is :

The website will be in 3 languages, when some persons fill the form in English so the data stored will be in English and others in French also the data will stored in French. How can I manipulate data with different languages?

Example:

For the research if a user (logged by choosing English languages) choose the gender for example “female”, so the result should be a list of all the persons subscribed, subscribed in English and in French.

How can I do that? Please I want help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:38:54.190

您用于在后端存储数据的语言取决于您。在您的示例中，您可以简单地拥有一个名为性别的字段，其值为男性或女性的 m 或 f。前端网站代码需要以您的 3 种语言之一显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:39:56.573

我不知道 Joomla 具体是如何处理多语言网站的，但是，如果您需要重新编写代码，那么只需使用一个常量并为其分配不同的关键词。

```
+---------+--------+----------+-----------+
| cont_id | en     | fr       | sp        |
+---------+--------+----------+-----------+
| FEMALE  | Female | Féminin  | Femenino  |
| MALE    | Male   | Masculin | Masculino |
+---------+--------+----------+-----------+ 
```

通过这种方式，您将能够准确地整理出您需要的内容，并使用客户选择的语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T13:45:22.647

通常，国际化应用程序的所有内容都以单一语言编码 - 在这里使用“编码”，我确实包含了呈现给用户的 Web 模板和消息。这些应该被特别标记，以便它们被您的框架识别为可翻译

他们的项目使用了国际化框架，例如 gettext - [http://php.net/manual/en/book.gettext.php](http://php.net/manual/en/book.gettext.php) - 它允许剥离字符串以翻译成 .pot 文件 - 这些是唯一的东西翻译者需要编辑，并且翻译在运行时被插入回来。

你必须弄清楚你的翻译框架应该如何与你的网页模板一起工作——也许 Joomla 已经为此做好了准备。

至于您的数据，您必须将程序“看起来”的所有数据保存在一个语言中 - 通常是英语（即使对于在世界非英语母语地区开发的软件）。呈现给用户的是翻译后的字符串 - 但存储在数据库中并由您的应用程序比较的值都应该是英文的 - （因此，html标签等`<option`具有“值”条目，与标记内容）

# visual-studio-2012 - 管理用于解决方案的 NuGet 包 - 它在哪里？

> ID：13379828
> 
> 赞同：5
> 
> 时间：2012-11-14T13:34:43.623
> 
> 标签：visual-studio-2012, nuget, nuget-package

我刚刚安装`VS2012`并注意到在缺少的`Tools >> Library Package Manager`选项中。`Manage NuGet Packages For Solution`

`Package Manager Console`并且`Package Manager Settings`可用，但我提到的选项不存在。

我试图下载[Nuget](http://nuget.org/)然后重新启动`VS2012`，但没有任何改变。

另外，当我安装时，`Vistual Studio`我包含了所有可用的库，所以我不确定我是怎么错过的？

谁能告诉我如何获得`Manage NuGet Packages`选项`VS2012`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T13:37:45.970

我不知道你是否可以不打开解决方案。转到 后`Solution Explorer`，右键单击解决方案，然后选择`Manage NuGet Packages for Solution`. 打开解决方案还会在`Tools`-> `Library Package Manager`:`Manage NuGet Packages for Solution`和`Package Visualizer`.

**编辑**

正如@atconway 在评论中所说，调试时不能这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-08T20:21:32.363

您必须将其置于调试模式，如果您正在调试，请停止，您将在列表中看到“管理 NuGet 包以获取解决方案”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-16T18:20:05.130

在工具菜单上，单击扩展和更新。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-31T15:11:55.497

您可能处于调试模式（应用程序可能正在运行）。

去

> 调试-> 停止调试

现在您将能够在下面看到“为解决方案管理 NuGet 包”

> 工具> NuGet 包管理器> 管理解决方案的 NuGet 包

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-27T07:56:19.640

工具 > 扩展管理器 > 在线图库；您将看到“为解决方案管理 NuGet 包”并按下载。下载完成后，先保存你的项目，然后重启你的Visual Studio，就这样。

# c# - JSON-Parser for Unity3D and Flash

> ID：13379830
> 
> 赞同：3
> 
> 时间：2012-11-14T13:34:48.400
> 
> 标签：c#, json, flash, parsing, unity3d

currently i am implementing an application in Unity3D (C#) that will be exported to Flash and WebPlayer Version. The Application uses JSON to communicate with the server. My question is: is there any JSON-Parser that works in Unity WebPlayer AND Flash?? i tried [MiniJSON Flash Version](https://gist.github.com/1601919) already. After spending hours to make it to a clean export it decodes JSON in UnityWebPlayer but returns NULL in Flash. Is there any other way to parse a JSON string in Unity WebPlayer and Flash? Or is there another JSON-Parser that works in Flash too? I really searched a lot but either the people provide links to MiniJSON or suggest to wait for Unity3D version 4.0. I even tried the Proxy-Class feature of unity3D but couldnt get to run it on Flash side. Maybe someone could provide an example for it?

Thanks very much

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:04:14.153

任何用 C# 编写的 JSON 库都不可能与 Unity 的 flash 导出（如果您希望在客户端使用强类型对象）一起使用，因为某些关键的 .net 反射片段不受支持，即使在官方 4.0 版本中也是如此。我要求 Unity 批准一个支持的 JSON 解析器，该解析器可以在桌面、网络播放器和 Flash 中使用，但这个版本并没有发生。

我最终在客户端使用本机 AS3 字符串化和解析方法，在服务器端使用 JSON.net。棘手的部分是补偿 Unity 在将 C# 转换为 ActionScript 时所做的名称修改。通过使用一些标准方法来覆盖解析和序列化 JSON 字符串，使用大量的 describeType()，我能够在不进行硬编码的情况下完成这项工作。由于他们的网络播放器支持 JSON.net，我可以使用一些 #if FLASH 编译指示来使两者都能正常工作，具体取决于构建目标。

所以....这是可能的，也许我已经为你做了很多艰苦的工作。如果你想要一些例子，请告诉我。

- 托盘杂草

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:35:05.743

我在 Unity 中使用[LitJSON，不久前](http://wiki.unity3d.com/index.php?title=UnityLitJSON)我构建了一个用于测试目的的网络播放器版本时没有任何问题。我没有使用 Flash 播放器的经验，但根据这个演示[Unity 和 Flash，两全其美！- Unite 演示幻灯片](http://www.slideshare.net/paultondeur/unity-and-flash-the-best-of-both-worlds-unite-presentation-slides)第 18 页。它应该完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:30:28.760

试试这个：[https ://github.com/ironmagma/jsonparse](https://github.com/ironmagma/jsonparse)

它完全用 UnityScript 编写。可能它在 Flash 导出中有所帮助和工作。但我没有测试它。

# c# - 我可以先用 EF 代码关闭这种链接行为吗？

> ID：13379832
> 
> 赞同：0
> 
> 时间：2012-11-14T13:34:49.433
> 
> 标签：c#, entity-framework

不确定我是否误解了 EF 代码首先如何工作或设置错误。我创建了一个包含许多 ChartResults 的图表 POCO。简单的一对多。

当我做

```
Chart myChart = new Chart();
myChart.ChartResults.Add(new ChartResult(){Pos=1});
myChart.ChartResults.Add(new ChartResult(){Pos=2});
context.Charts.Add(myChart);
context.Save(); 
```

我添加了一个图表，然后它撕开了所有图表结果并将其也添加到数据库中。我确定这非常聪明，但问题出在 chartResults 上，有时我想添加，有时我想简单地更新参考。但是我如何在没有以下情况下实现这一目标：

```
1) going through each Chart and adding it to a new object that is unlinked
2) then going through each ChartResult and explicitely deciding what to do/not do? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:43:48.260

如果您知道`chartresults`要添加哪个以及要更新哪个，那么您可以加载`chart`并添加所有新`chartresult`实例。然后您可以查询现有的`chartresults`并单独更新它们。

或者您可以遍历`chartresults`并确定是否需要添加或更新实体。

顺便说一句：如果 EF 是通过 EDMX 或代码首先映射的，这无关紧要。这只是您与实体交互的方式，而不是如何映射实体。

# symfony - Symfony 2 CSFR 保护和主干应用

> ID：13379837
> 
> 赞同：2
> 
> 时间：2012-11-14T13:34:54.000
> 
> 标签：symfony, backbone.js, csrf-protection

我在 Symfony 2 上有一个 CRUD 控制器。我想为这个控制器制作一个主干应用程序包装器。但是在应用的逻辑中存在一个问题：**“如何对主干表单应用实现 CSRF 保护？”**

我看到了几种方法：

1.  在生成表单之前请求令牌。
2.  生成包含标记的下划线模板。
3.  在 Symfony 中禁用保护并发明你的自行车。

我很高兴您能帮助我选择正确的解决方案来解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:41:40.217

对不起，我急忙回答这个问题。这是我自己的[解决方案](https://stackoverflow.com/questions/10386373/csrf-defense-using-backbone-and-node-js)
我想将解决方案添加到 Symfony 服务器端：

```
$options=array();
if ($request->isXmlHttpRequest() )         
    $options['csrf_protection']= false;
$form = $this->createForm(new FormType(), $entity,$options); 
```

# python - 从python中的PKCS7信封中提取userCertificate

> ID：13379846
> 
> 赞同：5
> 
> 时间：2012-11-14T13:35:54.230
> 
> 标签：python, x509, m2crypto, pkcs#7

好的，我正在尝试使用 Python 验证来自 PKCS7 信封的数据。

我有 Java 中的工作代码：http: [//nyal.developpez.com/tutoriel/java/bouncycastle/#L4.2](http://nyal.developpez.com/tutoriel/java/bouncycastle/#L4.2)

我想要的是首先从信封中获取证书。

我可以使用该命令打开它：

```
openssl pkcs7 -in pkcs7 -print_certs -text 
```

然后我想验证数据是否正常。

我试过这个：

```
import base64
from M2Crypto import SMIME, X509, BIO

raw_sig = """base64 PKCS7 envelop"""
msg = "challenge message to verify"

sm_obj = SMIME.SMIME()
x509 = X509.load_cert('/etc/ssl/certs/ca-certificates.crt') # public key cert used by the remote
# client when signing the message
sk = X509.X509_Stack()
sk.push(x509)
sm_obj.set_x509_stack(sk)

st = X509.X509_Store()
st.load_info('/etc/ssl/certs/ca-certificates.crt') # Public cert for the CA which signed
# the above certificate
sm_obj.set_x509_store(st)

# re-wrap signature so that it fits base64 standards
cooked_sig = '\n'.join(raw_sig[pos:pos+76] for pos in xrange(0, len(raw_sig), 76))

# now, wrap the signature in a PKCS7 block
sig = """
-----BEGIN PKCS7-----
%s
-----END PKCS7-----
""" % cooked_sig

# print sig

# and load it into an SMIME p7 object through the BIO I/O buffer:
buf = BIO.MemoryBuffer(sig)
p7 = SMIME.load_pkcs7_bio(buf)

# do the same for the message text
data_bio = BIO.MemoryBuffer(msg)

cert = sm_obj.verify(p7, data_bio) 
```

我认为 /etc/ssl/certs/ca-certificates.crt 之一应该是 userCertificate。

获得证书后，我想检查它是否仍然有效（使用有效期）并根据 CRL 和 CPS 对其进行验证以进行撤销。

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T15:09:48.113

所以我几乎就在那里：

```
import base64
from M2Crypto import SMIME, X509, BIO

raw_sig = """base64 PKCS7 envelop"""
msg = "challenge message to verify"

sm_obj = SMIME.SMIME()
x509 = X509.load_cert('ISSUER.crt') # public key cert used by the remote
                                             # client when signing the message
sk = X509.X509_Stack()
sk.push(x509)
sm_obj.set_x509_stack(sk)

st = X509.X509_Store()
st.load_info('ROOT.crt') # Public cert for the CA which signed
                                    # the above certificate
sm_obj.set_x509_store(st)

# re-wrap signature so that it fits base64 standards
cooked_sig = '\n'.join(raw_sig[pos:pos+76] for pos in xrange(0, len(raw_sig), 76))

# now, wrap the signature in a PKCS7 block
sig = """
-----BEGIN PKCS7-----
%s
-----END PKCS7-----
""" % cooked_sig

# print sig

# and load it into an SMIME p7 object through the BIO I/O buffer:
buf = BIO.MemoryBuffer(sig)
p7 = SMIME.load_pkcs7_bio(buf)

signers = p7.get0_signers(sk)
certificat = signers[0] 
```

那么您可能还对 CRL 和 OCSP 验证感兴趣：

```
from os.path import basename
import re
from tempfile import NamedTemporaryFile

try:
    from subprocess import check_output, CalledProcessError, STDOUT
except ImportError:  # check_output new in 2.7, so use a backport for <=2.6
    from subprocess32 import check_output, CalledProcessError, STDOUT

class OpenSSLError(Exception):
    pass

def info_extension_cert(cert):
    """
    This function take a certificate and return the extensions in dict.

    @type cert : M2Crypto.X509
    @param cert : Certificate
    """
    certificateExtensions = {}

    for index in range(cert.get_ext_count()):
        ext = cert.get_ext_at(index)
        certificateExtensions[ext.get_name()] = ext.get_value()
    return certificateExtensions

def get_cert_url_ocsp(cert):
    """
    Get the OCSP url of a certificate

    @type cert : M2Crypto.X509
    @parm cert : Certificat

    @rtype : string
    @return : The OSCP url
    """

    infos = [x.strip() for x in info_extension_cert(cert)["authorityInfoAccess"].split('\n')]
    ocsp_url = None
    for info in infos:
        if re.match(r"^OCSP - URI:", info):
            ocsp_url = info.replace("OCSP - URI:","")
            break
    return ocsp_url.strip()

def is_revoked(cert, cert_parent):
    """
    Check if the certificate has been revoked.

    @type cert : M2Crypto.X509
    @param cert : The certificate

    @type cert_parent : string
    @param cert_parent : Issuer certificate file path

    @rtype : boolean
    @return : True if revoked or False
    """
    ocsp_url = get_cert_url_ocsp(cert)
    if re.match(r"^http", ocsp_url) is None:
        return False

    data = {'cert_parent': cert_parent,
            'ocsp_url': ocsp_url,
            'serial': cert.get_serial_number()}

    cmd = "openssl ocsp -issuer %(cert_parent)s -CAfile %(cert_parent)s -url %(ocsp_url)s -serial %(serial)s" % data
    print cmd
    try:
        output = check_output(cmd, shell=True, stderr=STDOUT).lower()
    except CalledProcessError, e:
        msg = u"[OpenSSL] Error while checking ocsp %s: %s. Output: %r" % (
                    cmd, e, e.output)
        raise OpenSSLError(msg)
    return not ('response verify ok' in output and '%s: good' % data['serial'] in output)

def is_revoked_crl(cert, cert_parent_with_crl):
    """
    Check if the certificate as been revoked with the crl.

    @type cert : M2Crypto.X509
    @param cert : The certificate

    @type cert_parent : string
    @param cert_parent : Issuer certificate file path

    @rtype : boolean
    @return : True if revoked or False
    """
    tmp_file = NamedTemporaryFile(prefix='cert')
    cert.save(tmp_file.name)
    data = {'cert': tmp_file.name,
            'cert_parent_with_crl': cert_parent_with_crl}
    cmd = "openssl verify -crl_check -CAfile %(cert_parent_with_crl)s %(cert)s" % data
    print cmd
    try:
        output = check_output(cmd, shell=True, stderr=STDOUT).lower()
    except CalledProcessError, e:
        msg = u"[OpenSSL] Error while checking ocsp %s: %s. Output: %r" % (
                    cmd, e, e.output)
        raise OpenSSLError(msg)
    print output
    return '%s: ok' % data['cert'] not in output

def get_cert_url_crl(cert):
    """
    Return the crl url from the certificate

    @type cert : M2Crypto.X509
    @parm cert : Certificate

    @rtype : string
    @return : CRL url
    """

    infos = [x.strip() for x in info_extension_cert(cert)["crlDistributionPoints"].split('\n')]
    crl_url = None
    for info in infos:
        print info
        if re.match(r"^URI:", info):
            crl_url = info.replace("URI:","")
            break
    return crl_url.strip() 
```

`cert_parent`是 ROOT.crt 和 ISSUER.crt 连接在一起的文件。 `cert_parent_crl`是 ROOT.crt、ISSUER.crt 和 CRL 连接在一起的文件。

要将 CRL 与我使用的其他证书连接起来：

```
rm FILE.crl
wget http://URL/FILE.crl
cat ROOT_ISSUER.crt > ROOT_ISSUER_CRL.crt
echo "-----BEGIN X509 CRL-----" >> ROOT_ISSUER_CRL.crt
openssl enc -base64 -in FILE.crl >> ROOT_ISSUER_CRL.crt
echo "-----END X509 CRL-----" >> ROOT_ISSUER_CRL.crt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-06T07:58:46.637

也试试[https://github.com/erny/pyx509](https://github.com/erny/pyx509)。这需要 pyasn1 & pyasn1-modules。它只是python：

```
./pkcs7_parse <pkcs7 signature in DER format> 
```

# java - 将泛型类转换为 Java Web 服务的 XML 模式

> ID：13379848
> 
> 赞同：0
> 
> 时间：2012-11-14T13:36:04.383
> 
> 标签：java, web-services, jaxb, jax-ws

在我的应用程序中，我有许多带有分页的表，因此我创建了一个类来保存部分结果列表和分页查询的结果总数：

```
@XmlRootElement(name = "paginatedList")
public class PaginatedList<T> implements Serializable {
    private List<T> results;
    private Integer totalSize;

    @XmlElement(name = "result")
    public List<T> getResults() {
        return this.results;
    }

    @XmlElement(name = "totalSize")
    public int getTotalSize() {
        return totalSize;
    }

    // Setters, constructors, etc.
} 
```

然后我将以下方法公开给 EJB：

```
PaginatedList<EmployeeType> getPaginatedList(); 
```

此外，我用 Web 服务公开了这个方法。但是为 Web 服务响应生成的 XSD 会丢失类型信息 ( `EmployeeType`)：

```
<xs:complexType name="getPaginatedListResponse">
    <xs:sequence>
       <xs:element name="return" type="tns:paginatedList" minOccurs="0"/>
    </xs:sequence>
</xs:complexType>
<xs:complexType name="paginatedList">
    <xs:sequence>
       <xs:element name="result" type="xs:anyType" minOccurs="0" maxOccurs="unbounded"/>
       <xs:element name="totalSize" type="xs:int"/>
    </xs:sequence>
</xs:complexType> 
```

我知道这可能是由于类型擦除而发生的，但如果我只返回如下列表：

```
List<EmployeeType> getList(); 
```

我得到了一个更好的 XSD：

```
<xs:complexType name="getListResponse">
    <xs:sequence>
        <xs:element name="return" type="tns:employeeType" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
</xs:complexType>

<xs:complexType name="employeeType">
    <xs:sequence>
        <xs:element name="id" type="xs:int" minOccurs="0"/>
        <xs:element name="name" type="xs:string" minOccurs="0"/>
    </xs:sequence>
</xs:complexType> 
```

所以问题是这样的：我应该怎么做才能不丢失我的网络服务响应中的类型信息？为了“模拟” List 的 XSD 生成，我应该做任何 JAXB 魔术吗？欢迎任何建议。

如果有什么不同，我正在使用 Weblogic 10.3 来部署我的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T01:12:39.460

只是一个疯狂的猜测 - 制作`PaginatedList`到一个界面会有所作为吗？

因此，使接口`IPaginatedList<T>`具有`IPaginatedList<EmployeeType> getPaginatedList();`并且具有`public class PaginatedList<T> implements Serializable, IPaginatedList`（或将您的类重命名为`PaginatedListImpl<T> implements Serializable, IPaginatedList`并将 PaginatedList 保留为接口 - 更容易更改（可能是第二个））

# linux - 根据文件中出现的次数对条目进行排序

> ID：13379851
> 
> 赞同：0
> 
> 时间：2012-11-14T13:36:36.333
> 
> 标签：linux, file-io, awk

我的 tab-del 文件中的一些条目是单例的，一些是成对的，我想使用一些 Unix 命令行根据出现的次数拆分我的文件。

这是一个例子

```
1789:ST65:17  77 * ggfegZPPXX]][][_cbbcaefecbVcbb]aY^BBBBBBBBBBBBBBBB
1789:ST65:17  141 * ggbggggagedde^degdggaedebda`aedaaedcecdaa\bdSW\_T
1789:ST65:99  77 * ffcddcMdcdeebeeXecce_``]Pcfd]`aZ_bbK\`aUZZYP]`bb^b
1789:ST65:99  141 * gggggggegggfegggggg`ggeegebgfgeaggeedfeM^`K^`BBBBB
1789:ST65:173  77 * ggfegZPPXX]][][_cbbcaefecbVcbb]aY^BBBBBBBBBBBBBBBB
1789:ST65:201  77 * eacegZPPXX]][][_cbbcaef121cacc]aY^BBBBBBBBBBBBBBBB
1789:ST65:201  141 * ggbggggeeacaaadggaedebda`aedaaedcecdaa\bdSW\_T 
```

在这个简单的例子中，我想要第一个文件配对条目包含

```
1789:ST65:17  77 * ggfegZPPXX]][][_cbbcaefecbVcbb]aY^BBBBBBBBBBBBBBBB
1789:ST65:17  141 * ggbggggagedde^degdggaedebda`aedaaedcecdaa\bdSW\_T
1789:ST65:99  77 * ffcddcMdcdeebeeXecce_``]Pcfd]`aZ_bbK\`aUZZYP]`bb^b
1789:ST65:99  141 * gggggggegggfegggggg`ggeegebgfgeaggeedfeM^`K^`BBB.
1789:ST65:201  77 * eacegZPPXX]][][_cbbcaef121cacc]aY^BBBBBBBBBBBBBBBB
1789:ST65:201  141 * ggbggggeeacaaadggaedebda`aedaaedcecdaa\bdSW\_T 
```

和另一个只包含单例的文件：

```
1789:ST65:173  77 * ggfegZPPXX]][][_cbbcaefecbVcbb]aY^BBBBBBBBBBBBBBBB 
```

我尝试使用`uniq`或`awk`但我现在迷路了。你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:40:46.483

用于`uniq`执行此操作：

```
# Duplicates 
$ uniq -D -w 13 file.txt > duplicates.txt

1789:ST65:17  77 * ggfegZPPXX]][][_cbbcaefecbVcbb]aY^BBBBBBBBBBBBBBBB
1789:ST65:17  141 * ggbggggagedde^degdggaedebda`aedaaedcecdaa\bdSW\_T
1789:ST65:99  77 * ffcddcMdcdeebeeXecce_``]Pcfd]`aZ_bbK\`aUZZYP]`bb^b
1789:ST65:99  141 * gggggggegggfegggggg`ggeegebgfgeaggeedfeM^`K^`BBBBB
1789:ST65:201  77 * eacegZPPXX]][][_cbbcaef121cacc]aY^BBBBBBBBBBBBBBBB
1789:ST65:201  141 * ggbggggeeacaaadggaedebda`aedaaedcecdaa\bdSW\_T 
```

* * *

```
# Singletons 
$ uniq -u -w 13 file.txt > singletons.txt

1789:ST65:173  77 * ggfegZPPXX]][][_cbbcaefecbVcbb]aY^BBBBBBBBBBBBBBBB 
```

选项：

`-u`打印所有唯一行

`-D`打印所有重复的行

`-w`比较不超过 N 个字符

* * *

*注意：如果列未对齐并且第一列中最长和最短字符串之间的差异大于 1（给定第一列和第二列之间的两个空格），则存在缺陷。*

一个简单的解决方案是使用`column -t`对齐列：

`column -t file.txt | uniq -u -w 13 > singletons.txt`

只要记住将最长字符串的长度`-w 13`增加到`-w L`哪里。`L`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T14:02:58.873

一种使用方式`awk`：

```
awk 'FNR==NR { array[$1]++; next } { print > (array[$1]==2 ? "pairs" : "singletons") }' file.txt file.txt 
```

名为“pairs”的文件的内容：

```
1789:ST65:17  77 * ggfegZPPXX]][][_cbbcaefecbVcbb]aY^BBBBBBBBBBBBBBBB
1789:ST65:17  141 * ggbggggagedde^degdggaedebda`aedaaedcecdaa\bdSW\_T
1789:ST65:99  77 * ffcddcMdcdeebeeXecce_``]Pcfd]`aZ_bbK\`aUZZYP]`bb^b
1789:ST65:99  141 * gggggggegggfegggggg`ggeegebgfgeaggeedfeM^`K^`BBBBB
1789:ST65:201  77 * eacegZPPXX]][][_cbbcaef121cacc]aY^BBBBBBBBBBBBBBBB
1789:ST65:201  141 * ggbggggeeacaaadggaedebda`aedaaedcecdaa\bdSW\_T 
```

名为“单例”的文件的内容：

```
1789:ST65:173  77 * ggfegZPPXX]][][_cbbcaefecbVcbb]aY^BBBBBBBBBBBBBBBB 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T16:25:44.607

使用 awk 的一次性方法：

```
awk '
!seen[$1]++ {
   solo[$1] = $0 ORS
   next
}
{
   print solo[$1] $0 > "pairs"
   delete solo[$1]
}
END {
   for (key in solo) {
      printf "%s", solo[key] > "singletons"
   }
}
' file 
```

# xml - 使用 XSLT 对 XML 节点进行并行迭代

> ID：13379853
> 
> 赞同：1
> 
> 时间：2012-11-14T13:36:40.060
> 
> 标签：xml, xslt, xslt-1.0

我有一个这样的 XML：

```
<xml>
    <node1>1.1</node1>
    <node1>1.2</node1>
    <node1>1.3</node1>

    <node2>2.1</node2>
    <node2>2.2</node2>
    <node2>2.3</node2>

    <node3>3.1</node3>
    <node3>3.2</node3>
    <node3>3.3</node3>
</xml> 
```

我想得到以下输出：
line: 1.1 + 2.1 + 3.1
line: 1.2 + 2.2 + 3.2
line: 1.3 + 2.3 + 3.3

有没有一种方法可以同时遍历这些节点并跟踪我在三个列表中的每一个中的当前位置，或者我是否必须将这些项目包装到一个更大的块中并遍历块？

我正在使用 XSL 1.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:57:05.317

**就这么简单**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node1">
   <xsl:variable name="vPos" select="position()"/>
     <xsl:value-of select=". + ../node2[$vPos] + ../node3[$vPos]"/>
     <xsl:text>&#xA;</xsl:text>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时（基于提供的文档）：**

```
<xml>
    <node1>1</node1>
    <node1>2</node1>
    <node1>3</node1>

    <node2>4</node2>
    <node2>5</node2>
    <node2>6</node2>

    <node3>7</node3>
    <node3>8</node3>
    <node3>9</node3>
</xml> 
```

**产生了想要的正确结果**：

```
12
15
18 
```

**请注意**：

1.  在 XSLT 1.0 和 XSLT 2.0 中，可以使用**[FXSL](http://fxsl.sf.net)**模板/函数**[`zip-with3()`](http://fxsl.cvs.sourceforge.net/viewvc/fxsl/fxsl-xslt2/f/func-zipWith3.xsl?revision=1.1&view=markup)**。

2.  在 XPath 3.0 (XSLT 3.0) 中会有一个标准函数[**`map-pairs()`**](http://www.w3.org/TR/xpath-functions-30/#func-map-pairs)，但是没有`map-tripples()`标准函数。可以使用此函数生成中间结果，然后再次使用它来生成最终结果。

3.  正如 Ian Roberts 所指出的`xsl:strip-space`，此解决方案中的存在很重要 - 没有它，`position()`函数会产生不同的结果，并且转换不会按要求执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:42:44.280

我认为 XSLT 中没有内置的方法可以做到这一点。我想您可以通过应用[MapReduce](http://en.wikipedia.org/wiki/MapReduce)技术轻松地自己实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:09:59.270

我认为以下内容可以完成工作（与元素的子元素的数量和名称无关`xml`）：

```
<xsl:stylesheet 
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="text"/>

<xsl:key name="name" match="xml/*" use="local-name()"/>

<xsl:variable name="first" select="xml/*[generate-id() = generate-id(key('name', local-name())[1])]"/>

<xsl:template match="xml">
  <xsl:apply-templates select="$first[1]" mode="init"/>
</xsl:template>

<xsl:template match="xml/*" mode="init">
  <xsl:apply-templates select="key('name', local-name())" mode="line"/>
</xsl:template>

<xsl:template match="xml/*" mode="line">
  <xsl:variable name="pos" select="position()"/>
  <xsl:text>line: </xsl:text>
  <xsl:for-each select="$first">
    <xsl:if test="position() > 1"><xsl:text> + </xsl:text></xsl:if>
    <xsl:apply-templates select="key('name', local-name())[$pos]"/>
  </xsl:for-each>
  <xsl:text>&#10;</xsl:text>
</xsl:template>

<xsl:template match="xml/*">
  <xsl:value-of select="."/>
</xsl:template>

</xsl:stylesheet> 
```

# symfony - 如何呈现表单集合

> ID：13379862
> 
> 赞同：0
> 
> 时间：2012-11-14T13:37:11.137
> 
> 标签：symfony, twig, symfony-forms, symfony-2.1

我在 Twig 中渲染表单时遇到问题。我正在尝试嵌入一组表单。当我渲染集合时，它没有显示，而显示了表单的名称。目的是制作带有添加按钮的表单，以便在运行时为集合的每个元素添加表单。我看了一下 Symfony Docs，我想我是一步一步地跟着它的。

这是我的控制器：

```
function new_resultAction($id)
{
    $em = $this->getDoctrine()->getEntityManager();

    $test = $em->getRepository('LadelaOdeskTesterBundle:Test')->find($id);
    $categories =  
      $em->getRepository('LadelaOdeskTesterBundle:Category')->findByTest($test);
    if (!$test) {
        throw $this->createNotFoundException('Unable to find Test entity.');
    } 

    $resultCategory = new Category();

    $form = $this->createForm(new CategoryType() , $resultCategory);

    $request = $this->getRequest();

    if ('POST' === $request->getMethod()) {

        $form->bindRequest($request);

        if ($form->isValid()) {

            $em->persist($resultCategory);                
            $em->flush();

            $this->get('session')->setFlash('success', 'New result Categories were 
          saved!');
            return $this->redirect($this->generateUrl('questions', array(
                'id' => $resultCategory->getId(),
            )));
        }
    }                 
  return array(
        'test' => $test,
        'categories' =>$categories,

        'form' => $form->createView(), 

      );

} 
```

我的表格：

```
 class ResultCategoryType extends AbstractType
    {
  public function buildForm(FormBuilderInterface $builder, array $options)
   {
    $builder->add('value', 'integer');
    $builder->add('category', 'entity', array(
            'class'         => 'Ladela\OdeskTesterBundle\Entity\Category',
            'query_builder' => function ($repository) { return 
     $repository->createQueryBuilder('p')->orderBy('p.name', 'ASC'); },
             'property' => 'name' ,
               'expanded' => false ,
               'multiple' => false , ));

 }

  public function setDefaultOptions(OptionsResolverInterface $resolver)
  {
    $resolver->setDefaults(array(
        'data_class' => 'Ladela\OdeskTesterBundle\Entity\ResultCategory'
    ));
  }

  public function getName()
{
    return 'ResultCategory';
}
 }

 class CategoryType extends AbstractType
 {
  public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('name')
        ->add('resultCategories','collection', array(
            'type' => new ResultCategoryType(),
            'allow_add' => true,
            'by_reference' => false,
            'prototype' => true,

        ))
    ;
}

public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'Ladela\OdeskTesterBundle\Entity\Category'
    ));
}

public function getName()
{
    return 'category';
} 
```

}

还有我的树枝文件：

```
<form method="post" action="{{ path('questions',{'id': test.id })  }}" {{   
  form_enctype(form) }} >    

  <ul class="tags" data-prototype="{{ 
  form_widget(form.resultCategories.vars.prototype)|e 
   }}">
    {# iterate over each existing tag and render its only field: name #}
    {% for ResultCategory in form.resultCategories %}
        <li>{{ form_row(ResultCategory.category) }}</li>
    {% endfor %}
<a href="#" class="add_tag_link">Add a tag</a>

</ul>        
{{ form_rest(form) }}{# form.items's prototype is rendered twice #}
{{ form_errors(form) }}
<input type="submit" value ="add" />
</form> 

 {% block javascripts %}

<script type="text/javascript">
// Get the div that holds the collection of tags
var collectionHolder = $('ul.tags');

 // setup an "add a tag" link
   var $addTagLink = $('<a href="#" class="add_tag_link">Add a tag</a>');
  var $newLinkLi = $('<li></li>').append($addTagLink);

jQuery(document).ready(function() {
// add the "add a tag" anchor and li to the tags ul
collectionHolder.append($newLinkLi);

$addTagLink.on('click', function(e) {
    // prevent the link from creating a "#" on the URL
    e.preventDefault();

    // add a new tag form (see next code block)
    addTagForm(collectionHolder, $newLinkLi);
   });
 });
  // Get the div that holds the collection of tags
 var collectionHolder = $('ul.tags');

  // setup an "add a tag" link
 var $addTagLink = $('<a href="#" class="add_tag_link">Add a tag</a>');
 var $newLinkLi = $('<li></li>').append($addTagLink);

  jQuery(document).ready(function() {
 // add the "add a tag" anchor and li to the tags ul
  collectionHolder.append($newLinkLi);

 $addTagLink.on('click', function(e) {
    // prevent the link from creating a "#" on the URL
    e.preventDefault();

    // add a new tag form (see next code block)
    addTagForm(collectionHolder, $newLinkLi);
   });
  });

  {% endblock %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:41:51.983

由于您没有启动它，因此不会呈现表单集合！[请参阅官方文档](http://symfony.com/doc/current/cookbook/form/form_collections.html)。有用于创建标签表单的“虚拟”标签对象。

# constructor - TypeScript 类成员速记错误？

> ID：13379872
> 
> 赞同：2
> 
> 时间：2012-11-14T13:37:37.677
> 
> 标签：constructor, typescript

当我玩过 TypeScript 语言时，我对**类成员简写语法**和**继承**的行为感到困惑。假设您有以下有效的 TypeScript，其中包含两个语义意图类和一个具有一个属性的接口：

```
 class Person1 implements HasName {
      constructor(public name: string) {}
    }

    class Person2 implements HasName {
      public name : string;
      constructor(name: string) {
        this.name = name;
      }
    }

    interface HasName {
      name : string;
    } 
```

现在，如果您尝试在 HasName 接口中重命名“name”属性，则只有 Person2 中的成员会被正确重命名，而在 Person1 中，您将收到 TypeScript 错误，指出它不再实现 HasName。

有了这种行为，就不可能安全地使用类成员的简写语法：-/

这是一个**错误**还是**有意**的？就我而言，**重构操作**永远不会导致编译器**错误**。相反，它也应该重命名 Person1 中的简写成员，这对我来说听起来像是一个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:49:21.357

如果你描述的是真的，那么我同意这是一个错误。但是您必须区分 Visual Studio 的语言和插件。您的错误在于 Visual Studio 插件的重构部分，而不是语言本身。请注意，由于最新版本 (0.8.0) 是 alpha 版本，因此存在许多未实现功能的错误。

# string - 仅相差一个字符的字符串

> ID：13379875
> 
> 赞同：3
> 
> 时间：2012-11-14T13:37:40.900
> 
> 标签：string, haskell

所以，我对 Haskell（和一般编程）有点陌生，我一直在尝试解决一个问题。我想创建一个函数，它有 2 个字母数字（字符串类型）作为输入，并且仅当两个字母数字具有相同的长度并且只有 1 个不同的字符时才返回 True。因此，例如，如果输入是黑色和黑色，我会得到真，但如果输入是黑色和刹车，我会得到假。我试图用递归来做到这一点，但我失败了。我需要这个函数，因为我想用它来检查我正在处理的程序中的一些输入。

任何帮助表示赞赏，感谢您的时间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T13:45:42.063

如果我理解正确，不同`Char`的 s 应该出现在同一个位置吗？

那么我认为一个直截了当的定义是：

```
oneDifferent xs ys = 
   length xs == length ys && 
   1 == length (filter (==False) (zipWith (==) xs ys)) 
```

... 或者 ...

```
oneDifferent xs ys = 
  length xs == length ys &&  
  1 == foldr ((+) . fromEnum) 0 (zipWith (/=) xs ys) where 
```

递归解决方案是

```
oneDifferent (x:xs) (y:ys) 
  | x /= y = xs == ys
  | otherwise = oneDifferent xs ys 
oneDifferent _ _ = False 
```

# wordpress - CodeIgniter - 与同一站点上的其他 CMS 的多个入口路径

> ID：13379876
> 
> 赞同：0
> 
> 时间：2012-11-14T13:37:44.287
> 
> 标签：wordpress, codeigniter, url, mod-rewrite

这是每个人的一个奇怪的问题。我有一种情况，现有网站上运行 wordpress 作为网站的主要 CMS，由于 URL 结构等原因，有一些额外的代码无法在 WP 中实现，所以我们想将 CI 放在同一个主机。

但是，该站点上的 CI 需要两个潜在的入口点 - 我们将它们称为 /userside 和 /adminside

我希望两者共享相同的应用程序和系统文件夹，它们都在同一个可访问的文件夹空间中。

我很容易让 /userside 与 WP 共存。

这是 .htaccess 文件

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteRule ^/userside [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /userside/index.php [L]

RewriteRule ^/adminside [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /adminside/index.php [L]

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

我的文件夹布局如下

```
FTP ROOT/
    ci/ <- codeigniter root
      application/
      system/
    http/
      index.php <- WP index.php
      adminside/
        index.php <- CI index.php
      userside/
        index.php <- CI index.php
      ... wp-content etc 
```

我已经将用户端的文件复制到管理端并尝试了符号链接，但都不起作用。

在 CI 的应用程序/配置中，我将 base_url 修改为：

```
list($_trash, $_base, $rest) = explode('/', $_SERVER['REQUEST_URI'], 3);
$config['base_url']     = "http://".$_SERVER['HTTP_HOST']."/".$_base; 
```

这意味着它会自动将 URI 的第一段作为应用程序基础，我已经调试了这段代码并正确设置了它。

现在问题来了，当我访问 /userside/somecontroller 时，它可以工作，但是，当我访问 /adminside/somecontroller 时，它就不行了。我得到一个 404 页面。

我可以通过访问 /adminside 来访问默认控制器的 index() 函数——这有效，但在我指定控制器和方法时无效。

例如：

[http://www.mysite.com/userside/mycontroller/mymethod](http://www.mysite.com/userside/mycontroller/mymethod) <- 工作 [http://www.mysite.com/userside/mycontroller/mymethod](http://www.mysite.com/userside/mycontroller/mymethod) <- 不起作用 - 显示 404

/userside 是首先设置的，除了 application/config/config.php 之外，我看不到任何将 CI 与 /userside 联系起来的地方

权限已经过检查并且是相同的，所有者是相同的。

任何人都知道为什么这不起作用？我不想将站点拆分为子域，因为我们有特定的原因，并且由于它与 /userside 一起工作，所以只有一些简单的事情让我无法让 /adminside 工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:15:28.383

您需要`RewriteRule`摆脱 index.php*并*附加方法：

```
<IfModule mod_rewrite.c>
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^/userside(.*)$   /userside/index.php$1 [L]
    RewriteRule ^/adminside(.*)$  /adminside/index.php$1 [L]
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:18:40.337

这比我想象的要简单一些。

您只需将 CI 的 .htaccess 放在要运行 CI 的子文件夹中，然后设置适当的站点 URL 变量以匹配。

我确实找到了一个文档，该文档显示了如何通过简单地从 CI 的 index.php 中的 WP 端的根目录加载 wp-load.php 来让您从 CI 访问所有 WP 的库。

希望这对其他人有所帮助。

# sql - 将表 1 连接到表 2 中的第 1 列或第 2 列，没有重复项

> ID：13379882
> 
> 赞同：0
> 
> 时间：2012-11-14T13:38:20.417
> 
> 标签：sql, sql-server, sql-server-2008

[微软 SQL 2008]

我有表（所有列都是字符串名称）： A：将某些数据字段与拥有实体相关联的两列 B：定义实体层次结构的三列

我需要创建整个层次结构的单个表（包括两个表中都不存在的所有行），但是表 A 中的键列（显示为 Acol2）可以在表 B 的第 1 列或第 2 列中...

```
A:                         B:
 Acol1 | Acol2                Bcol1 | Bcol2 | Bcol3
-------+------              --------+-------+------
   A   |   B                    B   |   X   |   Y
   C   |   D                    Q   |   X   |   Y
   E   |   F                    H   |   D   |   Z
   G   |   H                    W   |   V   |   U 
```

输出应该是

```
Hierarchy:
 Acol1 | Bcol1 | Bcol2 | Bcol3
-------+-------+-------+------
   A   |   B   |   X   |  Y
  Null |   Q   |   X   |  Y
   C   |  Null |   D   |  Z
   G   |   H   |   D   |  Z
   E   |  Null |  Null | Null
  Null |   W   |   V   |  U 

Logic (also added to original):
    If A has no record in B, show A with all Null
    If A has record in Bcol1, show A with full row B
    If A has record in Bcol2, show A with Null, Bcol2, Bcol3
    If B has no record in A, show B with Null for Acol1 
```

我已经尝试了两个单独的 JOIN 的各种 UNION，但似乎无法摆脱无关的行......

1.  `B LEFT JOIN A ON Acol2=Bcol1 UNION B LEFT JOIN A ON Acol2=Bcol2;` 给出重复的行，因为联合的第二部分必须将 Bcol1 设置为 NULL（也许一种解决方案是删除这个重复的 NULL 行？）
2.  `B INNER JOIN A ON Acol2=Bcol1 UNION B INNER JOIN A ON Acol2=Bcol2;` 显然从 A 和 B 中删除了所有没有共享键的行（关于重新获得这些行的简单方法的解决方案？）

任何想法表示赞赏！

玩：[删除 SQL - 请参阅回复评论中的小提琴]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:40:55.283

```
SELECT
  Table1.ACol1,
  CASE WHEN Table1.ACol1 = Table2.BCol1 THEN Table2.BCol1 ELSE NULL END AS BCol1
  Table2.BCol2,
  Table2.BCol3
FROM
  Table1
FULL OUTER JOIN
  Table2
    ON Table1.ACol2 IN (Table2.BCol1, Table2.BCol2) 
```

当您说 时`no duplicates`，这只有`ACol2`在 Table2 中的一行的一个字段中出现时才有可能。如果它出现在多个地方，你会得到重复。
- 如果可能的话，你想如何从 Table2 中选择哪条记录？

然而，一般来说，这是一种 SQL 反模式。

这是因为连接更喜欢 Table2 上的索引。但是，由于您永远不知道要加入哪个字段，因此没有一个索引可以满足加入条件。

**编辑**：

使这显着更快的是创建一个规范化的TableB ...

```
 B_ID | B_Col | B_Val
------+-------+-------
   1  |   1   |   B
   1  |   2   |   X
   1  |   3   |   Y
   2  |   1   |   Q
   2  |   2   |   X
   2  |   3   |   Y
   3  |   1   |   H
   3  |   2   |   D
   3  |   3   |   Z
   4  |   1   |   W
   4  |   2   |   V
   4  |   3   |   U 
```

`(B_ID)`然后用and on索引该表`(B_Val)`...

然后`B_ID`在 non_normalised 表中包含该字段...

```
 ID  | Bcol1 | Bcol2 | Bcol3
------+-------+-------+-------
  1   |   B   |   X   |   Y
  2   |   Q   |   X   |   Y
  3   |   H   |   D   |   Z
  4   |   W   |   V   |   U 
```

然后使用以下查询...

```
SELECT
  Table1.ACol1,
  CASE WHEN Table1.ACol1 = Table2.BCol1 THEN Table2.BCol1 ELSE NULL END AS BCol1
  Table2.BCol2,
  Table2.BCol3
FROM
  (
    Table1
  LEFT JOIN
    Table2Normalised
      ON  Table2Normalised.B_Val = Table1.ACol2
      AND Table2Normalised.B_Col IN (1,2)
  )
FULL OUTER JOIN
  Table2
    ON Table2Normalised.B_ID = Table2.ID 
```

**编辑：**

不更改架构，而是在 BCol1 上有一个索引，在 Bcol2 上有第二个索引......

```
 SELECT ACol1, BCol1, BCol2, BCol3 FROM Table1 a INNER JOIN Table2 b ON a.ACol2 = b.BCol1
  UNION ALL
  SELECT ACol1, NULL,  BCol2, BCol3 FROM Table1 a INNER JOIN Table2 b ON a.ACol2 = b.BCol2
  UNION ALL
  SELECT ACol1, NULL,  NULL,  NULL  FROM Table1 a WHERE NOT EXISTS (SELECT * FROM Table2 WHERE BCol1 = a.ACol2)
                                                    AND NOT EXISTS (SELECT * FROM Table2 WHERE BCol2 = a.ACol2)
  UNION ALL
  SELECT NULL,  BCol1, BCol2, BCol3 FROM Table2 b WHERE NOT EXISTS (SELECT * FROM Table1 WHERE ACol2 = b.BCol1)
                                                    AND NOT EXISTS (SELECT * FROM Table1 WHERE ACol2 = b.BCol2) 
```

但这很混乱...

# excel - 如何从 Excel 工作表中删除隐藏的列/行？

> ID：13379883
> 
> 赞同：1
> 
> 时间：2012-11-14T13:38:27.580
> 
> 标签：excel, office-interop, excel-interop

我正在尝试从 Excel 工作表中删除所有隐藏的列，我正在使用`Microsoft Office Interop`. 问题是当我遍历列时，我没有找到列隐藏属性集。我不知道我在这里做错了什么。任何帮助，将不胜感激

```
int columnCount = wsCurrent.UsedRange.Columns.Count;
Excel.Worksheet wsCurrent = (Excel.Worksheet)wsEnumerator.Current;
for (int c = 1; c <= columnCount; c++)
{
    if (wsCurrent.UsedRange.get_Range((Excel.Range)wsCurrent.UsedRange.Cells[1, c], (Excel.Range)wsCurrent.UsedRange.Cells[wsCurrent.Rows.Count, c]).EntireColumn.Hidden)
        Console.WriteLine("Column Hidden");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:22:06.243

顺便说一句，您的代码没有您正在使用的“r”变量声明。使用下一个代码迭代单元格并确定单元格是否隐藏：

```
const double SIZE = 0.5;
int cols = sheet.UsedRange.Columns.Count;
int rows = sheet.UsedRange.Rows.Count;
Range usedRange = sheet.UsedRange;
for (int iCol = 1; iCol <= cols; iCol++)
{
    for (int jRow = 1; jRow <= rows; jRow++)
    {
        Range cellRng = (Excel.Range)usedRange.Cells[jRow, iCol];
        if (double.Parse(cellRng.ColumnWidth.ToString()) <= SIZE ||
         double.Parse(cellRng.RowHeight.ToString()) <= SIZE)
        { 
            /*do your stuff here*/
        }
    }
} 
```

像这样。需要恒定大小，因为单元格可能**几乎**被隐藏，但视觉上它将被隐藏。代码必须优化，但概念清晰。

# jquery - 尝试使用 jQuery 将生成的 HTML 表转换为 div 或 ul 以使其响应

> ID：13379884
> 
> 赞同：1
> 
> 时间：2012-11-14T13:38:30.733
> 
> 标签：jquery, responsive-design, html-table

我们有一个生成产品列表的系统。它将这些结果全部放在一个 yummy(!) 表中，并在其中嵌套另一个以包裹产品图像。每件商品只有一张图片和产品标题，两者都链接到产品页面。

我无法编辑任何生成的 HTML，但我可以编辑页脚/页眉等以添加 Jquery，并且可以编辑 CSS，这是我解决大多数问题的方式。

我可以在 CMS 中更改的唯一相关部分是显示了多少列产品。在小型手机上，我希望这是 1，平板电脑可能是 3，台式机最多 6。这只是表格中 tr 的宽度。如果我将其设置为 1，我想我可以通过将单个 td 宽 trs 彼此相邻浮动来包装它们，我可以，是的。

当产品的标题很长时，就会出现我的问题。如果连续 5 个产品中的第 4 个标题较长，则下一行中的第一个产品将排在第 5 位，前 4 位为空，顺序不齐。

我猜一些 HTML 可能会有所帮助。

```
<table id="catprods_tbl" width="100%">
<tbody>
<tr>
<td class="column_main" align="center" valign="top">
<table cellpadding="2" cellspacing="0">
<tbody>
<tr>
<td class="column_main">
<a class="links_main" href="/linktoproduct"><img src="/images/thumb.jpg" border="0"></a>
</td>
</tr>
</tbody>
</table>
<a class="links_main" href="/linktoproduct">ProductTitle</a><br>£320.00<br><br>
</td>
</tr>
</tbody>
</table> 
```

这些都不是真正可编辑的，但是我怎样才能将它变形为我想要的工作方式？第二个 a 上的双 br 在那里，因为通常会在它们之间显示一个简短的描述，但我已经在 CMS 中隐藏了它，因为它在较长的描述上弄乱了布局..

Lil '更新（我会在某个时候掌握网站..）

[http://jsfiddle.net/fjnN6/](http://jsfiddle.net/fjnN6/)这解释了问题，当我其中一个标题较长时，下一行从它的右侧开始。蒂亚:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:09:45.383

好的，如果我正确地为您提供了简单的`td`元素 CSS 将为您节省时间：

```
table td {
    width: 50px;
    overflow: hidden;
    display: inline-block;
    white-space: nowrap;
} 
```

这将隐藏所有超过 width 属性值的内容。如果这不是理想的行为，请提供一些屏幕截图。

# c++ - libcurl 中是否有可用的压缩

> ID：13379888
> 
> 赞同：2
> 
> 时间：2012-11-14T13:38:47.517
> 
> 标签：c++, libcurl

我需要使用带有 C++ 的 libcurl 将一个巨大的文件从本地机器传输到远程机器。libcurl 是否有内置的压缩​​选项。由于要传输的数据很大（大小为 100 MB 到 1 GB），如果我们在 libcurl 本身中提供任何此类选项会更好。我知道我们可以压缩数据并通过 libcurl 发送。但只是想知道有没有更好的方法。

注意：就我而言，许​​多客户端机器会定期将如此庞大的数据传输到远程服务器。

谢谢， 普拉布

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:44:02.570

根据[`curl_setopt()`](http://www.php.net/manual/en/function.curl-setopt.php)和 options `CURLOPT_ENCODING`，您可以指定：

> “Accept-Encoding:”标头的内容。这使得能够对响应进行解码。支持的编码是 "identity"、"deflate" 和 **"gzip"**。如果设置了空字符串“”，则会发送包含所有支持的编码类型的标头。

[以下](http://php.net/manual/en/book.curl.php)是一些示例（只需在浏览器中点击搜索并输入`compression`），但我不知道 hot 究竟是否有效，以及它是否期望已经压缩过的数据。

您仍然可以[`gzcompress()`](http://php.net/manual/en/function.gzcompress.php)自己使用和发送压缩块（我会以这种方式完成任务......您将更好地控制实际发生的事情，并且您将能够更改使用的算法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T03:30:38.677

您需要自己发送带有 zlib 压缩的文件。也许在服务器端需要一些修改。

# maven - 使用 Maven 和 GMaven 在 groovy 单元测试中记录 Logback 或 slf4j？

> ID：13379897
> 
> 赞同：0
> 
> 时间：2012-11-14T13:39:09.267
> 
> 标签：maven, groovy, slf4j, logback, cucumber-jvm

我正在尝试在使用 Cucumber-jvm 运行的 Grovvy 单元测试中启用日志记录。

在我的测试中，我导入了：

```
import groovy.util.logging.Slf4j 
```

然后添加

```
@Slf4j 
```

但是，当我运行以下任何命令时：

```
mvn test -Dgmaven.logging=DEBUG
mvn test -Dgmaven.logging=TRACE 
```

此方法仅打印出 '[WARN] log.isWarnEnabled()'

```
void debugLogging(){
    println("~~~~~ debugLogging() ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~")
    if(log.isTraceEnabled()){
        println("log.isTraceEnabled()")
        log.trace("log.isTraceEnabled()")
    }
    if(log.isDebugEnabled()){
        println("log.isDebugEnabled()")
        log.debug("log.isDebugEnabled()")
    }
    if(log.isInfoEnabled()){
        println("log.isInfoEnabled()")
        log.info("log.isInfoEnabled()")
    }
    if(log.isWarnEnabled()){
        println("log.isWarnEnabled()")
        log.warn("log.isWarnEnabled()")
    }
} 
```

这是我的 ./src/test/resources/logback.xml ：

```
<configuration>
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>
                %d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
            </pattern>
        </encoder>
    </appender>

    <!-- Use level="DEBUG" for more detailed logging -->
    <root level="debug">
        <appender-ref ref="STDOUT" />
    </root>

</configuration> 
```

如何更改单元测试中的日志级别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:06:00.740

我发现 GMaven 不使用 logback 的困难方式。该插件旨在利用 Sonatype 提供的默认 SLF4J，称为[gossip](https://github.com/jdillon/gossip)（在 GMaven 高级[配置](http://docs.codehaus.org/display/GMAVEN/Advanced+Configuration)中描述）

所以这可以解释为什么你的*logback.xml*文件被忽略了（虽然有人会认为 SLF4J 调用在从单元测试运行时会被重定向到配置的运行时提供程序）

要将*gmaven.logging*属性传递给您的单元测试，您可以尝试在surefire插件中设置它，如下所示：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.12.4</version>
    <configuration>
      <systemPropertyVariables>
        <gmaven.logging>DEBUG</gmaven.logging>
      </systemPropertyVariables>
    </configuration>
  </plugin> 
```

希望这可以帮助。

# 更新

我在开发 Maven 插件时遇到了这个问题。我的挑战是捕获源自不使用 SLF4J 的库的日志记录调用......

为了解决这个问题，我在插件依赖项部分添加了一个桥接 API，如下所示：

```
 <plugin>
    ..
    ..
    <dependencies>
      <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>1.5.10</version>
      </dependency>
    </dependencies>
  </plugin> 
```

这会将公共日志记录调用重新路由到您的 SLF4J 实现，在 Maven 的情况下这将是八卦。

# javascript - 如何在嵌套方法中引用对象

> ID：13379902
> 
> 赞同：1
> 
> 时间：2012-11-14T13:39:21.510
> 
> 标签：javascript

有以下代码。

```
object.waypoint=function () {
    this.uw=setInterval( function() {
       console.log(this);
    }, 200);
} 
```

如何在第三行引用函数内部的“对象”，我用“this”关键字尝试过，但它似乎没有引用对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:40:32.150

里面的 setInterval`this`是指窗口。您需要创建一个引用`this`.

```
object.waypoint=function () {
    var me = this;

    this.uw=setInterval( function() {
       console.log(me);
    }, 200);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:41:15.557

一种常见的方法是将引用存储`this`在变量中，然后您可以使用它来访问正确的`this`：

```
object.waypoint=function () {
    // Keep a reference to this in a variable
    var that = this;
    that.uw=setInterval( function() {
       // Now you can get access to this in here as well through the variable
       console.log(that);
    }, 200);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:59:25.493

我认为这`bind`是一个巧妙的解决方案 - 它并非在所有浏览器中都实现，但有一些[解决方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind#Compatibility)。

```
object.waypoint = function(){
    this.uw = setInterval(function(){
        console.log(this);
    }.bind(this), 200);
} 
```

有关正确的文档，请参阅[MDN 页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

# php - 如何强制作曲家使用 zip 而不是 git clone？

> ID：13379908
> 
> 赞同：1
> 
> 时间：2012-11-14T13:39:44.127
> 
> 标签：php, git, clone

文我使用[composer](http://getcomposer.org)更新/安装一个新项目，它开始克隆很多 git 存储库。如果你有很多依赖，这需要很长时间。毕竟我只需要所有库的最新版本。我不会改变任何东西。

有没有办法告诉作曲家在不克隆的情况下下载请求的版本？仅从 github 获取 zip 版本会快得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:58:56.217

根据[https://github.com/composer/composer/issues/840](https://github.com/composer/composer/issues/840)这是不可能的。

> 我认为我们需要在某个时候为此添加一个选项。@stof 所说的不是真的。问题是，对于开发包，在更新时更新它们的机会比你只关注标签要高得多，而且一旦你有一个 git clone，更新比每次重新下载完整的东西要便宜得多。这是一个权衡。但我们可能应该添加一个 --prefer-dist 标志。

# python - 使用 OpenCV 和 Python 比较图像的相似性

> ID：13379909
> 
> 赞同：36
> 
> 时间：2012-11-14T13:39:48.197
> 
> 标签：python, opencv, computer-vision

我正在尝试将图像与其他图像列表进行比较，并返回该列表中具有高达 70% 相似度的图像选择（如 Google 搜索图像）。

[我在这篇文章](https://stackoverflow.com/questions/10984313/opencv-2-4-1-computing-surf-descriptors-in-python/10987035#10987035)中得到了这段代码，并根据我的上下文进行了更改

```
# Load the images
img =cv2.imread(MEDIA_ROOT + "/uploads/imagerecognize/armchair.jpg")

# Convert them to grayscale
imgg =cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)

# SURF extraction
surf = cv2.FeatureDetector_create("SURF")
surfDescriptorExtractor = cv2.DescriptorExtractor_create("SURF")
kp = surf.detect(imgg)
kp, descritors = surfDescriptorExtractor.compute(imgg,kp)

# Setting up samples and responses for kNN
samples = np.array(descritors)
responses = np.arange(len(kp),dtype = np.float32)

# kNN training
knn = cv2.KNearest()
knn.train(samples,responses)

modelImages = [MEDIA_ROOT + "/uploads/imagerecognize/1.jpg", MEDIA_ROOT + "/uploads/imagerecognize/2.jpg", MEDIA_ROOT + "/uploads/imagerecognize/3.jpg"]

for modelImage in modelImages:

    # Now loading a template image and searching for similar keypoints
    template = cv2.imread(modelImage)
    templateg= cv2.cvtColor(template,cv2.COLOR_BGR2GRAY)
    keys = surf.detect(templateg)

    keys,desc = surfDescriptorExtractor.compute(templateg, keys)

    for h,des in enumerate(desc):
        des = np.array(des,np.float32).reshape((1,128))

        retval, results, neigh_resp, dists = knn.find_nearest(des,1)
        res,dist =  int(results[0][0]),dists[0][0]

        if dist<0.1: # draw matched keypoints in red color
            color = (0,0,255)

        else:  # draw unmatched in blue color
            #print dist
            color = (255,0,0)

        #Draw matched key points on original image
        x,y = kp[res].pt
        center = (int(x),int(y))
        cv2.circle(img,center,2,color,-1)

        #Draw matched key points on template image
        x,y = keys[h].pt
        center = (int(x),int(y))
        cv2.circle(template,center,2,color,-1)

    cv2.imshow('img',img)
    cv2.imshow('tm',template)
    cv2.waitKey(0)
    cv2.destroyAllWindows() 
```

我的问题是，如何将图像与图像列表进行比较并仅获取相似图像？有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-20T23:13:00.767

我建议您查看图像之间的推土机距离（EMD）。该指标让人感觉将标准化灰度图像转换为另一个灰度图像有多难，但可以推广到彩色图像。可以在以下论文中找到对该方法的非常好的分析：

[robots.stanford.edu/~rubner/papers/rubnerIjcv00.pdf](http://robotics.stanford.edu/%7Erubner/papers/rubnerIjcv00.pdf)

它既可以在整个图像上完成，也可以在直方图上完成（这确实比整个图像方法快）。我不确定哪种方法可以进行完整的图像比较，但对于直方图比较，您可以使用**cv.CalcEMD2**函数。

唯一的问题是这个方法没有定义相似度的百分比，而是一个你可以过滤的距离。

我知道这不是一个完整的工作算法，但仍然是它的基础，所以我希望它有所帮助。

### 编辑：

这是 EMD 原则上如何工作的恶搞。主要思想是有两个归一化矩阵（两个灰度图像除以它们的总和），并定义一个通量矩阵，描述如何将灰度从一个像素移动到另一个像素以获得第二个图像（甚至可以定义对于非标准化的，但更困难）。

用数学术语来说，流矩阵实际上是一个四维张量，它给出了从旧图像的点 (i,j) 到新图像的点 (k,l) 的流，但是如果您将图像展平，则可以对其进行变换到一个普通的矩阵，只是有点难以阅读。

这个流矩阵有三个约束：每一项应该是正数，每行的总和应该返回相同的目标像素值，每列的总和应该返回起始像素的值。

鉴于此，您必须最小化转换的成本，由 (i,j) 到 (k,l) 的每个流的乘积之和对于 (i,j) 和 (k,l) 之间的距离给出。

文字看起来有点复杂，所以这里是测试代码。逻辑是正确的，我不确定为什么 scipy 求解器会抱怨它（你应该看看 openOpt 或类似的东西）：

```
#original data, two 2x2 images, normalized
x = rand(2,2)
x/=sum(x)
y = rand(2,2)
y/=sum(y)

#initial guess of the flux matrix
# just the product of the image x as row for the image y as column
#This is a working flux, but is not an optimal one
F = (y.flatten()*x.flatten().reshape((y.size,-1))).flatten()

#distance matrix, based on euclidean distance
row_x,col_x = meshgrid(range(x.shape[0]),range(x.shape[1]))
row_y,col_y = meshgrid(range(y.shape[0]),range(y.shape[1]))
rows = ((row_x.flatten().reshape((row_x.size,-1)) - row_y.flatten().reshape((-1,row_x.size)))**2)
cols = ((col_x.flatten().reshape((row_x.size,-1)) - col_y.flatten().reshape((-1,row_x.size)))**2)
D = np.sqrt(rows+cols)

D = D.flatten()
x = x.flatten()
y = y.flatten()
#COST=sum(F*D)

#cost function
fun = lambda F: sum(F*D)
jac = lambda F: D
#array of constraint
#the constraint of sum one is implicit given the later constraints
cons  = []
#each row and columns should sum to the value of the start and destination array
cons += [ {'type': 'eq', 'fun': lambda F:  sum(F.reshape((x.size,y.size))[i,:])-x[i]}     for i in range(x.size) ]
cons += [ {'type': 'eq', 'fun': lambda F:  sum(F.reshape((x.size,y.size))[:,i])-y[i]} for i in range(y.size) ]
#the values of F should be positive
bnds = (0, None)*F.size

from scipy.optimize import minimize
res = minimize(fun=fun, x0=F, method='SLSQP', jac=jac, bounds=bnds, constraints=cons) 
```

变量 res 包含最小化的结果......但正如我所说，我不确定它为什么抱怨奇异矩阵。

该算法的唯一问题是速度不是很快，因此无法按需执行，但您必须在创建数据集时耐心执行它并将结果存储在某个地方

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-22T02:34:45.240

您正在着手处理一个巨大的问题，称为“基于内容的图像检索”或 CBIR。这是一个庞大而活跃的领域。尽管有很多技术都取得了不同程度的成功，但还没有完成的算法或标准方法。

甚至谷歌图片搜索还没有这样做——他们做基于文本的图片搜索——例如，在页面中搜索与您搜索的文本相似的文本。（而且我确信他们正在使用 CBIR；它是许多图像处理研究人员的圣杯）

如果你有一个紧迫的最后期限或需要完成这项工作并尽快工作......哎呀。

这里有大量关于这个主题的论文：

[http://scholar.google.com/scholar?q=content+based+image+retrieval](http://scholar.google.com/scholar?q=content+based+image+retrieval)

一般来说，你需要做几件事：

1.  提取特征（在局部兴趣点，或全局，或以某种方式，SIFT、SURF、直方图等）
2.  聚类/建立图像分布模型

这可能涉及[特征描述符](http://scholar.google.com/scholar?q=image+descriptors)、[图像要点](http://scholar.google.com/scholar?q=image+gist)、[多实例学习](http://scholar.google.com/scholar?q=multiple+instance+learning)。等等

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-22T17:43:33.603

大约 2 年前，我使用 Python/Cython 编写了一个程序来做一些非常相似的事情。后来我将其重写为 Go 以获得更好的性能。基本思想来自[findimagedupes](http://www.jhnc.org/findimagedupes/) IIRC。

它基本上为每个图像计算一个“指纹”，然后比较这些指纹以匹配相似的图像。

指纹是通过将图像大小调整为 160x160、将其转换为灰度、添加一些模糊、对其进行标准化，然后将其调整为 16x16 单色来生成的。最后你有 256 位的输出：那是你的指纹。这很容易使用[`convert`](http://www.imagemagick.org/script/convert.php)：

```
convert path[0] -sample 160x160! -modulate 100,0 -blur 3x99 \
    -normalize -equalize -sample 16x16 -threshold 50% -monochrome mono:- 
```

（`[0]`in`path[0]`仅用于提取动画 GIF 的第一帧；如果您对此类图像不感兴趣，可以将其删除。）

将其应用于 2 张图像后，您将拥有 2 个（256 位）指纹，`fp1`并且`fp2`.

然后通过对这两个值进行异或运算并对设置为 1 的位进行计数来计算这两个图像的相似度得分。要进行此位计数，您可以使用[此答案](https://stackoverflow.com/a/407758/113325)`bitsoncount()`中的函数：

```
# fp1 and fp2 are stored as lists of 8 (32-bit) integers
score = 0
for n in range(8):
    score += bitsoncount(fp1[n] ^ fp2[n]) 
```

`score`将是一个介于 0 和 256 之间的数字，表示您的图像有多相似。在我的应用程序中，我将其除以 2.56（归一化为 0-100），我发现归一化分数为 20 或更低的图像通常是相同的。

如果您想实现此方法并使用它来比较大量图像，我*强烈*建议您尽可能使用 Cython（或纯 C）：纯 Python 整数的 XORing 和位计数非常慢。

我真的很抱歉，但我再也找不到我的 Python 代码了。现在我只有一个 Go 版本，但恐怕我不能在这里发布（紧密集成在其他一些代码中，可能有点难看，因为它是我在 Go 中的第一个严肃程序......）。

GQView/Geeqie 中还有一个非常好的“相似度查找”功能；它的来源在[这里](https://gitorious.org/geeqie/geeqie/blobs/master/src/similar.c)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-03-31T21:18:57.797

为了在 Python 中更简单地实现 Earth Mover 的距离（又名 Wasserstein 距离），您可以使用 Scipy：

```
from keras.preprocessing.image import load_img, img_to_array
from scipy.stats import wasserstein_distance
import numpy as np

def get_histogram(img):
  '''
  Get the histogram of an image. For an 8-bit, grayscale image, the
  histogram will be a 256 unit vector in which the nth value indicates
  the percent of the pixels in the image with the given darkness level.
  The histogram's values sum to 1.
  '''
  h, w = img.shape[:2]
  hist = [0.0] * 256
  for i in range(h):
    for j in range(w):
      hist[img[i, j]] += 1
  return np.array(hist) / (h * w)

a = img_to_array(load_img('a.jpg', grayscale=True))
b = img_to_array(load_img('b.jpg', grayscale=True))
a_hist = get_histogram(a)
b_hist = get_histogram(b)
dist = wasserstein_distance(a_hist, b_hist)
print(dist) 
```

# paypal - Drupal Commerce - 贝宝付款

> ID：13379911
> 
> 赞同：0
> 
> 时间：2012-11-14T13:39:52.487
> 
> 标签：paypal, drupal-7, drupal-modules, sandbox, drupal-commerce

我正在寻找有关 Paypal 沙盒如何工作的解释。假设我有一个真实的 Paypal 帐户，通过该帐户接收付款，并且我想在 Drupal Commerce 的 Paypal 模块上对其进行配置，但我还想先测试付款工作流程，然后再使其生效并让我的客户使用它，我看到了 Paypal Drupal 上的配置在“PayPal 服务器”部分下有以下选项：

*   沙盒 - 用于测试，需要 PayPal 沙盒帐户
*   Live - 用于处理真实交易

我假设如果我想做“虚拟”交易，我必须在 Drupal 端启用“沙盒”选项，所以我的问题是

*启用“沙盒”选项是我唯一需要做的事情，以避免向我的 Paypal 帐户收取真实交易费用吗？还是我必须创建另一个 Paypal 帐户（沙盒帐户）并在 Drupal 端配置它而不是我的真实帐户？*

我只是想知道 Drupal 上的 Paypal Payment 插件是否需要一个“沙盒帐户”（与我的真实 Paypal 帐户不同），或者如果仅启用 Sandbox 选项，它会以某种方式向 Paypal 发出信号，并且在启用该选项时任何交易都会被忽略.

如果有人为我澄清一下，我会很感激，我刚刚开始开发与 Paypal 相关的东西。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:03:06.847

[我建议从这里](https://developer.paypal.com/cgi-bin/devscr?cmd=_signup-run)使用沙盒帐户

您无法在 PayPal Sandbox 上使用真实的 PayPal 账户测试虚拟交易。它需要沙盒帐户。因此，您需要一个 Sandbox 帐户并将 Drupal 选项更改为 Sandbox 以进行测试。

# javascript - Javascript 求和数组，使用 d3.nest()

> ID：13379912
> 
> 赞同：5
> 
> 时间：2012-11-14T13:39:53.390
> 
> 标签：javascript, d3.js

如果我有如下所示的数据：

```
harvest = [{type: "apple", color: "green", value: 1}, 
           {type: "apple", color: "red", value: 2}, 
           {type: "grape", color: "green", value: 3},
           {type: "grape", color: "red", value: 4 }] 
```

我可以使用 d3 的 nest.rollup() 函数通过各种属性对其进行总结：

```
sum_by = "color";

rollup = d3.nest().key(function(d) {
  return d[sum_by];
}).rollup(function(d) {
  return d3.sum(d, function(g) {
    return g.value;
  });
}).entries(harvest); 
```

给我这个：

```
rollup = [{key: "green", values: 4},
          {key: "red", values: 6}] 
```

这正是我想要的。

但是，我的数据中的值由长度相同的数组组成：

```
harvest = [{type: "apple", color: "green", values: [1,2,3,4]}, 
           {type: "apple", color: "red", values: [5,6,7,8]}, 
           {type: "grape", color: "green", values: [9,10,11,12]},
           {type: "grape", color: "red", values: [13,14,15,16] }] 
```

是否可以以类似的方式组合这些？举个例子：

```
rollup = [{key: "green", values: [10,12,14,16]},
          {key: "red", values: [18,20,22,24]}] 
```

我觉得这可能使用 d3 汇总函数（但不一定必须使用 d3 来完成）。

**解析度**

感谢@meetamit 和@Superboggly 的努力，我有三个解决方案：

版本 1（首选，因为它只使用`reduce()`一次且`map()`只使用一次）：

```
function sumArrays(group) {
  return group.reduce(function(prev, cur, index, arr) {
    return {
      values: prev.values.map(function(d, i) {
        return d + cur.values[i];
      })
    };
  });
} 
```

版本 2：

```
function sumArrays(group) {
  return group.map(function(h) {
    return h.values;
  }).reduce(function(prev, cur, index, arr) {
    return prev.map(function(d, i) {
      return d + cur[i];
    });
  });
} 
```

版本 3（出于兴趣，因为数组长度可能会有所不同）：

```
function sumArrays(group) {
  return group.reduce(function(prev, cur, index, arr) {
    return prev.map(function(d, i) {
      return d + cur.values[i];
    });
  }, [0, 0, 0, 0]);
} 
```

像这样调用：

```
function rollupArrays() {
  return d3.nest().key(function(d) {
    return d[sum_by];
  }).rollup(sumArrays).entries(harvest);
} 
```

并转换为 CoffeeScript：

```
rollupArrays = ->
  d3.nest().key (d) ->
    d[sum_by]
  .rollup(sumArrays).entries(harvest)

sumArrays = (group) ->
  group.reduce (prev, cur, index, arr) ->
    values: prev.values.map (d,i) ->
      d + cur.values[i] 
```

**更新**

如果函数必须运行，即使只有一个输入行，此方法也不适用。见[第二部分](https://stackoverflow.com/questions/13713784/summing-arrays-in-javascript-using-d3-nest-part-ii)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T20:09:18.907

一种解决方案使用`[].reduce()`and `[].map()`：

```
// eg: sumArrays([ [1,2,3,4], [5,6,7,8] ]);// <- outputs [6, 8, 10, 12]
function sumArrays(arrays) {
  return arrays.reduce(
    function(memo, nums, i) {
      if(i == 0)
        return nums.concat();
      else
        return memo.map(
          function(memoNum, i) {
            return memoNum + nums[i];
          }
        );
    },
    [ ]// Start with empty Array for memo
  );
} 
```

reduce 和 map 在旧 JS 中都不是原生的，所以最好使用一个模块（下划线，或者可能有一个 d3 等价于`reduce`，但我没见过）。

**编辑**

在您的代码中使用它：

```
sum_by = "color";

rollup = d3.nest().key(function(d) {
  return d[sum_by];
}).rollup(function(d) {
  var arraysToSum = d.map(function(g) { return g.values; });
  return sumArrays(arraysToSum)
}).entries(harvest); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T07:58:18.173

@meetamit 我喜欢你使用 reduce 的想法。

如果您只想使用 d3 来解决这个问题，它还有一个内置的 reduce，您可以将其与 nest 函数一起使用：

```
var rollup = d3.nest().key(function(d) {
  return d[sum_by];
}).rollup(function(d) {
    var result = d.reduce(function(prev, cur, index, arr) {
        return prev.values.map(function(d,i) { return d + cur.values[i];});
    });

    return result;
}).entries(harvest); 
```

[如果你愿意，你可以在这里](http://jsfiddle.net/rS7d8/)玩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-16T15:42:11.823

该解决方案利用[`d3.rollups`](https://github.com/d3/d3-array/blob/master/README.md#rollups)和[`d3.transpose`](https://github.com/d3/d3-array/blob/master/README.md#transpose)的新特性[`d3.array`](https://github.com/d3/d3-array)：

```
var input = [
  { type: "apple", color: "green", values: [1, 2, 3, 4] },
  { type: "apple", color: "red",   values: [5, 6, 7, 8] },
  { type: "grape", color: "green", values: [9, 10, 11, 12] },
  { type: "grape", color: "red",   values: [13, 14, 15, 16] }
];

var rolled_up = d3.rollups(
  input,
  vs => d3.transpose(vs.map(d => d.values)).map(vs => d3.sum(vs)),
  d => d.color
);

var output = rolled_up.map(([color, values]) => ({ key: color, values: values }));

console.log(output);
```

```
<script src="https://d3js.org/d3-array.v2.min.js"></script>
```

这：

*   用于[`d3.rollups`](https://github.com/d3/d3-array/blob/master/README.md#rollups)按颜色分组并减少生成的分组值：
    *   第三个参数是对项目进行分组的维度。
    *   第二个参数 ( `vs => d3.transpose(vs.map(d => d.values)).map(vs => d3.sum(vs))`) 是归约函数，用于转换分组值。
*   在对结果合并数组的每个部分求和之前，reduce函数[`d3.transpose`](https://github.com/d3/d3-array/blob/master/README.md#transpose)用于压缩分组数组
*   将汇总生成的元素映射到预期的输出格式。

这是由 产生的中间结果`d3.rollups`：

```
var input = [
  { type: "apple", color: "green", values: [1, 2, 3, 4] },
  { type: "apple", color: "red",   values: [5, 6, 7, 8] },
  { type: "grape", color: "green", values: [9, 10, 11, 12] },
  { type: "grape", color: "red",   values: [13, 14, 15, 16] }
];

var rolled_up = d3.rollups(
  input,
  vs => d3.transpose(vs.map(d => d.values)).map(vs => d3.sum(vs)),
  d => d.color
);

console.log(rolled_up);
```

```
<script src="https://d3js.org/d3-array.v2.min.js"></script>
```

# ios - ios http请求发送json格式

> ID：13379913
> 
> 赞同：0
> 
> 时间：2012-11-14T13:39:53.740
> 
> 标签：ios, json, http

我正在尝试使用以下参数调用 Web 服务：

```
{"Class":"Authorization","method":"login","user":"","pass":""} 
```

如下

```
NSString *user = [NSString stringWithFormat:@"username=%@",_username.text];
NSString *pass = [NSString stringWithFormat:@"password=%@",_password.text];
NSString *Class = @"Authorization";
NSString *method = @"login";

//NSString *post = [NSString stringWithFormat:@"%@&%@&%@&%@", user, pass, Class, method ];

NSString *jsonPostBody = [NSString stringWithFormat:@"'json' = '{\"Class\":"
                              "\"%@\""
                              ",\"method\":"
                              "\"%@\""
                              ",\"pass\":"
                              "\"%@\""
                              ",\"user\":"
                              "\"%@\""
                              "}'",
                              [Class stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                              [method stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                              [pass stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                              [user stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSData *postData = [jsonPostBody dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];

    NSURL *url = [NSURL URLWithString:@"http://212.119.87.45:8080/IktissabServices/index.php/service"];
    NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:url
                                                           cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                                                       timeoutInterval:180.0];

    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/x-www-form-urlencoded"   forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:[[jsonPostBody stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]
                          dataUsingEncoding:NSUTF8StringEncoding
                          allowLossyConversion:YES]];

    [request setHTTPBody:postData];

    NSString* postDataLengthString = [[NSString alloc] initWithFormat:@"%d", [postData length]];
    [request setValue:postDataLengthString forHTTPHeaderField:@"Content-Length"];

    NSURLResponse *response;
    NSError *err;
    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];
    NSError *error;
    NSDictionary *jsonDict = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&error];//
    if (! error) {
        NSLog(@"%@",jsonDict);
    }else{
        NSLog(@"%@",error.localizedDescription);
    } 
```

每次结果都是：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“数据参数为零”

网络服务有：

> 输入内容类型：文本/json
> 
> 输出内容类型：文本/json

任何帮助或示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:52:26.680

以下代码没有任何异常（尽管显然我无权访问您的服务器，因此我无法对其进行端到端测试）：

```
NSDictionary *dictionary = @{
    @"Class"  : @"Authorization",
    @"method" : @"login",
    @"pass"   : _password.text,
    @"user"   : _username.text
};

NSError *error;
NSData *postData = [NSJSONSerialization dataWithJSONObject:dictionary
                                                   options:0
                                                     error:&error];
if (error)
    NSLog(@"Failure to serialize JSON object %@", error);

NSURL *url = [NSURL URLWithString:@"http://212.119.87.45:8080/IktissabServices/index.php/service"];
NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:url
                                                       cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                                                   timeoutInterval:180.0];

[request setHTTPMethod:@"POST"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];    
[request setHTTPBody:postData];

NSURLResponse *response;

NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
if (error)
    NSLog(@"%s sendSynchronousRequest error %@", __FUNCTION__, error);

NSDictionary *jsonDict = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&error];//
if (!error) {
    NSLog(@"%@",jsonDict);
} else {
    NSLog(@"%s JSONObjectWithData error %@", __FUNCTION__, error);
} 
```

或者，如果您没有使用最新的 Xcode 并且无法访问现代 Objective C 字典的定义，那么您显然可以以传统方式定义字典：

```
NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                            @"Authorization", @"Class",
                            @"login",         @"method",
                            _password.text,   @"pass",
                            _username.text,   @"user",
                            nil]; 
```

* * *

**编辑：**

从您`jsonPostBody`的 推断，字典条目可能需要是：

```
NSDictionary *dictionary = @{
    @"json" : @{
        @"Class"  : @"Authorization",
        @"method" : @"login",
        @"pass"   : _password.text,
        @"user"   : _username.text
    }
}; 
```

或者可能（虽然，更不可能），从你的`user`和`pass`定义推断：

```
NSDictionary *dictionary = @{
    @"json" : @{
        @"Class"  : @"Authorization",
        @"method" : @"login",
        @"pass"   : [NSString stringWithFormat:@"password=%@",_password.text],
        @"user"   : [NSString stringWithFormat:@"username=%@",_username.text]
    }
}; 
```

这是一个如何为您的服务器格式化 JSON 的问题。

# php - 使用 PHP 从 ifconfig 获取 IP 地址

> ID：13379922
> 
> 赞同：1
> 
> 时间：2012-11-14T13:40:08.820
> 
> 标签：php, ip, ifconfig

我有下一个php代码：

```
<?php
   $ip = shell_exec("/sbin/ifconfig  | grep 'inet:'| grep -v '127.0.0.1' | cut -d: -f2 | awk '{ print $1}'");
   echo $ip;
?> 
```

当我从命令行 ( `$php5 ip.php`) 运行它时它工作正常，但是当我从浏览器运行它时它什么也不显示 ( `http://localhost/ip.php`)。

顺便说一句，我正在尝试打印我的 IP 地址，但每当我使用时，`$_SERVER['SERVER_ADDR'];`我都会得到`127.0.0.1`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:45:48.110

它可以在“inet”旁边没有冒号的情况下工作

```
grep 'inet ' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:46:44.177

我会编写一个 bash 脚本来执行此操作并执行 bash 脚本。PHP 的 CLI 版本可以访问您的 PATH 环境变量，而 Apache 模块可能无法访问该变量。

```
#!/bin/bash

/sbin/ifconfig | grep 'inet:' | grep -v '127.0.0.1' | cut -d: -f2 | awk '{ print $1}' 
```

然后：

```
<?php

$ip = shell_exec('/path/to/shell/script');
print $ip;

?> 
```

# azure - 如何主动登录到 Windows Azure ACS

> ID：13379923
> 
> 赞同：4
> 
> 时间：2012-11-14T13:40:17.383
> 
> 标签：azure, access-token, wif, acs

我设置了 Azure ACS。我配置了几个 IP；其中之一是自定义 STS。“被动”场景——其中浏览器重定向用于将令牌从 ip 获取到 acs 并再次返回到我的 RP——就像一个魅力。在被动情况下，可以使用 homerealm 将 ACS“引导”到我选择的 IP-STS。
我现在想知道在活动场景中是否可能出现类似的情况。更具体地说：我可以通过向 ACS 提供用户名和密码（以及将处理用户名密码的 IP 的一些 ID）从 ACS 检索令牌吗？

（我想让我的客户了解自定义 STS，所以我不会*直接*向自定义 STS 索要令牌）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:05:58.787

主动身份验证流程并非完全以这种方式工作。凭据不会发送到 ACS，而是通过 WS-Trust 之类的协议直接发送到 IdP。有关这方面的示例，请查看[ACS 联合身份验证示例](http://msdn.microsoft.com/en-us/library/hh127796.aspx)。

ACS 支持的所有协议都不允许以您直接建议的方式通过联合提供者传送凭据（这样做会产生不必要的安全问题，因为这些凭据会暴露给 FP），但事实上这些凭据会到 IdP 而不是 ACS 应该对最终用户不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:26:05.763

好的，我找到了。我需要一个双向过程。首先使用用户名和密码在自定义 sts 上请求一个令牌（受众设置为 acs sts 的正确端点）。接下来将此令牌“交换”为 ACS 颁发的令牌，如下所示：[https](https://stackoverflow.com/questions/13675217/exchange-ip-sts-jwt-token-for-acs-jwt-token) ://stackoverflow.com/questions/13675217/exchange-ip-sts-jwt-token-for-acs-jwt-toke n

# c# - 如何在 Metro UI XAML 中声明空字符串

> ID：13379924
> 
> 赞同：4
> 
> 时间：2012-11-14T13:40:20.910
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime, winrt-xaml

我正在尝试为 WinRT DataTriggers 中的缺失编写简单的替换，例如：

```
<dt:DataTrigger Property="Message" Value="">
    <dt:Setter TargetName="tbMessage" Property="Visibility" Value="Collapsed" />
</dt:DataTrigger> 
```

所以我有在 XAML 中设置的属性 Value 的类 DataTrigger。我需要将值设置为 string.Empty。当我使用“”（空括号）时，值设置为 null，而不是 string.Empty。我试图在资源中定义空字符串：

```
<x:String x:Key="EmptyString"></x:String> 
```

并像使用它一样

```
<dt:DataTrigger Property="Message" Value="{StaticResource EmptyString}">
    <dt:Setter TargetName="tbMessage" Property="Visibility" Value="Collapsed" />
</dt:DataTrigger> 
```

值仍然设置为空。我也尝试使用下一个代码：

```
xmlns:sys="using:System" ... <sys:String x:Key="EmptyString"></sys:String> 
```

此代码抛出异常“在 mscorlib.dll 中发生类型为‘Windows.UI.Xaml.Markup.XamlParseException’的异常，但未在用户代码中处理

WinRT 信息：找不到类型“字符串”。”

`<x:Static Member="sys:String.Empty" />`无法使用using 的方法，因为在 WinRT 中`x:Static`缺少。

甚至可以在 WinRT XAML 中声明一个空字符串吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:58:51.077

尝试这个

```
<TextBlock Text="{x:Static System:String.Empty}" Name="emptyString"/> 
```

# plone - 是否有与 Products.UserField 对 Archetypes 一样的灵巧性字段/小部件？

> ID：13379931
> 
> 赞同：1
> 
> 时间：2012-11-14T13:40:41.650
> 
> 标签：plone, dexterity

我想创建一个具有用户字段的灵巧类型。

我以前使用过[Products.UserField](http://plone.org/products/userfield)，但我希望新类型是灵巧类型。

Products.UserField 是否有任何等价物？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T21:17:30.267

不，我不相信有。各种支持小部件可能是 Archetypes 仍然比 Dexterity 更强大的单一领域。

对于熟悉 z3c.forms 的程序员来说，移植该功能可能并不困难。但是，需要有人足够想要它来实现它——要么自己开发，要么雇佣开发人员/提供赏金。

# jquery - 鼠标悬停时暂停所有动画？

> ID：13379932
> 
> 赞同：1
> 
> 时间：2012-11-14T13:40:42.110
> 
> 标签：jquery, css

好的，所以我试图暂停页面上的所有幻灯片动画。目前，我有三行框都使用相同的滑块脚本，共享相同的类名。我要做的是在其中一个被鼠标悬停时暂停所有 3 个动画。

我正在使用来自[http://responsive-slides.viljamis.com/](http://responsive-slides.viljamis.com/)的响应式幻灯片脚本 这是我标记 HTML 的方式（请忽略 $smarty 语法）：

```
<section class="greenBox">
<ul class="rslides slider1">
<li><img src="{$smarty.const.SITEURL}/images/vane/celebs/hamilton.jpg" data-hover="  {$smarty.const.SITEURL}/images/vane/celebs/hamiltonQ.jpg" alt="Lewis Hamilton"></li>
<li><img src="{$smarty.const.SITEURL}/images/vane/celebs/downey.jpg" data-hover="{$smarty.const.SITEURL}/images/vane/celebs/downeyQ.jpg" alt="Robert Downey JR"></li>
<li><img src="{$smarty.const.SITEURL}/images/vane/celebs/mayer.jpg" data-hover="{$smarty.const.SITEURL}/images/vane/celebs/mayerQ.png" alt="John Mayer"></li>
</ul>
</section> 
```

这是jQuery：

```
$(function () {
  $(".slider1").responsiveSlides({
    maxwidth: 800,
    speed: 800,
  });
}); 
```

当然我可以添加暂停：true; 规则到这一点，但是，它会暂停鼠标悬停的图像，而其他图像当然会继续改变。我想要做的是保持这些图像的顺序，所以我需要在鼠标悬停时暂停所有 3 个！

我试过使用这样的停止规则：

```
$(".slider1").mouseover(function(){
 $("this").stop();
}); 
```

但这并没有做任何事情。我确定这真的很简单，但是我的 jQuery 只是初学者，有什么帮助吗？

我正在处理的网站的网址是[http://vane.vanillasoftware.co.uk](http://vane.vanillasoftware.co.uk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:44:06.423

改变

```
$(".slider1").mouseover(function(){
 $("this").stop();
}); 
```

为了

```
$(".slider1").mouseover(function(){
 $(".slider1").children().stop();
}); 
```

[在这里](http://jsfiddle.net/paska/NDLfZ/)它正在工作。

**警告**：

Stop 是 jQuery 动画中的方法，不是图库插件提供的方法。这可能会产生不良后果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:32:33.020

这是我在 github [https://github.com/viljamis/ResponsiveSlides.js/issues/95上从开发人员那里得到的回复](https://github.com/viljamis/ResponsiveSlides.js/issues/95)

# c# - 绑定后更改 Datagridview 中的值

> ID：13379934
> 
> 赞同：0
> 
> 时间：2012-11-14T13:40:47.070
> 
> 标签：c#, winforms

在我的项目中，我试图在将 DataGridView 与 DataSet 绑定后更改其列中的值。像这样的东西：

```
dgvMain --> DataGridView
dsMainPatients --> DataSet
dsMainDoctors -->  DataSet 
```

* * *

```
 dgvMain.DataSource = null;
  dgvMain.DataSource = dsMainPatients.Tables[0]; 
```

* * *

```
foreach (DataGridViewRow r in dgvMain.Rows)
{
    DataGridViewTextBoxCell txt = new DataGridViewTextBoxCell();
    for (int intCount = 0; intCount < dsMainDoctors.Tables[0].Rows.Count; intCount++)
    {
        if (r.Cells[4].Value.ToString().Equals(dsMainDoctors.Tables[0].Rows[intCount][0].ToString()))
        {
             txt.Value = dsMainDoctors.Tables[0].Rows[intCount][1].ToString();
             r.Cells[4] = txt;   //dgvMain[4, r.Index] = txt; (also tried)
        }
    }                            
 } 
```

我的解决方案成功进入 if 语句，甚至`txt`保持正确的值，但我不知道发生了什么`r.Cells[4]`，它具有相同的旧值。
即使网格列中的值没有改变，一切都是正确的。如何改变它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:47:16.230

您需要使用以下`CellFormatting`事件`DataGridView`：

```
private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (e.ColumnIndex == 4)
    {
         for (int intCount = 0; intCount < dsMainDoctors.Tables[0].Rows.Count; intCount++)
         {
             if (e.Value.ToString().Equals(dsMainDoctors.Tables[0].Rows[intCount][0].ToString()))
             {
                  e.Value = txt.Value = dsMainDoctors.Tables[0].Rows[intCount][1].ToString();
             }
         }
     }
} 
```

# android - 如何调用 asp.net 网络服务？

> ID：13379936
> 
> 赞同：0
> 
> 时间：2012-11-14T13:40:47.827
> 
> 标签：android

我创建了一个 asp.net Web 服务，它有两种方法，`getBoughtApps(String imei)` 一种是`getAllApps()`. 服务名称是`ArttechApps`。我需要一个使用 java 或 android 调用这些方法的代码，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:05:43.443

您应该编写一个将 xml 或 json 返回给客户端的中间件服务。

在您的 iis 上使用 receiver.aspx 创建一个新的 Web 项目

清除你的aspx文件代码，只剩下，

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="receiver.aspx.cs" Inherits="receiver" %> 
```

然后是您的代码页（.cs 文件）

将您的服务添加到此项目

在页面加载时

```
 if (Request.QueryString["ID"] != null)
 {
        string id = Request.QueryString["id"]; // ID parameter will be taken from your client.I will explain.

        if (id == "getBoughtApps")
        {
           string imei= Request.QueryString["imei"];  
           // IMEI parameter will be taken from your client.I will explain.

            // Use your service method here then create an xml and write 
            // look at Example below 

            DataSet ds = SqlHelper.ExecuteDataset(connStr, CommandType.StoredProcedure, sp_Get_BoughtApps"
                , new SqlParameter("@imei", imei));

            string str = @"<?xml version=""1.0"" encoding=""utf-8"" ?><test>";

            foreach (DataRow dr in ds.Tables[0].Rows)
            {
                str += "<item>";
                str += "<ID>" + dr["ID"].ToString() + "</ID>";
                str += "<appName>" + dr["appName"].ToString() + "</appName>";
                str += "</item>";
            }

            str += @"</test>";

            Response.Write(str); // it returns an xml and your client will catch it
        }

        if (id == "getAllApps")
        {
              // write your code
        }
    } 
```

在您的客户端：

```
private class asynGetBoughtApps extends AsyncTask<String, Void, Integer> {
    protected Integer doInBackground(String... params) {
        try {
            final Uri.Builder uri = new Uri.Builder();
            uri.scheme("http");
            uri.authority(ip or domainname); // "127.0.0.1"
            uri.path(alias name ); // "android/reciever.aspx"
            uri.appendQueryParameter("id", "getBoughtApps"); // you can sent querystring with this
            uri.appendQueryParameter("imei", "35464545454");

            URL url = new URL(uri.toString());
            DocumentBuilderFactory dbf = DocumentBuilderFactory
                    .newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc = db.parse(new InputSource(url.openStream()));
            doc.getDocumentElement().normalize();

            NodeList nodeList = doc.getElementsByTagName("item"); // xml node which will loop in

            for (int i = 0; i < nodeList.getLength(); i++) {

                Node node = nodeList.item(i);
                Element fstElmnt = (Element) node;

                NodeList nodelist = null;
                Element element = null;

                nodelist = fstElmnt.getElementsByTagName("ID"); 
                element = (Element) nodelist.item(0);
                nodelist = element.getChildNodes();
                if ((nodelist.item(0)) != null)
                    string ID = (nodelist.item(0)).getNodeValue().toString();

                                    nodelist = fstElmnt.getElementsByTagName("appName");
                element = (Element) nodelist.item(0);
                nodelist = element.getChildNodes();
                if ((nodelist.item(0)) != null)
                    string appName= (nodelist.item(0)).getNodeValue().toString();

            }
        } catch (Exception e) {             
            return 0;
        }

        return 1;
    }

    protected void onPostExecute(Integer result) {
        try {
            // Now you get data from your server and you can use it in your app
        } catch (Exception e) {             
        }

        super.onPostExecute(result);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:57:20.653

您需要知道服务方法的 URI，然后，假设您使用的是 JSON，您的 android 代码可能如下所示：

```
 public JSONObject webServiceRequest(JSONObject reqJS) throws IOException, JSONException
    {
        HttpPost pr = new HttpPost("http://yourhost.com/path/to/service/method/");
        pr.setHeader("Accept", "application/json"); 
        pr.setHeader("Content-type", "application/json");
        pr.setEntity(new StringEntity(reqJS.toString(), "UTF-8"));

        HttpParams httpParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParams, 20000); 
        HttpConnectionParams.setSoTimeout(httpParams, 20000); 
        HttpClient client = new DefaultHttpClient(httpParams);

        HttpResponse response = client.execute(pr);

        InputStream inps = response.getEntity().getContent();

        StatusLine sl = response.getStatusLine();
        if(sl.getStatusCode() != 200)
        {
            Log.e("TAG", String.format("Error %d reply on request: %s", sl.getStatusCode(), sl.getReasonPhrase()));
            return null;
        }

        BufferedReader br = new BufferedReader(new InputStreamReader(inps));
        StringBuilder sb = new StringBuilder();
        String respLine;
        while((respLine = br.readLine()) != null)
        {
            sb.append(respLine);
        }

        return new JSONObject(sb.toString());
    } 
```

reqJS 的内容取决于您的服务接口。将您的参数值放入对象，然后从该方法返回的对象中读取回复值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:08:54.520

这是我用来调用ASMX webservices（SOAP）的Ksoap2 soap类，希望对你有用

```
import java.io.IOException;
import java.lang.reflect.Type;
import java.util.Vector;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.SoapFault;
import org.ksoap2.serialization.KvmSerializable;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.AndroidHttpTransport;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;
import android.util.Log;

public class webServices {

    public static String METHOD_NAME;
    public static String NAMESPACE;
    public static String URL;   
    public SoapSerializationEnvelope Envelope_class = null; 
    private SoapObject request;

    public webServices(String NombreMetodo, String Namespace, String URLWService )
    {       
        METHOD_NAME = NombreMetodo;
        NAMESPACE= Namespace;
        URL= URLWService;   
        request= GetSoapObject(METHOD_NAME);
    }

    public void AddProperty(String Name, Object Value ,Type tipo)
    {
        PropertyInfo prop = new PropertyInfo();     
        prop.setName(Name);
        prop.setValue(Value);
        prop.setType(tipo);
        request.addProperty(prop);  
    }

    private SoapObject GetSoapObject (String Methodname)
    {
        return new SoapObject(NAMESPACE,METHOD_NAME);
    }

    private static SoapSerializationEnvelope GetEnvelope(SoapObject Soap)
    {
       SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
       envelope.dotNet = true;     
       envelope.setOutputSoapObject(Soap);
       return envelope;

     }

    public SoapObject CallWebService() throws IOException, XmlPullParserException 
    {       
        SoapObject response=null;
        SoapSerializationEnvelope Envelope = GetEnvelope(request);
        Envelope.bodyOut=request;
        AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport (URL);
        androidHttpTransport.debug=true;
        try
           { 

               androidHttpTransport.call(NAMESPACE + METHOD_NAME, Envelope);              
               response = (SoapObject) Envelope.getResponse();      
               Envelope_class = Envelope;
           }
        catch(Exception e)
        {
            e.printStackTrace();
            Log.d("AndroidRequest",androidHttpTransport.requestDump);
            Log.d("AndroidResponse",androidHttpTransport.responseDump);
            return null;
        }   

        return response;
    }

    public Object CallWebServicePrimitive() throws SoapFault
    {
        SoapObject request = GetSoapObject(METHOD_NAME);    
        SoapSerializationEnvelope Envelope = GetEnvelope(request);

         HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
         try {
            androidHttpTransport.call(NAMESPACE + METHOD_NAME, Envelope);
        } catch (IOException e) {
            Log.d("ErrorApp", e.getMessage().toString());
        } catch (XmlPullParserException e) {
            Log.d("ErrorApp", e.getMessage().toString());
        }   

        SoapPrimitive response= (SoapPrimitive) Envelope.getResponse();
        return response;
    }

} 
```

这里有一个调用示例：

```
public static Provincias[] GetProvincias() throws IOException, XmlPullParserException, NumberFormatException, IllegalArgumentException, IllegalAccessException, InstantiationException
    {
        webServices miws = new webServices("MethodName","http://tempuri.org/",url_web);                                 
            //Add string parameter
        miws.AddProperty("Token",Token,String.class);

        SoapObject respuesta = miws.CallWebService();
        Provincias[] provincias= ParsearProvincias(respuesta);
        return provincias;

    } 
```

# java - 如何打印包含大量组件的 Java Swing UI？

> ID：13379937
> 
> 赞同：1
> 
> 时间：2012-11-14T13:40:47.697
> 
> 标签：java, swing, printing, jcomponent

需求说明：

(1) 我设计了一个带有 Java Swing 组件的 UI，其中包含 JTextFiled、JLabel 和 JTable。

(2) 由于 UI 大小限制，JTable 被包裹在 JScrollPanel 中。

问题：

我想用“打印”按钮打印所有组件。但是我被 JTable 卡住了，因为表格中有一些行不可见（无法打印）。

那么我应该如何处理 JTable，或者有另一种方法来打印整个组件？

感谢先进，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:41:51.733

You don't want to print the UI. You want to print the contents of the `JTable`.

The `JTable` has an API for printing. This tutorial might help: [How to Print Tables](http://docs.oracle.com/javase/tutorial/uiswing/misc/printtable.html)

# matlab - 人类可读的数据文件

> ID：13379938
> 
> 赞同：1
> 
> 时间：2012-11-14T13:40:49.753
> 
> 标签：matlab, file-io

除了 csv 文件，我还有哪些其他选项可以在 matlab 中读取和写入人类可读的数据文件？数据由唯一的参数值对组成（不一定是分层的 - 见下文）。

我的情况是这样的。我目前正在使用 xml2struct 读取 XML 文件，然后将其转换为参数结构。不幸的是，我不能再使用这种方法，因为我打算使用 Matlab 编码器，它不支持元胞数组或 strrp 等。

任何反馈都将不胜感激——尤其是在 Matlab 编码器方面稳健的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:45:05.813

你也可以[编写](http://www.mathworks.com/matlabcentral/fileexchange/33381-jsonlab-a-toolbox-to-encodedecode-json-files-in-matlaboctave)一个[Json](http://www.json.org/)文件，它是结构化的并且是人类可读的。我不知道它与 Matlab 编码器的兼容性。

# mysql - 在特定字段的位置上按字符查找记录 - ActiveRecord

> ID：13379947
> 
> 赞同：0
> 
> 时间：2012-11-14T13:41:38.493
> 
> 标签：mysql, ruby-on-rails, ruby, activerecord

考虑我们有一个`banners`带有伪位数组的表（我知道，位保存为字节：）我用它们来存储 4 个设置。

```
| name    | targeting |
+---------+-----------+
| banner1 | 1001      |
| banner2 | 0010      | 
```

我想在表中搜索`banners`并在定位属性的第三个位置找到所有带有“1”的记录。

## 工作解决方案

我可以做这样的事情

```
banners = []
Banner.all do |banner|
  banners << banner if banner.targeting[2] == "1"
end 
```

## 更好的解决方案？

最好用 SUBSTRING 编写自己的 SQL 查询，或者您有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:33:38.247

尝试在 mysql 中使用正则表达式。很确定语法是正确的，但我还没有验证：

Banner.where("定位 REGEXP '^(2)' = '1'")

# facebook - 添加 facebook 应用程序设置“自动”

> ID：13379952
> 
> 赞同：0
> 
> 时间：2012-11-14T13:42:00.377
> 
> 标签：facebook, settings, add

如果您查看[http://iframehost.com/help/addapp](http://iframehost.com/help/addapp)和[http://iframehost.com/newapp](http://iframehost.com/newapp)，您会发现它们有一种非常好的方式来填写应用程序的所有设置。您只需使用名称/命名空间创建新应用程序，然后复制您获得的应用程序 ID 和密钥，在 iframehost.com/newapp 填写这些，所有其余设置“自动”显示在 facebook 上的应用程序设置中.

我知道应用程序 ID 和密钥一起允许 iframehost-server 将其余的东西发送到 FB，但是谁能指出我正确的方向，或者更好，给我一个例子或什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:29:53.373

您可以通过 API 为您的应用程序编辑某些属性（但不是全部）——所有这些都在此处进行了描述：[https ://developers.facebook.com/docs/reference/api/application/](https://developers.facebook.com/docs/reference/api/application/)

# simplecart - 如何将 SimpleCart JS v3 订单内容传递给 PHP 表单？

> ID：13379953
> 
> 赞同：0
> 
> 时间：2012-11-14T13:42:02.030
> 
> 标签：simplecart

我想使用最新的 SimpleCart JS (v3) 来使用电子邮件结帐。不幸的是，没有实际的 sendform php 文件的来源。

我使用以下方法启动了 SimpleCart：

```
simpleCart({
  checkout: { 
    type: "SendForm" , 
    url: "sendcart.php" ,
    method: "POST" , 
    success: "success.php" , 
    cancel: "cancel.php"
  }
}); 
```

并使用这个 sendcart.php

```
<?php
  $to      = 'mail@someshop.com';
  $subject = 'Simple Cart Order';
  $body = $_POST;
  $headers = 'From: webmaster@example.com' . "\r\n" .
          'Reply-To: webmaster@example.com' . "\r\n" .
          'X-Mailer: PHP/' . phpversion();
  mail($to, $subject, $body, $headers);
  Header('Location: thankyou.php');
?> 
```

我坚持的是，我应该使用 $_POST 来调用购物车的内容来填充 $body 吗？

作为一个非编码员，这对我来说有点难以猜测 :) 不过，对你们中的一些人来说可能很明显 :)

这是[simplecart.js 文件](https://raw.github.com/wojodesign/simplecart-js/master/simpleCart.js)

谢谢！

编辑：

我终于明白 $_POST 是一个数组。现在我需要一个循环来提取数组的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T09:17:16.227

苦苦挣扎，但终于成功了：

```
 <?php
  $to = 'mail@someshop.com';
  $subject = 'Simple Cart Order';
  $content = $_POST;
  $body = '';
  for($i=1; $i < $content['itemCount'] + 1; $i++) {
  $name = 'item_name_'.$i;
  $quantity =  'item_quantity_'.$i;
  $price = 'item_price_'.$i;
  $body .= 'item #'.$i.': ';
  $body .= $content[$name].' '.$content[$quantity].' '.$content[$price];
  $body .= '<br>';
  }
  $headers = 'From: webmaster@example.com' . "\r\n" .
             'Reply-To: webmaster@example.com' . "\r\n" .
             'X-Mailer: PHP/' . phpversion();
  mail($to, $subject, $body, $headers);
  Header('Location: thankyou.php');
  ?> 
```

有点难过，因为这次没有人帮忙，甚至没有关心！:(

[http://www.adamedoe.com/2012/11/simplecartjs-v3-php-code-for-sendform.html](http://www.adamedoe.com/2012/11/simplecartjs-v3-php-code-for-sendform.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T09:30:23.647

@adamae 我有一个可行的解决方案，可以向管理员和访问者发送成功的电子邮件，但问题是访问者收到一些可变数据为空，我特此附上表格和 php 文件，请仔细阅读，看看问题出在哪里

所以电子邮件结帐代码：

```
emailCheckout=function(){alert("====== FINISH YOUR SHOPPING ======\n\nThank you for purchasing our product.\nWe need your data to delivery our product. \n\nPlease, enter your data in to the next box, \n\n-------------- Press OK to continue --------------");var b=prompt("Enter your Email for invoice order: ");var bb=prompt("Enter your name: ");var bbb=prompt("Enter your address: ");var bbbb=prompt("Enter your phone number, I will call or send you a message about the product you purchase: ");itemsString="";esubtotal=0;etotal=0;for(var c in this.items){var d=this.items[c];esubtotal=Math.round(d.quantity*d.price*100)/100;itemsString+=d.quantity+" x "+ d.name+" --> "+ d.quantity+" x Rp."+ d.price+" = Rp."+ String(esubtotal)+"
";etotal+=esubtotal} etotal=Math.round(etotal*100)/100;itemsString+="
Total: Rp."+ String(etotal);var e=document.createElement("form");e.style.display="none";e.method="POST";e.action="http://dorivrach.site90.net/sendjs.php";e.acceptCharset="utf-8";e.appendChild(a.createHiddenElement("jcitems",itemsString));e.appendChild(a.createHiddenElement("jcremite",b));e.appendChild(a.createHiddenElement("buyername",bb));e.appendChild(a.createHiddenElement("buyeralamat",bbb));e.appendChild(a.createHiddenElement("buyerhp",bbbb));e.appendChild(a.createHiddenElement("email",this.email));e.appendChild(a.createHiddenElement("catatanTambahanInvoice",this.catatanTambahanInvoice));e.appendChild(a.createHiddenElement("formatsmsKonfirmasi",this.formatsmsKonfirmasi));e.appendChild(a.createHiddenElement("contohformatsmsKonfirmasi",this.contohformatsmsKonfirmasi));e.appendChild(a.createHiddenElement("urlWebsite",this.urlWebsite));e.appendChild(a.createHiddenElement("alamatPemilik",this.alamatPemilik));e.appendChild(a.createHiddenElement("noHP",this.noHP));e.appendChild(a.createHiddenElement("urlFacebook",this.urlFacebook));e.appendChild(a.createHiddenElement("urlTwitter",this.urlTwitter));e.appendChild(a.createHiddenElement("akunbank1",this.akunbank1));e.appendChild(a.createHiddenElement("norek1",this.norek1));e.appendChild(a.createHiddenElement("namarek1",this.namarek1));e.appendChild(a.createHiddenElement("akunbank2",this.akunbank2));e.appendChild(a.createHiddenElement("norek2",this.norek2));e.appendChild(a.createHiddenElement("namarek2",this.namarek2));e.appendChild(a.createHiddenElement("akunbank3",this.akunbank3));e.appendChild(a.createHiddenElement("norek3",this.norek3));e.appendChild(a.createHiddenElement("namarek3",this.namarek3));e.appendChild(a.createHiddenElement("akunbank4",this.akunbank4));e.appendChild(a.createHiddenElement("norek4",this.norek4));e.appendChild(a.createHiddenElement("namarek4",this.namarek4));e.appendChild(a.createHiddenElement("akunbank5",this.akunbank5));e.appendChild(a.createHiddenElement("norek5",this.norek5));e.appendChild(a.createHiddenElement("namarek5",this.namarek5));e.appendChild(a.createHiddenElement("akunbank6",this.akunbank6));e.appendChild(a.createHiddenElement("norek6",this.norek6));e.appendChild(a.createHiddenElement("namarek6",this.namarek6));e.appendChild(a.createHiddenElement("businessName",this.businessName));e.appendChild(a.createHiddenElement("urlreferrer",this.urlReferrer));document.body.appendChild(e);e.submit();document.body.removeChild(e);return};

<SCRIPT type='text/javascript'>

simpleCart.email = 'abc@gmail.com';
simpleCart.checkoutTo = Email;
simpleCart.currency = INR;
simpleCart.urlWebsite = 'www.abc.blogspot.com';
simpleCart.taxRate = 0.00;
simpleCart.shippingFlatRate = 0.00;
simpleCart.shippingQuantityRate = 1.00;
simpleCart.alamatPemilik = 'sco # 361 ,city-zarakpur , state-punjab , country-India ';
simpleCart.noHP = '+911234567899';
simpleCart.urlFacebook = 'http://www.facebook.com/pages/your facebook';
simpleCart.urlTwitter = 'https://twitter.com/your twitter';
simpleCart.akunbank1 = 'abcdef bank';
simpleCart.norek1 = '55113361232';
simpleCart.namarek1 = 'abc xyz ';

simpleCart.akunbank2 = 'aef bank';
simpleCart.norek2 = '55555361232';
simpleCart.namarek2 = 'abc xyz ';

simpleCart.akunbank3 = 'cdef bank';
simpleCart.norek3 = '55133331232';
simpleCart.namarek3 = 'abc xyz ';

simpleCart.akunbank4 = 'abc bank';
simpleCart.norek4 = '55100001232';
simpleCart.namarek4 = 'abc xyz ';

simpleCart.akunbank5 = 'abcd bank';
simpleCart.norek5 = '55113360098';
simpleCart.namarek5 = 'abc xyz ';

simpleCart.akunbank6 = 'abcde bank';
simpleCart.norek6 = '55113360000';
simpleCart.namarek6 = 'abc xyz ';

simpleCart.urlReferrer = 'http://www.abc.blogspot.com';
simpleCart.businessName = 'abc xyz';
simpleCart.formatsmsKonfirmasi= '(Name, Email, transfer amount, name of bank and branch  where you did transfer, Transfer DATE)';
simpleCart.contohformatsmsKonfirmasi= 'xyz, xyz@xyz.com, INR 1500 , abc-qwerty , 12 December 2012 ';
simpleCart.catatanTambahanInvoice= '(Have a nice day for you and I hope you enjoy it)';
simpleCart.cartHeaders = ["Name", "thumb_image" , "Quantity_input" , "Total", "remove" ];

</SCRIPT> 
```

和 sendhs.php 代码：

```
<?php
/* sending e-mail with the order to the visitors email*/

$to
= $_POST['jcremite'];

$subject = 'Order copy from domain';

$jcitems = '<body style="background-color: #333333; none repeat scroll 0% 50%; -moz-background-clip: initial; -moz-background-origin: initial; -moz-background-inline-policy: initial;">
<table align="center" bgcolor="#ffffff" border="0" cellpadding="10" cellspacing="0" width="600"> 
<tbody>

<tr style="background-color: #333333">

<td bgcolor="#F3F3F3" style="margin: 4px; padding: 4px; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: center;">This email is a notification email because you or someone with your email have ordered products on our website <a href="'.$_POST['urlWebsite'].'">' .$_POST['businessName'].' </a><br /></td>
</tr>
<tr>
<td>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody>
<tr>
<td style="background-color: rgb(191, 49, 26);">
<table border="0" cellpadding="12" cellspacing="0" width="100%">
<tbody>
<tr>
<td colspan="1" rowspan="1" style="text-align: center;"><big style="color: white; font-family: Arial Black;"><big>ORDER INVOICE</big></big><span style="font-weight: bold; color: white; font-family: Times New Roman,Times,serif;">&nbsp;</span><br />
<small style="font-family: Verdana;"><span style="color: white; font-weight: bold;">Welcome To Our Online Store</span></small></td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr>
<td align="center"><br />
</td>
</tr>
<tr>
<td align="center">
<table border="0" cellpadding="10" cellspacing="0" width="100%">
<tbody>
<tr>
<td valign="top" width="324">
<h1 style="font-family: Arial,Helvetica,sans-serif; font-size: 20px; padding-bottom: 2px; margin-bottom: 2px; margin-top: 7px; padding-top: 7px; color: rgb(191, 49, 26); text-align: left; font-weight: normal;">Hello '. $_POST['buyername'] . ', </h1>
<p style="margin: 0pt; padding: 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: left;">&nbsp;</p>
<p style="margin: 0pt; padding: 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: left;">Thank you for visiting and making a purchase at our Store '. $_POST['businessName'] . '</p>
<p style="margin: 4px 0pt; padding: 4px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: left;">Here are the goods that you ordered from our website: :</p>
<table style="background-color: rgb(204, 0, 0); width: 324px;" border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td style="text-align: center;"><span style="color: white; font-weight: bold;">YOUR ORDER </span>
</td>
</tr>
<tr style="background-color: rgb(204, 0, 0);">
<td style="background-color: rgb(238, 238, 238);">
<p style="margin: 4px 0pt; padding: 4px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: left;">'. $_POST['jcitems'] . '</p>
</td>
</tr>
</tbody>
</table>
<p style="margin: 4px 0pt; padding: 4px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: left;">Please make a note that: <b>The price does not include postage.</b>. We will contact you via SMS or EMAIL to inform the total cost that you have to transfer. Once you get a confirmation from us, please make payment via bank listed in the mode of payment box, and then do a confirmation in the following format:  :</p>
<table style="text-align: left; background-color: white; width: 321px; height: 100px;" border="0" cellpadding="10" cellspacing="2">
<tbody>
<tr style="color: black;">
<td style="background-color: rgb(204, 204, 204); "><p style="margin: 4px 0pt; padding: 4px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: left;">'. $_POST['formatsmsKonfirmasi'] . '</span></p></td>
</tr>
<tr style="color: black;">
<td style="background-color: rgb(153, 153, 153);">
<p style="margin: 4px 0pt; padding: 4px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: left;">
<strong>Example : </strong>'. $_POST['contohformatsmsKonfirmasi'] . '</p>
</td>
</tr>
<tr style="color: black;">
<td style="background-color: silver;">
<p style="margin: 4px 0pt; padding: 4px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: left;">Then SMS me at: '. $_POST['noHP'] . '</span></small></p>
<p style="margin: 4px 0pt; padding: 4px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: left;">or email me at email addres : <br>
'. $_POST['email'] . '</span></p>
</td>
</tr>
</tbody>
</table>
<p style="margin: 4px 0pt; padding: 4px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: left;">Thank you for visting and shopping at our online Store '. $_POST['businessName'] . '</p>

<p style="margin: 4px 0pt; padding: 4px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: left;">Please do not hesitate to tell others if you liked our products and services and tell us if the products were not of that quality which you expected or there were some faults in our services . Your feedback is important for us to grow high so be in touch and we are awaiting your next kind visit to our online store.</p>

<p style="margin: 4px 0pt; padding: 4px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: left;">Regards :</p>
<p style="margin: 4px 0pt; padding: 4px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: left;"><b>'. $_POST['businessName'] . '</b><br />
<span style="font-style: italic;">'. $_POST['urlWebsite'] . '</span></p>
<br/><br/><hr>
<p style="font-family: Arial,Helvetica,sans-serif; font-size: 10px; color: rgb(51, 51, 51); text-align: left;"></p>
<div style="text-align: center;"><p style="font-family: Arial,Helvetica,sans-serif; font-size: 18px; text-align: center;">ATTENTION!!</p>
<p style="margin: 4px 0pt; padding: 4px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: center;">Be carefull before buying, goods bought once can not be exchanged or refunded
<br /></div>
</td>
<td valign="top">
<table style="padding-top: 5px; margin-top: 5px;" border="0" cellpadding="10" cellspacing="0" width="100%">
<tbody>
<tr>
<td align="center" style="border-left: 2px solid rgb(191, 49, 26);"><span style="font-family: Arial,Helvetica,sans-serif;"><span style="font-weight: bold;">Your personal data<br />--------------------------------------</span><br />
<big><font size="-2"><big><span style="font-weight: bold;"></span></big></font></big></span>
<table style="text-align: center; width: 100%;" border="0" cellpadding="5" cellspacing="2">
<tbody>
<tr>
<td style="background-color: rgb(204, 204, 204);"><p style="margin: 4px 0pt; padding: 4px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: center;"><strong>Name : </strong><br />
'. $_POST['buyername'] .' </p></td>
</tr>
<tr align="center">
<td style="background-color: rgb(228, 228, 228);"><p style="margin: 4px 0pt; padding: 4px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: center;"><strong>Email:</strong><br />
'. $_POST['jcremite'] . '</p></td>
</tr>
<tr align="center">
<td style="background-color: silver;"><p style="margin: 4px 0pt; padding: 4px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: center;"><strong>Address:</strong><br />
'. $_POST['buyeralamat'] . '</p></td>
</tr>
<tr align="center">
<td style="background-color: rgb(228, 228, 228);"><p style="margin: 4px 0pt; padding: 4px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: rgb(51, 51, 51); text-align: center;"><strong>Phone Number : </strong><br /> 
'. $_POST['buyerhp'] . '</p></td>
</tr>
</tbody>
</table>
<span style="font-family: Arial,Helvetica,sans-serif;"><big><font size="-2"><big><br />
</big></font></big></span></td>
</tr>
</tbody>
</table>
<br />
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody>
<tr>
<td style="background-color: rgb(191, 49, 26);">
<h2 style="margin: 8px 8px 0pt; padding: 8px 8px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 15px; color: rgb(255, 255, 255); font-weight: bold; text-align: center;"><big>Mode of Payment
</big><br />
</h2>
<p style="margin: 0pt 8px 8px; padding: 0pt 8px 8px; font-family: Arial,Helvetica,sans-serif; font-size: 12px; color: rgb(255, 255, 255); text-align: center;">You can make a payment through any of the following banks&nbsp;</p>
<p style="margin: 0pt 8px 8px; padding: 0pt 8px 8px; font-family: Arial,Helvetica,sans-serif; font-size: 12px; color: rgb(255, 255, 255); text-align: center;">----------------------------------------------</p>

<p style="margin: 0pt 8px 8px; padding: 0pt 8px 8px; font-family: Arial,Helvetica,sans-serif; font-size: 12px; color: rgb(255, 255, 255); text-align: center;"><big><span style="font-weight: bold;">'. $_POST['akunbank1'] . '</span></big><br />'. $_POST['namarek1'] . '<br />'. $_POST['norek1'] . '</p>
<p style="margin: 0pt 8px 8px; padding: 0pt 8px 8px; font-family: Arial,Helvetica,sans-serif; font-size: 12px; color: rgb(255, 255, 255); text-align: center;"><big><span style="font-weight: bold;">'. $_POST['akunbank2'] . '</span></big><br />
'. $_POST['namarek2'] . '<br />
'. $_POST['norek2'] . '</p>
<p style="margin: 0pt 8px 8px; padding: 0pt 8px 8px; font-family: Arial,Helvetica,sans-serif; font-size: 12px; color: rgb(255, 255, 255); text-align: center;"><big><span style="font-weight: bold;">'. $_POST['akunbank3'] . '</span></big><br />
'. $_POST['namarek3'] . '<br />
'. $_POST['norek3'] . '</p>
<p style="margin: 0pt 8px 8px; padding: 0pt 8px 8px; font-family: Arial,Helvetica,sans-serif; font-size: 12px; color: rgb(255, 255, 255); text-align: center;"><big><span style="font-weight: bold;">'. $_POST['akunbank4'] . '</span></big><br />
'. $_POST['namarek4'] . '<br />
'. $_POST['norek4'] . '</p>
<p style="margin: 0pt 8px 8px; padding: 0pt 8px 8px; font-family: Arial,Helvetica,sans-serif; font-size: 12px; color: rgb(255, 255, 255); text-align: center;"><big><span style="font-weight: bold;">'. $_POST['akunbank5'] . '</span></big><br />
'. $_POST['namarek5'] . '<br />
'. $_POST['norek5'] . '</p>
<p style="margin: 0pt 8px 8px; padding: 0pt 8px 8px; font-family: Arial,Helvetica,sans-serif; font-size: 12px; color: rgb(255, 255, 255); text-align: center;"><big><span style="font-weight: bold;">'. $_POST['akunbank6'] . '</span></big><br />
'. $_POST['namarek6'] . '<br />
'. $_POST['norek6'] . '</p>
</td>
</tr>
</tbody>
</table>

</td>

</tr>

</tbody>

</table>

<table border="0" cellpadding="0" cellspacing="0" width="100%">

<tbody>

<tr>

<td>

</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr style="background-color: rgb(106, 104, 102);">
<td>
<table align="center" border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody>

<tr style="font-family: Arial,Helvetica,sans-serif; font-size: 11px; color: rgb(255, 255, 255); text-align: center;">

<td colspan="1" rowspan="1"><p>Thanks again for your kind visit to : <em><strong>OUR ONLINE STORE</strong></em><br />
<p style="margin: 4px 0pt; padding: 4px 0pt; font-family: Arial,Helvetica,sans-serif; font-size: 12px; line-height: 18px; color: orange; text-align: left;">* Do you have any questions? then please do not hesitate emailing me at '. $_POST['email'] . '</p><br />

<a href="'. $_POST['urlWebsite'] . '" style="color: white;"><strong>&gt;&gt;LINK TO OUR ONLINE STORE : '. $_POST['businessName'] . '  &lt;&lt;</strong></a><br />

</span></td>

</tr>
</tbody>
</table>
</td>
</tr> </tbody></table></body>';
$headers = 'From: ' . $_POST['businessName'] . '<' . $_POST['email'] . '>'."\r\n" ;

'Reply-To:' . $_POST['email'] . "\r\n" ;
$headers .= 'MIME-Version: 1.0' . "\r\n";   $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
mail($to, $subject, $jcitems, $headers); 

// /* sending e-mail to the shop email */   
$to
= $_POST['email'];  $subjectAdmin = 'NEW ORDER';    $jcitemsAdmin = '<html><body>Hello Admin, there was a visitor at your online store <b>' . $_POST['businessName'] . '</b><br/><br/> Here are the goods ordered by the visitor :<br/>' . $_POST['jcitems'] . '<br/>    <br/>Here is the brief data of the visitor :   <br/>===============================================    <br/>Email : ' . $_POST['jcremite'] . '<br/>Name : ' . $_POST['buyername'] .    '<br/>Address :'. $_POST['buyeralamat'] . '<br/>Phone Number : '. $_POST['buyerhp'] . '<br/>===============================================  <br/><br/> It is suggested that you contact your customers via EMAIL and SMS to inform them about TOTAL cost to be transferred (including postage), do not wait until they are contact you first, because more than 60% of visitors are passive consumers and window shoppers . Therefore we recommend  you  to send SMS or / and EMAIL to visitors. 

<br/><br/>Have a nice day!</body></html>';  $headers = 'From: visitors email <'.$_POST['jcremite'].'>'."\r\n" ;

'Reply-To:' . $_POST['jcremite'] . "\r\n" ; $headers .= 'MIME-Version: 1.0' . "\r\n";   $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
mail($to, $subjectAdmin, $jcitemsAdmin, $headers);

/*Clearing the cart info after succesfull order is made*/

setcookie ("simpleCart", "", time() - 3600);

header('location:' . $_SERVER['HTTP_REFERER'].'p/thank-you.html');

die;

?> 
```

它就像一个魅力

问题仅在于访问者电子邮件中的某些帖子变量为空，请查看代码并查看是否有解决方案：

你也可以给我发邮件`chikitsakgupt@gmail.com`

# java - 在 Jeditorpane 中的 html 文本中呈现图像的问题

> ID：13379954
> 
> 赞同：2
> 
> 时间：2012-11-14T13:42:04.027
> 
> 标签：java, html, image, jeditorpane, htmleditorkit

我有一个包含 html 内容的字符串，我将它设置为 JeditorPane。该字符串包含一个图像源。我在渲染它时面临很多问题。

我需要将图像发送到打印机。一切看起来都不错，但徽标始终是损坏的图像。

这是html代码

```
<td style="width:20%; height: auto" colspan="1">
<img src = "images/client-logo1.png" />
</td> 
```

这就是我在将html读入字符串名称html后使用它的方式

```
 protected byte[] createImage(String html, String imageName) {
    final String methodName = "createImage";
    if (LOG.isTraceEnabled()) {
        LOG.trace("enter\n\t{}",  new Object[] {html, imageName});
    }
    StringReader reader = new StringReader("");
    JEditorPane pane = new JEditorPane();
    // pane.setEditable(false);
    pane.setEditorKit(new HTMLEditorKit());
    pane.setContentType("text/html");
    pane.setText(html);
    pane.setSize(IMAGE_WIDTH, IMAGE_HEIGHT);
    pane.setBackground(Color.white);

    // Create a BufferedImage
    BufferedImage image = new BufferedImage(pane.getWidth(), pane
            .getHeight(), BufferedImage.TYPE_INT_ARGB);
    Graphics2D g = image.createGraphics();

    // Have the image painted by SwingUtilities
    JPanel container = new JPanel();
    SwingUtilities.paintComponent(g, pane, container, 0, 0, image
            .getWidth(), image.getHeight());
    g.dispose();
    byte[] imageInByte = null;
    try {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ImageIO.write(image, "PNG", baos);
    baos.flush();
    imageInByte = baos.toByteArray();
    } catch (IOException e1) {
        e1.printStackTrace();
        throw new CVProxyApplicationException(
                "Not able to create image due to: "
                        + e1.getLocalizedMessage());
    }
    if (LOG.isTraceEnabled()) {
        LOG.trace("exit\n\t{}");
    }
    /*
     * // If printer supports bytes, no need to create an image.
     * ByteArrayOutputStream os = new ByteArrayOutputStream();
     * image.flush(); try { ImageIO.write(image, "png", os); os.flush(); }
     * catch (IOException e1) { e1.printStackTrace(); } return
     * os.toByteArray();
     */
    return imageInByte;
} 
```

有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T16:11:30.917

我怀疑问题可能出在**SRC 属性**中。确保*images/client-logo1.png*是图像的实际路径。如果它存储在本地，请记住使用前缀`file:`。

例如，如果图像存储在 Windows 上的路径*C:\images\client-logo1.png 下*，则 img 标记将是：

`<img src="file:C:\images\client-logo1.png" />`

# android - Android 飞行模式 API lvl 17 切换

> ID：13379955
> 
> 赞同：4
> 
> 时间：2012-11-14T13:42:07.493
> 
> 标签：android

由于 api lvl 17 飞行模式设置已从 Settings.System 移至[Settings.Global](http://developer.android.com/reference/android/provider/Settings.Global.html)

问题是现在我不能再切换设置了。API 描述是那些设置是只读的。有没有人设法找到改变它的方法？

Pre API lvl 17 代码有效：

```
Settings.System.putInt(context.getContentResolver(), Settings.System.AIRPLANE_MODE_ON, 1); 
```

我尝试过但不起作用的 API lvl 17 代码：

```
Settings.Global.putInt(context.getContentResolver(), Settings.Global.AIRPLANE_MODE_ON, setMode); 
```

它抛出异常（文档说它应该抛出静默日志错误）：

```
11-14 13:39:51.649: E/AndroidRuntime(3509): java.lang.SecurityException: Permission denial: writing to secure settings requires android.permission.WRITE_SECURE_SETTINGS 
```

但我在清单中有这个权限：

```
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS" /> 
```

如果有人知道解决这个问题的方法，那就太棒了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:56:03.650

`WRITE_SECURE_SETTINGS`是一种`signature|system`权限，只能由使用固件的签名密钥签名或驻留在系统分区上的应用程序持有。因此，虽然你可以要求它，但你不能持有它。

# php - PHP - 流 AVI 视频

> ID：13379956
> 
> 赞同：0
> 
> 时间：2012-11-14T13:42:07.853
> 
> 标签：php, video, stream, movie, avi

在我的网站上，我将播放 mpg/avi 视频。

现在我正在寻找支持该 avi 文件的视频播放器。

JW-Flashplayer 是否支持 avi 电影文件或 adobe flash 播放器？

**哪些视频播放器可用于通过网络浏览器播放 avi 电影？**

```
<body>
<OBJECT id=????? classid=????? ....>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T17:45:56.557

这是我用于 avi 文件的媒体播放器

```
 <object id="MediaPlayer1" CLASSID="CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95" codebase="http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701 standby="Loading Microsoft Windows® Media Player components..." type="application/x-oleobject" width="480" height="456">
    <param name="fileName" value="<?php echo "attached/". $v1; ?>">
    <param name="animationatStart" value="true">
    <PARAM NAME="BufferingTime" VALUE="5">
    <PARAM NAME="BaseURL" VALUE="">
    <param name="transparentatStart" value="true">
    <param name="autoStart" value="true">
    <PARAM NAME="AllowChangeDisplaySize" VALUE="true">
    <param name="autorewind" value="true">
    <param name="showControls" value="true">
    <param name="Volume" value="-450">
    <param name="loop" value="true">
    <param name="PlayCount" value="100">        
    <embed type="application/x-mplayer2" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/" src="<?php echo "attached/". $v1; ?>" name="MediaPlayer1" width=680 height=656 playcount=100 loop=1 autostart=1 showcontrols=1 volume=-450>
    </object> 
```

# c# - 我无法将 Textbox.Text 转换为 int

> ID：13379958
> 
> 赞同：-5
> 
> 时间：2012-11-14T13:42:09.580
> 
> 标签：c#, wpf

```
int InvoerEieren = Convert.ToInt32(txtInvoerEieren.Text); 
```

而 txt.InvoerEieren.Text 是一个文本框，用户可以输入一个随机数（1 - 999）。

这就是我在计算机运行那行代码时得到的。

> mscorlib.dll 中出现“System.FormatException”类型的未处理异常
> 
> 附加信息：输入字符串的格式不正确。

我也尝试过使用“int.Parse()”函数。

* * *

编辑：

当我用这段代码创建一个新函数时：

```
int eenGetal = Convert.ToInt32(txtInvoerEieren.Text);
            MessageBox.Show(eenGetal.ToString()); 
```

它正在工作，这很奇怪......为什么它不适用于其他功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:56:23.493

您的问题是文本框中的内容无法转换为 int。int 表示整数，不能有任何小数空格。

所以你可以使用 1, 5 ,34 但不能使用 1,23 或 4.54。此外，您不能使用大于 +/-2,147,483,647 的数字。

如果您需要更大的数字，请`long`改用（然后`long.Parse`）。如果您需要小数点，请使用`decimal`(and `decimal.Parse`)。请注意，如果您正在解析小数，则必须考虑文化，因为您必须根据您使用的文化使用正确的小数标记`decimal.Parse`。

并且由于它是用户输入，因此您应该考虑使用`TryParse`变体，因为如果用户输入不正确（即非数字），它们不会“爆炸”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:56:22.370

您可以尝试使用 Int32.TryParse 方法。如果 in 值是无效格式，或者只是文本，它应该在内部处理异常并返回零值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T13:56:23.983

如果您尝试将字符串转换为 Double，则应使用[Double.TryParse 方法](http://msdn.microsoft.com/en-us/library/994c0zb1.aspx)来解析该值，因为它为您包装了一个 try/catch 转换。

```
 double decimalValue;
 bool success = Double.TryParse(txtInvoerEieren.Text, out decimalValue);
 if(success) { Debug.WriteLine("Successful parsing to Double!"); }
 else { Debug.WriteLine("Parsing to Double failed!"); } 
```

与转换为 Int32 值类似，您应该使用[Int32.TryParse 方法](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

```
 int decimalValue;
 bool success = Int32.TryParse(txtInvoerEieren.Text, out decimalValue);
 if(success) { Debug.WriteLine("Successful parsing to Int32!"); }
 else { Debug.WriteLine("Parsing to Int32 failed!"); } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T13:56:43.553

放一个`Debug.WriteLine(txtInvoerEieren.Text);` 看看它是不是你认为的那样。

它是一个文本框。
如果您不分配值，则将为 null 或 string.empty。
null 和 string.empty 都会使 Int 解析失败。
如评论使用

```
Int32.TryParse(txtInvoerEieren.Text, out InvoerEieren) 
```

你可以绑定到 Int 吗？但是您需要使用转换器将 string.empty 转换为 null。
而且您将需要处理 keydown 并且不允许除数字之外的任何内容。Handle keydown 不会处理必须是转换器的 sting.empty 。好吧，这是我能够绑定到 Int 的唯一方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T13:57:25.540

如果您不确定用户是否输入了代表正确数字的文本，我建议您使用另一种检查数字有效性的转换方法

```
int InvoerEieren;
if (Int32.TryParse(txtInvoerEieren.Text, out InvoerEieren)) {
    Console.WriteLine("The number is {0}", InvoerEieren);
} else {
    Console.WriteLine("\"{0}\" cannot be converted to int!", 
                      txtInvoerEieren.Text);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T13:58:06.093

尝试`Int32.TryParse`而不是`Int32.Parse`-

```
int InvoerEieren;
Int32.TryParse(txtInvoerEieren.Text, out InvoerEieren); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-14T14:06:07.180

除非有一些错误的输入，否则这永远不会发生。尽管您可以通过在此文本框上添加 KeyPress 事件来更改此设置。您可以在事件处理函数中添加这些行：

```
 if (char.IsNumber(e.KeyChar))
        {
            e.Handled = false;
        }
        else
        {
            MessageBox.Show("Please Enter Number");
            e.Handled = true;
        } 
```

我认为这应该可以解决您的问题。

# response - 如何从页面源中读取隐藏字段的值

> ID：13379961
> 
> 赞同：-1
> 
> 时间：2012-11-14T13:42:19.657
> 
> 标签：response, inputstream, bufferedreader, hidden-field

我想检索一个隐藏字段的值，该值随着每个发送到服务器的请求而变化。例如，当我第一次访问该页面时`sessid=90334`，在下一页它就像`sessid=78204`。pagesource 包含这样的标签`<input type="hidden" name="sessid" value="69529">`。我知道如何阅读回复。我目前正在使用以下代码来阅读响应

```
 BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));

        StringBuilder response = new StringBuilder();
        String line;
        while ((line = rd.readLine()) != null) {
            response.append(line);
        } 
```

请告诉我如何读取每个请求的更改值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:52:06.300

如果你正在开发 asp.net 应用程序（你没有指定 MVC 或 asp.net），并且你想访问服务器端的隐藏字段值，你应该使用 runat="server" 属性。像这样：

```
<input type="hidden" runat="server" name="sessid" value="69529"> 
```

或者您可以使用：

```
<asp:hiddenfield runat="server" id="sessid" value="69529"> 
```

在服务器端：

```
var x = sessid.Value 
```

# c# - MonoTouch 上带有 HTTPS 的 HttpListener

> ID：13379963
> 
> 赞同：9
> 
> 时间：2012-11-14T13:42:40.823
> 
> 标签：c#, ios, https, xamarin.ios, httplistener

`HttpListener`我使用MonoTouch实现了一个非常简单的 Web 服务器。一切正常。现在我需要添加 HTTPS 支持。我尝试按照以下步骤操作

[支持 https 的 Httplistener](https://stackoverflow.com/questions/11403333/httplistener-with-https-support)

但我不知道在哪里设置 MonoTouch 中的证书。仅仅添加前缀“https://*:443”并没有帮助，因为没有连接是可能的，也没有抛出异常。

根据[http://msdn.microsoft.com/en-us/library/system.net.httplistener.aspx](http://msdn.microsoft.com/en-us/library/system.net.httplistener.aspx)，这可能是因为必须指定服务器证书（“您可以使用HttpCfg.exe”）。

我如何在 MonoTouch 中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T19:17:32.633

这个问题问得好。在某些情况下，例如 for `HttpListener`，.NET 需要工具或 .config 文件（使用`System.Configuration`）来调整应用程序的配置。在许多情况下，有 API 确实可以达到相同的目的，但并非总是如此（在这种情况下也不是）。

解决方案是查看 Mono 的源代码，了解它希望该`HttpCfg.exe`工具为应用程序设置什么。来自[github](https://github.com/mono/mono/blob/master/mcs/class/System/System.Net/EndPointListener.cs#L77)：

```
string dirname = Environment.GetFolderPath (Environment.SpecialFolder.ApplicationData);
string path = Path.Combine (dirname, ".mono");
path = Path.Combine (path, "httplistener");
string cert_file = Path.Combine (path, String.Format ("{0}.cer", port));
if (!File.Exists (cert_file))
    return;
string pvk_file = Path.Combine (path, String.Format ("{0}.pvk", port));
if (!File.Exists (pvk_file))
    return;
cert = new X509Certificate2 (cert_file);
key = PrivateKey.CreateFromFile (pvk_file).RSA; 
```

所以解决方案是创建相同的目录结构（有可能，因为它会指向目录下）并使用端口`Documents`复制`.cer`文件（二进制 DER 编码的证书）和`.pvk`文件（这是创建格式的私钥）`makecert`编号作为文件名。

有了这些文件，您应该能够启动`HttpListener`并让它加载处理 SSL 请求所需的证书和私钥。

# uitableview - UITableView 滚动太小

> ID：13379966
> 
> 赞同：0
> 
> 时间：2012-11-14T13:42:45.293
> 
> 标签：uitableview, scroll

我有一个 iPad 应用程序，它在另一个视图中有一个小 UITableView，但是当我添加足够多的单元格时，ScrollView 不会增长，为什么？

@edit：我的意思是我无法滚动，因为它会弹回顶部。

这是tableview的framechange的代码：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
                                     duration:(NSTimeInterval)duration {
[super willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];

if (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft
    ||  toInterfaceOrientation == UIInterfaceOrientationLandscapeRight){
    CGRect rect = _table.frame; 
    rect.size.height = 565;
    _table.frame = rect;
    //_table.contentSize = CGSizeMake(_table.contentSize.width, 1000); // Doesn't work
}else{
    CGRect rect = _table.frame;
    rect.size.height = 820;
    _table.frame = rect;
    _table.contentSize = rect.size;
    //_table.contentSize = CGSizeMake(_table.contentSize.width, 1000); // Doesn't work
}} 
```

# jquery - 如何使用 jQuery Isotope 制作流体？

> ID：13379968
> 
> 赞同：1
> 
> 时间：2012-11-14T13:42:47.930
> 
> 标签：jquery, html, css, jquery-isotope

我正在尝试使用 jQuery Isotope 插件使这个演示流畅（在调整窗口大小时更改 img 大小），请遵循此[文档](http://isotope.metafizzy.co/demos/fluid-responsive.html)。
我的代码做错了吗？
为什么 window.resize 似乎不起作用？并且不使用[doc](http://isotope.metafizzy.co/demos/fluid-responsive.html) smartresize 方法。

任何建议将不胜感激，谢谢

[jsfiddle 演示](http://jsfiddle.net/rBea8/1/)

HTML CSS

```
<div id="container">
    <div class="item"><img src="http://placekitten.com/300/350" /></div>
    <div class="item"><img src="http://placekitten.com/300/300" /></div>
    <div class="item"><img src="http://placekitten.com/300/450" /></div>
    <div class="item"><img src="http://placekitten.com/300/200" /></div>
    <div class="item"><img src="http://placekitten.com/300/250" /></div>
    <div class="item"><img src="http://placekitten.com/300/400" /></div>
    <div class="item"><img src="http://placekitten.com/300/200" /></div>
    <div class="item"><img src="http://placekitten.com/300/350" /></div>
    <div class="item"><img src="http://placekitten.com/300/300" /></div>
    <div class="item"><img src="http://placekitten.com/300/450" /></div>
    <div class="item"><img src="http://placekitten.com/300/200" /></div>
    <div class="item"><img src="http://placekitten.com/300/250" /></div>
    <div class="item"><img src="http://placekitten.com/300/400" /></div>
    <div class="item"><img src="http://placekitten.com/300/200" /></div>
</div>​

#container {
    background: black;
}
.item {
    width: 33px;
    float: left;
}
.item img {
    display: block;
    width: 33px;
}​ 
```

jQuery

```
$( function() {

    ww=$(window).width();
    $('#container').css({'width':ww});
    cw=$('#container').width();
    cw3=cw/3;
    $('.item').css({'width':cw3});
    $('.item img').css({'width':cw3});

    $('#container').imagesLoaded(function(){
        $('#container').isotope({
            masonry:{
            columnWidth: cw3
        }
    });
});

  // $(window).smartresize(function(){
  //     $('#container').isotope({
  //         masonry:{
  //             columnWidth: cw3
  //         }
  //     });
  // });
    $(window).bind("resize", function() {
        $('#container').isotope({
            masonry:{
                columnWidth: cw3
            }
        });
    });
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:32:57.293

**更新：**

确保计算`cw3`变量的代码进入`window.resize()`调用内部。

```
$( function() {

    $(window).bind("resize", function() {

        ww=$(window).width();
        $('#container').css({'width':ww});
        cw=$('#container').width();
        cw3=parseInt(cw/3, 10);
        $('.item').css({'width':cw3});
        $('.item img').css({'width':cw3});

        $('#container').isotope({
            masonry: {
                columnWidth: cw3
            }
        });

    }).resize();

});​ 
```

*有趣的事实：总是在`parseInt()`调用中包含基数参数*

见[http://jsfiddle.net/hongaar/9zJRh/3/](http://jsfiddle.net/hongaar/9zJRh/3/)

# sql - 这个查询有什么问题（多个更新表）

> ID：13379972
> 
> 赞同：1
> 
> 时间：2012-11-14T13:43:35.227
> 
> 标签：sql, sql-update

这实际上使我的 phpmyadmin 停止工作。

```
SET @admin_mail = "mail@mail.com";
--  5\. SET ORDER MAIL

UPDATE 
sales_flat_order, 
sales_flat_order_address, 
-- sales_flat_order_status_history, 
sales_flat_quote, 
sales_flat_quote_address

SET 
sales_flat_order.customer_email = @admin_mail,
sales_flat_order_address.email = @admin_mail,
sales_flat_quote.customer_email = @admin_mail,
sales_flat_quote_address.email = @admin_mail; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:47:41.430

您不能从一个语句更新多个表。您可以将多个表输入到单个 SQL`UPDATE`语句中，例如 a `JOIN`，但您实际上只能更新其中一个表中的值。

你必须这样做：

```
UPDATE 
 sales_flat_order
SET 
  sales_flat_order.customer_email = @admin_mail;

UPDATE
  sales_flat_order_address
SET
  sales_flat_order_address.email = @admin_mail; 
```

ETC...

这是一个与此相关的好线程：[如何在 SQL Server 2005 的一条语句中更新两个表？](https://stackoverflow.com/questions/2044467/how-to-update-two-tables-in-one-statement-in-sql-server-2005)

# iphone - 横向播放嵌入的 YouTube 视频

> ID：13379976
> 
> 赞同：1
> 
> 时间：2012-11-14T13:43:45.993
> 
> 标签：iphone, ios, youtube, ios6, embedded-resource

我最近开始将我的一个应用程序更新到 iOS6。一切都很顺利，直到我偶然发现了将 YouTube 视频嵌入 UIWebView 的“新”方式，可以在此处阅读：

[https://developers.google.com/youtube/player_parameters](https://developers.google.com/youtube/player_parameters)

问题是我的应用程序仅是纵向的，但视频显然会受益于在横向模式下全屏播放。这种混合在 iOS6 之前工作得很好（至少对我来说，可能是从 iOS5 开始），但现在使用新的`<iframe>`东西它被困在一个小的纵向视图中。

任何人都有这个问题和可能的解决方法？

# vb.net - 帕斯卡三角与格雷理论

> ID：13379978
> 
> 赞同：-2
> 
> 时间：2012-11-14T13:43:56.797
> 
> 标签：vb.net, pascals-triangle

我正在尝试用 VB 创建帕斯卡的三角形。

这是我的代码（它使用格雷的理论）：

```
Dim input As Integer = Val(TextBox1.Text)
Dim rownumber As Integer = 0
Dim columnumber As Integer = 1
Dim x As Integer = 1

Do Until rownumber = input
  Do Until rownumber = columnumber
    Label2.Text = 1
    If rownumber = 0 Then
      x = 1
      Label2.Text = x & " "
    Else
      x = x * ((Math.Abs(rownumber - columnumber)) / (columnumber))
      columnumber = columnumber + 1
      Label2.Text = Label2.Text & " " & x & " "
    End If
  Loop
  columnumber = 1
  rownumber = rownumber + 1
  Label2.Text = x & vbNewLine
Loop 
```

另一个想法，这里我使用阶乘（通过函数），然后增加行和列的值。这是输出：

```
1
1 2
0 1 3
0 0 1 4
0 0 0 1 5
0 0 0 0 1 6 
```

和代码：

```
Public Class Form1

Function factorial(ByVal n As Long)
  If (n <= 0) Then
    factorial = 1
  Else
    factorial = n * factorial(n - 1)
  End If
End Function

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
  Label2.Text = Nothing
  Dim input As Integer = Val(TextBox1.Text)

  Dim n As Integer
  Dim r As Integer
  Dim c As Integer
  Dim rnum, cnum As Integer

  For rnum = 0 To input Step +1
    For cnum = 1 To (rnum + 1) Step +1
      c = factorial(cnum) / (factorial(rnum) * factorial(cnum - rnum))
      Label2.Text = Label2.Text & " " & c & " "
    Next
    Label2.Text = Label2.Text & vbCrLf
  Next
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:11:11.077

这条线

```
Label2.Text = x & vbNewLine 
```

将 label2 重置为默认 x 并丢失您所做的所有更改。

另一个问题在这里：

```
If rownumber = 0 Then
  x = 1
  Label2.Text = x & " "
Else
  x = x * ((Math.Abs(rownumber - columnumber)) / (columnumber))
  columnumber = columnumber + 1
  Label2.Text = Label2.Text & " " & x & " "
End If 
```

其中 x 仅在第一行中只有 1，但应该是第一列中的一个，以使算法有效。

# modx - modx - 在 gerResourceField 中使用动态 ID

> ID：13379979
> 
> 赞同：0
> 
> 时间：2012-11-14T13:43:56.253
> 
> 标签：modx

我需要使用在特定资源中设置为电视的“开始 ID”。

这是我试图动态化的基本调用：

1

```
[[getResourceField? &id=`298` &field=`longtitle`]] 
```

看来我不能嵌套另一个 getResourceField 来让它工作：

```
[[getResourceField? &id=`[[!getResourceField? &id=`[[*photoGalleryId]]` &field=`albumStart` &processTV=`1`]]` &field=`longtitle`]] 
```

我也尝试将 ID 收集器作为一个单独的块，这也失败了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:02:26.380

我不熟悉 getResourceField - 但你能不能把电视放在 ID 中？

```
[[getResourceField? &id=`[[*photoGalleryId]]` &field=`longtitle`]] 
```

在我看来，你想这样做吗？

```
[[getResourceField? &id=`[[*photoGalleryId]]` &field=`albumStart` &processTV=`1` &field=`longtitle`]] 
```

如果您尝试使用 ~current~ 资源的 photoGalleryId TV，如果您尝试从其他资源获取它，则需要一个片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:45:36.230

万一其他人偶然发现了这一点，它需要将第二个片段称为未缓存（没有！）：

```
[[getResourceField? &id=`[[getResourceField? &id=`[[*photoGalleryId]]` &field=`albumStart` &processTV=`1`]]` &field=`longtitle`]] 
```

# opengl - GLSL 中的立方体贴图查找

> ID：13379985
> 
> 赞同：0
> 
> 时间：2012-11-14T13:44:08.253
> 
> 标签：opengl, glsl

在 GLSL 1.50（或更高版本）中使用该函数在立方体贴图中进行查找时

```
gvec4 texture(  gsamplerCube    sampler,
    vec3    P,
    [float      bias]); 
```

P 必须是单位长度向量 - 还是任何非零 vec3 都是有效输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:08:06.450

不，它不必被标准化。

# c# - MVC3，来自C#和Javascript的请求之间的json数据反序列化差异

> ID：13379988
> 
> 赞同：0
> 
> 时间：2012-11-14T13:44:18.987
> 
> 标签：c#, jquery, asp.net-mvc-3, post

我做了以下控制器方法，它通过 JSON 处理请求数据：

```
public virtual JsonResult ExecMethod([SomeRequestBind(RequestType="Method")] RequestObject request) 
```

SomeRequestBind 是一个从 RequestObject 中选择派生类型的属性，例如。

```
public class RequestObjectGetSettings : RequestObject
    {
        public new AuthLoginParams Auth { get; set; }
        public string Method <- this is derived from RequestObjects
    } 
```

AuthLoginParams 这个对象由两个属性组成

```
 public class AuthLoginParams : AuthParams
    {
        [Required]
        public string Name {get; set;}

        [Required]
        public string Pass {get; set;}
    } 
```

我做了一些测试项目（C#），它执行以下操作：

```
var request1 = new
        {
            Auth = new { Name = "whatever", Pass = "some_pass" },
            Method = "GetSettings",
        };

using (var wc = new WebClient())
        {
            wc.Headers[HttpRequestHeader.ContentType] = "application/json; charset=utf-8";
            wc.Headers[HttpRequestHeader.AcceptLanguage] = "pl";
            try
            {
                Console.WriteLine(serializer.Serialize(request1));
                HtmlResult = wc.UploadString(URI, serializer.Serialize(request1));
                Console.WriteLine(HtmlResult);
            }
            catch (WebException)
            {
                Console.WriteLine("SomeError");
            }
        } 
```

这种方式一切正常，我的意思是对象已正确初始化。

但。我从 JavaScript 中尝试了同样的方法：

```
 var message2 = {
                    Auth:{
                        Name:"whatever",
                        Pass:"goodPass"
                    },
                    Method:"GetSettings"
                };

                $("#message").text(JSON.stringify(message2));
                $.post("http://127.0.0.1:6661/ApiMethod",message2,{},"json");

                /*$.ajax({
                    url:"http://127.0.0.1:6661/ApiMethod",
                    type:"post",
                    data:message2,
                    ContentType:"application/json; charset=utf-8",
                    dataType:"json"
                    });
                */ 
```

当我将 message2 作为对象传递时，在 Controller 上它设置 Method 属性，但来自 AuthLogin 的属性为空。当我尝试 JSON.stringify 它不会初始化任何东西。当我查看 Firebug 时，我观察到 post 参数是：

Auth[名称] blabalbla

授权[通过] xxxxxx

方法 GetSettings

看来，控制器以类似的方式出现，因此它无法读取该对象的这些属性。所以，看起来，而不是类似的东西：

```
{Auth:{Name:"aaa",Pass:"aaa"},Method:"GetSettings"} 
```

它发送到服务器：

```
{Auth[Name]:"aaa",Auth[Pass]:"aaa",Method:"GetSettings"} 
```

因此，对象被展平而不是嵌套。

如何正确发送此对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:55:31.720

试试这个为你的 jquery 帖子

```
$.post("http://127.0.0.1:6661/ApiMethod",message2); 
```

**编辑** 你在 jquery 的`document.ready`事件中调用 $.post，对吗？另外，尝试更改属性的名称。这不应该有所作为，但值得一试。尝试

```
{
    Authentication: {Name:'name', Password:'pwd'},
    Method: 'method name'
} 
```

另一种选择是简单地展平对象。在这种情况下，拥有授权模型没有任何好处。

```
{
    Name:'name', 
    Password:'pwd',
    Method: 'method name'
} 
```

# c# - SQL Server 2008 R2 如何创建 ASSEMBLY

> ID：13379996
> 
> 赞同：0
> 
> 时间：2012-11-14T13:44:34.800
> 
> 标签：c#, sql-server-2008

我正在尝试运行一个程序集，我已将我的 PC 上映射驱动器中的项目和 dll 文件保存到服务器：

```
USE <TEMP>
GO

CREATE ASSEMBLY [BooksMgr]
AUTHORIZATION [dbo]
FROM 'Z:\FY_2011-12\04 Individual\JohanZ\BooksMgr\BooksMgr\bin\Release\BooksMgr.dll' 
WITH PERMISSION_SET = SAFE
GO 
```

和我得到的错误：

> *CREATE ASSEMBLY 失败，因为它无法打开物理文件
> “Z:\FY_2011-12\04 Individual\JohanZ\BooksMgr\BooksMgr\bin\Release\BooksMgr.dll”：21
> （无法检索此错误的文本。原因：15105 ）。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:48:37.727

您可以尝试查看此 MSDN 链接

[如何：使用公共语言运行时集成创建和运行 SQL Server 用户定义函数](http://msdn.microsoft.com/en-us/library/w2kae45k.aspx)

至于不是..确保您首先创建了该程序集，然后再尝试以您在当前代码中所做的方式引用它..还确保该程序集不引用其他程序集，否则您将需要创建这些程序集第一也是。。

确保在 Z: 中查找的目录中创建程序集，然后再引用