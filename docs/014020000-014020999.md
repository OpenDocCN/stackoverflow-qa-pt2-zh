# StackOverflow 问答 14020000-14020999

# htmlpurifier - 使用 HTML purifirer 删除链接

> ID：14020001
> 
> 赞同：0
> 
> 时间：2012-12-24T10:21:19.170
> 
> 标签：htmlpurifier

我们的网站上有不同类型的用户。对于特定类型的用户，我们不想显示他们发布的 URL（链接）。我们想完全删除它们。

如何通过 HTML 净化器配置实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T19:02:05.267

最可靠的方法是将 %URI.Disable 设置为 true。

# java - 使用 Solrj 在 Solr 中获取所有结果

> ID：14020006
> 
> 赞同：3
> 
> 时间：2012-12-24T10:22:13.013
> 
> 标签：java, solr, solrj

我想得到所有结果`solrj`，我添加 10 个文档`Solr`，我没有得到任何异常，但是如果我添加超过 10 个文档，`Solr`我会得到异常。我搜索了这个，我得到了这个例外，在第一页的***[http://localhost:8983/solr/browse](http://localhost:8983/solr/browse)*** 10 文档中，第 11 个文档转到第二页。我怎样才能得到所有的结果？

```
String qry="*:*";
                CommonsHttpSolrServer server = new CommonsHttpSolrServer("http://localhost:8983/solr");
      QueryResponse rsp=server.query(new SolrQuery(qry));
      SolrDocumentList docs=rsp.getResults();  
                        for(int i=0;i<docs.getNumFound();i++){

                            System.out.println(docs.get(i));                    
    } 
```

> 线程“AWT-EventQueue-0”中的异常 java.lang.IndexOutOfBoundsException：索引：10，大小：10

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-25T13:17:28.797

```
 Integer start = 0;

    query.setStart(start);
    QueryResponse response = server.query(query);
    SolrDocumentList rs = response.getResults();
    long numFound = rs.getNumFound();
    int current = 0;
    while (current < numFound) {

        ListIterator<SolrDocument> iter = rs.listIterator();
        while (iter.hasNext()) {
            current++;

            System.out.println("************************************************************** " + current + "   " + numFound);
            SolrDocument doc = iter.next();
            Map<String, Collection<Object>> values = doc.getFieldValuesMap();

            Iterator<String> names = doc.getFieldNames().iterator();
            while (names.hasNext()) {
                String name = names.next();
                System.out.print(name);
                System.out.print(" = ");

                Collection<Object> vals = values.get(name);
                Iterator<Object> valsIter = vals.iterator();
                while (valsIter.hasNext()) {
                    Object obj = valsIter.next();
                    System.out.println(obj.toString());
                }
            }
        }
        query.setStart(current);
        response = server.query(query);
        rs = response.getResults();
         numFound = rs.getNumFound();

    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-12T04:27:01.923

更简单的方法：

```
CloudSolrServer server = new CloudSolrServer(solrZKServerUrl);
SolrQuery query = new SolrQuery();
query.setQuery("*:*");
query.setRows(Integer.MAX_VALUE);
QueryResponse rsp;
rsp = server.query(query, METHOD.POST);
SolrDocumentList docs = rsp.getResults();
for (SolrDocument doc : docs) {
    Collection<String> fieldNames = doc.getFieldNames();
    for (String s: fieldNames) {
        System.out.println(doc.getFieldValue(s));
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-24T11:03:39.377

numFound 为您提供与查询匹配的结果总数。

但是，默认情况下，Solr 将仅返回由参数[rows](http://wiki.apache.org/solr/CommonQueryParameters#rows)控制的前 10 个结果。
您正在尝试迭代 numFound，但是由于返回的结果只有 10 它失败。
您应该将 rows 参数用于迭代。

为了获得下一组结果，您需要使用不同的[开始](http://wiki.apache.org/solr/CommonQueryParameters#start)参数重新查询 Solr。这是为了支持分页，这样您就不必一次性提取所有结果，这是一项非常繁重的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-23T11:29:23.807

如果您像这样重构代码，它将起作用

```
String qry="*:*";
SolrQuery query = new SolrQuery();
query.setQuery("*:*");
query.setRows(Integer.MAX_VALUE); //Add me to avoid IndexOutOfBoundExc
CommonsHttpSolrServer server = new CommonsHttpSolrServer("http://localhost:8983/solr");
QueryResponse rsp=server.query(query);
SolrDocumentList docs=rsp.getResults();  
for(int i=0;i<docs.getNumFound();i++){
    System.out.println(docs.get(i));
            } 
```

为什么它的答案很简单。

响应告诉您有*getNumFound()*匹配的文档，但是如果您没有在查询中指定响应必须携带多少个，则此限制将自动设置为 10，

最终仅从*找到的 getNumFound() 文档中获取前 10 个文档*

出于这个原因，文档列表将只有 10 个元素，并且尝试获取 i > 9（例如 10）的第 i 个元素将带您到

*java.lang.IndexOutOfBoundsException*

就像你在做实验一样。

PS 我建议你像@Chen Sheng-Lun 一样使用 for 迭代器。

PPS 起初这也让我发疯。

# java - Primefaces 微调器不接受来自小键盘的输入

> ID：14020008
> 
> 赞同：0
> 
> 时间：2012-12-24T10:22:15.090
> 
> 标签：java, jsf, primefaces, spinner

我在我的 JSF 项目中使用 primefaces 3.2。对于数值字段，我使用微调器组件来限制用户只能输入数值。但是，微调器有一个奇怪的问题！它不接受来自键盘小键盘的输入。

我检查了陈列柜，但那里没有问题。我认为展示是针对 v3.3 的。如果这是 v3.2 中的一个错误，您有什么想法可以在不升级到 v3.3 的情况下解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:45:36.193

它确实是一个已知问题[Issue 3711: Spinner support numeric pad key in](http://code.google.com/p/primefaces/issues/detail?id=3711)

它在[spinner.js 的修订版 N#7405 中得到修复](http://code.google.com/p/primefaces/source/browse/primefaces/trunk/src/main/resources/META-INF/resources/primefaces/spinner/spinner.js?r=7405)

您可以查看 spinner.js 文件的 7220 和 7405 修订版之间的*差异*（*以防*您想用较新的版本覆盖）

[spinner.js r7220 与 r7405](http://code.google.com/p/primefaces/source/diff?spec=svn7405&r=7405&format=side&path=/primefaces/trunk/src/main/resources/META-INF/resources/primefaces/spinner/spinner.js&old_path=/primefaces/trunk/src/main/resources/META-INF/resources/primefaces/spinner/spinner.js&old=7220)

**INMO**你最好升级...

* * *

另一种可能的解决方案是获取更新的*spinner.js*并将其放入您的*资源文件夹并使用*[*最后一个方面*](https://stackoverflow.com/a/14018124/617373)加载它，[如这里](https://stackoverflow.com/a/14018124/617373)[](https://stackoverflow.com/a/14018124/617373)

# iphone - 在 iphone 上无缝缩放网站标题。

> ID：14020017
> 
> 赞同：0
> 
> 时间：2012-12-24T10:23:01.347
> 
> 标签：iphone, html, css

我有一个带有以下标题的网站（ [http://ukchina-trading.com/ ）：](http://ukchina-trading.com/)

**HTML**

```
 <div class='leftImage'>
            <img src='image/unionjack.png'>
        </div>
        <div class='title'>
            <h1>J Plus Trading</h1>
            <h2>Briding the gap between China and the UK</h2>
        </div>
        <div class='rightImage'>
            <img src='image/chinawings.png'>
        </div> 
```

**CSS**

```
.title h1 {
    font-family: 'Droid Serif', Georgia, Times, serif;
    text-align: center;
    font-size: 68px;
    line-height: 65px;
    padding-top: 60px;
    margin-bottom: 80px;
}

.title h2 {
    font-family: 'Droid Serif', Georgia, Times, serif;
    text-align: center;
    position:relative;
    top:-88px;
    left:3px;
    font-size: 16px;
    color: #FF3300;
}
.rightImage {
    position:absolute;
    right: 150px;
    top: 2px;
}

.leftImage {
    position:absolute;
    left: 150px;
    top: 2px;
} 
```

当网站在计算机上查看时，标题很好，但在 iPhone 屏幕上查看时，图像被推到标题上，将其隐藏。

重做标题以阻止这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:33:08.923

我建议最好的办法是将标志带入网站的 900 像素宽度内。

将它们放在“J Plus Trading”文本的左右两侧，但只使用浮动而不是绝对定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:33:40.137

您的问题是您使用的绝对定位，因为这会导致图像处于相同位置，而与页面上的其他任何内容无关。而不是绝对尝试使用 float:left; 和 float:right 在你的左右图像上，这样文本就不会被推到它上面。您可能必须创建带有边距或填充的额外包含 div，以便图像按您想要的方式定位

# jquery - 将类附加到 div 不起作用

> ID：14020019
> 
> 赞同：0
> 
> 时间：2012-12-24T10:23:02.733
> 
> 标签：jquery, html, ajax

我有以下 div ：

```
<div class="overlay">
    <a title="yes" href="#"><div class="yes"></div></a>
    <a title="no" href="#"><div class="no"></div></a>
</div>

<div class="movie item-parent">
    <a title="Sin city" class="movie-link">
        <img src="images/1.jpg" />
    </a>
    <div class="overlay">
        <a title="yes" href="#"><div class="yes"></div></a>
        <a title="no" href="#"><div class="no"></div></a>
    </div>
</div> 
```

如果用户单击“否”，则罪恶之城将被 newproducts.jsp 中的另一部电影取代，如下所示：

```
<div class="movie item-parent">
    <a title="The Hobbit" class="movie-link">
        <img src="images/2.jpg" />
    </a>
    <div class="overlay">
        <a title="yes" href="#"><div class="yes"></div></a>
        <a title="no" href="#"><div class="no"></div></a>
    </div>
</div> 
```

我的jQuery代码是：

```
$('.no').on("click", function(){
    var parent_movie= $(this).parent('.movie');
    parent_movie.empty();
    parent_movie.load("reco_product_stream.jsp a"); 
    parent_movie.append($('.overlay'));
}); 
```

但电影并没有被取代。

如果我更改`.parent`为`.parents`，电影会被很好地替换，但`.overlay`会从页面上的所有其他电影中删除，尽管`.append`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:25:09.210

使用`closest()`而不是`parent()` 作为父级查找直接父级，并且最接近查找第一个匹配的 dom。

```
var parent_movie= $(this).closest('.movie'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:36:27.440

```
$('.no').on("click", function(){
    var $parent_movie = $(this).closest('.movie');
    $.get('reco_product_stream.jsp', function(data) {
        var $a = $(data).find('a'); 
        $parent_movie.children('a').replaceWith($a); 
    })
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T10:27:24.510

您的代码行：

```
var parent_movie = $(this).parent('.movie'); 
```

仅查看直接父级，并且仅在该直接父级具有 class 时才匹配`movie`。由于在您的 HTML 中不是这种情况，这会导致一个空的 jQuery 对象，因此后续代码行什么也不做。

由于您想搜索父链直到找到一个`movie`类，请改用它：

```
var parent_movie = $(this).closest('.movie'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T10:30:36.103

您可以使用：

```
var parent_movie = $(this).closest('.movie'); 
```

# paypal - 使用快速结帐的 Paypal 定期付款

> ID：14020020
> 
> 赞同：0
> 
> 时间：2012-12-24T10:23:04.353
> 
> 标签：paypal

我们想通过快速结账使用 Paypal 定期付款。我们需要迎合所描述的用例

我现有的套餐是 49 美元/月，下一个可用的套餐是 99 美元/月。当用户升级套餐时，我可以使用快速结帐将他们的账单金额更改为 99 美元/月吗？

API 文档说“创建配置文件后，您只能在每 180 天的时间间隔内将配置文件数量增加 20%。” 有什么解决方法吗？

期待你的答复。

问候， 里查·辛格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T17:57:57.260

不幸的是，除非您使用 Payments Pro，否则无法绕过该限制。使用 Pro 配置文件没有限制。

使用 Express Checkout 处理此类事情的唯一方法是终止他们现有的配置文件并为他们创建一个新配置文件。

[您可以使用ManageRecurringPaymentsProfile](https://www.x.com/developers/paypal/documentation-tools/api/managerecurringpaymentsprofilestatus-api-operation-nvp)取消现有配置文件，然后引导用户相应地完成创建新配置文件的过程。

这并不理想，但这是使用 Express Checkout 的唯一方法。

# uicollectionview - 我怎么知道 UICollectionView 已经完全加载了？

> ID：14020027
> 
> 赞同：105
> 
> 时间：2012-12-24T10:23:47.393
> 
> 标签：uicollectionview, delegates, reload

每当 UICollectionView 完全加载时，我都必须进行一些操作，即那时应该调用所有 UICollectionView 的数据源/布局方法。我怎么知道？？是否有任何委托方法可以知道 UICollectionView 加载状态？

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2015-06-05T14:02:06.327

这对我有用：

```
[self.collectionView reloadData];
[self.collectionView performBatchUpdates:^{}
                              completion:^(BOOL finished) {
                                  /// collection-view finished reload
                              }]; 
```

斯威夫特 4 语法：

```
collectionView.reloadData()
collectionView.performBatchUpdates(nil, completion: {
    (result) in
    // ready
}) 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2014-10-24T02:02:24.483

```
// In viewDidLoad
[self.collectionView addObserver:self forKeyPath:@"contentSize" options:NSKeyValueObservingOptionOld context:NULL];

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary  *)change context:(void *)context
{
    // You will get here when the reloadData finished 
}

- (void)dealloc
{
    [self.collectionView removeObserver:self forKeyPath:@"contentSize" context:NULL];
} 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-12-19T13:39:34.860

这实际上非常简单。

例如，当您调用 UICollectionView 的 reloadData 方法或它的布局的 invalidateLayout 方法时，您可以执行以下操作：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [self.collectionView reloadData];
});

dispatch_async(dispatch_get_main_queue(), ^{
    //your stuff happens here
    //after the reloadData/invalidateLayout finishes executing
}); 
```

**为什么这样有效：**

主线程（我们应该在其中进行所有 UI 更新）包含主队列，它本质上是串行的，即它以 FIFO 方式工作。所以在上面的例子中，第一个块被调用，我们的`reloadData`方法被调用，然后是第二个块中的任何其他内容。

现在主线程也被阻塞了。因此，如果您`reloadData`需要 3 秒来执行，则第二个块的处理将被那些 3 秒延迟。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-09-22T18:43:43.997

只是为了添加一个很棒的@dezinezync 答案：

斯威夫特 3+

```
collectionView.collectionViewLayout.invalidateLayout() // or reloadData()
DispatchQueue.main.async {
    // your stuff here executing after collectionView has been layouted
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-01-02T09:28:27.750

使用 RxSwift/RxCocoa 的另一种方法：

```
 collectionView.rx.observe(CGSize.self, "contentSize")
            .subscribe(onNext: { size in
                print(size as Any)
            })
            .disposed(by: disposeBag) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-09-10T11:03:52.967

像这样做：

```
 UIView.animateWithDuration(0.0, animations: { [weak self] in
                guard let strongSelf = self else { return }

                strongSelf.collectionView.reloadData()

            }, completion: { [weak self] (finished) in
                guard let strongSelf = self else { return }

                // Do whatever is needed, reload is finished here
                // e.g. scrollToItemAtIndexPath
                let newIndexPath = NSIndexPath(forItem: 1, inSection: 0)
                strongSelf.collectionView.scrollToItemAtIndexPath(newIndexPath, atScrollPosition: UICollectionViewScrollPosition.Left, animated: false)
        }) 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-03-01T22:31:28.507

尝试在 reloadData() 调用之后立即通过 layoutIfNeeded() 强制同步布局传递。似乎适用于 iOS 12 上的 UICollectionView 和 UITableView。

```
collectionView.reloadData()
collectionView.layoutIfNeeded() 

// cellForItem/sizeForItem calls should be complete
completion?() 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-11-02T22:34:02.623

正如[dezinezync](https://stackoverflow.com/a/20683252/8302738)回答的那样，您需要在`reloadData`a `UITableView`or之后向主队列分派一段代码`UICollectionView`，然后在单元格出列后执行该代码块

为了在使用时更直接，我会使用这样的扩展：

```
extension UICollectionView {
    func reloadData(_ completion: @escaping () -> Void) {
        reloadData()
        DispatchQueue.main.async { completion() }
    }
} 
```

它也可以实现`UITableView`为

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-12-04T11:55:18.883

**斯威夫特 5**

```
override func viewDidLoad() {
    super.viewDidLoad()

    // "collectionViewDidLoad" for transitioning from product's cartView to it's cell in that view
    self.collectionView?.addObserver(self, forKeyPath: "contentSize", options: NSKeyValueObservingOptions.new, context: nil)
}

override func observeValue(forKeyPath keyPath: String?, of object: Any?, change: [NSKeyValueChangeKey : Any]?, context: UnsafeMutableRawPointer?) {
    if let observedObject = object as? UICollectionView, observedObject == self.collectionView {
        print("collectionViewDidLoad")
        self.collectionView?.removeObserver(self, forKeyPath: "contentSize")
    }
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-02-04T09:53:32.953

在重新加载集合视图后，我只是执行了以下操作。您甚至可以在 API 响应中使用此代码。

```
self.collectionView.reloadData()

DispatchQueue.main.async {
   // Do Task after collection view is reloaded                
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2020-07-16T07:32:45.237

到目前为止，我发现的最佳解决方案是使用`CATransaction`以处理完成。

**斯威夫特 5**：

```
CATransaction.begin()
CATransaction.setCompletionBlock {
    // UICollectionView is ready
}

collectionView.reloadData()

CATransaction.commit() 
```

**更新**：上述解决方案似乎在某些情况下有效，而在某些情况下则无效。我最终使用了公认的答案，这绝对是最稳定和经过验证的方法。这是 Swift 5 版本：

```
private var contentSizeObservation: NSKeyValueObservation? 
```

```
contentSizeObservation = collectionView.observe(\.contentSize) { [weak self] _, _ in
      self?.contentSizeObservation = nil
      completion()
}

collectionView.reloadData() 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-01-12T03:18:06.797

这对我有用：

```
__weak typeof(self) wself= self;
[self.contentCollectionView performBatchUpdates:^{
    [wself.contentCollectionView reloadData];
} completion:^(BOOL finished) {
    [wself pageViewCurrentIndexDidChanged:self.contentCollectionView];
}]; 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-12-06T18:54:54.783

只需在批量更新中重新加载collectionView，然后在布尔“完成”的帮助下检查完成块是否完成。

```
self.collectionView.performBatchUpdates({
        self.collectionView.reloadData()
    }) { (finish) in
        if finish{
            // Do your stuff here!
        }
    } 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-05-06T13:15:00.950

当集合视图在用户可见之前加载时，我需要对所有可见单元格执行一些操作，我使用了：

```
public func collectionView(_ collectionView: UICollectionView, willDisplay cell: UICollectionViewCell, forItemAt indexPath: IndexPath) {
    if shouldPerformBatch {
        self.collectionView.performBatchUpdates(nil) { completed in
            self.modifyVisibleCells()
        }
    }
} 
```

请注意，这将在滚动浏览集合视图时被调用，因此为了防止这种开销，我添加了：

```
private var souldPerformAction: Bool = true 
```

在行动本身：

```
private func modifyVisibleCells() {
    if self.shouldPerformAction {
        // perform action
        ...
        ...
    }
    self.shouldPerformAction = false
} 
```

该动作仍将执行多次，作为初始状态下可见单元格的数量。但是在所有这些调用中，您将拥有相同数量的可见单元格（全部）。并且布尔标志将阻止它在用户开始与集合视图交互后再次运行。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-06-09T09:08:38.313

由于`UICollectionView`.

一个可靠的解决方案是子类`UICollectionView`化以在`layoutSubviews()`.

Objectice-C 中的代码： [https ://stackoverflow.com/a/39648633](https://stackoverflow.com/a/39648633)

Swift 中的代码： [https ://stackoverflow.com/a/39798079](https://stackoverflow.com/a/39798079)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-01-17T23:02:37.123

定义这样做：

```
//Subclass UICollectionView
class MyCollectionView: UICollectionView {

    //Store a completion block as a property
    var completion: (() -> Void)?

    //Make a custom funciton to reload data with a completion handle
    func reloadData(completion: @escaping() -> Void) {
        //Set the completion handle to the stored property
        self.completion = completion
        //Call super
        super.reloadData()
    }

    //Override layoutSubviews
    override func layoutSubviews() {
        //Call super
        super.layoutSubviews()
        //Call the completion
        self.completion?()
        //Set the completion to nil so it is reset and doesn't keep gettign called
        self.completion = nil
    }

} 
```

然后在你的VC里面这样调用

```
let collection = MyCollectionView()

self.collection.reloadData(completion: {

}) 
```

确保您使用的是子类！

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-01-23T08:16:19.993

这对我有用：

```
 - (void)viewDidLoad {
    [super viewDidLoad];

    int ScrollToIndex = 4;

    [self.UICollectionView performBatchUpdates:^{}
                                    completion:^(BOOL finished) {
                                             NSIndexPath *indexPath = [NSIndexPath indexPathForItem:ScrollToIndex inSection:0];
                                             [self.UICollectionView scrollToItemAtIndexPath:indexPath atScrollPosition:UICollectionViewScrollPositionCenteredHorizontally animated:NO];
                                  }];

} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-08-16T07:07:55.307

以下是唯一对我有用的方法。

```
extension UICollectionView {
    func reloadData(_ completion: (() -> Void)? = nil) {
        reloadData()
        guard let completion = completion else { return }
        layoutIfNeeded()
        completion()
    }
} 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2017-02-16T10:04:41.913

这就是我用 Swift 3.0 解决问题的方法：

```
override func viewDidAppear(_ animated: Bool) {
    super.viewDidAppear(animated)

    if !self.collectionView.visibleCells.isEmpty {
        // stuff
    }
} 
```

* * *

## 回答 #20

> 赞同：-9
> 
> 时间：2013-11-07T04:43:41.133

尝试这个：

```
- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return _Items.count;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewCell *cell;
    //Some cell stuff here...

    if(indexPath.row == _Items.count-1){
       //THIS IS THE LAST CELL, SO TABLE IS LOADED! DO STUFF!
    }

    return cell;
} 
```

* * *

## 回答 #21

> 赞同：-10
> 
> 时间：2013-04-09T07:19:01.647

你可以这样做...

```
 - (void)reloadMyCollectionView{

       [myCollectionView reload];
       [self performSelector:@selector(myStuff) withObject:nil afterDelay:0.0];

   }

  - (void)myStuff{
     // Do your stuff here. This will method will get called once your collection view get loaded.

    } 
```

# iphone - 如何切换按钮

> ID：14020028
> 
> 赞同：-1
> 
> 时间：2012-12-24T10:23:51.967
> 
> 标签：iphone, ios, button

我有 3 个按钮：按钮 1、按钮 2 和按钮 3。当我启动应用程序时，按钮 1 位于顶部，按钮 2 位于中间，按钮 3 位于屏幕下方。

当我按下这些按钮之一时，按钮必须从位置切换。因此，例如 button1 与 button3 切换或 button1 与 button2 切换

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T10:29:04.343

看看这个例子，你想要的动画也......

```
 -(IBAction)button1_Clicked:(id)sender{

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.3];
        CGRect btnframe = button1.frame;
        button1.frame = button3.frame;
        button3.frame = btnframe;
///Also you can switch the buttons with center points of buttons like...
/*
        CGPoint btn1center = button1.center;
        button1.center = button3.center;
        button3.center = btn1center;
*/

     //This bellow two lines for your requirement with change the function behind the buttons also...

       // [button1 addTarget:self action:@selector(button3_Clicked:) forControlEvents:UIControlEventTouchUpInside];
       // [button3 addTarget:self action:@selector(button1_Clicked:) forControlEvents:UIControlEventTouchUpInside];
        [UIView commitAnimations];
    } 
```

**这是一个示例，您可以从中了解您的要求。**

希望这可以帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:41:08.457

这是一个动画解决方案，使用块而不是现在的旧`commitAnimations`：

```
-(IBAction)clickedButton1:(id)sender{

    [UIView animateWithDuration:1
                     animations: ^{

             CGPoint center = button1.center;
             button1.center = button2.center;
             button2.center = center;
    }];

} 
```

此代码使用动画切换按钮 1 和 2。

# c# - 使用 MySQL 在 C# 中填充数据表

> ID：14020038
> 
> 赞同：0
> 
> 时间：2012-12-24T10:24:42.470
> 
> 标签：c#, .net, mysql, database, listview

我正在尝试使用从 MySQL 数据库中提取的结果填充 DataTable，但是 DataTable 尽管已初始化，但并未填充。我想用这个 DataTable 来填充 ListView。以下是我对 DataTable 的设置：

```
 public DataTable SelectCharacters(string loginName)
    {
        this.Initialise();
        string connection = "0.0.0.0";
        string query = "SELECT * FROM characters WHERE _SteamName = '" + loginName + "'";

        if (this.OpenConnection() == true)
        {
            MySqlCommand cmd = new MySqlCommand(query, connection);
            MySqlDataAdapter returnVal = new MySqlDataAdapter(query,connection);
            DataTable dt = new DataTable("CharacterInfo");
            returnVal.Fill(dt);
            this.CloseConnection();
            return dt;
        }
        else
        {
            this.CloseConnection();
            DataTable dt = new DataTable("CharacterInfo");
            return dt;            
        }
    } 
```

对于 ListView 的填充，我有：

```
 private void button1_Click(object sender, EventArgs e)
    {
        string searchCriteria = textBox1.Text;

        dt = characterDatabase.SelectCharacters(searchCriteria);
        MessageBox.Show(dt.ToString());

        listView1.View = View.Details;

        ListViewItem iItem;
        foreach (DataRow row in dt.Rows)
        {
            iItem = new ListViewItem();
            for (int i = 0; i < row.ItemArray.Length; i++)
            {
                if (i == 0)
                    iItem.Text = row.ItemArray[i].ToString();
                else
                    iItem.SubItems.Add(row.ItemArray[i].ToString());
            }
            listView1.Items.Add(iItem);
        }
    } 
```

有什么我想念的吗？MessageBox 已包含在内，因此我可以查看它是否已填充，但不走运。

谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-07-17T02:56:26.097

检查您的连接字符串，而不是使用

```
MySqlCommand cmd = new MySqlCommand(query, connection);
MySqlDataAdapter returnVal = new MySqlDataAdapter(query,connection);
DataTable dt = new DataTable("CharacterInfo");
returnVal.Fill(dt);
this.CloseConnection();
return dt; 
```

你可以用这个

```
MySqlCommand cmd = new MySqlCommand(query, connection);
DataTable dt = new DataTable();
dt.load(cmd.ExecuteReader());
return dt; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T11:33:33.963

好吧，我......无法弄清楚你在这里做了什么，所以我将向你粘贴我正在填充 datagridview 的代码：

1）连接应该是这样的（如果 localhost 是您的服务器，否则，服务器机器的 IP 地址）：

```
string connection = @"server=localhost;uid=root;password=*******;database=*******;port=3306;charset=utf8"; 
```

2）查询没问题（它会返回一些东西），但你不应该构建这样的 SQL 语句......改用参数。请参阅[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection.)。

3）代码：

```
void SelectAllFrom(string query, DataGridView dgv)
        {
            _dataTable.Clear();

            try
            {
                _conn = new MySqlConnection(connection);
                _conn.Open();
                _cmd = new MySqlCommand
                {
                    Connection = _conn,
                    CommandText = query
                };
                _cmd.ExecuteNonQuery();

                _da = new MySqlDataAdapter(_cmd);
                _da.Fill(_dataTable);

                _cb = new MySqlCommandBuilder(_da);

                dgv.DataSource = _dataTable;
                dgv.DataMember = _dataTable.TableName;
                dgv.AutoResizeColumns();

                _conn.Close();
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
            finally
            {
                if (_conn != null) _conn.Close();
            }
        } 
```

因此，每次我想在 mysql 数据库中显示表的某些内容时，我都会调用此方法，将查询字符串和 datagridview 名称传递给该方法。而且，就是这样。

为了您的缘故，将此示例与您的示例进行比较，看看您可以从这两个示例中使用什么。也许，listview 对你来说不是最好的，只是说......

希望这会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T11:08:13.300

调试您的应用程序并查看您的 sql 语句/连接字符串是否正确并返回一些值，同时验证您的应用程序是否没有抛出任何异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T11:31:56.520

您的连接字符串无效。

设置如下：

```
connection = "Server=myServer;Database=myDataBase;Uid=myUser;Pwd=myPassword;"; 
```

参考：[mysql连接字符串](http://www.connectionstrings.com/mysql)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T11:54:00.247

以下是代码不起作用的原因。

1.  *Connection*
    你的mySQL的连接无效
2.  *查询*
    我猜你想在 中搜索`table`，试试这个查询

`string query = "SELECT * FROM characters WHERE _SteamName LIKE '" + loginName + "%'";`

注意`LIKE`，`%`这可能有助于列出所有数据。
更多细节[字符串比较函数](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)

# c# - 使用 SignalR 的多个聊天会话

> ID：14020040
> 
> 赞同：1
> 
> 时间：2012-12-24T10:24:51.080
> 
> 标签：c#, asp.net-mvc-3, model-view-controller, signalr

我正在使用基于[https://github.com/SignalR/Samples](https://github.com/SignalR/Samples)示例的 SignalR 。我对此并不陌生，但让它在我的网络应用程序中用于聊天室类型的概念。但现在我正试图让**用户使用它来完成用户**聊天功能。我该怎么做？

我是否必须为每个聊天会话设置单独的连接？意味着 browser1 上的 user1 在单页中分别与 5 个人聊天。我是否需要从 user1 到服务器有单独的 5 SignalR 连接？

这意味着对于 user1 的这 5 个不同端点，我是否必须在每个聊天元素旁边呈现此部分？或者我可以只有一个 SignalR 连接吗？如果我只有一个，如何从服务器更新正确的聊天控件以显示最终用户的响应？

```
@section scripts {
    <script src="@Url.Content("~/Scripts/jquery.signalR-1.0.0-rc1.min.js")" type="text/javascript"></script>
    <script src="/signalR/hubs" type="text/javascript"></script>

    <script>
        $(function () {
            var chat = $.connection.chat;

            chat.client.send = function (message) {
                $('#message').append('<li>' + message + '</li>');
            };

            $.connection.hub.start().done(function () {
                $('#send').click(function () {
                    chat.server.send($('#msg').val());
                });
            });
        });
    </script>
} 
```

有没有我可以使用的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:00:50.697

从后端你通过他的连接ID发送到客户端：//调用发送到一个特定的连接

```
Clients.Client(Context.ConnectionId).send(message); 
```

在客户端上，您将获得集线器连接的客户端 ID。

```
$.connection.hub.id 
```

# unit-testing - 模拟 Windows Store 单元测试项目的 DataReader

> ID：14020044
> 
> 赞同：1
> 
> 时间：2012-12-24T10:25:07.240
> 
> 标签：unit-testing, windows-runtime, winrt-async

[我正在尝试对使用IDataReader.LoadAsync](http://msdn.microsoft.com/en-US/library/windows/apps/windows.storage.streams.idatareader.loadasync)方法的 Windows Store 类库项目进行单元测试。我能够创建自己的存根，它实现了我需要的 IDataReader 的所有部分，除了 LoadAsync 方法的返回类型 - DataReaderLoadOperation。这是一个没有公共构造函数的密封类，所以我不知道从我的存根的 LoadAsync 方法返回什么。

我正在测试的代码除了它之外没有使用 LoadAsync 的结果`await`，所以我尝试从我的存根返回 null。但是，这会引发 AggregateException，因为框架会尝试将 null DataReaderLoadOperation（它是一个 IAsyncOperation<uint>）转换为 Task 并触发 NullReferenceException。

似乎 Microsoft Fakes 也不适用于 Store 单元测试项目，仅适用于常规单元测试项目，所以这也无济于事。

如何模拟 Windows Store 单元测试项目的 DataReader.LoadAsync？

* * *

编辑：根据斯蒂芬的回答，我改为嘲笑 IInputStream 。下面是我的模拟供参考。

```
internal class InputStreamStub : IInputStream
{
    public IAsyncOperationWithProgress<IBuffer, uint> ReadAsync(IBuffer buffer, uint count, InputStreamOptions options)
    {
        return
            AsyncInfo.Run<IBuffer, uint>
            (
                (token, progress) =>
                    Task.Run<IBuffer>
                    (
                        () =>
                        {
                            progress.Report(0);
                            token.ThrowIfCancellationRequested();
                            var source = Encoding.UTF8.GetBytes(reads.Dequeue());
                            Assert.IsTrue(buffer.Capacity > source.Length); // For the purposes of the unit test, the buffer is always big enough
                            if (source.Length > 0) // CopyTo throws an exception for an empty source
                                source.CopyTo(buffer);
                            buffer.Length = (uint) source.Length;
                            progress.Report(100);
                            return buffer;
                        },
                        token
                    )
            );
    }

    public void Dispose()
    {
    }

    private Queue<string> reads = new Queue<string>(new[]
    {
        "Line1\r\nLine",
        "2\r\nLine3\r",
        "\nLine4",
        "",
        "\r\n",
        "Line5",
        "\r\n",
        "Line6\r\nLine7\r\nLine8\r\nL",
        "ine9\r",
        "\n"
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:19:34.257

我建议模拟底层流并`DataReader`在模拟流上使用常规。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:37:25.807

您可以用适配器包装数据读取器并针对它编写单元测试吗？

# c# - 收集的 WP7 应用程序数据的在线存储

> ID：14020053
> 
> 赞同：0
> 
> 时间：2012-12-24T10:25:48.317
> 
> 标签：c#, windows-phone-7

我正在开发一个 WP7 应用程序，它收集用户数据并将其存储在某处的云中。用户稍后可以在其他地方访问此数据。现在，任何人都可以推荐一种好的有效的数据存储方式吗？我正在考虑将这些数据存储在用户的 Skydrive 中，以便他以后可以访问它。

请问还有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:39:08.810

看看[pastebin.com](http://pastebin.com/)可能对你很感兴趣。您可以通过简单的 http 发布请求发布调试信息（无需用户交互，易于集成）。但是免费帐户有限制：10 个私人记录，每天最多 15 个请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T20:20:01.387

有[亚马逊 S3](http://aws.amazon.com/s3/)。具有许多功能并具有[.NET SDK](http://aws.amazon.com/sdkfornet/)的云存储。

# c# - 使用 C# WebClient 并获取异常时如何显示可选字段作为响应？

> ID：14020055
> 
> 赞同：2
> 
> 时间：2012-12-24T10:25:59.313
> 
> 标签：c#, asp.net, asp.net-mvc

我正在使用 WebClient 对服务器进行 POST，如下所示：

```
string URI = "http://mydomain.com/foo";
string myParameters =
   "&token=1234" +
   "&text=" + HttpUtility.UrlEncode(someVariable);

using (WebClient wc = new WebClient())
{
    try
    {
      wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
      string HtmlResult = wc.UploadString(URI, myParameters);
    }
    catch (WebException e)
    {
        return e.Message;
    }
} 
```

由于 HTTP 403（禁止），我有时会抛出异常。在这些情况下，我想知道确切的原因。深入研究我正在调用的服务，它记录了它可以**选择**返回一个`errorDetail`像这样的字段：

```
"code": 403,
"errorType": "not_authorized",
"errorDetail": "Can reply on a checkin at most once." 
```

但是，当我在 Visual Studio 中单步执行代码时，我看不到如何获取该`errorDetail`字段。它似乎不是`WebException`.

有没有办法得到它，所以我可以显示如下：

```
return e.Message + " -- " + e.errorDetail 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:19:51.307

`errorDetail`不是 HTTP 规范的一部分，所以`WebClient`不知道。出于同样的原因，您在 BCL 中的任何地方都找不到它。

您可能想要的是响应正文，以便您可以解析它（可能是 JSON？您的数据看起来像它）。

您可以从中获取响应对象`WebException.Response`。就像您通常阅读回复一样阅读它。

请注意，如果没有响应（例如由于网络错误），此属性可能为 null。

# windows - Windows SED 命令 - 无需正则表达式的简单搜索和替换

> ID：14020060
> 
> 赞同：2
> 
> 时间：2012-12-24T10:26:21.867
> 
> 标签：windows, c#-4.0, sed, gnu

我应该如何使用'sed'命令来查找和替换给定的单词/单词/句子而不将它们中的任何一个视为特殊字符？

换句话说，热将查找和替换参数视为纯文本。

在以下示例中，我想用 '+sagar' 替换 'sagar' 然后我必须给出以下命令

```
sed "s/sagar/\\+sagar@g" 
```

我知道 \ 应该用另一个 \ 转义，但我不能做这个操作。因为有很多特殊字符和它们的组合。

我将从用户屏幕获取查找和替换参数作为输入。我想从 c# 代码执行 sed。

简单地说，我不想使用 sed 的正则表达式。我希望我的命令文本被视为纯文本？

这可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T17:21:07.527

虽然可能有一些`sed`版本具有类似的选项`--noregex_matching`，但它们中的大多数都没有该选项。因为您通过提示用户来获取搜索和替换输入，所以最好的办法是扫描用户输入字符串以查找 reg-exp 特殊字符并酌情转义它们。

此外，您的用户是否会期望他们的全部大写搜索输入正确匹配并替换小写或混合大小写字符串？在这种情况下，请记住您可以将其目标字符串重写为`[Ss][Aa][Gg][Aa][Rr]`，并替换为`+Sagar`。

请注意，替换端使用的正则表达式字符要少得多，“&”表示“匹配的完整字符串”，然后是编号的替换组，如`\1,\2,...`. 鉴于用户不知道或不期望他们可以使用此类字符，他们使用`\1`所需替换的可能性非常低。更有可能它们可能对 有有效用途`&`，因此您必须（至少）扫描并替换为`\&`. 在基本的 sed 中，就是这样。（在最新的 gnu sed 中可能还有其他的，或者一些`sed`起源于 PC 工具的 s）。

对于替换字符串，您根本不必转义`+`字符。可能是的`\`。同样，您可以扫描用户的“幼稚”输入，并根据需要添加转义字符。

最后，如果您要为将要分发的“包”执行此操作，并且您将依赖用户的`sed`. ，以及其他，尤其是`super-sed`，（我很确定）作为 PC 独立设备开始，并且具有非常不同的功能集。

IHTH。

# ruby-on-rails - 网络内的 RoR 特定用户角色

> ID：14020063
> 
> 赞同：-1
> 
> 时间：2012-12-24T10:26:25.870
> 
> 标签：ruby-on-rails, role

我想设置一个应用程序，每个用户可以在网络中拥有不同的角色。

所以用户 A 是网络 X 中的“管理员”，同时也是网络 Y 中的“客户”。每个角色在网络中都有自己的能力。例如管理员可以创建帖子，客户只能销毁他自己的评论等。

实现此设置的最佳表结构是什么？我应该使用 Devise + CanCan + ... 设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:13:45.257

有一个名为**[rolify](https://github.com/EppO/rolify/wiki/Usage)**的 gem （具有资源范围的角色管理库）gem，它也可以使用 devise 和 cancan [link](https://github.com/EppO/rolify/wiki/Tutorial)设置，假设您有模型**用户**

**安装：**

```
gem "rolify"
bundle
rails g rolify:role Role User 
```

您可以添加角色：

```
user = User.find(1)
user.add_role :admin 
```

查看：

```
user.has_role? :admin 
```

如果要定义作用域为资源实例的角色：

```
user = User.find(2)
user.add_role :moderator, Post.first 
```

在你的ability.rb中：

```
if user.has_role? :admin
  can :manage, :all
else
  can :read, Post
  can :write, Post, :id => Post.with_role(:moderator, user).map{ |f| f.id }
end 
```

请注意，**with_role**方法允许我们限制用户拥有角色的 Post 实例

# javascript - 使用 aws-sdk 下载二进制文件时出现问题

> ID：14020065
> 
> 赞同：2
> 
> 时间：2012-12-24T10:27:14.360
> 
> 标签：javascript, node.js, amazon-web-services, knox-amazon-s3-client

我正在将我的服务器从 knox 切换到官方的 aws-sdk，但我与最终结果存在一些差异。

在 aws-sdk 中，我使用[getObject](http://docs.amazonwebservices.com/AWSJavaScriptSDK/latest/AWS/S3/Client.html#getObject-property)以这种方式获取文件：

```
svc.client.getObject({Bucket:"someBucket", 
    Key:file,
    ResponseContentEncoding:"application/octet-stream"}, 
        function(err, data) {
            if(!err)
            {
                var buff = new Buffer(data.Body, "binary");
                var fd = fs.openSync(file + ".aws", "w");
                fs.writeSync(fd, buff, 0, buff.length,0);
            }
        }); 
```

我得到的文件似乎少了几个字节，但是当我在 BeyondCompare 等十六进制编辑器中比较它时，大量字节被替换为“FD”。对此有何见解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:54:50.620

知道了：

```
var writePos = 0;
var stream = fs.createWriteStream("/tmp/test.jpg", { flags: 'w', encoding: null, mode: 0666 });
s3.client.getObject({ Bucket: bucket, Key: key }).data(function(data) {
    stream.write(data.data);
}).done(function() {
    stream.end();
}).send(); 
```

**2012 年 1 月 9 日编辑：**如果您使用的是 github 的最新版本，则库有更新：

```
var stream = fs.createWriteStream("/tmp/test.jpg", { flags: 'w', encoding: null, mode: 0666 });
s3.client.getObject({ Bucket: bucket, Key: key }).on('httpData', function(chunk) {
    stream.write(chunk);
}).on('complete', function() {
    stream.end();
}).send(); 
```

这是在以下拉取请求中介绍的：[https ://github.com/aws/aws-sdk-js/pull/22](https://github.com/aws/aws-sdk-js/pull/22)

# c# - 将 UploadString 与 C# WebClient 一起使用时是否需要对值进行编码？

> ID：14020071
> 
> 赞同：3
> 
> 时间：2012-12-24T10:27:46.383
> 
> 标签：c#, asp.net-mvc

我有如下代码来对服务器进行 POST：

```
string URI = "http://mydomain.com/foo";
string myParameters =
   "&token=1234" +
   "&text=" + HttpUtility.UrlEncode(someVariable);

using (WebClient wc = new WebClient())
{
      wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
      string HtmlResult = wc.UploadString(URI, myParameters);
} 
```

是否需要像我正在做的那样对参数进行 UrlEncode 或在幕后`UploadString`自动处理？我不想冒险使用任何类型的双重编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:09:23.980

`UploadString`是的，如果您使用该方法，则需要对其进行编码。

但是您可以为您的案例 ( ) 使用更智能的重载[`UploadValues`](http://msdn.microsoft.com/en-us/library/9w7b4fz7.aspx)：

```
string URI = "http://mydomain.com/foo";
var values = new NameValueCollection
{
    { "token", "1234" },
    { "text", someVariable },
};

using (var wc = new WebClient())
{
    byte[] result = wc.UploadValues(URI, values);
    string htmlResult = Encoding.UTF8.GetString(result);
} 
```

现在您不再需要担心任何编码。发送请求时将`WebClient`考虑它们。此外，您会注意到我已经删除了`application/x-www-form-urlencoded`您添加的内容，因为当您使用该`UploadValues`方法时，此 Content-Type 标头将自动添加到请求中。

# c# - 在 PenDrive Attch 和 Detach 上引发事件

> ID：14020075
> 
> 赞同：0
> 
> 时间：2012-12-24T10:28:05.557
> 
> 标签：c#, windows

在我的应用程序中，我想在笔式驱动器附加和分离事件上引发事件。我使用以下代码来引发事件。

```
private ManagementEventWatcher watcherAttach;

private ManagementEventWatcher watcherRemove;        

watcherAttach = new ManagementEventWatcher();
watcherAttach.EventArrived += new EventArrivedEventHandler(watcher_EventArrived);
watcherAttach.Query = new WqlEventQuery("SELECT * FROM Win32_DeviceChangeEvent WHERE EventType = 2");
watcherAttach.Start();

watcherRemove = new ManagementEventWatcher();
watcherRemove.EventArrived += new EventArrivedEventHandler(watcher_EventRemoved);
watcherRemove.Query = new WqlEventQuery("SELECT * FROM Win32_DeviceChangeEvent WHERE EventType = 3");
watcherRemove.Start();

// this are events
void watcher_EventArrived(object sender, EventArrivedEventArgs e)
{
     // code to execute
}

void watcher_EventRemoved(object sender, EventArrivedEventArgs e)
{
   //code to execute
} 
```

但问题是这两个事件都引发了两次，并且我的代码在这两个事件中都没有完全执行，有人可以建议我如何克服这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:07:06.733

我认为最简单的方法是取消订阅一个事件，然后做你的工作并再次订阅。当您取消订阅时，插入其他设备的可能性很小。在处理键盘上的双击键时，我也是这样做的。

```
// this are events
void watcher_EventArrived(object sender, EventArrivedEventArgs e)
{
watcherAttach.EventArrived -= new EventArrivedEventHandler(watcher_EventArrived);
     // code to execute
watcherAttach.EventArrived += new EventArrivedEventHandler(watcher_EventArrived);
}

void watcher_EventRemoved(object sender, EventArrivedEventArgs e)
{
watcherRemove.EventArrived -= new EventArrivedEventHandler(watcher_EventRemoved);
   //code to execute
watcherRemove.EventArrived += new EventArrivedEventHandler(watcher_EventRemoved);
} 
```

# windows - 在 Windows 7 上安装调试工具以分析小型转储

> ID：14020077
> 
> 赞同：7
> 
> 时间：2012-12-24T10:28:07.180
> 
> 标签：windows, crash, crash-dumps, minidump

我一直在尝试安装“调试工具”，以便尝试将转储文件分析为服务器崩溃（Windows Server 2008 R2）。

我过去曾经这样做过，但我找不到如何安装/定位 Windows 7 的调试工具。

我已阅读此知识库文章： http: [//support.microsoft.com/kb/315263](http://support.microsoft.com/kb/315263)。

然后，我尝试从以下文章 ( [http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx) ) 下载“Windows 调试工具”。我选择了“为 Windows 安装调试工具作为独立组件”，下载文件并安装。

它确实安装成功，但我仍然找不到文件。这对我来说似乎是一个愚蠢的问题，但我无法以任何方式找到调试工具！我什至尝试下载提到的 Windows 7 调试工具 ( [http://www.microsoft.com/en-us/download/details.aspx?id=8279](http://www.microsoft.com/en-us/download/details.aspx?id=8279) )，但还是找不到它们！

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-18T06:41:14.297

我有同样的问题。我搜索了我的整个系统，没有找到任何windbg的痕迹。我懒得去找原因。相反，我暂停了安装程序，在 temp 目录中找到了 windbg MSI 文件，并直接安装了它。它运作良好。

如果有人想要这个文件，我把它放在这里：[https](https://dl.dropboxusercontent.com/u/5395920/windbg-x86-6.12.0002.633.msi) ://dl.dropboxusercontent.com/u/5395920/windbg-x86-6.12.0002.633.msi 。版本为 6.12.0002.633 (x86)，其 MD5/SHA1 为 2bd67a7b00507ad93539e138a4a6a2bf / 117814c255f19dc67e769c668bc97e547c05a55b。它也在这里，直接来自 Microsoft [http://download.microsoft.com/download/A/6/A/A6AC035D-DA3F-4F0C-ADA4-37C8E5D34E3D/setup/WinSDKDebuggingTools/dbg_x86.msi](http://download.microsoft.com/download/A/6/A/A6AC035D-DA3F-4F0C-ADA4-37C8E5D34E3D/setup/WinSDKDebuggingTools/dbg_x86.msi)，但我不知道如何会持续多久。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T12:20:28.767

试试这个找到windbg.exe

```
cd /d c:
dir /s windbg.exe 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-09T13:10:08.653

这里有点类似的问题：

包含调试工具的 Win7 的 Win SDK 安装程序总是失败。但是在安装日志中可以找到上述链接[http://download.microsoft.com/download/A/6/A/A6AC035D-DA3F-4F0C-ADA4-37C8E5D34E3D/setup/WinSDKDebuggingTools/dbg_x86.msi](http://download.microsoft.com/download/A/6/A/A6AC035D-DA3F-4F0C-ADA4-37C8E5D34E3D/setup/WinSDKDebuggingTools/dbg_x86.msi)

这个安装程序运行良好！

如果有人需要 Win SDK 中的其他工具：日志中有更多 msi 安装程序链接！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T18:39:41.133

如果一切都失败了，您可能想尝试[此处](http://msdn.microsoft.com/en-us/windows/hardware/hh852365)找到的“Windows 8.1 独立调试工具” 。有关更多详细信息，请参阅[我的答案](https://stackoverflow.com/a/22077391/499721)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-22T13:45:52.110

我昨天在另一个系统上再次经历了 Win SDK 安装程序失败。我删除了对 MVC++ 10 编译器的所有引用（再次），但安装程序仍然失败（即使未选中编译器复选框）。

我需要 cdb.exe 来安装新的 Qt。可以在此处找到 MSDN 存档 - [http://archive.msdn.microsoft.com/debugtoolswindows/Release/ProjectReleases.aspx?ReleaseId=4912](http://archive.msdn.microsoft.com/debugtoolswindows/Release/ProjectReleases.aspx?ReleaseId=4912)

虽然我使用了不同的 dbg_x86.msi，但这个似乎在字节数等方面相似，并且来自 Microsoft 的站点。

# vb.net - 用VB实时监控日志文件？(VS 2012 Express & Win 7)

> ID：14020085
> 
> 赞同：0
> 
> 时间：2012-12-24T10:28:57.527
> 
> 标签：vb.net, file, logging, visual-studio-2012

我正在尝试在 VB 中创建一个小型表单/应用程序来监视日志文件。另一个应用程序不断写入日志，我想以某种方式读取任何新写入的内容并将其实时显示在文本框中。

关于如何做到这一点的任何想法？

谢谢，杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:47:03.950

如果另一个应用程序不是您的，那么您需要使用新应用程序中的计时器读取该文件的修改时间戳或大小。

如果其他应用程序是您的，请使用 windows sendmessage API 从其他应用程序向您的应用程序写入发送消息。

# c# - 在应用程序执行之间保留数据

> ID：14020086
> 
> 赞同：14
> 
> 时间：2012-12-24T10:29:01.020
> 
> 标签：c#, .net, winforms

我有一个带有一些文本框的应用程序。我的用户填充文本框并运行一些方法，当他们关闭应用程序数据时（通常）会丢失。

我想保留几个文本框和一些局部变量的值。不值得使用`database`，简单`.txt`的文件也不够干净，有没有其他简单简洁的方法可以在应用程序运行之间存储少量数据？

我不确定，但听说过一些关于资源文件的消息，它们对这种情况有好处吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-24T10:34:50.067

最简单的方法是将文本框绑定到[应用程序设置](http://msdn.microsoft.com/en-us/library/aa730869.aspx)：

*   选择要保留的texbox
*   转到属性>数据>（应用程序设置）
*   将应用程序设置绑定添加到 Text 属性
*   关于`FormClosed`事件保存应用程序设置

保存设置：

```
private void Form_FormClosed(object sender, FormClosedEventArgs e)
{
    Settings.Default.Save();
} 
```

下次用户启动您的应用程序时，将从用户特定文件加载设置，并且文本框将填充与用户上次关闭应用程序之前相同的数据。

同样在应用程序设置中，您可以存储局部变量，但您必须手动为其添加设置，并在应用程序启动时手动读取该设置：

*   打开项目下的属性文件夹> Settings.settings
*   添加要存储的设置（例如 MyCounter）
*   设置 MyCounter 类型、范围和默认值（例如 int、User、0）
*   将设置读取到本地变量`var x = Settings.Default.MyCounter`
*   `Settings.Default.MyCounter = x`在调用之前的表单关闭保存设置`Settings.Default.Save()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:37:24.497

您有以下选择

1.  一个本地 Microsoft Access 数据库，可以存储小空间。

2.  使用字典，序列化/反序列化到文件系统。

3.  Windows 注册表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T10:41:39.090

有几个选项，但对于大多数选项，您将在某个地方放置一个文件，无论是文本文件、资源/配置还是二进制文件。

使用设置是一种选择： http: [//www.codeproject.com/Articles/17659/How-To-Use-the-Settings-Class-in-C](http://www.codeproject.com/Articles/17659/How-To-Use-the-Settings-Class-in-C)

也可以走序列化路线：http: [//msdn.microsoft.com/en-us/library/vstudio/et91as27.aspx](http://msdn.microsoft.com/en-us/library/vstudio/et91as27.aspx)

或者您可以查看像 MongoDB 这样的 noSQL 数据库：[http ://www.mongodb.org/](http://www.mongodb.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T10:31:48.633

假设您在 Windows 上（如标签所示），您是否考虑过注册表？

# php - 仅从日期时间字段（mysql）中提取日期并将其分配给 php 变量

> ID：14020090
> 
> 赞同：9
> 
> 时间：2012-12-24T10:29:05.650
> 
> 标签：php, mysql, sql, date, datetime

我无法从`datetime`MySQL 表的字段中仅将日期分配给 php 变量。我正在使用**PHP 4**，我知道如何在 PHP 5 中做到这一点。

有人可以帮助了解以下 php 代码中缺少的内容。

```
$dc = mysql_query("SELECT * FROM INVHDR WHERE Invdate BETWEEN '2011-04-01' AND '2012-03-31'");
while ($dc2 = mysql_fetch_assoc($dc)) {
    $invno      = $dc2['Invno']; // Here Invno is a datetime field type
    $invdat3    = $dc2['Invdate'];
    $date_array = explode("-", $invdat3);
    $invdat     = sprintf('%02d/%02d/%4d', $date_array[2], $date_array[1], $date_array[0]);
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-24T10:33:12.827

如果您只想*显示*日期部分，可以使用[`DateTime`](http://php.net/manual/en/class.datetime.php)该类：

```
echo DateTime::createFromFormat("Y-m-d H:i:s", "2012-12-24 12:13:14")->format("d/m/Y");
// 24/12/2012 
```

//编辑双回声错字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T10:35:11.440

当涉及到日期操作时，我发现一个链接非常有用：http: [//dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

在那里可以很容易地找到解决方案：

```
SELECT *, DATE(Invdate) as Inv_date ... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T10:35:51.450

直接在 MySQL 中执行：

```
select DATE_FORMAT('2012-12-24 12:13:14', '%Y/%m/%d') 
```

因此，您的查询将如下所示：

```
SELECT DATE_FORMAT(Invdate, '%Y/%m/%d') FROM INVHDR WHERE Invdate BETWEEN '$startdat' AND '$enddat' 
```

# javascript - 谷歌地图 api 清除标记

> ID：14020094
> 
> 赞同：-1
> 
> 时间：2012-12-24T10:29:38.993
> 
> 标签：javascript, google-maps-api-3

您好，我在删除地图上的标记时遇到问题。我做了一个事件，如果我的下拉菜单会改变标记将被删除。到目前为止它不起作用。会感谢任何人我做错了什么。这是我的代码。将删除覆盖的功能是`filtermark()`。对不起，我是 javascript 的菜鸟。

```
 function load() {
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(10.4167, 123.0000),
    zoom: 8,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;

  downloadUrl("xmlspitter.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var type = markers[i].getAttribute("type");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/>" + address;
      var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      bindInfoWindow(marker, map, infoWindow, html);
    }
  });

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}
  }
//]]>
 function filtermark(){
google.maps.Map.prototype.clearMarkers = function() {
for(var i=0; i < this.markers.length; i++){
    this.markers[i].setMap(null);
}
this.markers = new Array();
  };

 } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-24T11:13:00.810

修复它的问题是我没有声明`var maps`并将`var markers`所有标记推入数组中`markersArray.push(marker);`。

# java - Java中int的范围

> ID：14020097
> 
> 赞同：4
> 
> 时间：2012-12-24T10:29:50.040
> 
> 标签：java, integer, range

我知道Java中的*int*范围应该是-2^31到2^31-1。

但是当我用 20 运行这个代码片段时：

```
public class Factorial {
    public int factorial(int n) {
        int fac=1;
        for (int i=1; i<=n; i++) {
            fac *= i;
            System.out.println("Factorial of " + i + " is: " + fac);
        }
        return fac;
    }
} 
```

输出：

```
Factorial of 1 is: 1
Factorial of 2 is: 2
Factorial of 3 is: 6
Factorial of 4 is: 24
Factorial of 5 is: 120
Factorial of 6 is: 720
Factorial of 7 is: 5040
Factorial of 8 is: 40320
Factorial of 9 is: 362880
Factorial of 10 is: 3628800
Factorial of 11 is: 39916800
Factorial of 12 is: 479001600
Factorial of 13 is: 1932053504
Factorial of 14 is: 1278945280
Factorial of 15 is: 2004310016
Factorial of 16 is: 2004189184
Factorial of 17 is: -288522240
Factorial of 18 is: -898433024
Factorial of 19 is: 109641728
Factorial of 20 is: -2102132736 
```

从 13 (13! = 6,227,020,800) 开始没有意义。看起来它超出了范围并被缠绕了。怎么了？是因为我使用的是[Eclipse吗？](https://en.wikipedia.org/wiki/Eclipse_%28software%29)

虽然我认为这不相关，但这里是测试代码：

```
public class TestFac {

    public static void main(String[] args) {
        int n;
        Scanner sc = new Scanner(System.in);

        System.out.println("Input num you want to factorial: ");
        n = sc.nextInt();
        Factorial fac = new Factorial();
        fac.factorial(n);
    }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-09-30T07:40:54.360

这里我想提一下整数时钟的概念。

Java 中 int 的最大值和最小值是：

```
int MAX_VALUE = 2147483647
int MIN_VALUE = -2147483648 
```

请检查以下结果

```
 int a = 2147483645;
 for(int i=0; i<10; i++) {
    System.out.println("a:" + a++);
 } 
```

输出：

```
a:2147483645
a:2147483646
a:2147483647
a:-2147483648
a:-2147483647
a:-2147483646
a:-2147483645
a:-2147483644
a:-2147483643
a:-2147483642 
```

它表明当您超出整数的 +ve 范围的限制时，下一个值再次从其负起始值开始。

```
 -2147483648,       <-----------------
 -2147483647,                        |
 -2147483646,                        |
  .                                  |
  .                                  |
  .                                  |    (the next value will go back in -ve range)
  0,                                 |
 +1,                                 |
 +2,                                 |
 +3,                                 |
  .                                  |
  .                                  |
  .,                                 |
 +2147483645,                        |
 +2147483646,                        |
 +2147483647     --------------------- 
```

如果你计算 13 的阶乘，它是 6227020800。这个值超出了 java 的 int 范围。所以新的价值将是

```
 6227020800
      - 2147483647 (+ve max value)
   -----------------
Value = 4079537153
      - 2147483648 (-ve max value)
   -----------------
value = 1932053505
   -             1  (for zero in between -ve to +ve value)
  ----------------
Answer = 1932053504 
```

因此，在您的回答中，13 的阶乘变为 1932053504。这就是整数时钟的工作原理。

您可以使用 long 数据类型而不是整数来实现您的目的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T10:36:14.967

从*[原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)*：

> `int`数据类型是 32 位有符号二进制补码整数。它的最小值为 -2,147,483,648，最大值为 2,147,483,647（含）。对于整数值，此数据类型通常是默认选择，除非有理由（如上述）选择其他内容。这种数据类型很可能对于您的程序将使用的数字足够大，但如果您需要更广泛的值，请改用 long。

故事寓意：永远不要盲目相信你的老师！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T10:36:44.097

如果勾选Java Integer，其最大值和最小值如下：

```
int    MAX_VALUE = 2147483647
int    MIN_VALUE = -2147483648 
```

如果你做一些数学运算，你会看到（13 的阶乘）超出了 int [MAX_VALUE](http://docs.oracle.com/javase/1.4.2/docs/api/constant-values.html#java.lang.Integer.MAX_VALUE)`1932053504 * 14` ，这就是为什么你得到 14 阶乘的错误结果。所以为了得到好的结果，最好使用类型反而。`27048749056``long`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T10:36:57.467

阶乘 13 是 6227020800。这超过 31 位长，所以它被环绕。

如果您想支持*大*数字（例如，任意长度），请考虑使用提供无限范围的[BigInteger类。](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-09T05:24:48.667

请运行此代码：

```
System.out.println("Minimum value of Integer is: " + Integer.MIN_VALUE);
System.out.println("Maximum value of Integer is: " + Integer.MAX_VALUE); 
```

所以你可以看到它失败的原因。

# pagination - CakePHP 2.1 用于分页链接的自定义 url

> ID：14020098
> 
> 赞同：0
> 
> 时间：2012-12-24T10:29:53.047
> 
> 标签：pagination, cakephp-2.1

我正在使用 cakephp 2.1，并在“最新”视图中定义了分页链接。它在 url 中显示控制器和操作名称，例如

`/pages/latest/page:2`.

但我只想要 url 中的动作名称

`/latest/2`.

请建议我怎么做？..这项工作将更加可观..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:35:50.967

您可以定义自定义路线。

> CakePHP 中的路由还包含反向路由的思想，其中可以将参数数组反转为字符串 url。通过使用反向路由，您可以轻松重构应用程序的 url 结构，而无需更新所有代码。

[http://book.cakephp.org/2.0/en/development/routing.html](http://book.cakephp.org/2.0/en/development/routing.html)

例如

```
Router::connect(
  '/latest/:number',
  array('controller' => 'pages', 'action' => 'view'),
  array('pass' => array('number'))
); 
```

# php - 使用 md5() 获取位置

> ID：14020103
> 
> 赞同：0
> 
> 时间：2012-12-24T10:30:23.280
> 
> 标签：php, codeigniter, codeigniter-2

我想使用以下方法执行这个简单的查询`Codeigniter`：

```
$user = $this->db->get_where($type,array("id"=>$id)); 
```

`$type`是表的名称， `$id`是一个`md5()`值，所以我想做这样`$this->db->get_where($type,array(md5("id")=>$id));`的事情当然是不可能的。

答案可能是`$this->db->query('select * from $type where MD5(id) = $id');`，但我更喜欢更紧凑的方式`get_where()`来执行查询。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:56:20.440

`$this->db->get_where($type,array("md5(id)"=>$id));`完美运行。我得到了我想要的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-04T13:53:42.523

回答我最近遇到的原始问题，发现这是谷歌的最高结果。

```
$user = $this->db->get_where( $type, array( 'md5( id ) =' => $id ) ); 
```

您还可以将 = 替换为其他运算符，例如 LIKE 和 NOT LIKE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T10:50:29.987

```
$this->db->where('MD5(id)', $id, FALSE); 
```

设置为 FALSE 的第三个参数将阻止 CI 使用反引号保护您的字段和表名称，而不是将代码转换为：

```
WHERE `MD5(id)` = 'THE ID' 
```

这将是：

```
WHERE MD5(id) = 'THE ID' 
```

# ruby-on-rails - 我如何访问模型中的视图助手

> ID：14020104
> 
> 赞同：0
> 
> 时间：2012-12-24T10:30:26.823
> 
> 标签：ruby-on-rails, ruby, helpers

鉴于我已经在`config/routes.rb`

`resource :products`

如果我想访问路由助手，例如`product_path(self)`在模型中生成 url。我怎么能把这些模块混在一起呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T10:34:02.720

```
class MyClass < ActiveRecord::Base
  include Rails.application.routes.url_helpers
end 
```

或（不包含）

```
Rails.application.routes.url_helpers.product_path(self) 
```

# html - 文本阴影在 IE9 中不起作用，使用 css？

> ID：14020107
> 
> 赞同：0
> 
> 时间：2012-12-24T10:30:35.850
> 
> 标签：html, css

> **可能重复：**
> [IE9 中的 css3 text-shadow](https://stackoverflow.com/questions/6905658/css3-text-shadow-in-ie9)

我正在使用文本阴影样式，但它在 ie9 中不起作用，请告诉我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:32:37.647

IE9 不支持`text-shadow` [看到这里](http://caniuse.com/#search=text-shadow)- 使用类似

```
filter: Shadow(Color=black, Direction=100, Strength=1); 
```

[这里的例子](http://jsfiddle.net/Tp9Mr/)

# security - Web 应用程序 - STS 身份提供者集成

> ID：14020108
> 
> 赞同：0
> 
> 时间：2012-12-24T10:30:38.290
> 
> 标签：security, wif, federated-identity, ws-federation

我想设置具有 STS 身份提供者相关性的 Web 应用程序。

我已经准备好测试 Web 应用程序，使用 WIF 联合实用程序设置所有必需的 WIF 数据并以 STS 服务为目标。那没问题。我收到了来自测试 STS 的令牌。现在我不知道如何完成以下场景：用户来到应用程序并且他/她没有登录。打开登录页面，用户提供凭据（用户名和密码），然后我的页面必须将该请求重定向到 STS 服务。目前，当我得到 WSFederationAuthenticationModule http 模块时，它会自动拦截 HTTP 请求，当它确定这是未经授权的时，它会将该请求重定向到 STS。如果我错了，请纠正我。现在我很困惑，如果它是自动操作，用户提供数据的步骤在哪里？我想完成 WS-Federation 标准。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:22:28.657

使用 WS-Federation - 用户在 STS 而不是应用程序上提供其凭据。

那是

a) 通过设计 - 您的应用程序不需要关心密码，STS 需要
b) 与其他站点的 SSO 的先决条件

# c# - 为什么 Process.Start("cmd.exe", process); 不行？

> ID：14020109
> 
> 赞同：16
> 
> 时间：2012-12-24T10:30:41.953
> 
> 标签：c#, .net, command-line

这有效：

```
Process.Start("control", "/name Microsoft.DevicesAndPrinters"); 
```

但这不会：（它只是打开一个命令提示符。）

```
ProcessStartInfo info = new ProcessStartInfo("cmd.exe");
info.Arguments = "control /name Microsoft.DevicesAndPrinters";
Process.Start(info); 
```

为什么？

（是的，我知道它们并不相同。但第二个“应该”工作。）

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-24T10:41:32.610

这是因为`cmd.exe`期望`/K`开关执行作为参数传递的进程。试试下面的代码

```
ProcessStartInfo info = new ProcessStartInfo("cmd.exe");
info.Arguments = "/K control /name Microsoft.DevicesAndPrinters";
Process.Start(info); 
```

编辑：更改为`/K`以上。`/C`如果要`cmd.exe`在运行命令后关闭，可以使用switch。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-24T10:44:50.330

您需要一个`/c`或一个`/k`开关（用于 的选项`cmd.exe`），以便执行该命令。尝试：

```
ProcessStartInfo info = new ProcessStartInfo("cmd.exe");
info.Arguments = "/c control /name Microsoft.DevicesAndPrinters";
Process.Start(info); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T10:37:45.123

试试这个

```
ProcessStartInfo info = new ProcessStartInfo("control");
info.Arguments = "/name Microsoft.DevicesAndPrinters";
Process.Start(info); 
```

# php - PHPexcel，以及如何下载未损坏的文件？

> ID：14020110
> 
> 赞同：0
> 
> 时间：2012-12-24T10:30:50.080
> 
> 标签：php, phpexcel

我已经搜索了几个小时，并仔细阅读了几十页试图找到答案。

我正在使用 PHPexcel 生成一个电子表格，并将其作为 excel 2007 .xlsx 文件保存在我的服务器上。如果我直接从服务器下载 .xlsx 文件并在我的计算机上打开它，它可以正常打开。没问题。

如果我使用 php 脚本下载文件（通过`readfile()`），ms excel 会给我一条“此文件已损坏...”消息。

好的，我已经对这两个文件进行了十六进制文件比较，但是没有明显的区别！

这发生在我的 ubuntu 服务器（运行 php 5.3.2）以及 wampserver（运行 PHP 5.3.13 的 Windows 8、64 位环境）上。

我已经检查了所有内容，以确保在 readfile(); 之前没有发送 \t 或 \n 或任何其他输出；

我使用了 ob_start 和 ob_end_clean() 来确保没有输出被发送。

我没有使用带有错误 php_zip.dll 二进制文件的 PHP v 5.2.8。

得到**这个！**， 这太疯狂了。

我什至使用 MS excel 程序创建了一个 excel 文件。文件没有问题。我直接将它上传到我的服务器，然后通过链接直接访问它。它会下载，当我尝试打开它时，我会收到“文件已损坏且无法打开”的消息。

如果您想尝试，这里是直接链接：http: [//db.doanddare.org/Lyv6r_y7echVnAcUG4fGUw/testing.xlsx](http://db.doanddare.org/Lyv6r_y7echVnAcUG4fGUw/testing.xlsx)

是的，它是我刚刚在 excel 中创建并上传的测试文件的直接链接。这里不涉及 php 处理或标头。

Stack Overflow 是我最后的选择！谢谢你的帮助。

哦，我正在使用 excel 2013 预览版，如果这有帮助的话......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-26T06:36:43.440

不知道你是否还有这个问题，毕竟你问它已经两年了，但我刚刚遇到了这个问题，并找到了解决方案：

您需要更改 Excel 中的设置 - 它为我解决了问题。

1.  打开 Excel。
2.  单击“文件”，然后单击“选项”。
3.  选择“信任中心”，然后选择“信任中心设置”。
4.  选择“受保护的视图”。
5.  取消选中“受保护的视图”下的选项，然后单击“确定”。
6.  重新启动 Excel 并尝试打开 Excel 文档。

（原始来源：Microsoft Excel 帮助页面）

# asp.net - 使用 VB.NET 在 ASP.NET 中将文件下载到客户端 PC

> ID：14020113
> 
> 赞同：1
> 
> 时间：2012-12-24T10:31:14.657
> 
> 标签：asp.net, vb.net, download, dialog

我正在开发一个只能在我们组织内部访问的网站。

我想实现一个功能，客户端将从`(Visio File *.vsd)`服务器下载文件并将其保存到任何位置。

我遇到了一个解决方案：

```
dim wc as new WebClient ()

wc.downloadFile(src,dest) 
```

但是，此解决方案不会提示另存为对话框（**我想要在我的应用程序中使用**）。此外，我应该知道他保存文件的客户 PC 上的路径，以便可以将路径保存在数据库中。

（供参考：我想实现类似于**VSS**的功能。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T10:52:53.543

在 ASP.NET 中，如果要将文件流式传输到客户端并让“另存为”对话框提示用户选择位置，则必须设置正确的 Content-Type 和 Content-Disposition 响应标头，然后将文件直接写入响应流：

例如：

```
protected void SomeButton_Click(object sender, EventArgs e)
{
    // TODO: adjust the path to the file on the server that you want to download
    var fileToDownload = Server.MapPath("~/App_Data/someFile.pdf");

    Response.ContentType = "application/octet-stream";
    var cd = new ContentDisposition();
    cd.Inline = false;
    cd.FileName = Path.GetFileName(fileToDownload);
    Response.AppendHeader("Content-Disposition", cd.ToString());

    byte[] fileData = System.IO.File.ReadAllBytes(fileToDownload);
    Response.OutputStream.Write(fileData, 0, fileData.Length);
} 
```

现在，当此代码执行时，该文件将被发送到客户端浏览器，该浏览器将提示将其保存在他计算机上的特定位置。

不幸的是，出于安全原因，您无法捕获客户选择在其计算机上存储文件的目录。此信息永远不会通过网络传输，并且您无法在 ASP.NET 应用程序中知道它。因此，您将不得不寻找其他方法来获取此信息，例如要求客户在某个文本框或其他字段中输入它。

# sql - 您如何改进我的数据库结构的设计？

> ID：14020115
> 
> 赞同：1
> 
> 时间：2012-12-24T10:31:24.093
> 
> 标签：sql, database

我只对数据库设计和 SQL 有一点了解。我为学习编程和数据库编写了一个简单的学生分数管理器，但我的设计很糟糕。

# 数据库结构

我的数据库有三个表：

1.  学生信息
2.  日志
3.  星期

先来说说吧`student_info`。这个表结构就像这样：

```
id  student_name    group    the_score_for_1_week    the_score_for_2_week
1   Adam            2        24                      2 
```

*字段数未知。*

`logs`很乱：

```
id  date    student_name    score   change  week
1   01-01   Adam            2       2       1
2   01-02   Adam            1       -1      1
2   01-02   Adam            24      23      1 
```

表`week`只有 1 个字段。

```
week
2 
```

# 程序

在我展示了数据库的结构之后。我要谈谈我的程序是如何工作的。

# 它看起来怎么样？

该程序有两个网格，一个图表，三个按钮。第一个网格用于学生姓名和分数。第二个网格是日志，我们可以看到分数是如何变化的。该图表也用于显示分数的变化。这是我的第一个蓝图。

![蓝图](../Images/30640d9aaa6435ef22098b90f3977905.png)

当用户用鼠标点击第一个图表上的学生姓名时，第二个图表会显示该学生的成绩日志，该图表会显示该学生成绩的折线图。

该程序可以为不同的周保存不同的分数。所以，它有三个按钮：`Last Week`, `Next Week`, `New Week`。*我们只能编辑最近一周。*

# 它是如何工作的

当程序启动时，它将从 中选择最近的一周`week`。

```
SELECT week FROM week 
```

然后从 中选择, `student_name`,`group`最近*一周*`student_info`。我们可以加/减学生的分数。

```
"SELECT student_name,the_score_for_%s_week,group FROM student_info" % (week) 
```

分数更改后，将向`logs`表中插入一条记录。

```
"INSERT INTO log(change,score,date,student_name,week) VALUES ("
                 "'%s', '%s', '%s', '%s', '%s')" % (
                 newScore - oldScore, newScore,
                 time.strftime("%m-%d", time.localtime()),
                 student, week)) 
```

当新的一周开始时，`the_score_for_%d_week`将插入一个新字段`student_info`，我们还需要更新`week`表。

```
"ALTER TABLE student_info ADD the_score_for_%s_week,group INTEGER DEFAULT 0" % week
"UPDATE student_info SET the_score_for_%s_week,group=0" % week)
"UPDATE week SET week =%s" % week 
```

当用户的鼠标点击学生姓名时，第二个网格将显示历史分数。

```
 "SELECT date,change FROM log WHERE the_score_for_%s_week=%s and student_name='%s'" % (week, student) 
```

该图表将显示分数如何变化。与第二个网格不同，我们需要完整的分数，而不是 +1 或 -1 来绘制图表。

```
"SELECT score FROM log WHERE the_score_for_%s_week=%s and student_name='%s'" % (week, student)) 
```

**如您所见，数据库设计很糟糕。****我** 知道*StackOverFlow*不是代码审查网站。但我只想告诉你更多细节。我尝试改进数据库结构很多次，但我对此一无所知。

 **最后，感谢您阅读这个很长的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:55:12.090

我建议将分数从学生信息表中取出，然后将它们放入单独的表中。这可能不需要 LOG 表，因为您可以即时检查这些详细信息。

Student_Info 将包含：

```
ID
Name
Group 
```

新表 Result_Details 将包含：

```
ID
Date
Student_Info_ID
Score 
```

当新的一周开始时，您可以在 Result_Details 中将详细信息作为新行输入，而不必每周向 Student_Info 添加新列。

然后要检索学生的分数列表，您可以使用以下内容：

```
select SI.Name, RD.Date, RD.Score 
from Student_Info as SI 
Join Result_Details RD on RD.Student_Info_ID = SI.ID
Where SI.Name = 'Tom' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:01:10.170

好吧，我假设您的问题旨在提高您的知识，以了解编程的各个方面，而不是您试图获得捷径答案的一些学校作业项目。在我看来，以下链接相当清楚地了解 SQL 的含义。[http://www3.ntu.edu.sg/home/ehchua/programming/sql/Relational_Database_Design.html](http://www3.ntu.edu.sg/home/ehchua/programming/sql/Relational_Database_Design.html)唯一需要注意的是，这些天没有 SQL 和 SQL。NOSQL 数据库本质上是数据库，其中由 CODD 产生的行和列格式被丢弃，取而代之的是没有正式行结构的数据块。两者不应混淆。在适当的情况下，每个人都会超越另一个人。

如果上述文章没有，谷歌搜索“关系数据库设计教程”将有所帮助。简而言之：这个问题的第 1 步是了解 SQL 数据库是关于什么的。其他的都在后面......

希望这可以帮助**

# google-chrome - dd-mm-yyyy Google Chrome 的日期验证错误

> ID：14020117
> 
> 赞同：3
> 
> 时间：2012-12-24T10:31:44.403
> 
> 标签：google-chrome, localization, asp.net-mvc-4, jquery-validate, date-format

我正在开发一个 ASP.NET MVC4 应用程序。

**我的视图模型类属性**

```
[DisplayName("Birth Date")]
        [Required(ErrorMessage = "You must indicate your full birthday")]
        [DataType(DataType.Date), DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd/MM/yyyy}")]
        public DateTime BirthDate { get; set; } 
```

**Javascript代码**

```
var dt = new Date();
    $(function () {
        $("#BirthDate").datepicker({
            showOn: "button",
            buttonImage: "@Url.Content("~/Content/themes/base/images/calendar.gif")",
            buttonImageOnly: true,
            dateFormat: 'dd/mm/yy',
            changeMonth: true,
            changeYear: true,
            yearRange: '1980:dt'
        });
    }); 
```

**查看代码**

```
<div class="block">
                    @Html.LabelFor(model => model.BirthDate, new { @Class = "compel" })
                    @Html.TextBoxFor(model => model.BirthDate)
                </div> 
```

当我在 IE 和 Mozilla Firefox 中运行该应用程序时，它工作正常，但使用 google chrome 时，它​​会给出验证错误，因为**Value 24/12/2012 is invalid for Birth Date**。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:53:05.573

看起来 IE 和 Firefox 使用与 OS 相同的格式，而 Chrome 没有，这有时会导致日期验证出现问题。

也许这会解决您的问题：[Chrome 中的非侵入式验证不会使用 dd/mm/yyyy 进行验证](https://stackoverflow.com/questions/6906725/unobtrusive-validation-in-chrome-wont-validate-with-dd-mm-yyyy)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-29T15:52:46.483

为了解决我所做的问题：

1.  添加对脚本 datepicker-fr.js 的引用（你可以在这里找到它[https://github.com/jquery/jquery-ui/tree/master/ui/i18n](https://github.com/jquery/jquery-ui/tree/master/ui/i18n)）。
2.  创建一个函数并将其添加到我的自定义 javascript 文件中：

    ```
     function extendJQueryDateValidation() {

    // fix date validation for chrome
    jQuery.extend(jQuery.validator.methods, {
        date: function (value, element) {
            var isChrome = window.chrome;
            // make correction for chrome
            if (isChrome) {
                var d = new Date();
                return this.optional(element) ||
                !/Invalid|NaN/.test($.datepicker.parseDate("dd/mm/yy", value));
            }
                // leave default behavior
            else {
                return this.optional(element) ||
                !/Invalid|NaN/.test(new Date(value));
            }
        }
    });
    } 
    ```

    参考[http://devdens.blogspot.com/2011/11/jquery-validation-fix-for-date-format_29.html](http://devdens.blogspot.com/2011/11/jquery-validation-fix-for-date-format_29.html)

3.  在我有日期输入元素的页面中：

    ```
     $(function () 
         {          
          extendJQueryDateValidation();        
          $.datepicker.setDefaults($.datepicker.regional   ["fr"]);    
                   $("#dateField").datepicker(
        { yearRange: "1980:2015", 
     dateFormat: "dd/mm/yy", 
     changeMonth: true, 
     changeYear: true });

               }); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-31T10:01:57.273

您可以试试这个日期格式：示例：'31/12/1999'

```
 jQuery.extend(jQuery.validator.methods, {
        date: function (value, element) {
            return /^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/.test(value);
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-28T01:20:23.007

我搜索了这个并在这里和其他地方发现了多个问题。我找到了一个简单的解决方案，也想与未来的搜索者分享；

[https://stackoverflow.com/a/36903550/1997092](https://stackoverflow.com/a/36903550/1997092)

> 在调用您的验证文件后，我发现此错误的最简单更正方法是以下代码片段；
> 
> ```
> jQuery.validator.methods["date"] = function (value, element){
>     var shortDateFormat = "dd/mm/yy";
>     var res = true;
>     try {
>         $.datepicker.parseDate(shortDateFormat, value);
>     } catch (error) {
>         res = false;
>     }
>     return res;
> } 
> ```
> 
> 即使在 2016 年发现的版本中，我仍然在 Chrome 而不是 Firefox 中没有上述代码的情况下遇到此问题。
> 
> 这是我的首选解决方案，因为它不需要任何额外的库或插件即可工作。
> 
> 我在这里搜索问题时发现了这个代码片段。

希望它可以帮助某人。

# sql - 在数据库迁移期间从多个相关表中插入

> ID：14020120
> 
> 赞同：0
> 
> 时间：2012-12-24T10:32:33.730
> 
> 标签：sql, sql-server, tsql

我正在通过链接服务器将 Oracle DB 迁移到 SQL Server。这是我的问题；

我在 Oracle 上有这样的表：

**老人事表**

```
PERSONID SSN  COUNTRY   CITY
-------------------------------
   1     123  RUSSIA    MOSCOW
   2     124  TURKEY    ISTANBUL
   3     125  TURKEY    ANKARA 
```

在我的新 SQL Server 数据库中，我有这样的表：

**国家表**

```
COUNTRYID COUNTRYNAME
---------------------    
1         RUSSIA
2         TURKEY 
```

**城市表**

```
CITYID COUNTRYID CITYNAME
-------------------------    
1          1      MOSCOW
2          2      ISTANBUL
3          2      ANKARA 
```

**新人事表**

```
PERSONID SSN  COUNTRY   CITY
1        123   1          1
2        124   2          2
3        125   2          3 
```

是的，仅此而已。我只想写一个从 OldDatabase 中选择的插入查询并插入到新的个人表中。旧 db 没有任何城市和国家/地区 id 表。加入的唯一机会是您看到城市和国家/地区名称。

编辑：城市名称不是唯一的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:48:54.650

假设`CITYTABLE`并且`CountryTable`已经填充，您可以`NewPersonelTable`像这样填充：

如果 PERSONID 是 NewPersonelTable 的主键，那么您可能需要这样做：

```
SET IDENTITY_INSERT ON 
```

然后运行：

```
INSERT INTO NewPersonelTable ( PERSONID, SSN, COUNTRY, CITY )
SELECT T.PERSONID, T.SSN, C.COUNTRYID, CITY.CITYID
FROM OldPersonelTable T JOIN CountryTable C ON
  T.COUNTRY = C.COUNTRYNAME JOIN CITYTABLE CITY ON
  T.CITY = CITY.CITYNAME AND
  C.COUNTRYID = CITY.COUNTRYID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:58:01.470

执行此迁移任务需要分两个步骤： 1- 复制主要数据 2- 复制关系数据

首先确保新表的主键是 IDENTITY。如下： 1) 复制数据

```
INSERT INTO CountryTable(COUNTRYNAME)
SELECT DISTINCT COUNTRY FROM OraLink...OldPersonelTable

INSERT INTO CityTable(CITYNAME)
SELECT DISTINCT CITY FROM OraLink...OldPersonelTable

INSERT INTO NewPersonelTable(SSN)
SELECT DISTINCT SSN FROM OraLink...OldPersonelTable 
```

2) 复制关系

```
UPDATE CityTable SET COUNTRYID=CountryTable.COUNTRYID 
FROM OraLink...OldPersonelTable O INNER JOIN CountryTable
ON O.Country=CountryTable.COUNTRYNAME
WHERE CITYNAME=City

UPDATE NewPersonelTable SET COUNTRY=CountryTable.COUNTRYID, CITY=CityTable.CITYID
FROM OraLink...OldPersonelTable O INNER JOIN CountryTable
ON O.Country=CountryTable.COUNTRYNAME
INNER JOIN CityTable ON O.CITY=CityTable.CITYNAME
WHERE NewPersonelTable.SSN=O.SSN 
```

# regex - 正则表达式验证图像源

> ID：14020124
> 
> 赞同：1
> 
> 时间：2012-12-24T10:32:44.730
> 
> 标签：regex, xss

我正在编写一个网络应用程序，我接受图像源作为 url 查询参数。我想验证图像源以确保用户/调用者没有发送可能导致 XSS 或类似情况的请求。您能否建议我一种验证图像 src 或正则表达式的好方法，它可以确保没有恶意内容被推送到我的服务器并可能影响最终用户。

我可以想到以下格式的图像源：

1.  [http://foo.com/bar.jpg](http://foo.com/bar.jpg)（绝对）
2.  /foo/bar.jpg（相对）
3.  foo/bar.jpg（相对）

谢谢，高拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:44:47.767

正则表达式可能不是您想要的。由于您使用的是 Java，请使用`URI`：

```
final URI input;

try {
    input = URI.create(inputStringHere);
} catch (IllegalArgumentException e) {
    // Not even a valid URI: deal with it
}

// do other tests on input 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:49:37.287

此解决方案假定您将 url 作为参数，然后从该 url 服务器端检索数据。

单独的正则表达式不是要走的路，因为它只检查文件名，并不会告诉您实际数据是否是恶意的。我会分三个步骤来做到这一点：

1.  测试文件名以确保它以受支持的类型结尾。这不是为了安全，而是为了避免下载不可用的数据，实际上是可选的。就像是：`/\.(jpe?g|gif|png)$/`
2.  使用 HEAD 请求而不是 GET 请求来访问数据所在的网络服务器。确保返回的 mime-type 与预期的图像类型匹配。这是第一道安全线。如果它不好，请不要获取数据。除此以外：
3.  下载数据，并在本地对其进行测试，以确保它确实是服务器所说的 mime 类型。如果您在 unixy 环境中，请尝试通过`file -I -`.

即使这样也不能绝对*保证*安全，但它应该清除最明显的攻击媒介。

# php - 将函数名称存储在数据库中，然后执行它

> ID：14020129
> 
> 赞同：1
> 
> 时间：2012-12-24T10:33:10.457
> 
> 标签：php, mysql, function, content-management-system

我正在制作一种在网页部分中工作的 CMS 系统，并将每个部分作为不同的条目存储到 MySQL 数据库中的表中。当用户第一次设置页面时，PHP 脚本会调用一个函数`addsection($name, $content)`来将该部分添加到数据库中。但是，为了使该系统更加灵活，因此它不使用静态部分，我希望能够将函数更改为`addsection($name, function)`，您可以在其中为参数提供函数`function`。有什么方法可以将此函数或函数名存储在数据库中，然后在代码需要获取部分文本时调用它？如果没有，我能做些什么呢？我用来获取该部分内容的函数很简单`section($name)`。
另外，如果在不使用文件或任何东西之前没有查看过当前页面，是否有人知道重定向到另一个页面的简单方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-11T21:45:28.777

您可以使用变量函数（[http://php.net/manual/en/functions.variable-functions.php](http://php.net/manual/en/functions.variable-functions.php)）。

```
$r = mysql_query("SELECT method FROM method_table WHERE id = 2");
$row = mysql_fetch_assoc($r);
$func = $row['method'];
$func($parameter); //will execute whatever method you stored in the `method` field 
```

通过这种方式，您可以执行名称存储在数据库中的函数。如果你想在一个对象的上下文中执行它（因此是`method`），你可以这样做： $this->$func($parameter);

# php - 从变量中的mysql行获取所有数据

> ID：14020132
> 
> 赞同：0
> 
> 时间：2012-12-24T10:33:30.970
> 
> 标签：php, mysql, while-loop

我被困在一件小事上，希望你能帮助我..

我需要所有电话号码（这是表'leerlingen'中的一列），用逗号分隔，所以我可以在另一个脚本中插入它，它会显示所有电话号码，如下所示：

```
0612345637,061231823,061231723 
```

**代码：**

```
$result = mysql_query("SELECT * FROM leerlingen
WHERE klas_id='$aan_klas'");

while($row = mysql_fetch_array($result))
  {

    $variabele = $row['leerling_nummer'] . ",";

  echo "$variabele";
  } 
```

但是，当我在`echo $variabele` *while*循环之外时，它只会给我一个电话号码。当我进入`echo $variabele` *while*循环时，它会以正确的方式向我显示所有电话号码。有什么想法吗？

**编辑**

我看到的代码根本不起作用，所以这就是我想要的：它应该让所有电话号码用逗号分隔，放入变量或数组中。

**编辑**

谢谢大家，它的工作！但是......只有当所有 mysql_ 都是 mysql_ 时。当我将它们更改为 mysqli_ 时，没有任何反应......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T10:35:16.567

这就是阵列的设计目的

```
$variabele = array();
while($row = mysql_fetch_array($result))
  {
    if($row['leerling_nummer'] != '')
        $variabele[] = $row['leerling_nummer'];
  }
  echo implode(', ', $variabele); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:57:28.847

使用串联：

```
$result = mysql_query("SELECT * FROM leerlingen WHERE klas_id='$aan_klas'");

$variabele="";
while($row = mysql_fetch_array($result))
  {

    $variabele .= $row['leerling_nummer'] . ",";
  }
echo "VAR: $variabele"; 
```

除此之外，请考虑使用 msqli_ 或 PDO，因为 mysql_ 函数已被弃用！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T11:09:34.150

**当您在**while 循环中看到**所有**电话号码的原因是，在每次迭代（每次重新进入 while 循环时，可以这么说）您都在回显. 因此，**看起来**好像所有的东西都是一次完成的，而实际上它是一次完成的。`echo "$variabele";` **`$variabele`**`echo``echo`****

 ****您可以通过将代码更改为：

```
while($row = mysql_fetch_array($result))
{
    $variabele = $row['leerling_nummer'] . ",";
    echo "$variabele" . " | ";
} 
```

现在，您将看到结果不是（如我所料）：

`0612345637,061231823,061231723, |`

... 但：

`0612345637, | 061231823, | 061231723, |`

如果你认为正在发生的事情，**真的**发生了，那么结果实际上是这样的：

`0612345637, | 0612345637, 061231823, | 0612345637, 061231823, 061231723, |`

如果您想在一个变量中收集所有电话号码，您确实最好使用数组，正如[Mark Ba​​ker 已经提出](https://stackoverflow.com/questions/14020132/get-all-data-from-mysql-row-in-a-variabele#14020154)的那样，**或者**您必须将每个新电话号码附加到`$variabele`字符串中，如下所示：

```
// initiate $variabele as an empty string
$variabele = "";
while($row = mysql_fetch_array($result))
{
    // append the new phone number to $variabele (note .= in stead of =)
    $variabele .= $row['leerling_nummer'] . ",";
}
echo $variabele; 
```

唯一的问题是你必须删除最后一个逗号。有多种方法可以做到这一点，或者规避这一点，但 Mark Ba​​ker 的解决方案实际上要简单得多。

最后，我想让你知道一个漂亮的 MySQL 函数，它可以让你轻松地连接列的值；这就是功能`GROUP_CONCAT()`。但是，这在您当前的情况下可能没有用，因为您也在获取其他列。但为了将来参考，如果您只需要一列想用逗号将它们连接起来，您可以这样做：

```
SELECT GROUP_CONCAT( leerling_nummer ) AS leerling_nummers
FROM leerlingen
WHERE klas_id='$aan_klas'
GROUP BY klas_id 
```

在查询数据库然后执行`$row = mysql_fetch_array($result);`所有数字之后，所有数字都会在 中`$row['leerling_nummers']`，用逗号分隔，因为`GROUP_CONCAT()`使用逗号作为默认分隔符。换句话说：您不再需要使用 PHP 循环遍历行；MySQL 已经为您收集了所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T11:17:12.983

根据评论，它似乎不适用于`mysqli`. 这是一个`mysqli`解决方案：

```
<?php
$result = mysqli_query($link, "SELECT * FROM leerlingen WHERE klas_id='$aan_klas'");    
$variabele = "";
while($row = mysqli_fetch_array($result))
{
    if($row['leerling_nummer']){
        $variabele .= $row['leerling_nummer'] . ",";
    }
}
echo rtrim($variabele, ',');
?> 
```

期望第`mysqli_query()`一个参数是从`mysqli_connect()`.

```
<?php
    $mysqlserver   = "localhost";
    $mysqlusername = "root";
    $mysqlpassword = "";
    $link = mysqli_connect(localhost, $mysqlusername, $mysqlpassword) or die ("Error connecting to mysql server: ".mysqli_error());
?> 
```****

# php - 将图像直接存储到 mysql（使用 php POST）

> ID：14020135
> 
> 赞同：-3
> 
> 时间：2012-12-24T10:33:45.683
> 
> 标签：php

我正在从 PHP 表单图像发送到服务器，例如

```
<input type="file" name="photo_1" /> 
```

在服务器上我这样做：

```
extract($_POST);
insertNewImage($photo_1); //insert into mysql , type is BLOB 
```

但是在数据库中它存储为`FILE NAME.jpg`而*不是二进制*，所以我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:43:59.457

> 我做错了什么？

这很明显：您尝试将图像存储在数据库中，而不是将它们存储在文件系统中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:46:14.353

**您不想将文件存储到数据库中。**

为此，您最好将图像存储在服务器上，例如将其名称放入数据库中。然后，使用 PHP 代码，您将能够通过请求正确的名称来检索您的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T11:08:13.147

除了您应该只将图片的名称保存在数据库中之外：

如果你想用 PHP 对上传的文件做一些事情：

```
print_r($_FILES); 
```

上传的文件存储在不同的 PHP 变量中。它们会自动生成为临时文件，如果您检查 print_r 显示的信息，您会注意到有一个名为 的字段`tmp_name`，您只需复制`$_FILES['id_of_the_form_input']['tmp_name']`到要在系统中保存文件的路径即可。

# jquery - 单击链接后禁用链接的最佳方法是不应该进行 ajax 调用

> ID：14020137
> 
> 赞同：0
> 
> 时间：2012-12-24T10:33:53.297
> 
> 标签：jquery, ajax, ruby-on-rails-3.1, disable-link

我正在使用以下代码发送一个可以正常工作的 ajax 请求，但是当用户多次单击链接时会产生问题，所以我想禁用我的链接，以便在用户第二次单击时不会调用 ajax。

.html.erb

```
<%= link_to("Sports", "#", :class => "school_activity", :p_type => "Sport", :o_type => "")%> 
```

javascript

```
jQuery(function () {
  jQuery('.school_activity').click(function () {
    link = jQuery(this);
    p_type = link.attr('p_type');
    o_type = link.attr('o_type');
    jQuery('.i-link a').removeClass('stream_wall_select');
    jQuery.ajax({
      type:"GET",
      url:'<%= some_path(@school) %>',
      data:'format=js&p_type=' + p_type + '&tagged_type=' + o_type,
      success:function (response) {
        jQuery('#s_activity_div').html(response);
      }
    });
  })
}) 
```

我不想做类似设置参数 true/false 并依赖它发送 ajax 请求的事情。

我想要一些非常通用的东西，可能适用于我网站上的所有 ajax 链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:39:31.227

单击发生时删除该`href`属性，并在完成时将其添加回来。

```
...
  jQuery('.school_activity').click(function () {
    var link = $(this).attr('href');
    jQuery(this).removeAttr('href');
   ...
    jQuery.ajax({ .... });
   ...
    jQuery(this).attr("href",link);
... 
```

**更新**

使用 jQuery 方法[`one()`](http://api.jquery.com/one/)确保某些内容只执行一次。

> 将处理程序附加到元素的事件。每个元素最多执行一次处理程序。

```
jQuery('.school_activity').one('click', function () {
    jQuery.ajax({
        ...
    });
}); 
```

**注意**：这将只运行**一次**，无论 AJAX 是否失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T10:49:31.640

第一个简单通用的解决方案 - 使用同步调用：

```
jQuery.ajax({
      type:"GET",
      async: false,
... 
```

在这种情况下，浏览器将等待调用完成。但它有时会导致页面冻结（在等待时）

第二种解决方案是使用自定义标志/属性，尽管您讨厌它（查看**in_progress**属性）：

```
jQuery(function () {
  jQuery('.school_activity').click(function () {
    if( $(this).attr('in_progress') ) return;

    link = jQuery(this);
    p_type = link.attr('p_type');
    o_type = link.attr('o_type');
    jQuery('.i-link a').removeClass('stream_wall_select');

    $(this).attr('in_progress', 1);
    var link = this;

    jQuery.ajax({
      type:"GET",
      url:'<%= some_path(@school) %>',
      data:'format=js&p_type=' + p_type + '&tagged_type=' + o_type,
      success:function (response) {
        jQuery('#s_activity_div').html(response);
      }, 
      complete: function(){ $(link).removeAttr('in_progress'); }
    });
  })
}) 
```

为了使它成为一个健壮和通用的解决方案，我们可以为这种情况创建一个自定义函数：

```
function waCall( element, ajaxParams, beforeAjaxCallback, afterAjaxCallback ) {

    if( $(element).attr('in_progress') ) return; 

    var link = $(element);
    $(link).attr( 'in_progress' );

    ajaxParams['complete'] = function() { $(link).removeAttr('in_progress');
                             if( afterAjaxCallback ) afterAjaxCallback( link ); };

    if( beforeAjaxCallback ) beforeAjaxCallback(link);

    $.ajax( ajaxParams );
}

jQuery(function () {
      jQuery('.school_activity').click(function () {
          waCall( this, {
              type:"GET",
              url:'<%= some_path(@school) %>',
              data:'format=js&p_type=' + p_type + '&tagged_type=' + o_type,
              success:function (response) {
                  jQuery('#s_activity_div').html(response);
              }
            }, function(link) {
                var p_type = link.attr('p_type');
                var o_type = link.attr('o_type');
                jQuery('.i-link a').removeClass('stream_wall_select');
            }
      }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T10:38:25.517

你可以使用像这样的标志

```
$(function(){
 $flag=false;

 $("#idOfYourLink").click(function(e){
   e.preventDefault();
   $flag=true;
   if(!$flag){
     $.ajax({
       ...
       success:function(){
           $flag=false;
         }//success ends
       });//ajax ends
    }//flag chk if ends
  });//click handler ends
});//document ready ends 
```

编辑：

因为你特别提到

> 我不想做诸如设置参数真/假之类的事情，并依赖它发送> ajax 请求。

您可以简单地取消绑定 click 事件处理程序并在 ajax 调用的成功回调中重新附加；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-10T22:47:12.297

简单的删除和添加触发器类

```
$(document).on('click', '.click', function(e){
        e.preventDefault();

        $(this).removeClass('click');

        $.ajax({
            url: "/question",
            method: "POST",  
            dataType: 'json',
            cache: false,
            data: form_data,
            success: function (response){

            }
        }).done(function() { $(this).addClass('click');  } );

    }); 
```

# foursquare - 如何更新 StoreId？

> ID：14020139
> 
> 赞同：0
> 
> 时间：2012-12-24T10:34:00.230
> 
> 标签：foursquare

我有很多托管场所，每个场所都由 storeId 标识。我正在寻找使用此信息更新foursquare 场地的最佳方式。StoreId 不在场所/ID/编辑参数中。我可以使用其他 API 吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T03:49:27.090

您应该使用场地 ID 而不是 storeId 来编辑场地。

# backbone.js - Kendo Grid 自定义命令按钮单击事件不会触发

> ID：14020142
> 
> 赞同：1
> 
> 时间：2012-12-24T10:34:03.897
> 
> 标签：backbone.js, kendo-ui

我已经使用骨干收集和剑道网格加载了一些数据。我添加了一个自定义更新命令并分配了一个事件，但它甚至没有触发。请帮忙。

```
$("#grid").kendoGrid({

             editable: true,
             batch: true,

          columns: ["Name", "Description", "Date", { command: { text: "Update Me",    name:"Update", click: onEdit }, title: " ", width: "140px"}],
            dataSource: {

                schema: {
                    model: docWrapper

                    },
                 data: new documentlistWrapper((window.docs))

              },

            pageSize:5

        });

    }
    });

function onEdit(e)
{

    alert("hello");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T10:56:03.757

您的大括号 ( `{}`) 未正确平衡。试试这个：

```
$("#grid").kendoGrid({
    editable  : true,
    batch     : true,
    columns   : ["Name", "Description", "Date", { command: { text: "Update Me", name: "Update", click: onEdit }, title: " ", width: "140px"}],
    dataSource: {
        schema: {
            model: docWrapper
        },
        data  : new documentlistWrapper((window.docs))
    },
    pageSize  : 5
});

function onEdit(e) {
    alert("hello");
} 
```

# linux - linux设备资源号？

> ID：14020148
> 
> 赞同：0
> 
> 时间：2012-12-24T10:34:37.203
> 
> 标签：linux, linux-device-driver, pci-bus

我正在查看嵌入式 x86 系统设计文档。包含 Xilinx FPGA 的 I/O 板连接到 linux x86 PCI 总线。FPGA实现描述如下：

```
•   PCI interface core to connect to the x86 PCI bus

•   Xilinx MB soft processor

•   Xilinx OPB bus (this is a processor bus for the MB)

•   PCI <-> OPB interface to allow the PCI bus to access all OPB peripherals

•   Interrupt controllers for dealing with interrupts from internal/external devices.

•   Dual port RAM connected to PCI and OPB for MB/x86 communication 
```

连接后，它声称 x86 现在可以访问“MB 处理器”、“双端口 RAM”、“外围设备”。

然后它声称**PCI板本身发布了两套资源**。**资源 0**是一个 4Meg 区域，用于连接 MB 处理器和 ioboard 上的 IO 点。**资源 1**是 MB 处理器和 x86 之间的双端口 RAM 接口。

我是 linux 设备驱动程序的新手，刚刚开始学习。

谁能解释一下“PC板本身发布两组资源”是什么意思？这是否意味着插入板后（需要安装驱动程序？）Linux操作系统会检测到一些资源？

以及这些资源信息将如何用于为 IO 板编写设备驱动程序？或者可能为 MB、RAM 和外围设备编写单独的设备驱动程序？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:21:12.570

在开始之前，我建议阅读 LDD - [http://lwn.net/Kernel/LDD3/](http://lwn.net/Kernel/LDD3/)。请参阅“第 12 章：PCI 驱动程序”，“访问 I/O 和内存空间”。您可能想熟悉整个章节（和书）

# python - 更新 matplotlib 流图的 UV 数据

> ID：14020155
> 
> 赞同：4
> 
> 时间：2012-12-24T10:35:15.417
> 
> 标签：python, matplotlib, scipy

使用“matplotlib.streamplot”绘制流线后，我需要更改 UV 数据并更新绘图。对于 imshow 和 quiver，分别有函数 'set_data' 和 'set_UVC'。流线似乎没有任何类似的功能。有什么方法可以更新类似的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:02:32.600

我怀疑答案是否定的，因为如果您更改向量，则需要重新计算流线。streamline 返回的对象是 line 和 patch 集合，它们对向量一无所知。要获得此功能，需要编写一个新类来包装所有内容并找到一种合理的方法来重用现有对象。

最好的办法是使用`cla()`（如 dmcdougall 建议的那样）清除您的轴并重新绘制它们。一个稍微不那么激烈的方法是只`remove`对添加的艺术家`streamplot`。

# java - 播种 java.security.SecureRandom 不必要吗？

> ID：14020158
> 
> 赞同：2
> 
> 时间：2012-12-24T10:35:33.953
> 
> 标签：java

我正在使用 Java 1.7，并且正如下面的代码所示（在 Ubuntu 中使用 Oracle 的 Java 7 编译器编译）播种**java.security.SecureRandom**似乎是不必要的，因为代码为两个伪随机序列的起始值生成了两个不同的 BigInteger：

```
import java.security.SecureRandom;
import java.math.BigInteger;

public class SessionIdTest {

    public static void main (String args[]) {
    long seed = System.currentTimeMillis();
        {
            SecureRandom random = new SecureRandom();
            random.setSeed(seed);
            BigInteger a = new BigInteger(130, random);
            System.out.println(a);
        }
        {
            SecureRandom random = new SecureRandom();
            random.setSeed(seed);
            BigInteger a = new BigInteger(130, random);
            System.out.println(a);
        }
    }
} 
```

**那么setSeed**的目的是什么？或者，除了种子之外，**SecureRandom是否还使用其他一些随机性来源？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:40:04.120

javadoc 说：

> 许多 SecureRandom 实现采用伪随机数生成器 (PRNG) 的形式，这意味着它们使用确定性算法从真正的随机种子生成伪随机序列。其他实现可能会产生真正的随机数，而其他实现可能会使用这两种技术的组合。

因此，如文档所述，依靠安全随机数通过播种来生成确定性的值序列并不一定有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T10:40:07.537

JavaDoc 说：

使用给定的`long seed`. **给定的种子是对现有种子的补充，而不是替代。**因此，保证重复调用永远不会减少随机性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-12T23:39:10.230

没有必要`SecureRandom`通过调用播种 a ，实际上，除非您有一个非常好的熵源并且绝对不是**熵源，否则不应该这样做。**`java.security.SecureRandom#setSeed`**`java.lang.System#currentTimeMillis`**

 **现在，从您的示例中，即使种子相同，它也会产生两个不同的输出。这是我`DRBG` `SecureRandom`在 Java 10 的实现中观察到的一种行为，其中产生的两个随机数在一次执行期间会有所不同，但如果程序重新启动则将保持不变：

```
public class SessionIdTest {

    public static void main (String args[]) throws NoSuchAlgorithmException {
        // Hardcoded seed to evidence the deterministic behavior when the program restarts.
        long seed = 1000;
        {
            SecureRandom random = SecureRandom.getInstance("DRBG");
            random.setSeed(seed);
            BigInteger a = new BigInteger(130, random);
            System.out.println(a);
        }
        {
            SecureRandom random = SecureRandom.getInstance("DRBG");
            random.setSeed(seed);
            BigInteger a = new BigInteger(130, random);
            System.out.println(a);
        }
    }
} 
```

所以前一个总是会产生这样的东西：

```
724996208419722369188940556616693042555
796664555436785984208644362540465534270 
```

并且一次执行中的不同值的原因在于每次`DRBG`创建实现时都会更新全局状态。

现在，如果您尝试`SHA1PRNG`实现，两个随机数将是相同的，并且它们将在程序重新启动时保持不变：

```
public class SessionIdTest {

    public static void main (String args[]) throws NoSuchAlgorithmException {
        // Hardcoded seed to evidence the deterministic behavior when the program restarts.
        long seed = 1000;
        {
            SecureRandom random = SecureRandom.getInstance("SHA1PRNG");
            random.setSeed(seed);
            BigInteger a = new BigInteger(130, random);
            System.out.println(a);
        }
        {
            SecureRandom random = SecureRandom.getInstance("SHA1PRNG");
            random.setSeed(seed);
            BigInteger a = new BigInteger(130, random);
            System.out.println(a);
        }
    }
} 
```

所以前一个总是会产生这样的东西：

```
251586625089438840547467272692377284989
251586625089438840547467272692377284989 
```

最后，在这两种情况下，您都可以确认存在基于提供的种子的确定性行为，因此，除非您有非常好的熵源，否则**不要`SecureRandom`手动播种这些 s，并且当前时间不是一个！**. 让他们自己播种，这样更安全。**

# xml - 在 ESB 上收到的 XML 消息包含 我创建了一个简单的应用程序，它从文件夹中提取文件，jaxb 将其解组到类中并将其发送到服务。在服务端，消息不是纯格式： 例子：  , 但带有前缀 ns2: (我想这是对某些命名空间的引用) 例子 问问题 问问题 2012-12-24T10:35:51.050 89 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我创建了一个简单的应用程序，它从文件夹中提取文件，jaxb 将其解组到类中并将其发送到服务。在服务端，消息不是纯格式： 例子：  , 但带有前缀 ns2: (我想这是对某些命名空间的引用) 例子 <ns2:source> 我究竟做错了什么？是在解组还是在服务端有问题？ 先感谢您。 链接到具有特定 ID 的控制器索引在 Rails 中失败 我想创建一个链接到控制器索引的反向链接。 <%= link_to 'Back', employee_personals_path%> 有用。但在索引中我也想发送用户 ID。 <%= link_to 'Back', { :action => "index", :user_id => @user_id}, {:class=>"btn btn-success"}%> 这行得通。现在我想通过第一种方法实现发送 user_id <%= link_to 'Back', employee_personals_path, :user_id => @user_id%> 但它不起作用。我怎样才能让它工作？ xmlnamespacesjaxbprefixunmarshalling 4 0 回答 0 Related 2 ruby-on-rails - Rails 根资源 JSON 1 version-control - 依赖注入配置是否应该受版本控制？ 3 android - ListView 上的 setOnItemClickListener 没有触发 1 visual-studio-2010 - 您必须在管理员的上下文中运行 Visual Studio 1 asp.net - Application_BeginRequest() 方法中的依赖项注册 2 oracle - 使用总和、组和子查询获取上次活动 10 c - 如何在给定程序中打印评论？ 1 java - Spring LDAP 示例 1 google-app-engine - Google 应用引擎网站的多个域 - 每个域的分析 1 java - JScrollPane 滚动问题 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</ns2:source>

> ID：14020161
> 
> 赞同：1
> 
> 时间：
> 
> 标签：xml, namespaces, jaxb, prefix, unmarshalling

我创建了一个简单的应用程序，它从文件夹中提取文件，jaxb 将其解组到类中并将其发送到服务。在服务端，消息不是纯格式：

例子： `<Source> </Source>`

, 但带有前缀 ns2: (我想这是对某些命名空间的引用)

例子

```
<ns2:Source> 
```

我究竟做错了什么？是在解组还是在服务端有问题？

先感谢您。

# ruby-on-rails - 链接到具有特定 ID 的控制器索引在 Rails 中失败

> ID：14020163
> 
> 赞同：1
> 
> 时间：2012-12-24T10:36:10.737
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, redirect, ruby-on-rails-3.2

我想创建一个链接到控制器索引的反向链接。

```
<%= link_to 'Back', employee_personals_path%> 
```

有用。但在索引中我也想发送用户 ID。

```
 <%= link_to 'Back', {  :action => "index", :user_id => @user_id},
   {:class=>"btn btn-success"}%> 
```

这行得通。现在我想通过第一种方法实现发送 user_id

```
<%= link_to 'Back', employee_personals_path, :user_id => @user_id%> 
```

但它不起作用。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T10:39:34.567

您需要将参数传递给您的employee_personals_path 函数（而不是link_to）：

```
<%= link_to 'Back', employee_personals_path(:user_id => @user_id) %> 
```

# php - 在 Zend Framework 2 (ZF2) 中创建新控制器的问题

> ID：14020170
> 
> 赞同：2
> 
> 时间：2012-12-24T10:36:38.073
> 
> 标签：php, zend-framework2

我正在使用 ZF2 Skeleton 应用程序。
为了在现有模块中创建新控制器，我修改了**module.config.php**文件，如下所示：

```
<?php
return array(
'controllers' => array(
    'invokables' => array(
        'Album\Controller\Album' => 'Album\Controller\AlbumController', // WORKING FINE
        'Album\Controller\Photo' => 'Album\Controller\PhotoController', // I ADDED THIS
    ),
),

// The following section Was PREVIOUSLY THERE
'router' => array(
    'routes' => array(
        'album' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/album[/:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id'     => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Album\Controller\Album',
                    'action'     => 'index',
                ),
            ),
        ),

    ),
 ),

// ADDED THIS FOR NEW CONTROLLER 'PhotoController.php' in same Namespace 'Album'
'router' => array(
    'routes' => array(
        'photo' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/photo[/:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id'     => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Album\Controller\Photo',
                    'action'     => 'index',
                ),
            ),
        ),

    ),
),

'view_manager' => array(
    'template_path_stack' => array(
        'album' => __DIR__ . '/../view',
    ),

),
);` 
```

此链接**（[http://domainname.com/dummy/zend/zf2-tutorial/public/photo/index](http://domainname.com/dummy/zend/zf2-tutorial/public/)）按*预期***工作。

此链接**（[http://domainname.com/dummy/zend/zf2-tutorial/public/album/index](http://domainname.com/dummy/zend/zf2-tutorial/public/)）*不起作用***并显示以下错误：

```
A 404 error occurred Page not found. 
The requested URL could not be matched by routing. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T12:43:01.053

问题是你`router`在你的配置中声明了两次，第二个覆盖了第一个，所以只使用了第二个路由。

您的配置文件应该看起来像这样，两个路由都在同一个`router`声明中

```
<?php
return array(
'controllers' => array(
    'invokables' => array(
        'Album\Controller\Album' => 'Album\Controller\AlbumController', // WORKING FINE
        'Album\Controller\Photo' => 'Album\Controller\PhotoController', // I ADDED THIS
    ),
),

// The following section Was PREVIOUSLY THERE
'router' => array(
    'routes' => array(
        'album' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/album[/:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id'     => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Album\Controller\Album',
                    'action'     => 'index',
                ),
            ),
        ),
        // This is where your new route goes
        'photo' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/photo[/:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id'     => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Album\Controller\Photo',
                    'action'     => 'index',
                ),
            ),
        ),
    ),
),

'view_manager' => array(
    'template_path_stack' => array(
        'album' => __DIR__ . '/../view',
    ),

),
); 
```

# c - 为什么增加进程数不会减少此并行代码的执行时间？

> ID：14020171
> 
> 赞同：1
> 
> 时间：2012-12-24T10:36:38.703
> 
> 标签：c, parallel-processing, mpi

编辑：对不起，我忘了提到我将两个 5000x5000 矩阵相乘。

这是表明当我增加进程数量时，时间也在增加的输出。那么这段代码的逻辑是否有问题。我从网上找到它，只将名称更改为 matrixMulti 及其 printf。当我连接到 Grid 实验室并增加进程数量时，这似乎合乎逻辑但无法正常工作。所以你怎么看？

![终端截图](../Images/61bce84ff6a676c4dc2c63ca5a18926f.png)

```
/**********************************************************************************************
 * Matrix Multiplication Program using MPI.
 *
 * Viraj Brian Wijesuriya - University of Colombo School of Computing, Sri Lanka.
 *
 * Works with any type of two matrixes [A], [B] which could be multiplied to produce a matrix [c].
 *
 * Master process initializes the multiplication operands, distributes the muliplication
 * operation to worker processes and reduces the worker results to construct the final output.
 *
 ************************************************************************************************/

#include<stdio.h>
#include<mpi.h>
#define NUM_ROWS_A 5000 //rows of input [A]
#define NUM_COLUMNS_A 5000 //columns of input [A]
#define NUM_ROWS_B 5000 //rows of input [B]
#define NUM_COLUMNS_B 5000 //columns of input [B]
#define MASTER_TO_SLAVE_TAG 1 //tag for messages sent from master to slaves
#define SLAVE_TO_MASTER_TAG 4 //tag for messages sent from slaves to master
void makeAB(); //makes the [A] and [B] matrixes
void printArray(); //print the content of output matrix [C];

int rank; //process rank
int size; //number of processes
int i, j, k; //helper variables
double mat_a[NUM_ROWS_A][NUM_COLUMNS_A]; //declare input [A]
double mat_b[NUM_ROWS_B][NUM_COLUMNS_B]; //declare input [B]
double mat_result[NUM_ROWS_A][NUM_COLUMNS_B]; //declare output [C]
double start_time; //hold start time
double end_time; // hold end time
int low_bound; //low bound of the number of rows of [A] allocated to a slave
int upper_bound; //upper bound of the number of rows of [A] allocated to a slave
int portion; //portion of the number of rows of [A] allocated to a slave
MPI_Status status; // store status of a MPI_Recv
MPI_Request request; //capture request of a MPI_Isend

int main(int argc, char *argv[])
{

    MPI_Init(&argc, &argv); //initialize MPI operations
    MPI_Comm_rank(MPI_COMM_WORLD, &rank); //get the rank
    MPI_Comm_size(MPI_COMM_WORLD, &size); //get number of processes

    /* master initializes work*/
    if (rank == 0) {
        makeAB();
        start_time = MPI_Wtime();
        for (i = 1; i < size; i++) {//for each slave other than the master
            portion = (NUM_ROWS_A / (size - 1)); // calculate portion without master
            low_bound = (i - 1) * portion;
            if (((i + 1) == size) && ((NUM_ROWS_A % (size - 1)) != 0)) {//if rows of [A] cannot be equally divided among slaves
                upper_bound = NUM_ROWS_A; //last slave gets all the remaining rows
            } else {
                upper_bound = low_bound + portion; //rows of [A] are equally divisable among slaves
            }
            //send the low bound first without blocking, to the intended slave
            MPI_Isend(&low_bound, 1, MPI_INT, i, MASTER_TO_SLAVE_TAG, MPI_COMM_WORLD, &request);
            //next send the upper bound without blocking, to the intended slave
            MPI_Isend(&upper_bound, 1, MPI_INT, i, MASTER_TO_SLAVE_TAG + 1, MPI_COMM_WORLD, &request);
            //finally send the allocated row portion of [A] without blocking, to the intended slave
            MPI_Isend(&mat_a[low_bound][0], (upper_bound - low_bound) * NUM_COLUMNS_A, MPI_DOUBLE, i, MASTER_TO_SLAVE_TAG + 2, MPI_COMM_WORLD, &request);
        }
    }
    //broadcast [B] to all the slaves
    MPI_Bcast(&mat_b, NUM_ROWS_B*NUM_COLUMNS_B, MPI_DOUBLE, 0, MPI_COMM_WORLD);

    /* work done by slaves*/
    if (rank > 0) {
        //receive low bound from the master
        MPI_Recv(&low_bound, 1, MPI_INT, 0, MASTER_TO_SLAVE_TAG, MPI_COMM_WORLD, &status);
        //next receive upper bound from the master
        MPI_Recv(&upper_bound, 1, MPI_INT, 0, MASTER_TO_SLAVE_TAG + 1, MPI_COMM_WORLD, &status);
        //finally receive row portion of [A] to be processed from the master
        MPI_Recv(&mat_a[low_bound][0], (upper_bound - low_bound) * NUM_COLUMNS_A, MPI_DOUBLE, 0, MASTER_TO_SLAVE_TAG + 2, MPI_COMM_WORLD, &status);
        for (i = low_bound; i < upper_bound; i++) {//iterate through a given set of rows of [A]
            for (j = 0; j < NUM_COLUMNS_B; j++) {//iterate through columns of [B]
                for (k = 0; k < NUM_ROWS_B; k++) {//iterate through rows of [B]
                    mat_result[i][j] += (mat_a[i][k] * mat_b[k][j]);
                }
            }
        }
        //send back the low bound first without blocking, to the master
        MPI_Isend(&low_bound, 1, MPI_INT, 0, SLAVE_TO_MASTER_TAG, MPI_COMM_WORLD, &request);
        //send the upper bound next without blocking, to the master
        MPI_Isend(&upper_bound, 1, MPI_INT, 0, SLAVE_TO_MASTER_TAG + 1, MPI_COMM_WORLD, &request);
        //finally send the processed portion of data without blocking, to the master
        MPI_Isend(&mat_result[low_bound][0], (upper_bound - low_bound) * NUM_COLUMNS_B, MPI_DOUBLE, 0, SLAVE_TO_MASTER_TAG + 2, MPI_COMM_WORLD, &request);
    }

    /* master gathers processed work*/
    if (rank == 0) {
        for (i = 1; i < size; i++) {// untill all slaves have handed back the processed data
            //receive low bound from a slave
            MPI_Recv(&low_bound, 1, MPI_INT, i, SLAVE_TO_MASTER_TAG, MPI_COMM_WORLD, &status);
            //receive upper bound from a slave
            MPI_Recv(&upper_bound, 1, MPI_INT, i, SLAVE_TO_MASTER_TAG + 1, MPI_COMM_WORLD, &status);
            //receive processed data from a slave
            MPI_Recv(&mat_result[low_bound][0], (upper_bound - low_bound) * NUM_COLUMNS_B, MPI_DOUBLE, i, SLAVE_TO_MASTER_TAG + 2, MPI_COMM_WORLD, &status);
        }
        end_time = MPI_Wtime();
        printf("\nRunning Time = %f\n\n", end_time - start_time);
        printArray();
    }
    MPI_Finalize(); //finalize MPI operations
    return 0;
}

void makeAB()
{
    for (i = 0; i < NUM_ROWS_A; i++) {
        for (j = 0; j < NUM_COLUMNS_A; j++) {
            mat_a[i][j] = i + j;
        }
    }
    for (i = 0; i < NUM_ROWS_B; i++) {
        for (j = 0; j < NUM_COLUMNS_B; j++) {
            mat_b[i][j] = i*j;
        }
    }
}

void printArray()
{
    for (i = 0; i < NUM_ROWS_A; i++) {
        printf("\n");
        for (j = 0; j < NUM_COLUMNS_A; j++)
            printf("%8.2f ", mat_a[i][j]);
    }
    printf("\n\n\n");
    for (i = 0; i < NUM_ROWS_B; i++) {
        printf("\n");
        for (j = 0; j < NUM_COLUMNS_B; j++)
            printf("%8.2f ", mat_b[i][j]);
    }
    printf("\n\n\n");
    for (i = 0; i < NUM_ROWS_A; i++) {
        printf("\n");
        for (j = 0; j < NUM_COLUMNS_B; j++)
            printf("%8.2f ", mat_result[i][j]);
    }
    printf("\n\n");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T10:41:32.767

这实际上并不令人惊讶。您拥有的工人越多，您的通信开销就越多（划分工作，汇总结果），因此通常有一个最佳点，您有足够的工人可以利用并行化，但没有那么多工人通信开销开始成为一个问题。随着内核数量的增加，您从缩小工作量和增加通信开销中获得的收益递减。这就是为什么在编写并行应用程序时，需要进行大量工作来衡量多少工作人员会产生最佳性能，以及设计网络结构以最大限度地减少开销。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T17:10:50.903

发布的代码存在一些真正的正确性问题。让我们看看从 rank 0 开始的发送循环：

```
 for (i = 1; i < size; i++) {
        //...
        low_bound = (i - 1) * portion;
        upper_bound = low_bound + portion; 

        MPI_Isend(&low_bound, 1, MPI_INT, i, MASTER_TO_SLAVE_TAG, MPI_COMM_WORLD, &request);
        MPI_Isend(&upper_bound, 1, MPI_INT, i, MASTER_TO_SLAVE_TAG + 1, MPI_COMM_WORLD, &request);
        MPI_Isend(&mat_a[low_bound][0], (upper_bound - low_bound) * NUM_COLUMNS_A, MPI_DOUBLE, i, MASTER_TO_SLAVE_TAG + 2, MPI_COMM_WORLD, &request);
    } 
```

你不能那样做。如果您要使用非阻塞请求，您最终必须使用`MPI_Wait()`or `MPI_Test()`for 请求，以便您（和 MPI 库）可以知道它们是完整的。您需要这样做以[避免泄漏资源](http://ipm-hpc.sourceforge.net)，但更重要的是，在这种情况下，您会反复覆盖`low_bound`，`upper_bound`甚至在您知道发送已经发生之前。谁知道您的工作人员任务正在获取什么数据。此外，通过每次覆盖请求绝对保证资源泄漏。

有几种方法可以解决这个问题；最简单的方法是创建一个简单的上限和下限数组，以及一个请求数组：

```
if (rank == 0) {
    makeAB();
    requests     = malloc(size*3*sizeof(MPI_Request));
    low_bounds   = malloc(size*sizeof(int));
    upper_bounds = malloc(size*sizeof(int));

    start_time = MPI_Wtime();
    for (i = 1; i < size; i++) {
        portion = (NUM_ROWS_A / (size - 1));
        low_bounds[i] = (i - 1) * portion;
        if (((i + 1) == size) && ((NUM_ROWS_A % (size - 1)) != 0)) {
            upper_bounds[i] = NUM_ROWS_A; 
        } else {
            upper_bounds[i] = low_bounds[i] + portion; 
        }

        MPI_Isend(&(low_bounds[i]), 1, MPI_INT, i, MASTER_TO_SLAVE_TAG, MPI_COMM_WORLD, &(requests[3*i]));
        MPI_Isend(&(upper_bounds[i]), 1, MPI_INT, i, MASTER_TO_SLAVE_TAG + 1, MPI_COMM_WORLD, &(requests[3*i+1]));
        MPI_Isend(&mat_a[low_bounds[i]][0], (upper_bounds[i] - low_bounds[i]) * NUM_COLUMNS_A, MPI_DOUBLE, i, MASTER_TO_SLAVE_TAG + 2, MPI_COMM_WORLD, &(requests[3*i+2]));
    }
    MPI_Waitall(3*(size-1), &(requests[3]), MPI_STATUS_IGNORE);
    free(requests); 
```

这样做的好处是，由于 0 级保存了这些信息，工作人员完成后不需要将其发回，0 级可以直接接收到正确的位置：

```
 //...
    for (i = low_bound; i < upper_bound; i++) {
        for (j = 0; j < NUM_COLUMNS_B; j++) {
            for (k = 0; k < NUM_ROWS_B; k++) {
                mat_result[i][j] += (mat_a[i][k] * mat_b[k][j]);
            }
        }
    }
    MPI_Send(&mat_result[low_bound][0], (upper_bound - low_bound) * NUM_COLUMNS_B, MPI_DOUBLE, 0, SLAVE_TO_MASTER_TAG + 2, MPI_COMM_WORLD);

//...
if (rank == 0) {
    for (i = 1; i < size; i++) {
        MPI_Recv(&mat_result[low_bounds[i]][0], (upper_bounds[i] - low_bounds[i]) * NUM_COLUMNS_B, MPI_DOUBLE, i, SLAVE_TO_MASTER_TAG + 2, MPI_COMM_WORLD, &status);
    } 
```

但是只要您有一个必须分发给所有处理器的这些值的数组，您就可以使用 MPI_Scatter 操作，这通常比您的循环发送更有效：

```
 for (i = 1; i < size; i++) {
        low_bounds[i] = ...
        upper_bounds[i] = ...
    }

    MPI_Scatter(low_bounds,   1, MPI_INT, &low_bound,   1, MPI_INT, 0, MPI_COMM_WORLD);
    MPI_Scatter(upper_bounds, 1, MPI_INT, &upper_bound, 1, MPI_INT, 0, MPI_COMM_WORLD); 
```

理想情况下，您也可以使用 scatter 或其变体来分发 A 数组。

[`MPI_Scatter()`](http://ipm-hpc.sourceforge.net)是一个集体操作，就像`MPI_Bcast()`，它把我们带到你的下一个问题。在您的原始代码中，您有以下内容：

```
 //rank 0:
    for (i = 1; i < size; i++ ) {
        //...
        MPI_Isend();
        MPI_Isend();
        MPI_Isend();
    }

    MPI_Bcast();

    // other ranks:
    MPI_Bcast();

    MPI_Recv();
    MPI_Recv();
    MPI_Recv(); 
```

集体和点对点通信的交错可能非常危险，并可能导致死锁。这里没有必要；您应该将 Bcast 移到 Scatter 和 Recv()s 之后（现在只有 1 个 recv）。这使您的工作任务代码看起来像：

```
 MPI_Scatter(NULL, 1, MPI_INT, &low_bound,   1, MPI_INT, 0, MPI_COMM_WORLD);
    MPI_Scatter(NULL, 1, MPI_INT, &upper_bound, 1, MPI_INT, 0, MPI_COMM_WORLD);

    MPI_Recv(&mat_a[low_bound][0], (upper_bound - low_bound) * NUM_COLUMNS_A, MPI_DOUBLE, 0, MASTER_TO_SLAVE_TAG + 2, MPI_COMM_WORLD, &status);
    MPI_Bcast(&mat_b, NUM_ROWS_B*NUM_COLUMNS_B, MPI_DOUBLE, 0, MPI_COMM_WORLD); 
```

这样就消除了大多数正确性问题，尽管我仍然建议使用 scatter 来分配 A 数组，然后在等待工作任务执行某些操作时使用 rank 0 来完成其“公平份额”的计算。（这意味着您的程序将适用于 size=1）。所以现在让我们看看性能问题。

对于固定的问题大小，您的程序必须：

*   分配矩阵的上下界（2条短消息，或2个集合）
*   分发 A 矩阵（(size-1) 长消息，大小为 N^2/(size-1) 双倍）
*   广播 B 矩阵（使用集体向所有任务发送 N^2 双打）
*   检索 A 矩阵（与发送 A 矩阵相同）

每个任务都必须

*   计算矩阵乘积（N^3/(size-1) 次操作）。

很容易看出，每个等级必须完成的实际计算工作量实际上随着运行的处理器数量下降为 1/(P-1)，但通信工作量上升（如 P 或lg P，取决于）。在某些时候，那些交叉并在更多处理器上运行只会减慢速度。那么那个点在哪里呢？

在单个 8 核 nehalem 节点上进行快速扩展测试并使用[IPM](http://ipm-hpc.sourceforge.net)来简单计算花费时间的地方，我们有：

```
worker  |  running  |          |  MPI
tasks   |    time   |  Speedup |  time
--------+-----------+----------+--------
   1    |  90.85s   |     -    |  45.5s   
   2    |  45.75s   |   1.99x  |  15.4s
   4    |  23.42s   |   3.88x  |  4.93s
   6    |  15.75s   |   5.76x  |  2.51s 
```

这实际上还不错。MPI 时间实际上几乎全部花在`MPI_Recv()`上，节点上表示复制矩阵片段的成本，对于 rank 0 进程，等待结果开始从工作任务返回。这表明让等级 0 做一些工作，并用收集操作替换接收的线性循环，将是有用的优化。

自然地，当您离开节点或使用更多数量的处理器时，通信成本将继续上升，并且扩展性将恶化。

更多小点：

首先，通过简单的负载平衡（如矩阵乘法）来解决紧密耦合的数值问题，主从通常是一种非常糟糕的方法。但我会假设这只是一个学习 MPI 练习，并留在那里。请注意，当然，进行基于 MPI 的矩阵乘法的正确方法是使用现有的矩阵乘法库，如[SCALAPACK](http://www.netlib.org/scalapack/)、 [Eigen](http://eigen.tuxfamily.org)等。

其次，全局变量的大量使用通常是没有帮助的，但这超出了这个问题的范围。我还要注意，这`NUM_COLUMNS_A`是必然的`NUM_ROWS_B`，你不需要两者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T10:40:10.497

分离流程时，您需要平衡发送结果所花费的时间与节省的成本。在您的情况下，我猜您发送的计算需要比本地计算更长的时间。

尝试与其他进程共享更大的工作块。

# powershell - Powershell 应用程序可移植

> ID：14020174
> 
> 赞同：1
> 
> 时间：2012-12-24T10:36:44.370
> 
> 标签：powershell, powershell-2.0, portable-executable, portable-applications

我在哪里可以下载 powershell 便携版？我知道 carl posser 创建了它，但是网站portablepowershell.com 不起作用，谷歌也没有帮助我=（。任何机构都有便携式powershell v2 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-09T04:04:01.180

现在 powershell 安装在所有实际的 Windows 版本上:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T05:21:52.653

另外，您可以使用[PowerGUI](http://en.community.dell.com/techcenter/powergui/m/bits)和从脚本到 .NET 3.5/4.0 的[可执行文件。](http://documents.software.dell.com/powergui/3.5/user-guide/developing-scripts-in-the-powergui-script-editor/compiling-scripts/executable-file-from-script)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-21T08:45:32.087

你可以试试 Powershell Core。它对我来说看起来很便携（在没有安装 .net 框架的嵌入式 Windows 7 上测试）。

[下载 Powershell 核心](https://github.com/PowerShell/PowerShell)

下载 Binaries zip，解压缩并运行 pwsh.exe 请记住，与常规 powershell 相比，代码存在一些差异。

# jquery - 如何使用 getter 方法实现 jQuery 插件？

> ID：14020187
> 
> 赞同：1
> 
> 时间：2012-12-24T10:37:47.687
> 
> 标签：jquery, jquery-plugins

我开始创建我的自定义 jQuery 插件来管理标签。我正在使用基于此模式的方法[https://github.com/zenorocha/jquery-plugin-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js](https://github.com/zenorocha/jquery-plugin-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js)并且所有方法都保持可链接性。

我想要的是创建一个类似于 $.css() 的方法，它允许设置或获取值。我已经实现了一个添加新标签的“标签”方法，或者，如果传递的参数未定义，它会返回一个数组：

```
$(elem).tagger('tags', 'some, tags, here'); // To add more tags
$(elem).tagger('tags');  // This doesnt works because chainability 
```

第二个调用不起作用，只需返回一个包含选择器中所选元素的数组（因为可链接性模式）。

如何实现 getter 方法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T16:24:27.940

好的，我想我找到了解决问题的方法。接下来是代码。

我区分了三种可能性：

*   必须创建和初始化插件。
*   调用插件的方法。
*   调用标记为 getter 的插件方法。在这种情况下，我打破了可链接性并返回方法结果。

这是我的第一个 jQuery 插件。如果这是一个不错的或不好的解决方案，有人可以回答我吗？提前致谢。

```
var pluginName = 'tagger';

//
// Plugin wrapper around the constructor,
// preventing against multiple instantiations and allowing any
// public function (whose name doesn't start with an underscore) to be 
// called via the jQuery plugin:
// e.g. $(element).defaultPluginName('functionName', arg1, arg2)
//
$.fn[pluginName] = function(options) {
    var args = arguments;

    if (options === undefined || typeof options === 'object') {
        // Create a plugin instance for each selected element.
        return this.each(function() {
            if (!$.data(this, 'plugin_' + pluginName)) {
                $.data(this, 'plugin_' + pluginName, new Plugin(this, options));
            }
        });
    } else if (typeof options === 'string' && options[0] !== '_' && options !== 'init') {
        // Call a pluguin method for each selected element.
        if (Array.prototype.slice.call(args, 1).length == 0 && $.inArray(options, $.fn[pluginName].getters) != -1) {
            // If the user does not pass any arguments and the method allows to
            // work as a getter then break the chainability
            var instance = $.data(this[0], 'plugin_' + pluginName);
            return instance[options].apply(instance, Array.prototype.slice.call(args, 1));
        } else {
            // Invoke the speficied method on each selected element
            return this.each(function() {
                var instance = $.data(this, 'plugin_' + pluginName);
                if (instance instanceof Plugin && typeof instance[options] === 'function') {
                    instance[options].apply(instance, Array.prototype.slice.call(args, 1));
                }
            });
        }
    }
};

//
// Names of the pluguin methods that can act as a getter method.
//
$.fn[pluginName].getters = ['tags']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T14:15:38.573

在没有看到您的插件代码的情况下，我只能提供以下模拟代码作为答案：

```
$.fn.myVersatilePlugin = function (options, values) {
    if (values === undefined) {
        //do something to element with given `values`
        return this; // <-- chainability
    } else {
        values = {};
        // do whatever it is you do to get what you want to return
        return values; // and return it
    }
}; 
```

# javascript - node.js：从另一个模块访问局部变量

> ID：14020189
> 
> 赞同：11
> 
> 时间：2012-12-24T10:37:53.800
> 
> 标签：javascript, node.js, serverside-javascript, node-modules

## 我的问题

我正在编写一个`node`名为 的模块`a`，该`require()`模块是一个模块`b`（由陌生人编写）。不幸的是，`a`不仅需要访问公共成员 - 它还需要访问在模块范围内声明的局部变量。

```
// a
var b = require('b');

console.log(b.public);
console.log(b.private); // undefined

// b
var c = require('c');
var stdin = process.stdin;

exports.public = true;
var private = true; 
```

## 我的解决方案

```
// a
var b = require('b');
var srcPath = require.resolve('b');

console.log(b.public);
fs.readFile(srcPath, 'utf-8', function (err, src) {
    var box = {};
    var res = vm.runInNewContext(src, box, srcPath);
    console.log(box.private);
}); 
```

但`vm`不`b`作为模块运行，因此`require()`无法从`vm`. 所以有`ReferenceError`这样的：

```
 var res = vm.runInNewContext(src, box, scPath);
                 ^
ReferenceError: require is not defined
    at <module b>
    at <module a>
    at fs.readFile (fs.js:176:14)
    at Object.oncomplete (fs.js:297:15) 
```

## 我的问题

**获取在另一个模块中声明的局部变量的值**的最干净的方法是什么？想法？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-26T14:25:59.127

您可能应该永远不必这样做，但可能是有原因的。

您可以挂钩加载程序并注入 javascript 代码以导出您想要的内容。

```
// let's say you have node_modules/foreignmodule/index.js
// and in that script there is a local (not-exported) function foreignfunction().

var path = require('path');
_oldLoader = require.extensions['.js'];
require.extensions['.js'] = function(mod, filename) {
    if (filename == path.resolve(path.dirname(module.filename), 'node_modules/foreignmodule/index.js')) {
        var content = require('fs').readFileSync(filename, 'utf8');
        content += "module.exports.foreignfunction=foreignfunction;\n";
        mod._compile(content, filename);
    } else {
        _oldLoader(mod, filename);
    }
};

require('foreignmodule').foreignfunction(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-10T17:19:35.673

查看我的模块[import-locals](https://www.npmjs.com/package/import-locals)

```
const patcher = new Patcher();
patcher.export("yourmodule", "Foo");
const { Foo } = require("yourmodule"); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-24T10:43:57.490

只是[`export`](http://nodejs.org/api/modules.html#modules_module_exports)正确的值

模块 B

```
// b.js

// some local var
var foo = 'Bar';

exports.Foo = foo;
exports.Hello = 'World'; 
```

模块 A

```
// a .js
b = require('./b');
console.log(b.Foo); //=> 'Bar'
console.log(b.Hello); // => 'World' 
```

* * *

在此处阅读有关[nodejs module.exports的更多信息](http://nodejs.org/api/modules.html#modules_module_exports)

# ftp - 如何通过 Bonjour 测量设备之间的距离？

> ID：14020190
> 
> 赞同：1
> 
> 时间：2012-12-24T10:38:08.260
> 
> 标签：ftp, ios6, bluetooth, wifi, nsnetservice

我正在尝试在蓝牙工作区的两个设备之间发送数据。

由于蓝牙无法发送文件，我想检查设备是否在蓝牙活动区域，如果是，通过wi-fi发送文件。我尝试使用 GameKit，但它不适合我的需要，原因：

1.  我想对用户隐藏传输接口
2.  如果可能的话，GameKit 会立即开始使用 wi-fi，我不需要

如我所见，这里最好的方法是带有 NSNetService 类的 Bonjour。但我仍然不明白如何找出设备是否在蓝牙活动区域。

由于主要思想是找出靠近用户设备的设备，因此我也不介意除蓝牙服务之外如何测量设备之间的距离的任何其他想法。

一个地方可能有很多用户，所以花费的时间越少越好。

有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:03:26.013

看看[HHServices](https://github.com/tolo/HHServices)，它很好地隐藏了通过蓝牙发布/发现服务的实现细节。

您基本上想使用 HHServices 在接收对等方发布“文件接收服务”。在发送端，您将尝试发现发布此服务的对等方。当发现提供您的“文件接收服务”的对等点时，您知道该对等点在蓝牙范围内。

但是，要通过 WiFi 发送文件，您需要将目标的 WiFi 地址（或接收者的任何其他标识）发送给发送者 - 可能通过在 FileReceiveService 的 TXT 记录中发布它。

# css - 左右两边溢出文字

> ID：14020195
> 
> 赞同：9
> 
> 时间：2012-12-24T10:38:26.997
> 
> 标签：css

如何使用 css 使文本居中，使其左右溢出？我在这里看到使文本向左*而不是*向右溢出的问题，但我希望它看起来像文本被放大了。

```
<body>
    <div class="page">
        SOMEHEADER
    </div>
</body> 
```

-

```
.page {
    overflow:hidden;
    width:70%;
    text-align:center;
    margin:0 auto;
    font-size:8em;
    word-wrap:none;
} 
```

这是我正在谈论的演示的[小提琴。](http://jsfiddle.net/mehulkar/QZCuY/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-24T10:56:11.230

不是最优雅的解决方案，但它似乎有效。

HTML：

```
<div class="page">
    <div>
        SOMEHEADER
    </div>
</div> 
```

CSS：

```
.page > div {
    margin: 0 -1000%;
} 
```

示例：http: [//jsfiddle.net/grc4/w36mX/](http://jsfiddle.net/grc4/w36mX/)

此方法通过拉伸内部 div 使其足够宽以完全适合其内容（不换行/溢出）来工作。然后内容居中 ( `text-align: center`) 并被外部 div ( `overflow: hidden`) 裁剪为大小。

棘手的部分是使内部 div 足够宽以适合文本。每当它不够宽时，文本就会向右溢出，从而无法正确居中（如您原来的 jsFiddle 所示）。

通过使用[负边距](http://coding.smashingmagazine.com/2009/07/27/the-definitive-guide-to-using-negative-margins/)，您可以将元素向左和向右拉伸一定量。例如，如果您知道文本的大小为 400px，那么您可以使用`margin: 0 -200px`来确保内部 div 始终至少为 400px 宽（左侧为 200px，右侧为 200px）。当您不知道文本的确切大小时，您可以使用百分比或非常高的 px 值。

`margin: 0 -100%`会将 div 向左拉伸其原始大小的 100%，再向右拉伸 100%，使其比`.page`div 大 3 倍。文本大约 900 像素宽，所以如果`.page`div 宽度低于 300 像素，此方法将停止工作（尝试在 jsFiddle 中调整浏览器的大小`margin: 0 -100%`以了解我的意思）。

`margin: 0 -1000%`拉伸 div 使其大 21 倍，这通常足以容纳文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:54:59.383

请参阅此演示： http: [//jsfiddle.net/QZCuY/3/](http://jsfiddle.net/QZCuY/3/)我已经在最新的 Chrome、FF 和 IE7-9 中对其进行了测试

HTML（`<div class="text">`添加）：

```
<div class="page">
    <div class="text">
        SOMEHEADER
    </div>
</div>
<p> 
    How do I get the header to overflow left <u>and</u> right instead of just to the right?
</p> 
```

​CSS（`.page`有两个新属性和新的 .text 类）：

```
body {
    background-color:green;
}
.page {
    position:relative;
    height:1em;

    overflow:hidden;
    background-color:red;
    width:70%;
    text-align:center;
    margin:0 auto;
    font-size:8em;
    word-wrap:none;
}
p {
    width:70%;
    margin:50px auto 0;
    text-align:center;
    font-size:2em;
}

.text {
    position:absolute;
    right:-50%;
    left:-50%;
}
​ 
```

# dependency-injection - 领域驱动设计和 IoC/依赖注入

> ID：14020196
> 
> 赞同：14
> 
> 时间：2012-12-24T10:38:28.637
> 
> 标签：dependency-injection, dependencies, domain-driven-design, inversion-of-control

我现在正在尝试应用我学到的关于 DDD 的知识，但我对域模型中的依赖关系流有点困惑。

我的问题是：

1.  实体是否应该知道域中的工厂、存储库、服务？
2.  存储库是否应该知道域中的服务？

困扰我的另一件事是当我想向集合添加实体时如何处理集合。

假设我正在开发一个简单的 CMS。在 CMS 中，我有一个包含标签实体的文章实体和标签集合。

现在，如果我想添加一个带有新标签的关系。更好的方法是什么？（PHP 中的示例）

```
$article->tags->add(TagEntity);
$articleRepository->save($article); 
```

或者我可以通过服务来做到这一点。

```
$articleService->addTag($article, TagEntity); 
```

你怎么看？

谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-25T11:02:45.960

实体和值对象不应该相互依赖。[这些是DDD 所有构建块中](http://en.wikipedia.org/wiki/Domain-driven_design#Building_blocks_of_DDD)最基本的。它们代表了您的问题域的概念，因此应该关注问题。通过使它们依赖于工厂、存储库和服务，您会使焦点变得模糊。在实体和值对象中引用服务还有另一个问题。因为服务也拥有领域逻辑你会倾向于将领域模型的一些职责委托给服务，这最终可能导致[贫血的领域模型](http://en.wikipedia.org/wiki/Anemic_domain_model)。

工厂和存储库只是用于创建和持久化实体的助手。大多数时候，它们只是在真正的问题域中没有类比，因此根据域逻辑，从工厂和存储库引用服务和实体是没有意义的。

关于您提供的示例，这就是我将如何实现它

```
$article->addTag($tag);
$articleRepository->save($article); 
```

我不会直接访问底层集合，因为我可能希望在将其添加到集合之前`Article`对其执行一些域逻辑（施加约束、验证） 。`Tag`

避免这种情况

```
$articleService->addTag($article, $tag); 
```

仅使用服务来执行概念上不属于任何实体的操作。首先，尝试将它与实体相匹配，确保它不适合任何实体。然后才使用服务。这样你就不会得到贫血的域模型。

**更新 1**

引用 Eric Evans 的“领域驱动设计：解决软件核心中的复杂性”一书的话：

> 应该明智地使用服务，并且不允许剥夺实体和价值对象的所有行为。

**更新 2**

有人对这个答案投了反对票，我不知道为什么。我只能怀疑原因。它可能与实体和服务之间的引用有关，也可能与示例代码有关。好吧，我对示例代码无能为力，因为这是我根据自己的经验得出的看法。但是，我对参考资料部分做了更多研究，这就是我想出的。

我不是唯一一个认为从实体引用服务、存储库和工厂不是一个好主意的人。我在这里发现了类似的问题：

*   [实体可以访问存储库吗？](https://stackoverflow.com/questions/827670/is-it-ok-for-entities-to-access-repositories)
*   [DDD - 领域模型、服务和存储库之间的依赖关系](https://stackoverflow.com/questions/756849/ddd-dependecies-between-domain-model-services-and-repositories)
*   [DDD - 实体不能直接访问存储库的规则](https://stackoverflow.com/questions/5694241/ddd-the-rule-that-entities-cant-access-repositories-directly)
*   [使用服务的 DDD 实体](https://stackoverflow.com/questions/2380882/ddd-entities-making-use-of-services)

还有一些关于这个主题的好文章，特别是这篇[How *not* to injection services in entity](http://thinkbeforecoding.com/post/2009/03/04/How-not-to-inject-services-in-entities)也提供了一个解决方案，如果你迫切需要从你的实体调用一个名为[Double Dispatch](http://en.wikipedia.org/wiki/Double_dispatch)的服务。这是移植到 PHP 的文章中的一个示例：

```
interface MailService
{
    public function send($sender, $recipient, $subject, $body);
}

class Message
{
    //...
    public function sendThrough(MailService $mailService)
    {
        $subject = $this->isReply ? 'Re: ' . $this->title : $this->title;
        $mailService->send(
            $this->sender, 
            $this->recipient, 
            $subject, 
            $this->getMessageBody($this->content)
        );
    }
} 
```

因此，如您所见，您没有对实体`MailService`内部服务的引用`Message`，而是将其作为参数传递给实体的方法。这篇文章“ [DDD：服务](http://devlicio.us/blogs/casey/archive/2009/02/17/ddd-services.aspx)”的作者在[http://devlicio.us/](http://devlicio.us/)的评论部分提出了相同的解决方案。

我还尝试查看 Eric Evans 在他的“领域驱动设计：解决软件核心中的复杂性”一书中对此的看法。经过短暂搜索，我没有找到确切的答案，但我找到了一个实体实际上静态调用服务的示例，即没有引用它。

```
public class BrokerageAccount {
    String accountNumber;
    String customerSocialSecurityNumber;

    // Omit constructors, etc.

    public Customer getCustomer() {
        String sqlQuery =
            "SELECT * FROM CUSTOMER WHERE" +
            "SS_NUMBER = '" + customerSocialSecurityNumber + "'";
        return QueryService.findSingleCustomerFor(sqlQuery);
    }

    public Set getInvestments() {
        String sqlQuery =
            "SELECT * FROM INVESTMENT WHERE" +
            "BROKERAGE_ACCOUNT = '" + accountNumber + "'";
        return QueryService.findInvestmentsFor(sqlQuery);
    }
} 
```

下面的注释说明了以下内容：

> 注意：QueryService 是一个用于从数据库中获取行并创建对象的实用程序，用于解释示例很简单，但对于实际项目而言，它**不一定** 是一个好的设计。

`model`如果您查看我上面提到的 DDDSample 项目的源代码，您会发现 Entities 除了包中的对象（即实体和值对象）之外没有任何引用。顺便说一句，DDDSample 项目在《Domain-Driven Design: Tackling Complexity in the Heart of Software》一书中有详细描述……

另外，我想与您分享的另一件事是关于 [domaindrivendesign Yahoo Group](http://tech.groups.yahoo.com/group/domaindrivendesign/message/2300)的类似讨论。讨论中的这条[消息](http://tech.groups.yahoo.com/group/domaindrivendesign/message/2305)引用了 Eric Evans 关于模型对象引用存储库的主题。

**结论**

总而言之，从实体中引用服务、存储库和工厂并不好。这是最被接受的意见。尽管存储库和工厂是域层的公民，但它们不是问题域的一部分。有时（例如，在有关 DDD 的 Wikipedia 文章中）域服务的概念被称为[Pure Fabrication](http://en.wikipedia.org/wiki/GRASP_(object-oriented_design)#Pure_Fabrication)，这意味着类（服务）“不代表问题域中的概念”。我宁愿将工厂和存储库称为 Pure Fabrications，因为 Eric Evans 在他的书中确实提到了关于服务概念的其他内容：

> 但是当操作**实际上是一个重要的领域概念**时，服务就形成了模型驱动设计的自然部分。在模型中声明为服务，而不是作为实际上不代表任何东西的虚假对象，独立操作不会误导任何人。

根据上面所说，有时从您的实体调用服务可能是一件明智的事情。然后，您可以使用 Double Dispatch 方法，这样您就不必在您的实体类中保留对服务的引用。

当然，总有一些人不同意主流观点，比如[Accessing Domain Services from Entities](http://danhaywood.com/2010/04/30/accessing-domain-services-from-entities/)一文的作者。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T17:22:33.167

> 实体是否应该知道域中的工厂、存储库、服务？

实体永远不应引用存储库或应用程序服务。如果实体使用工厂来创建组成实体，那么实体引用工厂是可以接受的。如果实体将域服务用于某些行为，那么它对域服务的依赖也是可以接受的。

> 存储库是否应该知道域中的服务？

一般没有。存储库应该只负责持久性。

> 现在，如果我想添加一个带有新标签的关系。更好的方法是什么？

这取决于您指的是哪一层。在典型的 DDD 架构中，您将拥有两段代码。您将拥有一个文章应用程序服务，它封装了域并提供了一种细粒度的方法，例如`addTag`您将在哪里传递文章 ID 和标签 ID。此方法将检索适当的文章和标签实例（如果需要），然后：

```
$article->tags->add(TagEntity);
$articleRepository->save($article); 
```

依赖于该域的所有外层都将通过应用程序服务与其通信。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T16:19:53.557

> 实体是否应该知道域中的工厂、存储库、服务？

*   申请服务：**无**
*   领域服务：**是**的，因为它们在领域层
*   工厂：**是**的，因为它们在领域层
*   存储库接口：**是**的，因为它们在领域层
*   存储库实现：**不**，因为它们在基础设施层

注意接口和实现之间的区别：这就是你应该使用接口和实现的原因。

仅供参考，工厂和存储库毕竟是服务，因此您可以概括：

*   服务接口：**是**的，如果它们在域层中

简单的

> 域服务是在域层中定义的服务，尽管实现可能是基础设施层的一部分。存储库是一个领域服务，它的实现确实在基础设施层，而工厂也是一个领域服务，它的实现通常在领域层内。

（来源：[http](http://www.methodsandtools.com/archive/archive.php?id=97p2) ://www.methodsandtools.com/archive/archive.php?id=97p2 ）

> 存储库是否应该知道域中的服务？

通常不会，为什么会这样呢？存储库管理持久性。但我不认为这是“禁止的”，因为基础设施层（持久性）知道域层。

> 困扰我的另一件事是当我想向集合添加实体时如何处理集合。

尽可能首选 OOP 方法：

```
$article = new Article();
$article->addTag($tag);
$articleRepository->save($article); 
```

我更有意义。

> 域服务是任何不容易存在于实体中的业务逻辑。

(http://www.methodsandtools.com/archive/archive.php?id=97p2)

或者也：

> 当域中的重要过程或转换不是实体或值对象的自然责任时，将操作添加到模型中作为声明为服务的独立接口。

（埃里克·埃文斯）

总而言之，如果您觉得需要，请创建域服务，这不是自动的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T11:15:35.540

我将在我认为没有正确答案的前提下回答这个问题，只是方法不同。

从域对象的角度考虑，我会说第一种方法是 DDD。您纯粹是在处理域对象。

但是，我确实认为服务对象有一些用途，它将其作为 API/服务层的一部分公开。在这种情况下，您可以将#1 中的代码包装在您的服务#2 中。这允许您避免将域对象暴露给外部消费者 - 并且您可以在更新域模型时保持外部接口/API 不变。

然而，这只是一种观点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T13:07:02.507

首先，不要挂断它 - 通过创建不必要的服务类等很容易过度设计。更少的代码是好的。 **查看[原始源材料](http://www.infoq.com/minibooks/domain-driven-design-quickly)以及[Java](http://dddsample.sourceforge.net/characterization.html)或[C#](http://code.google.com/p/ndddsample/)中的代码。**

> 1) 实体是否应该知道域中的工厂、存储库、服务？

如果需要，它可以。例如，我的（java）类`@Entity`也可以用注释来注释，`@Configurable`并将会话/其他类注入其中。这就是重点 - 封装所有必要的业务逻辑并公开位于一个域类上的清晰简单的 api。

> 2）存储库是否应该知道域中的服务？

不可以。但很可能相反，服务会使用存储库。

当使用多个域对象/实体/根聚合时使用服务。因此，假设 TAG 是一个单独的实体，这很好：

```
$articleService->addTag($article, TagEntity); 
```

但是，如果 Tag 不是另一个根聚合，您可以这样做

```
$article->tags->add(TagEntity); 
```

并且文章本身通过在其中注入存储库/ dao 来进行保存（无需任何其他调用）。

# javascript - 砖石块或带跨度标签的内联块

> ID：14020197
> 
> 赞同：0
> 
> 时间：2012-12-24T10:38:31.423
> 
> 标签：javascript, jquery, asp.net, css, jquery-masonry

在我的网页中，砌体的第二项 itemSelector 没有按要求工作......

我尝试使用**span**标签将其分成块但没有成功。它正确显示了前 10 张图片，但是当使用向下滚动时，它会在一个块中加载下一个所有图片。

现场示例[http://www.bhinderblink.com/](http://www.bhinderblink.com/)

我的项目正在使用中继器和 jquery 从数据库中获取图片名称。前 10 个直接使用 asp 中继器加载，下一个加载时使用向下滚动和 pic 在 Div #imageDiv 中加载，jquery .append 正在从 xml 对象中获取数据。

脚本代码

```
 function OnSuccess(response) {
        var xmlDoc = $.parseXML(response.d);
        var xml = $(xmlDoc);

        pageCount = parseInt(xml.find("PageCount").eq(0).find("PageCount").text());

        var pic_infoVar = xml.find("pic_info");

        pic_infoVar.each(function () {
            var customer = $(this);
            $("#imageDiv").append("<span class='inline'><img id='theImg' src='/pic/jas/" + customer.find("pic_name").text() + ".jpg" + "'/></span>");

        });
        $("#loader").hide();
    } 
```

身体代码

```
<form id="form1" runat="server">
<div id="topBanner">
</div>
<div id="container">
    <asp:Repeater ID="rptCustomers" runat="server">
        <HeaderTemplate>
        </HeaderTemplate>
        <ItemTemplate>
            <div class="box">
                <asp:Image ID="zzz" runat="server" ImageUrl='<%# "~/pic/jas/" + Eval("pic_name") + ".jpg" %>' />
            </div>
        </ItemTemplate>
        <FooterTemplate>
        </FooterTemplate>
    </asp:Repeater>
        <div class="box">
            <div id="imageDiv">
        </div>
    </div>
</div>
<img id="loader" alt="" src="loading.gif" style="display: none" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:40:49.113

您需要使用 masonry reload 函数，以便它可以计算新元素的大小；像 .masonry('reload');

# image - NSImage -drawAtPoint：画得太小

> ID：14020199
> 
> 赞同：3
> 
> 时间：2012-12-24T10:38:54.067
> 
> 标签：image, macos, cocoa, merge

我正在使用它来组合 2 个 NSImages ：

```
newImage = [[NSImage alloc] initWithSize:NSMakeSize(size1.width,
                                                    size1.height + size2.height)];
[newImage lockFocus];
[firimage drawAtPoint:NSMakePoint(0, 0)
             fromRect:NSMakeRect(0, 0, size1.width, size1.height)
            operation:NSCompositeSourceOver
             fraction:1.0];
[secimage drawAtPoint:NSMakePoint(0, size1.height)
             fromRect:NSMakeRect(0, 0, size2.width, size2.height)
            operation:NSCompositeSourceOver
             fraction:1.0];
[newImage unlockFocus]; 
```

它会生成正确尺寸的图像（2 100x63 图像会生成 100x126 图像），但是两个单独的图像绘制得太小，因此生成的图像大部分是空白的：

![截屏](../Images/e1dbd4f41dec092dc137984c6c2e5738.png)

以下是原始图像：

![图 1](../Images/2afc031e1ec8852445d62876b340444c.png) ![图 2](../Images/52596b909d28936c123eb432a652b36c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T04:22:22.440

我看你解决了。使用您的代码时，我得到了同样奇怪的结果。所以我开始认为我并没有真正理解这些方法。

我通常总是使用 `-drawInRect:fromRect:operation:fraction`，虽然我不是 100% 如何影响两个矩形的结果，但我总是得到我需要的结果。

无论如何，我离开并制作了一个小玩具应用程序来显示交互式修改矩形的效果（根据您的问题使用两个图像）。

[我把它放在github上](https://github.com/foundry/drawingtest)，你可能想看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T12:10:40.393

正如我在评论中所说，使用`-drawInRect:fromRect:operation:fraction`解决了问题！

# intellij-idea - 如何配置 intellij-idea 不格式化代码的某些部分？

> ID：14020200
> 
> 赞同：42
> 
> 时间：2012-12-24T10:38:55.837
> 
> 标签：intellij-idea, code-formatting

在 html 文件中，有一些使用自定义模板语言的代码：

```
<script type="text/javascript">
    function ($scope, JsRoutes) {
        $scope.rows = [
            ${"#{list rows, as: 'row', separator: ','}"}
            {
            #{list fieldConfigs, as: 'f', separator: ','}
            ${f.name} : ${'$'}{row.${f.name}.toJson()}#{/list}
            }
            ${'#{/list}'}
        ]
    }
</script> 
```

是否可以将 intellij-idea 配置为不格式化（但格式化文档的其他部分）？由于想法会使格式化后难以阅读：

```
<script type="text/javascript">
    function ($scope, JsRoutes) {
        $scope.rows = [
            ${"#{list rows, as: 'row', separator: ','}"}
            {
    #{list fieldConfigs, as: 'f', separator: ','}
    ${f.name} :
        ${'$'}{
            row.${f.name}.toJson()
        }#{/list}
    }
    ${'#{/list}'}
    ]
    }
</script> 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-05-06T04:09:59.560

在我的 EAP 13.1 版本中，您必须在设置中启用以下选项，

`Preferences`-> `Code Style`-> `General`-> `Formatter Control`->`Enable formatter markers in comments`

在您使用这些评论之前，

```
// @formatter:off

// @formatter:on 
```

或这些（取决于语言）：

```
<!--@formatter:off-->

<!--@formatter:on--> 
```

截屏：

![突出显示“首选项”下的注释中启用格式化程序标记复选框的屏幕截图](../Images/cd4291944a9f10ed337bd30162b87fc0.png)

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-12-24T10:59:31.450

此功能已实现，您现在可以使用特殊注释禁用代码区域的格式设置。

[![标记](../Images/da2ceddaa7189861fdf896e8c71eec44.png)](https://i.stack.imgur.com/qyzOD.png)

在设置中启用此功能后，`//@formatter:off`在您所在区域的开头和`//@formatter:on`结尾添加。

这些是默认标记，它们是可配置的。

您可以在文档中找到[更多详细信息和示例](https://www.jetbrains.com/help/idea/reformatting-source-code.html)：

*   [重新格式化源代码时跳过区域](https://www.jetbrains.com/help/idea/2016.3/reformatting-source-code.html#d1971795e110)
*   [使用格式标记的示例](https://www.jetbrains.com/help/idea/2016.3/reformatting-source-code.html#d1971795e166)

* * *

2012年的原始答案：

~~尚不可能，请投票支持此功能请求：~~

*   [IDEA-56995](http://youtrack.jetbrains.com/issue/IDEA-56995)使用注释禁用每个区域的代码格式

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-24T08:33:28.730

从[EAP 13 开始](https://github.com/JetBrains/intellij-community/commit/9b42e988a9a0ab56159173aaafd2852ea7dc2cdd)，您可以使用以下注释触发格式化程序：

```
// @formatter:off
...
// @formatter:on 
```

要在“环绕”中启用它，您可以在“环绕”部分定义一个实时模板：

```
// @formatter:off
$SELECTION$
// @formatter:off 
```

`Settings`您可以在-> `Code Style`->中找到这些设置`General`并设置您自己的触发词。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-09T13:00:22.970

值得注意的是，格式化程序控件似乎在 javadoc 注释中不起作用。它必须是常规的 C 或 C++ 风格的注释。所以`// @formatter:off`作品`/* @formatter:off */`也有效，但`/** @formatter:off */`没有。

# symfony - 作曲家从未成功完成

> ID：14020202
> 
> 赞同：0
> 
> 时间：2012-12-24T10:39:16.623
> 
> 标签：symfony, composer-php

我正在使用带有 symfony 的作曲家，我发现在通过运行`composer update`它来安装或更新任何新包后，它会将内容复制到相应的文件夹中，但在完成该过程之前几乎不会抛出错误。

> 使用包信息加载作曲家存储库更新依赖项 - 安装 knplabs/knp-components (dev-master 163308e) 克隆 163308ed3442e7e9ec4a45ff912664e366954c82
> 
> *   安装 knplabs/knp-paginator-bundle (dev-master 0d719a9) 克隆 0d719a9bd6973bde1b10587fc2c85cf04c5e0e9d
> 
> 写入锁定文件生成自动加载文件 PHP 致命错误：在第 6 行的 E:\workspace\sadi\projects\thook\app\autoload.php 中找不到类“Symfony\Component\ClassLoader\UniversalClassLoader” PHP 堆栈跟踪：PHP 1\. { main}() E:\workspace\sadi\projects\thook\vendor\sensio\distribution-bundle\Sensio\Bundle\DistributionBundle\Resources\bin\build_bootstrap.php:0 PHP 2.require_once() E:\workspace\ sadi\projects\thook\vendor\sensio\distribution ion-bundle\Sensio\Bundle\DistributionBundle\Resources\bin\build_bootstrap.php:24
> 
> 致命错误：第 6 行的 E:\workspace\sadi\projects\thook\app\autoload.php 中未找到 Class 'Symfony\Component\ClassLoader\UniversalClassLoader'
> 
> 调用堆栈：0.0002 633136 1\. {main}() E:\workspace\sadi\projects\thook\vendor\sens io\distribution-bundle\Sensio\Bundle\DistributionBundle\Resources\bin\build_boot strap.php:0 0.0216 652848 2\. require_once('E:\workspace\sadi\projects\thook\app\au toload.php') E:\workspace\sadi\projects\thook\vendor\sensio\distribution-bundle\Sensio\Bundle\DistributionBundle\Resources \bin\build_bootstrap.php:24
> 
> 脚本 Sensio\Bundle\DistributionBundle\Composer\ScriptHandler::buildBootstrap h andling post-update-cmd 事件因异常而终止
> 
> [RuntimeException] 生成引导文件时出错。
> 
> 更新 [--prefer-source] [--prefer-dist] [--dry-run] [--dev] [--no-custom-instal lers] [--no-scripts] [-v|--详细] [-o|--optimize-autoloader] [packages1] ... [packagesN]

这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-08T06:17:54.673

这似乎是 symfony 团队后来修复的错误。谢谢@Wouter J

# html - 图像框对齐

> ID：14020206
> 
> 赞同：-2
> 
> 时间：2012-12-24T10:39:43.397
> 
> 标签：html, css, image, block

我在对齐图像框时遇到了一些问题，因为尽管它们使用相同的 css 类，但它们没有正确对齐。中间的框比其他的高几个像素。这是特定问题的链接。

[http://www.homemadetools.net/forum/few-bits-pces-135#post338](http://www.homemadetools.net/forum/few-bits-pces-135#post338)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:48:00.060

设置图像的宽度和高度。它是用正确的宽度和高度属性显示正确的位置。

```
ima.class_name {
width: 100px;
height: 200px;
border: 5px solid red;
 } 
```

# logging - 重复的日志条目 Nlog

> ID：14020208
> 
> 赞同：2
> 
> 时间：2012-12-24T10:40:00.970
> 
> 标签：logging, nlog

我使用 Nlog 进行记录，发现每次调用 nLog 时，我的日志文件中有 5 个条目。我该如何解决？例如。

```
2012-12-23 18:18:19.2465 NinjaTrader.Strategy.LODHOD.OnStartUp Debug   startup
2012-12-23 18:18:19.2465 NinjaTrader.Strategy.LODHOD.OnStartUp Debug   startup
2012-12-23 18:18:19.2465 NinjaTrader.Strategy.LODHOD.OnStartUp Debug   startup
2012-12-23 18:18:19.2465 NinjaTrader.Strategy.LODHOD.OnStartUp Debug   startup
2012-12-23 18:18:19.2465 NinjaTrader.Strategy.LODHOD.OnStartUp Debug   startup
2012-12-23 18:18:19.2465 NinjaTrader.Strategy.LODHOD.OnStartUp Debug   startup 
```

我的 nLog 配置如下

```
/****CLASS LEVEL VARIABLES***/
// Step 1\. Create configuration object 
private static LoggingConfiguration config = new LoggingConfiguration();
private static FileTarget fileTarget = new FileTarget();
private static Logger logger = LogManager.GetCurrentClassLogger();
/*** END OF CLASS LEVEL VARIABLES ***/

/*************************NLOG CONFIG*****/

fileTarget.FileName = 
  "C:\\temp\\" + Instrument.FullName + "nLog." + DateTime.Now.Ticks + ".log";
fileTarget.Layout = 
  "${longdate} ${callsite} ${level} ${event-context:item=StrategyId}  ${message}";

config.AddTarget("file", fileTarget);

// Step 4\. Define rules
LoggingRule rule2 = new LoggingRule("*", NLog.LogLevel.Trace, fileTarget);
config.LoggingRules.Add(rule2);

// Step 5\. Activate the configuration
LogManager.Configuration = config;

logger.Debug("startup");

/*************************NLOG CONFIG*****/ 
```

您可以看到该启动程序打印了 6 次，并且在 Ninjatrader onStartup 程序开始时仅在程序中调用一次。

我也有范围内的 Global Diagnistoc，但我认为这不会导致这种情况发生

```
public class ScopedGlobalContext : IDisposable
{
  private string n;
  private string v;

  public ScopedGlobalContext(string name, string value)
  {
    n = name;
    v = value;
    NLog.GlobalDiagnosticsContext.Set(n, v);
  }

  public void Dispose()
  {
    NLog.GlobalDiagnosticsContext.Remove(n);
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-04T09:32:51.573

如果您有多个针对实例文件的规则，那么您将获得多次写入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-08-02T12:44:38.327

就我而言，将规则标记为`final`解决了问题。

```
<rules>
   <logger name="*" minlevel="Warn"  appendTo="database" final="true"/>
   <logger name="*" minlevel="Fatal" appendTo="database" final="true"/>
   <logger name="*" minlevel="Error" appendTo="database" final="true"/>
   <logger name="*" minlevel="Info"  appendTo="database" final="true"/>
   <logger name="*" minlevel="Debug" appendTo="database" final="true"/>
   <logger name="*" minlevel="Trace" appendTo="database" final="true"/>
</rules> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T16:45:49.057

我也有同样的事情发生在我身上。多次搜索导致其他人遇到相同的问题，但没有解决方案。我认为这是一个错误，如果您正在运行多个线程和/或如果执行日志记录的代码被 Linq 查询调用。请记住，Linq 并不总是立即执行或执行一次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-13T20:18:45.473

[当重复过滤器](https://github.com/NLog/NLog/wiki/WhenRepeated-Filter)

> 当计算的布局已被记录时匹配。如果有一个激进的记录器，并且想要限制输出，这很有用。
> 
> 与 NLog 版本一起引入。4.5

它看起来是 nlog 引入的用于去抖动/限制日志输出的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-27T15:18:17.360

向记录器添加最终属性解决了我的问题

```
<logger name="*" minlevel="Info" writeTo="log" final="true"/> 
```

# jquery - 如何使用 jQuery 在两个 id 之间选择元素？

> ID：14020213
> 
> 赞同：3
> 
> 时间：2012-12-24T10:40:16.400
> 
> 标签：jquery, addclass

我尝试`addClass("selected")`在两个 id 之间的元素上，但它不起作用。

我用`nextUntil()`.

我想在和之间**`selected`**的每一个上添加类。**`a`**`d-61``d-64`

**我想包括`a`of`d-61`和`d-64`。**

这是我的代码：

```
<ul>
    <li id="d-60">
        <a href="#">60</a>
    </li>  
    <li id="d-61">
        <a href="#">61</a>
    </li>  
    <li id="d-62">
        <a href="#">62</a>
    </li> 
    <li id="d-63">
        <a href="#">63</a>
    </li>  
    <li id="d-64">
        <a href="#">64</a>
    </li>  
    <li id="d-65">
        <a href="#">65</a>
    </li>  
</ul>

<script>
   $("#d-61").nextUntil("#d-64", "a").addClass("selected");
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:44:55.770

您可以使用以下

```
$("#d-61").nextUntil("#d-64").children('a').addClass("selected");​​ 
```

`.nextUntil()`处理兄弟姐妹而不是兄弟姐妹的孩子。

[这里的例子](http://jsfiddle.net/WH4cB/)

如果您还想选择 2 个外部元素，请尝试：

```
$("#d-61").nextUntil("#d-64").andSelf().add('#d-64').children('a').addClass("selected");​​​​​​​​​​​ 
```

[这里的例子](http://jsfiddle.net/WH4cB/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:45:46.783

您可以查看列表元素并为每个类添加。

```
$('ul li').each(function(index) {
    $(this).find('a').addClass("selected");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T10:41:34.310

尝试这个，

**[现场演示](http://jsfiddle.net/rajaadil/7AMzR/2/)**

```
$("#d-61").nextUntil("#d-64").add("#d-61, #d-64").find('a').addClass("selected");​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T10:43:48.723

```
$("#d-61").nextUntil("#d-64").find("a").addClass("selected") 
```

[http://codepen.io/joe/pen/tBxwi](http://codepen.io/joe/pen/tBxwi)

# java - 为什么一个类可以加载另一个类的私有内部类？

> ID：14020215
> 
> 赞同：23
> 
> 时间：2012-12-24T10:40:26.707
> 
> 标签：java

我有

```
class A {
    private static class B {
        B() {
        }
    }
} 
```

虽然 B 是私有的，但我从另一个类加载 A$B.class 没有问题。为什么允许这样做？

```
class C {
    public static void main(String[] args) throws Exception {
        System.out.println(Class.forName("A$B").newInstance());
    }
} 
```

**输出**

```
A$B@affc70 
```

**更新**

我知道加载任何类的限制是故意提出的，但必须有一个合理的解释。

请注意，包私有 B{} 构造函数是故意的。如果我删除它，我会得到

java.lang.IllegalAccessException：B 类不能使用修饰符“private”访问 A$B 类的成员

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-24T10:52:45.223

类加载器[可以加载任何类](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#forName%28java.lang.String,%20boolean,%20java.lang.ClassLoader%29)，但访问规则是在实例化时强制执行的。

那么为什么你的代码能够实例化这个类呢？

内部类在字节码级别是一个大黑客，因为它们被实现为与 Java 1.0 的字节码兼容。

所以这个源代码级别的私有内部类实际上在字节码级别是包保护的。您可以通过将类 C 移动到另一个包中并将 B 的构造函数公开来验证这一点：

```
Exception in thread "main" java.lang.IllegalAccessException: 
Class something.C can not access a member of class A$B with modifiers "public" 
```

反射确实允许使用 setAccessible() 覆盖访问规则，但这里不是这种情况。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-24T11:16:17.567

此行为符合[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#forName%28java.lang.String,%20boolean,%20java.lang.ClassLoader%29)：

> 请注意，此方法不检查其调用者是否可以访问所请求的类。

换句话说，`forName`可以访问不可访问的类并且不会抛出`IllegalAccessExcessException`. 而且因为构造函数是包私有的，即（我假设）可以从您的调用位置访问，`newInstance`所以也不会抛出任何异常。

如果构造函数不可访问（因为您将其移动到另一个包或将其设为私有），`newInstance`则会引发异常。

关于您的更新，如果您删除构造函数，您将调用与类具有相同访问权限的默认构造函数，在这种情况下为私有（参见[JLS 8.8.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.3)：*如果类被声明为私有，则默认构造函数为隐式给出访问修饰符 private* )。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T10:53:34.093

反射通常由需要能够检查或修改在 Java 虚拟机中**运行的应用程序的运行时行为的程序使用。**

它是**一种可以让人们打破某些规则的工具，**可以将其扔到脚上或正确使用它。

反射提供了一种通过类和对象之间的常规交互通常无法获得的方法来访问有关类的信息的机制。

> 其中之一是允许从外部类和对象访问私有字段。

但是，两者`getDeclaredField()`和`setAccessible()`都由安全管理器实际检查，并且当您的代码不允许执行此操作时会抛出异常。许多反射技巧可能不适用于活跃的安全管理器。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-24T11:19:16.823

虽然反射是一个很好的比较，但类加载器超出了反射库的功能。例如，类加载器可以创建类，而反射则无法做到这一点。它还可以

*   触发枚举实例的创建。
*   在初始化之前给你一个类的引用。
*   “覆盖”父类加载器中的类。
*   卸载时触发要卸载的类。
*   给你一个类的字节码，给你原始的实现细节。
*   在类路径中为您提供非类资源的流。

像反射一样，它可以加载带有私有成员的类，如果不能加载，那将毫无意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T11:19:16.873

使用反射即使你可以改变修饰符

```
class MyClass{
private int value;
}

Field value = MyClass.class.getDeclaredField("value");
value.setAccessible(true); 
```

# qt - 如何使用 QProcess 获得 SWI-prolog 查询的下一个解决方案？

> ID：14020217
> 
> 赞同：3
> 
> 时间：2012-12-24T10:40:41.833
> 
> 标签：qt, prolog, swi-prolog, qprocess

我正在尝试将 SWI-prolog 与 QProcess 结合起来。所以我已经可以与 prolog 交互并向它发送问题，但我总是只得到第一个答案。因此，我尝试发送诸如“n”或“r”之类的字符，这应该像在 shell 中一样给我查询的下一个答案。但是，它不适用于 QProcess。这是我的代码：

```
connect(&p,SIGNAL(readyReadStandardError()),this,SLOT(readStdError()));
connect(&p,SIGNAL(readyReadStandardOutput()),this,SLOT(readStdOut()));

p.setProcessChannelMode(QProcess::MergedChannels);
p.start("swipl",QIODevice::ReadWrite | QIODevice::Unbuffered);
if(!p.waitForStarted())
    return;

p.write("consult(ws).\r\n");      //prolog program
if(!p.waitForBytesWritten())
{
    p.close();
    return;
}

p.write("test(X,Y).\r\n");       //query
if(!p.waitForBytesWritten())
{
    p.close();
    return;
}

p.write("n",1);                  //give me the next solution -> nothing happens 
```

我不知道该怎么办了。我怎样才能得到下一个答案，或者我怎样才能告诉 prolog 向我展示所有答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:43:13.453

我会使用类似的东西

```
p.write("forall(test(X,Y), writeln(test(X,Y))).\r\n"); 
```

或者更可重用的东西

```
QString q("forall(%1, writeln(%1)).\r\n");
p.write(q.arg("test(X,Y)")); 
```

你有这个概念...

如果您愿意，也许为了简化答案解析，打印分隔变量

```
p.write("forall(test(X,Y), maplist(writeln, [X,Y])).\r\n"); 
```

# iphone - 自定义 UICollectionViewCell 出错

> ID：14020221
> 
> 赞同：2
> 
> 时间：2012-12-24T10:41:20.000
> 
> 标签：iphone, ios, cocoa-touch, uicollectionview, uicollectionviewcell

我正在尝试设置一个`UICollectionView`. 起初我使用的是 basic `UICollectionViewCell`，它运行良好，正在显示单元格。

然后我创建了自己的 collectionViewCell（子类`UICollectionViewCell`化），以便能够在单元格中显示图像。我将 Storyboard 中的自定义单元格与一个标识符相关联，并且我还为它指定了正确的类。

但是，我一直有这个错误，我不明白为什么：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'could not dequeue a view of kind: UICollectionElementKindCell with identifier MediaCell - must register a nib or a class for the identifier or connect a prototype cell in a storyboard' 
```

我设法通过在中添加这一行来解决这个错误，`viewDidLoad`但在我关注的教程中，这些人没有使用它：

```
[self.collectionView registerClass:[MediaCollectionViewCell class] forCellWithReuseIdentifier:@"MediaCell"]; 
```

问题是如果我添加它，collectionView 仍然是黑色的并且没有数据显示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T17:21:50.960

我昨天遇到了这个确切的问题（因为文档说您必须注册该类），但是文档不准确，因为如果您的情节提要中存在原型单元并且您给它一个标识符，则您不应该注册。

如果您`UICollectionViewCell`在情节提要中创建 的原型并分配您的自定义单元格类，则没有必要（如果这样做是有害的）注册自定义`UICollectionViewCell`. 这就是结果`UICollectionView`是黑色的原因。

根据错误消息，情节提要中的原型单元格的标识符设置不正确（根本未设置或未设置`MediaCell`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T11:09:20.180

你是对的

```
[self.collectionView registerClass:[MediaCollectionViewCell class] forCellWithReuseIdentifier:@"MediaCell"]; 
```

因为这有助于细胞重用。

问题可能出在您的`cellForRowAtIndexPath`方法、您的子类或您设置委托的方式上。你可以发布代码吗？

您的委托方法应如下所示：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    MediaCollectionViewCell* cell = [self.collectionView dequeueReusableCellWithReuseIdentifier:@"MediaCell" forIndexPath:indexPath];
    // set cell.image
    return cell;
} 
```

你应该在你的 viewDidLoad 方法中设置你的委托...

```
[self.collectionView setDataSource:self];
[self.collectionView setDelegate:self]; 
```

编辑：您可以发布您的 MediaCollectionViewCell 实现的代码吗？我做了类似的事情，我的看起来像这样。

```
- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    // Initialization code
    self.imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, frame.size.width, frame.size.height)];
    [self.contentView addSubview:self.imageView];
}
return self; 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T15:30:35.043

这实际上是与 TabBarController 相关的问题。我没有在其中显示正确的类，这就是 collectionView 总是为空的原因。我在这里发布的代码正在运行。感谢大家的帮助。

# macos - 判断 AirPlay 音频设备是否正在使用的方法，受 CoreAudio 方法保护的密码

> ID：14020222
> 
> 赞同：4
> 
> 时间：2012-12-24T10:41:21.560
> 
> 标签：macos, core-audio, airplay

我目前在我的应用程序中遇到了 AirPlay 设备的问题。我使用这个[主题](http://joris.kluivers.nl/blog/2012/07/25/per-application-airplay-in-mountain-lion/) 作为 Airplay 设备配置的示例。但目前找不到两个问题的解决方案：

首先，我无法检测到播放设备当前是否忙，因为它不支持同时输入？我试图在 CoreAudio 中找到任何属性，但没有任何运气。

我发现的第二个问题是关于启用密码的播放设备。无论是否输入密码，我都无法收到任何通知，因此我的应用程序无法对任何事件做出应有的反应

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:03:43.507

我不熟悉新的 CoreAudio API，所以可能有更简单的方法。这是我去年解决同样问题的方法。

您可以通过 Bonjour（也称为多播 DNS 或 Zeroconf）确定设备是否需要密码。您应该能够将源名称与 CoreAudio 信息相匹配。对于音频 AirPlay，您需要检查`_raop._tcp`设备。以下是它在终端上的工作方式：

首先，发现附近的 AirPlay 设备（注意该命令在 Mountain Lion 之前`dns-sd`调用）：`mDNS`

```
劳伦特〜$ dns-sd -B _raop._tcp
浏览_raop._tcp
日期：---2013 年 1 月 15 日星期二---
17:37:31.977 ...开始...
如果域服务类型实例名称，则时间戳 A/R 标志
17:37:31.977 添加 2 4 本地。_raop._tcp。406C8F53F1DD@iMac de Laurent

```

然后，获取 AirPlay 实例的完整记录：

```
laurent ~ $ dns-sd -L "406C8F53F1DD@iMac de Laurent" _raop._tcp local
查找 406C8F53F1DD@iMac de Laurent._raop._tcp.local
日期：---2013 年 1 月 15 日星期二---
17:43:47.097 ...开始...
17:43:47.098 406C8F53F1DD@iMac\032de\032Laurent._raop._tcp.local。可通过 iMac-de-Laurent.local.:5000（接口 4）访问
 et=0,1 ek=1 ss=16 raAudioFormats=ALAC,L16 tp=UDP pw=false txtvers=1 ramach=iMac12,1 vn=3 md=0,1,2 sv=false sm=false ch=2 sr =44100 rast=afs rastx=iafs cn=0,1

```

`pw=false`表示没有密码。这是基本的想法，现在你应该对[DNSServiceResolve](https://developer.apple.com/library/mac/#documentation/Networking/Conceptual/dns_discovery_api/Articles/resolving.html#//apple_ref/doc/uid/TP40002487-SW1)做同样的事情。

现在，我所知道的检查设备是否忙碌的唯一方法是实际连接到它。在内部，AirPlay 使用 RTSP，所以你可以发送这个请求：

```
RTSP/1.0 选项 *
# 空行

```

如果设备回复状态 453，则表示它已经在流式传输。

您可以查看我的[AirPlay RTSP 堆栈](https://github.com/radioline/node_airtunes/blob/master/lib/rtsp.js)以获取更多信息。

# arrays - Java普通编程

> ID：14020231
> 
> 赞同：0
> 
> 时间：2012-12-24T10:41:45.400
> 
> 标签：arrays, string, type-conversion, to-char

我在将字符串转换为 char 数组时遇到问题...我的问题是：-

```
String str="2+32*2";  
char a[]=new char[str.length()];  
str.getChars(0,str.length,a,0); 
```

我的数组看起来像这样：-

```
a[0]='2';  
a[1]='+';  
a[2]='3';  
a[3]='2';  
a[4]='*';  
a[5]='2'; 
```

但我需要该数组看起来像这样：-

```
a[0]='2';  
a[1]='+';  
a[2]='32';  
a[3]=' *';  
a[4]='2'; 
```

我需要做什么？有人请帮忙！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:47:33.443

你不能这样做，因为 '32' 不是一个字符，而是两个字符。

您可以创建字符串的 ArrayList 并使用 StringTokenizer 类来获取每个令牌： [http ://www.java-samples.com/showtutorial.php?tutorialid=236](http://www.java-samples.com/showtutorial.php?tutorialid=236)

```
String val;
ArrayList<String> values = new ArrayList<String>();
StringTokenizer st = new StringTokenizer(str, "+*", true);   // Put the delimiters that you want
while(st.hasMoreTokens()) { 
    val = st.nextToken(); 
    values.add(val);
} 
```

（我没有尝试过这个例子，但我认为它会起作用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:28:05.010

这个怎么样？

```
import java.util.*;
import java.lang.*;
import java.util.StringTokenizer;

class Main {
    public static void main (String[] args) throws java.lang.Exception {
        String str="2+32*2-7/5";
        ArrayList<String> arr = new ArrayList<String>();
        StringTokenizer st = new StringTokenizer(str, "+-*/", true);
        while(st.hasMoreTokens()) { 
                arr.add(st.nextToken());
        }
        System.out.print(arr);
    }
} 
```

## [演示](http://ideone.com/3hzrk5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T10:58:06.220

因此，听起来您想将输入标记为多个 String 对象（而不是 char 数组）。[Scanner](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)对象正是用于这种标记化的。或者，您可以手动滚动[LL(1) 解析器](http://en.wikipedia.org/wiki/LL_parser)来执行此操作。归根结底，您可能希望拥有这样的界面：

```
public interface ExpressionTokenizer {
   Iterable<Token> tokenizeExpression(String expression);
} 
```

我在这里使用“Token”，因为您可能不想将“2”、“32”和“2”表示为字符串，而是表示为带有已解析的“intValue()”的“IntegerToken”为整数。

这里有一些伪代码可以帮助您入门：

```
if next_char is a digit:
   tokenize as integer literal
   update state
   return

if next_char is in {'+', '-', '*', '/'}
   tokenize as numeric operator
   update state
   return

tokenize as error 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T10:51:25.497

你可以使用`Character.isDigit(a[i])`.
但是，一个字符不能长于一个字符，因此您必须创建一个字符串数组。

我建议：

```
ArrayList<String> arrList = new ArrayList<String>();
char[] a = str.toCharArray();

for (int i = 0; i < a.length; i++) {
    String s = "";
    s.append(a[i]);
    if(Character.isDigit(a[i+]1)) {
        i++;
        s.append(a[i]);
    }
    arrList.add(s);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T10:52:47.523

见编辑：

```
package SO;

public class aa {

    public static void main(String[] args) {
    String inputString = "2+32*2-3/3";
    char[] inputCharArray = inputString.toCharArray();
    char[][] finalSplittedArray = new char[100][2];
    int rowCounter = 0;
    int colCounter = 0;
    for (char inputChar : inputCharArray) {
        if (inputChar == '+' || inputChar == '-' || inputChar == '*' || inputChar == '/') {
        rowCounter++;
        finalSplittedArray[rowCounter][0] = inputChar;
        colCounter = 0;
        rowCounter++;
        } else {
        finalSplittedArray[rowCounter][colCounter] = inputChar;
        colCounter++;
        }

    }

    for (char[] cc : finalSplittedArray) {
        for (char c : cc)
        System.out.print(c);
        System.out.println();
    }
    }
} 
```

基本上，您需要根据运算符拆分字符串。在这里，我考虑了 4 个运算符 : `+ - * /`。如果需要，添加更多。

## [演示](http://ideone.com/g785eD)

# c# - 带线程的 CoreAudioApi - InvalidCastException

> ID：14020232
> 
> 赞同：2
> 
> 时间：2012-12-24T10:41:46.523
> 
> 标签：c#, multithreading, com, .net

我正在编写一个应用程序来修改另一个应用程序的音量并使用`CoreAudioApi`dll 来执行此操作。以下代码块在主线程上完美运行，但在单独的线程中调用时，`InvalidCastException`会引发 an。如果这只是两个线程试图访问同一资源的问题，我投入了一个互斥锁，但情况似乎并非如此。关于问题可能是什么的任何想法？作为一个新的 C# 程序员，我很难过。我阅读了其他问题，其中建议只有主线程可以访问 COM 对象，例如 CoreAudioApi，所以我需要向主线程发送某种消息。如果这是正确的，那么最好的方法是什么？

异常（发生在第一个 Math.abs if 语句上）：

`Unable to cast COM object of type 'System.__ComObject' to interface type 'CoreAudioApi.Interfaces.IMMDevice'. This operation failed because the QueryInterface call on the COM component for the interface with IID '{D666063F-1587-4E43-81F1-B948E807363F}' failed due to the following error: No such interface supported (Exception from HRESULT: 0x80004002 (E_NOINTERFACE)).`

代码：

```
muteSoundMutex.WaitOne();
AudioSessionControl sASC = sInfo.getSAudioSession();
if (Math.Abs(sASC.SimpleAudioVolume.MasterVolume -
      (0.05f / defaultDevice.AudioEndpointVolume.MasterVolumeLevelScalar)) < 0.0001 
    && savedVol > 0)
{
   ... // other code here. all mutexes are released correctly. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T10:49:44.520

您的错误消息告诉您在使用`IMMDevice`.
根据[这个](http://daisy-trac.cvsdude.com/urakawa-sdk/browser/trunk/csharp/audio/NAudio/CoreAudioApi/Interfaces/IMMDevice.cs?rev=2379)规范，`IMMDevice`只有 4 种方法：

*   `Activate`
*   `OpenPropertyStore`
*   `GetId`
*   `GetState`

您提供的代码没有提及这些方法，因此您误解了错误发生在哪里，或者这是您的应用程序引发的内部错误。

~~我认为这是从您的设备获取卷期间的内部错误。~~

~~如果这个错误发生在`sASC.SimpleAudioVolume.MasterVolume`or`defaultDevice.AudioEndpointVolume.MasterVolumeLevelScalar`中，那么这个错误是因为代码运行到后台模式。否则，请为您的异常添加一些代码和堆栈跟踪。~~

在设备的方法`E_NOINTERFACE`期间可能会出现错误代码错误。[`Activate`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371405.aspx)所以你需要在你的主线程中调用这个方法来激活设备，然后尝试在你的后台模式中使用它。无法提供任何示例代码，抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-07T18:59:12.510

我的应用程序抛出了这个异常。我已经收集了一些关于这个的见解。

*   COM 对象要求所有线程运行
*   如果您尝试从另一个线程运行此对象，请确保该线程正在运行
*   如果您的程序正在运行`STAThread`并且您正在将此 COM 对象用于一个`Task`或另一个`Thread`，那么它将抛出这样的异常。

所以请确保您的程序`MTAThread`在使用 COM 对象时`Task`正在运行`Thread`。

希望这可以帮助。

谢谢你。

# html - 在 response.sendRedirect() 中传递参数 - JSP

> ID：14020234
> 
> 赞同：13
> 
> 时间：2012-12-24T10:41:52.530
> 
> 标签：html, jsp, redirect, httprequest

我是网络技术的新手。我正在尝试做一个简单的程序，它要求用户输入一个名称，如果有效页面重定向到另一个 jsp 文件`"RedirectIfSuccessful.jsp"`，如果无效页面重定向到`"RedirectIfFailed.jsp"`. 我正在使用该`response.sendRedirect()`方法来执行此操作。

重定向工作正常。但是，我希望访问用户在表单`RedirectIfSuccessful`和`RedirectIfFailed`文件中输入的名称，以便在输入有效名称时向用户显示：Welcome, nameEntered 并且当失败时，消息将是 nameEntered 无效。请返回重试。

我尝试`request.getParameter("name")`从两个文件中使用，但它返回了一个`null`值。我该怎么做才能访问它？

这是我的代码：这是`RedirectingPage.jsp`

```
 <%@ page 
    language="java" 
    import="java.util.regex.*"
    contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<%  
    String name = request.getParameter("name");

    final String NAME_PATTERN = "^[a-zA-Z]{3,15}$";
    Pattern pattern = Pattern.compile(NAME_PATTERN);

    Matcher matcher = pattern.matcher(name);

    if (matcher.matches() == true){
        response.sendRedirect("RedirectIfSuccessful.jsp");

    } else {
        response.sendRedirect("RedirectIfFailed.jsp");
    }

%> 
```

这是我有表单的 HTML 文件：`FormSubmit.html`

```
<html>
    <head>
        <title> Welcome </title>
    </head>

    <body BGCOLOR="#FDF5E6">
        <p> <i> This program redirects to a page if the name entered is valid and to another one if name
            entered is invalid... This uses response.sendRedirect() </i> </p>

        <form action="RedirectingPage.jsp" method="post">
          <font size=6 face="Georgia"> <strong> Enter your name: </strong> </font> <input type="text" name="name"> <br> <br>
          <input type="submit" name="btn" value="Submit" >
        </form>
    </body>
</html> 
```

这是成功的页面：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title> Successful Submit </title>
</head>

<body>

<font face="Georgia" size="6"> Hello, <% request.getParameter("name"); %> </font>

</body>
</html> 
```

我希望你能提供帮助，我的问题很清楚。谢谢 ：）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-24T10:46:45.307

重定向包括向浏览器发送响应*“请转到以下 URL：RedirectIfSuccessful.jsp”*。

当它收到这个响应时，浏览器会向 发送一个新的请求`RedirectIfSuccessful.jsp`，不带任何参数。所以获取参数`name`from`RedirectIfSuccessful.jsp`将返回 null。

如果您想在重定向后访问该名称，则需要发送重定向到`RedirectIfSuccessful.jsp?name=<the name the user entered>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-22T12:42:05.627

要在另一个页面中获取名称，请使用 session.

例如`session.setAttribute("name",name)`在登录页面；

要检索名称，请使用`session.getAttribute("name")`. 您可以将其分配给这样的变量：

```
<% String name=(string)session.getAttribute("name");%> 
```

成功！

# android - 使用回调和处理程序更改 Android 中的 UI 元素

> ID：14020235
> 
> 赞同：1
> 
> 时间：2012-12-24T10:41:55.230
> 
> 标签：android, android-widget, android-spinner, android-button, android-handler

我有一个问题，我相信解决方案相对简单，但我错过了一些东西。基本上我的程序从用户端的流程是我有一个“主屏幕”，其中屏幕上的按钮是半透明的并且没有响应，直到从下拉菜单（微调器小部件）中选择一个项目。在代码方面，我在 XML 文件中定义了布局，然后用 Java 编写所有相关联的内容。所以在 onCreate() 方法中，我已经像这样初始化了按钮：

```
public void initButtons() {
        Button buttonOne = (Button) findViewById(R.id.button_one);
        Button buttonTwo = (Button) findViewById(R.id.button_two);
        Button buttonThree = (Button) findViewById(R.id.button_three);
        Button buttonFour = (Button) findViewById(R.id.button_four);

        buttonOne.setClickable(false);
        buttonTwo.setClickable(false);
        buttonThree.setClickable(false);
        buttonFour.setClickable(false);

        buttonOne.setAlpha(0.5f);
        ButtonTwo.setAlpha(0.5f);
        buttonThree.setAlpha(0.5f);
        buttonFour.setAlpha(0.5f);
    } 
```

这很好用，但我想在从我的微调器中选择一个项目之后设置一些 onClickListeners。所以我的活动类实现了 onItemClickListener 并且我的代码中有以下回调：

```
@Override
public void onItemSelected(AdapterView<?> parent, View view, int position,
        long id) {
    if (position != 0) {
        selectedTown = parent.getItemAtPosition(position).toString();
        CharSequence text = "You've Selected " + selectedItem;
        int duration = Toast.LENGTH_SHORT;
        Toast toast = Toast.makeText(SampleUI.this, text, duration);
        toast.show();
        itemSelected = true;
        handler.sendEmptyMessage(1);
    } else { 
        itemSelected = false;
    }

}

@Override
public void onNothingSelected(AdapterView<?> arg0) {

} 
```

boolean itemSelected 在活动类中具有全局范围，Toast 用于调试目的而不是必需的。但我遇到的问题是，当我在微调器上的项目（位置 0 以下）被选中后尝试更改按钮时。我有一个这样定义的消息处理程序：

```
Handler handler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            if ((itemSelected == true) && (buttonsActivated == false)) {
                int duration = Toast.LENGTH_SHORT;
                Toast toast = Toast.makeText(SampleUI.this,"Activating Buttons", duration);
                toast.show();
                activateButtons();
            }
            super.handleMessage(msg);
        }
    }; 
```

这个处理程序正常工作，直到我调用了如下所示的 activateButtons() 方法：

```
public void activateButtons() {
        buttonOne.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                //Code to respond to buttonClick
            }
        });
} 
```

每当我尝试与回调或处理程序之一中的 UI 元素进行交互时，我都会收到 Java NULL 指针异常。我很确定这是我错过的相当简单和基本的东西，但我似乎无法发现问题。如果有人有任何想法，我很想听听你的意见 :) 将 SJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:50:18.133

在类级别而不是内部方法中声明所有 UI 元素：

```
//********** DELCARE ALL UI ELEMETS HERE ******

    Button buttonOne,buttonTwo,buttonThree,buttonFour;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            initButtons(); 
      }

    public void initButtons() {
          buttonOne = (Button) findViewById(R.id.button_one);
          buttonTwo = (Button) findViewById(R.id.button_two);
          buttonThree = (Button) findViewById(R.id.button_three);
          buttonFour = (Button) findViewById(R.id.button_four);
          // your code here...
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:14:59.703

使用以下模式

```
public void initButtons(){      
    Button buttonOne = (Button)findViewById(R.id.button_one);
    Button buttonTwo = (Button)findViewById(R.id.button_two);
    Button buttonThree = (Button)findViewById(R.id.button_three);
    Button buttonFour = (Button)findViewById(R.id.button_four);

    buttonOne.setClickable(false);
    buttonTwo.setClickable(false);
    buttonThree.setClickable(false);
    buttonFour.setClickable(false);

    buttonOne.setEnabled(false);
    buttonTwo.setEnabled(false);
    buttonThree.setEnabled(false);
    buttonFour.setEnabled(false);

    buttonOne.setAlpha(0.5f);
    buttonTwo.setAlpha(0.5f);
    buttonThree.setAlpha(0.5f);
    buttonFour.setAlpha(0.5f);

    buttonOne.setOnClickListener(this);
    buttonTwo.setOnClickListener(this);
    buttonThree.setOnClickListener(this);
    buttonFour.ssetOnClickListener(this);

} 
```

并让您的活动实现 onClickListener 并有一个这样的开关案例

```
 public void onClick(View v){
    switch (v.getId()){
    case R.id.buttonOne :
// to do when clicked
        break;
    case R.id.buttonTwo :

        break;
    default :
        break;
    }
} 
```

并在您的处理程序调用中

```
public void activateButtons() {
     buttonOne.setClickable(true);
   buttonOne.setEnabled(true);
 } 
```

# android - 0 台设备支持 Android 应用

> ID：14020237
> 
> 赞同：46
> 
> 时间：2012-12-24T10:42:02.377
> 
> 标签：android, google-play

我在 Google Play 商店中遇到问题，该商店坚持认为我的应用程序受 0 台设备支持。我已经尝试了在 SO 和其他地方找到的所有解决方案。这与 apk 不活动无关，它被默认激活，我什至尝试停用并重新激活它。

我已经在我的 Galaxy Nexus 上对其进行了测试，它运行良好，没有理由让它与每台 Android 设备不兼容......

这是我的清单文件：

```
<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="17" />

<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="true"
    android:xlargeScreens="true" />

<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
<uses-permission android:name="android.permission.INTERNET" />

<uses-feature
    android:name="android.hardware.accelerometer"
    android:required="true" />
<uses-feature
    android:name="android.hardware.screen.portrait"
    android:required="false" /> 
```

完整的项目源代码可以在这里找到：[https](https://github.com/Nurgak/Android-Bluetooth-Remote-Control) ://github.com/Nurgak/Android-Bluetooth-Remote-Control ，因为它是开源的。

这是我在 Google Play 上看到的。 ![在此处输入图像描述](../Images/30028e7487f775d1c00daa78d4d106a6.png)

5个特点是

```
android.hardware.ACCELEROMETER
android.hardware.BLUETOOTH
android.hardware.CAMERA
android.hardware.camera.AUTOFOCUS
android.hardware.TOUCHSCREEN 
```

和4个权限

```
android.permission.BLUETOOTH
android.permission.BLUETOOTH_ADMIN
android.permission.CAMERA
android.permission.INTERNET 
```

我也对他们的支持感到震惊，我只是笼统地说“嘿，你看过我们的常见问题解答吗？” 回复电子邮件。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2015-03-15T07:41:32.763

当我在应用程序的清单文件中的 uses-feature 标记中声明相机硬件时，我遇到了类似的问题，如下所示：

```
<uses-feature android:name="android.hardware.camera"> 
```

如果您不指定 android:required 属性，则默认为“true”。因此，Google Play 商店将假定除非存在相机硬件，否则该应用程序将无法运行。

一旦您将 android:required 设置为 false，如下所示，Play 商店将接受 APK 并显示可用于该应用程序的设备列表。

```
<uses-feature android:name="android.hardware.camera" android:required="false"/> 
```

您还可以在特征描述符上查找拼写错误。有关支持的功能描述符，请参阅[http://developer.android.com/guide/topics/manifest/uses-feature-element.html#features-reference](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#features-reference)

欲了解更多信息：http: [//developer.android.com/guide/topics/manifest/uses-feature-element.html](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2015-09-23T21:22:23.387

我们最近搬到了 Android Studio（从 Eclipse），我试图上传我的第一个使用 Studio 构建的生产版本，当我上传我的 APK 时，我收到了可怕的“支持的 Android 设备 0”消息。解决方案最终是我们如何包含 apache commons 编解码器库。

检查您的 build.gradle 文件 - 如果您看到类似以下内容：

`compile 'org.apache.directory.studio:org.apache.commons.codec:1.+'`

将其更改为：

`compile 'commons-codec:commons-codec:1.+'`

我的理论是命名空间的“org.apache.directory.studio”部分搞砸了开发者控制台并且使用速记工作正常。

我是怎么发现这个的？好吧，我没有，[他们做到](https://github.com/robot-mitya/rosjava_bootstrap/commit/f9acae776f991374428100f8193c5f3861ca9514)了，我只是很幸运，通过谷歌搜索找到了他们的提交信息。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2018-02-05T17:21:33.693

然后进入**发布管理** ->**设备目录**，然后选择任何不支持的设备以显示其详细信息，您将看到此设备不支持的原因

[![在此处输入图像描述](../Images/a74b98fd317699a2ed6e6d82eae042d5.png)](https://i.stack.imgur.com/ZhTGw.png)

[![在此处输入图像描述](../Images/57fa6e1697c9395fc503a56df1e67807.png)](https://i.stack.imgur.com/lst26.png)

[![在此处输入图像描述](../Images/f6f420b8d4c2e88fa331000dd961965a.png)](https://i.stack.imgur.com/Vl1Iq.png)

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2016-08-04T09:41:08.563

对我来说，问题是清单文件中的这一行：

```
<uses-feature android:name="android.hardware.camera2" /> 
```

我可能会花费相当多的时间来追踪它，但幸运的是，谷歌在开发者控制台中提供了通过聊天与他们联系的能力（由于某种原因，ATMW 不再存在该选项，也许它有上限？）。他们能够在几分钟内查明问题，我不得不将上面的行更改为

```
<uses-feature android:name="android.hardware.camera2" android:required="false" /> 
```

相当节省时间，所以感谢谷歌！

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2015-09-16T11:35:51.980

有时这是因为您引用了第三方库。如果你能找到它是哪一个，如果你能删除它，你就可以解决问题。

在可能的情况下，我不得不删除：

> org.apache.commons.io:2.4

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2012-12-24T10:48:07.280

*   尝试将 apk 名称从更改`com.bluetooth`为`com.nurgak.bluetoothremote`
*   尝试将所有`uses-feature"-tag`s 设置为`false`
*   尝试删除所有权限（我知道如果没有它们，该应用程序将无法运行，但只是为了弄清楚为什么 Google Play 说该应用程序支持 0 个设备）

> `android.hardware.screen.portrait`PS：无论如何，如果您将其设置为，则不需要`false`。在这种情况下它没有效果。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-02-05T16:13:36.103

我有一个类似的问题。我的解决方案是在清单中正确地写下这一行：

```
<uses-feature android:name="android.hardware.sensor.barometer" android:required="true" /> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-01-21T08:57:07.023

尽管回答了这个问题，但进行了一些额外的修改，删除了任何 .jar 依赖项（特别是 common-io.*.jar 依赖项）。解决依赖性问题后，我能够解决该问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-25T10:54:53.293

如果使用 gradle，请确保项目中的所有清单都与 min/max/target sdk 版本对齐。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-13T11:45:21.547

我知道现在回答已经晚了，我面临同样的问题。将所有用户功能设置为`false`后，Play 商店仍显示支持的设备为零。

这是解决方案，希望对某人有所帮助

```
 <uses-feature
            android:glEsVersion="0x00020000"
            android:required="true" /> 
```

还

```
<supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:resizeable="true"
        android:smallScreens="true"
        android:xlargeScreens="true" /> 
```

希望它有所帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-19T20:36:03.923

Mine related to the Zxing barcode scanner features. I chatted with developer support who identified that i had an issue with the `android.hardware.camera.autoFocus` property. Support wasn't sure what I needed to do in order to fix the issue. Using answers above, I added `android:required="false"` in the `manifest` file.

From 0 devices to `Supported Android devices 7,856`

Change from:

```
<!--barcode scan-->
<uses-feature android:name="android.hardware.camera.autoFocus"/>
<uses-feature android:name="android.hardware.camera"/> 
```

to

```
<!--barcode scan-->
<uses-feature android:name="android.hardware.camera.autoFocus" android:required="false"/>
<uses-feature android:name="android.hardware.camera" android:required="false"/> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-06-01T16:41:36.507

我也遇到了 0 个受支持设备的问题，但原因不同。**其中一个库会`lib/README.txt`在生成的 APK 中创建一个文件**。将 APK 上传到 Google Play 控制台后，该`lib/README.txt`文件将被 APK 分析工具拾取，并被视为不受任何设备支持的本机库。

我已通过使用文件中的以下 Gradle 配置从 APK 中删除文件来解决此问题`build.gradle`：

```
android {
    ...

    packagingOptions {
        exclude 'lib/README.txt'
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-06-15T23:09:50.670

我有这个问题。通过删除清单中的所有内容进行修复。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-03-07T09:09:07.860

我发现这个问题是由`AndroidManifest.xml`文件引起的。只需更换

```
<uses-feature android:name="android.hardware.accelerometer" android:required="true"/> 
```

和

```
<uses-feature android:name="android.hardware.sensor.accelerometer" android:required="true"/> 
```

# perl - 为什么 Perl system() 会破坏重定向路径？

> ID：14020240
> 
> 赞同：4
> 
> 时间：2012-12-24T10:42:52.120
> 
> 标签：perl, unicode

我正在使用的 perl 脚本中有以下命令：

```
system ("mycommand /home/tahoar/ไมโคร_tm-อังกฤษ-ไทย/giza.อังกฤษ-ไทย/อังกฤษ-ไทย.A3.final.part*>/home/tahoar/ไมโคร_tm-อังกฤษ-ไทย/giza.อังกฤษ-ไทย/อังกฤษ-ไทย.A3.final") 
```

该命令失败并出现以下错误：

```
sh: cannot create /home/tahoar/ไมโคร_tm-อัง��ฤษ-ไทย/giza.อัง��ฤษ-ไทย/อัง��ฤษ-ไทย.A3.final: Directory nonexistent 
```

我的故障排除已确定永远不会执行“mycommand”。各种其他命令（mycommand1、mycommand2 等）也会发生这种情况。命令字符串是 UTF-8。预期的输出路径已经存在。我已将 LC_ALL=C 设置为其他目的。相同的命令在路径中使用拉丁字符正确运行。

为什么重定向的输出路径被破坏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:09:53.477

我完全尝试了上面的命令。如果目录丢失，我会得到完全相同的错误。在对应的 mkdir 之后，一切似乎都很好。

该命令在您的情况下没有运行，因为 perl 启动了一个 sh ，它首先尝试设置您的重定向，然后启动连接到准备好的重定向的命令。- 在您的情况下， sh 无法准备重定向，因此无法启动实际命令。

正如您所说的“输出路径已经存在”，但 perl 说“目录不存在”，您似乎都在谈论不同的路径。

尝试从 perl 中 mkdir 或 ls 输出路径。然后你应该能够看到发生了什么。

# haskell - 如何在 Haskell 中编写一个参数和结果都是多态的函数

> ID：14020242
> 
> 赞同：2
> 
> 时间：2012-12-24T10:42:57.643
> 
> 标签：haskell, parameters, polymorphism, typeclass

我怎样才能编写一个类似`int gog(float i)`and的函数`float gog(int i)`（通常称为“重载”）？一些简单的重载可以通过

```
class PP a where
  gog :: a -> Int

instance PP Bool where
  gog _ = 1

instance PP Char where
  gog _ = 1 
```

但是上面的例子只是使参数多态。如果我们想让参数和结果都多态，我们必须这样写：

```
class PP a where
  gog :: Uu b => a -> b

class UU a where
  -- This function can convert between different types of UU.
  fromUuToUu :: UU b => a -> b 
```

没有`fromUuToUu`，结果中的多态性`gog`是不可能的。但我不会写`fromUuToUu`，这与这个问题的主题有关，即如何制作一个参数和结果都是多态的函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T11:14:45.350

```
{-# LANGUAGE MultiParamTypeClasses, TypeSynonymInstances, FlexibleInstances #-}

class Poly a b where
  gog :: a -> b

instance Poly Int String where
  gog = show

instance Poly String Int where
  gog = read

instance Poly Int Float where
  gog = fromIntegral

instance Poly Float Float where
  gog = (*) 2 
```

`gog`现在是“完全”多态的。

# java - SwingWorker 问题

> ID：14020248
> 
> 赞同：1
> 
> 时间：2012-12-24T10:43:32.827
> 
> 标签：java, multithreading, user-interface, try-catch, event-dispatch-thread

我正在尝试使用 java 中的 GUI 制作基于文本的游戏，我需要使用 SwingWorker。但是我不理解任何教程，这对我来说没有意义:(。

```
public void write(String msg){
    int i=0;
    while(true){
        try {
            Thread.sleep(300);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        console.setText(console.getText()+ msg.charAt(i));
        if(i==msg.length()){
            console.setText(console.getText()+ newline);
            break;
        }
    }
} 
```

本质上，我要做的是将一个字符串传递给一个方法并逐个字符地打印出来，但是我不能，因为 sleep() 会中断 EDT 并将 GUI 锁定为 msg.length()*400ms :(。

如果有人有使用 SwingWorker 的代码解决方案，我将不胜感激 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:03:44.383

您可以简单地尝试一下，以了解如何将 swingworker 与一些字符串一起使用：

```
public void runInBackgroud(final String msg)
{
    SwingWorker<Object, Object> task = new SwingWorker<Object, Object> ( )
    {
        public Object doInBackground()
        {
            write(msg);
            return null;
        }
        public void done()
        {}
    };
    task.execute ( );
} 
```

只需调用此方法`runInBackgroud(msg);`

# windows - Azure 上的托管电子邮件

> ID：14020256
> 
> 赞同：4
> 
> 时间：2012-12-24T10:44:14.057
> 
> 标签：windows, email, azure, hosting

我正在考虑将我的网站移动到 Azure 免费网站。问题是我希望我的网站托管在“mydomain.com”上，并且还可以使用“someone@mydomain.com”之类的电子邮件。

由于我必须将我的 DNS 定位到 Azure 服务器，我如何才能接收我的电子邮件？在 Azure 上可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T16:51:28.820

正如您会看到评论回复一样，您需要拥有一个 VM 并在其上安装邮件服务器。这里要注意的一点是，您不能将自定义域名附加到 Azure 网站，我怀疑您可以将 Azure 网站设置为邮件服务器。

另一种方法是使用 SendGrid 服务。Azure 和 SendGrid 已建立合作伙伴关系。还有一个免费增值版本。查看[SendGrid-Windows Azure](http://sendgrid.com/windowsazure.html)，[如何使用 SendGrid 和 Windows Azure 发送电子邮件](http://www.windowsazure.com/en-us/develop/net/how-to-guides/sendgrid-email-service/)，[来宾帖子：Windows Azure 上的 SendGrid 入门](http://blogs.msdn.com/b/windowsazure/archive/2012/09/10/guest-post-getting-started-with-sendgrid-on-windows-azure.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T20:27:55.343

首先，正如 viperguynaz 所说，您不能将自定义域和免费的 Azure 网站结合起来。您需要将您的免费 Azure 网站升级到共享网站模式

其次，仅仅因为您将网站及其域迁移到 Azure，并不意味着您应该将电子邮件迁移到 Azure。请记住，对于域，您不需要将 mydomain.com 下的所有子域一起移动。无论您现在在哪里，您都可以继续托管 mail.mydomain.com。如果您需要免费/便宜的电子邮件提供商 - 随时使用 Gmail 商务版、Office365 或联系任何 ISP 以获取自定义域邮箱。那些很便宜而且很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T14:24:59.430

我现在明白了。巴西的 DNS 机构 (registro.br) 不允许我创建 DNS 记录，所以我完全不知道它们的存在。我需要做的就是将一台服务器的 MX 寄存器和 A/CNAME 指向 azure。无论如何，谢谢你的时间。

# c# - SQL Server 2008 R2 Express：用户登录失败

> ID：14020257
> 
> 赞同：1
> 
> 时间：2012-12-24T10:44:14.760
> 
> 标签：c#, sql-server-2008r2-express

`MyDB`我在 C#2010 中有一个应用程序，在 SQL Server 2008 R2 Express 中有一个数据库，在我开发应用程序的工作 PC 上连接到我的数据库没有任何问题。但是当我尝试在另一台 PC 上安装它时，并像这样配置我的服务器后：

```
USE [master] 
GO 

CREATE LOGIN [User1] WITH PASSWORD=N'Pass', DEFAULT_DATABASE=[master], CHECK_EXPIRATION=OFF, CHECK_POLICY=ON 
GO 

EXEC master..sp_addsrvrolemember @loginame = N'User1', @rolename = N'sysadmin' 
GO 

EXEC xp_instance_regwrite N'HKEY_LOCAL_MACHINE', N'Software\Microsoft\MSSQLServer\MSSQLServer', N'LoginMode', REG_DWORD, 2 
GO

RESTORE DATABASE [MyDB] FROM DISK = N'pathtoMyDB\MyDB.bak' WITH FILE = 1,
NOUNLOAD, STATS = 10 
GO 
```

我运行应用程序，这是我的问题：当我尝试连接到 MyDB 时，我收到以下消息：

> *用户 'WIN-ELKPAS5MS2O\User1' 登录失败。原因：无法打开明确指定的数据库。[客户： ]*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:48:33.660

您已经创建了一个**登录名**——这很好，但那是在**服务器**（实例）级别。登录名赋予此帐户/用户连接服务器的权限——不过，这只是第 1 步。

现在您正在恢复一个数据库——但您并没有在该数据库中创建与您刚刚创建的登录名相对应的**用户。**

所以在 之后`RESTORE DATABASE`，你还需要：

```
USE MyDB
GO

CREATE USER User1 FOR LOGIN User1;
GO 
```

**现在**，您在新恢复的数据库中有一个与该登录名对应的用户 - 现在，希望您的应用程序能够正常工作。

# perl - 渲染 RadioGroup 元素

> ID：14020267
> 
> 赞同：2
> 
> 时间：2012-12-24T10:45:02.140
> 
> 标签：perl, catalyst

我在这里使用 HTML::FormHanlder。我正在尝试通过渲染单选按钮（[使用此方法](https://metacpan.org/module/GSHANK/HTML-FormHandler-0.40017/lib/HTML/FormHandler/Manual/Rendering.pod#Rendering-labels)）获得不同的输出。字段声明如下：

```
has_field 'xxx' => ( type => 'Select', widget => 'RadioGroup', build_label_method => \&build_label );

  sub build_label {
    my $self = shift;
    return $self->name;
} 
```

问题是，唯一`<label>`的是在元素分组标题中：

`<label for="xxx">Lorem ipsum</label>`,

所以它改变了这一点。

单选按钮保持不变`<input type="radio" name="xxx" id="xxx" value="2"/> I'm not changed`

所以很自然地我想知道如何更改自动呈现的“我没有改变”（在这种情况下）文本之后`<input/>`

这是一个更清楚的例子：

```
<label for="0.xxx">This is the only part that gets changed with sub build_label</label>
<label class="radio" for="0.xxx.0">
    <input type="radio" name="0.xxx" id="0.xxx.0" value="2"/>
    How to change rendering method of this part?
</label>
<label class="radio" for="0.xxx.1">
<input type="radio" name="0.xxx" id="0.xxx.1" value="1"/>
    And this one?
</label> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T03:18:21.467

解决方案取决于您为什么要更改无线电组选项的标签。如果您查看 HTML::FormHandler::Widget::Field::RadioGroup 中的代码，您可以了解该字段是如何呈现的。

通常你会用你想要的标签来构造选项列表。您可以在该字段上提供 options_method：

```
has_field 'xxx' => ( type => 'Select', widget => 'RadioGroup', options_method => \&build_xxx_options );
sub build_xxx_options {
    my $self = shift; # $self is the field
    <build and return options with desired labels>;
} 
```

如果您想本地化标签，如果您为 maketext 提供合适的翻译文件，这将自动发生。即使您不想本地化字符串，您也可以利用标签已本地化的事实（我的 $label = $self->_localize($option_label);）并为该字段提供本地化方法，通过将“localize_meth”设置为方法引用：

```
has_field 'xxx' => ( type => 'Select', widget => 'RadioGroup', localize_meth => \&fix_label );
sub fix_label {
    my ( $self, $label ) = @_; # $self is the field
    if ( $label eq '...' ) {
        return '....';
    }
    return $label;
} 
```

# c# - 总是在方法的开头取消所有参数是一个好习惯吗

> ID：14020268
> 
> 赞同：3
> 
> 时间：2012-12-24T10:45:02.980
> 
> 标签：c#, .net, visual-studio, design-patterns

我 - 有时 - 使用 out 参数，方法有时很复杂，并且包含循环和条件块，在大多数情况下编译器会给我这个错误

> “必须在控制离开当前方法之前分配输出参数‘xxx’”

所以，我发现我自己总是以取消所有参数来启动方法，我需要知道，这是一个好习惯吗？

*** 编辑 ***

我的意思是用“Nullify”这个词分配默认值！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T10:57:08.067

我不会，因为不初始化它们会提示您在所有代码分支中设置**适当**的值（作为编译器错误），而不是忘记并留下 null/etc。但是，如果您有多个代码路径，并且其中一个都使用相同的默认值（如`TryGet`/`TryParse`方法），那么在开始时分配默认值可能是实用的，因此只有一个其他分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T10:53:37.180

取决于您应用于`null`参数的含义。

通常`null`表示未定义的未知值，由于某些错误而无法检索。当您`null`在其中一个参数中遇到值时，通常不是正常的程序流程。

因此，最好定义一组统一的默认值，其含义将为`ready to be filled`，并在发生意外情况时将其无效。

当然，所有这些都取决于项目以及编码和命名的当前标准

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T10:50:17.597

就个人而言，我可能会返回一个类而不是使用 Out 参数。它们在“TryParse”情况下很棒，但我认为如果过度使用它们会很混乱。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T10:51:22.187

您肯定需要确保在方法流程中设置了 out 参数。这是编译器所要求的，这是不可协商的:)

一种方法是在开始时将其设置为默认值，这样就可以了。但是，它可以掩盖方法流程未设置 out 参数的任何问题，并且应该设置。

所以，最好在足够多的单元测试中使用你的方法，这样你就可以确定代码无论哪种方式都可以工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T10:55:21.157

如果您知道它们将填充一些有意义的数据，那么我不会费心将它们归零，但如果它们在条件表达式中获得分配值，那么在方法开始时将它们归零可能很好。但是，设置默认值可能是更好的选择。我还尝试尽可能少地使用参数，我发现通常当你需要它们时，你在某个地方犯了设计错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-24T11:11:13.347

`loop`如果你在某些或条件下赋值，`If`那么它总是比`initialize`一`out parameters`开始更好，否则它没有必要....`but for good practice we should always assign the value at the beginning`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-24T10:57:41.110

我们来看这段代码；

```
public void Get(out int Id_1, out int Id_2)
{
    if ( )
    {
        Id_1 = Value1;
        Id_2 = Value2;
    }
} 
```

我们在 if 语句中进行赋值`Id_1`，`Id_2`编译器无法确定它是否会在运行时被赋值。`if`我们应该在语句之前分配这个变量的一些默认值。在我看来，这是一个很好的做法。

```
public void Get(out int Id_1, out int Id_2)
{
    Id_1 = 0;
    Id_2 = 0;

    if ( )
    {
        Id_1 = Value1;
        Id_2 = Value2;
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-24T10:58:37.070

为什么不考虑`Tuple <T>` 类而不是大量的输出参数......

# android - 我们什么时候必须从 Facebook SDK for android 3.0.2Beta 迁移到 3.0？

> ID：14020270
> 
> 赞同：0
> 
> 时间：2012-12-24T10:45:12.200
> 
> 标签：android, facebook, facebook-android-sdk

我目前有一个使用 Facebook SDK 3.0.2b 的 Android 应用程序，我想知道：我还能使用这个 facebook SDK 多久？

基本上，我有两个问题：

1.  Beta SDK 是否有到期日期？是什么时候？
2.  当测试版过期时：我的应用程序会停止运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T00:52:16.150

> Beta SDK 是否有到期日期？是什么时候？

SDK 没有停止工作的硬性到期日期。

> 当测试版过期时：我的应用程序会停止运行吗？

没有过期，但不再支持 beta SDK。这意味着，如果服务器端发生更改或任何其他可能破坏 beta SDK 的内容，我们将不会修复它。

我建议更新以使用官方 3.0 SDK，只需要进行一些更改，可以在[此处阅读](https://developers.facebook.com/docs/tutorials/androidsdk/3.0/upgrading-from-3.0.2.b-to-3.0/)。

# php - 使用 YouTube API 对具有最高数字的 viewCount 进行排序？

> ID：14020277
> 
> 赞同：1
> 
> 时间：2012-12-24T10:45:51.313
> 
> 标签：php, sorting, youtube

我正在尝试显示来自 YouTube 的多个视频，并且我正在使用 YouTube API 提取信息。

除了我想对 viewCount 视频的观看进行排序之外，我一切正常。

我可以简单地将其转换为数据库系统，但随后我必须运行一个 cron 作业（这不是问题，只是试图避免额外需要运行比需要更多的代码。）

```
 $video = array(
        "id1",
        "id2",
        "id3",
    );

    foreach ($video as $key) {
        $api = "http://gdata.youtube.com/feeds/api/videos/$key?v=2&alt=json";

        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $api);
        curl_setopt($ch, CURLOPT_ENCODING, "");
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10);
        curl_setopt($ch, CURLOPT_TIMEOUT, 10);
        $yt = json_decode(curl_exec($ch));
        curl_close($ch);

        $title       = $yt->{'entry'}->{'title'}->{'$t'};
        $viewCount   = $yt->{'entry'}->{'yt$statistics'}->{'viewCount'};
        $length      = $yt->{'entry'}->{'media$group'}->{'yt$duration'}->{'seconds'};
        $numDislikes = $yt->{'entry'}->{'yt$rating'}->{'numDislikes'};
        $numLikes    = $yt->{'entry'}->{'yt$rating'}->{'numLikes'};
        $average     = $yt->{'entry'}->{'gd$rating'}->{'average'};
        $minutes     = sprintf("%0.2f", $length / 60);
        $seconds     = str_replace(".", ":", $minutes);

//What I've tried, doesn't work. With and without if statement and max (Shouldn't need both, but I need the if statement to display one format of the number is higher) but too avail it hasn't successfully worked.

        $views = 0;
        foreach ($viewCount as $maxViews) {
            $views = max($views,$maxViews);
            if ($maxViews > $views) {
                echo $views;
            } else {
                echo $viewCount;
            }
        }
     } 
```

这应该很简单，显然完全可以查看它，认为这是因为数组值不是数字，数字是从 $viewCount 变量的每个 foreach 循环中提取的。

希望有人可以帮助我并正确解决此问题。

注意：我自己编写了代码，但由于它是 YouTube API，您可以自己使用代码。JSON 解析有时会很痛苦。特别是使用 YouTube 的 API。

问候

# windows-phone-7 - 与模拟器中的 Internet Explorer 相比，Web 浏览器中的页面看起来不同

> ID：14020279
> 
> 赞同：1
> 
> 时间：2012-12-24T10:45:56.523
> 
> 标签：windows-phone-7, webbrowser-control

我正在我的应用程序的 Windows Phone Web 浏览器控件中加载登录页面（网页）。单击登录按钮时，会出现一个弹出窗口，并将覆盖设置（css/jquery）设置为背景，以便无法访问其他按钮。现在的问题是当我单击登录按钮时，会出现弹出窗口并且背景变为黑色（启用了javascript）。此外，在 Windows Phone 模拟器的 Internet Explorer 中，同一页面也可以正常加载。

我是一名 Windows Phone 开发人员，我对脚本语言不太了解。请给我建议。

我正在加载网页

```
 {
 Initializecomponent();
 webBrowser1.Loaded += WebBrowser_OnLoaded;
}
       private void WebBrowser_OnLoaded(object sender, RoutedEventArgs e)
    {         
  webBrowser1.IsScriptEnabled = true;
                Modules.Userloginurl = Modules.Userloginurl + Modules.deviceId +   "&platform=phone7&market_id=";
                webBrowser1.Source = new  Uri("http://demo.rifluxyss.com/T3/pawebsite/index.php?deviceid=1&platform=iphone&market_id=CA", UriKind.Absolute);
} 
```

# ubuntu - 如何安装或配置 activemq admin cosole(jetty) 使用 apt-get 命令？

> ID：14020283
> 
> 赞同：4
> 
> 时间：2012-12-24T10:46:21.080
> 
> 标签：ubuntu, jetty, activemq

我有一台 Ubuntu 机器 12.04 版本。

我使用以下命令安装`activemq`：

```
#sudo apt-get install activemq 
```

默认情况下，apt-get 仅`activemq 5.5`在端口 61616 上安装核心服务。

现在我想要端口 8161 上的码头管理控制台。

我试图复制`jetty.xml`到`/etc/activemq/instances-available/main/` 并将导入添加到`activemq.xml`.

然后当我`activemq`在控制台模式下运行时出现以下错误

```
ERROR: java.lang.Exception: org.springframework.beans.factory.BeanDefinitionStoreException: Failed to load type: org.eclipse.jetty.security.HashLoginService. Reason: java.lang.ClassNotFoundException: org.eclipse.jetty.security.HashLoginService; nested exception is java.lang.ClassNotFoundException: org.eclipse.jetty.security.HashLoginService
java.lang.Exception: org.springframework.beans.factory.BeanDefinitionStoreException: Failed to load type: org.eclipse.jetty.security.HashLoginService. Reason: java.lang.ClassNotFoundException: org.eclipse.jetty.security.HashLoginService; nested exception is java.lang.ClassNotFoundException: org.eclipse.jetty.security.HashLoginService
    at org.apache.activemq.console.command.StartCommand.runTask(StartCommand.java:99)
    at org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)
    at org.apache.activemq.console.command.ShellCommand.runTask(ShellCommand.java:143)
    at org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)
    at org.apache.activemq.console.command.ShellCommand.main(ShellCommand.java:85)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.activemq.console.Main.runTaskClass(Main.java:251)
    at org.apache.activemq.console.Main.main(Main.java:107)
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Failed to load type: org.eclipse.jetty.security.HashLoginService. Reason: java.lang.ClassNotFoundException: org.eclipse.jetty.security.HashLoginService; nested exception is java.lang.ClassNotFoundException: org.eclipse.jetty.security.HashLoginService
    at org.apache.xbean.spring.context.v2c.XBeanQNameHelper.getBeanInfo(XBeanQNameHelper.java:75)
    at org.apache.xbean.spring.context.v2c.XBeanQNameHelper.coerceNamespaceAwarePropertyValues(XBeanQNameHelper.java:54)
    at org.apache.xbean.spring.context.v2c.XBeanBeanDefinitionParserDelegate.parseBeanDefinitionElement(XBeanBeanDefinitionParserDelegate.java:59)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseBeanDefinitionElement(BeanDefinitionParserDelegate.java:396)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseBeanDefinitionElement(BeanDefinitionParserDelegate.java:365)
    at org.apache.xbean.spring.context.v2.XBeanBeanDefinitionDocumentReader.processBeanDefinition(XBeanBeanDefinitionDocumentReader.java:174)
    at org.apache.xbean.spring.context.v2.XBeanBeanDefinitionDocumentReader.parseDefaultElement(XBeanBeanDefinitionDocumentReader.java:101)
    at org.apache.xbean.spring.context.v2.XBeanBeanDefinitionDocumentReader.parseBeanDefinitions(XBeanBeanDefinitionDocumentReader.java:81)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.apache.xbean.spring.context.v2.XBeanXmlBeanDefinitionReader.registerBeanDefinitions(XBeanXmlBeanDefinitionReader.java:79)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.apache.xbean.spring.context.v2.XBeanBeanDefinitionDocumentReader.importBeanDefinitionResource(XBeanBeanDefinitionDocumentReader.java:129)
    at org.apache.xbean.spring.context.v2.XBeanBeanDefinitionDocumentReader.parseDefaultElement(XBeanBeanDefinitionDocumentReader.java:95)
    at org.apache.xbean.spring.context.v2.XBeanBeanDefinitionDocumentReader.parseBeanDefinitions(XBeanBeanDefinitionDocumentReader.java:81)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.apache.xbean.spring.context.v2.XBeanXmlBeanDefinitionReader.registerBeanDefinitions(XBeanXmlBeanDefinitionReader.java:79)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.apache.xbean.spring.context.ResourceXmlApplicationContext.loadBeanDefinitions(ResourceXmlApplicationContext.java:111)
    at org.apache.xbean.spring.context.ResourceXmlApplicationContext.loadBeanDefinitions(ResourceXmlApplicationContext.java:104)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
    at org.apache.xbean.spring.context.ResourceXmlApplicationContext.<init>(ResourceXmlApplicationContext.java:64)
    at org.apache.xbean.spring.context.ResourceXmlApplicationContext.<init>(ResourceXmlApplicationContext.java:52)
    at org.apache.activemq.xbean.XBeanBrokerFactory$1.<init>(XBeanBrokerFactory.java:114)
    at org.apache.activemq.xbean.XBeanBrokerFactory.createApplicationContext(XBeanBrokerFactory.java:114)
    at org.apache.activemq.xbean.XBeanBrokerFactory.createBroker(XBeanBrokerFactory.java:70)
    at org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:71)
    at org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:54)
    at org.apache.activemq.console.command.StartCommand.startBroker(StartCommand.java:115)
    at org.apache.activemq.console.command.StartCommand.runTask(StartCommand.java:91)
    ... 10 more
Caused by: java.lang.ClassNotFoundException: org.eclipse.jetty.security.HashLoginService
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at org.apache.xbean.spring.context.v2c.XBeanQNameHelper.loadClass(XBeanQNameHelper.java:107)
    at org.apache.xbean.spring.context.v2c.XBeanQNameHelper.getBeanInfo(XBeanQNameHelper.java:72)
    ... 46 more 
```

如何解决这个问题？谢谢先进。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-13T16:22:36.313

目前 Debian/Ubuntu ActiveMQ 软件包是“不完整的”。

摘自*/usr/share/doc/libactivemq-java/README.Debian*：

> 禁用的功能
> 这个包不包含（还）上游提供的所有功能，因为 Debian 缺少一些依赖项。有关禁用模块的列表，您可以查看 /usr/share/doc/libactivemq-java/README.Debian

但是*/usr/share/doc/libactivemq-java/README.Debian*中没有禁用模块的列表。

要解决这些问题，请从以下网址下载 ActiveMQ 5.6 二进制 tar 存档：[http](http://activemq.apache.org/download.html) ://activemq.apache.org/download.html 。

提取 tar 存档并将缺少的库/文件/目录复制到：**/usr/share/activemq/**。

例如：

```
cd /tmp
wget http://apache.proserve.nl/activemq/apache-activemq/5.6.0/apache-activemq-5.6.0-bin.tar.gz
tar zxvf apache-activemq-5.6.0-bin.tar.gz
cd apache-activemq-5.6.0/lib
rm activemq-console-5.6.0.jar activemq-core-5.6.0.jar activemq-jaas-5.6.0.jar activemq-protobuf-1.1.jar activemq-rar.txt kahadb-5.6.0.jar slf4j-api-1.6.4.jar jcl-over-slf4j-1.6.4.jar
cd -
sudo cp -r apache-activemq-5.6.0/lib/* /usr/share/activemq/lib
sudo cp -r apache-activemq-5.6.0/webapps /usr/share/activemq 
```

启用 ActiveMQ Jetty 配置并重新启动 ActiveMQ：

```
sudo service activemq restart 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:21:28.333

您需要添加额外的 JAR 文件（例如 jetty jars）。究竟是哪个，我不知道（它可能会因版本而异，而且你会弄得一团糟，让安装保持最新状态）。

我真的更喜欢下载发行版并解压缩它。这样你就有了一个更新鲜的版本以及控制台等。如果需要，设置为自动启动服务非常简单。我在实时环境（即 ubuntu）中使用了这种方法。

如果您想使用该软件包，我建议坚持使用其中的内容并使用其他工具（如 HermesJMS）并连接到它以进行管理/测试。

# c# - Protobuf-net 与官方 google Protobuf for C++ 不兼容（消息编码）

> ID：14020284
> 
> 赞同：8
> 
> 时间：2012-12-24T10:46:26.773
> 
> 标签：c#, c++, .net, protocol-buffers, protobuf-net

我们在 .NET 中有一些（很多）类。我们使用[protobuf-net对其进行标记，并通过](http://code.google.com/p/protobuf-net/)[google original library](https://code.google.com/p/protobuf/)为 C++ 代码端生成 .proto 包装器。

所以我有一条消息（C++ DebugString() 在一些 EventBase 类上（在 .NET 中`EventCharacterMoved` 继承`EventBase`，而在 C++ 中我只是写入可选属性））：

```
UserId: -2792
EventCharacterMoved {
  Coordinates {
    Position {
      X: 196.41913
      Y: 130
      Z: 213
    }
    Rotation {
      X: 207
      Y: 130
      Z: 213
    }
  }
  OldCoordinates {
    Position {
      X: 196.41913
      Y: 130
      Z: 213
    }
    Rotation {
      X: 207
      Y: 130
      Z: 213
    }
  }
} 
```

（来自这样的 .proto 文件）

```
message Coordinates {
   optional TreeFloat Position = 1;
   optional TreeFloat Rotation = 2;
}
message EventBase {
   optional int32 UserId = 10 [default = 0];
   // the following represent sub-types; at most 1 should have a value
   optional EventCharacterMoved EventCharacterMoved = 15;
}
message EventCharacterMoved {
   optional Coordinates Coordinates = 100;
   optional Coordinates OldCoordinates = 101;
}
message TreeFloat {
   optional float X = 1 [default = 0];
   optional float Y = 2 [default = 0];
   optional float Z = 3 [default = 0];
} 
```

在 C++ 中，我发送这个，我们从 .NET 发送相同的消息内容。

C++ 代码可以解析 C++ 编码的消息以及 .NET 编码的消息。.NET 代码只能解析 .NET 消息。

通过网络，我们得到 87 个字节（与[.Net 文件](https://docs.google.com/open?id=0B-HzAcJborshRlhFVE5Sd2VxbzA)和[C++ 文件](https://docs.google.com/open?id=0B-HzAcJborshY0tIVDhOc3hnaTQ)大小相同），但内容不同：

![在此处输入图像描述](../Images/c05987562de6f22bcf2d180afbb5ac4f.png)

如您所见，它相似但不一样。由于这种差异，**CPP 代码可以读取 .NET C# 消息，而 .NET 无法读取 CPP 消息**。

在反序列化的代码中，我们得到：

> TestProto.exe 中发生了“System.InvalidCastException”类型的未处理异常
> 
> 附加信息：无法将“TestProto.EventBase”类型的对象转换为“TestProto.EventCharacterMoved”类型。

在如下代码中：

```
using (var inputStream = File.Open(@"./cpp_in.bin", FileMode.Open, FileAccess.Read)) {
    var ecm = Serializer.Deserialize<EventCharacterMoved>(inputStream);
} 
```

[让我们看一下（如jpa](https://stackoverflow.com/users/914716/jpa)在他的评论中提到的）`protoc --decode_raw`选项：

![在此处输入图像描述](../Images/8c70687fde1c1334b1311150548a7067.png)

这可能与我的 CPP 包装器使用最新的 google protobuf 版本有关，而 protobuf-net 可能使用一些较旧的编码格式或类似的东西......

所以我想知道如何让 .NET protobuf 读取 C++ 消息（让 tham 能够解码相同的东西）？

或者至少如何使原始谷歌 protobuf 以与 .NET protobuf 相同的方式编码？

对于那些真正感兴趣并希望[通过简化示例进入压缩包的人（包括 C++ 和 C# 代码的 VS 2010 解决方案）](https://docs.google.com/open?id=0B-HzAcJborshOXBzZVZQa2ZnRzA)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T07:52:29.070

编辑; 这应该在 r616 及更高版本中修复。

* * *

我终于有机会看看这个（为延迟道歉，但社会季节性假期需求介入了）。我明白现在发生了什么。

基本上，数据理论上是一致的；这实际上归结为字段排序。从技术上讲，字段通常按升序编写，但可以按任何顺序编写。关于 protobuf-net；对于不涉及继承的类型，无论顺序如何，它都可以正常工作。protobuf 规范没有定义继承，因此 protobuf-net 在规范中添加了对继承的支持（由于不断的需求*）*。*作为一个实现特性，它首先*写入子类信息（即字段15，子类型，在字段10之前写入）。目前，在反序列化期间，它还*期望*首先是子类型信息。这很少对任何人产生影响，因为由于 protobuf-net 是唯一使用这种继承的实现，因此继承特性的使用大多只在 protobuf-net 到 protobuf-net 的使用中出现。

在您的情况下，您正在使用 .proto 与 CPP 互操作；这意味着 CPP 代码将能够消费到 protobuf-net 数据，但它可能有一个相反的类型转换异常（基本上，它在获得第一个数据字段时开始构造具体类型）。

尽管很少成为问题，但这是需要解决的问题。我可以试着在今天晚些时候或明天看看这个。

选项：

*   确保子类型字段始终低于任何数据字段
*   如果您知道它需要子类型，请使用 Merge API 并传入所需类型的现有新对象 - 这将正确填充现有对象
*   ~~等待一两天（希望如此！）~~使用 build r616 或更高版本进行正确修复
*   使用互操作时避免继承（和其他特定于实现的功能）
    *   *请注意，您可以通过封装在没有*继承的情况下对相同的数据进行建模- 它会很愉快地工作；特别是具体类型的创建是这里的问题
*   在从 CPP 站点构建数据时，通过将其分为两部分来编写不合理的长度（意思是：我不认为这是一个实际的解决方案）：
    *   **先**`EventBase`用数据写一个，然后序列化；现在在一个单独的模型中只写一个数据，**然后**序列化；这将模拟按所需顺序编写它们（protobuf 流是可附加的） - 不漂亮**`EventCharacterMoved``EventBase`**`TreeFloat`****

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T22:29:48.370

[这看起来与http://code.google.com/p/protobuf-net/issues/detail?id=299](http://code.google.com/p/protobuf-net/issues/detail?id=299)和[http://code.google.com/p/protobuf-net/issues](http://code.google.com/p/protobuf-net/issues/detail?id=331)中提到的问题非常相似[/detail?id=331](http://code.google.com/p/protobuf-net/issues/detail?id=331)据称已由[http://code.google.com/p/protobuf-net/source/detail?r=595修复](http://code.google.com/p/protobuf-net/source/detail?r=595)

您使用的 .NET protobuf 版本是否足够新以包含该修复程序？****

# c# - 如何在 C# 中将 WindowsInstaller.Record 转换为 System.Data.Dataset 或数据表（在读取 MSI 文件时）

> ID：14020285
> 
> 赞同：1
> 
> 时间：2012-12-24T10:46:28.077
> 
> 标签：c#, datatable, dataset, windows-installer

我想读取 MSI 文件（Windows 安装程序包）。我编写了一个如下函数，它接受两个输入参数：msifileName 和表名，并返回一个数据表，它是 MSI 表之一。

```
public DataTable ReadMsiPropertyTable(string msiFile, string tableName)
    {            
        Type installerType = Type.GetTypeFromProgID("WindowsInstaller.Installer");

        WindowsInstaller.Installer installer = (WindowsInstaller.Installer)Activator.CreateInstance(installerType);

        Database database = installer.OpenDatabase(msiFile, 0);

        string sqlQuery = String.Format("SELECT * FROM {0}",tableName);

        View view = database.OpenView(sqlQuery);

        view.Execute(null);

        Record record = view.Fetch();

        DataTable msiPropertyTable = new DataTable();

        msiPropertyTable.Columns.Add("Column1", typeof(string));
        msiPropertyTable.Columns.Add("Column2", typeof(string));
        msiPropertyTable.Columns.Add("Column3", typeof(string));
        msiPropertyTable.Columns.Add("Column4", typeof(string));

        while (record != null)
        {
            int fieldCount;
            fieldCount = record.FieldCount;

            msiPropertyTable.Rows.Add(record.get_StringData(0), record.get_StringData(1), record.get_StringData(2), record.get_StringData(3));                
            record = view.Fetch();
        }
        return msiPropertyTable;
    } 
```

使用上面的代码片段，Record 的行数和列数是未知的。所以我静态地只返回四列。我想返回 MSI 表中记录的所有行和列。

所以请让我知道如何将视图或记录的输出转换为数据集，然后绑定到数据表。或者有没有其他方法可以返回所有的行和列。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T15:22:03.310

我建议您使用部署工具基础（与 MSI 包一起使用的 API 库，与 WiX 工具集一起）来完成此任务。该 API 方便且直接。

例如，有一个类`Database`。您可以通过向构造函数提供 MSI 包的路径来创建它：

```
var db = new Database("path\to\MSI"); 
```

它提供有关 MSI 数据库的任何信息。例如，`db.Tables["TableName"]`返回一个`TableInfo`类的实例，该实例又包含有关列、行、主键等的信息。

下载并安装[WiX 工具集](http://wixtoolset.org)`DTF.chm`，并从帮助文件中获取更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T22:13:07.970

这是使用互操作类型而不是 DTF 类型的类似逻辑。正如你所看到的，它还有很多工作要做。由于涉及 COM 而不是 P/Invoke，因此它也更加脆弱。此外，如果您可以消除创建 ADO.NET 数据表的要求，则 DTF 支持 LINQ 查询和数据绑定。换句话说，我写这个只是为了好玩。我*永远不会*在实际代码中使用这种方法。

```
 public static DataTable ReadMsiPropertyTable(string msiFile, string tableName)
        {
            DataTable dataTable = new DataTable(tableName);
            Type installerType = Type.GetTypeFromProgID("WindowsInstaller.Installer");
            Installer installer = (WindowsInstaller.Installer)Activator.CreateInstance(installerType);
            Database database = installer.OpenDatabase(msiFile, MsiOpenDatabaseMode.msiOpenDatabaseModeReadOnly);

            string sqlQuery = String.Format("SELECT * FROM {0}", tableName);
            View view = database.OpenView(sqlQuery);
            view.Execute(null);

            Record names = view.ColumnInfo[MsiColumnInfo.msiColumnInfoNames];
            Record types = view.ColumnInfo[MsiColumnInfo.msiColumnInfoTypes];
            Record row = view.Fetch();

            for (int index = 1; index < names.FieldCount+1; index++)
            {
                string columnName = names.get_StringData(index);
                string columnSpec = types.get_StringData(index);

                switch (columnSpec.Substring(0, 1).ToLower())
                {
                    case "s":
                        dataTable.Columns.Add(columnName, typeof(String));
                        break;

                    case "l":
                        dataTable.Columns.Add(columnName, typeof(String));
                        break;

                    case "i":
                        dataTable.Columns.Add(columnName, typeof(Int32));
                        break;

                    case "v":
                        dataTable.Columns.Add(columnName, typeof (Stream));
                        break;
                }
            }

            while (row != null)
            {
                DataRow dataRow = dataTable.NewRow();
                for (int index = 0; index < dataTable.Columns.Count; index++)
                {

                    if(dataTable.Columns[index].DataType == typeof(String))
                    {
                        dataRow[index] = row.StringData[index + 1];
                    }
                    else if(dataTable.Columns[index].DataType == typeof(Int32))
                    {
                        dataRow[index] = row.IntegerData[index + 1];
                    }
                    else if(dataTable.Columns[index].DataType == typeof(Stream))
                    {
                       // Insanity has it's limits. Not implemented.
                    }
                }
                dataTable.Rows.Add(dataRow);
                row = view.Fetch();
            }
            return dataTable;
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T20:32:49.893

以下是使用 DTF 为数据库、视图和记录对象创建类型的方法。使用 COM Interop 会很相似，但我不想以艰难的方式做事。

```
public static DataTable TableToDataTable( string msiPath, string tableName )
{
    DataTable dataTable = null;
    using(var database = new Database(msiPath, DatabaseOpenMode.ReadOnly))
    {
        using(var view = database.OpenView("SELECT * FROM `{0}`", tableName))
        {
            view.Execute();

            dataTable = new DataTable(tableName);
            foreach (var column in view.Columns)
            {
                dataTable.Columns.Add(column.Name, column.Type);
            }

            foreach (var record in view) using (record)
            {
                var row = dataTable.NewRow();
                foreach (var column in view.Columns)
                {
                    row[column.Name] = record[column.Name];
                }
                dataTable.Rows.Add(row);
            }
        }
    }
    return dataTable;
} 
```

# java - 为什么人们使用 if(null == var) 样式测试？

> ID：14020286
> 
> 赞同：2
> 
> 时间：2012-12-24T10:46:42.873
> 
> 标签：java, if-statement, language-agnostic, coding-style

有些人，通常是那些来自 C 背景的人，他们的测试代码`null`如下：

```
if (null == someVar) 
```

相信“正常”的风格

```
if (someVar == null) 
```

可能不小心被编码为

```
if (someVar = null) 
```

这会无意中*分配*a而`null`不是*test*。`null`

但是，如果发生错误编码，例如`if (someVar = null)`：

1.  为了编译，唯一的类型`someVar`可以是`Boolean`
2.  如果它编译并被执行，它会抛出一个`NullPointerException`

为什么这些人没有意识到“防御”（即螺旋球）风格根本没有帮助，因为错误编码要么无法编译，要么无法运行！？

顺便说一句，就性能而言，编码`if (null == someVar)`实际上执行起来稍微慢一些——准确地说是一条指令更慢。原因是`null`必须将其压入堆栈进行比较，而“正常”样式使用特殊的“is null”指令。

我知道...这不是一个问题。更多的是吐槽。但我想把它放在那里。如果您也认为他们“缺乏洞察力”，请投票。

但是，如果您知道答案，我想听听。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T10:50:22.343

因为他们从 C 中带回了这个习惯，其中

```
if (someInteger = 0) 
```

是有效代码，因为 C 没有布尔值，只有整数（0 为假，其他整数为真）。

```
if (somePointer = NULL) 
```

也是有效的，因为在 C 中，NULL 为 0。

因此，在 C 中，这种结构是有意义的。

请注意，在 Java 中，执行此操作时也会出现此错误

```
if (b = true) 
```

代替

```
if (b == true) 
```

当然，优秀的 Java 开发人员永远不会编写上述内容，而是会使用

```
if (b) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T10:54:25.420

写作没有问题`if (null == someVar)`，为什么不呢？对于从 C/C++ 背景中采用此约定的人来说，为 Java 保持相同的约定并不是一个坏主意。特别是如果他们仍在使用 C/C++ 编写；否则他们最终不得不对两种语言使用两种不同的约定，而不是使用一种通用的约定。

简单的习惯问题，没有任何真正的不良副作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T10:55:56.710

有时以这种方式定义变量范围很有用：

```
if(std::shared_ptr<X> p = q.lock())
{
    // q is valid, I can now use p.

    p->DoSomething();
} 
```

q.lock() != 0 计算结果为 TRUE。q.lock() == 0 计算结果为 FALSE。上面给出的编码风格将使意图明确。然而，这些天来编译器在发现意外分配方面非常聪明，所以它并不是真正必要的。在过去，情况并非如此。

# java - 在java中创建最大线程的因素是什么，堆大小与最大线程数成反比？

> ID：14020293
> 
> 赞同：3
> 
> 时间：2012-12-24T10:47:09.770
> 
> 标签：java, multithreading

我创建了一个程序来检查java中的最大线程数

```
public class Test extends Thread {
static int count;

public static void main (String [] args){
    for(;;){
        count++;
        System.out.println(count);
        new Test().start();
    }
}

@Override
public void run() {
    try {
        Thread.sleep(100000000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
    } 
```

> 第一次迭代 -Xmx1024m ,max thread = 2011 > 第二次迭代 -Xmx512m ,max thread = 3350 > 第三次迭代 -Xmx2m ,max thread = 5112
> 
> 我也尝试过设置 -Xss1m ,max thread = 1011，然后我设置了 -Xss256k max thread 4900+

我有两个问题
1）java中堆栈和堆大小的关系是什么？
2）在java中最大线程数取决于什么因素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:10:07.283

如果您在 32 位 VM 上运行，则您的虚拟内存空间有限。在 32 位 Windows JVM 上，它可以小至 1.5 GB。每个线程都需要堆栈空间，因此堆后的可用空间越多，您可以拥有的线程就越多。在 32 位 Unix 上，您最多可以拥有 3.5 GB 的虚拟内存，但限制仍然存在。

如果您运行的是 64 位 JVM，则此限制会被取消，您可以拥有一个非常大的堆，例如 1 TB，但仍然不会限制您可以拥有的线程数。注意：在 Linux 上，Java 似乎被限制在大约 32K 线程。我不建议你在任何情况下都使用这样的数字，你应该尽量保持在几千以内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:38:03.540

```
May be the answer is  in 
java.lang.Runtime class
java.lang.management package
java.lang.instrument package
If you can see it in depth. 
```

# visual-studio-2010 - Web 性能错误（请求失败错误）

> ID：14020297
> 
> 赞同：0
> 
> 时间：2012-12-24T10:47:37.960
> 
> 标签：visual-studio-2010, connection, performance-testing

在运行 Web 性能测试时，我收到错误“请求失败：现有连接被远程主机强行关闭”，仅针对 1 个请求，

处理大约需要 132 秒，之后会出现此错误。当我通过浏览器页面运行相同的步骤时，会加载没有任何错误......

作为网络性能的重要一步之一，我不能忽略这个请求....

任何建议如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T16:44:53.477

最好的猜测是您在有问题的请求（或前一个请求）中遗漏了需要处理的动态数据。假设它处于业务流程的早期阶段，您错过的内容可能属于以下类别之一：

*   会议
*   状态
*   安全
*   时间

如果它在业务流程中稍晚一点，那么您可能还必须将业务流程数据作为动态元素来处理。

# visual-studio-2010 - 在 DirectShow 项目中出现未知错误

> ID：14020298
> 
> 赞同：0
> 
> 时间：2012-12-24T10:47:40.987
> 
> 标签：visual-studio-2010, visual-c++, directshow

[我从链接GMFBridge - DirectShow 中的多个图形](http://www.gdcl.co.uk/gmfbridge/)下载了一个直接显示项目

我添加了以下库

> C:\Program Files\Microsoft SDKs\Windows\v7.1\Samples\multimedia\directshow\baseclasses\Debug\strmbasd.lib
> 
> C:\Program Files\Microsoft SDKs\Windows\v7.1\Lib\winmm.lib
> 
> C:\ProgramFiles (x86)\Microsoft Visual Studio 10.0\VC\lib\comsuppw.lib

当我构建项目时，我收到了错误：-

```
error LNK2001: unresolved external symbol "public: virtual long __stdcall CBaseFilter::FindPin(unsigned short const *,struct IPin * *)" (?FindPin@CBaseFilter@@UAGJPBGPAPAUIPin@@@Z)    
error LNK2001: unresolved external symbol "public: virtual long __stdcall CBaseFilter::FindPin(unsigned short const *,struct IPin * *)" (?FindPin@CBaseFilter@@UAGJPBGPAPAUIPin@@@Z)    GMFBridge\source.obj    GMFBridge
error LNK2001: unresolved external symbol "public: virtual long __stdcall CBaseFilter::QueryVendorInfo(unsigned short * *)" (?QueryVendorInfo@CBaseFilter@@UAGJPAPAG@Z)         \GMFBridge\sink.obj GMFBridge
error LNK2001: unresolved external symbol "public: virtual long __stdcall CBaseFilter::QueryVendorInfo(unsigned short * *)" (?QueryVendorInfo@CBaseFilter@@UAGJPAPAG@Z)         \GMFBridge\source.obj   GMFBridge
error LNK2019: unresolved external symbol "public: virtual long __stdcall CBaseFilter::JoinFilterGraph(struct IFilterGraph *,unsigned short const *)" (?JoinFilterGraph@CBaseFilter@@UAGJPAUIFilterGraph@@PBG@Z) referenced in function "public: virtual long __stdcall BridgeSink::JoinFilterGraph(struct IFilterGraph *,unsigned short const *)" (?JoinFilterGraph@BridgeSink@@UAGJPAUIFilterGraph@@PBG@Z)    \GMFBridge (1)\GMFBridge\sink.obj   GMFBridge
error LNK2001: unresolved external symbol "public: virtual long __stdcall CBaseFilter::JoinFilterGraph(struct IFilterGraph *,unsigned short const *)" (?JoinFilterGraph@CBaseFilter@@UAGJPAUIFilterGraph@@PBG@Z)    \GMFBridge\source.obj   GMFBridge
error LNK2019: unresolved external symbol "public: __thiscall CBaseInputPin::CBaseInputPin(char const *,class CBaseFilter *,class CCritSec *,long *,unsigned short const *)" (??0CBaseInputPin@@QAE@PBDPAVCBaseFilter@@PAVCCritSec@@PAJPBG@Z) referenced in function "public: __thiscall BridgeSinkInput::BridgeSinkInput(class BridgeSink *,class BridgeStream *,class CCritSec *,long *,unsigned short const *)" (??0BridgeSinkInput@@QAE@PAVBridgeSink@@PAVBridgeStream@@PAVCCritSec@@PAJPBG@Z)  \GMFBridge\sink.obj GMFBridge
error LNK2001: unresolved external symbol "public: virtual long __stdcall CBasePin::QueryId(unsigned short * *)" (?QueryId@CBasePin@@UAGJPAPAG@Z)   GMFBridge\sink.obj  GMFBridge
error LNK2001: unresolved external symbol "public: virtual long __stdcall CBasePin::QueryId(unsigned short * *)" (?QueryId@CBasePin@@UAGJPAPAG@Z)   )\GMFBridge\source.obj  GMFBridge
error LNK2019: unresolved external symbol "public: __thiscall CBaseOutputPin::CBaseOutputPin(char const *,class CBaseFilter *,class CCritSec *,long *,unsigned short const *)" (??0CBaseOutputPin@@QAE@PBDPAVCBaseFilter@@PAVCCritSec@@PAJPBG@Z) referenced in function "public: __thiscall BridgeSourceOutput::BridgeSourceOutput(class BridgeSource *,class BridgeStream *,class CCritSec *,long*,unsigned short const *)" (??0BridgeSourceOutput@@QAE@PAVBridgeSource@@PAVBridgeStream@@PAVCCritSec@@PAJPBG@Z)   \GMFBridge\source.obj   GMFBridge 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T10:51:25.567

1.  项目本身和`strmbasd`库需要使用相同的项目设置构建才能很好地链接
    *   [请参阅The March Hare FAQ](http://tmhare.mvps.org/faqs.htm#section_compile)中有关编译/链接的一般建议
    *   [在MSDN DirectShow 论坛](http://social.msdn.microsoft.com/forums/en-US/windowsdirectshowdevelopment/threads/?filter=unread)中搜索有关编译和链接 DirectShow 项目的数十个主题
2.  来自 GDCL 网站的存档已经为您提供了一个预构建的二进制文件 (GMFBridge.dll)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-26T08:54:27.550

谢谢，谢谢，非常感谢罗曼（当然还有三月野兔）。如果我被允许，我会投票赞成你的答案（还没有足够的声誉）。三月野兔常见问题解答绝对有帮助，尤其是问题的第二个答案：

> 您在基类和程序中设置了不同的“将 wchar_t 视为内置类型”

# c# - 如何将我的列表作为参数传递给方法？

> ID：14020300
> 
> 赞同：-1
> 
> 时间：2012-12-24T10:47:50.043
> 
> 标签：c#, .net

我想将我的列表作为参数发送给函数。我想做这样的事情：

```
 public class SchoolClass
{
    private int index = 0;
    private string name = string.Empty;
    private List<Student> students = new List<Student>();

    public List<Student> Students
    {
        get { return students; }
        set { students = value; }
    }

    public void AddStudent(string name, int age)
    {
        Student newStudent = new Student();
        newStudent.Name = name;
        newStudent.Age = age;

        if (Students.Contains(newStudent))
        {
            Students.Add(newStudent);
            Console.WriteLine(newStudent.ToString());
            Console.ReadLine();
        }
    }
    public void RemoveStudent(int studentId)
    {
        Student foundStudent = Students.Where(x => x.Id == studentId).FirstOrDefault();
        if (foundStudent != null)
        {
            Students.Remove(foundStudent);
        }
    }

    public void CheckIfClassEampty(List<Student> students) <----here
    {

    } 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:59:02.413

由于 CheckIfClassEmpty 是类的一部分，因此您根本不需要将列表作为参数传递。您将可以访问内部字段和属性，例如

```
public bool CheckIfClassEmpty()
{
    // access Students or students directly
} 
```

如果您*想*将列表作为参数传递，那么您的方法签名是正确的，您只需要传递数据，例如

```
var school = new SchoolClass();
school.CheckIfClassEmpty(school.Students); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:01:24.457

很难知道你在问什么，但我怀疑这会达到你想要的： -

```
public bool HasStudents()
{ 
    return students.Any();
} 
```

我已经更改了该方法的标题，因为我认为 HasStudents 可能是您要实现的目标的更好名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T10:56:07.130

如果我正确理解了你的问题

您不能将属性作为方法参数传递，而是传递支持变量。

# java - Java：截图后获取照片点击效果

> ID：14020308
> 
> 赞同：1
> 
> 时间：2012-12-24T10:48:23.133
> 
> 标签：java, swing, screenshot

我写了两个类，`FullScreen`其中包含截图的逻辑，以及`FullScreenGUI`包含模拟*照片点击*效果的逻辑。

*照片点击*效果基本上是在截屏后 50ms 短时间以白色闪烁屏幕。它是通过以`JFrame`1% 的不透明度覆盖整个屏幕来制作的。背景变为白色，然后不透明度从 1% 变为 100%，保持 50 毫秒，然后恢复为 1%。

构造`FullScreen`函数有两个参数，一个是截图的次数，另一个是两者之间的持续时间。

`FullScreenGUI`构造 a ，将`JFrame`其最大化，将背景设置为白色。调用该`fire()`方法时，它会根据需要更改不透明度以产生效果。

**问题：**

使用下面的代码，我可以在第一次截屏时产生效果，但不能在随后的点击中产生效果。假设，`FullScreen`使用参数调用构造函数`(4,2)`（即在 2 秒内每次点击 4 次），那么第一次点击的效果很好，但剩下的 3 次点击效果不佳。`JFrame`的`FullScreenGUI`好像没有出现在前面，所以效果是不可见的。我试过了`JFrame.setAlwaysOnTop(true)`，`JFrame.toFront()`但他们似乎没有把它`JFrame`带到顶峰。

截屏没有问题，反而是效果。你有其他想法来制作它吗？

这是**代码**： `FullScreen.java`

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.*;
import javax.imageio.ImageIO;
import javax.swing.Timer;
import javax.swing.filechooser.FileSystemView;

class FullScreen
{   
    int times, duration;
    Timer t;
    Robot r;
    BufferedImage bi;
    FullScreenGUI fg;

FullScreen(int tim, int duration) 
{
    fg = new FullScreenGUI();
    fg.setVisible(true);
    this.times = tim;
    this.duration = duration;
    try {
        r = new Robot();
    } catch (AWTException e) {
        e.printStackTrace();
    }
    System.out.println("Inside constructor");
    t = new Timer(duration*1000, new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {

            System.out.println("Inside action");
            if(times>0)
            {
                System.out.println("times: "+times);

                //Get the screenshot
                bi = capture();

                //Gives the path of the home directory. For windows, it'll go to your desktop
                FileSystemView filesys = FileSystemView.getFileSystemView();
                File fl = filesys.getHomeDirectory();
                saveImage(bi, fl);

                //Produces the "clicking" effect
                fg.setAlwaysOnTop(true);
                fg.toFront();
                fg.fire();

                times--;
            }
            else
                t.stop();
        }
    });
}

public void fire()
{
    t.start();
}

public void saveImage(BufferedImage source, File destination)
{
    System.out.println("Inside saveimage");
    if(destination.isDirectory())
    {
        System.out.println("destination: "+destination.getAbsolutePath());
        String tmp = destination.getAbsolutePath() + File.separator + "Screenshot";
        String str;
        int i=1;
        for(str=tmp; (new File(str+".png").exists()); i++)
        {
            str = tmp + "_" + String.valueOf(i);
            System.out.println("trying: "+str);
        }

        try {
            ImageIO.write(source, "png", new File(str+".png"));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

public BufferedImage capture()
{
    System.out.println("Captured");
    Dimension d = Toolkit.getDefaultToolkit().getScreenSize();
    return r.createScreenCapture(new Rectangle(d));
}

public static void main(String arg[])
{
    //click 4 times each at an interval of 2 seconds
    FullScreen f = new FullScreen(4,2);

    f.fire();
    while(f.t.isRunning());
}
} 
```

`FullScreenGUI.java`

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class FullScreenGUI extends JFrame {

FullScreenGUI()
{
    setExtendedState(JFrame.MAXIMIZED_BOTH);
    setUndecorated(true);
    setResizable(false);
    setOpacity(0.01f);
    setAlwaysOnTop(true);

    setLayout(new BorderLayout());
    JLabel jl = new JLabel();
    jl.setBackground(Color.white);
    add(jl);        

    setDefaultCloseOperation(EXIT_ON_CLOSE);
}

public void fire()
{
    System.out.println("click");
    setVisible(true);

    try{

    setOpacity(1f);
    Thread.sleep(50);
    setOpacity(0.1f);

    }catch(Exception e) { e.printStackTrace(); }

    setVisible(false);
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T11:35:29.537

问题的根源是`Thread.sleep(50);`。

不要阻塞 EDT（事件调度线程）——当这种情况发生时，GUI 将“冻结”。而不是为此任务调用`Thread.sleep(n)`实现 Swing 。有关更多详细信息，`Timer`请参阅[Swing 中的并发。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)

# javascript - 将基本 Javascript 购物车扩展为多维

> ID：14020309
> 
> 赞同：0
> 
> 时间：2012-12-24T10:48:27.033
> 
> 标签：javascript, multidimensional-array, array-push, array-population

我正在尝试通过扩展这个漂亮的小演示来做一个“快速”的 javascript 购物车作为概念证明。 [http://www.99points.info/2010/12/ajax-shopping-cart-with-jquery-and-php/](http://www.99points.info/2010/12/ajax-shopping-cart-with-jquery-and-php/)

我正在尝试将购物车中项目“类型”的概念扩展到此概念，以便您拥有项目和选项。您可以根据需要添加选项，但只能添加任何项目类型中的 1 个 - 所以我试图将“数组”值转换为多维数组，并真正触及我的 JavaScript 知识墙。

我正在尝试构建的数组应该（我认为）看起来像这样 [itemtype][itemid];

```
[option][4567]
[item][1234]
[option][9874]
[option][14787] 
```

如果尝试添加另一个“项目”，我希望删除前一个 - 然后可以正常添加新项目。在示例中，此处的 [itemid] 用于遍历 DOM 并获取值以重新计算购物车/从 DOM 中删除 ID。

因此，在我尝试执行此操作时，我在示例购物车添加/删除 if 调用之前进行 if 检查，以基本上查看数组中是否有“项目” - 我可以检测到，然后确定 [itemid] 所以我可以将其从数组 [和 DOM] 中删除。

所以基本上我不确定我是否正确地推动了这些值（尽管我正在找到它们）并且当我发现我没有得到 itemID 时。

```
$(document).ready(function() {

// Cart Calculator
var Arrays = new Array();

$("a.cart").click(function(event) {
    event.preventDefault();  
});

$('.cart').click(function(){

    var thisID = $(this).attr('id');

    var itemname  = $(this).find('.name').html();
    var itemprice = $(this).find('.price').html();
    var itemtype = $(this).find('.type').html();  // Added to track item type

    if(include(Arrays,itemtype) && (itemtype == "item")){
        //found an item in the cart
        var whereami = $.inArray(itemtype, Arrays);         
        // alert('Cart has '+itemtype+' in it already ' + whereami);
        alert(cartedItem+' - '+Arrays[whereami]);

    }

    if(include(Arrays,thisID)){

        var price    = $('#each-'+thisID).children(".shopp-price").find('em').html();
        var quantity = $('#each-'+thisID).children(".shopp-quantity").html();
        quantity = parseInt(quantity)+parseInt(1);

        var total = parseInt(itemprice)*parseInt(quantity);

        $('#each-'+thisID).children(".shopp-price").find('em').html(total);
        $('#each-'+thisID).children(".shopp-quantity").html(quantity);

        var prev_charges = $('.cart-total span').html();
        prev_charges = parseInt(prev_charges)-parseInt(price);

        prev_charges = parseInt(prev_charges)+parseInt(total);
        $('.cart-total span').html(prev_charges);

        $('#total-hidden-charges').val(prev_charges);
        $('#total-'+itemtype+'-charges').val(prev_charges);

    }else{

        Arrays.push(thisID,thistype);

        var prev_charges = $('.cart-total span').html();
        prev_charges = parseInt(prev_charges)+parseInt(itemprice);

        $('.cart-total span').html(prev_charges);
        $('#total-hidden-charges').val(prev_charges);
        $('#total-'+itemtype+'-charges').val(prev_charges);

        $('.register .cart-info').append('<div class="shopp" id="each-'+thisID+'"><div class="label">'+itemname+'</div><div class="shopp-price"> $<em>'+itemprice+'</em></div><span class="shopp-quantity">1</span><img src="/Assets/remove.gif" class="remove" Title="Remove from Cart" /><br class="all" /></div>');

    }

    // alert(Arrays.join('\n'));

});     

$('.remove').livequery('click', function() {

    var deduct = $(this).parent().children(".shopp-price").find('em').html();
    var prev_charges = $('.cart-total span').html();

    var thisID = $(this).parent().attr('id').replace('each-','');

    var pos = getpos(Arrays,thisID);
    Arrays.splice(pos,1,"0")

    prev_charges = parseInt(prev_charges)-parseInt(deduct);
    $('.cart-total span').html(prev_charges);
    $('#total-hidden-charges').val(prev_charges);
    $(this).parent().remove();

    isdeath(prev_charges);

}); 

$('#Submit').livequery('click', function() {        
    var totalCharge = $('#total-hidden-charges').val();     
    $('#left_bar').html('Total Charges: $'+totalCharge);        
    return false;       
});         
 });    
});

function include(arr, obj) {
for(var i=0; i<arr.length; i++) {
if (arr[i] == obj) return true;
  }
}
function getpos(arr, obj) {
  for(var i=0; i<arr.length; i++) {
    if (arr[i] == obj) return i;
}
} 
```

屏幕上项目的 HTML 已扩展为包含“类型”类，以便可以引入。

```
<div class="purchase"><div class="plastic">
<a href="" class="cart" id="10731">
 <span class="name">Box of Goodness</span>$<span class="price">85</span>
 <span class="type">item</span></a></div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:14:53.643

我建议您为您的项目创建一个自定义[JavaScript 对象](https://stackoverflow.com/questions/1595611/how-to-properly-create-a-custom-object-in-javascript)，并为其提供一个名为 options 的数组属性。

然后，您可以处理作为一个整体添加或删除项目，而不是使用不稳定的数组方法。

更好的是跳过数组并为所有选项定义属性。

这是一个例子。所以让我们假设你的“项目”是一件衬衫。

```
var shirt = {};
shirt.type = 27;
shirt.size = "large";
shirt.color = "red";
shirt.options = []

shirt.color = "green";
shirt.options[0] = 45679;

alert(shirt.color);
alert(shirt.options[0]); 
```

如您所见，您可以即时添加属性并更改它们。您甚至可以将属性设置为函数`shirt.color = function () {Code here}`。

这又是一种方法。除了 JavaScript 之外，还有其他几种处理对象的方法（请参阅上面的链接）。

# php - 创建包含用嵌套引号括起来的变量的字符串时出现语法错误

> ID：14020310
> 
> 赞同：1
> 
> 时间：2012-12-24T10:48:29.827
> 
> 标签：php, string, double-quotes

这导致错误：

```
$xml .= "\t<team id=\"$team['id']\""; 
```

这不会导致错误：

```
$xml .= "\t<team id=\"\""; 
```

有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T10:53:49.067

您可以删除单引号：

```
$xml .= "\t<team id=\"$team[id]\""; 
```

或者，您可以使用以下语法之一在双引号字符串中使用大括号：

```
$xml .= "\t<team id=\"{$team['id']}\"";
$xml .= "\t<team id=\"${team['id']}\""; 
```

[参考](http://php.net/manual/en/language.types.string.php)（向下滚动到“变量解析”部分）。

再举几个例子：

```
echo "$team[id]";
echo "{$team['first name']}"; // e.g. when there are spaces in key names
echo "{${getVarName()}}";     // e.g. when we cannot use $ directly 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T10:53:41.297

这应该有效：

```
$xml .= "\t<team id=\"$team[id]\""; 
```

看看我是如何删除 id 周围的单引号的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T10:52:21.900

尝试这个

```
$xml .= "\t<team id=\"".$team['id']."\""; 
```

或者你可以像这样使用大括号

```
$xml .= "\t<team id=\"{$team['id']}\""; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T10:54:57.490

尝试这个：

```
$xml .= "\t<team id='".$team['id']."'"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T10:53:31.840

我认为问题在于 $team['id'] 多于双引号。

你有没有尝试过：

```
$xml .= "\t<team id=\"".$team['id']."\""; 
```

# java - 如何将设置变量转换为/从字节/文件/输入流/字符串？

> ID：14020311
> 
> 赞同：4
> 
> 时间：2012-12-24T10:48:30.137
> 
> 标签：java, string, set, byte, blob

我正在尝试将包含一些数据的集合存储到`blob`（在云存储中，如`Rackspace CloudFiles`or `Amazon S3`）

现在，这是用于将设置变量实际存储到云提供商（使用`jclouds`库）中的代码 -

```
Set<? extends NodeMetadata> nodes;
BlobStore blobStore = bscontext.getBlobStore();
Blob blob; 
```

必须在`blob`云存储中存储/检索。这些是在 blob 中实际存储一些数据的以下方法 -

```
 blob.setPayload(argument)
 Argument= byte/file/inputstream/string. 
```

我想知道的是，我使用以上哪个（即字节或文件或输入流或字符串）？另外，如何将存储在名为“节点”的 Set 变量中的值转换为该格式，以便可以将其存储为`blob`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:05:59.790

您可以执行上述任何操作。我建议你做你认为最简单的事情。您可以将其存储为文本/字符串，使用 XMLEncoder 或 XStream 作为 XML 或 JSON。您可以使用 ObjectOutputStream 或类似 protobuf 的东西将数据存储为二进制，

# jakarta-ee - java_ee_sdk-6u4-unix-ml.sh 中的 ML 代表什么？

> ID：14020313
> 
> 赞同：0
> 
> 时间：2012-12-24T10:48:33.963
> 
> 标签：jakarta-ee, sdk

这个`ML`词在`java_ee_sdk-6u4-unix-ml.sh`文件中代表什么？哪个版本最符合 Mac OS X Mountain Lion`java_ee_sdk-6u4-unix-ml.sh`或`java_ee_sdk-6u4-unix.sh`？

[此文件的网页](http://www.oracle.com/technetwork/java/javaee/downloads/java-ee-sdk-6u3-downloads-439814.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:11:27.847

[“ml”代表多语言](https://stackoverflow.com/a/6876338/981049)。

至于安装到 MacOS 上，请查找文件名中包含“ `macos`”的可下载文件。该文件很可能是带有“ `.dmg`”扩展名的磁盘映像文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T14:17:59.807

In that case ml stands for Multi-Language.

# xml - 如何修剪xslt中的特殊符号？（不仅是空格）

> ID：14020314
> 
> 赞同：1
> 
> 时间：2012-12-24T10:48:46.083
> 
> 标签：xml, xslt, xpath, xslt-2.0

如果我有一个字符串 =`"Hello, my friend!,,,,"`并且我想从右边删除所有逗号

所以结果将是`"Hello, my friend!"`

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T11:04:20.857

```
replace('Hello, my friend!,,,,',',+$','') 
```

# google-app-engine - 谷歌应用引擎：如何添加管理员帐户

> ID：14020317
> 
> 赞同：2
> 
> 时间：2012-12-24T10:48:58.023
> 
> 标签：google-app-engine

我正在谷歌应用引擎上开发一个网络系统。我想为系统创建一个管理员帐户，以便他/她可以登录以设置各种系统设置。但是我如何首先创建这样一个帐户？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T11:28:31.000

1.  转到[https://appengine.google.com](https://appengine.google.com)上的管理控制台。
2.  单击左侧菜单中的权限。
3.  输入新用户的邮箱，将角色设置为“所有者”，然后单击“邀请用户”。

编辑：

如果您在应用程序中为管理员提供功能，您可以：

*   如果您只有一个管理员，只需在您的代码中硬编码此人的电子邮件，或者
*   在 Admin Console 中将此人添加为管理员，然后检查用户在您的代码中是否为管理员，如果您使用 App Engine 的用户服务进行身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T06:31:35.113

在 GAE 应用程序中对用户进行身份验证的最简单方法是使用内置的[UserService](https://developers.google.com/appengine/docs/java/gettingstarted/usingusers)。

您可以通过两种方式保护页面：

1.  [在 web.xml 中定义安全约束](https://developers.google.com/appengine/docs/java/config/webxml#Security_and_Authentication)
2.  检查[UserService.isUserAdmin()](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/users/UserService)并重定向到登录页面

请注意，您可以选择允许用户使用 OpenId 或仅使用 Google Apps 帐户使用此内置服务登录。如果您想允许 Facebook 身份验证或您自己的用户名/密码之类的其他功能，那么您将需要构建更精细的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-04T16:40:55.367

Google App Engine，您想添加第二个应用所有者或其他更有限的访问权限。

登录到控制台，转到 IAM & admin 选项卡并选择您的项目。转到左侧面板上的 IAM，选择添加（顶部），在滑入式中输入新成员的电子邮件，然后选择您要授予他们的角色（项目所有者）并保存。他们会收到一封电子邮件，并且可以接受新角色。您无需注册完整的 IAM 身份和组织。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-23T20:48:19.290

可以将成员添加到 Google Cloud 项目（包括 App Engine）并通过 Google Cloud Console 的**IAM 和 ADMIN**部分分配角色（截至 2016 年 12 月）：

[https://console.cloud.google.com/iam-admin](https://console.cloud.google.com/iam-admin)

# html - 制作 只占用内容空间：禁用拉伸

> ID：14020325
> 
> 赞同：7
> 
> 时间：2012-12-24T10:49:32.063
> 
> 标签：html, styles

我有`<div>`一些嵌套的 div。它们都具有相同的高度。我需要父母`<div>`尽可能多地接受`width`它的内容（我想申请`border-style`财产）。财产`display:inline`（父母）对我没有帮助。

这是标记：

```
 <div style="border-style:solid;height:60px;">
        <div  style="display:inline;float:left;background-color:Aqua;height:60px;width:30px;border-left-style:solid"></div>
        <div  style="display:inline;float:left;background-color:Black;height:60px;width:30px;border-left-style:solid"></div>
        ......       
   </div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T10:54:24.010

使用`display: inline-block;`似乎有效：

```
 <div style="display:inline-block;border-style:solid;height:60px;">
        <div  style="display:inline;float:left;background-color:Aqua;height:60px;width:30px;border-left-style:solid"></div>
        <div  style="display:inline;float:left;background-color:Black;height:60px;width:30px;border-left-style:solid"></div>
   </div> 
```

[**jsFiddle 演示**](http://jsfiddle.net/tpzL7/1/)

一些较旧的浏览器不支持`inline-block`，因此您需要在您支持的浏览器中进行检查。

我假设这些样式会在某个时候进入样式表，而不是纯粹的内联。

# firefox - firefox上传按钮消失

> ID：14020327
> 
> 赞同：0
> 
> 时间：2012-12-24T10:49:37.527
> 
> 标签：firefox, uploadify

嗨，明天圣诞节快乐。

我在 ASP.NET 3.5 页面上使用带有 jquery ui 选项卡的 uploadify。一切都适用于铬；当我交换标签时，uploadiify 按钮会闪烁，但在标签滑入时会出现。

使用 firefox (17.0.1) 选项卡滑入并显示上传按钮，它会闪烁并且不再显示。我可以通过从 asp:button 回发部分页面来强制它显示。如果我用 jquery 模拟 asp:button 单击它不会加载 uploadify 按钮。

我认为这可能是某种时间问题，所以我将 uploadify() 函数放在了 settimeout() 中，但这并没有解决它。我认为这是因为如果我在选项卡滑入后发出警报并且uploadify 是“绑定”的，则会显示uploadify 按钮。

我已经尝试了 uploadify 演示页面，没关系，所以它不是 Firefox Flash 版本的问题。

有任何想法吗？

这是我的 uploadify 'binding' 功能 - 它适用于 chrome，所以我认为所有路径都很好。onSWFReady 试图解决这个问题 - 不好。

```
 function InitialiseNewUploadifyControl() {

        var prefix = "Attachment_";
        var auth = "<% = Request.Cookies[FormsAuthentication.FormsCookieName] == null ? string.Empty : Request.Cookies[FormsAuthentication.FormsCookieName].Value %>";
        var ASPSESSID = "<%= Session.SessionID %>";
        var jobId = $(".job-Id").text();

        if ($('#fileInputNewUploader').length < 1) {
            console.log("fileInputNewUploader : " + $('#fileInputNewUploader').length.toString());
            var _log = $('#fileInputNew').uploadify({
                'uploader': '/Scripts/Uploadify/uploadify.swf',
                'script': 'Handlers/Upload.ashx',
                'scriptData': { 'prefix': prefix, 'ASPSESSID': ASPSESSID, 'AUTHID': auth, 'JobId': jobId,
                    "UploadImmediate": false
                },
                'cancelImg': 'Scripts/Uploadify/cancel.png',
                'auto': true,
                'multi': true,
                'fileDesc': 'All Files',
                'fileExt': '*.*',
                'queueSizeLimit': 10,
                'sizeLimit': 4000000,
                'buttonText': 'Upload Files',
                'folder': '/Uploads',
                'removeCompleted': false,
                'onComplete': function (event, ID, fileObj, response, data) {
                    $("<%= ui_lblHiddenResizeControl.ClientID %>").text("false");
                    if (response == "0") {
                        alert('Sorry, the file type that was just uploaded is not allowed.');
                        jQuery('#fileInputNew').uploadifyCancel(ID);
                    } else {
                        $("#<%= ui_lblHiddenResizeControl.ClientID %>").text("true");
                        //$(".hidden-row-click").click();
                    }
                    return false;
                }
                /*
                , 'onSWFReady': function () {
                    //$("#fileInputNewUploader").parent().css({ "visability": "visible", "background-color": "Gray" });
                    HideTopLoader();
                    console.log("onSWFReady_fileInputNewUploader : " + $('#fileInputNewUploader').length.toString());
                    if ($('.FFFix-hidden-button-click').val() === "unclicked") {
                        $('.FFFix-hidden-button-click').click();
                        console.log("onSWFReady_fileInputNewUploader click");
                    }
                }
                */
            });
            console.log('%o', _log);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:10:09.473

我在使用 FireFox 时遇到了同样的问题，您需要为 FireFox 更新/安装 Adob​​e Flash 播放器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:01:38.467

演示工作正常，因此 Flash 播放器正常。我将代码绑定到 jquery ui Tabs 函数/方法；检查选择了哪个选项卡并绑定，如果它是我之后的 1，这个固定的东西.. 不需要 setTimeout。

# java - 用于 spring 方法缓存和休眠 2 级缓存的 ehcache

> ID：14020332
> 
> 赞同：3
> 
> 时间：2012-12-24T10:50:03.453
> 
> 标签：java, spring, hibernate, ehcache

我想设置 spring 方法缓存和由 ehcache 备份的休眠 2 级缓存：

在 spring-context.xml 中已经配置了 hibernate 2 级缓存：

```
<!-- hibernate level 2 cache configuration -->
<bean id="hibernateCacheManager"
    class="net.sf.ehcache.CacheManager" 
    factory-bean="hibernateCacheManagerFactory"
    factory-method="createCacheManager"
    destroy-method="shutdown" />
<bean id="hibernateCacheManagerFactory" 
    class="com.project.CustomEhCacheManagerFactoryBean" /> 
```

缓存配置是从自定义 xml 文件中读取的，以便我们可以自定义需求并轻松测试缓存的实体：

```
public class CustomEhCacheManagerFactoryBean {
    public CacheManager createCacheManager() {
        final Configuration configuration = new Configuration();            
        // read the xml configuration
        //for each node in xml
            final CacheConfiguration cache = new CacheConfiguration();
            // set the properties
            configuration.addCache(cache);
        // end for
        cacheManager = CacheManager.create(configuration);
    }
} 
```

现在我想这次使用注释添加另一个缓存管理器的spring方法缓存。我在 spring-context.xml 中添加了以下内容：

```
<!-- suport method caching through annotation -->
<cache:annotation-driven />
<!-- spring method cache configuration -->
<bean id="cacheManager" 
    class="org.springframework.cache.ehcache.EhCacheCacheManager">
        <property name="cacheManager" ref="springEhcache"/>
</bean>
<bean id="springEhcache" 
    class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">
        <property name="cacheManagerName" value="method-cache" />
</bean> 
```

然后我得到以下异常：

```
Caused by: 
java.lang.IllegalArgumentException: loadCaches must not return an empty Collection
at org.springframework.util.Assert.notEmpty(Assert.java:268)
at org.springframework.cache.support.AbstractCacheManager.afterPropertiesSet(AbstractCacheManager.java:49)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514) 
```

`Q1`：不应该通过注释自动配置缓存吗？我错过了什么？

`Q2`: 是否可以给这个bean id`springCacheManager`而不是`cacheManager`？目前我得到异常：没有找到bean'cacheManager'

谢谢

# asp.net-mvc - ASP.NET MVC ViewModel 良好实践

> ID：14020333
> 
> 赞同：3
> 
> 时间：2012-12-24T10:50:10.813
> 
> 标签：asp.net-mvc, asp.net-mvc-4, viewmodel, asp.net-mvc-viewmodel

首先，我想与您分享这篇关于 ViewModel 的非常有趣的文章： [http ://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp.net-mvc-applications](http://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp.net-mvc-applications)

我有一个问题
所有 ViewModel 类都派生自基类 ex 是否是一种好习惯： BaseViewModel 因为大多数网站/Web应用程序通常在母版页中显示公共信息？在正常工作的 ASP.NET MVC 中，布局（母版页）模型是 BaseViewModel，每个 View 都有一个不同的 ViewModel。

也欢迎使用 ViewModel 接口的任何示例。

谢谢。里亚德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T10:56:14.807

> 所有 ViewModel 类都从基类派生是一种好习惯吗

虽然在某些情况下这可能是正确的，但它并不是适用于所有 ASP.NET MVC 应用程序的。还有其他方法可以在所有 ASP.NET MVC 视图中显示公共信息，例如使用[`child actions`](http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx).

子动作完全独立于主动作，即使它们在同一个 HTTP 请求中执行并聚合结果，它们也可以有一个完全独立的视图模型，只包含布局的这个特定部分所需的信息。他们可以独立查询您的数据提供者以获取域模型并将它们映射到相应的视图模型。所有这些都可以完全独立于主要动作和视图模型发生。因此，您的主视图模型不需要从公共基础视图模型派生。

因此，您无法真正概括使用通用基础视图模型是否是最佳实践。您的问题的简单答案是：这取决于您正在开发的应用程序的细节。

# javascript - 将换行符添加到 textarea 而不是提交表单

> ID：14020334
> 
> 赞同：14
> 
> 时间：2012-12-24T10:50:11.923
> 
> 标签：javascript, jquery, html, textarea

我有一个带有文本区域的表单，然后按 Enter 键提交我的表单。我怎样才能使它添加一个换行符而不是表单提交。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-24T10:55:08.947

```
$('textarea').keypress(function(event) {
   if (event.which == 13) {
      event.stopPropagation();
   }
});​ 
```

[JSFiddle 演示](http://jsfiddle.net/Addct/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T10:52:18.193

你可以试试这段代码：

```
$(document).ready(function() {
  $("textarea").keydown(function(event){
    if(event.keyCode == 13) {
      event.preventDefault();
      return false;
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T10:52:36.710

这应该有帮助

```
$('#myProblematicForm textarea').keypress(function(event) {
  if (event.which == 13) {
    event.preventDefault();
    this.value = this.value + "\n";
  }
}); 
```

* * *

对于它的价值，我在 OS X 上使用 Chrome 并为我在 textarea 中`Enter`插入 a并且默认情况下**不**提交表单。`\n`

 *** * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-10T11:59:54.940

```
$(document).ready(function(){
$("#text").keypress(function(event) {   
   if (event.which == 13) { 
      var s = $(this).val();
      $(this).val(s+"\n");  //\t for tab
   }
});      
}); 
```

这可以通过我上面给出的 jquery 代码来完成。必须注意，上面的脚本在HTML输入字段代码之前编写时需要使用ready函数，而在输入字段代码之后编写则不需要。如果它不起作用，请尝试使用\t代替\ n 它会起作用的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-25T20:45:05.190

以前的答案不处理拆分 textarea 的当前值，而只是附加一个换行符。以下阻止事件冒泡到表单，并且仍然允许“输入”上的典型文本区域行为。

```
$('textarea').keydown(function(event) {
  if (event.keyCode === 13) {
    event.stopPropagation();
  }
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-04T08:52:42.503

```
$(document).ready(function() {
  $('textarea').keydown(function(event){
    if (event.keyCode == 13) {
      event.preventDefault();
      var s = $(this).val();
      $(this).val(s+"\n");
    }
  });
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-06T15:21:46.627

这对我有用

```
$(document).keypress(function(e) {
if(e.which == 13) {
    if(document.activeElement.tagName != "TEXTAREA") {
        e.preventDefault();
    };
  }
}) 
```**

# tomcat - 部署到 tomcat 时出现线程本地错误

> ID：14020335
> 
> 赞同：0
> 
> 时间：2012-12-24T10:50:11.827
> 
> 标签：tomcat, grails, memory, memory-leaks

我在将 grails 项目部署到 tomcat webapp 目录时遇到问题。

查看`catalina.out`日志文件，我可以看到以下错误：

```
SEVERE: The web application [/test-0.1] registered the JDBC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
Dec 24, 2012 10:41:52 AM org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap
SEVERE: The web application [/test-0.1] created a ThreadLocal with key of type [org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory$2] (value [org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory$2@57390ad3]) and a value of type [java.lang.Boolean] (value [false]) but failed to remove it when the web application was stopped. This is very likely to create a memory leak. 
```

我对 Tomcat 很陌生，不确定这些错误是什么意思。请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:56:05.283

将 JDBC 驱动程序 jar 文件复制到 tomcat/lib 目录将解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T22:11:23.723

JDBC 驱动程序是否存在于您的类路径中？

要解决这个问题，请在您的 jquery 插件上创建一个文件夹 lib

例如 `~/.grails/2.1.0/projects/YourProject/plugins/jquery-1.x.x/lib`

并将 JDBC Driver jar 复制到此文件夹中。

希望这有帮助。

# google-maps - 处理多个多边形对象

> ID：14020339
> 
> 赞同：-1
> 
> 时间：2012-12-24T10:50:17.960
> 
> 标签：google-maps, google-maps-api-3

我试图在谷歌地图上添加/删除多个多边形。单击每个多边形时，我必须显示相应多边形的一些信息窗口。单击多边形时，我无法维护多边形对象。

示例代码：

```
for (var i = 0; i < multipleFlights.length; i++) 
{
    google.maps.event.addListener(multipleFlights[i], 'click', arrayfn); // $(multipleFlights[i]).click(function () { alert('x'); });
} 
```

如何在`arrayfn`函数中获取当前多边形对象。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:04:40.217

这是一个常见的问题，至少有两种解决方案：

*   函数闭包（使用 createClickablePoly() 之类的函数将 InfoWindow 内容与多边形相关联） -[示例](http://www.geocodezip.com/v3_polygon_example_clickable_squares.html)

*   成员变量包含点击监听函数访问的 InfoWindow 内容。

# facebook - Facebook 图形 API 不尊重别名

> ID：14020347
> 
> 赞同：2
> 
> 时间：2012-12-24T10:51:13.897
> 
> 标签：facebook, facebook-graph-api

我有一个 Facebook 页面的 URL 列表，我想从中收集基本元数据（喜欢等）。

大多数时候，给定一个 URL：

[https://www.facebook.com/cocacola](https://www.facebook.com/cocacola)

我可以简单地获取相应的图形 URL：

[https://graph.facebook.com/cocacola](https://graph.facebook.com/cocacola)

不幸的是，这对于名称已更改的页面来说是错误的：

[http://www.facebook.com/bebestores](http://www.facebook.com/bebestores)（重定向到[https://www.facebook.com/bebe](https://www.facebook.com/bebe)）

生成的图形 URL：

[http://graph.facebook.com/bebestores](http://graph.facebook.com/bebestores)

返回：

```
{
   "error": {
      "message": "(#803) Some of the aliases you requested do not exist: bebestores",
      "type": "OAuthException",
      "code": 803
   }
} 
```

我可以让 Facebook Graph API 遵循此重定向，还是需要访问公共网站以检查我的 URL 是否重定向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T10:56:24.487

最好的办法是使用页面`id`，这永远不会改变。

因为`bebe`id 是`46215732881`这样，您始终可以通过使用获取信息，`http://graph.facebook.com/46215732881`而不必担心名称更改。

另一种选择是提供完整的 URL：

```
http://graph.facebook.com/http://www.facebook.com/bebestores 
```

我会使用这个 url 来获取`id`并使用`id`之后。

# c - 使用类似函数的宏编译错误

> ID：14020351
> 
> 赞同：3
> 
> 时间：2012-12-24T10:51:35.727
> 
> 标签：c, macros

gcc 4.7.2 c89

你好，

我正在进行一些维护工作，并且我有以下类似函数的宏：

```
#define GET_ERROR() ((errno == 0) ? "None" : strerror(errno))

#define LOG_ERR(fmt, ...)                                               \
    fprintf(stderr, "[ERROR] %s:%d: error [%s] " fmt "\n", __func__, __LINE__, GET_ERROR(), ##__VA_ARGS__)

#define LOG_ASSERT(ARG, fmt, ...) do {                          \
        if(!(ARG)) {                                            \
            char arg_fmt[512];                                  \
            snprintf(arg_fmt, sizeof arg_fmt, "%s, ", #ARG);    \
            strcat(arg_fmt, fmt);                               \
            LOG_ERR(arg_fmt, ##__VA_ARGS__);                    \
            errno = 0;                                          \
            abort();                                            \
        }                                                       \
    } while(0) 
```

LOG_ASSERT 将模拟一个断言函数。但是会包含一些来自 strerror errno 的额外信息。

我使用的是这样的：

```
LOG_ASSERT(msg_id != -1, "Failed to connect to the message queue [ %d ]", msg_id); 
```

所以它应该像这样显示：

```
"msg_id != -1, Failed to connect to the message queue [ -1 ]" 
```

我使用 strcat 在 fmt 的开头添加了“msg_id！= -1”的前缀。

但是，我得到了这些似乎无法修复的编译错误。我认为这很容易，如果我遗漏了一些简单的东西，我只想获得另一个想法。

```
error: expected ‘)’ before ‘arg_fmt’
warning: format ‘%s’ expects a matching ‘char *’ argument [-Wformat]
warning: format ‘%d’ expects a matching ‘int’ argument [-Wformat]
warning: format ‘%s’ expects a matching ‘char *’ argument [-Wformat] 
```

我知道有些人可能不同意这个宏，但这是我必须维护的。

非常感谢您的任何建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T11:15:46.297

据我所知，您只能连接常量字符串文字，而不是 char 数组，这是您的问题：

```
fprintf(stderr, "[ERROR] %s:%d: error [%s] " fmt "\n", __func__, .... 
```

`fmt`是一个字符数组，您将需要另一个缓冲区来复制格式，或者您可以拆分`printf`

```
#define LOG_ERR(fmt, ...)                                               \
    fprintf(stderr, "[ERROR] %s:%d: error [%s] ", __func__, __LINE__, GET_ERROR());\
    fprintf(stderr, fmt, ##__VA_ARGS__) 
```

# jquery - Ajax 加载滑块

> ID：14020353
> 
> 赞同：0
> 
> 时间：2012-12-24T10:51:39.133
> 
> 标签：jquery, html, ajax, slider

我有一个菜单`div`和一个内容`div`

如果我将滑块（它是一个 jquery 插件）放在`index.php`一切正常，如下图

![在此处输入图像描述](../Images/7ab459eccbb50c7d1049de006aa8381d.png)

但我想做的是将每个页面的内容放在不同的文件中，例如主页应该包含带有一些基本信息的滑块，所以我把它放在 home.php

现在我想加载它，我这样做：

```
$("#nav_home").click(function(){
    $("#content").load('pages/home.php');
}); 
```

这是它崩溃的部分，从上面的滑块变成这样：

![在此处输入图像描述](../Images/ff8fe2a93bea4f0f153cb093e133263d.png)

HTML：

```
<ul id = "nav"><!-- menu -->
    <li id="nav_home"><a href="#">Home</a></li>    
</ul> 

<div id='content'><!-- content div -->
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:38:56.133

尝试这样的事情：

```
$("#nav_home").click(function(){
    $("#content").load('pages/home.php', 
        function(){
            $("#slider").easySlider({
                auto: true,
                continuous: true 
            });
        }
    );
}); 
```

# javascript - 在超链接的点击事件上调用javascript函数

> ID：14020355
> 
> 赞同：4
> 
> 时间：2012-12-24T10:52:11.577
> 
> 标签：javascript, html, jsp, servlets

我正在使用 JSP 和 Servlet 开发一个 Web 应用程序。

我试图在超链接的单击事件上调用 javascript 函数，并且我还使用查询字符串将一些参数传递给 servlet。

```
<td> <a href="#?id=<%=data[i][0]%>&protID=<%=data[i][1]%>&seqNo=<%=data[i][2]%>" onclick="getValues();" >Edit</a></td> 
```

javascript函数：

```
<script>
function getValues()
{
    var url = document.URL;
    var planID = url.split("=");
    var pID = planID[1].split("&");

    var remURI = url.split("&");
    var protID = remURI[1].split("=");

    var s = remURI[2].split("=");

    document.getElementById('txtPlanID').value=pID[0];
    document.getElementById('txtProtID').value=protID[1];
    document.getElementById('txtSeqNo').value=s[1];

//show("block");
return false;
}
</script> 
```

但问题是我必须在超链接上单击两次才能获得所需的结果。我认为 onClick 事件是在发送查询字符串之前执行的。如果源代码有任何问题，请告诉我。

提前致谢.....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T10:57:41.680

```
<td> <a href="#" onclick="getValues('<%=data[i][0]%>','<%=data[i][1]%>','<%=data[i][2]%>');" >Edit</a></td>

function getValues(pID,protID,eq)
{

document.getElementById('txtPlanID').value=pID;
document.getElementById('txtProtID').value=protID;
document.getElementById('txtSeqNo').value=eq;

//show("block");
return false; 
```

}

只需在调用 javascript 时传递值即可使用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:09:16.957

试试这个：

```
<a href="javascript:return getValues('<%=data[i][0]%>','<%=data[i][1]%>','<%=data[i][2]%>');">Edit</a> 
```

JS

```
function getValues(value1, value2, value3)
{
    document.getElementById('txtPlanID').value = value1;
    document.getElementById('txtProtID').value= value2;
    document.getElementById('txtSeqNo').value= value3;

    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T10:56:17.863

提供单击的链接作为函数的参数：

```
onclick="getValues(this);return false;" 
```

然后使用链接的 href 属性作为 url：

```
function getValues(link)
{
    var url = link.href;
    //more code
} 
```

# c++ - G-WAN cc1plus：错误：无法识别的命令行选项“-std=gnu++0x”

> ID：14020359
> 
> 赞同：3
> 
> 时间：2012-12-24T10:52:36.150
> 
> 标签：c++, g++, g-wan

我开始大量使用 gwan。我想使用 cpp，但我在 Amazon 上遇到 g++ 错误：

```
cc1plus: error: unrecognized command line option "-std=gnu++0x" 
```

有什么方法可以忽略/跳过我这边的指令，或者在“配置”文件中指定 g++ 命令行？

（我喜欢你使用目录名称而不是配置。 - 一个简单有效的想法，但我在这里有什么选择？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:56:39.940

经常播出这个问题会带来答案：

看起来亚马逊上 gcc 的更新版本（带 0x）被称为：

```
gcc44 
```

安装最新版本就可以了。

# php - 教义 2 dbal 和缓存

> ID：14020362
> 
> 赞同：0
> 
> 时间：2012-12-24T10:52:43.387
> 
> 标签：php, doctrine-orm

我的问题非常愚蠢，但我没有找到 Doctrine 2 dbal 和缓存管理器的示例。

我不能在 dbal 查询中使用 useResultCache 方法吗？

```
$q = \Zend_Registry::get('em')->getConnection()->createQueryBuilder()
->select('f.idprd, f.lprd')
->from('tb_prd', 'f')
->andWhere($q->expr()->eq('f.niveau', $iNiveau))
->orderBy('f.niveau') 
```

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:19:51.423

我找到 ：

[https://github.com/doctrine/dbal-documentation/blob/master/en/reference/caching.rst](https://github.com/doctrine/dbal-documentation/blob/master/en/reference/caching.rst)

它正在工作：

```
public static function getList() {
    $q = \Zend_Registry::get('em')->getConnection()->createQueryBuilder()
        ->select("np.*")
        ->from('tb_niv_prd', 'np')
        ->andWhere("np.lniveau IS NOT NULL")
        ->andWhere("np.niveau <> 10")
        ->addOrderBy('np.lniveau', 'ASC');

    $stmt = \Zend_Registry::get('em')->getConnection()->executeCacheQuery(
        $q->getSql(), array(), array(), new \Doctrine\DBAL\Cache\QueryCacheProfile(0,
            "TbNivPrdRepository_getList"));
    $aResult = $stmt->fetchAll(\PDO::FETCH_ASSOC);
    $stmt->closeCursor();
    return $aResult;
} 
```

# python - 在 python pandas 中合并 CSV 数据和计算单元格值

> ID：14020365
> 
> 赞同：3
> 
> 时间：2012-12-24T10:52:47.490
> 
> 标签：python, pandas

以下链接使用python字典解决了一个非常相似的问题[Python：将字典与列表中的列表合并为值并计算它们](https://stackoverflow.com/questions/11041971/python-merging-dictionaries-with-lists-in-lists-as-values-and-counting-them)

我想知道是否可以使用 python pandas 库解决以下问题。我尝试使用合并和加入，但我不确定如何获得所需的结果。

问题如下：

从 2 个 csv 文件中，我在字典中阅读

```
dict1 = {'M1': {'H': '1', 'J' : '2'}, 'M2': {'H': '1', 'J' : '2'}, 'M3': {'H': '1', 'J' : '2'}}
dict2 = {'M1': {'H': '4', 'J' : '6'}, 'M2': {'H': '2', 'J' : '5'}, 'M4': {'H': '9', 'J' : '8'}} 
```

所需的输出表：

两个字典中所有键的列表及其子字典 [{H,J}] 值的总和，用于两个字典之间的匹配键

示例：M1 存在于 dict1 和 dict2 中，因此 M1 的最终输出应该是

final_M1['H'] = 1（来自 dict1['M1']）+ 4（来自 dict2['M1']）= 5

同样，对于 M3，M3 仅存在于 dict1 中，因此无需执行任何操作并且必须保留这些值。

样本输出：

```
---------------------
M    |  H  |   J
---------------------
M1   |  5  |   8
---------------------
M2   |  3  |   7
---------------------
M3   |  1  |   2
---------------------
M4   |  9  |   8 
```

要获得两个字典的唯一集合，

```
keys = set(dict1.keys()).union(dict2.keys()) 
```

与上面链接中使用的逻辑类似，使用 python 字典的解决方案如下所示：

```
for k in keys:
print "Key:", k
d1val = dict1.get(k, {})
d2val = dict2.get(k, {})
if (len(d1val) == 0):
    print "d2val H:", d2val['H']

if (len(d2val) == 0):
    print "d1val H:", d1val['H']

if (len(d1val) != 0 and len(d2val) != 0):
    print "Test"
    print "d1val H:", d1val['H']
    print "d2val H:", d2val['H']
    print "d1val H + d2val H = ", int(d1val['H']) + int(d2val['H'])
print "***********" 
```

如何在 python pandas 中实现相同的逻辑？考虑到输入数据集是否在每个文件 10,000 行的范围内，我还想使用 pandas 库进行此类操作是否有效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T11:26:09.847

`DataFrame.add`如果嵌套字典中的值是数字而不是字符串，则可以使用该方法。例如：

```
import pandas as pd

dict1 = {'M1': {'H': 1, 'J' : 2}, 'M2': {'H': 1, 'J' : 2},
         'M3': {'H': 1, 'J' : 2}}
dict2 = {'M1': {'H': 4, 'J' : 6}, 'M2': {'H': 2, 'J' : 5},
         'M4': {'H': 9, 'J' : 8}}

df1 = pd.DataFrame(dict1).T
df2 = pd.DataFrame(dict2).T

print(df1)

#     H  J
# M1  1  2
# M2  1  2
# M3  1  2

print(df2)
#     H  J
# M1  4  6
# M2  2  5
# M4  9  8

print(df1.add(df2, fill_value = 0))

#     H  J
# M1  5  8
# M2  3  7
# M3  1  2
# M4  9  8 
```

如果您在 csv 文件中显示数据，也许我们可以建议如何读取它，以便这些值是数字而不是字符串。

或者，您可以在解析 csv*后将*字符串转换为数字：

```
In [1]: dict1 = {'M1': {'H': '1', 'J' : '2'}, 'M2': {'H': '1', 'J' : '2'}, 'M3': {'H': '1', 'J' : '2'}}

In [2]: dict1 = {key:{k:int(v) for k,v in dct.items()} for key,dct in dict1.items()}

In [3]: dict1
Out[3]: {'M1': {'H': 1, 'J': 2}, 'M2': {'H': 1, 'J': 2}, 'M3': {'H': 1, 'J': 2}} 
```

但我认为最好从一开始就正确解析它，而不是稍后以这种方式修补它。

* * *

如果 dicts 包含数字和字符串值，那么您可以使用连接将它们组合起来，然后是 groupy 和聚合。例如，

```
import pandas as pd
import numpy as np

def combine(values):
    if any(isinstance(v, basestring) for v in values):
        result = values.dropna().tolist()
    else:
        result = values.sum()
    return result

dict1 = { 'M1': {'H': 1, 'J' : 2, 'D' : 'ABC/DEF1.txt'},
          'M2': {'H': 1, 'J' : 2, 'D' : 'ABC/DEF2.txt'},
          'M3': {'H': 1, 'J' : 2, 'D' : 'ABC/DEF3.txt'} }
dict2 = { 'M1': {'H': 4, 'J' : 6, 'D' : 'ABC/DEF1.txt'},
          'M2': {'H': 2, 'J' : 5, 'D' : 'ABC/DEF2.txt'},
          'M4': {'H': 9, 'J' : 8, 'D' : 'ABC/DEF3.txt'}}

df1 = pd.DataFrame(dict1).T
df2 = pd.DataFrame(dict2).T
df = df1.join(df2, rsuffix = '_', how = 'outer').T
grouped = df.groupby(lambda label: label.rstrip('_'))
print(grouped.aggregate(combine).T) 
```

产量

```
 D  H  J
M1  [ABC/DEF1.txt, ABC/DEF1.txt]  5  8
M2  [ABC/DEF2.txt, ABC/DEF2.txt]  3  7
M3                [ABC/DEF3.txt]  1  2
M4                [ABC/DEF3.txt]  9  8 
```

# android - sqlCipher 中 SQLiteOpenHelper 的自定义 ErrorHandler

> ID：14020366
> 
> 赞同：0
> 
> 时间：2012-12-24T10:52:49.337
> 
> 标签：android, database, sqlcipher

我开始在 Android (ver) 2.1.1 上使用 sqlCipher，它在 Android 4.0.3 上的工作方式就像魅力一样。但是我发现`SQLiteOpenHelper`该类没有采用自定义错误处理程序的构造函数。这`SQLiteOpenHelper`在 android.database 中提供的原始类中非常有用，并且以特定于应用程序的方式处理错误非常有用。有谁知道在使用 sqlCipher 时如何合并自定义错误处理程序？

**android.database.sqlite**中可用的构造函数

 **```
public SQLiteOpenHelper (Context context, String name, SQLiteDatabase.CursorFactory factory, int version);
public SQLiteOpenHelper (Context context, String name, SQLiteDatabase.CursorFactory factory, int version, DatabaseErrorHandler errorHandler); 
```

**net.sqlcipher.database**中可用的构造函数

 **```
public SQLiteOpenHelper (Context context, String name, SQLiteDatabase.CursorFactory factory, int version); 
```

具体来说，当遇到某些类型的错误时，默认错误处理程序（使用 sqlcipher 时）正在删除数据库，尽管是在提供 Log.e 消息之后。但我需要避免它。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:14:56.527

自定义数据库错误处理程序是最近添加到 android.database 包中的。SQLCipher 包基于较旧的 API（级别 7），因此不包含此功能。我们将尝试仔细研究这一点，看看是否可以采取一些措施来解决这个问题而不影响向后兼容性。****

# c - strcpy 与 strdup

> ID：14020380
> 
> 赞同：80
> 
> 时间：2012-12-24T10:53:51.343
> 
> 标签：c, strcpy, strdup

我读到这`strcpy`是用于复制字符串，并`strdup`返回指向新字符串的指针以复制字符串。

您能否解释一下您喜欢使用`strcpy`哪些案例以及您喜欢使用哪些案例`strdup`？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-12-24T11:51:50.013

`strcpy(ptr2, ptr1)`相当于`while(*ptr2++ = *ptr1++)`

其中 strdup 相当于

```
ptr2 = malloc(strlen(ptr1)+1);
strcpy(ptr2,ptr1); 
```

（[memcpy 版本](https://stackoverflow.com/a/38033333/2436175)可能更有效）

因此，如果您希望将复制的字符串用于另一个函数（因为它是在堆部分创建的），您可以使用 strdup，否则 strcpy 就足够了。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-12-24T12:36:39.537

函数`strcpy`和`strncpy`是 C 标准库的一部分，对现有内存进行操作。也就是说，*您*必须提供函数将字符串数据复制到其中的内存，并且作为推论，*您*必须有自己的方法来找出您需要多少内存。

相比之下，`strdup`它是一个 Posix 函数，它为您执行动态内存分配。它返回一个指向新分配的内存的指针，它已将字符串复制到该内存中。但*你*现在要对这段记忆负责，而且最终必须要负责`free`。

这使得`strdup`它成为“隐藏`malloc`”的便利功能之一，这可能也是它不是标准库的一部分的原因。只要您使用标准库，您就知道必须`free`为每个`malloc`/调用一个`calloc`。但是`strdup`引入了一个 hidden等函数，为了内存管理`malloc`，你必须把它和 a 一样对待。`malloc`（另一个这样的隐藏分配函数是 GCC 的`abi::__cxa_demangle()`。）当心！

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-24T10:57:57.903

`strdup`为堆上的新字符串分配内存，同时使用`strcpy`（或其更安全的变体）我可以将字符串复制到堆**或**堆栈`strncpy`上的预分配内存。

 *** * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-06-25T22:01:11.830

在[接受的答案](https://stackoverflow.com/a/14021039/2436175)中，的实现`strdup`表示为：

```
ptr2 = malloc(strlen(ptr1)+1);
strcpy(ptr2,ptr1); 
```

但是，这有点不太理想，因为两者都`strlen`需要`strcpy`通过检查每个字符是否为`\0`.

使用`memcpy`应该更有效：

```
char *strdup(const char *src) {
    size_t len = strlen(src) + 1;
    char *s = malloc(len);
    if (s == NULL)
        return NULL;
    return (char *)memcpy(s, src, len);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-07T04:52:54.403

`char *strdup(char *pszSrch)`;

`strdup`将分配存储原始字符串的大小。如果存储分配成功，则将原始字符串复制到重复字符串。

`strdup`d`NULL`失败返回。如果未分配内存，则复制失败`strdup`return `NULL`。**

# python - wxpython - 将 PIL.ImageFont 转换为 wx.Font 或 wx.Bitmap

> ID：14020381
> 
> 赞同：1
> 
> 时间：2012-12-24T10:54:04.367
> 
> 标签：python, python-2.7, wxpython, python-imaging-library, splash-screen

背景：我正在编写一个模块来创建具有多个进度条（0-5）的自定义启动屏幕。启动画面可以以多种模式显示（全屏无框、屏幕百分比/无框或固定大小/无框），并且可以容纳 0-5 个链接进度表。进度表可以有一般标题，也可以显示在仪表本身的内联、上方或下方的功能特定信息。

EX：加载配置：用户配置文件（“加载配置”是一个通用标题，“用户配置文件”是特定于任务的。）

闪屏本身也可以有文本组件。

初始屏幕主要是一个带有图像背景的帧，它使用缓冲绘制来显示与所讨论的程序相关联的图像。

问题：

我希望能够为正在显示的文本部分使用自定义字体（TTF 和 OTF）。Python Imaging Library 似乎可以将自定义字体文件作为`PIL.ImageFont`对象加载，但在`wx`. 所以我的问题是三个部分。

1)当字体随程序提供但未作为系统字体安装时，是否`wx.Python`能够加载自定义字体文件 ( `ttf` ***AND )；*** `otf`

如果不，

2）是否可以将 a 转换`PIL.ImageFont`为 a `wx.Font`，或`wx.Bitmap` （`wx.Font`首选）；

如果是这样，

3）如何？

`Clarification:`

我根本不想使用 PIL。这里的目标是使用 PIL 足够长的时间来让自定义字体发挥作用，然后使用 wx.Python 进行所有进一步的处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:53:32.380

事实证明，一个`PIL.ImageFont`项目就是这样，一个图像。甚至不需要转换为另一种形式的字体，只需识别出原始字体是图像，因此可以转换为 a`wx.Image`并通过 is 提供的方法进行绘制`wx`。

[这份文件](http://wiki.wxpython.org/WorkingWithImages#PIL_.28Python_Imaging_Library.29)的发现为我提供了所有需要的答案。

# java - 如何使用 jython jar 将 python 模块添加到 java 中

> ID：14020382
> 
> 赞同：1
> 
> 时间：2012-12-24T10:54:03.970
> 
> 标签：java, python, netbeans, python-2.7, jython

我使用 Netbeans 平台使用 java 语言构建我的应用程序。我需要使用 jython 将一些 python 函数调用到 java 类中是唯一的方法。不幸的是，当我尝试运行程序时出现错误，表明应用程序没有找到以下模块

```
Exception in thread "main" Traceback (most recent call last):

File "script.py", line 13, in <module>
    import re
ImportError: No module named re
  File "script.py", line 14, in <module>
    from string import *
ImportError: No module named string
Java Result: 1 
```

这是**script.py**中的代码，我想在我的 java 类中调用它的方法之一

```
#!/pkg/ldc/bin/python2.1

import xml.parsers.expat
import re
from string import *
import sys 
```

如何将这些 python 模块添加到我的应用程序中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:10:27.770

以下代码在我的带有 Jython 2.7 和 Java 1.6 的 Ubuntu 机器上运行良好（使用 Eclipse 和终端测试）：

```
package myjythonproject;
import org.python.util.PythonInterpreter;

public class MyJythonProject {

    public static void main(String[] args) {
        try
        {
            PythonInterpreter.initialize(System.getProperties(), System.getProperties(), new String[0]);
            PythonInterpreter interp = new PythonInterpreter();
            interp.execfile("/home/vicent/foo.py");
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

只需确保在您的类路径中使用 jython.jar 进行编译和执行。

**更新**

我刚刚在我的 Ubuntu 机器上安装了 NetBeans 7.2.1（Java SE 版本），创建了一个新的 Java 项目 MyJythonProject，并将上面显示的代码添加到 MyJythonProject.java 文件中。然后在`Properties`我`Libraries`在左窗格中选择的项目对话框中。在右窗格中，我选择了`Compile`选项卡，单击`Add JARF/folder`按钮并选择了我的 jython jar (/opt/jython2.7a2/jython.jar)。我已经关闭了对话框并在`Run`我选择的主窗口的菜单中`Clean and Build Project (MyJythonProject)`。之后我运行了这个项目，它就像一个魅力。不需要 Python/Jython 插件，只需告诉您的项目 jython.jar 的安装位置。

**更新 2**

另请注意，Jython 不支持 Python3，因此您必须使用 Python2.x 解释器。

# ruby-on-rails - 通过链接多个模型在MongoDB中实现数据库

> ID：14020384
> 
> 赞同：-1
> 
> 时间：2012-12-24T10:54:10.330
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb, mongoid

我有员工模型，其中有许多控制器，例如

```
jobs_controller.rb
contacts_controller.rb
personals_controller.rb
dependets_controller.rb 
```

它们都与 Employee 控制器有关。我正在使用 MongoDb，因为我有不同的控制器，我也有不同的型号。在我的仪表板中，我必须显示相关的员工详细信息。其中一个字段来自联系人控制器，另一个来自dependents_controller，另一个来自个人控制器。在这里，我必须调用所有模型并从每个模型中获取一个字段。我可以通过显示一个相关模型的每个字段来自定义此代码吗？我正在使用设计。我不能存储每个用户相关数据的 id 并通过用户模型调用吗？我搞砸了..如果是，那怎么办？在我的员工控制器中

```
def index
    @employees = Employee.all
    Employee.includes(:dependants).each do |dependant|
     p dependant.firstname #example of pulling data for that related entity
     end

  end 
```

另外我如何找到相关人员数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:24:54.793

查看 mongoid 文档的这一部分：http://mongoid.org/en/mongoid/docs/relations.html[它](http://mongoid.org/en/mongoid/docs/relations.html) 应该可以很好地说明如何在模型中实现关系逻辑。

但是，我强烈建议您先阅读以下内容：http: [//docs.mongodb.org/manual/core/data-modeling](http://docs.mongodb.org/manual/core/data-modeling)

特别是引用和原子性部分。

过去我发现没有完全掌握 mongo 和事务数据库引擎（如 innodb）之间的差异，这导致我在项目中途重新设计我的模型。

应要求澄清

您可以按照我的第一个链接所述设置模型：

```
class Employee
  include Mongoid::Document
  field :address, type: String
  field :work, type: String
  has_many :dependants
end

class Dependant
  include Mongoid::Document
  field :firstname, type: String
  field :lastname, type: String
  belongs_to :employee
end 
```

然后，在您的控制器中，您可以通过员工访问家属数据：

```
#this example loops through every employee in the collection
Employee.includes(:dependants).each do |employee|
  employee.dependants.each do |dependant|
   p dependant.firstname #example of pulling data for that related entity
  end
end 
```

# iphone - 如何为不可编辑的 UITextView 设置光标位置？

> ID：14020385
> 
> 赞同：2
> 
> 时间：2012-12-24T10:54:11.090
> 
> 标签：iphone, ios

我没有可编辑的 UITextView。当它获得焦点时，光标位置在开头。如何设置光标的位置？（我正在使用带有盲文键盘的 iPhone 设计，当不可编辑的 UITextView 获得焦点时，我从一开始就有文本，所以我需要设置光标的位置。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:37:05.100

如果要在末尾设置光标位置，请像这样使用此委托::

```
- (void)textViewDidChangeSelection:(UITextView *)textView{
textView.text =[NSString stringWithFormat:@"%@",textView.text];
}

- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text{
return NO;
} 
```

记住一件事将 UITextView 属性设置为 yes 以显示光标

# java - 访问父属性的注释

> ID：14020389
> 
> 赞同：0
> 
> 时间：2012-12-24T10:54:31.720
> 
> 标签：java, reflection

假设我有两个以下课程

```
class Parent extends MyBase {
    @Annot(key="some.key", ref=Child.class)
    public List<Child> children = new List<Child>();
}

class Child extends MyBase {
    @Annot(key="another.key")
    public String id;
} 
```

现在说我有

*   一个`Parent`类对象 =>`parent`和
*   列表中包含 3 个`Child`类对象`children`。

这意味着`parent.children.get(0).id`可以访问。现在我需要形成属性的***键序列*****`id`**。这`Key Sequence`是所有注释`key`值的串联字符串。`@Annot`例如，在这种情况下，键序列是**`some.key/another.key`**

有什么方法可以通过java反射完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T01:05:55.213

This is a possible way which doesn't use objects in `children`. It inspects generic type of children and scans this class to find an annotation.

```
 Field childrenField = Parent.class.getField("children");
    Annotation[] annotations = childrenField.getDeclaredAnnotations();

    String key = null;
    for (Annotation annotation : annotations) {
        if (annotation instanceof Annot) {
            Annot a = (Annot) annotation;
            key = a.key();
            break;
        }
    }

    ParameterizedType type = (ParameterizedType) childrenField.getGenericType();
    Class<?> c = (Class<?>) type.getActualTypeArguments()[0];
    annotations = c.getDeclaredField("id").getAnnotations();
    for (Annotation annotation : annotations) {
        if (annotation instanceof Annot) {
            Annot a = (Annot) annotation;
            key += "/" + a.key();
            break;
        }
    }

    System.out.println(key); 
```

See [this guide](http://tutorials.jenkov.com/java-reflection/annotations.html) for more information about annotations.

# c - 从用 C 编写的程序中读取 Arduino 串行输出的微小、基本、通用示例？

> ID：14020397
> 
> 赞同：2
> 
> 时间：2012-12-24T10:55:07.487
> 
> 标签：c, usb, arduino

我试图弄清楚如何通过 USB 端口从我的 Arduino Mega 2560 获取信息到在 Xubuntu 中运行的 C 程序。

我正在尝试将最简单的示例放在一起作为起点。

Arduino IDE 附带了一些不错的基本示例，其中之一是[Graph](http://www.arduino.cc/en/Tutorial/Graph)，它只是打印来自电位计或其他模拟传感器的值：

```
void setup() {
  Serial.begin(9600);
}

void loop() {
  Serial.println(analogRead(A0));
  delay(2);
} 
```

那里没有问题，但是至于将在我的计算机上运行并接收数据的程序，这是我到目前为止所拥有的（在阅读[本文](http://www.c-program.com/pdf/serialPort_Programming_c.pdf)并进行更多挖掘后更新）：

```
/* prints the output from an Arduino running the "Graph" example.
 */

#include <stdio.h>
#include <sys/fcntl.h>
#include <termios.h>

int main(void)
{
  int fd = 0;
  char buffer[32];
  int n;
  fd = open("/dev/ttyACM0", O_RDWR | O_NOCTTY | O_NDELAY);
  while(1)
  {
    read(fd, buffer, sizeof(buffer));
    n = atoi(buffer);
    printf("%d\n", n);
  }
  close(fd);
} 
```

这*几乎*可以正常工作，但它似乎丢失的消息比收到的消息多，而且很多消息都不完整。

在此过程中可以设置几个选项和标志，但我无法确定要设置哪些选项和标志。

最终，我计划使用通过我的 Arduino 运行的各种传感器来控制在我的计算机上运行的基于 SDL 的应用程序，但只要我能得到那个字符串，我就应该回到熟悉的领域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T03:37:40.860

您的缓冲区可以（并且很可能）包含多条消息。它还可能包含不完整的消息（`read()`调用可能会在读取您要求的所有数据之前返回）。

例如，如果您收到的数据是文本形式的 -`'\n'`分隔（或`'\0'`，或`space`，或其他）数字流，则您的缓冲区最终可能看起来像`0123\n4567\n89ab`. 然后，当您调用 时`atoi()`，它会转换`0123`为 123 并跳到循环的下一次迭代，同时放弃缓冲区中剩余的所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:15:11.347

[这](http://chrisheydrick.com/2012/06/24/how-to-read-serial-data-from-an-arduino-in-linux-with-c-part-4/)就是我一直在寻找的。

# c - 为什么我的程序中有无限循环？

> ID：14020402
> 
> 赞同：10
> 
> 时间：2012-12-24T10:55:40.733
> 
> 标签：c, arrays, for-loop, infinite-loop

```
int main(void)
{
    int i;
    int array[5];

    for (i = 0; i <= 20; i++)
    array[i] = 0;

    return 0;
} 
```

为什么上面的代码会陷入死循环？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-24T10:57:22.233

您声明了一个包含 5 个元素的数组，但向其中写入了 21 个元素。写入数组末尾会导致未定义的行为。在您的情况下，您正在写入循环计数器`i`，将其重置为 0，可能是在您分配`array[5]`.

如果要修复程序，请更改循环以写入正确数量的元素

```
int num_elems = sizeof(array) / sizeof(array[0]);
for (i = 0; i < num_elems ; i++) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-24T10:57:23.653

您通过覆盖超出允许的内存来调用未定义的行为。所以任何事情都可能发生。

最有可能的是，它正在覆盖循环计数器。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-24T11:41:08.903

这是给定代码中发生的事情。

```
#include<stdio.h>
#include<string.h>
int main(void)
{
    int i;
    int array[5];

    for (i = 0; i <= 20; i++)
    {
        printf("%p %p \n",&i,&array[i]);
        printf("the value of i is %d \n",i);
        sleep(1);
        array[i] = 0;
        printf("i may be modified here lets see what i is %d \n", i);
    }

    return 0;
} 
```

在我的堆栈内存中，我得到了地址位置

`i`存储在位置 0xbfd1048c 地址

并`array`存储在位置 0xbfd10478 地址

当您`i`在某个时间点为每个循环增加值时，地址`array[i]`等于地址`i`（它只是指针取消引用）

因此，您存储的`array[i]`只是`i`' 的实例地址，因此您将`i`' 的实例值重写为 0，正如您所提到`array[i] = 0`的，这相当于`i=0`因此条件`i<=20`始终成功。

现在最大的问题是为什么以这种方式分配内存。

它是在运行时和内核资源的可用性决定的。

所以这就是为什么我们必须忍受数组的限制。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-24T10:57:39.700

问题是当您尝试访问数组边界之外的元素时，该元素只有 5 大 - 但在一个 21 大的循环中。

```
int main(void)
{
    int i;
    int array[5];

    for (i = 0; i < 5; i++)
    array[i] = 0;

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T10:57:49.387

我没有看到任何无限循环条件，但是您在具有 5 个“插槽”的数组上设置了多达 20 个值？？？

# mysql - 从 MYSQL 中提取日期

> ID：14020404
> 
> 赞同：0
> 
> 时间：2012-12-24T10:55:53.470
> 
> 标签：mysql

```
$query = "SELECT asset_id FROM #__content WHERE state = 1 AND YEARWEEK(publish_up) = YEARWEEK(NOW())"; 
```

使用这个字符串，我可以在一周内创建所有文章，但问题是，它从周一到周日计算，无论如何我都需要它连续 7 天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:18:49.203

不确定这是否是您要求的。

`SELECT asset_id FROM #__content WHERE state = 1 AND DATE(publish_up) >= DATE_SUB(CURRENT_DATE, INTERVAL 7 DAY)`

# html - 关于从链接 html 下载文件

> ID：14020417
> 
> 赞同：0
> 
> 时间：2012-12-24T10:56:23.797
> 
> 标签：html, dreamweaver, wampserver

我想向我的网站添加一个文件以供下载，我正在使用 html5、wampserver 和 dreamweaver。

我使用了以下代码（它工作正常）：

```
 <a href="UploadFiles/MyFile.pdf" target="_blank">Program Download</a> 
```

我的问题是：

我现在在本地主机上工作，但是当我离开时，将我的网站上线，有什么变化吗？例如：文件位置的地址 http://.... 或者我不会更改任何内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:01:23.750

如果您的 html 页面与 UploadFiles 目录位于同一级别，那么您应该没问题，例如

索引.html

上传文件/MyFile.pdf

我建议使用小写文件名和目录名，这样做通常是最佳做法，并且更容易获得正确的路径等。

您在链接中使用的路径称为相对路径，但您也可以使用如下所示的绝对路径：

```
<a href="/UploadFiles/MyFile.pdf" target="_blank">Program Download</a> 
```

绝对路径的好处是无论您的 html 页面位于文件结构中的哪个位置，它都可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:03:02.077

如果您使用的是相对链接（也就是说，第一个字符不是斜杠，并且不以 开头`"http://"`），那么服务器上的一切都应该是一样的。

# jquery - jQuery隐藏和显示按钮使用if else

> ID：14020420
> 
> 赞同：0
> 
> 时间：2012-12-24T10:56:38.773
> 
> 标签：jquery, html, css, hide, show-hide

我的页面中有一系列选项卡，我想先隐藏按钮，然后当您单击页面中的某个选项卡时 - 然后显示按钮。这一点我有工作！

我的问题是 - 当我单击另一个选项卡时，我希望`hide()`再次将按钮设置为。我是新手`jQuery`，我想我需要添加一个`if else`声明来做到这一点？

下面的代码：

```
$(document).ready(function () { 
    $('.myButton').hide();

    $('a.tab1').click(function() {
        $('.myButton').show();
        return false;
    });
    $('.myButton').hide(); // hide again once clicked off the tab.
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T11:00:54.860

此代码仅在您单击具有类的选项卡时才有效`tab1`。检查页面中的所有选项卡是否具有此类，如果没有，请将此类分配给页面中的**所有**选项卡。

此外，该功能在这种情况下`toggle()`起作用。`if` `else`因此，如果按钮可见`toggle`将使其隐藏，否则将使其可见：

```
<a class="tab1">tab1</a>
<a class="tab1">tab2</a>

$(document).ready(function(){
$('.myButton').hide();

$('.tab1').click(function() {
  $('.myButton').toggle();
});
}); 
```

**[尝试一下](http://jsfiddle.net/2LbLp/1/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T11:10:03.427

所以我假设你想用你的按钮跟随。

1.  页面加载时不应出现
2.  仅在单击某个选项卡（例如 tab1）时才应出现。
3.  单击任何其他选项卡（tab1 除外）时应消失。

然后让它变得简单，将您的代码更改为简单。做这个：

```
<script>
$(document).ready(function(){
  $('.button').hide(0);  //or do it through css
  $('a.tab1').click(function(){
     $('.button').show();

  });

 //otherTab is the class for the tabs other than tab1
 $('a.otherTab').click(function(){
    $('.button').hide();
 });

});
</script> 
```

这是一个超级简单的脚本来实现你想要的。它可以更通用和更短。但是你应该明白这个想法吗？您应该能够选择各自选项卡的点击事件，这就是您需要整理的所有内容。

**分配 Id 或 Class 或其他任何东西来清楚地抓住你的标签。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T11:00:43.707

```
$(function(){
    $('div').hide(0);
    $('button').on('click',function(){
    $('div').toggle(200);
    });
}); 
```

那么如果你可以/将使用淡入淡出效果来隐藏和显示你的元素点击你可以选择类似的东西（漂亮的动画）：

```
$(function(){
        $('div').hide(0);
        $('button').on('click',function(){
        $('div').fadeToggle(200);
        });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T11:03:30.177

参见`.toggle()`jQuery。具有相同的 if 语句，但由 jQuery 库管理。

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T11:12:38.303

将点击事件添加到所有“选项卡”链接元素的父级。

```
$('.parentofTabLinks').click(function(event) {
    if($(event.target).is('a.tab1'))
        $('.myButton').show();
    else
       $('.myButton').hide();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T11:46:24.343

保持 jquery dom 搜索，不要错过不保持 html 链接跟随

```
var mybutton = $("#mybutton");

$('a.tab_who_show').click(function(event)
{
        mybutton.show();
        event.preventDefault();
});

$('a.tab_who_hide').click(function(event)
{
        mybutton.hide();
        event.preventDefault();
}); 
```

您还可以使用 jquery.on 在容器上工作

```
var mybutton = $("#mybutton");
$('#tabs_container').on("click","a.tab_who_hide",function(e){
        mybutton.hide();
        e.preventDefault();
}).on("click","a.tab_who_show",function(e){
        mybutton.show();
        e.preventDefault();
}); 
```

并测试类的存在以编写更全局的代码

```
var mybutton = $("#mybutton");
$('#tabs_container').on("click","a",function(e){
        var needToShow = $(this).hasClass('tab_who_show');
        mybutton.toggle(needToShow);
        e.preventDefault();
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-02T08:55:06.443

```
$(document).ready(function(){
    $("button").click(function(){
        // show hide paragraph on button click
        $("p").toggle("slow", function(){
            // check paragraph once toggle effect is completed
            if($("p").is(":visible")){
                alert("The paragraph  is visible.");
            } else{
                alert("The paragraph  is hidden.");
            }
        });
    });
}); 
```

# android - ListView onItemClick 在活动中不起作用

> ID：14020423
> 
> 赞同：2
> 
> 时间：2012-12-24T10:56:41.917
> 
> 标签：android, listview, onitemclicklistener

当我在具有 ListView 的活动中使用它时，它不起作用。

```
usersList.setOnItemClickListener(new AdapterView.OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
            ong arg3) {
    try {
        Intent intent = new Intent(UsersListActivity.this,
                UserActivity.class);
        startActivity(intent);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}); 
```

在寻找解决方案后，我最终在`getView()`适配器**中完成了**

```
convertView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
            ong arg3) {
    try {
        Intent intent = new Intent(mActivity,
                UserActivity.class);
        mActivity.startActivity(intent);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}); 
```

这行得通。但是为什么会有这种奇怪的行为。为什么它没有按应有的方式工作。

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T11:11:14.103

> `usersList.setOnItemClickListener(new AdapterView.OnItemClickListener() {`

这里你使用`View`了 of `Adapter View`，它是你的父类`Custom Adapter`。这就是为什么它不起作用。相反，您应该使用`View`of `Custom Adapter`。

`getView()`这里的函数可以帮助您将父视图转换为`Adpater View`视图`Custom Adapter`。

所以你使用这两个选项中的任何一个，

```
usersList.setOnItemClickListener(new CustomAdapterView.OnItemClickListener() { 
```

或者

```
usersList.setOnItemClickListener(new OnItemClickListener() { 
```

这两个选项都可能有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-20T10:10:13.250

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T11:04:49.883

它会起作用的

```
lv.setOnItemClickListener(new OnItemClickListener() {

public void onItemClick(AdapterView<?> arg0, View arg1,int position, long arg3) {
   // TODO Auto-generated method stub

     try {
       Intent intent = new Intent(mActivity, UserActivity.class);
       mActivity.startActivity(intent);
       } catch (Exception e) {
         e.printStackTrace();
      }
   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T11:04:07.363

如果你有一个自定义的 AdapterView，你需要参考那个 AdapterView。我认为如果您提到超类适配器视图并且当您调用时，`setAdapter()`您的代码块`new AdapterView.OnItemClickListener()`将不会执行。

```
usersList.setOnItemClickListener(new CustomAdapterView.OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
            ong arg3) {
    try {
        Intent intent = new Intent(UsersListActivity.this,
                UserActivity.class);
        startActivity(intent);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-24T11:05:08.847

尝试在 Activity 类中使​​用此行。

```
usersList.setOnItemClickListener(new OnItemClickListener() { 
```

此行仅在 Activity 类中使​​用适配器，这是行不通的。我想不确定

```
usersList.setOnItemClickListener(new AdapterView.OnItemClickListener() { 
```

# jakarta-ee - 远程 EJB 调用的事务

> ID：14020425
> 
> 赞同：3
> 
> 时间：2012-12-24T10:56:50.500
> 
> 标签：jakarta-ee, glassfish, glassfish-3, ejb-3.1, corba

我对 glassfish 中的交易和 CORBA 有一个奇怪的问题。我可以解决问题，但我仍然不知道为什么会发生此错误：

我有两个类，我们称它们为**Client**和**RemoteImpl**。**客户端**在一台服务器上，**远程**在另一台服务器上。

**客户端**看起来像这样（更简单的例子，不是真正的代码）：

```
@Stateless
public class Client {

    @EJB(name = "TheRemoteEJB")
    protected Remote remoteEJB;

    @Schedule(hour = "*", minute = "*/5", persistent = false)
    @TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)
    public void doSomeStuff() {
      for(int i=0;i<300000;i++){
        remoteEJB.theMethodToCall(i);
        ... other code that may take a bit longer...
      }
    }
} 
```

**RemoteImpl**看起来像这样：

```
@Stateless
@Remote(RemoteInterface.class)
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
public class RemoteImpl {

  @EJB
  private SomeJPAFacade facade;

  @Override
  public int theMethodToCall(int param) throws SomeException {
    Bean products = facade.findBySomeSelect(param);
    return bean.getAValue();
  }
} 
```

其他使用的类是：

**一些异常**：

```
public class SomeException extends Exception {
 public SomeException() {
   super();
 }
 public SomeException(String message) {
   super(message);
 }
} 
```

和**远程接口**

```
public interface RemoteInterface {
  public int theMethodToCall() throws SomeException
} 
```

问题是，当**doSomeStuff**花费太长时间时，会引发 CORBA 异常：

```
[#|2012-12-22T03:10:03.327+0100|INFO|glassfish3.1.2|com.foo.bar.Client|_ThreadID=47;_ThreadName=Thread-2;|javax.ejb.EJBException: javax.transaction.InvalidTransactionException: CORBA INVALID_TRANSACTION 0 No
; nested exception is:
    org.omg.CORBA.INVALID_TRANSACTION:   vmcid: 0x0  minor code: 0  completed: No
    at com.foo.bar.Client._Remote_Wrapper.theMethodToCall(com/foo/bar/_RemoteInterface_Wrapper.java)
    at com.foo.bar.Client.doSomeStuff(Client.java:73)
    at sun.reflect.GeneratedMethodAccessor3162.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at org.jboss.weld.ejb.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:49)
    at sun.reflect.GeneratedMethodAccessor80.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundTimeout(SystemInterceptorProxy.java:149)
    at sun.reflect.GeneratedMethodAccessor371.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.BaseContainer.callEJBTimeout(BaseContainer.java:4058)
    at com.sun.ejb.containers.EJBTimerService.deliverTimeout(EJBTimerService.java:1832)
    at com.sun.ejb.containers.EJBTimerService.access$100(EJBTimerService.java:108)
    at com.sun.ejb.containers.EJBTimerService$TaskExpiredWork.run(EJBTimerService.java:2646)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.transaction.InvalidTransactionException: CORBA INVALID_TRANSACTION 0 No; nested exception is:
    org.omg.CORBA.INVALID_TRANSACTION:   vmcid: 0x0  minor code: 0  completed: No
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.mapSystemException(Util.java:281)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:213)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.invoke(StubInvocationHandlerImpl.java:152)
    at com.sun.corba.ee.impl.presentation.rmi.codegen.CodegenStubBase.invoke(CodegenStubBase.java:227)
    at com.foo.bar.__RemoteInterface_Remote_DynamicStub.matchByParityId(com/foo/bar/__RemoteInterface_Remote_DynamicStub.java)
    ... 39 more
Caused by: org.omg.CORBA.INVALID_TRANSACTION:   vmcid: 0x0  minor code: 0  completed: No
    at com.sun.jts.CosTransactions.CurrentTransaction.sendingRequest(CurrentTransaction.java:812)
    at com.sun.jts.CosTransactions.SenderReceiver.sending_request(SenderReceiver.java:138)
    at com.sun.jts.pi.InterceptorImpl.send_request(InterceptorImpl.java:338)
    at com.sun.corba.ee.impl.interceptors.InterceptorInvoker.invokeClientInterceptorStartingPoint(InterceptorInvoker.java:290)
    at com.sun.corba.ee.impl.interceptors.PIHandlerImpl.invokeClientPIStartingPoint(PIHandlerImpl.java:376)
    at com.sun.corba.ee.impl.protocol.CorbaClientRequestDispatcherImpl.beginRequest(CorbaClientRequestDispatcherImpl.java:304)
    at com.sun.corba.ee.impl.protocol.CorbaClientDelegateImpl.request(CorbaClientDelegateImpl.java:228)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:194)
    ... 42 more
Caused by: org.omg.CosTransactions.Unavailable: IDL:omg.org/CosTransactions/Unavailable:1.0
    at com.sun.jts.CosTransactions.TopCoordinator.get_txcontext(TopCoordinator.java:2787)
    at com.sun.jts.CosTransactions.ControlImpl.getTXContext(ControlImpl.java:824)
    at com.sun.jts.CosTransactions.CurrentTransaction.sendingRequest(CurrentTransaction.java:804)
    ... 49 more
|#] 
```

我明确告诉 ApllicationServer `@TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)`，因为我不想跨越事务。但异常看起来像是有交易。我一直认为事务不能跨越对另一个 glassfish 实例的远程调用？

我可以通过删除并在**Client**`@TransactionAttribute`类中添加一个来解决问题。`@TransactionManagement(TransactionManagementType.BEAN)`

 **但我仍然想知道为什么会发生这个错误。

感谢您的回复。

**更新：** 错误报告已归档于：[https ://java.net/jira/browse/GLASSFISH-17535](https://java.net/jira/browse/GLASSFISH-17535)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:52:46.610

[NOT_SUPPORTED](http://docs.oracle.com/javaee/6/api/javax/ejb/TransactionAttributeType.html#NOT_SUPPORTED)表示`The container invokes an enterprise bean method whose transaction attribute NOT_SUPPORTED with an unspecified transaction context.`

似乎未指定的上下文导致了无效的事务异常。

通过使用 bean 托管事务，您告诉容器不要提供任何事务上下文，以防止该异常。

这对我来说就像一个错误，我的直觉告诉我这应该有效，我对 glassfish 不是很熟悉。**

# c# - 如何获得 PPID

> ID：14020430
> 
> 赞同：2
> 
> 时间：2012-12-24T10:57:08.537
> 
> 标签：c#, process

我正在处理一个 MS Windows C# Winform 项目，但我无法获得 PPID（父进程 ID）。我找到了许多解决方案，但似乎没有一个适用于上述操作系统和语言。

如何获得 PPID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:38:09.683

如果您可以使用 System.Management，那就很简单了：

```
 private static int GetParentProcess(int Id)
    {
        int parentPid = 0;
        using (ManagementObject mo = new ManagementObject("win32_process.handle='" + Id.ToString() + "'"))
        {
            mo.Get();
            parentPid = Convert.ToInt32(mo["ParentProcessId"]);
        }
        return parentPid;
    } 
```

否则，您可能不得不[像这样通过 CreateToolhelp32Snapshot 求助于 P/Invoke 调用](http://www.pinvoke.net/default.aspx/kernel32/CreateToolhelp32Snapshot.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T13:26:09.397

.NET 不提供内置方式。`Process.GetProcesses()`它本身用于`NtQuerySystemInformation(SystemProcessInformation,)`查询大多数进程属性，它返回的条目有一个代码不使用的 PPID 字段。

所以，要走的路是使用外部技术：

*   **WMI**根据[holtavolt 的回答](https://stackoverflow.com/a/14022109/648265)

*   **`toolhelp32`API**，例如[从 Process name 获取进程的 ID](https://stackoverflow.com/questions/14176683/getting-the-id-of-a-process-from-process-name/14176780#14176780)。它可以对特定或所有进程进行快照。

*   **`NtQueryInformationProcess(,ProcessBasicInformation,)`**根据[Fetching parent process Id from child process](https://stackoverflow.com/questions/5321914/fetching-parent-process-id-from-child-process#5322740)。

*   之前所提**`NtQuerySystemInformation(SystemProcessInformation,)`**

其他需要注意的事项：

*   请记住，您获得信息的任何进程都可以随时结束（关键系统进程除外，但您可能对它们不太感兴趣）

*   PID 可在 Windows 中重复使用，而无需重置 PPID。要过滤掉可能的“假父母”，请查看`StartTime`. 真正的父母会比孩子更早开始，一个假的——晚一点。

# servlets - 哪种方法用于启动新的异步请求/响应周期？

> ID：14020437
> 
> 赞同：1
> 
> 时间：2012-12-24T10:57:36.867
> 
> 标签：servlets, asynchronous, servlet-3.0

这个问题在我的一本书中：

> 哪种方法用于启动新的异步请求/响应周期？

这个问题的可能答案是

```
A. ServletContext.newAsync()
B. ServletContext.startAsync()
C. ServletRequest.newAsync()
D. ServletRequest.runASync()
E. ServletRequest.getAsyncContext() 
```

关于这本书的正确答案是 C，但我在 API 中找不到该方法。

书中的解释是该方法返回一个`AsyncContext`但在`ServletRequest`(not `ServletContext`) 上执行。

有没有可能答案是`ServletRequest.startAsync()`正确的，而这本书有误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:40:19.010

看来这本书是错的。

正确的做法是使用`ServletRequest.startAsync()`，此方法将请求置于异步模式，初始化并返回`AsyncContext`.

`ServletRequest`甚至没有一个名为的方法`newAsync`

似乎这些答案都不正确

# android - 带有虚拟键盘的 Android 屏幕截图（以编程方式）

> ID：14020441
> 
> 赞同：1
> 
> 时间：2012-12-24T10:57:43.630
> 
> 标签：android, android-emulator, keyboard, screenshot

我有一个项目，其中包括**android 内容的根视图的屏幕截图**。但是，如果有人单击**编辑文本**并打开虚拟键盘，我无法在我的图片中获得此键盘视图。我的意思是 android 内容的根视图不包含虚拟键盘。我怎样才能添加它？这是我的屏幕截图代码：

```
Bitmap bitmap;
    View v1 = this.findViewById(android.R.id.content).getRootView();
    v1.setDrawingCacheEnabled(true);
    bitmap = Bitmap.createBitmap(v1.getDrawingCache());
    v1.setDrawingCacheEnabled(false);
    OutputStream fout = null;
    imageFile = new File(filePath);
    try {
        fout = new FileOutputStream(imageFile);
        bitmap.compress(Bitmap.CompressFormat.JPEG, 70, fout);
        fout.flush();
        fout.close();
    }catch (Exception e) {
        e.printStackTrace();
    } 
```

而且我正在研究android模拟器。感谢您从现在开始的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:11:14.950

您不能这样做，因为您只能在自己的应用程序中获取视图的内容。在 Android 上，键盘算作第三方应用程序，您无法获取其视图内容。

如果您可以使用 Android 4.0 或更高版本（或其他一些运行较低版本但具有制造商添加的屏幕截图功能的设备（如某些三星 Galaxy 系列设备）），您可以通过按电源按钮和降低音量按钮（非 Nexus 设备上的组合键可能不同）。

除此之外，您可以尝试解析帧缓冲区，这需要在某些设备上进行 root 访问。帧缓冲区通常位于`/dev/fb0`或`/dev/graphics/fb0`。在某些设备（如 LG Optimus One）上，无需 root 权限即可访问，但在大多数设备（如 Nexus S）上，您需要为此获得 root 权限。出于安全原因，通常不允许这样做，因为恶意应用程序可能会在后台截取屏幕截图并将其发送到远程服务器，从而泄露电子邮件 ID 和密码等信息，在某些情况下还会泄露银行账户详细信息。

# javascript - Rangy 错误：deserializeRange：页面加载后序列化范围根节点的校验和不匹配

> ID：14020443
> 
> 赞同：3
> 
> 时间：2012-12-24T10:57:54.693
> 
> 标签：javascript, rangy, tiki-wiki

我正在通过我的动态网页上的 rangy 保存选择。但是当我重新加载页面并恢复选择时，我收到以下错误：

> 错误：deserializeRange：序列化范围根节点 (f3909155) 和目标根节点 (c21b08a9) 的校验和不匹配

页面源根本没有改变，所有的 HTML 都是一样的。我正在使用 Tikiwiki CMS。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T04:11:17.377

要解决此错误，您需要将`omitChecksum`参数传递给`serializeSelection`函数。这将阻止 DOM 验证。`serializeSelection`将返回选择的序列化形式，您可以将其保存在 DB 或 cookie 中。

请参见以下示例：

```
var selObj = rangy.getSelection();
var sel = rangy.serializeSelection(selObj, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T10:20:41.200

DOM 可能在某些方面有所不同。确保在序列化之前没有修改选择，例如使用 rangy *CssClassApplier*。

# android-source - 获取android源代码时恢复Repo同步操作

> ID：14020448
> 
> 赞同：1
> 
> 时间：2012-12-24T10:58:05.817
> 
> 标签：android-source, repository

我按照[这里](http://source.android.com/source/downloading.html)的说明运行了`repo sync`问题是在这个确切的时间我的磁盘相应地用完了空间。我有另一台计算机，我想知道我是否只是简单地复制 .repo 并再次运行 repo sync 会起作用吗？或者有什么出路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:45:21.620

我做了一个小研究，这是我的答案。您可能知道 AOSP 由许多单独的 git 项目组成，而 repo 是一个构建在 git 命令之上的工具，用于帮助处理所有这些 git 项目。[该](http://source.android.com/source/using-repo.html)网页告诉`repo sync`第一次命令对应于`git clone`命令。据我了解，如果 git clone 命令被中断，建议删除未完成的存储库克隆并再次启动该命令：

> 克隆大型存储库（例如 KDE、Open Office、Linux 内核）时，目前无法重新启动中断的克隆。小管道末端的用户下载数据可能需要相当长的时间，如果克隆在中间中断，用户当前需要从头开始并重试。对于某些用户来说，这可能会导致无法克隆大型存储库。

但是，一些用户还询问如何纠正不成功的克隆并[在此处](https://groups.google.com/forum/#!topic/git-users/mKtvYdCaZfY)提供一些收据。重点是运行以下命令：

```
$ git fetch
$ git rebase -hard 
```

同时，如果你`repo sync`第二次运行命令它对应于每个项目的命令：

```
git remote update 
git rebase origin/BRANCH 
```

我不太了解 git，也不知道命令之间的区别，但在我看来，命令执行类似的操作。所以我的建议是首先尝试将文件夹从一台计算机复制到第二台计算机，然后再次在第二台计算机上运行 repo sync 命令。如果失败，则删除源并再次启动该过程。

`repo forall`如果您决定单独使用每个 git 项目，命令也可能对您有用。

# vb.net - 在 if 语句中检查多个条件

> ID：14020449
> 
> 赞同：1
> 
> 时间：2012-12-24T10:58:11.167
> 
> 标签：vb.net, visual-studio-2008

我有一个要由用户填写的表格，它有一个复选框来确定用户帐户是否处于活动状态，如果选中该复选框，我想知道它在数据库中是否有用户名和密码，如果不是 msgbox应该出现。我有一个正在研究我需要确定 if 语句......它是否正确，如果不是请解释。

```
 Protected Sub ibtnSave_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles ibtnSave.Click
    objBU_Accounts_Contacts = New BU_Accounts_Contacts
    Dim err As Integer
    With objBU_Accounts_Contacts
        .FK_AccountId = AccountID
        .ContactEmail = txtConEmail.Text
        .ContactFax = txtConFax.Text
        .ContactMobile = txtConMobile.Text
        .ContactName = txtContactName.Text
        .ContactTitle = txtContactTitle.Text
        .ContactTelephone = txtConTel.Text
        .PharmaLicNo = ""
        .PharmaExpDate = ""
        .HasCredintials = False

        If chkActive.Checked = True Then
            .IsActive = True
        Else
            .IsActive = False
        End If
        .IsApproved = True
        .IsMainContact = False
        .Password = ""
        .Remarks = txtConRemarks.Text
        .UserName = ""
        .SecurityAnswer = ""
        .SecurityQuestion = ""

        If chkActive.Checked = True AndAlso ((objBU_Accounts_Contacts.UserName) And (objBU_Accounts_Contacts.Password) IsNot Nothing) Then
            err = .Add()
        Else
            MsgBox("E-submission Account Not Created, Plaese Create One First")
        End If

        If ContactID = 0 Then
            err = .Add()
        Else
            .ContactId = ContactID
            err = .Update()
        End If
    End With
    If err = 0 Then
        If SessionVariables.CultureInfo = "en-US" Then
            CtlCommon.ShowMessage(Me.Page, "Saved Successfully")
        Else
            CtlCommon.ShowMessage(Me.Page, "تم الحفظ بنجاح")
        End If
    Else
        If SessionVariables.CultureInfo = "en-US" Then
            CtlCommon.ShowMessage(Me.Page, "Error while saving")
        Else
            CtlCommon.ShowMessage(Me.Page, "خطأ أثناء الحفظ")
        End If
    End If
    FillGrid()
    ClearAll()
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T11:36:54.757

如果你的意思是，这个 if 语句......

```
If chkActive.Checked = True AndAlso ((objBU_Accounts_Contacts.UserName) And (objBU_Accounts_Contacts.Password) IsNot Nothing) Then 
```

你应该改为

```
If chkActive.Checked = True AndAlso ((objBU_Accounts_Contacts.UserName IsNot Nothing) And (objBU_Accounts_Contacts.Password IsNot Nothing)) Then 
```

我想说，你可以一一比较。

# android - 从应用程序检索密钥库或更改证书

> ID：14020451
> 
> 赞同：4
> 
> 时间：2012-12-24T10:58:25.743
> 
> 标签：android

我弄得一团糟：当我格式化我的电脑时，我丢失了我用来签署我的安卓应用程序的密钥。谷歌抱怨应用更新必须使用相同的证书签名，但我不再拥有它......有没有办法解决这个问题？我可以访问较旧的签名 apk，我不敢相信谷歌只依赖一个文件......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:05:33.897

这是不可能的。密钥库包含一个证书，用于对您的 apk 进行数字签名。每个证书都是完全唯一的，不能从旧的 apk 重新生成或恢复。

谷歌依赖它，因为它非常安全，并允许他们真正减少有人可以破解您的开发者帐户详细信息并上传恶意 apk 作为现有应用程序更新的机会。

即使 Google 允许您上传使用不同密钥签名的 apk 作为更新，Android 设备也不会允许用户更新应用程序，因为安装的 apk 与正在安装的 apk 具有不同的签名。如果您从 Google Play 安装应用程序，然后尝试从 Eclipse 安装调试版本，则会遇到同样的问题。

现在，您必须使用不同的密钥在不同的包名称下重新上传应用程序。将来，请记住将您的密钥库备份到多个位置（但要安全地进行。不要意外地将其提交到公共版本控制系统中。密钥库应始终保持私有）。

数字签名基于公钥密码术。给定公钥，您无法恢复私钥——这就是公钥加密的重点。这种算法基于单向函数：容易做但难以逆转的事情。

# api - 中心编码折线 - Google MAP API V3

> ID：14020453
> 
> 赞同：1
> 
> 时间：2012-12-24T10:58:35.927
> 
> 标签：api, google-maps, center, polyline

我想使用 API V3 将带有动态编码折线的地图居中并自动缩放。

我的编码 Polyine 在跟踪 1 中，从 ASP.net C# 服务器端获取：

```
 var trace1 = "<%= scriptString %>";

    vol = new google.maps.Polyline({
        map: map,
        strokeColor: '#ff0000',
        strokeOpacity: 1.0,
        strokeWeight: 3
    });

    var trace = google.maps.geometry.encoding.decodePath(trace1);

    vol.setPath(trace);

    var bounds = new google.maps.LatLngBounds();
    bounds.getCenter();
    map.fitBounds(bounds); 
```

但它不起作用......它使地图以北太平洋为中心，而我的折线在法国......

我没有任何 Javascript 错误。任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T16:21:22.680

您需要扩展边界以包含路径上的点。

```
var bounds = new google.maps.LatLngBounds();
vol.getPath().forEach(function(LatLng) {
   bounds.extend(LatLng);
});
map.fitBounds(bounds); 
```

# extjs - 如何在文本区域顶部对齐标签

> ID：14020462
> 
> 赞同：5
> 
> 时间：2012-12-24T10:59:12.363
> 
> 标签：extjs

团队，

我面临一个问题，我无法在下面的示例中的 textare '菜单列表' 顶部对齐标签。

我尝试在文本区域中给出 AlignLabel = top 但它不起作用。

此外，我想在文本区域之后放置一个搜索按钮，这将打开另一个表单，我将在那里选择可用的菜单项，但不知道该怎么做。

代码。

```
<html>
<head>
<title>Hello World Window</title>
<link rel="stylesheet" type="text/css" href="ext-3.4.0/resources/css/ext-all.css" />
<script type="text/javascript" src="ext-3.4.0/adapter/ext/ext-base.js"></script>
<script type="text/javascript" src="ext-3.4.0/ext-all.js"></script>
</head>

<body>
<script type="text/javascript">

    Ext.onReady(function(){
        var tab2 = new Ext.FormPanel({
            labelAlign: 'left',
            labelStyle: 'font-weight:bold;',
            labelWidth: 85,
            title: 'Run Report',
            bodyStyle:'padding:5px',
            border : true,
            style: 'margin:0 auto;margin-top:50px;margin-left:50',
            width: 900,
            height:600, 
                  items:
                  [{
                      xtype:'panel',
                      border:true,
                      height:150,
                      title:'Inner Panel',
                      bodyStyle:'padding:5px; overflow-x: hidden; overflow-y: auto;',
                      autoScroll:true,  
                  items: [{
                    layout:'column',
                    border :false,
                    items:[{
                        columnWidth:.3,
                        layout: 'form',
                        border :false,
                        items: [{
                            xtype:'textfield',
                            fieldLabel: 'First Name',
                            name: 'first',
                            anchor:'95%'
                        }, {
                            xtype:'textfield',
                            fieldLabel: 'Company',
                            name: 'company',
                            anchor:'95%'
                        }]
                    },{
                        columnWidth:.3,
                        layout: 'form',
                        border :false,
                        items: [{
                            xtype:'textfield',
                            fieldLabel: 'Last Name',
                            name: 'last',
                                          anchor:'95%'
                        },{
                            xtype:'textfield',
                            fieldLabel: 'Email',
                            name: 'email',
                            vtype:'email',
                            anchor:'95%'
                        }]
                    }]
                }]
             },
                {
                xtype:'panel',
                border:true,
                labelAlign: 'left',
                labelStyle: 'font-weight:bold;',
                labelWidth: 85,
                height:500,
                title:'Inner Panel',
                bodyStyle:'padding:5px;',
                autoScroll:false,
                layout:'form',
                items:[
                {             
                xtype: 'label',
                fieldLabel: 'Radio Formats',
                labelStyle: 'width:400px;'
                },
                {             
                xtype: 'radiogroup',
                fieldLabel: '',
                columns: 3,
                width:200,
                hideLabel:true,
                items: [
                    {boxLabel: 'Item 1', name: 'rb-col', inputValue: 1},
                    {boxLabel: 'Item 2', name: 'rb-col', inputValue: 2},
                    {boxLabel: 'Item 3', name: 'rb-col', inputValue: 3}
                ]
                },
                {             
                xtype: 'textarea',
                style:{overflow:'auto'},
                width:250,
                labelAlign: 'top',
                labelStyle: 'font-weight:bold;width:120px',
                height:35,
                labelSeparator:"",
                fieldLabel: "Menu List <span style=\"color:red;\">*</span>"
                }
                ]

            }]
        ,
            buttons: [{
            text: 'Save'
            },{
            text: 'Cancel'
            }]
        });

    tab2.render(document.body); 

});
</script> 

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-21T18:32:51.700

在**ExtJs 4.2**中，标签对齐可以调整`top`为`labelAlign`：

```
 {
                xtype: 'textarea',
                fieldLabel: 'My Label',
                labelAlign:'top'
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T03:41:14.427

您可以使用 Ext.form.Label 的样式参数来覆盖其 css：

```
Ext.onReady(function(){
  var newLabel = new Ext.form.Label(
      {
        style: 'text-align:right; display:block;',
        text: 'test',
        renderTo: document.body
      }
  );
}); 
```

[在Sencha 论坛](http://www.sencha.com/forum/showthread.php?100781-ExtJs.Form.Label-%28text-Alignment%29-not-working)上找到示例。

# c# - 对象未添加到集合中

> ID：14020465
> 
> 赞同：0
> 
> 时间：2012-12-24T10:59:29.577
> 
> 标签：c#, asp.net-mvc, collections

我在会话中有一个对象，即 currentCustomer，如下所示。

```
public Customer currentCustomer 
        {
            get 
            {
                if (Session["currentCustomer"] == null) return new Customer();
                else 
                   return (Customer)Session["currentCustomer"];
            }
            set 
            {
                Session["currentCustomer"] = value;
            }
        } 
```

而且我还有一个 MVC4 操作将地址添加到客户的地址列表中。

```
 [HttpPost]
    public JsonResult CustomerAddressSave()
    {
            Address address  = new Address();
            if (TryUpdateModel<Address>(address))
            {
                UpdateModel<Address>(address);
            }
            currentCustomer.AddressList.Add(address); //Not Adding into the List.
            return Json(new { success = true }, JsonRequestBehavior.AllowGet);
    } 
```

令人惊讶的是，上面的代码没有将地址添加到列表地址列表中；

我没有线索跟进。

过去有没有人遇到过同样的问题并帮助我解决问题。

提前致谢， Saravnakumar

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:03:38.317

```
get 
{
    if (Session["currentCustomer"] == null) return new Customer();
     else 
     return (Customer)Session["currentCustomer"];
} 
```

你想解决这个问题。这只是将一个新的 Customer 对象返回到边缘。您想将其分配给会话

```
get
{
    Customer customer = null;
    if (Session["currentCustomer"] == null)
    {
          customer = new Customer();
          Session["currentCustomer"] = customer;

    }
    else
    {
       customer= (Customer)Session["currentCustomer"];
    }
    return customer;
} 
```

它之前保存了地址，您每次都将其保存到一个新实例中。上面的代码应该可以修复它——希望如此。

# asp.net - 在 IIS7 中使用 UrlRewrite 将 HTTPS 重定向到 HTTP

> ID：14020467
> 
> 赞同：1
> 
> 时间：2012-12-24T10:59:33.813
> 
> 标签：asp.net, iis-7, url-rewriting

我需要确保每当有人从安全连接 (HTTPS) 访问网站时，它都会被重定向到 HTTP。

不知道该怎么做。我已将此 UrlRewrite 规则添加到我的 web.config 中，但它仍然给出错误：“连接已重置”。

```
<rewrite>
   <rules>
      <rule name="Redirect to HTTP" stopProcessing="true">
     <match url="(.*)" />
            <conditions><add input="{HTTPS}" pattern="^ON$" /></conditions>
               <action type="Redirect" url="http://{HTTP_HOST}/{R:1}" redirectType="SeeOther" />
      </rule>
      <rule name="Canonical rewrite">
         <match url="(.*)" />
            <conditions>
               <add input="{HTTP_HOST}" pattern="^www\.redgold\.com$" negate="true" />
            </conditions>
            <action type="Redirect" url="http://www.redgold.com/{R:1}" />
      </rule>
   </rules>
</rewrite> 
```

有人知道我在做什么错吗？

谢谢，丹尼尔

# javascript - 使用打字稿的匿名模块

> ID：14020469
> 
> 赞同：1
> 
> 时间：2012-12-24T10:59:46.700
> 
> 标签：javascript, module, typescript

Typescript 中是否有类似匿名模块的内容可以转换为以下内容？

```
(function(){  })() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:03:51.733

没有替代方法可以做到这一点，但您仍然可以在 TypeScript 文件中使用该语法来使用立即执行的函数来确定您的内容范围。

```
(function(){  
    var myClass = new SomeModule.SomeClass();
})(); 
```

我希望在`app.ts`文件中经常看到这一点。

如果您真的想在其中获得一些 TypeScript，可以将其缩短为：

```
() => {
    var x = 1;
}(); 
```

# python - python代码提交spoj提交

> ID：14020473
> 
> 赞同：1
> 
> 时间：2012-12-24T11:00:12.693
> 
> 标签：python, submit

我试图通过一个简单的 python 代码提交我的解决方案，该代码使用我的用户名、密码、文件名、语言选择和问题代码代表我将解决方案提交给 spoj。

到目前为止，我已经走了，

```
import httplib,urllib
import urllib2
params=urllib.urlencode({'login_user':'username','password':'yourpassword','lang':'C (gcc 4.3.2)','problemcode':'TEST','subm_file':'/home/mj/code/uu.c'})
headers={"Content-type": "multipart/form-data"}
req=urllib2.Request("http://www.spoj.com/submit/",params)
thepage=urllib2.urlopen(req)
data=thepage.read()
newf=open("wer.html","w")
newf.write(data)
newf.close()` 
```

我期望显示“已提交解决方案”，但我得到了需要授权。但是当我尝试登录时，它确实如此。

有没有办法在登录后输入提交，即我正在使用的 POST 方法应该在它成功登录的页面上恢复，换句话说，python 中有没有办法“记住”“我已经登录”成功，现在让我提交问题”，这样就不会看到“需要授权”提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:27:10.767

您提交文件的方法不正确。您传递的是带有文件名的字符串，而不是实际文件作为`subm_file`. 您需要发布文件的内容。

我个人使用`poster`POST 文件：[http ://atlee.ca/software/poster/](http://atlee.ca/software/poster/)

这是一个相关的 SO 问题：[Send file using POST from a Python script](https://stackoverflow.com/questions/68477/send-file-using-post-from-a-python-script)

另外，查看源代码，我认为您想将其发布到`http://www.spoj.com/submit/complete/`，而不是`.../submit/`. `.../submit/`是左侧登录表单的操作。`.../submit/complete/`是表单提交代码的动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:29:22.007

您`params`没有使用`Content-type` `"multipart/form-data"`. 我尝试使用`"application/x-www-form-urlencoded"`内容类型发送请求，它可以工作：

```
#!/usr/bin/env python
import re
import webbrowser
from netrc import netrc
from urllib import urlencode, quote
from urllib2 import urlopen

user, _, password = netrc().authenticators('spoj.com')  # read from ~/.netrc
r = urlopen("https://www.spoj.com/submit/complete/",  # no certificate test
            data=urlencode(dict(
            login_user=user,
            password=password,
            problemcode="TEST",  # problem id
            lang="116",  # Python 3 (see languages below)
            submit="Send",
            file="for s in iter(input, '42'): print(s)")))
m = re.search(r'"newSubmissionId" value="(\d+)"/>', r.read())  # XXX dirty
print("submission id %d" % int(m.group(1)))
webbrowser.open("https://www.spoj.com/status/%s/" % quote(user)) 
```

### 语言

```
{
    "7": "ADA 95 (gnat 4.3.2)",
    "13": "Assembler (nasm 2.03.01)",
    "104": "Awk (gawk-3.1.6)",
    "28": "Bash (bash-4.0.37)",
    "12": "Brainf**k (bff 1.0.3.1)",
    "11": "C (gcc 4.3.2)",
    "27": "C# (gmcs 2.0.1)",
    "41": "C++ (g++ 4.3.2)",
    "1": "C++ (g++ 4.0.0-8)",
    "34": "C99 strict (gcc 4.3.2)",
    "14": "Clips (clips 6.24)",
    "111": "Clojure (clojure 1.1.0)",
    "31": "Common Lisp (sbcl 1.0.18)",
    "32": "Common Lisp (clisp 2.44.1)",
    "20": "D (gdc 4.1.3)",
    "36": "Erlang (erl 5.6.3)",
    "124": "F# (fsharp 2.0.0)",
    "5": "Fortran 95 (gfortran 4.3.2)",
    "114": "Go (gc 2010-07-14)",
    "21": "Haskell (ghc 6.10.4)",
    "16": "Icon (iconc 9.4.3)",
    "9": "Intercal (ick 0.28-4)",
    "24": "JAR (JavaSE 6)",
    "10": "Java (JavaSE 6)",
    "35": "JavaScript (rhino 1.7R1-2)",
    "26": "Lua (luac 5.1.3)",
    "30": "Nemerle (ncc 0.9.3)",
    "25": "Nice (nicec 0.9.6)",
    "56": "Node.js (0.8.11)",
    "8": "Ocaml (ocamlopt 3.10.2)",
    "22": "Pascal (fpc 2.2.4)",
    "2": "Pascal (gpc 20070904)",
    "3": "Perl (perl 5.12.1)",
    "54": "Perl 6 (rakudo-2010.08)",
    "29": "PHP (php 5.2.6)",
    "19": "Pike (pike 7.6.112)",
    "15": "Prolog (swipl 5.6.58)",
    "4": "Python (python 2.7)",
    "116": "Python 3 (python 3.2.3)",
    "126": "Python 3 nbc (python 3.2.3 nbc)",
    "17": "Ruby (ruby 1.9.3)",
    "39": "Scala (scala 2.8.0)",
    "33": "Scheme (guile 1.8.5)",
    "18": "Scheme (stalin 0.11)",
    "46": "Sed (sed-4.2)",
    "23": "Smalltalk (gst 3.0.3)",
    "38": "Tcl (tclsh 8.5.3)",
    "62": "Text (plain text)",
    "6": "Whitespace (wspace 0.3)",
} 
```

# apache-flex - 如何在 flex 上导入 Asx3mer？

> ID：14020474
> 
> 赞同：0
> 
> 时间：2012-12-24T11:00:14.847
> 
> 标签：apache-flex

首先，我只有一周大的时间来弯曲。我想将一些数据转换为 XML 格式然后显示。
我发现我可以使用：

```
 var myContactXML:XML= Asx3mer.instance.toXML(myContact); 
```

这里我需要 Asx3mer.as 类。我不确定它是否是一个内置类。CTRL+shift+O 也无济于事。
我尝试将此类的代码复制到动作脚本中，但它也有其他依赖项。

请帮忙

谢谢，布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:14:00.007

您需要下载该[库](http://code.google.com/p/asx3m/downloads/list)并将其添加到您的`lib`文件夹中。

确保将它也添加到您的 flex 构建路径中，然后`CTRL`++将帮助您导入它（在 Eclipse 之类的 IDE 中`SHIFT`）`O`

# css - 如何为按钮设置轮廓？

> ID：14020475
> 
> 赞同：0
> 
> 时间：2012-12-24T11:00:28.160
> 
> 标签：css, twitter-bootstrap

我需要为按钮设置轮廓，我试过了

```
.btn{
  border: 1px double #A8A8A8;
  outline: 1px solid #9F9F9F;
  outline-offset: -4px;
} 
```

它在 chrome 中运行良好......但它在 firefox 中表现出不同的行为......我知道当它在 box-shadow 之外绘制时，firefox 对轮廓的反应不同......

有没有其他方法可以实现这一点？？？？请帮忙提出一些建议......我需要像这个小提琴中的那个 [http://jsfiddle.net/JR7Hj/80/](http://jsfiddle.net/JR7Hj/80/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:50:09.853

您可以尝试使用盒子阴影来模仿这种效果。不幸的是，这会使原始按钮渐变的一小部分变平。但是，如果您的原始按钮是扁平的，则这不是问题。这是一个比较屏幕截图：

![在此处输入图像描述](../Images/b5b928eb9c910668170a4af5bbde7f2e.png)

[http://jsfiddle.net/JR7Hj/83/](http://jsfiddle.net/JR7Hj/83/)

```
.btn {
border: 1px double #A8A8A8;
box-shadow: 0 0 0 2px  #f5f5f5 inset, 0 0 0 3px  #A8A8A8 inset;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:52:19.140

我会这样做（不需要css3）：

```
.btn {
    padding: 2px 10px;
    border: 4px double #A8A8A8;
}

.btn:active {
    padding: 5px 13px;
    border: 1px solid #A8A8A8;
} 
```

[http://jsfiddle.net/elias94xx/JR7Hj/88/](http://jsfiddle.net/elias94xx/JR7Hj/88/)

# javascript - 如何将 DialogResult 与 javascript 或 jQuery 一起使用？

> ID：14020476
> 
> 赞同：0
> 
> 时间：2012-12-24T11:00:35.140
> 
> 标签：javascript, jquery, asp.net, c#-4.0

我想从我的 aspx 页面显示一个带有 OkCancel 按钮的消息框。代码后面的代码可以实现

```
DialogResult result = MessageBox.Show("How are you?", "Hi",MessageBoxButtons.OKCancel); 
```

但我想用 Javascript 或 jQuery 来做这件事可能吗？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:02:45.150

您可以使用[**确认**](http://www.w3schools.com/js/js_popup.asp)

**[现场演示](http://jsfiddle.net/rajaadil/vPyQN/)**

```
var r = confirm("Press a button");
if (r == true) {
    alert("You pressed OK!");
}
else {
    alert("You pressed Cancel!");
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:02:23.527

使用纯 javascript，您可以使用以下[`prompt`](https://developer.mozilla.org/en-US/docs/DOM/window.prompt)功能：

```
<script type="text/javascript">
    var result = window.prompt('How are you?');
    alert(result);
</script> 
```

如果您想更好地控制此对话框的视觉方面，则必须手动构建它，因为浏览器不允许对这些窗口进行任何自定义。例如，您可以使用[`jQuery UI dialog`](http://jqueryui.com/dialog/)插件。看看[`modal form demo`](http://jqueryui.com/dialog/#modal-form)它允许您完全控制对话框的视觉方面。

# html - 如何在 HTML 属性中进行评论？

> ID：14020482
> 
> 赞同：9
> 
> 时间：2012-12-24T11:01:22.297
> 
> 标签：html, comments

下面代码中的最后一个（闭合）尖括号不会被解释为闭合`<input>`元素：

```
<input type='text' name='name' <!-- id='name' -->> 
```

我认为这是注释掉此属性的有效方法，但 Google Chrome、Firefox 和 Notepad++（颜色编码）都表明这不是要走的路。

我在 Notepad++ 中使用`CTRL`了`Shift`++`Q`来做到这一点。

那么注释掉这个`<id>`属性的正确方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-24T11:03:01.623

HTML 没有提供在标签内放置注释的方法。

* * *

如果您是从模板/编程语言生成 HTML，那么您可以使用它的特性来注释掉一些东西。

例如，在模板工具包中：

```
<input type='text' name='name' [%# id='name' %]> 
```

或 PHP：

```
<input type='text' name='name' <?php # id='name' ?>> 
```

* * *

如果您使用的是 HTML 5，那么您可以（作为一个丑陋的黑客）使用数据属性来“注释”整个属性。

```
<input type='text' name='name' data-comment-id='name'> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-12T12:38:19.507

我通常只是放在`_x`属性名称的末尾。然后该属性被忽略，因为它是未知的。所以如果我想注释掉`id`这个元素的属性：

```
<input type="text" name="name" id="name"> 
```

我会把它改成这样：

```
<input type="text" name="name" id_x="name"> 
```

这还具有能够搜索“ `_x=`”以查找所有注释属性的优点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T11:22:29.967

```
<input type='text' name='name' <?php  /* id='name' */ ?> > 
```

您可以使用它在查看源信息时不会被解释

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-01T17:40:14.253

如果你想在 HTML5 中注释一行并且不要使用

```
<!-- Html comments --> 
```

您可以使用

*   咏叹调标签

例如：

```
 <button aria-label="Close" nclick="myDialog.close()">X</button> 
```

或者

```
<button aria-label="This button close the popup" nclick="myDialog.close()">X</button> 
```

由于没有任何内容表明按钮的目的是关闭对话框，因此 aria-label 属性用于为任何辅助技术提供标签或简单的注释。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-24T11:20:07.987

我同意，你不应该在这个地方使用评论。也就是说，以下内容应该适用于 Chrome、Firefox 和 IE：

```
<input type="text" %id="test1"% class="test2"> 
```

![检查 Google Chrome 中的元素](../Images/22385a9e499748580d4c536b14aa278e.png)

![检查 Firefox 中的元素](../Images/3d3fd731561c717c4bbdce0d68df15d0.png)

# c# - 使用泛型重载运算符

> ID：14020486
> 
> 赞同：15
> 
> 时间：2012-12-24T11:01:46.723
> 
> 标签：c#, generics, operator-overloading

> **可能重复：**
> [C# 中泛型类的算术运算符重载](https://stackoverflow.com/questions/756954/arithmetic-operator-overloading-for-a-generic-class-in-c-sharp)

这是我创建的泛型类的代码，用于将复数添加到重载运算符。

```
public class Complex<T>
{
    public T _a, _b;
    public Complex(T i, T j)
    {
        _a = i;
        _b = j;
    }
    public static Complex<T> operator +(Complex<T> i, Complex<T> j)
    {
        return new Complex<T>(i._a + j._a, i._b + j._b);
    }
} 
```

在处理这个问题时，我遇到了一个错误，

```
Error: Operator '+' cannot be applied to operands of type 'T' and 'T' 
```

任何人都可以建议我使用泛型运算符重载的方式吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-24T11:33:50.730

问题是编译器无法知道`+`运算符是否可以应用于`T`. 不幸的是，在 C# 中没有办法限制`T`为数字类型。

但是，您可以使用动态运行时解决此问题：

```
public class Complex<T> where T : struct
{
    public T _a, _b;
    public Complex(T i, T j)
    {
        _a = i;
        _b = j;
    }
    public static Complex<T> operator +(Complex<T> i, Complex<T> j)
    {
        return new Complex<T>(Sum(i._a, j._a), Sum(i._b, j._b));
    }

    private static T Sum(T a, T b)
    {
        return (dynamic)a + (dynamic)b;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T11:36:09.273

如果你想作弊，你可以暂时将它们标记为`dynamic`类型，并让运行时来决定如何做。只要`T`您使用的类型定义了`+`运算符，它就可以工作。这意味着它适用于数字和字符串，或任何类型（自定义或其他）；不确定这是否是您的意图`Complex`。此外，如果没有`+`可利用的运算符，则会在运行时抛出异常；没有办法（据我所知）对此进行编译时检查。

```
public class Complex<T>
{
    public T _a, _b;
    public Complex(T i, T j)
    {
        _a = i;
        _b = j;
    }
    public static Complex<T> operator +(Complex<T> i, Complex<T> j)
    {
        dynamic d_i = i;
        dynamic d_j = j;
        return new Complex<T>(d_i._a + d_j._a, d_i._b + d_j._b);
    }
} 
```

字符串示例用法：

```
Complex<string> i = new Complex<string>("Hel", "Wor");
Complex<string> j = new Complex<string>("lo ", "ld!");

Complex<string> ij = i + j;

Console.WriteLine(ij._a + ij._b); //Hello World! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T04:56:03.980

如上所述，您可以限制`T`为`IConvertible`，然后使用该`decimal`类型执行所需的数学函数，如下所示：

```
public class Complex<T> where T : struct, IConvertible
{
    public T _a, _b;

    public Complex(T i, T j)
    {
        _a = i;
        _b = j;
    }

    public static Complex<T> operator +(Complex<T> i, Complex<T> j)
    {
        return new Complex<T>(Sum(i._a, j._a), Sum(i._b, j._b));
    }

    private static T Sum(T a, T b)
    {
        return (T)Convert.ChangeType(a.ToDecimal(CultureInfo.CurrentCulture) + b.ToDecimal(CultureInfo.CurrentCulture), typeof(T));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T11:27:32.623

您不能将两个通用对象类型相加；在静态函数中，您尝试添加 T i._a 和 j._a. 类型的两个元素，但 T 可以是任何类型

你想做什么？

# mysql - MySQL查找行索引位置，复杂查询

> ID：14020487
> 
> 赞同：0
> 
> 时间：2012-12-24T11:01:49.277
> 
> 标签：mysql, select, indexing, position, row

我知道这里被问过很多次，浏览过这里的大部分帖子，但我无法让它工作，所以想再问一次。

**问题：**
有一个分数列表，我试图向用户展示他/她在分数列表中的位置。有一个 player_id，用户是从两个表（players.id，scores.player_id）中选择的。我从来没有尝试过这样的查询，我根据这个网站给出的指令写了这样的东西但是没有运气，这个查询不对，有点迷路了。

```
SELECT 
    @rn:=@rn + 1 AS rank, scores.score
FROM
    (SELECT 
        scores.score, COUNT(*) AS ordercount
    FROM
        scores, players
    WHERE
        players.uid = '$uid'
            AND scores.version = '$version'
            AND scores.lvl = '$lvl'
            AND scores.player_id = players.id
    GROUP BY scores.score
    ORDER BY scores.score DESC) t1,
    (SELECT @rn:=0) t2 
```

结果：

```
Unknown column 'scores.score' in 'field list 
```

谢谢！

成绩表结构：

```
CREATE TABLE IF NOT EXISTS `scores` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `player_id` int(11) NOT NULL,
  `lvl` tinyint(4) NOT NULL,
  `score` bigint(20) NOT NULL,
  `played_times` bigint(20) NOT NULL,
  `version` varchar(10) NOT NULL,
  `ip` varchar(30) NOT NULL,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB; 
```

--

## -- 为表转储数据`scores`

```
INSERT INTO `scores` (`id`, `player_id`, `lvl`, `score`, `played_times`, `version`, `ip`, `timestamp`) VALUES
(1, 1, 1, 9990, 4, '1', 'xx.xx.xx.xxx', '2012-12-24 01:46:10'),
(2, 1, 2, 5750, 1, '1', 'xx.xx.xx.xxx', '2012-12-24 01:46:49'),
(3, 1, 1, 10290, 5, '1', 'xx.xx.xx.xxx', '2012-12-24 02:47:25'),
(6, 1, 1, 13620, 6, '1', 'xx.xx.xx.xxx', '2012-12-24 10:40:26'),
(7, 2, 2, 241251, 2, '1', 'xx.xx.xx.xxx', '2012-12-24 19:03:22'); 
```

玩家表结构：

```
CREATE TABLE IF NOT EXISTS `players` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) NOT NULL,
  `email` varchar(255) NOT NULL,
  `pass` varchar(255) NOT NULL,
  `hash` varchar(255) NOT NULL,
  `uid` varchar(255) NOT NULL,
  `ip` varchar(30) NOT NULL,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB; 
```

--

## -- 为表转储数据`scores`

```
INSERT INTO `players` (`id`, `name`, `email`, `pass`, `hash`, `uid`, `ip`, `timestamp`) VALUES
(1, 'Test', 'TEST@TEST.COM', '', '51516h0c0', '7b3bd627c9b0', 'xx.xx.xx.xxx', '2012-12-24 00:56:38'); 
```

PHP;

```
/*
    get player's topscore position among others
*/
function _getPlayerTopScorePos($uid,$lvl,$version)
{
    $uid            = _jClean($uid);
    $version        = _jClean($version);
    $lvl            = _jClean($lvl);

    include 'db.inc.php';

    $q = mysql_query("SELECT 
        @rn:=@rn + 1 AS rank, t1.score
    FROM
        (SELECT 
            scores.score, COUNT(*) AS ordercount
        FROM
            scores, players
        WHERE
                players.uid = '$uid'
                AND scores.version = '$version'
                AND scores.lvl = '$lvl'
                AND scores.player_id = players.id
        GROUP BY scores.score
        ORDER BY scores.score DESC) t1,
        (SELECT @rn:=0) t2");

    echo mysql_error();

    $x = mysql_fetch_array($q);
    $a = $x["rank"];

    @mysql_close();

    return $a;  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:11:49.443

如果您将表引用从分数更改为 t1，因为您使用的是子查询的别名，该怎么办？

```
SELECT 
        @rn:=@rn + 1 AS rank, t1.score
    FROM
        (SELECT 
            scores.score, COUNT(*) AS ordercount
        FROM
            scores, players
        WHERE
            players.uid = '$uid'
                AND scores.version = '$version'
                AND scores.lvl = '$lvl'
                AND scores.player_id = players.id
        GROUP BY scores.score
        ORDER BY scores.score DESC) t1,
        (SELECT @rn:=0) t2 
```

- 编辑

```
SELECT COUNT(t1.player_id)
    FROM
        (SELECT 
            scores.player_id
        FROM
            scores
            INNER JOIN players ON scores.player_id = players.id
        WHERE
            players.uid = '$uid'
            AND scores.version = '$version'
            AND scores.lvl = '$lvl'
            AND scores.player_id = players.id
            AND scores.score >= '$score'
        GROUP BY scores.player_id) t1 
```

您可以单独查询返回播放和显示的用户数量，即。25/100

# android - 我得到什么样的错误？Android 计时器错误

> ID：14020488
> 
> 赞同：2
> 
> 时间：2012-12-24T11:01:51.273
> 
> 标签：android, timer

我不明白为什么我会收到此错误。我一直在查看不同的代码，我使用了这个 Timer one，因为坦率地说我不知道​​如何使用 Java Timers，现在它只会让我的应用程序崩溃。请帮忙吗？

```
timer.schedule(new TimerTask() {
        public void run() {

            findViewById(R.id.progressBar1).setVisibility(View.GONE);
            findViewById(R.id.loadingn).setVisibility(View.GONE);

            findViewById(R.id.tuser).setVisibility(View.VISIBLE);
            findViewById(R.id.tpass).setVisibility(View.VISIBLE);
            loginbutton.setVisibility(View.VISIBLE);
            findViewById(R.id.username).setVisibility(View.VISIBLE);
            findViewById(R.id.pass).setVisibility(View.VISIBLE);
            timer.cancel();
        }
    }, 5000, 5000); 
```

我忘了...这是错误代码：

```
12-24 05:53:19.639: E/AndroidRuntime(9887):     FATAL EXCEPTION: Timer-0
12-24 05:53:19.639: E/AndroidRuntime(9887):     android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
12-24 05:53:19.639: E/AndroidRuntime(9887):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4176)
12-24 05:53:19.639: E/AndroidRuntime(9887):     at android.view.ViewRootImpl.invalidateChild(ViewRootImpl.java:749)
12-24 05:53:19.639: E/AndroidRuntime(9887):     at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:805)
12-24 05:53:19.639: E/AndroidRuntime(9887):     at android.view.ViewGroup.invalidateChild(ViewGroup.java:4005)
12-24 05:53:19.639: E/AndroidRuntime(9887):     at android.view.View.invalidate(View.java:8591)
12-24 05:53:19.639: E/AndroidRuntime(9887):     at android.view.View.setFlags(View.java:6718)
12-24 05:53:19.639: E/AndroidRuntime(9887):     at android.view.View.setVisibility(View.java:4632)
12-24 05:53:19.639: E/AndroidRuntime(9887):     at info.david.statusbar.MainActivity$1.run(MainActivity.java:43)
12-24 05:53:19.639: E/AndroidRuntime(9887):     at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T11:05:02.307

使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html)从 as 访问 Ui 元素`TimerTask`：

```
timer.schedule(new TimerTask() {
   public void run() {
     Your_Current_Activity.this.runOnUiThread(new Runnable() 
         {
           public void run() 
            {

                   // access UI here
            }

      });
    }
 }, 5000, 5000); 
```

# c# - 如何收集连接到服务器的所有客户端的登录信息。此信息应从服务器中的目录中获取

> ID：14020489
> 
> 赞同：0
> 
> 时间：2012-12-24T11:01:51.010
> 
> 标签：c#, winforms

```
private void btnlogin_Click(object sender, EventArgs e)
{
    string dir = "D://Login.hhh";
    if (!File.Exists(dir))
    {
        File.Create(dir);
    }

    string filePath = dir;
    string s = System.Environment.GetEnvironmentVariable("COMPUTERNAME");
    string s1 = getIP();
    using (StreamWriter swrObj = new StreamWriter(filePath, true))
    {
        swrObj.Write(s1 + "|" + s + "|" + Txtusername.Text + "|" + "user logged in on :|" + DateTime.Now.ToShortDateString() + " at " + DateTime.Now.ToShortTimeString());
        swrObj.Write("\t\t");
        swrObj.Write("\t\t");
        swrObj.WriteLine();
        MessageBox.Show("Login success");
    }
}

private void Loginform_Load(object sender, EventArgs e)
{ 

}
private string getIP()
{ 
    IPHostEntry host;
    string localIP = "?";
    host = Dns.GetHostEntry(Dns.GetHostName());
    foreach (IPAddress ip in host.AddressList)
    {
        if (ip.AddressFamily.ToString() == "InterNetwork")
        {
            localIP = ip.ToString();
        }
    }
    return  localIP;
} 
```

我正在使用上述代码获取单个用户的登录信息，但我想获取连接到服务器的多个用户的登录信息，并且该信息应保存在位于服务器中的目录中。谁能帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:11:34.010

每次用户登录时，您都会创建一个新文件。尝试在每个登录事件中附加数据。File.Append(文件名); 您也可以在项目解决方案本身中创建一个目录并在其中添加文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:14:04.880

我只能根据您的措辞假设这是基于 Windows 窗体的应用程序，而不是 Web 应用程序。

这必须有多安全，因为用户很容易操作数据。就我个人而言，我会在数据库上创建一个表并在那里记录这些信息。确保您的应用程序只有对该表的写入权限，然后您就知道记录没有被更改。

# haskell - 有没有一种方法可以使用 Derive 和 Template Haskell 或其他方式为 Vinyl 记录类型派生二进制实例

> ID：14020491
> 
> 赞同：7
> 
> 时间：2012-12-24T11:02:15.757
> 
> 标签：haskell, template-haskell, derived-instances

我一直在试用[Vinyl 包](http://hackage.haskell.org/package/vinyl-0.1.0.0)，它使用类型级别的种类来创建具有字段级别多态性和自动提供镜头的记录结构。这两个功能对我的项目来说都非常方便，因为前者允许记录结构是彼此的子类型而不会发生名称冲突，而后者则大大简化了嵌套结构的更新。

问题来自序列化结果结构。通常我使用 Data.DeriveTH 自动派生 Binary 实例，但它似乎无法处理这些结构。以下代码

```
{-# LANGUAGE DataKinds, TypeOperators #-}
{-# LANGUAGE FlexibleContexts, NoMonomorphismRestriction #-}
{-# LANGUAGE TypeSynonymInstances, FlexibleInstances #-}
{-# LANGUAGE TemplateHaskell #-}

import Data.Vinyl

import Data.Binary
import Data.DeriveTH

eID          = Field :: "eID"      ::: Int
location     = Field :: "location" ::: (Double, Double)

type Entity = Rec 
    [   "eID"      ::: Int
    ,   "location" ::: (Double, Double)
    ]

$(derive makeBinary ''Entity) 
```

导致 GHCI 中出现此错误

```
Exception when trying to run compile-time code:
  Could not convert Dec to Decl
TySynD Main.Entity [] (AppT (ConT Data.Vinyl.Rec.Rec) (AppT (AppT PromotedConsT (AppT (AppT (ConT Data.Vinyl.Field.:::) (LitT (StrTyLit "eID"))) (ConT GHC.Types.Int))) (AppT (AppT PromotedConsT (AppT (AppT (ConT Data.Vinyl.Field.:::) (LitT (StrTyLit "location"))) (AppT (AppT (TupleT 2) (ConT GHC.Types.Double)) (ConT GHC.Types.Double)))) PromotedNilT)))
Language/Haskell/Convert.hs:(37,14)-(40,8): Non-exhaustive patterns in case

  Code: derive makeBinary ''Entity
Failed, modules loaded: none. 
```

这似乎与 Derive Convert 模块中的这段代码有关：

```
instance Convert TH.Dec HS.Decl where
    conv x = case x of
        DataD cxt n vs con ds -> f DataType cxt n vs con ds
        NewtypeD cxt n vs con ds -> f NewType cxt n vs [con] ds
        where
            f t cxt n vs con ds = DataDecl sl t (c cxt) (c n) (c vs) (c con) [] 
```

现在我真的不知道如何阅读 Template Haskell，所以我在这里无法取得太大进展。我突然想到，我提供的是类型同义词而不是数据类型，这可能会破坏它，所以我尝试将它包装在一个新类型中：

```
newtype Entity2 = Entity2 {entity :: Entity}

$(derive makeBinary ''Entity2) 
```

这导致了这个更加迟钝的错误：

```
Exception when trying to run compile-time code:
    Could not convert Type to Type
AppT (AppT PromotedConsT (AppT (AppT (ConT Data.Vinyl.Field.:::) (LitT (StrTyLit "eID"))) (ConT GHC.Types.Int))) (AppT (AppT PromotedConsT (AppT (AppT (ConT Data.Vinyl.Field.:::) (LitT (StrTyLit "location"))) (AppT (AppT (TupleT 2) (ConT GHC.Types.Double)) (ConT GHC.Types.Double)))) PromotedNilT)
Could not convert Type to Type
AppT PromotedConsT (AppT (AppT (ConT Data.Vinyl.Field.:::) (LitT (StrTyLit "eID"))) (ConT GHC.Types.Int))
Could not convert Type to Type
PromotedConsT
Language/Haskell/Convert.hs:(71,5)-(80,26): Non-exhaustive patterns in function conv 
```

查看 Convert.hs 我们有

```
instance Convert TH.Type HS.Type where
    conv (ForallT xs cxt t) = TyForall (Just $ c xs) (c cxt) (c t)
    conv (VarT x) = TyVar $ c x
    conv (ConT x) | ',' `elem` show x = TyTuple Boxed []
                  | otherwise = TyCon $ c x
    conv (AppT (AppT ArrowT x) y) = TyFun (c x) (c y)
    conv (AppT ListT x) = TyList $ c x
    conv (TupleT _) = TyTuple Boxed []
    conv (AppT x y) = case c x of
        TyTuple b xs -> TyTuple b $ xs ++ [c y]
        x -> TyApp x $ c y 
```

现在我猜测问题出在 GHC 7.6 引入了 Derive 模板 Haskell 没有考虑到的新语言结构，从而导致了非详尽的模式。

所以我的问题是，是否有一些方法可以通过添加到 Derive 或从 Vinyl 记录类型编写我自己的派生，或类似的东西？如果乙烯基的好处不得不与手写所有序列化进行权衡，那将是一种耻辱。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T12:16:03.413

我预计在编写所有类型诡计的实例时会遇到一些问题`Binary`，但这再简单不过了：

```
instance Binary (Rec '[]) where
  put RNil = return ()
  get = return RNil

instance (Binary t, Binary (Rec fs)) => Binary (Rec ((sy ::: t) ': fs)) where
  put ((_,x) :& xs) = put x >> put xs
  get = do
    x <- get
    xs <- get
    return ((Field, x) :& xs) 
```

# javascript - Kendo-Knockout：窗口没有正确关闭

> ID：14020493
> 
> 赞同：1
> 
> 时间：2012-12-24T11:02:31.127
> 
> 标签：javascript, knockout.js, kendo-ui

我正在使用 RPNiemeyer kendo-knockout 库。我有一个网格。当用户单击一行网格时，会显示一个弹出窗口。当您关闭窗口并以同样的方式再次打开它时，应用程序会随着关闭动画冻结。我尽我所能在小提琴中重现这个场景。当您关闭弹出窗口并再次单击该行时，没有任何反应并重新加载浏览器。我坚信我的应用程序中正在发生类似的事情。

html:

```
<div data-viewId="languageList" >
    <div id="languageList" data-bind="with: viewModel">
        <div id="languageListGrid" data-bind="kendoGrid: { data: languageViewModels, columns: [ 
                { 
                    template: '<a href=\'\' data-bind=\'click: function() { onLanguageSelected(&quot;#=Language#&quot;) }\'>#=Language#</a>', 
                    field: 'Language', 
                    title: 'Language',
                    width: 50
                }

                ], 
            scrollable: false, sortable: true, pageable: false }" style="height: 380px">

        </div>
    </div>
</div>

<div data-viewid="languageDetails">
    <div id="languageDetails" data-bind="with: viewModel" class="hidden">
        <form id="languageDetailsForm" action="" style="font-family: Trebuchet MS, Verdana, Helvetica, Sans-Serif;">
        <div data-bind="kendoWindow: {isOpen: isOpen, title:'Language', width: 400, height: 200, modal: true }" >
            test
            <button id="cancelLanguage" class="k-button" data-bind="click: cancelLanguage">Cancel</button>
        </div>
       </form>
    </div>
</div>​ 
```

javascript:

```
$(function () {

    var elementIsBoundNew = function (element) {
        return !!ko.dataFor(element);
    }

    var applyBindings = function (viewModel, elementId) {
        var element = $('div[data-viewId="' + elementId + '"]')[0];
        if (!elementIsBoundNew(element)) {
            var parentViewModel = { viewModel: viewModel };
            ko.applyBindings(parentViewModel, element);
        }
    };

    var FranchiseDetailsViewModel = function () {
        var 
            self = this,
            initialize = function () {
                self.languagesInfoViewModel(new LanguageListViewModel(self));
                applyBindings(self.languagesInfoViewModel, "languageList");
            };

        FranchiseDetailsViewModel.prototype.languagesInfoViewModel = ko.observable();
        initialize();
    };

    var LanguageListViewModel = function (franchise) {
        var 
            self = this,
            initialize = function () {
                var languageViewModel = new LanguageDetailsViewModel(franchise);
                self.languageViewModels.push(languageViewModel);
            };
        LanguageListViewModel.prototype.languageViewModels = ko.observableArray([]);
        LanguageListViewModel.prototype.selectedLanguageViewModel = ko.observable();

        LanguageListViewModel.prototype.onLanguageSelected = function (selectedLanguage) {
  // when you uncomment this line everyting works fine
  //var language = new LanguageDetailsViewModel();  
            self.selectedLanguageViewModel(self.languageViewModels()[0]);

            applyBindings(self.selectedLanguageViewModel, "languageDetails");

            self.selectedLanguageViewModel().openPopUp();
        };
        initialize();
    };

    var LanguageDetailsViewModel = function () {
        var 
            self = this,
            closePopUp = function () {
                self.isOpen(false);
            };

        self.Language = ko.observable("English");

        LanguageDetailsViewModel.prototype.isOpen = ko.observable(false);

        LanguageDetailsViewModel.prototype.openPopUp = function () {
            self.isOpen(true);
        };

        LanguageDetailsViewModel.prototype.cancelLanguage = function () {
            closePopUp();
        };

    };

    var initialize = new FranchiseDetailsViewModel();
});​ 
```

奇怪的是，如果我将这行代码添加到我的 onLanguageSelected 方法中，一切都可以正常工作：

```
var language = new LanguageDetailsViewModel(); 
```

小提琴：

[http://jsfiddle.net/bZF9k/26/](http://jsfiddle.net/bZF9k/26/)

任何有关工作示例的帮助将不胜感激。谢谢！

根据 RPNiemeyer 的帖子更新：

我已经添加了这些代码行以使用此处[Kendo-Knockout 中的技术：调用一个方法从模板中更改 viewmodel 属性，并在网格内进行数据绑定，破坏绑定](https://stackoverflow.com/questions/13858087/kendo-knockout-calling-a-method-that-changes-viewmodel-property-from-a-template)：

```
 ko.bindingHandlers.preventBinding = {
      init: function() {
          return { controlsDescendantBindings: true };
      }        
    };

    ko.bindingHandlers.kendoGrid.options.dataBound = function(data) {
      var body = this.element.find("tbody")[0];

      if (body) {
         ko.applyBindings(ko.dataFor(body), body);   
      }
    }; 
```

这正是我的应用程序中正在发生的事情。当我打开弹出窗口时，将其关闭，然后再次打开它，它没有正确关闭。请看我更新的小提琴：

[http://jsfiddle.net/bZF9k/29/](http://jsfiddle.net/bZF9k/29/)

我错过了什么？再次感谢您的反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T19:07:20.197

这是淘汰赛剑道中的一个错误。

`destroy`不调用窗口的方法。这是因为 knockout-kendo 检测到一个小部件在从 dom 中移除时需要被销毁。但是，`kendoWindow`将元素移动到 dom 的末尾。当 knockout.js 在更新期间清除或删除元素时，它不会删除该元素，因为该元素已被移动。

这可以通过修改 knockout-kendo 来解决，以便在创建它的元素所在的位置留下一个代理元素`kendoWindow`，并在处理代理元素时`destroy`ing`kendoWindow`小部件。对淘汰赛剑道 0.7.0 的以下更改实现了这一点：

```
--- knockout-kendo-0.7.0.js 
+++ knockout-kendo-0.7.0.js
@@ -62,14 +62,19 @@
                   return { controlsDescendantBindings: true };
               }
         };

         //build the core logic for the init function
         binding.setup = function(element, options, context) {
-            var widget, $element = $(element);
+            var widget, $element = $(element), $disposeProxy;

+            // Create proxy in original location to capture when the element would have been disposed
+            if (widgetConfig.destroyByProxy) {
+                $disposeProxy = $('<div style="display: none" />').insertAfter($element);
+            }
+            
             //step 2: setup templates
             self.setupTemplates(widgetConfig.templates, options, element, context);

             //step 3: initialize widget
             widget = self.getWidget(widgetConfig, options, $element);

@@ -78,12 +83,17 @@

             //step 5: set up computed observables to update the widget when observable model values change
             self.watchValues(widget, options, widgetConfig, element);

             //step 6: handle disposal, if there is a destroy method on the widget
             if(widget.destroy) {
+                if ($disposeProxy) {
+                    ko.utils.domNodeDisposal.addDisposeCallback($disposeProxy[0], function() {
+                        widget.destroy();
+                    });
+                }
                 ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
                     widget.destroy();
                 });
             }
         };

@@ -768,13 +778,16 @@
         }
     },
     watch: {
         content: CONTENT,
         title: TITLE,
         isOpen: [OPEN, CLOSE]
-    }
+    },
+    // The dom element that contains the window isn't going to be disposed when the template containing it is rendered again.
+    // This is because the window's dom element is placed at the end of the document structure by kendoWindow
+    destroyByProxy: true
 });

 createBinding({
     name: "kendoChart",
     watch: {
         data: function(value) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T15:46:40.393

看起来窗户关闭后没有正确清理。这通常不是问题（并且是可取的），但如果重新渲染网格，则会`kendoWindow`初始化一个不知道已经存在窗口的新网格。

在淘汰赛剑道代码中可能会处理这个问题。窗口的`destroy`方法已经被调用，所以我需要看看为什么它实际上没有删除窗口元素。

目前的解决方法是为关闭窗口时配置一个全局处理程序，例如：

```
 ko.bindingHandlers.kendoWindow.options.close = function() {
      $('.k-window, .k-overlay').remove();
  }; 
```

示例：http: [//jsfiddle.net/rniemeyer/dcYRM/](http://jsfiddle.net/rniemeyer/dcYRM/)

# php - 关于 ajax、php 和 dll 的奇怪问题（状态 500）

> ID：14020494
> 
> 赞同：0
> 
> 时间：2012-12-24T11:02:38.550
> 
> 标签：php, ajax, dll

我正在通过 ajax 调用一个 php 文件（对于字典），它对我的​​开发机器中的所有单词（及其 ids）都有效。但是在现场机器中，对于某些话，我得到一个 xmlhttp.status 500 （内部服务器错误）。

js代码：

```
 xmlhttp.open("GET","displaySense_GET.php?SenseParameters="+strParams,true);
    xmlhttp.send(); 
```

所以在现场机器中，有一些特殊的 strParams 例如“ **115744@909@0@115744@115744@specific_word** ” .php 文件因内部服务器错误而崩溃。（尽管对于大多数单词来说效果很好）。

所以我想，嘿，让我们在我的浏览器中点击 .php 文件看看会发生什么

```
http://livemachine.com/displaySense_GET.php?SenseParameters=115744@909@0@115744@115744@specific_word 
```

**在我的浏览器中它不会崩溃，而是返回正确的结果！换句话说，它仅在通过 AJAX 检索时崩溃（代码 500），并且仅针对参数“SenseParameters”的某些特定组合，例如“115744@909@0@115744@115744@specific_word”。同样，这对现场机器有效，在开发机器中，它永远不会崩溃。**

也许它有帮助...... displaySense_GET.php 看起来像这样：

```
<?php

require_once('dirpath.php');

if ( isset($_GET['SenseParameters']) ) {

    $senseparams = trim($_GET['SenseParameters']);

    $strRes = "";
    $output="";
    if (strlen($senseparams) > 1) {
        try {
            $senseparams = str_replace("@", "#", $senseparams);
            $obj = new COM("dllname.ExtFunctions") or die("Unable to instantiate dllname");
            $output = $obj->fnInitialize("lang", $APPLICATIONDIRECTORY . "\\lex", $APPLICATIONDIRECTORY . "\\dll", "utf8");
            $output = $obj->fnBringSense($senseparams);
            $strRes = $output;

            echo $strRes;
        }
        catch (Exception $e) {
            echo "Fatal error: " . $e->getMessage() . " :internal error";
        }
    }   
} else {
    echo "error:displaySense";
}

?> 
```

任何人都可以帮助解决为什么会发生这种情况？也许事实是，如果我直接点击 url 它不会崩溃，但如果我通过 javascript 调用它，它会返回状态 500，告诉你什么？

（单词是utf8 - 不是英文，但这不应该是一个问题，如果是的话，它会为所有单词崩溃）。

ps 更特别的是，它不会在

```
$obj->fnBringSense($senseparams); 
```

使用参数并在字典中进行实际搜索的行，它将在

```
$obj->fnInitialize("lang", $APPLICATIONDIRECTORY . "\\lex", $APPLICATIONDIRECTORY . "\\dll", "utf8"); 
```

行，它不使用参数，只进行一般初始化。

编辑：

**错误不会在异常中被捕获，因此返回一个有效的状态=200，它会在 ajax 调用中返回一个状态 500**

# php - PDO fetchAll 返回数组中的对象或数组中的数组

> ID：14020504
> 
> 赞同：-1
> 
> 时间：2012-12-24T11:03:18.597
> 
> 标签：php, mysql, pdo

我有一个烦人的问题，无论我告诉`PDO`返回一个数组或对象，它总是将它放在另一个数组中。IE。：

```
Array (
    [0] => stdClass Object ( [name] => Test Topper [urlName] => test-topper )
    [1] => stdClass Object ( [name] => Test Topper [urlName] => test-topper )
    [2] => stdClass Object ( [name] => adfg dfg [urlName] => adfg-dfg ) 
    [3] => stdClass Object ( [name] => adfg dfg [urlName] => adfg-dfg )
) 
```

我该如何停止这种行为，所以我最终得到：

```
stdClass Object ( [name] => Test Topper [urlName] => test-topper ) 
[1] => stdClass Object ( [name] => Test Topper [urlName] => test-topper )
[2] => stdClass Object ( [name] => adfg dfg [urlName] => adfg-dfg ) 
[3] => stdClass Object ( [name] => adfg dfg [urlName] => adfg-dfg ) 
```

所以我可以使用`$data->name`而不是访问属性`$data[0]->name`？

这是负责获取数据的 PHP：

```
public function fetchToppersAction($type, $orderBy, $limit)
{
    $PDOParams = array() ;
    $SQL = 'SELECT name, urlName FROM toppers_images, toppers
            LEFT JOIN meta_descriptions AS md ON md.topperId = toppers.id
            ' ;
    if($type)
    {
        $SQL .= 'WHERE typeId = ?' ;
        array_push($PDOParams, $type) ;
    }
    $SQL .= 'ORDER BY ? LIMIT ?' ;
    array_push($PDOParams, $orderBy, $limit) ;

    $r = $this->db->prepare($SQL) ;
    $r->execute($PDOParams) ;
    return $r->fetchAll(PDO::FETCH_OBJ) ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:07:57.567

这种方式是不可能的。。

你怎么能叫`$data->name`whgen 你有多个名字？

而不是这样做

```
 /* 
    * $dataArray is the array which you are getting from $r->fetchAll(PDO::FETCH_OBJ);
    *
    */

  foreach($dataArray as $data){
    echo $data->name;
   } 
```

# sorting - 是否有使用约束进行排序的通用算法？

> ID：14020505
> 
> 赞同：0
> 
> 时间：2012-12-24T11:03:20.997
> 
> 标签：sorting

假设我有 URL 列表，并且已经进行了一些排序；现在让我们添加一些约束 - 假设连续有两个以上具有相同域的链接是不好的。

实际上我可以有一些限制——两个、三个、五个，不太可能更多。

现在我想重新使用我的原始列表，同时在初始排序和我的约束之间保持一些平衡。这条平衡线应该以某种方式配置。

现在我所想的只是非常简单（而且我相信容易出错）的蛮力方法 - 只需遍历列表，计算我关心的每个统计数据，决定通过一些启发式向上或向下移动链接，重新计算统计数据并进一步移动...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:48:29.123

我延迟解决这个问题；但我想出了一种可能的解决方案，我会尝试描述它。

它适用于“连续不超过 N 个具有相同属性的元素”的问题 - 在我的原始案例中具有相同域的链接。

所以：

1.  识别列表中的“坏”位置 - 并将它们作为索引间隔记住。
2.  对于每个间隔：
    *   在两侧扩展该间隔 - 注意不要超过数组的范围（可能还有另一个间隔的范围）
    *   扩展大小应取决于间隔大小
    *   洗牌该间隔，除非它看起来相对于我们的条件没问题

通过这种方式，我们只在有限的时间间隔内扰乱排序，一般排序不应该有太大变化。

当我们列表的一半以上是单个“坏”间隔时，我们可能应该有特殊情况——例如，只需均匀分布它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:08:06.393

有一篇 IEEE 论文，介绍了一种使用约束进行排序的通用算法……

如果你喜欢阅读它，那么这里是链接：http://ieeexplore.ieee.org/xpl/articleDetails.jsp;jsessionid=nBBXQnGZGd9bRJhQfjzWQGhLm97BQ7xLG9LChppLPBvfJ0Sb2hRh!1364212599?arnumber=5358031&contentType=Conference+ [Publications](http://ieeexplore.ieee.org/xpl/articleDetails.jsp;jsessionid=nBBXQnGZGd9bRJhQfjzWQGhLm97BQ7xLG9LChppLPBvfJ0Sb2hRh!1364212599?arnumber=5358031&contentType=Conference+Publications)

# android - LibGdx：在应用程序生命周期中调用了两次调整大小

> ID：14020516
> 
> 赞同：3
> 
> 时间：2012-12-24T11:04:23.100
> 
> 标签：android, libgdx

我有一个获取这些输出的代码。我使用 libgdx 框架，自应用程序启动以来似乎调用了两次调整大小。想知道为什么它被调用两次，因为我没有做任何不寻常的事情。下面的类是从实现 Screen 类的 AbstractScreen 扩展而来的。应用程序生命周期链接：[http ://code.google.com/p/libgdx/wiki/ApplicationLifeCycle](http://code.google.com/p/libgdx/wiki/ApplicationLifeCycle)

```
The tags refer to the Functions being called:

SHOW(): devInfo.glyphWidth=18
SHOW(): devInfo.glyphHeight=27
AbstractScreen.resize: screenScaleX=0.8
AbstractScreen.resize: screenScaleY=0.8
resize(): devInfo.glyphWidth=14
resize(): devInfo.glyphHeight=21
resize(): logoSplashSprite.getWidth=204.8
resize(): logoSplashSprite.getHeight=204.8
AbstractScreen.resize: screenScaleX=0.8
AbstractScreen.resize: screenScaleY=0.8
resize(): devInfo.glyphWidth=11
resize(): devInfo.glyphHeight=16
resize(): logoSplashSprite.getWidth=204.8
resize(): logoSplashSprite.getHeight=204.8
fps 0
fps 65
.
.
. 
```

谢谢苏维克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T00:37:42.437

如果您可以从“AbstractScreen”类和“Game”类中发布一些示例代码会更好。我假设你有以下设置：

```
public class MySuperGame extends Game {

    @Override
    public void create() {
         setScreen(new MyScreen(this));
    }

    @Override
    public void resize(int width, int height) {
         super.resize(width,height);
    }
} 
```

根据您在那里发布的应用程序生命周期，当启动“游戏”类时，将调用“游戏”类的以下方法：

1.  创造（）
2.  调整大小（）

问题在于，当您在“create()”方法中调用“setScreen()”时，“Game”类会设置屏幕并调用新设置的“resize()”方法屏幕。

然后，调用“Game”类的“resize()”方法。再一次，“游戏”类调用屏幕的“resize()”方法。

总而言之，屏幕的“resize()”方法被调用了两次。一次是设置屏幕，另一次是调整游戏大小。

希望有帮助。

# asp.net-mvc - 带有控制器名称和参数的路由

> ID：14020519
> 
> 赞同：1
> 
> 时间：2012-12-24T11:04:33.813
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我有酒店列表，每家酒店都有他的详细信息页面，我需要使用闲置 URL 在该页面上导航

```
/Hotel/HotelName 
```

其中**Hotel**我的控制器和**HotelName**是他的索引操作的参数

```
public ActionResult Index(string hotelName) 
```

在 ASP.NET MVC 中，如何配置路由以达到此结果？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:14:27.740

在默认路由之前添加此路由：

```
routes.MapRoute(
    name: "Hotels",
    url: "Hotel/{hotelName}",
    defaults: new { controller = "Hotel", 
                    action = "Index", 
                    hotelName = UrlParameter.Optional }
); 
```

# linux - 在对其进行一些更改后替换文件中的字符串

> ID：14020522
> 
> 赞同：0
> 
> 时间：2012-12-24T11:05:00.237
> 
> 标签：linux, bash, sed, awk

**任务：**

我得到了一个带有字幕的文件，其中时间非常糟糕。不过都是一样的时间。我想在它们上运行一个脚本来增加/减少一定的时间。我正在尝试通过 linux 中的命令行来执行此操作。所以我正在尝试使用 awk 和/或 sed。不过，我对他们没有经验。

我要更改的字符串如下所示：01:35:12,300

**问题：**

使用 awk 我设法编写了一个脚本文件，我可以像这样调用它：

```
awk -f subtitles_shift.awk change="-01:00:11" subtitle_sample 
```

我的脚本基本上做的是：它将文件中的字符串以及作为参数传递的字符串转换为秒。进行更改，转换回字符串，然后再次吐出整个内容。它有效。

但是，唯一的事情是，我现在不知道如何将这些更改写回文件......

**我的想法：**

我认为，我应该使用 sed 来完成这项工作，因为它允许我写回文件。但是对于 sed，我不知道如何编写这样一个脚本，在应用替换字符串之前对搜索字符串进行计算。

```
sed 's/..:..:..,.../REPLACEMENT/' <old >new 
```

在将替换字符串返回给 sed 之前，如何对匹配的模式进行所有这些必要的计算？

我希望你明白我的意思...

**最后但并非最不重要的：**

提前非常感谢！

**代码示例——代码示例**

这是我的 awk 脚本的主要部分：

```
# looking for the lines that hold the time strings
/^..:/ {
    # picking the first and third column. These are the times
    start = $1; 
    end   = $3;
    # calculating changes by invoking functions
    start_new = alter_time(start, change, sign);
    end_new   = alter_time(end, change, sign);
} 
```

**可能的解决方案**

地狱，是的！我可以处理所有内容，对必要的行进行数学运算，然后将所有行写回文件。到目前为止，这似乎有效：

```
{
    if ($1 ~ /^..:/) {

        start = $1;
        end   = $3;

        start_new = alter_time(start, change, sign);
        end_new   = alter_time(end, change, sign);

        print start_new " --> " end_new > "times.srt";
    } else {
        print $0 > "times.srt";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T13:21:46.950

您可以使用就地减法，意思是，获取字幕文件，并使用 awk 解析直到达到时间格式，（您已经完成了广告）

然后利用awk语言的[时间函数](http://www.gnu.org/software/gawk/manual/html_node/Time-Functions.html)，就地减法替换。

或者，您可以使用这样的东西进行减法，（感谢[glenn](https://stackoverflow.com/users/7552/glenn-jackman)）

```
awk -v 'time=16:13:04,699' -v "date=$(date +%H:%M:%S)" '
  function abs(x) {return x<0 ? -x : x}
  BEGIN {
    split(time, ary, /[:,]/); t_sec = 3600*ary[1] + 60*ary[2] + ary[3]
    split(date, ary, /:/);    d_sec = 3600*ary[1] + 60*ary[2] + ary[3]
    # output difference in minutes
    print abs(t_sec - d_sec)/60
  }
' 
```

无论如何，我认为你不需要 sed ，祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T16:59:34.013

很可能远非完美。但这是我到目前为止想出的脚本。而且，嘿，它的工作;-)

我的第一个 awk 脚本，顺便说一句，所以请多多包涵，但请随时指出所有弱点...

```
#!/usr/bin/awk -f

# invoke me like this:
#
# [awk -f] subtitles_shift.awk var="-01:42:09" file.srt
#
# @ var     the shift forward or backward
# @ file    the srt file to be processed
#
# fractions of seconds are ignored. the script gives the 
# following format back:
# HH:MM:SS,000 --> HH:MM:SS,000
# 
# the script saves to a file named times.srt in the
# current directory.

#############################################
# BEGIN
#############################################

BEGIN {
    print "\nstarting script (subtitles_shift.awk):";
    # get the first variable passed
    var = ARGV[1];
    # assign only the value
    split(var, a, "=");
    change = a[2];
    # assign the operation (addition or subtraction)
    sign = check_sign(change);
    # trim a possible sign from the variable
    sub(/^[^0-9]/, "", change);
    print "the time shift will be: " , sign change;
    print "--------------------------------------";
}

function convert_time_string_to_sec(string) 
{
    # string should be of the format 00:00:00,0[00]
    split(string, a, ":");
    split(a[3], b, ",");
    hh = a[1];
    mm = a[2];
    ss = b[1];
    # calculate the total time in seconds
    return ( hh * 3600 + mm * 60 + ss );
}

function add_leading_zero(str)
{
    if (length(str) == 1) {
        str = ( "0" str );
    }
    return str;
}

function trim_fraction(str)
{
    split(str, array, ".");
    return array[1];
}

function convert_sec_to_string(sec)
{
    # get hours as a fraction
    hours  = sec / 3600;
    # only take complete hours
    h  = trim_fraction(hours);
    # add a leading zero (if necessary)
    hh = add_leading_zero(h);
    # subtract full hours from sec
    sec -= ( h * 3600 );
    # get minutes as a fraction
    min  = sec / 60;
    # only take complete minutes
    m  = trim_fraction(min);
    # add a leading zero (if necessary)
    mm = add_leading_zero(m);
    # subtract full minutes from sec
    sec -= ( m * 60 );
    # add a leading zero (if necessary)
    ss = add_leading_zero(sec);
    # prepare full string and return it
    string = ( hh ":" mm ":" ss ",000" );
    return string;
}

function alter_time(time_str, alter_str, sign)
{
    # get time in seconds
    sec = convert_time_string_to_sec(time_str);
    dif = convert_time_string_to_sec(alter_str);
    # add or subtract according to sign
    if (sign == "+") {
        new = sec + dif;
    } else {
        new = sec - dif;
    }
    # convert back to a string (00:00:00,000) and return
    newstr = convert_sec_to_string(new);
    return newstr;
}

function check_sign(str)
{
    # check for a sign, if none assume addition
    first  = substr(str, 0, 1);
    if (first == "-")
        return "-";
    else
        return "+";
}

#############################################
# main block
#############################################

{
    # if the line starts with time string
    if ($1 ~ /^..:/) {
        # assign start and end time
        start = $1;
        end   = $3;
        # run the main function to change according to argument passed
        start_new = alter_time(start, change, sign);
        end_new   = alter_time(end, change, sign);
        # print the new line to file (string --> string)
        print start_new " --> " end_new > "times.srt";
    } else {
        line = $0;
        # trim line feeds (appeared on my linux machine ^M at eol)
        gsub(/[:\015]/, "", line);
        # print the line to file
        print line > "times.srt";
    }
}

#############################################
# END
#############################################

END {
    print "file times.srt created.";
    print "--------------------------------------";
} 
```

# windows - java右键单击文件单击扩展名

> ID：14020528
> 
> 赞同：1
> 
> 时间：2012-12-24T11:05:29.940
> 
> 标签：windows, right-click

当您单击文件时，有没有办法添加新的扩展名，就像这张图片中的“Unlocker”扩展名一样，用于您自己用java编写的程序的“Unlocker”扩展名？

![在此处输入图像描述](../Images/193d2553e745996b1bab9c2cd5afed6d.png)

# android - 使用设置了三种以上颜色的 gradientDrawable

> ID：14020530
> 
> 赞同：20
> 
> 时间：2012-12-24T11:05:33.847
> 
> 标签：android, colors, gradient, android-drawable

根据我读过的内容，您可以使用[gradientDrawable](http://developer.android.com/reference/android/graphics/drawable/GradientDrawable.html)并为其设置三种颜色，例如：

```
<gradient startColor="#00FF00" centerColor="#FFFF00" endColor="#FFFFFF"/> 
```

但是如果我想要三种以上的颜色，不仅如此，我还希望能够设置每种颜色的放置位置（重量/百分比）？

是否可以使用 API 或者我应该制作自己的自定义可绘制对象？如果我需要制作自己的自定义drawable，我应该怎么做？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-12T09:43:36.617

将此代码放入您的 onCreate() 方法中：

```
ShapeDrawable.ShaderFactory shaderFactory = new ShapeDrawable.ShaderFactory() {
    @Override
    public Shader resize(int width, int height) {
        LinearGradient linearGradient = new LinearGradient(0, 0, width, height,
            new int[] { 
                0xFF1e5799, 
                0xFF207cca, 
                0xFF2989d8, 
                0xFF207cca }, //substitute the correct colors for these
            new float[] {
                0, 0.40f, 0.60f, 1 },
            Shader.TileMode.REPEAT);
         return linearGradient;
    }
};
PaintDrawable paint = new PaintDrawable();
paint.setShape(new RectShape());
paint.setShaderFactory(shaderFactory); 
```

并将此可绘制对象用作背景。

您也可以通过创建图层在 xml 中添加三种以上的颜色。但是在 XML 中它是相当复杂的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-11-28T09:34:51.240

无法在 xml 文件中进行操作，但您可以使用 GradientDrawable 类在您的 Java 代码中应用 +3 颜色渐变：

```
GradientDrawable gradientDrawable = new GradientDrawable(
                Orientation.TOP_BOTTOM,
                new int[]{ContextCompat.getColor(this, R.color.color1),
                        ContextCompat.getColor(this, R.color.color2),
                        ContextCompat.getColor(this, R.color.color3),
                        ContextCompat.getColor(this, R.color.color4)});

        findViewById(R.id.background).setBackground(gradientDrawable); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-12T15:05:21.727

使用 GradientDrawble 我们可以做到这一点

```
GradientDrawable gradientInsta = new GradientDrawable(GradientDrawable.Orientation.LEFT_RIGHT,
                new int[] {
                        Color.parseColor("#F9ED32"),
                        Color.parseColor("#F6C83F"),
                        Color.parseColor("#F2735F"), 
                        Color.parseColor("#EF3E73"),
                        Color.parseColor("#EE2A7B"),
                        Color.parseColor("#D22A8A"),
                        Color.parseColor("#8B2AB1"),
                        Color.parseColor("#1C2AEF"),
                        Color.parseColor("#002AFF"),
                        ContextCompat.getColor(MainActivity.this, R.color.colorPrimary)
        });
findViewById(R.id.insta).setBackground(gradientInsta); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T11:15:41.857

我认为以下是可能的解决方案。

*   您可以使用渐变创建多个形状并形成更大的形状。
*   `GradientDrawable Class`您可以通过扩展参考以下文档来创建自己的 GradientDrawable 。

*   [渐变可绘制文档](http://developer.android.com/reference/android/graphics/drawable/GradientDrawable.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-16T09:00:40.347

**在 Kotlin 中，您可以这样做：**

用您的颜色值替换 color1,2,..n

```
 //Create Gradient 
                val gradientDrawable = GradientDrawable(
                    GradientDrawable.Orientation.TOP_BOTTOM,
                    intArrayOf(color1,color1 ,color1, colorn)
                );
                gradientDrawable.cornerRadius = 0f; 
```

# spring - 使用 Spring Security 和 Jersey Restful Web 服务进行登录身份验证

> ID：14020532
> 
> 赞同：2
> 
> 时间：2012-12-24T11:05:53.840
> 
> 标签：spring, rest, spring-security, jersey

我是 Jersey Restful Web 服务和 Spring Security 的新手。

我创建了一个移动应用程序，其中使用 Jersey RESTful Web 服务和 JAVA 从后端获取数据。现在我们正在集成一个登录页面。对于身份验证，我们将使用 Spring Security DB 身份验证。在 google 中没有找到基于 jersey 和 Spring Security 的登录解决方案

我的休息网址将是这样的：

```
http://localhost:6060/Myapp/REST/services/Login;userName=abcd;password=xxxx 
```

我不知道如何使用 Spring Security 处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:30:58.983

您可以使用[servlet 过滤器](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html)或[spring mvc 拦截器](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-handlermapping-interceptor)从请求中提取凭据。

如果凭据有效，您可以通过[更新身份验证对象以编程方式登录用户](https://stackoverflow.com/questions/7900994/programmatically-login-in-a-user-using-spring-security)

# php - 使用 Zend 实现自定义 WURFL 时出错

> ID：14020536
> 
> 赞同：1
> 
> 时间：2012-12-24T11:06:04.100
> 
> 标签：php, zend-framework, mobile, wurfl

我们有一个`ZEND 1.10v`网站。现在我们正在使用**WURFL**浏览器检测创建一个移动站点。我们知道它不被支持，`ZEND 1.10v`因此我们将它包含在 Php 类中。每个设置似乎都可以，但是当我们访问网站上显示的 URL 时

**“加载的 WURFL 数据中没有 ID 为 [通用] 的设备”**

当我调试它实际上来自的问题时

```
/library/WURFL/CustomDeviceRepository.php -> function init() -> 
```

在调用函数的函数内部

```
$this->getDevice(WURFL_Constants::GENERIC); 
```

此时，当我们检查`WURFL_Constants::GENERIC`它时，它作为“通用”值传递。`getDevice()`我们使用它检查的功能进一步调试

```
$device = $this->persistenceStorage->load($deviceId) 
FYI : $deviceId means WURFL_Constants::GENERIC which is 'generic' value assigned. 
```

上面的函数返回一个空值，因此它抛出以下异常

**“加载的 WURFL 数据中没有 ID 为 [通用] 的设备”**

我们不确定进一步调试以解决此问题。有谁知道如何解决这个问题？我们认为我们应该定义默认设备条目等。

**仅供参考**：我们已将缓存和持久性目录权限设置为 777

# url - Symfony2 中的 url() 在 prod 环境中返回不正确

> ID：14020537
> 
> 赞同：0
> 
> 时间：2012-12-24T11:06:08.703
> 
> 标签：url, symfony, development-environment, production

我的项目在`http://localhost/project/web/`，这很好。但我认为开发类似的东西更好`http://project.dev`- 这在开发环境中工作正常，但在生产以下树枝代码时

```
{{ path('homepage') }} 
```

输出`/project/`错误，因为它现在只需要输出`/`。有没有我在某处缺少的设置？

我也清除了我的产品缓存。

谢谢

**更新**

Apache conf 看起来像这样

```
<VirtualHost *>
    ServerName project.dev
    DocumentRoot "/Applications/MAMP/htdocs/project/web"
</VirtualHost> 
```

和 .htaccess 是；

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    #<IfModule mod_vhost_alias.c>
    #    RewriteBase /
    #</IfModule>

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule> 
```

**更新 2**

主页路由是这样的

```
homepage:
    pattern:  /
    defaults: { _controller: ProjectBundle:Default:index } 
```

# html - 语义 HTML5 CSS3 响应式设计

> ID：14020540
> 
> 赞同：2
> 
> 时间：2012-12-24T11:06:26.207
> 
> 标签：html, css

在阅读了一些关于响应式网页设计的书籍之后`HTML5`，`CCS3`我开始搜索示例模板来玩弄。

但是，我遇到的一切似乎都使用了`CSS`我不熟悉的网格。有许多可用的框架似乎都使用了网格系统。当我查看源代码时，它似乎与我所读到的一切背道而驰。他们仍在使用`divs`和不使用任何 HTML5 标签，因此是非语义的。我想建立没有`CSS`网格的响应式网站，以便它是语义的。谁能帮助我从哪里开始？我很想看到一个不使用网格系统的响应式网页示例。

我宁愿从头开始构建而不是使用框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:10:00.197

您仍然可以将 HTML5 语义标记放置在没有语义的标记中，例如，您的`article`元素可以被无意义的`div`元素包围。

话虽如此，您根本不必从框架开始 - 但我的建议是限制您需要更改大小以使事情响应的元素数量。例如，如果您在 10 个元素上设置宽度，这将变得很痛苦。如果您可以在一个元素上设置宽度并将所有子元素表示为百分比，那么维护起来会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:45:41.990

我不认为这些框架与您所读到的关于语义 HTML 5 标记的所有内容都背道而驰。这只是框架没有内容的事实，而内容是使用`<section>`, `<article>`,等的驱动力`<header>`。在一个普通的`<div>`标签上。作为开发人员，您是使用 HTML 5 标签为代码带来语义意义的人。

我发现真正了解响应式设计的工作原理的唯一方法是深入研究并开始编码。创建一个简单的布局并应用不同的媒体查询，并习惯使用百分比与固定宽度。我敢打赌，在您浏览了几页之后，您会开始对它感到更舒服，并且计划如何布局您的网站会变得更加容易。

由于每个站点都会有所不同，因此我看不出您希望人们提供什么样的示例供您用作起点。如果您没有使用框架和从头开始编码，我建议您从这组媒体查询开始：[http ://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

# c# - 通过代理连接到 PostgreSQL

> ID：14020543
> 
> 赞同：2
> 
> 时间：2012-12-24T11:06:52.330
> 
> 标签：c#, database, winforms, npgsql

我在我的 C# Winform 项目`PostgreSQL`中使用`Npgsql`. 我使用以下连接字符串将我的应用程序连接到 PostgreSQL：

```
 String connstring = String.Format("Server={0};Port={1};" +
                    "User Id={2};Password={3};Database={4};",
                    "192.168.22.1", "5432", "postgres",
                    "password", "test" ); 
```

我想问，如果我在到达DB之前要通过xxx.xxx.xxx.xx代理IP，连接字符串形式会是什么？

# java - 如何在java中从整数中获取浮点值

> ID：14020544
> 
> 赞同：5
> 
> 时间：2012-12-24T11:07:01.577
> 
> 标签：java

> **可能重复：**
> [如何在 Java 中将整数转换为浮点数？](https://stackoverflow.com/questions/4377842/how-can-i-convert-integer-into-float-in-java)

我遇到了这段代码的问题。我有两个变量`int i`和`float f`。

`int i = 23;`

`float f = i/10;`

我想`f`变量中的值应该是`2.3`

但实际输出`f`值为`2.0`

为什么结果会这样，我怎样才能得到浮点值`2.3`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-24T11:08:48.920

`float f = i/10`

正在使用整数算术（分子和分母都是整数）。然后将结果提升为一种`float`类型。

如果你这样做

```
float f = i/10f 
```

然后你将强制浮点运算（分母现在是非整数）。连续`f`表示`10f`被视为浮点数。指定`10.0`or`10d`表示双精度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T11:08:34.553

输出为 2.0f，因为分子和分母都是整数，因此它使用整数算术。

`i/10`返回`2`which 当类型转换为 时`float`，转换为`2.0f`.

您需要对数字/分母中的至少一个进行类型转换`float`以进行 FP 除法

```
int i = 23;

float f = (float)i/10; 
```

或者

```
float f = i/10f; 
```

可能的方法。

```
float z = (float) x / y; 
```

或者

```
float z = x / (float) y; 
```

或（不需要）

```
float z = (float) x / (float) y; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T11:12:51.113

请尝试代替您 `i/10` 使用 `i/1Of`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T11:19:57.737

您可以将其视为两步操作

```
int i = 23;
int tmp = i/10;   
// tmp = 2
float f = (float) tmp;
// f = 2.0f 
```

这就是它在字节码中的样子

```
 L0         //int i = 23;
    BIPUSH 23
    ISTORE 1 // var 1 is 'i'
   L1        // int tmp = i/10;   
    ILOAD 1
    BIPUSH 10
    IDIV     // integer division 
    ISTORE 2 // var 2 - is tmp
   L2        // float f = (float) tmp;
    ILOAD 2
    I2F      // (float) tmp
    FSTORE 3 // var 3 is 'f' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T11:22:44.533

```
int i = 1;
float f = (float) i; 
```

# javascript - 为什么通过javascript发送多个打印被firefox阻止以及如何禁用它？

> ID：14020547
> 
> 赞同：1
> 
> 时间：2012-12-24T11:07:23.803
> 
> 标签：javascript, firefox

我正在发送三份打印声明。

```
PagePrint=window.open('xx');
PagePrint.print();
PagePrint.print();
PagePrint.print(); 
```

第一次打印成功完成，但在第二个语句中`firefox`阻止打印并显示此消息：`(prevent this page from creating additional dialogs)`。如何使用`firefox configuraton`或任何其他方式禁用此对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:16:38.193

尝试执行以下操作：

1.  在 firefox URL 栏中，输入“about:config”。将弹出一个警告，但只需单击以继续。
2.  右键单击页面上的任意位置，然后在弹出菜单中选择“新建 -> 整数”。
3.  在出现的对话框中输入“dom.successive_dialog_time_limit”，并将其赋值为 0。
4.  按 OK 保存该值。

希望应该让你做多个对话框。

# html - 发布信息锚文本未居中对齐

> ID：14020552
> 
> 赞同：0
> 
> 时间：2012-12-24T11:07:50.823
> 
> 标签：html, css, blogs, meta-tags

锚文本未在 div 类 postmeta 中间对齐：

我的html：

```
<div class="blog">
<div class="postmeta">
             <span class="date"><a>12/12/2012</a></span>
             <span class="author"><a>stackoverflow</a></span>
             <span class="category"><a>csshtml</a></span>
             <span class="comments"><a>no comments</a></span>
</div>
</div> 
```

我的 CSS：

```
.blog .postmeta {
border: 1px solid #272727;
font: 11px Verdana, Arial, Helvetica, sans-serif;
color: #9e9e9e;
border-radius:4px;
background:#202020;
display:block;
padding:10px;
}

.blog .postmeta  span{
 padding:5px 10px 5px 25px;

}

.date{
 color:red;
 float:left;
 text-decoration:none!important;
 background: url("images/date.gif") no-repeat scroll 0 0 transparent;}

.category,.author{
  float:left;
  text-decoration:none!important;
}
.postmeta .author {
  background: url("images/author.gif") no-repeat scroll 0 0 transparent;}

.comments{
  float:right;
}
.postmeta .comments {
    background: url("images/comments.gif") no-repeat scroll 0 0 transparent;} 
```

谁能帮我在 div 类 postmeta 中正确对齐我的日期、作者、类别、评论文本。我认为我的 css 中有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:13:29.487

您没有清除 div。一种方法是使用[clearfix](http://www.webtoolkit.info/css-clearfix.html)。

这是一个[演示](http://jsbin.com/anufoj/1/edit)

**CSS**：

```
.clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

.clearfix {
    display: inline-block;
}

html[xmlns] .clearfix {
    display: block;
}

* html .clearfix {
    height: 1%;
} 
```

**HTML**

```
<div class="postmeta clearfix">
    <span class="date"><a>12/12/2012</a></span>
    <span class="author"><a>stackoverflow</a></span>
    <span class="category"><a>csshtml</a></span>
    <span class="comments"><a>no comments</a></span>
</div> 
```

# module - 在linux中编译内核模块的麻烦

> ID：14020562
> 
> 赞同：2
> 
> 时间：2012-12-24T11:08:34.813
> 
> 标签：module, linux-kernel, kernel-module, kernel

我写了一个简单的 hello world 内核模块。我编写了一个make文件，如下所示：

```
obj -m += hello.o

KDIR: /usr/src/linux-headers-3.2.0-21-generic-pae

all:
     $(MAKE) -C $(KDIR) SUBDIRS=$(PWD) modules

clean:
     rm -rf *.o *.ko *.mod.* *.symvers *.order 
```

然后我使用make编译了模块。它工作得很好。

然后，最近我在内核更新到 3.2.0-24 时再次“制作”（当然我在 KDIR 中将版本更改为 24）。但是出现了以下错误：

```
make[1]: Entering directory `/usr/src/linux-headers-3.2.0-24-generic-pae'
make[2]: *** No rule to make target `arch/x86/tools/relocs.c', needed
by `arch/x86/tools/relocs'.  Stop. 
```

我检查并发现在/arch/x86/tools/中有一个relocs的可执行文件，但没有relocs.c

出了什么问题，我应该如何纠正它才能成功编译模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:10:02.683

请分享您编写的 hello-world 模块代码。

relocs.c 位于内核 src 内的 arch/x86/tools 下。

由于您的机器上只安装了 linux-headers，您可能看不到 relocs.c 文件。您必须下载整个内核 src。

按着这些次序：

$ sudo apt-get 更新

$ sudo apt-get 安装 linux-source。

作为试用版（在下载内核 src 之后），您可以更改 makefile 以将 KDIR 指向整个内核目录，然后构建您的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T07:02:48.213

我认为问题来自Makefile。我以前遇到过这个问题，你应该删除尾随空间并用制表符替换 \t 就可以了。希望这有帮助。

它可能是 Makefile 语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T03:43:29.360

我遇到了和你一样的问题。我通过在 Makefile 中替换你的构建命令来修复它。

```
make -C /lib/modules/$(shell uname -r)/build M=$(shell pwd) modules 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T11:16:47.880

> make[1]: 进入目录`/usr/src/linux-headers-3.2.0-32-generic-pae'

我的问题可能看起来很愚蠢，但我不明白'32'是什么？它不应该是'24'吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T11:20:46.807

应该是`KDIR:=`而不是`KDIR:`也`SUBDIRS=` 已被弃用。利用`M=$(PWD)`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-12T10:35:15.727

在 make 文件中，只需将 M=$(PWD) 更改为 M=$(shell pwd)...

像魅力一样工作

# logging - 如何在运行时从属性文件设置 log4j 中的日志级别

> ID：14020567
> 
> 赞同：1
> 
> 时间：2012-12-24T11:09:14.760
> 
> 标签：logging, log4j, jvm-arguments

如何在`log4j.xml`使用属性文件中设置日志级别`runtime time`？

```
<appender name="ConsoleAppender" class="org.apache.log4j.ConsoleAppender">
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern"
               value="%d{ABSOLUTE} %-5p [%c{1}] [%t]: %m%n" />
    </layout>
</appender>

<logger name="com.mypackage" additivity="false">
    <level value="${level}" />
    <appender-ref ref="ConsoleAppender" />
</logger> 
```

我通过传递值来设置`$level`from my的值，以便记录所有级别为 warn 及以上的消息。`vm arguments``-Dlevel="warn"`

现在我的问题是我必须从`properties`文件而不是设置日志级别的值`vm arguments`？我怎样才能做到这一点？

PS：我在 java 代码中使用 common.logging 和 log4j 作为配置机制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T01:11:41.410

这是动态更改日志级别的方法：

```
LogManager.getRootLogger().setLevel(Level.DEBUG); 
```

要使用自定义文件中的属性，请使用[Properties.loadFromXML](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#loadFromXML%28java.io.InputStream%29)读取具有属性的文件，然后使用这些属性确定级别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T11:28:16.460

山姆，

我不确定您要的是 log4j 的默认行为。您可以做的是，在您的应用程序属性文件中添加诸如 log4j.rootLogger=DEBUG 之类的属性，并指向 log4j 以将您的应用程序属性文件用作 log4j 属性文件。

您可以通过指定以下 vm 参数来强制 log4j 获取其配置文件：

```
java -Dlog4j.configuration=resources/log4j_dev.properties 
```

或者

```
java -Dlog4j.configuration=file:/resources/log4j_dev.properties 
```

log4j 属性文件的示例如下：

```
# Root logger option
log4j.rootLogger=INFO, stdout

# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n 
```

您还可以对属性文件使用 xml 格式。

如果您想以编程方式（在 rumtime 上）为 log4j 添加记录器，您需要执行以下操作：

```
 ConsoleAppender console = new ConsoleAppender(); //create appender
  //configure the appender
  String PATTERN = "%d [%p|%c|%C{1}] %m%n";
  console.setLayout(new PatternLayout(PATTERN)); 
  console.setThreshold(Level.FATAL);
  console.activateOptions();
  //add appender to any Logger (here is root)
  Logger.getRootLogger().addAppender(console);

  FileAppender fa = new FileAppender();
  fa.setName("FileLogger");
  fa.setFile("mylog.log");
  fa.setLayout(new PatternLayout("%d %-5p [%c{1}] %m%n"));
  fa.setThreshold(Level.DEBUG);
  fa.setAppend(true);
  fa.activateOptions();

  /add appender to any Logger (here is root)
  Logger.getRootLogger().addAppender(fa)
  //repeat with all other desired appenders 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-01T21:16:37.733

您可以通过读取动态属性文件在 System.setProperty 中设置日志级别，它将反映在 log4j 中。

干杯!

# iphone - 在 imagePickerController 完成后呈现一个带有模态的 viewController

> ID：14020576
> 
> 赞同：2
> 
> 时间：2012-12-24T11:09:50.600
> 
> 标签：iphone, objective-c, ios, ipad

从中选择图像后，我需要调用视图控制器`imagePickerController`，因此我使用了以下代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    imageEditorView = [[ImageEditorViewController alloc]initWithNibName:@"ImageEditorViewController" bundle:nil];
    imageEditorView.mainViewController = self;
    imageEditorView.imageBG = [info objectForKey:UIImagePickerControllerOriginalImage];

    [self presentViewController:imageEditorView animated:YES completion:nil];

} 
```

但调试器给了我这个警告：

```
Warning: Attempt to present <ImageEditorViewController: 0xaa42320> on
     <ViewController: 0x9b58680> whose view is not in the window hierarchy! 
```

没有礼物！

如果我 dissMiss 它首先调试器会给我这个错误：

```
 Warning: Attempt to present <ImageEditorViewController: 0xa913980> on
 <ViewController: 0x9b332a0> while a presentation is in progress 
```

！

已编辑

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
    } else {
        self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil] autorelease];
    }
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T11:44:51.140

使用以下代码，例如：

```
[self dismissViewControllerAnimated:YES completion:^{
   [self.parentViewController presentViewController:imageEditorView animated:YES completion:nil];
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:31:29.717

**更新：**

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    imageEditorView = [[ImageEditorViewController alloc]initWithNibName:@"ImageEditorViewController" bundle:nil];
    imageEditorView.mainViewController = self;
    imageEditorView.imageBG = [info objectForKey:UIImagePickerControllerOriginalImage];

    [self performSelector:@selector(presentPicture) withObject:nil afterDelay:2.0];
    [self dismissModalViewControllerAnimated:YES];

}

-(void)presentPicture 
{
     [self presentViewController:imageEditorView animated:YES completion:nil];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T11:12:24.123

首先你必须关闭 UIImagePickerController 然后只有你可以使用 presentViewController 去另一个视图控制器。

您可以使用以下代码

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

[self dismissModalViewControllerAnimated:YES];
imageEditorView = [[ImageEditorViewController alloc]initWithNibName:@"ImageEditorViewController" bundle:nil];
imageEditorView.mainViewController = self;
imageEditorView.imageBG = [info objectForKey:UIImagePickerControllerOriginalImage];

[self presentViewController:imageEditorView animated:YES completion:nil];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T11:12:28.077

我认为在你的`AppDelegate`你没有设置你`rootViewController`的`window`。所以而不是添加`subview`来`window`制作`rootViewController`你的`window`.

另一件事可能是你的当前`viewController`实际上`subview`是另一个`viewController`。

我的建议是放入`self.window.rootViewController = yourMaincontroller` 您的`AppDelegate`.

# javascript - 从数组中显示谷歌地图标记

> ID：14020599
> 
> 赞同：-1
> 
> 时间：2012-12-24T11:11:40.653
> 
> 标签：javascript, google-maps-api-3

我在显示我的标记时遇到问题。我成功地将它们隐藏在一个数组中，但我在将它们显示回来时遇到了问题，这是我的代码。

```
 function filtermark(){
 for (var i = 0; i < markersArray.length; i++ ) {
markersArray[i].setMap(null);
    }
    }
   function showmark(){
 for (var i = 0; i < markersArray.length; i++ ) {
markersArray[i].setMap(map);
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:52:17.443

查看您在[之前的问题](https://stackoverflow.com/questions/14020094/google-maps-api-clearing-markers)中发布的代码，您的地图变量是您的加载函数的本地变量。它可能需要是全球性的。

```
var map;
function load() {
  map = new google.maps.Map(...) 
```

# ios - moveToLatLong 时瓷砖杂乱无章

> ID：14020603
> 
> 赞同：1
> 
> 时间：2012-12-24T11:12:02.403
> 
> 标签：ios, xcode, openstreetmap, route-me

我将 Route-Me 与 openStreetMap 一起用于我的地图。
我有一个小按钮，可以将视图更新为当前 GPS 位置。
按下此按钮时，我希望视图重置为用户位置。当我这样做（我正在使用`[mapContents moveToLatLong:currentLocation]`）时，会发生来自不同区域的图块粘在视图上并且不更新。所以图像有时会被分割成具有不同缩放级别的矩形。

这是什么原因？

# css - 从精灵中获取图像并将其放入标签中

> ID：14020614
> 
> 赞同：0
> 
> 时间：2012-12-24T11:13:20.200
> 
> 标签：css, background, css-sprites

我有两种`<td>`，一种是`<td class="GH>`，第二种是`<td class="BH">`

我有一个带有 10 个不同颜色的圆圈的精灵图像。

我需要做的是只将绿色圆圈放入`<td class="GH>`，将蓝色放入`<td class="BH">`.

圆的大小是 13px 上的 12px

我的CSS是这样的：

```
td.GH
{
    background:url(http://localhost:36557/%D7%AA%D7%99%D7%A7%D7%99%D7%94%20%D7%97%D7%93%D7%A9%D7%94/Resources/images/status.png);
    width:12px;
    height:13px;

}
td.BH
{
    background:url(http://localhost:36557/%D7%AA%D7%99%D7%A7%D7%99%D7%94%20%D7%97%D7%93%D7%A9%D7%94/Resources/images/status.png);
    width:12px;
    height:13px;

} 
```

不幸的是，它不起作用。我得到了背景中的图像，但它是所有图像，所有圆圈。（我所有其他没有类的都是空的，因为它们应该是）。还有一个问题是，因为是td，所以宽高是改变td的宽高，但是我要的是图片的宽高。

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:20:49.603

您需要在精灵上指定图像的 X 和 Y 坐标。

精灵的左上角为 0 0。

因此，您将希望添加以下内容：

```
<table>
 <tbody>
  <tr>
   <td class="BH"><span></span></td>
  </td>
 </tbody>
</table>

td.BH span
{
    background-image:url(http://localhost:36557/%D7%AA%D7%99%D7%A7%D7%99%D7%94%20%D7%97%D7%93%D7%A9%D7%94/Resources/images/status.png);
    background-repeat:no-repeat;
    background-position: 40px 130px; // edit to be the correct values for your image
    width:12px;
    height:13px;
    display:block;

} 
```

# android - 在对话框中设置一个类

> ID：14020621
> 
> 赞同：0
> 
> 时间：2012-12-24T11:13:52.763
> 
> 标签：android, android-layout

是否可以在 Android 的对话框中打开一个类？

例如 ：

```
Dialog settingsDialog = new Dialog(this);
        settingsDialog.getWindow().requestFeature(Window.FEATURE_NO_TITLE);
        settingsDialog.setContentView(getLayoutInflater().
                                   inflate(R.layout.image_pager, null));
        settingsDialog.show(); 
```

正在打开图像。我怎样才能为加载类而不是 xml 布局做同样的事情？

附加信息：
这是我的 ImagePager 类

```
public class ImagePopUp extends BaseActivity implements OnClickListener {

    private ViewPager pager;
    Button boutton_retour;
    public static String img;

    private DisplayImageOptions options;
    String url,image,title;
    ArrayList<Post> PostDetails = new ArrayList<Post>();

    public void onCreate(Bundle savedInstanceState) {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_diaporama_pager);

        showViewHolderExtra();

    }

    private class ImagePagerAdapter extends PagerAdapter {

        private String[] images;
        private LayoutInflater inflater;

        @Override
        public void destroyItem(View container, int position, Object object) {
            ((ViewPager) container).removeView((View) object);
        }

        ImagePagerAdapter(String[] images) {
            this.images = images;
            inflater = getLayoutInflater();
        }

        @Override
        public void finishUpdate(View container) {
        }

        @Override
        public int getCount() {
            return images.length;
        }

        @Override
        public Object instantiateItem(View view, int position) {

            Dialog settingsDialog = new Dialog(ImagePopUp.this);
            settingsDialog.getWindow().requestFeature(Window.FEATURE_NO_TITLE);
            settingsDialog.setContentView(getLayoutInflater().inflate(R.layout.image_layout, null));
            settingsDialog.show();

            final View imageLayout = inflater.inflate(R.layout.item_pager_image, null);
            final ImageView imageView = (ImageView) imageLayout.findViewById(R.id.im_pager);
            final ProgressBar spinner = (ProgressBar) imageLayout.findViewById(R.id.loadinprogress);

            imageLoader.displayImage(images[position], imageView, options, new ImageLoadingListener() {

                public void onLoadingStarted() {
                    spinner.setVisibility(View.VISIBLE);

                }

                public void onLoadingFailed(FailReason failReason) {
                    String message = null;
                    switch (failReason) {
                        case IO_ERROR:
                            message = "Input/Output error";
                            break;
                        case OUT_OF_MEMORY:
                            message = "Out Of Memory error";
                            break;
                        case UNKNOWN:
                            message = "Unknown error";
                            break;
                    }

                    Toast.makeText(ImagePopUp.this, message, Toast.LENGTH_SHORT).show();

                    spinner.setVisibility(View.GONE);
                    imageView.setImageResource(android.R.drawable.ic_delete);
                }

                public void onLoadingComplete(Bitmap loadedImage) {
                    spinner.setVisibility(View.GONE);
                    Animation anim = AnimationUtils.loadAnimation(ImagePopUp.this, R.anim.fade_in);
                    imageView.setAnimation(anim);
                    anim.start();
                }

                public void onLoadingCancelled() {
                    // Do nothing
                }
            });

            ((ViewPager) view).addView(imageLayout, 0);
            return imageLayout;
        }

        @Override
        public boolean isViewFromObject(View view, Object object) {
            return view.equals(object);
        }

        @Override
        public void restoreState(Parcelable state, ClassLoader loader) {
        }

        @Override
        public Parcelable saveState() {
            return null;
        }

        @Override
        public void startUpdate(View container) {
        }

    }

    public void showViewHolderExtra(){

        String[] seperated = img.split(";");

        Bundle bundle = getIntent().getExtras();
        int pagerPosition = bundle.getInt("POSITION", 0);

        System.out.println("image: "+ pagerPosition);

        pager = (ViewPager) findViewById(R.id.pager);
        pager.setAdapter(new ImagePagerAdapter(seperated));
        pager.setCurrentItem(pagerPosition);

        options = new DisplayImageOptions.Builder()
            .showImageForEmptyUri(R.drawable.ic_launcher)
            .cacheOnDisc()
            .imageScaleType(ImageScaleType.IN_SAMPLE_INT)
            .build();
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

        switch(v.getId()){

        case R.id.boutton_retour:
            finish();
        break;

        }
    }
} 
```

我希望它出现在单击时的对话框中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:28:09.577

您希望整个活动加载到一个对话框中。有几种方法。如果活动只是一个 ViewPager，您可以只将对话框的内容设置为该 ViewPager：

```
 Dialog settingsDialog = new Dialog(this);
    settingsDialog.getWindow().requestFeature(Window.FEATURE_NO_TITLE);

    ViewPager mViewPager = new ViewPager(this);
    ImagePagerAdapter adapter = new ImagePagerAdapter(images);
    mViewPager.setAdapter(adapter);
    settingsDialog.setContentView(mViewPager);
    settingsDialog.show(); 
```

你甚至可以像正常的意图一样加载整个活动，然后让它看起来像一个对话框，有一个对话框主题或其他。

如果您知道`.setContentView`可以获取资源 id**或**视图，那么使用什么方法应该是不言而喻的。就像`onCreate`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:17:47.903

最简单的方法就是在你的 AndroidManifest 中设置：

```
 <activity
            android:name=".ImagePopUp"
            android:theme="@android:style/Theme.Dialog" >
        </activity> 
```

如果您需要对话框具有自定义大小，您可以在 ImagePopUp 类的开头使用类似这样的内容：

```
DisplayMetrics dm = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(dm);
int screen_width = dm.widthPixels;
int screen_height = dm.heightPixels;

getWindow().setLayout((screen_width *0.75), (int) (screen_height - 50));
getWindow().setGravity(Gravity.CENTER); 
```

然后，像往常一样打开类，使用点击意图：

```
Intent intent = new Intent(YourActualClass.this, ImagePopUp.class);
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T14:22:34.890

您可以通过在布局 xml 中使用自定义视图来执行此操作。

```
 settingsDialog.setContentView(getLayoutInflater().inflate(R.layout.image_pager, null)); 
```

布局/imagepaper.xml

```
<com.your.package.CustomLinearLayout
   xmlns: ... 
   android:layout_width="" ... etc
   /> 
```

然后这是对话框布局的“类”

CustomLinearLayout.java

```
public class CustomLinearLayout extends LinearLayout {

     // Overridden constructors

     // onFinishInflate() etc

} 
```

* * *

另一种方法是使用“ [DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html) ”

此处显示：http: [//blog.blundell-apps.com/tut-generic-fragment-dialog/](http://blog.blundell-apps.com/tut-generic-fragment-dialog/)

您的课程扩展了 DialogFragment：

```
 public class OneOptionDialogFragment<T> extends DialogFragment {

       // do stuff

 } 
```

并显示对话框（取自上面的 url）：

```
 OneOptionDialogFragment<UserDetails> dialogFragment = OneOptionDialogFragment.newInstance(title, message, buttonText);
    dialogFragment.show(getSupportFragmentManager(), "DeleteFragTag"); 
```

# ruby-on-rails - 为 Ruby on Rails 安装 Unix 设置

> ID：14020626
> 
> 赞同：2
> 
> 时间：2012-12-24T11:14:17.770
> 
> 标签：ruby-on-rails, unix, rvm

最近，我和讲师 Kevin Skoglund 一起参加了 Ruby on Rails 在线课程。我正在按照视频教程尝试设置我的 Unix。但是，当我输入此命令时**echo $PATH**。这就是我的命令行上显示的内容。

**/usr/local/rvm/gems/ruby-1.9.3-p194/bin:/usr/local/rvm/gems/ruby-1.9.3-p194@global/bin:/usr/local/rvm/rubies/ruby -1.9.3-p194/bin:/usr/local/rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr /X11/bin:/usr/local/git/bin:/opt/sm/bin:/opt/sm/pkg/active/bin:/opt/sm/pkg/active/sbin。**

此提示与讲师的命令行显示的完全不同，即： **/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin**

当我按下回车键时，我得到下面的提示， **[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "/usr/local/rvm/scripts/rvm" # Load RVM$**

这与导师的教程完全不同。关于我可能做错了什么或为什么会出现这种情况的任何建议，因为我过去一直在研究另一个 Rails 教程。

对此提示的任何建议或帮助将不胜感激。

提前谢谢你，蒂娜

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T11:25:37.910

你没有做错任何事。该`$PATH`变量定义了操作系统在您的系统上查找可执行程序的位置，并且可能与其他人的完全不同，因为系统将内容存储在不同的地方，人们可能有定制。看起来您已经通过 RVM 成功安装了系统范围的 ruby​​1.9.3-p194。我不认为你在这里有什么可担心的。

您可以使用该`which`命令查看`PATH`可执行文件的位置。如果这没有返回任何内容，那么您有问题并需要修改`PATH`. 如果它返回一些东西，那么你应该没有问题。

因此，假设`which rvm`显示了 RVM 可执行文件的路径和`ruby --version`提及 1.9.3-p194 的输出，那么您就没有问题了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:25:59.343

您显然已经安装了 RVM，如果您对卸载 rvm 感到困惑，为什么您与讲师的 $PATH 不同

```
rvm remove all
rvm implode 
```

重新打开终端

并且您应该拥有与讲师相同的 $PATH

# android - Android：Listview问题图像分配错误

> ID：14020636
> 
> 赞同：0
> 
> 时间：2012-12-24T11:15:33.513
> 
> 标签：android, android-listview

嗨，我搜索了 SO 并尽力而为，但无法使其正常工作..我有一个列表视图，我正在加载带有图像的电话联系人。下面是我的代码

```
public ProfileAdapter(Activity activity, int textViewResourceId, List<Profile> listCont,int renderer, String profileType) {
    super(activity, textViewResourceId, listCont);
    this.renderer = renderer;
    this.listCont = listCont;
    this.activity = activity;
    this.profileType = profileType;
}

public class ViewHolder {
    View rowView;
    public TextView textEmailId= null;
    public TextView textContNo= null;
    public TextView text= null;
    public ImageView photo= null;
    public int position;
}

@Override 
public View getView( int position, View convertView, ViewGroup parent) { 
    //View view = convertView; 
    ViewHolder holder;

    if (convertView == null) { 
        LayoutInflater inflater = (LayoutInflater) getContext() 
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
        convertView = inflater.inflate(renderer, null); 
        holder = new ViewHolder(convertView);
        holder.text = (TextView) convertView.findViewById(R.id.name); 
        holder.textContNo = (TextView) convertView.findViewById(R.id.contactno); 
        holder.textEmailId = (TextView) convertView.findViewById(R.id.emailId);  
        holder.photo = (ImageView ) convertView.findViewById(R.id.quickContactBadge1);  
        convertView.setTag(holder);
    }
    else {
        holder =(ViewHolder) convertView.getTag();       
        holder.position = position;
        Profile contact = listCont.get(position); 
        holder.text.setText(contact.getName()); 
        ImageView photo = (ImageView ) convertView.findViewById(R.id.quickContactBadge1);   
        photo.setTag(contact.getMobileNo()); 
        photo.setImageResource(R.drawable.stub_image);
        new LoadImage(photo).execute(contact.getMobileNo()); 
    } 
    return convertView;    
}

class LoadImage extends AsyncTask<String, Void, Bitmap>{ 
    // private final WeakReference<ImageView> viewReference;
    private ImageView img; 

    public LoadImage(ImageView img) { 
        //viewReference = new WeakReference<ImageView>( view );
        this.img=img;
    } 

    @Override 
    protected Bitmap doInBackground(final String... params) { 
        new QuickContactHelper(activity, img, (String) params[0]).addThumbnail(); 
        return null;
    }

    @Override 
    protected void onPostExecute(Bitmap bitmap) {
        // nothing
    }
} 
```

问题是，我正在获取列表，但是当我开始滚动时，图像正在加载，只有在滚动图像稳定且位置正确之后，我才知道我在哪里做错了，我希望在列表加载后加载图像和图像应该在正确的位置......任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:35:13.483

如果 convertView == null，您似乎什么也没做。您需要在 if 和 else 中都分配图片。

```
if (convertView == null) { 
    LayoutInflater inflater = (LayoutInflater) (getContext() 
.getSystemService(Context.LAYOUT_INFLATER_SERVICE)); 
    convertView = inflater.inflate(renderer, null); 

    holder = new ViewHolder(convertView);
    holder.text = (TextView) convertView.findViewById(R.id.name); 
    holder.textContNo = (TextView) convertView.findViewById(R.id.contactno); 
    holder.textEmailId = (TextView) convertView.findViewById(R.id.emailId);  
    holder.photo = (ImageView ) convertView.findViewById(R.id.quickContactBadge1);  

    convertView.setTag(holder);
}else {
    holder =(ViewHolder) convertView.getTag();       
}

holder.position = position;
Profile contact = listCont.get(position); 
holder.text.setText(contact.getName()); 

ImageView photo = (ImageView ) convertView.findViewById(R.id.quickContactBadge1);   
photo.setTag(contact.getMobileNo()); 
photo.setImageResource(R.drawable.stub_image); 
```

新 LoadImage(照片).execute(contact.getMobileNo());

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:43:57.407

> 您在适配器充气机中设置图像，以便在运行时滚动适配器时修改。你应该在活动中设置图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T17:00:51.367

只有在 convertview!=null 时才启动 AsynckTask。

要解决这个问题，只需将所有这些代码放在 if 语句之外：

```
 holder.position = position;
   Profile contact = listCont.get(position); 
   holder.text.setText(contact.getName()); 

   ImageView photo = (ImageView ) convertView.findViewById(R.id.quickContactBadge1);   
   photo.setTag(contact.getMobileNo()); 
   photo.setImageResource(R.drawable.stub_image);
   new LoadImage(photo).execute(contact.getMobileNo()); 
```

对于图像加载，我强烈推荐这个库：

[Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

希望这对您有所帮助。

# entity-framework - 将 EF 5 与 .net 4.0 (MVC 4) 一起使用时出现无效的方案问题

> ID：14020642
> 
> 赞同：0
> 
> 时间：2012-12-24T11:15:46.927
> 
> 标签：entity-framework, .net-4.0, asp.net-mvc-4

我有一个我们在 MVC 4 和 Entity Framework 5.0 中开发的 Web 应用程序，它使用 .Net 4.5 运行良好。然后因为客户端托管不支持 .NET 4.5，我需要将所有内容降级到 .NET 4.0。我收到一个错误

```
Could not load System.Net.Http library or one of its dependencies 
```

直到我创建了全新的解决方案和项目，它们都以 .NET 4.0 为目标并使用 NuGet 重新安装所有必需的包。

现在，在本地一切正常，但是当我部署到服务器时，出现以下错误。

```
Schema specified is not valid. Errors: 
(0,0) : warning 0005: Could not find schema information for the attribute 'Namespace'.
(0,0) : warning 0005: Could not find schema information for the attribute 'Provider'.
(0,0) : warning 0005: Could not find schema information for the attribute 'ProviderManifestToken'.
(0,0) : warning 0005: Could not find schema information for the attribute 'Alias'.
(0,0) : error 0010: The element Schema in namespace http://schemas.microsoft.com/ado/2009/11/edm/ssdl was unexpected for the root element. The expected Schema in one of the following namespaces: http://schemas.microsoft.com/ado/2006/04/edm/ssdl, http://schemas.microsoft.com/ado/2009/02/edm/ssdl. 
```

现在，我已确保我使用的所有库都针对 .NET 4.0。[NuGet 继续安装 EF 5.0，但我在此处](https://stackoverflow.com/questions/12573176/entity-framework-schema-errors-when-deploying-to-a-remote-server)阅读的库版本读取 (4.4)应该可以使用 .NET 4.0。

我不知道我哪里出错了，但它变得非常令人沮丧，任何帮助将不胜感激。我们使用的是 EF 4.4 Code First（DbContext 和

另外，不确定这是否会有所不同，我们正在使用 CustomMembershipProvider，它在本地运行良好，我们目前仅将其用于身份验证。为了摆脱等式，我从 Web.Config 中取出了它的配置，但仍然存在同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:11:21.887

我发现问题出在两件事上：

1.  在其中一个模型（类）中，我的同事使用了一个枚举，它在 .NET 4.0 的 EF 5.0 中不受支持。此功能适用于 .NET 4.5 上的 EF 5，但不适用于 .NET 4.0，它会导致问题。

2.  模型检查器在尝试使用我的 EF 模型检查当前数据库状态时也失败了。虽然没有变化，但刚检查时还是失败了。要修复它，我需要更改此行

`Database.SetInitializer(new DropCreateDatabaseIfModelChanges<ChiptronicsContext>());`

到以下

`Database.SetInitializer<ChiptronicsContext>(null);`

您将在 Global.asax.cs 中找到这一行

实际上，这条线导致 EF 检查数据库并确保它与我的模型同步，所以我只需要将我在本地生成的数据库之一恢复到服务器，然后运行它，一切顺利。希望这可以帮助别人。

# html - 如何在 div 中间对齐旋转的文本

> ID：14020643
> 
> 赞同：6
> 
> 时间：2012-12-24T11:15:54.900
> 
> 标签：html, css, alignment, vertical-alignment, text-alignment

我想在 100% 高度 div 的中间垂直对齐旋转的文本，如下图所示。

因此，每当屏幕大小发生变化时，文本都会停留在 div 的中间。

有人对此有解决方案吗？

![在此处输入图像描述](../Images/80b1a3995bf7408e16919e244f895c0e.png)

[http://jsfiddle.net/SVkPU/1/](http://jsfiddle.net/SVkPU/1/)

```
.rotate-270 {
    -o-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -webkit-transform: rotate(270deg);
    transform:rotate(270deg);
}

.left {
    float:left;
    background:#000;
    color:#fff;
    text-align:center;
    height:50px;

}

.right {
    float:right;
    background:#000;
    color:#fff;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T11:25:18.313

那么 Buddy Add`text-align:center`的`<div>`然后而不是在 90 度旋转文本！旋转`<div>`90 度！

[http://jsfiddle.net/KSAqR/1/](http://jsfiddle.net/KSAqR/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:34:34.720

这对我有用： http: [//davidwalsh.name/css-vertical-text](http://davidwalsh.name/css-vertical-text)

还尝试使用弹性盒。但是由于它们（仍然）没有得到所有浏览器的完全支持，尤其是（移动）safari - 它必须在其上工作，所以我采用了更受支持的方法。

# android - Android：过滤自定义适配器的结果未反映在 UI 中

> ID：14020646
> 
> 赞同：1
> 
> 时间：2012-12-24T11:16:09.563
> 
> 标签：android, android-listview, filtering

在我的应用程序中，我从 Web 服务器获取数据并在列表视图中显示数据。我的列表视图的适配器包含图像和文本。现在，我想过滤列表视图。为此，我在我的自定义适配器中实现了 Filterable 接口。但是，它没有给出任何结果。我搜索了很多，但找不到任何结果。这是我的代码：

**主要活动**

```
Runnable r = new Runnable() 
        {
            @Override
            public void run() 
            { 
                listMainMenu.setAdapter(mMenuAdapter);
                listMainMenu.setTextFilterEnabled(true);
                mMenuAdapter.notifyDataSetChanged();
                pd.dismiss();
                updateUI = false;
            }//run
        }; 
```

**文本观察器类**

```
_txtAutoSearch.addTextChangedListener(filterTextWatcher);

private TextWatcher filterTextWatcher = new TextWatcher() {
    public void afterTextChanged(Editable s) {
        Log.v(TAG+" filtertextwatcher", "afterTextChanged");
    }//afterTextChanged

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        Log.v(TAG+" filtertextwatcher", "beforeTextChanged");
    }//beforeTextChanged

    public void onTextChanged(CharSequence s, int start, int before, int count) {
        Log.v(TAG+" filtertextwatcher", "onTextChanged");
        ((Filterable) listMainMenu.getAdapter()).getFilter().filter(s.toString());
    }//onTextChanged
}; 
```

**我的自定义适配器：**

```
 public class MainMenuAdapter extends BaseAdapter implements Filterable {
    Context ctx;
    ArrayList<MainCategoryDAO> mainCatDAOList;
    public static final String TAG = "MainMenuAdapter";
    ArrayList<MainCategoryDAO> arrayList;

    public MainMenuAdapter(Context ctx, ArrayList<MainCategoryDAO> mainCatDAOList) {
        this.ctx = ctx;
        this.mainCatDAOList = mainCatDAOList;
    }//Constructor

    public int getCount() {
        return mainCatDAOList.size();
    }//getCount

    public Object getItem(int position) {
        return mainCatDAOList.get(position);
    }//getItem

    public long getItemId(int position) {
        return 0;
    }//getItemId

    class ViewHolder {
        ImageView imgCategoryIcon;
        TextView txtCategoryName;
    }//ViewHolder

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if(convertView == null) {
            convertView = LayoutInflater.from(parent.getContext()).inflate(R.layout.main_menu_adapter, null);
            holder = new ViewHolder();
            holder.imgCategoryIcon = (ImageView)convertView.findViewById(R.id.imgCategoryIcon);
            holder.txtCategoryName = (TextView)convertView.findViewById(R.id.txtCategoryName);
            convertView.setTag(holder);
        }//if
        else {
            holder = (ViewHolder) convertView.getTag();
        }//else
        Typeface cat_nameTF = Typeface.createFromAsset(ctx.getAssets(), "fonts/arial.ttf");
        Log.v(TAG, "category name "+ mainCatDAOList.get(position).getCategory_name());
        Log.v(TAG, "category icon "+ mainCatDAOList.get(position).getCategory_icon());
        BitmapManager.INSTANCE.loadBitmap(mainCatDAOList.get(position).getCategory_icon(), holder.imgCategoryIcon, 50, 50);
        holder.txtCategoryName.setTypeface(cat_nameTF);
        holder.txtCategoryName.setText(mainCatDAOList.get(position).getCategory_name());
        Log.v(TAG, "text view category name "+ holder.txtCategoryName.getText());
        return convertView;
    }//getView

    @Override
public Filter getFilter() 
{
    Filter mFilter = new Filter() 
    {

        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence constraint,
                FilterResults results) 
        {
            Log.v(TAG+" getFilter", "publishResults called");
            arrayList = (ArrayList<MainCategoryDAO>) results.values;
            Log.v(TAG+" getFilter", "publishResults arrayList size "+arrayList.size());
            for(int i = 0; i < arrayList.size(); i++)
            {
                Log.v(TAG+" getFilter filtered name", " "+arrayList.get(i).getCategory_name());
            }//for
            notifyDataSetChanged();
        }//publishResults

        @Override
        protected FilterResults performFiltering(CharSequence constraint) 
        {
            Log.v(TAG+" getFilter", "performFiltering called");
            FilterResults results = new FilterResults();
            ArrayList<MainCategoryDAO> FilteredArrList = new ArrayList<MainCategoryDAO>();

            if (constraint == null || constraint.length() == 0) 
            {
                Log.v(TAG+" getFilter", "if, constraint.length null or 0");
                results.count = mainCatDAOList.size();
                results.values = mainCatDAOList;
            }//if 
            else 
            {
                Log.v(TAG+" getFilter", "else, constraint.length not 0");
                constraint = constraint.toString();
                Log.v(TAG+" getFilter", "else, constraint = "+constraint);
                for (int i = 0; i < mainCatDAOList.size(); i++) 
                {
                    Log.v(TAG+" getFilter", "for loop, constraint.length not null or 0");
                    String data = mainCatDAOList.get(i).getCategory_name();
                    Log.v(TAG+" getFilter", "else, data to check "+data);
                    if (data.toLowerCase().startsWith(constraint.toString()))   
                    {
                        Log.v(TAG+" getFilter", "if in for loop, constraint.length not null or 0");
                        FilteredArrList.add(mainCatDAOList.get(i));
                    }//if
                }//for
                results.count = FilteredArrList.size();
                results.values = FilteredArrList;
            }//else
            return results;
        }//performFiltering
    };
    return mFilter;
}//getFilter
}//MainMenuAdapter 
```

经过测试，我发现它正在过滤结果，但是更改没有反映在列表视图中。我什至尝试将 listview.setTextFilterEnabled() 设置为 true，但也没有用。在我的 logcat 上，我可以看到过滤后的值。但不明白为什么同样没有反映在 UI 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T09:31:59.817

您看不到任何 UI 更改是正常的，因为您没有在过滤后更新正确的数据列表。您`MainMenuAdapter`基于`mainCatDAOList`数据列表，但是在`publishResults`应该刷新适配器数据的方法中，您可以：

```
arrayList = (ArrayList<MainCategoryDAO>) results.values;
notifyDataSetChanged(); 
```

如您所见，您正在`arrayList`使用过滤后的值更新 ，而不是`mainCatDAOList`让适配器看不到任何更改。所以你的代码应该是：

```
protected void publishResults(CharSequence constraint,
            FilterResults results) {
        Log.v(TAG+" getFilter", "publishResults called");
        mainCatDAOList = (ArrayList<MainCategoryDAO>) results.values;
        Log.v(TAG+" getFilter", "publishResults arrayList size "+arrayList.size());
        for(int i = 0; i < arrayList.size(); i++)
        {
            Log.v(TAG+" getFilter filtered name", " "+arrayList.get(i).getCategory_name());
        }//for
        notifyDataSetChanged();
    } 
```

此外，您应该有一份用于过滤的初始数据列表的副本，否则您将无法返回完整的值集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:35:36.907

你加吗

Adapter.notifyDataSetChanged();

在你的代码中？你能显示你的主要活动代码吗？我会帮助我们的。

# intrinsics - AVX 中的分散函数

> ID：14020652
> 
> 赞同：14
> 
> 时间：2012-12-24T11:16:35.630
> 
> 标签：intrinsics, avx, avx2

我在 Intel Intrinsic Guide v2.7 中找不到它们。你知道 AVX 或 AVX2 指令集是否支持它们吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-24T11:33:37.127

*   原始 AVX 指令集中没有分散或聚集指令。

*   AVX2 添加了聚集指令，但不添加分散指令。

*   AVX512F 包括分散和聚集指令。

*   AVX512PF 还提供了收集和分散指令的预取变体。

*   AVX512CD 提供了检测分散地址冲突的指令。

*   英特尔 MIC（又名 Xeon Phi，Knights Corner）确实包含收集和分散指令，但它是一个单独的协处理器，它不能运行正常的 x86-64 代码。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-10T19:10:13.713

正如另一个答案所示，即使在 AVX2 上，现在也无法实现分散。然而，英特尔优化手册确实为我们提供了散点操作的手写版本。它位于英特尔优化手册 2013 版的第 11-17 页。基本上，他们所做的是他们每次都读取索引并将其存储到通用寄存器中，例如 rax，然后使用 vpalignr 之类的东西将您想要的正确数字转移到 xmm 寄存器中。然后我们使用 vmovss 将结果存储到内存位置---将标量单个移动到内存。我想这将是低效率的，但我想这是目前在 X86 CPU 架构上实现数据分散的唯一方法。Xeon Phi 的东西很漂亮，它们为分散操作提供原生支持，当然，第一个操作是内存位置。所以我相信如果你的代码涉及大量的聚集和分散，切换到 Xeon Phi 将是一个不错的选择。请回复告诉我我的回复是否有任何问题。

祝你好运！

相皮赛MM

# servlets - Java中HttpServletRequest和HttpServletResponse的对象？

> ID：14020657
> 
> 赞同：5
> 
> 时间：2012-12-24T11:16:57.633
> 
> 标签：servlets

由于***HttpServletRequest 和 HttpServletResponse***是接口，我们知道在 Java 中我们不能**实例化接口**。那么我们如何在**doGet()**或**doPost() 中拥有这 2 个对象？**

//这里的东西....... **doPost(HttpServletRequest request,HttpServletResponse response)** { //这里的东西 }

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T16:36:16.620

这些是由运行您的 servlet 的任何 Servlet 容器提供的。这是 Java 世界如何使用接口来指定其他人通过提供这些接口的具体实现来遵循的契约的一个很好的例子。

[Servlet 规范](http://www.jcp.org/en/jsr/detail?id=315)指定了用于构建 servlet 执行环境的 API，即servlet*容器*。servlet 规范，与任何标准设置文档一样，不提供实际的软件实现，只是行为的定义，即实现软件必须遵循的*合同。*接口用于定义这种行为。

这些接口是在`javax.servlet.*`包空间中提供的，它是 Java EE 的一部分——我认为。无论如何，它是 Java 的一部分。希望提供 Servlet 容器实现的人们必须提供实现这些接口的类；具体实现的内部细节——tomcat、jetty 等——只要符合接口的约定，就可以有很大的不同。

许多接口是由 servlet 容器本身实现的，但有些接口是由应用程序开发人员实现的。例如，如果您正在编写一个 web 应用程序，您可能会提供您自己的应用程序特定的`javax.servlet.Servlet`接口实现。

在运行时，当 servlet 容器接收到映射到您的 Servlet 接口实现的请求时，容器将创建它自己`javax.servlet.http.HttpServletRequest`的它想处理那个请求。通过请求对象可用的数据包括请求 URI、请求参数等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T11:24:53.543

这些接口的实现类将由 Web 服务器（或）应用服务器提供。他们会注意为这些接口创建对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T11:22:58.813

当您使用 Servlet 运行 Java Web 应用程序时，您的代码将部署到 Web 容器（例如 Tomcat）或应用程序服务器（例如 JBoss）上。这些服务器提供它们自己的这些接口的实现（即实现这些接口的具体类）并将它们的实例传递给您的servlet 的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T11:24:02.173

“servlet 容器”* 提供了这些对象的实现。在编写单元测试时，您可以使用 Mockito 等模拟框架来实例化这些接口的模拟实现。

*例如 Google App Engine、Glassfish、Tomcat、JBoss 等。

# java - 如何使用 Escripts 插件运行 Eclipse 项目？

> ID：14020658
> 
> 赞同：4
> 
> 时间：2012-12-24T11:17:05.190
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-jdt, escript

我已经安装了 Eclipse [Escripts](http://marketplace.eclipse.org/content/escripts)插件，但它似乎没有适当的文档，而且我对 Eclipse JDT API 很陌生。

我正在尝试使用 Escripts 编写一个可以运行的脚本，只需单击一下即可运行`Server`几个s。`Client`服务器和客户端是我在 Eclipse 中的运行配置。

这是一个可以打开新项目向导的脚本示例

```
<?xml version="1.0"?>
<escript>
 <action id="org.eclipse.jdt.ui.actions.OpenProjectWizard">
  <dialog title="New Java Project">
   <!-- Enter the project name in the dialog and finish the wizard: -->
   <enter text="Escripts Examples - Java Project"/>
   <click button="Finish"/>
  </dialog>
 </action>
</escript> 
```

所以我的猜测是我需要更改`action`为类似`org.eclipse.jdt.launching`并在内部 XML 标记中指定运行配置。我找到了[JDT](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/ui/actions/package-summary.html)的此页面，但找不到运行项目的适当操作。

任何人都可以帮助我想出可以运行现有的脚本`Run Configuration`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T02:51:08.823

无需搜索 JDT 文档，只需打开 Escripts 视图：

```
Windows
  > Show View
    > Other...
      > Escripts
        > Escripts Elements (drag and drop to a script file) 
```

您将在那里看到所有可用的操作、命令和向导。

创建一个空的 .escript 文件，在 Escripts 视图中选择一个项目，然后将其拖放到 .escript 文件中。

有很多选项，但我发现可以使用以下命令打开“运行配置”对话框：

```
<command id="org.eclipse.debug.ui.commands.OpenRunConfigurations">
</command> 
```

但也可以在不打开对话框的情况下按如下方式启动项目：

```
<command id="org.eclipse.jdt.debug.ui.localJavaShortcut.run">
  <selection>
    <resource name="<project>/src/<package>/Server.java"/>
  </selection>
</command>

<command id="org.eclipse.jdt.debug.ui.localJavaShortcut.run">
  <selection>
    <resource name="<project>/src/<package>/Client.java"/>
  </selection>
</command> 
```

一定要看看`escript.xsd`里面的 XML 模式`net.sf.escripts_<version>.jar`（当前 1.0.1.r85）。

顺便说一句，从[http://escripts.sf.net/updates](http://escripts.sf.net/updates)安装此插件的人必须取消选中 Eclipse 安装向导中的“按类别分组项目”复选框以避免“没有分类项目”（如“详细信息”向导的部分消息说）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T09:22:27.717

胡安是正确的！Escripts 元素视图将为您提供 Escripts 可以驱动的所有可用命令、操作和向导的概览。

有一个 ID 为 org.eclipse.debug.internal.ui.actions.RunDropDownAction 的操作似乎对应于单击下拉菜单中的运行配置。如果以及如何提供要运行的启动配置的名称，您将不得不做更多的研究。

如需一般帮助，您可以在[http://escripts.svn.sourceforge.net/viewvc/escripts/trunk/net.sf.escripts.tests/src/net/sf/escripts/tests/找到一些示例文件](http://escripts.svn.sourceforge.net/viewvc/escripts/trunk/net.sf.escripts.tests/src/net/sf/escripts/tests/)

我不再积极维护 Escripts，但我很高兴进行一些小修复或将您添加为 SourceForge 项目的贡献者。Escripts 在线程和竞争条件方面存在一些相当持久的问题，因此它适用于某些任务，但并不是真正的通用脚本解决方案。我认为 eclipse.org 上还有其他一些脚本编写工作，但我不知道该工作的当前状态是什么。

高温下，

米尔科

# php - CodeIgniter MVC 最佳实践 - 控制器

> ID：14020660
> 
> 赞同：2
> 
> 时间：2012-12-24T11:17:13.733
> 
> 标签：php, codeigniter

我创建了一个`Google`具有方法的控制器类`distance()`。这使用谷歌的距离矩阵来计算两个邮政编码之间的距离并返回值。

现在我有另一个名为“Person”的控制器类。我想`${Google}->distance()`从我的`Person`班级中调用该方法，以查看此人与某个邮政编码的距离。

我将如何实现这一目标，我是否以正确的方式进行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T11:24:03.603

如果需要调用另一个控制器的方法，则需要使用[模块化扩展](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc)，因为 CI 本身不支持 HMVC。

但是在您的情况下，将此类逻辑放在控制器中是一种糟糕的设计实践，您需要使用 CI[库](http://ellislab.com/codeigniter/user-guide/general/libraries.html)（推荐使用，因为`Google`它是一个实用程序类）或[模型](http://ellislab.com/codeigniter/user-guide/general/models.html)（如果该类抽象数据库交互）。

只需将您的类放入`application/libraries/Google.php`控制器中`Person`即可：

```
// 1\. Load library via CI's loader:
// You may want to autoload the library
// @see application/config/autoload.php
$this->load->library('google'); 

// 2\. Use library:
// NOTE: If it's a static class you need to call it as:
// Google::distance($postcode1, $postcode2);
$distance = $this->google->distance($postcode1, $postcode2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:22:48.313

您问的不是 MVC，而是更多关于 PHP 中的对象和实例如何工作的问题。

最直接的用法是：

```
$google = new Google();
$distance = $google->distance(); 
```

那不是高级设计，而是您让它发挥作用的第一步。稍后您可以决定在其他地方创建实例是否更好`Google`，例如 Codeigniter 提供库加载机制，因此您可以隐藏一些细节并使其更容易访问功能。

# opencv - 如何在前一帧中已经存在轮廓的下一帧上绘制轮廓（矩形）

> ID：14020661
> 
> 赞同：0
> 
> 时间：2012-12-24T11:17:14.493
> 
> 标签：opencv

我正在使用 opencv 库进行图像处理项目。我想跟踪球的运动，以便下一帧高亮显示所有先前帧中球的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:45:35.547

您可能希望将历史记录保存在容器中，`std::deque`这是一种可能的解决方案：

```
std::deque<Rect> history;
const int HISTORY_SIZE = 10; 
```

要绘制历史，只需在运行循环中迭代它：

```
Rect curr = yourTrackingAlgorithm();
history.push_front(curr);

for (int i = 0; i < history.size(); i++)
{
    drawRectangle(history[i]);
}
if (history.size() > HISTORY_SIZE)
{
    history.pop_back();
} 
```

# objective-c - 在objective-c iPhone中从当前日期开始的一天

> ID：14020662
> 
> 赞同：1
> 
> 时间：2012-12-24T11:17:31.093
> 
> 标签：objective-c, ios

> **可能重复：**
> [如何在 Objective-C 中获取星期几？](https://stackoverflow.com/questions/4269093/how-do-i-get-the-day-of-the-week-in-objective-c)

我在网站上搜索了许多解决方案，但我无法找到它。对于一个特定的问题，我需要知道星期几。换句话说，我需要知道如何知道是星期天、星期一、星期二还是等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:20:27.720

```
NSCalendar* cal = [NSCalendar currentCalendar];
NSDateComponents* comp = [cal components:NSWeekdayCalendarUnit fromDate:[NSDate date]];
NSLog(@"weekday - %d", [comp weekday]); // 1 = Sunday, 2 = Monday, etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:22:49.797

```
 Try this:

  NSDate *now = [NSDate date];
  NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
  [dateFormatter setDateFormat:@"EEEE"];
  NSLog(@"%@",[dateFormatter stringFromDate:now]); 
```

也看到这个链接 [来自 NSDate 的日期名称？](https://stackoverflow.com/questions/4745110/day-name-from-nsdate?rq=1)

# c# - c#运行命令不执行命令

> ID：14020664
> 
> 赞同：0
> 
> 时间：2012-12-24T11:18:21.700
> 
> 标签：c#, command-line, process

我想运行这个：

```
string command = "echo test > test.txt";
System.Diagnostics.Process.Start("cmd.exe", command); 
```

它不起作用，我做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-24T11:24:28.643

您缺少传递`/C`开关以`cmd.exe`指示您要执行命令。另请注意，该命令放在双引号中：

```
string command = "/C \"echo test > test.txt\"";
System.Diagnostics.Process.Start("cmd.exe", command).WaitForExit(); 
```

如果您不想看到 shell 窗口，可以使用以下命令：

```
string command = "/C \"echo test > test.txt\"";
var psi = new ProcessStartInfo("cmd.exe")
{
    Arguments = command,
    UseShellExecute = false,
    CreateNoWindow = true
};

using (var process = Process.Start(psi))
{
    process.WaitForExit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:25:35.680

这应该可以帮助您入门：

```
//create your command
string cmd = string.Format(@"/c echo Hello World > mydata.txt");
//prepare how you want to execute cmd.exe
ProcessStartInfo psi = new ProcessStartInfo("cmd.exe");
psi.Arguments = cmd;//<<pass in your command
//this will make echo's and any outputs accessiblen on the output stream
psi.RedirectStandardOutput = true;
psi.UseShellExecute = false;
psi.CreateNoWindow = true;
Process p = Process.Start(psi);
//read the output our command generated
string result = p.StandardOutput.ReadToEnd(); 
```

# java - 在 JAVA、JButton、Button 仅在光标位于按钮上时显示，甚至在单击 contentPane 中的任何位置时也有效

> ID：14020667
> 
> 赞同：2
> 
> 时间：2012-12-24T11:18:55.347
> 
> 标签：java, swing, click, jframe, jbutton

一般来说，我是 Java 和 OOPS 的初学者。我正在学习 Head First Java 以开始，并研究其中的 GUI 和 Swing 概念。以下代码仅用于理解目的。

运行代码时，框架窗口显示为按钮，当我展开它时，我也可以看到单选按钮。

问题-

1.  *按钮工作直到窗口大小不超过按钮大小。一旦我增加窗口大小甚至比按钮的尺寸略大，那么只有当光标位于按钮上时才会显示按钮。*

我正在使用鼠标更改窗口大小。

1.  *即使我将帧大小设置为大于按钮。说 frame.setSize(800,800); 然后按钮覆盖整个 contentPane。并且在调整大小时仍然表现相同。*

2.  *无论我在 contentPane 中单击的位置如何，按钮都会响应单击鼠标。只有当我直接点击按钮时它才会响应。*

请告诉我为什么它会这样。

如果可能，更正代码或添加以更正此问题。

```
import java.awt.Color;
import javax.swing.*;
import java.awt.event.*;
public class Test1 implements ActionListener {

JFrame frame = new JFrame("Frame");
JButton button = new JButton("Button!");
JRadioButton radio = new JRadioButton("VideoKilledTheRadioStar!",true);
int j=0;

public static void main(String[] args) {
    Test1 t = new Test1();
    t.method1();

}
public void method1()
{

      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
button.setSize(100,100);
button.setBackground(Color.ORANGE);
frame.add(button);
frame.setSize(100,100);
frame.setVisible(true);
button.addActionListener(this);
frame.getContentPane().add(radio);
radio.addActionListener(this);

}
public void actionPerformed(ActionEvent e)
{j++;
button.setText("clicked .. " + j);

    if(button.getBackground()==Color.ORANGE)
    button.setBackground(Color.BLUE);
    else
        button.setBackground(Color.ORANGE);
}

} 
```

PS我不知道哪段代码对这个问题更重要或更相关，所以我放了完整的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T11:33:12.520

`JButton`您正在尝试`JRadioButton`在`BorderLayout`.`JFrame`

每当您将组件添加到 JFrame 时`BorderLayout`，组件位于中间部分，而`BorderLayout`中心部分倾向于占据整个空间，因此要正确定位元素，您需要指定位置并设置组件的 PreferredSize。

```
frame.add(radio, BorderLayout.SOUTH);
component.setPreferredSize(Dimension); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T11:24:51.253

您在该位置添加`JButton` `button`和`JRadioButton`两者，`BorderLayout.CENTER`因此只显示一个。此位置的组件将在 X 和 Y 轴上调整大小。

由于`JButton`它有自己的`MouseListener`用于绘画的事实，所以当光标在它上面时唯一显示。

此外，声明

```
frame.add(myComponent); 
```

和

```
frame.getContentPane().add(myComponent); 
```

两者都将组件添加到框架的`ContentPane`& 是等效的，但为方便起见选择了第一个。

请注意，组件不能共存于`BorderLayout`. 您可以将 放置`button`在该`BorderLayout.SOUTH`位置（并直接添加到框架中）：

```
frame.add(radio, BorderLayout.SOUTH); 
```

`BorderLayout`忽略组件的任何首选大小，因此您必须使用不同的布局管理器，例如`BoxLayout`保持固定大小`JButton`。

查看更多关于[布局管理器的信息](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

# c# - 引发了“System.OutOfMemoryException”类型的异常。C# 使用 IDataReader 时

> ID：14020671
> 
> 赞同：11
> 
> 时间：2012-12-24T11:19:22.523
> 
> 标签：c#, sql, exception, datareader, using-statement

我有一个应用程序，我必须从数据库中获取大量数据。由于它未能获得所有这些行（接近 2,000,000 行......），我将其中断，并且每次运行 sql 查询并且每次仅获得 200,000 行。

我使用向其中输入所有数据的 DataTable（意思是 - 所有 2,000,000 行都应该在那里）。

前几轮还不错。然后它因 OutOfMemoryException 而失败。

我的代码工作如下：

```
private static void RunQueryAndAddToDT(string sql, string lastRowID, SqlConnection conn, DataTable dt, int prevRowCount)
    {
        if (string.IsNullOrEmpty(sql))
        {
            sql = generateSqlQuery(lastRowID);
        }

        if (conn.State == ConnectionState.Closed)
        {
            conn.Open();
        }

        using (IDbCommand cmd2 = conn.CreateCommand())
        {
            cmd2.CommandType = CommandType.Text;
            cmd2.CommandText = sql;
            cmd2.CommandTimeout = 0;

            using (IDataReader reader = cmd2.ExecuteReader())
            {
                while (reader.Read())
                {
                    DataRow row = dt.NewRow();
                    row["RowID"] = reader["RowID"].ToString();
                    row["MyCol"] = reader["MyCol"].ToString();
                    ... //In one of these rows it returns the exception.

                    dt.Rows.Add(row);
                }
            }
        }

        if (conn != null)
        {
            conn.Close();
        }

        if (dt.Rows.Count > prevRowCount)
        {
            lastRowID = dt.Rows[dt.Rows.Count - 1]["RowID"].ToString();
            sql = string.Empty;
            RunQueryAndAddToDT(sql, lastRowID, conn, dt, dt.Rows.Count);
        }
    } 
```

在我看来，读者似乎一直在收集行，这就是它只在第三轮或第二轮抛出异常的原因。

不应该使用清理内存吗？什么可以解决我的问题？

*注意：我应该解释一下 - 我别无选择，只能将所有这些行放到数据表中，因为我稍后会对它们进行一些操作，并且行的顺序很重要，我不能拆分它，因为有时我有取一些行的数据并设置为一行等等，所以我不能放弃它。*

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-26T14:06:13.310

检查您构建的是 64 位进程，而不是 32 位进程，这是 Visual Studio 的默认编译模式。为此，请右键单击您的项目，属性 -> 构建 -> 平台目标：x64。与任何 32 位进程一样，以 32 位编译的 Visual Studio 应用程序具有 2GB 的虚拟内存限制。

64 位进程没有此限制，因为它们使用 64 位指针，因此它们的理论最大地址空间为 16 艾字节 (2^64)。实际上，Windows x64 将进程的虚拟内存限制为 8TB。内存限制问题的解决方案是编译为 64 位。

但是，默认情况下，Visual Studio 中对象的大小仍限制为 2GB。您将能够创建多个组合大小大于 2GB 的数组，但默认情况下您不能创建大于 2GB 的数组。希望，如果您仍想创建大于 2GB 的数组，您可以通过将以下代码添加到 app.config 文件来实现：

```
<configuration>
  <runtime>
    <gcAllowVeryLargeObjects enabled="true" />
  </runtime>
</configuration> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T11:23:42.370

我认为只是您的内存不足，因为您的 DataTable 从您不断添加的所有行中变得如此之大。

在这种情况下，您可能想尝试不同的模式。

除了在列表（或数据表）中缓冲您的行，您是否可以简单地产生行，因为它们在到达时可供使用？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-23T20:32:24.000

由于您使用的是`DataTable`，让我分享一个我在使用时遇到的随机问题。检查您的构建属性。我遇到了 DataTable 随机抛出内存不足异常的问题。事实证明，该项目的构建平台目标设置为`Prefer 32-bit`. 一旦我取消选择该选项，随机内存不足异常就消失了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-24T11:26:56.317

您将数据的副本存储到`dt`. 您只是存储了太多以至于机器内存不足。所以你有几个选择：

*   增加可用内存。
*   减少您正在检索的数据量。

要增加可用内存，您可以向机器添加物理内存。请注意，32 位机器上的 .NET 进程将无法访问超过 2GB 的内存（如果启用 3GB 切换，则为 3GB `boot.ini`），因此如果您希望解决问题，可能需要切换到 64 位（机器和进程）比这更多的内存。

检索更少的数据可能是要走的路。根据您要实现的目标，您可能能够对数据的子集（甚至可能在单个行上）执行任务。如果您正在执行某种聚合（例如，从数据中生成摘要或报告），您可以使用[Map-Reduce](https://en.wikipedia.org/wiki/Mapreduce)。

# bash - 如何在 bash 脚本中使用wireshark

> ID：14020676
> 
> 赞同：1
> 
> 时间：2012-12-24T11:20:02.190
> 
> 标签：bash

我正在编写一个 linux bash 脚本，我想在 eth0 上捕获一段时间并将其保存到某个文件中。我还希望在捕获结束后，wireshark 应该关闭，脚本中的其余命令应该按顺序执行。我怎样才能实现它。下面给出了我正在尝试的一个非常简单的示例。但它不是从wireshark 到主脚本的。请帮助我实现这一目标。

```
#!/bin/bash

xterm -e wireshark -i eth0 -a duration:20 -k > ./capture1

sleep 10

echo " came back to main window "

xterm killall -9 wireshark 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:25:50.547

试试**tshark**

```
echo "starting capture for 20 seconds"

tshark -i eth0 -a duration:20 -w capture1.pcap

echo "done" 
```

tshark 是 wireshark 的文本版本。你不必担心它试图用 GUI 做任何事情

# ruby-on-rails-3 - 在 webapp 中实现管理员的推荐方法是什么

> ID：14020689
> 
> 赞同：3
> 
> 时间：2012-12-24T11:20:59.897
> 
> 标签：ruby-on-rails-3, web-applications, admin

我知道实现管理员的两种方法：

1.  将管理员角色标志添加到用户实体
2.  添加新的管理实体

不知道有没有其他方法

**1\. 就管理员可用性而言，这是否重要？安全？**

**2\. 哪个更容易扩展或维护？**

对于特定于 rails 的（但不限于）子问题

**从长远来看，使用诸如 active_admin 或 adminium 之类的预制管理服务是否值得（重度使用应用程序，而不是小型应用程序），还是制作自己的管理面板并根据需要逐步添加功能会更好？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:27:56.787

该问题的答案取决于您对特定项目的需求。

使用**预制的管理服务**让生活变得更轻松，因为您可以通过它们提供的便利性来自定义服务，然后在您的应用程序中使用它们。

在[ActiveAdmin railscasts](http://railscasts.com/episodes/284-active-admin?view=comments)中，有一段视频`ActiveAdmin`展示了它是如何非常可定制的。除此之外，还有很多人`railscasts`根据他们的使用经验发表评论。

这将清楚地为您提供正确方向的想法。

batsov也有一篇非常好的[文章](http://batsov.com/articles/2011/11/20/admin-interfaces-for-rails-apps-railsadmin-vs-activeadmin/)，它解释了 RailsAdmin 和 ActiveAdmin 之间的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T00:30:18.197

**短版：**使用管理员角色标志自己做。为了安全起见，不允许批量分配此标志。构建您自己的管理界面，特别是对于一个大型项目，任何预制都无法满足您的需求。

**长版：** 我实际上并没有使用任何预制的管理服务，因为总的来说，我的经验告诉我，我的用户要么是普通/管理员，要么是半管理员。

拥有自己的标志意味着您可以完全控制如何添加管理员用户。

示例：我允许任何具有管理员访问权限的人将其他任何人设为管理员的一些应用程序。

Rails 允许您快速搭建/构建您自己的自定义管理界面，在这里我看不到任何“现成”的东西比您随心所欲地添加/需要的心态，因为最终结果将是定制的，以完全满足您的需求与支出您需要自己定制的管理界面。

# apache - 如何将 Apache ACE 设置和数据从一个实例复制到另一个实例

> ID：14020690
> 
> 赞同：0
> 
> 时间：2012-12-24T11:21:04.673
> 
> 标签：apache, repository, osgi

我想将 Apache ACE 存储库和设置数据（例如注册代理、部署详细信息）移动到另一个 Apache ACE 实例。

我尝试从源实例的所有捆绑文件夹中复制数据文件夹以粘贴到目标实例中，这种方法也很有效。但是，我发现这种方法有点容易出错。

我想知道是否有一些优雅的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T21:07:53.157

不幸的是，没有开箱即用的直接支持。复制数据文件夹是目前唯一的方法（正如您已经发现的那样）。尽管您可以使用 ACE 的（内部）API 来访问此信息并自己编写导出器...

# c++ - “没有这样的文件”包括 Boost dynamic_bitset 的问题

> ID：14020694
> 
> 赞同：2
> 
> 时间：2012-12-24T11:21:30.880
> 
> 标签：c++, boost, g++, boost-dynamic-bitset

我正在尝试将 Boost 的 Dynamic_bitset 类用于一个项目，并且我（相信我）已经从完整的库中获取了我需要的任何文件子集。现在我正在做一个

`#include "boost/dynamic_bitset.hpp"`在我的 manager.cpp 文件中，编译时我得到这个：

```
In file included from manager.cpp:4:0:
boost/dynamic_bitset.hpp:15:51: fatal error: boost/dynamic_bitset/dynamic_bitset.hpp: No such file or directory 
```

项目文件夹中的文件层次结构如下：

```
proj/extras.h
proj/Makefile~
proj/manager.cpp
proj/boost
proj/boost/limits.hpp
proj/boost/dynamic_bitset.hpp
proj/boost/mpl
proj/boost/mpl/if.hpp
proj/boost/mpl/has_xxx.hpp
proj/boost/iterator.hpp
proj/boost/static_assert.hpp
proj/boost/dynamic_bitset
proj/boost/dynamic_bitset/dynamic_bitset.hpp
proj/boost/dynamic_bitset/config.hpp
proj/boost/config
proj/boost/config/select_platform_config.hpp
proj/boost/config/select_compiler_config.hpp
proj/boost/config/user.hpp
proj/boost/config/suffix.hpp
proj/boost/config/select_stdlib_config.hpp
proj/boost/dynamic_bitset_fwd.hpp
proj/boost/config.hpp
proj/boost/type_traits
proj/boost/type_traits/is_same.hpp
proj/boost/type_traits/is_pointer.hpp
proj/boost/type_traits/remove_pointer.hpp
proj/boost/type_traits/remove_const.hpp
proj/boost/type_traits/is_base_and_derived.hpp
proj/boost/type_traits/detail
proj/boost/type_traits/detail/bool_trait_def.hpp
proj/boost/type_traits/detail/yes_no_type.hpp
proj/boost/pending
proj/boost/pending/integer_log2.hpp
proj/boost/detail
proj/boost/detail/limits.hpp
proj/boost/detail/dynamic_bitset.hpp
proj/boost/detail/workaround.hpp
proj/boost/lowest_bit.hpp
proj/Makefile
proj/generator.cpp~
proj/generator.cpp 
```

同样的项目在我大学的 linux 系统上编译得很好（那里有 g++ 4.2.4，但我怀疑这很重要），但在我的 Ubuntu 笔记本电脑上却没有这样做（出现上述错误）。为什么它没有找到该文件，因为它显然存在？

我所有的内容都是这样的：

```
#include <cstdlib>
#include <cstdio>
#include <iostream>
#include "boost/dynamic_bitset.hpp"
#include <cmath>
#include <list>
#include <unistd.h>
#include <sys/sem.h>
#include <sys/shm.h>
#include <errno.h>
#include <wait.h>
#include <time.h>
#include "extras.h" 
```

编译只需使用

`g++ -o manager manager.c` 或者 `g++ -Iboost -o manager manager.c`

如果我想明确包含（本地..）文件夹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T20:14:41.177

```
-I . 
```

至少如果您在包含 boost 的同一目录中编译。

你写了 -Iboost 和 #include "boost/..."。因此，如果有 boost 子目录，它会在 ./boost 中查找。

# javascript - Nodejs：如何处理对象之间的事件监听？

> ID：14020697
> 
> 赞同：8
> 
> 时间：2012-12-24T11:22:12.707
> 
> 标签：javascript, node.js, dom-events, publish-subscribe, commonjs

我目前遇到的问题是我有一个对象应该监听另一个对象。

问题是：我应该如何处理订阅？目前，我只知道两种可能的方法：

与注册人：

```
var Registrator = function() {
    this.listener = new Listener();
};

Registrator.prototype.register = function(subsriber) {
    var self = this;
    subscriber.on('event', function(info) {
        self.listener.doSomething(info);
    });

}; 
```

在构造函数中：

```
var Subscriber = function() {
    var listener = require('./instanced-listener');
    this.on('event', function(info) {
        listener.doSomething(info);
    });

}; 
```

如您所见，这两种方法都不是那么整洁。我可以使用另一种模式来解决这个问题吗？

**PS：**

如果这个例子看起来太抽象，这里是源代码：

[https://github.com/bodokaiser/documents/blob/master/lib/repository.js](https://github.com/bodokaiser/documents/blob/master/lib/repository.js)

检查构造函数以查看我的不满:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T11:44:38.863

这实际上取决于对象将如何广播和收听以及您要求它们如何耦合或解耦。一般来说，这种类型的事件架构的最佳用途是一个对象可以不加选择地向其他对象宣布事件，并且这些对象可以自行选择监听（注册）或停止监听（取消注册）。

### 1.监听器依赖于广播者

在某些情况下，让侦听器成为广播者的依赖项可能是有意义的，在这种情况下，它将与事件名称和广播者宣布的事件的参数强耦合。

```
var Listener = function(broadcaster) {
  var self = this;
  broadcaster.on("event", function(info) {
    self.doSomething(info);  
  });
}; 
```

也可以创建其他侦听器类并将它们自己注册到同一个广播公司。广播者不了解听众，只有听众知道这种关系。

### 2.广播者依赖于听众

广播者只为听众宣布事件。在这种情况下，事件架构可能有点过头了，您可以用直接调用来替换事件。您的第二个示例暗示了这一点，因为与广播者的构造函数中的侦听器存在一对一的关系。

```
var Broadcaster = function(listener) {
  this.doSomething = function() {
    // do something...
    listener.doSomething(info);
  };
}; 
```

这在广播者和收听者的接口之间创建了强耦合。这种模式并不像它最初出现的那样具有限制性。扩展此模式的有用性的一种常见方法是用广播适配器替换基本侦听器。广播适配器看起来与基本侦听器相同，因为它带有相同的`doSomething`接口，但实现了一个事件架构以将此调用传递给其他对象。这使广播器非常简单，并且以额外的类为代价将与事件有关的任何事情外部化。

### 3.两者都是独立的

您的第一个示例是释放此耦合的一个很好的示例，成本是一个额外的类。中间类充当两个类之间的桥梁或适配器，因此它们都不依赖于彼此的信息。事件签名对侦听器隐藏，侦听器的方法签名对广播器隐藏。通常这种级别的解耦是不必要的，但它是一个重要的工具，可以让您了解将两个类彼此隔离在哪里很重要。

```
var Bridge = function(listener, broadcaster) {
  broadcaster.on("event", function(info) {
    // if necessary translate the arguments as well
    listener.doSomething(info);
  });
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T11:34:15.193

## 编辑

根据您的评论，我不确定您对此有何不可读之处，但您可以尝试使用[`Stream`](http://nodejs.org/api/stream.html)对象和优雅的[`Stream#pipe`](http://nodejs.org/api/stream.html#stream_stream_pipe_destination_options)方法。

### 溪流

```
var Stream = require('stream').Stream;
var util = require('util');

var Sender = function() {
  this.readable = true;
  this.saySomething = function(message) {
    this.emit('data', message);
  };
};
util.inherits(Sender, Stream);

var Receiver = function() {
  this.writable = true;
  this.write = function(message) {
    console.log('received: ' + message);
  }
};
util.inherits(Receiver, Stream); 
```

### 用法

```
// instance of each
var s = new Sender();
var r = new Receiver();

// connect using pipe!
s.pipe(r);

// an event
s.saySomething('hello world'); //=> received: hello world 
```

我特别喜欢使用`Stream`对象。该`pipe`方法非常方便:) 每个流都有一个输入和输出。我喜欢它们，因为它鼓励您构建负责特定任务的小型功能组件。然后，您可以按照您认为合适的方式链接/重用它们。

* * *

### 原帖

你会想要使用[`EventEmitter`](http://nodejs.org/api/events.html)

这是一个简单的例子

```
var events = require('events');
var util = require('util');

var SampleEmitter = function() {
    events.EventEmitter.call(this);

    this.sayHello = function() {
      this.emit('hello', 'hello world');
    };
};
util.inherits(SampleEmitter, events.EventEmitter);

var SampleListener = function(emitter) {
    emitter.on('hello', function(data) {
        console.log(data);
    });
};

var se = new SampleEmitter();
var sl = new SampleListener(se);

se.sayHello(); //=> 'hello world' 
```

# database - SQL授权在多个对象上执行

> ID：14020704
> 
> 赞同：7
> 
> 时间：2012-12-24T11:22:48.307
> 
> 标签：database, sql-server-2008, grant

大家好，我想为用户添加多个对象的执行权限。但我似乎无法在我的代码中添加通配符。

```
GRANT EXECUTE ON OBJECT::dbo.CREATESERVERSESSIONS TO [domain\user]; 
```

这可行，但我有很多以 XU_ 开头的存储过程现在我想在所有以 XU_ 开头的存储过程上授予执行权限

```
GRANT EXECUTE ON OBJECT::dbo.XU_* TO [domain\user]; 
```

但这不起作用。我希望有人知道这个问题的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-24T11:27:33.357

您不能使用通配符 - 您必须授予**所有**对象（或模式中的所有对象） - 或者您必须一一列出所有对象。

您可能会做的是这样的事情 - 让 SQL Server 为您生成这些语句：

```
SELECT
   p.Name,
   GrantCmd = 'GRANT EXECUTE ON OBJECT::' + p.name + ' TO [domain\user]'
FROM sys.procedures p
WHERE p.Name LIKE 'XU%' 
```

此查询将列出所有以该过程开头的过程`XU`并创建一个包含该`GRANT EXECUTE ON ....`过程的语句的列。

在 SQL Server Management Studio 中运行它，然后只需复制结果`GrantCmd`列，将其粘贴到新窗口，然后在那里执行。

如果你**真的**想自动化这个，你也可以把这个查询变成一个游标，然后使用动态 SQL 来自动执行那些结果`GrantCmd`语句......

# jquery - rails 3.2.9 jquery_ujs 不能与 link_to 一起使用

> ID：14020709
> 
> 赞同：0
> 
> 时间：2012-12-24T11:23:11.287
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3.2

我至少有以下不起作用的链接

```
= link_to 'Delete', admin_picture_comment_path(comment.picture_id,comment.id), :class => 'delete', :remote => true ,:method => :delete

= link_to 'Disable', set_shown_admin_picture_path(picture), :class => 'delete', :method => :put, :remote => true

= link_to 'show', set_show_admin_picture_path(picture), :class => 'delete', :method => :put, :remote => true

= link_to 'delete', admin_picture_path(picture), :confirm => 'Are you sure?', :class => 'delete', :method => :delete, :remote => true 
```

正在创建的 HTML 看起来是正确的

```
<a href="/admin/pictures/27/comments/25" class="delete" data-method="delete" data-remote="true" rel="nofollow">Delete</a>

<a href="/admin/pictures/27/set_shown" class="delete" data-method="put" data-remote="true" rel="nofollow">Disable</a> 
```

在所有情况下，我都会得到类似的东西

没有路线匹配**[GET]** "/admin/pictures/27/comments/23"

我认为这是因为 jquery_ujs 没有正确加载，但是我不知道为什么它没有加载，因为它显示在 html 标题中

```
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.fileupload.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.fileupload-ui.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.lightbox.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

### 路由.rb

```
namespace :admin do
  #...
  resources :pictures do # admin/pictures
    member do
      put 'set_show'     
      put 'set_shown'
    end
    resources :comments, :only => [:destroy]
  end
end 
```

### 应用程序.html.haml

```
%html
  %head
    %title title
    = stylesheet_link_tag :application
    = javascript_include_tag :application
    = csrf_meta_tag 
```

### 应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require jquery.fileupload
//= require jquery.fileupload-ui
//= require jquery.lightbox

$(function(){

  $('.admin_picture a.delete').live('ajax:success',function(){
    $(this).closest('.admin_picture').fadeOut();
  });

  $('tr .ajax_delete').live('ajax:success', function() {
    $(this).closest('tr').fadeOut();
  });

  $('.comment a.delete').live('ajax:success',function(){
    $(this).closest('.comment').slideUp();
  });

  //...

}); 
```

### 宝石文件

```
gem 'rails', '3.2.9'
gem 'thin'
gem 'jquery-rails'
gem 'haml-rails'   
#... 
```

我在从使用不显眼的 jquery 的 rails 3.0 应用程序升级时遇到了这个错误，我可能会丢失什么会导致这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T00:08:14.233

具体来说，我的 jquery_ujs 文件很旧，并且仍然“存在”在我的 assets/javascript 目录中。它仍然有已弃用的 .live 方法。删除文件！！
保留 gem 'jquery-rails', '~> 2.1' # REF: [https://github.com/rails/jquery-ujs](https://github.com/rails/jquery-ujs) 保留 //= require jquery 和 //= require jquery_ujs 和 //= require_tree 。在你的 application.js 文件中确保你更新了 gem 和 bundle install 以获得最新的 gem。如果像我的“偷偷摸摸”的情况一样抛出 javascript 错误，link_to js 的其余部分将不起作用。

# c# - 如何从网站获取 iPad 唯一标识符

> ID：14020710
> 
> 赞同：-1
> 
> 时间：2012-12-24T11:23:22.840
> 
> 标签：c#, asp.net, ios, ipad

使用 .Net 从网站获取 iPad 唯一标识符的任何方法？（uniqueIdentifier 属性在 iOS 5.0 中已弃用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:25:36.910

唯一标识符从未作为 http 请求标头的一部分发送，因此永远无法获取此信息。如果您想要设备的唯一 ID，我建议您使用 cookie 来完成。

# command-line - 在命令行上构建 Windows 8 Phone 应用程序

> ID：14020712
> 
> 赞同：4
> 
> 时间：2012-12-24T11:23:44.983
> 
> 标签：command-line, msbuild, batch-file, windows-phone-8

我目前正在将现有的跨平台框架移植到 Windows Phone 8。

构建过程是完全自动化的，我们使用的是坚如磐石的 CI 系统。

我可以从 Visual Studio (Express 2012) 构建和部署 Windows Phone 8 示例，但现在我需要将它集成到我们的构建脚本中。

有没有人通过命令行成功构建（和部署）Win Phone 8 应用程序？（或蚂蚁，make，scons 等等……）

如果是，如何？

欢迎任何提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T11:59:16.450

我使用以下 bat 文件来构建 WP7 代码（在其之上+ant 自动化）。它可能对你有帮助。

**构建.bat**

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe build.xml /t:BuildAndCopy /p:Revision=123 
```

**build.xml**类似于（构建本身位于 BuildAll 目标下）

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <Import Project="C:\Program Files (x86)\MSBuild\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets"/>
    <PropertyGroup>
        <Major>1</Major>
        <Minor>0</Minor>
        <Build>0</Build>
        <Revision>x</Revision>
        <OutputPath>Build\</OutputPath>
        <OutputPathDebug>..\Build\Debug\</OutputPathDebug>
        <OutputPathRelease>..\Build\</OutputPathRelease>
    </PropertyGroup>
    <Target Name="BuildAll" DependsOnTargets="Clean; Version">
        <msbuild  Projects="SomeApp.sln" Properties="Configuration=Release;OutputPath=$(OutputPathRelease)"/>
        <msbuild  Projects="SomeApp.sln" Properties="Configuration=Debug;OutputPath=$(OutputPathDebug)"/>
    </Target>
    <Target Name="Clean">
        <RemoveDir Directories="$(OutputPath)" Condition="Exists('$(OutputPath)')"/>
        <MakeDir Directories="$(OutputPath)" Condition="!Exists('$(OutputPath)')"/>
    </Target>
    <Target Name="Version">
        <Message Text="Version: $(Major).$(Minor).$(Build).$(Revision)"/>
        <XmlUpdate
                Namespace=""
                XmlFileName="WindowsPhone\Properties\WMAppManifest.xml"
                XPath="//App[@Version]//@Version"
                Value="$(Major).$(Minor).$(Build).$(Revision)"/>
    </Target>

    <ItemGroup>
        <AppFiles Include="$(OutputPath)\**\*.xap"/>
    </ItemGroup>

    <Target Name="BuildAndCopy" DependsOnTargets="BuildAll">
        <Copy
                SourceFiles="@(AppFiles)"
                DestinationFiles="@(AppFiles->'\\fs\Public\projects\mobile\SomeAppWP\$(Major).$(Minor).$(Build).$(Revision)\%(RecursiveDir)%(Filename)%(Extension)')"
                />
        <Copy
                SourceFiles="@(AppFiles)"
                DestinationFiles="@(AppFiles->'\\fs\Public\projects\mobile\SomeAppWP\latest\%(RecursiveDir)%(Filename)%(Extension)')"
                />
    </Target>

</Project> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-11T02:52:13.907

这应该很容易。我假设你有以下文件结构

$/WP8App/SampleApp.sln

您必须在项目中使用路径和解决方案文件。执行以下指令，并确保更新解决方案文件和路径：

*   打开命令提示符
*   执行：`%VS110COMNTOOLS%vsvars32.bat`
*   执行：`%VS110COMNTOOLS%..\..\VC\WPSDK\WP80\vcvarsphoneall.bat`
*   执行：`MSBuild "WP8App/SampleApp.sln" /t:rebuild /p:Configuration=Release /p:Platform="Any CPU" /v:d`

请注意：

*   您要运行这些命令的计算机应该已经设置了 WP8 的开发环境。
*   如果你的应用程序使用了原生库（比如 VS 中安装的 PlayerFramework [http://playerframework.codeplex.com/](http://playerframework.codeplex.com/)，这些库也应该在运行命令之前安装）
*   我在 VS2012 Pro 和 VS2012 Premium 和 Jenkins 上使用了这个过程作为构建服务器。

祝你好运，草

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T10:09:37.803

感谢 Sergei 的 MSBuild.exe 提示，我能够通过命令行构建一个简单的示例。

[https://github.com/AndreasOM/wp8-directx-commandline](https://github.com/AndreasOM/wp8-directx-commandline)

包含一个 build.bat，它应该足以让您开始使用您选择的构建系统为“windows phone 8”构建。

目前它相当 hacky，但是一旦我完成了当前的项目，我会清理它。

**提示：** 使用“CL.exe”时，切勿定义“CL”环境变量；）

# html - AJAX返回的html字符串高度为0

> ID：14020713
> 
> 赞同：1
> 
> 时间：2012-12-24T11:23:48.050
> 
> 标签：html, ajax, jquery, web-applications

我正在使用 jquery 解析由 ajax 调用返回的 html 字符串，因此我可以按照我想要的方式定位它们，但是`outerHeight()`对字符串的函数调用似乎返回值 0。任何人之前都经历过这个或者知道为什么会这样所以？代码片段如下所示。

```
(window).scroll(function(){
  if($(window).scrollTop() == $(document).height() - $(window).height()){
    $.ajax({
      url: "/more",
      async:false,
      success: function(data){
        html = $(data);
        html.each(function(i){ 
          //position($(this));
          console.log($(this).html());
          console.log($(this).outerHeight());
        });
    $('#container').append(html);
      }
    });
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:27:58.737

HTML 元素在渲染之前没有高度，因为高度将取决于应用于渲染它们的上下文的 CSS。

如果您将 HTML 添加到页面然后访问高度，您应该得到正确的数字。

# jquery - 可滚动的固定 div

> ID：14020714
> 
> 赞同：0
> 
> 时间：2012-12-24T11:23:57.403
> 
> 标签：jquery, ruby-on-rails

我正在开发一个测验应用程序，我目前正在做测试页面。我打算在一个页面上显示所有问题，并在左侧的表格中显示问题编号，以便考生可以用来导航到问题。

但我希望该表始终可见。我的意思是我希望它作为一个固定的元素。但不幸的是，当问题数量很多时，表格会溢出视图，我无法看到底部。

无论如何要使该div固定并为该div的内容提供滚动条吗？

这是一个屏幕截图： ![在此处输入图像描述](../Images/e39e1fd70d421048f1100cc8ed3496da.png)

我正在使用引导程序的“附加”类来进行 div 修复。这是标记：

```
<div class="row">
<div class="span3">
  <table class="table table-condensed bs-docs-sidenav affix">
  <caption><strong>Questions Navigation</strong></caption>
      <% @q_array.each do |row|%>
        <tr>
          <% row.each do |qn| %>
            <td style="text-align: center;"><%= link_to qn,"#",:class=>"btn btn-inverse"%></td>
          <%end%>
        </tr>
      <%end%>
  </table>
</div>
<div class="span9">

<%= @questions.keys[0] %>
<%= @questions.values[0][1] %>
<%=@questions %>
<%=@q_array%>

</div>
</div> 
```

`.bs-docs-sidenav`是我从引导文档页面中获取的一个 CSS 类。它设置宽度和边框。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:26:27.970

将 a 设置`height`为您的`div`和属性`overflow:scroll`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:31:15.117

试着把溢出到你的`affix css class`

```
overflow-y:auto;
overflow-x:hidden; 
```

# asp.net - 创建 C# 代码以从 json 文件中获取值

> ID：14020718
> 
> 赞同：0
> 
> 时间：2012-12-24T11:24:09.523
> 
> 标签：asp.net, json, api, integration

我开发了一个*在线巴士座位预订项目*，这里我为每个操作使用 API。

一项操作必须将信息写入`.xml`文件，现在他们已更改为`.json`. 我已经从 中获得了价值`.xml`，但我不知道如何从中获得价值`.json`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:09:21.773

这取决于您使用的方法类型。就它们而言，`GET`您可以从中获得价值`Request.QueryString["Key"]`，如果方法类型是，`POST`那么您可以从`Request.Form["key"]`.
要以 Json 格式返回结果，您可以使用`.Net 3.0 System.Web.script.Serialization`包含 Class 的命名空间来将对象转换为 json 数据`JavaScriptSerializer`，或者您可以使用一些第三方 dll，例如`JSON.NET`在处理 json 数据时属于我最喜欢的列表中的 One。

# c++ - 如何为arduino编译V-USB？

> ID：14020724
> 
> 赞同：1
> 
> 时间：2012-12-24T11:24:53.543
> 
> 标签：c++, assembly, arduino, avr-gcc

简单地说，我为 Arduino 下载了一个[V-USB](http://vusb-for-arduino.googlecode.com)端口，似乎无法编译随附的示例。尝试使用 Arduino IDE 1.0.1 进行编译时收到以下消息

```
avr-gcc: error: unrecognized command line option '-assembler-with-cpp' 
```

我知道这很可能是版本不兼容问题，可以通过将我的 avr-gcc 降级到旧版本来避免，但是是否可以使用最新版本的 avr-gcc 进行编译？

关于我正在尝试的环境的一些注意事项

*   **操作系统**：Fedora release 17 (Beefy Miracle)
*   **avr-gcc** : (Fedora 4.7.2-1.fc17) 4.7.2
*   **Arduino IDE**：（arduino-1.0.1-1.fc17）1.0.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:47:25.403

该`-assembler-with-cpp`选项指示编译器将所有以下文件视为需要预处理的汇编文件。快速浏览一下 v-usb，它们为文件提供`.asm`了包装器。`.S`您不需要使用这些，编译器将`.S`自动识别文件而无需任何选项。

如果问题不在于`.asm`上面详述的包装器，您可以将有问题的文件重命名为`.S`.

您是否尝试过在没有标志的情况下进行编译？发生了什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T03:18:52.107

在[Jester](https://stackoverflow.com/users/547981/jester)的提示下，我设法通过将 IDE 更新到*1.0.3*版（1.0.2 版也可以）解决了这个问题，它就像一个魅力。

所以我猜问题不在于代码或编译器，问题在于 IDE *1.0.1*期待旧版本的**avr-gcc**并使用不推荐使用的标志进行编译，但由于该标志不再可用新的编译器，因此您要么必须降级编译器，要么升级 IDE，从我的角度来看，升级始终是正确的选择。

# javascript - 删除 JSON 根

> ID：14020726
> 
> 赞同：4
> 
> 时间：2012-12-24T11:25:04.727
> 
> 标签：javascript, json

我在 JavaScript 变量上有以下字符串：

```
my_Variable = "{"Domini":[{"cod_domini":"1","nom_domini":"Sant Esteve de Palautordera"},{"cod_domini":"2","nom_domini":"Parc Natural del Montseny"},{"cod_domini":"5","nom_domini":"Sant Pere de Vilamajor"},{"cod_domini":"6","nom_domini":"Santa Maria i Mosqueroles"}]}" 
```

我需要删除字符串顶部的根，`Domini`因此生成的字符串如下所示：

```
my_Variable = [{"cod_domini":"1","nom_domini":"Sant Esteve de Palautordera"},{"cod_domini":"2","nom_domini":"Parc Natural del Montseny"},{"cod_domini":"5","nom_domini":"Sant Pere de Vilamajor"},{"cod_domini":"6","nom_domini":"Santa Maria i Mosqueroles"}] 
```

我尝试使用`JSON.parse()`函数将 JSON 解析为对象并且它可以工作，但是我不知道如何检索数据并处理它以生成没有 root 的新 JSON。

我应该使用某种循环吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T11:26:20.143

这很简单：

```
my_Variable = my_Variable.Domini; 
```

JSON解析后。

所以代码将是：

```
my_Variable = "{"Domini":[{"cod_domini":"1","nom_domini":"Sant Esteve de Palautordera"},{"cod_domini":"2","nom_domini":"Parc Natural del Montseny"},{"cod_domini":"5","nom_domini":"Sant Pere de Vilamajor"},{"cod_domini":"6","nom_domini":"Santa Maria i Mosqueroles"}]}";
my_Variable = JSON.parse( my_Variable );
my_Variable = my_Variable.Domini;
console.log( my_Variable ); // [{"cod_domini":"1","nom_domini": ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T11:29:06.643

```
var obj = JSON.parse(json);
obj = [Object.keys(obj)[0]];
var newJson = JSON.stringify(obj); 
```

或者，避开像 Object.keys 这样的 ES5 特性：

```
var obj = JSON.parse(json);
for (var key in obj) {
    if (!Object.prototype.hasOwnProperty.call(obj, key)) continue;
    obj = obj[key];
    break;
}
var newJson = JSON.stringify(obj); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T11:27:59.780

考虑到您希望在删除密钥后将其恢复为字符串。

```
my_Variable = JSON.stringify(JSON.parse(my_Variable).Domini); 
```

* * *

## 分解

```
JSON.parse(my_Variable) 
```

将字符串解析为 JSON 对象。

```
JSON.parse(my_Variable).Domini 
```

返回属性的值`Domini`。

```
JSON.stringify(JSON.parse(my_Variable).Domini) 
```

将其编码回字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T11:27:39.067

如果您希望您的变量通过，请执行以下操作（您提到您已经这样做了，但为了完整性我添加了它）

```
var parsedJson = JSON.parse(my_Variable); 
```

解析后，只需执行以下操作：

```
var JsonWithoutDominiAsRoot = parsedJson.Domini; 
```

你可以 ”。” 您可以通过新 json 对象的不同属性。多米尼只是其中之一。

# twitter-bootstrap - 带有流程图的引导选项卡

> ID：14020733
> 
> 赞同：0
> 
> 时间：2012-12-24T11:25:46.193
> 
> 标签：twitter-bootstrap, tabs, flot

> **可能重复：**
> [在 jquery 选项卡解决方法中加载浮点图表并不能完全解决问题](https://stackoverflow.com/questions/1976958/loading-flot-chart-in-jquery-tab-workaround-doesnt-completely-fix-the-issue)

我正在尝试将两个 flot.js 图表加载到两个不同的选项卡中。我正在使用 twitter 引导框架中的选项卡。第一个图表在第一个选项卡上加载正常（因为该选项卡是可见的），但对于第二个图表，它不会在第二个“隐藏/非活动”选项卡上呈现。我到处寻找解决方案，几乎是早上 6 点，整晚都在努力寻找解决方案。有没有人知道任何解决方案？

感谢！

# ios - 拦截对 MKOverlay 边框的触摸

> ID：14020743
> 
> 赞同：1
> 
> 时间：2012-12-24T11:26:32.637
> 
> 标签：ios, cocoa-touch, mkmapview, uigesturerecognizer, mkoverlay

程序的功能之一是选择一张地图。我使用 MKAnnotations 并使用 MKPolygonView（只有边框可见）来连接“点”。（请看下面的截图）。

![MKMapView 与 MKAnnotationViews 由 MKPolygonView 的边框连接](../Images/d63b568b7f21572e7a1e7fdf95dd7479.png)

但是，我正在尝试找到一种机制，以便用户可以添加新引脚。这应该通过按下 MKPolygonView 的边框部分来完成，然后在边框中间添加一个新引脚。

为了做到这一点，我必须拦截触摸，可能使用 UIGestureRecognizer。我查看[了 MKMapView 的叠加层上的触摸事件](https://stackoverflow.com/questions/6436479/touch-events-on-mkmapviews-overlays)，这给了我很好的领先优势。唯一的问题是这也会在 MKPolygonView 内拦截触摸。我只需要边界。

有没有办法实现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T06:03:34.557

这是一个老问题，但无论如何 - 一种可能的解决方法是同时使用 MKPolyline。您可以添加一个 MKPolyline，匹配 MKPolygon 边框并检测 MKPolyline 上的点击。

# tapestry - Tapestry AJAX Throbber

> ID：14020745
> 
> 赞同：1
> 
> 时间：2012-12-24T11:26:47.083
> 
> 标签：tapestry

我试图在 ajax 区域更新中显示一个旋转条。我在我的项目中导入了以下 js 函数。

```
Tapestry.onDOMLoaded(function() { 
    function addAjaxOverlay(event, element) { 
        alert("Its hrerer");
        var mgr = Tapestry.findZoneManager(element); 
        var zone = mgr && mgr.element; 
        if (!zone) { 
            return; 
        } 

        var $zone = $(zone); 

        $zone.prepend("<div class='zone-ajax-overlay'/>"); 
        var overlay = $zone.children(":first"); 
        overlay.width(500).height(600); 
    } 

    $(document.body).bind(Tapestry.FORM_PROCESS_SUBMIT_EVENT, addAjaxOverlay); 
    $(document.body).bind(Tapestry.TRIGGER_ZONE_UPDATE_EVENT, addAjaxOverlay); 
}); 
```

现在我从[这里](http://tapestryjava.blogspot.co.uk/2011/12/adding-ajax-throbbers-to-zone-updates.html)得到了代码。并将代码翻译成 JQuery。但实际上什么也没发生。微调器未显示。如果我在文档的最后两行下方添加警告框，它可以工作，但似乎从未调用过 addAjaxOverlay 函数。函数内的警告框不起作用。

# python - 使用 SQLAlchemy 中的图，如何找到未通过边连接到某个特定其他节点的节点？

> ID：14020746
> 
> 赞同：1
> 
> 时间：2012-12-24T11:26:49.923
> 
> 标签：python, graph, sqlalchemy

假设我将有向图保存在类似于 SQLAlchemy 文档中的示例的表中：http: [//docs.sqlalchemy.org/en/rel_0_7/orm/examples.html#directed-graphs](http://docs.sqlalchemy.org/en/rel_0_7/orm/examples.html#directed-graphs)

现在我保存一个特定的节点`a`。使用 SQLAlchemy ORM，我想构建一个查询来查找所有*没有*边缘的节点`a`。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:43:25.633

```
def get_non_touching(ref_node):
    qry = session.query(Node)
    qry = qry.filter(~Node.lower_edges.any(Edge.higher_id == ref_node.node_id))
    qry = qry.filter(~Node.higher_edges.any(Edge.lower_id == ref_node.node_id))
    qry = qry.filter(Node.node_id != ref_node.node_id) # exclude node "a" itself as well
    return qry.all()

a = session.query(Node).get(1)
res = get_non_touching(a) 
```

# shell - 用于合并由空行分隔的行的 Shell 脚本

> ID：14020750
> 
> 赞同：3
> 
> 时间：2012-12-24T11:27:21.060
> 
> 标签：shell, sed, awk

我有一个巨大的文本文件（500K 行），其中一些行分成多行。我正在尝试使用拆分线获取记录，并显示在一行中。当行被拆分时，在下一行的开头之前有一个空行。现在，我正在遍历每一行，在 start ( `AAAA|`) 处测试字符串以确定它是否是新行，然后与下一个连接。但这似乎需要很多时间，并且想知道是否有更好的方法来做到这一点。此外，有些行被分成多行，每条新记录都以“AAAA|”开头。

输入文件：

```
AAAA|XXXX|YYYY|ZZZZ|532920-1*TYCO ELECTRONICS AMP#HDR4-2B-320-PSH2-A*CECO COMPONENT EQUIPMENT CO INC#
AAAA|XXXX|2342342|ADFADFS|A80386DX-33*INTEL CORP#
AAAA|SDFASF|234232322|saddfwq|ER412D-5A*TELEDYNE COMPONENTS#M39016/15-088L*QPL-39016#JMACD-5XL*HI-G INC#914S72101-10L*DRI RELAYS INC#M39016/15-082L*QPL-39016#3SBS1412A2*TYCO ELECTRONICS
CORP#

AAAA|XXXXXXX|5675423|XVASD|N74F132D-T*NXP SEMICONDUCTORS#74F132SC*FAIRCHILD SEMICONDUCTOR CORP#N74F132D*NXP SEMICONDUCTORS#MC74F132D*FREESCALE SEMICONDUCTOR INC#N74F132D,602*NXP SEMICONDU
CTORS#

AAAA|SDFASFSAS|23422|DFGAQWEWE|3SBS1411A2*TYCO ELECTRONICS CORP#914S70301-10L*DRI RELAYS INC#M39016/15-081L*QPL-39016#ER412D-26A*TELEDYNE COMPONENTS#JMACD-26XL*HI-G INC#M39016/15-087L*QPL
-39016#

AAAA|SFRQ3|34543534|NSGBSSDF|3SBS1223A2*TYCO ELECTRONICS CORP#914S60301-10L*DRI RELAYS INC#M39016/15-039L*QPL-39016#914S60301-09L*DRI RELAYS INC#M39016/15-051L*QPL-39016#ER412D-18A/S*TE
LEDYNE COMPONENTS#JMAPD-18XL*HI-G INC#

AAAA|ALSKFJ|1SFAE|ASLKFJSLKSAD|11163-164J*PHILIPS COMPONENTS#SEE_DRAWING_11163-164J*ROHM CO LTD#CF1/4L_164J*KOA SPEER ELECTRONICS INC#SEE_DRAWING_11163-164J*PHILIPS COMPONENTS#CF1/4L
U164J*KOA SPEER ELECTRONICS INC#CF1/4-160K-5%*KOA SPEER ELECTRONICS INC#11163-164J*ROHM CO LTD#131-00164-0053*HONEYWELL CROSS REFERENCE#CF1/4CT52A164J*KOA SPEER ELECTRONICS INC#CF1/4CT52R164J*KOA SPEE
R ELECTRONICS INC#||

AAAA|ASDFAA|1ASFSDAS|ASDFSA|MF 55 D 4323 F*KOA SPEER ELECTRONICS INC#2322156X4324*BC COMPONENTS INC#MF1/4DLT52R4323F*KOA SPEER ELECTRONICS INC#2322 156 X 4324*BC COMPONENTS INC#SFR55432K0
1%*BC COMPONENTS INC#CCF-55 4323 F*VISHAY DALE#CCF-554323F*VISHAY DALE#MF1/4DL_4323F*KOA SPEER ELECTRONICS INC#RN55D4323F*MILITARY SPECIFICATIONS#SFR55 432K0 1%*BC COMPONENTS INC#MF55D4323F*KOA SPEER
ELECTRONICS INC#|| 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T04:18:27.893

使用 Perl 保留空行：

```
perl -ne 'if (!/^$/) { chomp } else { print "\n" } print' input 
```

在加入后使用 Perl 删除黑线：

```
perl -ne 'if (!/^$/) { chomp } print' input 
```

使用 GNU Sed（在 posix 模式下不处理最后一行）：

```
sed '/^AAAA/{:l N;/\n./{s/\n//;bl}}' input 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T11:40:01.043

假设只有最后一列被分成多行：

```
awk -F"|" 'NF>1{if(x)print x;x=""}{x=x $0;}END{print x}' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T12:11:38.510

算法的一个`sed`版本“如果一行不以`AAAA|`简单地与前一行连接：”开始：

```
sed -n '1x;2,${/^AAAA|/{x;s/\n//g;p};/^AAAA|/!H};${x;s/\n//g;p}' your_file.txt 
```

作为所有`sed`脚本，需要一些解释：

*   `-n`：不要在脚本末尾打印模式空间。
*   `1x`：记住保持空间中的第一行（交换保持和模式空间）。
*   `2,${...} ：用于倒数第二行。
*   `/^AAAA|/{x;s/\n//g;p}`：如果该行以新记录模式开始，则将新行保存在保持空间中并取回上一行作为保持空间（交换保持和模式空间），从上一个记录中删除换行符并打印它。
*   `/^AAAA|/!H`：如果该行不是以新记录模式开头，则将其附加到保留空间中的前一行。
*   `${x;s/\n//g;p}`：对于最后一行，从保留空间取回数据，删除换行符并打印。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T11:54:04.083

如果一行不是以`AAAA|`简单地与上一行连接开始的：

```
awk 'NR == 1 { previous = $0 }
     NR > 1 && $0 ~  "^AAAA[|]" { print previous; previous = $0 }
     NR > 1 && $0 !~ "^AAAA[|]" { previous = previous $0 }
     END { print previous }' your_file.txt 
```

我们需要放置`|`中间`[]`，因为它是扩展正则表达式的特殊字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T15:06:24.957

这可能对您有用（GNU sed）：

```
sed ':a;$!N;/\nAAAA/{P;D};s/\n//;ta' file 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T11:38:05.600

下面的命令慢吗？

```
awk '!NF{print line; line=""}{line=line$0}' infile 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-25T04:11:21.960

似乎每条记录*都应该*以井号结尾。如果这是真的，那么：

```
awk '{printf("%s", $0)} /#$/ {print ""}' filename 
```

# javascript - 在 HTML5 上取消滚动

> ID：14020751
> 
> 赞同：1
> 
> 时间：2012-12-24T11:27:29.750
> 
> 标签：javascript, jquery, html, google-maps, jquery-mobile

我有一个 HTML5 页面

该页面被定义为**100% height**，并且仍然有一个滚动条。

一开始我以为是因为我在页面里有谷歌地图，然后我在另一个浏览器中打开页面，滚动条比第一个浏览器小，

然后我想到这是因为不同的**Tool Bars**。

真的是工具栏的原因还是地图的原因，如何解决？

谢谢...

我的CSS：

```
.ui-mobile
{
    height: 99%;
    width: 100%;
}

ui-mobile-viewport.ui-overlay-c
{
    height: 99%;

}

#map_canvas
{
    height: 99%;
    width: 100%;
    position: inherit;
} 
```

我的HTML：

```
<!DOCTYPE html>
<html class="no-js">
<head>
...
    <title>Main Page</title>
</head>
<body>
    <div id="MainPage" data-role="page">
        <script>
            $("#MainPage").live("pageinit", function () { ... });
        </script>
        <div id="map_canvas">
        </div>

    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:32:37.830

首先请分享HTML代码。

对于您的问题：是的，这可能是因为**工具栏**或其他一些默认边距，页面中的填充。

您可以通过将高度设置为 98% 或 99% 来移除滚动条，这会为您解决滚动问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T15:54:05.330

如果这对您来说不是问题，请查看我的 jQuery 解决方案：

```
$(window).bind('resize', function () {
    var screenHeight= 0;
    screenHeight= $('[data-role="page"]').first().height() - $('[data-role="header"]').first().height()- $('[data-role="footer"]').first().height();
    $('#map_canvas').css('height',screenHeight - 4);
}).trigger('resize'); 
```

**页面高度 - 页眉高度 - 页脚高度 - 4 = 内容高度**

我正在使用 - 4 来对抗边界。如果您只有页脚或页眉，则仅使用 -2。如果您只有地图，则没有。

对于这个公式，您需要一个视点元标记集，因为您会得到错误的屏幕尺寸。

```
<meta name="viewport" content="width=device-width, initial-scale=1" /> 
```

这是一个 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/HKjEF/](http://jsfiddle.net/Gajotres/HKjEF/)

在 Win Firefox、iPad Safari、Android 4.1 Chrome 环境中测试。

# jquery - 鼠标悬停时突出显示 Gridview 行

> ID：14020756
> 
> 赞同：1
> 
> 时间：2012-12-24T11:27:35.350
> 
> 标签：jquery, asp.net, gridview

我必须在鼠标悬停时突出显示 gridview 的一个单元格。突出显示有问题。我正在检查单元格是否会突出显示。

// 来源

```
 <script type="text/javascript">
    $(document).ready(function() {
    $('#gvrecords tr:td').mouseover(function() {
    $(this).addClass('highlightRow');
    });
    $('#gvrecords tr').mouseout(function() {
    $(this).removeClass('highlightRow');
    })
    })
    </script> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:28:56.393

您选择了错误的选择器， :td 不正确。您需要直接在 tr 上附加事件。您可以使用`mouseenter`而不是，`mouseover`因为当鼠标在其上移动时，鼠标悬停会一次又一次地触发，`it will cause needless execution of code`. 您只需要更改一次班级，因此鼠标输入将为您完成。

**[现场演示](http://jsfiddle.net/rajaadil/Bf3MT/)**

```
$(document).ready(function() {
    $('#gvrecords tr').mouseenter(function() {
       $(this).addClass('highlightRow');
    }).mouseout(function() {
      $(this).removeClass('highlightRow');
    })
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:30:12.557

您可以使用 CSS 执行此操作，这可能会更容易：

```
#gvrecords tr {
     background-color: #FFF;
}

#gvrecords tr:hover {
     background-color: #000;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T11:29:24.433

使用`css`

```
.highlightRow
{
  background-color:your_color;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T11:29:47.303

一个小技巧可以做到这一点。

```
$('#gvrecords tr:has(td)').mouseover(function() 
```

# jquery - Jquery 事件列表按日期排序

> ID：14020757
> 
> 赞同：3
> 
> 时间：2012-12-24T11:27:34.853
> 
> 标签：jquery, list, events, date

我有带有日期的即将发生的事件列表，是否有任何 JQuery 代码/插件：

1）首先按最新日期排序事件列表。
2）让最新事件在事件发生当天的给定时间消失。
3) 假设我今年有 15 个即将发生的事件列表，我希望每次给定时间只出现 6 个事件列表。

```
<div id="event">
    <ul>
        <li><a href="single's_weekend.html">Single's WeekEnd</a><p>Sat &amp; Sun, Nov 10th - 11th 2013</p></li>
        <li><a href="women's_conference.html">Women's Con.</a><p>Sunday, May 20th 2013</p></li> 
        <li><a href="children's_day.html">Children's Day</a><p>Sunday, May 27th 2013</p></li>   
        <li><a href="couple's_retreat.html">Couple's Retreat</a><p>Fri-Sun, June 1st - 3rd 2013</p></li> 
        <li><a href="week_of_prayer.html">Week of Prayer</a><p>Mon-Sun, Sept 3rd - 8th 2013</p></li>
        <li><a href="annual_conference_2012.html">Annual Conference 2013</a><p>Wed-Sun, October 3rd - 7th 2013</p></li> 
    </ul>                       
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T07:40:25.410

这是一个工作代码...... jsFiddle：http: [//jsfiddle.net/KrTNJ/1/](http://jsfiddle.net/KrTNJ/1/)

实现了三个功能：

**排序事件**

按结束日期的顺序对列表进行排序，并为每个 li 元素添加一个 id。

**移除旧事件**

删除直到今天才结束的事件。您可以在计时器或其他东西中或在启动期间调用它。仅当 sortEvents 已经执行时才有效。

**显示一些（计数）**

仅显示“计数”条目。仅当 sortEvents 已经执行时才有效。

* * *

```
// Uses jQuery

$(document).ready(function(){
    var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

    var month_index = function(target) {
        target = target.toLocaleLowerCase();
        return jQuery.inArray(true, jQuery.map(months, function(s) {
            return s.toLocaleLowerCase().indexOf(target) > -1;
        })) + 1;
    };

    function getKeys(obj) {
        var keys = [];
        for(var key in obj) {
            if(obj.hasOwnProperty(key)) {
                keys.push(key);
            }
        }

        return keys;
    }

    function sortEvents() {
        eventList = new Object();

        $("#event ul li").each(function(index, value) { 
            dates = $(this).children("p")[0];
            dates = $(dates).text().split(",")[1].trim();

            m = dates.split(" ");

            if(dates.search("-") != -1) {
                m.splice(1, 2);
            }

            m[1] = m[1].substring(0, m[1].length - 2);

            month = month_index(m[0])

            id = m[2] + "-" + (month < 10 ? "0" + month : month) + "-" + (m[1] < 10 ? "0" + m[1] : m[1]);

            eventList[id] = "<li id='" + id + "'>" + $(this).html() + "</li>";
        });

        eventKeys = getKeys(eventList).sort();
        $("#event ul").empty();

        for(i = 0; i < eventKeys.length; i++) {
            $("#event ul").append(eventList[eventKeys[i]]);
        }
    }

    function removeOldEvents() {
        $("#event ul li").each(function(index, value) { 
            a = $(this).attr('id').split("-");
            d = new Date(a[0], (a[1] - 1), a[2]);

            g = new Date();
            g.setHours(0,0,0,0);

            c = (d > g) - (g > d);

            if(c < 1) {
                // Remove
                $(this).remove();
            }
        });

        displaySome(6);
    }

    function displaySome(count) {
        $("#event ul").find('li:gt(' + (count - 1) + ')').hide();
    }

    sortEvents();

    removeOldEvents();

    displaySome(6);
}); 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:37:11.557

如果您使用数据库来存储所有这些事件，您可以使用**order by date desc**并选择大于当前日期（**where date > today**）的日期并将它们限制为 6（使用**limit by**子句）

# ios - iOS：如何使用滑块设置自定义背景颜色？

> ID：14020764
> 
> 赞同：0
> 
> 时间：2012-12-24T11:28:05.567
> 
> 标签：ios, cocoa-touch, uiview, uislider

首先我想说我在这个网站上看到了一些关于如何做到这一点的帖子，虽然似乎没有一个对我有用，所以在我让它工作之前请不要关闭它。

我想要做的是根据滑块的值改变视图的背景，以便用户可以选择他们想要的背景颜色。

```
self->colorView.backgroundColor = [UIColor myColor];
myColor = 
```

我想我需要一些这样的代码，虽然我不知道如何定义我的颜色是什么；像“红色：redSlider / 255”等其他颜色？我也不知道在哪里实现上面的代码，因为当使用更改滑块的值时，我需要它不断更新。

我在编程方面非常基础，因为您可能已经学会了，因为我只是一个将编程作为一种爱好的青少年，我希望有简单的说明清楚地告诉我我需要在哪里放置代码等。

ps 它不会让我发布视图的图像，对不起:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:16:17.907

在您的 ViewController.h 文件中定义

```
@property (nonatomic, strong) IBOutlet UISlider *mySlider; 
```

在 ViewController.m 文件中，添加以下内容：

```
- (void) sliderValueChanged:(UISlider *)slider
{
    // Handle your color changing logic here
    myView.backgroundColor = [UIColor colorWithRed:0.4f green:0.5f blue:1.0f alpha:1.0f];
} 
```

在 Interface Builder 中，拖动 UISlider 以查看并将其“Value Changed”事件出口设置为`sliderValueChanged`方法。

现在，当您更改屏幕上的滑块时，颜色应根据您在方法中的逻辑进行更改`sliderValueChanged`

以下是根据您的要求的逻辑：

```
- (void) sliderValueChanged:(UISlider *)slider
{
    // Assuming slider minimum is 0 and maximum is 1
    CGFloat redVal = 0.0f;
    CGFloat yellowVal = 0.0f;
    CGFloat blueVal = 0.0f;
    if (slider == redSlider)
    {
        redVal = slider.value;
    }
    else if (slider == yellowSlider)
    {
        yellowVal = slider.value;
    }
    else if (slider == blueSlider)
    {
        blueVal = slider.value;
    }
    myView.backgroundColor = [UIColor colorWithRed:redVal green:greenVal blue:blueVal alpha:1.0f];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:20:58.503

由于 UISlider 实现了 UIAppearence 协议，您可以将其背景颜色设置为：

```
mySlider.backgroundColor = [UIColor lightGrayColor]; // Or any other color 
```

或者：

```
[[mySlider appearance] setBackgroundColor:[UIColor lightGrayColor]]; 
```

# node.js - Dust.js 为新手服务

> ID：14020769
> 
> 赞同：1
> 
> 时间：2012-12-24T11:28:19.940
> 
> 标签：node.js, dust.js

我有一段代码想在一些灰尘模板中使用，所以我打算使用部分代码。我不确定以下是否是最好的方法。请帮忙。

1）我从基本模板中提取通用代码到名为 userinfo.html 的模板文件中
2）我编译 userinfo.html 以创建 userinfo.dust
3）我将 {>“userinfo.dust”/} 代码添加到我想要的所有模板中查看用户信息。
4）现在当我使用以下命令渲染模板时。我收到“找不到模板：userinfo.dust”错误。

```
dust.render("moduleTemplate", templateData, function(err, out) {
    $main.html(out);  
}); 
```

渲染时是否需要将 userinfo.dust 与 templateData 一起发送？我尝试阅读谷歌可以给我的所有部分相关信息，但无法弄清楚如何实现部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:42:27.567

在您的模板中，当您调用时：

```
{>"userinfo.dust"/} 
```

你真的应该打电话

```
{>"userinfo"/} 
```

因为您不需要指定 .dust 扩展名。这是我的一个模板示例：

```
{>header /}
    {>results /}
{>footer /} 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:30:39.607

听起来您的问题的答案是部分未包含在页面中。Dust 编译为 JavaScript，因此如果您重命名文件：userinfo.dust（模板）和 userinfo.js（已编译的模板），这将更有意义。现在使用脚本标签包含您的模板：

```
<script type="text/javascript" src="templates/userinfo.js"></script> 
```

最后，您需要使用编译时使用的 svame 名称来调用模板。使用文件名是个好主意（通常但不一定没有扩展名）：

```
var userinfoCompiled = dust.compile('userinfo', 'user info template goes here'); 
```

可以使用以下方式调用以这种方式编译的模板：

```
{>userinfo/} 
```

如果您不确定编译后的模板名称是什么，您可以打开编译后的 JavaScript 文件并查找：

```
dust.register('userinfo') 
```

# c# - 将 AutoCAD 图层导出到 ESRI shapefile

> ID：14020770
> 
> 赞同：2
> 
> 时间：2012-12-24T11:28:27.257
> 
> 标签：c#, autocad, shapefile, objectarx

我需要将 Autocad2013 绘图中特定图层的特征导出为 ESRI shapefile 格式。当我使用 时`c#`，我已经为 Autocad 下载了 ObjectARX。但我不知道是否有任何库支持直接转换为 shapefile 格式。

如果有人能提供正确的建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:00:20.513

通过 AutoCAD Civil 3D 的 Mapexport 将起到作用，或者让 ARCGIS for AutoCAD 看起来它是一个免费插件，允许与 ESRI 数据层共享 AutoCAD 线条

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T04:52:14.323

**尝试 FDO 导出选项。**

Mapguide API 文档和 Autodesk Map3d 开发人员文档有一些示例可以帮助您。还要检查 Autodesk Map3d 附带的示例文件夹，其中包含一些示例应用程序。

**以下是一些可能有用的链接** [http://trac.osgeo.org/fdo/browser/trunk/Providers/SHP/Managed/UnitTest/ProviderTests/SelectTests.cs](http://trac.osgeo.org/fdo/browser/trunk/Providers/SHP/Managed/UnitTest/ProviderTests/SelectTests.cs)

[http://trac.osgeo.org/fdo/browser/trunk/Providers/SHP/Managed/UnitTest/ProviderTests/UpdateTests.cs](http://trac.osgeo.org/fdo/browser/trunk/Providers/SHP/Managed/UnitTest/ProviderTests/UpdateTests.cs)

[http://osgeo-org.1560.n6.nabble.com/Shapefile-and-spatial-context-td3900324.html](http://osgeo-org.1560.n6.nabble.com/Shapefile-and-spatial-context-td3900324.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T15:08:52.910

[NetTopologySuite](http://code.google.com/p/nettopologysuite/) (NTS) 是一个用于 Gis 相关应用程序的 .Net API。它确实包含导出到 shapefile 的[方法。](http://code.google.com/p/nettopologysuite/source/browse/trunk/NetTopologySuite.IO/NetTopologySuite.IO.ShapeFile/ShapeWriter.cs?r=763)

这里的挑战是将 Autodesk 对象（AcDbPolyline 等）转换为 NTS 类型的几何图形。[TF.Net](http://code.google.com/p/tf-net/)是另一个库，它有一个不错的 DwgReaderWriter，可以将 AutoCad 几何图形转换为 Nts 几何图形。TF.Net 实际上使用 NTS 作为引用本身，因此您需要注意命名空间冲突。或者您可以在没有 Nts 的情况下单独使用 TF.Net，但我不确定 TF.Net 是否已将其底层 NTS 更新到最新版本。

[这里](http://code.google.com/p/tf-net/wiki/DwgReaderWriter)有一些关于使用 TF.Net IO 的示例

# mysql - 随机日期附近的实际数据

> ID：14020774
> 
> 赞同：1
> 
> 时间：2012-12-24T11:28:40.857
> 
> 标签：mysql, date, max

我有一张带有产品的表格和一张带有产品比例的表格

产品布局：

*   产品编号
*   姓名
*   物种
*   描述

产品比例布局：

*   产品属性 ID
*   数量
*   价格
*   单价
*   检查日期
*   产品编号

每天晚上我都会运行一个查询来实现价格和金额。当存在差异时，将在 Product Proporties 中添加一条带有实际价格和金额的新记录。当没有区别时，什么都不会发生。

更新查询可能只更新部分产品而不是全部（因为其中一些确实更贵或更便宜，而其中一些不会改变价格或数量。

我想显示给定日期的适当价格和数量，这是完全随机的。换句话说：我想要在给定日期前后实际的产品的所有价格和数量。

这就是问题出现的地方，因为当我想到正确的方法时，我的大脑开始从耳朵里漏出来。

这是我尝试过的：

```
SELECT product.*, proporties.* 
FROM products product 
LEFT JOIN productproporties proporties 
ON product.ProductID = proporties.ProductID 
WHERE max(proporties.checkdate) <= '25-10-1979 00:00:00' 
ORDER BY proporties.checkdate DESC 
```

但这似乎不起作用:)。有人能这么好心地把我踢向正确的方向吗？

# javascript - 使用 javascript eval() 在输入中进行简单计算是否安全？

> ID：14020780
> 
> 赞同：12
> 
> 时间：2012-12-24T11:29:15.180
> 
> 标签：javascript, eval

我想允许用户在文本输入中执行简单的计算，这样输入 2*5 将得到 10。我用空字符串替换除数字之外的所有内容，然后使用 eval() 进行计算。这似乎比手动解析更容易并且可能更快。

人们经常说 eval() 是不安全的，所以我想知道在这种情况下使用它是否有任何危险或缺点。

```
function (input) {
  value = input.value.replace(/[^-\d/*+.]/g, '');
  input.value=eval(value);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-24T11:39:28.453

那是安全的，不是因为你在清理它，而是因为它都是由用户输入并在他们自己的浏览器中运行的。如果他们真的想输入恶意代码，他们无论如何都可以通过使用 firebug 或 web 检查器，甚至使用小书签来完成。值得庆幸的是，除了锁定自己的浏览器之外，您无法对 javascript 进行恶意操作 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:35:16.013

这是安全的，因为您在将其放入 eval 之前正在进行输入验证。

除此之外，您还应该添加：

()%

# python - Traceback 当我使用 urllib2 时，得到一个 HTTP 500 错误

> ID：14020784
> 
> 赞同：1
> 
> 时间：2012-12-24T11:29:35.490
> 
> 标签：python, urllib2

我的代码如下所示，但是运行时会引发错误。

```
search_request = urllib2.Request(url,data=tmp_file_name,headers={'X-Requested-With':'WoMenShi888XMLHttpRequestWin'})
#print search_request.get_method()
search_response = urllib2.urlopen(search_request)
html_data = search_response.read() 
```

错误是：

```
Traceback (most recent call last):
  File "xx_tmp.py", line 83, in <module>
    print hello_lfi()
  File "xx_tmp.py", line 69, in hello_lfi
    search_response = urllib2.urlopen(search_request)
  File "D:\Python27\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "D:\Python27\lib\urllib2.py", line 406, in open
    response = meth(req, response)
  File "D:\Python27\lib\urllib2.py", line 519, in http_response
    'http', request, response, code, msg, hdrs)
  File "D:\Python27\lib\urllib2.py", line 444, in error
    return self._call_chain(*args)
  File "D:\Python27\lib\urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "D:\Python27\lib\urllib2.py", line 527, in http_error_defau
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 500: Internal Server Error 
```

我不知道如何解决它？我的意思是，当发生错误时，我的代码如何继续工作？

当我尝试使用

```
 try:
                search_response = urllib2.urlopen(search_request)
            except urllib2.HTTPError:
                pass 
```

新错误

```
UnboundLocalError: local variable 'search_response' referenced before assignment 
```

我用

```
global search_response 
```

并且有错误

```
NameError: global name 'search_response' is not defined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:38:31.603

您可以捕获异常，这将防止您的程序如此“突然”停止：

```
try:
  search_response = urllib2.urlopen(search_request)
except urllib2.HTTPError:
  print 'There was an error with the request' 
```

如果你想继续，你可以简单地：

```
try:
  search_response = urllib2.urlopen(search_request)
except urllib2.HTTPError:
  pass 
```

这将允许您的程序继续运行；但你的其他陈述`html_data = search_response.read()`不会给你预期的结果。要永久解决此问题，您需要调试您的请求以查看其失败的原因；这不是 Python 特有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T02:17:56.423

当我试图向我的 GAE Python 服务器发送一个大的 post 请求时，我遇到了同样的错误。事实证明服务器抛出错误是因为我试图将接收到的 POST 字符串写入 db.StringProperty()。我将其更改为 db.TextProperty() 并且它不再抛出错误。

资料来源：[克服 python 中的 appengine 500 字节字符串限制？考虑文本](https://stackoverflow.com/questions/11178869/overcome-appengine-500-byte-string-limit-in-python-consider-text)

# java - 在同一台机器上运行不同的 jre 版本

> ID：14020786
> 
> 赞同：3
> 
> 时间：2012-12-24T11:29:45.460
> 
> 标签：java, jvm

我想知道在同一台机器上运行 java 1.4 应用程序和 java 1.6 应用程序是否会有任何影响（性能下降、崩溃等）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T11:32:53.573

不同`java`的版本安装在不同的目录中，因此运行 2 个具有不同 JRE 版本的 java 程序除了运行 2 个 java 进程外不会产生任何影响。

所以底线，没有问题，它不会减慢你的速度。

此外，java 6 比 1.4 具有更好的性能，所以如果你可以同时在 6 上运行它通常会更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T11:33:14.027

无，唯一的问题是您只能拥有一个默认 JVM。如果您有太多版本（例如数百个），可能会有点混乱，但不会减慢您的速度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T11:40:01.417

标题似乎与问题不符。在同一台机器上运行不同的 jre 版本与运行 java 1.4 应用程序和 java 1.6 应用程序是不一样的。所以我会给出2个答案

1.  是的，您可以在您的机器上安装 2 个不同的 jre。

2.  您可以在 JRJ 1.6 上运行 1.4 应用程序（在 Javac 1.4 中编译的类），但不能在 JRE 1.4 上运行 1.6 应用程序（在 Javac 1.6 中编译的类）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-05T10:21:12.927

当然，它不会慢机器。一台机器可以在单台机器上有多个**JVM**。不会有任何冲突，因为所有内容都在单独的文件夹中。

**只有在多个JDK/JRE**的情况下才有特殊情况。

**案例**： - 您的浏览器将使用什么版本。

为此，您可以从 Windows 中的控制面板从 Java 控制台控制所有内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T12:27:36.693

是的，您可以在同一个操作系统的同一台机器上安装多个 JRE。您可以在 IDE 上为一个项目配置一个版本的 Java 编译器。但是请记住，当您在具有较低版本的 JRE 上运行较高版本的 Java 编译代码时，您可能会遇到一些与更高版本引入的新功能和增强功能有关的问题。

# msbuild - 在 Target 块之外使用 MSBuild PropertyGroup

> ID：14020789
> 
> 赞同：6
> 
> 时间：2012-12-24T11:29:53.383
> 
> 标签：msbuild

我有一个项目文件集合：

```
<ItemGroup>
  <ApplicationToDeploy
    Include="Frontend.WebSite.csproj;11.WebServices.csproj;22.WebServices.csproj"/>
  <ApplicationToDeploy
    Include="33.WebServices.csproj;44.WebServices.csproj;Workflow55Svc.csproj"/>
</ItemGroup> 
```

我正在尝试收集这些项目的 .config 文件：

```
<Target Name="111">
  <PropertyGroup>
    <Cfgs>@(ApplicationToDeploy->'%(RootDir)%(Directory)*.config')</Cfgs>
  </PropertyGroup>

  <ItemGroup>
    <InputConfigs Include="$(Cfgs)" />
  </ItemGroup>

  <Message Text="Cfgs: @(InputConfigs)"/>
</Target> 
```

在**Target**块内一切正常（我看到 Web.Configs、App.Configs、Log4net.Configs 等的集合）：

```
Cfgs: C:\Sources\WebServices\11\WebServices\11.WebServices\Web.config;C:\Sources\WebServices\22\WebServices\22.WebServices\web.log4net.config;C:\Sources\WebServices\33\WebServices\33.WebServices\web.environment.config 
```

但我想在**Target**块之外初始化这个**ItemGroup 。**像这样：

 **```
<PropertyGroup>
  <Cfgs>@(ApplicationToDeploy->'%(RootDir)%(Directory)*.config')</Cfgs>
</PropertyGroup>

<ItemGroup>
  <InputConfigs Include="$(Cfgs)" />
</ItemGroup>

<Target Name="111">
  <Message Text="Cfgs: @(InputConfigs)"/>
</Target> 
```

当我在 Target 块之外执行此操作时，我得到以下信息：

```
Cfgs: C:\Sources\WebServices\11\WebServices\11.WebServices\*.config;C:\Sources\WebServices\22\WebServices\22.WebServices\*.config;C:\Sources\WebServices\33\WebServices\33.WebServices\*.config 
```

我不明白发生了什么。是否有可能在**Target**块之外获得相同的结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T13:48:50.580

> 我不明白发生了什么。

此行为是[MSBuild 评估顺序](http://msdn.microsoft.com/en-us/library/dd997067.aspx)的影响：

**在构建的评估阶段：**

*   属性是按照它们出现的顺序定义和修改的。执行属性函数。$(PropertyName) 形式的属性值在表达式中展开。属性值设置为扩展表达式。
*   项目定义按照它们出现的顺序进行定义和修改。属性函数已在表达式中扩展。元数据值设置为扩展表达式。
*   项目类型按照它们出现的顺序进行定义和修改。@(ItemType) 形式的项目值被扩展。项目转换也被扩展。属性函数和值已经在表达式中扩展。项目列表和元数据值设置为扩展表达式。

**在构建的执行阶段：**

*   **在目标中定义的**属性和项目 按照它们出现的顺序一起评估。执行属性函数并在表达式中扩展属性值。项目值和项目转换也被扩展。属性值、项目类型值和元数据值设置为扩展表达式。”

该链接还有另一个关键点**“（...）字符串扩展取决于构建阶段。”。**

您正在使用属性“Cfgs”递归地映射您的项目文件夹并定义通配符到配置文件`(*.config)`。当您在目标内部定义“Cfgs”时，InputConfigs 会接收 Cfgs 的扩展值（以分号分隔的文件夹字符串列表），并仅解析通配符。另一方面，当您在目标外部定义 'Cfgs' 时，InputConfigs 会收到 Cfgs ( 的未扩展值`@(ApplicationToDeploy->'%(RootDir)%(Directory)*.cs')`。当 InputConfigs 扩展它时，它会生成以分号分隔的文件夹字符串列表，但它不会解析通配符`(*.config)`。

> 是否有可能在 Target 块之外获得相同的结果？

我认为 InputConfigs 应该总是收到扩展的目录列表。扩展是在构建的执行阶段进行的。在此阶段，仅评估**目标中定义的属性和项目。**因此，我会将所有初始化都保存在“初始化”目标块中。我并不是说不可能在 Target 块之外执行此操作，但由于上述原因，这似乎不合逻辑。=]

希望这可以帮助，**

# sql-server - 通过 TCP/IP 访问分离的 .mdf 数据库

> ID：14020790
> 
> 赞同：0
> 
> 时间：2012-12-24T11:29:55.537
> 
> 标签：sql-server, database, ms-access, ms-access-2003, isolation-level

我的问题与标题中描述的完全一样，但我不熟悉 MS Access，我想不惜一切代价避免与它进行交互。我偶然发现了一个基于 MS Access 的销售点 (POS) 系统。具体来说，是 MSAccess Runtime 2003。它使用几个 .mdf 文件，这些文件位于同一网络上的共享文件夹中，目前有 2 台 POS 计算机同时使用同一个数据库。SQL Server 2008 Express 实例正在服务器上运行，但它只列出了默认数据库。这是 POS 配置的一部分，在服务器机器上运行：

```
DBConnString=DRIVER=SQL Server;SERVER=(local);APP=Microsoft® Access;UID=sa;PWD=;DATABASE=DB_name
Systemfolder=C:\Kasse 
```

此处的 Systemfolder 是存储 .mdf 文件的位置。在客户端 PC 上，它是文件夹的路径，由服务器共享。还有一个管理程序，当设置为客户端时，它会像这样启动：

```
"C:\Program Files (x86)\Microsoft Office\OFFICE11\MSACCESS.EXE" c:\kasse\Kontor\TSKontor.mdb /Runtime /WrkGrp c:\kasse\Kontor\SYSKONTOR.MDW 
```

它还具有与之前命名的相同的连接字符串。

这些都没有锁定其他客户。

当我在 SSMS 中将所述 MDF 文件附加到服务器时，我可以按预期使用数据库，但 POS 程序有时会抱怨文件被锁定。我已将它们分开，现在 POS 可以像以前一样工作。

有人可以建议，如何在不锁定 .mdf 文件的情况下将此数据库附加到 SQL Server？附加是唯一的解决方案吗？

# php - 将相同值数组合并为一个（字符串值）并将其相应的整数值求和到相同的索引？

> ID：14020792
> 
> 赞同：-4
> 
> 时间：2012-12-24T11:30:12.187
> 
> 标签：php

我有这个数组

```
Array
(
    [0] => Array
        (
            [category_name] => Dessert1
            [totalOrders] => 3
        )

    [1] => Array
        (
            [category_name] => Dessert1
            [totalOrders] => 1
        )

    [2] => Array
        (
            [category_name] => Category 3
            [totalOrders] => 1
        )

) 
```

我想把它转换成这个数组

```
Array
(
    [0] => Array
        (
            [category_name] => Dessert1
            [totalOrders] => 4
        )

    [1] => Array
        (
            [category_name] => Category 3
            [totalOrders] => 1
        )

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:09:04.267

这真的很简单。您只需遍历数据并挑选出独特的类别。当有重复时，将订单添加到类别的总数中。

```
// The stuff from your post
$data = array(
    array('category_name' => 'Dessert1', 'totalOrders' => 3),
    array('category_name' => 'Dessert1', 'totalOrders' => 1),
    array('category_name' => 'Category 3', 'totalOrders' => 1),
);

// Auxiliary variable
$result = array();

// Go over the data one by one
foreach ($data as $item)
{
    // Use the category name to identify unique categories
    $name = $item['category_name'];

    // If the category appears in the auxiliary variable
    if (isset($result[$name]))
    {
        // Then add the orders total to it
        $result[$name]['totalOrders'] += $item['totalOrders'];
    }
    else // Otherwise
    {
        // Add the category to the auxiliary variable
        $result[$name] = $item;
    }
}
// Get the values from the auxiliary variable and override the
// old $data array. This is not strictly necessary, but if you
// want the indices to be numeric and in order then do this.
$data = array_values($result);

// Take a look at the result
var_dump($data); 
```

# entity-framework-5 - 实体类型“AdminServiceCenter”和“ManagerServiceCenter”不能共享表“SrvCenters”

> ID：14020794
> 
> 赞同：-1
> 
> 时间：2012-12-24T11:30:25.740
> 
> 标签：entity-framework-5

我被创造了两个班级。

```
[Table("SrvCenters")]
public class ManagerServiceCenter
{
    #region Public Properties

    /// <summary>
    /// Gets or sets the srv center id.
    /// </summary>
    [Key]
    public int SrvCenterId { get; set; }

    /// <summary>
    /// Gets or sets the branch id.
    /// </summary>
    public int BranchId { get; set; }

    /// <summary>
    /// Gets or sets the branch.
    /// </summary>
    public virtual Branch Branch { get; set; }

    /// <summary>
    /// Gets or sets the location id.
    /// </summary>
    public int LocationId { get; set; }

    /// <summary>
    /// Gets or sets the location.
    /// </summary>
    public virtual Location Location { get; set; }

    /// <summary>
    /// Gets or sets the description.
    /// </summary>
    public string Description { get; set; }

    /// <summary>
    /// Gets or sets the domain name.
    /// </summary>
    public string DomainName { get; set; }

    /// <summary>
    /// Gets or sets the active.
    /// </summary>
    public int Active { get; set; }

    #endregion
} 
```

和

```
[Table("SrvCenters")]
public class AdminServiceCenter
{
    #region Public Properties

    /// <summary>
    /// Gets or sets the srv center id.
    /// </summary>
    [Key]
    public int SrvCenterId { get; set; }

    /// <summary>
    /// Gets or sets the active.
    /// </summary>
    public int Active { get; set; }

    /// <summary>
    /// Gets or sets the begin break.
    /// </summary>
    public TimeSpan BeginBreak { get; set; }

    /// <summary>
    /// Gets or sets the begin day.
    /// </summary>
    public TimeSpan BeginDay { get; set; }

    /// <summary>
    /// Gets or sets the branch id.
    /// </summary>
    public int BranchId { get; set; }

    /// <summary>
    /// Gets or sets the branch.
    /// </summary>
    public virtual Branch Branch { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether check time table.
    /// </summary>
    public int CheckTimeTable { get; set; }

    /// <summary>
    /// Gets or sets the create time.
    /// </summary>
    public DateTime? CreateTime { get; set; }

    /// <summary>
    /// Gets or sets the create user.
    /// </summary>
    public string CreateUser { get; set; }

    /// <summary>
    /// Gets or sets the cust priority id.
    /// </summary>
    public int CustPriorityId { get; set; }

    /// <summary>
    /// Gets or sets the customer bind id.
    /// </summary>
    public int CustomerBindId { get; set; }

    /// <summary>
    /// Gets or sets the delete count.
    /// </summary>
    public int DeleteCount { get; set; }

    /// <summary>
    /// Gets or sets the delete time.
    /// </summary>
    public int DeleteTime { get; set; }

    /// <summary>
    /// Gets or sets the description.
    /// </summary>
    public string Description { get; set; }

    /// <summary>
    /// Gets or sets the domain name.
    /// </summary>
    public string DomainName { get; set; }

    /// <summary>
    /// Gets or sets the end break.
    /// </summary>
    public TimeSpan EndBreak { get; set; }

    /// <summary>
    /// Gets or sets the end day.
    /// </summary>
    public TimeSpan EndDay { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether estimate wait time.
    /// </summary>
    public int EstimateWaitTime { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether have break.
    /// </summary>
    public int HaveBreak { get; set; }

    /// <summary>
    /// Gets or sets the hold order.
    /// </summary>
    public int HoldOrder { get; set; }

    /// <summary>
    /// Gets or sets the location id.
    /// </summary>
    public int LocationId { get; set; }

    /// <summary>
    /// Gets or sets the notif interval.
    /// </summary>
    public int NotifInterval { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether notification.
    /// </summary>
    public int Notification { get; set; }

    /// <summary>
    /// Gets or sets the priority direct id.
    /// </summary>
    public int PriorityDirectId { get; set; }

    /// <summary>
    /// Gets or sets the serv priority id.
    /// </summary>
    public int ServPriorityId { get; set; }

    /// <summary>
    /// Gets or sets the service bind id.
    /// </summary>
    public int ServiceBindId { get; set; }

    /// <summary>
    /// Gets or sets the srv center guid.
    /// </summary>
    public Guid SrvCenterGuid { get; set; }

    /// <summary>
    /// Gets or sets the sequence id.
    /// </summary>
    public int SequenceId { get; set; }

    /// <summary>
    /// Gets or sets the sequence.
    /// </summary>
    public virtual Sequence Sequence { get; set; }

    #endregion
} 
```

尝试时我打电话给ManagerServiceCenter。我有异常

> 实体类型“AdminServiceCenter”和“ManagerServiceCenter”不能共享表“SrvCenters”，因为它们不在同一类型层次结构中，或者它们之间没有有效的一对一外键关系和匹配的主键。

好的

为什么这个类工作:)

```
/// <summary>
/// The workplace setting.
/// </summary>
[Table("SrvCenters")]
public class WorkplaceSetting
{
    /// <summary>
    /// Gets or sets the srv center id.
    /// </summary>
    [Key]
    public int SrvCenterId { get; set; }

    /// <summary>
    /// Gets or sets the net ident type id.
    /// </summary>
    public int NetIdentTypeId { get; set; }

    /// <summary>
    /// Gets or sets the help net ident type.
    /// </summary>
    [ForeignKey("NetIdentTypeId")]
    public virtual HelpNetIdentType HelpNetIdentType { get; set; }

    /// <summary>
    /// Gets or sets the w p_ auto start exec.
    /// </summary>
    public int WP_AutoStartExec { get; set; }

    /// <summary>
    /// Gets or sets the w p_ button mask.
    /// </summary>
    public int WP_ButtonMask { get; set; }

    /// <summary>
    /// Gets or sets the w p_ show info.
    /// </summary>
    public int WP_ShowInfo { get; set; }

    /// <summary>
    /// Gets or sets the w p_ show message.
    /// </summary>
    public int WP_ShowMessage { get; set; }

    /// <summary>
    /// Gets or sets the w p_ time between msg.
    /// </summary>
    public int WP_TimeBetweenMsg { get; set; }

    /// <summary>
    /// Gets or sets the w p_ time in idle.
    /// </summary>
    public int WP_TimeInIdle { get; set; }

    /// <summary>
    /// Gets or sets the w p_ time in resolve.
    /// </summary>
    public int WP_TimeInResolve { get; set; }

    /// <summary>
    /// Gets or sets the w p_ time show msg.
    /// </summary>
    public int WP_TimeShowMsg { get; set; }

    /// <summary>
    /// Gets or sets the description.
    /// </summary>
    public string Description { get; set; }

    /// <summary>
    /// Gets or sets the active.
    /// </summary>
    public int Active { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:15:34.013

如果要在两个实体之间共享表，则必须使用[TPH 继承](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)或[表拆分。](https://stackoverflow.com/questions/5390172/how-to-map-table-splitting-in-ef-code-first)

# android - Activity销毁后我继续收到消息

> ID：14020795
> 
> 赞同：0
> 
> 时间：2012-12-24T11:30:27.113
> 
> 标签：android, handler, messages

大家好，圣诞快乐。

请看这段代码。

如您所见，有一个从服务接收消息的处理程序。

当 Activty 被销毁时，我负责销毁 Service，但似乎 Service 仍在向 Handler 发送回消息（我不认为是这种情况）。

由于某种原因，处理程序似乎还活着并发布：

```
 Log.e("","MESSAGGIO RICEVUTO"); 
```

就像它继续接收消息一样。

谢谢你的帮助！！！

```
private String url;
    private String url2;
private WebView browser;
private HttpClient client;
private List<Forecast> forecasts=new ArrayList<Forecast>();
public String responseBody;
    public ArrayList<Stock> lt;
    public LocalService mService;
    boolean mBound = false;
    public MyAdapter myAdap;
    public Messenger messenger;
    public Grab g;
    public Handler handler;
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        url2=getString(R.string.url2);
        Log.e("", "arrivo a prima di forecast");
        g = new Grab(url2);
        String s = g.vai();
        Log.e("", s);
        Log.e("", "passo oltre l'invocazione al grab");
        lt = new MyParser(s).parseResp();
        ListView lv = (ListView)findViewById(android.R.id.list);
        myAdap= new MyAdapter(lt, this); 
        lv.setAdapter(myAdap);
        lv.setOnItemClickListener(new myListener());

        handler=new Handler() {
            @Override
            public void handleMessage(Message msg) {
            Log.e("","MESSAGGIO RICEVUTO");
            lt = mService.ritira();
            myAdap.notifyDataSetChanged();
            g.fermaGrab();
            }
            };
        messenger = new Messenger(handler);         
    } 
```

这是服务：

```
public class LocalService extends Service {
    public Messenger messenger;
public int i;
   public ArrayList<Stock> al;
    public DefaultHttpClient client;
// Binder given to clients
    private final IBinder mBinder = new LocalBinder();
    public Task t;

    /**
     * Class used for the client Binder.  Because we know this service always
     * runs in the same process as its clients, we don't need to deal with IPC.
     */
    public class LocalBinder extends Binder {
        LocalService getService() {
            // Return this instance of LocalService so clients can call public methods
            return LocalService.this;
        }
    }

    @Override
    public IBinder onBind(Intent intent) {
        Log.e("", "sono nel service");      
        messenger = (Messenger) intent.getExtras().get("messenger");
        return mBinder;
    }  

    class Task extends AsyncTask<Void, String, Void> {
        @Override
        protected Void doInBackground(Void... unused) {     
        Log.e("Sono nel AsyncTask del Service", Integer.toBinaryString(i));
 /////////INIZIA IL CASINO
        client=new DefaultHttpClient();
        for(int in=0;;in++)
        {       
        for(int i=0;i<al.size();i++)
        {
            String srt="";
            String url     =getString(R.string.dettaglio1).concat("'"+al.get(i).simbolo+"'").concat(getString(R.string.    dettaglio2));

            HttpGet getMethod=new HttpGet(url);

            try {
                ResponseHandler<String> responseHandler=new BasicResponseHandler();
                srt=client.execute(getMethod, responseHandler);
                //Log.e("", "passo per GrabXML");
                int inizio = srt.indexOf("<company data=\"");
                int fine = srt.indexOf("\"/>",inizio+15);
                String s =srt.substring(inizio+15,fine).substring(0, 10);

                al.get(i).setNome(s);
                Log.e("",al.get(i).nome);
                //Log.e("",Integer.toString((al.get(i).nome.length())));

                inizio = srt.indexOf("<last data=\"");
                fine = srt.indexOf("\"/>",inizio+12);
                al.get(i).setPrezzo(srt.substring(inizio+12,fine));
                //Log.e("",Float.toString(al.get(i).prezzo));

                inizio = srt.indexOf("<perc_change data=\"");
                fine = srt.indexOf("\"/>",inizio+19);
                al.get(i).setCambiamento(srt.substring(inizio+19,fine));
                //Log.e("",Float.toString(al.get(i).cambiamento));
            }
            catch (Throwable t) {
                android.util.Log.e("grabXML", "Exception fetching data", t);
                    }           
            }
/////////INIZIA IL CASINO
        Collections.sort(al, new Comparator<Stock>(){
              public int compare(Stock s1, Stock s2) {
                return s1.nome.compareToIgnoreCase(s2.nome);
              }
            });         

        Message msg=Message.obtain();

        try {
            messenger.send(msg);
        } catch (RemoteException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        SystemClock.sleep(6000);

        }
        /////////FINISCE IL CASINO      

        }

        @Override
        protected void onProgressUpdate(String... unused) {
            }

        @Override
        protected void onPostExecute(Void unused) {     
            }

    }

    public void stop() {
        Log.e("", "passo per lo stop del Service");
        t.cancel(true);
        client.getConnectionManager().shutdown();
        return;
    }

} 
```

我在 onDestroy() 中关闭了主 Activity 上的服务：

```
 protected void onDestroy() {
    Log.e("ondestroy","passo per ondestroy"); 
    //handler.removeMessages();
    mService.stop();
    g.fermaGrab();
    handler.removeMessages(333); 
    //g=null;
    super.onDestroy();   
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:20:17.557

由于此无限循环，您将继续从您的服务接收消息

```
class Task extends AsyncTask<Void, String, Void> {
        @Override
        protected Void doInBackground(Void... unused) {  
            for (int in = 0;; in++) { 
               // .. Other definition

               Message msg = Message.obtain();

               try {
               messenger.send(msg);
               } catch (RemoteException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
               }
               SystemClock.sleep(6000);

            }
        }
} 
```

无条件 for 循环正在执行无限过程，因此您的服务线程仍在向您发送消息，对吗？

只需放入`!isCancelled()`您的循环，您现在就可以停止您的循环并`Asynctask`

```
for (int in = 0; !isCancelled() ; in++) { 
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:49:04.963

请看这个。这不是你的问题的答案。它会帮助你得到答案，

[如何停止处理程序？](https://stackoverflow.com/questions/5038038/how-to-stop-the-handler)

# objective-c - 苹果会批准这个代码吗

> ID：14020796
> 
> 赞同：-1
> 
> 时间：2012-12-24T11:30:28.470
> 
> 标签：objective-c, ios, xcode

我正在使用以下代码来获取平台。我的疑问是苹果会批准该应用程序吗？

```
- (NSString *) platform{
    size_t size;
    sysctlbyname("hw.machine", NULL, &size, NULL, 0);
    char *machine = malloc(size);
    sysctlbyname("hw.machine", machine, &size, NULL, 0);
    NSString *platform = [NSString stringWithUTF8String:machine];
    free(machine);
    return platform;
}

- (NSString *) platformString{
    NSString *platform = [self platform];
    if ([platform isEqualToString:@"iPhone1,1"])    return @"iPhone 1G";
    if ([platform isEqualToString:@"iPhone1,2"])    return @"iPhone 3G";
    if ([platform isEqualToString:@"iPhone2,1"])    return @"iPhone 3GS";
    if ([platform isEqualToString:@"iPhone3,1"])    return @"iPhone 4";
    if ([platform isEqualToString:@"iPhone3,3"])    return @"Verizon iPhone 4";
    if ([platform isEqualToString:@"iPhone4,1"])    return @"iPhone 4S";
    if ([platform isEqualToString:@"iPod1,1"])      return @"iPod Touch 1G";
    if ([platform isEqualToString:@"iPod2,1"])      return @"iPod Touch 2G";
    if ([platform isEqualToString:@"iPod3,1"])      return @"iPod Touch 3G";
    if ([platform isEqualToString:@"iPod4,1"])      return @"iPod Touch 4G";
    if ([platform isEqualToString:@"iPad1,1"])      return @"iPad";
    if ([platform isEqualToString:@"iPad2,1"])      return @"iPad 2 (WiFi)";
    if ([platform isEqualToString:@"iPad2,2"])      return @"iPad 2 (GSM)";
    if ([platform isEqualToString:@"iPad2,3"])      return @"iPad 2 (CDMA)";
    if ([platform isEqualToString:@"i386"])         return @"Simulator";
    if ([platform isEqualToString:@"x86_64"])       return @"Simulator";
    return platform;
} 
```

如果我的问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:34:27.397

“苹果会批准这个”之类的问题无法确定。只有苹果知道他们会做什么，他们不会批准什么。甚至有些应用程序由于某些其他应用程序包含的原因/功能而被拒绝，但前者被批准...

但是，这段代码看起来不错，它没有使用任何私有 API，也没有背书从用户那里收集私人信息等非法活动，因此它最终可能会被批准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:36:07.260

检查这篇文章：

[https://stackoverflow.com/a/3365391/1051734](https://stackoverflow.com/a/3365391/1051734)

基本上：

```
[[UIDevice currentDevice] platformType]   // ex: UIDevice4GiPhone
[[UIDevice currentDevice] platformString] // ex: @"iPhone 4G" 
```

# android - 如何创建一个与图像和文本混合在一起的 HTML 视图以在 android 中进行 XML 解析

> ID：14020797
> 
> 赞同：0
> 
> 时间：2012-12-24T11:30:33.617
> 
> 标签：android

我正在从 URL 中检索以下内容以进行 XML 解析。我的问题出在`<description>`标签中，我想`<description>`在 HTML 视图中查看标签的内容。如果它只是一个文本，那么我可以使用`Html.fromHtml()`方法将其格式化为 HTML。但它与图像标签和文本混合在一起。我不为它创建视图。

```
<item>
<title>Delhi Protests: Senior leaders to meet today to finalise strategy</title>
<link></link>
<description>The senior-most leaders of the opposition will meet today to decide the party's strategy on the massive protests in Delhi demanding justice for the medical student...&lt;img width='1' height='1' src='http://xxx.com.feedsportal.com/c/33805/f/606695/s/26e4bf01/mf.gif' border='0'/&gt;&lt;div class='mf-viral'&gt;&lt;table border='0'&gt;&lt;tr&gt;&lt;td valign='middle'&gt;&lt;a href="http://share.feedsportal.com/viral/sendEmail.cfm?lang=en&amp;title=Students+Protests%3A+Senior+leaders+to+meet+today+to+finalise+strategy&amp;link=http%3A%2F%2Fwww.someweb.com%2Farticle%2Findia%2Fdelhi-protests-leaders-to-meet-today-to-finalise-strategy-309096" target="_blank"&gt;&lt;img src="http://res3.feedsportal.com/images/emailthis2.gif" border="0" /&gt;&lt;/a&gt;&lt;/td&gt;&lt;td valign='middle'&gt;&lt;a href="http://res.feedsportal.com/viral/bookmark.cfm?title=Delhi+Protests%3A+Senior+leaders+to+meet+today+to+finalise+strategy&amp;link=http%3A%2F%2Fwww.somewebsite.com%2Farticle%2Findia%2Fdelhi-protests-senior-leaders-to-meet-today-to-finalise-strategy-309096" target="_blank"&gt;&lt;img src="http://res3.feedsportal.com/images/bookmark.gif" border="0" /&gt;&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;&lt;a href="http://da.feedsportal.com/r/151883806109/u/49/f/606695/c/33805/s/26e4bf01/a2.htm"&gt;&lt;img src="http://da.feedsportal.com/r/151883806109/u/49/f/606695/c/33805/s/26e4bf01/a2.img" border="0"/&gt;&lt;/a&gt;&lt;img width="1" height="1" src="http://pi.feedsportal.com/r/151883806109/u/49/f/606695/c/33805/s/26e4bf01/a2t.img" border="0"/&gt;&lt;img src="http://feeds.feedburner.com/~r/NdtvNews-TopStories/~4/Dchb80wBdEY" height="1" width="1"/&gt;</description>

<category domain="">india</category>
<pubDate>Mon, 24 Dec 2012 06:28:35 GMT</pubDate>
<guid isPermaLink="false">309096</guid>
<feedburner:origLink>http://ndtv.com.feedsportal.com/c/33805/f/606695/s/26e4bf01/l/0L0Sndtv0N0Carticle0Cindia0Cdelhi0Eprotests0Esenior0Ebjp0Eleaders0Eto0Emeet0Etoday0Eto0Efinalise0Estrategy0E30A90A96/story01.htm</feedburner:origLink> 
```

任何帮助表示赞赏....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:02:27.930

您可以使用任何可用的 html 解析器，例如[`HtmlCleaner`](http://htmlcleaner.sourceforge.net/)或[`JSoup`](http://jsoup.org/). 这些可以从传递的内容中清除图像标签、url 并返回纯文本。

看看[HtmlCleaner 文档](http://htmlcleaner.sourceforge.net/doc/index.html)

# c# - WPF路径动画

> ID：14020798
> 
> 赞同：5
> 
> 时间：2012-12-24T11:30:34.647
> 
> 标签：c#, wpf, animation

我创建了以下 XAML

```
<Canvas Background="Gray" Margin="10">    
    <Ellipse x:Name="Node1" Width="20" Height="20" Fill="AliceBlue" Canvas.Left="38" Canvas.Top="136" />
    <Ellipse x:Name="Node2" Width="20" Height="20" Fill="AliceBlue" Canvas.Left="290" Canvas.Top="136" />
    <Ellipse x:Name="object" Width="10" Height="20" Fill="Black" Canvas.Left="43" Canvas.Top="125" />
    <Path Stroke="Black" StrokeThickness="1">
        <Path.Data>
            <PathGeometry>
                <PathGeometry.Figures>
                    <PathFigureCollection>
                        <PathFigure StartPoint="50,145">
                            <PathFigure.Segments>
                                <PathSegmentCollection>
                                    <LineSegment Point="100,100" />
                                    <LineSegment Point="250,100" />
                                    <LineSegment Point="300,145" />
                                </PathSegmentCollection>
                            </PathFigure.Segments>
                        </PathFigure>
                    </PathFigureCollection>
                </PathGeometry.Figures>
            </PathGeometry>
        </Path.Data>
    </Path>
</Canvas> 
```

如您所见，我创建了 2 个椭圆节点。连接两个节点的路径和位于节点 1 的对象。我在这里要做的就是沿通往节点 2 的路径为节点 1 处的对象设置动画。

**我正在尝试使用代码**制作动画，因为我希望动画在单击 node2 时发生。我一直在努力解决 DoubleAnimation、MatrixAnimation、storyboard.. 非常混乱。请分享有关如何实现这一目标的知识。我希望相同的代码适用于曲线和复杂路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:45:50.673

你需要`DoubleAnimationUsingPath` [（参考）](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.doubleanimationusingpath.aspx)：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Class="WpfApplication1.MainWindow"
    x:Name="Window"
    Title="MainWindow"
    Width="640" Height="480">
    <Window.Resources>
        <Storyboard x:Key="Storyboard1">
            <DoubleAnimationUsingPath Duration="0:0:2" Source="X" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="object">
                <DoubleAnimationUsingPath.PathGeometry>
                    <PathGeometry Figures="M2,10 L52,-35 L202,-35 L252,10"/>
                </DoubleAnimationUsingPath.PathGeometry>
            </DoubleAnimationUsingPath>
            <DoubleAnimationUsingPath Duration="0:0:2" Source="Y" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)" Storyboard.TargetName="object">
                <DoubleAnimationUsingPath.PathGeometry>
                    <PathGeometry Figures="M2,10 L52,-35 L202,-35 L252,10"/>
                </DoubleAnimationUsingPath.PathGeometry>
            </DoubleAnimationUsingPath>
        </Storyboard>
    </Window.Resources>

    <Grid x:Name="LayoutRoot">
        <Canvas Background="Gray" Margin="10">    
    <Ellipse x:Name="Node1" Width="20" Height="20" Fill="AliceBlue" Canvas.Left="38" Canvas.Top="136" />
    <Ellipse x:Name="Node2" Width="20" Height="20" Fill="AliceBlue" Canvas.Left="290" Canvas.Top="136" />
    <Ellipse x:Name="object" Width="10" Height="20" Fill="Black" Canvas.Left="43" Canvas.Top="125" RenderTransformOrigin="0.5,0.5" MouseLeftButtonDown="object_MouseLeftButtonDown" >
        <Ellipse.RenderTransform>
            <TransformGroup>
                <ScaleTransform/>
                <SkewTransform/>
                <RotateTransform/>
                <TranslateTransform/>
            </TransformGroup>
        </Ellipse.RenderTransform>
    </Ellipse>
    <Path Stroke="Black" StrokeThickness="1">
        <Path.Data>
            <PathGeometry>
                <PathGeometry.Figures>
                    <PathFigureCollection>
                        <PathFigure StartPoint="50,145">
                            <PathFigure.Segments>
                                <PathSegmentCollection>
                                    <LineSegment Point="100,100" />
                                    <LineSegment Point="250,100" />
                                    <LineSegment Point="300,145" />
                                </PathSegmentCollection>
                            </PathFigure.Segments>
                        </PathFigure>
                    </PathFigureCollection>
                </PathGeometry.Figures>
            </PathGeometry>
        </Path.Data>
    </Path>
</Canvas>
</Grid>
</Window> 
```

然后从代码中调用：

```
private void object_MouseLeftButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
{
    Storyboard animation = this.TryFindResource("Storyboard1") as Storyboard;
    animation.Begin();
} 
```

* * *

[编辑] 我认为您在这里缺少关键工具：[Blend](http://blendinsider.com/)。至于在代码中创建动画，如果你看 XAML 元素，可以将它们视为序列化的类，可以体现在代码中，即

```
 Storyboard sb = new Storyboard();
    DoubleAnimationUsingPath ani_2 = new DoubleAnimationUsingPath();
    ani_2.Duration = new Duration(new TimeSpan(0, 0, 2));

    PathGeometry pg = new PathGeometry();
    pg.Figures.Add(new PathFigure());

    ani_2.PathGeometry.AddGeometry(pg); 
```

等等。但是（IMAO）直接从代码创建这些是相当痛苦的。这完全取决于应用程序。[在这里](http://expression.microsoft.com/en-us/cc197141)查看Blend 的起点。

# jquery - Jquery Mobile点击事件不起作用？

> ID：14020801
> 
> 赞同：0
> 
> 时间：2012-12-24T11:31:08.157
> 
> 标签：jquery, jquery-mobile

我正在使用 jquery mobile 并遇到问题。点击作品，

```
$(document).delegate('#id', 'click', function () {
        alert('Tapped');
}); 
```

但是taphold没有，

```
$(document).delegate('#id', 'taphold', function () {
        alert('Tapped');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:01:40.597

现在它起作用了。我只需要将这个事件放在 pageshow 中，例如，

```
 $(document).delegate('div[data-role*="page"]', 'pageshow', function () {
        $(document).delegate('#id', 'taphold', function (evt) {
        });
    }); 
```

# iphone - 如何使用 iPhone 相机实时翻译图像的文本？

> ID：14020805
> 
> 赞同：1
> 
> 时间：2012-12-24T11:31:30.170
> 
> 标签：iphone, ios, xcode, camera

我正在开发一个需要使用相机实时翻译图像文本的应用程序。`iphone`有没有办法实现它？任何 sdk 或教程都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T11:52:15.470

我的建议将是以下的组合：

*   用于从图像中获取文本的开源 Tesseract OCR 引擎（此处是最新的 iOS 包装器：[https](https://github.com/ldiqual/tesseract-ios) ://github.com/ldiqual/tesseract-ios ）
*   此问题中讨论的翻译服务之一：[https ://stackoverflow.com/questions/6151668/alternative-to-google-translate-api](https://stackoverflow.com/questions/6151668/alternative-to-google-translate-api)
*   例如，关于如何获得带有叠加层的实时摄像机视图的教程：http: [//www.musicalgeometry.com/? p=1273](http://www.musicalgeometry.com/?p=1273)

请注意，这些只是关于如何以尽可能快的速度做到这一点的想法。一些提供实时翻译的应用程序甚至会尝试找到合适的字体并将翻译后的文本显示在与原始文本完全相同的位置。如果不投入大量工作并开发自己的 OCR 引擎，恐怕这是不可能的。

希望这可以帮助。

# java - 获取 Google Maps API v2 的 API 密钥时出现“您的输入无效”错误

> ID：14020806
> 
> 赞同：4
> 
> 时间：2012-12-24T11:31:30.170
> 
> 标签：java, android, google-maps

我正在为谷歌地图做一个示例应用程序。我正在使用`/extras/google/google_play_services/samples/maps`在 android 目录中给出的相同示例代码。

我正在尝试创建一个 API 密钥以在示例应用程序中使用。我指的是为 Google Maps Android API v2 服务和[Google Maps Android API v2 docs](https://developers.google.com/maps/documentation/android/start)[创建和获取 API 密钥](http://android-er.blogspot.in/2012/12/create-and-obtain-api-key-for-google.html)，我在 Google 控制台页面上收到错误消息。

输入MD5 和包名（as `CF:7C:E3:40:8E:SA:2B:31:E8:E7:ED:31:7A:8A:D7:46;com.test.myapp`）后，我收到***“您的输入无效”***错误。我正在正确执行所有步骤（直到出现此错误）（正如我给定的 URLS 所说），但不知道为什么会出现此错误。

请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-24T12:00:34.113

**您正在放置密钥库的 MD5 指纹，但此 api 需要 SHA1。**

参考这张图片。

![在此处输入图像描述](../Images/eb5ba26b0313e4a35b1002797378e0bf.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T09:37:41.200

首先转到 jdk 文件夹 bin 表单，输入以下命令

```
keytool.exe -v -list  -keystore "C:\Users\NewPC\.android\debug.keystore" -storepass android -keypass android 
```

您将获得包括 sha1 指纹在内的所有键的详细输出，然后按照 google api 网站中的步骤进行操作。
sha1 看起来像这样

```
B9:BC:1A:87:5A:9E:29:8A:DE:BD:41:19:63:A1:FD:60:04:EA:83:4A 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-24T11:35:13.860

Google 现在停止了 API 密钥生成，您可以使用新的 V3 版本的 google api，并且您可以使用您的帐户启用所有您想要的服务。

# jquery - 无法将变量添加到成功函数

> ID：14020810
> 
> 赞同：2
> 
> 时间：2012-12-24T11:32:16.320
> 
> 标签：jquery, ajax

这是我的ajax jquery：.......

```
$(function () {
    $(".follow").click(function () {
        var element = $(this);
        var I = element.attr("id");
        var info = 'id=' + I;

        $.ajax({
            type: "POST",
            url: "follow.php",
            data: info,
            success: function () {
                $('.follow' + I).fadeOut(200).hide();
                $('.following' + I).fadeIn(200).show();
            }
        });
        return false;
    });
}); 
```

我的html是：

```
echo "<tr>";

    echo '<td>'. $table["username"]. '</td>'.'<td>'.'<a href="#" id="'.$table['id'].'" class="follow">'.'</a>' . '<a href="#" id="'.$table['id'].'" class="following" style="display:none">'.'</a>' . '</td>';

    echo "<tr>"; 
```

（在一个while循环中）

成功后，我正在尝试淡出跟随按钮（及其 ID）并将其替换为具有相同 ID 的跟随按钮 - 但是在使用 (+ I) 时它似乎不起作用？

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T11:45:24.283

~~如果您将一些 HTML 连同您的代码一起发布，以便我们了解这应该如何工作，将会有所帮助。~~

~~无论如何，从我在您的代码中看到的内容来看，我*认为*它看起来像这样：~~
看起来我推断的标记是正确的，您的标记归结为：

```
<a class="follow" id="foobar">Follow</a>
<a class="following" id="foobar">Following</a> 
```

如果你想选择带有 class`.following`和 ID的元素`foobar`，你可以写`$('#foobar.following')`or `$('.following#foobar')`。因此，您的代码必须调整为：

```
$('.follow#' + I).fadeOut(200).hide();
$('.following#' + I).fadeIn(200).show(); 
```

但是，这样做还有一个更根本的问题：ID 唯一地标识一个元素，这意味着**您不能**在同一页面上拥有两个具有相同 ID 的元素。上面的 HTML 无效，并且选择器被类选择器过度限定。更好的解决方案是使用`data-`属性来识别关注/关注元素属于哪个用户：

```
<a class="follow" data-userid="foobar">Follow</a>
<a class="following" data-userid="foobar">Following</a> 
```

然后，您将存储数据属性而不是 ID：

```
var I = element.data("userid"); 
```

并使用 data 属性进行选择：

```
$('.follow[data-userid=' + I + ']').fadeOut(200).hide();
$('.following[data-userid=' + I + ']').fadeIn(200).show(); 
```

如前所述，您实际上不再需要选择`.follow`元素。只需使用`element`！

```
element.fadeOut(200).hide();
$('.following[data-userid=' + I + ']').fadeIn(200).show(); 
```

# asp.net - 将 div 数据从 js 传递到 aspx.cs webmethod

> ID：14020814
> 
> 赞同：1
> 
> 时间：2012-12-24T11:32:46.677
> 
> 标签：asp.net, jquery

当我检查时，`checkbox`我想将 div 中的数据发送到用aspx 代码隐藏`webmethod`写在里面的数据。`Webservice`我的js是这样的：

```
if ($(this).is(':checked')) {
                if (editorContent != "") {
                    if (!($("#divCustomTemplateContent1:contains('<html>')"))) {
                        editorContent = "<html><head></head><body>" + editorContent + "</body></html>";
                    }

                    $.ajax({
                        type: "POST",
                        url: "3.aspx/AddorRemoveViewInBrowser",
                        contentType: "application/json; charset=utf-8",
                        data: "{'html':'" + encodeURIComponent(editorContent) + "',isAddorRemove:'add'}",
                        dataType: "json",
                        success: function (returndata) {
                            alert(returndata.d);
                            $('#divCustomTemplateContent1').html(returndata.d);
                        }
                    });
                }
} 
```

这里我的问题是当 div 中的数据是这样的

```
<table bgcolor="#8da2b2" border="0" cellpadding="0" cellspacing="0" width="100%">
    <tbody>
        <tr>
            <td width="100%" align="center">
                <table border="0" cellpadding="0" cellspacing="0" width="581">
                    <tbody>
                        <tr>
                            <td bgcolor="#ffffff" align="center" width="581">
                                <table bgcolor="#ffffff" border="0" cellpadding="0" cellspacing="0" style="margin-top: 20px;" width="581">
                                    <tbody>
                                        <tr>
                                            <td bgcolor="#b73224" height="110">
                                                <table border="0" cellpadding="0" cellspacing="0" style="width: 581px;">
                                                    <tbody>
                                                        <tr>
                                                            <td width="581" height="110" align="left">
                                                                <img src="/App_Themes/Main/Images/Ec/TemplateImages/3s_header.jpg" border="0" alt="XYZ Company" width="581" height="110">
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table border="0" cellpadding="0" cellspacing="0" width="550">
                                    <tbody>
                                        <tr>
                                            <td align="left" valign="top" class="mainbar" width="550">
                                                <table border="0" cellpadding="0" cellspacing="0" width="550">
                                                    <tbody>
                                                        <tr>
                                                            <td style="font-family: Tahoma, Arial; font-size: 12px; color: #000000; padding-top: 15px;" valign="top" align="left">
                                                                <h2 style="font-size: 18px; border-left: 10px solid #a02f27; padding-top: 0; padding-right: 0;
                                                                    padding-bottom: 0; padding-left: 7px; margin: 0px;">
                                                                    Lorem ipsum dolor sit amet conse ct etuer adipiscing elit</h2>
                                                                <p style="color: #333333; margin-top: 10px; margin-left: 0; margin-bottom: 20px;
                                                                    margin-right: 0;">
                                                                    Donec imperdiet, nibh sit amet pharetra placerat, tortor purus condimentum lectushttp://tinyurl.com/d5rel77,
                                                                    at dignissim nibh velit vitae sem. Nunc <a href="http://some-site.com/" style="color: #344692;">
                                                                        condimentum blandit</a> tortorphasellus facilisis neque vitae purus.</p>
                                                                <p style="color: #333333; margin-top: 0; margin-left: 0; margin-bottom: 20px; margin-right: 0;">
                                                                    Aliquam facilisis nisl in nisi. Ut ultricies massa eget est. Donec eget orci eget
                                                                    urna aliquam egestas. Nulla vitae felis. <a href="http://some-site.com/" style="color: #344692;">
                                                                        Maecenas bibendum</a>, nunc eu aliquet ultricies, massa massa aliquet est, nec
                                                                    dignissim nisl ante eget lectus.</p>
                                                                <p style="margin-top: 0; margin-left: 0; margin-bottom: 5px; margin-right: 0; width: 100%;
                                                                    text-align: right; padding: 0;">
                                                                    <a href="#top" style="color: #344692; font-size: 11px; margin-top: 0; margin-left: 4px;
                                                                        margin-bottom: 0; margin-right: 0;">Back to top</a></p>
                                                                <img src="/App_Themes/Main/Images/Ec/TemplateImages/hr-big.gif" border="0" alt="hr" width="550" height="10" style="display: block;">
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <table border="0" cellpadding="0" cellspacing="0" width="551">
                                                    <tbody>
                                                        <tr>
                                                            <td style="font-family: Tahoma, Arial; font-size: 12px; color: #000000; padding-top: 15px;" valign="top" align="left">
                                                                <h2 style="font-family: Arial; font-size: 18px; border-left: 10px solid #a02f27;
                                                                    padding-top: 0; padding-right: 0; padding-bottom: 0; padding-left: 7px; margin: 0px;">
                                                                    Fermentum quam donec imperde lorem ipsum dolar amet consect</h2>
                                                                <p style="color: #333333; margin-top: 15px; margin-left: 0; margin-bottom: 20px;
                                                                    margin-right: 0;">
                                                                    <img src="/App_Themes/Main/Images/Ec/TemplateImages/main-content-inline-small.jpg" border="0" alt="Main Content Inline Small" hspace="10" width="147" height="147" align="left">Aliquam facilisis nisl in nisi. Ut ultricies massa eget est.
                                                                    Donec eget orci eget urna aliquam egestas. Nulla vitae felis. Maecenas bibendum,
                                                                    nunc eu aliquet ultricies, massa massa aliquet est, nec dignissim nisl ante eget
                                                                    lectus.Aliquam facilisis nisl in nisi. Ut ultricies massa eget est. Donec eget orci
                                                                    eget urna aliquam egestas. Nulla vitae felis. Maecenas bibendum, nunc eu aliquet
                                                                    ultricies, massa massa aliquet est, nec dignissim nisl ante eget lectus.%%%%last_name%%%%</p>
                                                                <p style="margin-top: 0; margin-left: 0; margin-bottom: 5px; margin-right: 0; width: 100%;
                                                                    text-align: right; padding: 0;">
                                                                    <a href="#top" style="color: #344692; font-size: 11px; margin-top: 0; margin-left: 4px;
                                                                        margin-bottom: 0; margin-right: 0;">Back to top</a></p>
                                                                <img src="/App_Themes/Main/Images/Ec/TemplateImages/hr-big.gif" border="0" alt="hr" width="550" height="10" style="display: block;">
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table bgcolor="#8da2b2" border="0" cellpadding="0" cellspacing="0" width="581">
                                    <tbody>
                                        <tr>
                                            <td style="font-family: Arial; font-size: 11px; font-weight: normal; color: #333333;" align="center" valign="bottom" height="100">
                                                <p style="margin-top: 0; margin-left: 0; margin-bottom: 20px; margin-right: 0; text-align: center;">
                                                    XYZ Company and the XYZ Company Logo are registered trademarks of <span>XYZ Company
                                                        Corp</span>.<br>
                                                    XYZ Company Corp - 123 Some Street, City, ST 99999\. ph +1 4 1477 89 745</p>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table> 
```

然后 webmethod 根本没有被调用。当我为 div 提供简单数据时，就不会出现错误。

```
 [System.Web.Services.WebMethod]
        public static string AddorRemoveViewInBrowser(string html, string isAddorRemove)
        {
            string returnHtml = string.Empty;
            if (isAddorRemove == "add")
            {
                CampaignManager ocampaignmanger = new CampaignManager();
                returnHtml = ocampaignmanger.AddViewInbrowser(html);
            }
            else
            {
                CampaignManager ocampaignmanger = new CampaignManager();
                returnHtml = ocampaignmanger.RemoveViewInbrowser(html);
            }
            return returnHtml;
        } 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:43:55.167

首先，您需要知道您已指定`contentType`和`dataType`to `json`。因此，在您的情况下，发送到服务器以及从服务器发回的数据只能是 json 数据。

做这样的改变。

```
$.ajax({
    type: "POST",
    ....
    data: {'html':encodeURIComponent(editorContent),'isAddorRemove':'add'},
    ....
}); 
```

其次，您从需要使用的服务器发送纯字符串对象`JavaScriptSerializer or JsonConvert.SerializeObject(json.NET)`

# java - Hibernate 是否总是加载关联的对象，即使它可以为空？

> ID：14020819
> 
> 赞同：5
> 
> 时间：2012-12-24T11:33:30.993
> 
> 标签：java, hibernate, annotations, many-to-one

我有一个关于休眠的问题。

我有两个具有多对一关系的对象：

例如：对象 1：

```
 public class Person {

 @Basic
 @Column(length = 50)
 protected String name;

 @NotFound(action=NotFoundAction.IGNORE)
 @ManyToOne(fetch = FetchType.EAGER)
 @JoinColumn(name = "groupCode", referencedColumnName = "code", updatable=false)
 protected Group group;

 ...all the getters and setters...
 } 
```

对象 2：

```
 public class Group {
  @Id
  @Basic
  @Column(length = 3, nullable = false)
  protected String code;

  @Basic
  @Column(length = 30, nullable = false)
  protected String groupName;

   @Basic
   @Column(precision = 15, scale = 0)
   protected long exampleFieldId;

   ...rest of code....
  } 
```

我试图使这个例子尽可能简单。我的问题是 Person 上的关联对象（组）可以为空。目前，当我加载特定的 Person 并引发异常时，Hibernate 会加载 Group 的实例，因为它无法将 exampleFieldId 设置为 null（因为它是原始类型）。

我可以通过将 long 更改为 Long 来停止此错误，但是，我会认为 Person 上的 Group 对象应该为空，因此首先没有加载 Group 对象？

有谁知道 Hibernate 是否加载关联的对象而不管它是否被允许为空，或者我是否错过了一些重要的注释？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T11:52:45.507

正如 Firo 所说：

> 您是否禁用了延迟加载并将 fetchmnode 设置为加入，因为 NHibernate 必须获取它们以决定是否应该将其无效，并且它不能仅使用 id 来决定

即使它在 NHibernate 中，这似乎与您遇到的问题相同。值得检查！

[为什么 Hibernate 会尝试加载“not-found=ignore”关联？](https://stackoverflow.com/questions/13085038/why-does-hibernate-attempt-to-load-not-found-ignore-associations)

**编辑：**可能是你错过了`@Fetch(FetchMode.JOIN)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:14:19.180

我终于弄清楚了这里发生了什么，问题不在于 Hibernate。

在代码的深处，我有一个将空字符串转换为空字符串的 UserType，这意味着*groupCode*实际上永远不会为空。因此，Hibernate 假设有一个要加载的子对象。

*在groupCode*上方添加注释 @Type(type="org.hibernate.type.StringType")避免了这个问题。

有趣的是，我误解了@NotFound(action=NotFoundAction.IGNORE) 的使用。

我原以为它是用来解决我上面描述的问题，但它实际上定义了如果设置了 groupCode 但没有相应的 Group 该怎么办；不是当 groupCode 为空时该做什么。

其他人也可能为此而堕落。

# java - NullpointerException 与连接对象创建 SQL 语句

> ID：14020824
> 
> 赞同：1
> 
> 时间：2012-12-24T11:33:45.297
> 
> 标签：java, servlets, jdbc, nullpointerexception

这行代码我得到一个空指针异常

```
Statement stmt = conn.createStatement(); 
```

几天前使用它的 servlet 工作正常，我从我的存储库中恢复了我的类的先前版本，但它仍然无法正常工作，所以我猜这可能是服务器端问题。

但是，为了确保我想获得尽可能多的信息，最好的调试方法是什么。

我试过使用

```
 e.toString() 
```

但是，这只会给出“nullpointerexception”消息。

**堆栈跟踪**

> *   [24/Dec/2012:11:59:24] 警告 (27454): CORE3283: stderr: java.lang.NullPointerException
> *   [24/Dec/2012:11:59:24] 警告 (27454): CORE3283: stderr: at org.ari.DatabaseLogic.getData(DatabaseLogic.java:80)
> *   [24/Dec/2012:11:59:24] 警告 (27454): CORE3283: stderr: at org.ari.ARIServlet.doPost(ARIServlet.java:72)
> *   [24/Dec/2012:11:59:24] 警告 (27454): CORE3283: stderr: at javax.servlet.http.HttpServlet.service(HttpServlet.java:807)
> *   [24/Dec/2012:11:59:24] 警告 (27454): CORE3283: stderr: at javax.servlet.http.HttpServlet.service(HttpServlet.java:908)
> *   [24/Dec/2012:11:59:24] 警告 (27454): CORE3283: stderr: at org.apache.catalina.core.StandardWrapperValve.invokeServletService(StandardWrapperValve.java:771)

**数据库逻辑类**

```
 public class DatabaseLogic
{
    private static Connection conn;

    public static void openDatabase() throws IOException, SQLException,
            NamingException
    {

        // context class gives naming standards of the surrounding environment
        // of the servlet i.e. the web server ,
        // allowing the servlet to interface with the web servers resources
        Context initialContext = new InitialContext();
        Context envContext = (Context) initialContext.lookup("java:comp/env");
        // servlet looks up for a connection pool called "jdbc/POOL"
        DataSource ds = (DataSource) envContext.lookup("jdbc/POOL");
        // connection is then made/requests to connection pool

        try
        {
            conn = ds.getConnection();
        }
        catch (SQLException e)
        {
            System.out.println(e.toString());                   
        }
    }

    // queryId is the parameter to be used for querying for relevant records
    public static String getData(String queryId, int requestNumber)
            throws SQLException
    {
        String result = "";
        if (queryId != null)
        {
            try
            {
                // prepare a statement for use in query
                result = "This code breaks at this point";
                Statement stmt = conn.createStatement();
                // query parameratised with queryId
                String qry = "SELECT RECORD_ID, USER_ID, OPERATION_CD, BUSCOMP_NAME, OPERATION_DT, FIELD_NAME, OLD_VAL, NEW_VAL, AUDIT_LOG, ROW_ID, BC_BASE_TBL FROM S_AUDIT_ITEM WHERE RECORD_ID='"
                        + queryId + "'";
                ResultSet results = stmt.executeQuery(qry);
                result = XMLBuilder.xmlBuilder(results, queryId,
                        requestNumber);
                // close the connection
                stmt.close();
                results.close();
            }
            catch (Exception e)
            {
                // log.error("Cannot connect to database :" + e);

            }
        }
        else
        {
            // not sure if ever reached
            result = "The query parameter  is a null value";
        }
        return result;
    }

} 
```

我在我的网络服务器上设置了一个连接池并且它正在运行。

还有其他想法或建议吗？

谢谢

圣诞快乐，节日快乐！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T11:37:13.350

你打电话`openDatabase`前打电话`getData`吗？

如果你不是那么`conn`就是`null`并且`conn.createStatement`会触发空指针异常

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T11:38:38.030

尝试

if (conn == NULL) { openDatabase(); }

就在您的 createStatement 之前

# actionscript-3 - 以表格形式显示用户输入

> ID：14020825
> 
> 赞同：0
> 
> 时间：2012-12-24T11:33:46.617
> 
> 标签：actionscript-3, flash, flash-cs5

我正在使用带有 Action script3 的 flash cs5。用户在两个文本输入组件中输入行数和列数，然后单击提交按钮。然后应该显示一个类似结构的空表，其中包含用户指定的行数和列数。我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:16:13.690

您将需要谷歌“带有动作脚本的网格布局”。您基本上需要创建 Grid Layout 对象，然后添加子对象。

那里有很多参考资料。

# jquery - 所有浏览器中的滚动条样式更改？

> ID：14020830
> 
> 赞同：1
> 
> 时间：2012-12-24T11:33:56.397
> 
> 标签：jquery, html, jquery-ui, css

Web 技术中是否有任何强大的 CSS 或 jQuery 可以更改所有浏览器中滚动条的样式。我想更改默认的全宽窗口屏幕滚动条样式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T11:42:12.760

这个是高度可配置的，效果很好：http: [//jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/)

提供大量示例和文档。

整页滚动演示：http: [//jscrollpane.kelvinluck.com/fullpage_scroll.html](http://jscrollpane.kelvinluck.com/fullpage_scroll.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-30T17:41:16.113

以下 CSS 在 Internet Explorer、Microsoft Edge 或 Firefox 中不起作用：

```
/*used to determine the width of scroll bar*/
::-webkit-scrollbar
{width:5px;}

/*where the draggable handle moves*/
::-webkit-scrollbar-track
{background:#212121;}

/*defining the draggable handle*/
::-webkit-scrollable-thumb
{background:#f1f1f1; border-radius:2.5px}

/*hovering over draggable handle*/
::-webkit-scrollbar-thumb:hover
{background:#555;} 
```

# jquery - 不透明度在 IE6 上不起作用

> ID：14020835
> 
> 赞同：0
> 
> 时间：2012-12-24T11:34:32.770
> 
> 标签：jquery, css, internet-explorer-6

> **可能重复：**
> [IE6 中的不透明度属性](https://stackoverflow.com/questions/8888792/opacity-properity-in-ie6)

以下代码在 IE6 中不起作用：

```
overlayCSS: {background: 'black', opacity: .8} 
```

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T11:38:28.280

IE6 是“特殊的”。不透明度是 IE5.5+ 的过滤器 alpha

[如何修复IE6的不透明度](https://stackoverflow.com/questions/3749328/how-to-fix-opacity-on-ie6)

[http://css-tricks.com/css-transparency-settings-for-all-broswers/](http://css-tricks.com/css-transparency-settings-for-all-broswers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:38:31.077

使用 jQuery 在 IE6 中实现不透明度的最简单方法是使用以下`.fadeTo()`函数：

```
$('#myelem').fadeTo('0.8'); 
```

或者在 CSS 中，我认为 IE6 支持非标准`filter`：

```
filter:alpha(opacity=80); 
```

但是，要使其正常工作，元素必须具有布局 - 如果没有，则有一些技巧会强制元素具有布局：

```
zoom: 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T11:38:59.717

尝试

```
 filter:alpha(opacity=80);
  opacity: 0.8; 
```

它应该在IE中工作。

# java - Java - for 循环中的死代码

> ID：14020837
> 
> 赞同：5
> 
> 时间：2012-12-24T11:34:39.253
> 
> 标签：java, loops, for-loop

我在 for 循环中收到死代码警告`i++`。为什么我会得到这个，我该如何解决这个问题？

```
public static boolean Method(int p) {
    for(int i = 2; i < p; i++) {  // here is the problem, at i++
        if(p % i == 0);         
            return false;
    }
    return true;    
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-24T11:35:58.573

您总是立即退出循环，因此`i`永远不会增加。

```
 if(p % i == 0);         
        return false; 
```

应该

```
 if(p % i == 0)       
        return false; 
```

在第一个版本中，if 语句后面有一个空子句（由于第一个分号）。因此`return false`总是执行。您退出该方法，并且`i++`永远不会执行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-24T11:36:08.073

删除语句后的分号`if`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T11:36:34.440

问题出在这一行：

```
if(p % i == 0); 
```

删除分号并重试

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T12:07:16.947

如果您的代码被扩展，那么它将变成

```
 public static boolean Method(int p) {
        for(int i = 2; i < p; i++) {  // here is the problem, at i++
            if(p % i == 0)
            {

            }
           return false; //If you give return statement here then how it will work.
        }
        return true;    
    } 
```

# android - 如何以编程方式删除android中的联系人组？

> ID：14020839
> 
> 赞同：3
> 
> 时间：2012-12-24T11:34:56.807
> 
> 标签：android

如何以编程方式删除特定的 android 联系人组？

我试过这个，

[在 Android 上使用联系人组删除时出现问题](https://stackoverflow.com/questions/2353015/issue-using-contact-group-delete-on-android)

对我不起作用。请告诉我任何想法或建议。这对我真的很有帮助。

提前谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T09:32:02.650

我找到了一种正确删除组的方法。您需要使用适当的查询获取要删除的组的 id，然后您可以使用此 id 和 Groups.CONTENT_URI 删除该组。

我在下面发布了一个示例（只需将其调整为您的代码）。

```
// First get the id of the group you want to remove
long groupId = null;
Cursor cursor = mContext.getContentResolver.query(Groups.CONTENT_URI,
    new String[] {
        Groups._ID
    }, Groups.TITLE + "=?", new String[] {
        yourGroupTitle // Put here the name of the group you want to delete
    }, null);
if (cursor != null) {
    try {
        if (cursor.moveToFirst()) {
            groupId = cursor.getLong(0);
        }
    } finally {
        cursor.close();
    }
}

// Then delete your group
ArrayList<ContentProviderOperation> mOperations = new ArrayList<ContentProviderOperation>();

// Build the uri of your group with its id
Uri uri = ContentUris.withAppendedId(Groups.CONTENT_URI, groupId).buildUpon()
        .appendQueryParameter(ContactsContract.CALLER_IS_SYNCADAPTER, "true")
        .build();
ContentProviderOperation.Builder builder = ContentProviderOperation.newDelete(uri);
mOperations.add(builder.build());

// Then apply batch
try {
    mContext.getContentResolver().applyBatch(ContactsContract.AUTHORITY, mOperations);
} catch (Exception e) {
    Log.d("########## Exception :", ""+e.getMessage());
} 
```

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:53:09.203

首先找到所有具有特定组 ID 的联系人 ID。`ContentProviderOperation`然后为每个要删除的联系人创建一个，最后应用删除操作列表。

```
private void deletaAllInGroup(Context context, long groupId)
   throws RemoteException, OperationApplicationException{
    String where = String.format("%s = ?", GroupMembership.GROUP_ROW_ID);
    String[] whereParmas = new String[] {Long.toString(groupId)};
    String[] colSelection = new String[] {Data.CONTACT_ID};

    Cursor cursor = context.getContentResolver().query(
            Data.CONTENT_URI, 
            colSelection, 
            where, 
            whereParmas, 
            null);

    ArrayList<ContentProviderOperation> operations = 
        new ArrayList<ContentProviderOperation>();

    // iterate over all contacts having groupId 
    // and add them to the list to be deleted
    while(cursor.moveToNext()){ 
        String where = String.format("%s = ?", RawContacts.CONTACT_ID);
        String[] whereParams = new String[]{Long.toString(cursor.getLong(0))};

        operations.add(ContentProviderOperation.newDelete(RawContacts.CONTENT_URI)
        .withSelection(where, whereParams)
        .build());
    }

    context.getContentResolver().applyBatch(
        ContactsContract.AUTHORITY, operations );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T05:45:03.637

我使用此代码删除了一个组。但工作不是很清楚。

```
String groupName = "Your Group Name";

 try {
            ContentResolver cr = this.getContentResolver();
            ContentValues groupValues = null;
            groupValues = new ContentValues();
            groupValues.put(ContactsContract.Groups.GROUP_VISIBLE,0);
            cr.update (ContactsContract.Groups.CONTENT_URI, groupValues, ContactsContract.Groups.TITLE+ "=?", new String[]{groupName}) ;

            cr.delete(ContactsContract.Groups.CONTENT_URI, ContactsContract.Groups.TITLE+ "=?", new String[]{groupValue});
        }
        catch(Exception e){
            Log.d("########### Exception :",""+e.getMessage()); 
        } 
```

运行此代码后。组被删除。我去电话联系人或人和搜索组。它没有显示。但是**，如果我在程序中**以编程方式读取所有组，则会显示已删除的组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-19T11:40:12.350

试试这个代码删除组 public void checkAndDeleteGroup(final GroupModel groupModel){

```
 Log.e("TAG", "Click on delete");
    ArrayList<ContentProviderOperation> mOperations = new ArrayList<ContentProviderOperation>();

    // Build the uri of your group with its id
    Uri uri = ContentUris.withAppendedId(ContactsContract.Groups.CONTENT_URI, Long.parseLong(groupModel.getGroup_id())).buildUpon()
            .appendQueryParameter(ContactsContract.CALLER_IS_SYNCADAPTER, "true")
            .build();
    ContentProviderOperation.Builder builder = ContentProviderOperation.newDelete(uri);
    mOperations.add(builder.build());

    // Then apply batch
    try {
        getContentResolver().applyBatch(ContactsContract.AUTHORITY, mOperations);

    } catch (Exception e) {
        Toast.makeText(ProspectsActivity.this, "Group is not delete.", Toast.LENGTH_SHORT).show();
        e.printStackTrace();
    }

} 
```

# javascript - 有没有办法通过 javasctipt 下载图像并上传（到另一台服务器）？

> ID：14020848
> 
> 赞同：0
> 
> 时间：2012-12-24T11:35:43.087
> 
> 标签：javascript, google-chrome-extension

我想做一些图像重新托管插件，但目标服务器只接受从客户端上传。不支持链接。换句话说，我想从其他服务器下载图像并上传到另一个服务器，我需要通过 JavaScript（浏览器扩展）来完成。

# uitableview - 将单选按钮添加到 UITableViewCell

> ID：14020849
> 
> 赞同：2
> 
> 时间：2012-12-24T11:35:45.083
> 
> 标签：uitableview, radio-button, ibaction

我在使用下面的代码时遇到了单元格上的自定义单选按钮问题，`UItableViewView`我想为`didSelectRowAtIndexPath`单选按钮发送者操作设置相同的操作，以便我可以从所有单元格中选择一个单元格并取消选择表格视图中的所有其他单元格。在 tableView 中，我想显示所有 iPod 音乐库歌曲，用户可以一次从中选择一首。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        静态 NSString *CellIdentifier = @"Cell_Connections";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        如果（单元格 == 零）
        {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] ;
            cell.selectionStyle = UITableViewCellSelectionStyleGray;
            cell.detailTextLabel.textColor = [UIColor darkGrayColor];
            [单元集附件类型：UITableViewCellAccessoryNone]；
        }

 `cell.backgroundColor = [UIColor whiteColor];
    cell.textLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:16];
    cell.textLabel.textColor = [UIColor blackColor];
    cell.imageView.image = [UIImage imageNamed:@"cbimg_unselected.png"];

    MPMediaItem *temp1 = [self.sectionedArtistsArray objectAtIndex:indexPath.row];
    cell.textLabel.text = [temp1 valueForProperty:MPMediaItemPropertyTitle];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    CGRect frame = CGRectMake(0.0, 0.0, 44, 41);
    button.frame = frame;

    [button setImage:[UIImage imageNamed:@"cbimg_unselected.png"] forState:UIControlStateNormal];
    [button setImage:[UIImage imageNamed:@"cbimg_selected.png"] forState:UIControlStateSelected];
    [button addTarget:self action:@selector(checkButtonTapped:event:)  forControlEvents:UIControlEventTouchUpInside];
    button.backgroundColor = [UIColor clearColor];
    [cell.contentView addSubview:button];

    return cell;
}

- (void)checkButtonTapped:(id)sender event:(id)event
{
    NSSet *touches = [event allTouches];
    UITouch *touch = [touches anyObject];
    CGPoint currentTouchPosition = [touch locationInView:self.tblVwMusic];
    NSIndexPath *indexPath = [self.tblVwMusic indexPathForRowAtPoint: currentTouchPosition];
    if (indexPath != nil)
    {
        //[self tableView: self.tblVwMusic accessoryButtonTappedForRowWithIndexPath: indexPath];
    }
    UIButton *button = (UIButton*)sender;

    for (int section = 0, sectionCount = tblVwMusic.numberOfSections; section < sectionCount; ++section) {
        for (int row = 0, rowCount = [tblVwMusic numberOfRowsInSection:section]; row < rowCount; ++row) {
            UITableViewCell *cell = [tblVwMusic cellForRowAtIndexPath:[NSIndexPath indexPathForRow:row inSection:section]];
            [tblVwMusic deselectRowAtIndexPath:[NSIndexPath indexPathForRow:row inSection:section] animated:YES];
            NSArray *btnsArray = [cell.contentView subviews];
            for (UIButton *but in btnsArray) {
                if ([but isKindOfClass:[UIButton class]]) {
                    [but setSelected:NO];
                }
            }
        }
    }

    if (!button.selected) {
        button.selected = button.selected;

    }else {

        button.selected = !button.selected;
    }
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    for (int section = 0, sectionCount = tableView.numberOfSections; section < sectionCount; ++section) {
        for (int row = 0, rowCount = [tableView numberOfRowsInSection:section]; row < rowCount; ++row) {
            UITableViewCell *cell = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:row inSection:section]];
            [tableView deselectRowAtIndexPath:[NSIndexPath indexPathForRow:row inSection:section] animated:YES];
            NSArray *btnsArray = [cell.contentView subviews];
            for (UIButton *but in btnsArray) {
                if ([but isKindOfClass:[UIButton class]]) {
                    [but setSelected:NO];
                }
            }
        }
    }

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    NSArray *btnsArray = [cell.contentView subviews];

    for (UIButton *but in btnsArray) {
        if ([but isKindOfClass:[UIButton class]]) {
            if (!but.selected) {
                 [but setSelected:YES];
            } else {
                [but setSelected:NO];
            }
        }
    }
}` 

```

# android - Change Height of a Listview dynamicallyAndroid

> ID：14020859
> 
> 赞同：3
> 
> 时间：2012-12-24T11:36:10.553
> 
> 标签：android, android-layout

The format of my XML file is as following:

```
 LinearLayout 

     ScrollView

         RelativeLayout

             LinearLayout

             <ListView
               android:id="@android:id/list"
               android:layout_width="match_parent"
               android:layout_height="fill_parent"
               android:layout_margin="5dip"
               android:layout_weight="30" >
             </ListView>

             LinearLayout 
```

Here is my BaseAdapter class

```
public class APIQuickCheckoutProductProvider extends BaseAdapter {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater = null;

public APIQuickCheckoutProductProvider(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data = d;
    inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View vi = convertView;
    if (convertView == null)
        vi = inflater.inflate(R.layout.product_item, null);

    TextView brand = (TextView) vi.findViewById(R.id.brands); 
    TextView quantity_name = (TextView) vi.findViewById(R.id.quantity_name); 

    TextView price = (TextView) vi.findViewById(R.id.price); 

    HashMap<String, String> product = new HashMap<String, String>();
    product = data.get(position);

    // Setting all values in listview
    brand.setText(product.get(APIQuickCheckout.KEY_BRAND));
    quantity_name.setText(product.get(APIQuickCheckout.KEY_QUANTITY_NAME));
    price.setText(product.get(APIQuickCheckout.KEY_PRICE));

    return vi;
}
} 
```

Here is the main class where I set the adapter:

```
adapter = new APIQuickCheckoutProductProvider(APIQuickCheckout.this, productList);
lv.setAdapter(adapter);
adapter.notifyDataSetChanged(); 
```

And finally here is the each individual row which i set to the listview

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="5dip"
    android:layout_weight="7"
    android:weightSum="6" >

    <TextView
        android:id="@+id/brands"
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="3" />

    <TextView
        android:id="@+id/quantity_name"
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="3" />
  </LinearLayout>

  <LinearLayout
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_weight="1" />

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="5dip"
    android:layout_weight="2"
    android:weightSum="6" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="0dip"
        android:layout_weight="3" />

    <TextView
        android:id="@+id/price"
        android:layout_width="wrap_content"
        android:layout_height="0dip"
        android:layout_weight="3" />
   </LinearLayout>

 </LinearLayout> 
```

However, when I am trying the above mentioned code it displays the first product, and I can see only the top of the second product.And I can see nothing from then and on. So, how can I change the height of the `ListView` dynamically when I add a new product? In order to display all of them.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-24T12:01:24.623

If you want to change the height of list view dynamically, you could use,

```
list.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, theSizeIWant)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-24T08:02:39.493

```
import android.view.ViewGroup.LayoutParams;

 ListView mListView = (ListView)   findViewById(R.id.listviewid);
 LayoutParams list = (LayoutParams) mListView.getLayoutParams();
   list.height = set the height acc to you;//like int  200
   mListView.setLayoutParams(list); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-10T12:14:34.320

Try this answer,

```
public static void setListViewHeightBasedOnChildren(final ListView listView) {
    listView.post(new Runnable() {
        @Override
        public void run() {
            ListAdapter listAdapter = listView.getAdapter();
            if (listAdapter == null) {
                return;
            }
            int totalHeight = listView.getPaddingTop() + listView.getPaddingBottom();
            int listWidth = listView.getMeasuredWidth();
            for (int i = 0; i < listAdapter.getCount(); i++) {
                View listItem = listAdapter.getView(i, null, listView);
                listItem.measure(
                        View.MeasureSpec.makeMeasureSpec(listWidth, View.MeasureSpec.EXACTLY),
                        View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED));

                totalHeight += listItem.getMeasuredHeight();
                Log.d("listItemHeight" + listItem.getMeasuredHeight(), "___________");
            }
            ViewGroup.LayoutParams params = listView.getLayoutParams();
            params.height = (int) ((totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1))));
            listView.setLayoutParams(params);
            listView.requestLayout();

        }
    });
   } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T11:42:12.913

Its not recommended to use ListView inside of a ScrollView

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-22T11:53:56.343

You can use below method to set the height of listview programmatically:

```
<ListView
        android:id="@+id/lvMenu"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#ffffff"
        /> 
```

Method used for setting height of listview:

```
public static boolean setListViewHeightBasedOnItems(ListView listView) {

        ListAdapter listAdapter = listView.getAdapter();
        if (listAdapter != null) {

            int numberOfItems = listAdapter.getCount();

            // Get total height of all items.
            int totalItemsHeight = 0;
            for (int itemPos = 0; itemPos < numberOfItems; itemPos++) {
                View item = listAdapter.getView(itemPos, null, listView);
                float px = 500 * (listView.getResources().getDisplayMetrics().density);
                item.measure(View.MeasureSpec.makeMeasureSpec((int)px, View.MeasureSpec.AT_MOST), View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED));
                totalItemsHeight += item.getMeasuredHeight();
            }

            // Get total height of all item dividers.
            int totalDividersHeight = listView.getDividerHeight() *
                    (numberOfItems - 1);
            // Get padding
            int totalPadding = listView.getPaddingTop() + listView.getPaddingBottom();

            // Set list height.
            ViewGroup.LayoutParams params = listView.getLayoutParams();
            params.height = totalItemsHeight + totalDividersHeight + totalPadding;
            listView.setLayoutParams(params);
            listView.requestLayout();
            return true;

        } else {
            return false;
        }

    } 
```

Then set it like below code:

```
 MenuAdapter menuAdapter = new MenuAdapter(context, R.layout.menu_item);
            lvMenu.setAdapter(menuAdapter);
            setListViewHeightBasedOnItems(lvMenu); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-16T15:13:31.750

> this class can be use to expand the height of listview or gridview at runtime ,please put it in your package and use by passing listview

```
public class CustomView {

        public static void getListViewSize(ListView myListView) {
            ListAdapter myListAdapter = myListView.getAdapter();
            if (myListAdapter == null) {
                //do nothing return null
                return;
            }
            //set listAdapter in loop for getting final size
            int totalHeight = 0;
            for (int size = 0; size < myListAdapter.getCount(); size++) {
                View listItem = myListAdapter.getView(size, null, myListView);
                listItem.measure(0, 0);
                totalHeight += listItem.getMeasuredHeight();
            }
            //setting listview item in adapter
            ViewGroup.LayoutParams params = myListView.getLayoutParams();
            params.height = totalHeight + (myListView.getDividerHeight() * (myListAdapter.getCount() - 1));
            myListView.setLayoutParams(params);
            // print height of adapter on log
            Log.i("height of listItem:", String.valueOf(totalHeight));
        }

        public static void getGridViewSize(GridView myGridView) {
            ListAdapter myListAdapter = myGridView.getAdapter();
            if (myListAdapter == null) {
                //do nothing return null
                return;
            }
            //set listAdapter in loop for getting final size
            int totalHeight = 0;
            int maxHeight = 0;//implement new 
            for (int size = 0; size < myListAdapter.getCount(); size++) {
                View listItem = myListAdapter.getView(size, null, myGridView);

                listItem.measure(0, 0);

                totalHeight += listItem.getMeasuredHeight()+8;

                if(maxHeight < listItem.getMeasuredHeight()){//implement new 

                    maxHeight = listItem.getMeasuredHeight()+8;
                    System.out.println(" max height of gridview item<11>  "+size+"  ==  "+maxHeight);
                }

                System.out.println(myListAdapter.getCount()+"  height of gridview item<22>  "+size+"  ==  "+listItem.getMeasuredHeight());
            }

            //setting listview item in adapter
             ViewGroup.LayoutParams params = myGridView.getLayoutParams();

            if(myListAdapter.getCount() > 1)
                params.height = maxHeight * ((myListAdapter.getCount()+1)/2);//implement new
            else
                params.height = maxHeight;//implement new

             myGridView.setLayoutParams(params);

        }

    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-25T14:16:19.217

```
public class Utility {
    public static void setListViewHeightBasedOnChildren(ListView listView) {
        ListAdapter listAdapter = listView.getAdapter();
        if (listAdapter == null) {
            // pre-condition
            return;
        }

        int totalHeight = 0;
        int desiredWidth = MeasureSpec.makeMeasureSpec(listView.getWidth(), MeasureSpec.AT_MOST);
        for (int i = 0; i < listAdapter.getCount(); i++) {
            View listItem = listAdapter.getView(i, null, listView);
            listItem.measure(desiredWidth, MeasureSpec.UNSPECIFIED);
            totalHeight += listItem.getMeasuredHeight();
        }

        ViewGroup.LayoutParams params = listView.getLayoutParams();
        params.height = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
        listView.setLayoutParams(params);
        listView.requestLayout();
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-12T09:51:45.730

```
 <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent">

<LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1">
            <ListView
                android:id="@+id/lv_premimum_upgrade"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="@dimen/custom_margin"
                android:minHeight="48dp">
            </ListView>
        </LinearLayout> 

</ScrollView>
```

```
int list_cell_size=188;    // cell_size is varible 
ViewGroup.LayoutParams list;
list = (ViewGroup.LayoutParams) listView.getLayoutParams();
list.height = list_cell_size*response.size();  // response is list items size
listView.setLayoutParams(list);
```

# asp.net-mvc-4 - 使用 Knockout.js 实现主从网页

> ID：14020860
> 
> 赞同：0
> 
> 时间：2012-12-24T11:36:10.987
> 
> 标签：asp.net-mvc-4, knockout.js, master-slave

我正在尝试实现主从网页，左侧是一个控件，您可以在该控件上选择一个元素。右侧显示了所选元素的详细信息。我正在使用 asp.net mvc，并且我已经实现了下载（使用 ajax）元素详细信息的主控制。

**编辑**
感谢 photo_tom 的回复和我的进一步研究，我设法重新加载子视图模型和详细信息子页面。不幸的是它不起作用:(如果我做类似的事情[它](http://jsfiddle.net/rniemeyer/tWJxh/#)工作正常。但如果我只尝试动态放置内部html并随后更改视图模型，它会失败。如何使绑定与动态替换元素的innerHtml一起工作？

```
@{
    ViewBag.Title = "Products";
}

<h2>Products</h2>

<div class="ms-master">
    <select size="15" data-bind="
        options: Products,
        optionsText: 'Name',
        value: CurrentProduct
        ">
    </select>
</div>

<div class="ms-slave" data-bind="
    with: CurrentProductVM">
  <div data-bind="html: $parent.CurrentProductHtml" />
</div>

<script type="text/javascript" language="javascript">
    function Product(data) {
        var self = this;
        ko.mapping.fromJS(data, {}, this);
    };

    function ViewModel(data) {
        var self = this;
        if (data != undefined) {
            ko.mapping.fromJS(data, {
                'Products': {
                    'create': function(d) {
                        return new Product(d.data);
                    }
                }
            }, this);
        }

        self.CurrentProductHtml = ko.observable();
        self.CurrentProductVM = ko.observable();
        self.CurrentProduct = ko.observable();
        self.OnCurrentProduct = function(value) {
            $.getJSON(
                self.DetailsUrl(),
                { id: value.Id() },
                function (result) {
                    self.CurrentProductVM(result.Model);
                    self.CurrentProductHtml(result.View);
                }
            );
        };
        self.CurrentProduct.subscribe(self.OnCurrentProduct);
    };

    $(function () {
        var model = @Html.Raw(Json.Encode(Model.Data));
        var vm = new ViewModel(model);
        ko.applyBindings(vm);
    });
</script> 
```

**旧帖子**

控制器上的*Details*操作返回 PartialView，我希望在其上拥有一个单独的 KO 视图模型来控制局部视图。怎么做？也许我的问题有更好的解决方案？

[这是](https://stackoverflow.com/questions/10326062/using-knockoutjs-with-multiple-pages)类似的问题，但使用此解决方案我必须查询控制器两次：一次获取 VM，第二次获取视图，不是吗？

**JS**

```
function Product(data) {
    var self = this;
    ko.mapping.fromJS(data, {}, this);

    self.AsyncDetails = ko.observable();
    self.OnSelect = function() {
        $.get(
            '@Url.Action("Details", "ProductsMgm")',
            { id: self.Id() },
            function (e) {
                self.AsyncDetails(e);
            }
        );
    };
};

function ViewModel(data) {
    var self = this;
    if (data != undefined) {
        ko.mapping.fromJS(data, {
            'Products': {
                'create': function(d) {
                    return new Product(d.data);
                }
            }
        }, this);
    }

    self.CurrentProduct = ko.observable();
    self.OnCurrentProduct = function(value) {
        value.OnSelect();
    };
    self.CurrentProduct.subscribe(self.OnCurrentProduct);
}; 
```

** HTML **

```
<div class="ms-master">
    <select size="15" data-bind="
        options: Products,
        optionsText: 'Name',
        value: CurrentProduct
        ">
    </select>
</div>

<div class="ms-slave" data-bind="
    with: CurrentProduct">
    <div data-bind="html: AsyncDetails" ></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:06:38.087

我已经在同一页面上使用列表和编辑视图完成了此操作。一般来说，如果编辑详细信息，请执行以下操作。

1.  在初始 ajax 调用中检索屏幕两侧的所有数据。
2.  当用户单击“编辑”按钮（例如）时，将右侧对象传递给“编辑”功能。
3.  “编辑”功能如下：

    *   制作传递给它的 Edit 对象的深层副本。这可以防止任何编辑立即反映在原始对象中。
    *   将新的 Edit 对象的内容复制到右侧的 observables。
    *   当用户完成并更改数据后，通过 ajax 将更新的数据发送到服务器，然后更新原始 Edit 对象的内容

* * *

**编辑**-回应第一条评论首先阅读[https://stackoverflow.com/a/10590386/136717](https://stackoverflow.com/a/10590386/136717)关于如何通过ajax检索部分视图。

基本过程将是 - 1\. 当您呈现左侧时，在单击以检索数据的控件上，添加一个 Click 绑定。查看[http://knockoutjs.com/documentation/click-binding.html](http://knockoutjs.com/documentation/click-binding.html)了解完整详情。2.您当前的数据项将作为参数传递。在您的“点击”功能中，构建一个 url 来检索您的局部视图。3\. 调用将执行 ajax 调用的新库函数，然后将 html 加载到您想要的区域。

# iphone - 从iOS中的数组获取字典值？

> ID：14020863
> 
> 赞同：-1
> 
> 时间：2012-12-24T11:36:19.543
> 
> 标签：iphone, ios, nsmutabledictionary

我有以下内容`NSArray`：

```
(
        {
        geometry =         {
            location =             {
                lat = "37.789632";
                lng = "-122.417004";
            };
        };
        icon = "http://maps.gstatic.com/mapfiles/place_api/icons/doctor-71.png";
  vicinity = "900 Hyde Street, San Francisco";
    },
        {
        geometry =         {
            location =             {
                lat = "37.794774";
                lng = "-122.398941";
            };
        };
        icon = "http://maps.gstatic.com/mapfiles/place_api/icons/lodging-71.png";
 vicinity = "2 Embarcadero Center, San Francisco";
}
) 
```

从这里我怎样才能从每个索引中获取`latitude`和？`longitude`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T11:42:11.103

你甚至没有试着去想这个？？我会帮你的乐趣，但帮助你自己的人

```
NSArray *values = ...;
for (NSDictionary *geometry in values) {
    NSDictionary *loc = [geometry valueForKey:@"location"];
    if (loc) {
        NSNumber *lat = [loc valueForKey:@"lat"];
        NSNumber *lng = [loc valueForKey:@"lng"];
        if (lat && lng) {
            // do whatever
        }
    }
} 
```

编辑：也许是这样

```
NSArray *values = ...;
for (NSDictionary *item in values) {
    NSDictionary *geo = [item valueForKey:@"geometry"];
    if (geo) {
        NSDictionary *loc = [geometry valueForKey:@"location"];
        if (loc) {
            NSNumber *lat = [loc valueForKey:@"lat"];
            NSNumber *lng = [loc valueForKey:@"lng"];
            if (lat && lng) {
                // do whatever
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T11:49:24.963

```
for (int i=0 ; i<[parsedAry count] ; i++) {

    NSMutableDictionary * location = [[[parsedAry objectAtIndex:i]objectForKey:@"geometry"]objectForKey:@"location"];
    NSString * lat = [location objectForKey:"lat"];
    NSString * lng = [location objectForKey:"lng"]; 
    [latAry addObject:lat];
    [LongAry addObject:lng];

} 
```

您必须创建和分配 latAry 和 longAry

# java - Jax-WS MTOM 启用问题

> ID：14020865
> 
> 赞同：1
> 
> 时间：2012-12-24T11:36:23.260
> 
> 标签：java, jax-ws, handler, mtom

我正在尝试使用 JAX-WS RI 编写 web 服务。此服务包含附件并带有注释

```
@MTOM 
```

我还编写了检查 ws-security usernameToken 的处理程序。当登录名/密码不正确时，处理程序会生成错误并将其返回给客户端。我正在尝试在客户端启用 mtom：

```
((SOAPBinding)service).getBinding().setMTOMEnabled(true); 
```

最后我收到异常：

```
Exception in thread "main" javax.xml.ws.WebServiceException: Missing Start Boundary, or boundary does not start on a new line
        at com.sun.xml.ws.encoding.MimeMultipartParser.getNextPart(MimeMultipartParser.java:148)
        at com.sun.xml.ws.encoding.MimeMultipartParser.getRootPart(MimeMultipartParser.java:89)
        at com.sun.xml.ws.encoding.SOAPBindingCodec.decode(SOAPBindingCodec.java:303)
        at com.sun.xml.ws.encoding.MimeCodec.decode(MimeCodec.java:116)
        at com.sun.xml.ws.encoding.SOAPBindingCodec.decode(SOAPBindingCodec.java:253)
        at com.sun.xml.ws.transport.http.client.HttpTransportPipe.process(HttpTransportPipe.java:152)
        at com.sun.xml.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:74)
        at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:559)
        at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:518)
        at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:503)
        at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:400)
        at com.sun.xml.ws.client.Stub.process(Stub.java:228)
        at com.sun.xml.ws.client.sei.SEIStub.doProcess(SEIStub.java:120)
        at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:226)
        at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:206)
        at com.sun.xml.ws.client.sei.SEIStub.invoke(SEIStub.java:103)
        at $Proxy28.putContent(Unknown Source)
        at example.HelloWorldClient.main(HelloWorldClient.java:54)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

谁能解释如何解决这个问题？

**更新：** 研究表明问题出在服务器端：

响应，我从服务器得到的也有包含边界 uuid 的“多部分/相关”类型，但在消息中这个 uuid 是空的。有没有办法使响应不是多部分的，或者设置处理程序以正确使用它？

**更新：** 终于找到了解决方案（这不是最佳方法，但目前这个方法有效）：我不知道如何在 SoapHandler（javax.xml.ws.handler.soap.SOAPHandler）中禁用多部分，但 SOAPMessageContext 有对 HttpServletResponse 的引用，您可以在其中写入您拥有的任何数据。不要忘记关闭OutputStream，并在`handleMessage`方法中返回false。您还需要设置正确的 CotnentType。此 hack 适用于将 attachemtn 发送到服务器的方法，但没有任何响应（在我的情况下，响应中有错误）。

这又是一种非常“奇怪”的方式。但这一个有效。如果你有更好的，请回答这个问题。

谢谢

# mysql - MySQL UPDATE 将数据追加到列中

> ID：14020867
> 
> 赞同：33
> 
> 时间：2012-12-24T11:36:29.780
> 
> 标签：mysql, append, sql-update

我需要更新表名（col1name）

如果已经有数据，我需要附加值'a，b，c'如果它是NULL，我需要添加值'a，b，c'

我知道有一个 CONCAT 参数，但不确定 SQL 语法是什么。

`update tablename set col1name = concat(ifnull(col1name, 'a,b,c'), 'a,b,c')`

以上是正确的吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-12-24T11:51:14.470

试试这个查询：

```
update tablename set col1name = concat(ifnull(col1name,""), 'a,b,c'); 
```

[请参阅此 sql fiddle 演示。](http://sqlfiddle.com/#!9/62cff)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-24T11:42:10.963

这应该这样做：

```
update tablename set
col1name = if(col1name is null, 'a,b,c', concat(col1name, 'a,b,c')); 
```

或者你可以通过两个步骤来让你的生活更轻松：

```
update tablename set col1name = '' where col1name is null; 
```

然后

```
update tablename set col1name = concat(col1name, 'a,b,c'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-24T11:41:32.710

您可以使用以下内容：

```
update yourtable 
set yourcol = case when yourcol is null then 'a,b,c'
                  else concat(yourcol, ' a,b,c') end 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d530e/1)

样本数据：

```
CREATE TABLE yourtable(`yourcol` varchar(50));

INSERT INTO yourtable(`yourcol`)
VALUES  ('sadsdh'),
    (NULL); 
```

将返回：

```
|      YOURCOL |
----------------
| sadsdh a,b,c |
|        a,b,c | 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-23T09:32:09.277

IFNULL(column,'')，保存所有 if 语句，使 SQL 更简单！

**MySQL 5.6 架构设置**：

```
CREATE TABLE tablename
    (`yourcol` varchar(50))
;

INSERT INTO tablename
    (`yourcol`)
VALUES
    ('sadsdh'),
    (NULL)
;

UPDATE tablename SET
    yourcol = CONCAT( IFNULL(yourcol,' '), 'somevalue' )
; 
```

**[查询](http://sqlfiddle.com/#!9/4d6b6/1)**：

```
select *
from tablename 
```

**[结果](http://sqlfiddle.com/#!9/4d6b6/1/0)**：

```
|         yourcol |
|-----------------|
| sadsdhsomevalue |
|       somevalue | 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-12-10T15:01:02.307

你为什么要写 ifnull 函数：很明显，如果 col1name1 为空，它连接到 null 意味着 null+'a,b,c' 只是 'a,b,c' set col1name = concat(ifnull(col1name,""), ' a,b,c') 你可以直接写 set col1name = concat(col1name, 'a,b,c')

# ruby-on-rails-3 - 如何将 .tiff 图像转换为 .jpeg 格式

> ID：14020869
> 
> 赞同：0
> 
> 时间：2012-12-24T11:36:34.900
> 
> 标签：ruby-on-rails-3, rmagick, attachment-fu

我正在使用 Attachment_fu 上传图片。

在应用程序中上传图像后，我需要将 .tiff 图像转换为 .jpeg 格式。

我使用了以下代码：

```
 :styles => {
    :thumb => ["150x172#",:jpg],
    :large => ["100%", :jpg]
  }, 
```

但这对我没有用。

请帮我如何转换图像格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:04:52.440

正如您的标签中已经暗示的那样，[ImageMagic](http://www.imagemagick.org/)可以解决问题。您可以使用`convert`命令行实用程序或使用其 ruby​​ 绑定[RMagic](http://studio.imagemagick.org/RMagick/doc/usage.html)。在后一种情况下，您只需读取图像并使用新名称再次写入即可。上面的文档说：

```
require 'RMagick'
include Magick

cat = ImageList.new("Cheetah.jpg")
smallcat = cat.minify
smallcat.display
smallcat.write("Small-Cheetah.gif") 
```

如果您不希望磁盘上的文件，您也可以从字符串读取和写入。

# c# - 如何在网页上显示 c# 源代码

> ID：14020877
> 
> 赞同：0
> 
> 时间：2012-12-24T11:37:09.920
> 
> 标签：c#, css, asp.net-mvc

> **可能重复：**
> [如何在网页中显示格式化代码](https://stackoverflow.com/questions/5170055/how-to-display-formatted-code-in-webpage)

我敢肯定这个问题之前一定有人问过，但是我在任何地方都找不到。（我一定是在寻找错误的东西）

就像这个网站允许你做的那样，我想把 c# 放在我的网页上，这样我就可以编写教程/示例。

```
var tute = new Tutorial();    
//Display all of this 
SomeMethod(tute); 
```

这是通过`CSS`诡计进行的吗？如果是这样，是否有图书馆可以这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:41:28.953

有一个名为[Code](http://www.w3schools.com/tags/tag_phrase_elements.asp)的 html 标签，您可以使用它和 CSS 来创建您的代码块。

例如 ：

```
<html>
<style>
code
{
   background-color : gray;
   padding : 5px;
}
</style>
<body>
<code>Your code here</code>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:38:37.840

是的，这一切都是通过 CSS 完成的。这是一篇应该对您有所帮助的[博客文章。](http://www.pvladov.com/2012/10/colorize-csharp-code-for-blog.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T11:50:57.877

要在 HTML 页面上呈现代码，您需要将其包装在`<code>`标签中。

更好的方法是将它与`<pre>`标签结合起来，以便您也保留缩进和间距格式。

```
<pre>
<code>
    Your code here
</code>
</pre> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T12:20:25.083

有很多项目可以做到这一点。我知道的一个叫做“ColorCode”的 CodePlex 可以为您的代码着色（通过将其格式化为 HTML）。您可以将输出附加到文档：

[http://colorcode.codeplex.com/](http://colorcode.codeplex.com/)

# python - Python split() 用于字典

> ID：14020880
> 
> 赞同：0
> 
> 时间：2012-12-24T11:37:18.907
> 
> 标签：python, dictionary, split

我尝试从字典中的数据库中插入一些值，它工作正常，但它以这种格式插入值。`"S"`而不是`S`.

我尝试使用函数`split()`，例如：

```
cat_sName = dumps(item_meta_data[int(menu_item.id)]['short_name'].split('"')) 
```

当我打印 cat_sName 它打印这个值：

`['', 'S', '']`代替`S`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T11:40:50.837

您可以使用`strip`而不是`split`摆脱引号：

```
>>> '"S"'.strip('"')
'S' 
```

它们最初来自哪里？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T11:41:43.213

您应该使用`strip()`函数删除双引号：

像这样

```
cat_sName = dumps(item_meta_data[int(menu_item.id)]['short_name'].strip('"')) 
```

`strip`函数删除内容，而`split`函数根据分隔符将字符串拆分为列表。您应该剥离以进行删除工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T11:41:16.347

尝试这个 ：

```
cat_sName = dumps(item_meta_data[int(menu_item.id)]['short_name'].split('"')[1]) 
```

# android - 设备未检测到 Ubislate 7ci 的问题

> ID：14020883
> 
> 赞同：0
> 
> 时间：2012-12-24T11:37:38.360
> 
> 标签：android

我想将指纹设备连接到我的 android 平板电脑，所以我使用下面的代码来检测设备到我的 android 平板电脑。

```
UsbManager mDevManager = (UsbManager)ctx.getSystemService(Context.USB_SERVICE);
HashMap<String, UsbDevice> usb_devs =  mDevManager.getDeviceList();
Log.d(TAG, "OpenDevice() : usb_devs.size() = "+usb_devs.size()); 
```

此代码`usb_devs.size()`在我的三星`GT-P3100`平板电脑上运行良好（返回 1），但`usb_devs.size()`在我的平板电脑上返回 0 `ubslate 7ci`。ubslate 7ci 的 Android 版本是`4.0.4.`
那么问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:00:46.037

我找到了答案：

要启用 USB 主机 API 支持，必须在文件夹 /system/etc/permissions 中有一个名为 android.hardware.usb.host.xml 的文件，并包含以下行：

```
<permissions>
 <feature name="android.hardware.usb.host"/>
</permissions> 
```

我在 /system/etc/permissions 文件夹中没有这个文件，所以我只需添加这个文件并重新启动设备。

# python - Skybot Python IRCbot

> ID：14020885
> 
> 赞同：0
> 
> 时间：2012-12-24T11:37:50.013
> 
> 标签：python, bots, irc

我使用[skybot irc bot](https://github.com/rmmh/skybot)，我想问一下如何从机器人答案中删除 nick ，比如

```
<User1> .calc 1+3
<Skybot> **User1:** 1+3=4 
```

在每个插件中都有导入，这里是导入到所有插件（hook.py）的文件中的脚本：

```
import inspect
import re

def _hook_add(func, add, name=''):
if not hasattr(func, '_hook'):
    func._hook = []
func._hook.append(add)

if not hasattr(func, '_filename'):
    func._filename = func.func_code.co_filename

if not hasattr(func, '_args'):
    argspec = inspect.getargspec(func)
    if name:
        n_args = len(argspec.args)
        if argspec.defaults:
            n_args -= len(argspec.defaults)
        if argspec.keywords:
            n_args -= 1
        if argspec.varargs:
            n_args -= 1
        if n_args != 1:
            err = '%ss must take 1 non-keyword argument (%s)' % (name,
                        func.__name__)
            raise ValueError(err)

    args = []
    if argspec.defaults:
        end = bool(argspec.keywords) + bool(argspec.varargs)
        args.extend(argspec.args[-len(argspec.defaults):
                    end if end else None])
    if argspec.keywords:
        args.append(0)  # means kwargs present
    func._args = args

if not hasattr(func, '_thread'):  # does function run in its own thread?
    func._thread = False

def sieve(func):
    if func.func_code.co_argcount != 5:
        raise ValueError(
                'sieves must take 5 arguments: (bot, input, func, type, args)')
    _hook_add(func, ['sieve', (func,)])
    return func

def command(arg=None, **kwargs):
    args = {}

def command_wrapper(func):
    args.setdefault('name', func.func_name)
    _hook_add(func, ['command', (func, args)], 'command')
    return func

if kwargs or not inspect.isfunction(arg):
    if arg is not None:
        args['name'] = arg
    args.update(kwargs)
    return command_wrapper
else:
    return command_wrapper(arg)

def event(arg=None, **kwargs):
    args = kwargs

def event_wrapper(func):
    args['name'] = func.func_name
    args.setdefault('events', ['*'])
    _hook_add(func, ['event', (func, args)], 'event')
    return func

if inspect.isfunction(arg):
    return event_wrapper(arg, kwargs)
else:
    if arg is not None:
        args['events'] = arg.split()
    return event_wrapper

def singlethread(func):
    func._thread = True
    return func

def regex(regex, flags=0, **kwargs):
    args = kwargs

def regex_wrapper(func):
    args['name'] = func.func_name
    args['regex'] = regex
    args['re'] = re.compile(regex, flags)
    _hook_add(func, ['regex', (func, args)], 'regex')
    return func

if inspect.isfunction(regex):
    raise ValueError("regex decorators require a regex to match against")
else:
    return regex_wrapper 
```

我会非常感谢任何回复的人；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:04:47.270

要从答案中删除昵称，请尝试在插件函数的末尾使用`say()`而不是正常。`return`比特币插件使用：

```
from util import http, hook

@hook.command(autohelp=False)
def bitcoin(inp, say=None):
    ".bitcoin -- gets current exchange rate for bitcoins from mtgox"
    data = http.get_json("https://mtgox.com/code/data/ticker.php")
    ticker = data['ticker']
    say("Current: \x0307$%(buy).2f\x0f - High: \x0307$%(high).2f\x0f"
        " - Low: \x0307$%(low).2f\x0f - Volume: %(vol)s" % ticker) 
```

# c++ - fstream 不写入文件

> ID：14020890
> 
> 赞同：2
> 
> 时间：2012-12-24T11:38:23.323
> 
> 标签：c++, fstream

我一直在开发一个小程序，它将我的 3D 引擎所需的所有图像放入一个文件中，但是由于未知原因，当我尝试使用 fstream 写入文件时，它不会返回任何错误，但是仍然没有写任何东西。

例如，我有一个初始化新文件的简单函数：

```
void initPAK(fstream& pakfile, image firstImg)
{
    PAKheader head;
    head.sign[0]    = 'P';
    head.sign[1]    = 'A';
    head.sign[2]    = 'K';
    head.nbdata     = 1;
    head.index.push_back(sizeof(head.sign)+sizeof(head.nbdata)+sizeof(uint32_t));

    if(pakfile.is_open())
    {
        pakfile.write(head.sign, sizeof(head.sign));
        pakfile.write((char*)&head.nbdata, sizeof(head.nbdata));
        for(uint32_t n=0; n<head.index.size(); n++)
        {
            pakfile.write((char*)&head.index[n], sizeof(head.index[n]));
        }

        pakfile.write((char*)&firstImg.width, sizeof(firstImg.width));
        pakfile.write((char*)&firstImg.height, sizeof(firstImg.height));
        pakfile.write((char*)&firstImg.channels, sizeof(firstImg.channels));
        for(uint32_t n=0; n<firstImg.data.size(); n++)
        {
            pakfile.write((char*)&firstImg.data[n], sizeof(firstImg.data[n]));
        }

    }
    else
    {
        cerr << "unable to open" << endl;
    }   
} 
```

我这样使用它：

```
 fstream fileop;
    fileop.open("bin_file", fstream::in | fstream::out | fstream::trunc | fstream::binary);

    unsigned char zdata[] = {
        255, 0, 0,
        0, 255, 0,
        0, 0, 255,
    };

    image zimg;
    zimg.width = 3;
    zimg.height = 1;
    zimg.channels = 3;
    for(int i=0; i < 9; i++)
    {
        zimg.data.push_back(zdata[i]);
    }

    initPAK(fileop, zimg);

    fileop.close(); 
```

但是文件“bin_file”他从来没有写过也没有创建过。我在另一个 stackoverflow 的问题中看到我应该使用 flush() 但我也没有工作。这个函数用来工作的最奇怪的事情，直到我相信我将ofstream替换为fstream。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:39:01.990

好吧，我有点傻。这个函数确实有效，我的程序太乱了，这个函数从来没有被调用过......无论如何，感谢你的评论帮助我清理了我的代码。

经验教训：永远不要急于编码，如果你应该睡觉的话更是如此。

# ruby-on-rails - 在这种情况下，我应该如何创建书签/保存的帖子？

> ID：14020896
> 
> 赞同：-1
> 
> 时间：2012-12-24T11:38:52.493
> 
> 标签：ruby-on-rails

我有一个`Post`, 和一个`User`模型

我想让用户保存或收藏帖子。换句话说，他们会点击一个按钮，帖子就会被收藏/保存。然后用户将能够看到页面中列出的所有这些帖子（如*YouTube*稍后的手表）。

我想我必须创建一个`Bookmark`模型。但我不确定模型应该与`Post`和有什么样的关联`User`。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:48:29.180

书签型号：

```
belongs_to :user
belongs_to :post 
```

在用户和帖子模型中：

```
has_many :bookmarks 
```

此外，为了更方便，您可以在用户和帖子模型中使用“has_many through”关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:15:14.550

如果您只想拥有书签，但没有与书签关联的其他信息，例如“已添加书签的评论”或“等等”，您可以使用`has_and_belongs_to_many`关联。在那里您不需要创建书签模型。在这种情况下，您只需要创建连接表。`has_many :through`当您需要使用关系存储更多信息时，这很有用。您可以通过这个[has_and_belongs_to_many_association](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)了解更多信息。

# java - 哪个依赖项添加到 Eclipse java 项目以修复 javax.xml.rpc.Service 问题？

> ID：14020899
> 
> 赞同：0
> 
> 时间：2012-12-24T11:38:58.577
> 
> 标签：java, xml, eclipse, rpc

我已经创建了网络服务客户端。

```
import javax.xml.rpc.Stub; 
```

产生错误：

```
The import javax.xml.rpc cannot be resolved 
```

我应该添加什么库？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:57:47.343

您是否尝试过 j2ee.jar 或类似的东西，

你可以在这里查看完整列表： [jar finder](http://www.jarfinder.com/index.php/java/info/javax.xml.rpc.Stub)

# c# - 为什么表达式在 linq 中不起作用

> ID：14020901
> 
> 赞同：2
> 
> 时间：2012-12-24T11:39:00.827
> 
> 标签：c#, linq, entity-framework, lambda

在EF上工作，需要在哪里写一个自定义

```
public virtual IEnumerable GetDataByID<TEntity>() where TEntity : class
{
    if (this.Context == null)
        Initialize<TEntity>();
    TContext context = this.Context;

    var result = context.CreateObjectSet<TEntity>().Where(GetExpression<TEntity>(5));
    return result;
}

public Expression GetExpression<TEntity>(int id) where TEntity : class
{
    ParameterExpression e = Expression.Parameter(typeof(TEntity), "e");
    PropertyInfo propInfo = typeof(TEntity).GetProperty(EntityInfo<TEntity>.GetPkFieldName(this.Context));//(KeyPropertyName);
    MemberExpression m = Expression.MakeMemberAccess(e, propInfo);
    ConstantExpression c = Expression.Constant(id, typeof(int));
    BinaryExpression b = Expression.Equal(m, c);
    Expression<Func<TEntity, bool>> lambda = Expression.Lambda<Func<TEntity, bool>>(b, e);
    return lambda;
} 
```

错误：

> 'System.Data.Objects.ObjectQuery.Where(string, params System.Data.Objects.ObjectParameter[])' 的最佳重载方法匹配有一些无效参数

为什么我的上述语法不起作用，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:00:03.130

问题是，`CreateObjectSet<TEntity>`返回的结果定义了编译器将尝试使用`ObjectSet<TEntity>`的自己的方法。[`Where`](http://msdn.microsoft.com/en-us/library/bb338811.aspx)您提供的参数对此方法无效，因此出现错误。

您想要使用的是 Linq 的[`Queryable.Where`](http://msdn.microsoft.com/en-us/library/bb535040.aspx)扩展方法，如下所示：

```
var predicate = GetExpression<TEntity>(5);
var objectSet = context.CreateObjectSet<TEntity>();
var results = System.Linq.Queryable.Where(objectSet, predicate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:56:19.320

> 'System.Data.Objects.ObjectQuery.Where(string, params System.Data.Objects.ObjectParameter[])' 的最佳重载方法匹配有一些无效参数

问题是这一行：

```
var result = context.CreateObjectSet<TEntity>().Where(GetExpression<TEntity>(5)); 
```

事实上你指定了错误的参数：[`ObjectQuery<T>.Where`](http://msdn.microsoft.com/en-us/library/bb338811.aspx)

```
public ObjectQuery<T> Where(
    string predicate,
    params ObjectParameter[] parameters
) 
```

事实上，你应该传递一个字符串。

# vba - 通过 VBA 在 Outlook 中获取传入的电子邮件

> ID：14020905
> 
> 赞同：2
> 
> 时间：2012-12-24T11:39:12.193
> 
> 标签：vba, outlook

我正在尝试将通过 Outlook 传入的消息保存到我的本地文件系统。我到目前为止的代码是：

```
Sub save_to_dir(Item As Outlook.MailItem)
 'the mail we want to process
Dim objItem As Outlook.MailItem
 'question for saving, use subject to save
Dim strPrompt As String, strname As String
 'variables for the replacement of illegal characters
Dim sreplace As String, mychar As Variant, strdate As String
 'put active mail in this object holder 

Set objItem = Outlook.ActiveExplorer.Selection.Item(1)

 'check if it's an email ... need to take a closer look cause
 'gives an error when something else (contact, task) is selected
 'because objItem is defined as a mailitem and code errors out
 'saving does work, if you take care that a mailitem is selected
 'before executing this code
 mypath = "c:\temp\outlook\"
If objItem.Class = olMail Then
    ' check on subject
    If objItem.Subject <> vbNullString Then
        strname = objItem.Subject
    Else
        strname = "No_Subject"
    End If
    strdate = objItem.ReceivedTime
     'define the character that will replace illegal characters
    sreplace = "_"
     'create an array to loop through illegal characters (saves lines)
    For Each mychar In Array("/", "\", ":", "?", Chr(34), "<", ">", "¦")
         'do the replacement for each character that's illegal
        strname = Replace(strname, mychar, sreplace)
        strdate = Replace(strdate, mychar, sreplace)
    Next mychar
     'Prompt the user for confirmation
    'strPrompt = "Are you sure you want to save the item?"
    'If MsgBox(strPrompt, vbYesNo + vbQuestion) = vbYes Then
        objItem.SaveAs mypath & strname & "--" & strdate & ".msg", olMSG
    ' Else
    '    MsgBox "You chose not to save."
    'End If
End If
End Sub 
```

此代码的问题是，当您在 Outlook 中选择了电子邮件进入时，它使用所选项目而不是收到的**邮件**

我怎样才能得到收到的电子邮件？

谢谢

## 编辑

调试完这一行 Set objItem = Outlook.ActiveExplorer.Selection.Item(1)

我发现 Outlook.ActiveExplorer.Selection.Item(1) 中有当前的电子邮件，但是当我在执行该行后查看 objItem 时，objItem 的值是当前在 Outlook 中选择的电子邮件，而不是传入的电子邮件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:06:52.027

可以在这里找到一篇好的参考文章：[http ://www.outlookcode.com/article.aspx?id=62](http://www.outlookcode.com/article.aspx?id=62)

我已将示例一改编如下：

```
Sub save_to_dir_test1(mymail As MailItem)
Dim strID As String
Dim objMail As Outlook.MailItem

strID = mymail.EntryID
Set objMail = Application.Session.GetItemFromID(strID)
mypath = "c:\temp\outlook\"
strdate = objMail.ReceivedTime
If objMail.Subject <> vbNullString Then
        strname = objMail.Subject
   Else
        strname = "No_Subject"
End If
sreplace = "_"
'create an array to loop through illegal characters (saves lines)
For Each mychar In Array("/", "\", ":", "?", Chr(34), "<", ">", "¦")
'do the replacement for each character that's illegal
   strname = Replace(strname, mychar, sreplace)
   strdate = Replace(strdate, mychar, sreplace)
Next mychar
objMail.SaveAs mypath & strname & "--" & strdate & ".msg", olMSG

Set objMail = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T02:38:54.760

您可以在 Outlook 中设置传入电子邮件的“规则”，在操作中选择“运行脚本”，选择下面的子

并将下面的子放在这个outlooksession模块的一个模块中

```
Sub testing(MyMail As MailItem)
 MyMail.SaveAs ' your path here
end sub 
```

希望能帮助到你

# ios - 使用 UIDatepicker 的本地通知

> ID：14020906
> 
> 赞同：0
> 
> 时间：2012-12-24T11:39:12.540
> 
> 标签：ios, notifications, uidatepicker

我如何为我的应用程序创建本地通知并在通知显示和用户使用 UIDatePicker 设置通知时间时振动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:59:47.007

从您的 DatePicker 注册 UIControlEventValueChanged 消息并设置 UILocalNotification 然后安排它

# c# - 用于 XML 编码和 Http 通信的 .Net Remoting 和 Web Service 之间的区别

> ID：14020908
> 
> 赞同：1
> 
> 时间：2012-12-24T11:39:30.280
> 
> 标签：c#, .net, web-services, remoting

MSDN 将 Remoting 描述为：-

格式化程序用于在通道传输消息之前对消息进行编码和解码。应用程序可以在性能至关重要的情况下使用二进制编码，或者在与其他远程处理框架的互操作性至关重要的情况下使用 XML 编码。所有 XML 编码都使用 SOAP 协议将消息从一个应用程序域传输到另一个应用程序域。

MSDN 中的定义说 Remoting 可用于互操作性，在这种情况下，数据使用 SOAP 协议编码为 XML 消息并通过 HTTP 传输。由于 Remoting 的这种行为使其具有互操作性，Web 服务在面向服务的体系结构中带来了什么好处或功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:10:21.540

当涉及到 WebServices 与 Remoting 时，与 Remoting 相比，Web Service 的功能较少，例如在 Remoting 中，您有回调、Sponser Time、Lease Time 等，但 SOAP 协议仅适用于 WebServices。远程处理主要用于 TCP IP 协议或 Intranet 应用程序，当涉及到 HTTP 和 HTTPS 通信时，可以使用远程处理，但需要注意防火墙。

看看这个链接

[WebService 和 Remoting 的区别](https://stackoverflow.com/questions/7791939/difference-between-webservice-and-remoting)

或者

[http://msdn.microsoft.com/en-us/library/ms978420.aspx](http://msdn.microsoft.com/en-us/library/ms978420.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:01:30.040

如果两者都使用 XML 格式化程序和 HTTP 协议，那么我认为唯一的区别是您可以在 Remoting 中使用接口类型，即服务可以返回一个接口，如果您的提供者和消费者环境使用 .net 进行开发，这将非常有用。

# css - 过渡不透明度以淡入动画

> ID：14020910
> 
> 赞同：1
> 
> 时间：2012-12-24T11:39:31.480
> 
> 标签：css, css-transitions

我一直在为朋友和家人制作圣诞电子贺卡，其中一部分包括过渡/动画的淡入淡出。我找到了替代解决方案（例如这个： http: [//fvsch.com/code/transition-fade/test5.html](http://fvsch.com/code/transition-fade/test5.html)），但我不知道为什么我现在的代码不起作用 -动画只是不喜欢不透明度吗？

代码：

```
#ChristmasTree{
    position:absolute;
    left:750px;
    top:20px;
    background-image:url(http://i.imgur.com/uk7Z3.png);
    opacity:0.0;    
    animation-play-state:running;
    -moz-play-state:running;
    -ms-play-state:running;
    -o-play-state:running;
    -webkit-animation-play-state:running;    
    animation:treeFadeIn 3s;
    -moz-animation:treeFadeIn 3s;
    -ms-animation:treeFadeIn 3s;
    -o-animation:treeFadeIn 3s;
    -webkit-animation:treeFadeIn 3s;
}

@-moz-keyframes treeFadeIn{
    from{opacity:0.0}
    to{opacity:1}
}

@-webkit-keyframes treeFadeIn{
    from{opacity:0.0}
    to{opacity:1}
}

@-o-keyframes treeFadeIn{
    from{opacity:0.0}
    to{opacity:1}
}

@-ms-keyframes treeFadeIn{
    from{opacity:0.0;}
    to{opacity:1;}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:44:06.177

首先，当您使用图像作为背景时，您需要给予`height`和`width`给您。此外，您真的需要绝对位置吗？`div`如果是，请确定您使用的是`position: relative;`容器，这里我也设置了高度和宽度，您可以根据您使用的图像替换它们，也不`opacity: 0.0;`是必需的，`opacity: 0;`足够了，我也添加`animation-iteration-count:infinite;`了无限动画迭代

[**演示**](http://jsfiddle.net/gWtfe/)

```
#ChristmasTree {
    position:relative;
    left:250px;
    top:20px;
    height: 200px;
    width: 300px;
    background-image:url(http://images.google.co.in/intl/en_ALL/images/logos/images_logo_lg.gif);
    opacity:0.0;    
    animation-play-state:running;
    -moz-play-state:running;
    -ms-play-state:running;
    -o-play-state:running;
    -webkit-animation-play-state:running;    
    animation:treeFadeIn 3s;
    -moz-animation:treeFadeIn 3s;
    -ms-animation:treeFadeIn 3s;
    -o-animation:treeFadeIn 3s;
    -webkit-animation:treeFadeIn 3s;
    animation-iteration-count:infinite;
} 
```

如果您想要淡入淡出效果，则可以[在这里查看我的另一个答案](https://stackoverflow.com/questions/13979438/css3-fade-animations/13979485#13979485)

# xmpp - 如何扩展 XMPP 安装？

> ID：14020912
> 
> 赞同：5
> 
> 时间：2012-12-24T11:39:34.480
> 
> 标签：xmpp, scalability, ejabberd, xmppframework

我们正在从头开始构建 XMPP 服务器（由于我们的特定需求）。我们无法清楚了解的领域之一是如何扩展 XMPP。假设我有 10,000 个用户，每个 XMPP 服务器实例最多可以处理 2,000 个并发客户端/连接。我们将运行 XMPP 的多个实例，客户端将使用它来连接到正在运行的实例之一，如此处所述：http: [//xmpp.org/rfcs/rfc6120.html#tcp-resolution-prefer](http://xmpp.org/rfcs/rfc6120.html#tcp-resolution-prefer)

我认为所有主要的 XMPP 服务提供商都使用多个服务器，例如 Google 使用 5 个 XMPP 服务器，如下所述：http: //kingant.net/check_xmpp_dns/?h= [kingant.net](http://kingant.net/check_xmpp_dns/?h=kingant.net)

现在假设我有两个用户：A 和 B。A 连接到 server_1，B 连接到 server_2。当 A 向 B 发送消息时，从 A 到 server_1 到 sever_2 到 B 的整个消息流是如何发生的？server_1 是如何知道 B 连接到 server_2 的？这是通过 S2S 完成的吗？同样，我只关心可扩展性，而不关心两个不同 XMPP 服务提供商之间的互操作。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:13:06.363

没有关于如何扩展 XMPP 服务器的通用规则。这实际上取决于您要构建的项目类型。ejabberd 提供了制作非常可扩展的服务器的基本工具，但您需要详细了解 XMPP 如何工作以及如何设计项目以使其工作。

我建议你阅读：[http ://blog.process-one.net/scale_means_skills/](http://blog.process-one.net/scale_means_skills/)

注意：Google 的 XMPP 服务器远不止 5 个。

# bash - 在 2 个进程（第 3 个）之间使用的命名管道有什么问题？

> ID：14020916
> 
> 赞同：0
> 
> 时间：2012-12-24T11:39:55.510
> 
> 标签：bash, process, parallel-processing, named-pipes

经过大约 100 次组合后，我得到了以下代码，该代码使用一个进程作为服务器，通过管道读取来自客户端的响应，我称之为“伦敦”函数，它是管道“london_pipe”（我非常不确定将管道称为“伦敦” ' 也是因为命名冲突？）。在下面，有 2 个客户端，每个客户端都通过自己的管道与服务器进行通信以读取数据。我遵循相同的命名约定，使用用于**读取**的函数的名称来命名管道。所以，'berlin' 正在读取 'berlin_pipe' 等。

整体结构使用1个管道到1个客户端和1个管道用于服务器，如下所示：

```
london ----writes madrid pipe-------->
london <----reads london_pipe----<-  |
london ----writes berlin_pipe---> |  |
                                | ^  |
                                | |  |
berlin <---reads berlin_pipe--<-  |  |
berlin ----writes london_pipe-----|  |
                                  ^  |
                                  |  |
madrid ----writes london_pipe------  v
madrid <----reads madrid_pipe------<- 
```

现在，当我运行我的代码时，我遇到了一个非常奇怪的情况，我的客户反复读取空字符串 - 当我构建我的程序时 - 他们响应向服务器发送错误警报！当我添加 if 子句（参见代码注释）时，问题就消失了！

任何人都可以解释我的管道的奇怪行为吗？还是代码本身存在某种问题？

简而言之，一些澄清：代码

```
while true; do
.......
done 4<"$pipename" 
```

即使 fd 4 每次都反复用于指向不同的管道，也适用于所有客户端。现在代码：

```
#!/bin/bash
shopt -u failglob
shopt -s extglob nullglob dotglob

DIR=$( cd "$( dirname "$0" )" && pwd )

#the server
function london (){
   local i message answer london_pipe berlin_pipe madrid_pipe
   london_pipe=london_$RANDOM.$RANDOM.$RANDOM.$$
   madrid_pipe=madrid_$RANDOM.$RANDOM.$RANDOM.$$
   berlin_pipe=berlin_$RANDOM.$RANDOM.$RANDOM.$$
   cd $DIR
   mkfifo $london_pipe
   mkfifo $madrid_pipe
   mkfifo $berlin_pipe
   ( madrid $madrid_pipe $london_pipe ) &
   ( berlin $berlin_pipe $london_pipe ) &
   i=0

   while true; do
      if [[ i -gt 100 ]]; then
         echo 'quit' > $madrid_pipe
         echo 'quit' > $berlin_pipe
         break
      else
         echo "loop #$i"
         echo '========='
         message="London loop (#$i)"

         #***send to Madrid***#
         echo "$message" > $madrid_pipe

         read -r answer <&3
         echo 'London says:> '"$answer"

         #***send to Berlin***#
         echo "$message" > $berlin_pipe

         read -r answer <&3
         echo 'London says:> '"$answer"
         (( i++ ))
      fi
   done 3< $london_pipe

   wait
   cd "$DIR"
   rm -rf $london_pipe
   rm -rf $madrid_pipe
   rm -rf $berlin_pipe
}

#a client
function berlin (){
   local i message answer berlin_pipe london_pipe
   berlin_pipe=$1
   london_pipe=$2
   cd $DIR
   i=0
   exec 3> $london_pipe
   while true; do

      read -r answer <&4
      #***if deleted it reads empty strings!!!***#
      if [[ ! $answer ]]; then
         continue
      fi
      echo 'Berlin says:> '"$answer"

      message="Greetings from Berlin!($i)"
      echo "$message" >&3
  (( i++ ))

      if [[ $answer = 'quit' ]]; then
         break
      fi
   done 4< "$berlin_pipe"
}

#another client
function madrid (){
   local i message answer madrid_pipe london_pipe
   madrid_pipe=$1
   london_pipe=$2
   cd $DIR
   i=0
   exec 3> $london_pipe
       while true; do

      read -r answer <&4
      #***if deleted it reads empty strings!!!***#
      if [[ ! $answer ]]; then
         continue
      fi
      echo 'Madrid says:> '"$answer"

      message="Greetings from Madrid!($i)"
      echo "$message" >&3
      (( i++ ))

      if [[ $answer = 'quit' ]]; then
         break
      fi
   done 4< "$madrid_pipe"
}

london 
```

如果代码是这个块

```
 #***if deleted it reads empty strings!!!***#
      if [[ ! $answer ]]; then
         continue
      fi 
```

有了这个，一些结果是：

```
loop #97
=========
Madrid says:> London loop (#97)
London says:> Greetings from Madrid!(97)
Berlin says:> London loop (#97)
London says:> Greetings from Berlin!(97) 
```

没有两个客户：

```
loop #91
=========
Madrid says:> London loop (#86)
Madrid says:> London loop (#87)
Madrid says:> London loop (#88)
Madrid says:> London loop (#89)
Madrid says:> London loop (#90)
Madrid says:> 
Madrid says:> 
Madrid says:> 
```

很明显，“马德里”确实读取了空字符串以及来自“伦敦”的循环编号为 86 等的消息，这些消息已被先前的空读取推送，现在出现故障。有人可以解释一下吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:52:51.230

问题在于您如何写入管道`london`：`echo "$message" > $madrid_pipe` 这会为每次写入打开和关闭管道，这与您在保持管道打开的其他端点中所做的不同。这会产生竞争条件：如果`berlin`或`madrid`碰巧在管道关闭时尝试读取，它们的读取将不返回任何数据，请参阅`man 7 pipe`：

> 如果所有引用管道写入端的文件描述符都已关闭，则尝试从管道读取（2）将看到文件结束（读取（2）将返回 0）。

解决方案很简单，要么像你一样处理这个问题，要么确保`london`管道保持畅通。

# postgresql - 在 PostgreSQL 中以秒为单位查找时间戳之间的差异

> ID：14020919
> 
> 赞同：159
> 
> 时间：2012-12-24T11:40:01.557
> 
> 标签：postgresql

我有一个`PostgreSQL 8.3`有 2`timestamp`列的表。我想`timestamps`在几秒钟内得到这些之间的区别。你能帮我完成这件事吗？

```
TableA
(
  timestamp_A timestamp,
  timestamp_B timestamp
) 
```

我需要在几秒钟内得到类似`(timestamo_B - timestamp_A)`的东西*（不仅仅是秒之间的差异，它应该包括小时、分钟等）*。

* * *

## 回答 #1

> 赞同：307
> 
> 时间：2012-12-24T11:43:24.007

尝试： 

```
SELECT EXTRACT(EPOCH FROM (timestamp_B - timestamp_A))
FROM TableA 
```

详细信息在这里：[提取](http://www.postgresql.org/docs/current/static/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-12-24T11:47:44.363

```
select age(timestamp_A, timestamp_B) 
```

* * *

回答伊戈尔的评论：

```
select age('2013-02-28 11:01:28'::timestamp, '2011-12-31 11:00'::timestamp);
              age              
-------------------------------
 1 year 1 mon 28 days 00:01:28 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-04-16T16:41:24.270

```
SELECT (cast(timestamp_1 as bigint) - cast(timestamp_2 as bigint)) FROM table; 
```

如果有人在使用*extract*时遇到问题。

# python - 在 SWIG 中处理结构数组

> ID：14020922
> 
> 赞同：1
> 
> 时间：2012-12-24T11:40:15.787
> 
> 标签：python, swig

我正在尝试包装一个需要将结构数组传递给它的 C 函数。

我的 .i 文件中的函数定义是：

```
extern HRESULT WINAPI ScriptItemize(
const WCHAR           *pwcInChars,    // In   Unicode string to be itemized
int                   cInChars,       // In   Codepoint count to itemize
int                   cMaxItems,      // In   Max length of itemization array
const SCRIPT_CONTROL  *psControl,     // In   Analysis control (optional)
const SCRIPT_STATE    *psState,       // In   Initial bidi algorithm state (optional)
SCRIPT_ITEM           *pItems,        // Out  Array to receive itemization
int                   *pcItems);      // Out  Count of items processed (optional) 
```

结构 SCRIPT_CONTROL、SCRIPT_STATE 和 SCRIPT_ITEM 之前都已在 .i 文件中定义。

我可以通过包括以下几行来表明 pcItems 是一个返回值：

```
%include <typemaps.i>
%apply int *OUTPUT {int *pcItems}; 
```

但是，尝试对 pItems 做同样的事情：

```
%apply SCRIPT_ITEM *OUTPUT {SCRIPT_ITEM *pItems}; 
```

我收到这个警告：

```
Can't apply (SCRIPT_ITEM *OUTPUT). No typemaps are defined. 
```

如何指示 pItems 是返回值？

另外，如何从 Python 中创建 SCRIPT_ITEM 结构数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:11:04.947

我设法通过更改我的 .i 文件来找到执行此操作的方法，如下所示：

```
%include <carrays.i>

%array_class(SCRIPT_ITEM, SCRIPT_ITEM_ARRAY);

extern HRESULT WINAPI ScriptItemize(
const WCHAR           *pwcInChars,    // In   Unicode string to be itemized
int                   cInChars,       // In   Codepoint count to itemize
int                   cMaxItems,      // In   Max length of itemization array
const SCRIPT_CONTROL  *psControl,     // In   Analysis control (optional)
const SCRIPT_STATE    *psState,       // In   Initial bidi algorithm state (optional)
SCRIPT_ITEM_ARRAY     *pItems,        // Out  Array to receive itemization
int                   *pcItems);      // Out  Count of items processed (optional) 
```

# mysql - 奇怪的 MySQL AVG() 异常 NULL 值

> ID：14020924
> 
> 赞同：19
> 
> 时间：2012-12-24T11:40:23.960
> 
> 标签：mysql, sql, null

我在做什么 ：

```
create table sample (id INT(10) PRIMARY KEY AUTO_INCREMENT,name varchar(255),marks INT(10));

insert into sample (name,marks) VALUES('sam',10);
insert into sample (name,marks) VALUES('sam',20);
insert into sample (name,marks) VALUES('sam',NULL);
insert into sample (name,marks) VALUES('sam',NULL);
insert into sample (name,marks) VALUES('sam',30);

select AVG(marks) from sample GROUP BY(name); 
```

**我预期的输出：**

> 平均数 = (10+20+30)/5 = 12

**MYSQL 的输出：**

> 平均数 = (10+20+30)/3 = 20

理想情况下，我想要的是 MYSQL 应该得到 5 行的总和并将其除以 5 ，但它只除以 3 （非 NULL 行）

为什么会发生这种情况，我该怎么做才能获得正确的 AVG 即 60/5？PS：我不能将标记字段设为 NOT NULL，在我的数据库设计中，标记字段允许为 NULL。

谢谢

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-24T11:43:02.043

这是正确的行为，因为`NULL`与 number 不同`0`。
这可能会让一些不会说英语的人感到惊讶，因为在许多语言中“null”等同于“zero”。

从概念上讲，[`NULL`](http://dev.mysql.com/doc/refman/5.5/en/working-with-null.html)指的是“未知值”，因此它的处理方式与其他值不同。这就是为什么像ignore s这样的[聚合函数。](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html)[`AVG()`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_avg)`NULL`

[`AVG()`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_avg)仅计算所有“已知”值的平均值。（=*不*为NULL）

来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html)：

> 除非另有说明，否则组函数会忽略 NULL 值。

另外，请阅读 MySQL 手册的[“3.3.4.6 使用 NULL 值”部分](http://dev.mysql.com/doc/refman/5.5/en/working-with-null.html)`NULL`中的s概念。

为了得到你想要的，你可能会做

```
SELECT AVG(IFNULL(marks, 0)) 
FROM sample 
GROUP BY name; 
```

[`IFNULL()`](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_ifnull)`NULL`如果该值是或通过该值，则返回用于计算的第二个参数。

* * *

关于`NULL`. 这些也在手册的[“5.5.3 NULL问题”](http://dev.mysql.com/doc/refman/5.5/en/problems-with-null.html)部分中进行了解释：

> *   在 SQL`NULL`中，与任何其他值（甚至`NULL`. 除非在文档中针对表达式中涉及的运算符和函数另有说明，否则包含的表达式`NULL`始终会产生一个值。即：导致 NULL 而不是. 也会导致 NULL，而不是 true。`NULL`
>     
>     `NULL == 0``true``NULL == NULL`
> *   要搜索为 的列值`NULL`，您不能使用`expr = NULL`测试。要查找`NULL`值，您必须使用`IS NULL`测试。
> *   使用`DISTINCT`、`GROUP BY`或`ORDER BY`时，所有`NULL`值都被视为相等。
> *   使用 时`ORDER BY`，`NULL`首先显示值，如果您指定`DESC`按降序排序，则最后显示值。
> *   对于某些数据类型，MySQL 专门处理 NULL 值。如果插入`NULL`列`TIMESTAMP`，则插入当前日期和时间。
> *   如果您插入`NULL`到具有该属性的整数或浮点列中，`AUTO_INCREMENT`则会插入序列中的下一个数字。
> *   定义了键的列`UNIQUE`仍然可以包含多个`NULL`值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T11:43:11.893

尝试：

```
select avg(case marks when null then 0 else marks end) from sample group by name; 
```

或者尝试避免表中的空值；）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T11:44:57.713

你可以这样做：

```
SELECT SUM(marks) / COUNT(name)
FROM sample 
GROUP BY name; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T11:58:54.160

这是正常行为，因为 NULL 不为零。你如何使 5 + NULL 的平均值？所以 MySQL 只取可以平均的行。

除了其他用户已经给您的正确答案之外，您还可以使用 COALESCE 函数，该函数返回您在列表中指定的第一个非 NULL 值，因此您可以将 NULL 替换为您喜欢的值：

```
 SELECT AVG(COALESCE(marks,0)) FROM sample GROUP BY(name); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-11T05:12:39.740

```
SELECT
       avg(CASE WHEN price IS NULL THEN 0 else price END), 
       avg(CASE WHEN discount IS NULL THEN 0 else discount END), 
       avg(CASE WHEN total IS NULL THEN 0 else total END) 
FROM pet; 
```

# git - Git - 忽略特定文件夹中的扩展名

> ID：14020931
> 
> 赞同：2
> 
> 时间：2012-12-24T11:41:35.727
> 
> 标签：git, gitignore

.gitignore 排除目录`*.cache`所有子目录中的所有文件的正确语法是什么`/StringsEditor`？

我都试过了`/StringsEditor/*.cache`，`/StringsEditor/*/*.cache`但没有一个有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T11:53:24.930

这大概是误会的结果。.gitignore 中的路径不需要相对于存储库的根目录。即您可以忽略`*.cache`. 如果您实际上只希望 StringsEditor 子目录发生这种情况，那么您可以使用`StringsEditor/**/*.cache`.

更多信息[在这里](https://stackoverflow.com/questions/1470572/gitignore-ignore-any-bin-directory)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T11:59:45.707

就放进`*.cache`去`StringsEditor/.gitignore`。

# xml - 用 ANT 任务替换 xml 文件中的值

> ID：14020933
> 
> 赞同：1
> 
> 时间：2012-12-24T11:41:57.377
> 
> 标签：xml, ant

我想`xml`通过`ANT`任务替换元素的值......实现这一目标的最佳方法是什么？

**示例：** `abc.xml`包含一个元素`<setpath> true </setpath>`。我想通过任务替换`<setpath>`as的值。`false``ANT`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:47:34.613

使用[replace](http://ant.apache.org/manual/Tasks/replace.html)或[replaceRegexp](http://ant.apache.org/manual/Tasks/replaceregexp.html)任务，或者，如果确实需要，使用[xslt](http://ant.apache.org/manual/Tasks/style.html)任务。

# android - 恢复包含动态生成的 HTML 的 webview 状态

> ID：14020934
> 
> 赞同：5
> 
> 时间：2012-12-24T11:42:03.327
> 
> 标签：android, webview, state

我的应用程序中有一个`WebView`加载动态内容的应用程序，我希望视图在设备旋转时保持不变。所以我写了以下几行代码：

```
@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    mWebView.saveState(outState);
} 
```

在我的 onCreate() 中：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if (savedInstanceState != null) {
        if(D.bug){
            Log.i(TAG, "Restoring browser state");
        }
        mWebView.restoreState(savedInstanceState);
    } else {
        if(D.bug){
            Log.i(TAG, "Not restoring browser state");
        }
        mWebView.loadUrl("file:///android_asset/html/browser_3col.html");
    }
    return mWebView;
} 
```

但这有效地重新加载了页面。我想传递动态生成的 HTML。

我正在考虑通过 . 转储整个文档 HTML `JavascriptInterface`，将其存储在 outState 中，然后通过`JavascriptInterface`.

这是一个好方法吗？没有任何方法`WebView`可以让我获得它的内部 HTML 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T23:07:27.137

我当前的解决方案具有以下代码：

在我的 JavaScript 代码中：

```
window.JSInterface.dumpInnerHtml(document.documentElement.innerHTML); 
```

在我的`JavascriptInterface`：

```
@JavascriptInterface
public void dumpInnerHtml(String htmlDump) {
    if (!mBrowseFragment.isDetached()) {
        mBrowseFragment.updateWebviewHtml(htmlDump);
    } 
} 
```

在`onSaveInstance()`：

```
 super.onSaveInstanceState(outState);
    mWebView.saveState(outState);
    outState.putString(INSTANCE_CONTAINER_HTML, mCurrentHtmlDump); 
```

在`onCreate()`：

```
if (savedInstanceState != null) {
        mWebView.restoreState(savedInstanceState);
        String restoredHtml = savedInstanceState
                .getString(INSTANCE_HTML);
        if (restoredHtml != null) { 
            mWebView.loadData(restoredHtml, "text/html", "utf-8");
        }
} 
```

它几乎可以工作。但我有一些问题。似乎 loadData() 不解释脚本标签。（我的 js 函数坏了。），我觉得这可以更优雅地解决。

# java - linux 上的 swing 和 javafx 支持

> ID：14020939
> 
> 赞同：0
> 
> 时间：2012-12-24T11:42:14.130
> 
> 标签：java, linux, swing, javafx-2

我也使用`javafx`控件在 java swing 上创建了一个项目。现在我正在尝试运行我的项目，`Linux`但它显示了我理解的不受支持的类版本。现在我正在尝试编译类文件，然后它显示了很多错误，即使它不支持 java swing 类。我已经安装`jre1.7.0`在我的 Linux 用户
目录上。我还应该安装任何其他 java 版本吗？一个只在屏幕上打印的简单程序运行顺利。

# c++ - 使用常量修饰符引用

> ID：14020940
> 
> 赞同：3
> 
> 时间：2012-12-24T11:42:26.160
> 
> 标签：c++, reference, constants

第一：：

```
double & val = 66.6;     //illegal
const double & val = 66.6;   //legal 
```

我只是在做一些演示程序并通过了上述概念，但无法确定上述概念的确切需求。在第二种情况下 const 到底在做什么？

第二个：：

```
int nVar = 12;
int &rVar = nVar ;//Ok
double &dVar = nVar ;//Error
const double &cdVar = nVar ;//Ok 
```

为什么第 3 条语句在第 4 条语句起作用的地方不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T11:44:11.513

第一个是非法的。您不能将非常量引用绑定到临时对象。

二是合法。它创建一个临时的 double，初始化为`66.6`，并对它`val`进行 const 引用。

承诺不会通过`const`引用改变值。C++ 不允许您将非常量引用绑定到临时对象，因为这通常是一个错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T11:56:05.943

让我演示给你看。

```
void f(Base*& p) { p = new Base; }
int main() {
    Derived* d;
    f(d); // Creates temporary Base* and calls f with it
    // Dude, where's my object?
} 
```

如您所见，这引入了一个令人讨厌的错误。首先，对象被泄露并且无法恢复，因为 to 的参数`f`实际上根本没有引用`d`。其次，即使在`d`中成功变异`f`，也会是错误的类型，违反类型系统。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T11:52:05.003

由于 val 是对另一个变量的引用，理论上这就像在旧的 fortran 时代一样，将 1.0 作为引用传递给函数（无论在 fortran 中调用什么方法），您可以将 1.0 更改为其他内容。其他使用 1.0 作为常量的代码将使用新值。我会说，不允许这样做是个好主意。

所以，C++ 标准只允许对任何你不应该修改的东西进行常量引用——如果你以后这样做，你期望什么效果`val += 4.0`？常数 66.6 变成 70.6？

编辑：我认为情况是你有一个功能

```
void func(double &d)
{
    d += 4.0;
} 
```

你不能把它称为：

```
func(66.6); 
```

所以你尝试了：

```
double &val = 66.6; 
```

那也没用？

解决此问题的正确方法是：

```
double val = 66.6;

func(val);    // compiler makes a reference to val that is passed to func. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T11:51:42.273

`double & val = 66.6;`

这不会编译，您不能将引用绑定到临时对象。

`const double & val = 66.6;`

这是有效的，并且会导致对临时 的引用`66.6`。

我看不出有任何理由将值声明为引用，将其创建为 a `const double val = 66.6;`，然后如果以后需要将其作为引用传递。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T11:52:57.143

第二种情况下的 const 告诉编译器不要复制右边的值。在您的情况下，这并没有太大区别（编译器可能会生成相同的代码）。

但在以下情况下，结果`someFunction`不是复制而是分配。如果它发生很多或者返回的对象的副本很昂贵，这将特别有用。

```
const double & val = someFunction(); 
```

您实际上在做的是扩展堆栈上值/对象的“生命周期”，而不是复制它。这被称为“临时”。由于创建值/对象的代码不知道您将使用它，因此您必须制作它`const`。

# javascript - 使用 Javascript 拆分由“&”分隔的键值对响应

> ID：14020941
> 
> 赞同：2
> 
> 时间：2012-12-24T11:42:26.177
> 
> 标签：javascript, jquery

> **可能重复：**
> [在 JavaScript 中解析查询字符串](https://stackoverflow.com/questions/2090551/parse-query-string-in-javascript)

我收到了来自服务器的这种格式的响应——`Status=105&Accno=1458874455&Name=XYZ&Bal=5,888.00` 这里的“&”表示分隔符。

我需要遍历字符串响应并根据 '&' 在 JavaScript 中拆分此字符串，并获取值并将它们存储为：

```
Status=105
Accno=1458874455
Name=XYZ
Bal=5,888.00 
```

这样我就可以将它们填充到相应的文本框中并下拉。

我正在使用 jQuery 和 AJAX 来接收响应。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T11:44:56.080

您可以使用 split 来获取数据：

```
data = response.split("&"); 
```

一旦你有了“key=value”格式的数据，你可以再次拆分并添加到字典中：

```
processed_data = new Object();

for(i = 0; i < data.length, i++){
    m = data[i].split("=");
    processed_data[m[0]] = m[1];
} 
```

您可以像这样使用字典：

```
processed_data["Status"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:45:42.510

使用**str.split("&")**分隔每个键值对。然后使用**str.split("=")**将密钥与对分开。

# windows - 如何在批处理文件函数参数中转义 & 符号？

> ID：14020944
> 
> 赞同：3
> 
> 时间：2012-12-24T11:42:35.443
> 
> 标签：windows, batch-file, escaping

这是关于*[如何在批处理文件中转义 & 符号的问题的延续？](https://stackoverflow.com/questions/1327431/how-do-i-escape-ampersands-in-batch-files)*.

该问题提出了一些在批处理文件中使用与号的方法。但是，似乎这些都不适用于函数参数。例子：

```
@echo off
setlocal EnableDelayedExpansion

call:myFunction "http://www.google.com/search?client=opera&q=escape+ampersand"

goto:eof

:myFunction
echo Param is: %~1
goto:eof 
```

我总是会得到

```
Param is: http://www.google.com/search?client=opera
'q' is not recognized as an internal or external command,
operable program or batch file. 
```

我试图`^`逃避它，但这似乎也不起作用。有办法吗？

如果重要的话，我的实际用例是为 wget 提供一个下载 URL，该 URL 在批处理函数中被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:43:44.013

现在觉得有点傻...

```
@echo off
setlocal EnableDelayedExpansion

call:myFunction "http://www.google.com/search?client=opera&q=escape+ampersand"

goto:eof

:myFunction
echo Parameter is: "%~1"
goto:eof 
```

结果：

```
Parameter is: "http://www.google.com/search?client=opera&q=escape+ampersand" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:14:05.677

`^&`是正确的转义方式，但通常不需要双引号。

资料来源：*[转义字符](http://www.robvanderwoude.com/escapechars.php)*

# linux - cp文件时如何将最后一个主题日期附加到文件名后缀

> ID：14020945
> 
> 赞同：0
> 
> 时间：2012-12-24T11:42:37.940
> 
> 标签：linux, shell

我想将最后一个**主题日期**附加到将被复制的 FileName 我只知道如何将**当前日期**附加到文件中，例如：

```
 find -name *.log  -exec cp {} {}__$(date "+%F")__bak \; 
```

和 test.log --> test.log__2012.12.24__bak

我想要 test.log --> test.log__{last_mofigy_date}__bak

但是如何将**最后修改日期**附加到文件名，最好是在一个语句中完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:07:37.213

单程：

```
$ for file in $(find .  -name *.log )
> do
>  x=$(stat -c %y $file)
>  echo cp $file ${file}_${x%% *}_bak
> done 
```

此片段将显示`cp`形成的命令集。如果正确，请删除 echo 并运行它以复制文件。

**更新：** 另一种仅使用 find 和 exec 的方法：

```
 find . -name *.log -exec bash -c 'x={} ; y=$(stat -c %y $x); echo cp $x ${x}_${y%% *}_bak ' \; 
```

# coffeescript - 在 coffescript rails 中测试正则表达式

> ID：14020954
> 
> 赞同：0
> 
> 时间：2012-12-24T11:43:33.573
> 
> 标签：coffeescript

如何使用咖啡脚本测试模式是否存在。我正在检查从服务器发送的数据。

目前我正在使用 /false/.test(data)，其中数据是从服务器输出数据。

它不工作。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T19:33:39.090

查找 JS 正则表达式文档，例如[Mozilla 的正则表达式指南](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。

咖啡脚本示例：

```
console.log "found" if (data.search /regexpattern/) >= 0 
```

# ios - sql 选择语句不起作用

> ID：14020956
> 
> 赞同：0
> 
> 时间：2012-12-24T11:43:43.853
> 
> 标签：ios, sql, database, sqlite

我在[这里问过这个问题](https://stackoverflow.com/questions/14003129/sqlite-query-loop-not-working/14003267#comment19332319_14003267)

当我运行这个查询 `NSString *qsql = [NSString stringWithFormat:@"SELECT * FROM site"];`

它工作正常，但是当我尝试这个查询 `NSString *qsql = [NSString stringWithFormat:@"SELECT name FROM site WHERE latitude LIKE %f AND longitude LIKE %f",pin_lat,pin_long];` 时它不起作用，而我可以在控制台中使用 NSLog(@"lat = %f and long=%f",pin_lat,pin_long) 打印 lat, long 的值，它会打印正确的值那么为什么它没有在查询中取值呢？

我尝试修改查询，但它根本不起作用

修改后的查询就像 -`NSString *qsql = [NSString stringWithFormat:@"SELECT name FROM site WHERE latitude LIKE \"%%%f%%\" AND longitude LIKE \"%%%f%%\" ",pin_lat,pin_long];`

但是当我尝试手动输入纬度时它工作正常

```
NSString *qsql = [NSString stringWithFormat:@"SELECT * from site where latitude='-31.7306'"]; 
```

我应该如何修改我的查询以便我可以运行它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:58:28.953

我想，这是因为您`AND`在查询中使用，所以它会选择`row`满足两个条件的。尝试使用`OR`而不是`AND`喜欢

```
NSString *qsql = [NSString stringWithFormat:@"SELECT name FROM site WHERE latitude LIKE '%f' OR longitude LIKE '%f'",pin_lat,pin_long]; 
```

或者，如果您想要满足这两个条件的行，那么您需要在数据库中拥有该值。

或者，它可能会发生，因为`LIKE`尝试完全匹配您提供的内容，您需要使用`%`符号匹配任何内容，然后继续使用该变量。如果你想像你提到的那样匹配你的纬度，你需要使用这样的查询

```
NSString *qsql = [NSString stringWithFormat:@"SELECT name FROM site WHERE latitude LIKE '%.2f%%' OR longitude LIKE '%.2f'",pin_lat,pin_long]; 
```

这将匹配该纬度或经度值中精度为 2 之后的任何值。它将匹配以下值。 **19.241111111
19.242222222
19.243333333**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:01:03.100

如果纬度和经度是数字，则`like`可能无法按预期工作。

什么`like`是搜索适合该模式的字符串，执行`like`没有任何`%`'s 基本上归结为执行较慢版本的`=`.

# c - 从 argv 解析 long long 时出现意外值

> ID：14020957
> 
> 赞同：0
> 
> 时间：2012-12-24T11:43:43.807
> 
> 标签：c, types

我是一名试图闯入 C 语言的 Python 程序员。有人能帮我理解这种意想不到的行为吗？

```
#include <stdio.h>
#include <stdlib.h>

int modulo(int a, int b) {
    return a - b * (a / b);
}

int main(int argc, char **argv) {
    printf("The largest possible LLu is %llu.\n", -1LLu);
    unsigned long long x = atoi(argv[1]);
    unsigned long long i;
    printf("Finding the largest prime number less than %llu.\n", x);
    for(i = 2; i < (x / 2) + 1; i ++) {
        if(modulo(x, i) == 0) {
             i = 2;
             x--;
        }
    }
    printf("Found %d.\n", (int)x);
return(0);
} 
```

然后在终端上：

> ./编 111111111189
> 
> 最大可能的 LLu 是 18446744073709551615。
> 
> 查找小于 18446744073151513109 的最大素数。

然而，对于一些非常大的数字（仍然小于最大 LLu）和较小的数字，该程序按预期工作。

我很困惑！

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:53:15.487

`atoi()`返回`int`您在命令行输入的值会溢出`int`使用`atoll()`，或者甚至更好地使用更灵活且不像可以处理溢出的[strtoll() ：](http://linux.die.net/man/3/strtoll)`atoi()`

```
atoll(argv[1]);
//or 
strtoll(argv[1], NULL, 10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:48:50.913

首先，C 有一个内置的模运算符，`%`. 没有理由自己做。

其次，您的模函数只接受`int`值，并`atoi`返回一个`int`. 因此，您的程序仅限于 a 的范围`int`，而不是`unsigned long long`.

最后，如果它按您预期的那样工作，那么您的预期就会被打破，因为它不会给出正确的输出，因为数字在整个地方都被截断了。

# java - 将 ByteArrayOutputStream 传递给 DataOutputStream 的构造函数

> ID：14020958
> 
> 赞同：0
> 
> 时间：2012-12-24T11:43:50.937
> 
> 标签：java, dataoutputstream, bytearrayoutputstream

我知道这可以使用包装器模式来完成，但我很难理解以下代码是如何工作的。

```
ByteArrayOutputStream bytearray = new ByteArrayOutputStream();
DataOutputStream os = new DataOutputStream(bytearray); 
```

将`ByteArrayOutputStream`引用传递给 of 的构造函数`DataOutputStream`意味着`DataOutputStream`将转换为`ByteArrayOutputStream`，但是如何？

在此之后，`os.writeUTF("String");` 如何`DataOutputStream`转换为`ByteArrayOutputStream`.

幕后发生了什么？有人可以解释一下细节。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T11:48:27.183

`DataOutputStream`唯一需要在其构造函数中实现任何an `OutputStream`。它不关心它是如何实现的，只关心它满足接口。A`ByteArrayOutputStream`提供由字节数组支持的输出流。同样，您可以使用 a`FileOutputStream`来获取由磁盘上的文件支持的流。从`DataOutputStream`的角度来看，它们都是与接口一起使用的流。 `OutputStream`是一个非常简单的接口，只是定义了一些将字节数组写入某种存储设备的方法。

幕后没有魔法，它只是使用 an`OutputStream`并不关心它是如何实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:08:16.597

实际上这可以称为装饰器模式。DataOutputStream 采用任何现有的 OutputStream（在我们的例子中为 ByteArrayOutputStream）并将对它的引用存储在

```
protected OutputStream out; 
```

（实际上 DataOutputStream 在 java.io.FilterOutputStream 中扩展）。

现在让我们看看 DataOutputStream.writeInt 是如何工作的（writeUTF 太重了）

```
public final void writeInt(int v) throws IOException {
    out.write((v >>> 24) & 0xFF);
    out.write((v >>> 16) & 0xFF);
    out.write((v >>>  8) & 0xFF);
    out.write((v >>>  0) & 0xFF);
... 
```

它只需要一个 int arg 并使用常规的 OutputStream.write(byte) 一个字节一个字节地写入它的 4 个字节。在我们的例子中，这些字节将被写入 ByteArrayOutputStream 内部字节数组。如果可以将 ByteArryOutputStream 更改为 FileOuputStream 并将数据写入文件，DataOutuputStream 不需要了解实际实现。

# selenium-webdriver - 如何使用 selenium webdriver java 读取下拉列表中存在的所有值列表？

> ID：14020964
> 
> 赞同：0
> 
> 时间：2012-12-24T11:44:06.917
> 
> 标签：selenium-webdriver

请帮助我阅读 Salesforce 应用程序中的“目标类型”下拉列表中的所有值列表：

HTML：

```
<select id="00N20000002gQI3" name="00N20000002gQI3" tabindex="3">
    <option value="">--None--</option>
    <option value="Asset Finance">Asset Finance</option>
    <option value="Barcap">Barcap</option>
    <option value="Barclaycard">Barclaycard</option>
    <option value="Barclays Wealth">Barclays Wealth</option>
    <option value="BGI">BGI</option>
    <option value="Cash Management">Cash Management</option>
    <option value="DCM">DCM</option>
    <option value="Debt">Debt</option>
    <option value="Deposit">Deposit</option>
    <option value="ECM">ECM</option>
    <option value="ESHLA">ESHLA</option>
    <option value="Financial Need Assessment">Financial Need Assessment</option>
    <option value="FX">FX</option>
    <option value="Generic">Generic</option>
    <option value="Individual Relationship">Individual Relationship</option>
    <option value="M&amp;A">M&amp;A</option>
    <option value="Managing Impairment">Managing Impairment</option>
    <option value="Managing RWAs">Managing RWAs</option>
    <option value="Marketing">Marketing</option>
    <option value="Overall Relationship">Overall Relationship</option>
    <option value="RSG">RSG</option>
    <option value="Sales Finance">Sales Finance</option>
    <option value="Trade">Trade</option>
</select> 
```

请让我知道如何读取下拉列表中存在的所有值...如果您可以共享代码，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T19:52:41.023

这是我以前使用的按值选择选项的方法：

```
public static void selectInDropdownByValue(WebElement we, String val) {
    Select dropDown = new Select(we);           
    List<WebElement> theseOptions = dropDown.getOptions();
    for(WebElement option:theseOptions){
        if(option.getAttribute("value").equals(val)){
            option.click();  
        }
    }   
} 
```

有时，有一些菜单，这还不够。在这种情况下，您需要使用 WebDriver“操作”来物理移动鼠标并单击鼠标按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:16:46.817

您可以使用 Select 类的 getOptions 函数。遍历收到的 webelements 列表并调用 getText 以获取可见选项..类似

```
Select sel = new Select(driver.findElement("yourlocator");
List of WebElements lst = sel.getOptions();
//iterate list with getText 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T19:33:44.947

if you use this, it should return an array of all the *option* elements:

```
element_array = driver.findElement(By.xpath("//select[@id='00N20000002gQI3']/option")) 
```

So you can just extract the text of each element from this array. There's no need to click on the elements.

```
element_array[1].text
element_array[2].text 
```

and etc.

# java - jclouds-如何唯一标识一组计算实例中的一个节点

> ID：14020966
> 
> 赞同：1
> 
> 时间：2012-12-24T11:44:10.833
> 
> 标签：java, jclouds

在一个 java 应用程序中，我启动了一组具有特定组名的虚拟机。

现在，我希望唯一地标识该组中的每个虚拟机。识别虚拟机（属于该组机器的一部分）的代码将直接在该机器本身内运行。我使用什么参数/属性来唯一标识这样的机器？据我了解，“NodeMetadata”标识了每个节点......但是“NodeMetadata”类中的哪个属性用于上述目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:33:27.760

在 jclouds Google Group 中回答了[这里。](https://groups.google.com/forum/?fromgroups=#!topic/jclouds/HJ05Fd6ND6g)

# objective-c - 在 UIButton 上调用默认手势？

> ID：14020967
> 
> 赞同：0
> 
> 时间：2012-12-24T11:44:25.227
> 
> 标签：objective-c, ios

我`UIButton`的`view`.

您是否知道在按钮首次加载时（例如，在 期间`willMoveToSuperview`或在`viewDidLoad`？）时是否为此按钮调用了任何“默认”操作？

例如，也许`UIControlEventTouchUpInside`事件被调用？或其他一些事件？？？。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T11:49:26.080

不，这种性质不应该发生任何事情：按钮没有“默认操作”，而且肯定不能在您的背后调用这些按钮`viewDidLoad`。另一方面，您可以自由地`IBAction`手动调用相应的方法。

> 当按钮被加载时，我希望它以选定的状态显示。

确保发生这种情况的最佳方法是`viewWillAppear`方法。

# iphone - iPhone NSAutoreleaseNoPool 错误

> ID：14020970
> 
> 赞同：0
> 
> 时间：2012-12-24T11:44:42.347
> 
> 标签：iphone, objective-c

iPhone应用程序开发非常新。
我正在使用 Objective-C++ 和 CPP 为 iPhone 模拟器开发一个示例应用程序。

我收到以下错误，我不明白为什么会收到这些错误。

```
2002-1-4 11:11:11.649 myApp[912:592f] *** _NSAutoreleaseNoPool(): Object 0x1b0d2d0 of class NSCFString autoreleased with no pool in place - just leaking
Stack: (0x305a2e6f 0x30504682 0x7c93 0x7b92 0x30d8 0x6ee2 0x1ae95e 0x6013 0x3496 0x43ca 0x39923b 0x3ca0a0 0x3ca121 0x3a1e 0x926d8155 0x926d8012)
2002-1-4 11:11:11.650 myApp[912:592f] *** _NSAutoreleaseNoPool(): Object 0x4f02470 of class __NSArrayReverseEnumerator autoreleased with no pool in place - just leaking
Stack: (0x305a2e6f 0x30504682 0x7c93 0x7b92 0x30d8 0x6ee2 0x1ae95e 0x6013 0x3496 0x43ca 0x39923b 0x3ca0a0 0x3ca121 0x3a1e 0x926d8155 0x926d8012) 
```

我的应用程序中的内存泄漏是否导致这些错误，我得到了这些错误的数量。我有一个更新表格视图的函数，当那个函数被调用时我得到了这些错误，在那个函数中我将元素添加到一个 std::vector 然后调用 [mTableViewList reloadData]; 更新表格视图。

OSX 版本：10.5.8 和 Xcode 版本：3.1.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:51:17.377

该错误意味着还没有池。每当您要调用可可时，您都需要在每个线程上执行此操作

当您使用 GCD 使用调度块时，您很好，操作系统会创建线程和池，但是**每当您自己创建线程时，**您都需要设置 NSAutoreleasePool

在 ARC 下使用 @autoreleasepool，在此之前使用 [[NSAutoreleasePool alloc] init];

# jquery - html文本隐藏与段落ID

> ID：14020979
> 
> 赞同：1
> 
> 时间：2012-12-24T11:45:30.097
> 
> 标签：jquery, html, hide, paragraph

例如，我有 3 段：

```
<p id="txta">AAAAAAAAAAA</p>
<p id="txtb">BBBBBBBBBBB</p>
<p id="txtc">CCCCCCCCCCC</p> 
```

我有一个隐藏它们的脚本，除了一个：

```
$('#buttonc').click(function () {        
        $('#txta').hide();
        $('#txtb').hide();
        $('#txtc').show() 
```

无论如何我可以实现一个代码，以便它会自动隐藏 ID 包含“txt”的所有段落（而不是一个接一个地隐藏在他自己的行中），然后只显示我要显示的段落？就像是 ：

```
$('#buttonc').click(function () {        
        $('#*includes*txt').hide();
        $('#txtc').show(); 
```

那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T11:46:43.350

您可以`wild card`在[**选择器**](http://api.jquery.com/category/selectors/)中使用。`*`将在字符串中搜索，如果您知道 id 将根据您的需要`any where`以 txt 开头而不是`startwith``^``*`

**[现场演示](http://jsfiddle.net/rajaadil/vgnrJ/)**

```
$('[id*=txt]').hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T11:48:15.857

[包含](http://api.jquery.com/attribute-contains-selector/)选择器将帮助您：

```
$('[id*="txt"]').hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T11:56:35.543

也许您可以尝试我的解决方案您可以使用这样的子字符串进行更改：

```
<p id="txt-a">AAAAAAAAAAA</p>
<p id="txt-b">BBBBBBBBBBB</p>
<p id="txt-c">CCCCCCCCCCC</p> 
```

和jQuery代码：

```
$('#buttonc').click(function () {        
    $('[id |="txt"]').hide();
    $('#txt-c').show();
}); 
```

祝你好运

# iphone - 不可编辑的 UITextView 的双击事件

> ID：14020980
> 
> 赞同：0
> 
> 时间：2012-12-24T11:45:35.907
> 
> 标签：iphone, ios

我没有可编辑的 UITextView。当我双击它时，我需要为其设置背景颜色。我怎样才能做到这一点？我认为不会发生 didbeginediting 事件，因为此 UITextView 不可编辑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:53:57.970

请使用`Tap Gesture`来实现您的描述功能。

*   **使用下面的代码在**TextView中****添加 Tap Gesture 。****

     **```
    UITapGestureRecognizer* tapGestureObj = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(TapMethod:)];
    tapGestureObj.numberOfTapsRequired = 2;
    [textViewObj addGestureRecognizer:tapGestureObj]; 
    ```** 
***   `TapMethod`

    ```
    -(void)TapMethod:(UITapGestureRecognizer*)gesture
    {
       //Set your logic on double tap of TextView...
    } 
    ```** 

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:52:59.077

您可以将点击手势添加到文本视图，您只需设置 numberoftapsrequired = 2 然后在手势识别器方法中更改 bg 颜色还设置 userInteractionEnabled = yes**

# sql-server - T-SQL 多重分组

> ID：14020981
> 
> 赞同：4
> 
> 时间：2012-12-24T11:45:38.053
> 
> 标签：sql-server, tsql, sql-server-2008-r2, grouping

我有以下数据：

```
Product Price   StartDate                   EndDate
Apples  4.9     2010-03-01 00:00:00.000     2010-03-01 00:00:00.000
Apples  4.9     2010-03-02 00:00:00.000     2010-03-02 00:00:00.000
Apples  2.5     2010-03-03 00:00:00.000     2010-03-03 00:00:00.000
Apples  4.9     2010-03-05 00:00:00.000     2010-03-05 00:00:00.000
Apples  4.9     2010-03-06 00:00:00.000     2010-03-06 00:00:00.000
Apples  4.9     2010-03-09 00:00:00.000     2010-03-09 00:00:00.000
Apples  2.5     2010-03-10 00:00:00.000     2010-03-10 00:00:00.000
Apples  4.9     2010-03-11 00:00:00.000     2010-03-11 00:00:00.000
Apples  4.9     2010-03-12 00:00:00.000     2010-03-12 00:00:00.000
Apples  4.9     2010-03-13 00:00:00.000     2010-03-13 00:00:00.000
Apples  4.9     2010-03-15 00:00:00.000     2010-03-15 00:00:00.000
Apples  4.9     2010-03-16 00:00:00.000     2010-03-16 00:00:00.000 
```

想要`product, price, min(startdate), max(startdate)`分组，但也应该在开始日期和结束日期分组............如下所示

期望的结果

```
Apples  4.9     2010-03-01 00:00:00.000     2010-03-02 00:00:00.000
Apples  2.5     2010-03-03 00:00:00.000     2010-03-03 00:00:00.000
Apples  4.9     2010-03-05 00:00:00.000     2010-03-09 00:00:00.000
Apples  2.5     2010-03-10 00:00:00.000     2010-03-10 00:00:00.000
Apples  4.9     2010-03-11 00:00:00.000     2010-03-16 00:00:00.000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T12:02:43.300

```
SELECT  product, price, MIN(start_date), MAX(end_date)
FROM    (
        SELECT  product, price, start_date, end_date,
                ROW_NUMBER() OVER (PARTITION BY product ORDER BY startDate) rn1,
                ROW_NUMBER() OVER (PARTITION BY product, price ORDER BY startDate) rn2
        FROM    mytable
        ) q
GROUP BY
        product, price, rn2 - rn1
ORDER BY
        product, MIN(start_date), price 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T13:50:32.897

我的做法。

数据：

```
create table t ( producte varchar(50), 
                 price money, 
                 start_date date,
                 end_date date);

insert into t values
( 'apple', 4.9, '2012-01-01', '2012-01-01' ),
( 'apple', 4.9, '2012-01-02', '2012-01-02' ),
( 'apple', 8, '2012-01-04', '2012-01-04' ),
( 'cat', 5, '2012-01-01', '2012-01-01' ),
( 'cat', 6, '2012-01-02', '2012-01-02' ),
( 'cat', 6, '2012-01-03', '2012-01-03' ); 
```

询问：

```
with start_dates as (
  select 
    t.producte, t.price, t.start_date, t.end_date, t.start_date as gr_date    
  from 
    t left outer join 
    t t1 on 
        t.price = t1.price and                         --new
        t.producte = t1.producte and
        t.start_date = dateadd(day,1, t1.end_date )
  where t1.producte is null
  union all
  select 
      t.producte, t.price, t.start_date,t. end_date, gr_date
  from
      t inner join 
      start_dates t1 on  
        t.price = t1.price and                         --new
        t.producte = t1.producte and
        t.start_date = dateadd(day,1, t1.end_date )
)
select t.producte, t.price , min( t.start_date ), max( t.end_date )
from start_dates t
group by  t.producte, gr_date  ,t.price 
```

[结果](http://sqlfiddle.com/#!3/9e4f8/2/0)：

```
| PRODUCTE | PRICE |   COLUMN_2 |   COLUMN_3 |
----------------------------------------------
|    apple |   4.9 | 2012-01-01 | 2012-01-02 |
|    apple |     8 | 2012-01-04 | 2012-01-04 |
|      cat |     5 | 2012-01-01 | 2012-01-01 |
|      cat |     6 | 2012-01-02 | 2012-01-03 | 
```

**解释**

这是一个递归 CTE 表达式。基本查询获取每组价格的初始日期。递归查询查找具有此价格的最后一个数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T13:06:12.210

这是一个[SQLFiddle 演示](http://sqlfiddle.com/#!3/684c8/16)

```
with t2 as 
(
select t1.*,
(select count(Price) 
  from t 
  where startdate<t1.startdate 
        and Price<>t1.price
        and Product=t1.Product
)
rng  
from t as t1
)
select Product,Price,min(startDate),max(EndDate)  
from t2 group by Product,Price,RNG
order by 3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T12:32:37.050

这里有一个建议：对于每一行，您必须找到价格不同的最大上一个日期，然后您就可以分组。例如，对于 2010-03-11 和 2010-03-16 之间的任何行，您必须检索日期 2010-03-10，因为这是价格不同的最大上一个日期（2.5 对 4.9）。第一行将返回一个空日期，但这应该不是问题。

但是，对于一个很长的表，这种查询可能会变得很慢。因此，如果您有一些速度问题，您应该考虑添加一列并使用光标逐步填充它的可能性：您按日期循环遍历它，每次看到新价格时，您都会更改它的值。最终的分组是微不足道的。

这里有一些东西：

```
Select Product, Price, Min(StartDate) as StartDate, PreviousDate from (
    Select product, price, StartDate, (Select max (StartDate) from table_2 t3 where t3.price <> t2.price and t3.StartDate < t2.StartDate and t3.Product = t2.Product) as previousDate
    from table_2 t2) SQ

Group by Product, Price, PreviousDate
Order by PreviousDate 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T03:07:48.000

我相信这是迄今为止效果最好的解决方案：

```
WITH Calc AS (
   SELECT *,
      Grp = DateAdd(day, -Row_Number()
         OVER (PARTITION BY Product, Price ORDER BY StartDate), StartDate
      )
   FROM dbo.PriceHistory
)
SELECT Product, Price, FromDate = Min(StartDate), ToDate = Max(StartDate)
FROM Calc
GROUP BY Product, Price, Grp
ORDER BY FromDate; 
```

[自己试试这个](http://sqlfiddle.com/#!3/034ed/4)

# google-plus - 从 Google+ API 检索个人资料图片

> ID：14020985
> 
> 赞同：14
> 
> 时间：2012-12-24T11:46:03.513
> 
> 标签：google-plus

我正在尝试从 Google+ API 中提取 JSON 数据。当我包含图片属性时，图片的大小设置为50px。如何更改图像大小？我在文档上看不到它。

获取[https://www.googleapis.com/plus/v1/people/100300281975626912157?fields=image&key={YOUR_API_KEY}](https://www.googleapis.com/plus/v1/people/100300281975626912157?fields=image&key=%7BYOUR_API_KEY%7D)

回复

```
{
 "image": {
  "url": "https://lh3.googleusercontent.com/-U353P5vNuRE/AAAAAAAAAAI/AAAAAAAABKM/a7U7bq251x0/photo.jpg?sz=50"
 }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-24T11:48:22.750

在 URL 字符串的末尾有一个名为 sz=50 的属性

我只是试图改变属性，结果图像的大小也改变了。

试试这两个网址：

[https://lh3.googleusercontent.com/-U353P5vNuRE/AAAAAAAAAAI/AAAAAAAABKM/a7U7bq251x0/photo.jpg?sz=50](https://lh3.googleusercontent.com/-U353P5vNuRE/AAAAAAAAAAI/AAAAAAAABKM/a7U7bq251x0/photo.jpg?sz=50)

和

[https://lh3.googleusercontent.com/-U353P5vNuRE/AAAAAAAAAAI/AAAAAAAABKM/a7U7bq251x0/photo.jpg?sz=150](https://lh3.googleusercontent.com/-U353P5vNuRE/AAAAAAAAAAI/AAAAAAAABKM/a7U7bq251x0/photo.jpg?sz=150)

看到不同？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-25T22:06:16.747

只需要更改 sz 后缀来表示 wnated 大小，这里是后缀：

[https://lh3.googleusercontent.com/-U353P5vNuRE/AAAAAAAAAAI/AAAAAAAABKM/a7U7bq251x0/photo.jpg](https://lh3.googleusercontent.com/-U353P5vNuRE/AAAAAAAAAAI/AAAAAAAABKM/a7U7bq251x0/photo.jpg)？**尺寸=150**

如果你剪切参数，你会得到默认的照片大小

[https://lh3.googleusercontent.com/-U353P5vNuRE/AAAAAAAAAAI/AAAAAAAABKM/a7U7bq251x0/photo.jpg](https://lh3.googleusercontent.com/-U353P5vNuRE/AAAAAAAAAAI/AAAAAAAABKM/a7U7bq251x0/photo.jpg)

并自动更改字符串： [https ://jsfiddle.net/upyL4onm/3/](https://jsfiddle.net/upyL4onm/3/)

```
var newSize="300"
var str = "https://lh3.googleusercontent.com/-U353P5vNuRE/AAAAAAAAAAI/AAAAAAAABKM/a7U7bq251x0/photo.jpg?sz=50";
var res = str.split("?sz=50")[0]+"?sz="+newSize; 
```

console.log(res) 将输出：

[https://lh3.googleusercontent.com/-U353P5vNuRE/AAAAAAAAAAI/AAAAAAAABKM/a7U7bq251x0/photo.jpg?sz=300](https://lh3.googleusercontent.com/-U353P5vNuRE/AAAAAAAAAAI/AAAAAAAABKM/a7U7bq251x0/photo.jpg?sz=300)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-01-06T18:19:04.633

谷歌图片有两种：

1.  用户上传的个人资料图片（以 s96-c 结尾）

*   对于用户上传的图像，URL 末尾将包含“s96-c”，只需将其替换为“s{anyhighernumber}-c”示例：[https ://lh3.googleusercontent.com/a-/AOh14GicX6CDo0rdCvI0him0hiURm8RFk6aStpHOZQUu=s1500-c](https://lh3.googleusercontent.com/a-/AOh14GicX6CDo0rdCvI0him0hiURm8RFk6aStpHOZQUu=s1500-c)

2.  Google 生成的图片（以 photo.jpg 结尾）

*   对于 Google 生成的图像，在 URL 示例的末尾添加“?sz={anyhighernumber}”： [https://lh3.googleusercontent.com/-smcmFKIr8Mw/AAAAAAAAAAI/AAAAAAAAAAAAA/AMZuuclFvz6ooU0vUDd-Qkpk5ExSRyEoFg/s96-c/photo.jpg?尺寸=1500](https://lh3.googleusercontent.com/-smcmFKIr8Mw/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuclFvz6ooU0vUDd-Qkpk5ExSRyEoFg/s96-c/photo.jpg?sz=1500)

将 {anyhighernumber} 替换为您想要的分辨率，例如：1500

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-26T11:19:27.973

因为在 api 中没有办法做到这一点，你可以使用`sustr`删除`?str=`并添加你自己的：

```
$imageUrl = substr($user['image']['url'],0,strpos($user['image']['url']."?sz=","?sz=")) . '?sz=100'; 
```

或者对于 javascript：

```
iamgeUrl=user[image][url].substr(0,user[image][url].indexOf('?str=')) + '?sz=100'; 
```

# iphone - viewDidAppear 方法在 locationManager 可以定位用户之前调用

> ID：14020991
> 
> 赞同：0
> 
> 时间：2012-12-24T11:46:54.800
> 
> 标签：iphone, objective-c, ios, cllocationmanager, locationmanager

我`locationManager`在我的应用程序中调用了 a，并在各种方法中`delegate`引用了 getUserLatitude 和 getUserLongitude 函数。`viewDidAppear``viewControllers`

我的问题是我的`viewDidAppear`方法启动太快，`appDelegate`无法找到用户，我得到 0.000000`latitude`和 0.000000 `longitude`。有谁知道我该如何解决这个问题？谢谢！

**我的 appDelegate 由以下位置方法构成：**

```
- (NSString *)getUserCoordinates
{
    NSString *userCoordinates = [NSString stringWithFormat:@"latitude: %f longitude: %f", 
    locationManager.location.coordinate.latitude, 
    locationManager.location.coordinate.longitude];
    locationManager = [[CLLocationManager alloc] init];
    locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
    locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
    [locationManager startUpdatingLocation];
    return userCoordinates;
}

- (NSString *)getUserLatitude
{
    NSString *userLatitude = [NSString stringWithFormat:@"%f", 
    locationManager.location.coordinate.latitude];
    return userLatitude;
}

- (NSString *)getUserLongitude
{
    NSString *userLongitude = [NSString stringWithFormat:@"%f", 
    locationManager.location.coordinate.longitude];
    return userLongitude;
} 
```

**我正在使用这段代码从 appDelegate 获取更新的位置：**

```
- (void)viewDidAppear:(BOOL)animated
{   
    NSString *userLatitude =[(PDCAppDelegate *)[UIApplication sharedApplication].delegate 
    getUserLatitude];

    NSString *userLongitude =[(PDCAppDelegate *)[UIApplication sharedApplication].delegate 
    getUserLongitude];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:56:49.857

在位置管理器更新位置后，会调用一个可以在此处使用的委托。更新位置后，您将在 didUpdateToLocation 方法中获得控件

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    NSLog(@"Success ");
}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
    NSLog(@"Failed %d",[error code]);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:52:03.270

我在我的一个应用程序中也面临同样的问题。首先分配`CLLocationManager`，设置`delegate`它，然后调用`startUpdatingLocation`可以解决您问题的方法。

```
 locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
    locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
    [locationManager startUpdatingLocation]; 
```

设置委托后，它调用其委托方法并为我们提供当前位置的`lattitude`&`longitude`作为。

```
//delegate method
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation
{    
    self.currentLat=newLocation.coordinate.latitude;
    self.currentLong=newLocation.coordinate.longitude;
    NSLog(@"appDelegate newLocation %f  %f",self.currentLat,self.currentLong);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T12:33:10.933

我通过做这样的事情来解决这个问题。

```
 - (void)locationManager:(CLLocationManager *)manager 
    didUpdateToLocation:(CLLocation *)newLocation 
           fromLocation:(CLLocation *)oldLocation 
 {

     NSLog(@"Ahsan");
     if (!oldLocation ||
        (oldLocation.coordinate.latitude != newLocation.coordinate.latitude && 
         oldLocation.coordinate.longitude != newLocation.coordinate.longitude &&
         newLocation.horizontalAccuracy <= 100.0)) 
     {
        //Your code comes here...
     }
 } 
```

# html - 缩放和分辨率

> ID：14020992
> 
> 赞同：0
> 
> 时间：2012-12-24T11:47:03.333
> 
> 标签：html, css, zooming, responsive-design, screen-resolution

1.  我以百分比给出了高度和宽度。甚至字体大小。现在放大，容器的高度和宽度不会改变，但字体大小会改变。它会导致问题，因为文本在放大时从容器中出来。
2.  如果我在固定像素中给出高度宽度，它可以很好地使用缩放，因为容器和内部文本在缩放时是同步的，但是这样网站会在不同的分辨率上获得水平滚动，这也是不希望的。

有没有办法同时解决这两个问题？

[我在 JSBIN 上的页面](http://jsbin.com/erigij/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:04:18.613

百分比是相对于父元素大小的。将这种关系一直外推到`body`您的窗口大小不会改变大小，因此元素的大小不会改变。如果您调整窗口大小，则元素将在父元素更改尺寸时调整大小。

如果您希望元素更改大小，请使用`em`调整大小，因为这是根据默认浏览器设置的`font-size`（通常是`16px`）。当您放大和缩小时，元素的大小应与字体一起调整。

Ethan Marcotte 为 A List Apart 写了一篇出色的文章，描述了如何通过以下方式实现流畅的布局`em`：[http ://www.alistapart.com/articles/fluidgrids/](http://www.alistapart.com/articles/fluidgrids/)

# java - 如何从java程序调度shell脚本

> ID：14020993
> 
> 赞同：0
> 
> 时间：2012-12-24T11:47:03.880
> 
> 标签：java, linux, scheduling

我对服务器有限制，因此 Cron/Autosys 不能用于调度 shell 脚本。有没有办法可以从 java 程序中安排 shell 脚本？石英调度器有用吗？有人可以为我提供相同的示例代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:56:51.970

以下教程可帮助您安排 shell 脚本。

[http://www.mkyong.com/java/how-to-run-a-task-periodically-in-java/](http://www.mkyong.com/java/how-to-run-a-task-periodically-in-java/)

通过使用

```
Runtime.getRuntime().exec("sh shellscript.sh"); 
```

您可以运行 shell 脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:39:11.430

您可以使用 ProcessBuilder 类从 java 外部执行任何进程，包括批处理文件。这里[Executing another application from Java](https://stackoverflow.com/questions/3468987/executing-another-application-from-java)有一个例子。

而不是计时器类，创建一个小间隔的线程检查时间可能会解决时间依赖性。

```
public class Test implements Runnable {
    void run () {    
        while(true) {     
            if(myTime != currentTime) {
                // check for the time until your time has come
                // if not, sleep and continue
                sleep(1000);
                continue;
            }

            // Do your job and exit when necessary 
        }
    }
} 
```

您可以使用线程执行该类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T11:56:02.153

这可能对您有用： http: [//algorithmicallyrandom.blogspot.in/2009/11/tips-and-tricks-scheduling-jobs-without.html](http://algorithmicallyrandom.blogspot.in/2009/11/tips-and-tricks-scheduling-jobs-without.html)

您可以使用该[`at`](http://linuxcommand.org/man_pages/at1.html)命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T11:58:07.567

你可以使用计时器：

```
int loopTime = 1000*60*60*12;
Timer timer = new Timer();
timer.schedule(new TimerTask()
{
        public void run()
        {
          Runtime.getRuntime().exec("your java command: java -classpath...");
    }
},0, loopTime);   //0 is for delay time in ms, loopTime is also in ms 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T12:19:28.553

是的，您可以使用[Quartz](http://quartz-scheduler.org/documentation)从 Java 中安排您的任务。然后，您的[Job](http://quartz-scheduler.org/api/2.1.0/org/quartz/Job.html)实现将调用[Runtime.exec(...)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html)来启动 shell 任务，并可能调用一些[Process](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Process.html)方法来与任务交互。一些技巧：

*   当你要启动一个 shell 脚本时，而不是直接调用你的 shell 脚本，`Runtime.exec(...)`你应该调用你的*shell 可执行文件* 并将你的 shell 脚本作为参数传递。也就是说`/path/to/your/shell/script.sh`，您应该 exec而不是 exec'ing `sh /path/to/your/shell/script.sh`。

*   Quartz 调度程序支持 cron 表达式，请参阅[CronTrigger](http://quartz-scheduler.org/api/2.1.0/org/quartz/impl/triggers/CronTriggerImpl.html)和Quartz[中支持的 cron 表达式的教程](http://quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/crontrigger)。

*   显然，Quartz 调度程序作业只会在您运行 JVM 且 Quartz 调度程序服务启动的情况下运行。通常，您在实施工作时需要考虑到这一点。

*   此外，如果您不实现某种作业持久性，例如[JobStoreCMT](http://quartz-scheduler.org/api/2.1.0/org/quartz/impl/jdbcjobstore/JobStoreCMT.html)，您可能会跳过作业执行，并且动态调度的作业执行将无法在重新启动后继续存在。

# olap - 在 olap 多维数据集中添加日期的计算列

> ID：14020997
> 
> 赞同：1
> 
> 时间：2012-12-24T11:47:28.453
> 
> 标签：olap, olap-cube

我遇到与以下链接相同的问题：

[SQL Analysis Services OLAP TIME 维度](https://stackoverflow.com/questions/5305351/sql-analysis-services-olap-time-dimension/14020884#14020884)

我可以获得在 OLAP 多维数据集中为日期维度添加新计算成员的步骤吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:57:47.073

无需在 OLAP 多维数据集中为日期维度添加新的计算成员，您实际上可以将日期时间字段转换为仅日期以匹配维度。例如：

```
SELECT convert(datetime, '10/23/2016', 101) -- mm/dd/yyyy 
```

# php - PHP标头在脚本底部工作？

> ID：14020999
> 
> 赞同：0
> 
> 时间：2012-12-24T11:47:34.937
> 
> 标签：php, http-headers

我正在使用 localhost 来开发一个网站。最近我很惊讶我正在使用的一个脚本被完全执行，然后使用“header:('Location:http://....')”重定向（这个在底部）。我很惊讶，因为在调用任何输出之前，我已经阅读了需要位于页面顶部的标题。

为了查看是否存在差异，我将标题放在脚本的顶部。我重定向很好，但脚本没有完全执行。我在“http://stackoverflow.com/questions/7213646/php-header-location-immediately”上读到，我可能“需要 ignore_user_abort() 并且使用 php-fpm 它是 fastcgi_finish_request‎() 来保证整个脚本的执行。”

我是一个新奇的程序员，所以如果有人可以了解如何做到这一点，那就太好了，如果它真的是必需品的话。然而，我的第一个（也是主要）问题是这是否有必要，因为脚本开始工作。换句话说，这只是 localhost 的一个奇怪之处，因此当我正确托管网站时，我需要走更复杂的路线吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:52:05.350

header() 需要在发送任何其他输出之前发送，这不取决于代码中的位置，而仅取决于是否在使用 header() 之前发送了输出。

如果您在发送标头之前使用任何 echo/print 命令，您将收到错误消息。

防止输出在您希望之前发送的一种方法是使用输出缓冲（ob_start、ob_flush 等）。请参阅[http://php.net/manual/en/function.ob-start.php](http://php.net/manual/en/function.ob-start.php)。

输出缓冲将“存储”您的所有输出，直到您准备好发送它，即。发送标题后。