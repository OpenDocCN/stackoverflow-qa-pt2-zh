# StackOverflow 问答 14835000-14835999

# ant - 检查两个antcalls是否成功

> ID：14835000
> 
> 赞同：3
> 
> 时间：2013-02-12T14:38:53.590
> 
> 标签：ant

我对 ant 脚本非常陌生，我想知道我的构建是否成功。我的主要目标有两个 antcall，我不知道如何检查它们是否成功，以便评估主要目标。

全部运行是我的主要目标

```
<target name="run all">
<antcall target="Run basic configuration" />
<antcall target="Run custom configuration"/> 
```

我想为“全部运行”目标添加失败条件。每个目标都会单独检查它们是否成功，但我想知道调用蚂蚁的目标是否不成功，以防这两个目标失败。另外，如果一个失败，另一个会被调用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:18:35.933

要确定 antcall 是否成功，需要更仔细地定义什么是成功。这可能意味着：

1.  执行的代码没有引发异常。
2.  代码做了你想做的事。

在第一种情况下，您可以使用**trycatch**块包装 antcall 的执行以捕获异常。[trycatch](http://ant-contrib.sourceforge.net/tasks/tasks/trycatch.html)任务是 ant-contrib 的一部分，但它在 Ant 编码中经常使用。你会这样做：

```
<trycatch property="exception.message" reference="exception.object">
<try>
   <antcall target="targetName"/>
</try>
<catch>
   <!-- handle exception logic here -->
</catch>
<finally>
   <!-- do any final cleanup -->
</finally>
</trycatch> 
```

在第二种情况下，您需要将一些状态传递回调用者，该状态表明代码执行了您希望它执行的操作。

请注意，antcall 任务会重新加载 ant 文件（例如 build.xml），因此它可能是一项昂贵的操作。使用 antcall 任务还有其他选择：

*   使用**antcallback**任务 (ant-contrib)。antcallback任务专门解决[了](http://ant-contrib.sourceforge.net/tasks/tasks/antcallback_task.html)传回数据的需要。
*   在定义目标以调用依赖任务时使用**depends属性。**
*   使用**runtarget**任务 (ant-contrib)。使用 runtarget，您的所有属性都会被传递，并且您在目标中设置的任何属性都可供调用者使用。
*   使用**宏定义**任务。它避免了对 ant 文件的重新解析，可以传递具有默认值的属性，可以传递嵌套元素等等。因此，这是大多数情况下的首选解决方案。

在上述每种情况下，只需设置可以在调用目标中检查的返回属性，以确定被调用目标或依赖目标是否按照您的预期执行。

# vb.net - VB.Net 中的 Math.Round() 有什么问题？

> ID：14835001
> 
> 赞同：17
> 
> 时间：2013-02-12T14:38:55.040
> 
> 标签：vb.net

我在 VB.Net 的 Math.Round 函数中遇到了一个奇怪的情况

```
Math.Round((32.625), 2) 
```

***结果：32.62***

```
Math.Round((32.635), 2) 
```

***结果：32.64***

我需要**32.63**，但在这些情况下，该函数以不同的逻辑工作。

我可以得到小数部分并在上面做我想做的事情。但这不是太奇怪了，一个是四舍五入到更高，一个是四舍五入到更低。

那么我怎样才能得到**从**32.625得到****32.63**而不会弄乱小数部分呢？（作为数学的自然逻辑）**

 *** * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-12T14:48:48.553

`Math.Round`默认使用*银行家四舍五入*。您可以通过指定不同的`MidPointRounding`选项来更改它。从[MSDN](http://msdn.microsoft.com/en-us/library/system.math.round.aspx#Midpoint)：

**从零四舍五入**

> 中点值从零四舍五入到下一个数字。例如，3.75 轮到 3.8，3.85 轮到 3.9，-3.75 轮到 -3.8，-3.85 轮到 -3.9。这种形式的舍入由 MidpointRounding.AwayFromZero 枚举成员表示。从零开始舍入是最广为人知的舍入形式。

**四舍五入到最接近，或银行家的四舍五入**

> 中点值四舍五入到最接近的偶数。例如，3.75 和 3.85 均舍入为 3.8，-3.75 和 -3.85 均舍入为 -3.8。这种形式的舍入由 MidpointRounding.ToEven 枚举成员表示。
> 
> 四舍五入是财务和统计操作中使用的标准四舍五入形式。它符合 IEEE 标准 754 第 4 节。在多个舍入操作中使用时，它可以减少由于在单个方向上始终舍入中点值而导致的舍入误差。在某些情况下，这种舍入误差可能很大。

所以，你想要的是：

```
Math.Round(32.625, 2, MidpointRounding.AwayFromZero)
Math.Round(32.635, 2, MidpointRounding.AwayFromZero) 
```

正如其他人所提到的，如果精度很重要，您应该使用`Decimal`变量而不是浮点类型。例如：

```
Math.Round(32.625D, 2, MidpointRounding.AwayFromZero)
Math.Round(32.635D, 2, MidpointRounding.AwayFromZero) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T14:49:36.930

试试这个（从记忆中）：

`Math.Round((32.635), 2, MidPointRounding.AwayFromZero)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T14:44:54.777

尝试这个。

```
Dim d As Decimal = 3.625
    Dim r As Decimal = Math.Ceiling(d * 100D) / 100D
    MsgBox(r) 
```

这应该做你想要的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-12T15:05:31.373

她有一个快速功能，您可以添加它来简化您的生活，并让您不必一直打字太多。

```
 Private Function roundd(dec As Decimal)
    Dim d As Decimal = dec
    Dim r As Decimal = Math.Ceiling(d * 100D) / 100D
    Return r
End Function 
```

将此添加到您的应用程序，然后使用该功能

```
roundd(3.624) 
```

或任何你需要的。

显示结果 - 示例

```
msgbox(roundd(3.625)) 
```

这将显示一个带有 3.63 的消息框

```
Textbox1.text = roundd(3.625) 
```

这将设置 textbox1.text - 3.63 等。因此，如果您需要对多个数字进行舍入，它不会那么乏味，并且可以节省大量输入。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-12T14:48:31.700

你不能使用像 32.625 这样的数字在 VB.Net 中被处理的浮点数。（还有@StevenDoggart 提到的银行家四舍五入的问题——你可能不得不同时处理这两个问题。）

问题是存储的数字与输入的不完全一致，因为这些数字没有以固定的二进制表示形式存储，例如 32.625 存储为 32.62499997，而 32.635 存储为 32.63500001。
准确的唯一方法是将数字存储为 Decimal 类型

```
DIM num as Decimal
num = ToDecimal("32.625") 
```**

# php - 拖放文件上传

> ID：14835005
> 
> 赞同：15
> 
> 时间：2013-02-12T14:38:59.457
> 
> 标签：php, jquery, html, upload, drag-and-drop

所以我正在努力寻找我正在寻找的东西以及如何实现它。

我有一个基本的 PHP 文件上传器工作，用户按下自定义上传按钮，选择一个文件，然后使用 JS，它检查更改（即用户选择一个文件），然后提交上传图像的表单美好的。

我现在还想要的是拖放到上传区域。因此，用户可以从他们的文件资源管理器中拖动图像并将其放置在指定的位置（而不是整个页面），然后一旦该图像被删除，表单就会自动与他们的图像一起提交并使用相同的 PHP 处理。

这是可能的和现实的吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-12T15:10:59.763

在不使用任何第三方插件的情况下，这绝对是现实可行的。

以下片段应该让您了解它是如何工作的：

**放置区**

```
$(".drop-files-container").bind("drop", function(e) {
    var files = e.originalEvent.dataTransfer.files;
    processFileUpload(files); 
    // forward the file object to your ajax upload method
    return false;
}); 
```

**processFileUpload()-方法：**

```
function processFileUpload(droppedFiles) {
         // add your files to the regular upload form
    var uploadFormData = new FormData($("#yourregularuploadformId")[0]); 
    if(droppedFiles.length > 0) { // checks if any files were dropped
        for(var f = 0; f < droppedFiles.length; f++) { // for-loop for each file dropped
            uploadFormData.append("files[]",droppedFiles[f]);  // adding every file to the form so you could upload multiple files
        }
    }

 // the final ajax call

       $.ajax({
        url : "upload.php", // use your target
        type : "POST",
        data : uploadFormData,
        cache : false,
        contentType : false,
        processData : false,
        success : function(ret) {
                 // callback function
        }
       });

 } 
```

**表单示例**

```
<form enctype="multipart/form-data" id="yourregularuploadformId">
     <input type="file" name="files[]" multiple="multiple">
</form> 
```

随意使用这样的东西作为起点。你可以在这里找到浏览器支持[http://caniuse.com/#feat=xhr2](http://caniuse.com/#feat=xhr2)

当然，您可以添加任何您想要的附加功能，例如进度条、预览、动画......

# .net - 在 System.Web.UI.HtmlTextWriter 中渲染与写入

> ID：14835007
> 
> 赞同：3
> 
> 时间：2013-02-12T14:39:12.353
> 
> 标签：.net, htmltextwriter

我正在以编程方式创建一个直接保存到磁盘的简单 HTML 文件。我在看这个例子： http: [//www.dotnetperls.com/htmltextwriter](http://www.dotnetperls.com/htmltextwriter)

我很困惑他为什么混合`HtmlTextWriter`'s`Render`和`Write`方法，以及我应该如何在 and 之间[`RenderBeginTag()`](http://msdn.microsoft.com/en-us/library/f2a9a9ww.aspx)进行选择[`WriteBeginTag()`](http://msdn.microsoft.com/en-us/library/system.web.ui.htmltextwriter.writebegintag.aspx)。

对与错是否有硬性规定？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-12T16:27:43.147

如果标记元素是作为 HtmlTextWriterTag 枚举值之一的已知类型，请使用 RenderBeginTag(HtmlTextWriterTag) 方法的 RenderBeginTag 重载。

# perl - Perl LWP：通过 HTTP 标头发送 Cookie 不起作用

> ID：14835008
> 
> 赞同：2
> 
> 时间：2013-02-12T14:39:12.963
> 
> 标签：perl, cookies, lwp

我知道如果你想使用cookie，你必须编写代码：

```
$ua = LWP::UserAgent->new();
$ua->cookie_jar(HTTP::Cookies->new()); 
```

然后你可以get()、post()等等。

但是如果我只是将 cookie 字符串放入 HTTP HEADER 和 get() 中，我无法得到正确的响应。作为：

```
$ua = LWP::UserAgent->new();
$ua->get($url, 'Cookie' => $cookie_string); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:32:03.037

我想您会发现`Cookie`使用该方法正确设置了标题。

为了确保，你可以写

```
my $resp = $ua->get('http://www.myurl.com', Cookie => 'my=data');

print $resp->request->as_string; 
```

并且您应该看到请求包含该行

```
Cookie: my=data 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T15:29:43.553

从文档中，它看起来`$ua->cookie_jar()`需要一个哈希，要么指定选项，要么提供一个数据结构来存储 cookie。我会尝试

```
$ua->cookie_jar({}); 
```

另外，请注意，您尝试使用的方法只会将 cookie 存储在内存中，因此一旦您的脚本结束，您对所述 cookie 的了解也会随之消失。你可能想看看

[http://metacpan.org/pod/HTTP::Cookies](http://metacpan.org/pod/HTTP%3a%3aCookies)

[http://www.perl.com/pub/2002/08/20/perlandlwp.html](http://www.perl.com/pub/2002/08/20/perlandlwp.html)

对于内存 cookie jar 和基于文件的 cookie jar 的示例。

至于为什么 HTTP::Cookie 在以您的方式调用时不会返回合适的哈希，我不确定，但似乎不是。

# spring - 如何在我的网络应用程序中加速“OpenEntityManagerInViewInterceptor”？

> ID：14835012
> 
> 赞同：1
> 
> 时间：2013-02-12T14:39:18.843
> 
> 标签：spring, spring-mvc, lazy-loading, interceptor

我正在使用 Spring 3.1.1.RELEASE、Hibernate 4.1.0.Final、JPA 2.0 和 JBoss 7.1.1.Final 构建一个 Web 应用程序 (WAR)。我想在我的控制器中延迟加载一些对象（在它提供视图之前），所以我想我会给“OpenEntityManagerInViewInterceptor”一个旋转。我在我的 SPring 应用程序上下文文件中配置了这个……</p>

```
<mvc:interceptors>
    …
    <mvc:interceptor>
            <mvc:mapping path="/contracts/*"/>
            <bean class="org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor">  
                <property name="entityManagerFactory" ref="entityManagerFactory" />  
            </bean>
    </mvc:interceptor>
</mvc:interceptors> 
```

我有这些我想延迟加载的实体……</p>

```
@Entity
@Table(name = "cb_contract")
@Cacheable
@DataTransferObject
public class Contract implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @Column(name = "ID")
    @GeneratedValue(generator = "uuid-strategy")
    private String id;

    @OneToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "PRODUCT_ID")
    @NotNull
    private Product product;

    @OneToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "ORGANIZATION_ID")
    @NotNull
    private Organization org; 
```

我的控制器尝试非常简单地访问这些字段……</p>

```
@RequestMapping(value = "/update/{id}", method = RequestMethod.GET)
public ModelAndView doGetUpdate(final HttpServletRequest request,
                                final Model model,
                                @PathVariable final String id)
{
    String nextPage = "landing";
    final Contract contract = m_contractService.findById(id);
    if (contract != null)
    {
        final ContractForm contractForm = new ContractForm(contract.getProduct(), 
        ... 
```

不幸的是，当我尝试访问我的 JSP 页面时，加载大约需要 20 秒（之前只需要 2 秒）。对于页面上的每个实体，Spring 中的某些东西似乎反复“寻找要加入的 JTA 事务”和“获取 JDBC 连接”，而不仅仅是那些我想要延迟加载的实体。我可以做些什么来更好地配置它并使其更快？

谢谢， - 戴夫

**编辑：** 这是配置。使用 Spring 3.1，我不需要 persistence.xml 文件。这是 entityManagerFactory ...

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="packagesToScan" value="org.mainco.springboard" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/>
    </property>
    <property name="dataSource" ref="dataSource"/>
    <property name="jpaPropertyMap" ref="jpaPropertyMap" />
</bean>

<util:map id="jpaPropertyMap">
    <entry key="show_sql" value="true" />
    <entry key="dialect" value="org.hibernate.dialect.MySQLDialect" />
    <entry key="hibernate.hbm2ddl.auto" value="validate" />
    <entry key="hibernate.cache.region.factory_class" value="org.hibernate.cache.ehcache.EhCacheRegionFactory"/>
    <entry key="hibernate.cache.provider_class" value="org.hibernate.cache.EhCacheProvider"/>
    <entry key="hibernate.cache.use_second_level_cache" value="true" />
    <entry key="hibernate.cache.use_query_cache" value="false" />
    <entry key="hibernate.generate_statistics" value="false" />
</util:map>

<bean id="entityManager" class="org.springframework.orm.jpa.support.SharedEntityManagerBean">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<jee:jndi-lookup jndi-name="java:jboss/datasources/MySqlDS" id="dataSource" expected-type="javax.sql.DataSource"/>

<tx:jta-transaction-manager /> 
```

我使用 JBoss 7.1.1.Final 附带的默认事务管理器。这是数据源

```
 <datasources>
            <datasource jndi-name="java:jboss/datasources/MySqlDS" pool-name="MySqlDS" enabled="true" use-java-context="true">
                <connection-url>jdbc:mysql://localhost:3306/mydb_db</connection-url>
                <driver>mysql</driver>
                <transaction-isolation>TRANSACTION_READ_COMMITTED</transaction-isolation>
                <pool>
                    <min-pool-size>10</min-pool-size>
                    <max-pool-size>100</max-pool-size>
                    <prefill>true</prefill>
                </pool>
                <security>
                    <user-name>my_db</user-name>
                    <password>my_db</password>
                </security>
                <statement>
                    <prepared-statement-cache-size>32</prepared-statement-cache-size>
                    <share-prepared-statements>true</share-prepared-statements>
                </statement>
            </datasource>
            <drivers>
                <driver name="mysql" module="com.mysql"/>
            </drivers>
        </datasources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:21:03.900

使用 JTA + Hibernate 时的连接释放模式默认设置为“after_statment”。我认为这就是你得到所有这些日志的原因。

我可以建议您通过在 hibernate config 中指定以下参数来将此默认值更改为“on_close”或“after_transaction”：

```
hibernate.connection.release_mode="on_close" 
```

的所有可能值`hibernate.connection.release_mode`是`after_transaction`和`after_statement``on_close`

# python - 带有可变参数的 Python dir() 函数

> ID：14835016
> 
> 赞同：1
> 
> 时间：2013-02-12T14:39:39.700
> 
> 标签：python, dir

为了好玩/练习python，我正在尝试创建一个显示模块内容的程序。看起来像这样：

```
import sys
print "Here are all the functions in the sys module: "
print dir(sys)
function = raw_input("Pick a function to see: ")

cnt = True

while cnt:
        if function in dir(sys):
                print "You chose:", function
                cnt = False
        else:
                print "Invalid choice, please select again."
                cnt = True
print dir("sys." + function) 
```

但是每次，无论变量`function`设置为什么字符串，`dir("sys." + function)`调用总是默认为相同的输出`dir(string)`（或者我认为！）

发生了什么事，有没有办法让我正确地做到这一点并获得我真正想要的输出（例如，变量`function`设置为`stdin`，我得到输出`dir(sys.stdin)`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:41:36.147

您想从模块中检索实际对象；使用该[`getattr()`功能](http://docs.python.org/2/library/functions.html#getattr)：

```
print dir(getattr(sys, function)) 
```

`dir()`不解释您传递给它的对象的内容；恰好包含与模块中函数名称相对应的值的字符串不会为您取消引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:44:03.973

```
f = getattr(sys, function) # get function object
help(f) # display help for the function 
```

注意：`dir(f)`将为具有相同类型的所有函数返回相同的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T14:43:29.087

由于 dir 适用于对象，因此您需要以某种方式从名称中获取对象。

第一种选择是使用 getattr：

```
print dir(getattr(sys, function)) 
```

如果你想更灵活（并准备好承担安全风险），你可以使用 eval：

```
print dir(eval('sys.' + function)) 
```

# .net - 节俭的 IDL 生成

> ID：14835019
> 
> 赞同：1
> 
> 时间：2013-02-12T14:39:46.797
> 
> 标签：.net, thrift, thrift-protocol

是否可以从 C# 生成 Thrift IDL？这样做是否有意义？

我有一个 REST 服务、.net45、WebAPI、JSON。我想将其移至 Thrift，并且我正在寻找创建所需 IDL 的快捷方式，因为我已经在 C# 中定义了合同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T22:49:08.183

是的，当然：IDL 是一个简单的文本文件。

关于现有合同的转换：这取决于它的样子。

# java - 如何在 JSP 中显示集合中的数据

> ID：14835027
> 
> 赞同：0
> 
> 时间：2013-02-12T14:40:15.393
> 
> 标签：java, jsp, jstl

我有一个 Java Bean 如下

```
 class Account 
  {
     private long id;
     private String userName;
     private String userId;

     //Getters, Setters for Above 
  }

   public List<Account> getAccountList()
   {    
      List<Account> accountList = new ArrayList();

      Account account;

      .
      .
      .
      //db code for fetching data's from database

      while(rs.next()) 
      {       
         account = new Account();

         account.setId(rs.getLong("Id"));
         account.setUserName(rs.getString("UserName"));
         account.setUserId(rs.getString("UserId"));

         accountList.add(account);
      }

      return accountList ;
  } 
```

我正在分配我在 servlet 中的函数中获得的列表，并将其转发到 JSP 页面，在该页面中我将显示 Account 中的用户列表。

```
List<Account> accountList = new ArrayList<Account>();
accountList = objdbUtil.getAccountList();
request.setAttribute("arrUsersList", accountList);          
RequestDispatcher rdst =  request.getRequestDispatcher("UserList.jsp");
rdst.forward(request, response); 
```

现在如何在 JSP 中显示数据，因为列表中包含集合。

我可以直接使用下面的代码吗

```
<c:forEach var="arrUsersList" items="${requestScope.arrUsersList}">
</c:forEach> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:45:26.563

你在正确的路线上。forEach 标签将遍历您的 Account 对象列表。

```
<c:forEach var="account" items="${requestScope.arrUsersList}">
    <c:out value="${account.userName}" />
    ...
</c:forEach> 
```

# php - php 类的返回值未正确返回

> ID：14835028
> 
> 赞同：0
> 
> 时间：2013-02-12T14:40:15.710
> 
> 标签：php, javascript

我正在尝试从 Javascript 中的 php 类返回一个值：

```
<html>
<?php 

function tester()
{
return "testing";
}

?>

<script type="text/javascript">
var val= "<?php tester(); ?>";

document.write(val);

document.write('Finished!');
</script>

</html> 
```

什么都没有返回，而我只是得到一个空白屏幕（除了“完成”消息）=（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:41:47.297

发生这种情况是因为您只是返回值，要输出您必须回显它：

```
<?php echo tester(); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:41:38.750

您没有对`tester()`. 试试这个：

```
var val= <?php echo json_encode(tester()); ?>; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:41:54.450

你需要回应它。

要么使用：

```
var val= "<?php echo tester(); ?>" 
```

或者，如果您启用了短标签：

```
var val= "<?=tester()?>" 
```

# mysql - MySQL拆分单列

> ID：14835030
> 
> 赞同：0
> 
> 时间：2013-02-12T14:40:20.287
> 
> 标签：mysql

我认为这很容易……也许不会。我有一个带有“全名”的表，我想将名字和姓氏分成 2 列（fname 和 lname）。

以下语法为我提供了我想要的数据：

```
SELECT 
`fullname` , 
SUBSTRING_INDEX( SUBSTRING_INDEX(`fullname` ,' ', 2) ,' ' ,-1) AS fname, 
SUBSTRING_INDEX(`fullname` ,' ', 1)AS lname
FROM MyTable 
```

...但是我如何获取“fname”和“lname”字段并将它们保存到同一个表中的单独列中？

[示例数据——如果人名是 John Michael Jones，则“全名”字段如下所示：JONES JOHN MICHAEL]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:42:10.093

您可以只更新表并将列设置为`fullname`

```
update MyTable
set fname = SUBSTRING_INDEX(SUBSTRING_INDEX(`fullname` ,' ', 2) ,' ' ,-1),
    lname = SUBSTRING_INDEX(`fullname` ,' ', 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:47:02.137

如果要对同一个表执行更新，可以使用以下命令：

```
update mytable
set fname = SUBSTRING_INDEX( SUBSTRING_INDEX(`fullname` ,' ', 2) ,' ' ,-1), 
  lname = SUBSTRING_INDEX(`fullname` ,' ', 1) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/9c7bc/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:53:01.173

您想更新为名字和姓氏值，那么您需要使用 update ：

```
update MyTable
set fname = SUBSTRING_INDEX( SUBSTRING_INDEX(`fullname` ,' ', 2) ,' ' ,-1), 
  lname = SUBSTRING_INDEX(`fullname` ,' ', 1) 
```

如果你想设置为大写，那么用户大写函数以及

```
 update MyTable
    set fname = upper(SUBSTRING_INDEX( SUBSTRING_INDEX(`fullname` ,' ', 2) ,' ' ,-1)), 
      lname = upper(SUBSTRING_INDEX(`fullname` ,' ', 1)) 
```

# c# - 奇怪的异常处理伪指令

> ID：14835035
> 
> 赞同：7
> 
> 时间：2013-02-12T14:40:34.160
> 
> 标签：c#, exception-handling

在我的工作中，我必须维护一些 C# 项目。原来的开发者已经不在了。最近我注意到一些奇怪的代码主要出现在这样的情况下：

```
try
{
    //some Code
}
catch
{
    0.ToString();
} 
```

是`0.ToString()`为了什么？大部分代码都是在压力下编写的，所以我可以想到两种可能性：

*   它是一个占位符（如`//TODO`），可以对其进行搜索以了解您必须在哪里修复一些东西。
*   这是为了避免在编译空 catch 子句时出现警告。

那还有其他用例或意义吗？这是好的/坏的编码风格还是实践？由于这条指令什么都不做，它会对性能产生一些小的影响还是编译器会直接删除它？哪些是更好的方法来做类似的事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T01:50:14.817

正如评论所暗示的，代码示例包含一件奇怪的事情和一件坏事。这

```
0.ToString(); 
```

几乎可以肯定的是，有一行代码可以让调试器放置断点。这是我见过的用于此目的的陌生线路之一。这条线很可能是在调试会话后无意中提交的。

与之分开的是空`catch`块，这通常不是一个好主意。瑞安盖茨对此给出了一个很好的答案，所以我不会在这一点上展开。但具有讽刺意味的是，如果有一个适当的 catch 块，就会有一行代码可以放置断点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:51:06.727

不，这样做没有其他用例或合理的理由。这是一种糟糕的编码习惯。您的代码不应捕获任何它无法处理的异常。

最好的前进道路是删除它。当抛出异常时，您需要了解该用例。只有这样，您才能添加适当的检查和/或特定的异常处理代码。

有问题的代码是[吞下异常的示例，这对您的健康有害](http://lostechies.com/jimmybogard/2007/04/30/swallowing-exceptions-is-hazardous-to-your-health/)。

# ember.js - 如何使用 Ember Data 实现“查找或创建”

> ID：14835039
> 
> 赞同：7
> 
> 时间：2013-02-12T14:40:43.747
> 
> 标签：ember.js, ember-data

目前，我正在使用 Ember Data 加载一些可能存在或不存在的数据。如果记录不存在，则 Web 应用程序应创建它。

简单用例：记录清单。如果文章不存在，则应添加新文章。如果确实存在，则员工可以立即使用该信息。

我怀疑适配器 find() 方法是这个问题的根源。它无法处理 404 not found 错误，并且传递空结果也不起作用。

可能我忽略了一些微不足道的事情，因为“查找或创建”是一种非常常规的模式。请帮忙...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-27T05:03:30.700

看到[这个问题](https://github.com/emberjs/data/issues/1523)，或者这里是解决方案：

```
findOrCreate: (type, properties)->
  @store.find(type, properties.id).then null, (reason)=>
    if reason.status == 404
      record = @store.recordForId(type, properties.id)
      record.loadedData()
      record.setProperties(properties)
      record.save()
    else
      throw reason 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:15:06.527

请参阅[#296](https://github.com/emberjs/data/issues/296) 已经有一个错误报告

# c# - 两个 Linq 调用的性能比较

> ID：14835041
> 
> 赞同：3
> 
> 时间：2013-02-12T14:40:47.590
> 
> 标签：c#, .net, performance, linq

假设有两个查询在内存列表上运行；

第一个查询（使用扩展方法）：

`var temp = listX.Where(q => q.SomeProperty == someValue);`

第二个查询：

```
var temp = from o in listX
              where o.SomeProperty == someValue
              select o; 
```

就性能而言，两个查询之间是否存在差异；如果有，为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T14:41:59.800

不，根本没有区别。编译器在内部将第二个版本转换为第一个版本。

C# 规范（第 7.6.12 节）规定：

> C# 语言不指定查询表达式的执行语义。相反，查询表达式被转换为遵循查询表达式模式（第 7.16.3 节）的方法调用。具体来说，查询表达式被转换为名为`Where`、`Select`、`SelectMany`、`Join`、`GroupJoin`、`OrderBy`、 `OrderByDescending`、`ThenBy`、`ThenByDescending`、`GroupBy`和的方法的调用`Cast`。这些方法应具有特定的签名和结果类型，如第 7.16.3 节所述。这些方法可以是被查询对象的实例方法，也可以是对象外部的扩展方法，它们实现了查询的实际执行。
> 
> 从查询表达式到方法调用的转换是在执行任何类型绑定或重载决议之前发生的语法映射。翻译保证语法正确，但不保证生成语义正确的 C# 代码。在查询表达式的翻译之后，生成的方法调用将作为常规方法调用处理，这反过来可能会发现错误，例如，如果方法不存在，如果参数的类型错误，或者如果方法是泛型的并且类型推断失败.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T14:42:46.040

没有区别。它将在同一时间产生相同的结果。它基本上是具有不同语法的相同代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T14:42:52.240

简短的问题，简短的回答：

没有区别。两者是相同的，只是用不同的语法编写。

另请参阅[查询语法和方法语法](http://msdn.microsoft.com/en-us/library/vstudio/bb397947.aspx)的 MSDN 文档。

# jquery - Jquery选项卡在滚动时使用Ajax加载内容

> ID：14835045
> 
> 赞同：0
> 
> 时间：2013-02-12T14:41:02.200
> 
> 标签：jquery, jquery-tabs

我在 Jquery 选项卡中使用 ajax 加载内容。我想从活动选项卡的 url 加载更多内容并将其附加到列表中并像在 facebook 中一样显示。

滚动和 jquery 选项卡时如何结合加载？

下面是我用过的 HTML 和 JS。

HTML：

```
<div id="tabs">
    <ul>
        <li><a href="/EventController?operation=friend">Friends</a></li>
        <li><a href="/EventController?operation=uni">University</a></li>
        <li><a href="/EventController?operation=all">All</a></li>
    </ul>
</div> 
```

JS：

```
var $tabs = $( "#tabs" ).tabs({
        spinner: "",
        select: function(event, ui) {                
            var tabID = "#ui-tabs-" + (ui.index + 1);
            $(tabID).html("<div class='alert alert-info'><img src='../assets/img/ajax-loader.gif' alt=''> Loading...</div>");                             
        },
        beforeLoad: function( event, ui ) {
            ui.jqXHR.error(function() {
                ui.panel.html(
                "<div class='alert alert-error'>cannot be loaded</div>" );
            });
        },
        load: function(event, ui){
            $.getScript("../assets/js/bootstrap-ajax.js");               
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:01:45.350

我决定在滚动到底部时不加载更多，但是这个想法是相似的。我只是发回一个带有如下列表项（或 div）的按钮。此按钮进行 ajax 调用，并且 javascript 将内容附加到选项卡正文。

```
<div id='loadMoreButtonDiv' class='alert alert-info'>
   <center><strong>
       <a class='loadMoreButton' data-target='#ui-tabs-1' href='/EventController?operation=get_events&begin={newBegin}&count={count}'>Load More</a>
   </strong></center>
</div> 
```

在 Javascript 部分中，我在点击处理程序上添加了以下内容：

```
$('a.loadMoreButton').on('click', function(event) {
    var $link = $(this);
    var $target = $($link.attr('data-target'));
    $('#loadMoreButtonDiv').remove();
    $target.append("<div id='loadMoreLoadingDiv' class='alert alert-info'><img src='../assets/img/ajax-loader.gif' alt=''> Loading...</div>");
    $.ajax({
        type: 'GET',
        url: $link.attr('href'),

        success: function(data) {
            $target.append(data);
        },
        error: function(){
            $target.notify({
                message: {
                    text: 'Server Connectivity Error!'
                },
                type: 'error'
            }).show(); 
            $(this).attr('disabled',false);    
        }
    });
    $('#loadMoreLoadingDiv').remove();
    event.preventDefault();
}); 
```

# c - 对“printf”的未定义引用

> ID：14835051
> 
> 赞同：5
> 
> 时间：2013-02-12T14:41:16.200
> 
> 标签：c, gcc, assembly, makefile, nasm

***test.c***和***kernel.asm***在文件夹***src***中， ***Makefile***在文件夹***Debug***中，就像这样：

```
src
    test.c
    kernel.asm
Debug
    Makefile 
```

所有这些文件都是非常简单的代码。但是如果我`make`在文件夹中运行`Debug`，我会得到以下错误：

```
ld -Ttext 0x30400 -o test ../Debug/kernel.o ../Debug/test.o
../Debug/test.o: In function `Print_String':
test.c:(.text+0xf): undefined reference to `printf' 
```

有人能告诉我为什么吗？内容如下：

***测试.c***

```
#include <stdio.h>

int m = 1;
void Print_String()
{
    printf("TEST");
} 
```

***内核.asm***

```
extern m
extern Print_String

[section .text]
global _start
_start:
    mov eax, m
    call Print_String 
```

***生成文件***

```
# This Program
TARGET  = test

# All Phony Targets
.PHONY : everything clean all

DIR     = ..

OBJ     = $(DIR)/Debug/kernel.o $(DIR)/Debug/test.o
C_FILE  = $(DIR)/src/test.c
K_ASM   = $(DIR)/src/kernel.asm

ASM     = nasm
LD      = ld
CC      = gcc

CC_FLAG  = -c -g
ASM_FLAG = -f elf
LD_FLAG  = -Ttext 0x30400

# Default starting position
everything : $(TARGET)

clean :
    rm -f $(TARGET)

all : clean everything

kernel.o : $(K_ASM)
    $(ASM) $(ASM_FLAG) -o $@ $<

test     : $(OBJ)
    $(LD) $(LD_FLAG) -o $@ $(OBJ)

test.o   : $(C_FILE)
    $(CC) $(CC_FLAG) -o $@ $< 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-14T01:39:32.237

除非您在某个地方拥有自己的版本，否则您必须`printf`与 C 运行时库链接。

将选项传递 `-lc`给`ld`命令。

# vb.net - 使用 RS 实用程序使用数据库驱动的目录部署报告

> ID：14835052
> 
> 赞同：0
> 
> 时间：2013-02-12T14:41:16.967
> 
> 标签：vb.net, reporting-services

我正在尝试在我的 vb.net 脚本上使用 RS 实用程序来部署报告，因为我循环遍历包含所有报告、文件夹、数据源、链接报告、角色等的列表的表。是否可以在 VB.net 代码中调用 RS 实用程序或添加额外的库以在 vb 代码中启用 sqlconnection？我有 2008 R2 sql 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:39:32.330

就**rs Utility**而言，您没有太多选择。来自在线书籍：

> 您不在脚本文件中声明命名空间。脚本环境为您提供了几个有用的 Microsoft .NET Framework 命名空间：**System.Web.Services**、**System.Web.Services.Protocols**、 **System.Xml**和**System.IO**。

请参阅[格式化 Reporting Services 脚本文件](http://msdn.microsoft.com/en-us/library/ms154561.aspx)。

所以从这个意义上说，如果这是你的意图，你不能做任何事情，比如从数据库中读取表。您也许可以读取配置文件，但这些并不是扩展实用程序功能的真正选择。

您唯一的其他选择是直接在您自己的代码中与报表服务器 Web 服务进行交互，而不是使用**rs 实用程序**。

# ruby-on-rails-3 - 为什么需要在 rails api 中传递 auth_token 进行身份验证？

> ID：14835053
> 
> 赞同：0
> 
> 时间：2013-02-12T14:41:35.780
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我有用作 api 的 rails 应用程序，也使用设计身份验证，就 rails 应用程序而言，身份验证正常。但是在 Rails Api 的情况下，为什么我需要传递 auth_token。看起来传递 auth_token 需要自定义设计控制器，这似乎很痛苦。使用 rest 客户端在请求正文中传递 auth_token 允许我通过 Post 方法登录，但我没有找到任何回应。我需要定制设计控制器吗？

需要帮助谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:08:02.223

不想将您附加`:auth_token`到`POST/PUT`客户端的参数，而是将此令牌作为请求标头发送。

这就是你可以做到的-

```
class YourController < ApplicationController
  prepend_before_filter :get_api_key
  before_filter :authenticate_user!

  private
  def get_api_key
    if api_key = params[:api_key].blank? && request.headers["X-API-KEY"]
      params[:api_key] = api_key
    end
  end
end 
```

并说您用于设计的身份验证密钥设置我们的 api 密钥，例如-

```
config.token_authentication_key = :api_key 
```

[您还可以像这样](https://gist.github.com/wojt-eu/4492569)在设计中使用支持令牌 HTTP 标头身份验证的自定义策略

# xml - 具有标记化和不同值的复杂 XSLT 转换

> ID：14835056
> 
> 赞同：2
> 
> 时间：2013-02-12T14:41:37.513
> 
> 标签：xml, xslt, xpath, xslt-2.0

我正在研究由四个步骤组成的 XSL 转换。我想出了各个步骤，但我被困在如何将它们组合在一起。这是我想做的事情：

**源 XML 文档：**

```
<application>
    <contactPerson>
        <name>Dominik</name>
        <countryCode>DE,SP</countryCode>
    </contactPerson>
    <contactPerson>
        <name>Andrea</name>
        <countryCode>FR</countryCode>
    </contactPerson>
    <contactPerson>
        <name>Alex</name>
        <countryCode>FR,DE</countryCode>
    </contactPerson>
    <contactPerson>
        <name>Andre</name>
        <countryCode>FR</countryCode>
    </contactPerson>
</application> 
```

**目标 XML 文档：**

```
<application>
    <memberState>
        <countryCode>DE</countryCode>
        <contactPerson>
            <name>Dominik</name>
        </contactPerson>
        <contactPerson>
            <name>Dorothea</name>
        </contactPerson>
    </memberState>
    <memberState>
        <countryCode>FR</countryCode>
        <contactPerson>
            <name>Fiona</name>
        </contactPerson>
        <contactPerson>
            <name>Fabian</name>
        </contactPerson>
        <contactPerson>
            <name>Florian<name>
        </contactPerson>
    </memberState>
    <memberState>
        <countryCode>GB</countryCode>
        <contactPerson>
            <name>Gabi</name>
        </contactPerson>
        <contactPerson>
            <name>Gert</name>
        </contactPerson>
    </memberState>
</application> 
```

我确定了该过程的以下步骤：

1.  取*countryCode* -Tags，以逗号分隔值并将它们放在一个列表中
2.  删除列表中的重复出现
3.  为列表中的每个值创建一个新的*countryCode -node*
4.  对于每个新的*countryCode* -node，添加该国家的所有联系人

现在我想出了如何做**第 1 步**：

```
<memberState>
    <countryCodes>
        <xsl:for-each select="/application/contactPerson">
            <xsl:for-each select="tokenize(./countryCode, ',')">
                <countryCode>
                    <xsl:value-of select="."/>
                </countryCode>
            </xsl:for-each>
        </xsl:for-each>
    </countryCodes>
</memberState> 
```

对于**第 2 步**，我可以使用`distinct-values()`.

对于**第 3 步**+**第 4 步**，我实施了以下解决方案：

```
<xsl:for-each select="/application/contactPerson/countryCode[not(. = ../preceding-sibling::*/countryCode)]">
    <memberState>
        <countryCode>
            <xsl:value-of select="."/>
        </countryCode>
        <xsl:for-each select="/application/contactPerson[countryCode = current()]">
            <contactPerson>
                <name>
                    <xsl:value-of select="name"/>
                </name>
            </contactPerson>
        </xsl:for-each>
    </memberState>
</xsl:for-each> 
```

但我怎样才能把所有东西放在一起呢？我的想法是将每个步骤的输出保存在一个变量中，并在下一步中使用它，但是我遇到了 XSLT 中的变量是只读的这一事实的问题。有没有办法以某种方式连接单个解决方案以获得所需的结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T15:11:14.713

我只是建议一个单步`for-each-group`解决方案：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

<xsl:output indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="application">
  <xsl:copy>
    <xsl:for-each-group select="contactPerson" group-by="tokenize(countryCode, ',')">
      <memberState>
        <countryCode><xsl:value-of select="current-grouping-key()"/></countryCode>
        <xsl:apply-templates select="current-group()"/>
      </memberState>
   </xsl:for-each-group>
  </xsl:copy>
</xsl:template>

<xsl:template match="contactPerson/countryCode"/>

</xsl:stylesheet> 
```

当然，几个转换步骤是可能的，但是使用像`for-each-group`XSLT 2.0 提供的工具，我会首先考虑使用这些而不是使用几个转换步骤。

如果你想使用`distinct-values`它当然是可能的；然而，我只会将字符串值存储在一个变量中并对其进行操作，我不明白为什么使用 XSLT 2.0 你会想要一个临时树。所以这里有一个示例使用`distinct-values`和一个变量来存储它们以在第二步中处理（我使用一个键来提高效率）：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

<xsl:output indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:variable name="countryCodes" select="distinct-values(application/contactPerson/countryCode/tokenize(., ','))"/>

<xsl:variable name="main-input" select="/"/>

<xsl:key name="country" match="contactPerson" use="tokenize(countryCode, ',')"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="application">
  <xsl:copy>
    <xsl:for-each select="$countryCodes">
      <memberState>
        <countryCode><xsl:value-of select="."/></countryCode>
        <xsl:apply-templates select="key('country', ., $main-input)"/>
      </memberState>
   </xsl:for-each>
  </xsl:copy>
</xsl:template>

<xsl:template match="contactPerson/countryCode"/>

</xsl:stylesheet> 
```

然而，我认为，鉴于 XSLT 2.0 的支持，我的第一个建议更容易。

# ibm-connections - 在 IBM Connections 上调试 JavaScript 的最佳方法是什么？

> ID：14835069
> 
> 赞同：0
> 
> 时间：2013-02-12T14:42:12.943
> 
> 标签：ibm-connections, ibm-sbt

我一直在为 IBM Connections 构建 OpenSocial 小工具，并注意到 JavaScript 已被 IBM Connections 服务器预取、缩小并连接到单个文件中。

这对于生产来说非常有用，但是已经在 IBM Connections 中启用了开发人员模式，如果每个 JS 文件都没有被推送到单行上，那就太好了。

*   是否有防止缩小的设置？
*   IBM Connections 是否生成源映射以便可以重新生成原始 JS？
*   还有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:15:25.003

我不知道有任何源地图，但 dojo 加载器可以帮助您很多。将 ?debug=true 添加到 URL 以单独获取所有 JS 文件，未缩小。使用 debug=dojo 并且文件仍将被连接，但未缩小。

如果您的 URL 中有 #，请将 ?debug=dojo放在 #*之前*。

# c++ - 从 OpenCV 中的矩阵访问值

> ID：14835071
> 
> 赞同：4
> 
> 时间：2013-02-12T14:42:24.447
> 
> 标签：c++, matlab, opencv, matrix, pixel

例如，我有一个大小为 10x10 的矩阵 M，我有一个长度为 5 的列矩阵 ind
如何使用 OpenCV 将 A(ind,:) 分配给 C++ 中的新矩阵 B？

以下是我在 Matlab 中的操作：

```
A = [ 41     8    33    36    22    14    38    43    18     4
    46    49     2     2    20    34    13    13    42     3
     7    48    43    14    39    33    26    41    30    27
    46    25    47     3    40     9    35    13    28    39
    32    41    34     5    10     6    45    47    46    47
     5     8    38    42    25    25    48    18    15     7
    14    22    38    35    23    48    28    10    38    29
    28    46    20    16    33    18     7    13    38    24
    48    40    33    48    36    30     8    31    20     1
    49    48     9     2    38    12    13    24    29    17]

ind = [2; 8; 4; 6; 2]  

B = A(ind, :);

B = [ 46    49     2     2    20    34    13    13    42     3
    28    46    20    16    33    18     7    13    38    24
    46    25    47     3    40     9    35    13    28    39
     5     8    38    42    25    25    48    18    15     7
    46    49     2     2    20    34    13    13    42     3] 
```

谁能告诉我如何在 C++ 中使用 OpenCV 执行此操作而不使用 for 循环

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T16:04:06.903

没有以某种方式迭代的直接方法来提取行/列的随机排序。最简单的方法是提取行并将它们一一推送到目标矩阵中。鉴于您已声明矩阵 A 及其数据集：

```
cv::Mat B;
B.push_back(A(cv::Range(2,3),cv::Range::all()));
B.push_back(A(cv::Range(8,9),cv::Range::all()));
B.push_back(A(cv::Range(4,5),cv::Range::all()));
B.push_back(A(cv::Range(6,7),cv::Range::all()));
B.push_back(A(cv::Range(2,3),cv::Range::all())); 
```

应该做你想做的。这使用重载`operator()(cv::rowRange, cv::colRange)`来提取选定的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-22T16:07:50.407

我认为不使用`for`循环是不可能的，但最快的方法是使用`memcpy`. [你可以在这里](https://stackoverflow.com/a/30984292/1040597)看到完整的代码

# model-view-controller - 在前端使用 Extjs4

> ID：14835075
> 
> 赞同：3
> 
> 时间：2013-02-12T14:42:36.773
> 
> 标签：model-view-controller, backbone.js, extjs4, frontend

在我在新工作中发现 Extjs4 之前，我一直是 BackboneJS 的忠实粉丝（现在仍然如此）。我只能为它能做的事而小费！现在我的问题是是否可以（或推荐）在 frontOffice 中使用 Extjs 而不使用其组件。我只想利用它提供的 MVC 架构和模块加载器功能。使用主干，我使用 AMD 并需要 Js 来加载模块，生成生产构建是一件痛苦且非常困难的事情。我也想知道 Extjs 是否会在下一个版本中有一个 JavaScript 路由引擎。

您的建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:46:12.693

1.  听起来很棒，你是 BackboneJS 的粉丝。回答您的问题...您可以在 Web 应用程序中的任何地方使用 ExtJS，这使最终用户成为真正的尖端技术。您已经在 Backbone 工作并学习过 ExtJS。首先考虑您的应用程序需要使用哪一个，BackboneJS 或 ExtJS，因为两者都是 JS 的高级概念。
2.  对于第二个问题，ExtJS 在 BackboneJS 上使用结构良好的 MVC 模式。如果您能够在 BackboneJS 中创建自定义控制器（获取组件引用）控件，则不需要迁移到 ExtJS。我的建议是使用 ExtJS。
3.  ExtJS sencha 论坛非常适合了解他们的组件参考并提出错误并请求任何新的 javascript 路由引擎，如您所提到的。

# jquery - 需要简单的 Web 服务示例

> ID：14835076
> 
> 赞同：0
> 
> 时间：2013-02-12T14:42:38.600
> 
> 标签：jquery, html, .net, sql-server, web-services

我需要简单的 Web 服务，它接收`JSON`来自前端的请求（我将使用 jquery 进行调用）并传递给具有业务逻辑的 SQL DB。然后，当它从数据库获得`JSON`响应时，它只是传递到前端。

你能给我一些这个简单的网络服务的例子吗？

.Net IIS、SQL DB、纯 HTML 和 jQuery

![在此处输入图像描述](../Images/9c49eb3f2b77b19bef32ea6b16ed8544.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:46:25.817

ASP.NET Web 服务支持客户端使用 HTTP-POST、HTTP-GET 和 SOAP 协议来调用公开的方法，这取决于您选择一种方法而不是其他方法的具体要求。HTTP-GET 或 HTTP-POST 与 SOAP 的主要区别在于 SOAP 支持的数据类型要丰富得多，因为 SOAP 使用 XSD 模式来表示复杂的数据类型。

[http://www.codeproject.com/Articles/1231/ASP-NET-Web-Service](http://www.codeproject.com/Articles/1231/ASP-NET-Web-Service)

**使用 jQuery 客户端在 ASP.NET 2.0 中创建 JSON WebService**

默认情况下，ASP.NET Web 服务以 XML 格式返回数据。通过网络处理 XML 数据总是需要一些开销。如今，另一种称为 JSON 的格式在克服其中一些问题方面非常流行。从 .NET 3.5 开始，Microsoft 在 ASP.NET 3.5 中提供了此功能，但许多应用程序仍在 ASP.NET 2.0 上运行。在本文中，我将展示如何轻松地从 Web 服务返回 JSON 格式的数据并从 jQuery（一个非常流行的轻量级 JavaScript 库）中使用它。

[http://www.codeproject.com/Articles/45275/Create-a-JSON-WebService-in-ASP-NET-2-0-with-a-jQu](http://www.codeproject.com/Articles/45275/Create-a-JSON-WebService-in-ASP-NET-2-0-with-a-jQu)

# java - 如何控制调用 ApplicationListener bean 的顺序？

> ID：14835079
> 
> 赞同：2
> 
> 时间：2013-02-12T14:42:45.240
> 
> 标签：java, spring

当我有多个实现`ApplicationListener<ContextRefreshedEvent>`接口的 bean 时，如何控制某些 bean 在其他 bean 之前被调用？

在 bean 本身内部处理依赖关系是否更有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:58:01.063

在`AbstractApplicationContext`中，我可以看到以下代码片段，它负责注册`ApplicationListener`实现的 bean。

```
Collection listeners = getBeansOfType(ApplicationListener.class, true, false).values();
for (Iterator it = listeners.iterator(); it.hasNext();) {
  addListener((ApplicationListener) it.next());
} 
```

这里`getBeansOfType`发现要返回`Map`，因此排序是**不确定的**。这是它在`spring-2.0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-27T09:39:06.710

您可以实现 Ordered 接口来指定此排序。请参阅[此博文](http://www.scorgar.be/blog/java-equivalent-of-an-import-sql-using-applicationlistener/)。

# sql - 如何将此查询转换为经典 ASP 中的参数化查询？

> ID：14835082
> 
> 赞同：1
> 
> 时间：2013-02-12T14:42:47.473
> 
> 标签：sql, sql-server-2008, asp-classic

我的网站遭受 SQL 注入攻击。我的 Web 开发人员拒绝承认参数化查询，说他的转义脚本就足够了。有人可以通过展示如何将以下用经典 asp 编写的查询转换为参数化查询来提供帮助吗？

```
conn.Execute "insert into tblGROUPcomments ([thecomment], [date_of_entry], [groupid], [submittedby]) " _
            & "values ('" _
            & Server.HTMLEncode(cleanuptext(request.form("txtcomments"))) & _
            "','" & FormatMediumDate(date()) & _
            "','" & session("groupid") & _
            "','" & session("userid") & "')"
            session("errmessageT") = ""
            session("varcommentT") = ""
    response.redirect("../showallcommentsGROUPS.asp?gid=" & session("groupid")) & "#comments" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:14:31.007

首先创建如下命令对象

```
 Dim cmd
 Set cmd = Server.CreateObject("ADODB.Command")
 ' set command to your previously opened connection
 Set cmd .ActiveConnection = connContent
 SQL = " insert into tblGROUPcomments ([thecomment], [date_of_entry]) values (?, ?)"

 Set newParameter = cmd.CreateParameter("@thecomment", ad_nVarChar, ad_ParamInput, Server.HTMLEncode(cleanuptext(request.form("txtcomments"))), thecomment)
   cmd.Parameters.Append newParameter
 Set newParameter = cmdConn.CreateParameter("@date_of_entry", ad_Integer, ad_ParamInput, FormatMediumDate(date()), date_of_entry)
     cmdConn.Parameters.Append newParameter

 cmd.CommandText = SQL
 cmd.Execute 
```

我在查询中只使用了 2 列（thecomment 和 data_of_entry）。只需修改 newParameter 中的列类型。可能存在语法问题，我想您可以轻松解决。如果在您完成参数化查询后出现任何错误，请联系。希望你能找到起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T04:43:23.823

```
 maxCommentSize=1073741823
    comments=Server.HTMLEncode(cleanuptext(request.form("txtcomments")
    comments=left(comments,maxCommentSize)

    Set cmdAdd = Server.CreateObject ("ADODB.Command")
    cmdAdd.ActiveConnection = connection_string
    cmdAdd.CommandText = "INSERT INTO nsert into tblGROUPcomments ([thecomment], [date_of_entry], [groupid], [submittedby]) VALUES (?, ?, ?, ?)" 
    cmdAdd.Prepared = true
    cmdAdd.Parameters.Append cmdAdd.CreateParameter("param1", 203, 1, maxCommentSize, comments) 
    cmdAdd.Parameters.Append cmdAdd.CreateParameter("param2", 135, 1, -1, FormatMediumDate(date())) 
    cmdAdd.Parameters.Append cmdAdd.CreateParameter("param2", 5, 1, -1, session("groupid")) 
    cmdAdd.Parameters.Append cmdAdd.CreateParameter("param2", 5, 1, -1, session("userid")) 
    cmdAdd.Execute
    cmdAdd.ActiveConnection.Close

    session("errmessageT") = ""
    session("varcommentT") = ""
    response.redirect("../showallcommentsGROUPS.asp?gid=" & session("groupid")) & "#comments" 
```

# c# - 在运行时动态生成谓词

> ID：14835090
> 
> 赞同：2
> 
> 时间：2013-02-12T14:42:55.500
> 
> 标签：c#, linq

不确定这是否完全可能；我发现了一些关于表达式和谓词构建器的东西，但到目前为止，还没有任何东西可以让您在事先不知道它们的情况下运行任意查询。

基本上，我有一个来自大型 SQL 数据库的对象集合，并且我正在构建一个网页 (ASP.NET MVC 4) 以允许用户显示和过滤这些对象。用户将输入的查询的复杂性会有所不同。让他们输入这些查询的最简单和最简洁的方法类似于 Visual Studio TFS 插件让您搜索工作项的方式：一个条件表，您可以在其中不断添加行。您为连接条件选择“和”或“或”，然后选择一个字段，输入一个值，然后选择是否需要匹配或不匹配的内容：

```
1\. show items where [Field] [is|is not] [value]
2\.         [and|or] [Field] [is|is not] [value]
3\.         [and|or] [Field] [is|is not] [value]
etc... 
```

什么是最简单的方法可以把它变成 LINQ-ish 的东西，我可以把它贴`.ToList()`在最后？到目前为止，我提出的唯一解决方案涉及一个相当大且丑陋的 switch 块，其中包含匹配各个字段并附加 a 的案例`.Where()`，但是为了允许用户选择“或”作为条件，我最终会做像这样的东西：

*   虽然条件是 AND：
    *   使用大开关匹配字段
    *   `query = query.Where(ThisField == value);`
*   当您遇到 OR 条件时：
    *   将当前结果附加到临时列表
    *   来自完整未过滤列表的新查询
    *   使用大开关匹配字段
    *   `query = fullList.Where(ThisField == value);`
    *   像以前一样继续
*   当您用完条件时，将当前结果集附加到您一直使用的临时列表中，然后返回该列表。

这似乎没有我想要的那么优雅。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T12:48:10.147

你可以这样做：

```
class Program
{
    public enum Operator
    {
        And,
        Or
    }

    public class Condition
    {
        public Operator Operator { get; set; }
        public string FieldName { get; set; }
        public object Value { get; set; }
    }

    public class DatabaseRow
    {
        public int A { get; set; }
        public string B { get; set; }
    }

    static void Main(string[] args)
    {
        var conditions = new List<Condition>
        {
            new Condition { Operator = Operator.And, FieldName = "A", Value = 1 },
            new Condition { Operator = Operator.And, FieldName = "B", Value = "Asger" },
            new Condition { Operator = Operator.Or, FieldName = "A", Value = 2 },
        };

        var parameter = Expression.Parameter(typeof (DatabaseRow), "x");
        var currentExpr = MakeExpression(conditions.First(), parameter);
        foreach (var condition in conditions.Skip(1))
        {
            var nextExpr = MakeExpression(condition, parameter);
            switch (condition.Operator)
            {
                case Operator.And:
                    currentExpr = Expression.And(currentExpr, nextExpr);
                    break;
                case Operator.Or:
                    currentExpr = Expression.Or(currentExpr, nextExpr);
                    break;
                default:
                    throw new ArgumentOutOfRangeException();
            }
        }

        var predicate = Expression.Lambda<Func<DatabaseRow, bool>>(currentExpr, parameter).Compile();

        var input = new[]
        {
            new DatabaseRow {A = 1, B = "Asger"},
            new DatabaseRow {A = 2, B = "Hans"},
            new DatabaseRow {A = 3, B = "Grethe"}
        };

        var results = input.Where(predicate).ToList();
    }

    static BinaryExpression MakeExpression(Condition condition, ParameterExpression parameter)
    {
        return Expression.Equal(
            Expression.MakeMemberAccess(parameter, typeof (DatabaseRow).GetMember(condition.FieldName)[0]),
            Expression.Constant(condition.Value));
    }
} 
```

这假设您有一个类作为具有正确类型的数据库行的模型。然后，您可以通过正则表达式将您的条件解析为上面显示的类型条件列表，并且提供的代码可以将其转换为表达式树。生成的表达式可以编译并运行（如图所示）或转换为 SQL（只是将谓词填充到 IQueryable.Where 中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T11:28:57.950

您可以使用[`PredicateBuilder`LINQKit](http://www.albahari.com/nutshell/predicatebuilder.aspx)来执行此操作。使用它的`And()`和`Or()`扩展方法，您可以为您的查询构建一个[表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)。然后你可以使用那个表达式树作为你的条件`Where()`。您还需要调用`AsExpandable()`或调用您的`query`, 或调用`Expand()`创建的表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:27:31.027

您可以使用 Dynamic Linq 动态添加条件。

请参阅[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-17T17:34:01.833

我已修改@asgerhallas 答案以使用用 . 并根据需要转换为适当的类型

```
 static BinaryExpression MakeExpression(Condition condition, ParameterExpression parameter)
    {
        var memberPath = condition.FieldName.Split(".");

        var left = Expression.Property(parameter, memberPath[0]);

        foreach (var mp in memberPath.Skip(1))
        {
            left = Expression.Property(left, ((PropertyInfo)left.Member).PropertyType.GetProperty(mp));

        }

        var rightType = ((PropertyInfo)left.Member).PropertyType;
        var converter = TypeDescriptor.GetConverter(rightType);

        if (!converter.CanConvertFrom(typeof(string))) throw new NotSupportedException();

        var rightValue = converter.ConvertFrom(condition.Value);

        return Expression.Equal(
            left,
            Expression.Constant(rightValue));
    } 
```

然后您可以使用“SomeProperty.SomeThing”和“anystring”，它会根据子内容创建一个表达式，如果可以的话，将字符串转换为适当的值类型。

# c# - 完全模态 WPF 窗口？

> ID：14835095
> 
> 赞同：5
> 
> 时间：2013-02-12T14:43:03.487
> 
> 标签：c#, wpf, modal-dialog

我有一个要求，指定使用 WPF 的通知托盘应用程序必须（基于某些条件）弹出一个全局模式的窗口。这应该防止用户做任何事情（甚至在托盘应用程序之外），直到他们满足一些其他条件，此时它将启用关闭按钮并允许用户关闭它。

如何制作这样一扇窗户？我有窗口显示，它评估条件和诸如此类的东西，但它只是应用程序的模式（即它只阻止它正在运行的应用程序的执行和 UI。

我想我可以创建一个无边框窗口并禁用最小化功能，但他们仍然可以访问开始菜单。有接盘侠吗？我所追求的功能类似于 Windows UAC/Admin 权限请求窗口。

这不是顶部重复框提供的问题的重复。该问题与 Windows 窗体有关，不适用于 WPF。碰巧我收到了一个对我很有效的答案，但这不是上面提供的问题的答案。并不是说它真的很重要，但我希望删除重复的标签。我喜欢认为我在发布之前已经很好地研究了我的问题，并且添加该标签意味着我没有。

# 编辑

这个问题不是重复问题框中链接的问题的重复。这个问题在 Windows 窗体风格中得到了回答，我正在使用 WPF，一个完全不同的 UI 框架。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T14:44:41.073

使用`Window.ShowDialog()`方法。更多信息可以在[这里找到](http://msdn.microsoft.com/en-us/library/system.windows.window.showdialog.aspx)

请参阅 Sixlettervariables 的第二条评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:46:55.060

一种解决方案可能是制作一个覆盖整个屏幕（实际上您应该说：所有屏幕）的半透明 WPF 窗口，并使用`Window.ShowDialog()`所有者作为该窗口来显示模式窗口。那么你需要做的就是防止任务切换（这不是一件容易的事），但也许这样做就足够了吗？

像 UAC 这样的东西 - 例如在这个答案[中](https://stackoverflow.com/questions/5825527/gray-out-the-desktop-screen-except-a-selected-control-in-c-sharp)？

# codeigniter - 在codeigniter中为网站网址创建高安全性加密ID？

> ID：14835098
> 
> 赞同：0
> 
> 时间：2013-02-12T14:43:08.290
> 
> 标签：codeigniter

控制器：

```
function verifyuser()
{
    $uri = $this->uri->uri_to_assoc(4);
    //print_r($uri);
    if( isset( $uri['id'] ) && $uri['id'] != '' )

            {
            $where = array();
                $where['roll_number'] = $uri['id']; 
$this->data['verification'] = $this->admin_model->verify($where);

        }
        else
        {
        $this->data['verification'] = array();

        }
    $this->data['content'] = 'admin/verification';
    $this->view($this->data);   
} 
```

模型：

```
function verify($where='')

{
  $this->db->select('*');
$this->db->from( $this->db->dbprefix('members') );
if( !(empty( $where )) )
$this->db->where( $where );

$result = $this->db->get();
//echo $this->db->last_query();
    return $result->result();

} 
```

www.example.com/user/admin/verify/ **345**
到
www.example.com/user/admin/verify/ **hgf_877%%%_oi**

像这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:07:25.803

[出于安全目的，您可以使用PHP.net](http://www.php.net/manual/en/ref.url.php)手册中定义的任何编码。但我更喜欢 base64_encode 和 base64_decode。我正在使用我的应用程序来编码复杂的字符串。

```
<?php
$temp = 345;
$res = base64_encode($temp);
echo $res;echo "<br>";
$result = base64_decode($res);
echo $result;
?> 
```

[您也可以在此链接](http://eval.in/9618)中找到小示例。

# android - ActionBar 标题颜色不变

> ID：14835100
> 
> 赞同：0
> 
> 时间：2013-02-12T14:43:14.113
> 
> 标签：android, android-actionbar

我想将操作栏的标题颜色更改为白色。我已经声明了样式：

```
<!--
Base application theme, dependent on API level. This theme is replaced
by AppBaseTheme from res/values-vXX/styles.xml on newer devices.
-->
<style name="AppBaseTheme" parent="android:Theme.Holo.Light">
<!--
    Theme customizations available in newer API levels can go in
    res/values-vXX/styles.xml, while customizations related to
    backward-compatibility can go here.
-->
</style>

<!-- Application theme -->
<style name="AppTheme" parent="AppBaseTheme">
<!-- All customizations that are NOT specific to a particular API-level can go here. -->
<item name="android:windowActionBar">true</item>
<item name="android:actionBarStyle">@style/ProjActionBar</item>
<item name="android:actionBarTabTextStyle">@style/ProjActionBar.TitleTextStyle</item>
</style>

<!-- ActionBar Style -->
<style name="ProjActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">@color/b</item>
    <item name="android:backgroundStacked">@color/k1</item>
    <!-- This is when tabs are splitted into a second line -->
</style>

<style name="ProjActionBar.TitleTextStyle" parent="@android:style/TextAppearance">
    <item name="android:textColor">@color/w</item>
    <item name="android:textSize">13sp</item>
</style> 
```

如您所见，我有一个“actionBarTabTextStyle”，其属性“textColor”声明为@color/w，在我的colors.xml中声明为：

```
<color name="w">#FFFFFFFF</color> 
```

发生了什么事？为什么操作栏标题不会改变 textColor？

我的项目针对 min SDK 11 sdkVersion 17 (Honeycomb 3.0+)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T14:49:02.197

问题是您实际上并没有更改标题文本样式。您已更改选项卡文本的样式。要更改标题文本样式，您需要设置样式，`android:titleTextStyle`并且可以选择`android:subtitleTextStyle`设置`ProjActionBar`。

所以，你`ProjActionBar`变成了这样：

```
<style name="ProjActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">@color/b</item>
    <item name="android:backgroundStacked">@color/k1</item>
    <item name="android:titleTextStyle">@style/ProjActionBar.TitleTextStyle</item>
</style> 
```

请注意，这假设您使用的是本机 ActionBar 组件（正如您从 继承的事实所表明的那样`@android:style/Widget.Holo.Light.ActionBar`）。如果你想要向后兼容，你将不得不继承你的风格`Widget.AppCompat.Light.ActionBar`并使用`textStyle`而不是`android:textStyle`.

# c# - 在映射期间将外键作为属性公开的冲突

> ID：14835103
> 
> 赞同：0
> 
> 时间：2013-02-12T14:43:22.880
> 
> 标签：c#, ef-code-first, entity-framework-5, fluent-interface

我有以下表结构：

```
Affiliations

Id    Party1    Party2
1     100       200
2     300       400 
```

以及通过 FKs of *Affiliations引用的表格*

```
Parties

Id    Name
100   Hank
200   Ted
300   Kim
400   Joe 
```

使用我的 Party 实体（未显示），我使用 Fluent API 定义了表之间的关系：

```
modelBuilder.Entity<Party>()
            .HasMany(c => c.LeftPartyAffiliations)
            .WithRequired()
            .Map(m => m.MapKey("Party1"));

modelBuilder.Entity<Party>()
            .HasMany(c => c.RightPartyAffiliations)
            .WithRequired()
            .Map(m => m.MapKey("Party2")); 
```

派对实体将左右关系映射到它们各自的属性*LeftPartyAffiliations*和*RightPartyAffiliations*。通过定义上述规则，EF 自动将*Party1*和*Party2*添加到我的 Affiliations 表中。

**我的问题在于，虽然每个隶属关系中的值都正确映射，但我无法知道左右两侧的隶属关系 ID 是什么，因为我通过我的党关系将这些表映射到我的列。**

例如，我希望能够通过我的附属实体访问实际的 Party1 和 Party2 Id：

```
public class PartyAffiliation
{
    ...

    [Column("Party1")]
    public int Party1 { get; set; }

    [Column("Party2")]
    public int Party2 { get; set; }

    ...
} 
```

...但这是不可能的，因为我已经通过 Fluent API 从 Party 映射到我的 Left 和 Right 集合来定义我的关系。

一个完美的情况将允许我进行 Fluent API 映射，这将创建列和关系，并允许我通过我的附属映射中定义的物理列访问我的 Party1 和 Party2 Id。

如果我尝试在实体和 Fluent API 中物理定义属性，我会得到：

> 类型中的每个属性名称都必须是唯一的。属性名称已定义为“xxx”

是否有解决此问题的方法或将列映射到多个属性而无需向数据库物理添加附加字段的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:45:13.113

您可以使用`HasForeignKey`代替`MapKey`：

```
modelBuilder.Entity<Party>()
    .HasMany(c => c.LeftPartyAffiliations)
    .WithRequired()
    .HasForeignKey(pa => pa.Party1)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<Party>()
    .HasMany(c => c.RightPartyAffiliations)
    .WithRequired()
    .HasForeignKey(pa => pa.Party2)
    .WillCascadeOnDelete(false); 
```

它将模型类中的属性映射到数据库中的外键列。此处必须禁用级联删除（至少对于两个关系之一），否则您将拥有一个在 SQL Server 中被禁止的多个级联删除`Party`路径`PartyAffiliation`。

# plugins - 强大的 PhpStorm 宏插件

> ID：14835106
> 
> 赞同：2
> 
> 时间：2013-02-12T14:43:29.330
> 
> 标签：plugins, macros, phpstorm

我想要 PhpStorm 的插件，它可以记录我的操作，例如：打开文件、使用文件内容更改活动窗口、查找内容等。默认宏不支持此操作。或者我想要简单的宏插件的来源。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:02:29.250

不存在这样的插件。宏子系统的源代码可在[IntelliJ IDEA 社区 git 存储库](https://github.com/JetBrains/intellij-community/)中找到。

# php - 你如何对一组对象进行排序？

> ID：14835112
> 
> 赞同：4
> 
> 时间：2013-02-12T14:44:03.337
> 
> 标签：php, sorting, object

我有一个看起来像这样的对象数组：

```
Array
(    
[5] => stdClass Object
    (
        [id] => 173
        [name] => Silo 1
    )

[6] => stdClass Object
    (
        [id] => 174
        [name] => Silo 10
    )

[7] => stdClass Object
    (
        [id] => 175
        [name] => Silo 11
    )

[11] => stdClass Object
    (
        [id] => 179
        [name] => Silo 2
    )

[12] => stdClass Object
    (
        [id] => 180
        [name] => Silo 3
    )
) 
```

我试图弄清楚如何根据`name`

我尝试过的事情：

```
usort($result, function($a, $b)
{
    if ($a->name == $b->name) return 0 ;
    return ($a->name < $b->name) ? -1 : 1 ;
}); 
```

和

```
usort($result, function($a, $b)
{
    strnatcmp($a->name, $b->name); // return (0 if ==), (-1 if <), (1 if >)
}); 
```

没有什么能给我我想要的输出：

```
Silo 1
Silo 2
Silo 3
Silo 10
Silo 11 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T14:46:57.617

您没有返回 strnatcmp 结果，因此 PHP 将假定`NULL`返回值：

```
usort(...) {
   return strnatcmp(...);
   ^^^^^^
} 
```

# android - Android SQLite：如何在数据库中搜索特定值？

> ID：14835113
> 
> 赞同：-1
> 
> 时间：2013-02-12T14:44:03.790
> 
> 标签：android, sql, database, sqlite

我正在创建一个基于数据库的应用程序，该应用程序需要在特定列中的数据库中搜索名称，然后列出由关键字过滤的所有条目。例如数据库条目：

```
1   Test    123 chicken 
```

如果有人搜索鸡肉，它将输出或直接指向条目 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:48:14.110

```
String arg = "chicken";
String query = "select * from table_name where title=\""+ arg + "\"";
Cursor cs = mSqlDB.rawQuery(query, null); 
```

您应该在光标 cs 中有您选择的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:45:51.300

您需要在语句中使用`WHERE`子句`SELECT`，

```
SELECT *
FROM tableName
WHERE name = 'chicken' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:09:46.230

想象一下，您有一个按钮，然后单击它...尝试一下：

```
Button saveButton = (Button) findViewById(R.id.search_button);

        saveButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {

                String searchStr = search.getText().toString();  // Here is "chicken"

                Cursor c = sampleDB.rawQuery("SELECT Id, Name, Price FROM "+SAMPLE_TABLE_NAME+" WHERE Name like '"+searchStr+"'", null);

                if (c != null ) { 
                    if  (c.moveToFirst()) {
                        do {

                            int idNumber = c.getInt(c.getColumnIndex("Id"));

                            Log.v("IdNumber", id);

                        }while (c.moveToNext());
                    }
                }

            }
        }); 
```

# html - 显示 Zurb 的社交图标时出现问题

> ID：14835115
> 
> 赞同：2
> 
> 时间：2013-02-12T14:44:09.477
> 
> 标签：html, zurb-foundation

我在 Zurb 基金会建立了一个测试站点。我试图让 Zurb 的 svg 启用社交图标工作，但图标本身不会显示。它确实显示图标后面的小阴影，但没有显示任何图标。

我在这里设置了一个测试站点，其中有一个示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:42:35.267

检查以确保您的服务器允许 SVC mime 类型。

如果您将 .svg 的路径更改为指向 zurb 的演示，它们就可以正常工作。

```
.svg .fc-webicon.facebook {
background: url("http://www.zurb.com/playground/playground/social-webicons/images/fc-webicon-facebook.svg");
} 
```

# rubymine - Rubymine - 延迟作业

> ID：14835118
> 
> 赞同：1
> 
> 时间：2013-02-12T14:44:12.323
> 
> 标签：rubymine

我想知道如何向 ruby​​mine 调试服务器启动添加另一个项目？我希望通过服务器调试启动来启动延迟的作业工作者，而不是在命令行中并行打开它？

在生产中，这个问题当然是使用工头解决的。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:58:06.650

在运行配置中使用**启动前选项：**

![在此处输入图像描述](../Images/42d6fdbab8ad168ea60526044ea11216.png)

# active-directory - 通过掩码批量重置 Active Directory 中的密码

> ID：14835119
> 
> 赞同：-1
> 
> 时间：2013-02-12T14:44:15.817
> 
> 标签：active-directory

我在一个特定的 OU 中有成千上万的用户，我想重置他们的密码。它可以是相同的密码，但不是该特定 OU 中的所有用户。我需要能够为具有以特定模式开头的用户名的用户执行此操作。

例如，我的用户以 TPA* 或 IDH* 开头，但不是 AAA*。

我发现[这篇](https://serverfault.com/questions/207115/how-do-i-bulk-reset-passwords-for-all-users-in-an-ou#log-in)为所有用户重置的帖子，我想知道是否可以调整 dsquery 以添加掩码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:00:08.413

Figured it out with a little more research...

```
dsquery user "ou={userdirectorychild},ou={userdirectory},dc={mydc},dc={mydc},dc={mydc}" -name tp* | dsmod user -pwd {newpassword} 
```

# asp.net - 如何在 Web 服务器上验证 http 请求

> ID：14835123
> 
> 赞同：3
> 
> 时间：2013-02-12T14:44:32.483
> 
> 标签：asp.net, html, web, webserver, oauth-2.0

我有以下情况： -

1）用户打开网页 test1.aspx 并单击 test1.aspx 上的某个按钮。点击后，用户被重定向到网页回调.aspx。
2)callback.aspx 使用 javascript 向另一台服务器（如 facebook 服务器）执行一些跨域 http 请求
3)callback.aspx 然后将收集到的数据（从另一台服务器）发送到网页 test2.aspx（简单的 web 表单发布）。

现在，我的问题是如何确保收集到 test2.aspx 的数据仅来自 callback.aspx 而不是其他任何地方。我的意思是任何黑客都可以通过 post 或 get request 向 test2.aspx 发送虚假数据。

callback.aspx 类似于身份验证脚本，如果它说是用户已通过身份验证，test2.aspx 必须相信用户已通过身份验证。基本上，我是使用 oauth-2.0 客户端流程的身份验证用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:50:52.453

从网页执行 HTTP 请求 - 通常称为“屏幕抓取”的任务 - 涉及向其他网站发出 HTTP 请求的服务器端代码，检索返回的结果，并以某种方式处理这些结果。例如，屏幕抓取通常用于从另一个站点抓取数据，例如从 Yahoo! 抓取 HTML。财务页面获取特定股票代码的当前股票价格。由于 WebClient 类，在 ASP.NET 中执行简单的 HTTP 请求只需要几行代码。此类位于 System.Net 命名空间中，提供少量属性和方法，可用于发出简单的 HTTP 请求。

[http://www.4guysfromrolla.com/articles/102605-1.aspx](http://www.4guysfromrolla.com/articles/102605-1.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:50:59.437

有很多可以达到这样的要求。首先想到的是加密从 callback.aspx 发送到 test2.aspx 的数据。如果您能够在 test2.aspx 中解密，那么您可以确定数据是好的。

# git - GIT 我如何知道谁或哪些用户克隆了 repo？

> ID：14835124
> 
> 赞同：0
> 
> 时间：2013-02-12T14:44:38.390
> 
> 标签：git, git-clone

我在 Ubuntu 服务器中的 GIT 1.7 中有一个私有 REPO，可供一组用户使用。我想知道是否有办法了解哪个用户已经克隆了提到的 REPO。有没有命令可以做到这一点？任何帮助或评论都非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:46:03.330

这样做的唯一方法是检查访问存储库的用户的服务器日志，git 本身不会记录这样的任何内容。

但是，这将为您提供直接访问服务器的人员列表，但这并不是克隆存储库的人员的明确列表 - 他们可以不受任何限制地相互克隆，这就是分布式版本控制的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:48:45.547

现在我使用 Subversion——但这个整体概念似乎是有效的——我相信我会被任何了解 Git 的人否决，但是哦，好吧......

如果您有一个预先存在的小组，那么您不能通过`git clone --reference <repository>`对每个小组成员进行检查来做一个 , 吗？如果那里有该用户的克隆，就会出现一个，不是吗？

# grails - 命令 '\bin\javaw.exe' 被终止，因为它有一段时间没有产生新的输出

> ID：14835126
> 
> 赞同：4
> 
> 时间：2013-02-12T14:44:44.437
> 
> 标签：grails, sts-springsourcetoolsuite

我已经从 SVN 下载了我的 grails 项目并尝试运行它。项目使用 grails 2.0.4 版本。我使用的是 STS 3.0 版本。我已经正确设置了 JAVA_HOME 并在 STS 中添加了正确的 grails 编译器。

当我尝试运行该项目时，它会引发以下错误并且构建未启动

命令 '\bin\javaw.exe' 被终止，因为它有一段时间没有产生新的输出。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-11T22:49:23.867

这是与 Grails 通过单个外部进程执行多个命令的方式有关的问题。如果您在 Eclipse（+GGTS 插件）中，请转到“Windows > Preferences > Groovy > Grails > Grails Launch”，然后禁用“Keep External Grails Running”选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:07:47.220

这也发生在 GGTS 中。

我的解决方法是创建运行配置。打开 Run Configurations，双击 Grails，它将创建新的 Grails 配置。重命名它，选择你的项目并输入 grails 命令：run-app。单击应用或运行。

在您运行配置下拉菜单的顶部工具栏上，它应该包含您的新配置。以这种方式运行不会超时。

这个 STS 问题[有点相关](http://forum.springsource.org/showthread.php?135631-GGTS-3-2-Consoles-not-terminating-with-Grails-2-2-1)。Windows >> Preferences >> Grails >> Grails Launch 是您可以找到所有选项的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T06:55:39.887

当我尝试对我的项目进行战争时，我遇到了同样的问题。我通过更改设置来修复它

Windows -> 首选项 -> Groovy -> Grails -> Grails 启动 -> Grails 命令超时[ms]

将超时时间更改为较大的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-02T04:47:40.653

当我尝试`run-app`从`grails command line`. 尝试`Run menu`改用。

**运行**->**运行方式**-> **Grails 命令（运行应用程序）**

看[这张票](https://issuetracker.springsource.com/browse/STS-3194)。

# jquery-ui-autocomplete - 为什么 jquery-ui 自动完成不能在 jstree 中工作？

> ID：14835130
> 
> 赞同：1
> 
> 时间：2013-02-12T14:44:55.157
> 
> 标签：jquery-ui-autocomplete, jstree

我正在尝试在 jstree 中使用自动完成功能，但无法弄清楚为什么当两个绑定都在文档准备好时完成时它不起作用。如果在通过 Windows 加载或用户触发脚本的 jstree 绑定之后完成自动完成绑定，则它可以工作。

这是该问题的简化示例。（[JSFiddle 的代码](http://jsfiddle.net/LehJd/)）

```
<!DOCTYPE html
PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>jsTree v.1.0 - Demo</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="http://static.jstree.com/v.1.0pre/jquery.cookie.js"></script>
    <script type="text/javascript" src="http://static.jstree.com/v.1.0pre/jquery.hotkeys.js"></script>
    <script type="text/javascript" src="http://static.jstree.com/v.1.0pre/jquery.jstree.js"></script>
    <link type="text/css" rel="stylesheet" href="http://static.jstree.com/v.1.0pre/_docs/syntax/!style.css"/>
    <link type="text/css" rel="stylesheet" href="http://static.jstree.com/v.1.0pre/_docs/!style.css"/>
    <script type="text/javascript" src="http://static.jstree.com/v.1.0pre/_docs/syntax/!script.js"></script>

    <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />

    <script>
        function autocomplete(element) {
            var availableTags = [
                "ActionScript",
                "AppleScript",
                "Asp",
                "BASIC",
                "C",
                "C++",
                "Clojure",
                "COBOL",
                "ColdFusion",
                "Erlang",
                "Fortran",
                "Groovy",
                "Haskell",
                "Java",
                "JavaScript",
                "Lisp",
                "Perl",
                "PHP",
                "Python",
                "Ruby",
                "Scala",
                "Scheme"
            ];
            $(element).autocomplete({
                source: availableTags
            });
        };
    </script>

</head>
<body id="demo_body">
<div id="container">

<h1 id="dhead">jsTree v.1.0</h1>
<h1>DEMO</h1>
<div>
  <label for="tags">Tags: </label>
  <input id="tags" />
</div>

<h2>Autocomplete inside jsTree</h2>
<div id="description">

<!-- autocomplete inside a tree works when the user adds autocomplete manually -->
<button type="button" onclick="autocomplete('#tagstree')">add autocomplete manually (comment out other autocomplete bindings)</button>

<div id="demo1" class="demo" style="height:100px;">
    <ul>
        <li id="phtml_1">
            <label for="tagstree">Tags: </label>
            <input id="tagstree" />
            <ul>
                <li id="phtml_2">
                    <a href="#">Child node 1</a>
                </li>
                <li id="phtml_3">
                    <a href="#">Child node 2</a>
                </li>
            </ul>
        </li>
        <li id="phtml_4">
            <a href="#">Root node 2</a>
        </li>
    </ul>
</div>
<script type="text/javascript">
$(function () {

/* just to demonstrate an autocomplete field by itself works */
   autocomplete('#tags');

/* adding autocomplete on an element in the tree doesn't work */
   autocomplete('#tagstree');

    $("#demo1")
        .jstree({
            "plugins" : ["themes","html_data","ui","crrm","hotkeys"],
            "core" : { "initially_open" : [ "phtml_1" ] }
        })
        .bind("loaded.jstree", function (event, data) {
        });

});

/* autocomplete inside a tree works when it gets added via windows load instead of document ready */
//$(window).load(function () {
//    autocomplete('#tagstree');
//});

</script>
</div>

</body>
</html> 
```

# properties - JBoss - 如何以编程方式检查standalone.xml 中的值？

> ID：14835134
> 
> 赞同：1
> 
> 时间：2013-02-12T14:45:14.103
> 
> 标签：properties, jboss, bind

如果配置已定义例如“任意地址”标签，有谁知道如何从代码中检查运行时？

```
...
<interfaces>
    <interface name="management">
        <inet-address value="${jboss.bind.address.management:127.0.0.1}"/>
    </interface>
    <interface name="public">
        <any-address/>
    </interface>
</interfaces>
... 
```

对于“jboss.bind.address”，我可以获得系统属性——但在“任意地址”的情况下呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:03:46.423

您可以尝试从您的应用程序中运行一个[位于同一位置的管理客户端。](http://management-platform.blogspot.ch/2012/07/co-located-management-client-for.html)

# javascript - IE 从计算样式（currentStyle）读取继承的字体大小不正确

> ID：14835135
> 
> 赞同：4
> 
> 时间：2013-02-12T14:45:20.580
> 
> 标签：javascript, css, internet-explorer, internet-explorer-9

我在这里放了一个小测试用例：

[http://jsfiddle.net/D4sLk/2/](http://jsfiddle.net/D4sLk/2/)

基本上我设置了以下字体大小：

*   * （一切）：`12px`
*   容器：`20px`
*   测试元素：`inherit`

DOM 层次结构是：*容器*>*测试元素*。

在 IE9 中，字体大小使用时报告为 12px，`testEl.currentStyle.fontSize`但显示为 20px。在 Chrome 和 FF 中似乎很好。

有没有解决这个问题的方法？还是我做了一些非常愚蠢的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:18:50.780

尝试使用`font-size: 1em`而不是使用`inherit`.

这样做的原因是因为我发现这`inherit`似乎在 IE 中存在问题。当我查看 IE9 时，它呈现得很好，但是由于某种原因`testEl.currentStyle.fontSize`，`$(testEl).css('font-size')`两者都返回了 12px。

我已经读过要使用字体大小：在 IE8 中继承，您需要指定一个！DOCTYPE，但是在 IE9 中应该没问题（[http://www.w3schools.com/cssref/pr_font_font-size.asp](http://www.w3schools.com/cssref/pr_font_font-size.asp)） . 出于某种原因，`testEl.currentStyle.fontSize`并`$(testEl).css('font-size')`没有在 IE9 中获取正确的值。

当您将字体大小设置为 1em 时，您将其大小调整为父字体大小的 100%，在本例中为 20 像素。来自[http://www.w3schools.com/cssref/css_units.asp](http://www.w3schools.com/cssref/css_units.asp)：

> 1em 等于当前字体大小。2em 表示当前字体大小的 2 倍。例如，如果一个元素以 12 pt 的字体显示，那么 '2em' 就是 24 pt。'em' 在 CSS 中是一个非常有用的单位，因为它可以自动适应读者使用的字体

因此，`computedStyle.fontSize`和`$(testEl).css('font-size')`都应该返回 20px。

希望这可以帮助！

# javascript - 如何在索引视图上添加微调器以在 Backbone 中获取？

> ID：14835139
> 
> 赞同：0
> 
> 时间：2013-02-12T14:45:29.100
> 
> 标签：javascript, backbone.js, spinner

这是我收藏的视图：

```
Network.Views.Offers.Index = Backbone.View.extend({
  initialize: function() {
    _.bindAll(this, 'render');
    this.collection = new Network.Collections.Offers();
    this.collection
    .on('reset', this.render)
    .fetch();
  },

  render: function() {
    var self = this;
    _.each(this.collection.models, function(model) {
      var view = new Network.Views.Offers.Offer({ model: model });
      $(self.el).append(view.el);
      view.adjustHeight();
    });
    return this;
  },
}); 
```

成功获取后，我尝试添加和删除微调器类：

```
this.$el.append('<div class="loading">Loading...</div>');
this.collection
.on('reset', this.render)
.fetch({
  success:function() {
    this.$el.removeClass('loading');
  }
}); 
```

但我得到：

```
Uncaught TypeError: Cannot call method 'removeClass' of undefined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:55:01.907

```
this.$el.append('<div class="loading">Loading...</div>'); 
```

在 $el 元素中添加一个具有加载类的 div。

```
this.$el.removeClass('loading'); 
```

removeClass 不会删除具有指定类的元素中的元素。

尝试：

```
this.$el.append('<div class="loading">Loading...</div>');
var $this = this; // maintain the context of this within the success callback
this.collection
.on('reset', this.render)
.fetch({
  success:function() {
    $this.$('.loading').remove();
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:51:44.227

您收到 TypeError 是因为`$el`未`this`在`success`回调中定义。这是因为`this`在`success`回调中不是指您的`Index`视图。

您需要绑定`this`到该回调以`this`引用该回调中的`Index`视图。

```
success:function() {
  this.$el.removeClass('loading');
}.bind(this) 
```

[在 MDN 上](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)阅读[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

# css - Twitter Bootstrap 响应问题？

> ID：14835142
> 
> 赞同：1
> 
> 时间：2013-02-12T14:45:39.263
> 
> 标签：css, twitter-bootstrap

我正在使用 Twitter Bootstrap 框架进行响应式/流体布局。

网站的顶部横跨任何屏幕的整个宽度，但是当我进入内容时，屏幕右侧大约有 20 px 的间隙。这似乎只发生在屏幕小到足以拉入 CSS 的部分地址时：

```
@media (max-width: 767px){} 
```

你可以在这里看到一个屏幕截图：

[http://monosnap.com/image/dQ4OD0O8fW7gcbVvXVfTKLbUa](http://monosnap.com/image/dQ4OD0O8fW7gcbVvXVfTKLbUa)

我的测试代码托管在这里：[http ://demo.omnigon.com/christian_bovine/show-sxsw/](http://demo.omnigon.com/christian_bovine/show-sxsw/)

就像我说的，在大屏幕上它很好，只是在小屏幕上，它只是中间的内容。我看了很多次，我看不到我的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:07:55.303

您需要删除 #footer css 选择器上的负边距。此声明本质上是强制您的页脚大于其父容器。

通常，您只会在父容器具有填充并且您想通过对子元素应用负边距来否定父填充时才使用此技术。

# java - Eclipse 编辑器插件：XML 文件中的 Java

> ID：14835144
> 
> 赞同：2
> 
> 时间：2013-02-12T14:45:41.097
> 
> 标签：java, xml, eclipse, plugins, editor

我正在尝试开发一个 Eclipse 插件，该插件可以为 XML 文件中特定标记内的 Java 代码启用语法突出显示、内容辅助、颜色格式化等。

使用 Eclipse PDE（并遵循[本教程](http://www.realsolve.co.uk/site/tech/jface-text.php)），我设法提取了包含 Java 代码的标签。我不想从头开始重新实现 Java 编辑器，我可以使用[eclipse.jdt](http://mvnrepository.com/artifact/org.eclipse.jdt/ui)类（如 JavaPartitionScanner、JavaColorManager 等）吗？如果是这样，怎么做？使用另一个 RuleBasedPartitionScanner？还是一个简单的 RuleBasedScanner？

或者也许有一种简单的方法可以将 JavaEditor 类包含在另一个编辑器中？

有什么帮助吗？还是起点？

谢谢。

# php - 如何删除这样的数组中的重复项？

> ID：14835145
> 
> 赞同：0
> 
> 时间：2013-02-12T14:45:43.777
> 
> 标签：php, arrays

我怎样才能删除这样的数组中的重复项？

我的数组 $test1 给了我这个：

```
Array ( 
[0] => Array ( [id] => 47523 [date] => 12-02-13 14:36:32 ) 
[1] => Array ( [id] => 47523 [date] => 12-02-13 13:56:48 ) 
[2] => Array ( [id] => 38639 [date] => 12-02-13 13:38:51 ) 
[3] => Array ( [id] => 38639 [date] => 12-02-13 13:07:43 )

) 
```

我的数组 $test2 给了我这个：

```
Array ( 
[0] => Array ( [id] => 47523 [date] => 12-02-13 14:36:32 ) 
[1] => Array ( [id] => 47523 [date] => 12-02-13 13:56:48 ) 
[2] => Array ( [id] => 38639 [date] => 12-02-13 13:38:51 ) 
[3] => Array ( [id] => 38639 [date] => 12-02-13 13:07:43 )
[4] => Array ( [id] => 53241 [date] => 12-02-13 11:02:48 )
) 
```

但我希望输出是最新日期的那种方式

```
Array ( 
[0] => Array ( [id] => 53241 [date] => 03-02-13 11:02:48 )
) 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:52:39.033

```
$test1 = array ( 
    array ( "id" => 47523, "date" => "12-02-13 14:36:32" ), 
    array ( "id" => 47523, "date" => "12-02-13 13:56:48" ), 
    array ( "id" => 38639, "date" => "12-02-13 13:38:51" ), 
    array ( "id" => 38639, "date" => "12-02-13 13:07:43" )
);
$test2 = array ( 
    array ( "id" => 47523, "date" => "12-02-13 14:36:32" ), 
    array ( "id" => 47523, "date" => "12-02-13 13:56:48" ), 
    array ( "id" => 38639, "date" => "12-02-13 13:38:51" ), 
    array ( "id" => 38639, "date" => "12-02-13 13:07:43" ),
    array ( "id" => 53241, "date" => "12-02-13 11:02:48" )
);
foreach($test2 as $array) {
    if (!in_array($array, $test1)) {
        $new[] = $array;
    }
}
print_r($new); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T14:53:12.700

首先合并 2 个数组（在这种情况下从 $test2 到 $tes1 ）：

```
foreach($test2 as $id=>$arr){
  $test1[] = $arr;
} 
```

然后按日期对 $test1 进行排序（将最早的日期放在最后，最新的日期放在最前面）：

```
foreach ($test1 as $key => $row) {
    $orderByDate[$key]  = strtotime($row['date']);
}

array_multisort($orderByDate, SORT_DESC, $dataArray); 
```

然后删除重复项（这将保留最新的日期时间并删除较早的日期时间）

```
$unique = array()
    foreach($test1 as $id => $arr){
      if( in_array($arr->id, $unique ) {
        unset($test1[$id]);
      }
      else {
        array_push($unique, $arr->id);
      }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:48:30.843

尝试使用 array_unique($test1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T14:57:24.310

您可以将`array_intersect_key`with`array_unique`和`array_map`用于单行作业：

在`PHP >5.3.0`：

```
$array = array ( 
    0 => array ( "id" => 47523, "date" => "12-02-13 14:36:32" ), 
    1 => array ( "id" => 47523, "date" => "12-02-13 13:56:48" ), 
    2 => array ( "id" => 38639, "date" => "12-02-13 13:38:51" ), 
    3 => array ( "id" => 38639, "date" => "12-02-13 13:07:43" )
);

$array = array_intersect_key($array, array_unique(array_map(function($n){ return $n['id']; }, $array)));

print_r($array); 
```

`PHP <5.3.0`

```
$array = array ( 
    0 => array ( "id" => 47523, "date" => "12-02-13 14:36:32" ), 
    1 => array ( "id" => 47523, "date" => "12-02-13 13:56:48" ), 
    2 => array ( "id" => 38639, "date" => "12-02-13 13:38:51" ), 
    3 => array ( "id" => 38639, "date" => "12-02-13 13:07:43" )
);

function mapArray($n){
     return $n['id'];
}

$array = array_intersect_key($array, array_unique(array_map("mapArray", $array)));

print_r($array); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T14:57:53.917

您应该编写自己的函数，因为 array_unique 不适用于多维数组。

```
function array_unique_md($array)
{
    $temp = array();
    foreach($array as $key => $value)
    {
        if(!isset($temp[$value['id']])) $temp[$value['id']] = $value['date'];
    }

    $your_structure = array();
    foreach($temp as $key=> $value)
    {
        $your_structure[] = array('id'=>$key,'date'=>$value);
    }

    return $your_structure;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T14:58:08.973

您可以使用`array_reduce`

```
$data = array_reduce($data, function($a,$b){
    isset($a[$b['id']]) or $a[$b['id']] = $b;
    return $a;
});

var_dump(array_values($data)); 
```

[观看现场演示](http://eval.in/9598)

# .net - 如何在 C++/CLI 中从托管字符串中修剪空格

> ID：14835148
> 
> 赞同：0
> 
> 时间：2013-02-12T14:45:51.370
> 
> 标签：.net, c++-cli

我正在努力在托管字符串上调用 Trim() 方法以删除任何前导和尾随空格。

我试过了：

```
System::String^ filename = "   export.csv   ";

filename = System::String::Trim(filename);
filename = filename::Trim();
filename = filename.Trim(); 
```

这给出了我的错误：

`error C2665: 'System::String::Trim' : none of the 2 overloads could convert all the argument types`

或者

`error C2825: 'filename': must be a class or namespace when followed by '::'
error C2039: 'Trim' : is not a member of ''global namespace''
error C2146: syntax error : missing ';' before identifier 'Trim'
error C3861: 'Trim': identifier not found`

或者

`error C2228: left of '.Trim' must have class/struct/union`

您应该如何在 C++/CLI 中修剪托管字符串？为什么我不能使用[System::String::Trim()](http://msdn.microsoft.com/en-us/library/system.string.trim.aspx)方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:54:28.717

就像在 C++ 中所做的一样，使用指针表示法：

```
filename = filename->Trim(); 
```

# xml - xml中带有引号的simple_xml解析器错误，即使使用CDATA

> ID：14835156
> 
> 赞同：0
> 
> 时间：2013-02-12T14:46:10.310
> 
> 标签：xml, simplexml, php

我正在`simplexml_load_string()`从数组（从数据库）读取 XML。

一切都很好，直到 XML 包含引号，simplexml 开始报告 XML 解析错误。

1.  我更改`"`为`&quot;`XML 文件中的 --> 解析器错误。
2.  `"`我在 XML 中转义了`\"`--> parser-error。
3.  我用`'`而不是`"`--> 一切都很好，但我想要`"`！
4.  所以我再次将部分与`""`into `CDATA`--> parser-error 一起包含在内！`

XML 片段：

```
<prepare var="%vorfall%" label="Bezeichnen Sie den Vorfall">
    <![CDATA["Vorfall beim Reiten..."]]>
</prepare> 
```

PHP 片段：

```
$rxml=simplexml_load_string(utf8_encode($test['tsValues'])); 
```

错误 - 使用`&#34;`而不是`"`：

```
Warning: simplexml_load_string(): Entity: line 16: parser error : attributes construct error in /Applications/MAMP/htdocs/_testcenter/testcenter.php on line 97

Warning: simplexml_load_string(): <prepare var=""Unfall beim Reiten, Rocky geht durch"" label="Bezeichnen Sie den in /Applications/MAMP/htdocs/_testcenter/testcenter.php on line 97

Warning: simplexml_load_string(): ^ in /Applications/MAMP/htdocs/_testcenter/testcenter.php on line 97

Warning: simplexml_load_string(): Entity: line 16: parser error : Couldn't find end of Start Tag prepare line 16 in /Applications/MAMP/htdocs/_testcenter/testcenter.php on line 97

Warning: simplexml_load_string(): <prepare var=""Unfall beim Reiten, Rocky geht durch"" label="Bezeichnen Sie den in /Applications/MAMP/htdocs/_testcenter/testcenter.php on line 97

Warning: simplexml_load_string(): ^ in /Applications/MAMP/htdocs/_testcenter/testcenter.php on line 97 
```

更新：再次检查，问题发生在这里 - PHP：

```
$txml=file_get_contents("$path_test/".$test['tbTestFile']);
$rxml=simplexml_load_string($test['tsValues']);

// replacing parts of $txml with content containing the famous "" from $rxml 
foreach ($rxml->xpath('//prepare') as $prep) {
    $txml=str_replace($prep['var'],$prep,$txml);
} 

$txml=simplexml_load_string($txml); // this is line 97 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:39:35.887

`&quot;`，`CDATA`并按`&#34;`预期使用 simplexml。

我的错误：代码替换`%vorfall%`了 xml 文件中的 substr。该子字符串出现在节点的文本中（可以替换）和属性`var="%vorfall%"`中。当属性具有 double `""`:时发生解析错误`var=""some-replaced-content""`。

谢谢大家的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:03:02.320

尝试替换其 XML 等效实体的引号：`&#34;`

```
str_replace('"', '&#34;', $xml); 
```

# android - 电话意向

> ID：14835158
> 
> 赞同：1
> 
> 时间：2013-02-12T14:46:19.697
> 
> 标签：android

我对这个电话意图有疑问。

我的代码：

```
public void onClick(View v) {
    try {
        Intent callIntent = new Intent(Intent.ACTION_CALL);
        callIntent.setData(Uri.parse("tel:+32123456789"));
        startActivity(callIntent);
    } catch (ActivityNotFoundException e) {
         e.printStackTrace();
    }
} 
```

经许可：

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

所以，当我按下触发事件的按钮时，我的手机就可以拨打电话了。现在，当我点击后退按钮时，他会回到我的应用程序并在后台拨打电话。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T07:50:07.300

在文件中使用权限，`manifest.xml`因为某些意图需要权限才能调用。正如您在此[链接](http://www.helloandroid.com/tutorials/how-make-phone-call-your-application)上看到的，第一个文件是 manifest.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:58:52.450

试试这个：

```
 Intent callIntent = new Intent(Intent.ACTION_CALL);
        callIntent.setData(Uri.parse("tel:" + phoneNumber));
        startActivity(callIntent); 
```

编辑：对不起，我没有很好地分析这个问题..它是一样的..

# php - 关联在 Cakephp 中不起作用

> ID：14835159
> 
> 赞同：0
> 
> 时间：2013-02-12T14:46:21.550
> 
> 标签：php, cakephp, cakephp-2.0

我有以下表格

> 文章
> 
> * * *
> 
> **ID** 标题 描述 图片 作者 发布 创建
> 
> 注释
> 
> * * *
> 
> **id** **user_id** **article_id** 文本创建
> 
> 用户
> 
> * * *
> 
> **id**登录名 电子邮件 通行证

我希望**文章**与**评论**相关，**评论**与**用户**相关，但我不能。然而我有以下模型。

**文章**

```
<?php

/**
* Model de artigos
*/
class Article extends AppModel {

    public $name = 'Article';

    public $hasMany = array(
                            'Comment' => array(
                                                'className' => 'Comment',
                                                'dependent' => false,
                                                'fields' => array('Comment.user_id','Comment.created','Comment.text'),
                                                'foreignkey' => 'article_id',

                                                )
                            );

    /**
    * Regras de validação
    *
    * @var array
    */
    public $validate = array();

    /**
    * Lista dos artigos mais recentes
    *
    * @param int $limit Quantidade de artigos
    * @param array $params Parâmetros extras de busca
    *
    * @return array
    */
    public function recent($limit = 5, $params = array()) {
        $params = Hash::merge(array(
        'conditions' => array('Article.published' => true),
        'order' => array('Article.created' => 'DESC'),
        'limit' => $limit
        ), $params);

        return $this->find('all', $params);
    }

} 
```

**评论**

```
<?php

/**
* Model de comentários
*/
class Comment extends AppModel {

    public $name = 'Comment';

    public $belongsTo = array(
                            'User' => array(
                                            'className' => 'User',
                                            'foreignKey'   => 'user_id',
                                            'type'  => 'left'
                                            )
                             );

    /**
    * Regras de validação
    *
    * @var array
    */
    public $validate = array();

    /**
    * Lista dos comentários mais recentes
    *
    * @param int $limit Quantidade de comentários
    * @param array $params Parâmetros extras de busca
    *
    * @return array
    */
    public function recent($limit = 5, $params = array()) {
        $params = Hash::merge(array(
            'conditions' => array('Comment.published' => true),
            'order' => array('Comment.created' => 'DESC'),
            'limit' => $limit
        ), $params);

        return $this->find('all', $params);
    }

} 
```

**用户**

```
/**
* Model de usuários
*/
class User extends AppModel {

    public $name = 'User';

    /**
    * Regras de validação
    *
    * @var array
    */
    public $validate = array();

} 
```

我只能将**文章**与**评论**联系起来，但我不能将**评论**与**用户**联系起来。我需要做什么？感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:55:38.953

您需要添加`$hasMany`到用户模型。

```
/**
* Model de usuários
*/
class User extends AppModel {

    public $name = 'User';
    public $hasMany = array(
        'Comment' => array(
            'className' => 'Comment',
            'dependent' => false,
            'fields' => array('Comment.user_id','Comment.created','Comment.text'),
            'foreignkey' => 'user_id',
        )
    );
    /**
    * Regras de validação
    *
    * @var array
    */
    public $validate = array();

} 
```

# haskell - 在 Yesod 中将 POST 请求分成几部分

> ID：14835163
> 
> 赞同：0
> 
> 时间：2013-02-12T14:46:38.010
> 
> 标签：haskell, post, yesod

我正在努力将 POST 响应（多部分）分开，应该使用什么将发送到 Yesod 服务器的某些文件的内容放入数据库（经过进一步处理后）。我当前的代码：

```
import qualified Data.ByteString.Lazy as LZ
import qualified Data.ByteString.Lazy.Char8 as LC
...
processLines :: String -> [String] -> String
processLines delim (l:rest) = do
    case l of
        delim -> ""
        _     -> l ++ "\n" ++ processLines delim rest

processFile :: [String] -> String
processFile (delim:some:other:line:txt) = processLines delim txt

postImpexR :: SystemsId -> Handler RepPlain
postImpexR sysid = do
    wr <- waiRequest
    bss <- lift $ requestBody wr $$ consume
    let file = LZ.fromChunks bss
    return $ RepPlain $ toContent $ processFile $ map LC.unpack $ LC.lines file 
```

编辑：设法解决了一个问题，似乎我正在了解处理程序。这里的类型有什么问题？有没有比这更优雅的方法来完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:40:11.300

如果您正在寻找 Yesod 内置的多部分支持，则无需求助于手动解析。考虑使用[fileField](http://haddocks.fpcomplete.com/fp/7.4.2/2012-12-11/yesod-form/Yesod-Form-Fields.html#v%3afileField)或[lookupFile](http://haddocks.fpcomplete.com/fp/7.4.2/2012-12-11/yesod-core/Yesod-Request.html#v%3alookupFile)。

# stata - Stata中的文件路径

> ID：14835165
> 
> 赞同：5
> 
> 时间：2013-02-12T14:46:41.060
> 
> 标签：stata

当我启动一个do-file以将do-file的路径恢复为变量时，是否有可能？

我正在与合著者共享一个项目（通过 Dropbox）。因此，两侧的文件夹结构（数据、日志等）是相同的。

但是这些文件夹在我的合著者的文件系统和我的文件系统上是不同的。因此，编写与文件夹路径等无关的 do-file 对我们很有帮助。

我们希望我们的项目路径不被硬编码。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T15:16:54.707

你可以在这个领域做各种各样的事情，包括

*   将目录的名称作为参数传递给 do-file。例如，

    ```
    do mydo d:/myproject/data1812 
    ```

    启动文件`mydo.do`并将特定目录的参数传递给do-file。在 do-file 中，您可以将参数作为

    ```
    local myfolder "`1'" 
    ```

    即传递的东西作为本地宏1传递。（任何其他参数都是本地宏2、3等）

*   确保您对位置的引用，特别是文件在 do-file 中是相对的，并从父目录运行 do-file。

*   在您的主 do 文件中使用全局宏作为位置，然后在您首先运行的主 do 文件中重新定义它们。

注意：最好使用正斜杠，即使在 Windows 下也是如此；Stata 会翻译。此外，如果有嵌入的空格，请将整个内容用双引号括起来。

```
 do mydo "d:/my project/data1812" 
```

第二个似乎最接近您在特定位置不布线的偏好。但是如果你使用来自不同地方的文件，你必须以某种方式告诉 Stata 它们在哪里......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T00:41:03.030

尼克上面的评论给出了答案：`c(pwd)`。这为您以后的命令提供了一个相对的起点，例如在`data`文件夹中打开一个数据集：

```
use `c(pwd)'/data/yourdata, clear 
```

您的问题可能是双击 do-file 不会导致 Stata 将工作目录设置为其文件夹（而它对数据集设置，这不一致且不一定有用）。

`profile.do`该问题没有特定的解决方案，除非可能通过在启动时通过您的 Stata 应用程序文件夹中的文件将您的项目文件夹路径写入全局宏集。

我教学生班级，并让他们使用这样的系统设置他们的工作目录。它工作正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-04T18:07:45.030

[Stata中的文件路径](https://stackoverflow.com/q/14835165/8524164)

几年过去了，但答案还是一样：没有直接的方法可以确定当前 do-file 的位置。围绕这个话题的讨论已经在Statalist上多次提出。你可以在这里找到很多有用的提示（只是一个简短的概述，更多关于 Statalist 的讨论）：

*   [https://www.stata.com/statalist/archive/2007-09/msg00156.html](https://www.stata.com/statalist/archive/2007-09/msg00156.html)
*   [https://www.stata.com/statalist/archive/2013-07/msg00664.html](https://www.stata.com/statalist/archive/2013-07/msg00664.html)
*   [https://www.statalist.org/forums/forum/general-stata-discussion/general/1378783-do-i-have-to-specify-a-directory](https://www.statalist.org/forums/forum/general-stata-discussion/general/1378783-do-i-have-to-specify-a-directory)

除了那些和尼克考克斯和神父。答案，我为 Stata 中的协作工作提出了我的简陋解决方案（在 Windows 和 Linux 上的不同机器上工作）。它不需要额外的模块，仅取决于您在文件夹中组织材料的方式。

**提示 1**。cd 到您的工作目录并带有提示 -cap- 并将 -cd- 代码保留在 do-file 的开头：

```
cap cd "W:\Bonds\"                                                  //Collaborator 1
cap cd "C:\Users\StataUser\Desktop\ProjectForBonds\"                //Collaborator 2
cap cd "/media/DATA/work_materials/Dropbox/MyProjects/Bonds/"       //Collaborator 3: Linux machine
cap cd "D:/work_materials/Dropbox/MyProjects/Bonds/"                //Collaborator 3: PC
cap cd "E:/Projects/Dropbox/MyProjects/Bonds/"                      //Collaborator 3: Laptop 
```

`-cap-`如果目录不存在，则避免可能的错误，因此每个用户都将进入他自己的项目工作目录。在 -cd-ing 到该目录之后，您可以将路径保存为全局变量并在代码中进一步使用它（如果有必要）：

```
global cdpath = "`c(pwd)'"
di "$cdpath"                                    //show current folder
di `"{browse `"$cdpath"':Current folder}"'      //optional: click to open the folder in the explorer 
```

*提示*：正如尼克考克斯所说，使用“/”而不是“\”。当您将“\”与全局/局部变量结合使用时，Stata 会将其视为与转义符号的组合（以便能够在字符串中使用 ` 和 $ 等符号），因此使用“\”可能会破坏您的浏览策略。通过此代码检查它：

```
global cdpath = "`c(pwd)'"
di "$cdpath"
local i = 1
cap noi use "$cdpath\`i'\auto", clear
cap noi use "$cdpath/`i'/auto", clear 
```

**提示 2**。通过在 Stata 中创建目录来保持相同的文件夹结构：

```
cap mkdir "./Temp"
cap mkdir "./Graphs" 
```

where`"."`表示当前工作目录。因此，您在工作目录中创建“Temp”和“Graphs”文件夹。在那里您可以存储临时数据集、放置图表等。如果目录存在，您无需担心：`-cap-`缓解此问题。

**提示 3**。在保存/打开/删除文件（数据、图表、日志等）时，明确告诉 Stata 使用相对路径：

```
use "./SourceData", clear 
graph export "./Graphs/RollingBond.png", as(png) replace
save "./Temp/Years.dta", replace
save "./FinalBond.dta", replace
cap erase "./Temp/Years.dta" 
```

Stata 会知道您仍在根文件夹中，并且相对于该文件夹工作。当然，您可以像这样编写完整路径：

```
save "$cdpath/Temp/FinalBond.dta", replace 
```

这些技巧适用于 Windows 和 Unix，并且只需要为新用户编写`-cap cd "..."-`. 当您或您的合作者使用拇指驱动器工作并且无法访问计算机上的任何其他位置时非常有用。

# indexing - RavenDb 静态索引：对子集合对象的查询

> ID：14835172
> 
> 赞同：6
> 
> 时间：2013-02-12T14:47:01.647
> 
> 标签：indexing, ravendb

我的文档结构如下：

`Employer => Positions => RequiredSkills`

雇主有一个职位集合
职位有一个RequiredSkill 集合。
所需技能由技能（字符串）和熟练程度（枚举）组成。

如果我使用动态索引，它似乎可以很好地返回公司，但是我想使用索引来填充 MVC 视图模型以返回 UI。

我对 Raven 真的很陌生，所以我很抱歉做了任何愚蠢/不必要的事情！

我有以下映射：

```
public class PositionSearch : AbstractIndexCreationTask<Employer>
    {
        public PositionSearch()
        {
            Map = employers =>
                  from employer in employers
                  from position in employer.Positions
                  select new
                      {
                          EmployerId = employer.Id,
                          EmployerName = employer.Name,
                          PositionId = position.Id,
                          PositionTitle = position.Title,
                          position.Location,
                          position.Description,
                          RequiredSkills = position.RequiredSkills
                      };

            StoreAllFields(FieldStorage.Yes);

            Index("RequiredSkills_Skill", FieldIndexing.Analyzed);
        }
    } 
```

但是，当我尝试执行以下查询时：

```
var results = session.Query<PositionSearchResultModel, PositionSearch>()
    .Customize(x => x.WaitForNonStaleResults())
    .Where(x=>x.RequiredSkills.Any(y=>y.Skill == "SkillName"))
    .ProjectFromIndexFieldsInto<PositionSearchResultModel>()
    .ToList(); 
```

我收到以下错误：

```
System.ArgumentException:
    The field 'RequiredSkills_Skill' is not indexed,
    cannot query on fields that are not indexed 
```

谁能看到我做错了什么或为我建议另一种方法？

谢谢，

詹姆士

**更新我的视图模型 - 谢谢：**

```
public class PositionSearchResultModel
{
    public PositionSearchResultModel()
    {
        RequiredSkills = new HashSet<SkillProficiency>();
    }

    public string EmployerId { get; set; }
    public string EmployerName { get; set; }
    public string PositionId { get; set; }
    public string PositionTitle { get; set; }
    public string Location { get; set; }
    public string Description { get; set; }
    public ICollection<SkillProficiency> RequiredSkills { get; set; }
 } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T16:15:51.090

因为您要针对技能名称进行分析搜索，所以需要将其隔离为单独的索引条目。

```
public class PositionSearch
    : AbstractIndexCreationTask<Employer, PositionSearchResultModel>
{
    public PositionSearch()
    {
        Map = employers =>
                from employer in employers
                from position in employer.Positions
                select new
                {
                    EmployerId = employer.Id,
                    EmployerName = employer.Name,
                    PositionId = position.Id,
                    PositionTitle = position.Title,
                    position.Location,
                    position.Description,
                    position.RequiredSkills,

                    // Isolate the search property into it's own value
                    SkillsSearch = position.RequiredSkills.Select(x => x.Skill)
                };

        // you could store all fields if you wanted, but the search field
        // doesn't need to be stored so that would be wasteful.
        Store(x => x.PositionId, FieldStorage.Yes);
        Store(x => x.PositionTitle, FieldStorage.Yes);
        Store(x => x.Location, FieldStorage.Yes);
        Store(x => x.Description, FieldStorage.Yes);
        Store(x => x.RequiredSkills, FieldStorage.Yes);

        // Any field you are going to use .Search() on should be analyzed.
        Index(x => x.SkillsSearch, FieldIndexing.Analyzed);
    }
} 
```

请注意，我将投影指定为索引的结果。这是语法糖。将其关闭并没有错，但是您必须使用字符串指定搜索字段。

您还需要将搜索字段添加到结果类

```
public string[] SkillsSearch { get; set; } 
```

它是什么类型真的无关紧要。字符串数组或集合就可以了。您也可以只使用字符串或对象，因为它只是相关的名称。

当您查询此索引时，请使用该`.Search()`方法，如下所示：

```
var results = session.Query<PositionSearchResultModel, PositionSearch>()
    .Customize(x => x.WaitForNonStaleResults())  // only use this in testing
    .Search(x=> x.SkillsSearch, "SkillName")
    .ProjectFromIndexFieldsInto<PositionSearchResultModel>()  // AsProjection would also work
    .ToList(); 
```

请注意，您必须存储这么多字段的唯一原因是您想要投影它们。如果您将这些职位分成他们自己的文档，您将拥有更小的索引和更少的项目。请记住，当您进行投影时，原始文档中的所有字段都已经存在并且直接来自文档存储，而不必复制到索引中。因此，如果您的原始文档更接近您想要的结果，那么要做的工作就更少了。

# c++ - 从 QWidget 中的 QTextEdit 获取文本

> ID：14835174
> 
> 赞同：1
> 
> 时间：2013-02-12T14:47:03.247
> 
> 标签：c++, qt, qt4

我有一个`QTabWidget`“tw”，我在其中添加了这样的标签：

```
QWidget *newTab = new QWidget(tw);
tw->addTab(newTab, "Tab name");
QTextEdit *te = new QTextEdit();
te->setText("Hello world");
QVBoxLayout *vbox = new QVBoxLayout();
vbox->addWidget(te);
newTab->setLayout(vbox); 
```

如何`QTextEdit`从前景中的选项卡中获取文本（例如，当我单击按钮时，我想将文本从可见选项卡复制到剪贴板或类似的 smtg）。我不知道如何获得`QTextEdit`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:19:19.017

您需要手动跟踪您的文本编辑。通过将指向它们的指针存储在父小部件中，或者您可以使用查找表，例如[QHash](http://doc.qt.digia.com/qt/qhash.html#details)：

假设您有一个`MyClass`包含您在问题中发布的代码的类：

像这样添加一个成员变量：

```
class QTextEdit; // this is a so-called "Forward Declaration" which saves you an
                 // #include. Google it if you want to know more ;-)
class MyClass
{
    // ...
private:

    QHash< int, QTextEdit* > _textEditPerTabPage;
}; 
```

此变量可以存储（和查找）标签页索引 (0, 1, 2, ...) 中的文本编辑。

你可以做一个这样的添加功能：

```
void MyClass::addTab( QTabWidget* tabWidget, const QString& tabName, const QString& text )
{
    // Create the text edit
    QTextEdit* textEdit = new QTextEdit();
    textEdit->setText( text );

    // Create a layout which contains the text edit
    QVBoxLayout* layout = new QVBoxLayout();
    layout->addWidget( textEdit );

    // Create a parent widget for the layout
    QWidget* newTab = new QWidget( tabWidget );
    newTab->setLayout( layout );

    // Add that widget as a new tab
    int tabIndex = tabWidget->addTab( newTab, tabName );

    // Remember the text edit for the widget
    _textEditPerTabPage.insert( tabIndex, textEdit );
} 
```

然后检索这样的指针`QTextEdit`：

```
QTextEdit* textEdit = _textEditPerTabPage.value( tabWidget->currentIndex() ); 
```

这段代码有一些限制，例如，您必须始终确保使用自己的`MyClass::addTab`函数并且不要访问`QTabWidget::addTab`该函数之外的内容。此外，如果您调用`QTabWidget::removeTab`，您`QHash`可能不再指向正确的 QTextEdits。

# drupal-7 - 使用视图的 Drupal 7 分类块

> ID：14835176
> 
> 赞同：1
> 
> 时间：2013-02-12T14:47:06.530
> 
> 标签：drupal-7, drupal-views, drupal-taxonomy

我有不同的节点应用分类术语。

我想显示两个单独的块：

1.  第一个块应该列出所有的分类术语（HTML 列表就可以了）并且每个都应该是可点击的。

2.  第二个块应列出在第一个块上单击了分类术语的所有节点。

我将如何实现这一目标？我正在使用 Drupal 7 和 Views 模块。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:01:24.777

为此，您需要 2 个阻止视图。但是只创建 1 个视图，第二个视图已经存在于您的默认 drupal 视图中。请按照以下步骤操作：

1.  创建视图。
2.  从下拉列表中为“显示”选择“分类术语”。
3.  为“类型”选择相关的分类词汇。
4.  单击创建块。
5.  点击“保存并退出”。

这将使用分类术语创建您的第一个视图块。

现在是第二个块，它应该显示与分类术语相关的所有节点。你只需要启用一个“分类术语”视图。在你的drupal视图列表中找到单词，你会发现这个视图处于禁用模式。你需要启用它。现在只需覆盖视图，因为您希望查看该节点页面以显示与分类术语相关的所有内容。像我们一样根据正常视图创建选择字段和过滤器。为第二个块创建一个页面并根据需要提供路径。

现在使用上下文模块（如果您现在没有，请下载）在您为视图提供的路径上显示分类术语块。

（希望你会知道如何使用上下文，如果不只是发表评论，我会指导你）

# java - 如何在 android 中获取 EditText 提示的本地化日期格式

> ID：14835179
> 
> 赞同：2
> 
> 时间：2013-02-12T14:47:23.657
> 
> 标签：java, android, localization, date-format

如何在 android 中获取 EditText 提示的本地化日期格式？

```
yyyy-mm-dd(EN)
aaaa-mm-dd(SP)
aaaa-mm-jj(FR) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:03:59.170

您可以使用[`DateFormat.getDateFormat(Context)`](http://developer.android.com/reference/android/text/format/DateFormat.html#getDateFormat(android.content.Context))，它执行以下操作：

> 返回一个`DateFormat`对象，该对象可以根据当前语言环境和用户的日期顺序首选项以短格式（例如 12/31/1999）格式化日期。
> 
>   --[`DateFormat`文档](http://developer.android.com/reference/android/text/format/DateFormat.html)

然后，将类型的对象传递给它`Activity`or `Context`：

```
java.text.DateFormat formatter = android.text.format.DateFormat.getDateFormat(context); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:54:49.957

来自[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

```
SimpleDateFormat(String, Locale) 
```

> 使用指定的非本地化模式以及指定区域设置的 DateFormatSymbols 和 Calendar 构造一个新的 SimpleDateFormat。

所以模式不应该改变

[日期格式符号](http://developer.android.com/reference/java/text/DateFormatSymbols.html)

> 封装本地化的日期时间格式数据，例如月份的名称、星期几的名称和时区数据。DateFormat 和 SimpleDateFormat 都使用 DateFormatSymbols 来封装这些信息。

唯一应该改变的是月份名称、tzdata 或星期名称（如果您使用过的话）。

获取本地化模式字符串使用

```
toLocalizedPattern() 
```

[http://developer.android.com/reference/java/text/SimpleDateFormat.html#toLocalizedPattern%28%29](http://developer.android.com/reference/java/text/SimpleDateFormat.html#toLocalizedPattern%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:42:05.540

`SimpleDateFormat.applyLocalizedPattern(String template)`打电话前先试一下`SimpleDateFormat.toLocalizedPattern()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-07T21:40:13.933

你可以这样做：

```
DateFormat dateFormat = android.text.format.DateFormat.getDateFormat(mContext);

String pattern = ((SimpleDateFormat) dateFormat).toLocalizedPattern();

editText.setHint(pattern); 
```

# android - worklight 在 android 上的性能不佳

> ID：14835184
> 
> 赞同：1
> 
> 时间：2013-02-12T14:47:50.207
> 
> 标签：android, ibm-mobilefirst

我目前正在测试 worklight，我注意到与 iOs 设备相比，android 设备的性能损失很大。（在华硕 nexus 7 与 iphone 4 上测试）

第一点是：一个简单的 html 页面在一个简单的 jquery 移动页面转换期间出现抖动。没有服务器调用。

我删除了 jQuery 移动转换，因为它使用了很多 javascript 而不是 css3 转换功能，但它仍然继续从一个页面倾斜到另一个页面。我的意思是在 2 页之间有 1/10 秒的“空白屏幕”并且下一页的呈现滞后。

为了分析这个问题，我删除了 worklight 层并将我的简单 html/jquery 移动页面托管在 apache Web 服务器上，并从我设备的 chrome 浏览器中调用它。即使有过渡，它也能完美流畅地工作。

之后，我在移动浏览器模拟器中分析了worklight生成的代码，看起来里面有很多wlclient javascript文件，从我的角度来看，这不是实现网页的好方法，更何况是移动的.

有没有办法将所有这些文件编译成一个以避免对服务器的多个 http 请求？

如果我们只需要一小部分，有没有办法避免加载所有客户端 api？我的意思是，如果我不需要加密缓存，为什么要加载相关的js？

有没有办法强制浏览器引擎在应用程序内部使用（chrome、opera、android native...）以测试每个引擎的性能？

Worklight 5.0.5.20121217-0622 Android 21.0.0.v201210310015-519525 Win 7 64 位 Eclipse 3.7.2

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:35:55.590

> 删除了 jQuery 移动过渡，因为它使用大量 javascript 而不是 css3 过渡功能，但它仍然继续从一个页面倾斜到另一个页面。

您可以选择不使用 jQuery Mobile 并自行实现动画或使用其他 UI 框架。您还可以尝试为 jQuery Mobile[创建基于 CSS 的自定义过渡](http://jquerymobile.com/test/docs/pages/page-customtransitions.html)。

> 我删除了 worklight 层并将我的简单 html/jquery 移动页面托管在 apache Web 服务器上，并从我设备的 chrome 浏览器中调用它

Worklight 的文件不托管在任何服务器上，它们是您安装在设备上的 .apk 的一部分。Web 视图中的性能与其他浏览器（例如 Google Chrome）中的性能不同。您可以尝试通过查看[其他人在做](https://www.google.com/search?q=web+view+android+performance&aq=f&oq=web+view+android+performance&aqs=chrome.0.57j0j62l3j64.3533&sourceid=chrome&ie=UTF-8)什么来改进它。

> 有没有办法将所有这些文件编译成一个以避免对服务器的多个 http 请求？

作为“全部构建并部署”步骤的一部分，没有办法做到这一点。您可以编辑为每个环境生成的本机文件夹的内容，并手动将内容放入单个文件中。但是，我不推荐这种方法，因为当您“全部构建并部署”时，这些更改将被覆盖。如果您想使用 Ant 最小化您的资源，请阅读[本文，但我怀疑它会显着提高性能。](http://www-01.ibm.com/support/docview.wss?uid=swg1PM80509)

> 如果我们只需要一小部分，有没有办法避免加载所有客户端 api？我的意思是，如果我不需要加密缓存，为什么要加载相关的js？

不，如果您阅读了我对上述问题的回复，您可以手动完成。

> 有没有办法强制浏览器引擎在应用程序内部使用（chrome、opera、android native...）以测试每个引擎的性能？

不，您的 Worklight 使用 Apache Cordova 并使用 Android API 提供的 Web 视图。

# mysql - SQL：从多条记录中获取满足条件的记录

> ID：14835190
> 
> 赞同：1
> 
> 时间：2013-02-12T14:48:04.607
> 
> 标签：mysql, sql

让我们看一个简单的表格，如果客户购买了某种产品，则该表格将客户 ID 链接到产品 ID。我正在寻找列出购买特定产品的所有客户的 SQL (MySQL)。

```
客户 ID 产品 ID
    1 A // 客户 1 购买了产品 A
    2个
    1乙
    3个
    2℃
    3乙

```

我想获取同时购买**了**A 和 B 的客户（客户 1 和 3）以及购买了 A 但不购买 B 的客户（客户 2）的列表。我需要为超过 2 种产品执行此操作，最多 10 种，例如“A 和 C 和 D，但不是 B 和 E 和 F”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T14:49:51.483

提问：`get a list of customers who bought both A and B`

```
SELECT  CustomerID
FROM    CustomerList
WHERE   ProductID IN ('A', 'B')
GROUP   BY CustomerID
HAVING  COUNT(*) = 2 
```

如果没有对`ProductID`每个强制执行唯一性`CustomerID`，`DISTINCT`则需要关键字，

```
SELECT  CustomerID
FROM    CustomerList
WHERE   ProductID IN ('A', 'B')
GROUP   BY CustomerID
HAVING  COUNT(DISTINCT ProductID ) = 2 
```

*   [SQLFiddle 演示（*两个查询*）](http://www.sqlfiddle.com/#!2/2bb59f/2)

对于第二个问题，*“..A and C and D but not B and E and F”*

```
SELECT  CustomerID
FROM    CustomerList
WHERE   ProductID IN ('A', 'C', 'D')
GROUP   BY CustomerID
HAVING  COUNT(*) = 3 AND
        CustomerID NOT IN
        (
            SELECT  CustomerID
            FROM    CustomerList
            WHERE   ProductID IN ('B','E','F')
        ) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/2bb59f/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:48:58.320

试试这个：：

```
Select DISTINCT CUSTOMERID from table1 where PRODUCTID='A' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:52:33.177

JW 的回答很完美，我只想补充一点。我在问题中使用了一个简化示例，在原始情况下，过滤发生在几个连接表上。以这个简单的例子为例，它基本上意味着 ProductID 可以为 NULL。查询有效，但运行 2 分钟。似乎原因是[MySQL 查询优化错误](http://explainextended.com/2010/05/27/left-join-is-null-vs-not-in-vs-not-exists-nullable-columns/)。将子查询条件更改为

```
 WHERE ProductID IS NOT NULL and ProductID IN('B','E','F') 
```

将查询时间减少到两秒。

# c - C中的整数类型

> ID：14835191
> 
> 赞同：4
> 
> 时间：2013-02-12T14:48:07.077
> 
> 标签：c, int, c99, c11

假设我希望编写一个 C 程序（C99 或 C2011），我希望它是完全可移植的，并且不依赖于特定的体系结构。

看来我想彻底摆脱旧的整数类型 ( `int`, `long`, `short`) 和朋友，*只* `int8_t`使用,`uint8_t`等`int32_t`（也许也使用`least`and`fast`版本）。

那么返回类型是`main`什么？还是我们*必须*打击`int`？是标准要求的`int`吗？

GCC-4.2 允许我写

```
#include <stdint.h>
#include <stdio.h>
int32_t main() {
    printf("Hello\n");
    return 0;
} 
```

但我不能使用`uint32_t`，甚至`int8_t`因为那时我得到了

```
hello.c:3: warning: return type of ‘main’ is not ‘int’ 
```

毫无疑问，这是因为 typedef。似乎这是我们不得不使用未指定大小类型的一种情况，因为它不是真正可移植的，除非我们将返回类型留给目标架构。这种解释正确吗？在代码库中有“只有一个”普通的旧代码似乎很奇怪，`int`但我很高兴能够务实。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T15:24:49.480

> 假设我希望编写一个 C 程序（C99 或 C2011），**我希望它是完全可移植**的，并且不依赖于特定的体系结构。
> 
> 看来**我想彻底摆脱旧的整数类型（int、long、short）和朋友，只使用 int8_t、uint8_t、int32_t 等**（也许也使用最少和最快的版本）。

这两个用粗体表示的肯定是矛盾的。这是因为`uint32_t`,`uint8_t`和 al 是否可用实际上是实现定义的（C11, 7.20.1.1/3: *Exact-width integer types*）。

如果您希望您的程序真正可移植，则必须使用内置类型（`int`、`long`等）并坚持 C 标准中定义的最小范围（即：C11、5.2.4.2.1：*整数类型的大小*),

例如，标准规定两者`short`和的`int`范围*至少*应为-32767 到*至少*32767。因此，如果您想存储更大或更小的值，例如 42000，则可以使用 a`long`代替。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T14:49:06.857

的返回类型`main`标准要求`int`C89、C99 和 C11。

现在精确宽度整数类型是整数类型的别名。因此，如果您使用正确的别名`int`它仍然有效。

例如：

```
int32_t main(void) 
```

if`int32_t`是一个 typedef 到`int`.

# bash - 如何获取在 bash 中执行的脚本名称？

> ID：14835193
> 
> 赞同：7
> 
> 时间：2013-02-12T14:48:17.697
> 
> 标签：bash, shell, .bash-profile

所以我正在尝试制作一个可移植的 bashrc/bash_profile 文件。我有一个脚本，我象征性地链接到 .bashrc、.bash_profile 等。然后我正在查看`$0`并根据调用的脚本切换我所做的事情。问题是 shell 调用 bashrc 脚本当然它确实执行 bash 这`$0`对我来说是`-bash`. `$1`此外，未设置脚本名称。

所以我的问题是，在 bash 中如何获取正在执行的脚本的名称。不是执行它的二进制文件，例如 bash？

我认为它给了我`-bash`没有`$1`被设置，因为它真的不是一个新的过程。有任何想法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-12T14:52:25.883

尝试：

`readlink -f ${BASH_SOURCE[0]}`

要不就：

`${BASH_SOURCE[0]}`.

*备注*：

`$0`仅在用户执行“./script.sh”时有效

`$BASH_ARGV`仅在用户执行“.script.sh”或“source script.sh”时有效

`${BASH_SOURCE[0]}`适用于两种情况。

`readlink -f`在使用符号链接时很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:53:42.280

该变量`BASH_ARGV`应该可以工作，似乎[**正在获取脚本**](https://stackoverflow.com/q/3664225/determining-whether-shell-script-was)

```
$BASH_ARGV 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-02T05:08:09.240

创建 .sh 文件让我们说 view.sh 然后放

```
#!/bin/bash
echo "The script is being executed..."
readlink -f ${BASH_SOURCE[0]} 
```

# ios - 如何制作一个 iOS 应用程序，在后台以一定的间隔执行功能？

> ID：14835201
> 
> 赞同：0
> 
> 时间：2013-02-12T14:48:32.577
> 
> 标签：ios, xcode, timer

我想让我的 iOS 应用程序每 5 分钟执行一次特定功能。怎么做？一个函数很简单，比如

```
batter = 95; // will be calculated.. every time is differ
[UIApplication sharedApplication].applicationIconBadgeNumber = batter; 
```

我需要在后台为它制作计时器

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T14:53:46.103

除非您的应用属于以下类别之一，否则您无法在后台执行此操作：VOIP、音频播放或位置更新。如果您放置计时器，当应用程序进入后台时，它们将变为无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:56:54.567

在我的**.h 文件中有一个像这样声明的计时器：**

```
NSTimer *MyTimer;
@property (nonatomic, retain) NSTimer *MyTimer; 
```

然后在**.m 文件上，**我这样声明：

```
UIBackgroundTaskIdentifier BackGroundTask;
UIApplication  *app = [UIApplication sharedApplication];
BackGroundTask = [app beginBackgroundTaskWithExpirationHandler:^{
    [app endBackgroundTask:BackGroundTask]; 
}];
self.MyTimer = [NSTimer scheduledTimerWithTimeInterval:5 target:self
selector:@selector(TimerMethod) userInfo:nil repeats:YES]; 
```

**以下是每 5 秒调用一次的计时器方法：**

```
 -(void)TimerMethod 
   {
        batter = 95; // will be calculated.. every time is differ
    [UIApplication sharedApplication].applicationIconBadgeNumber = batter;

    } 
```

# eclipse - Eclipse 插件（重新安装？）

> ID：14835202
> 
> 赞同：0
> 
> 时间：2013-02-12T14:48:42.067
> 
> 标签：eclipse, eclipse-plugin, eclipse-juno, eclipse-3.6, helios

我在 Eclipse Helios 3.6 上工作了很长时间，并且从 Eclipse 网页安装了很多插件。现在，我想切换到 Eclipse 版本 Juno 4.2

我的问题：我可以使用 Helios 中的旧插件还是必须重新安装插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:56:48.863

我不太确定，但 Eclipse 应该是向后兼容的。只需添加 Eclipse 4.2 的更新站点，运行升级，插件应该可以继续工作。有时功能（可能由插件使用）被标记为已弃用，但我认为它们并未从 Eclipse 中删除。

除此之外：您可以进行备份（或简单副本）并尝试确定。

# google-apps-script - 使用“sheet.appendRow([ file.getUrl()]”是有效的，但我如何让它显示一个漂亮的名字？

> ID：14835205
> 
> 赞同：0
> 
> 时间：2013-02-12T14:48:48.893
> 
> 标签：google-apps-script, google-sheets

标题说明了一切。好吧，至少我希望它确实......提前感谢您的帮助。' 函数 onOpen() { var folder = DocsList.getFolder("我的文件夹"); var 内容 = 文件夹.getFiles(); 变量文件；变量数据；

```
 var sheet = SpreadsheetApp.getActiveSheet();
      sheet.clearContents();

      sheet.appendRow(["Link", "Name", "Type", "ID"]);
      for (var i = 0; i < contents.length; i++) {
        file = contents[i];
        var value1,value2,value3;
        if (file.getFileType()==DocsList.FileType.SPREADSHEET) {
          var otherSheet = SpreadsheetApp.open(file).getSheetByName("Sheet1");
          value1 = otherSheet.getRange('B2').getValue();
          value2 = otherSheet.getRange('B7').getValue();
          value3 = otherSheet.getRange('B3').getValue();

        } else {
          value1 = null; value2 = null; value3 = null; value4 = null;
        }
        sheet.appendRow([ file.getUrl(),value1,value2,value3,value4]);
      }
    };' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:19:52.287

我假设您想将 URL 显示为超链接。如果是这种情况，您可以使用范围 setFormula() 方法。

下面是一些获取文件 URL 并使用 HYPERLINK 函数构建电子表格公式的示例代码：

```
function addURL() {
  var url = DocsList.getAllFiles()[0].getUrl(),
      cell = SpreadsheetApp.getActiveSheet().getActiveCell(),
      hyperlinkName = 'Whatever!',
      formula = '=HYPERLINK("' + url +'", "' + hyperlinkName + '")';  
  cell.setFormula(formula);
} 
```

它会要求您授权运行该功能，但它可以工作。

尝试这个：

```
function addHyperlink() {
  var ss = SpreadsheetApp.getActiveSpreadsheet(),
      sh = SpreadsheetApp.getActiveSheet(),
      url = DocsList.getAllFiles()[0].getUrl(),
      hyperlinkName = 'Whatever!',
      formula = '=HYPERLINK("' + url +'", "' + hyperlinkName + '")';
  sh.appendRow([formula]);
} 
```

# kendo-ui - 将标题添加到 Kendo UI 网格工具栏

> ID：14835209
> 
> 赞同：3
> 
> 时间：2013-02-12T14:48:52.473
> 
> 标签：kendo-ui

我正在寻找向 Kendo UI 网格工具栏添加标题并将其左对齐。有什么方法可以在这个区域添加 h2 或 h3 吗？

我也可以只为这个工具栏设置样式，我可以访问 style 属性吗？（我想在顶部和底部（分页所在的位置）放置较深的颜色/渐变）

```
toolbar   : [
        {"name": "create", template: "<img class='k-grid-add' src='add.png'/>"},
        {"name": "save", template: "<img class='k-grid-save-changes' src='save.png'/>"},
        {"name": "cancel", template: "<img class='k-grid-cancel-changes' src='cancel.png'/>"}
    ], 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T23:57:10.950

标识 Kendo Grid 工具栏的类是`k-grid-toolbar`. 因此，对于它的样式，您可以使用：

```
#grid .k-grid-toolbar { 
    background: red;
} 
```

要向工具栏添加一些内容，您可以使用：

```
$(".k-grid-toolbar", "#grid").prepend("<h1>hello</h1>"); 
```

或者

```
$(".k-grid-toolbar", "#grid").before("<h1>hello</h1>");
$(".k-grid-toolbar", "#grid").after("<h1>hello</h1>"); 
```

取决于您是否要在其*之前*或*之后*`div`添加包含按钮的 HTML 。

 **并且`grid`是包含`id`的。`div``grid`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-15T17:17:57.313

用 Kendo-MVC 的说法，解决方案非常简单：

```
@(Html.Kendo().Grid<MyGridsViewModel>()
    .Name("MyGridsName")
    .ToolBar(toolbar => toolbar.Template("<h4>My Grid's Title</h4>"))
    .DataSource(datasource => ... 
```

在您开始发疯并尝试将创建/自定义按钮构建器与工具栏 lambda 一起使用之前，这可以正常工作。

在这种情况下，按钮永远不会被渲染。解决方案是使用此线程中确定的其他方法之一： [http ://www.telerik.com/forums/custom-command-button-in-toolbars](http://www.telerik.com/forums/custom-command-button-in-toolbars)**

# mysql - 从数据库中的笛卡尔坐标中选择极坐标

> ID：14835214
> 
> 赞同：0
> 
> 时间：2013-02-12T14:49:06.670
> 
> 标签：mysql, coordinates, coordinate-systems

在我的 MySQL 数据库中，我有三个字段，`x,y,z`代表一个位置。

我想将这些坐标转换为极坐标`az,el,r`，并根据这些选择（例如）`az`在某个区域内的行。

我将如何在 MySQL 中执行此操作？

**编辑：**
这*不是*关于如何实际*进行*坐标转换的问题，而是，如果 MySQL 能够基于某种方法转换数据，然后在转换后使用基于转换后比较的标准来选择数据数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:01:24.490

解决三角...

笛卡尔=沿多远和向上多远极坐标=多远和角度

为了转换，您需要解决两个已知边的直角三角形

你需要使用毕达哥拉斯定理来找到长边（斜边）

你需要切线函数来找到角度

`r = √ ( x2 + y2 )`= 毕达哥拉斯 `θ = tan-1 ( y / x )`= 正切函数

假设没有负值 - 那么你将不得不取 tan 函数的倒数，或者将它们转换为它们的正对应物

Mysql毕达哥拉斯

```
SQRT((POWER(242-'EAST',2)) + (POWER(463-'NORT',2))) < 50 
```

假设你的坐标看起来像这样......这是一个例子

[http://www.tek-tips.com/viewthread.cfm?qid=1397712](http://www.tek-tips.com/viewthread.cfm?qid=1397712)

这里的正切函数

[http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_tan](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_tan)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:09:48.583

恕我直言，这实际上是一个球坐标系数学问题，而不是特定于 MySQL 的问题。
MySQL 恰好是这个实例中的数据容器。

对于任何解决方案，您都需要先进行数学运算，然后将方程应用于数据。
我可以帮助使用 MySQL，但我必须用谷歌解决这些方程，而且我的手指很累 =)

# c# - 一个dataGridView中的两个实体

> ID：14835217
> 
> 赞同：0
> 
> 时间：2013-02-12T14:49:13.023
> 
> 标签：c#, winforms, entity-framework, datagridview

我有两个关联实体。我通过从对象数据源拖放并从列表手动绑定来创建 dataGridView。一个实体一切正常。是否有可能通过拖放+手动填充创建一个具有两个实体（Zamow 和 ZamSkany）的 dataGridView？我可以通过视图（在 SQL 端）来做到这一点，但在同样的情况下，我希望有其他的可能性。

```
 pg = new PGEntities();
 BindingList<Zamow> myList;
 var query = (from zam in pg.Zamow where zam.Rok == 2012 select zam).Take(100);
 MyList = new BindingList<Zamow>(query.ToList());
 zamowBindingSource.DataSource = MyList; 
```

![在此处输入图像描述](../Images/5e6c1d77476c3d6d924b50c9ce7bcdae.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:24:03.410

是的，尝试创建`Class`，让我们说一个`ViewZamowAndSamSkany`

```
public class ViewZamowAndSamSkany
{
    public string Data { get; set; }
    public string Proforma { get; set; }
    //and Others Properties
} 
```

现在，重建您的项目，然后将拖放`Objects Data Source`添加到您的as a 中，您可以应用 linq-entites`ViewZamowAndSamSkany``Form``DataGridView``inner join`

```
var query = (from zam in pg.Zamow 
             join skany in zam.NUMBER equals skany.NUMBER
             where zam.Rok == 2012 
             select new ViewZamowAndSamSkany
             {
                 Data = zam.Data,
                 Proforma = zam.Proforma
             }).Take(100);

MyList = new BindingList<ViewZamowAndSamSkany>(query.ToList());
zamowBindingSource.DataSource = MyList; 
```

# r - 查看示例数据

> ID：14835225
> 
> 赞同：1
> 
> 时间：2013-02-12T14:49:43.063
> 
> 标签：r

我正在寻找使用 R Studio 进行 qtl 分析。为了了解它是如何工作的，我一直在使用包中提供的一些示例数据。以下产生可行的结果：

```
data(fake.bc)
summary(fake.bc)
plot(fake.bc) 
```

但是，我不知道如何查看生成基因图等图形的源文件的内容。如何查看与 fake.bc 关联的源文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:55:41.740

如果您需要有关包中数据集的帮助，您可以像使用任何其他功能一样获得它：

```
?fake.bc 
```

在此帮助页面中，您可以阅读：

```
Format:

     An object of class ‘cross’.  See ‘read.cross’ for details. 
```

然后，如果您阅读`read.cross`帮助页面，您将了解`fake.bc`对象是如何生成的。

# html - 在移动设备上查看网站需要水平滚动

> ID：14835226
> 
> 赞同：0
> 
> 时间：2013-02-12T14:49:48.757
> 
> 标签：html, css, wordpress, web

我有一个基于 Wordpress 的网站，出于某种奇怪的原因，当我通过 iPhone 或任何其他移动设备打开它时，我只能看到网站的背景，而且只有向右滚动很多才能看到完整的网站。

我附上了一个截图，所以你们都可以明白我的意思，或者只是尝试打开[http://sivantalmor.com](http://sivantalmor.com)并自己查看。

我可以使用 CSS 来解决这个问题吗？

![截屏](../Images/08e9d7508fa31d9a431928ca7305399c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:19:11.153

我不是 100% 确定是什么原因造成的，但这似乎有效：

将`overflow-x: hidden;`属性添加到您的 div#main

**像这样：**

```
<div id="main" role="main" style="overflow-x: hidden;">
</div> 
```

编辑：

问题在这里：

```
<div class="audio-player" style="direction: ltr;"></div> 
```

您可以删除`direction: ltr;`导致这一切的原因。但是，您必须为包裹相册照片的元素修复一些边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:26:06.840

确切的问题在于音频播放器部分（#soundcheck_audio_player_widget-2）。内部是链接 .jp-pause，它位于左侧 div 之外的宽处。这会导致页面在左侧生成一个长滚动条。您可以添加溢出：隐藏；到这个类：.jp-controls-wrap

```
.jp-controls-wrap {
  overflow: hidden;
} 
```

它成功了！

# c# - 从网站获取“真实”的 HTML 源代码

> ID：14835228
> 
> 赞同：2
> 
> 时间：2013-02-12T14:49:51.133
> 
> 标签：c#, winforms

所以，我遇到了一个问题，我最喜欢的广播电台在我开车时播放一首我不知道的歌曲。他们没有一个显示他们播放过的歌曲列表的页面。但是，他们的网站上确实有一个“正在播放”部分，其中显示了当前正在播放的内容以及由谁播放。因此，我正在尝试编写一个小程序，该程序将每 2 分钟轮询一次站点以检索歌曲的名称和艺术家。使用 Chrome 开发工具，我可以在源代码中看到歌曲名称和艺术家。但是当我查看页面源时，它没有显示出来。他们正在使用 javascript 来运行显示该信息。我尝试了以下方法：

```
private void button1_Click(object sender, EventArgs e)
{
    webBrowser1.Navigate(@"http://www.thebuzz.com/main.html");

    webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted);
}

private void webBrowser1_DocumentCompleted(object sender,
                                 WebBrowserDocumentCompletedEventArgs e)
{
    do
    {
         // Do nothing while we wait for the page to load
    }
    while (webBrowser1.ReadyState == WebBrowserReadyState.Loading);

    var test = webBrowser1.DocumentText;
    textBox1.Text = test.ToString();
} 
```

本质上，我将它加载到 a`WebBrowser`并尝试以这种方式获取源代码。但是在运行 javascript 后我仍然没有得到该部分。有没有办法在事后实际检索呈现的 HTML？

**编辑**

另外，有没有办法`WebBrowser`允许脚本运行？我收到弹出窗口询问我是否要允许它们运行。我不想压制他们，我需要他们跑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T15:19:44.623

正如[Jay Tomten](https://stackoverflow.com/questions/14835228/get-real-html-source-from-website/14835780#comment20787319_14835228)在评论中所说，您正在尝试解决问题的结果，而不是原因。问题的原因是他们使用 Javascript 来更新页面的该部分。与其通过让 Javascript 进行更新然后阅读它所写的内容来解决这个问题，不如问问自己 Javascript 从哪里获取信息以及您是否可以去同一个地方。打开一些可以让您查看网络流量的东西——例如[Fiddler](http://www.fiddler2.com/fiddler2/)或 Chrome 的开发控制台。注意 POST 调用。其中之一可能是 AJAX 请求，其中页面上的 Javascript 正在获取当前歌曲。记下 URL，检查调用以查看它发送的参数和返回的数据。您可以使用[邮递员](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm)或类似的东西来组装一个 POST 请求并计算出该站点上的 Javascript 如何获取其数据，然后编写一些代码来自己调用该 URL 并解析返回的内容。

# javascript - d3.js - 带有嵌套 g 节点的圆形包布局

> ID：14835233
> 
> 赞同：2
> 
> 时间：2013-02-12T14:50:04.683
> 
> 标签：javascript, svg, d3.js, hierarchy, circle-pack

我正在尝试实现圆形包装示例：[http](http://bl.ocks.org/4063530) ://bl.ocks.org/4063530 - 但我希望它使用嵌套的“g”节点，以便更轻松地设置和控制每个圆形子级的可见性 - 但在在这个例子中，所有节点在 dom 中的深度相同。我如何嵌套它们？或者，如果不是嵌套，我如何只选择一个圆圈的直接子级（不是所有圆圈的所有子级）。我目前已修改示例以添加具有对象深度的类，如下所示：

```
d3.json("skills.json", function(error, root) {
  var node = svg.datum(root).selectAll(".node")
    .data(pack.nodes)
    .enter().append("g")
      .attr("class", function(d) { return "node node"+ d.depth; }) 
```

现在想这样做：

```
d3.selectAll(".node1").on("mouseover",function(){
    d3.select(this).classed("active",true).//SELECT ALL CHILDREN OF THE HOVERED NODE HERE 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:06:29.540

在 ing 数据之后，我无法想出一种嵌套 g 元素`pack`的方法，所以这是一个不太优雅的解决方案：

```
 function checkParent(d, w) {
      if(!d.parent) return false;

      if(d.parent == w) {
        return true;
      } else {
        return checkParent(d.parent, w);
      }
  }

  node.on("mouseover",function(d){
      d3.select(this).classed("active",true);
      d3.selectAll(".node")
          .filter(function(w){ return checkParent(w, d); })
          .classed("active",true);
  });

  node.on("mouseout",function(d){
      d3.select(this).classed("active",false);
      d3.selectAll(".node")
          .filter(function(w){ return checkParent(w, d); })
          .classed("active",false);
  }); 
```

[http://bl.ocks.org/4771875](http://bl.ocks.org/4771875)

# python - 类声明之间的区别

> ID：14835236
> 
> 赞同：3
> 
> 时间：2013-02-12T14:50:14.070
> 
> 标签：python, class

我看到一些关于这个主题的类似问题，但我想确定，所以我问......

有什么区别：

```
class MyClass:
    pass 
```

和

```
class MyClass():
    pass 
```

另外，这两者之间是否有区别：

```
class MyClass():
    pass

class MyClass(object):
    pass 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T14:52:35.353

`class MyClass`和之间没有区别`class MyClass()`。第二个问题取决于您的 python 版本。在 python3.x 上，没有区别——在 python2.x 上，后者（你从哪里继承`object`）创建一个[新样式的类](http://www.python.org/doc/newstyle/)而不是旧样式的类。在 python3.x 中，*所有*的类都是新式的。这些天新样式类是首选——因此，我总是确保我的类继承自对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T14:52:48.270

前两个拼写没有区别。

在 python 2.7 中，后两者之间存在*巨大*差异。继承自`object`使它成为一个[新样式的类](http://docs.python.org/2/reference/datamodel.html#newstyle)，改变了继承语义并增加了对描述符（`@property`,`@classmethod`等）的支持。这是 Python 3 中的默认设置。

Python 2.2 中引入了新样式的类来统一类型（例如`int`and `list`）和类，并且由于一些东西以向后不兼容的方式发生变化，您需要“选择加入”，显式继承`object`以启用更改。

在 Python 3 中，不再需要继承自`object`，类总是新样式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T14:52:36.597

该类型的类声明是`class MyClass(object)`Python 2.x 上的[New Style 类](http://www.python.org/download/releases/2.2.3/descrintro/)

[Guido 写了一些在Python 历史中](http://python-history.blogspot.com/2010/06/method-resolution-order.html)带来新类的想法

# c# - 如何开发多语言应用程序

> ID：14835241
> 
> 赞同：-3
> 
> 时间：2013-02-12T14:50:35.387
> 
> 标签：c#, windows-phone, multilingual

我正在开发一个支持两种语言的应用程序，用户可以通过点击屏幕顶部/右侧的文本块来更改语言，语言被保存到全局变量中。

为正确的语言加载该文本的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T14:55:16.070

当我过去为 windows phone 开发时，我发现这些链接很有用

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965328.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965328.aspx)

还有这个

[http://blogs.msdn.com/b/global_developer/archive/2011/01/18/start-building-an-international-application-for-wp-7-part-i.aspx](http://blogs.msdn.com/b/global_developer/archive/2011/01/18/start-building-an-international-application-for-wp-7-part-i.aspx)

希望能帮助到你！

# php - 当字符串大小无关紧要时，为什么 strlen() 比使用变量慢

> ID：14835246
> 
> 赞同：2
> 
> 时间：2013-02-12T14:50:53.593
> 
> 标签：php, performance, strlen

我正在编写一些简单的文件操作，并且想到如果我将字符串大小保存在变量中不会更快。结果表明它快了 10 倍。
使用此代码：

```
include "../classes/Timer.class.php";
$t = new Timer();             //Timer class I've written for this purpose [link below]
$multiplyer = 3000000;        //Times to try the operation
$string = str_repeat("ggggggggggg",2);  //I first tried 2000 here, but for 2 there are same results
$t("calling");     //Saving time
for($i=0; $i<$multiplyer; $i++) {
  $size =  strlen($string);
  $size2 = strlen($string);
  $size3 = strlen($string);
}
$t("clover");
$t("caching");     //Saving time
for($i=0; $i<$multiplyer; $i++) {
  $size =  strlen($string);
  $size2 = $size;
  $size3 = $size;
}
$t("chover");
$total = $t["calling-clover"]+$t["caching-chover"];  //percents are usefull :)
echo "Calling: {$t["calling-clover"]} (".round(($t["calling-clover"]/$total)*100)."%)<br>\n";
echo "Caching in variables: {$t["caching-chover"]} (".round(($t["caching-chover"]/$total)*100)."%)<br>\n"; 
```

### 结果：

> 调用：1.988455057 (67%)
> 变量缓存：0.984993458 (33%)

更有趣的是，我在`str_repeat`调用中输入的数字并不重要，因此`strlen`显然不计算任何东西 - 大小必须保存在某个地方并且`strlen`只是返回值的函数。
这意味着：
**函数调用真的这么慢吗？**
**如果不是，这是`strlen`具体的吗？**

* * *

[Timer.class.php](http://u8.8u.cz/code/Timer.class.php)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T15:15:24.000

这更符合科林的回答

> 更有趣的是，我在 str_repeat 调用中输入的数字并不重要，因此 strlen 显然不计算任何东西 - 大小必须保存在某个地方，而 strlen 只是返回值的函数。

这是对的。在潜入源代码很长一段时间后，我最终得出了这一行：

```
#define Z_STRLEN(zval)                  (zval).value.str.len 
```

所以是的，strlen 的值被计算一次并被缓存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T14:59:23.797

函数调用比变量检索要多得多。每次执行函数时：

1.  创建一个新堆栈，并将函数的参数存储在堆栈中。
2.  为函数的返回值在栈上分配内存
3.  之前分配的内存地址存放在栈上
4.  调用函数的地址
5.  该函数从堆栈中读取参数
6.  返回值存储在堆栈中
7.  执行恢复到调用者并清除堆栈

# c# - Web Api 如何在同一响应中同时返回动态创建的图像和文本数据

> ID：14835249
> 
> 赞同：0
> 
> 时间：2013-02-12T14:50:57.423
> 
> 标签：c#, asp.net-web-api

我想返回一个动态创建的图像，而不是从数据库或文件中检索。假设我有一个简单的 ZipCode 类。我想要一个可以返回邮政编码图像表示的属性。JSON 返回“ZipAsImage”：“System.Drawing.Bitmap”。是的，我是网络世界编程的新手。是的，我一直在寻找其他示例，但它们似乎只返回了一张图片。谢谢你的帮助。

```
public class ZipCode
{
    public int ZipCodeId { get; set; }
    [NotMapped]
    public Image ZipAsImage
    {
        get
        {
            // Create a blank iamge for now to test.
            return new Bitmap(50, 50);
        }
        set { }
    }
} 
```

我的 ApiController 类

```
public class ZipCodesController : ApiController
{
    private MyContext db = new MyContext();

    // GET api/ZipCodesController
    public IEnumerable<ZipCode> GetZipCodes()
    {
        return db.zipcodes.AsEnumerable();
    }

    // GET api/ZipCodesController/5
    public ZipCode GetZipCode(int id)
    {
        ZipCode zipcode = db.ZipCodes.Find(id);
        if (zipcode == null)
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
        }

        return zipcode;
    }
... 
```

我的控制器类

```
public class ZipCodesController : Controller
{
    private MyContext db = new MyContext();

    //
    // GET: /ZipCodes/

    public ActionResult Index()
    {
        var zipcodes = db.ZipCodes.Include(z => z.State);
        return View(zipcodes.ToList());
    }

    //
    // GET: /ZipCodes/Details/5

    public ActionResult Details(int id = 0)
    {
        ZipCode zipcode = db.ZipCodes.Find(id);
        if (zipcode == null)
        {
            return HttpNotFound();
        }
        return View(zipcode);
    }
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:41:18.910

我不了解您展示 MVC Contoller 的地方。我在那里遗漏了什么吗？但是对于 Webapi (ApiController) 你可以重写你的方法如下。这应该在一个响应中传递整个对象。

```
 public HttpResponseMessage GetZipCode(int id)
{
    ZipCode zipcode = db.ZipCodes.Find(id);
    if (zipcode == null)
    {
        return Request.CreateResponse(HttpStatusCode.NotFound)
    }

    return Request.CreateResponse(HttpStatusCode.OK,zipcode);
} 
```

发送二进制图像。您需要设置 Straemcontent 和 content-type。我找到了一个链接，可以帮助您[使用 Webapi 处理该图像](https://stackoverflow.com/questions/10491845/asp-net-web-api-downloading-images-as-binary)。浏览整个线程。您可能会很快弄清楚缺少什么...

# asp.net - 如何使用 asp.net 将子报表动态添加到主报表正文结束部分？

> ID：14835255
> 
> 赞同：1
> 
> 时间：2013-02-12T14:51:10.420
> 
> 标签：asp.net, c#-4.0, crystal-reports, subreport

我根据条件向正文的主报告结尾动态添加了新的子报告，我的代码是

```
int left=10;
int top=20;
int width=50;
int height=50;
report.ReportClientDocument.SubreportController.ImportSubreportEx("Test", @"C:\test-sub.rpt", report.ReportClientDocument.ReportDefController.ReportDefinition.PageFooterArea.Sections[0], left, top, width, height); 
```

添加子报告工作正常，但它显示页脚左侧小图像，我可以尝试增加上述值（高度，宽度）而不显示小图像，当我单击另一个窗口中显示的图像子报告时，但是我必须显示正文的完整子报告结尾请任何人帮助我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:51:22.187

试试这个来启用“可以增长”属性：

```
 Dim obj As SubreportObject = report.ReportDefinition.ReportObjects('Test')
  obj.ObjectFormat.EnableCanGrow = True 
```

# javascript - 检查签入组单选按钮 - 验证

> ID：14835257
> 
> 赞同：0
> 
> 时间：2013-02-12T14:51:27.517
> 
> 标签：javascript, jquery, html

我有：

```
<div class="group">
   <input type="radio" name="myradio" value="1">a
   <input type="radio" name="myradio" value="2">b
</div>
<div class="group">
   <input type="radio" name="two" value="3">a
   <input type="radio" name="two" value="4">b
</div>
<div class="group">
   <input type="radio" name="aaa" value="5">a
   <input type="radio" name="aaa" value="6">b
</div> 
```

[http://jsfiddle.net/jz84u/2/](http://jsfiddle.net/jz84u/2/)

在此示例中，我如何检查是否至少检查了一组？如果没有，那么应该是警报（'错误'）。我想使用 jQuery。

```
$(".group").each(function(){

}) 
```

但我该如何检查呢？对于我的示例应该是返回错误 - 检查任何输入，但如果我有：

```
<div class="group">
   <input type="radio" name="myradio" value="1">a
   <input type="radio" name="myradio" value="2">b
</div>
<div class="group">
   <input type="radio" name="two" value="3">a
   <input type="radio" name="two" value="4" checked="checked">b
</div>
<div class="group">
   <input type="radio" name="aaa" value="5">a
   <input type="radio" name="aaa" value="6">b
</div> 
```

对于这个例子是好的 - 检查第二组中的输入。

我该如何验证这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:57:29.500

这会满足您的需求吗？

```
 var n = $(".group input:checked").length;

   if(n>0){do something} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:02:26.033

尝试像下面它会工作......

添加按钮

```
<input type="button" value="check" id="btnCheck">

<div class="group">
   <input type="radio" name="myradio" value="1">a
   <input type="radio" name="myradio" value="2">b
</div>
<div class="group">
   <input type="radio" name="two" value="3">a
   <input type="radio" name="two" value="4">b
</div>
<div class="group">
   <input type="radio" name="aaa" value="5">a
   <input type="radio" name="aaa" value="6">b
</div> 
```

写一个像下面这样的jquery

```
$("#btnCheck").click(function() {

   if($(".group input:radio:checked").val())
       alert("checked");
    else
    alert("Nothing checked");   

}); 
```

小提琴：http: [//jsfiddle.net/jz84u/6/](http://jsfiddle.net/jz84u/6/)

# asp.net-mvc - 在控制器级别应用时如何禁用动作属性？

> ID：14835258
> 
> 赞同：3
> 
> 时间：2013-02-12T14:51:42.260
> 
> 标签：asp.net-mvc, attributes, annotations

我有以下控制器：

```
[NoCache]
public class AccountController : Controller
{
    [Authorize(Roles = "admin,useradmin")]
    public ActionResult GetUserEntitlementReport(int? userId = null)
    {
        var byteArray = GenerateUserEntitlementReportWorkbook(allResults);

        return File(byteArray,
                System.Net.Mime.MediaTypeNames.Application.Octet,
                "UserEntitlementReport.xls");
    }
}

public class NoCache : ActionFilterAttribute
{
    public override void OnResultExecuting(ResultExecutingContext filterContext)
    {
        var response = filterContext.HttpContext.Response; 
        response.Cache.SetExpires(DateTime.UtcNow.AddDays(-1));
        response.Cache.SetValidUntilExpires(false);
        response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
        response.Cache.SetCacheability(HttpCacheability.NoCache);
        response.Cache.SetNoStore();
        base.OnResultExecuting(filterContext);
    }
} 
```

如您所见，控制器是用`[NoCache]`属性装饰的。

有什么办法可以防止这个属性被应用到`GetUserEntitlementReport`动作上？

我知道我可以在控制器级别删除属性，但这不是我最喜欢的解决方案，因为控制器包含许多其他操作，我不想将属性单独应用于每个操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T16:32:40.007

您可以创建一个新属性，该属性可用于单个操作以选择退出在控制器级别指定的 NoCache。

```
[AttributeUsage(AttributeTargets.Class |
                AttributeTargets.Method,
                AllowMultiple = false,
                Inherited = true)]
public sealed class AllowCache : Attribute { } 
```

标记您要允许缓存的任何操作`[AllowCache]`

然后在代码中，如果该属性不存在，`NoCacheAttribute`则仅禁用缓存`AllowCache`

```
public class NoCacheAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        base.OnActionExecuting(filterContext);

        var actionDescriptor = filterContext.ActionDescriptor;
        bool allowCaching = actionDescriptor.IsDefined(typeof(AllowCache), true) ||
            actionDescriptor.ControllerDescriptor.IsDefined(typeof(AllowCache), true);

        if(!allowCaching)
        {
            //disable caching.
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-04T20:55:46.013

您可以将一个属性应用于操作。那就是[OverrideActionFilters]。

```
[NoCache]
public class AccountController : Controller
{
    [Authorize(Roles = "admin,useradmin")]
    [OverrideActionFilters]
    public ActionResult GetUserEntitlementReport(int? userId = null)
    {
        var byteArray = GenerateUserEntitlementReportWorkbook(allResults);

        return File(byteArray,
                System.Net.Mime.MediaTypeNames.Application.Octet,
                "UserEntitlementReport.xls");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:53:31.387

这可以通过[实现和注册自定义过滤器提供程序](http://bradwilson.typepad.com/blog/2010/07/service-location-pt4-filters.html)来完成。作为起点，我将从[FilterAttributeFilterProvider](http://msdn.microsoft.com/en-us/library/system.web.mvc.filterattributefilterprovider%28v=vs.98%29.aspx)派生并覆盖 GetFilters 以在适当时删除 NoCache 属性。

# json - 是否可以从带有 JSON 正文的 Javascript 获取非 AJAX HTTP POST 来下载文件？

> ID：14835259
> 
> 赞同：0
> 
> 时间：2013-02-12T14:51:42.547
> 
> 标签：json, asp.net-web-api, http-post

我们有一个显示报告的网页，带有一组动态过滤器。

用户选择一个命名报告，页面从 WebApi 获取有效过滤器作为 JSON 列表。用户可以选择过滤器，然后在网格中显示结果（同样通过 WebApi 调用）。到目前为止一切都很好

现在我们允许将数据下载为文件（例如 Excel），但遇到了问题。

我们希望发送带有 JSON 过滤数据的 HttpPost（但不是**AJAX***帖子*），以便浏览器下载文件。我们不能使用 JQuery $.ajax 或 $.post，因为数据是在回调中返回的，而不是作为浏览器处理的下载。

我们尝试了一个标签和一个提交按钮，但搜索 StackOverflow 表明这仅支持以名称-值对的形式发送数据，而不是 JSON 正文。除非你知道不同？

似乎最简单的方法是使用带有单个隐藏输入字段的 a，将 JSON 的内容编码在隐藏控件中，然后在服务器上手动反序列化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:08:59.053

您可以添加一个 html 表单并遍历对象以将名称值对添加到表单中。

```
var query = {},
    $form = $("<form>")
    .attr("method", "post")
    .attr("action", 'pathtoservice');

$.each(query, function (name, value) {
    if (typeof (value) === "number" || typeof (value) === "string") {
        $("<input type='hidden'>")
            .attr("name", name)
            .attr("value", value)
            .appendTo($form);
    }
    else if (typeof (value) === "object") {
        $.each(value, function (i, item) {
            $("<input type='hidden'>")
                    .attr("name", name)
                    .attr("value", item)
                    .appendTo($form);
        });
    }
});

$form.appendTo("body");
$form.submit(); 
```

# c++ - 现在从 C++11 中的“switch”语句“return”是错误的吗？

> ID：14835262
> 
> 赞同：25
> 
> 时间：2013-02-12T14:51:44.730
> 
> 标签：c++, c++11, visual-studio-2012

使用 VS2012，我注意到`switch`已经工作了几年的 a 现在似乎在 Release 版本中被破坏了，但在 Debug 版本中可以正常工作（或至少像以前一样）。我看不出代码有什么问题，所以希望能得到一些关于在块`return`内使用语句的正确性的反馈。`switch`

以下代码编译正常，但在 Win7 32 位的 Release 版本中给出了错误的输出...

```
#include <stdio.h>
#include <tchar.h>

class CSomeClass
{
public:
    float GetFloat(int nInt)
    {
        printf("GetFloat() - entered\n");
        switch (nInt)
        {
        case 1 :
            printf("GetFloat() - case 1 entered\n");
            return 0.5F;
        case 0 :
            printf("GetFloat() - case 0 entered\n");
            return 1.0F;
        case 2 :
            printf("GetFloat() - case 2 entered\n");
            return 2.0F;
        case 3 :
            printf("GetFloat() - case 3 entered\n");
            return 3.0F;
        case 4 :
            printf("GetFloat() - case 4 entered\n");
            return 4.0F;
        }
        printf("GetFloat() - exit\n");
        return 1.0F;
    }
};

int _tmain(int argc, _TCHAR* argv[])
{
    CSomeClass pClass;
    float fValue = pClass.GetFloat(3);
    printf("fValue = %f\n", fValue);

    return 0;
} 
```

如果你可以重复这个问题，并且有一个 MS Connect 登录，也许你也可以在这里投票？

**实际结果**

发布版本给出以下不正确的结果：

```
GetFloat() - entered
GetFloat() - case 3 entered
fValue = 0.000000 
```

**预期成绩**

调试构建给出以下正确结果：

```
GetFloat() - entered
GetFloat() - case 3 entered
fValue = 3.000000 
```

[MS Connect 错误报告](https://connect.microsoft.com/VisualStudio/feedback/details/779043/c-switch-statement-broken-in-release-build#details "MS Connect 错误报告")

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T15:34:54.233

听起来可能是[这个错误](https://connect.microsoft.com/VisualStudio/feedback/details/768562/visual-c-11-produces-bad-assembly-code-when-using-whole-program-optimization-for-x86-target#details)？返回以类似方式生成的浮点值存在问题？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T15:44:46.140

绝对是编译器错误。这是正在执行的精简 asm 代码（删除了跳转等）。编译器删除了一些它认为是不必要的代码——即使它不是。

* * *

发布版本：

```
// inside GetFloat
00E0104D  fld         dword ptr ds:[0E021D8h]  // load constant float onto FPU stack
00E01068  add         esp,4
00E0106B  ret 
// back in main
00E01098  cvtss2sd    xmm0,xmm0  // convert float to double. assumes the returned value to be in xmm0
00E0109C  sub         esp,8  
00E0109F  movsd       mmword ptr [esp],xmm0  // push double being printed (xmm0 is with high likelyhood = 0)
00E010A4  push        0E021B8h   // push output string
00E010A9  call        dword ptr ds:[0E02090h]  // call printf 
```

* * *

调试构建：

```
003314B0  fld         dword ptr ds:[335964h]   // load const float onto FPU stack
[...]
00331500  mov         esp,ebp  
00331502  pop         ebp  
00331503  ret         4  
// back in main
00331598  fstp        dword ptr [fValue]  // copies topmost element of the FPU stack to [fValue]
0033159B  cvtss2sd    xmm0,dword ptr [fValue] // correctly takes returned value (now inside [fValue] for conversion to double 
003315A0  mov         esi,esp  
003315A2  sub         esp,8  
003315A5  movsd       mmword ptr [esp],xmm0  // push double being printed
003315AA  push        335940h  // push output string
003315AF  call        dword ptr ds:[3392C8h]  // call printf 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-12T15:11:39.537

从所有结果中收集数据，这很可能是编译器错误。

*   x64 工作正常
*   `/O1`正常工作
*   好吧，`Debug`工作正常
*   `cout`它在两者上都给出了相同的错误`printf`

而且，可能是最重要的 - 它 100% 符合标准。所以它*应该*工作。

# r - 部分匹配 data.frame 并子集所有 data.frame

> ID：14835263
> 
> 赞同：1
> 
> 时间：2013-02-12T14:51:51.000
> 
> 标签：r

我有一些看起来像这样的数据：

> ```
>  List_name     Condition1   Condition2  Situation1   Situation2
>   List1          0.01         0.12         66           123
>   List2          0.23         0.22         45           -34
>   List3          0.32         0.23         13           -12
>   List4          0.03         0.56         -3            45
>   List5          0.56         0.05         12           100
>   List6          0.90         0.09         22            32 
> ```

我想根据截止值 0.5 过滤 data.frame 的每一列“条件”。过滤后，子集将出现，并将携带“情况”列的相应值。过滤器和子集将成对工作：“Condition1”与“Situation1”，“Condition2”与“Situation2”等等。

只是所需的输出：

> ```
>  List_name     Condition1     Situation1  List_name  Condition2  Situation2
>   List1          0.01             66       List1        0.12        123
>   List2          0.23             45       List2        0.22        -34
>   List3          0.32             13       List3        0.23        -12
>   List4          0.03             -3       List5        0.05        100
>                                            List6        0.09         32 
> ```

我很确定以前可能有另一种类似的情况，但我搜索了一下，没有找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:29:49.433

类似于优秀的@Arun 解决方案，但基于列名并且没有任何假设。

```
cols.conds <- colnames(dat)[gregexpr(pattern='Condition[0-9]+',colnames(dat)) > 0]
lapply(cols.conds, function(x){
   col.list <- colnames(dat)[1]
   col.situ <- gsub('Condition','Situation',x)
   dat[which(dat[[x]] < 0.5), c(col.list,x,col.situ)]}
) 
```

我假设 dat 是：

```
dat <- read.table(text =' List_name     Condition1   Condition2  Situation1   Situation2
  List1          0.01         0.12         66           123
  List2          0.23         0.22         45           -34
  List3          0.32         0.23         13           -12
  List4          0.03         0.56         -3            45
  List5          0.56         0.05         12           100
  List6          0.90         0.02         22            32',head=T) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:31:08.220

您可以使用布尔检查矢量化的概念：

```
x <- c(0.1, 0.3, 0.5, 0.2)
x < 0.5
# [1]  TRUE  TRUE FALSE  TRUE 
```

还有一些`grep`结果：

```
grep('Condition', names(DF1)) 
```

要执行此子集，您可以使用它`apply`来生成布尔向量：

```
keepers <- apply(DF1[, grep('Condition', names(DF1))], 1, function(x) any(x < 0.5)) 
```

和子集：

```
DF1[keepers,] 
```

请注意，这不一定会返回您在问题中显示的数据结构。`all`但是您可以使用或不同的阈值相应地更改匿名函数。

* * *

代替编辑，我会以不同的方式处理这个问题。我会`melt`从`reshape2`包中使用：

```
library(reshape2)
dat.c <- melt(DF1, 
              id.var='List_name', 
              measure.var=grep('Condition', names(DF1), value=TRUE),
              variable.name='condition',
              value.name='cond.val')
dat.c$idx <- gsub('Condition', '', dat.c$condition)
dat.s <- melt(DF1, 
              id.var='List_name', 
              measure.var=grep('Situation', names(DF1), value=TRUE),
              variable.name='situation',
              value.name='situ.val')
dat.s$idx <- gsub('Situation', '', dat.s$situation)
dat <- merge(dat.c, dat.s)

out <- dat[dat$cond.val < 0.5,]

   List_name idx  condition cond.val  situation situ.val
1      List1   1 Condition1     0.01 Situation1       66
2      List1   2 Condition2     0.12 Situation2      123
3      List2   1 Condition1     0.23 Situation1       45
4      List2   2 Condition2     0.22 Situation2      -34
5      List3   1 Condition1     0.32 Situation1       13
6      List3   2 Condition2     0.23 Situation2      -12
7      List4   1 Condition1     0.03 Situation1       -3
10     List5   2 Condition2     0.05 Situation2      100
12     List6   2 Condition2     0.09 Situation2       32 
```

然后，您可以根据`dcast`需要将数据恢复为初始格式，但我发现这种“长”形式的数据更易于使用。这种形式也很令人愉快，因为它避免了对 NA 值的需要，其中您有满足一个条件而其他条件不满足的行。

```
out.c <- dcast(out, List_name ~ condition, value.var='cond.val')
out.s <- dcast(out, List_name ~ situation, value.var='situ.val')
merge(out.c, out.s)

  List_name Condition1 Condition2 Situation1 Situation2
1     List1       0.01       0.12         66        123
2     List2       0.23       0.22         45        -34
3     List3       0.32       0.23         13        -12
4     List4       0.03         NA         -3         NA
5     List5         NA       0.05         NA        100
6     List6         NA       0.09         NA         32 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T16:10:47.687

我认为您所要求的是可以实现的，但不能以`bind`您所展示的方式（绑定），因为它们具有不平等的元素。所以，你会得到一个清单。

在这里，我假设你的`data.frame`always 的形式是`List_name`，后跟 , ... 的列表`Condition1`，`ConditionN`然后`Situation1`是 , ..., `SituationN`。

然后，这可以通过获取第`ids`一个然后使用过滤来获得`lapply`

```
ids <- grep("Condition", names(df))
lapply(ids, function(x) df[which(df[[x]] < 0.5), c(1,x,x+length(ids))])

# [[1]]
#   List_name Condition1 Situation1
# 1     List1       0.01         66
# 2     List2       0.23         45
# 3     List3       0.32         13
# 4     List4       0.03         -3
# 
# [[2]]
#   List_name Condition2 Situation2
# 1     List1       0.12        123
# 2     List2       0.22        -34
# 3     List3       0.23        -12
# 5     List5       0.05        100
# 6     List6       0.09         32 
```

# c# - 对象的属性何时可用？

> ID：14835265
> 
> 赞同：1
> 
> 时间：2013-02-12T14:51:54.060
> 
> 标签：c#

*前言：这是一个很长的问题，如果您不想阅读和理解我为什么要问这个问题，那么请不要评论“为什么不简单地测试代码？”*

我有一个看起来像这样的对象模型：

```
public class MyObjectModel
{
     public byte TypeOfNestedObject { get; set; } 
     public string NestedObjectInJson { get; set; }

     public NestedObjectModel1 { get; set; }
     public NestedObjectModel2 { get; set; }
     public NestedObjectModel3 { get; set; }

     public MyObjectModel()
     {
         NestedObjectModel1 = null;
         NestedObjectModel2 = null;
         NestedObjectModel3 = null;
     }

     public void DeserializeJsonString()
     { 
          if (TypeOfNestedObject == 1) { 

              NestedObjectModel1 = "deserialize NestedObjectInJson 
                                    into NestedObjectModel1";
          }

          if (TypeOfNestedObject == 2) { 

              NestedObjectModel2 = "deserialize NestedObjectInJson 
                                    into NestedObjectModel2";
          }

          if (TypeOfNestedObject == 3) { NestedObjectModel3 ... }
     }
} 
```

基本上，该对象由三个嵌套对象（`NestedObjectModel1`和`NestedObjectModel2`）`NestedObjectModel3`组成。但是，在任何给定时间实际上只使用其中一个。在数据库中，我存储用于重新创建此对象的字段，其中一个数据库字段是一个 json 字符串，其中包含特定实例的三个嵌套对象之一。

我的查询看起来有点像这样：

```
var TheObjectModel = from t in MyDC.Table
                     .....
                     select new MyObjectModel()
                     {
                         TypeOfNestedObject = t.TypeOfNestedObject,

                         NestedObjectInJson = t.NestedObjectInJson  
                     }; 
```

我使用该属性`TypeOfNestedObject`来了解特定实例具有哪个嵌套对象`MyObjectModel`。**目前，**在查询执行后，我运行一个方法，该方法读取`TypeOfNestedObject`字符串`NestedObjectInJson`并将其反序列化为适当的类型，并将反序列化的对象添加为相应的嵌套对象。

**现在我想添加一个自定义设置器**，`NestedObjectInJson`以便在查询运行时设置此属性时，对象会自动将字符串反序列化为适当的类型。但是，要使其正常工作，对象还必须`TypeOfNestedObject`正确设置属性。我想这样写二传手：

```
public NestedObjectInJson
{
   set {

       if (this.TypeOfNestedObject == 1) {

            NestedObjectModel1 = "deserialize NestedObjectInJson 
                                  into NestedObjectModel1 ";
       }
   }
} 
```

如果我这样编写 setter，则属性 TypeOfNestedObject 是否需要在 setter 运行时可用。如果您注意到，在查询中，我在加载`TypeOfNestedObject`之前加载`NestedObjectInJson`。

所以问题是这样的：如果我决定删除对的调用`DeserializeJsonString`并创建这个自定义设置器，属性 TypeOfNestedObject 是否可用，因为在查询中它是在查询之前设置的，`NestedObjectInJson`或者是查询的写入顺序使属性的可用性`TypeOfNestedObject`不可预测?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:54:47.937

这会起作用，顺序是可预测的。

但是，我建议不要这样做。干净的方法是提供一个构造函数，它接受类型和 JSON 并执行反序列化。
使用这种方法，您可以避免当前的[时间耦合](http://blog.ploeh.dk/2011/05/24/DesignSmellTemporalCoupling.aspx)。

# c# - Container ViewModel 类属性的设置器，该属性依赖于 Contained ViewModel 类的另一个属性

> ID：14835266
> 
> 赞同：0
> 
> 时间：2013-02-12T14:51:56.803
> 
> 标签：c#, wpf, mvvm

请看下面的代码

```
public class VM1
{
    private bool isValid;
    private VM2 vmInstance;

    // ...

    public bool IsValid
    {
        get { return this.isValid; }
        set { /* ... */ } 
    }

    public VM2 VMInstance
    {
        // ...
    }

}
public class VM2
{
    public bool IsValid
    {
        // ...
    }
} 
```

现在 的`IsValid`-property`VM1`取决于 的`IsValid`-property的值`VM2`。实现这一目标的最佳方法是什么？

我找到了解决我的问题的方法。VM1 类订阅 VM2 的 propertychanged 事件。当 VM2 的 evr ISValid 属性发生变化时，在这个事件处理程序中，我们调用 VM1 的 setState() 方法来决定 IsValid 属性的值。

```
 void MyViewModel_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        switch (e.PropertyName)
        {
            case "IsValid":
                // call a method in VM1 to decide the value of IsValid property of VM1
                // say, the method name is setState()
                break;
         }
     } 
```

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:03:19.357

If`VM1`仅有效 if`VM2`也有效，请使用`&&`-operator 返回两个`IsValid`-properties 的共同结果：

```
public class VM1
{
    // ...

    public bool IsValid
    {
        get
        { 
            return isValid && 
                   (VMInstance != null && VMInstance.IsValid);
        }
        set
        {
            isValid = value;
        }
    }

    // ...
} 
```

因此，只有在（私有字段）和 return两者`VM1.IsValid`时才会返回。`true``VM1.isValid``VM2.IsValid``true`

由您决定是否`VM1.IsValid`返回`true`或`false`取决于是否`VMInstance`返回`null`- 只需相应地调整语句即可。

然后 setter 只设置当前实例的值，因为它不影响`IsValid`第二个视图模型的 -property。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:59:25.910

我需要更多关于你将如何考虑`VM2`'`IsValid`属性的信息。

您可以从将实例传递`VM2`到构造函数中开始，`VM1`以便可以引用它。看下面的例子。

```
public class VM1
{
    private bool isValid;
    private VM2 vmInstance;
    //......

    public VM1(VM2 vm2)
    {
        VMInstance = vm2;
    }

    public bool IsValid
    {
        get
        {
            return this.isValid && VMInstance.IsValid;
        }
        set
        {
            // 
        }

    }

    public VM2 VMInstance 
    { 
        get { return vmInstance; }
        set { vmInstance = value; }
    }
}

public class VM2
{
    public bool IsValid { get; set; }
} 
```

# asp.net-mvc - MVC 控制器中的 ServiceStack 会话始终为空

> ID：14835267
> 
> 赞同：4
> 
> 时间：2013-02-12T14:51:57.230
> 
> 标签：asp.net-mvc, servicestack

我正在使用服务堆栈 MVC 电源包创建一个 ASP.NET MVC 4 应用程序，并利用服务堆栈的身份验证和会话提供程序。我从社交引导 API 项目中复制了很多逻辑。我的控制器继承自以下基本控制器：

```
public class ControllerBase : ServiceStackController<CustomUserSession> 
```

实现为：

```
public class ControllerBase : ServiceStackController<CustomUserSession> {} 
```

`CustomUserSession`继承自`AuthUserSession`：

```
public class CustomUserSession : AuthUserSession 
```

登录后，我的`CustomUserSession` `OnAuthenticated()`方法运行，但是当我重定向回我的控制器时，`UserSession`没有填充，例如

```
public override void OnAuthenticated(IServiceBase authService, IAuthSession session, IOAuthTokens tokens, Dictionary<string, string> authInfo)
{
    base.OnAuthenticated(authService, session, tokens, authInfo);
    CustomFoo = "SOMETHING CUSTOM";

    // More stuff
}

public class MyController : ControllerBase
{
    public ActionResult Index()
    {
        // After having authenticated
        var isAuth = base.UserSession.IsAuthenticated; // This is always false
        var myCustomFoo = base.UserSession.CustomFoo; // This is always null

    }
} 
```

谁能看到我在这里缺少的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:33:03.337

请参阅 ServiceStack Google Group 中的问题 - [https://groups.google.com/forum/?fromgroups=#!topic/servicestack/5JGjCudURFU](https://groups.google.com/forum/?fromgroups=#!topic/servicestack/5JGjCudURFU)

从 MVC 中使用 JsonSeviceClient（或任何 serviceClient）进行身份验证时，cookie 不会与 MVC 请求/响应共享。

在 MVC 控制器内向 ServiceStack 进行身份验证时，应将 MVC HttpContext 发送到 ServiceStack。像下面这样的东西应该工作......

```
var authService = AppHostBase.Resolve<AuthService>();
authService.RequestContext = System.Web.HttpContext.Current.ToRequestContext();
var response = authService.Authenticate(new Auth
{
  UserName = model.UserName,
  Password = model.Password,
  RememberMe = model.RememberMe
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:41:04.467

尝试将 IsAuthenticated 设置为 true 并保存您的会话...

```
public override void OnAuthenticated(IServiceBase authService, IAuthSession session, IOAuthTokens tokens, Dictionary<string, string> authInfo)
{
    base.OnAuthenticated(authService, session, tokens, authInfo);
    CustomFoo = "SOMETHING CUSTOM";
    session.IsAuthenticated = true;
    authService.SaveSession(session);

    // More stuff
} 
```

# unit-testing - 在 Grails 2.2 中是否可以对 mongodb 动态属性进行单元测试？

> ID：14835268
> 
> 赞同：5
> 
> 时间：2013-02-12T14:52:02.827
> 
> 标签：unit-testing, mongodb, grails, grails-orm

当涉及到单元测试部分时，mongodb-1.1.0GA 的文档似乎已经过时：http: [//springsource.github.com/grails-data-mapping/mongo/manual/ref/Testing/DatastoreUnitTestMixin.html](http://springsource.github.com/grails-data-mapping/mongo/manual/ref/Testing/DatastoreUnitTestMixin.html)

以下代码

```
@TestFor(Employee)
class EmployeeTests extends GroovyTestCase {

    void setUp() {
    }

    void tearDown() {
    }

    void testSomething() {
        mockDomain(Employee)

        def s = new Employee(firstName: "first name", lastName: "last Name", occupation: "whatever")
        s['testField'] = "testValue"
        s.save()

        assert s.id != null

        s = Employee.get(s.id)

        assert s != null
        assert s.firstName == "first name"
        assert s['testField'] == "testValue"

    }
} 
```

失败并出现此错误：

```
No such property: testField for class: Employee 
```

Employee 类非常简单：

```
class Employee {

    String firstName
    String lastName
    String occupation

    static constraints = {
        firstName blank: false, nullable: false
        lastName blank: false, nullable: false
        occupation blank: false, nullable: false
    }
} 
```

那么，动态属性的单元测试是否可行？如果是，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:55:06.950

动态属性没有开箱即用的支持，但添加起来相当容易。我已将以下代码放入我的设置方法中。它将动态属性添加到您使用`@TestFor`或启用的任何域类`@Mock`。

```
grailsApplication.domainClasses.each { domainClass ->
    domainClass.metaClass.with {
        dynamicAttributes = [:]
        propertyMissing = { String name ->
            delegate.dynamicAttributes[name]
        }
        propertyMissing = { String name, value ->
            delegate.dynamicAttributes[name] = value
        }
    }
} 
```

# c# - 覆盖 zip 文件中的条目

> ID：14835270
> 
> 赞同：2
> 
> 时间：2013-02-12T14:52:14.247
> 
> 标签：c#, overwrite, dotnetzip

我遇到了麻烦，我得到了这个代码：

```
DirectoryInfo di = new DirectoryInfo(dir);
FileInfo[] rgFiles = di.GetFiles();
DirectoryInfo[] d = di.GetDirectories();
if(rgFiles != null && d != null) {
foreach (FileInfo fi in rgFiles)
{
    foreach (DirectoryInfo dii in d)
    {
        using (ZipFile zip = ZipFile.Read(locateZipFile()))
        {

            zip.AddFile(fi.FullName, "");

            zip.AddDirectory(dii.FullName,dii.Name);
            toolStripStatusLabel1.Text = "Inserting " + fi.Name;
            toolStripStatusLabel1.Text = "Inserting " + dii.Name + " and all of it's contents";

            MessageBox.Show("Inserted the file " + fi.Name);
            MessageBox.Show("Inserted the folder " + dii.Name + " and all contents in it.");
            zip.Save();

        }
    }
} 
```

一切都很好，但是当我尝试在 zip 中添加一个名称相同的文件时，它不会覆盖它，我想要它......关于我如何做到这一点的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-02-23T12:14:54.540

You can use the [UpdateFile](https://documentation.help/DotNetZip/befd3197-f060-b25c-c07f-3f1816bcc7ca.htm) method.

```
zip.UpdateFile(fi.FullName, ""); 
```

> This method adds a file to a zip archive, or, if the file already exists in the zip archive, this method Updates the content of that given filename in the zip archive. The UpdateFile method might more accurately be called "AddOrUpdateFile".
> 
> Upon success, there is no way for the application to learn whether the file was added versus updated.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T15:03:44.217

行前

```
zip.AddFile(fi.FullName, ""); 
```

您必须测试该名称是否已存在于条目中。如果是，请将其取出，然后重新插入。

# html - CSS 多背景

> ID：14835271
> 
> 赞同：0
> 
> 时间：2013-02-12T14:52:14.980
> 
> 标签：html, css, modernizr

我正在使用多个背景图像宽度为一个 div，但它在 IE8 中不起作用。这是我的CSS代码：

```
.description-page #main-navigation ul{ 
   text-align:left;
   width: 451px;background:url(../images/menu-desing.png) no-repeat center 26px ,
                           url(../images/top-bar1.png) no-repeat center 0px ;
   height: 86px; z-index:100;padding-top: 9px;
} 
```

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:58:09.227

您可以使用 CSS3pie 来实现这一点 - [http://css3pie.com/documentation/supported-css3-features/#pie-background](http://css3pie.com/documentation/supported-css3-features/#pie-background)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:07:59.930

您可以执行以下操作来为 IE8 实现两个背景：您只需要 DOM 中的一个元素，我们将在伪元素的帮助下创建第二个元素，它已经在 IE8（而不是 IE7）中工作。

```
.description-page #main-navigation ul { 
   text-align:left;
   width: 451px;
   background:url(../images/menu-desing.png) no-repeat center 26px;
   height: 86px; 
   padding-top: 9px;

   position: relative;
   z-index: 1;
}

/* Generate a new element with the second background, positioned on the same place like the original ul */
.description-page #main-navigation ul:before {
     background: url(../images/top-bar1.png) no-repeat center 0px;
     content: "";
     height: 86px;
     left: 0;
     position: absolute;
     top: 0;
     width: 451px;

     z-index: -1;
} 
```

# java - XPages getEffectiveUserName()

> ID：14835278
> 
> 赞同：1
> 
> 时间：2013-02-12T14:52:38.037
> 
> 标签：java, xpages, lotus-notes, lotus-domino, xpages-ssjs

我正在使用[XPage 作为代理 (XAgent)](http://www.wissel.net/blog/d6plinks/shwl-7mgfbn)，它使 SSJS 调用存储为 Java 设计元素的一些 Java 类。我希望由 XPage 发起的进程位于我当前登录浏览器的用户的上下文中。但是一切似乎都像我一样运行，我猜是基于 XPage 上的最后一个签名？

例如，在我的自定义类中，当我需要返回用户名时，以下会返回我的姓名：

```
DominoUtils.getCurrentSession().getEffectiveUserName() 
```

使用老式 Domino 代理时，有效用户名由代理属性中的“以 Web 用户身份运行”或“代表运行”字段确定。

使用 XPage 时是否可以实现相同的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:34:39.160

要调查您有许多活动部件：

1.  将带有 session.getUserName() 和 session.getEffectiveUsername() 的打印语句添加到 XAgent（不是您的 Java 代码）
2.  检查您的 DominoUtils 是否隐藏了 sessionAsSigner
3.  如果 1 有效，但 3 无效，请考虑依赖注入：与其从 DominoUtils 获取会话，不如将其作为 XAgent 的参数传递给 Java 类

让我们知道怎么回事

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:15:38.793

在我的场景中，我可以通过以下任一方式解决大部分要求：

```
session.getEffectiveUserName() 
```

或者：

```
context.getUser().getFullName() 
```

在某些情况下，您需要将其封装为：

```
session.createName(string):NotesName 
```

获取 NotesName-Object 表示。

# sharepoint - Sharepoint 可视化 Web 部件没有 .cs 文件

> ID：14835282
> 
> 赞同：0
> 
> 时间：2013-02-12T14:52:41.920
> 
> 标签：sharepoint, sharepoint-2010, sdk, web-parts

我正在尝试创建一个具有与之关联的一些属性的可视 Web 部件，以便我可以将它们用作 Web 部件的设置。我正在尝试遵循[本教程](http://www.codeproject.com/Articles/188019/Creating-Visual-Web-Part-Properties)，但是每当我创建一个新的“Visual Web Part”项目时，它不会创建他们在教程中引用的 .cs 文件。

相反，它会创建以下内容：

*   元素.xml
*   WebpartName.ascx
*   WebpartName.ascx.cs
*   WebpartName.ascx.g.cs
*   WebpartName.webpart

我猜这与我安装的 SDK 有关：

Microsoft SharePoint 2010 SDK - 版本 14.0.4763.1086

我做错了什么还是应该尝试获取不同版本的 SDK，或者有没有办法可以使用这种类型的文件结构引入 webpart 属性？到目前为止，我看到的所有示例都引用了“WebpartName.cs”文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T07:27:59.867

是的，Sharepoint 2013 可视 Web 部件没有 .cs 文件是对的，但您仍然可以使用 .ascx.cs 文件将自定义属性添加到可视 Web 部件。

详细步骤请参考附件链接：

[http://www.ashokraja.me/articles/How-to-create-a-custom-property-and-set-a-default-value-in-a-SharePoint-2013-Visual-WebPart](http://www.ashokraja.me/articles/How-to-create-a-custom-property-and-set-a-default-value-in-a-SharePoint-2013-Visual-WebPart)

问候，迪帕里

# ruby - rspec 中的依赖测试

> ID：14835283
> 
> 赞同：8
> 
> 时间：2013-02-12T14:52:41.813
> 
> 标签：ruby, testing, rspec, automated-tests

我编写功能测试，并且我需要执行取决于先前测试通过的测试。假设我有一个按钮，可以打开一个窗口，其中有一个函数。也就是说，为了检查这个功能，我需要首先检查按钮的正确操作（即打开窗口或没有功能）。因此，我需要这样做，如果单击按钮时测试失败，则测试未运行以检查功能窗口。单独编写测试 - 对我来说不是一种选择。我想看到这样的东西：

```
describe "some tests" do
  open_result = nil

  it "should check work button" do
    click_to_button()
    open_result = window_opened?
    open_result.should == true
  end

  if open_result

    describe "Check some functional" do

      it "should check first functional"

      it "should check second functional"

    end

  end

end 
```

我知道这种方法不适用于 rspec。这只是对我想看到的内容的简单描述。使用rspec可以实现吗？如果没有，是否有其他方法（宝石等）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T16:44:04.333

RSpec 被设计为一个**单元测试**框架，因此从中获得完美的功能测试行为可能有点困难。在 RSpec 的哲学中，测试**必须**是独立的。*当您使用autotest*时，这一点尤其重要：在这种情况下，执行顺序确实是不可预测的。悲伤但真实。

当然，您当然可以使用全局 ( `$a`)~~或实例 ( `@a`，此处不确定)~~变量在测试之间保存一些状态。无论如何，您需要`if`进入`it`块，以便及时执行。[`pending`](https://github.com/dchelimsky/rspec/wiki/Pending-Examples)如果不满足前提条件，您可以使用关键字来中断测试而不会失败。

**但**

我确信最好的解决方案是避免[金锤](http://en.wikipedia.org/wiki/Law_of_the_instrument)反模式，而不是在单元测试框架中编写功能测试。您不想测试一些单独的功能。您确实想测试**场景**。所以我建议尝试一些场景测试套件。

看，[**黄瓜**](http://cukes.info/)！用法很简单：

1.  在 Ruby 中定义参数化的场景*步骤*，并在 RSpec 样式中定义期望
2.  用自然语言编写场景*（是的，不仅是英语，甚至是俄语或其他语言——Regexps 的力量就在你身边）*

在您的情况下，您将拥有类似的`features/step_definitions/gui_steps.rb`东西

```
Given /I pushed a button "(.*)"/ do |name|
    @buttons.find(name).click() # This line is pseudo-code, you know
end 
```

以及用于检查窗口打开等的类似内容（参见[示例](https://github.com/cucumber/cucumber/blob/master/examples/i18n/en/features/step_definitons/calculator_steps.rb)）。然后你可以以任何方式组合定义的步骤，例如你的两个场景可能看起来像

```
Scenario: Feature 1
    Given I pushed a button "go"
    And I focus on opened window
    When I trigger "feature 1"
    Then I should se "result 1" in text area

Scenario: Feature 2
    Given I pushed a button "go"
    And I focus on opened window
    When I trigger "feature 2"
    Then I should se "result 2" in text area 
```

在这两种情况下，如果场景的某个步骤失败（比如*我专注于打开的窗口*——如果它没有打开），**则不会执行后续步骤**——就像你想要的那样。作为奖励，您可以获得关于发生的事情和步骤的*极其详细的输出（参见网站上的图片）。*

好消息是您并不总是需要自己定义所有步骤。例如，当您测试一个 Web 应用程序时，您可以使用 webrat 步骤来处理典型的事情，例如*When I go to url/a/b/c* and *Then I should see text "foo" on the page*。我不知道你使用的是哪个 GUI 测试框架，但可能已经有步骤了，所以我建议你在*Cucumber %framework name%*上谷歌。即使没有，编写一次这些步骤也不会比尝试从 RSpec 制作 Cucumber 更困难。

# php - 从数据库中填充下拉列表并将该值插入到同一数据库中的另一个中

> ID：14835288
> 
> 赞同：1
> 
> 时间：2013-02-12T14:53:01.587
> 
> 标签：php, mysql, phpmyadmin

我正在将数据填充到装配表中的下拉列表中（表中的值是用户自己使用 php 添加的）。现在我想在零件表中添加 Assembly_Name。想要从此下拉菜单中选择值并需要插入到零件表的 Assembly_Name 列中。我无法选择下拉值并将其插入到零件表中。

部分.php

```
<html>
<body>

<form action="insert_part.php" method="post">
<!--Assembly_Id: <input type="text" name="Assembly_Id">-->
<?PHP 
// Connect to your database ** EDIT THIS **
mysql_connect("localhost","root","abc"); // (host, username, password)

// Specify database ** EDIT THIS **
mysql_select_db("test") or die("Unable to select database"); //select db

$result = mysql_query("select assembly_id,assembly_name from assembly ORDER BY  Assembly_Id"); 

echo '<select name="assembly_name"><OPTION>'; 
echo "Select an option</OPTION>"; 
while ($row = mysql_fetch_array($result)){

$assembly_name= $row["assembly_name"]; 
echo "<OPTION value=\"$assembly_name\">$assembly_name</OPTION>"; 
} 
echo '</SELECT>';
?>

Part_name: <input type="text" name="Part_name">
<input type="submit">
</form>
<hr><hr>
<?php
$con = mysql_connect("localhost","abc");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("test", $con);

$result = mysql_query("SELECT * FROM Part ORDER BY Part_Id");

echo "<table border='1'>
<tr>
<th>Assembly Name</th>
<th>Part Id</th>
<th>Part Name</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['Assembly_Name'] ."</td>";
  echo "<td>" . $row['Part_Id'] . "</td>";
  echo "<td>" . $row['Part_Name'] . "</td>";
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?>
</body>
</html> 
```

insert_part.php

```
<?php
$con = mysql_connect("localhost","abc");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("test", $con);
$assembly_name = isset($_POST['assembly_name'])
$sql="INSERT INTO Part (assembly_name,Part_Id, Part_Name) VALUES ('$_POST[assembly_name]','$_POST[Part_Id]','$_POST[Part_name]')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
header("Location:part.php");
exit;
mysql_close($con);
?> 
```

提交值时，我收到以下错误：

> 解析错误：语法错误，第 10 行 C:\wamp\www\insert_part.php 中的意外 T_VARIABLE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:06:42.360

第 1 步：尝试了解您的错误试图告诉您什么。第 10 行有一个变量问题。

第 2 步：检查代码，了解使用中的变量可能存在问题的原因。

在此之后，检查上面的行，您会发现第 9 行的语句没有用 a 完成，`;`并且在到达第 10 行时遇到了“意外”变量

您似乎也没有提交`$_POST['Part_Id']`

此外，您还需要引号，`$_POST`例如`$_POST['assembly_name']`SQL 语句中的引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:06:48.540

第 9 行缺少分号：

```
$assembly_name = isset($_POST['assembly_name']); 
```

但正如@Lion 所说，请改用准备好的语句。因为它是这个代码非常不安全:(

# tomcat - Tomcat：可以在多个上运行单个应用程序实例

> ID：14835293
> 
> 赞同：0
> 
> 时间：2013-02-12T14:53:18.707
> 
> 标签：tomcat

在 TomCat 中，是否可以在两个不同的任意端口（例如 8445、8446）上运行应用程序的单个实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:16:39.780

您可以放入多个`<Connector>`元素。请参阅HTTP 连接器上[的文档。](http://tomcat.apache.org/tomcat-7.0-doc/config/http.html)此外，您可以复制现有的连接器并只修改端口号。

# google-chrome - browserAction.getTitle() 在 Chrome 扩展中不起作用

> ID：14835301
> 
> 赞同：0
> 
> 时间：2013-02-12T14:53:48.007
> 
> 标签：google-chrome, google-chrome-extension

以下代码失败：

```
var currentIcon = chrome.browserAction.getTitle(function(result){
                                                            return result;
        });

alert(currentIcon); 
```

请帮助解决问题。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T17:26:16.947

正确的代码是：

```
chrome.browserAction.getTitle({},function(result){
                                                alert(result);
                          }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T15:41:28.987

`chrome.browserAction.getTitle`是一个异步函数。

使用以下内容：

```
chrome.browserAction.getTitle(details, function(result){
    alert(result);
}); 
```

# php - 使用 PHP 以主题方式打印所有数组结果？

> ID：14835303
> 
> 赞同：1
> 
> 时间：2013-02-12T14:53:56.647
> 
> 标签：php, arrays, drupal, object, printing

我想打印 taxonomy_vocabulary_11 数组的所有结果（这是 Drupal 7 站点）。如果我使用`<?php print render($content['taxonomy_vocabulary_11'][0]['#title']); ?>`，我只会得到一个结果。

我已经成功地尝试过

```
<?php foreach ($content->taxonomy_vocabulary_11 as $key => $value): $terms = $value['#title']; ?>
<?php print $terms; ?>
<?php endforeach?> 
```

我收到此错误：`Notice: Trying to get property of non-object`

现在，这是我使用开发模块（`dpm($node);`）得到的输出

```
(object) array(
  'vid' => '5178',
  'uid' => '1',
  'title' => 'PROYECTO',
  'log' => '',
  'status' => '1',
  'comment' => '2',
  'promote' => '0',
  'sticky' => '0',
  'nid' => '155',
  'type' => 'jornadas',
  'language' => 'und',
  'created' => '1095048000',
  'changed' => '1360589684',
  'tnid' => '0',
  'translate' => '0',
  'revision_timestamp' => '1360589684',
  'revision_uid' => '1',
  'taxonomy_vocabulary_4' => array(),
  'taxonomy_vocabulary_6' => array(
    'und' => array(
      array(
        'tid' => '33',
        'taxonomy_term' => (object) array(
            'tid' => '33',
            'vid' => '6',
            'name' => 'Jornadas Gratuitas',
            'description' => '',
            'format' => NULL,
            'weight' => '0',
            'vocabulary_machine_name' => 'vocabulary_6',
          ),
      ),
    ),
  ),
  'taxonomy_vocabulary_7' => array(
    'und' => array(
      array(
        'tid' => '40',
        'taxonomy_term' => (object) array(
            'tid' => '40',
            'vid' => '7',
            'name' => 'Para PH',
            'description' => '',
            'format' => NULL,
            'weight' => '-10',
            'vocabulary_machine_name' => 'vocabulary_7',
          ),
      ),
    ),
  ),
  'taxonomy_vocabulary_11' => array(
    'und' => array(
      array(
        'tid' => '262',
        'taxonomy_term' => (object) array(
            'tid' => '262',
            'vid' => '11',
            'name' => 'colegios',
            'description' => '',
            'format' => NULL,
            'weight' => '0',
            'vocabulary_machine_name' => 'vocabulary_11',
          ),
      ),
      array(
        'tid' => '543',
        'taxonomy_term' => (object) array(
            'tid' => '543',
            'vid' => '11',
            'name' => 'derecho',
            'description' => '',
            'format' => NULL,
            'weight' => '0',
            'vocabulary_machine_name' => 'vocabulary_11',
          ),
      ),
    ),
  ),
  'body' => array(
    'und' => array(
      array(
        'value' => " 
```

我还尝试`<?php print render($content['taxonomy_vocabulary_11']); ?>`将分类法视为任何其他领域，但它不会打印任何内容。

注意：如果我去做`print $content['taxonomy_vocabulary_11'];`，只需打印单词数组。

我的方法有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:05:08.013

尝试：

```
foreach ($content['taxonomy_vocabulary_11'] as $tv11) {
    print render($tv11['#title']);
} 
```

我不使用drupal，但如果我了解 $content['taxonomy_vocabulary_11'] 数组的结构，这应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:28:43.630

以防万一有人需要它：

```
<?php 
$vid = 11; //vocabulary id
$nid = $node->nid; //it looks for the current loaded node
$query = "SELECT tid, name
FROM (
SELECT td.tid AS tid, name
FROM taxonomy_term_data AS td
JOIN taxonomy_index AS tn
  ON td.tid = tn.tid
JOIN node AS n
  ON n.nid = tn.nid
WHERE td.vid = ". $vid ."
  AND n.status = 1
  AND n.nid = ".$nid."
GROUP BY td.tid
) AS t
ORDER BY name ASC";
$result = db_query($query);
foreach($result as $term) {
      echo l($term->name, "taxonomy/term/$term->tid") . ', ';
}
 ?> 
```

# r - 使用蒙特卡洛模拟遵循 Garch 过程的波动性期权定价

> ID：14835304
> 
> 赞同：1
> 
> 时间：2013-02-12T14:53:57.067
> 
> 标签：r, optimization, vectorization, montecarlo

```
>   Name    Date    Close   CP  ttmDaysW    ttm Strike  Fut Wibor   lambda  omega   alpha   beta    sigma
1   OW20C1330   2011-01-19  0.60    c   42  0.1673307   3300    2768    0.0425  0.03985676  1.205098e-06    0.05403404  0.9426635   0.010935144
2   OW20C1330   2011-02-16  0.21    c   22  0.0876494   3300    2703    0.0435  0.03285167  5.852091e-07    0.05208226  0.9462142   0.008209948
3   OW20C2150   2011-12-08  745.65  c   71  0.2828685   1500    2233    0.0499  0.05490974  1.213260e-06    0.06837361  0.9296792   0.018583414
4   OW20C2150   2011-12-09  720.80  c   70  0.2788845   1500    2262    0.0499  0.05119041  1.212956e-06    0.06813476  0.9299286   0.019143222 
```

嗨，我在 R 中创建了上面的数据框，它有超过 20000 行。我编写了一个代码来计算期权的理论价格，假设波动率遵循 GARCH(1,1) 过程。该代码工作正常，但非常缓慢。我想知道天气有没有机会加速或矢量化？我试图解决这个问题，但作为一个 R 初学者，我失败了。计算是由 Monte Caro Simulation 完成的。OW 是我的 Data.Frame

```
#Monte Carlo Garch(1,1)
nsim=10000
for (i in 1:nrow(OW)){
  iopt<-ifelse(OW$CP[i]=="c",1,-1)
  sum=0
  for (j in 1:nsim){
    Sigma2t<-(OW$sigma[i])^2
    Eps<-rnorm(1)*OW$sigma[i]

    sumSigma2t=0
    sumEps=0

    for (k in 1:OW$ttmDaysW[i]){
      Sigma2t= OW$omega[i] +OW$alpha[i]*(Eps-OW$lambda[i]*sqrt(Sigma2t))^2+OW$beta[i]*Sigma2t
      Eps <- rnorm(1)*sqrt(Sigma2t)

      sumEps=sumEps+Eps
      sumSigma2t = sumSigma2t + Sigma2t

    }
    Ft<-OW$Fut[i]*exp(-0.5*sumSigma2t+sumEps)
    payoff <- max(c(iopt * (Ft - OW$Strike[i]), 0))
    sum<-sum+payoff  
  } 
  OW$G[i] = exp(-OW$Wibor[i] * OW$ttm[i]) * sum / nsim
} 
```

我在我的问题上只找到了这个帮助：[Simulation of GARCH in R](https://stackoverflow.com/questions/9969962/simulation-of-garch-in-r)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:12:04.987

通常，索引数据帧（您经常这样做）需要很多时间。考虑将其向量化。特别是因为您正在计算所有这些 OW$something[i] 超过 2 亿次（因为所有嵌套的 for 循环），实际上它们只需要被调用 10,000 次（nsim 次）。看看这是否运行得更快。

```
nsim=10000
for (i in 1:nrow(OW)){
  iopt<-ifelse(OW$CP[i]=="c",1,-1)
  sum=0
  OWSigma <- OW$sigma[i]
  OWOmega <- OW$omega[i]
  OWAlpha <- OW$alpha[i]
  OWLambda <- OW$lambda[i]
  OWBeta <- OW$beta[i]
  OWFut <- OW$Fut[i]
  OWStrike <- OW$Strike[i]
  OWTtmDaysW <- OW$ttmDaysW[i]
  for (j in 1:nsim){
    Sigma2t<-(OWSigma)^2
    Eps<-rnorm(1)*OWSigma

    sumSigma2t=0
    sumEps=0

    for (k in 1:OWTtmDaysW){
      Sigma2t= OWOmega +OWAlpha*(Eps-OWLambda*sqrt(Sigma2t))^2+OWBeta*Sigma2t
      Eps <- rnorm(1)*sqrt(Sigma2t)

      sumEps=sumEps+Eps
      sumSigma2t = sumSigma2t + Sigma2t

    }
    Ft<-OWFutexp(-0.5*sumSigma2t+sumEps)
    payoff <- max(c(iopt * (Ft - OWStrike, 0))
    sum<-sum+payoff  
  } 
  OW$G[i] = exp(-OW$Wibor[i] * OW$ttm[i]) * sum / nsim
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:56:56.193

这是我的问题的矢量化解决方案！

```
#Monte Carlo Garch(1,1)
N=10000
system.time(for (i in 1:nrow(OW)){
  iopt<-ifelse(OW$CP[i]=="c",1,-1)
  h0<- (OW$sigma[i])^2
  omega <- OW$omega[i]
  alpha1 <- OW$alpha[i]
  lambda <- OW$lambda[i]
  beta1 <- OW$beta[i]
  Fu <- OW$Fut[i]
  Str <- OW$Strike[i]
  horizon <- OW$ttmDaysW[i]
  Wibor<-OW$Wibor[i]
  ttm<-OW$ttm[i]
  ret <- et <- ht <- matrix(NA, nc = horizon, nr = N)
  zt  <- matrix(rnorm(N * horizon, 0, 1), nc = horizon)
  hB<-matrix(rep(h0,N),nr=N)
  eB<-matrix(rnorm(N, 0, 1), nc=1) * sqrt(hB)
  Fut<-matrix(rep(Fu,N),nr=N)
  Strike<-matrix(rep(Str,N),nr=N)
  for(j in 1:horizon){
    ifelse(j>1,
           ht[, j ] <- omega + alpha1 * (et[, j-1]-lambda*sqrt(ht[, j-1])) ^ 2 + beta1 * ht[, j-1],
           ht[, j ] <- omega + alpha1 * (eB -lambda*sqrt(hB))^ 2 + beta1 * hB
    )
    et[, j]  <- zt[, j] * sqrt(ht[, j])
  }
  Ft<-Fut*exp(-0.5*rowSums(ht)+rowSums(et))
  payoff<-pmax(iopt * (Ft - Strike),0)
  OW$G[i] = exp(-Wibor *ttm) * sum(payoff) / N

}
) 
```

# c# - 如何在 vb.net 中使用 linq 对另一个列表中的列表进行排序

> ID：14835305
> 
> 赞同：1
> 
> 时间：2013-02-12T14:53:59.630
> 
> 标签：c#, asp.net, .net, vb.net

我有 2 个通用列表。

```
 Dim Item As New List(Of String)
  Dim Item2 As New List(Of Array) 
```

项目包含 4 个元素。

它们是 1\. 商品代码 2\. 描述 3\. BIN 4\. 价格

但是它们只是按顺序输入 例如

Item={5858545, 吹风机, A45, 50}

有很多 Item 并且 Item 2 包含 Items 的列表。例如 Item2= {{5858545, HairDryer, A45, 50},....}

现在我想根据 BIN 然后按项目代码对 Item2 进行排序

所以现在我的列表 Item2 将包含根据 BIN 然后按项目代码排序的 Item 元素。

如何使用 LINQ 或任何其他方式做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:57:32.660

您不应该将对象存储为数组或值列表。创建一个新类来表示您的项目。为其提供 BIN、名称等四个属性，然后创建该自定义类型的列表。

要排序列表，您可以使用`OrderBy`方法，然后使用`ThenBy`方法。如果你有一个自定义对象，它会读起来更好，因为它看起来像：

```
list.OrderBy(item => item.BIN).ThenBy(item => item.Code); 
```

如果你有数组/列表，而不是你需要做的更丑陋的选项：

```
list.OrderBy(item => item[0]).ThenBy(item => item[1]); 
```

请注意第一个示例与您的要求*完全一样。*“按 BIN 排序列表，然后按代码排序。” 第一次查看代码的人非常清楚*它*在做什么。

# java - Print Writer 用于将文件上传到服务器时会损坏文件

> ID：14835306
> 
> 赞同：0
> 
> 时间：2013-02-12T14:54:00.323
> 
> 标签：java, servlets, printwriter

晚上好，今天我在使用 Print Writer 将文件上传到服务器时遇到了一个奇怪的情况，文件被传输了，我尝试`FileOutPutStream`改用它并解决了问题，我的问题是为什么`PrintWriter`会出现这种奇怪的行为，这是我的代码用于上传文件并将其保存在服务器上：

```
public void doPost(HttpServletRequest request,HttpServletResponse response)throws IOException,ServletException{
int i;
if(request instanceof MultipartWrapper){

String DestinationPath="C:\\";
MultipartWrapper request1=(MultipartWrapper)request;
File f=request1.getFile("photo");
java.io.FileInputStream fis=new java.io.FileInputStream(f);
//PrintWriter out=new PrintWriter(DestinationPath+f.getName()); causes the problem mentioned above  
java.io.FileOutputStream out=new java.io.FileOutputStream(DestinationPath+f.getName());
while((i=fis.read())!=-1){
out.write(i);
}
fis.close();
out.close();

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:14:10.877

您需要了解 Writers 和 OutputStreams 之间的区别。 `PrintWriter.write(int)`正在写一个*字符*，而`FileOutputStream.write(int)`正在写一个*字节*。您不小心将字节转换为字符，这会损坏您的文件。一般来说，当只是复制流时，你想坚持字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:15:36.047

`PrintWriter`将使用默认编码创建一个 Writer，而 FileOutputStream 将简单地写出原始字节。如果您的原始内容和服务器端使用相同的编码，您将不会遇到写入字节和重新解释它们的问题。但是，当您使用 时，会使用`PrintWriter`默认系统编码，这可能会破坏您的数据。

# c++ - 跨平台语言环境表

> ID：14835307
> 
> 赞同：2
> 
> 时间：2013-02-12T14:54:00.837
> 
> 标签：c++, formatting, cross-platform, locale

我正在测试 C++11 提供的一些新`locale`东西，`std::put_money`以便习惯它们的使用。我在想，将标准库支持的所有国家/地区的大量打印为货币会很好：

```
const char *Locales[] =
{
    "English_Australia.1252",
    "en_EN",
    "fr_FR.UTF-8"
    / ...
    // lots of lots of worldwide locales
};

int main(int argc, char **argv)
{
    for (const char **Locale = std::begin(Locales); Locale != std::end(Locales); ++Locale)
    {
        std::stringstream ss;
        ss.imbue(std::locale(*Locale))

        std::cout << *Locale << ' '
                  << std::showbase << std::put_money(11223344556677889900) << '\n';
    }
} 
```

当意识到语言环境名称根本不是标准时，我感到震惊，对于我在 Windows 7 Professional (SP1)（西班牙语言环境机器）下的 Visual Studio 10.0，语言环境名称遵循以下格式`Language_Region.charsetID`，例如：`English_Australia.1252`在我的 Linux 机器中（Debian 4.2 .2) 使用 gcc 4.2.3 的语言环境遵循相同的格式，但带有两个字母`xx_XX.UTF-8`（例如`es_ES.UTF-8`），并且在 Ideone 上尝试代码时，似乎唯一接受的语言环境是`en_US.UTF-8`.

最令人沮丧的部分是尝试获得一个标准的、跨平台的受支持语言环境表，我在谷歌搜索中发现的最好的一个[是](http://docs.moodle.org/dev/Table_of_locales)列出 Windows 的语言环境及其在*no-Windows*中的等价物，但缺乏很多国家（如美国、危地马拉、墨西哥......）。

我尝试过的另一件事是逐步调试`std::locale`构造函数，希望能找到一段代码，说明哪个语言环境名称有效，哪个无效。我期待一个巨大的语言环境名称数组（如示例代码中的那个），但我被`std::locale`构造函数的复杂性吓坏了并逃跑了。

所以我的问题是：

*   您知道和使用的最好和最完整的跨平台语言环境表是哪一个？
*   如何知道正在运行的系统支持的语言环境？如何访问支持的语言环境列表？

额外问题：

*   为什么语言环境名称不标准（授予跨平台源代码）？
*   Ideone 使用哪种语言环境系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:57:10.343

在 UNIX-y 系统上，您可以通过运行获得语言环境列表`locale -a`，这也是`man setlocale`. 我认为 C 库甚至没有语言环境列表，因为它在运行时在`/usr/lib/locale`.

本质上，这意味着您无法在编译时知道语言环境列表，因为它是目标系统的运行时特性。

# asp.net - 设置 Textbox.text 时，带有 MaskedEditExtender 的文本框不显示值

> ID：14835308
> 
> 赞同：3
> 
> 时间：2013-02-12T14:54:00.900
> 
> 标签：asp.net, html, ajaxcontroltoolkit, maskededitextender

我正在尝试为具有 MaskedEditExtender 的文本框设置一个值。这是尝试过的。

```
<cc1:TextBox ID="txtLastContributionDate" runat="server" 
   CssClass="TextBox" Enabled="true" MaxLength="7" ></cc1:TextBox>
<cc2:maskededitextender ID="meLastContributionDate" runat="server" 
   MaskType="Date" targetcontrolid="txtLastContributionDate" mask="99/9999" 
   inputdirection="RightToLeft" acceptnegative="Left" /> 
```

在后面的代码中，我试图设置这样的值。

```
txtLastContributionDate.text = "09/2010" 
```

但它没有显示。

这就是我想要做的，我使用 MaskType = "Date" 但想要 mask = "99/9999"，就像 "MM/YYYY"。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T15:40:43.077

我进行了一些研究并更改了 MaskType = "None" 的值，还添加了 ClearMaskOnLostFocus = "False" 并且它的工作完美。

```
<cc2:maskededitextender ID="meLastContributionDate" runat="server" 
   MaskType="None" ClearMaskOnLostFocus="false" targetcontrolid="txtLastContributionDate" mask="99/9999" 
   inputdirection="RightToLeft" acceptnegative="Left" /> 
```

# asp.net-mvc-4 - 带有绝对路径的 ASP.NET MVC 包

> ID：14835311
> 
> 赞同：7
> 
> 时间：2013-02-12T14:54:07.257
> 
> 标签：asp.net-mvc-4, bundle, web-optimization

我在 IIS 上有一个虚拟目录，其中包含所有 javascript 和 css 文件。是否可以使用 Bundle 将这些文件包含到 ASP.NET MVC 应用程序中。

我已经尝试过这样的事情：

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include("/public/javascript/jquery-{version}.js")); 
```

但出现错误：

> 仅允许应用程序相对 URL (~/url)。:

/public/javascript 是 IIS 上的虚拟目录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T11:34:44.970

实际上 Bundle 类不支持绝对路径。我在[这里打开了一个功能请求。](https://aspnetoptimization.codeplex.com/workitem/82)

我已经使用自定义 VirtualPathProvider 和控制器解决了这个问题。但它是非常脆弱的实现。您可以根据需要进行修改。

```
public class ModuleScriptProvider : VirtualPathProvider
{
    public static IBundleModule GetModulePath(string moduleName)
    {
       //return the absolute or relative path.
    }

    public static void ParseVirtualPath(string virtualPath, out string moduleName, out string path)
    {
        var parts = virtualPath.Replace("~/", "").Split('/').Where(p => !string.IsNullOrEmpty(p)).Skip(1).ToList();
        if (parts.Count < 2 || !virtualPath.EndsWith(".js"))
            throw new FileNotFoundException("Script file doesn't found in the module script directory", virtualPath);
        moduleName = parts.First(); // ~/ModuleScript/ModuleName/....
        path = string.Join(@"\", parts.Skip(1)); 
    }

    public static string MapPathMethod(string virtualPath)
    {
        if (IsModuleScriptPath(virtualPath))
        {
            string moduleName;
            string path;
            ParseVirtualPath(virtualPath, out moduleName, out path);
            var moduleDir = GetModulePath(moduleName); //absolute path
            if (!moduleDir.EndsWith(@"\"))
                moduleDir += @"\";
            return moduleDir + path;
        }
        return HttpContext.Current.Server.MapPath(virtualPath);
    }

    public static bool IsModuleScriptPath(string virtualPath)
    {
        String checkPath = VirtualPathUtility.ToAppRelative(virtualPath);

        return checkPath.StartsWith("~/ModuleScript/", StringComparison.InvariantCultureIgnoreCase);
    }

    public override bool FileExists(string virtualPath)
    {
        return (IsModuleScriptPath(virtualPath) || base.FileExists(virtualPath));
    }
    public override VirtualFile GetFile(string virtualPath)
    {
        if (IsModuleScriptPath(virtualPath))
            return new ModuleScriptVirtualFile(virtualPath);
        return base.GetFile(virtualPath);
    }

    public override CacheDependency GetCacheDependency(string virtualPath, System.Collections.IEnumerable virtualPathDependencies, DateTime utcStart)
    {
        if (IsModuleScriptPath(virtualPath))
        {
            string moduleName;
            string path;
            ParseVirtualPath(virtualPath, out moduleName, out path);
            var bundleModulePath = GetModulePath(moduleName);
            return new CacheDependency(bundleModulePath);
        }

        return base.GetCacheDependency(virtualPath, virtualPathDependencies, utcStart);
    }
    public override string CombineVirtualPaths(string basePath, string relativePath)
    {
        return base.CombineVirtualPaths(basePath, relativePath);
    }
}

class ModuleScriptVirtualFile : VirtualFile
{
    private readonly string _path;
    private readonly string _moduleName;
    public ModuleScriptVirtualFile(string virtualPath)
        : base(virtualPath)
    {
        ModuleScriptProvider.ParseVirtualPath(virtualPath, out _moduleName, out _path);
    }
    public override Stream Open()
    {
        var moduleDir = ModuleScriptProvider.GetModulePath(_moduleName);
        if (!moduleDir.EndsWith(@"\"))
            moduleDir += @"\";

        return new FileStream(moduleDir + _path, FileMode.Open);
    }
} 
```

控制器：

```
public class ModuleScriptController : Controller
{
    public FileStreamResult GetFile(string path)
    {
        return new FileStreamResult(new ModuleScriptProvider().GetFile("~/ModuleScript/" + path).Open(), "text/javascript");
    }
} 
```

在 Global.asax Application_Start 方法中：

```
HostingEnvironment.RegisterVirtualPathProvider(new ModuleScriptProvider());
BundleTable.EnableOptimizations = true;
BundleTable.MapPathMethod = ModuleScriptProvider.MapPathMethod; 
```

神速。

# python - 从线程类调用时，Python 函数的行为不符合预期

> ID：14835313
> 
> 赞同：2
> 
> 时间：2013-02-12T14:54:13.097
> 
> 标签：python, python-2.7, thread-safety, minecraft, python-multithreading

我正在尝试使用适用于 Python 2.7 的新 Minecraft Pi Edition API 编写游戏。当我意识到两段代码相互阻塞时，我几乎完成了游戏。如果我将 A 部分放在首位，它将阻止 B 部分运行，直到 A 部分完成。如果我把 B 部分放在首位，它会运行得很慢。我决定需要将这两个部分分成两个单独的线程。'

这是仍然存在问题的代码的缩减版本。我注意到，如果我注释掉`ClassName.start()`两个类之一的行，另一个类将运行而不会出错。

```
import mcpi.minecraft as minecraft
import threading

mc = minecraft.Minecraft.create()

class BlockCheckThread(threading.Thread):
    def run(self):
        while True:
            event = mc.events.pollBlockHits()

class WinningCheckThread(threading.Thread):
    def run(self):
        while True:
            blockTest = mc.getBlock(1, 1, 1,) == 50

def main():
    WinningCheckThread().start() # If I comment out either of these .start() lines
    BlockCheckThread().start()   # the other class executes perfectly. 
```

运行它的错误如下：

```
Exception in thread Thread-2:
...
TypeError: Hit() takes exactly 5 arguments (1 given)

Exception in thread Thread-1:
...
ValueError: invalid literal for int() with base 10: ' 
```

要运行代码，您需要一个 Raspberry Pi，并且需要从[此处](http://pi.minecraft.net/)`api/python/`下载 Minecraft，然后您必须从目录中运行它。（即它必须与`mcpi`它正在导入的模块位于同一文件夹中。）

这是我第一次尝试线程，所以不要对我的代码笑得太厉害。我很想知道为什么这段代码不起作用，以及我应该做些什么来修复它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T15:23:04.860

您正在共享该`Minecraft`对象，它不是线程安全的。该`Minecraft`对象只是一个客户端库，用于连接以命令启动的 Minecraft 服务器`minecraft-pi`。您需要`Minecraft`为每个线程创建一个对象，它应该没问题：

```
import mcpi.minecraft as minecraft
import threading

class BlockCheckThread(threading.Thread):
    def run(self):
        mc = minecraft.Minecraft.create()
        while True:
            event = mc.events.pollBlockHits()

class WinningCheckThread(threading.Thread):
    def run(self):
        mc = minecraft.Minecraft.create()
        while True:
            blockTest = mc.getBlock(1, 1, 1,) == 50

def main():
    WinningCheckThread().start() 
    BlockCheckThread().start() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T15:11:57.420

Pi 版的 Python Minecraft 客户端不是线程安全的。发生的情况是两个线程同时发送和接收数据。当响应混淆时（即`BlockCheckThread`获取对请求的响应，`WinningCheckThread`反之亦然），消息格式与线程期望得到的不匹配。

您可以简单地[锁定](http://docs.python.org/2/library/threading.html#lock-objects)每次调用 Minecraft 客户端，以确保您一次只发送和接收一个项目。

我不知道 Minecraft 服务器是否支持它，但你也可以[发送多个请求](http://en.wikipedia.org/wiki/Pipelining)。为此，您需要一个管理器类来跟踪未完成请求的顺序。

# python - 了解 Elastic Transcoder 的 boto 文档

> ID：14835315
> 
> 赞同：1
> 
> 时间：2013-02-12T14:54:16.330
> 
> 标签：python, amazon-web-services, boto

我正在尝试在 Elastic Transcoder 中创建自己的管道。我正在使用 boto 标准函数 create_pipeline(name, input_bucket, output_bucket, role, notifications)。你能告诉我通知（结构）应该是什么样子吗？到目前为止，我有这样的东西： create_pipeline('test','test_start', 'test_end', 'arn:aws:iam::789823056103:role/Elastic_Transcoder_Default_Role', ... )

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:50:43.313

它应该是字典中包含 4 个键的字典（我将推送一个使用 dict 类型更新结构类型的更改）。因此，如果您不想要通知，只需为键指定空值：

{'进行中'：''，'完成'：''，'警告'：''，'错误'：''}

# eclipse - 意外的 SVN 错误 svn: E160013 因为 404 错误

> ID：14835318
> 
> 赞同：4
> 
> 时间：2013-02-12T14:54:40.173
> 
> 标签：eclipse, svn

我正在运行我自己的 SVN 存储库`Apache2/mod_dav`

直到今天它工作得很好。

我将一个名为的 Java 类移动`AbstractRepository`到一个子目录中，所以现在该文件是“要删除的”。

我尝试提交，但出现以下错误

```
svn: E160013: '/svnroot/repo/!svn/bc/8/src/main/java/path/to/dao/AbstractRepository.java' path not found: 404 Not Found (https://svn.host.org) 
```

我尝试`Update`从 Eclipse 或`Cleanup`. `Team Synchronization`视图仍显示`AbstractRepository.java`减号箭头。没有什么。看起来服务器不存在该文件。但它确实存在！我可以从我的浏览器查看它！

我目前是这个项目的唯一开发人员（使用 SVN 跟踪更改并保留历史记录）

如何修复错误？

# javascript - jQuery If-Else 代码段的 JavaScript 简写

> ID：14835325
> 
> 赞同：0
> 
> 时间：2013-02-12T14:55:10.657
> 
> 标签：javascript, jquery, shorthand

我有这段代码：

```
<script type="text/javascript">
$(window).load(function() {
    if(!$.browser.msie){ 
        $('#myDiv').animate({opacity: 1}, 300);
    } else if ($.browser.msie) {
        $('#myDiv').css({opacity:1});
    }
}); 
</script> 
```

我怎么能用`" : something ? somethingElse "`语法说同样的话？

提前致谢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T14:59:05.070

但是，不确定我是否得到了问题：

```
$.browser.msie ? $('#myDiv').css({opacity: 1}) : $('#myDiv').animate({opacity: 1}, 300); 
```

另外，我不再是 IE 专家，但我想知道您是否可以执行以下操作：

```
$('#myDiv').animate({opacity: 1}, $.browser.msie ? 0 : 300); 
```

这应该立即应用，并使用外部变量使其更具可读性：

```
var speed = $.browser.msie ? 0 : 300;
$('#myDiv').animate({opacity: 1}, speed); 
```

或类似的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T14:58:11.420

你可以这样做：

```
$(window).load(function() {
    $.browser.msie ? $('#myDiv').css({opacity:1}); : $('#myDiv').animate({opacity: 1}, 300);
}); 
```

我不*推荐*它至少有两个原因（浏览器嗅探和可读性），但你*可以*.

另一种方式：

```
$(window).load(function() {
    $('#myDiv')[$.browser.msie ? 'css' : 'animate']({opacity:1}, $.browser.msie ? undefined : 300);
}); 
```

……但这更糟。;-)

# php - 在表中的所有行中自动完成

> ID：14835329
> 
> 赞同：0
> 
> 时间：2013-02-12T14:55:22.457
> 
> 标签：php, javascript, html, autocomplete

我能够获得表格第一行中值的自动完成列表，但它没有填充到下一行。我想填充自动完成以填充由 while 循环创建的所有行。任何帮助建议都非常感谢。

我想使用创建一个函数（onkeyup）来调用自动完成并嵌入到我的输入字段中以使其适用于所有行。

我了解自动完成绑定到元素的输入 id 并且它正在更改为在第一行之后生成的下一行，

如何处理这种情况？

```
function getPath($id)
{
    echo "<table border='1px' width=650>";
    echo "<tr>";
    echo "<th width=120>Designation</th>";
    echo "</tr>";     
    echo "<br>";
    $sql1 = mysql_query("select * from t_path where f__id=$id");

    while($res  = mysql_fetch_array($sql1))
    {

        echo "<tr>";
        echo "<td width=120><input type='text' name='change_desig' id = 'Designation' value='".$res['f_designation']."' onblur=updateDesigninDb(this.value,'".$res['f_start_dt']."',".$id.")></td>";
        echo "</tr>";

    }
    echo "</table>";
}

getPath($id);

?>

<!--Script to update data in DB ----------------------------------->
 <script type="text/javascript">
 function updateDesigninDb(designation)
  {
    var baseurl = "/updateDB.php";
     $.ajax({
        type: "POST",
        dataType: "html",
        url: baseurl,
        data: "designation="+designation                                            
        ,
        success: function(userDetails){

        }
          });

       }
    </script>

   <SCRIPT LANGUAGE='javascript'>

       var designation=[
        <?php
         $load = mysql_query("select f_designation from t_designation_master;");
         while($arr = mysql_fetch_array($load))
         {

           echo "'".$arr[0]."',";
         }
        ?>

     ].sort();

          AutoComplete_Create('Designation',designation);
              </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:57:11.907

您应该在所有输入上使用一个公共类而不是相同的 id。

就像是：

```
echo "<td width=120><input type='text' class='autocomplete_input' value='".$res['f_designation']."' onblur=updateDesigninDb(this.value,'".$res['f_start_dt']."',".$id.")></td>"; 
```

如果您在每个输入上都需要 id，我建议添加一个名称 + 自动增量数字作为 id。

如果您使用的是 Jquery，您可以像这样将自动完成应用于所有这些：

```
$(".autocomplete_input").autocomplete({source: url}); //url of the script that returns all the autocomplete values. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:12:07.327

不确定，但可能是因为您在 while 循环中的所有输入都具有相同的 id ="Designation"... 只能有一个具有特定 id 的元素，它们必须是唯一的。也许在 while 循环的开头添加一个索引 $i =0，在循环结束时增加它 $i++ 并更改 id ="Designation".$ i... 或者通过类名添加您的自动完成？

# excel - Excel电子表格中的字母顺序列表

> ID：14835332
> 
> 赞同：0
> 
> 时间：2013-02-12T14:55:24.840
> 
> 标签：excel, series, alphabet

我正在尝试创建以下公式

`sum(a2:h2), sum(i2:p2),sum(q2:x2);sum(y2:af2)`在相邻单元格中，在 MS excel 2010 中。

我可以使用 MS excel 中的 char 和 code 函数让该系列工作到第三学期。例如“i”来自`=CHAR(2*CODE(B3)-CODE(B2)+1)`假设单元格`B2`有“a”和`B3`“h”。

但是当列表用完字母表时，这种方法就会停止 - 使用相同的公式会导致非字母字符。

欢迎任何帮助或朝正确方向轻推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:13:09.523

获得正确结果的一种选择是在 A4 中使用此公式复制下来

`=SUM(OFFSET($A$2:$H$2,0,(ROWS(A$4:A4)-1)*8))`

或者如果您想跨使用此版本进行复制，也从 A4 开始

`=SUM(OFFSET($A$2:$H$2,0,(COLUMNS($A4:A4)-1)*8))`

根据起始单元格更改 A4 部分

当然，这并没有明确告诉您正在对哪个单元格求和，但您会得到正确的结果.....

# android - ActionBar - Android 中条形图显示的白色背景颜色不正确

> ID：14835333
> 
> 赞同：1
> 
> 时间：2013-02-12T14:55:31.533
> 
> 标签：android, tabs, android-actionbar

我附上了一张图片来描述我的问题。我不知道为什么当它们的背景是绿色时，条形图的末端有一块白色的。如果有人可以帮助我。我正在使用本机 ActionBar，但我正在自定义其选项卡...我一直在尝试更改栏的宽度、背景颜色等，但找不到任何解决方案。此图像是使用带有 Android 4.0.4 的三星 Galaxy Tab 发生的：

![在此处输入图像描述](../Images/d7bddc81266e199fcd11ab42e6d5d597.png)

一些代码是：

```
 ActionBar aBar = getActionBar();
    aBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    aBar.setDisplayShowTitleEnabled(false);
    aBar.setBackgroundDrawable(getResources().getDrawable(R.color.color_action_bar));
    aBar.setDisplayUseLogoEnabled(true);

    mTabManager = new TabletTabManager(this);

    ((TabletTabManager)mTabManager).addTab(
        aBar.newTab().setCustomView(createCustomTab(R.drawable.my_cameras, R.string.my_cameras)), 
        CamerasFragment.class, 
        CamerasFragment.getArguments(CamerasFragment.Mode.MY_CAMERAS)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:50:24.547

问题是标签的宽度。我没有为选项卡设置任何宽度，只是我使用了 WRAP_CONTENT 所以 tabview 采用了文本最长的选项卡的大小。这样，除了最大的选项卡之外，一些选项卡在选项卡指示器中显示为白色背景。

现在，我已经改变了这一点，并且我为所有这些都写了相同的宽度。

当您使用操作栏中的选项卡时，请注意宽度，因为当您将设备纵向转动时，您可能会遇到很多问题，尤其是在 7 英寸的新平板电脑中。

# c# - ValidationAttribute 检查唯一性

> ID：14835334
> 
> 赞同：0
> 
> 时间：2013-02-12T14:55:36.600
> 
> 标签：c#, asp.net-mvc

使用此代码，我检查用户名是否有效：

```
public class UniqueUsernameAttribute : ValidationAttribute
{
    public override bool IsValid(object value)
    {
        IRepository<User> userRepository = new EFRepository<User>();

        User user = userRepository.GetAll().FirstOrDefault(x => x.Name.Equals((string) value));

        return user == null;
    }
} 
```

这在添加新用户时效果很好。但是在编辑用户时，数据库中已经存在一个现有的用户，因此此代码不再起作用（因为我检查是否有 0 个条目，而 1 将已经存在）。有什么方法可以添加额外的参数或其他东西吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:55:49.143

您可以尝试这篇 CodeProject 文章的建议： http: [//www.codeproject.com/Articles/260177/Custom-Validation-Attribute-in-ASP-NET-MVC3](http://www.codeproject.com/Articles/260177/Custom-Validation-Attribute-in-ASP-NET-MVC3)

覆盖另一个 IsValid 将为您提供包含其他数据的选项，包括您是否真的在寻找新的非重复用户，或者您是否正在寻找现有用户。

```
using System.ComponentModel.DataAnnotations;

public class testattribute : ValidationAttribute    
{
    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        return base.IsValid(value, validationContext);
    }
} 
```

# android - 如何以编程方式关闭/取消android中的状态栏通知

> ID：14835335
> 
> 赞同：35
> 
> 时间：2013-02-12T14:55:37.547
> 
> 标签：android, android-notifications

我已经使用下面给出的带有特定 id 的代码以编程方式在 android 中创建了一个状态栏通知

```
 Notification notification;
    public static NotificationManager myNotificationManager;
    public static final int NOTIFICATION_ID = 1;

private static void createStatusBarNotification(Context context,CharSequence NotificationTicket, CharSequence NotificationTitle,CharSequence NotificationContent, int icon) {
            myNotificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
            long when = System.currentTimeMillis();
            notification = new Notification(icon, NotificationTicket, when);
            Intent notificationIntent = new Intent(context, MyActivity.class);
            PendingIntent contentIntent = PendingIntent.getActivity(context, 0,notificationIntent, 0);
            notification.setLatestEventInfo(context, NotificationTitle,NotificationContent, contentIntent);
            notification.flags |= Notification.FLAG_ONGOING_EVENT;
            myNotificationManager.notify(NOTIFICATION_ID, notification);

        } 
```

现在我想要的是以编程方式在单击应用程序中的按钮时删除此通知。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-12T14:57:43.370

你可以使用这个：

```
public void clearNotification() {
    NotificationManager notificationManager = (NotificationManager) mContext
            .getSystemService(Context.NOTIFICATION_SERVICE);
    notificationManager.cancel(NOTIFICATION_ID);
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-02-18T12:17:02.993

取消所有

`myNotificationManager.cancelAll();`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-12T14:57:15.400

使用与通知时相同的 ID

```
 myNotificationManager.cancel(NOTIFICATION_ID) 
```

# c# - 如何将 byte[] 存储在数据库的文本字段中并检索它

> ID：14835338
> 
> 赞同：2
> 
> 时间：2013-02-12T14:55:52.903
> 
> 标签：c#, asp.net, sql-server, telerik, bytearray

我有一个大问题。
我上传了图片并得到了`byte[]`.
在数据库中，我有`NVARCHAR(MAX)`字段，无法更改。
无论我做什么并保存在数据库中，我以后都无法将其作为图像获取。
我试过 .ToString() 不起作用。
我试过这个：

```
private byte[] GetBytes(string str)
        {
            byte[] bytes = new byte[str.Length * sizeof(char)];
            System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
            return bytes;
        }
static string GetString(byte[] bytes)
        {
            char[] chars = new char[bytes.Length / sizeof(char)];
            System.Buffer.BlockCopy(bytes, 0, chars, 0, bytes.Length);
            return new string(chars);
        } 
```

当我试图把它放进去时，`RadBinaryImage`我什么也得不到。
这是错误：

```
 The provided binary data may not be valid image or may contains unknown header 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T15:01:03.743

您可能想要对其[进行编码](http://en.wikipedia.org/wiki/Binary-to-text_encoding)，而不是直接转换。

我过去曾成功使用过 Radix-64 编码。有一个 C# 方法，但我没有使用它：

```
Convert.ToBase64String(byteArrayForImage); 
```

[http://msdn.microsoft.com/en-us/library/dhx0d524.aspx](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)

然后您可以使用反向转换来获取您的字节数组：

```
Convert.FromBase64String(stringFromDB) 
```

# apache-poi - 使用 Apache POI HSSFListener 如何识别日期类型

> ID：14835339
> 
> 赞同：0
> 
> 时间：2013-02-12T14:55:55.280
> 
> 标签：apache-poi, sax

由于要处理数百万条记录，我必须使用此处给出的技术来处理 SAX 解析。 [http://poi.apache.org/spreadsheet/how-to.html#event_api](http://poi.apache.org/spreadsheet/how-to.html#event_api)。但是日期类型转换为数字。使用HSSFListener时如何区分Date和Number？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:23:51.607

Excel 文件格式将所有日期存储为具有特殊格式规则的数字。不是 HSSF 正在转换它，您得到的正是 Excel 存储在文件中的内容！

如果您想要 .xls 文件的 HSSF 事件处理的良好示例，我建议您查看[Apache POI](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/examples/hssf/eventusermodel/XLS2CSVmra.java)的[XLS2CSVmra 和 Apache Tika的 ExcelExtractor](http://svn.apache.org/repos/asf/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ExcelExtractor.java)

两者都显示了您想要做的许多常见事情，包括检测日期单元格并适当地格式化它们以进行显示

# java - 文件操作在 C++ 中如何工作，因为它们与 Java 不同？

> ID：14835341
> 
> 赞同：0
> 
> 时间：2013-02-12T14:56:14.793
> 
> 标签：java, c++, file, methods

我是一名 Java 开发人员，因此在尝试对文件进行操作时，您会实例化 File 类的一个对象。默认情况下，该对象将具有诸如`getAbsoluteFile()`.

但是，在 C++ 中，根据[this](http://www.cplusplus.com/reference/cstdio/FILE/)，您可以使用在 stdio.h 头文件中定义的称为 FILE 的类型。因为它不是一个对象而是一个类型，所以它没有方法，那么如何操作它——特别是如何重命名一个文件？

如果对象与 Java 不同（从 File 场景判断，它似乎不同），那么拥有一个在 C++ 中具有方法的对象的等价物是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:00:42.187

`FILE`来自 C 标准库并包含在 C++ 中以实现向后兼容性。C 不提供对 OOP 的支持，因此它根本没有方法。您可以`FILE`使用自由函数对 s 进行操作。

如果您查看链接站点上的侧边栏，您会从`cstdio`标题中看到功能列表。大多数名称以 f 开头的函数都将 a`FILE*`作为第一个参数。要重命名文件，您可以使用[rename](http://www.cplusplus.com/reference/cstdio/rename/)；它不需要 a `FILE*`，它需要两条路径（as `char*`）。

执行文件 I/O 的更多 C++ 方式是使用[流](http://www.cplusplus.com/reference/fstream/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T15:11:23.973

你在比较两个不同的东西。

在 Java 中，[文件](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)是描述文件系统中事物的对象，并且要更改/添加文件中的数据，您必须从文件中创建一个流。

在 C 中 FILE 是打开文件的句柄，用于更改文件中的数据。在 C++ 中，你真的应该使用[IOStreams](http://en.cppreference.com/w/cpp/io)。C 和 C++ 标准没有 Java 文件的等价物，最接近的等价物是[Boost Filesystem 库](http://www.boost.org/doc/libs/1_53_0/libs/filesystem/doc/index.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:59:11.840

您不重命名文件，而是重命名文件。有一个名为`rename`重命名文件的函数。它不对对象进行操作，因为 C++ 从没有对象的 C 继承了它。它只是一个以旧名称和新名称作为参数的自由函数。

```
#include <stdio.h>
rename("oldFileName.txt", "newFileName.txt"); 
```

# c# - C# 泛型 - 通过使包装类泛型获得什么？

> ID：14835342
> 
> 赞同：12
> 
> 时间：2013-02-12T14:56:14.563
> 
> 标签：c#, .net, generics

考虑这个通用类：

```
public class Request<TOperation> 
    where TOperation : IOperation
{
    private TOperation _operation { get; set; }

    public string Method { get { return _operation.Method; } }

    public Request(TOperation operation)
    {
        _operation = operation;
    }
} 
```

与下面的非通用版本相比，上面的通用版本有什么真正的好处？

```
public class Request
{
    private IOperation _operation { get; set; }

    public string Method { get { return _operation.Method; } }

    public Request(IOperation operation)
    {
        _operation = operation;
    }
} 
```

`IOperation`界面是：

```
public interface IOperation
{
    string Method { get; }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-12T15:00:08.963

对于泛型版本，方法可以采用 type 的参数`Request<FooOperation>`。传递一个实例`Request<BarOperation>`是无效的。
因此，通用版本使方法能够确保它们获得正确操作的请求。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-12T15:25:54.273

除了所有其他好的答案之外，我还要补充一点*，*如果您碰巧`Request<T>`使用 a构造一个`T`实现`IOperation`. 每次都是非通用版本框。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-12T15:09:49.060

在您上面给出的情况下，很难说您会得到什么好处，这取决于在您的代码库中如何使用它，但请考虑以下事项：

```
public class Foo<T> 
    where T : IComparable
{
    private T _inner { get; set; }

    public Foo(T original)
    {
        _inner = original;
    }

    public bool IsGreaterThan<T>(T comp)
    {
        return _inner.CompareTo(comp) > 0;
    }
} 
```

反对

```
public class Foo             
{
    private IComparable  _inner { get; set; }

    public Foo(IComparable original)
    {
        _inner = original;
    }

    public bool IsGreaterThan(IComparable  comp)
    {
        return _inner.CompareTo(comp) > 0;
    }
} 
```

如果您有 a `Foo<int>`，您可能不想将其与 a 进行比较`Foo<string>`，但无法使用非通用版本将其锁定。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-12T15:02:32.117

例如，如果你有

```
public class SubOperation : IOperation 
{
    // implementation ...
} 
```

和

```
public class OtherSubOperation : IOperation 
{
    // implementation ...
} 
```

您可以确保 Request 永远不会包含 OtherSubOperation 项，但它们都是有效的 IOperations。

# c# - ASP.Net 的富文本验证器

> ID：14835343
> 
> 赞同：0
> 
> 时间：2013-02-12T14:56:17.747
> 
> 标签：c#, telerik, richtextbox

所以我有一个与这个问题非常相似的问题：[使用富文本编辑器时的输入验证](https://stackoverflow.com/questions/1521203/input-validation-when-using-a-rich-text-editor)

但这与 XSS 脚本无关。我们有一个在 ASP.Net 上开发的内部工具，它使用 Telerik 富文本编辑器。用户应该只能使用一些可用的格式（例如粗体、斜体、列表、特殊字符）。

我的问题是，有时用户会从未知来源（Word、RTF、网页）复制/粘贴文本，而且粘贴的所有原始数据都是不正确的（缺少列表的最后一个结束标签等）。当我尝试使用这些数据时，它会导致很多问题。

我希望能够验证数据是否正确。我想确保只能使用我们允许的标签，并且我们没有任何缺少的结束标签。

XSS 不是问题，因为我们正在开发一个可供受信任用户使用的内部应用程序。

我想到了 Dtd，但我不确定这是否可以与富文本格式一起使用，因为它不是纯 XML ......

有没有人已经使用过一些东西并弄清楚了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:44:28.780

所以我终于找到了一种方法！

您可以使用以下方式混合使用 Telerik 剥离：StripFormattingOptions="Css, Font, Span, ConvertWordLists"

并在 HTML 上使用一些 javascript 粘贴 OnClientPasteHtml="onClientPasteHtml"。

这是删除不需要的标签的代码

```
function onClientPasteHtml(editor, args) {
        var commandName = args.get_commandName();
        var value = args.get_value();

        if (commandName == "Paste") {
            //create a div, set the html content to it,
            // remove style attribute, remove non pertinent tags.
            var div = document.createElement("DIV");
            Telerik.Web.UI.Editor.Utils.setElementInnerHtml(div, value);

            var nostyle = $(div)[0];

            // replace unwanted tags
            var strippedHtml = $(nostyle).html().replace(/<\/?([a-z]+)[^>]*>/gi, function (match, tag) {

                // any of these is valid
                tag = tag.toLowerCase();
                return (tag === "em" || tag === "ol" ||
                        tag === "sub" || tag === "sup" || tag === "ul" || tag === "li"|| tag === "br" || tag === "i") ? match : "";
            });

            // attributes gone
            Telerik.Web.UI.Editor.Utils.setElementInnerHtml(div, strippedHtml);
            removeAttributes($(div)[0]);

            strippedHtml = $(div).html();

            args.set_value(strippedHtml);
        }

    }

    function removeAttributes(el) {

        while (el.attributes.length > 0) {
            el.removeAttribute(el.attributes[0].name);
        }

        if (el.childNodes.length > 0) {
            for (var child in el.childNodes) {
                if (el.childNodes[child].nodeType == 1)
                    removeAttributes(el.childNodes[child]);
            }
        }
    } 
```

我们还添加了一个基于 dtd XHTML 验证的验证器，它将告诉我们复制剪切是否没有忘记任何标记（例如列表的开始和结束标记）。为此，我们使用了 xhtml1-transitional.dtd ：

```
protected bool ValidateMaisRespProjectText()
    {
        string html = txtJobMainResp.GetHtml(EditorStripHtmlOptions.None);

        XHtmlErrors = new List<string>();

        XmlReaderSettings settings = new XmlReaderSettings();
        settings.ProhibitDtd = false;
        settings.ValidationType = ValidationType.DTD;
        settings.ValidationEventHandler += new ValidationEventHandler(ValidationEventHandler);

        // Create a local reference for validation11\.            
        string xhtmlDtdFile = HttpContext.Current.Server.MapPath("DTD/xhtml1-transitional.dtd");
        string newDoctype = string.Format("<!DOCTYPE html SYSTEM \"file://{0}\">", xhtmlDtdFile);

        // add doc type validation + root element to make it valid.
        html = newDoctype + Environment.NewLine + "<html><head><title>title</title></head><body><div>" + html + "</div></body></html>";

        XmlReader reader = XmlReader.Create(new System.IO.StringReader(html), settings);
        try
        {
            while (reader.Read())
            {
            }
        }
        catch (Exception ex)
        {
            XHtmlErrors.Add(ex.Message);
            txtJobMainRespValidator1.IsValid = false;
            txtJobMainRespValidator1.Text = "* The information entered has invalid HTML content. (DEBUG: " + XHtmlErrors.FirstOrDefault() + ")";
        }
        finally
        {
            if (reader != null)
                reader.Close();

        }
        if (XHtmlErrors.Count != 0)
        {
            txtJobMainRespValidator1.IsValid = false;
            txtJobMainRespValidator1.Text = "* The information entered has invalid HTML content. (DEBUG: " + XHtmlErrors.FirstOrDefault() + ")";
        }
        return XHtmlErrors.Count == 0;
    }

private void ValidationEventHandler(object sender, ValidationEventArgs e)
    {
        XHtmlErrors.Add(string.Format("({0}) {1} - [Line: {2}, Char: {3}]", e.Severity, e.Message, e.Exception.LineNumber, e.Exception.LinePosition));
    } 
```

验证会将格式错误添加到列表中。然后你只需要在你的页面中显示你想要的消息。

希望这会有所帮助（如果您发现该解决方案的一些改进，请不要犹豫告诉我:)）

# java - 从 db 加载选中的复选框

> ID：14835347
> 
> 赞同：1
> 
> 时间：2013-02-12T14:56:42.670
> 
> 标签：java, javascript, jsp, checkbox

我有一个 jsp 页面，其中包含应用程序名称列表以及每个应用程序的复选框，并且还有保存按钮。

我需要实现的是，我需要将这些检查值保存在 db 中，并且在再次加载 jsp 页面时，我需要将所有经过仔细检查的应用程序都进行检查，其余的不进行检查。

有没有办法在显示所有应用程序时获取存储的检查值并选中复选框。

下面是我的带有复选框的应用程序列表的详细信息

☑ Java
☑ Python
☑ C
☐ C++
☐ Rails
☐ ASP

在这个列表中，我只选择了前三个项目，这些项目与我`userid`的数据库一起存储，如下所示

anand -> Java
anand -> Python
anand -> C

现在再次加载此应用程序页面时，应选中 db 中的这三个项目，而其他项目应保持未选中状态。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:01:45.913

要访问数据库，网络上有大量教程：[https ://stackoverflow.com/questions/9630275/how-to-get-data-from-a-database-to-a-jsp-page-in-java](https://stackoverflow.com/questions/9630275/how-to-get-data-from-a-database-to-a-jsp-page-in-java)

当您将选中的值存储在变量中时（假设每个复选框一个），您只需将此代码添加到您的 html 中：

```
boolean java =//contains the value from the db
String javaChecked="";
if(java==true){
    javaChecked="checked='checked'";
} 
```

然后在你的html中：

```
<input type="checkbox" id="java" <%= javaChecked %>> 
```

# ios - 更新 UILabel 文本动画

> ID：14835350
> 
> 赞同：0
> 
> 时间：2013-02-12T14:56:59.300
> 
> 标签：ios, objective-c, animation, uilabel

我想为向上计算的文本中的数字计数设置动画。文本位于类似的 UILabel`You have driven for 0.0km`中，需要更改为`You have driven for 143.6km`带有计数动画。有什么办法可以更新动画吗？

***编辑*** 这是我当前的一些代码，关于我已经拥有的其他动画：

```
 if (animated)
        {
            [UIView beginAnimations:@"scaleAnimation" context:nil];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            [UIView setAnimationDuration:animationDuration];
        }

        [...]

        // Amount pointer
        float xForRedBar = redBarFrame.size.width + redBarFrame.origin.x;

        CGRect pointerFrame = cell.amountBarPointer.frame;
        pointerFrame.origin.x = (xForRedBar - (pointerFrame.size.width/2));

        if (pointerFrame.origin.x < 12)
            pointerFrame.origin.x = 12;

        if (pointerFrame.origin.x >= (308 - (pointerFrame.size.width/2)))
            pointerFrame.origin.x = 308 - pointerFrame.size.width;

        [cell.amountBarPointer setFrame:pointerFrame];

        // Amount bar
        CGRect amountBarFrame = cell.amountBar.frame;
        amountBarFrame.origin.x = 9+(((302 - amountBarFrame.size.width)/100)*self.procentCompleted);

        [cell.amountBar setFrame:amountBarFrame];

        // Amount info text
        CGRect amountInfoFrame = cell.amountInfo.frame;
        amountInfoFrame.origin.x = amountBarFrame.origin.x + 2;

        [cell.amountInfo setFrame:amountInfoFrame];

        // Amount text
        [cell.amountInfo setText:[NSString stringWithFormat:NSLocalizedString(@"You have driven for %@km", nil), self.userAmount]];

        [...]

        if (self.procentCompleted == 0)
        {
            [cell.amountBar setAlpha:0];
            [cell.amountBarPointer setAlpha:0];
            [cell.amountInfo setAlpha:0];
        }
        else {
            [cell.amountBar setAlpha:1];
            [cell.amountBarPointer setAlpha:1];
            [cell.amountInfo setAlpha:1];
        }

        if (animated)
        {
            [UIView commitAnimations];
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:40:39.263

当然，您可以将其更新为“动画”，但您必须使用重复计时器，并在每次调用计时器的选择器时将一个（或您想要的任何间隔）添加到计数中。包括对最终值的测试，并在您到达那里时使计时器无效。

**编辑后：**

如果您希望计数的速度在最后减慢，我不会使用计时器，我会使用 performSelector:withObject:afterDelay:。为了让它重复，你可以从它的选择器中调用这个方法。您需要进行一些测试，看看您是否接近计数结束，然后在每次通过时增加一点延迟时间。像这样的东西：

```
-(IBAction)countUp:(id)sender {
    [self performSelector:@selector(countUpLabel) withObject:nil afterDelay:.1];
}

-(void)countUpLabel {
    static float delay = .01;
    num+= 1;
    label.text = [NSString stringWithFormat:@"%d",num];
    if (num < 40) {
        [self performSelector:@selector(countUpLabel) withObject:nil afterDelay:.1];
    }else if (num > 35 && num <50) {
        [self performSelector:@selector(countUpLabel) withObject:nil afterDelay:.1 + delay];
        delay += 0.01;
    }
} 
```

# java - Rectangle 是内置类吗

> ID：14835358
> 
> 赞同：-1
> 
> 时间：2013-02-12T14:57:34.930
> 
> 标签：java, android

我正在 eclipse 中编写 java 代码。但这里 eclipse 告诉我“矩形不是 java 类中的构建”。我能做些什么 ？错误如下图所示。

![在此处输入图像描述](../Images/975daa2a556765b235eb2d90e8acee8b.png)

主要问题是我在 eclipse 中的 android 中编写了以下行。但是 eclipse 显示错误。我能做些什么来解决这个错误？

```
 Rectangle rect = new Rectangle(0, 0, (int) page.getBBox().getWidth(),
                                     (int) page.getBBox().getHeight()); 
```

我已经导入了必要的包来支持这个“矩形”类。但情况和以前一样。

```
import java.awt.Rectangle ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:01:52.853

您必须导入`java.awt.Rectangle`，以便 Java 编译器知道您指的是哪个 Rectangle 类。

您可以通过右键单击编辑器视图并左键单击 Source -> Organize Imports，让 Eclipse 创建您的导入语句。

# ant - ANT 错误：未能创建任务或键入 antlib:com.salesforce:deploy

> ID：14835360
> 
> 赞同：4
> 
> 时间：2013-02-12T14:57:37.830
> 
> 标签：ant, salesforce, force.com

我已经开始使用 Force.com 迁移工具。我想从 ANT 构建文件中使用它。我创建了这个：

```
<project name="Subversion to Org" default="deploy" basedir="." xmlns:sf="antlib:com.salesforce">
    <target name="deploy">
        <echo message="deploying from metadata" />
        <echo message="ANT_HOME=${ant.home}"/>
        <echo message="BASEDIR=${basedir}"/>
        <echo message="ANT_CORE_LIB=${ant.core.lib}"/>
        <echo message="JAVA_VERSION=${ant.java.version}"/>
        <echo message="ANT_LIBRARY_DIR=${ant.library.dir}"/>
        <echo message="classpath=${java.class.path}"/>
        <sf:deploy username="${properties.username}"
                        password="${properties.password}"
                        serverurl="${properties.url}"
                        deployroot="${properties.root}"
                        singlePackage="${properties.singlePackage}"
                        runAllTests="${properties.allTest}" />
        </target>
</project> 
```

我已将 ant-salesforce.jar 复制到 ant.lib 文件夹中。当我通过 ANT 执行这个文件时，我得到了这个：

```
 Buildfile: build.xml

deploy:
     [echo] deploying from metadata
     [echo] ANT_HOME=/usr/share/ant
     [echo] BASEDIR=/usr/share/tomcat6/.jenkins/jobs/Salesforce Deploy Test/workspace/deploy script
     [echo] ANT_CORE_LIB=/usr/share/java/ant-1.7.1.jar
     [echo] JAVA_VERSION=1.6
     [echo] ANT_LIBRARY_DIR=/usr/share/ant/lib
     [echo] classpath=/usr/share/java/ant.jar:/usr/share/java/ant-launcher.jar:/usr/share/java/jaxp_parser_impl.jar:/usr/share/java/xml-commons-apis.jar:/usr/lib/jvm/java/lib/tools.jar:/usr/share/ant/lib/ant.jar:/usr/share/ant/lib/ant-launcher.jar:/usr/share/ant/lib/ant-salesforce.jar:/usr/share/ant/lib/ant-bootstrap.jar

BUILD FAILED
/usr/share/tomcat6/.jenkins/jobs/Salesforce Deploy Test/workspace/deploy script/build.xml:16: Problem: failed to create task or type antlib:com.salesforce:deploy
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place.
No types or tasks have been defined in this namespace yet

This appears to be an antlib declaration.
Action: Check that the implementing library exists in one of:
        -/usr/share/ant/lib
        -/root/.ant/lib
        -a directory added on the command line with the -lib argument

Total time: 0 seconds 
```

似乎找不到 ant-salesforce.jar 文件，但它出现在输出中。有任何想法吗？

更多信息：

权限检查

```
ls -al /usr/share/ant/lib
total 3412
drwxr-xr-x. 2 root root    4096 feb 12 15:36 .
drwxr-xr-x. 4 root root    4096 feb 12 09:49 ..
lrwxrwxrwx. 1 root root      28 feb 12 09:49 ant-bootstrap.jar -> ../../java/ant-bootstrap.jar
lrwxrwxrwx. 1 root root      18 feb 12 09:49 ant.jar -> ../../java/ant.jar
lrwxrwxrwx. 1 root root      27 feb 12 09:49 ant-launcher.jar -> ../../java/ant-launcher.jar
-rwxrwxrwx. 1 root root 3483648 feb 12 12:58 ant-salesforce.jar 
```

罐子内容检查：

```
...
com/salesforce/ant/BulkRetrieveTask.class
com/salesforce/ant/CompileAndTest$CodeNameElement.class
com/salesforce/ant/CompileAndTest$RunTestsElement.class
com/salesforce/ant/CompileAndTest.class
com/salesforce/ant/Configuration.class
com/salesforce/ant/ConnectionFactory.class
com/salesforce/ant/DeployTask$CodeNameElement.class
com/salesforce/ant/DeployTask.class
com/salesforce/ant/DescribeMetadataTask.class
com/salesforce/ant/ListMetadataTask.class
com/salesforce/ant/RetrieveTask$PackageManifestParser.class
com/salesforce/ant/RetrieveTask.class
com/salesforce/ant/SFDCAntTask.class
com/salesforce/ant/SFDCMDAPIAntTask.class
com/salesforce/ant/SFDCMDAPIAntTaskRunner.class
com/salesforce/ant/ZipUtil.class
com/salesforce/antlib.xml
... 
```

antlib 文件内容（如预期）：

```
<antlib>
    <typedef name="compileAndTest" classname="com.salesforce.ant.CompileAndTest"/>
    <typedef name="deploy" classname="com.salesforce.ant.DeployTask"/>
    <typedef name="retrieve" classname="com.salesforce.ant.RetrieveTask"/>
    <typedef name="bulkRetrieve" classname="com.salesforce.ant.BulkRetrieveTask"/>
    <typedef name="listMetadata" classname="com.salesforce.ant.ListMetadataTask"/>
    <typedef name="describeMetadata" classname="com.salesforce.ant.DescribeMetadataTask"/>
</antlib> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:28:44.563

sf:deploy 的语法很好。匹配我的。

检查您的项目定义。您是否将 xmlns:sf 的命名空间设置为正确的值？

应该：

```
<project name="salesforce" default="deploy" basedir="." xmlns:sf="antlib:com.salesforce"> 
```

您还可以检查 ant-salesforce.jar 的权限。

然后检查jar没有损坏

jar -tf ant-salesforce.jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:13:27.453

已解决：我已经重新安装了 ant，现在似乎一切正常。奇怪的事情。

谢谢你们的支持

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-07T14:17:45.073

我遇到了同样的问题，通过更改对 ant-salesforce.jar 库的权限来修复它。

对于遇到此问题的人，值得检查它是否不是库上的权限问题。

# search-engine - 如何提高搜索引擎对页面的理解？

> ID：14835363
> 
> 赞同：0
> 
> 时间：2013-02-12T14:57:43.933
> 
> 标签：search-engine

除了使用模式，我还能做些什么来提高页面的搜索引擎理解，例如当搜索文章标题时，搜索引擎可以将我的网站显示为热门结果之一，因为它与我的文章匹配页。

或者假设我的网站是极少数关于如何制作鳄梨鸡肉布丁的网站之一，所以当搜索“鳄梨鸡肉布丁”这个短语时，我的网站会出现在顶部结果中。

以及影响页面排名的因素是什么？是交通吗？或其他东西（如公众评论？！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:39:19.873

此类问题属于[SEO（搜索引擎优化）](http://en.wikipedia.org/wiki/Search_engine_optimization)领域。

查看标记为[seo的问题（](/questions/tagged/seo "显示标记为“seo”的问题")[网站管理员](https://webmasters.stackexchange.com/questions/tagged/seo)上也有很多问题）。*但是：当心[蛇油](http://en.wikipedia.org/wiki/Snake_oil)！*

一般来说：

*   这取决于搜索引擎，它们都不同
*   一些搜索引擎不会（确切地）告诉你*他们*的排名

大多数搜索引擎依赖于两个主要因素来对页面进行排名：

*   内容/关键字（→ 页面是关于什么的？）
*   反向链接（→ 页面重要/有用/...？）

内容在您的控制范围内，反向链接（通常）不是。

永远记住：如果您*可以*操纵某个关键字的排名，您的竞争对手也可以这样做。*现在怎么办？*

最简单、最好的 SEO 建议也是最难付诸实践的：写出好的、有用的内容。

# javascript - 使用 jquery mobile 定位链接

> ID：14835364
> 
> 赞同：0
> 
> 时间：2013-02-12T14:57:52.450
> 
> 标签：javascript, jquery, ios, jquery-mobile

这几乎是对我之前发布的关于在没有 ajax 的情况下加载外部页面但将其保留为 iOS Web 应用程序窗口的问题的补充。我想出的那个例子是这个

```
<script>
$(document).bind('pageinit', function() {
  $("#test").click(function (event) {
    event.preventDefault();
    window.location.assign("test.html");
  });
});
</script> 
```

但现在我想做的是为该页面上的每个链接设置它。由于我不知道我可以拥有多少个链接，所以每次添加新链接时都这样做会非常乏味。所以我找到了这个片段，并认为我可以将两者结合起来，我只需要一些关于如何的指导。

```
$('a').each(function(index){
var elementId=$(this). attr("id");
elementId='#'=elementId; 
```

因此，对于我页面上的每个标签或 href，它会自动抓取链接并以特定方式自动加载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:54:34.687

当然，您可以组合您的代码。无论如何，我还没有尝试过你的代码，但你必须在你的点击事件周围包装一个 .each() 函数。你也应该给每个可点击的链接一个相同的类。应该是这样的：

```
$('.class').each(function(){
  $(this).click(function(){
    event.preventDefault();
    window.location.assign("test.html");
  })
}); 
```

如果您现在希望这些链接链接到不同的页面，您可以在每个链接上定义一个 data-href 属性。像这样：`data-href="test2.html"`在你的 html. 您现在可以使用

```
$(this).data("href"); 
```

并将输出放入变量中。之后，您可以将它动态放置在您的 window.location.assign 中。

希望我理解你的问题，它有所帮助。

# ios - 当 UIImage 改变时动画回退

> ID：14835366
> 
> 赞同：1
> 
> 时间：2013-02-12T14:57:53.837
> 
> 标签：ios, cocoa-touch, core-animation, caanimation

当按下并按住按钮时，我有一个 UIImageView 在屏幕上运行。按下按钮时会更改 UIImageView 的 UIImage，而当松开按钮时，我会将其更改为原始 UIImage。当图像变回时，它会捕捉回图像开始的位置。

按下按钮时调用此 Timer：

```
//This is the image that changes when the button is pressed.
imView.image = image2;
runTimer = [NSTimer scheduledTimerWithTimeInterval:0.04
                                            target:self
                                          selector:@selector(perform)
                                          userInfo:nil
                                           repeats:YES]; 
```

这称为当按钮停止被按住时：

```
- (IBAction)stopPerform:(id)sender{
   [runTimer invalidate];

   //THIS IS WHAT SNAPS THE ANIMATION BACK:
   //Without this the animation does not snap back
   imView.image = image1;
}

- (void)performRight{

 CGPoint point0 = imView.layer.position;
 CGPoint point1 = { point0.x + 4, point0.y };

 CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"position.x"];
 anim.fromValue    = @(point0.x);
 anim.toValue  = @(point1.x);
 anim.duration   = 0.2f;
 anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];

 // First we update the model layer's property.
 imView.layer.position = point1;

 // Now we attach the animation.
 [imView.layer  addAnimation:anim forKey:@"position.x"];
} 
```

我是否需要将图像更改添加到动画中？如果有怎么办？我真的很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:21:53.487

Core Animation 使用不同的属性集来表示一个对象：

来自[核心动画编程指南](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/CoreAnimationBasics/CoreAnimationBasics.html#//apple_ref/doc/uid/TP40004514-CH2-SW19)：

* * *

**模型层树**（或简称“层树”）是您的应用程序与之交互最多的层。此树中的对象是存储任何动画目标值的模型对象。每当您更改图层的属性时，都会使用这些对象之一。

**演示树**包含任何正在运行的动画的运行中值。图层树对象包含动画的目标值，而表示树中的对象反映了当前值，因为它们出现在屏幕上。您永远不应修改此树中的对象。相反，您使用这些对象来读取当前动画值，也许是从这些值开始创建一个新动画。

* * *

因此，当您为属性设置动画时，您会更改表示层，但一旦动画完成，对象将恢复为其模型属性值。

要解决此问题，您需要做的是使用`[CAAnimation animationDidStop:finished:]`委托方法来设置最终属性值以及您想做的任何其他事情。我认为您可以使用它来转储`NSTimer`您正在使用的可怕代码，并且世界的一小部分会变得更好。

# asp.net - 如何在 button_click 上的 ASP.Net Webform 中的一个 GridView 中加入多个表的数据

> ID：14835372
> 
> 赞同：1
> 
> 时间：2013-02-12T14:58:07.677
> 
> 标签：asp.net, gridview, linq-to-entities

我在 GridView 中单击一个按钮来填充所有事务数据。但是，数据库中的 Transaction 表不包含 Dimension 表（例如 Account 表）数据，例如 Transaction 表包含 AccountID 但它没有我必须从 Account 表中带来的 AccountName 属性。在 DataAccess 层中，方法 (GetAllTransactions()) 确实包含 AccountID 上的 Transaction 和 Account 表之间的连接，但是当我尝试选择 account.AccountName 时它不起作用。

我只需要从 Transaction 表中显示 AccountID 匹配的几个表，并从 Transaction 表中显示 AccountName 列而不是 AccountID。

DataAccess 方法如下所示：

```
 public static IEnumerable<Transaction>GetAllTransactions()
    {
        List<Transaction> allTransactions = new List<Transaction>();
        using (var context = new CostReportEntities())
        {
            allTransactions = (from t in context.Transactions
                               join account in context.Accounts on t.AccountID equals account.AccountID
                               select t).ToList();
        }          
        return allTransactions;
    } 
```

.aspx 页面后面的代码如下：

```
 protected void _UIButtonSubmit_Click(object sender, EventArgs e)
    {
        IEnumerable<Transaction> transactions = ts.GetAllTransactions();
        _UITransactionGridView.DataSource = transactions;
        _UITransactionGridView.DataBind();
        _UITransactionGridView.PageIndex = 0;

    } 
```

也尝试了以下几件事，但我没有得到 LINQ 的想法。以下给出错误。

```
...select new {t.*, account.AccountName}).ToList(); 
```

我需要一个方向，以使任务能够在一个 GridView 中填充来自多个表的数据。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:00:15.577

由于我的交易模型没有 Account 表的任何属性，我必须创建一个 ViewModel 类型类，它为每个交易返回 AccountNumber 的自定义数据。

我用来解决问题的代码是[这个](https://stackoverflow.com/a/14837694/1108500)

# java - 错误的junit测试名称

> ID：14835377
> 
> 赞同：0
> 
> 时间：2013-02-12T14:58:22.980
> 
> 标签：java, junit, junit4

我尝试编写自己的junit runner，目前我被困在返回正确的测试描述上。

```
public class ParameterizedWrapper extends Suite {
    private List<Runner> fRunners;

    /**
     * @throws Throwable 
     * 
     */
    public ParameterizedWrapper(final Class<?> clazz) throws Throwable {
        super(clazz, Collections.<Runner>emptyList());
        fRunners = constructRunners(getParametersMethod());
    }

    protected List<Runner> constructRunners(final FrameworkMethod method) throws Exception, Throwable {
        @SuppressWarnings("unchecked")
        Iterable<Object[]> parameters = (Iterable<Object[]>) getParametersMethod().invokeExplosively(null);
        ArrayList<Runner> runners = new ArrayList<Runner>();
        int index = 0;
        for (Object[] parameter : parameters) {
            Class<?> testClass = getTestClass().getJavaClass();
            WrappedRunner wrappedRunner = testClass.getAnnotation(WrappedRunner.class);
            Runner runner = wrappedRunner.value().getConstructor(Class.class).newInstance(getTestClass().getJavaClass());
            runners.add(new WrappingRunner(runner, parameter, testClass, index++));
        }
        return runners;
    }

    private FrameworkMethod getParametersMethod() throws Exception {
        List<FrameworkMethod> methods = getTestClass().getAnnotatedMethods(Parameters.class);
        for (FrameworkMethod each : methods) {
            if (each.isStatic() && each.isPublic()) {
                return each;
            }
        }

        throw new Exception("No public static parameters method on class " + getTestClass().getName());
    }

    @Override
    protected List<Runner> getChildren() {
        return fRunners;
    }

    @Retention(RetentionPolicy.RUNTIME)
    @Target({ElementType.TYPE})
    public static @interface WrappedRunner {
        Class<? extends Runner> value();
    }

    @Retention(RetentionPolicy.RUNTIME)
    @Target({ElementType.METHOD})
    public static @interface ParameterSetter {
    }

}

class WrappingRunner extends Runner {
    private Runner wrappedRunner;

    private Object[] parameters;

    private Class<?> testClass;

    private int testPosition;

    public WrappingRunner(final Runner runner, final Object[] params, final Class<?> clazz, final int position) {
        wrappedRunner = runner;
        parameters = params;
        testClass = clazz;
        testPosition = position;
    }

    @Override
    public Description getDescription() {
        Description originalDescription = wrappedRunner.getDescription();
        Description newDescription = Description.createSuiteDescription(nameFor(""), new Annotation[0]);
        for (Description child : originalDescription.getChildren()) {
            newDescription.addChild(decorateChildDescription(child));
        }

        return newDescription;
    }

    private String nameFor(String name) {
        return String.format("%1$s[%2$s]", name, testPosition);
    }

    protected Description decorateChildDescription(final Description originalChildDescription) {
        Description d = Description.createTestDescription(originalChildDescription.getTestClass(),
                nameFor(originalChildDescription.getMethodName()),
                originalChildDescription.getAnnotations().toArray(new Annotation[0]));
        return d;
    }

    @Override
    public void run(final RunNotifier notifier) {
        try {
            ParameterStorage.storeParameters(testClass, parameters);
            wrappedRunner.run(notifier);
        } finally {
            ParameterStorage.clearParameters(testClass);
        }
    }
} 
```

我有一些测试类来检查跑步者是否有效。Runner 工作正常，只是测试的名称很奇怪。在 Eclipse 中，它显示所有测试并添加无根测试类别

![在此处输入图像描述](../Images/4e2030052d293d433f42ff1e43cd9ec2.png)

并且surefire根本不使用我的命名：

![在此处输入图像描述](../Images/aae473963e056aaec49ad6cc8cbe3024.png)

我比较了我的跑步者和`Parameterized`跑步者中生成的描述对象，似乎没有区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:42:00.310

这有点难看，但将子跑步者列表传递给父构造函数更安全：

```
public ParameterizedWrapper(final Class<?> clazz) throws Throwable {
  super(clazz, constructRunners(getParametersMethod());
}

private static List<Runner> constructRunners(final FrameworkMethod method)
    throws Throwable {
  ... 
```

你不应该需要覆盖`Suite.getChildren()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:22:44.247

我检查了更多，发现我的跑步者生成的描述没问题。但这并不重要，因为它与实际测试执行期间使用的描述不一致。这就是为什么 eclipse 将条目显示为未执行，这就是为什么 surefire 不显示我的名字的原因。

目前我认为使用我自己的通知程序来捕获测试起点并在该点替换配置。

如果有人有更好的解决方案，我想知道它:)。

# spring - 在多个 JVM 上配置多个 ActiveMq 侦听器实例

> ID：14835382
> 
> 赞同：1
> 
> 时间：2013-02-12T14:58:36.833
> 
> 标签：spring, activemq

我想在多个 JVM 上配置多个 ActiveMQ 侦听器实例（队列和侦听器之间存在 1-1 映射）。我们正在分离侦听器以实现高性能。目前我有几个选项，比如在数据库、spring xml 和属性文件中进行配置。不确定哪个是最好的方法......任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:24:03.763

在 Spring XML 中通过 Spring 的 MessagListenerContainer 配置 ActiveMQ 侦听器是标准方法

有关详细信息，请参阅此页面：http: [//activemq.apache.org/spring-support.html](http://activemq.apache.org/spring-support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T11:57:23.917

您可以创建多个 ActiveMQ 实例，使用以下步骤。

*   转到您的 activemq 目录 bin 文件夹并运行以下命令

创建实例 1

```
cd /apache-activemq-5.8.0/bin
./activemq create instance1
./activemq setup ~/.activemqrc-instance-instance1

 ln -s /home/[yourHomeDir]/.activemqrc-instance-instance1 
```

创建实例 2

```
./activemq create instance2
./activemq setup ~/.activemqrc-instance-instance2

 ln -s /home/[yourHomeDir]/.activemqrc-instance-instance2 
```

执行上述命令后，转到 instance2 conf 并在 activemq.xml 中更改**openwire**、**amqp**的默认端口，并在 jetty.xml中更改**连接器。**

您可以按如下方式启动每个实例。

```
cd apache-activemq-5.8.0/bin/instance1/bin
./instance1 console 
```

打开一个新标签

```
cd apache-activemq-5.8.0/bin/instance2/bin
./instance2 console 
```

# mysql - 网络时间对 MySQL 查询意味着什么

> ID：14835384
> 
> 赞同：3
> 
> 时间：2013-02-12T14:58:48.800
> 
> 标签：mysql

我有一个 MySQL 查询，它具有以下性能配置文件：

```
/* 0 rows affected, 90.908 rows found. 
Duration for 1 query: 0,000 sec. (+ 0,125 sec. network) */ 
```

看起来不错，网络时间很短。数据库在本地主机上运行。

但是，我有另一个具有以下性能配置文件的查询：

```
/* 0 rows affected, 28 rows found. 
Duration for 1 query: 0,000 sec. (+ 1,015 sec. network) */ 
```

一般是什么网络？它只是在服务器和客户端之间传输数据所需的时间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:00:30.640

是的，这应该是从服务器传输响应到客户端所需的时间。

# powershell - 捕获鼠标左键单击

> ID：14835385
> 
> 赞同：1
> 
> 时间：2013-02-12T14:58:51.200
> 
> 标签：powershell

我需要计算用户一天内的总点击次数。我想为此使用powershell，因为它应该是最简单的，但我无法在其中找到任何简单的方法来捕获鼠标事件。

有人可以指导我[使用 Windows 7]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:41:48.130

此实用程序适用于我的 win7 机器：

[http://www.jholu.com/2012/04/21/mouse-click-counter-for-windows-to-count-left-right-and-middle-clicks/](http://www.jholu.com/2012/04/21/mouse-click-counter-for-windows-to-count-left-right-and-middle-clicks/)

如果您需要自动化它，您也可以尝试这个 .NET 项目：

[http://globalmousekeyhook.codeplex.com](http://globalmousekeyhook.codeplex.com)

# jquery - jQuery slideToggle 嵌套 ul li

> ID：14835396
> 
> 赞同：2
> 
> 时间：2013-02-12T14:59:21.203
> 
> 标签：jquery, css, nested, html-lists

我最初有这个工作，但通过 W3C 验证器运行它，修复了错误，现在它不工作了。

我已经设置了一个**[jsfiddle](http://jsfiddle.net/infrared/heE6J/3/)**

本质上，它是一堆嵌套的 ul 被用作下拉菜单，当单独单击时，会选择标题，显示嵌套 ul 中包含的信息。

但是由于将 ul 正确嵌套在 li 中，这无法正常工作，因此尝试了诸如 children/siblings/next 之类的选择器 - 均无济于事。这并不是说它们不起作用，只是我对使它们起作用的理解不够（显然！）。

此代码使所有列表一次滑动切换，但是我想单独控制它们。

```
$(function(){
  $("ul.featureListings").hide();

  $(".featuresHeading").click(function() {
    $('ul.featureListings').slideToggle(300);
    return false;
  });
}); 
```

我确定使用类似的东西：

```
$(this).next('.featureListings').slideToggle(300); 
```

应该可以工作，但我一生都无法正确解决。我猜这是因为它是嵌套的，我没有正确定位它，但是我的知识有限，截止日期也是如此。

我怎样才能相应地定位适当的 ul ？想知道是否有人可以帮助阐明并帮助我理解为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:02:27.040

尝试这个：

```
$(function(){
  $("ul.featureListings").hide();

  $(".featuresHeading").click(function() {
    $(this).next("li").children('ul.featureListings').slideToggle(300);
    return false;
  });
}); 
```

你只需要以正确的方式在 DOM 中移动。你想移动到下一个 li (.next("li"))，然后进入它的一个子级 (.children('ul.featureListings')) 并触发 slideToggle那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-05T09:43:28.930

无论我理解什么，我都制作了**[jsfiddle 。](http://jsfiddle.net/heE6J/122/)**我认为。您希望`slideToggle`在当前打开时使用 next 和 prev 关闭。我也对html页面进行了更改。

```
 $("ul.featureListings").hide();

  $(".featuresHeading").click(function() {
      $('ul.featureListings').not($(this).children('ul.featureListings')).slideUp();
    $(this).children('ul.featureListings').slideToggle(300);
    return false;
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:04:00.200

利用`.next()`

```
$(this).next().find('ul.featureListings').slideToggle(300); 
```

在这里演示[http://jsfiddle.net/heE6J/4/](http://jsfiddle.net/heE6J/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T15:08:48.447

```
 $(function(){
  $("ul.featureListings").hide();

  $(".featuresHeading").click(function() {
    $('ul.featureListings', $(this).next()).slideToggle(300);
    return false;
  });
}); 
```

# c# - 休眠组件映射

> ID：14835397
> 
> 赞同：2
> 
> 时间：2013-02-12T14:59:21.530
> 
> 标签：c#, hibernate, nhibernate, nhibernate-mapping

帐户实体具有应为组件的条款组件。

```
Account.cs 
public Guid Id {get; set;}
public Terms Terms {get; set;}
...

Terms.cs
public string TermsText {get;set;}
public DateTime Created {get; set;} 
```

现在我尝试根据[这个例子](http://lycog.com/programming/nhibernate-32-mapping-code-component-mapping/)进行映射（通过代码）

```
AccountMap.cs
...
Component(p => p.Terms, TermsMap.Mapping());

TermsMap.cs
public class TermsMap
{
    public static Action<IComponentMapper<Terms>> Mapping()
    {
        return c =>
        {
            c.Property(p => p.TermsText);
            c.Property(p => p.Created);
        };
    }
} 
```

> **NhibernateMappingException：无法确定条款的类型**

我在这里做错了什么？

谢谢

# c# - 加密的值不是每次都一样

> ID：14835398
> 
> 赞同：1
> 
> 时间：2013-02-12T14:59:21.960
> 
> 标签：c#, encryption

我正在使用 Brett 给出的这个例子：

[加密和解密字符串](https://stackoverflow.com/questions/202011/encrypt-decrypt-string-in-net)

这样做：

```
public static bool VerifyLicenseKey(string applicationGuid)
{
  Console.WriteLine("G: " + applicationGuid);
  var appSettings = AppSettings.GetInstance();
  if (appSettings == null)
  {
    return false;
  }
  var hwinfo = HardwareInfo.GetHardwareSerial();
  Console.WriteLine("h: " + hwinfo);
  Console.WriteLine("a: " + applicationGuid);
  var currentSerial = Crypto.EncryptStringAES(hwinfo, applicationGuid);
  Console.WriteLine("c: " + currentSerial);
  Console.WriteLine("o: " + appSettings.LicenseSerialNumber);
  if (currentSerial == appSettings.LicenseSerialNumber)
  {
    return true;
  }
  return false;
} 
```

}

和每次都回来一样，但当我打电话给`GetHardwareSerial`它时，它不是。`applicationGuid``EncryptStringAES`

我使用了错误的课程吗？不应该每次都一样吗？

如果没有，是否有人有一个更好的例子，其中加密的值是相同的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T15:29:35.797

您的“加密”实际上只是混淆并且不太难绕过。所有需要知道的是您的应用程序 guid（可能存储为公共）和获取相同硬件 ID 的方法（您可能没有编写它并且很容易找到）。

当然，您希望保护工作有多难还取决于您的软件的价值或高容量，因此简单的混淆可能就足够了。忘记 AES，你需要的是一个散列算法，例如 SHA 或 MD5，你可以将你的应用程序 guid、硬件编号、用户名等散列在一起并存储散列。对于大多数典型用户来说，这足以起到威慑作用。

如果您坚持拥有难以破解的保护，您需要的是数字签名和激活程序。请参阅[RSACryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.aspx)。

基本上，您创建一个知道您的私钥的服务，并将匹配的公钥放在您的软件中。然后从您的软件中，您使用 HardwareInfo 以及您想要验证的任何其他信息调用服务，服务对其进行签名并返回签名哈希。

一旦你在你的客户端拥有了它，你就可以使用公钥来检查签名，即使信息可以以明文形式存储，也不能轻易地重新创建签名。

另[请检查此问题](https://stackoverflow.com/questions/14691830/whats-the-best-way-to-manage-product-keys-for-code-libraries/14692078#14692078)以获取更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T15:13:23.607

您所指的算法使用[RijndaelManaged 类](http://msdn.microsoft.com/en-us/library/3k2d54f8%28v=vs.90%29.aspx)，并且它似乎使用其[`IV`属性](http://msdn.microsoft.com/en-us/library/system.security.cryptography.symmetricalgorithm.iv%28v=vs.90%29.aspx)的默认值，该属性（非常正确）*在您创建新实例时自动设置为新的随机值*（参见文档）。

因此，您每次都会得到不同的结果。[（例如，您可以在Wikipedia](http://en.wikipedia.org/wiki/Initialization_vector)上找到有关 IV 用途的更多信息。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:47:53.790

Yeah most AES encryption is non-deterministic (and for good reason) it will not work for you, but since you just want to compare a cryptographic result and you aren't really wanting to decrypt, might I suggest using [HMAC](http://en.wikipedia.org/wiki/HMAC) instead.

# javascript - 检查特定 Mime 类型的浏览器支持？

> ID：14835401
> 
> 赞同：17
> 
> 时间：2013-02-12T14:59:33.323
> 
> 标签：javascript, mime-types, browser-support

对于允许在浏览器中预览文档的 Web 应用程序，我想检查用户的浏览器是否支持预览当前文档的 mime 类型。

是否有基于 Javascript 的方法来匹配当前的 mime 类型与浏览器支持的类型？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-24T08:59:00.233

在最近的浏览器中有 navigatior.plugins 类似数组的对象。您可以检查每个插件的 mime 类型。

这是解决方案[要点](https://gist.github.com/ErBlack/290d18142ba1b6b3cd0b)和[jsfiddle](http://jsfiddle.net/ErBlack/e2Ldgz7a/)。

```
var mimeCheck = function (type) {
    return Array.prototype.reduce.call(navigator.plugins, function (supported, plugin) {
        return supported || Array.prototype.reduce.call(plugin, function (supported, mime) {
            return supported || mime.type == type;
        }, supported);
    }, false);
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T15:02:53.117

您可以进行 AJAX 调用并检查 mimetype 的响应标头。

```
 $.ajax({
    type: "GET",
    url: 'http://..../thing.pdf',
    success: function (output, status, xhr) {
      alert("done!"+ xhr.getAllResponseHeaders());
      alert("done!"+ xhr.getResponseHeader("Content-Type"));
    }
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T15:04:44.953

在这个问题中，我认为有同样的问题，尝试检查一下

[检查浏览器是否支持特定的 MIME 类型？](https://stackoverflow.com/questions/2171809/check-if-a-browser-supports-a-specific-mime-type)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T15:04:08.363

如果您定义了特定文档类型需要哪个插件，那么您可以尝试查看是否存在需要的插件。至少应该在 Firefox 和 Chrome 上工作。 [window.navigator.plugins](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.plugins)

# asp.net - 来自两个表的 Gridview 编辑

> ID：14835404
> 
> 赞同：0
> 
> 时间：2013-02-12T14:59:47.690
> 
> 标签：asp.net, linq-to-sql, gridview

我正在尝试在 gridview 中进行更新并且一切正常，直到我包含来自另一个表的“serviceArea”。

这是我的查询。

```
var result = from u in _db.tbl_Users
             where u.UserName.Contains(searchQuery)
                   && searchQuery.Length > 0
                   && u.Deleted == false
             select new
             {
                 u.UserName,
                 u.Email,
                 u.IsAdmin,
                 u.ServiceAreaId,
                 u.tbl_ServiceArea.ServiceArea,
                 u.UserId,
             };

grd_User.DataSource = result;
grd_User.DataBind(); 
```

当我尝试编辑时，数据绑定错误说没有找到 serviceArea 的定义。

我可以通过以下方式以某种方式做到这一点：

```
<EditItemTemplate>
      <asp:TextBox ID="txt_Val_ServiceArea" runat="server" Text='<%# Eval("ServiceArea") %>'></asp:TextBox>
 </EditItemTemplate> 
```

任何帮助都会很好，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:18:34.580

如果要在 gridview 中编辑数据，则不能使用匿名类型，因为它们是不可变的。当您将 plain `User`s 发送到 gridview 时，您可以修改数据，但现在不能。您必须创建一个类（称为 DTO 或视图模型）来保存您在 gridview 中显示的数据，以便您可以编辑它们。

这意味着您还必须在提交更改时将修改后的结果写回原始用户。

# magento - 图像大小调整的 Magento Javascript 问题

> ID：14835409
> 
> 赞同：0
> 
> 时间：2013-02-12T15:00:17.197
> 
> 标签：magento, magento-1.4

我正在使用 Magento 1.4.1.1 安装，但我在自定义主题商店中遇到了 javascript 问题。

例如，转到任何产品页面（例如[http://www.papakuraeducation.co.nz/index.php/teachers/magic-caterpillar-handwriting-casey-caterpillar-small-book.html](http://www.papakuraeducation.co.nz/index.php/teachers/magic-caterpillar-handwriting-casey-caterpillar-small-book.html)）会加载一个 Javascript 文件，该文件包含应该缩小 .jpg 文件以适应其所在的“产品图像”容器的代码。

相关代码似乎在 #10279 行附近，这导致了 $(imageEl).parentNode = null 的异常

```
Product.Zoom.prototype = {
    initialize: function(imageEl, trackEl, handleEl, zoomInEl, zoomOutEl, hintEl){
        this.containerEl = $(imageEl).parentNode;
        this.imageEl = $(imageEl);
        this.handleEl = $(handleEl);
        this.trackEl = $(trackEl);
        this.hintEl = $(hintEl);

(snipped...) 
```

我已经尝试在 Chrome 中调试它并添加断点，但是我实际上并不确定如何使用这些信息来找到解决方案。

任何帮助我指出正确的方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:36:08.103

您必须为相关`<IMG>`问题添加一个 ID。此 ID 应输入以下代码空间：

```
product_zoom = new Product.Zoom('IMAGE_ID', 'track', 'handle', 'zoom_in', 'zoom_out', 'track_hint'); 
```

# visual-studio-2010 - 使用语法高亮和智能感知向 Visual Studio 2010 添加新语言

> ID：14835410
> 
> 赞同：4
> 
> 时间：2013-02-12T15:00:19.030
> 
> 标签：visual-studio-2010, syntax-highlighting, intellisense, informix, 4gl

我正在尝试在 Visual Studio 2010 中添加对不同语言的支持。我希望添加自定义语法突出显示，并使用它进行某种基本的智能感知工作。我要添加的语言是 4Js Genero（Informix-4GL 的更新版本）。我基本上只需要对`.4gl`and 的支持。`per`Genero/4GL 中使用的文件扩展名。有谁知道如何做到这一点，或者可以指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:39:52.633

这真的不适合胆小的人。不要低估你必须投入多少工作。

您将需要[Visual Studio 2010 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=2680)，然后阅读（并重新阅读和重新阅读（*））所有关于[语言服务的内容](http://msdn.microsoft.com/en-us/library/bb165099%28v=vs.100%29.aspx)

> Visual Studio 中语言服务的目的是为在集成开发环境 (IDE) 中编辑源代码提供特定于语言的支持。您将语言服务实现为 VSPackage 的一部分。

(*) - 除非这一切都立即对您有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T21:29:50.247

这不是关于*如何创建*自定义语法突出显示的答案。

来自 github 的 Visual Studio 2010+ 有一个用于 Genero 4gl 语言支持的开源扩展：

[https://github.com/gregfullman/VSGenero/wiki](https://github.com/gregfullman/VSGenero/wiki)

它应该已经完成​​了您正在寻找的大部分工作，如果您想做更多，它肯定会为您提供一个很好的起点。

# android - 单元测试：在 Intellij IDEA 中更改目标包

> ID：14835415
> 
> 赞同：0
> 
> 时间：2013-02-12T15:00:45.317
> 
> 标签：android, intellij-idea

Android 测试项目与项目的源代码位于同一级别。现在，当您通过“创建测试”意图创建测试类时，IDE 将其存储在源包中，尽管您告诉它将其存储在另一个包中。

是否可以强制 Intellij IDEA 将 Test Class 定位到 Android 项目的子项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:56:13.760

这是不可能的，[YouTrack 中的功能请求](http://youtrack.jetbrains.net/issues/IDEA)将不胜感激。

# c# - VB相当于c# new byte[0]

> ID：14835416
> 
> 赞同：2
> 
> 时间：2013-02-12T15:00:45.600
> 
> 标签：c#, vb.net

我正在尝试将一些 C# 转换为 VB。调用此方法：

```
public static void WriteLineA(Stream Stream, byte[] Line); 
```

C# 调用如下所示：

```
SBASUtils.__Global.WriteLineA(messageStream, new byte[0]); 
```

所有 C# > VB 转换器将字节转换为：

```
New Byte(-1) {} 
```

编译器不喜欢这样。任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T15:03:03.273

尝试这个：

```
SBASUtils.__Global.WriteLineA(messageStream, New Byte() {}) 
```

这将创建一个新的字节数组，其大小自动调整为大括号之间的元素数。由于括号之间没有项目，它将创建一个空（零项目）数组。

# spring - Spring Web Flow - 任何转换都会不断刷新流程

> ID：14835425
> 
> 赞同：-1
> 
> 时间：2013-02-12T15:01:09.233
> 
> 标签：spring, spring-webflow

Spring Web 流转换根本不起作用。仅加载第一个视图状态。但是在单击任何转换状态时，流程会再次刷新并再次加载第一个视图。虽然，相同的流 xml 和相同的设置在我朋友的机器上运行良好。这怎么可能？相同的流（流 xml）在一个系统中运行良好，而在另一个系统中运行良好。有没有人遇到过这种类型的问题？任何帮助是极大的赞赏。谢谢！！！

```
----------------------------

What I was able to see is that, whenver a transition is triggered, it returns http status 302 rather than 200\. Hence it defaults to flow start.

Can anyone help me here pls.. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:54:52.563

我们能够找出问题所在。SWF 对每个事件都使用**JSESSIONID**。如果该 cookie 未从浏览器发送回服务器，则假定没有有效会话并重定向到第一页（流程开始）。这可以在代码或容器级别修复。JESSIONID cookie 不应为 HttpOnly。这可以在应用程序服务器中完成（在我的情况下是 Websphere，不确定其他服务器是否有此选项）。否则，在代码中有一个过滤器来获取 JSESSIONID cookie 并执行此操作 cookie.setHttpOnly(false);

我猜 Firebug 是识别这类问题的最佳工具。:)

# ios - UINavigationBar 外观 setBackgroundImage:nil 在 ios 5.1 上不起作用

> ID：14835428
> 
> 赞同：0
> 
> 时间：2013-02-12T15:01:20.293
> 
> 标签：ios

我使用以下行设置我的 UINavigationBar 外观：

```
UIImage *navigationBarBackground = [UIImage imageNamed:@"HeaderNavBar.png"];
[[UINavigationBar appearance] setBackgroundImage:navigationBarBackground forBarMetrics:UIBarMetricsDefault]; 
```

我使用以下行将其删除：

```
[[UINavigationBar appearance] setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault]; 
```

这适用于每个 ios，除了 ios 5.1 ......有人知道为什么吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:36:16.810

“当视图的内容发生更改时，您不会直接重绘这些更改。相反，您可以使用 setNeedsDisplay 或 setNeedsDisplayInRect: 方法使视图无效。” （[查看编程指南](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/WindowsandViews/WindowsandViews.html)）。重绘视图后你还有这个问题吗？

另请参阅：[UIView 类参考：setNeedsDisplay](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instm/UIView/setNeedsDisplay)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T17:22:29.283

```
[[UINavigationBar appearanceWhenContainedIn:[self class], nil] setBackgroundImage:navigationBarBackground forBarMetrics:UIBarMetricsDefault]; 
```

接着：

```
[[UINavigationBar appearanceWhenContainedIn:[self class], nil] setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault]; 
```

[这里](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIAppearance_Protocol/)推荐。

# android - 将值实时从片段活动传递到片段

> ID：14835429
> 
> 赞同：0
> 
> 时间：2013-02-12T15:01:20.113
> 
> 标签：android, android-fragments, android-fragmentactivity

我有一个程序，其中我需要在片段中实时更新值，当它进入片段活动时。快照如下所示

![在此处输入图像描述](../Images/11ab02e53a404cb96bdf62819251ff59.png)

在这里，当我在片段活动（图像的上半部分）编辑 AL、K1 等的文本字段中输入值时，答案必须在下面的片段中更新。我应该如何将值实时发送到片段。帮帮我，我是初学者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:25:14.783

在您创建片段的类中，创建一个名为`public void updateText(String text)`. 在这个方法中，做所有需要的计算等，用传入的字符串计算片段中的数字，然后将文本设置为所有计算后得到的字符串。在 中，通过使用`FragmentActivity`添加一个 并添加到类声明中。添加导入和所有未实现的方法，并在最近添加的方法中，通过说调用该方法，其中片段是您在将其附加到您的. 我希望这有帮助！让我知道您是否需要其他东西。或者，您可以更改方法以添加或更改最适合您需要的参数。`textChangedListener``editText1.addTextChangedListener(this)``implements TextWatcher``onTextChanged``updateText(String)``fragment.updateText(String)``FragmentActivity`

`updateText(String)`

下面是一个粗略的例子，希望能有所帮助。

```
package com.smarticle.example;

import android.app.Activity;
import android.app.Fragment;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.widget.EditText;

public class Example extends Activity implements TextWatcher {

ExampleFragment exampleFragment;
EditText editText1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    exampleFragment = new ExampleFragment();
    editText1 = (EditText) findViewById(R.id.editText1);
    editText1.addTextChangedListener(this);
}

@Override
protected void onPause() {
    super.onPause();
    editText1.removeTextChangedListener(this);
}

public void afterTextChanged(Editable s) {
    // I don't implement this, but it is required.
}

public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
    // I don't implement this, but it is required.
}

public void onTextChanged(CharSequence s, int start, int before, int count) {
    exampleFragment.updateText(editText1.getText().toString().trim());
}

public class ExampleFragment extends Fragment {

    public void updateText(String text) {
        // Perform any necessary calculations or actions
    }

} 
```

}

# javascript - 在 HTML5 和 JavaScript 中使用货币符号

> ID：14835430
> 
> 赞同：1
> 
> 时间：2013-02-12T15:01:21.537
> 
> 标签：javascript, html, encoding, utf-8

我正在用一些 JavaScript 编写一个基本的 HTML5。

我正在使用以下文档类型：

```
<!DOCTYPE html> 
```

我已经设置了我的 UTF-8 编码（在 head 标签中）：

```
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding"> 
```

问题是，我有这个看起来完全一样的 javascript 对象：

```
var symbol = {"GBP":"£", "EUR":"€", "USD":"$"};
alert(symbol['GBP']); 
```

当对象被调用时，它会返回臭名昭著的 �!

有人可以指出我正确的方向吗？

谢谢，

彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:33:37.763

你没有提到的一些步骤：

*   配置您的编辑器以将文件保存为 UTF-8
*   配置您的 Web 服务器以发送`Content-Type: text/html; charset=utf-8`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T15:13:05.657

你用什么编辑器？您的编辑器有可能以某种 iso8859 编码保存文件。尝试使用例如记事本并以 UTF-8 编码保存文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:35:33.663

可能您可以改用 HTML 实体。

```
var symbol = {"GBP":"&#163;", "EUR":"&#8364;", "USD":"&#36;"}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T00:58:37.173

事实证明，当您使用警报功能时，它不喜欢使用特殊字符。当我在 HTML 文档中使用特殊字符时，我的代码绝对没问题。所以我使用了这样的东西：

```
$(this).html(symbol['GPB']); 
```

谢谢你们的努力！

彼得

# html - 如何通过渐进增强在 css 中提供多层次的支持

> ID：14835431
> 
> 赞同：0
> 
> 时间：2013-02-12T15:01:22.893
> 
> 标签：html, css, progressive-enhancement

最近我读完了 Filament Group 的《渐进式增强设计》。在书中，他们讨论了基于测试浏览器功能提供两个级别的支持。如果浏览器通过了测试，它将获得建立在基础之上的增强体验。如果浏览器出现故障，它只会获得基本的体验。在纸面上，这是完全合理的，并且确实让人们意识到这就是网站应该建立的方式。

完成这本书后，我查看了 enhance.js，这是他们在书中测试浏览器功能的脚本（[https://github.com/filamentgroup/EnhanceJS](https://github.com/filamentgroup/EnhanceJS)和自本书[https://github.js 以来的新版本。 com/长丝组/增强](https://github.com/filamentgroup/enhance)）。在脚本中，没有办法像我预期的那样测试特定的 css 功能。当然，您可以测试盒模型支持，但如果我的布局依赖于 display: table 怎么办？有没有人测试这样的功能？这样做是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:23:39.810

[Modernizr](http://modernizr.com/)是一个流行的库，提供类似的能力测试。可以在[下载](http://modernizr.com/download/)页面上选择多种预构建的测试，包括一个测试`display: table`（*非核心检测*部分中的*css-displaytable*）。他们还托管了一系列[polyfill](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills)，可以帮助弥补您可能想要使用的一些缺失功能。

# objective-c - 静态代码分析以在块中查找对“自我”的引用？

> ID：14835435
> 
> 赞同：1
> 
> 时间：2013-02-12T15:01:37.060
> 
> 标签：objective-c, objective-c-blocks, code-analysis

我发现的最常见的错误之一是当我在这样的块中引用“self”时：

```
 ...
 [self someMethodWhichTakesBlock:^() {
       self.something = @"something";
 }];
 ... 
```

我应该写的是更像这样的东西：

```
 ...
 __block MyObject *_self = self;
 [self someMethodWhichTakesBlock:^() {
       _self.something = @"something";
 }];
 ... 
```

有没有办法通过某种静态代码分析来捕捉这些潜在的错误？

# php - 使用配置文件中的值从配置文件加载数据

> ID：14835436
> 
> 赞同：0
> 
> 时间：2013-02-12T15:01:37.760
> 
> 标签：php, javascript, config, ini

我有一个带有一些值的 config.ini 文件。其中之一是我的脚本根目录的路径。因此，在我的 js 文件中，我从 config.ini 文件中获取了内容，但我犯了一个大错误。要从配置文件加载数据，我已经需要配置文件中的一个值，即配置文件的路径。

知道如何处理吗？

问候西尔诺斯

**编辑**：

这是我的 htaccess：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}  -d

RewriteRule  ^.*$  -  [L]

RewriteRule ^([^/]+)/$  index.php?token=$1 [L] 
```

[这会将我的链接从http://domain.com/fun/bla/index.php?token?123](http://domain.com/fun/bla/index.php?token?123)重写为[http://domain.com/fun/bla/123/](http://domain.com/fun/bla/123/) .. 所以如果有人访问第二个链接，我的js 脚本将不再运行，因为我使用相对路径。我现在在我的配置中有一个值，它指向我的应用程序的根目录：“./fun/bla/”。一切都很好。但我的要求是，我的代码中不应实现任何路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:03:31.237

是的。将配置文件的路径存储在代码中。其余的可以从配置文件中加载。

您不可能将所有内容都包含在配置文件中。我曾经与试图将数据库配置存储在数据库中的人一起工作。然后当他们试图让应用程序工作时意识到他们的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:04:12.407

我一直在做的是在我的代码中静态定义配置文件的名称，所以在你的 JS 中：

```
config_file = '/path/to/myconfig.ini' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:04:20.917

这是一个先有鸡还是先有蛋的问题。配置文件不能包含配置文件的路径，它的路径需要程序的所有需要​​知道设置的部分都知道。也许在您的程序中某处将路径作为全局变量？

# sql-server - 使用 SQL“补丁”文件迁移数据库更改的软件？

> ID：14835439
> 
> 赞同：0
> 
> 时间：2013-02-12T15:01:41.013
> 
> 标签：sql-server, replication

我在 2 个服务器中有 2 个 MSSQL 数据库，我需要在模式和特定表中复制修改。最好我需要 SQL 命令来执行此操作。系统应该能够获取数据库初始状态的快照，然后生成显示更改的 SQL。

我只需要记录数据中特定表的更改，还需要检测表格式的更改（模式的更改）。希望可以手动调整复制 SQL（因此仅反映必要的更改，以防自动规则允许一些不必要的查询最终出现在补丁中。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:05:51.300

看看[RedGate SQL Developer bundle](http://www.red-gate.com/products/sql-development/sql-developer-bundle/)。不幸的是，我不知道任何用于 MS SQL Server 的好的开源工具。

我认为特别是[SQL Compare](http://www.red-gate.com/products/sql-development/sql-compare/)可能对您有所帮助。如果您使用的是 Visual Studio Team Edition，您可以查看 VS 数据库项目。我听说有些团队成功地将它用于他们的数据库变更管理，但我自己从未尝试过。

# asp.net-mvc-4 - 如何让 WebAPI XML 序列化程序使用 TypeConverter

> ID：14835441
> 
> 赞同：1
> 
> 时间：2013-02-12T15:01:59.100
> 
> 标签：asp.net-mvc-4, xml-serialization, asp.net-web-api, json.net

在 ASP.NET Web API 项目中，我有一个带有 TypeConverter 的自定义类型，用于处理字符串转换的 to 和 from，如下所述：

[http://blogs.msdn.com/b/jmstall/archive/2012/04/20/how-to-bind-to-custom-objects-in-action-signatures-in-mvc-webapi.aspx](http://blogs.msdn.com/b/jmstall/archive/2012/04/20/how-to-bind-to-custom-objects-in-action-signatures-in-mvc-webapi.aspx)

自定义类型在我的模型中用作属性，效果很好。我的模型对象的 json 包含我的自定义对象作为从我的 TypeConverter 创建的字符串值。

因此，我将请求切换为接受 XML，并且不再调用 TypeConverter，并且我的对象被错误地序列化。

如何让 XML 序列化程序像 JSON 一样使用 TypeConverter。引用的文章听起来像是 TypeConverters 的使用，如果存在的话，是一个可预测的功能。如果这完全是序列化程序的心血来潮，那么以一致的方式制作以 XML 和 JSON 表示数据的 API 几乎是不可能的。

* * *

文章中的示例代码，以及一些上下文：

```
[TypeConverter(typeof(LocationTypeConverter))]
public class Location
{        
    public int X { get; set; }
    public int Y { get; set; }

    // Parse a string into a Location object. "1,2" --> Loc(X=1,Y=2)
    public static Location TryParse(string input)
    {
        var parts = input.Split(',');
        if (parts.Length != 2)
        {
            return null;
        }

        int x,y;
        if (int.TryParse(parts[0], out x) && int.TryParse(parts[1], out y))
        {
            return new Location { X = x, Y = y };                
        }

        return null;
    }

    public override string ToString()
    {
        return string.Format("{0},{1}", X, Y);
    }
}

public class LocationTypeConverter : TypeConverter
{
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        if (sourceType == typeof(string))
        {
            return true;
        }
        return base.CanConvertFrom(context, sourceType);
    }

    public override object ConvertFrom(ITypeDescriptorContext context, 
       System.Globalization.CultureInfo culture, object value)
    {
        if (value is string)
        {
            return Location.TryParse((string) value);
        }

        return base.ConvertFrom(context, culture, value);
    }
} 
```

使用该类创建模型：

```
public class SampleModel
{
   public int One { get; set;}
   public string Two { get; set;}
   public Location Three { get; set;}
} 
```

使用如下方法创建一个 ApiController：

```
public SampleModel Get()
{
   return new SapleModel { One = 1, Two = "Two", Three = new Location { X = 111, Y = 222 } };
} 
```

而已。使用 fiddler 并同时尝试它们，并注意 Location 使用转换器将其序列化为单行逗号分隔格式，例如使用 Json 但不使用 XML 的单行逗号分隔格式 (Three="111,222")。

# printing - Windows 8 sdk 是否支持打印？

> ID：14835442
> 
> 赞同：0
> 
> 时间：2013-02-12T15:02:07.777
> 
> 标签：printing, windows-8, sdk

我想为 windows 8 做一个应用程序，这个应用程序应该有一个内置的打印功能。我知道 Ios sdk 支持打印支持 AirPrint 的打印机，Windows 8 SDK 怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:42:10.033

是的，Windows 商店应用确实支持打印，这里是 API、快速入门和初学者指南的链接。

[http://msdn.microsoft.com/en-us/library/windows/desktop/hh448418(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh448418(v=vs.85).aspx) [http://msdn.microsoft.com/en-us/library/windows/apps/ hh868178.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh868178.aspx) [http://msdn.microsoft.com/en-us/library/windows/apps/hh780609.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh780609.aspx)

# c - 无法让 C 方法 icalrecur_expand_recurrence 工作

> ID：14835443
> 
> 赞同：0
> 
> 时间：2013-02-12T15:02:12.430
> 
> 标签：c, rrule, libical

这有点令人沮丧。我已经为此工作了一段时间，但我似乎无法让这种方法像[它所说的那样](http://code.ohloh.net/file?fid=Y5GlnUrXqt8JSyZUY3lfPGeUql0&cid=78abnqJuEFA&s=icalrecur_expand_recurrence&mp=1&ml=1&me=1&md=1&browser=Default#L185)工作。

```
#include "icalrecur.h"
#include <time.h> /* for time() */
#include <stdio.h>

int get_occurrences(char* rrule, time_t start, int count)
{
        //char*        rule; /* rule string */
       // *rule = PG_GETARG_CHAR(0);

        time_t   *result[count]; /* output array */

        icalrecur_expand_recurrence(rrule, start, count, *result);

        return (time_t) *result;
}

//time_t *output[5*8];

void main() {
        time_t right_now = time(0);
        char *_rrule = "FREQ=WEEKLY;INTERVAL=2;COUNT=8;WKST=SU;BYDAY=TU,TH";
        get_occurrences(_rrule, right_now, 5);
} 
```

我将此测试文件保存为`ical_recur.h`. 然后我输入 bash：

```
gcc -I/usr/local/libical/include/libical -L/usr/local/libical/lib/ -lical -o hello ical_recur.c 
```

包括`libical.a`库。该`include/libical`目录包含`icalrecur.h`在其中，因此我什至不需要包含整个 ical 库。

```
~: ./hello
Segmentation fault 
```

每当我更改任何指针时，它都会在编译期间开始抱怨某些事情。任何人都可以得到这个工作？源文件来自[github 上的 Marketcircle](https://github.com/Marketcircle/libical)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:08:54.657

查看[文档](http://libical.sourcearchive.com/documentation/0.43-3/icalrecur_8c_488780da8434731021af8d791b087b77.html#488780da8434731021af8d791b087b77)，您似乎有一个不需要的额外间接级别 - 您需要更改：

```
 time_t   *result[count]; /* output array */

    icalrecur_expand_recurrence(rrule, start, count, *result); 
```

至：

```
 time_t   result[count]; /* output array */

    icalrecur_expand_recurrence(rrule, start, count, result); 
```

此外，您将只读字符串文字传递给需要 a 的函数`char *`- 这至少应该给您一个编译器警告（提示：始终使用`gcc -Wall ...`，仔细阅读警告，理解它们并修复它们）。`main()`应该看起来更像这样：

```
int main() {
    time_t right_now = time(0);
    char _rrule[] = "FREQ=WEEKLY;INTERVAL=2;COUNT=8;WKST=SU;BYDAY=TU,TH";
    get_occurrences(_rrule, right_now, 5);
    return 0;
} 
```

还有一些问题：

*   这条线没有做任何有用的事情，但不清楚你想要实现什么：

    ```
    char _size = (char)(((int)'0') + sizeof(result)); 
    ```

    所有这些演员都是“代码味道”，这应该告诉你你在这里做错了什么

*   你的函数被定义为返回 a `int`，但是你试图将你的数组转换为 a`time_t`并返回它，这也是没有意义的——再次打开编译器警告——让编译器帮助你找到并修复你的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T11:51:11.297

现在您可以[将此](https://github.com/petropavel13/pg_rrule)扩展用于 postgresql。

示例用法：

```
SELECT * FROM
     unnest(
         rrule_get_occurrences('FREQ=WEEKLY;INTERVAL=1;WKST=MO;UNTIL=20200101T045102Z;BYDAY=SA;BYHOUR=10;BYMINUTE=51;BYSECOND=2'::rrule,
             '2019-12-07 10:51:02+00'::timestamp with time zone)
     );

          unnest
 ------------------------
  2019-12-07 10:51:02+00
  2019-12-14 10:51:02+00
  2019-12-21 10:51:02+00
  2019-12-28 10:51:02+00
 (4 rows) 
```

# haskell - 递归模式匹配，输出问题

> ID：14835444
> 
> 赞同：0
> 
> 时间：2013-02-12T15:02:12.660
> 
> 标签：haskell

我正在尝试使用模式匹配和递归将列表中的某些单词替换为其他单词。模式匹配并非在所有情况下都有效，并且我的代码在所有情况下都不会使用模式匹配生成更改的字符串列表。

我想知道是否有人可以帮助我确定这是为什么？

```
pattr :: [[Char]] -> [[Char]]
pattr [] = []
pattr ("you":as) = ("u":pattr as)
pattr ("see":"you":as) = ("seaya":pattr as)
pattr ("by":"the":"way":as) = ("btw":pattr as)
pattr ("laugh":"out":"loud":as) = ("lol":pattr as)
pattr ("for":"your":"information":as) = ("fyi":pattr as)
pattr (x:as) = (x:as) 
```

**例子：**

```
GHCi> pattr ["milk", "see", "you", "soon"] 
> ["milk", "see", "you", "soon"] 
GHCi> pattr ["see", "you", "soon"]
> ["cya", "soon"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:07:25.927

你没有在你的最后一个案例中递归。因此，如果列表中的第一个单词与任何模式都不匹配，它就会停止并且不检查列表中后面的单词。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T15:07:47.183

看来您只需要更改最后一行：

```
pattr (x:as) = (x: pattr as) 
```

# node.js - 在选择更改时使用翡翠渲染部分视图

> ID：14835445
> 
> 赞同：0
> 
> 时间：2013-02-12T15:02:21.963
> 
> 标签：node.js, express, pug

我需要执行以下操作，

我有一个`<select>`（团队名称列表），当用户选择一个团队时，我会得到相关信息：团队并显示它。

我如何在翡翠中做到这一点？

我正在尝试以下方法，（但显然我错了，我没有看到很多文档）。

简而言之，我正在`include test.jade`我的主页上做一个`res.render('test', {team: team_obj});`

**玉：**

```
h1 #{team}.name
h2 #{team}.homeGround
h3 #{team}.manager
h4 #{team}.aka 
```

**节点：**

```
collection.findOne(query, function(err, team_obj){
    res.render('test', {team: team_obj});
}); 
```

我正在正确获取信息`team_obj`。

运行应用程序时出现以下错误，

> 团队未定义

现在发生这种情况是因为`test.jade`在我将`team_obj`.

**问题：**

1）我这样做对吗？`include`部分渲染玉视图的正确方法是什么？如果是，我如何确保它仅在用户选择时呈现`option`？

2）我不知道翡翠中是否有部分视图概念？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:57:32.577

1）你应该使用`#{team.name}`

2) 一旦选择器改变，你就不能改变团队对象。模板与数据库结果一起呈现一次。- 此类功能应由客户端 JavaScript 和 AJAX 调用处理。模板中的 partials 只是一种共享模板通用部分的方法，它在 Jade 中通过`include`.

我不知道你在渲染什么，包括什么，什么时候......但是如果你使用像 #{team.name} 这样的模板变量，你必须确保模板是用团队对象渲染的。

# kendo-ui - 网格中的 Kendo DropDownList 验证

> ID：14835451
> 
> 赞同：5
> 
> 时间：2013-02-12T15:02:32.383
> 
> 标签：kendo-ui, kendo-grid

我正在重新审视我在剑道论坛上提出的一个问题（现在是只读的）。这是[原始线程](http://www.kendoui.com/forums/ui/grid/inline-edit---validation-not-working-on-dropdownlist.aspx)。

Jon 提出的解决方案建议：

> 如果您从跨度中拉出验证消息，它将显示（使用 jQuery 将其附加到父元素）。

我已经进行了验证 - 我只是无法显示验证消息（至少在可见的地方）。我不确定要在哪里附加什么。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-07T11:07:14.157

您应该将验证工具提示元素附加`<span class="k-invalid-msg" data-for="name"></span>`到编辑器容器。其中**“名称”**对应于您的编辑器输入的名称。

文档：[columns.editor](http://docs.kendoui.com/getting-started/framework/validator/overview#customizing-the-tooltip-position)

# google-maps-api-3 - 如果我在初始化后自动缩小，谷歌地图 v3 标记管理器不会隐藏标记

> ID：14835453
> 
> 赞同：1
> 
> 时间：2013-02-12T15:02:35.433
> 
> 标签：google-maps-api-3, markermanager

我在谷歌地图上画了一条折线，并在它的每个点上放置了标记。我想隐藏这些标记更高的缩放级别，因此我使用标记管理器。它运作良好。

绘制完所有内容后，使用 google.map.fitBound 命令将地图缩放到折线的边界。但如果它放大到远处，标记将被隐藏，它们不会。它们仍然可见。如果我再次拖动或缩放，它们就会隐藏起来。

我以简单的方式使用markermanager：

```
var aMarkers [...array of markers...],
markerMgr = new MarkerManager(map);

google.maps.event.addListener(markerMgr, 'loaded', function() {
    markerMgr.addMarkers(aMarkers[0], 15, 0);
    markerMgr.addMarkers(aMarkers[1], 12, 0);
    markerMgr.addMarkers(aMarkers[2], 10, 0);
    markerMgr.refresh();
}); 
```

有人遇到过这个问题吗？感谢是提前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T16:08:19.833

我有同样的问题。创建标记时，不要在标记选项中设置“地图”参数。MarkerManager 将在您放大和缩小时将标记添加到您的地图中。

例如：

```
var newMarker = new google.maps.Marker({
    //map: map
    position: markerPosition,
    icon: icon
});
mgr.addMarker( newMarker, 9 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:32:12.493

为什么将标记的最大缩放设置为 0？

```
MarkerManager.addMarkers(aMarkers[0], minZoom, maxZoom(optional)) 
```

[尝试（根据文档](https://github.com/googlemaps/v3-utility-library/blob/master/markermanager/docs/reference.html)，该参数是可选的）：

```
var aMarkers [...array of markers...],
markerMgr = new MarkerManager(map);

google.maps.event.addListener(markerMgr, 'loaded', function() {
    markerMgr.addMarker(aMarkers[0], 15);
    markerMgr.addMarker(aMarkers[1], 12);
    markerMgr.addMarker(aMarkers[2], 10);
    markerMgr.refresh();
}); 
```

[工作示例](http://www.geocodezip.com/v3_markermanager_testA.html)

# google-chrome - 如何使用其 api 将 chrome 应用程序作为常规选项卡打开？

> ID：14835455
> 
> 赞同：1
> 
> 时间：2013-02-12T15:02:41.333
> 
> 标签：google-chrome, google-chrome-app

我想开发一个**打包的 chrome 应用程序**（不是扩展程序），并希望可以将其作为常规选项卡打开，如下图所示。
![在此处输入图像描述](../Images/53f2f7e825b6002382194a5aae26f9bb.png)
我按照官方文档制作了我的第一个应用程序：http:
[//developer.chrome.com/apps/first_app.html](http://developer.chrome.com/apps/first_app.html)

但它无法显示以**常规选项卡、固定选项卡、窗口和全屏**打开的四个选项。

在我的时间里在 chrome 官方网站和 SO 或其他任何地方一次又一次地搜索之后，我找不到如何制作它。

我认为它是清单文件的工作，但我在它的描述中也找不到任何线索。 [http://developer.chrome.com/apps/manifest.html](http://developer.chrome.com/apps/manifest.html)

有人可以给我一些提示吗？

谢谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:47:16.400

您无法为 Chrome 打包应用设置标签行为，只能在 Chrome 托管应用中设置。它们之间有很多差异，但一个非常简短的定义是：

*   **打包应用**程序是外观和感觉与本机应用程序相同的应用程序。他们可以访问传统 Web 应用程序无法访问的更强大的 API（如硬件设备、扩展文件系统等等）。它们是独立的，通常在离线时表现良好。它们也在浏览器之外运行，用户不会将它们视为传统的 Web 应用程序（如在浏览器中运行）；

*   **另一方面，**托管应用程序是 Web 应用程序，位于远程服务器中，比传统 Web 应用程序功能稍强，但比打包应用程序少得多。**它们是从浏览器启动的，一般来说，它们需要网络连接才能正常工作（即它们不是独立的）。**

 **选项卡行为对托管应用程序有意义，因为它们在浏览器内运行，但对打包应用程序不适用，因为它们从不作为选项卡运行。

如果您想开发托管应用程序，[这是文档](https://developers.google.com/chrome/apps/docs/developers_guide)。

对于打包的应用程序，文档就是[您提到](http://code.google.com/chrome/extensions/apps.html)的那个。**

# mysql - 如何将来自 sql 的表中的数据插入到 zend 框架 2 的下拉列表中？

> ID：14835457
> 
> 赞同：0
> 
> 时间：2013-02-12T15:02:45.623
> 
> 标签：mysql, zend-framework2

我需要将多选项插入下拉列表，从我的数据库中的表中获取选项。我创建了如下元素：

```
 $this->add(array(
        'name'       => 'company',
        'type'       => 'Zend\Form\Element\Select',
        //'multiOptions'=> $options,
        'options'    => array(
            'label'        => 'Company',
        ),
        'attributes' => array(
            'style'  => "float:right;",
        ),          
    )); 
```

我想从下拉列表中选择数据库表中的一些值。例如，我有实体联系人，我需要为联系人选择数据库中名为公司的表中的公司。

在阅读了 zend 框架的网站后，我尝试使用以下代码：

```
$params = array(
           'driver'=>'Pdo_Mysql',
           'host'=>'localhost',
           'username'=>'root',
           'password'=>'',
           'dbname'  =>'myDataBase'
            );

$db = new \Zend\Db\Adapter\Adapter($params);
$sql= new Sql($db);

$select = $sql->select();
$select ->from('companies')
    ->columns(array('id','company_name'))
    ->order(" 'company_name' ASC"); 
```

我还在其他一些可以使用函数的网站上阅读：

```
$options = $sql->fetchPairs('SELECT id, name FROM country ORDER BY name ASC'); 
```

但它似乎在 Zend Framework 2 中不再存在。

请各位，帮我一把。如果代码不好并且您有更好的主意，请告诉我。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:31:24.910

这只是一个快速而肮脏的答案，但我想它可以让你开始。

1.  创建一个`ServiceFactory`，这应该在单独的工厂类而不是闭包中完成，但我仍然使用闭包 - 更快地编写;）
2.  从 获取配置，`ServiceLocator`以便您可以访问 DB-Params
3.  创建您的默认 SQL Stuff 以检索`value_options`
4.  `value_options`使用`setValueOptions($valueOptions)`给定表单元素的功能填充

**模块.php`getServiceConfig()`**

```
return array(
    'factories' => array(
        'my-form-factory' => function($serviceLocator) {
            $form   = new My\Form();
            $config = $serviceLocator->get('config');
            $db     = new \Zend\Db\Auth\Adapter\Adapter($config['dbParams']); //or whatever you named the array key

            $sql    = //do your SQL Stuff
            // This is a fake array, it should be your $sql result in the given format
            $result = array('value' => 'label', 'value2' => 'label2'); 

            $form->get('elementToPopulate')->setValueOptions($result);
            return $form;
        }
    )
); 
```

**SomeController.php`someAction()`**

```
$form = $this->getServiceLocator()->get('my-form-factory');

return new ViewModel(array(
    'form' => $form
)); 
```

我希望这能让你开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:43:31.433

您必须在控制器上添加该字段验证才能在其中设置值。

```
$select = $db->select()->where("state_code = ?",$arr["state_code"]);
$resultSet = $cityObj->fetchAll($select);
$cityArr = $resultSet->toArray();

$city_ar = array();
foreach($cityArr as $city){
    $city_ar[$city['id']] = $city['company'];
}
$form->company->setMultiOptions($city_ar);
$form->company->setValue($val["company"]); 
```

通过使用此代码下拉国家/地区具有结果集数组（**$resultSet**）中的值。

# scope - 用作 ServiceStack 的 IoC 时在 autofac 中配置生命周期范围

> ID：14835471
> 
> 赞同：3
> 
> 时间：2013-02-12T15:03:43.897
> 
> 标签：scope, httprequest, servicestack, autofac

我目前正在使用 AutoFac 作为我们的 ServiceStack Web 服务应用程序的 DI 容器。我可以配置接线和所有内容，但是在阅读了有关 Scopes 的部分之后，我不知道在注册我的组件时最好使用哪个范围。在我们的特殊情况下，我认为 PerHttpRequest 范围是可以的，因为（如果我错了，请纠正我）我想在请求结束后立即处理依赖项。

我的问题是，如何在容器中进行设置？我似乎无法在 autofac 包含的方法中找到“PerHttpRequest”生命周期范围。我也不确定 ServiceStack 是否会在幕后为我做某种自动化。

我在 .Net 4 上的 ServiceStack 3.9.35 上使用 Autofac 3.0.1（作为常规 ASP 主机运行，而不是 MVC）。我还将[此处](https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container)描述的类用作 IContainer 适配器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-11T12:34:30.750

我想避免依赖 MVC 的开销，所以第一个答案对我来说不太适用。

相反，我使用 Funq 注册了 PerRequest ILifetimeScope，并在解析依赖项之前解析了 ConatinerAdaptor 中的 ILifetimeScope。

```
public class AutofacLifetimeScopeIocAdapter : IContainerAdapter
{
    private readonly Container _requestContainer;

    public AutofacLifetimeScopeIocAdapter(Funq.Container requestContainer)
    {
        _requestContainer = requestContainer;
    }

    public T Resolve<T>()
    {
        var currentContainer = _requestContainer.Resolve<ILifetimeScope>();

        return currentContainer.Resolve<T>();
    }

    public T TryResolve<T>()
    {
        var currentContainer = _requestContainer.Resolve<ILifetimeScope>();

        T result;

        if (currentContainer.TryResolve<T>(out result))
        {
            return result;
        }

        return default(T);
    }

} 
```

然后用这个初始化

```
_autofacContainerRoot = builder.Build();
        IContainerAdapter adapter = new AutofacLifetimeScopeIocAdapter(container);

        container.Register<ILifetimeScope>((c) => _autofacContainerRoot.BeginLifetimeScope())
            .ReusedWithin(ReuseScope.Request);

        container.Adapter = adapter; 
```

然后清理

```
public override void OnEndRequest()
    {
        var currentContainer = _container.Resolve<ILifetimeScope>();
        currentContainer.Dispose();

        base.OnEndRequest();
    } 
```

这似乎符合 Autofac 的要求——SingleInstance、InstancePerDependency，现在是 perRequest 的 InstancePerLifetimeScope。

HostContext.Instance.Items 集合上的神话响应可能用于消除对

```
var currentContainer = _container.Resolve<ILifetimeScope>(); 
```

分辨率，这应该会提高性能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T15:32:21.820

我想我已经弄清楚了如何完成这项工作（使用 Autofac 2.6，我现在坚持使用它。）它涉及使用以下适配器和 Autofac.Mvc3 包：

```
public class AutofacIocAdapter : IContainerAdapter
{
    private readonly IContainer _autofacRootContainer;
    private readonly Container _funqContainer;

    public AutofacIocAdapter(IContainer autofacRootContainer, Container funqContainer)
    {
        // Register a RequestLifetimeScopeProvider (from Autofac.Integration.Mvc) with Funq
        var lifetimeScopeProvider = new RequestLifetimeScopeProvider(autofacRootContainer,null);
        funqContainer.Register<ILifetimeScopeProvider>(x => lifetimeScopeProvider);
        // Store the autofac application (root) container, and the funq container for later use
        _autofacRootContainer = autofacRootContainer;
        _funqContainer = funqContainer;
    }

    public T Resolve<T>()
    {           
        return ActiveScope.Resolve<T>();
    }

    public T TryResolve<T>()
    {
        T result;
        if (ActiveScope.TryResolve(out result))
        {
            return result;
        }
        return default(T);
    }

    private ILifetimeScope ActiveScope
    {
        get
        {
            // If there is an active HttpContext, retrieve the lifetime scope by resolving
            // the ILifetimeScopeProvider from Funq.  Otherwise, use the application (root) container.
            return HttpContext.Current == null
                        ? _autofacRootContainer
                        : _funqContainer.Resolve<ILifetimeScopeProvider>().GetLifetimeScope();
        }
    }
} 
```

实施步骤：

1.  将 Autofac.Mvc3 NuGet 包添加到您的 Web 项目（注意： 您的项目不使用 MVC**并不**重要。解决方案可能与 Autofac 3 略有不同，它不能使用 Mvc3 集成。）
2.  按照[ServiceStack IoC](https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container)页面为 Autofac 连接自定义 IContainerAdapter，使用以下实现

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T16:43:31.477

注意[ServiceStack 的IOC 中的RequestScope](https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container)只指ServiceStack 内置的Funq IOC。

要在另一个 IOC 容器（如 AutoFac）中使用 RequestScope，您通常需要在请求结束时通知 AutoFac，以便它可以清理其所有请求范围的实例。为此，ServiceStack 提供了`AppHostBase.OnEndRequest()`可以覆盖的钩子，以便在每个请求结束时执行自定义逻辑。

我不熟悉 AutoFac 的自定义生命周期范围的工作原理，但可以在以下位置找到更多详细信息：

*   [AutoFac 的 InstanceScope wiki 页面](http://code.google.com/p/autofac/wiki/InstanceScope)
*   [AutoFac 终身示波器入门](http://nblumhardt.com/2011/01/an-autofac-lifetime-primer/)
*   [回答如何在 MVC 中管理 AutoFac 的请求范围](https://stackoverflow.com/a/11726210/85785)

其他可能对管理 ServiceStack 中的实例有用的信息是，放入`HostContext.Instance.Items`字典或一次性添加 的每个实例都会在[每个请求结束时自动](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.Endpoints/AppHostBase.cs#L126)`HostContext.Instance.TrackDisposable`释放。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-15T09:34:28.427

**2015-11-25 更新**：我通过使用全局请求和响应过滤器更改了实现。我将 ServiceStack V3 和 V4 解决方案都放入了这个[存储库](https://github.com/alexeyzimarev/Autofac.Extras.ServiceStack)，这两个版本都可以作为[nuget 包](https://www.nuget.org/packages/Autofac.Extras.ServiceStack/)使用。

我通过在 Application_BeginRequest 中打开一个新范围并在 Application_EndRequest 中进行处理来解决了这个问题。在容器适配器中，我检查这个范围是否存在并使用它，如果不存在，我使用容器。这允许使用 .InstancePerRequest() 注册范围。

[在这里](http://alexeyzimarev.blogspot.no/2015/04/autofac-and-servicestack-managing-life.html)用要点描述。

# solr - 在 WordDelimiterFilter 之前的 ElisionFilter

> ID：14835473
> 
> 赞同：0
> 
> 时间：2013-02-12T15:03:45.840
> 
> 标签：solr, lucene

在此 Solr 文档页面上，我看到以下评论：

> 注意：最好在 WordDelimiterFilter 之前使用 ElisionFilter。这将防止非常慢的短语查询。

[http://wiki.apache.org/solr/LanguageAnalysis#French](http://wiki.apache.org/solr/LanguageAnalysis#French)

有人可以解释一下为什么它会导致短语查询缓慢吗？实际上，我的 WordDelimiterFilter 配置工作文件，我认为我不需要 ElisionFilter，因为它已经以某种方式包含在 WordDelimiterFilter 配置中。

我只是想知道对性能有什么影响...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:24:09.040

基于[SOLR-1938](https://issues.apache.org/jira/browse/SOLR-1938)，如果您在 WordDelimiterFilter 之前有 ElisionFilter ，则`l'avion`只会生成一个 token `avion`。但是如果 ElisionFilter 不存在，那么根据您的 WordDelimiterFilter 的设置，它可能会生成超过 1 个标记，例如

```
l, avion, lavion 
```

由于`avion`它是由 WordDelimiterFilter 生成的，因此您认为它好像 ElisionFilter 已经包含在其中。

我猜关于慢速短语查询的评论意味着如果`l'avion`被搜索，那么如果 ElisionFilter 不存在，它将搜索多个标记。

**更新：**这篇文章指出了这个问题：[http](http://www.hathitrust.org/blogs/large-scale-search/tuning-search-performance) ://www.hathitrust.org/blogs/large-scale-search/tuning-search-performance它说`What we discovered is that the word “l’art” was being searched as a phrase query “l art”. Phrase queries are much slower than Boolean queries because the search engine has to read the positions index for the words in the phrase into memory and because there is more processing involved.`

所以我猜问题是用双引号搜索`"l'avion"`

# qt - 消失的图标

> ID：14835475
> 
> 赞同：1
> 
> 时间：2013-02-12T15:03:54.937
> 
> 标签：qt

运行我放置在表单设计上的应用程序后，我的图标将隐藏。

我使用 QT 4.8.4 配置这些键 -release -static -opensource -qt-libpng -qt-libjpeg

[在设计模式](http://i.stack.imgur.com/ByodY.png)

[运行应用程序后](http://i.stack.imgur.com/Cgufa.png)

为什么这是幸福？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:10:21.517

您是否制作了资源 (QRC) 文件？如果没有，图标将显示在创建器中，但不会显示在最终编译的可执行文件中。运行应用程序时，图标的相对路径会有所不同，因为相对路径的起点是包含 exe 的目录。尝试使用Qt资源系统：[http ://doc.qt.nokia.com/4.0/resources.html](http://doc.qt.nokia.com/4.0/resources.html)

```
OP: And 1 more thing, when i compile project with shared QT lib then icons are ok on this places in runtime 
```

[编辑] 您也必须将图像格式插件静态链接到您的应用程序（它们不能在运行时动态加载，就像共享库版本一样）。请参阅 developer.qt.nokia.com/doc/qt-4.8/... 了解详细信息。要链接的实际图像格式插件集取决于您使用的图标和其他图形。qt-project.org/forums/viewthread/13367

# vba - 查找以“电子邮件”VBA 开头的列

> ID：14835476
> 
> 赞同：1
> 
> 时间：2013-02-12T15:03:57.780
> 
> 标签：vba, excel

我对VBA的了解非常有限。但是，在 google 的帮助下，我编写了用于搜索名为 Email 的列的脚本。然后，如果它找到它，它会查看此列中是否有任何逗号。如果是，那么它将逗号变为点。但是，此解决方案区分大小写。如果列名略有不同，则它不起作用。到目前为止，我知道在此脚本将清理的文件中使用了 2 个不同的选项 1\. 电子邮件 2\. 电子邮件 - 个人电子邮件

我希望能够使这个脚本在所有电子邮件起始列中工作。我试图将其指定为“电子邮件*”，但它不起作用。有人能帮我吗？

```
Sub mySample()
Sheets("Data").Activate
Dim cell As Excel.Range
Dim ws As Excel.Worksheet
Dim i As Integer
Dim j As Integer

For Each ws In Excel.ThisWorkbook.Sheets
i = ws.Cells(1, Excel.Columns.Count).End(Excel.xlToLeft).Column

For j = 1 To i
    If ws.Cells(1, j).Value = "Email" Then
        Cells.Replace What:=",", Replacement:=".", LookAt:=xlPart, _
SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
ReplaceFormat:=False
    End If
Next j
Next ws
Sheets("Automation").Activate
MsgBox "Removing commas in emails - Done!"

End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T15:26:44.570

我建议您使用不同的方法：而不是循环第一列的槽单元格 - 只需使用**Excel 搜索**来识别电子邮件列：

```
LookupString = "Email"
Set SearchRange = ActiveWorkbook.ActiveSheet.Range("1:1").Find(LookupString, LookIn:=xlValues, LookAt:=xlPart, MatchCase:=False) 
```

使用给定的选项，您将找到正确的任何`LookupString`值匹配，无论列名中的位置和大小写如何。根据需要将部分替换`ActiveWorkbook.ActiveSheet.`为WB / sheet的名称。

此外，您可以使用返回的`SearchRange`属性，例如`Column`来进一步处理列中的数据。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:19:47.287

至于`If ws.Cells(1, j).Value = "Email"`更具包容性，我建议`InStr`改用。这将在单元格中的任何位置搜索字符串“email”，并让您知道它出现的位置。如果它不是 0，则表示找到了该字符串。（更多关于`InStr` [这里](http://www.techonthenet.com/excel/formulas/instr.php)。）

```
For j = 1 To i
    If Instr(1,ws.Cells(1, j).Value,"email",vbTextCompare) > 0 Then
        Cells.Replace... 
```

这`Cells.Replace...`条线对我来说也有点奇怪。这对你来说是否正常工作？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T15:15:21.100

使用[`InStr`](http://msdn.microsoft.com/en-us/library/8460tsh1%28v=vs.90%29.aspx)功能：

```
 If InStr(UCase(ws.Cells(1, j).Value), UCase("Email")) Then 
```

`UCase`函数将字符串转换为全部大写，因此您的比较不再区分大小写

# java - Java奇怪的ceil转换

> ID：14835479
> 
> 赞同：0
> 
> 时间：2013-02-12T15:04:02.567
> 
> 标签：java, decimal, rounding

我不知道为什么，但是如果我将参数从小数更改为分数，我会得到两个不同的结果。

这些方法将返回确切的值。如果它是小数，我正在尝试四舍五入，例如：

> 0.0 -> 0
> 
> 0.1 -> 1
> 
> 0.4 -> 1
> 
> 0.5 -> 1
> 
> 0.6 -> 1
> 
> 1.0 -> 1
> 
> 1.1 -> 2

```
// accepts Double
private void myRound(Double d){
   int res = (int)Math.ceil(d);
   return (res <= 0 ? 1 : res);
}

// acepts int
private void myRound(int i){
   int res = (int)Math.ceil(i);
   return (res <= 0 ? 1 : res);
} 
```

例子：

```
System.out.println(myRound(14 / 10)); 
```

> 输出：1

```
System.out.println(myRound(1.4); 
```

> 输出：2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T15:06:03.310

问题是首先转换为整数，其中 (14/10) 为 1，然后将其上限设为 1。1.4 是双精度数，因此将其设为双精度数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T15:08:45.737

`14/10`，正如您所写的那样，是`1`，因为两者`14`和`10`都将是`int`，所以结果是`int`.

您列为输出的内容与您的代码不匹配（尤其是因为您显示的代码从不调用`myRound`），但我怀疑这将是您实际看到的任何内容的解释。

# sql - 随机化共享某个属性的查询结果

> ID：14835481
> 
> 赞同：-1
> 
> 时间：2013-02-12T15:04:05.767
> 
> 标签：sql, postgresql

我想在 Postgres 中运行一个查询，该查询按预期返回结果集（比如`SELECT * FROM products ORDER BY created_at DESC`），但是稍微打乱结果，这样你就不会有太多连续的结果共享相同的`supplier_id`值。

这一点尤其重要，因为每个供应商的产品往往在大致相同的时间进口，制造`created_at`相同，这意味着几页结果通常只有 1 个供应商的产品。

你怎么混？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:39:52.640

如果我最终正确理解了您的问题，则[窗口功能`row_number()`](http://www.postgresql.org/docs/current/interactive/functions-window.html)应该可以正确地完成工作`PARTITION`：

```
SELECT *
FROM  (
   SELECT *, row_number() OVER (PARTITION BY created_at, supplier_id
                                ORDER BY created_at DESC) AS rn
   FROM   products
   ) a
WHERE  rn <= X
ORDER  BY created_at DESC 
```

`ORDER BY`in 子句是可选的，`OVER`但它在我使用 Postgres 9.1 的测试中加快了执行速度，因为它与 final`ORDER BY`子句同步。

最多可以`X`同时选择来自同一供应商的行。如果您需要真正的随机选择，则必须在子句`random()`中另外排序。`OVER`

除此之外，这不是“随机化”或“重新洗牌”，而是抑制多余的行。如果您希望显示这些行（超过`X`），则必须定义排序顺序中的位置。不过，这将不可避免地打破时间顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:20:25.250

我的理解是，您希望按时间顺序对结果进行排序，但是对于 的特定值`created_at`，只有一个不同的值，`supplier_id`并且您希望有多个值，假设它们在排序列表中足够接近。

关键问题是 的分辨率`created_at`，无论它是什么（`timestamp`具有亚秒级分辨率，`timestamp(0)`将具有一秒的分辨率）在直接用作排序标准时都太高了。

您可以尝试按时间范围排序。例如：

```
ORDER BY (extract(epoch from created_at)/3600)::int, RANDOM() 
```

将首先按插入条目的小时数（3600 秒）排序，测量为自 70 年 1 月 1 日以来经过的小时数，然后使用二级排序（随机）随机排列此范围内的结果。如果在同一小时内插入不同供应商的可能性仍然太小，则将其设置为几个小时或几天。

# android - OpenGL简单的triangle_strip渲染

> ID：14835484
> 
> 赞同：1
> 
> 时间：2013-02-12T15:04:15.067
> 
> 标签：android, opengl, andengine, vbo

我有问题要使用 AndEngine 绘制由 triangle_strip 和 line_strip 绘制的网格。

我正在使用 triangle_strip 生成 2d 地形，三角形是通过这种方式创建的

```
 1  3
    |\ |\
    | \| \
    0  2  4

    final int pSegmentsCount    = 51;                       
    final int pVertexCount      = ( Mesh.VERTEX_SIZE * (pSegmentsCount) );  
    final float pColor          = new Color(0f,0f,0f).getABGRPackedFloat();
    final float pSegmentWidth   = ( CAMERA_WIDTH/pSegmentsCount );

    float[] pBufferData = new float[pVertexCount];      
    mHeightOffsetCurrent = new float[pVertexCount];     
    float x = 0f,y = 0f;
    for (int i = 0;i<(pSegmentsCount);i++){
        if (i%2!=0) { //every 3rd point goes up 2-4-6 , 0-1-3-5 stays down at 0 , x increments every third point
            y = 200;
        } else {
            x = pSegmentWidth*i; //step right by segment
            y = 0;
        }
        mHeightOffsetCurrent[i] = 0; //init default offset 
        pBufferData[(i * Mesh.VERTEX_SIZE) + Mesh.VERTEX_INDEX_X] = x;
        pBufferData[(i * Mesh.VERTEX_SIZE) + Mesh.VERTEX_INDEX_Y] = y;
        pBufferData[(i * Mesh.VERTEX_SIZE) + Mesh.COLOR_INDEX] = pColor;
    }
    pBufferData[((pSegmentsCount-1) * Mesh.VERTEX_SIZE) + Mesh.VERTEX_INDEX_Y] = -300;

    final VertexBufferObjectManager VBOM = getVertexBufferObjectManager();
    final HighPerformanceMeshVertexBufferObject pMeshVBO = new HighPerformanceMeshVertexBufferObject(VBOM, pBufferData, pVertexCount, DrawType.DYNAMIC, true, Mesh.VERTEXBUFFEROBJECTATTRIBUTES_DEFAULT);
    pMesh = new Mesh(0, 0,pVertexCount,DrawMode.LINE_STRIP,pMeshVBO); 
```

我正在更改最后一个顶点 y 位置以更好地说明它

这是我得到的，

line_strip ![在此处输入图像描述](../Images/00625ca571b48c350b4c2f10c82c0624.png)

三角带 ![在此处输入图像描述](../Images/2a15d5d4e6e00aa99aa3cdc681b320c0.png)

当我将最后一个点的 Y 设置为 0 时，我仍然看到渐变线到起点。

我做错了什么？为什么最后一个元素与第一个元素连接以及如何解决这个问题？数组由 glDrawArrays 绘制。

```
public static final int VERTEX_INDEX_X = 0;
public static final int VERTEX_INDEX_Y = Mesh.VERTEX_INDEX_X + 1;
public static final int COLOR_INDEX = Mesh.VERTEX_INDEX_Y + 1;
public static final int VERTEX_SIZE = 2 + 1; 
```

# sql - 添加信息、xml 列或新表？

> ID：14835486
> 
> 赞同：1
> 
> 时间：2013-02-12T15:04:19.193
> 
> 标签：sql, database-design

我们想扩展我们的数据库以创建多语言支持，但我们不确定如何做到这一点。我们的数据库如下所示：

ID——名称——描述——（很多不相关的列）

选项 1 是在表中添加一个 xml 列，在该列中我们可以存储我们需要的信息，如下所示：

```
<translation>
    <language value=’en’&gt;
        <Name value=’’&gt;
        <Description value=’’&gt;
    </language>
    <language value=’fr’&gt;
        <Name value=’’&gt;
        <Description value=’’&gt;
    </language>
</translation> 
```

诀窍和优点是当我删除行时，我也删除了翻译。

选项2是添加一个额外的表，创建一个表来存储信息很容易，但是在获取信息时需要内部连接，并且在删除原始行时需要更努力地删除行。

在这种情况下，首选方案是什么？或者还有其他好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T17:23:02.340

我建议使用“关系”方法，即单独的翻译表。考虑这样做：

![在此处输入图像描述](../Images/8c1c1eb8d1df07746fa3d4085523d287.png)

这个模型有一些很好的属性：

*   对于每个多语言表，创建一个*单独*的翻译表。这样，您可以使用适合该特定表的字段，并且翻译不会“错误连接”到错误的表。
*   与 XML 不同，LANGUAGE 表和相关联的 FOREIGN KEY 的存在确保了不存在语言的翻译不能存在。
*   [与 XML 不同， ON DELETE CASCADE](http://www.codesynthesis.com/~boris/blog/2012/04/12/explicit-sql-delete-vs-on-delete-cascade/)引用操作将确保在删除语言时不会留下“孤立”翻译。
*   虽然 XML 在更简单的情况下可能更快，但我怀疑 JOIN 在语言数量增加时更具可扩展性。¹无论如何，**测量**差异并自行决定它是否足够显着。
*   NAME 和DESCRIPTION 等单独的字段可能更容易索引。对于 XML，您可能需要一个对 XML 有特殊支持的 DBMS，或者可能需要某种全文索引。
*   NAME 和DESCRIPTION 等字段可能只是常规的VARCHAR。OTOH，将它们放在一起可能会产生对于常规 VARCHAR 而言太大的 XML，从而迫使您使用 CLOB/BLOB，这可能有其自身的性能问题。
*   如果您的 DBMS 支持集群（见下文），则整个转换表可以存储在单个 B-Tree 中。XML 有很多冗余数据（开始和结束标记），可能使它比 B-Tree 更大且对缓存不太友好（即使我们计算所有相关的开销）。

您会注意到，上面的模型使用[识别关系](https://stackoverflow.com/a/10658665/533120)和生成的 PK: {LANGUAGE_ID, TABLEx_ID} 可用于[聚类](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)（因此属于同一语言的翻译在物理上紧密地存储在数据库中）。只要您的主要（或“热”）语言*很少*，这应该没问题 - 缓存是在数据库页面级别完成的，因此避免在同一页面中混合“热”和“冷”数据可以避免缓存“冷”数据（并使缓存“更小”）。

OTOH，如果您经常需要查询多种语言，请考虑将聚类键顺序翻转为：{TABLEx_ID, LANGUAGE_ID}，以便同一行的所有翻译在物理上紧密地存储在数据库中。一旦您检索到一个翻译，同一行的其他翻译可能已经被缓存。或者，如果您想在单个查询中提取多个翻译，您可以使用更少的 I/O 来完成。

* * *

*¹我们可以只加入所需语言的翻译。对于 XML，您必须先加载（并解析）整个 XML，然后再决定只使用与所需语言相关的一小部分。每当您添加新语言（以及与 XML 相关的翻译）时，即使您很少使用新语言，它也会减慢现有行的处理速度。*

# batch-file - 批处理设计模式

> ID：14835489
> 
> 赞同：1
> 
> 时间：2013-02-12T15:04:23.647
> 
> 标签：batch-file, batch-processing

无法支持实时 Web 服务接口的合作伙伴必须将 CSV 文件 SFTP 到我的 linux 环境。

该文件被压缩和加密。sftp 服务器与将 CSV 数据处理到我的应用程序数据库中的虚拟服务器不同。

我不需要技术步骤（bash 脚本等）的帮助，但我正在寻找有助于满足以下要求的文件管理约定：

*   良好的可审计性
*   非破坏性
*   可恢复

基本上，我试图弄清楚何时制作文件的副本是有意义的，何时重命名它以指示文件的某些处理步骤已完成等（例如，我是保留 zip 文件还是删除它们解压后？）

回复中会有个人偏好，但我正在寻找它；向有更多使用此类界面的经验的人学习。这似乎比我自己发明东西要好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:38:13.860

如果文件在网络上和文件设置中加密，则除非在另一个文件中解析文件，否则无法成功传输。您可以尝试让 sftp 服务器将文件转发到单独的机器上，但这只会导致更多问题，因为基于文件的加密类型。

# javascript - Javascript 和 HTML - 变量不显示

> ID：14835490
> 
> 赞同：0
> 
> 时间：2013-02-12T15:04:32.350
> 
> 标签：javascript, html, mixpanel

我在 HTML 中有以下代码片段：

```
 <form class="navbar-search pull-right search-query" value = "" action="/search/?q=" style="line-height:25px;">
    <input type="text" id="navbarsearch" class="search-query span2" style="border-radius:14px 14px 14px 14px;" name = "q" placeholder="Search">
      <i class="icon-search icon-white" onclick="document.forms.search.submit();"></i>
         &nbsp;&nbsp;&nbsp;
 </form> 
```

我正在尝试按如下方式将此变量传递给 Javascript，但由于某种原因，我认为查询变量没有被正确传递......

```
<script type="text/javascript">
    $("#navbarsearch").click(function() {
        // This sends us an event every time a user clicks the button
        mixpanel.track('SearchQuery', {'query': document.getElementById('navbarsearch').value, 'url' : window.location.pathname});
    });
</script> 
```

该操作显示在 MixPanel 中，但查询变量未显示。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:06:42.320

你需要把它放在document.ready里面：

```
$(function() {   //  <--- there.
    $("#navbarsearch").click(function() {
    mixpanel.track(
        'SearchQuery',
        {
            'query': $(this).val(),   
            'url' : window.location.pathname
        }
    );
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:07:34.423

当用户用鼠标点击时，点击事件被触发。我想你想听击键？

尝试：

```
$("#navbarsearch").keydown(function() {
    mixpanel.track('SearchQuery', {
         'query': document.getElementById('navbarsearch').value,
         'url' : window.location.pathname
    });
}); 
```

# asp.net - 与 asp.net mvc4 web 项目分开组装的模型

> ID：14835500
> 
> 赞同：1
> 
> 时间：2013-02-12T15:05:30.820
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, model, assemblies

我有以下项目的解决方案：

*   **App.Web.Private** - 管理 Web 界面。
*   **App.Web.Public** - 最终用户公共界面。
*   **App.Web.Core** - 私有和公共接口的 Commons。

我想知道如何将我的模型与*公共*和*私有*Web 界面分开并将它们放入*App.Web.Core*？

我尝试在 web.config 中添加命名空间，但似乎无法正常工作，我总是得到一个*缺少的程序集引用*......

## 更新

注意：*私有*和*公共*接口都引用*App.Web.Core*。这个问题与这种奇怪的行为有关，尽管参考已经完成，但项目看不到它。正如我在原始问题中提到的，我还在 web.config 中添加了引用。

## 更新 2

这是错误的屏幕截图： ![错误](../Images/802726e6d7f1e3dff1aa3c8bd7e56020.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T15:52:05.510

尝试添加`@using App.Web.Core`到视图的顶部。如果这行得通，那么你就会知道你的物理内容是正确的。然后去检查错别字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T15:10:47.417

在您的解决方案中，右键单击引用，添加 App.Web.Core

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T15:27:48.640

在 Visual Studio 2010 中：

*   右键单击“引用”，然后单击“添加引用...”。
*   选择 App.Web.Core 项目并单击“确定”。

现在，当您想要使用 App.Web.Core 中的这些模型时，您还需要在类的顶部添加一条 using 语句。

例子：`using App.Web.Core.Models;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T15:39:49.020

检查已构建公共和私有项目的 .Net 版本。Project Core 可能位于旧版本的 .Net 上，而 Public 和 Private 位于新版本上。

要检查版本打开项目属性页面并验证。

# jquery - 如何使用 jQuery 扩展动态加载表单的范围？

> ID：14835505
> 
> 赞同：0
> 
> 时间：2013-02-12T15:05:42.257
> 
> 标签：jquery, forms

我有一个页面有两种模式：查看和编辑。当我单击编辑按钮时，我使用 jQuery 将表单加载到页面正文中。我想做的是将标题和类别字段移动到通常以“查看”模式出现的页面标题。问题是表单标签仍在正文中。什么是扩展表单标签范围以包含标题的好方法？我已成功将标题和类别字段移至标题，但它们现在超出了表单的范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:50:09.347

我使用 unwrap 和 wrap 解决了这个问题：

```
var form = $("#my_form");
form.children().unwrap();
$('#full_page').wrap(form); 
```

# php - 加载新标记并删除旧标记。[复制]

> ID：14835506
> 
> 赞同：0
> 
> 时间：2013-02-12T15:05:46.580
> 
> 标签：php, ajax, google-maps

如何以时间间隔删除旧标记并自动将其替换为新标记。我正在使用谷歌地图创建一个真正的跟踪器。`

```
var markersArray = [];

function initialize() {

 var myLatlng = new google.maps.LatLng(39, -86);
 var map = new google.maps.Map(document.getElementById('googleMap'), {
   zoom: 1,
   center: myLatlng,
   mapTypeId: google.maps.MapTypeId.ROADMAP
 });

$(function () {
    $(document).ready(function(){
        setInterval(function(){
                $.ajax({                                      
                url: 'real.php',                  //the script to call to get data          
                //data: "",                       
                dataType: 'json',                //data format      
                success: function(data){          //on recieve of reply                          

var locations = data;

var infowindow = new google.maps.InfoWindow();
var marker, i;
deleteOverlays();
for (i = 0; i < locations.length; i++) {  

  marker = new google.maps.Marker({
    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
    map: map
  });
 markersArray.push(marker);

  google.maps.event.addListener(marker, 'click', (function(marker, i) {
    return function() {
      infowindow.setContent(locations[i][0]);
      infowindow.open(map, marker);
    }
  })(marker, i));
}

                } 
            });
        }, 1000);

    });
 });
}
initialize(); 
```

如何删除我使用 clearOverlays 但地图中未显示任何标记的标记。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:29:30.163

要删除标记，您需要将其映射设置为 null：

```
for (var ii = 0; ii < markers.length; ii++) {
  markers[ii].setMap(null);
} 
```

或者，根据您的情况，您可以只更新标记的位置：

```
marker.setPosition(newLatLng); 
```

# c# - 无法导入 System.Windows.Controls

> ID：14835507
> 
> 赞同：14
> 
> 时间：2013-02-12T15:05:46.827
> 
> 标签：c#, .net, visual-studio, import, visual-studio-2012

我正在尝试使用`System.Windows.Controls.TextChangedEventArgs`，但我无法导入`System.Windows.Controls`。当我尝试添加引用时，`System.Windows.Controls`不是我可以选择的程序集之一。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-07-17T11:15:40.907

接受的答案会告诉您问题，但不会告诉您如何解决。我将添加此内容以供将来的访问者使用。要解决此问题，您需要添加对`PresentationFramework.dll`.

**1**转到`Solutions Explorer`（它在您的 IDE 的右侧）> 右键单击`References`

![在此处输入图像描述](../Images/ef8ce7c819f0e39cb8c95895884642e2.png)

**2**选择`Add Reference`

在打开的窗口中，查找`Presentation Framework`，选中该框并单击确定。就这样。这是向您的项目添加引用的方法。

![在此处输入图像描述](../Images/e787835c8b250bf2df4be231b589b8f7.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-12T15:06:28.207

`System.Windows.Controls`是一个*命名空间*，其中包含定义在`PresentationFramework.dll`.

但是，如果您还没有对该程序集的引用，那么您可能做错了什么。
你确定你真的在使用 WPF 吗？

# xsd - 导出 XSD 元素时出现 SVCUTIL 错误 - maxoccurs 必须 = 1

> ID：14835508
> 
> 赞同：1
> 
> 时间：2013-02-12T15:05:48.023
> 
> 标签：xsd, svcutil.exe, complextype

使用 Svcutil 将 XSD 转换为 C# 对象时，我遇到了一个非常奇怪的错误。

这是我的 XSD

```
<xs:element name="TestResults">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="TestResult" type="TestResultType" minOccurs="0" maxOccurs="unbounded"/>
            <xs:element name="atoken" type="IdentifierType"/>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

当我运行 Svcutil 时，我得到的错误是

```
D:\CambridgeAssessment\Documents\CA\BeaconSchemas-20130211>svcutil /dconly testResults.1.0.xsd

Error: Type 'TestResults' in namespace 'http://ucles/schema/ukba/TestResults/1/0
' cannot be imported. 'maxOccurs' on element 'TestResult' must be 1\. Either chan
ge the schema so that the types can map to data contract types or use ImportXmlT
ype or use a different serializer.

If you are using the /dataContractOnly option to import data contract types and
are getting this error message, consider using xsd.exe instead. Types generated
by xsd.exe may be used in the Windows Communication Foundation after applying th
e XmlSerializerFormatAttribute attribute on your service contract. Alternatively
, consider using the /importXmlTypes option to import these types as XML types t
o use with DataContractFormatAttribute attribute on your service contract 
```

如果我设置 'TestResult' 属性 'maxOccurs' = 1，那么一切正常。如果我完全删除 'atoken' 元素，它也适用于 'TestResult' 属性 'maxOccurs' = 'unbounded'。

查看[DataContractSerializer](http://msdn.microsoft.com/en-us/library/ms733112%28v=vs.100%29.aspx)的架构引用，我发现以下内容：

```
<xs:element> can occur in the following contexts:

It can occur within an <xs:sequence>, which describes a data member of a regular (non-collection) data contract. In this case, the maxOccurs attribute must be 1\. (A value of 0 is not allowed).

It can occur within an <xs:sequence>, which describes a data member of a collection data contract. In this case, the maxOccurs attribute must be greater than 1 or "unbounded". 
```

因此，看起来在我的特定 XSD 中，Svcutil 认为这两个元素都应该有 'maxOccurs'=1，即使是一个集合也是如此。

这种行为正确吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:08:29.770

感谢您提供有关如何解决问题的建议。

经过各种尝试，下面是我终于让它工作的方式。我不得不添加一个包含我的“TestResult”集合的中间元素。这样，我的外部序列包含两个都是“简单”元素的元素（尽管它们不是真的）

```
<xs:element name="TestResults">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="Token" type="IdentifierType" minOccurs="1" maxOccurs="1"/>
      <xs:element name="TestResultList">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="TestResult" type="TestResultType" minOccurs="0" maxOccurs="unbounded"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:04:54.500

```
<?xml version="1.0" encoding="UTF-8"?> 
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">   
<xs:element name="TestResults" >
<xs:complexType>
<xs:sequence>
    <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element name="TestResult" type="xs:string"/>
        <xs:element name="atoken" type="xs:string"/>
    </xs:choice>
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:schema> 
```

请看一下 [XSD - 如何允许任意顺序的元素任意多次？](https://stackoverflow.com/questions/2290360/xsd-how-to-allow-elements-in-any-order-any-number-of-times)

# excel - 如何在 VBA 中获取 PowerPivot 数据？

> ID：14835510
> 
> 赞同：0
> 
> 时间：2013-02-12T15:05:55.907
> 
> 标签：excel, powerpivot, vba

我将数据导入工作簿中的 PowerPivot（基于 sql 查询）表。我需要将此数据复制到工作表中以进行一些修改。如何用 VBA 完成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:31:06.617

没有直接的 API，但一种解决方法是将数据复制到工作表中并将数据格式化为表格，然后创建一个“链接表”来导入数据。PP 访问的数据库确实有 API 可以直接从 Excel 中访问它们。

Microsoft Office 提供可用于从以下数据源检索数据的驱动程序：

Microsoft SQL Server Analysis Services（OLAP 提供程序） Microsoft Office Access dBASE Microsoft FoxPro Microsoft Office Excel Oracle Paradox 文本文件数据库

[http://office.microsoft.com/en-us/excel-help/use-microsoft-query-to-retrieve-external-data-HA010099664.aspx](http://office.microsoft.com/en-us/excel-help/use-microsoft-query-to-retrieve-external-data-HA010099664.aspx)

# sql - 评分系统的 SQL 数据库模型

> ID：14835512
> 
> 赞同：0
> 
> 时间：2013-02-12T15:06:02.293
> 
> 标签：sql, postgresql, scala

完成以下任务的最佳方式是什么：我可以通过 API 访问一些玩家信息。我现在想在 sql 数据库中保留使用玩家信息计算分数的方式。一个人将如何做到这一点？

例如：

我想根据 RushingYards: Int、Touchdowns: Int 和 Interceptions: Int 计算分数。几乎，我想创建一个具有以下规格的评分系统：

```
1 point for every 25 RushingYards,
3 points for every Touchdown
2 points for every Interception 
```

用纯代码编写它很简单，但是我如何将它放在 SQL DB 中，因为我需要多个动态创建的“评分系统”？最后，我想检索持久化的数据并用它来计算 Scala 中的分数。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:17:37.317

没有一些假设很难明确回答，但我会做出这些假设并尝试。

我只需将从 API 检索到的数据存储在数据库中。如果 API 高度可用并且我可以随时（再次）获取数据，我什至可能不会这样做。

如果规则很简单并且仅限于您所概述的内容（加上有限数量的附加规则或规则类型），您只需将规则编码到应用程序逻辑中并拥有一个存储规则输入的表。例如，规则输入表可能类似于：

```
RuleInputs
------------------------ 
RuleInputId 
LeagueId 
NumPointsPer25Yards 
NumPointsPerTouchdown 
NumPointsPerInterception 
NumPointsPerSack 
```

这被过度简化了，但你明白了。

如果规则可以随时更改，并且规则的类型也可以更改（例如，每次教练对裁判大喊大叫时 1 分），您可能正在寻找更多的业务规则引擎，它必须允许灵活的字段/元数据和可插入的应用程序逻辑。

一种元数据模型是[Entity-Attribute-Value](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)。您还可以考虑为无模式模型提供某种 NoSQL 解决方案。除非绝对必须，否则我建议不要使用元数据模型。如果您可以定义所有可能的前端规则类型，那么系统将变得更加简单。构建一个可插拔的规则引擎对于 SO 来说太过分了（而且不是一件小事）。我会环顾四周，看看是否存在某种开源系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:10:18.507

没有您的表格的任何详细信息，就不可能有真正的答案。但这是一种可能的方法：

```
SELECT 
   SUM(CASE type
       WHEN 'RushingYards' THEN (FLOOR(yards / 25))
       WHEN 'Touchdown' THEN 3
       WHEN 'Interception' THEN 2
   ) AS points
FROM player_actions
GROUP BY ... 
```

一旦你弄清楚你的表模式应该是什么，查询就会自然而然地流动。

# git - 即使没有进行本地更改，本地 git clone 也领先于原点

> ID：14835515
> 
> 赞同：2
> 
> 时间：2013-02-12T15:06:07.740
> 
> 标签：git, deployment, chef-infra

我们使用 Git 来管理和部署代码。我在 Ops 团队，负责部署。我们的开发人员进行更改并将代码推送到 Github，我们（Ops）使用一些托管流程来提取生产代码并进行部署。

过程是这样的：

背景

*   开发人员做事。这些东西最终出现在 Github 中，开发人员告诉我们是这样的。
*   我们有一个本地“登台”克隆和一个本地“部署”裸 git 存储库。本地 git clone 有两个遥控器，Github 为“origin”，本地裸仓库为“deploy”
*   我们在 Web 服务器上使用 chef 通过从“deploy”远程提取的 chef git 资源实际部署代码
*   我们有“部署”遥控器，因此在开发完成的东西和我们的部署时间之间有一个门控机制。（而不是直接从 Github 部署）

实际部署过程

1.  `cd into local clone`
2.  `git checkout branchname`
3.  `git pull origin branchname`
4.  `git push deploy branchname`

所有这些都是部分自动化的，并且正在转向完全自动化。因此，我们小心不要对暂存克隆进行本地更改，并且我们希望该`git status`克隆的输出只会是`nothing to commit (working directory clean)`

**但是**，本周我们收到了一条奇怪的消息。部署克隆声明它**提前 80 次提交**！即使它也说`nothing to commit`。

```
# On branch branchname
# Your branch is ahead of 'origin/branchname' by 80 commits.
#
nothing to commit (working directory clean) 
```

最后，本身并没有真正的问题。此克隆中的提交 SHA256 哈希匹配，以及所有 Web 服务器上部署的代码。我没有进行实际的 rsync 比较，但我非常有信心实际代码本身已正确部署。

**我想知道这是怎么发生的，如果它很糟糕，以及如何在不删除本地克隆并重新开始的情况下清理它。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:12:09.090

如果`deploy`和`local`repos 都从同一个 ' `origin`' (GitHub) 克隆，您的过程显示 only`local`正在执行`git pull origin`.

存储库`deploy`从不从中获取任何东西`origin`（它只接收来自 的提交`local`）。
这意味着`deploy`仍然相信提交不会在起源上（至少它知道的起源）。从 repo 中执行
的简单操作将使该状态更清晰。`git fetch origin``deploy`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:20:16.987

发生这种情况可能有多种原因，例如`origin/branchname`已重置为先前的提交，或者有人`another_repo/branchname`错误地在本地存储库中提取了一个。但是，您似乎误解了该消息的实际含义。

想象一下以下提交：

```
A -- B -- C -- D                origin/branchname
      \         \
        E ------ F -- G -- H    branchname 
```

现在，如果您还没有触及本地存储库，那么显然它是干净的并且您会收到`nothing to commit (working directory clean)`消息。但是，`branchname`确实领先`origin/branchname`3 次提交。这仅仅意味着您在当前分支中有 3 次提交在`origin/branchname`. 当然，仍然没有什么可承诺的！（虽然有*什么*要推动的。这两个是不同的）

这是发生这种情况的一种可能情况：

```
 E -- F        origin/otherbranch
                /       \
A -- B -- C -- D         \      origin/branchname
                \         \
                 --------- G    branchname 
```

如果您（例如错误地）说过：

```
git checkout branchname
git pull origin otherbranch 
```

然后你有 2 个提交`branchname`在`origin/branchname`.

同样，您需要更多分析才能知道到底发生了什么。也许a`git log --pretty=oneline --graph`会帮助找到问题。完成此操作后，您可以尝试重置回正确的先前状态。

# android - 根据 Activity 的广播接收器更新片段 ui

> ID：14835523
> 
> 赞同：2
> 
> 时间：2013-02-12T15:06:32.263
> 
> 标签：android, android-fragments, broadcastreceiver, android-service

首先让我说我已经阅读了许多与 SO 上的片段相关的问题。但是，我似乎找不到与我完全相同的情况。

我有使用 PageAdapter 的 myActivity，每个页面都是一个片段。我还有一个服务，它接收有关网络连接等的更新。该服务触发 myActivity 中的接收器。myActivity 需要更新 FragmentPage1，但因为我正在使用 pageAdapter 并在运行时创建我的片段，所以我无法“findFragmentbyId”等。我不需要传递任何数据，我只需要触发 FragmentPage1 类中的函数即可。请参阅下面的代码片段。

```
public class myActivity extends FragmentActivity implements ViewPager.OnPageChangeListener {

    FragmentManager fm = getSupportFragmentManager();
    mPagerAdapter = new PagerAdapter(fm);
    mPager.setAdapter(mPagerAdapter);
    mPager.setOnPageChangeListener(this);

    // add tabs. Use ActionBar for 3.0 and above, otherwise use TabWidget
    final ActionBar bar = getActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    bar.addTab(bar.newTab()
            .setText(R.string.fragment_page_1)
            .setTabListener(new ActionBarTabListener(mPager)));
    bar.addTab(bar.newTab()
            .setText(R.string.fragment_page_2)
            .setTabListener(new ActionBarTabListener(mPager)));

     private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive (Context context, Intent intent){
                 if(intent.getAction().equals(InterfaceManager.BROADCAST_UPDATE_CONNECTION_STATS)) { 
                     updateFragmentPage2();
                 } else if (intent.getAction().equals(InterfaceManager.BROADCAST_UPDATE_RULES)) {
                     UpdateFragmentPage1();
                 }
            }
     };
}

public class FragmentPage2 extends Fragment implements OnCheckedChangeListener, OnClickListener  {
    public void UpdateFragmentPage2() {
        //update list view
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:16:24.757

根据您的代码，您可以快速执行以下操作。

```
int tabIndex = 0;
MyCustomFragment frag = getFragmentManager().findFragmentByTag(getActionBar().getTabAt(tabIndex).getText().toString());
frag.updateFragmentContent(); 
```

创建一个自定义基础片段 MyCustomFragment 并拥有一个抽象方法 updateFragmentContent()，然后您只需要更改选项卡索引并且无需特殊类型转换

请注意，以上是一种更清洁的方法。使用您现有的代码，您仍然可以有两个单独的类型转换并调用两个单独的方法来更新相应的片段。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-23T21:16:01.393

由于`BroadcastReceiver`,`Fragment`和之间的复杂通信`Activity`，我遇到了类似的问题并选择摆脱这种扭曲，并使用以下内容：

当`BroadcastReceiver` `onReceive()`方法被调用时，将一个作为指示标志添加`boolean`到Fragment 应该做的事情，并在 Fragment 方法中根据方法中的集合执行所需的逻辑。`SharedPreferences``onResume()``SharedPreferences` `boolean``BroadcastReceiver` `onReceive()`

尽管有更好的做法，但**我没有在长期运行的应用程序上测试这种方法。**

# c++ - 当多维数组具有动态边界时，如何通过引用传递它？

> ID：14835524
> 
> 赞同：-2
> 
> 时间：2013-02-12T15:06:34.857
> 
> 标签：c++

我有一个 int 数组 myArray[x][y] 并且我希望通过引用将它传递给一个函数，但它似乎需要常量边界或一些奇怪的指针解决方法？我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:24:37.037

尝试：

```
template<int X, int Y>
void ArrayFn( int (&in)[X][Y] )
{
    in[X-1][Y-1] = 666; // or whatever
} 
```

并称它为：

```
int arr[3][3];
ArrayFn( arr ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:12:21.470

具有自动存储持续时间的数组始终需要编译时常量边界。`int array[x];`您可以在 GCC 中执行where`x`不是编译时常量的事实仅仅是一个不可移植的扩展。实际上，您不能通过引用函数来传递这样一个非标准数组。

您可以将边界与数组一起传递，但使用标准容器（例如`std::vector`.

# excel - 如何将两个以上文件中的工作表合并为一个文件中的一个工作表？

> ID：14835531
> 
> 赞同：0
> 
> 时间：2013-02-12T15:06:57.403
> 
> 标签：excel

例如，我有 3 个 excel 文件，每个文件包含 1 个工作表，这 3 个工作表具有相同的列标题名称。

文件 A 有一个名为“AA”的工作表，其列标题名称为“IC”、“名称”。文件 B 有一个名为“BB”的工作表，其列标题名称为“IC”、“名称”。文件 C 有一个名为“CC”的工作表，其列标题名称为“IC”、“名称”。. . .

现在，我想将文件 A、B、C 中工作表“AA”、“BB”和“CC”中“IC”、“名称”下的值组合到文件中的一个工作表中。

文件 ZZ 具有名为“zz”的工作表，其列标题名称为“IC”、“名称”，其中包含文件 A、B 和 C 中的所有行值...

任何人都可以分享如何做到这一点？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:34:09.467

在不知道您的工作簿（您称它们为文件）使用什么约定的情况下，我创建了一个宏，它可以按照您的要求进行操作，但会做出一些假设。这完全按照您的要求进行，但可能需要根据您的文件进行一些更改。

**假设：**

*   所有工作簿标题行`IC`和`Name`分别位于单元格`A1`和`B1`中
*   在运行此宏之前将打开所有工作簿
*   宏将从 启动`Parent Workbook`，假设是存放最终结果的 WorkBook
*   每个工作簿的所有值都在该工作簿的第一张表中

**代码**

```
Public Sub CombineAllOpenWorkbooks()
    Dim parentWb As Workbook, childWb As Workbook
    Dim destinationWs As Worksheet, sourceWs As Worksheet

    Dim highestRowCount As Integer
    Dim firstColumnRowCount As Integer
    Dim secondColumnRowCount As Integer

    Application.ScreenUpdating = False

    'this holds reference to the parent workbook, which is where all the values go
    Set parentWb = Application.Workbooks(ThisWorkbook.Name)
    Set destinationWs = parentWb.Sheets(1)

    'for each workbook open that isn't the aprent workbook, find the last cell,
    'select it, copy its values, then paste them at the end of the parent workbooks
    'current values
    For Each childWb In Application.Workbooks
        If childWb.Name <> parentWb.Name Then
            Set sourceWs = childWb.Sheets(1)
            firstColumnRowCount = sourceWs.Cells(Rows.Count, 1).End(xlUp).Row
            secondColumnRowCount = sourceWs.Cells(Rows.Count, 2).End(xlUp).Row

            highestRowCount = firstColumnRowCount
            If firstColumnRowCount < secondColumnRowCount Then
                highestRowCount = secondColumnRowCount
            End If

            'copy from below the 'IC/Name' headers to the last cell that contains values
            sourceWs.Range(sourceWs.Cells(2, 1), sourceWs.Cells(highestRowCount, 2)).Copy

            firstColumnRowCount = destinationWs.Cells(Rows.Count, 1).End(xlUp).Row
            secondColumnRowCount = destinationWs.Cells(Rows.Count, 2).End(xlUp).Row

            highestRowCount = firstColumnRowCount
            If firstColumnRowCount < secondColumnRowCount Then
                highestRowCount = secondColumnRowCount
            End If

            'paste the previously copied values to the end of the parent workbokos values
            destinationWs.Range("A" & highestRowCount + 1).PasteSpecial Paste:=xlPasteValues
        End If
    Next childWb
    Application.ScreenUpdating = True
End Sub 
```

[要将此 VBA 添加到您的工作簿](http://msdn.microsoft.com/en-us/library/office/ee814737%28v=office.14%29.aspx)，您必须打开**PARENT Workbook**，从菜单中选择`Developer Tab`，从左侧菜单中打开，然后将代码粘贴到那里。**`Visual Basic``Sheet 1`**

 **以下是我在测试期间使用的工作簿的一些图像（ParentWorkbook、FileA、FileB）：

**运行宏之前的所有三个工作簿：** ![在此处输入图像描述](../Images/101ba0098a921bd9957a93aef415d1b5.png)

**运行宏后的父工作簿：** ![在此处输入图像描述](../Images/175ddc1cbb5e2f86a93aa51e9d554010.png)

请注意，此代码是快速创建的，并且已经完成了有限的测试。它当然可以被清理掉，代码中的冗余也可以被移除；它的目的是让你开始。如果您对任何部分有任何疑问，我很乐意解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:47:27.503

我试过这个软件，它工作：[http ://bulkfilemerger.com/index1](http://bulkfilemerger.com/index1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:15:42.553

你不能简单地使用复制和粘贴吗？将文件 A 的内容复制到一个空工作簿文件 Z 中。然后复制文件 B 中的所有数据行（不包括标题）并粘贴到文件 Z 中现有数据的下方。对文件 C 重复此操作。**

# actionscript-3 - AS3 - 如何在没有 Pixel Bender 的情况下对位图数据进行像素化？

> ID：14835532
> 
> 赞同：0
> 
> 时间：2013-02-12T15:07:07.360
> 
> 标签：actionscript-3, flash

我想将像素化过滤器应用于位图。有没有办法在不使用像素弯曲器的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:37:43.520

一个非常简单的方法是重绘位图两次。此代码假定选择了 blockSize，以便您的中间 BitmapData（较小）与像素网格对齐。例如，如果您的源是 100x100 像素，则 blockSize 为 2 将使中间 BitmapData 为 50x50 像素。更复杂的事情可能需要 Math.round() 和一些捏造。

```
//  Assumes that source.width / blockSize has no remainder
//  Same with source.height / blockSize
public function getMosaic( source:BitmapData, blockSize:int ):BitmapData
{
    var bitmap:Bitmap = new Bitmap( source );
    bitmap.smoothing = true;  // blends pixels values

    var smaller:BitmapData = new BitmapData( source.width  / blockSize,
                                             source.height / blockSize );
    var matrix:Matrix = new Matrix();
    matrix.scale( 1 / blockSize, 1 / blockSize );
    smaller.draw( bitmap, matrix );

    bitmap = new Bitmap( smaller );
    //  Avoid "bitmap.smoothing = true" here to keep it blocky

    var blocky:BitmapData = new BitmapData( source.width, source.height );
    matrix.invert();  //  gives the opposite effect from before
    blocky.draw( bitmap, matrix );

    smaller.dispose();  //  always dispose BitmapData no longer needed

    return blocky;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:11:17.793

您应该能够使用`BitmapData`类及其`getPixel()/setPixel`方法来实现这一点。具体到您的效果，您可以计算给定像素组的平均颜色，并将相同的颜色应用于所有像素。

有关像素操作的更多信息：http: [//help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d64.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d64.html)

# razor - 在 Visual Studio 2012 中为 Razor 编辑器扩展 Intellisense

> ID：14835533
> 
> 赞同：4
> 
> 时间：2013-02-12T15:07:09.307
> 
> 标签：razor, visual-studio-2012, intellisense

通过指定将用于验证 XML 的 XSD，Visual Studio 提供了在编辑 XML 文档时扩展 Intellisense 支持的能力。

Visual Studio 是否为 Razor 编辑器提供任何此类支持，以便我可以指定 XSD 并且 Intellisense 将为这些新类型提供自动完成建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-02T21:18:11.233

这可能会奏效。Visual Studio 使用`html_5.xsd`文件来提供自动完成功能。您可以通过将 xsd 放在旁边`html_5.xsd`（可能在 中`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\schemas\html`）来提供您的 xsd，然后进行编辑`html_5.xsd`以包含您的文件。需要重新启动 Visual Studio。

```
<xsd:include schemaLocation="MyAwesomeTypes.xsd" /> 
```

# ruby-on-rails - 在模型中使用 FriendlyId 生成器

> ID：14835534
> 
> 赞同：0
> 
> 时间：2013-02-12T15:07:14.920
> 
> 标签：ruby-on-rails, friendly-id

有没有办法从扩展 FriendlyId 的模型实例访问 FriendlyID slug 生成器？

然后将它传递给一个字符串以生成一个唯一的 slug？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:23:30.417

下面是从模型中访问生成器的一种选择。有了这个，您可以`:url_name`在制作对象的表单中包含或任何您想要调用的内容。就我而言，它已设置好，因此如果未输入字符串，则会将 url_name 设置为其他内容。

```
Class Foo  < ActiveRecord::Base

  has_friendly_id :url_name, :use_slug => true, :approximate_ascii => true

  attr_accessible :url_name

  def url_name
    read_attribute(:url_name) || "some other default"
  end

end 
```

此外，这有点旧，但有关 FriendlyID 结帐的更多信息，请查看此[railscast](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)

# jsf - java.lang.NoClassDefFoundError: org/atmosphere/cpr/AsyncSupportListenerAdapter

> ID：14835535
> 
> 赞同：3
> 
> 时间：2013-02-12T15:07:16.950
> 
> 标签：jsf, primefaces, push

我正在尝试以这种方式将消息从服​​务器推送到客户端：

```
PushContext pushContext = PushContextFactory.getDefault().getPushContext();
pushContext.push("/registrationEvent", "There was another registration"); 
```

我的问题是我有以下错误

```
ava.lang.NoClassDefFoundError: Could not initialize class org.primefaces.push.PushContextFactory 
```

但我认为这是由于项目初始化时的问题：

```
java.lang.NoClassDefFoundError: org/atmosphere/cpr/AsyncSupportListenerAdapter 
```

我尝试添加 jar 气氛文件...没有成功。我做错了吗？我正在使用 glassfish 3.1。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-15T14:14:46.897

Primefaces [MigrationGuide](https://code.google.com/p/primefaces/wiki/MigrationGuide)通知：“PrimeFaces Push 已重新实现，PushContext 已弃用，请使用 EventBus 和新的 Push API。”

本例在pom.xml上，放2.2.1大气版。可能您使用的是旧的大气版本。如果您尝试使用 Primefaces 5.0，请输入以下代码：

```
<dependency>
    <groupId>org.primefaces</groupId>
    <artifactId>primefaces</artifactId>
    <version>5.0</version>
</dependency>

<dependency>
    <groupId>org.primefaces.extensions</groupId>
    <artifactId>primefaces-extensions</artifactId>
    <version>2.1.0</version>
</dependency>

<dependency>
    <groupId>org.atmosphere</groupId>
    <artifactId>atmosphere-runtime</artifactId>
    <version>2.2.1</version>
</dependency> 
```

# javascript - 使用 Javascript/jQuery 反序列化 Jackson 对象

> ID：14835541
> 
> 赞同：2
> 
> 时间：2013-02-12T15:07:29.670
> 
> 标签：javascript, spring-mvc, serialization, jackson, json-ld

最近我使用 Jackson 结合 Spring MVC 来序列化域对象。为了减少循环引用，我这样使用`@JsonIdentityInfo`：

```
@JsonIdentityInfo(generator=ObjectIdGenerators.IntSequenceGenerator.class, property="@modId")
public class Modulo implements Serializable {
...
} 
```

我现在正在做的是将这些对象作为 JSON 接收。我想反序列化对象并访问它们，但我只能通过首先引用每个对象来做到这一点。我无法访问对同一对象的下一个引用。主要是我不知道该怎么做。

我想做的是创建一个包含接收到的对象的 HTML 表。我会用 Javascript 或 jQuery 来做这件事。你能帮我么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:35:36.967

看起来 Jackson 2.0+ 在这里实现了一些[JSON-LD](http://json-ld.org/spec/latest/json-ld-syntax/)。也许[jsonld.js](https://github.com/digitalbazaar/jsonld.js#readme)是你需要的？

# python - 使用 pysimplesoap 正确验证的问题

> ID：14835542
> 
> 赞同：0
> 
> 时间：2013-02-12T15:07:30.957
> 
> 标签：python, soap, pysimplesoap

我正在尝试使用 pysimplesoap 与 Websitepanel SOAP-API 进行通信。WebsitePanel API 介绍说：

> 要与 WebsitePanel API 交互，您应该使用基本身份验证。WebsitePanel 使用以下格式提供的用户凭据识别“授权”标头：用户名：密码

我的第一次尝试如下：

```
client = SoapClient(wsdl=endpoint_url, trace=True)
client['Authorization'] = "%s:%s" % (username, password) 
```

返回 401“未授权”。第二次尝试是：

```
client = SoapClient(wsdl=endpoint_url, trace=True)          
client['wsse:Security'] = {
    'wsse:UsernameToken': {
        'wsse:Username': username,
        'wsse:Password': password,
    }
} 
```

它按预期工作，但返回以下内容：

```
status: 500
content-length: 924
x-aspnet-version: 4.0.30319
x-powered-by: ASP.NET
server: Microsoft-IIS/7.5
cache-control: private
date: Tue, 12 Feb 2013 14:23:56 GMT
content-type: text/xml; charset=utf-8 
```

和

```
pysimplesoap.client.SoapFault: q0:Security: SOAP response should be signed. 
```

为什么不起作用，错误消息`client['Authorization']`是什么意思？`Response should be signed`

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:15:48.387

我想通了：要正确使用 pysimplesoap 进行身份验证，您必须调用

```
client = SoapClient(wsdl=u, trace=True, 
                    http_headers={'Authorization': 'Basic %s' % encoded}) 
```

使用`encoded`base64 编码的字符串`username:password`

# objective-c - NSMutableURLRequest POST 消息中的 Base64 问题？

> ID：14835546
> 
> 赞同：2
> 
> 时间：2013-02-12T15:07:42.770
> 
> 标签：objective-c, nsstring, nsdata, nsstringencoding, rncryptor

我的应用程序和服务器之间存在通信问题。我正在使用 RNCryptor 加密一条消息，然后我将其 base64 编码并在请求中传输到服务器。这是在 DATA 标头和 http 正文中作为发布数据完成的。我认为我在如何通过 POST 转换和传输 base64 编码消息时犯了一个错误。

如果我通过标头收到加密消息，它每次都能完美解密。但是，如果我通过 POST 数据接收消息，我会得到不同的结果。大多数情况下，它会失败，否则它会部分解密（前几个字母），大约 20 次成功解密中有 1 次。

目标c代码是：

```
- (NSString *)sendEncryptedTestMessage:(NSString *)address{
    NSString* messageContent    = @"Hello my name is Bob.";
    NSError * error             = nil;
    NSString* responseString2   = nil;

    NSData*   postData = [RNEncryptor encryptData:[messageContent dataUsingEncoding:NSUTF8StringEncoding]
                                    withSettings:kRNCryptorAES256Settings
                                        password:@"123456"
                                           error:&error];

    NSString* messageServer     = [NSString base64forData:postData];
    NSString* postMessage       = [@"message=" stringByAppendingString:messageServer];
              postData          = [postMessage dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES]; // problem here I think

    NSString* postLength        = [NSString stringWithFormat:@"%ld",(unsigned long)[postData length]];

    NSURL*    URLToRequest      = [NSURL URLWithString:address];

    NSMutableURLRequest* semisystem = [[[NSMutableURLRequest alloc] initWithURL:URLToRequest] autorelease];

    [semisystem setHTTPMethod:@"POST"];

    [semisystem setHTTPBody:postData];
    [semisystem setValue:postLength                           forHTTPHeaderField:@"Content-Length"];
    [semisystem setValue:self.activationURL                   forHTTPHeaderField:@"EncryptionKey"];
    [semisystem setValue:messageServer                        forHTTPHeaderField:@"data"];

    NSURLResponse* response;
    NSData* data = [NSURLConnection sendSynchronousRequest:semisystem
                                         returningResponse:&response
                                                     error:&error];

    responseString2 = [NSString stringWithFormat:@"%.*s", (int)[data length], [data bytes]];
    return responseString2;
} 
```

PHP代码：

```
function decrypt2($b64_data,$password)
    {
           // back to binary
            //$bin_data = mb_convert_encoding($b64_data, "UTF-8", "BASE64");
            $bin_data = base64_decode($b64_data);
            // extract salt
            $salt = substr($bin_data, 2, 8);
            // extract HMAC salt
            $hmac_salt = substr($bin_data, 10, 8);
            // extract IV
            $iv = substr($bin_data, 18, 16);
            // extract data
            $data = substr($bin_data, 34, strlen($bin_data) - 34 - 32);
            $dataWithoutHMAC = chr(2).chr(1).$salt.$hmac_salt.$iv.$data;
            // extract HMAC
            $hmac = substr($bin_data, strlen($bin_data) - 32);
            // make HMAC key
            $hmac_key = pbkdf2('SHA1', $password, $hmac_salt, 10000, 32, true);
            // make HMAC hash
            $hmac_hash = hash_hmac('sha256', $dataWithoutHMAC , $hmac_key, true);
            // check if HMAC hash matches HMAC
            if($hmac_hash != $hmac) {
                echo "HMAC mismatch".$nl.$nl.$nl;
               // return false;
            }
            // make data key
            $key = pbkdf2('SHA1', $password, $salt, 10000, 32, true);
            // decrypt
            $ret = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, $data, MCRYPT_MODE_CBC, $iv);      
        return $ret;
    }
$passkey = "123456";

$messageBase64                  = $_POST['message'];// THIS barely works
$messageBase64              = $_SERVER['HTTP_DATA'];// THIS WORKS
$message                = decrypt2($messageBase64,$passkey); 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-12T23:11:07.487

我知道这是一个老问题，但是很长一段时间我都使用相同的解决方案，问题是我们在向服务器发出请求之前没有正确编码 url。文档说：

```
 According to RFC 3986, the reserved characters in a URL are:
  reserved    = gen-delims / sub-delims
  gen-delims  = ":" / "/" / "?" / "#" / "[" / "]" / "@"
  sub-delims  = "!" / "$" / "&" / "'" / "(" / ")"
              / "*" / "+" / "," / ";" / "=" 
```

这里是如何编码字符串：/

```
CFStringRef encodedString =
    CFURLCreateStringByAddingPercentEscapes(
    kCFAllocatorDefault,
    (__bridge CFStringRef)(originalString),
    NULL,
    CFSTR(":/?#[]@!$&'()*+,;="),kCFStringEncodingUTF8); 
```

并再次获取字符串：

```
 NSString* stringEncoded = CFBridgingRelease
   (CFURLCreateWithString(kCFAllocatorDefault, encodedString, NULL)); 
```

我认为这是我们能做的最好的事情，因为我们确保字符串将被正确编码，并且在请求期间符号不会被其他东西替换。这里是参考：

[http://developer.apple.com/library/ios/#documentation/CoreFoundation/Reference/CFURLRef/Reference/reference.html#//apple_ref/c/func/CFURLCreateStringByAddingPercentEscapes](http://developer.apple.com/library/ios/#documentation/CoreFoundation/Reference/CFURLRef/Reference/reference.html#//apple_ref/c/func/CFURLCreateStringByAddingPercentEscapes)

[http://developer.apple.com/library/ios/#documentation/NetworkingInternetWeb/Conceptual/NetworkingOverview/WorkingWithHTTPAndHTTPSRequests/WorkingWithHTTPAndHTTPSRequests.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternetWeb/Conceptual/NetworkingOverview/WorkingWithHTTPAndHTTPSRequests/WorkingWithHTTPAndHTTPSRequests.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T21:30:46.517

我刚刚找到了解决方案。在请求期间，“+”符号被服务器解释为空格，从而破坏了 base64 代码。以下行解决了这个问题：

```
postMessage       = [postMessage stringByReplacingOccurrencesOfString:@"+" withString:@"%2B"]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-07T17:38:31.933

您可以在此网址中检查您的编码/解码字符串

[http://meyerweb.com/eric/tools/dencoder/](http://meyerweb.com/eric/tools/dencoder/)

当您按下编码按钮时，您可以看到“+”更改为“%2B”。

# lisp - Lisp 中的递归函数

> ID：14835549
> 
> 赞同：1
> 
> 时间：2013-02-12T15:07:53.587
> 
> 标签：lisp, conjunctive-normal-form

我必须构建一个函数来确定我是否有以这种方式构建的格式良好的公式的合取：

cong ::= '(' and wff wff ...')'

假设我有确定公式是否为 wff 的代码。该函数必须首先检查列表的第一个元素是否是`'and` ，然后递归地检查其余的子列表是否是 wff。请注意，这 `p`也是一个 wff，因此它不一定是子列表。

例子 ：`(and (or a b v) (and a b d) m n)`

这是我尝试过的对我不起作用的方法：

```
(defun cong (fbf)
    (and (eq (first fbf) 'and )
        (reduce (lambda (x y) (and x y))
            (mapcar #'wff (rest fbf))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:56:29.300

假设一个有效的`wff`谓词，您的代码将起作用。例如，`numberp`用作谓词：

```
(defun cong (fbf)
  (and (eq (first fbf) 'and)
       (reduce (lambda (x y) (and x y))
               (mapcar #'numberp (rest fbf))))) 
```

工作正常：

```
CL-USER> (cong '(and 1 2 3 4 5))
T
CL-USER> (cong '(and 1 2 3 4 foo))
NIL
CL-USER> (cong '(1 2 3 4))
NIL 
```

请注意，这可以更容易地完成：

```
(defun cong (fbf)
  (and (eq (first fbf) 'and)
       (every #'wff (cdr fbf)))) 
```

另外，请注意，在 CL 中，按照惯例，谓词通常应以`p`.

因此，鉴于您的上述评论，您的问题是`wff`谓词，它似乎不适用于原子。既然你提到了`p`satisfies `wff`，那个谓词是完全错误的，但是如果你*必须*使用它（假设这是某种家庭作业），只需检查手头的元素是否是一个缺点：

```
(defun cong (fbf)
  (and (eq (first fbf) 'and)
       (every #'wff (remove-if-not #'consp (cdr fbf))))) 
```

这假设每个原子都满足`wff`。因此，它们不会改变连词的结果并且可以被删除。否则，您必须编写另一个谓词来检查原子是否满足`wff`，或者，这是正确的做法，`wff`首先要修复。

另外，请注意，这些都没有真正涉及递归，因为您只是在询问如何将谓词应用于列表并将结果结合起来。

# wordpress - Wordpress .sub-menu 每个链接的不同背景图片

> ID：14835551
> 
> 赞同：0
> 
> 时间：2013-02-12T15:07:58.190
> 
> 标签：wordpress, dynamic, background-image

我在 wordpress 中有一堆以我的页面命名的图像。例子：

*   页面名称：心脏健康
*   图片名称：心脏健康.png

我的主菜单有 1 个子菜单级别，对于子级别中的每个页面名称，我想将图像显示为设置在左侧的背景图像。我尝试了很多不同的方法，但没有运气。

我知道您可以在管理员的菜单中添加自定义文本，但我希望这一切都能自动完成。

我在“nav-menu-template.php”和“class-wp-walker.php”中找到了子级菜单项的开始和结束

目前，当您翻转时，我只是在所有子菜单项上显示相同的图片，但这只是使用 CSS。

```
.menu ul ul :hover > a{color:#000000;background-color: #eeeeee; background-image:url(images/menu-images/fruit.png); background-repeat:no-repeat;} 
```

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:22:33.670

最好的方法是通过 CSS。

例如

```
.menu ul ul .custom-class a { ... }
.menu ul ul .custom-class:hover a { ... } 
```

您可以在 WordPress 菜单管理中为每个菜单项设置自定义类，只需确保选中“屏幕选项”（页面右上角）中的“CSS 类”复选框。

此外，为了让事情变得更简单，我建议将您将在菜单中使用的所有图像制作一个图像精灵，以便您的 CSS 代码更简单。

```
.menu ul ul a {
  background:url('/url-to-sprite.png') no-repeat 0px 0px;
}

.menu ul ul :hover a {
  background-position:-20px 0px;
}

.menu ul ul .custom-class a {
  background-position:0px -20px;
}

.menu ul ul .custom-class:hover a {
  background-position:-20px -20px;
} 
```

# jquery - FancyBox 2.1.4 与 jQuery 2.0 beta1 + Bootstrap 2.3.0 一起崩溃

> ID：14835554
> 
> 赞同：1
> 
> 时间：2013-02-12T15:08:07.820
> 
> 标签：jquery, fancybox, twitter-bootstrap-2

FancyBox 2.1.4 与 jQuery 2.0 beta1 + Bootstrap 2.3.0 一起崩溃，
但它适用于 Bootstrap 2.2.2。

```
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
<title>FancyApps 2.1.4 with jQuery 2.0 beta + bootstrap 2.3.0</title>
<link href="http://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.css" rel="stylesheet" media="screen">
<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet">

<script type="text/javascript" src="http://code.jquery.com/jquery-2.0.0b1.js"></script>
<script type="text/javascript" src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/js/bootstrap.min.js"></script>

<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.0.6/jquery.mousewheel.min.js"></script>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.pack.js"></script> 

<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-buttons.css" type="text/css" media="screen" />
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-buttons.js"></script>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-media.js"></script>

<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.css" type="text/css" media="screen" />
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.js"></script>

<script type="text/javascript">
$(document).ready(function()
{    
    $(".fancybox").fancybox(
    {
        openEffect  : 'elastic',
        closeEffect : 'elastic',
        helpers : {
            title : {
                type : 'inside'
            }
        }
    });
});
</script>
</head>
<body>
<a class="fancybox" rel="group" href="http://farm9.staticflickr.com/8481/8215602321_69d9939b8b_b.jpg" title="The Trail (Msjunior-Check out my galleries)">
<img src="http://farm9.staticflickr.com/8481/8215602321_69d9939b8b_m.jpg"/>
</a>
</body>
</html> 
```

1.  我不知道这是错误还是其他错误。我无法捕捉到错误。它太快了 - 到那时浏览器使用其默认值显示图像。
2.  在调用浏览器的默认操作之前，我们如何捕获此类错误？e.preventDefault() ？

# javascript - 如何增加和减少具有特定卡名的牌组中卡数量的计数器？

> ID：14835555
> 
> 赞同：0
> 
> 时间：2013-02-12T15:08:08.770
> 
> 标签：javascript, jquery

再会;

我正在继续尝试为 Cardfight 创建套牌构建应用程序！先锋

有一条规则，一副牌不能超过 4 张同一张牌，一副牌不能超过 50 张牌。

我正在努力做到这一点，以便我有一个计数器，当卡片添加到牌组时会增加，当牌从牌组中取出时会减少。但是这个计数器必须针对每张从 0 开始并在每次将具有特定名称的卡添加到套牌时增加 1 的卡。

我有一个 vanguard 对象和数据库数组，可以在其中轻松创建新的 Vanguard 对象。我在 Vanguard 对象 ( `this.cardLimit = 0`) 中有一个变量，它将最初将每张新卡的卡限制设置为 0。

然后当一张新卡`[addToDeck]`被添加到卡组中时，它将在数据库中为该特定卡增加一个计数器：`database[addToDeck].cardLimit++`，直到达到最大值 4，之后这个 if 语句将不起作用：

```
if (deck.length < 51 && database[addToDeck].cardLimit < 5) 
```

我的问题是 - 正如您将在下面的代码中看到的那样 - 当我使用 jquery 删除卡时，我无法找到减少此值的方法。我所做的是将卡片名称动态添加到 div，当单击该 div 中的卡片名称时，它不仅会从 div 中删除卡片，还会通过拼接从卡组数组中删除卡片。

我不能`database[addToDeck].cardLimit--`像你在我的代码中看到的那样做，因为我使用 jQuery 和“this”来专门指`div`被点击的部分。

那么我的问题是....如何根据我迄今为止提供的代码规范减少计数器？当我的用于移除部分牌组的 Jquery（代码中的最后一个 jQuery 实例）运行时，我需要减少已移除的特定卡片的计数器。

如果您需要任何进一步的澄清，请告诉我......我用简单的术语解释我的问题并不容易。非常感谢您的阅读。

JavaScript / Jquery：

```
function Vanguard(name,grade,skill,power,shield,critical, type, trigger, nation, clan, race, flavor, effect, imageURL){
    this.name = name;
    this.grade = grade;
    this.skill = skill;
    this.power = power;
    this.shield = shield;
    this.critical = critical;
    this.type = type;
    this.trigger = trigger;
    this.nation = nation;
    this.clan = clan;
    this.race = race;
    this.flavor = flavor;
    this.effect = effect;
    this.imageURL = imageURL;
    this.cardLimit = 0;
};

var database = {};
database['asura kaiser'] = new Vanguard("Asura Kaiser", 3, "Twin Drive!!", 11000, "", 1, "Normal Unit", "None", "Star Gate", "Nova Grappler", "Battleroid", "The death blow! Kaiser Buster!", "<br/>[CONT](VC/RC):If you do not have another «Nova Grappler» vanguard or rear-guard, this unit gets [Power] -2000\. <br/> [AUTO](VC):When this unit's drive check reveals a grade 3 «Nova Grappler», choose one of your rear-guards, and [Stand] it.", "http://images4.wikia.nocookie.net/__cb20120428001646/cardfight/images/thumb/a/a6/VGE_BT01-008EN.jpg/300px-VGE_BT01-008EN.jpg");
database['king of knights, alfred'] = new Vanguard("King of Knights, Alfred", 3, "Twin Drive!!", 10000, "", 1, "Normal Unit", "None", "United Sanctuary", "Royal Paladin", "Human", "I command you under the name of the King of Knights! Warriors, heed my call!", "<br/>[CONT](VC):Your units cannot boost this unit. <br/> [CONT](VC):During your turn, this unit gets [Power]+2000 for each of your «Royal Paladin» rear-guards. <br/> [ACT](VC/RC):[Counter Blast (3)] Search your deck for up to one grade 2 or less «Royal Paladin», call it to (RC), and shuffle your deck.", "http://images2.wikia.nocookie.net/__cb20121009013434/cardfight/images/thumb/9/95/BT01-001EN_RRR.jpg/300px-BT01-001EN_RRR.jpg");
database['dragonic overlord'] = new Vanguard("Dragonic Overlord", 3, "Twin Drive!!", 11000, "", 1, "Normal Unit", "None", "Dragon Sanctuary", "Kagerou", "Dragon", "<br/>(TD02):Reduce all to ashes, flame of the apocalypse! Eternal Flame! <br/> (BT01):Burn, flame of despair! Eternal Flame!", "<br/>[CONT](VC/RC):If you do not have another «Kagero» vanguard or rear-guard, this unit gets [Power]-2000\. <br/> [ACT](VC/RC):[Counter Blast (3)] Until end of turn, this unit gets [Power]+5000, gets '[AUTO](VC/RC):When this unit's attack hits an opponent's rear-guard, [Stand] this unit', and loses 'Twin Drive!!'.", "http://images1.wikia.nocookie.net/__cb20120131161306/cardfight/images/thumb/3/33/TD02-001EN.jpg/300px-TD02-001EN.jpg");
database['ceo amaterasu'] = new Vanguard("CEO Amaterasu", 3, "Twin Drive", 10000, "", 1, "Normal Unit", "None", "United Sanctuary", "Oracle Think Tank", "Human", "<br/>(BT01):Shape my desire. Project it before me, Yata no Kagami! <br/>(EB05):Feel the flow of time. You will create the future.", "<br/>[CONT](VC):During your turn, if the number of cards in your hand is four or greater, this unit gets [Power] +4000\. <br/> [AUTO](VC):At the beginning of your main phase, Soul Charge (1), look at the top card of your deck, and put that card on the top or the bottom of your deck. <br/> [AUTO](VC/RC):[Soul Blast (8) & Counter Blast (5)] When this unit's attack hits, you may pay the cost. If you do, draw up to five cards.)", "http://images2.wikia.nocookie.net/__cb20120831173054/cardfight/images/thumb/3/30/BT01-S05EN_SP.jpg/300px-BT01-S05EN_SP.jpg");
database['alfred early'] = new Vanguard("Alfred Early", 3, "Twin Drive!!", 10000, "", 1, "Normal Unit", "None", "United Sanctuary", "Royal Paladin", "Human", "To preserve the smiles of his people, the young King leads knights to battle.", "AUTO: When this unit is placed on Vanguard Circle, choose up to one card named 'Blaster Blade' from your soul, and call it to Rear-guard Circle.", "http://images1.wikia.nocookie.net/__cb20120926194218/cardfight/images/thumb/5/5e/PR-0005EN.jpg/300px-PR-0005EN.jpg");

function printVanguard(p, name){
      for (var p in database[name]){
       if (p !== 'imageURL'){
         document.getElementById('output').innerHTML +=('<b>' + p.charAt(0).toUpperCase() + p.slice(1) + '</b>: ' + database[name][p] + '<br />');
      }}
};

$(document).ready(function() {
 $('#button').click(function(){
   $('#output').html(""); //clear old search
   $('#image').html(""); // clear old image
    var userInput = $('input[name=searchItem]').val();
    userInput = userInput.toLowerCase();
     $('#output').append(printVanguard(userInput, userInput));
   var image = $('<img>').attr('src', database[userInput].imageURL);
   $('#image').append(image);
 });
 var deck = [];

 $('#add').click(function(){
     var addToDeck = $('input[name=searchItem]').val();
     addToDeck = addToDeck.toLowerCase();
     database[addToDeck].cardLimit++;
     if (deck.length < 51 && database[addToDeck].cardLimit < 5){
      deck.push(addToDeck);
      $('#quantity').html("");
      $('#save').prepend('<div id="quantity">' + 'Total: ' + deck.length + '</div>');   
      $('#save').append('<div id="cardList">' + database[deck[deck.length-1]].name + '</div>');
      }
 });
  $(document).on('click','[id^=cardList]', function(){
   $(this).remove();
     deck.splice(deck[this], 1);
    $('#quantity').html("");
     $('#save').prepend('<div id="quantity">' + 'Total: ' + deck.length + '</div>');
  });
}); 
```

HTML 代码：

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="style.css" />
        <script type = "text/javascript" src='script.js'>
        </script>
        <title></title>
    </head>
    <body>
     <form name="searchForm">
         <input type="text" id="search" placeholder="Enter Card Name" name="searchItem"/>
     </form>
     <div id="button">Search!</div>
     <div id="add">Add to Deck</div>
    <br/>
    <div id="output"></div>
    <div id="image"></div>
    <div id="save"></div>
    </body>
</html> 
```

小提琴：jsfiddle.net/8QR7q 由 Malik 提供

测试输入：“Alfred Early”、“CEO Amaterasu”、“Dragonic Overlord”、“Asura Kaiser”或“King of Knights, Alfred”

# svn - 如何在 SVN 保存/恢复本地更改

> ID：14835556
> 
> 赞同：3
> 
> 时间：2013-02-12T15:08:10.613
> 
> 标签：svn

如何在 SVN 中保存所有本地更改、还原它们，然后稍后恢复它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T15:27:17.687

您描述的功能有时称为搁置或存储。Subversion 不提供它。

可以用补丁模拟它：

1.  你创建一个补丁
2.  您还原更改
3.  您从事其他工作并承诺
4.  您应用之前​​创建的补丁

像 NetBeans[这样的一些编辑器可以](http://javaevangelist.blogspot.com.es/2012/01/netbeans-71-ide-shelve-and-un-shelve.html)透明地为您完成。还有第三方脚本。

或者，您可以创建一个临时分支，在那里提交待处理的更改，切换回上一个分支，最后`svn merge`在完成后将更改移植回来 ( )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:18:42.403

当您提交更改时，它们会保存到修订号。保存以稍后恢复。

这是解释如何恢复到旧版本的答案：

[如何在 Subversion 中返回旧版本的代码？](https://stackoverflow.com/questions/814433/how-do-i-return-to-an-older-version-of-our-code-in-subversion)

# php - wordpress posts_per_page 显示不正确

> ID：14835558
> 
> 赞同：1
> 
> 时间：2013-02-12T15:08:12.050
> 
> 标签：php, wordpress

我有个问题。我想用这段代码显示一次一篇文章和一次 5 篇文章，但他显示了两个不必要的文章。我不明白的是，它是我的另一个具有相同主题的网站确实有效。完全相同的主题只有其他网站。谁能帮我？！（检查错误结果[http://radiozuid.com/](http://radiozuid.com/)一个 websie 正确结果[http://radiozuid.rtv-zuid.com/beta/](http://radiozuid.rtv-zuid.com/beta/)）（完全相同的主题）

```
 <?php 
                $the_query = new WP_Query(array(
                'posts_per_page' => 1 
                )); 
                while ( $the_query->have_posts() ) : 
                $the_query->the_post();
            ?>
            <div class="item active">
                <?php if(has_post_thumbnail()): ?>
         <?php $image = wp_get_attachment_image_src(get_post_thumbnail_id($post->ID), 'small-nivo-thumb'); ?>
         <img src="<?php echo get_template_directory_uri(); ?>/timthumb.php?src=<?php echo $image[0]; ?>&amp;w=620&amp;h=350" class="postafbeelding" alt="<?php the_title(); ?>">
                <?php else: ?>
         <img src="<?php echo get_template_directory_uri(); ?>/timthumb.php?src=<?php echo get_template_directory_uri(); ?>/images/thumbnail.png&amp;w=620&amp;h=350" class="postafbeelding" alt="<?php the_title(); ?>">
                <?php endif; ?>
                <div class="carousel-caption">
                    <h3 class="titel"><a href="<?php the_permalink(); ?>"><?php the_title();?></a></h3>
                    <p><?php echo string_limit_words(get_the_excerpt(), 35); ?>...<a href="<?php the_permalink(); ?>" rel="tooltip" data-original-title="Lees Meer" class="leesmeer"> Lees Meer</a></p>
            </div>
        </div>

            <?php 
                endwhile; 
                wp_reset_postdata();
            ?>
            <?php 
                $the_query = new WP_Query(array(
                'posts_per_page' => 5, 
                'offset' => 1 
                )); 
                while ( $the_query->have_posts() ) : 
                $the_query->the_post();
            ?>
            <div class="item">
                <?php if(has_post_thumbnail()): ?>
         <?php $image = wp_get_attachment_image_src(get_post_thumbnail_id($post->ID), 'small-nivo-thumb'); ?>
         <img src="<?php echo get_template_directory_uri(); ?>/timthumb.php?src=<?php echo $image[0]; ?>&amp;w=620&amp;h=350" class="postafbeelding" alt="<?php the_title(); ?>">
                <?php else: ?>
         <img src="<?php echo get_template_directory_uri(); ?>/timthumb.php?src=<?php echo get_template_directory_uri(); ?>/images/thumbnail.png&amp;w=620&amp;h=350" class="postafbeelding" alt="<?php the_title(); ?>">
                <?php endif; ?>
                <div class="carousel-caption">
                    <h3 class="titel"><a href="<?php the_permalink(); ?>"><?php the_title();?></a></h3>
                    <p><?php echo string_limit_words(get_the_excerpt(), 35); ?>...<a href="<?php the_permalink(); ?>" rel="tooltip" data-original-title="Lees Meer" class="leesmeer"> Lees Meer</a></p>
                </div>
            </div>
            <?php 
                endwhile; 
                wp_reset_postdata();
            ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T15:40:09.593

问题是您的查询返回的是粘性帖子，无论出于何种原因，这些帖子都被附加到帖子限制中，而不是计入其中。添加[`ignore_sticky_posts`](http://codex.wordpress.org/Class_Reference/WP_Query#Sticky_Post_Parameters)到您的查询中，我认为这将解决它。

```
$the_query = new WP_Query(array(
    'posts_per_page' => 5, 
    'offset' => 1,
    'ignore_sticky_posts' => true
)); 
```

# android - Android中的服务生命周期

> ID：14835563
> 
> 赞同：3
> 
> 时间：2013-02-12T15:08:23.330
> 
> 标签：android, gps

我的 Android 应用程序中有一项服务需要在用户退出应用程序后继续侦听位置更新（这对电池寿命的影响是另一回事）。

我不确定我是否正确理解了此页面上概述的 Android 服务的生命周期：

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

我相信如果它在 onStart() 方法中返回 START_STICKY ，那么服务将在主应用程序退出后继续运行，无论服务是否在自己的进程中运行。如果该服务与应用程序的其余部分在同一进程中运行并且我理解正确，则主应用程序的进程在应用程序退出后保持活动状态，只是为了运行该服务。当应用程序再次启动时，它将与仍在运行的服务在同一进程中运行。如果系统内存不足，Android 可能会决定终止该服务。

其次，我相信可以在与应用程序的其余部分相同的进程和相同的线程中运行位置监听器来监听 GPS 更新，并且在等待来自 GPS 的更新时它不会阻塞。

我理解正确了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T15:14:07.507

你已经正确理解了。

如果系统内存不足，Android 可能会决定终止该服务。

如果您希望它是持久的，您可以创建持久服务（但它需要是系统应用程序/服务）。

请使用 AlarmManager 和 IntentService，因此您的服务不需要在内存中，除非它正在做有意义的工作。**这也意味着 Android 不太可能在您在内存中时终止您的服务，并且用户不太可能因为认为您在浪费内存而终止您的服务。**

对于您的位置监听器：

使用在服务中实现的位置侦听器。

服务启动时开始监听 GPS，服务停止时移除 GPS 监听器。

当您想收听 GPS 时（例如每 10 分钟）启动此服务。

这比您尝试连续运行并检查位置更改的服务更干净。

***其次，我相信可以在与应用程序的其余部分相同的进程和相同的线程中运行位置监听器来监听 GPS 更新，并且在等待来自 GPS 的更新时它不会阻塞。***

您不需要为此设置 AsyncTask 或后台线程。也理解正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-30T07:28:46.627

Service 的实际生命周期在这里通过图片来描述。如果始终像这样，您可以在生命周期中运行 android 中的任何服务。

![在此处输入图像描述](../Images/41ba106343ae45a2ee0ceafd36f6479c.png)

# java - iText 使彩色图像显示为黑白

> ID：14835567
> 
> 赞同：0
> 
> 时间：2013-02-12T15:08:31.240
> 
> 标签：java, pdf, awt, itext, javax.imageio

我正在使用 Graphics2D itext 功能并使用 g2.drawImage(x, y, null) 绘制图像。如果我使用 ImageIO.read() 加载此图像，图像在生成的 PDF 中看起来是黑白的。但是 Toolkit.getDefaultToolkit().createImage() 工作正常。这是代码：

```
public static final String filename = "dummy.pdf";
public static void main(String[] args) {
    try {
        Document doc = new Document();
        PdfWriter writer = PdfWriter.getInstance(doc, new FileOutputStream(filename));
        writer.setPdfVersion(PdfWriter.VERSION_1_5);

        doc.open();
        PdfContentByte cb = writer.getDirectContent();
        Graphics2D g2 = cb.createGraphics(1654, 1168);
        draw(g2);

        doc.close();
        System.out.println("Done!");
    } catch(Exception e) {
        e.printStackTrace();
    }
}

private static void draw(Graphics2D g2) throws Exception {
    g2.setColor(Color.red);
    g2.fill(new Rectangle2D.Double(0, 0, 100, 100));

    BufferedImage img = ImageIO.read(new File("Speedy2BigClr.gif"));
    BufferedImage bi = toBufferedImage(img);
    Image i = makeColorTransparentAndBW(bi, Color.WHITE);

    Image iii = Toolkit.getDefaultToolkit().createImage("Speedy2BigClr.gif");

    g2.translate(0, 300);
    g2.scale(0.3, 0.3);
    g2.drawImage(img, 0, 0, null);

}
} 
```

不幸的是，对于另一个 gif，ImageIO 工作正常，而 Toolkit 不起作用。但所有图像在屏幕上看起来都很好。为什么我加载图像的方式会影响 PDF 中的结果？

![在此处输入图像描述](../Images/69f80415040f79763ec28e375b7e690f.png)

PS 出于明确的原因，我正在使用 LGPL iText（2.0.4、2.1.7、4.2.0）。 **UPD**：在 iText-5.3.5 上工作正常，我不能使用 :-(

# android - 使用服务编辑 Android 内部存储中的数据

> ID：14835568
> 
> 赞同：1
> 
> 时间：2013-02-12T15:08:36.590
> 
> 标签：android, sqlite, service, sync

我编写了一个具有后台服务的 android 应用程序，可以在应用程序未运行时进行数据同步。如何使用该服务修改内部内存中的文件或 Android 应用程序的 sqlite 数据库中的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:12:58.033

你做的就像你在一个普通的应用程序中一样，因为你是在一个`Context`. 我要指出的重要一点是，如果您的应用程序启动并且您`Service`也启动并且两者都需要使用数据库，那么您需要确保不会发生冲突。您可以简单地将您的实例存储在您的子`Application`类中，以确保只创建了一个数据库实例。

# sql - 返回具有冗余 where 子句的所有行

> ID：14835571
> 
> 赞同：1
> 
> 时间：2013-02-12T15:08:50.443
> 
> 标签：sql, sql-server-2008

当我加入两个表并在 where 之后添加时，并非所有行都返回，如果删除这个会返回更多行，为什么？

```
where [DeliveryAttribute].RainbowLevel = [DeliveryAttribute].RainbowLevel 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:10:10.740

的结果：

```
x = x 
```

是`unknown`如果`x`是`null`。在这种情况下，这些行将被`where`子句过滤掉。

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!2/88120/1/0)

# sql - 带有 where 子句的 T-SQL Group by

> ID：14835577
> 
> 赞同：3
> 
> 时间：2013-02-12T15:09:06.687
> 
> 标签：sql, sql-server, tsql, group-by, where-clause

```
 Masterid    CC  CLA DES NLCLA   NLDES
 -------------------------------------
 53006141    CN  0   0   1       1
 53006141    US  1   1   1       1
 53006141    UK  1   1   0       0
 53006142    US  1   1   0       0
 53006142    UK  1   1   0       0
 53006143    CN  0   0   1       1
 53006143    US  1   1   0       0
 53006143    UK  1   1   0       0 
```

从上面的数据我需要产生

*   `MasterIds`有`CC = US`or`CC = CN`和`NLCLA = 1`and的列表`NLDES = 1`

输出应该是

```
53006141
53006143 
```

MasterID 下必须有 CN 和 US。

有人可以帮我在 SQL 中做到这一点吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T15:13:03.487

您可以通过添加一个`WHERE`子句来执行此操作，该子句将返回带有`US`or的行`CN`：

```
select distinct Masterid
from yourtable
where cc in ('US', 'CN')
  and NLCLA = 1
  AND NLDES = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4758e/4)

如果您希望结果同时包含`CN`and `US`，那么您可以使用：

```
select Masterid
from yourtable
where cc in ('US', 'CN')
  and NLCLA = 1
  AND NLDES = 1
group by masterid
having count(distinct cc) = 2 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/968a1/2)。

可以做到这一点的另一种方法是使用 和来`EXISTS`获取 MasterId 的列表。然后将其他过滤器放在子句中而不是子查询中。`US``CN``WHERE`

```
select distinct masterid
from yourtable t1
where exists (select Masterid
              from yourtable t2
              where cc in ('US', 'CN')
                and t1.masterid = t2.masterid
              group by masterid
              having count(distinct cc) = 2)
  and NLCLA = 1
  and NLDES = 1; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/968a1/9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:14:54.167

一种方法是使用`CTE`：

```
WITH CTE AS
(
    SELECT Masterid,CC,CLA,DES,NLCLA,NLDES,
        RN = ROW_NUMBER() OVER (PARTITION BY Masterid ORDER BY Masterid)
    FROM dbo.Table
    WHERE   CC IN('US', 'CN')
    AND     NLCLA = 1
    AND     NLDES = 1
)
SELECT Masterid FROM CTE WHERE RN = 1 
```

[**演示**](http://sqlfiddle.com/#!3/4758e/8/0)（感谢 bluefeet 的小提琴数据）

请注意，`ROW_NUMBER`如果您想获取特定行，则分区函数会很有帮助，例如每个`Masterid`. 但是由于您没有提供`datetime`专栏，我只是随意订购了`Masterid`。

# node.js - nodejs - 第一个参数必须是字符串或缓冲区 - 将 response.write 与 http.request 一起使用时

> ID：14835582
> 
> 赞同：105
> 
> 时间：2013-02-12T15:09:13.190
> 
> 标签：node.js, http, callback

我只是想创建一个输出给定 URL 的 HTTP 状态的节点服务器。

当我尝试使用 res.write 刷新响应时，出现错误： throw new TypeError('first argument must be a string or Buffer');

但是如果我用 console.log 替换它们，一切都很好（但我需要将它们写入浏览器而不是控制台）。

代码是

```
var server = http.createServer(function (req, res) {
    res.writeHead(200, {"Content-Type": "text/plain"});

    request({
        uri: 'http://www.google.com',
        method: 'GET',
        maxRedirects:3
    }, function(error, response, body) {
        if (!error) {
            res.write(response.statusCode);
        } else {
            //response.end(error);
            res.write(error);
        }
    });     

    res.end();
});
server.listen(9999); 
```

我相信我应该在某处添加一个回调，但很困惑，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-12T15:19:21.543

`response.statusCode`是一个数字，例如`response.statusCode === 200`，不是`'200'`。正如错误消息所说，`write`需要一个`string`或`Buffer`对象，所以你必须转换它。

```
res.write(response.statusCode.toString()); 
```

不过，您的回调评论也是正确的。`res.end();`应该在回调内部，就在您的`write`调用下方。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2015-12-20T07:34:23.570

我收到此错误消息，其中提到 options.body

我原来有这个

```
request.post({
    url: apiServerBaseUrl + '/v1/verify',
    body: {
        email: req.user.email
    }
}); 
```

我把它改成这样：

```
request.post({
    url: apiServerBaseUrl + '/v1/verify',
    body: JSON.stringify({
        email: req.user.email
    })
}); 
```

它现在似乎可以在没有错误消息的情况下工作......虽然看起来像错误。

我认为这是更正式的方式：

```
 request.post({
        url: apiServerBaseUrl + '/v1/verify',
        json: true,
        body: {
            email: req.user.email
        }
    }); 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-02-12T15:20:46.490

请求采用回调方法，它是异步的！所以我假设，当回调被执行时，`res.end()`可能会被调用。尝试在回调中关闭请求。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-02-12T15:20:09.753

好吧，显然您正在尝试发送不是字符串或缓冲区的内容。:) 它适用于控制台，因为控制台接受任何东西。简单的例子：

```
var obj = { test : "test" };
console.log( obj ); // works
res.write( obj ); // fails 
```

将任何内容转换为字符串的一种方法是这样做：

```
res.write( "" + obj ); 
```

每当您尝试发送某些东西时。另一种方法是调用`.toString()`方法：

```
res.write( obj.toString( ) ); 
```

请注意，它可能仍然不是您想要的。您应该始终将字符串/缓冲区传递给`.write`没有这些技巧。

作为旁注：我假设这`request`是一个异步操作。如果是这种情况， then`res.end();`将在任何写入之前被调用，即任何写入都会失败（因为此时连接将被关闭）。将该行移到处理程序中：

```
request({
    uri: 'http://www.google.com',
    method: 'GET',
    maxRedirects:3
}, function(error, response, body) {
    if (!error) {
        res.write(response.statusCode);
    } else {
        //response.end(error);
        res.write(error);
    }
    res.end( );
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-16T10:04:47.593

使用 ajax(XMLhttpRequest) 时还有另一种可能性（在这种情况下不是），在将信息发送回客户端时，您应该使用**res.send(responsetext)**而不是 res.end(responsetext)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-26T04:38:34.510

如果您想将 JSON 对象写入响应，则将标头内容类型更改为 application/json

```
response.writeHead(200, {"Content-Type": "application/json"});
var d = new Date(parseURL.query.iso);
var postData = {
    "hour" : d.getHours(),
    "minute" : d.getMinutes(),
    "second" : d.getSeconds()
}
response.write(postData)
response.end(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-03T19:24:20.777

> 虽然问题解决了，分享知识以澄清错误的正确含义。

该错误表示相关中断功能所需的参数不是所需的格式，即字符串或缓冲区

解决方法是将参数改为字符串

```
breakingFunction(JSON.stringify(offendingParameter), ... other params...); 
```

或缓冲

```
breakingFunction(BSON.serialize(offendingParameter), ... other params...); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-11T10:29:22.430

第一个参数必须是字符串或缓冲区类型之一。接收到的类型对象

> ```
>  at write_ 
> ```

当我将正文数据传递给请求模块时，我遇到了上述错误。

我已经传递了另一个参数是 JSON: true 和它的工作。

```
var option={
url:"https://myfirstwebsite/v1/appdata",
json:true,
body:{name:'xyz',age:30},
headers://my credential
}
rp(option)
.then((res)=>{
res.send({response:res});})
.catch((error)=>{
res.send({response:error});}) 
```

# typescript - 了解内部/外部模块并导入/需要 Typescript 0.8.2

> ID：14835586
> 
> 赞同：8
> 
> 时间：2013-02-12T15:09:19.327
> 
> 标签：typescript

有很多关于这个主题的 StackOverflow 问题，但要么与我正在尝试的不完全相同，要么与以前版本的 TypeScript 不同。

我正在处理一个相当大的 TypeScript 项目，并且有一个给定的模块被分成多个文件，而不是每个类一个。

在 0.8.0 中，这很好用：

```
//* driver.ts *//
/// <reference path="express.d.ts"/>
/// <reference path="a.ts"/>
/// <reference path="b.ts"/> 
```

.

```
//* a.ts *//
/// <reference path="driver.ts"/>
module m {
  import express = module("express");

  export class a {
    A: m.b;
    A2: express.ServerResponse;
  }
} 
```

.

```
//* b.ts *//
/// <reference path="driver.ts"/>
module m {
  export class b {
      B: number;
  }
} 
```

在 0.8.1 中，我不得不使用***导出导入*****技巧更改a.ts**：

 *```
//* a.ts *//
/// <reference path="driver.ts"/>
module m {
  export import express = module("express");

  export class a {
    A: m.b;
    A2: express.ServerResponse;
  }
} 
```

然而，在 0.8.2 中，导入不能再在模块声明中，因此**a.ts**已更改为：

```
//* a.ts *//
/// <reference path="driver.ts"/>
import express = module("express");
module m {

  export class a {
    A: m.b;
    A2: express.ServerResponse;
  }
} 
```

现在会出现错误，因为**a.ts在****b.ts 中看**不到模块的扩展名。

我的理解：

> *   **由于 import 语句， a.ts**已成为外部模块。
> *   删除**a.ts**中的导入允许 a 和 b 以及我的模块很好地合并在一起。
> *   将导入更改为 require 语句会丢失**express.d.ts中的类型定义**

我不明白的是：

> *   如果不将所有模块文件合并在一起，我真的没有办法解决这个问题吗？

如果在其他地方回答了这个问题，我深表歉意 - 只需将我链接到那里 - 但其他类似问题似乎都没有明确回答这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T17:03:18.060

这就是我对你的情况的看法。

**你的模块...**

你需要在你的模块之后命名你的文件，所以`a.ts`，实际上应该是`m.ts`并且应该包含类似......

```
import express = module('express');

export class a {
    A: b;
    A2: express.ServerResponse;
}

export class b {
    B: number;
} 
```

你不应该`reference`在这里使用语句。

当您在 nodejs 上运行代码时，您不能真正将代码拆分为多个文件，因为文件本身就是您的模块 - 当您`import m = module('m');`查找`m.js`. 您*可以*做的是以文件夹结构组织文件。

```
import x = module('m/x'); // m/x.js
import y = module('m/y'); // m/y.js 
```*

# sql-server - 动态 SQL 更新

> ID：14835590
> 
> 赞同：1
> 
> 时间：2013-02-12T15:09:30.660
> 
> 标签：sql-server, sql-server-2008, sql-update

我有以下 SQL Server 2008 表：

```
ID 目的地 最后结果
01 (555) 319-5170 断开连接
02 (555) 319-5170 重复
03 (555) 319-5170 重复
04 (555) 261-5000 重复
05 (555) 261-5000 重复
06 (555) 261-7325 忙
07 (555) 261-7325 重复
08 (555) 261-7345 无应答
09 (555) 261-7345 重复

```

我的目标是为所有匹配的电话号码动态设置“最后结果”列。因此，在上面的 Destination((555) 319-5170) 示例表中，所有匹配电话号码 (555) 319-5170) 的结果为“断开连接”。示例更新语句如下：

```
    更新 C
    SET [最后结果] = (
    选择目的地
                从呼叫
                WHERE [Last Result] NOT IN（'重复'，'没有电话号码'）
                按目的地分组
                HAVING COUNT(目的地) > 1)
    FROM 呼叫 C
    内部联接
            (
                选择目的地
                从呼叫
                WHERE [Last Result] NOT IN（'重复'，'没有电话号码'）
                按目的地分组
                HAVING COUNT(目的地) > 1
            ) Dup ON Dup.Destination = C.Destination
    WHERE C.[Last Result] NOT IN ('Duplicate','No Phone #')

```

但我收到一个错误：

> *消息 512，级别 16，状态 1，第 1 行
> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。*

```
**预期输出**：

ID 目的地 最后结果
01 (555) 319-5170 断开连接
02 (555) 319-5170 断开连接
03 (555) 319-5170 断开连接
04 (555) 261-5000 重复
05 (555) 261-5000 重复
06 (555) 261-7325 忙
07 (555) 261-7325 忙
08 (555) 261-7345 无应答
09 (555) 261-7345 无应答

```

提前感谢您提供可能的解决方案的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:20:12.193

`Last Result`您可以使用`row_number()`窗口功能查找第一个。但是，必须有一种方法来定义“第一”。在示例中，我假设您有一个`identity`列：

```
update  t1
set     [Last Result] = t2.[Last Result]
from    Table1 t1
join    (
        select  row_number() over (partition by Destination
                                   order by Id) as rn
        ,        *
        from     Table1
        ) t2
on      t1.Destination = t2.Destination
        and t2.rn = 1; 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!6/01eba/4/0)

如果您没有身份列，请用您如何定义“第一”来更新问题。例如，可能有一个`CreateDt`列。

# php - 不知道为什么该方法没有返回任何值

> ID：14835596
> 
> 赞同：2
> 
> 时间：2013-02-12T15:09:53.890
> 
> 标签：php, javascript

我知道我已经有一个类似的帖子，但是我一生都无法弄清楚这两个片段之间有什么不同-因为我只能从第一个示例中获取返回值-但不能从第二个示例中获取这两种方法在示例中返回一个值。更奇怪（或令人沮丧）的是 php 在第二个示例中没有抛出任何错误，它只是呈现一个空白屏幕。我在 XAMMP 上运行，我相信“显示错误”等设置为 true。

第一个示例（完美运行）：

```
<html>
    <?php 
        function myMethod() {
            return "testing";
        }
    ?>

    <script type="text/javascript">
        var val= "<?php echo myMethod(); ?>";
        document.write(val);
    </script>

</html> 
```

第二个例子：（注意只有“myMethod”函数发生了变化）

```
<html>
    <?php 
        function myMethod() {
            error_reporting(E_ALL);

            echo "<h2>Querying...</h2>\n";

            /* Get the port for the WWW service. */
            $service_port = getservbyname('www', 'tcp');

            /* Get the IP address for the target host. */
            $address = gethostbyname('www.example.com');

            /* Create a TCP/IP socket. */
            $socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
            if ($socket === false) {
                echo "socket_create() failed: reason: " . socket_strerror(socket_last_error()) . "\n";
            } else {
                echo "OK.\n";
            }

            echo "Attempting to connect to '$address' on port '$service_port'...";
            $result = socket_connect($socket, $address, $service_port);
            if ($result === false) {
                echo "socket_connect() failed.\nReason: ($result) " . socket_strerror(socket_last_error($socket)) . "\n";
            } else {
                echo "OK.\n";
            }

            $in = "HEAD / HTTP/1.1\r\n";
            $in .= "Host: www.example.com\r\n";
            $in .= "Connection: Close\r\n\r\n";
            $out = '';

            echo "Sending HTTP HEAD request...";
            socket_write($socket, $in, strlen($in));
            echo "OK.\n";

            echo "Reading response:\n\n";
            while ($out = socket_read($socket, 2048)) {
                echo $out;
                return 'test';
            }

            echo "Closing socket...";
            socket_close($socket);
            echo "OK.\n\n";
        }
    ?>

    <script type="text/javascript">
        var val= "<?php echo myMethod(); ?>";
        document.write(val);
    </script>
</html> 
```

更新：根据@the system 所说，看起来该变量包含正确的数据，但“document.write”似乎没有正确地将其输出到浏览器视图：

```
<html>
<script type="text/javascript">
    var val= "<h2>Querying...</h2>
    OK.
    Attempting to connect to '192.0.43.10' on port '80'...OK.
    Sending HTTP HEAD request...OK.
    Reading response:

    HTTP/1.0 302 Found
    Location: http://www.iana.org/domains/example/
    Server: BigIP
    Connection: close
    Content-Length: 0

    test";

    document.write(val);
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:16:06.660

查看浏览器的源代码视图。该脚本似乎可以按**您**的预期工作（见下文）。

但请注意，**在 javascript 中，无法以这种方式构建多行字符串**

在 javascript 中构建多行字符串时，您必须这样做：

```
var str  = "first line\n";
    str += "secon line\n"; 
```

或使用连接功能：

```
var str = [
  "first line",
  "second line"
].join("\n"); 
```

这是你的输出：

```
<html>

<script type="text/javascript">
var val= "<h2>Querying...</h2>
OK.
Attempting to connect to '192.0.43.10' on port '80'...OK.
Sending HTTP HEAD request...OK.
Reading response:

HTTP/1.0 302 Found
Location: http://www.iana.org/domains/example/
Server: BigIP
Connection: close
Content-Length: 0

test";

document.write(val);
</script>

</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:18:22.523

将所有回声更改为本地存储在变量中：

```
function myMethod()
{
error_reporting(E_ALL);

$temp = "<h2>Querying...</h2>\n";

/* Get the port for the WWW service. */
$service_port = getservbyname('www', 'tcp');

/* Get the IP address for the target host. */
$address = gethostbyname('www.example.com');

/* Create a TCP/IP socket. */
$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
if ($socket === false) {
    echo "socket_create() failed: reason: " . socket_strerror(socket_last_error()) . "\n";
} else {
    echo "OK.\n";
}

$temp .= "Attempting to connect to '$address' on port '$service_port'...";
$result = socket_connect($socket, $address, $service_port);
if ($result === false) {
    $temp .= "socket_connect() failed.\nReason: ($result) " . socket_strerror(socket_last_error($socket)) . "\n";
} else {
    $temp .= "OK.\n";
}

$in = "HEAD / HTTP/1.1\r\n";
$in .= "Host: www.example.com\r\n";
$in .= "Connection: Close\r\n\r\n";
$out = '';

$temp .= "Sending HTTP HEAD request...";
socket_write($socket, $in, strlen($in));
$temp .="OK.\n";

$temp .="Reading response:\n\n";
while ($out = socket_read($socket, 2048)) {
    $temp .= $out;
    return 'test';

}

$temp .= "Closing socket...";
socket_close($socket);
$temp .= "OK.\n\n";
return $temp;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T15:19:24.470

因为 Javascript 不支持多行文本，所以您可以将输出作为数组返回，并`json_encode`在 javascript 中将其用作数组：

```
<?php

    function myMethod()
    {
        error_reporting(E_ALL);
        $return = array();

        $return[] = "<h2>Querying...</h2>\n";

        /* Get the port for the WWW service. */
        $service_port = getservbyname('www', 'tcp');

        /* Get the IP address for the target host. */
        $address = gethostbyname('www.example.com');

        /* Create a TCP/IP socket. */
        $socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
        if ($socket === false) {
            $return[] = "socket_create() failed: reason: " . socket_strerror(socket_last_error()) . "\n";
        } else {
            $return[] = "OK.\n";
        }

        $return[] = "Attempting to connect to '$address' on port '$service_port'...";
        $result = socket_connect($socket, $address, $service_port);
        if ($result === false) {
            $return[] = "socket_connect() failed.\nReason: ($result) " . socket_strerror(socket_last_error($socket)) . "\n";
        } else {
            $return[] = "OK.\n";
        }

        $in = "HEAD / HTTP/1.1\r\n";
        $in .= "Host: www.example.com\r\n";
        $in .= "Connection: Close\r\n\r\n";
        $out = '';

        $return[] = "Sending HTTP HEAD request...";
        socket_write($socket, $in, strlen($in));
        $return[] = "OK.\n";

        $return[] = "Reading response:\n\n";
        while ($out = socket_read($socket, 2048)) {
            $return[] = $out;
        }

        $return[] = "Closing socket...";
        socket_close($socket);
        $return[] = "OK.\n\n";

        return json_encode($return);
    }

?>

<script type="text/javascript">
var val= <?php echo myMethod(); ?>;

for(i in val){
    document.write(val[i] + '<br \/>');
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T15:20:20.037

我编辑了你的代码问题是在 html 和 js 代码上而不是在 php

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
</head>

<body>
<?php 

function myMethod()
{
error_reporting(E_ALL);

echo "<h2>Querying...</h2>\n";

/* Get the port for the WWW service. */
$service_port = getservbyname('www', 'tcp');

/* Get the IP address for the target host. */
$address = gethostbyname('www.example.com');

/* Create a TCP/IP socket. */
$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
if ($socket === false) {
    echo "socket_create() failed: reason: " . socket_strerror(socket_last_error()) . "\n";
} else {
    echo "OK.\n";
}

echo "Attempting to connect to '$address' on port '$service_port'...";
$result = socket_connect($socket, $address, $service_port);
if ($result === false) {
    echo "socket_connect() failed.\nReason: ($result) " . socket_strerror(socket_last_error($socket)) . "\n";
} else {
    echo "OK.\n";
}

$in = "HEAD / HTTP/1.1\r\n";
$in .= "Host: www.example.com\r\n";
$in .= "Connection: Close\r\n\r\n";
$out = '';

echo "Sending HTTP HEAD request...";
socket_write($socket, $in, strlen($in));
echo "OK.\n";

echo "Reading response:\n\n";
while ($out = socket_read($socket, 2048)) {
    echo $out;
    return 'test';

}

echo "Closing socket...";
socket_close($socket);
echo "OK.\n\n";
}

?>
<?php echo myMethod(); ?>
</body>
</html> 
```

# java - 如何创建一个按钮以从 Web 获取文件

> ID：14835601
> 
> 赞同：0
> 
> 时间：2013-02-12T15:10:17.100
> 
> 标签：java, android, xml, button

我想制作一个下载按钮，允许用户从网上下载或打开 mp4 文档。有可能做到吗？

文件：MP4

视频资源：[http ://wisdom.gotdns.com/application/android/res/test.mp4](http://wisdom.gotdns.com/application/android/res/test.mp4)

视频分辨率：1280*720

*我应该在xml文件或java文件中添加什么？

* * *

这是我的按钮。

```
<Button
    android:id="@+id/button3"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:layout_gravity="bottom"
    android:layout_marginTop="60dp"
    android:textColor="#ffffff" 
    android:background="#333"
    android:text="@string/tab2_watch" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:49:07.867

因为链接已经失效，我无法测试这是否有效，但我很确定我做得很好。

MainActivity.java：

```
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.support.v4.content.LocalBroadcastManager;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity {
    private static final String EXAMPLE_URL = "here goes your URL";

    private DownloadReceiver mDownloadReceiver;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        mDownloadReceiver = new DownloadReceiver();

        Button button = (Button) findViewById(R.id.button);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(MainActivity.this, DownloadService.class);
                intent.putExtra(Constants.KEY_DOWNLOAD_URL, EXAMPLE_URL);

                startService(intent);

                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        Toast.makeText(MainActivity.this, "starting download.. be patient", Toast.LENGTH_LONG).show();
                    }
                });
            }
        });
    }

    @Override
    protected void onResume() {
        super.onResume();

        LocalBroadcastManager.getInstance(this).registerReceiver(mDownloadReceiver, new IntentFilter(Constants.RECEIVER_NAME));
    }

    @Override
    protected void onPause() {
        super.onPause();

        LocalBroadcastManager.getInstance(this).unregisterReceiver(mDownloadReceiver);
    }

    private class DownloadReceiver extends BroadcastReceiver {

        @Override
        public void onReceive(Context context, Intent intent) {
            int mode = intent.getIntExtra(Constants.KEY_MODE, 0);
            final String message = intent.getStringExtra(Constants.KEY_MESSAGE);

            switch (mode) {
            case Constants.VALUE_MODE_ERROR:
                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        Toast.makeText(MainActivity.this, "an error occurred: " + message, Toast.LENGTH_LONG).show();
                    }
                });

                break;

            case Constants.VALUE_MODE_SUCCESSFUL:
                showVideoView(message);

                break;
            }
        }

        private void showVideoView(String filePath) {
            Intent intent = new Intent(MainActivity.this, VideoActivity.class);
            intent.putExtra(Constants.KEY_MESSAGE, filePath);

            startActivity(intent);
        }
    }
} 
```

下载服务.java

```
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;

import org.apache.commons.io.IOUtils;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.IntentService;
import android.content.Intent;
import android.os.Environment;
import android.support.v4.content.LocalBroadcastManager;

public class DownloadService extends IntentService {

    public DownloadService() {
        super("downloadService");
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        String url = intent.getStringExtra(Constants.KEY_DOWNLOAD_URL);

        try {
            checkIfSdcardIsAvailableForStorage();
        }

        catch (SdcardNotAvailableException e) {
            e.printStackTrace();
            sendBroadcastIntent(Constants.VALUE_MODE_ERROR, e.getMessage());

            return;
        }

        try {
            File file = downloadFile(url);

            sendBroadcastIntent(Constants.VALUE_MODE_SUCCESSFUL, file.getAbsolutePath());
        }

        catch (ClientProtocolException e) {
            e.printStackTrace();
            sendBroadcastIntent(Constants.VALUE_MODE_ERROR, "there was a problem with the downloading");
        }

        catch (IOException e) {
            e.printStackTrace();
            sendBroadcastIntent(Constants.VALUE_MODE_ERROR, "there was a problem reading the downloaded file");
        }
    }

    private File downloadFile(String url) throws ClientProtocolException, IOException {
        HttpGet httpGet = new HttpGet(url);
        DefaultHttpClient client = new DefaultHttpClient();
        HttpResponse response = client.execute(httpGet);

        File path = Environment.getExternalStorageDirectory();
        File file = new File(path, "downloaded_file_" + System.currentTimeMillis());

        byte[] bs = IOUtils.toByteArray(response.getEntity().getContent());
        FileInputStream fileInputStream = new FileInputStream(file);
        fileInputStream.read(bs);
        fileInputStream.close();

        return file;
    }

    private void checkIfSdcardIsAvailableForStorage() throws SdcardNotAvailableException {
        String state = Environment.getExternalStorageState();

        if (state.equals(Environment.MEDIA_REMOVED)) {
            throw new SdcardNotAvailableException("the sdcard is currently not mounted");
        }

        if (state.equals(Environment.MEDIA_MOUNTED_READ_ONLY)) {
            throw new SdcardNotAvailableException("the sdcard is currently in read only mode.");
        }
    }

    private class SdcardNotAvailableException extends Exception {
        private static final long serialVersionUID = 1L;

        public SdcardNotAvailableException(String string) {
            super(string);
        }
    }

    private void sendBroadcastIntent(int mode, String message) {
        if (mode == 0) {
            throw new RuntimeException("mode may not be 0");
        }

        if (message == null) {
            throw new RuntimeException("message may not be null");
        }

        Intent intent = new Intent(Constants.RECEIVER_NAME);
        intent.putExtra(Constants.KEY_MODE, mode);
        intent.putExtra(Constants.KEY_MESSAGE, message);

        LocalBroadcastManager.getInstance(getApplicationContext()).sendBroadcast(intent);
    }
} 
```

常量.java

```
public class Constants {
    public static final String KEY_MESSAGE = "message";
    public static final String KEY_MODE = "mode";
    public static final int VALUE_MODE_SUCCESSFUL = 1;
    public static final int VALUE_MODE_ERROR = 2;

    public static final String RECEIVER_NAME = "DownloadService";
    public static final String KEY_DOWNLOAD_URL = "downloadUrl";

    private Constants() {
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="download" />

</LinearLayout> 
```

视频.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <VideoView
        android:id="@+id/video"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="your package"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="15"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".VideoActivity" />

        <service android:name=".DownloadService" />
    </application>

</manifest> 
```

libs 文件夹中的依赖项：commons-io-2.4.jar（[链接](http://commons.apache.org/io/)）。

请注意，我省略了这些包，因此您需要将其添加到您的包中。正如我之前所说，您与电影的链接已失效，因此可能无法正常工作，您将不得不尝试使用其他视频。

它的作用是创建一个服务，该服务将获取文件并将其保存到 sdcard。下载后，它将向 Activity 发出信号以使用 VideoView 启动一个 Activity，该 VideoView 将获取文件的路径并播放它。

我有时会做得过火，但我认为正确性>速度。这样，您还将学习下载文件的正确方法。

关于依赖关系的说明：将 InputStream 设为字节数组有很多不好的方法。依赖项以最好和最快的方式做到这一点。

告诉我有什么不对劲的地方。祝你好运！

# gcc - 将 boost 版本从 1.52 切换到 1.53 后与 GCC 的链接失败

> ID：14835605
> 
> 赞同：3
> 
> 时间：2013-02-12T15:10:28.880
> 
> 标签：gcc, boost, linker, boost-thread

将 boost 库从版本 1.52 升级到 1.53 后，在 Linux 下使用 GCC 构建时出现以下链接器错误。相同的应用程序在 Windows 下使用 VC++10 和 boost 1.53 构建良好。

```
Invoking: GCC C++ Linker
g++ -L"/home/robert/boost_1_53_0/stage/lib" -L/usr/lib -o "MyApp"  ./myObjectFile.o -lboost_log_setup-mt-s -lboost_log-mt-s -lboost_thread-mt-s -lboost_system-mt-s -lboost_regex-mt-s -lcryptopp -lboost_date_time-mt-s -lpthread -ldl -lboost_filesystem-mt-s
/home/robert/boost_1_53_0/stage/lib/libboost_thread-mt-s.a(thread.o): In function `boost::this_thread::hiden::sleep_for(timespec const&)':
thread.cpp:(.text+0xc10): undefined reference to `clock_gettime'
/home/robert/boost_1_53_0/stage/lib/libboost_thread-mt-s.a(thread.o): In function `boost::this_thread::hiden::sleep_until(timespec const&)':
thread.cpp:(.text+0x1425): undefined reference to `clock_gettime'
thread.cpp:(.text+0x14cd): undefined reference to `clock_gettime'
thread.cpp:(.text+0x159c): undefined reference to `clock_gettime'
thread.cpp:(.text+0x1684): undefined reference to `clock_gettime'
/home/robert/boost_1_53_0/stage/lib/libboost_thread-mt-s.a(thread.o):thread.cpp:(.text+0x176e): more undefined references to `clock_gettime' follow
collect2: error: ld returned 1 exit status 
```

我像这样构建了boost库：

```
./bootstrap.sh --with-toolset=gcc
./b2 --layout=tagged variant=debug,release link=static runtime-link=static cxxflags=-std=c++0x 
```

我的 GCC 版本是 4.7.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:13:11.627

它基本上说`clock_gettime`链接器找不到该功能。这个函数在`rt`库中，所以添加`-lrt`到链接器命令行。

# python - django 表单从查询集中排除用户实例

> ID：14835607
> 
> 赞同：3
> 
> 时间：2013-02-12T15:10:48.373
> 
> 标签：python, django, django-forms, django-formwizard

我有以下模型：

类用户配置文件（模型。模型）：

```
user = models.OneToOneField(User, related_name="user")
people_interested = models.ManyToManyField(User, related_name="interested") 
```

现在我想要一个表单，我想为用户提供一个可以选择 people_interested 的表单，所以我添加了以下 forms.py

```
class ChooseForm(forms.Form):
    q_set = User.objects.all()
    peers = forms.ModelMultipleChoiceField(widget=forms.CheckboxSelectMultiple, queryset = q_set) 
```

然后在视图中：

```
form = ChooseForm(data = request.POST or None)
if request.POST and form.is_valid():
    uprofile, created = UserProfile.objects.get_or_create(user=request.user)
    uprofile.people_interested = form.cleaned_data['peers']
    uprofile.save()
    return HttpResponseRedirect("/")
else:
    return render(request, "form_polls.html", {'form':form}) 
```

但这样做的问题是，当前用户实例也会显示出来。所以我在views.py中尝试了以下内容：

```
form = ChooseForm(request.user.id, data = request.POST or None) 
```

然后在 forms.py

```
class ChooseForm(forms.Form):

    def __init__(self, uid, *args, **kwargs):
        super(ChooseForm, self).__init__(*args, **kwargs)
        self.fields['peers'].queryset = User.objects.exclude(id=uid)
    q_set = User.objects.all() 
    peers = forms.ModelMultipleChoiceField(widget=forms.CheckboxSelectMultiple, queryset = q_set) 
```

但是上面不是一个干净的实现，有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:30:04.710

是什么让你说这不是一个干净的实现？覆盖`queryset`是`__init__`完全可以接受的。

为了改进你的代码，我唯一要做的就是使用一个`post_save`信号`User`来创建它`UserProfile`，然后`user.get_profile()`在你的视图上做。看到[这个问题](https://stackoverflow.com/questions/1910359/creating-a-extended-user-profile)

You could also use a `ModelForm` for `UserProfile` instead of a regular form, and limit the fields to `people_interested`.

# g++ - UnitTest++ 和 g++ - 库的相对路径

> ID：14835609
> 
> 赞同：2
> 
> 时间：2013-02-12T15:10:53.703
> 
> 标签：g++, unittest++

我正在尝试让 UnitTest++ 在此目录树之后的项目中工作：

```
Project/
|-- src/
|-- test/
|   |-- test.cpp
|-- unittest-cpp/
|   |-- UnitTest++/
|       |-- libUnitTest++.a
|       |-- src/
|            |-- UnitTest++.h
|-- Makefile 
```

我正在尝试在项目目录中使用 g++ 进行编译。我的 test.cpp 文件包含 UnitTest++ 入门代码。

我尝试了以下方法：

```
g++ -Lunittest-cpp/UnitTest++/ -lUnitTest++ -Iunittest-cpp/UnitTest++/src/ \
test/test.cpp -o Test 
```

如果我理解得很好， -L 就是给出静态库的路径。-l（小 L）用于库名称，-I（大写 i）用于包含路径。

我得到两个不同的结果。它要么告诉我它在 /usr/bin/ 中找不到该库？？？或者它告诉我有未定义的对 unittest::* 的引用。

是因为我提供了无法编译的库的相对路径吗？我是通过多个目录使用 g++ 的新手，我试图在让它在我的 Makefile 中工作之前了解它是如何工作的。

[编辑]：在链接库和头文件之前必须给出 test/test.cpp 参数。所以，这行得通：

```
g++ test/test.cpp -Lunittest-cpp/UnitTest++ -lUnitTest++ -Iunittest-cpp/UnitTest++/src -o Test 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-01T19:43:54.890

编译时必须在其依赖项之前给出要编译的文件（在此上下文中为 test.cpp）。这有效：

```
g++ test/test.cpp -Lunittest-cpp/UnitTest++ -lUnitTest++ -Iunittest-cpp/UnitTest++/src -o Test 
```

# css - 相对父DIV继承绝对子DIV的宽度

> ID：14835610
> 
> 赞同：16
> 
> 时间：2013-02-12T15:10:58.717
> 
> 标签：css

我正在尝试将子 DIV 放置在父 DIV 的底部，但我也希望子 DIV 的内容有助于确定父 DIV 的尺寸。正如我现在所拥有的，子 DIV 不会影响父 DIV 的宽度/高度。

这是我的 HTML/CSS 代码示例：

//HTML代码：

```
<div id="parent">
    <h3>Top Aligned Title</h3>
    <div id="child"></div>
</div> 
```

//CSS代码：

```
#parent {
    background-color:#222;
    position: relative;
    height: 500px;
}
#child {
    background-color:#444;
    position: absolute;
    bottom: 0px;
    width: 100px;
    height: 200px;
} 
```

我需要做什么才能实现我想要做的事情？我可以放弃绝对/相对 CSS 规则，只需在父 DIV 中创建一个表格，这将允许我实现底部对齐和指示父级尺寸的内容。

但是，我想知道是否有办法在 CSS 中做到这一点，而不必设置父 DIV 的宽度。

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T15:20:56.660

简短的回答是，你所问的基本上不能用纯 CSS / HTML 来完成。（至少没有表格）您需要 Javascript 来读取#child 的宽度/高度，然后进行您想要执行的计算（我不知道）并将新的高度/宽度设置为 #parent。

否则，如果您的意思是希望#child 的高度/宽度根据其内容而改变，当然这是原生 CSS，只需将其高度/宽度设置为自动，然后开始在其中添加文本，您会看到它会开始增长以适应您的内容。

由于#child 是绝对定位的，因此它会从文档的正常流程中取出，因此不会影响#parent。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-23T15:18:40.067

使用现代 CSS，这是可行的。

**HTML：**

```
<div id="parent">
    <h3>Top Aligned Title</h3>
    <div id="child">
        <p>CHILD ELEMENT</p>
    </div>
</div> 
```

**CSS：**

```
#parent {
    background:red;
    height: 500px;
    position:relative;
}
#child {
    background:green;
    position: absolute;
    top:100%;
    -webkit-transform: translateY(-100%);
    -ms-transform: translateY(-100%);
    transform: translateY(-100%);
    width: 100px;
} 
```

[http://jsfiddle.net/Bushwazi/bpe5s6x3/](http://jsfiddle.net/Bushwazi/bpe5s6x3/)

1.  `transform:translateY(-100%);`是诀窍。它的数学是基于`element`'s 的`box-model`。
2.  您也可以结合`top:50%;`使用`transform:translateY(-50%);`以使其居中。
3.  您可以交换`top`for`left`和`translateY`for`translateX`以水平定位元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-29T06:52:30.880

干得好

**HTML：**

```
<main id="parent">
  <div class="popup">Top Aligned Title
    <div class="content">
      Content
    </div>
  </div>
</main> 
```

**CSS：**

```
#parent {
  width: 120px;
}

.popup {
  position: relative;
  margin-top: 48px;
}

.content {
  left: 0;
  position: absolute;
  background: green;
  width: 100%;
} 
```

[http://jsfiddle.net/8L9votay/](http://jsfiddle.net/8L9votay/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-06T02:30:11.053

你可以玩`flex`零宽度/高度。

我最近提出了以下解决方案（宽度）：

```
#parent {
  display: inline-flex;
  flex-direction: column;

  background: #518cff;
  color: #fff;
}

#child-wrapper {
  height: 0; /* This can also be max-height, but height is just enough */
}

#child {
  transform: translateY(-100%); /* If you need to align child to the bottom */

  background: #b40000;
  color: #fff;
}
```

```
<div id="parent">
  <h3>Top Aligned Title</h3>
  <div id="child-wrapper"> <!-- This is the solution -->
    <div id="child">
      Child's content that is longer than parent's
    </div>
  </div>
</div>
```

# c# - 使用 Action 委托根据泛型调用正确的函数

> ID：14835613
> 
> 赞同：3
> 
> 时间：2013-02-12T15:11:02.950
> 
> 标签：c#, generics, delegates, action, func

我以前见过这种模式/方法，我正在尝试重新创建它以使我现有的一些代码更有效率。

**用例：** 从源系统中检索复杂对象。客户端只会使用一部分信息，因此我们必须将这个复杂的对象“映射”到一个简单的 POCO 以进行 JSON 序列化；此外，在这种映射方法中，还完成了一些其他数据格式化。首先，我们将复杂对象传递给一个通用方法，该方法进行一些基本处理

```
// Generic Method, Entry Point for mapping
static void GenericEntry<T, TK>(string userid, string environment, DBContext context) {

    .... // do stuff with userid and environment to set a context
    .... // query results, which return a complex object of Type TK

    // Here is where I would like to use an Action delegate to call the appropriate map
    // method.. there could hundreds of objects that map and process down to a POCO, 
    // Currently, this logic is using reflection to find the appropriate method with 
    // the appropriate signature... something like: 
    Type functionType = typeof(DTOFunctions);
    var methods = functionType.GetMethods(BindingFlags.Public | BindingFlags.Static);
    var mi = methods.FirstOrDefault(x => x.Name == "MapObject" && 
        x.ReturnType == typeof(T));

    if (mi == null) throw new ArgumentException(string.Format("Unable to find method MapObject for {0}", typeof(TK).Name));

    var resultList = new ArrayList();
    foreach (var row in results)
    {
        var poco = mi.Invoke(functionType, new object[] { row });
        resultList.Add(poco);
    }
    if (resultCount == -1) resultCount = resultList.Count;
    return SerializeDTO(resultList, ResponseDataTypes.JSON, resultCount);

    // THERE HAS TO BE A BETTER WAY STACKOVERFLOW! HALP!
} 

public Class DTOFunctions {
    // Mapping Method from Complex to Simple object
    static SimplePOCO_A MapObject(ComplexObject_A cmplx){
        var poco = new SimplePOCO_A(); 
        .... // mapping from cmplx field to SimplePOCO field
    }

    static SimplePOCO_B MapObject(ComplexObject_B cmplx) {
        var poco = new SimplePOCO_B(); 
        .... // mapping from cmplx field to SimplePOCO fiel
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:26:12.763

我不太确定你在问什么，但是你想要这样的东西吗？

```
static void GenericEntry<T, TK>(string userid, string environment, 
                                DBContext context, Func<T, TK> conversion) 
{
    //....
    var resultList = new List<TK>();
    foreach (var row in results)
    {
        var poco = conversion(row);
        resultList.Add(poco);
    }
    //....
} 
```

称为：

```
 GenericEntry<ComplexObject, SimplePOCO>(userid, environment, context, DTOFunctions.MapObject) 
```

（注意论点中缺少的`()`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:43:02.960

看起来你可以在这里实现[代理模式](http://en.wikipedia.org/wiki/Proxy_pattern)。否则，可能会将逻辑移动到实际对象本身，并在每个知道如何序列化自身的 ComplexObjects 中添加一个 ToJSON() 方法。然后将它们附加在一起以构成 JSON 数组。这将取决于您使用什么来序列化 JSON，因此在下面的示例中，我只是手动完成了它。

常见的 JSONSerializable 接口

```
 public interface IJsonSerializable
    {
        string ToJson();
    } 
```

复杂和简单的对象：

```
 public class ComplexObjectA : IJsonSerializable
    {
        public string ToJson()
        {
            var simpleObject = new SimpleObjectA();

            // Map away

            // Then serialize
            return SerializeDTO(simpleObject);
        }

        private string SerializeDTO(SimpleObjectA simpleObject)
        {
            throw new NotImplementedException();
        }
    }

    public class SimpleObjectA
    {
        // simple properties
    } 
```

然后是入口点

```
 static void GenericEntry<T, TK>(string userid, string environment, DBContext context)
        {

            // Magic happens here
            var results = GetResults();

            // More magic

            var resultList = new List<string>();
            foreach (var row in results)
            {
                var poco = row.ToJson();
                resultList.Add(poco);
            }
            return String.Format("[{0}]", String.Join(resultList, ", "));
        } 
```

# linq - Expression.IsFalse 是未知的吗？

> ID：14835621
> 
> 赞同：2
> 
> 时间：2013-02-12T15:11:18.820
> 
> 标签：linq, expression-trees

当我最终尝试运行查询时出现以下错误

> 'IsFalse' 类型的未知 LINQ 表达式

这是代码

```
private static IQueryable<T> QueryMethod<T>(
    IQueryable<T> query,
    QueryableRequestMessage.WhereClause.Rule rule,
    Type type,
    string methodName,
    Expression property,
    Expression value,
    string op,
    ParameterExpression parameter
) where T : class
{
    var methodInfo = type.GetMethod(methodName, new[] { type });
    var call = Expression.Call(property, methodInfo, value);
    var expression = rule.Op.Equals(op)
                            ? Expression.Lambda<Func<T, bool>>(call, parameter)
                            : Expression.Lambda<Func<T, bool>>(Expression.IsFalse(call), parameter);
    query = query.Where(expression);
    return query;
} 
```

重要变量具有以下值

```
query: an IQueryable that I am building up
type: String
methodName: "EndsWith"
rule.Op: "ne" //Not Ends With
op: "ew"
value: "somestring" 
```

基本上，如果 op 和 rule.Op 相等，它只会运行 methodName (EndsWith) 并进行相应的过滤。但是，如果它们不同，我想否定结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T15:17:11.920

看来你没有做错什么；您的 LINQ 提供程序根本不知道如何处理`Expression.IsFalse`返回的表达式树实例，因此它会抱怨。

您可以尝试自己手动构建“is false”表达式树，这应该可以：

```
Expression.Lambda<Func<T, bool>>(
   Expression.Equal(call, Expression.Constant(false)),
   parameter) 
```

# html - 如何解析iOS App中的一些网页？

> ID：14835624
> 
> 赞同：1
> 
> 时间：2013-02-12T15:11:28.690
> 
> 标签：html, ios, objective-c, xcode, parsing

我有一个网页，需要用objective-c解析一些div的内容。

```
<div id="foo">11</div> 
```

然后将它*（11）*添加到变量..然后用它制作徽章。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:32:08.143

[这个网站](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios)似乎有一个不错的介绍和一套关于开始在 iOS 中抓取的教程。几个月前我用它作为参考。它让您使用`libxml2`（一个 C 库）和`hpple`Objective-C 库将 libxml2 包装到 NSObjects 中。

# git - drupal 7 和 git - 仅更新站点文件

> ID：14835625
> 
> 赞同：-1
> 
> 时间：2013-02-12T15:11:34.753
> 
> 标签：git, drupal-7, core, gitignore

我正在使用 git 来更新我的 d7 站点。我只想添加 /sites 文件夹和我想的 .htaccess 并保留所有核心 drupal 文件。有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:36:50.080

首先在git中创建目录。然后克隆到本地目录。然后将您的站点文件夹和.htaccess文件放入其中。然后推送到git。当您添加新模块后，您的整个模块文件夹复制到git目录中。然后推。每次添加新模块时都会完成这些过程。

# windows - 如何让 2d XNA 游戏教程在 Windows 8 上运行？

> ID：14835626
> 
> 赞同：0
> 
> 时间：2013-02-12T15:11:37.553
> 
> 标签：windows, visual-studio-2010, xna-4.0

我刚刚在大学完成了[2D XNA 游戏教程](http://xbox.create.msdn.com/en-US/education/tutorial/2dgame/getting_started)。现在我必须做一个截屏视频，展示我在 Windows 8 系统上对家里的游戏所做的更改。我安装了 Visual Studio 2010 和 XNA 4.0。我可以在 Visual C# 中打开游戏项目并修改我需要的项目的任何部分，但我无法运行游戏。

我尝试按照 XNA 教程中的建议安装 Windows Phone 开发人员工具，当我尝试安装时，它显示“需要 Windows 7 或 Windows Vista。

是否有解决方法，以便我可以运行游戏，以便我可以对其运行进行截屏？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:13:38.220

我最近遇到了同样的问题。据我所知，微软放弃了 XNA 并停止了在 Windows 8 下对它的支持（如果我错了，有人可能会纠正我）。但并非所有希望都落空了 MonoGame 是 XNA 框架的开源 Mono 端口，它应该可以在 Windows 8 下运行。

此链接显示如何将上述教程迁移到 MonoGame 并在 Windows 8 下运行：http: [//solutions.devx.com/ms/msdn/windows-client/windows-8-xna-and-monogame-part-3-代码迁移和windows-8-feature-support.html](http://solutions.devx.com/ms/msdn/windows-client/windows-8-xna-and-monogame-part-3-code-migration-and-windows-8-feature-support.html)

据我所知，MonoGame 的内容管道不起作用，您仍然需要将内容烘焙到 xnb 文件。

我希望我能帮上忙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T03:22:41.207

我意识到你的问题现在已经过时了，希望能解决，但如果其他人有类似的问题，我想我还是会回复。我刚刚在我的 Windows 8 PC 上运行了该教程的游戏，使用 Visual Studio 2010 和 XNA 4 没有问题 - 所以它在 Windows 8 上运行良好，因为微软仍然支持 Windows 8 桌面上的 XNA 4（只是不适用于 Windows Store 应用程序）。问题似乎是“如何在 Windows 8 上安装 XNA 4 以及尝试安装 XNA 4 时可能出现的问题该怎么办？”。对于该问题，请参阅此处的回复：[如何在 Windows 8 中安装 XNA Game Studio 4.0？](https://stackoverflow.com/questions/12849107/how-to-install-the-xna-game-studio-4-0-in-windows-8)

# android - Android GPS 适用于平板电脑，不适用于智能手机

> ID：14835629
> 
> 赞同：0
> 
> 时间：2013-02-12T15:11:47.060
> 
> 标签：android, google-maps, gps

我正在尝试创建并绘制从当前设备位置到定义目的地的路线。当我在平板电脑上测试应用程序时，它运行良好。但是当我在智能手机上测试它时，它崩溃了。这是我写的代码：

```
 public class RoutePath extends MapActivity {
                        /** Called when the activity is first created. */
                        MapView mapView;
                        private RoutePath _activity;
                        GeoPoint srcGeoPoint,destGeoPoint;
                        private static List<Overlay> mOverlays;
                        MapController mc;
                        Location location;
                        private MyLocationOverlay myLocationOverlay;
                        String n;
                        double longitude;
                        double latitude;

                        @Override
                        public void onCreate(Bundle savedInstanceState) {
                            super.onCreate(savedInstanceState);

                            ActionBar bar = getActionBar();
                            bar.setBackgroundDrawable(getResources().getDrawable(R.drawable.actionbar));

                            SharedData data = SharedData.getInstance();
                            mapView = new MapView(this,"***MAP KEY*****");
                            mapView.setClickable(true); 

                            setContentView(mapView);
                            _activity = this;
                            LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
                            Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);//work with network
                            longitude = location.getLongitude();
                            latitude = location.getLatitude();

                            double src_lat = latitude;
                            double src_long = longitude;
                            double dest_lat = 38.1267303;
                            double dest_long = 13.3466097;

                           String n = String.valueOf(src_long);
                           Log.d("asd",n);

                            if(src_lat == -1 || src_long == -1 || dest_lat == -1 || dest_long == -1){
                                showAlert("Please enter source and destination points");
                            }else{

                                srcGeoPoint = new GeoPoint((int) (src_lat * 1E6),(int) (src_long * 1E6));
                                destGeoPoint = new GeoPoint((int) (dest_lat * 1E6),(int) (dest_long * 1E6));

                                List<Overlay> mapOverlays = mapView.getOverlays();
                                Drawable srcdrawable = this.getResources().getDrawable(R.drawable.pushpin1);
                                CustomItemizedOverlay srcitemizedOverlay = new CustomItemizedOverlay(srcdrawable);
                                //CustomItemizedOverlay srcitemizedOverlay = new CustomItemizedOverlay(getDrawable("com/agarwal/route/pin_green.png"));
                                OverlayItem srcoverlayitem = new OverlayItem(srcGeoPoint, "Hello!", "This is your Location.");

                                Drawable destdrawable = this.getResources().getDrawable(R.drawable.pushpin1);
                                CustomItemizedOverlay  destitemizedOverlay = new CustomItemizedOverlay( destdrawable );
                               // CustomItemizedOverlay destitemizedOverlay = new CustomItemizedOverlay(getDrawable("com/agarwal/route/pin_red.png"));
                                OverlayItem destoverlayitem = new OverlayItem(destGeoPoint, "Hello!", "This is dest Location.");

                                srcitemizedOverlay.addOverlay(srcoverlayitem);
                                destitemizedOverlay.addOverlay(destoverlayitem);

                                mapOverlays.add(srcitemizedOverlay);
                                mapOverlays.add(destitemizedOverlay);

                                connectAsyncTask _connectAsyncTask = new connectAsyncTask();
                                _connectAsyncTask.execute();       
                                mapView.setBuiltInZoomControls(true);
                                mapView.displayZoomControls(true);
                                mOverlays = mapView.getOverlays();
                                mapView.getController().animateTo(srcGeoPoint);
                                mapView.getController().setZoom(12);
                            }
                        }
                        @Override
                        protected boolean isRouteDisplayed() {
                            // TODO Auto-generated method stub
                            return false;
                        }
                        //era private prima di 
                       private class connectAsyncTask extends AsyncTask<Void, Void, Void>{
                            private ProgressDialog progressDialog;
                            @Override
                            protected void onPreExecute() {
                                // TODO Auto-generated method stub
                                super.onPreExecute();

                                progressDialog = new ProgressDialog(_activity);
                                progressDialog.setMessage("Caricamento del percorso...");
                                progressDialog.setIndeterminate(true);
                                progressDialog.show();
                            }
                            @Override
                            protected Void doInBackground(Void... params) {
                                // TODO Auto-generated method stub
                                fetchData();

                                return null;
                            }
                            @Override
                            protected void onPostExecute(Void result) {
                                // TODO Auto-generated method stub
                                super.onPostExecute(result);           
                                if(doc!=null){
                                    Overlay ol = new MyOverlay(_activity,srcGeoPoint,srcGeoPoint,1);
                                    mOverlays.add(ol);
                                    NodeList _nodelist = doc.getElementsByTagName("status");
                                    Node node1 = _nodelist.item(0);
                                    String _status1  = node1.getChildNodes().item(0).getNodeValue();
                                    if(_status1.equalsIgnoreCase("OK")){
                                        NodeList _nodelist_path = doc.getElementsByTagName("overview_polyline");
                                        Node node_path = _nodelist_path.item(0);
                                        Element _status_path = (Element)node_path;
                                        NodeList _nodelist_destination_path = _status_path.getElementsByTagName("points");
                                        Node _nodelist_dest = _nodelist_destination_path.item(0);
                                        String _path  = _nodelist_dest.getChildNodes().item(0).getNodeValue();
                                        List<GeoPoint> _geopoints = decodePoly(_path);
                                        GeoPoint gp1;
                                        GeoPoint gp2;
                                        gp2 = _geopoints.get(0);
                                        Log.d("_geopoints","::"+_geopoints.size());
                                        for(int i=1;i<_geopoints.size();i++) // the last one would be crash
                                        {

                                            gp1 = gp2;
                                            gp2 = _geopoints.get(i);
                                            Overlay ol1 = new MyOverlay(gp1,gp2,2,Color.BLUE);
                                            mOverlays.add(ol1);
                                        }
                                        Overlay ol2 = new MyOverlay(_activity,destGeoPoint,destGeoPoint,3);
                                        mOverlays.add(ol2);

                                        progressDialog.dismiss();
                                    }else{
                                        showAlert("Unable to find the route");
                                    }

                                    Overlay ol2 = new MyOverlay(_activity,destGeoPoint,destGeoPoint,3);
                                    mOverlays.add(ol2);
                                    progressDialog.dismiss();
                                    mapView.scrollBy(-1,-1);
                                    mapView.scrollBy(1,1);
                                }else{
                                    showAlert("Unable to find the route");
                                }

                            }

                        } //end Async
                        Document doc = null;
                        private void fetchData()
                        {

                            StringBuilder urlString = new StringBuilder();
                            urlString.append("http://maps.google.com/maps/api/directions/xml?origin=");
                            urlString.append( Double.toString((double)srcGeoPoint.getLatitudeE6()/1.0E6 ));
                            urlString.append(",");
                            urlString.append( Double.toString((double)srcGeoPoint.getLongitudeE6()/1.0E6 ));
                            urlString.append("&destination=");//to
                            urlString.append( Double.toString((double)destGeoPoint.getLatitudeE6()/1.0E6 ));
                            urlString.append(",");
                            urlString.append( Double.toString((double)destGeoPoint.getLongitudeE6()/1.0E6 ));
                            urlString.append("&sensor=true&mode=driving");    
                            Log.d("url","::"+urlString.toString());
                            HttpURLConnection urlConnection= null;
                            URL url = null;
                            try
                            {
                                url = new URL(urlString.toString());
                                urlConnection=(HttpURLConnection)url.openConnection();
                                urlConnection.setRequestMethod("GET");
                                urlConnection.setDoOutput(true);
                                urlConnection.setDoInput(true);
                                urlConnection.connect();
                                DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
                                DocumentBuilder db = dbf.newDocumentBuilder();
                                doc = (Document) db.parse(urlConnection.getInputStream());//Util.XMLfromString(response);
                            }catch (MalformedURLException e){
                                e.printStackTrace();
                            }catch (IOException e){
                                e.printStackTrace();
                            }catch (ParserConfigurationException e){
                                e.printStackTrace();
                            }
                            catch (SAXException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        }
                        private List<GeoPoint> decodePoly(String encoded) {

                            List<GeoPoint> poly = new ArrayList<GeoPoint>();
                            int index = 0, len = encoded.length();
                            int lat = 0, lng = 0;

                            while (index < len) {
                                int b, shift = 0, result = 0;
                                do {
                                    b = encoded.charAt(index++) - 63;
                                    result |= (b & 0x1f) << shift;
                                    shift += 5;
                                } while (b >= 0x20);
                                int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
                                lat += dlat;

                                shift = 0;
                                result = 0;
                                do {
                                    b = encoded.charAt(index++) - 63;
                                    result |= (b & 0x1f) << shift;
                                    shift += 5;
                                } while (b >= 0x20);
                                int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
                                lng += dlng;

                                GeoPoint p = new GeoPoint((int) (((double) lat / 1E5) * 1E6),
                                        (int) (((double) lng / 1E5) * 1E6));
                                poly.add(p);
                            }

                            return poly;
                        }
                        private void showAlert(String message){
                            AlertDialog.Builder alert = new AlertDialog.Builder(_activity);
                            alert.setTitle("Error");
                            alert.setCancelable(false);
                            alert.setMessage(message);
                            alert.setPositiveButton("Ok",new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int which) {
                                    // TODO Auto-generated method stub

                                }
                            });
                            alert.show();
                        }

                        private Drawable getDrawable(String fileName){
                            return Drawable.createFromStream(_activity.getClass().getClassLoader().getResourceAsStream(fileName), "pin");
                        }

                    } 
```

我想问题可能是高 RAM 的使用，因为我试图在 1200 公里以外的两个地方之间创建一条路线，所以平板电脑的 RAM 可以承受这个过程，但不能承受智能手机。我用来测试的 Android 版本是 4.0.3，在平板电脑上比在智能手机上。有什么建议么？

# tridion - 根据 URI 检索 Tridion 页面的已发布 URL

> ID：14835630
> 
> 赞同：5
> 
> 时间：2013-02-12T15:11:48.177
> 
> 标签：tridion, tridion-2011

有谁知道我们是否可以根据 URI 检索 SDL Tridion 页面的已发布 URL？理想情况下，我想使用核心服务来做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T15:42:36.837

如果您正在谈论检索页面的已发布 URL，可以通过以下方式完成：

```
PageData page = client.Read("tcm:12-345-64", null) as PageData;
PublishLocationInfo info = (PublishLocationInfo)page.LocationInfo;
string url = info.PublishLocationUrl; 
```

# unit-testing - Cakephp Fixtures 自动截断表无法正常工作

> ID：14835634
> 
> 赞同：2
> 
> 时间：2013-02-12T15:11:57.653
> 
> 标签：unit-testing, cakephp, truncate

我最近从 cakephp 2.2.5 切换到 2.3，自动截断表在 2.3 中不再工作。

我在 2.2.5 中所做的只是使用一些没有关系（即外键约束）的小表来测试框架，并且夹具导入和自动截断表完美地工作。

直到我确认我想使用 cakephp 并再次开始使用 CakeTestCase 开发我的应用程序。它停止工作。第一次导入后，数据仍在测试数据库中。所以第二次它表明它无法自动加载夹具，因为已经存在具有相同 ID 的数据。

所以我开始怀疑这主要是因为我当前表中的外键约束。

我在网上搜索并注意到很多人都有同样的问题，但还没有真正的解决方案。

唯一似乎是解决方案的方法在这里： [http ://cakephp.lighthouseapp.com/projects/42648/tickets/2905-tests-fixture-table-ar-not-truncate-when-droptable-false](http://cakephp.lighthouseapp.com/projects/42648/tickets/2905-tests-fixture-table-ar-not-truncate-when-droptable-false)

但是，我尝试打开 $dropTables = true，它没有用。而且我还尝试按照建议修改 CakeFixtureManager.php，但它也没有工作。

有谁知道如何解决这个问题？

# html - 如何防止删除 Nokogiri 中的标签？

> ID：14835635
> 
> 赞同：1
> 
> 时间：2013-02-12T15:12:00.080
> 
> 标签：html, ruby, parsing, nokogiri

我有这样的代码：

```
doc = Nokogiri::HTML.fragment(html)
doc.to_html 
```

和一个将被解析的 HTML 片段：

```
<p>some paragraph</p>
<a href="https://url...com"><span style="color: #a5a5a5;"><i>qwerty</i></span> ytrewq </a>
<code>
    <html>
        <p>
            qwerty
        </p>
    </html>
</code>
<p>some other paragraph</p>
<a href="https://url...com"><span style="color: #a5a5a5;"><i>qwerty</i></span> ytrewq </a> 
```

Nokogiri 删除块`<html>` `</html>`中的标签`<code>`。如何防止这种行为？

**更新：**

[Tin Man](https://stackoverflow.com/users/128421/the-tin-man "铁皮人")提出的解决方案，预解析 html 片段并转义代码块中的所有 html

这里有一些代码，它并不漂亮，所以如果您想提出其他解决方案，请发表评论

```
html.gsub!(/<code\b[^>]*>(.*?)<\/code>/m) do |x|
  "<code>#{CGI.escapeHTML($1)}</code>"
end 
```

感谢[铁皮人](https://stackoverflow.com/users/128421/the-tin-man "铁皮人")

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:28:47.343

问题是 HTML 无效。我用它来测试它：

```
require 'nokogiri'

doc = Nokogiri::HTML::DocumentFragment.parse(<<EOT)
<p>some paragraph</p>
<a href="https://url...com"><span style="color: #a5a5a5;"><i>qwerty</i></span> ytrewq </a>
<code>
    <html>
        <p>
            qwerty
        </p>
    </html>
</code>
<p>some other paragraph</p>
<a href="https://url...com"><span style="color: #a5a5a5;"><i>qwerty</i></span> ytrewq </a>
EOT

puts doc.errors 
```

解析文档后，Nokogiri 将`errors`使用它在解析过程中发现的错误列表填充数组。对于您的 HTML，`doc.errors`包含：

```
htmlParseStartTag: misplaced <html> tag 
```

原因是，在`<code>`块内，标签没有按照应有的方式进行 HTML 编码。

使用 HTML 实体将其转换为：

```
&lt;html&gt;
    &lt;p&gt;
        qwerty
    &lt;/p&gt;
&lt;/html&gt; 
```

它会起作用。

Nokogiri 是一个 XML/HTML 解析器，它尝试修复标记中的错误，让程序员有机会使用文档。在这种情况下，因为`<html>`块在错误的位置，它会删除标签。Nokogiri 不会关心标签是否被编码，因为在那时，它们只是文本，而不是标签。

* * *

编辑：

> 我将尝试使用 gsub 进行预解析并在代码块中转换 html

```
require 'nokogiri'

html = <<EOT
<p>some paragraph</p>
<a href="https://url...com"><span style="color: #a5a5a5;"><i>qwerty</i></span> ytrewq </a>
<code>
    <html>
        <p>
            qwerty
        </p>
    </html>
</code>
<p>some other paragraph</p>
<a href="https://url...com"><span style="color: #a5a5a5;"><i>qwerty</i></span> ytrewq </a>
EOT

doc = Nokogiri::HTML::DocumentFragment.parse(html.gsub(%r[<(/?)html>], '&lt;\1html&gt;'))

puts doc.to_html 
```

哪个输出：

```
<p>some paragraph</p>
<a href="https://url...com"><span style="color: #a5a5a5;"><i>qwerty</i></span> ytrewq </a>
<code>
    &lt;html&gt;
        <p>
            qwerty
        </p>
    &lt;/html&gt;
</code>
<p>some other paragraph</p>
<a href="https://url...com"><span style="color: #a5a5a5;"><i>qwerty</i></span> ytrewq </a> 
```

* * *

编辑：

这将`<html>`在解析之前处理标签，因此 Nokogiri 可以`<code>`毫发无损地加载块。然后它找到`<code>`块，对编码的`<html>`开始和结束标签进行转义，然后将生成的文本`<code>`作为其内容插入到块中。因为它是作为内容插入的，所以当 Nokogiri 将 DOM 呈现为 HTML 时，文本会在必要时重新编码为实体：

```
require 'cgi'
require 'nokogiri'

html = <<EOT
<p>some paragraph</p>
<a href="https://url...com"><span style="color: #a5a5a5;"><i>qwerty</i></span> ytrewq </a>
<code>
    <html>
        <p>
            qwerty
        </p>
    </html>
</code>
<p>some other paragraph</p>
<a href="https://url...com"><span style="color: #a5a5a5;"><i>qwerty</i></span> ytrewq </a>
EOT

doc = Nokogiri::HTML::DocumentFragment.parse(html.gsub(%r[<(/?)html>], '&lt;\1html&gt;'))

code = doc.at('code')
code.content = CGI::unescapeHTML(code.inner_html)

puts doc.to_html 
```

哪个输出：

```
<p>some paragraph</p>
<a href="https://url...com"><span style="color: #a5a5a5;"><i>qwerty</i></span> ytrewq </a>
<code>
    &lt;html&gt;
        &lt;p&gt;
            qwerty
        &lt;/p&gt;
    &lt;/html&gt;
</code>
<p>some other paragraph</p>
<a href="https://url...com"><span style="color: #a5a5a5;"><i>qwerty</i></span> ytrewq </a> 
```

# javascript - 关于javascript中的条件

> ID：14835639
> 
> 赞同：0
> 
> 时间：2013-02-12T15:12:19.063
> 
> 标签：javascript, conditional

我有一些（我认为它们可能是一些愚蠢的）问题……但它们是问题，我想在这里发帖并进行辩论。

这是关于条件的。我正在用 javascript 开发，我有一些功能，我想编写最佳代码。

例如，我必须检查一些条件，所以我可以写：

```
if(text == ""){
//some code for finish
}else if(text== previousText){
//some code for finish
}

//here I write more code...which runs if both conditions had not complied. 
```

我的疑问是：**你认为做什么更好？**

**第 1 点**

```
if(text == ""){
    //some code for finish
}else if(text== previousText){
    //some code for finish
}else{
    //here I write more code...which runs if both conditions had not complied.
} 
```

或者

**第 2 点**

```
if(text == ""){
    //some code for finish using return
    return;
}else if(text== previousText){
    //some code for finish using return
    return;
}

 //here I write more code...which runs if both conditions had not complied. 
```

我希望已经解释得很好。有时这些事情会被忽视，但我认为它们很重要。非常感谢，丹尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:16:04.313

我遵循规则，每个函数只有一个`return`语句。所以**第1点**

# jquery - $.post 在 IE 9 中不起作用

> ID：14835644
> 
> 赞同：0
> 
> 时间：2013-02-12T15:12:37.130
> 
> 标签：jquery, internet-explorer-9, .post

我有这个代码。它适用于 Google chrome 和 Firefox，但我不明白为什么它在 IE 9 中失败。当我尝试这个 URL 时：`Login?login_username=toto&login_password=toto`它有效。所以我认为问题出在`$.post`因为当我尝试在我的应用程序中连接时，表单是空的，所以`$.post`不要很好地发送表单。

```
$(function() {
    $("#dialog").dialog("destroy");

    $("#dialog").dialog({
        autoOpen: false,
        height: 200,
        width: 300,
        modal: false,
        buttons: {
            'Se connecter': function() {
                $(".ajax").trigger('submit');
            },
            Retour: function() {
                $("#dialog").dialog('close');
            }
        },
        close: function() {
        }
    });

    $(".ajax").submit(
        function(e) {
            var login_username = $("#login_username").val(),
            login_password = $("#login_password").val();

            alert(login_username + " pass  " + login_password);

            $.post('Login',{login_username:login_username,login_password:login_password});
            document.location.reload()
            return false; // Pour empêcher le submit vers la page 'action'
        });

    $('#connect').click(function(e) {
        e.preventDefault();
        $('#dialog').dialog('open');
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:20:54.460

你可以试试这个：

```
var values = {numberId: "1", companyId : "531"};

$.ajax({
  url: "test.php",
  type: "post",
  data: values,
  success: function(){
      alert("success");
      document.location.reload();
  },
  error:function(){
      alert("failure");
      $("#result").html('there is error while submit');
  }   
}); 
```

# iphone - iPhone Safari - 按主页按钮时暂停 html 音频

> ID：14835646
> 
> 赞同：0
> 
> 时间：2013-02-12T15:12:45.283
> 
> 标签：iphone, html, audio, background

我的页面中有一个音频元素，单击按钮即可开始播放。

**当用户按下 iPhone HOME**按钮并且 Safari 进入**后台**时，有没有办法**暂停**音频？

 ****谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:16:24.457

利用循环来检查用户是否在网页上。存储时间。

```
var lastSeen;
var loop = function (){
    lastSeen = Date.now();
    setTimeout(loop, 50);
};
loop();

var music = document.getElementById('music');
music.addEventListener('timeupdate', function (){
    if(Date.now() - lastSeen > 100){
        this.pause();
    }
}, false); 
```

**来源：[当 iOS Safari 关闭时停止 HTML5 音频循环](https://stackoverflow.com/questions/14414654/stop-html5-audio-from-looping-when-ios-safari-is-closed/14438227#14438227)******

# jquery - iframe 的所有链接上的功能

> ID：14835648
> 
> 赞同：0
> 
> 时间：2013-02-12T15:12:46.240
> 
> 标签：jquery, iframe

在一个页面上，我有一个 iframe，并且在头部，这个函数（基于 Jquery）

```
*$(window).load(function(){     
    $('#framelearning').contents().find('a').click(function(event) {
        alert("clicked!");
    }); 
}); 
```

它工作正常......但如果用户单击链接并更改此 iframe 的 url，它不起作用。该功能仅适用于加载的第一页。是否可以修改此功能以处理 iframe 上加载的所有页面？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:18:12.947

`$(window).load()`只加载一次，这就是为什么当 iFrame src 更改时它不会做任何事情的原因。

理想情况下，您应该做的是封装您的功能以便可以重用，但即便如此，我也不确定您是否可以挂钩到 iFrame 的 onload 事件。

这样的事情是我想象的：

```
function captureLinks() {
    $('#framelearning').contents().find('a').click(function(event) {
        alert("clicked!");
    });
}

$("#myiframe").on("load",captureLinks); 
```

如果没有您提供有关 HTML 的更多详细信息，很难说这是否真的能解决您要解决的问题。

# caching - 更新数据库表时更新缓存

> ID：14835653
> 
> 赞同：1
> 
> 时间：2013-02-12T15:13:06.177
> 
> 标签：caching, appfabric, sql-update

我正在使用 AppFabric 来处理我网站的缓存功能。我希望在我的数据库中的产品表中发生更改后更新产品缓存。我阅读了有关实现通读的信息，但从阅读中我发现：

```
Read: Called when a cache client requests a cached item that does not currently exist in the associated cache. 
```

这似乎不能解决我的问题，因为我希望在发现表的更改后更新产品缓存，它不一定首先不存在于缓存中。有什么方法可以使用 AppFabric 功能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:43:01.840

基本上，您只想拥有一个 SqlCacheDependency 机制。过去，它对 In Memory Cache 非常有用。

但是，AppFabric 缓存中不支持 SqlCacheDependency 机制（或实际上任何类型的依赖项）。你必须建立自己的...

此外，使用通读提供程序，缓存会检测到丢失的项目并调用提供程序来执行数据加载。如果您在 30 分钟到期时添加您的项目，提供商将永远不会尝试在到期前重新加载它。

最后，您可以尝试使用 Write-Behind 提供程序更新缓存。它将定期更新您的数据库。

# javascript - Javascript 不会关闭窗口（嵌套脚本）

> ID：14835657
> 
> 赞同：0
> 
> 时间：2013-02-12T15:13:12.380
> 
> 标签：javascript

我面临一个关于 JavaScript 的相当烦人的问题。问题是这是第三方代码，我不允许/不能在公共网站上使用此代码。:-( 我知道这使得排除故障变得更加困难，但我希望你能忍受我。

情况是这样的：

1)`Page1`从任何网页调用以打开聊天功能，这由一个 JavaScript 页面组成。在这个页面中，我们使用在这个页面的末尾设置一个页面标识符`YYYPage thisPage = htmlcSession.guiEngine.pageManager.yyyPage;` ，包含另一个 jsp 文件。

2) 一旦加载此页面（如步骤 1 中所述），此页面将打开第二个页面，该页面将生成的页面分为 5 个部分（此处使用 FRAMES，代码在过去 xx 年未修改）

在这些框架中的每一个中，都呈现了不同的功能，其中两个框架很重要。顶部框架，称为控制器框架，中间框架（称为应答框架）最终加载退出页面。

所有这些框架都有“唯一”的名称，因此我希望当我最终进入退出页面时，我应该能够通过调用关闭主窗口`YYYPage.Close()`;

我认为问题归结为：
是否可以从其中一个子窗口中关闭父窗口（当***所有***窗口都被 JavaScript`window.open`命令打开时！！）？

如果是这样，我怎样才能参考正确的窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-07T01:31:47.023

我一直在寻找这个问题的答案，结果只是想出了一个技巧。我讨厌未回答的问题，所以这是我的解决方案：您可以欺骗父窗口使用设置的超时时间自行关闭。由于某种原因，这不会触发脚本上的任何安全块：

```
<a href="#" onclick="window.top.setTimeout('window.close()',1)">Close Window</a> 
```

# c# - 使用 LINQ 获取 Outlook 文件夹详细信息

> ID：14835658
> 
> 赞同：1
> 
> 时间：2013-02-12T15:13:21.227
> 
> 标签：c#, vsto, outlook-addin

我想使用 Linq 查询获取 Outlook 文件夹详细信息（用户创建的 Outlook 文件夹名称），没有任何错误但未达到预期结果，

[此站点中的一些示例，但没有得到我的预期结果](https://stackoverflow.com/questions/861370/want-to-enumerate-outlook-folders)

这是我的代码。

```
private IEnumerable<MAPIFolder> GetAllFolders(Folders folders)
{
foreach (MAPIFolder f in folders) {
    yield return f;
    foreach (var subfolder in GetAllFolders(f.Folders)) {
        yield return subfolder;
    }
}
} 
```

这是我的按钮点击事件，

```
private void button1_Click(object sender, EventArgs e)
{
 Microsoft.Office.Interop.Outlook.Application oApp  = new Microsoft.Office.Interop.Outlook.Application();
        Microsoft.Office.Interop.Outlook._NameSpace ns = (Microsoft.Office.Interop.Outlook._NameSpace)oApp.GetNamespace("MAPI"); 

      foreach (var f in GetAllFolders(ns.Folders)) {
    //if (f == DELETE_FOLDER) continue;
    if (f.DefaultItemType == OlItemType.olMailItem) {
       string ff = f.Name;//here i tried to get folder name,but it doen't return foldernames

    }
}

} 
```

我想获得用户创建的文件夹名称..这是我的第一个 Outlook 插件，如果你能提供解释的答案。它对我有帮助..

# url - VBS 在后台转到 URL

> ID：14835669
> 
> 赞同：1
> 
> 时间：2013-02-12T15:14:01.953
> 
> 标签：url, browser, vbscript

我想让我的 VB 脚本转到后台的 URL。它可以在后台打开浏览器，然后关闭它。越“沉默”越好。我有 2 个可以在我的机器上运行但不能在另一个机器上运行的实现：

```
Set WshShell = WScript.CreateObject("WScript.Shell") 
Return = WshShell.Run("iexplore.exe " &  myURL, 1) 
```

这是另一个：

```
Set objExplorer = WScript.CreateObject _
("InternetExplorer.Application", "IE_")
objExplorer.Navigate myURL
'Determines if the window is visible or not
objExplorer.Visible = 0
'Suspend the script for 1 minute
WScript.Sleep 6000
'Close the IE (instantiated) window
objExplorer.quit 
```

...其中 myURL 是包含 URL 的字符串变量。

我无法弄清楚为什么上述任何一个都适用于我的笔记本电脑但不适用于服务器。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T15:25:15.577

如果您正在寻找一种静默方法，我建议您完全删除 Internet Explorer COM 对象并寻找一个[`XMLHttpRequest`](http://msdn.microsoft.com/en-us/library/windows/apps/hh453379.aspx)对象：

```
myURL = "http://www.google.com/"

Set req = CreateObject("MSXML2.XMLHTTP.6.0")
req.Open "GET", myURL, False
req.Send

WScript.Echo req.ResponseText 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-29T03:29:16.583

```
Set WshShell = WScript.CreateObject("WScript.Shell") 
Return = WshShell.Run("iexplore.exe " &  myURL, 1) 
WScript.Sleep 10000
WshShell.SendKeys "{F6}"
WScript.Sleep 500
WshShell.SendKeys "y"
WScript.Sleep 500
WshShell.SendKeys "o"
WScript.Sleep 500
WshShell.SendKeys "u"
WScript.Sleep 500
WshShell.SendKeys "t"
WScript.Sleep 500
WshShell.SendKeys "u"
WScript.Sleep 500
WshShell.SendKeys "b"
WScript.Sleep 500
WshShell.SendKeys "e"
WScript.Sleep 500
WshShell.SendKeys "{ENTER}"
WScript.Sleep 500 
```

# android - Android：如何取消/中断同步服务调用？

> ID：14835670
> 
> 赞同：1
> 
> 时间：2013-02-12T15:14:03.627
> 
> 标签：android, android-service, request-cancelling

对于 Application 对象，我调用`bindService()`. `onServiceConnected()`回调接收一个`IBinder`对象，我把它交给一个`AsyncTask`.

在那里，我通过调用并使用此**服务对象**`ServiceClass.Stub.asInterface(iBinderObject)`调用一些方法来获取我的服务对象。

 **这是一种**同步方法**，我**无法影响服务的超时设置**（谁知道它的超时实现是否可靠）。所以，事先，我`postDelayed()`在一个单独的线程上拥有自己的超时处理程序。

超时代码调用`unbindService()`以解除应用程序与服务的绑定并产生超时结果。

如果超时先运行，我还没有找到中断服务调用的方法。对此`unbindService()`没有明显的影响。呼叫`AsyncTask.cancel(true)`也不会改变任何事情。该`IBinder`对象似乎没有提供任何可能有帮助的明显方法。

我观察到的是`AsyncTask`一直在等待服务调用返回，这可能会`AsyncTask`显着延迟下一个标准的开始`Executor`。

有什么经验吗？想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-23T04:36:24.727

正如其他人所指出的，不能中断同步调用。

如果这是一个问题，并且您在服务 API 的设计中有任何输入，您可以使用一对单向 AIDL 接口执行异步操作，如下所示：

```
package sample;
oneway interface IServer {
    void doWork(IClient cb);
} 
```

和

```
package sample;
oneway interface IClient {
    void reportResult(String result);
} 
```**

# php - Codeigniter 强制下载文件

> ID：14835671
> 
> 赞同：15
> 
> 时间：2013-02-12T15:14:04.387
> 
> 标签：php, codeigniter

通过阅读 Codeigniter 文档，我正在使用以下代码强制从我的服务器下载文件。

```
function download($file_id){
        $file = $this->uploadmodel->getById($file_id); //getting all the file details
                                                      //for $file_id (all details are stored in DB)
        $data = file_get_contents($file->full_path); // Read the file's contents
        $name = $file->file_name;;

        force_download($name, $data);
    } 
```

该代码是图像的工作文件，但是当它附带 PDF 文件的情况时，它不起作用。我没有针对所有文件扩展名测试它，但由于它不适用于 PDF，它可能不适用于其他各种文件类型。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-12T18:22:04.503

我有过类似的问题。我认为问题在于发送到浏览器的某些 mime 和标头。我最终使用了我在这里找到的代码~~[http://taggedzi.com/articles/display/forcing-downloads-through-codeigniter](http://taggedzi.com/articles/display/forcing-downloads-through-codeigniter)~~。使用下面的函数代替 force_download。到目前为止，它对我有用。

```
 function _push_file($path, $name)
    {
      // make sure it's a file before doing anything!
      if(is_file($path))
      {
        // required for IE
        if(ini_get('zlib.output_compression')) { ini_set('zlib.output_compression', 'Off'); }

        // get the file mime type using the file extension
        $this->load->helper('file');

        $mime = get_mime_by_extension($path);

        // Build the headers to push out the file properly.
        header('Pragma: public');     // required
        header('Expires: 0');         // no cache
        header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
        header('Last-Modified: '.gmdate ('D, d M Y H:i:s', filemtime ($path)).' GMT');
        header('Cache-Control: private',false);
        header('Content-Type: '.$mime);  // Add the mime type from Code igniter.
        header('Content-Disposition: attachment; filename="'.basename($name).'"');  // Add the file name
        header('Content-Transfer-Encoding: binary');
        header('Content-Length: '.filesize($path)); // provide file size
        header('Connection: close');
        readfile($path); // push it out
        exit();
    }
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-10-29T12:06:06.653

它也适用于`.pdf`s。检查文件的路径 - 这可能是问题所在。
我也有这个问题，但是当我更正文件的路径时，它工作得很好。
以下是我编写代码的方式：

```
if($src ==  "xyyx")
{
$pth    =   file_get_contents(base_url()."path/to/the/file.pdf");
$nme    =   "sample_file.pdf";
force_download($nme, $pth);     
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-28T06:34:22.040

试试这个，我认为它是解决这个问题的最佳实践。

```
function download($file_id)
{
        $this->load->helper('file'); // Load file helper
        $file = $this->uploadmodel->getById($file_id); //Get file by id
        $data = read_file($file->full_path); // Use file helper to read the file's
        $name = $file->file_name;;

        force_download($name, $data);
} 
```

# c++ - 我如何退回包装容器的反向适配器？

> ID：14835674
> 
> 赞同：1
> 
> 时间：2013-02-12T15:14:09.003
> 
> 标签：c++, c++11, visual-studio-2012

我有一个类，它有一个双端队列，它用作堆栈（可能是一个向量，只是碰巧选择了双端队列）。

无论如何，我希望允许消费者迭代堆栈的内容（这是 std::stack 无法做到的）。我目前正在使用 push_back() 将项目推入堆栈，因此如果一个以前向顺序迭代内容，则一个从堆栈底部到顶部。

我宁愿以相反的顺序公开事物，以便使用 for (auto e: thestack) 以自上而下的方式迭代堆栈。

我发现了[C++11 反向基于范围的 for 循环](https://stackoverflow.com/questions/8542591/c11-reverse-range-based-for-loop)，它显示了一些用于反转新 for 循环语法（以及基于范围的算法）的迭代顺序的解决方案。

我不清楚的是如何提供一个简单的机制来让我的用户访问这个自动反转的双端队列。

例如，无需任何实际努力，我可以简单地允许 const& 访问底层双端队列：

```
 const std::deque<T> & GetStack() const { return m_stack; } 
```

消费者可能负责逆转：

```
 for (auto e : reverse(m_toolstack.GetStack())) 
```

在这里，我尝试使用以下解决方案进行反向：

```
template<class Fwd>
struct reverser_generic 
{
    Fwd &fwd;
    reverser_generic(Fwd& fwd_): fwd(fwd_) {}
    typedef std::reverse_iterator<typename Fwd::iterator> reverse_iterator;
    reverse_iterator begin() { return reverse_iterator(std::end(fwd)); } 
    reverse_iterator end() { return reverse_iterator(std::begin(fwd)); } 
};

template<class Fwd>
struct reverser_special
{
    Fwd &fwd;
    reverser_special(Fwd& fwd) : fwd(fwd) { }
    auto begin() -> decltype(fwd.rbegin()) { return fwd.rbegin(); } 
    auto end() -> decltype(fwd.rend()) { return fwd.rend(); } 
};

template<class Fwd>
auto reverse_impl(Fwd& fwd, long) -> decltype(reverser_generic<Fwd>(fwd))
{ 
    return reverser_generic<Fwd>(fwd);
}

template<class Fwd>
auto reverse_impl(Fwd& fwd, int) -> decltype(fwd.rbegin(), reverser_special<Fwd>(fwd))
{ 
    return reverser_special<Fwd>(fwd);
}

template<class Fwd>
auto reverse(Fwd&& fwd) -> decltype(reverse_impl(fwd,int(0))) 
{
    static_assert(!(std::is_rvalue_reference<Fwd&&>::value), "Cannot pass an rvalue reference to reverse()");
    return reverse_impl(fwd,int(0));
} 
```

以上所有内容都可以使用 VS2012 正确编译和运行（感谢 Jive Dadson 等人的解决方案）。

然而，在我的堆栈外观中，我真的很想简单地总是返回底层容器的反向，但我不清楚如何以一种明智的方式这样做：

```
auto GetContents() const -> decltype(reverse(m_stack)) { return reverse(m_stack); } 
```

上面的错误，说明m_stack是未知的。this->m_stack 同样未知。

**我该如何返回“无论是我的成员 m_stack 的反面是什么”？**

请注意，一旦得到回答，我还需要“如何返回反向（m_stack）的decltype的const＆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:29:59.250

是在声明`GetContents`之前声明的`m_stack`吗？

后期指定的返回类型中的名称必须遵守与函数签名其余部分中的名称相同的规则，即它们不能引用尚未声明的类成员：

```
struct X
{
    auto f() -> decltype(m_x) { return m_x; }  // ERROR
    int m_x;
    auto g() -> decltype(m_x) { return m_x; }  // OK
}; 
```

要使其工作，要么使用`std::declval`to 引用类型（这意味着如果您将from的`GetContents`类型更改为，则必须更新签名）或确保在引用之前已声明。`m_stack``std::deque``std::vector``m_stack`

# linux - Linux 运行级别 1：启动程序

> ID：14835678
> 
> 赞同：2
> 
> 时间：2013-02-12T15:14:26.420
> 
> 标签：linux, debian, runlevel

当我进入运行级别时，我试图自动启动一个`1`进程`init 1`。它是一个看门狗，必须一直发送生命信号，因此也处于运行级别`1`！但是当`1`进入运行级别时，每个进程都会被杀死并且系统切换到运行级别`S`。我试图告诉 linux 以`update-rc.d -f watchdog 99 1 S .`. `/etc/rc1.d/`和中的结果条目`/etc/rcS.d/`是：

`/etc/rc1.d/`：

```
.
.
.
S30killprocs -> ../init.d/killprocs
S90single -> ../init.d/single
S99watchdog -> ../init.d/watchdog
.
.
. 
```

`/etc/rcS.d/`：

```
.
.
.
S01glibc.sh -> ../init.d/glibc.sh
S02hostname.sh -> ../init.d/hostname.sh
S99watchdog -> ../init.d/watchdog
.
.
. 
```

不幸的是，进入`ps ax`运行级别后`1`并没有返回我的看门狗进程。我必须手动启动它。

```
PID TTY      STAT   TIME COMMAND
    1 ?        Ss     0:00 init [S]
    2 ?        S      0:00 [kthreadd]
    3 ?        S      0:00 [ksoftirqd/0]
    4 ?        S      0:00 [kworker/0:0]
    5 ?        S      0:00 [kworker/u:0]
    6 ?        S      0:00 [rcu_kthread]
    7 ?        S<     0:00 [khelper]
    8 ?        S      0:00 [kworker/u:1]
  104 ?        S      0:00 [sync_supers]
  106 ?        S      0:00 [bdi-default]
  108 ?        S<     0:00 [kblockd]
  119 ?        S      0:00 [khubd]
  219 ?        S      0:00 [kswapd0]
  220 ?        S      0:00 [fsnotify_mark]
  221 ?        S<     0:00 [aio]
  314 ?        S<     0:00 [scsi_tgtd]
  347 ?        S<     0:00 [kpsmoused]
  349 ?        S      0:00 [kworker/0:1]
  366 ?        S      0:00 [w1_bus_master1]
  390 ?        S      0:00 [mmcqd/0]
  395 ?        S      0:00 [jbd2/mmcblk0p2-]
  396 ?        S<     0:00 [ext4-dio-unwrit]
  475 ?        S      0:00 [flush-179:0]
 4532 ttyS0    Ss     0:00 init [S]
 4533 ttyS0    S      0:00 bash
 4536 ttyS0    R+     0:00 ps ax 
```

我正在使用的系统是`Debian GNU/Linux 5.0 debarm`（嵌入式）。任何提示或解决方案？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:17:37.097

正如[这里](http://www.debian-administration.org/articles/212)所说：

> 运行级别 1 称为“单用户”模式。更贴切的描述是“救援”或“故障排除”模式。在运行级别 1 中，**不启动任何守护程序（服务）**。

您有多种选择来解决此限制：

1.  不要使用运行级别 1，这不是它的用途
2.  登录时启动看门狗（如果这是一个有效选项），例如`.bashrc`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:52:37.903

我通过添加以下行来解决它`/etc/inittab`：

```
~~:S:wait:/etc/init.d/watchdog start
~~:S:wait:/sbin/sulogin 
```

注意：必须在`/sbin/sulogin`.

# visual-studio-2010 - Visual Studio 2010 崩溃后无法加载数据集

> ID：14835683
> 
> 赞同：0
> 
> 时间：2013-02-12T15:14:41.153
> 
> 标签：visual-studio-2010, crash, strongly-typed-dataset

这是我的问题：Visual Studio 在我编写一些代码时崩溃了。重新启动后，我收到一条错误消息“由于以下错误而无法加载数据集：列需要有效的数据类型”。我正在使用 2 个类型化的数据集，它们都不想在设计器中打开。我尝试重新启动 VS，重新启动计算机，加载项目的旧版本和工作版本，在另一台计算机上打开项目（使用 Team Foundation），删除源文件并将它们替换为旧版本和工作版本中的文件。没有任何效果。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T13:29:36.903

我不久前解决了这个问题，但我没有在网上找到任何解决方案，所以如果有人需要，这是我的解决方案：

问题来自我在其中一个数据表中使用的自定义数据类型。崩溃后，Visual Studio 无法识别我创建的这种类型。这导致数据集在加载时失败（由于未知数据类型），从而阻止我重建整个解决方案。无法重建解决方案阻止了编译我的自定义数据类型等等。

为了解决这个失败循环，您可以：

*   清理解决方案，然后构建首先包含自定义类型的项目。然后重建整个解决方案。
*   如果第一种方法不起作用，您可以打开数据集的xml文件（在解决方案资源管理器中右键单击该文件>使用xml打开）。找到包含自定义类型的数据表的定义，并用已知的东西更改列的类型（如`String`, `int`, 选择最合适的）。使用设计器保存并重新打开数据集（现在应该加载）。您现在可以重新构建整个项目，返回设计器，将自定义类型重新分配给列（将重新生成 XML 文件），然后您就完成了。

# javascript - 如何在 HTML 表格中添加虚拟化概念？

> ID：14835685
> 
> 赞同：3
> 
> 时间：2013-02-12T15:14:54.003
> 
> 标签：javascript, jquery, html

我正在使用具有固定高度的 html 表格，并且它的行数更多。我的问题是，由于行数更多，表需要很长时间才能加载，有没有办法在表中实现虚拟化概念？任何帮助都应该感激。谢谢。

我需要像[UI 虚拟化](http://www.silverlightshow.net/items/Virtualization-in-Silverlight-4-RC.aspx)这样的东西：

> UI 虚拟化意味着项目的生成被推迟，直到我们将项目滚动到可见区域

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:04:33.253

HTML 对此不支持，但有许多 JavaScript 框架可以做到这一点。此功能的总称是“网格”。尝试用谷歌搜索“html JavaScript 框架网格”。

如果您可以向我们提供有关您的需求和约束的更多详细信息（表格可用于加载数据的协议、您喜欢的 JavaScript 框架、需要支持的 Web 浏览器等），我们或许可以缩小选择范围。

# knockout.js - 卸载 KnockoutJs 视图时取消绑定 jQuery 事件处理程序

> ID：14835687
> 
> 赞同：0
> 
> 时间：2013-02-12T15:15:00.363
> 
> 标签：knockout.js, knockout-2.0

我有一个带有两个视图的简单应用程序，一个“应用程序”模型和两个视图模型。我有兴趣研究如何取消绑定 jQuery 事件。

应用程序视图模型具有以下属性：

```
var self = this;    
self.viewModel = ko.observable(null); 
```

最重要的 HTML 片段位于主模板中，即：

```
 <!-- ko if: viewModel -->
    <div data-bind="template:{name:viewModel().template, data:viewModel(), afterRender: viewModel().viewDidRender}"></div>
    <!-- /ko --> 
```

在应用模型中，初始化后，视图模型被加载。每个视图模型都有一个简单的模板属性，它是一个引用要呈现的 html 模板的字符串。模板声明中的数据项将 knockoutjs 上下文设置为当前视图模型。afterRender 绑定确保调用 ViewModel 的 viewDidRender 方法（使用容器 html 元素作为参数）。

这意味着我可以执行以下操作：

```
self.viewDidRender = function (parentElement) {
    self.containerElement = parentElement;

    $("html").on("click", function (event) {
        var elements = $(event.target).parents();
        for (var i = 0; i < elements.length; i++)
            if (elements[i] == self.containerElement[0] || elements[i] == self.containerElement) {
                alert("the target exists within the parent element");
                return;
            }
        self.open(false);
    });
}; 
```

有一个要求是我们拦截html元素的点击事件。如果事件发生在目标位于子视图的父元素内的位置，则忽略该事件，否则将 'open' 设置为 false（这实际上是您在 iOS 中使用 PopOvers 看到的轻度关闭机制的一部分）

我发现当我在两个主视图之间切换时（每次渲染时都会调用此示例视图的 viewDidRender），上面的正文单击处理程序被绑定了多次。

我认为这是 JavaScript 内存泄漏。应该去哪里清理这些绑定？我可以调用 $("html").off(...) 等...但是在哪里？模板绑定的 beforeRemove 事件不会为纯模板项调用......仅适用于 foreach 绑定。

我*可以*在所有子视图模型中创建另一个方法，例如“viewWillHide”，因此每次将新视图推送到应用模型的 ViewModel 属性时，我都可以尝试在视图模型上调用 viewWillHide 方法。这会奏效。但是，该应用程序比我在这里演示的要复杂。实际上存在视图模型和嵌套模板的层次结构。

手动操作是一种选择；模板绑定的 afterRender 没有对立面，这似乎很奇怪。

那你会怎么做？手动方法？即使它会导致整个视图模型层次结构发生级联变化，以便将 viewWillHide 方法从顶部（应用程序模型）向下传播到较小的视图模型。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:17:11.513

尝试使用以下代码取消绑定您的 jQuery 事件

```
ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
    //Do cleanup
}); 
```

**编辑：演示如何包装绑定的小小提琴**

[http://jsfiddle.net/d6cJG/](http://jsfiddle.net/d6cJG/)

问题是绑定到模板绑定的 div 上的 addDisposeCallback 不会触发回调，因为该元素永远不会改变，它里面的元素会在模板改变时改变。

这里的回调将被称为[http://jsfiddle.net/d6cJG/1/](http://jsfiddle.net/d6cJG/1/)

# java - JavaFX 的确认对话框

> ID：14835691
> 
> 赞同：3
> 
> 时间：2013-02-12T15:15:14.300
> 
> 标签：java, javafx-2, javafx

我正在使用这个[对话框类](https://github.com/4ntoine/JavaFxDialog/wiki)来制作我的项目。当我尝试使用确认对话框时，我必须为 Yes 按钮创建一个 EventHandler，并将其传递给方法调用。我做到了，但是当我单击注销时，我的事件在我单击确认是按钮之前执行。

方法调用

```
public void btnSairClicked(ActionEvent event) {

    Dialog.buildConfirmation("Confirmar", "Deseja realmente sair?")
            .addYesButton(actionPerformed(event))
            .addNoButton(null)
            .build()
            .show();

}

private EventHandler actionPerformed(ActionEvent event) {
    String loginUrl = "http://" + Constants.TARGET_HOST + ":" + Constants.TARGET_PORT + Constants.TARGET_SERVICE_LOGOUT_PATH;
    try {
        JSONObject json = HttpUtil.getJSON(false, loginUrl, null, null, null);
        loginManager.logout();
    } catch (IOException ex) {
        Logger.getLogger(MainViewController.class
                .getName()).log(Level.SEVERE, null, ex);
    }
    return null;
} 
```

对话类：

```
public static Builder buildConfirmation(String title, String message) {
        return buildConfirmation(title, message, null);
    }

public static Builder buildConfirmation(String title, String message, Window owner) {
        return new Builder()
            .create()
            .setOwner(owner)
            .setTitle(title)
            .setConfirmationIcon()
            .setMessage(message);
    }

public Builder addYesButton(EventHandler actionHandler) {
            return addConfirmationButton("Sim", actionHandler);
        }

protected Builder addConfirmationButton(String buttonCaption, final EventHandler actionHandler) {
            Button confirmationButton = new Button(buttonCaption);
            confirmationButton.setMinWidth(BUTTON_WIDTH);
            confirmationButton.setOnAction(new EventHandler<ActionEvent>() {

                public void handle(ActionEvent t) {
                    stage.close();
                    if (actionHandler != null)
                        actionHandler.handle(t);
                }
            });

            stage.buttonsPanel.getChildren().add(confirmationButton);
            return this;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:44:02.033

您实际上是在传递一个返回 a 的函数，`EventHandler`因此它确实返回了 a `EventHandler`，它实际上是函数预期的参数（您的函数有`return null;`，我真的对此一无所知）。这也是一个函数，它会在您分配时执行（这基本上是一个调用）。因此，您首先需要创建一个完美的处理程序，而不仅仅是一个返回`EventHandler`. 现在您的点击事件可以处理事情......您可以通过在该对话框行放置一个断点来调试它并检查我所说的内容。

```
class MyHandler implements EventHandler<Event> {

    private String button = "";

    public MyHandler(String s) {
        this.button = s;
    }

    @Override
    public void handle(Event t) {
        if(button.equals("Yes")) {
            // do yes
            System.out.println("Yes");
        }
        else {
            // do no
            System.out.println("No");
        }
    }

} 
```

并且使用对话框，您需要执行以下操作

```
 Dialog.buildConfirmation("Confirmar", "Deseja realmente sair?")
                    .addYesButton(new MyHandler("Yes"))
                    .addNoButton(new MyHandler("No"))
                    .build()
                    .show(); 
```

希望这可以帮助。

编辑 ：

我创建了一个构造函数，它接受 String pass yes 来执行基于 yes 的操作等等。检查字符串并执行您的操作。

# mysql - 如何使用 Ireport 传递多个可选参数

> ID：14835695
> 
> 赞同：0
> 
> 时间：2013-02-12T15:15:26.560
> 
> 标签：mysql, parameters, ireport, optional

我正在尝试将可选参数添加到查询的 where 子句中。每个都经过测试并单独工作，但我如何将它们合并到查询中，所以无论用户填写哪一个都无关紧要，报告仍然会运行。

参数是：

```
 $P!{qparam_TickerValue} , $P!{qparam_CusipValue}, $P!{qparam_DescValue}; 
```

这是他们的默认值表达式的样子（TickerValue）：

```
$P{qparam_Ticker}=="" ? "" : "and p.Ticker='"+$P{qparam_Ticker}+ "'" 
```

这是我要完成的查询块。

```
 where f.ParentID=$P{qparam_PlanParent}
    and cpp.PeriodBeginDate>=$P{qparam_BeginDateString}
    and cpp.PeriodEndDate<=$P{qparam_EndDateString}
    $P!{qparam_CusipValue}
    $P!{qparam_TickerValue} ; 
```

解决了！

在 Java 专家的帮助下，我们想到了这个。

```
(($P{qparam_Ticker}==null) || $P{qparam_Ticker}.isEmpty())
? (
(($P{qparam_Cusip}==null) || $P{qparam_Cusip}.isEmpty())
? (
(($P{qparam_Desc}==null) || $P{qparam_Desc}.isEmpty())
? ""
: " and p.Description='" + $P{qparam_Desc} + "'"
)
: " and cpp.SecurityId='" + $P{qparam_Cusip} + "'"
)
: " and p.Ticker='" + $P{qparam_Ticker} + "'" 
```

检查以查看正在填充的条件，然后将适当的语句分配给查询块。

# google-app-engine - 多次生成 ndb.Future 是否安全？

> ID：14835696
> 
> 赞同：2
> 
> 时间：2013-02-12T15:15:26.623
> 
> 标签：google-app-engine, app-engine-ndb

这样做安全吗？

```
@ndb.tasklet
def foo():
    # Note that I do not yield right here
    future = some_key.get_async()

    # Perform some other code

    if some_condition:
        # I need the get_async result here
        entity = yield future

    # I also need the get_async result here.
    # If some_condition was true, I would be yielding this future
    # for the second time. Is this ok?
    entity = yield future 
```

请不要告诉我，我可以`yield`在函数的顶部并`entity`在其余代码中使用。我的实际功能比这更复杂一点，我有一些可能需要使用的条件代码路径，`entity`我希望`yield`在最晚的时刻能够在后台获取实体时执行我的其他代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T21:31:00.323

是的，很安全！

如果你在ndb中检查Future类，它会在完成时设置结果，多个yield或get_result会检查它是否完成并返回存储的结果。

google/appengine/ext/ndb/tasklets.py，SDK 1.7.4 中的第 324 行

# html - 如何在缩略图上保持图像尺寸

> ID：14835714
> 
> 赞同：0
> 
> 时间：2013-02-12T15:16:22.027
> 
> 标签：html, css, image, jquery-ui, shopping-cart

我正在寻找一种在购物车中显示缩略图的方法。缩略图是在服务器中创建的 130x130bx 大小保持比例。返回的缩略图宽度或高度（较大）始终为 130 像素。对于非方形图像，较小的尺寸按比例较小。

下面的代码用于在浏览器中显示图像。如果图像高度和宽度非常不同，图像看起来很糟糕。图像属性显示，笔图像按预期返回为 130px × 26px（在 firebug 中看起来不错），但浏览器已将其缩放到 130x130 px，从而产生错误图像。

如何禁用此缩放以使图像显示为从服务器返回的 130x26？

```
.picture {
    background: none repeat scroll 0 0 #FFFFFF;
    display: block;
    float: left;
    height: 130px;
    line-height: 130px;
    margin: 0 20px 15px 0;
    overflow: hidden;
    position: relative;
    text-align: center;
    width: 130px;
}

<a class="picture ui-corner-all" rel="product" href="/Store/Details?product=340618">
<img class="ui-corner-all" alt="" src="/Store/Thumb?product=340618&size=130">
</a> 
```

ASP .NET / MONO MVC2 用于服务器。jquery-ui 用于浏览器。

**更新**

我按照答案中的建议更改了 .picture img 样式。现在笔式拇指（宽度远大于高度）显示正确。瓶子拇指（高度远大于宽度）仅部分可见。如何使此图像更好，以使任何图像都适合拇指并保持其比例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:22:48.060

css

在您的 Site.css 文件中，第 711 行，

```
.picture img {
  height: auto; /* change this to 'auto'*/
  max-width:130px; /* add this for 'making sure'*/
  vertical-align: middle;
  width: 100%;
} 
```

试试这个

如果您仍然希望边框可见，请将图像最大宽度更改为 128px

对于您的图像的完美布局，女巫将调整到**最大最小**比例。

```
.picture img {
  border-width: 0;
  height: auto;
  max-height: 130px;
  max-width: 130px;
  vertical-align: middle;
  width: auto;
} 
```

继续

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:29:17.670

更改班级：

```
.picture img {
  height: 100%;
  vertical-align: middle;
  width: 100%;
} 
```

并删除`height: 100%;`. 您可能还想设置`border-width: 0px;`=)

# regex - primefaces keyfilter 正则表达式

> ID：14835716
> 
> 赞同：1
> 
> 时间：2013-02-12T15:16:23.667
> 
> 标签：regex, primefaces, keyfilter

我从 primefaces 扩展中遇到了关于 keyfilter 的问题。我想为一个时间段定义一个正则表达式，例如“P1Y3M2W1d”。使用以下键过滤器的正则表达式：

```
<pe:keyFilter regEx="/P[0-9]*Y*[0-9]*M*[0-9]*W*[0-9]*d*/" /> 
```

目标是用户只能先输入**P**，然后输入数字 0-9，然后是 Y（年）、M（月）或 W（周）等等。问题是我只能输入大写字母 P 而不能输入其他内容。我检查正则表达式。它是正确的。keyFilter 中的正则表达式有什么问题？感谢帮助！！！

更新：

```
<p:inputText value="#{cc.attrs.value}" id="period" >
   <pe:keyFilter regEx="/P([0-9]+Y)?([0-9]+M)?([0-9]+W)?([0-9]+d)?/" />
</p:inputText> 
```

我认为 primefaces 扩展使用 jquery keyfilter 插件。正则表达式应该在“//”周围引用，但不知何故，我的 UI 中唯一的可能性是大写 P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:48:31.990

尝试

```
regEx="/P([0-9]+Y)?([0-9]+M)?([0-9]+W)?([0-9]+d)?/" 
```

# ios - 适用于 iPad Mini 运行 6.0.1 的 Xcode 符号

> ID：14835719
> 
> 赞同：2
> 
> 时间：2013-02-12T15:16:25.857
> 
> 标签：ios, xcode, ipad, ios6

我正在尝试从运行 iOS6.0.1 (10A8426) 的 iPad Mini (ipad2,7) 中解码崩溃。缺少符号：Library/Developer/Xcode/iOS DeviceSupport

```
my-MacBook-Pro:iOS DeviceSupport me$ ls
4.3.5 (8L1)     5.0.1 (9A405)     5.1.1 (9B206)     6.0.1 (10A523)
5.0 (9A334)     5.1 (9B176)     6.0 (10A403)     6.1 (10B141) 
```

如何获取 6.0.1 (10A8426) 的符号？我正在运行 Xcode 4.5.2。一位同事正在运行 Xcode 4.6 并且遇到了同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:39:34.770

您使用的是 XCode 4.5.2，这就是问题所在。iPad Mini 支持仅针对最新版本的 XCode(4.6) 添加，我相信只有 4.6 支持 iOS 6.0.1 和 iOS 6.1

将 XCode 更新到 4.6 将解决您的问题，因为其中添加了 iPad Mini 支持。

请参阅 XCode 发行说明：[https ://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/](https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/)

它明确指出

> 新的功能
> 
> 一般的
> 
> 开发工具包：
> 
> OS X SDK 10.8
> 
> iOS SDK 6.1
> 
> 设备支持（添加）：
> 
> 小型平板电脑
> 
> 配备 Retina 显示屏的 iPad（第 4 代）

它还包括许多错误修复。

希望能帮助到你！

# c# - Windows Mobile 6 Forms关闭后剩余的部分

> ID：14835720
> 
> 赞同：0
> 
> 时间：2013-02-12T15:16:31.473
> 
> 标签：c#, windows-mobile, compact-framework

我使用 c# 在 Windows Mobile 6.5 上开发了一个应用程序。当我尝试退出应用程序时，表单的某些部分（表单的上部）仍保留在屏幕上。而我只能通过重置设备让它消失。

第一张图：关闭应用程序前第二张图：关闭应用程序后

我应该怎么做才能完全删除表格的所有部分？

![http://imageshack.us/photo/my-images/189/13785191.png/](../Images/8e552aa939cf8978c604a9827de8fcf6.png)

![http://imageshack.us/photo/my-images/10/98795567.png/](../Images/8f08c66df4734d0d1790a7b44b5fefd7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T04:39:39.513

您已经编写了一个全屏应用程序，并使用了可能的代码来移动表单等以使其全屏显示。拥有全屏表单的官方方法是使用 SHFullScreen API（虽然它的开始图标和菜单栏有问题，请参阅我的博客）。

为了让 WM653 知道您已经覆盖了状态栏，您可以在退出应用程序之前先让您的表单不覆盖任务栏。您也可以在退出应用程序之前发出 ShowWindow(GetDesktopWindow(), SW_NORMAL)。

但是，正如 Kobunite 所说，当您的应用程序未正常退出但在退出和正常清理之前或多或少崩溃时，也可能会发生此问题。您可以在退出代码中添加一些调试日志以查看哪个功能或代码失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:38:41.723

这是 WM6.5 的常见问题。

我使用使用 WM6.5 的设备，根据我的经验，这只发生在应用程序退出不正确、不干净或突然退出时。当我正确退出应用程序时，不会覆盖任何东西，就像应用程序突然退出时一样（即通过未处理的崩溃，或通过停止调试器，我得到的结果与您报告的结果相同。

要阻止它发生，您需要确保干净地退出程序，否则这将持续存在。

# javascript - 眼睛跟随鼠标光标 Mootools -> JQuery

> ID：14835722
> 
> 赞同：2
> 
> 时间：2013-02-12T15:16:39.760
> 
> 标签：javascript, jquery, mootools

我一直在寻找一些代码来帮助我关注光标跟随的页面，周围有一些示例，但这个引起了我的注意：[https](https://github.com/Goutte/Eye) ://github.com/Goutte/Eye主要是因为它需要的代码很少。

它使用我以前从未见过的 mootools，是否可以将其转换为使用 jQuery，或者有人可以准确地解释它是如何使用这么少的 javascript 工作的？mootools 内置了哪些功能，让这一切变得如此简单？

JsFiddle：http: [//jsfiddle.net/B2Nza/46/](http://jsfiddle.net/B2Nza/46/)

```
var options2 = {
  socketRadius: 2, // radius of the circle in which the eye's pupil can move
  bindTouchMove: true,
}

var leftEye2  = new Eye ('left_eye2', options2);
var rightEye2 = new Eye ('right_eye2', options2);

var fly2 = new Eye ('fly2', {
    socketRadius: 17,
    behavior: 'follow',
    stickToSocket: true
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-21T11:36:37.477

以下是使用 JavaScript 的方法。

```
var element = document.getElementById("leela-eye");
document.addEventListener("mousemove", function (event) {
    var x = event.pageX;
    var y = event.pageY;   
    var offsets = eye.lens.getBoundingClientRect();
    var left = (offsets.left - x)
    var top = (offsets.top - y)
    var rad = Math.atan2(top, left);
    element.style.webkitTransform = "rotate(" + rad + "rad)";
}); 
```

[js小提琴](http://jsfiddle.net/XgPjm/)。

如果您的浏览器不支持将弧度传递给，则可以将其转换为度数（并在属性值中`rotate()`交换）。`rad``deg`

```
var deg = rad * (180 / Math.PI); 
```

# selenium - 需要使用 WebDriver 获取所有可用链接

> ID：14835724
> 
> 赞同：4
> 
> 时间：2013-02-12T15:16:40.733
> 
> 标签：selenium, selenium-webdriver

如何使用 WebDriver 获取网页中的所有可用链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T15:58:10.513

您可以使用以下逻辑获取所有链接。

```
List<WebElement> link=driver.findElements(By.tagName("a"));

for(WebElement ele:link)
{
     System.out.println(ele.getText());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-31T09:12:14.980

```
 List<WebElement> list=driver.findElements(By.xpath("//a"));
    System.out.println("No of links present="+ list.size());

    // use of for loop for iteration
    for(int i=0;i<list.size();i++){
        System.out.println(list.get(i).getText());
    }
    System.out.println("-------------------------");
    //use of for each for iteration
    for(WebElement wb: list)
        System.out.println(wb.getText()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-24T05:32:45.833

我同意 Max.Mirkia 的观点，从“href”中获取网址

修改的 Santoshsarma 代码

```
 List<WebElement> tagName = driver.findElements(By.tagName("a"));
    for(WebElement ele:tagName)
    {
        String urls = ele.getAttribute("href");
        System.out.println(urls);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-02T05:29:28.290

```
List<WebElement> list=driver.findElements(By.cssSelector("a"));

for(WebElement link:list)                             
{
  System.out.println(link.getText());

} 
```

# c++ - 在头文件和源文件中包含相同的包含派生是标准做法吗？

> ID：14835725
> 
> 赞同：4
> 
> 时间：2013-02-12T15:16:46.283
> 
> 标签：c++, header-files

在使用 C++ 中的标准字符串类时。您是否需要同时拥有`#include<string>`头文件和源文件？

你不能`#include<string>`只在头文件上吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T15:19:45.940

包含在头文件中可能表示类定义级别的依赖关系（例如，您正在接受或返回字符串）。在这种情况下，您必须将包含放在标题中；但是，如果您只在实现中使用字符串，则可能只需要包含在源文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T15:18:22.803

最佳实践是在每个需要它的头文件或源文件中单独包含一个头文件。

通过其他头文件间接包含所需的头文件会给您带来一个缺点，即当您在将来某个时候从源文件中提取包含的头文件时，您可能会因为缺少（*间接包含*的）头文件而导致编译错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T15:39:25.440

文件包含是通过将 include 指令替换为包含的头文件的内容来完成的（实际上，它可能不是通过文本流中的替换来完成，而是通过语义等效的操作来完成）。

这意味着包含在标题中的所有文件都将包含在包含该标题的文件中，所以不，您不需要包含它两次。

也就是说，包含文件的策略有很多，选择一个更多的是您关注的内容和最佳实践，而不是您*需要*做的事情。

例如，您可以在使用这些文件中定义的符号时力求完整性并包含文件。

我还使用过一个项目（低级、跨平台的 C 库），其中客户端代码负责在包含头文件之前明确包含头文件依赖项。这样做是为了保持标头依赖项明确，并消除/最小化（尽可能）库对客户端施加的隐藏依赖项限制。

最后，这取决于您（和/或您的团队）。

# google-analytics - Google Analytics 中有 OR 函数吗？

> ID：14835726
> 
> 赞同：-1
> 
> 时间：2013-02-12T15:16:53.287
> 
> 标签：google-analytics, google-analytics-api, web-analytics

我想查看我网站页面上的点击量，并且要查看完整的点击量，我不能单独查看各个页面。但是，我只能搜索`AND`功能。这`AND`使得两者都是必需的。

谷歌分析中是否有`OR`功能机制，以便我可以有任何要求？ ![在此处输入图像描述](../Images/04d75cb2b5dd95ffc9f7a654a490097b.png)

这是从`Content > Site Content > All Pages` 那我做`advanced query`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:46:19.223

如果您更好地解释如何达到您所处的位置，也许它会有所帮助......因为看起来像自定义细分的面值并且您*可以*在其中使用`OR`操作：![在此处输入图像描述](../Images/112567f575e19126d9147ca461369d8e.png)

**编辑添加**：在报告标题下方的报告顶部（它应该是您报告的大粗体**页面**标题），单击`Advanced Segments`按钮。您将`default segments`在左侧和`custom segments`右侧看到一个屏幕。`custom segment`文本区域的正下方和右侧是一个`+New Custom Segment`按钮。单击该按钮，它将弹出上面屏幕截图中显示的菜单。

# java - 为什么我的类不能实现其中声明的接口？

> ID：14835732
> 
> 赞同：10
> 
> 时间：2013-02-12T15:17:08.803
> 
> 标签：java, interface, implementation, inner-classes

我刚刚遇到了一个行为，我首先认为这是 Eclipse 中的一个错误。考虑这个简单的类：

```
public class Foo {
    public static interface Callback {
        public void onAction();
    }
} 
```

这是完全有效的。然而，这不是：

```
public class Foo implements Callback {
    public static interface Callback {
        public void onAction();
    }

    public void onAction() { /*some implementation*/ }
} 
```

但这也是有效的：

```
public class Foo {
    public static interface Callback {
        public void onAction();
    }

    private final Callback mCallback = new Callback() {
        public void onAction() { /*some implementation*/ }
    };
} 
```

如果Java可以通过让我自己实现它来简单地保存它，为什么Java会强迫我为它“浪费”一个成员？我很清楚将这个接口放在自己的文件中的“解决方法”，但出于好奇：这有什么原因不起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T15:22:25.093

使用此代码

```
public class Foo implements Callback{

public static interface Callback{
    public void onAction()
}

public void onAction(){//some implementation}
} 
```

什么是`Callback`？编译器（顺便说一句，与`Eclipse`, 不同）不知道什么是`Callback`.

`Callback`您在使用后定义了接口。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T15:21:56.893

在第二种情况下，由于在类的主体之前检查签名，因此当编译器尝试编译`Foo`类时，`Callback`尚未定义接口。

# eclipse - Eclipse 不会突然打开 Windows 7

> ID：14835734
> 
> 赞同：-5
> 
> 时间：2013-02-12T15:17:12.957
> 
> 标签：eclipse, eclipse-juno

在过去的 3 个月里，我一直在使用 eclipse，但突然 eclipse 给出了错误，并且日志文件显示：

!SESSION 2013 年 2 月 12 日星期二 20:43:32 IST -------------------------------------------------- ---- !ENTRY org.eclipse.equinox.launcher 4 0 2013-02-12 20:43:32.273 !MESSAGE 异常启动 Eclipse 平台：!STACK java.lang.ClassNotFoundException: org.eclipse.core.runtime.adaptor .EclipseStarter at java.net.URLClassLoader$1.run(Unknown Source) at java.net.URLClassLoader$1.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(Unknown源) 在 java.lang.ClassLoader.loadClass(Unknown Source) 在 java.lang.ClassLoader.loadClass(Unknown Source) 在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:626) 在 org.eclipse。 equinox.launcher.Main.basicRun(Main.java:584) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1438)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:19:34.710

下次问之前先搜索一下，有很多答案可以找到。如果您尝试了一些，请告诉我们。

[java.lang.ClassNotFoundException: org.eclipse.core.runtime.adaptor.EclipseStarter](https://stackoverflow.com/questions/3412617/java-lang-classnotfoundexception-org-eclipse-core-runtime-adaptor-eclipsestarte)

在你`config.ini`的 Eclipse 文件中`eclipse\configuration\config.ini` 检查这三件事：

```
osgi.framework=file\:plugins\\org.eclipse.osgi_3.4.2.R34x_v20080826-1230.jar
osgi.bundles=reference\:file\:org.eclipse.equinox.simpleconfigurator_1.0.0.v20080604.jar@1\:start
org.eclipse.equinox.simpleconfigurator.configUrl=file\:org.eclipse.equinox.simpleconfigurator\\bundles.info 
```

并检查这些 jar 是否到位，jar 文件取决于您的 eclipse 版本。

# android - 如何在另一个后面膨胀一个视图

> ID：14835735
> 
> 赞同：1
> 
> 时间：2013-02-12T15:17:19.493
> 
> 标签：android, android-layout, android-xml

如果这是一个简单的问题，请原谅我，但是我是 Android 开发的新手，这个问题一直困扰着我。

我有一个“基本”布局文件，其中包含来自[这个库](https://github.com/johnkil/SideNavigation)的 RelativeLayout 和 com.devspark.sidenavigation.SideNavigationView 。

然后我有一个带有 ViewPager 的活动，它将其他布局（包含 ListViews 和 progressBars）膨胀到这个中。我的问题是，无论我如何尝试，SideNavigationMenu 总是出现在膨胀的列表视图后面。我不确定出了什么问题，而且我迷失在一堆乱七八糟的布局中。有没有人有任何指示？

这是我的“基本”布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".NewNews"
    tools:ignore="MergeRootFrame">  

<com.devspark.sidenavigation.SideNavigationView
    android:id="@+id/side_navigation_view_news"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:clipChildren="false"/>

</RelativeLayout> 
```

以及膨胀的“子”布局之一的示例：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

<eu.erikw.PullToRefreshListView
    android:id="@+id/listView_all"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@android:color/transparent"/>

<ProgressBar
    android:id="@+id/progressBar_all"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center" />

</FrameLayout> 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T16:00:56.797

相对布局不支持图层。

视图按照添加到布局中的顺序放置在彼此之上。

例如

*   将 viewA 添加到相对布局
*   将 viewB 添加到相对布局
*   viewB 将在 viewA 前面

一种在“后面”膨胀的方法是在另一个视图膨胀之前膨胀另一个视图。

*   将 viewB 添加到相对布局
*   将 viewA 添加到相对布局
*   viewA 将在 viewB 的前面

或删除视图并将其重新添加到 relativelayout

*   将 viewA 添加到相对布局
*   将 viewB 添加到相对布局
*   删除视图A
*   重新添加视图A
*   viewA 将在 viewB 的前面

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-06T12:33:30.497

我是这样做的：

```
parentView.addView(childView, 0); 
```

> 第二个参数是index，添加child的位置

这里第二个参数在 0 处传递，这使得子视图被添加到已经存在的视图的后面。

# android - Android 用小部件替换快捷方式图标以复制邮件未读功能

> ID：14835737
> 
> 赞同：0
> 
> 时间：2013-02-12T15:17:26.187
> 
> 标签：android, widget, icons, homescreen

是否可以用小部件替换您的应用程序的默认快捷方式图标，以便您可以复制邮件未读功能？我一直在谷歌上搜索，我找到了很多方法来制作实际的小部件，还有一群人说应用程序图标是静态的，即如果没有软件更新就无法更改。所以我的问题是：

当用户将我的应用程序从“程序”选项卡拖到主屏幕时，我可以更改吗 - 它可以显示小部件而不是实际图标吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:20:39.040

不，您不能让您的应用程序图标成为应用程序抽屉中的小部件。

不，您不能自动将用户放置在主屏幕上的快捷方式转换为小部件。

小部件和应用程序快捷方式是两个独立的实体，必须由用户显式创建。他们可以选择他们想要的。

# xml - r - 使用 xpathSApply 获取 tabledata 时出现奇怪的字符

> ID：14835741
> 
> 赞同：0
> 
> 时间：2013-02-12T15:17:39.187
> 
> 标签：xml, r, web-scraping

我在 R 中使用 XML 包来抓取表。但是，刮桌子后，我在结果中得到了一些奇怪的字符。这是我获取表格的脚本：

```
TUrlhtml <- htmlParse(htmlfile)
TUrlTable <- xpathSApply(TUrlhtml, 
                          "//table[@class='results_table']/tr/td",
                          xmlValue) 
```

这是我得到的结果：

```
[1] ""                                  "\xc2\xa02 HK"                      "Clp Holdings Limited\xc2\xa0"     "\xc2ec-00\xc2\xa0"             "66.60\xc2\xa0"        
[6] "\xc2\xa026-Feb-12\xc2\xa0"      "\xc2\xa0"                          ""                                  "\xc2\xa03 HK"                      "Hong Kong & China Gas Co\xc2\xa0"
[11] "\xc2un-03\xc2\xa0"             "21.40\xc2\xa0"                   "\xc2\xa019-Mar-12\xc2\xa0"      "\xc2\xa0" 
```

但是，当我使用 Internet Explorer 或 firefox 查看 html 文件时，html 文件本身绝对没有问题。我应该如何解决？非常感谢您的宝贵建议！这是我的html文件：

```
<table id="main_table" class="results_table" bgcolor="white" cellspacing="0" cellpadding="0" border="0"><thead style="background-color: white;"><tr class="top_row" style="padding-bottom: 3px; color: #0033cc"><th style="vertical-align:bottom">
<!--si--><link rel="stylesheet" href="/classes/user_interface/vertical_menu_panel@12.41.004@.css" type="text/css" >      <div class="yui-skin-sam">
      <div class="vertical_menu_panel" style="display:none">
        <div class="hd" style="display:none"></div>
        <div class="bd">
          <ul> <li class="primary_sort_ascending"><img class="primary_sort_ascending" src="/images/primary_sort_ascending.gif"/>&nbsp;Sort Asc<span class="action" style="display:none">primary_sort_ascending</span></li> <li class="primary_sort_descending"><img class="primary_sort_descending" src="/images/primary_sort_descending.gif"/>&nbsp;Sort Desc<span class="action" style="display:none">primary_sort_descending</span></li> <li class="add_column"><img class="add_column" src="/images/add_column_left.gif"/>&nbsp;Add Column Here<span class="action" style="display:none">add_column</span></li> <li class="remove_column"><img class="remove_column" src="/images/subtract_small.gif"/>&nbsp;Remove Column<span class="action" style="display:none">remove_column</span></li>          </ul>
        </div>
        <div class="ft" style="display:none"></div>
      </div>
      </div>
<input style="" type="checkbox" id="master_check_box" title="Select All">
</th>      <td width="" valign="middle" align="center" nowrap><img alt="" border=0 src="/images/shim.gif" width="1" height="1"></td>
  <td width="75" valign="bottom" nowrap class="txtScreen column_header">&nbsp;<span style="text-decoration: underline;"><br><br><br>Ticker</span><IMG alt="" border="0" height="8" src="/images/b_sort_flat_rv.gif" width="10">&nbsp;  <img class="menu_icon" style="position:absolute; vertical-align:bottom; display:none" border="0" src="/images/arrow_down_button.gif"/>   <span class="attributes" style="display: none"><span class="column_id">0</span><span class="display_name">Ticker</span></span></td>
                          <td valign="bottom" align="left" nowrap class="txtScreen column_header  "><span href="#" onclick="return false"><span style="text-decoration: underline;">Company Name</span>                           <img class="menu_icon" style="position:absolute; vertical-align:bottom; display:none" border="0" src="/images/arrow_down_button.gif"/> <span class="attributes" style="display: none"><span class="column_id">2886069004</span><span class="display_name">Company Name</span></span></td>
                          <td valign="bottom" align="center" nowrap class="txtScreen column_header  "><span href="#" onclick="return false"><span style="text-decoration: underline;">Last<br>Quarter<br>Date</span>                           <img class="menu_icon" style="position:absolute; vertical-align:bottom; display:none" border="0" src="/images/arrow_down_button.gif"/> <span class="attributes" style="display: none"><span class="column_id">2886070004</span><span class="display_name">Last Quarter Date</span></span></td>
                          <td valign="bottom" align="center" nowrap class="txtScreen column_header  "><span href="#" onclick="return false"><span style="text-decoration: underline;">Price</span>                           <img class="menu_icon" style="position:absolute; vertical-align:bottom; display:none" border="0" src="/images/arrow_down_button.gif"/> <span class="attributes" style="display: none"><span class="column_id">2886071004</span><span class="display_name">Price</span></span></td>
                          <td valign="bottom" align="center" nowrap class="txtScreen column_header  "><span href="#" onclick="return false"><span style="text-decoration: underline;">Date of<br>Last Report</span>                           <img class="menu_icon" style="position:absolute; vertical-align:bottom; display:none" border="0" src="/images/arrow_down_button.gif"/> <span class="attributes" style="display: none"><span class="column_id">2886072004</span><span class="display_name">Date of Last Report</span></span></td>
        <td width="100%" class="txtScreen">&nbsp;</td></tr>
      </thead>
        <tr bgcolor="#eeeeee">          <th style="height: 15px">
          <input class="select_cb" type="checkbox" style="height: 13px">
          <span class="attributes" style="display: none"><span class="security_id">28411</span></span>
          </th>
                <td valign="middle" align="center"></td>

        <td align="left" nowrap class="txtScreen">&nbsp;<a href="/stocks/stocks.phtml?security_id=28411&ticker=2+HK" target="_parent" >2 HK</a></td>
        <td align="left" nowrap class="txtScreen" title="Company Name">Clp Holdings Limited&nbsp;&nbsp;</td>
        <td align="right" nowrap class="txtScreen" title="Last&#13;Quarter&#13;Date">&nbsp;&nbsp;Dec-00&nbsp;&nbsp;&nbsp;</td>
        <td align="right" nowrap class="txtScreen" title="Price">66.60&nbsp;&nbsp;&nbsp;</td>
        <td align="right" nowrap class="txtScreen" title="Date of&#13;Last Report">&nbsp;&nbsp;26-Feb-12&nbsp;&nbsp;&nbsp;</td>
<td bgcolor="#ffffff">&nbsp;</td> </tr>
        <tr bgcolor="#ffffff">          <th style="height: 15px">
          <input class="select_cb" type="checkbox" style="height: 13px">
          <span class="attributes" style="display: none"><span class="security_id">48569</span></span>
          </th>
                <td valign="middle" align="center"></td>

        <td align="left" nowrap class="txtScreen">&nbsp;<a href="/stocks/stocks.phtml?security_id=48569&ticker=3+HK" target="_parent" >3 HK</a></td>
        <td align="left" nowrap class="txtScreen" title="Company Name">Hong Kong & China Gas Co&nbsp;&nbsp;</td>
        <td align="right" nowrap class="txtScreen" title="Last&#13;Quarter&#13;Date">&nbsp;&nbsp;Jun-03&nbsp;&nbsp;&nbsp;</td>
        <td align="right" nowrap class="txtScreen" title="Price">21.40&nbsp;&nbsp;&nbsp;</td>
        <td align="right" nowrap class="txtScreen" title="Date of&#13;Last Report">&nbsp;&nbsp;19-Mar-12&nbsp;&nbsp;&nbsp;</td>
<td bgcolor="#ffffff">&nbsp;</td> </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:05:13.983

它是由不断裂引起的   空间。

那就是unicode字符0xA0，在UTF-8中是\xC2\xA0。

我不知道为什么它还在中间插入 EE7B。

# swing - 在 JTable 列中渲染 Toedter 的 JDateChooser

> ID：14835742
> 
> 赞同：0
> 
> 时间：2013-02-12T15:17:47.253
> 
> 标签：swing, jtable, tablecellrenderer, tablecelleditor, jdatechooser

借口再次问同样的问题。我的印象是，如果我添加到原来的问题中，我不会得到那么多的意见。

当我使用 MVC 模式时，我的 Swing GUI 位于不同的类中，控制器创建了它的实例。这是我在视图中创建表的方式：

```
tableVehiclePermitHeader = new String[] {"Name", "Expiration Date"};
        tableVehiclePermitData = new Object[0][0];

//      Calendar tempDate = new GregorianCalendar(2008, 1, 1);
//      Date tempDate1 = new Date(2008, 1, 1);
//      tempDate1.setYear(tempDate1.getYear() - 1900);
//      tableVehiclePermitData = new Object [][] {{"Hello", tempDate}, {"Hello", tempDate1}};

        tableVehiclePermitDefaultTableModel = new DefaultTableModel(tableVehiclePermitData, tableVehiclePermitHeader);
        tableVehiclePermit = new JTable(tableVehiclePermitDefaultTableModel){
            public Class getColumnClass(int c) {
                return getValueAt(0, c).getClass();
             }

            public boolean isCellEditable(int rowIndex, int colIndex){
                if (colIndex == 0){
                    return false;
                } else {
                    return true;
                }
            }
        };

        tableVehiclePermit.getColumn("Expiration Date").setCellRenderer(new JDateChooserRenderer());
        tableVehiclePermit.getColumn("Expiration Date").setCellEditor(new JDateChooserCellEditor()); 
```

注释行正确显示了 JDateChooser。只有当我从视图中填充表格内容时，我才能将日期呈现为 JDateChoosers。

下面是我的渲染器：

```
public class JDateChooserRenderer extends JDateChooser implements TableCellRenderer{

    Date inDate;

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value,
            boolean isSelected, boolean hasFocus, int row, int column) {
        // TODO Auto-generated method stub

        if (value instanceof Date){
            this.setDate((Date) value);
        } else if (value instanceof Calendar){
            this.setCalendar((Calendar) value);
        }
        return this;
    }
} 
```

最后，我的控制器从数据库中获取数据以将表填充为已定义类型的 ArrayList，该类型的日期字段为 java.util.Date 类型（也尝试使用 java.sql.Date 来获得相同的结果）。

```
ArrayList<VehiclePermitExpirationByVehicleDao> vehPermit = vpmodel.permitExpirationPerVehicle(id);
        VehiclePermitExpirationByVehicleDao permitData;
        permitListData = new Object[vehPermit.size()][3];
        Iterator it = vehPermit.iterator();
        int i = 0;
        while (it.hasNext()){
            permitData = (VehiclePermitExpirationByVehicleDao) it.next();
            permitListData[i][0] = permitData.getVehiclePermitName();
            permitListData[i][1] = permitData.getExpirationDate();
            permitListData[i][2] = permitData.getVehiclePermitId();
            i++;
        }
        gui.setTableVehiclePermitData(permitListData);
        gui.getTableVehiclePermitDefaultTableModel().setDataVector(gui.getTableVehiclePermitData(), gui.getTableVehiclePermitHeader());
        gui.getTableVehiclePermit().setModel(gui.getTableVehiclePermitDefaultTableModel());
        gui.getTableVehiclePermit().setEnabled(true); 
```

有人可以告诉我我做错了什么吗？我怀疑是保存日期的列的类型。

另外，如果有人知道如何使用编辑器，请告诉我。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:36:26.940

您应该使用 columnIndex 获取Date 列的**TableColumn**，然后在**TableColumn**上设置 Renderer 和 Editor 。

```
TableColumn column1 = tableVehiclePermit.getColumnModel().getColumn(1);
column1.setCellRenderer(new JDateChooserRenderer());
column1.setCellEditor(new JDateChooserCellEditor()); 
```

# javascript - 将参数传递给函数作为参数传递给 jQuery 函数

> ID：14835744
> 
> 赞同：1
> 
> 时间：2013-02-12T15:17:53.333
> 
> 标签：javascript, jquery, function, argument-passing

[将函数名称作为参数传递给另一个函数](https://stackoverflow.com/questions/7763549/passing-function-name-as-a-parameter-to-another-function)似乎对我不起作用。

我已经尝试了我能找到的每篇文章的每一种变体。目前，我在一个 js 文件中有这个：

```
function callThisPlease (testIt){
    alert(testIt);
}

$(document).ready(function () {
    $.fn.pleaseCallTheOtherFunction('callThisPlease');
}); 
```

我在另一个有这个：

```
$(document).ready(function () {

    $.fn.pleaseCallTheOtherFunction = function(functionName){
        window[functionName].apply('works');
    }

}); 
```

铬控制台说`Uncaught TypeError: Cannot call method 'apply' of undefined`。

请帮忙。提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:20:31.157

如果方法未定义 on `window`，则意味着您的函数不是全局的。让它成为一个全局函数。

* * *

此外，您可以摆脱`.apply`. 目前您正在`'works'`作为`this`值传递。

```
window[functionName]('works'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T15:19:54.487

## [jsFiddle 演示](http://jsfiddle.net/8mFVL/1/)

## 设置

首先，您需要设置`pleaseCallTheOtherFunction`方法，如下所示：

```
$.fn.pleaseCallTheOtherFunction = function(otherFunction) {
    if ($.isFunction(otherFunction)) {
        otherFunction.apply(this, ['works']);
    }
}; 
```

## 用法

然后你会想要创建你的“替换”函数（委托），然后不带引号调用它，如下所示：

```
function callThisPlease (testIt){
    alert(testIt);
}

$(document).ready(function () {
    $().pleaseCallTheOtherFunction(callThisPlease);
}); 
```

## 或者

您可以编写一个内联函数：

```
$(document).ready(function () {
    $().pleaseCallTheOtherFunction(function(testIt) {
        alert(testIt);
    });
}); 
```

# ckeditor - 在 Ckeditor 如何与另一个打开对话已关闭

> ID：14835747
> 
> 赞同：0
> 
> 时间：2013-02-12T15:18:06.593
> 
> 标签：ckeditor

当图像对话框关闭时，我如何自动打开链接对话框。

我试过了

```
CKEDITOR.on( 'dialogDefinition', function( ev )
{
if ( dialogName == 'image' )
{

dialogDefinition.onOk = function(ev) {
editor.openDialog( 'link' );
}
}
}); 
```

但它失败了。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:42:37.273

干得好：

```
CKEDITOR.on( 'dialogDefinition', function( ev ) {
    var dialogName = ev.data.name,
        dialogDefinition = ev.data.definition,
        editor = ev.editor;

    if ( dialogName == 'image' ) {
        var oldOk = dialogDefinition.onOk;

        dialogDefinition.onOk = function() {
            oldOk.call( this );
            setTimeout( function() {
                editor.execCommand( 'link' );
            }, 0 );
        };
    }
}); 
```

# javascript - 多个 div 的 jQuery 切换功能

> ID：14835749
> 
> 赞同：1
> 
> 时间：2013-02-12T15:18:18.747
> 
> 标签：javascript, jquery, function, toggle

当我点击 div.post-read 并且再次点击然后隐藏它时，我有显示 div.post-text 全部内容的功能。但是有些东西不能正常工作，当我对第一个文本执行此操作时，一切都很好，但是如果我在第一个打开时单击第二个或第三个，那么它不会向后滑动或有时不会打开。我的功能有什么问题？

```
$(document).ready(function() {
var read = $(".post-read");
        read.click(function() {
            if (read.html() == 'Read more') {
                $(this).html("Show less");
                $(this).prev().removeClass('post-text').addClass('post-text-open');
                $(this).prev().hide();
                $(this).prev().slideToggle("slow");
            } else {
                $(this).html("Read more");
                $(this).prev().removeClass('post-text-open').addClass('post-text');
                $(this).prev().hide();
                $(this).prev().slideToggle("slow");
            }
            });
        }); 
```

HTML：

```
<div id="posts">
                <div class="post">
                    <div class="post-img">
                        <img alt="" src="img/post-pic.png">
                    </div>
                    <div class="post-text">text ... ... ...</div>
                    <div class="post-read">Read more</div>
                    <div class="clear"></div>
                </div>
                <div class="post">
                    <div class="post-img">
                        <img alt="" src="img/post-pic.png">
                    </div>
                    <div class="post-text">text ... ... ...</div>
                    <div class="post-read">Read more</div>
                    <div class="clear"></div>
                </div>
                <div class="post">
                    <div class="post-img">
                        <img alt="" src="img/post-pic.png">
                    </div>
                    <div class="post-text">text ... ... ...</div>
                    <div class="post-read">Read more</div>
                    <div class="clear"></div>
                </div>
            </div> 
```

CSS：

```
.post-text {float: left;width: 457px;padding-left: 16px; overflow:hidden; height:72px;}
.post-text-open {float: left;width: 457px;padding-left: 16px; overflow: auto; height:auto;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:23:06.457

改变这个

```
if (read.html() == 'Read more') { 
```

对此

```
if ($(this).html() == 'Read more') { 
```

见[演示](http://jsfiddle.net/ddHcP/)。

# iphone - 在标签栏应用程序中使用导航控制器。

> ID：14835752
> 
> 赞同：2
> 
> 时间：2013-02-12T15:18:22.833
> 
> 标签：iphone, ios, xcode

我创建了一个标签栏应用程序，其中包含几个表视图，每个表视图都嵌入了导航控制器。不确定我是否在错误的上下文中使用导航控制器，并且想知道是否有人可以帮助我理解。

[我在这里](https://www.evernote.com/shard/s226/sh/367e4306-6212-4653-8d01-2f5314665f13/9cd01205481af9cb0a6c94d7a89716ea)截屏了

红色箭头显示嵌入式导航控制器。我应该在绿色箭头处只有一个导航控制器还是正确使用多个导航控制器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T15:23:04.753

你是对的。

导航控制器代表通过您的应用程序的线性运动。即它只能通过您的应用程序向前和向后采用一条特定路径。

使用标签栏控制器，您需要为每个标签提供导航控制器，因为您拥有多维导航结构。您不仅可以从“开始到结束”线性移动，还可以在这些导航线之间跳转。

我希望这是有道理的，但是是的……您可以（并且应该）使用导航控制器的次数与您拥有要呈现给用户的导航“路径”一样多。

# ruby - 如何使用赛璐珞从线程池运行 HTTP 请求？

> ID：14835754
> 
> 赞同：2
> 
> 时间：2013-02-12T15:18:39.650
> 
> 标签：ruby, multithreading, actor, celluloid

我正在使用 Ruby 1.9.3，并在 Mac OSX 10.7 上对其进行测试。

我有一个`Sender`应该向某个 URL 发送请求的类：

```
require "celluloid"
require "curb"

class Sender
  include Celluloid

  def send(msg)    
    Curl.get($URL) do |url|
      url.headers["content-type"] = "text/html;charset=utf-8"
    end
  rescue Exception => e
    $LOG.error "[erro]-> [ #{e.message} "
  end
end 
```

我有另一个进程应该从 RabbitMQ 队列接收消息并使用以下方式发送请求`Sender`：

```
 AMQP.start(:host => $AMQP_URL) do |connection|
   @channel ||= AMQP::Channel.new(connection)
   @queue   ||= @channel.queue("results")

   pool = Sender.pool

   @queue.subscribe do |metadata, body|
      msg = MessagePack.unpack(body)        
      pool.send(msg)
  end
 end 
```

当我运行它时，我得到：

```
15:56:59 results.1    | I, [2013-02-12T15:56:59.422192 #44490]  INFO -- : Terminating 5 actors...
15:56:59 results.1    | E, [2013-02-12T15:56:59.422640 #44490] ERROR -- : Celluloid::PoolManager crashed!
15:56:59 results.1    | NoMethodError: undefined method `each' for nil:NilClass
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/macosx.rb:39:in `<top (required)>'
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/util/loader.rb:81:in `load'
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/util/loader.rb:81:in `load_file'
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/util/loader.rb:43:in `block (2 levels) in load_all'
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/util/loader.rb:38:in `each'
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/util/loader.rb:38:in `block in load_all'
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/util/loader.rb:35:in `each'
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/util/loader.rb:35:in `load_all'
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/util/collection.rb:72:in `fact'
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter.rb:94:in `block (2 levels) in singletonclass'
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid.rb:37:in `cores'
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid/pool_manager.rb:12:in `initialize'
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid/calls.rb:57:in `dispatch'
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid/actor.rb:323:in `block in handle_message'
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid/tasks/task_fiber.rb:22:in `block in initialize'
15:56:59 results.1    | E, [2013-02-12T15:56:59.423117 #44490] ERROR -- : Celluloid::PoolManager#finalize crashed!
15:56:59 results.1    | NoMethodError: undefined method `+' for nil:NilClass
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid/pool_manager.rb:26:in `finalize'
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid/actor.rb:376:in `block in run_finalizer'
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid/tasks/task_fiber.rb:22:in `block in initialize'
15:56:59 results.1    | I, [2013-02-12T15:56:59.424508 #44490]  INFO -- : Shutdown completed cleanly
15:56:59 results.1    | /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/macosx.rb:39:in `<top (required)>': undefined method `each' for nil:NilClass (NoMethodError)
15:56:59 results.1    |   from /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/util/loader.rb:81:in `load'
15:56:59 results.1    |     from /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/util/loader.rb:81:in `load_file'
15:56:59 results.1    |     from /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/util/loader.rb:43:in `block (2 levels) in load_all'
15:56:59 results.1    |     from /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/util/loader.rb:38:in `each'
15:56:59 results.1    |     from /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/util/loader.rb:38:in `block in load_all'
15:56:59 results.1    |     from /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/util/loader.rb:35:in `each'
15:56:59 results.1    |     from /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/util/loader.rb:35:in `load_all'
15:56:59 results.1    |     from /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter/util/collection.rb:72:in `fact'
15:56:59 results.1    |     from /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/facter-1.6.13/lib/facter.rb:94:in `block (2 levels) in singletonclass'
15:56:59 results.1    |     from /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid.rb:37:in `cores'
15:56:59 results.1    |     from /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid/pool_manager.rb:12:in `initialize'
15:56:59 results.1    |     from /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid/calls.rb:57:in `dispatch'
15:56:59 results.1    |     from /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid/actor.rb:323:in `block in handle_message'
15:56:59 results.1    |     from /Users/info/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid/tasks/task_fiber.rb:22:in `block in initialize'
15:56:59 results.1    | exited with code 1 
```

由于池管理器，我做错了什么导致进程崩溃吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T20:57:54.040

您的答案在[Reel](http://github.com/celluloid/reel)中得到了否定的证明。特别是在其机架处理程序中。您可以在这里深入研究并从那里对您需要的一切进行逆向工程：

*   [https://github.com/celluloid/reel/blob/master/lib/rack/handler/reel.rb#L41](https://github.com/celluloid/reel/blob/master/lib/rack/handler/reel.rb#L41)

Reel 是赛璐珞(::IO) 功能的精彩演示，正是您想要的……除了相反。它通过池接收请求，这与您的情况相反。

如您所知，这里的主要内容是您正在与 PoolManager 交谈，而不是任何一个 Actor。这是您可以重新考虑方法的主要部分。考虑到这一点进行重构：

```
Celluloid::Actor[:reel_rack_pool] = ::Reel::RackWorker.pool(size: options[:workers], args: [self])
    ::Reel::Server.supervise_as(:reel_server, options[:host], options[:port]) do |connection|
    Celluloid::Actor[:reel_rack_pool].handle(connection.detach)
end 
```

考虑到该代码后，请随时使用新的错误或问题更新您的问题。您肯定会在 freenode (IRC) 上的#celluloid 和/或赛璐珞的邮件列表中获得帮助，赛璐珞非常活跃，充满了敬业且知识渊博的人，他们真正欢迎不习惯赛璐珞来龙去脉的人。

*   [http://groups.google.com/group/celluloid-ruby](http://groups.google.com/group/celluloid-ruby)

# ruby-on-rails - 如何使用 ERB 获取 YAML 文件中的当前文件路径？

> ID：14835757
> 
> 赞同：0
> 
> 时间：2013-02-12T15:18:54.643
> 
> 标签：ruby-on-rails, yaml, erb

在我的`config/database.yml`文件中，我需要检索当前文件路径。我试过这个：

```
<%
  logger = Logger.new(STDOUT)
  logger.debug __FILE__
%> 
```

那输出`(erb)`而不是`./config/database.yml`

我知道我可以使用

```
Rails.root.join('config', 'database.yml') 
```

但这并不令人满意，因为它不是动态的。

这里的目标是获取文件所有者的 unix 名称，以便将其用作数据库名称的前缀，这样多个开发人员就可以使用不同的数据库，而不会有提交不需要的更改的风险：

```
development:
    database: <%= Etc.getpwuid(File.stat(__FILE__).uid).name %>_project_db 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T11:06:24.143

如果有人发现这个，我最后是这样做的：

在**应用程序.rb**

```
class Application < Rails::Application
  config.whoami = Etc.getpwuid(File.stat(__FILE__).uid).try(:name)
  config.whoami.try(:downcase!)

  [...]
end 
```

在**database.yaml中**

```
development:
  database: <%= Rails.application.config.whoami %>_project_db 
```

# cakephp - Cookie 和会话对象未在 cakephp 2.x 中提供我的主机名

> ID：14835758
> 
> 赞同：0
> 
> 时间：2013-02-12T15:18:55.203
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

当我在 cakephp 1.3 下工作时，我有这种方法可以知道我是在本地主机还是生产服务器中。

```
function isHostServer() {
    $host = Configure::read('Site.host');
    return (strpos($this->Session->host, $host) !== FALSE);
} 
```

现在我已经迁移到 cakephp 2.x 但 Cookie 和会话对象没有提供我的主机。有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:13:43.793

在 php 中，您总是可以查看 $_SERVER 数组对象。在 cakephp 中，只需查看使用 env() 全局方法，例如在这种情况下： env('SERVER_NAME')

[http://book.cakephp.org/2.0/en/core-libraries/global-constants-and-functions.html#env](http://book.cakephp.org/2.0/en/core-libraries/global-constants-and-functions.html#env)

# ruby-on-rails - 水豚和使用 javascript 重新加载 iframe

> ID：14835759
> 
> 赞同：2
> 
> 时间：2013-02-12T15:19:02.800
> 
> 标签：ruby-on-rails, selenium, rspec, capybara

所以我有一个带有 IFrame 的 rails 应用程序，并且在某些时候我通过 javascript 重新加载该 IFrame 并且它的内容发生了变化。

所以我正在尝试使用以下代码测试该行为

```
sleep 3
within_frame('email-content') do
    page.should have_content "<h1>Email content</h1>"
end 
```

当我用 selenium 运行它时，我可以看到 IFrame 的内容已经更新，但是 capybara 仍然看到旧内容。在检查它的内容之前让它等待更长时间也不起作用。任何帮助表示赞赏。谢谢 ：）

# mysql - 比较字符串时无法在 MySQL 中获取基本查询

> ID：14835761
> 
> 赞同：0
> 
> 时间：2013-02-12T15:19:15.017
> 
> 标签：mysql, sql

我在查询中检索基本数据时遇到困难。

我与三列有关系，`id`其中一个是`INT`and `PRIMARY KEY`，我还有两列`VARCHAR(30)`称为`fname`and `lname`。

按姓名询问人员时，我无法让我的基本查询正常工作。通过 id 询问时，我可以让我的查询正常工作。

例如：

```
select * from customers where cid = 2; -- Does work :) 
```

和

```
select * from customers where fname = 'Bob'; -- Does not work  :( 
```

我还尝试了许多不同引号的变体，例如双引号和制表键上方的键。是的，有一条名为 Bob 的记录

谁能帮我解决我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:25:52.977

有一种合理的可能性是，该字段不包含没有空格（空格、制表符、回车等）的单词“Bob”，或者它可能被意外地放入了“lname”字段。尝试：

```
select * from customers where fname like 'Bob%' or lname like 'Bob%'; 
```

并检查任何结果是否有多余的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:26:32.757

好的，所以我使用了一个 php 脚本来创建模拟数据库。我所做的是创建一个包含一堆名称的文本文件，每个名称都在一个新行上。事实证明，那里隐藏着一个隐藏的回车符......谢谢dan1111

```
SELECT * FROM customers WHERE fname='Bob\n'; 
```

谢谢大家！

# java - 匹配 { 正则表达式 java

> ID：14835762
> 
> 赞同：1
> 
> 时间：2013-02-12T15:19:15.107
> 
> 标签：java, regex

我是正则表达式（和 java）的新手，所以这可能是一个简单的问题。我正在尝试匹配行尾的字符 {。我的尝试很简单：

```
row.matches("{$")

row.matches("\{$") 
```

但两者都只是给

线程“主”java.util.regex.PatternSyntaxException 中的异常：非法重复

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T15:20:32.903

```
row.matches("^.*\\{$"); 
```

您只需要转义 {，因为它是一个元字符。因为 Java 为特殊上下文（\n、\r 等）保留了一个反斜杠，所以需要两个反斜杠来为 Pattern 生成一个反斜杠。所以，

```
\\{ 
```

将正确评估为

```
\{ 
```

不仅如此，该`matches`方法还会检查整个字符串是否匹配，而不仅仅是一个子集。因此，该`^.*`部分

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T15:21:05.480

您必须转义 { 字符，因为它是正则表达式的特殊字符

```
row.matches("\\{$") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T15:22:56.600

转义尖括号有效吗？

如在`\\{$`

试过反对

```
hello world{
    whatever{
    hello{dontmatch
    }
} 
```

它匹配`world{`但`whatever{`不匹配`hello{dontmatch`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-12T15:26:51.873

您需要`{`使用 an转义，`\`但为了防止将 the`\{`读取为特殊字符（如`\n`换行符），您还需要`\`使用额外的`\`结果来转义：

```
row.matches("\\{$"); 
```

# cocoa - OpenGL渲染到纹理

> ID：14835763
> 
> 赞同：-1
> 
> 时间：2013-02-12T15:19:16.097
> 
> 标签：cocoa, opengl, nsopenglview

我知道以前有人问过这个问题（我确实搜索过），但我向你保证这个是不同的。

我正在为 Mac OS X Mountain Lion 制作应用程序，但我需要添加一点点绽放效果。我需要将整个场景渲染为屏幕大小的纹理，减小纹理的大小，将其传递给像素缓冲区，然后将其用作四边形的纹理。

我再次问这个问题是因为一些常用的技术似乎不起作用。我不能在片段着色器中使用`#version`、`layout`或`out`，因为它们无法编译。如果我只是`gl_FragColor`正常使用，我会在我的应用程序后面得到随机的屏幕片段，而不是我试图渲染的场景。该文档没有说明这些事情。

那么，基本上，如何使用 OpenGL 的 Mac 实现正确渲染到纹理？您是否需要使用扩展来执行此操作？

我使用[这里的代码](http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-14-render-to-texture/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:23:29.383

渲染到纹理最好使用[FBO](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_offscreen/opengl_offscreen.html#//apple_ref/doc/uid/TP40001987-CH403-SW7)来完成，它可以让您直接渲染到纹理中。如果您的硬件/驱动程序不支持 OpenGL 3+，则必须通过[ARB_framebuffer_object](http://www.opengl.org/registry/specs/ARB/framebuffer_object.txt)核心扩展或[EXT_framebuffer_object](http://www.opengl.org/registry/specs/EXT/framebuffer_object.txt)扩展来使用 FBO 功能。

如果根本不支持 FBO，您将不得不求助于简单的[`glCopyTexSubImage2D`](http://www.opengl.org/sdk/docs/man/xhtml/glCopyTexSubImage2D.xml)（尽管涉及副本，即使只是 GPU-GPU）或使用更灵活但相当复杂（且已弃用）[*的 PBuffers*](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_offscreen/opengl_offscreen.html#//apple_ref/doc/uid/TP40001987-CH403-SW3)。

这个[关于 FBO 的教程](http://www.songho.ca/opengl/gl_fbo.html)提供了一个简单的示例，用于渲染到纹理并在之后使用此纹理进行渲染。由于该问题缺少有关您在方法中遇到的特定问题的具体信息，因此现在那些指向通常的渲染到纹理资源的相当通用的谷歌指针就足够了。

# php - PHP cURL 通过代理

> ID：14835778
> 
> 赞同：0
> 
> 时间：2013-02-12T15:19:36.030
> 
> 标签：php, curl, proxy, http-headers, http-status-codes

我正在尝试通过 PHP 中的代理发送 cURL 请求。

```
$c = curl_init();
curl_setopt($c, CURLOPT_URL, $this->url);
curl_setopt($c, CURLOPT_PROXY, $this->proxy);
curl_setopt($c, CURLOPT_POST, true);
curl_setopt($c, CURLOPT_USERAGENT, $this->browser);
curl_setopt($c, CURLOPT_POSTFIELDS, $requestData);
curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
curl_setopt($c, CURLOPT_HEADER, 1);
curl_setopt($c, CURLOPT_FOLLOWLOCATION, 1);
$result = curl_exec($c); 
```

这是我得到的错误：

> HTTP_CODE: 201 (ID: 511a59debf97b)
> HTTP_CODE: 201 (ID: 511a59e25bc89)
> HTTP_CODE: 201 (ID: 511a59e47797c)
> HTTP_CODE: 201 (ID: 511a59e641246)
> HTTP_CODE: 400 (ID: 511a59e9850dc)
> HTTP_CODE: 400 (ID: 511a59ea59bda)
> HTTP_CODE: 400 (ID: 511a59eb90572)
> HTTP_CODE: 201 (ID: 511a59ec647ad)
> HTTP_CODE: 411 (ID: 511a59efda30a)
> HTTP_CODE: 201 (ID: 511a59f0c6c70)

如您所见，它们都是 2xx 和 4xx，我不知道为什么会这样。我可能还应该提到，有时（大约所有请求的 1/8）请求“工作”，所以它实现了这个脚本的目的，但它仍然记录这种错误。

这是错误日志代码

```
#check for errors
$errorsFile = $this->folders["root"].$this->folders["db"].$this->files["errors"];
if(curl_errno($c)) file_put_contents($errorsFile, "CURL_ERRNO: ".curl_errno($c)." (ID: ".$this->requestID.")\n", FILE_APPEND);
else {
    $httpCode = curl_getinfo($c, CURLINFO_HTTP_CODE); #checks http status
    if($httpCode != 200) file_put_contents($errorsFile, "HTTP_CODE: ".$httpCode." (ID: ".$this->requestID.")\n", FILE_APPEND);
}
curl_close($c);
#log
$log = str_replace("\n", "", date("d.m.Y - H:i", time()) . " " . $this->proxy . " [" . $this->browser . "] (ID: ".$this->requestID.")")."\n" ;
file_put_contents($this->folders["root"].$this->folders["db"].$this->files["logs"], $log, FILE_APPEND); 
```

如您所见，我还记录 cURL 错误（如果发生），但很少发生。

但是，我不确定这些错误来自哪里以及为什么有时会起作用，有时却不起作用。如果代理有问题，我应该得到一个 cURL 错误而不是 HTTP 错误，对吗？那么有什么问题呢？

**更新** 感谢@Dharmavir

> 代理在这里似乎是一个问题。您可以在 cURL 请求中添加带有“Content-Length:”的标头吗？我过去的经验是，有时代理或防火墙（在我的情况下为 ipcop）会阻止没有内容长度标头的请求，并将其视为病毒或错误请求。

我没有提到这`$proxy`是随机选择的，因此总是不同的。我手动测试了一个有效的代理，它成功处理了 10 个请求中的所有 10 个。

# javascript - Xcode：应用程序窗口应在应用程序启动结束时有一个根视图控制器

> ID：14835784
> 
> 赞同：1
> 
> 时间：2013-02-12T15:19:50.803
> 
> 标签：javascript, html, xcode

我是 Xcode 的新手，并尝试使用模拟器运行一个简单的应用程序（如果需要，我可以提供代码），虽然它说“构建成功”，但目标输出显示“应用程序 Windows 应该有一个根视图控制器在应用程序启动结束时”

请问有什么办法可以告诉我吗？再次，这是我第一次使用 Xcode，如果这是一个简单的错误，我很抱歉 :)

非常感谢x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:41:30.173

在您的 Application Delegate 类中，`- (void)applicationDidFinishLaunching:(UIApplication *)application`您需要为您的窗口设置一个根视图控制器，如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UIViewController *viewController = [[UIViewController alloc] init];
    [self.window setRootViewController:viewController];

    [self.window makeKeyAndVisible];
    return YES;
} 
```

之后该消息应该消失。

# linux - SVN 提交错误，应添加“文件”，但不存在

> ID：14835785
> 
> 赞同：0
> 
> 时间：2013-02-12T15:19:54.347
> 
> 标签：linux, svn, commit

SVN 有问题。

我尝试通过以下方式提交我的项目：`svn commit -m "test test"`

我有这个错误信息（法语对不起）：

```
svn: Ãchec de la propagation (commit), dÃ©tails :
svn: '/var/www/racine/comos/com-include/Smarty/libs/templates_c/30c727fea15771e5c1efb79369eca746c90f3b3a.string.php' doit Ãªtre ajoutÃ©, mais est absent 
```

他说`/var/www/racine/comos/com-include/Smarty/libs/templates_c/30c727fea15771e5c1efb79369eca746c90f3b3a.string.php`应该添加文件，但不存在。

我不明白。该文件不存在于我的项目中，也不存在于我的存储库中...

你有什么想法 ？谢谢 ！

# vb.net - 随机 UnauthorizedAccessException

> ID：14835788
> 
> 赞同：2
> 
> 时间：2013-02-12T15:19:57.277
> 
> 标签：vb.net, io

我有类似的东西：

```
 System.IO.File.Delete(_save_file_dialog.FileName)

    ...

    _sw = New StreamWriter(filename)
    _sw.Write(_data.ToString)
    _sw.Close() 
```

删除有效，FileDialog 没有发现任何只读问题。但有时（随机）StreamWrite 会抛出 UnauthorizedAccessException。这是在网络驱动器上。

我们最近刚从 XP 切换到 Win7，XP 上从来没有出现过这个问题。

调用后删除可能没有完成吗？

# java - Documentum DFS：使用符号标签而不干扰系统标签

> ID：14835791
> 
> 赞同：2
> 
> 时间：2013-02-12T15:20:01.467
> 
> 标签：java, documentum, documentum-dfs

我正在使用 DFS Java API 处理 EMC Documentum 6.6。目前我正在寻找一种在不干扰系统标签的情况下向文档添加和更新符号标签的方法。

据我了解，所有标签（系统标签和符号标签）都简单地存储在文档的重复属性**r_version_label**中。这意味着当我创建一个新文档时根本没有设置 r_version_label 属性，服务器将自动设置默认系统值**1,0**和**CURRENT**。

但只要我想为初始文档版本分配一个符号标签，我还必须注意设置 1,0 和 CURRENT，因为服务器不会自动设置它们。没有系统标签的文档有点损坏，它们只能在搜索隐藏对象时通过 Webtop 找到，并且在查看其属性时也可能导致客户端错误。

在构建用于更新文档属性的接口时可能会出现另一个相关问题：客户端开发人员必须注意防止用户修改系统标签，只允许他们添加或删除符号标签。

我确实理解这种行为也很有用——例如，无论出于何种原因，都可以创建从 3.0 版开始的文档。

然而，在我的情况下，只使用符号标签并将系统标签的管理完全交给服务器会更容易。我错过了什么吗？

* * *

**编辑：似乎除了手动添加所需的初始系统标签之外别无选择。我会接受克里斯的回答，因为他再次确认了这一点。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:23:57.653

版本服务为下一个次要/主要编号提供帮助，但您必须始终明确设置当前版本标签，否则它将丢失。

```
versionService.checkout( toVersionIds, options );
DataPackage versioned = versionService.checkin( toVersion, VersionStrategy.NEXT_MINOR, false, Arrays.asList( new String[]{"CURRENT"} ), options ); 
```

这将实现 1.0 -> 1.1 或使用 VersionStrategy.NEXT_MAJOR 1.0 -> 2.0

# java - 在 Adob e Reader 中，openssl / bouncycastle 生成的证书链的派生在签名时失败

> ID：14835793
> 
> 赞同：0
> 
> 时间：2013-02-12T15:20:03.723
> 
> 标签：java, pdf, openssl, bouncycastle, adobe-reader

我们使用 openssl 生成一个自签名的根证书，并使用 bouncycastle 库通过 Java 从中派生出一个用户证书。用户证书用于使用 bouncycastle 和 openssl 混合从 java 再次签署 PDF 文档。

根证书安装在 Adob​​e Reader 中，但 Adob​​e Reader 说，签名无效，因为链中没有受信任的根证书。即使在 Adob​​e Reader 中，签名证书的授权密钥标识符也与根证书的主题密钥标识符相匹配。如果根证书和用户证书安装在 Windows 密钥库中，则会显示证书链。

如果我们使用 openssl 而不是 Java/bouncycastle 派生用户证书并用它签署 pdf，一切看起来都很好，但 java 生成的证书失败。

我究竟做错了什么？

根证书是 < [Root Cert](http://mknaus.bplaced.net/public.cer) > 用 openssl 生成的证书签名的 PDF：< [openssl pdf](http://mknaus.bplaced.net/5a45cb2220ff2adbfb58efb42fc3bbfb.pdf) >

# java - 序列化 OrientDB RecordID 时无限递归

> ID：14835800
> 
> 赞同：2
> 
> 时间：2013-02-12T15:20:19.737
> 
> 标签：java, jackson, orientdb

在我的模式中，我有一个像这样的抽象类：

```
@JsonAutoDetect(JsonMethod.NONE)
public abstract class AbstractEntity {

    @Id private Object id;
    @Version private Integer version;

    public AbstractEntity() {}

    @JsonProperty // this annotation causes infinite recursion
    public Object getId() { return id; }

} 
```

此类用作每个实体的超类，例如：

```
@JsonAutoDetect(JsonMethod.NONE)
public class Usuario extends AbstractEntity {

    private Cadastro cadastro;

    protected Usuario() {}

    public Usuario(Cadastro cadastro) {
        setCadastro(cadastro);
    }

    @JsonProperty
    public Cadastro getCadastro() { return cadastro; }

    @JsonProperty
    public void setCadastro(Cadastro cadastro) { this.cadastro = cadastro; }

} 
```

我正在设计一个 REST 层，它允许用户通过 JSON 请求/响应在 db 中创建记录：

```
@POST
@Path("cadastrar")
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
public Response cadastrar(@Context HttpServletRequest request, Cadastro cadastro) {
    OObjectDatabaseTx bd = (OObjectDatabaseTx) request.getAttribute("object.database.tx");

    try {

        bd.begin();
        Usuario usuario = new Usuario(cadastro);
        usuario = bd.save(usuario);
        bd.commit();

        String json = new ObjectMapper().writeValueAsString(usuario);
        Response response = Response.status(HttpURLConnection.HTTP_CREATED).entity(json).build();

        return response;
        (...) 
```

但是，在最后一种方法中，当我调用 Jackson 来序列化我新创建的实体（在`writeValueAsString`方法中）时，我得到了一个无限递归：

```
org.codehaus.jackson.map.JsonMappingException: Infinite recursion (StackOverflowError) (through reference chain:
  com.orientechnologies.orient.core.id.ORecordId["record"]->com.orientechnologies.orient.core.record.impl.ODocument["identity"]
->com.orientechnologies.orient.core.id.ORecordId["record"]->com.orientechnologies.orient.core.record.impl.ODocument["identity"]
->com.orientechnologies.orient.core.id.ORecordId["record"]->com.orientechnologies.orient.core.record.impl.ODoc... 
```

`@JsonProperty`我可以通过从类中的`getId`方法中删除来避免无限递归`AbstractEntity`。但是，这样该`id`属性将不会出现在 JSON 响应中。

那么，我怎样才能序列化`id`属性呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T10:10:57.193

Jackson 支持循环引用吗？是这样吗？

# android - Android 4.2.1 上的库位置是否移动？

> ID：14835808
> 
> 赞同：3
> 
> 时间：2013-02-12T15:20:47.077
> 
> 标签：android, java-native-interface, libraries, shared-libraries

当我尝试更新我的 Android 应用程序以在 4.2.1、Nexus 7 上运行时遇到了一个可疑问题。我正在使用我自己的 .so 库，在我更新之前，该库在 Android 版本 4.1 上运行良好。现在我遇到了各种各样的问题。

我在运行 3.2.1 的 Android 设备和运行 4.2.1 的 Nexus 7 上部署时比较了日志。图书馆被放置在两个不同的位置，这可能会导致我的问题。

安卓 3.2.1：

```
Trying to load lib /data/data/com.my.app/lib/lib_my_app_jni.so 0x407e8218
Added shared lib /data/data/com.my.app/lib/lib_my_app_jni.so 0x407e8218 
```

安卓 4.2.1 (Nexus 7):

```
Trying to load lib /data/app-lib/com.my.app-1/lib_my_app_api_jni.so 0x4257b6c8
Added shared lib /data/app-lib/com.my.app-1/lib_my_app_api_jni.so 0x4257b6c8 
```

为什么它突然被放在 mysteries app-lib 目录中？我如何强制它回来？这在哪里记录？

谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T16:42:21.237

从 Android 4.2 开始，Android 框架中添加了多用户功能。

并且有几个目录位置发生了变化，但 API 没有变化，例如 Context.get???Dir() 或 Context.get???Path()。（只是返回值改变了）

android平台也为旧版制作符号链接。

这些更改未记录在案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:12:48.987

我将回答我自己的问题，因为我们最终以不同于最初预期的方式实现了我们的库。

问题是我们将访问证书等复制到库所在的目录中。这种方法在旧的 Android 版本上运行良好，该版本位于 data/data/package/ 中。但在较新的 Android 版本（data/app-lib/package/）上，该位置是只读的。

我们所做的就是移动位置，很简单。感谢您的输入。

# video - 视频背景的最大尺寸是多少？

> ID：14835813
> 
> 赞同：1
> 
> 时间：2013-02-12T15:21:01.933
> 
> 标签：video, html5-video, filesize

我正在创建一个具有大视频背景的网站。我现在创建了每 10 秒电影大约 10 mb 的视频文件。但我对质量有点失望。

我的目标群体是 16-25 岁的男性，我猜大多数人的互联网连接速度约为 6mb/s 及以上。

那么安全文件大小是多少？

如果您进行简单的数学计算，您可以计算出，如果每个人都有 6mb/s 或更高的速度，我的电影可以安全地达到每秒 2mb 左右，导致 10 秒的电影比 20mb 是正确的猜测。

这是正确的还是有更好的方法来处理这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-22T19:57:38.147

在我尝试了几个月之后。让您的视频大小在 500kb/s - 1mb/s 左右是安全的，而不会在现代计算机上出现任何加载问题。

# java - 在 if-else 语句中使用标签和中断

> ID：14835815
> 
> 赞同：1
> 
> 时间：2013-02-12T15:21:08.283
> 
> 标签：java, label, break

我有这段代码，它在特定条件下（当 x 和 y 都等于零时）从数组生成随机数。我希望控件跳转到标签。但是控件在任何情况下都不会跳转到标签。我想知道我做的对不对？

```
int[] arr = {0, 1, 2};    
Random rn = new Random();
label: {
    //some code
    if (x != 0 && y !=0) {
        //some code
    } else {
        break label;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-09-13T10:27:34.623

无需检查是否应该，**是**`if`的，您可以在 Java中使用带标签的语句。根据[1.7规范](https://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.7)

> 标识符被声明为立即包含的语句的标签。[...] 标识符语句标签与出现在标记语句中的任何位置的[break](https://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.15) (§14.15) 或[continue (§14.16) 语句一起使用。](https://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.16)

它继续（强调添加）

> 如果语句由标识符标记，并且包含的​​语句由于与相同标识符的中断而突然完成，则**标记语句正常完成**。在语句突然完成的所有其他情况下，带标签的语句出于相同的原因突然完成。

所以如果你`break`是一个`if`块（记住一个块是一个语句），你可以退出`if`主体。让我们测试一下：

```
public static void main(String[] args) {
    if (true) label: {
        if (args != null)
            break label;
        System.out.println("doesn't get here");
    }
    System.out.println("Outside of labeled block");
} 
```

输出：

```
Outside of labeled block 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T15:27:28.310

该`break`语句会中断*循环*并且不会将控制权转移给标签。

`break`当您有内部和外部循环时，使用带有 is 的标签。未标记`break`的会破坏最内层的循环（您所在的循环），而标记的则`break`允许您指定外部循环。

请参阅：[http ://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)

特别是[BreakWithLabelDemo](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/java/nutsandbolts/examples/BreakWithLabelDemo.java)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T15:28:35.753

~~尽量~~避免使用标签。你可以在那里做的是：

```
while(true) {
    if(x == 0 && y == 0) {
        break;
    }
    // some stuff with x and y
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T15:39:40.770

我建议你使用递归函数。

```
public void work(){
    // some code
    if (x != 0 && y != 0) {
        //some code
    } else {
        work();
    }
} 
```

`break`没有循环就不能使用

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-12T15:27:19.293

据我所知，标签不能在 周围任意使用`{}`，您需要使用它们来标记 for、while 或 do-while 循环

# javascript - 单击时显示和隐藏 div

> ID：14835819
> 
> 赞同：4
> 
> 时间：2013-02-12T15:22:08.897
> 
> 标签：javascript, jquery, html

我究竟做错了什么？单击缩略图时，我试图显示 div。我能够显示第一个 div，但由于某种原因，下一个 div 没有显示。我无法弄清楚我可能会错过什么。

```
<script>
$(function(){
    $('.clickImage').click(function(){
        $('.popUp').hide();
        $('.popUp').eq($(this).index()).show();
    });
});
</script>

<style>
.popUp{
    display:none;
}
</style>

<div id="projectContainer">
        <div class="imageV clickImage"></div>
        <div class="textVertical">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean vel tortor sit amet magna condimentum dapibus non quis nulla. Etiam varius pellentesque quam sed faucibus. Ut libero mi, porta ac tincidunt sagittis, porttitor a elit. In non tellus eu mauris tristique gravida. In rutrum arcu ullamcorper risus consequat interdum. Sed rutrum rhoncus dolor. Suspendisse potenti.</div>

        <div class="imageV clickImage"></div>
        <div class="textVertical">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean vel tortor sit amet magna condimentum dapibus non quis nulla. Etiam varius pellentesque quam sed faucibus. Ut libero mi, porta ac tincidunt sagittis, porttitor a elit. In non tellus eu mauris tristique gravida. In rutrum arcu ullamcorper risus consequat interdum. Sed rutrum rhoncus dolor. Suspendisse potenti.</div>
</div>
<div>
    <div class="popUp">Enlarged Image 1</div>
    <div class="popUp">Enlarged Image 2</div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T15:29:34.413

尝试在`.index()`方法中包含一个选择器：

```
$(function(){
    $('.clickImage').click(function(){
        $('.popUp').hide();
        $('.popUp').eq($(this).index(".clickImage")).show();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:33:10.547

试试这个方法：

```
<script>
$(function(){
    $('.clickImage').click(function(){
        $('.popUp').hide();
    $(this).next().next().show();
    });
});
</script>

<style>
.popUp{
    display:none;
}
</style>

<div id="projectContainer">
        <div class="imageV clickImage"></div>
        <div class="textVertical">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean vel tortor sit amet magna condimentum dapibus non quis nulla. Etiam varius pellentesque quam sed faucibus. Ut libero mi, porta ac tincidunt sagittis, porttitor a elit. In non tellus eu mauris tristique gravida. In rutrum arcu ullamcorper risus consequat interdum. Sed rutrum rhoncus dolor. Suspendisse potenti.</div>
    <div class="popUp">Enlarged Image 1</div>

        <div class="imageV clickImage"></div>
        <div class="textVertical">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean vel tortor sit amet magna condimentum dapibus non quis nulla. Etiam varius pellentesque quam sed faucibus. Ut libero mi, porta ac tincidunt sagittis, porttitor a elit. In non tellus eu mauris tristique gravida. In rutrum arcu ullamcorper risus consequat interdum. Sed rutrum rhoncus dolor. Suspendisse potenti.</div>
    <div class="popUp">Enlarged Image 2</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:26:50.500

我不认为[`index()`](http://api.jquery.com/index/)正在做你打算让它做的事情。

我会使用`dataImageId`属性或类似的东西来唯一标识图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T15:29:33.963

你的索引是 2 选择，使用这样的东西：

```
$('.clickImage').click(function () {
       var i=$('.clickImage').index(this);
       $('.popUp').hide();
       $('.popUp').eq(i).show();
}); 
```

索引是从 0 开始的。

请注意，第一个返回 0 因为它是第一个 div，第二个返回 2 因为它是第三个 div，因此您需要使用 .clickImage 类隔离到 div

这是一个简单的小提琴演示：http: [//jsfiddle.net/zfZE2/](http://jsfiddle.net/zfZE2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T15:31:42.157

您的第一个可点击`clickImage`将起作用，因为它会返回`index:0.`

这是正确的相应弹出窗口。

但是对于第二个`clickImage`，它将返回 index:2，它没有相应的弹出窗口。只有 0 和 1 存在。

这是因为`.textVertical`也被视为 的同级`clickImage`，因此您单击的第二个 clickImage 将是第三个同级（索引）。

改变

```
 $('.popUp').eq($(this).index()).show(); 
```

至

```
 $('.popUp').eq($(this).index('.clickImage')).show(); 
```

[http://jsfiddle.net/rNSLE/](http://jsfiddle.net/rNSLE/)

# asp.net - 如何使 jqPlot 堆叠条从任何页面控件（HTML、ASP.NET）继承颜色

> ID：14835826
> 
> 赞同：1
> 
> 时间：2013-02-12T15:22:48.430
> 
> 标签：asp.net, jqplot

我的 ASP.NET 页面上有 jqPlot 堆积条形图。是否每个系列的堆叠条都可以具有特定的颜色，例如在 javascript、jQuery、 ETC。？请问您将如何以编程方式进行操作？任何人都可以帮忙吗？

谢谢

# android - 在方向更改时保持列表片段选定的项目位置

> ID：14835828
> 
> 赞同：2
> 
> 时间：2013-02-12T15:22:50.867
> 
> 标签：android, android-fragments

我在另一个片段的左侧有一个列表片段，本质上是标准的单击项目并更新右侧片段模式。当他们单击列表片段中的一个项目时，他们正在选择新闻文章类别，我需要在他们旋转设备时保留选择的任何一个。我怎么做？我当前的代码不起作用。

我的代码如下：

```
public class SideMenuFragment extends ListFragment {
    ArrayList<SideItem> sideItems;
    SideAdapter sideAdapter;
    public SideMenuFragment() {
        this.setRetainInstance(true);
    }
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        return inflater.inflate(R.layout.list, null);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        sideItems = new ArrayList<SideItem>();
                ...add bunch of items
        sideAdapter = new SideAdapter(getActivity(), sideItems);
        getListView().setVerticalScrollBarEnabled(false);
        setListAdapter(sideAdapter);
        if (savedInstanceState != null) {
            sideAdapter.setSelectedItem(savedInstanceState.getInt("sidePosition"));
            sideAdapter.notifyDataSetChanged();
                }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("sidePosition", sideAdapter.getSelectedItem());
    }

    @Override
    public void onListItemClick(ListView lv, View v, int position, long id) {
        if (sideAdapter.getSelectedItem() != position) {
            sideAdapter.setSelectedItem(position);
            sideAdapter.notifyDataSetChanged();
        }
        switch (position) {
                      ...switch the fragment depending on position.
                    }
    }

    // the meat of switching the above fragment
    private void switchFragment(Fragment fragment, String title) {
        if (getActivity() == null)
            return;
        if (getActivity() instanceof HomeActivity) {
            HomeActivity a = (HomeActivity) getActivity();
            a.switchContent(fragment, title);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:34:17.363

首先，如果 Activity 布局，请在 xml 中添加您的 Fragment。在 Activity onCreate

```
getFragmentManager().findFragmentById(R.id.youtfragmentid).setRetainInstance(true) 
```

这意味着在重新创建活动时不会重新创建片段。

不要在 onActivityCreated 中更改您的 ListView - 因为每次方向更改时都会重建它。如果您设置一个新的适配器 - 孩子的状态将被重置。

添加检查是否已创建视图的 null 或布尔标志。下次调用 onActivityCreated 时，您的列表适配器不应更改

```
if (sideAdapter == null) {

    sideAdapter = new SideAdapter(getActivity(), sideItems);
        getListView().setVerticalScrollBarEnabled(false);
        setListAdapter(sideAdapter);

} 
```

另外，不要在 onCreateView 中创建新视图，而是使用以前创建的视图。

```
private View v;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if (v == null) {
        v = inflater.inflate(R.layout.list, null);
    } else {
        // detatch from container and return the same view
        ((ViewGroup) getListView().getParent()).removeAllViews();
    }
    return v;
} 
```

# java - 在java中识别图像中的数字

> ID：14835831
> 
> 赞同：2
> 
> 时间：2013-02-12T15:22:59.680
> 
> 标签：java, image-processing, ocr, tesseract

我想识别下图中的数字

![在此处输入图像描述](../Images/ffcf459fc324620db92b35625b450407.png)

我目前在 Eclipse Java 项目中使用 Tess4J 库，但它只能识别平面颜色背景中的字符。对于这张图片，它甚至无法识别这张图片上有字符（数字）。帮助我找到完成这项任务的方法。

这是我当前的代码：

```
import net.sourceforge.tess4j.*; 
import java.io.File; 

public class Main { 
  public static void main(String[] args) { 
    File imageFile = new File("image.png"); 
    Tesseract instance = Tesseract.getInstance(); 
    try { 
      String result = instance.doOCR(imageFile); 
      System.out.println(result); 
    } catch (TesseractException e) {
      System.err.println(e.getMessage()); 
    } 
  } 
} 
```

如果有办法计算由黄线分隔的方块。

`Thank you`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T16:53:45.810

如果您的图像具有代表性，那么您首先需要的是在接近最大值的阈值处进行二值化，然后丢弃小组件。

```
f = Import["http://i.stack.imgur.com/6AXwH.jpg"]
step1 = SelectComponents[Binarize[ColorConvert[f, "Grayscale"], 0.9], 
  "Count", #1 > 100 &] 
```

![在此处输入图像描述](../Images/e86ce868650c10f50221ab9a63701d34.png)

现在，如果您知道数字不能太高或太瘦（这取决于图像尺寸），那么您可以根据边界框过滤剩余的组件。

```
SelectComponents[step1, "BoundingBox", 
 And[10 < #[[2, 1]] - #[[1, 1]] < 100, 50 < #[[2, 2]] - #[[1, 2]] < 100] &] 
```

![在此处输入图像描述](../Images/e77cafb1f5c02f8257fa27e52b58cba4.png)

要分离每个区域，您可以考虑使用一个颜色空间，其中有一个专用于黄色的通道。`CMYK`在这里是一种可能性，你需要的只是一个高值的阈值，以及基本的形态闭合来完成线条（因为在你的例子中线条没有延伸到图像的边界）。例如，您可以使用 Hough 或 RANSAC 来检测线条，而不是在此处使用形态闭合。

```
rects = Closing[
  Closing[Binarize[ColorSeparate[f, "CMYK"][[3]], 0.9], 
   ConstantArray[1, {1, 15}]], ConstantArray[1, {15, 1}]] (* left image *)
Colorize[MorphologicalComponents[ColorNegate[rects]], 
 ColorFunction -> "Rainbow"]                              (* right image *) 
```

![在此处输入图像描述](../Images/e9309963a06cc400b3c5a3f4dadba0ff.png) ![在此处输入图像描述](../Images/996ce163177559b8e344654ff040ecd2.png)

这里使用的工具非常简单，几乎任何图像处理库都会提供。还可以采用更强大的方法，但对于给定的图像，它不是必需的。

# html - 如何确保复选框旁边的文本永远不会出现在复选框下方？

> ID：14835836
> 
> 赞同：0
> 
> 时间：2013-02-12T15:23:17.530
> 
> 标签：html, css

[![在此处输入图像描述](../Images/28b7eabebfcde70d00ee6bcb5ace2e43.png)](https://i.stack.imgur.com/27aut.png)

当文本很长时，复选框位于文本上方。我怎样才能使它与文本保持在同一行但如果文本很长则打破文本？即给出文本`white-space:normal`，但将复选框和文本的第一位保持在同一行。

```
 <input style="float: left" type="checkbox" ...etc..> <a href="...">my text</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:51:23.593

我已将标记修改为使用`label`and `input`，但这不是必需的（您只需要一些东西来包含您的复选框。看看[这个 jsFiddle](http://jsfiddle.net/cherryflavourpez/fZyeg/)的例子。

HTML：

```
<div class="container">
     <label><input type="checkbox"> My text - this label can be as long as you want it to be, see?</label>
</div> 
```

CSS：

```
.container {
    width: 150px;
    background: red;
}

label {
    display: block;
    padding-left: 1em;
}

input {
    display: inline-block;
    margin-left: -1em;
} 
```

上的宽度`.container`只是表明这将在文本换行时起作用：它可以在任何宽度下工作，并且适用于没有任何固定的响应式设计。它看起来像这样：

![带有长格式标签示例的复选框](../Images/ea78e53c8d6aa9d3b010da8f013a7d26.png)

这是[一个使用原始标记的示例](http://jsfiddle.net/cherryflavourpez/mnFTF/)（添加了`span`，我假设您可以包含该标记）：

```
<div class="container">
    <span><input type="checkbox"> <a href="#">My text - this label can be as long as you want it to be, see?</a></span>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:38:27.270

更新：其他可能对您有用的东西：

[http://jsfiddle.net/persianturtle/FrEsX/3/](http://jsfiddle.net/persianturtle/FrEsX/3/)

隐藏是溢出。

像这样的东西？

[http://jsfiddle.net/persianturtle/vwfwh/3/](http://jsfiddle.net/persianturtle/vwfwh/3/)

如果没有，请画一幅画。

```
.container {
width: 150px;
height: 200px
}

input {
margin: 25px 25px 50px 50px;
float: left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:42:17.363

你可以试试`&nbsp;`witch is for Non Breakable Space。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T15:31:19.717

好吧，我会为 a 设置固定宽度。

```
a {
  display: inline-block;
  width: 100px; /*whatever number you need*/
} 
```

# php - MySQL 查询在查询窗口中有效，但在 php 中无效

> ID：14835837
> 
> 赞同：-1
> 
> 时间：2013-02-12T15:23:16.843
> 
> 标签：php, mysql

我不是 php 开发人员，我是 Android/Java 开发人员，我需要一些 php 编码方面的帮助。我需要用 php 从 mysql 获取一些对象。当我使用 php 向 mysql 发送查询时，它返回 null .. 但相同的代码在查询窗口中工作。这是我的查询..

```
SELECT id, title, latitude, longitude FROM google_map_table WHERE title = 'Café Chiquito' 
```

另外，当我使用 id(int) 获取对象时，它可以在 php 中工作。但是当我使用 title(not int) 搜索时它不起作用。有人可以帮我在 php 中获取带有标题的对象吗？提前致谢...

这是完整的代码..

```
$map_result = mysql_query("SELECT id, title, latitude, longitude FROM google_map_table WHERE title = '`Café Chiquito`'") or die(mysql_error());

$map_row = mysql_fetch_array($map_result);

$collector = array();
$collector["title"] = $map_row["title"];
$collector["latitude"] = $map_row["latitude"];
$collector["longitude"] = $map_row["longitude"];

echo json_encode($collector); 
```

它打印为空.. 但是当我用 id 搜索对象时，它的工作.. 像这样

```
"SELECT id, title, latitude, longitude FROM google_map_table WHERE id = 1" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:04:21.067

尝试以下查询：

```
$map_result = mysql_query("SELECT id, title, latitude, longitude FROM google_map_table WHERE title = 'Café Chiquito'") or die(mysql_error()); 
```

标题值中的转义字符 '`' 可能会导致此处出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:48:17.280

如果您通过您收到标题，则`$_POST`可能必须`utf8_decode()`，具体取决于您的 Web 服务器配置。字符集一定有问题。

如果您想知道您的 Mysql 正在接收的确切查询，请检查 mysql.log。如果您对字符集有疑问，则执行`echo`查询将无济于事。

# java - Netty 代理服务器

> ID：14835840
> 
> 赞同：1
> 
> 时间：2013-02-12T15:23:19.510
> 
> 标签：java, netty

我已经阅读了 netty 代理服务器示例。但是我想知道如何实现客户端与代理交谈。我正在实施的解决方案是服务器，每当客户端连接到服务器时，它都需要连接到套接字服务器。因此，连接到服务器的每个客户端都将能够从另一台服务器发送/接收数据。

我需要帮助来用 netty 实现这样的架构，因为服务器端是建立在 netty 上的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T00:09:01.783

[Netty 代理示例](http://static.netty.io/3.5/xref/org/jboss/netty/example/proxy/HexDumpProxyInboundHandler.html)似乎可以回答您想要实现的内容

下面的代码段显示了打开新的客户端通道后如何连接到远程服务器。

```
@Override
public void channelOpen(ChannelHandlerContext ctx, ChannelStateEvent e)
        throws Exception {
    // Suspend incoming traffic until connected to the remote host.
    final Channel inboundChannel = e.getChannel();
    inboundChannel.setReadable(false);

    // Start the connection attempt.
    ClientBootstrap cb = new ClientBootstrap(cf);
    cb.getPipeline().addLast("handler", new OutboundHandler(e.getChannel()));
    ChannelFuture f = cb.connect(new InetSocketAddress(remoteHost, remotePort));

    outboundChannel = f.getChannel();
    f.addListener(new ChannelFutureListener() {
        public void operationComplete(ChannelFuture future) throws Exception {
            if (future.isSuccess()) {
                // Connection attempt succeeded:
                // Begin to accept incoming traffic.
                inboundChannel.setReadable(true);
            } else {
                // Close the connection if the connection attempt has failed.
                inboundChannel.close();
            }
        }
    });
} 
```

一旦连接到远程服务器，客户端发送的任何内容（通过入站通道）都会转发到远程服务器（出站通道）。

如果您还没有这样做，我建议您遵循并实施代理示例。

# iphone - MPMoviePlayerController 无法在 ios6 ipad 中播放 mp4 视频

> ID：14835846
> 
> 赞同：1
> 
> 时间：2013-02-12T15:23:45.377
> 
> 标签：iphone, ios6, cocos2d-iphone, mpmovieplayercontroller, mp4

我在 Cocos2D 中开发了一个通用应用程序。我对 iPhone 和 iPad 使用相同的代码。

问题是我正在通过 CCVideoPlayer 播放视频。CCVideoPlayer 是一个扩展类。对于 iphone，我使用的是 mov 文件，对于 ipad，我使用的是 mp4 文件。但 mp4 文件无法播放。我没有更改代码，当我尝试播放用于 iPhone 的相同视频时，它也在 iPad 上运行。所以我认为问题在于 mp4 视频而不是我的代码。因此，我们将不胜感激任何帮助来解决我的问题。

```
-(void)playMovie{
   [CCVideoPlayer playMovieWithFile:@"video_ipad.mp4"];
} 
```

# asp.net - 为什么 IE 和 Chrome 呈现 css 边框底部宽度不同？

> ID：14835850
> 
> 赞同：2
> 
> 时间：2013-02-12T15:24:01.053
> 
> 标签：asp.net, html, css, web

我有一个应用了一些 CSS 样式的 ASP:MENU。我们在表格中指定的选项之一是每个元素的“高度”和“行高”均为 15 像素。这在 IE 中看起来不错，但在 Chrome 中太拥挤了。此外，我们将 'border-bottom-style: dotted' 应用于元素。在 IE 中，这条虚线等于表格元素的宽度。在 Chrome 中，它与文本的宽度相同。

我已经在 Chrome 和 IE 的开发人员工具中检查了页面的代码，并且他们正在接收所需的样式。为什么它们的显示方式不同，这仅仅是 Chrome 呈现网站方式的固有差异吗？如果是这种情况，我可能需要使用不同的 CSS 样式表，具体取决于浏览器，除非我可以尝试其他方法？

```
<asp:Menu ID="menuSubLeft" runat="server" DataSourceID="sitemap_submenu"     
MaximumDynamicDisplayLevels="1">
<StaticMenuStyle CssClass="clienthome_submenuMenu" />
<StaticMenuItemStyle CssClass="clienthome_submenuItemMenu" />
<StaticSelectedStyle CssClass="clienthome_submenuSelectedStyle" />
<StaticHoverStyle CssClass="clienthome_submenuHoverStyle" />
<DynamicMenuItemStyle CssClass="clienthome_dynamicMenu_Item" />
<DynamicHoverStyle CssClass="clienthome_submenuHoverStyle" />
<DynamicMenuStyle CssClass="dynamicMenu_style_left" />
<DynamicSelectedStyle CssClass="clienthome_submenuSelectedStyle" />
</asp:Menu>

.clienthome_submenuItemMenu
{
border-bottom:dotted 1px #5a57a6;
height:15px;
line-height:15px;
padding:2px 0px 2px 5px;
color:#5A57A6;
}

    <table id="ctl00_ctl00_globalContent_menuSubLeft" 
    class="clienthome_submenuMenu ctl00_ctl00_globalContent_menuSubLeft_5 ctl00_ctl00_globalContent_menuSubLeft_2" 
    cellpadding="0" 
    cellspacing="0" 
    border="0">
    <tr onmouseover="Menu_HoverStatic(this)" 
    onmouseout="Menu_Unhover(this)" 
    onkeyup="Menu_Key(this)" title="Allows client to change their account password" id="ctl00_ctl00_globalContent_menuSubLeftn0">
        <td>
            <table class="clienthome_submenuItemMenu ctl00_ctl00_globalContent_menuSubLeft_4" cellpadding="0" cellspacing="0" border="0" width="100%">
                <tr>
                    <td style="white-space:nowrap;width:100%;">
                        <a class="ctl00_ctl00_globalContent_menuSubLeft_1 clienthome_submenuItemMenu ctl00_ctl00_globalContent_menuSubLeft_3" href="/myprofile.aspx" style="border-style:none;font-size:1em;">My Profile</a>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table> 
```

更新：在玩了几个小时的 CSS 并且无处可去/将网站上的所有其他内容都扔掉之后，一位同事向我指出了一个简单的修复方法：我刚刚在后面的代码中添加了以下代码：

```
protected void Page_PreInit(object sender, EventArgs e)
    {
        if (Page.Request.ServerVariables["http_user_agent"].ToLower().Contains("safari"))
        {
            Page.ClientTarget = "uplevel";
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:33:28.167

这有点像 CSS PRECEDENCE

6.4 级联

样式表可能有三个不同的来源：作者、用户和用户代理。

*   作者。作者根据文档语言的约定为源文档指定样式表。例如，在 HTML 中，样式表可能包含在文档中或外部链接。
*   用户：用户可能能够指定特定文档的样式信息。例如，用户可以指定一个包含样式表的文件，或者用户代理可以提供一个接口来生成用户样式表（或表现得好像它确实如此）。
*   **用户代理**：符合标准的用户代理必须应用默认样式表（或表现得像他们那样）。用户**代理的默认样式表**应该以满足文档语言的一般呈现期望的方式呈现文档语言的元素（例如，对于可视浏览器，HTML 中的 EM 元素使用斜体字体呈现）。有关 HTML 文档的推荐默认样式表，请参阅 HTML 示例样式表。

如果这是您的情况，只需重置您的基本样式以删除块和表格元素的填充和边距。

# python - 将sql结果转换为列表python

> ID：14835852
> 
> 赞同：16
> 
> 时间：2013-02-12T15:24:10.853
> 
> 标签：python, mysql, sql

我是 python 的初学者。我想将 sql 结果转换为列表。这是我的代码：

```
cursor = connnect_db()

query = "SELECT * FROM `tbl`"

cursor.execute(query)

options = list()

for i,row in enumerate(cursor.fetchall()):
   options.append(row[i]) 
```

我的表中有 6 列，但这段代码没有创建 6 个元素列表。我在哪里做错了？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-12T15:25:47.830

如果你在 Python 中有一个可迭代对象，要创建一个列表，可以简单地调用[内置](http://docs.python.org/3/library/functions.html#func-list)[的`list()`](http://docs.python.org/3/library/functions.html#func-list)：

```
list(cursor.fetchall()) 
```

请注意，可迭代对象通常与列表一样有用，并且可能更有效，因为它可以是惰性的。

您的原始代码失败，因为它没有太大意义。您遍历行并枚举它们，因此您得到`(0, first_row), (1, second_row)`，等等... - 这意味着您正在构建每个第 n 行的第 n 个项目的列表，这根本不是您想要的。

这段代码显示了一些问题 - 首先，`list()`不带任何参数通常最好用空列表文字 ( `[]`) 替换，因为它更易于阅读。

接下来，您尝试按索引循环，这在 Python 中是个坏主意。循环值本身，而不是您用来获取值的索引。

另请注意，当您*确实*需要构建这样的值列表时，[列表推导](http://www.youtube.com/watch?v=pShL9DCSIUw)是最好的方法，而不是创建一个列表，然后附加到它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-11-06T11:27:29.923

```
cursor = connnect_db()

query = "SELECT * FROM `tbl`"

cursor.execute(query)

result = cursor.fetchall() //result = (1,2,3,) or  result =((1,3),(4,5),)

final_result = [list(i) for i in result] 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-02-05T18:56:13.367

当我使用 Sudhakar Ayyar 的答案时，结果是一个列表列表，而不是由 .fetchall() 创建的元组列表。这仍然不是我想要的。对他的代码稍作改动，我就可以得到一个简单的列表，其中包含来自 SQL 查询的所有数据：

```
cursor = connnect_db()

query = "SELECT * FROM `tbl`"

cursor.execute(query)

result = cursor.fetchall() //result = (1,2,3,) or  result =((1,3),(4,5),)

final_result = [i[0] for i in result] 
```

此外，最后两行可以合并为：

```
final_result = [i[0] for i in cursor.fetchall()] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-10T18:53:45.053

只需调用 list( cursor )，如下所示。

```
import pymysql

# Create the database connection.
# The connection parameters are host, port, user, password, and database.
# These parameters in this code are held in the app.config().
dump_conn = pymysql.connect(
    host=app.config[ 'DUMP_SQLALCHEMY_HOST' ],
    port=int( app.config[ 'DUMP_SQLALCHEMY_PORT' ] ),
    user=vault[ 'data' ][ 'username' ],
    passwd=vault[ 'data' ][ 'password' ],
    db=app.config[ 'DUMP_SQLALCHEMY_DB' ]
)

# Grab the query from a sql_queries helper file.
sql_query = query_transactions_for_csv()

# From the connection get a cursor.
dump_cursor = dump_conn.cursor()

# Handle the cursor.close() with a 'with' statement.
with dump_cursor as cursor:

    # Execute the query.
    cursor.execute( sql_query )

    # Use list( cursor ) to get a Python list.
    rows = list( cursor ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-18T09:51:18.890

如果您使用的是存储过程，您可以将结果转换为这样的列表。

```
 cursor = connection.cursor()
parameters = []
cursor.callproc('spProcedureName', parameters)
resultList =[r.fetchall() for r in cursor.stored_results()][0]
cursor.close() 
```

# asp.net - 位于用户控件内部的方法如何访问 aspx 页面中的数据？

> ID：14835853
> 
> 赞同：1
> 
> 时间：2013-02-12T15:24:16.167
> 
> 标签：asp.net, user-controls

我在同一个 aspx 页面上有一系列相同类型的用户控件。当每个用户控件加载时，我希望它检查 aspx 页面中的一些信息，例如，谁登录，它是哪个会话，以及儿子。

现在，我正在返回一个硬编码的值。**GetUserDBName()**位于用户控件内部

```
private string GetUserDBName()
{
   return "UserDBName";
} 
```

此方法如何访问位于包含用户控件的 aspx 页面中的数据？下面是在 aspx 页面中如何定义会话。

```
private string strDBName = string.Empty;

protected void Page_Load(object sender, EventArgs e)
{
  strDBName = Session["UserDBName"].Trim();
} 
```

感谢您的帮助

# 编辑

父页面的名称是**NewHireCheck.aspx**。用户控件的名称是**CheckListByDepartment.ascx**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:30:11.463

`Page`用户控件通过属性保持对容器页面的引用。

因此，在您的用户控制代码中，您可以执行以下操作：

```
var resultFromPageMethod=((yourPageType)this.Page).APageMethod(); 
```

# javascript - toLocaleDateString() 如何在 Chrome 中工作？

> ID：14835858
> 
> 赞同：4
> 
> 时间：2013-02-12T15:24:34.670
> 
> 标签：javascript, google-chrome, date

我了解 javascript 方法*toLocaleDateString()*使用了计算机设置。

让我们以[W3Schools 为例](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_tolocalestring)：当我更改计算机的日期和小时格式时，Firefox 或 IE 中的结果不同（如预期的那样），但 Chrome 仍然显示相同的日期格式，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:29:31.670

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toLocaleDateString)：

> *“确切的格式取决于平台、区域设置和用户设置。”*

和，

> *“你不应该在依赖特定格式或语言环境的环境中使用这种方法。”*

基本上，*“为什么”*是因为 Chrome 就是这样做的。如果您需要特定格式，则必须自己指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:35:07.773

来自[EMCAScript 5 标准](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.5.6)：

> 15.9.5.6 Date.prototype.toLocaleDateString()
> 
> 此函数返回一个字符串值。**String 的内容是依赖于实现的**，但旨在以一种方便的、人类可读的形式表示当前时区中 Date 的“日期”部分，该形式与宿主环境的当前语言环境的约定相对应。

Chrome 可以用它喜欢的任何方式将日期表示为区域设置日期字符串。该标准仅提供指南；它没有规定特定的格式。而且，事实上，结果不仅会在浏览器之间有所不同，而且*在 Chrome 本身内部*也会有所不同，具体取决于您的区域设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-14T06:37:14.853

看起来 Chrome 不使用 Windows 区域设置，而是使用它自己的设置。这些可通过设置 > 高级设置 > 语言获得。然而，日期格式没有明确定义，它是从语言+国家选择推断出来的，例如：

*   英语（美国）将日期格式设置为 mm/dd/yyyy
*   英语（英国）将日期格式设置为 dd/mm/yyyy

（对于任何试图更改这些的人，不要忘记 - 就像我一样 - 重新启动 Chrome 以使设置生效）

`toLocaleDateString()`回到最初的问题，只要想法是以人类用户理解的格式呈现信息，它似乎是合法的。但这将是一个理想的世界，每个用户都正确配置了他/她的浏览器。相反，Chrome 默认设置为英语（美国），只要人们让它保持为英语，并且需要一些谷歌搜索（大多数用户不会这样做）来更改这些设置。

`toLocaleDateString()`即使在不“依赖特定格式或语言环境”的情况下，使用它也会有风险。看起来任何跨浏览器 Web 应用程序的唯一“严肃”选项是管理自己的日期格式首选项（当然，每个用户......）

# mysql - SQL“where IN”查询2个表的多对多关系

> ID：14835861
> 
> 赞同：1
> 
> 时间：2013-02-12T15:24:38.933
> 
> 标签：mysql, sql, many-to-many

我可能会问一个相对简单的问题。但我找不到解决方案。这是一个 MANY TO MANY 的两个表的问题，因此它们之间还有第三个表。下面的架构：

```
CREATE TABLE `options` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(200) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

INSERT INTO `options` (`id`, `name`) VALUES
(1, 'something'),
(2, 'thing'),
(3, 'some option'),
(4, 'other thing'),
(5, 'vacuity'),
(6, 'etc');

CREATE TABLE `person` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(200) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

INSERT INTO `person` (`id`, `name`) VALUES
(1, 'ROBERT'),
(2, 'BOB'),
(3, 'FRANK'),
(4, 'JOHN'),
(5, 'PAULINE'),
(6, 'VERENA'),
(7, 'MARCEL'),
(8, 'PAULO'),
(9, 'SCHRODINGER');

CREATE TABLE `person_option_link` (
  `person_id` int(11) NOT NULL,
  `option_id` int(11) NOT NULL,
  UNIQUE KEY `person_id` (`person_id`,`option_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `person_option_link` (`person_id`, `option_id`) VALUES
(1, 1),
(2, 1),
(2, 2),
(3, 2),
(3, 3),
(3, 4),
(3, 5),
(4, 1),
(4, 3),
(4, 6),
(5, 3),
(5, 4),
(5, 5),
(6, 1),
(7, 2),
(8, 3),
(9, 4)
(5, 6); 
```

这个想法如下：我想检索所有链接到 option_id=1 和 option_id=3 的人。

预期的结果应该是一个人：约翰。

但是我尝试了类似的方法，但它不起作用，因为它还会返回拥有 1 或 3 的人：

```
SELECT * 
FROM person p
LEFT JOIN person_option_link l ON p.id = l.person_id
WHERE l.option_id IN ( 1, 3 ) 
```

在这种情况下，最佳做法是什么？

//////// POST EDITED: 我需要关注另一个重要的点 //////// 如果我们添加一个新的条件 NOT IN 呢？像：

```
SELECT * 
FROM person p
LEFT JOIN person_option_link l ON p.id = l.person_id
WHERE l.option_id IN ( 3, 4 ) 
AND l.option_id NOT IN ( 6 ) 
```

在这种情况下，结果应该是 FRANK，因为同时拥有 3 和 4 的 PAULINE 拥有选项 6，我们不希望这样。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:26:58.593

这是一个`Relational Division`问题。

```
SELECT p.id, p.name
FROM   person p
       INNER  JOIN person_option_link l 
          ON p.id = l.person_id
WHERE  l.option_id IN ( 1, 3 ) 
GROUP  BY p.id, p.name
HAVING COUNT(*) = 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/22ed9/1)

`option_id`如果没有对每个强制执行唯一约束`id`，则需要一个`DISTINCT`关键字来过滤唯一`option_ID`

```
SELECT p.id, p.name
FROM   person p
       INNER  JOIN person_option_link l 
          ON p.id = l.person_id
WHERE  l.option_id IN ( 1, 3 ) 
GROUP  BY p.id, p.name
HAVING COUNT(DISTINCT l.option_id) = 2 
```

*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T15:27:13.573

使用`GROUP BY`和`COUNT`：

```
SELECT p.id, p.name
FROM person p
LEFT JOIN person_option_link l ON p.id = l.person_id
WHERE l.option_id IN ( 1, 3 ) 
GROUP BY p.id, p.name
HAVING COUNT(Distinct l.option_id) = 2 
```

我更喜欢使用 COUNT DISTINCT 以防您多次使用相同的选项 id。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:42:21.470

它可能不是最好的选择，但您可以对`person_option_link`表使用“双重连接”：

```
SELECT * 
  FROM person AS p
  JOIN person_option_link AS l1 ON p.id = l1.person_id AND l1.option_id = 1
  JOIN person_option_link AS l2 ON p.id = l2.person_id AND l2.option_id = 3 
```

这可确保给定用户同时存在选项 ID 为 1 的行和选项 ID 为 3 的行。

GROUP BY 替代方案当然有效；它们也可能更快（但您需要仔细检查查询计划以确定）。GROUP BY 替代方案可以更好地扩展以处理更多值：例如，选项 ID 为 2、3、5、7、11、13、17、19 的用户列表非常适合此变体，但 GROUP BY 变体在没有结构的情况下工作对查询的更改。您还可以使用 GROUP BY 变体来选择具有 8 个值中的至少 4 个的用户，这在使用此技术时基本上是不可行的。

但是，使用 GROUP BY 确实需要稍微重述（或重新考虑）查询，以便：

*   如何在集合 {1, 3} 中选择具有 2 个选项 ID 的人？
*   如何在集合 {2、3、5、7、11、13、17、19} 中选择具有 8 个选项 ID 的人？
*   如何在集合 {2, 3, 5, 7, 11, 13, 17, 19} 中选择具有至少 4 个选项 ID 的人？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T19:33:10.047

对于问题的“没有这些 id”部分，只需添加一个 WHERE 子句：

```
WHERE person_id NOT IN 
(
SELECT person_id
FROM person_option_link
WHERE option_id = 4
) 
```

# c# - 如何将存储在字符串中的数字转换为二进制格式？

> ID：14835862
> 
> 赞同：-3
> 
> 时间：2013-02-12T15:24:41.983
> 
> 标签：c#

我有一个数字存储在字符串中，因为它是一个长数字，我想将其转换为二进制格式。

```
string number = "25274132531129322906392322409257377862778880" 
```

我想得到：

```
string binresult; 
```

具有价值：

```
 0000000000000001001000100010001000000000000000100000001011101000000000000000000011110000000000000000110100000000000000100000000000000000000000000000000000000000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:32:18.807

您实际上可以使用 Dan Byström 对[How to convert a gi-normous integer (in string format) to hex format 的回答？(C#)](https://stackoverflow.com/questions/2652760/)，就像评论中建议的 Michael Edenfeld 一样。它会让你从你的大数字字符串变成十六进制。为了您的方便，我将重新发布他的代码：

```
var s = "25274132531129322906392322409257377862778880";
var result = new List<byte>();
result.Add(0);
foreach (char c in s)
{
    int val = (int)(c - '0');
    for (int i = 0 ; i < result.Count ; i++)
    {
        int digit = result[i] * 10 + val;
        result[i] = (byte)(digit & 0x0F);
        val = digit >> 4;
    }
    if (val != 0)
        result.Add((byte)val);
}

var hex = "";
foreach (byte b in result)
    hex = "0123456789ABCDEF"[b] + hex; 
```

我不会自称理解他是如何想出这个的，但我已经用一些我知道十六进制值的数字对其进行了测试，它似乎有效。我很想听听他的解释。

现在，您想要二进制的答案，幸运的是，从十六进制转换为二进制是生活中更容易的事情之一。每个十六进制值都直接转换为其 4 位二进制对应值（0x7 = 0111、0xA = 1010 等）。您可以编写一个循环来逐个字符地执行此转换，但是 Guffa 对[C# how convert large HEX string to binary](https://stackoverflow.com/questions/6617284/c-sharp-how-convert-large-hex-string-to-binary)的回答提供了这个方便的花花公子 Linq 语句来执行相同的操作：

```
string binaryString = string.Join(string.Empty,
hex.Select(c => Convert.ToString(Convert.ToInt32(
c.ToString(), 16), 2).PadLeft(4, '0'))); 
```

一起运行所有这些给我：

> 011100010101010100000000000000000000000011001001001001101011111111111111111111111111111111111111110101000100010000000000000000000000111111111111111111111111111111111111111111111919太验值

为你的号码。我不知道你打算如何验证它，但如果 Dan 的十六进制翻译是正确的，那么那个二进制字符串肯定是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:43:56.520

你可以试试这个：

```
string number = "25274132531129322906392322409257377862778880";
char[] strArr = number.ToCharArray();
StringBuilder sb = new StringBuilder();
foreach (char chr in strArr)
{
    sb.Append(Convert.ToString((int)Char.GetNumericValue(chr), 2));
}
string binresult = sb.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:45:11.157

System.Convert 可以帮助您处理这样的点点滴滴。见下文。

```
string decString = "12345";
int integer = Convert.ToInt32(decString);
string binString = Convert.ToString(integer, 2); 
```

# postgresql - Postgres 匹配运算符@@

> ID：14835866
> 
> 赞同：0
> 
> 时间：2013-02-12T15:24:50.480
> 
> 标签：postgresql, pattern-matching

我试图弄清楚 @@ 运算符在 postgres 中究竟是如何工作的。

我有两个疑问：

```
SELECT description FROM product WHERE description @@ '%apple%'
SELECT description FROM product WHERE description @@ 'apple' 
```

这两个查询返回相同数量的行。显然 postgres 从查询中删除所有非字母数字字符。真的是这样吗？

我也可以`@@ '@apple..,,.'`，我仍然得到相同数量的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:37:33.997

@@ 运算符是 TSearch2 全文搜索引擎的一部分。默认情况下，它确实会删除此类字符。TSearch2 的主题**太大**了，无法在此处全部包含在内，因此我将向您指出[文档](http://www.postgresql.org/docs/current/interactive/textsearch.html)。

# linq - 简单的 linq 选择查询未返回正确的结果

> ID：14835868
> 
> 赞同：1
> 
> 时间：2013-02-12T15:24:58.403
> 
> 标签：linq, select

当我在 SQL Server Management Studio 中运行以下查询时，我得到 132 行数据。这是对的。

```
select *
from cyc.contac con 
where (con.note_turn is null) and 
      (con.cont_type <> '_') and 
      (con.cont_code <> 'D') and 
      (con.cont_type <> 'Q') 
```

当我从我的代码中运行以下 Linq 查询时，我得到了超过 11000 条记录。这是不正确的。我想知道为什么我的 linq 查询不受 where 子句中的约束。

```
var query = from contac in context.CONTACs
            orderby contac.ID
            where (contac.note_turn == null) && 
                  (contac.cont_type != "_") && 
                  (contac.cont_code != "D") && 
                  (contac.cont_type != "Q")
            select contac; 
```

# eclipse - Eclipse 发出错误信号，但代码可以编译

> ID：14835869
> 
> 赞同：5
> 
> 时间：2013-02-12T15:25:04.010
> 
> 标签：eclipse, vector, syntax-error

我正在用 ecipe 编写一些 C++ 代码。

我对矢量对象有一种奇怪的行为。

例如，当我使用该方法`resize`时，Eclipse 返回以下错误：

```
#include "vector"

   ...

   vector<int> a;
   a.resize(5);

   Error: Invalid arguments candidates are: void resize(?, int). 
```

但是代码是从命令行编译的。

如何解决日食这种挑剔的行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T18:09:20.173

经过一段时间的搜索和修改设置，我想我找到了答案。为了让索引器正确解析代码，我必须：

1.  右键单击项目-> 属性
2.  转到 C/C++ 常规 -> 预处理器包括路径、宏等。
3.  单击提供程序选项卡
4.  检查**CDT GCC 内置编译器设置**选项
5.  申请
6.  重建索引

# asp.net - 在 ASP.NET 中的 AjaxFileUpload UploadComplete 事件上重新加载 GridView 或中继器

> ID：14835872
> 
> 赞同：3
> 
> 时间：2013-02-12T15:25:23.560
> 
> 标签：asp.net, ajax, file-upload

嗨，在 AjaxFileUpload UploadComplete 事件之后无论如何都要更新（Gridview 或 Repeater 数据）。我想要做的是使用 AjaxFileUpload 上传多张图片，一旦文件上传，它应该将这些图片显示到 GridView 或 Repeater 控件中。

除非触发按钮单击事件，否则我无法执行此操作。

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T17:00:48.750

将隐藏按钮放在表单上并将此功能附加到`OnClientUploadComplete`扩展器的事件处理程序

```
<asp:Button runat="server" ID="HiddenButton" OnClick="RefreshGridView" style="display:none;" />

function uploadComplete(sender, args) {
    for (var index = 0; index < sender._filesInQueue.length; ++index) {
        if (!sender._filesInQueue[index]._isUploaded) {
            return;
        }
    }
    __doPostBack("<%= HiddenButton.UniqueID %>", "");
}) 
```

然后，单击此按钮刷新您的 GridView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T19:01:41.560

此代码检查上传的文件，创建包含文件信息的电子邮件，通过链接向文件的目标用户发送电子邮件。它还将所有信息存储到数据库中。上传页面上有一个网格视图，列出了所有已上传的文件。它在文件加载后更新。我认为你可以从中得到你需要的东西。

```
Partial Class upload_Default
Inherits System.Web.UI.Page

Protected Sub UploadButton2_Click(sender As Object, e As EventArgs)
    Dim fileGuid As String
    fileGuid = Guid.NewGuid.ToString

    If AsyncFileUpload1.HasFile Then
        If AsyncFileUpload1.FileContent.Length < 20971500 Then
            Try

                Dim fileSizeB As Integer = AsyncFileUpload1.PostedFile.ContentLength
                Dim fileSize = fileSizeB / 1024

                Dim filename As String = Path.GetFileName(AsyncFileUpload1.FileName)
                Dim fileNameTwo As String = Trim(fileGuid) + Trim(filename)

                Dim ExistPdfFilenamOPO As String
                ExistPdfFilenamOPO = Server.MapPath("~/uploads/files/") & filename

                If File.Exists(ExistPdfFilenamOPO) Then
                    Label2.Text = "File is already there"
                Else

                    Dim saveDir As String = "\Uploads\files\"
                    Dim appPath As String = Request.PhysicalApplicationPath
                    Dim savePath As String = appPath + saveDir + _
                    Server.HtmlEncode(AsyncFileUpload1.FileName)
                    AsyncFileUpload1.SaveAs(savePath)

                    UploadStatusLabel2.Text = "Upload status: File uploaded."
                    Label2.Text = ""

                    ' Email
                    Dim sr As New StreamReader(appPath & "EmailTemplates/FileUpload.htm")
                    Dim FName As String = TextBoxFName.Text
                    Dim LName As String = TextBoxLName.Text
                    Dim Email As String = TextBoxEmail.Text
                    Dim fullPath As String
                    fullPath = "https://website.com/uploads/default.aspx?fileGuid=" + fileGuid

                    Dim message As New MailMessage()
                    message.IsBodyHtml = True
                    message.From = New MailAddress("Your email")
                    message.[To].Add(New MailAddress(Email))

                    message.Subject = "The file you requested from SRTR"
                    message.Body = sr.ReadToEnd()
                    sr.Close()

                    message.Body = message.Body.Replace("<%FName%>", FName)
                    message.Body = message.Body.Replace("<%LName%>", LName)
                    message.Body = message.Body.Replace("<%Email%>", Email)
                    message.Body = message.Body.Replace("<%FileName%>", filename)
                    message.Body = message.Body.Replace("<%VerificationUrl%>", fullPath)

                    Dim client As New SmtpClient()
                    client.Send(message)

                    'Insert in to t_UploadFiles
                    Dim datenow As Date = System.DateTime.Now()
                    Dim ExDate As Date = datenow.AddDays(15)
                    Dim Downloaded As Boolean = False

                    Dim connectionString As String = ConfigurationManager.ConnectionStrings("ConnectionString").ConnectionString
                    Dim updateSql As String = "INSERT t_UploadFiles (FileGuid, FileName, FileSize, FName, LName, Email, UploadDate, ExDate, Downloaded) SELECT @FileGuid, @FileName, @FileSize, @FName, @LName, @Email, @UploadDate, @ExDate, @Downloaded"
                    Using myConnection As New SqlConnection(connectionString)
                        myConnection.Open()
                        Dim myCommand As New SqlCommand(updateSql, myConnection)
                        myCommand.Parameters.AddWithValue("@FileGuid", fileGuid.Trim())
                        myCommand.Parameters.AddWithValue("@FileName", filename.Trim())
                        myCommand.Parameters.AddWithValue("@FileSize", fileSize)
                        myCommand.Parameters.AddWithValue("@FName", FName.Trim())
                        myCommand.Parameters.AddWithValue("@LName", LName.Trim())
                        myCommand.Parameters.AddWithValue("@Email", Email)
                        myCommand.Parameters.AddWithValue("@UploadDate", datenow)
                        myCommand.Parameters.AddWithValue("@ExDate", ExDate)
                        myCommand.Parameters.AddWithValue("@Downloaded", Downloaded)

                        myCommand.ExecuteNonQuery()
                        myConnection.Close()
                    End Using
                    articleListXX.DataBind()

                End If

            Catch ex As Exception
                UploadStatusLabel2.Text = "Upload status: The file could not be uploaded.<br/>The following error occured: " + ex.Message
            End Try
        Else
            UploadStatusLabel2.Text = "File is too large."
        End If
    Else
        UploadStatusLabel2.Text = "You did not specify a file to upload."
    End If

End Sub

End Class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T19:40:08.070

好的，谢谢你们的贡献，很抱歉让我的查询有点不清楚。我终于弄明白了，但这只是因为你的想法。这是我的代码。这同样适用于网格视图。主要目的是使用AjaxFileUpload 控件上传图片并在`OnUploadComplete="AjaxFileUpload1_UploadComplete"`事件中调用创建缩略图的方法。创建缩略图后，将`populatePic()`调用该方法在 javascript _doPostBack() 方法的帮助下将缩略图图像填充到转发器控件中，而无需用户触发按钮。

```
<script type="text/javascript">
        function showUploadedPic()
        {           
            __doPostBack('btnAdd', null);
        }
</script>

<cc1:AjaxFileUpload ID="AjaxFileUpload1" runat="server" OnUploadComplete="AjaxFileUpload1_UploadComplete" ThrobberID="myThrobber" MaximumNumberOfFiles="10" AllowedFileTypes="jpg,jpeg" OnClientUploadComplete="showUploadedPic" />

<asp:UpdatePanel ID="UpdatePanel1" runat="server">           
                <asp:Repeater ID="Repeater1" runat="server">
                    <ItemTemplate>
                        <asp:Image ID="Image1" runat="server" ImageUrl="<%# Container.DataItem %>" height="100"/>
                    </ItemTemplate> 
                </asp:Repeater>                
            </ContentTemplate>
            <Triggers>                
                <asp:AsyncPostBackTrigger ControlID="btnAdd" EventName="Click" />
            </Triggers>
        </asp:UpdatePanel> 
```

**代码背后**

```
protected void btnAdd_Click(object sender, EventArgs e)
    {
        populatePic();         
    }

protected void AjaxFileUpload1_UploadComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
    {
        string filePath = Server.MapPath("~/files/") + e.FileName;
        AjaxFileUpload1.SaveAs(filePath);
        createThumbnail();         
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-14T10:29:05.730

下面的代码经过测试并且可以工作。

```
<asp:Button runat="server" ID="HiddenButtonFileUpload" 
```

OnClick="RefreshGridView" style="display:none;" />

```
<ajax:AjaxFileUpload ID="AjaxFileUpload11" runat="server" 
MaximumNumberOfFiles="3" AllowedFileTypes="txt,xls,xlsx,doc,docx,pdf" 
Width="400px" 
                                    OnUploadComplete="OnUploadComplete" 
OnClientUploadStart="UploadStart" OnClientUploadCompleteAll="UploadComplete" 
ClearFileListAfterUpload="true" />

    function UploadComplete() {
        unblock();
        __doPostBack("<%= HiddenButtonFileUpload.UniqueID %>", "");
    }

 Code Behind : 

    protected void RefreshGridView(object sender, EventArgs e)
    {
        BindForm(); // refresh your gridview
    } 
```

# javascript - Jquery 验证具有相似名称的元素

> ID：14835874
> 
> 赞同：0
> 
> 时间：2013-02-12T15:25:34.353
> 
> 标签：javascript, jquery

嗨，我正在尝试验证所有`files`具有相似名称的人

这些是我的输入元素

```
<form id="MyForm" onsubmit="return validate();">
<input type="file" name="File1"  />
<input type="file" name="File2" />
<input type="file" name="File3" />
</form> 
```

我尝试的是

```
 function validate()
  {
   if($('input[name ^= "File"]').val()=='')
   {
     alert("The field is empty");
     return false;
   }
   } 
```

这可能吗 ？或需要做喜欢`$('input[type=file]').each(function () { ....}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:32:08.120

您尝试过的方法不起作用，因为 val() 方法返回匹配元素集中**第一个元素的值。**换句话说，它只会告诉你 File1 是否为空。您将需要遍历每个元素并检查是否有空值，或者使用简单的 if 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:32:10.107

您拥有的脚本将检查文件的第一个输入类型的条件。您需要使用一些循环结构来涉及所有三个字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:31:35.400

这将起作用

```
$('input[name^=file]').each(function() {
    if($(this).val() === '')
    {
        alert('The field is empty');
        return false;
}); 
```

这是因为`$('input[name^=file]')`将返回多个元素，因此您需要遍历它们以检查单个元素

# iphone - 在 Safari ios 中打开保存在应用程序中的 .mobileconfig 文件

> ID：14835878
> 
> 赞同：7
> 
> 时间：2013-02-12T15:25:49.553
> 
> 标签：iphone, ios, file, configuration, installation

我正在尝试在 safari 中打开一个移动配置文件 (mobileconfig) 来安装它，但没有任何效果。我使用 URL 方案：

```
NSURL *finalURL = [NSURL URLWithString:[NSString stringWithFormat:@"myAppURLScheme://%@",fileName]];
BOOL canOpen = [[UIApplication sharedApplication] openURL:finalURL];
   if (canOpen) NSLog(@"can open");
   else NSLog(@"can't open"); 
```

日志 -->`can open`

我尝试将所有路径（文件在`Documents`文件夹中）设置为文件而不是文件名，什么都没有。我该怎么做。?

**Edit1**：这个[应用程序](https://itunes.apple.com/fr/app/cloud-wifi/id577202774?mt=8)做同样的事情（打开 safari 来安装配置）

**Edit2**：我认为我必须搜索将文件（任何）发送到 safari 的方式，safari 会知道如何处理它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-17T10:56:07.547

1.  授权后台任务

.h 文件：

```
UIBackgroundTaskIdentifier bgTask; 
```

.m 文件：在`applicationDidEnterBackground`添加一个新的后台任务：

```
bgTask = [application beginBackgroundTaskWithExpirationHandler: ^{
        dispatch_async(dispatch_get_main_queue(), ^{
            [application endBackgroundTask:self->bgTask];
            self->bgTask = UIBackgroundTaskInvalid;
        });
    }]; 
```

1.  将[CocoaHTTPServer](https://github.com/robbiehanson/CocoaHTTPServer)添加到您的项目中

2.  运行服务器并打开 .mobileconfig 文件：

    ```
     RoutingHTTPServer *httpServer = [[RoutingHTTPServer alloc] init];
        [httpServer setType:@"_http._tcp."];
        [httpServer setPort:12345];
        [httpServer setDefaultHeader:@"Content-Type" value:@"application/x-apple-aspen-config"];
        [httpServer setDocumentRoot:[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]];

        if([httpServer start:nil])
        {
            [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://localhost:12345/myprofile.mobileconfig"]];
        } 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T22:26:26.807

移动配置文件位于**应用程序的 sandbox**中。Safari 无权访问它。的返回值`[UIApplication openURL]`仅指示是否有应用程序可以理解该**url 方案**。假设您将**myAppURLScheme**作为**uri 处理程序**添加到**info.plist**文件，在我看来，您好像正在将该 url 发送给自己。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T22:14:22.127

我认为您可以使用数据 URI 来编码和启动 mobileconfig。（我这里没有IOS设备，所以我现在无法测试_

您可以使用[http://dopiaza.org/tools/datauri/index.php](http://dopiaza.org/tools/datauri/index.php)对您的个人资料进行编码（不要忘记添加 mime 类型：application/x-apple-aspen-config）

然后你可以打开：

```
[[UIApplication sharedApplication] openURL:dataURLGenerated]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T13:17:20.187

也没有运气，但是如果其他人可以使用此信息，我还是会发布此信息。我尝试通过 Mobile Safari 支持的 url 打开字符串`data:`，但`openURL:`遗憾的是不支持。

```
NSString *urlHeader = @"data:application/x-apple-aspen-config;charset=utf-8,";
NSString *mobileConf = @"<?xmlversion=\"1.0\"encoding=\"UTF-8\"standalone=\"yes\"?>"
    "<!DOCTYPEplistPUBLIC\"-//Apple//DTDPLIST1.0//EN\"\"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">"
    "<plistversion=\"1.0\"><dict><key>PayloadUUID</key><string>A0670934-C558-42E1-9E80-9B8E079E9AB2</string><key>PayloadDisplayName</key><string>EnableTethering</string><key>PayloadDescription</key><string>EnablesTethering</string><key>PayloadOrganization</key><string>de.iphone-notes</string><key>PayloadVersion</key><integer>1</integer><key>PayloadIdentifier</key><string>de.iphone-notes.etisalat</string><key>PayloadType</key><string>Configuration</string><key>PayloadContent</key><array><dict><key>PayloadUUID</key><string>C1A41907-0CD9-4DC9-BAF1-A04A73B7E296</string><key>PayloadDisplayName</key><string>AdvancedSettings</string><key>PayloadDescription</key><string>ProvidescustomizationofcarrierAccessPointName.</string><key>PayloadOrganization</key><string>de.sendowski</string><key>PayloadVersion</key><integer>1</integer><key>PayloadIdentifier</key><string>de.iphone-notes.etisalat.apn</string><key>PayloadContent</key><array><dict><key>DefaultsDomainName</key><string>com.apple.managedCarrier</string><key>DefaultsData</key><dict><key>apns</key><array><dict><key>apn</key><string>Etisalat.ae</string><key>username</key><string></string><key>password</key><string></string><key>type-mask</key><integer>-2</integer></dict></array></dict></dict></array><key>PayloadType</key><string>com.apple.apn.managed</string></dict></array></dict></plist>";

mobileConf = [mobileConf stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
NSURL *finalURL = [NSURL URLWithString:[urlHeader stringByAppendingString:mobileConf]];

BOOL canOpen = [[UIApplication sharedApplication] openURL:finalURL];
if (canOpen) NSLog(@"can open");
else NSLog(@"can't open"); 
```

对于测试，您可以在此`http://`之前`data:`添加它至少会在 Safari 中打开，您可以删除前缀来尝试它。也许一些 javascript 注入来删除前缀会起作用；我不知道。

# java - 运行此脚本时 Apache Ant 冻结

> ID：14835882
> 
> 赞同：0
> 
> 时间：2013-02-12T15:25:55.130
> 
> 标签：java, javascript, swing, ant

我想显示来自 ant 脚本的密码输入对话框。这是我的**build.xml**代码：

```
<target name="sign" unless="isUpToDate">
    <script language="javascript">
        importClass(javax.swing.JPasswordField);
        importClass(javax.swing.JOptionPane);
        var pf = new JPasswordField();
        var okCxl = JOptionPane.showConfirmDialog(null, pf, "Enter Password", JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);

        if (okCxl == JOptionPane.OK_OPTION) {
            project.setNewProperty("keypass", pf.getPassword());
        } else {
            throw "Password is required";
        }
    </script>
    <echo message="${keypass}"></echo>
    ...
</target> 
```

此代码永远挂起。怎么了？

**更新：** 我正在 Mac OS X 10.8.2 和 Oracle JDK 7u13 中进行测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:59:28.603

As an alternative, put the `storepass` required by `<signjar />` in an invisible file, e.g. `.deployconf`, having user-only access: e.g. `400` or `600`. Load the password in `ant`, and use as required:

```
<loadfile srcfile="${user.home}/.deployconf" property="deployconf"/> 
```

This works well with `<signjar />`, although some effort may be required to keep linefeeds out of `.deployconf`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:46:53.740

它在 Eclipse Juno Release Build id: 20120614-1722 和 Windows XP 下的 JDK 7 中运行良好：

```
Buildfile: D:\...\build.xml
sign:
     [echo] [C@ea1569
BUILD SUCCESSFUL
Total time: 7 seconds 
```

它在 Run.bat 中运行良好：

```
D:\>call d:\ant\bin\ant
Buildfile: D:\...\build.xml

sign:
     [echo] [C@12a642

BUILD SUCCESSFUL
Total time: 8 seconds 
```

但是[getPassword()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JPasswordField.html#getPassword%28%29)返回 char[] 而不是 String，这是因为 echo 不是人类可读的。

# android - android如何在Expandablelistview的页脚中心制作一个按钮

> ID：14835892
> 
> 赞同：2
> 
> 时间：2013-02-12T15:26:41.650
> 
> 标签：android, android-layout, android-xml

因为没有内置页脚`ExpandableListView`，所以我自己构建了它，我在上面放了一个按钮。我试图在该页脚的中心制作这个按钮。

### 页脚 all_addresses_group_footer.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/b_all_addresses_group_footer_edit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_margin="0dip"
        android:text="@string/b_edit" />

</LinearLayout> 
```

上面代码中的按钮位于中间，但是当我将它添加到 ExpandableListView 组时，它停留在左侧。

### 以编程方式添加页脚

```
@Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        AllAddressChild child = (AllAddressChild) getChild(groupPosition,
                childPosition);
        if (childPosition == groups.get(groupPosition).getChilds().size() - 1) {
            // if (convertView == null) {
            LayoutInflater infalInflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = infalInflater.inflate(
                    R.layout.all_addresses_group_footer, null);
            // }
            Button b_edit = (Button) convertView
                    .findViewById(R.id.b_all_addresses_group_footer_edit);
            b_edit.setText("Edit");
            b_edit.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent intent = new Intent(context, EditAddress.class);
                    ((Activity) context).startActivityForResult(intent, 104);
                }
            });
            convertView.setPadding(0, 0, 0, 20);
            return convertView;
        } else { another code 
```

在上面的代码中，`convertView`是包含页脚的视图。

在`TRUE`if 语句中添加页脚

请问我做错了什么？以及如何在中心制作按钮？

谢谢

### 发表评论后

![在此处输入图像描述](../Images/b52a69a6cb054220ebed85cab0304b6f.png)

### 回答后

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginBottom="25dip"
        android:layout_marginTop="20dip"
        android:text="@string/tv_allAddresses"
        android:textColor="#025f7c"
        android:textSize="25dip"
        android:typeface="serif" />

    <ExpandableListView
        android:id="@+id/elv_all_addresses_addresses"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:cacheColorHint="#00000000"
        android:padding="10dip" >
    </ExpandableListView>

    <Button
        android:id="@+id/b_all_addresses_addAddress"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:background="@drawable/button_selector"
        android:paddingTop="20dip"
        android:text="@string/b_addAddress"
        android:paddingRight="5dip"
        android:paddingLeft="5dip"
        android:textColor="#FFFFFF" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:36:10.097

我自己找到了解决方案，在利用`hierarchyviewer`工具后，解决方案是将可扩展列表视图的宽度设置为`fill parent`. ![在此处输入图像描述](../Images/1417e2382bfd4a95eab902cddb137017.png)

```
<ExpandableListView
        android:id="@+id/elv_all_addresses_addresses"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:cacheColorHint="#00000000"
        android:padding="10dip" >
    </ExpandableListView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:54:05.130

您需要`LayoutParams`为您的视图设置：

```
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
   LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT);
convertView.setLayoutParams(layoutParams); 
```

# r - 如何从 R 中的 koRpus 对象中提取内容？

> ID：14835894
> 
> 赞同：1
> 
> 时间：2013-02-12T15:26:47.627
> 
> 标签：r, nlp, s4, tm

我正在使用 tm 包，并希望使用 R 获取文档的 Flesch-Kincaid 分数。我发现 koRpus 包有很多指标，包括阅读水平，并开始使用它。但是，返回的对象似乎是一个非常复杂的 s4 对象，我不明白如何解析。

因此，我将其应用于我的语料库：

```
txt <- system.file("texts", "txt", package = "tm") 
(d <- Corpus(DirSource(txt, encoding = "UTF-8"), readerControl = list(language = "lat")))

f <- function(x) tokenize(x, format="obj", lang='en') 
g <- function(x) flesch.kincaid(x)
x <- foreach(i=1:5) %dopar% g(f(d[[i]])) 
```

x 是应用于 Ovid 的 flesch.kincaid 的向量。

```
> x[[1]]

Flesch-Kincaid Grade Level
  Parameters: default 
       Grade: 13.62 
         Age: 18.62 

Text language: en 
```

我怎样才能得到返回值grade=13.62，age=18.62？str(x) 太大了，很难解析，即：

```
> str(x[[1]])
Formal class 'kRp.readability' [package "koRpus"] with 49 slots
  ..@ hyphen                   :Formal class 'kRp.hyphen' [package "koRpus"] with 3 slots
  .. .. ..@ lang  : chr "en"
  .. .. ..@ desc  :List of 5
  .. .. .. ..$ num.syll         : num 196
  .. .. .. ..$ syll.distrib     : num [1:6, 1:4] 25 25 65 27.8 27.8 ...
  .. .. .. .. ..- attr(*, "dimnames")=List of 2
  .. .. .. .. .. ..$ : chr [1:6] "num" "cum.sum" "cum.inv" "pct" ...
  .. .. .. .. .. ..$ : chr [1:4] "1" "2" "3" "4"
  .. .. .. ..$ syll.uniq.distrib: num [1:6, 1:4] 15 15 61 19.7 19.7 ...
  .. .. .. .. ..- attr(*, "dimnames")=List of 2
  .. .. .. .. .. ..$ : chr [1:6] "num" "cum.sum" "cum.inv" "pct" ...
  .. .. .. .. .. ..$ : chr [1:4] "1" "2" "3" "4"
  .. .. .. ..$ avg.syll.word    : num 2.18
  .. .. .. ..$ syll.per100      : num 218
  .. .. ..@ hyphen:'data.frame':    90 obs. of  2 variables:
  .. .. .. ..$ syll: num [1:90] 1 1 1 1 2 3 1 2 3 1 ...
  .. .. .. ..$ word: chr [1:90] "Si" "quis" "in" "hoc" ...
  ..@ param                    :List of 1
  .. ..$ Flesch.Kincaid: Named num [1:3] 0.39 11.8 15.59
  .. .. ..- attr(*, "names")= chr [1:3] "asl" "asw" "const"
  ..@ ARI                      :List of 1
  .. ..$ : logi NA
  ..@ ARI.NRI                  :List of 1
  .. ..$ : logi NA
  ..@ ARI.simple               :List of 1
  .. ..$ : logi NA
  ..@ Bormuth                  :List of 1
  .. ..$ : logi NA
  ..@ Coleman                  :List of 1
  .. ..$ : logi NA
  ..@ Coleman.Liau             :List of 1
  .. ..$ : logi NA
  ..@ Dale.Chall               :List of 1
  .. ..$ : logi NA
  ..@ Dale.Chall.PSK           :List of 1
  .. ..$ : logi NA
  ..@ Dale.Chall.old           :List of 1
  .. ..$ : logi NA
  ..@ Danielson.Bryan          :List of 1
  .. ..$ : logi NA
  ..@ Dickes.Steiwer           :List of 1
  .. ..$ : logi NA
  ..@ DRP                      :List of 1
  .. ..$ : logi NA
  ..@ ELF                      :List of 1
  .. ..$ : logi NA
  ..@ Flesch                   :List of 1
  .. ..$ : logi NA
  ..@ Flesch.PSK               :List of 1
  .. ..$ : logi NA
  ..@ Flesch.de                :List of 1
  .. ..$ : logi NA
  ..@ Flesch.es                :List of 1
  .. ..$ : logi NA
  ..@ Flesch.fr                :List of 1
  .. ..$ : logi NA
  ..@ Flesch.nl                :List of 1
  .. ..$ : logi NA
  ..@ Flesch.Kincaid           :List of 3
  .. ..$ flavour: chr "default"
  .. ..$ grade  : num 13.6
  .. ..$ age    : num 18.6
  ..@ Farr.Jenkins.Paterson    :List of 1
  .. ..$ : logi NA
  ..@ Farr.Jenkins.Paterson.PSK:List of 1
  .. ..$ : logi NA
  ..@ FOG                      :List of 1
  .. ..$ : logi NA
  ..@ FOG.PSK                  :List of 1
  .. ..$ : logi NA
  ..@ FOG.NRI                  :List of 1
  .. ..$ : logi NA
  ..@ FORCAST                  :List of 1
  .. ..$ : logi NA
  ..@ FORCAST.RGL              :List of 1
  .. ..$ : logi NA
  ..@ Fucks                    :List of 1
  .. ..$ : logi NA
  ..@ Harris.Jacobson          :List of 1
  .. ..$ : logi NA
  ..@ Linsear.Write            :List of 1
  .. ..$ : logi NA
  ..@ LIX                      :List of 1
  .. ..$ : logi NA
  ..@ RIX                      :List of 1
  .. ..$ : logi NA
  ..@ SMOG                     :List of 1
  .. ..$ : logi NA
  ..@ SMOG.de                  :List of 1
  .. ..$ : logi NA
  ..@ SMOG.C                   :List of 1
  .. ..$ : logi NA
  ..@ SMOG.simple              :List of 1
  .. ..$ : logi NA
  ..@ Spache                   :List of 1
  .. ..$ : logi NA
  ..@ Spache.old               :List of 1
  .. ..$ : logi NA
  ..@ Strain                   :List of 1
  .. ..$ : logi NA
  ..@ Traenkle.Bailer          :List of 1
  .. ..$ : logi NA
  ..@ TRI                      :List of 1
  .. ..$ : logi NA
  ..@ Wheeler.Smith            :List of 1
  .. ..$ : logi NA
  ..@ Wheeler.Smith.de         :List of 1
  .. ..$ : logi NA
  ..@ Wiener.STF               :List of 1
  .. ..$ : logi NA
  ..@ lang                     : chr "en"
  ..@ desc                     :List of 26
  .. ..$ sentences          : int 10
  .. ..$ words              : int 90
  .. ..$ letters            : Named num [1:12] 492 0 8 9 14 18 14 9 10 6 ...
  .. .. ..- attr(*, "names")= chr [1:12] "all" "l1" "l2" "l3" ...
  .. ..$ all.chars          : int 692
  .. ..$ syllables          : Named num [1:5] 196 25 32 25 8
  .. .. ..- attr(*, "names")= chr [1:5] "all" "s1" "s2" "s3" ...
  .. ..$ lttr.distrib       : num [1:6, 1:11] 0 0 90 0 0 ...
  .. .. ..- attr(*, "dimnames")=List of 2
  .. .. .. ..$ : chr [1:6] "num" "cum.sum" "cum.inv" "pct" ...
  .. .. .. ..$ : chr [1:11] "1" "2" "3" "4" ...
  .. ..$ syll.distrib       : num [1:6, 1:4] 25 25 65 27.8 27.8 ...
  .. .. ..- attr(*, "dimnames")=List of 2
  .. .. .. ..$ : chr [1:6] "num" "cum.sum" "cum.inv" "pct" ...
  .. .. .. ..$ : chr [1:4] "1" "2" "3" "4"
  .. ..$ syll.uniq.distrib  : num [1:6, 1:4] 15 15 61 19.7 19.7 ...
  .. .. ..- attr(*, "dimnames")=List of 2
  .. .. .. ..$ : chr [1:6] "num" "cum.sum" "cum.inv" "pct" ...
  .. .. .. ..$ : chr [1:4] "1" "2" "3" "4"
  .. ..$ punct              : int 17
  .. ..$ conjunctions       : int 0
  .. ..$ prepositions       : int 0
  .. ..$ pronouns           : int 0
  .. ..$ foreign            : int 0
  .. ..$ TTR                : num 0.844
  .. ..$ avg.sentc.length   : num 9
  .. ..$ avg.word.length    : num 5.47
  .. ..$ avg.syll.word      : num 2.18
  .. ..$ sntc.per.word      : num 0.111
  .. ..$ sntc.per100        : num 11.1
  .. ..$ lett.per100        : num 547
  .. ..$ syll.per100        : num 218
  .. ..$ FOG.hard.words     : NULL
  .. ..$ Bormuth.NOL        : NULL
  .. ..$ Dale.Chall.NOL     : NULL
  .. ..$ Harris.Jacobson.NOL: NULL
  .. ..$ Spache.NOL         : NULL
  ..@ TT.res                   :'data.frame':   107 obs. of  6 variables:
  .. ..$ token : chr [1:107] "Si" "quis" "in" "hoc" ...
  .. ..$ tag   : chr [1:107] "word.kRp" "word.kRp" "word.kRp" "word.kRp" ...
  .. ..$ lemma : chr [1:107] "" "" "" "" ...
  .. ..$ lttr  : num [1:107] 2 4 2 3 5 6 3 5 6 1 ...
  .. ..$ wclass: chr [1:107] "word" "word" "word" "word" ...
  .. ..$ desc  : chr [1:107] "Word (kRp internal)" "Word (kRp internal)" "Word (kRp internal)" "Word (kRp internal)" ... 
```

理想情况下，我希望将 FK 分数分配给 tm 中的 meta(d)。

我很高兴学习如何理解这个返回对象并取出它的值，而且，如果有另一种更好、更快的方法来获得 FK 分数，我会全力以赴！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:31:32.350

只需使用：

```
slot(x[[1]], "Flesch.Kincaid") 
```

获取包含这些值的对象的子集。要在 中的每个元素的列表中获取这些`x`，请执行以下操作：

```
list_fk = lapply(x, slot, "Flesch.Kincaid) 
```

...并得到一个向量`grade`：

```
grades = sapply(list_fk, "[[", "grade") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T15:40:18.850

类似于@Paul 的回答，但只有一个班轮解决方案

```
 sapply(lapply(x,slot,'Flesch.Kincaid'),'[',c('age','grade'))
      [,1]     [,2]     [,3]     [,4]     [,5]  
age   18.61778 17.62351 17.77699 18.29032 18.645
grade 13.61778 12.62351 12.77699 13.29032 13.645 
```

# jquery - 从另一个选择框中选择带有 Li 元素的框

> ID：14835895
> 
> 赞同：0
> 
> 时间：2013-02-12T15:26:48.203
> 
> 标签：jquery, drop-down-menu

好的，我知道我的标题信息量不大。让我解释。

我正在尝试使用 jQuery 完成一个页面。在他们的页面（旧页面）上，有一个选择下拉菜单，我将其带到我的（新）页面。他们的选择下拉菜单使用带有 li 元素的 ul，而我的使用带有选项元素的选择。

这是我所拥有的：

```
var totalQuestions = jQuery('.rcbItem').length; //get the total elements in theirs

for ( x = 0; x < totalQuestions; x++) //for loop to create the dropdown on mine
{
    var questionText = jQuery('.rcbItem:eq(' + x + ')').html();

    jQuery('#selectQuestion').append(jQuery(document.createElement('option')).attr(
    {
        'value' : "Question" + x
    }).html(questionText));
}

var strQuestion = jQuery('#ctl00_ContentPlaceHolder1_ddlQuestion_Input').val();  //gets the value currently in THEIR select field

var objQuestionNext = jQuery("#selectQuestion").find("option:contains('" + strQuestion + "')");

objQuestionNext.attr(
{
    selected : 'true'
});  //finds the question in MY list that matches THEIR select field, and then selects that one 
```

这是每次我从下拉列表中选择问题时运行的代码：

```
jQuery('#selectQuestion').change(function()
{
    strQuestion = jQuery('#selectQuestion :selected').val(); //get the value of "option", which is Question + x
    strAnswer = jQuery('#txtQuestionAnswer').val();

    intQuestionNumber = strQuestion.substr(8, 2).trim(); //gets the number (so Question + x becomes x)

    jQuery('#ctl00_ContentPlaceHolder1_ddlQuestion_Arrow')[0].click(); //I click THEIR dropdown menu

    jQuery('.rcbItem:eq(' + (intQuestionNumber-1) + ')').click();  //Select THEIR li element that matches MINE)

    jQuery('#ctl00_ContentPlaceHolder1_ctbAnswer').val(strAnswer);
}); 
```

这在 90% 的时间里都有效。

但是，如果我选择列表中的最后一个选项，就会发生这种情况。它选择它，这很好，但如果我从列表中选择另一个问题，它会开始选择我想要的问题正上方的问题，并继续这样做，直到我完全重新加载页面。仅当我选择下拉列表中的最后一个元素时才会发生这种情况。

我一直在为此绞尽脑汁，并没有找到答案。谁能提供一些见解？谢谢。

编辑：我终于找到了问题。在他们的代码中，当点击发生时，他们的每个 li 元素所具有的 .rcbItem 类都被 .rcbHover 类覆盖。所以要修复它，我基本上将 .rcbItem 更改为`jQuery('.rcbList li')....`现在它可以完美运行。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:02:49.190

Are you sure that this one is OK?

```
jQuery('#ctl00_ContentPlaceHolder1_ddlQuestion_Arrow')[0].click(); 
```

You trigger jQuery's `.click` not on jQuery but on DOM element

# sql-server - 多列到一列

> ID：14835900
> 
> 赞同：1
> 
> 时间：2013-02-12T15:27:02.300
> 
> 标签：sql-server, tsql, sql-server-2005

我正在编写一个触发器，并且我正在使用插入的 Inserted 是单行，例如

```
ColumnX |ColumnY|ColumnZ|
=========================
 A      | B     |C      | 
```

我想像这样将结果插入另一个表

```
ColumnName |Value|
==================
ColumnX    | A   |
ColumnY    | B   |
ColumnZ    | C   | 
```

我有很多桌子，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:28:51.047

`UNPIVOT`结果集，然后插入它们：

```
INSERT INTO Anothertable(Columnname, value)
SELECT Columnname, value
FROM tablename t
UNPIVOT
(
   value
   FOR ColumnName IN(ColumnX, ColumnY, ColumnZ)
) AS u; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/14f794/1)

* * *

要动态地做到这一点：

```
DECLARE @cols AS NVARCHAR(MAX);
DECLARE @query AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' +
                        QUOTENAME(Columnname)
                      FROM table1 t
UNPIVOT
(
   value
   FOR ColumnName IN(ColumnX, ColumnY, ColumnZ)
) AS u
                      FOR XML PATH(''), TYPE
                     ).value('.', 'NVARCHAR(MAX)') 
                        , 1, 1, '');

SET @query = 'SELECT Columnname, value
              FROM table1 t
              UNPIVOT
              (
                 value
                 FOR ColumnName IN( ' + @cols + ' )
              ) AS u;'

execute(@query); 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/14f794/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:34:37.753

```
CREATE TRIGGER TriggerName
ON YourDatabase.TableName
AFTER INSERT 
AS
   BEGIN
        INSERT INTO OtherTable (ColumnX, ColumnY, ColumnZ) 
        SELECT ColumnX, ColumnY, ColumnZ
        FROM inserted
  END
GO 
```

# c# - 编写我自己的屏幕共享服务器和协议

> ID：14835902
> 
> 赞同：1
> 
> 时间：2013-02-12T15:27:06.803
> 
> 标签：c#, rdp, screensharing

我正在构建一个需要屏幕共享功能的客户端/服务器解决方案。我有一些已经“工作”的东西，但问题是它只能在内部网络上工作，因为我的方法不够快。

我基本上在做的是客户端每 5 秒向服务器发出一个请求，请求一个屏幕图像（例如）。这是收到此请求后处理的代码：

```
private void GetImage(object networkstream)
{
    NetworkStream network = (NetworkStream)networkstream;

    Bitmap bitmap = new Bitmap(
        SystemInformation.PrimaryMonitorSize.Width,
        SystemInformation.PrimaryMonitorSize.Height);
    Graphics g = Graphics.FromImage(bitmap);
    g.CopyFromScreen(new Point(0, 0), new Point(0, 0), bitmap.Size);
    g.Flush();
    g.Dispose();

    MemoryStream ms = new MemoryStream();
    bitmap.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
    bitmap.Dispose();

    byte[] array = ms.ToArray();

    network.Write(array, 0, array.Length);
    network.Flush();

    ms.Dispose();
} 
```

1.  什么是做我想做的最好的方法？我需要至少获得 0.2 FPS（每 5 秒刷新一次） Obs.：我正在使用 Windows 窗体，它是通过套接字完成的。

2.  TeamViwer 和 .rdp 文件如何工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:36:30.030

您只能发送当前图像和最后图像之间的差异。看这里：[计算 C# 中的图像差异](https://stackoverflow.com/questions/9367138/calculate-image-differences-in-c-sharp)

如果它不够快，您可以将您的屏幕分成更小的，如 100x100 或 50x50 位图，检查该区域是否已更改，如果是，请将其发送给客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T15:37:14.983

您需要优化您的协议，这里有一些建议：

*   分段输入图像，发送分段而不是全屏
*   仅在与先前发送的版本不同时才发送段
*   使用[http 通知](http://en.wikipedia.org/wiki/Push_technology)类型的通信，您的查看器发送请求但仅在服务器收到来自演示者的新片段（可能几个分组在一起）时才获得响应。
*   压缩图像数据，不传输原始数据
*   让用户可以选择压缩级别以加快速度或获得更好的图像
*   我怀疑这是否在您的预算之内，但您也可以将流编码为流视频

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T18:35:32.340

使用现有的实现怎么样？还是从中学习？ [http://cdot.senecac.on.ca/projects/vncsharp/](http://cdot.senecac.on.ca/projects/vncsharp/)

# php - 如何仅打印属于当前帖子的类别？此代码段显示网站中的所有类别

> ID：14835903
> 
> 赞同：1
> 
> 时间：2013-02-12T15:27:08.613
> 
> 标签：php, mysql, drupal, printing

我有这个片段，它显示了站点中属于特定词汇表的所有分类列表。我如何打印属于我实际加载的节点的术语，而不是打印整个列表？我有一个 Drupal 7 安装。

这就是我打印我所在节点的 id 的方式：`<?php print $node->nid;?>`

```
<?php 
$vid = 11; //vocabulary id

$query = "SELECT tid, name, count
FROM (
SELECT td.tid AS tid, name, COUNT(td.tid) AS count
FROM taxonomy_term_data AS td
JOIN taxonomy_index AS tn
  ON td.tid = tn.tid
JOIN node AS n
  ON n.nid = tn.nid
WHERE td.vid = ". $vid ."
  AND n.status = 1
GROUP BY td.tid
ORDER BY count DESC
) AS t
ORDER BY name ASC";
$result = db_query($query);
foreach($result as $term) {
    if ($term->count > 0) {
      echo l($term->name, "taxonomy/term/$term->tid").' ('.$term->count.')'.'<br/>';
    }
}
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:02:27.897

我建议不要为此运行额外的查询。此信息应该在 $node 对象中可用。

只需打印它 [print_r($node) ] 并查看分类对象名称 ($node->taxonomy) 的确切含义以及分类信息的结构以及使用它在节点页面或节点预告片上显示类别。

在其他页面上，您可以使用 node_load 第一次加载节点，然后执行相同的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:52:19.720

**sumoand**的答案在这种情况下更为理想，但是对于一些 sql 练习，这里是您想象的确切解决方案：

```
<?php 
$vid = 11; //vocabulary id

$query = "SELECT tid, name, count
FROM (
SELECT td.tid AS tid, name, COUNT(td.tid) AS count
FROM taxonomy_term_data AS td
JOIN taxonomy_index AS tn
  ON td.tid = tn.tid
JOIN node AS n
  ON n.nid = tn.nid
WHERE td.vid = ". $vid ."
  AND n.status = 1
  AND n.nid = ".$node->id."
GROUP BY td.tid
ORDER BY count DESC
) AS t
ORDER BY name ASC";
$result = db_query($query);
foreach($result as $term) {
    if ($term->count > 0) {
      echo l($term->name, "taxonomy/term/$term->tid").' ('.$term->count.')'.'<br/>';
    }
}
?> 
```

# vb.net - 如何在 Crystal Report 中仅打印报表的确切大小

> ID：14835904
> 
> 赞同：1
> 
> 时间：2013-02-12T15:27:08.287
> 
> 标签：vb.net, printing, datagridview, crystal-reports, dot-matrix

我想使用`crystal report`从数据库生成的数据打印数据，报告取决于用户请求的数据。

在点阵打印机中打印时，它可能是**5 行**，或者现在可以变为***20 到 25 行。***

我有一个问题，它打印了数据，但是它发送到页面末尾为空白，所以它给客户在打印机中再次调整纸张造成了问题

我应该进行哪些更改才能使其仅打印从视图`crystal report`生成的报告的确切大小。`datagrid`

我正在使用 TVS 250 星型点阵打印机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-27T04:47:39.430

这里有一些解决方案

[以编程方式为 Crystal Report 设置自定义纸张大小](https://stackoverflow.com/questions/17835212/programmatically-set-custom-paper-size-for-crystal-report)

另外，当您在 TVS 250 星点式打印机中打印时，将“Crystal Report”转换为 txt 文件，然后打印可能很容易..

# wpf - 动态加载类型的 ListBox DataTemplate

> ID：14835906
> 
> 赞同：3
> 
> 时间：2013-02-12T15:27:15.463
> 
> 标签：wpf, mvvm, listbox

我有一个示例 MVVM WPF 应用程序，但在为我的动态加载模型创建 DataTemplates 时遇到问题。让我试着解释一下：

我有以下简化的类作为我的模型的一部分，我正在动态加载

```
public class Relationship
{
    public string Category { get; set; }
    public ParticipantsType Participants { get; set; }
}

public class ParticipantsType
{
    public ObservableCollection<ParticipantType> Participant { get; set; }
}

public class ParticipantType
{

}

public class EmployeeParticipant : ParticipantType
{
    public EmployeeIdentityType Employee { get; set; }
}

public class DepartmentParticipant : ParticipantType
{
    public DepartmentIdentityType Department { get; set; }
}

public class EmployeeIdentityType
{
    public string ID { get; set; }
}

public class DepartmentIdentityType
{
    public string ID { get; set; }
} 
```

这是我的视图模型的样子。我创建了一个通用对象`Model`属性来公开我的模型：

```
 public class MainViewModel : ViewModelBase<MainViewModel>
{
    public MainViewModel()
    {
        SetMockModel();
    }

    private void SetMockModel()
    {
        Relationship rel = new Relationship();
        rel.Category = "213";
        EmployeeParticipant emp = new EmployeeParticipant();
        emp.Employee = new EmployeeIdentityType();
        emp.Employee.ID = "222";
        DepartmentParticipant dep = new DepartmentParticipant();            
        dep.Department = new DepartmentIdentityType();
        dep.Department.ID = "444";
        rel.Participants = new ParticipantsType() { Participant = new ObservableCollection<ParticipantType>() };
        rel.Participants.Participant.Add(emp);
        rel.Participants.Participant.Add(dep);            
        Model = rel;
    }

    private object _Model;
    public object Model
    {
        get { return _Model; }
        set
        {
            _Model = value;
            NotifyPropertyChanged(m => m.Model);
        }
    }
} 
```

然后我尝试创建一个 ListBox 来专门显示参与者集合：

```
<ListBox ItemsSource="{Binding Path=Model.Participants.Participant}">
<ListBox.ItemTemplate>
    <DataTemplate>
        <StackPanel>
            <Expander Header="IdentityFields">
            <!-- WHAT TO PUT HERE IF PARTICIPANTS HAVE DIFFERENT PROPERTY NAMES -->
            </Expander>
        </StackPanel>
    </DataTemplate>
</ListBox.ItemTemplate> 
```

问题是：

1.  我不知道如何创建一个可以处理这两种类型的 ParticipantTypes 的模板，在这种情况下，我可以有 EmployeeParticipant 或 DepartmentParticipant，因此根据这一点，数据绑定路径将被设置为`Employee`或`Department`相应的属性
2.  我想为每种类型创建一个 DataTemplate（例如 x:Type EmployeeParticipant），但问题是**我的模型中的类是在运行时动态加载的，**所以 VisualStudio 会抱怨这些类型在当前解决方案中不存在。

如果我的具体类型在编译时不知道，但仅在运行时不知道，我怎么能在 ListBox 中表示这些数据？

**编辑：**添加了我的测试 ViewModel 类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:55:38.487

您仍然可以`DataTemplate`为每种类型创建一个，但不是使用`DataType`声明让它们自动解析，您可以`DataTemplateSelector`为每个模板（从`StaticResource`XAML 中分配）创建一个属性，该属性可以将传入的数据项转换为基类并检查属性或其他方式确定在运行时使用哪个模板。将该选择器分配给`ListBox.ItemTemplateSelector`，您将获得与`DataType`给您类似的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:58:04.287

这不是一个好的视图模型。您的视图模型应该以视图为中心，而不是以业务为中心。因此，创建一个可以从视觉角度处理所有四种情况的类，然后将您的业务类连接到该视图模型。

* * *

编辑：

处理您的代码：

```
<ListBox ItemsSource="{Binding Path=Model.Participants}">
<ListBox.ItemTemplate>
    <DataTemplate>
        <StackPanel>
            <Expander Header="IdentityFields">
                <TextBlock Text={Binding Id} />
                <TextBlock Text={Binding Name} />
            </Expander>
        </StackPanel>
    </DataTemplate>
</ListBox.ItemTemplate>
</ListBox> 
```

我更改了绑定，我认为这是一个错误？

我将为参与者创建一个 ViewModel：

```
public class Participant_VM : ViewModelBase
{

    private string _name = string.Empty;
    public string Name
    {
        get
        {
            return _name ;
        }

        set
        {
            if (_name == value)
            {
                return;
            }
            _name = value;
            RaisePropertyChanged(() => Name);
        }

    private string _id= string.Empty;
    public string Id
    {
        get
        {
            return _id;
        }

        set
        {
            if (_id== value)
            {
                return;
            }
            _id = value;
            RaisePropertyChanged(() => Id);
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T16:45:45.400

修改`ListBox`如下。

```
 <ListBox ItemsSource="{Binding Model.Participants.Participant}">
            <ListBox.Resources>
                <DataTemplate DataType="{x:Type loc:DepartmentParticipant}">
                    <Grid>
                        <TextBlock Text="{Binding Department.ID}"/>
                    </Grid>
                </DataTemplate>
                <DataTemplate DataType="{x:Type loc:EmployeeParticipant}">
                    <Grid>
                        <TextBlock Text="{Binding Employee.ID}"/>
                    </Grid>
                </DataTemplate>
            </ListBox.Resources>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <Expander Header="IdentityFields">
                            <!-- WHAT TO PUT HERE IF PARTICIPANTS HAVE DIFFERENT PROPERTY NAMES -->
                            <ContentPresenter Content="{Binding }"/>
                        </Expander>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

编辑： loc 指的是存在`DepartmentParticipant`and的命名空间。`EmployeeParticipant`希望您熟悉添加命名空间。

# python - 从 .py 文件中获取包根和完整模块名称以进行导入

> ID：14835909
> 
> 赞同：3
> 
> 时间：2013-02-12T15:27:26.283
> 
> 标签：python, import, module, package

我正在寻找一种简单快速的方法来从 .py 文件的路径中找到包的根目录和完整的模块名称。

我希望用户选择一个 .py 并在不中断的情况下导入它。如果模块是包的一部分，则导入模块可能会中断。因此，我想自动将包根目录所在的目录附加到 sys.path （如果还没有的话），然后使用其完整的模块名称导入模块。

我没有从同一个目录或那个脚本的任何地方运行，所以我不能使用`__file__`那种东西。另外我还没有导入模块，所以我不能（据我所知）检查模块对象，因为没有。

这是一个工作版本，但我有兴趣找到更简单/更快的解决方案。

```
def splitPathFull(path):
    folders=[]
    while 1:
        path,folder=os.path.split(path)

        if folder!="":
            folders.append(folder)
        else:
            if path!="":
                folders.append(path)

            break

    folders.reverse()
    return folders

def getPackageRootAndModuleNameFromFilePath(filePath):
    """
        It recursively looks up until it finds a folder without __init__.py and uses that as the root of the package
        the root of the package.
    """
    folder = os.path.dirname(filePath)
    if not os.path.exists( folder ):
        raise RuntimeError( "Location does not exist: {0}".format(folder) )

    if not filePath.endswith(".py"):
        return None

    moduleName = os.path.splitext( os.path.basename(filePath) )[0] # filename without extension

    #
    # If there's a __init__.py in the folder:
    #   Find the root module folder by recursively going up until there's no more __init__.py
    # Else:
    #   It's a standalone module/python script.
    #
    foundScriptRoot = False
    fullModuleName = None
    rootPackagePath = None
    if not os.path.exists( os.path.join(folder, "__init__.py" ) ):
        rootPackagePath = folder
        fullModuleName = moduleName
        foundScriptRoot = True
        # It's not in a Python package but a seperate ".py" script
        # Thus append it's directory name to sys path (if not in there) and import the .py as a module
    else:
        startFolder = folder

        moduleList = []
        if moduleName != "__init__":
            moduleList.append(moduleName)

        amountUp = 0
        while os.path.exists( folder ) and foundScriptRoot == False:

            moduleList.append ( os.path.basename(folder) )
            folder = os.path.dirname(folder)
            amountUp += 1

            if not os.path.exists( os.path.join(folder, "__init__.py" ) ):
                foundScriptRoot = True
                splitPath = splitPathFull(startFolder)
                rootPackagePath = os.path.join( *splitPath[:-amountUp] )
                moduleList.reverse()
                fullModuleName = ".".join(moduleList)

    if fullModuleName == None or rootPackagePath == None or foundScriptRoot == False:
        raise RuntimeError( "Couldn't resolve python package root python path and full module name for: {0}".format(filePath) )

    return [rootPackagePath, fullModuleName]

def importModuleFromFilepath(filePath, reloadModule=True):
    """
        Imports a module by it's filePath.
        It adds the root folder to sys.path if it's not already in there.
        Then it imports the module with the full package/module name and returns the imported module as object.
    """

    rootPythonPath, fullModuleName = getPackageRootAndModuleNameFromFilePath(filePath)

    # Append rootPythonPath to sys.path if not in sys.path
    if rootPythonPath not in sys.path:
        sys.path.append(rootPythonPath)

    # Import full (module.module.package) name
    mod = __import__( fullModuleName, {}, {}, [fullModuleName] )
    if reloadModule:
        reload(mod)

    return mod 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:55:33.640

由于[命名空间包](http://www.python.org/dev/peps/pep-0420/#specification)，这是不可能的- 根本无法确定正确的包`baz.py`是`foo.bar`还是仅`bar`具有以下文件结构：

```
foo/
    bar/
        __init__.py
        baz.py 
```

# javascript - Javascript 变量未在函数范围之外更改

> ID：14835913
> 
> 赞同：1
> 
> 时间：2013-02-12T15:27:35.573
> 
> 标签：javascript, jquery, python, html, zope

我有以下功能：

```
function loginStudent() {
    var advisorKEY = "<dtml-var expr="py_get_alias()">";
    var studentKEY = "<dtml-var SID>";  
    var URL = "py_logging_sessionOpen?AdvisorKEY=" + advisorKEY + "&StudentKEY=" + studentKEY;
    key = "";
    $j.get(URL, function(data) { 
        key = data;
    });
    alert(key);
} 
```

这`py_loggin_sessionOpen`只是在我的服务器上运行的一个 python 脚本。
它返回一个字符串。我需要该脚本的响应来确定下一步操作。该脚本完美地返回了该值，我可以通过`alert`在`function(data)`in 中放置一个来轻松检查该值`get`。

**我的主要问题是：**如何在函数（数据）范围之外更改键值？

我假设因为我在外部定义了它，所以它将充当全局变量。把它移到外面`loginStudent()`也不能解决问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T15:31:43.210

`$j.get()`将是一个异步调用。这意味着它会触发，其余的执行将继续。任何依赖于该调用的事情都需要在回调中完成，如下所示：

```
$j.get(URL, function(data) { 
    key = data;
    alert(key);
} ); 
```

如果其他一切都很好，您将看到您期望的价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:33:27.777

您的代码的问题是`$j.get`异步执行。这就是您将回调传递给它的原因。

如果您希望同步编写异步代码，那么您应该阅读这个答案：[https ://stackoverflow.com/a/14809354/783743](https://stackoverflow.com/a/14809354/783743)

**编辑：**似乎您已经创建了一个全局变量`key`，而不是用`var`. 因此，只要在回调**之后调用它们，它就应该在其他函数中可见。**

您愿意为我们提供这些其他功能吗？

# iphone - cllocation -distanceFromLocation 精度差

> ID：14835914
> 
> 赞同：2
> 
> 时间：2013-02-12T15:27:41.800
> 
> 标签：iphone, objective-c, ios6, geocoding

我正在开发一个应用程序，它特别依赖于两个 iOS 设备之间的距离。我正在使用设备的 GPS 位置来计算它们之间的距离。为了计算距离，我使用了 cllocation -distanceFromLocation 方法，但该方法生成的值是波动的，与设备之间的实际距离不同，即使是近似结果也不能考虑。例如，如果设备之间的实际距离是 2 到 3 米，它会在某个点给出大约 14 米的结果，在另一个点给出大约 43 米的结果。是函数-distanceFromLocation：不是那么精确吗？？？？

使用设备的 GPS 纬度和经度计算距离是否有更好的选择？？？

请帮帮我。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:33:45.343

CoreLocation GPS 的准确度因周围环境而异。

在最准确的情况下，它可以下降到几米的分辨率（我不确定），但如果你在室内，它会更像是 20-50 米。

我猜你是在室内开发和测试应用程序，所以波动是正常的。

即使在完美天气的户外，CoreLocation 也难以准确地告诉您两台设备之间的短距离距离。（即几米）。

对于短距离，您可能会更好地使用 wifi 信号强度。虽然这也可以从一个房间到另一个房间。

本质上，很难准确检测两个设备之间的距离。

# sql - vb2008 一键插入和更新记录

> ID：14835915
> 
> 赞同：0
> 
> 时间：2013-02-12T15:27:41.947
> 
> 标签：sql, vb.net

我正在尝试制作词汇表。我有一个带有列表框、2 个文本框和一个保存按钮的表单。

The listbox is now populated with words from the database, and when a word is selected, its definition will display in textbox2.

用户可以通过在 textbox1 中填写一个新词和在 textbox2 中填写其定义来添加一条记录，然后单击保存按钮。如果新单词已经存在，则不允许保存新记录，如果两个文本框之间存在空值也是如此。如果它不存在，它将被插入到表格中，并且新单词将被添加到列表框中。

用户还可以通过首先选择列表中的一个词然后编辑该词和/或定义并单击保存按钮来更新记录。

我已经让更新部分开始工作，但我在插入新记录时遇到了问题。我不能正确地做到这一点。词汇表只有 2 个字段：单词、定义。这是我的代码：

```
Dim myCmd As New MySqlCommand
Dim myReader As MySqlDataReader
Dim myAdptr As New MySqlDataAdapter
Dim myDataTable As New DataTable
Private Sub btnSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSave.Click
    Call Connect()
    With Me
        If Blank() = False Then
            If Duplicate() = False Then
                STRSQL = "insert into glossary values (@word, @def)"
                myCmd.Connection = myConn
                myCmd.CommandText = STRSQL
                myCmd.Parameters.AddWithValue("word", txtNew.Text)
                myCmd.Parameters.AddWithValue("def", txtdefine.Text)
                myCmd.ExecuteNonQuery()
                myCmd.Dispose()
                MsgBox("Record Added")
                Dim word As String
                word = txtNew.Text
                lstword.Items.Add(word)
                'myConn.Close()
                'Me.FillListbox()
            Else
                myConn.Open()
                STRSQL = "Update glossary set word = @term, definition = @mean where word = @term"
                myCmd.Connection = myConn
                myCmd.CommandText = STRSQL
                myCmd.Parameters.AddWithValue("term", txtNew.Text)
                myCmd.Parameters.AddWithValue("mean", txtdefine.Text)
                myCmd.ExecuteNonQuery()
                myCmd.Dispose()
                MsgBox("Record Updated", MsgBoxStyle.Information, "New word added")
            End If
        End If
    End With

End Sub

Public Function Blank() As Boolean
    Call Connect()
    With Me
        If .txtNew.Text = "" Or .txtdefine.Text = "" Then
            Blank = True
            MsgBox("Cannot save! Term and definition should not contain null value", MsgBoxStyle.Critical, "Unable to save")
        Else
            Blank = False
        End If
    End With
End Function

Public Function Duplicate() As Boolean
    Call Connect()
    With Me
        STRSQL = "Select * from glossary where word = '" & txtNew.Text & "'"
        myCmd.Connection = myConn
        myCmd.CommandText = STRSQL
        If myDataTable.Rows.Count <> 0 Then
            Duplicate = True
            'MsgBox("Word already exist. Please check the word.", MsgBoxStyle.Critical, "Duplicate.")

        Else
            Duplicate = False
        End If
        myConn.Close()
    End With
End Function 
```

这是我的连接模块：

```
Public myConnectionString As String
Public STRSQL As String
Public myConn As New MySqlConnection
Public Sub Connect()
    With myConn
        Try
            If .State = ConnectionState.Open Then
                .Close()
            End If
            myConnectionString = "Database=firstaidcqs;Server=localhost;Uid=root;Password="
            .ConnectionString = myConnectionString
            .Open()
            'MsgBox("Successful Connection")
        Catch ex As Exception
            MsgBox(ex.Message, MsgBoxStyle.Critical, "Connection Error")
            .Close()
        End Try
    End With
End Sub
Public Sub Disconnect()
    With myConn
        .Close()
        .Dispose()
    End With
End Sub 
```

我怎样才能使它正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:04:52.237

您在上面的所有代码中都使用了全局变量。

```
myConn and myCmd 
```

特别是，您在 myCmd 上调用 Dispose，但我在任何地方都看不到使用 New 重新初始化对象。另外，暂时忘记 myCmd.Dispose 问题，您不会重置 myCmd 参数集合。这样，您最终会为执行的命令收集错误的参数，也不要忘记打开插入部分的连接。（并为两个部分关闭它）

您可以轻松避免使用不必要的全局变量

```
....
If Duplicate() = False Then
    STRSQL = "insert into glossary values (@word, @def)"
    Using myCmd = new MySqlCommand(STRSQL, myConn)
        myConn.Open()
        myCmd.Parameters.AddWithValue("word", txtNew.Text)
        myCmd.Parameters.AddWithValue("def", txtdefine.Text)
        myCmd.ExecuteNonQuery()
    End Using
    myConn.Close()
.....
Else
    STRSQL = "Update glossary set word = @term, definition = @mean where word = @term"
    Using myCmd = new MySqlCommand(STRSQL, myConn)
        myConn.Open()
        myCmd.Parameters.AddWithValue("term", txtNew.Text)
        myCmd.Parameters.AddWithValue("mean", txtdefine.Text)
        myCmd.ExecuteNonQuery()
    End Using
    myConn.Close()
..... 
```

更好的解决方案是更改 Connect() 方法以返回初始化的连接，而不是使用全局变量。这样，您还可以在 Using 语句中包含连接的创建和销毁

```
 Using myConn as MySqlConnection = Connect()
 .......
 End Using 
```

为此，您需要以这种方式更改 Connect 的代码

```
Public Function Connect() as MySqlConnection
    Dim myConn As MySqlConnection
    myConnectionString = "Database=firstaidcqs;Server=localhost;Uid=root;Password="
    myConn = New MySqlConnection(myConnectionString)
    myConn.Open()
    return myConn
End Sub 
```

不需要`Disconnect`函数，因为您将始终使用将为您关闭连接的[Using 语句](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)，不需要有一个全局变量来保持连接，因为您将在每次需要时重新打开连接并在之后关闭。不要认为这不是高性能的，因为 ADO.NET 实现了[连接池](http://msdn.microsoft.com/en-us/library/8xx3tyca%28v=vs.100%29.aspx) （这是 SqlServer 的 MSDN 文章，但该概念也适用于 MySql）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:41:28.517

耶！！我现在开始工作了：D（我的道歉，我花了很长时间才完成这个......我还在学习）。这是我的最终代码：

```
Private Sub btnSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSave.Click
    Call Connect()
    If Blank() = False Then
        If Duplicate() = False Then
            STRSQL = "insert into glossary values (@word, @def)"
            Using myCmd = New MySqlCommand(STRSQL, myConn)
                myConn.Open()
                myCmd.Parameters.AddWithValue("word", txtNew.Text)
                myCmd.Parameters.AddWithValue("def", txtdefine.Text)
                myCmd.ExecuteNonQuery()
            End Using
            myConn.Close()
            MsgBox("Record Added")
            Dim word As String
            word = txtNew.Text
            lstword.Items.Add(word)
            myConn.Close()
        Else
            STRSQL = "Update glossary set word = @term, definition = @mean where word = @term"
            Using myCmd = New MySqlCommand(STRSQL, myConn)
                myConn.Open()
                myCmd.Parameters.AddWithValue("term", txtNew.Text)
                myCmd.Parameters.AddWithValue("mean", txtdefine.Text)
                myCmd.ExecuteNonQuery()
            End Using
            myConn.Close()
            MsgBox("Record Updated", MsgBoxStyle.Information, "New word added")
            Dim str As String
            str = txtNew.Text
            myConn.Close()
        End If
    End If
End Sub

Public Function Blank() As Boolean
    Call Connect()
    With Me
        If .txtNew.Text = "" Or .txtdefine.Text = "" Then
            Blank = True
            MsgBox("Cannot save! Term and definition should not contain null value", MsgBoxStyle.Critical, "Unable to save")
        Else
            Blank = False
        End If
    End With
End Function

Public Function Duplicate() As Boolean
    Dim dset As New DataSet
    Call Connect()
    With Me
        STRSQL = "Select * from glossary where word = '" & txtNew.Text & "'"
        myCmd.Connection = myConn
        myCmd.CommandText = STRSQL
        myAdptr.SelectCommand = myCmd
        myAdptr.Fill(dset, "glossary")
        myDataTable = dset.Tables("glossary")
        If myDataTable.Rows.Count > 0 Then
            Duplicate = True
            'MsgBox("Word already exist. Please check the word.", MsgBoxStyle.Critical, "Duplicate.")

        Else
            Duplicate = False
        End If
        myConn.Close()
    End With
End Function 
```

我仍然使用我的第一个模块，但我已经删除了 Disconnect() 函数。@Steve - 非常感谢您的帮助先生，我会尝试使用您对我的建议一段时间..也许在我的下一个程序中。神速！！:)

# html - 将命令卷曲到 html 或 vb.net

> ID：14835916
> 
> 赞同：3
> 
> 时间：2013-02-12T15:27:47.723
> 
> 标签：html, vb.net, api, curl

我正在尝试访问 smartsheet API。他们在 curl 中提供了一个示例代码来访问它。

要访问您的工作表列表，请使用您喜欢的编程或脚本语言构建一个 HTTPS 请求。这是一个使用 linux 命令行中的 curl 的示例：

```
curl https://api.smartsheet.com/1.0/sheets \
-H "Authorization: Bearer 0da6cf0d-848c-4266-9b47-cd32a6151b1f" \
-H "Assume-User: john.doe%40smartsheet.com" 
```

我如何在 vb.net 或从 html 表单中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T15:44:07.210

这是一个相当大的主题，但最简单的你可以试试这个......

```
Imports System.Net 
```

进而...

```
Dim wHeader As WebHeaderCollection = New WebHeaderCollection()

wHeader.Clear()
wHeader.Add("Authorization: Bearer 0da6cf0d-848c-4266-9b47-cd32a6151b1f")
wHeader.Add("Assume-User: john.doe%40smartsheet.com")

Dim sUrl As String = "https://api.smartsheet.com/1.0/sheets"

Dim wRequest As HttpWebRequest = DirectCast(System.Net.HttpWebRequest.Create(sUrl), HttpWebRequest)

'wRequest.ContentType = "application/json" ' I don't know what your content type is
wRequest.Headers = wHeader
wRequest.Method = "GET"

Dim wResponse As HttpWebResponse = DirectCast(wRequest.GetResponse(), HttpWebResponse)

Dim sResponse As String = ""

Using srRead As New StreamReader(wResponse.GetResponseStream())
    sResponse = srRead.ReadToEnd()
End Using 
```

我不熟悉 smartsheet API，但您可以将其用作起点。

如果您使用的是代理，则需要添加...

```
Dim wProxy As IWebProxy = WebRequest.GetSystemWebProxy()
wProxy.Credentials = System.Net.CredentialCache.DefaultCredentials 
```

并在您提出请求时指定代理...

```
wRequest.Proxy = wProxy 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T15:47:33.663

要在 VB.Net 中创建 Web 请求，您可以使用[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/8y7x3zz2%28v=vs.100%29.aspx)该类。

curl 中的[`-H`参数](http://curl.haxx.se/docs/manpage.html)创建了一个额外的标题。要将标题添加到`HttpWebRequest`您只需将它们添加到.[`WebHeaderCollection`](http://msdn.microsoft.com/en-us/library/965xw3x5.aspx?cs-save-lang=1&cs-lang=vb) `Headers`

例子：

```
Dim myHttpWebRequest = CType(WebRequest.Create("https://api.smartsheet.com/1.0/sheets"), HttpWebRequest)
myHttpWebRequest.Headers.Add("Authorization: Bearer 0da6cf0d-848c-4266-9b47-cd32a6151b1f")
myHttpWebRequest.Headers.Add("Assume-User: john.doe%40smartsheet.com")
Dim myHttpWebResponse = CType(myHttpWebRequest.GetResponse(), HttpWebResponse) 
```

# ios - iOS 中的日期和时间格式

> ID：14835919
> 
> 赞同：3
> 
> 时间：2013-02-12T15:28:04.943
> 
> 标签：ios, string, nsdateformatter

我知道 NSDateFormatter，但我希望它像“昨天 12:35”，而我只知道你连接了两个日期字符串？

```
[dateFormatter setTimeStyle:NSDateFormatterNoStyle];
[dateFormatter setDateStyle:NSDateFormatterShortStyle];
[dateFormatter setLocale: [NSLocale autoupdatingCurrentLocale]];

[dateFormatter setDoesRelativeDateFormatting:YES];

[dateFormatterTime setLocale:[NSLocale systemLocale]];
[dateFormatterTime setDateFormat:@"HH:mm"];

NSString *dateString = [NSString stringWithFormat:@"%@ %@", [dateFormatter stringFromDate:dateParsed], [dateFormatterTime stringFromDate:dateParsed ] ]; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:45:27.863

这是我通过尊重语言环境所能做的最好的事情。

```
NSDateFormatter *dateFormatter = NSDateFormatter.new;
dateFormatter.doesRelativeDateFormatting = YES;
dateFormatter.dateStyle = NSDateFormatterShortStyle;
dateFormatter.timeStyle = NSDateFormatterShortStyle;

NSDate *today = NSDate.new;
// "Today, 11:40 AM"
NSLog(@"%@", [dateFormatter stringFromDate:today]);

NSDate *tomorrow = [NSDate dateWithTimeIntervalSinceNow:60*60*24];
// "Tomorrow, 11:40 AM"
NSLog(@"%@", [dateFormatter stringFromDate:tomorrow]);

NSDate *yesterday = [NSDate dateWithTimeIntervalSinceNow:-(60*60*24)];
// "Yesterday, 11:40 AM"
NSLog(@"%@", [dateFormatter stringFromDate:yesterday]);

NSDate *dayAfter = [NSDate dateWithTimeIntervalSinceNow:(60*60*24)*2];
// "2/14/13, 11:40 AM"
NSLog(@"%@", [dateFormatter stringFromDate:dayAfter]); 
```

# php - 带有表格行的PHP foreach

> ID：14835927
> 
> 赞同：1
> 
> 时间：2013-02-12T15:28:41.123
> 
> 标签：php, foreach

我这里有这个 PHP 脚本

```
$z = range(2, 123);
echo '<table width="100%">';
foreach($z as $x){

echo '<td><a href="http://www.mysite.net/' . $x . '/"><img src="http://www.mysite.net/' . $x . '/5.jpg" width=200></a></td>';
}

echo '</table>'; 
```

我想要做的是在表格行中获取 6 个项目，然后是一个新行......我该怎么做？

谢谢，J

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:31:54.920

这里需要取[模运算符](http://php.net/manual/en/language.operators.arithmetic.php)。您可以除以并计算余数。每次剩下的时候`0`你添加一个新行：

```
$z = range(2, 123);
echo '<table width="100%">';
echo '<tr>';
$cnt = 2;
foreach($z as $x){
if ( ($cnt - 2) % 6 == 0 ) {
echo '</tr><tr>';
}
$cnt++;
echo '<td><a href="http://www.mysite.net/' . $x . '/"><img src="http://www.mysite.net/' . $x . '/5.jpg" width=200></a></td>';
}
echo '</tr>';
echo '</table>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T16:07:51.223

如果您希望您的代码干净整洁，请始终将数据操作与演示代码分开。因此，尽可能多地将逻辑从输出移开。
所以，首先准备你的数据

```
<?
$data = range(2, 123);
$data = array_chunk($data, 6);
?> 
```

然后输出

```
<table width="100%">
<? foreach($data as $chunk): ?>
  <tr>
<? foreach($chunk as $val): ?>
    <td>
      <a href="/<?=$val?>/"><img src="/<?=$val?>/5.jpg" width=200></a>
    </td>
<? endforeach ?>
  </tr>
<? endforeach ?>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T15:32:56.020

尝试这样的事情：

```
$z = range(2, 123);
echo '<table width="100%"><tr>';
foreach($z as $x){

    if( ($x - 2) % 6 == 0 ) // Minus 2 because you don't start at 0 but at 2.
    {
        echo '</tr><tr>';
    }
    echo '<td><a href="http://www.mysite.net/' . $x . '/"><img src="http://www.mysite.net/' . $x . '/5.jpg" width=200></a></td>';
}

echo '</tr></table>'; 
```

这`%`是一个称为模的数学函数。更多信息可以在[这里](http://en.wikipedia.org/wiki/Modulo_operation)找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T15:34:04.213

使用计数器变量。

```
$z = range(2, 123);

$current_result=0;

echo '<table width="100%">';
echo '<tr>';
foreach($z as $x){
if ($current_result++ % 6 == 0) echo '</tr><tr>';

echo '<td><a href="http://www.mysite.net/' . $x . '/"><img src="http://www.mysite.net/' . $x . '/5.jpg" width=200></a></td>';
}
echo '</tr>';
echo '</table>';` 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T15:37:23.443

好吧，一开始`range(2, 123)`会产生 122 个数字，所以你想要的是`range(1, 6)`.

然后您需要修复您的脚本以将每个表格单元格包含在一个行元素中，因此您的脚本变为：

```
$z = range(1, 6);
echo '<table width="100%">';

foreach($z as $x){
  echo '<tr><td><a href="http://www.mysite.net/' . $x . '/"><img src="http://www.mysite.net/' . $x . '/5.jpg" width=200></a></td></tr>';
}

echo '</table>'; 
```

Range 是一种循环 6 次的奇怪方式——您可能只想使用一个字符串来构建表格并使用 循环`while`，然后一次性输出整个表格。

**编辑**
似乎我可能错过了一点 - 如果您尝试在范围内循环 6 次，那么模方法就是您想要的，尽管我关于表格行元素的观点仍然需要，否则您不会产生有效的 HTML。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T15:41:24.877

只需在循环内使用任何变量进行计数。增加它并检查你的价值。例如

```
$cnt++;
if ($cnt >= 6) {
  $cnt = 0;
  echo "</tr><tr>";
} 
```

并且不要使用 foreach。用于从 2 到 123

# visual-c++ - Visual C++ 2010 Express 项目模板

> ID：14835930
> 
> 赞同：1
> 
> 时间：2013-02-12T15:28:42.790
> 
> 标签：visual-c++

Visual C++ 2010 *Express*是否支持自定义项目模板？

我正在尝试创建一个简单的项目模板，但没有成功。`.vstemplate`文件如下。

```
<?xml version="1.0" encoding="utf-8"?>
<VSTemplate Version="3.0.0" Type="Project" xmlns="http://schemas.microsoft.com/developer/vstemplate/2005">
    <TemplateData>
        <Name>Test</Name>
        <Description>Test</Description>
        <Icon>Icon.ico</Icon>
        <ProjectType>VC</ProjectType>
        <DefaultName>Test</DefaultName>
    </TemplateData>
    <TemplateContent>
        <Project File="Test.vcxproj" TargetFileName="Test.vcxproj" ReplaceParameters="true">
            <ProjectItem TargetFileName="$projectname$.vcxproj.filters">Test.vcxproj.filters</ProjectItem>
            <ProjectItem TargetFileName="$projectname$.c">Source.c</ProjectItem>
        </Project>
    </TemplateContent>
</VSTemplate> 
```

模板文件引用的所有文件都存在；如果需要，我会发布它们。

无论我将包含模板文件的 zip 文件放在哪里（`ProjectTemplates`VS 安装、运行`vcexpress /installvstemplates`和其他建议的替代方案中的其他地方），VS IDE 都不会检测到项目模板。

任何人都可以提供更多信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-06T00:09:01.287

VS Express 不支持自定义模板等“可扩展性”功能。请注意，VS 2013 社区确实支持它们。

# ssis - 最佳设计模式——用于 DWH 加载的 SSIS 包

> ID：14835936
> 
> 赞同：0
> 
> 时间：2013-02-12T15:28:57.400
> 
> 标签：ssis, data-warehouse

在为我们的 DWH 负载设计 SSIS 包时，我需要帮助。

我有两个带有以下详细信息的星型模式模型

```
1st Model --> 5 dimension and 5 fact tables respectively
2nd Model --> 5 dimension and 1 fact tables respectively 
```

我有五个不同的源系统，我需要将数据填充到这些表中。

基于上述要求，我想到了这样设计包：

将有三个包，它们将执行以下操作：

1.  第一个包将通过所有必要的转换将数据从源系统提取到临时表（SQL Server 表）。
2.  第二个包会将数据加载到所有维度表中。
3.  第三个包将数据加载到所有事实表中。

请让我知道上述设计/架构是否适用于此 DWH 负载，或者我是否需要进行一些修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:16:58.077

这很难回答，因为最终如果它有效，那么它就是正确的。根据您的观点，只有不同程度的“正确性”（这是一个词吗？）或更多（或更少）优雅的答案。

但是，作为一般规则并就我自己而言，我总是发现将数据加载到暂存区域然后通过过程分发维度和事实更优雅。然后在目标数据库的上下文中执行该工作，而不是由包执行。包的作用是控制流量。

另外，我会避免不必要地将任务分成多个包。当然，可能还有其他考虑因素可能会影响此决定。例如，多个数据更新在不同时间从不同来源到达，但即便如此，我也倾向于一次分阶段更新。

# jquery - jQuery可拖动助手位置

> ID：14835937
> 
> 赞同：0
> 
> 时间：2013-02-12T15:29:03.183
> 
> 标签：jquery, jquery-ui

我想在拖动开始时更改可拖动辅助位置的位置，因此网格将计入 draggindg 元素的新位置。

拖动元素在开始时更改其宽度（开始拖动）并且它不“适合”网格 [100x100]。

> ```
> start: function (event, ui) {
>     ui.helper.css("width", '102px');
> } 
> ```

这是示例：http: [//jsfiddle.net/sYHre/73/](http://jsfiddle.net/sYHre/73/)

正如您在示例中看到的蓝色元素完全适合网格，但红色元素不是。我试图动态改变它的位置，但这不起作用（注释掉的代码），对象在跳跃，我认为这是 jquery ui 中的一种错误。也许有更好的方法来做到这一点？

我使用最新的 jQuery 和 jQuery UI 1.9.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:38:18.840

一旦开始拖动，元素的宽度就会发生变化，因为它最初属于 class `two`，即`width: 51px`，但是一旦开始拖动，您的`start`函数就会将其更改为`ui.helper.css("width", '102px')`。如果你不想改变它的宽度，把那条线去掉——除了改变那个项目的宽度之外，它没有做任何事情。如果您*确实*希望宽度改变宽度但没有“跳跃”，您可以为更改设置动画以使其更平滑 -`ui.helper.animate({width: 102}, 500)`似乎可以正常工作。不过，即使这有点让人迷失方向——我建议不要改变宽度，除非有我认为没有这样做的原因。

该对象不适合网格，因为类`two`要求它位于 at `left: 50%`，这不会与您的 100 x 100 网格完美对齐。如果您希望它与网格对齐，则可以通过将其更改为`left: 504px`来对齐。

另一方面，如果您希望它开始，`left: 50%`但是一旦您开始拖动，捕捉到最近的角落，您想要添加`snap: '.target'`到您的选项列表中。这将迫使它捕捉到网格，即使它没有开始与网格对齐。（事实上​​，如果您愿意，您可以设置`snapTolerance: 100`，在这种情况下您甚至不需要网格 - 可拖动对象将始终对齐目标对象。）

[这是一个更新的小提琴](http://jsfiddle.net/sYHre/85/)，显示了`snap`. [这是同一个 fiddle](http://jsfiddle.net/sYHre/84/)，但是宽度变化是动画的，所以你可以看到它是如何工作的。

我希望这回答了你的问题。如果不是，请尝试再次准确解释您要达到的目标。

# network-programming - 构建聊天应用程序时如何处理防火墙限制？

> ID：14835938
> 
> 赞同：0
> 
> 时间：2013-02-12T15:29:05.360
> 
> 标签：network-programming, xmpp, chat

我正在使用基于 jabber 的服务器构建一个简单的聊天应用程序。客户端应该通过端口 5222 连接。但是，当我测试我的应用程序时，我发现在某些网络中访问仅限于端口 80 或 8080。

我遇到了几个解决方案：

a) 使用 BOSH - 但发现它在移动设备上运行缓慢且不稳定。

b）我只是想知道如果我让我的 jabber 服务器在端口 80 上侦听会怎样-（不确定这会产生什么影响！）

我想知道您对上述解决方案的看法，并知道如何让我的应用程序像 gtalk、fb-chat 等其他聊天应用程序一样普遍可访问。

编辑：另外，我可能会缺少任何其他防火墙限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:02:13.860

通过 HTTPS（端口 443/tcp）使用 BOSH。很好地实现 BOSH 有点棘手，但肯定可以做到。使用不同的[XMPP 库](http://xmpp.org/xmpp-software/libraries/)。

否则，使用端口 443/tcp，并使用我们用于加密的旧式 TLS-handshake-first 机制，而不是 Start-TLS。如果端口 80/tcp 看起来不像 HTTP，一些网络中间盒会干扰您的流量。同样，如果前几个网络数据包看起来不像 SSL 或 TLS 握手，某些中间盒将不允许您在 443/tcp 上连接。

# html - 如何删除链接之间的空间？

> ID：14835942
> 
> 赞同：3
> 
> 时间：2013-02-12T15:29:17.753
> 
> 标签：html, css

```
<nav id="main_nav">
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">About Us</a></li>
                <li><a href="#">Forum</a></li>
                <li><a href="#">Contact Us</a></li>
            </ul>
        </nav>

#main_nav{
    background:green;
}

#main_nav li{
    display:inline-block;
    list-style:none;
    padding:10px;
    font-weight:bold;
}
#main_nav li a{
    text-decoration: none;
    color:white;
    padding:10px;
}

#main_nav li{
    -webkit-transition: opacity .5s, background .5s, color .5s;
    -moz-transition: opacity .5s, background .5s, color .5s;
    -o-transition: opacity .5s, background .5s, color .5s;
}

#main_nav li:hover{
    color:red;
    background:rgba(0, 0, 200,.5);
} 
```

这是我的导航栏，但我有问题。每个链接之间是一个小空间。当我快速将鼠标悬停在它们上方时，它看起来并不好。如何删除它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T15:34:54.257

几种方法：

*   删除列表项之间的空格（**[jsFiddle 示例](http://jsfiddle.net/j08691/7NvGa/)**）
*   使用注释（`<!-- -->`）来占据空白间隙（**[jsFiddle 示例](http://jsfiddle.net/j08691/7NvGa/1/)**）
*   关闭下一行的列表项标签（**[jsFiddle 示例](http://jsfiddle.net/j08691/7NvGa/2/)**）

请注意，还有第四个选项，您可以将`#main_nav`元素上的字体大小设置为零，然后将锚点上的字体大小设置为更大的值，但是使用此技术的一些早期版本的 Android 存在问题。**[jsFiddle 示例](http://jsfiddle.net/j08691/7NvGa/4/)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T15:34:56.223

当您使用`display:inline-block;`列表元素时会发生这种情况。您应该使用`float:left`或使用边距/填充

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T15:43:30.343

安排**`all the list in single line`**将删除空间...

```
<li><a href="#">Home</a></li><li><a href="#">About Us</a></li><li><a href="#">Forum</a></li><li><a href="#">Contact Us</a></li> 
```

更新小提琴：http: [//jsfiddle.net/RYh7U/78/](http://jsfiddle.net/RYh7U/78/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T15:41:42.530

看到这个小提琴：http: [//jsfiddle.net/zteA7/](http://jsfiddle.net/zteA7/)

这是因为 inline-block 创造了空间。

使`<li>`元素浮动并使用 CSS`:after`选择器插入更清晰的块元素，使`nav`块的高度与菜单的高度相同。（不需要 html）。

您也不需要指定容器高度，这应该意味着换行符将起作用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T15:38:09.473

这是因为 属性`display: inline-block;`，它导致`li`“块”仍然表现为内联元素，因此在它们之间建立空间。我遇到过这个问题几次，我知道两个（不是那么漂亮）的解决方案：

1.  制作`li`元素`float: left`，但要小心不要弄乱设计的其余部分。
2.  在元素之间写入填充空格的 html 注释`li`，因此浏览器不会识别它们之间的“空格”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T15:37:02.887

```
#main_nav li{
    display:inline-block;  /* the new web designer disease ?? */
    list-style:none;
    padding:10px;
    font-weight:bold;
    margin:0;
} 
```

只需以这种方式重写您的html

```
<ul>
    <li><a href="#">Home</a></li><li><a href="#">About Us</a></li><li><a href="#">Forum</a></li><li><a href="#">Contact Us</a></li>
</ul> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-12T15:31:49.237

从 <ul> 标记中删除任何填充。[使用 reset.css 来避免类似http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)的问题可能对您有用

# vb.net - 使用多个连接子句的 Linq To Sql 左连接

> ID：14835944
> 
> 赞同：0
> 
> 时间：2013-02-12T15:29:27.000
> 
> 标签：vb.net, linq

出于某种原因，我在以下代码中遇到语法错误。我想要实现的是带有多个连接子句的左连接。语法错误发生在关键字 INTO foobar。VS 2012 说出乎意料的 Token。任何帮助都会很棒，谢谢！

```
 Dim results = From f In foo _
                   Join b In bar On new with {f.Type,f.ID} Equals New With {"Test",b.ID} into fooBar _
                   from x in foobar.DefaultEmpty() _ 
                   Where foo.id = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:26:13.617

你想要一个[`Group Join`](http://msdn.microsoft.com/en-us/library/bb531303.aspx)：

```
Dim results = From f In foo _
               Group Join b In bar On 
                   New With {f.Type,f.ID} Equals New With {"Test",b.ID} _
                   Into fooBar = Group _
               from x in foobar.DefaultEmpty() _ 
               Where foo.id = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:04:35.997

尝试投射`f.ID`或`b.ID`

```
 Dim results = From f In foo _
                   Join b In bar On new with {f.Type, CInt(f.ID)} Equals New With {"Test", CInt(b.ID)} into fooBar _
                   from x in foobar.DefaultEmpty() _ 
                   Where foo.id = 1 
```

# java - 使用 Jackson JSON Generator，如何将多个对象写入一个字段？

> ID：14835952
> 
> 赞同：11
> 
> 时间：2013-02-12T15:29:40.720
> 
> 标签：java, json, jackson, jsonserializer

假设我有以下三个类（为简洁起见，省略了 getter 和 setter）：

```
@JsonAutoDetect
public class InfoCollection{
    private InfoType1 info1;
    private InfoType2 info2;
}

@JsonAutoDetect
public class InfoType1{
    private String fieldA;
}

@JsonAutoDetect
public class InfoType2{
    private String fieldB;
} 
```

我正在尝试编写一个以这种格式`JsonSerializer.serialize()`序列化对象的函数：`InfoCollection`

```
{
    "allInfo":{
        "fieldA":"foo",
        "fieldB":"bar"
    }
} 
```

这就是我现在所拥有的：

```
jsonGenerator.writeStartObject();
jsonGenerator.writeFieldName("allInfo");
jsonGenerator.writeObject(myInfoCollection.getInfo1());
jsonGenerator.writeObject(myInfoCollection.getInfo2());
jsonGenerator.writeEndObject(); 
```

这导致以下异常：

```
 org.codehaus.jackson.JsonGenerationException: Can not start an object, expecting field name 
```

我错过了一些小东西还是我完全走错了路？

**注意：**到目前为止，一些建议的解决方案涉及编写`InfoType1`和的每个单独字段`InfoType2`。我正在寻找一个不需要这个的解决方案，因为我想在具有许多字段的大型类上使用该解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T16:15:06.260

`writeFieldName("allInfo")`您应该调用而不是调用，`writeObjectFieldStart("allInfo")`因为“allInfo”是另一个 JSON 对象。因此，您的自定义序列化程序应如下所示：

```
public void serialize(InfoCollection infoCollection, JsonGenerator jgen, SerializerProvider provider) throws IOException{
    jgen.writeStartObject();
    jgen.writeObjectFieldStart("allInfo");
    jgen.writeObjectField("fieldA", infoCollection.getInfo1().getFieldA());
    jgen.writeObjectField("fieldB", infoCollection.getInfo2().getFieldB());
    jgen.writeEndObject();
    jgen.writeEndObject();
} 
```

或者您可以尝试基于注释的方法：

```
@JsonRootName("allInfo")
public class InfoCollection {
    @JsonUnwrapped
    private InfoType1 info1;
    @JsonUnwrapped
    private InfoType2 info2;

    /* getters, setters */
} 
```

（您需要启用`SerializationConfig.Feature.WRAP_ROOT_VALUE`功能才能使其正常工作。请参阅[序列化功能](https://github.com/FasterXML/jackson-databind/wiki/Serialization-features)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T15:58:48.510

In the future, when you have a stack trace, let us know in which line the problem shows up.

That said, the fix is probably:

```
jsonGenerator.writeStartObject();
jsonGenerator.writeFieldName("allInfo");

jsonGenerator.writeStartObject(); // start nested object
jsonGenerator.writeFieldName("fieldA"); // start field
jsonGenerator.writeObject(myInfoCollection.getInfo1().fieldA);

jsonGenerator.writeFieldName("fieldB"); // start fieldB
jsonGenerator.writeObject(myInfoCollection.getInfo2().fieldB);

jsonGenerator.writeEndObject(); // end nested object

jsonGenerator.writeEndObject(); 
```

Solution using a wrapper object:

```
@JsonAutoDetect
public class Wrapper {
    private transient InfoCollection data; // transient makes Jackson ignore this

    public String getFieldA() { return data.info1.fieldA; }
    public String getFieldB() { return data.info1.fieldB; }
} 
```

That makes Jackson see only what you want and how you want it.

Alternatively, use reflection to recursively collect all fields and their names:

```
List<Pair<String, Object>> data = collectFields( myInfoCollection ); 
```

`collectFields` should examine all fields and add everything to the list which is either a primitive or, say, where `field.getType().getName().startsWith("java.lang")` or any other rules you need.

If the field is a reference, call `collectFields()` recursively.

When you have the list, just call `jsonGenerator` in a loop to write the results.

# javascript - 如何让同一个域 iframe 禁用同一个域脚本

> ID：14835955
> 
> 赞同：1
> 
> 时间：2013-02-12T15:30:04.010
> 
> 标签：javascript, iframe, cross-domain

我有两个页面位于同一个文件夹中，

1) index.php 2) test.html

在 test.html 上，有一个以 index.php 为源的 iframe。

但是，我想禁用从 test.html 对 index.php 的 javascript 访问。换句话说，index.php 应该像它在不同的域上一样，即使它在同一个域上。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:33:39.657

最简单的方法，您是否可以创建一个指向您的服务器的别名子域？如果是这样，您可以通过执行以下操作来做到这一点：

```
http://mydomain.com/index.php 
```

然后通过调用 test.html

```
http://myaliasdomain.com/test.html 
```

看看这是否可能，否则我们可以考虑不同的解决方案。

# actionscript-3 - Stage3D 将 GLSL 移植到 AGAL

> ID：14835957
> 
> 赞同：0
> 
> 时间：2013-02-12T15:30:10.047
> 
> 标签：actionscript-3, shader, vertex-shader, stage3d, agal

我正在尝试将此 GLSL 着色器移植到 Stage3D 和 AGAL，但我无法使其工作：

顶点着色器 (GLSL)

```
attribute vec3 aVertexPosition;
    attribute vec4 aVertexColor;

    uniform mat4 uMVMatrix;
    uniform mat4 uPMatrix;

    varying vec4 vColor;

    void main(void) {
        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
        vColor = aVertexColor;
    } 
```

片段着色器 (GLSL)

```
 precision mediump float;

    varying vec4 vColor;

    void main(void) {
        gl_FragColor = vColor;
    } 
```

结果是：

顶点着色器 (AGAL)

```
mov vt0.w, vc0.x
mov vt0.xyz, va0.xyz

mov vt1.xyzw, vc1
mul vt5.xyzw, vt1, vc5
m44 op.xyzw, vt0.xyzw, vt5
mov v0.xyzw, va1.xyzw 
```

片段着色器 (AGAL)

```
mov oc.xyzw, v0.xyzw 
```

这是我执行的指令的跟踪：

```
(setVertexBufferAt) va0 3 0
(setVertexBufferAt) va1 4 3
(identity setProgramConstantsFromMatrix): vc0 1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1
(setProgramConstantsFromMatrix) vc1 1,0,0,0,0,1,0,0,0,0,1,0,0,0,-2,1
(setProgramConstantsFromMatrix) vc5 1.8106601238250732,0,0,0,0,2.4142136573791504,0,0,0,0,-1.0020020008087158,-1,0,0,-0.20020020008087158,0
render drawTriangles + present 
```

但我还是什么都看不到。

**更新：显然问题是三角形被剪裁了。相乘数组上的值大于 1.0，这使得它们被剪掉。所以我需要找到一种方法来规范化矩阵或扩展剪裁**

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T04:55:46.143

在这里挖掘一个旧帖子，但为了将来的任何搜索，您应该真正检查一下：

[https://github.com/adobe/glsl2agal](https://github.com/adobe/glsl2agal)

它的工作原理与您希望的一样 - 将有效的 glsl 顶点/片段着色器程序作为输入，将有效的 agal 作为输出。

例如： [http ://www.cmodule.org/glsl2agal/](http://www.cmodule.org/glsl2agal/)

# java - 从 Appengine 发送邮件

> ID：14835962
> 
> 赞同：0
> 
> 时间：2013-02-12T15:30:58.183
> 
> 标签：java, google-app-engine, email

我正在按照本[教程](https://developers.google.com/appengine/docs/java/mail/overview#Sending_Mail_with_the_JavaMail_API)从应用引擎发送电子邮件。

```
 Properties props = new Properties();
    Session session = Session.getDefaultInstance(props, null);
    String msgBody = "...";
    try {
        Message msg = new MimeMessage(session);
        msg.setFrom(new InternetAddress("myAppAdmin@gmail.com"));
        msg.addRecipient(Message.RecipientType.TO,
                new InternetAddress("AnotherMailOfMine@gmail.com"));
        msg.setSubject("Your Example.com account has been activated");
        msg.setText(msgBody);
        Transport.send(msg);

    } catch (AddressException e) {
        // ...
    } catch (MessagingException e) {
        // ...
    } 
```

但是我收到此错误

```
javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract    java.lang.Boolean net.adeptus.client.util.UtilService.sendMailActivation(net.adeptus.client.DTO.PlayerDTO)' threw an unexpected exception: java.lang.NoClassDefFoundError: com/sun/mail/util/TraceOutputStream
at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
at 
```

我已经检查过我没有使用 Oracle jar 并且邮件发件人存在。

任何想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-12T16:23:41.280

此错误意味着在编译时找到了此类定义，但在运行时未找到。

尝试将 JavaMail api 文件添加到您的 LIB 文件夹中。

*（我个人用的是1.4.1版本。（[http://download.java.net/maven/1/javax.mail/jars/](http://download.java.net/maven/1/javax.mail/jars/)））*

希望这可以帮助

# javascript - 在 ASP.NET MVC 中使用 Jquery 更新基于选定下拉列表的表？

> ID：14835972
> 
> 赞同：0
> 
> 时间：2013-02-12T15:31:33.287
> 
> 标签：javascript, jquery, ajax, asp.net-mvc

我有以下代码，一切正常。我有一个下拉列表，并且在下拉列表下方有一个表格列表。我想编写一个 jquery 代码，根据所选的下拉值一次只显示一个表。我的第一种方法是在客户端拥有所有表，并使用 jquery 对它们进行“过滤”，而我的第二种方法是使用对服务器的 ajax 请求并更新表。请看下面的代码。任何帮助将不胜感激 - 谢谢

```
 <div id="dropDown" class="span11">
    <div class="row-fluid">
        <div class="span4">
            Select Year of Manufacturing
        </div>
        <div class="span8">
            @Html.DropDownListFor(x => x.Products.SingleOrDefault().Year, @productItems)
        </div>
    </div>
    foreach (var item in Model.Products) {
    <h3>@item.Year</h3>
    <div id="dropDownDiv">
        <table class="table table-bordered">
            <tr>
                <th>
                    ProductId
                </th>
                <th>
                    Name
                </th>
                <th>
                    Description
                </th>
                <th>
                    Price
                </th>
                <th>
                    Proposed Price
                </th>
            </tr>
            <tr>
                <td>@item.Id
                </td>
                <td>@item.Name
                </td>
                <td>
                    @item.Description
                </td>
                <td>@item.Price
                </td>
                <td>
                    <input type="number" />
                </td>
            </tr>
        </table>
    </div>
    } 
</div> 
```

对于 Ajax 请求，我正在考虑做这样的事情，但不知道如何进行。

```
<script>
    //Filter By Year
    $(function () {
        $("select#Year").change(function (evt) {
            if ($("select#Year").val() != "-1") {
                $.ajax({
                    url: "/AjaxDropDown/FilterByYear",
                    type: 'Post',
                    data: { Year: $("select#Year").val() },
                    success: function (data) {  
                                     //Need some code here

                    }
                });
            }
        });
    });

</script> 
```

此外，在某些时候，我想使用 ajax 在此表上启用内联编辑，以便用户可以提交他们的建议价格..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:35:11.393

```
<script>
//Filter By Year
$(function () {
    $("select#Year").change(function (evt) {
        if ($("select#Year").val() != "-1") {
            $.ajax({
                url: "/AjaxDropDown/FilterByYear",
                type: 'Post',
                data: { Year: $("select#Year").val() },
                success: function (data) {  
                    var records = $.evalJSON(data);
                    var Years= $("select#Year");

                    // clear all previous options 
                    $("select#Year > option").remove();

                     // populate the records
                     for (i = 0; i < records.length; i++) {
                         Years.append($("<option />").val(records[i].Value).text(records[i].Text));
                     }
                }
            });
        }
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:46:01.803

首先，我会像这样更新您的标记，以保持 id 的唯一性并添加一种选择 div 的好方法：

```
<div id="dropDown" class="span11">
    <div class="row-fluid">
        <div class="span4">
            Select Year of Manufacturing
        </div>
        <div class="span8">
            @Html.DropDownListFor(x => x.Products.SingleOrDefault().Year, productItems)
        </div>
    </div>
    foreach (var item in Model.Products) {
    <div id="@string.Format("dropDownDiv_{0}", item.Year)" class="dropDownDiv">
        <h3>@item.Year</h3>
        <table class="table table-bordered">
            <tr>
                <th>
                    ProductId
                </th>
                <th>
                    Name
                </th>
                <th>
                    Description
                </th>
                <th>
                    Price
                </th>
                <th>
                    Proposed Price
                </th>
            </tr>
            <tr>
                <td>@item.Id
                </td>
                <td>@item.Name
                </td>
                <td>
                    @item.Description
                </td>
                <td>@item.Price
                </td>
                <td>
                    <input type="number" />
                </td>
            </tr>
        </table>
    </div>
    } 
</div> 
```

然后如果它们都在页面上，您可以像这样在没有ajax请求的情况下按年份过滤：

```
$(function () {
    $("#Year").change(function (evt) {
        var year = $("#Year").val();
        // Hide all divs with class dropDownDiv but show the one with the appropriate id
        $('.dropDownDiv').hide().filter('#dropDownDiv_' + year).show();
    });
}); 
```

jsfiddle：http: [//jsfiddle.net/dg5bZ/6/](http://jsfiddle.net/dg5bZ/6/)

# user-interface - 用例图包括和扩展

> ID：14835973
> 
> 赞同：0
> 
> 时间：2013-02-12T15:31:32.310
> 
> 标签：user-interface, include, uml, extend, use-case

我有一个简单的场景，显示了鼠标和键盘与 GUI 的交互。鼠标和键盘可以选择 UI 元素然后单击它们或按 Enter/Space 来触发它们的动作。哪一张图在用例图中显示了我的场景的正确形式？顺便说一句，我不知道它们是否是正确的 UML 图 :) 或者你认为这些用例涉及很多细节吗？

**第一个用例：** ![在此处输入图像描述](../Images/6a924fa5d744d44429e18b14b23c0330.png)

**第二个用例：** ![在此处输入图像描述](../Images/8f197a763d475c12d03e31a1f436ab8d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:31:42.227

这对于设置用例图来说太细了。:) 您是否尝试过其他图表类型来更好地匹配这种详细程度？

# java - JavaFX：表格单元格的动画（淡出）背景

> ID：14835975
> 
> 赞同：3
> 
> 时间：2013-02-12T15:31:36.033
> 
> 标签：java, css, animation, javafx-2, javafx

有什么方法可以访问 JavaFX 的背景颜色`TableCell`，因此可以像这样以某种方式对其进行动画处理：

```
FadeTransition ft = new FadeTransition(Duration.millis(500), [insert Object here]); 
```

目标是在成功编辑后让它闪烁半秒钟......

非常感谢！

# bash - Bash如何将单词附加到行尾？

> ID：14835977
> 
> 赞同：12
> 
> 时间：2013-02-12T15:31:36.717
> 
> 标签：bash, unix, sed, awk, grep

我已经在 bash 中执行了一个命令来从这样的文件中检索一些地址：

```
grep address file.txt | cut -d'=' -f2 | tr ':' ' ' 
```

产量：

```
xxx.xx.xx.xxx port1
xxx.xx.xx.xxx port2 
```

我想将'eth0'附加到每个输出行，然后理想地循环结果以在每一行调用一个命令。我遇到的问题是在每一行的末尾获得额外的字符串。我试过了：

```
| sed -e 's/\(.+)\n/\1 eth0/g' 
```

这不起作用..然后假设我把它放在那里，如果我将它包装在一个 for 循环中，它不会传递完整的行，因为它们包含空格。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-12T15:34:40.957

您可以匹配`$`附加到一行，例如：

```
sed -e 's/$/ eth0/' 
```

编辑：

要遍历线条，我建议使用`while`循环，例如：

```
while read line
do
  # Do your thing with $line
done < <(grep address file.txt | cut -d'=' -f2 | tr ':' ' ' | sed -e 's/$/ eth0') 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-12T15:34:33.417

如何使用`awk`：

```
awk -F= '/address/{gsub(/:/," ");print $2,"eth0"}' file 
```

演示：

```
$ cat file
junk line
address=192.168.0.12:80
address=127.0.0.1:25
don not match this line

$ awk -F= '/address/{gsub(/:/," ");print $2,"eth0"}' file
192.168.0.12 80 eth0
127.0.0.1 25 eth0 
```

或者只是`sed`：

```
$ sed -n '/address/{s/:/ /g;s/.*=//;s/$/ eth0/p}' file
192.168.0.12 80 eth0
127.0.0.1 80 eth0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T16:20:44.063

所有你需要的是：

```
awk -F'[=:]' '{print $2, $3, "eth0"}' file.txt |
while IFS= read -r ip port eth
do
   printf "ip=%s, port=%s, eth=%s\n" "$ip" "$port" "$eth"
done 
```

使用 read 时始终使用 IFS= 和 -r ，除非您有非常具体的理由不这样做。谷歌为什么。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-07T15:21:17.240

我来这里是为了寻找相同的答案，但以上都不像

```
sed -i 's/address=.*/& eth0/g' file 
```

用 sed 搜索并替换以地址开头的行，用同一行加上“eth0”替换

例如。

```
sed -i 's/address=.*/& eth0/g' file; cat file
junk line
address=192.168.0.12:80 eth0
address=127.0.0.1:25 eth0
don not match this line 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-07T21:07:27.220

```
typeset TMP_FILE=$( mktemp )
touch "${TMP_FILE}"
cp -p filename "${TMP_FILE}"
sed -e 's/$/stringToAdd/' "${TMP_FILE}" > filename 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-12T15:33:45.740

你可以吗？

```
kent$ echo "xxx.xx.xx.xxx port1
xxx.xx.xx.xxx port2"|sed 's/.*/& eth0/'
xxx.xx.xx.xxx port1 eth0
xxx.xx.xx.xxx port2 eth0 
```

PS，您可以将您的剪切、tr（甚至是您的示例中的 grep）合并到一个 sed/awk 调用中，以使 cmdline 更简单、更快。

# git - 为什么我不必在 git merge 后提交

> ID：14835981
> 
> 赞同：14
> 
> 时间：2013-02-12T15:31:47.687
> 
> 标签：git, git-merge

我有一个 repo master，我使用 file1.txt 和 file2.txt

```
git checkout -b fix1 
```

然后我更改 file1.txt

我做了一个

```
git commit -a 
```

然后我做一个

```
git checkout master 
```

然后我做一个

```
git checkout -b fix2 
```

然后我更改 file2.txt

我做了一个

```
git commit -a 
```

然后`git checkout master` 一个

```
git merge fix1
git marge fix2 
```

但如果我做一个

```
 commit -a 
```

我明白了

```
# 在分支master上
没有什么可提交的（工作目录干净）

```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-12T15:34:13.510

`git merge`自动提交。如果您不想提交，请添加`--no-commit`参数：

> ```
>  --commit, --no-commit
>       Perform the merge and commit the result. This option can be used to override --no-commit.
> 
>       With --no-commit perform the merge but pretend the merge failed and do not autocommit, to give the user
>       a chance to inspect and further tweak the merge result before committing. 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T15:33:53.937

如果合并成功且没有冲突，git 将自动提交它（您应该可以通过简单地检查来验证`git log`）。

[文档说明](http://www.kernel.org/pub/software/scm/git/docs/git-merge.html)（强调添加）：

> ...“git merge topic”将重播主题分支上所做的更改，因为它从 master（即 E）分歧，直到它在 master 之上的当前提交（C），**并将结果与​​新提交**一起记录两个父提交的名称和来自用户的描述更改的日志消息

如果您想避免这种情况，请使用以下`--no-commit`标志：

```
git merge --no-commit fix1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T15:34:19.063

没有冲突的合并文件已经合并。您可以直接推送您的合并文件。

# java - 在 Java 中使用外部 IP 地址建立连接

> ID：14835982
> 
> 赞同：7
> 
> 时间：2013-02-12T15:31:47.410
> 
> 标签：java, sockets, connection, port

我正在尝试构建一个聊天程序。我编写了代码，一切正常，当我使用我的电脑并使用 127.0.0.1 连接时，它仍然运行良好。我还成功地在我的笔记本电脑和我的计算机之间成功连接，它们在同一路由器上运行。（我使用内部 IP 地址来执行此操作，10.0.0.3）。

现在我正在尝试在我的路由器和其他路由器之间建立连接。为此，我正在尝试连接到外部 IP 地址。我通过路由器进行端口转发部分，还创建了一个静态 IP。当我运行代码时，我总是收到“连接被拒绝错误”。

这是代码：

MainServer.java：

```
import java.util.*;
import java.io.*;
import java.net.*;

public class MainServer {
  private ArrayList<Socket> sockets;
  public MainServer() {
    ServerSocket server_socket;
    try {
      server_socket = new ServerSocket(5005);
      sockets = new ArrayList<Socket>();
      System.out.println("server is now running");
      while(true) {
        Socket socket = server_socket.accept();
        sockets.add(socket);
        try {
          PrintWriter writer = new PrintWriter(socket.getOutputStream());
          writer.println("---you are connected to the server---\r\n");
          writer.flush();
        } catch(Exception e) {e.printStackTrace();}
        System.out.println("server connected to " + socket.getInetAddress());
        Reader reader = new Reader(socket);
        Thread thread = new Thread(reader);
        thread.start();
      }
    } catch (IOException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    }
  }

  public static void main(String[] args) {
    MainServer server = new MainServer();
  }
  class Reader implements Runnable {
    Socket socket;
    public Reader(Socket socket) {
      this.socket=socket;
    }
    public void run() {
      while(true) {
        try {
          InputStreamReader stream_reader = new InputStreamReader(socket.getInputStream());
          BufferedReader reader = new BufferedReader(stream_reader);
          while(true) {
            String str = reader.readLine();
            if(str==null)
              continue;
            System.out.println("message from the client " + socket.getInetAddress() + ": " + str);
            send_back_message(str);
          }
        } catch (IOException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
        }
      }
    }
    public void send_back_message(String str) {
      try {
        for(Socket send_to_socket: sockets) {
          PrintWriter writer = new PrintWriter(send_to_socket.getOutputStream());
          writer.println(send_to_socket.getInetAddress()+ ": " + str);
          writer.flush();
        }
      } catch(Exception e) {e.printStackTrace();}
    }
  }
} 
```

客户端.java：

```
public Client() {
  frame = new JFrame();
  JPanel panel = new JPanel();
  chat = new JTextArea(20,40);
  chat.setEditable(false);
  JScrollPane scroll = new JScrollPane(chat);
  text = new JTextField(32);
  JButton send = new JButton("Send");
  send.addActionListener(new SendButtonListener());
  panel.add(scroll);
  panel.add(text);
  panel.add(send);
  frame.getContentPane().add(panel);
  frame.setSize(500,500);
  frame.setVisible(true);
  try {
    socket = new Socket("77.126.189.65",5005);
  } catch (Exception e) {
    e.printStackTrace();
  }
  Thread thread = new Thread(new ClientReader());
  thread.start();
}
public static void main(String[] args) {
  Client client = new Client();
}
class SendButtonListener implements ActionListener {
  public void actionPerformed(ActionEvent e) {
    try {
      PrintWriter writer = new PrintWriter(socket.getOutputStream());
      writer.println(text.getText());
      writer.flush();
      text.setText("");
    } catch (IOException e1) {
      e1.printStackTrace();
    }
  }
}
class ClientReader implements Runnable {
  public void run() {
    try {
      InputStreamReader stream_reader = new InputStreamReader(socket.getInputStream());
      BufferedReader reader = new BufferedReader(stream_reader);
      while(true) {
        String str = reader.readLine();
        if(str==null)
          continue;
        chat.setText(chat.getText() + str + "\r\n" );
      }
    } catch (IOException e) {
      e.printStackTrace();
    }
  }
}
} 
```

我也试过[这个工具](http://www.yougetsignal.com/tools/open-ports/)。当我运行 MainServer 文件并尝试该工具时，我得到了肯定的答案。我也对自己的 Eclipse 持肯定态度。当我的 MainServer 成功连接时，它会使用以下几行打印一条关于它的消息：

```
Socket socket = server_socket.accept();
System.out.println("server connected to " + socket.getInetAddress()); 
```

所以每次我点击上面工具中的“检查”按钮时，我都会在我的 Eclipse 控制台（system.out.println 部分）中收到一条消息：

> 服务器连接到 /69.163.149.200

因此我认为问题可能没有连接到 MainServer 或 portforwading/firewall/static IP。

我还认为可能会出现问题，因为我正在尝试从我自己的路由器设备连接到我自己的路由器。我将在接下来的半小时内将 MainServer 文件保持打开状态，因此如果有人可以在他的计算机上运行 Client.java，那将会很有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T16:09:13.553

您尝试做的事情有点奇怪，但这是可能的。

您只需要知道您的路由器是否支持[NAT Loopback / NAT Reflection](http://en.wikipedia.org/wiki/Network_address_translation#NAT-loopback)并激活它。

> **NAT环回**
> 
> 也称为 NAT 发夹或 NAT 反射。NAT-loopback 是许多消费者路由器中的一项功能，它允许用户从 LAN 网络内部连接到自己的公共 IP 地址。当网站（带有域）托管在该 IP 地址上时，这尤其有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:52:40.947

如果不正确配置路由器，您将无法执行此操作。大多数路由器不允许（默认情况下）在其外部（WAN）端口上的传入连接。如果您想允许这样做，您需要进入您的路由器配置并将其配置为允许您使用的特定端口的外部 IP 上的连接。然后，您必须配置路由器以将该传入连接从外部 IP 地址/端口重定向到实际服务器的内部 IP 地址/端口。

这通常是在线游戏玩家在自己家中设置服务器的方式。这也是有多少人从外部世界连接到他们自己的内部网络。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T23:16:55.347

您可以将您的内部 IP 地址与您的服务器名称一起添加到 /etc/hosts，例如，如果您有外部 IP 10\. 10\. 123\. 123，并且使用服务器名称 YOURCOMPUTER_1.XXX.XXX，您想在内部连接网络，您可以添加：

127.0.0.1 YOURCOMPUTER_1.XXX.XXX 到您的 /etc/hosts

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-16T07:46:32.480

首先，在内部设置一个静态 IP（如`192.168.1.6`）。

如果你想通过外部IP连接，有两种方法：

1.  如果您有路由器，请使用端口转发。

2.  如果您有加密狗，则无需转发；您可以直接访问服务器。只需提供加密狗的外部 IP（要找到它，请使用类似的 what's-my-IP 服务[）](https://www.whatismyip.com/)和端口号（任意）。（加密狗不会被任何 ISP 阻止。）

# c# - 如何在 PowerShell 中创建具有行为（方法）的真实对象？

> ID：14835983
> 
> 赞同：12
> 
> 时间：2013-02-12T15:31:48.707
> 
> 标签：c#, powershell, powershell-2.0, powershell-3.0

可能这个问题之前已经回答过......但我还没有找到满足我需求的具体答案。

顺便说一句，我正在使用 PowerShell 3

好吧，我是 PowerShell 的新手，但我作为 C# 开发人员拥有丰富的经验，因此使用对象对我来说非常重要。

所以我想知道是否有一种**干净的方法**可以在 PowerShell 脚本中应用*OOP 概念*（不是所有的概念，尽管那会很棒），例如我想做一些特定的事情。

**注意：我知道我可以在 PowerShell 中编写 C# 代码来创建 DTO，并且我可以在 C# 中创建 PowerShell 二进制模块，我过去做过，但我现在正在寻找的是编写的能力我在 PowerShell 中的所有代码，但以*面向对象的方式*。**

我想做的事情：

*   在 PowerShell 中创建一个对象，并公开一个用 PowerShell 编写的函数，如下所示：

    ```
    function New-Person
    (
        [Parameter()][string]$firstName
    )
    {
        function Walk()
        {
            Write-Host "Walking...";
        }

        $person = New-Object psobject;

        $person | Add-Member -MemberType NoteProperty -Name FirstName -Value $firstName;

        #This line does not work
        #$person | Add-Member -MemberType CodeMethod -Name Walk -Value Walk;

        return $person;
    }

    $MyPerson = New-Person -firstName "JP";

    $MyPerson;

    #This line does not work
    $MyPerson.Walk(); 
    ```

*   封装行为，这意味着在我的对象中创建函数，然后将它们标记为私有

*   *[很高兴有]。*创建基类，以便我可以继承和专门化我的行为覆盖方法

*   *[很高兴有]。*创建接口，以便我可以开始独立思考我的 PowerShell 方法的单元测试（我知道有像 Pester 这样的工具可以做到这一点，我只专注于 OOP 功能）

到目前为止我所做的是**创建仅具有属性的对象（DTO）**，但我想为我的对象添加行为

如果你们指出我正确的方向，我将不胜感激

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T15:37:14.343

使用方法创建对象的两个选项：

1.  添加成员
2.  新模块-AsCustomObject

代码示例：

```
$person | Add-Member -MemberType ScriptMethod -Value {
    'I do stuff!'
}

$person = New-Module -AsCustomObject -ScriptBlock {
    $Property = 'value'
    [string]$Other = 'Can be strongly typed'

    function MyMethod {
        'I do stuff!'
    }

} 
```

编辑：谈到私人/公共......在后一个示例中，属性不会“默认”显示。您可以决定什么是公开的，`Export-ModuleMember`并指定将公开的`-Variable`（属性）和/或`-Function`（方法）。如果没有显式`Export-ModuleMember`，它将与“普通”模块中的行为相同 - 仅导出函数（方法）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-07T14:00:50.780

PowerShell v5 引入了完整的类支持，使您可以轻松地使用属性构建您自己的类并实现方法。

在此处查看 Trevor 关于该主题的精彩博文。[Trevor Sullivan，实现一个 .net 类](http://trevorsullivan.net/2014/10/25/implementing-a-net-class-in-powershell-v5/)

### 独立示例

这是一个名为 Fox 的组合类型的 PowerShell 类，它有一个`.Deploy()`方法，应该显示这是如何完成的

```
class Fox {
    # describes the sixe of the fox
    [String] $Size;
    # Property: the foxes color
    [String] $Color;

    # Constructor: Creates a new Fox object, with the specified
    #              size and name / owner.
    Fox([string] $NewSize, [String] $NewName) {
        # describes the sixe of the fox
        $this.Size = $NewSize;
        # Property: the foxes color
        $this.Color = $NewName;
    }

    # Method: Change the size of the fox     
    [void] Morph([UInt32] $Amount) {
        try {
            $this.Size = $this.Size - $Amount;
        }
        catch {
            Write-Warning -Message 'You tried to set an invalid size!';
        }
    }

    # Method: BreakGlass resets the beer size to 0.
    [void] Deploy() {
        Write-Warning -Message "The $($this.Color) fox, which is $($this.Size) in stature, goes off into the distance"        
    }
} 
```

在实践中： [![在此处输入图像描述](../Images/f71cce45ed3fc296cd0827cd1218055f.png)](https://i.stack.imgur.com/ToqaD.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-13T12:12:01.030

如果你想要**完整**的 OOP（包括继承，虽然不是接口），那么[PSClass](http://psclass.codeplex.com/)是一个 MS-PL 许可的实现。

# php - 带有 PHP 自提交表单和验证的 AJAX

> ID：14835985
> 
> 赞同：1
> 
> 时间：2013-02-12T15:31:53.427
> 
> 标签：php, jquery, ajax, forms

我一直在通过 David Powers 的“PHP 解决方案”一书学习 PHP，它有一个带有基本验证/错误处理和输入清理的联系表，我想在不刷新页面的情况下使用。

我正在使用 XAMPP 在本地对此进行测试，并且使用 php 表单本身可以完美运行：错误消息显示正确，如果表单成功提交，则会显示感谢页面并将表单作为电子邮件发送到我的测试电子邮件地址.

现在我需要表单来使用 AJAX 提交和显示错误消息。我已经阅读了很多关于实现这一点的帖子，但我没有成功实现这一点。我已经尝试了 jQuery $.ajax 和 $.post 方法 - 如果所有字段都已填写，则会显示成功消息，但不会发送消息。

我的猜测是 javascript 和 php 数组的结构不同，但不知道如何协调这一点。我什至不确定 php 处理脚本正在获取/发送什么，如果有的话。如何在不刷新页面的情况下提交此表单，但仍使用 php 脚本进行服务器端验证？

为简化起见，我从页面中删除了所有其他内容（并将所有文件放在同一个文件夹中），除了表单：php、html 和我无法弄清楚的 jQuery/AJAX。

希望这是有道理的。我的4个文件：

mySite.js（我遇到问题的 jQuery/AJAX...）：

```
mySite = {

    jsFormSubmission : function() {
        $("#feedback").submit(function(event){
            event.preventDefault();
            var errorMsg = "<p class=\"errorBox\">Please fix the item(s) indicated.</p>";
            var successMsg = "<p class=\"messageBox\">Thanks for the submission, your message has been sent.</p>";

            var myObject = {
                name : $("#name").val(),
                email : $("#email").val(),
                comments : $("#comments").val()
            };

            var ajaxData = JSON.stringify(myObject);

            $.ajax({
                type: 'POST',
                url: 'form.php',
                data: ajaxData,
                success: function(data){
                    $(".formResult").html(successMsg);
                },
                error: function(http) {
                    $(".formResult").html(errorMsg);
                    alert(http.responseText);
                }
            });
        });
    }

}; 
```

表格（contact.php）：

```
<?php include("form.php"); ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src=" mySite.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            mySite.jsFormSubmission();
        });
    </script>
</head>

<body>
    <div id="contact">

        <p class="formResult"></p>

        <?php $errorForm = (($_POST && $suspect) || ($_POST && isset($errors['mailfail'])));
              $errorTag = $missing || $errors;
              if ($errorForm || $errorTag) { ?>

        <p class="errorBox">
        <?php } ?>
            <?php if ($errorForm) { ?>
                Sorry, your message could not be sent. Please try again later.
                <?php  } elseif ($errorTag) { ?>
                Please fix the item(s) indicated.
            <?php } ?>
        <?php if ($errorForm || $errorTag) { ?>
        </p>
        <?php } ?>

        <form id="feedback" method="post" action="">

            <div class="tag">
                <label id="lblName" for="name">Name: 
                <?php if ($missing && in_array('name', $missing)) { ?>
                    <span style="color:red; font-weight:bold;">Please enter your name</span>
                <?php } ?>
                </label>
                <input name="name" id="name" type="text" class="formbox"
                <?php if ($missing || $errors) {
                    echo 'value="' . htmlentities($name, ENT_COMPAT, 'UTF-8') . '"';
                } ?>>
            </div>

            <div class="tag">
                <label id="lblEmail" for="email">Email: 
                <?php if ($missing && in_array('email', $missing)) { ?>
                    <span style="color:red; font-weight:bold;">Please enter your email address</span>
                <?php } elseif (isset($errors['email'])) { ?>
                    <span style="color:red; font-weight:bold;">Invalid email address</span>
                <?php } ?>
                </label>
                <input name="email" id="email" type="text" class="formbox"
                <?php if ($missing || $errors) {
                    echo 'value="' . htmlentities($email, ENT_COMPAT, 'UTF-8') . '"';
                } ?>>
            </div>

            <div class="tag">
                <label id="lblComments" for="comments">Comments: 
                <?php if ($missing && in_array('comments', $missing)) { ?>
                    <span style="color:red; font-weight:bold;">Please enter your message</span>
                <?php } ?>
                </label>
                <textarea name="comments" id="comments" cols="60" rows="8"><?php 
                    if ($missing || $errors) {
                        echo htmlentities($comments, ENT_COMPAT, 'UTF-8');
                    } ?></textarea>
            </div>

            <p>
                <input name="send" id="send" type="submit" value="Send message">
            </p>

        </form>
    </div>
    </body>
</html> 
```

form.php（包含在contact.php的顶部）：

```
<?php 
$name = '';
$email = '';
$comments = '';
$required = '';
$errors = array();
$missing = array();
// check if the form has been submitted
if (isset($_POST['send'])) {
    //email processing script
    $to = 'johntest2@localhost';
    $subject = 'Website contact form';
    //list expected fields
    $expected = array('name', 'email', 'comments');
    // set required fields
    $required = array('name', 'email', 'comments');
    $headers = "From: Website Contact Test<johntest1@localhost>\r\n";
    $headers .= 'Content-Type: text/plain; charset=utf-8';

    require('processmail.php');
    if ($mailSent) {
        header("Location: thankYou.php#main");
        $messageConfirm = true;
        exit;
    }
}
?> 
```

processmail.php（验证脚本 - 包含在 form.php 中）：

```
<?php

$suspect = false;
$pattern = '/Content-Type:|Bcc:|Cc:/i';

// function to check for suspect phrases
function isSuspect($val, $pattern, &$suspect) {
    if (is_array($val)) {
        foreach ($val as $item) {
            isSuspect($item, $pattern, $suspect);
        }
    } else {
        if (preg_match($pattern, $val)) {
            $suspect = true;
        }
    }
}
isSuspect($_POST, $pattern, $suspect);

if (!$suspect) {
    foreach ($_POST as $key => $value) {
        $temp = is_array($value) ? $value : trim($value);
        if (empty($temp) && in_array($key, $required)) {
            $missing[] = $key;
        } elseif (in_array($key, $expected)) {
            ${$key} = $temp;
        }
    }
}

// validate the user's email
if (!$suspect && !empty($email)) {
    $validemail = filter_input(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);
    if ($validemail) {
        $headers .= "\r\nReply-To: $validemail";
    } else {
            $errors['email'] = true;
    }
}

$mailSent = false;

if (!$suspect && !$missing && !$errors) {

    // initialize the $message variable
    $message = '';
    foreach($expected as $item) {
        if (isset(${$item}) && !empty(${$item})) {
            $val = ${$item};
        } else {
            $val = 'Not selected';
        }
        if (is_array($val)) {
            $val = implode(', ', $val);
        }
        $item = str_replace(array('_', '-'), ' ', $item);
        $message .= ucfirst($item).": $val\r\n\r\n";
    }

    $message = wordwrap($message, 70);

    $mailSent = mail($to, $subject, $message, $headers);
    if (!$mailSent) {
        $errors['mailfail'] = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:42:45.003

有几种方法可以让您从 PHP 端显示错误。你可以抛出一个我不推荐的异常，或者使用标题：

```
header($_SERVER['SERVER_PROTOCOL'] . ' 500 Internal Server Error', true, 500); 
```

在您的 AJAX 调用中，使用 jQuery 错误回调：

```
$.ajax({ 
    url: //url,
    data: //data,
    success: function (data) { //show success },
    error: function () { //display code here } 
}); 
```

您还可以从 PHP 端返回错误消息正文中的错误，并在错误回调中从正文中删除该错误。

PHP：

```
header($_SERVER['SERVER_PROTOCOL'] . ' 500 Internal Server Error', true, 500);
echo 'Your error message'; 
```

JavaScript：

```
error: function(http) {
   // show http.responseText;
} 
```

此外，对于您的表单提交，将您的数据打包到一个对象中，然后将其序列化。所以：

```
var myObject = {
    property1 : 'string',
    property2 : [ 'array' ]
};

var ajaxData = JSON.stringify(myObject); 
```

# objective-c - 如何访问 NSMutableArray 中的值

> ID：14835996
> 
> 赞同：-1
> 
> 时间：2013-02-12T15:32:11.420
> 
> 标签：objective-c, nsmutablearray

我在 didSelectRowAtIndexPath: 方法中有一个 NSMutableArray：

```
[self.somethingSelected addObject:[self.arrayFromTable objectAtIndex:indexPath.row]]; 
```

这个 self.somethingSelected（一个 NSMutableArray）的输出如下。如何从以下输出中仅访问 id 值？

我希望 self.somethingSelected 存储“11,9,21 ...”并且没有其他值，例如标题等...

```
(
    {
        id = 11;
        title = Title0;
    },
    {
        id = 9;
        title = Title1;
    },
    {
        id = 21;
        title = Title2;
    },
) 
```

我试过：

```
[self.somethingSelected addObject:[self.arrayFromTable objectAtIndex:indexPath.row] objectForKey:@"id"]; 
```

但我想我可能混淆了 NSDictionary 和 NSMutableArray。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:38:00.560

如果 arrayFromTable 包含的 NSDictionaries 比您尝试的应该有效，但您缺少一个 '[' & ']'。它应该是：

```
 [self.somethingSelected addObject:[[self.arrayFromTable objectAtIndex:indexPath.row] objectForKey:@"id"]]; 
```