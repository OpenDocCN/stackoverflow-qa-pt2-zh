# StackOverflow 问答 16135000-16135999

# google-chrome-extension - 您如何将 Universal Analytics 集成到 Chrome 扩展程序中？

> ID：16135000
> 
> 赞同：46
> 
> 时间：2013-04-21T18:56:03.463
> 
> 标签：google-chrome-extension, google-analytics

chrome 扩展指南有一个旧分析安装教程：[https ://developer.chrome.com/extensions/tut_analytics.html](https://developer.chrome.com/extensions/tut_analytics.html)

说明只是说链接到 https 版本并更新清单以允许从该 URL 加载脚本。所以这些应该仍然适用于新版本。事实上，我可以看到从服务器加载的脚本。

一旦脚本加载分析不会正确初始化它自己并且永远不会处理它的内部队列（ga.f）以将这些事件发送到服务器。控制台中没有错误。它只是静静地什么都不做。

我的猜测是，新的 Universal Analytics 只是没有设置为在扩展环境中运行，但通用文档没有提到这一点：[https ://developers.google.com/analytics/devguides/collection/analyticsjs/](https://developers.google.com/analytics/devguides/collection/analyticsjs/)

有谁知道是否可以将 Universal Analytics 添加到扩展程序中以及何时添加？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-03-03T16:46:03.103

谷歌代码有一个[问题](https://code.google.com/p/analytics-issues/issues/detail?id=312)：解决方案是以[官方方式通过分析您](https://developers.google.com/analytics/devguides/collection/analyticsjs/tasks#disabling)*自己的协议检查功能*或简单地`null`不检查。

这必须在*之后* `ga('create', ...)` **：**

```
ga('set', 'checkProtocolTask', null); // Disable file protocol checking. 
```

所以您不需要修改原始的 analytics.js 脚本。只需包含标准跟踪代码片段（不要忘记添加“https:”前缀）并将“ [https://www.google-analytics.com](https://www.google-analytics.com) ”添加到您的内容安全政策。

对 ayal gelles 解决方案的说明：无需添加`chrome-extension://...`到内容安全策略中，因为它已包含在`'self'`声明中。此外，您应该使用`chrome.runtime.getURL("path/to/analytics.js")`. 这样您就不需要知道扩展程序的 ID，Chrome 会为您填写。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-06-11T14:14:20.583

我为此写了一篇博文 -[如何将 Google 的 Universal Analytics 跟踪添加到 Chrome 扩展程序](http://davidsimpson.me/2014/05/27/add-googles-universal-analytics-tracking-chrome-extension/)

这是它的胆量：

```
// Standard Google Universal Analytics code
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); // Note: https protocol here

ga('create', 'UA-XXXXX-YY', 'auto');
ga('set', 'checkProtocolTask', function(){}); 
ga('send', 'pageview', '/options.html'); 
```

我特别想强调 3 点：

*   在脚本地址的开头指定“https”以匹配 manifest.json 文件中的列表
*   `checkProtocolTask`用空函数覆盖
*   通过指定路径发送虚拟综合浏览量 – `/options.html`– 否则 Google Analytics 将拒绝该格式的 URL`chrome-extension://gdocgfhmbfbbbmhnhmmejncjdcbjkhfc/options.html`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-07-21T09:22:03.257

我刚刚遇到这个，似乎已经破解了我的方式。这可能会在某些时候中断或无法完全发挥作用，但这里有：

*   从这里下载 GA uglified+minified 源代码：https: [//www.google-analytics.com/analytics.js](https://www.google-analytics.com/analytics.js)，放入您的 chrome 扩展文件夹，稍后可以由后台页面加载。

*   在其中，找到一个看起来像这样的函数：

```
function Oa(){var a=M[B][E];if("http:"!=a&&"https:"!=a)throw"abort";}. 
```

这是“失败点”，因为我们的“协议”是“chrome-extension：”，而不是两者中的任何一个。

*   所以..将此功能更改为：

```
function Oa(){var a=M[B][E];if("chrome-extension:"!=a&&"http:"!=a&&"https:"!=a)throw"abort";} 
```

*   将此类“内容安全策略”添加到您的清单文件中，确保它指向您刚刚修改的analytics.js 的本地版本：

```
"content_security_policy": "script-src 'self'  chrome-extension://EXTENSIONID/path/to/analytics.js;  object-src 'self'", 
```

*   将 GA 片段更改为 ALSO 指向同一个文件，如下所示：

```
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','chrome-extension://EXTENSIONID/path/to/analytics.js','ga'); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-04T20:16:52.263

关于新的analytics.js（与旧的ga.js相反）这个例子对我有用：

```
function setupGoogleAnalytics() {
  if (!window.ga) {
    (function(){
      window.ga = function() {
        (window.ga.q = window.ga.q || []).push(arguments);
      }, window.ga.l = 1 * new Date();
      var tag = 'script';
      var a = document.createElement(tag);
      var m = document.getElementsByTagName(tag)[0];
      a.async = 1;
      a.src = 'https://www.google-analytics.com/analytics.js';
      m.parentNode.insertBefore(a, m);
    })();
    ga('create', 'UA-XXXXXXX-Y', 'auto');
    ga('set', 'checkProtocolTask', null);
  }
} 
```

请注意，您需要将以下 content_security_policy 片段添加到 manifest.json：

```
{
...
  "content_security_policy": "script-src 'self' https://www.google-analytics.com; object-src 'self'"
...
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-08T09:26:07.747

我设法使用[Chrome 平台分析](https://github.com/GoogleChrome/chrome-platform-analytics/wiki)(CPA) 启动并运行 Google Analytics。唯一令人困惑的部分是如何在 GA 的管理控制台中设置属性。我必须创建一个移动应用程序属性，这不太直观。

此外，我创建了一个[选项页面](https://developer.chrome.com/extensions/options)，允许用户在需要时禁用分析，以符合[退出](https://github.com/GoogleChrome/chrome-platform-analytics/wiki#add-privacy-support-aka-opt-out)要求。

我希望这会有所帮助！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-18T13:16:19.387

有一种方法可以使用 Measurement Protocol 与 Google Analytics（分析）进行通信。我为此开发了一个脚本：

[https://github.com/melalj/universal-ga-extension](https://github.com/melalj/universal-ga-extension)

# variables - 将参数传递给所有视图

> ID：16135001
> 
> 赞同：0
> 
> 时间：2013-04-21T18:56:20.247
> 
> 标签：variables, groovy, playframework, playframework-1.x

我有一个播放应用程序（播放 1.2.4）。在我的应用程序的每个页面中，我都希望能够访问已登录的用户（使用 groovy）。所以我可以执行权限检查等。我试着把它放在主模板中，就在`doLayout`

```
#{set user:user/} 
```

我可以在我的应用程序的主页中访问用户，但是当通过指向其他页面的链接时，我无法再访问用户变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:11:23.557

我认为您对在 Play!Framework 上使用`#{set}`和标记存在误解。`#{get}`查看文档[`#{set}`](http://www.playframework.com/documentation/1.2.4/tags#set)和[`#{get}`](http://www.playframework.com/documentation/1.2.4/tags#get)标签。

我给你举个例子，你有三个模板，如下所示：

### main.html

```
<html>
   <head>
       <title>#{get 'title' /}</title>
   </head>
   <body>
       #{doLayout /}
   </body>
</html> 
```

### 模板1.html

```
#{extends 'main.html' /}
#{set title:header /}

<p>This is template1.html page</p> 
```

### 模板2.html

```
#{extends 'main.html' /}
#{set title:header /}

<p>This is template2.html page</p> 
```

控制器上的方法如下：

```
public static void template1() {
    String header = "Template 1 Title"
    render(header);
}

public static void template2() {
    render();
} 
```

这就是解释，当你渲染时`template1.html`，你可能会注意到我们在 中设置了页面标题（通过使用`header`变量）`template1.html`。我们设置的标题是`main.html`使用`#{get}`on检索的`main.html`。

然后看你渲染的时候`template2.html`，你可能会注意到我们也设置了页面标题。但不同之处在于**控制器**（`template2()`方法），您没有将`header`变量值传递给模板。因此，尽管您设置了标题，但标题具有 null 值，并且在您渲染时未设置标题的含义`template2.html`。

因此，对于您的问题，我认为当您坚持放置`#{set user:user /}`模板并想要访问`user`变量时，您必须在渲染模板之前将`user`变量传递给**所有控制器方法。**呃..效率太低了！

* * *

> ## 建议
> 
> 我建议您可以使用`session`来存储用户数据`userid`，因为它可以在您的所有应用程序模板中访问！请在[此处](http://www.playframework.com/documentation/1.2.4/templates#implicits)查看文档。

希望这可以使您了解机制，并且会如此

# matlab - 如何使用 MATLAB 中的“for”循环将值添加到矩阵中已有的值？

> ID：16135003
> 
> 赞同：0
> 
> 时间：2013-04-21T18:56:25.320
> 
> 标签：matlab, for-loop, matrix

我在 MATLAB 中编写了一段代码，它基本上将矩阵“Ke”（8x8，只是常量）中的值分配给最初用零填充的矩阵“KG”。应为其分配值的行数和列数由数组 nEN 给出，该数组在另一个循环中有所不同，但始终是 4 个数字的数组。

```
KG=[];
 for t=1:Nw
    for i=1:Nh
    eN=Am(t:t+1,i:i+1)
    nEN=reshape(eN',1,[])
      for i1=1:4
         for i2=1:4
         KG((2*(nEN(i1))-1),(2*(nEN(i2))-1))=Ke(((2*i1)-1),((2*i2)-1));
         KG((2*(nEN(i1))-1),(2*(nEN(i2))))=Ke((2*i1-1),(2*i2));
         KG((2*(nEN(i1))),(2*(nEN(i2))-1))=Ke((2*i1),(2*i2-1));
         KG((2*(nEN(i1))),(2*(nEN(i2))))=Ke((2*i1),(2*i2));
         end
      end
    end
 end 
 KG 
```

问题是有时 nEN 可以具有与前一次迭代中获得的值相同的值，因此我的循环重写了“KG”中已经存在的值，但我希望将它们加在一起。我怎样才能做到这一点？？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:07:58.413

您可以通过以下方式累积值`KG`：

```
KG((2*(nEN(i1))-1),(2*(nEN(i2))-1)) = KG((2*(nEN(i1))-1),(2*(nEN(i2))-1)) + Ke(((2*i1)-1),((2*i2)-1));
KG((2*(nEN(i1))-1),(2*(nEN(i2)))) = KG((2*(nEN(i1))-1),(2*(nEN(i2)))) + Ke((2*i1-1),(2*i2));
KG((2*(nEN(i1))),(2*(nEN(i2))-1)) = KG((2*(nEN(i1))),(2*(nEN(i2))-1)) + Ke((2*i1),(2*i2-1));
KG((2*(nEN(i1))),(2*(nEN(i2)))) = KG((2*(nEN(i1))),(2*(nEN(i2)))) + Ke((2*i1),(2*i2)); 
```

# neo4j - Tinkerpop 蓝图顶点查询

> ID：16135011
> 
> 赞同：3
> 
> 时间：2013-04-21T18:57:04.867
> 
> 标签：neo4j, orientdb, titan, tinkerpop

我研究 Tinkerpop 堆栈已经有一段时间了。我想我很清楚它可以做什么以及它适用于哪些数据库。我现在正在考虑几个不同的数据库，但还没有确定。所以我决定把我的代码纯粹写到接口上，现在不考虑*任何*实现。在我正在查看的数据库中，它们实现了`TransactionalGraph`和`KeyIndexableGraph`. 我认为这足以满足我的需要，但我只有一个问题。

我有不同的“类”顶点。使用蓝图，我相信通过在每个顶点中包含类名的字段来最好地表示。这样做，我可以做类似的事情`graph.getVertices("classname", "User")`，它会给我所有的用户顶点。并且由于该`getVertices`函数指定实现应该使用索引，因此我可以保证快速查找（如果我索引该字段）。

但是假设我想根据两个属性检索一个顶点。顶点必须有`className=Users`和`username=admin`。找到该单个顶点的最佳方法是什么？即使不是所有的顶点都有一个`username`字段，是否可以对这两个属性进行索引？

仅供参考 - 我目前考虑的数据库是 OrientDB、Neo4j 和 Titan，但我还没有确定。如果有帮助的话，我目前也计划使用 Gremlin。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T11:24:44.013

对顶点使用“类”或“类型”是分割它们的好方法。正在做：

```
graph.createKeyIndex("classname",Vertex.class);
graph.getVertices("classname", "User"); 
```

是一种非常常见的模式，通常应该会产生快速查找，尽管迭代数千万用户的索引可能不是那么好（如果您打算将特定增长`classname`到非常大的规模）。我认为这导致了你问题的第二部分，关于进行两个属性查找。

以表面上的示例为例，两个元素查找将类似于（使用 Gremlin）：

```
g.V('classname',"User").has('username','admin') 
```

因此，您将顶点缩小到仅具有键索引的“用户”顶点，然后将这些顶点过滤为“管理员”。但是，我会以不同的方式建模。简单地执行以下操作会更便宜：

```
graph.createKeyIndex("username",Vertex.class);
graph.getVertices("username", "admin"); 
```

或在 Gremlin 中：

```
g.V('username','admin') 
```

如果您知道您想要的用户名，则没有更好/更快的方法来对此进行建模。`classname`如果你想迭代所有“用户”顶点，你真的只需要。如果您只想找到一个（或一组带有该的顶点`username`），那么对该属性的键索引是更好的方法。

即使我没有在其上创建键索引，我仍然在所有顶点上包含一个`type`or属性。`classname`我发现它在全球运营中很有帮助，我可能关心也可能不关心速度，但只需要一个答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T21:10:41.023

1.  `graph.getVertices()`如果您没有在图形实现中打开自动索引，将遍历所有顶点并查找具有该属性的顶点。如果你已经有数据并且不能只打开自动索引器，你应该使用 is`index = indexableGraph.getIndex()`然后`index.get('classname', 'User')`

2.  可以执行`query`多个对象，但没有具体细节，很难说。因为`Neo4j`他们使用 Lucene，这意味着`query()`它将接受一个 lucene 查询，例如`className:Users AND username:admin`，但我不能代表其他人。

是的，这些数据库很适合玩，我个人认为`neo4j`这是最简单的，只要您了解它们的许可结构，使用它们就不会有任何问题。

# mysql - Liferay 不能与 MySQL 一起使用

> ID：16135016
> 
> 赞同：1
> 
> 时间：2013-04-21T18:57:56.023
> 
> 标签：mysql, liferay

我正在使用 Liferay 6.1.1、tomcat 7 和 Mysql 5.6 和 eclipse。

```
mysql port : localhost 3306
http/1.1 : 8080 
```

我按照他们的 wiki 上给出的说明将 portal-ext.properties 放入

```
{liferay-home}\{tomcat}\webapps\ROOT\WEB-INF\classes 
```

有以下信息

```
jdbc.default.driverClassName=com.mysql.jdbc.Driver
jdbc.default.url=jdbc:mysql://localhost/lportal?useUnicode=true&characterEncoding=UTF-8&useFastDateParsing=false
jdbc.default.username=root
jdbc.default.password=test 
```

创建了一个数据库

```
create database lportal character set utf8; 
```

服务器将运行

```
Apr 21, 2013 6:47:36 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Users\Hnshandroid\Downloads\Liferay vid\liferay-portal-6.1.1-ce-ga2\tomcat-7.0.27\jre1.6.0_20\win\bin;.;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\AMD APP\bin\x86_64;C:\Program Files (x86)\AMD APP\bin\x86;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files (x86)\Windows Live\Shared;D:\Program Files\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon\;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon\
Apr 21, 2013 6:47:36 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Apr 21, 2013 6:47:36 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Apr 21, 2013 6:47:36 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 386 ms
Apr 21, 2013 6:47:36 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Apr 21, 2013 6:47:36 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
Apr 21, 2013 6:47:36 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor C:\Users\Hnshandroid\Downloads\Liferay vid\liferay-portal-6.1.1-ce-ga2\tomcat-7.0.27\conf\Catalina\localhost\ROOT.xml
Loading jar:file:/C:/Users/Hnshandroid/Downloads/Liferay%20vid/liferay-portal-6.1.1-ce-ga2/tomcat-7.0.27/webapps/ROOT/WEB-INF/lib/portal-impl.jar!/system.properties
Loading jar:file:/C:/Users/Hnshandroid/Downloads/Liferay%20vid/liferay-portal-6.1.1-ce-ga2/tomcat-7.0.27/webapps/ROOT/WEB-INF/lib/portal-impl.jar!/portal.properties
Loading file:/C:/Users/Hnshandroid/Downloads/Liferay%20vid/liferay-portal-6.1.1-ce-ga2/portal-ide.properties
Loading file:/C:/Users/Hnshandroid/Downloads/Liferay%20vid/liferay-portal-6.1.1-ce-ga2/tomcat-7.0.27/webapps/ROOT/WEB-INF/classes/portal-developer.properties
Loading file:/C:/Users/Hnshandroid/Downloads/Liferay%20vid/liferay-portal-6.1.1-ce-ga2/portal-setup-wizard.properties
Loading file:/C:/Users/Hnshandroid/Downloads/Liferay%20vid/liferay-portal-6.1.1-ce-ga2/tomcat-7.0.27/webapps/ROOT/WEB-INF/classes/portal-ext.properties
Apr 21, 2013 6:47:38 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
18:47:42,768 INFO  [pool-2-thread-1][DialectDetector:71] Determine dialect for MySQL 5
18:47:42,798 INFO  [pool-2-thread-1][DialectDetector:136] Found dialect org.hibernate.dialect.MySQLDialect
Starting Liferay Portal Community Edition 6.1.1 CE GA2 (Paton / Build 6101 / July 31, 2012)
18:48:00,025 ERROR [pool-2-thread-1][JDBCExceptionReporter:76] Table 'lportal.lock_' doesn't exist
18:48:00,534 WARN  [pool-2-thread-1][ReleaseLocalServiceImpl:151] Table 'lportal.release_' doesn't exist
18:48:00,535 INFO  [pool-2-thread-1][ReleaseLocalServiceImpl:84] Create tables and populate with default data 
```

直到“创建表并使用默认数据填充”然后它会挂在那里。如果按停止，将出现此消息

```
Server Liferay v6.1 CE Server (Tomcat 7) at localhost failed to start. 
```

希望有人对此有解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:49:17.750

要将默认数据填充到 lportal 数据库中：转到控制面板 -> 服务器管理 -> 数据库迁移 -> 添加所需的详细信息。（请注意：使用 localhost:3306 而不是 localhost）

要将 liferay 指向您的新数据库，请将以下行添加到您的 portal-ext.properties 文件中，并将此文件放在 {liferay-home} 文件夹下，并包含以下信息：

```
jdbc.default.driverClassName=com.mysql.jdbc.Driver
jdbc.default.url=jdbc:mysql://localhost:3306/lportal?useUnicode=true&characterEncoding=UTF-8&useFastDateParsing=false
jdbc.default.username=root
jdbc.default.password=test 
```

并重新启动服务器。希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:36:07.437

```
Goto control panel--->select administrative tools--->select tomcat service--->stop
Again run your program 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-09T12:17:43.617

您应该从此链接 ( [http://dev.mysql.com/downloads/mirror.php?id=414247](http://dev.mysql.com/downloads/mirror.php?id=414247) ) 下载最新的 MySQL 连接器，然后解压缩文件夹，并将**.jar**文件复制到**\webapps\ROOT\WEB -INF\lib** Tomcat 服务器的存储库。重新启动您的 Tomcat 服务器，一切都应该运行！

# rdf - SPARQL/RDF 查询：从类中选择一个实例

> ID：16135017
> 
> 赞同：2
> 
> 时间：2013-04-21T18:57:59.630
> 
> 标签：rdf, sparql

我是 Sparql 的新手，需要一些帮助。

我有一个名为“Learning_object”的类和一个名为“General_characteristics”的子类，它具有一些属性（标题、语言和描述）。

我在“Learning_object”类中给出了一个名为“Introduction_to_HTML”的实例。我想要做的是为“Introduction_to_HTML”实例选择“General_characteristics”。

我对谷歌做了一些研究，但还没有找到解决方案。

我可以使用以下方法获取“Learning_object”的所有实例：

```
SELECT ?entity
WHERE {
  ?entity rdf:type ?General_characteristics.
?General_characteristics rdfs:subClassOf* :Learning_object.
} 
```

提前致谢！（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:00:42.103

尝试这样的事情：

```
SELECT DISTINCT ?property
WHERE {
    ?entity rdf:type ?General_characteristics.
    ?General_characteristics rdfs:subClassOf* :Learning_object.
    ?entity ?property ?object.
    FILTER(?entity=<your_BASE_GRAPH_URI/Introduction_to_HTML>)
} 
```

检索可用于您的实例的属性名称列表。如果您还想要每个属性的 ?object 值，您应该在 SELECT DISTINCT... 部分添加 ?object 绑定。请注意，如果您有空白节点，您应该在 ?object 中找到一些“skolemized”值。

# javascript - javascript函数变量数据如何传递到另一个页面

> ID：16135027
> 
> 赞同：0
> 
> 时间：2013-04-21T18:59:12.157
> 
> 标签：javascript, raphael

我这里有一个代码，但我不知道如何将它传递到另一个页面......基本上它在一个函数内，所以在代码之前有一个函数，但我认为没有必要担心我需要什么是改变“警报”所以某种变量我可以获取值并输出它，我还想问，因为该函数中的数据是一个数组，如果我这样写它是否正确？var x=new Array($(this).attr('fill')); 如果它是正确的，我将如何将数组数据抓取到另一页？

```
$('text').each(function(){
alert($(this).attr('fill')); 
```

我在这里有一个工作链接，但在这个链接中，我仍然需要将警报更改为我可以调用的变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:01:50.730

您的要求并不完全清楚，但要从一页到下一页获取数据，您有以下选项：

1.  您可以将数据存储在服务器上，每个页面都可以从服务器获取数据，或者在构建页面时让服务器将数据放入每个页面。
2.  您可以将数据写入浏览器中的 HTML5 本地存储，并且每个页面（在同一域上）都可以从 HTML5 本地存储中检索数据。
3.  您可以将数据写入浏览器中的 cookie，并且每个页面（在同一域上）都可以从 cookie 中检索数据。
4.  您可以通过 URL 中的查询字符串将数据传递到下一页。

DOM 对象的 Javascript 变量和属性仅在当前页面期间有效。当您转到另一个页面时，整个 javascript 状态将被丢弃，并且不会在下一页上继续存在（它会在下一页从头开始重新构建）。这就是为什么您必须将数据存储在某个地方，然后每个页面都可以检索数据的原因。

# uinavigationbar - 是否可以链接到外部 html 表？

> ID：16135042
> 
> 赞同：0
> 
> 时间：2013-04-21T19:01:54.517
> 
> 标签：uinavigationbar, stylesheet, external

是否可以使用链接标签添加包含 html 元素的外部工作表（类似于外部 css 样式表）？

该项目将有许多具有相同元素的网页（例如，导航栏）有没有一种方法可以链接到外部文件，这样我只需更改一个文件即可将此更改传播到我的所有网页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:20:31.120

只使用纯 HTML，不。其他一些选项：

*   您可以使用服务器端脚本语言来包含文件。（特定语言）
*   [服务器端包括](http://httpd.apache.org/docs/current/howto/ssi.html). 然而，SSI 相当有限。
*   模板或模板引擎（如 Smarty）。这是一个简单问题的过度杀伤性解决方案，但留在这里作为一个选项。
*   Javascript 可以在页面加载后动态生成内容。
*   根据您的内容，有时可以使用 IFRAME。

# c++ - 错误：无法从“long”转换为“int &”

> ID：16135043
> 
> 赞同：0
> 
> 时间：2013-04-21T19:01:56.700
> 
> 标签：c++, operators

我的函数`get_num`返回一个变量`long int`。

我想写下一个运算符：

```
long int& operator [] (long int i) {
    long int a = get_num(i);
    int& b = a;
    return b;
} 
```

但我得到了下一个错误：

```
error C2440: 'initializing' : cannot convert from 'long' to 'int &'
error C2440: 'return' : cannot convert from 'int' to 'long &' 
```

如何在不更改功能的情况下修复它`get_num`？

任何帮助表示赞赏！

* * *

我有一堂课：

```
class B {
   B* next;
   long int nom;
   long int denom;
  public:
   long int get_nom() {return nom; }
   long int get_denom() {return denom; }
};

class List {
  B* head;
public:
 long int& operator [] (long int desired_denom) {
      // here I search the node that containts the denom that is equal to desired_denom
      // and insert it to tmp (it's a pointer to B).
      long int a1 = tmp->get_nom()
      long int& a2 = a1;
      return a2;
    }
}; 
```

现在在`main`，我想做：

```
int main() {
    A a; // assume that it creates the list of B and put values in each node (each B)
    // here I want to do:
    a[2] = 3; // it should search the node that his denom is equal to 2, and puts 3 instead of his nom
    return 0;
} 
```

例如：

如果我的清单是：

```
(nom=5, denom=6)->(nom=1,denom=8)->(nom=4, denom=2)->NULL 
```

该行`a[2]=3`搜索他的denom为2的节点（它是第三个节点）并将他的nom设置为3。

所以在这一行之后，我的清单将是：

```
(nom=5, denom=6)->(nom=1,denom=8)->(nom=3, denom=2)->NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:09:19.760

编译错误是针对这一行的

```
int& b = a;
^^^^ 
```

它应该是

```
long int& b = a;
^^^^^^^^ 
```

而且，正如朋友在评论中所说，返回对局部变量的引用会导致未定义的行为，因为该引用的变量将在退出函数后被销毁。

盲目地回答，`get_num`如果`get_num`正确返回引用，您可能需要返回对 的引用。

```
return get_num(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:13:20.063

目前在您的代码中，无法按照您想要的方式修改节点。`get_nom`必须更改为返回引用，然后它才能按照您想要的方式运行。现在您只能复制链表每个节点中的值。

假设 tmp 设置正确，您可以返回由`get_nom`

```
long int& operator [] (long int i) {
    //Get tmp here probably by list traversal
    return tmp->get_nom(i);
} 
```

然后执行`get_nom`. 重要的是要注意，它`nom`必须是一个具有足够长的使用寿命才能使用的值，如下所述。返回`nom`是类私有的，因此当函数返回应该工作时，它不会超出范围。

```
long int& get_nom() {return nom; } 
```

`get_nom`必须返回`long int&`才能正常工作。`long int`返回和之间有一个重要的区别`long int&`。当返回类型是`long int`您返回的值的副本时，将生成并传递给调用者。当您返回`long int&`或换句话说通过引用返回 long int 时，该引用指向内存中存储值的位置。此引用允许您更改 long int 的值，而它仍存储在数组或您正在使用的任何数据类型的中间。

这样做的另一个重要副作用是，如果您返回对局部变量的引用，当变量超出范围时，该值将不再存在于内存中。我实际上并没有尝试编译和运行它，所以我不确定编译器是否会生气或结果究竟是什么，但我知道它不会很好：

```
long int& operator [] (long int i) {
    long int a = i + 5; //arbitrary change
    return a;
} 
```

在这种情况下，您将返回对 的位置的引用`a`，但由于 a 在函数完成执行后超出范围，因此该引用不再指向任何内容。在函数退出后，您返回引用的变量必须仍然存在。

# c++ - C++ Enigma::解码消息

> ID：16135051
> 
> 赞同：2
> 
> 时间：2013-04-21T19:03:04.627
> 
> 标签：c++

嘿，我正在开发一个程序，该程序为您提供了将消息（字符串）转换为 3 种不同方案的选项：Prime Shift 编码方案、Shifty 编码方案和反向编码方案。我已经想出了如何编码和解码素数移位方案和反向方案，但我在使用 Shifty 编码方案时遇到了一些麻烦。Shifty 方案的规则如下： 消息中的每个字符都转换为其 ASCII 值。从 1000 中减去该值，得到三个数字。然后将三元组的每个数字转换为键盘上数字 1 – 0 上方的符号值。符号串是编码的消息。

例如，如果字符的值为 37，则从 1000 中减去它，得到一个三元组 963。对应的键盘字符是 (^#.

然后将编码的消息与密钥以及与方案对应的数字一起存储在文本文件中。当用户单击解码按钮时，文件选择器打开，用户选择要读入的文本文件。一旦他/她选择了他们想要打开的文件，程序就会在编码的消息中读取密钥和方案。因此程序必须能够获取编码消息并将其转换回其原始消息。

我已经找到了对 Shifty 方案进行编码的代码，它完美地编码了消息，但我不知道如何解码消息。我知道我必须以某种方式从编码字符串中获取每个三元组的数字，然后从每个数字中减去 1000，这样我才能得到正确的 ascii 字符，但我不知道如何做到这一点。任何帮助，将不胜感激。

到目前为止，我有这个：

```
ShiftyEnigma::ShiftyEnigma()
{
    keyBoard[0] = ')';
    keyBoard[1] = '!';
    keyBoard[2] = '@';
    keyBoard[3] = '#';
    keyBoard[4] = '$';
    keyBoard[5] = '%';
    keyBoard[6] = '^';
    keyBoard[7] = '&';
    keyBoard[8] = '*';
    keyBoard[9] = '(';
}

void ShiftyEnigma::encode()
{
    stringstream ss;
    stringstream s1;
    int value = 0;
    for(unsigned int i = 0; i < codedMessage.length(); ++i)
    {
        int ascii = codedMessage.at(i);
        //subtracting 1000 from ascii number of each character in message
        value = 1000 - ascii;
        //setting the value in string stream in order to convert each digit of 
        //triplet (ex 887) into values that match the keyboard array
        ss << value;
        for(unsigned int i = 0; i < ss.str().length(); ++i)
        {
            s1 << keyBoard[(int)ss.str().at(i)-48];
        }
        ss.str("");
    }
    codedMessage = s1.str();
}
void ShiftyEnigma::decode()
{
    for(unsigned int i = 0; i < codedMessage.length(); ++i)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:12:52.960

我们首先为符号创建反向查找。我使用 0 作为无效数字，因为数组默认初始化为 0，并使用 10 来标记数字 0。您循环输入的每个字符并在 antiKeyboard 数组上使用反向查找来查看它映射到的数字. 如果反向查找返回 0，那么我们发现了一个无效字符。我选择忽略它，但您可能会显示错误消息。现在我们需要得到 3 个有效数字并将它们组合在一起。要将 3 位数字组合成 3 位数字，我们可以这样做：number = digit1 * 100 + digit2 * 10 + digit。我这样做是循环的。

```
int antiKeyboard[256]= {0};
antiKeyboard['!'] = 1;
antiKeyboard['@'] = 2;
antiKeyboard['#'] = 3;
antiKeyboard['$'] = 4;
antiKeyboard['%'] = 5;
antiKeyboard['^'] = 6;
antiKeyboard['&'] = 7;
antiKeyboard['*'] = 8;
antiKeyboard['('] = 9;
antiKeyboard[')'] = 10; //Note this is 0, but i put is as 10

int digits = 0, digit, number=0;
for(unsigned int i = 0; i < codedMessage.length(); ++i)
{
   digit = antiKeyboard[codedMessage.at(i)];
   if (digit >=1 && digit <=10){
       ++digits;
       number = number * 10 + (digit % 10); //note modulo 10 converts 10 back to 0.
       if (digits == 3){
          printf("%c",1000-number);
          digits = 0;
          number = 0;
       }
    }else{ /*Invalid character, ignoring*/ }
} 
```

# c# - C#和非托管DLL：避免多线程引起的NullReferenceException

> ID：16135056
> 
> 赞同：0
> 
> 时间：2013-04-21T19:03:25.037
> 
> 标签：c#, windows, multithreading, dll, dllimport

我正在尝试创建一个 C# 应用程序来在一个名为 VZones 的古老社交 MMO 中托管自动文字游戏。许多类似的现有应用程序使用一个名为 wadapi.dll 的 DLL 文件，其代码不可用，它封装了允许与 VZones 主机通信的 DDE 功能。下面的代码（这是框架应用程序的完整代码——由于 DLL 和回调处理的不同部分，我将其全部包含在内，并且因为无论如何我最终都会将完整代码作为开源项目提供）只需使用一个计时器，其 TimerGrabTextTick 事件调用 DLL 的 DapiGetAllText 过程。然后，DLL 通过回调将客户端窗口中的所有对话文本传递回我的应用程序，该回调由我的 ProcessGetAllText 函数接收。前几分钟效果很好 当单个线程正在运行时；但是一旦生成了辅助线程，它就会在“DapiGetAllText("vzWordyHoster");”上崩溃并出现 NullReferenceException 错误 线。

这是我在 C# 中的第一次实验，所以我还在摸索中，对于代码中的任何混乱，我深表歉意。虽然我涉足过其他几种编程语言（作为爱好者，而不是作为专业程序员），但这也是我第一次不得不担心线程，因为这是第一次给我带来任何问题。我在谷歌上搜索和阅读这个主题让我相信我应该能够通过使用互斥锁或锁来避免这个异常，但是经过几个令人沮丧的小时后，我仍然遇到同样的异常。（我现在已经剥离了所有的互斥锁/等代码。）有人可以建议我可以做些什么来修复它吗？

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Windows.Forms;
using System.Runtime.InteropServices;
using System.Diagnostics;
using System.Threading;

namespace vzWordyHoster
{
    /// <summary>
    /// A word games hoster for VZones.
    /// </summary>

    public delegate Boolean cbProcessAckData(String sAckData);
    public delegate Boolean cbProcessReceiveData(String sAvatar, Int32 nDataLen, String sData);
    public delegate Boolean cbProcessGetAllText(String sTextData);

    public partial class MainForm : Form
    {

        [DllImport("C:\\Program Files\\VZones\\wadapi.dll")] public static extern Int32 InitDDE(String sAppName, cbProcessAckData pfnProcessAckData, cbProcessReceiveData pfnProcessReceiveData, cbProcessGetAllText pfnProcessGetAllText);
        [DllImport("C:\\Program Files\\VZones\\wadapi.dll")] public static extern Boolean KillDDE();
        [DllImport("C:\\Program Files\\VZones\\wadapi.dll")] public static extern Boolean DapiRegister(String sAppName);
        [DllImport("C:\\Program Files\\VZones\\wadapi.dll")] public static extern Boolean DapiUnregister(String sAppName);
        [DllImport("C:\\Program Files\\VZones\\wadapi.dll", CallingConvention=CallingConvention.StdCall)] public static extern Boolean DapiGetAllText(String sAppName);
        [DllImport("C:\\Program Files\\VZones\\wadapi.dll", CallingConvention=CallingConvention.StdCall)] public static extern Boolean DapiCommunicate(String sAppName, Int32 nMode, String sAvatar, String sText);
        [DllImport("C:\\Program Files\\VZones\\wadapi.dll", CallingConvention=CallingConvention.StdCall)] public static extern Boolean DapiSend(String sAppName, String sAvatar, Int32 nDataLen, String sData);

        private static String ack = "";
        private static String allText = "";

        // http://stackoverflow.com/questions/5754879/usage-of-mutex-in-c-sharp

        public static Boolean ProcessAckData(String sAckData) {
            ack = sAckData; // I've simplified this as compared to the VB6 code. Might need to add in equivalents of format, val and strconv again.         
            return true;
        }

        public static Boolean ProcessReceiveData(String sAvatar, Int32 nDataLen, String sData) {
            // Do nothing!
            return true;
        }

        public static Boolean ProcessGetAllText(String sTextData) {

            String sDapiText = sTextData;  // Again, simplified.
            allText = sDapiText;        
            return true;
        }

        public Boolean ESP(String AviName, String EspText) {
            do {
                DapiCommunicate("vzWordyHoster", 2, AviName, EspText);
            } while(ack == "6");
            return true;
        }

        public Boolean Say(String SayText) {
            do {
                DapiCommunicate("vzWordyHoster", 0, "", SayText);
            } while(ack == "6");
            return true;
        }

        public Boolean Think(String ThinkText) {
            do {
                DapiCommunicate("vzWordyHoster", 1, "", ThinkText);
            } while(ack == "6");
            return true;
        }

        public MainForm()
        {
            InitializeComponent();      

            cbProcessAckData myCbProcessAckData = new cbProcessAckData(vzWordyHoster.MainForm.ProcessAckData);
            cbProcessReceiveData myCbProcessReceiveData = new cbProcessReceiveData(vzWordyHoster.MainForm.ProcessReceiveData);
            cbProcessGetAllText myCbProcessGetAllText = new cbProcessGetAllText(vzWordyHoster.MainForm.ProcessGetAllText);

            InitDDE("vzWordyHoster", myCbProcessAckData, myCbProcessReceiveData, myCbProcessGetAllText);
            DapiRegister("vzWordyHoster");

            menuComboMode.SelectedIndex = 0;

        }  // MainForm

        ~MainForm() {  // Destructor
            DapiUnregister("vzWordyHoster");
            KillDDE();
        }

        void CheckBoxGrabTextEnableCheckedChanged(object sender, EventArgs e)
        {
            timerGrabText.Enabled = checkBoxGrabTextEnable.Enabled;         
        }

        public void TimerGrabTextTick(object sender, EventArgs e)
        {
            try {
                DapiGetAllText("vzWordyHoster");  // Crashes as soon as multiple threads are spawned.
                textBoxAllText.Text = allText;          
            }

            catch (NullReferenceException nre) {
                Debug.WriteLine(nre);
            }
        }

        void TextBoxAllTextTextChanged(object sender, EventArgs e)
        {
            textBoxAllText.SelectionStart = textBoxAllText.Text.Length;
            textBoxAllText.ScrollToCaret();
            textBoxAllText.Refresh();
        }
    } // class MainForm
} // namespace vzWordyHoster 
```

# arrays - Json解码数组

> ID：16135059
> 
> 赞同：1
> 
> 时间：2013-04-21T19:03:54.650
> 
> 标签：arrays, json

我在 php 脚本中解码了一个 json 数组（见下文）

我可以很容易地访问未包含在 items 数组中的那些值：

['订单']['shippingOption']['shippingRate']

['订单小计']

但无法弄清楚如何访问“items”数组中的 productSku、weight 等值。

任何帮助将非常感激。

谢谢

```
{

"order":{
"total":245.4,
"shippingOption":{
"shippingRate":5.4,
"shippingMethodId":"15367-1365940349119",
"estimatedTransitTime":"1",
"shippingMethodName":"Courier (Fastway)",
"type":""

},
"ticket":0,
"usdTotal":0,
"paymentParams":{
"map":{
}
},
"paymentStatus":"INCOMPLETE",
"volumeDiscount":0,
"subtotal":240,
"couponDiscount":0,
"tax":0,
"items":[
{
"relatedProducts":{
"productIds":"",
"relatedCategory":{
"enabled":false,
"categoryID":0,
"quantity":1
}
},
"weight":500,
"quantityInStock":0,
"tangible":true,
"ownerId":658087,
"wholesalePrices":{
},
"digital":false,
"id":0,
"fileKeys":[],
"shipping":5.4,
"imageId":94075362,
"productSku":"00247", 
```

# jquery - 将 jquery ui 自动完成结果包装成一个 href

> ID：16135063
> 
> 赞同：2
> 
> 时间：2013-04-21T19:04:04.647
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我使用这个函数将 jquery ui 自动完成函数的结果包装在一个超链接中。它无法做到这一点。它只显示标签项。这里有什么建议吗？

```
[{"value":"morzine","label":"Morzine"},{"value":"grachen","label":"Grachen"},{"value":"fiesch","label":"Fiesch"},{"value":"zermatt","label":"Zermatt"},{"value":"saas-fee","label":"Saas Fee"},{"value":"bettmeralp","label":"Bettmeralp"},{"value":"riederalp","label":"Riederalp"},{"value":"jeizinen","label":"Jeizinen"},{"value":"crans-montana","label":"Crans Montana"},{"value":"simplon-dorf","label":"Simplon Dorf"}]

$("#srch").autocomplete({
    minLength: 3,
    source: function (a, b) {
        $.getJSON("http://skiweather.eu/v3/ajax/search.php?q=" + a.term + "&format=json", function (a) {
            b(a)
        })
    },
    select: function (a, b) {
        $("#srch").val(b.item.label);
        return false
    },
    focus: function (a, b) {
        $("#srch").val(b.item.label);
        return false
    }
}).data("autocomplete")._renderItem = function (a, b) {
    return $("<li></li>")
        .data("item.autocomplete", b)
        .append('<a href="/webcams/' + b.value + '"> ' + b.label + '</a>  ')
        .appendTo(a)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:29:26.497

`.data('ui-autocomplete')`如果您使用 jQueryUI >= 1.10，则需要使用。如果您查看您网站的控制台，您将看到以下错误：

> 未捕获的类型错误：无法设置未定义的属性“_renderItem”

```
$("#srch").autocomplete({
    minLength: 3,
    source: /* ... */,
}).data("ui-autocomplete")._renderItem = function (a, b) {
    return $("<li></li>")
        .data("item.autocomplete", b)
        .append('<a href="/webcams/' + b.value + '"> ' + b.label + '</a>  ')
        .appendTo(a);
}; 
```

**示例：http:** [//jsfiddle.net/Aa5nK/51/](http://jsfiddle.net/Aa5nK/51/)

另外，不相关，但我建议使用更易于理解的变量名称（比`a`and更具描述性的名称`b`）。

# c - 为什么我的 printf 打印错误的值？

> ID：16135064
> 
> 赞同：0
> 
> 时间：2013-04-21T19:04:30.183
> 
> 标签：c, printf

我不知道为什么我的代码不起作用。我正在尝试创建类似于 P2P 文件传输的东西，其中多个线程同时从预先存在的服务器程序中获取文件的不同部分。然而，我现在遇到的实际问题要简单得多。

由于您不能将多个参数传递给 pthread_create，因此我创建了一个结构，其中包含我要传递的两条信息。我还创建了一个指向这些结构的指针数组，并在传递指针之前分别初始化每个指针。

```
printf("In thread: port=%d & ipAddr=%s\n",conn->port,conn->ipAddr); 
```

当该行运行时，所有内容都使用正确的端口号和 IP 地址正确打印出来。

```
printf("Size of chunk %d received by %lu on port %d: %d bytes\n",chunkNum,pthread_self(),conn->port,sizeRec); 
```

但是，当该行不久之后运行时，端口号不会正确打印出来。我得到的不是 9210 和 9211，而是 0 和 134520848。否则，一切似乎都在工作，所以我认为这可能只是某种 printf 问题，但我想在继续实施下一部分之前确定我的项目。

如果有人知道为什么在没有进行任何更改的情况下，相同的变量会在几行之后打印一个值和一个完全不同的值，那对我来说将非常有帮助。我在下面包含了我的所有代码以供参考。谢谢你的帮助！

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>

#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <string.h>
#include <pthread.h>

char * file_name = "output.txt";
int nextChunk = 0;

pthread_mutex_t lock1 = PTHREAD_MUTEX_INITIALIZER;

struct connection{
  int port;
  char* ipAddr;
};

void* getFile(void* args) {
  int con_fd = 0;
  int ret = 0;  
  struct sockaddr_in serv_addr;
  struct connection* conn = (struct connection*)args;
  printf("In thread: port=%d & ipAddr=%s\n",conn->port,conn->ipAddr);

memset(&serv_addr, 0, sizeof(struct sockaddr));
serv_addr.sin_family = AF_INET;
//printf("port number: %d\n",conn->port);
serv_addr.sin_port = htons(conn->port);
serv_addr.sin_addr.s_addr = inet_addr(conn->ipAddr);
int sizeRec;
char buf[1024];
while(1) {
    con_fd = socket(PF_INET, SOCK_STREAM, 0);
    if (con_fd == -1) {
        printf("Socket Error\n");
        fflush(stdout);
        return 0;
    }
    ret = connect(con_fd, (struct sockaddr *)&serv_addr, sizeof(struct sockaddr));
    if (ret < 0) {
        printf("Connect error\n");
        fflush(stdout);
        return 0;
    }
    char chunkStr[128];
    pthread_mutex_lock(&lock1);
    int chunkNum = nextChunk++;
    pthread_mutex_unlock(&lock1);
    sprintf(chunkStr,"%d",chunkNum);
    send(con_fd,chunkStr,128,0);
    sizeRec = recv(con_fd,buf,1024,0);
    printf("Size of chunk %d received by %lu on port %d: %d bytes\n",chunkNum,pthread_self(),conn->port,sizeRec);
    if (sizeRec <= 0) {
        return 0;
    }
} 
/*FILE *f = fopen(filename, "w");
if (!f) {
    printf("Can't open %s for input. Program halting\n",filename);
    exit(0);
}*/
/*while ((sizeReceived = recv(sock,buf,1024,0)) > 0) {
    if (fwrite(buf,sizeof(char),sizeReceived,f) == -1) {
        printf("Error writing file");
        exit(0);
    }
}
fclose(f);*/
close(con_fd);
return 0;
}

int main(int argc, char ** argv) {

if (argc < 3 || argc % 2 == 0) {
printf("Usage: ./client <ipaddr1> <port1> <ipaddr2> <port2> . . .\n");
return -1;
}
int numThreads = argc / 2;
pthread_t threads[numThreads];
struct connection** connections = malloc(sizeof(struct connection*)*numThreads);
//char* args[numThreads][2];
printf("numThreads: %d\n",numThreads);
for (int i=0; i<numThreads; i++) {
    connections[i] = malloc(sizeof(struct connection));
    connections[i]->ipAddr = argv[2*i+1];
    connections[i]->port = atoi(argv[2*i+2]);
    printf("port number: %d\n",connections[i]->port);
    pthread_create(&threads[i], NULL, getFile, (void*)(connections[i]));
}
for (int i=0; i<numThreads; i++) {
    free(connections[i]);
    pthread_join(threads[i], NULL);
}
pthread_mutex_destroy(&lock1);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:01:36.340

您的主要问题`for`是`main()`.

您首先释放数据结构，然后调用`pthread_join()`. 颠倒这两个陈述，它应该可靠地工作。

如果你使用 Linux，我建议使用 valgrind 工具，它很容易帮助发现此类问题。对于 Windows，我只知道昂贵的商业工具可以做同样的事情（比如 Purify）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:09:08.380

改变这个：

```
for (int i=0; i<numThreads; i++) {
    free(connections[i]);
    pthread_join(threads[i], NULL); 
```

至 ：

```
for (int i=0; i<numThreads; i++) {
    pthread_join(threads[i], NULL);        
    free(connections[i]); 
```

# python - 如何使用 Python 验证手机号码？

> ID：16135069
> 
> 赞同：6
> 
> 时间：2013-04-21T19:04:46.950
> 
> 标签：python, regex, django

我正在尝试验证手机号码，以下是我到目前为止所做的，但它似乎不起作用。

当传递的值看起来不像手机号码时，我需要它来引发验证错误。手机号码的长度可以是 10 到 14 位，以 0 或 7 开头，并且可以添加 44 或 +44。

```
def validate_mobile(value):
    """ Raise a ValidationError if the value looks like a mobile telephone number.
    """
    rule = re.compile(r'/^[0-9]{10,14}$/')

    if not rule.search(value):
        msg = u"Invalid mobile number."
        raise ValidationError(msg) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-02-06T16:22:12.990

我建议使用[phonenumbers](https://pypi.python.org/pypi/phonenumbers)包，它是 Google 的 libphonenumber 的 python 端口，现在包括移动运营商的数据集：

```
import phonenumbers
from phonenumbers import carrier
from phonenumbers.phonenumberutil import number_type

number = "+49 176 1234 5678"
carrier._is_mobile(number_type(phonenumbers.parse(number))) 
```

如果 number 是手机号码，这将返回 True，否则返回 False。请注意，该号码必须是有效的国际号码，否则将引发异常。您还可以使用[电话号码](https://pypi.python.org/pypi/phonenumbers)来解析给定区域提示的电话号码。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-21T19:11:08.567

以下正则表达式符合您的描述

```
r'^(?:\+?44)?[07]\d{9,13}$' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T19:09:31.257

我会尝试类似的东西：

```
re.compile(r'^\+?(44)?(0|7)\d{9,13}$') 
```

不过，您可能希望首先删除所有空格、连字符或括号。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-21T20:00:19.990

这些不会根据需要验证 +44 号码。关注 **更新**：约翰布朗的链接并尝试这样的事情：

```
def validate_not_mobile(value):

    rule = re.compile(r'(^[+0-9]{1,3})*([0-9]{10,11}$)')

    if rule.search(value):
        msg = u"You cannot add mobile numbers."
        raise ValidationError(msg) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-05T06:26:52.180

```
import phonenumbers
from phonenumbers import carrier, timezone, geocoder
from phonenumbers.phonenumberutil import number_type

number = "+911234567890"
print(carrier._is_mobile(number_type(phonenumbers.parse(number))))
print(phonenumbers.parse("+911234567890"))

my_number = phonenumbers.parse("+911234567890")
print(carrier.name_for_number(my_number, "en"))

print(timezone.time_zones_for_number(my_number))

print(geocoder.description_for_number(my_number, "en"))

print(phonenumbers.is_valid_number(my_number))
print(phonenumbers.is_possible_number(my_number)) 
```

原因是 is_possible_number() 方法通过检查解析号码的长度来快速猜测电话号码的有效性，而 is_valid_number() 方法通过检查长度、电话号码前缀和区域来运行完整的验证。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-01-07T08:46:18.380

# 用于sololearn的Python验证手机号码

```
str = input()
import re
if len(str)==8:
   pattern=r"[981][^.......$]"  
   match = re.match(pattern,str) 
   if match: 
      print("Valid")
   else:
      print("Invalid")
else:
   print("Invalid") 
```

# c - 跨 i386 gcc 缺少 crt0.o 文件

> ID：16135073
> 
> 赞同：0
> 
> 时间：2013-04-21T19:05:18.697
> 
> 标签：c, gcc, cross-compiling, crt, newlib

我不知道为什么 newlib 没有为 i386 目标提供 crt0.o 或 crt1.o，因为它是 powerpc、arm 等目标的情况。

ld 需要它（我也需要调用静态构造函数）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T05:46:53.797

在 newlib 的邮件列表中直接询问的问题：http: [//sourceware-org.1504.n7.nabble.com/Question-i386-s-crt0-tp229290p229999.html](http://sourceware-org.1504.n7.nabble.com/Question-i386-s-crt0-tp229290p229999.html)

# vim - Vim 将下一个搜索 ('n') 绑定到另一个键

> ID：16135082
> 
> 赞同：1
> 
> 时间：2013-04-21T19:06:33.630
> 
> 标签：vim, key-bindings

## 你好

最近，我在玩键绑定。
我知道例如：
`nnoremap g <Del>`
将删除映射到键'g'。但我找不到改变“n”键绑定的方法。
:help index 说：“重复最新的 '/' 或 '?' N次。” 我该怎么绑定它？
提前感谢任何答案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:21:30.810

你的论点是错误的：

```
:nnoremap g <Del> 
```

`g`将键映射到`<Del>`命令。`<...>`（此外，符号中不能有空格；请参阅`:help key-notation`.

要为命令添加另一个绑定（例如`<F5>`）`n`，请使用：

```
:nnoremap <F5> n 
```

# iphone - Facebook SDK 3.5 无法登录，应用程序崩溃

> ID：16135087
> 
> 赞同：3
> 
> 时间：2013-04-21T19:06:55.370
> 
> 标签：iphone, ios, objective-c, facebook, facebook-login

我正在使用来自 HelloFacebookSample 的代码，并且由于某种原因，FBLoginView 会在我的应用程序被点击时崩溃。我已经逐字复制了大部分代码，所以我看不出它为什么会崩溃。有没有人对 Facebook SDK 有任何经验并且可以帮助我？如果需要，我会发布代码。

问候，
迈克

**更新：**这是我的错误的屏幕截图。
![在此处输入图像描述](https://i.stack.imgur.com/hvzAG.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:18:26.840

谢谢让我们注意到这个。

我们在服务器上发现了一个错误，并相信我们已经解决了它。如果您继续发现以这种方式失败的案例，请告诉我们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T09:37:40.610

有人在另一个线程上找到了答案。在 Facebook 开发者中心，该应用程序被设置为沙盒模式，这就是导致此错误的原因。看来这毕竟不是代码的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:51:53.863

我有同样的问题，只需将沙盒（在 facebook -> 托管应用程序 -> 在 yourapp 中）设置为 false，然后它就会工作......

# c++ - 随机数生成器错误 C++ MFC

> ID：16135093
> 
> 赞同：0
> 
> 时间：2013-04-21T19:07:45.663
> 
> 标签：c++, visual-studio-2010, class, visual-studio-2012

我正在创建一个随机数生成器，当我遇到一些错误时，它将 Min、Max、Avg、随机数和冒泡排序的数字保存到一个 excel 文件中，由于某种原因，我无法从 c++ MFC 调用这个函数，如下所示，我怎样才能使这项工作？

```
//***************Number generator function*******************
void number_Generator(double dblArray[], int length)
{
    srand((unsigned)time(0));
    double rndDbl;
    int rndInt;
    double rndAvg = 0;
    int counter = 0;
    double temp = 0;

    Final_Avg = rndAvg / counter; // final average to display
    double lDbl=0, hDbl=Random_Cap; 
    int lInt = 0, hInt=1;

    double dblRange=(hDbl-lDbl)+1;
    int intRange=(hInt-lInt)+1;

    for(int index=0; index<Samples_To_Create; index++) 
    {
        rndInt = lInt+int(intRange*rand()/(RAND_MAX + 1.0));
        rndDbl = lDbl+double(dblRange*rand()/(RAND_MAX + 1.0));

        // random number if statement
        if (rndInt == 0){
            rndDbl = -(rndDbl);
        }

        //start of Min/Max if statements
        if (rndMin == 0){
            rndMin = rndDbl;
        }
        else if (rndDbl < rndMin){
            rndMin = rndDbl;
        }

        if (rndMax == 0){
            rndMax = rndDbl;
        }
        else if (rndDbl > rndMax){
            rndMax = rndDbl;
        } //end of Min Max if statements

        temp = rndDbl;
        rndAvg += temp;
        dblArray[counter] = temp;
        counter++;
        }

    }
} 
```

它是从按钮单击处理程序中调用的：

```
void CECET_MFC_Dialog_Based_IntroDlg::OnBnClickedCreate()
{
    UpdateData(true);

    number_Generator(dblArray, 100); //100 means generate 100 random numbers

    UpdateData(false);
} 
```

公共访问变量作为未声明的标识符出现，即使它们的定义如下所示。

```
CECET_MFC_Dialog_Based_IntroDlg::CECET_344_MFC_Dialog_Based_IntroDlg(CWnd* pParent /*=NULL*/)
: CDialogEx(CECET_344_MFC_Dialog_Based_IntroDlg::IDD, pParent)
, Final_Avg(0)
, rndMax(0)
, rndMin(0)
, Samples_To_Create(0)
, Random_Cap(0)
{
    m_hIcon = AfxGetApp()->LoadIcon(IDR_MAINFRAME);
}

void CECET_MFC_Dialog_Based_IntroDlg::DoDataExchange(CDataExchange* pDX)
{
    CDialogEx::DoDataExchange(pDX);
    DDX_Text(pDX, IDC_EDIT3, Final_Avg);
    DDX_Text(pDX, IDC_EDIT4, rndMax);
    DDX_Text(pDX, IDC_EDIT5, rndMin);
    DDX_Text(pDX, IDC_EDIT2, Samples_To_Create);
    DDX_Text(pDX, IDC_EDIT1, Random_Cap);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:05:53.793

您的`void number_Generator(double dblArray[], int length)`函数正在访问类成员，但函数本身不是该类的成员。所以让它成为一个或传递所需的参数......

```
void CECET_MFC_Dialog_Based_IntroDlg::number_Generator(double dblArray[], int length)
{
   ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:38:26.647

正如我在评论中提到的，您需要一个实例`CECET_MFC_Dialog_Based_IntroDlg`来访问这些字段，因为`number_Generator`它不是成员。由于您指出这些字段是公开的，因此最简单的解决方案（尽管不是最干净的）是更改`number_Generator`为接受指针：

```
void number_Generator(double dblArray[], int length, CECET_MFC_Dialog_Based_IntroDlg *p)
{
    // access the variables via p->Final_Avg, p->rndMin, et cetera
} 
```

然后你会这样称呼它：

```
void CECET_MFC_Dialog_Based_IntroDlg::OnBnClickedCreate()
{
    UpdateData(true);

    number_Generator(dblArray, 100, this); //100 means generate 100 random numbers

    UpdateData(false);
} 
```

`number_Generator`我在快速检查时注意到的其他一些语义错误：

*   `Final_Avg = rndAvg / counter; // final average to display`做得太早了，rndAvg 和 counter 还没有正确的值。这导致除以`0`。

*   `counter`不需要，`dblArray[index]`改为使用。

*   最好分别初始化`rndMin`和`rndMax`到`INT_MAX`和`INT_MIN`（或数据类型的适当限制`climits`），并摆脱`if (rndMin == 0)`和`if (rndMax == 0)`检查。

# css - 填充窗口的背景图像？

> ID：16135100
> 
> 赞同：2
> 
> 时间：2013-04-21T19:08:26.477
> 
> 标签：css

我有一个背景图片，我想填充我网站的整个背景。我用：

```
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover; 
```

图像为 2000 像素 x 2000 像素。问题是，当浏览器窗口大于 2000 像素时，您会看到白色背景。如果浏览器窗口比图像大，有没有办法让图像拉伸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:14:17.723

首先，如果您只是将其用作背景，请避免使用如此大的图像作为背景。你可以这样做，不要把所有东西都盖上。只需在样式标签中放这两个，你就会得到它。

```
background-image:url('your image');
background-size: cover; 
```

如果图像扩展过多，可能会影响图像质量，但这是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:44:31.633

尝试这个：

```
background-size: 100% auto; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T00:22:20.370

`background-size: cover;`似乎对我来说两种方式都有效 - 如果图像大于元素则缩小图像以填充，或者如果图像更小则拉伸图像以填充。这是一个小图像拉伸以填充较大 div 的示例：http: [//jsfiddle.net/MRSallee/Q7STG/](http://jsfiddle.net/MRSallee/Q7STG/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T00:28:35.003

我更喜欢使用这个：

```
background: url(../img/url.jpg) no-repeat center center fixed;
-webkit-background-size: cover;
   -moz-background-size: cover;
     -o-background-size: cover;
        background-size: cover; 
```

# ios - 即使表为空，SQLite step() 也会返回 SQLITE_ROW

> ID：16135109
> 
> 赞同：2
> 
> 时间：2013-04-21T19:09:45.243
> 
> 标签：ios, sqlite

我正在尝试从 SQLite 中的表中获取行：

```
_tempPath = [[NSSearchPathForDirectoriesInDomains
                            (NSDocumentDirectory, NSUserDomainMask, YES)
                            objectAtIndex:0] stringByAppendingPathComponent:@"test.db"];

sqlite3         *pHandle;
sqlite3_stmt    *pStatementHandle;

NSLog(@"OPEN: %i ", sqlite3_open([_tempPath UTF8String], &pHandle));

const char *query = "select * from Transactions";

NSLog(@"PREP: %i", sqlite3_prepare (pHandle, query, -1, &pStatementHandle, NULL));

while(sqlite3_step(pStatementHandle) != SQLITE_DONE);
{
    NSLog(@"ROW");
}

sqlite3_finalize(pStatementHandle);

sqlite3_close(pHandle); 
```

但是，我总是得到一个空行。表是空的还是满的都无关紧要。

open() 和 prepare() 命令返回 SQLITE_OK。

出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:41:45.460

问题是你在语句的末尾有一个分号`while`，所以你的代码在`while`循环期间什么都不做，然后只会把它`NSLog("ROW");`当作循环完成时它会做的`while`事情。因此，您的代码：

```
while (sqlite3_step(pStatementHandle) != SQLITE_DONE);
{
    NSLog(@"ROW");
} 
```

相当于做：

```
while (sqlite3_step(pStatementHandle) != SQLITE_DONE)
{
    // do nothing
}

{
    NSLog(@"ROW");
} 
```

* * *

顺便说一句，您真的应该查看`sqlite3_step`返回码，如果不是`SQLITE_ROW`，`SQLITE_DONE`则显示错误（如果有）。因此你的循环：

```
while (sqlite3_step(pStatementHandle) != SQLITE_DONE);
{
    NSLog(@"ROW");
} 
```

应该是：

```
int rc;
while ((rc = sqlite3_step(pStatementHandle)) == SQLITE_ROW) // note, no ";"
{
    NSLog(@"ROW");
}

if (rc != SQLITE_DONE)
    NSLog(@"%s: step error: %d: %s", __FUNCTION__, rc, sqlite3_errmsg(pHandle)); 
```

在您的原始版本中，如果您有错误，将永远不会退出`while`循环。

# sql-server - 从 sql server 获取数据时，Select Case 语句不起作用

> ID：16135115
> 
> 赞同：1
> 
> 时间：2013-04-21T19:10:30.063
> 
> 标签：sql-server, vb.net

请原谅我问，我的 if else 和 select case 语句只会转到 ELSE 选项。下面是我的代码

```
lblStudentName.Text = CStr(studentInfo.stuFullName)
lblStudentBirthCert.Text = CStr(studentInfo.birthCert)

Dim conn As New SqlConnection
Dim cmd As New SqlCommand

conn.ConnectionString = ("server = A-PC\SQLEXPRESS;database=studentManagement;integrated security=true")
conn.Open()

cmd.Connection = conn
cmd.Parameters.AddWithValue("@id", lblStudentBirthCert.Text)
cmd.CommandText = ("SELECT paymentType From payment Where birthcert=@id")

Dim reader As SqlDataReader = cmd.ExecuteReader()
Dim tempPaymentType As String

While reader.Read()
    Dim tempPaymentType = reader.GetString(0)
    Select Case tempPaymentType
        Case "a"
            txtFeeA.Text = tempPaymentType
        Case "b"
            txtFeeB.Text = tempPaymentType
        Case "c"
            txtFeeC.Text = tempPaymentType
        Case "d"
            txtFeeD.Text = tempPaymentType
        Case "e"
            txtFeeE.Text = tempPaymentType
        Case Else
            txtFeeF.Text = tempPaymentType
    End Select
End While
reader.Close() 
```

出于某种原因，它只会转到 else 并在 txtFeeF.text 中打印出来。查询将返回 6 个结果 btw，a 到 f。与 if else 语句相同。如果没有任何 if else 和 select 语句，输出将是 f，这是 reader 中的最后一个。任何帮助是极大的赞赏。

```
If tempPaymentType.Equals("a") Then
            txtFeeA.Text = tempPaymentType.ToString
        End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:45:42.520

添加一行来帮助您调试：

```
 Dim tempPaymentType = reader.GetString(0)
    Debug.Print (String.Format("tempPaymentType: {0}", tempPaymentType))
    Select Case tempPaymentType 
```

可能有很多原因，但你没有提供足够的信息。例如，字母是不同的大小写吗？（“a”与“A”）

更改此代码可能会有所帮助：

```
Dim tempPaymentType As String

While reader.Read()
    tempPaymentType = reader.GetString(0) 
```

我很惊讶它甚至可以使用额外的`Dim`语句来构建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T02:07:32.887

尝试添加

```
Trim().ToLower() 
```

在你之后

```
GetString(0) 
```

看看是否有大小写问题或多余的空格。如果数据库字段是字符字段，它会添加额外的空格，但如果是 VARCHAR()，它应该修剪它..

# java - java.lang.NumberFormatException：对于输入字符串：“22”

> ID：16135123
> 
> 赞同：4
> 
> 时间：2013-04-21T19:11:08.313
> 
> 标签：java, exception, number-formatting

```
public void loadFromFile(String filename) {
    File file = new File(filename);
    BufferedReader br;

    try {
        br = new BufferedReader(new FileReader(file));
        numberOfAttributes = Integer.parseInt(br.readLine());
    } 
    ...
} 
```

以上是我的程序：我正在尝试从第一行是数字 22 的 txt 文件中读取，仅此而已。我不知道为什么程序给了我一个例外。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T19:15:10.257

尝试从字符串中删除任何空格：

```
 numberOfAttributes = Integer.parseInt(br.readLine().trim()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-21T19:57:18.173

我认为您的文件开头可能有一个 UTF-8 BOM（字节顺序标记）。

这是一个重现错误的类：

```
import java.io.*;

public class BomTest {
    public static void main(String[] args) throws Exception {
        File file = new File("example.txt");

        // Write out UTF-8 BOM, followed by the number 22 and a newline.
        byte[] bs = { (byte)0xef, (byte)0xbb, (byte)0xbf, (byte)'2', (byte)'2', 10 };
        FileOutputStream fos = new FileOutputStream(file);
        fos.write(bs);
        fos.close();

        BufferedReader r = new BufferedReader(new FileReader(file));
        String s = r.readLine();
        System.out.println(Integer.parseInt(s));
    }
} 
```

当我运行这个类时，我得到以下输出：

```
luke@computer:~$ java BomTest 
Exception in thread "main" java.lang.NumberFormatException: For input string: "22"
        at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
        at java.lang.Integer.parseInt(Integer.java:481)
        at java.lang.Integer.parseInt(Integer.java:514)
        at BomTest.main(BomTest.java:15) 
```

在 Java 中处理 UTF-8 BOM 确实没有简单的方法。最好不要一开始就生成它们。另请参阅[此答案](https://stackoverflow.com/questions/4897876/reading-utf-8-bom-marker)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T19:13:53.750

[br.readLine()](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine%28%29)读取包括新行特殊字符在内的整行。除此之外，形成 James 建议的解决方案，您可以使用[Scanner#nextInt()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextInt%28%29)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T19:18:53.487

try with `numberOfAttributes = Integer.parseInt(br.readLine().trim());`

`public String trim()`

> Returns a copy of the string, with leading and trailing whitespace omitted. If this String object represents an empty character sequence, or the first and last characters of character sequence represented by this String object both have codes greater than '\u0020' (the space character), then a reference to this String object is returned.
> 
> Otherwise, if there is no character with a code greater than '\u0020' in the string, then a new String object representing an empty string is created and returned.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T20:04:46.863

发生这种情况是因为您在输入行中有一个空格。看看这些：

```
int i1 = Integer.parseInt("22 ");
int i2 = Integer.parseInt("22a");
int i3 = Integer.parseInt("2 2");
int i4 = Integer.parseInt("22\n"); 
```

它们都产生异常。我建议你修剪、标记或替换。但总的来说，以这种方式从文件中读取数字对我来说并不是一个好的解决方案。如果你真的需要存储数据，为什么不创建一个临时对象并对其进行序列化/反序列化呢？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-31T09:38:39.910

您的字符串中可能有一个空字符。使用正则表达式“\d+”将其删除。

引发 NumberFormatException 是因为输入字符串不是预期的数字格式。通常，您可以在错误消息中看到“错误的字符串输入”，并且可以轻松识别错误。但在您的情况下，问题在于错误消息没有完全显示字符串输入（因为它不显示空字符）。

检查以下输出和代码。

```
public class TestParseInt{
    private static final Pattern pattern = Pattern.compile("\\d+");
    public static void main(String []args){
       String a = "22\0";
       try {
           System.out.println("Successfull parse a: " + Integer.parseInt(a));
       } catch(NumberFormatException e) {
           System.out.println("Error:" +e.getMessage());
       }
       try {
           Matcher matcher = pattern.matcher(a);
           if(matcher.find()) {
               System.out.println("Succesfull parse a: " + 
                Integer.parseInt(matcher.group(0)));
           }

       } catch(NumberFormatException e) {
           System.out.println("Error" + e.getMessage());
       }

    }
} 
```

**输出：**

**错误：对于输入字符串：“22”
成功解析 a：22**

# c++ - C++ - 运行程序而不使用从批处理文件转换的系统

> ID：16135128
> 
> 赞同：0
> 
> 时间：2013-04-21T19:11:20.397
> 
> 标签：c++, python, process, minecraft

我目前正在尝试运行带有一些参数的程序。我已经使用批处理文件做到了这一点。我在那里使用的命令是`.\runtime\bin\python\python_mcp .\runtime\recompile.py %*`

我其实是在网上找到了一个不错的启动程序功能，只是稍微调整了一下。由于我正在从一个非常不同的位置运行新程序，因此相同的命令不起作用（我想`$*`这是导致问题的原因！）

我试过这个和一些变化。

```
ExecuteProcess(L"E:\\Modding\\mcp\\runtime\\bin\\python\\python_mcp.exe", L"E:\\Modding\\mcp\\runtime\\recompile.py %*"); 
```

这是函数的代码：

```
size_t ExecuteProcess(wstring FullPathToExe, wstring Parameters = L"", size_t SecondsToWait = -1)
{
    size_t iMyCounter = 0, iReturnVal = 0, iPos = 0;
    DWORD dwExitCode = 0;
    std::wstring sTempStr = L"";

    /* - NOTE - You should check here to see if the exe even exists */

    /* Add a space to the beginning of the Parameters */
    if (Parameters.size() != 0)
    {
        if (Parameters[0] != L' ')
        {
            Parameters.insert(0,L" ");
        }
    }

    /* The first parameter needs to be the exe itself */
    sTempStr = FullPathToExe;
    iPos = sTempStr.find_last_of(L"\\");
    sTempStr.erase(0, iPos +1);
    Parameters = sTempStr.append(Parameters);

     /* CreateProcessW can modify Parameters thus we allocate needed memory */
    wchar_t * pwszParam = new wchar_t[Parameters.size() + 1];
    if (pwszParam == 0)
    {
        return 1;
    }
    const wchar_t* pchrTemp = Parameters.c_str();
    wcscpy_s(pwszParam, Parameters.size() + 1, pchrTemp);

    /* CreateProcess API initialization */
    STARTUPINFOW siStartupInfo;
    PROCESS_INFORMATION piProcessInfo;
    memset(&siStartupInfo, 0, sizeof(siStartupInfo));
    memset(&piProcessInfo, 0, sizeof(piProcessInfo));
    siStartupInfo.cb = sizeof(siStartupInfo);

    if (CreateProcessW(const_cast<LPCWSTR>(FullPathToExe.c_str()),
                            pwszParam, 0, 0, false,
                            CREATE_DEFAULT_ERROR_MODE, 0, 0,
                            &siStartupInfo, &piProcessInfo) != false)
    {
         /* Watch the process. */
        dwExitCode = WaitForSingleObject(piProcessInfo.hProcess, (SecondsToWait < 0) ? INFINITE : (SecondsToWait * 1000));
    }
    else
    {
        /* CreateProcess failed */
        iReturnVal = GetLastError();
    }

    /* Free memory */
    delete[]pwszParam;
    pwszParam = 0;

    /* Release handles */
    CloseHandle(piProcessInfo.hProcess);
    CloseHandle(piProcessInfo.hThread);

    return iReturnVal;
} 
```

是的，我正在修改 Minecraft

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:24:34.993

代码本身可以工作，所以我只能假设“不工作”是指第二个应用程序启动但失败退出。当您从批处理文件执行此操作`%*`时，命令行末尾的命令行将被删除，因为 shell 尝试将其扩展为环境变量（想想 %PATH%）。当您将它作为参数传递给 时，它作为`CreateProcess`附加`%*`参数传递并可能转发到`recompile.py`. 如果`%*`被 python 脚本解释为文件名，它将无法找到它并会以失败退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:48:04.670

那么问题不是`%*`。就是需要从`E:\Modding\mcp\`. 所以我只需要更改调用文件的路径！

# ruby-on-rails - Rails：使用 Devise 仅通过电子邮件登录用户

> ID：16135129
> 
> 赞同：0
> 
> 时间：2013-04-21T19:11:32.913
> 
> 标签：ruby-on-rails, session, cookies, devise

这是我的情况。我让用户在登录页面中注册，以便在页面启动时我们可以联系他们。他们只是输入他们的电子邮件。

我正在寻找的是在用户注册后自动登录用户，因为我希望能够知道刚刚注册的用户是否单击了立即显示的按钮，他的注册已完成。

我怎样才能知道注册用户的电子邮件？我应该将它存储在哪里，以便使用 Javascript 侦听器我能够侦听点击并将该电子邮件发送回服务器？

谢谢

# c - 警告：从不同大小的整数转换为指针

> ID：16135130
> 
> 赞同：0
> 
> 时间：2013-04-21T19:11:52.200
> 
> 标签：c, pointers, types, casting

我写了以下代码：

```
struct DVDARRAY
{
    int length;
    pDVD* dvds;
};

typedef struct DVDARRAY DVDARRAY_t;

//...
int main() 
{
    int i;
    char c;
    DVDARRAY_t* dvds;
    poDAOproperties props;
    props = get_dao_properties();
    dvds = (DVDARRAY_t*) DVDDAO_read_raw_filter(props, "id = 1");
    printf("title->: %s", dvds->dvds[0]->title);
} 
```

在另一个文件中定义了以下内容：

```
DVDARRAY_t* DVDDAO_read_raw_filter(poDAOproperties properties, char* filter)
{
    DVDARRAY_t *dvds;
    // ...some code...
    dvds = malloc(sizeof(DVDARRAY_t));
    // ...some code...
    return dvds;
} 
```

现在我的问题：当我尝试编译这些文件时，我收到以下警告：

```
src/main.c: In Funktion »main«:
src/main.c:80:9: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast] 
```

main.c 的第 80 行正是该行：

```
dvds = (DVDARRAY_t*) DVDDAO_read_raw_filter(props, "id = 1"); 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:57:42.573

您没有列出上面的文件名，所以我只会称它们`main.c`为`dvd.c`.

在`main.c`中，您调用了其他未声明的函数`DVDDAO_read_raw_filter`。这告诉编译器假设该函数存在，具有未知（但固定）的参数集，并且具有类型的返回值`int`。

在`dvd.c`您定义`DVDDAO_read_raw_filter`具有固定（和已知）参数的函数时，返回 type `DVDARRAY_t*`。（大概你必须重复`DVDARRAY_t`first 的定义。）

请注意，它`main.c`相信一些不真实的东西`DVDDAO_read_raw_filter`，即它具有返回类型`int`。这会导致您的编译时诊断。运气好（你可以自己决定这是好运还是坏运:-)）尽管有这种错误的信念，程序还是成功运行。

要解决此问题，`main.c`请在调用函数之前说明该函数，即声明它。`-Wimplicit-function-declaration`您还可以通过添加编译时标志从 gcc 获得更明确的警告。

`struct`通常，将定义、`typedef`s 和函数声明放入头文件（例如`dvd.h`）中，然后`#include`将该头放入使用定义和声明的各种 C 源文件中是一个好主意。这样编译器可以将函数声明与函数定义进行比较，您无需在多个文件中重复 s 的内容和`struct`s 的名称。`typedef``.c`

# mysql - 用于帖子的社交网络 SQL 语句

> ID：16135134
> 
> 赞同：0
> 
> 时间：2013-04-21T19:12:25.707
> 
> 标签：mysql, sql

我一直在社交网络上工作以加深我对 PHP 的了解，但是我已经到了我将根据用户是“朋友”的人从他的数据库中提取帖子的地步。

我给朋友的数据库结构如下：

```
USER_A | USER_B | CREATED_AT | IS_BLOCKED 
```

然后是帖子：

```
USER | UPDATE | STATUS 
```

因此，如果登录的用户是发布它的用户的朋友，我想显示从我的帖子表中选择的帖子。

所以，基本上，想知道是否有人有任何建议。它不会再复杂了，对结交朋友的朋友或类似的东西不感兴趣。所以，只是想知道是否有人可以用这个为我指明正确的方向。

我读到它需要 JOIN 等，但是我从来没有真正进入过 SQL 的那一边，因此不知道我会用它做什么，所以如果需要的话，将不胜感激相关问题和文章的链接.

谢谢

（我本质上是在寻找 SQL 语句的帮助，而不是 PHP 的帮助。）

**更新#1：**

我已经让新闻源工作了，现在我需要能够加入一个声明来显示用户名。我目前的状态是：[http ://sqlfiddle.com/#!2/b07793/1/0](http://sqlfiddle.com/#!2/b07793/1/0)

*在任何人疯狂以明文形式存储密码之前，这不是一个公共系统，它纯粹是由我来测试的，对于一个只有我使用假密码的非公共脚本的哈希密码几乎不是安全风险，它只是让调试变得痛苦。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:22:34.250

像这样的东西应该工作：

```
SELECT * FROM posts 
JOIN friends ON posts.user = friends.user_b
WHERE user_a = 'someuser' 
```

在这个语句中，我们正在加入表：posts和friends，根据两列的值，我们将post表的user列与friends表的user_b列建立关系，这样我们将得到一个结果仅设置两个表的值，其中两个相关列相等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:20:24.413

如果我正确理解了您描述的数据库模式，这将为您带来所有由与登录用户成为朋友的用户撰写的帖子。

```
 SELECT * FROM posts WHERE posts.user IN (SELECT user_b FROM friendships WHERE user_a=$logged_in_user) 
```

查询非常简单。您从表`posts`中获取该帖子的创建者在您的`friendships`表中有一行作为 user_b 而 user_a 设置为登录用户的表中的所有行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T19:24:18.653

我假设了一些事情，如果它们不正确，您将不得不修改这些东西，但如果我是对的，这些操作将不需要任何`JOIN`s：

1.  `$userSession`变量包含登录的用户 ID。
2.  `$userToView`变量包含他试图查看的用户 ID。
3.  您的数据库结构中只有两个用户是朋友的条目，因此我们必须检查这两种组合。

判断用户是否为好友：

```
SELECT user_a, user_b FROM friends
WHERE (user_a = $userSession AND user_b = $userToView)
OR (user_a = $userToView AND user_b = $userSession)
LIMIT 1; 
```

然后你会`if`在 PHP 中使用一条语句（通常最好将业务逻辑保留在应用程序中，而不是在数据库中），如果它是真的返回帖子。

```
$results = $mysqli->query($query)->fetch_row();
if($results) {
    ... return posts ...
} else {
    echo 'Not friends';
} 
```

那将是一个类似这样的查询：

```
SELECT * FROM posts
WHERE user = $userToView; 
```

您将需要阅读有关[mysqli](http://php.net/manual/en/book.mysqli.php)（不要使用 mysql 插件，它已被弃用）以及有关[SQL 注入攻击](http://php.net/manual/en/security.database.sql-injection.php)以及如何防止它们的信息。这听起来可能很麻烦，但理解这些东西远没有如果你不去处理后果那么令人生畏。

# f# - 为什么 FSharp 交互允许可变 let？

> ID：16135135
> 
> 赞同：0
> 
> 时间：2013-04-21T19:12:35.733
> 
> 标签：f#, read-eval-print-loop

在 FSI 我输入

```
> let a = 10;;

val a : int = 10

> let a = a + 1;;

val a : int = 11 
```

看起来我在这里有一个可变变量？我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T19:16:47.870

It is not a mutable value. But you use the shadowing : in F#, value shadowing occurs when a variable declared within a certain scope (decision block, method, or inner class) has the same name as a variable declared in an outer scope.

If you want to have a mutable value, there is a syntaxe in F# :

```
let mutable a = 10
a <- a + 1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-21T21:28:57.443

正如 Arthur 已经解释的那样，您看到的是*阴影*，这意味着命名的原始“变量”`a`被一个也命名的新“变量”隐藏`a`（我在引号中使用变量，因为它们实际上是不可变的值）。

要查看差异，您可以在函数中捕获原始值，然后在隐藏原始值后打印该值：

```
> let a = 10;;                // Define the original 'a' value
val a : int = 10

> let f () = a;;              // A function captures the original value    
val f : unit -> int

> let a = 42;;                // Define a new value hiding the first 'a'
val a : int = 42

> f();;                       // Prints the original value - it is not mutated!
val it : int = 10 
```

可悲的是，您不能使用完全相同的代码来查看`let mutable`行为方式（因为 F# 不允许在闭包中捕获可变引用），但是当您使用*引用单元格*（即，在堆中存储可变值的简单对象）时，您可以看到突变):

```
> let a = ref 10;;             // Create a mutable reference cell initialized to 10
val a : int ref = {contents = 10;}

> let f () = !a;;              // A function reads the current value of the cell    
val f : unit -> int

> a := 42;;                    // Overwrite the value in the cell with 42
val it : unit = ()

> f();;                        // Prints the new value - it is mutated
val it : int = 42 
```

您可以在 F# 交互中逐行运行代码，但是当您复制整个片段（输入行）并将它们放在普通 F# 代码中时，它会执行完全相同的操作 - 例如，在函数或模块中。只是为了`;;`在 F# 交互输入中结束行（我在 F# 交互窗口中键入了代码），但在普通代码中不需要它，因为 F# 使用缩进来查找语句的结束位置。

# image - DotNetNuke 图片库

> ID：16135136
> 
> 赞同：-1
> 
> 时间：2013-04-21T19:12:40.543
> 
> 标签：image, list, dynamic, gallery, dotnetnuke

我正在寻找 Dot Net Nuke 的图片库，但具有特殊功能。我会选择要显示的图像列表，然后将列表提供给模块。图像列表将是动态的。

提前致谢，

米格尔·梅德罗斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:35:01.457

我[的 DotNetNuke 照片库模块](http://oliverhine.com/DotNetNuke/Modules/PhotoGallery.aspx)使用 Flickr 或 Picasa 为您的 DNN 门户提供照片的动态列表。当照片上传到 Flickr 或 Picasa 时，它们将被推送到为该相册配置的 DNN 模块。它是 100% 免费的，适用于 DNN 5-7+，并且有很多 jQuery 插件可供您选择来控制图像的显示方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:52:17.237

你试过这个模块吗 [http://dnngallery.codeplex.com/](http://dnngallery.codeplex.com/) 你可以配置来做到这一点。

# c# - 打开新表单并关闭当前/第一个表单的推荐方法是什么？

> ID：16135138
> 
> 赞同：-1
> 
> 时间：2013-04-21T19:12:48.120
> 
> 标签：c#, winforms

我正在构建一个具有用于登录的初始表单的应用程序，如果用户被授权此表单（登录）应该关闭并且应用程序主表单应该打开。

我正在检查 SO 是否有帮助的问题，我发现了很多相关的问题，但我不知道应该使用哪种技术，所以我在这里问。打开新表单并关闭当前表单的推荐方法是什么？

我看到有些人建议 OP 创建一个新线程，而其他人建议使用“向导”（我不知道它是什么，但如果这是最好的方法，请给我一些资源来学习）。

我试图通过关闭第一个并打开第二个来做到这一点，但应用程序关闭了。

`this`指的是第一种形式。

```
this.Close();
FormSecond f = new FormSecond();
f.Show(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T19:48:12.130

> 如果用户被授权，这个表单（登录）应该关闭并且应用程序主表单应该打开。

建议 1、2 和 3 强烈声明**不**要这样做。将您自己的身份验证层添加到 Windows 已经提供的身份验证层绝不是一个错误。您将*永远不会*像 Windows 登录那样安全且经过良好测试。并且存在严重的安全风险，用户会重复使用他们的登录密码。如果您需要任何额外信息来登录 Environment.UserName 和用户所属的组，那么您可以从具有 System.DirectoryServices 命名空间的域控制器中获取这些信息。

但你会把这种谨慎抛诸脑后。样板解决方案是修改 Program.cs 中的 Main() 方法，并使用 ShowDialog() 显示登录表单。登录良好时应返回 DialogResult.OK ，否则返回 DialogResult.Cancel 。你像这样使用它：

```
 [STAThread]
    static void Main() {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        using (var login = new LoginForm()) {
            if (login.ShowDialog() != DialogResult.OK) return;
        }
        Application.Run(new Form1());
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T19:48:31.397

这就是你的做法：

```
FormSecond f = new FormSecond();
f.Show();
this.Close(); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-21T19:24:00.663

如果您从登录表单开始并关闭它，您将不再有任何线程可以运行。因此（其中一个）解决方案是运行不同的初始表单并使该表单启动登录表单。一旦登录表单不再有用，您可以关闭它并将控制权返回到初始表单。然后，您可以根据需要从初始表单生成任何类型的表单。

# mysql - 分块转储 MySQL 表

> ID：16135140
> 
> 赞同：3
> 
> 时间：2013-04-21T19:12:51.307
> 
> 标签：mysql, database, backup, database-backups

我想备份一个大的 innodb MySQL 表，但不幸的是没有足够的可用空间来创建它的完整转储。所以我想把备份分成两部分。这意味着我将转储表的一半，将该文件移动到外部备份位置，然后备份另一半并将其也移动。

我习惯这样做：`mysqldump --user=$user --password=$pass --single-transaction --quick`

我怎样才能一次一半地执行这样的操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:22:28.407

您可以像这样备份特定表

数据库中的表 t1、t2 和 t3。

```
mysqldump -u... -p... mydb t1 t2 t3 > mydb_tables.sql 
```

或者您可以创建一个安装点 (unix) 或网络驱动器 (windows) 并直接在其上进行备份。

如果您只想备份多个部分的表

```
mysqldump --databases X --tables Y --where="1 limit 1000000"
mysqldump --databases X --tables Y --where="myColumn < 1000" 
```

# c - 函数内的 C 缓冲区 calloc 或 malloc 不能保证安全性？

> ID：16135144
> 
> 赞同：1
> 
> 时间：2013-04-21T19:13:15.760
> 
> 标签：c, memory

这是一个关于如何在一段简单的 C 代码中实现“腰带和吊带”安全的问题。一个老生常谈的问题是如何确保可以将数据移动到某个调用函数内的缓冲区中，而不必担心堆内存在返回后被损坏。这个网站上写了一些关于这个话题的好东西，至少对我来说，仍然不清楚我们在哪里可以获得真正的完全安全。所以我写了以下内容：

```
/*********************************************************************
 * The Open Group Base Specifications Issue 6
 * IEEE Std 1003.1, 2004 Edition
 *********************************************************************/
#define _XOPEN_SOURCE 600

#include <ctype.h>
#include <errno.h>
#include <locale.h>
#include <stddef.h>
#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int use_buffer( const char *strin, char **strout, size_t bufsize ) {

    size_t len;
    int result = -1;

    printf ( "in use_buffer() we have address of strout = %p\n", &strout );
    printf ( "            and that contains an address of %p\n", strout );
    printf ( "           which points to a buffer address %p\n", *strout );

    /* check for null data */
    if ( ( strin == NULL ) || ( *strout == NULL ) )
        return result;

    /* check for zero length data */
    if ( strlen(strin) == 0 )
        return result;

    /* ensure we have a non-zero size buffer to write to ?
     * belt and suspenders safety here is not assured. We have
     * no way to know if the calling routine actually did 
     * allocate memory of size bufsize. 
     */
    len = strlen(strin);
    if ( bufsize < len )
        return result;

    strncpy ( *strout, strin, len );

    return len;

}

int main ( int argc, char *argv[] ) {

    char *some_buffer;
    int retval;
    size_t buflen;

    if ( argc < 2 ) { 
        printf ( "usage: %s somestring\n", argv[0] );
        return ( EXIT_FAILURE );
    }

    buflen = (size_t) ( 4 * 4096 );
    some_buffer = calloc( buflen, sizeof( unsigned char) );
    if ( some_buffer == NULL ) { 
        perror ( "Could not calloc a 16Kb byte buffer." );
        return ( EXIT_FAILURE );
    }

    printf ( "main() has a 16Kb buffer ready at address = %p\n",
                                                      &some_buffer );
    retval = use_buffer( argv[1], &some_buffer, buflen );
    if ( retval > 0 )
        printf ( "Maybe we have %i bytes copied into a buffer.\n", retval );

    free ( some_buffer );
    some_buffer = NULL; /* belt and suspenders */

    return ( EXIT_SUCCESS );

} 
```

编译并运行它，我看到了：

```
$ ./use_buffer "foo of the bar"
main() has a 16Kb buffer ready at address = ffffffff7ffff710
in use_buffer() we have address of strout = ffffffff7ffff630
            and that contains an address of ffffffff7ffff710
           which points to a buffer address 100101440
Maybe we have 14 bytes copied into a buffer. 
```

其中一个地址确实看起来不正确。其中之一就是不一样。

真的，很难知道为什么前三个地址在其他一些内存区域中离得很远，而最后一个看起来可能是一些本地堆内存？

以上方法绝对安全带和吊带吗？我的意思是该函数将使用我们知道已预先分配的缓冲区，并且该函数无法将其搞砸。我怀疑该函数是否可以对存储在 strout 中的地址调用 free()。这就像用房间钥匙入住酒店然后放火烧房间一样。站在里面的时候。我想这可以做到..但会很疯狂。

所以这里有两个问题：（1）函数有没有办法验证分配的缓冲区大小？即使方法是触发内存违规。然后（2）将空指针传递给函数然后允许函数根据需要调用/分配缓冲区并传回地址是否安全？

我怀疑（2）被打死了，答案是“安全不能保证”。（旁注：顺便说一句，该死的好电影。）

考虑这个代码位：

```
/*********************************************************************
 * The Open Group Base Specifications Issue 6
 * IEEE Std 1003.1, 2004 Edition
 *********************************************************************/
#define _XOPEN_SOURCE 600

#include <ctype.h>
#include <errno.h>
#include <locale.h>
#include <stddef.h>
#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int bad_buffer( const char *strin, char **strout ) {

    size_t len;
    int result = -1;
    char *local_buffer;

    /* check for null data */
    if ( strin == NULL )
        return result;

    /* check for zero length data */
    len = strlen(strin);
    if ( len == 0 )
        return result;

    /*
     * safety not guaranteed ?
     */
    local_buffer = calloc( len+1, sizeof( unsigned char) );

    printf ( "  in bad_buffer() we have local_buffer at = %p\n",
                                                    &local_buffer );

    strncpy ( local_buffer, strin, len );
    *strout = local_buffer;

    return len;

}

int main ( int argc, char *argv[] ) {

    char *some_buffer;
    int retval;
    size_t buflen;

    if ( argc < 2 ) { 
        printf ( "usage: %s somestring\n", argv[0] );
        return ( EXIT_FAILURE );
    }

    retval = bad_buffer( argv[1], &some_buffer );
    printf ( "in main() we now have some_buffer at addr %p\n", some_buffer );

    if ( retval > 0 )
        printf ( "Maybe we have %i bytes copied into a buffer.\n", retval );

    printf ( "main() says the buffer contains \"%s\"\n", some_buffer );

    free ( some_buffer ); /* really ?  main() did not allocate this !? */
    some_buffer = NULL;

    return ( EXIT_SUCCESS );

} 
```

当我编译并运行时，我看到：

```
$ ./bad_buffer foobar
  in bad_buffer() we have local_buffer at = ffffffff7ffff6b0
in main() we now have some_buffer at addr 100101330
Maybe we have 6 bytes copied into a buffer.
main() says the buffer contains "foobar" 
```

这里似乎有些诡异。该函数执行了 calloc，然后将缓冲区的*地址*填充到strout 中的地址中。所以 strout 是一个指向指针的指针，所以我很好。让我害怕的是，函数分配的内存在完成后没有权利或理由被认为是安全的，我们又回到了 main()。

所以问题号（2）代表“允许函数调用/分配所需的缓冲区有什么安全性吗？”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:25:37.653

> 其中一个地址确实看起来不正确。其中之一就是不一样。
> 
> 真的，很难知道为什么前三个地址在其他一些内存区域中离得很远，而最后一个看起来可能是一些本地堆内存？

`some_buffer`（或其别名`strout`）是存储在**堆栈**中的局部变量，`main`并指向**堆中**的地址。所以它们是不同内存区域的地址

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:31:57.697

```
$ ./use_buffer "foo of the bar"
main() has a 16Kb buffer ready at address = ffffffff7ffff710
in use_buffer() we have address of strout = ffffffff7ffff630
            and that contains an address of ffffffff7ffff710
           which points to a buffer address 100101440
Maybe we have 14 bytes copied into a buffer. 
```

这里有 3 个第一个值在堆栈中。查看您的代码，中间的实际上是该函数的本地参数的地址，而 1st 和 3rd 是`main()`. 请注意堆栈是如何向下增长的，因此它位于高地址，并且被调用的函数参数低于调用函数的变量。

第 4 个值是一种特殊情况，因为它是`argv`字符串的地址。这些字符串要么是全局变量（在它们自己的程序地址空间部分中），要么它们甚至可以位于操作系统特定的特殊地址上，而不靠近其他任何东西。

* * *

```
$ ./bad_buffer foobar
  in bad_buffer() we have local_buffer at = ffffffff7ffff6b0
in main() we now have some_buffer at addr 100101330
Maybe we have 6 bytes copied into a buffer.
main() says the buffer contains "foobar" 
```

在这里，第一个地址在堆栈中，是函数中局部变量的地址。第二个地址是堆中的内存，指针的*值*`main()`。

* * *

是的，一目了然，您的代码是安全的。您似乎将指针值与指针变量的地址混淆了。考虑一下：

```
char *p1 = malloc(10);
char *p2 = p1;
printf("%p %p %p %p\n", &p1, &p2, p1, p2); 
```

上面将打印类似

```
ffffffff7ffff710 ffffffff7ffff702 100101440 100101440 
```

首先是变量的地址`p1`，它是这里和堆栈中的局部变量。第二个是 的地址`p2`，也是局部变量和堆栈中的地址。然后最后两个地址作为`malloc`调用的返回值，分配给`p1`并复制到`p2`. `free`无论您将地址传递多少次，或者即使您丢失了地址（在这种情况下您有内存泄漏），该分配的块都将一直保留到您。当你`free`这样做时，任何仍然指向该区域的指针都会变成悬空指针，并且不应该被取消引用。

# jquery - 鼠标悬停时的 Jquery Mapster 笔划

> ID：16135145
> 
> 赞同：1
> 
> 时间：2013-04-21T19:13:19.803
> 
> 标签：jquery, colors, render, mouseover, stroke

我正在使用此设置以不同的颜色渲染地图的不同区域。

[http://jsfiddle.net/6maJw/](http://jsfiddle.net/6maJw/)

问题是，我也需要在鼠标悬停时中风，但是什么时候我会使用`stroke: true`，描边是在每个彩色区域渲染后绘制的。但我需要它只在鼠标悬停时才能看到。

可以在这里看到

[http://prntscr.com/11l66x](http://prntscr.com/11l66x)

描边必须仅在鼠标悬停时可见

# javascript - 我需要制作一个由五种背景颜色组成的数组，然后使用“stylize() 函数”为表格随机选择一种

> ID：16135147
> 
> 赞同：0
> 
> 时间：2013-04-21T19:13:28.577
> 
> 标签：javascript, arrays, random

我在一个基本的 HTML/JavaSript 类中，我想不出一种方法（以及在哪里放置）一个由五个 bgcolors 组成的数组，并且“使用 stylize() 函数选择一种颜色来随机选择单元格背景”。我必须使用和编辑下面的代码。代码已经可以工作了，我只需要添加 bgcolors 数组并使用它来更改表格单元格 bgcolor。我是 HTML 和 JavaScript 的新手，任何帮助将不胜感激。先感谢您！

```
<html>

<head>
<title>HTML and JavaScript</title>
<link href="capstone.css" rel="stylesheet" type="text/css"></link>
<script>
var index = 0;

function stylize()
{
  index++;
  if (index > 20) index =1;
  var s = "myStyle" + index;
  var e = document.getElementById("MessageText");
  e.className = s;
  setTimeout("stylize()", 1500);
  return;
}

function getRandomInt (min, max) 
{
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

index = getRandomInt(1, 20);

 </script>
 </head>

 <body onLoad="stylize()">
  <table align="center" border="1" bordercolor="black">
   <tr>
    <td align="center">
     <font size="3"><b>STYLE CLASS VIEWER</b></font>
    </td>
   </tr>
   <tr>
    <td align="center" height="100" width="400">
     <div id="MessageText" class="myStyle1">
      Hello World Wide Web!
     <div>
    </td>
   </tr>
  </table>
 </body>

</html> 
```

这是我的 CSS 页面：

```
.myStyle1 {font-family:Impact; color:black; font-size:100}
.myStyle2 {font-family:Georgia; color:black; font-size:18}
.myStyl31 {font-family:Tahoma; color:black; font-size:24}
.myStyle4 {font-family:Verdana; color:black; font-size:48}
.myStyle5 {font-family:Impact; color:red; font-size:30}
.myStyle6 {font-family:Marlett; color:green; font-size:65}
.myStyle7 {font-family:Arial; color:blue; font-size:46}
.myStyle8 {font-family:Courier Sans MS Bold; color:blue; font-size:60}
.myStyle9 {font-family:Impact; color:blue; font-size:35}
.myStyle10 {font-family:Arial Italic; color:blue; font-size:10}
.myStyle11 {font-family:Times New Roman; color:blue; font-size:50}
.myStyle12 {font-family:Tahoma; color:blue; font-size:38}
.myStyle13 {font-family:Verdana; color:white; font-size:30}
.myStyle14 {font-family:Marlett; color:blue; font-size:70}
.myStyle15 {font-family:Impact; color:blue; font-size:24}
.myStyle16 {font-family:Georgia; color:blue; font-size:24}
.myStyle17 {font-family:Impact; color:blue; font-size:35}
.myStyle18 {font-family:Georgia; color:black; font-size:12;}
.myStyle19 {font-family:Arial; color:blue; font-size:20;}
.myStyle20 {font-family:Tahoma; color:blue; font-size:55} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:43:16.160

只需将`background-color`规则添加到这些课程中的每一个，您就应该一切顺利，完全无缘无故地让人们偏头痛，只是因为您可以。甜的！

# java - 使用乐观锁定创建新的 Datastore 实体 (Google App Engine Java / JPA)

> ID：16135148
> 
> 赞同：4
> 
> 时间：2013-04-21T19:13:37.437
> 
> 标签：java, google-app-engine, datanucleus

我有一个 JPA 实体类用户，其用户名 @ID 且没有父实体组。我需要确保当两个并行事务尝试使用相同的用户名持久化一个**新**用户时，只有一个被提交，另一个被回滚。

例子：

```
User bob = new User("bob");
EntityTransaction transaction = em.getTransaction();

try {
  transaction.begin();
  User u = em.find(User.class, bob.id());
  if (u == null) {
    em.persist(bob);
  } else {
    // identical user already existed before the transaction
    throw new UserExistsException(); 
  }
  transaction.commit();
} catch (RollbackException e) {
    // identical user was created during the transaction
    throw new UserExistsException();
} 
```

根据 Datastore 文档，事务遵循乐观锁定方法：

> “当事务开始时，App Engine 通过检查事务中使用的实体组的最后更新时间来使用乐观并发控制。在为实体组提交事务时，App Engine 再次检查在事务中使用的实体组的最后更新时间“ （[https://developers.google.com/appengine/docs/java/datastore/transactions](https://developers.google.com/appengine/docs/java/datastore/transactions)）

这在持久化事务之前不存在的新（根）实体时是否有效？就我而言，App Engine 是否会检查另一笔交易是否同时保留了具有相同 ID 的用户？如果是这样，我是否需要一个显式的 @Version 字段来达到这个目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-26T20:08:42.617

对这个问题进行一些早就应该结束的事情：答案是“是”，上面的代码应该可以按预期工作。简而言之，乐观并发控制机制将使用（根）实体的种类“用户”和给定的标识符“鲍勃”来比较两个事务中使用的（新）实体组。[Datastore 文档](https://cloud.google.com/appengine/docs/java/datastore/#Java_Transactions_and_entity_groups)现在还明确解决了创建案例：

> 当两个或更多事务尝试同时更改同一个实体组（更新现有实体**或创建新**实体）时，第一个提交的事务将成功，所有其他事务将在提交时失败。

在这种情况下，使用 JPA，您会得到一个 RollbackException。低级 API 将引发 ConcurrentModificationException。如果您使用 Objectify（我强烈推荐），失败的事务将自动重试。因此，您应该确保在事务中首先检查实体是否存在，除非您想在第二次尝试时覆盖它。

# android - 如何使用外部意图启动服务？

> ID：16135157
> 
> 赞同：0
> 
> 时间：2013-04-21T19:15:13.830
> 
> 标签：android, service, broadcastreceiver

我想知道是否可以使用从另一个应用程序发送的意图启动服务？我有一个广播接收器，`android.intent.action.BOOT_COMPLETED`即使在收到意图时它也可以工作，因为它没有实例化 BrodcastReceiver 类。我为 tasker 的外部意图做了类似的事情，但它不起作用。

```
<receiver android:name="BootReceiver">  
    <intent-filter>  
        <action android:name="android.intent.action.BOOT_COMPLETED" />  
    </intent-filter>  
</receiver> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:18:53.263

> 我想知道是否可以使用从另一个应用程序发送的意图启动服务？

当然。

> 我有一个 android.intent.action.BOOT_COMPLETED 的广播接收器，即使在接收到意图时它也可以工作，因为它没有实例化 BrodcastReceiver 类。

这是因为清单注册的`BroadcastReceiver`对象没有提前实例化。它们仅在发送匹配的广播时创建。

> 我为 tasker 的外部意图做了类似的事情，但它不起作用。

“它不起作用”对于任何人来说都不足以帮助您。

但是，如果您有一个`<service>`with `<intent-filter>`，其他应用程序可以创建一个`Intent`匹配的`<intent-filter>`并使用它来启动（或绑定到）您的服务。有两个例外：

1.  如果您添加`android:exported="false"`到`<service>`，则第三方应用程序根本无法调用它，但`<intent-filter>`在这种情况下，您最好摆脱它

2.  如果您`android:permission`在`<service>`元素上使用，则其他应用程序需要保留您声明的权限才能启动或绑定到您的服务

# c# - 用两个时间框架检查可用性的算法

> ID：16135158
> 
> 赞同：0
> 
> 时间：2013-04-21T19:15:15.890
> 
> 标签：c#, c#-4.0

在两个时间范围内检查出租设备的可用性的最佳算法是什么？

我有设备的时间范围和现有的租赁（开始和结束日期）以及“新”租赁的时间范围。

例子：

```
New rental: 18 April 2013 - 25 April 2013 
```

在这种情况下，我想返回 false：

```
a) Existing rental: 20 April 2013 - 24 April 2013
b) Existing rental: 16 April 2013 - 24 April 2013
c) Existing rental: 20 April 2013 - 28 April 2013
d) Existing rental: 16 April 2013 - 28 April 2013 
```

可能还有更多案例，但我认为我想要什么很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:24:35.490

好吧，大概你想检查任何现有的租金是否与新的租金相交。

首先，您需要确定“相交”的确切含义。鉴于您给出了*日期*值（而不是日期/时间值），我建议您的日期范围可能包含两端（例如 4 月 20 日 - 4 月 22 日包括 4 月 22 日，因此与 4 月 22 日 - 4 月 24 日相交）。

接下来，你想得到一个合适的表示 - 我有偏见，但我建议[Noda Time](http://noda-time.googlecode.com)因为它有“只是一个日期”而不是“一个日期和时间”的表示。然后，您可能想要添加类似`DateInterval`复合类型的内容。

第三，我强烈建议在纸上画出可能性。画两条线，一条用于现有租赁，一条用于新租赁，并计算出所有可能性。我*怀疑*你实际上想要的只是：

```
public sealed class DateInterval
{
    private readonly LocalDate start;
    private readonly LocalDate end;

    // TODO: Properties

    public DateInterval(LocalDate start, LocalDate end)
    {
        // TODO: Assert that end >= start, and that they use the same
        // calendar system
        this.start = start;
        this.end = end;
    }

    public bool IntersectsWith(DateInterval other)
    {
        // It intersects *unless* it's either completely before or completely
        // after *other*. There are other ways of representing this, but it's
        // the way that makes most intuitive sense to me.
        return !(this.end < other.start || this.start > other.end);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:53:32.047

我认为您需要的是一个好的数据结构或一些逻辑。希望下面的逻辑可以过滤掉所有重叠的时间范围。

```
 var overlappingIntervals = intervals
                    .Where(r => 
                        (r.Start <= toCheck.Start && r.End >= toCheck.End) //inside a timeframe
                    || (r.Start >= toCheck.Start && r.End <= toCheck.End) //other is inside our timeframe
                    || (r.Start >= toCheck.Start && r.End >= toCheck.End && r.Start <=toCheck.End) //end overlap
                    || (r.Start <= toCheck.Start && r.End <= toCheck.End && r.End >= toCheck.Start)// start overlap

                    ).ToList(); 
```

我还放置了 commnets 来检测情况。

```
class Program
    {
        static void Main(string[] args)
        {
            List<DateInterval> intervals = new List<DateInterval>();
            intervals.Add(new DateInterval(Convert.ToDateTime("26 April 2013"), Convert.ToDateTime("27 April 2013")));
            intervals.Add(new DateInterval(Convert.ToDateTime("16 April 2013"), Convert.ToDateTime("24 April 2013")));
            intervals.Add(new DateInterval(Convert.ToDateTime("20 April 2013"), Convert.ToDateTime("28 April 2013")));
            intervals.Add(new DateInterval(Convert.ToDateTime("16 April 2013"), Convert.ToDateTime("28 April 2013")));

            DateInterval toCheck = new DateInterval(Convert.ToDateTime("16 April 2013"),
                                                    Convert.ToDateTime("25 April 2013"));

            var overlappingIntervals = intervals
                .Where(r => 
                    (r.Start <= toCheck.Start && r.End >= toCheck.End) //inside a timeframe
                || (r.Start >= toCheck.Start && r.End <= toCheck.End) //other is inside our timeframe
                || (r.Start >= toCheck.Start && r.End >= toCheck.End && r.Start <=toCheck.End) //end overlap
                || (r.Start <= toCheck.Start && r.End <= toCheck.End && r.End >= toCheck.Start)// start overlap

                ).ToList();
            Console.Write(overlappingIntervals.Count);

        }
    }

    public class DateInterval
    {

        public DateInterval(DateTime Start, DateTime End)
        {
            this.Start = Start;
            this.End = End;
        }
        public DateTime Start { get; set; }
        public DateTime End { get; set; }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T15:37:03.403

您可以使用[.NET 的时间周期库](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET)来检查时间框架的可用性：

```
// ----------------------------------------------------------------------
public void CheckAvailableTmeFrame()
{
  TimePeriodCollection periods = new TimePeriodCollection();
  periods.Add( new TimeRange( new DateTime( 2013, 4, 20 ), new DateTime( 2013, 4, 24 ) ) );
  periods.Add( new TimeRange( new DateTime( 2013, 4, 16 ), new DateTime( 2013, 4, 24 ) ) );
  periods.Add( new TimeRange( new DateTime( 2013, 4, 20 ), new DateTime( 2013, 4, 28 ) ) );
  periods.Add( new TimeRange( new DateTime( 2013, 4, 16 ), new DateTime( 2013, 4, 26 ) ) );

  // test period
  TimeRange test = new TimeRange( new DateTime( 2013, 4, 18 ), new DateTime( 2013, 4, 25 ) );

  // find the available 
  TimeGapCalculator<TimeRange> gapCalculator = new TimeGapCalculator<TimeRange>();
   ITimePeriodCollection gaps = gapCalculator.GetGaps( periods, test );

  Console.WriteLine( "Time frame {0}. Available: {1}", 
     test, gaps.Count == 1 && gaps[ 0 ].Equals( test ) );
} // CheckAvailableTmeFrame 
```

# php - 单击按钮后使用从数据库返回的数据创建动态列表

> ID：16135159
> 
> 赞同：0
> 
> 时间：2013-04-21T19:15:24.453
> 
> 标签：php, javascript, html, ajax

我的网页中有简单的按钮。我想要的是当任何人单击一个按钮时，它下面的段落将填充数据库查询的结果（返回两列）。列表文本包括第一列的元素。列表项充当超链接，源文档由第二列的元素指向。

例如：如果数据库表是

名称链接

* * *

视频1 url1
视频2 url2 视频3
url3

我希望动态生成等效的html代码（按下按钮后）

```
<ul>
<li><a href="url1">Video1</a>
<li><a href="url2">Video2</a>
<li><a href="url3">Video3</a>
<ul> 
```

我一直在阅读，我想 AJAX 是这个工作的人选。但我似乎无法弄清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:21:09.027

这是一个很好的例子，说明如何使用 ajax 来获取数据：

[使用 Ajax 执行 GET 和 POST 请求](http://www.javascriptkit.com/dhtmltutors/ajaxgetpost.shtml)

PHP 方面非常基础。只需从数据库中列出您需要的内容。还要确保您受到保护以免受 SQL 注入。

# ruby-on-rails - How do I post an image using Koala gem?

> ID：16135171
> 
> 赞同：0
> 
> 时间：2013-04-21T19:17:12.307
> 
> 标签：ruby-on-rails, facebook, koala, koala-gem

I'm using the Koala gem to post images to the Facebook wall with the put_object method. The problem I'm having is that the images show up as thumbnails on the wall (with a caption) instead of the larger image that I'm expecting. When you click on the thumbnail, I'm expecting the photo to pop open in Facebook's photo viewer, but it simply directs me to the URL of the image I specified. This seems more like the behavior I'd expect when posting a link to the wall. I've also tried using post_picture with no success. Here is a screenshot of what I'm expecting: [http://cl.ly/image/472a2H333z13](http://cl.ly/image/472a2H333z13)

My stream permissions include the following:

```
read_stream,offline_access,manage_pages,publish_stream,create_event,rsvp_event,sms,user_photos,friends_about_me,friends_status,friends_activities,friends_likes,friends_interests,read_insights,friends_photos 
```

The following code works but not as expected - here is a screenshot of how an image posted in using put_object appears on the timeline: [http://cl.ly/image/1x3X1K0k2l2D](http://cl.ly/image/1x3X1K0k2l2D)

```
put_object('me', 'feed', :message => 'this is the message', :name => 'this is the caption', :picture => 'http://www.socialvolt.com/img/producttour/listen.png', :source => 'http://www.socialvolt.com/img/producttour/ssPublish.jpg') 
```

This code doesn't work at all:

```
put_picture('me', 'feed', :message => 'this is the message', :name => 'this is the caption', :picture => 'http://www.socialvolt.com/img/producttour/listen.png', :source => 'http://www.socialvolt.com/img/producttour/ssPublish.jpg') 
```

I also can't find any difference between :picture and :source.

Can anyone help me figure out what I'm doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T14:47:37.140

这是代码。

```
 graph = Koala::Facebook::API.new(cookies[:acess_token])
 begin                  
   graph.put_picture(
                     "https://dl.dropboxusercontent.com/u/71317935/banners/coy_copper.jpg",
                     "image/png",
                     {:message => "introduces Some information"}
                   )
 rescue Exception => e
   render :text => e.message and return
 end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T21:29:39.947

在我的脑海中，你可能需要一张更大的照片。更具体地说，我认为宽度**至少需要 480px**。

您代码中的图像似乎小于 480 像素：http: [//www.socialvolt.com/img/producttour/listen.png](http://www.socialvolt.com/img/producttour/listen.png) [http://www.socialvolt.com/img/producttour/ssPublish.jpg](http://www.socialvolt.com/img/producttour/ssPublish.jpg)

这来自[用户生成照片](https://developers.facebook.com/docs/opengraph/usergeneratedphotos/)的经验。您并没有真正使用 Open Graph Actions，所以我不知道 Facebook 是否将相同的规则应用于通用照片上传。

# python - Python按列表分组

> ID：16135174
> 
> 赞同：0
> 
> 时间：2013-04-21T19:17:35.617
> 
> 标签：python, list, python-2.7

我在python中有一个这样的列表：

```
list1 = [('a', 6.5),('a', 6.5),('a', -6.5),('b', 0.0),('b', 0.0),('b',6.5),('b', -6.5)('b',6.5)] 
```

我需要一个列表，其中包含：

```
[(a,avg(6.5,6.5,-6.5),no.of_occurences_of_a),(b,avg(0.0,6.5,-6.5,6.5),no.of_occurences_of_b)] 
```

IE

```
[(a,6.5/3,3)(b,6.5/4,4)] 
```

这该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T19:22:42.973

您可以使用[`itertools.groupby`](http://docs.python.org/3.3/library/itertools.html#itertools.groupby)：

```
In [19]: list1 = [('a', 6.5),('a', 6.5),('a', -6.5),('b', 0.0),('b', 0.0),('b',6.5),('b', -6.5),('b',6.5)]

In [20]: from itertools import groupby

In [21]: from operator import itemgetter

In [22]: lis=[]

In [23]: for k,v in groupby(list1,key=itemgetter(0)):
    items=[x[1] for x in v]
    lis.append((k, sum(items)/len(items), len(items)))
   ....:     

In [24]: lis
Out[24]: [('a', 2.1666666666666665, 3), ('b', 1.3, 5)] 
```

请注意，如果`list`未排序，您必须先对其进行排序以获得所需的结果`itertools.groupby`。

使用`collections.defaultdict`，这也适用于未排序的项目：

```
In [25]: from collections import defaultdict

In [26]: dic=defaultdict(list)

In [27]: for k,v in list1:
   ....:     dic[k].append(v)
   ....:     

In [28]: dic
Out[28]: defaultdict(<type 'list'>, {'a': [6.5, 6.5, -6.5], 'b': [0.0, 0.0, 6.5, -6.5, 6.5]})

In [29]: [(k,sum(v)/len(v),len(v)) for k,v in dic.items()]
Out[29]: [('a', 2.1666666666666665, 3), ('b', 1.3, 5)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:26:15.233

使用[`itertools.groupby`](http://docs.python.org/3.3/library/itertools.html#itertools.groupby). 通常它会是一个单行，但在你的情况下它有点棘手，因为你需要消耗一个组两次以获得平均值和长度：

```
list1 = [('a', 6.5), ('a', 6.5), ('a', -6.5), ('b', 0.0),
         ('b', 0.0), ('b', 6.5), ('b', -6.5), ('b',6.5)]

import itertools
import operator

fst = operator.itemgetter(0)
snd = operator.itemgetter(1)
result = []
for grouper, group in itertools.groupby(sorted(list1, key=fst), key=fst):
    items = map(snd, group)
    result.append((grouper, sum(items)/len(items), len(items))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T19:32:34.607

丑陋的解决方案（未按照您的要求正确格式化）：

```
list1 = [('a', 6.5),('a', 6.5),('a', -6.5),('b', 0.0),('b', 0.0),('b',6.5),('b', -6.5),('b',6.5)]

a_list = []
b_list = []
a = 0
b = 0
for item in list1:
    if 'a' in item:
        a_list.append(item[1])
        a += 1
    if 'b' in item:
        b_list.append(item[1])
        b +=1

#a is now the count of a's
#b is now the count of b's
a_avarage = reduce(lambda x, y: x + y, a_list)
b_avarage = reduce(lambda x, y: x + y, b_list) 
```

# ruby-on-rails - 与按钮关联的 Rails 对象

> ID：16135175
> 
> 赞同：1
> 
> 时间：2013-04-21T19:17:39.263
> 
> 标签：ruby-on-rails, hyperlink

```
<% @book.each do |book| %>
 <%= book.title%>
 <%=image_tag book.image_link%>
 <%= book.authors%>
 <%= book.description%>
 <%= link_to 'Book IT' %>
 <%= link_to 'Read IT' %>
 <%= link_to 'Own IT' %>
<% end %> 
```

因此，这是我的代码的副本，它打印所搜索书籍的标题、图像和作者。我正在尝试关联“Book IT”链接以将该特定对象添加到我的“Book it”图书馆/表中，以便当我单击“Book It”图书馆链接时，它将显示该书。

其他几个问题。我应该用按钮替换链接吗？如果是这样，按钮是否会通过循环与对象关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:05:00.130

### 你可以用ajax请求来做

```
<%= link_to 'Book IT',add_to_my_books_book_path,remote: true %> 
```

路线

```
resoures :books do 
    member do
    get :add_to_my_books
    end
end 
```

控制器

```
def add_to_my_books
    @book = Book.find params[:id]
    @my_books = current_user.books
    @my_books << @book
    respond_to do 
        format.js {render alert("book added to your books")}
    end        
end 
```

我假设您在用户和书籍之间有 one_to_many 关系

# c# - Any frameworks for visualizing a calculation?

> ID：16135180
> 
> 赞同：1
> 
> 时间：2013-04-21T19:18:08.127
> 
> 标签：c#, wpf

I'm developing an application in C#/WPF, that performs a lot of calculations for end-user that use the results of these on invoices, etc.

A lot of the inputs for these calculations are a bit obscure for the end-user and also the calculation itself can vary depending on the input.
Still, the end-user should somehow be able to see what those inputs were and also how the calculation is performed.

Are there any frameworks that can help me visualize these inputs and the steps the calculation has taken to get to the end result?

# java - 如何在Android上打开手电筒一段时间

> ID：16135182
> 
> 赞同：0
> 
> 时间：2013-04-21T19:18:25.950
> 
> 标签：java, android

我正在尝试打开闪光灯 LED 一段时间，但我的代码没有按预期工作：

```
if(context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH))
         {
             Log.i("Flash Present", "Yes");
             //Camera Has Flash
             final Camera cam = Camera.open();     
             Parameters p = cam.getParameters();
             p.setFlashMode(Parameters.FLASH_MODE_TORCH);
             cam.setParameters(p);
             ExecutorService service = Executors.newSingleThreadExecutor();

             try {
                 Runnable r = new Runnable() {
                     @Override
                     public void run() {
                         Log.i("Starting Flash", "Now");
                         cam.startPreview();
                     }
                 };

                 Future<?> f = service.submit(r);

                 f.get(10, TimeUnit.SECONDS);     // attempt the task for two minutes
             }
             catch (final InterruptedException e) {
                 // The thread was interrupted during sleep, wait or join

             }
             catch (final TimeoutException e) {
                 // Took too long!
              cam.stopPreview();
              cam.release(); 
             }
             catch (final ExecutionException e) {
                 // An exception from within the Runnable task
             }
             finally {
                  cam.stopPreview();
                  cam.release(); 
                 service.shutdown();
             }

         } 
```

LED 不会在 10 秒后关闭，并且当再次调用此函数时会引发异常*，指出我的相机资源仍在使用中并且不是空闲*的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:15:15.107

好的，我自己想出了解决方案。这是我对我的代码所做的。

```
public void NotifyWithFlash(Context context){

    boolean ShouldIGlow = true;

    while(ShouldIGlow){
        flashON();
        try {
            Thread.sleep(10000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }finally{
            ShouldIGlow = false;
            flashOFF();
        }

    }
}

public void flashON(){
    cam = Camera.open();     
    Parameters p = cam.getParameters();
    p.setFlashMode(Parameters.FLASH_MODE_TORCH);
    cam.setParameters(p);
    cam.startPreview();

}

public void flashOFF(){
    cam.stopPreview();
    cam.release(); 
} 
```

# windows - Windows open files dialog with all files + subdirectories

> ID：16135188
> 
> 赞同：0
> 
> 时间：2013-04-21T19:19:00.613
> 
> 标签：windows, winapi

I have a program called BulkFileChanger, and when I add files - it opens Windows dialog where I can select files. Now that is common windows dialog and I can select all files ( ctr+a) and it selects all files + all subdirecotires, but when you click OPEN it just imports files, not the files contained in subdirecotires, so is there a way to actually open all files + all files in all subdirectories in normal windows open files dialog ? I am also using some other programs that can open "bulk" files, but strange thing is that none of them (who uses normal windows open files dialog) can actaully open subfolders.... is there some kind of shortcut in Windows that will allow this feature ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:28:12.583

文件对话框不会为您执行此操作。没有设置可以使其递归到子文件夹并返回其中包含的所有文件。如果你想要那个功能，你必须自己实现它。

# c# - 如何在其他类中使用此方法？

> ID：16135191
> 
> 赞同：-9
> 
> 时间：2013-04-21T19:19:08.483
> 
> 标签：c#

我有这个类，它包含一个查看对象的方法：

```
internal class Game
{
    private IEnumerable<Tuple<int, int>> PositionsInReach(int row, int column, int distance)
    {
        var visited = new bool[park.GetLength(0),park.GetLength(1)];
        visited[row, column] = true;

        var queue = new Queue<Tuple<int, int>>();
        queue.Enqueue(new Tuple<int, int>(row,column));

        while (queue.Count!=0)
        {
            var aux = queue.Dequeue();
            yield return aux;
            foreach (var adjacentPosition in AdjacentPositions(aux.Item1,aux.Item2))
            {
                if (!visited[adjacentPosition.Item1, adjacentPosition.Item2]
                    && Distance(row,column,aux.Item1,aux.Item2) <= distance)
                {
                    queue.Enqueue(adjacentPosition);
                    visited[adjacentPosition.Item1, adjacentPosition.Item2] = true;
                }
            }
        }

    }

    private IEnumerable<Tuple<int, int>> AdjacentPositions(int row, int col)
    {
        if(row+1 < park.GetLength(0)) yield return new Tuple<int,int>(row + 1, col); 
        if(row-1 >=0 ) yield return new Tuple<int,int>(row - 1, col); 
        if(col+1 < park.GetLength(1)) yield return new Tuple<int,int>(row , col + 1);
        if(col - 1 >= 0) yield return new Tuple<int, int>(row , col - 1);
    }

    private static int Distance(int x1, int y1, int x2, int y2) 
    {
        return Math.Abs(x2 - x1) + Math.Abs(y2 - y1);
    }

    private IEnumerable<Tuple<int, int>> PositionsInReach2(int row, int column, int distance) //actionrange
    {
        var visited = new bool[park.GetLength(0), park.GetLength(1)];
        visited[row, column] = true;

        var queue = new Queue<Tuple<int, int>>();
        queue.Enqueue(new Tuple<int, int>(row, column));

        while (queue.Count != 0)
        {
            var aux = queue.Dequeue();
            yield return aux;
            foreach (var adjacentPosition in AdjacentPositions(aux.Item1, aux.Item2))
            {
                if (!visited[adjacentPosition.Item1, adjacentPosition.Item2]
                    && Distance(row, column, aux.Item1, aux.Item2) <= distance && park[adjacentPosition.Item1,adjacentPosition.Item2]==null)
                {
                    queue.Enqueue(adjacentPosition);
                    visited[adjacentPosition.Item1, adjacentPosition.Item2] = true;
                }
            }
        }

    }
} 
```

所以我需要在其他名为 Behaviour 的类中使用这些方法：

```
 public class EatingBehaviour
    {
        public static bool ToEat1(Dinosaur dino, int x, int y, LivingThing[,] park)
        {
            if (dino.Weight < dino.MiddleWeight  /*&& Dinosaur in action range, I need use the methods of the class Game here*/)
            {
                return true;
            }

            return false;
        }

    } 
```

我怎样才能做到这一点？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:25:25.960

方法`PositionsInReach`和`AdjacentPositions`是私有的...如果您必须在 之外使用它们`Game`，它们需要是公共的...

此外，如果你想`Game`在另一个程序集中使用，而不是在内部，你的类应该是公共的。

看看 C# 可见性的一些定义：http: [//csharp.net-tutorials.com/classes/visibility/](http://csharp.net-tutorials.com/classes/visibility/)

> public - 可以从任何地方联系到该成员。这是限制最少的可见性。默认情况下，枚举和接口是公开可见的。
> 
> protected - 只能从同一个类中访问成员，或者从继承自该类的类中访问成员。
> 
> 内部 - 只能从同一项目内联系成员。
> 
> protected internal - 与 internal 相同，除了从此类继承的类也可以访问它的成员，甚至来自另一个项目。
> 
> private - 只能由同一类的成员访问。这是最严格的可见性。类和结构默认设置为私有可见性。

# c++ - 我刚刚使用 IwNUI 启动了最基本的 Marmalade c++ 应用程序，它给出了错误。这条消息是什么意思？

> ID：16135194
> 
> 赞同：0
> 
> 时间：2013-04-21T19:19:21.950
> 
> 标签：c++, marmalade

此错误消息来自使用 marmalade + c++ 设置本机 ui 移动应用程序的教程。

错误信息：

```
Message: Failed to open file iwui_style/iwui_style.group 
```

这是主文件：

```
#include "IwNUI.h"

using namespace IwNUI;

int main()
{
    CAppPtr app = CreateApp();
    CWindowPtr window = CreateWindow();

    app->AddWindow(window);

    CViewPtr view = CreateView("canvas");

    CButtonPtr button1 = CreateButton(CAttributes()
        .Set("name",    "Button1")
        .Set("caption", "Hello World!")
        .Set("x1",      "10")
        .Set("y1",      "10"));

    view->AddChild(button1);

    window->SetChild(view);

    app->ShowWindow(window);

    app->Run();

    return 0;
} 
```

和 mkb 文件：

```
files
{
    (source)
    app.cpp
}

subprojects
{
    s3e
    IwNUI
}

defines
{
    IW_USE_LEGACY_MODULES
} 
```

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:02:52.273

IwNUI 模块使用 IwUI 模块作为备份。作为 hack，您可以将 IwNUI 基本示例项目的数据文件夹复制到您的项目中。数据文件夹将包含您已包含在项目中的资源组文件。

# javascript - Javascript OOP 原型继承

> ID：16135195
> 
> 赞同：1
> 
> 时间：2013-04-21T19:19:30.050
> 
> 标签：javascript, prototypal-inheritance

我正在尝试练习 JS OOP，尤其是原型继承，但我无法弄清楚为什么这个[JS Fiddle](http://jsfiddle.net/Mufasaa/zFaU5/1/)返回未定义。下面的代码：

```
function Shape(name, edges) {
    this.Name = name;
    this.Edges = edges;
}

Shape.prototype.toString = function(){ return "Shape: " + this.Name;};

function Circle(radius) {
    this.Radius = radius;
}

Circle.prototype.Area = function(){
    return Math.PI * Math.pow(this.Radius, 2);
};

Circle.prototype = new Shape("Circle", 1);
Circle.prototype.constructor = Circle;

var circle = new Circle(5);

console.log(circle);
console.log(circle.toString());
console.log(circle.Area); 
```

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:48:54.703

执行您的代码，我得到以下输出：

```
Circle { Radius=5, Name="Circle", Edges=1 }
Shape: Circle
function() 
```

所以，这里没有`undefined`。但是，我可以想象您希望看到计算出的区域打印在控制台上，而不是`function()`.

这可以通过实际调用`Area`函数来完成，如下所示：

```
console.log(circle.Area()); 
```

进行此修改后（请参阅[JSFiddle](http://jsfiddle.net/ezr9F/1/ "JSFiddle：固定实现")），您会得到正确的结果：

```
78.53981633974483 
```

说明：在您的实现中，您只是访问 print 的函数对象，`function()`而不是调用真正计算所需值的函数。

**编辑**

从您的评论来看，我相信您的问题与[此](https://stackoverflow.com/questions/7486825/javascript-inheritance)问题重复。根据[此答案](https://stackoverflow.com/a/12816953/1388240)中给出的详细信息，我能够得到以下工作：

```
function Circle(radius) {
    this.Name = "Circle";
    this.Edges = 1;
    this.Radius = radius;
}

Circle.prototype = Object.create(Shape.prototype);
Circle.prototype.constructor = Circle;

Circle.prototype.Area = function () {
    return Math.PI * Math.pow(this.Radius, 2);
}; 
```

但是，我的 JS 技能有限，所以这可能有一两个缺陷。对于更高级的继承，您可以查看我上面引用的问题中接受的答案，以获取有关值得使用的框架的提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:23:16.027

如果您正在调用*Area*函数来获取圆的面积，那么您需要像这样调用它

```
console.log(circle.Area()) 
```

[JS小提琴](http://jsfiddle.net/zFaU5/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T19:26:26.723

你的日志都没有显示`undefined`。

如果您在开发人员的控制台中进行测试，您会在输入的末尾找到最终返回值。此值通常`undefined`为 ，与您的代码无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T04:59:50.790

我想到了。

但实际上要感谢这个线程上的每个人。我花了一段时间才明白，这实际上是一个菜鸟错误。

在继承基本 Shape 原型*之前*，我将原型函数 Area 分配给对象圆。

有问题的部分现在是这样的：

```
function Circle(radius) {
    this.Radius = radius;
}

Circle.prototype = new Shape("Circle", 1);
Circle.prototype.constructor = Circle;

Circle.prototype.Area = function () {
    return Math.PI * Math.pow(this.Radius, 2);
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-25T23:47:36.510

```
//creating the main Object variables with static Propertys
var MySystem={
    Utility:{},
    AppDbSystem:{
        connecterObj:"",
        objCollection:new Array(),
        sendObjCollection:null,
        phpGridCollection:null
    },
    OutManager:{},
    DbIndex:{},
    GoDb:{},
    Ioform:{},
    ListView:{},
    WindowSystem:{},
    AngularSystem:{
        objCollection:null
    }
}

//the parent class (top of the chain)
MySystem.GoDb.GoDb=function(){
    var that=this;
    this.namespace;
    this.speicher;

    this.initGoDb=function(table,group,indexArr,readOnly){
        that.speicher=table;
    }

    this.showS=function(){
        alert(that.speicher);
    }

    this.setNamespace=function(ns){
        that.namespace=ns;
    }
    this.getNamespace=function(){
        return that.namespace;
    }
}

//ListView second Class of the Chain
MySystem.ListView.ListView=function(){
    var that=this;
    MySystem.GoDb.GoDb.apply(this); //IMPORTANT to make it as an Instance

    this.initListView=function(submitIndex,idArr,methodActionArr){
        that.initGoDb(submitIndex);
    }
}
MySystem.ListView.ListView.prototype=new MySystem.GoDb.GoDb();

//The Child Class
MySystem.ListView.ListStandard=function(){
    var that=this;
    MySystem.ListView.ListView.apply(this);

    this.init=function(elementYArr,attrs,methodActionArr,idArr,tableId,styleArr,styleArrTr,styleArrTd,withNumbers,submitIndex){
        that.initListView(elementYArr);
    }
}
MySystem.ListView.ListStandard.prototype=new MySystem.ListView.ListView();

//now use it
var test=new MySystem.ListView.ListStandard();
var test2=new MySystem.ListView.ListStandard();
test.init("eazy");
test.showS();
test2.init("second obj");
test2.showS();
test.showS(); 
```

看看[http://www.zipcon.net/~swhite/docs/computers/languages/object_orientation_JS/inheritance.html](http://www.zipcon.net/~swhite/docs/computers/languages/object_oriented_JS/inheritance.html)

并且不要忘记进行应用调用。

```
MySystem.ListView.ListView.apply(this); 
```

否则 Object 属性是静态的，不可继承。

# jquery - 如何将 href 标题替换为 div

> ID：16135197
> 
> 赞同：0
> 
> 时间：2013-04-21T19:19:36.057
> 
> 标签：jquery, title

是否可以将 href="#" **title="ooo"**标签更改为 div？我尝试了这些代码但不起作用，

这是我的 HTML 代码

```
<ul class="test">
    <li><a href="#" class="ut" title="ok">Test1</a></li>
    <li><a href="#" class="ut" title="ok">Test2</a></li>
    <li><a href="#" class="ut" title="ok">Test3</a></li>
    <li><a href="#" class="ut" title="ok">Test4</a></li>
</ul> 
```

JS：

```
$('.test').each(function(){
  var title = $(this).find(".ut a").attr("title");
  $(this).find("a div").text(title);
}); 
```

它应该是这样的：

测试1

好的

测试2

好的

测试3

好的

测试4

好的

但不工作...

[http://jsfiddle.net/MotoTony/UePwj/](http://jsfiddle.net/MotoTony/UePwj/)

一如既往，感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:22:37.073

```
$('.test').each(function(){
    var title = $(this).find("a.ut").attr("title");
    $(this).find("a div").text(title);
}); 
```

我不确定“a div”应该代表什么，但我更改了您的 find() 函数以正确选择“ut”类的锚点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:25:22.310

这给出了您预期的输出 -

[http://jsfiddle.net/UePwj/7/](http://jsfiddle.net/UePwj/7/)

```
$('.test a').each(function(){
    var title = $(this).attr("title");
    $(this).parent('li').append("<div>"+title+"</div>");
}); 
```

# java - java spring email - “发件人”字段问题

> ID：16135198
> 
> 赞同：0
> 
> 时间：2013-04-21T19:19:48.943
> 
> 标签：java, spring, email

场景：用户使用她的电子邮件地址提交联系表。我收到的电子邮件应该是“来自”联系表格中填写的电子邮件。我得到的是我在 spring 上下文中配置的 gmail (foo@gmail.com) 帐户，尽管**setFrom**在代码中正确设置如下：

```
public void sendContactNotification(final ContactForm contactForm) {
      MimeMessagePreparator preparator = new MimeMessagePreparator() {
        @SuppressWarnings({ "rawtypes", "unchecked" })
        public void prepare(MimeMessage mimeMessage) throws Exception {
             MimeMessageHelper message = new MimeMessageHelper(mimeMessage);
             message.setTo(contact@foo.com);
             message.setFrom(contactForm.getEmail());
             message.setSubject("New contact message " + contactForm.getTopic());
             message.setReplyTo(contactForm.getEmail());
             message.setSentDate(new Date());
             Map model = new HashMap();              
             model.put("newMessage", contactForm);

             String text = VelocityEngineUtils.mergeTemplateIntoString(
                velocityEngine, "velocity/new_contact_message.vm", "UTF-8", model);
             message.setText(text, true);
          }
       };
       this.mailSender.send(preparator);      
} 
```

在 Spring 上下文中，发送方配置如下：

```
<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
<property name="host" value="smtp.gmail.com" />
<property name="port" value="587" />
<property name="username" value="foo@gmail.com" />
<property name="password" value="password" />

<property name="javaMailProperties">
   <props>
          <prop key="mail.smtp.auth">true</prop>
          <prop key="mail.smtp.starttls.enable">true</prop>
       </props>
</property> 
```

谢谢，阿德里安

# java - AtomicReference 和有什么区别 与 AtomicInteger 对比？

> ID：16135199
> 
> 赞同：9
> 
> 时间：2013-04-21T19:20:03.157
> 
> 标签：java, concurrency, java.util.concurrent, atomicreference

我不明白这两者之间的区别：

```
AtomicReference<Integer> atomicReference = new AtomicReference<>(1); 
```

对比

```
AtomicInteger atomicInteger = new AtomicInteger(1); 
```

有人可以说什么时候使用 AtomicReference 吗？希望可以有人帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-21T19:28:57.063

一个非常重要的区别是方法`compareAndSet`和`weakCompareAndSet`具有不同的`AtomicReference<Integer>`语义`AtomicInteger`。这是因为 with `AtomicReference<Integer>`，那些`==`用于比较的方法，两个`Integer`对象可以相等而不为`==`。与`AtomicInteger`，比较是整数值相等，而不是引用标识。

正如其他人指出的那样，`AtomicInteger`具有`AtomicReference<Integer>`. 此外，`AtomicInteger`extends `Number`，因此它继承了所有`Number`方法（`doubleValue()`等），并且可以在需要 a 时使用`Number`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-21T19:21:31.943

如果您使用 just`set(...)`并没有太大区别，`get()`但是`AtomicInteger`还有一些其他方法，例如`incrementAndGet()`仅适用于整数的方法。

`AtomicReference`包装一个`volatile Object`while`AtomicInteger`包装一个，`volatile int`因此它可以执行整数特定的方法，包括增量、减量和添加方法。 `AtomicInteger`也扩展`Number`，这意味着它支持`doubleValue()`,`longValue()`等方法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-21T19:21:30.083

`AtomicReference`是一个可以引用任意类型的泛型类。
如果您想以原子方式使用您自己的类的实例，则需要`AtomicReference<V>`.

`AtomicInteger`是一个包含整数的特殊版本。它更高效（没有不必要的装箱），并且具有有用的方法，例如`incrementAndGet()`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-21T20:24:46.100

正如其他人指出的那样，`AtomicReference<Integer>`使用 == 来比较对象。因此，仅当等于使用 == 存储在您的原子引用中的对象时`compareAndSet(expect, update)`才会更新您的初始引用。`expect`

如果您将`AtomicReference`其用于数字类型，即`Integer`或`Long`. 请注意，这些类的静态构造函数（例如`Integer.valueOf(int value)`）返回内部缓存的小值对象。换句话说，两个不同的调用`Integer.valueOf(5)`返回相同的`Integer`. 这是安全的，因为类是不可变的。结果，如果你使用`AtomicReference<Integer>`while 你真的应该使用`AtomicInteger`，它可能适用于这些小数字，因为 == 实际上可能会比较相同的对象。只有当您在某个时候开始处理更高的值时，它才会变得更糟。

总而言之，使用`AtomicInteger`数字运算更安全:)

# php - 用javascript处理php发送的JSON数据

> ID：16135200
> 
> 赞同：0
> 
> 时间：2013-04-21T19:20:23.527
> 
> 标签：php, javascript, sql, json

我在通过 JSON 进行 PHP 和 JavaScript 之间的交互时遇到了问题。

PHP 脚本从我的数据库中读取数据。SQL 结果由 1 行组成。

姓名 | 纬度 | 液化天然气

* * *

基连 | 45.1252335 | 32.2142380

它被编码成 JSON：

```
$query = "SELECT name, lat, lng FROM location l, user u WHERE u.email = l.email";
$result = mysqli_query ($dbc, $query) or die ('Error querying database.');
$to_encode = array();
while($row = mysql_fetch_assoc($result)) {
    $to_encode[] = $row;
}
echo json_encode($to_encode); 
```

JavaScript 程序从 php 脚本 (get_locations.php) 加载 JSON 文件：

```
$.getJSON('get_locations.php', function (data) {
        $.each(data, function(i, name) {
            alert(name.parent_level);
        });
    }); 
```

但是浏览器中没有警报。如果我在 Chrome 中检查发送的 JSON，它只会显示 []。我怎样才能得到发送的名称，经纬度和经度？

编辑：get_locations.php 的真实世界输出是 []。将 JSON 转换为字符串总是会导致 []。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:26:48.620

您正在混合功能：

```
$query = "SELECT name, lat, lng FROM location l, user u WHERE u.email = l.email";
$result = mysqli_query ($dbc, $query) or die ('Error querying database.');
$to_encode = array();
while($row = mysql_fetch_assoc($result)) {
    $to_encode[] = $row;
}
echo json_encode($to_encode); 
```

您创建了一个`mysqli`查询，因此您应该得到结果[`mysqli_fetch_assoc`](http://us1.php.net/manual/en/mysqli-result.fetch-assoc.php)而不是`mysql_`版本。

# opengl - OpenGL glsl：无法将数据从程序传递到着色器

> ID：16135203
> 
> 赞同：0
> 
> 时间：2013-04-21T19:20:49.667
> 
> 标签：opengl, glsl, shader

我正在编写一个程序，它将数据从 C++ 程序中的函数发送到顶点着色器。程序 ID 被传递到函数中，如下所示：

```
void setUpOrtho(GLuint program) {
    glUseProgram( program );
    GLint myUniformLocation = glGetUniformLocation( program, "sx" );
    glUniform1f( myUniformLocation, 2.0 );
} 
```

传递给着色器的数据应该是一个参数 glsl 代码如下：

```
attribute vec4 vPosition;
uniform float sx;

void main() {
    mat4 M = mat4( sx, 0, 0, 0, 0, 1.0, 0, 0, 0, 0, 1.0, 0, 0, 0, 0, 1.0 );
    gl_Position = M*vPosition; 
```

}

并且没有任何东西被渲染。但是如果我用 2.0 替换 sx，它显示得很好。为什么 2.0 没有从 cpp 成功传递到 glsl？

# java - 使用 Collections.sort(arrayListName) 按 id 对充满对象的 ArrayList 进行排序

> ID：16135207
> 
> 赞同：4
> 
> 时间：2013-04-21T19:21:19.803
> 
> 标签：java, sorting, arraylist, comparator, comparable

我有一个库存类，它创建一个充满对象 Item 的 ArrayList，它也是一个类。我知道我必须调用 `Collections.sort(items);`才能对 ArrayList 进行排序（顺便说一下，它被称为 items）。作业说我必须在 Item 类上使用一个接口，我不知道是否要实现 Comparator 或 Comparable ，然后分别为`compareTo()`方法或`compare()`方法写什么。在我声明我的 ArrayList 后，我​​也有`Collections.sort(items)`电话，可以吗？

编辑：我的老师刚刚澄清说她希望我们`Comparable<Item>`在 Item 类上实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-02-05T03:33:45.550

从 Java 8 开始：

```
List<Item> items = new ArrayList<>();
// add elements
Collections.sort(items, Comparator.comparingLong(Item::getId)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:26:00.093

你必须实施`Comparable`，它会奏效`Collections.sort`

如果您需要一个新的比较器并且不想使用它，`Comparable`您可以创建一个新的比较器并`Comparator`像这样使用它：`Collections.sort(list, new MyComparator())`

```
public class Fruit implements Comparable<Fruit>{

    private String fruitName;
    private String fruitDesc;
    private int quantity;

    public Fruit(String fruitName, String fruitDesc, int quantity) {
        super();
        this.fruitName = fruitName;
        this.fruitDesc = fruitDesc;
        this.quantity = quantity;
    }

    public String getFruitName() {
        return fruitName;
    }
    public void setFruitName(String fruitName) {
        this.fruitName = fruitName;
    }
    public String getFruitDesc() {
        return fruitDesc;
    }
    public void setFruitDesc(String fruitDesc) {
        this.fruitDesc = fruitDesc;
    }
    public int getQuantity() {
        return quantity;
    }
    public void setQuantity(int quantity) {
        this.quantity = quantity;
    }

    public int compareTo(Fruit compareFruit) {

        int compareQuantity = ((Fruit) compareFruit).getQuantity(); 

        //ascending order
        return this.quantity - compareQuantity;

        //descending order
        //return compareQuantity - this.quantity;

    }   
} 
```

来源：[mkyong](http://www.mkyong.com/java/java-object-sorting-example-comparable-and-comparator/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T19:26:45.377

有两个版本`Collections.sort()`。

[Collections.sort(List)](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)和[Collections.sort(List,Comparator)](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,java.util.Comparator%29)。一个接受 a `List`，另一个接受 a`List`和 的一个实例`Comparator`。单个参数`sort()`将期望您的类已实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)并覆盖[compareTo()](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html#compareTo%28T%29)方法。两个参数`sort()`方法需要一个[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)实例，其中您已经实现`Comparator`并覆盖了它的[compare()](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html#compare%28T,T%29)方法。

如果这是对类进行排序的清晰自然方式，则对象应该实现`Comparable`，并且任何需要对类进行排序的人通常都希望这样做。

但是，如果排序是该类的一个不寻常的用例，或者可能有多个排序顺序，那么 a`Comparator`是更好的选择。

*另外，我在声明我的 ArrayList 后立即调用了 Collections.sort(items)，这样可以吗？*

当您`sort()`需要对`List`. 之后添加项目`sort()`不会自动排序`List`以适应由于添加新元素而导致的列表项目排序的变化。

示例实现：

```
public int compareTo (Item other) { 
   return new Integer(this.getID()).compareTo(new Integer(other.getID()));
} 
```

# python - 查找一个数字是否是给定集合中两个或多个数字的可能总和 - python

> ID：16135208
> 
> 赞同：1
> 
> 时间：2013-04-21T19:21:20.563
> 
> 标签：python

办公用品商店以 5 支、8 支或 24 支的包装出售您最喜欢的钢笔类型。因此，例如，可以正好买 13 支钢笔（一包 5 支，第二包 8 支），但不可能正好买 11 支钢笔，因为没有 5 和 8 的非负整数组合和 24 加起来是 11。要确定是否有可能恰好购买 n 支笔，必须找到 a、b 和 c 的非负整数值，使得

5a + 8b + 24c = n

编写一个名为 numPens 的函数，该函数接受一个参数 n，如果可以购买 5、8 和 24 个包装单位的组合以使笔的总数恰好等于 n，则返回 True，否则返回 False。

注意：这是上个月的中期考试中出现的问题。我无法解决它，但仍在寻找解决方案。任何帮助都将被接受。python中的代码或解决它的算法。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:31:50.377

[*这听起来像是动态规划*](http://en.wikipedia.org/wiki/Dynamic_programming)的一个很好的候选者。

```
def numPens(n):
  pen_sizes = [5, 8, 24]
  results = [True]
  for i in range(1, n+1):
    results.append(any(i >= size and results[i - size] for size in pen_sizes))
  return results[n] 
```

这里的主要见解是：

1.  可以实现 0 支笔（简单来说：每种尺寸 0 包）。
2.  如果我们已经知道少于 n 笔的答案，我们就可以算出是否可以得到 n 笔。

例如，假设我们想知道我们是否可以得到 10 支钢笔，假设我们已经知道 0 到 9 的答案。好吧，我们至少需要一包才能做到这一点。那么有3种情况需要考虑：

1.  一包 5 支以上，但如果可能的话，我们会得到 5 支钢笔。
2.  一包 8 支以上，但我们会得到 2 支钢笔，如果有可能得到 2 支钢笔。
3.  一包 24 支以上，但如果可能的话，我们会得到 -14 支笔，如果有可能的话。

最后一个是无意义的，所以当（且仅当）有可能得到 5 支或 2 支时，就有可能得到 10 支钢笔。因为我们假设我们已经知道 0 到 9 的答案，所以我们可以解决这个问题（事实证明，5 支笔是可能的，作为一包 5 支，所以我们得出结论，10 支也是如此）。

因此，为了让自己处于总是有较小 n 值的答案的情况，我们从 0 的明显答案开始。然后我们计算 1 的答案（因为我们已经有了 0 的答案，我们可以做这个）。然后我们计算 2 的答案（因为我们已经有 0 和 1，我们可以这样做），依此类推，直到我们得到我们想要的 n 的答案。

这段代码封装了先前结果的实际计算结果：`True`如果有任何包装尺寸`size`，购买该尺寸的包装是有意义的（没有得到负数`i - size`），它就会产生，我们之前发现一种买`i - size`笔的方法。

```
any(i >= size and results[i - size] for size in pen_sizes) 
```

其余代码只是让我们将该结果存储在`results`列表中以供将来使用，并最终返回最终结果。

# ios - CIImage 过滤器正在垂直拉伸我的图像

> ID：16135216
> 
> 赞同：0
> 
> 时间：2013-04-21T19:22:00.080
> 
> 标签：ios, cocoa-touch, ios6, uiimageview, core-image

我有一张我在 custom 中使用的图像`UITableViewCell`。该图像是透明背景上的黑色三角形，我使用`CIColorInvert`过滤器使其成为透明背景上的白色三角形。

过滤（倒置）图像被垂直拉伸，我怎样才能阻止这种情况发生？

如果我直接加载`UIImage`而不进行过滤，我得到的是：

![箭头好，但黑色](https://i.stack.imgur.com/qkzwt.png)

如果我应用`CIFilter`我得到的是：

![在此处输入图像描述](https://i.stack.imgur.com/Rv4bb.png)

这是我的代码：

```
// create the white triangle
CIImage *inputImage = [[CIImage alloc] initWithImage:
                       [UIImage imageNamed:@"TriangleRight"]];

CIFilter *invertFilter = [CIFilter filterWithName:@"CIColorInvert"];
[invertFilter setDefaults];
[invertFilter setValue: inputImage forKey: @"inputImage"];

CIImage *outputImage = [invertFilter valueForKey: @"outputImage"];

CIContext *context = [CIContext contextWithOptions:nil];

rightArrow = [UIImage imageWithCGImage:[context createCGImage:outputImage fromRect:outputImage.extent]]; 
```

在这两种情况下，我都将图像设置`UIImageView`如下：

```
cell.arrow.image = rightArrow; 
```

`UIImageView`尺寸为 15x15（在 IB 中）。TriangleRight.png 为 15x15 像素，TriangleRight@2x.png 为 30x30 像素。

`CIFilter`为了防止拉伸图像，我缺少什么？

**更新：** 发布问题 5 分钟后，我发现了问题：我正在使用自动布局并且`UIImageView`没有明确的高度约束（只有宽度）。添加显式高度约束解决了这个问题。但是，这仍然不能解释为什么使用`UIImage`直接工作（即使没有明确的高度限制）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T17:27:56.000

```
UIImageOrientation originalOrientation = self->imageview.image.imageOrientation;
imageview.image = [[UIImage alloc] initWithCGImage:imgRef scale:1.0     orientation:originalOrientation]; 
```

此外，使用原始方向应该已修复它。

# mysql - COUNT 多列

> ID：16135218
> 
> 赞同：0
> 
> 时间：2013-04-21T19:22:06.590
> 
> 标签：mysql, sql

我搜索了该站点并发现了一些类似的问题，但没有具体解决此问题。因此，答案不太适合这个问题。我有一个有 12 列的表。这十二列中的六列（一、二、三、四、五、六）的等级表示为从 1 到 100 的数值。所以我可能有一行（ rowId=7 ）在每一列中都有一个唯一的数值六列。我想要做的是按它们出现的频率列出数值，将所有六列视为一个总数。我不在乎第一列和第四列中评分的频率。我只需要所有列的频率。似乎 UNION 是要走的路，但 UNION 不能使用 ORDER BY 进行排序。我对几种不同的情况感到困惑，以及最终不成功的查询变体。我不会在这里逐条列出这些失败，而是询问是否有人知道这样做的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:38:17.453

你的意思是这样吗？

```
SELECT V, COUNT(*) C
FROM (
    SELECT one V FROM your_table
    UNION ALL
    SELECT two FROM your_table
    UNION ALL
    SELECT three FROM your_table
    UNION ALL
    SELECT four FROM your_table
    UNION ALL
    SELECT five FROM your_table
    UNION ALL
    SELECT six FROM your_table
) Q
GROUP BY V
ORDER BY C DESC; 
```

[[SQL 小提琴]](http://sqlfiddle.com/#!2/0b262/3)

这将为您提供每个不同的值，以及它出现的次数（与列无关）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:27:31.360

这是一种相当有效的方法：

```
select (case when n.n = 1 then t.one
             when n.n = 2 then t.two
             when n.n = 3 then t.three
             when n.n = 4 then t.four
             when n.n = 5 then t.five
             when n.n = 6 then t.six
        end) as col, count(*) as cnt
from t cross join
     (select 1 as n union all select 2 union all select 3 union all
      select 4 union all select 5 union all select 6
     ) n
group by (case when n.n = 1 then t.one
               when n.n = 2 then t.two
               when n.n = 3 then t.three
               when n.n = 4 then t.four
               when n.n = 5 then t.five
               when n.n = 6 then t.six
          end) 
```

当您使用`union`(或`union all`) 连接不同的列时，每个子查询都使用单独的数据传递。这种替代方法将表格连接到数字表格，只读取一次表格。然后它使用该`case`语句根据数字选择哪一列。

最后一步是简单地进行聚合以获取计数。

# javascript - Javascript函数双击按钮/单击两次

> ID：16135224
> 
> 赞同：1
> 
> 时间：2013-04-21T19:22:35.823
> 
> 标签：javascript, jsf, file-upload

我进行了快速搜索，但找不到解决方案，

我是 js 新手，如果这是一个愚蠢的简单问题，我很抱歉，

但是是否有可能有一些js，当用户单击按钮时，javascript会按下按钮两次

这是我希望 js 工作的按钮：

```
 <p:fileUpload widgetVar="upload" id="upload" fileUploadListener="#{fileUploadController.handleFileUpload}"
                                  mode="advanced" 
                                  multiple="false" 
                                  update="messages Nav upload fileDirectoryViewer"
                                  label="Select File"
                                  sizeLimit="30720000"  
                                  allowTypes="/(\.|\/)(gif|jpe?g|png|doc|txt|pdf|html)$/"
                                  auto="true"
                                  disabled="#{fileUploadController.uploadComplete}"
                                  /> 
```

这是该页面的源代码：

```
 <!--&lt;p:growl id=&quot;messages&quot; showSummary=&quot;true&quot; showDetail=&quot;true&quot; /&gt; --><div id="j_idt8:upload" class="ui-fileupload ui-widget"><div class="fileupload-buttonbar ui-widget-header ui-corner-top"><label class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left fileinput-button"><span class="ui-button-icon-left ui-icon ui-c ui-icon-plusthick"></span><span class="ui-button-text ui-c">Select File</span><input type="file" id="j_idt8:upload_input" name="j_idt8:upload_input" /></label></div><div class="fileupload-content ui-widget-content ui-corner-bottom"><table class="files"></table></div></div><script id="j_idt8:upload_s" type="text/javascript">$(function(){PrimeFaces.cw('FileUpload','upload',{id:'j_idt8:upload',mode:'advanced',autoUpload:true,dnd:true,update:'j_idt8:messages j_idt8:Nav j_idt8:upload j_idt8:fileDirectoryViewer',process:'@none',maxFileSize:30720000,acceptFileTypes:/(\.|\/)(gif|jpe?g|png|doc|txt|pdf|html)$/},'fileupload');});</script> 
```

多谢你们 ：）

# java - 在java中重新抛出不同的捕获异常

> ID：16135227
> 
> 赞同：1
> 
> 时间：2013-04-21T19:22:45.097
> 
> 标签：java, exception, throw, throws, rethrow

我有以下下载功能。我在途中捕获了一些可能的异常，并将它们存储在 Exception 类型变量中，在 finally 块中清理后，我想重新抛出原始异常（如果有一个被捕获）或抛出我自己的自定义 DownloadFailedException . 问题是 Eclipse 给了我“未处理的异常类型异常”错误，因为我的函数没有声明抛出异常。有没有“好”的方法来做到这一点？

```
public static boolean downloadFile(String urlString, String dstPath) throws DownloadFailedException, IOException {
    if (!Settings.isNetworkAvailable()) {
        throw new NoNetworkException("Network error: no internet connection. Failed downloading " + urlString);
    }
    InputStream input = null;
    BufferedOutputStream output = null;
    int fileLength = -1;
    long total = 0;
    int statusCode = -1;
    HttpGet get = new HttpGet(urlString);
    get.setHeader("User-Agent", Settings.getUserAgent());
    get.setHeader("X-My-Id", Settings.getDeviceId());
    HttpClient client = new DefaultHttpClient();
    HttpResponse response = null;
    try {
        response = client.execute(get);
        statusCode = response.getStatusLine().getStatusCode();
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (200 != statusCode) {
            throw new DownloadFailedException("http error: " + statusCode +". Failed downloading " + urlString, statusCode);
        }
    }
    if (null != response) {
        HttpEntity entity = response.getEntity();
        File tmpFile = null;
        Exception exception = null;
        try {
            InputStream is = entity.getContent();
            byte b[] = new byte[1];
            is.read(b, 0, 0);
            fileLength = (int)entity.getContentLength();
            input = new BufferedInputStream(is, 8192);
            tmpFile = new File(dstPath + ".tmp");
            tmpFile.createNewFile();
            output = new BufferedOutputStream(new FileOutputStream(tmpFile), 8192);

            byte data[] = new byte[8192];
            int count;
            while ((count = input.read(data)) != -1) {
                total += count;
                output.write(data, 0, count);
            }
        } catch (IllegalStateException e) {
            exception = e;
            e.printStackTrace();
        } catch (IOException e) {
            exception = e;
            e.printStackTrace();
        } finally {
            try {
                if (null != output) {
                    output.flush();
                    output.close();
                }
                if (null != input)
                    input.close();
            } catch (IOException e) {
                if (null == exception)
                    exception = e;
            }
            if (-1 < fileLength && total != fileLength) {
                if (null != tmpFile) {
                    tmpFile.delete();
                }
                if (null != exception) {
// HERE I WOULD LIKE TO RE-THROW THE ORIGINAl EXCEPTION
                    throw exception; // Unhandled exception type Exception
                    //also tried: exception.getClass().cast(exception);
                } else
                    throw new DownloadFailedException(urlString + ": only " + total + " bytes read out of " + fileLength);
            }
            File dstFile = new File(dstPath);
            tmpFile.renameTo(dstFile);
        }
        return true;
    }
    return false;
} 
```

**解决方案：**

```
if (null != exception) {
    if (exception instanceof IllegalStateException)
        throw (IllegalStateException) exception;
    else if (exception instanceof IOException)
        throw (IOException) exception;
    else
        throw new RuntimeException(message, exception);
}
//throw new IOException("Only " + total + "bytes read from " + fileLength);
throw new DownloadFailedException(message); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:28:07.070

你在哪里：

```
// HERE I WOULD LIKE TO RE-THROW THE ORIGINAl EXCEPTION
throw exception; // Unhandled exception type Exception
// also tried: exception.getClass().cast(exception); 
```

我会用这个：

```
if(exception instanceof IOException)
    throw (IOException) exception;
else
    throw new DownloadException(exception); 
```

根据您描述的情况和`throws`方法末尾的子句，该代码可以执行您想做的事情。在英语中，代码的作用如下：

*   如果你抓住一个`Exception`并且它是一个`IOException`，那么你想抛出一个`IOException`
*   如果你抓住 an`Exception`而不是`IOException`，你想抛出一个`DownloadException`（你自己创造的）。我们将任何 non- 包装`IOException`在 a 中`DownloadException`，以便您的实现与`throws`您方法上的子句一致。
*   如果你没有抓到`Exception`，那么你希望生活像往常一样继续

请注意，在编译之前，您可能需要向`public DownloadException(Throwable e){super(e);}`您的类添加一个构造函数`DownloadException`（如果具有该签名的构造函数尚不存在）。

# regex - 使用正则表达式前瞻功能匹配以星号开头的单词和以下单词

> ID：16135228
> 
> 赞同：1
> 
> 时间：2013-04-21T19:23:04.923
> 
> 标签：regex, match, regexbuddy

我需要一个正则表达式，它将匹配以星号开头的单词和后面的单词。它将匹配`eismoud tempor`并且`dolore magna`在下面的示例中：

`Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do *eiusmod tempor incididunt ut labore et *dolore magna aliqua.`

我正在使用 RegexBuddy。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:28:15.320

请试试这个表达：

```
(?<!\S)\*\w+(?:[^\w]+\w+)?\b 
```

要捕获与正则表达式匹配的所有行，您可以将表达式替换为捕获行的表达式：

```
^.*(?<!\S)\*\w+(?:[^\w]+\w+)?\b.*$ 
```

然后设置选项（窗口底部的选项，不在`Design mode`选项卡中）。瞧！搜索结果现在包含包含我们匹配项的所有行。`Espresso``Multiline``Options`

# excel - 计算列中的非空白文本单元格

> ID：16135231
> 
> 赞同：2
> 
> 时间：2013-04-21T19:23:43.783
> 
> 标签：excel

数据如下：

```
A      B
Joe    1
Mary   2.5
Sam    1.2
       0
Frank  1.3
Bob    2.1
       2.2
Tim    0.6 
```

结果应该是 6，因为列中的六个单元格有一个名称，两个是空的。

忽略 ColumnB 中的任何关联值，如何计算 ColumnA 中没有值（为空）的所有单元格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T18:27:42.463

只是为了一个答案：

```
=COUNTA(A:A) 
```

正如@Siddharth Rout 的评论中提到的那样。

# ruby - 从 ruby 字符串到 bash 的正则表达式

> ID：16135235
> 
> 赞同：0
> 
> 时间：2013-04-21T19:24:02.507
> 
> 标签：ruby, regex, shell

我正在尝试`sed -i '' 's/,\([^ '\''"]\)/, \1/g' app/models/campaign.rb`从我的 ruby​​ 程序中传递命令，但我无法正确获取字符串（尤其是双引号和反斜杠部分）。有谁知道如何做到这一点？

# android - Android 应用显示非硬件设备的设置栏和操作栏溢出

> ID：16135249
> 
> 赞同：0
> 
> 时间：2013-04-21T19:24:56.950
> 
> 标签：android, android-actionbar, actionbarsherlock

这是我第一次在 Android 中使用 Action Bar。我看到一个问题，溢出菜单都显示在 ActionBar 和屏幕底部。

据我了解，底部设置栏应仅在应用程序使用旧设置操作时显示。我以为我已经遵循了设置操作栏所需的一切并正确溢出以使用新的 android API。作为参考，我正在 HTC One 上进行调试。

起初我认为这可能与我使用 ActionBarSherlock 的事实有关，但我删除了对库的引用并使用了标准的 Android 库类——这没有帮助。

我觉得我错过了一些小事。任何帮助，将不胜感激。

[双溢出 http://goo.gl/1AB6S](http://goo.gl/1AB6S)

我的活动有以下代码：

```
public class MainActivity extends SherlockActivity
    {
        static final LatLng POINT = new LatLng(44.52515, -89.571533);

        @Override
        protected void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
                    .getMap();

            map.moveCamera(CameraUpdateFactory.newLatLngZoom(POINT, 15));

            // Zoom in, animating the camera.
            map.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null);
        }

            @Override
        public boolean onCreateOptionsMenu(Menu menu)
        {
            getSupportMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

            @Override
        public boolean onOptionsItemSelected(MenuItem item) {

            switch(item.getItemId()) 
            {
                case R.id.action_routes :
                    // do something here
                    break;
                case R.id.action_settings:
                    // do something here
                    break;
            }

            return true;
        }
    } 
```

和我的 activity_main.xml 菜单：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/action_routes"
        android:orderInCategory="100"
        android:showAsAction="always"
        android:icon="@drawable/ic_route"
        android:title="@string/action_routes" />        
    <item
        android:id="@+id/action_settings"
        android:orderInCategory="100"
        android:showAsAction="never"
        android:title="@string/action_settings"/>
</menu> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:36:45.740

您需要将您的设置`android:targetSdkVersion`为 14 或更高，以避免这种影响。

# php - 浏览器的后退、前进、刷新（F5 或 ctrl+R）在 PHP 中检查？

> ID：16135252
> 
> 赞同：2
> 
> 时间：2013-04-21T19:25:25.887
> 
> 标签：php

我想创建一个页面，如果用户按下后退、前进或刷新页面，它应该说无效页面，如果用户点击该页面上可用的链接，它应该说有效页面。

我不想禁用后退和前进按钮。它应该在 PHP 中完成

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:30:51.483

我会用 JavaScript 和[unload 事件](https://developer.mozilla.org/en-US/docs/DOM/window.onunload)来做到这一点。然后当用户离开页面时，最后的动作是清除 DOM 或存储一些 cookie，让您测试页面是返回按钮的结果还是返回页面的链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:28:48.620

我认为在 PHP 中完成此操作的唯一方法是在页面上的每个链接上附加一个一次性令牌，并在第一次使用时使它们失效。但是，这需要将它们存储在某个地方，例如数据库或缓存。

会话也可以工作，为每个页面加载生成一个唯一的 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T19:27:39.507

设置一个键，例如`uniqid()`，并将其作为`GET`变量放入链接中。然后，下次该用户加载页面时，您应该期待该键。例如，您可以将其保存在 中`$_SESSION`，以确保服务器知道会发生什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T20:17:22.527

我真的认为这是一个坏主意，主要是因为它无助于您的网站速度。`back`大多数浏览器在和期间使用缓存的信息副本`forward`

其次，这意味着您需要生成 uniqid 并将其存储..您可以这样使用`memcache`

这是我认为您的代码的样子（***注意：不要在生产中使用***）

```
<?php

/**
 * Make Sure the Broswer does to cache a copy
 */
header('Expires: Sat, 26 Jul 1997 05:00:00 GMT');
header('Last-Modified: ' . gmdate('D, d M Y H:i:s') . ' GMT');
header('Cache-Control: no-store, no-cache, must-revalidate');
header('Cache-Control: post-check=0, pre-check=0', false);
header('Pragma: no-cache');

// Use Fast Storage
$memcache = new Memcache();
$memcache->addserver("127.0.0.1");

// Just a sample link to know what has been clicked
$link = isset($_GET['link']) ? $_GET['link'] : null;
$link = basename($link);

try {

    // uniqid per page
    $uid = isset($_GET['uid']) ? $_GET['uid'] : false;

    if (! $uid) {
        throw new Exception("Invalid Link");
    }
    if ($memcache->get($uid))
        throw new Exception("Refresh Detected");

        // Add the link as used
    $memcache->add($uid, 1, null, 600); // this would be deleted in 10 mins

    // Simple Return message
    $message = "Clicked:" . ucwords($link);
} catch ( Exception $e ) {

    // Simple Error Message
    $message = $e->getMessage();
    // do somthing usefull here
}

// New Ramdom uinqid
$uid = bin2hex(mcrypt_create_iv(50, MCRYPT_DEV_URANDOM));

?>

<html>

<head>
<title><?php echo $message ?></title>
<script type="text/javascript"
    src="http:////ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script type="text/javascript">
$(function(){

    // Load all links
    $('a').each(function() {

        // Check with correspond to localhost .. since that what am using
        if(this.href.match("/localhost/"))
        {
            // Replace all links
            $(this).attr('href', 'http://localhost/lab/stackoverflow/a.php?uid=<?php echo $uid ;?>&link=' + this.href);
        }
    });
});
</script>
</head>

<body>
    <h3><?php echo $message ?></h3>
    <ul>
        <li><a href="index">Index</a></li>
        <li><a href="home">Home</a></li>
        <li><a href="about">About</a></li>
        <li><a href="http://google.com">Google</a></li>

    </ul>

</body>
</html> 
```

# javascript - 根据单元格值在 3 种不同的背景颜色之间切换

> ID：16135255
> 
> 赞同：0
> 
> 时间：2013-04-21T19:25:37.693
> 
> 标签：javascript, css, joomla

我的 Joomla 上有一个预订页面！2.5 访客可以报名参加活动的网站；这些活动有 3 种不同的状态：少于 20：初步（对注册人开放）超过 20：确认（对注册人仍然开放） 60：完全（对注册人关闭）

我希望使用javascript（或者如果可能的话只使用css）根据从registrants-table中提取的值来更改表格单元格的背景颜色。我在这里发现了几个类似的问题，但到目前为止只有两个值：like [this one](https://stackoverflow.com/questions/7425719/can-i-make-a-table-cell-have-a-different-background-color-if-the-value-a-part)。

我已经在 jsfiddle dot net 克隆了最新的实时示例并试图让它工作，但是把它搞砸了，所以它不起作用......我什至不确定将它合并到有问题的组件中的最佳方法一次它确实有效（''，）希望有人能指出我正确的方向吗？

无法发布链接/DaBouncer/DL6U2/185/]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:04:53.330

如果我理解正确，您需要以下内容：

HTML：

```
<table border="1">
<tr>
    <td>1</td>
    <td>4</td>
    <td>12</td>
</tr>
</table> 
```

CSS：

```
table td {
    padding: 5px 30px;
} 
```

jQuery：

```
var cell = $('td');

cell.each(function() {
var cell_value = $(this).html();
if ((cell_value >= 0) && (cell_value <=2)) {
    $(this).css({'background' : '#FF0000'});   
} else if ((cell_value >= 3) && (cell_value <=7)) {
    $(this).css({'background' : '#0066CC'});
} else if (cell_value >= 8) {
    $(this).css({'background' : '#00CC66'});
}
}); 
```

这是一个例子：http: [//jsfiddle.net/4Yp95/](http://jsfiddle.net/4Yp95/)

# 编辑

尝试使用其中的 jquery 代码创建一个 script.js 文件（在一个名为“js”的文件夹中），并在 jquery 之后，就在关闭选项卡之前，在“index.php”文件中加载它：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="js/script.js"></script> 
```

也许它有效

# asp.net - Ajax 部分视图不更新父 div

> ID：16135256
> 
> 赞同：0
> 
> 时间：2013-04-21T19:25:49.497
> 
> 标签：asp.net, ajax

我在使用局部视图中的 ajax 按钮来更新父页面中的 div 时遇到问题。如果我将相同的按钮放入父页面，它工作正常。这是不可能的还是我错过了什么？为帮助欢呼

父视图：

```
<div id="topiclist">
    @{Html.RenderPartial("DetailLoader", this.Model);}
</div> 
```

局部视图

```
@using (Ajax.BeginForm("LatestTopics", "Forums", new AjaxOptions { UpdateTargetId =     "topiclist" }))
{ 

<input type="hidden" name="page" value="@ViewBag.page" />
 <input type="submit" id="refresh" class="latestbuttons" value="@(ViewBag.NewTopics) New Topics" />
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T09:59:20.037

将此行包含在您的观点中，我遇到了同样的问题，并且对我有用！

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

# java - Java Swing鼠标侦听器不起作用

> ID：16135259
> 
> 赞同：0
> 
> 时间：2013-04-21T19:26:14.480
> 
> 标签：java, swing, swingx

我需要在 SwingX JXDatePicker 组件上激活 MouseListener，使我能够在用户单击组件时执行特定操作。不幸的是，该事件从未被触发。

特此重现问题的一小段代码：

 `````
public class TestDummy4 extends JFrame implements MouseListener{

    private static final long serialVersionUID = -2424758762078571430L;

    public TestDummy4(){
        super();
        this.getContentPane().setLayout(new BorderLayout());

        //Adds date picker
        JXDatePicker dp = new JXDatePicker();
        dp.getEditor().setEditable(false);
        dp.getEditor().setHighlighter(null);
        dp.addMouseListener(this);

        this.getContentPane().add(dp);
        this.pack();
        this.setVisible(true);
    }

    public static void main(String[] args) throws IOException {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                //Builds GUI
                new TestDummy4();
            }
        });

    }

    @Override
    public void mouseClicked(MouseEvent e) {
        System.out.println("Mouse clicked");
    }

    @Override
    public void mousePressed(MouseEvent e) {
        System.out.println("Mouse pressed");
    }
    @Override
    public void mouseReleased(MouseEvent e) {}
    @Override
    public void mouseEntered(MouseEvent e) {
        System.out.println("Mouse Entered");
    }
    @Override
    public void mouseExited(MouseEvent e) {}
} 
````  `使用此代码，单击 JXDatePicker 时，控制台上没有一行输出。

任何帮助/提示将不胜感激！托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:32:32.307

要将 a 添加`MouseListener`到`JXDatePicker's`编辑器组件，请使用：

```
dp.getEditor().addMouseListener(this); 
```

*更新：* 要将 a 添加`ActionListener`到组件的 open 中`JButton`，您可以使用：

```
JButton openButton = (JButton) dp.getComponent(1); 
openButton.addActionListener(myActionListener); 
`````

# sql - 从 SQL 中的当前日期开始两周后的日期

> ID：16135261
> 
> 赞同：1
> 
> 时间：2013-04-21T19:26:20.333
> 
> 标签：sql, oracle

如何在当前日期两周后提取日期？

例子

```
SELECT blabla
FROM table
WHERE blabla IN [sysdate + 2 weeks] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T19:29:41.123

怎么样 ... ？

```
SELECT blabla
  FROM table
 WHERE blabla > SYSDATE AND blabla < SYSDATE +14; 
```

这`SYSDATE +x`意味着`x`从现在开始的几天。

**ps**：对于*现在日期为 +14*的记录，请使用 ...

```
SELECT blabla
  FROM table
 WHERE blabla LIKE SYSDATE +14; 
```

**pps**正如 Ben 在下面指出的那样，使用存在潜在风险，`LIKE`因为它取决于`nls_date_format`参数。注意设置适当的格式或查看 Gordons 方法。@Ben：感谢您的注意。

希望这会有所帮助......干杯！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T19:52:31.473

当你这样做时，你需要注意时间分数。如果您不关心索引，那么您可以执行以下操作：

```
where trunc(blabla) = trunc(sysdate) + 14 
```

但是，由于该功能，这可能会排除索引的使用。解决这个问题的一种方法是：

```
where blabla >= trunc(sysdate) + 14 and blabla < trunc(sysdate) + 15 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T00:43:21.263

为了更加符合标准并避免类型转换，请使用 CURRENT_DATE 获取日期，并使用 INTERVAL 为其添加时间间隔。

```
SELECT blabla
FROM table
WHERE blabla = CURRENT_DATE + INTERVAL '14' DAY 
```

# php - 请求页面时未设置 cURL 引用标头

> ID：16135274
> 
> 赞同：0
> 
> 时间：2013-04-21T19:27:31.547
> 
> 标签：php, curl

我正在尝试使用以下代码使用 curl 设置 http_referer：

```
$header[] = "Accept: text/xml,application/xml,application/json,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
$header[] = "Cache-Control: max-age=0";
$header[] = "Connection: keep-alive";
$header[] = "Keep-Alive: 300";
$header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7";
$header[] = "Accept-Language: en-us,en;q=0.5";

$referer = 'www.domain.com';
$url = './test.php';
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (X11; U; Linux i686; pl-PL; rv:1.9.0.2) Gecko/2008092313 Ubuntu/9.25 (jaunty) Firefox/3.8');
curl_setopt($curl, CURLOPT_HTTPHEADER, $header);
curl_setopt($curl, CURLOPT_HEADER, 0);
curl_setopt($curl, CURLOPT_REFERER, $referer);
curl_setopt($curl, CURLOPT_ENCODING, 'gzip,deflate');
curl_setopt($curl, CURLOPT_AUTOREFERER, true);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($curl, CURLOPT_TIMEOUT, 30);

$data = curl_exec($curl); 
```

而 test.php 代码只是

```
print_r($_SERVER); 
```

我能够检索页面的内容，即我可以看到所有 $_SERVER 变量，但没有设置 HTTP_REFERER。

我什至尝试过`http_x_forwarded_with`，但没有设置这些标题。

我只得到

```
[HTTP_HOST] => localhost
    [HTTP_CONNECTION] => keep-alive
    [HTTP_CACHE_CONTROL] => max-age=0
    [HTTP_ACCEPT] => text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
    [HTTP_USER_AGENT] => Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31
    [HTTP_ACCEPT_ENCODING] => gzip,deflate,sdch
    [HTTP_ACCEPT_LANGUAGE] => en-US,en;q=0.8
    [HTTP_ACCEPT_CHARSET] => ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

有任何想法吗？

# java - 在 Java 应用程序中保护数据库信息

> ID：16135283
> 
> 赞同：0
> 
> 时间：2013-04-21T19:28:03.430
> 
> 标签：java, mysql, security

我最近在我的 Java 应用程序中遇到了一个严重的安全问题。客户端应用程序仅在 FTP 和 MySQL 服务器上运行，对它们的访问信息直接存储在代码中。我知道这是一个糟糕的主意，我打算将这些信息移到首选项文件中。但是如何帮助提高我的应用程序的安全级别？有什么方法可以正确保护此类文件吗？还是我应该寻找不同的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:38:37.937

将密码保存在密钥库中（例如： http: [//kingsfleet.blogspot.com/2008/12/storing-password-somewhere-safe.html](http://kingsfleet.blogspot.com/2008/12/storing-password-somewhere-safe.html)）。密钥库必须使用密码保护，因此为了使用客户端应用程序用户需要提供密钥库密码 - 我不确定这在您的情况下是否可以接受。

# c++ - 迭代 c++ 上的 ini 文件，可能使用 boost::property_tree::ptree？

> ID：16135285
> 
> 赞同：4
> 
> 时间：2013-04-21T19:28:09.583
> 
> 标签：c++, boost

我的任务很简单——我只需要解析这样的文件：

```
Apple = 1
Orange = 2
XYZ = 3950 
```

但我不知道可用的密钥集。我使用 C# 相对容易地解析这个文件，让我演示一下源代码：

```
 public static Dictionary<string, string> ReadParametersFromFile(string path)
    {
        string[] linesDirty = File.ReadAllLines(path);
        string[] lines = linesDirty.Where(
            str => !String.IsNullOrWhiteSpace(str) && !str.StartsWith("//")).ToArray();

        var dict = lines.Select(s => s.Split(new char[] { '=' }))
                        .ToDictionary(s => s[0].Trim(), s => s[1].Trim());
        return dict;
    } 
```

现在我只需要使用 c++ 做同样的事情。我正在考虑使用`boost::property_tree::ptree`，但似乎我无法遍历 ini 文件。很容易阅读ini文件：

```
boost::property_tree::ptree pt;
boost::property_tree::ini_parser::read_ini(path, pt); 
```

但是无法对其进行迭代，请参阅此问题[Boost program options - get all entries in section](https://stackoverflow.com/questions/11065938/boost-program-options-get-all-entries-in-section)

问题是 - 在 C++ 上编写上述 C# 代码模拟的最简单方法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-21T19:58:09.837

直接回答您的问题：***当然可以迭代属性树***。其实很简单：

```
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/ini_parser.hpp>

int main()
{
    using boost::property_tree::ptree;
    ptree pt;

    read_ini("input.txt", pt);

    for (auto& section : pt)
    {
        std::cout << '[' << section.first << "]\n";
        for (auto& key : section.second)
            std::cout << key.first << "=" << key.second.get_value<std::string>() << "\n";
    }
} 
```

这导致输出如下：

```
[Cat1]
name1=100 #skipped
name2=200 \#not \\skipped
name3=dhfj dhjgfd
[Cat_2]
UsagePage=9
Usage=19
Offset=0x1204
[Cat_3]
UsagePage=12
Usage=39
Offset=0x12304 
```

* * *

我之前使用[boost-spirit](/questions/tagged/boost-spirit "显示标记为“提升精神”的问题")编写了一个功能非常齐全的 Inifile 解析器：

*   [获取找到给定选项的INI文件行号的跨平台方法](https://stackoverflow.com/questions/8358975/cross-platform-way-to-get-line-number-of-an-ini-file-where-given-option-was-foun/8365427#8365427)

它支持注释（单行和块）、引号、转义等。

（作为奖励，它可以选择记录所有已解析元素的确切源位置，这是该问题的主题）。

不过，出于您的目的，我想我会推荐 Boost Property Tree。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:57:41.947

目前，我已经稍微简化了问题，省略了评论的逻辑（无论如何，这对我来说看起来很糟糕）。

```
#include <map>
#include <fstream>
#include <iostream>
#include <string>

typedef std::pair<std::string, std::string> entry;

// This isn't officially allowed (it's an overload, not a specialization) but is
// fine with every compiler of which I'm aware.
namespace std {
std::istream &operator>>(std::istream &is,  entry &d) { 
    std::getline(is, d.first, '=');
    std::getline(is, d.second);
    return is;
}
}

int main() {
    // open an input file.
    std::ifstream in("myfile.ini");

    // read the file into our map:
    std::map<std::string, std::string> dict((std::istream_iterator<entry>(in)),
                                            std::istream_iterator<entry>());

    // Show what we read:
    for (entry const &e : dict) 
        std::cout << "Key: " << e.first << "\tvalue: " << e.second << "\n";
} 
```

就个人而言，我认为我会将评论跳过写为过滤流缓冲区，但对于那些不熟悉 C++ 标准库的人来说，这可能是一个有点迂回的解决方案。另一种可能性是`comment_iterator`从指定的注释分隔符开始跳过一行的其余部分。我也不喜欢这样，但在某些方面它可能更简单。

请注意，我们在这里真正编写的唯一代码是将文件中的一个单一条目读取到`pair`. 从`istream_iterator`那里处理几乎所有东西。因此，编写函数的直接模拟几乎没有什么实际意义——我们只需从迭代器初始化映射，就完成了。

# php - PHP返回关联数组，通过多元素搜 索？

> ID：16135289
> 
> 赞同：0
> 
> 时间：2013-04-21T19:28:28.960
> 
> 标签：php

我有一个看起来像这样的数组：

```
$array = array(
    array('Field1' => 'red',  'Field2' => 'green',   'Field3' => 'blue'),
    array('Field1' => 'pink', 'Field2' => 'pinkish', 'Field3' => 'barbiecolor'),
    array('Field1' => 'red',  'Field2' => 'blue', '   Field3' => 'orange')
); 
```

我想通过给定的值来检查：

```
$searchBy = array('Field1' => 'red', 'Field2' => 'blue'); 
```

我想要实现的是返回所有关联键和值对匹配的父数组。我试过`in_array()`了，但它不起作用。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:29:59.547

`array_filter`可能会更好：

```
$matches = array_filter($array,function($a) use ($searchBy) {
    foreach($searchBy as $k=>$v) {
        if( $a[$k] != $v) return false;
    }
    return true;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T20:22:50.237

你可以试试：

```
$find = array_filter($array, function ($a) use($searchBy) {
    return array_intersect_assoc($searchBy, $a) == $searchBy;
}); 
```

[观看现场演示](http://eval.in/17090)

老学校版

```
$find = find($searchBy, $array);
print_r($find);

// Function used
function find($needle, $haystack) {
    $r = array();
    foreach ( $haystack as $k => $a ) {
        array_intersect_assoc($needle, $a) == $needle and $r[$k] = $a;
    }
    return $r;
} 
```

[老派演示](http://3v4l.org/lrOC0)

# python - python中的简单代码导致意外行为

> ID：16135295
> 
> 赞同：0
> 
> 时间：2013-04-21T19:29:16.103
> 
> 标签：python, algorithm, runtime, interval-tree, segment-tree

我正在尝试在 python 中实现一个段树类。段树允许在对数时间内查询范围（[更多关于段树](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor)）。在我的实现中，我持有必要的信息，以便能够回答 range 中元素的总和`(i, j)`。下面是我的代码。由于我是 python 新手，我仍然在每行末尾使用分号（继承自 C++）。

```
class Node :
    val = 0;
    def __init__( self, _val ) :
        self.val = _val;

class ST :
    st = [];

    def __init__( self, N ) :
        self.st = [ Node( 0 ) ] * N * 4;

    def build( self, nd, lo, hi, a ) :
        print "build( self, {0}, {1}, {2}, {3})".format( nd, lo, hi, a );

        if lo == hi :
            print "setting self.st[{0}] to {1}".format( nd, a[ lo ] );
            self.st[ nd ].val = a[ lo ];
            print "done! now self.st[", nd, "] is ", self.st[ nd ].val;
        else :
            print "else statement for nd = {0}".format( nd );
            self.build( nd*2+1, lo, int( ( lo+hi )/2 ), a );
            self.build( nd*2+2, int( ( lo+hi )/2+1 ), hi, a );

            self.st[ nd ].val = self.st[ nd*2+1 ].val + self.st[ nd*2+2 ].val;
            print "self.st[{0}] is set to {1}".format( nd, self.st[ nd ].val );

    def echo( self ) :
        for i in self.st :
            print i.val;

def main( ) :
    tree = ST( 5 );
    a = [ 2, 3, 4, 5, 6 ];
    tree.build( 0, 0, 4, a );
    tree.echo( );

main( ); 
```

构建函数应该从输入数组构建段树`a`。当我运行程序时，我得到以下输出：

```
build( self, 0, 0, 4, [2, 3, 4, 5, 6])
else statement for nd = 0
build( self, 1, 0, 2, [2, 3, 4, 5, 6])
else statement for nd = 1
build( self, 3, 0, 1, [2, 3, 4, 5, 6])
else statement for nd = 3
build( self, 7, 0, 0, [2, 3, 4, 5, 6])
setting self.st[7] to 2
done! now self.st[ 7 ] is  2
build( self, 8, 1, 1, [2, 3, 4, 5, 6])
setting self.st[8] to 3
done! now self.st[ 8 ] is  3
self.st[3] is set to 6
build( self, 4, 2, 2, [2, 3, 4, 5, 6])
setting self.st[4] to 4
done! now self.st[ 4 ] is  4
self.st[1] is set to 8
build( self, 2, 3, 4, [2, 3, 4, 5, 6])
else statement for nd = 2
build( self, 5, 3, 3, [2, 3, 4, 5, 6])
setting self.st[5] to 5
done! now self.st[ 5 ] is  5
build( self, 6, 4, 4, [2, 3, 4, 5, 6])
setting self.st[6] to 6
done! now self.st[ 6 ] is  6
self.st[2] is set to 12
self.st[0] is set to 24
24
24
24
24
24
24
24
24
24
24
24
24
24
24
24
24
24
24
24
24 
```

我不明白为什么序列的所有值都`24`在`build`函数退出之后。`build`调试信息在函数运行时显示了许多其他值，但在它退出后，所有值都*神奇地*变成了`24`. 为什么会这样？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:31:08.393

这将创建一个`N*4`元素列表：

```
self.st = [ Node( 0 ) ] * N * 4; 
```

但是，所有这些元素都是相同的`Node`。

例如，这将创建`N*4`不同`Node`的 s：

```
self.st = [Node(0) for i in range(N * 4)] 
```

# java - Java自定义输入输出流

> ID：16135300
> 
> 赞同：1
> 
> 时间：2013-04-21T19:29:52.170
> 
> 标签：java, stream

我需要一个流（或其他东西），我可以使用流写入和读取，两者都来自 Java 程序，这里有一些例子：

```
CustomStream stream = new CustomStream();

BufferedReader reader = new BufferedReader(new InputStreamReader(stream.getInputStream());
PrintWriter pw = new PrintWriter(stream.getOutputStream());

pw.println("Hello");
pw.println("World");

System.out.println(reader.readLine()); //Hello
System.out.println(reader.readLine()); //World 
```

猜猜这是一个相当迟钝的例子，但是除了实现抽象 Stream 类的所有方法之外，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:33:55.920

听起来您正在寻找一个 Java`Pipe`对象

[http://docs.oracle.com/javase/6/docs/api/java/nio/channels/Pipe.html](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/Pipe.html)

该界面与您上面的建议接近。请注意，`PipedInputStream`and`PipedOutputStream`类将使管道更易于交互。

对于某些应用程序，`CircularBuffer`该类可能就足够了，并且可以节省一点打字时间，但它本质上是做同样的事情。

# java - 使用简单框架构建了一个类“TimetableData”，可以很好地保存为 xml，但是当我尝试在代码中读取它时，它会抛出 PersistenceException

> ID：16135304
> 
> 赞同：1
> 
> 时间：2013-04-21T19:30:47.283
> 
> 标签：java, android, simple-framework

```
04-21 20:09:17.590: W/System.err(23059): org.simpleframework.xml.core.PersistenceException: Constructor not matched for class com.example.simplexml.DayData 
```

我将数据保存在 xml 文件中的主类，这似乎工作正常

```
Serializer serializer = new Persister();

    TimetableData timetableData = new TimetableData();

    SubjectData programming = new SubjectData("Programming","ECG 12",1200, 1400);
    SubjectData electronics = new SubjectData("Electronics","ECG 13", 1400, 1600);

    timetableData.daysData.get(0).subjectsData.add(electronics);
    timetableData.daysData.get(1).subjectsData.add(programming);

    File result = new File(this.getFilesDir().getPath().toString() + "example.xml");
    try {
        serializer.write(timetableData, result);
    } 
```

此时，如果我查看 xmlfile，我可以看到它，并且看起来还不错.. 但是当我阅读它时，它会抛出异常。这就是我阅读它的方式。

```
TimetableData timetableData;
    try {
        timetableData = serializr.read(TimetableData.class, source);//this throws the exception

        DayData myDay= timetableData.daysData.get(0);
        SubjectData mySub = myDay.subjectsData.get(0);
    }catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Toast.makeText(this, e.toString(), Toast.LENGTH_LONG).show();
    } 
```

上课日数据

```
public class DayData {

@Attribute(name="dayName")
private String dayName;
@ElementList(name="subjectsData", inline=true)
public List<SubjectData> subjectsData = new ArrayList<SubjectData>();

public DayData(String dayName)
{
    this.dayName = dayName;
}

public String getDayName()
{
    return dayName;
}
} 
```

我的类 TimetableData 列出了 dayData

```
 @Root
    public class TimetableData {

@ElementList(name="daysData",inline=true)
public List<DayData> daysData;

public TimetableData()
{
    daysData = new ArrayList<DayData>();
    daysData.add(new DayData("monday"));
    daysData.add(new DayData("tuesday"));
    daysData.add(new DayData("wednesday"));
    daysData.add(new DayData("thursday"));
    daysData.add(new DayData("friday"));
}
} 
```

我的班级主题数据

```
public class SubjectData{

   @Element(name="classLoc")
   private String classLoc;

   @Element(name="startTime")
   private int startTime;

   @Element(name="endTime")
   private int endTime;

   @Attribute(name="subjectName")
   private String subjectName;

   public SubjectData() {
      super();
   }  

   public SubjectData(String subjectName, String classLoc, int startTime, int endTime)     {
  this.classLoc = classLoc;
  this.subjectName = subjectName;
  this.startTime = startTime;
  this.endTime = endTime;
   }

   public String getClassLoc() {
      return classLoc;
   }

   public int getStartTime()
   {
   return startTime;
   }

   public int getEndTime()
   {
       return endTime;
   }
   public String getDayName() {
      return subjectName;
       }
    } 
```

这是创建的 xmlFile

```
<timetableData>
   <dayData dayName="monday">
      <subjectData subjectName="Electronics">
         <classLoc>ECG 13</classLoc>
         <startTime>1400</startTime>
         <endTime>1600</endTime>
      </subjectData>
   </dayData>
   <dayData dayName="tuesday">
      <subjectData subjectName="Programming">
         <classLoc>ECG 12</classLoc>
         <startTime>1200</startTime>
         <endTime>1400</endTime>
      </subjectData>
   </dayData>
   <dayData dayName="wednesday"/>
   <dayData dayName="thursday"/>
   <dayData dayName="friday"/>
</timetableData> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:04:55.160

尝试这个：

```
public class DayData {

@Attribute(name="dayName")
private String dayName;
@ElementList(name="subjectsData", inline=true)
public List<SubjectData> subjectsData = new ArrayList<SubjectData>();

public DayData(@Attribute(name="dayName") String dayName)
{
    this.dayName = dayName;
}

public String getDayName()
{
    return dayName;
}
} 
```

# php - 比较两个多维数组，然后创建唯一的数组

> ID：16135311
> 
> 赞同：8
> 
> 时间：2013-04-21T19:31:13.270
> 
> 标签：php, arrays, multidimensional-array, unique

我已经尝试了好几个小时了。

我有两个多维数组

```
 $newData (
    [0] => Array(
        [id] => 1
        [name] => John
        [sex] => male
    )
    [1] => Array(
        [id] => 2
        [name] => Kenny
        [sex] => male
    )
    [2] => Array(
        [id] => 3
        [name] => Sarah
        [sex] => female
    )
    [3] => Array(
        [id] => 4
        [name] => George
        [sex] => male
    )
)

$oldData (
    [0] => Array(
        [id] => 3
        [name] => Sarah
        [sex] => female
    )
    [1] => Array(
        [id] => 4
        [name] => George
        [sex] => male
    )
    [2] => Array(
        [id] => 5
        [name] => Peter
        [sex] => male
    )
    [3] => Array(
        [id] => 6
        [name] => Lexi
        [sex] => female
    )
) 
```

我需要比较 $newData 和 $oldData 并只获取第一个公共数组之前的新数据。

然后我的 $newData 将是：

```
$newData (
[0] => Array(
    [id] => 1
    [name] => John
    [sex] => male
)
[1] => Array(
    [id] => 2
    [name] => Kenny
    [sex] => male
) 
```

)

如果比较 ID 键但没有任何工作正常，我已经尝试了 array_unique 中的所有内容。

我需要先合并它们吗？映射它们？呸，我不知道，我迷路了。

任何帮助都是极好的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T19:55:07.213

我只会做一个嵌套的 foreach 循环。我不知道您使用的是哪种编程语言，但假设它是 PHP ($)：

```
$tmpArray = array();

foreach($newData as $data1) {

  $duplicate = false;
  foreach($oldData as $data2) {
    if($data1['id'] === $data2['id'] && $data1['name'] === $data2['name'] && $data1['sex'] === $data2['sex']) $duplicate = true;
  }

  if($duplicate === false) $tmpArray[] = $data1;
} 
```

`$tmpArray`然后，您在变量中有所需的数组。你当然可以`$newData = $tmpArray;`事后做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:56:12.053

只是迭代，`$newData`直到你找到第一个元素`$oldData`？

```
$cmp = $oldData[0];
$data = array();
foreach ($newData as $el) {
    if ($el['id'] === $cmp['id']
      && $el['name'] === $cmp['name']
      && $el['sex'] === $cmp['sex'])
        break;
    $data[] = $el;
} 
```

您的新数据将存储在`$data`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-21T06:41:27.500

用这个怎么样？通过修改[thelamborghinistory 的](https://stackoverflow.com/a/16135531/2210140)答案，

如果有重复，请取消设置动态键。

```
public function removeDuplicate($oldData, $newData, $key)
{
    $tmpArray = array();
    foreach ($newData as $data1) {
        $duplicate = false;
        foreach ($oldData as $data2k => $data2v) {
            if ($data1[$key] === $data2v[$key]) {
                unset($newData[$data2k]);
                $duplicate = true;
            }
        }
        if ($duplicate === true) {
            $tmpArray[] = $data1;
        } else {
            $tmpArray[] = $data1;
        }
    }
    return $tmpArray;
} 
```

然后你必须打电话，

```
removeDuplicate($oldData, $newData, 'name');//or whatever you want 
```

# r - 从互斥虚拟变量创建分类变量

> ID：16135316
> 
> 赞同：9
> 
> 时间：2013-04-21T19:31:55.493
> 
> 标签：r, categorical-data, dummy-variable

我的问题是关于先前回答的关于[将多个虚拟变量组合成单个分类变量的](https://stackoverflow.com/questions/8419357/combine-multiple-categorical-variables-in-one-dummy-variable)问题的详细说明。

在之前提出的问题中，分类变量是由不互斥的虚拟变量创建的。就我而言，我的虚拟变量是互斥的，因为它们代表 2X2 受试者间因子设计中的交叉实验条件（这也有一个受试者内部组件，我没有在这里讨论），所以我不认为我做`interaction`了什么需要做。

例如，我的数据可能如下所示：

```
id   conditionA    conditionB    conditionC     conditionD
1    NA            1             NA             NA
2    1             NA            NA             NA
3    NA            NA            1              NA
4    NA            NA            NA             1
5    NA            2             NA             NA
6    2             NA            NA             NA
7    NA            NA            2              NA
8    NA            NA            NA             2 
```

我现在想制作组合不同类型条件的分类变量。例如，具有条件 A 和 B 值的人可能被编码为一个分类变量，而具有条件 C 和 D 值的人可能被编码。

```
id   conditionA    conditionB    conditionC     conditionD  factor1    factor2
1    NA            1             NA             NA          1          NA
2    1             NA            NA             NA          1          NA
3    NA            NA            1              NA          NA         1
4    NA            NA            NA             1           NA         1
5    NA            2             NA             NA          2          NA
6    2             NA            NA             NA          2          NA
7    NA            NA            2              NA          NA         2
8    NA            NA            NA             2           NA         2 
```

现在，我正在使用`ifelse()`语句来执行此操作，这简直就是一团糟（而且并不总是有效）。请帮忙！可能有一些非常明显的“更简单的方法”。

编辑：

我使用的命令种类`ifelse`如下：

```
attach(df)
df$factor<-ifelse(conditionA==1 | conditionB==1, 1, NA)
df$factor<-ifelse(conditionA==2 | conditionB==2, 2, df$factor) 
```

实际上，我每次都会合并 6-8 列，因此更优雅的解决方案会很有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T20:19:48.427

> 更新（2019 年）：请使用[`dplyr::coalesce()`](https://dplyr.tidyverse.org/reference/coalesce.html)，它的工作原理几乎相同。

我的[R 包](https://github.com/muelleki/kimisc)有一个方便的功能，允许为`NA`向量列表中的每个元素选择第一个非值：

```
#library(devtools)
#install_github('kimisc', 'muelleki')
library(kimisc)

df$factor1 <- with(df, coalesce.na(conditionA, conditionB)) 
```

（我不确定这是否有效，如果`conditionA`并且`conditionB`是因素。`as.numeric(as.character(...))`如有必要，在使用之前将它们转换为数字。）

否则，您可以`interaction`试一试，并结合对结果因子水平的重新编码——但在我看来，您似乎对第一个解决方案更感兴趣：

```
df$conditionAB <- with(df, interaction(coalesce.na(conditionA, 0), 
                                       coalesce.na(conditionB, 0)))
levels(df$conditionAB) <- c('A', 'B') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T20:01:54.763

好吧，我认为你可以简单地做到这`ifelse`一点，比如：

```
factor1 <- ifelse(is.na(conditionA), conditionB, conditionA) 
```

另一种方法可能是：

```
factor1 <- conditionA
factor1[is.na(factor1)] <- conditionB 
```

第三种解决方案，如果您有两个以上的列条件，当然更实用：

```
factor1 <- apply(df[,c("conditionA","conditionB")], 1, sum, na.rm=TRUE) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T20:02:54.077

我认为这个功能可以满足您的需求（诚然，这是一个快速破解）。

```
to_indicator <- function(x, grp)
{
    apply(tbl, 1,
          function (x)
          {
              idx <- which(!is.na(x))
              nm <- names(idx)
              if (nm %in% grp)
                x[idx]
              else
                NA
          })
} 
```

这是与您提供的示例数据一起使用的。

```
tbl <- read.table(header=TRUE, text="
conditionA    conditionB    conditionC     conditionD
NA            1             NA             NA
1             NA            NA             NA
NA            NA            1              NA
NA            NA            NA             1
NA            2             NA             NA
2             NA            NA             NA
NA            NA            2              NA
NA            NA            NA             2")
tbl <- data.frame(tbl)

(tbl <- cbind(tbl,
              factor1=to_indicator(tbl, c("conditionA", "conditionB")),
              factor2=to_indicator(tbl, c("conditionC", "conditionD")))) 
```

# .htaccess - 自定义 URL 重写在 codeigniter 中不起作用

> ID：16135317
> 
> 赞同：0
> 
> 时间：2013-04-21T19:31:56.240
> 
> 标签：.htaccess, codeigniter, url-rewriting, codeigniter-url, codeigniter-routing

我在 Codeigniter htaccess 文件中使用下面的代码

```
RewriteRule ^([^.]+)-vacation$ /search?location=$1 
```

当我使用 url 访问它时`www.example.com/moscow-vacation`，它给了我一个 404 错误。

我在核心 php 应用程序中使用了上述 htaccess 代码。它在那里工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:45:59.500

很可能，您没有`search`脚本。如果脚本被命名`search.php`，您可以使用这个稍作修改的规则

```
RewriteRule ^([^.]+)-vacation$ /search.php?location=$1 
```

如果您有一个以`Search`方法命名的控制器`location`，您可以直接重写为

```
RewriteRule ^([^.]+)-vacation$ index.php/search/location/$1 
```

或尝试

```
RewriteRule ^([^.]+)-vacation$ search/location/$1 
```

# python - 如何返回长度为 n 的字符串 s 中的单词数（python）？

> ID：16135322
> 
> 赞同：-6
> 
> 时间：2013-04-21T19:32:22.633
> 
> 标签：python

对于家庭作业，我想实现一个函数，该函数`numLen()`将字符串`s`和整数作为参数，并返回字符串中长度`n`为的单词数。字符串中的单词是由至少一个空格分隔的非空格字符。`s``n`

一个例子是输入：

```
>>> numLen("This is a test", 4) 
```

并得到 2，因为字符串中有 2 个单词有 4 个字符。

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T19:35:06.657

将字符串拆分为单词[`str.split()`](http://docs.python.org/library/stdtypes.html#str.split)，遍历单词，将它们的长度与给定的数字进行比较，返回计数。

这是使用一些内置函数的紧凑实现：

```
In [1]: def numLen(s, n):
   ...:     return sum(1 for w in s.split() if len(w) == n)
   ...: 

In [2]: numLen("This is a test", 4)
Out[2]: 2 
```

您可以按照以下方式自行构建一个版本来锻炼

```
def numLen(s, n):
    words = ... # build a list of separate words
    i = 0 # a counter for words of length n
    for word in words:
        # check the length of 'word'
        # increment the counter if needed
    # return the counter 
```

# python - 如何使用 gstreamer 预缓冲传入的网络流？

> ID：16135324
> 
> 赞同：6
> 
> 时间：2013-04-21T19:32:26.723
> 
> 标签：python, gstreamer

我正在使用 gstreamer 通过网络传输音频。我的目标看似简单：将传入流预缓冲到某个时间/字节阈值，然后开始播放。我可能忽略了 gstreamer 的一个非常简单的功能，但到目前为止，我还没有找到一种方法来做到这一点。

我的（简化的）管道如下所示`udpsrc -> alsasink`：到目前为止，我为实现目标所做的所有尝试都是在两者之间使用队列元素：

1.  在两者之间添加一个队列元素。
2.  使用该`min-threshold-time`物业。这实际上可行，但问题是，它使所有传入数据在队列中花费指定的最短时间，而不仅仅是开始，这不是我想要的。
3.  为了解决前面的问题，我尝试让队列在数据第一次进入音频接收器时通知我的代码，认为这是取消我之前设置的 min-time 属性的时间，从而实现“预缓冲”行为。

这是我尝试过的代码的大致等价物：

```
def remove_thresh(pad, info, queue):
    pad.remove_data_probe(probe_id)
    queue.set_property("min-threshold-time", 0)

queue.set_property("min-threshold-time", delay)
queue.set_property("max-size-time", delay * 2)
probe_id = audiosink.get_pad("sink").add_data_probe(remove_thresh, queue) 
```

这不起作用有两个原因：

1.  我的回调比`delay`我提供的变量更早地被调用。
2.  调用它后，存储在队列中的所有数据都将丢失。播放开始时就好像队列根本不存在一样。

我认为我对这件事的工作原理有一个根本的误解。有谁知道我做错了什么，或者可以提供（可能）更好的方法来做到这一点？我在这里使用 python，但欢迎使用任何语言的任何解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T04:35:27.173

缓冲已经在 GStreamer 中实现。某些元素，如队列，能够构建此缓冲区并发布有关缓冲区级别（队列状态）的总线消息。

如果缓冲区级别不够高（通常是低于 100% 时），想要拥有更多网络弹性的应用程序应该监听这些消息并暂停播放。

因此，您所要做的就是在队列缓冲时将管道设置为**PAUSED状态。**在您的情况下，您只想缓冲一次，因此请为此使用任何逻辑（可能设置标志变量以仅在第一次暂停管道）。

1.  将队列的“max-size-bytes”属性设置为您想要的值。
2.  要么监听“溢出”信号以在缓冲区满时通知你，要么使用 gst_message_parse_buffering () 来查找缓冲级别。
3.  缓冲区已满后，将管道设置为**PLAYING**状态，然后忽略所有进一步的缓冲消息。

最后，对于完整的流式传输示例，您可以参考本教程：[https](https://gstreamer.freedesktop.org/documentation/tutorials/basic/streaming.html) ://gstreamer.freedesktop.org/documentation/tutorials/basic/streaming.html 代码是 C 语言，但演练应该可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T16:10:06.953

我在使用不同的管道（appsrc）时遇到了与您完全相同的问题，并且在花了几天时间试图找到一个优雅的解决方案（并最终得到与您发布的非常相似的代码）之后......我所做的只是切换标志`is-live`和`False`缓冲自动工作。（不需要`min-threshold-time`或其他任何东西）

希望这可以帮助。

# java - Thread.sleep 行为怪异

> ID：16135328
> 
> 赞同：0
> 
> 时间：2013-04-21T19:32:40.350
> 
> 标签：java, multithreading, concurrency, thread-sleep

我有以下代码：

```
public Move chooseMove(Board board) {

    // start parallel thread
    this.tn = new TreeNode(this.myboard, this, null);
    tn.stop = false;
    this.curT = (new Thread(tn));
    this.curT.start();

    try {
        long startTime = System.currentTimeMillis();
        Thread.sleep(4000 );
        System.out.println(System.currentTimeMillis() - startTime);
    } catch (InterruptedException e) {
        e.printStackTrace();
    } finally {
        tn.stop=true;
        return getBestMove();
    }
} 
```

输出有时是一个大于 4000 毫秒的值，例如 5400 毫秒，这意味着线程的睡眠时间超出了应有的时间。有什么帮助吗？谢谢。

编辑：我知道在指定的延迟之后不能保证 Thread#sleep 恰好停止。但是，额外的 1400 毫秒是一个很长的延迟。基本上，我正在实现一个游戏玩家代理，我需要一种方法来运行任务，然后在 5 秒后向服务器返回一个值（否则服务器结束游戏）。服务器正在使用 java.util.Timer.schedule(TimerTask task, long delay)。在上面的代码中，只有一个线程与主线程并发运行，即 this.curT，因此并没有真正繁重的多线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:36:04.177

来自[docs.oracle.com](http://docs.oracle.com/javase/tutorial/essential/concurrency/sleep.html)：

> 提供了两种重载的睡眠版本：一种将睡眠时间指定为毫秒，另一种将睡眠时间指定为纳秒。但是，这些**睡眠时间不能保证是精确**的，因为它们受到底层操作系统提供的设施的限制。此外，睡眠周期可以通过中断来终止，我们将在后面的部分中看到。在任何情况下，**您都不能假设调用 sleep 会在指定的时间段内暂停线程**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T20:18:56.440

`Thread#sleep`将使您的线程**恰好**休眠4 秒，然后唤醒。
一旦你的线程被唤醒，操作系统调度程序将它放在*可运行*队列中。
当它下一次被调度程序选中时，它将成为一个*正在运行的*线程，即会占用 CPU。
因此，由于操作系统调度程序可能会因操作系统、系统负载等而有所不同，因此会产生额外的延迟开销。这与`Java`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T19:37:38.547

这是常见的行为，在[`Thread#sleep`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#sleep%28long%29)javadoc 中有描述：

> 使当前执行的线程在指定的毫秒数内休眠（暂时停止执行），具体**取决于系统计时器和调度程序的精度和准确性**。

基于此，不能保证`Thread#sleep`在参数中指定的毫秒数内停止线程的工作。

# selenium - 如何使用 Selenium IDE 自动化新的 gmail UI 以发送电子邮件？

> ID：16135329
> 
> 赞同：1
> 
> 时间：2013-04-21T19:32:55.700
> 
> 标签：selenium, ide, gmail

当前的 gmail UI 已更改，它在弹出的 DIV 中打开，并且每个新的撰写窗口的 ID 参数都在更改。任何人都可以尝试给我代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T22:27:18.440

您可以使用 XPath 完成所有操作（使用 查找`By.xpath("xpath expression")`）：

*   打开gmail页面
*   像往常一样登录
*   单击撰写按钮（其 XPath 表达式`"//div[text()='COMPOSE']"`：）
*   （将弹出电子邮件对话框）
*   在“收件人”文本区域中键入（发送键）地址：`"//textarea[@name='to']"`
*   键入（发送键）主题到“主题”输入：`"//input[@name='subjectbox']"`
*   将电子邮件内容键入（发送键）到可编辑的 div：（`"//div[@class='gmail_default']"`或`"//div[@aria-label='Message Body']"`），因为他们似乎最近更改了 HTML）
*   点击发送：`"//div[text()='Send']"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:37:30.987

我找到了以下解决方案：

<tr>

```
<td>setTimeout</td>
<td>3000</td>
<td></td> 
```

</tr>

< !--open 命令通常等待 30 秒，所以我们现在要求它只等待 3 秒-->

<tr>

```
<td>open</td>
<td>/mail/u/0/?shva=1#inbox?compose=new</td>
<td></td> 
```

</tr>

<tr>

```
<td>type</td>
<td>//table/tbody/tr[1]/td[2]/div/div/textarea</td>
<td>McKiran@example.com</td> 
```

</tr>

<tr>

```
<td>type</td>
<td>name=subjectbox</td>
<td>Test</td> 
```

</tr>

<tr>

```
<td>type</td>
<td>class=editable LW-avf</td>
<td>Hi All<br/>Hope the test is successful. <br/><br/><i> Lovingly, </i></br><b>McKiran.</b></td> 
```

</tr>

<tr>

```
<td>click</td>
<td>class=T-I J-J5-Ji aoO T-I-atl L3</td>
<td></td> 
```

</tr>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T06:59:02.180

**使用 selenium webdrier**

去扔下面的链接

[http://ngowda.blogspot.in/2014/01/uploading-file-in-e-commerce-site-using.html](http://ngowda.blogspot.in/2014/01/uploading-file-in-e-commerce-site-using.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-23T14:11:14.027

public static void main(String[] args) throws InterruptedException { System.setProperty("webdriver.chrome.driver","D:\Selenium\SeleniumWork\seleniumDrivers\chromedriver.exe"); WebDriver driver = new ChromeDriver(); driver.manage().window().maximize(); driver.get(" [https://accounts.google.com/ServiceLogin?service=mail&continue=https://mail.google.com/mail/#identifier](https://accounts.google.com/ServiceLogin?service=mail&continue=https://mail.google.com/mail/#identifier) "); if(driver.findElement(By.xpath(".// *[@id='Email']")).isEnabled()) { driver.findElement(By.xpath(".//*[@id='Email']")).sendKeys("youremailid"); driver.findElement(By.xpath(".//*[@id='next']")).click(); } 线程.sleep(5000); WebElement menu = driver.findElement(By.xpath(".//input[@type='password']")); if(menu.isEnabled()) {

```
 System.out.println("Hello world");
         menu.sendKeys("emailidpassword");
        driver.findElement(By.xpath(".//*[@id='signIn']")).click();
    }
     Thread.sleep(5000);
     driver.findElement(By.xpath(".//div[contains(text(),'COMPOSE')]")).click();
     Thread.sleep(5000);
     driver.findElement(By.xpath("//textarea[@name='to']")).sendKeys("@gmail.com");
 driver.findElement(By.xpath("//input[@name='subjectbox']")).sendKeys("Sample"); 
```

driver.findElement(By.xpath("//div[@aria-label='Message Body']")).sendKeys("你好，这是简单的消息"); driver.findElement(By.xpath("//div[text()='Send']")).click();

}

# xml - 使用 SimpleXML 解析 FCPx XML 文件

> ID：16135332
> 
> 赞同：1
> 
> 时间：2013-04-21T19:33:11.340
> 
> 标签：xml, xml-parsing, simplexml

我在处理导出时 Final Cut Pro X 吐出的 XML。我正在使用 SimpleXML 进行解析并且遇到了一些问题。我使用了 php 网站上的示例 - [http://www.php.net/manual/en/simplexml.examples-basic.php](http://www.php.net/manual/en/simplexml.examples-basic.php)但我的 XML 有点复杂 - 这是一个示例：

```
 <fcpxml>
    <project name="Rought Cut 2" uid="A9BCAB6E-6D54-4809-834D-F764A741A71B" eventID="909C357C-BB9B-41E3-87A2-FC6AE3E940A0" location="file://localhost/Volumes/VideoMain/Final%20Cut%20Projects/Storm%20Chasing%20test/Rought%20Cut%202/">
        <resources>
            <format id="r1" name="FFVideoFormat1080p5994" frameDuration="1001/60000s" width="1920" height="1080"/>
            <projectRef id="r2" name="Storm Chasing June 7" uid="909C357C-BB9B-41E3-87A2-FC6AE3E940A0"/>
            <media id="r3" name="Start teaser" uid="Wn75vMb1R2anXdP2aQX5+g" projectRef="r2">
                <sequence duration="393393/72000s" format="r4" tcStart="0s" tcFormat="NDF" audioLayout="stereo" renderFormat="FFRenderFormatProRes422Proxy">
                    <spine>
                        <clip offset="0s" name="HS700 - 00023" duration="445445/120000s" start="5630434810/60000s" format="r1" tcFormat="DF">
                            <video offset="5629760136/60000s" ref="r5" name="00023 - v1" duration="897897/60000s" start="5629760136/60000s">
                                <audio lane="-1" offset="4503808109/48000s" ref="r5" name="00023 - a1" duration="719039/48000s" start="4503808109/48000s" role="dialogue" outCh="L, R"/>
                            </video>
                            <title lane="1" offset="2252173924/24000s" ref="r6" name="Basic Title: Amateur Storm Chasing Mk2
" duration="360360/120000s" start="86486400/24000s">
                                <text>Amateur Storm Chasing Mk2
</text>
                            </title>
                            <keyword start="234573339/2500s" duration="897897/60000s" value="Hs700"/>
                            <metadata>
                                <md key="com.apple.proapps.studio.reel" value="TS700"/>
                                <md key="com.apple.proapps.studio.scene" value="89"/>
                            </metadata>
                        </clip>
                        <clip offset="267267/72000s" name="GH2 - 2012-06-07 20:27:30" duration="126126/72000s" start="45045/72000s" tcFormat="NDF">
                            <video offset="0s" ref="r7" name="2012-06-07 20:27:30 - v1" duration="1966965/72000s">
                                <audio lane="-1" offset="0s" ref="r7" name="2012-06-07 20:27:30 - a1" duration="1311310/48000s" role="dialogue" outCh="L, R"/>
                            </video> 
```

XML 不仅仅是简单的 123，但我想知道如何解析它。这是我正在使用的，但是查看我的 MAMP / php 错误日志，我发现我遇到了很多错误 - SimpleXMLElement::__construct(): Entity: line 14: parser error : (注意：此错误与我发布的代码）。

这是我一直在玩的代码：

```
<?php
include 'example.php';
$fcpxml = new SimpleXMLElement($xmlstr);
echo $fcpxml->project['name'];
?> 
```

我确定这很简单。例如，我看到我正在解析的 XML 文件使用双引号，而示例使用单引号。也许它不喜欢文件中的某些特殊字符，FCPx XML 看起来很复杂，我在编程方面很糟糕，但我想编写一个脚本，在格式精美的页面或文档中吐出我所有的剪​​辑名称、总长度、关键字和其他内容会很有趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T01:15:11.660

我不熟悉您的 XML 解析库，因此无法直接与解析器本身对话。*但是*，查看您发布的 XML，我注意到一个奇怪的巧合：错误显示第 14 行，而您的 XML 中的第 14 行从引号*内的换行符开始：*

```
<title lane="1" offset="2252173924/24000s" ref="r6" name="Basic Title: Amateur Storm Chasing Mk2
" duration="360360/120000s" start="86486400/24000s"> 
```

您的属性在第一行`name`有开引号，但在下一行有*闭引号。*解析器通常*讨厌*带引号的字符串中的换行符，除非它以非常特定的方式完成。为了确保这不仅仅是粘贴到 Stack Overflow，请查看包含 XML 的原始文件，看看它是否有换行符（使窗口更宽，关闭显示选项中的换行符等） . 如果是这样，请将线路重新组合在一起并重试：`Basic Title: Amateur Storm Chasing Mk2`

 **```
<title lane="1" offset="2252173924/24000s" ref="r6" name="Basic Title: Amateur Storm Chasing Mk2" duration="360360/120000s" start="86486400/24000s"> 
```

祝你好运！**

# sql - 没有与给定键匹配的唯一约束

> ID：16135333
> 
> 赞同：0
> 
> 时间：2013-04-21T19:33:11.163
> 
> 标签：sql, postgresql, postgresql-9.2

我在`PostgreSQL`--`customer`和中有两张桌子`creditcard`。一个客户可以拥有多张信用卡，并且不同的客户可以拥有与其帐户关联的同一张信用卡。但是，客户不应多次将同一张信用卡与其帐户关联。因此，在`creditcard`表中， 和 的组合`cardnumber`代表`custid`一个唯一键，我想将其用作主键。

但是，我收到以下错误：`ERROR: there is no unique constraint matching given keys for referenced table "creditcard"`. 添加到表中声明`UNIQUE`的末尾解决了这个问题，但我希望同一个卡号能够与多个帐户相关联，因此这不是一个可接受的解决方案。我在这个主题上的大部分搜索都会引发关于外键的讨论，但我没有看到我的外键有任何问题。有人可以帮我理解我做错了什么吗？`cardnumber``creditcard``custid`

**请注意，这不是针对真实产品的，只是为了让我了解 SQL ——我不会使用此设置存储任何真实的 CC 编号。**

```
CREATE SEQUENCE customeridseq INCREMENT BY 1 MINVALUE 100;
CREATE TABLE customer (
    id INT NOT NULL PRIMARY KEY default nextval('customeridseq') --- this is a surrogate key (multiple customers can potentially have the same name...)
    ,username VARCHAR(20) NOT NULL UNIQUE
    ,fname VARCHAR(20) NOT NULL
    ,lname VARCHAR(20) NOT NULL
    ,emailaddress VARCHAR(20) NOT NULL UNIQUE
    ,birthdate INTERVAL YEAR TO MONTH NOT NULL
    ,passwordhash VARCHAR(64) NOT NULL -- assuming SHA-512 hash producing 64 bytes of data
    );

CREATE type cardtype AS enum (
    'Discover'
    ,'Visa'
    ,'MasterCard'
    ,'AmericanExpress'
    );

CREATE TABLE creditcard (
    cardnumber INT NOT NULL
    ,custid INT NOT NULL REFERENCES customer(id)
    ,cardtype CARDTYPE NOT NULL
    ,expirationdate INT NOT NULL
    ,billingaddress VARCHAR(40) NOT NULL
    ,PRIMARY KEY (custid, cardnumber)
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:07:07.467

我手边没有数据库，但这就是我如何布置表格以允许客户拥有多个抄送，并且不同的人拥有相同的抄送，但不允许同一个人拥有相同的抄送超过一次。解决方案是标准化。它有不同的级别，通常您希望根据需要至少达到 3 级，有时甚至更高。肯定有一些艺术和科学可以根据情况正确地做到这一点。

```
CREATE TABLE customer 
(
    customer_id PRIMARY KEY
);

CREATE TABLE creditcard
(
    creditcard_id PRIMARY KEY,
    cardnumber --UNIQUE
);

create table customer_creditcard
(
  customer_creditcard_id PRIMARY KEY,
  customer_id,
  creditcard_id --UNIQUE (customer_id, creditcard_id)
); 
```

# android - 如何获取群组的自定义铃声

> ID：16135335
> 
> 赞同：1
> 
> 时间：2013-04-21T19:33:20.360
> 
> 标签：android, group-concat

这是我用来获取分配给联系人的自定义铃声的代码。但是，如果该联系人属于某个组，并且该组有自定义铃声，我怎样才能获得该组的自定义铃声？

谢谢

```
//<uses-permission android:name="android.permission.READ_CONTACTS" />

public String getCustomRingtoneOfContact(String number) {
    if (number.length() == 0) return null;
    Uri uri = Uri.withAppendedPath(ContactsContract.PhoneLookup.CONTENT_FILTER_URI, Uri.encode(number));
    String sTone;

    Cursor contactLookup = Contexto.getContentResolver().query(uri, new String[] {BaseColumns._ID, ContactsContract.PhoneLookup.DISPLAY_NAME, ContactsContract.PhoneLookup.CUSTOM_RINGTONE}, null, null, null);

     try {
        if (contactLookup != null && contactLookup.getCount() > 0) {
            contactLookup.moveToNext();
            //String sName = contactLookup.getString(contactLookup.getColumnIndex(ContactsContract.Data.DISPLAY_NAME));
            //String contactId = contactLookup.getString(contactLookup.getColumnIndex(BaseColumns._ID));
            sTone = contactLookup.getString(contactLookup.getColumnIndex(ContactsContract.Data.CUSTOM_RINGTONE));      
        }
     } finally {
        if (contactLookup != null) {
            contactLookup.close();
        }
     }

     return sTone;
} 
```

# php - 如何在 HTML/PHP 中打印错误消息？

> ID：16135340
> 
> 赞同：0
> 
> 时间：2013-04-21T19:33:57.573
> 
> 标签：php, syntax-error, isset

我正在检查是否传递了特定参数以及该参数是否存在文件夹。前任

```
if ((! isset($_GET["name"])) or (! is_dir($_GET["name"]))) {

    print "----------------USER NOT FOUND-----------------" ;
} 
```

在我的 URL 中，如果 name=Erik 并且该文件夹不存在于该名称中，我想打印错误消息。另外我想检查参数'name'是否使用isset传递到URL中。不知何故，上述方法不起作用，我无法弄清楚原因。任何输入都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:38:45.903

`or`有不同的用途。这是因为每当您尝试做的事情不起作用时，它就会执行另一位。典型的**弃用**示例是，当您尝试进行一些数据库交互时，您会回写`$STH = mysql_query('SELECT * FROM users') or die();`. 对于您的情况，您应该改用`||`运算符，[如文档中所述](http://php.net/manual/en/language.operators.logical.php)

此外，您不是在检查是否有人提交了某些东西。如果提交的表单没有任何内容，这将永远不会打印任何内容。两个错误都已修复，您的代码应如下所示：

```
if (empty($_GET["name"]) || !is_dir($_GET["name"])) {
print "----------------USER NOT FOUND-----------------" ;
} 
```

因为，如果有人提交表单，则 url 将为`example.com/index.php?name=`，这使得`$_GET['name']`在它为空时进行设置。我假设您想说在那种情况下找不到用户。

# ios - 带有corePlot的图表末尾的箭头？

> ID：16135342
> 
> 赞同：-1
> 
> 时间：2013-04-21T19:34:34.470
> 
> 标签：ios, graphics, core-plot

是否可以像 corePlot 那样在图表上添加箭头？

![在此处输入图像描述](https://i.stack.imgur.com/Cv9HB.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:51:08.600

是的，但仅限于轴线上。有关几个示例，请参阅*Plot Gallery*示例应用程序。

# java - 预期异常 JUNIT

> ID：16135344
> 
> 赞同：0
> 
> 时间：2013-04-21T19:34:43.280
> 
> 标签：java, exception, testing, junit4, expected-exception

我想在数据库中添加一个对象而不是检查该对象是否已经存在所以我们不能添加它两次。我用 JUNIT 来测试它：

```
@org.junit.Test (expected = ExistingProduct.class)
public void AddExisting() 
{

    Register aRegister = new Register();
    Product aProduct = new Product();
    aProduct.setPIN("079400027252"); 

    aRegister.AddProduct(aProduct);

    Product sameProduct = new Product();
    sameProduct.setPIN("079400027252");

    aRegister.AddProduct(sameProduct); //this throw the exception

    aRegister.deleteProduct("079400027252"); //CAN'T REACH HERE
} 
```

问题是我无法删除产品，因为之前调用的指令会引发异常从而结束测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:13:21.833

好吧，我有点想出一些东西...我调用@Before方法女巫从BD中删除所有内容并放回默认值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-08T23:16:19.010

也许像这样解决这个问题。Sergey Berezovskiy在[https://stackoverflow.com/a/20494165/4296891](https://stackoverflow.com/a/20494165/4296891)上有更多内容

```
public void AddExisting() 
    {

        Register aRegister = new Register();
        Product aProduct = new Product();
        aProduct.setPIN("079400027252"); 

        aRegister.AddProduct(aProduct);

        Product sameProduct = new Product();
        sameProduct.setPIN("079400027252");
        try
        {
            aRegister.AddProduct(sameProduct); //this throw the exception
            assertEquals("Can't add it twice exception has been excepted." ,true, false);
        }
        catch(ExistingProduct exception)
        {        
            // exception
        }

        aRegister.deleteProduct("079400027252"); //CAN'T REACH HERE
    } 
```

# c# - C#如何在特定时间段后显示消息

> ID：16135345
> 
> 赞同：-4
> 
> 时间：2013-04-21T19:34:47.833
> 
> 标签：c#, timer

例如，在我的项目中，我想在 5 分钟后显示消息或调用方法，如果用户没有点击特定按钮，我编写了这段代码

```
 Boolean flage = false;

    private void button1_Click(object sender, EventArgs e)
    {
        Timer Clock;
        Clock = new System.Windows.Forms.Timer();
        Clock.Interval = 1000;
        Clock.Start();
        Clock.Tick += new EventHandler(Timer_Tick);

    }
    public void Timer_Tick(object sender, EventArgs eArgs)
    {
        if (flage == false)
        {
            MessageBox.Show("after period of time ");
        }
    }

    private void button2_Click(object sender, EventArgs e)
    {
        flage = true;
    } 
```

它保持显示消息框可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:37:23.650

您的 Timer Clock 变量在堆栈上，并且在函数退出时不再存在。

试着让它成为班级的一员。

# php - 为什么 PDO 中的 INSERT INTO 过于复杂？

> ID：16135346
> 
> 赞同：0
> 
> 时间：2013-04-21T19:34:49.003
> 
> 标签：php, mysql, pdo

所以我必须将所有`mysql_`命令更改为 PDO，因为它们已正式贬值，而 PDO 是最通用的。为什么 INSERT 如此复杂，这样做有什么好处？

例如，在我的旧代码中，我这样做：

```
mysql_connect("$host", "$username", "$db_password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");
mysql_query("INSERT INTO $tbl_name(this, that, him, her) VALUES('$this', '$that', '$him', '$her')")or die(mysql_error()); 
```

和 PDO

```
$conn = new PDO('mysql:host=HST_NAME;dbname=DB_NAME;charset=utf8', 'USER', 'PASSWORD');
$sql = "INSERT INTO books (this, that, him, her) VALUES (:this,:that,:him,:her)";
$q = $conn->prepare($sql);
$q->execute(array(':this'=>$this,
                  ':that'=>$that,
                  ':him'=>$him,
                  ':her'=>$her )); 
```

当我必须一次输入大量数据时，PDO 会变得很大。这有什么好处？

寻找**为什么做**的答案而不是**做什么**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:36:47.940

因为您的 mysql_query**格式不正确**。
如果您关心正确格式化它，它将使用与 PDO 相同数量的代码

此外，由于某种原因，您选择“长” PDO 语法。虽然代码可能是

```
$sql = "INSERT INTO books (this, that, him, her) VALUES (?,?,?,?)";
$q = $conn->prepare($sql);
$q->execute(array($this,$that,$him,$her)); 
```

不过，对于其中任何一个，您都可以使用[某种自动化](https://stackoverflow.com/questions/3773406/insert-update-helper-function-using-pdo)

要回答已编辑的问题，[为什么要使用准备好的语句](https://stackoverflow.com/a/15952010/285587)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:23:16.893

您*不*应该在 SQL 语句中直接使用变量；这会导致各种安全漏洞。

正如您所说，这些`mysql_`功能正在被弃用。`mysql_`我知道如果您已经使用了很长时间的功能，您可能不愿意迁移到 PDO ，但是 PDO 比旧`mysql_`功能更好的原因有很多：

*   它可以防止开箱即用的 SQL 注入漏洞
*   它比`mysql_`函数更快
*   它还具有支持 MySQL 以外的数据库引擎的优点

PDO 还将您的数据库查询与参数分开。考虑以下：

```
$sql = "INSERT INTO users (first_name, last_name, email)
        VALUES (:first_name, :last_name, :email)";

$smt->prepare($sql);
$smt->bindParam(':first_name', $first_name);
$smt->bindParam(':last_name', $last_name);
$smt->bindParam(':email', $email);
$smt->execute(); 
```

或者不那么“臃肿”的语法：

```
$sql = "INSERT INTO users (first_name, last_name, email)
        VALUES (:first_name, :last_name, :email)";

$smt->prepare($sql);
$smt->execute(array(
    ':first_name' => $first_name,
    ':last_name' => $last_name,
    ':email' => $email
)); 
```

如您所见，参数与语句本身是分开的。它比在你的语句中插入变量更干净，这看起来很难看，正如我所说，会导致注入漏洞。

# c - 在 C 中读取和写入字节（从/在文件中）

> ID：16135351
> 
> 赞同：0
> 
> 时间：2013-04-21T19:35:23.477
> 
> 标签：c, file, input, byte, output

我必须在**C**中为操作系统类解决以下问题：

在命令行给出了三个文件，两个用于输入，一个用于输出。输出文件是从输入文件中获取的，如下：第一个文件的 10 个字节，第二个文件的 20 个字节，第一个文件的接下来的 10 个字节，第二个文件的接下来的 20 个字节，依此类推，直到输入文件完成的。

简单但低效的解决方案：读取和写入 10 / 20 字节组。一个高效（但不简单）的解决方案：读取和写入 5000 字节的块。

我尝试了这个简单的解决方案。但它不起作用......任何人都可以帮助我吗？

```
#include<stdio.h>

int main(int argc, char* argv[], char* envp[]){
if (argc != 4){
    printf("%s", "Usage: c4h filename\n");
    return 0;
}

int c1,c2,i;
FILE *in1;
FILE *in2;
FILE *out;

in1 = fopen(argv[1], "r");
in2 = fopen(argv[2], "r");
out = fopen(argw[3], "wb");

if (in1 == NULL){
    printf("%s", "File not found!\n");
    return 0;
}

if (in2 == NULL){
    printf("%s", "File not found!\n");
    return 0;
}

while(feof(in1)!=0 && feof(in2)!=0){
    for(int i=0;i<20;i++)
        if(feof(in1)!=0){
            c1 = fgetc(in1);
            fputc(c1,out);
        }

    for(int i=0;i<10;i++){
        if(feof(in2)!=0){
            c2 = fgetc(in2);
            fputc(c2,out);
        }

}

fclose(in1);
fclose(in2);
fclose(out);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-25T18:12:09.277

您的代码存在三个问题：

1.  错字`argw`而不是`argv`
2.  缺少`}`while 循环的关闭
3.  `feof(file)!=0`当您处于 eof 时评估为 true，与您想要的条件完全相反，`!eof(file)`仅当您不在 eof 时替换为 true

`i`还有一个较小的问题，您在 for 循环中重新定义了变量：`for(int i=0;i<10;i++)`应该是`for(i=0;i<10;i++)`因为您`i`在代码的前面定义了。

您应该先尝试编译您的代码，然后再将其带到 SO！您发布的代码甚至没有为我编译。这是工作代码：

```
#include<stdio.h>

int main(int argc, char* argv[], char* envp[]){
if (argc != 4){
    printf("%s", "Usage: c4h filename\n");
    return 0;
}

int c1,c2,i;
FILE *in1;
FILE *in2;
FILE *out;

in1 = fopen(argv[1], "r");
in2 = fopen(argv[2], "r");
out = fopen(argv[3], "wb");

if (in1 == NULL){
    printf("%s", "File not found!\n");
    return 0;
}

if (in2 == NULL){
    printf("%s", "File not found!\n");
    return 0;
}

while(!feof(in1) && !feof(in2)){
    for(i=0;i<20;i++)
        if(!feof(in1)){
            c1 = fgetc(in1);
            fputc(c1,out);
        }

    for(i=0;i<10;i++){
        if(!feof(in2)){
            c2 = fgetc(in2);
            fputc(c2,out);
        }

        }
}

fclose(in1);
fclose(in2);
fclose(out);
return 0;
}; 
```

# vb.net - 匹配和显示文本框的内容

> ID：16135355
> 
> 赞同：0
> 
> 时间：2013-04-21T19:36:20.473
> 
> 标签：vb.net, textbox

我有一个包含 6 个分组框的表单，每个分组框包含 180 个文本框，这些文本框又分为三组：项目、描述和数量。我需要匹配包含项目的文本框集，查看哪些项目已重复多次，并总结匹配项目的数量，将其与可用库存进行匹配，如果总和更大，则显示此在 msgbox 中，显示将不符合可用项目的项目。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:40:26.237

这是我如何开始的示例；这将涉及遍历组框中的每个控件以查看它们是否匹配。可能是一种更优雅的方式，但它是一个开始。在这个例子中，当有匹配时我有一个消息框显示，它将两个值连接起来；出于您的目的，您可能希望在匹配时添加 sum 函数和其他代码：

```
 Dim myControl As Control

    For Each myControl In Me.GroupBox1.Controls

        If (TypeOf myControl Is TextBox) And myControl.Text <> "" Then

            For Each Control In Me.GroupBox2.Controls

                If (TypeOf Control Is TextBox) And Control.Text <> "" Then

                    If Control.Text = myControl.Text Then

                        MessageBox.Show(Control.Text & myControl.Text)

                    End If

                End If

            Next

        End If

    Next 
```

# c - 如何检查bool是否已经存在

> ID：16135360
> 
> 赞同：0
> 
> 时间：2013-04-21T19:37:15.940
> 
> 标签：c, boolean

我正在开发一个用于嵌入式平台的库。我在作为库一部分的标头中有代码 `typdef enum bool {false, true} bool;`

如果 lib 用户已经定义了一个名为 bool 的类型，我该如何编写代码以使我的 lib 不会尝试重新声明它？

目前我已经使用#defines

```
#ifndef _BOOL 
#define _BOOL 
typedef enum bool{...
#endif 
```

但是，这取决于定义了 bool 的用户也定义了 _BOOL

有没有办法检查具有特定名称的类型是否已经存在？

（注意这是一个 C 问题，不是 C++，我和我假设的 lib 用户都没有使用 stdbool，Ta）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T19:46:31.277

你不能。

您的库可能应该只定义自己的不同布尔类型：

```
typedef enum { libname_false, libname_true } libname_bool; 
```

在您的库实现中，您可以根据需要将它们别名为更方便的名称。

顺便说一句，您不应该使用前导下划线命名预处理器宏；[这些名称是为编译器保留的](https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:42:52.737

我会走你现在的路，提供某种带有#defines的your_lib_config.h，如HAS_BOOL_DEFINED或影响你的库配置的任何类似内容。因此，用户将负责在使用您的库之前调整配置标头中的设置。

# django - 使用 Django 实现排行榜

> ID：16135368
> 
> 赞同：6
> 
> 时间：2013-04-21T19:37:55.717
> 
> 标签：django

我的站点上的每个用户都有一个模型（UserProfile），每个配置文件都包含一个名为 points 的字段。

我想在按点排序时从当前用户那里获得 -5 +5 用户。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T20:04:26.050

您可以进行两个查询，一个针对当前用户之前的用户，一个针对之后的用户：

```
id = current_user.pk
points = current_user.profile.points

before = User.objects.filter(
    Q(profile__points__gt=points) | 
    Q(profile__points=points, pk__lt=id)
).order_by('-profile__points')[:5]

after = User.objects.filter(
    Q(profile__points__lt=points) | 
    Q(profile__points=points, pk__gt=id)
).order_by('profile__points')[:5] 
```

这是基于两个查询：

*   得分高于当前用户，或得分相同但得分低于当前用户的所有用户`pk`。
*   得分低于当前用户的所有用户，或得分相同但得分更高的所有用户`pk`。

然后通过正确的排序和限制，您可以获得结果。当然`pk`可以用任何其他文件替换，或者完全删除。在后一种情况下，您可以改为认为当前用户始终是第一个（这只是一个示例），并且查询变为：

```
before = User.objects.filter(
    profile__points__gt=points,
).order_by('-profile__points')[:5]

after = User.objects.filter(
    profile__points__lte=points,
).exclude(pk=id).order_by('profile__points')[:5] 
```

或者，要仅获取按点排序的用户列表中当前用户的索引，您可以执行以下操作：

```
id = current_user.pk
points = current_user.profile.points
index = User.objects.filter(
    Q(profile__points__gt=points) |
    Q(profile__points=points, pk__lt=id)
).count() 
```

那么以当前用户为中心的用户列表将是：

```
User.objects.all().order_by('-profile__points', 'pk')[index - 5:index + 6] 
```

如果您有很多用户，这种替代方法可能会更慢，因为需要评估当前用户之前的整个用户列表，但我没有验证这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T20:06:48.857

我不确定你的观点是什么，但这应该只是注释，如下所示......

```
from django.db.models import Sum, Avg

UserProfile.objects.annotate(sum_rating=Sum('sum__points')).order_by('-sum_points') 
```

不要忘记您可以在过滤器中使用注释变量。

更新：按点排序，注意`-`

```
UserProfile.objects.filter(whatever here).order_by('-points')[:5] 
```

或者

```
.order_by('points')[:5] 
```

# javascript - 什么时候应该选择原型继承与功能继承？

> ID：16135369
> 
> 赞同：2
> 
> 时间：2013-04-21T19:38:02.517
> 
> 标签：javascript

我一直在阅读[JavaScript：The Good Parts](https://rads.stackoverflow.com/amzn/click/com/0596517742)，目前正在阅读“第 5 章：继承”。

据我了解，使用函数继承是首选，因为它允许对象的属性和变量的隐私，同时仍然允许使用对象外部的方法调用它们。然而，原型继承似乎确实有一个优势，因为您可以相当容易地创建原型对象（这使得理解对象是什么，对我来说，更具体一点）。

我什么时候应该选择一个而不是另一个？我应该尽可能使用函数继承吗？或者我可以遵循“更好”的指导方针来做出决定吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:58:26.437

我见过很少的代码使用函数技术作为继承的主要形式。我见过的绝大多数都使用原型继承。它快速且易于实现，对 JavaScript 来说似乎是最自然的。

这并不是说永远不应该使用函数继承，但我认为您会发现原型对于大多数应用程序来说绰绰有余。

我们也不要忘记，您仍然可以在原型继承中使用一些函数式技术，例如为每个对象提供其自己的函数版本，该函数在构造函数中关闭变量。所以它不需要完全是一个或另一个。

最重要的是理解原型和函数/闭包的概念。仅此一项就可以为您提供做出适当决定所需的知识。

# c++ - 输出到多个 ostream 的类（文件和控制台）

> ID：16135370
> 
> 赞同：3
> 
> 时间：2013-04-21T19:38:04.647
> 
> 标签：c++, inheritance, ostream

是的，我什至不确定如何正确表述这一点；我觉得这个问题有点牵强。我相信有人可以在这里帮助我。

这就是我想要做的：

1.  有一个我可以发送东西的班级，就像这样。

    ```
    icl << "Blah blah blah" << std::endl; 
    ```

2.  我希望能够 .attach() 继承 std::basic_ostream 的类。

3.  然后，这些类将能够以自己的方式格式化输出。一个可能会添加时间戳并写入日志，另一个可能会将其写入控制台，另一个可能会在游戏中显示它。

有人愿意让我朝着正确的方向开始吗？这是我非常有的想法。

```
#include <vector>

class OutputMan {
    std::vector<std::basic_ostream&> m_Streams;

public:
    void attach(std::basic_ostream& os) {
        m_Streams.push_back(os);
    }
} 
```

**问题#1：**我需要继承和覆盖什么才能发送

```
icl << "Blah!" << std::endl; 
```

到 m_Streams 中的每个流？

**问题 #2：**如何继承 std::basic_ostream 并创建一个更改输出的类，例如，在其开头添加时间戳？我也想让这个类输出到一个文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T22:04:56.010

我想我会做一些不同的事情。我可能已经把它做得比必要的更详细一点——我担心我可能会因为试图充分利用新的 C++11 特性而有点忘乎所以。无论如何，使用代码：

```
#include <streambuf>
#include <fstream>
#include <vector>
#include <iostream>
#include <initializer_list>

namespace multi { 
class buf: public std::streambuf {
    std::vector<std::streambuf *> buffers;
public:
    typedef std::char_traits<char> traits_type;
    typedef traits_type::int_type  int_type;

    buf(std::vector<std::ofstream> &buf) {
        for (std::ofstream &os : buf)
            buffers.push_back(os.rdbuf());
    }

    void attach(std::streambuf *b) { buffers.push_back(b); }

    int_type overflow(int_type c) {
        bool eof = false;
        for (std::streambuf *buf : buffers) 
            eof |= (buf -> sputc(c) == traits_type::eof());
        return eof ? traits_type::eof() : c;
    }   
};

class stream : public std::ostream { 
    std::vector<std::ofstream> streams;
    buf outputs;
public:   
    stream(std::initializer_list<std::string> names)
        : streams(names.begin(), names.end()), 
          outputs(streams), 
          std::ostream(&outputs) 
    { }
    void attach(std::ostream &b) {
        outputs.attach(b.rdbuf());
    }
};
}

int main() { 
    multi::stream icl({"c:\\out1.txt", "c:\\out2.txt"});
    icl.attach(std::cout);

    icl << "Blah blah blah" << std::endl;
} 
```

如您所见，这已经接受了操纵器（它应该与*任何*操纵器一起使用，而不仅仅是`std::endl`）。如果您想写入多个文件（可以/可以作为 fstreams 打开的东西），您可以在构造函数中指定任意数量的这些名称（当然，在您的系统施加的限制范围内）。对于您不一定有文件名之类的东西，您可以`std::cout`按照最初的意图使用。`std::cerr``attach`

我想我应该补充一点，我对现状并不完全满意。这样做需要进行一些相当认真的重写，但经过一番思考，我认为“正确”的方法可能是让`multi::stream`ctor 成为可变参数模板，因此您可以执行以下操作`multi::stream icl("c:\\out1.txt", std::cout);`：它会根据参数的类型整理出如何使用每个参数。我可能会在不久的将来更新此答案以包含该功能。

至于第二个问题，我已经写[了另一个涵盖基本思想的答案](https://stackoverflow.com/questions/5280858/indenting-paragraph-with-cout/5282027#5282027)，但可能有点过于复杂，所以你关心的部分可能会在洗牌中迷失，可以这么说 - 它有相当多的逻辑来处理您并不真正关心的行长度（但确实会产生带有指定前缀的每个输出行，就像您想要的那样）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T19:51:17.453

你可能需要这样的东西：

```
class OutputMan {
    std::vector<std::ostream*> m_Streams;

public:
    void attach(std::ostream *os) {
        m_Streams.push_back(os);
    }

    template <typename T>
    OutputMan &operator<<(const T &t) {

        for (int i=0; i<m_Streams.size(); i++)
            *m_Streams[i] << t;

        return *this;
    }
};

int main() {
    ofstream file("test.txt");

    OutputMan x;
    x.attach(&cout);
    x.attach(&cerr);
    x.attach(&file);

    x << "Hello" << 123;
} 
```

为简单起见，我使用了`std::ostream*`. 接受`<<`我超载的东西`operator<<`。

*注意：如果您想`OutputMan`接受`std::endl`以及其他内容，请阅读[此处](https://stackoverflow.com/questions/1134388/stdendl-is-of-unknown-type-when-overloading-operator)。*

# delphi - Delphi搜索和替换代码不起作用

> ID：16135373
> 
> 赞同：0
> 
> 时间：2013-04-21T19:38:23.683
> 
> 标签：delphi

我正在尝试使此代码正常工作。这是一个标准的搜索和替换功能。

由于某种原因，我根本没有收到任何错误，但文本文件中没有任何变化。

这是完整的代码：

```
procedure FileReplaceString(const FileName, searchstring, replacestring: string);
var
  fs: TFileStream;
  S: string;
begin
  fs := TFileStream.Create(FileName, fmOpenread or fmShareDenyNone);
  try
    SetLength(S, fs.Size);
    fs.ReadBuffer(S[1], fs.Size);
  finally
    fs.Free;
  end;
  S  := StringReplace(S, SearchString, replaceString, [rfReplaceAll, rfIgnoreCase]);
  fs := TFileStream.Create(FileName, fmCreate);
  try
    fs.WriteBuffer(S[1], Length(S));
  finally
    fs.Free;
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
  var Path, FullPath:string;
begin
  Path:= ExtractFilePath(Application.ExeName);
  FullPath:= Path + 'test.txt';
  FileReplaceString(FullPath,'changethis','withthis');

end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T19:46:23.393

原因是`S`,`searchstring`和`replacestring`是 Unicode 字符串（例如，“Test” 是`54 00 65 00 73 00 74 00`），而文本文件可能是 UTF-8 或 ANSI 文件（例如，“Test” 是`54 65 73 74`）。

这意味着存储在其中的值`S`将被高度损坏（您获取 UTF-8 文本的字节并将它们解释为 Unicode 文本的字节）！在`Test`示例中，您将得到`敔瑳??`最后两个字符是随机的（为什么？）。

要检验这个假设，只需声明`S`为`AnsiString`，那么它应该可以工作。

当然，如果你需要 Unicode 支持，你需要做一些 UTF-8 编码/解码。解决您的问题的最简单方法是使用`TStringList`; 然后您就可以免费获得所需的一切。

# algorithm - 使用求根算法找到多个根

> ID：16135374
> 
> 赞同：3
> 
> 时间：2013-04-21T19:38:28.507
> 
> 标签：algorithm, equation-solving

找到具有多个根的方程的根的最佳方法是什么。我知道没有一种方法可以解决每个方程，并且您必须使用多个方程，但是我找不到可以在最简单的实例中求解多个根的求根算法。

例如：`y = x^2`

尽管求解像这样的基本方程的根求解算法很有帮助，但它需要我可以适应以求解具有两个以上根的方程。

还要注意的一件事是，这些方程不会是典型的多项式，但可能是诸如`ln(x^2) + x - 15 = 0`

什么是可以解决此问题的求根算法，或者您如何编辑诸如二分法/牛顿/布伦特方法之类的求根算法来解决此问题，（假设我是正确的，牛顿和布伦特的方法只能解决为一个根）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:03:10.640

底线：您需要自己隔离根源。

细节取决于算法：如果您使用二分法或布伦特方法，您需要提出一组间隔，每个间隔都包含一个唯一的根。如果使用牛顿法，您需要提出一组起始估计（因为它会收敛到给定起点*的*根，并且在不同的起点下，它可能会或可能不会收敛到不同的根）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T23:54:32.850

正如大家所说，不可能提供一个通用的算法来找到所有或一些根（其中一些大于一）。一些是多少根？通常，您无法找到所有根，因为许多函数将具有无限多个根。

即使像牛顿这样的方法也不总是收敛到一个解决方案。我倾向于喜欢一种好的、相当稳定的方法，它会在合理的情况下收敛到一个解决方案，例如一个已知函数会改变符号的括号。您可以找到这样的代码，它在单根上具有良好的收敛行为，但在函数表现不佳时仍然受到保护，基本上类似于二等分方案。

所以，给定一个不错的求根方案，你可以尝试一些简单的事情，比如通货紧缩。因此，考虑一个简单的函数，例如第一类 Bessel 函数。我将使用 MATLAB 完成所有示例，但是任何具有稳定编写良好的 rootfinder（如 MATLAB 中的 fzero）的工具就足够了。

```
ezplot(@(x) besselj(0,x),[0,10])
grid on 
```

![在此处输入图像描述](https://i.stack.imgur.com/hODXf.jpg)

```
f0 = @(x) besselj(0,x);
xroots(1) = fzero(f0,1)
xroots =
    2.4048 
```

从图中，我们可以看到在 5 或 6 附近有第二个根。

现在，为该根缩小 f0，创建一个基于 f0 的新函数，但该函数在 xroots(1) 处缺少根。

```
f1 = @(x) f0(x)./(x-xroots(1));
ezplot(f1,[0,10])
grid on 
```

![在此处输入图像描述](https://i.stack.imgur.com/1lJT8.jpg)

请注意，在这条曲线中，f0 在 xroots(1) 处的根现在已被删除，就好像它不存在一样。我们能找到第二个根吗？

```
xroots(2) = fzero(f1,2)
xroots =
    2.4048    5.5201 
```

我们当然可以继续，但在某些时候这个方案会因为数值问题而失败。而且这种失败也不会花费太长时间。

更好的方案可能是（对于一维问题）使用括号方案，结合抽样方法。我说得更好，因为它不需要修改初始函数来放气根。（对于 2-d 或更高版本，事情当然会变得更加复杂。）

```
xlist = (0:1:10)';
flist = f0(xlist);

[xlist,flist]
ans =
         0    1.0000
    1.0000    0.7652
    2.0000    0.2239
    3.0000   -0.2601
    4.0000   -0.3971
    5.0000   -0.1776
    6.0000    0.1506
    7.0000    0.3001
    8.0000    0.1717
    9.0000   -0.0903
   10.0000   -0.2459 
```

如您所见，该函数在区间 [2,3]、[5,6] 和 [8,9] 中具有符号变化。可以在括号中搜索的 rootfinder 将在这里进行。

```
fzero(f0,[2,3])
ans =
    2.4048

fzero(f0,[5,6])
ans =
    5.5201

fzero(f0,[8,9])
ans =
    8.6537 
```

只需查找符号更改，然后将已知括号放入根查找器。这将提供尽可能多的解决方案，您可以找到括号。

请注意，上述方案存在严重问题。它将完全找不到像 f(x)=x^2 这样的简单函数的双根，因为不存在符号变化。如果您选择的采样过于粗略，那么您可能会有一个包含两个根的区间，但您不会在端点处看到符号变化。

例如，考虑函数 f(x) = x^2-x，它在 0 和 1 处有单根。但是如果你在 -1 和 2 处对该函数进行采样，你会发现它在两个点上都是正的。没有符号变化，但有两个根。

同样，没有任何方法可以做到完美。您总是可以设计一个会导致任何此类数值方法失败的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T23:00:05.867

我会说没有通用方法可以找到通用方程的所有根。但是，一旦指定了足够的条件，就可以尝试和设计方法。即使是简单的二次方程 ax ² + bx + c = 0 也不是完全无关紧要的，因为实根的存在取决于 b ² -4ac 的符号，这并不立即显而易见。所以有很多技术可以应用，例如[Newton-Raphson](https://en.wikipedia.org/wiki/Newton%27s_method)，但没有针对一般情况的通用方法，特别是对于像 ln(x ² )+x-15 = 0 这样的方程。

# css - 未捕获的 SyntaxError：在 MVC4 中捆绑两个 CSS 文件后出现意外的令牌异常

> ID：16135377
> 
> 赞同：11
> 
> 时间：2013-04-21T19:38:40.407
> 
> 标签：css, asp.net-mvc, optimization, asp.net-mvc-4, bundle

在我的 MVC4 项目中，我捆绑了两个 css 文件。当浏览渲染这个文件时，我得到了两个异常。

```
Uncaught SyntaxError: Unexpected token .
Uncaught SyntaxError: Unexpected token { 
```

我编写了这段代码来捆绑我的 CSS 文件。

```
public static void RegisterBundles(BundleCollection bundles)
{
    bundles.Add(new StyleBundle("~/Content/css")
    .Include("~/Content/css3.css","~/Content/styles.css"));
} 
```

我在我的 _Layout.chshtml 页面中调用它。

```
<head>
   @Scripts.Render("~/Content/css")
</head> 
```

并得到那个例外。

但是，如果我以这种方式调用这些 CSS 文件，那么一切正常。

```
<head>
    <link href="~/Content/css3.css" rel="stylesheet" />
    <link href="~/Content/styles.css" rel="stylesheet" />
</head> 
```

这是我的错误的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/B9sX8.png)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-21T22:24:59.513

这是因为它正在渲染一个`<script>`标签。它应该`@Styles.Render`代替`@Scripts.Render`.

# asp.net-mvc-3 - MVC 3、代码优先和示例数据

> ID：16135383
> 
> 赞同：1
> 
> 时间：2013-04-21T19:39:10.573
> 
> 标签：asp.net-mvc-3, code-first, sample-data

我使用代码优先，并试图生成一些示例数据，但被卡住了。

```
 var ts = new List<VehicleType>
        {       new VehicleType { TypeName = "Car" },
                new VehicleType { TypeName = "Truck" },
                new VehicleType { TypeName = "Van" },
                new VehicleType { TypeName = "SUV" },
                new VehicleType { TypeName = "RV" }
            };

        var mr = new List<Manufacturer>{
                new Manufacturer { ManufacturerName = "Ford" },
                new Manufacturer { ManufacturerName = "Dodge" },
                new Manufacturer { ManufacturerName = "Hyundai" },
                new Manufacturer { ManufacturerName = "Mazda" },
                new Manufacturer { ManufacturerName = "Honda" },
                new Manufacturer { ManufacturerName = "Lexus" },
                new Manufacturer { ManufacturerName = "Cadillac" },
                new Manufacturer { ManufacturerName = "Jayco" }
    };

        var vm = new List<VehicleModel>{
                new VehicleModel { ModelName = "Focus" },
                new VehicleModel { ModelName = "Elantra" },
                new VehicleModel { ModelName = "3" },
                new VehicleModel { ModelName = "4X4" },
                new VehicleModel { ModelName = "CRX" },
                new VehicleModel { ModelName = "Element" },
                new VehicleModel { ModelName = "SE 541" },
                new VehicleModel { ModelName = "LE 4X" }
    };

        new List<Inventory>
        {
            new Inventory {VehicleModel = vm.Single(g => g.ModelName == "Focus"), Manufacturer = mr.Single(g => g.ManufacturerName == "Ford"), VehicleType = ts.Single(g => g.TypeName == "Car"), Price = 10999, Mileage = 241092, Year = 2001, Description = "Includes all G37x AWD Sport standard equipment FORD", Colour = "Tan", CarImageUrl = "/Content/Images/car1.jpg", DateReceived = "01/06/2011"}, 

}.ForEach(a => context.Inventorys.Add(a)); 
```

这工作正常。我的 Inventory 表中填充了来自其他表（VehicleType、Manufacturer 和 VehicleModel）的数据。以下是他们的模型：

```
public class Manufacturer
{
    [Key]
    public int ManufacturerId { get; set; }
    public string ManufacturerName { get; set; }

}

public class VehicleModel
{
    [Key]
    public int ModelID { get; set; }
    public string ModelName { get; set; }
}
public class VehicleType
{
    [Key]
    public int TypeId { get; set; }
    public string TypeName { get; set; }
} 
```

现在让我们说制造商模型除了制造商名称之外还有另一个属性，假设它还有制造商位置。当我尝试将该属性添加到库存列表中时：

```
new List<Inventory>
        {
new Inventory {VehicleModel = vm.Single(g => g.ModelName == "Focus"), Manufacturer = mr.Single(g => g.SomeAttributeFromManufacturerTable) 
```

制造商表中的所有属性都会出现，但在我使用其中一个属性后，似乎没有机会输入其余属性。这是因为它希望我输入 ManufacturerId 属性，它会通过其主键自动关联属性上的其余部分吗？我希望我说得通，我觉得这很难解释。

# sinatra - Sinatra：找不到模板引擎：虾

> ID：16135385
> 
> 赞同：0
> 
> 时间：2013-04-21T19:39:17.000
> 
> 标签：sinatra, prawn

我是 Sinatra 和虾的新手。我成功使用了 erb 和 xmm/builder 模板。现在尝试使用虾工作来生成pdf。

收到错误：`Template engine not found: prawn`

代码：

```
require 'rubygems'
require 'sinatra'
require 'sinatra/prawn'

set :prawn, { :page_layout => :portrait }

get '/pdf' do
  content_type 'application/pdf'
  prawn :pdf1
end 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:19:29.517

找到它：来自 sbfaulkner 的 gem 不适用于当前版本的 Sinatra。

修复：从 danielberkompas 安装分叉的 gem，如下所示：

```
gem install dberkom-sinatra-prawn -s http://gems.github.com 
```

见[问题 6](https://github.com/sbfaulkner/sinatra-prawn/issues/6)

然后上面的代码工作正常。

# cakephp - 从带有 i18n 数据库表的两个表转换 (cakePHP)

> ID：16135386
> 
> 赞同：1
> 
> 时间：2013-04-21T19:39:24.737
> 
> 标签：cakephp, internationalization

我有四张桌子：

**gallery_categories 表：** id (int); 标题（varchar）；

**画廊图片表：** id（int）；标题（varchar）；

**gallery_categories_gallery_pictures 表联合上表：** gallery_category_id (int); Gallery_picture_id (int);

**和 i18n 表：** id (int) locale (varchar) model (varchar) foreign_key (int) field (varchar) content (text)

我试过了：

```
$this->GalleryCategory->bindModel(array(
            'hasOne' => array(
                'GalleryCategoriesGalleryPicture',
                'GalleryPicture' => array(
                    'className' => 'GalleryPicture',
                    'foreignKey' => false,
                    'conditions' => array('GalleryPicture.id = GalleryCategoriesGalleryPicture.gallery_picture_id')
            ))));
            $galleryCategories = $this->GalleryCategory->find('all', array(
                'fields' => array('GalleryCategory.*','GalleryPicture.*')
            )); 
```

但它始终返回正确的类别表字段和错误的图片表字段......类别字段包含正确的翻译单词。Pictrures 字段包含错误的翻译字词。

模型：

```
class GalleryCategory extends AppModel
{
    public $tablePrefix = 'ef_';
    var $name = 'GalleryCategory';

    public $actsAs = array('Translate' => array(
                                                'title'             => 'titleTranslation'
                                                )
                            );
}

class GalleryPicture extends AppModel
{
    public $tablePrefix = 'ef_';
    var $name = 'GalleryPicture';

    public $actsAs = array('Translate' => array(
                                                'title'             => 'titleTranslation'
                                                )
                            );
} 
```

我怎样才能从两个表中得到正确的翻译词？

ps：“i18n 数据库表”的翻译仅适用于一个表（exp：仅 GalleryCategory 或仅 GalleryPicture）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:40:51.500

翻译不适用于关联模型，请参阅[此处的最后几行](http://book.cakephp.org/2.0/en/core-libraries/behaviors/translate.html#retrieve-all-translation-records-for-a-field)：

> 请注意，只有您直接在其上执行的模型的字段`find`才会被翻译。通过关联附加的模型不会被翻译，因为当前不支持在关联模型上触发回调。

**更新** 这可能很棘手，因为您有一个 HABTM 关系 - 以前我通过向模型的 afterFind 回调添加第二个数据检索来解决这个问题，但这是一个更简单的关联。希望这可以帮助。

# actionscript-3 - 有什么方法可以禁用 AS3 中 textField 的“Page Down/Page Up”键

> ID：16135391
> 
> 赞同：0
> 
> 时间：2013-04-21T19:39:47.617
> 
> 标签：actionscript-3, textfield

当在多行文本字段上按下 Page Down 键时会出现一个小问题，在我的例子中是输入类型的文本字段。

问题是按下Page Down后，似乎在文本末尾添加了一个额外的空行。

我想知道是否有可能实际禁用文本字段的 Page Down 和 Page Up 键功能，因为我真的不需要它们，这个小麻烦的问题真的让我很烦恼。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:57:52.663

尝试使用键盘事件。制作一个针对 page_down 键进行测试的键盘事件，并在条件语句的构造函数代码中说明`event.preventDefault()`这将阻止任何 page_down 键的作用。

# jquery - 为什么我无法访问此处的元素（jQuery 插件）

> ID：16135392
> 
> 赞同：0
> 
> 时间：2013-04-21T19:39:54.070
> 
> 标签：jquery, design-patterns, object, plugins

我正在尝试一种编写 jQuery 插件的新方法。

```
var $detailbox = $('.detailBox') ;

TargetList.init($detailbox); 
```

**目标列表：**

```
TargetList = {

    init: function (elem) {

        console.log($(elem));

    }
}; 
```

elem 将返回：

```
[section#detailBox. detailBox, selector: ".detailBox", context: document, jquery: "1.9.1", constructor: function, init: function…] 
```

第一个问题：这是什么？

第二个也是更重要的问题：为什么会`element.id`返回 undefined？

我的猜测是我不能简单地将 n 对象传递给`init()`方法并期望我可以控制它？但是，假设我想保持这种结构，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:44:24.930

`console.log($(elem));`这只是在控制台上打印 jquery 对象。

看看这个：

```
[section#detailBox. detailBox, selector: ".detailBox", context: document, jquery: "1.9.1", constructor: function, init: function…] 
```

表明您已`init`成功通过您的元素

**访问 ID：**

尝试

```
$(elem).attr('id'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:45:19.673

记录的对象是`jQuery Object`

对于第二个问题，`id is not a method of jQuery`.It 是 a 的属性`DOM object`。

所以试试这个

`$(elem)[0].id` **或者** `$(elem).attr('id')`

# magento - 如果产品页面上存在分层定价，则隐藏 Magento 常规价格

> ID：16135393
> 
> 赞同：2
> 
> 时间：2013-04-21T19:39:54.847
> 
> 标签：magento

我试图弄清楚只有在产品存在分层定价的情况下，如何在产品页面上隐藏正常价格。任何提示将不胜感激。

我一直在研究以下代码，以在分层定价时有条件地显示价格，但无法使其正常工作。

`<?php if (count($_tierPrices) == 0): ?> <?php echo $this->getPriceHtml($_product) ?> <?php endif; ?>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:57:02.113

等级价格是在选择一定数量的产品时添加的东西。因此，对于默认产品，不应有任何等级价格。选择特定产品时添加层级价格

如果存在任何等级价格，则有一个显示等级价格的块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-05T05:31:49.713

在 catalog/product/view/type/default.phtml 中添加条件语句

```
<?php if (count($this->getTierPrices()) == 0): ?>
<?php echo $this->getPriceHtml($_product) ?>
<?php endif;?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T03:09:21.847

用条件语句包装代码`catalog/product/view/type/default.phtml`：

```
<?php if (count($_tierPrices) == 0): ?>
<?php echo $this->getPriceHtml($_product) ?>
<?php endif; ?> 
```

# html-email - 使用 Jinja 渲染带有内联 CSS 的 HTML 电子邮件

> ID：16135394
> 
> 赞同：8
> 
> 时间：2013-04-21T19:39:55.930
> 
> 标签：html-email, template-engine, jinja2

如您所知，如果您要发送 HTML 电子邮件，所有 CSS 样式都必须内联在元素本身上，例如`<p style='font-family: Helvetica'>`

有没有一种方法可以使用 Jinja 从 Jinja 模板轻松创建 HTML 电子邮件正文，而无需在单个模板中多次重复 CSS 样式？

我想将这些样式设置为变量，例如

```
{% set FONT_STYLE = 'font-family: Helvetica; color: #111' %} 
```

然后在模板中我可以做

```
<p style='{{ FONT_STYLE }}'>My paragraph here.</p> 
```

有更好的想法吗？也许是一个解析 CSS 规则的库，它接受 HTML 内容和 CSS 文件并将计算的 CSS 规则一个一个绑定到 HTML 元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T12:13:28.893

看看[`premailer`](https://pypi.python.org/pypi/premailer/)哪个将 CSS 块转换为样式属性。您可以获得漂亮的 html 并将其转换为带有`premailer`.

# android - 如何显示 Activity 覆盖在另一个 Activity 上？

> ID：16135395
> 
> 赞同：0
> 
> 时间：2013-04-21T19:40:02.907
> 
> 标签：android, android-activity

我想在按下扬声器按钮时显示音量条（SeekBar）。仅为 SeekBar 更改整个 Activity 可能不是一个好的决定。

我认为覆盖 SeekBar 将是最好的解决方案。（但是怎么做？）

你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:54:22.087

如果用户在短时间内没有触摸屏幕，您可以使用自己的自定义对话框并自动关闭它，但我想问一下您为什么需要它。

原因：并非所有 Android 设备都有音量按钮。

如果您愿意，您可以轻松地将音量控制设置为媒体而不是铃声音量，这样如果用户访问音量，它将显示媒体的控制。这是你如何做到的：

```
setVolumeControlStream(AudioManager.STREAM_MUSIC); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:34:45.557

我认为您应该使用`Dialog`带有`SeekBar`集合作为内容的自定义。

作为旁注，请记住删除向您的窗口请求正确功能的标题：

```
getDialog().getWindow().requestFeature(Window.FEATURE_NO_TITLE); 
```

# java - java中日期格式的模式定位

> ID：16135398
> 
> 赞同：0
> 
> 时间：2013-04-21T19:40:13.547
> 
> 标签：java, date, format, locale

在 java 中，您可以通过执行以下操作获取基于特定语言环境的日期格式：

```
Locale locale = new Locale("en", "UK");
DateFormat format = DateFormat.getDateInstance(DateFormat.MEDIUM, locale);
System.out.println( ((SimpleDateFormat)format).toPattern()); 
```

这打印

```
dd-MMM-yyyy 
```

这种模式是否硬编码在某个属性文件中？有什么方法可以扩展 java 机制并应用我自己的模式（依赖于语言环境），所以当我运行上面的代码时，我得到：

```
dd-MM-yyyy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:11:31.293

这个想法是始终使用相同的格式，在我的例子中是 DateFormat.SHORT。

我最终使用短格式并将包含 2 个字符的默认格式替换为 4 个字符。

如果有人想知道，格式确实是硬编码在 FormatData_XX_YY 类下的 sun.text.resources 包中（例如 FormatData_en_UK）。

# php - 当自动提交关闭时，是否可以使用第一个 MySQL 选择的值作为第二个条件？

> ID：16135399
> 
> 赞同：1
> 
> 时间：2013-04-21T19:40:23.307
> 
> 标签：php, mysql, select, autocommit

首先，我仍在学习如何使用 PHP/MySQL ......所以在选择时或仅在插入/更新时是否可以使用事务？

如果可能，那么我将如何解决这个问题（伪代码）：

关闭自动提交

从身份验证中选择 id，其中别名 = [用户输入]

从 id = ID FROM ABOVE SELECT 的标志中选择活动

如果：没有错误提交

其他：回滚

从第二个选择中获取行

* * *

以上是否可能与MySQL（请使用PHP语法）有关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:44:15.717

在这里使用事务将毫无用处，因为您的查询仅处理`SELECT`.

这里有2个选择。（请注意，我只包含了 SQL 代码。）

**1\. 可以使用`SELECT`inside`SELECT`语句。**

```
SELECT active
  FROM flags
 WHERE id IN (
               SELECT id
                 FROM auth
                WHERE alias = 'userinput'
             ); 
```

**2\. 其他可能性是使用`JOIN`.**

```
 SELECT f.active
      FROM flags f
INNER JOIN auth a
        ON f.id = a.id
     WHERE a.alias = 'userinput'; 
```

在这里，别名如`f`和`a`用于指定表。

# mapping - 如果没有唯一的 URL 路径，如何在 Moovweb 项目中设置映射文件？

> ID：16135401
> 
> 赞同：3
> 
> 时间：2013-04-21T19:40:58.433
> 
> 标签：mapping, moovweb

我想在我的 Moovweb 项目中设置 mappings.ts 文件。[关于如何设置映射文件](https://stackoverflow.com/questions/15858601/what-is-the-mappings-ts-file-and-how-should-it-be-set-up-in-tritium/)的答案提供了丰富的信息，但侧重于 URL 路径。

我的网站有很多看起来相同的页面（因此可能可以使用相同的 Tritium 文件进行转换），但是这些 URL 没有共同的元素（例如，它们在产品的路径中没有很好的 /product/页）。

有什么方法可以在我的网站上映射页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T00:25:03.937

您可以通过检查元素是否存在并在该范围内导入来基于页面元素而不是 URL 导入 Tritium 文件。我已经看到它以这种格式完成：

```
$("./div[@id='product_element']") {
  $page_type = "product"
}

...

match($page_type) {
  with(/product/) {
    @import "product.ts"
  }
} 
```

当您的 URL 结构不是特别一致时，这可能是区分页面类型的好方法。

# asp.net-mvc - 一个视图中的 ASP NET MVC 2 模型

> ID：16135403
> 
> 赞同：2
> 
> 时间：2013-04-21T19:41:04.963
> 
> 标签：asp.net-mvc, asp.net-mvc-2, models

我正在尝试将两个模型传递给局部视图。问题是在我的视图中我只能找到：“Model.Class1”和“Model.Class2”，而我实际上想要获取 Model.Class2.UserID ..

我确实让它工作了，但后来它抱怨 GetEnumerator() 什么的。还尝试了元组，这对我来说根本不起作用。对 ASP NET MVC 来说非常新，所以我很菜鸟！：） 请回复！

型号类：

```
 public class Class1ANDClass2
    {
        public IEnumerable<Klubben.Models.Class1> class1 { get; set; }
        public IEnumerable<Klubben.Models.Class2> class22{ get; set; }
    } 
```

我的观点：

```
 @model IEnumerable<Klubben.Models.Class1ANDClass2>////(Contains classes Omraade and Medlem)

   @foreach (var item in Model)
   {
    if(item.Class1.UserID >= 1)  ////This does not work, which i need it to do
       ///For example show item.Class2.Username

    } 
```

我的控制器：

```
public ActionResult PartialView()
        {
            try
            {
                IEnumerable<Class1> c1 = some object
                IEnumerable<Class2> c2 = some object

                Class1ANDClass2 omt= new Class1ANDClass2();
                omt.Class1 = c1
                omt.Class2 = c2;

                return PartialView("MyPartial", omt);
            }
            catch (Exception feil)
            {
                return PartialView("exception");
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:46:46.797

问题出在你的循环上

```
@model IEnumerable<Klubben.Models.Class1ANDClass2>////(Contains classes Omraade and Medlem)

@foreach (var item in Model.class1)
{
 if(item.UserID >= 1)  ////This does not work, which i need it to do
    ///For example show item.Username

}

// similarly for class2

@foreach (var item in Model.class2)
{
  if(item.aProperty >= 1)  ////This does not work, which i need it to do
    ///For example show item.otherProperty

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:15:48.937

您正在从您的操作方法返回一个名为 omt 的对象。但是您的观点期待 IEnumerable 。

将视图模型声明更改为

```
**@model Klubben.Models.Class1ANDClass2**

@foreach (var item in Model.Class1)
{
if(item.Class1.UserID >= 1)  ////This does not work, which i need it to do
   ///For example show item.Class2.Username
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-12T04:38:23.960

您可以使用**Tuple**在**视图**中访问**多个模型**，如下所示：

 **```
@model Tuple<FirstModel, SecondModel>

<div> 
    @Model.Item1.FirstModelProp
    @Model.Item2.SecondModelProp
</div> 
```**

# sql - 排除重复结帐——SQL

> ID：16135406
> 
> 赞同：1
> 
> 时间：2013-04-21T19:41:44.933
> 
> 标签：sql, sql-server, sql-server-2012

运行 SQL Server 2012

我有一个查询，计算已签出一本书的客户数量。它还计算了两次检查同一本书的人。所有这些都添加到一个列`Customers Checked Out.`中 问题是我不希望它计算那些已经多次签出该书的人。

例如，

```
Book Title                  Customers Checked OUt 
Title of Book1                         2
Title of Book2                         3
TItle of Book3                         1 
```

在这种情况下，书 1 的标题实际上只签出了一个，但签出了两次。我怎样才能让它说 1 次而不是 2

添加查询

```
SELECT 
    Book.title AS 'Title of Book', 
    COUNT(Book_Rental.Book_id) AS 'Customers Checked Out'
FROM Book
JOIN Book_Rental ON Book.Book_id = Book_Rental.Book_id
JOIN Customer ON Book_Rental.Customer_id = Customer.customer_id
GROUP BY Book.Title
ORDER BY [# of Customers Rented] DESC; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:49:52.613

据推测，您的查询类似于：

```
select BookTitle, count(*)
from CheckOuts
group by BookTitle 
```

您想将 更改`count()`为`count(distinct)`：

```
select BookTitle, count(distinct customerId)
from CheckOuts
group by BookTitle 
```

由于您提供了查询，我认为这就是您想要的：

```
SELECT Book.title AS 'Title of Book', 
       COUNT(distinct Book_Rental.Customer_id) AS 'Customers Checked Out'
FROM Book
JOIN Book_Rental ON Book.Book_id = Book_Rental.Book_id
JOIN Customer ON Book_Rental.Customer_id = Customer.customer_id
GROUP BY Book.Title
ORDER BY [# of Customers Rented] DESC; 
```

# http-live-streaming - HTTP Live Streaming 中的本地化视频资源

> ID：16135409
> 
> 赞同：2
> 
> 时间：2013-04-21T19:42:00.303
> 
> 标签：http-live-streaming

我正在尝试使用 HTTP Live Streaming 技术创建 VOD。到目前为止一切正常，**除了提供本地化的视频资源**。

我想通过 HTTP Live Streaming 显示（PowerPoint）演示文稿（作为视频）。幻灯片有**英语和德语版本**。它们也是英语和德语的音频部分。

出于测试目的，我将它嵌入到一个简单的网页中，并尝试在我的 iPhone 上查看它，这很有效，**除了切换（或默认显示）正确的 video 语言**。我只能将音频资源切换为德语。（德语作为我的默认 iPhone 语言也未被检测到。）

我已经阅读了关于 HTTP Live Streaming 的几乎整个草稿，但他们没有关于它是否应该工作并且我做错了什么或者这不应该工作的信息。在第[3.4.10 和 3.4.10.1](https://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-11#section-3.4.10)段中，有一些关于多个组的内容，似乎我可以将 LANGUAGE 键应用于 VIDEO 资源。（例如，通常也应该可以为不同的摄像机角度提供多个视频流，所以为什么不提供不同的语言）

所以现在这是我的`*.m3u8`主播放列表文件：

```
#EXTM3U
#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="audio-all",LANGUAGE="en",NAME="English",AUTOSELECT=YES,URI="en/audio/prog_index.m3u8"
#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="audio-all",LANGUAGE="de",NAME="German",AUTOSELECT=YES,URI="de/audio/prog_index.m3u8"
#EXT-X-MEDIA:TYPE=VIDEO,GROUP-ID="video-low",LANGUAGE="en",NAME="English",AUTOSELECT=YES,URI="en/low/prog_index.m3u8"
#EXT-X-MEDIA:TYPE=VIDEO,GROUP-ID="video-low",LANGUAGE="de",NAME="German",AUTOSELECT=YES,URI="de/low/prog_index.m3u8"
#EXT-X-MEDIA:TYPE=VIDEO,GROUP-ID="video-medium",LANGUAGE="en",NAME="English",AUTOSELECT=YES,URI="en/medium/prog_index.m3u8"
#EXT-X-MEDIA:TYPE=VIDEO,GROUP-ID="video-medium",LANGUAGE="de",NAME="German",AUTOSELECT=YES,URI="de/medium/prog_index.m3u8"
#EXT-X-MEDIA:TYPE=VIDEO,GROUP-ID="video-high",LANGUAGE="en",NAME="English",AUTOSELECT=YES,URI="en/high/prog_index.m3u8"
#EXT-X-MEDIA:TYPE=VIDEO,GROUP-ID="video-high",LANGUAGE="de",NAME="German",AUTOSELECT=YES,URI="de/high/prog_index.m3u8"
#EXT-X-MEDIA:TYPE=VIDEO,GROUP-ID="video-720p",LANGUAGE="en",NAME="English",AUTOSELECT=YES,URI="en/720p/prog_index.m3u8"
#EXT-X-MEDIA:TYPE=VIDEO,GROUP-ID="video-720p",LANGUAGE="de",NAME="German",AUTOSELECT=YES,URI="de/720p/prog_index.m3u8"
#EXT-X-MEDIA:TYPE=VIDEO,GROUP-ID="video-1080p",LANGUAGE="en",NAME="English",AUTOSELECT=YES,URI="en/1080p/prog_index.m3u8"
#EXT-X-MEDIA:TYPE=VIDEO,GROUP-ID="video-1080p",LANGUAGE="de",NAME="German",AUTOSELECT=YES,URI="de/1080p/prog_index.m3u8"
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=128000,CODECS="mp4a.40.2",AUDIO="audio-all"
de/audio/prog_index.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=660000,CODECS="mp4a.40.2,avc1.42e015",AUDIO="audio-all",VIDEO="video-low"
de/low/prog_index.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=800000,CODECS="mp4a.40.2,avc1.42e01e",AUDIO="audio-all",VIDEO="video-medium"
de/medium/prog_index.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=1070000,CODECS="mp4a.40.2,avc1.4d401f",AUDIO="audio-all",VIDEO="video-high"
de/high/prog_index.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=1728000,CODECS="mp4a.40.2,avc1.4d401f",AUDIO="audio-all",VIDEO="video-720p"
de/720p/prog_index.m3u8
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=3300000,CODECS="mp4a.40.2,avc1.4d4029",AUDIO="audio-all",VIDEO="video-1080p"
de/1080p/prog_index.m3u8 
```

根据 Apple 的草案和文档，应该可以提供多个视频流。

我还删除了 LANGUAGE 键，并尝试按照[Apple 的这个示例进行](https://developer.apple.com/library/ios/#technotes/tn2288/_index.html#//apple_ref/doc/uid/DTS40012238-CH1-SOURCECODE13)操作。但我也无法选择不同的视频流。

1.  我究竟做错了什么？
2.  是否可以提供与语言相关的多个流？（尽可能使用 AUDIO 和 SUBTITLE）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T11:54:31.657

如果您想要备用视频文件（超出带宽和质量设置），我认为您应该使用不同的顶级播放列表。

# google-bigquery - 在 BigQuery 中展平嵌套层次结构

> ID：16135410
> 
> 赞同：1
> 
> 时间：2013-04-21T19:42:01.257
> 
> 标签：google-bigquery

我有一个 BigQuery 表，其中包含两个嵌套级别的重复字段层次结构。我需要在内部级别的叶字段上进行自连接（将表与自身连接）。

FLATTEN 子句的使用只会使一个级别变平，我无法弄清楚如何做到这一点。理论上我需要编写嵌套的 FLATTEN，但我无法完成这项工作。

任何帮助，将不胜感激。

例子：

给定以下表结构：

a1，整数 a2，记录（重复） a2.b1，整数 a2.b2，记录（重复） a2.b2.c1，整数

如何编写一个查询，该查询在两侧的 a2.b2.c1 上执行自连接（每个连接）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:32:50.963

嵌套的扁平化——即子查询的扁平化——应该可以工作。请注意，它需要过多的括号。给定架构：

{nested_repeated_f: [ {inner_nested_repeated_f: [ {string_f}]}]}

以下查询将起作用：

```
SELECT t1.f1 FROM (
  SELECT nested_repeated_f.inner_nested_repeated_f.string_f as f1 
  FROM (FLATTEN((
    SELECT nested_repeated_f.inner_nested_repeated_f.string_f
    FROM 
      (FLATTEN(lotsOdata.nested002, nested_repeated_f.inner_nested_repeated_f))
    ), nested_repeated_f))) as t1    
JOIN (
  SELECT nested_repeated_f.inner_nested_repeated_f.string_f as f2
  FROM (FLATTEN((
    SELECT nested_repeated_f.inner_nested_repeated_f.string_f
    FROM 
      (FLATTEN(lotsOdata.nested002, nested_repeated_f.inner_nested_repeated_f))
    ), nested_repeated_f))) as t2
on t1.f1 = t2.f2 
```

# ruby-on-rails-3 - 带有内联附件的 ActionMailer 邮件不起作用

> ID：16135416
> 
> 赞同：1
> 
> 时间：2013-04-21T19:42:29.290
> 
> 标签：ruby-on-rails-3, actionmailer

我正在使用导轨 3.2.8。这是邮件程序类的样子：

```
class Newsletter < ActionMailer::Base
  default :charset => "UTF-8",
          :from => "\"Example\" <info@example.com>"

  def campaign
    attachments.inline['image1.gif'] = File.read("#{Rails.root}/app/assets/images/image1.gif")
    attachments.inline['image2.gif'] = File.read("#{Rails.root}/app/assets/images/image2.gif")
    attachments.inline["image3.jpg"] = File.read("#{Rails.root}/app/assets/images/image3.jpg")

    mail(:to => "mytest@example.com", :subject => "Test")
  end
end 
```

当我发送它时，我只收到一个没有主体的附件。当我查看邮件源时，我看到了其他部分，但我不明白为什么它们没有按应有的方式显示。

我检查了其他类似的问题，但没有任何帮助。

请帮我。您需要更多代码来解决问题吗？

问候， 托马兹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-05T10:16:05.293

您是否在邮件内容视图文件中提到了附件？

在您的邮件内容视图文件中添加此代码：

```
<%= image_tag attachments['image1.gif'].url %> 
<%= image_tag attachments['image2.gif'].url %> 
<%= image_tag attachments['image3.gif'].url %> 
```

您还可以查看更详细的说明：http: [//technical-feeds.blogspot.in/2014/02/how-to-add-attachments-and-inline.html](http://technical-feeds.blogspot.in/2014/02/how-to-add-attachments-and-inline.html)

# javascript - 使用 JQuery 访问页面上的所有 Facebook Like 按钮

> ID：16135418
> 
> 赞同：0
> 
> 时间：2013-04-21T19:42:44.533
> 
> 标签：javascript, jquery, facebook-javascript-sdk

我正在尝试编写一个脚本，该脚本可以使用 jQuery 动态访问网页上 Facebook Like 按钮的所有实例，但无法找出正确的选择器。

点赞按钮的上下文可以在 Facebook 网站上：

```
<span><a href="#" role="button" aria-live="polite" title="Like this" data-ft="{&quot;tn&quot;:&quot;&gt;&quot;}" class="UFILikeLink" id=".reactRoot[0]">Like</a></span> 
```

或第三方网站（类似按钮似乎嵌入在 iFrame 中：

```
<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fpages%2FLike-Button%2F122072747813316&amp;layout=standard&amp;show_faces=false&amp;width=1040&amp;action=like&amp;colorscheme=light&amp;height=35" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:1020px; height:35px; margin-left: 10px;" allowtransparency="true"></iframe> 
```

对于后者，我假设我需要首先访问 src 属性等于 FB 的 iframe，例如 url（即[http://www.facebook.com/plugins/like.php?](http://www.facebook.com/plugins/like.php?)）。

我想更改每个赞按钮的背景颜色。我如何在 Facebook 或第三方网站上找到每个赞按钮的实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:53:39.587

您尝试做的事情受到 facebook 品牌指南和使用条款的限制。

[https://developers.facebook.com/docs/guides/policy/examples_and_explanations/branding/](https://developers.facebook.com/docs/guides/policy/examples_and_explanations/branding/)

# java - 请解释最终的 AtomicReference

> ID：16135424
> 
> 赞同：4
> 
> 时间：2013-04-21T19:43:21.427
> 
> 标签：java, final, java.util.concurrent, atomicreference

有人可以解释一下吗：

```
final AtomicReference<Integer> atomicReference = new AtomicReference<>(1);
atomicReference.set(2); 
```

final 在什么意义上使用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-21T19:45:34.570

> final 在什么意义上使用？

变量本身是最终的。您不能更改变量的值来引用不同的 `AtomicReference`对象。

调用`set`对象并因此更改对象中的数据*根本*不是一回事。

用更现实的说法，我可以给你我的家庭住址，然后说，“你不能改变我住的地方。” 不过，这并不能阻止你把我的前门漆成绿色（即改变地址所指的房子。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T19:44:54.730

`final`阻止您更改*变量*以引用不同的实例。
它不会阻止您*改变*现有实例。

这意味着你不能写

```
atomicReference = something; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T19:45:21.220

`final`意味着`atomicReference`不能**再**引用另一个`AtomicReference`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T19:45:33.957

`final`只是意味着不能重新分配变量/对象。

但是你可以通过 setter 来修改你的对象，例如

一探究竟：

[http://en.wikipedia.org/wiki/Final_(Java)](http://en.wikipedia.org/wiki/Final_%28Java%29)

# javascript - 使用 Moment JS 解析序数时的令人费解的行为。漏洞？

> ID：16135430
> 
> 赞同：4
> 
> 时间：2013-04-21T19:44:22.340
> 
> 标签：javascript, momentjs

我只是想从 a`moment`到 a`string`然后回到 a `moment`。

但它并没有真正起作用：

```
f = 'dddd MMMM Do, YYYY'
s = 'Friday May 3rd, 2013'

d = moment().format(f)            # Sunday April 21st, 2013 
moment(d, f).format(f)            # Monday April 1st, 2013

moment(s, f)                      # Friday May 3rd, 2013
    .format(f)                    # Wednesday May 1st, 2013 
```

它总是将序数解析为每月的第一天。

我的格式有问题吗？或者我期望`format()`如何工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T15:32:37.260

这个问题是在[这里](https://github.com/timrwood/moment/issues/637)提出的。

解决方案是在解析时忽略序号日期的字母部分，使用`DD`代替`Do`.

```
var f1 = 'dddd MMMM Do, YYYY';
var f2 = 'dddd MMMM DD, YYYY';

var a = moment().format(f1);
console.log(a);                    // Thursday June 20th, 2013

var b = moment(a, f1).format(f1);
console.log(b);                    // Saturday June 1st, 2013

var c = moment(a, f2).format(f1);
console.log(c);                    // Thursday June 20th, 2013 
```

如您所见，结果`b`是月份的第一天，因为它不知道如何处理日期编号。但是`c`拿起`20`, 并忽略了额外的`th`字符 - 产生了正确的结果。

# networking - 如何理解在 UDP 中丢失的数据包？

> ID：16135434
> 
> 赞同：0
> 
> 时间：2013-04-21T19:44:58.073
> 
> 标签：networking, udp, social-networking, packet

如何理解 UDP 中丢失的数据包？例如，在聊天应用程序中，如果没有收到一个句子，如何理解它并警告客户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:27:20.573

感谢 safeer，我发现了这一点，我认为这是正确的：如果在 UDP（RTP、TFTP 等）之上运行的高级协议具有某种标识号或序列号或块号，每个数据包都是唯一的，并且以可预测的方式发生变化，然后您可以在自定义列中显示该数字并手动查找丢失的数字，但 UDP 协议本身无法识别丢失的数据包。有可能以某种方式混合 UDP 和 TCP。

# java - 我的 Parcelable 课程有问题吗？

> ID：16135441
> 
> 赞同：0
> 
> 时间：2013-04-21T19:45:39.213
> 
> 标签：java, android, android-intent, parcelable

**我想知道我的课程是否有问题，因为我无法将额外的（由 Note 对象组成）从一个活动传递给另一个**

这是我的 Parcelable 类的代码： 注意：

```
public class Note implements Parcelable {

    public static int compteur = 0;
    long id;
    String summary;
    String details;

    public Note(String summary, String details) {
        super();
        compteur = compteur + 1;
        this.id = compteur;
        this.summary = summary;
        this.details = details;
    }

    public Note() {
        super();
    }

    ///// getters and settters /////

    @Override
    public String toString() {
        return "Note " + id + " (" + summary + ") --> Details: " + details;
    }

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int arg1) {
        // TODO Auto-generated method stub
        dest.writeLong(id);
        dest.writeString(summary);
        dest.writeString(details);

    }

    public static final Parcelable.Creator<Note> CREATOR = new Parcelable.Creator<Note>() {

        @Override
        public Note createFromParcel(Parcel in) {
            // TODO Auto-generated method stub
            return new Note(in);
        }

        public Note[] newArray(int size) {
            return new Note[size];
        }
    };

    private Note(Parcel in) {
        this.id = in.readInt();
        this.summary = in.readString();
        this.details = in.readString();
    }
} 
```

或者问题可能出在其他任何地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:50:44.533

尝试使您的 Note 构造函数接受 Parcel 公开。

```
 public Note(Parcel in) {
        this.id = in.readInt();
        this.summary = in.readString();
        this.details = in.readString();
    } 
```

# javascript - html流体表格结构呈现图像

> ID：16135442
> 
> 赞同：1
> 
> 时间：2013-04-21T19:45:41.590
> 
> 标签：javascript, jquery, html, tabular

我正在寻找一种以**表格结构呈现图像列表的简洁方法。**
问题是，它需要针对低分辨率屏幕和窗口大小进行调整（当窗口未最大化时）。

[例如， Yahoo Images](http://images.search.yahoo.com/search/images;_ylt=A0PDoKsSQXRRa1AATg.LuLkF?p=foo&ei=utf-8&fr=sfp-img&fr2=&y=Search)很好地实现了它，尽管我正在寻找一些简单的东西。

我该如何实现这种行为？

# android - 防止兄弟姐妹上的 OnTouchEvent

> ID：16135443
> 
> 赞同：0
> 
> 时间：2013-04-21T19:45:48.637
> 
> 标签：android, touch-event, motionevent

如何从视图的兄弟姐妹中阻止 onTouchEvent？我有一个带有自定义按钮的 ViewGroup。当按钮收到 OnTouchEvent 时，我想阻止进一步的 OnTouchEvents 转到按钮的兄弟姐妹。我*确实*想继续在按钮中接收 OnTouchEvent。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:07:10.050

我认为您也应该使用自定义`ViewGroup`。为了得到你想要的，你应该重写这个[`onInterceptTouchEvent()`](http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent%28android.view.MotionEvent%29)方法，就像[这里](http://developer.android.com/training/gestures/viewgroup.html#intercept)所说的：

> onInterceptTouchEvent() 方法使父级有机会在其子级之前看到任何触摸事件。如果从 onInterceptTouchEvent() 返回 true，则之前处理触摸事件的子视图会收到一个 ACTION_CANCEL，并且从该点开始的事件将被发送到父视图的 onTouchEvent() 方法进行常规处理。onInterceptTouchEvent() 也可以返回 false 并在事件沿着视图层次结构向下移动到通常的目标时简单地监视事件，这些目标将使用自己的 onTouchEvent() 处理事件。

基本上，根据您自己的逻辑（按钮`onTouchEvent`等），如果原始坐标不包含在按钮的可见矩形中，您应该指示您`ViewGroup.onInterceptTouchEvent()`返回 true 。`MotionEvent`

# c++ - 通过对基类的引用调用虚函数

> ID：16135446
> 
> 赞同：10
> 
> 时间：2013-04-21T19:46:19.030
> 
> 标签：c++, inheritance, reference

此代码在我运行时拒绝将适当的消息打印到控制台。使用指针而不是引用似乎有效（-> 而不是 .）。我是 OOP 的新手，如果你觉得这很荒谬，请原谅我。

```
#include <iostream>

using namespace std;

class instrument {
public:
    virtual void play(){}
};

class drum : public instrument {
public:
    void play(){
        cout << "dum, dum" << endl;
    }
};

class piano : public instrument {
public:
    void play(){
        cout << "pling" << endl;
    }
};

int main (){
    instrument i;
    piano p;
    drum d;

    instrument &pi = i;
    pi.play();  // -

    pi = p;
    pi.play();  // pling

    pi = d;
    pi.play();  // dum, dum
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-21T19:51:57.597

```
instrument &pi = i; 
```

在这里你`pi`引用`instrument`对象`i`。

```
pi = p; 
```

在这里，您将`piano`对象分配给`p`引用的对象`pi`。引用`pi`不会反弹到`piano`对象。它仍然指代与`instrument`以前相同的对象。只是使用隐式生成的默认赋值运算符为其分配了不同的内容。（在这种情况下，赋值没有任何作用，但是将派生类型分配给基类型通常会导致对象切片。）当您调用`pi.play()`时，引用仍然引用一个`instrument`对象并被`instrument::play`执行。

关键是，虽然您可以获得指向不同类型的不同对象的指针，但您不能对引用执行相同操作。它总是指向同一个对象。您可以通过使用多个引用来修复您的代码：

```
instrument &pi = i;
pi.play();  // -

instrument &pp = p;
pp.play();  // pling

instrument &pd = d;
pd.play();  // dum, dum 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-09T16:37:59.463

```
int main ()
{ 
    instrument i,*pi;
    piano p;
    drum d; 
    pi= &i; 
    pi->play(); // - 
    pi = &p; 
    pi->play(); // pling
    pi = &d; 
    pi->play(); // dum, dum 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-21T11:16:29.370

采用：

```
virtual void play() = 0; 
```

代替：

```
virtual void play(){} 
```

它防止了冗余对象创建的可能性。

# asp.net - 从 asp.net 中的另一个 aspx.vb 页面检索 aspx.vb 页面中全局变量的值

> ID：16135454
> 
> 赞同：1
> 
> 时间：2013-04-21T19:47:23.723
> 
> 标签：asp.net

我在 default.aspx.vb 中声明了一个变量，如下所示：

字符串形式的公共名称

我给它的价值是

名称 = txtname.text

现在我想在另一个名为exam.aspx.vb 的页面上的txtname.text 中有这个值

这怎么可能 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:52:43.607

在这种情况下，使用 Session 变量来访问该值。

这是如何为会话变量赋值

```
Session("name") = txtname.Text; 
```

并在任何其他页面上像这样访问它

```
If Session("name") IsNot Nothing Then
    Dim value As String = Session("name").ToString()
End If 
```

# sql - 查找自动递增字段中插入的值

> ID：16135455
> 
> 赞同：2
> 
> 时间：2013-04-21T19:47:38.110
> 
> 标签：sql, sql-server

我有两张桌子：

*   `Rooms`：
    *   `ID`（自增主键，`int`）
    *   `Topic`( `varchar(50)`)
    *   `MangerId`( `varchar(50)`)
*   `Rooms_Users`：
    *   `UserId`( `varchar(50)`)
    *   `RoomId`( `varchar(50)`)
    *   两个字段一起是主键

我想插入一个房间，但我还必须将马槽插入桌子`rooms_users`。

这是我到目前为止所拥有的：

```
ALTER PROCEDURE [dbo].[Creat_Room]  @MangerId varchar(50) ,@Topic varchar(50)
    AS
BEGIN
    SET NOCOUNT 
    insert into Rooms(ManagerId,Topic) values(@MangerId,@Topic)
    insert into Rooms_Users(UserId,RoomId) values(@MangerId,?????????????)
END 
```

问题是`?????????????`：我不知道放什么我想把我插入的房间放在上面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T19:54:32.343

您可以使用`output`从句。在此处查看 MSDN：[OUTPUT 子句（Transact-SQL）](http://msdn.microsoft.com/en-us/library/ms177564.aspx)

例子：

```
declare @tbl table
(
    NewID int
)

insert into Rooms(ManagerId,Topic)
output inserted.ID into @tbl
values(@MangerId,@Topic) 
```

然后 table 变量将包含赋予您插入的行的新 id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:58:12.353

使用`SCOPE_IDENTITY()`功能：

```
ALTER PROCEDURE [dbo].[Create_Room]  
    @ManagerId varchar(50), 
    @Topic varchar(50)
AS
BEGIN
    DECLARE @NewRoomID INT

    insert into Rooms(ManagerId, Topic) values(@MangerId, @Topic)
    SELECT @NewRoomID = SCOPE_IDENTITY()

    insert into Rooms_Users(UserId, RoomId) values(@ManagerId, @NewRoomID)
END 
```

此函数将返回`IDENTITY`此特定范围内最后插入的值 - 您的存储过程的范围。

# dart - 如何让库从同一个包中导入库？

> ID：16135458
> 
> 赞同：3
> 
> 时间：2013-04-21T19:47:46.913
> 
> 标签：dart

飞镖页面[http://pub.dartlang.org/doc/#adding-a-dependency](http://pub.dartlang.org/doc/#adding-a-dependency)描述了如何让飞镖文件（*parser_test.dart*）使用“导入”包从自己的包中导入文件*：... “*导入风格。这似乎暗示这是一件好事 - 比使用相对路径更好。显示的此示例适用于*test*中似乎很特殊的文件。但是，那么为什么从包中的 lib 导入*相同的包*lib 文件没有意义。也许它确实有意义，但如果是这样，*pub 更新*并不方便。

```
foo/
   /lib/
        foo_lib_1.dart
        foo_lib_2.dart
        src/
           foo_lib_1/
                     foo_lib_1_impl.dart
           foo_lib_2/
                     foo_lib_2_impl.dart 
```

假设*foo_lib_2*使用*foo_lib_1*。*foo_lib_2.dart*有两个选项：

*   *导入“../foo_lib_1.dart”；*
*   *导入“包：foo/foo_lib_1.dart”；*

我的猜测是*建议的方法是第一个驻留在**lib*下的任何此类导入。我认为这是*pub update*的原因似乎自动在*bin*、*test*或*example的任何**包*文件夹中提供软链接到*foo*，例如*foo -> ../lib*。但是，它对顶级*foo中的**packages*文件夹的作用不同。这意味着要使第二种类型的导入（即包导入）起作用，您需要添加：

 ***```
foo:
  path: lib 
```

到*pubspec.yaml中**foo*的依赖项。库使用包样式导入从自己的包中导入另一个库（不在*test*、*bin*或*example*中）是否有任何优点或缺点？有明显的不一致的原因吗？

 **** * *

接受下面的答案后，我仍然没有看到它。这是我在 shell 会话中看到的内容，我想将此行为与答案相协调。任何解释表示赞赏。我使用的是 emacs 而不是 DartEditor，因此这里使用的是老式的命令行方法。

```
### Show all files, one dart library file and one yaml, plus empty
### lib and test folders

user@user-thinkpad:/tmp/uml_codegen_sample$ ls -R
.:
lib  pubspec.yaml  test

./lib:
plusauri.dart

./test:

### Show contents of pubspec

user@user-thinkpad:/tmp/uml_codegen_sample$ cat pubspec.yaml 
name: domain_model
version: 0.0.1
description: >
  Auto-generated support from /home/user/plusauri/modeling/plusauri.xmi.json
dependencies:
  ebisu:
    path: /home/user/open_source/codegen/dart/ebisu

### Run pub install and show the changes. Note there is a soft
### link to packages from test, but not lib.

user@user-thinkpad:/tmp/uml_codegen_sample$ pub install
Resolving dependencies...
Dependencies installed!
Some packages that were installed are not compatible with your SDK version 0.4.7+5.r21658 and may not work:
- 'pathos' requires >=0.5.0+1

You may be able to resolve this by upgrading to the latest Dart SDK
or adding a version constraint to use an older version of a package.
user@user-thinkpad:/tmp/uml_codegen_sample$ ls -R
.:
lib  packages  pubspec.lock  pubspec.yaml  test

./lib:
plusauri.dart

./packages:
domain_model  ebisu  pathos

./test:
packages

### Note here the program does not work, and suspiciously pub
### install put no packages link under lib like it did test

user@user-thinkpad:/tmp/uml_codegen_sample$ dart lib/plusauri.dart 
Unable to open file: /tmp/uml_codegen_sample/lib/packages/ebisu/ebisu_utils.dart'file:///tmp/uml_codegen_sample/lib/plusauri.dart': Error: line 5 pos 1: library handler failed
import "package:ebisu/ebisu_utils.dart" as EBISU_UTILS;
^

### Copy the same dart file to test to show that it can run there
### just fine

user@user-thinkpad:/tmp/uml_codegen_sample$ cp lib/plusauri.dart test/
user@user-thinkpad:/tmp/uml_codegen_sample$ dart test/plusauri.dart 
Main for library plusauri
user@user-thinkpad:/tmp/uml_codegen_sample$ 

### Finally, manually create the soft link in lib, to show it will
### then run

user@user-thinkpad:/tmp/uml_codegen_sample$ ln -s ../packages lib/packages 
user@user-thinkpad:/tmp/uml_codegen_sample$ dart lib/plusauri.dart 
Main for library plusauri 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:20:10.120

实际上，您绝对可以使用`package:foo/foo_lib_1.dart`语法导入，而无需更改`pubspec.yaml`甚至`pubspec.yaml`首先创建一个！

您可以从语言级别看到这是正确的，在此测试中：[https ://github.com/dart-lang/bleeding_edge/blob/master/dart/tests/standalone/package/packages/package1.dart](https://github.com/dart-lang/bleeding_edge/blob/master/dart/tests/standalone/package/packages/package1.dart)

这在野外的一个例子是：[https ://github.com/kevmoo/hop.dart/blob/master/lib/hop_tasks.dart#L17](https://github.com/kevmoo/hop.dart/blob/master/lib/hop_tasks.dart#L17)

* * *

我认为以一种或另一种方式编写没有任何好处，除了编写相对路径稍微短一些。

从项目结构的角度来看，当我钻入不会向用户公开的子目录时，我会使用相对路径导入。`src`通常被视为对外部用户不可见的特定于实现的细节，因此请使用指向您内心内容的相对路径。

但是，如果您在多个目录中工作，那么您应该使用`package:`导入来强化这些部分是独立且可互换的想法。在 lib 目录本身中，您想说这两个库虽然可能相互依赖，但可以独立存在并且不受其物理位置的约束。

我建议不要`../`在您的导入中使用，因为它很脆弱，并且如果/当您修改目录结构或部署时可能会以奇怪的方式中断。******

# java - 使用 Hyperic SIGAR 获取 Java 中的系统进程列表

> ID：16135459
> 
> 赞同：1
> 
> 时间：2013-04-21T19:47:48.853
> 
> 标签：java, exception, process, sigar, intermittent

我试图弄清楚如何`list`使用`Hyperic SIGAR`. 这是我到目前为止所拥有的：

```
import org.hyperic.sigar.Humidor;
import org.hyperic.sigar.ProcExe;
import org.hyperic.sigar.SigarException;
import org.hyperic.sigar.SigarProxy;

public class ProcessReader 
{
    Humidor h; 
    public ProcessReader()
    {
        h = Humidor.getInstance(); 
    }
    public void printProcessList()
    {
        SigarProxy sp = h.getSigar();
        try 
        {
            long[] pidList = sp.getProcList();
            for(int i=0; i<pidList.length; i++)
            {
                ProcExe temp = sp.getProcExe(pidList[i]); 
                String exeName = temp.getName(); 
                System.out.println(pidList[i] + " " + exeName); 
            }
        } catch (SigarException e) {
            e.printStackTrace();
        } 
    }
} 
```

但是，这最终会在看似任意数量的迭代后引发 SIGAR 异常。例如，有一次，我得到了这个：

```
1313 /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java

1311 /System/Library/Frameworks/CoreServices.framework/Frameworks/Metadata.framework/Versions/A/Support/mdworker 
```

然后它`Sigar Exception`在该行抛出了一个无效参数：

`ProcExe temp = sp.getProcExe(pidList[i]);`

有时，它会运行两次以上的迭代。有时，它运行不到两次迭代。我不太确定发生了什么，`SIGAR`文档似乎也不是很有帮助。当我想访问 CPU 和 RAM 使用信息时，我使用了类似的方法，即获取 a `Humidor`，`SIGARProxy`从中获取 a，然后从`SIGARProxy`. 但是，为系统进程执行此操作似乎效果不佳。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T11:38:30.923

您可以检查随 Sigar 包一起提供的 org.hyperic.sigar.cmd 包下的“Ps”类。它列出了系统上运行的所有进程。我相信您也可以操纵它来获取系统进程。您可以使用以下选项过滤输出：

1.  org/hyperic/sigar/cmd/Ps "CredName.User.eq=$USER"

或者，如果您想搜索特定过程，请使用以下命令：

1.  org/hyperic/sigar/cmd/Ps "State.Name.eq=sshd"

# android - Asyntask 完成后，如何保留数据值并将数据返回到主 UI？

> ID：16135464
> 
> 赞同：3
> 
> 时间：2013-04-21T19:48:21.737
> 
> 标签：android, android-asynctask

我试图从 AsyncTask 类中获取值以返回到主 UI，即使在 AsyncTask 类完成之后也是如此。来自 onPostExectute() 的字符串值将保存到**json_string**中以供以后使用。但是，当我尝试运行此代码时，它给了我**NullPointerException**。

我已经尽力了 3 天了，仍然不知道如何解决这个问题:( 请有人帮忙。我非常感谢你的帮助。

PS：我按照[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)的教程进行操作，但是我制作了这个简单的版本进行测试。

```
public class ParsingJSONDataSample extends Activity {

    // url to make request
    private static String url = "http://api.androidhive.info/contacts/";

    // JSON Node names
    private static final String TAG_CONTACTS = "contacts";
    private static final String TAG_ID = "id";
    private static final String TAG_NAME = "name";

    static TextView textId, textName;

    // contacts JSONArray
    static JSONArray contacts = null;

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json_string;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.json_listview_sample);

        textId = (TextView) findViewById(R.id.textView1);
        textName = (TextView) findViewById(R.id.textView2);

        new ReadJSONWebServiceFeedFromURL().execute(url);

        jObj = new JSONObject(json_string);

        // Getting Array of Contacts
        contacts = jObj.getJSONArray(TAG_CONTACTS);
        JSONObject c = contacts.getJSONObject(0);
        textId.setText(c.getString(TAG_ID));
        textName.setText(c.getString(TAG_NAME));        
        }
    }

    //get the JSON webservice from URL
    public String getJSONFromUrl(String url) {

        StringBuilder sb = new StringBuilder();
        String json;
        // Making HTTP request
        try {
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                StatusLine statusLine = httpResponse.getStatusLine();
                int statuscode = statusLine.getStatusCode();

                if (statuscode == 200){
                    HttpEntity httpEntity = httpResponse.getEntity();
                    is = httpEntity.getContent(); 

                    BufferedReader reader = new BufferedReader(new InputStreamReader(is));

                    String line = null;

                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                    is.close();
                    json = sb.toString();
                }
                else{
                    Log.d("readJSONFeed", "Failed to download file");
                }

        } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
        } catch (ClientProtocolException e) {
                e.printStackTrace();
        } catch (IOException e) {
                e.printStackTrace();
        }

        // return JSON String
        return json;
    }

    //Asynctask class to read the JSON webservice in background
    private class ReadJSONWebServiceFeedFromURL extends AsyncTask<String, Void, String>{

        protected String doInBackground(String... urls) {
            // TODO Auto-generated method stub
            return getJSONFromUrl(urls[0]);
        }

        protected void onPostExecute(String result){
            json_string = result;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T08:57:19.617

字符串 json; 将其用作全局

干杯，

# javascript - 如何使用 javascript 以编程方式从 iframe 中删除沙盒属性

> ID：16135465
> 
> 赞同：5
> 
> 时间：2013-04-21T19:48:26.343
> 
> 标签：javascript, jquery, html, google-chrome

我不认为这是可能的，但是，我发现了这句话：

> [“强烈建议不要同时使用允许脚本和允许同源，因为这允许嵌入文档以编程方式删除沙盒属性。”](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe)

我的 iframe 需要有一个沙箱，但仅当我在某些 URL 中浏览时，嵌入式浏览上下文尝试将内容导航（加载）到顶级浏览上下文（跳出框架......）

在其他页面上，沙箱需要完全删除，因为它不允许我浏览来自不同来源的网站......

> 尝试导航的框架是沙盒的，因此不允许导航其祖先。

以编程方式更改沙箱：

```
document.getElementById("frame").sandbox = ""; 
```

...也不起作用，因为这仍然存在限制...因此，我需要以某种方式完全删除该属性，我将如何去做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T19:52:51.120

> 这些标志仅在 iframe 的嵌套浏览上下文被导航时生效。删除它们或删除整个沙盒属性对已加载的页面没有影响。

更多信息 -[**这里**](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#attr-iframe-sandbox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-05T07:43:17.380

您可以从元素中删除沙盒属性，`iframe.removeAttribute("sandbox")`这将使 iframe 对于您加载到其中的*下一个*内容（而不是当前加载的内容）不被沙盒化。

# php - 显示图像 PHP 表 Mysql

> ID：16135467
> 
> 赞同：0
> 
> 时间：2013-04-21T19:48:32.310
> 
> 标签：php

我正在尝试在表格中显示图像，图像位于图像文件夹中，链接位于 Mysql DB 中。

这是调用图像的代码行。mysql 查询正在工作，但它仅将图像链接显示为文本而不是图片。

```
<tr ><td >Image</td>

<td ><input type=text name=image value='<img src="<?echo $row['image'];?>"'></td></tr> 
```

我是 PHP 和 Mysql 的新手，我只是停留在这段代码中，

我如何让图像显示在表格中，而不仅仅是代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:51:54.647

您不需要在`<input>`这里使用标签，只需使用`<img>`标签：

```
<tr><td>Image</td>

<td><img src="<?echo $row['image'];?>"></td></tr> 
```

这假定您的数据库中的链接包含图像的路径，而不仅仅是图像名称。例如：

```
$row['image'] = /path/to/image.format 
```

# c# - 使用 Newtonsoft JsonConvert 序列化在特定属性集上失败

> ID：16135468
> 
> 赞同：0
> 
> 时间：2013-04-21T19:48:37.983
> 
> 标签：c#, .net, serialization, json.net

我正在尝试将对象树序列化为 json 字符串。对象树很复杂，通常可以毫无问题地进行序列化，但一组属性是来自不同 .DLL 的对象。反正我也可以序列化那些吗？

这是序列化的代码：

```
var settings = new JsonSerializerSettings { TypeNameHandling = TypeNameHandling.All };
var json = JsonConvert.SerializeObject(exe.Value, settings);
File.WriteAllText(Path.Combine(folderCache, exe.Value.AccountId + ".txt"), json); 
```

以下是未序列化的类属性的类型：

```
[DataContract(Namespace = Constants.ServiceManagementNS)]
public class Deployment : IExtensibleDataObject 
```

exe.Value 是一个基于 EntityFramework 的模型对象，它被定义为这样的东西（它在结构中很深）

```
[DataContract(IsReference = true)]
[KnownType(typeof(Account))]
public partial class AccountUser: IObjectWithChangeTracker, INotifyPropertyChanged 
```

在树的某个深处，有一个名为 AzureDeployment 的属性没有被序列化：

```
 public Deployment AzureDeployment { get; set; } 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:53:59.683

原来我需要用 [DataMember] 标记非序列化实体

# javascript - 在绘图画布的末尾制作指向箭头

> ID：16135469
> 
> 赞同：0
> 
> 时间：2013-04-21T19:48:50.830
> 
> 标签：javascript, canvas, turtle-graphics

我创建了一个带有海龟图形的 Javascript 程序，我想知道如何在每个绘图的末尾放置一个指向三角形（或任何形状），以便我可以选择绘图的哪一侧。

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>HTML5 canvas turtle graphics</title>
<style>
  article, aside, figure, footer, header, hgroup, 
  menu, nav, section { display: block; }
  canvas {border: 1px dotted #564b47;}
</style>
</head>
<body>

<h1>HTML5 canvas turtle graphics</h1>

<canvas id="myDrawing" width="600" height="300"></canvas>

<script type="text/javascript">

"use strict";
// JavaScript statements
// =====================================================================================
var color = {
    black: "#ffffff",
    red: "#ff0000",
    green: "#00ff00",
    blue: "#0000ff",
    yellow: "#ffff00",
    fuchsia: "#ff00ff",
    aqua: "#00ffff"
};

var turtle = {
    x: 0,
    y: 0,
    angleInRadians: 0,
    penDown: false,
    penColor: "#000000",
    lineWidth: 2
};

var canvas = document.getElementById('myDrawing');

if (canvas && canvas.getContext) { // does the browser support 'canvas'?
    turtle.ct = canvas.getContext("2d"); // get drawing context
} else {
    alert('You need a browser which supports the HTML5 canvas!');
}

// =====================================================================================

turtle.logPenStatus = function () {
    console.log('x=' + this.x + "; y=" + this.y + '; angle = ' + this.angle + '; penDown = ' + this.penDown);
};

turtle.forward = function (length) {
    // console.log('forward(' + length + ')');
    // this.logPenStatus();
    var x0 = this.x,
        y0 = this.y;
    this.x += length * Math.sin(this.angleInRadians);
    this.y += length * Math.cos(this.angleInRadians);
    if (this.ct) {
        if (this.penDown) {
            //this.logPenStatus();
            this.ct.beginPath();
            this.ct.lineWidth = this.lineWidth;
            this.ct.strokeStyle = this.penColor;
            this.ct.moveTo(x0, y0);
            this.ct.lineTo(this.x, this.y);
            this.ct.stroke();
        }
    } else {
        this.ct.moveTo(this.x, this.y);
    }
    return this;
};

turtle.backward = function (length) {
    this.forward(-length);
    return this;
};

turtle.left = function (angleInDegrees) {
    // console.log('left(' + angleInDegrees + ')');
    // A complete circle, 360º, is equivalent to 2? radians  
    // angleInDegrees is an angle measure in degrees
    this.angleInRadians += angleInDegrees * Math.PI / 180.0;
    return this;
};

turtle.right = function (angleInDegrees) {
    this.left(-angleInDegrees);
    return this;
};

turtle.angle = function () {
    // the turtle status is hold in this.angleInRadians;
    // degrees are often more convenient for the display
    return this.angleInRadians * 180.0 / Math.PI;

}; 
```

例如这里是一个简单的绘图

```
turtle.x = 50;       // the x-axis of the pen
turtle.y = 100;      // the y-axis of the pen
turtle.penDown = true;
 turtle.forward(50);
    turtle.left(150);
    turtle.forward(7);
    turtle.backward(7);
    turtle.right(150);
    turtle.right(150);

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:48:53.407

如果你知道你想要箭头的 x/y 和你的“乌龟”的弧度角，你可以画一个像这样的箭头：

```
function drawArrowhead(x,y,radians){
    ctx.save();
    ctx.beginPath();
    ctx.translate(x,y);
    ctx.rotate(radians);
    ctx.moveTo(0,0);
    ctx.lineTo(5,20);
    ctx.lineTo(-5,20);
    ctx.closePath();
    ctx.restore();
    ctx.fill();
} 
```

这会将箭头的尖端置于 x/y 并旋转到指定的弧度角。

您可以试验箭头的精确位置（端点上、端点后等）以及箭头的形状。

# ruby-on-rails - 从 comment.rb 将用户添加到 answers_watchers 表

> ID：16135477
> 
> 赞同：3
> 
> 时间：2013-04-21T19:49:26.847
> 
> 标签：ruby-on-rails, ruby

我的 Rails 应用程序的 Answer.rb 模型中有以下代码。用户发布答案（对问题）后，他们会被添加到列表中，以便在对答案发布评论时收到通知。

答案.rb

```
 has_and_belongs_to_many :watchers, :join_table => "answer_watchers", :class_name => "User"

after_create :creator_watches_me
  private 

  def creator_watches_me
    self.watchers << user
  end 
```

这（连同未显示的代码）用于在发布评论时通知回答问题的用户。但是，如果同一用户发表评论作为回复，我希望在回复者或其他任何人添加评论时通知原始评论者。因此，我想添加任何对同一列表的答案发表评论的人——但显然应该为每个答案实例保留单独的列表。这就是我遇到麻烦的地方。

我假设它（新评论者）必须添加到答案实例而不是类中，尽管我不完全确定如何做到这一点。下面的代码都坏了。我只是想玩弄它如何在没有成功的情况下工作。

在我的 comment.rb 模型中，我添加了这段代码，它将用户传递给 Answer 模型中的方法 add_to_watchers

评论.rb

```
 after_create :creator_watches_me
      private 

  def creator_watches_me
    Answer.add_to_watchers(user)
  end 
```

在 Answer.rb 模型中，我有这个

```
 def add_to_watchers(user)
    self.watchers << user
  end 
```

但现在我根本无法添加评论。我收到这个错误

```
undefined method `add_to_watchers' for #<Class:0x007faead33f7f8> 
```

我猜我可能遇到的一个问题是我不知道如何从评论模型中引用 Answer 的实例以及如何将该实例传递给 Answer.rb 以便它知道应该将用户添加到哪个答案. 当然，这可能是完全错误的 :( 我已经阅读了一些关于实例和类方法的博客文章，但我无法在我的代码中对其进行整理，如果这甚至是我遇到的问题的话。

所以你知道，答案和评论之间存在关联。Answer.rb has_many：评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T19:57:47.260

正如我认为您所计算的那样，您调用`add_to_watchers`的是`Answer`类而不是相关的 Answer 实例，并且该类未实现该方法`Class`。所以这就是你得到错误的原因。

我猜你有一个从评论到答案的关联，比如：

```
belongs_to :answer 
```

在这种情况下，您可以参考相关的 Answer 实例，`answer`因此请尝试：

```
def creator_watches_me
  answer.add_to_watchers(user)
end 
```

# c# - nunit 的自定义 TestRunner

> ID：16135478
> 
> 赞同：0
> 
> 时间：2013-04-21T19:49:30.493
> 
> 标签：c#, nunit, test-runner

具有以下测试流程：

```
foreach(tc in testcases)
    foreach(temperature in temperatures)
    {
        SetTemperature(temperature);
        foreach(position in positions)
        {
            Robot.GotoPosition(position);
            DoTest(tc);
        }
    } 
```

这会在不同温度和不同位置测试外部组件。

是否可以编写自定义`runner`来`nunit`归档这种行为？

# parsing - Happy中命题逻辑解析器中的移位/减少冲突

> ID：16135480
> 
> 赞同：2
> 
> 时间：2013-04-21T19:49:36.487
> 
> 标签：parsing, haskell, shift-reduce-conflict, happy

我正在根据命题逻辑语法的[BNF 定义](http://www2.cs.siu.edu/~rahimi/cs537/slides/Formal%20Presentation%20of%20Prop%20and%20Pred%20Logic.pdf)在快乐上制作一个简单的命题逻辑解析器，这是我的代码

```
{
module FNC where
import Data.Char 
import System.IO
}

-- Parser name, token types and error function name:
--
%name parse Prop
%tokentype { Token } 
%error { parseError }

-- Token list:
%token
     var { TokenVar $$ }  -- alphabetic identifier
     or { TokenOr }
     and { TokenAnd }
     '¬' { TokenNot }
     "=>" { TokenImp } -- Implication
     "<=>" { TokenDImp } --double implication
    '(' { TokenOB } --open bracket
    ')'  { TokenCB } --closing bracket
    '.' {TokenEnd}

%left "<=>"
%left "=>"
%left or
%left and
%left '¬'
%left '(' ')'
%%

--Grammar
Prop :: {Sentence}
Prop : Sentence '.' {$1}

Sentence :: {Sentence}
Sentence : AtomSent {Atom $1}
    | CompSent {Comp $1}

AtomSent :: {AtomSent}
AtomSent : var { Variable $1 }

CompSent :: {CompSent}
CompSent : '(' Sentence ')' { Bracket $2 }
    | Sentence Connective Sentence {Bin $2 $1 $3}
    | '¬' Sentence {Not $2}

Connective :: {Connective}
Connective : and {And}
    | or {Or}
    | "=>" {Imp}
    | "<=>" {DImp}

{
--Error function
parseError :: [Token] -> a
parseError _ = error ("parseError: Syntax analysis error.\n")

--Data types to represent the grammar
data Sentence
    = Atom AtomSent
    | Comp CompSent
    deriving Show

data AtomSent = Variable String deriving Show

data CompSent
      = Bin Connective Sentence Sentence
      | Not Sentence
      | Bracket Sentence
      deriving Show

data Connective
    = And
    | Or
    | Imp
    | DImp
    deriving Show

--Data types for the tokens
data Token
      = TokenVar String
      | TokenOr
      | TokenAnd
      | TokenNot
      | TokenImp
      | TokenDImp
      | TokenOB
      | TokenCB
      | TokenEnd
      deriving Show

--Lexer
lexer :: String -> [Token]
lexer [] = []  -- cadena vacia
lexer (c:cs)   -- cadena es un caracter, c, seguido de caracteres, cs.
      | isSpace c = lexer cs
      | isAlpha c = lexVar (c:cs)
      | isSymbol c = lexSym (c:cs)
      | c== '(' = TokenOB : lexer cs
      | c== ')' = TokenCB : lexer cs
      | c== '¬' = TokenNot : lexer cs --solved
      | c== '.'  = [TokenEnd]
      | otherwise = error "lexer:  Token invalido"

lexVar cs =
   case span isAlpha cs of
      ("or",rest) -> TokenOr : lexer rest
      ("and",rest)  -> TokenAnd : lexer rest
      (var,rest)   -> TokenVar var : lexer rest

lexSym cs =
    case span isSymbol cs of
        ("=>",rest) -> TokenImp : lexer rest
        ("<=>",rest) -> TokenDImp : lexer rest
} 
```

现在，我这里有两个问题

1.  出于某种原因，我遇到了 4 个 shift/reduce 冲突，我真的不知道它们可能在哪里，因为我认为优先级会解决它们（而且我认为我正确地遵循了 BNF 语法）......
2.  （这是一个 Haskell 问题）在我的词法分析器函数中，由于某种原因，我在说如何处理 '¬' 的那一行出现解析错误，如果我删除该行它是有效的，为什么会这样？（这个问题解决了）

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T22:09:56.163

如果您对它感到满意，`-i`它将生成一个信息文件。该文件列出了您的解析器拥有的所有状态。它还将列出每个状态的所有可能转换。您可以使用此信息来确定移位/减少冲突是否是您关心的冲突。

有关调用快乐和冲突的信息：

*   [http://www.haskell.org/happy/doc/html/sec-invoking.html](http://www.haskell.org/happy/doc/html/sec-invoking.html)
*   [http://www.haskell.org/happy/doc/html/sec-conflict-tips.html](http://www.haskell.org/happy/doc/html/sec-conflict-tips.html)

下面是一些输出`-i`。除了状态 17，我已经删除了所有内容。您需要获取此文件的副本，以便正确调试问题。你在这里看到的只是为了帮助谈论它：

```
-----------------------------------------------------------------------------
Info file generated by Happy Version 1.18.10 from FNC.y
-----------------------------------------------------------------------------

state 17 contains 4 shift/reduce conflicts.

-----------------------------------------------------------------------------
Grammar
-----------------------------------------------------------------------------
    %start_parse -> Prop                               (0)
    Prop -> Sentence '.'                               (1)
    Sentence -> AtomSent                               (2)
    Sentence -> CompSent                               (3)
    AtomSent -> var                                    (4)
    CompSent -> '(' Sentence ')'                       (5)
    CompSent -> Sentence Connective Sentence           (6)
    CompSent -> '¬' Sentence                          (7)
    Connective -> and                                  (8)
    Connective -> or                                   (9)
    Connective -> "=>"                                 (10)
    Connective -> "<=>"                                (11)

-----------------------------------------------------------------------------
Terminals
-----------------------------------------------------------------------------
    var            { TokenVar $$ }
    or             { TokenOr }
    and            { TokenAnd }
    '¬'           { TokenNot }
    "=>"           { TokenImp }
    "<=>"          { TokenDImp }
    '('            { TokenOB }
    ')'            { TokenCB }
    '.'            { TokenEnd }

-----------------------------------------------------------------------------
Non-terminals
-----------------------------------------------------------------------------
    %start_parse    rule  0
    Prop            rule  1
    Sentence        rules 2, 3
    AtomSent        rule  4
    CompSent        rules 5, 6, 7
    Connective      rules 8, 9, 10, 11

-----------------------------------------------------------------------------
States
-----------------------------------------------------------------------------
State 17

    CompSent -> Sentence . Connective Sentence          (rule 6)
    CompSent -> Sentence Connective Sentence .          (rule 6)

    or             shift, and enter state 12
            (reduce using rule 6)

    and            shift, and enter state 13
            (reduce using rule 6)

    "=>"           shift, and enter state 14
            (reduce using rule 6)

    "<=>"          shift, and enter state 15
            (reduce using rule 6)

    ')'            reduce using rule 6
    '.'            reduce using rule 6

    Connective     goto state 11

-----------------------------------------------------------------------------
Grammar Totals
-----------------------------------------------------------------------------
Number of rules: 12
Number of terminals: 9
Number of non-terminals: 6
Number of states: 19 
```

该输出基本上表明它在查看连接词时会遇到一些歧义。事实证明，您链接的幻灯片提到了这一点（幻灯片 11），“歧义通过优先级 ¬∧∨⇒⇔ 或括号解决”。

在这一点上，我建议查看移位/减少冲突和您想要的优先级，看看您拥有的解析器是否会做正确的事情。如果是这样，那么您可以放心地忽略这些警告。如果没有，你有更多的工作要做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T20:02:12.547

我可以回答第 2 点：

```
| c== '¬' == TokenNot : lexer cs --problem here
--        ^^ 
```

你有一个`==`在那里你应该有一个`=`.

# javascript - 如何使用 JavaScript 显示用户输入的信息？

> ID：16135482
> 
> 赞同：0
> 
> 时间：2013-04-21T19:49:51.383
> 
> 标签：javascript, html, document.write

我有一个表格代码 tat 将允许用户输入信息。我正在尝试使用 javascript 将该信息的某些部分显示到新页面上。基本上，该页面旨在让用户输入信息并在新选项卡或页面中显示名称、日期、时间和电子邮件。但我似乎无法显示它。谁能帮我？

```
<html lang="en" >
    <head>
    <title>Shy Music Booking Confirmation</title>
    <link rel="stylesheet" href="music.css" type="text/css" />

<body>
<div id="wrapper">
<div id="form">
    <header><h1>Shy Music Private Lessons</h1></header>

<script type="text/javascript">

      function addtext()
      {
         var userName = document.booking.userName.value;
         var userDate = document.booking.userDate.value;
         var userTime = document.booking.userTime.value;
         var userEmail = document.booking.userEmail.value;

         document.writeln("Thank you! You have just entered the following:");
         document.writeln("<pre>");
         document.writeln("Name: " + userName);
         document.writeln("Date: " + userDate);
         document.writeln("Time: " + userTime);
      }
    </script>
</head>
<hr>
<form name="booking">
<h1>Book a Slot Here!</h1>
    <label for="userName">Name: <br><input type = "text" name = "userName"></label>      <br><br>
    <label for="userEmail">E-mail Address: <br><input type = "email" name = "userEmail"></label><br><br>
<label for="userPhone">Phone Number: <br><input type = "tel" name = "userPhone">    </label><br><br>
<label for="userInstrument">Instrument: 
<select>
<option>Guitar</option>
<option>Drums</option>
<option>Piano</option>
</select>
</label>
<br><br>
<label for="userTime">
Preffered Time: 
<select>
<option>9:00</option>
<option>9:30</option>
<option>10:00</option>
<option>10:30</option>
<option>11:00</option>
<option>11:30</option>
<option>12:00</option>
<option>12:30</option>
<option>1:00</option>
<option>1:30</option>
<option>2:00</option>
<option>2:30</option>
<option>3:00</option>
<option>3:30</option>
<option>4:00</option>
<option>4:30</option>
</select>
</label>
<select>
<option>AM</option>
<option>PM</option>
</select>
<br>
<br>
    <label for="userDate">Date: <br><input type = "date" name = "userDate"></label><br><br>

<input type="submit" value="Submit" >
<form action="#">
<input type="button" value = "Back" onclick="javascript:history.go(-1)" />
</form>
</form>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-09-10T04:33:53.777

我为此工作了很长时间，但没有成功。但是，我最近尝试了它并且它有效！我希望这可以帮到你。

```
<html>
<head>
<h1> Welcome</h1>
</head>
<body>
<p> Enter name: </p>
<input id="name" name="name"class="Name" type="text" placeholder="Enter Full name" required>`
<input type="Submit" onclick="submitted()"> <br> <br>
<a id="new" href="www.google.com"> </a>
<script>

      function submitted()
      {
        var a = document.getElementById("name").value;

        if (a=="")
        {
      document.getElementById("new").innerHTML="";
      alert("Please Enter a valid name!");
        }
        else if (a==" ") {
        document.getElementById("new").innerHTML=""
      alert("Please Enter a valid name!");
        }
        else
        {
          document.getElementById("new").innerHTML="Thank you, " + a + ". " + "Click here to continue.";
        }
      }
</script>
</body>
</html> 
```

或者，稍微收紧，作为一个工作片段：

```
function submitted()
{
   var a = document.getElementById("name").value.trim();
   document.getElementById("new").innerHTML=
     a===""?"":"Thank you, " + a + ". " + "Click here to continue.";
}
```

```
<p> Enter name: </p>
    <input id="name" name="name"class="Name" type="text" placeholder="Enter Full name" required>
    <input type="Submit" onclick="submitted()"> <br> <br>
    <a id="new" href="www.google.com"> </a>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:54:00.450

您的代码的问题是您`document.write`在动态设置中使用。在此上下文中使用它时，`document.write`将擦除当前文档的内容并将其替换为其参数指定的文本。出于这个原因，`document.write`通常被认为是表示和插入文本/数据的糟糕方式。它通常会影响大量学习 JavaScript 的初学者。以下是您应该记住的一些替代方案：

*   `element.innerHTML`: 就像我在评论中说的那样。用于`.innerHTML`通过页面上的元素将格式化的 HTML 插入到文档中。它不一定必须由`id`属性指定。它可以很好地通过任何其他形式的元素获取来给出。

*   `node.appendChild`: 这种方法比第一种方法对 DOM 更友好。它允许您在指定的元素主体的末尾插入一个节点`node`。例如：

    ```
    var form = document.myForm,
        new_element = document.createElement('input');

    new_element.type = "button";
    new_element.value = "Submit";

    form.appendChild( new_element ); 
    ```

我希望这会有所帮助。

# macos - mac应用的背景可以透明吗？

> ID：16135485
> 
> 赞同：3
> 
> 时间：2013-04-21T19:49:57.583
> 
> 标签：macos, graphics, quartz-2d

我正在使用quartz2d 制作我的第一个mac 应用程序，我想知道是否可以使背景透明。这意味着如果所有应用程序都将背景设置为透明，那么当它运行时，除了它背后的应用程序之外，你什么也看不到。

我觉得这是不可能的，但我想我还是会问。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T19:54:29.700

## 实际上，这是可能的。

您甚至可以让应用程序的完全透明窗口成为点击式。请参阅：[在 Mac OS X 上绘制自定义窗口](http://www.cocoawithlove.com/2008/12/drawing-custom-window-on-mac-os-x.html)。

## 构建透明窗口

> 制作自定义窗口从透明窗口开始。我将使用一个名为 RoundWindow 的自定义 NSWindow 子类。该子类的构造函数如下所示：

```
- (id)initWithContentRect:(NSRect)contentRect
    styleMask:(NSUInteger)windowStyle
    backing:(NSBackingStoreType)bufferingType
    defer:(BOOL)deferCreation
{
    self = [super
        initWithContentRect:contentRect
        styleMask:NSBorderlessWindowMask
        backing:bufferingType
        defer:deferCreation];
    if (self)
    {
        [self setOpaque:NO];
        [self setBackgroundColor:[NSColor clearColor]];
    }
    return self;
} 
```

> 此构造函数对窗口所做的三处更改相当明显：
> 
> *   NSBorderlessWindowMask（没有标准窗口框架的窗口）
> *   setOpaque:NO（这样窗口的任何部分都可以是透明的）
> *   setBackgroundColor:[NSColor clearColor] （如果我们什么都不做，这将使窗口透明）
> 
> 结果是一个透明的矩形窗口。可以直接调用此方法（如果在代码中创建窗口）。当从 NIB 加载窗口时，NIB 加载器也会调用它。
> 
> 由于此窗口使用 NSBorderlessWindowMask 样式，我们必须重写 canBecomeKeyWindow 和 canBecomeMainWindow 方法以返回 YES。这些覆盖将允许窗口分别成为键盘焦点和主应用程序窗口。

**来源：** *[在 Mac OS X 上绘制自定义窗口](http://www.cocoawithlove.com/2008/12/drawing-custom-window-on-mac-os-x.html)。*

# java - Java nio，关闭socketChannel但保持ServerSocketChannel打开

> ID：16135487
> 
> 赞同：1
> 
> 时间：2013-04-21T19:50:38.710
> 
> 标签：java, nio

我有一个服务器应用程序。Java NIO

我有 Runnable 类 - EventHandler - 处理传入消息。如果 message == "Bye" -> EventHandler 关闭相关的 SocketServer 和 SelectorKey

我有一个 Runnable 对象——Acceptor——在 OP_ACCEPT 事件上被激活。它创建新的 SocketChannel 和新的 EventHandler 来处理来自这个通道的消息

我有个问题。第一个客户端连接。发送信息。断开。一切都好

第一个客户端断开连接后第二个客户端连接。问题从这里开始 - 没有调用 Acceptor 对象，因此没有为新客户端创建 SocketChannel 和 EventHandler。

我的代码有什么问题？SocketChannel 关闭不正确？

* * *

## 我更改了代码以修复评论中提到的错误。现在它工作正常

反应堆。带主循环的类

```
public class Reactor implements Runnable {

    final Selector selector;
    final ServerSocketChannel serverSocketChannel;

    Reactor(int port) throws IOException {
        //configure server socket channel
        this.selector = Selector.open();
        this.serverSocketChannel = ServerSocketChannel.open();
        this.serverSocketChannel.socket().bind(new InetSocketAddress(port));
        this.serverSocketChannel.configureBlocking(false);

        //start acceptor
        this.serverSocketChannel.register(this.selector, SelectionKey.OP_ACCEPT, new Acceptor(this.serverSocketChannel, this.selector));
    }

    public void run() {
        System.out.println("Server is listening to port: " + serverSocketChannel.socket().getLocalPort());
        try {
            while (!Thread.currentThread().isInterrupted()) {
                if (this.selector.select() > 0) {
                    Set<SelectionKey> selected = this.selector.selectedKeys();
                    for (SelectionKey selectionKey : selected) {
                        dispatch(selectionKey);
                    }
                    selected.clear(); //clear set (thanks to EJP for comment)
                }
            }
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }

    void dispatch(SelectionKey k) {
        Runnable r = (Runnable) (k.attachment());
        if (r != null) {
            r.run();
        }
    }
} 
```

受体

```
public class Acceptor implements Runnable {

    final ServerSocketChannel serverSocketChannel;
    final Selector selector;

    public Acceptor(ServerSocketChannel serverSocketChannel, Selector selector) {
        this.serverSocketChannel = serverSocketChannel;
        this.selector = selector;
    }

    public void run() {
        try {
            SocketChannel socketChannel = this.serverSocketChannel.accept();
            if (socketChannel != null) {
                new EventHandler(this.selector, socketChannel);
                System.out.println("Connection Accepted");
            }
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
} 
```

事件处理程序

```
public class EventHandler implements Runnable {

    EventHandler(Selector selector, SocketChannel socketChannel) throws IOException {
        this.socketChannel = socketChannel;
        socketChannel.configureBlocking(false);
        this.selectionKey = this.socketChannel.register(selector, SelectionKey.OP_READ, this);
        //selector.wakeup();  //we don't need to wake up selector (thanks to EJP for comment)
    }

    @Override
    public void run() {
        try {
            if (this.state == EventHandlerStatus.READING) {
                read();
            } else if (this.state == EventHandlerStatus.SENDING) {
                send();
            }
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }

    /**
     * Reading client message
     *
     * @throws IOException
     */
    void read() throws IOException {
        int readCount = this.socketChannel.read(this.input);

        //check whether the result is equal to -1, and close the connection if it is (thanks to EJP for comment)
        if(readCount == -1){
            this.socketChannel.close();
            System.out.println("Stream is closed. Close connection.");
            return;
        }

        if (readCount > 0) {
            processMessage(readCount);
        }

        if(this.clientMessage.equalsIgnoreCase("Bye")){
            this.socketChannel.close();
            //this.selectionKey.cancel(); //we don't need to cancel selectionKey if socketChannel is just closed (thanks to EJP for comment)
            System.out.println("Client said Bye. Close connection.");
            return;
        }

        this.state = EventHandler.Status.SENDING;
        this.selectionKey.interestOps(SelectionKey.OP_WRITE); //mark that we interested in writing
    }

    /**
     * Processing of the read message.
     *
     * @param readCount Number of bytes to read
     */
    synchronized void processMessage(int readCount) {
        this.input.flip();
        StringBuilder sb = new StringBuilder();
        sb.append(new String(Arrays.copyOfRange(input.array(), 0, readCount))); // Assuming ASCII (bad assumption but simplifies the example)
        this.clientMessage = sb.toString().trim();
        this.input.clear();
        System.out.println("Client said: " + this.clientMessage);
    }

    /**
     * Sending response to client
     *
     * @throws IOException
     */
    void send() throws IOException {
        System.out.println("Answer to client: " + this.clientMessage);
        this.socketChannel.write(ByteBuffer.wrap((this.clientMessage + "\n").getBytes()));
        this.state = EventHandler.Status.READING;
        this.selectionKey.interestOps(SelectionKey.OP_READ); //mark that we interested in reading
    }

//----------------------------------------------------------------------------------------------------------------------
//  Fields
//----------------------------------------------------------------------------------------------------------------------

    final SocketChannel socketChannel;
    final SelectionKey selectionKey;

    ByteBuffer input = ByteBuffer.allocate(1024);
    EventHandlerStatus state = EventHandler.Status.READING;
    String clientMessage = "";

//----------------------------------------------------------------------------------------------------------------------
//  Enum to mark current status of EventHandler
//----------------------------------------------------------------------------------------------------------------------

    enum Status {
        READING, SENDING
    }

} 
```

# asp.net - 带有角色的 asp.net 表单身份验证

> ID：16135489
> 
> 赞同：1
> 
> 时间：2013-04-21T19:50:48.490
> 
> 标签：asp.net, roles

我有一个需要用户名/密码的登录屏幕。

我正在使用作为 ASP.NET 一部分的 ASP.NET 的成员资格和角色表来存储用户最初注册时的信息。

一旦用户使用适当的角色登录，然后将他们引导到另一个页面。

这是另一个页面的 web.config 文件。请注意，它只允许 SomeRole 的角色。

```
 <configuration>
    <system.web>
    <authorization>
        <allow roles="SomeRole" />   
        <deny users="*" />                   
    </authorization>
   </system.web>
   </configuration> 
```

在登录屏幕中，我捕获了用户名、密码。我不确定如何使以下成为用户的角色。

我有以下代码：

```
 protected void btnLogin_Click(object sender, EventArgs e)
      {    
          // not sure what code to put here so user logged in that has a Role of SomeRole works with code just below                   
          if (User.IsInRole("SomeRole")) 
```

当我查看时，用户的角色显示为空白。我的问题是，如何使当前登录的当前具有 SomeRole 的角色，以便

```
 <allow roles="SomeRole" /> 
```

将工作。请注意，在登录屏幕上，我有一个属于 SomeRole 的用户名和密码，但不知道如何制作

if (User.IsInRole("SomeRole")) 工作，以便继承该用户的角色。希望这是有道理的。

这是我的 web.config 的样子：

```
 <roleManager enabled="true" cacheRolesInCookie="true"
               defaultProvider="SiRoleProvider"
               createPersistentCookie="false"
               cookieProtection="All">
           <providers>
            <clear/>
             <add connectionStringName="SiiSQL1" applicationName="SiGen" name=" r" type="System.Web.Security.SqlRoleProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
             </providers>
           </roleManager> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:57:52.460

您需要为用户设置身份验证 cookie，因为您正在使用自定义登录控件并且为了使用 Role.IsInRole

在您的自定义登录按钮代码中尝试此操作。SetAuthCookie 实际上将设置登录用户由会员提供者访问

```
protected void Login_Click(object sender, EventArgs e)
{

if (Membership.ValidateUser(txtUserName.Text, txtPassword.Text))
{

FormsAuthentication.SetAuthCookie(txtUserName.Text, true);

string url = "~/Member/Default.aspx";
Response.Redirect(url); 
```

# visual-studio-2012 - 静态库模式下的 Visual Studio 2010 C++/CLI：找不到程序集“mscorlib.dll”

> ID：16135490
> 
> 赞同：16
> 
> 时间：2013-04-21T19:50:56.343
> 
> 标签：visual-studio-2012, compiler-errors, c++-cli, 64-bit

我正在使用 VS 2012 在动态库 (.dll) 和 x64 模式下开发 C++/CLI 项目。

如果我将模式切换到静态库，我会收到以下错误。

**错误 1 ​​错误 C1107: 找不到程序集 'mscorlib.dll': 请使用 /AI 或通过设置 LIBPATH 环境变量 C:\Depot\Main\Current\Sln\ALibraryProject\Stdafx.cpp 1 1 ALibraryProject 指定程序集搜索路径**

我尝试删除对 mscorlib.dll 的引用，然后从以下位置再次添加它：

项目 > 属性 > 常规 > 通用属性

但这没有帮助。我知道 VS 处理对 .NET 程序集的引用，我不想向它添加磁盘文件引用，因为它看起来不合逻辑！以前有人遇到过这种情况吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-08-28T17:21:34.280

将我的解决方案从 VS2010 编译器转换为 VS2013 编译器时，我遇到了同样的问题。

我通过更改项目设置（对于包含抛出此错误的托管 .cpp 文件的项目）解决了这个问题，如下所示*：C/C++ | 一般 | 其他 #using 目录*我添加了宏**$(FrameworkPathOverride)**。这将解析为您所针对的 .NET 版本的参考程序集目录，在我的情况下是 C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.5.1

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-21T20:16:31.567

> 如果我将模式切换到静态库

当您尝试使用有效的 /clr 构建静态库时，这不是您遇到的典型错误。我不得不假设您一直在修改项目设置以摆脱尝试执行此操作时遇到的难以理解的链接器错误。

核心问题是 C++/CLI 构建系统不支持包含 MSIL 的静态库。托管代码不使用链接器，绑定发生在运行时。这使得静态库和 DLL 之间的本质区别消失了。所以微软决定不支持它，因为实现它没有多大意义。不幸的是，无论如何，当您尝试这样做时，他们并没有大声喊叫，您得到的链接器错误并没有给出足够的提示您做错了什么。解决方法，例如与 ILMerge 合并也不起作用，它无法处理混合模式程序集。合并本机代码段及其关联的重定位表条目是非常重要的。

请记住，链接本机静态库很好。典型的 C++/CLI 项目只有需要使用 /clr 构建的 ref 类包装器。您可以将库中的任意数量的本机代码粘贴到最终程序集中。

* * *

我被迫对实际的编译错误进行理论化，太多的程序员因为*另一个*与构建静态库没有任何关系的原因而得到这个错误，他们在评论中骚扰我。

请注意，针对与您在计算机上安装的版本不同的 .NET 版本是一件非常危险的事情，尤其是如果您想针对 4.0 并且安装了 4.5.x。.vcxproj 文件中的关键元素是`<TargetFrameworkVersion>`. 如果您以旧的 .NET 版本启动项目，这将丢失，您必须自己插入它。*如果它存在*， IDE 也不支持更改它，再次手动编辑。

这足以诱使 MSBuild 生成正确的编译命令。您可以验证是否成功，查看项目的 Debug 构建目录的 *.tlog 子目录。cl.command.1.tlog 文件显示了传递给编译器的选项。它应该包含：

> /AI"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0"
> /FU"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\ mscorlib.dll"

请注意子目录，它与您的预期 .NET 目标匹配非常重要。本例中为 v4.0。非常非常重要的是，它不*指向*c:\windows\microsoft.net，即引用程序集的旧位置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-18T01:33:43.270

我也有同样的问题。拥有 dll 不起作用，因为我需要为 .net 对象提供本机 C++ 包装器，以便它可以实现 natice c++ 接口 - 我不能在 dll 接口中使用 .net - 这会产生编译错误

这在 VS 2010 中用作静态库（使用 .net 4）

我的一些可执行文件和 dll 也有一些带有 /clr 的代码。他们没有问题。我不是想制作一个网络图书馆。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-24T21:27:58.403

我通过删除旧的且未更新的混合库中的依赖关系来解决它，该库也仅在调试配置中配置，因此，在我更改了一些代码后，它开始出现与您相同的错误。

找到它并不简单，因为错误不清楚，并且依赖是通过项目设置中的“附加依赖”设置的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-29T19:08:49.040

打开 Visual Studio 并卸载您的项目，然后转到项目文件夹并打开文件 .vcxproj 。搜索标签“targetFrameworkVersion”（如果不存在，则表示您的项目未使用 dot net frameworks.so 无需更改）将其更改为所需版本保存文件。现在重新加载项目。

# css - 解释这段 css 代码是如何工作的

> ID：16135496
> 
> 赞同：-3
> 
> 时间：2013-04-21T19:52:16.300
> 
> 标签：css

这个标签集对我有用。但我不明白 CSS 逻辑和它背后的语义。尤其是最后一个 CSS 项目（我认为！）如何帮助保持最后一个单击的选项卡突出显示，直到您单击下一个。有人可以解释一下。

这是CSS：

```
/* <<<<<<<<<<<<<<<<<<< start menu_ main >>>>>>>>>>>>>>>>>>>>>*/
#tabmenu 
{   margin: 0;
    padding: 0;
    list-style-type: none;
}

#tabmenu li 
{   float: left;
    display: block;
    overflow: hidden;
    line-height: 1.6em;
    padding: 0px 5px 0px 5px;
}

#tabmenu a
{   display: block;
    color: #ffffff;
    background: #E28F58; /*brown*/
    /*border-bottom: 1px solid #333333;*/
    text-decoration: none; 
    padding:0 12px 0 12px; 
}

#tabmenu a:hover 
{   background: #333333;
    border-bottom: 3px solid #333333; 
}

#tabmenu a.active, #tabmenu a.active:hover 
{   background: #333333;
    border-bottom: 3px solid #333333;
}

/* <<<<<<<<<<<<<<<<<<< end menu_main >>>>>>>>>>>>>>>>>>>>>*/ 
```

这是索引页面的 HTML：

```
<ul id="tabmenu">
<li><a class="active" href="index.html">Home</a></li>
<li><a href="programs_ar.html">Programs</a></li>
<li><a href="students.html">Student Work</a></li>
<li><a href="research.html">Research</a></li>
<li><a href="staff.html">Staff</a></li>
<li><a href="about_activity.html">About Us</a></li>
<li><a href="contact.html">Contact Us</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:58:58.310

```
#tabmenu a.active, #tabmenu a.active:hover 
{   background: #333333;
    border-bottom: 3px solid #333333;
} 
```

`<a>`标签可以处于 3 种状态中的 1 种状态。

*   未访问：这是默认状态。
*   已访问：如果您之前单击它，则会更改其颜色。
*   Active：即当前点击的`<a>`

该 CSS 规则告诉浏览器更改`<a>`#tabmenu 内任何 Active 的背景。

表示`<a>`您当前正在激活的将被“突出显示”。

该规则还说，如果您将鼠标悬停在此 activate`<a>`上，它将具有此背景颜色。

因此，当您单击另一个`<a>`时，新单击的`<a>`将是已激活的`<a>`，因此它将采用该背景颜色，而前一个`<a>`将是已访问的`<a>`，因此不会采用该颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:00:12.137

据推测，每个页面都在单个菜单项上设置“活动”类，然后由以下选择器匹配：

```
#tabmenu a.active
{   background: #333333;
    border-bottom: 3px solid #333333;
} 
```

当您导航到带有新标记的新页面时，旧的选择会“丢失”，并且`class="active"`现在任何元素都与选择器匹配。

例子：

```
<!-- you've marked the "home" link as active -->
<a class="active" href="index.html">Home</a>

<!-- user clicks another link -->
<!-- browser navigates -->

<!-- on this page, "student work" has a class name of "active" -->
<a class="active" href="students.html">Student Work</a>

<!-- "home" is no longer selected; "student work" is --> 
```

换句话说：任何类名为“active”的锚都将匹配选择器。没有什么可以阻止多个项目匹配，例如[这个例子](http://jsfiddle.net/NnwMW/2/)。

# java - 从 php web 与 Linux 脚本通信

> ID：16135501
> 
> 赞同：0
> 
> 时间：2013-04-21T19:52:49.127
> 
> 标签：java, php, linux, sockets, communication

我正在构建一个 Web 应用程序，可以帮助人们提高某些单词的英语发音。网站为用户显示一个句子，他/她说出来，然后按“结果”按钮。然后，Web 应用程序将两个文件发送到服务器：.txt 和 .wav 文件。

服务器（Linux (Ubuntu)）应获取文件，并进行一些分析和计算，然后将结果打印在名为“Results.txt”的文件中。然后 Web 应用程序（基于 php）应该从文件中读取结果并将它们显示给用户。

问题是：我不确定如何最好地在 Web 应用程序和 Linux 服务器之间进行通信。到现在，我已经成功在服务器上写了.txt和.wav文件。我可以构建一个 Linux 脚本来获取这两个文件并进行所需的计算。我面临的是：我不知道如何正确有效地启动脚本。更重要的是：脚本完成后，如何知道我可以安全地从“Results.txt”文件中读取结果？我需要一个同步工具或方法。

我问了一些人，他们告诉我在服务器端使用 java 应用程序，但我不知道该怎么做！

任何帮助，请？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:04:53.557

首先，您可以使用 PHP 来完成。使用 shell_exec() 方法，您可以运行 Linux 脚本的命令并读取输出。前任：

> $output = shell_exec("ls -l > outputFile.txt");

将当前目录列表写入一个名为 outputFile.txt 的文件

其次，您也可以使用 Java 来做同样的事情。采用：

> Runtime.getRuntime().exec("ls -l").waitfor();

最后不使用 waitfor() 会导致你的 shell 脚本异步执行。您还可以使用读取 Linux 脚本的 stdout 和 stderr 流

> Process.getInputStream()

和

> Process.getErrorStream()

方法分别。希望有帮助。

# jquery - jQuery mobile 动态添加主题到页面

> ID：16135505
> 
> 赞同：0
> 
> 时间：2013-04-21T19:53:17.353
> 
> 标签：jquery, jquery-mobile

我正在使用 jQuery mobile 动态构建一个新页面。我现在想添加主题，即 `data-theme="a"`。有没有更简单的方法来做到这一点？目前看起来我会将它添加到下面的每个 div 中。

```
 var newPage = $("<div data-role='page' id='" + v["id"] +
                "'><div data-role=header><a data-iconpos='left' data-icon='back' href='#' data-role='button' " +
                "data-rel='back'>Back</a>" +
                "<h1>" + v["name"] + "</h1>" +
                "</div>" +
                "<div data-role=content>" + pagecontent +
                "</div>" +
                "<div data-role='footer'>" +
                "<h4>" + v["name"] + "</h4>" +
                " </div>" +
                "</div>");

            // Append the new page info pageContainer
            newPage.appendTo($.mobile.pageContainer); 
```

也就是说，如果有这样的东西就好了......

```
 newPage.appendTo($.mobile.pageContainer).theme('a'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T22:43:31.597

# 更新 - jQuery Mobile 1.4

使用或时，[小部件](https://github.com/jquery/jquery-mobile/issues/8385)中存在[错误`.page()`](https://github.com/jquery/jquery-mobile/issues/8385)。它不会删除当前的主题类，但是会添加新的主题类。然而，新类不会覆盖旧类。所以这里是修复。`.page({"theme"})``.page("option", "theme")`

```
(function($, undefined) {
  $.widget("mobile.page", $.mobile.page, {
    _setOptions: function(o) {
      if (o.theme !== undefined) {
        this.element
          .removeClass(function(i, c) {
            return (c.match(/\bui-page-theme-\w/g) || []).join(' ');
          })
          .addClass("ui-page-theme-" + o.theme);
      }
    }
  });
})(jQuery); 
```

> **注意：** jQuery Mobile 中的默认主题是**"a"**。

* * *

要为动态创建的页面设置主题，`$('.selector').page({theme:'e'});`请在附加页面之后使用`$.mobile.changePage()`.

对于特定页面：

```
$('.selector').page({theme:'e'}); 
```

对于所有页面：

```
$('[data-role=page]').page({theme:'e'}); 
```

* * *

**[演示](https://jsfiddle.net/Palestinian/L6d9wxb2/)**[- 更新 .page() 修复](https://jsfiddle.net/Palestinian/L6d9wxb2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-10T06:25:35.797

我用这个，它真的很棒：D

[Mikael Kindborg 来自 Change data-theme in jQuery mobile 的回答](https://stackoverflow.com/questions/7667603/change-data-theme-in-jquery-mobile/23577762#15585104)

```
$.mobile.changeGlobalTheme = function(theme)
    {
        // These themes will be cleared, add more
        // swatch letters as needed.
        var themes = " a b c d e";

        // Updates the theme for all elements that match the
        // CSS selector with the specified theme class.
        function setTheme(cssSelector, themeClass, theme)
        {
            $(cssSelector)
                    .removeClass(themes.split(" ").join(" " + themeClass + "-"))
                    .addClass(themeClass + "-" + theme)
                    .attr("data-theme", theme);
        }

        // Add more selectors/theme classes as needed.
        setTheme(".ui-mobile-viewport", "ui-overlay", theme);
        setTheme("[data-role='page']", "ui-page-theme", theme);
        setTheme("[data-role='header']", "ui-bar", theme);
        setTheme("[data-role='listview'] > li", "ui-bar", theme);
        setTheme(".ui-btn", "ui-btn-up", theme);
        setTheme(".ui-btn", "ui-btn-hover", theme);
    }; 
```

# html - div彼此相邻，对齐到底部

> ID：16135506
> 
> 赞同：0
> 
> 时间：2013-04-21T19:53:17.697
> 
> 标签：html, css

有 3 个 div 彼此相邻：

```
<div style="left: float;">1</div>
<div style="left: float;">2</div>
<div style="left: float;">1</div> 
```

这应该看起来像：

```
 content
        content
page 1  content  page 2 
```

所以页面 X 应该与底部对齐。我看到一些“相对于父母，绝对+底部 0 为孩子 - 没有工作！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T19:57:58.813

浮动是一个糟糕的选择，你希望你的元素是内联块并调整垂直对齐：

[http://tinker.io/f6b9e](http://tinker.io/f6b9e)

```
div {
    display: inline-block;
    vertical-align: text-bottom;
}

<div>1</div>
<div>2</div>
<div>1</div> 
```

# python - 在python中在封闭范围内迭代[a，b]

> ID：16135509
> 
> 赞同：13
> 
> 时间：2013-04-21T19:53:22.237
> 
> 标签：python, loops, iterator, range, xrange

我想在python中迭代一个封闭的整数范围[a，b]，即。从 a 迭代到 b，包括 a 和 b。

我知道以下方法：

```
for i in range(a, b+1):
    do_something(i) 
```

为了反向迭代（即按 b、b-1、b-2、...、a 的顺序），我执行以下操作：

```
for i in range(b, a-1, -1):
    do_something(i) 
```

我不喜欢这种加法（示例中的 b+1）和减法（示例中的 a-1）达到范围的封闭端。我发现它的可读性不如 c/c++/Java 对应物（`<=`在循环中使用 of）。

你在 python 中有什么东西可以用来在封闭范围之间迭代而无需手动干预边界吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T21:56:59.793

定义自己的函数并使用它是一件简单的事情：

```
def closed_range(start, stop, step=1):
  dir = 1 if (step > 0) else -1
  return range(start, stop + dir, step): 
```

在行动：

```
>>> list(closed_range(1, 10))
0: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
>>> list(closed_range(1, 10, 2))
1: [1, 3, 5, 7, 9]
>>> list(closed_range(1, 10, 3))
2: [1, 4, 7, 10]
>>> list(closed_range(10, 1, -1))
3: [10, 9, 8, 7, 6, 5, 4, 3, 2, 1]
>>> list(closed_range(10, 1, -2))
4: [10, 8, 6, 4, 2] 
```

保存到 \PythonXX\Lib\site-packages 中的 .py 文件，然后您可以将其导入以在其他地方使用。

# c# - 学生分数的分组平均值

> ID：16135511
> 
> 赞同：1
> 
> 时间：2013-04-21T19:53:35.820
> 
> 标签：c#

我有如下的学生名单

```
public class Student
{
    public string First { get; set; }
    public string Last { get; set; }
    public int ID { get; set; }
    public List<int> Scores;
}

List<Student> students = new List<Student>()
     {
         new Student { First = "a", Last = "aa", ID = 1, Scores = new List<int>() { 97, 92, 81, 60 } },
         new Student { First = "b", Last = "bb", ID = 2, Scores = new List<int>() { 75, 84, 91, 39 } },
         new Student { First = "c", Last = "cc", ID = 3, Scores = new List<int>() { 88, 94, 65, 91 } },

     }; 
```

如何根据学生的平均分数对他们进行分组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:02:39.763

```
var groups = students.GroupBy(s => s.Scores.Average()); 
```

这为您提供了一个元素列表，其中键等于平均值​​，值等于具有该平均值的学生：

```
foreach(var g in groups){
    Console.WriteLine("Average: "+ g.Key);
    foreach(var s in g){
        Console.WriteLine(s.ID +":"+ s.First +" "+ s.Last);
    }
} 
```

# c - 结构内指针数组的大小

> ID：16135514
> 
> 赞同：2
> 
> 时间：2013-04-21T19:53:40.460
> 
> 标签：c, arrays, pointers, struct, sizeof

我有这两个结构：

```
typedef struct {
    char name[20];
    int num;
    int score;
} player;

typedef struct {
    char name[20];
    player *players;
} team; 
```

`*players`我需要知道我的`team`结构中每个存储的元素数量。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T19:56:13.377

你不能。 `players`是指向 N 个`player`实例的指针。它只携带一个地址的信息。它不是一个数组；它是一个指针。

您必须单独存储结构中的元素数量。

```
typedef struct {
    char name[20];
    player *players;
    size_t num_players;
} team; 
```

顺便说一句，你最好希望 Jarrod Saltalamacchia 永远不会加入这个团队。

# php - Codeigniter - 从 youtube 视频 JSON 响应中获取“thumbnail_url”

> ID：16135515
> 
> 赞同：0
> 
> 时间：2013-04-21T19:53:48.010
> 
> 标签：php, json, codeigniter

我正在尝试通过其 JSON 响应从 youtube 视频中保存缩略图 img URL。

用户首先通过表单提交 youtube 链接。

控制器：

```
$data['video_thumb'] = $this->gallery_model->get_youtube('link');

        $this->load->view('templates/header');
        $this->load->view('media/index', $data);
        $this->load->view('templates/footer'); 
```

模型：

```
function get_youtube($url){

        $youtube = "http://www.youtube.com/oembed?url=". $url ."&format=json";

        $curl = curl_init($youtube);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
        $return = curl_exec($curl);
        curl_close($curl);
        $result = json_decode($return, true);

        $video_thumb = $result->thumbnail_url;
        $video_thumb = str_replace('"\"','',$video_thumb);

        return $video_thumb;
    } 
```

看法：

```
<?php echo $video_thumb; ?> 
```

我是 codeigniter 和一般编码的新手，我意识到我的结构可能不是最合适的。

到目前为止，当我渲染视图时，会出现：

```
Severity: Notice

Message: Undefined variable: video_thumb 
```

为什么会这样？你能建议我一个更好的方法吗？谢谢！到目前为止，我只是打印出 thumbnail_url 以查看 get_youtube 功能是否有效，但显然不是。

再次感谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:58:41.947

您正在使用以下行从 json 响应生成一个数组：

```
$result = json_decode($return, true); 
```

（[请参阅文档](http://php.net/manual/en/function.json-decode.php)）您应该在某处也看到“PHP 通知：尝试获取非对象的属性”错误。

所以`$result->thumbnail_url`应该改为，或者你可以从也可以工作的参数中`$result['thumbnail_url']`删除第二个。`true``json_decode()`

# magento - Magento 1.7.02 - 如何在送货方式步骤中获取新输入的送货地址

> ID：16135521
> 
> 赞同：0
> 
> 时间：2013-04-21T19:54:30.087
> 
> 标签：magento

正如标题所说，我如何才能在送货方式中打印新输入的送货地址。

进入 Magento 1.7.02，如您所知，结帐中的所有数据都保存在 javascript vars 中并发布到服务器，直到下订单，我需要在运输方法步骤中打印地址和名称。

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:24:10.067

```
 Mage::getSingleton('checkout/session')->getQuote()->getShippingAddress() 
```

这将返回当前会话的送货地址

# javascript - javascript array.push inside for 循环——结果不是数组？

> ID：16135525
> 
> 赞同：0
> 
> 时间：2013-04-21T19:54:33.560
> 
> 标签：javascript, arrays

我试图通过使用 for 循环访问数据库中的某些记录来填充数组，然后将某些 DB 字段的内容与文本结合起来以创建每个数组元素。这是我所拥有的：

```
var numbers = [7,8];
var phsw = [];
for (var i=0,len=numbers.length;i<len;i++) {
    selectObj = cObj.select().from("wp_posts").where('ID=?', numbers[i]);
    result1 = cObj.exec(selectObj);
    var resource = result1[0].guid;
    var title = result1[0].post_title;
    var tnTxt = result1[0].post_title;
    var tn = resource.replace(/\.jpg/,"-150x150.jpg");
    phsw.push({mytitle:'" + title + "', mythumbnail:'" + tn + "', mytntxt:'" + tnTxt + "', myresource:'" + resource +"'});
    } 
```

这创建了我认为的数组，但它显然不是真正的数组。当我使用 console.log(phsw) 查看其中的内容时，我得到了这个：

[{mytitle:'title',mytntxt:'imagefile1tnlink',mytntxt:'thumbtxt1',myresource:'imagefile1link'},{mytitle:'title2',mythumbnail:'imagefile2tnlink',mytntxt:'thumbtxt2',myresource:'imagefile2link '}]

我应该在哪里得到这个：

[对象对象]

如果它真的是一个数组（对吗？？）。

我在 Application Craft 中使用它，并且 phsw 数组是使用服务器端 javascript 创建的，然后被传递给应用程序端的回调，但是当它返回到应用程序端时，我无法使用它来填充一个小部件，因为它不是真正的数组。如何确保 phsw 是一个数组？

是的，我确信这段代码不是最干净或最有效的方法；我（相当生疏）的经验是使用 PHP 和 MySQL 而不是 javascript，所以我总是乐于接受更好的做事方法的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:56:58.897

没有一切都是正确的。它实际上是一个恰好包含 2 个对象的数组。

您应该得到 [object Object] 的期望是错误的。

# xml - 访问 AS3 中 XML 对象的可能未定义属性？

> ID：16135526
> 
> 赞同：0
> 
> 时间：2013-04-21T19:54:34.450
> 
> 标签：xml, actionscript-3, compiler-errors

AS3 编译器说直接通过 XML 对象访问属性是错误的。这是旧版（AS2）代码还是应该与 AS3 编译器一起正常工作？我被告知在 AS3 中支持 E4X，它允许直接访问属性。

我在 Windows 7 上使用 FlashDevelop 4、Flex 4.5.1 和 AIR 3.0 进行`-swf-version=13`编译。我已经设置并且正在“严格模式”下编译。代码来自一个成熟的 AS3 库，绝对可以编译。我究竟做错了什么？

```
var node:XML;
var n:String = node.@name; // Access of possibly undefined property "name" through .. XML 
```

**编辑：**这*不是*运行时错误，它表示我无法访问属性，因为变量为空，它是**编译时错误**，并阻止了项目的编译。它的 AS3 编译器拒绝允许编译 XML 对象内的直接属性访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:36:44.513

在变量声明中，对象的默认值为 null，即 Sprite、XML、Array、Vector 等。您无法访问 null 对象的任何属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:44:45.853

但是你`node`在这段代码中是未定义的/空的！您应该得到«无法访问空对象引用的属性或方法»错误！如果您已初始化`node`，那么...您是否尝试过清理项目并重新构建它？（有时真的很有帮助）

# javascript - 通过地址栏访问 cookie 的值

> ID：16135529
> 
> 赞同：0
> 
> 时间：2013-04-21T19:54:57.623
> 
> 标签：javascript, cookies, address-bar

假设我网站上的用户拥有来自另一个网站的 cookie，并且我知道 cookie 的名称。基本上我想要做的是给用户一个指向地址栏的链接，以及一个 Javascript 代码，它将激活该 cookie 的值（让我们称该 cookie 为“Joe”）。例如：

我的网站会给用户这个链接：Examplesite.com/page=（这里是用javascript或其他东西激活特定cookie值的代码）

读取值后，输出必须是这样的：Examplesite.com/page=54（假设 cookie 的值为 54）。

我无法使用普通脚本来执行此操作，因为我无法控制 Examplesite.com cookie（我不拥有该网站）。所以我想，为什么不给用户一个链接，浏览器会认为用户请求访问这些 cookie（这实际上是真的，因为他正在粘贴它），而不是一些随机的网站。然后用户所要做的就是将它粘贴到地址栏中，地址栏将激活它......我不确定这是否可能。任何答案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:46:46.280

在 Firebug 和其他浏览器开发工具出现之前，我曾经在 URL 栏中输入以下内容来查看站点 cookie：

```
javascript:alert(document.cookie) 
```

所以，我只是去了 google.com，然后在我的 Mac（OS X 10.8）上使用 Firefox 19、Chrome 26 和 Safari 6 进行了尝试。

Chrome 让我输入`javascript:alert(document.cookie)`，但是当我将其粘贴到 URL 栏中时，它会剥离`javascript:`并刚刚粘贴`alert(document.cookie)`，这会运行谷歌搜索。

Safari 会在粘贴时提醒 cookie，但 Firefox 不允许粘贴，也不允许输入。

这些结果是用户直接输入的，结果好坏参半。使用来自另一个站点的链接，以及所有“跨域”安全问题，这是行不通的。如果您想一想，这实际上是另一种形式的[跨站点脚本 (XSS)](https://en.wikipedia.org/wiki/Cross-site_scripting)攻击。

# java - 使用ajax将数据发送到jsp页面并打开它

> ID：16135532
> 
> 赞同：1
> 
> 时间：2013-04-21T19:55:10.517
> 
> 标签：java, ajax, jsp

我可以使用下面的方法将数据发送到 jsp 页面。但我需要打开同一页面并向用户显示数据（uuid）。如何使用此方法将数据发送到 test.jsp 并打开页面（test.jsp）？

```
function EditRule(i){
var uuid = document.getElementsByName('uuid'+i).item(0).value;

xmlhttp = GetXmlHttpObject();
if (xmlhttp == null) {
    alert("you have to use newer versions of browser");
    return;
}
var url = "test.jsp";
var parameters = "uuid=" + uuid;
xmlhttp.onreadystatechange = getEditRule;
xmlhttp.open("POST", url, true);

// Send the proper header information along with the request
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.setRequestHeader("Content-length", parameters.length);
xmlhttp.setRequestHeader("Connection", "close");

xmlhttp.onreadystatechange = getEditRule;
xmlhttp.send(parameters);

}
function getEditRule() {
if (xmlhttp.readyState == 4) {
     var input = document.getElementById('temp');
     input.value = xmlhttp.responseText.trim();

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:11:12.590

我认为您不了解 JSP 页面是什么，因为您不能“使用 AJAX 将数据发送到 JSP 页面”。JSP 页面只存在于服务器上，而不存在于客户端的浏览器中。在服务器上，JSP 页面被编译成客户端可读格式 (HTML)，然后以该格式发送到客户端。因此，如果您希望 JSP 页面最终导致发送 AJAX 请求，您可以将 Javascript 嵌入到触发 AJAX 的 JSP 页面中。然后，您还将拥有一个能够解析响应的 Javascript 函数。JQuery 文档中提供了所有这些的示例。

# jquery - jquery使用运算符调整div大小问题

> ID：16135536
> 
> 赞同：0
> 
> 时间：2013-04-21T19:55:46.803
> 
> 标签：jquery

我希望任何人都可以帮助我，

我有 3 个方块，我想在方块上使用动画，但使用“>”或“>”等运算符

但我不知道如何实现这一点，

on click 功能有效，但是如果您在第一个 div 进行动画制作时单击第二个 div，结果是两个 div 都会被展开，目的是当第一个 div 展开时另一个 div 不会，依此类推，试试看

```
 $(function () {
       $("#square1").on("click", function () {
        if ($("#square2").css('width') == '500px') {
            $("#square2").animate({
                width: "50"
            }, 1000);
            $("#square1").animate({
                width: "500"
            }, 1000);
        } else if ($("#square1").css('width') == '500px') {
            $("#square1").animate({
                width: "50"
            }, 1000);
        } else {
            $("#square1").animate({
                width: "500"
            }, 1000);
                }
            });
        });
$(function () {
    $("#square2").on("click", function () {
        if ($("#square1").css('width') == '500px') {
            $("#square1").animate({
                width: "50"
            }, 1000);
            $("#square2").animate({
                width: "500"
            }, 1000);
        } else if ($("#square2").css('width') == '500px') {
            $("#square2").animate({
                width: "50"
            }, 1000);
        } else {
            $("#square2").animate({
                width: "500"
            }, 1000);
        }
    });
});
$(function () {
    $("#vierkant").on("click", function () {
        if ($("#square1").css('width') == '500px') {
            $("#square1").animate({
                width: "50"
            }, 1000);
            $("#square2").animate({
                width: "50"
            }, 1000);
        }
    });
}); 
```

[http://jsfiddle.net/c34Ha/](http://jsfiddle.net/c34Ha/)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:01:15.380

您可以通过添加来检查是否有任何 div 在动画另一个之前被动画

```
if (!$("#square1").is(':animated')) {
    // do stuff
} 
```

[http://jsfiddle.net/c34Ha/1/](http://jsfiddle.net/c34Ha/1/)

# python - app.config.from_object('config') 导致 uWSGI 错误？

> ID：16135541
> 
> 赞同：0
> 
> 时间：2013-04-21T19:56:07.537
> 
> 标签：python, nginx, flask

尝试在 nginx + uwsgi 上部署烧瓶应用程序。它在本地工作，我正在尝试将它托管在新的地方。我更改了配置参数以适应新环境，但似乎没有任何效果。在系统地删除文件中的所有行后`__init__.py`，我发现只有注释掉这一行：

```
app.config.from_object('config') 
```

---会渲染我的应用程序。即使我从 config.py 文件中删除了所有行，或者仅包含安全值，例如：

```
ALLOWED_EXTENSIONS = set(['txt','png']) 
```

---仍然是调用`app.config.from_object('config')`导致uWSGI错误的情况。（我也尝试调用 config.py，同样的事情。）

这里可能发生了什么，我如何像在本地一样设置配置，如此[处所述](http://flask.pocoo.org/docs/config/)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:06:41.530

好的，这是`config.py`. 它应该比`__init__.py`文件高一级文件夹。我将它们放在同一个子文件夹中`appname/appname`，它应该只是`appname/config.py`和`appname/appname/__init__.py`。

# java - 从链接列表中删除所有元素

> ID：16135545
> 
> 赞同：0
> 
> 时间：2013-04-21T19:56:22.537
> 
> 标签：java

所以我试图删除我的链表中的所有元素，到目前为止我可以删除某些元素并删除列表尾部的元素。我将如何删除列表中的所有元素？我要指出的是，我们已经不允许在 java 中使用链表的内置方法

```
import java.util.*;
class Node{
    //node class
    char data;
    Node next;
    public Node(Character ch){
        data = ch; next = null;
    }
    public Node next(){return next;}
    public void setNext(Node p){
        next = p;
    }
    public void set(Character ch){data = ch;}
    public int data(){return data;}
}
class Reader{
        Node head = null; Node tail = null;
        public void add(Character ch){          
        Node nw = new Node(ch);
        if(head == null){
            head = nw; tail = nw;
        }
        else{
            tail.setNext(nw);
            tail = nw;
        }
        }       
        public void display(){
            //display characters
            Node k = head; 
            System.out.print('[');
            while(k!=null){
                if(k.next!=null)
                    System.out.print((char)k.data()); 
                else
                    System.out.print((char)k.data());
                k=k.next(); 
            }   
            System.out.print(']'); 
        } 

         public void del(){
             Node k = head;
                if (tail == null)
                      return;
                else {
                      if (head == tail) {
                            head = null;
                            tail = null;
                      } else {
                            while (k.next != tail)
                                 k = k.next;
                            tail = k;
                            tail.next = null;
                      }
                }
          }

        public void delLine(){
                //delete current line

              }
    }

class assignment9{
    public static void main(String[]args){
        Scanner in = new Scanner(System.in); 
        Reader r1 =  new Reader();
        System.out.println("Enter characters");
        r1.add(in.next().charAt(0));r1.add(in.next().charAt(0));r1.add(in.next().charAt(0));r1.add(in.next().charAt(0));r1.add(in.next().charAt(0));                

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T20:00:33.923

做就是了：

```
public void deleteAll(){  
   head = tail = null;  
} 
```

GC 会处理剩下的事情

# facebook-fql - 在没有 Page 的帖子的情况下获取信息流

> ID：16135546
> 
> 赞同：0
> 
> 时间：2013-04-21T19:56:26.720
> 
> 标签：facebook-fql

我想获取我的信息流中的所有帖子，而不是来自页面的帖子。我努力了：

```
SELECT post_id, actor_id, target_id, message, comment_info, likes FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid = me() AND type = 'newsfeed') AND NOT (actor_id IN (SELECT id FROM object_url WHERE type='Page')) 
```

但是，您不能在 Where 子句中使用 type='Page'，因为它不可索引。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:34:39.250

我看过了，以下似乎对我有用：

```
 SELECT post_id, actor_id, target_id, message, comment_info, likes FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid = me() AND type = 'newsfeed') AND NOT (actor_id IN (SELECT target_id FROM connection WHERE target_type='Page' AND source_id = me())) 
```

这是做你想做的吗？

# xamarin.ios - 如何让我的自定义 uipickerview 从 montouch 对话框 StyledStringElement 轻按事件中显示

> ID：16135547
> 
> 赞同：1
> 
> 时间：2013-04-21T19:56:27.540
> 
> 标签：xamarin.ios, xamarin

我有一个支持 uipickerviewmodel 的自定义 uipickerview。

它适用于文本字段，但我发现自己创建了精心制作的自定义 xib，只是为了能够保存文本字段，因此我可以将 inputview 设置为我的选择器，使其成为第一响应者。

当然必须有一种更简单的方法，我可以以某种方式连接 stylestringelement 的点击事件以显示选择器？

请有人可以帮助使用 MT.D 元素的代码片段打开使用点击的选择器，我真的被卡住了，因为到目前为止我只能获得一个带有选择器的操作表，但无法附加工具栏（inputaccessoryview）。

# ssl - 使用 Spring 3.1 的混合模式 X509 身份验证

> ID：16135553
> 
> 赞同：2
> 
> 时间：2013-04-21T19:57:01.573
> 
> 标签：ssl, spring-security, tomcat7, x509

我对 Spring 有点陌生，也是 SSL 身份验证的新手。

我的问题是我有一个 Web 应用程序，它可以很好地与基于表单的身份验证配合使用。我需要使用 SSL 客户端身份验证自动对我的应用程序的一部分进行身份验证。

到目前为止我所做的。

1.  SSL启用tomcat（我可以访问[https://mydomain.com:9443](https://mydomain.com:9443)）
2.  将客户端证书导入服务器信任库
3.  更改 server-xml 并在我的 server.xml 中设置 clientAuth="want"

    ```
    连接器端口="9443"
    协议="HTTP/1.1"
    SSL启用=“真”
    maxThreads="150"
    方案="https"
    安全=“真”
    clientAuth="想要"
    sslProtocol="TLS"
    keystoreFile="c:\serverkeystore"
    keystorePass="ChangeIt" />

    ```

4.  在我的 security-context.xml 中的**http** 下添加**了 x509 subject-principal-regex="CN=(.*?)," user-service-ref="customUserDetailService"**

     **```
    < http auto-config="true" 使用表达式="true" >
        < x509 subject-principal-regex="CN=(. *?)," user-service-ref="myUserDetailService" />
       <intercept-url pattern="/upload" requires-channel="https" />
       <intercept-url pattern="/* *" access="hasRole('ROLE_USER')" />
        <form-login login-page="/login.jsp"
                   default-target-url="/index.jsp"

                   authentication-failure-url="/login.jsp?error=1" />
        < 注销 logout-url="/j_spring_security_logout" logout-success-url="/loggedout.jsp" delete-cookies="JSESSIONID"/>

    ```** 
***   添加**<intercept-url pattern="/upload" requires-channel="https" />**以保护 url*   *myUserDetailService*正在实现 UserDetailsS​​ervice 并返回 UserDetails 对象（我用于基于表单的身份验证的同一类，基于数据库存储的用户名、密码、角色）。**

 **我的问题是任何 URL 路径（即使使用 /upload）它总是向我显示 login.jsp 页面。

我正在使用 Spring 和 Spring security 3.1.3 和 tomcat 6.0.35

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:24:46.163

你必须分开问题：

1.  通过客户端证书身份验证所有`/upload`URL
2.  通过表单认证其他网址进行认证

以下配置将允许在 SpringSecurity 3.1 中单独解决这些问题：

```
<http pattern="/upload/**" >
    <intercept-url pattern="/*" access="hasRole('ROLE_USER')" requires-channel="https"/>
    <x509 subject-principal-regex="CN=(.?)," user-service-ref="myUserDetailService" />
</http>

<http use-expressions="true">
    <intercept-url pattern="/login.jsp*" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
    <intercept-url pattern="/**" access="ROLE_USER"/>
    <form-login login-page="/login.jsp" 
           default-target-url="/index.jsp"
           authentication-failure-url="/login.jsp?error=1"  />
    <logout logout-url="/j_spring_security_logout" logout-success-url="/loggedout.jsp" delete-cookies="JSESSIONID"/>
</http> 
```**

# xml - 使用写字板在 Windows 中构建 RSS XML 时出错

> ID：16135557
> 
> 赞同：0
> 
> 时间：2013-04-21T19:57:16.087
> 
> 标签：xml, windows, rss, wordpad

我正在尝试在 Windows 中使用 Word Pad 构建 XML Rss 提要。我得到的问题是，当我尝试在 Firefox 中查看时，它给了我这个消息：

```
This XML file does not appear to have any style information associated with it. The document tree is shown below. 
```

它的链接是[http://cursosbiblicos.net/app/AudioXml/Efesios.xml](http://cursosbiblicos.net/app/AudioXml/Efesios.xml)

写字板的文字是：

```
<?xml version="1.0" encoding="utf-8"?><rss xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd" version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><atom:link href="http://www.cursosbiblicos.net/efesios.xml" type="application/rss+xml" rel="self"/><lastBuildDate>Tue, 9 Apr 2013 09:26:14 -0500</lastBuildDate><link>http://www.cursosbiblicos.net</link><description>efesios XML</description><language>en</language><copyright>2013 Cursos Biblicos</copyright><item><description> Efesios1:1-4 </description><link> http://cursosbiblicos.net/cursos/mp3streamer/files/1EF%201.1-4%20Los%20Escogidos.mp3</link></item><item><description> Efesios1:4-5 </description><link> http://cursosbiblicos.net/cursos/mp3streamer/files/2EF%201.4-5%20La%20Predestinacion.mp3</link></item><item><description> Efesios1:5-6 </description><link> http://cursosbiblicos.net/cursos/mp3streamer/files/3EF%201.5-6%20Para%20Alabanza%20de%20la%20Gloria%20de%20Su%20Gracia.mp3</link></item><item><description> Efesios1:7-8 </description><link> http://cursosbiblicos.net/cursos/mp3streamer/files/4EF%201.7-8%20La%20Redencion.mp3</link></item><item><description> Efesios1:9-10 </description><link> http://cursosbiblicos.net/cursos/mp3streamer/files/5EF%201.9-10%20El%20Proposito%20Eterno%20de%20Dios.mp3</link></item><channel></rss> 
```

但是，在我保存它之后，它开始添加：

```
turnerc23turnerc23212013-04-22T01:31:00Z2013-04-22T01:31:00Z13411945Toshiba164228212 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:17:37.033

您看到的消息只是当您查看 XML 文档而不是通常的 HTML 文档时浏览器倾向于给您的警告。XML 文档应显示在警告下方，但在您的情况下，您的 XML 文档看起来是空的。

如果您向我们展示您的写字板 XML 文档，将会很有帮助。

**编辑：**

看起来写字板是一个富文本编辑器，因此它会将自己的格式信息添加到您的文档中。你不希望出现这种情况。

改用纯文本编辑器，例如。Windows 记事本。

# sql - 按查询分组按 Desc 顺序列出 Biggest_Purchase

> ID：16135560
> 
> 赞同：0
> 
> 时间：2013-04-21T19:57:30.400
> 
> 标签：sql, sql-server-2008

以下是我的查询：

```
select MAX(o.amount)as Biggest_Purchase , c.cust_fname, c.cust_lname 
from orders o, customer c
where o.cust_num = c.cust_num
group by c.cust_fname, c.cust_lname
order by o.amount desc; 
```

为什么我会收到以下错误？：

消息 8127，级别 16，状态 1，第 5 行列“orders.amount”在 ORDER BY 子句中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:00:47.483

您只能`select`在`order by`. 我想你的意思是：

```
select MAX(o.amount)as Biggest_Purchase , c.cust_fname, c.cust_lname 
from orders o, customer c
where o.cust_num = c.cust_num
group by c.cust_fname, c.cust_lname
order by Biggest_Purchase desc; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:00:34.457

```
select MAX(o.amount)as Biggest_Purchase , c.cust_fname, c.cust_lname 
from orders o, customer c
where o.cust_num = c.cust_num
group by c.cust_fname, c.cust_lname
order by max(o.amount) desc; 
```

# c# - dotnetnuke : 移动和网页的会员资格

> ID：16135562
> 
> 赞同：0
> 
> 时间：2013-04-21T19:57:40.107
> 
> 标签：c#, dotnetnuke

我们正在构建一个通过 DNN 集成的移动应用程序。

移动应用程序使用连接到 DNN 模块的 ASP.net 网络服务，在移动应用程序中存在两个选项

第一个选项：

*   注册屏幕

在 DNN 模块中创建新用户，问题是在 ASP.net Web 服务中负责创建新用户的网络方法，它连接到 DNN 数据库并在表（成员表）中插入新记录

*   aspnet_Membership

-aspnet_Users

-用户

问题是在这些表中插入新用户时

([aspnet_Membership]) 使用 ASP.net 代码和 Linq.sql 框架

对于这些领域

，[密码]

,[密码格式]

,[密码盐]

我们使用 Trible DES 算法获取用户密码

我们创建类来生成盐和加密和解密密码

```
public class NetFourMembershipProvider : SqlMembershipProvider
{
    public string GenerateSalt()
    {
        var buf = new byte[20];

        (new RNGCryptoServiceProvider()).GetBytes(buf);

        return Convert.ToBase64String(buf);
    }

    public string EncodePassword(byte passFormat, string passtext, string passwordSalt)
    {
        if (passFormat.Equals(0)) // passwordFormat="Clear" (0)
            return passtext;
        else
        {
            byte[] bytePASS = Encoding.Unicode.GetBytes(passtext);
            byte[] byteSALT = Convert.FromBase64String(passwordSalt);
            byte[] byteRESULT = new byte[byteSALT.Length + bytePASS.Length + 1];

            System.Buffer.BlockCopy(byteSALT, 0, byteRESULT, 0, byteSALT.Length);
            System.Buffer.BlockCopy(bytePASS, 0, byteRESULT, byteSALT.Length, bytePASS.Length);

            if (passFormat.Equals(1)) // passwordFormat="Hashed" (1)
            {
                HashAlgorithm ha = HashAlgorithm.Create(Membership.HashAlgorithmType);

                return (Convert.ToBase64String(ha.ComputeHash(byteRESULT)));
            }
            else // passwordFormat="Encrypted" (2)
            {
                return (Convert.ToBase64String(this.EncryptPassword(byteRESULT)));
            }
        }
    }

    public string GetClearTextPassword(string encryptedPwd)
    {
        byte[] encodedPassword = Convert.FromBase64String(encryptedPwd);
        byte[] bytes = this.DecryptPassword(encodedPassword);

        if (bytes == null)
        {
            return null;
        }

        return Encoding.Unicode.GetString(bytes, 0x10, bytes.Length - 0x10).Substring(0, Encoding.Unicode.GetString(bytes, 0x10, bytes.Length - 0x10).Length - 1);
    }

    public new byte[] EncryptPassword(byte[] password)
    {
        return base.EncryptPassword(password);
    }
} 
```

并在 web.config 文件中添加 sypher 密钥

在应用设置部分，我们添加

在 system.web 部分，我们添加

`<machineKey validationKey="42441B48BCA3F15B2353E426BC2C9111680E09E8" decryptionKey="00B3BAE82FEF44753E95AE088CCDB5E75C0F3BB1E58DEC2A" decryption="3DES" validation="SHA1" />`

注册网络服务的代码是

```
 try
        {

            string Email = Request.QueryString["Email"];
            string UserName = Request.QueryString["UserName"];
            string MobileNo = Request.QueryString["MobileNo"];
            string FirstName = Request.QueryString["FirstName"];
            string LastName = Request.QueryString["LastName"];
            string password = Request.QueryString["Password"];
            string salt = "35wj1+r/Dr6RYjBbIRhWeQ==";

            NetFourMembershipProvider decriptor = new NetFourMembershipProvider();

            string encryptedpassword = decriptor.EncodePassword(2, password, salt);

            ORMDataContext myContext = new ORMDataContext();

            int userCount = (from user in myContext.Users
                             where user.Username == UserName
                             select user.UserID).Count();

            CustomUser myUser = new CustomUser();

            if (userCount == 0)
            {
                aspnet_User membership_user = new aspnet_User();

                membership_user.ApplicationId = Guid.Parse("4985C01A-3338-49C9-AC39-DC5934D5ED7A");
                membership_user.UserName = UserName;
                membership_user.LoweredUserName = UserName.ToLower();
                membership_user.LastActivityDate = DateTime.Now;
                membership_user.IsAnonymous = false;
                membership_user.MobileAlias = MobileNo;
                membership_user.UserId = Guid.NewGuid();

                myContext.aspnet_Users.InsertOnSubmit(membership_user);
                myContext.SubmitChanges();

                aspnet_Membership membership = new aspnet_Membership();

                Guid appID = Guid.Parse("4985C01A-3338-49C9-AC39-DC5934D5ED7A");

                membership.ApplicationId = appID;
                membership.CreateDate = DateTime.Now;
                membership.Email = Email;
                membership.FailedPasswordAnswerAttemptCount = 0;
                membership.FailedPasswordAnswerAttemptWindowStart = DateTime.Now;
                membership.FailedPasswordAttemptCount = 0;
                membership.FailedPasswordAttemptWindowStart = DateTime.Now;
                membership.IsApproved = true;
                membership.IsLockedOut = true;
                membership.LastLockoutDate = DateTime.Now;
                membership.LastLoginDate = DateTime.Now;
                membership.LastPasswordChangedDate = DateTime.Now;
                membership.LoweredEmail = Email.ToLower();
                membership.MobilePIN = "";
                membership.Password = encryptedpassword;
                membership.PasswordAnswer = "";
                membership.PasswordFormat = 2;
                membership.PasswordQuestion = "";
                membership.PasswordSalt = salt;
                membership.UserId = membership_user.UserId;

                myContext.aspnet_Memberships.InsertOnSubmit(membership);

                myContext.SubmitChanges();

                Borsa_Ws.User user = new User();

                user.Username = UserName;
                user.CreatedOnDate = DateTime.Now;
                user.DisplayName = UserName;
                user.Email = Email;
                user.FirstName = FirstName;
                user.LastName = LastName;
                user.UpdatePassword = false;
                user.LastModifiedByUserID = -1;
                user.IsSuperUser = false;

                myContext.Users.InsertOnSubmit(user);
                myContext.SubmitChanges();

                Borsa_Ws.UserRole user_role1 = new Borsa_Ws.UserRole();

                user_role1.UserID = user.UserID;
                user_role1.RoleID = 1;

                Borsa_Ws.UserRole user_role2 = new Borsa_Ws.UserRole();

                user_role2.UserID = user.UserID;
                user_role2.RoleID = 2;
                myContext.UserRoles.InsertOnSubmit(user_role1);
                myContext.UserRoles.InsertOnSubmit(user_role2);
                myContext.SubmitChanges();
                myUser.Roles = new int[] { 1, 2 };
                myUser.Logged = "1";
                myUser.UserID = user.UserID.ToString();
            }
            else
            {
                myUser.Logged = "0";
            }

            JavaScriptSerializer searlizer = new JavaScriptSerializer();
            Response.Clear();
            Response.ContentType = "application/json; charset=utf-8";
            Response.Write(searlizer.Serialize(myUser));
            Response.End();
        }
        catch
        {

        } 
```

当我们来到 DNN 网站并尝试登录我们新插入的数据时

DNN 拒绝登录

所以你能告诉我我的代码是什么吗

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:05:05.327

巴德尔，

不建议直接向 aspnet_membership 和 users 表添加数据，使用 DotNetNuke API[创建新用户](http://truedeveloper.blogspot.in/2011/05/create-user-programmatically-in.html)。

还注意到 Web 服务将需要[哈希密钥验证](https://stackoverflow.com/questions/1061134/prevent-query-string-manipulation-by-adding-a-hash)，以确保目标受众正在使用您的注册服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T03:35:41.280

您的代码对我非常有用！我发现其中一个错误会导致密码不匹配，然后可能无法登录。该行：

```
byte[] byteRESULT = new byte[byteSALT.Length + bytePASS.Length+1]; 
```

应该：

```
byte[] byteRESULT = new byte[byteSALT.Length + bytePASS.Length]; 
```

希望有帮助！

# python - 如何指定字符串方法计数？

> ID：16135566
> 
> 赞同：1
> 
> 时间：2013-04-21T19:57:47.717
> 
> 标签：python

我正在尝试实现一个将字符串作为参数的函数，并且字符串是否在末尾包含字母“ion”决定了输出。

例如，如果我输入字符串 'accordionist'，那么我应该得到 'accordionist' 的输出，因为虽然它包含 'ion'，但它不在字符串的末尾。

但是，如果我输入字符串 'congratulation'，我想将 'ion' 更改为 'e'，因为 'ion' 在单词的末尾。

到目前为止，我有：

```
def wordSwap(x):

    if x.count('ion') == 1:
        return x.replace('ion','e')
    else:
        return x 
```

```
>>> wordSwap('congratulation')
'congratulate' 
```

这很好用，但是当我使用如下字符串时：

```
>>> wordSwap('accordionist') 
```

我明白了

```
'accordeist' 
```

如何指定我只想将“ion”更改为“e”，前提是它位于字符串的末尾？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T20:01:32.317

使用正则表达式：

```
>>> import re
>>> def wordswap(x):
...    return re.sub("ion$", "e", x)
...
>>> wordswap("accordionist")
'accordionist'
>>> wordswap("congratulation")
'congratulate' 
```

`$`是“字符串结尾”锚点（它只匹配字符串的结尾）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T19:58:40.623

```
def wordSwap(x):
    if x.endswith('ion'):
        return x[-3:] + 'e'
    else:
        return x 
```

# php - 对我的 sql 查询进行排序的问题

> ID：16135570
> 
> 赞同：-2
> 
> 时间：2013-04-21T19:58:00.840
> 
> 标签：php, mysql, pdo

```
function getGamesBySearch($criteria) {
try {
        $sortedBy = 'Name';
        $db = getDBConnection();
        $query = "SELECT * 
                    FROM game
                    WHERE Name LIKE :criteria
                    ORDER BY :sortBy DESC";
        $statement = $db->prepare($query);
        $statement->bindValue(':criteria', '%'.$criteria.'%');
        $statement->bindValue(':sortBy',$sortedBy);
        $statement->execute();
        $results = $statement->fetchAll();
        $statement->closeCursor();
        return $results;           // Assoc Array of Rows
    } catch (PDOException $e) {
        $errorMessage = $e->getMessage();
        include '../view/errorPage.php';
        die;
    }       
} 
```

出于某种原因，我的关联数组总是以我的 GameID 顺序返回，当我需要它按照名称的顺序时？这只是我正在上课的奖励，但我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:04:02.113

您不能在 SQL 语句中为列名使用占位符。

您只能将它们用于值。

您的查询按文字字符串排序 - 所有行都相同。

你正在有效地做

```
ORDER BY 'Name' 
```

代替

```
ORDER BY Name 
```

# openerp - 继承视图后无法替换字段

> ID：16135574
> 
> 赞同：0
> 
> 时间：2013-04-21T19:58:11.080
> 
> 标签：openerp

我需要在我的项目模块中使用任务功能（我继承了“project.project”）。我继承了这样的“project.task”：

```
class task(osv.osv):
  _name = "project.task"
  _description = "Task"
  _date_name = "date_start"
  _inherit = 'project.task'
  _columns={
          'my_project_id': fields.many2one('project.my.project', 'Project'),
          }

  task() 
```

现在我需要将任务创建表单中的 project_id 字段替换为“my_project_id”。我这样做了：

```
<record id="view_task_form2_inherited" model="ir.ui.view">
        <field name="name">project.task.form</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_form2"/>
        <field eval="2" name="priority"/>
        <field name="arch" type="xml">
            <field name="project_id" position="replace">
                <field name="my_project_id"/>
            </field>

   </field>
</record> 
```

它给了我这个错误：未捕获的错误：NameError：未定义名称'project_id'。

请注意，如果我使用 position="before" 或 "after"，则正确添加了 "my_project_id" 字段（在 "project_id" 字段之前/之后）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:25:38.247

尝试使用 xpath

```
<xpath expr="//field[@name='project_id']" position="replace"> 
```

愿它会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:51:16.123

替换前检查源模型视图

使用 xpath 替换

在 expr 中使用在 xml 中定义字段的确切路径。

# ruby-on-rails - 如何使用非拆分属性填充虚拟表单字段

> ID：16135579
> 
> 赞同：0
> 
> 时间：2013-04-21T19:58:27.087
> 
> 标签：ruby-on-rails, forms, getter-setter, virtual-attribute

我有一个具有 3 个虚拟属性（phoneAreaCode、phonePrefix 和 phoneSuffix）的表单，将电话号码分成多个段，这些段连接在一起并作为 phoneNum 保存到数据库中。

当用户去更新他们的个人资料时，大部分字段都会被填写，但虚拟字段不会。我尝试使用我认为是吸气剂的东西来使其工作，但我无法弄清楚我错过了什么。关于这一点，我正在使用具有来自第二个模型的地址属性的嵌套表单，但是，当这些属性为 nil 时，表单字段根本不会显示在更新视图中。即使它们为零，有没有办法让它们显示？嵌套的表单属性出现在注册视图中，并且注册和更新视图都从布局呈现相同的表单。模型如下。

```
class User < ActiveRecord::Base
  attr_accessor :phoneAreaCode, :phonePrefix, :phoneSuffix

  attr_accessible :MOS, :dateOfBirth, :ets_pcsDate, :firstName, 
  :lastName, :middleInitial, :phoneNum, :phoneAreaCode, :phonePrefix,
  :phoneSuffix, :rank, :email, :password, :password_confirmation, 
  :address_attributes

  has_secure_password
  has_one :address, dependent: :destroy

  accepts_nested_attributes_for :address

  before_save {  |user| user.email = email.downcase  }
  before_save :create_remember_token
  before_save :create_phoneNum

  validates :rank,      presence: true
  validates :firstName,     presence: true, length: {  maximum: 15  }
  validates :lastName,  presence: true, length: {  maximum: 20  }
  validates :middleInitial, presence: true, length: {  maximum: 1  }

  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email,presence: true,  format: {  with: VALID_EMAIL_REGEX  },
                        uniqueness: {  case_sensitive: false  }

  validates :dateOfBirth,    presence: true
  VALID_MOS_REGEX = /\A\d{2}[a-zA-Z]\z/
  validates :MOS,           presence: true, 
                                    format: {  with: VALID_MOS_REGEX }
  validates :ets_pcsDate,       presence: true

  VALIDATE_AREA_PREFIX_REGEX = /\A\d{3}\z/
  validates :phoneAreaCode,     presence: true,  
                                    format: { with: VALIDATE_AREA_PREFIX_REGEX }                               
  validates :phonePrefix,           presence: true,
                                    format: { with: VALIDATE_AREA_PREFIX_REGEX }
  VALIDATE_SUFFIX_REGEX = /\A\d{4}\z/                                       
  validates :phoneSuffix,           presence: true,
                                    format: { with: VALIDATE_SUFFIX_REGEX }
  validates :password,      length: {  minimum: 6  }
  validates :password_confirmation, presence: true

  private
    def create_phoneNum
      self.phoneNum = [phoneAreaCode, 
                      phonePrefix, phoneSuffix].join(' ')
    end

    def create_phoneNum=(phoneNum)
      split = phoneNum.split(' ', 3)
      self.phoneAreaCode = split.first
      self.phonePrefix = split.second
      self.phoneSuffix = split.last
    end

    def create_remember_token
      self.remember_token = SecureRandom.urlsafe_base64
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T16:36:54.513

适用于

```
def phoneAreaCode
  if phoneNum != nil
     @phoneAreaCode ||= self.phoneNum.split(' ')[0]
  else
     @phoneAreaCode
  end
end

def phonePrefix
  if phoneNum != nil
    @phonePrefix ||= self.phoneNum.split(' ')[1]
  else
    @phonePrefix
  end
end

def phoneSuffix
  if phoneNum != nil
    @phoneSuffix ||= self.phoneNum.split(' ')[2]
  else
    @phoneSuffix
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:23:28.940

据我了解，你只坚持'phoneNum'。您可以将该 attr_accessor 重命名为 attr_writer 并手动设置 getter。

```
def phoneAreaCode
  # Get phone area code
end

def phonePrefix
  # Get phone prefix
end

def phoneSuffix
  # Get phone suffix
end 
```

或者，如果您真的想使用该方法 - 您可以这样做：

```
after_initialize :create_phoneNum 
```

但我会保证第一种方法。

# ajax - 安装 chrome 扩展后显示通知

> ID：16135585
> 
> 赞同：0
> 
> 时间：2013-04-21T19:58:58.563
> 
> 标签：ajax, jquery, google-chrome-extension

像许多 Chrome 扩展程序一样，当用户安装我的 Chrome 扩展程序时，我想告诉他们“单击此图标开始使用扩展程序”。如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/rvgVp.png)

我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:07:37.327

回答我自己的问题，安装文件后会自动出现该通知`.crx`，无需编写单独的脚本。

# asp.net - 如何将 devexpress 添加到 Visual Studio 2012

> ID：16135591
> 
> 赞同：6
> 
> 时间：2013-04-21T20:00:01.673
> 
> 标签：asp.net, visual-studio-2012, devexpress, devexpress-windows-ui

我下载了 DevExpress Universal 12.2 Exe 文件，并在我的计算机上安装了 2 个文件夹。它们是 devexpress dxperience 12.2 和 dxteeme 12.2 文件夹。当我打开 Visual Studio Express 2012 时，我看不到 devexpress 控件？我试图通过单击 SETUP 来修复我的 devexpress 安装。

如何将 devexpress 工具箱放入 visual studio.net 2012 中？

谢谢你

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T20:10:50.760

在 Visual Studio 上打开工具箱窗口，右键单击，选择选择项。然后，浏览您的 devexpress dll，您可以在 devexpress 文件夹中找到这些 dll，选择您需要的开发控件，例如 XtraGrid.dll、XtraEditors.dll 等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T19:36:19.130

这 2 篇知识库文章也可能对您有所帮助：

[http://www.devexpress.com/Support/Center/p/K18095.aspx](http://www.devexpress.com/Support/Center/p/K18095.aspx) [http://www.devexpress.com/Support/Center/kb/p/KA18614.aspx](http://www.devexpress.com/Support/Center/kb/p/KA18614.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T20:10:50.463

您需要将它们作为参考添加到您的项目中。只需搜索下载的 .dll 并将它们添加到您的项目中。

# xml - XSD - 验证作为属性值的元素

> ID：16135602
> 
> 赞同：0
> 
> 时间：2013-04-21T20:01:25.843
> 
> 标签：xml, xsd, xml-validation

我有以下 xml。

```
<a>
  <thing tag="song1">
    <name>john doe</name>
    <email>john@example.com</email>
  </thing>
  <owner thing="/a/thing[@tag='song1']">
    ...
  </owner>
</a> 
```

我想在 XSD 中断言，当存在带有标签 'song1' 的 'thing' 时，'owner' 必须有 thing='/a/thing[@tag='song1']。

我在 XSD 中的逻辑尝试是

```
<sch:assert 
  test="(count(a:owner[@thing=a:thing[@tag='song1']]) > 0) = count(a:thing[@tag='song1']) > 0))">Error</sch:assert>
      </sch:rule> 
```

氧气验证器对此 xsd 给出错误。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:32:07.510

最后，我最终像这样检查了 song1 的子字符串。

```
test="(count(a:thing[substring(@tag,19,8) = 'song1']) > 0)"> 
```

它不是完美的方式，因为 /a/thing 和 /./a/thing 同样正确，但据我所知，用户坚持相同的模式。同样在理想情况下，必须在运行时检查这种情况。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:50:19.017

您需要一个将 XPath 表达式作为字符串并返回计算结果的函数。这在撒克逊语中作为 saxon:evaluate() 可用。

其次，简单类型的断言只能访问被验证的字符串；复杂类型的断言可以访问以元素节点为根的树。您的路径表达式以“/”开头，因此仅适用于以文档节点为根的树。如果您将路径更改为`../a/thing[@tag='song1']`then 您可以使用表单的 a 元素上的断言来验证它

```
assert test="every $o in owner satisfies exists(saxon:evaluate($o/@thing))" 
```

# wpf - Window Flash Scrollbar 中的 WPF WebBrowser 问题

> ID：16135606
> 
> 赞同：1
> 
> 时间：2013-04-21T20:01:51.037
> 
> 标签：wpf, webbrowser-control

我在已设置宽度和高度的窗口内的 WebBrowser 内托管了一个 Flash 应用程序。问题是没有滚动，并且一半的 Flash 应用程序无法访问。有没有办法规避这个问题？

# c# - 带有 wssecurity 的肥皂

> ID：16135617
> 
> 赞同：0
> 
> 时间：2013-04-21T20:03:05.060
> 
> 标签：c#, soap

在 C# 中实现 SOAP、ws-security 的最佳/可行方法是什么。根据文档，这些是必需的安全令牌 - 必需的安全令牌 •用户名令牌（用户名、密码、时间戳和随机数） •用户证书 •服务器证书

过去当我创建 SAOP+ HTTP 请求时，我使用了 stringbuider 并附加了请求

```
stringbuilder sb = new stringbuilder(); 
```

然后最后使用了 HTTPWebrequest.create(url) ，然后是一个 HTTP 帖子。

任何关于如何开始的提示都会有所帮助。谁能指点我一些教程。我使用了证书生成工具来生成证书。即使经过 3 天的研究和摆弄证书和 web.configs，我还没有真正理解这样做的好方法

这是文档中的示例请求示例

```
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:mhs="http://org/TEST/mhs/" xmlns:urn="urn:hl7-org:v3">
<soapenv:Header>
<wsse:Security soap:mustUnderstand="1" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
<wsse:BinarySecurityToken ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="SecurityToken-e00c8062-83d2-4f04-88fc-996218e7bb3d">MIICeDCC....(signed user MLS cert).......</wsse:BinarySecurityToken>
<wsse:BinarySecurityToken ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="SecurityToken-c0cc2cd4-cb77-4fa5-abfa-bd485afd1685">MIIDFj.....( MLS web-service end-point public cert)........</wsse:BinarySecurityToken>
<wsse:UsernameToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="SecurityToken-970e9a80-00cc-4c86-8ec4-3ba16e029a5b">
<wsse:Username>....your_username.....</wsse:Username>
<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">.....your_plaintext_password....</wsse:Password>
<wsse:Nonce>KNyu6MsXCkTg4DDyvwvEiw==</wsse:Nonce>
<wsu:Created>2010-09-15T18:00:30Z</wsu:Created>
</wsse:UsernameToken>
<xenc:EncryptedKey xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
<xenc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5"/>
<KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
<wsse:SecurityTokenReference>
<wsse:Reference URI="#SecurityToken-c0cc2cd4-cb77-4fa5-abfa-bd485afd1685" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3"/>
</wsse:SecurityTokenReference>
</KeyInfo>
<xenc:CipherData>
<xenc:CipherValue>gpBAWt91pdwhKva............</xenc:CipherValue>
</xenc:CipherData>
<xenc:ReferenceList>
<xenc:DataReference URI="#Enc-0641b860-b16d-4941-91c0-d60bece67794"/>
</xenc:ReferenceList>
</xenc:EncryptedKey>
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
<SignedInfo>

<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" xmlns:ds="http://www.w3.org/2000/09/xmldsig#"/>
<SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
<Reference URI="#Id-f10674fd-b999-47c9-9568-c11fa5e5405b">
<Transforms>
<Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
</Transforms>
<DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
<DigestValue>wRUq.........</DigestValue>
</Reference>
</SignedInfo>
<SignatureValue>tBSsaZi........</SignatureValue>
<KeyInfo>
<wsse:SecurityTokenReference>
<wsse:Reference URI="#SecurityToken-e00c8062-83d2-4f04-88fc-996218e7bb3d" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3"/>
</wsse:SecurityTokenReference>
</KeyInfo>
</Signature>
</wsse:Security>
</soapenv:Header>
<soapenv:Body wsu:Id="Id-f10674fd-b999-47c9-9568-c11fa5e5405b" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<xenc:EncryptedData Id="Enc-0641b860-b16d-4941-91c0-d60bece67794" Type="http://www.w3.org/2001/04/xmlenc#Content" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
<xenc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#tripledes-cbc"/>
<xenc:CipherData>
<xenc:CipherValue>SQsTCAK6ZaVhojB8+Y.........</xenc:CipherValue>
</xenc:CipherData>
</xenc:EncryptedData>
</soapenv:Body>
</soapenv:Envelope> 
```

# opengl - 简单的 OpenGL/GLUT 程序不能在 Windows 上编译

> ID：16135620
> 
> 赞同：1
> 
> 时间：2013-04-21T20:03:32.213
> 
> 标签：opengl, glut

我正在尝试在 Windows 上使用 GLUT 编译一个简单的应用程序。在 Linux 上，它编译时没有错误。在 Windows 上，我尝试了 Visual C++ Express 2010 和 CodeBlocks，但都遇到了相同的错误。我将库、头文件和 dll 文件添加到适当的目录中。我将库添加到链接器的设置中。你知道问题是什么吗？

错误：

```
D:\PBL\code blocks project\shikaku\main.cpp||In function 'void DrawGLScene()':|
D:\PBL\code blocks project\shikaku\main.cpp|259|error: 'glUseProgramObjectARB' was not     declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|262|error: 'glUniform1ui' was not declared   in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|263|error: 'glVertexAttribPointerARB' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|270|error: expected initializer before '*' token|
D:\PBL\code blocks project\shikaku\main.cpp|284|error: expected initializer before '*' token|
D:\PBL\code blocks project\shikaku\main.cpp||In function 'void log(int)':|
D:\PBL\code blocks project\shikaku\main.cpp|299|error: 'GL_OBJECT_INFO_LOG_LENGTH_ARB' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|300|error: 'glGetObjectParameterivARB' was not  declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|303|error: 'glGetInfoLogARB' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp||In function 'unsigned int load_shader()':|
D:\PBL\code blocks project\shikaku\main.cpp|310|error: 'glCreateProgramObjectARB' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|311|error: 'GL_VERTEX_SHADER_ARB' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|311|error: 'glCreateShaderObjectARB' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|312|error: 'GL_FRAGMENT_SHADER_ARB' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|313|error: 'V_SHADER' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|313|error: 'glShaderSourceARB' was not   declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|314|error: 'F_SHADER' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|315|error: 'glCompileShaderARB' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|319|error: 'glAttachObjectARB' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|321|error: 'glLinkProgramARB' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|322|error: 'glUseProgramObjectARB' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|323|error: 'glGetUniformLocationARB' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|325|error: 'glGetAttribLocation' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|330|error: 'glUniformMatrix4fv' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|332|error: 'glUseProgram' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|333|error: 'glEnableVertexAttribArray' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp|335|error: 'glDeleteObjectARB' was not declared in this scope|
D:\PBL\code blocks project\shikaku\main.cpp||In function 'int main(int, char**)':|
D:\PBL\code blocks project\shikaku\main.cpp|355|error: 'glDeleteObjectARB' was not declared     in this scope|
||=== Build finished: 26 errors, 0 warnings ===| 
```

如果需要，代码：

```
#define GL_GLEXT_PROTOTYPES 1
#define GL3_PROTOTYPES 1
#include <windows.h>
#include <GL/gl.h>
#include <GL/glext.h>
#include <GL/glut.h>
#include <cstdlib>
#include <iostream>
using std::cout;
using std::endl;
int window;
int shader;

unsigned char texture[]= {0xFF,0xFF,0xFF,0xFF,
                      0xFF,0xFF,0xFF,0xFF,
                      0xFF,0xFF,0xFF,0xFF,
                      0xFF,0xFF,0xFF,0xFF,
                      0xFF,0xFF,0xFF,0xFF,
                      0xFF,0x00,0x00,0xFF,
                      0xFF,0x00,0x00,0xFF,
                      0xFF,0xFF,0xFF,0xFF,
                      0xFF,0xFF,0xFF,0xFF,
                      0xFF,0x00,0x00,0xFF,
                      0xFF,0x00,0x00,0xFF,
                      0xFF,0xFF,0xFF,0xFF,
                      0xFF,0xFF,0xFF,0xFF,
                      0xFF,0xFF,0xFF,0xFF,
                      0xFF,0xFF,0xFF,0xFF,
                      0xFF,0xFF,0xFF,0xFF};
static const float Z=-1.0;

static const float vertices[]={ -0.5, -0.5, Z,
               0.5, -0.5, Z,
               0.5,  0.5, Z,
              -0.5,  0.5, Z };

static const float texcoord[]={ 0.0, 0.0,
               1.0, 0.0,
               1.0, 1.0,
               0.0, 1.0 };

static const char indices[]={ 0,1,2,3 };

unsigned int texcnt;
unsigned int projection_matrix_loc;
unsigned int modelview_matrix_loc;
unsigned int vertex_loc;
unsigned int tex_coordinates_loc;
unsigned int tex_loc;

void InitGL(int Width, int Height) // Funkcja wolana po utworzeniu okna
{
glClearColor(0.0f, 0.0f, 0.0f, 0.0f); // kolor tla czarny
glPolygonMode(GL_FRONT_AND_BACK,GL_POLYGON);
glClearDepth(1.0);                    // Enables Clearing Of The Depth Buffer
glEnable(GL_DEPTH_TEST);              // Enables Depth Testing
glEnable(GL_TEXTURE_2D);
glGenTextures(1,&texcnt);
glBindTexture(GL_TEXTURE_2D,texcnt);
glTexImage2D(GL_TEXTURE_2D,0,GL_RGBA,4,4,0,GL_RGBA,GL_UNSIGNED_BYTE,texture);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);
glDisable(GL_TEXTURE_2D);
}

void ReSizeGLScene(int Width, int Height)
{
if (Height==0) Height=1;
glViewport(0, 0, Width, Height);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(-1.0,1.0,-1.0,1.0,1.0,-1.0);
glMatrixMode(GL_MODELVIEW);
}

void DrawGLScene()
{
glutSetWindow(window); // Aktywne okno
glClear(GL_DEPTH_BUFFER_BIT | GL_COLOR_BUFFER_BIT);
glUseProgramObjectARB(shader);
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D,texcnt);
glUniform1ui(tex_loc,0); // Jednostka teksturuj¹ca 0
glVertexAttribPointerARB(vertex_loc,3,GL_FLOAT,0,0,vertices);
glVertexAttribPointerARB(tex_coordinates_loc,2,GL_FLOAT,0,0,texcoord);
glDrawElements(GL_QUADS, 4, GL_UNSIGNED_BYTE,indices);
glUseProgramObjectARB(0);
glutSwapBuffers();
}

const GLcharARB* V_SHADER[] = { //call per vertex
"uniform mat4 projection_matrix;"
"uniform mat4 modelview_matrix;"
"attribute vec3 vertex;"
"attribute vec2 tex_coordinates;"
"varying vec2 tex_coord;"
"void main()"
"{"
"tex_coord = tex_coordinates;"
"gl_Position = projection_matrix*modelview_matrix*vec4(vertex,1.0);"
"}"
};

const GLcharARB* F_SHADER[] = { //call per pixel
"varying vec2 tex_coord;"
"uniform sampler2D tex;"
"void main()"
"{"
"vec4 color = texture2D(tex,tex_coord);"
"gl_FragColor = color;"
"}"
};

void log(int shader) {
char* info_log;
int info_log_len=0;
int chars_written=0;
glGetObjectParameterivARB(shader,GL_OBJECT_INFO_LOG_LENGTH_ARB,
        &info_log_len);
if (info_log_len>0) {
    info_log= new char[info_log_len];
    glGetInfoLogARB(shader,info_log_len,&chars_written,info_log);
    std::cout << info_log;
    delete [] info_log;
  }
}

unsigned int load_shader() {
unsigned int p = glCreateProgramObjectARB();
unsigned int v = glCreateShaderObjectARB(GL_VERTEX_SHADER_ARB);
unsigned int f = glCreateShaderObjectARB(GL_FRAGMENT_SHADER_ARB);
glShaderSourceARB(v, 1, V_SHADER,0);
glShaderSourceARB(f, 1, F_SHADER,0);
glCompileShaderARB(v);
log(v);
glCompileShaderARB(f);
log(f);
glAttachObjectARB(p,v);
glAttachObjectARB(p,f);
glLinkProgramARB(p);
glUseProgramObjectARB(p);
modelview_matrix_loc = glGetUniformLocationARB(p,"modelview_matrix");
projection_matrix_loc = glGetUniformLocationARB(p,"projection_matrix");
tex_coordinates_loc = glGetAttribLocation(p,"tex_coordinates");
vertex_loc = glGetAttribLocation(p,"vertex");
tex_loc = glGetUniformLocationARB(p,"tex");
   const float identity[16] =
    {1,0,0,0, 0,1,0,0, 0,0,1,0, 0,0,0,1}; // mat jednostkowa nic nie robi
glUniformMatrix4fv(projection_matrix_loc,1,GL_FALSE,identity);
glUniformMatrix4fv(modelview_matrix_loc,1,GL_FALSE,identity);
glUseProgram(0);
glEnableVertexAttribArray(vertex_loc);
glEnableVertexAttribArray(tex_coordinates_loc);
glDeleteObjectARB(v);
glDeleteObjectARB(f);
return p;
}

int main(int argc, char **argv)
{
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE | GLUT_ALPHA | GLUT_DEPTH);
glutInitWindowSize(640, 480);
glutInitWindowPosition(100, 100);
window = glutCreateWindow("Bitmapka");
glutDisplayFunc(&DrawGLScene);
//glutFullScreen();
glutIdleFunc(&DrawGLScene);
glutReshapeFunc(&ReSizeGLScene);
shader = load_shader();
InitGL(640, 480);
glutMainLoop();
glDeleteObjectARB(shader);
glutDestroyWindow(window);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:15:51.213

在 Windows 中，OpenGL 接口 DLL 仅公开 OpenGL-1.1 API，仅此而已。因此，要使用较新的函数，您必须在运行时通过扩展机制加载它们。去[http://glew.sourceforge.net](http://glew.sourceforge.net)阅读文档，安装它，使用它。

说真的，这是 StackOverflow 上每隔 2 天就被问到的一个常见问题解答。

* * *

顺便说一句：在 Linux 上，libGL.so 的官方 OpenGL-ABI 只定义了 OpenGL-1.2，所以从技术上讲，你也必须在 Linux 上使用扩展机制。然而，大多数 libGL.so 都像这样导出较新的符号，所以你所做的正是出于这个原因。

# android - 如何在 Firefox 移动版中的特定页面上运行 javascript，在页面加载时（类似于greasemonkey）

> ID：16135628
> 
> 赞同：2
> 
> 时间：2013-04-21T20:04:32.207
> 
> 标签：android, firefox-addon, greasemonkey, fennec

我想在特定页面（例如 facebook.com）完成加载以自动单击按钮（例如自动提交表单）时运行 Javascript 片段。

所以我正在寻找一个用于 Firefox 移动的“Hello World”插件，当页面完成加载所有内容时（使用 addEventListener('load' ， ...） 大概）

* * *

更多信息：

我已经尝试过 Fennec 指南并从市场上剖析了一些 Fennec 插件，但在插件开发方面我处于绝对起步阶段，并且在这方面浪费了很多时间。

任何（直接和简单的）资源都会非常有帮助，我知道那里有一些 Greasemonkeyscript-to-Fennec （例如[http://geo.inge.org.uk/grease-vervet.php](http://geo.inge.org.uk/grease-vervet.php)）编译器，但据我所知，它们已经过时了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-07T08:28:03.663

这可以通过 Android 上较新版本的 Firefox 解决，可以简单地安装 Tampermonkey：

[https://addons.mozilla.org/en-US/android/addon/tampermonkey/](https://addons.mozilla.org/en-US/android/addon/tampermonkey/)

对于任何正在寻找答案的人。

# java - 位图的 OutOfMemory 异常

> ID：16135633
> 
> 赞同：0
> 
> 时间：2013-04-21T20:04:51.823
> 
> 标签：java, android

我在将图像加载为位图时遇到问题，因此我使用以下方法：

```
"decodeSampledBitmapFromFile" 
```

（包括实施）

我还将所有位图保存在 SdCard 上，每次我需要位图时，我都会从它与参数一起存储的路径中加载它：

```
decodeSampledBitmapFromFile(path,150,100);

Bitmap image_profile =decodeSampledBitmapFromFile(path,150,100); 
```

并将图像位图设置到我需要的 imageView 中（每次我需要图像时，我都会从 sdCard 加载它。

但是，在加载大约 20 张图像后，我仍然会收到 OutOfMemoryException。

那么，OutOfMemoryException 的解决方案是什么？

为什么即使在加载少量图像（大约 20 个）后我也会得到 OutOfMemoryException？

他们成功的 facebook、instagram 或 youtube 等应用程序的秘诀是什么

加载大量图像而没有异常？

我尝试了一切，但我仍然得到异常。

anyOne 有进一步的建议，为了避免这种异常，我可以实施什么？

多谢

```
public static Bitmap decodeSampledBitmapFromFile(String path, int reqWidth, int reqHeight) 
    { // BEST QUALITY MATCH

        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(path, options);

        // Calculate inSampleSize
            // Raw height and width of image
            final int height = options.outHeight;
            final int width = options.outWidth;
            options.inPreferredConfig = Bitmap.Config.RGB_565;
            int inSampleSize = 1;

            if (height > reqHeight) {
                inSampleSize = Math.round((float)height / (float)reqHeight);
            }

            int expectedWidth = width / inSampleSize;

            if (expectedWidth > reqWidth) {
                //if(Math.round((float)width / (float)reqWidth) > inSampleSize) // If bigger SampSize..
                inSampleSize = Math.round((float)width / (float)reqWidth);
            }
        options.inSampleSize = inSampleSize;

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;

        return BitmapFactory.decodeFile(path, options);
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:09:42.977

您可能正在加载图像，然后它们没有被垃圾收集器回收或收集，因此它们仍在占用内存。

由于听起来您一次只使用一个图像，我想您可以尝试手动删除对不再需要的位图的引用，然后调用`System.gc()`以释放内存？

如果没有，我会研究 LruCache。

谷歌有一个很好的教程：http: [//developer.android.com/reference/android/util/LruCache.html](http://developer.android.com/reference/android/util/LruCache.html)

当我第一次为我的游戏使用 LruCache 时，本教程也帮助了我：http: [//andrewbrobinson.com/2012/03/05/image-caching-in-android/](http://andrewbrobinson.com/2012/03/05/image-caching-in-android/)

# ios - 从多个视图访问 NSArray

> ID：16135637
> 
> 赞同：0
> 
> 时间：2013-04-21T20:04:57.697
> 
> 标签：ios, uiviewcontroller, nsarray, nsobject

我在我的应用程序中使用了一个数据控制器类，它处理解析 xml 和一些对我的应用程序至关重要的其他操作。我想要做的是将它解析的数据存储在一个数组中，该数组可以在我的应用程序的多个视图中访问。现在，每个视图都创建了自己的数据控制器类实例，因此存储数据的数组特定于该视图控制器。有没有办法仍然为每个视图控制器创建数据控制器类的各个实例，但数据存储在所有视图都可以访问的数组中？我试图存储在 NSUserDefaults 中，但这似乎不是最有效的方法。每个视图控制器都需要有自己的数据控制器类实例，因为我使用了每个视图控制器中使用的委托方法。我希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:17:52.643

您有两种方法来实现这一点（好吧，可能不止两种，但这些是最常见的）：

*   将数组存储在应用程序委托中并将其作为属性访问。
*   创建将保存数组（和其他可能的数据/方法）的单例对象。

# php - txt文件中“echo fgets()”的结果不一样

> ID：16135639
> 
> 赞同：0
> 
> 时间：2013-04-21T20:05:06.170
> 
> 标签：php, html, fgets

我正在尝试使用以下代码在我的网站中包含一个带有 php 的 txt 文件

```
 <?php 
      $myFile = '[http://users.otenet.gr/~vag1976/optonio/NOAAMO.TXT]';
      $fp = fopen("$myFile", "r");
      while(!feof($fp)) { 
        echo fgets($fp) . "<br />";
      }
      fclose($fp);
    ?> 
```

问题是使用这个 php 代码的结果与原来的不完全相同。单词之间的间隙（空格）丢失，仅由一个空格代替。观看结果很糟糕。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:08:17.680

这不是 PHP 问题，只是浏览器不呈现多个“正常”空格（如果您不使用不间断空格`&nbsp;`或特殊`<pre>`标签）。

您还应该使用真正的换行符而不是`<br />`标签：

```
<?php 
  $myFile = '[http://users.otenet.gr/~vag1976/optonio/NOAAMO.TXT]';
  // You don't need to use "$myFile" here, just use the variable without quotes
  $fp = fopen($myFile, "r");
  echo "<pre>";
  while(!feof($fp)) { 
    echo fgets($fp) . "\n";
  }
  echo "</pre>";
  fclose($fp);
?> 
```

如果你的文件不是太大，你也可以使用[file_get_contents()](http://php.net/manual/en/function.file-get-contents.php)：

```
<?php
  $myFile = '[http://users.otenet.gr/~vag1976/optonio/NOAAMO.TXT]';
  echo '<pre>' . file_get_contents($myFile) . '</pre>';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:08:23.503

你可以在它周围写一些`<pre>`标签：

```
<pre><?php /* your code */ ?></pre> 
```

`<pre>`保留空格。

浏览器总是用一个替换多个后面的空格。

然后你也可以使用`\n`而不是`<br />`做你的换行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T20:08:47.567

要保留空格，请使用`<pre></pre>`标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T20:08:47.900

您需要使用`<pre>`标签。它保留了多余的空白。

```
<?php 
  $myFile = '[http://users.otenet.gr/~vag1976/optonio/NOAAMO.TXT]';
  $fp = fopen("$myFile", "r"); 
  echo "<pre>";
  while(!feof($fp)) { 
    echo fgets($fp) . "<br />";
  }
  echo "</pre>"; 
  fclose($fp);
?> 
```

另外，我希望您意识到`<br />`这不是 HTML5 语义丰富的语言学。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T20:19:26.643

看来您需要将返回的任何内容都包含`fgets()`在`<pre>`标签中以保留空格。

原始答案：[https ://stackoverflow.com/a/2805900/2305229](https://stackoverflow.com/a/2805900/2305229)

修改后的代码：

```
<?php 
  $myFile = '[http://users.otenet.gr/~vag1976/optonio/NOAAMO.TXT]';
  $fp = fopen("$myFile", "r");
  while(!feof($fp)) { 
    echo "<pre>";
    echo fgets($fp) . "<br />";
    echo "</pre>"
  }
  fclose($fp);
?> 
```

# objective-c - 只有数组中的最后一个对象填充了 NSMutableArray 列表

> ID：16135640
> 
> 赞同：1
> 
> 时间：2013-04-21T20:05:18.803
> 
> 标签：objective-c

我创建了一个 NSMutableArray；当我运行模拟器时，它只会在单元格中填充最后一项的对象名称。为什么是这样？

我相信这个问题在最底层是为什么它可能无法正确填充。

```
@interface WineListTableViewController ()
@end    
@implementation WineListTableViewController    
@synthesize currentVarietal;    

NSMutableArray *list;

-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    DescriptionWineViewController *dvc= [segue destinationViewController];
    [dvc setCurrentVarietal: [self currentVarietal]];

}

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {

    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    list = [[NSMutableArray alloc] init];

    wine *varietal =[[wine alloc] init];

    [varietal setName:@"Barbera"];
    [varietal setNotes:@"Barbera's Flavor Profile:\n..."];
    [list addObject:varietal];

    [varietal setName:@"Chenin Blanc"];
    [varietal setNotes:@"Chenin Blanc's Flavor Profile:\n... "];
    [list addObject:varietal];

    [varietal setName:@"Lambrusco"];
    [varietal setNotes:@"Lambrusco's Flavor Profile:\n... "];
    [list addObject:varietal];

    [varietal setName:@"Malbec"];
    [varietal setNotes:@"Malbec's Flavor Profile:\n ..."];
    [list addObject:varietal];

    [varietal setName:@"Merlot"];
    [varietal setNotes:@"Merlot's Flavor Profile:\n... "];
    [list addObject:varietal];

    [varietal setName:@"Montepulciano"];
    [varietal setNotes:@"Montepulciano's Flavor Profile:\n... "];
    [list addObject:varietal];

    [varietal setName:@"Muscat"];
    [varietal setNotes:@"Muscat's Flavor Profile:\n... "];
    [list addObject:varietal];

    [varietal setName:@"Nebbiolo"];
    [varietal setNotes:@"Nebbiolo's Flavor Profile:\n... "];
    [list addObject:varietal];

    [varietal setName:@"Petite Syrah"];
    [varietal setNotes:@"Petite Syrah's Flavor Profile:\n... "];
    [list addObject:varietal];

    [varietal setName:@"Pinot Gris"];
    [varietal setNotes:@"Pinot Gris's Flavor Profile:\n... "];
    [list addObject:varietal];

    [varietal setName:@"Pinot Grigio"];
    [varietal setNotes:@"Pinot Grigio's Flavor Profile:\n... "];
    [list addObject:varietal];

    [varietal setName:@"Pinot Noir"];
    [varietal setNotes:@"Pinot Noir's Flavor Profile:\n... "];
    [list addObject:varietal];

    [varietal setName:@"Sangiovese"];
    [varietal setNotes:@"Sangiovese's Flavor Profile:\n... "];
    [list addObject:varietal];

    [varietal setName:@"Shiraz/ Syrah"];
    [varietal setNotes:@"Shiraz/ Syrah's Flavor Profile:\n... "];
    [list addObject:varietal];

    [varietal setName:@"Viognier"];
    [varietal setNotes:@"Viognier's Flavor Profile:\n ..."];
    [list addObject:varietal];

    [varietal setName:@"Zinfandel"];
    [varietal setNotes:@"Zinfandel's Flavor Profile:\n ..."];
    [list addObject:varietal];

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return [list count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell ==nil){
        cell= [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

}

    //this is the code I think must be incorrect

    wine *current= [list objectAtIndex:indexPath.row];
    [cell.textLabel setText:[current name]];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:08:50.413

实际上，您有一个对象 ( `varietal`) 进行了变异（意味着您更改了它的属性）。
*因此，您实际上只需将一个对象添加到数组中。*

要解决此问题，请在将其添加到数组（数组保留它）并**创建**要添加的新对象后**释放：** `varietal`

 **```
wine *varietal =[[wine alloc] init];
[varietal setName:@"Barbera"];
[varietal setNotes:@"Barbera's Flavor Profile:\n..."];
[list addObject:varietal];
[varietal release]; // Remove this line under ARC (Auto Reference Counting)

wine *varietal =[[wine alloc] init];
[varietal setName:@"Chenin Blanc"];
[varietal setNotes:@"Chenin Blanc's Flavor Profile:\n... "];
[list addObject:varietal];
[varietal release]; // Remove this line under ARC (Auto Reference Counting)

wine *varietal =[[wine alloc] init];
// etc… 
```

**注意：** *如果您使用 ARC（当前 Xcode 版本下所有新项目的默认设置），则无需调用`[varietal release];`. 它甚至会产生错误。如果不使用 ARC，不释放`varietal`会导致内存泄漏。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T20:08:59.670

您正在添加相同的对象。`varietal =[[wine alloc] init];`在每个之后使用`addObject`以创建不同的。**

# xcode - 如何使用 XCode 的新自动布局功能来做这个简单的事情？

> ID：16135641
> 
> 赞同：0
> 
> 时间：2013-04-21T20:05:20.407
> 
> 标签：xcode, autolayout

我试图做一些看起来应该不费吹灰之力的事情。但是，唉，我太笨了，无法弄清楚这一点。所以我需要帮助。

我有一个 iphone 模拟器（垂直方向）。主视图有一个子视图（蓝色 UIView），应该显示在屏幕底部 25% 的位置。最终渲染的屏幕基本上看起来像一个底部为蓝色的白色屏幕。

我希望子视图的边缘拥抱屏幕边缘。但这不是我正在努力的部分。当我突然旋转模拟器的方向时，棘手的事情是配置这个子视图的高度（以及它的内容的布局，如果有的话）。如果我这样做，那么一切看起来都很奇怪。

我还想指出，当它在模拟器中加载时，我在 Interface Builder（启用自动布局）中看到的内容与应用程序完全不同。

PS - 现在我会继续玩这个。也许我最终会达到一个灵光乍现的时刻。

***更新了屏幕截图***

这是我在 Interface Builder 中的布局： ![这是我在 Interface Builder 中的布局：](https://i.stack.imgur.com/I23g0.png)

这就是它最终在模拟器中的样子： ![这就是它最终在模拟器中的样子：](https://i.stack.imgur.com/QfZJW.png)

*** 更新 2 *** 好的。在用屏幕截图更新我的帖子后，我突然意识到模拟器看起来不像 4" 屏幕版本（即使它在我的电脑屏幕上也是如此）。运行 4" 模拟器后，我可以看到布局就像IB 布局。但这让我想知道为什么自动布局不够“智能”以适应较小的 3.5 英寸屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:50:16.097

在我看来，您从蓝色视图的顶部边缘到向下推动内容的超级视图有一个固定的高度约束 - 相反，您可能在它上方有一个固定高度的视图，它正在平滑事物。尝试将蓝色视图的顶部边缘固定到超级视图并降低优先级或将其从相等更改为小于等于约束。

在 XCode 的 IB 中，您可以更改 iPhone 布局的画布大小，在右侧查找单个按钮，该按钮看起来像一个带有上下箭头的矩形，或者在里面。在下面的屏幕截图中，它是最左侧的按钮。

![xcode 的外形尺寸按钮](https://i.stack.imgur.com/ehmNI.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:27:19.583

您可以简单地关闭自动布局。弹簧和支柱可以很容易地使您的子视图达到父视图高度的 25%。

或者，您当然可以坚持使用它，但您需要调整代码中的约束。在当前版本的 Xcode 中没有办法建立这样的约束。在 IB 中设置约束以将框固定到窗口底部并固定高度，为高度约束设置一个出口。然后在 中`-viewDidLoad`，移除高度约束，并在父视图中添加一个新的约束来表达你想要的高度关系。

这并不是要阻止您学习 Auto Layout，而是要指出它有点复杂，并且 IB 中的约束工具不直观且相对较弱。WWDC 视频[自动布局简介](https://developer.apple.com/videos/wwdc/2012/?id=228)是一个很好的起点。

# entity-framework - 在实体框架中是否有一种更简洁的方法可以将对象类型转换为字符串表示以进行存储？

> ID：16135642
> 
> 赞同：3
> 
> 时间：2013-04-21T20:05:27.313
> 
> 标签：entity-framework, entity-framework-5

真的很小的事情，但它让我有点烦恼，所以我想我会问。我有 POCO 实体设置，并且我正在对实体框架使用代码优先方法。

```
public class Setting
{
    [Required]
    [MaxLength(128)]
    public string Name { get; set; }

    [Required]
    public Type Type { get; set; }

    //  Added to support the storing of Type in the database via Entity Framework.
    // Really would be nice to find a cleaner way but this isn't actually so bad.
    public string TypeString
    {
        get { return Type.ToString(); }
        set { Type = Type.GetType(value); }
    }

    public string Value { get; set; }
} 
```

正如您在代码中看到的那样，我想实际使用 Type 对象，但为了存储它，我最终添加了一个 TypeString 属性。然后通过 DbModelBuilder 隐藏 Type 属性。

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder
            .Entity<Setting>()
            .HasKey(e => e.Name)
            .Property(e => e.Name)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
        modelBuilder
            .Entity<Setting>()
            .Ignore(e => e.Type);
        modelBuilder
            .Entity<Setting>()
            .Property(e => e.TypeString)
            .HasColumnName("Type");

        base.OnModelCreating(modelBuilder);
    } 
```

我只是想知道是否有一种方法可以定义自定义属性映射，而不必将该额外属性添加到我的实体中。

## 更新

我背后的原因实际上是我只是希望开发人员能够通过登录来配置一些简单的设置，但已经很晚了，这似乎是一个快速的解决方案，可以允许各种类型的多个设置。

我想如果我想要一些强类型设置，我可能会查看设置的通用实现，如下所示：

```
public class Setting<T>
{
    [Required]
    [MaxLength(128)]
    public string Name { get; set; }

    public T Value { get; set; }
} 
```

虽然我不相信这会与 Entity Framework 配合得很好。

在某种程度上，虽然我也对某些应用程序感到好奇，但我有多个客户或利益相关者，他们每个人都可以请求稍微不同的验证规则。因此，我们通常实现和接口，并为每个客户端或客户端集合创建一个实现。为了我们可以更轻松地添加客户端并自定义他们的规则，我们存储了为每个客户端创建的接口实现。因此，持久化类型信息在这些情况下被证明是非常有用的。

此外，很高兴探索和理解我可以非常愉快地开发应用程序的方法，同时减少思考我将如何坚持这一点的需要，或者这是否会尽可能地与实体框架配合使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:21:59.160

我不知道有任何`Type`直接坚持的方法，但这可能感觉好一点：

```
public class Settings
{
    public Type Type
    {
        get { return Type.GetType(_TypeString); }
        set { _TypeString = value.ToString(); }
    }

    // Backing Field
    protected virtual string _TypeString { get; set; }
} 
```

然后你只需要映射受保护的`_TypeString`属性（来自[这里](http://www.codewrecks.com/blog/index.php/2011/03/21/mapping-private-properties-with-ef-4-1-rc-and-fluent-mapping/)的解决方案）：

```
public static StringPropertyConfiguration Property<T>(this EntityTypeConfiguration<T> mapper, String propertyName) where T : class
    {
        Type type = typeof(T);
        ParameterExpression arg = Expression.Parameter(type, "x");
        Expression expr = arg;

        PropertyInfo pi = type.GetProperty(propertyName,
            BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.Instance);
        expr = Expression.Property(expr, pi);

        LambdaExpression lambda = Expression.Lambda(expr, arg);

        Expression<Func<T, String>> expression = (Expression<Func<T, string>>)lambda;
        return mapper.Property(expression);
    } 
```

然后，在你的`ModelBuilder`：

```
modelBuilder
        .Entity<Setting>()
        .Property("_TypeString")
        .HasColumnName("Type"); 
```

# php - 检查浏览器 .m3u8 是否支持 php

> ID：16135643
> 
> 赞同：0
> 
> 时间：2013-04-21T20:05:28.153
> 
> 标签：php, android, safari, m3u8

如何检查浏览器是否支持`m3u8`使用 PHP 播放格式。IOS 设备和最新的 Mac Safari 浏览器支持它。我可以检查用户代理，但如果有办法`m3u8`直接检查支持，这会更好。由于某些`m3u8`文件在最新的 Mac Safari 浏览器中无法运行，我也不确定是否支持某些 Android 设备。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:11:22.067

仅使用 PHP，除了“User-Agent”标头包含的内容之外，您没有其他信息。这可以使用函数来分析`get_browser()`。但实际上没有关于支持的媒体格式的信息。

所以，我建议使用 javascript 来检测它。你可以关注[这个问题](https://stackoverflow.com/questions/12410132/html5-video-how-to-test-for-hls-playing-capability-video-canplaytype)

# sql - 比较 SQL 查询与连接

> ID：16135644
> 
> 赞同：0
> 
> 时间：2013-04-21T20:05:33.427
> 
> 标签：sql, join

--查询1

```
SELECT TransactionDetails.Transactions.TransactionId
,     TransactionDetails.Transactions.CustomerId
,     TransactionDetails.Transactions.TransactionType
,     TransactionDetails.Transactions.DateEntered
,     TransactionDetails.Transactions.RelatedProductId
,     CustomerDetails.CustomerProducts.CustomerFinancialProductId
,     CustomerDetails.CustomerProducts.CustomerId AS 'CustomerProducts--CustomerID'
,     CustomerDetails.CustomerProducts.FinancialProductId
,     CustomerDetails.CustomerProducts.AmountToCollect
FROM TransactionDetails.Transactions 
    INNER JOIN CustomerDetails.Customers ON TransactionDetails.Transactions.CustomerId =       CustomerDetails.Customers.CustomerID 
    INNER JOIN CustomerDetails.CustomerProducts ON CustomerDetails.Customers.CustomerID =     CustomerDetails.CustomerProducts.CustomerId
WHERE TransactionId = 2
ORDER BY CustomerFinancialProductId 
```

--查询2

```
SELECT TransactionDetails.Transactions.TransactionId
    , TransactionDetails.Transactions.CustomerId
    , TransactionDetails.Transactions.TransactionType
    , TransactionDetails.Transactions.DateEntered
    , TransactionDetails.Transactions.RelatedProductId
    , CustomerDetails.CustomerProducts.CustomerFinancialProductId
    , CustomerDetails.CustomerProducts.CustomerId AS 'CustomerProducts--CustomerID'
    , CustomerDetails.CustomerProducts.FinancialProductId
    , CustomerDetails.CustomerProducts.AmountToCollect
FROM TransactionDetails.Transactions 
    INNER JOIN CustomerDetails.FinancialProducts ON     TransactionDetails.Transactions.RelatedProductId = CustomerDetails.FinancialProducts.ProductId 
    INNER JOIN CustomerDetails.CustomerProducts ON     CustomerDetails.FinancialProducts.ProductId = CustomerDetails.CustomerProducts.FinancialProductId
WHERE TransactionId = 2
ORDER BY CustomerFinancialProductId 
```

这里有两个查询，我已经给出了比较。它询问哪一个导航得更好，应该是正确使用的那个？

我知道第一个查询只返回 1 行，而第二个查询返回 11 行。查询 1 还通过 Transactions 导航到 Customer，它使用 ProductID 作为每个列中的列。第二个查询从 Transactions 转到 FinancialProducts，其中连接位于 transactions 表中的 RelatedProductID 和 FinancialProducts 表中的 productID

然后，两个查询都以同一个表结束，并在该表中选择了相同的列。

最后，FinancialProductID 在第一个查询中为 22，在第二个查询中，所有 11 行的金融产品 ID 为 22

实际问题：哪一种是导航到表格的正确形式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:21:26.363

您提出的问题是关于数据含义的*业务问题。*

看起来两个版本的查询都正确地将表连接在一起。您了解您的业务领域，而我们其他人则不了解。

也就是说，根据表的名称，第一个版本对我来说“有意义”。交易有客户，客户有产品。因此，如果您想在交易中为客户提供所有产品，那么第一个似乎会这样做。

我不知道 FinancialProducts 在这个数据库中扮演什么角色。第二个版本很可能对这个应用程序“更有意义”。如果你使用这个数据库，你应该了解这些表是什么。

# javascript - 检查后在表单中查找收音机的价值？Javascript DOM

> ID：16135646
> 
> 赞同：0
> 
> 时间：2013-04-21T20:05:52.217
> 
> 标签：javascript, validation, dom, radio

我目前有这个表格，我试图在检查单选按钮时获取它的值，但我不断出错，下面的代码可能有什么问题？

html

```
 <form name="radioset2" id="radioset2" action="survey.html">
    <fieldset>
     <span class = "question"> question1 </span>
       <div id = "radio1">
            <label for="r_q1_id">Yes</label>
            <input id="r_q1_id" type="radio" name="r_q1_name" value="yes" />
       </div>
       <div id = "radio2">
            <label for="r_q2_id">No</label>
            <input id="r_q2_id" type="radio" name="r_q1_name" value="no" />
       </div>                                       

      </fieldset>
  </form> 
```

javascript

```
function validRadio() {
var radio_buttons = document.getElementsByName.elements['r_q1_name'];
for(var x=0; x<radio_buttons.length; x++) {
    if(radio_buttons[x].checked) {
    alert(radio_buttons[x].value + " button is checked");
    } else {
    alert(radio_buttons[x].value + " button is not checked");
       }
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:40:17.613

如果你的目标是现代浏览器，你可以简单地使用[`:checked`](https://developer.mozilla.org/en/docs/CSS/%3achecked)CSS 选择器和[`querySelector`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)函数来获取检查输入的值。这将消除循环输入的需要。

[http://jsfiddle.net/4uy2V/](http://jsfiddle.net/4uy2V/)

```
var val = document.querySelector('[name=r_q1_name]:checked').value; 
```

# sql - 创建 Access 报告，列出一个表中的信息，该表与另一表中的 ID 匹配

> ID：16135648
> 
> 赞同：0
> 
> 时间：2013-04-21T20:05:58.940
> 
> 标签：sql, ms-access, ms-access-2007

我正在更新这个，因为以前的答案不是我真正需要的。

我的 Access 数据库中有两个表。一种叫做比林斯，一种叫做预订。每个表都有一个名为 Booking Number 的列，这是它们的关联方式。Billings 表还有一个名为 Container 的字段。我想做的是：

*   为每个预订号创建一个单页报告（可以根据容器数量扩展到多页）
*   在报告正文中，我想在单独的行中列出每个容器（以及有关每个容器的其他信息）

这是我的表：

```
Bookings
----------------
ID | Booking Number
 1 | '1234'
 2 | '1235'

Billings
----------------
ID | Booking Number | Container
 1 | '1234'         | '12'
 2 | '1234'         | '16'
 3 | '1235'         | '18' 
```

根据这两个表，应该有一个关于 Booking #1234 和 Booking #1235 的报告。Booking #1234 的报告应该列出 Container 的 12 和 16，而 Booking #1235 的报告只会列出 18。我是 PHP/MySQL 开发人员，所以我了解 SQL 查询。但是，我为 MySQL 编写查询的方式显然不适用于 Access。目前我正在使用类似于下面答案的模块，但它没有做我需要它做的事情。这是我当前的查询：

```
SELECT
    b.*,
    ListContainers(b.[Booking Number]) AS Containers
FROM
    Bookings AS b
WHERE
    ((b.[Booking Number]) Is Not Null); 
```

这将创建一个逗号分隔的与每个预订编号关联的容器列表，但我想为每个容器创建一个单独的行，其中还将包括 Billings 表中的其他信息。

有没有人有过类似情况的经验，或者知道我可以采取什么步骤来完成我想做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:44:38.357

[这是我在“规范”更改之前对原始问题的回答。]

在 Access 中新建一个`Module`并粘贴以下代码

```
Public Function ListContainers(Booking_Number As String) As String
Dim cdb As DAO.Database, rst As DAO.Recordset, rtn As String
Const Separator = ", "
Set cdb = CurrentDb
rtn = ""
Set rst = cdb.OpenRecordset("SELECT Container FROM Billings WHERE [Booking Number]=""" & Booking_Number & """ ORDER BY Container", dbOpenSnapshot)
Do While Not rst.EOF
    rtn = rtn & rst!Container & Separator
    rst.MoveNext
Loop
rst.Close
Set rst = Nothing
Set cdb = Nothing
If Len(rtn) > 0 Then
    rtn = Left(rtn, Len(rtn) - Len(Separator))  '' trim trailing separator
End If
ListContainers = rtn
End Function 
```

然后您可以在查询中使用该函数，如下所示

```
SELECT [Booking Number], ListContainers([Booking Number]) AS Containers
FROM Billings 
```

那会回来的

```
Booking Number  Containers
--------------  ----------
1234            12, 16
1235            18 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T08:55:13.270

对于您的新要求，您需要使用“子报告”来列出容器（和相关信息）。有关详细信息，请参阅我最近对类似问题的[回答](https://stackoverflow.com/questions/16242899/passing-query-parameter-to-sub-report/16251417#16251417)。

# math - 如何查找程序集 8086 中的位数？

> ID：16135651
> 
> 赞同：4
> 
> 时间：2013-04-21T20:06:52.667
> 
> 标签：math, assembly, x86, x86-16, digits

我是一个新的汇编程序员，我无法成功找到一个数字有多少位。我的目的是找到阶乘。我在程序集 8086 的模拟器中编程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:46:20.407

执行此操作的最有效方法是使用`bsr`指令（请参阅此[幻灯片](http://www.mpi-inf.mpg.de/departments/rg1/teaching/advancedc-ws08/script/lecture10.pdf)，20 到 25）。

这应该是这样的代码：

```
 .text
    .globl  main
    .type   main, @function
main:
    movl    $1024, %eax ;; pushing the integer (1024) to analyze
    bsrl    %eax, %eax  ;; bit scan reverse (give the smallest non zero index)
    inc     %eax        ;; taking the 0th index into account 
```

但是，我想您需要以 10 为底的日志，而不是以 2 为底的日志……所以，这里是代码：

```
 .text
    .globl  main
    .type   main, @function
main:
    movl    $1024, %eax ;; pushing the integer (1024) to analyze
    bsrl    %eax, %eax  ;; bit scan reverse (give the smallest non zero index)
    inc     %eax        ;; taking the 0th index into account

    pushl   %eax        ;; saving the previous result on the stack

    fildl   (%esp)      ;; loading the previous result to the FPU stack (st(0))
    fldlg2              ;; loading log10(2) on the FPU stack
    fmulp   %st, %st(1) ;; multiplying %st(0) and %st(1) and storing result in %st(0)

    ;; We need to set the FPU control word to 'round-up' (and not 'round-down')
    fstcw  -2(%esp)      ;; saving the old FPU control word
    movw   -2(%esp), %ax ;; storing the FPU control word in %ax
    andw   $0xf3ff, %ax  ;; removing everything else
    orw    $0x0800, %ax  ;; setting the proper bit to '1'
    movw   %ax, -4(%esp) ;; getting the value back to memory
    fldcw  -4(%esp)      ;; setting the FPU control word to the proper value

    frndint              ;; rounding-up

    fldcw  -2(%esp)      ;; restoring the old FPU control word

    fistpl (%esp)        ;; loading the final result to the stack
    popl   %eax          ;; setting the return value to be our result

    leave
    ret 
```

我很想知道是否有人能找到比这更好的！事实上，使用 SSE 指令可能会有所帮助。

# c# - 使用数据绑定时如何从 TreeView 中提取 SelectedItem？

> ID：16135655
> 
> 赞同：0
> 
> 时间：2013-04-21T20:07:25.423
> 
> 标签：c#, wpf, xml, treeview

我已按照本文的建议将树视图控件绑定到 xml 文档： [http ://www.codeproject.com/Articles/317766/Displaying-XML-in-a-WPF-TreeView?msg=4546407#xx4546407xx](http://www.codeproject.com/Articles/317766/Displaying-XML-in-a-WPF-TreeView?msg=4546407#xx4546407xx)

但是，现在我不知道如何访问所选项目。

这是我的 XAML：

```
<Window.Resources>
    <XmlDataProvider x:Key="xmldata" Source="cats.xml" XPath="/CategoryArray" />
    <HierarchicalDataTemplate DataType="Category" ItemsSource="{Binding XPath=./*}">
        <StackPanel Orientation="Horizontal">
            <TextBlock Margin="5,0,0,0" Text="{Binding XPath=@Name}" Tag="{Binding XPath=@ID}" />
        </StackPanel>
    </HierarchicalDataTemplate>
    <HierarchicalDataTemplate DataType="CategoryArray" ItemsSource="{Binding XPath=./*}">
        <TextBlock Margin="0" Text="eBay Categories" />
    </HierarchicalDataTemplate>
</Window.Resources>
<Grid DataContext="{StaticResource xmldata}">
    <TreeView Name="treeView1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ItemsSource="{Binding}" VirtualizingStackPanel.IsVirtualizing="False" VirtualizingStackPanel.VirtualizationMode="Standard" SelectedItemChanged="treeView1_SelectedItemChanged" />
</Grid> 
```

这似乎不像我想象的那样工作：

```
 private void treeView1_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
    {
        try
        {
            TreeViewItem selectedItem = treeView1.SelectedValue as TreeViewItem;
            categoryName = selectedItem.Name;
            categoryID = selectedItem.Tag.ToString();
            categoryChosen = true;
        }
        catch { }
    } 
```

由于我使用的是这个分层数据模板和一个文本块，我不知道该怎么做。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T05:48:45.730

在使用 XAML 时，您可以使用绑定来检索框架元素的属性。但是在这种特殊情况下，TreeView 的 SelectedItem 属性是只读的，因此您可能无法直接绑定它，但您可以使用附加属性来实现相同的目的。

我试图为你的案例制作一个样本

在带有更改通知的 VM 类中声明一个附加属性以执行您的逻辑

```
public static object GetSelectedTreeItem(DependencyObject obj)
{
    return (object)obj.GetValue(SelectedTreeItemProperty);
}

public static void SetSelectedTreeItem(DependencyObject obj, object value)
{
    obj.SetValue(SelectedTreeItemProperty, value);
}

// Using a DependencyProperty as the backing store for SelectedTreeItem.  This enables     animation, styling, binding, etc...
public static readonly DependencyProperty SelectedTreeItemProperty =
    DependencyProperty.RegisterAttached("SelectedTreeItem", typeof(object), typeof(YourVMClass), new PropertyMetadata(null, OnSelectedItemChange));

public static void OnSelectedItemChange(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    //do your stuff here eg.
    YourVMClass vm = d as YourVMClass;
    dynamic selectedItem = e.NewValue;
    vm.categoryName = selectedItem.Name;
    vm.categoryID = selectedItem.Tag.ToString();
    vm.categoryChosen = true;
} 
```

您的 XAML 绑定如下

```
<TreeView vm:YourVMClass.SelectedTreeItem="{Binding SelectedItem,Mode=OneWay,RelativeSource={RelativeSource Self}}"> 
```

因此，这会将 TreeView 的 Selected Item 的值设置为 VM 类的 SelectedTreeItem 属性，并将触发 change 事件，以便您执行进一步的操作。

我还可以看到，目前您正在使用 XML 数据作为数据上下文，因此您可能需要根据您的使用情况调整上述代码，概念保持不变。如果您不打算更改数据上下文，您可能会在相应 XAML 的代码隐藏文件中声明附加属性。但我建议您进行一些重构，为您的 XAML 实现一个 VM 类，并将 XML 数据作为新 VM 中的属性公开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T23:22:30.883

您可能应该摆脱肮脏的 try catch em all。您可以使用 e.NewValue 并检查它是否是您指定的类型之一。由于您直接告诉 WPF 您的数据模型是什么，因此您可以像这样使用它：

```
private void treeView1_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
{
    var category =  e.NewValue as Category;
    if(category != null)
    {
        //FIXME: do things if its Category
    }
    else
    {
        var categoryArray = e.NewValue as CategoryArray;
        if(categoryArray != null)
        {
            //FIXME: do things if its CategoryArray
        }
    }  
} 
```

# keyboard - Unity3D 游戏构建中没有键盘输入

> ID：16135656
> 
> 赞同：2
> 
> 时间：2013-04-21T20:07:31.810
> 
> 标签：keyboard, registry, unity3d, directinput

我正在使用 Unity3D，并且在“构建”项目时遇到了键盘问题。

当我在 Unity 编辑器中运行游戏时，输入工作正常。但是，当我构建项目并对其进行测试时，我没有任何方向输入。鼠标工作正常，游戏注册击键（Esc 键有效），但玩家不会移动。

我正在使用`Input.GetAxisRaw("Vertical")`和`Input.GetAxisRaw("Horizontal")`

我在网上研究了这个问题，但我仍然卡住了。我找到的唯一解决方案（在各种链接中）提到了 DirectInput 的一个问题，并指出您应该从`[HKEY_CURRENT_USER\Software\Unity\Player]`Windows 注册表中删除键“Input”，但这似乎对我不起作用。

有没有其他人解决过这个问题？任何可行的解决方案？我做错了注册表技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:01:40.253

您应该在编辑->项目设置->输入中检查输入管理器。您是否尝试过使用 GetAxis 而不是 GetAxisRaw？我还建议使用，例如：Input.GetKey(KeyCode.A) 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T03:08:04.287

我已经弄清楚是什么困扰着我。

`Input.GetAxisRaw("Vertical")`并且`Input.GetAxisRaw("Horizontal")`一直都很好。不知何故，脚本中有一些代码在编辑器中运行得很好，但是当作为独立运行时给我一个等于 0 的计算（它取决于 Delta Time，所以我假设运行编译时的 Delta Time 要小得多比在 Unity 编辑器中运行时），因此角色根本没有移动。

# python - 从单个 html 页面上的多个 django 应用程序模型中获取数据

> ID：16135659
> 
> 赞同：3
> 
> 时间：2013-04-21T20:07:47.380
> 
> 标签：python, django

我有一个名为 Project_Name 的项目和一个名为 first_app 的应用程序，其中包含一些文章。我在主页上将这些文章标题显示为指向应用程序页面上文章的链接。

所以在`127.0.0.1:8000/`我有 index.html。这里我显示文章列表。然后，如果我单击一篇文章，我会转到`127.0.0.1:8000/first_app/1`，例如显示第一篇文章。

这是我的项目范围的views.py：

```
...
from first_app.models import Article

def home(request):
    latest_article_list = Article.objects.order_by('-pub_date')[:20]
    context = {'latest_article_list': latest_article_list}
    return render(request, 'index.html', context) 
```

在我的项目范围的 urls.py 中：

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
        url(r'^$', 'Project_Name.views.home', name='home'),
        url(r'^admin/', include(admin.site.urls)),
        ... 
```

这是我的 first_app 应用程序中的 models.py：

```
from django.db import models
from datetime import datetime

class Article(models.Model):
            name = models.CharField(max_length=140)
            content = models.CharField(max_length=1000)
            pub_date = models.DateTimeField(default=datetime.now()) 
```

这是我的 first_app 应用程序中的 views.py：

```
def article_detail(request, article_id):
    art = get_object_or_404(Article, pk=article_id)
    return render(request, 'first_app/detail.html', {'article': art}) 
```

这是我的 first_app 模板文件夹中的 detail.html：

```
<h2><u>{{ article.name }}</u></h2>
<b>Published On: </b>{{article.pub_date }}
<b>Content: </b>
<ul>
    <li>{{ article.content }}</li>
</ul> 
```

这是我的项目主页 index.html：

```
{% if latest_article_list %}
<h2>Latest Articles</h2>
<ul>
    {% for article in latest_article_list %}
        <li><a href="/first_app/{{ article.id }}/">{{article.name }}</a></li>
    {% endfor %}
</ul>
{% else %}
    <p>No articles are available.</p>
{% endif %} 
```

这一切都很好。

**我的问题：** 如果我有两个或多个应用程序，每个应用程序都有自己的文章（出于其他原因，我将文章按不同的应用程序分解），我将如何在主页上获得这些文章？然后我将如何构建 url，以便当我从主页单击一篇文章时，它会将我带到正确的应用程序 url？

例如，我有应用程序：first_app、second_app 和 third_app。每个应用程序都有几篇文章。我希望我的主页显示来自每个应用程序的所有文章。如果我点击来自 first_app 的一篇文章（比如在 first_app 上发布的第三篇文章），我会被定向到 url `127.0.0.1:8000/first_app/3`。同样，如果我点击来自 third_app 的文章（比如在 third_app 上发布的第二篇文章），我会被定向到 url `127.0.0.1:8000/third_app/2`。

我不确定如何遍历我的所有应用程序模型以获取文章表的数据。而且我不确定如何生成 url 来反映文章来自的应用程序。我尝试了一些东西，但没有任何效果。我卡在这一点上。我对 Django 很陌生，所以请给我一些有用的意见或解决方案，而不是解决我的问题。

我应该如何更改我的视图、url 和 html 页面来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:57:04.267

对于 URL 问题，使用模型上的 get_absolute_url 功能，

关于在应用程序中迭代所有模型的问题，你不需要在模板中做任何事情，你应该在视图中收集你需要的数据并将其呈现给模板进行渲染，所以答案是你选择您在视图中需要的模型，然后将其发送到模板。

但是应用程序被认为是可重用的组件，如果您的应用程序彼此之间存在硬依赖，则很难激励它们成为独立的应用程序。

# php - 检查是否在根域上并执行，否则不？

> ID：16135661
> 
> 赞同：0
> 
> 时间：2013-04-21T20:08:08.250
> 
> 标签：php

我正在寻找创建一个 php 函数来检查当前页面是否在根文件夹中，如果是，则它会执行或返回某些内容，否则它什么也不做。这怎么可能实现？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:11:54.610

```
if ($_SERVER['REQUEST_URI'] == '/' || strpos($_SERVER['REQUEST_URI'], '/' . $_SERVER['SCRIPT_NAME']) === 0) {
    // something
} else {
    // something else
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T20:13:24.240

你的意思是根 URI（基本上是 web 脚本的 URL）存储在里面[`$_SERVER['REQUEST_URI']`](http://php.net/manual/en/reserved.variables.server.php)，或者你的意思是[`__FILE__`](http://php.net/manual/en/language.constants.predefined.php)（或`$_SERVER['SCRIPT_NAME']`）在根目录里面？

无论如何，您可以使用这两者之一，然后使用[`dirname()`](http://php.net/manual/en/function.dirname.php), 或[`parse_url()`](http://php.net/manual/en/function.parse-url.php)URI 剥离文件名：

```
dirname(__FILE__) == '/';
dirname($_SERVER['REQUEST_URI']) 
```

# c# - 与此 C# 代码等效的 VB 是什么？

> ID：16135673
> 
> 赞同：1
> 
> 时间：2013-04-21T20:09:26.930
> 
> 标签：c#, vb.net

我在 C# 中有以下行：

```
test.testMethod.Foreach(x => x.testMethod2.Add(test_arg)); 
```

VB中的等价物是什么？

我试图这样做，`x => x.testMethod2.Add`但它不允许我这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T20:12:33.273

这称为[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb531253.aspx)。
vb.net 中的适当等价物将是

```
Sub(x) x.testMethod2.Add(test_arg) 
```

您基本上`Function`是在创建表达式函数和`Sub`创建表达式子例程的情况下使用。有关更多详细信息，请参阅[Lambda 表达式 (Visual Basic)](http://msdn.microsoft.com/en-us/library/bb531253.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T20:11:35.483

这是一个[lambda 表达式](http://msdn.microsoft.com/en-gb/library/bb531253.aspx)。与该 C# lambda 表达式等效的 VB 将是：

```
Sub(x) x.testMethod2.Add(test_arg) 
```

# javascript - 用 JS 重置 CSS3 计时功能

> ID：16135674
> 
> 赞同：2
> 
> 时间：2013-04-21T20:09:27.990
> 
> 标签：javascript, css

当幻灯片到达第二个“1”时，我需要它无缝重置为幻灯片“2”并给人一种无限轮播的印象，

演示：

[http://jsfiddle.net/benhowdle89/cWTbn/](http://jsfiddle.net/benhowdle89/cWTbn/)

编码：

```
$('.wrapper li:first').clone().appendTo($('.wrapper ul'));
var element = $('.wrapper')[0];
element.setAttribute('data-left', 0);
setInterval(function() {
    var mL = +element.getAttribute('data-left'), t = +$('.wrapper').css('width').replace('px', ''), w = +$('.wrapper li:first').outerWidth();
    if(t == (Math.abs(mL) + w)){
        element.style.webkitTransitionTimingFunction = "none";
        element.style.webkitTransform = "none";
        element.setAttribute('data-left', 0);
    }
    element.style.webkitTransitionDuration = "0.3s";
    element.style.webkitTransitionTimingFunction = "ease-out";
    var currentL = +element.getAttribute('data-left');
    var newL = +(currentL + w);
    element.style.webkitTransform = "translate3d(-" + (newL) + "px, 0, 0)";
    element.setAttribute('data-left', newL);
}, 2000); 
```

问题：

在幻灯片“1”之后，它会动画回到幻灯片“2”，所以我不需要它，而是快速回到幻灯片“2”（对用户不可见），

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:11:38.850

将动画移动到单独的类。由于您已经在使用 jQuery，因此可以使用以下内容：

```
$('.animiationClass').removeClass('animationClass').addClass('animationClass'); 
```

# javascript - SuperScrollorama：反转动画

> ID：16135675
> 
> 赞同：0
> 
> 时间：2013-04-21T20:09:28.687
> 
> 标签：javascript, jquery, animation, scroll, gsap

这是我的第一篇文章，但我是一个长期的观众。希望有人可以提供帮助 - 这个人一直让我发疯，我已经尝试并试图找到答案但无济于事。

基本上，我正在用一些风格的滚动元素更新朋友的网站。我选择了 SuperScrollorama，因为它看起来非常棒，尽管我已经准备好接受它对于我想要实现的目标来说完全是矫枉过正。无论如何，我对 SuperScrollorama 真的很感兴趣，所以我想我部分选择它只是为了尝试使用它！

无论如何，我试图实现的想法包括：

单页网站，其中第一部分只是一个居中的大（650 像素宽度）图像和一个`<ul>`居中并固定在包含 6 个`<li>`元素的页面顶部的导航菜单。

在向下滚动时，我希望图像缩小到 250px 宽度，并且我想在第三个和第四个之间留出 250px 的空间，`<li>`以便缩小的图像滚动到然后在滚动期间保持不变。我正在尝试通过向第三个添加边距来创建空间`<li>`。（我很欣赏这可能会给我带来不良的副作用，一个是它不会完全居中。这里也欢迎提出建议！我即将描述的问题，但是，我在尝试基于浮动的其他方法时也遇到过并使用两个单独的 div，因此 margin-right 本身似乎不是根本原因）

现在，我已经设法让图像缩小并将其附加到页面顶部而没有太多麻烦。

我遇到的问题是margin-right。在页面加载时，它`<ul>`看起来居中并均匀分布，正如我想要的那样。第三个的 margin-right 值为`<li>`0。但是，在最小的滚动事件之后，该值从 0 跳到 89px。继续滚动按需要工作，但在向上滚动时，边距返回到 89px，然后停止。

这是我得到的代码：

HTML：

```
<body>
<nav>
        <ul>
            <li><a href="#home">HOME</a></li>
            <li><a href="#programme">PROGRAMME</a></li>
            <li id="grow_margin"><a href="#tickets">TICKETS</a></li>
            <li><a href="#menu">MENU</a></li>
            <li><a href="#venue">VENUE</a></li>
            <li><a href="#faq">FAQ</a></li>
        </ul>   

</nav>

<header id="fix-it">

    <h1><img id="scale-it" src="/images/logo.png" />TITLE</h1>

</header> 
```

CSS：

```
html {
height: 100%;
width: 100%;
}

body {
    height: 100%;
    width: 100%;
}

nav {
position: fixed;
top: 0;
width: 100%;
height: 5%;
text-align: center;
}

nav ul {
list-style: none;
height: 100%;
}

nav ul li {
display: inline-block;
height: 100%;
}

nav ul li a {
color:#bbbbbb;
text-decoration: none;
margin: 8px;
}

header {
width: 100%;
position: fixed;
}

header h1 {
width: 100%;
text-align: center;
margin: 0;
padding: 0;
} 
```

和 JS：

```
<script>
    $(document).ready(function() {
        var controller = $.superscrollorama({
        reverse: true
    });
        var windowHeight=window.innerHeight;
        var scrollDuration = windowHeight; 

        controller.addTween('#grow_margin', 
            TweenMax.to( $('#grow_margin'), .25, {css:{'margin-right':'250px'}, immediateRender:true}), scrollDuration);
        controller.addTween('#scale-it', 
            TweenMax.fromTo( $('#scale-it'), .25, {css:{width:'650px'}, immediateRender:true, ease:Quad.easeInOut}, {css:{width:'250px'}, ease:Quad.easeInOut}), 
            scrollDuration);
        controller.addTween('#fix-it', 
            TweenMax.fromTo( $('#fix-it'), .25, {css:{top:'40%'}, immediateRender:true, ease:Quad.easeInOut}, {css:{top:'4'}, ease:Quad.easeInOut}), 
            scrollDuration);    
    });

</script> 
```

任何帮助将不胜感激！它快把我逼疯了！

谢谢！

抢

# ef-code-first - EF Code First 的存储库模式

> ID：16135676
> 
> 赞同：0
> 
> 时间：2013-04-21T20:09:32.897
> 
> 标签：ef-code-first, repository-pattern

使用 EF Code First 创建存储库模式时，我没有掌握一些东西。如果我想抽象出 EF，我必须使我的存储库的类型为 IObjectContextAdapter，不是吗？这就是 DbContext 实现的。如果我稍后切换到使用 NHibernate 或其他第 3 方 ORM 之类的东西，它可能无法实现 IObjectContextAdapter。

我唯一的解决方案是创建一个包装 ORM 并返回 IObjectContextAdapter 实现的包装器吗？如果是这样，意义何在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:41:17.353

我不确定在`IObjectContextAdapter`使用 EF 创建存储库模式时是否必须实施。使用 EF 或类似 NHibernate 的主要区别在于如何分别包装 the`DbContext`或 the `ISession`。

以下是如何编写 EF 代码优先存储库的草图：

```
public interface IRepository<TEntity>
{
    void Save();
}

public class Repository<TEntity> : IRepository<TEntity>
{
    private readonly IDbSet<TEntity> entitySet;

    public Repository(DbContext context)
    {
        this.entitySet = context.Set<TEntity>();
    }

    public void Save()
    {
        return this.entitySet.SaveChanges();
    }
} 
```

这允许实际`DbContext`注入。

# python - 找到多个 RGB 图像中值的有效方法

> ID：16135677
> 
> 赞同：1
> 
> 时间：2013-04-21T20:09:33.467
> 
> 标签：python, opencv, python-imaging-library, median

我正在玩 Python 中的一个脚本，我想在其中找到许多相同尺寸图像的中位数。也就是说，我不想取位置 [x,y] 中的所有（红色、绿色和蓝色）像素，并用它们的中值构造一个新图像。

我当前的方法使用 Python PIL（成像库），但速度很慢！我非常想使用 OpenCV (cv2) 接口，因为它将每个图像直接加载为 numpy 数组。但是，在堆叠尺寸为 (2560,1920,3) 的 x 图像时，我不断收到错误的索引。有什么帮助吗？

我当前使用 PIL 的低效代码如下：

```
from PIL import Image, ImageChops,ImageDraw,ImageFilter,cv
import sys,glob,sys,math,shutil,time,os, errno,numpy,string
from os import *

inputs = ()
path = str(os.getcwd())
BGdummyy=0
os.chdir(path)
for files in glob.glob("*.png"):
    inputs = inputs + (str(str(files)),)
BGdummy=0
for file in inputs:
    BGdummy=BGdummy+1
    im = cv.LoadImage(file)
    cv.CvtColor( im, im, cv.CV_BGR2RGB )
    img = Image.fromstring("RGB", cv.GetSize(im), im.tostring())
    vars()["file"+str(BGdummy)] = img.load()
imgnew = Image.new("RGB", (2560,1920))
pixnew = imgnew.load()
for x in range(2560):
    for y in range(1920):
        R=[];G=[];B=[];
        for z in range(len(inputs)):
            R.append(vars()["file"+str(z+1)][x,y][0])
            G.append(vars()["file"+str(z+1)][x,y][1])
            B.append(vars()["file"+str(z+1)][x,y][2])
        R = sorted(R)
        G = sorted(G)
        B = sorted(B)
        mid = int(len(inputs)/2.)
        Rnew = R[mid]
        Gnew = G[mid]
        Bnew = B[mid]
        pixnew[x,y] = (Rnew,Gnew,Bnew)
    BGdummyy = BGdummyy+1
imgnew.save("NewBG.png") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T20:48:00.513

我将演示如何使用 5 个大小为 (3,3,3) 的小数组来做到这一点。

首先，我将创建 5 个数组，然后将它们保存在列表 X 中。在您的情况下，您将在此列表中保存 30 张图像。（我在一行中做）

```
X = [a,b,c,d,e] = [np.random.randint(0,255,(3,3,3)) for i in xrange(5)] 
```

接下来，您将每个图像展平为一长单行。所以早些时候你的形象会像

```
[R1G1B1 R2G2B2 R3G3B3,
 R4G4B4 R5G5B5 R6G6B6,
 R7G7B7 R8G8B8 R9G9B9] 
```

这将变为`[R1 G1 B1 R2 G2 B2 R3 G3 B3......... R9 G9 B9]`. 然后你将所有这些扁平化的图像堆叠起来形成一个大的二维数组。你看，在那个数组中，所有第一个红色像素都在第一列，依此类推。然后你可以简单地应用 np.median 。

```
Y = np.vstack((x.ravel() for x in X)) 
```

我把每张图片都拉起来并堆叠起来。在我的例子中，Y 是一个大小为 5x27 的数组（行 - 图像数，列 - 图像中的像素数）

现在我找到这个 Y 的中值并将其重塑为我们的原始图像形状：

```
Z = np.median(Y,axis = 0)
Z = np.uint8(Z.reshape(a.shape)) 
```

完毕。

为了确保它工作正常，让我们检查任意像素的值，比如`Z[0,1,2]`：

```
In [50]: G1 = [x[0,1,2] for x in X]

In [51]: G1
Out[51]: [225, 65, 26, 182, 51]

In [52]: Z[0,1,2]
Out[52]: 65.0 
```

是的，数据是正确的。

# python - ValueError: int() 以 10 为底的无效文字：''无法发现错误

> ID：16135681
> 
> 赞同：2
> 
> 时间：2013-04-21T20:09:45.513
> 
> 标签：python, django, implicit-conversion

我的 view.py 如下所示。我认为错误在本节中。如果现在还不够，我会发布一个详细的功能。基本上，以 total 作为参数的模型是整数类型。

编辑1：编写整个函数，以便它更有帮助。

```
def subjManip(request):

    c= {}
    c.update(csrf(request))
    subj = None
    c.update(csrf(request))
    if request.method == 'POST':
        form = SubjForm(request.POST)

        if form.is_valid():
               user = request.user
               subj1 = form.cleaned_data['subj1']
               subj2 = form.cleaned_data['subj2']
               subj3 = form.cleaned_data['subj3']

               if subj1 == None and subj2 == None:
                   raise forms.ValidationError("Both subjs cannot be empty")

               tot = float (((float(0.2017 * subj1 )+ float (0.09036 * subj2) + float(0.6309 * subj3) - 5.0269)/ 4.184)
               total =int(tot)

               elif subj1 == None:
                   total = subj1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:15:38.453

尝试替换`tot = (subj1+subj2)/2.2`为`tot = (float(subj1) + float(subj2)) / 2.2`

# php - 带有外语的php encode_json

> ID：16135683
> 
> 赞同：-1
> 
> 时间：2013-04-21T20:10:16.930
> 
> 标签：php

json_encode 解码 utf8：

```
$arr = Array(
        'name' => 'ბინტი',
        'count' => '15');
 $result = utf8_encode(json_encode($arr));
 echo $result; 
```

结果是

```
{"name":"\u10d1\u10d8\u10dc\u10e2\u10d8","count":"15"} 
```

有人可以帮忙吗？ps 对不起外语我不能用正确的标题发布问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:18:54.780

这是完全可以预料的。具有外来字符的外语不适合基本的 ASCII，因此 JSON 使用一些编码序列（`\u`+ 4 十六进制（unicode 序列））来表示您的字符。解码时，unicode 序列被转换回真正的 unicode 字符。

这样做的好处是在存储和读取 JSON 时不会出现编码问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:36:25.923

我使用以下 javascript 代码测试了您的角色：

```
 <script type="text/javascript">
     var a = "\u10d1\u10d8\u10dc\u10e2\u10d8"
     alert(a);
   </script> 
```

Firefox 打印了这条消息：

![在此处输入图像描述](https://i.stack.imgur.com/LxTVh.png)

如您所见，您的格鲁吉亚字符还可以。所以，`json_encode`工作正常。顺便提一句：

```
$result = json_encode($arr); 
```

产生与

```
$result = utf8_encode(json_encode($arr)); 
```

# python - Python列表练习反馈

> ID：16135686
> 
> 赞同：0
> 
> 时间：2013-04-21T20:10:45.047
> 
> 标签：python

嘿伙计们，我正在学习 python，我被困在这个问题上。我已经尝试过了，但我的输出不符合正确答案。有什么原因以及如何解决它？

**问题：**刺客游戏是一个在大学校园里玩的简单游戏，每个玩家只需对他们说“你死了”就被分配了一个暗杀目标。当然，校园里有成千上万的人，而游戏中只有几十人，你永远不知道谁想要暗杀你。一旦你暗杀了一个人，你就会找到他们正在寻找的目标。如果这恰好是你，那么你就是赢家。为确保其正常工作，目标必须形成一个连续的“链”。编写一个程序，允许用户输入他们的目标分配，并根据是否存在连续的“链”输出它是否有效。列表中的每个人都由列表中的位置表示。该位置的价值是他们的目标。

**我的代码：**

```
total=0
list_of_players=[]
player=raw_input("Enter a player (end to stop): ")

while player !="end":
    list_of_players.append(int(player))

    player=raw_input("Enter a player (end to stop): ")

for x in range(len(list_of_players)):
    total+=1
    if list_of_players[x]==0 and len(list_of_players)==total:
        print "The game is valid."
if list_of_players[x]!=0 or len(list_of_players)!=total:
    print "The game is not valid. " 
```

问题是如果我**输入玩家 4,3,0,5,6,2,1:**它应该是**有效**的。我的程序将此显示为**invalid**。有什么想法可以改进我的程序吗？如果有人好奇，我从programmersheaven.com 得到了这个练习题！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:42:15.960

IMO，这个问题非常适合从图遍历开始，所以看看：

[https://www.python.org/doc/essays/graphs/](https://www.python.org/doc/essays/graphs/)

*   从第一项开始
*   如果您最终回到第一项并且访问了所有节点，tadaaa :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:22:57.327

提示：您的代码将始终拒绝任何不以 0 结尾的序列。

尝试将您的验证逻辑实现为返回`True`或`False`基于序列是有效还是无效的函数，并根据该函数的结果打印验证语句。

**编辑**

经过进一步检查，我将尝试为您提供一些更好的解决方案指导提示。

正如@a-rodas answer中所述，`if 0 in list_of_players`将帮助您检查 0 是否是序列的一部分。对于另一个约束，您可以阅读[`max()`](http://docs.python.org/2/library/functions.html#max "Python：max() 内置函数")内置函数并考虑如何将它用于您的`total`/ `len(list_of_players)`。

使用编辑中的这些提示，您应该能够使用简单的`if`/`else`语句验证序列（不需要函数）。为了练习，我没有包含代码示例。但请随时提出问题，以便我们进一步帮助您找到自己的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T00:04:53.537

```
len(list_of_players) 
```

永远不会等于总数，因为

```
range(len(list_of_players)) 
```

将创建一个范围 from`0`到`len(list_of_players)` **排除**stop 参数，因此最后一个元素将等于`len(list_of_players) - 1`. 由于您在循环的每次迭代中添加，`1`只会达到并且您的条件将永远不会得到满足。`total``total``len(list_of_players) - 1``len(list_of_players)==total`

但是，您也没有检查它是否是一个链，在示例中`4`-> `6`-> `1`-> `3`-> `5`-> `2`-> `0`->`4`这是一个有效的链，您需要检查它。选择任何索引开始。保留一组您已经看过的物品，如果您在到达起始元素之前遇到您已经看过的物品，则链条不是连续的。

```
total=0
list_of_players=[]
player=raw_input("Enter a player (end to stop): ")

while player !="end":
    list_of_players.append(int(player))

    player=raw_input("Enter a player (end to stop): ")

seen = set() # this could also be seen = [] but sets are faster
i = 0 # index to start at

# we should be able to go through len(list_of_players)
# before reaching the start player
for x in range(len(list_of_players)): 
    if i in seen:
        print "the game is not valid. "
        break
    seen.add(i)
    i = list_of_players[i]
else: # successful completion, no breaks
    print "The game is valid. " 
```

# c - 加载图像时 libharu 内存分配失败

> ID：16135689
> 
> 赞同：1
> 
> 时间：2013-04-21T20:10:51.013
> 
> 标签：c, libharu

我有一些 C 代码试图使用 libharu。虽然我可以使用这个库的所有功能（甚至是 UTF8），但我几乎无法绘制图像。这是一些非常基本的代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <math.h>
#include <setjmp.h>
#include "hpdf.h"

jmp_buf env;

#ifdef HPDF_DLL
void  __stdcall
#else
void
#endif
error_handler  (HPDF_STATUS   error_no,
                HPDF_STATUS   detail_no,
                void         *user_data)
{
    printf ("ERROR: error_no=%04X, detail_no=%u\n", (HPDF_UINT)error_no,
                (HPDF_UINT)detail_no);
    longjmp(env, 1);
}

int main (int argc, char **argv)
{
    HPDF_Doc  pdf;
    HPDF_Font font;
    HPDF_Page page;
    char fname[256];
    HPDF_Image image;

    strcpy (fname, argv[0]);
    strcat (fname, ".pdf");

    pdf = HPDF_New (error_handler, NULL);
    if (!pdf) {
        printf ("error: cannot create PdfDoc object\n");
        return 1;
    }

    /* error-handler */
    if (setjmp(env)) {
        HPDF_Free (pdf);
        return 1;
    }

    font = HPDF_GetFont (pdf, "Helvetica", NULL);

    page = HPDF_AddPage (pdf);

    HPDF_Page_SetWidth (page, 550);
    HPDF_Page_SetHeight (page, 500);

    image = HPDF_LoadPngImageFromFile (pdf, "img.png");

    HPDF_SaveToFile (pdf, fname);

    HPDF_Free (pdf);

    return 0;
} 
```

当我编译这个时，我有`ERROR: error_no=1015, detail_no=0`. 我在 stackoverflow 中找到了类似的帖子：[this](https://stackoverflow.com/questions/10771205/why-memory-allocation-failed-whe-hpdf-loadpngimagefromfile-using-libhpdf)。然而，尽管原始海报说问题已经解决，但它几乎没有帮助我。我将 img.png 移动到一个文件夹并重新编译了该文件。更改了说明`/home/name/path/to/img.png`哪个是图像的直接路径的代码。没有任何效果。我“总是”有同样的错误，但是当我更改我拥有的文件名时，`ERROR: error_no=1017, detail_no=2`这基本上意味着程序找不到图像（根据 libharu 的引用）所以我推断程序找到了 img.png；但是，奇怪的是，无法分配必要的内存。这很奇怪，因为我看不出这个程序不分配内存的任何理由。我有各种许可。

我在 Ubuntu Quantal Quetzal 和 libharu 2.3.0 RC2 下使用 GCC 4.7.2。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-11-03T13:27:21.530

你好多项式的等式。

`haru sdk`当我在我的 macOS 环境中集成时，我也遇到了同样的问题。

`error_handler`返回的`ERROR: error_no=1017, detail_no=2`，然后我`haru`在[http://libharu.sourceforge.net/error_handling.html](http://libharu.sourceforge.net/error_handling.html)查看了官方文档，查询`0x1017`表明文件打开失败，所以我怀疑该方法的 第二**个参数**`HPDF_LoadPngImageFromFile`需要传递一个精确的**png图片文件路径**，所以我修改后问题解决了，希望对你有帮助。

代码广告如下：

```
char filename1[255];
strcpy(filename1, "/Users/xx/Downloads/lusaceg.com.png");
image = HPDF_LoadPngImageFromFile (pdf, filename1); 
```

肃然。

# node.js - Cloudfoundry 上的非 http TCP 连接

> ID：16135691
> 
> 赞同：3
> 
> 时间：2013-04-21T20:10:53.767
> 
> 标签：node.js, tcp, cloud, cloud-foundry

我是一个新手移动开发人员，试图利用 cloudfoundry 的服务来运行我的服务器来处理一些聊天和角色移动。我正在使用 Noobhub 来实现这一点（使用 Node.js 和 Corona SDK 的 TCP 连接 API 在服务器和客户端之间建立 TCP 连接）

所以基本上我正在Cloudfoundry（Node.js）和我的机器（lua）之间尝试非http TCP连接。

[链接到 Noobhub（有一个带有服务器和客户端实现的 github 存储库。](http://developer.coronalabs.com/code/noobhub)

我在做

客户

```
...
socket.connect("myappname.cloudfoundry.com", 45234)
... 
```

（45234 来自服务器的 process.env.VCAP_APP_PORT 值，我在运行应用程序后通过“vmc logs myappname”从控制台输出中检索到。）

服务器

```
...
server.listen(process.env.VCAP_APP_PORT) 
```

当我尝试连接时，它只是超时。

在我的本地机器上，做客户端

```
...
socket.connect("localhost",8989) 
```

服务器

```
...
server.listen(8989) 
```

按预期工作。它只是在cloudfoundry上不起作用。

我尝试了许多其他方法，例如将客户端的端口连接设置为 80 和其他一些方法。我看到了一些资源，但没有一个能解决它。我通常会问问题，所以如果您需要更多信息，请问我！

附言

在你带着愤怒的脸 D:< 向我扔这个链接之前，这里有一个问题，它显示了另一个人发布的类似问题。

[无法连接到 CloudFoundry 上的 TCP 服务器（localhost node.js 工作正常）](https://stackoverflow.com/questions/15432530/cannot-connect-to-tcp-server-on-cloudfoundry-localhost-node-js-works-fine?rq=1)

从这里，我可以看到这个人正在尝试做我正在做的类似事情。选择的答案是否意味着我必须使用主机标头（即使用 http 协议）进行连接？这是否也意味着 cloudfoundry 不会像 heroku 或应用程序雾那样支持“真正的”TCP 套接字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-26T09:41:08.700

实际上，`process.env.VCAP_APP_PORT`环境变量为您提供了端口，Cloud Foundry L7 路由器 (nginx) 根据您的应用程序路由将您的 HTTP 流量重定向到该端口（例如 nodejsapp.vcap.me:80 被重定向到`process.env.VCAP_APP_PORT`虚拟机上的端口） ，所以你绝对不应该将它用于 TCP 连接。此端口应用于侦听 HTTP 流量。这就是为什么您的示例在本地工作而不在 Cloud Foundry 上工作的原因。

对我有用的方法是使用 HTTP 服务器侦听 CF 提供的端口，然后将 Websocket 服务器（在下面的示例中为 websocket.io）附加到它。我创建了可以在本地和 CF 中运行的示例回显服务器。我命名的 Node.js 文件的内容`example.js`是

```
var host = process.env.VCAP_APP_HOST || "localhost";
var port = process.env.VCAP_APP_PORT || 1245;

var webServerApp = require("http").createServer(webServerHandler);  
var websocket = require("websocket.io");
var http = webServerApp.listen(port, host);
var webSocketServer = websocket.attach(http);

function webServerHandler (req, res) {
    res.writeHead(200);
    res.end("Node.js websockets.");
}
console.log("Web server running at " + host + ":" + port);

//Web Socket part
webSocketServer.on("connection", function (socket) {
    console.log("Connection established."); 

    socket.send("Hi from webSocketServer on connect");

    socket.on("message", function (message) { 
        console.log("Message to echo: " + message);
        //Echo back
        socket.send(message);
    });

    socket.on("error", function(error){
        console.log("Error: " + error);
    });

    socket.on("close", function () { console.log("Connection closed."); });
}); 
```

依赖库`websocket.io`可以安装`npm install websocket.io`在同一目录中运行命令。还有一个`manifest.yml`描述 CF 部署参数的文件：

```
---
applications:
- name: websocket
  command: node example.js
  memory: 128M
  instances: 1
  host: websocket
  domain: vcap.me
  path: . 
```

所以，`cf push`从这个目录运行部署的应用程序到我的本地 CFv2 实例（在[cf_nise_installer](https://github.com/yudai/cf_nise_installer)的帮助下设置）为了测试这个 echo websocket 服务器，我使用了简单的`index.html`文件，它连接到服务器并发送消息（一切都登录到控制台）：

```
<!DOCTYPE html>
    <head>
        <script>        
        var socket = null;
        var pingData = 1;
        var prefix = "ws://";

        function connect(){
            socket = new WebSocket(prefix + document.getElementById("websocket_url").value);
            socket.onopen = function() { 
                console.log("Connection established"); 
            };
            socket.onclose = function(event) { 
                if (event.wasClean) {
                    console.log("Connection closed clean");
                } else {
                    console.log("Connection aborted (e.g. server process killed)");
                }
                    console.log("Code: " + event.code + " reason: " + event.reason);
                };             
            socket.onmessage = function(event) { 
                console.log("Data received:  " + event.data);
            };
            socket.onerror = function(error) { 
                console.log("Error: " + error.message);               
            };
        }        
        function ping(){
            if( !socket || (socket.readyState != WebSocket.OPEN)){
                console.log("Websocket connection not establihed");
                return;
            }            
            socket.send(pingData++);
        }        
        </script>
    </head>
    <body>
        ws://<input id="websocket_url">
        <button onclick="connect()">connect</button>
        <button onclick="ping()">ping</button>
    </body>
</html> 
```

剩下要做的就是在`Index`页面的文本框中输入服务器地址（在我的例子中是 websocket.vcap.me），按下连接按钮，我们就可以通过 TCP 进行 Websocket 连接，这可以通过发送 Ping 和接收回显来测试。这在 Chrome 中运行良好，但是 IE 10 和 Firefox 存在一些问题。

“TRUE” TCP 套接字怎么样，没有确切的信息：根据最后一段 [，](http://docs.cloudfoundry.com/docs/using/app-arch/index.html)您不能使用除 80 和 443（HTTP 和 HTTPS）之外的任何端口从 Cloud Foundry 外部与您的应用程序通信，这让我认为 TCP套接字无法实现。但是，根据[这个](https://stackoverflow.com/a/11769286/1948038)答案，您实际上可以使用任何其他端口......似乎需要对这个问题进行一些深入的调查......

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-28T22:30:08.613

“Cloud Foundry 在客户端和应用程序之间使用 L7 路由器 (ngnix)。路由器需要先解析 HTTP，然后才能将请求路由到应用程序。这种方法不适用于 WebSockets 等非 HTTP 协议。运行 node.js 的人会遇到了这个问题，但在 Cloud Foundry 的当前架构中没有简单的修复方法。” - [http://www.subbu.org/blog/2012/03/my-gripes-with-cloud-foundry](http://www.subbu.org/blog/2012/03/my-gripes-with-cloud-foundry)

我决定使用 pubnub 来满足我所有的消息传递需求。

# python - 在python中一次有两个'for'循环

> ID：16135692
> 
> 赞同：2
> 
> 时间：2013-04-21T20:10:55.467
> 
> 标签：python, list

假设我正在遍历 python 中的列表：

```
lines = [1, 2, 3, 4]

linecount = len(lines)

#I want to be able to do this:
for i, j in range(linecount - 1, -1, -1), range(linecount, -1, -1):
    print i, j

"""
This would print out
3 4
2 3
1 2
0 1
0 0
""" 
```

我怎么能这样做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T20:13:12.303

```
for i, j in zip(range(linecount - 1, -1, -1), range(linecount, -1, -1)):
    print i, j 
```

# java - org.apache.commons.dbcp.DelegatingPreparedStatement 不能强制转换为 com.mysql.jdbc.PreparedStatement

> ID：16135693
> 
> 赞同：0
> 
> 时间：2013-04-21T20:11:06.203
> 
> 标签：java, spring-mvc, prepared-statement, jdbctemplate

我正在尝试使用准备好的语句查询数据库，但是出现错误：org.apache.commons.dbcp.DelegatingPreparedStatement 无法转换为 com.mysql.jdbc.PreparedStatement。

**进口**

```
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.dao.DataAccessException;
import org.springframework.jdbc.core.PreparedStatementCreator;
import org.springframework.jdbc.core.ResultSetExtractor;
import org.springframework.jdbc.core.simple.ParameterizedRowMapper;
import org.springframework.jdbc.core.support.JdbcDaoSupport;
import org.springframework.jdbc.support.GeneratedKeyHolder;
import org.springframework.jdbc.support.KeyHolder;
import org.springframework.stereotype.Repository;

import com.mysql.jdbc.PreparedStatement;
import com.mysql.jdbc.Statement; 
```

**JDBC**

```
public List<Crime> getCrimeList(Crime crime) {
        String where_clause = "";

        final List<Object> args = new ArrayList<Object>();
        final StringBuilder whereClause = new StringBuilder();

        if (crime.getCrimeDate()!= null){
             whereClause.append(" and crime.crimeDate = ?");
             args.add(crime.getCrimeDate());

        }

        if(crime.getCrimeDetails() != null){
            whereClause.append(" and crime.crimeDetails = ?");
             args.add(crime.getCrimeDetails());

        }

        ..............

        logger.debug("In getCrimeList()");
        final String sql = "select crime.*, "+
                     "criminalSocialSecurityNumber,criminal.fName as criminalFName,criminal.lName as criminalLName,"+
                     "criminal.photo as criminalPhoto,criminal.dob as criminalDob,victimSocialSecurityNumber,"+
                     "victim.fName as victimFName,victim.lName as victimLName,victim.photo as victimPhoto, victim.dob as victimDob "+ 
                     "from tblcrimes crime "+
                     "left join tblcriminalcrime on crime.crimeRecNo = tblcriminalcrime.crimeRecNo "+
                     "left join tblvictimcrime on crime.crimeRecNo = tblvictimcrime.crimeRecNo "+
                     "inner join tblcitizens criminal on criminal.socialSecurityNumber = tblcriminalcrime.criminalSocialSecurityNumber "+
                     "inner join tblcitizens victim on victim.socialSecurityNumber = tblvictimcrime.victimSocialSecurityNumber ";

        logger.debug("Executing getCrimeList String "+sql);

        List<Crime> crimeList = getJdbcTemplate().query(new PreparedStatementCreator(){

        public java.sql.PreparedStatement createPreparedStatement(
                java.sql.Connection connection) throws SQLException {

            PreparedStatement ps =(PreparedStatement) connection.prepareStatement(sql + whereClause);
            int i = 1;
            for (Object arg : args) {
                ps.setObject(i, arg);
                i++;
            }

            return ps;
        }
        },  new CrimeMapper());      

        return crimeList;   

    } 
```

**错误**

```
HTTP Status 500 - Request processing failed; nested exception is java.lang.ClassCastException: org.apache.commons.dbcp.DelegatingPreparedStatement cannot be cast to com.mysql.jdbc.PreparedStatement

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.ClassCastException: org.apache.commons.dbcp.DelegatingPreparedStatement cannot be cast to com.mysql.jdbc.PreparedStatement

org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)

root cause

java.lang.ClassCastException: org.apache.commons.dbcp.DelegatingPreparedStatement cannot be cast to com.mysql.jdbc.PreparedStatement
    com.crimetrack.jdbc.JdbcCrimeDAO$2.createPreparedStatement(JdbcCrimeDAO.java:372)
    org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:581)
    org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:637)
    org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:662)
    com.crimetrack.jdbc.JdbcCrimeDAO.getCrimeList(JdbcCrimeDAO.java:367)
    com.crimetrack.service.CrimeManager.getCrimesList(CrimeManager.java:24)
    com.crimetrack.web.CrimeRegistrationController.handelCrimeList(CrimeRegistrationController.java:229)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:19:58.370

在线的 ：

```
PreparedStatement ps =(PreparedStatement) connection.prepareStatement(sql + whereClause); 
```

你确定`PreparedStatement` 是`java.sql.PreparedStatement`吗？

不知道为什么需要转换从`connection.prepareStatement()`. 此方法返回一个类型为 的对象`java.sql.PreparedStatement`。如果您正确导入类，请检查您的导入语句。

# r - 循环优化函数

> ID：16135696
> 
> 赞同：1
> 
> 时间：2013-04-21T20:11:14.203
> 
> 标签：r, optimization, time-series

我正在尝试处理来自 AR(2) 模型的似然函数。我必须最大化关于两个变量 alpha1 和 alpha2 的函数。因为它是关于时间序列的，所以我将变量 x 存储在一个矩阵中 200 个时间段。我对此进行了 10000 次模拟。所以我有一个 200x10000 矩阵中的 x 值。我想直接有一个 2x10000 的矩阵，其中存储了每个模拟的优化结果。我设置了一个 for 循环，并在其中指定了函数，但它不起作用，即当我运行它时它告诉我：

```
Error in A <- -optim(c(1.5, 0.75), log_lik) : argument not valid for operator 
```

我在这里附上我的代码。在运行循环之前，我创建了一个包含结果的函数，我称它为 A：

```
for (i in 1:R) {
 for (t in 3:N) {
  log_lik <- function (α) {
    α1 <- α[1]
    α2 <- α[2]
    L = -1/2*((N-2)*log(pi*2)+(N-2)*log(1)+sum((x[t,i]-c-α1*x[t-1,i]-α2*x[t-2,i])^2))
  }
  A <- -optim(c(1.5, 0.75), log_lik)$par
 }
 return(A)
} 
```

非常感谢！！

# g++ - 在 Sublime Text 2 中编译 C++ 程序

> ID：16135705
> 
> 赞同：0
> 
> 时间：2013-04-21T20:12:02.897
> 
> 标签：g++, sublimetext2

我安装了`git-cmd.bat`命令提示符，所以我可以做 RoR。我忘了我是从哪里弄到这个的。无论如何，`git-cmd.bat`已经安装了 g++ 或其他东西（我不知道为什么并且很想学习！）。

对于课堂，我需要确保我的项目在视觉工作室和 g++ 上运行。我喜欢用崇高的方式编写我的程序，然后转移到 ide 进行测试，然后再转移回去并修复代码。这变得非常乏味，并且`g++ -o asdf *.cpp`每次都编写并不理想。

当我`ctrl+b`在崇高的时候，它给了我这个错误：

```
[Error 2] The system cannot find the file specified
[cmd:  [u'g++', u'C:\\Users\Desktop\\Project 2\\main.cpp', u'-o', u'C:\\Users\\\Desktop\\Project 2/main']]
[dir:  C:\Users\s\Desktop\Project 2]
[path: C:\windos\system32;C:\windows;C:\windows\System32\Wbem;C:\windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon\;C:\Program Files\Lenovo\Bluetooth Software\;C:\Program Files\Lenovo\Bluetooth Software\syswow64;c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\MATLAB\R2013a\runtime\win64;C:\Program Files\MATLAB\R2013a\bin;C:\Ruby193\bin]
[Finished] 
```

我认为 g++ 已经安装，因为我可以在我的 git 命令提示符下运行 g++，所以它应该已经在路径中。谁能帮帮我？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-01T02:40:51.977

嘿，不确定您是否发现了这一点，但它正在检查路径中列出的目录。

因此，您必须在系统路径中添加 g++ 的路径：http: [//www.computerhope.com/issues/ch000549.htm](http://www.computerhope.com/issues/ch000549.htm)

或者它说“g++”你必须添加可执行文件的绝对路径。例如，我没有两次下载 MinGW，而是链接到 MinGW 的 Code::Blocks（我选择的 IDE）版本，“g++”现在说：

C:\Program Files (x86)\CodeBlocks\MinGW\bin\g++

（每个斜线都在上面两次，StackOverflow 正在转义字符串）

我不熟悉您提到的“git-cmd.bat 提示”，但如果它确实有 g++，您必须找到它的路径并执行上述操作之一。如果 StackOverflow/Google 无法说明这一点，我建议您在 Windows 资源管理器中搜索 g++。

# ruby-on-rails - Nokogiri-为每个抓取的结果创建一个哈希

> ID：16135706
> 
> 赞同：0
> 
> 时间：2013-04-21T20:12:09.957
> 
> 标签：ruby-on-rails, ruby, nokogiri

我正在尝试为与我的 css 选择器匹配的每个结果创建一个哈希。就目前而言，每页大约有 10 个结果，但我想为每个结果创建一个哈希。最好的方法是什么？

或者，限制在 nokogiri 中找到的结果数量是否有意义？

```
 listing_data = @nodes

listing = {

    :url => listing_data.css('div#content div.content_inner div.section div.supercolumn div.column div.block div.items div#pages div.unsponsored div.item.compact div.item_inner div.photo a img.tiny').text,
    :price => listing_data.css('div#content div.content_inner div.section div.supercolumn div.column div.block div.items div#pages div.unsponsored div.item.compact div.item_inner div.more h3 span').text
}
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:14:08.457

那么`listing_data.css`返回结果的数组（或类似的东西）？粗略的代码草图：

```
urls = listing_data.css('selector here')
prices = listing_data.css('another selector')
result = urls.zip(prices).map do |url,price|
  {:url => url, :price => price}
end 
```

# r - 给 mfinal>10 时，adabag 增强功能会引发错误

> ID：16135708
> 
> 赞同：4
> 
> 时间：2013-04-21T20:12:19.867
> 
> 标签：r, adaboost

我有一个奇怪的问题，每当我尝试将 adabag 包的增强功能中的 mfinal 参数增加到 10 以上时，我都会收到一个错误，即使 mfinal=9 我也会收到警告。

我的火车数据有 7 个类因变量和 100 个自变量以及大约 22000 个数据样本（使用 DMwR 检测了一类）。我的因变量按顺序位于训练数据集的末尾。

```
library(adabag)
gc()
exp_recog_boo <- boosting(V1 ~ .,data=train_dataS,boos=TRUE,mfinal=9)

Error in 1:nrow(object$splits) : argument of length 0
In addition: Warning messages:
1: In acum + acum1 :
longer object length is not a multiple of shorter object length 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-06-29T20:14:04.023

我的错误是我之前没有将目标设置为因素。

尝试这个：

```
train$target <- as.factor(train$target) 
```

并通过以下方式检查：

```
str(train$TARGET) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-19T16:51:22.373

这对我有用：

```
modelADA <- boosting(lettr ~ ., data = trainAll, boos = TRUE, mfinal = 10, control = (minsplit = 0)) 
```

基本上我只是告诉 rpart 要求最小分割长度为零来生成树，它消除了错误。我没有对此进行广泛的测试，所以我不能保证它是一个有效的解决方案（零长度叶子的树实际上是什么意思？），但它确实可以防止错误被抛出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-10T14:37:01.277

我想我遇到了问题。

忽略这个 - 如果你用 cp = 0 配置你的控件，这不会发生。我认为，如果树的第一个节点没有改进（或至少不比 cp 好），那么树会保持 0 个节点，所以你有一个空树，这会使算法失败。

编辑：问题是 rpart 生成的树只有一个叶子（节点），而提升方法使用这句话“k <- varImp（arboles [[m]]，surrogates = FALSE，competites = FALSE）”是arboles [[ m]] 一棵只有一个节点的树，它会给你带来错误。

要解决这个问题，您可以修改提升方法：

编写：修复（增强）并添加 *'S 行。

```
if (boos == TRUE) { 
**   k <- 1
**   while (k == 1){
     boostrap <- sample(1:n, replace = TRUE, prob = pesos)
     fit <- rpart(formula, data = data[boostrap, -1],
         control = control)
**   k <- length(fit$frame$var)
**   }
     flearn <- predict(fit, newdata = data[, -1], type = "class")
     ind <- as.numeric(vardep != flearn)
     err <- sum(pesos * ind)
 } 
```

这将阻止算法接受一棵叶子树，但您必须将控制参数中的 CP 设置为 0 以避免无限循环。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-29T14:40:35.640

刚刚遇到了同样的问题，将复杂性参数设置为 -1 或最小拆分为 0 都适用于 rpart.control，例如

```
library(adabag)

r1 <- boosting(Y ~ ., data = data, boos = TRUE, 
               mfinal = 10,  control = rpart.control(cp = -1))

r2 <- boosting(Y ~ ., data = data, boos = TRUE, 
               mfinal = 10,  control = rpart.control(minsplit = 0)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-25T04:46:01.310

我最近也遇到了同样的问题，[这个示例 R 脚本](http://ufal.mff.cuni.cz/~hladka/ML/PRACTICE/Dec-14.R)完全解决了它！

主要思想是您需要适当地设置 rpart 的控件（adabag 用于创建树，请参阅 rpart.control），以便在每棵树中至少尝试拆分。

我不完全确定，但似乎您的“长度为 0 的参数”可能是空树的结果，这可能是因为“复杂性”参数的默认设置告诉函数不要尝试拆分如果同质性/缺乏拟合的降低低于某个阈值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-24T23:45:24.563

使用 str() 查看数据框的属性。对我来说，我只是将 myclass 变量转换为因子，然后一切运行。

# node.js - MongoDB 使用 Map/Reduce 将一个字段合并到现有集合中

> ID：16135709
> 
> 赞同：4
> 
> 时间：2013-04-21T20:12:22.823
> 
> 标签：node.js, mongodb, mapreduce, mongoose

我有一个包含 2 个集合的 MongoDB 数据库：

*   组：{ group_slug，成员 }
*   用户：{ id，显示名称，组 }

对组的所有更改都是通过更改组的成员数组以包含用户 ID 来完成的。

我想通过使用 map/reduce 将这些更改同步到用户集合。如何将 map/reduce 的结果输出到现有集合中（但*不*合并或减少）。

我现有的代码在这里：[https ://gist.github.com/morgante/5430907](https://gist.github.com/morgante/5430907)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:35:03.927

> 如何将 map/reduce 的结果输出到现有集合中

你真的不能这样做。这也不是真正建议的行为。还有其他解决方案：

解决方案#1：

*   将 map/reduce 输出到临时集合中
*   运行从临时集合更新主数据存储的后续任务
*   清理临时集合

老实说，这是一种安全的方法。您可以在整个循环中实现一些基本的重试逻辑。

解决方案#2：

*   将更改放在队列中。（*即“用户订阅组”*）
*   从正在侦听队列中此类事件的单独工作人员中更新这两个表。

这个解决方案可能需要一个单独的部分（队列），但任何大型系统都会有这样的非规范化问题。所以这不会是你看到这个的唯一地方。

# javascript - 从带有参数的指令调用控制器函数

> ID：16135711
> 
> 赞同：22
> 
> 时间：2013-04-21T20:12:53.363
> 
> 标签：javascript, angularjs, angularjs-directive

指令如何从带有一些参数的控制器调用函数？

我会将变量 myVar 赋予范围。$apply(attrs.whattodo);

HTML：

```
<div ng-app="component">
  <div ng-controller="ctrl">
    <span ng-repeat="i in myarray">
     <span  customattr  whattodo="addVal">{{i}}</span>
    </span>
  </div> 
```

控制器 JS：

```
 function ctrl($scope) {
      $scope.myarray = [1];
      $scope.addVal = function (value) {
          $scope.myarray.push(value);
      }
   } 
```

指令 JS：

```
angular.module('component', []).directive('customattr', function () {
  return {
      restrict: 'A',
      link: function (scope, element, attrs) {
          var myVar = 5;
          scope.$apply(attrs.whattodo);
      } 
  }; 
}); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-21T20:55:55.173

这是其中一种工作方法：

您必须在作用域中将此属性绑定为具有函数类型的作用域模型。因此，您可以在需要其他（指令）sope 时执行此操作

**HTML**

```
<body ng-controller="MainCtrl">
  Value: {{value}}!

  <button customattr whattodo="addValue">Add</button>
</body> 
```

**JS**

```
angular.module('component', [])

.controller('MainCtrl', function($scope) {
  $scope.value = 1;

  $scope.addValue = function(val){
    alert(val);
    $scope.value = val;
  }
});

.directive('customattr', function () {
  return {
      restrict: 'A',
      scope: {
          whattodo: "=" // or ' someOtherScopeName: "=whattodo" '
      },
      link: function (scope, element, attrs) {
          var myVar = 5;
          scope.whattodo(myVar); // or ' scope.someOtherScopeName(myVar) '
      } 
  }; 
}); 
```

这是**[plunker 上的代码](http://plnkr.co/edit/QdwMf9jDXz7ClYm77r8H)**

> **来自** [AngularJS：指令](http://docs.angularjs.org/guide/directive)
> 
> = 或 =attr - 在本地范围属性和通过 attr 属性值定义的 name 的父范围属性之间建立双向绑定。如果未指定 attr 名称，则假定属性名称与本地名称相同。给定范围的widget定义：{localModel:'=myAttr'}，那么widget范围属性localModel将在父范围上反映parentModel的值。对 parentModel 的任何更改都将反映在 localModel 中，并且 localModel 中的任何更改都将反映在 parentModel 中

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-21T20:24:21.303

在 HTML 中

```
whattodo="addVal(value)" 
```

在指令中

```
scope.$apply(function(s){
    s.whattodo({value : myVar});
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-08T10:54:18.463

为什么不在隔离范围内使用“&”符号？

```
<body ng-controller="MainCtrl">
  Value: {{value}}!
  <button customattr add-val="addValue(value)">Add</button>
</body> 
```

在控制器中：

```
 function ctrl($scope) {
      $scope.myarray = [1];
      $scope.addValue = function (value) {
          $scope.myarray.push(value);
      }
   } 
```

在指令中：

```
angular.module('component', []).directive('customattr', function () {
  return {
      restrict: 'A',
      scope: {
          addVal: "&"
      },
      controller: function ($scope) {
          var myVar = 5;
             // To execute addVal in controller with 'value' param
          $scope.addVal({value: value}) 
      } 
  }; 
}); 
```

# javascript - 多重滚动事件定义，区分事件解除绑定

> ID：16135712
> 
> 赞同：8
> 
> 时间：2013-04-21T20:12:55.740
> 
> 标签：javascript, scroll, jquery

我问了一个关于 jquery 滚动事件的具体问题，但似乎答案可能对一般的 jquery 事件有影响（我也有兴趣知道）。

假设 jquery 插件`A`（例如 jquery.scrollspy.js）将滚动事件绑定到`$(window)`

现在说一些站点导入插件`A`，但它也有自己的自定义 javascript 文件`B`，它将另一个`.scroll()`事件绑定到`$(window)`.

稍后，javascript 文件`B`想要取消绑定自己的滚动事件，并保持 jquery 插件`A`完好无损。这是怎么做到的？

和...

这种方法是否适用于所有 jquery 事件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T20:42:28.487

jQuery 建议使用 on 和 off 来代替 bind 和 unbind。

```
function scrollEvent()
{
}
$(window).on('scroll',scrollEvent);
$(window).off('scroll',scrollEvent); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-02T08:48:07.060

最好使用 jQuery 的 .on() 和 .off() 方法，而不是 .bind() 和 .unbind()。

> 从 jQuery 1.7 开始，.on() 方法是将事件处理程序附加到文档的首选方法。

您还可以通过向事件名称添加自定义后缀来命名事件。然后您可以稍后访问该特定事件（例如解除绑定）...

```
$(window).on('scroll.myscroll', function () { 
    // do something on scroll event
}); 
```

一个窝……

```
$(window).off('scroll.myscroll'); // unbind my namespaced scroll event 
```

请参阅[https://css-tricks.com/namespaced-events-jquery/](https://css-tricks.com/namespaced-events-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T20:18:05.540

这很简单。在提出问题之前没有做足够的研究：

```
var fileBScrollEvent = function() {
    // do something on scroll event
}

$(window).bind('scroll',fileBScrollEvent); 
```

...稍后在代码中...

```
$(window).unbind('scroll',fileBScrollEvent); 
```

# mysql - 对 SELECT 1 FROM 感到困惑

> ID：16135713
> 
> 赞同：-1
> 
> 时间：2013-04-21T20:13:11.900
> 
> 标签：mysql, sql, select

如果我执行以下查询：
`SELECT 1 FROM emp;`

我得到：

```
mysql> SELECT 1 FROM emp;  
+---+  
| 1 |  
+---+  
| 1 |  
| 1 |  
| 1 |  
| 1 |  
| 1 |  
| 1 |  
| 1 |  
| 1 |  
| 1 |  
| 1 |  
| 1 |  
| 1 |  
| 1 |  
| 1 |  
| 1 |  
+---+ 
```

如果我做：

`SELECT 1 FROM emp e WHERE 20=e.deptno;` 我得到：

```
mysql> SELECT 1 FROM emp e WHERE 20=e.deptno;  
+---+  
| 1 |   
+---+  
| 1 |  
| 1 |   
| 1 |   
| 1 |   
| 1 |   
| 1 |    
+---+  
6 rows in set (0.00 sec) 
```

如果我这样做：

```
mysql> SELECT deptno FROM emp;  
+--------+  
| deptno |  
+--------+  
|     10 |   
|     10 |   
|     10 |   
|     20 |   
|     20 |   
|     20 |   
|     20 |   
|     20 |   
|     20 |  
|     30 |  
|     30 |  
|     30 |  
|     30 |  
|     30 |  
|    100 |  
+--------+  
15 rows in set (0.00 sec) 
```

`20`我看到前面 有 6 行和 6 行：`SELECT 1 FROM emp e WHERE 20=e.deptno;`

但是这些查询有什么关系呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T20:16:49.020

```
SELECT 1 FROM emp e WHERE 20=e.deptno; 
```

查询根据您的`where`条件选择行数，但您没有选择任何列值，而不仅仅是选择`1`这就是为什么它显示 6 行`1`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T20:17:41.107

有六行`20 = e.deptno`，因此您`1`在第二个查询中得到六个（`1`顶部的第七个只是自动生成的列名）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T20:21:24.323

如果选择`deptno`和 文字值，如下所示：

```
SELECT 1, deptno FROM emp 
```

你得到：

```
1   10
1   10
1   10
1   20
1   20
1   20
1   20
1   20
1   20
1   30
1   30
1   30
1   30
1   30
1  100 
```

如果你只过滤掉`deptno`20 个，像这样：

```
SELECT 1, deptno FROM emp where deptno = 20 
```

你得到上一个查询的这个子集：

```
1   20
1   20
1   20
1   20
1   20
1   20 
```

如果你从结果中遗漏了`deptno`：

```
SELECT 1 FROM emp where deptno = 20 
```

你只得到那些：

```
1
1
1
1
1
1 
```

# scala - 如何将 IntelliJ 与 Play Framework 和 Scala 结合使用

> ID：16135716
> 
> 赞同：34
> 
> 时间：2013-04-21T20:13:20.260
> 
> 标签：scala, playframework, intellij-idea

我正在尝试将 IntelliJ 与播放框架 2.11 应用程序一起使用。

我为 IntelliJ 安装了 Play Framework 2 插件和 Scala 插件。

我创建了一个 Play 应用程序。我一直在努力在 IntelliJ 中编写和运行 Specs 2 测试。我的运行配置说在运行 Specs 2 测试时首先运行“make”，但它看起来不像我的测试类正在生成。一直告诉我它找不到规范。当我查看文件系统时，目标/测试类中没有代码，目录为空。此外，至少与运行 Play 控制台相比，构建似乎需要很长时间。

我想看看人们如何使用 Play with IntelliJ。您只是将 IntelliJ 用作编辑器，然后通过 Play 控制台运行所有内容吗？

有没有一种方法可以让您在 IntelliJ 中运行应用程序测试（让您的测试类运行）？

我在运行 Play 控制台和运行 ~test-only test=xxx.Spec 时从未遇到任何问题。它通常相当快。

这是我在尝试运行 Specs2 测试时在 IntelliJ 中遇到的异常：

```
Exception in thread "main" java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jetbrains.plugins.scala.testingSupport.specs2.JavaSpecs2Runner.runSingleTest(JavaSpecs2Runner.java:130)
    at org.jetbrains.plugins.scala.testingSupport.specs2.JavaSpecs2Runner.main(JavaSpecs2Runner.java:76)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.lang.RuntimeException: can not create specification: test.ApplicationSpec
    at scala.sys.package$.error(package.scala:27)
    at org.specs2.specification.SpecificationStructure$.createSpecification(BaseSpecification.scala:96)
    at org.specs2.runner.ClassRunner.createSpecification(ClassRunner.scala:64)
    at org.specs2.runner.ClassRunner.start(ClassRunner.scala:35)
    at org.specs2.runner.ClassRunner.main(ClassRunner.scala:28)
    at org.specs2.runner.NotifierRunner.main(NotifierRunner.scala:24)
    ... 11 more 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-24T08:00:27.557

**更新**：在较新的版本中，如果 IntelliJ IDEA，不再需要从 play/activator 创建模块。IntelliJ IDEA 现在对 SBT 项目有很好的支持。如果存在，请删除项目中所有与想法相关的目录。然后在 IntelliJ IDEA 中单击 File -> Open 并选择您的 build.sbt 文件。就这样。

* * *

IntelliJ IDEA 对 Play Framework 2 有很好的集成。有时会卡住，但大部分时间会运行。我用它来运行（单个，所有）测试，启动或调试播放应用程序并编辑我的代码（o;这一切都在 IDE 中，没有 sbt 控制台。

这是一个简短的教程，其中包含最重要的步骤。目前我使用 IntelliJ IDEA 12.1 和最新的 Play Framework 2 和 Scala 插件。

**1.创建一个新的应用程序**

```
play new myapp 
```

**2.创建IDE模块**

启动游戏控制台：

```
cd newapp
play 
```

创建模块：

```
idea with-sources=yes
exit 
```

**3.配置IDE**

1.  打开新创建的项目
2.  打开模块设置（选择项目并按F4）
3.  将 Scala 库添加到您的项目中
    1.  选择*模块->myapp->依赖项*
    2.  按加号图标并选择库(2)
    3.  添加 Scala 2.10.0 项目库
4.  在 Scala Facet 中选择编译器库
    1.  选择*Facets->Scala(myapp)*
    2.  将*编译器库*设置为 Scala 2.10.0
5.  修复错误
    1.  选择*Modules->myapp-build->Dependencies->scala-2.9.2*并按减号图标
    2.  选择*Libraries->Scala 2.9.2*并按减号图标
6.  *修复myapp-build*模块 的输出路径
    1.  选择*模块->myapp-build->路径*
    2.  *将类*附加到*输出路径*(X:\projects\myapp\project\target\scala_2.9.2\classes)
    3.  *将测试类*附加到*测试输出路径*(X:\projects\myapp\project\target\scala_2.9.2\test-classes)

**4\. 运行测试**

选择测试目录下的*ApplicationSpec* ，然后从上下文菜单中单击*Run 'ApplicationSpec' 。*您应该会收到一个错误，即找不到已编译的模板。这是因为 IDE 不编译模板，但这可以通过运行应用程序一次来完成。同样遵循第 5 点，然后再次运行测试。

**5\. 运行应用程序**

选择一个控制器，然后从上下文菜单中单击*Run Play 2 App 。*这应该在地址启动应用程序：`http://localhost:9000/`。

**6.更新依赖**

如果您更新您的应用程序依赖项，那么您必须将这些更改告知 IDE。此外，在运行*play update*命令后，您必须关闭 IDE 并从项目目录中删除一些文件。如果您`play idea`在删除文件之前执行该命令，则会在您的 play 项目中获得双重依赖。

执行以下步骤来更新您的依赖项：

1.  `update`从您的游戏控制台运行任务
2.  删除*`.idea_modules`*和*`.idea/libraries`*目录
3.  `idea with-sources=yes`在播放控制台中运行命令
4.  再次运行第 3 步

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-19T09:51:48.237

Play 控制台包含一个名为[sbt-idea](https://github.com/mpeltonen/sbt-idea)的 sbt 插件的分支。该剧的 fork 有点落后于原始插件，并且在 IntelliJ 中运行时会出现一些问题`play idea`。您可以使用没有任何问题的原始插件。为了在你的游戏项目中使用这个插件，你需要..

1.在文件中添加如下几行`project/plugins.sbt`：（中间的空行是必须的）

```
resolvers += "Sonatype snapshots" at "http://oss.sonatype.org/content/repositories/snapshots/"

addSbtPlugin("com.github.mpeltonen" % "sbt-idea" % "1.5.1") 
```

2.`gen-idea`从播放控制台运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T01:52:00.150

我通常只将 IntellijIDEA（版本 12.0.4）用于 Play Framework 代码编辑器，因为：

1.  默认自动保存功能
2.  相当快速的 IntelliSense 功能
3.  Dracula UI，这对我来说很有趣

我通常使用 Play SBT 控制台运行和调试应用程序。这是合理的快。但是，有时在控制台上执行`play`命令时，我发现*loading-project-info*任务花费的时间太长（将近 10 分钟）。我不知道为什么有时会发生这种情况，但总的来说使用 Play SBT 控制台是我的选择。

我这样做是因为通常*不应该将问题*解释为*错误*，如下所示：

![想法错误](https://i.stack.imgur.com/P0ryF.jpg)

当我第一次开始学习 Play Framework 时，我遇到了这样的问题。所以，最后，我选择使用 Play SBT 控制台来运行和调试应用程序。

抱歉，我无法回答第 2 个问题。到目前为止，我只尝试运行和调试播放应用程序。出于测试目的，我以前从未尝试过 Play 2.x。

# javascript - D3.Drag.Behaviour 无法正常工作

> ID：16135721
> 
> 赞同：0
> 
> 时间：2013-04-21T20:13:40.780
> 
> 标签：javascript, d3.js

我正在使用 D3 Drag 在画布周围拖动一些圆圈。然后我让它们固定位置。但是，我希望将它们与我创建的另一个 svg 元素保持一定距离：

```
 node.attr("transform", function(d,i) { return "translate ("+ arc[i].centroid() +")" +"translate("+d.x+","+d.y+")"; }) 
```

拖动时，圆圈不会拖动，直到多次单击鼠标并且通常远离实际的鼠标手。

我知道我可以摆脱质心，但想知道解决这个问题的方法。

[http://jsfiddle.net/Zc4z9/10/](http://jsfiddle.net/Zc4z9/10/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:10:35.137

您在第一次拖动尝试时获得的跳跃是由于第 57 行的翻译与更下方的翻译不匹配。为了避免跳转，使第 57 行和第 76 行匹配。将 57 更改为：

```
d3.select(this).attr("transform", "translate ("+ arc[i].centroid() +")" +"translate("+d.x+","+d.y+")"); 
```

为了让它工作，我必须在第 52 行将 d 和 i 作为参数传递：

```
.on("drag", function(d, i) { 
```

工作小提琴：http: [//jsfiddle.net/Zc4z9/11/](http://jsfiddle.net/Zc4z9/11/)

# php - 包含街道地址匹配的正则表达式 achor href url

> ID：16135724
> 
> 赞同：2
> 
> 时间：2013-04-21T20:14:25.187
> 
> 标签：php, regex, url, preg-match-all, street-address

我喜欢从 html 字符串中获取锚标记定义中的 url。html 的结构相当好，但我试图收集的字符串包含谷歌地图的地址，并且可能非常不同。我正在尝试使用 preg_match_all 获取所有匹配的 url。

```
<tr><td><a href="http://maps.google.com/maps?q=4165 E LIVE OAK AVE,">map</a></td></tr>
<tr><td><a href="http://maps.google.com/maps?q=8000 SUNSET BLVD, LOS ANGELES,">map</a></td></tr>
<tr><td><a href="http://maps.google.com/maps?q=30600 THOUSAND OAKS BLVD, AGOURA,">map</a></td></tr>
<tr><td><a href="http://maps.google.com/maps?q=9090 19TH ST, ALTA LOMA,">map</a></td></tr>
<tr><td><a href="http://maps.google.com/maps?q=185 W ALTADENA DR, ALTADENA,">map</a></td></tr>
<tr><td><a href="http://maps.google.com/maps?q=620 E MOUNT CURVE AVE,">map</a></td></tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:27:13.077

试试下面的正则表达式：

```
/http:\/\/maps.google.com\/maps\?q[^"]+(?=")/ 
```

但是该页面可能包含您提供的 HTML 结构之外的类似 URL，那么最好使用更复杂的正则表达式：

```
/(?<=<tr><td><a href=")http:\/\/maps.google.com\/maps\?q[^"]+(?=">map<\/a><\/td><\/tr>)/ 
```

# html - li元素跳出ul元素，位置：相对问题

> ID：16135725
> 
> 赞同：0
> 
> 时间：2013-04-21T20:14:34.107
> 
> 标签：html, css, stylesheet

[Tristans.tk](http://tristans.tk)
在此站点上，请查看底部的分页链接。li 元素跳出 ul 元素，我不希望这样。这是我的 PHP 脚本和 CSS：

```
$pages=ceil(count(get('SELECT * FROM posts'))/$ipp);
echo "<div class='mid_align' id='pages_div'><ul id='pages_ul'>";
for ($i=1;$i<=$pages;$i++) {
    $d=$i-1;
    echo "<li><a href='index.php?page=$d'>$i</a></li>";
}
echo "</ul></div>"; 
```

```
.mid_align {
    margin-left: auto;
    margin-right: auto;
}
#content #pages_div{
    width: 200px;
    border: 1px solid #000;
    height: 30px;
}
#content #pages_ul {
    list-style: none;
    position:relative;
}
#content #pages_ul li{
    float: left;
    position: relative;
}
#content #pages_ul li a{
    height: 20px;
    width: 30px;
    border: 1px solid #000;
    display: block;
} 
```

它有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:34:11.940

您没有**重置****CSS**代码。

这将起作用：

```
ul#pages_ul{
    margin:0;
    padding:0;
} 
```

我建议您将来使用一些[cssreset](http://www.cssreset.com/)。

# java - Java - 当我使用 PrintWriter、BufferedWriter 和 FileWriter 写入时如何从文件中读取？

> ID：16135726
> 
> 赞同：10
> 
> 时间：2013-04-21T20:14:35.263
> 
> 标签：java, file, methods

我有将一些数据写入文件的方法。我用,`PrintWriter`如下图`BufferedWriter``FileWriter`

```
public void writeToFile(String FileName){
    PrintWriter pw = null;
    try {
        pw = new PrintWriter(new BufferedWriter(new FileWriter(FileName)));
        for(Cars car : list){
            pw.println(car.getType());
            pw.println(car.getMaxSpeed());
            pw.println(car.getOwner());
            pw.println();
            pw.flush();
        }
        pw.close();
    }
    catch(IOException ex){
        System.err.println(ex);
    }
} 
```

现在我怎样才能从文件中读取这些数据？我尝试使用`InputStreamReader`,`BufferedReader`和`FileInputStream`，但我的 NetBeans 显示一条错误消息

```
 public void readFromFile() throws IOException {
        InputStreamReader fr = null;
        try {
            fr = new InputStreamReader(new BufferedReader(new FileInputStream(new FileReader("c:\\cars.txt"))));
            System.out.println(fr.read());
        } catch (Exception ex) {
            System.out.println(ex.getMessage());
        } finally {
            fr.close();
        }
    } 
```

这种方法有什么问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-21T20:41:12.490

```
BufferedReader in = new BufferedReader(new FileReader("file.in"));
BufferedWriter out = new BufferedWriter(new FileWriter("file.out"));

String line = in.readLine(); // <-- read whole line
StringTokenizer tk = new StringTokenizer(line);
int a = Integer.parseInt(tk.nextToken()); // <-- read single word on line and parse to int

out.write(""+a);
out.flush(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T20:27:51.367

您的代码中有几个问题：

1) InputStreamReader 将 InputStream 作为参数而不是 Reader。请参阅[http://docs.oracle.com/javase/6/docs/api/java/io/InputStreamReader.html](http://docs.oracle.com/javase/6/docs/api/java/io/InputStreamReader.html)。

2) FileInputStream 也不接受 Reader 作为参数（它接受 File、FileDescriptor 或 String）。请参阅：[http ://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html)

3) BufferedReader 正常逐行读取文件。read() 方法只读取一个字符。

一个可能的解决方案可能是：

```
fr = new BufferedReader(new InputStreamReader(new FileInputStream(new File("c:\\cars.txt"))));
String line = "";
while((line = fr.readLine()) != null) {
    System.out.println(line);
} 
```

顺便说一句：如果您提供确切的错误消息甚至更好的 StackTrace，其他人会更容易帮助您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T20:32:54.047

简单错误：*无法解析构造函数 'FileInputStream(java.io.FileReader)'*，API 中不存在所需的构造函数。

您的原始代码是：

```
new PrintWriter(new BufferedWriter(new FileWriter(FileName))); 
```

所以为了阅读，你需要

```
new PrintReader(new BufferedReader(new FileReader(FileName))); 
```

但不需要 PrintReader（不存在），所以您只需要：

```
new BufferedReader(new FileReader(FileName)) 
```

PrinterWriter 将对象的格式化表示打印到文本输出流，但在读取文本时始终是格式化的，因此 PrinterReader 不存在。

您正在逐行编写，因此也逐行阅读:)示例：

```
public void readFromFile() throws IOException {
    BufferedReader bufferedReader = null;
    try {
        String sCurrentLine;
        bufferedReader = new BufferedReader(new FileReader("c:\\cars.txt"));
        while ((sCurrentLine = bufferedReader.readLine()) != null) {
            System.out.println(sCurrentLine);
        }
    } catch (Exception ex) {
        System.out.println(ex.getMessage());
    } finally {
        bufferedReader.close();
    }
} 
```

或更好（JDK7）

```
void readFromFile() throws IOException {
    Path path = Paths.get("c:\\cars.txt");
    try (BufferedReader reader = Files.newBufferedReader(path, Charset.defaultCharset())){
        String line = null;
        while ((line = reader.readLine()) != null) {
            System.out.println(line);
        }

    }
} 
```

# android - 在应用程序运行时关闭蓝牙/WiFi

> ID：16135730
> 
> 赞同：0
> 
> 时间：2013-04-21T20:14:56.800
> 
> 标签：android, bluetooth, android-wifi

我们可以通过编程方式打开/关闭 WiFi/蓝牙。但是，只要应用程序正在运行并且关闭了 WiFi/蓝牙，它们是否有可能保持关闭状态。我的意思是说，如果用户打开 WiFi，那么应用程序会再次将其关闭吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:51:24.733

您可以在应用程序启动时添加意图过滤器并注册接收器

```
<intent-filter>  
<action android:name="android.net.wifi.WIFI_STATE_CHANGED"/> 
<action android:name="android.net.wifi.STATE_CHANGE"/>  
</intent-filter> 
```

在 onCreate 上注册接收者

```
IntentFilter filters = new IntentFilter();
filters.addAction("android.net.wifi.WIFI_STATE_CHANGED");
filters.addAction("android.net.wifi.STATE_CHANGE");
super.registerReceiver(wifiStateListener, filters); 
```

尽管在您的情况下，我认为只有“android.net.wifi.WIFI_STATE_CHANGED”就足够了。每当 WIFI 的状态（启用、禁用、连接、断开连接）发生变化时，它都会被操作系统触发。

您需要添加读取/修改 WIFI 状态的权限。

希望这可以帮助。

# ruby-on-rails - 慢性不能正确解析时间

> ID：16135731
> 
> 赞同：0
> 
> 时间：2013-04-21T20:15:03.503
> 
> 标签：ruby-on-rails

我在 Rails 应用程序中使用 Chronic，如下所示。我有一个表单，其中包含日期和时间的单独文本字段（jquery 下拉列表）。在我的模型中，我有虚拟属性，应该使用 Chronic 将组合数据时间写入数据库进行解析。Chronic 正在正确解析日期，但无论我在文本字段中输入什么时间，它都会在 datetime 字段中输出 12:00:00 作为时间。我已经测试了 IRB 中的输入类型，它似乎工作正常，我在这里遗漏了什么吗？

模型：

```
class VisitBlock < ActiveRecord::Base
  attr_accessible :start_date_text, :time_text
  attr_writer :start_date_text, :time_text
  before_save :save_start_date_text

  def time_text
  end

  def start_date_text
    @start_date_text || visit_date_start.try(:strftime, "%m-%d-%Y")
  end

  def save_start_date_text
    self.visit_date_start = Chronic.parse("#{start_date_text} #{time_text}").in_time_zone if @start_date_text.present?
  end 
```

控制台日志：

```
Started POST "/visit_blocks" for ************** at 2013-04-21 19:56:20 +0000                                                                                                                                                             
Processing by VisitBlocksController#create as HTML                                                                                                                                                                                     
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Ns4YyAL9a44RU3T/wOw+DPcigVbBd6eQ5wz1exq3g1M=", "visit_block"=>{"start_date_text"=>"04/22/2013", "time_text"=>"05:15 AM"}, "hou
r"=>"05", "minute"=>"15", "meridian"=>"AM", "button"=>""}                                                                                                                                                                              
  Client Load (4.8ms)  SELECT "clients".* FROM "clients" WHERE "clients"."last_name" IS NULL LIMIT 1                                                                                                                                   
   (0.1ms)  begin transaction                                                                                                                                                                                                          
  SQL (3.2ms)  INSERT INTO "visit_blocks" ("visit_date_start") VALUES (?)  [["created_at", Sun, 21 Apr 2013 19:56:20 UTC +00:00], ["updated_at", Sun, 21 Apr 2013 19:56:20 UTC +00:00], ["visit_date_start", Mon, 22 Apr 2013 12:00:00 UTC +00:00]]                                                                                                                                                               
   (6.7ms)  commit transaction 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:28:23.757

我意识到我没有在我的模型中正确定义“time_text”。我通过在控制台中打印相关日期/时间来发现。

打印到日志文件（出现零）

```
p time_text 
```

更正了 time_text 定义：

```
@time_text || visit_date_start.try(:strftime, "%I:%M %P") 
```

# c++ - C++ 自定义操作返回空字符串

> ID：16135732
> 
> 赞同：3
> 
> 时间：2013-04-21T20:15:06.093
> 
> 标签：c++, wix

我们在 c++ 中遇到了延迟自定义操作的问题。我们只想要一个 customactiondata 属性 'apacheconfpath' 的值，它目前具有一个虚拟值 test。

这是我们的 c++ 自定义操作：

```
 UINT __stdcall AppendToApacheConfigFile(MSIHANDLE hInstall)
{
    HRESULT hr = S_OK;
    UINT er = ERROR_SUCCESS;
    TCHAR sWord[100];

    hr = WcaInitialize(hInstall, "AppendToApacheConfigFile");
    ExitOnFailure(hr, "Failed to initialize");

    TCHAR szActionData[MAX_PATH] = {0}; 
    DWORD dActionDataLen = MAX_PATH; 
    MsiGetProperty (hInstall, TEXT("apacheconfpath"), TEXT(""), &dActionDataLen);

    StringCbPrintf(sWord, 100, TEXT("%d"), dActionDataLen);
    WcaLog(LOGMSG_STANDARD, "dActionDataLen = %s", sWord);

    if (dActionDataLen > 0)
    {   
      ++dActionDataLen;
      StringCbPrintf(sWord, 100, TEXT("%d"), dActionDataLen);
      WcaLog(LOGMSG_STANDARD, "dActionDataLen(2) = %s", sWord);
      MsiGetProperty (hInstall, TEXT("apacheconfpath"), szActionData, &dActionDataLen);         
      WcaLog(LOGMSG_STANDARD, "szActionData = %s", szActionData);
      StringCbPrintf(sWord, 100, TEXT("%d"), dActionDataLen);
      WcaLog(LOGMSG_STANDARD, "dActionDataLen(3) = %s", sWord);

     //Do something with the value
    }

    LExit:
      er = SUCCEEDED(hr) ? ERROR_SUCCESS : ERROR_INSTALL_FAILURE;
      return WcaFinalize(er);
} 
```

该属性在我们的 wix 安装程序中设置：

```
<CustomAction Id="AppendToApacheConfigFile_Cmd" Property="AppendToApacheConfigFile" Value="/apacheconfpath=test;" />
<CustomAction Id="AppendToApacheConfigFile" BinaryKey="CustomActionDll" DllEntry="AppendToApacheConfigFile" Execute="deferred" />

<InstallExecuteSequence>
      <Custom Action="AppendToApacheConfigFile_Cmd" Before="AppendToApacheConfigFile"><![CDATA[IIS_SELECTED <> 1]]></Custom>
      <Custom Action="AppendToApacheConfigFile" After="DeployPhpRuntime"><![CDATA[IIS_SELECTED <> 1]]></Custom>
</InstallExecuteSequence> 
```

我添加了许多日志记录以尝试查看发生了什么。似乎永远不会读取该属性，因为 dword 值始终为 0 并且数据始终为空。我们永远不会超过第一次阅读。

根据日志，值已设置

```
MSI (s) (80:C4) [20:59:30:210]: Executing op: CustomActionSchedule(Action=AppendToApacheConfigFile,ActionType=1025,Source=BinaryData,Target=AppendToApacheConfigFile,CustomActionData=/apacheconfpath=test;) 
```

任何信息都将受到欢迎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:07:52.543

当延迟的自定义操作请求它通过众所周知的标识符请求的数据时`CustomActionData`。您可以在此行末尾的日志文件中看到引用的名称：

```
MSI (s) (80:C4) [20:59:30:210]: Executing op: CustomActionSchedule(Action=AppendToApacheConfigFile,ActionType=1025,Source=BinaryData,Target=AppendToApacheConfigFile,CustomActionData=/apacheconfpath=test;) 
```

要访问数据，您需要将`MsiGetProperty`调用更改为更像：

```
MsiGetProperty(hInstall, TEXT("CustomActionData"), TEXT(""), &dActionDataLen); 
```

注意：由于您已经在使用 wcautil，因此我强烈建议您使用`WcaGetProperty()`而不是`MsiGetProperty()`. 您需要检查返回代码`WcaGetProperty()`并这样做，以便您的自定义操作正确处理用户取消。否则，您的自定义操作可能会吞下用户取消安装的尝试。

# php - jQuery - 如何从 php 文件返回值并将其设置为文本框的值？

> ID：16135737
> 
> 赞同：1
> 
> 时间：2013-04-21T20:15:44.520
> 
> 标签：php, javascript, jquery

首先让我说我是使用 jQuery 的新手，所以这似乎是一个愚蠢的问题。当 vin 文本框聚焦时，它会触发 jQuery 脚本运行。

```
$("#vin").focusout(function() {
    $("#stocknum").load("../jquery/update_stocknum.php?vin=" + $("#vin").val());
}); 
```

PHP 文件如下所示，似乎运行正常：

```
if(isset($_GET['vin'])){
$vin = $_GET['vin'];
if(strlen($vin) > 9) {
    $stocknum = substr($vin,-6);
    echo $stocknum;
} 
```

我做错了什么，以便我可以将文本框的值设置为 php 在变量 $stocknum 中返回的值？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:17:45.670

尝试 -

```
$("#vin").focusout(function() {
     $.get("../jquery/update_stocknum.php?vin=" + $("#vin").val(),function(data){
        $("#stocknum").val(data);
     });
}); 
```

# actionscript-3 - 将事件侦听器应用于项目舞台上的所有实例，并删除特定项目

> ID：16135745
> 
> 赞同：0
> 
> 时间：2013-04-21T20:16:27.123
> 
> 标签：actionscript-3, flash-cs6

我在滚动列表中有一个项目列表，我希望用户单击特定项目以将其删除-我需要将 eventListener 应用于该项目的所有实例，以便单击任何项​​目，将其删除

这是第一个功能：

```
private function dataLoaded(event:Event):void {
        // this holds the loaded xml data //
        data = new XML(event.target.data);
        //items properties call - add other calls to master properties later on//
        items = data.item;
        // parsing of each ingredient//
        for (var i = 0; i < items.length(); i++) {
            // instantiation of mcItem (the stage for each item)
            _item = new Item();
            // sets //over// layer to invisible / transparent //
            _item.item_btn_over.alpha = 0;
            // creates the var itemTextField //
            _itemTextField = new TextField();
            // _itemTextField visual attributes //
            _itemTextField.x = _textFieldXPosition + _textFieldPaddingLeft;
            _itemTextField.y = _textFieldYPosition;
            _itemTextField.selectable = true;
            _itemTextField.wordWrap = true;
            _itemTextField.width = _textFieldWidth;
            _itemTextField.height = _textFieldHeight;
            _itemTextField.embedFonts = true;
            _defaultFormat.color = 0x111112;
            _defaultFormat.font = _arialRounded.fontName;
            _defaultFormat.size = 18;
            _itemTextField.defaultTextFormat = _defaultFormat;
            _itemTextField.text = items[i].toString();
            //adds textfield to displaylist//
            _item.addChild(_itemTextField);
            //vertical positioning//
            _item.y = i * _itemPosition;

            _item.buttonMode = true;
            _item.mouseChildren = false;
            //adds items to container displaylist//
            _container.addChild(_item);

        }

            // Input Mask//
            _mask = new Shape();
            _mask.graphics.beginFill(0xFF0000);
            _mask.graphics.drawRect(0, 0, _maskWidth, _maskHeight);
            _mask.graphics.endFill();
            // Positioning of input mask//
            // horizontal centering of input mask//
            _mask.x = stage.stageWidth / 2 - _container.width / 2;
            _mask.y = _paddingTop;
            // adds the mask onto the stage//
            addChild(_mask);
            // assigns the above mask to the container //
            _container.mask = _mask;
            // Positioning of container with the mask//
            // horizontal centering of container //
            _container.x = stage.stageWidth / 2 - _container.width / 2;
            // vertical position of container //
            _container.y = _paddingTop;

            //Container background stylings//
            _background = new Shape();
            _background.graphics.beginFill(0xFFFFFF);
            _background.graphics.drawRect(0, 0, _container.width, _container.height);
            _background.graphics.endFill();
            _container.addChildAt(_background, 0);
            //End of container background stylings//
            _item.parent.addEventListener( MouseEvent.CLICK, itemClicked );
            _container.addEventListener(MouseEvent.MOUSE_OVER, movingOver);
            _container.addEventListener(MouseEvent.MOUSE_OUT, movingOut);
        } 
```

这是我的`itemClicked`功能：

```
function itemClicked(event:MouseEvent):void {
                _item.parent.removeChild(_item);            
        } 
```

不幸的是，我之前的努力只成功删除了列表中的最后一项。如何将侦听器应用于所有实例，但在侦听器函数中仅删除已单击的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:35:33.770

您可以以 evt.target 的形式访问事件侦听器中单击的项目

尝试：

```
function itemClicked(event:MouseEvent):void {
    if(evt.target is Item) {
        var item:Item = Item(evt.target);
        item.parent.removeChild(item);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T20:35:57.627

您的问题是我假设您有一个名为 _item 的类成员变量，并且当您循环时，您正在重用该变量来创建新项目。因此，_item 只是对您创建的最后一个项目的引用。

因此，当您在 itemClickHandler 中使用它时——它总是引用您创建的最后一个项目。

这是你应该做的一个例子：

```
// this is just example code for your dataLoaded function showing the correct concept
for (var i = 0; i < items.length(); i++) 
{
     var newItem:Item = new Item;
     // do whatever you need to newItem
     newItem.addEventListener(MouseEvent.CLICKED, itemClicked);
}

function itemClicked(event:MouseEvent):void 
{
     var curItem:Item = event.currentTarget as Item;
     curItem.parent.removeChild(curItem);            
} 
```

虽然你也可以这样做：

```
// this is just example code for your dataLoaded function showing the correct concept
for (var i = 0; i < items.length(); i++) 
{
     var newItem:Item = new Item;
     // do whatever you need to newItem
}

_container.addEventListener(MouseEvent.CLICKED, itemClicked);

function itemClicked(event:MouseEvent):void 
{
     // you could also have a check here to see if it is indeed an Item

     var curItem:Item = event.target as Item;
     curItem.parent.removeChild(curItem);            
} 
```

第二种方法的优点是只有 1 个侦听器，因此您只需在完成列表后删除 1。

# objective-c - 如何读取PGN文件以在objective-c中解析

> ID：16135748
> 
> 赞同：0
> 
> 时间：2013-04-21T20:16:52.220
> 
> 标签：objective-c, xcode, parsing

我的项目中有一个名为 a00.PGN 的 PGN 文件，我想将其解析为“预加载”到 Core Data 中。现在我只是想用`NSLog`使用将文件输出为字符串

```
 NSError *err = nil;
    NSString *datapath = [[NSBundle mainBundle] pathForResource:@"a00" ofType:@"PGN"];
    NSString *content = [NSString stringWithContentsOfFile:datapath encoding:NSASCIIStringEncoding error:&err];
    NSLog(@"%@", err); 
```

我收到一个错误：Error Domain=NSCocoaErrorDomain Code=258“文件名无效。”

当我 NSLog 字符串内容时，它为 NULL。

我尝试将扩展名更改为 .txt，但收到相同的错误，并且还使用了 NSUTF8StringEncoding。在这个文件中读取以在objective-c中解析的最佳方法是什么？

编辑1：

为了在我的项目中包含该文件，我将它从 finder 中拖了出来。然后我转到我的项目目标并将其添加到`Copy Files`以产品目录为目标的部分。子路径为空。

编辑2：

我已将这个简单项目的当前状态上传到此处的仓库：[https ://github.com/justinjdickow/PGN-Parse-into-Core-Data/](https://github.com/justinjdickow/PGN-Parse-into-Core-Data/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:38:36.380

根据[技术问答 QA1436：命令行基础工具的“主要捆绑包”是什么？](https://developer.apple.com/library/mac/#qa/qa1436/_index.html#//apple_ref/doc/uid/DTS10004115)——实际上，该文件（部分）是错误的。

在命令行工具可执行文件中，主包的路径将是包含可执行文件本身的目录。例如，在我在这里创建的示例命令行工具项目中，控制台记录了以下内容：

```
mainBundle == NSBundle <~/Library/Developer/Xcode/DerivedData/mainBundle-bqmiidcdlnwumjgcnblqgtelpecl/Build/Products/Debug> (loaded),
bundlePath == ~/Library/Developer/Xcode/DerivedData/mainBundle-bqmiidcdlnwumjgcnblqgtelpecl/Build/Products/Debug 
```

换句话说，主包将是您的内置产品目录。为了能够在运行时找到“A00.PGN”文件，该文件需要与可执行文件一起位于您的内置产品目录中`NSBundle`。`pathForResource:ofType:`例如，就我而言，我需要文件位于`~/Library/Developer/Xcode/DerivedData/mainBundle-bqmiidcdlnwumjgcnblqgtelpecl/Build/Products/Debug/A00.PGN`

实现这一目标的最简单方法是向`Copy Files`命令行工具目标添加构建阶段。将 Destination 指定为 Products Directory，并将 A00.PGN 文件包含在要复制的文件列表中。

此外，正如其他人已经提到的，`NSBundle`即使 OS X 上的底层 HFS+ 文件系统只是保留大小写， 的搜索方法也是区分大小写的。因此，请确保在代码中指定正确的文件名和文件扩展名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:27:00.047

请注意，`pathForResource:ofType:`根据它是 iPhone 模拟器、iPad 模拟器还是设备，它具有不同的大小写敏感性。

确保您始终使用大写/小写。

# php - 使用 PHP 进行分页

> ID：16135753
> 
> 赞同：0
> 
> 时间：2013-04-21T20:17:30.290
> 
> 标签：php, sql, pagination

我正在尝试运行我创建的分页代码，但我无法弄清楚如何将所有项目从表格中分离到页面（分页）。

以下是代码。

```
public function getCatItemsByPage($cat, $page) {
    $query = "SELECT 
                id
              FROM 
                categories
              WHERE
                name = '$cat'";

    $result = mysql_query($query) or die(mysql_error());

    $id = mysql_result($result, 0, "id");

 if($page == 1){
    $limit_start = 0;
    $limit_stop = 52;
 }else if($page == 2){
    $limit_start = ($page - 1) * 52;
    $limit_stop = $limit_start + 52; 
 }else{
    $limit_start = $page * 52;
    $limit_stop = $limit_start + 52; 
 }

    $output_videos_query = "SELECT 
               *
              FROM 
                videos
              WHERE
                cate_id=$id
              ORDER BY
                created_at
              DESC LIMIT 
                $limit_start, $limit_stop";

    $output_videos_result = mysql_query($output_videos_query) or die(mysql_error());

    return $output_videos_result;

} 
```

我通过类别（$cat）和页码（$page）。问题是如何按页计算 $limit_start 和 $limit_stop 。我花了最后一个小时试图弄清楚如何获取视频，但是有些页面没有得到一些视频，或者有些页面得到了很多视频。

由于我是 PHP 新手，对此有任何想法，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:27:01.763

```
if($page == 1){
    $limit_start = 0;
    $limit_stop = 52;
}else if($page == 2){
    $limit_start = ($page - 1) * 52;
    $limit_stop = $limit_start + 52; 
}else{
    $limit_start = $page * 52;
    $limit_stop = $limit_start + 52; 
} 
```

这种情况应该怎么办？每次只需这样做：

```
$limit_start = ($page - 1) * 52; // 0 when 1, 52 when 2, 104 when 3 etc.
$limit_stop = 52; 
```

它应该工作。

`$limit_stop`必须是一个常量值，因为 MySQL 的 LIMIT 需要一个长度，而不是一个位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T20:29:55.023

你可以替换这个：

```
if($page == 1){
    $limit_start = 0;
    $limit_stop = 52;
}else if($page == 2){
    $limit_start = ($page - 1) * 52;
    $limit_stop = $limit_start + 52; 
}else{
    $limit_start = $page * 52;
    $limit_stop = $limit_start + 52; 
} 
```

用一个更简单的：

```
$limit_start = ($page - 1) * 52;
$limit_stop = 52; 
```

# ruby-on-rails - 删除文章不会删除其在 ruby on rails 中的关联标签

> ID：16135754
> 
> 赞同：0
> 
> 时间：2013-04-21T20:17:37.447
> 
> 标签：ruby-on-rails, ruby, tags

我已经实现了博客，我在文章和标签之间有很多对很多的关联。当一篇文章被装箱时，它会有一对多的标签。当我从我的应用程序中删除文章时，它确实会删除其关联的标签。我已经设定

```
has_many :taggings, :dependent => :destroy
   has_many :tags, through: :taggings , :dependent => :destroy 
```

像 article.rb(model) 中的这样。我需要做点别的吗。

标签.rb

```
 class Tag < ActiveRecord::Base
  attr_accessible :name
  has_many :taggings
  has_many :articles, through: :taggings
end 
```

从数据库中删除相关文章时如何删除标签。任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:22:23.933

在你的`tag.rb`，使用

```
belongs_to :article 
```

而不是您当前的设置

# c++ - C ++获取在Linux上在后台按下的键

> ID：16135761
> 
> 赞同：1
> 
> 时间：2013-04-21T20:18:08.827
> 
> 标签：c++, c, linux

您好我正在尝试制作一个在后台运行并且可以对特定组合键执行某些功能的 c++ 程序。当程序在后台运行时，有什么方法可以获取组合键。我想要一种适用于 Linux 和 Windows 的方法，但如果这不可能，Linux 更重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:25:03.990

如果有充分的理由，您应该使用 gnu [logkeys](https://code.google.com/p/logkeys/source/checkout)。

克隆它`git clone https://code.google.com/p/logkeys/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:23:19.987

您需要选择组合还是只需要按键？

有**很多**用于 Linux 的开源键盘记录器，您可以使用它们来确定后者。

Theju 的 linux-keylogger 的 Github 使用`evdev`资源：[链接](https://github.com/theju/linux-keylogger)。

# apache-flex - flex 自动完成更改/textEvent 未触发

> ID：16135763
> 
> 赞同：0
> 
> 时间：2013-04-21T20:18:22.010
> 
> 标签：apache-flex, autocomplete

我正在尝试根据用户输入使 flex[自动完成在运行时更改其数据提供程序。](http://hillelcoren.com/flex-autocomplete/comment-page-6/)

```
 <components:AutoComplete  change="change()" id="ac" dataProvider="{_a1}" width="100" />
    <s:Button label="change" click="change()" />
    private function change():void
        {
            Alert.show("sdsd");
            //Alert.show(event.text);
            //ac.dataProvider = _a2;
        } 
```

当我单击按钮时，该功能被触发，但是当我输入文本时，它不会触发。我试图同时使用 change 和 textEvent，但是，它们都没有被触发。我想知道是否有任何方法可以做到这一点？

提前致谢。

# android - 未为 Util 类型定义方法 parseJson(String) - Facebook SDK 错误

> ID：16135765
> 
> 赞同：1
> 
> 时间：2013-04-21T20:18:32.670
> 
> 标签：android, facebook

下面的代码正在生成上述错误。提取电子邮件地址的更好方法是什么？

```
// process the response here: executed in background thread
Log.d("Facebook-Example", "Response: " + response.toString());
JSONObject json;
try {
    json = Util.parseJson(response);
    fbemail = json.getString("email");
} catch (FacebookError e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:26:26.143

似乎您的 Util 类是从`android.util`.

从导入该类`com.facebook.android.util`

# javascript - javascript启用复选框并检查它

> ID：16135769
> 
> 赞同：1
> 
> 时间：2013-04-21T20:19:01.033
> 
> 标签：javascript, jquery, checkbox

我删除了检查并禁用了一个复选框：

```
$('#h12_1').removeAttr('checked');
$("#h12_1").prop("disabled", true); 
```

然后我想再次启用它然后检查它。

```
$('#h12_1').removeAttr('disabled');
$('#h12_1').attr('checked','checked'); 
```

上述语法重新启用复选框但不选中它。

我错过了什么吗？一如既往的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T20:21:24.650

而不是这个

`$('#h12_1').attr('checked','checked');`

尝试这样的事情

```
$('#h12_1').prop("checked",true); 
```

# asp.net - 如何正确链接不同视图

> ID：16135770
> 
> 赞同：3
> 
> 时间：2013-04-21T20:19:01.497
> 
> 标签：asp.net, asp.net-mvc-4

我有一个`master.cshtml`带导航栏的。我的第一个链接是另一个视图，`ProjectManagement`

```
<li><a href="~/Views/ProjectManagement.cshtml">Project Management</a></li> 
```

`master.cshtml`在`/Views/Shared/_master.cshtml`

`ProjectManagement`在`/Views/ProjectManagement.cshtml`

每当我点击链接时，我都会得到：

> 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的 URL：/Views/ProjectManagement.cshtml

我使用了错误的路径还是应该尝试以不同的方式访问该页面？

**编辑：**我可以通过使用这个来接近：

```
<a href="@Html.Action( "ProjectMgmt", "Service", "Project Management" )"> 
```

唯一的问题是它现在将页面放入我的导航栏中！我只希望它链接到页面，这次我能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:25:05.260

您不直接链接到视图，而是链接到操作。动作被实现为控制器上的方法；这些方法是使用路由系统定位的。

示例控制器：

```
public class ServicesController : Controller 
{
    [HttpGet]
    public ActionResult ProjectManagement()
    {
         // automatically locates the correct view; you can also explicitly
         // pass the path to the view
         return View();
    }
} 
```

您现在可以右键单击操作方法名称（“ProjectManagement”）并选择“添加视图”。这将帮助您创建一个新视图，并将其放置在视图引擎可以自动找到的位置。

视图通常放置在“Views/[ControllerName]/”文件夹中，例如“Views/Services/ProjectManagement.cshtml”。

要在导航栏中链接到此操作方法，您可以使用辅助方法`ActionLink()`。

```
<li>@Html.ActionLink( "Project Management", "ProjectManagement", "Services" )</li> 
```

另请参阅：[控制器和路由](http://www.asp.net/mvc/overview/controllers-and-routing)

# jquery - 动画后立即运行 jQuery 函数

> ID：16135773
> 
> 赞同：0
> 
> 时间：2013-04-21T20:19:27.890
> 
> 标签：jquery

我使用以下 JSfiddle：http: [//jsfiddle.net/edddotcom/7NQKU/1/](http://jsfiddle.net/edddotcom/7NQKU/1/)

我正在使用回调函数在单击图像后立即更改文本的背景，

这是的兄弟，所以我希望我可以使用 .sibling() 但它不起作用，我做错了什么？

HTML：

```
<div class="container">
     <img src="http://cloudsmaker.com/hipsterwall/img/salto-al-norte.jpg" height="100%">
         <span>TEXT HERE TEXT HERE TEXT HERE </span>
</div> 
```

CSS：

```
.container {
    display: block;
    width: 900px;
    height: 116px;
    background-color: red;
}
span {
    float: left;
    margin-top: 10px;
    margin-left: 10px;
    max-height: 100%;
}
img {
    float: left;
    height:100%;
    max-width: 400px;
    min-width: 200px;
} 
```

JavaScript：

```
$(document).ready(function() {
    //ON CLICK
    $("img").toggle(function () { //fired the first time
        $(this).parent().animate({
            //FIRSTCLICK COMMAND
            height: "232px"
        },function(){
            $(this).sibling().css("background-color","yellow");
        });

    }, function () { // fired the second time 
        $(this).parent().animate({
            //SECONDCLICKCOMMAND
            height: "116px"
        },function(){
            $(this).sibling().css("background-color","white");
        });

    });

}); 
```

删除 .sibling() 部分会使背景发生变化，这也让我感到困惑。我怎样才能使它只有文本背景发生变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:25:08.483

您尝试调用的方法是`.siblings()`，不是`.sibling()`。

这至少可以修复控制台错误（您*确实*查看了错误控制台，不是吗？）

但是，由于您正在为容器设置动画`<div>`（即`$('img').parent()`），因此您实际上需要更改作为*子*项的跨度`div`。

```
$(this).children('span').css("background-color","yellow"); 
```

见[http://jsfiddle.net/alnitak/758FD/](http://jsfiddle.net/alnitak/758FD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:26:06.400

我认为`this`现在可能是`parent`- 即`<div>`, 这意味着`siblings()`不起作用 - 你应该使用`children()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T20:24:12.533

我不认为有一种`sibling()`方法，我猜你正在寻找的是`next()`：

```
$(this).next().css("background-color","white"); 
```

# c - 将指向堆栈分配数组的指针传递给函数

> ID：16135775
> 
> 赞同：0
> 
> 时间：2013-04-21T20:19:42.080
> 
> 标签：c, function, stack, parameter-passing, allocation

我有一个带有下面原型的函数，第三个参数（输出变量）是唯一相关的：

```
int ioman_write_pages(void**, unsigned, HDD_address**, /*rest is irrelevant*/) 
```

HDD_address 类型以防有人问：

```
typedef union { 
    unsigned long long address;

    struct {
      unsigned long long offset : 12;
      unsigned long long page_number : 26;
      unsigned long long : 0;
    } paddress;
} HDD_address; 
```

**具有堆分配的调用场景**（完美运行）：

```
HDD_address* page = (HDD_address*)malloc( pagecount * sizeof(HDD_address) );
memset( page, 0, pagecount * sizeof(HDD_address) );

ioman_write_pages( data, 3, &page, block, NULL, NULL );

printf( "Pages written to: [%d, %d, %d]\n", 
        page[0].address >> 9, 
        page[1].address >> 9, 
        page[2].address >> 9 ); 
```

输出（预期：0、16、24）：

```
Pages written to: [0, 16, 24] 
```

上面的堆分配没有问题。

**但是，如果我尝试“页面”的堆栈分配：**

```
HDD_address page[pagecount];
memset( page, 0, pagecount * sizeof(HDD_address) );

ioman_write_pages( data, 3, &page, block, NULL, NULL ); 
```

输出，虽然在数据方面毫无意义，但它是一致的：

```
Pages written to: [166956, 0, 0] 
```

编译上述内容时的编译警告：

```
note: expected ‘union HDD_address **’ but argument is of type ‘union HDD_address (*)[(sizetype)(pagecount)]’ 
```

**堆栈分配，“修复”警告：**

```
DD_address page[pagecount];
memset( page, 0, pagecount * sizeof(HDD_address) ); 
HDD_address* ppage = page; 

int r = ioman_write_pages( data, 3, &ppage, block, NULL, NULL ); 
```

输出，每次运行都保持一致，但胡说八道：

```
Pages written to: [1610376, 2856870, 610607] 
```

我完全无法理解这一点，请高人赐教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:38:00.790

如果您必须向它传递一个双指针，则该函数可能会自行分配（并更改指向的指针）。

# excel - Google 电子表格：比较 2 个数组

> ID：16135787
> 
> 赞同：2
> 
> 时间：2013-04-21T20:21:06.977
> 
> 标签：excel, google-sheets

我希望您能协助提出一个比较 2 个数组的公式：

`Array A:
444444
333333
222222

Array B
111111111
123124123
124124111
444444`

我想比较这两个数组并返回两个数组中存在多少个值。因此，对于出现在顶部的这 2 个数组，它应该读取 1，因为两个数组中都只存在“444444”。

我谈论数组而不是单元格/列/行的原因是因为我使用 =QUERY() 函数来获取数组。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T05:02:07.427

如果 Array A 中的所有值都是唯一的（或者如果您想重复计算重复项等）：

`=COUNTA(IFERROR(FILTER(Array_A;MATCH(Array_A;Array_B;0))))`

如果您需要考虑数组 A 中的非唯一值，而不是重复计算它们：

`=COUNTA(IFERROR(FILTER(UNIQUE(Array_A);MATCH(UNIQUE(Array_A);Array_B;0))))`

# c++ - 具有 unique_ptr 参数回归的 Visual Studio 2012 lambda？

> ID：16135795
> 
> 赞同：2
> 
> 时间：2013-04-21T20:21:43.807
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, lambda

我惊讶地发现在 Visual Studio 2012 Update 1 中以下内容不再编译：

```
[](unique_ptr<int>){}; 
```

编译器错误表明它无法访问 unique_ptr 的私有复制构造函数。以上在 Visual Studio 2010 中运行良好。

它也在[gcc 4.7.2中编译得很好](http://ideone.com/rKFNmx)

这是一个已知的错误，还是这实际上是预期的行为？我在 Microsoft Connect 上找不到任何东西。

编辑：我刚刚更新到 Visual Studio 2012 Update 2，问题仍然存在。

EDIT2：我已经提交了[关于 Microsoft Connect 的错误报告](https://connect.microsoft.com/VisualStudio/feedback/details/785222/lambda-with-unique-ptr-argument-regression)，如果它也影响到您，欢迎您投票。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T00:47:03.007

尝试这个：

```
int a;
[a](unique_ptr<int>){}; 
```

不管它是什么，只要明确地捕获一些东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T04:06:59.973

我仍然不确定这是否是一个错误，它确实看起来像它。

同时，逻辑等价于

```
 [](unique_ptr<int> aArg)
  {

  }; 
```

可以写成

```
 [](unique_ptr<int> && aArg)
  {
    unique_ptr<int> arg = std::move(aArg);
  }; 
```

这对我来说不是一个很好的方法，因为我正在编写库代码。lambda 的调用者是库，而 lambda 是用户提供的。我不希望将他们手动`std::move`参数强加给用户。

所以，虽然这对我来说不实用，但对其他人来说可能会派上用场。

# jenkins - 通过 Jenkins 的 Grunt 任务无法提交到 svn

> ID：16135798
> 
> 赞同：0
> 
> 时间：2013-04-21T20:22:11.187
> 
> 标签：jenkins, svncommit

我正在通过 Jenkins Job 使用 grunt 任务创建 buildinfo 文件。process.env['BUILD_NUMBER'] ,process.env['SVN_REVISION'] 可用并且能够创建文件。并使用 chile_process 通过 svn 提交文件。exec = require('child_process').exec, child;

```
 grunt.log.writeln("Commiting  buildinfo.js");
     child = exec("svn commit buildInfo.js -m 'jenkins is committing buildInfo' --username xxxxx --password xxxxxxxx",
        function (error, stdout, stderr) {
                    console.log('Error commiting Build Information file Error:' + error);
        }); 
```

当我从终端运行它时，提交工作正常。但是当我通过 jenkins 作业运行它时，它不会抛出任何错误，但不会发生提交。有什么问题...我尝试使用 require('child_process').spawn 这也没有提交，但我通过 jenkins woks 从终端运行它时很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:34:54.377

我现在正在使用完美运行的 grunt-exec。

[https://npmjs.org/package/grunt-exec](https://npmjs.org/package/grunt-exec)

# c++ - 在 C++ 中获取字符串的特殊部分

> ID：16135799
> 
> 赞同：1
> 
> 时间：2013-04-21T20:22:13.260
> 
> 标签：c++, python

如何在 C++ 中获取字符串或数组或向量的特殊部分？在python中是这样的：

```
a = "hello"     #string
b = [1,2,3,4,5]     #list
a[1:4]     #from index 1 to 4
b[2:4]     #from index 2 to 4 
```

结果：

```
"ell"
[3,4] 
```

C++ 有这样的语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:25:30.050

`string`你可以对子字符串做同样的事情

```
 string a = "hello";
 string special = a.substr(1,3);
 //you get ell 
```

对于向量，您可以执行以下操作：

```
vector<int> b{1,2,3,4,5};
vector<int> sepcial(b.begin()+2, b.begin() + 4);
//you get [3,4] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T20:25:40.997

[在C++ std::string](http://www.cplusplus.com/reference/string/string/)上阅读一个很好的参考页面

你可能想要

```
 std::string s = "Hello";
 std::string e = s.substr(1,3); 
```

然后`e`得到`"ell"`.

而且我不称其为特殊语法，而是一些标准库 API。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T20:32:09.990

有关适用于所有容器的更通用的版本，请参见例如[`std::copy`](http://en.cppreference.com/w/cpp/algorithm/copy)。

例如，这可用于将部分向量中的某些项目复制到新向量中：

```
std::vector<int> b = { 1, 2, 3, 4, 5 };

std::vector<int> sub;
std::copy(std::begin(b) + 2,  // Start at "index" 2
          std::begin(b) + 5,  // Copy until (but NOT including) index 5
          std::back_inserter(sub)); // `back_inserter` calls `push_back` on `sub` 
```

在此之后，向量`sub`将包含列表 3、4、5。

要了解有关迭代器函数的更多信息，您可以阅读例如[此参考](http://en.cppreference.com/w/cpp/iterator)。

* * *

如果您想复制 N 个条目，而不必使用第一个/最后一个，您可以使用[`std::copy_n`](http://en.cppreference.com/w/cpp/algorithm/copy_n)：

```
std::copy_n(std::begin(b) + 2,  // Start at "index" 2
            3,                  // Copy three items
            std::back_inserter(sub)); // `back_inserter` calls `push_back` on `sub` 
```

结果将是相同的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-21T20:38:55.903

您可以使用`substr`字符串的方法：

```
 string a = "abcdef";
 string special = a.substr(1,3); // gets bcd 
```

对于`slice`valarrays：

```
#include <iostream>
#include <valarray>
using namespace std;

int main ()
{
  valarray<int> foo (5);
  for (int i=0; i<5; ++i) foo[i]=i;

  valarray<int> bar = foo[slice(2,3,1)];

  cout << "slice(2,3,1): ";
  for (size_t n=0; n<bar.size(); n++)
      cout << bar[n] << ' ';
  cout << endl;

  return 0;
}
// Output: slice: 2,3,4 
```

向量和`copy`列表的算法：

```
#include <iostream>
#include <algorithm>
#include <vector>

int main () {
  int myints[]={1,2,3,4,5};
  std::vector<int> v (5);

  std::copy ( myints+1, myints+4, v.begin() );

  std::cout << "v contains:";
  for (std::vector<int>::iterator it = v.begin(); it!=v.end(); ++it)
    std::cout << ' ' << *it;

  std::cout << '\n';

  return 0;
}
// output 2,3,4 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-21T20:26:48.187

这取决于您实际使用的是什么。

有两种不同类型的“字符串”，c++`string`类和标准 C-String。

C-String 基本上是一个字符数组，因此您可以使用这样的 for 循环对其进行迭代：

```
for(int i = Begin; i < Max; ++i) printf("%c", a[i]); 
```

或者，您可以这样做：

```
printf("%3s", &a[Begin]); 
```

其中 3 是您想要的字符数......但是要使其正常工作，您必须在编译时知道您想要的字符串部分（或使用 sprintf.

如果您想使用 C++ `string`，您可以使用该`substr`函数。

```
string a = "hello";
string b = a.substr(1, 4);  //b is 'ello' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-21T20:29:49.163

您要完成的是从字符串中提取字符串。也称为子字符串。

在 C++ 中，std::string 类促进了这种能力。

请参阅 std::string 类中的 substr 成员函数。（[http://www.cplusplus.com/reference/string/string/substr/](http://www.cplusplus.com/reference/string/string/substr/)）

一个简单的例子：

```
void some_fuction() {
  std::string my_string("Hello");
  std::string my_sub_string(my_string.substr(1, 3)); // Will contain "ell"
} 
```

# android - Android 加速度计仅检测到两个维度的变化

> ID：16135805
> 
> 赞同：0
> 
> 时间：2013-04-21T20:23:05.407
> 
> 标签：android, accelerometer, android-sensors

我正在学习android中的加速度计。当手机围绕绿色和蓝色箭头倾斜时，我得到了新的价值，但不是红色的！

![在此处输入图像描述](https://i.stack.imgur.com/bT8f1.jpg)

这实际上是我的问题。这是我正在使用的代码：

```
private SensorManager sensorManager;

...........

        sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
        sensorManager.registerListener(this,
                sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                SensorManager.SENSOR_DELAY_NORMAL);

...........

    @Override
    public void onSensorChanged(SensorEvent event) {
        if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
            x = event.values[0];
            y = event.values[1];
            z = event.values[2];
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:52:20.390

使用红色的，唯一的变化是向上和向下的加速度。这个加速度是由重力主导的，所以数值只有很小的变化。

# .net - 这是如何工作的 - .NET 魔法（未记录的功能？）

> ID：16135811
> 
> 赞同：0
> 
> 时间：2013-04-21T20:23:20.983
> 
> 标签：.net, attributes, custom-attributes

找到**[这个代码](https://github.com/SimonCropp/Experiments/tree/master/CaliburnMicroNoBaseClass)**

这是gyst：

**视图模型：**

```
[ExtendWith(typeof(ValidationTemplate))]
public class PersonViewModel :INotifyPropertyChanged
{
    public string GivenNames { get; set; }
    public string FamilyName { get; set; }

    public string FullName
    {
        get
        {

            return string.Format("{0} {1}", GivenNames, FamilyName);
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

**ExtendWithAttribute**

```
public class ExtendWithAttribute : Attribute
{
    public ExtendWithAttribute(Type type)
    {
    }
} 
```

**验证模板**

```
public class ValidationTemplate : IDataErrorInfo
{
    private INotifyPropertyChanged target;

    public object Target
    {
        get
        {
            return target;
        }
        set
        {
            target = (INotifyPropertyChanged)value;
            validator = ValidationFactory.GetValidator(target.GetType());
            validationResult = validator.Validate(Target);
            target.PropertyChanged += Validate;
        }
    }

    private void Validate(object sender, PropertyChangedEventArgs e)
    {
        if (validator != null)
        {
            validationResult = validator.Validate(target);
        }
    }

    private IValidator validator;
    private ValidationResult validationResult;

    public string Error
    {
        get
        {
            return string.Join(Environment.NewLine, validationResult.Errors.Select(x => x.ErrorMessage).ToArray());
        }
    }

    public string this[string propertyName]
    {
        get
        {
            return string.Join(Environment.NewLine, validationResult.Errors.Where(x => x.PropertyName == propertyName).Select(x => x.ErrorMessage).ToArray());
        }
    }
} 
```

如果我们创建一个 PersonViewModel 实例，我们会得到：

1.  ValidationTemplate 已实例化 - 我**假设**因为我们将类型传递到此 ExtendWith 属性中，所以 .NET 会自动实例化该类型，但我无法在任何地方找到任何确认此行为的信息

2.  ValidationTemplate 目标属性被“神奇地”调用，它接收到对 PersonViewModel 的引用。哪个 .NET 行为片段调用了这个？我找不到任何描述此行为的文档 - 似乎它依赖于命名约定？还有其他可以填充的属性吗？这是什么魔法：）

3.  如果此对象在 XAML 中绑定，则验证正常工作，但 ViewModel 不直接实现*IDataErrorInfo*，这是 WPF 挂钩以使其验证工作的原因。然而它可以工作，不知何故它能够从某个地方使用这个 ValidationTemplate 任意对象。

**更新**：所以在我在调试器中检查了 PersonViewModel 之后，得到了以下有趣的答案：

```
var viewModel = new PersonViewModel();
var isDataErrorInfo = viewModel is IDataErrorInfo; // true
var isDataErrorInfo = viewModel is ValidationTemplate; // false 
```

该代码基于 Caliburn.Micro，引导程序是香草，其中没有任何内容。我手动实例化了 PersonViewModel 以确认调用扩展程序类的不是 WPF 特定行为，并且我确实在 Target 属性触发时获得了 setter/getter。

有人可以解释所有这些奇怪的行为吗？我有一种感觉，这是 .NET 框架的一些内部/未记录的功能/黑客。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:20:05.517

该项目依赖于[Hereder](https://code.google.com/p/heredar/)。花了我一整天的时间到处寻找，直到我检查 csproj 并看到构建后的任务。现在它是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:19:38.383

这里没有魔法。属性是 .NET 中一个有据可查的特性。属性本质上是关于可以添加的类的一些额外信息，可以通过反射访问。[你可以在这里](http://msdn.microsoft.com/en-us/library/aa288454%28v=vs.71%29.aspx)阅读更多关于它的信息。

编写良好的 MVVM 代码通常看起来很像“魔术”。实际上，通常有一个编写良好的框架，它使用反射和其他技巧来自动连接它。很可能很多实际工作都在 Caliburn.Micro.dll 或 FluentValidation.dll 中。这样你就可以编写一次引导逻辑，然后在你的所有 WPF/Silverlight/etc 上重用它。项目。除非您也有这些代码，否则您可以使用[此处](https://stackoverflow.com/questions/2425973/open-source-alternatives-to-reflector)建议的反射器工具来查看它们，或者只是与 GitHub 存储库的所有者交谈，看看您是否也可以访问它们。

# javascript - 检查 IE 10

> ID：16135814
> 
> 赞同：45
> 
> 时间：2013-04-21T20:23:38.017
> 
> 标签：javascript, internet-explorer, internet-explorer-10

如果用户使用的是 IE 10，如何在页面加载时显示消息框？

```
function ieMessage() {
    alert("Hello you are using I.E.10");
} 
```

我的网页是 JSF facelet (XHTML)。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-21T20:30:57.853

在没有条件注释和没有用户代理嗅探的情况下检测到这一点的真正方法是使用条件编译：

```
<script type="text/javascript">
    var isIE10 = false;
    /*@cc_on
        if (/^10/.test(@_jscript_version)) {
            isIE10 = true;
        }
    @*/
    console.log(isIE10);
</script> 
```

运行此代码后，您可以随时使用以下内容：

```
if (isIE10) {
    // Using Internet Explorer 10
} 
```

参考：[当浏览器模式为IE9时，如何从JS检测IE10？](https://stackoverflow.com/questions/15819904/how-can-i-detect-ie10-from-js-when-browser-mode-is-ie9)

* * *

**更新：**

为避免缩小评论，您可以使用以下内容：

```
var IE = (function () {
    "use strict";

    var ret, isTheBrowser,
        actualVersion,
        jscriptMap, jscriptVersion;

    isTheBrowser = false;
    jscriptMap = {
        "5.5": "5.5",
        "5.6": "6",
        "5.7": "7",
        "5.8": "8",
        "9": "9",
        "10": "10"
    };
    jscriptVersion = new Function("/*@cc_on return @_jscript_version; @*/")();

    if (jscriptVersion !== undefined) {
        isTheBrowser = true;
        actualVersion = jscriptMap[jscriptVersion];
    }

    ret = {
        isTheBrowser: isTheBrowser,
        actualVersion: actualVersion
    };

    return ret;
}()); 
```

并访问`IE.isTheBrowser`和`IE.actualVersion`（从 JScript 版本的内部值转换而来）之类的属性。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-04-21T20:25:27.970

一般来说，最好避免用户代理嗅探和条件编译/注释的做法。[使用特征检测](https://www.w3.org/community/webed/wiki/Optimizing_content_for_different_browsers:_the_RIGHT_way#Why_feature_detection_is_better)、[优雅降级](https://www.w3.org/community/webed/wiki/Optimizing_content_for_different_browsers:_the_RIGHT_way#Graceful_degradation)和[渐进增强](https://www.w3.org/community/webed/wiki/Optimizing_content_for_different_browsers:_the_RIGHT_way#Progressive_enhancement)要好得多。但是，对于开发者更方便检测浏览器版本的少数边缘情况，您可以使用以下代码片段：

此`if`语句只会在 IE 10 上执行

```
// IF THE BROWSER IS INTERNET EXPLORER 10
if (navigator.appVersion.indexOf("MSIE 10") !== -1)
{
    window.alert('This is IE 10');
} 
```

此`if`语句只会在 IE 11 上执行

```
// IF THE BROWSER IS INTERNET EXPLORER 11
var UAString = navigator.userAgent;
if (UAString.indexOf("Trident") !== -1 && UAString.indexOf("rv:11") !== -1)
{
    window.alert('This is IE 11');
} 
```

[http://jsfiddle.net/Qz97n/](http://jsfiddle.net/Qz97n/)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-04-21T20:47:34.983

下面是获取当前 IE 或 IE 版本的方法：

```
function IE(v) {
  return RegExp('msie' + (!isNaN(v)?('\\s'+v):''), 'i').test(navigator.userAgent);
} 
```

以下是您可以使用它的方法：

```
if(IE())   alert('Internet Explorer!');
if(IE(10)) alert('Internet Explorer 10!'); 
```

# matlab - Matlab中如何在图形上加点

> ID：16135818
> 
> 赞同：0
> 
> 时间：2013-04-21T20:24:18.610
> 
> 标签：matlab, plot

我得到了这个问题，即如何在 2D 图形上添加点，如下图所示。

[https://www.dropbox.com/s/rs501qkwqqk8qgk/abc.jpg](https://www.dropbox.com/s/rs501qkwqqk8qgk/abc.jpg)

（上图中的白点和文字需要添加。）

我已经绘制了图表，只是不知道在 matlab 中添加点的命令。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:33:54.607

（由于没有太多细节，我会用一个通用的答案去）

`X`如果您在向量和中有点坐标`Y`，您可以使用以下方法绘制它们：

```
hold on;           % Keep your plot while updating
plot(X, Y, 'ok');  % Black circles with white background
hold off;          % Allow your plots to refresh after that 
```

此外，如果您知道文本`'Tower'`应该在当前坐标区中绘制的位置（即考虑坐标轴限制），例如`x_text`和`y_text`，那么：

```
hold on;
text(x_text, y_text, 'Tower');
hold off; 
```

应该做的工作。

# javascript - 页面格式下拉

> ID：16135819
> 
> 赞同：0
> 
> 时间：2013-04-21T20:24:19.567
> 
> 标签：javascript, html

我最近开始为一个新网页做一个项目。我唯一的问题是，在某些网络浏览器（Apple Safari、Mozilla Firefox）上，文本和图像会偏向左侧。我想知道是否可以制作一个下拉框来更改文本在左侧的百分比。

如果有更简单的方法使格式在所有浏览器和监视器上显示正常，请告诉我。

我的代码如下所示：

```
<html> 
    <head>
        <title>GameLikeBacon.com</title>
        <link type="text/css" rel="stylesheet" href="stylesheet.css" />
        <link rel="icon" type="image/ico" href="http://www.mysite.com/favicon.ico" />
    </head>

    <body>
        <center>
            <IMG SRC="background.gif">
        </center>
        <DIV STYLE="position:absolute; top:100px; left: 15%; width:950px; height:1150px">
            <center>
                <script type="text/javascript">
                    // Empty JavaScript Section, Cookies Not Working
                </script>
                <left><a href="http://www.youtube.com/user/ethan1bacon56?feature=mhee">
    <img src="logo.gif" onmouseover="this.src='logos.gif'" onmouseout="this.src='logo.gif'" style="border-style: none"/>
    </a>
                </left>
                <center><a href="Action Games.html"><img src="actionbutton1.gif" 
      onmouseover="this.src='actionbutton2.gif'" onmouseout="this.src='actionbutton1.gif'"    style="border-style: none"/></a>
 <a href="Adventure Games.html" style="font-family: AR JULIAN; font-size: 25px;">Adventure </a>
 <a href="Arcade Games.html" style="font-family: AR JULIAN; font-size: 25px">Arcade </a>
 <a href="Sports Games.html" style="font-family: AR JULIAN; font-size: 25px;">Sports </a>
 <a href="Strategy Games.html" style="font-family: AR JULIAN; font-size: 25px">Strategy  </a>
                </center>
                 <h2 align="left">Newest Game: Plants vs. Zombies</h2>
 <a href="Plants vs. Zombies.html">
    <img src="zombie.jpg" style="border-style: none;" align="left">
    </a>

                 <h2 align="right">Featured Game: Fancy Pants 1</h2>
 <a href="Fancy Pants 1.html">
    <img src="Fancy.jpg" onmouseover="this.src='Fancy2.jpg'" onmouseout="this.src='Fancy.jpg'" style="border-style: none" align="right">
    </a>

                <right>
                    <img src="Bacon.gif">
                </right>
                <center>
                    <p style="font-size: 35px;">Newest Games</p>
                </center>
                <center><a href="Plants vs. Zombies.html" style="font-size: 25px;"> Plants vs. Zombies </a>
 <a href="Johnny Upgrade.html" style="font-size: 25px;"> Johnny Upgrade </a>
                </center>
                <center>
                    <h1>----------------------------------------</h1>
                </center>
                <center><a href="http://www.youtube.com/user/ethan1bacon56?feature=mhee"><img src="Ad.gif" style="border-style: none;"></a>
                </center>
                <center>
                    <h6>Want your advertisment here?  Contact me at ethandpeck@hotmail.com</h6>
                </center>
                <img src="splash.gif">
        </DIV>
    </body>
</html> 
```

有没有更好的方法来做到这一点，或者我可以使用下拉来决定文本在左边的百分比？顺便说一句，我 11 岁，所以不要对我投反对票，因为这看起来很简单。

# yii - Yii如何从关系表中获取更多数据

> ID：16135823
> 
> 赞同：0
> 
> 时间：2013-04-21T20:24:34.380
> 
> 标签：yii, yii-relations

我有 3 张桌子：

1.  **数字**（身份证，姓名）
2.  **食物**（身份证，姓名）
3.  **numbers_food** (number_id, food_id, price_per_ad, price_per_ch)

如何从**numbers_food**关系表中获取每个**food_id的****price_per_ad**和**price_per_ch**数据？

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:24:31.117

只需在模型中定义关系。

在 NumberFoodModel 中：

```
'food'    => array(self::BELONGS_TO, 'Food',    'food_id'), 
```

在 FoodModel 中：

```
'number_food'    => array(self::HAS_MANY, 'NumberFood',    'food_id'), 
```

现在在您的代码中使用

```
Food::model()->with('number_food')->findByPk($id) 
```****

# objective-c - Objective c - 在某些字符之间插入字符到字符串中

> ID：16135825
> 
> 赞同：0
> 
> 时间：2013-04-21T20:24:41.897
> 
> 标签：objective-c, string, insert

我需要在数组中每次出现的字符串之间插入一个字符。例如：

```
array = [ab,bc,cd,de];
string = @"abbccd";

newString = @"ab*bc*cd"; 
```

我怎样才能做到这一点？我环顾四周，但找不到好的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:39:40.833

怎么样，

```
NSString *newString = [array componentsJoinedByString:@"*"]; 
```

# arrays - 如何在Ruby中对具有相同日期的列求和

> ID：16135826
> 
> 赞同：0
> 
> 时间：2013-04-21T20:24:42.703
> 
> 标签：arrays, ruby, sum

我有一个包含这些类型数据的数组，我需要总结具有相同日期的列。

```
[["01-04-2013", 100.0, 110.0, 120, 0, 0, 0], ["02-04-2013", 100.0, 110.0, 130, 0, 0, 0], ["03-04-2013", 100.0, 110.0, 120, 0, 0, 0], ["10-04-2013", 100.0, 110.0, 100, 0, 0, 0], ["02-04-2013", 100.0, 140.0, 0, 70, 0, 0], ["10-04-2013", 100.0, 140.0, 0, 100, 0, 0], ["11-04-2013", 100.0, 140.0, 0, 110, 0, 0], ["12-04-2013", 100.0, 140.0, 0, 120, 0, 0], ["09-04-2013", 0.0, 0.0, 0, 0, 130, 0], ["17-04-2013", 0.0, 0.0, 0, 0, 30, 0], ["15-04-2013", 100.0, 130.0, 0, 0, 0, 17], ["17-04-2013", 100.0, 130.0, 0, 0, 0, 90], ["18-04-2013", 100.0, 130.0, 0, 0, 0, 100]] 
```

我怎样才能在红宝石中做到这一点？我的意思是将具有相同日期的行汇总为一行，如果没有重复的日期，则保留旧的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:44:32.320

```
require 'pp'
require 'matrix'

d = [["01-04-2013", 100.0, 110.0, 120, 0, 0, 0], ["02-04-2013", 100.0, 110.0, 130, 0, 0, 0], ["03-04-2013", 100.0, 110.0, 120, 0, 0, 0], ["10-04-2013", 100.0, 110.0, 100, 0, 0, 0], ["02-04-2013", 100.0, 140.0, 0, 70, 0, 0], ["10-04-2013", 100.0, 140.0, 0, 100, 0, 0], ["11-04-2013", 100.0, 140.0, 0, 110, 0, 0], ["12-04-2013", 100.0, 140.0, 0, 120, 0, 0], ["09-04-2013", 0.0, 0.0, 0, 0, 130, 0], ["17-04-2013", 0.0, 0.0, 0, 0, 30, 0], ["15-04-2013", 100.0, 130.0, 0, 0, 0, 17], ["17-04-2013", 100.0, 130.0, 0, 0, 0, 90], ["18-04-2013", 100.0, 130.0, 0, 0, 0, 100]]

pp(
  d.group_by(&:first).values.reject do |v|
    v.size <= 1
  end.map do |e|
    e.inject do |m, e|
      (Vector.[](*m) + Vector.[](*e)).to_a
    end
  end
) 
```

*评论后更新：*

```
 d.group_by(&:first).values.map do |e|
    e.inject do |m, e|
      [e[0], (Vector.[](*m[1..-1]) + Vector.[](*e[1..-1])).to_a].flatten
    end
  end.sort 
```

*规格变更提醒：*

```
def v m
  Vector.[](*m.drop(1))
end

d.group_by(&:first).values.map do |group|
  r = group.inject do |m, e|
    [e[0], *(v(m) + v(e)).to_a]
  end
  r[1] /= group.size
  r[2] /= group.size
  r
end.sort 
```

* * *

^(**笔记。**
我不是说这是作业，但在这种情况下，很明显，当我们只是为学生做作业时，我们并没有真正帮他们任何忙，对吧？此外，这个解决方案是在一个公共网站上提供的，该网站会立即被谷歌索引，并且在世界排名前 100 的网站*中*，这对教授或评分者来说并不是一个秘密。如果学校使用像[http://turnitin.com/](http://turnitin.com/)这样的国家数据库呢？我想如果他们愿意的话，他们可以检查公共代码片段。最后，还有一些由爱好者在 SO 上发布的写得很好的代码。我不确定它通常是否可以通过低年级入门课程原创作品，如果我自己这么说的话。:-))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:51:14.480

```
require 'pp'

a = [["01-04-2013", 100.0, 110.0, 120, 0, 0, 0], ["02-04-2013", 100.0, 110.0, 130, 0, 0, 0], ["03-04-2013", 100.0, 110.0, 120, 0, 0, 0], ["10-04-2013", 100.0, 110.0, 100, 0, 0, 0], ["02-04-2013", 100.0, 140.0, 0, 70, 0, 0], ["10-04-2013", 100.0, 140.0, 0, 100, 0, 0], ["11-04-2013", 100.0, 140.0, 0, 110, 0, 0], ["12-04-2013", 100.0, 140.0, 0, 120, 0, 0], ["09-04-2013", 0.0, 0.0, 0, 0, 130, 0], ["17-04-2013", 0.0, 0.0, 0, 0, 30, 0], ["15-04-2013", 100.0, 130.0, 0, 0, 0, 17], ["17-04-2013", 100.0, 130.0, 0, 0, 0, 90], ["18-04-2013", 100.0, 130.0, 0, 0, 0, 100]]
h = {}
a.group_by(&:first).each{|k,v| v.flatten!.delete(k); h[k] = v.inject(:+)}
pp h 
```

***输出：***

```
{"01-04-2013"=>330.0,
 "02-04-2013"=>650.0,
 "03-04-2013"=>330.0,
 "10-04-2013"=>650.0,
 "11-04-2013"=>350.0,
 "12-04-2013"=>360.0,
 "09-04-2013"=>130.0,
 "17-04-2013"=>350.0,
 "15-04-2013"=>247.0,
 "18-04-2013"=>330.0} 
```

* * *

```
pp a.group_by(&:first).map{|k,v| v.flatten!.uniq!} 
```

***输出：***

```
[["01-04-2013", 100.0, 110.0, 120, 0],
 ["02-04-2013", 100.0, 110.0, 130, 0, 140.0, 70],
 ["03-04-2013", 100.0, 110.0, 120, 0],
 ["10-04-2013", 100.0, 110.0, 100, 0, 140.0],
 ["11-04-2013", 100.0, 140.0, 0, 110],
 ["12-04-2013", 100.0, 140.0, 0, 120],
 ["09-04-2013", 0.0, 0, 130],
 ["17-04-2013", 0.0, 0, 30, 100.0, 130.0, 90],
 ["15-04-2013", 100.0, 130.0, 0, 17],
 ["18-04-2013", 100.0, 130.0, 0, 100]] 
```

* * *

```
pp a.group_by(&:first).map{|k,v|  v.transpose.map!{|a| a.inject(:+)}} 
```

***输出：***

```
[["01-04-2013", 100.0, 110.0, 120, 0, 0, 0],
 ["02-04-201302-04-2013", 200.0, 250.0, 130, 70, 0, 0],
 ["03-04-2013", 100.0, 110.0, 120, 0, 0, 0],
 ["10-04-201310-04-2013", 200.0, 250.0, 100, 100, 0, 0],
 ["11-04-2013", 100.0, 140.0, 0, 110, 0, 0],
 ["12-04-2013", 100.0, 140.0, 0, 120, 0, 0],
 ["09-04-2013", 0.0, 0.0, 0, 0, 130, 0],
 ["17-04-201317-04-2013", 100.0, 130.0, 0, 0, 30, 90],
 ["15-04-2013", 100.0, 130.0, 0, 0, 0, 17],
 ["18-04-2013", 100.0, 130.0, 0, 0, 0, 100]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T21:03:04.747

```
aggregated_rows = rows.group_by(&:first).map do |date, rows_by_date|
  values = rows_by_date.transpose.drop(1).map { |xs| xs.reduce(:+) }
  [date, values]
end

#[["01-04-2013", [100.0, 110.0, 120, 0, 0, 0]],
# ["02-04-2013", [200.0, 250.0, 130, 70, 0, 0]],
...
# ["18-04-2013", [100.0, 130.0, 0, 0, 0, 100]]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T21:32:30.933

```
a = [["01-04-2013", 100.0, 110.0, 120, 0, 0, 0], ["02-04-2013", 100.0, 110.0, 130, 0, 0, 0], ["03-04-2013", 100.0, 110.0, 120, 0, 0, 0], ["10-04-2013", 100.0, 110.0, 100, 0, 0, 0], ["02-04-2013", 100.0, 140.0, 0, 70, 0, 0], ["10-04-2013", 100.0, 140.0, 0, 100, 0, 0], ["11-04-2013", 100.0, 140.0, 0, 110, 0, 0], ["12-04-2013", 100.0, 140.0, 0, 120, 0, 0], ["09-04-2013", 0.0, 0.0, 0, 0, 130, 0], ["17-04-2013", 0.0, 0.0, 0, 0, 30, 0], ["15-04-2013", 100.0, 130.0, 0, 0, 0, 17], ["17-04-2013", 100.0, 130.0, 0, 0, 0, 90], ["18-04-2013", 100.0, 130.0, 0, 0, 0, 100]]

require "pp"

def group_and_sum_rows_by_date_string(a)
    # instantiate a hash that returns an empty array for a key
    # that doesn't exist
    h = Hash.new([])
    a.each do |row|
        # populate the hash with date string as key, and array of 
        # arrays of the values for that date string
        h[k=row.shift] = ([row] + h[k]).compact
    end
    # add up all the corresponding values in each element's array
    # arrays, and return the result as an array
    h.map{|k, v| [k, v.transpose.map{|x| x.inject(:+)}]}
end

pp group_and_sum_rows_by_date_string(a)

[["15-04-2013", [100.0, 130.0, 0, 0, 0, 17]],
 ["03-04-2013", [100.0, 110.0, 120, 0, 0, 0]],
 ["02-04-2013", [200.0, 250.0, 130, 70, 0, 0]],
 ["17-04-2013", [100.0, 130.0, 0, 0, 30, 90]],
 ["18-04-2013", [100.0, 130.0, 0, 0, 0, 100]],
 ["09-04-2013", [0.0, 0.0, 0, 0, 130, 0]],
 ["01-04-2013", [100.0, 110.0, 120, 0, 0, 0]],
 ["12-04-2013", [100.0, 140.0, 0, 120, 0, 0]],
 ["10-04-2013", [200.0, 250.0, 100, 100, 0, 0]],
 ["11-04-2013", [100.0, 140.0, 0, 110, 0, 0]]] 
```

# php - 由于 v.4 到 v5 的迁移，PHP 脚本不再有效

> ID：16135829
> 
> 赞同：-1
> 
> 时间：2013-04-21T20:25:00.100
> 
> 标签：php

最近我的网络服务器从 PHP v.4 迁移到 v.5.3。我知道，我知道，好久不见：）

但是现在当用户输入所需的数据时，我的一些脚本不会显示结果。这是脚本：

```
<?php 
if ($ok) {

    if ($heightft == "" || $heightin == "" || $weight == "") {
        $error = "<br><FONT COLOR=#FF0000>One of the fields above was not completed.</FONT><br>";
    } else {
        $bmi = $weight * 703 / (($heightft * 12 + $heightin) * ($heightft * 12 + $heightin));
        $bmiString = number_format($bmi,2,".","");
        echo "<table border='1' cellpadding='10' bordercolor='0000FF'><tr><td><strong>Your BMI is: " . $bmiString;
echo "<br><br></strong>";

        if ($bmi <= 18.50) { 
            echo "You are classified as <strong>Underweight</strong>."; 
        } elseif ($bmi <= 24.99) {
            echo "You are classified as <strong>Normal</strong>."; 
        } elseif ($bmi <= 29.99) {
            echo "You are classified as <strong>Overweight</strong>."; 
        } else { 
            echo "You are classified as <strong>Obese</strong>.</td></tr></table></bordercolor>"; 
        }       
    }
}

?>

<?php echo $error;?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T20:30:39.860

看起来你期待着上场`register_globals`。现在默认关闭。

您应该使用`$_GET['heightft']`或`$_POST['heightft']`依赖于表单方法来访问此数据。

# c# - system.invalidoperationexception linqtosql 调试

> ID：16135832
> 
> 赞同：1
> 
> 时间：2013-04-21T20:25:07.070
> 
> 标签：c#, wpf, silverlight, windows-phone-7, linq-to-sql

我知道之前有人问过这个问题，但解决方案是转到菜单 DEBUG 和 Exceptions 并在 common 下添加 invalidoperationexception 然后再次调试。然后，调试器应该直接到引发异常的原因所在的行，但事实并非如此。它不断地跳转到 db.SubmitChanges。

我试图取消注释和注释以这种方式接近它的行，我发现这条线导致了它：

```
db.CasePhotos.InsertAllOnSubmit(this._casePhotos); 
```

我使用 codefirst 方法，因为数据库是 windows phone 的 isostore。

CasePhoto 类包含与 Case 类的关联。

这就是我的 CasePhoto 协会的样子：

```
 [Column]
    public int CaseId;

    private EntityRef<Case> _Case;
    [Association(Storage = "_Case", ThisKey = "CaseId"]
    public Case Case
    {
        get { return this._Case.Entity; }
        set { this._Case.Entity = value; }
    } 
```

问题显然是关联。

案例存在，但我唯一要做的就是将新创建的案例 ID 分配给关联的键，如下所示：

```
item.CaseId = newCaseId; 
```

我做错了什么？我还尝试将整个对象添加到“案例”属性中，但没有运气。

## 我如何正确地将值分配给与另一个字段关联/相关的字段？

# python - 从多个列表中生成元素组合

> ID：16135833
> 
> 赞同：0
> 
> 时间：2013-04-21T20:25:07.370
> 
> 标签：python, arrays, for-loop, args

我正在制作一个将可变数量的列表作为输入的函数（即[任意参数列表](http://docs.python.org/2/tutorial/controlflow.html#arbitrary-argument-lists)）。我需要将每个列表中的每个元素与所有其他列表的每个元素进行比较，但我找不到任何方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:37:29.887

根据您的目标，您可以使用一些`itertools`实用程序。例如，您可以使用[`itertools.product`](http://docs.python.org/library/itertools.html#itertools.product)on `*args`：

```
from itertools import product
for comb in product(*args):
    if len(set(comb)) < len(comb):
        # there are equal values.... 
```

但是目前从您的问题中您想要实现的目标还不是很清楚。如果我没有正确理解您，您可以尝试以更具体的方式陈述问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T00:54:45.853

我认为@LevLeitsky 的答案是对可变数量列表中的项目进行循环的最佳方式。但是，如果循环的目的只是从列表中找到成对的项目之间的共同元素，我会做一些不同的事情。

这是一种查找每对列表之间的共同元素的方法：

```
import itertools

def func(*args):
    sets = [set(l) for l in args]
    for a, b in itertools.combinations(sets, 2):
        common = a & b # set intersection
        # do stuff with the set of common elements... 
```

我不确定你需要对公共元素做什么，所以我会把它留在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T20:31:57.077

如果您希望参数作为字典

```
def kw(**kwargs):
    for key, value in kwargs.items():
        print key, value 
```

如果您希望所有参数作为列表：

```
 def arg(*args):
        for item in args:
            print item 
```

你可以同时使用

```
def using_both(*args, **kwargs) :
     kw(kwargs)
     arg(args) 
```

这样称呼它：

```
using_both([1,2,3,4,5],a=32,b=55) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T20:45:13.897

[itertools](http://docs.python.org/2/library/itertools.html)模块为此类任务提供了许多有用的工具。您可以通过将以下示例集成到您的特定比较逻辑中来调整以下示例以适应您的任务。

请注意，以下假设是交换函数。也就是说，出于对称原因，省略了大约一半的元组。

例子：

```
import itertools

def generate_pairs(*args):
    # assuming function is commutative
    for i, l in enumerate(args, 1):
        for x, y in itertools.product(l, itertools.chain(*args[i:])):
            yield (x, y)

# you can use lists instead of strings as well
for x, y in generate_pairs("ab", "cd", "ef"):
    print (x, y)

# e.g., apply your comparison logic
print any(x == y for x, y in generate_pairs("ab", "cd", "ef"))
print all(x != y for x, y in generate_pairs("ab", "cd", "ef")) 
```

输出：

```
$ python test.py
('a', 'c')
('a', 'd')
('a', 'e')
('a', 'f')
('b', 'c')
('b', 'd')
('b', 'e')
('b', 'f')
('c', 'e')
('c', 'f')
('d', 'e')
('d', 'f')
False
True 
```

# java - Webstorm 桌面启动器

> ID：16135843
> 
> 赞同：3
> 
> 时间：2013-04-21T20:25:55.297
> 
> 标签：java, linux, bash, path, webstorm

我正在尝试为 Webstorm 获得一个可用的桌面启动器（但适用于任何 JetBrains 产品。）我已经尝试在 Xubuntu 和 Lubuntu 中使用内置菜单“添加桌面启动器”，没有骰子。

从应用程序文件夹中的终端运行 ./webstorm.sh 可以正常工作。

如果我将选项添加到 .desktop 文件以在终端中运行，则会收到一条错误消息：

> 错误：无法启动 WebStorm。未找到 JDK。请验证 WEBIDE_JDK、JDK_HOME 或 JAVA_HOME 环境变量 > 指向有效的 JDK 安装。
> 
> 按 Enter 继续。

如果我打开一个终端并执行 javac -version 我得到一个响应，表明我的路径设置正确。

是什么赋予了？我对自己做错了什么感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:58:05.373

`JAVA_HOME`像这样设置`~/.profile`：

```
 export JAVA_HOME=/usr/lib/jvm/java-7-oracle/ 
```

然后重新启动您的系统（或使用 X-Windows `sudo /etc/init.d/gdm restart`）。

# java - 将字符串集合传递给（字符串...值）

> ID：16135844
> 
> 赞同：0
> 
> 时间：2013-04-21T20:25:56.763
> 
> 标签：java, string, collections

我有一个非常简单的问题。

下面这个方法——

`newColumnsPredicate`

将输入作为`String... colNames`

下面也是方法签名 -

```
public static SlicePredicate newColumnsPredicate(String... colNames) {

   //Some code

} 
```

下面`collection of strings`是我想在上述方法中使用的内容-

`final Collection<String> attributeNames`

所以我决定像这样使用它-

`newColumnsPredicate(attributeNames.toString());`

这是正确的方法吗？在我运行我的程序之后，我没有得到任何数据，所以我怀疑我添加的方式可能是错误的。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T20:28:49.107

String... 是一个可变参数。它用于指示参数应该是一个字符串数组，或者任意多个字符串参数。

对集合调用 toString() 只会返回一个字符串，该字符串组合了它包含的所有字符串。

相反，您应该编写一些将您的集合转换为数组的东西，然后将其传入，例如：

```
attributeNames.toArray(new String[attributeNames.size ()]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:31:41.733

不，当您执行 a`attributeNames.toString()`时，您将单个 String 传递给该方法，并在它们周围加上一个方括号，例如`"[a, b, c]"`, 您的程序期望在哪里像`"a", "b", "c"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T20:37:55.337

该`toArray()`[功能](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#toArray%28%29)在这里没有用吗？

```
public void test() {
    Collection<String> collection = new HashSet<>();
    newColumnsPredicate(collection.toArray(new String[collection.size()]));
}

public static SlicePredicate newColumnsPredicate(String... colNames) {
    //stuff
} 
```

编辑：哎呀，没有看到另一个人以同样的方式回答。

# r - 无法通过 $teststat 从 R 中的列表中提取测试统计信息

> ID：16135850
> 
> 赞同：1
> 
> 时间：2013-04-21T20:26:22.310
> 
> 标签：r, testing, extract

我尝试`$teststat`从运行了 10 000 次的测试中提取测试统计信息，但遇到了问题：

```
library(urca)
df.test<-replicate(10000,ur.df(cumsum(rnorm(n=100, mean=0)))) 
```

但命令

```
df.test$teststats 
```

给出输出：`NULL`

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T20:52:24.237

这是一个 s4 对象，测试卫星位于插槽中。我想你想要这样的东西：

```
df.test<-replicate(10,ur.df(cumsum(rnorm(n=100, mean=0))))
df.test[[1]]@teststat

#               tau1
#statistic 0.8491917 
```

要获得所有结果，那么您可能想要类似的东西

```
unlist( lapply(df.test, function(x) x@teststat)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:57:36.950

`teststat`要一次在一个向量中获取所有值，请使用

```
sapply(df.test, function(z) z@teststat) 
```

# android - 步行时加速度计传感器的世界参考值

> ID：16135864
> 
> 赞同：0
> 
> 时间：2013-04-21T20:27:43.960
> 
> 标签：android, sensors, projection, coordinate-systems, dead-reckoning

我一直在尝试为 Android 开发**行人航位推算**应用程序，在处理了步数检测和步长组件之后，我决定解决方向确定问题。

在偶然发现了几篇关于[坐标](https://stackoverflow.com/questions/14963190/calculate-acceleration-in-reference-to-true-north) [转换](https://stackoverflow.com/questions/15315129/convert-magnetic-field-x-y-z-values-from-device-into-global-reference-frame)的帖子（甚至与经常回答的人聊天[）](https://stackoverflow.com/users/747873/hoan-nguyen)之后，我的结果逐渐好转，但仍然有一些困扰我的事情。

# 本实验：

我往北走，转身又往南走。向 West 重复该过程，然后向 East 重复该过程。

# 问题：

1.  我预计，在沿多个方向直行时，**X 和 Y 值**的值会随着脚步声而振荡，并且始终具有相对**稳定的 Z 值**。相反，**Y 值以这种方式运行**，而**Z 值具有其预期行为**。怎么来的？这与我**不使用*remapCoordinates()***有什么关系吗？（见图1）

2.  我预计角度图会**在 180º 和 -180º 左右**跳跃，但为什么它们也会**在 35º 左右**跳跃？（见图2）

# 笔记：

*   我正在使用重力和磁力计值来计算旋转矩阵，并使用 OpenGL 的*multiplyMV()*将其相乘；
*   我没有使用*remapCoordinates()*，因为我认为我不需要：手机在我的口袋里是直立的（Y 指向上/下，Z 通常向前）并且应该向前和向后移动 45º，在最坏的情况下；
*   方位角值似乎没问题，并且没有问题 2 中描述的振荡。（参见图 3）

# 图表：

**世界参考重力加速度** *（蓝色为 X，红色为 Y，绿色为 Z）*[![世界参考系加速度](https://i.stack.imgur.com/wVHD7.png)](https://dl.dropboxusercontent.com/u/7620443/accel-world.png)

 ***世界参考重力角** *（蓝色为 atan2(Y/X)，红色为 atan2(Z/Y)，绿色为 atan2(Z/X)）*[![来自世界坐标的 Atan2 值](https://i.stack.imgur.com/7XiC4.png)](https://dl.dropboxusercontent.com/u/7620443/atan2angles.png)

 ***方向值** *（蓝色是方位角，红色是俯仰，绿色是滚动）*[![方向值](https://i.stack.imgur.com/uHQhu.png)](https://dl.dropboxusercontent.com/u/7620443/orientation-angles.png)**

# java - 调用外部类和方法

> ID：16135868
> 
> 赞同：0
> 
> 时间：2013-04-21T20:28:30.293
> 
> 标签：java, linux, terminal

首先，我正处于学习 Java 的初级阶段，并且正在做不同的练习。

其中一个练习给了我这个外部课程： http: [//pastebin.com/g8hCTRCc](http://pastebin.com/g8hCTRCc)

我需要编写一个应用程序来计算并打印程序中定义为变量的两个有理数的最大值和最小值。

到目前为止，我已经导入了类（我相信正确），但我不知道如何从那里调用方法。

```
package Rational;
import Rational.add;
public class test {
  public static void add(String[] args){
  }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:32:45.317

首先使用其构造函数创建类的实例。似乎类上的大多数方法只接受一个实例`Rational`作为参数，因此`Rational`必须创建第二个实例。将第二个实例传递给第`Rational`一个实例`add()`，这将返回一个新实例`Rational`。所有这些代码都应该包含在`main`执行方法中。导入语句也应该修改为排除`add`，因为导入需要完全限定的类名，而不是类上的方法。

```
package Rational;
import Rational;

public class Test {
    public static void main(String[] args) {
        Rational rational = new Rational(1,2);
        Rational rational2 = new Rational(1,2);
        Rational rationalTotal = rational.add(rational2);
    }
} 
```

# php - PHP 两次发送电子邮件并且没有正确上传图像：/

> ID：16135869
> 
> 赞同：4
> 
> 时间：2013-04-21T20:28:33.420
> 
> 标签：php

我一直在设计一个网站，一切都很完美，直到我开始添加一些额外的东西，这样它就可以完全按照我想要的方式工作。

这是一个网站的脚本，用于上传他们在网上发布的广告的标题、描述、人名、图像、电子邮件地址和密码。但是，它不再希望正确命名图像，它会发送两次电子邮件，一次是在可能有图像的情况下，它会立即在有人可能没有上传图像的情况下执行此操作，但它会将其读取为如果由于文件上传错误而同时执行这两项操作。

顺便说一句，这是我创建的第一个 PHP 脚本，所以它可能看起来很混乱，因为我一直在将它与我在网上找到的不同东西混合起来:)

ps魔法发生的页面是www.afterswap.com/give.php

pps 我有一个全局配置文件，用于设置所有数据库连接信息等，因此这里不存在。

```
<?PHP
include("inc/header.php");
foreach ($_POST as $key => $val)
    $_POST[$key] = mysqli_real_escape_string($con, $val);
$back = "<a href='give.php'>Click Here To Go Back And Try Again</a>";
if (isset($_POST['upload']) && $_FILES['userfile']['size'] > 0) {
    $title          = mysqli_real_escape_string($title123);
    $title123       = mysqli_real_escape_string($_POST['title']);
    $description    = mysqli_real_escape_string($description123);
    $description123 = mysqli_real_escape_string($_POST['description']);
    $Sell_by        = $_POST['Sell_by'];
    $name           = mysqli_real_escape_string($name123);
    $name123        = mysqli_real_escape_string($_POST['name']);
    $email          = $_POST['email'];
    $password       = $_POST['password'];
    $imagename      = basename($_FILES['userfile']['name']);
    $uploadedfile   = $_FILES['userfile']['tmp_name'];
    if (empty($imagename)) {
        $error = 1;
        echo "<h2 class='error'>The name of the image was not found.</h2>" . $back;
    }

    if ($error != 1 && $noimg != 1) {

        $filename  = stripslashes($_FILES['userfile']['name']);
        $extension = substr(strrchr($filename, '.'), 1);
        $extension = strtolower($extension);
    }

    if (($extension != "jpg") && ($extension != "jpeg") && ($extension != "png") && ($extension != "gif")) {
        echo '<h2 class="error">Error. Images Must Be Jpg, Gif, or Png Format! Please Go Back And Try Another Image.</h2>' . $back . '';
        $errors = 1;
    } else {

        $time     = time();
        $newimage = "/photos/" . $time . $imagename;
        $result   = move_uploaded_file($_FILES['userfile']['tmp_name'], $newimage);
        if (empty($result)) {
            $error = 1;
            echo "<h2 class='error'>There was an error uploading your image.</h2><br/>" . $back . "";
        }

        $date  = date("Y/m/d H:i:s");
        $query = "INSERT INTO classifieds (adid, title, description, Sell_by, name, email, password, picture, date, views, authorized ) VALUES ('', '$title123', '$description123', '$Sell_by', '$name123', '$email', '$password', '$newimage', '$date', '0', '0')";
        mysqli_query($query) or die(mysqli_error());

        $pullback = "SELECT * FROM classifieds WHERE title = '$title123' AND email ='$email' limit 1";
        $query2 = mysqli_query($pullback) or die(mysqli_error());
        while ($row = mysqli_fetch_array($query2, MYSQL_ASSOC)) {
            $newid = $row['adid'];
            $pass  = $row['pass'];
        }

        $url = "http://";
        $url .= getenv("HTTP_HOST");
        $Name      = "AfterSwap";
        $emailf    = "noreply@afterswap.com";
        $recipient = $email;
        $mail_body = "Thank you for posting a new listing!<br /><br />You May Now Manage Your Ad by selecting one of the following options:<br /><br />Approve your listing: <a href='" . $url . "/approve.php?id=" . $newid . "&pass=" . $password . "'>Click Here</a><br/>Edit your listing: <a href='$url/edit.php?id=" . $newid . "&pass=" . $password . "'>Click Here</a><br/>Remove your listing: <a href='" . $url . "/remove.php?id=" . $newid . "&pass=" . $password . "'>Click Here</a><br /><br />Regards,<br /><br />The AfterSwap Team";
        $subject   = "AfterSwap Ad Details";
        $headers   = "From: " . $Name . " <" . $emailf . ">\r\n";
        $headers .= "Content-type: text/html\r\n";

        mail($recipient, $subject, $mail_body, $headers);

        echo "<div align='justify'><div class='success'>Your listing '" . $name123 . "' Has Been Submitted Successfully! <br/><br/>Please take note: Your listing will not show on the website until you verify it via the email sent to you. This email also allows you to edit and remove your listing as well.</div></div>";

    }
} elseif (isset($_POST['upload'])) {
    $title          = mysqli_real_escape_string($title123);
    $title123       = mysqli_real_escape_string($_POST['title']);
    $description    = mysqli_real_escape_string($description123);
    $description123 = mysqli_real_escape_string($_POST['description']);
    $Sell_by        = $_POST['Sell_by'];
    $name           = mysqli_real_escape_string($name123);
    $name123        = mysqli_real_escape_string($_POST['name']);
    $email          = $_POST['email'];
    $password       = $_POST['password'];
    $date           = date("Y/m/d H:i:s");
    $query          = "INSERT INTO classifieds (adid, title, description, cat, Sell_by, name, email, password, picture, date, views, authorized ) VALUES ('', '$title123', '$description123', '$category', '$Sell_by', '$name123', '$email', '$password', 'images/noimage.jpg', '$date', '0', '0')";
    mysqli_query($query) or die(mysqli_error());

    $pullback = "SELECT * FROM classifieds WHERE title = '$title123' AND email ='$email' limit 1";
    $query2 = mysqli_query($pullback) or die(mysqli_error());
    while ($row = mysqli_fetch_array($query2, MYSQL_ASSOC)) {
        $newid = $row['adid'];
        $pass  = $row['pass'];
    }

    $url = "http://";
    $url .= getenv("HTTP_HOST");
    $Name      = "AfterSwap";
    $emailf    = "noreply@afterswap.com";
    $recipient = $email;
    $mail_body = "Thank you for posting a new listing!<br /><br />You May Now Manage Your Ad by selecting one of the following options:<br /><br />Approve your listing: <a href='" . $url . "/approve.php?id=" . $newid . "&pass=" . $password . "'>Click Here</a><br/>Edit your listing: <a href='$url/edit.php?id=" . $newid . "&pass=" . $password . "'>Click Here</a><br/>Remove your listing: <a href='" . $url . "/remove.php?id=" . $newid . "&pass=" . $password . "'>Click Here</a><br /><br />Regards,<br /><br />The AfterSwap Team";
    $subject   = "AfterSwap Ad Details";
    $headers   = "From: " . $Name . " <" . $emailf . ">\r\n";
    $headers .= "Content-type: text/html\r\n";

    mail($recipient, $subject, $mail_body, $headers);

    echo "<div align='justify'><div class='success'>Thank you " . $name123 . ", your listing has been submitted successfully! <br/><br/>Please take note: Your isting will not show on the website until you verify it via the email sent to you. This email also allows you to edit and remove your listing as well.</div></div>";

} else {
?>

/* HTML Form here */

<?PHP } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:32:52.603

尝试这个

更改此行

```
} elseif (isset($_POST['upload'])) { 
```

至

```
} elseif (isset ( $_POST ['upload'] ) && empty($_FILES)) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T23:29:25.123

我唯一能想到的就是 if、elseif 或 else 被通过了两次，因为条件被满足了两次。您可能希望使用更好的缩进来修改代码，并检查 elseif、if 和 else 块何时通过。此外，听取对您的帖子发表评论的两个人的建议是一个非常好的主意，MYSQLI 是一个很好的方法！还有一件事：你永远不应该通过未经处理的 $_POST ！这是一个简短的简单清理脚本！

MYSQL：

```
foreach($_POST as $key=>$val)
$_POST[$key] = mysqli_real_escape_string($con, $val); 
```

MYSQL：

```
foreach($_POST as $key=>$val) 
$_POST[$key] = mysql_real_escape_string($con, $val); 
```

# javascript - 如何获取数组中元素的特定部分

> ID：16135871
> 
> 赞同：1
> 
> 时间：2013-04-21T20:28:46.543
> 
> 标签：javascript

标题可能有点混乱。但我认为很清楚：

```
var a = ["A1", "B13", "C123"]; 
```

我想忽略元素中的第一个值并获取其余元素。所以我的新数组应该是这样的：

```
var b = ["1", "13", "123"]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T20:30:27.350

用于`.map()`创建原始修改值的新数组。

```
var b = a.map(function(item) {
    return item.slice(1);
}); 
```

* * *

这会迭代原始数组，将数组中的每个项目作为第一个参数传递给函数，并将函数的返回值设置为新数组的值。

对于 IE8 及更低版本，您需要实施补丁。一个可[从 MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map#Compatibility)获得。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T20:30:35.053

使用[`.map`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Array/map)，您可以返回一个新数组，该数组是通过将现有数组中的每个元素通过函数传递而生成的：

```
var b = a.map(function(v) {
    return v.substr(1);
}); 
```

请注意，这`.map`是旧版浏览器中不存在的 ES5 函数。上面的链接中提供了垫片。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T20:30:35.813

```
var b = [];

for (var i = 0; i < a.length; ++i)
{
    b[i] = a[i].substring(1);
} 
```

[***现场演示***](http://jsfiddle.net/annC5/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T20:32:00.230

`forEach`方式_

```
var a = ["A1", "B13", "C123"],
    b = [];

a.forEach(function (element) {
    b.push(element.slice(1));
});

console.log(b); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/wkRt3/)

`map`方式_

```
var b = a.map(function (element) {
    return element.slice(1);
}); 
```

`for`方式_

```
var l = a.length;
var b = [];

for (var i = 0; i < l; i += 1) {
    b.push(a[i].slice(1));
} 
```

终极速度仍然是 for 循环（也许爷爷除外）

因此，当我最终将上述所有内容都包括在内时，将他们的祖父全部排除在外是不对的。

`while`方式_

```
var b = [];
var i = 0;
var l = a.length;

while (i < l) {
    b.push(a[i].slice(1));
    i += 1;
} 
```

我还包括了一个 RegExp 和 jquery 版本，有点傻笑。

（[lodash](http://lodash.com/)也有它自己的地图功能）

你可以看到[jsperf](http://jsperf.com/map-vs-foreach-on-so/5)

# c++ - 调用 vector.erase() 时出现分段错误

> ID：16135874
> 
> 赞同：2
> 
> 时间：2013-04-21T20:29:00.113
> 
> 标签：c++, std, stdvector

每当我调用`dominoes.erase()`which 类型时，`std::vector<Domino>`我都会遇到分段错误；即使我对值进行硬编码。

一个单独的成员函数调用`dominoes.push_back()`加载数据，我可以用来`pop_back()`从向量中删除和返回多米诺骨牌，所以我知道那里有数据。我在 Domino 对象上创建了一个复制构造函数，效果很好。我已将其缩小到`dominoes.erase()`.

```
Domino::Domino( const Domino &d ) {
    left = d.getHighPip();
    right = d.getLowPip();

}
Domino DominoCollection::drawDomino( void )
{

    int index = random.nextNumber( dominoes.size()  );
    Domino d( dominoes[index] );
    dominoes.erase( dominoes.begin() + index );

    return Domino( d );
} 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T20:52:41.583

尝试通过删除所有不必要的代码（对象复制、向量访问...）来缩小错误范围。然后，如果问题确实来自`erase`，请添加警卫以确保索引正确。使用此代码重试：

```
#include <cassert>
void DominoCollection::drawDomino( void )
{
    assert(dominoes.size() != 0 && "Your vector is empty");
    int index = random.nextNumber( dominoes.size()  );
    assert(index < dominoes.size() && "Buffer overflow...");
    dominoes.erase( dominoes.begin() + index );
} 
```

如果它仍然存在段错误，则问题来自 class 的析构函数`Domino`。看看有没有什么腥味。您可以通过注释析构函数的部分（或全部）来进行快速测试，以了解问题出在哪里。调用`erase`将调用`Domino`.

如果没有实现析构函数，最好实现一个带有输出的析构函数（on `cerr`， not `cout`）以了解它是否到达那里或更早崩溃。是`Domino`派生类吗？它是否有任何其他对象或只有原始类型的组合？

**编辑**

我快速浏览了您的代码：问题来自赋值运算符：

```
Domino & Domino::operator = ( const Domino & d )
{
    *this = d;
} 
```

这**不是**它应该这样写的......我让你调试它作为练习。

至于为什么这是错误的根源：您说`erase`crashed but not `pop_back`。两者之间的主要区别（实现差异，而不是明显的语义差异）是擦除导致所有元素在删除（使用`=`运算符）之后移动，因为`std::vector`需要连续存储元素。而 pop 只是改变了尾指针，并没有改变容器的其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:54:02.710

根据您向我们展示的内容，看起来`int index`的值大于或等于`dominoes.size()`。否则，该代码将正常工作。

我会检查`random.NextNumber(dominoes.size())`返回的内容。

此外，如果`dominoes.size() == 0`. 在这种情况下，您将擦除`dominoes.end()`.

# ios - 从 iOS 发送 JSON，奇怪的响应

> ID：16135875
> 
> 赞同：1
> 
> 时间：2013-04-21T20:29:03.697
> 
> 标签：ios, objective-c, json

我正在尝试从我的 iOS 发送 JSON。这是我到目前为止所拥有的：

```
+ (NSDictionary *)SendJSON:(NSString *)jsonString toAddress:(NSString *)address
{    
    NSData *postData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];

    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:address]];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody:postData];

    NSURLResponse *response;
    NSData *POSTReply = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:nil];
    NSLog(@"%@",[NSJSONSerialization JSONObjectWithData:POSTReply options:kNilOptions error:nil] );
    NSDictionary *jsonresponse = POSTReply ? [NSJSONSerialization JSONObjectWithData:POSTReply options:kNilOptions error:nil] : nil;

    return jsonresponse;
} 
```

如果我像这样发送 jsonString 它工作正常：

```
NSString *jsonString = [NSString stringWithFormat:@"username=%@&password=%@", self.txtUsername.text, self.txtPassword.text]; 
```

但如果我尝试使用 JSON 格式发送：

```
@"{ \"username\" : \"%@\", \"password\" : \"%@\" }" 
```

它没有任何想法为什么？

PS：此信息正在发送到 Rails 服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T20:31:19.130

您可能需要适当地设置 Content-Type，因为您在 POST 正文中发送 JSON。

这应该可以解决问题，替换您的 x-www-form-urlencoded：

```
 [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"]; 
```

# c++ - 以接近实时的时间间隔调用函数

> ID：16135876
> 
> 赞同：0
> 
> 时间：2013-04-21T20:29:29.183
> 
> 标签：c++, windows, cross-platform

我正在做一个模拟项目，我遇到了一个问题。

我有`step()`一个被调用的函数，它由`main()`.

该函数需要以精确的实时间隔调用。我已经实施了一个解决方案`with std::this_thread::sleep_for`，但正如它所说，它会`at least`在给定的时间内休眠。随着步数越来越小，问题变得越来越大。使用 20ms 步长，实时（提前）和仿真时间之间的差异在实际时间经过的第 10 秒处变为 1 秒。

我遇到了[多媒体计时器](http://msdn.microsoft.com/en-us/library/ms712704%28VS.85%29.aspx)，在实施之前我有两个问题。

是否有跨平台方法而不是[多媒体计时器](http://msdn.microsoft.com/en-us/library/ms712704%28VS.85%29.aspx)？（除了明显的 cpu 杀手`while();`循环）

多媒体计时器是否足以满足至少 1ms 的线程暂停和恢复精度？

# r - 将函数应用于具有分组变量的多维数组

> ID：16135877
> 
> 赞同：9
> 
> 时间：2013-04-21T20:29:41.840
> 
> 标签：r

我有我认为是一个简单的问题，但我一直无法找到合适的答案。我有一个多维数组`v[x,y,z]`，我想使用分组变量（组）沿*z维向数组应用一个函数。*这是一个示例（在 R 中）：

```
v<-1:81
dim(v)<-c(3,3,9)
group<-c('a','a','a','b','b','b','c','c','c') 
```

鉴于分组变量有 3 个级别（*a*、*b*和*c* ），我正在寻找的结果（*out ）是一个维度为 3x3x3 的数组。*对于上面的示例，我可以使用以下代码获取：

```
out1<-apply(v[,,c(1:3)],c(1,2),sum)
out2<-apply(v[,,c(4:6)],c(1,2),sum)
out3<-apply(v[,,c(7:9)],c(1,2),sum)

library(abind)
out<-abind(out1, out2, out3, along=3) 
```

我的问题是是否有一种通用的方法可以获得上述结果，可以应用于大维数组和长分组向量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T21:55:17.047

简单的：

```
out <- apply(v, c(1, 2), by, group, sum) 
```

但是要以与您想要的完全相同的顺序获取数据：

```
out <- aperm(apply(v, c(1, 2), by, group, sum), c(2, 3, 1)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-21T22:14:20.647

使用包栅格可能更适合您的需求。它有一些针对处理遥感数据进行了优化的代码，负责分块处理。考虑这个例子：

```
## Make 12 rasters, maybe one for each month of the year
for( i in seq(12) ){
    assign( paste0( "r" , i ) , raster( matrix(runif(1e3) , nrow = 1e2 ) ) )
}

## Create a raster stack from these
rS <- stack( mget( paste0("r",1:12) , envir = .GlobalEnv ) )

## Use calc to get mean, using by to group by a variable
## In this example I use the vector (1,1,1,2,2,2,3,3,3,4,4,4)
## meaning I get means for the first 3 rasters, then the next 3 etc
## So I get a mean for each quarter
rMean <- calc( rS , fun = function(x){ by(x , c( rep( 1:4 , each=3 ) ) , mean ) }  ) 
```

它返回一个有 4 层的光栅砖（每个季度一个平均值）：

```
class       : RasterBrick 
dimensions  : 100, 10, 1000, 4  (nrow, ncol, ncell, nlayers)
resolution  : 0.1, 0.01  (x, y)
extent      : 0, 1, 0, 1  (xmin, xmax, ymin, ymax)
coord. ref. : NA 
data source : in memory
names       :         X1,         X2,         X3,         X4 
min values  : 0.02096586, 0.04015260, 0.04704145, 0.05884161 
max values  :  0.9727491,  0.9303025,  0.9804486,  0.9934670 
```

我希望你能适应你的数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T21:11:40.510

如果您的数据被格式化为数据框，这会容易得多：

```
library(plyr)
vd <- adply(v, 1:3)
head(vd)

  X1 X2 X3 V1
1  1  1  1  1
2  2  1  1  2
3  3  1  1  3
4  1  2  1  4
5  2  2  1  5
6  3  2  1  6 
```

然后，您可以简单地附加您的分组...

```
vd$group <- rep(group, rep(3 * 3, length(group))) 
```

...并根据此分组进行拆分：

```
daply(vd, .(group), function(df) { ... } ) 
```

`{ ... }`每个组都会调用一次匿名函数，其中`df`包含与该组对应的子数据帧。在这里，您可以使用类似的机制将数据重新组合并聚合到矩阵中。该函数应返回一个维度为 3x3x1 的数组，这些将被连接起来`daply`以形成所需的结果。

# python - 如何使用 python 访问在线托管的数据库？

> ID：16135887
> 
> 赞同：4
> 
> 时间：2013-04-21T20:30:54.637
> 
> 标签：python, database

我正在编写一个可供多个用户使用的脚本，并且我正在寻找一种方法来同步设置和其他变量。我的第一个直觉是使用在线数据库，但是通过这个网站和更广泛的网络我找不到任何东西。

我需要的是可以使用 python 脚本写入和读取的东西。这可能是一个数据库，但我也有多个在线托管帐户（Mega、Dropbox、Skydrive、Google Drive），如果有人知道我可以用来读写这些服务的文件的任何 API，那也可以。

这个问题是我一直在寻找的，但在合适的答案之前它被关闭为“不是一个真正的问题”。 [https://stackoverflow.com/questions/13149328/modify-online-file-with-python](https://stackoverflow.com/questions/13149328/modify-online-file-with-python)

需要明确的是，我正在寻找一种方法来编辑在线托管数据库中的数据库条目，使用不同 PC 上的脚本 - 以及读取它们的方法。

此外，如果有人知道我可以通过 Python 访问的任何免费在线数据库托管，非常感谢 - 就像您可以获得免费的网络托管或免费的文件托管一样。

更新：感谢回答的两位，但不幸的是，在尝试 MySQLDb 时，我发现它只支持 python 2.x（抱歉 - 我忘了提到我使用 3）。但是，在尝试此操作时，我确实找到了另一种选择。MySQL 有自己的 python 连接器，可通过此处的 Python ( [http://dev.mysql.com/doc/refman/5.6/en/connector-python.html](http://dev.mysql.com/doc/refman/5.6/en/connector-python.html) ) 访问 MySQL 数据库，并且适用于两个 Python 版本 (1&2) .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:47:07.717

[RethinkDB](http://www.rethinkdb.com/)是一个新的数据库系统，非常易于与 Python 一起使用，并带有 Python API。您可以通过 Python 使用数据库完成所需的一切，它是一个非常简单的系统，可以快速上手

# c# - 代码优先迁移中的二进制字段

> ID：16135888
> 
> 赞同：0
> 
> 时间：2013-04-21T20:30:56.860
> 
> 标签：c#, .net, entity-framework, entity-framework-migrations

问候，

我有迁移和二进制字段的问题......

我的初始迁移如下所示（我有一个现有的数据库）：

```
public override void Up()
{
    CreateTable("dbo.Words", c => new
    {
        ID = c.Int(nullable: false, identity: true),
        Name = c.String(maxLength: 4000),
        Image = c.Binary(),
        Audio = c.Binary(),
    }).PrimaryKey(t => t.ID);
} 
```

实体类在这里：

```
public class Word
{
    public int ID { get; set; }
    public string Name { get; set; }
    [MaxLength]
    public byte[] Image { get; set; }
    [MaxLength]
    public byte[] Audio { get; set; }
} 
```

我打开了自动迁移。现在，如果我从数据库中删除所有表并运行“Update-Database”，我会得到：

```
Applying code-based migration: 201304211813502_InitialMigration.
Applying automatic migration: 201304212024538_AutomaticMigration.
System.Data.SqlServerCe.SqlCeException (0x80004005): Cannot alter column of type NTEXT or IMAGE [ Column Name = Image ] 
```

所以看起来有些东西不同步。我运行“Add-Migration AutoMigration”来查看它所考虑的实体框架仍然需要更新......我得到的文件在这里：

```
public partial class AutoMigration: DbMigration
{
    public override void Up()
    {
        AlterColumn("dbo.Words", "Image", c => c.Binary());
        AlterColumn("dbo.Words", "Audio", c => c.Binary());
    }

    public override void Down()
    {
        AlterColumn("dbo.Words", "Audio", c => c.Binary(maxLength: 4000));
        AlterColumn("dbo.Words", "Image", c => c.Binary(maxLength: 4000));
    }
} 
```

所以......从这里看起来EF认为图像和音频字段是二进制（最大长度：4000）......但他们不应该是！（因为在初始迁移中它们是**Binary()**）。

所以我被卡住了，无法更新我的迁移......我需要 MaxLength（无限）二进制字段......

这里会发生什么？谢谢你！大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:24:41.713

我终于设法将项目升级到 EF 6.0.0 Alpha3 ...我必须修复很多小问题，并将 NuGet 升级到 2.5 RC。现在它可以工作了..不确定我做了什么，但很可能只是升级到 EF 6

# c - 在 C 中的 system() 上执行命令 - linux

> ID：16135891
> 
> 赞同：0
> 
> 时间：2013-04-21T20:31:18.390
> 
> 标签：c, linux, datetime, posix

我运行下面的代码，

```
int main() {
  char settime_parameters[13]= "042122142013";
  char command[25];
  sprintf(command, "date %s", settime_parameters );
  printf("%s\n",command);
  system("commad");
} 
```

我得到这个输出：

```
date 042122142013
sh: 1: commad: not found 
```

但是，如果我`date 042122142013`在终端上运行，它可以正常工作并更改系统时间。我想知道为什么当我通过 ? 执行它时它不起作用`system()`？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T20:32:51.773

你需要这个：

```
system(command); 
```

没有引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T20:33:24.127

```
system("commad"); 
```

应该

```
system(command); 
```

不带引号

# c# - WatIn 和 NUnit：找不到 RequiresSTA 程序集

> ID：16135893
> 
> 赞同：1
> 
> 时间：2013-04-21T20:31:36.310
> 
> 标签：c#, nunit, watin, .net-assembly

我很确定这个问题以前还没有解决过。

我将 [assembly: RequiresSTA] 添加到我的 C# 项目中的 AssemblyInfo.cs 文件中。但它不喜欢RequiresSTA这个词。

VS 状态“找不到类型或命名空间名称“RequriesSTA”（您是否缺少或使用指令或程序集引用？）”。

我引用的是 WatIn 2.1 和 NUnit 2.4.1。我添加了使用 nunit.framework 和 WatIn.core。

我的 C# 项目是输出类型“控制台应用程序”和目标框架“.Net Framework 4”

有什么建议么？谢谢你

# ruby-on-rails - 具有多个参数的 RSpec 和自定义匹配器

> ID：16135899
> 
> 赞同：6
> 
> 时间：2013-04-21T20:32:01.807
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec

我正在尝试使用 RSpec 为我在 RoR 中的测试创建一个自定义匹配器。

```
 define :be_accessible do |attributes|
    attributes = attributes.is_a?(Array) ? attributes : [attributes]
    attributes.each do |attribute|
      match do |response|
        response.class.accessible_attributes.include?(attribute)
      end
      description { "#{attribute} should be accessible" }
      failure_message_for_should { "#{attribute} should be accessible" }
      failure_message_for_should_not { "#{attribute} should not be accessible" }
    end
  end 
```

我希望能够在我的测试中编写如下内容：

```
...
should be_accessible(:name, :surname, :description)
... 
```

但是使用上面定义的匹配器，我**必须**传递一个符号数组而不是用逗号分隔的符号，否则测试只检查第一个符号。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T10:14:02.077

我让它这样工作：

```
RSpec::Matchers.define :be_accessible do |*attributes|
  match do |response|

    description { "#{attributes.inspect} be accessible" }

    attributes.each do |attribute|
      failure_message_for_should { "#{attribute} should be accessible" }
      failure_message_for_should_not { "#{attribute} should not be accessible" }

      break false unless response.class.accessible_attributes.include?(attribute)
    end
  end
end 
```

我倒转了`match`和`each`循环。我认为这是 Rspec 期望的方式，因为给`match`方法的块是由 Rspec 抽象匹配器执行的块（我猜）。

通过用 定义块`|*attributes|`，它获取参数列表并将其转换为`Array`.

所以调用`should be_accessible(:name, :surname, :description)`会起作用。

顺便说一句，如果你只是想检查属性是否存在，一个简单的

```
should respond_to(:name, :surname, :description) 
```

也可以。但它看起来不像质量分配方面。

# eclipse - 如何更改特定文件扩展名的 Eclipse 配色方案？

> ID：16135904
> 
> 赞同：7
> 
> 时间：2013-04-21T20:32:27.403
> 
> 标签：eclipse, color-scheme

我已经[*为 v8 安装了 Eclipse 调试器插件*](https://github.com/joyent/node/wiki/using-eclipse-as-node-applications-debugger)。
当从远程连接启动 Javascript 文件时，它具有`.chromium`扩展名。

![在此处输入图像描述](https://i.stack.imgur.com/LBFEb.png)

文件的实际配色方案`*.chromium`并不理想，但我无法弄清楚如何更改它。

我进入`Window > Preferences > General > Editors > File Associations`并将`*.chromium`文件关联从“ **JS Editor** ”更改为“ **JavaScript Editor** ”（用于`.js`文件编辑，并**具有我想要的配色方案**。）

![在此处输入图像描述](https://i.stack.imgur.com/6ODUi.png)

但是，进行此更改没有任何效果。

我安装了“Eclipse Color Theme”插件，并且正在使用在 Windows 7 上运行的 Eclipse 版本 4.2.1.M20120914-1800。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:20:51.107

一旦我右键单击其中一个 .chromium 文件并选择“打开方式-> JavaScript 编辑器”，该文件就会出现与 js 文件相同的编辑器。这样做一次必须在 eclipse 中修复一些问题，因为现在所有 .chromium 文件都使用另一个编辑器打开。

# java - 将上传的 HTML 文件的内容读取为 JAVA 中的字符串

> ID：16135915
> 
> 赞同：0
> 
> 时间：2013-04-21T20:33:31.053
> 
> 标签：java, servlets, jetty, multipartform-data

我需要使用 servlet 上传 HTML 文件并将其内容放在字符串中。请求来自多部分/表单数据。

我正在尝试使用`Part filepart = request.getPart("file")`，但这不起作用。我需要知道是否有任何方法可以在不使用 Apache Commons FileUploader 等第三方 API 的情况下实现这一目标。

# c# - 带有 2 个 dbml 文件的 linq to sql 查询

> ID：16135917
> 
> 赞同：0
> 
> 时间：2013-04-21T20:33:49.200
> 
> 标签：c#, asp.net-mvc, linq-to-sql

我有一个对象`MyFriendFollowStatus`，对于每个朋友，我需要来自 2 个不同数据库的信息，所以我写了这样的东西

```
db1Context FFdb = new db1Context();
db2Context EEdb = new db2Context();

foreach (fbFriendsFollowStatus a in fbids)
{
    long ffID = FFdb.FFUsers.Where(x => x.FacebookID == a.fbid).FirstOrDefault().FFUserID;
    a.ffID = ffID;
    int status = EEdb.StatusTable(x => x.ffID == ffid).FirstOrDefault().Status;
    a.Status = status;
} 
```

这可行，但调用 2 个数据库似乎并不正确——每个用户一次，LinqToSql 中是否有内置的东西可以帮助解决这样的问题？或者我可以使用 2 个不同的数据库使用某种类型的连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:38:43.727

好吧，您始终可以将`N+1`查询问题限制为 3 个查询 - 一个用于获取用户，一个用于从第一个数据库获取用户数据，另一个用于第二个数据库。然后将所有结果连接到内存中——这将限制与数据库的连接，从而提高应用程序的性能。

我不知道是否`linq-to-sql`或`entity framework`提供来自不同数据库的构建模型——这可能会带来一些性能问题——比如包含或其他东西，但我可能根本不知道这些功能。

执行您要实现的目标的示例代码如下所示：

```
var facebookIds = fbFriendsFollowStatus.Select(a => a.fbid);
var FFUserIds= FFdb.FFUsers.Where(x => facebookIds.Contains(x.FacebookID)).Select(x => new { x.FacebookID, x.FFUserId)
var statuses = EEdb.StatusTable.Where(x => FFUserIds.Contains(x.ffID)).Select(x => new { x.ffID, x.Status}) 
```

然后是一些简单的代码来匹配内存中的结果——但这很简单。请注意，此代码是示例 - 如果我不匹配某些 id 或其他内容，但想法应该很清楚。

# firebase - 使用 CodeMirror 在 Firepad 中渲染代码

> ID：16135923
> 
> 赞同：0
> 
> 时间：2013-04-21T20:34:29.933
> 
> 标签：firebase, firepad

我正在使用[FirePad](https://github.com/firebase/firepad/)为自己创建各种 IDE。我正在尝试做的是使用示例/中的 userlist.html 来呈现 JS 代码。这是在examples/code.html中完成的，我已经改变了：

```
var codeMirror = CodeMirror(document.getElementById('firepad'), { lineWrapping: true }); 
```

到

```
var codeMirror = CodeMirror(document.getElementById('firepad'), {
  lineNumbers: true,
  mode: 'javascript'
}); 
```

它确实显示了行号，但它没有突出显示 JS。

为了澄清，我在 examples/userlist.html 中进行了这些更改

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:36:58.427

您还需要包含 javascript 模式文件：

```
<script src="codemirror/mode/javascript/javascript.js"></script> 
```

# javascript - 访问父视图的属性

> ID：16135926
> 
> 赞同：0
> 
> 时间：2013-04-21T20:34:36.227
> 
> 标签：javascript, backbone.js, backbone-views

伙计们，我正在尝试从子视图访问主干视图的属性（不知道是否是正确的面额）。无论如何，这是一些代码：

```
App.Views.ViewEditGuest = Backbone.View.extend({
    el: '#main-content .container_12',
    totalPayments: 0,
    totalBought: 0,

    template: _.template( App.Templates.ViewEditGuest ),

    events: {
        'click #sell' : 'sell'
    },

    sell: Backbone.View.extend({
         el: '#consumos',
         template: _.template( App.Templates.VEGConsumos ),

         render: function(){
                 // I need to acces ViewEditGuest's totalPayments and
                 // totalBought
                 this.$el.html( this.template() );
                 return this;
          }
    }),

    render: function(){
          this.$el.html( this.template(  ) );
          return this;
    }
}); 
```

所以，我需要通过 sell 的 render 方法访问 ViewEditGuest 的 totalPayments 和 totalBought。我一直在寻找，但找不到任何解决方案。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:02:44.887

*正确*的方法是将数据存储在模型中，然后在两个视图中更新属性时监听事件。

但是要尽可能少地改变代码来回答这个问题，

```
sell: Backbone.View.extend({
    parentView: this,
    el: '#consumos',
    template: _.template( App.Templates.VEGConsumos ),
    render: function(){
        console.log( options.parentView.totalBought );
        this.$el.html( this.template() );
        return this;
      } 
```

# html - 换行不工作

> ID：16135930
> 
> 赞同：0
> 
> 时间：2013-04-21T20:35:08.183
> 
> 标签：html, css, ruby-on-rails

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:37:08.097

你正在发出 html - 你需要一个`<br>`在那里。请记住，您需要使用`html_safe`它才能逐字发出而不是转义。

# ruby-on-rails - 我在哪里需要 songkickr gem 文件？

> ID：16135933
> 
> 赞同：0
> 
> 时间：2013-04-21T20:35:18.630
> 
> 标签：ruby-on-rails, api, gem

我正在尝试在 rails 应用程序中使用 songkickr gem。我已经使用

```
gem install songkickr 
```

指令的下一步是：

```
require 'songkickr'
remote = Songkickr::Remote.new API_KEY 
```

我在哪里做这个？在什么文件里？

gem 的 github 页面是[https://github.com/jrmehle/songkickr](https://github.com/jrmehle/songkickr) 而我的 github 是[https://github.com/jeremybelcher/travel](https://github.com/jeremybelcher/travel)

对不起初学者的问题，试图倾斜这个。很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:38:53.270

在应用程序根目录的 gemfile 中，您需要添加该行

```
gem 'songkickr' 
```

然后运行

```
bundle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:58:56.043

添加`require 'songkickr'`到您的应用程序控制器

例子：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  require 'songkickr'
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T21:02:59.513

有几个地方可以将 ruby​​ 代码放入 Ruby on Rails 应用程序中，您应该只选择其中之一，这取决于对您的应用程序最有意义的地方。首先，您是否尝试将该代码放入您的一个控制器中？

在您的 Gemfile 中，添加：

```
gem 'songkickr' 
```

然后运行以下命令：`bundle`

在控制器的顶部放置：

```
require 'songkickr'
API_KEY = ""  # edit this line 
```

然后在某些操作中，您可以这样做来测试它：

```
remote = Songkickr::Remote.new API_KEY 
```

稍后您可能决定让“远程”对象在请求之间持续存在，然后您需要做一些更复杂的事情。

# java - 如何遍历 Java 中的子 TreeMap？

> ID：16135934
> 
> 赞同：0
> 
> 时间：2013-04-21T20:35:18.573
> 
> 标签：java, iteration, treemap

如何遍历子 TreeMap？

`for`Java 在第二个循环中给出了一个错误，在`_entry.getValue().entrySet()`，没有任何迹象表明我在我的代码中遇到的错误的性质。

```
for (Entry<Integer, TreeMap> _entry : propertiesList.entrySet()) {
    for (Entry<Integer, TreeMap> _rowEntry : _entry.getValue().entrySet()) {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:40:52.613

这是因为第一个 TreeMap 不是通用的 TreeMap。你应该有类似的东西：

```
TreeMap <Integer, TreeMap<Integer, TreeMap>> propertiesList = new TreeMap<Integer, TreeMap<Integer, TreeMap>> ();

for (Map.Entry<Integer, TreeMap<Integer, TreeMap>> _entry : propertiesList.entrySet()) {
    for (Map.Entry<Integer, TreeMap> _rowEntry : _entry.getValue().entrySet()) {

    }
} 
```

这将解决它。

# java - 启动时未找到 Spring MVC 资源

> ID：16135938
> 
> 赞同：0
> 
> 时间：2013-04-21T20:35:44.950
> 
> 标签：java, spring, spring-mvc

所以我知道有几十个类似的帖子，但不幸的是没有一个对我有帮助。我只是想启动并运行一个演示 Spring MVC 项目。我正在尝试运行 Heroku 提供的模板项目（[https://devcenter.heroku.com/articles/getting-started-with-heroku-eclipse](https://devcenter.heroku.com/articles/getting-started-with-heroku-eclipse)）。我尝试了许多设置组合都无济于事。以下是默认设置：

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
id="WebApp_ID" version="2.5">
<display-name>Spring-Hibernate-Template</display-name>

<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:applicationContext.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/people/*</url-pattern>
</servlet-mapping>
</web-app> 
```

应用程序上下文.xml：

```
<?xml  version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:jdbc="http://www.springframework.org/schema/jdbc"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                       http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc.xsd
                       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
                       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
                       http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd">

<context:annotation-config />
<context:component-scan base-package="com.example" />

<mvc:annotation-driven/>

<bean id="jspViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean>

<tx:annotation-driven />
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
    <property name="dataSource" ref="dataSource"/>

</bean>

<beans profile="default">
    <jdbc:embedded-database id="dataSource"/>        
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/>
        </property>
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
                <prop key="hibernate.hbm2ddl.auto">create</prop>
            </props>
        </property>
    </bean>
</beans>

<beans profile="prod">
    <bean class="java.net.URI" id="dbUrl">
        <constructor-arg value="#{systemEnvironment['DATABASE_URL']}"/>
    </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="url" value="#{ 'jdbc:postgresql://' + @dbUrl.getHost() + ':' + @dbUrl.getPort() + @dbUrl.getPath() }"/>
        <property name="username" value="#{ @dbUrl.getUserInfo().split(':')[0] }"/>
        <property name="password" value="#{ @dbUrl.getUserInfo().split(':')[1] }"/>
    </bean>

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/>
        </property>
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <!-- change this to 'verify' before running as a production app -->
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
    </bean>
</beans>

</beans> 
```

人控制器.java：

```
@Controller
public class PersonController {

    @Autowired
    private PersonService personService;

    @RequestMapping("/")
    public String listPeople(Map<String, Object> map) {

        map.put("person", new Person());
        map.put("peopleList", personService.listPeople());

        return "people";
    }

    @RequestMapping(value = "/add", method = RequestMethod.POST)
    public String addPerson(@ModelAttribute("person") Person person, BindingResult result) {

        personService.addPerson(person);

        return "redirect:/people/";
    }

    @RequestMapping("/delete/{personId}")
    public String deletePerson(@PathVariable("personId") Integer personId) {

        personService.removePerson(personId);

        return "redirect:/people/";
    }
} 
```

我在 webapp/WEB-INF/jsp/people/jsp 有一个“people.jsp”文件

我的 Tomcat 服务器的 server.xml 上下文元素如下所示：

```
<Context docBase="facultypublicationsdb" path="/facultypublicationsdb" reloadable="true" source="org.eclipse.jst.jee.server:facultypublicationsdb"/></Host> 
```

每次我在 ( `http://localhost:8080/facultypublicationsdb/`) 的 Tomcat 上运行它时，我都会得到以下信息：

```
HTTP Status 404 - /facultypublicationsdb/

type Status report

message /facultypublicationsdb/

description The requested resource (/facultypublicationsdb/) is not available.

Apache Tomcat/7.0.21 
```

我通过 Eclipse 在 Ubuntu 上运行它。我注意到没有 .war 被复制到`/usr/share/tomcat7/webapps`目录中。这应该发生吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:42:41.010

尝试检查两件事。

首先更改您的 web.xml 文件以将调度程序 servlet 映射到`/`. 这会导致在没有为请求找到其他映射而不是为每个请求找到其他映射时使用调度程序 servlet。如果您有 CSS 和 Javascript 等资源，这一点很重要。

```
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/people/*</url-pattern>
</servlet-mapping> 
```

接下来，如果使用 Eclipse，请打开您的项目属性（单击项目中的项目，资源管理器 Alt+Enter）。然后去部署组装。确保您的所有项目资源都包含在此处，尤其是任何 Maven 依赖项。如果您注意到缺少依赖项，请单击添加按钮并选择它们。

您可能还想确保您的控制器正在被组件扫描拾取。确保您的控制器在`com.example`包装中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:42:20.543

我认为您需要`method = RequestMethod.GET`在`listPeople`方法中指定。可能有许多小事情可能导致`404 error`。你能把这段代码上传到 GitHub 上，我会研究一下。

# javascript - 调用函数时显示加载图像

> ID：16135941
> 
> 赞同：2
> 
> 时间：2013-04-21T20:36:10.200
> 
> 标签：javascript, jquery

我试图在运行 javascript 函数时显示加载图像。它处理大量数字，在速度较慢的电脑上运行可能需要几秒钟。

我以为这行得通

```
function myFunction(){;
    $('#loading').show();
    // The bit that takes ages to run
    $('#loading').hide();
} 
```

然而，它并没有隐藏#loading div。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T20:40:03.127

不幸的是没有。由于 JavaScript 是单线程的，它在加载完成之前不会更新加载图像的可见性，此时您已经告诉它再次隐藏。

此外，即使它确实有效，动画 GIF 也不会出于同样的原因播放，它只会显示为冻结状态。

这里的最佳解决方案是使用 Web Workers，但是这些非常先进，并且只能在最新的浏览器中使用。

下一个最好的事情是按照以下方式做一些事情：

```
function myFunction() {
    $("#loading").show();
    setTimeout(function() {
        // long code here
        $("#loading").hide();
    },1); // give it a moment to redraw
} 
```

# php - 需要帮助使用 PHP 与服务器通信

> ID：16135942
> 
> 赞同：-3
> 
> 时间：2013-04-21T20:36:24.090
> 
> 标签：php

我正在尝试帮助客户允许用户将数据从他的网站填充到另一家公司的网站。拥有服务器的网站是 DialMyCalls，他们提供了一个 PHP 类来与他们的服务器通信。我无法使用它与他们进行实际交流，因为我不明白我需要编辑哪些字段。

我有 API 密钥和另一个代码片段来添加联系人，我想知道是否有人可以指导我完成使此代码正常工作需要做的事情。我在哪里放置代码的“添加联系人”部分以实际运行它并查看它是否填充在数据库中。我可以提供您可能需要的任何信息。

以下 PHP 类来自[API 提供者](http://www.dialmycalls.com/api-docs/quickstart.php)。

```
<?php
class RestRequest
{
protected $url;
protected $verb;
protected $requestBody;
protected $requestLength;
protected $apikey;
protected $acceptType;
var $responseBody;
protected $responseInfo;

public function __construct ($apikey = null) {

    $this->url              = null;
    $this->verb             = null;
    $this->requestBody      = null;
    $this->requestLength    = 0;
    $this->apikey           = $apikey;
    $this->acceptType       = 'application/json';
    $this->responseBody     = null;
    $this->responseInfo     = null;

}

public function flush ()
{
    $this->requestBody      = null;
    $this->requestLength        = 0;
    $this->verb             = 'POST';
    $this->responseBody     = null;
    $this->responseInfo     = null;
}

public function execute ($url = null, $verb = 'POST', $requestBody = null) {
    $ch = curl_init();
    $this->url              = "https://www.dialmycalls.com/api".$url;
    $this->verb             = $verb;
    $this->requestBody      = $requestBody;
    try
    {
        switch (strtoupper($this->verb))
        {
            case 'POST':
                $this->doExecute($ch);
                break;
            default:
                throw new InvalidArgumentException('Current verb (' . $this->verb . ') is an invalid REST verb.');
        }
    }
    catch (InvalidArgumentException $e)

    {           curl_close($ch);
        throw $e;
    }
    catch (Exception $e)
    {
        curl_close($ch);
        throw $e;
    }

}
protected function doExecute (&$curlHandle) {
    curl_setopt($curlHandle, CURLOPT_POST, 1);
    $this->requestBody["apikey"] = $this->apikey;
    curl_setopt($curlHandle, CURLOPT_POSTFIELDS, $this->requestBody);
//  curl_setopt($curlHandle, CURLOPT_TIMEOUT, 60);
    curl_setopt($curlHandle, CURLOPT_URL, $this->url);
    curl_setopt($curlHandle, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($curlHandle, CURLOPT_VERBOSE, 0);
    curl_setopt($curlHandle, CURLOPT_HTTPHEADER, array ('Accept: ' . $this->acceptType,'Expect:'));
    $this->responseBody = curl_exec($curlHandle);
    $this->responseInfo = curl_getinfo($curlHandle);
    curl_close($curlHandle);
}
}
?> 
```

PHP 添加联系人

```
for($i=1;$i<=5;$i++) {
$nums[] = array(
    "phone"=>"832201111".$i,
    "firstname"=>"just",
    "lastname"=>"testing",
);
}
$request->execute(
"/1-0/AddContact/",'POST',
array("names"=>json_encode($nums))
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:49:58.763

这是一个相当广泛的问题，但首先想到的是这个文件是一个*库类*，因此不应该被编辑。您应该在自己的代码中包含该文件并实例化一个对象。

因此，下载一个新副本，并将其提交到项目根目录中合适文件夹中的版本控制。然后，在您自己的代码中，执行以下操作：

```
$rest = new RestRequest('yourkey'); 
```

从这里，您可以使用文档来完成这项工作。对 HTTP 和 REST 接口的理解在这里将非常宝贵，因此可能值得先阅读。看起来第二段代码（“添加联系人”）可能有效 - 使用您的密钥尝试，并使用`print_r`.

所以，试试这个在你的列表中添加一个联系人：

```
for($i=1;$i<=5;$i++) {
    $nums[] = array(
        "phone"=>"832201111".$i,
        "firstname"=>"just",
        "lastname"=>"testing",
    );
}

$request->execute(
    "/1-0/AddContact/",
    'POST',
    array("names"=>json_encode($nums))
); 
```

然后，您可以检查输出：

```
echo '<pre>' . print_r($request->responseBody, true) . '</pre>; 
```

不幸的是，[文档没有详细说明返回参数](http://www.dialmycalls.com/api-docs/addcontact)，因此您可能必须使用反复试验来确定调用是否成功 - 希望它*实际上*是返回的！正如我之前提到的，远程服务似乎不尊重 REST 的基本原则——如果你愿意，你可以问他们为什么只读操作不使用`GET`，保存不使用`PUT`（他们提供的类抛出一个如果您不使用，则例外`POST`）。

您应该请求一个新密钥，因为您似乎已经发布了您现有的密钥，这应该是秘密信息。使用此密钥，其他人可以使用授予您帐户的权限发帖，通常您不希望这种情况发生。

# cygwin - 有 GNU make 的 Cygwin 版本吗？

> ID：16135945
> 
> 赞同：15
> 
> 时间：2013-04-21T20:36:34.047
> 
> 标签：cygwin, gnu-make

*Android的*NDK 需要[Cygwin](http://www.cygwin.com/install.html)**和** [GNU Make](http://www.gnu.org/software/make/)。由于我已经安装了最新最好的 Cygwin，我认为 GNU Make 一定已经包含在其中，因为 Cygwin 非常面向开发人员。

 *但是我在本地安装和包列表中都找不到任何东西，这让我很好奇为什么在所有 GNU 包中，这是 Cygwin 选择不包括在内的一个。

或者也许是这样[的 Cygwin 版本的 GNU make](https://stackoverflow.com/q/1085018)而我只是找不到它？

如果是这样，我在哪里/如何下载它？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-21T20:40:34.730

`make`软件包是 GNU make

[`cygwin.com/packages/make`](http://cygwin.com/packages/make)

```
The GNU version of the 'make' utility 
```

请务必从**Internet**安装，而不是从“本地目录”安装：

![在此处输入图像描述](https://i.stack.imgur.com/WgJjW.png)*

# javascript - 显示/隐藏 Divs 多个单选按钮 JQuery

> ID：16135946
> 
> 赞同：0
> 
> 时间：2013-04-21T20:36:35.990
> 
> 标签：javascript, jquery, radio-button

我正在帮助我的朋友 Michaela 参加我们的网页设计课程。她做了 HTML，我只更改了几行并添加了一些 div。她希望这样，如果用户单击单选按钮，则会显示相应的 div。她表单的所有 div 一开始都隐藏在“hidden_​​destiny”类中。-- 这将是一系列嵌套的 div，我可能需要稍后更改布局。

这是[JsFiddle](http://jsfiddle.net/TuCQa/4/)。这是我的javascript：

```
if ($('#radio_starwars').is(':checked')){
    $('#clicked_starwars').hide().slideDown('slow');
    $('.hidden_destiny').not('#clicked_starwars').hide().slideUp('slow');
}
else if ($('#radio_avengers').attr('checked', 'true')){}
else if ($('#radio_batman').attr('checked', 'true')){}
else if ($('#radio_xmen').attr('checked', 'true')){}
else if ($('#radio_harryp').attr('checked', 'true')){}
else if ($('#radio_lotr').attr('checked', 'true')){} 
```

[编辑] 更新代码。将 id 标识符添加到代码并更新 JsFiddle 链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T20:48:17.053

试试这个代码：

```
$(":radio").change(function(){
  $(".hidden_destiny").hide()//hide divs
  $("#clicked_"+this.id.replace("radio_","")).show()//show div by radio id
}) 
```

[http://jsfiddle.net/YZ9fh/](http://jsfiddle.net/YZ9fh/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T20:51:51.890

```
$('.fate').click(function () {
    $('.hidden_destiny').each(function () {
        if ($(this).is(':visible')) {
            $(this).slideUp('slow');
        }
    });
    var id = $(this).val();
    $('#clicked_' + id).slideDown('slow');
}); 
```

[jsfiddle](http://jsfiddle.net/arcm111/pLqmS/)

# python - 在记事本++中执行python脚本的问题

> ID：16135947
> 
> 赞同：1
> 
> 时间：2013-04-21T20:37:03.503
> 
> 标签：python, notepad++

我的 python 脚本中加载了一些图像。

他们居住在`c:\Python27\subfolder\images\`

在我的 .py 文件中（位于`c:\Python27\subfolder\`）

我加载它们`./images/file.jpg`

它在 IDLE 中工作得很好

但是，当我通过记事本++运行文件时，出现错误：

> 加载文件失败`./images/file.jpg`

如何在不必更改我的实际 python 代码的情况下解决这个问题？（如果我使用完整路径加载图像，它可以工作，但我不想这样做）。

`C:\Python27\python.exe "$(FULL_CURRENT_PATH)`我在记事本++中使用运行命令

非常感谢您！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:46:08.337

为了帮助您解决问题，您应该这样做

```
import os
print os.getcwd() #gets the current working directory 
```

您的问题很可能是在 IDE 中，您的 CWD 与从控制台运行它时不同。

如果您希望它像在 IDE 中那样工作，您应该首先通过导航（os.chdir(...) 命令）让自己（控制台）进入该目录。

您还可以创建一个批处理/bash 文件，从您需要的目录中运行 python 脚本，并从您想要的任何地方调用该文件（它仍然会使用您提供的路径调用 python 脚本

# python - 使用 Beautiful Soup 保存实体进行刮擦

> ID：16135951
> 
> 赞同：9
> 
> 时间：2013-04-21T20:37:13.673
> 
> 标签：python, web-scraping, beautifulsoup, html-parsing, html-entities

我想从网上刮一张桌子并保留   实体完整，以便我以后可以重新发布为 HTML。BeautifulSoup 似乎正在将这些转换为空格。例子：

```
from bs4 import BeautifulSoup

html = "<html><body><table><tr>"
html += "<td>&nbsp;hello&nbsp;</td>"
html += "</tr></table></body></html>"

soup = BeautifulSoup(html)
table = soup.find_all('table')[0]
row = table.find_all('tr')[0]
cell = row.find_all('td')[0]

print cell 
```

观察结果：

```
<td> hello </td> 
```

要求的结果：

```
<td>&nbsp;hello&nbsp;</td> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-21T21:04:16.197

`convertEntities`不再支持 BeautifulSoup 构造函数的bs4参数。HTML 实体总是被转换成相应的 Unicode 字符（参见[docs](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#entities)）。

根据文档，您需要使用输出格式化程序，如下所示：

```
print soup.find_all('td')[0].prettify(formatter="html") 
```

# ruby-on-rails - Rails 表单选择必填

> ID：16135954
> 
> 赞同：19
> 
> 时间：2013-04-21T20:37:28.507
> 
> 标签：ruby-on-rails

我正在尝试`<select>`在我的 Rails 表单中添加一个。

这是我的代码（省略号是为了缩短行）：

```
<div class="field">
  <p><%= f.label :category, "Category:" %></p>
  <%= f.select :category, ['Analytics','Commerce',..., 'Web'], :prompt => '-- Select One --', :required => true %>
</div> 
```

哪个输出

```
<div class="field">
  <p><label for="startup_category">Category:</label></p>
  <select id="startup_category" name="startup[category]">
    <option value="">-- Select One --</option>
    <option value="Analytics">Analytics</option>
    <option value="Commerce">Commerce</option>
    <option value="Content Management">Content Management</option>
    <option value="Gaming">Gaming</option>
    <option value="Green">Green</option>
    <option value="Media">Media</option>
    <option value="Social Media">Social Media</option>
    <option value="Technology - Software">Technology - Software</option>
    <option value="Technology - Hardware">Technology - Hardware</option>
    <option value="Web">Web</option></select>
</div> 
```

放置`{:required => true}`而不是`:required => true`给出语法错误并`{:prompt => '-- Select One --', :required => true}`呈现页面，但`required="true"`在我的选择标记中没有。

我怎样才能进入`required="true"`我的标签？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-22T05:51:12.843

试试这个....

```
f.select :category, ['Analytics','Commerce',..., 'Web'], { :include_blank => '-- Select One --' }, :required => true 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-09T09:48:21.303

对于**Rails 4**

```
 f.select :category,
      ['Analytics','Commerce',..., 'Web'],
      {
        include_blank: '-- Select One --' ,
        required: true
      } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T21:37:24.060

我不确定它是否能实现你想要的，但我有两个解决方案给你。您可以使用 simpleform gem。

或者

样式它：

```
<label class="required">Category</label> 
```

在 css 中：

```
label.required:after{content:"*"} 
```

# c++ - 生产者-消费者问题

> ID：16135958
> 
> 赞同：0
> 
> 时间：2013-04-21T20:37:50.577
> 
> 标签：c++, linux, pthreads, producer-consumer

嗨，我正在尝试编写一种算法来解决生产者-消费者问题，但遇到了障碍。这是我从代码中得到的输出：

生产：6 6 0 0 0 0 0 0 0 0 0 END

然后程序退出。我不确定我哪里出错了？我在创建循环缓冲区时做错了吗？

```
#include <iostream>
#include <pthread.h>
#include <semaphore.h>
#include <pthread.h>
#include <stdlib.h> 
#include <stdio.h>
#include <string>
#include <fstream>
using namespace std;

#define BUFFER_SIZE 10

void *produce(void *);
void *consume(void *);
int produceItem(void);
void insertItem(int item);
void removeItem(void);
void printBuffer(void);

int head = 0;
int tail = 0;
int item;
int bufferCount = 0;
pthread_t producer, consumer;
pthread_cond_t Buffer_Not_Full=PTHREAD_COND_INITIALIZER;
pthread_cond_t Buffer_Not_Empty=PTHREAD_COND_INITIALIZER;
pthread_mutex_t lock;
sem_t sem_filledSlots;
sem_t sem_emptySlots;
int buffer[BUFFER_SIZE];

int main() {

    int emptyCount;
    int item;
    srand (time(NULL));

    sem_init(&sem_filledSlots, 0, 0);
    sem_init(&sem_emptySlots, 0, BUFFER_SIZE);

    sem_getvalue(&sem_emptySlots, &emptyCount);

    pthread_create (&producer, NULL, &produce, NULL);
    pthread_create (&consumer, NULL, &consume, NULL);

    return 0;
}

void *produce(void *)
{

    for(int i = 0; i <15; i++)
    {
        item = produceItem();
        sem_wait(&sem_emptySlots);
        pthread_mutex_lock(&lock);
        printf("Producing: %d \n", item);
        buffer[head] = item;
        head = (head + 1) % BUFFER_SIZE;
        printBuffer();
        pthread_mutex_unlock(&lock);
        sem_post(&sem_filledSlots);
    }
}

void *consume(void *)
{
    for(int i = 0; i <15; i++)
    {
        sem_wait(&sem_filledSlots);
        pthread_mutex_lock(&lock);
        printf("Consuming %d \n", buffer[tail]); 
        buffer[tail] = 0;
        tail = (tail + 1) % BUFFER_SIZE;
        bufferCount--;
        printBuffer();
        pthread_mutex_unlock(&lock); 
        sem_post(&sem_emptySlots);
    }
}

int produceItem(void)
{

    int x = (rand()%11 + 1);
    return x;
}

void printBuffer(void)
{

    for(int i = 0; i <BUFFER_SIZE; i++)
    {

        printf("%d ", buffer[i]);

    }
    printf("END \n");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:39:16.580

您在退出程序之前缺少 pthread_join ：

.... pthread_join（生产者，NULL）；pthread_join（消费者，NULL）；返回0；……

# c++ - 使用坐标和 time_t 的时钟程序

> ID：16135964
> 
> 赞同：0
> 
> 时间：2013-04-21T20:38:19.400
> 
> 标签：c++, c

我正在尝试创建模拟时钟的 c++ 程序。它应该显示日期/时间并不断更新。我找到了一种让这一切完美运行的方法，但我想了解代码。我对编程非常陌生，理想情况下希望了解每一行。

我知道这行代码为将光标移回屏幕上的指定点奠定了基础——在我的程序中，它用于返回到“开始”和“重叠”之前显示的内容。

```
void gotoxy (int x, int y)
{
    COORD coord; // coordinates
    coord.X = x; coord.Y = y; // X and Y coordinates
    SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), coord);
} 
```

有人可以向我解释一下坐标吗？我不明白括号中的内容背后的原因。

在 main() 我有这个代码：

```
time_t now;
    while (true)
    {
        gotoxy (0,0);
        now = time(0);
        cout << "The time is now: " << ctime(&now);
        Sleep (20);
    }
    cin.get ();
    return EXIT_SUCCESS; 
```

我认为这`time_t`是 C/C++ 的一个函数，它显示自 1970 年 1 月 1 日以来经过的时间。我不明白它是如何输出我当前时间的。

我试图注释掉一些代码，看看出了什么问题，试图弄清楚整个事情是如何工作的，但没有运气。我还在互联网上搜索了几个小时，逐行搜索，看看我是否可以对此有所了解。我已经到了最后的手段，只是要求任何人帮助我理解这段代码中发生了什么。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:43:16.653

`I thought that time_t is a function of C/C++ that shows the elapsed time since Jan 1, 1970.`

`time_t`是一个不是函数，它是`arithmetic type capable of representing times`。请参阅此处了解更多信息：[http](http://en.cppreference.com/w/cpp/chrono/c/time_t) ://en.cppreference.com/w/cpp/chrono/c/time_t ，

```
now = time(0); 
```

返回编码为 std::time_t 对象的当前日历时间。有关更多信息，请参见此处： http: [//en.cppreference.com/w/cpp/chrono/c/time](http://en.cppreference.com/w/cpp/chrono/c/time)， time(0) 表示时间`now`。

```
ctime(&now); //transform time now in human readable format 
```

将`time_t`值转换为字符串 将 timer 指向的值解释为日历时间，并将其转换为包含对应时间和日期的人类可读版本的 C 字符串，以本地时间表示。返回的字符串具有以下格式：

```
Www Mmm dd hh:mm:ss yyyy 
```

这里有更多关于 ctime 的信息：[http ://www.cplusplus.com/reference/ctime/ctime/](http://www.cplusplus.com/reference/ctime/ctime/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:44:05.767

坐标只是终端中的字符位置。`(0,0)`可能意味着回到第一个字符。这样做时，输出将覆盖控制台中的字符，从而产生“更新”时间的错觉。

至于时间功能，你可以在[这里阅读 ctime](http://www.cplusplus.com/reference/ctime/ctime/?kw=ctime)的文档。它返回人类可读的日期格式，而不是计数器。

代码的哪一部分不清楚？

这是一个简单的无限循环（`cin.get ();`永远不会到达，程序永远不会返回 btw）。在循环内部，光标回到行首，打印时间并等待 20 秒重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T20:44:44.873

要告诉[`SetConsoleCursorPosition`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686025%28v=vs.85%29.aspx)您必须使用的目标 (x, y)[`COORD`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682119%28v=vs.85%29.aspx)

> 定义控制台屏幕缓冲区中字符单元格的坐标。坐标系 (0,0) 的原点位于缓冲区的左上角单元格。

要检索时间，您可以使用 type[`time_t`](http://en.cppreference.com/w/cpp/chrono/c/time_t)和 function [`time`](http://en.cppreference.com/w/cpp/chrono/c/time)：

> `time_t`- 这几乎总是一个整数值，保存自 1970 年 1 月 1 日 00:00 UTC 以来的秒数

# java - 部署到服务器时禁止图像获取 403

> ID：16135965
> 
> 赞同：1
> 
> 时间：2013-04-21T20:38:24.630
> 
> 标签：java, javascript, html, spring-mvc, tomcat7

背景：我正在使用 Spring Web MVC 以及 JSP 和 HTML/JavaScript 来编写一个网站。我添加了一个搜索功能，它向 imdbapi.org 发送查询并接收包含电影/电视节目信息的 JSON 对象（通过 AJAX）。JSON 对象包含每个结果的“海报”字段，它是图像的 URL（在 imdb 服务器上）。然后使用 jQuery 显示结果并显示海报（如果可用）。

```
someDiv.append($("<img src='"+results[i].poster+"'></img'").addClass("resultImg")); 
```

问题：在 STS 内置服务器上运行并在本地访问时，这绝对可以正常工作，例如。

```
http://localhost:8080/myWebPage.whatever 
```

我有一个安装了 Tomcat 7 的 ubuntu 服务器盒，在部署到服务器时，每个图像都会出现 403 错误。来自 chrome 控制台的示例：

```
GET http://ia.media-imdb.com/images/M/MV5BMTY2NDY4NDA0OV5BMl5BanBnXkFtZTcwNTI4MzUyMQ@@._V1._SY317_CR5,0,214,317_.jpg 403 (Forbidden) 
```

更多信息：已在 chrome 和 firefox 中进行了测试，结果相同。如果我无法修复，那么一种解决方案是下载到我认为服务器上的临时文件夹......

这是我的 Tomcat 服务器上的配置问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:56:16.803

*这是我的 Tomcat 服务器上的配置问题吗？*

不，一点也不，您的服务器配置与外部资源可访问性无关，如果您得到`@._V1._SY317_CR5,0,214,317_.jpg 403 (Forbidden)`- 这显然意味着服务器拒绝您的请求。

似乎很多人对 IMDB 有这类问题 -[看到这个](http://imdbapi.betaeasy.com/thread/18147)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:45:38.240

我已经“使它工作”，它不是问题的直接解决方案，而是一种解决方法。在我的服务器上使用本地代理我将图像下载到java中的内存中，然后返回到网页......

Java（服务器端）

```
@RequestMapping(value="/pages/proxyImg")
public ResponseEntity<byte[]> proxyImage(String url) {
    log.info("Image Proxy server: " + url);
    try {
        final HttpHeaders headers = new HttpHeaders();
        headers.setContentType(MediaType.IMAGE_JPEG);
        return new ResponseEntity<byte[]>(IOUtils.toByteArray(new URL(url).openConnection().getInputStream()), headers, HttpStatus.CREATED);
    } catch(Exception e) {
        e.printStackTrace();
        return null;
    }
} 
```

Javascript

```
someDiv.append($("<img src='"+"proxyImg.htm?url="+results[i].poster+"'></img'")); 
```

# c# - 将 IEnumerable<> 列表从视图返回到部分视图

> ID：16135969
> 
> 赞同：0
> 
> 时间：2013-04-21T20:38:36.230
> 
> 标签：c#, razor, asp.net-mvc-4, ienumerable, partial-views

我有一个正在为膳食计划员工作的项目。我有一个简单的产品模型和一个应该是产品集合的膳食模型。

我正在尝试创建一个“创建”视图，我可以在其中输入餐点的名称，并且我认为我会返回一个部分视图，其中包含可供选择的产品列表。

我知道您可以使用将模型发送到局部视图

```
@Html.Partial("_ProductList", new MealPlanner.Models.Product()) 
```

我的 PartialView 需要一个

```
@model IEnumerable<MealPlanner.Models.Product> 
```

这显然会引发错误，那么我如何将产品列表传递给我的部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T21:12:05.543

好的，所以@scartag 让我走上了正确的轨道，但我开始查看 ViewModels 并想出了以下内容......

```
public class ViewModelProducts
{
    public Meal Meal { get; set; }
    public virtual IEnumerable<Product> Products { get; set; }
} 
```

这允许我传入创建视图所需的所有内容，然后我可以将产品列表发送到部分，如下所示...

```
@Html.Partial("_ProductList", Model.Products) 
```

然后我所要做的就是自定义我的局部视图。感谢您的快速依赖！

# c# - 在 C# 中无法正确格式化年份

> ID：16135975
> 
> 赞同：0
> 
> 时间：2013-04-21T20:39:46.813
> 
> 标签：c#, datetime-format

我有一个函数，我从多个源中提取值并将它们放在一个 txt 文件中。我需要将年份格式化为 yy。我尝试了多种想法，但似乎仍然无法弄清楚。以下是我目前正在做的事情。它按照我想要的方式放置小时分钟日期和月份。出于某种原因，我似乎无法正确格式化年份。它目前是 2013 年发布的，而不是 13 年。

```
DateTime dt = System.DateTime.Now;
string format = dt.Year.ToString("yy"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T20:42:16.630

`dt.Year`是一个整数值。要使用`DateTime`格式字符串，您应该只使用：

```
dt.ToString("yy") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T20:42:54.227

问题是您直接在 Year 上使用格式字符串，唉，Year 是一个 int - int 对日期格式一无所知。相反，尝试

```
DateTime.Now.ToString("yy") 
```

DateTime.now 只是一个示例 DateTime。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T20:43:01.017

你可以试试这个

```
 DateTime dt = System.DateTime.Now;
 string format = dt.ToString("yy"); 
```

所以在这里你可以传递任何`format`你想要的`DateTime`值。

# python - 正则表达式字典【谷歌类型搜索和正则表达式匹配】

> ID：16135978
> 
> 赞同：2
> 
> 时间：2013-04-21T20:40:05.047
> 
> 标签：python, regex, search, dictionary, full-text-search

***编辑：***下面代码的主要问题之一是由于将正则表达式对象存储在字典中，以及如何访问它们以查看它们是否可以匹配另一个字符串。但我仍然会留下我之前的问题，因为我认为可能有一种简单的方法可以完成所有这些工作。

我想在 python 中找到一个方法，它知道如何返回两个字符串是否引用同一事物的布尔值。我知道这很困难，如果在编程中不是完全荒谬的话，但我正在研究使用引用同一事物的替代字符串字典来处理这个问题。

这里有一些例子，因为我知道没有它们就没有多大意义。

如果我给出字符串：

`'breakingBad.Season+01 Episode..02'`

然后我希望它匹配字符串：

`'Breaking Bad S01E02'`

或者`'three.BuCkets+of H2O'`可以匹配`'3 buckets of water'`

我知道对于等同义词而言这几乎是不可能的`'3'`，`'water'`但如果需要，我愿意将这些作为相关正则表达式同义词的字典提供给该函数。

我有一种感觉，在 python 中有一种*更*简单的方法可以做到这一点，就像往常一样，但这是我到目前为止所拥有的：

```
import re

def check_if_match(given_string, string_to_match, alternative_dictionary):
    print 'matching: ', given_string, '  against: ', string_to_match
    # split the string into it's parts with pretty much any special character 
    list_of_given_strings = re.split(' |\+|\.|;|,|\*|\n', given_string)
    print 'List of words retrieved from given string: '
    print list_of_given_strings
    check = False
    counter = 0
    for i in range(len(list_of_given_strings)):
        m = re.search(list_of_given_strings[i], string_to_match, re.IGNORECASE)
        m_alt = None
        try:
            m_alt = re.search(alternative_dictionary[list_of_given_strings[i]], string_to_match, re.IGNORECASE)
        except KeyError:
            pass
        if m or m_alt:
            if counter == len(list_of_given_strings)-1: check = True
            else: counter += 1
            print list_of_given_strings[i], ' found to match'
        else:
            print list_of_given_strings[i], ' did not match'
            break
    return check

string1 = 'breaking Bad.Season+01 Episode..02'
other_string_to_check = 'Breaking.Bad.S01+E01'
# make a dictionary of synonyms -  here we should be saying that "S01" is equivalent to "Season 01"
alternative_dict = {re.compile(r'S[0-9]',flags=re.IGNORECASE):re.compile(r'Season [0-9]',flags=re.IGNORECASE),\
                    re.compile(r'E[0-9]',flags=re.IGNORECASE):re.compile(r'Episode [0-9]',flags=re.IGNORECASE)}
print check_if_match(string1, other_string_to_check, alternative_dict)
print 
# another try
string2 = 'three.BuCkets+of H2O'
other_string_to_check2 = '3 buckets of water'
alternative_dict2 = {'H2O':'water', 'three':'3'}
print check_if_match(string2, other_string_to_check2, alternative_dict2) 
```

这将返回：

```
matching:  breaking Bad.Season+01 Episode..02   against:  Breaking.Bad.S01+E01
List of words retrieved from given string: 
['breaking', 'Bad', 'Season', '01', 'Episode', '', '02']
breaking  found to match
Bad  found to match
Season  did not match
False

matching:  three.BuCkets+of H2O   against:  3 buckets of water
List of words retrieved from given string: 
['three', 'BuCkets', 'of', 'H2O']
three  found to match
BuCkets  found to match
of  found to match
H2O  found to match
True 
```

我意识到这可能意味着我的字典键和值有问题，但我觉得我离一个可能已经创建的简单 pythonic 解决方案越来越远了。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:58:55.110

我正在修补它并发现了一些有趣的东西：

*   这可能与您将初始单词分解为列表的方式有关

    ```
    matching:  breaking Bad.Season 1.Episode.1   against:  Breaking.Bad.S1+E1
    List of words retrieved from given string:
    ['breaking', 'Bad', 'Season', '1', 'Episode', '1'] 
    ```

*   我认为您希望它`..., 'Season 1', ...`不是列表中`'Season'`的`1`单独条目。

*   您指定`S[0-9]`，但这不会匹配两位数。

*   您的常规表达式存储在字典中是正确的；映射仅适用于一个方向。`r'Season [0-9]'`我通过映射来摆弄代码（不幸的是不记得它是什么）`r'S[0-9]'`而不是反之亦然，它能够匹配`Season`.

### 建议

*   不是映射，而是为每个字符串类型（例如标题、季节、剧集）设置一个等价类，并为此设置一些匹配器代码。
*   分离解析和比较步骤。将每个字符串单独解析为通用格式或对象，然后进行比较
*   您可能需要实现某种状态机才能知道您正在处理一个季节，并希望在它之后立即看到一个特定格式的数字。
*   您可能想改用第三方工具；我听说过关于[Renamer的好消息](http://www.den4b.com/?x=products&product=renamer)

# kendo-ui - 网格可分页更改字体

> ID：16135980
> 
> 赞同：0
> 
> 时间：2013-04-21T20:40:13.967
> 
> 标签：kendo-ui, kendo-grid

我有一个包含以下代码的**剑道网格。**如何更改消息的字体和字体大小？

```
pageable: {
  buttonCount: 10,
  messages: {
    display: "{0}-{1} of {2} Stations",
    empty: "",
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:00:39.363

将消息定义为：

```
display: "<span class='ob-my-style'>{0}-{1} of {2} Stations</span>", 
```

其中`ob-toto`包含样式定义：

```
.ob-my-style {
    font-family: "Verdana", sans-serif;
    font-size: 2em;
} 
```

或者，您可以定义：

```
.k-pager-info.k-label {
    font-family: "Verdana", sans-serif;
    font-size: 2em;
} 
```

# javascript - 在 iFrame 中使用 iFrame 本地脚本需要 `top` 或 `parent`？

> ID：16135982
> 
> 赞同：0
> 
> 时间：2013-04-21T20:40:25.863
> 
> 标签：javascript, html, iframe

正如标题所暗示的那样，有谁知道如何消除对iFrame 本地化脚本的需求`top`？`parent`

`top or parent`在下面的屏幕截图中，除非我在函数调用中添加前缀，否则我会收到“未定义”错误。

`test();`不工作

`top.test();`工作正常

![在此处输入图像描述](https://i.stack.imgur.com/MOg1e.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:22:09.020

您的代码的不同部分必须有一些您没有在此处发布的错误（实际上您没有发布任何代码，只是 DOM 检查器的无意义屏幕截图......）。`top`如果没有and ，这应该可以正常工作`parent`。

# android - 活动中的全屏背景图像

> ID：16135984
> 
> 赞同：156
> 
> 时间：2013-04-21T20:40:36.550
> 
> 标签：android, background, imageview, android-framelayout

我看到许多使用全屏图像作为背景的应用程序。这是一个例子：

![全屏背景图片](https://i.stack.imgur.com/j1qzY.jpg)

我想在项目中使用它，到目前为止我发现的最佳方法是使用大尺寸的图像，将其放入 a`ImageView`并用于`android: adjustViewBounds="true"`调整边距

问题是，如果屏幕分辨率非常高，图像就会不足。

我想到的另一种选择是使用 a 中的图像`FrameLayout`，其中`match_parent`in`width`和`height`作为背景...这会拉伸图像，但我认为结果不是很好。

你会怎么做？

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2013-04-22T03:39:54.183

有几种方法可以做到这一点。

**选项1：**

为不同的dpi创建不同的完美图像并将它们放置在相关的drawable文件夹中。然后设置

`android:background="@drawable/your_image"`

**选项 2：**

添加单个大图像。使用框架布局。作为第一个孩子添加一个`ImageView`. 在 ImageView 中设置以下内容。

```
android:src="@drawable/your_image"
android:scaleType = "centerCrop" 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-08-09T13:43:07.393

另一种选择是在可绘制对象中添加单个图像（不一定很大）（让我们将其命名为 backgroung.jpg），在没有“src”属性的 xml 的根目录中创建一个 ImageView iv_background。然后在对应activity的onCreate方法中：

```
 /* create a full screen window */
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.your_activity);

    /* adapt the image to the size of the display */
    Display display = getWindowManager().getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    Bitmap bmp = Bitmap.createScaledBitmap(BitmapFactory.decodeResource(
      getResources(),R.drawable.background),size.x,size.y,true);

    /* fill the background ImageView with the resized image */
    ImageView iv_background = (ImageView) findViewById(R.id.iv_background);
    iv_background.setImageBitmap(bmp); 
```

没有裁剪，没有很多不同大小的图像。希望能帮助到你！

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-04-22T06:16:02.783

您应该将各种尺寸的图像放入以下文件夹

有关更多详细信息，请访问此[链接](http://developer.android.com/guide/practices/screens_support.html#testing)

*   低密度脂蛋白

*   mdpi

*   hdpi

*   xhdpi

*   xxhdpi

并使用 RelativeLayout 或 LinearLayout 背景，而不是使用 ImageView 作为以下示例

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical"
 android:background="@drawable/your_image">

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-07-01T01:13:17.483

自从发布以来已经有一段时间了，但这对我有所帮助。

您可以使用嵌套布局。从RelativeLayout 开始，然后将您的ImageView 放在其中。

将高度和宽度设置为 match_parent 以填充屏幕。

设置 scaleType="centreCrop" 使图像适合屏幕并且不会拉伸。

然后，您可以像往常一样放入任何其他布局，例如下面的 LinearLayout。

您可以使用 android:alpha 设置图像的透明度。

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

  <ImageView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:scaleType="centerCrop"
    android:src="@drawable/image"
    android:alpha="0.6"/>

  <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity">

      <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello"/>

      <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="There"/>

   </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-11-12T13:46:39.610

用这个

```
android:background="@drawable/your_image" 
```

在您的活动中，第一个线性或相对布局。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-04-21T20:54:57.537

关于什么

`android:background="@drawable/your_image"`

在您的活动的主要布局上？

这样，您还可以通过将它们放在适当的`res/drawable-**dpi`文件夹中来获得不同屏幕密度的不同图像。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-09-01T10:45:13.797

如果您希望图像在透明操作栏后面显示，请将以下内容放入主题的样式定义中：

```
<item name="android:windowActionBarOverlay">true</item> 
```

享受！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-22T04:29:56.143

根据 NoToast 的答案，您需要在 res/drawable-ldpi、mdpi、hdpi、x-hdpi 中包含多个版本的“your_image”（对于超大屏幕），**删除 match_parent**并保留**android:adjustViewBounds="真的”**

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-05-01T13:19:51.290

`android:background="@drawable/your_image"`在您的 Relativelayout/Linearlayout 中添加工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-03T17:54:10.450

如果您将 bg.png 作为背景图像，那么只需：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/bg"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world"/>
</RelativeLayout> 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-10-15T04:53:24.033

在职的。你应该试试这个：

```
android:src="@drawable/img" 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-08-09T13:23:20.773

**`three step for put background`**

1）你应该选择你喜欢的图片。例如：[在此处输入图像描述](https://i.stack.imgur.com/u3jVn.jpg)

2）然后你把这张图片复制到drawable中。警告：您应该选择名称图片的缩写类型。

[在此处输入图像描述](https://i.stack.imgur.com/mzKAC.jpg)

3）你去页面 xml Intented 并写：

android:background="id picture" 例如我的图片 id 是@drawable/download。

[在此处输入图像描述](https://i.stack.imgur.com/tF38Q.jpg)

结束。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2018-06-22T18:05:41.837

**最简单的方法：**

第 1 步：打开 AndroidManifest.xml 文件

[你可以在这里看到文件！](https://i.stack.imgur.com/VFXfa.png)

第 2 步：定位`android:theme="@style/AppTheme" >`

第 3 步：更改为`android:theme="@style/Theme.AppCompat.NoActionBar" >`

第 4 步：然后添加 ImageView & Image

第4步：就是这样！

# mysql - error on drop default database error

> ID：16135987
> 
> 赞同：-1
> 
> 时间：2013-04-21T20:41:11.657
> 
> 标签：mysql

I created a database named "default" in MySQL, but I am not able to drop it through MySQL shell:

```
mysql> drop database default;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'default' at line 1 
```

Also, I am not able to grant to a particular user I created with this database

```
mysql> grant all on default.* to 'myuser'@'localhost';
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'default.* to 'myuser'@'localhost'' at line 1 
```

What went wrong? Please give me some hints.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:55:00.360

`default` is a reserved keyword used for assigning default values to fields:

```
create table t (a int default 1); 
```

avoid using reserved keywords as table names, but if you want to do so you should enclose the word in ```s:

```
 drop database `default`; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:44:40.927

```
drop database `default`; 
```

Should do the trick. Same for grant.
Thru it is better to avoid usage of reserved keywords for naming your schemas/tables/columns etc.

# ruby-on-rails - Rails 错误“NilClass:Class 的未定义方法‘model_name’”

> ID：16135989
> 
> 赞同：0
> 
> 时间：2013-04-21T20:41:14.120
> 
> 标签：ruby-on-rails

我对 Rails 很陌生，正在尝试使用 <%= render 'form' %> 将此表单包含在帖子/索引中

```
<%= form_for(@post) do |post_form| %>
<% if @post.errors.any? %>
<div id="errorExplanation">
<h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>
<ul>
<% @post.errors.full_messages.each do |msg| %>
  <li><%= msg %></li>
  <% end %>
  </ul>
  </div>
  <% end %>

<%= post_form.label :name %>: <%= post_form.text_field :name %>
<br/>
<%= post_form.label :subject %>: <%= post_form.text_field :subject %>
 <br/>
<%= post_form.label :email %>: <%= post_form.text_field :email %>
 <br/>
<%= post_form.label :content %>: <%= post_form.text_area :content %>

<%= post_form.submit %> 
```

导致的错误说 NilClass:Class 的未定义方法“model_name”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:54:25.463

问题是@post 为零

你可以使用部分喜欢

```
<%= render partial: "form" %> 
```

将来自控制器的所有实例变量传递给呈现的部分

# javascript - 使用 nicEdit 按类名选择实例

> ID：16135996
> 
> 赞同：1
> 
> 时间：2013-04-21T20:41:40.507
> 
> 标签：javascript, editor, wysiwyg, nicedit

有什么方法可以通过类名来选择带有[nicEdit](http://nicedit.com/)的实例，而不仅仅是通过它的 id？

例如：

```
<div class="myInstance1">
Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Sed magna dolor, faucibus ac, iaculis non, cursus et, dui. Donec non urna. Aliquam volutpat ornare augue. Phasellus egestas, nisl fermentum porttitor rutrum, magna metus rutrum risus, id fringilla magna mi nec lorem.
</div> 
```

调用 nicEdit：

```
<script type="text/javascript">
     bkLib.onDomLoaded(function() {
          var myNicEditor = new nicEditor();
          myNicEditor.setPanel('myNicPanel');
          myNicEditor.addInstance('myInstance1');
     });
</script> 
```

除非类是 id，否则它不会以这种方式工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T15:35:38.820

这里的问题是 ID 和类之间的区别。命令“addInstance”正在寻找添加单个实例并将该实例链接到提供的 id。由于 id 定义为每页只使用一次，nicEdit 可以轻松识别它。

但是，使用类名称可能会创建多个实例，这是该命令不打算做的事情。

一种解决方案是创建一个循环，该循环遍历类的每次出现，并根据循环编号创建一个新的 nicEdit 实例和该实例的唯一 ID。

代码看起来像这样......为您想要成为nicedit区域的任何区域分配一个类。遍历该类并为其分配一个唯一的 id。然后，根据该 id 创建一个新实例。在下面的示例中，“nicinstance”是类名。

```
bkLib.onDomLoaded(function() {
    var myNicEditor = new nicEditor();
    myNicEditor.setPanel('myNicPanel');
    $( ".nicinstance" ).each(function( index ) {
     $(this).attr("id","myInstance"+index);
     myNicEditor.addInstance('myInstance'+index);
    });
}); 
```

# javascript - 编码/解码查询字符串 ReturnUrl 参数

> ID：16135997
> 
> 赞同：1
> 
> 时间：2013-04-21T20:42:01.590
> 
> 标签：javascript, jquery, asp.net, vb.net

我将返回 url 作为查询字符串参数发送，如下所示`http://localhost:50316/TripNestFinal/Login.aspx?ReturnUrl=~/Account/AccountSettings.aspx`

但我想`~/Account/AccountSettings.aspx`以这样的方式被编码，这样我就可以

1.  `encode/decode`在`jQuery/javascript`
2.  `encode/decode`在`VB.NET`
3.  `encode`in`VB.NET`和`decode`in`javascript/jQuery`反之亦然

这不一定是防弹的，因为我在这里不处理安全问题。我要做的就是将其更改`~/Account/AccountSettings.aspx`为不直接显示路径的内容。

我想过使用`Base64`编码，但是当我`Base64`编码时，它包含一个`'/'`破坏我的 jQuery 逻辑的字符。编码时有什么办法可以避免该`'/'`字符？`Base64`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:34:43.453

您将需要对 Base64 编码字符串进行 URL 编码，这将起作用 - 尽管您需要检查生成的查询字符串长度以确保它不会达到 .NET 最大值。

但我不得不问你为什么要以这种方式对其进行编码？