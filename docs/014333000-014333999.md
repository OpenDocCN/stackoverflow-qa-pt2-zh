# StackOverflow 问答 14333000-14333999

# c++ - 使用 libpng 从 char 数组或 QByteArray 加载 png 图像纹理

> ID：14333009
> 
> 赞同：-4
> 
> 时间：2013-01-15T07:33:44.397
> 
> 标签：c++, png, libpng, qbytearray

我将图像数据作为 QByteArray。我想使用 libpng 从该数据中加载此图像的纹理。我到处都能看到从文件或输入流中读取图像纹理。但是如何从 QByteArray 加载图像？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:26:29.777

[我在这里](https://forge.ocamlcore.org/scm/viewvc.php/trunk/SRC/loader-libpng.c?logsort=cvs&view=markup&root=glmlite&sortby=date&pathrev=74)找到了我想要 的`png_read_from_mem (png_structp png_ptr, png_bytep data, png_size_t length)' method was exactly what I was looking for. It reads data which is`unsigned char*`。

# apple-push-notifications - Apple apns“权限被拒绝”问题

> ID：14333013
> 
> 赞同：2
> 
> 时间：2013-01-15T07:33:55.630
> 
> 标签：apple-push-notifications, apns-php

我在向服务器发送推送通知请求时遇到问题。在尝试连接到苹果服务器时，我们收到以下响应，

ApnsPHP[15748]：信息：正在尝试 ssl://gateway.sandbox.push.apple.com:2195... 2013 年 1 月 15 日星期二 08:20:28 +0100 ApnsPHP[15748]：错误：无法连接到“ ssl://gateway.sandbox.push.apple.com:2195'：权限被拒绝 (13)

我们检查了服务器设置，服务器没有阻止任何发出的请求。我们按照 Apple 的指南创建了 p12 证书，并通过在服务器中执行以下 shell 命令将其转换为 .pem。

```
openssl pkcs12 -in HSPushNopassword.p12  -out HSPushNopassword.pem  -nodes -clcerts 
```

并且相同的代码和证书在另一台服务器上运行良好。

请让我知道为什么我们会收到此错误？谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-11T14:24:20.673

有比完全禁用 SELinux 更好的解决方案。问题是在大多数 SELinux 系统（如我正在使用的 RedHat）上，不允许 HTTPD 创建网络连接。

您可以使用此命令启用它：

```
setsebool -P httpd_can_network_connect=1 
```

`-P`用于永久设置。

我希望它有所帮助，虽然这个线程被接受

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:42:38.080

我整理了一下。是的，问题出在服务器上，但这很可能是由于他们获得了 root 权限并重新加载了东西。简而言之，有一个非常严格的安全系统，称为“selinux”。所以我禁用了它，并设置了配置，使其在重新启动后保持关闭。推送通知现在工作正常。

# php - 如何从 html5 + css3 创建 pdf 文件？

> ID：14333023
> 
> 赞同：7
> 
> 时间：2013-01-15T07:34:46.780
> 
> 标签：php, javascript, html, css

> **可能重复：**
> [使用 PHP 将 HTML + CSS 转换为 PDF？](https://stackoverflow.com/questions/391005/convert-html-css-to-pdf-with-php)

我需要将 html + css 转换为 pdf。目标是生成发票。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-15T07:39:17.770

用这个

[http://html2pdf.fr/en/default](http://html2pdf.fr/en/default)

```
$html = file_get_contents("valid.html");
require_once("html2pdf.class.php");
$html2pdf = new HTML2PDF("P", "A4", "en", array(10, 10, 10, 10));
$html2pdf->setEncoding("ISO-8859-1");
$html2pdf->WriteHTML($html);
$html2pdf->Output("pdf/PDF.pdf", "F"); //output to file
$html2pdf->Output(); //output to browser 
```

# java - 如何知道哪个 JCheckBox 发送了 ItemEvent

> ID：14333026
> 
> 赞同：1
> 
> 时间：2013-01-15T07:35:15.017
> 
> 标签：java, swing, events, checkbox

我的 Swing 项目中有许多复选框。对于每个复选框选择/取消选择一个特定的查询将被执行。我知道获取复选框来源的一种方法是

```
public void itemStateChanged(ItemEvent e)  {
if(e.getSource=="checkbox object")
{ 
some code goes here; 
}
} 
```

如果我的复选框数量比这个解决方案最好，但如果我有很多复选框，那么我必须编写冗长的代码。有没有办法在单个命令中找到导致事件的复选框对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T08:04:13.660

您可以像这样获得选中的复选框

```
JCheckBox checkBox1 = new JCheckBox("Check1");
 JCheckBox checkBox2 = new JCheckBox("Check2");
 checkBox1.setName("Check1");
 checkBox2.setName("Check2");
 ItemListener listener = new ItemListener() {
    @Override
    public void itemStateChanged(ItemEvent e) {
        JCheckBox check = (JCheckBox)e.getSource();
         String name = check.getName();
         System.out.println(name);
    }
};
checkBox1.addItemListener(listener);
checkBox2.addItemListener(listener); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:56:10.377

如果您以某种非常统一的方式处理检查，则将`JChekBox`es 放入`HashMap`，将它们映射到有助于更轻松地处理事件的某种结构（可能是数据源或某些处理对象）中可能会有所帮助。通过创建、添加和注册复选框的方法可以进一步减少代码量。总体思路是这样的

```
HashMap<JCheckBox, String> urls = new HashMap<JCheckBox, String>();   
    // Here I use String but can be any complex data structure.

ActionListener listener = new ActionListener() {        
    public void actionPerformed(ActionEvent e) {
        String url = urls.get(e.getSource());
                    // Work with the selected URL now
    }
};

void buildCheckBoxes() {
    register("http://wikipedia.org");
    register("http://stackoverflow.com");
            // and 101 others, or load the list from the file.
}

void register(String url) {
    JCheckBox box = new JCheckBox("Use "+url);
    urls.put(box, url);
    box.addActionListener(listener);
             // One listener for all, defined above
    myPanel.add(box);
            // Some panel probably with GridLayout
} 
```

另一方面，如果您的操作非常不同，最好为每个不同的操作设置一个单独的侦听器（可能是内部或匿名类）：

```
 JCheckBox boxA = new JCheckBox("A");
    JCheckBox boxB = new JCheckBox("B");

boxA.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
               // Only code for boxA
    }
});

boxB.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
               // Only code for boxB
    }
}); 
```

一旦侦听器中有更多代码，您应该将其移动到主类的方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:20:51.147

如果您想知道哪个组件（CheckBox 或任何其他组件）在 java 中生成了一个事件，您可以使用“setName(name)”方法为该组件分配名称。

```
// For CheckBox
JCheckBox checkBox1 = new JCheckBox();
checkBox1.setName("CheckBox1");

// Any other Component
JButton button1 = new JButton();
button1.setName("Button1"); 
```

现在在侦听器类中，您可以获得生成当前事件的源对象。

```
// CheckBox Listener
public void itemStateChanged(ItemEvent e)  
{
    JCheckBox source = (JCheckBox)e.getSource();

    if(source.getName().equals("CheckBox1"))
    { 
        //some code goes here; 
    }
} 
```

# windows - 如何在使用 Outlook 2010/13 发送的邮件中设置发件人姓名？

> ID：14333035
> 
> 赞同：1
> 
> 时间：2013-01-15T07:35:30.020
> 
> 标签：windows, outlook, outlook-addin, mapi

我一直在从用户的个人资料“PR_DISPLAY_NAME”中获取用户名的值，并在“PR_SENDER_NAME_X”属性值中设置与发件人相同的值。但似乎 Outlook 2010\13 在创建配置文件时总是将用户名设置为电子邮件地址。即使我们手动添加用户名，它也会在创建 Outlook 配置文件/帐户时替换为电子邮件地址。

我的问题是 - 如何获取实际用户名，以便我可以设置与发件人姓名相同？发送电子邮件时，传输提供商如何设置显示在“发件人”字段（“PR_SENDER_NAME_X”属性值）中的发件人姓名？我尝试搜索任何相关属性，但找不到。

我通过 Outlook MAPI 帐户连接到交换服务器 2k10。

目前，我看到以下获取发件人姓名的可能性，但我认为这些不是解决问题的正确方法。

1.  配置文件属性 PR_PROFILE_USER 包含一个 DN 名称。我们可以从这个属性中提取用户名。

2.  我们有电子邮件地址，在通讯簿中查询并从那里获取用户名。但我不确定地址簿是否总是保留当前用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:01:49.257

配置文件中使用了哪种 MAPI 提供程序？是sn Exchange服务器吗？还是 POP3/SMTP 帐户？如果您使用 IOlkAccountManager 查看配置文件（[OutlookSpy](http://www.dimastr.com/outspy/)将向您显示），oyu 是否看到预期的数据？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:53:10.223

经过与德米特里的几轮讨论。我能够解决我的问题如下 -

1.  我已经有了用户的 LeagcyDN 或交换名称，因此我创建了 Sender 的 EntryId。

2.  从 IMAPSupport 获取 IAddrBook*，如下所示 - lpMAPIsupport->OpenAddressBook(NULL, 0, &lpAddrBook);

3.  从用户的地址簿指针获取发件人的 MAPI 属性。

4.  从 MAPI 属性中获取发件人的 PR_DISPLAY 属性。

也许下面的代码将有助于理解

```
 hrRet = lpMAPIsupport->OpenAddressBook(NULL, 0, &lpAddrBook);
    if (SUCCEEDED(hrRet) && lpAddrBook != NULL )
    {
      hrRet = lpAddrBook->OpenEntry(cbEntryID, lpEntryID, &IID_IMAPIProp, 0, &ulEntryType, 
                        (LPUNKNOWN *)&lpMapiProp);

      if (SUCCEEDED(hrRet) && lpMapiProp != NULL )
      {
        HrGetOneProp(lpMapiProp, PR_DISPLAY_NAME_W, true, UserName);
      }
    } 
```

注意 - 如果您没有 LegacyDN，那么您可以从消息的 PR_STORE_ENTRYID 属性中提取它。

谢谢德米特里。

# sql - 在端口 80 上通过 Internet 传输我的数据库

> ID：14333037
> 
> 赞同：-2
> 
> 时间：2013-01-15T07:35:32.203
> 
> 标签：sql, sql-injection

我正在阅读一篇关于 Sql injection 的文章，作者提到如果执行了 sql 注入攻击，攻击者可以通过端口 80 传输整个数据库我的问题是如何通过 http 端口传输数据库是否有任何软件去做吧 ？我如何保护自己免受劫持我的数据库

```
http://msdn.microsoft.com/en-us/magazine/hh580736.aspx 
```

**通过端口 80 传输整个数据库**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:42:21.627

SQL 注入意味着您的代码存在弱点 - 通常是解释端口 80 的 Web 代码 - 允许第三方在您的数据库上运行他们想要的任何 SQL 命令。如果您对此持开放态度，那么您将无法阻止他们为所欲为。

避免这种情况的方法取决于您使用的特定语言（Python、Ruby、Java 等），但两个要点是您要正确“清理您的输入 - 即确保正确转义字符，以便有人可以”例如，不要输入分号并造成严重破坏 - 并参数化您的查询。这意味着当您编写 SQL 查询时，您将参数用于用户定义的输入，然后安全地填充这些参数。在 Perl 中，您将使用：

```
$sth = $dbh->prepare("SELECT * FROM TABLE WHERE id = ?");

$sth->execute($id); 
```

将它们视为占位符。

同样，具体方法取决于您选择的语言。

当你明白这一点时，你就在路上：http: [//xkcd.com/327/](http://xkcd.com/327/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:42:40.510

**采取这样的措施绝对没有意义。**

这只是一个漏洞允许的**数十亿次攻击中的****一种**。所以，这就像在筛子上填洞一样——这是一项繁琐且毫无用处的工作，就好像你只留下一个漏洞利用一样——它将被使用。

而不是仅仅保护您的站点免受 SQL 注入。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T07:40:15.247

我的猜测是，如果你在某个地方可以注入，那么他们可能可以通过以下步骤实现：

> 1.  在 SQL 中备份数据库或将所有数据写入文件
> 2.  使用一些 DBMS 函数将该文件复制到 Web 服务器，以便暴露给 Internet，例如 SQL Server 中的 xp_cmdshell
> 3.  通过您的网络服务器下载它

# .net - 选择语句向下钻取

> ID：14333041
> 
> 赞同：0
> 
> 时间：2013-01-15T07:35:45.793
> 
> 标签：.net, vb.net, linq, tsql

我有一个这样的选择语句..

```
Select * From A Join B on A.ID = B.ID
 And A.Gener = 'M'
 And A.Age = 21
 And B.School = 'Bluh'   
--- many more AND Clauses 
```

现在这些“AND”子句是动态的，它们将根据我的 vb.net Web 应用程序中的用户选择构建......

例如...

```
if gener.text <> "" Then
   qry = qry & " And A.Gender='M'" 
```

我真的不想像这样即时构建我的 SQL 查询。有没有办法使用 LINQ 或其他方法做得更好？

我的实际 SQL 查询将包含多达 30 个动态 AND（基于用户选择）。

请指教。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:41:20.427

用于每个语句：

> qry = qry & " And (A.Gender='" & gender.Text & " ' OR '" & gender.Text & "' = '' ) "

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:56:49.707

我会这样改变

```
Select * From A Join B on A.ID = B.ID
 And (A.Gener = @arg1 or @arg1 is null)
 And (A.Age = @arg2 or @arg2 is null)
 And (B.School = @arg3 or @arg3 is null) 
```

--- 更多 AND Clausesju

这样，如果您将空值传递给过程，它们将在逻辑上被忽略 - 不知道它是否适用于您的情况

明确构建动态 tsql 查询应用端是对 sql 注入的邀请

# c# - foreach语句中的多个where子句c#

> ID：14333042
> 
> 赞同：0
> 
> 时间：2013-01-15T07:35:51.690
> 
> 标签：c#, linq, where

我有以下声明：

```
foreach (var textBlock in scoresGrid.Children.OfType<TextBlock>().Where(three => three.Name.Contains("Three"))) 
```

我怎么能做到这样我才能做到呢`where name contain three or four`？

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T07:37:11.237

使用 or`||`运算符组合 where 子句中的条件。

```
foreach (var textBlock in scoresGrid.Children.OfType<TextBlock>()
           .Where(three => three.Name.Contains("Three") || three.Name.Contains("Four"))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T07:39:04.087

```
string[] names = { "Three", "Four" } ;
foreach (var textBlock in scoresGrid.Children.OfType<TextBlock>()
                   .Where(tb => names.Any(name => tb.Name.Contains(name)))) 
```

另外，我认为您的 foreach 语句有点难以阅读。首先获取过滤后的文本块。然后迭代它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T07:37:42.520

您可以使用逻辑运算符。对于或它是'||' `>().Where(three => three.Name.Contains("Three") || three.Name.Contains("Four")))`

# postgresql - 有没有办法在postgresql中将文本转换为时间？

> ID：14333043
> 
> 赞同：6
> 
> 时间：2013-01-15T07:35:54.340
> 
> 标签：postgresql, time

有没有办法将文本转换为时间类型？postgresql 中的代码如下：

```
to_char(localtimestamp(0),'HH24:mi:SS') 
```

这样我会得到像这样的值`15:15:20`，但这`type`是varchar（或文本）。
如何获取`time`类型中的值？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-15T07:42:43.923

```
SELECT  TO_TIMESTAMP('15:15:20', 'HH24:MI:SS')::TIME 
```

请注意，您的查询（返回本地时间）可以重写为

```
SELECT  LOCALTIME 
```

这将返回`TIME`

# c# - MonoDevelop IDE 是用什么语言编写的？

> ID：14333050
> 
> 赞同：0
> 
> 时间：2013-01-15T07:36:28.280
> 
> 标签：c#, monodevelop, gtk#

我正在为一份学校论文做研究，对 MonoDevelop 网页上的措辞有点困惑。上面写着：

> MonoDevelop 最初是 SharpDevelop IDE 到 Gtk# 的一个端口，但自最初的端口以来它已经发展了很多......自从它用 Gtk# 编写以来，我们喜欢 Gtk#，我们得到了 Gtk# 的良好支持，很可能它将添加功能以改善 Gtk# 体验。*（MonoDevelop.com/FAQ，2012 年）*

引用说它是用 GTK# 编写的，但是当我克隆 MonoDevelop 存储库并检查其源代码时，所有文件都在**C#**中。有人可以弥补差距并解释为什么网站会说 GTK# 而源文件另有规定吗？

另一个问题——GTK# 的 StackOverflow 描述如下：

> Gtk# 是 Gtk+ 小部件库的 C# 绑定。

这究竟是什么意思？“绑定”与“包装”类是一样的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:41:37.630

C# 是用于编写 MonoDevelop 的编程语言；Gtk# 是 C# 语言和用于提供其用户界面的 GTK+ 工具包之间的桥梁（因此是一种组合名称）。所以是的，您可以将 Gtk# 称为 GTK+ 库的 C#“包装器”。这里的“绑定”一词是指[语言绑定](https://stackoverflow.com/questions/25865/what-is-a-language-binding)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T07:41:49.463

MonoDevelop（大部分）的*编程语言*是用**C#**编写的。

**Gtk#**是一个用于创建可在 C# 程序中使用的图形用户界面的工具包。这意味着，MonoDevelop 的图形用户界面是使用 Gtk# 构建的。

而且，是的，Gtk# 是围绕 Gtk+ C++ GUI 工具包的 C# 包装器（不是单个包装器类，而是许多 C# 类的集合，或多或少每个都包装了原始 Gtk+ 类之一）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T12:42:38.537

MonoDevelop 是用 C# 编写的。

使用此链接：[http ://www.mono-project.com/Start](http://www.mono-project.com/Start)

# c - 有趣的记忆钩子中的符号

> ID：14333053
> 
> 赞同：0
> 
> 时间：2013-01-15T07:36:50.770
> 
> 标签：c, memory, hook

> **可能重复：**
> [C中##预处理器的用途是什么](https://stackoverflow.com/questions/3635691/what-is-the-use-of-preprocessor-in-c)

来自[Google TTS](http://www.codeproject.com/Articles/69335/Fun-with-Google-TTS-eBook-reader-using-minimalisti) 的乐趣……任何人都可以了解这段代码的工作原理吗？特别是 - “c##_”是什么符号？-

```
#define DsHook(a,b,c) if (!c##_) { 
INT_PTR* p=b+*(INT_PTR**)a;  VirtualProtect(&c##_,4,PAGE_EXECUTE_READWRITE,&no);
*(INT_PTR*)&c##_=*p;  VirtualProtect(p,4,PAGE_EXECUTE_READWRITE,&no);  *p=(INT_PTR)c; 
```

它在代码中展开为 -

```
//  redirect  7th member func of IAsyncReader (SyncReadAlligned) to grab mp3 data from output pin of source filter
DsHook(reader,6,SyncReadAlligned); 
```

我想，这不是很安全的记忆方式，但作者评论它“不重要”：

> 像钩子这样不重要的代码以片段形式折叠，但可以随意展开并以您喜欢的方式格式化代码。

PS 如果 Google 已经阻止了“Fun with Google”本身（如果有人有兴趣测试）。

**更新**：我认为，简短的分析将是-“重定向 IAsyncReader (SyncReadAlligned) 的第 7 个成员函数以从源过滤器的输出引脚获取 mp3 数据”，我们将已提交页面的某些区域的内存保护从“无论如何是”到 PAGE_EXECUTE_READWRITE（允许完全访问）。

关于安全 MSDN 说 -

> 最好避免使用 VirtualProtect 更改由 GlobalAlloc、HeapAlloc 或 LocalAlloc 分配的内存块上的页面保护，因为单个页面上可以存在多个内存块。...当保护一个可执行的区域时，调用程序负责确保缓存的一致性...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T07:40:20.167

这是一个预处理器指令，意思是“连接”。`c##_`将产生一个包含参数的替换值`c`和文字字符的标记`_`。例子：

```
#define foo(c) c##_ 
```

当使用 调用时`foo(bar)`，这将扩展为`bar_`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T07:41:52.590

该符号`##`在宏定义中具有特殊含义，即连接。这里`c##_`将 c 与下划线连接起来形成一个新的记号`c_`。注意这里 c 是一个参数。因此，通过`hereIAm`作为参数传递给宏，扩展`c##_`后将变为`hereIAm_`.

# git - Git 存储库嗅探器

> ID：14333054
> 
> 赞同：1
> 
> 时间：2013-01-15T07:36:51.100
> 
> 标签：git, google-chrome-extension, trayicon

我正在寻找应用程序（桌面或 chrome 扩展或 firefox 扩展）来监听 git 存储库可能具有的所有更改，并发送有关该更改的推送通知状态，以便通知开发中的所有参与者都知道它. 我试着用谷歌搜索了一段时间，但没有结果。

任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:41:54.387

您想要的是利用上游仓库上的更新后挂钩。从那里你可以编写 curl 或 wget 在另一台机器上做你想做的事情。

如果您使用的是 github，他们有一些专有的可用于获取通知：[https ://help.github.com/articles/post-receive-hooks](https://help.github.com/articles/post-receive-hooks)

如果您使用的是 gitolite，请确保不要破坏更新钩子，因为它是如何集成自身以启用其功能的。改为更新 update.secondary 挂钩。我相信最新版本的 gitolite 比早期版本有更好的管理钩子的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:58:45.550

扩展 Adam 答案，您可以在后台页面中为来自 github 的所有触发器设置一个事件侦听器，并使用 Desktop Notifications API 推送最新更新。

# 参考

*   [桌面通知](https://developer.chrome.com/extensions/notifications.html)
*   [背景页面](https://developer.chrome.com/extensions/background_pages.html)

# android - 开始新活动时 VM 中止

> ID：14333067
> 
> 赞同：0
> 
> 时间：2013-01-15T07:38:20.453
> 
> 标签：android, android-activity, android-webview

我使用以下链接了解[如何从 webview 返回到 android 活动页面](https://stackoverflow.com/questions/11036375/how-to-get-back-to-android-activity-page-from-webview)

该解决方案非常适合仅显示 Toast 消息..

但我面临的问题是当我收到 VM 中止错误消息后尝试启动新活动时。

```
public class JavaScriptInterface{
    Context mContext;

    /** Instantiate the interface and set the context */
    JavaScriptInterface(Context c) {
        mContext = c;
    }

    /** Show a toast from the web page */
    @JavascriptInterface
    public void showToast(String toast) {
        Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
        menuScreenActivity  menu=new menuScreenActivity ();
        menu.logout();//here i try to call the logut method
    }
} 
```

在 menuScreenActivity Activity 中，我创建了名为 logout 的方法

menuScreenActivity 中的方法

```
public void logout(){
      Intent myIntent= new Intent(menuScreenActivity.this,LoginActivity.class);
      startActivity(myIntent);
    } 
```

我的原木猫说

```
 JNI WARNING: jarray 0x405a2478 points to non-array object (Ljava/lang/String;)
 "WebViewCoreThread" prio=5 tid=9 NATIVE
  | group="main" sCount=0 dsCount=0 obj=0x4058d718 self=0x1fecb0
  | sysTid=746 nice=0 sched=0/0 cgrp=default handle=5148120
   | schedstat=( 23519331303 11309830622 1216 )
at android.webkit.WebViewCore.nativeTouchUp(Native Method)
at android.webkit.WebViewCore.nativeTouchUp(Native Method)
at android.webkit.WebViewCore.access$3300(WebViewCore.java:53)
at android.webkit.WebViewCore$EventHub$1.handleMessage(WebViewCore.java:1158)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:629)
at java.lang.Thread.run(Thread.java:1019)
VM aborting 
```

请让我知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:42:43.687

`Intent`您在方法中创建的`logout()`称为意图并且您尝试启动 myIntent是否正常`Intent`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:20:22.160

`menuScreenActivity menu=new menuScreenActivity ();`几乎可以肯定是错误的。你永远不应该创建和`Activity`使用`new`. 看起来你这样做只是为了让 a`Context`传递给`Intent`. 您已经`Context`保存了一个引用，因此您可以使用它来启动意图，假设您传递了一个 Activity 上下文。

```
/** Show a toast from the web page */
    @JavascriptInterface
    public void showToast(String toast) {
        Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
        Intent myIntent= new Intent(mContext,LoginActivity.class);
        mContext.startActivity(myIntent);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:29:48.027

您可以在 menuScreenActivity 中将注销方法更改为静态，

```
public static logout(Context context){
  Intent myIntent= new Intent(context,LoginActivity.class);
  context.startActivity(myIntent);
} 
```

然后通过调用 JavaScriptInterface 中的静态方法，

```
menuScreenActivity.startActivity(mContext); 
```

# django - django 使用不同的应用程序构建网站

> ID：14333068
> 
> 赞同：0
> 
> 时间：2013-01-15T07:38:22.967
> 
> 标签：django, django-templates

我想建立一个带有动态菜单的网站，该菜单应该从一个名为 menu 的单独应用程序中提供。此应用程序使用基本模板。
另一方面，有一个内容来自另一个名为 customer 的应用程序。
例如，当我调用 domain/customer/show/1 时，该站点应显示所选客户以及 menuapp 中的菜单，但 customerapp 应是独立的。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:58:29.420

我建议尝试[django-sitetree](https://github.com/idlesign/django-sitetree)或此列表中的其他应用程序[http://www.djangopackages.com/grids/g/navigation/](http://www.djangopackages.com/grids/g/navigation/)

# jquery - 无法获取“页面”参数

> ID：14333071
> 
> 赞同：2
> 
> 时间：2013-01-15T07:38:27.370
> 
> 标签：jquery, jqgrid

这个问题与[这个](https://stackoverflow.com/questions/14118444/cant-get-the-current-page-as-parameter-when-the-next-button-is-clicked)问题有关。到目前为止，我所拥有的是：

```
onPaging: function(pgButton){ 
            var status = returnUserStatus();
            var pageNum = $('#userslist').getGridParam('page');
            if(pgButton=="next_pager"){ 
                //window.alert("next clicked! \n page: " + page); 
                loadUsers(status, pageNum);
            } 
            if(pgButton=="prev_pager"){ 
                //window.alert("prev clicked! \n page: " + page); 
                loadUsers(status, pageNum);
            } 
            if(pgButton=="last_pager"){ 
                //window.alert("last clicked! \n page: " + page); 
                loadUsers(status, pageNum);             
            }
            if(pgButton=="first_pager"){ 
                //window.alert("first clicked! \n page: " + page); 
                loadUsers(status, pageNum);
            }else if((pgButton !="first_pager") && (pgButton !="last_pager") && (pgButton !="prev_pager") && (pgButton !="next_pager"))     
                //window.alert("enter pressed \n page: "+ page );

                console.log(pageNum);
                loadUsers(status, pageNum);
        }, 
```

问题是我在单击输入时无法获取它（在上面的测试中）由于未知原因变量`pageNum`是`undefined`.

请帮我！自 2-3 天以来，我一直在尝试解决此问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-13T13:55:09.840

维普雷什是对的。

这段代码：

```
onPaging: function (pgButton) {
    var pageNumber = $(this).jqGrid("getGridParam", "page");
    alert(pageNumber);
    //...
} 
```

在以前的 jqGrid 版本中会提醒新的页码，但现在会提醒旧的页码，这在我自己看来毫无用处。

为了使用最新版本的 jqGrid 获取新页码，我必须执行以下操作：

```
onPaging: function (pgButton) {
    var newUserValue = $('input.ui-pg-input', "#pg_pagerId").val();
    var newValue = 0;
    var currentValue = $("#gridId").getGridParam('page');
    if (pgButton.indexOf("next") >= 0)
        newValue = ++currentValue;
    else if (pgButton.indexOf("prev") >= 0)
        newValue = --currentValue;
    else if (pgButton.indexOf("last") >= 0)
        newValue = $("#gridId").getGridParam('lastpage');
    else if (pgButton.indexOf("first") >= 0)
        newValue = 1;
    else if (pgButton.indexOf("user") >= 0)
        newValue = newUserValue;
    alert(newValue);
}, 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T11:02:05.500

页码可以通过以下代码获取

```
onPaging: function (pgButton) {
    var pageNumber = $(this).jqGrid("getGridParam", "page");
    alert(pageNumber);
    //...
} 
```

# php - 如何在不重复代理名称的情况下创建 PHP Mysql 每日报告？

> ID：14333072
> 
> 赞同：0
> 
> 时间：2013-01-15T07:38:35.327
> 
> 标签：php, mysql, loops, while-loop

**表结构法案**

```
CREATE TABLE IF NOT EXISTS `bill` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `agent_id` int(11) NOT NULL,
  `date` date NOT NULL,
  `amount` int(100) NOT NULL,
  `cheque` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=21 ;

--
-- Dumping data for table `bill`
--

INSERT INTO `bill` (`id`, `agent_id`, `date`, `amount`, `cheque`) VALUES
(1, 1, '2013-01-01', 10, 15),
(2, 1, '2013-01-01', 10, 0),
(3, 2, '2013-01-02', 10, 0),
(4, 1, '2013-01-03', 12, 0),
(5, 3, '2013-01-04', 100, 0),
(6, 2, '2013-01-05', 14, 0),
(7, 5, '2013-01-05', 18, 0),
(8, 7, '2013-01-05', 22, 0),
(9, 6, '2013-01-04', 19, 0),
(10, 6, '2013-01-06', 20, 0),
(11, 5, '2013-01-07', 21, 0),
(12, 6, '2013-01-08', 11, 0),
(13, 7, '2013-02-09', 19, 0),
(14, 6, '2013-01-10', 150, 0),
(15, 1, '2012-12-31', 100, 0),
(16, 1, '2012-01-11', 500, 20),
(17, 1, '2013-02-01', 210, 0),
(18, 1, '2013-02-18', 100, 0),
(19, 6, '2013-01-31', 100, 0),
(20, 3, '2013-01-11', 250, 50); 
```

**表结构 bill_agents**

```
CREATE TABLE IF NOT EXISTS `bill_agents` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(11) NOT NULL,
  `target` int(11) NOT NULL,
  `join_date` date NOT NULL,
  `resign_date` date NOT NULL,
  `hide` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=8 ;

--
-- Dumping data for table `bill_agents`
--

INSERT INTO `bill_agents` (`id`, `name`, `target`, `join_date`, `resign_date`, `hide`) VALUES
(1, 'Agent 1', 10, '2013-01-01', '0000-00-00', 0),
(2, 'Agent 2', 5000, '2013-01-01', '0000-00-00', 0),
(3, 'Agent 3', 5000, '2013-01-01', '0000-00-00', 0),
(4, 'Agent 4', 5000, '2013-01-03', '2013-01-06', 0),
(5, 'Agent 5', 5000, '2013-01-01', '0000-00-00', 0),
(6, 'Agent 6', 5000, '2013-01-02', '0000-00-00', 0),
(7, 'Agent 7', 5000, '2013-01-02', '0000-00-00', 1); 
```

我目前的结果：[![当前结果](../Images/77cd7051ece693cbbdcf4f298f63e9af.png)](https://i.stack.imgur.com/Dv4iU.jpg)

（ 1-31 是日期）具有以下代码

```
<table width="100%" border="1" cellspacing="4" cellpadding="1">
  <tr>
    <td>&nbsp;</td>
     <?php
for ($i=01; $i<=31; $i++)
  {?>
    <td><?php echo $i; ?></td>
    <?php

  }
?>
    <td>Total</td>
  </tr>
  <?php 
    $query4 = "SELECT DISTINCT bill.agent_id, bill.date, SUM(bill.amount + bill.cheque) AS total, bill_agents.id,bill_agents.name ".
        "FROM bill, bill_agents ".
        "WHERE bill.agent_id = bill_agents.id AND YEAR(date)  = YEAR(CURDATE()) AND MONTH(date) = MONTH(CURDATE()) ".
        "GROUP BY bill.agent_id , DATE(bill.date)   ".
        "ORDER BY bill.date ASC ";
     $result4 = mysql_query($query4) or die('Error, query failed1'); 
    if  (mysql_num_rows($result4)>0){
    mysql_data_seek($result4, 0);   

?>
  <?php $total_1 = 0;  while($row4 = mysql_fetch_array($result4, MYSQL_ASSOC)){?>
  <?php $date =    $row4['date'];

    $var = $date;
    $date = date("d-m-Y", strtotime($var) );
    $date=substr($date, 0, -8); 

    echo $date;

    ?>
  <tr>
    <td><?php echo $row4['name']; ?></td>
    <?php
for ($i=01; $i<=31; $i++)
  {?>
    <td><?php if ($date == $i) echo $row4['total']; ?></td>
    <?php

  }
?>
    <td></td>
  </tr>
  <?php } } ?>
  <tr>
    <td colspan="31"></td>
    <td>Total</td>
    <td></td>
  </tr>
</table> 
```

**我想要创建的是，如果数据库中有多个条目，**我不想重复代理名称，它应该只属于当前日期，总计也应该是。怎么可能 sql 查询？还是我需要用其他代码创建？

这是我要创建的示例[![预期结果](../Images/4bead0c9f04c679d415206cfba8d3f21.png)](https://i.stack.imgur.com/N13ae.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:11:36.407

```
$select_agent_id = mysql_query("select agent_id from bill group by agent_id");
while ($fetch = mysql_fetch_array($select_agent_id)) {
    $agent_id[] = $fetch['agent_id'];
}
$number_of_agents = count($agent_id);

    $output = "<table border='2px' bordercolor='#460000'>";
    $output .="<tr>";
    $output .="<td>Name</td>";
    for($i=1; $i<=31; $i++) {
        $output .="<td>".$i."</td>";
    }
    $output .="<td>Total</td>"; 
    $output .="</tr>";

foreach($agent_id as $id) {

    $select_records = mysql_query("select *, sum(amount) from bill where agent_id = $id 
                      and date between '2013-01-01' and '2013-01-31' group by date");

    $select_agent_name = mysql_query("select name from bill_agents where id=$id");
    $fetch_name = mysql_fetch_array($select_agent_name);
    $agent_name = $fetch_name['name'];

    $rows_count = mysql_num_rows($select_records);
    while($fetch_dates = mysql_fetch_array($select_records)) {
        $dates[] =substr($fetch_dates['date'],-2,2);
        $amounts[] = $fetch_dates['sum(amount)'];
    }
    $output .= "<tr>";
    $output .="<td>".$agent_name."</td>";

    for($i=1;$i<=31;$i++) {

        if(!empty($dates)) {

            if($i==$dates[0]) {
                $output .="<td>".$amounts[0]."</td>";
                array_shift($amounts);
                array_shift($dates);
            } else {
                $output .= "<td>&nbsp;</td>";
            }
        } else {
            $output .= "<td>&nbsp;</td>";
        }

    }
    $total_amount_query = mysql_query("select sum(amount) from bill where agent_id = $id 
                      and date between '2013-01-01' and '2013-01-31' group by agent_id");
    $fetch_total_amount = mysql_fetch_array($total_amount_query);
    $output .="<td>".$fetch_total_amount['sum(amount)']."</td>";                  
    $output .= "</tr>";

}
$output .="</table>";
echo $output; 
```

@Preethu Alex：上面是你的代码。请检查并让我知道。希望这可以帮助。我没有对**SQL INJECTION**进行任何检查。我还在查询中给出了一些静态日期。请相应地修改它

# c# - gmail客户端，渲染附加图像，第二个作为无名附件

> ID：14333075
> 
> 赞同：0
> 
> 时间：2013-01-15T07:38:50.527
> 
> 标签：c#, asp.net, email, gmail

我发送带有图像作为附件的 html 电子邮件。所有其他图像都很好，但使用两次作为背景的图像 - 顶部和底部边框，它也作为无名附件可见。

在只有一个图像具有相同来源的情况下，不会发生这种情况。

有什么办法可以用这个做某事吗？

```
<img alt="" src="cid:[STATICIMAGE:/mailings/shadow.jpg]" width="500" height="9" />

bla bla bla

<img alt="" src="cid:[STATICIMAGE:/mailings/shadow.jpg]" width="500" height="9"  /> 
```

# java - 获取变量其他类java Android

> ID：14333076
> 
> 赞同：0
> 
> 时间：2013-01-15T07:38:52.237
> 
> 标签：java, android, html, variables

我试图让 textview 显示一个数字，但它不会。

我的活动代码：

```
package com.example.gotteron;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class Classement extends Activity{

    TextView textview;
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.classement);
        GetCode getCode = new GetCode();
        textview = (TextView)findViewById(R.id.textView1);
        try {
            textview.setText(getCode.test());
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// ///////////////

获取 HTML 的类：

```
//Package
package com.example.gotteron;

//Import
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;

public class GetCode{

    public String test() throws Exception{

        //Recupérer le code HTML de la page
        URL oracle = new URL("http://www.nationalleague.ch/NL/fr/");
        URLConnection yc = oracle.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(
                yc.getInputStream()));
        String inputLine;
        String s1 = "";
        while ((inputLine = in.readLine()) != null)
            s1 = s1 + inputLine;
        in.close();

        int Berne = s1.indexOf(">SC Bern</td>");
        String s3 = String.valueOf(Berne); 
        return s3;
    }
} 
```

///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// ///////////////

XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/background">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/firstPosition" />

</LinearLayout> 
```

///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// ///////////////

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.gotteron"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.gotteron.Principal"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="Classement" android:label="@string/app_name"></activity>
        <activity android:name="Calendrier" android:label="@string/app_name"></activity>
        <activity android:name="Live" android:label="@string/app_name"></activity>
    </application>
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>
</manifest> 
```

///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// ///////////////

**编辑：**

感谢您的代码，但仍然存在问题。当我运行应用程序时，textview 会显示他的默认消息。在此期间，logcat 显示很多消息： [http](http://pastebin.com/244grjYt) ://pastebin.com/244grjYt ，最后应用程序崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:43:41.107

您无法在 ui 线程中建立网络连接（HTTP 连接），尝试将调用移至`getCode.test()`另一个线程或更好地移至[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:24:27.100

本质上，这就是其他答案的内容。由于您没有检查任何答案，也许这会有所帮助。

```
public class MyClass extends Activity {
    TextView textview;
    public void onCreate(Bundle bundle) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.classement);
        textview = (TextView)findViewById(R.id.textview);
        new NetworkOperation().execute();
    }

    private class NetworkOperation extends AsyncTask<Void, Void, String> {
        protected String doInBackground(Void... params) {
            try {
                URL oracle = new URL("http://www.nationalleague.ch/NL/fr/");
                URLConnection yc = oracle.openConnection();
                BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream()));
                String inputLine;
                String s1 = "";
                while ((inputLine = in.readLine()) != null)
                    s1 = s1 + inputLine;
                in.close();
                int Berne = s1.indexOf(">SC Bern</td>");
                String s3 = String.valueOf(Berne); 
                return s3;
            }
            catch (IOException e) {
                e.printStackTrace();
            }
            return null;
        }      

        protected void onPostExecute(String result) {
            textview.setText(result);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:46:29.737

You are facing `NetworkOnMainThread` Exception which is quite common on Emulators that are running on API level 11 and more when you are writing Network Related code in UI Thread. You change your code into `doInBackground()` of an `AsyncTask` and run it.

In your case as you are throwing Exception in test() it will not crash your app because Exceptions are caught by Exception.

Example Code:

```
class FetchResultTask extends AsyncTask<Void,Void,String>
{
protected String doInBackground()
{
  //your network related code.
}
protected void onPostExecute(String result)
{
  super.onPostExecute(result);
   //set the result to TextView here.
}
} 
```

# objective-c - 在其父视图中居中，当处于横向时

> ID：14333077
> 
> 赞同：1
> 
> 时间：2013-01-15T07:38:59.630
> 
> 标签：objective-c

我已经搜索并发现了一些关于此的问题，但没有一个包含对我有用的答案。

如果设备是纵向的，则此代码将当前视图中的子视图居中，但如果是横向则不会。如何在横向中进行居中工作？

```
UIView *redView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 200, 200)];
redView.backgroundColor = [UIColor redColor];
redView.center = [self.view convertPoint:self.view.center fromView:self.view.superview];
[self.view addSubview:redView]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:55:47.943

而是尝试使用

```
 redView.center = [self.view convertPoint:self.view.center fromView:nil]; 
```

为我工作。

来自文档的注释：

> 在其坐标系中具有点的视图。如果 view 为 nil，则此方法改为从窗口基坐标转换。否则，视图和接收者必须属于同一个 UIWindow 对象

（应该在 viewDidAppear 中调用，而不是在 viewDidLoad 中调用）

# android - 将 EditText 值传递给 Android 中具有相同样式的另一个 Activity

> ID：14333091
> 
> 赞同：0
> 
> 时间：2013-01-15T07:39:42.607
> 
> 标签：android, styles, android-edittext

我有一个带有文本“**这是粗体文本**”和“*这是*斜体文本”的编辑文本

我将把这个edittext值传递给另一个具有相同文本的活动

在第二个活动中，我有一个 TextView，如果我在文本视图中显示一个 edittext 值，我会得到这样的

“这是粗体文本”和“这是斜体文本”

如何传递具有相同样式的edittext值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:57:09.773

可以传递html格式的文本，例如：

textView.setText(Html.fromHtml(" **这是一个粗体文本** ")); 或 textView.setText(Html.fromHtml(" *这是一个斜体文本* "));

# php - 由于斜杠，命名参数作为 url 的一部分传递

> ID：14333092
> 
> 赞同：1
> 
> 时间：2013-01-15T07:39:43.600
> 
> 标签：php, search, cakephp-1.3, slash

我正在使用`cakephp 1.3`并且我想搜索包含 / 字符串的记录。我已经传递了如下参数。搜索参数如下。

```
Array
(
    [controller] => indents
    [action] => admin_index
    [named] => Array
        (
            [pr_no_data] => pr
        )

    [pass] => Array
        (
            [0] => no
            [1] => dip
            [2] => 002
        )

    [prefix] => admin
    [admin] => 1
    [plugin] => 
    [form] => Array
        (
        )

    [url] => Array
        (
            [url] => admin/indents/index/pr_no_data:pr/no/dip/002
        )

    [isAjax] => 
) 
```

你们都可以看到我的 url 参数包含`admin/indents/index/pr_no_data:pr/no/dip/002`，现在我想搜索 url 中定义的 pr_no。我怎样才能做到这一点。？因为搜索/记录传递值作为传递参数。请帮我。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:44:17.397

正如您在数组中看到的，CakePHP 将部分数据视为传递的参数。在`pr_no_data`命名变量中，您会看到它引用`pr`为它的值。

```
[named] => Array
   (
       [pr_no_data] => pr
   ) 
```

但是，由于斜线，数据中剩余的字符串被识别为传递的参数。所以它将它们作为 URL 的一部分读取，而不是`pr_no_data`变量。

```
 [pass] => Array
    (
        [0] => no
        [1] => dip
        [2] => 002
    ) 
```

您需要查看的是在将变量添加到 URL 之前如何生成该变量。也许您可以将其更改为管道 | 分隔列表或逗号分隔列表，因此它不会干扰 URL 和混淆 cakephp。

```
pr|no|dip|002
pr,no,dip,002 
```

一旦 cakephp 收到数据，如果需要，您可以将它们转换回斜线：

```
$passed = preg_replace('/,/', '/', $this->params['named']['pr_no_data']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:45:00.013

尝试使用[urlencode](http://php.net/manual/en/function.urlencode.php)对命名参数值进行编码。

网址应该是

```
admin/indents/index/pr_no_data:pr%2Fno%2Fdip%2F002 
```

如果您使用 Html 帮助程序创建 URL，那么 CakePHP 应该为您编码该值。

```
echo $this->Html->url(array(
    'prefix'=>'admin',
    'controller'=>'indents',
    'action'=>'index',
    'pr_no_data'=>'pr/no/dip/002'
)); 
```

# ruby-on-rails - 使用 Capistrano 自动构建 Rails

> ID：14333096
> 
> 赞同：2
> 
> 时间：2013-01-15T07:39:56.280
> 
> 标签：ruby-on-rails, continuous-integration, capistrano

我曾经是一名 .NET 人员，并且喜欢使用名为[CruiseControl.NET](http://www.cruisecontrolnet.org/)的夜间构建系统（持续集成）来自动将我的应用程序部署到我的登台环境中。

现在我已经跳转到 Ruby on Rails 和 GitHub，我发现自己对如何设置等效的自动化夜间构建系统有点困惑。我想以 Rails 的方式正确地做事，但我可以朝正确的方向推动。

**这是我正在使用的...**

*   Ruby on Rails 3.2.9（带有资产管道）
*   虚拟机
*   阿帕奇 + 乘客
*   MySQL
*   Ubuntu 12.04（登台服务器操作系统）
*   GitHub (SCM)

**我正在寻找满足这些要求的系统/解决方案：（**理想情况下使用 Capistrano ......）

*   将最新提交从我的 GitHub 存储库中的“主”分支部署到我的登台服务器。
*   一键按需构建：我想随时点击按钮或链接强制部署（或重新部署）
*   作为部署的一部分，能够在登台服务器上运行自定义命令（即“捆绑安装”、重新启动 Apache 等...）
*   每天或在 GitHub 上提交后自动部署（*可选*）

而且因为我从来没有先做一些研究就问这个问题，**这里有一些我找到的相关资源，但无法破译**：

*   [通过 Git 自动部署](http://www.mobalean.com/blog/2009/02/06/automatic-deployment-via-git)
*   [使用 Capistrano 部署 Rails 3 应用程序](http://www.aaginskiy.com/technology/2011/02/deploying-rails-3-apps-with-capistrano/)

建议，有人吗？谢谢！

*   大卫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T08:45:23.837

好吧，事实证明有很多关于如何为此目的使用 Capistrano 的好信息（包括[Prakash 的参考资料](https://stackoverflow.com/a/14333349/20774)），但似乎没有一个是完全全面的。

经过几个小时的挑选指南，论坛之后，堆栈溢出问题之后，我设法实现了我的大部分目标。为了为其他人节省时间，我将尝试提供我在原始问题的上下文中找到的答案和信息。

* * *

**更新**：

事实证明，我一直在寻找[Jenkins](http://jenkins-ci.org/)：它是我之前使用的 CruiseControl 构建服务器应用程序的完美（甚至是改进）模拟。Jenkins 是一个 Web 应用程序，它可以按计划启动构建，或者使用插件启动提交事件。它不包括实际部署我的 Rails 应用程序的功能，因此 Capistrano 介入其中。使用 Jenkins 的“shell 执行”构建任务来触发 Capistrano 部署，我能够实现上述所有目标。

请查看[本指南](http://gistflow.com/posts/492-jenkins-ci-setup-for-rails-application-from-scratch)以获取更多详细信息。

* * *

**原帖：**

**首先，Capistrano 可以用于构建系统，但是，它与 CruiseControl 完全不同。**

巡航控制是：

*   一个 Web 应用程序，在用作“构建服务器”的机器上运行
*   任何用户都可以访问网络应用程序来运行构建；用户无需对其进行任何设置或配置……它只是一个网页。
*   该接口还提供了日志、责备、计划构建等功能...

卡皮斯特拉诺是：

*   不是应用程序或服务，而是像`rake`; 它具有类似于 CruiseControl 用于部署目的的 Ant 和 Nant 脚本的功能。
*   Capistrano 在用户的本地计算机（通常是 Rails 应用程序文件夹）上运行，并且需要在其端进行配置才能运行
*   它通过 SSH 直接从用户的机器连接到远程服务器以执行部署（如果您不想授予用户对远程服务器的 SSH 访问权限，这可能不是可取的）
*   命令通过控制台运行，即`cap deploy`（这与“一键式”部署一样接近。）
*   它确实产生日志，执行回滚等。
*   它不会自行启动预定的构建（建议使用 cron）

**关于我原来的要求...**

> 将最新提交从我的 GitHub 存储库中的“主”分支部署到我的登台服务器。

配置 Capistrano 的 deploy.rb 文件将完成此操作。

> 一键按需构建：我想随时点击按钮或链接强制部署（或重新部署）

所有 Capistrano 部署都是通过“强制”完成的：您在控制台中手动运行“cap deploy”

> 作为部署的一部分，能够在登台服务器上运行自定义命令（即“捆绑安装”、重新启动 Apache 等...）

配置 Capistrano 的 deploy.rb 文件将完成此操作。这些命令中的大多数都是开箱即用的。

> 每天或在 GitHub 上提交后自动部署（可选）

我还没有弄清楚这个...... cron 工作可能是做到这一点的最佳方式。

**设置 Capistrano**

首先从[GitHub 上](https://help.github.com/articles/deploying-with-capistrano)的本教程开始。在您的 Rails App 文件夹中，您应该得到一个`Capfile`and`config/deploy.rb`文件。

为了节省您一些时间，请复制并粘贴这些文件，并根据您的需要调整设置。以下文件配置用于：

*   部署到测试环境
*   GitHub
*   基于 RVM 的 Rails
*   使用 Ruby 和 gemset 的显式版本
*   包括未跟踪的文件（即`database.yml`您未提交给 SCM 的文件）
*   使用 Rails 资产管道
*   在每次部署时运行迁移和种子
*   每次部署都重新启动基于 Apache 的乘客

**头文件**

```
# Set this if you use a particular version of Ruby or Gemset
set :rvm_ruby_string, 'ruby-1.9.3-p286@global'
#set :rvm_ruby_string, ENV['GEM_HOME'].gsub(/.*\//,"") # Read from local system

require "bundler/capistrano"
# Uncomment this if you're using RVM
require "rvm/capistrano"

load 'deploy'
# Uncomment if you are using Rails' asset pipeline
load 'deploy/assets'
load 'config/deploy' # remove this line to skip loading any of the default tasks 
```

**配置/部署.rb**

```
# BEGIN RUBY CONFIG
# You can manually override path variables here
# set :default_environment, {
#     'PATH' => "/usr/local/bin:/bin:/usr/bin:/bin:/<ruby-dir>/bin",
#     'GEM_HOME' => '<ruby-dir>/lib/ruby/gems/1.8',
#     'GEM_PATH' => '<ruby-dir>lib/ruby/gems/1.8',
#     'BUNDLE_PATH' => '<ruby-dir>/lib/ruby/gems/1.8/gems'  
# }
# This changes the default RVM bin path
# set :rvm_bin_path, "~/bin"

# If your remote server doesn't have a ~/.rvm directory, but is installed
# at the /usr/local/rvm path instead, use this line
set :rvm_type, :system
# END RUBY CONFIG

default_run_options[:pty] = true  # Must be set for the password prompt
                                  # from git to work

# BEGIN MULTIPLE ENVIRONMENT DEPLOYS
# Read the following URL if you need to deploy to different environments (test, development, etc)
# https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension
# set :stages, %w(production test)
# set :default_stage, "test"
# require 'capistrano/ext/multistage'
# END MULTIPLE ENVIRONMENT DEPLOYS

# BEGIN APPLICATION VARS
set :application, "yourapp"
set :rails_env, 'test'
# END APPLICATION VARS

# BEGIN PATH DEFINITIONS
set(:releases_path)     { File.join(deploy_to, version_dir) }
set(:shared_path)       { File.join(deploy_to, shared_dir) }
set(:current_path)      { File.join(deploy_to, current_dir) }
set(:release_path)      { File.join(releases_path, release_name) }
# END PATH DEFINITIONS

# BEGIN SCM VARS
set :repository, "git@github.com:yourgithubuser/yourrepository.git"  # Your clone URL
set :scm, "git"
set :scm_username, "yourgithubuser"
set :scm_password, proc{Capistrano::CLI.password_prompt('GitHub password:')}  # The deploy user's password
set :branch, "master"
# END SCM VARS

# BEGIN SERVER VARS
set :user, "ubuntu"  # The server's user for deploys
role :web, "dev.#{application}" # The location of your web server i.e. dev.myapp.com
role :app, "dev.#{application}" # The location of your app server i.e. dev.myapp.com
role :db, "dev.#{application}", :primary => true  # The location of your DB server i.e. dev.myapp.com

set :deploy_to, "/home/#{user}/www/#{application}"
set :deploy_via, :remote_cache
# Uncomment this if you want to store your Git SSH keys locally and forward
# Else, it uses keys in the remote server's .ssh directory
# ssh_options[:forward_agent] = true
# END SERVER VARS

# BEGIN ADDITIONAL TASKS
before "deploy:start" do
  deploy.migrate
  deploy.seed
end

before "deploy:restart" do
  deploy.migrate
  deploy.seed
end

# Some files that the Rails app needs are too sensitive to store in SCM
# Instead, manually upload these files to your <Rails app>/shared folder
# then the following code can be used to generate symbolic links to them,
# so that your rails app may use them.
# In this example below, I link 'shared/config/database.yml' and 'shared/db/seed_data/moderators.csv'
before "deploy:assets:precompile" do
  run ["ln -nfs #{shared_path}/config/settings.yml #{release_path}/config/settings.yml",
       "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml",
       "mkdir -p #{release_path}/db/seed_data",
       "ln -nfs #{shared_path}/db/seed_data/moderators.csv #{release_path}/db/seed_data/moderators.csv",
       "ln -fs #{shared_path}/uploads #{release_path}/uploads"
  ].join(" && ")
end

namespace :deploy do
  # Define seed task (call 'cap deploy:seed')
  desc "Reload the database with seed data"
  task :seed do
    run "cd #{current_path}; bundle exec rake db:seed RAILS_ENV=#{rails_env}"
  end

  # If you are using Passenger mod_rails uncomment this:
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end
end
# END ADDITIONAL TASKS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:58:16.353

是的。`Capistrano`是您正在寻找的工具。`Capistrano`与系统一起使用`cron`应该使您能够实现具有上述所有四个要求的构建/部署系统。相当容易。

了解 Capistrano 的最佳资源是[Deploying Rails](http://pragprog.com/book/cbdepra/deploying-rails)这本书。它有两章介绍 Capistrano，第一章介绍基本用法，第二章介绍一些高级使用概念。最后还有一个 Capistrano 案例研究，它通过一个真实的部署脚本示例探索进一步的配置选项。

仅供参考：我昨天在几个小时内完成了这两章的阅读[并在推特上发布了它](https://twitter.com/_prakash/status/290805077151731712);-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T08:42:26.497

我会说与 Capistrano 一起进行部署部分。

CI 部分（在执行 git push 时构建）最好通过使用 CI 服务器来实现，例如 travis（如果您在 Github 上）或 Jenkins，如果您有私人存储库。

对于一键构建，直接使用 capistrano（`cap deploy`从命令行）或运行所有测试的简单 CI 挂钩，然后运行`cap deploy`​​.

# ruby-on-rails - 如何从我的 Ruby/Rails 项目中提取所有人类可读的字符串以进行拼写和语法检查？

> ID：14333097
> 
> 赞同：0
> 
> 时间：2013-01-15T07:39:56.837
> 
> 标签：ruby-on-rails, ruby, rake

在我的 RoR 项目中，我到处都存储了人类可读的字符串（例如 HAML 模板、Javascript、控制器、模型等）。在我将网站公开之前，我想从我的代码中提取所有这些人类可读的字符串以进行拼写/语法检查。

是否有任何 gems 或 rake 作业可以提取所有这些人类可读的字符串以供审查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:42:10.417

最适合您需求的 gem 可能是[Copycopter](http://railscasts.com/episodes/336-copycopter)。

# python - 为什么这个 SQL 在 python 中不起作用

> ID：14333098
> 
> 赞同：-1
> 
> 时间：2013-01-15T07:39:58.597
> 
> 标签：python, mysql, mysql-python

```
cur.execute("SELECT * FROM `productinfo` WHERE CreateDate > '%s'",kakko) 
```

用户输入字符串在哪里`kakko`，例如 2012-01-15

“%s”不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:31:33.783

因此，从评论中详细说明：

`cursor.execute`需要一个参数元组，你不需要引用`%s`：

```
cur.execute("SELECT * FROM `productinfo` WHERE CreateDate > %s", (kakko, )) 
```

# session - 删除 JSESSIONID 以进行负载平衡

> ID：14333101
> 
> 赞同：0
> 
> 时间：2013-01-15T07:40:06.293
> 
> 标签：session, load-balancing, logout, jsessionid

我有负载均衡器来平衡两个节点之间的负载。

当用户注销时，我会返回相同的登录页面。如果 User 已登录 node1 ，注销后，我想将 User 带到 node2 。

负载均衡器中的重定向规则不起作用（规则如下所述）。因此，我正在考虑在用户注销时删除 JSESSIONDID，假设现在它可能会转到不同的节点。

在注销之前，我需要使会话无效。如果我按照以下步骤操作，

```
1\. Remove JSESSIONID
2\. session.invalidate(); 
```

在上述情况下，如果 JSESSIONID 在使会话失效之前被删除，它会使会话失效吗？因为 SESSIOND ID 已经被移除

```
1\. session.invalidate();
2\. Remove JSESSIONDID 
```

在这种情况下，我已经使会话无效。那么，我可以删除 JSESSIONID 吗？

**重定向规则**：

```
if ( ($url == "loginPageURL") && ( http.getcookie( "JSESSIONID" ) == "" )) 
{
 http.setcookie( "JSESSIONID", "" );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:45:10.610

这可能有效，但我不认为这是 LoadBalancer 的真正用途，负载均衡器应该平衡服务器上的负载并将用户路由到服务器池中的一台服务器，这样如果一台服务器停机或完全繁忙，用户仍然可以使用其他服务器上的应用程序而没有注意到这一点。将它们粘在一台服务器上使您的 Web 服务器没有后备计划。

取而代之的是，您应该尝试将负载均衡器与一些共享会话技术一起使用，以便您的所有服务器都可以相互共享会话

# actionscript-3 - 升级到 Flash CS6 后的动作脚本 3 错误

> ID：14333108
> 
> 赞同：1
> 
> 时间：2013-01-15T07:40:32.133
> 
> 标签：actionscript-3, flash, flash-cs6

我最近从 CS4 升级到 Flash CS6。在 CS6 之前我没有收到此脚本的任何错误，但现在我收到以下错误：

Symbol 'wholePlayer,Layer,'Layer9'Frame 3 Line 12 - 1152 与命名空间 public 中的继承定义 flash.display:movieclip.isPlaying 存在冲突。

这是我的脚本：

```
import flash.net.URLRequest;

stop();

// Create the sound object
var snd:Sound = new Sound();
// Assign a var name for the sound channel
var channel:SoundChannel;
// Initialize the pause position
var pausePosition:int = 0;
// Boolean value for button functions, to switch in the conditionals

var isPlaying:Boolean = false;  ******HERE'S THE LINE REFERENCED IN THE ERROR*******

// Set the play buffer to 5 seconds, you can adjust this
var context:SoundLoaderContext = new SoundLoaderContext(5000,true);
// Load the requested URL sound into the snd var, along with context
snd.load(req, context);
// Create the play channel using snd
channel = snd.play();// Start playing
// --- Stop sound from autoplaying --- \\
if(firstTime == true)
{
    stopSound(null);
} 
```

这是一个.MP3 播放器的脚本。我已经指出了上面错误中提到的那一行。任何帮助将不胜感激。谢谢。

索兰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:12:44.307

Flash Player 11 版添加了一个名为*isPlaying*的 MovieClip 属性。重命名变量将解决问题。

# android - 未调用surfaceCreated，因此线程未启动

> ID：14333109
> 
> 赞同：0
> 
> 时间：2013-01-15T07:40:38.430
> 
> 标签：android, surfaceview

## 以下是我的简单代码，实际上我想在 draw() 方法中重复记录 HELLO，但我的 surfacecreated 方法没有被调用，所以线程没有启动。请帮帮我

公共类 MainActivity 扩展 Activity{

```
private MyThread myThread ;
Panel _View;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    _View = new Panel(this);
}

public class Panel extends SurfaceView implements SurfaceHolder.Callback {
    Canvas canvas;
    public Panel(Context context) {
        super(context);
        getHolder().addCallback(this);
    }//end of panel

    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO Auto-generated method stub
    }

    public void surfaceCreated(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        myThread= new MyThread(this);
        myThread.setRunning(true);
        myThread.start();   
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        myThread.setRunning(false); 
    }

    public void Draw(Canvas canvas){
        super.draw(canvas);
            this.canvas = canvas;   
            Log.d("HELLO", 0+"");
    }//end of DRAW()

}//end of Panel class

public class MyThread extends Thread {
    Panel panel;
    private SurfaceHolder myHolder;
    boolean mRun=false;

    public MyThread(Panel panel)
    {
        this.panel= panel;
        this.myHolder = panel.getHolder();
    }

    public void setRunning(boolean run){
        this.mRun=run;
    }

    public void run(){  
        Canvas canvas = null;
        while(mRun)
        {
            canvas=myHolder.lockCanvas();
            if(canvas!=null)
            {   
                panel.Draw(canvas);
            }
            myHolder.unlockCanvasAndPost(canvas);
        }
    }

}//MyThread class ends 
```

}//鸟类狂热活动结束

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T07:58:01.327

在将表面添加到视图层次结构之前，不会创建表面。如果它是你唯一的`View`，你可以设置它

```
setContentView( _View); 
```

在你的`onCreate()`方法中。

# unix - access(2) 系统调用安全问题

> ID：14333112
> 
> 赞同：2
> 
> 时间：2013-01-15T07:40:50.837
> 
> 标签：unix

access(2) 手册页说，

> CAVEAT Access() 是一个潜在的安全漏洞，不应使用。

但是什么是安全漏洞，为什么我不应该使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T07:47:55.053

从我系统的手册页：

> 警告：使用 access() 来检查用户是否被授权，例如，在使用 open(2) 实际打开文件之前打开文件会造成安全漏洞，因为用户可能会利用检查和打开文件之间的短时间间隔来操纵它。因此，应避免使用此系统调用。（在刚刚描述的示例中，更安全的替代方法是暂时将进程的有效用户 ID 切换为真实 ID，然后调用 open(2)。）

因此，问题在于它创建了一个竞争条件，用户可以利用它来访问其他文件。

想象以下示例场景。我创建了一个`/tmp/file`允许我编写的文件。然后，您的 uid-0 程序调用`access()`检查是否允许我打开此文件进行写入，然后再向我提供对它的写入权限。

`access()`在对and的调用之间的短暂空间中`open()`，我可以将其删除`/tmp/file`并用符号链接替换为`/etc/crontab`. 我现在可以让系统运行我喜欢的任何程序，因为应用程序很乐意为我提供对`/etc/crontab`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T07:45:42.247

Linux 手册页清楚地[描述](http://www.kernel.org/doc/man-pages/online/pages/man2/access.2.html)了它

> **警告**：**`access()`**用于检查用户是否被授权，例如，在实际使用 open(2) 打开文件之前打开文件会造成安全漏洞，因为 **用户可能会利用检查和打开文件之间的短时间间隔来操作它**. 因此，应避免使用此系统调用。

还要注意。出于安全原因，公众不容易接触到安全漏洞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:46:12.717

查看：[http ://www.kernel.org/doc/man-pages/online/pages/man2/access.2.html](http://www.kernel.org/doc/man-pages/online/pages/man2/access.2.html)

> 警告：使用 access() 来检查用户是否被授权，例如，在使用 open(2) 实际打开文件之前打开文件会造成安全漏洞，因为用户可能会利用检查和打开文件之间的短时间间隔来操纵它。因此，应避免使用此系统调用。（在刚刚描述的示例中，更安全的替代方法是暂时将进程的有效用户 ID 切换为真实 ID，然后调用 open(2)。）

也可以看看：

[http://www.csl.sri.com/~ddean/papers/usenix04.pdf](http://www.csl.sri.com/~ddean/papers/usenix04.pdf)

[访问（）有什么问题？](https://stackoverflow.com/questions/11525164/what-is-wrong-with-access)

# ruby-on-rails-3 - Log File Rotation in Ruby on Rails

> ID：14333114
> 
> 赞同：0
> 
> 时间：2013-01-15T07:41:08.523
> 
> 标签：ruby-on-rails-3, log-rotation

I am working on a website in Ruby on Rails and have enabled log rotation on the server with the reference of [blog article](http://www.codebeerstartups.com/2012/10/rotating-rails-log-files/#more-24).

I have written the following code in my **/etc/logrotate.conf** file.

```
/path/to/your/rails/applicaton/log/*.log {
  daily
  missingok
  rotate 7
  compress
  delaycompress
  notifempty
  copytruncate
} 
```

But I still happen to get this error once in 2 weeks:

```
Errno::ENOSPC: No space left on device - <STDERR> 
```

In this case I have to remove the log files manually which is a cause of worry. I have rechecked my settings.

Please suggest why this issue comes even after **rotating log daily** or how I can I rotate my logs **more frequently** or any better way to escape this error.

Many Thanks!!

# ios - 检查运行代码是否为单元测试用例

> ID：14333119
> 
> 赞同：5
> 
> 时间：2013-01-15T07:41:21.857
> 
> 标签：ios, objective-c, unit-testing, uialertview

我想检查正在运行的代码是否为单位案例或不为结果执行不同的代码，例如：

```
 if ( unit test case is running )
{
do something
}
else
{
do other thing
} 
```

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:46:05.447

这是一种不好的方法，您应该尝试通过 Mock ojects 或其他机制来模拟您试图通过此 statemetn 避免的逻辑部分。

现在对于您的问题，您可以使用`isUnittest`您在测试设置和 Teardown 中设置的 oolean 变量，但正如我所说，我不建议您这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:33:12.757

不要`UIAlertView`直接发消息。相反，使用依赖注入，例如，像这样的属性

```
@property (strong, nonatomic) Class alertViewClass; 
```

然后你的代码创建一个警报就可以了

```
UIAlertView *alert = [[_alertViewClass alloc] initWithTitle:…etc…]; 
```

在您的测试代码中，注入一个不同的类。我使用[https://github.com/jonreid/JMRTestTools](https://github.com/jonreid/JMRTestTools)来指定`JMRMockAlertView`. 然后我可以使用`JMRMockAlertViewVerifier`. （事实上​​，这使得警报的测试驱动开发成为可能。）

编辑：这些天，我使用[https://github.com/jonreid/ViewControllerPresentationSpy](https://github.com/jonreid/ViewControllerPresentationSpy)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-29T12:04:33.783

另一种方法是让类具有通过静态方法控制的可定制行为，并让测试用例在其静态加载方法中调用该方法。

我在使用故事板和通过 oauth 进行身份验证的外部 restful 服务时遇到了类似的问题。应用程序委托将检查 appdelegate:didFinishLaunchingWithOptions 中是否存在有效的 oauth 令牌，如果没有，则以编程方式触发 segue 进行 oauth 登录。但这在测试用例中是不可取的。为了解决这个问题，我在应用程序委托中创建了一个静态方法来禁用登录屏幕。这是我的应用程序委托中的代码：

```
static Boolean showLoginScreen = TRUE ;

+ (void) disableLoginScreen
{
    showLoginScreen = FALSE ;
    NSLog(@"disabled login screen") ;
} 
```

测试用例有它的加载方法来执行以下操作：

```
// disable login screen for the test case
+ (void) load {
    NSLog( @"now disabling login screen" ) ;
   [XYZAppDelegate disableLoginScreen];
} 
```

这是因为在初始化应用程序之前加载了测试用例类。当然，您必须在应用程序委托中检查此标志的值以触发/不触发登录 segue。我尝试但拒绝的其他替代方案如下：

*   在测试目标上创建预处理器定义。但是编译器只编译带有这个标志的测试用例文件，而不是应用程序源。见[http://www.innovaaptor.com/blog/2013/09/02/xcode-preprocessor-macros-for-test-code.html](http://www.innovaptor.com/blog/2013/09/02/xcode-preprocessor-macros-for-test-code.html)

*   使用测试用例的静态初始化方法调用禁用方法。在测试用例运行时，应用程序在加载测试用例类之前启动。有关详细信息，请参阅[http://www.friday.com/bbum/2009/09/06/iniailize-can-be-executed-multiple-times-load-not-so-much/](http://www.friday.com/bbum/2009/09/06/iniailize-can-be-executed-multiple-times-load-not-so-much/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-18T14:53:19.750

这似乎对我有用（iOS 8，Xcode 6）：

```
- (BOOL) isRunningTest {
    return NSClassFromString(@"XCTestCase") != nil;
} 
```

我认为这比其他答案更干净、更容易。

# javascript - Bootstrap 的下拉菜单在按下后不到一秒就关闭了（Android 4.2.1，股票浏览器）

> ID：14333120
> 
> 赞同：1
> 
> 时间：2013-01-15T07:41:24.797
> 
> 标签：javascript, android, html, twitter-bootstrap

Twitter Bootstrap 在移动设备上的下拉菜单存在问题。如果我使用 Android 的股票浏览器并单击一个菜单，它会在不到一秒的时间内打开和关闭，而无需我做任何其他事情。如果我在官方 Bootstrap 网站上按下下拉菜单，也会发生同样的事情，所以这与我的代码无关。

如果您想保持下拉菜单打开并解决此问题，您必须点击它们稍长一点，例如 1 秒。但显然我想要一个简单的点击就足够了。

这对于 Android 的股票浏览器是否正常？在 Firefox 和 Opera Mini 中，下拉菜单工作得很好。

谢谢！

PS：不，我在下拉列表中没有任何形式。只有在其他浏览器中可以正常工作的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T08:57:17.137

这是一个android浏览器的东西。他们处理带有下拉菜单的链接作为悬停和点击。其他浏览器（例如 iOS）将带有下拉菜单的菜单作为悬停处理，然后再次单击以启动链接。

# regex - Regex to replace everything before last forward slash

> ID：14333125
> 
> 赞同：1
> 
> 时间：2013-01-15T07:41:39.657
> 
> 标签：regex, string

I'm doing some string manipulation and I'm very bad at regular expression. I have some string like:

```
/sonata-economy-analog-watch-men/p/itmda5wagvmtttwr 
```

I want to replace everything before the last forward slash by a blank and get only "itmda5wagvmtttwr". Does anyone know how to do this with regular expressions?

Updated - Actually I'm doing this in xml.

```
 let $url :=data($item//a[@class="fk-anchor-link"]/@href)
        let $temp :=fn:substring-before($url, "?")
    let $temp2 :=fn:replace() 
```

In url I will get string as

```
/titan-htse-analog-watch-men/p/itmd9gjfprgdt8d8?pid=WATD9H76AMCWDYT5&amp;ref=28b766fc-2692-4ba3-a4cb-ea8a060cc9ec 
```

And using fn:substring-before($url, "?") I have taken everything before ? and in temp I'm getting,

```
/titan-htse-analog-watch-men/p/itmd9gjfprgdt8d8 
```

Now I want to replace everything before last "/" and get only "itmd9gjfprgdt8d8" in temp2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:43:55.110

你可以搜索

```
[^/]*$ 
```

它为您提供了与字符串末尾相邻的所有非斜杠字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:18:35.843

您可以使用- 等效项：[http](http://www.xqueryfunctions.com/xq/functx_substring-after-last.html)`-after` : //www.xqueryfunctions.com/xq/functx_substring-after-last.html`fn_substring-before`

```
let $temp :=fn:substring-after-last(fn:substring-before($url, "?"), "/") 
```

不需要正则表达式:)

# html - file upload,changing the all files in the popup window?

> ID：14333126
> 
> 赞同：0
> 
> 时间：2013-01-15T07:41:43.053
> 
> 标签：html, file-upload

I want to change the deafult file selection limited to .pdf files only instead of `All Files(*.*)` in the file open window. Any ideas on how to implement it?

Example:

> ![](../Images/431e6f6e78326759ade7951cb3bd3c9b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:49:42.817

这**对于 Chrome 来说是可能的，只有**HTML5的新`accept`属性：

```
<input type="file" name="myfile" accept=".pdf" /> 
```

[现场测试用例](http://jsfiddle.net/ASDQJ/1/)。

IE 不支持，也可能永远不会支持该属性，Firefox 支持该属性，但它只能用于图像、音频或视频文件，而不是 PDF。

对于跨浏览器支持，您必须为每个浏览器构建浏览器扩展/插件或使用 Java/Flash。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:54:32.807

有几种方法可以做到这一点，并限制用户只选择某些文件类型，在你的情况下是 PDF。

以下是您可以通过 PHP/Javascript 实现它的两种方法，但是如果您还没有使用这些 WYSIWYG 编辑器，这些方法会产生一些开销，并且需要一些编码。

TinyMCE - [http://www.tinymce.com/wiki.php/How-to_implement_a_custom_file_browser](http://www.tinymce.com/wiki.php/How-to_implement_a_custom_file_browser)

CKEditor - [http://docs.cksource.com/CKEditor_3.x/Developers_Guide/File_Browser_(Uploader)/Custom_File_Browser](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/File_Browser_(Uploader)/Custom_File_Browser)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:55:31.390

另一种方式。您可以使用 Uploadify。

[上传](http://www.uploadify.com/documentation/uploadify/filetypeexts/)

它是 Flash 基础应用程序。每个浏览器都能正常工作。

# php - 从 PHP 数组创建 mysql 表

> ID：14333131
> 
> 赞同：0
> 
> 时间：2013-01-15T07:42:06.827
> 
> 标签：php, mysql, arrays

用户正在创建表。用户输入表格中的字段数，并根据他们输入的数字生成表单。然后他们输入列的名称和类型。然后我根据他们输入的内容创建表格。

我可以让数组正确填充，但我的错误消息说我有语法错误。我确定我做错了什么，但我尝试在查询中添加一个 while 循环，因为没有要输入的变量数量。这就是我所拥有的。如果有更好的方法来做到这一点，我会全力以赴。

```
 $sql = 'CREATE TABLE $table (
id INT NOT NULL AUTO_INCREMENT,  
PRIMARY KEY(id), ';

        while($numDone < $totalFields){
            $sql .= $colName[$x] . ' ' . $types[$x] . ', ';
            $x++;
            $numDone++;
        }
        $sql .= ')';
    $query1 = mysql_query($sql) or die(mysql_error()); 
```

**已解决我将单引号改为双引号，对$table使用点运算符，并为逗号添加了if语句。它现在正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:45:13.793

一方面，这

```
'CREATE TABLE $table' 
```

不会填写 $table，但会是 LITERALLY

```
CREATE TABLE $table 
```

`"`如果要显示变量，请使用。如果您只是回显您的`$sql`. 可能有更多，但可能通过提到的调试很容易发现......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:45:30.313

# 1

将查询的单引号 (') 更改为双引号 (")。

# 2

或使用点运算符 (.) 附加 php 变量。

```
$tableName = "mytable";
echo $query1 = "SELECT * FROM $tableName";
echo $query2 = 'SELECT * FROM $tableName'; 
```

// 输出

选择 * 从我的表

选择 * 从 $tableName

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:45:38.833

你显然有一个额外的尾随逗号：

```
CREATE TABLE $table (
       id INT NOT NULL AUTO_INCREMENT,
       PRIMARY KEY(id),
       col1 INT,
       col2 INT,
--             ^ here
       ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T07:47:11.603

您可能输入了没有大小的 VARCHAR 字段，例如`fieldname VARCHAR`会返回错误，而不是应该像`fieldname VARCHAR(100)`？正如 Quassnoi 评论的那样，尾随逗号也可能是错误的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-12T21:32:47.850

如果您想摆脱尾部斜杠，您也可以使用计数器来做到这一点。

```
$fieldsCount = count($listingFields);
foreach($listingFields as $key => $listing)
{ // create the insert statement (do not add comma at the end)
    $query .=" ".$listing[0];
    if ( $key+1 != $fieldsCount )
    {
        $query .=',';
    }
} 
```

# jquery - jquery 无法从输入元素中获取值 (2)

> ID：14333135
> 
> 赞同：1
> 
> 时间：2013-01-15T07:42:23.873
> 
> 标签：jquery, select, input, find, selector

我正在使用 jquery 尝试检索文本输入的值，但它不起作用。谁能看到我做错了什么？[http://jsfiddle.net/silvajeff/4Sb8K/3/](http://jsfiddle.net/silvajeff/4Sb8K/3/)

```
<table id="oustandingItems">
  <tr><th>Category</th></tr>
  <tr><td><input name="mytest" /></td></tr>
  <tr><td><input name="mytest" value="123"/></td></tr>
  <tr><td><input name="mytest" /></td></tr>
  <tr><td><input name="mytest" /></td></tr>
</table>

<button id="findRow">Find Row</button>
<input type="text" id="myRow" />

$("#findRow").click(function() {   
  var tableRow = $('#oustandingItems tr:has(td input[value!=""])').prevAll().length;  
 var myValue = $('#oustandingItems input:has(td input[value!=""])').val();
  $("#myRow").val(myValue);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:52:00.473

您可以将选择器简化为`#oustandingItems tr input[value!=""]`

```
$("#findRow").click(function() {
  var myValue = $('#oustandingItems tr input[value!=""]').val();
  $("#myRow").val(myValue);
}); 
```

[JSFiddle](http://jsfiddle.net/4Sb8K/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:54:25.230

你可以试试这个：http: [//jsfiddle.net/4Sb8K/6/](http://jsfiddle.net/4Sb8K/6/)

```
$("#findRow").click(function() {   
  var myValue = $('#oustandingItems').find('input[value!=""]').val();
  $("#myRow").val(myValue);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:58:07.683

您查找具有值的输入框的选择器是错误的。

```
- var myValue = $('#oustandingItems input:has(td input[value!=""])').val();

+ var myValue = $('#oustandingItems input[value!=""]').val(); 
```

顺便说一句，如果您的选择器匹配多个元素，.val() 方法仅返回第一个元素的值。如果需要遍历所有元素，请使用 .each() 方法。

# jquery - 显示像 Facebook 一样的预加载器图像

> ID：14333144
> 
> 赞同：0
> 
> 时间：2013-01-15T07:43:00.163
> 
> 标签：jquery, asp.net-mvc-3

我正在开发像 FB 这样的流，用户可以在其中发布状态/图像等

我想在 FB 中显示预加载器图像，当我们向下滚动到我们的主页时（在下行），它们会显示并自动显示下一个帖子，然后是预加载器图像，然后是帖子等等。

现在我默认显示 20 个帖子，查看按钮显示下一个帖子，

下面是我的 HTML 结构

```
<div class="item Row mydiv StreamHide StreamBox">
//Posts 
//posts
</div> 
```

这就是我隐藏一些帖子的方式

```
 $('.mydiv').each(function (index) {
                if (index <= 20) {
                    $(this).removeClass('StreamHide');
                    $(this).addClass('StreamShow');

                }
            }); 
```

我怎样才能实现像FB这样的自动显示功能![FB 自动预加载器](../Images/a871352bdf3ff7f5aa34d8eb774dd8db.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:25:16.107

您可以使用[无限滚动插件](http://www.infinite-scroll.com/infinite-scroll-jquery-plugin/)来实现此功能。

以下是您可以配置它的方法：

```
$('#content').infinitescroll({

    // selector for the paged navigation (it will be hidden)
    navSelector  : "div.navigation",

    // selector for the NEXT link (to page 2)
    nextSelector : "div.navigation a:first",

    // selector for all items you'll retrieve
    itemSelector : "#content div.post"          

}); 
```

您可能还会发现它[`following article`](http://www.jquery4u.com/tutorials/jquery-infinite-scrolling-demos/)很有用，因为它包含许多关于如何使用插件的示例。

# dojo - 如何禁用 dijit.form.FilteringSelect 上的验证？

> ID：14333145
> 
> 赞同：1
> 
> 时间：2013-01-15T07:43:05.247
> 
> 标签：dojo, dijit.form

我的[FilteringSelect](http://dojotoolkit.org/reference-guide/1.8/dijit/form/FilteringSelect.html)必须设置`required: true`但可以接受任何文本。

问题是当[store](http://dojotoolkit.org/reference-guide/1.8/dojo/store/Memory.html)中的文本不匹配时，会出现错误。

我怎样才能避免这个错误？

*注意：此代码运行良好，但它也禁用了`required`验证器。*

```
this.myFilteringSelect.validate = function () {
    //NoAction
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:55:50.553

您应该使用 a`dijit/form/ComboBox`来获得所需的行为。

[http://jsfiddle.net/cswing/ESwpr/](http://jsfiddle.net/cswing/ESwpr/)

# visual-studio-2010 - vs2010：如何在 32 位和 64 位版本的项目中指定不同的文件

> ID：14333147
> 
> 赞同：0
> 
> 时间：2013-01-15T07:43:10.997
> 
> 标签：visual-studio-2010, assembly, project, masm

我正在尝试使用 VS2010（Visual Studio）构建 4 个版本的 3D 引擎（在 C/C++ 中）。版本是：

*   32 位调试
*   32 位版本
*   64 位调试
*   64 位版本

当我构建 32 位版本时，我需要在我的项目中包含这些文件：

*   iceasm32.asm
*   igasm32.asm

当我构建 64 位版本时，我需要在我的项目中包含这些文件：

*   iceasm64.asm
*   igasm64.asm

每对 32 位 asm 文件包含与 64 位 asm 文件相同的功能，但显然 32 位项目必须只包含 32 位 asm 文件，而 64 位项目必须只包含 64 位asm 文件。

我的问题是这个。

当我将 32 位 asm 文件添加到我的 32 位 (win32) 调试和发布项目中，然后运行该程序的 32 位调试和发布版本时，它们就可以工作了。

然后，当我将 IDE 切换到 64 位 (x64) 调试和发布项目时，64 位 asm 文件不再是项目的一部分，但 32 位 asm 文件是！所以我从 64 位 (x64) 调试/发布项目中排除 32 位 asm 文件并添加 64 位 asm 文件，然后我可以构建和运行这些项目。

但是当我将 IDE 切换回 32 位 (win32) 调试和发布项目时，它们现在包含 64 位 asm 文件，但不包含 32 位 asm 文件！

为什么会这样？

前段时间我的系统盘崩溃之前，我是用VS2005开发这个程序的，没有出现这个问题。我可以让不同的文件成为 32 位和 64 位项目的一部分，它们会“原地不动”。

为什么这不适用于 VS2010？

我怀疑这很重要，但我只安装了 VS2010 的 C/C++。不确定我是否拥有不止一种 VS2005 语言，但我只使用 C/C++ 工作或编程。

当然，32 位和 64 位项目可以有不同的文件集！正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-18T18:46:08.907

对于 VS 2015：您可以在 solutionexplorer 中右键单击 masm-file 并选择 masm-file 的属性。在那里，您可以为每个配置（调试、发布、x86、x64）指定应该使用该文件的天气。该文件保留在 solutionexplorer 中，但用于/不用于不同的配置。

# node.js - node.js 中的网页缓存混淆

> ID：14333148
> 
> 赞同：1
> 
> 时间：2013-01-15T07:43:15.270
> 
> 标签：node.js, authorization, browser-cache

我`passport.js`在我的节点程序中使用，用于授权控制，

假设我有两个不同授权的页面

```
//need authorization
app.get('/admin', checkaccess, function (req, res) {

})

//doesn't need authorization
app.get('/blog', function () {

}) 
```

当我登录并在 page 时`/admin`，我跳到`/blog`同一个窗口中，然后我清除了`cookie`,

这意味着我无法再访问`/admin`，如果我打开一个新窗口并尝试`/admin`，确实我不能，

但是当我在浏览器中使用后退按钮`/blog`切换到时`/admin`，它成功了！

是缓存问题吗？我怎样才能阻止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:16:24.003

我相信这样的事情应该会有所帮助。

```
//need authorization
app.get('/admin', checkaccess, function (req, res) {
    res.header('Cache-Control', 'no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0');

})

//doesn't need authorization
app.get('/blog', function () {

}) 
```

# apache - Jmeter中的SetProperty和属性

> ID：14333150
> 
> 赞同：2
> 
> 时间：2013-01-15T07:43:18.433
> 
> 标签：apache, testing, jmeter, load-testing, stress-testing

我需要将一些变量值从一个 ThreadGroup 传递到另一个，

为此，我正在使用

```
${__setProperty(USERNAME, ${USERNAME})} 
```

在 ThreadGroup1 中设置用户名（我尝试在用户定义的变量以及 bean 断言中设置此值）并使用

```
${__property(USERNAME)} 
```

在 ThreadGroup1 中获取此值

但它不起作用。我以相同的方式设置其他变量/属性，但它们似乎也没有在 ThreadGroup2 中获取。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:59:32.453

JMeter 插件具有线程间通信，请参阅[http://code.google.com/p/jmeter-plugins/wiki/InterThreadCommunication](http://code.google.com/p/jmeter-plugins/wiki/InterThreadCommunication)为此目的。

有两种使用方法：

```
PostProcessor/PreProcessor
Functions __fifoPut and __fifoPop 
```

PostProcessor/PreProcessor 更容易使用。

# .net - 这里需要哪种 .Net 缓存技术

> ID：14333155
> 
> 赞同：0
> 
> 时间：2013-01-15T07:43:46.770
> 
> 标签：.net, wcf, caching, asp.net-caching

我**在 .Net 4.0 中有一个 WCF Web 服务。**

我正在从中调用另一个 Web 服务，它正在向我发送一个**XML 对象（大约 50 KB）作为响应。**

响应对象不太可能经常更改。所以我应该选择一种缓存技术来减少每次调用，它也会更快。

我读到有许多可用的.Net 缓存技术..有些也适用于 WCF 服务。

请指导我应该采用哪种类型的缓存技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:33:14.960

由于您只有一个服务需要访问此缓存，如果缓存每隔几个小时重置一次，这没什么大不了的，您可以让事情变得非常简单。

最简单的解决方案是使用进程内内存缓存。它基本上是内存中的字典，您可以在其中存储任何值，但它还负责不占用太多内存并在条目太旧时过期。

[这是一篇很好](http://pieterderycke.wordpress.com/2012/04/09/caching-in-wcf-services-part-1/)的文章，其中包含如何使用它的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:47:54.427

As caching is happening on your own server, you would be using deserialized xml into some class object. I think the best thing would be to use post sharp in your case. See this: [http://www.sharpcrafters.com/postsharp/download](http://www.sharpcrafters.com/postsharp/download)

# ios - sgxTextureGetImageRowBytes EXC_BAD_ACCESS

> ID：14333158
> 
> 赞同：1
> 
> 时间：2013-01-15T07:44:06.640
> 
> 标签：ios, cocoa, opengl-es

我正在开发适用于 iOS 的 OpenGL ES 2 应用程序。今天早上（不更改任何代码）我开始`EXC_BAD_ACCESS`从`sgxTextureGetImageRowBytes`.

```
#0      0x32979c20 in sgxTextureGetImageRowBytes(GLDTextureRec*, 
#           unsigned int, unsigned int) ()
#1      0x32979bd2 in CalculateChunkPlaneSizes(GLDTextureRec*, 
#           int, unsigned int*, unsigned int*, unsigned int*, unsigned int*) ()
#2      0x3297c336 in sgxConfigureTexturePrivate(GLDTextureRec*) ()
#3      0x3297af88 in glrUpdateTexture ()
#4      0x341a56c0 in gldLoadFramebuffer ()
#5      0x38387bd4 in gleUpdateDrawFramebufferState ()
#6      0x382ffa60 in glClear_Exec ()
#7      0x001221ea in clear () 
```

有没有人见过这个错误？

* * *

**编辑**：看起来其他人已经看到了类似的问题（[iOS 6 Maps 偶尔崩溃](https://stackoverflow.com/questions/13514296/ios-6-maps-occasional-crash)），但接受的解决方案对我不起作用（听起来也没有希望）。

我已向 Apple 开发者技术支持 (DTS) 提交了请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T11:15:15.700

你需要`__block`为你的`MKMapView`：

```
__block MKMapView *map = _mapView;
[map addAnnotations:nearbyPlaces]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:51:12.587

我实际上发现了iOS版本的问题。用户在 iPad 4、iOS 6.1.2 上运行，一旦我升级到 6.1.3，问题就消失了。希望这可以帮助某人。

谢谢，蒂姆

# asp.net - 如何在下一个上一个按钮的列表视图中保存值？

> ID：14333161
> 
> 赞同：0
> 
> 时间：2013-01-15T07:44:19.900
> 
> 标签：asp.net, vb.net, listview

我正在开发一个`ListView`用于显示问题的应用程序，以及来自不同表格的选项`DataBase`。
我已经指定`PageSize="1"`，`DataPager`因此一次只能显示一个问题，在选择选项后，用户单击显示另一个问题的下一步按钮，但是如果用户单击上一个按钮，`ListView`则不显示上一个选择的选项？我不知道如何保留先前选择的选项，因为我必须`DataBase`最后提交它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:44:19.553

要保留此类场景中的值，请使用 Session 对象。您可以创建一组值，例如 - Question Id、Answer Id 等并将其存储在 Session 中（HashTable 是一个不错的选择）。当用户返回时，从 Session 中获取该问题 ID 的值。每当用户移动到下一个问题时刷新 Session 对象。但请记住处理以下情况 - 用户向后移动，然后再次下一个，问题 ID 已经在收集中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:41:57.590

您可以将控件的值保留`Hashtable`在`Session`. 下面是一个示例页面，`TextBox`它`CheckBox`为`ListView`. 状态在分页事件之间被保留。

`WebForm1.aspx`页面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="WebApplication13.WebForm1" %>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <asp:ListView runat="server" ID="listView" EnableViewState="true" OnItemDataBound="listView_ItemDataBound" ClientIDMode="Inherit">

                <ItemTemplate>
                    <div class="Product">
                        <strong>
                            <asp:TextBox runat="server" ID="TextBoxId" OnTextChanged="TextBox_TextChanged"></asp:TextBox>
                            ::
                            <asp:TextBox runat="server" ID="TextBoxName" OnTextChanged="TextBox_TextChanged"></asp:TextBox>
                        </strong>
                        <br />
                        <asp:CheckBox runat="server" ID="CheckBoxChecked" AutoPostBack="true" OnCheckedChanged="CheckBoxChecked_CheckedChanged" />
                    </div>
                </ItemTemplate>
                <LayoutTemplate>
                    <asp:PlaceHolder runat="server" ID="itemPlaceholder"></asp:PlaceHolder>
                </LayoutTemplate>
                <ItemSeparatorTemplate>
                    <hr />
                </ItemSeparatorTemplate>
            </asp:ListView>

            <asp:DataPager ID="DataPagerProducts" runat="server" PagedControlID="listView"
                PageSize="1" OnPreRender="DataPagerProducts_PreRender">
                <Fields>
                    <asp:NextPreviousPagerField ShowFirstPageButton="True" ShowNextPageButton="False" />
                    <asp:NumericPagerField />
                    <asp:NextPreviousPagerField ShowLastPageButton="True" ShowPreviousPageButton="False" />
                </Fields>
            </asp:DataPager>
        </div>
    </form>
</body>
</html> 
```

文件背后的代码 - `WebForm1.aspx.cs`：

```
using System;
using System.Collections;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication13
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        /// <summary>
        /// This object will preserve the values of the controls
        /// </summary>
        internal Hashtable DataObject
        {
            get
            {
                if (Session["DataObject"] == null)
                    Session["DataObject"] = new Hashtable();
                return (Hashtable)Session["DataObject"];
            }
            set
            {
                Session["DataObject"] = value;
            }
        }
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
                BindData();
        }

        private void BindData()
        {
            listView.DataSource = new[] { 
                    new{Id=1,Name="test 1",Checked=true},
                    new{Id=2,Name="test 2",Checked=true},
                    new{Id=3,Name="test 3",Checked=true}
                };
            listView.DataBind();
        }

        protected void DataPagerProducts_PreRender(object sender, EventArgs e)
        {
            BindData();
        }

        /// <summary>
        /// Use the ItemDataBound event to set the values of the controls
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        protected void listView_ItemDataBound(object sender, ListViewItemEventArgs e)
        {
            SetValue("TextBoxId", "Id", e);
            SetValue("TextBoxName", "Name", e);
            SetValue("CheckBoxChecked", "Checked", e);
        }

        /// <summary>
        /// Sets the value of the control with the specified id by looking in the user session's DataObject hashtable
        /// </summary>
        /// <param name="id">The id of the searched control</param>
        /// <param name="dataProperty">The property name of the data item</param>
        /// <param name="e">The list view item event arguments</param>
        void SetValue(string id, string dataProperty, ListViewItemEventArgs e)
        {
            if (e.Item.DataItem == null)
                return;
            var webControl = e.Item.FindControl(id);
            switch (webControl.GetType().ToString())
            {
                //To do: handle other control types, such as System.Web.UI.WebControls.ComboBox etc.
                case "System.Web.UI.WebControls.TextBox":
                    var label = (TextBox)webControl;
                    if (DataObject[label.ClientID + e.Item.DataItemIndex.ToString()] == null)
                    {
                        DataObject[label.ClientID + e.Item.DataItemIndex.ToString()] = e.Item.DataItem.GetType().GetProperty(dataProperty).GetValue(e.Item.DataItem);
                    }
                    label.Text = String.Format("{0}", DataObject[label.ClientID + e.Item.DataItemIndex.ToString()]);
                    break;
                case "System.Web.UI.WebControls.CheckBox":
                    var checkBox = (CheckBox)webControl;
                    if (DataObject[checkBox.ClientID + e.Item.DataItemIndex.ToString()] == null)
                    {
                        DataObject[checkBox.ClientID + e.Item.DataItemIndex.ToString()] = e.Item.DataItem.GetType().GetProperty(dataProperty).GetValue(e.Item.DataItem);
                    }
                    checkBox.Checked = (bool)DataObject[checkBox.ClientID + e.Item.DataItemIndex.ToString()];
                    break;
                default:
                    break;
            }
        }

        protected void CheckBoxChecked_CheckedChanged(object sender, EventArgs e)
        {
            var checkBox = (CheckBox)sender;
            DataObject[checkBox.ClientID + (((ListViewDataItem)((Control)sender).Parent)).DataItemIndex] = checkBox.Checked;
        }

        protected void TextBox_TextChanged(object sender, EventArgs e)
        {
            var textBox = (TextBox)sender;
            DataObject[textBox.ClientID + (((ListViewDataItem)((Control)sender).Parent)).DataItemIndex] = textBox.Text;
        }
    }
} 
```

# css - 更少的 CSS - 如何使用内部变量减少 IE 过滤器？

> ID：14333163
> 
> 赞同：2
> 
> 时间：2013-01-15T07:44:24.540
> 
> 标签：css, internet-explorer, filter, escaping, less

> **可能重复：**
> [LessCSS - 带有变量和变亮的 IE 渐变过滤器](https://stackoverflow.com/questions/10324729/lesscss-ie-gradient-filter-with-variables-and-lighten)

如何在此属性中嵌入变量？

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#FFFFFF', endColorstr='#000000',GradientType=0 )"; 
```

我尝试转义它并用 + 符号连接变量，如下所示：

```
filter: ~"progid:DXImageTransform.Microsoft.gradient( startColorstr='" + @from + "', endColorstr='" + @to + "',GradientType=0 )"; 
```

没有成功。

该文档有一个 IE 过滤器示例，它们在其中转义字符串，但它们没有在其中嵌入变量。

有任何想法吗？

# android - EditText 出现在列表视图项目的前面

> ID：14333167
> 
> 赞同：0
> 
> 时间：2013-01-15T07:44:50.190
> 
> 标签：android, android-layout

我有`RelativeLayout`一个`ListView`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/container"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ListView
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:divider="@android:color/transparent"
    android:dividerHeight="-1sp"
    android:paddingLeft="16dp"
    android:paddingRight="16dp"/>

<include
    android:id="@+id/commentFooter"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    layout="@layout/post_message" />

</RelativeLayout> 
```

其中被`include`调用`post_message`的是 a`RelativeLayout`和`EditText`a `Button`。

问题是`include`出现在列表底部的列表项上方。如何使其显示在列表下方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:47:48.100

Have you tried `android:layout_below=""` ?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:56:46.670

你试过了，我检查了它是否适合你。

&如图所示

![在此处输入图像描述](../Images/b8318a21299cca05e3e26ff1343d4d77.png)

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/container"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ListView
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:divider="@android:color/transparent"
    android:dividerHeight="-1sp"
    android:paddingLeft="16dp"
    android:paddingRight="16dp"
    android:layout_above="@+id/commentFooter"
    android:layout_alignParentTop="true"/>

<include
    android:id="@+id/commentFooter"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"    
    layout="@layout/article_view"
    android:layout_alignParentBottom="true" />

</RelativeLayout> 
```

# android - 当你也有 onTouchListener 时，你如何触发 onItemClickListener？

> ID：14333170
> 
> 赞同：0
> 
> 时间：2013-01-15T07:45:04.970
> 
> 标签：android, ontouchlistener, onitemclicklistener

我正在关注[本教程](http://developer.android.com/guide/topics/ui/layout/gridview.html)，但我正在尝试为每个图像添加“触摸”方面。

如您所见，`HelloGridView`与教程完全相同：

```
public class HelloGridView extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        GridView gridview = (GridView) findViewById(R.id.gridview);
        gridview.setAdapter(new ImageAdapter(this));

        gridview.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
                Toast.makeText(HelloGridView.this, "" + position, Toast.LENGTH_SHORT).show();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

对于`ImageAdapter`，我添加了一个`onTouchListener`：

```
public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    // create a new ImageView for each item referenced by the Adapter
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(300, 300));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);

        imageView.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) { 
                if(event.getAction() == MotionEvent.ACTION_DOWN) {
                    Log.v("log_tag", "MotionEvent.ACTION_DOWN");
                    return true;
                } else if(event.getAction()==MotionEvent.ACTION_UP){
                    Toast.makeText(mContext, "ACTION_UP", Toast.LENGTH_SHORT).show();
                    Log.v("log_tag", "MotionEvent.ACTION_UP");
                    return false;
                } else {
                    return false; 
                }
            } 
        }); 

        return imageView;
    }
} 
```

问题是，每当我触摸其中一张图像时， 中的`onTouchListener`火`ImageAdapter`，而不是`onItemClickListener`中的火`HelloGridView`。

我想`onItemClickListener`开火，因此如果事件是，则`ACTION_UP`返回 false，如果是，则返回 true 。`MotionEvent.ACTION_UP``MotionEvent.ACTION_DOWN`

据我了解，如果我返回 true，则`onTouchListener`消耗事件并完成。但是，如果我返回 false，则`onTouchListener`不会消耗该事件，而是将其传递给`onItemClickListener`in `HelloGridView`。

不幸的是，只有`HelloGridView`当我在事件为`ACTION_DOWN`. 但是，当我这样做时，`ACTION_UP`永远不会被执行。有人可以告诉我我做错了什么以及如何解决吗？如果我的问题不清楚，请告诉我，我会尽力澄清！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-31T12:58:29.490

代码是

```
@Override
    public boolean onTouch(View v, MotionEvent event) {

        switch(event.getAction())
        {
        case MotionEvent.ACTION_DOWN:

            break;         
        case MotionEvent.ACTION_MOVE:

            break;   

        case MotionEvent.ACTION_UP:

            if(!mIsTouchHandeled){
                int position = mChatListView.pointToPosition((int) event.getX(), (int) event.getY());
                if(position!=ListView.INVALID_POSITION){
                    mChatListView.performItemClick(mChatListView.getChildAt(position-mChatListView.getFirstVisiblePosition()), position, mChatListView.getItemIdAtPosition(position));
                }
            }
            break;
        }           
        //       return super.onTouchEvent(event);       

        return false;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:08:49.667

OnItemClickListener 仅在 Action.Down 上触发。

只需执行以下操作：摆脱 OnItemClickListener 并将其替换为您自己的方法。诸如“ `public void myOnItemActionUp(View view, int pos)`”之类的东西-随便。

将您的引用传递`HelloGridView`给 ImageAdapter，并调用`mHelloGridView.myOnItemActionUp(v, position)`您的 OnTouchListener `if (event.getAction() == MotionEvent.ACTION_UP)`。

# iphone - ios可伸缩菜单？

> ID：14333175
> 
> 赞同：0
> 
> 时间：2013-01-15T07:45:24.463
> 
> 标签：iphone, ios, ipad

我试图弄清楚如何将可伸缩菜单（左面板）制作为 gmail 应用程序或 facebook 应用程序......

当您点击相应的按钮时，我不知道如何仅移动前窗口的一部分以显示菜单（在另一个视图中）。

你能给我一些关于如何做的线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:02:44.643

创建一个自定义容器控制器并使用仿射变换到视图控制器的视图。

# php - url 作为 url 中的变量时出现 404 错误

> ID：14333180
> 
> 赞同：0
> 
> 时间：2013-01-15T07:45:35.783
> 
> 标签：php

从 url 变量发送到 php 文件的 url 存在问题。第一个 url 显示 404 错误，而第二个工作正常。

1.  [http://example.com/fix/ajax/linksave.php?li=http%3A%2F%2Fmail.google.com%2Fma&st=14&ty=3&tl=test&ip=117.219.231.12](http://example.com/fix/ajax/linksave.php?li=http%3A%2F%2Fmail.google.com%2Fma&st=14&ty=3&tl=test&ip=117.219.231.12)

2.  [http://example.com/fix/ajax/linksave.php?li=hy&st=14&ty=3&tl=test&ip=117.219.231.12](http://example.com/fix/ajax/linksave.php?li=hy&st=14&ty=3&tl=test&ip=117.219.231.12)

所以当变量“li”想要发送一个 url 它总是显示 404 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:49:43.253

发送 url 字符串时使用 php 的`urlencode()`. 有关更多信息，请参阅[http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)。

# bash - 是否可以从 bash 脚本访问与“-c”参数关联的值？

> ID：14333183
> 
> 赞同：1
> 
> 时间：2013-01-15T07:45:46.790
> 
> 标签：bash, shell, arguments

我想这样做`bash -c '<some smart bash script>'`会输出传递给-c的实际字符串。

换句话说，如果`SCRIPT`设置为该智能脚本，`bash -c "$SCRIPT"`则应该产生`$SCRIPT`.

那可能吗？如果是，如何？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T09:00:00.083

看[`man bash`](http://www.gnu.org/software/bash/manual/bashref.html#Bash-Variables)

> **5.2 Bash 变量**
> ...
> BASH_EXECUTION_STRING
> -c 调用选项的命令参数。

如果你试试

```
bash -c 'echo $BASH_EXECUTION_STRING' 
```

它会给你

> 回声 $BASH_EXECUTION_STRING

# mysql - 根据表中id的日期选择数据

> ID：14333191
> 
> 赞同：1
> 
> 时间：2013-01-15T07:46:14.763
> 
> 标签：mysql, select

我目前正在显示我的数据库中的最后 5 个事件，其中 WHERE eventdate < CURDATE() 例如

```
 CREATE TABLE venues (
        id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
        venue VARCHAR(255)
    ) DEFAULT CHARACTER SET utf8 ENGINE=InnoDB;

    CREATE TABLE categories (
        id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
        category VARCHAR(255)
    ) DEFAULT CHARACTER SET utf8 ENGINE=InnoDB;

    CREATE TABLE events (
        id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
        eventdate DATE NOT NULL,
        title VARCHAR(255),
        venueid INT,
        categoryid INT
    ) DEFAULT CHARACTER SET utf8 ENGINE=InnoDB;

    INSERT INTO venues (id, venue) VALUES
    (1, 'USA'),
    (2, 'UK'),
    (3, 'Japan');

    INSERT INTO categories (id, category) VALUES
    (1, 'Jazz'),
    (2, 'Rock'),
    (3, 'Pop');

    INSERT INTO events (id, eventdate, title, venueid, categoryid) VALUES
    (1,20121003,'Title number 1',1,3),
    (2,20121010,'Title number 2',2,1),
    (3,20121015,'Title number 3',3,2),
    (4,20121020,'Title number 4',1,3),
    (5,20121022,'Title number 5',2,1),
    (6,20121025,'Title number 6',3,2),
    (7,20121030,'Title number 7',1,3),
    (8,20121130,'Title number 8',1,1),
    (9,20121230,'Title number 9',1,2),
    (10,20130130,'Title number 10',1,3);

    SELECT DATE_FORMAT(events.eventdate,'%M %d %Y') AS DATE, title,
    cats.category AS CATEGORY, loc.venue AS LOCATION
    FROM events
    INNER JOIN categories as cats ON events.categoryid=cats.id
    INNER JOIN venues as loc ON events.venueid=loc.id
    WHERE eventdate < CURDATE()
    ORDER BY eventdate DESC
    LIMIT 0 , 5 
```

请参阅下面的小提琴。

[http://sqlfiddle.com/#!2/21ad85/14](http://sqlfiddle.com/#!2/21ad85/14)

我想在我的数据库中显示最后 5 个事件，其中 eventdate < (events.eventdate WHERE events.id =10)

所以在 it = 10 的地方你应该能够看到事件 id 9,8,7,6,5 在它 = 9 的地方你应该能够看到 8,7,6,5,4 等。

但我不太确定如何用 sql 编写它。我认为应该是这样的

```
WHERE eventdate < (events.eventdate WHERE events.id =10) 
```

但这不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T07:49:49.413

也许你需要这个？

```
WHERE eventdate < (SELECT eventdate FROM events WHERE events.id =10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:50:20.693

你能试试这个吗？

```
wHERE eventdate < curdate() and events.id < 10

updated for the typo: `events.eventdate to curdate()` 
```

# python - CIDR子网计算和python ipcalc

> ID：14333192
> 
> 赞同：0
> 
> 时间：2013-01-15T07:46:17.587
> 
> 标签：python, ip-address, cidr

我在质疑 Python 的 ipcalc 模块（[ipcalc](http://ipcalc.readthedocs.org)）的结果（似乎 netaddr 可能是更好的选择）。

让我们`192.168.1.25/30`举个例子。在二进制中，最后一个八位位组是`00011001 AND 11111100 = 00011000`，所以我得到`192.168.1.24`Network ID 和 range `192.168.1.24 - 192.168.1.27`。

使用 ipcalc，当我指定

```
subnet = ipcalc.Network('192.168.1.25/30')
for x in subnet: print x 
```

输出是

```
192.168.1.25
192.168.1.26
192.168.1.27
192.168.1.28 
```

我不理解这种不一致。使用 CIDR 表示法时，似乎同时指定`192.168.1.24/30`and `192.168.1.25/30`(or `.26/30`or `.27/30`) 指的是同一个子网。

那是对的吗？这只是 ipcalc 模块中的一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:52:43.503

目前有一个开放的错误：[No way to resolve IP + Netmask to Network Object](https://github.com/tehmaze/ipcalc/issues/18)

以及更早的一个讨论这个问题的错误报告：[奇怪的子网计算](https://github.com/tehmaze/ipcalc/issues/4)

* * *

但他们还添加了一个函数`network`，用于从 IP 获取网络地址。从手册：

```
>>> localnet = Network('127.128.99.3/8')
>>> print localnet.network()
127.0.0.0 
```

该手册明确指出，构造函数`Network`应将*网络地址*作为其第一个参数，而不是网络中的任何 IP。如果你问我，会很困惑（特别是因为上面的代码块打破了这个条件）。在使用它之前，我至少会阅读该模块的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-29T20:37:57.267

子网是 192.168.1.24/30 是正确的，因此 ips 192.168.1.24 到 192.168.1.27 是该网络的一部分。

# php - 使用 php 从 mysql 编码或解码字符串

> ID：14333199
> 
> 赞同：1
> 
> 时间：2013-01-15T07:46:49.380
> 
> 标签：php, mysql, utf8-decode

在我的数据库中，我有一个如下所示的字段值：

`ÎœÎ‘ÎšÎ‘Î¡Î™ÎŸÎ¥ Î“\'`

我认为它必须是在我没有`UTF-8`为我的数据库设置时插入的希腊字符（我想我使用的是默认的拉丁语 1）。

有没有办法得到实际的字符？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:56:30.637

不确定，试试这个：

```
$str = "ÎœÎ‘ÎšÎ‘Î¡Î™ÎŸÎ¥ Î“\'";
$val = iconv(mb_detect_encoding($str), "UTF-8", $str);
echo $val; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:08:19.053

尝试将数据保存到文本文件中，然后在十六进制编辑器中打开文本文件（有很多不错的免费编辑器）。这可以向您显示字母的基础代码值，然后您可以将其与已发布的编码进行匹配。

例如，此页面列出了 Polytonic Greek 值的 Unicode 值（但不确定您使用的是 Polytonic）：[http](http://leb.net/reader/text/standards/unicode/old/MappingTables/NewTables/Polytonic_Greek.txt) ://leb.net/reader/text/standards/unicode/old/MappingTables/NewTables/Polytonic_Greek.txt 。

使用十六进制编辑器查看文本将帮助您获取代码值以在这样的查找表中查找。

# java - Response code 500 when accesing rest based web services though eclipse

> ID：14333203
> 
> 赞同：0
> 
> 时间：2013-01-15T07:46:58.203
> 
> 标签：java, web-services, rest

I am trying to invoke a web service from an Eclipse program. But I am getting response code 500 as response. When I access the URL from IE or Mozilla it works fine for me. My sample Eclipse program:

```
public static void main(String[] args) {
   // Use apache commons-httpclient to create the request/response
   HttpClient client = new HttpClient();
   Credentials defaultcreds = new UsernamePasswordCredentials("aaa", "aaaa");
   client.getState().setCredentials(AuthScope.ANY, defaultcreds);

   GetMethod method = new GetMethod("http://localhost:8080/usersByID/2039");
   try {
      client.executeMethod(method);
      InputStream in = method.getResponseBodyAsStream();
      // Use dom4j to parse the response and print nicely to the output stream
      BufferedReader reader = new BufferedReader(new InputStreamReader(in));
      StringBuilder out = new StringBuilder();
      String line;
      while ((line = reader.readLine()) != null) {
         out.append(line);
      }
      System.out.println(out.toString());
   } catch (IOException e) {
      e.printStackTrace();
   }
} 
```

When I opened the link in IE or Mozilla I am getting exact output. The credentials are correct.

Can any one help to overcome this.

Thanks.

# vim - 如何在 Zen Coding for vim 中分割行

> ID：14333209
> 
> 赞同：1
> 
> 时间：2013-01-15T07:47:26.020
> 
> 标签：vim, emmet

每当我为 vim 使用 Zen Coding 时，我通常会遇到同样的问题：当我想用`p`输出包装一个段落时，会如下所示：

```
<p>Text</p> 
```

但是，我希望它输出如下：

```
<p>
     Text
</p> 
```

如何告诉 zencoding 插件将输出分成几行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:59:14.210

在官方 Zen Coding 中（你的 Vim 插件有非官方的实现，但它试图贴近它），你需要对`xml`你的缩写应用过滤器。它将应用具有不同格式选项的 XML 配置文件。

因此，在您的情况下，您可以尝试使用`p|xml`缩写来换行。

有关输出调整的更多信息，您可能需要阅读以下内容：

*   [http://docs.emmet.io/customization/syntax-profiles/](http://docs.emmet.io/customization/syntax-profiles/)
*   [http://docs.emmet.io/filters/](http://docs.emmet.io/filters/)

# php - 通过引用传递，$a = &$b，$a=$n 和 $b=$n 一样吗？

> ID：14333215
> 
> 赞同：5
> 
> 时间：2013-01-15T07:47:53.833
> 
> 标签：php, pass-by-reference

我试图理解通过引用传递。这可能是一个不好的类比，但它像牛顿第三定律（动作-反应对）吗？

例如，对于以下代码

```
$a = 4;
$b = 2;
$n = 42;
$a = &$b; 
```

是

`$a=$n`一样`$b=$n`吗？`$a`和的值不是`$b`存放在同一个地址吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T08:10:58.580

如果您正常分配这些变量：

```
$a = 1;
$b = 2;
$c = 3; 
```

然后关联将如下所示：

```
a --> 1
b --> 2
c --> 3 
```

现在，如果您`$c`引用`$a`，如下所示：

```
$a = 1;
$b = 2;
$c = &$a; 
```

然后关联将如下所示：

```
a --> 1 <--.
b --> 2    |
c --------/ 
```

换句话说，`$a`和`$c`指向相同的值。因为它们都指向同一个值，我们可以更改其中任何一个变量，它们都将指向新值。

```
$a = 5;
echo "$a $c"; // Output: "5 5"
$c = 10;
echo "$a $c"; // Output: "10 10" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:53:54.243

**是**的，分配`$n`给后`$a`，**`$b`会点`$n`**。

这是因为在**两者都****执行后，并引用了同一个内存位置，变成了引用变量（）`$a=&$b``$a``$b``is_ref=1`**。并且该特定内存位置的引用计数 ( `refcount`) 增加`1`. **现在，您分配给任何这些引用的任何*值*都将指向相同的值。**

执行`$a=$n` 意味着**的值`$n`**将存储到 引用的位置`$a`。这是与 相同的位置`$b`。

请参阅此处的示例。

`$a`, `$b`,`$n`指向不同的位置

```
php > $a = 4;
php > $b = 2;
php > xdebug_debug_zval('a'); // they are pointing different location
a: (refcount=1, is_ref=0)=int(4)

php > xdebug_debug_zval('b'); // they are pointing different location
b: (refcount=1, is_ref=0)=int(2)

php > $n = 42;
php > xdebug_debug_zval('n'); 
n: (refcount=1, is_ref=0)=int(42) 
```

$a 和`$b`两者现在都成为参考

```
php > $a = &$b; 
php > xdebug_debug_zval('b');
b: (refcount=2, is_ref=1)=int(2)

php > xdebug_debug_zval('a'); // a too
a: (refcount=2, is_ref=1)=int(2) 
```

分配新**值**，而不是对任何`$a`和的引用`$b`

```
php > $a = $n;
php > xdebug_debug_zval('a'); // a holds $n's value '42' now
a: (refcount=2, is_ref=1)=int(42)

php > xdebug_debug_zval('b'); // same for b
b: (refcount=2, is_ref=1)=int(42) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:02:36.770

通常，当您创建一个变量`$a`和时`$b`，每个变量都有一个*唯一的内存地址*来存储其数据。

但是，如果您告诉解释器`$a = &$b`，这意味着 $a 和 $b 现在具有*相同的内存地址*。如果您将任何内容分配给 $a 或 $b，它们都将回显相同的值，因为它们将数据存储在内存中的相同位置。

如果你想试验，我建议从命令行启动 PHP 交互式解释器：

```
php -a
php > $a = 1;
php > $b = 2;
php > echo $a . ' ' . $b;
1 2
php > $a = &$b;
php > echo $a . ' ' . $b;
2 2
php > $a = 1;
php > echo $a . ' ' . $b;
1 1
php > $b = 2;
php > echo $a . ' ' . $b;
2 2 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-15T08:02:13.203

`$a = $b`&`$b = $n`具有相同的值但不同，因为该值是原始类型并且`primitive types pass by value`.

测试代码是否使用引用的最快速方法是更改​​源 var 的值并查看目标 var 是否更改了他的值。

```
$n = 1;
$a = $n;
$b = $n;

echo $a; // 1
echo $b; // 1
echo $n; // 1

$n = 2;

echo $a; // 1
echo $b; // 1
echo $n; // 2 
```

* * *

然而`objects always are passed by reference`

```
$n = new Object(1);
$a = $n;
$b = $n;

$n->newValue(5);

$a->printValue(); // 5
$b->printValue(); // 5

$a->newValue(7);

$b->printValue(); // 7 
```

# css - CSS 3通过检查多个值的属性来选择元素

> ID：14333219
> 
> 赞同：3
> 
> 时间：2013-01-15T07:48:07.023
> 
> 标签：css, html, css-selectors

我想将相同的样式应用于文本和电子邮件输入类型。我试过`input[type="text"][type="email"]`了，但它不起作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:50:37.760

也许可以尝试不使用 " 例如 input[type=text]。如果您想将其应用于两者，请尝试

```
input[type=text], input[type=email] 
```

或者

```
input[type="text"], input[type="email"] 
```

它们是等价的。

# java - 使用 cp 开关编译 java 程序 - 意外行为

> ID：14333227
> 
> 赞同：0
> 
> 时间：2013-01-15T07:48:54.067
> 
> 标签：java

将 -cp 开关与 javac 一起使用时，我无法理解某些行为。我在 Windows 7 机器的 C:\A\B\C> 目录中有两个 java 文件。文件是Extend.java 和TestExtend.java；两者都属于包'package com.gonni.profile'。我收到以下错误：

```
C:\A\B>javac -d . -cp C\Extend.java
javac: no source files
Usage: javac <options> <source files>
use -help for a list of possible options

C:\A\B>javac -d . -cp 39#$%$fe#%#$%FF#$%GWE C\Extend.java

C:\A\B>javac -d . -cp  C\TestExtend.java
javac: no source files
Usage: javac <options> <source files>
use -help for a list of possible options

C:\A\B>javac -d . -cp 3458$^$%$%BF#W%V#$ C\TestExtend.java
C\TestExtend.java:6: cannot find symbol
symbol  : class Extend
location: class com.gonni.profile.TestExtend
    Extend exObj = new Extend();
    ^
C\TestExtend.java:6: cannot find symbol
symbol  : class Extend
location: class com.gonni.profile.TestExtend
    Extend exObj = new Extend();
                       ^
2 errors

C:\A\B>javac -d . -cp . C\TestExtend.java

C:\A\B> 
```

Extend.java 是：

```
package com.gonni.profile;

class Extend {
    class Inner {

    }
} 
```

TestExtend.java 是：

```
package com.gonni.profile;

class TestExtend {
    public static void main(String[] args) {
        Extend exObj = new Extend();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:59:21.733

我很抱歉这么说，但我不明白你想做什么：编译你的程序还是让它`javac`失败？

1.  路径`C\TestExtend.java`似乎错误。你大概的意思是`C:\TestExtend.java`？
2.  是什么`39#$%$fe#%#$%FF#$%GWE`？你明白是什么`-cp`意思吗？
3.  您的课程属于 package `com.gonni.profile`。这意味着它们*必须*`com/gonni/profile`位于从源根目录开始的目录下。
4.  您不必提供选项`-d .`。这是默认设置。
5.  据我了解，您有几个（2 个？）类没有任何外部依赖项。这意味着您根本不必使用`-cp`（即 CLASSPATH）。

该怎么办？

1.  创建项目所在的目录。比方说`C:\myproj`。
2.  为了简化开始的事情，根据您的包创建目录结构。例如，如果您的包是`com.gonni.profile`您应该创建目录`C:\myproj\com\gonni\profile`。
3.  把你的班级放在那里。
4.  打开推荐提示并转到`C:\proj`
5.  现在运行命令`javac com/gonni/profile/*.java`

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:08:44.023

Javac 需要列出它必须在命令行中编译的所有文件。你不能只列出一个，除了它来自动发现其他人。因此，大型的现实世界项目很难以这种方式构建。另外，修复一些其他人已经指出的小错误。

因此，如果您想成为命令行大师，请学习 Eclipse、NetBeans 等进行基于 IDE 的开发，或者学习 Maven、Ant、Make 等。在这些时候直接调用 javac 是不常见的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:00:12.280

在这种情况下，您的源文件应位于 C:\A\B\C\com\gonni\profile 目录下 - 而不是 C:\A\B\C 目录下。选项 -cp 指定查找其他*编译类*的路径- 而不是源文件。

如果要指定源树的位置，请改用*-sourcepath ：*

```
 javac -sourcepath C C/com/gonni/profile/TestExtend.java 
```

# php - 如何在选择时将一个表的 id 值添加到另一个表中？

> ID：14333230
> 
> 赞同：0
> 
> 时间：2013-01-15T07:49:31.650
> 
> 标签：php, mysql

我有 2 个表 Table 1 和 Table 2 。

我期望的是以下格式。
*所需格式*

```
Table 1    
   ID   Title   S_ID    
   1    Option1   2    
   2    Option2   2    
   3    Option3   1  

Table 2       
   S_ID  SNAME    
   1     Name1    
   2     Name2    
   3     Name3 
```

但我得到了Table1的`null`值。`S_ID`

```
Table 1    
   ID   Title   S_ID    
   1    Option1   NULL    
   2    Option2   NULL    
   3    Option3   NULL

Table 2    
   S_ID  SNAME    
   1     Name1    
   2     Name2    
   3     Name3 
```

这是我的代码：

HTML：

```
<select name=sid>
<option value="select"></option>
<option value="N1">Name1</option>
<option value="N2">Name2</option>
<option value="N3">Name3</option>
</select> 
```

插入.php

```
$title=$_POST['title'];
$sid=$_POST['S_ID'];    
$insertquery="INSERT INTO review (title) VALUES('$title')"; 
```

我需要的是，当我从下拉列表中选择任何名称时，`id`表 2 中的名称应存储在表 1 中，如上述所需格式所示，并在单击特定名称时检索相应名称下的标题。

通过编写所需的代码来提供帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:25:25.310

恕我直言，您的`INSERT`陈述应如下所示：

```
$insertquery = "INSERT INTO review (title, S_ID) VALUES('$title', '$sid')"; 
```

而且您绝对需要考虑清理输入并使用准备好的语句。

**更新：**

`select`您可以使用表 2 中的选项（并假设您使用）填充您的选项，`mysqli`您可以执行以下操作：

```
<?php

$db = new mysqli("host", "user", "password", "db");

$qry = "SELECT * FROM Table2";
$result = $db->query($qry);
echo "<select name=\"S_ID\">";
echo "<option value=\"select\" selected=\"selected\">Select a name</option>";
while ($row = $result->fetch_array(MYSQL_ASSOC)) {
    echo "<option value=\"" . $row['S_ID'] . "\">" . $row['SNAME'] . "</option>";
}
echo '</select>';
$result->close();
$db->close();

?> 
```

为简洁起见，没有检查。

# jquery - jQuery .load() 在 div 标签中加载动态页面

> ID：14333237
> 
> 赞同：0
> 
> 时间：2013-01-15T07:49:57.810
> 
> 标签：jquery, google-chrome, xmlhttprequest

我正在尝试通过`.load()`方法在 div 中加载 html 页面。

```
<div id="randomDiv"> 
```

然后在 Js 函数中（比如说点击一个按钮）尝试这个：`$('#randomDiv').load('js/abc.html');`

我已经`"script src="js/jquery-1.8.2.min.js" "`在html文件中添加了。

但我收到了这个错误`: XMLHttpRequest cannot load file:////C:/code/js/abc.html Origin null is not allowed by Access-Control-Allow-Origin.`

我正在使用 Chrome。

此外，我在页面加载时收到几乎所有 js 的警告，包括“资源解释为脚本但使用 MIME 类型文本/纯文本传输”。

出了什么问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:53:30.593

尝试使用

```
$('#randomDiv').load('js/abc.html'); 
```

这是一个跨域请求，是不允许的。从**localhost**而不是**外部文件进行测试**

你`abc.html`应该在本地主机内

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:02:37.753

如前所述，您的选择器是错误的，但您还尝试向默认情况下不允许的本地文件发出 ajax 请求。您应该在 Web 服务器上运行您的页面，但您也可以使用`chrome.exe --allow-file-access-from-files`.

有关更多信息，请参阅此问题[XMLHttpRequest Origin null is not allowed Access-Control-Allow-Origin for file:/// to file:///（无服务器）](https://stackoverflow.com/questions/4208530/xmlhttprequest-origin-null-is-not-allowed-access-control-access-allow-for-file)

# c++ - 如何制作包含“私人”？

> ID：14333239
> 
> 赞同：1
> 
> 时间：2013-01-15T07:50:08.463
> 
> 标签：c++, class, header, include

有什么方法可以在一个类中包含一个文件，以便它可以使用它，但不允许包括该类在内的任何东西进入范围以能够使用它？为了简化，假设我在一个名为 IO 的类中有 iostream 标头，并且我使 IO 能够使用 cout 函数编写内容，但不允许包含 IO 的任何内容能够使用 iostream 标头中的任何内容。这不是我想做的，但我需要弄清楚这一点，所以我不会“双重定义”事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T07:57:13.787

是的，您可以，只需将其包含在`cpp`not 中即可`h`。

```
// IO.h
// note the lack of #include <iostream>

class IO
{
     // IO stuff...
     void f();
}; 
```

然后在`cpp`：

```
// IO.cpp
#include "IO.h"
#include <iostream>

IO::void f()
{
    std::cout << "Hello world!" << '\n';
} 
```

当您包含`IO.h`在您不包含的其他文件中时`<iostream>`，请查看[编译单元](http://en.wikipedia.org/wiki/Single_Compilation_Unit)概念。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T07:53:55.153

该问题的一个常见解决方案是在单独的头文件/源文件对中声明 IO。在您转发的标题中声明您将需要的类，并在源文件中包含您需要的标题。这样，标头的实际内容只能在源文件中访问。

# javascript - 使用javascript将参数添加到url

> ID：14333241
> 
> 赞同：-1
> 
> 时间：2013-01-15T07:50:12.507
> 
> 标签：javascript, jquery, ruby-on-rails, url

我是 Web 开发的新手。

我已经用参数修复了初始网址。

```
@url = http://localhost:3000/home/results?utf8=%E2%9C%93&what=&where=&commit=search&property_for= 
```

现在，我想单独向这个 url 添加参数，比如

```
@price = something
@bedrooms = something 
```

最终的`url = @url + @price + @bedrooms`

我怎样才能使用javascript得到这个？任何人都可以提供参考代码或链接以了解

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:23:56.023

试试这个功能

```
function getURL(qs) {
   var href = document.location.href;
   if (href.indexOf('?') >= 0) href = href.substring(0, href.indexOf('?'));
   if (href.indexOf('#') >= 0) {
       href = href.substring(0, href.indexOf('#'));
   }
   if (qs) {
      document.location.href = href + (qs === true ? "" : ('?' + qs)) + document.location.hash;
}
else
    return href + document.location.hash;
    return 1;
} 
```

如果您不想要任何查询字符串，则可以传递 true，并将“id = somevalue”传递给此函数以获取 url 和查询字符串

# ios - 无法更改 UIButton 的大小

> ID：14333244
> 
> 赞同：6
> 
> 时间：2013-01-15T07:50:21.987
> 
> 标签：ios, ios6, uibutton

这似乎是一件很简单的事情，我不明白为什么会出错。我正在尝试`UIButton`从`touchUpInside`另一个处理程序更改 a 的大小。为了重现，我在 Xcode 中创建了一个新的 (iOS 6) 项目，并将两个按钮拖到默认创建的 xib 文件中。的`touchUpInside`处理程序`button1`如下所示。如果我只包含设置`origin.x`of的语句`button2`，我会看到`button2`按预期移动。但是，设置`size.width`按钮的语句不起作用。事实上，如果我包含该语句，则原点也不会改变。

我可以在 xib 设计器中调整按钮的大小以及我设置的唯一属性（除了

```
- (IBAction)buttonPressed:(id)sender {
    CGRect f = self.button2.frame;
    f.origin.x += 10;
    // this doesn't work, including it prevents even the origin change from working
    f.size.width += 10; 
    self.button2.frame = f;
} 
```

如何成功更改按钮的大小？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T08:55:10.580

确定您使用的是 AutoLayout，这里发生的只是 iOS AutoLayout 机制尝试自动设置您的布局。通过关闭 AutoLayout 来尝试您的代码。希望你知道如何在 xcode 中关闭自动布局，如果不告诉我。

快乐编码！！！

编辑：

AutoLayout 随 iOS 6 一起提供，这就是您的代码适用于旧版本（iOS 5）的原因。顺便说一句，正如尼克所说，您可以在 xcode 的文件检查器中关闭 AutoLayout。

请参阅随附的屏幕截图。

![在此处输入图像描述](../Images/0196584fe95f9f8330e2a9d6bcb039c2.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T08:00:26.997

尝试 ：

```
CGRect buttonFrame = button.frame;
buttonFrame.size = CGSizeMake(150, 70);
button.frame = buttonFrame; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T00:54:07.497

使用边界：

`[self.button setBounds:CGRectMake(0, 0, 400, 400)];`

无论自动布局是否打开都有效！与往常一样，确保您的插座设置正确，以便您可以与按钮通话。

您也可以在自动布局中执行此操作。删除宽度和高度约束并添加新的约束，但是如果您的按钮上没有宽度或高度约束（可能是明智的），那么只需设置边界，除非您需要重新定位按钮，否则它应该可以正常工作当您更改按钮边界时，自动布局将自动更新约束。

顺便说一句，除非您使用它以手动方式定位对象，否则您永远不应该触摸按钮框架。Bounds 用于调整大小，frame 用于定位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-01T13:11:02.870

禁用自动布局可能不是您想要的解决方案。

一种可能性是您之前设置了按钮属性标题，现在仅更改标题字体大小将不起作用。您需要再次 setAttributedTitle

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-31T19:35:24.707

如果您尝试更改`UIButton`文本长度，您将受到默认长度的限制，并且当它太长时将执行换行符（即截断尾部或三个点）。通过以下方式更改默认大小：

`yourButton.setTitle("yourString", for: UIControlState.normal)`

这适用于大多数情况，但并非所有`UIControlState`情况

# vb.net - 匿名 HTTP 网络请求

> ID：14333245
> 
> 赞同：1
> 
> 时间：2013-01-15T07:50:26.480
> 
> 标签：vb.net, system.net.httpwebrequest

我创建了 http 请求应用程序来测试我的网站质量（见下文）。

```
 Dim Request As HttpWebRequest = WebRequest.Create(webAddress)
 Dim Response As HttpWebResponse = Request.GetResponse()

 Request.Method = "Get"

 Dim Reader As New StreamReader(Response.GetResponseStream)
 Dim Html As String = Reader.ReadToEnd() 
```

在这种情况下，我想创建匿名请求而不捕获响应。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:13:38.663

要做到这一点，你必须得到一点低级，使用套接字

在这种情况下是[TcpCient](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx)

示例代码

```
Imports System.Net.Sockets

Module Module1

    Sub Main()

        Dim tcpcli = New TcpClient()
        tcpcli.Connect("google.co.in", 80)

        Dim stream As NetworkStream = tcpcli.GetStream()
        Dim reqdata As String = String.Format("GET / HTTP/1.1{0}Host: www.google.co.in{0}Connection: Close{0}{0}", vbCrLf)
        Dim reqbytes() As Byte = Text.Encoding.ASCII.GetBytes(reqdata)

        stream.Write(reqbytes, 0, reqbytes.Length)

        stream.Close()
        stream.Dispose()

        tcpcli.Close()

    End Sub

End Module 
```

通过wireshark进行网络捕获（未收到响应） ![没有收到响应，因为没有从套接字读取响应](../Images/5830647bdaea7a3d8d293306a5a898aa.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-14T18:10:57.957

您可以使用[ProxySharp](https://github.com/m-henderson/ProxySharp)匿名发出 Web 请求。它基本上每次都在随机 vpn 后面发出 Web 请求。这使得请求看起来像是来自每个请求的不同 IP 地址。

# asp.net - 在正文标记结束之前注册脚本引用标记

> ID：14333249
> 
> 赞同：3
> 
> 时间：2013-01-15T07:50:46.393
> 
> 标签：asp.net

有没有办法在正文标记结束之前注册脚本引用？我刚刚尝试过：

```
page.ClientScript.RegisterClientScriptInclude("jquery.widgets.js", page.ResolveClientUrl("~/js/plugins/jquery.widgets.js")); 
```

但它在 ViewState 之后，在表单元素的开头注册文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T11:33:01.403

使用脚本管理器在 `Page_Load`使用`LoadScriptsBeforeUI="False"`属性时动态注册脚本，以确保在文档末尾注册脚本。

```
<body>
<form id="form1" runat="server">
    Some content here
    <asp:ScriptManager runat="server" ID="smScriptManager" LoadScriptsBeforeUI="False">
        <Scripts>

        </Scripts>
    </asp:ScriptManager>
</form> 
```

然后在你的代码中

```
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    smScriptManager.Scripts.Add(New ScriptReference("~/Include/Site.js"))
End Sub 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T11:00:30.313

我所做的是在 MasterPage 的底部创建一个 ContentPlaceHolder（如果有的话）-

```
//Any scripts required on all pages, e.g. JQuery go before the content placeholder

<asp:ContentPlaceHolder ID="ScriptContentPlaceHolder" runat="server">
</asp:ContentPlaceHolder>
</body> 
```

在单独的页面中，我将拥有 -

```
<asp:Content ContentPlaceHolderID="ScriptContentPlaceHolder" ID="PageScriptContent" runat="server">
     //Load script with application relative path
     <script src="<%= Page.ResolveURL("~/js/plugins/jquery.widgets.js") %>" type="text/javascript"></script>

     //Load script with HTML relative path
     <script src="/js/plugins/jquery.widgets.js" type="text/javascript"></script>
</asp:Content> 
```

如果您确实需要有条件地从后面的代码中添加脚本，则可以使用[Controls.Add将新文字或](http://msdn.microsoft.com/en-us/library/system.web.ui.control.controls%28v=vs.100%29.aspx)[HtmlGenericControl](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlgenericcontrol.aspx)添加到 ContentPlaceHolder 。

```
 HtmlGenericControl ScriptGenericControl = new HtmlGenericControl("script");
 ScriptGenericControl.Attributes.Add("type", "text/javascript");
 ScriptGenericControl.Attributes.Add("src", Page.ResolveURL("~/js/plugins/jquery.widgets.js"));
 PageScriptContent.Controls.Add(ScriptGenericControl); 
```

或者-

```
 PageScriptContent.Controls.Add(new Literal(){ Text = string.Format("<script type='text/javascript' src='{0}'></script>", Page.ResolveURL("~/js/plugins/jquery.widgets.js")) }; 
```

# java - Facebook 邀请 - 几个小时后很少收到邀请

> ID：14333250
> 
> 赞同：1
> 
> 时间：2013-01-15T07:50:57.153
> 
> 标签：java, android, facebook

我已经在android中完成了“使用facebook邀请用户使用应用程序”的任务，如果我发送邀请，使用下面的代码，邀请消息在几个小时后很少发送，或者没有发送，有人知道吗？解决方案？

```
final ImageView facebook1 = (ImageView) findViewById(R.id.facebook1);
        facebook1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v){

            Facebook mFacebook = new Facebook( APP_ID );

            Bundle params = new Bundle();

            params.putString("message", "Prova ");
            mFacebook.dialog(Singlemenuitem.this, "apprequests", params, new DialogListener() {
                            public void onComplete(Bundle values) {
                                                Toast toast = Toast.makeText(getApplicationContext(), "Done",
                                                        Toast.LENGTH_SHORT);
                                                toast.show();
                                            }

                                            public void onFacebookError(FacebookError error) {
                                                Toast.makeText(getApplicationContext(), "Facebook Error: " + error.getMessage(),
                                                        Toast.LENGTH_SHORT).show();
                                            }

                                            public void onCancel() {
                                                Toast toast = Toast.makeText(getApplicationContext(), "App request cancelled",
                                                        Toast.LENGTH_SHORT);
                                                toast.show();
                                            }

                                            public void onError(DialogError e) {
                                                // TODO Auto-generated method stub

                                            }
                                        });
              } }); 
```

# wcf - 在具有多个端点的客户端创建 WCF 代理

> ID：14333251
> 
> 赞同：0
> 
> 时间：2013-01-15T07:51:05.577
> 
> 标签：wcf

我有一个带有两个端点的服务。一个端点用于 wsdual 绑定，另一个用于 tcp 绑定。**当我使用wcfsvchost.exe**启动我的 wcf 服务时

```
WcfSvcHost.exe /service:"C:
\Users\TRIDIP\Documents\Visual Studio 2010\Projects\BBAChatService\BBAChatService\bin
\BBAChatService.dll" /config:"C:\Users\TRIDIP\documents\visual studio 2010\Projects
\BBAChatService\BBAChatService\Web.config" 
```

然后我的服务开始了。

问题是当我尝试在使用 WcfSvcHost.exe 启动服务后在客户端创建代理时，所有与端点相关的信息都会添加到客户端的配置文件中，但我希望当我将使用 tcp mex 端点或来自客户端的 mexHttpBinding 创建代理时，只有应在客户端的配置文件中添加有效端点，而不是所有端点。所以请指导我在服务端在我的配置文件中进行哪些更改。这是我在服务端的配置文件....请看。

```
<service name="BBAChatService.ChatService" behaviorConfiguration="BBAChatService.ChatServiceBehavior" >
        <host>
          <baseAddresses>
            <add baseAddress ="http://localhost:8732/ChatService.svc/"/>
            <add baseAddress ="net.tcp://localhost:7998/ChatService/"/>
          </baseAddresses>
        </host>

        <endpoint name="dual_bind"
                  address="dual"
                  binding="wsDualHttpBinding" 
                  bindingConfiguration="WSDualHttpBinding_IChatService" 
                  contract="BBAChatService.IChatService">
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>

        <endpoint name="tcp_bind"
              address="tcp"
              binding="netTcpBinding"
              bindingConfiguration="tcpBinding"
              contract="BBAChatService.IChatService">
        </endpoint>

        <endpoint address="net.tcp://localhost:7996/ChatService/mex"
                          binding="mexTcpBinding"
                          contract="IMetadataExchange"/>

      </service> 
```

指导我在我的配置中进行哪些更改。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:24:02.513

如果您在同一个服务中公开多个端点，那么您在 WSDL 中有多个端口，并且 svcutil（添加服务引用）将为每个提供的端口导入配置。WSDL 始终公开所有已定义的服务端点，并且 svcutil 与所有端点一起工作。

您必须手动修改客户端配置以删除客户端的 HTTP 端点配置，或者必须将服务拆分为两个不同的实现，每个实现都有一个端点。

# php - 使用 cron 时的 MySQL 性能差异

> ID：14333255
> 
> 赞同：7
> 
> 时间：2013-01-15T07:51:09.057
> 
> 标签：php, mysql, cron, cpanel

我有许多 PHP 维护脚本在使用 cPanel 的共享主机环境上运行。大多数脚本需要每 3-4 小时运行一次，为了简化它们的执行，我编写了一个调度程序脚本来检查这些脚本中的哪些（如果有的话）需要运行并在必要时执行它们。我将调度程序脚本设置为在 cron 中每 5 分钟运行一次。如果脚本发现当前没有任何维护任务到期，它什么也不做。调用调度程序的开销导致执行大约 5 个短 SQL 查询（因此这些查询每 5 分钟执行一次）。

一切正常，直到我的主机抱怨 MySQL 使用率高，声称我远远超出了允许的限制。禁用调度程序 cron 作业后，我的资源使用量下降到 0。

*   **在禁用 cron 作业之前：** MySQL procs 数（平均） - 0.97
*   **禁用 cron 作业后：** MySQL procs 数（平均） - 0.00

奇怪的是，删除cron作业后，我仍然每隔几个小时通过浏览器手动激活调度程序脚本。由于脚本仍在运行，我对 MySQL 进程的平均数量大幅下降感到非常惊讶。在禁用 cron 作业之前，我开始记录调度程序和维护脚本执行了多少 SQL 查询。

*   **禁用 cron 作业之前：**每天 9899 次查询（平均）
*   **禁用 cron 作业后：**每天 9552 次查询（平均）

因此，当我手动调用调度程序时，它仍然执行几乎与 cron 一样多的 SQL 查询，但不知何故，我的 MySQL 使用率仍然下降到基本上没有。

使用 php 命令通过 cron 作业执行 PHP 脚本与通过浏览器调用它之间是否存在与性能相关的差异？我没有在我的脚本中明确关闭数据库连接，因为我的理解是这会在执行结束时自动发生。当脚本通过 cron 运行时，此连接是否可能保持打开状态？使用 cron 时性能的显着差异还有哪些其他解释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T19:45:59.043

通常，`php.ini`与 PHP 一起安装两个文件：

*   一个用于 Apache
*   一个用于 CLI（命令行界面）

通常，cron 作业将`php -f yourfile.php`使用 CLI`php.ini`文件执行。同样，当您通过网络和通过 apache 调用脚本时，它将使用 apache`php.ini`文件。此外，apache 允许在您的虚拟主机配置或文件中使用`php_value`或。`php_flag``.htaccess`

**您很可能在 apache 和 CLI 之间存在配置差异。**

我首先想到的是持久的数据库连接。持久连接将使用到您的数据库服务器的连接*池，该连接池将在请求之间**持续存在*，即保持打开状态，以避免 TCP 握手。这是一项性能优化，但可能会超出 MySQL 服务器的连接限制。

在我的系统（Ubuntu）上，这两个`php.ini`文件的路径如下：

*   `/etc/php5/apache2/php.ini`
*   `/etc/php5/cli/php.ini`

您可以通过标志指定在命令行`php.ini`上运行时要使用的文件。`php``-c`

# c - 从 shellcode 中获取 128 位密钥

> ID：14333256
> 
> 赞同：0
> 
> 时间：2013-01-15T07:51:10.827
> 
> 标签：c, debugging, gdb, shellcode

我正在尝试从 shellcode 中取出一个 128 位的密钥。我已将 shellcode 编译为数组中的 C 代码，就像

```
#include <stdio.h>
#include <stdlib.h>
/*shellcode.c*/
char code[] = "\x31\xC0\x50\x68\x75\x70\x25\x75\x68\x23\x78\x27\x78\x68\x25\x74\x72\x20\x68\x79\x24\x73\x77\x68\x71\x72\x77\x76\x68\x20\x25\x22\x70\x68\x23\x78\x75\x27\x68\x75\x20\x23\x75\x68\x76\x72\x79\x79\x68\x20\x70\x72\x73\x68\x71\x71\x24\x25\x68\x79\x27\x76\x77\x68\x24\x77\x71\x72\x68\x27\x79\x70\x70\x68\x74\x24\x24\x75\x68\x79\x73\x23\x23\x68\x74\x22\x75\x79\x68\x23\x74\x70\x27\x68\x20\x74\x24\x79\x68\x74\x77\x24\x78\x68\x25\x27\x70\x75\x68\x74\x77\x74\x78\x68\x23\x23\x71\x76\x68\x77\x70\x73\x71\x68\x27\x20\x77\x24\x68\x22\x72\x78\x75\x68\x25\x72\x79\x77\x68\x23\x75\x79\x76\x68\x72\x71\x72\x24\x68\x71\x23\x23\x79\x68\x79\x23\x79\x70\x68\x20\x20\x76\x77\x54\x5E\x8B\xFE\x8B\xD7\xFC\xB9\x80\x00\x00\x00\xBB\x41\x00\x00\x00\x31\xC0\x50\xAC\x33\xC3\xAA\xE2\xFA\x54\x5E\xCC";
int main(int argc, char **argv)
{
int (*func)();
func = (int (*)()) code;
(int)(*func)();
} 
```

当我在linux下使用GCC编译它时。使用 GDB 反汇编后，作为位于代码数组中的 shellcode；

```
(gdb) disas &code
Dump of assembler code for function code:
   0x0000000000600840 <+0>: xor    %eax,%eax
   0x0000000000600842 <+2>: push   %rax
   0x0000000000600843 <+3>: pushq  $0x75257075
   0x0000000000600848 <+8>: pushq  $0x78277823
   0x000000000060084d <+13>:    pushq  $0x20727425
   0x0000000000600852 <+18>:    pushq  $0x77732479
   0x0000000000600857 <+23>:    pushq  $0x76777271
   0x000000000060085c <+28>:    pushq  $0x70222520
   0x0000000000600861 <+33>:    pushq  $0x27757823
   0x0000000000600866 <+38>:    pushq  $0x75232075
   0x000000000060086b <+43>:    pushq  $0x79797276
   0x0000000000600870 <+48>:    pushq  $0x73727020
   0x0000000000600875 <+53>:    pushq  $0x25247171
   0x000000000060087a <+58>:    pushq  $0x77762779
   0x000000000060087f <+63>:    pushq  $0x72717724
   0x0000000000600884 <+68>:    pushq  $0x70707927
   0x0000000000600889 <+73>:    pushq  $0x75242474
   0x000000000060088e <+78>:    pushq  $0x23237379
   0x0000000000600893 <+83>:    pushq  $0x79752274
   0x0000000000600898 <+88>:    pushq  $0x27707423
   0x000000000060089d <+93>:    pushq  $0x79247420
   0x00000000006008a2 <+98>:    pushq  $0x78247774
   0x00000000006008a7 <+103>:   pushq  $0x75702725
   0x00000000006008ac <+108>:   pushq  $0x78747774
   0x00000000006008b1 <+113>:   pushq  $0x76712323
   0x00000000006008b6 <+118>:   pushq  $0x71737077
   0x00000000006008bb <+123>:   pushq  $0x24772027
   0x00000000006008c0 <+128>:   pushq  $0x75787222
   0x00000000006008c5 <+133>:   pushq  $0x77797225
   0x00000000006008ca <+138>:   pushq  $0x76797523
   0x00000000006008cf <+143>:   pushq  $0x24727172
   0x00000000006008d4 <+148>:   pushq  $0x79232371
   0x00000000006008d9 <+153>:   pushq  $0x70792379
   0x00000000006008de <+158>:   pushq  $0x77762020
   0x00000000006008e3 <+163>:   push   %rsp
   0x00000000006008e4 <+164>:   pop    %rsi
   0x00000000006008e5 <+165>:   mov    %esi,%edi
   0x00000000006008e7 <+167>:   mov    %edi,%edx
   0x00000000006008e9 <+169>:   cld    
   0x00000000006008ea <+170>:   mov    $0x80,%ecx
   0x00000000006008ef <+175>:   mov    $0x41,%ebx
   0x00000000006008f4 <+180>:   xor    %eax,%eax
   0x00000000006008f6 <+182>:   push   %rax
   0x00000000006008f7 <+183>:   lods   %ds:(%rsi),%al
   0x00000000006008f8 <+184>:   xor    %ebx,%eax
   0x00000000006008fa <+186>:   stos   %al,%es:(%rdi)
   0x00000000006008fb <+187>:   loop   0x6008f7 <code+183>
   0x00000000006008fd <+189>:   push   %rsp
   0x00000000006008fe <+190>:   pop    %rsi
   0x00000000006008ff <+191>:   int3   
   0x0000000000600900 <+192>:   add    %al,(%rax)
End of assembler dump. 
```

看反汇编 128bit key 会在 6008fb 循环指令后计算。我对 GDB 不是很满意。如何从这个 shellcode 中获取 128 位密钥，我怀疑我需要在循环之后放置一个指针并查看内容？但我不知道该怎么做。非常感谢您提前...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:30:44.670

如果您可以成功运行此代码，它将在最后的`int3`指令处停止。此时，您将在内存中拥有从`rsp+8`（与 相同`rsi+8`）开始的解密字符串。`gdb`例如，您可以从 打印它`x/s $rsp+8`。`+8`来自`push %rax`at `0x6008f6`。_

请注意，此代码似乎是错误地移植了 32 位代码。所有`pushq`指令将存储指令中给出的立即数常量，后跟 4 个零字节。解密这将导致每 4 个字母出现`AAAA`（并且只得到一半的密钥）。`mov %esi,%edi`at`0x6008e5`将使顶部位归零，因此`rdi`代码仅在堆栈位于地址空间的前 4GB 时才有效（通常不在 64 位系统上）。

此外，代码假定它在堆栈上，但您的 C 包装器将它放在数据部分中。无论如何，您也需要执行权限。

或者，由于此代码除了对值进行异或之外什么都不`0x41`做，您可以轻松地手动完成，记住 x86 是小端序，因此在反汇编中打印的常量必须进行字节交换。

# lucene - 批量更新策略 lucene？

> ID：14333257
> 
> 赞同：2
> 
> 时间：2013-01-15T07:51:11.883
> 
> 标签：lucene, updates, bulk

对于我正在进行的一个项目，我有一个包含近 1000 万份文档的索引。对于从 100k 到 5m 的文档集，我需要定期添加字段。

Lucene 4 支持更新文档（基本上是删除和添加）。将字段添加到更大的文档集的好方法是什么？

到目前为止，我尝试的是使用`SearcherManager`包装 a `IndexWriter`，并通过将这些包装在 a 中，对尚未包含该字段但与`Query`我感兴趣的文档进行小型搜索`BooleanQuery`。然后我遍历`ScoreDocs`，检索文档，添加我的新字段并调用我与每个文档一起存储的`writer.updateDocument`。`uuid`然后我调用`commit`and `maybeRefreshBlocking`，重新获取`IndexSearcher`并再次搜索。这有点慢，似乎是一种幼稚的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:44:52.547

您只需要求**IndexSearcher**，您的搜索将根据您添加的字段返回不同的结果。

如果您的搜索永远不会受到您添加的字段的影响，您只需在将文档添加到索引时重新获取**IndexSearcher 。**

因此，如果您只在必要时而不是在每次搜索之前重新获取**IndexSearcher ，它将至少简化和加快速度。**

# c# - 在（void）扩展方法中更改值

> ID：14333258
> 
> 赞同：18
> 
> 时间：2013-01-15T07:51:12.040
> 
> 标签：c#, unity3d

所以我有这个模拟扩展方法，它将一个值更改为另一个值：

```
public static void ChangeValue(this int value, int valueToChange)
{
    value = valueToChange;
} 
```

当我尝试使用它时：

```
int asd = 8;
asd.ChangeValue(10);
Debug.Log(asd); 
```

它返回 8 而不是 10。虽然值在 ChangeValue 方法中确实发生了变化，但它并没有改变“asd”的值。我需要向该方法添加什么以使其更新“asd”？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T07:54:39.193

如果不使用`return`值或`ref`参数，您将无法做到这一点。后者不能与`this`（扩展方法）一起工作，所以你最好的选择是一个`return`值（而不是`void`）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-15T07:54:53.457

由于较新的 C# 版本支持`this ref`. 有关更多详细信息，请参阅[此答案。](https://stackoverflow.com/a/64487715/1283847)

**老答案：**

`int`是一个[`struct`](http://msdn.microsoft.com/en-us/library/ah19swz4(v=vs.71).aspx)所以它是一个[`value-type`](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)。这意味着它们是通过值而不是通过引用传递的。类是[`reference-types`](http://msdn.microsoft.com/en-us/library/490f96s2.aspx)并且它们的行为不同，它们是通过引用传递的。

您的选择是创建这样的静态方法：

```
public static void ChangeValue(ref int value, int valueToChange)
{
    value = valueToChange;
} 
```

并使用它：

```
int a = 10;
ChangeValue(ref a, 15); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-10-22T17:40:29.640

老问题，但在较新版本的 C# 上，您现在可以通过同时使用 this 和 ref 关键字来为值类型执行此操作。这会将 value 设置为与 valueToChange 相同，即使在此扩展方法之外也是如此。

```
public static void ChangeValue(this ref int value, int valueToChange)
{
    value = valueToChange;
} 
```

我相信[此更改](https://github.com/dotnet/roslyn/pull/15535)是在版本 15.1 上对编译器进行的，我认为它对应于 C# 7（或其子版本之一）。我没有立即找到有关此功能的正式公告。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T07:56:09.503

根据这个答案：[https://stackoverflow.com/a/1259307/1945651](https://stackoverflow.com/a/1259307/1945651)，在 C# 中没有办法做到这一点。像这样的原始类型`int`是不可变的，没有`out`or`ref`修饰符就不能修改，但是这里的语法不允许`out`or `ref`。

我认为您最好的情况是让扩展方法返回修改后的值，而不是尝试修改原始值。

显然这在 VB.NET 中是可能的，如果你绝对需要它，你可以在 VB.NET 程序集中定义你的扩展方法，但这可能不是一个很好的做法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-18T04:35:35.787

我知道为时已晚，但为了记录，我最近真的很想这样做，我的意思是......

```
someVariable.ChangeValue(10); 
```

...显然看起来比下面的要整洁（这也很好）

```
ChangeValue(ref someVariable, 10); 
```

我设法通过以下方式实现了类似的目标：

```
public class MyClass
{
    public int ID { get; set; }
    public int Name { get; set; }
}

public static void UpdateStuff(this MyClass target, int id, string name)
{
    target.ID = id;
    target.Name = name;
}

static void Main(string[] args)
{
    var someObj = new MyClass();    

    someObj.UpdateStuff(301, "RandomUser002");
} 
```

**请注意**，如果传递的参数是引用类型，则需要先对其进行实例化（但不在扩展方法内部）。否则，[Leri 的解决方案](https://stackoverflow.com/a/14333290 "乐瑞的解决方案")应该有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T07:55:31.337

因为`int` 是值类型，所以当你在函数中传递它时，它是*按值复制的。*

要查看函数*外部*的更改，请将其重写为：

```
public static int ChangeValue(this int value, int valueToChange)
{
    //DO SOMETHING ;

    return _value_; //RETURN COMPUTED VALUE 
} 
```

可以使用*ref* keyowrd，但它不能应用于带有 的参数`this`，因此在*您的*情况下，只需返回结果值。

# c++builder - 即使另一个正在工作，也要保持一个表单更新

> ID：14333262
> 
> 赞同：0
> 
> 时间：2013-01-15T07:51:50.503
> 
> 标签：c++builder, vcl, c++builder-2010, tgifimage

我创建了一个小表单，我想在它们工作时将其放在其他表单之上。基本上就像一个小的“正在加载...请稍候”通知。它包括一个动画*TGIFImage*。问题是，当另一个表单正在努力工作时，这个表单的动画和更新会卡顿。可能是因为它们在同一个线程中运行？有没有一种快速简便的方法可以让这个小表格总是很好地更新？也许是确保它在自己的线程中处理的快速方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:52:37.483

将艰苦的工作转移到自己的实际线程中。见`TThread`课堂。正常显示您的表单，然后启动线程，然后在线程完成工作后关闭表单。如果需要（例如进度条等），让线程将状态更新异步发布到主线程，这样工作线程就不会因为等待主线程而变慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:06:24.807

感谢 Remy Lebeau 的回答。我希望尽可能少地更改现有代码，而不是将现有代码移动到线程等中。所以我最终做的是为我的通知创建一个小工厂，它产生一个线程并在该线程中创建表单. 这样我基本上只需要用一个`Show`和一个`Hide`调用来包装我现有的代码。

# clr - 公共语言运行时在单元测试中检测到无效程序错误

> ID：14333264
> 
> 赞同：1
> 
> 时间：2013-01-15T07:52:10.717
> 
> 标签：clr, invalidoperationexception

我有以下代码

```
 this.SafeUpdate(rate, Guid.Parse(import.myGuid), c => c.myGuid); 
```

SafeUpdate 基本上采用解析后的 guid 值并将其应用于 rate 对象的 myGuid 属性。这在我的前端工作正常，但在单元测试中运行时会抛出“检测到 CLR ...”错误。奇怪的是 DateTime.Parse 和 int.Parse 的相同语句工作正常。它只是失败了 Guid 和小数。我不相信错误与解析有关（当提取到单独的变量中时它具有正确的解析值）。我也不认为这是嘲弄，因为该语句适用于除 guid 和小数以外的所有其他类型。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:27:59.873

我们昨天在构建服务器上遇到了类似的错误。我们的异常是由 DataContractSerializer 的 ReadObject() 方法引发的。

```
System.InvalidProgramException: Common Language Runtime detected an invalid program.
 at System.Xml.EncodingStreamWrapper..ctor(Stream stream, Encoding encoding)
 at System.Xml.XmlUTF8TextReader.SetInput(Stream stream, Encoding encoding, XmlDictionaryReaderQuotas quotas, OnXmlDictionaryReaderClose onClose)
 at System.Xml.XmlDictionaryReader.CreateTextReader(Stream stream, Encoding encoding, XmlDictionaryReaderQuotas quotas, OnXmlDictionaryReaderClose onClose)
 at System.Xml.XmlDictionaryReader.CreateTextReader(Stream stream, XmlDictionaryReaderQuotas quotas)
 at System.Runtime.Serialization.XmlObjectSerializer.ReadObject(Stream stream) 
```

我们编写了一个控制台应用程序，它只做这件事。它运行没有错误，但在简单的单元测试中失败。我们将 Gallio/MbUnit 3.4.11.0 用于我们的测试框架，目标是 .net 4.0。

```
using System;
using System.IO;
using System.Runtime.Serialization;
using MbUnit.Framework;

namespace TestApp
{
    [TestFixture]
    class Program
    {
        static void Main()
        {
            FooBar();
            Console.ReadKey();
        }

        public static void FooBar()
        {
            var type = typeof(string);
            var foo = "foo";

            using (var stream = new MemoryStream())
            {
                var serializer = new DataContractSerializer(type);
                serializer.WriteObject(stream, foo);
                stream.Seek(0, SeekOrigin.Begin);
                var deserializer = new DataContractSerializer(type);
                var bar = deserializer.ReadObject(stream);
                Console.WriteLine(bar);
            }
        }

        [Test]
        public void Test()
        {
            FooBar();
        }
    }
} 
```

应用程序运行良好，但测试失败。奇怪的是，这个测试通过了我的开发箱，但在我们的构建服务器以及同事的开发箱上失败了。显然，我的开发盒有一些不同之处可以让测试通过，但我还没有找到那个不同之处。

**更新 1** 我的开发盒上 System.dll 的版本是 4.0.30319.296，但在构建服务器和我同事的开发盒上是 4.0.30319.1001。然而，System.Xml.dll 和 System.Runtime.Serialization.dll 在 4.0.30319.1 中是相同的。

**更新 2** 在 Google 上快速搜索“4.0.30319.1001”会返回此安全更新，[http://support.microsoft.com/kb/2742595](http://support.microsoft.com/kb/2742595)，它适用于我们的构建服务器和我同事的开发盒，但不是我的开发箱。我卸载了构建服务器上的更新，重新启动，问题就消失了！我猜微软还没有对此进行单元测试。:-)

# xml - XML 中出现了额外的标签，但在 DTD 中没有声明

> ID：14333271
> 
> 赞同：1
> 
> 时间：2013-01-15T07:53:09.793
> 
> 标签：xml, dtd

我是 XML 新手。我正在尝试使用这个 XML：

```
<?xml version="1.0"?>
<!DOCTYPE person [
  <!ELEMENT first_name (#PCDATA)>
  <!ELEMENT last_name  (#PCDATA)>
  <!ELEMENT profession (#PCDATA)>
  <!ELEMENT name       (first_name, last_name)>
  <!ELEMENT person     (name, profession*)>
]>
<person>
  <name>
    <first_name>Alan</first_name>
    <last_name>Turing</last_name>
  </name>
  <profession>computer scientist</profession>
  <profession>mathematician</profession>
  <job>cryptographer</job>
</person> 
```

由于不存在标签，我在打开 XML 文件时没有在浏览器上出现错误。请帮助我理解这一点。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:19:02.420

我使用 IE 打开这个 xml 并且没有错误。然后使用[w3validator](http://validator.w3.org)对其进行验证。收到一个错误和两个警告：

警告：

--没有在文档级别声明字符编码

-- 使用直接输入模式：假定 UTF-8 字符编码

错误 ：

--element "job" undefined cryptographer ✉ 您在文档中使用了上述元素，但您使用的文档类型未定义该名称的元素。此错误通常由以下原因引起：

通过使用供应商专有扩展，例如“”或“”（这通常是通过使用 CSS 来实现所需的效果来修复）。通过在 XHTML 中使用大写标签（在 XHTML 中属性和元素必须全部小写）。

# mysql - 调用退出后，节点 Mysql 无法将查询入队

> ID：14333272
> 
> 赞同：27
> 
> 时间：2013-01-15T07:53:17.560
> 
> 标签：mysql, node.js, express, npm

我在哪里关闭mysql连接？

我需要按顺序运行查询。我正在编写目前看起来像这样的代码：

```
var sqlFindMobile = "select * from user_mobiles where mobile=?";
var sqlNewUser = "insert into users (password) values (?)";
//var sqlUserId = "select last_insert_id() as user_id";
var sqlNewMobile = "insert into user_mobiles (user_id, mobile) values (?,?)";
connection.connect(function(err){});
var query = connection.query(sqlFindMobile, [req.body.mobile], function(err, results) {
    if(err) throw err;
    console.log("mobile query");
    if(results.length==0) {
        var query = connection.query(sqlNewUser, [req.body.password], function(err, results) {
            if(err) throw err;
            console.log("added user");
            var user_id = results.insertId;
            var query = connection.query(sqlNewMobile, [user_id, req.body.mobile], function(err, results) {
                if(err) throw err;
                console.log("added mobile");
                    //connection.end();
                });
        });
    }
});
//connection.end(); 
```

（我是 node、npm-express 和 npm-mysql 的初学者。我尝试过搜索“express mysql cannot enqueue”以查找相关问题，但没有找到。）

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-07T09:11:45.927

我用这个方法解决了这个问题：

`connection.end()`在你的`connection.query`功能中

固定代码是[`here`](http://jsfiddle.net/shcED/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-15T11:47:11.713

如果您正在使用**felixge的****node-mysql**模块，那么您可以在完成所有 connection.query() 调用后随时调用 connection.end()，因为它会等待所有查询完成在它终止连接之前。

 **有关更多信息，请参见[此处的示例。](https://github.com/felixge/node-mysql#introduction)

如果您想连续运行大量查询，您应该查看[**async**模块](https://github.com/caolan/async)，它非常适合处理一系列异步函数（即那些有回调的函数）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-16T13:03:34.023

也许问题是由于 Node 的异步特性，mySQL 查询是在连接已经关闭后执行的。尝试在线程退出之前使用此代码调用 connection.end() ：

```
function exitHandler(options, err) {
    connection.end();
    if (options.cleanup)
        console.log('clean');
    if (err)
        console.log(err.stack);
    if (options.exit)
        process.exit();
}

//do something when app is closing
process.on('exit', exitHandler.bind(null, {cleanup: true})); 
```

改编自 @Emil Condrea 的代码，[在 node.js 退出之前执行清理操作](https://stackoverflow.com/questions/14031763/doing-a-cleanup-action-just-before-node-js-exits)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-16T19:00:56.407

在我的例子中，connection.end 在一个很难注意到的地方被调用，所以对 connection.end 的错误调用可能是这个错误的问题**

# windows-mobile - 访问windows mobile 8的USB端口

> ID：14333280
> 
> 赞同：0
> 
> 时间：2013-01-15T07:53:59.480
> 
> 标签：windows-mobile

我想使用 C# 为 Windows 8 手机开发一个应用程序。

我的应用程序将从移动设备的 USB 端口的数据引脚读取数据的位置。我想知道这是否可能，如果可以，请给我一些代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:13:05.330

在一般情况下，不，应用程序不可能这样做。

从技术上讲，您可以做的（如果您是系统 OEM）是开发一个特定于 USB 芯片组的驱动程序来执行这种低级解码。请注意，开发 USB 堆栈是一项非常重要的工作。

# android - Android getFileDir 位置

> ID：14333283
> 
> 赞同：1
> 
> 时间：2013-01-15T07:54:14.527
> 
> 标签：android, android-emulator

在 android 中，我试图将 XML 文件保存在本地。

我正在使用以下语法来做到这一点

```
File myFile = new File(getFilesDir()+"/loginUser.xml");
myFile.createNewFile(); 
```

它在模拟器和设备中运行良好。

现在我的问题是系统中的路径是什么`getFilesDir()`（在模拟器中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:05:46.640

请参阅[http://developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)。

它可能取决于系统，但通常文件存储在`/data/data`.. 每个应用程序的单独目录中的某个位置。

# android - 有没有办法在运行时列出 Android OS 中可用的动画？

> ID：14333284
> 
> 赞同：0
> 
> 时间：2013-01-15T07:54:16.710
> 
> 标签：android, android-animation

长话短说，我正在查看[框架动画](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.5_r1/frameworks/base/core/res/res/anim/grow_fade_in.xml?av=f)以了解我的应用程序的一些想法。每次切换和编译都会浪费很多时间，所以我想知道是否可以通过某种方式迭代 android.R.anim？那里似乎只有两种类型的资源，所以如果我过滤掉“_interpolator”，我应该得到所有可用的动画来检查。

这可能吗？我还有其他选择吗？每个资源都有视频的网站？同样，我现在想要实现的唯一目标是能够快速检查动画以用于 UX/过渡设计目的。

# sql - sql数据库中的关系

> ID：14333285
> 
> 赞同：-2
> 
> 时间：2013-01-15T07:54:17.817
> 
> 标签：sql, sql-server, sql-server-2008

我是新手，有一个数据库和两个表：

```
UsersTable contains userID(smallInt),Name,Family
ActivitiesTable contains WorkTime,RestTime,Date,userID(smallInt) 
```

我想在一个 DataGrid 中得到它（当我添加新记录时）：

```
userID:A WorkTime: 08:00 RestTime:14:00 Date:12.10.2012
userID:A WorkTime: 08:30 RestTime:14:00 Date:12.11.2012
userID:B WorkTime: 08:00 RestTime:15:00 Date:12.12.2012
.
.
. 
```

如何为两个表建立关系（使用主键和外键）？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:58:23.780

```
SELECT  name, workTime, restTime, [date]
FROM    usersTable u
JOIN    activitiesTable a
ON      a.userId = u.userId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:02:59.247

您可以使用创建

```
CREATE TABLE UsersTable (userID smallInt NOT NULL PRIMARY KEY, 
       Name NVARCHAR(255),
       Family NVARCHAR(255))

CREATE TABLE ActivitiesTable (WorkTime DATETIME,
     RestTime DATETIME,Date DATETIME, 
     userID smallInt NOT NULL REFERENCES UsersTable (userid), 
     id int not null identity (1,1)) 
```

我已将 id 列添加到`ActivitiesTable`. 您还应该考虑使用`INT`而不是`smallint`，因为在大多数情况下，性能和空间增益是可以忽略的。

正如其他回答正确指出的那样，选择很简单

```
Select v.userID, WorkTime, RestTime, Date   
from userTable user inner join ActivitiesTable activity
on user.userid = activity.userid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:08:22.150

将 userID 作为主键放在 UsersTable 中，作为外键放在 ActivitiesTable 中（如果连接是一对一的，最终您也可以将其作为主键）。然后用这个片段填充你的 DataGridView（它显示了如何显示一个完整的数据列表）。如果你想继续使用DataBinding，我建议不要一一添加全新的项目，而只是刷新底层DataTable和刷新DataGridView。

基本上，优化可能是向 DataTable 添加新行并刷新而不从数据库中获取所有数据（因为已经有了它，因为您刚刚将它插入到数据库中）。

对不起，我的英语不好。我希望我足够清楚。

```
 try
    {
        var bindingSource1 = new BindingSource();

        // Automatically generate the DataGridView columns.
        dataGridView1.AutoGenerateColumns = true;

        // Set up the data source.
        bindingSource1.DataSource = GetData("Select * From UsersTable Inner Join ActivitiesTable"));
        dataGridView1.DataSource = bindingSource1;

        // Automatically resize the visible rows.
        dataGridView1.AutoSizeRowsMode = 
DataGridViewAutoSizeRowsMode.DisplayedCellsExceptHeaders;
    }
    catch (SqlException)
    {
        // TODO manage errors
    }
}

private static DataTable GetData(string sqlCommand)
{
    var connectionString = "%your connection string%";
    var northwindConnection = new SqlConnection(connectionString);
    var command = new SqlCommand(sqlCommand, northwindConnection);
    var adapter = new SqlDataAdapter();

    adapter.SelectCommand = command;

    var table = new DataTable();
    table.Locale = System.Globalization.CultureInfo.InvariantCulture;
    adapter.Fill(table);

    return table;
} 
```

PS 如果您使用 DB 服务器/引擎提供程序 Linq 扩展，您可以使用它而不是硬编码查询（SqlCommand + 字符串）（只需从下面的答案中获取代码）。

# c - wcscoll函数，被标记为中毒了，怎么办？

> ID：14333295
> 
> 赞同：1
> 
> 时间：2013-01-15T07:55:19.783
> 
> 标签：c, macos, darwin, widechar

在 Mac Os X 10.6.8 上，在解决此问题之前，我无法使用标准库中的 wchar_t 函数编译代码。

wcscoll 函数以及其他一些函数：

> **inttypes.h** :#pragma GCC 毒 wcstoimax wcstoumax **stdlib.h** :#pragma GCC 毒 mbstowcs mbtowc wcstombs wctomb **wchar.h** :#pragma GCC 毒 fgetws fputwc fputws fwprintf fwscanf mbrtowc mbsnrtowcs >mbsrtowcs putwc putwchar swprintfscanf >swvwf vsvprintfscanf vprint wcrtomb wcscat wcschr wcscmp wcscoll wcscpy wcscspn wcsftime wcsftime wcslcat >wcslcpy wcslen wcsncat wcsncmp wcsncpy wcsnrtombs wcspbrk wcsrchr wcsrtombs wcsspn wcsstr >wcstod wcstof wcstok wcstol wcstold wcstoll wcstoul wcstoull wcswidth wcsxfrm wcwidth >wmemchr wmemcmp wmemcpy wmemmove wmemset wprintf wscanf

```
#include  <stdio.h>
#include <wchar.h>
#include  <string.h>
#include  <locale.h>
#include  <stdlib.h>
extern  int  errno; 
int main(void)
{
wchar_t  pwcs1[3]={L"ØL"}, pwcs2[3]={L"Ål"};
size_t   n;
(void)setlocale(LC_ALL,  "");

 /*    set it to zero for checking errors on wcscoll    */
 errno  =  0;
/*
 **    Let pwcs1 and pwcs2 be two wide character strings to
 **    compare.
 */
 /* n  =  wcscmp(pwcs1, pwcs2); */
 n  =  wcscoll(pwcs1, pwcs2); 
     /*
     **    If errno is set then it indicates some
     **    collation error.
     */
if (n < 0 ) {
    printf("%s\n","Øl mindre en Ål" );
} else if (n == 0) {
    printf("%s\n","Øl lik Ål" );
} else {
    printf("%s\n","Øl større en Ål" );
}

 if(errno  !=  0){
     /*  error has occurred... handle error ...*/
 }
} 
```

我该如何解决这个问题？我有点不愿意弄乱标准库。但我想我**也许**可以编译 GNU C 库，如果 Apple 没有修复它？或者在处理宽字符（Utf-8）的库中是否有任何其他合适的替代方案。

我正在移植一些古老的东西，所以我真的需要使用 ncurses，为了使用 ncurses，我需要宽字符！:)

编辑：据我所知，标准的包含路径应​​该是 /usr/include。我已经浏览了我拥有的 SDK 的包含目录，并且通过头文件的 grep 显示了相同的毒编译指示，来自[http://opensource.apple.com/tarballs/Libc/的最新 tarball 也是如此](http://opensource.apple.com/tarballs/Libc/)

**编辑++**

事后看来，这些编译指示的存在是有原因的，我一直在寻找替代方案，所以现在，我正在尝试构建刚刚下载的 glibc，并且我检查了没有任何“GCC 毒”编译指示的标头。

在 glibc 的配置文件中阅读了一下，我想这不是一个简单的选择。我想我必须剖析一些适用于 utf-8 并在 mac osX 上使用 ncurses 的东西来弄清楚如何。

可能是我忽略了一个简单的解决方案。但是 ncurses 依赖于 7 位 ascii，这是我的问题。我的目标是在使用 ncurses 时呈现 utf-8 语言特定的字符。我需要能够排序，因为格式是带有索引的“专有”，分叉出系统调用来排序记录是没有选择的。我还需要能够知道某种字符串中有多少个代码点，用于使用 ncurses 从显示器中进行字段编辑、插入和删除字符。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:59:03.927

到目前为止，ICU 库看起来很有希望：我想我会用 ICU 库寻求一个解决方案，据我所知，它是随 Mac Os X 一起提供的。[http://icu-project.org/apiref/icu4c/](http://icu-project.org/apiref/icu4c/)

# javascript - jQuery 引导框对话框

> ID：14333303
> 
> 赞同：0
> 
> 时间：2013-01-15T07:55:43.047
> 
> 标签：javascript, jquery

我尝试让以下代码工作

```
//===== Dialogs =====//
$(".table a.delete").click(function (e) {
    e.preventDefault();
    bootbox.confirm("Are you sure?", function (confirmed) {
        if (confirmed) {
            var $el = $(this);
            var $tr = $el.closest('tr');
            var url = $el.closest('table').data('remove-url');
            var id = $tr.data('id');

            $tr.fadeOut(function () {
                $el.remove();
                $.post(url, { id: id }); // do the delete on the server 
            });
        }
    });
}); 
```

启动箱正在显示，但下面的代码`if(confirmed)`没有运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:14:13.230

匿名 bootbox-method 中的 $(this) 并不是指您认为它所做的事情。if (confirmed) 里面的代码被执行了，但是什么都不匹配。

```
$(".table a.delete").click(function (e) {
    var $el = $(this);
    e.preventDefault();

    bootbox.confirm("Are you sure?", function (confirmed) {
        if (confirmed) {
            var $tr = $el.closest('tr');
            ... etc
        }
    });
}; 
```

# c# - 重用索引转换器表达式在 Id 上失败

> ID：14333309
> 
> 赞同：1
> 
> 时间：2013-01-15T07:56:07.233
> 
> 标签：c#, linq, ravendb

我希望能够重用索引中的一些转换表达式，以便当文档已经可用时，我可以在我的服务层中执行相同的转换。

例如，无论是通过查询还是通过在服务层转换现有文档，我都想生成一个具有这种形状的 ViewModel 对象：

```
public class ClientBrief
{
    public int Id { get; set; }
    public string FullName { get; set; }
    public string Email { get; set; }
    // ellided
} 
```

从此文档模型：

```
public class Client
{
    public int Id { get; private set; }
    public CompleteName Name { get; private set; }
    public Dictionary<EmailAddressKey, EmailAddress> Emails { get; private set; }
    // ellided
}

public class CompleteName
{
    public string Title { get; set; }
    public string GivenName { get; set; }
    public string MiddleName { get; set; }
    public string Initials { get; set; }
    public string Surname { get; set; }
    public string Suffix { get; set; }
    public string FullName { get; set; }
}

public enum EmailAddressKey
{
    EmailAddress1,
    EmailAddress2,
    EmailAddress3
}

public class EmailAddress
{
    public string Address { get; set; }
    public string Name { get; set; }
    public string RoutingType { get; set; }
} 
```

我有一个表达式可以将完整的 Client 文档转换为 ClientBrief 视图模型：

```
 static Expression<Func<IClientSideDatabase, Client, ClientBrief>> ClientBrief = (db, client) =>
        new ClientBrief
        {
            Id = client.Id,
            FullName = client.Name.FullName,
            Email = client.Emails.Select(x => x.Value.Address).FirstOrDefault()
            // ellided
        }; 
```

然后使用表达式访问者对该表达式进行操作，以便将其用作索引 (Client_Search) 的 TransformResults 属性，该属性在应用程序启动时生成后，在 Raven Studio 中具有以下定义：

地图：

```
docs.Clients.Select(client => new {
    Query = new object[] {
        client.Name.FullName,
        client.Emails.SelectMany(x => x.Value.Address.Split(new char[] {
            '@'
        })) // ellided
    }
}) 
```

（`Query`分析该字段。）

转换：

```
results.Select(result => new {
    result = result,
    client = Database.Load(result.Id.ToString())
}).Select(this0 => new {
    Id = this0.client.__document_id,
    FullName = this0.client.Name.FullName,
    Email = DynamicEnumerable.FirstOrDefault(this0.client.Emails.Select(x => x.Value.Address))
}) 
```

但是，当我已经有一个客户端文档时，用于创建索引的转换表达式也可以在本地服务层中使用：

```
var brief = ClientBrief.Compile().Invoke(null, client); 
```

它允许我只需要一段代码来理解从 Client 到 ClientBrief 的映射，无论该代码是在数据库中运行还是在客户端应用程序中运行。一切似乎都正常，除了查询结果的 ID 都是`0`.

**如何在查询中正确填充 Id 属性（整数）？**

我在这里阅读了许多类似的问题，但建议的答案似乎都不起作用。（将 Id 从整数更改为字符串不是一种选择。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T00:13:30.963

我很难完全遵循您的示例，真正深入研究此问题的最佳方法是使用失败的独立单元测试。

尽管如此，让我们看看我是否可以提取出重要的部分。

在转换中，您有两个使用 id 的区域：

```
...
client = Database.Load(result.Id.ToString())
...
Id = this0.client.__document_id,
... 
```

第一`result.Id`行和`Id =`第二行中的 the 应该是整数。

需要一个字符串文档键，这`Database.Load()`也是您在`__document_id`.

混淆来自 Raven 的文档、代码和示例，它们都交替使用术语*id*和*key*，但只有在使用字符串标识符时*才会如此。*当您使用非字符串标识符时，例如 ints 或 guids，*id*可能是`123`，但文档键仍然是`clients/123`。

所以试着改变你的变换，让它翻译：

```
...
client = Database.Load("clients/" + result.Id)
...
Id = int.Parse(this0.client.__document_id.Split("/")[1]),
... 
```

...或任何与 c# 等效的 linq 形式。

# python - awscli 入门错误

> ID：14333310
> 
> 赞同：34
> 
> 时间：2013-01-15T07:56:07.820
> 
> 标签：python, amazon-web-services, python-2.7

我已经在 1 月 2 日的 AWS 官方论坛上问过这个问题，但没有任何答复。所以，我再次在这里发布它，以便我可以修复错误。

* * *

我按照本页[http://docs.amazonwebservices.com/cli/latest/userguide/cli-chap-getting-started.html中的说明安装了 awscli](http://docs.amazonwebservices.com/cli/latest/userguide/cli-chap-getting-started.html)

以下是安装细节：

```
millisami at millisami in ~/Code/face_tester on design ✹
± which python                                                                            
/usr/local/bin/python
millisami at millisami in ~/Code/face_tester on design ✹
± python --version                                                                        
Python 2.7.3
millisami at millisami in ~/Code/face_tester on design ✹
± pip install awscli --upgrade                                                            
Requirement already up-to-date: awscli in /usr/local/lib/python2.7/site-packages
Requirement already up-to-date: botocore>=0.4.0 in /usr/local/lib/python2.7/site-packages/botocore-0.4.1-py2.7.egg (from awscli)
Requirement already up-to-date: six>=1.1.0 in /usr/local/lib/python2.7/site-packages/six-1.2.0-py2.7.egg (from awscli)
Requirement already up-to-date: argparse>=1.1 in /usr/local/lib/python2.7/site-packages/argparse-1.2.1-py2.7.egg (from awscli)
Requirement already up-to-date: requests>=0.12.1,<1.0.0 in /usr/local/lib/python2.7/site-packages/requests-0.14.2-py2.7.egg (from botocore>=0.4.0->awscli)
Requirement already up-to-date: python-dateutil>=2.1 in /usr/local/lib/python2.7/site-packages/python_dateutil-2.1-py2.7.egg (from botocore>=0.4.0->awscli)
Cleaning up...
millisami at millisami in ~/Code/face_tester on design ✹
± aws help                                                                                                                      
Traceback (most recent call last):
  File "/usr/local/share/python/aws", line 15, in <module>
    import awscli.clidriver
  File "/usr/local/lib/python2.7/site-packages/awscli/__init__.py", line 18, in <module>
    import botocore.base
ImportError: No module named botocore.base
millisami at millisami in ~/Code/face_tester on design1 ↵ ✹ 
```

自从安装 pip 成功，但为什么那个*botocore*被报告没有这样的文件？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2015-01-11T06:52:50.803

试试这个命令

```
sudo pip install awscli --force-reinstall --upgrade 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-14T21:27:04.870

对于类似的 boto 依赖项，我遇到了同样的问题。我基本上是`sudo apt-get install awscli`在一个 AWS EC2 Ubuntu 实例上运行的，它完全是开箱即用的。

在摸索了几个小时之后，以下似乎已经成功了：

```
sudo pip install boto --upgrade
sudo pip install boto3 --upgrade
sudo pip install iso8601
sudo pip install sqlalchemy 
```

`aws`运行这些命令后在命令行上键入会产生预期的“Usage: ...”消息，而不是 Python 堆栈跟踪。

我希望这对其他人也有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-23T07:06:34.020

```
brew install awscli 
```

如果您使用的是 Mac 操作系统。它适用于 Sierra

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-14T02:08:50.843

我确实遇到了同样的问题，但是通过 pip/pip3 升级 awscli 对我不起作用。问题的根本原因基本上是 2 个不同的 awscli 之间的冲突。一旦通过安装`apt-get install awscli`，一个通过`pip3 insstall awscli`. 为了解决这个问题，我删除了通过 apt-get 安装的 awscli。这样做会从 /usr/bin/aws 中删除 aws 二进制文件，因此只需从 /usr/loca/bin/aws 创建一个软链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-01T14:02:48.900

安装后不要忘记配置 awscli 工具：

```
brew install awscli 
```

或者

```
pip install awscli 
```

然后

```
aws configure 
```

我还必须：

```
pip uninstall boto3
pip install boto3=={correct version} 
```

“awscli 1.11.166 有要求 botocore==1.7.24”

# javascript - jQuery点击函数触发加载更多按钮

> ID：14333313
> 
> 赞同：0
> 
> 时间：2013-01-15T07:56:13.590
> 
> 标签：javascript, jquery

下面我有 3 个链接作为选项卡：

```
<li data-tab-id="self" class="tab selected"><a href="activity">Near You</a><span class="unread-count hidden" style="display: none;"></span></li>

<li data-tab-id="friends" class="tab"><a href="#">Following</a><span class="unread-count hidden" style="display: none;"></span></li>

<li data-tab-id="user" class="tab"><a href="#">Your Activity</a><span class="unread-count hidden" style="display: none;"></span></li> 
```

当我点击上面的链接 Jquery 点击功能被触发

```
$(".hd-ui-activity li a").click(function(e) {
e.preventDefault();
var tabid = $(this).parent().attr('data-tab-id');
    if(tabid == "self"){
            getFunc1(totalRecords);
        } else if(tabid == "friends") {
            getFunc2(totalFriendsRecords);
        } else if(tabid == "user") {
            getFunc3(totalUserRecords);
        }
}); 
```

当单击每个链接/选项卡时，`getFunc1()`会调用例如将 html 附加到以下 div 的函数（每个 func 都有自己的 div）

```
<li data-section-id="following" data-component-bound="true">
    <ul class="module-list">                            
    <!-- USER ACTIVITY JSON -->
    </ul>
    <a class="ybtn ybtn-primary ybtn-large more-wishlist" href="#" onclick="javascript:getRecentActivityFriends(event)">
    <span data-component-bound="true" class="loading-msg following">See more recent activity</span>
    </a>
</li> 
```

div 上只显示 4 个列表结果，当用户单击`see more activity`按钮时，更多结果被加载到 div 中。现在的问题是当页面加载时它正确显示 4 个结果，但是当我再次单击链接而不是按钮时，所有数据都会显示出来。我很难在选项卡之间导航。我怎样才能避免这种情况？

更新：

```
var totalFriendsRecords = '<?=$this->followingTotal?>';
function getRecentActivityFriends(event)
{
    if (event != null){
            disabledEventPreventDefault(event);
        }
        getFriendsActivity(totalFriendsRecords);
} 
```

主页.js

```
var totalFriendsRecordsView = 0;
function getFriendsActivity(totalFriendsRecords)
{
var activityHtml =  ''
$.ajax({
        url:baseUrl + "activity/feedfollowing",
        data:{'total':totalFriendsRecordsView},
        dataType:"json",
        type:"POST",
        success:function(data){

for(var i=0; i<data.length; i++){
activityHtml = '<p>'+data[i][name]+'</p>';
}
$('#activity-feed li[data-section-id=following] .module-list').append(activityHtml);
if( totalFriendsRecords <=  totalFriendsRecordsView){

                $('.following').text('Nothing beyond here ...');
                $('.following').removeAttr('onclick');
                $('.following').removeAttr('href');
            }

}
});
} 
```

# math - 为什么斐波那契堆称为斐波那契堆？

> ID：14333314
> 
> 赞同：19
> 
> 时间：2013-01-15T07:56:21.983
> 
> 标签：math, data-structures, fibonacci, fibonacci-heap

斐波那[契堆](http://en.wikipedia.org/wiki/Fibonacci_heap)数据结构的名称中有“斐波那契”一词，但数据结构中似乎没有使用斐波那契数。根据维基百科的文章：

> 斐波那契堆的名称来自运行时间分析中使用的斐波那契数。

这些斐波那契数是如何出现在斐波那契堆中的？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-15T07:56:21.983

斐波那契堆由一组较小的堆排序树组成，这些树具有不同的“顺序”，它们服从某些结构约束。斐波那契数列的出现是因为这些树的构造方式使得 n 阶树中至少有 F [n+2]个节点，其中 F [n+2]是第 (n + 2) 个斐波那契数。

要了解为什么这个结果是正确的，让我们先看看斐波那契堆中的树是如何构造的。最初，每当将一个节点放入斐波那契堆时，它就会被放入仅包含该节点的 0 阶树中。每当从斐波那契堆中删除一个值时，斐波那契堆中的一些树就会合并在一起，这样树的数量就不会变得太大。

将树组合在一起时，斐波那契堆仅将相同顺序的树组合在一起。要将两棵 n 阶树组合成 n + 1 阶树，斐波那契堆取两棵树中的哪棵树的根值大于另一棵树，然后使该树成为另一棵树的子树。这一事实的一个结果是**n 阶的树总是恰好有 n 个孩子**。

斐波那契堆的主要吸引力在于它有效地支持减少键（在摊销 O(1) 中）。为了支持这一点，斐波那契堆按如下方式实现了 reduce-key：为了减少存储在某个节点中的值的键，该节点从其父树中切出并被视为自己的独立树。发生这种情况时，其旧父节点的顺序会减一。例如，如果一棵 4 阶树从其中切出一个子树，它会收缩为 3 阶树，这是有道理的，因为树的顺序应该是它包含的子树的数量。

这样做的问题是，如果从同一棵树上剪掉太多树，我们可能会得到一棵树的顺序很大但包含的节点数量很少。斐波那契堆的时间保证只有在具有大订单的树包含大量节点时才有可能，并且如果我们可以从树中删除我们想要的任何节点，我们很容易陷入这样一种情况，即具有大订单的树仅包含少量节点。

为了解决这个问题，斐波那契堆提出了一个要求——**如果你从一棵树上砍下两个孩子，你必须反过来从它的父树上砍下那棵树。** 这意味着形成斐波那契堆的树不会被减少键严重损坏。

现在我们可以进入关于斐波那契数的部分。在这一点上，我们可以对斐波那契堆中的树说以下内容：

*   一棵 n 阶树正好有 n 个孩子。
*   n 阶树是通过取两棵 n - 1 阶树并将其中一棵树作为另一棵树的孩子而形成的。
*   如果一棵树失去了两个孩子，那棵树就会从它的父母那里被砍掉。

所以现在我们可以问——在这些假设下，你可以做出的最小的树是什么？

让我们尝试一些例子。只有一个可能的 0 阶树，它只是一个节点：

```
Smallest possible order 0 tree:      * 
```

1 阶最小的可能树必须至少是一个带有子节点的节点。我们可以创建的最小可能子节点是具有最小 0 阶树的单个节点作为子节点，即这棵树：

```
Smallest possible order 1 tree:      *
                                     |
                                     * 
```

2 阶最小的树呢？这就是事情变得有趣的地方。这棵树肯定有两个孩子，它是通过将两棵 1 阶树合并在一起形成的。因此，这棵树最初会有两个孩子 - 一个 0 阶树和一个 1 阶树。但是请记住 - 我们可以合并后将孩子从树上剪掉！在这种情况下，如果我们切掉 1 阶树的孩子，我们将得到一棵有两个孩子的树，这两个孩子都是 0 阶树：

```
Smallest possible order 2 tree:      *
                                    / \
                                   *   * 
```

订单 3 怎么样？和以前一样，这棵树是通过将两棵 2 阶树合并在一起形成的。然后我们会尝试尽可能多地剪掉这棵 3 阶树的子树。创建时，该树有 2、1 和 0 阶的子树。我们不能从 0 阶树中剪掉，但我们可以从 2 阶和 1 阶树中剪掉一个子树。如果我们这样做，我们会得到一棵有三个孩子的树，一个是 1 阶的，两个是 2 阶的：

```
 Smallest possible order 3 tree:       *
                                      /|\
                                     * * *
                                     |
                                     * 
```

现在我们可以发现一个模式。最小可能的顺序（n + 2）树将形成如下：首先创建一个正常顺序（n + 2）树，它具有顺序 n + 1、n、n - 1、...、2 , 1, 0。然后，通过从它们中删除节点而不从同一节点中删除两个子节点来使这些树尽可能小。这会留下一棵具有 n、n - 2、...、1、0 和 0 顺序子节点的树。

我们现在可以编写一个递归关系来尝试确定这些树中有多少个节点。如果这样做，我们会得到以下结果，其中 NC(n) 表示可以在 n 阶树中的最小节点数：

```
NC(0) = 1
NC(1) = 2
NC(n + 2) = NC(n) + NC(n - 1) + ... + NC(1) + NC(0) + NC(0) + 1 
```

在这里，最后的 +1 代表根节点本身。

如果我们扩展这些术语，我们会得到以下信息：

```
NC(0) = 1
NC(1) = 2
NC(2) = NC(0) + NC(0) + 1 = 3
NC(3) = NC(1) + NC(0) + NC(0) + 1 = 5
NC(4) = NC(2) + NC(1) + NC(0) + NC(0) + 1 = 8 
```

如果您注意到，这正是偏移两个位置的斐波那契数列。换句话说，这些树中的每一个都必须至少有 F [n+2]个节点，其中 F [n + 2]是 (n + 2)nd 斐波那契数。

那么为什么叫斐波那契堆呢？ **因为每棵 n 阶树中必须至少有 F [n+2]个节点！**

如果你很好奇，**[关于斐波那契堆的原始论文](http://www.cl.cam.ac.uk/~sos22/supervise/dsaa/fib_heaps.pdf#page=9)**有这些可能最小的树的图片。很漂亮！另外，查看[这篇 CS Theory Stack Exchange Post](https://cstheory.stackexchange.com/questions/46796/is-there-a-simple-intuitive-explanation-for-why-trees-in-fibonacci-heaps-have-t)以获得关于为什么 Fibonacci 堆树具有它们的大小的替代解释。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-27T09:13:20.617

我想给出一个直观的解释，我自己有一个“啊哈！” 时刻。

树结构的运行时间为 O(log n)，因为它们能够根据高度存储指数数量的项目。二叉树可以存储 2^h，三叉树可以存储 3^h，以此类推 x^h 作为通用案例。

x 可以小于 2 吗？当然可以！只要 x > 1，我们仍然可以实现日志运行时间，并且能够为其高度存储指数级大量项目。但是我们如何建造这样一棵树呢？斐波那契堆是 x ≈ 1.62 或[黄金比例](http://en.wikipedia.org/wiki/Golden_ratio)的数据结构。每当我们遇到黄金分割率时，总会有斐波那契数字潜伏在某处……

斐波那契堆实际上是一片树林。在一个称为“合并”的过程之后，这些树中的每一个都持有不同数量的项目，这些项目是 2 的精确幂。例如，如果您的斐波那契堆有 15 个项目，那么它将有 4 棵树分别持有 1、2、4 和 8项目分别看起来像这样：

![在此处输入图像描述](../Images/02ca868a7b8e44fe5f8cae2cb0cddf80.png)

“合并”过程的细节无关紧要，但本质上它基本上保持联合森林中相同程度的树木，直到所有树木都具有不同的程度（尝试一个[很酷的可视化](http://cs.usfca.edu/~galles/visualization/FibonacciHeap.html)来查看这些树木是如何构建的）。由于您可以将任何 n 写为 2 的精确幂的总和，因此很容易想象对于任何 n，斐波那契堆的合并树会是什么样子。

好的，到目前为止，我们仍然没有看到与斐波那契数字有任何直接联系。他们在哪里出现？它们实际上出现在非常特殊的情况下，这也是为什么斐波那契堆可以为 DECREASE-KEY 操作提供 O(1) 时间的关键。当我们减少一个键时，如果新键仍然大于父键，那么我们不需要做任何其他事情，因为没有违反最小堆属性。但如果不是，那么我们不能将较小的孩子埋在较大的父母之下，因此我们需要将其子树切掉并从中制作一棵新树。显然我们不能对每次删除都这样做，否则我们最终会得到太高的树并且不再有指数项，这意味着提取操作不再需要 O(log n) 时间。所以问题是我们可以设置什么规则，以便树的高度仍然具有指数项？聪明的见解是这样的：

`We will allow each parent to loose up to one child. If there is a subsequent attempt to remove another child from same parent then we will cut that parent also out of that tree and put it in root list as tree of 1.`

上述规则确保即使在最坏的情况下，树的高度仍然具有指数项。最坏的情况是什么？当我们让每个父母失去一个孩子时，就会发生更糟糕的情况。如果父母有 > 1 个孩子，我们可以选择要摆脱哪个孩子。在这种情况下，让我们摆脱具有最大子树的孩子。所以在上图中，如果你对每个父母都这样做，你将拥有大小为 1、1、2 和 3 的树。在这里看到一个模式吗？只是为了好玩，在上图中添加新的 4 阶树（即 16 项），并猜测在为每个父级运行此规则后您会剩下什么： 5\. 我们这里有一个斐波那契数列！

由于斐波那契数列是指数的，每棵树仍然保留指数数量的项目，因此 EXTRACT-MIN 操作的运行时间为 O(log n)。但是请注意，DECREASE-KEY 现在只需要 O(1)。另一件很酷的事情是，您可以将任何数字表示为斐波那契数的总和。例如，32 = 21 + 8 + 3 这意味着如果您需要在 Fibonacci 堆中保存 32 个项目，您可以使用分别容纳 21、8 和 3 个项目的 3 棵树来实现。然而，“整合”过程不会产生具有斐波那契节点数的树。它们仅在发生这种更糟糕的 DECREASE-KEY 或 DELETE 情况时才会发生。

**进一步阅读**

*   [二项式堆](http://en.wikipedia.org/wiki/Binomial_heap)- 斐波那契堆本质上是惰性二项式堆。这是一个很酷的数据结构，因为它显示了一种在树中存储指数项的不同方式，因为它的高度不同于二叉堆。
*   [斐波那契堆背后的直觉](https://stackoverflow.com/questions/19508526/what-is-the-intuition-behind-the-fibonacci-heap-data-structure?lq=1)任何想要了解斐波那契堆核心的人都需要阅读。教科书通常在这个主题上要么太浅，要么太杂乱，但这个 SO 答案的作者已经把它钉牢了。

# api - Rdio Web 服务 API 的速率限制是多少？

> ID：14333322
> 
> 赞同：1
> 
> 时间：2013-01-15T07:56:47.737
> 
> 标签：api, rdio

[Rdio 的 Web 服务 API](http://developer.rdio.com/docs/REST/)有速率限制吗？似乎无法在文档中或通过快速搜索找到它，但我正在`403 Developer Over Qps`从脚本调用到[search endpoint](http://developer.rdio.com/docs/read/rest/Methods#search)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T16:32:23.367

他们是这样。当您登录到您的开发者帐户时，您可以通过转到“我的帐户”查看每个应用程序的速率限制。

默认设置为每秒 10 次调用，每天 15,000 次。![在此处输入图像描述](../Images/3b9576a4a02a3dba038b6eaa4904f178.png)

# php - 使用 codeigniter 的验证码不起作用

> ID：14333323
> 
> 赞同：2
> 
> 时间：2013-01-15T07:56:48.517
> 
> 标签：php, codeigniter, captcha

我正在尝试使用 codeigniter 实现验证码功能。但它不显示验证码图像。

这是我的代码：

//控制器文件：captcha.php

```
<?php

class Captcha extends CI_Controller {
    var $controller = "captcha";   
    var $viewContent = array();

    public function __construct() {
        parent::__construct();
        $this->load->view('header');
    }

    /* Function To load captcha view file */

    function list_captcha() { 
```

// 加载验证码助手

```
 $this->load->helper('captcha');
        $data = array(
            'img_path' => './captcha/',
            'img_url' => 'localhost/demoProject/application/captcha/',
            'img_width' => '150',
            'img_height' => 24,
            'border' => 0,
            'expiration' => 7200
        );
        $captchaArr = create_captcha($data);
        $this->viewContent['captchaArr'] = $captchaArr;
        $this->viewContent['captchaWord'] = $captchaArr['word'];
        //echo"<pre>"; print_r($captchaArr);exit;
        $this->viewContent['refreshUrl'] = "localhost/
        demoProject/" . $this->controller . "/list_" . $this->controller;
        $this->load->view($this->controller, $this->viewContent);
        $this->load->view('footer');
    }

}
?> 
```

//查看文件：captcha.php

```
<script>
    $(document).ready(function(){
        $("#captcha").blur(function(){
            if($("#captcha").val()== '<?php echo $captchaWord; ?>'){
                alert('Captcha match');
            }else{
                alert('Please enter same word like captcha image.');
            }
        });
    });
</script>
<table>
    <tr>
        <td>
            Captcha Image
        </td>
        <td style="text-align: center">
            &nbsp;&nbsp;<?php echo $captchaArr['image']; ?><br>
        </td>
    </tr>
    <tr>
        <td>Enter the same code here </td>
        <td style="text-align: center">&nbsp;&nbsp;
            <?php
            $data = array('name' => 'captcha', 'id' => 'captcha');
            echo form_input($data);
            ?>
        </td>
    </tr>
    <tr>
        <td>Can't read the image?</td>
        <td style="text-align: center">&nbsp;&nbsp;<a href="<?php echo $refreshUrl; ?>">Refresh</a></td>
    </tr>
</table> 
```

我没有得到这段代码有什么问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:35:37.067

我相信你的问题是这一行：

```
img_url' => 'localhost/demoProject/application/captcha/', 
```

您的 URL 缺少`http://`协议标识符。

`img_url`CAPTCHA 助手永远不会修改它 - 它直接用于创建`<img>`标签，该标签直接转储到您的 HTML 输出中。

当浏览器尝试加载图像时，它没有意识到这是一个网址，因此无法加载。

您应该修改这行代码以包含该`http://`部分。更好的是，您应该使用 CodeIgniter 的[`base_url()`](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)函数生成 URL，以便您的代码可以灵活地适应未来的变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T14:25:49.320

您可以制作如下所示的验证码。

```
$values = array(
            'word' => '',   //Generate alternate word by default. You can also set your word.
            'word_length' => 6,  // To set length of captcha word.
            'img_path' => './images/',   // Create  folder "images" in root directory, and give path.
            'img_url' => base_url() .'images/',  // To store captcha images in "images" folder.
            'font_path' => FCPATH.'system/fonts/texb.ttf',
            'img_width' => '250',   //Set image width.
            'img_height' => 50,   // Set image height.
            );

        // "create_captcha" is function of "captcha helper", this will set array in helper library.
        $captcha = create_captcha($values); 
```

注意：- font_path 应该包含绝对路径。

# javascript - 识别哪个选项卡发出请求

> ID：14333329
> 
> 赞同：6
> 
> 时间：2013-01-15T07:57:06.863
> 
> 标签：javascript, ajax

这个问题大概没有答案。但是，我想我会试一试。我写了一个很棒的单页应用程序。当应用程序启动时，打开的选项卡将自己“注册”到服务器，服务器存储为“活动”选项卡。

如果用户 A 在工作区中更改 XYZ，则任何用户在该工作区上打开的每个选项卡都会收到 XYZ 已更改的通知。这会触发客户端重新加载，这将神奇地更新。目前，我正在通过投票来做到这一点。但是，当一切正常时，我可以使用 WS 或 Socket.io 之类的东西来使事情变得更快。

**问题：每个选项卡都会收到通知。甚至是最初煽动它的标签！**（结果，一个已经更新的屏幕得到更新）

我不知何故需要服务器知道发出请求的选项卡的选项卡 ID。请记住，用户可能打开了 5 个选项卡：如果他们更改 XYZ，所有选项卡都应该收到通知，除了实际触发它的选项卡！

目前，我正在为每个 Ajax 请求传递工作区 ID（用户可能已登录，并且可以同时访问多个工作区）。

*   解决方案 1：为每个请求附加工作区 ID*和选项卡 ID*
*   解决方案 2：仅对每个请求使用选项卡 ID。该应用程序将从 tabID 中计算出工作区 ID（它知道它属于哪个工作区）
*   解决方案3：？？？？？？（我错过了什么？）

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:53:02.103

与其让服务器担心向您发送更改通知的选项卡，不如让启动更改的选项卡忽略通知。

想到了两种方法：

*   更改内容后，选项卡将在短时间内忽略所有通知。（除非在短时间内发生多个选项卡上的更改，否则这将正常工作。）
*   让选项卡创建一个“更改 ID”，将其与 xyz 的更改一起发送到服务器。广播更改通知包含此 ID，发送选项卡将其识别为它发送的 ID，并忽略它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:09:01.330

您可以尝试使用[HTML5 Visibility API](http://www.html5rocks.com/en/tutorials/pagevisibility/intro/)回退到`window.onfocus`&`window.onblur`事件，并在页面当前可见/活动时禁止更新页面。

# mongodb - MongoDB 索引是否在重新启动时保持不变？

> ID：14333331
> 
> 赞同：3
> 
> 时间：2013-01-15T07:57:12.553
> 
> 标签：mongodb, mongoose

参考此处的指南[http://docs.mongodb.org/manual/core/indexes/](http://docs.mongodb.org/manual/core/indexes/)我无法判断字段的 Mongo 索引是否持久存储。

如果`ensureIndex()`在使用 的应用程序中调用（并完成）`MongoDB`，如果出现以下情况会发生什么：

1.  使用的应用程序`MongoDB`重新启动。随后的调用会`ensureIndex()`导致完整的重新索引吗？
2.  `MongoDB`服务器重新启动。以后`ensureIndex()`从客户端应用程序调用是否会重建？
3.  拥有多个客户端会话是否会影响这些？根据文档，我假设索引在整个集合中是全局的：`"MongoDB defines indexes on a per-collection level."`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T08:14:45.983

> 重新启动使用 MongoDB 的应用程序。随后对 ensureIndex() 的调用会导致完整的重新索引吗？

不，它应该（与其他所有驱动程序一样）注册为无操作，因为索引已经存在。一些驱动程序提供了一种缓存机制来检测是否已创建索引（即 Python），而无需访问服务器。

> MongoDB 服务器重新启动。稍后从客户端应用程序调用 ensureIndex() 会重建吗？

和上面一样

> 拥有多个客户端会话是否会影响这些？根据文档，我假设索引在整个集合中是全局的：“MongoDB 在每个集合级别定义索引。”

是的，索引存储在集合本身的 MongoDB 中（从技术上讲，作为`db.ns`文件中的命名空间）。由于它是单点知识，`ensureIndex`并且索引是单个进程（实际上很像写锁），因此多个连接不应该影响索引创建是否注册两次。

# c# - 如何将 CF_DIBV5 从剪贴板 (Format17) 转换为透明位图？

> ID：14333336
> 
> 赞同：3
> 
> 时间：2013-01-15T07:57:20.323
> 
> 标签：c#, .net, gdi+, clipboard

GDI+ 不支持`CF_DIBV5`格式化，但是当几个应用程序将透明图像放到剪贴板时，它们使用`CF_DIBV5`（格式 17）格式来维护 Alpha 通道。

.NET Framework 无法处理`CF_DIBV5`格式，因此 .NET 应用程序无法将 Alpha 图像放入/从剪贴板中检索。

是否有任何 c# 代码支持`CF_DIBV5`从剪贴板进行位图转换？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T10:22:44.867

对不起！我正在回答我自己的问题：

```
[StructLayout(LayoutKind.Sequential)]
public struct BITMAPV5HEADER
{
  public uint bV5Size;
  public int bV5Width;
  public int bV5Height;
  public UInt16 bV5Planes;
  public UInt16 bV5BitCount;
  public uint bV5Compression;
  public uint bV5SizeImage;
  public int bV5XPelsPerMeter;
  public int bV5YPelsPerMeter;
  public UInt16 bV5ClrUsed;
  public UInt16 bV5ClrImportant;
  public UInt16 bV5RedMask;
  public UInt16 bV5GreenMask;
  public UInt16 bV5BlueMask;
  public UInt16 bV5AlphaMask;
  public UInt16 bV5CSType;
  public IntPtr bV5Endpoints;
  public UInt16 bV5GammaRed;
  public UInt16 bV5GammaGreen;
  public UInt16 bV5GammaBlue;
  public UInt16 bV5Intent;
  public UInt16 bV5ProfileData;
  public UInt16 bV5ProfileSize;
  public UInt16 bV5Reserved;
}        
public static Bitmap CF_DIBV5ToBitmap(byte[] data)
{
    GCHandle handle = GCHandle.Alloc(data, GCHandleType.Pinned);
    var bmi = (BITMAPV5HEADER)Marshal.PtrToStructure(handle.AddrOfPinnedObject(), typeof(BITMAPV5HEADER));
    Bitmap bitmap = new Bitmap((int)bmi.bV5Width, (int)bmi.bV5Height, -
                               (int)(bmi.bV5SizeImage / bmi.bV5Height), PixelFormat.Format32bppArgb,
                               new IntPtr(handle.AddrOfPinnedObject().ToInt32()
                               + bmi.bV5Size + (bmi.bV5Height - 1) 
                               * (int)(bmi.bV5SizeImage / bmi.bV5Height)));
    handle.Free();
    return bitmap;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-25T20:39:19.323

这个解决方案对我来说很好用：[从剪贴板复制到剪贴板会丢失图像透明度](https://stackoverflow.com/questions/44177115/copying-from-and-to-clipboard-loses-image-transparency/46424800)

```
 public static Image GetImageFromClipboard()
    {
        Image img = null;
        DataObject clipboard = Clipboard.GetDataObject() as DataObject;
        if (clipboard != null)
        {
            img = GetClipboardImage(clipboard);
        }

        return img;
    }

    /// <summary>
    /// Retrieves an image from the given clipboard data object, in the order PNG, DIB, Bitmap, Image object.
    /// </summary>
    /// <param name="retrievedData">The clipboard data.</param>
    /// <returns>The extracted image, or null if no supported image type was found.</returns>
    public static Bitmap GetClipboardImage(DataObject retrievedData)
    {
        Bitmap clipboardimage = null;
        // Order: try PNG, move on to try 32-bit ARGB DIB, then try the normal Bitmap and Image types.
        if (retrievedData.GetDataPresent("PNG"))
        {
            MemoryStream png_stream = retrievedData.GetData("PNG") as MemoryStream;
            if (png_stream != null)
                using (Bitmap bm = new Bitmap(png_stream))
                    clipboardimage = CloneImage(bm);
        }
        if (clipboardimage == null && retrievedData.GetDataPresent(DataFormats.Dib))
        {
            MemoryStream dib = retrievedData.GetData(DataFormats.Dib) as MemoryStream;
            if (dib != null)
                clipboardimage = ImageFromClipboardDib(dib.ToArray());
        }
        if (clipboardimage == null && retrievedData.GetDataPresent(DataFormats.Bitmap))
            clipboardimage = new Bitmap(retrievedData.GetData(DataFormats.Bitmap) as Image);
        if (clipboardimage == null && retrievedData.GetDataPresent(typeof(Image)))
            clipboardimage = new Bitmap(retrievedData.GetData(typeof(Image)) as Image);
        return clipboardimage;
    }

    private static Bitmap CloneImage(Bitmap bm)
    {
        int stride;
        return BuildImage(GetImageData(bm, out stride), bm.Width, bm.Height, stride, bm.PixelFormat, null, null);
    }

    /// <summary>
    /// Copies the given image to the clipboard as PNG, DIB and standard Bitmap format.
    /// </summary>
    /// <param name="image">Image to put on the clipboard.</param>
    /// <param name="imageNoTr">Optional specifically nontransparent version of the image to put on the clipboard.</param>
    /// <param name="data">Clipboard data object to put the image into. Might already contain other stuff. Leave null to create a new one.</param>
    public static void SetClipboardImage(Bitmap image, Bitmap imageNoTr, DataObject data)
    {
        Clipboard.Clear();
        if (data == null)
            data = new DataObject();
        if (imageNoTr == null)
            imageNoTr = image;
        using (MemoryStream pngMemStream = new MemoryStream())
        using (MemoryStream dibMemStream = new MemoryStream())
        {
            // As standard bitmap, without transparency support
            data.SetData(DataFormats.Bitmap, true, imageNoTr);
            // As PNG. Gimp will prefer this over the other two.
            image.Save(pngMemStream, ImageFormat.Png);
            data.SetData("PNG", false, pngMemStream);
            // As DIB. This is (wrongly) accepted as ARGB by many applications.
            Byte[] dibData = ConvertToDib(image);
            dibMemStream.Write(dibData, 0, dibData.Length);
            data.SetData(DataFormats.Dib, false, dibMemStream);
            // The 'copy=true' argument means the MemoryStreams can be safely disposed after the operation.
            Clipboard.SetDataObject(data, true);
        }
    }

    /// <summary>
    /// Converts the image to Device Independent Bitmap format of type BITFIELDS.
    /// This is (wrongly) accepted by many applications as containing transparency,
    /// so I'm abusing it for that.
    /// </summary>
    /// <param name="image">Image to convert to DIB</param>
    /// <returns>The image converted to DIB, in bytes.</returns>
    public static Byte[] ConvertToDib(Image image)
    {
        Byte[] bm32bData;
        Int32 width = image.Width;
        Int32 height = image.Height;
        // Ensure image is 32bppARGB by painting it on a new 32bppARGB image.
        using (Bitmap bm32b = new Bitmap(image.Width, image.Height, PixelFormat.Format32bppArgb))
        {
            using (Graphics gr = Graphics.FromImage(bm32b))
                gr.DrawImage(image, new Rectangle(0, 0, bm32b.Width, bm32b.Height));
            // Bitmap format has its lines reversed.
            bm32b.RotateFlip(RotateFlipType.Rotate180FlipX);
            Int32 stride;
            bm32bData = GetImageData(bm32b, out stride);
        }
        // BITMAPINFOHEADER struct for DIB.
        Int32 hdrSize = 0x28;
        Byte[] fullImage = new Byte[hdrSize + 12 + bm32bData.Length];
        //Int32 biSize;
        WriteIntToByteArray(fullImage, 0x00, 4, true, (UInt32)hdrSize);
        //Int32 biWidth;
        WriteIntToByteArray(fullImage, 0x04, 4, true, (UInt32)width);
        //Int32 biHeight;
        WriteIntToByteArray(fullImage, 0x08, 4, true, (UInt32)height);
        //Int16 biPlanes;
        WriteIntToByteArray(fullImage, 0x0C, 2, true, 1);
        //Int16 biBitCount;
        WriteIntToByteArray(fullImage, 0x0E, 2, true, 32);
        //BITMAPCOMPRESSION biCompression = BITMAPCOMPRESSION.BITFIELDS;
        WriteIntToByteArray(fullImage, 0x10, 4, true, 3);
        //Int32 biSizeImage;
        WriteIntToByteArray(fullImage, 0x14, 4, true, (UInt32)bm32bData.Length);
        // These are all 0\. Since .net clears new arrays, don't bother writing them.
        //Int32 biXPelsPerMeter = 0;
        //Int32 biYPelsPerMeter = 0;
        //Int32 biClrUsed = 0;
        //Int32 biClrImportant = 0;

        // The aforementioned "BITFIELDS": colour masks applied to the Int32 pixel value to get the R, G and B values.
        WriteIntToByteArray(fullImage, hdrSize + 0, 4, true, 0x00FF0000);
        WriteIntToByteArray(fullImage, hdrSize + 4, 4, true, 0x0000FF00);
        WriteIntToByteArray(fullImage, hdrSize + 8, 4, true, 0x000000FF);
        Array.Copy(bm32bData, 0, fullImage, hdrSize + 12, bm32bData.Length);
        return fullImage;
    }

    public static Bitmap ImageFromClipboardDib(Byte[] dibBytes)
    {
        if (dibBytes == null || dibBytes.Length < 4)
            return null;
        try
        {
            Int32 headerSize = (Int32)ReadIntFromByteArray(dibBytes, 0, 4, true);
            // Only supporting 40-byte DIB from clipboard
            if (headerSize != 40)
                return null;
            Byte[] header = new Byte[40];
            Array.Copy(dibBytes, header, 40);
            Int32 imageIndex = headerSize;
            Int32 width = (Int32)ReadIntFromByteArray(header, 0x04, 4, true);
            Int32 height = (Int32)ReadIntFromByteArray(header, 0x08, 4, true);
            Int16 planes = (Int16)ReadIntFromByteArray(header, 0x0C, 2, true);
            Int16 bitCount = (Int16)ReadIntFromByteArray(header, 0x0E, 2, true);
            //Compression: 0 = RGB; 3 = BITFIELDS.
            Int32 compression = (Int32)ReadIntFromByteArray(header, 0x10, 4, true);
            // Not dealing with non-standard formats.
            if (planes != 1 || (compression != 0 && compression != 3))
                return null;
            PixelFormat fmt;
            switch (bitCount)
            {
                case 32:
                    fmt = PixelFormat.Format32bppRgb;
                    break;
                case 24:
                    fmt = PixelFormat.Format24bppRgb;
                    break;
                case 16:
                    fmt = PixelFormat.Format16bppRgb555;
                    break;
                default:
                    return null;
            }
            if (compression == 3)
                imageIndex += 12;
            if (dibBytes.Length < imageIndex)
                return null;
            Byte[] image = new Byte[dibBytes.Length - imageIndex];
            Array.Copy(dibBytes, imageIndex, image, 0, image.Length);
            // Classic stride: fit within blocks of 4 bytes.
            Int32 stride = (((((bitCount * width) + 7) / 8) + 3) / 4) * 4;
            if (compression == 3)
            {
                UInt32 redMask = ReadIntFromByteArray(dibBytes, headerSize + 0, 4, true);
                UInt32 greenMask = ReadIntFromByteArray(dibBytes, headerSize + 4, 4, true);
                UInt32 blueMask = ReadIntFromByteArray(dibBytes, headerSize + 8, 4, true);
                // Fix for the undocumented use of 32bppARGB disguised as BITFIELDS. Despite lacking an alpha bit field,
                // the alpha bytes are still filled in, without any header indication of alpha usage.
                // Pure 32-bit RGB: check if a switch to ARGB can be made by checking for non-zero alpha.
                // Admitted, this may give a mess if the alpha bits simply aren't cleared, but why the hell wouldn't it use 24bpp then?
                if (bitCount == 32 && redMask == 0xFF0000 && greenMask == 0x00FF00 && blueMask == 0x0000FF)
                {
                    // Stride is always a multiple of 4; no need to take it into account for 32bpp.
                    for (Int32 pix = 3; pix < image.Length; pix += 4)
                    {
                        // 0 can mean transparent, but can also mean the alpha isn't filled in, so only check for non-zero alpha,
                        // which would indicate there is actual data in the alpha bytes.
                        if (image[pix] == 0)
                            continue;
                        fmt = PixelFormat.Format32bppPArgb;
                        break;
                    }
                }
                else
                    // Could be supported with a system that parses the colour masks,
                    // but I don't think the clipboard ever uses these anyway.
                    return null;
            }
            Bitmap bitmap = BuildImage(image, width, height, stride, fmt, null, null);
            // This is bmp; reverse image lines.
            bitmap.RotateFlip(RotateFlipType.Rotate180FlipX);
            return bitmap;
        }
        catch
        {
            return null;
        }
    }

    /// <summary>
    /// Gets the raw bytes from an image.
    /// </summary>
    /// <param name="sourceImage">The image to get the bytes from.</param>
    /// <param name="stride">Stride of the retrieved image data.</param>
    /// <returns>The raw bytes of the image</returns>
    public static Byte[] GetImageData(Bitmap sourceImage, out Int32 stride)
    {
        BitmapData sourceData = sourceImage.LockBits(new Rectangle(0, 0, sourceImage.Width, sourceImage.Height), ImageLockMode.ReadOnly, sourceImage.PixelFormat);
        stride = sourceData.Stride;
        Byte[] data = new Byte[stride * sourceImage.Height];
        Marshal.Copy(sourceData.Scan0, data, 0, data.Length);
        sourceImage.UnlockBits(sourceData);
        return data;
    }

    /// <summary>
    /// Creates a bitmap based on data, width, height, stride and pixel format.
    /// </summary>
    /// <param name="sourceData">Byte array of raw source data</param>
    /// <param name="width">Width of the image</param>
    /// <param name="height">Height of the image</param>
    /// <param name="stride">Scanline length inside the data</param>
    /// <param name="pixelFormat">Pixel format</param>
    /// <param name="palette">Color palette</param>
    /// <param name="defaultColor">Default color to fill in on the palette if the given colors don't fully fill it.</param>
    /// <returns>The new image</returns>
    public static Bitmap BuildImage(Byte[] sourceData, Int32 width, Int32 height, Int32 stride, PixelFormat pixelFormat, Color[] palette, Color? defaultColor)
    {
        Bitmap newImage = new Bitmap(width, height, pixelFormat);
        BitmapData targetData = newImage.LockBits(new Rectangle(0, 0, width, height), ImageLockMode.WriteOnly, newImage.PixelFormat);
        CopyToMemory(targetData.Scan0, sourceData, 0, sourceData.Length, stride, targetData.Stride);
        newImage.UnlockBits(targetData);
        // For indexed images, set the palette.
        if ((pixelFormat & PixelFormat.Indexed) != 0 && palette != null)
        {
            ColorPalette pal = newImage.Palette;
            for (Int32 i = 0; i < pal.Entries.Length; i++)
            {
                if (i < palette.Length)
                    pal.Entries[i] = palette[i];
                else if (defaultColor.HasValue)
                    pal.Entries[i] = defaultColor.Value;
                else
                    break;
            }
            newImage.Palette = pal;
        }
        return newImage;
    }
    public static void CopyToMemory(IntPtr target, Byte[] bytes, Int32 startPos, Int32 length, Int32 origStride, Int32 targetStride)
    {
        Int32 sourcePos = startPos;
        IntPtr destPos = target;
        Int32 minStride = Math.Min(origStride, targetStride);
        while (length >= targetStride)
        {
            Marshal.Copy(bytes, sourcePos, destPos, minStride);
            length -= origStride;
            sourcePos += origStride;
            destPos = new IntPtr(destPos.ToInt64() + targetStride);
        }
        if (length > 0)
        {
            Marshal.Copy(bytes, sourcePos, destPos, length);
        }
    }

    public static void WriteIntToByteArray(Byte[] data, Int32 startIndex, Int32 bytes, Boolean littleEndian, UInt32 value)
    {
        Int32 lastByte = bytes - 1;
        if (data.Length < startIndex + bytes)
            throw new ArgumentOutOfRangeException("startIndex", "Data array is too small to write a " + bytes + "-byte value at offset " + startIndex + ".");
        for (Int32 index = 0; index < bytes; index++)
        {
            Int32 offs = startIndex + (littleEndian ? index : lastByte - index);
            data[offs] = (Byte)(value >> (8 * index) & 0xFF);
        }
    }

    public static UInt32 ReadIntFromByteArray(Byte[] data, Int32 startIndex, Int32 bytes, Boolean littleEndian)
    {
        Int32 lastByte = bytes - 1;
        if (data.Length < startIndex + bytes)
            throw new ArgumentOutOfRangeException("startIndex", "Data array is too small to read a " + bytes + "-byte value at offset " + startIndex + ".");
        UInt32 value = 0;
        for (Int32 index = 0; index < bytes; index++)
        {
            Int32 offs = startIndex + (littleEndian ? index : lastByte - index);
            value += (UInt32)(data[offs] << (8 * index));
        }
        return value;
    } 
```

# android - Twitter没有获取访问令牌和访问令牌秘密Android

> ID：14333337
> 
> 赞同：2
> 
> 时间：2013-01-15T07:57:21.217
> 
> 标签：android, twitter, twitter-oauth

我正在我的 Android 应用程序中实现 twitter 推文消息。我能够实现 Twitter 登录，但我想我在登录后无法保存访问令牌，因为当我发布一条消息时，它不会出现在我的 Twitter 墙上。我也尝试敬酒访问令牌和访问令牌秘密，但它都是空白的。

这是我的代码：

```
public class MainActivity extends Activity {
    Intent intent;

    static String TWITTER_CONSUMER_KEY = "hide key";
    static String TWITTER_CONSUMER_SECRET = "hide key";

    // Preference Constants
    static String PREFERENCE_NAME = "twitter_oauth";
    static final String PREF_KEY_OAUTH_TOKEN = "oauth_token";
    static final String PREF_KEY_OAUTH_SECRET = "oauth_token_secret";
    static final String PREF_KEY_TWITTER_LOGIN = "isTwitterLogedIn";

    static final String TWITTER_CALLBACK_URL = "oauth://t4jsample";

    // Twitter oauth urls
    static final String URL_TWITTER_AUTH = "auth_url";
    static final String URL_TWITTER_OAUTH_VERIFIER = "oauth_verifier";
    static final String URL_TWITTER_OAUTH_TOKEN = "oauth_token";

    // Login button
    Button btnLoginTwitter;
    // Update status button
    Button btnUpdateStatus;
    // Logout button
    Button btnLogoutTwitter;
    // EditText for update
    EditText txtUpdate;
    // lbl update
    TextView lblUpdate;
    TextView lblUserName;

    // Progress dialog
    ProgressDialog pDialog;

    // Twitter
    private static Twitter twitter;
    private static RequestToken requestToken;

    // Shared Preferences
    private static SharedPreferences mSharedPreferences;

    // Internet Connection detector
    private ConnectionDetector cd;

    // Alert Dialog Manager
    AlertDialogManager alert = new AlertDialogManager();

    @SuppressLint("NewApi")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy); 

        cd = new ConnectionDetector(getApplicationContext());

        // Check if Internet present
        if (!cd.isConnectingToInternet()) {
            // Internet Connection is not present
            alert.showAlertDialog(MainActivity.this, "Internet Connection Error",
                    "Please connect to working Internet connection", false);
            // stop executing code by return
            return;
        }

        // Check if twitter keys are set
        if(TWITTER_CONSUMER_KEY.trim().length() == 0 || TWITTER_CONSUMER_SECRET.trim().length() == 0){
            // Internet Connection is not present
            alert.showAlertDialog(MainActivity.this, "Twitter oAuth tokens", "Please set your twitter oauth tokens first!", false);
            // stop executing code by return
            return;
        }

        // All UI elements
        btnLoginTwitter = (Button) findViewById(R.id.btnLoginTwitter);
        btnUpdateStatus = (Button) findViewById(R.id.btnUpdateStatus);
        btnLogoutTwitter = (Button) findViewById(R.id.btnLogoutTwitter);
        txtUpdate = (EditText) findViewById(R.id.txtUpdateStatus);
        lblUpdate = (TextView) findViewById(R.id.lblUpdate);
        lblUserName = (TextView) findViewById(R.id.lblUserName);

        // Shared Preferences
        mSharedPreferences = getApplicationContext().getSharedPreferences(
                "MyPref", 0);

        btnLoginTwitter.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                // Call login twitter function
                loginToTwitter();

            }
        }); 

        if (!isTwitterLoggedInAlready()) {
            Uri uri = getIntent().getData();
            if (uri != null && uri.toString().startsWith(TWITTER_CALLBACK_URL)) {
                // oAuth verifier
                String verifier = uri
                        .getQueryParameter(URL_TWITTER_OAUTH_VERIFIER);

                try {
                    // Get the access token
                    AccessToken accessToken = twitter.getOAuthAccessToken(
                            requestToken, verifier);

                    // Shared Preferences
                    Editor e = mSharedPreferences.edit();

                    // After getting access token, access token secret
                    // store them in application preferences
                    e.putString(PREF_KEY_OAUTH_TOKEN, accessToken.getToken());
                    e.putString(PREF_KEY_OAUTH_SECRET,
                            accessToken.getTokenSecret());
                    // Store login status - true
                    e.putBoolean(PREF_KEY_TWITTER_LOGIN, true);
                    e.commit(); // save changes

                    Log.e("Twitter OAuth Token", "> " + accessToken.getToken());

                    // Hide login button
                    btnLoginTwitter.setVisibility(View.GONE);

                    // Show Update Twitter
                    lblUpdate.setVisibility(View.VISIBLE);
                    txtUpdate.setVisibility(View.VISIBLE);
                    btnUpdateStatus.setVisibility(View.VISIBLE);
                    btnLogoutTwitter.setVisibility(View.VISIBLE);

                    // Getting user details from twitter
                    // For now i am getting his name only
                    long userID = accessToken.getUserId();
                    User user = twitter.showUser(userID);
                    String username = user.getName();

                    // Displaying in xml ui
                    lblUserName.setText(Html.fromHtml("<b>Welcome " + username + "</b>"));
                } catch (Exception e) {
                    // Check log for login errors
                    Log.e("Twitter Login Error", "> " + e.getMessage());
                }
            }
        }

        btnUpdateStatus.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // Call update status function
                // Get the status from EditText
                String status = txtUpdate.getText().toString();

                sendToTwitter(status);

            }
        });

    }

    private void loginToTwitter() {
        // Check if already logged in
        if (!isTwitterLoggedInAlready()) {
            ConfigurationBuilder builder = new ConfigurationBuilder();
            builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
            builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);
            twitter4j.conf.Configuration configuration = builder.build();

            TwitterFactory factory = new TwitterFactory(configuration);
            twitter = factory.getInstance();

            try {
                requestToken = twitter
                        .getOAuthRequestToken(TWITTER_CALLBACK_URL);
                this.startActivity(new Intent(Intent.ACTION_VIEW, Uri
                        .parse(requestToken.getAuthenticationURL())));
            } catch (TwitterException e) {
                e.printStackTrace();
            }
        } else {
            // user already logged into twitter
            Toast.makeText(getApplicationContext(),
                    "Already Logged into twitter", Toast.LENGTH_LONG).show();
        }
    }

    /**
     * Check user already logged in your application using twitter Login flag is
     * fetched from Shared Preferences
     * */
    private boolean isTwitterLoggedInAlready() {
        // return twitter login status from Shared Preferences
        return mSharedPreferences.getBoolean(PREF_KEY_TWITTER_LOGIN, false);
    }

    class updateTwitterStatus extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */

        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(MainActivity.this);
            pDialog.setMessage("Updating to twitter...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting Places JSON
         * */
        protected String doInBackground(String... args) {
            Log.d("Tweet Text", "> " + args[0]);
            String status = args[0];
            try {
                ConfigurationBuilder builder = new ConfigurationBuilder();
                builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
                builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);

                // Access Token
                String access_token = mSharedPreferences.getString(PREF_KEY_OAUTH_TOKEN, "");
                // Access Token Secret
                String access_token_secret = mSharedPreferences.getString(PREF_KEY_OAUTH_SECRET, "");

                AccessToken accessToken = new AccessToken(access_token, access_token_secret);
                Twitter twitter = new TwitterFactory(builder.build()).getInstance(accessToken);

                // Update status
                twitter4j.Status response = twitter.updateStatus(status);

                Log.d("Status", "> " + response.getText());
            } catch (TwitterException e) {
                // Error in updating status
                Log.d("Twitter Update Error", e.getMessage());
            }
            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog and show
         * the data in UI Always use runOnUiThread(new Runnable()) to update UI
         * from background thread, otherwise you will get error
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {

                public void run() {
                    Toast.makeText(getApplicationContext(),
                            "Status tweeted successfully", Toast.LENGTH_SHORT)
                            .show();
                    // Clearing EditText field
                    txtUpdate.setText("");
                }
            });
        }

    }

    public static void sendToTwitter(String tweet) {
         String access_token1 = mSharedPreferences.getString(PREF_KEY_OAUTH_TOKEN, "");
         String access_token_secret1 = mSharedPreferences.getString(PREF_KEY_OAUTH_SECRET, "");
        ConfigurationBuilder cb = new ConfigurationBuilder();
        cb.setDebugEnabled(true)
          .setOAuthConsumerKey("8yTg3E1eHq6YF6l6stS4tQ")
          .setOAuthConsumerSecret("6spBb7gxsuUMfv50CWSjMZLVhHUEoLXxg97txoon45w")
          .setOAuthAccessToken(access_token1)
          .setOAuthAccessTokenSecret(access_token_secret1);

        TwitterFactory tf = new TwitterFactory(cb.build());
        Twitter t = tf.getInstance();

        try {
        t.updateStatus(tweet);
        } catch (TwitterException te) {
            te.printStackTrace();
        }
    } 
```

谁能指出我的代码有什么问题或缺失？顺便说一句，它不会引发任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:08:34.823

试试这样...

```
 private TwitterSession mSession;
    private AccessToken mAccessToken;
    private CommonsHttpOAuthConsumer mHttpOauthConsumer;
    private OAuthProvider mHttpOauthprovider;
    private String mConsumerKey;
    private String mSecretKey;
    private ProgressDialog mProgressDlg;
    private TwDialogListener mListener;
    private Activity context;

    public static final String CALLBACK_URL = "twitterapp://connect";
    private static final String TWITTER_ACCESS_TOKEN_URL = "https://api.twitter.com/oauth/access_token";
    private static final String TWITTER_AUTHORZE_URL = "https://api.twitter.com/oauth/authorize";
    private static final String TWITTER_REQUEST_URL = "https://api.twitter.com/oauth/request_token";
    public static final String MESSAGE = "There is lot more to come, Subscribe to http://....";

    public TwitterApp(Activity context, String consumerKey, String secretKey) {
        Log.d("tag", consumerKey + ";" + secretKey);
        this.context = context;

        mTwitter = new TwitterFactory().getInstance();
        mSession = new TwitterSession(context);
        mProgressDlg = new ProgressDialog(context);

        mConsumerKey = consumerKey;
        mSecretKey = secretKey;

        mHttpOauthConsumer = new CommonsHttpOAuthConsumer(mConsumerKey,
                mSecretKey);

        String request_url = TWITTER_REQUEST_URL;
        String access_token_url = TWITTER_ACCESS_TOKEN_URL;
        String authorize_url = TWITTER_AUTHORZE_URL;

        mHttpOauthprovider = new DefaultOAuthProvider(request_url,
                access_token_url, authorize_url);
        mAccessToken = mSession.getAccessToken();
        Log.d("tag", "Access_Token: " + mAccessToken);
        configureToken();
    }

    public void setListener(TwDialogListener listener) {
        mListener = listener;
    }

    @SuppressWarnings("deprecation")
    private void configureToken() {
        if (mAccessToken != null) {
            mTwitter.setOAuthConsumer(mConsumerKey, mSecretKey);
            mTwitter.setOAuthAccessToken(mAccessToken);
        }
    }

    public boolean hasAccessToken() {
        return (mAccessToken == null) ? false : true;
    }

    public void resetAccessToken() {
        if (mAccessToken != null) {
            mSession.resetAccessToken();
            mAccessToken = null;
        }
    }

    public String getUsername() {
        return mSession.getUsername();
    }

    public void updateStatus(String status) throws Exception {
        try {
            mTwitter.updateStatus(status);
        } catch (TwitterException e) {
            Log.d("Twitter Exception * Update Status * tag", e.getMessage());
            throw e;
        }
    }

    public void authorize() {
        mProgressDlg.setMessage("Initializing...");
        mProgressDlg.show();
        new Thread() {
            @Override
            public void run() {
                String authUrl = "";
                int what = 1;
                try {
                    authUrl = mHttpOauthprovider.retrieveRequestToken(
                            mHttpOauthConsumer, CALLBACK_URL);
                    what = 0;
                } catch (Exception e) {
                    Log.d("Twitter Exception * Authorize * tag", e.getMessage());
                }
                mHandler.sendMessage(mHandler
                        .obtainMessage(what, 1, 0, authUrl));
            }
        }.start();
    }

    public void processToken(String callbackUrl) {
        mProgressDlg.setMessage("Finalizing...");
        mProgressDlg.show();

        final String verifier = getVerifier(callbackUrl);

        new Thread() {
            @Override
            public void run() {
                int what = 1;

                try {
                    mHttpOauthprovider.retrieveAccessToken(mHttpOauthConsumer,
                            verifier);
                    mAccessToken = new AccessToken(
                            mHttpOauthConsumer.getToken(),
                            mHttpOauthConsumer.getTokenSecret());
                    configureToken();
                    User user = mTwitter.verifyCredentials();
                    mSession.storeAccessToken(mAccessToken, user.getName());

                    what = 0;
                } catch (Exception e) {
                }

                mHandler.sendMessage(mHandler.obtainMessage(what, 2, 0));
            }
        }.start();
    }

    private String getVerifier(String callbackUrl) {
        String verifier = "";

        try {
            callbackUrl = callbackUrl.replace("twitterapp", "http");
            URL url = new URL(callbackUrl);
            String query = url.getQuery();
            String array[] = query.split("&");
            for (String parameter : array) {
                String v[] = parameter.split("=");
                if (URLDecoder.decode(v[0]).equals(
                        oauth.signpost.OAuth.OAUTH_VERIFIER)) {
                    verifier = URLDecoder.decode(v[1]);
                    break;
                }
            }
        } catch (MalformedURLException e) {         
        }

        return verifier;
    }

    private void showLoginDialog(String url) {
        final TwDialogListener listener = new TwDialogListener() {

            public void onComplete(String value) {
                processToken(value);
            }

            public void onError(String value) {
                mListener.onError("Failed opening authorization page");
            }
        };
        new TwitterDialog(context, url, listener).show();
    }

    private Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            mProgressDlg.dismiss();

            if (msg.what == 1) {
                if (msg.arg1 == 1)
                    mListener.onError("Error getting request token");
                else
                    mListener.onError("Error getting access token");
            } else {
                if (msg.arg1 == 1)
                    showLoginDialog((String) msg.obj);
                else
                    mListener.onComplete("");
            }
        }
    };

    public interface TwDialogListener {
        public void onComplete(String value);

        public void onError(String value);

    }
}

public class TwitterSession {
    private SharedPreferences sharedPref;
    private static Editor editor;

    private static final String TWEET_AUTH_KEY = "auth_key";
    private static final String TWEET_AUTH_SECRET_KEY = "auth_secret_key";
    private static final String TWEET_USER_NAME = "user_name";
    private static final String SHARED = "Twitter_Preferences";

    public TwitterSession(Context context) {
        sharedPref = context.getSharedPreferences(SHARED, Context.MODE_PRIVATE);

        editor = sharedPref.edit();
    }

    public void storeAccessToken(AccessToken accessToken, String username) {
        editor.putString(TWEET_AUTH_KEY, accessToken.getToken());
        editor.putString(TWEET_AUTH_SECRET_KEY, accessToken.getTokenSecret());
        editor.putString(TWEET_USER_NAME, username);

        editor.commit();
    }
  public void resetAccessToken() {
        editor.putString(TWEET_AUTH_KEY, null);
        editor.putString(TWEET_AUTH_SECRET_KEY, null);
        editor.putString(TWEET_USER_NAME, null);

        editor.commit();
    }

    public String getUsername() {
        return sharedPref.getString(TWEET_USER_NAME, "");
    }

    public AccessToken getAccessToken() {
        String token = sharedPref.getString(TWEET_AUTH_KEY, null);
        String tokenSecret = sharedPref.getString(TWEET_AUTH_SECRET_KEY, null);

        if (token != null && tokenSecret != null)
            return new AccessToken(token, tokenSecret);
        else
            return null;
    }
} 
```

# javascript - 表单中字段的 Javascript 验证

> ID：14333338
> 
> 赞同：-2
> 
> 时间：2013-01-15T07:57:22.810
> 
> 标签：javascript, validation

我正在为表单中的文本字段的空检查进行 javascript 验证。我想知道以下哪个是最好的方法，为什么？

方法一

```
if($("#myField").val()==''){
alert("Cannot be empty");
} 
```

方法二

```
var check=$("#myField").val();
if(check==''){
alert("Cannot be empty");
} 
```

他们哪个最好？？方法1或方法2..为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:59:30.947

如果您稍后在代码中不再需要该输入字段的值，请仅使用方法 1。

如果您稍后在代码中重用该值，请使用方法 2。但我建议使用更有意义的变量名称，例如 fieldValue 而不是检查。

# google-maps-api-3 - 计算附近街道以用于街景

> ID：14333339
> 
> 赞同：-1
> 
> 时间：2013-01-15T07:57:26.317
> 
> 标签：google-maps-api-3

我面临一个不寻常的问题，我需要在不知道实际位置的情况下计算具有街景图像的地图上位置的纬度。

我知道我的用户的最终目的地，但我需要计算具有街景图像的附近位置（大约 1 公里或更短，这应该是可变的）的纬度，并将其用作起始目的地。

一个例子是，我知道我需要去时代广场，但我想要一个距离公路约 1 公里的起点。然后，我需要验证该坐标是否存在街景图像，然后才能确定它是起点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:22:08.397

下面的函数递归地将搜索距离加倍（最大为 10000 米），直到找到全景图。

示例代码：

```
// Global vars
var G = google.maps;
var streetViewService = new G.StreetViewService();

function getNearSVP(latlon,maxDist) {
    streetViewService.getPanoramaByLocation(latlon, maxDist, function(data, status) {
        if (status == google.maps.StreetViewStatus.OK) {
            return data.location.latLng;
        }
        else{
            if (maxDist < 10000){
                maxDist = maxDist * 2;
                return getNearSVP(latlon, maxDist);
            }
            else {
                alert('StreetView is not available within '+maxDist+' meters of this location');
            }
        }
    });

} 
```

[**现场演示在这里**](http://maps.forum.nu/v3/ac.html)

# asp.net-mvc - 在 mvc.net 中返回 XSLT

> ID：14333340
> 
> 赞同：0
> 
> 时间：2013-01-15T07:57:26.587
> 
> 标签：asp.net-mvc, xslt

我想在 mvc 中返回 XSLT 格式，这个 mime 类型是什么？

```
 public FileResult DownloadTemplate(string templateCode)
    {
        try
        {
            var template = _manager.GetTemplateByCode(templateCode);
            const string fileName = "Template";
            return File(template.Value, System.Net.Mime.MediaTypeNames.Application.Octet, fileName);
        }
        catch (Exception ex)
        {
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:06:45.900

助手的`File`签名是

```
FileContentResult File(byte[] fileContents, string contentType, string fileDownloadName) 
```

这应该足以回答您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:12:11.587

您可以`text/xsl`为此目的使用：

```
public FileResult DownloadTemplate(string templateCode)
{
    try
    {
        var template = _manager.GetTemplateByCode(templateCode);
        const string fileName = "Template";
        return File(template.Value, "text/xsl", fileName);
    }
    catch (Exception ex)
    {
        return null;
    }
} 
```

# algorithm - 检查一组线是否在轮廓中形成闭合对象

> ID：14333341
> 
> 赞同：3
> 
> 时间：2013-01-15T07:57:46.353
> 
> 标签：algorithm, lines, contour

我有一个任务，用户可以在表单上画线。一旦用户创建了一行，该行就会被推送到包含用户先前输入的所有行的列表中。然后将线条绘制到框架上，以便用户可以看到黄色。我的任务是，当用户尝试使用线条连接对象时，该对象必须变为绿色而不是黄色。所以我有每个线段的两个坐标，我怎样才能确定一个封闭的对象是由一组线形成的。有什么我可以遵循的算法吗？ ![在此处输入图像描述](../Images/d46ae4e84bcf49c93fad2f5fb7e005b9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:11:44.473

对于每个段，找到与其他段的交点（如果存在）。找到交点后，将其与两个相关段链接。

您现在有一个“无向图”，其中交点作为顶点，线段作为边。

剩下要做的就是[在图中找到循环](https://stackoverflow.com/questions/526331/cycles-in-an-undirected-graph)。每个循环都是一个封闭的对象。

# sql-server - 如何从 SQL 生成的身份中获取结果？

> ID：14333342
> 
> 赞同：0
> 
> 时间：2013-01-15T07:57:46.643
> 
> 标签：sql-server, delphi, delphi-2007

> **可能重复：**
> [SQL Server - INSERT 后的返回值](https://stackoverflow.com/questions/7917695/sql-server-return-value-after-insert)

我是 SQL 和 SQL Server 的初学者。我有一个有 2 列的表。

```
CREATE TABLE [dbo].[Log](
    [FileName] [varchar](100) NOT NULL,
    [FileID] [int] IDENTITY(1,1) NOT NULL,
 CONSTRAINT [PK_Log] PRIMARY KEY CLUSTERED 
(
    [FileID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

因此，如果我在 Filename 中插入一个字符串，则会自动生成一个 FileID。它在 SQL Studio 中运行良好，但在代码中运行良好。

```
function TfrmMainForm.SaveFileNameToDB(const aName: String): Integer;
var
  vResult: Variant;
begin
  SQLQuery.Close;
  SQLQuery.SQL.Text := Format('INSERT INTO Log (FileName) VALUES(''%s'')', [aName]);
  SQLQuery.ExecSQL;

  SQLQuery.Close;
  SQLQuery.SQL.Text := Format('SELECT FileID FROM Log WHERE FileName = ''%s''', [aName]);
  SQLQuery.Open;
  SQLQuery.First;
  vResult := SQLQuery.FieldValues['FileID'];
  if VarIsNull(vResult) then  
    Result := -1
  else
    Result := vResult;
end; 
```

此方法的结果始终为 -1。这里有什么问题？

# ajax - AJAX 不起作用

> ID：14333344
> 
> 赞同：0
> 
> 时间：2013-01-15T07:57:54.100
> 
> 标签：ajax

我的 JQuery 没有启动清理功能。我需要从输入字段名称中获取值，并将其显示在路径输入字段中。为什么它不起作用？编写所有这些代码的页面称为 new_page.php ，因此当 ajax_request 函数被触发时，它不会指向外部页面，而是在同一页面上。我使用 PHP 5.3 和 HEIDISQL

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
        <?php 

        include('conect.php');
        if(($_POST)&&(!empty($_POST['name']))&&(!empty($_POST['path'])) ){
        $name=$_POST['name'];
        $path=$_POST['path'];

        if(isset($_POST['sanitize'])) {
            $title=$_POST['sanitize']; 
            $title = strip_tags($title);
            // Preserve escaped octets.
            $title = preg_replace('|%([a-fA-F0-9][a-fA-F0-9])|', '---$1---', $title);
            // Remove percent signs that are not part of an octet.
            $title = str_replace('%', '', $title);
            // Restore octets.
            $title = preg_replace('|---([a-fA-F0-9][a-fA-F0-9])---|', '%$1', $title);

            $title = strtolower($title);
            $title = preg_replace('/&.+?;/', '', $title); // kill entities
            $title = str_replace('.', '-', $title);
            $title = preg_replace('/[^%a-z0-9 _-]/', '', $title);
            $title = preg_replace('/\s+/', '-', $title);
            $title = preg_replace('|-+|', '-', $title);
            $title = trim($title, '-');

            echo $title;
        }   

        mysql_query("UPDATE menus SET name='$name' , path='$path'");
        }

        ?>
        <html>
        <head>
        <script type="text/javascript" src="/javascript/jquery-1.8.2.min.js"> </script>
        <script>

    // create the XMLHttpRequest object, according browser
function get_XmlHttp() {
  // create the variable that will contain the instance of the XMLHttpRequest object (initially with null value)
  var xmlHttp = null;

  if(window.XMLHttpRequest) {       // for Forefox, IE7+, Opera, Safari, ...
    xmlHttp = new XMLHttpRequest();
  }
  else if(window.ActiveXObject) {   // for Internet Explorer 5 or 6
    xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
  }

  return xmlHttp;
}

// sends data to a php file, via POST, and displays the received answer
function ajaxrequest(php_file, tagID) {
  var request =  get_XmlHttp();     // call the function for the XMLHttpRequest instance

  // create pairs index=value with data that must be sent to server
  var  the_data = 'sanitize='+document.getElementById('name').innerHTML;

  request.open("POST", php_file, true);         // set the request

  // adds  a header to tell the PHP script to recognize the data as is sent via POST
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  request.send(the_data);       // calls the send() method with datas as parameter

  // Check request status
  // If the response is received completely, will be transferred to the HTML tag with tagID
  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      document.getElementById(tagID).innerHTML = request.responseText;
    }
  }
}   

    </script>

        </head>

        <body>
                <form action="<?php $_PHP_SELF ?>" method="post">
                <label for="nume">Name</label><input type="text" name="name" id="name" onchange="ajaxrequest('new_page.php', 'path')" />
                <label for="cale">Path</label><input type="text" path="path" id="path" />
                <input type="submit" name="submit"/>
        </form>
        </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T11:20:26.347

我知道这是一篇旧帖子，但我认为这将有助于人们搜索这个问题。

正如 Zorayr 所说，PHP 是一种基于服务器端的语言，而 Javascript 或衍生产品是客户端。那是因为你不能从 JS 代码中调用 PHP 函数。

但是，您可以像在代码中那样使用经过处理的表单来触发函数，而不是调用函数。另一种方法是创建一个 PHP 类并在同一个文件中对其进行初始化。

例子：

```
<?php
Class MyClass {

    function __construct()
    {
        echo "hello world.";
    }
}
$init = new MyClass();
?> 
```

这样你就可以传递参数并做任何更清楚的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:25:01.190

如前所述，您不能使用 JavaScript 调用 PHP 函数，因为一种是服务器端技术，另一种是客户端技术，仅在本地浏览器上执行。

处理数据、数据库和用户输入的建议方法是使用带有[ActiveRecord 范式的](http://www.phpactiverecord.org/)[MVC 架构](http://onlamp.com/pub/a/php/2005/09/15/mvc_intro.HTML)进行数据访问。如果操作正确，您的所有数据都应该在提交到数据库之前在活动记录模型中进行清理。

# jquery - 更改正在动画的精灵表时，HTML5 Canvas 挂起（逐帧播放视频）

> ID：14333345
> 
> 赞同：5
> 
> 时间：2013-01-15T07:57:58.100
> 
> 标签：jquery, html, mobile, video

我需要在使用 HTML5 的移动设备上播放具有透明背景的视频。在 Windows Phone 上，我可以捕获视频标签的当前帧并将其显示在画布中。但这不适用于 Android 和 iOS 设备（我认为是出于安全原因？）

我的解决方案是使用 FFMPEG 拆分 .flv，然后将这些帧拼接成大图像，例如精灵表。

**问题**是当我切换到新的框架表时动画“挂起”。我只是在视觉上和通过控制台检查了这一点（通过在我更改当前精灵表行时记录。）我已经通过查看当我更改精灵表时它如何挂起以及当我如何不挂起来测试它只是一遍又一遍地循环同一张纸。

我预先加载了所有图像：

```
var frameImages = [];

for(var i = 0; i < 35; i++)
{
  frameImages.push(new Image());
  frameImages[i].src = 'frame' + i + '.png';

  console.log(frameImages[i].src);

  frameImages[i].onload = function()
  {
    // Notify us that it's been loaded.
    console.log("Image loaded");
  }
} 
```

然后像这样玩：

```
processFrame = function()
{
    outputCanvas.width = outputCanvas.width;
    output.drawImage(frameImages[currentFrame], (curCol*153), (curRow*448), 153, 448, 0, 0, 153, 448);
    curCol += 1;

    if(curCol >= maxCol)
    {
      curCol = 0;
      curRow += 1;

      if(curRow >= maxRow)
      {
        curRow = 0;
        currentFrame++;
      }
    }
  }
}

var mozstart = window.mozAnimationStartTime;

step = function(timestamp) {

  var diff = (new Date().getTime() - start) - time;
  if(diff >= frameDelay)
  {
    processFrame();
    time += frameDelay;
  }
} 
```

我已经在 Win 7 机器上的 Chrome v 23.0.1271.97 m 和带有 Chrome 的 Nexus 7 上尝试过这个。

在这里查看它的实际操作：
[http](http://savedbythecode.com/spokes/mozanimation.php) ://savedbythecode.com/spokes/mozanimation.php - 这是使用 mozAnimationStartTime
和[http://savedbythecode.com/spokes/newplayer.php](http://savedbythecode.com/spokes/newplayer.php) - 这是使用每个步骤都会调整的常规 JS 计时器（来自[http://www.sitepoint.com/creating-accurate-timers-in-javascript/](http://www.sitepoint.com/creating-accurate-timers-in-javascript/)）

有任何想法吗？问题是否足够清楚？

谢谢，凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T06:41:20.940

很酷的代码。为什么不能只使用视频标签（参见选项 6）？无论如何，我只会列出我能想到的问题，希望对您有所帮助：

1.  更改`++`为`+= 1`: 为了与您之前的代码保持一致，并且因为[引导 Doug Crockford 的仁慈幽灵](http://www.youtube.com/watch?v=hQVTIJBZook)可能有助于消除您的 javascript 代码中的故障。

2.  您将一堆图像拼接成一个“精灵表”。然后，当您想要进入这些工作表中的下一个时，代码会挂起。所以，因为你的代码还没有工作，作为一个测试，删除所有循环遍历每个帧中的子图像，并在每次渲染时直接将你的 frameImages 数组中的每个帧输出到画布，看看它是否仍然挂起。这样做的结果将让您知道您的代码是否可以到达 frameImages 中的下一帧，或者是否不能。这可能会使您更接近错误的根源。

3.  currentFrame 是否用 var 声明并在 processFrame 范围内？如果没有，只需放在 `var currentFrame = 0;`您定义的上方某处`function processFrame(...`

4.  当您说“然后我就这样播放”时，您是使用[承诺](http://blogs.msdn.com/b/ie/archive/2011/09/11/asynchronous-programming-in-javascript-with-promises.aspx)还是在所有 onloads 触发后等效地调用您的动画启动函数？一种方法是：您可以在每次触发 onload 时增加一个计数器，每次检查计数器是否等于所需的加载总数，然后才调用您的动画开始。 **我的预感是这是一个缓存问题，因为由于内部结构不同，这些似乎是不同浏览器之间变化最大的。**

5.  尝试在 drawImage 调用和更新 currentFrame 之间清除画布，因为它可能有助于在更改图像时重置画布的内部状态。

6.  您**可以**使用 HTML5 视频标签进行 alpha 和透明度。只需使用一些 svg 转换。[正如在这个 SO 答案](https://stackoverflow.com/questions/4073303/can-i-have-a-video-with-transparent-background-using-html5-video-tag)中所说，这些很容易做到

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T19:55:12.483

这是另一种不太正统的解决方案 - 将视频用作画布输入并使用 getImageData 对每一帧进行绿屏。

基本上你有你的视频标签和你的画布

```
<video id='source' style='display: none;'>
   <source>whatever.mp4</source>
   <source>whatever.ogg</source>
</video>
<canvas id='screen' width='videoWidth' height='videoHeight></canvas> 
```

然后你设置你的绘图功能

```
var t = null;
document.getElementById('source').addEventListener('playing', function(){
   var vid = this;   
   t = setInterval(function(){
       if (vid.paused || vid.ended){
          clearInterval(t);
          return
       } else {
          drawFrame();
       }
   }, 20)
}, false) 
```

你的并条机功能是

```
function drawFrame(){
   var ctx = document.getElementById('screen').getContext('2d'),
       vid = document.getElementById('source');

   ctx.drawImage(vid, 0, 0);
   var tolerance = 0.2,
       bgColor = [0, 255, 0], //or whatever 
       imageData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height),
       len = imageData.data.length;

   for (var i=0; i<len; i+=4){
      var r = imageData.data[i],
          g = imageData.data[i+1],
          b = imageData.data[i+2];

      //There's lots of different color comparing methods, just check google
      var dif = colorCompare([r, g, b], bgColor);
      if (dif < tolerance){
         imageData.data[i+3] = 255;
      }
   }

   ctx.putImageData(imageData, 0, 0);
} 
```

您可以使用它的不同部分来达到您想要的性能水平。对于相对较小（尺寸方面）的视频，您的性能应该不是问题。您可能必须使用缓冲画布来避免屏幕闪烁，但我对此表示怀疑。您可以调整容差变量以避免可能得到的任何光环效应。

并不是说这是最好的解决方案，但它绝对是一个可行的解决方案，如果您想通过更改输入视频来更改视频而不需要额外的工作，那么它就可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T23:19:35.763

不确定你是否看过这个……但你有没有想过使用 jquery 队列？当我将它加载到我的浏览器中时，我看到一些帧没有显示，或者空白，然后回来等等。我之前使用过队列来同步处理我想要“链”的说 ajax 调用" 以特定的顺序放在一起......所以这可能是一个你可以尝试以同步方式加载每个“图片帧”的区域，确保每个帧都以正确的顺序加载？

[http://api.jquery.com/queue/](http://api.jquery.com/queue/)

# php - 使用 php 下载并显示谷歌趋势 csv 文件

> ID：14333348
> 
> 赞同：0
> 
> 时间：2013-01-15T07:58:10.637
> 
> 标签：php, api

我一直在尝试从此链接下载 csv 文件 [http://www.google.com/trends/trendsReport?hl=en-US&q=nba&geo=US&date=today%207-d&cmpt=q&content=1&export=1](http://www.google.com/trends/trendsReport?hl=en-US&q=nba&geo=US&date=today%207-d&cmpt=q&content=1&export=1)

但是一次又一次地失败了，我尝试了大多数在线和 stackexchange 上可用的代码，但没有一个能让我正常工作，如果有人知道如何实现它，请在这里分享，因为我们大多数人都觉得它有用。

我也得到了一些建议，这些天它使用 cookie。另一个建议是应该使用谷歌帐户登录然后尝试，但不幸的是我都失败了。

否则我可能会出错。我做的一个有效的试验是在这里。

```
<?php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://www.google.com/accounts/ClientLogin?accountType=GOOGLE&Email=myemail@gmail.com&Passwd=mypass&service=trends&source=test-test-v1");
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt ($ch, CURLOPT_MAXREDIRS, 20);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

curl_setopt($ch, CURLOPT_COOKIEJAR, '/var/www/cookies.txt');
curl_setopt($ch, CURLOPT_COOKIEFILE, '/var/www/cookies.txt');

$output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_setopt($ch, CURLOPT_URL, "http://www.google.com/trends/explore#q=nba&geo=US&date=today%207-d&cmpt=q");
$output = curl_exec($ch);
curl_close($ch);
echo $output;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:25:41.533

## 使用 file_get_contents ，我认为他们不需要使用 curl 。

**例如**

```
$page = file_get_contents('http://www.example.com/');
echo $page; 
```

# symfony - 在 symfony2 的表单生成器中使用多实体

> ID：14333352
> 
> 赞同：0
> 
> 时间：2013-01-15T07:58:27.973
> 
> 标签：symfony, entity

我想使用多个实体在 createformbuilder 中创建表单。例如，我想要一个包含来自多个实体的多个字段的表单，并且我想检查视图字段的条件

```
userEntity -> email , password 
resselerEntity - > (userEntity fields) + managerName , managerFamily
leaderEntity - > (userEntity fields) + credit 
```

如果我想显示 resseler 字段，必须显示`userEntity`和`resselerEntity`

如果要显示`userEntity`，必须显示所有字段`userEntity`

等等，

那么我该如何解决这个解决方案？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-22T14:38:30.090

据我了解您的问题，您应该使用类型继承：

```
class UserType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name')
            ->add('password')
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => '\Hamid\User',
        ));
    }

    public function getName()
    {
        return 'hamid_user';
    }
}

class ResellerType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('managerName')
            ->add('managerFamily')
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => '\Hamid\Reseller',
        ));
    }

    public function getName()
    {
        return 'hamid_reseller';
    }

    public function getParent()
    {
        return 'hamid_user';
    }
} 
```

然后为每个实体使用正确的表格。如果出于某种原因，您需要一个适应设置为表单的实体类的单个表单，则需要使用表单事件，如[文档中所述](http://symfony.com/doc/master/cookbook/form/dynamic_form_modification.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:39:54.367

我认为唐让你大部分时间都在那里。将构造参数添加到您的 UserType

```
public function __construct($otherEntityType) // Reseller, Leader etc. 
```

然后使用 otherEntityType 来确定为 UserType 创建了哪些字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:01:24.027

最常见的解决方案是为（在您的情况下）创建单个表单：

*   用户实体
*   经销商实体

然后，创建一个具有 userEntityFormType 和 ressellerEntityFormType 两个字段的新表单。

这样，您可以：

*   分离你的约束
*   在别处使用单一形式

类似的东西

```
class UserEntityType extends AbstractType
{
 public function BuildForm(FormBuilderInterface $builder, array $options)
 {
  $builder->add('firstField')
          ->add('secondField')
          [...]
          ->lastField;
 }

 public function getName()
 {
  return 'UserEntityType ';
 }
}

class RessellerEntityType extends AbstractType
{
 public function BuildForm(FormBuilderInterface $builder, array $options)
 {
  $builder->add('firstField')
          ->add('secondField')
          [...]
          ->lastField;
 }

 public function getName()
 {
  return 'RessellersEntityType ';
 }
}

class AggregateEntityType extends AbstractType
    {
     public function BuildForm(FormBuilderInterface $builder, array $options)
     {
      $builder->add('userEntityField',UserEntityType,array('multiple'=>true)
              ->add('ressellersEntityField',RessellersEntityType,array('multiple'=>true));
     }

     public function getName()
     {
      return 'AggregateEntityType ';
     }
    } 
```

# c# - 找到缺少的依赖项以运行我的应用程序

> ID：14333354
> 
> 赞同：0
> 
> 时间：2013-01-15T07:58:45.160
> 
> 标签：c#

如果没有 Visual Studio，我的应用程序无法在其他计算机上运行，​​而且我不知道需要安装什么。我正在使用 pcapdotnet DLL 的版本 10，所以我的系统上有 .net 4，在我尝试打开我的 exe 文件后，新的错误窗口跳转：

> myAplication 已停止工作

在我的开发机器中，我检查了添加或删除程序并看到了 .net 4.5，因此我尝试将其安装到但仍然无法正常工作。有办法检查我的问题是什么？

**我的解决方案是用 VS2012 创建的，我在我的开发机器上看到安装了 .net 框架 4.5 多目标包，也许这就是我所缺少的？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:04:29.610

一种方法是检查您引用的内容并确保您也部署了这些依赖项。

解决此问题的另一种方法是使用[Fusion Log Viewer](http://msdn.microsoft.com/en-us/library/e74a18c4.aspx)检查 Fusion 日志，查看搜索了哪些 dll 而未找到哪些 dll。

第三种“快速而肮脏”的方法是在您的解决方案中创建一个 MSI 设置项目，并使用内置功能自动检查必要的依赖项并将它们添加到将成为设置工具包的包中，您可以在那里看到你可能错过了什么。

* * *

编辑：另一种方法是远程调试您的应用程序，为此您需要 2 个“技巧”：

*   远程调试 -[如何：设置远程调试](http://msdn.microsoft.com/en-us/library/vstudio/bt727f1t.aspx)
*   启动时自动将调试器附加到您的进程 -[如何：自动启动调试器](http://msdn.microsoft.com/en-us/library/a329t4ed.aspx)

通过这种方式，您可以在 Visual Studio 中更详细地查看问题所在。

# php - Jquery onClick 函数不适用于 PHP

> ID：14333356
> 
> 赞同：0
> 
> 时间：2013-01-15T07:58:47.657
> 
> 标签：php, jquery, onclick

我用 Jquery 制作了一个函数，当我单击它时会更改链接颜色...当我将链接链接到 #(hash) 时，代码工作得很好，但我将它与 php 混合它不会工作？

这是我的 PHP，它工作得很好：

```
<?php
    $pages_dir = 'pages';
    if (!empty($_GET['p'])) {
        $pages = scandir($pages_dir, 0);
        unset($pages[0], $pages[1]);
        $p = $_GET['p'];
        if (in_array($p.'.inc.php', $pages)) {
            include($pages_dir.'/'.$p.'.inc.php');
        } else {
            echo '******.';
        }
    } else {
        include($pages_dir.'/hjem.inc.php');
    }
?> 
```

我的 HTML 中的链接也可以正常工作：

```
href="index.php?p=*********" 
```

但现在我想应用一种效果，使我的链接的背景颜色与 i OnClick 效果不同：

```
$(document).ready(function(){
        var $targetElement = $("*** This is to my links ***");
        $targetElement.click(function() {
            $targetElement.removeClass("changeColor")
            $(this).addClass("changeColor");
    });
}); 
```

还有一些CSS：

```
#****** ul li a:link.changeColor{
    background-color:black;
} 
```

Jquery 仅在我将链接指向 # 时才有效，并且我当然希望它可以与我的 php 代码一起工作:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:02:47.580

单击链接时，浏览器会重定向到链接的 href。

您有 2 个选项：

1）一切都将由 AJAX 完成 - 您将通过 ajax 加载请求页面的内容，然后您将停止传播点击事件，因此浏览器不会重定向。您可以通过`false`从事件处理程序返回或调用`e.preventDefault()`.

2）使用CSS：

```
ul li a:active {
    background-color:black;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:01:31.687

防止锚元素的默认事件，所以改变：

```
$targetElement.click(function() {
  $targetElement.removeClass("changeColor")
  $(this).addClass("changeColor");
}); 
```

至

```
$targetElement.click(function(e) {
   e.preventDefault(); 
   //get href tag and load content
   var $this = $(this), href = $this.attr("href"), $that = $this;
   $("#someElementId").load(href, function() {
       $targetElement.removeClass("changeColor")
       $that.addClass("changeColor");
   });
}); 
```

你的意思是这样的吗

# c# - 在Gridview的第二页编辑行

> ID：14333358
> 
> 赞同：1
> 
> 时间：2013-01-15T07:58:57.223
> 
> 标签：c#, asp.net, gridview

我的 gridview 有问题，我的 Gridview 有一个**OnPageIndexChanging**事件，我的 gridview 的页面大小是**20**

一旦第一页的记录达到 20，第 21-40 条记录将转到第二页，当我转到第二页时，我在我的 gridview 中单击编辑按钮.. 例如：我单击第 **21**行在gridview中**记录**

该行的 EditItemTemplate 未显示，但我没有遇到问题，并且在调试时我的代码执行良好。

这是我在**Gridview_RowCommand的****“EditRow”中的代码**

 **```
protected void gridview_RowCommand(object sender, GridViewCommandEventArgs e)
{

        int iActiveIndex;

        switch (e.CommandName)
        {
            case "EditRow":
                iActiveIndex = Convert.ToInt32(e.CommandArgument);

                gridview.EditIndex = iActiveIndex;

                gridview.DataSource = emp.TrainingPrograms;
                gridview.DataBind();
                break;
         }
} 
```

这是**Gridview_OnPageIndexChanging中的代码**

```
protected void gridview_OnPageIndexChanging(object sender, GridViewPageEventArgs e)
{

        gridview.DataSource = emp.TrainingPrograms;
        gridview.PageIndex = e.NewPageIndex;
        gridview.DataBind();
} 
```

我的问题有什么可能的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:10:23.213

GridView 控件的 EditIndex 属性是指当前页面的第 X 行，而不是要编辑的行的 id。

可以通过将 rowindex 的模数乘以 pagesize 来选择正确的行，如下所示：

```
gridview.EditIndex = iActiveIndex % gridview.PageSize; 
```**

# windows-phone-7 - WP7中ListBox中的拖动按钮

> ID：14333359
> 
> 赞同：1
> 
> 时间：2013-01-15T07:59:04.053
> 
> 标签：windows-phone-7, c#-4.0, drag-and-drop, listbox, listboxitem

我在包含三个按钮的网格的列表框中遇到问题。我已经在这个网格内实现了按钮的交换功能。我的问题是当我从左到右拖动按钮并且当它与另一个按钮重叠时，我的拖动按钮在拖动时显示在那个按钮的后面。但是当我从右到左拖动一个按钮时，这不会发生（正确的功能）。这是我正在使用的 Xaml 代码

```
<Grid x:Name="ContentPanel" Grid.Row="1">
            <ListBox Height="Auto" Name="listbox" VerticalAlignment="Top" ItemsSource="{Binding}" Background="#00995B5B" DataContext="{Binding}" d:LayoutOverrides="Width" HorizontalAlignment="Stretch"  HorizontalContentAlignment="Stretch">
                <ListBox.ItemContainerStyle>
                    <Style TargetType="ListBoxItem">
                        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                    </Style>
                </ListBox.ItemContainerStyle>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid Height="300"  Background="{Binding RowBackgroundBrush}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1*" ></ColumnDefinition>
                                <ColumnDefinition Width="1*" ></ColumnDefinition>
                                <ColumnDefinition Width="1*" ></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Button Tag="{Binding IndexListItem1.PageIndex}"  Foreground="Black" Content="1"   Grid.Column="0" HorizontalAlignment="Center"  Margin="10,9,0,0" Width="133" d:LayoutOverrides="GridBox">
                                <toolkit:GestureService.GestureListener>
                                    <toolkit:GestureListener DragDelta="GestureListener_DragDelta" DragStarted="GestureListener_DragStarted" DragCompleted="GestureListener_DragCompleted" Hold="GestureListener_Hold"/>
                                </toolkit:GestureService.GestureListener>

                            </Button>
                            <Button Tag="{Binding IndexListItem2.PageIndex}" Content="2"    Grid.Column="1" HorizontalAlignment="Center" Margin="10,9,0,0" Width="133"  d:LayoutOverrides="GridBox">
                                <toolkit:GestureService.GestureListener>
                                    <toolkit:GestureListener DragDelta="GestureListener_DragDelta" DragStarted="GestureListener_DragStarted" DragCompleted="GestureListener_DragCompleted" Hold="GestureListener_Hold"/>
                                </toolkit:GestureService.GestureListener>

                            </Button>
                            <Button Tag="{Binding IndexListItem3.PageIndex}" Grid.Column="2" Content="3"  Foreground="Red" Margin="10,9,0,0"  Width="133" HorizontalAlignment="Center"  d:LayoutOverrides="GridBox">
                                <toolkit:GestureService.GestureListener>
                                    <toolkit:GestureListener DragDelta="GestureListener_DragDelta" DragStarted="GestureListener_DragStarted" DragCompleted="GestureListener_DragCompleted" Hold="GestureListener_Hold"/>
                                </toolkit:GestureService.GestureListener>

                            </Button>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:48:07.213

在`GestureListener_DragDelta`事件中添加设置`canvas.ZIndexProperty`为某个值，例如。`100`它会正常工作。不要忘记将`Zindex`值设置为`0`拖动完成时。

# ember.js - 我的 Handlebars 脚本没有被处理

> ID：14333368
> 
> 赞同：0
> 
> 时间：2013-01-15T07:59:48.723
> 
> 标签：ember.js, handlebars.js

我正在学习使用 Ember 开发 Web 应用程序。如您所见，我的测试代码只在视图中显示了一个文本。

当我使用`ember-1.0.pre.js`时，它工作正常，但是当我更改为时`ember-1.0.0-pre.2.js`，出现下一个错误：`Uncaught Error: "<TestApp.ApplicationView:ember177> - Unable to find template "application"`。使用最后一个版本的 ember : `ember-latest.js`，没有错误，但没有出现文本。在最后两种情况下，当我检查生成的 html 时，我意识到把手脚本没有被处理并保留在浏览器中的 html 中。

在[Ember 博客](http://emberjs.com/blog/2012/10/25/ember-1-0-pre2/)中，他们列出了版本之间的更改，但显然与我的问题无关。

我应该对这个简单的代码进行什么更改？

HTML

```
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="http://code.jquery.com/jquery-1.7.2.js"></script>
    <script src="http://cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.rc.1.js"></script>
    <script src="http://cloud.github.com/downloads/emberjs/ember.js/ember-1.0.pre.js"></script>
    <!--<script src="http://cloud.github.com/downloads/emberjs/ember.js/ember-1.0.0-pre.2.js"></script>-->
    <!--  <script src="http://cloud.github.com/downloads/emberjs/ember.js/ember-latest.js"></script>-->
    <script src="app.js"></script>
</head>
<body>
    <h1>Test Application</h1>
    <script  type="text/x-handlebars" data-template-name="application">
        {{outlet}}
    </script>
    <script type="text/x-handlebars" data-template-name="test">
        <h3> {{view.text}}</h3>
    </script>
</body> 
```

JavaScript：

```
TestApp = Ember.Application.create();
TestApp.ApplicationController = Ember.Controller.extend();
TestApp.ApplicationView = Ember.View.extend({
    templateName: 'application'
});
TestApp.TestController = Ember.Controller.extend();
TestApp.TestView = Ember.View.extend({
    text: 'This is a sample text',
    templateName: 'test'
});
TestApp.Router = Ember.Router.extend({
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/',
            connectOutlets: function(router) {
                router.get('applicationController').connectOutlet('test');
            }
        })
    })
});
TestApp.initialize(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:12:33.290

尝试这样设置您的路由器：

```
App.Router.map(function(match){
  match('/').to('application',function(match){
    match('/').to('test')
  });
});

App.TestRoute = Ember.Route.extend({
        this.render('test', {
            into:'application'
        });
}) 
```

看看这是否有帮助

# java - 验证来自控制台的用户输入。命令是否有效等

> ID：14333377
> 
> 赞同：1
> 
> 时间：2013-01-15T08:00:46.710
> 
> 标签：java, design-patterns, data-structures, io, console

当程序从控制台获取命令时，验证命令是否有效并执行它的标准/最佳实践是什么？
我在想类似的东西，`HashMap<String,Object>`但这不会降低所有字符串比较的性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:08:30.617

首先，不要担心性能。时间会晚一些（或者，更可能的是，根本不会出现）。解析命令不会比执行命令花费更多的时间，不是吗？

至于处理命令：首先，您应该将输入拆分为原子标记。这些可能是命令本身、开关 -a -b -c 或参数值，有时可能在“”之间。

将输入拆分为令牌后，请验证该命令是否存在。如果是，请检查令牌供应是否对命令有效。

我不知道你想使用什么样的架构。有时人们对一个命令使用一个类，有时一个类和很多方法，有时一个方法用一个非常长的案例。哪个最适合您？可能不是最后一个，但无论您选择什么，都应该与命令的复杂性及其工作相匹配。

示例 1：

```
abstract class Command {
  public abstract String getName();
  public abstract int execute(String[] parameters); // not implemented in Cmd* below
}

class Cmd1 extends Command {
  public String getName()
  {
    return "Cmd1";
  }
}

class Cmd2 extends Command {
  public String getName()
  {
    return "Cmd2";
  }
}

//somewhere else:
public void execute(String[] params) {
  Command[] commands = {new Cmd1(), new Cmd2()};
  for (Command cmd: commands) {
    if (cmd.getName().equals(params[0]) {
      cmd.execute(params);
      return;
    }
  }
  throw new RuntimeException("unknown command "+params[0]);
} 
```

示例 2：

```
void processCmd1(String[] params);

void processCmd2(String[] params);

public static final String CMD1 = "cmd1";
public static final String CMD2 = "cmd2";
static HashSet<String> availableCommands = new HashSet<String>();
static {
  availableCommands.put(CMD1);
  availableCommands.put(CMD2);
}

{
  if (availableCommands.contains(params[0])) {
    switch(params[0]) { // java 7
      case CMD1:
        processCmd1(params[0]);
        break;
      case CMD2:
        processCmd2(params[0]);
        break;
    }
  } else {
    throw new RuntimeException("unknown command "+params[0]);
  }
} 
```

示例 3：

```
abstract class Command {
  public abstract String getName();
  public abstract int execute(String[] parameters); // not implemented in Cmd* below
}

class Cmd1 extends Command {
  public String getName()
  {
    return "Cmd1";
  }
}

class Cmd2 extends Command {
  public String getName()
  {
    return "Cmd2";
  }
}

static HashMap<String,Command> commandMap = new HashMap<String,Command>();
static {
  Command cmd = new Cmd1();
  commandMap.put(cmd.getName(), cmd);
  cmd = new Cmd2();
  commandMap.put(cmd.getName(), cmd);
}

//somewhere else:
public void execute(String[] params) {
  Command cmd = commandMap.get(params[0]);
  if (cmd == null) {
    throw new RuntimeException("unknown command "+params[0]);
  } else {
    cmd.execute(params);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:04:59.857

对此的标准设计模式是责任链或解释器，但解释器可能是矫枉过正。责任链基本上是一种动态创建 if/then/else 决策树的方法，而不是将其硬编码为 if/then/else 语句。

我会预处理输入，然后使用责任链来解析输入。

我很确定用于命令行 parg 处理的标准库使用编译成运行代码的正式语法。至少在我上次使用它时，它在石器时代是这样完成的（lex 和 yacc 是流行的选择），但今天它可能已经很专业了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:08:05.593

有一个很好的命令行参数处理库。它是[Apache commons CLI](http://commons.apache.org/cli/introduction.html)。

# codeigniter - 本地主机中的 Codeigniter 模块

> ID：14333380
> 
> 赞同：0
> 
> 时间：2013-01-15T08:00:55.590
> 
> 标签：codeigniter, virtualhost, hmvc

我在家里的本地机器上设置了虚拟主机。

我创建了一个包含模块的 codeigniter 设置。主 index.php 页面有效，但是当我尝试访问我的模块时找不到它。

所以这行得通：`local.mysite`，但这不是： `local.mysite/module`

我需要在我的 vhost 文件中进行哪些更改才能使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:26:06.340

唔

尝试使用

```
local.mysite/index.php/module 
```

您可以使用带有一些简单规则的 .htaccess 文件轻松删除此文件。这是此类文件的示例，使用“否定”方法，其中除指定项目外的所有内容都被重定向

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:04:25.723

这是 .htaccess 文件。它在我的带有 index.php 的 webroot 中。我认为这会删除 index.php？它在我的托管服务器上运行良好，但在本地主机上却不行。

```
RewriteCond $1 !^(index\.php|images|css|js|uploads|assets|robots\.txt)
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

# google-chrome - 如何使用 chrome 扩展程序跟踪 Gmail 事件（打开下一封电子邮件、返回收件箱、收件箱到电子邮件）？

> ID：14333381
> 
> 赞同：1
> 
> 时间：2013-01-15T08:00:56.453
> 
> 标签：google-chrome, google-chrome-extension

如何使用 chorme 扩展跟踪 Gmail 事件（打开下一封电子邮件、返回收件箱、收件箱到电子邮件）？我正在开发一个 chorme 扩展，我可以从中为我的网站创建新用户，我要求的是，我将在右侧创建 I 框架，当用户单击电子邮件时，我网站上用户的所有信息将显示在右侧的框中，我该怎么做，请帮助我，

在此先感谢， Saurabh

# java - 从javascript（ajax）调用Spring控制器方法不触发？

> ID：14333385
> 
> 赞同：1
> 
> 时间：2013-01-15T08:01:16.060
> 
> 标签：java, javascript, ajax, spring

从javascript向Spring控制器方法发出请求如下

```
<script language="javascript" type="text/javascript">
          var xmlHttp
          var xmlHttp
          function show()
          {   
              if(typeof XMLHttpRequest != "undefined")
              {
              xmlHttp= new XMLHttpRequest();
               }
              else if (window.ActiveXObject)
              {
                  xmlHttp= new ActiveXObject("Microsoft.XMLHTTP");
              }
              if(xmlHttp==null)
              {
                  alert("Browser does not support XMLHTTP Request")
                  return;
              }
              var FAC_LICENSE_NO=document.getElementById("FAC_LICENSE_NO").value;
              //var url="/Final/WEB-INF/jsp/SurrenderViews/Ajax.jsp";
              var url="http://localhost:8080/Final/Ajax.FSu";
              url +="?param1="+FAC_LICENSE_NO;
              alert(url);
              xmlHttp.onreadystatechange = stateChange;
              xmlHttp.open("GET", url, true);
              xmlHttp.send(null);         
            }   
          function stateChange()
          {   
                if(xmlHttp.readyState==4 || xmlHttp.readyState=="complete")
                {
                    document.getElementById("factoryname").innerHTML=xmlHttp.responseText
                }
         }
    </script> 
```

和我的控制器

```
public class PhaseTwoFormSurrenderOfLicense extends MultiActionController implements Connections {

     public ModelAndView DataInput(HttpServletRequest request,HttpServletResponse response) 
     {
         return new ModelAndView("SurrenderViews/DataInput");
     } 
     public String Ajax(HttpServletRequest request,HttpServletResponse response) 
     {
           System.out.println("Maritammanafvara");
           String returning="<input type=\"text\" style=\"border: none\" name=\"Factory_name\" readonly=\"readonly\" value=\"HIHI\">";
           return returning;

     } 
} 
```

在上面的代码中，我可以从 html 锚标记调用 DataInput 和 Ajax 方法，但是从 XMLHttpRequest(ajax) 对象调用不会。谁能告诉地区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:11:33.653

你能试一下吗 `var url="Ajax.FSu";`

代替

`var url="http://localhost:8080/Final/Ajax.FSu";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:23:31.987

你有没有想过使用一个库来用于 AJAX？jQuery为此提供了方便的方法：api.jquery.com/category/ajax/

例子：

```
$.ajax("http://localhost:8080/Final/Ajax.FSu").done(function (data) {
    // do stuff with data
}).fail(function () {
    // do stuff when failed
}); 
```

此外，您需要对正确的 URL 进行编码，而不是对 localhost 部分进行硬编码。Spring MVC 有一个方便的标签：

```
<spring:url value="Final/Ajax.FSu" /> 
```

将为您输出 URL 和

```
<spring:url value="Final/Ajax.FSu" var="yourURL" /> 
```

将在上下文变量中插入 URL 以在您的 jsp 文件中使用，如下所示：

```
<a href="${yourURL}">Link</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:05:14.140

我没有看到`methodNameResolver`Spring 使用它来将 URL 路由到`MultiActionController`'s，它可能是类似的东西，`PropertiesMethodNameResolver`或者是你自己创建的东西。这是我的调度员：

```
 <bean id="methodNameResolver" class="org.springframework.web.servlet.mvc.multiaction.ParameterMethodNameResolver">
    <property name="paramName" value="method" />
</bean>

<bean class="your.controller">
    <property name="methodNameResolver" ref="methodNameResolver" />
</bean>

public class YourController extends MultiActionController

    public ModelAndView abcdef(...){

    }
} 
```

这将映射到 url?method=abcdefg

# git - Git相当于“hg id”？

> ID：14333388
> 
> 赞同：21
> 
> 时间：2013-01-15T08:01:33.313
> 
> 标签：git, version-control, mercurial, dvcs

Git 是否有任何与 Mercurial 的“hg id”等效的命令？即如果工作目录中有更改，则打印父提交的哈希和加号的命令？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2018-04-09T15:43:11.310

此命令等效于`hg id --id`：

`git describe --abbrev=12 --always --dirty=+`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T08:14:08.617

```
git log -1 HEAD^ 
```

将向您展示包括 SHA-1 在内的整个提交

如果是合并，您可以看到第二个父级的提交信息

```
git log -1 HEAD^2 
```

如果您的章鱼与超过 2 个父母合并，您可以在树状规范中输入任何数字：

```
git log -1 HEAD^5 
```

...查看第五位父母的提交信息

只是将`-1`日志输出限制为一次提交。您不希望报告该提交的沿袭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T08:05:39.537

我不认为有一个*完全*一样的命令，但你可以使用：

```
git status --porcelain 
```

它输出存储库中已更改文件的机器可读列表。您可以在第一列中查找不`?`表示已更改文件的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T08:06:32.210

`git status`将显示工作目录中的更改以及分支信息。

我想`git log`可以用来查看最后几个提交。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-17T07:22:40.867

`git ls-remote REPOSITORY BRANCH`将显示给定分支头部的哈希值。

[https://git-scm.com/docs/git-ls-remote.html](https://git-scm.com/docs/git-ls-remote.html)

# android - 如何从画布上擦除路径区域（Android）

> ID：14333393
> 
> 赞同：7
> 
> 时间：2013-01-15T08:02:08.597
> 
> 标签：android, canvas, path, transparency, erase

我需要裁剪边角`ImageView`。不要将它们四舍五入，而是从每个角落擦除三角形。

似乎唯一的方法是覆盖`onDraw`方法并使用`Path`. 问题是我没有纯色背景，所以我需要擦除这些区域，但不要用一些颜色填充它们。

我为此使用以下代码：

```
@Override
protected void onDraw(Canvas canvas) {
    Path path = new Path();
    path.moveTo(0, 0);
    path.lineTo(20, 0);
    path.lineTo(0, 20);
    path.close();

    Paint paint = new Paint();
    paint.setAntiAlias(true);
    paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
    canvas.drawPath(path, paint);
    super.onDraw(canvas);
} 
```

但是角落变黑但不透明。你可以帮帮我吗？或者你可能知道我的任务更好的解决方案。这是它的样子。

![在此处输入图像描述](../Images/c4ad7d9bc950fcb054986c2a1a2b1b63.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-06T22:09:59.027

为了使用透明颜色进行绘制，您必须使用`Paint` `setXfermode`它仅在您为画布设置位图时才有效。如果您按照以下步骤操作，您应该会得到想要的结果。

1.  创建一个画布并设置它的位图。

    ```
    mCanvas = new Canvas();
    mBitmap= Bitmap.createBitmap(scrw, scrh, Config.ARGB_8888);
    mCanvas.setBitmap(mBitmap); 
    ```

2.  当你想擦除某些东西时，你只需要使用 setXfermode。

    ```
    if (isErasing)
       mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
    else
       mPaint.setXfermode(null); 
    ```

3.  现在你应该可以使用透明颜色绘制：

    `mCanvas.drawPath(yourpath, mPaint);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T08:58:24.647

您可以剪辑画布对象：

```
@Override
protected void onDraw(Canvas canvas) {
    final Path path = new Path();
    final int count = canvas.save();

    path.moveTo(0, 20);
    path.lineTo(20, 0);
    path.lineTo(getWidth(), 0);
    path.lineTo(getWidth(), getHeight());
    path.lineTo(0, getHeight());
    path.close();

    canvas.clipPath(path);
    super.onDraw(canvas);
    canvas.restoreToCount(count);
} 
```

请注意`Canvas.clipPath`在启用硬件加速的 Android 3.0 或更高版本上不起作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T08:16:26.177

使用这条线

```
 paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN)); 
```

而不是这个

```
 paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR)); 
```

# asp.net - 在 WCF 服务中使用数据表

> ID：14333395
> 
> 赞同：0
> 
> 时间：2013-01-15T08:02:16.013
> 
> 标签：asp.net, wcf, serialization, datatable, dataset

我有一个 Web 应用程序使用来自`WCF`服务的数据访问。大约 70% 的数据来自列表或`Collections`来自`Datatable`. 我在加载屏幕时遇到了一些性能（速度）问题。

在互联网上搜索后，我发现数据表的速度比集合的速度慢 6 倍。为了使用集合，我需要为所有这些设置实体类。我想序列化或收集数据表，以便它们可以通过网络快速传输。这样做的有效方法是什么。如果是`serialization`或将其转换为`collection`? 请帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:09:29.263

[您可以在Entity Framework 5](http://blogs.msdn.com/b/adonet/archive/2012/08/15/ef5-released.aspx)中尝试使用 POCO 的实体模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:45:08.153

看看 DataTableSurrogate，它也在 SyncFramework 中用于序列化 DataTables。

[MSDN 数据表代理](http://msdn.microsoft.com/de-de/library/microsoft.synchronization.data.datatablesurrogate.aspx)

# ios - iOS HTML 输入标记在可滚动元素中停止滚动

> ID：14333410
> 
> 赞同：3
> 
> 时间：2013-01-15T08:03:00.073
> 
> 标签：ios, html, css, webkit, mobile-website

`overflow-y:auto`我的移动网站有一个包含`input`标签的固定可滚动 ( ) 元素。在 iPhone 和 iPad 上，触摸和移动`input`标签会阻止元素滚动，但触摸和移动标签（或其他任何东西）不会。在 Android 上不会出现此问题。

在我切换到 s 进行布局之前，这些`input`标签曾经是 a 的一部分，然后滚动适用于 iOS 和 Android。标签不在s中时滚动被阻止的原因是什么？我真的更喜欢不必回到s 进行布局。`table``div``input``table``table`

我也尝试过`-webkit-overflow-scrolling: touch`，它解决了 iPhone 的问题，但除了允许用户水平滚动之外，它还阻止了在 iPad 上完全滚动，这是我不想要的。

**更新：**如果软键盘处于活动状态，一切都会按预期工作。仅当我遇到问题时键盘未激活。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-16T04:01:49.853

问题可能出在浏览器上。您使用 safari 还是其他浏览器？也许更新浏览器或在不同的 iOS 设备上尝试会起作用？

# c# - 从银行付款回来后禁用自动注销？

> ID：14333421
> 
> 赞同：0
> 
> 时间：2013-01-15T08:03:55.073
> 
> 标签：c#, asp.net, sql-server

我有带有 dot net 4.0 的 asp.net 网页，我使用 asp.net 登录控制制作我的登录页面，当用户登录到我的网站并想要转到支付页面并设置数据时，然后按支付按钮并返回到我的网站，我的网页在重定向到我的网站主页后自动注销他。如何避免自动注销？

```
//my code for payment button:  
PaymentGatewayImplService bpService = new PaymentGatewayImplService();
result = bpService.bpPayRequest(terminalId, UserName,
PassWord,
basketID*1000+tryForPayment,
Int64.Parse(GetPrice()),
PayDateTextBox,
PayTimeTextBox, "",
"www.sample.com/inpay.aspx",
0);

//my code in inpay.aspx load form:
RefIdLabel.Text = Request.Params["RefId"];  
ResCodeLabel.Text = Request.Params["ResCode"];  
SaleOrderIdLabel.Text = Request.Params["SaleOrderId"];  
SaleReferenceIdLabel.Text = Request.Params["SaleReferenceId"]; 
```

在 inpay.aspx 我的网站自动注销.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:04:51.157

在我看来，您需要在您的网站中实施表单身份验证。这是一个简单的例子：http: [//msdn.microsoft.com/en-us/library/xdt4thhy%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/xdt4thhy%28v=vs.100%29.aspx)

# unit-testing - 测试构造函数

> ID：14333422
> 
> 赞同：0
> 
> 时间：2013-01-15T08:03:56.360
> 
> 标签：unit-testing, phpunit

我的构造函数使用从数据库加载的数据设置属性。我如何测试它是否真的从数据库加载数据？我想要 %100 的测试覆盖率，所以我需要测试我的每一段代码。

```
<?php
class PreferencesAdapter {

    private $_preferences = NULL;

    public function __construct() {         
                ...
        $this->load();
                ...
    }

    public function load() {
        ...
        $this->_preferences= DataFromDb();
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:28:15.280

我会模拟`load()`一个测试方法并验证它在创建对象时是否被调用一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:00:20.563

（为了快速测试，这里有一个你可以做的冗长的方法。）

或者，将您的相关查询作为公共方法放在类 PreferencesAdapterQueryCollection 中，并将其作为可选构造函数参数注入 PreferencesAdapter。（如果未发送参数，只需在此处实例化 PreferencesAdapterQueryCollection。）

在 PreferencesAdapterTest 中，发送一个模拟的 PreferencesAdapterQueryCollection，在其公共的简单查询方法中包含期望值和返回值。

我喜欢嘲笑这个。请参阅问题[Mockery - call_user_func_array() 期望参数 1 是一个有效的回调](https://stackoverflow.com/questions/12876849/mockery-call-user-func-array-expects-parameter-1-to-be-a-valid-callback)，例如调用。

# dart - 将本地文本文件读入列表

> ID：14333424
> 
> 赞同：2
> 
> 时间：2013-01-15T08:03:57.653
> 
> 标签：dart

我正在创建一个控制台应用程序来使用以下代码读取本地文件：

注意：我需要将结果存储到列表中，以便稍后在代码中使用它。打印只是我以后想用它做的一个例子。而且我不能在文件读取例程中做所有事情。我稍后需要访问列表。

```
var text = new List();
var config = new File("myfile.txt");
config.readAsLines(Encoding.ASCII).then((List<String> lines) {
  text.add(lines);
});

for (var l in text) print (l); 
```

显然这行不通，这样的事情是我真正不喜欢飞镖的地方。那么在不使用同步的情况下我应该怎么做呢？sync 不好，因为我需要在“main”部分中编写此代码，而不需要调用任何 void 来处理输入。此外，如果我使用同步并循环选择目录中的文件并尝试将其添加到列表并打印输出，它将重复打印目录中第一个文件的输出。

那么是否有某种“技巧”可以使这项工作成为我尝试的方式？任何其他脚本语言中的这种严格的简单操作在 dart 中都不那么严格:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:18:21.620

dart 中的许多 API 都使用异步操作。通常，此操作返回[Future](http://api.dartlang.org/docs/releases/latest/dart_core/Future.html)。一旦运算结果可用，`Future.then`就会调用 at 给出的函数。

在您的示例中，在**之后**`text.add(lines)`调用，因此当您尝试读取其内容时列表仍然为空。为了使您的代码工作，您必须将 放入回调函数中。就像是 ： **`for (var l in text) print (l);``text``print`**

 **```
main() {
  var config = new File("myfile.txt");
  config.readAsLines(Encoding.ASCII).then(handleLines);
}

handleLines(List<String> lines) {
  for (var l in lines) print(lines);
} 
```

您还可以使用异步[File](http://api.dartlang.org/docs/bleeding_edge/dart_io/File.html)函数的同步版本。特别是[readAsLinesSync ，它是](http://api.dartlang.org/docs/bleeding_edge/dart_io/File.html#readAsLinesSync)[readAsLines](http://api.dartlang.org/docs/bleeding_edge/dart_io/File.html#readAsLines)的同步版本。使用该版本，您的代码可以是：

```
main() {
  var config = new File("myfile.txt");
  List<String> lines = config.readAsLinesSync(Encoding.ASCII);
  for (var l in lines) print (l);
} 
```**

# c# - 在富文本框中添加图像

> ID：14333426
> 
> 赞同：0
> 
> 时间：2013-01-15T08:04:12.450
> 
> 标签：c#, image, richtextbox

我有一个`RichTextbox`用作日志并添加一些内容的日志，我使用以下代码：

```
Font fontMsg = new Font("Tahoma", 8, FontStyle.Regular);
txtLog.SelectionFont = fontMsg;
txtLog.SelectionColor = Color.MediumVioletRed;
txtLog.SelectedText = "Connection.HTTP: Failed to connect!";
txtLog.SelectedText = "\r\n"; 
```

这非常有效，因为它一直附加到文本框，我不需要处理 rfc 代码。是否可以在不使用代码的情况下以相同的方式添加图像？谢谢！

# jquery - Opera 中的 CSS3 缩放转换中断

> ID：14333432
> 
> 赞同：0
> 
> 时间：2013-01-15T08:04:26.193
> 
> 标签：jquery, opera, css-transitions, css-transforms

在我的 HTML 页面构成中，我有一些带有图像和文本的“div”块：

当我像这样使用 JQuery 进行块转换时：

```
$(elem).css({
'transform': 'scale(2)',
'transition-property': 'all',
'transition-duration': '1s',
}); 
```

它在 Firefox 和 Chrome 中运行良好，但在 Opera 转换中看起来很丑，因为它很生涩。但我想要像 Chrome 和 Firefox 那样流畅的动作。当我从我的块中删除文本并且“div”块只包含图像时，它在所有浏览器中都运行良好。有什么问题？我认为它与块中的文本相关联。但是怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:08:01.543

我在 Opera 上遇到了类似的问题：分配给元素悬停状态的转换破坏了分配给元素的转换。解决方案是将**所有**转换添加到元素及其悬停状态。

对于您的问题，这意味着在更改其比例之前尝试分配`transform: scale(1)`给您的, 。`"$(elem)"`

# jquery - 从对象获取数据

> ID：14333433
> 
> 赞同：0
> 
> 时间：2013-01-15T08:04:29.053
> 
> 标签：jquery, ajax, caching

```
var obj={};
$('.nav ul li a').click( function() {
    var url=$(this).attr('href');
    var key=$(this).text();
    $('.cnt').load(url +' div', function() {
      obj[key]=$(this).html();
    });  

    if($('.cnt').html()==obj[key]) {
      //get it from obj not server
    }
}); 
```

我如何在第一次点击后的每一次点击中从我创建的对象而不是服务器中获取数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:16:11.297

```
if(key in obj){
    //key property exist on object, do stuff here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:17:29.937

只需检查是否`obj[key]`已经存在

```
var obj = {};

$('.nav ul li a').click(function() {

    var url = $(this).attr('href');

    var key = $(this).text();

    if(obj[key] == 'undefined') {
        /* get it from server*/
        $('.cnt').load(url + ' div', function(response) {    
            obj[key] = $(this).html();    
        });
    }else{
        /* already have data, put in elment*/
         $('.cnt').html( obj[key])
     }

}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T08:12:49.083

你能试试这个吗`obj.key = $(this).html()`

# jquery - 使用 jQuery 如何无限期地淡入一个语句而不是另一个语句？

> ID：14333441
> 
> 赞同：-4
> 
> 时间：2013-01-15T08:05:13.103
> 
> 标签：jquery, css, fadein, fade, fadeout

我想无限期地淡出和淡入 3 个或更多语句。这是代码：

```
 <div class= "background">
    <h6>
    <div id="one">This is the first statement</div>
    <div id="two">This is the second statement</div>
    <div id="third">You get the point</div>
    </h6> 
    </div> 
```

我的问题措辞错误：我想`#two`替换`#one`，`#three`替换`#two`，`#one`替换`#three`等等。是的，我确实到处找。Geez 很抱歉需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:09:19.673

```
setInterval(function(){
$('.background').fadeToggle('slow');
},1000); 
```

**更新**

像这样的东西？

```
var k = ["#one","#two","#third"]
var cnt = 0;
setInterval(function(){
    $(k[cnt]).fadeToggle('slow').siblings().hide();
    cnt++;
if(cnt ==3){cnt = 0;}    
},2000); 
```

演示在这里：http: [//jsbin.com/urikah/1/edit](http://jsbin.com/urikah/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:09:23.870

您可以一个接一个地使用`fadeIn()`and `fadeOut()`（jQuery的动画队列将使第二个等到第一个完成）在最后一个上使用完成功能，重新开始整个过程​​，如下所示：

```
function fadeForever(sel) {
    $(sel).fadeOut().fadeIn(function() {
        fadeForever(sel);
    });
}

fadeForever("#one, #two, #three"); 
```

或者，如果您希望整个背景 div 褪色，您可以使用：

```
fadeForever(".background"); 
```

当然，如果你想控制淡入淡出时间，你可以在`fadeOut()`and中添加一个时间参数。`fadeIn()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:48:45.007

**演示**：http: [//jsbin.com/ubiqob/5/edit/](http://jsbin.com/ubiqob/5/edit/)

**编辑：**我更新了我的 jsbin 以更好地匹配您的示例...

`fade`为了方便起见，我给你的 div 上了一堂课：

```
<div class= "background">
   <h6>
      <div class="fade">This is the first statement</div>
      <div class="fade">This is the second statement</div>
      <div class="fade">You get the point</div>
   </h6> 
</div> 
```

使用以下 CSS 类：

```
.fade {
   position: absolute;
   display: none;
} 
```

最后是javascript代码：

```
var j = 0,
    n = ('.fade').length;
    $('.fade:first').fadeIn(1000);

function change() {  
    $('.fade:visible').fadeOut(1000, function() {
    j = j + 1;
    $($('.fade')[j%n]).fadeIn(1000);
  });
}

setInterval(change, 2000); 
```

# java - 使用 Serializable 通过意图传递数据

> ID：14333449
> 
> 赞同：75
> 
> 时间：2013-01-15T08:06:16.513
> 
> 标签：java, android, android-intent

我已经用可序列化的方式实现了我的类，但它仍然没有用。

这是我的课：

```
package com.ursabyte.thumbnail;

import java.io.Serializable;

import android.graphics.Bitmap;

public class Thumbnail implements Serializable {

    private static final long serialVersionUID = 1L;
    private String label = "";
    private Bitmap bitmap;

    public Thumbnail(String label, Bitmap bitmap) {
        this.label = label;
        this.bitmap = bitmap;
    }

    public void set_label(String label) {
        this.label = label;
    }

    public String get_label() {
        return this.label;
    }

    public void set_bitmap(Bitmap bitmap) {
        this.bitmap = bitmap;
    }

    public Bitmap get_bitmap(){
        return this.bitmap;
    }

    //  @Override
    //  public int compareTo(Thumbnail other) {
    //      if(this.label != null)
    //          return this.label.compareTo(other.get_label());
    //      else
    //          throw new IllegalArgumentException();
    //  }

} 
```

这就是我想要传递的。

```
List<Thumbnail> all_thumbs = new ArrayList<Thumbnail>();
all_thumbs.add(new Thumbnail(string, bitmap));
Intent intent = new Intent(getApplicationContext(), SomeClass.class);
intent.putExtra("value", all_thumbs); 
```

但它仍然没有奏效。我不知道如何使用 Parcelable，所以我改用它。

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2013-01-15T08:15:35.087

尝试使用[Bundle.Serializable](http://developer.android.com/reference/android/os/Bundle.html#putSerializable%28java.lang.String,%20java.io.Serializable%29)传递可序列化列表：

```
Bundle bundle = new Bundle();
bundle.putSerializable("value", all_thumbs);
intent.putExtras(bundle); 
```

在 SomeClass Activity 中得到它：

```
Intent intent = this.getIntent();
Bundle bundle = intent.getExtras();

List<Thumbnail> thumbs=
               (List<Thumbnail>)bundle.getSerializable("value"); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-10-19T20:58:14.027

**此代码可以帮助您：**

```
public class EN implements Serializable {
//... you don't need implement any methods when you implements Serializable
} 
```

**放数据。**使用额外的创建新活动：

```
EN enumb = new EN();
Intent intent = new Intent(getActivity(), NewActivity.class);
intent.putExtra("en", enumb); //second param is Serializable
startActivity(intent); 
```

**从新活动中**获取数据：****

 **```
public class NewActivity extends Activity {

    private EN en;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        try {
            super.onCreate(savedInstanceState);

            Bundle extras = getIntent().getExtras();
            if (extras != null) {
                en = (EN)getIntent().getSerializableExtra("en"); //Obtaining data 
            }
//... 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-23T11:47:29.067

我扩展了 ρяσѕρєя K 的答案，以使代码完整且可行。因此，当您完成填写“all_thumbs”列表时，您应该将其内容一一放入包中，然后放入意图中：

```
Bundle bundle = new Bundle();

for (int i = 0; i<all_thumbs.size(); i++)
bundle.putSerializable("extras"+i, all_thumbs.get(i));

intent.putExtras(bundle); 
```

为了从意图中获得额外内容，您需要：

```
Bundle bundle = new Bundle();
List<Thumbnail> thumbnailObjects = new ArrayList<Thumbnail>();

// collect your Thumbnail objects
for (String key : bundle.keySet()) {
thumbnailObjects.add((Thumbnail) bundle.getSerializable(key));
}

// for example, in order to get a value of the 3-rd object you need to:
String label = thumbnailObjects.get(2).get_label(); 
```

的优点`Serializable`是它的简单。但是，我建议您`Parcelable`在需要传输大量数据时考虑使用方法，因为`Parcelable`它是专为 Android 设计的，比`Serializable`. 您可以使用以下方法创建`Parcelable`类：

1.  一个在线工具 - **[parcelabler](http://www.parcelabler.com/)**
2.  Android Studion 的插件 - **[Android Parcelable 代码生成器](http://corochann.com/fast-easy-parcelable-implementation-with-android-studio-parcelable-plugin-641.html)**

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-07-19T06:09:47.297

**发送数据：**

首先通过实现`Serializable`您的数据类来制作您的可序列化数据

```
public class YourDataClass implements Serializable {
String someText="Some text";
} 
```

然后将其放入意图

```
YourDataClass yourDataClass=new YourDataClass();
Intent intent = new Intent(getApplicationContext(),ReceivingActivity.class);
intent.putExtra("value",yourDataClass);
startActivity(intent); 
```

**接收数据：**

```
YourDataClass yourDataClass=(YourDataClass)getIntent().getSerializableExtra("value"); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-05-06T08:23:05.470

不要忘记**在您的对象将使用的每个类中实现 Serializable ，**就像对象列表一样。否则你的应用会崩溃。

例子：

```
public class City implements Serializable {

private List<House> house;

public List<House> getHouse() {
    return house;
}

public void setHouse(List<House> house) {
    this.house = house;
}} 
```

然后 House 需要这样实现 Serializable ：

```
public class House implements Serializable {

private String name;

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}} 
```

然后你可以使用：

```
Bundle bundle = new Bundle();
bundle.putSerializable("city", city);
intent.putExtras(bundle); 
```

并通过以下方式检索它：

```
Intent intent = this.getIntent();
Bundle bundle = intent.getExtras();
City city =  (City)bundle.getSerializable("city"); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-15T08:17:28.933

```
Intent intent = new Intent(getApplicationContext(),SomeClass.class);
intent.putExtra("value",all_thumbs);
startActivity(intent); 
```

在 SomeClass.java 中

```
Bundle b = getIntent().getExtras();
if(b != null)
thumbs = (List<Thumbnail>) b.getSerializable("value"); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-15T08:15:48.897

您需要创建一个[Bundle](http://developer.android.com/reference/android/os/Bundle.html)，然后使用[putSerializable](http://developer.android.com/reference/android/os/Bundle.html#putSerializable%28java.lang.String,%20java.io.Serializable%29)：

```
List<Thumbnail> all_thumbs = new ArrayList<Thumbnail>();
all_thumbs.add(new Thumbnail(string,bitmap));
Intent intent = new Intent(getApplicationContext(),SomeClass.class);

Bundle extras = new Bundle();

extras.putSerializable("value",all_thumbs);
intent.putExtras(extras); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-05-18T07:05:54.077

在**kotlin 中**：对象类实现了 Serializable：

```
class MyClass: Serializable {
//members
} 
```

在对象发送点：

```
val fragment = UserDetailFragment()
val bundle = Bundle()
bundle.putSerializable("key", myObject)
fragment.arguments = bundle 
```

在片段中，我们想要获取我们的对象：

```
val bundle: Bundle? = arguments
    bundle?.let {
        val myObject = it.getSerializable("key") as MyClass
        myObject.memberName?.let { it1 -> showShortToast(it1) }
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-15T08:17:30.687

创建您的自定义对象并实现可序列化。接下来，您可以使用`intent.putExtra("package.name.example", <your-serializable-object>)`.

在第二个活动中，您使用`getIntent().getSerializableExtra("package.name.example")`

否则，请遵循[此](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20java.io.Serializable%29)页面和[此](http://developer.android.com/reference/android/os/Parcelable.html)页面。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-18T17:34:39.817

如果您在这里是因为您完成了所有这些操作并且您的应用仍然在切换活动时崩溃：

我的问题在于我的 ParentClass 使用了另一个我忘记实现 Serializable 的类的对象

```
public class A implements Serializable {

        private B[][] b;

}

public class B implements Serializable { //forgot this implementation

    B(){
    }

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-09T09:42:44.507

发送`List<MySerializableObject>`通过意图时，我使用以下方法：

```
List<Thumbnail> thumbList = new ArrayList<>();
//Populate ...

Intent intent = new Intent(context, OtherClass.class);
intent.putExtra("ThumbArray", thumbList.toArray(new Thumbnail[0]));
//Send intent... 
```

并像这样检索它：

```
Thumbnail[] thumbArr = (Thumbnail[]) getIntent().getSerializableExtra("ThumbArray");
if (thumbArr != null) {
    List<Thumbnail> thumbList = Arrays.asList(thumbArr);
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-03-28T04:46:39.740

1-您使用的 android.graphics.Bitmap 没有实现 Serializable 类，因此您必须删除该类然后它才能工作。

2-简而言之，您可以访问如何[在意图之间传递数据](http://blogssolutions.co.in/android-pass-model-from-intents-using-serializable)。**

# c# - 无法将大量数据插入工作表

> ID：14333454
> 
> 赞同：1
> 
> 时间：2013-01-15T08:06:53.913
> 
> 标签：c#, excel

我无法将大量数据插入工作表。错误是“内存不足，无法继续执行程序”。我正在使用 Excel 2007。我的数组有 393210 行和 29 列。首先，我尝试使用一个操作（Range = (object) array）插入它。之后，我将数组分成几个部分。我的代码：

```
 // Fill content
const int row_limit = 283500;
int row_start = 0;
int row_end;

int number_of_iterations = (int)Math.Ceiling((double)dtable.Rows.Count / (double)row_limit);

for (int idx = 0; idx < number_of_iterations; idx++)
{
    if (idx == number_of_iterations - 1)
        row_end = dtable.Rows.Count - 1;
    else
        row_end = row_start + row_limit - 1;

    object[,] arr = new object[row_end - row_start + 1, dtable.Columns.Count];
    int arr_row = 0;

    for (int r = row_start; r <= row_end; r++)
    {
        for (int c = 0; c < dtable.Columns.Count; c++)
        {
            arr[arr_row, c] = dtable.Rows[r][c];
        }
        arr_row++;
    }

    ((Excel.Range)ex_sheet.get_Range((Excel.Range)ex_sheet.Cells[row_start + 2, 1], (Excel.Range)ex_sheet.Cells[row_end + 2, dtable.Columns.Count])).Value = arr;

    row_start = row_end + 1;
} 
```

常量 row_limit 设置在一次操作期间插入的最大行数。如果数字小于 283000，则一切正常。但如果它超过 283500，我会收到错误消息。

正如我在[这里](http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010073849.aspx)发现的“工作表大小为 1,048,576 行 x 16,384 列”。这个错误的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T10:24:30.083

Excel 2007 被限制为大约 2GB 内存（它是一个 32 位程序），但实际上由于内存碎片问题，它经常在达到该限制之前就耗尽内存。
Excel 在内部使用稀疏数组方案来跟踪工作表上正在使用的单元格，因此尽管已发布的 1,048,576 行和 16,384 列的限制是正确的，但在不超过 2GB 限制的情况下无法使用所有这些单元格（您需要超过 1000国标）。
Excel 2010 和 2013 的 64 位版本具有更大的内存限制。
有关 Excel 版本的内存限制的一些详细信息，请参阅[http://www.decisionmodels.com/memlimitsc.htm](http://www.decisionmodels.com/memlimitsc.htm)。

# jquery - jquery datepicker 不加载

> ID：14333457
> 
> 赞同：1
> 
> 时间：2013-01-15T08:07:16.093
> 
> 标签：jquery, datepicker

我已经搜索了很多关于这个问题的线程，但没有一个对我的情况有帮助。

日期选择器不想加载到我的页面上。这是资源列表：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<link rel="stylesheet" href="../jscripts/demos.css" /> 
```

这是紧随其后的jquery代码：

```
 <script type="text/javascript">
    $(document).ready(function(){           
            $("#d1, #d2").datepicker(); 
    });
    </script> 
```

这个你能帮我吗。谢谢。

更新：对不起，我忘了添加 HTML 代码：

```
<input type="text" id="d1" name="d1" size="15" style="text-align:right;" /> 
```

[...]

```
<input type="text" id="d2" name="d2" size="15" style="text-align:right;" /> 
```

试图输出到控制台：`console.log($("#d1, #d2"));`选择器没问题，它给了我正确的输入。错误：我收到以下错误（通过 FireBug 获得）：未捕获类型错误：对象 [对象对象] 没有方法 'datepicker' index.php:17（匿名函数） index.php:17 fire jquery-latest.js:1017 self .fireWith jquery-latest.js:1127 jQuery.extend.ready jquery-latest.js:416 DOMContentLoaded

更新：我刚刚在这里上传了整个页面代码：[jsfiddle.net/v69eH](http://jsfiddle.net/v69eH)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:18:05.137

You should add this in the body of your page:

```
<input id='d1' type='text' /><br/>
<input id='d2' type='text' /> 
```

fiddle: [http://jsfiddle.net/Tw5rD/](http://jsfiddle.net/Tw5rD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:27:54.550

I found the problem. As you can see I have another jQuery load in the code, right before the content part. That has overwriten the first loaded jQuery and of course the document.load event as well.

# .net - Visual Studio 2010 或 2012 是否支持 SSRS 报告？

> ID：14333459
> 
> 赞同：4
> 
> 时间：2013-01-15T08:07:25.600
> 
> 标签：.net, visual-studio-2012, ssrs-2012

[我在发行说明](http://msdn.microsoft.com/en-us/library/ee960138.aspx)中没有看到任何内容，有没有人确定这方面是否有任何改进？令人惊讶的是，MS 不支持`.resx`开箱即用的 SSRS 报告文件。

我看到的唯一选择是创建一个单独的类库并使用它来检索资源字符串，如[本文](http://blogs.msdn.com/b/sriram_reddy1/archive/2012/01/09/localization-in-ssrs-reports.aspx)所示，其中没有提及他们使用的是哪个版本的 SQL Server 或 VS。（关于最初的问题，它变成了让报告在 vs 2012 中工作）

我尝试了**Visual Studio 2012 Pro**试用，报告项目的迁移失败。

> ProjectName.rptproj：未找到该项目类型所基于的应用程序。

当项目在 Visual Studio 2012 中打开时，报告项目会显示`(incompatible)`，其下方的文本会显示

> 此项目与当前版本的 Visual Studio 不兼容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T09:28:27.833

**我有报告和报告项目 (.rtproj) 可以在 Visual Studio 2010 和 SQL Server 2008 R2 中工作**！它可能适用于 VS 2010/2012 与 SQL Server 2008 (R2) 或 SQL Server 2012 的任何组合。

1.  安装 Visual Studio 2010 PLUS SP1。
2.  安装[SQL Server 数据工具](http://msdn.microsoft.com/en-us/library/hh500335%28v=vs.103%29.aspx)(SSDT)
3.  使用 Data Tools 和 Reporting Services 安装 SQL Server 2012。（我用的是试用版）

现在我可以使用 Visual Studio 2010 来编辑和部署报表，甚至可以使用 SQL Server 2008 R2（可能还有其他版本）。

*对于较旧的 SQL Server Reporting Service 版本，仍然存在 VS10/12 报告编辑器项目中是否有任何新内容或不受支持的问题。*

# django - Django Generic Foreign keys - 考虑到 SQL 性能是好是坏？

> ID：14333460
> 
> 赞同：14
> 
> 时间：2013-01-15T08:07:29.550
> 
> 标签：django, performance, postgresql, foreign-key-relationship

我有一个模型，它包含一个通用外键关系，并在同一个应用程序中`A`限制了对 3 个其他模型的选择（将它们视为和）。而且我知道我们不能使用或任何其他查询集操作的通用外键的局限性。`B``C``D``filter``get`

所以为了实现这样的目标，`A.objects.filter(generic_object__name="foo")`我必须首先过滤 B、C 和 D 的对象作为查询集，迭代它们并使用通用反向关系将`A`对象作为列表（而不是查询集）。

我不确定它将如何影响数据库上的 SQL 性能，因为查询不是直接的。

PS：我需要使用通用外键，所以请建议任何 SQL 改进而不是重新设计模型。

使用 Django 1.4.3 和 Postgres。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-15T09:18:06.727

我想引用 David Cramer 的话：Disqus 的开发者，Django 的提交者

> 类属关系很好。它们并不慢，只是在您的代码库中更难管理。

我看到很多人告诉其他人不要使用泛型关系，因为它很慢，但从不告诉它有多慢。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-12-31T23:11:00.790

[避免 Django 的 GenericForeignKey](https://lukeplant.me.uk/blog/posts/avoid-django-genericforeignkey/)对涉及通用外键（或“多态关联”，他们在 rails-speak 中称它们）中涉及的数据库设计反模式有一个很好而全面的描述。

至于性能，每次您想从模型中检索相关的 GenericForeignKey 资源时，都需要 3 次数据库查询：

1.  SELECT object_id_field, object_id from myapp_a WHERE id=1;
2.  选择 app_label，模型 FROM django_content_type WHERE id=A.object_type_field;
    *   在应用程序代码中，计算表名`model + _ + app_label`
3.  选择 A.object_id_field FROM `TABLE_NAME`;

当人们说通用外键有性能损失时，他们指的是这个查询开销。

只有极少数情况下您真正想要使用通用外键。上面链接的文章也讨论了这些。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-28T15:14:10.727

向模型添加 index_together Meta 选项：

```
class Meta:
    index_together = [('cprofile_id', 'cprofile_type')] 
```

# web2py - Web2Py 错误

> ID：14333462
> 
> 赞同：1
> 
> 时间：2013-01-15T08:07:36.247
> 
> 标签：web2py

当我尝试运行 Web2Py 的代码时出现错误。

基本上我们必须编写一个函数来查询数据库并显示可用的航班。

函数定义如下：

```
def searchFlights():
    return dict()

def show():
    receivedFlights = request.vars.originCity+','+request.vars.destCity+','+request.vars.type+','+request.vars.deptDate+','+request.vars.arrivalDate+','+request.vars.vlassType+','+request.vars.noOfAdults+','+request.vars.noOfChildren+','+request.vars.noOfInfants
    return dict(txt1=recievedflights, flights=db().select(db.Flight.request.originCity+','+request.vars.destCity+','+request.vars.type+','+request.vars.deptDate+','+request.vars.arrivalDate+','+request.vars.classType+','+request.vars.noOfAdults+','+request.vars.noOfChildren+','+request.vars.noOfInfants)) 
```

我们现在得到的错误是：

```
 **File "K:/wdd-softw/web2py/applications/Assignment/controllers/default.py", line 106, in show
    receivedFlights = request.vars.originCity+','+request.vars.destCity+','+request.vars.type+','+request.vars.deptDate+','+request.vars.arrivalDate+','+request.vars.vlassType+','+request.vars.noOfAdults+','+request.vars.noOfChildren+','+request.vars.noOfInfants 
```

类型错误：+ 不支持的操作数类型：“NoneType”和“str”**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T16:13:06.507

第一个问题是，当第一次加载带有表单的页面时，没有提交任何内容，所以`request.vars`是空的，因此每个都`request.vars.some_var`返回 None。相反，您可以执行以下操作：

```
receivedFlights = ', '.join(request.vars.values()) if request.vars else 'Empty' 
```

您的数据库选择也会遇到同样的问题——您应该只在 request.vars 存在时运行查询。此外，您的查询不正确 - 您不能简单地将所有值连接成一个字符串并将其放在`select()`. 我建议您阅读有关[DAL](http://web2py.com/books/default/chapter/29/06)的章节以了解正确的查询语法。它应该看起来更像：

```
db((db.Flight.originCity == request.vars.originCity) &
   (db.Flight.destCity == request.vars.destCity) &
   ...).select() 
```

最后，您可以按照[此处](https://stackoverflow.com/a/14293880/440323)的建议简化查询构造：

```
query = reduce(lambda a, b: (a & b),
    (db.mytable[v] == request.vars[v] for v in request.vars if v != None)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-24T13:58:32.880

使用 ...+str(request.vars.noOfAdults)+... 将数字字段转换为字符串。

# php - 创建新动作

> ID：14333463
> 
> 赞同：1
> 
> 时间：2013-01-15T08:07:42.223
> 
> 标签：php, symfony-1.4

我继承了一个 symfony 项目，我正在尝试创建一个新动作。

我已经转到该`/frontend/modules/theModuleName/actions/actions.class.php`文件并创建了一个新函数（其中已经有几个）并遵循了调用它的命名指南`executeFunctionName`。

但是，当我尝试从这样的模板中调用它时：

`<form action="/frontend_dev.php/theModuleName/functionName" method="post">`我只是得到错误，它不起作用。

还需要做什么来创建新操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:26:48.867

我假设错误是指 404（未找到）。仅当您仍然具有默认路由规则时才有效：

```
default_index:
  url:   /:module
  param: { action: index }

default:
  url:   /:module/:action/* 
```

否则就制定一个规则。像这样的东西：

```
my_route:
  url: /my-custom-url.html
  param: { module: theModuleName, action: functionName } 
```

# java - Java 平台是否在远程方法调用期间用它们的存根替换所有远程对象？

> ID：14333467
> 
> 赞同：0
> 
> 时间：2013-01-15T08:07:55.860
> 
> 标签：java, networking, rmi

`stub`Java 平台是否在远程方法调用期间用它们的 s 替换所有远程对象？在`RMI`我们知道的过程中，为调用方法和调用者方法`JVM`创建了一个`stub`方法，我的问题是，在调用函数之后，然后通过网络套接字在存根之间发生通信，因此在将结果返回给远程对象时，所有远程对象被它们的存根替换？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:28:44.677

> Java 平台是否在远程方法调用期间用它们的存根替换所有远程对象？

所有*导出*的远程对象，是的，在参数或结果对象的编组期间。

> 在 RMI 期间，我们知道，JVM 为调用和调用者方法创建了一个存根方法

不完全是。导出对象时，RMI 会为远程对象创建存根对象。

> 我的问题是，在调用函数之后，然后通过网络套接字在存根之间进行通信

不会。它发生在客户端的存根和服务器的 RMI 运行时系统之间。

> 这样在将结果返回给远程对象时，是否所有远程对象都被它们的存根替换了？

现在这是正确的，但不是因为你给出的原因。

# android - 应用程序中的 onCreate 是否在升级时运行？

> ID：14333470
> 
> 赞同：2
> 
> 时间：2013-01-15T08:08:05.823
> 
> 标签：android, upgrade

我想在应用程序升级期间对我的应用程序进行一些一次性的修改。检查[android.app.Application](http://developer.android.com/reference/android/app/Application.html)文档，我注意到有`onCreate`但没有`onUpgrade`（就像在[android.database.sqlite.SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)中一样）。

我已将升级代码放入`onCreate`方法中，但不清楚升级期间是否正在执行代码。

`onCreated`在升级期间调用？还是有另一种运行升级特定代码的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T12:42:32.317

> 升级期间是否调用了 onCreated？

不。`Application.onCreate()`当您的应用程序从它认为“未运行”到“正在运行”的状态打开时调用

应用程序在其包具有一个或多个活动进程时被视为正在运行。它会出现在正在运行的应用程序列表中（并非所有固件都可以显示它们，但是有很多应用程序显示正在运行的软件包，并且有 API 可以获取此列表）并且可能有一些正在运行的服务或活动，但不一定！系统可以将您的应用程序保持在“运行”状态，只要它认为它不合适，并且当它需要重新声明一些内存时会杀死它，或者如果您以某种方式显式杀死它（也有 API，但是通常没有理由使用它）。

> 还有另一种运行升级特定代码的方法吗？

正如@Class Stacker 所写：如果您在实现新版本时正在修改版本名称或编号 - 您可以在通过`Activity.onCreate()`版本名称方法创建主要活动时检查您的主要活动，并将其与您保存到 sharedPreference 的最后一个版本名称进行比较或数据库表。然后，当您认识到您的版本已更改时，您可以实现您想要的任何逻辑。

您可以使用以下代码检查版本名称和编号：

```
 PackageInfo pinfo = this.getPackageManager().getPackageInfo(getPackageName(), 0);
     Integer versionCode = pinfo.versionCode; 
     String versionName = pinfo.versionName; 
```

希望对你有帮助，祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:22:53.500

有 Android 在打包操作时发送的广播。但是，有问题的包裹要么被排除在接收范围之外，要么交付不可靠（我现在不记得确切的情况）。所以没有什么可以依赖的。

如果您需要升级修改，您可以使用[共享首选项文件](http://developer.android.com/reference/android/content/SharedPreferences.html)，您可以在其中标识安装并在 Application#onCreate() 中访问该文件。如果您的应用程序的最后一个版本也使用了一个文件，那么除非用户删除所有应用程序数据，否则它仍然存在。

因此，这都是特定于用例的，因为升级的真正含义并不总是很明显。

请注意，您可以拥有一个特定于用例的共享首选项文件，其中仅包含您的升级信息。

不要让名字欺骗你；如果您希望该文件是您的应用程序的私有文件（除非有人植根该设备，在这种情况下所有赌注都已关闭）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:10:57.770

不确定您到底要更新什么，但您可以根据示例 SharedPreferences 中保存的版本检查当前版本号。

你可以在这里阅读更多相关信息；[如何查看安卓系统版本？](https://stackoverflow.com/questions/3093365/how-can-i-check-the-system-version-of-android)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-07T21:21:42.827

有“ACTION_MY_PACKAGE_REPLACED”广播： [https](https://developer.android.com/reference/android/content/Intent#ACTION_MY_PACKAGE_REPLACED) ://developer.android.com/reference/android/content/Intent#ACTION_MY_PACKAGE_REPLACED 您可以使用它来跟踪应用升级事件。如果您想在更新后立即执行某些操作（例如重新启动服务），这很有用。

但是如果您不需要立即运行代码，最好在启动应用程序时检查版本号是否更改。只需将以前的版本号存储在某处并进行比较。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-15T08:10:46.367

更新期间或更新后没有回调。

# reporting-services - 出纳员委员会报告 AX 2012

> ID：14333476
> 
> 赞同：1
> 
> 时间：2013-01-15T08:08:26.637
> 
> 标签：reporting-services, dynamics-ax-2012

我被分配开发一份 SSRS 报告，该报告将显示给定时间段的收银员佣金，该报告将包括员工姓名、商品 ID、销售额、折扣和佣金等列。

这是 AX 2012，我们定义并分配了项目的佣金组，并且还定义了进一步的销售代表组，你们能否了解我如何从数据库中获取佣金信息，我愿意在 sql 中编写一个存储过程我将为此在我的报告中提出。我在retailTransactionTable 或RetailTransactionSalesTrans 表中找不到任何关于佣金的列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T15:45:11.743

尝试查看 CommissionTrans 表。

# python - lxml - 访问元素文本时出现 UnicodeDecodeError

> ID：14333477
> 
> 赞同：2
> 
> 时间：2013-01-15T08:08:27.543
> 
> 标签：python, html, unicode, utf-8, lxml

我正在使用一些 Python 代码，这些代码使用`lxml HTML`解析器来解析同事从随机网站样本中抓取的 HTML。

在其中两个中，我收到表格错误

> “'utf8' 编解码器无法解码位置 502 中的字节 0xe20x80：数据意外结束”，

并且 HTML 内容确实包含损坏的`UTF-8`字符。

代码中的一个名为 ele 的变量被分配给包含错误字符的文本周围的 <p> 元素，并且可以通过 ele.text 访问该文本。或者它可能是，但仅将 ele.text 分配给另一个变量会导致`UnicodeDecodeError`引发 。在 except 子句中可用的类型对象`UnicodeDecodeError`包含一些有用的属性，例如文本中坏字节的开始和结束位置，可用于创建已删除坏字节的新字符串，但是这样做ele.text 的任何内容，例如获取它的子字符串，都会引发一个新`UnicodeDetectError`的。我能做些什么来挽救好的部分`ele.text`吗？

我是凭记忆写的，我不记得代码的所有细节，所以如果有用的话我明天可以提供更多信息。我记得的是 ele 是一个类型的对象，`lxml._Element`被解析的文件确实在 中`utf-8`，并且文件中有一个位置，其中字符的前两个`utf-8`字节与实体匹配＆rdquo; 紧随其后的是实体“。所以文本包含`"xE2x80&amp;rdquo;"`. 错误消息抱怨`"xE2x80"`并给出了它们在一个包含大约 520 个字符的字符串中的位置。如有必要，我可以丢弃整个字符串，但我宁愿只使用位置信息来丢弃`"xE2x80"`. 出于某种原因，使用 ele.text 执行任何操作都会导致 lxml 中较低级别的 Cython 代码出错。我明天上班时可以提供堆栈跟踪。什么，如果我能用那个文本做什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:35:26.267

`e2 80`字节本身不会导致错误：

```
from lxml import html

html_data = b"<p>before &ldquo;\xe2\x80&rdquo; after"
p = html.fromstring(html_data)
print(repr(p.text))
# -> u'before \u201c\xe2\x80\u201d after' 
```

正如@Esailija 在评论中指出的那样，上述数据并未将数据解释为 utf-8。强制 utf-8 编码：

```
from lxml import html

html_data = b"""<meta http-equiv="content-type"
                      content="text/html; charset=UTF-8">
                <p>before &ldquo;\xe2\x80&rdquo; after"""
doc = html.fromstring(html_data.decode('utf-8','ignore'))
print(repr(doc.find('.//p').text))
# -> u'before \u201c\u201d after' 
```

*   检查 utf-8 是否是文档的正确字符编码
*   在将损坏的字节序列传递给 lxml 之前替换它

# ios - 将我的应用程序的到期日期设置为 1 个月

> ID：14333482
> 
> 赞同：1
> 
> 时间：2013-01-15T08:08:39.430
> 
> 标签：ios, nsdate

必须为我的应用程序设置到期日期。目前，我正在存储打开应用程序的日期，代码如下所示

```
NSError *error;
NSEntityDescription *entityDesc = [NSEntityDescription entityForName:@"ExpiredDate" inManagedObjectContext:context];
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc]init];
[fetchRequest setEntity:entityDesc];
NSArray *fetchedObjects = [[context executeFetchRequest:fetchRequest error:&error] retain];

[fetchRequest release];

if([fetchedObjects count ]<=0)
{
    NSDate *todays=[[NSDate alloc]init];

    NSDateFormatter *date=[[NSDateFormatter alloc]init];
    [date setDateFormat:@"MM/DD/YYYY"];
    [date stringFromDate:todays];
   NSString *datelabel = [NSString stringWithFormat:@"%@",
                            [date stringFromDate:todays]];

    NSManagedObject *objUser;
    NSError *error;

    objUser = [NSEntityDescription insertNewObjectForEntityForName:@"ExpiredDate" inManagedObjectContext:context];
    [objUser setValue:datelabel forKey:@"date"];                 

    if (![context save:&error]) 
    {
        NSLog(@"Problem saving: %@", [error localizedDescription]);
    }

}
else
{
    for(int i=0; i< [fetchedObjects count]; i++)
    {
        edate = [fetchedObjects objectAtIndex:i];

    }

    NSLog(@"%@",edate.date); 
   if(onemonth)
    {
    alertview:if one month completed then i have to show a pop up.please upgrade            }
   else
    {
        my code should execute
    }
} 
```

现在，我只想用当前日期计算一个月的日期（我已经存储并且我像字符串一样存储），如果超过一个月，那么我必须显示一个弹出窗口，比如请升级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:33:49.873

使用 DateComponent 通过将 +1 添加到您的日期来查找下个月。

```
NSDate *yourDate=...;
NSCalendar *calendar=[[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar];
NSDateComponents *components=[[NSDateComponents alloc]init];
components.month=1;
NSDate *nextMonthDay=[calendar dateByAddingComponents:components toDate:yourDate options:0]; 
```

每次您的应用程序启动时，请阅读您的用户默认值列表并检查下个月天，如果它相等，则让您的应用程序显示它已过期的警报并关闭应用程序/或禁用所有功能。

编辑：

```
//I am setting it as today's date, assumed tha app installed today
NSDate *installedDate=[NSDate dateWithNaturalLanguageString:@"16/Dec/2012"]; //this method wont work on ios, convert using formatter.

//now finding and setting expiry date
NSCalendar *calendar=[[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar];
NSDateComponents *components=[NSDateComponents new];
components.month=1;
NSDate *expiryDate=[calendar dateByAddingComponents:components toDate:installedDate options:0];

NSLog(@"Ins : %@, Exp : %@", installedDate, expiryDate);

if ([[NSDate date] isGreaterThanOrEqualTo:expiryDate]) {
    NSLog(@"*** Expired ***");
}
else{
    NSLog(@"*** This is trial version ***");
} 
```

# wpf - 删除 ListView 列中的分隔符 - WPF

> ID：14333486
> 
> 赞同：2
> 
> 时间：2013-01-15T08:09:05.927
> 
> 标签：wpf, listview

我创建了下一个 ListView

```
 <ListView Height="Auto" MaxHeight="300" Margin="5,5,5,0" BorderBrush="Transparent"
                        ItemsSource="{Binding SelectedFolders}" BorderThickness="0" >      
                    <ListView.View>
                             <GridView>
                <GridViewColumn Header="Folder Name" Width="600">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                                 <TextBlock Text="{Binding FolderName}" FontSize="16" Foreground="Black" Margin="2,2" HorizontalAlignment="Left">
                                    <TextBlock.ToolTip>
                                        <TextBlock Text="{Binding FolderFullPath}"/>                        
                                    </TextBlock.ToolTip>                        
                                </TextBlock>                        
                        </DataTemplate>             
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>           

                <GridViewColumn Header="Size" Width="70">
                      <GridViewColumn.CellTemplate>
                        <DataTemplate>
                                 <TextBlock Text="{Binding FolderSize}" FontSize="16" Foreground="Black" Margin="2,2"  HorizontalAlignment="Left">
                                    <TextBlock.ToolTip>
                                        <TextBlock Text="{Binding FolderFullPath}"/>                        
                                    </TextBlock.ToolTip>                        
                                </TextBlock>                        
                        </DataTemplate>             
                    </GridViewColumn.CellTemplate>            
                </GridViewColumn>
            </GridView>                   
            </ListView.View>   
  </ListView> 
```

我试图删除列分隔符但没有成功。这是它现在的样子：

![列表显示](../Images/7fa2e53652dcd0371960d091218f8c2e.png)

在图片中，您可以看到大小列线，如何删除它们？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T08:41:07.020

只需创建自己的风格`GridViewColumnHeader`...

这是一个除了 TextBlock 之外没有任何东西的简单示例（当然，没有垂直线）：

```
<Window.Resources>
    <Style x:Key="GridHeader" TargetType="{x:Type GridViewColumnHeader}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type GridViewColumnHeader}">
                    <TextBlock Text="{TemplateBinding Content}" Padding="5" Width="{TemplateBinding Width}" TextAlignment="Right" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</Window.Resources> 
```

用法：

```
<ListView Height="Auto" MaxHeight="300" Margin="5,5,5,0" BorderBrush="Transparent"
          ItemsSource="{Binding ReferenceCollection}" BorderThickness="0">
        <ListView.View>
            <GridView ColumnHeaderContainerStyle="{StaticResource GridHeader}">
               .... 
```

有关详细信息，请参阅[GridView 列标题样式和模板概述](http://msdn.microsoft.com/en-us/library/ms748988.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:54:02.883

打开表达式混合并编辑`GridViewColumnHeader`样式。我为你做了。

```
<LinearGradientBrush x:Key="GridViewColumnHeaderBackground" EndPoint="0,1" StartPoint="0,0">
        <GradientStop Color="#FFFFFFFF" Offset="0"/>
        <GradientStop Color="#FFFFFFFF" Offset="0.4091"/>
        <GradientStop Color="#FFF7F8F9" Offset="1"/>
    </LinearGradientBrush>
    <LinearGradientBrush x:Key="GridViewColumnHeaderBorderBackground" EndPoint="0,1" StartPoint="0,0">
        <GradientStop Color="#FFF2F2F2" Offset="0"/>
        <GradientStop Color="#FFD5D5D5" Offset="1"/>
    </LinearGradientBrush>
    <LinearGradientBrush x:Key="GridViewColumnHeaderHoverBackground" EndPoint="0,1" StartPoint="0,0">
        <GradientStop Color="#FFBDEDFF" Offset="0"/>
        <GradientStop Color="#FFB7E7FB" Offset="1"/>
    </LinearGradientBrush>
    <LinearGradientBrush x:Key="GridViewColumnHeaderPressBackground" EndPoint="0,1" StartPoint="0,0">
        <GradientStop Color="#FF8DD6F7" Offset="0"/>
        <GradientStop Color="#FF8AD1F5" Offset="1"/>
    </LinearGradientBrush>

    <Style TargetType="{x:Type GridViewColumnHeader}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type GridViewColumnHeader}">
                    <Grid SnapsToDevicePixels="true">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates"/>
                            <VisualStateGroup x:Name="FocusStates"/>
                            <VisualStateGroup x:Name="ValidationStates"/>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="HeaderBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0,1,0,1" Background="{TemplateBinding Background}">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition MaxHeight="7"/>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>
                                <Rectangle x:Name="UpperHighlight" Fill="#FFE3F7FF" Visibility="Collapsed"/>
                                <Border Padding="{TemplateBinding Padding}" Grid.RowSpan="2">
                                    <ContentPresenter x:Name="HeaderContent" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="0,0,0,1" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                </Border>
                            </Grid>
                        </Border>
                        <Border x:Name="HeaderHoverBorder" BorderThickness="1,0,1,1" Margin="1,1,0,0"/>
                        <Border x:Name="HeaderPressBorder" BorderThickness="1,1,1,0" Margin="1,0,0,1"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="true">
                            <Setter Property="Background" TargetName="HeaderBorder" Value="{StaticResource GridViewColumnHeaderHoverBackground}"/>
                            <Setter Property="BorderBrush" TargetName="HeaderHoverBorder" Value="#FF88CBEB"/>
                            <Setter Property="Visibility" TargetName="UpperHighlight" Value="Visible"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="true">
                            <Setter Property="Background" TargetName="HeaderBorder" Value="{StaticResource GridViewColumnHeaderPressBackground}"/>
                            <Setter Property="BorderBrush" TargetName="HeaderHoverBorder" Value="#FF95DAF9"/>
                            <Setter Property="BorderBrush" TargetName="HeaderPressBorder" Value="#FF7A9EB1"/>
                            <Setter Property="Visibility" TargetName="UpperHighlight" Value="Visible"/>
                            <Setter Property="Fill" TargetName="UpperHighlight" Value="#FFBCE4F9"/>
                            <Setter Property="Margin" TargetName="HeaderContent" Value="1,1,0,0"/>
                        </Trigger>
                        <Trigger Property="Height" Value="Auto">
                            <Setter Property="MinHeight" Value="20"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="Role" Value="Floating">
                <Setter Property="Opacity" Value="0.4082"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type GridViewColumnHeader}">
                            <Canvas x:Name="PART_FloatingHeaderCanvas">
                                <Rectangle Fill="#FF000000" Height="{TemplateBinding ActualHeight}" Opacity="0.4697" Width="{TemplateBinding ActualWidth}"/>
                            </Canvas>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
            <Trigger Property="Role" Value="Padding">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type GridViewColumnHeader}">
                            <Border x:Name="HeaderBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0,1,0,1" Background="{TemplateBinding Background}"/>
                            <ControlTemplate.Triggers>
                                <Trigger Property="Height" Value="Auto">
                                    <Setter Property="MinHeight" Value="20"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

如果需要，您可以以相同的方式修改它。

# mysql - 美元和第纳尔的价格栏

> ID：14333488
> 
> 赞同：0
> 
> 时间：2013-01-15T08:09:14.527
> 
> 标签：mysql, floating-point, currency

我有一个价格列，其中可能包括以美元为单位的 100.00 或以伊拉克第纳尔为单位的 100.000。我不能使用小数（10,3）或小数（10,2），因为它不固定请，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:17:33.607

两个问题：是“一百美元零美分”和“一百第纳尔零千分之一”吗？

假设这是正确的（即美元小数点后需要 2 个空格，第纳尔需要 3 个空格），您是否考虑过将所有内容存储为整数并仅在显示时提供美分/千分之一的转换？

通常货币（即使是小数值）存储为整数，因为浮点值容易出现舍入错误。例如，另请参阅[此答案，或者](https://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency?rq=1)[在 Stackoverflow 上查找“代表货币”](https://stackoverflow.com/search?q=represent%20currency)。

# node.js - 使用 express、node.js 构建的 restful api 的单元测试日志记录（使用 mocha、supertest 和 chai）

> ID：14333491
> 
> 赞同：2
> 
> 时间：2013-01-15T08:09:26.087
> 
> 标签：node.js, mocha.js, supertest

我用 mocha、chai 和 supertest 编写了一个简单的单元测试。

```
describe('controller.CWEManagementAPI', function () {
it('should be able to say hello', function() { 
    var request = require('supertest')
    , express = require('express');

    var app = express();

    app.get('/user', function(req, res){
        res.send(201, { name: 'tobi' });
    });

    request(app)
    .get('/user')
    .set('Accept', 'application/json')
    .expect(200)
    .end(function(err, res){
        if (err) return done(err);
        console.log('test');
        assert.equal( res.body.name, 'tobi');
        done()
    });
});
}); 
```

但问题是：`console.log('test')`没有执行。所以我认为`assert.equal( res.body.name, 'tobi');`也没有执行。所以我在没有单元测试的情况下编写代码，比如：

```
var request = require('supertest')
, express = require('express');

var app = express();

app.get('/user', function(req, res){
res.send(201, { name: 'tobi' });
});

request(app)
   .get('/user')
   .expect('Content-Type', /json/)
   .expect('Content-Length', '20')
   .expect(201)
   .end(function(err, res){ 
    if (err) throw err;
    console.log(res.body.name);
    console.log('done');
    process.exit();
   }); 
```

并且`console.log()` 都被执行了。所以我不知道为什么第一个代码不能显示日志信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T09:05:59.513

您尝试运行的是使用 mocha 进行的异步测试。因此，测试用例应该收到一个回调参数，以便在其操作完成后调用。

您在最后调用 done() 但尚未将其作为参数接收。

**改变**

```
it('should be able to say hello', function() {
} 
```

**至**

```
it('should be able to say hello', function(done) {
} 
```

# mysql - Cucumber：表格不相同（Cucumber::Ast::Table::Different）

> ID：14333498
> 
> 赞同：0
> 
> 时间：2013-01-15T08:10:04.247
> 
> 标签：mysql, ruby-on-rails, rspec, cucumber, capybara

我正在使用**黄瓜**来测试场景。我收到错误消息：

> > 表不相同（Cucumber::Ast::Table::Different）

`diff!`在我的代码中使用时。

```
Then /^the results should be:$/ do |expected_results|
results = [['content']] + page.all('ol.results li').map do |li|
[li.text]
end 
expected_results.diff!(results)
end 
```

我还参考了大多数与这些问题相关的网站，因为使用`transpose`之前的`diff!`方法我没有成功。另外，我关注了[https://github.com/cucumber/cucumber/issues/220](https://github.com/cucumber/cucumber/issues/220)，但对这个错误没有影响。谁能定义我如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T21:56:49.280

我不确定您是否已经这样做了，但看起来您正在使用进度格式化程序，它没有提供有关表差异错误的任何有用的详细信息。

如果您使用带有`--format pretty`标志的漂亮格式化程序，黄瓜应该打印出表差异的完整详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T15:10:02.473

这可能是由乱序行引起的（根据[The Cucumber 文档](http://cukes.info/api/cucumber/ruby/yardoc/Cucumber/Ast/Table.html#diff!-instance_method)，乱序列被优雅地处理，但乱序行显然不是）。

就我而言，我通过在我的 SQL 语句中使用显式 ORDER BY 并重新排序预期表中的行来完成这项工作。

# android - Phonegap navigator.geolocation.getCurrentPosition 中的错误

> ID：14333505
> 
> 赞同：3
> 
> 时间：2013-01-15T08:11:02.180
> 
> 标签：android, cordova

当我尝试在我的 HTML 页面中获取我的地理位置时，我收到以下错误：错误代码：2 错误消息：最后一个位置提供程序不再可用这里是我的代码：

```
// onSuccess Callback
//  This method accepts a `Position` object, which contains
//  the current GPS coordinates
//
var onSuccess = function(position) {
   };

var HospitalsRecord = [];

//onError Callback receives a PositionError object
//
function onError(error) {
   alert('code: '    + error.code    + '\n' +
         'message: ' + error.message + '\n');
}

// Cordova is ready
//
function onDeviceReady() {
    navigator.geolocation.getCurrentPosition(onSuccess, onError, { maximumAge: Infinity, timeout: 15000, enableHighAccuracy: true });

}

// Wait for Cordova to load
//
document.addEventListener("deviceready", onDeviceReady, false);

</script> 
```

为什么会这样？

提前致谢

科比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-23T13:09:14.240

尝试将其添加到位于应用程序根目录中的 config.xml：

```
<gap:plugin name="org.apache.cordova.geolocation" /> 
```

这可以添加到小部件标签中的任何位置。它对我有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T08:49:50.590

试试这样。。

```
<script type="text/javascript">

        // Wait for Cordova to load 

        document.addEventListener("deviceready", onDeviceReady, false);

        // Cordova is ready      

        function onDeviceReady() {

            navigator.geolocation.getCurrentPosition(onSuccess, onError);

        }

        // onSuccess Geolocation      

        function onSuccess(position) {

            var element = document.getElementById('geolocation');

            element.innerHTML = 'Latitude: ' + position.coords.latitude + '<br />' +

                            'Longitude: ' + position.coords.longitude + '<br />' +

                            'Altitude: ' + position.coords.altitude + '<br />' +

                            'Accuracy: ' + position.coords.accuracy + '<br />' +

                            'Altitude Accuracy: ' + position.coords.altitudeAccuracy + '<br />' +

                            'Heading: ' + position.coords.heading + '<br />' +

                            'Speed: ' + position.coords.speed + '<br />' +

                            'Timestamp: ' + position.timestamp + '<br />';

        }

        // onError Callback receives a PositionError object     

        function onError(error) {

            alert('code: ' + error.code + '\n' +

              'message: ' + error.message + '\n');

        }

    </script> 
```

了解更多信息..

[尝试这个](http://www.c-sharpcorner.com/UploadFile/c25b6d/geolocation-in-phonegap/)

# mql4 - MQL4 - ArrayCopy - 将一维数组复制到多维数组元素

> ID：14333506
> 
> 赞同：1
> 
> 时间：2013-01-15T08:11:04.433
> 
> 标签：mql4, metatrader4, mt4

我想复制一个 array `"a"`，它是一个双精度数组，到`"as"`，它是一个双精度数组的数组。不知道为什么，但我不能，我得到编译时错误或执行时错误。

我的代码是：

```
double a [10];
double as [][10]; 
```

...我填充`"a"`并`"as"`使用元素...

现在我想复制`"a"`到`"as"`#2 的位置。

我尝试了几种可能的方法，例如：

```
ArrayCopy(a[2],a); 
```

但我仍然无法得到它。任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:13:09.303

由于我还没有找到任何其他解决方案，所以我终于编写了自己的函数，使用嵌套的 FOR，所以我将一维数组的值插入到二维数组的适当位置。

那对我来说是最好的解决方案。

# ruby-on-rails - Vim 红宝石自动完成

> ID：14333508
> 
> 赞同：2
> 
> 时间：2013-01-15T08:11:32.610
> 
> 标签：ruby-on-rails, ruby, vim, autocomplete, omnicomplete

我放弃。这个

```
 51   if !exists('g:neocomplcache_omni_patterns')
 52        let g:neocomplcache_omni_patterns = {}
 53   endif
 54
 55   if !exists('g:neocomplcache_omni_functions')
 56        let g:neocomplcache_omni_functions = {}
 57   endif
 58   let g:neocomplcache_omni_patterns['ruby'] = '[^. \t]\.\w*'
 59   let g:neocomplcache_omni_functions['ruby'] = 'rubycomplete#Complete'
 60   autocmd FileType ruby set omnifunc=rubycomplete#Complete 
```

是我的 .gvimrc 文件的一部分。

问题是我无法为 ruby​​ 设置全向自动完成功能。如果我输入 Cx Cy 它可以工作，但在我编写代码时却不行。它适用于 php、html、css 等

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T14:37:17.050

虽然我不使用 neocomplcache 我对[vim-ruby](https://github.com/vim-ruby/vim-ruby)相当满意，包括代码完成。只需使用 ruby​​ 支持编译 Vim，添加到 .vimrc

```
autocmd FileType ruby,eruby let g:rubycomplete_buffer_loading = 1 
autocmd FileType ruby,eruby let g:rubycomplete_classes_in_global = 1
autocmd FileType ruby,eruby let g:rubycomplete_rails = 1 
```

由于 Ruby 的高度动态特性，代码完成总是会受到一定程度的限制，但以上确实有助于完成标准类和方法，甚至是您自己的大部分。

# ios - 将自定义 UIView 放在 UINavigationBar 的底部

> ID：14333518
> 
> 赞同：2
> 
> 时间：2013-01-15T08:12:28.427
> 
> 标签：ios, uiview, uinavigationbar

我想写一个列出费用的表格视图。在表格视图的顶部，我想要一个导航栏，以显示一个小栏，直观地展示已经花费了多少预算（见图）。该导航栏的下部将是一个自定义的`UIView`.

如何修改`UINavigationBar`以包含此自定义视图？这甚至是正确的做法吗？我应该将该图像的顶部编写为`UIView`带有按钮的自定义完整部分，还是会因为我正在重新实现标准视图而被拒绝？

![在此处输入图像描述](../Images/b63e2c4cb5843a6f4844d6220337c311.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:22:11.097

如果您构建自己的自定义视图，您将不会被拒绝。

您可以设置 UINavigationItem 的 titleView 属性，如此处的文档中所示 [http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationItem_Class/Reference/UINavigationItem.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationItem_Class/Reference/UINavigationItem.html) 就个人而言，我会将其构建为自定义视图并重新创建您自己的后退按钮功能。

# android - 使用 xml 为 android 应用程序创建按钮

> ID：14333522
> 
> 赞同：-3
> 
> 时间：2013-01-15T08:12:38.670
> 
> 标签：android, xml

下面的代码段有什么问题？我有一个错误。但是我还没有解决它，因为我不明白。

```
<Button
    android:id="@+id/buttonStart"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="34dp"
    android:text="@string/stop" />

<Button
    android:id="@+id/buttonStop"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/buttonStart"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="14dp"
    android:text="@string/start" /> 
```

错误 ：

未找到与给定名称匹配的源（在“文本”处，值为“@string/start”）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T08:20:27.157

在**res/values/strings.xml**添加

```
<string name="start"> start </string>
<string name="stop"> stop </string> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T08:22:20.333

将此添加到您的 res/values/strings.xml 。

```
<resources>

    <string name="app_name">EXAMPLE</string>
    <string name="hello_world">Hello world!</string>

    <!-- START : MAIN XML STRINGS VALUES -->

    <string name="start">START</string>
    <string name="stop">STOP</string>

</resources> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T08:18:56.130

缺少字符串。
将缺失的字符串添加到您的 res/values/strings.xml。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T10:46:00.733

您必须在 res/values/string.xml 中添加以下代码

```
 <string name="start">Start</string>
 <string name="stop">Stop</string> 
```

# r - `*tmp*`[[k]] 中的错误：R 中的下标超出范围

> ID：14333525
> 
> 赞同：7
> 
> 时间：2013-01-15T08:12:54.150
> 
> 标签：r, subscript

我想问为什么在初始化例如向量或其他类型的列表时出现此错误，我该如何解决？

```
> l <- list()
> l[[1]][1] <- 1
Error in `*tmp*`[[1]] : subscript out of bounds 
```

这是我需要的全部代码，实际上我想要一个这样的向量列表：

```
mcorrelation <- list()
for(k in 1:7){
    for (ind in 1:7){
        mcorrelation[[k]][ind] <- co$estimate
    }
} 
```

我应该提前初始化整个列表还是有其他方法可以避免出现此错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T08:16:23.917

由于`l`还没有向量，因此您不想在列表的第一个元素中指定位置。尝试：

```
l <- list()
l[[1]] <- 1 
```

为了在这个新向量中的特定位置添加附加值，最好使用要归档的值的已知长度设置向量（出于速度原因；请参阅[此处](http://menugget.blogspot.de/2011/11/another-aspect-of-speeding-up-loops-in.html)的原因）。这是一个示例循环：

```
n <- 100
l <- list()
l[[1]] <- NaN*seq(n)
for(i in seq(n)){
    l[[1]][i] <- i
} 
```

关于你的具体例子：

```
k <- 7
ind <- 7
mcorrelation <- vector(mode="list", k)
for(i in seq(k)){
    mcorrelation[[i]] <- NaN*seq(ind)
    for (j in seq(ind)){
        mcorrelation[[i]][j] <- rnorm(1)
    }
}
mcorrelation 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T09:14:53.570

"[" 函数允许在没有循环的情况下进行多次赋值：

```
> y <- NULL
> y
NULL
> y[cbind(1:2, 1:2)] <- list( list(1,2), list(2,3))
> y
[[1]]
[[1]][[1]]
[1] 1

[[1]][[2]]
[1] 2

[[2]]
[[2]][[1]]
[1] 2

[[2]][[2]]
[1] 3 
```

# spring - 动态合并多个应用程序上下文文件

> ID：14333533
> 
> 赞同：2
> 
> 时间：2013-01-15T08:13:52.853
> 
> 标签：spring, xslt, maven, xml-parsing, maven-3

我正在构建一个使用 Maven 并由一个主系统和许多模块*战争*组成的 Web 应用程序，每个都是一个基于*Spring-3*的项目，具有他自己的**ApplicationContext.xml 文件**。系统和模块是*战争*文件，我使用 Maven 使用布局合并它们。

一开始**只加载系统*应用程序上下文*文件**，系统自己加载每个模块的*应用程序上下文*，该应用程序上下文存储在`WEB-INF/classes/application_context`不同名称的文件夹中。

这是系统的加载方式：

```
ServletContext context = SessionUtils.getServletContext();
ApplicationContext appContext = WebApplicationContextUtils
            .getRequiredWebApplicationContext(context); 
```

这就是系统如何执行加载其余*应用程序上下文*的工作：

```
String filename = "/WEB-INF/classes/application_context";
ServletContext servContext = SessionUtils.getServletContext();
String pathname = servContext.getRealPath(filename);
File dir = new File(pathname);
List<String> contexts = new ArrayList<String>();
for (File child : dir.listFiles()) {
    contexts.add("/application_context/" + child.getName());
}
ApplicationContext context = new ClassPathXmlApplicationContext(
    contexts.toArray(new String[contexts.size()])); 
```

我的问题是，有没有办法一次加载每个 Spring Context？正如我所见，有机会进行[Spring import](http://forum.springsource.org/showthread.php?66611-Import-Spring-Config-files)，但最初系统的*应用程序上下文*对模块的内容一无所知。Maven 也可用于[将每个应用程序上下文合并到一个唯一的一个](http://mojo.codehaus.org/xml-maven-plugin/)中，但我不知道在这种情况下如何使用它，我应该编写一个 xslt 文件吗？我想要一些直接的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:20:29.797

指定上下文路径时可以使用通配符。例如：

```
ApplicationContext context = new ClassPathXmlApplicationContext("classpath:conf/*-Context.xml"); 
```

查看部分：[5.7.2 应用程序上下文构造函数资源路径中的通配符](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch05s07.html)。

您还可以在主上下文中使用通配符，因此当加载服务器上下文时，该通配符中包含的所有内容也将被加载。这就是服务器启动时如何实现满载的方式。

`<import resource="classpath:application_context/ApplicationContext*.xml" />`

# windows-phone-7 - 提交后更改市场上的 WP7 应用程序图标

> ID：14333536
> 
> 赞同：1
> 
> 时间：2013-01-15T08:13:56.827
> 
> 标签：windows-phone-7, marketplace

上次我更新应用程序时，没有选择更改将在市场上向用户显示的图标。

我应该删除以前的提交并创建一个新的来做到这一点吗？还是有更简单的方法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:36:48.160

只需提交更新。您可以随时在内容部分更改图标，只需上传一个新的 300x300px 图标即可。

# objective-c - 基于剩余时间、用户等级、难度的游戏评分算法？

> ID：14333542
> 
> 赞同：1
> 
> 时间：2013-01-15T08:14:18.680
> 
> 标签：objective-c, algorithm, math, game-center, game-development

我只是想知道是否有人有任何基于剩余时间、用户级别和难度的好的游戏得分算法。

目前我正在使用一个非常简单的代码行：

```
 (100*rTime)*level*difficulty 
```

问题在于点的范围差异太大。例如，在难度范围为 b/w 1-3 且最长 30 秒的级别 1 中，用户将获得 100 到 9000 分。

此外，对于更高级别，返回的点数太高了。我希望每个级别的得分都更高，但是对于当前的方程式，结果太高了。例如，在难度为 3 且最长时间为 30 秒的 10 级时，用户将获得 3,000 到 90,000 分。再一次，点差太大了，90,000点太高了。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:24:21.057

因子小于 2。“简单”的难度因子为 1，“中等”的难度因子为 1.05（多出 5% 的分数）。

您还可以使用时间的对数函数，这使得它随着值的增加而增长得更慢。

# android - RadioGroup ：水平布局和跨越多行

> ID：14333544
> 
> 赞同：3
> 
> 时间：2013-01-15T08:14:43.483
> 
> 标签：android, radio-group

安卓 2.3.3

我在 5`RadioButton`秒左右`RadioGroup`。我不希望方向是垂直的，因为它占用了大部分可用空间。如果我将方向保持为水平，则只有 2 或 3 个可见，其余的将消失，因为屏幕的尺寸不适合它们全部水平。

我可以将这些单选按钮跨越 1 行以上，水平布局。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T08:20:20.303

您可以通过将您的包装`RadioGroup`在一个 中来实现这一点，`HorizontalScrollView`当用户向右滚动时，将出现下一个单选按钮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-24T08:07:30.403

一个简单的方法是使用这个库：
[https ://github.com/linfaxin/MultiRowsRadioGroup](https://github.com/linfaxin/MultiRowsRadioGroup)

像这样定义您的 XML：

```
 <com.linfaxin.multirowsradiogroup.MultiRowsRadioGroup
    android:id="@+id/radioGroup1"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
    <TextView
        android:id="@android:id/title"
        android:text="radioGroup1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical">
        <RadioButton
            android:text="text2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
        <RadioButton
            android:text="text3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>
    <RadioButton
        android:text="text4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
</com.linfaxin.multirowsradiogroup.MultiRowsRadioGroup> 
```

# jquery - 如何在单击添加类时翻转元素？

> ID：14333549
> 
> 赞同：2
> 
> 时间：2013-01-15T08:15:01.440
> 
> 标签：jquery, css, animation

有人可以帮我制作翻转 div 的动画吗？更确切地说，我想在单击时添加一个类，使用 jquery 为一个方向的翻转设置动画，然后在下一次单击时删除旧类，并为新的背景图像和新的翻转方向创建一个新类。

```
<style>
div{height:150px; width:150px; border:1px solid black; border-radius:10px;
    background-size:100% 100%;}
.face{background-image:url(http://media.businesslive.ro/wp-content/uploads/creative-monkeyz.png);}
.back{background-image:(http://media-cache-ec0.pinterest.com/avatars/artalacafea-1347781782_600.jpg)}
</style>
<div class="face"><div> 
```

我的初始代码示例在[这里](http://jsfiddle.net/7AgbX/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:58:41.410

假设这是你想要的..

使用[toogleClass()](http://api.jquery.com/toggleClass/)来切换类（'front' 和 'back'）on`click()`函数..

这是[小提琴](http://jsfiddle.net/7AgbX/2/)

```
$(".face").click(function(){
  $(this).toggleClass('back');
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T08:31:32.583

使用 css3 你可以很容易地做到这一点这是一个例子。[http://css3.bradshawenterprises.com/flip/](http://css3.bradshawenterprises.com/flip/)

# javafx - JavaFX 在 Stage 之间传递和获取参数

> ID：14333550
> 
> 赞同：0
> 
> 时间：2013-01-15T08:15:04.590
> 
> 标签：javafx, javafx-2, parameter-passing

我有两个阶段

Stage1 与 Scene1 和自己的 Controller1
和
Stage2 与另一个 Scene2 和 Controller2

从 Stage1 我用 ShowAndWait 调用 Stage2。
并为隐藏阶段设置 Stage2 侦听器。

从 Stage2.Controller2 调用隐藏和断点

```
setOnHiding(new EventHandler<WindowEvent>() {
            @Override
            public void handle(WindowEvent t) {
                System.out.print(t.getSource());
            }
        }); 
```

在以下情况下，我如何在这些阶段之间传递参数：
1\. stage1 传递到 stage2
2\. stage2 导致一些数据参数到 stage1

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:13:29.187

这是我的解决方案：我有 2 个类 MyStage 和 MyController Stage1，Stage2 应该扩展 MyStage Controller1，Controller2 应该扩展 MyController

```
Stage2 s2 = new MyStage(data);
s2.show();
result = s2.getResult();

class Stage2 extends Stage{
    private FXMLLoader fxmlLoader;
    private Object data;
    private Object result;

    public Stage(Object data){
        this.data = data;
        ...//do something with data
        getController().initWithData(data);
    }

    Object getResult(){
        return getController().getResult();
    }

    public MyController getController() {
        return (MyController) fxmlLoader.getController();
    }
}

Class MyController{
    public void initWithData(Object data){
    ...//
    }

    public Object getResult(){
    ...//
    return result;
    }

    public void setStage(Stage stage) {
            this.stage = stage;
}

    @FXML
    protected void close() {
            getStage().close();
    }

} 
```

这是通用的，但在使用 fxml 与非 fxml 时，代码会有一些细微的变化。您可以将阶段引用传递给控制器​​以从另一个控制器关闭阶段。我现在太困了，希望没有错误。我稍后会更新

# java - java.net.SocketInputStream.socketRead0（本机方法）

> ID：14333552
> 
> 赞同：1
> 
> 时间：2013-01-15T08:15:07.123
> 
> 标签：java, httpwebrequest, serversocket

```
HttpURLConnection uc = null ;
URLPath = "";
URL url = new URL(URLPath);
uc = (HttpURLConnection) url.openConnection();
uc.setReadTimeout(10000);
uc.connect();
FileOutputStream fos = new FileOutputStream(savePath);
InputStream in = uc.getInputStream();
byte[] buffer = new byte[1024];
int Length = 0;
long FinishedLenth = 0;

while((Length = in.read(buffer)) > 0) {
    FinishedLenth = FinishedLenth + Length;
    fos.write(buffer, 0, Length);
}
uc.disconnect();
in.close();
fos.close(); 
```

这是我的功能代码，如果网络断开，
代码将出现异常。
我将重试函数写入异常。
userValue = 0，表示重试，1 表示取消。

```
int userValue = gm.GetIt("Error");
if(userValue == 0){
 gp.interrupt();
 uc.disconnect();
 downloadFile(local,nas,ip,id,pw,fileId,index);
}
else{
 conf.downloadState.get(index).setpercent("fail");
 return false;
} 
```

你好，我有麻烦。
我写代码，功能是下载。
如果网络断开，用户可以选择重试或取消。
但我收到错误消息。

```
java.net.SocketTimeoutException: Read timed out  
    at java.net.SocketInputStream.socketRead0(Native Method)  
    at java.net.SocketInputStream.read(Unknown Source)  
    at java.io.BufferedInputStream.fill(Unknown Source)  
    at java.io.BufferedInputStream.read1(Unknown Source)  
    at java.io.BufferedInputStream.read(Unknown Source)  
    at sun.net.www.MeteredStream.read(Unknown Source)  
    at java.io.FilterInputStream.read(Unknown Source)  
    at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(Unknown Source)  
    at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(Unknown Source)  
    at Download_File.downloadFile(Download_File.java:54)  
    at downloadFileFunctionThread.run(downloadFileFunctionThread.java:113) 
```

第 54 行是 while(......)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:21:12.967

尝试设置[Connectiontimeout](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLConnection.html#setConnectTimeout%28int%29)并`HttpURLConnection`尝试重新设计您的 while 循环，例如：

```
//...
boolean connected = false;
boolean retry = false;

while(!connected & retry) {
    retry = askUserIfHeWantsToRetry();
    connected = uc.connected();
    URL url = new URL(URLPath);
    uc = (HttpURLConnection) url.openConnection();
    uc.setReadTimeout(10000);
    uc.connect();
}
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:32:20.320

检查你的java参数

它也可以设置如下

-Dsun.net.client.defaultConnectTimeout=12345 -Dsun.net.client.defaultReadTimeout=67890

# python - Python 装饰器也用于未定义的属性

> ID：14333553
> 
> 赞同：0
> 
> 时间：2013-01-15T08:15:21.477
> 
> 标签：python, properties, model, couchdb, decorator

我想为用户创建一个模型类。用户的数据存储在基于文档的数据库中，如 couchdb 或 mongodb。User 类应该有一个装饰器，并且 db 中的字段可以通过不存在的类属性访问。例如

```
@DocumentDB()
class User(object):
    def doSomething(self):
        pass
    def doSomethingElse(self):
        pass

u = User('thisIsAUniqUserId')
print u.emailAddress
print u.lastName 
```

我玩过 python 装饰器。操作现有函数并不是一件大事，但我如何才能捕捉到对不存在的 getter/setter 的调用，以通过对象实例创建对 db 值的透明访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:34:22.197

您需要实现该`__getattr__(self, name)` [方法](http://docs.python.org/2/reference/datamodel.html#object.__getattr__)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:25:21.543

对对象属性的访问由[getattr/setattr/delattr/getattribute 机制控制](http://docs.python.org/2/reference/datamodel.html#customizing-attribute-access)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T09:00:03.180

Django 使用[元类来动态创建模型](https://code.djangoproject.com/wiki/DynamicModels)。虽然您的要求略有不同，但相同的技术将起作用（可能比装饰器更好）。

您可以[在 Stackoverflow 上阅读有关 Python 元类的更多信息](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T09:16:49.793

我想我根据您的建议找到了解决方案：

```
def DocumentDB(object):
    class TransparentAttribute:
        def __init__(self, *args, **kargs):                 
            self.wrapped = object(*args, **kargs)
        def __getattr__(self, attrname):
            return "Any Value"
    return TransparentAttribute

@DocumentDB
class User(object):
    def doSomething(self):
        pass
    def doSomethingElse(self):
        pass

u = User()
print u.emailAddress
print u.lastName 
```

它有效，但它是最pythoniastic的方式吗？

# android - 自定义图表引擎饼图

> ID：14333556
> 
> 赞同：1
> 
> 时间：2013-01-15T08:15:41.470
> 
> 标签：android, achartengine

我正在使用来自 Achart 引擎库的饼图：

现在我需要一些关于定制的帮助。这是我绘制的饼图 -

![在此处输入图像描述](../Images/3d8dead6e24d68ad63679a3278a28b39.png)

这些是我想要定制的东西：

1.  将圆形动画应用于饼图。
2.  在图表周围添加细圆形边框。
3.  如您所见，标签颜色 1、颜色 2 在左侧，但我需要将其放在中心或对其应用一些填充。
4.  顶部和底部有一个巨大的空间减少了空间。
5.  现在背景颜色是白色的，我需要其他颜色。

如何进行这些更改，我已尝试在 google 中搜索这些更改，并在屏幕截图中进行了可能的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:10:11.360

我只回答第一个问题：

```
renderer.setDisplayValues(true); 
```

[确保您从此处](https://repository-achartengine.forge.cloudbees.com/snapshot/)或[此处](http://www.achartengine.org/download/)获得了 AChartEngine 的最新版本。

对于第五个问题，这样做：

```
renderer.setApplyBackgroundColor(true);
renderer.setBackgroundColor(color); 
```

# windows-phone-7.1 - 当使用 MediaLibrary.Pictures 获取图片时，宽度和高度是相反的

> ID：14333562
> 
> 赞同：0
> 
> 时间：2013-01-15T08:16:09.940
> 
> 标签：windows-phone-7.1, image, media-library

我写了一些 Windows Phone 7 应用程序。我打算用手机访问照片。我用手机拍照，照片尺寸为 1944x2592（宽 x 高）。然后我用

```
MediaLibrary mediaLibrary = new MediaLibrary();
for (int x = 0; x < mediaLibrary.Pictures.Count; ++x)
{
    Picture pic = mediaLibrary.Pictures[x];
    int w = pic.width;
    int h = pic.height;
    ... 
```

但是我发现w是2592，h是1944。Width和Height的值是颠倒的！谁能告诉我这是怎么回事？有什么问题？我期待着您的回复！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:21:04.033

相机会检测手机的方向并将其存储为元数据。因此，高度和宽度将始终相同，并且在 Zune、Picture Viewer 或大多数其他程序中显示时的方向将从元数据中读取。

[这是一个](http://timheuer.com/blog/archive/2010/09/23/working-with-pictures-in-camera-tasks-in-windows-phone-7-orientation-rotation.aspx)解释它并提供 C# 示例代码的资源。特别重要的部分就在底部。要使用它，您将需要[这个库](http://www.codeproject.com/Articles/47486/Understanding-and-Reading-Exif-Data)（那里也是一个有用的指南）：

```
void OnCameraCaptureCompleted(object sender, PhotoResult e)
{
   // figure out the orientation from EXIF data
   e.ChosenPhoto.Position = 0;
   JpegInfo info = ExifReader.ReadJpeg(e.ChosenPhoto, e.OriginalFileName);

   _width = info.Width;
   _height = info.Height;
   _orientation = info.Orientation;

   PostedUri.Text = info.Orientation.ToString();

   switch (info.Orientation)
   {
       case ExifOrientation.TopLeft:
       case ExifOrientation.Undefined:
           _angle = 0;
           break;
       case ExifOrientation.TopRight:
           _angle = 90;
           break;
       case ExifOrientation.BottomRight:
           _angle = 180;
           break;
       case ExifOrientation.BottomLeft:
           _angle = 270;
           break;
   }

   .....

} 
```

# javascript - 查找链接并使其可点击

> ID：14333568
> 
> 赞同：4
> 
> 时间：2013-01-15T08:17:22.017
> 
> 标签：javascript, jquery, regex

我正在与 socketio 进行聊天。每次发送消息时，我都会使用这个非常简单的 jquery 来显示它：

```
 $('#try').prepend(my_message); 
```

和：

```
 <div id='try'></div> 
```

我想做的是查找发布的消息是否包含链接，如果是，则使其可点击。我需要找到 http:// 和 www。

我发现了几个相关的问题，但没有一个给我我正在寻找的解决方案。

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T08:30:07.460

您应该使用正则表达式将所有 http/https 链接替换为锚标记：

```
function replaceURLWithHTMLLinks(text) {
    var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
    return text.replace(exp,"<a href='$1'>$1</a>"); 
} 
```

有关更多信息，您可以查看[如何用链接替换纯 URL？](https://stackoverflow.com/questions/37684/how-to-replace-plain-urls-with-links)和[编码恐怖：URL 的问题](http://www.codinghorror.com/blog/2008/10/the-problem-with-urls.html)。希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-15T08:27:00.363

对于聊天中插入的每条新消息，请执行以下操作

```
var conversation = "This message contains a link to http://www.google.com "
                 + "and another to www.stackoverflow.com";

conversation = conversation.replace(/(www\..+?)(\s|$)/g, function(text, link) {
   return '<a href="http://'+ link +'">'+ link +'</a>';
})

/**
 *  output :
 *  This message contains a link to <a href="http://www.google.com">http:
 *  //www.google.com</a>and another to <a href="http://stackoverflow.com">   
 *  www.stackoverflow.com</a>
 */ 
```

然后将新消息重新附加到您的聊天中。

# c# - 如果没有找到/计算数据，方法应该返回 nil 还是空数组？

> ID：14333569
> 
> 赞同：0
> 
> 时间：2013-01-15T08:17:22.670
> 
> 标签：c#, java, php, c++, objective-c

这是一个普遍的问题，有趣的是你们使用什么方法，有什么优点和缺点？有时方法会返回列表（例如，`NSMutableArray`或`NSArray`在 obj-c 中），而我目前的方法是如果没有可返回的内容则返回 nil。如果它只是某个本机或自定义类的对象，则返回 nil 是有意义的，但是如果没有找到，我们是否应该返回分配/初始化的空数组？

该问题主要针对`objective-c`但也与其他语言有关。`Objective-c`有很好的功能来调用方法`nil`，但是这不是所有其他语言的情况。因此，听到其他开发者（和开发者）的论点也`java`很`c#`有趣`PHP`。

**更新**奇怪的是为什么有些人投票结束这个问题。与设计模式相关的问题也可以描述为个人意见问题，但是架构和代码质量问题比语法问题更重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:26:39.210

我相信没有一个答案。

对于我自己，我决定尽可能返回预期类型的​​结果，否则返回 NULL。

比如说，在我自制的 DAL 中，该`getAll`方法返回一个空数组（列表）-因此可以将其传递给 PHP 的`foreach`运算符而不会引发错误。
另一方面，`getRow`应该返回关联数组的方法在找不到数据的情况下返回 NULL，因为空数组同样无用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:25:42.517

在我看来，返回 null 和空容器有两种不同的含义。空容器表示`no result matched your query but it was successful`，而空结果表示`something went wrong`。

在第一种情况下，如果您在某处编写了代码要说：

```
 print "You have found" + GetResults.Size() + " results" 
```

您将能够打印与查询匹配的零个结果。如果您决定使用`null`，则必须添加显式检查。

在将结果序列化为 JSON 作为对 Web 服务器请求的响应时，我也遇到了一些麻烦，后来我后悔选择返回 null 而不是空数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:28:09.747

返回 nil 或任何显然不是事物的东西。不要做超过需要做的工作。

返回一个空数组可能会导致分配许多无用的指针和结构，而您真正需要的只是说“我没有给你”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T08:28:27.183

在可可中，

如果您将 a 返回`nil`到某个数组，您需要事后检查，您没有尝试访问数组索引。

并且最好返回`nil`而不是没有任何对象的数组。

# arrays - 如何正确优化 MArray 函数以提高速度？

> ID：14333570
> 
> 赞同：13
> 
> 时间：2013-01-15T08:17:27.347
> 
> 标签：arrays, performance, haskell, ghc, marray

我正在为[MArrays开发一个](http://hackage.haskell.org/packages/archive/array/latest/doc/html/Data-Array-MArray.html)[排序库](https://github.com/ppetr/marray-sort)。速度很重要，所以我想尽可能地优化它。

目前，我只是内[联](http://www.haskell.org/ghc/docs/7.0.4/html/users_guide/pragmas.html)排序功能。与未优化的代码相比，这将代码加速了 10 倍以上。但是，如果在多个地方使用这些函数，这很容易导致代码大小爆炸，并减慢编译速度。

唯一的另一种选择似乎是专门针对所有现有的 MArray 实例的函数。这也扩大了生成的代码，但只是增加了一个常数因子，这与函数的使用次数无关。问题是，是否有可能出现 MArray 的新实例？还是 MArray 如此特殊并且绑定到 Haskell 的内部结构，以便我可以确定其他模块不能定义新实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T13:40:32.913

似乎最好的方法是使用`INLINE`编译指示。[`sort`](http://hackage.haskell.org/packages/archive/vector-algorithms/0.5.4.2/doc/html/Data-Vector-Algorithms-Intro.html#v%3asort)来自[*矢量算法的*](http://hackage.haskell.org/package/vector-algorithms) [也使用它](http://hackage.haskell.org/packages/archive/vector-algorithms/0.5.4.2/doc/html/src/Data-Vector-Algorithms-Intro.html#sort)。

# jquery - 单击图像后在图像内附加一个标签框

> ID：14333576
> 
> 赞同：1
> 
> 时间：2013-01-15T08:17:38.940
> 
> 标签：jquery, image, tagging

我正在尝试为我的网站制作照片标签插件。我还有很长的路要走。我知道还有其他实际插件，但我想在这里创建自己的插件。问题是我试图在单击图像后使一个框出现在图像上，但它没有出现，也没有附加在图像上。

```
<head>
    <style>
    #imageHolder {
        position:relative;
        border:dashed 2px #7E7E7E;
        min-width:300px;
        min-height:300px;
        box-shadow:0 0 5px #000;
        cursor:pointer;
        float:left;
        }
        #tag
        {
          position:absolute;
          top:0;left:0;
          width:250px;
        }
        #box
        {
          border:solid 3px #000;
          width:100px;
          height:100px;
          float:left;
        }
    </style>

    <script style = "text/javascript"> 
      $(document).ready(function(){
        var mouseX = 0;
        var mouseY = 0;
        $("#imageHolder img").click(function(e){
          var imgBox = $(this).parent();
          mouseX = e.pageX - $(imgBox).offset().left;
          mouseY = e.pageY - $(imgBox).offset().top;
          $('#tag').remove();
          $(imgBox).append('<div id = "tag"><div id="box"></div></div>');
          $('#tag').css({top:mouseY,left:mouseX});
        });
    });
    </script> 
    </head>

<body>
<div id = "imageHolder">
<img src = "test.jpg"/>
</div>
</body> 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:19:44.253

有趣且困难但非常简单的解决方案

## [http://jsfiddle.net/e4tr7/5/](http://jsfiddle.net/e4tr7/5/)

```
$("#imageHolder img").click(function (e) {
  var offset = $(this).offset();
  var position = {
    left: e.clientX - offset.left - 50,
    top: e.clientY - offset.top - 50
  }
  var append = $('<div class="tag"><div class="box"></div></div>').draggable({containment: "parent"}).css({"position":"absolute","top":position.top,"left":position.left});
  $(this).parent().append(append);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:42:26.380

您的示例似乎有效，请参阅[JSFiddle](http://jsfiddle.net/CRYXF/1/)。

我将点击功能移到了 div，因为 test.jpg 图像不可用。我还为 div 着色以更清楚地显示它。否则，我将您的其​​余代码保留原样

```
$("#imageHolder").click(function(e){
  var imgBox = $(this); 
```

# maven - 将 maven nexus repo 添加到我的 pom.xml

> ID：14333577
> 
> 赞同：49
> 
> 时间：2013-01-15T08:17:42.747
> 
> 标签：maven

我已经在我的本地机器上安装了 nexus。我希望我的 pom 文件指向这个 repo。如何将我的自定义存储库添加到我的 pom.xml 文件中？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-09-12T08:39:19.150

来自[Maven - 设置参考](http://maven.apache.org/settings.html#servers)

用于下载和部署的存储库由POM的`repositories`和元素定义。`distributionManagement`但是，某些设置（例如用户名和密码）不应与 pom.xml 一起分发。此类信息应存在于构建服务器的 settings.xml 中。

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                  http://maven.apache.org/xsd/settings-1.0.0.xsd">
  ...
  <servers>
    <server>
      <id>server001</id>
      <username>my_login</username>
      <password>my_password</password>
      <privateKey>${user.home}/.ssh/id_dsa</privateKey>
      <passphrase>some_passphrase</passphrase>
      <filePermissions>664</filePermissions>
      <directoryPermissions>775</directoryPermissions>
      <configuration></configuration>
    </server>
  </servers>
  ...
</settings> 
```

**id：**这是与 Maven 尝试连接的存储库/镜像的 id 元素匹配的服务器 ID（不是登录用户的 ID）。

**用户名、密码：**这些元素显示为一对，表示向此服务器进行身份验证所需的登录名和密码。

**privateKey, passphrase：**与前两个元素一样，这对指定私钥的路径（默认为`${user.home}/.ssh/id_dsa`）和密码（如果需要）。密码短语和密码元素将来可能会被外部化，但现在它们必须在 settings.xml 文件中以纯文本形式设置。

**filePermissions, directoryPermissions：**在部署时创建存储库文件或目录时，这些是要使用的权限。每个的合法值是对应于 *nix 文件权限的三位数字，即。664 或 775。

**注意：**如果您使用私钥登录服务器，请确保省略该元素。否则，密钥将被忽略。

**您只需要`id`,`username`和`password`**

`id`and`URL`应该像这样定义`pom.xml`：

```
<repositories>
    ...
    <repository>
        <id>acme-nexus-releases</id>
        <name>acme nexus</name>
        <url>https://nexus.acme.net/content/repositories/releases</url>
    </repository>
    ...
</repositories> 
```

如果您需要服务器的用户名和密码，您应该对其进行加密。 [Maven 密码加密](http://maven.apache.org/guides/mini/guide-encryption.html)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-15T19:27:24.520

首先，我强烈推荐阅读[Nexus 书](http://www.sonatype.com/books/nexus-book/reference/)。它将解释使用 Maven 存储库管理器的好处。

有一节介绍如何配置 Maven 构建以使用 Nexus：

*   [http://www.sonatype.com/books/nexus-book/reference/config.html](http://www.sonatype.com/books/nexus-book/reference/config.html)

这让我质疑您为什么要更改 POM 文件？我怀疑您真正想要做的是将 Nexus 设置为远程存储库镜像。这是在您的 Maven 设置文件中完成的。

下面告诉 Maven 使用 Nexus 作为您的默认存储库（而不是[Maven Central](http://search.maven.org/)）

```
<settings>
  ..
  ..
  <mirrors>
    <mirror>
      <id>nexus</id>
      <url>http://localhost:8081/nexus/content/groups/public</url>
      <mirrorOf>central</mirrorOf>
    </mirror>
  </mirrors> 
```

这是所需的行为，因为您的 Nexus 存储库已配置为缓存从 Central 检索到的工件（这有利于构建性能）。

笔记：

*   “公共”存储库组可以包括由您的 Nexus 实例代理的其他存储库（不仅仅是 Maven Central）。您可能想要这种行为，因为它集中了所有存储库管理。它只是使您的构建对组织外部的人来说不太便携。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-02-13T16:30:48.743

这里的答案似乎不支持企业用例，其中 Nexus 服务器有多个用户，并且具有基于用户 ID 的基于项目的隔离（保护）以及使用像 Jenkins 这样的自动构建（CI）系统。您将无法创建 settings.xml 文件来满足不同项目所需的不同用户 ID。我不知道如何解决这个问题，除非打开 Nexus 以匿名访问以读取存储库，除非项目可以在其 pom.xml 中存储项目特定的通用用户 ID。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-15T08:26:57.833

来自[Apache Maven 站点](http://maven.apache.org/guides/introduction/introduction-to-repositories.html)

```
<project>
  ...
  <repositories>
    <repository>
      <id>my-internal-site</id>
      <url>http://myserver/repo</url>
    </repository>
  </repositories>
  ...
</project> 
```

“用于下载和部署的存储库由 POM 的存储库和分发管理元素定义。但是，某些设置（例如用户名和密码）不应与 pom.xml 一起分发。此类信息应存在于构建服务器中settings.xml。” - [Apache Maven 站点 - 设置参考](http://maven.apache.org/settings.html)

```
<servers>
    <server>
        <id>server001</id>
        <username>my_login</username>
        <password>my_password</password>
        <privateKey>${user.home}/.ssh/id_dsa</privateKey>
        <passphrase>some_passphrase</passphrase>
        <filePermissions>664</filePermissions>
        <directoryPermissions>775</directoryPermissions>
        <configuration></configuration>
    </server>
</servers> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-12-20T01:19:09.760

如果您不想或无法修改该`settings.xml`文件，您可以在项目的根目录创建一个新文件，然后调用 maven 将其作为参数传递`-s`：

```
$ mvn COMMAND ... -s settings.xml 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-15T11:39:24.457

从[Maven 设置参考](http://maven.apache.org/settings.html)中，您不能将您的用户名/密码放在 pom.xml 中

> 用于下载和部署的存储库由 POM 的存储库和 distributionManagement 元素定义。但是，某些设置（例如用户名和密码）不应与 pom.xml 一起分发。此类信息应存在于构建服务器的 settings.xml 中。

您可以先在 pom 中添加存储库，然后在 $MAVEN_HOME/conf/settings.xml 中添加用户名/密码：

```
 <servers>
    <server>
        <id>my-internal-site</id>
        <username>yourUsername</username>
        <password>yourPassword</password>
    </server>
  </servers> 
```

# python - 将字符串存储在 DB vs 列表中

> ID：14333578
> 
> 赞同：-1
> 
> 时间：2013-01-15T08:17:43.177
> 
> 标签：python, database-design, relational-database

我有一个不同长度的字符列表，因为 ['A','B','B','A','A','B'] 我需要将它存储在数据库中。现在我将它转换为一个工作得很好的字符串，但我想知道什么是更 Pythonic。在这种特定情况下，顺序很重要，但我想知道一般的首选选项（例如，如果列表成员本身就是字符串）

谢谢

编辑：我拥有的代码是一些东西

 ``> list = ['A','B','B','A']
> 
> shuffle(list)
> 
> str = ''.join(list)` 

`字符串本身存储在数据库中。我不是在寻找针对我的特定代码/问题的解决方案，而且我没有性能问题 - 我想知道就 python 而言，是否有任何关于在数据库中存储 blob 的经验法则，因为字典和对象之类的东西序列化和存储似乎是合理的。perharps 这更像是一个 DB 问题而不是 python 问题。`

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:49:58.897

在不知道您使用的是什么数据库的情况下，很难给出准确的答案。如果您的数据库只接受您可以使用`repr()`和`ast.literal_eval`来自标准库的字符串，并且组合非常快：

```
In [26]: from yaml import dump, load

In [27]: import ast

In [28]: l= ['A', 'BB', 'CCC']

In [29]: load(dump(l))
Out[29]: ['A', 'BB', 'CCC']

In [30]: ast.literal_eval(repr(l))
Out[30]: ['A', 'BB', 'CCC']

In [31]: %timeit load(dump(l))
1000 loops, best of 3: 1.03 ms per loop

In [32]: %timeit ast.literal_eval(repr(l))
10000 loops, best of 3: 32.6 us per loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:37:32.383

加入您的列表并将字符串值存储在数据库中没有任何问题。

如果您想存储不同长度的项目，例如。['A', 'AA', 'B', 'AB'] 你总是可以选择一些分隔符，例如'+'。这当然假设您知道给定的分隔符不能是列表中任何项目的一部分。

我会认为，对于许多场景，上述解决方案已经足够好了，并且它们不存在“这不是 pythonic”的问题。

但是，这比 python 案例更多 DB。有一个[数据库规范化理论](http://en.wikipedia.org/wiki/Database_normalization)，它为如何组织数据提供了一些建议。您可以将数据模型重构为“第一范式”（1NF），在您的情况下，这意味着您可以创建一个单独的表来存储项目（可能还有订单信息）并通过 FK 将其与当前表链接。

有了这个，你可以为自己节省一堆问题，例如。项目重新排序，项目计数等。但另一方面，这可能会使您的查询更加昂贵，因为此解决方案需要数据库连接才能从数据库中获取您的数据。在许多情况下，在为应用程序设计数据模型时，有意执行数据库[非规范化](http://en.wikipedia.org/wiki/Denormalization)，主要是因为优化问题。

总而言之，您应该尝试预测您希望如何使用您的数据，并根据这些知识选择一个建议的（或者可能是不同的！）解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:27:58.143

大多数优秀的数据库绑定将允许您直接存储值语义 Python 对象（例如 PyMongo）。如果你的数据库只接受字符串，则需要选择一种序列化格式；在 Python 中，这通常意味着在 pickle（快速但非人类可读）和 YaML（较慢、人类可读、与语言无关）之间进行选择。

泡菜：

```
>>> from cPickle import dumps, loads
>>> dumps(['A', 'BB', 'CCC'])
"(lp1\nS'A'\naS'BB'\np2\naS'CCC'\np3\na."
>>> loads(dumps(['A', 'BB', 'CCC']))
['A', 'BB', 'CCC'] 
```

雅ML：

```
>>> from yaml import dump, load
>>> dump(['A', 'BB', 'CCC']) 
'[A, BB, CCC]\n' 
```

如果您使用的是 SQL 数据库并希望能够在列表中进行查询，那么规范化数据库并每行存储一个列表项是解决此问题的经典方法。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-15T08:25:58.500

老实说，我不完全确定你的问题是什么。你指的是什么数据库？您如何理解一般情况，而不是按原样处理序列？但是，也许您对这样的事情感兴趣：要将您的列表转换为 Sting，请执行

```
>>> ''.join(['A','B','B','A','A','B'])
'ABBAAB' 
```

由于您的列表元素本身就是字符串，因此这与

```
>>> ''.join(['ABB','AAB'])
'ABBAAB' 
`````

# ios - Xcode AVFoundation 裁剪图像

> ID：14333580
> 
> 赞同：1
> 
> 时间：2013-01-15T08:17:46.997
> 
> 标签：ios, avfoundation, crop

我想创建一个`OCR`允许用户选择应用处理的特定区域的应用程序。

到目前为止，我可以使用捕获整个图像`AVFoundation`但是，我当前的目标是使用某些尺寸的叠加并捕获其中的图像，因此，我希望仅在内部捕获图像，而不是捕获整个图像要捕获和使用的叠加层。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:30:16.250

```
+ (UIImage *)imageByCropping:(UIImage *)imageToCrop toRect:(CGRect)rect
{
    CGImageRef imageRef = CGImageCreateWithImageInRect([imageToCrop CGImage], rect);

    UIImage *croppedImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);

    return croppedImage;
} 
```

# php - 仅使用用户名登录 wordpress - 无密码

> ID：14333581
> 
> 赞同：1
> 
> 时间：2013-01-15T08:17:52.607
> 
> 标签：php, wordpress

允许所有 wordpress 用户（管理员除外）仅使用他们的用户名而不使用密码登录的最佳方式是什么。

我的目标是在注册和登录时一起隐藏密码字段。

我完全理解所涉及的安全风险——但这是我正在寻找的功能。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:31:25.723

在没有任何插件的情况下执行此操作的安全方法是实现[wp_set_auth_cookie()](http://codex.wordpress.org/Function_Reference/wp_set_auth_cookie)。它允许您使用他们的 ID 登录用户，cookie 最多可以存储 14 天。

正如其他人所说，每个人都使用一个密码并不是真正的选择，因为缺乏安全性......

# c# - 使用数据集合并两个表并在gridview中显示

> ID：14333582
> 
> 赞同：0
> 
> 时间：2013-01-15T08:17:57.930
> 
> 标签：c#, gridview, dataset

我有这两张桌子

表一
代码标题

KANT-015 如何建立品牌

KANT-016 避免劳动力危机

KANT-017 创建成功的社交媒体策略

KANT-028 准备领导

KANT-029 基于价值观的领导者

表二

代码

KANT-015

KANT-016

KANT-017

KANT-028

KANT-029

如何将它们合并到一个数据集中以在一个网格视图中显示它们

这是我到目前为止所做的

```
conn = new OleDbConnection(@"Provider=Microsoft.Jet.OleDb.4.0;
                                Data Source =" + Server.MapPath("App_Data\\LR Product Database 2000.mdb"));
        conn.Open();

        setOleDb = new DataSet();
        OleDbDataAdapter dbaOle = new OleDbDataAdapter("SELECT * FROM tblProducts", conn);

        dbaOle.Fill(setOleDb);
        sqlCon = new SqlConnection(ConfigurationManager.ConnectionStrings["LRVWebsite"].ToString());
        sqlCon.Open();
        dsSql = new DataSet();

        SqlDataAdapter dba = new SqlDataAdapter(@"SELECT C.CustomerFirstName,C.CustomerLastName, C.CustomerCompany,C.CustomerPosition,C.CustomerCountry,C.CustomerProvince,C.CustomerContact,CP.ActionDate,CP.ProductCode,CP.CustomerEmail FROM tblCustomers C INNER JOIN tblCustomerProducts CP ON C.CustomerEmail = CP.CustomerEmail ORDER BY ActionDate DESC", connString);
        //@"SELECT C.CustomerFirstName,C.CustomerLastName,C.CustomerCompany,C.CustomerPosition,C.CustomerCountry,C.CustomerProvince,C.CustomerContact,CP.ActionDate,CP.ProductCode,CP.CustomerEmail FROM tblCustomers C INNER JOIN tblCustomerProducts CP ON C.CustomerEmail = CP.CustomerEmail ORDER BY ActionDate DESC", connString);
        dba.Fill(dsSql);

        dsSql.Merge(setOleDb);

        GridView1.DataSource = dsSql;
        GridView1.DataBind();

        sqlCon.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:26:09.907

您缺少 PK，合并发生在 PK 上。

在两张桌子上设置一个：

```
setOleDb.Tables[0].PrimaryKey = setOleDb.Tables[0].Columns["CODE"]; 
```

# apache2 - 无法启动 Rails(3.2.11) 上的 Ubuntu 10.04 ruby (1.8.24) 上的 Redmine 2.2.1 问题

> ID：14333584
> 
> 赞同：3
> 
> 时间：2013-01-15T08:18:12.027
> 
> 标签：apache2, ruby-on-rails-3.2, redmine, ubuntu-10.04, passenger

嗨，我在 Ubuntu 10.04LTS 上从 1.2.2 升级到 Redmine 2.2.1 时遇到以下问题：我可以解决最初的问题，但现在打开 redmine 网页时出现错误。

我按照[http://www.redmine.org/projects/redmine/wiki/RedmineUpgrade](http://www.redmine.org/projects/redmine/wiki/RedmineUpgrade)中的步骤 升级了所需的东西。

我对rails和passenger有一些兼容性问题还是某些配置是apache？我想不通。请帮助我解决问题。

在此先感谢，戈什。

**网页错误：**

```
缺少应用程序所需的源文件。
您可能没有正确上传您的应用程序文件。请检查您的所有申请文件是否已上传。
可能未安装所需的库。请安装此应用程序所需的所有库。
有关错误的更多信息可能已写入应用程序的日志文件。请检查它以便分析问题。
错误信息：
没有要加载的文件——调度程序
异常类：
加载错误
应用程序根：
/usr/share/redmine
回溯：
# 文件行位置
0 /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb 251 在“要求”
1 /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb 251 在“要求”
2 /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb 236 在“load_dependency”
3 /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb 251 在“要求”
4 /usr/lib/ruby/1.8/phusion_passenger/railz/application_spawner.rb 308 在“preload_application”
5 /usr/lib/ruby/1.8/phusion_passenger/railz/application_spawner.rb 248 在“initialize_server”
6 /usr/lib/ruby/1.8/phusion_passenger/utils.rb 255 在“report_app_init_status”中
7 /usr/lib/ruby/1.8/phusion_passenger/railz/application_spawner.rb 233 在“initialize_server”中
8 /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb 194 在 `start_synchronously'
9 /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb 163 在“开始”
10 /usr/lib/ruby/1.8/phusion_passenger/railz/application_spawner.rb 209 在“开始”
11 /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb 262 在“spawn_rails_application”
12 /usr/lib/ruby/1.8/phusion_passenger/abstract_server_collection.rb 126 在“lookup_or_add”中
13 /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb 256 在“spawn_rails_application”
14 /usr/lib/ruby/1.8/phusion_passenger/abstract_server_collection.rb 80 在“同步”中
15 /usr/lib/ruby/1.8/phusion_passenger/abstract_server_collection.rb 79 在“同步”中
16 /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb 255 在“spawn_rails_application”
17 /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb 154 在“spawn_application”
18 /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb 287 在“handle_spawn_application”
19 /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb 352 在 `__send__'
20 /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb 352 在“main_loop”
21 /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb 196 在“启动同步”
22 /usr/lib/phusion_passenger/passenger-spawn-server 61  

```

**我的Redmine相关的东西配置如下：**

```
环境：
  Redmine 版本 2.2.1.stable
  Ruby 版本 1.8.7 (x86_64-linux)
  Rails 版本 3.2.11
  环境制作
  数据库适配器 MySQL
Redmine插件：
  没有安装插件

捆绑包中包含的宝石：
  * actionmailer (3.2.11)
  *动作包（3.2.11）
  *活动模型（3.2.11）
  *活动记录（3.2.11）
  *活动资源（3.2.11）
  * 主动支持 (3.2.11)
  * 雷尔 (3.0.2)
  * 建造者 (3.0.0)
  *捆绑器（1.2.3）
  * 码雷 (1.0.8)
  * 厄鲁比斯 (2.7.0)
  *更快的csv（1.5.5）
  * 远足 (1.2.1)
  * i18n (0.6.1)
  *旅程（1.0.4）
  * jquery-rails (2.0.3)
  * json (1.7.6)
  * 邮件 (2.4.4)
  * 哑剧类型 (1.19)
  * multi_json (1.5.0)
  * mysql (2.8.1)
  * 网络 ldap (0.3.1)
  * 多语言 (0.3.3)
  * 机架 (1.4.4)
  * 机架缓存 (1.2)
  *机架开放ID（1.3.1）
  * 机架 SSL (1.3.2)
  *机架测试（0.6.2）
  * 导轨 (3.2.11)
  *铁路（3.2.11）
  * 耙子 (10.0.3)
  * rdoc (3.12)
  * ruby​​-openid (2.1.8)
  * 链轮 (2.2.2)
  * 雷神 (0.16.0)
  * 倾斜 (1.3.3)
  * 树顶 (1.4.12)
  * tzinfo (0.3.35)

root@ubuntu:/usr/share/redmine# gem 列表

*** 当地宝石 ***

actionmailer (3.2.11, 2.3.11)
动作包（3.2.11、2.3.11）
活动模型（3.2.11）
活动记录（3.2.11、2.3.11）
activerecord-mysql2-适配器 (0.0.3)
活动资​​源（3.2.11、2.3.11）
主动支持（3.2.11、2.3.11）
雷尔 (3.0.2)
建设者（3.0.0）
捆绑器 (1.2.3)
码雷 (1.0.8)
daemon_controller (1.1.0)
厄鲁比斯 (2.7.0)
更快的csv（1.5.5）
快速线程（1.0.7）
远足 (1.2.1)
i18n (0.6.1, 0.4.2)
旅程 (1.0.4)
jquery-rails (2.0.3)
json (1.7.6)
邮件 (2.4.4)
元类 (0.0.1)
哑剧类型 (1.19)
摩卡（0.12.3）
multi_json (1.5.0)
mysql (2.8.1)
mysql2 (0.3.11)
网络 ldap (0.3.1)
乘客 (3.0.19)
pg (0.14.1)
多语言（0.3.3）
机架（1.4.4、1.1.5）
机架缓存 (1.2)
机架开放标识 (1.3.1)
机架 SSL (1.3.2)
机架测试（0.6.2）
导轨 (3.2.11)
铁路（3.2.11）
耙子 (10.0.3)
rdoc (3.12)
红宝石-openid (2.1.8)
rubygems 更新 (1.8.24)
链轮 (2.2.2)
雷神 (0.16.0)
倾斜 (1.3.3)
树顶 (1.4.12)
tzinfo (0.3.35)

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:29:01.767

这已在另一个论坛中解决，我想在这里发布解决方案以防其他人需要它...

我更新了乘客：

宝石更新乘客

然后：

乘客安装 apache2 模块

然后修改 apache2.conf 文件以使用新的乘客版本。上面的安装程序告诉您需要在您的环境中修改什么。

然后重新启动apache，瞧！

希望这可以帮助。

# javascript - JQuery rcarousel 重复幻灯片

> ID：14333587
> 
> 赞同：0
> 
> 时间：2013-01-15T08:18:34.730
> 
> 标签：javascript, jquery

我已经使用了 rcarousel 插件几次，没有遇到任何问题。

在一个新网站上实现它时，rcarousel 突然**复制**了第一张幻灯片（我正在展示 3）。

本页底部的两张幻灯片都发生了这种情况：

[http://www.expertmarketermagazine.com/en/home](http://www.expertmarketermagazine.com/en/home)

当您浏览滑块时，您可以看到“重复”在整个东西滑走之前恢复到正确的幻灯片。

有没有人遇到过类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:31:53.543

将您的 rcarousel 选择器更改为：

```
<script>
    $(function() {
        $("#carousel-authors .wrapper").rcarousel({
            visible: 3,
            step: 3,
            width: 127,
            height: 200,
            navigation: {
                prev: "#ui-carousel-next-authors",
                next: "#ui-carousel-prev-authors"
            }
        });

        $("#carousel-books .wrapper").rcarousel({
            visible: 3,
            step: 3,
            width: 127,
            height: 200,
            navigation: {
                prev: "#ui-carousel-next-books",
                next: "#ui-carousel-prev-books"
            }
        });
    });
</script> 
```

# search - WinSCP：远程文件的文本搜索

> ID：14333590
> 
> 赞同：8
> 
> 时间：2013-01-15T08:18:45.357
> 
> 标签：search, full-text-search, remote-server, winscp

我使用 WinSCP 来访问我们项目的远程文件。如何使用 WinSCP 在所有远程文件/目录中搜索一些文本/单词？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T13:29:42.373

WinSCP 不支持在其主 GUI 中进行文本搜索。

* * *

但是有一个内置[扩展可以递归搜索远程目录中的文本](https://winscp.net/eng/docs/library_example_recursive_search_text)。

这是一个适用于 SFTP 的通用解决方案，即使服务器不允许 shell 访问，甚至不允许 FTP 或 WebDAV 会话。

[![在此处输入图像描述](../Images/b8f4773cd9a49fc6f4aa4d21ded40879.png)](https://i.stack.imgur.com/WY16L.png)

* * *

或者，您可以使用 WinSCP[控制台窗口](https://winscp.net/eng/docs/ui_console)（*命令 > 打开终端*）从命令行启动搜索。

```
grep -r "text_to_search_for" * 
```

这当然需要对服务器的 shell 访问。

# ruby - 将任意参数传递给方法

> ID：14333591
> 
> 赞同：1
> 
> 时间：2013-01-15T08:18:54.263
> 
> 标签：ruby, reflection

我有一个看起来像的方法

```
def SomeMethod (*args)
     m = if args.length > 0 then 
            self.method(:method1) 
         else 
            self.method(:method2)
         end
     m.call ... #need to either pipe all arguments aside from the first
                #and in other cases substitute the first argument
end 
```

实际结构稍微复杂一点，其中要调用的方法来自不同的实例，在某些情况下，我必须通过管道传输所有参数，以免第一个参数，在其他情况下，我必须用另一个值替换第一个参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:04:25.137

您可以使用所谓的 splat 运算符`*`将数组展开为参数列表：

```
# Call with all but the first element
m.call *args[1..-1]

# Replace first element
m.call *args[1..-1].unshift(newarg) 
```

[（一元）* 运算符在这段 Ruby 代码中做了什么？](https://stackoverflow.com/questions/918449/what-does-the-unary-operator-do-in-this-ruby-code)
[两个数组中奇怪的乘数运算符行为散列组合](https://stackoverflow.com/questions/11222548/weird-multiplicator-operator-behavior-in-a-two-arrays-to-hash-combination)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:16:42.677

您可以尝试使用哈希

```
def SomeMethod (hash_arg={})
    m = unless hash_arg.blank? then 
            self.method(:method1) 
        else 
            self.method(:method2)
        end
     m.call ... #need to either pipe all arguments aside from the first
            #and in other cases substitute the first argument
#Check if a certain arg has been passed=> do_something unless hash_arg[:certain_arg].nil?
end 
```

# asp.net - 在 IIS 7.5 上使用传出异步 Web 请求时的可伸缩性问题

> ID：14333593
> 
> 赞同：31
> 
> 时间：2013-01-15T08:18:57.687
> 
> 标签：asp.net, iis, asynchronous, queue

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-08T12:42:12.083

我已经通过异步 Http 处理程序实现了一个反向代理，用于基准测试（作为我博士论文的一部分），并且遇到了和你一样的问题。

为了扩展，必须将 processModel 设置为 false 并微调线程池。我发现，与有关 processModel 默认值的文档所说的相反，当 processModel 设置为 true 时，许多线程池没有正确配置。maxConnection 设置也很重要，因为如果限制设置得太低，它会限制您的可伸缩性。请参阅[http://support.microsoft.com/default.aspx?scid=kb;en-us;821268](http://support.microsoft.com/default.aspx?scid=kb;en-us;821268)

关于由于套接字上的 TIME_WAIT 延迟而导致您的应用程序耗尽端口的问题，我也遇到了同样的问题，因为我在 240 秒内从一组有限的机器中注入了超过 64k 个请求的流量。我将 TIME_WAIT 降低到 30 秒，没有任何问题。

我还错误地将代理对象重用到多个线程中的 Web 服务端点。虽然代理没有任何状态，但我发现 GC 在收集与其内部缓冲区（String [] 实例）相关的内存时遇到了很多问题，这导致我的应用程序内存不足。

您应该监控的一些有趣的性能计数器是与 ASP.NET 应用程序类别下的排队请求、执行中的请求和请求时间相关的计数器。如果您看到排队的请求或执行时间很短但客户端看到很长的请求时间，那么您的服务器中存在某种争用。还要监视 LocksAndThreads 类别下的计数器以查找争用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:05:21.280

由于异步请求使 tcp 套接字保持更长时间，也许您需要查看 web.config 中连接管理中的**maxconnection属性？**请参考此链接： http: [//support.microsoft.com/default.aspx ?scid=kb;en-us;821268](http://support.microsoft.com/default.aspx?scid=kb;en-us;821268)

我们遇到了类似的问题并调整了这个参数来解决我们的问题。也许这会对你有所帮助。

编辑：此外，根据过去的经验，许多 TIME_WAIT 表明代码中存在连接泄漏。可能的原因： 1) 未处理使用的连接。2) 连接池的错误实现。

# java - 在配置 MapReduce 作业时使用多个 InputFormat 类

> ID：14333596
> 
> 赞同：2
> 
> 时间：2013-01-15T08:19:09.303
> 
> 标签：java, hadoop, mapreduce

我想编写一个可以处理文本和 zip 文件的 MapReduce 应用程序。为此，我想使用不同的输入格式，一种用于文本，另一种用于 zip。有可能这样做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T17:01:11.730

从@ChrisWhite 的回答中扩展一点，您需要的是使用自定义`InputFormat`并`RecordReader`与 ZIP 文件一起使用。您可以在此处找到[示例 ZipFileInputFormat](https://github.com/cotdp/com-cotdp-hadoop/blob/master/src/main/java/com/cotdp/hadoop/ZipFileInputFormat.java)并在此处找到[示例 ZipFileRecordReader](https://github.com/cotdp/com-cotdp-hadoop/blob/master/src/main/java/com/cotdp/hadoop/ZipFileRecordReader.java)。

鉴于此，正如 Chris 建议的那样，您应该使用`MultipleInputs`，如果您不需要为每种类型的文件自定义映射器，我会这样做：

```
MultipleInputs.addInputPath(job, new Path("/path/to/zip"), ZipFileInputFormat.class);
MultipleInputs.addInputPath(job, new Path("/path/to/txt"), TextInputFormat.class); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T12:15:00.870

查看 MultipleInputs 的 API 文档（[旧 api](http://hadoop.apache.org/docs/r1.1.1/api/org/apache/hadoop/mapred/lib/MultipleInputs.html)、[新 api](http://hadoop.apache.org/docs/r1.1.1/api/org/apache/hadoop/mapreduce/lib/input/MultipleInputs.html)）。不是很容易解释，但您应该能够看到您在作业配置中调用 addInputPath 方法并配置输入路径（可以是 glob、输入格式和关联的映射器）。

您应该可以在 Google 上搜索一些示例，事实上这是一个[SO question/answer](https://stackoverflow.com/questions/11059725/is-it-possible-to-have-multiple-inputs-with-multiple-different-mappers-in-hadoop)，显示了一些用法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:22:04.397

考虑编写一个自定义`InputFormat`项，您可以在其中检查正在读取的输入类型，然后根据检查调用所需的`InputFormat`

# ios - 从后台返回时，视图控制器将在没有任何动画的情况下关闭

> ID：14333597
> 
> 赞同：1
> 
> 时间：2013-01-15T08:19:18.563
> 
> 标签：ios, objective-c, cocoa

iOS6 上的应用程序和我的 iPhone 是 4S，我使用 Storyboard 呈现视图控制器并使用以下代码关闭：

```
[self.presentingViewController dismissViewControllerAnimated:YES completion:nil]; 
```

它工作正常，直到我的应用程序进入后台然后再次进入前台，我呈现一个视图控制器并关闭它。视图控制器将在没有任何动画的情况下关闭。我知道这是一个小问题，但它确实让我感到困惑。

这是iOS6 SDK的错误吗？

# r - 模糊图像的一部分

> ID：14333598
> 
> 赞同：1
> 
> 时间：2013-01-15T06:15:17.200
> 
> 标签：r

我正在阅读“R编程的艺术”并遇到了这篇文章：

```
# adds random noise to img, at the range rows,cols of img; img and the
# return value are both objects of class pixmap; the parameter q
# controls the weight of the noise, with the result being 1-q times the
# original image plus q times the random noise
blurpart <- function(img,rows,cols,q) {
  lrows <- length(rows)
  lcols <- length(cols)
  newimg <- img
  randomnoise <- matrix(nrow=lrows, ncol=ncols,runif(lrows*lcols))
  newimg@grey <- (1-q) * img@grey + q * randomnoise
  return(newimg)
} 
```

我的问题是关于这条线：

```
newimg@grey <- (1-q) * img@grey + q * randomnoise 
```

如何`newimg@grey`最终与`img@grey`. 由于`randomnoise`是较小的矩阵，该`newimg@grey`部分如何识别图像的哪个部分要模糊。

我认为它应该是这样的：

```
newimg <- img
newimg@grey[rows,cols] <- (1-q) * img@grey[rows,cols] + q * randomnoise 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:39:12.953

书中似乎有一个印刷错误，我已经验证即使错字正确，书中的代码也不起作用。我已将反馈发送给作者。正确的部分应该是：

```
newimg <- img
newimg@grey[rows,cols] <- (1-q) * img@grey[rows,cols] + q * randomnoise 
```

# android - 使用动画制作自定义进度对话框

> ID：14333601
> 
> 赞同：1
> 
> 时间：2013-01-15T08:19:36.743
> 
> 标签：android

我正在尝试制作自己的进度对话框。我只是在使用一个扩展布局的对话框。在这个布局中，我有一个`ImageView`，这个 imageview 应该像原来的微调器一样旋转`ProgressDialog`。我将这个动画应用到它：

```
RotateAnimation r = new RotateAnimation(ROTATE_FROM, ROTATE_TO, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
    r.setDuration(10000);
    r.setRepeatCount(r.INFINITE);
    icon.startAnimation(r); 
```

动画显然持续了 10000 毫秒。动画开始慢，结束慢，旋转速度有没有可能一直是恒定的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:46:05.860

您可以将 a 设置`LinearInterpolator`为动画：

```
r.setInterpolator(new LinearInterpolator()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:26:25.053

提高旋转速度的一种方法是在适用于您的 repeatCount 字段中设置持续时间和数字。这样做，您可以控制速度......只需输入一些大数字并为您的动画添加一个侦听器，当它结束时，如果仍然显示对话框，请重新启动它。

# node.js - mongoose的model.on('index', ...)应该怎么用？

> ID：14333603
> 
> 赞同：2
> 
> 时间：2013-01-15T08:19:53.397
> 
> 标签：node.js, mongodb, mongoose

在查看 for 的文档时`MongooseJS`，`MongoDB/Node.js`似乎可以在对象上指定索引，如下所示：

```
var MyModelSchema = new Schema({ name: String, index: true });
var MyModel = mongoose.model('MyModel', MyModelSchema);
MyModel.on('index', function()
{
    doStuff();
}); 
```

根据文档，Mongoose 将`ensureIndex()`在启动时调用，除非该`"autoIndex"`选项在模式上明确设置为 false。一旦完成，该`'index'`事件将在模型上发出，这将触发回调。

我的理解是，这允许模型的用户确保在使用模型之前已完成所有索引。

我相信我听说过通过 这样做`app.configure`，尽管我不确定如何做到这一点。也许还有另一种方法可以保证在依赖于导出模型的应用程序的其他部分之前完成此索引操作？

这应该如何正确使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T16:38:13.657

模型上的`'index'`事件会提醒您模型`ensureIndex`调用中发生的任何错误。在事件触发之前，您不需要延迟使用模型。那会变得非常混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-01T18:07:14.170

我发现将以下内容添加到用于配置项目的猫鼬设置的区域很有用。

```
let mongoose = require('mongoose');

mongoose.Model.on('index', function(err) {
  if (err) logger.error(err);
}); 
```

# iphone - 将数组发送到viewcontroller iOS xcode

> ID：14333606
> 
> 赞同：0
> 
> 时间：2013-01-15T08:20:11.177
> 
> 标签：iphone, ios, xcode, xcode4.5

我有 2 个视图控制器：

索引中的第二个索引我有 2 个文本字段和按钮。

我填写了这个文本字段并按“下一步按钮”到第二个视图，我需要使用数组“显示”这两个文本字段（稍后我将发送 JSON 数据）。

我试过这个：将第二类中的@property 声明为textArray。然后在从 Index 推送到 Second 时，您需要设置此属性。

在 Second.h 文件中，

```
@property(nonatomic, strong) NSArray *textArray; 
```

在 Index.m 文件中，

```
Second *aSecond = [[Second alloc] init];
aSecond.textArray = @[textField1.text, textField2.text]; 
```

//编写代码从Index推送到Second类现在在​​类Second中，你可以使用它作为aSecond.textArray[0]和aSecond.textArray[1]

但是如果我切换页面（单击下一步）数组已被清空。

对于切换页面，我使用这个：

```
SecondPage *SecondPage = [self.storyboard instantiateInitialViewController];
    SecondPage = [self.storyboard instantiateViewControllerWithIdentifier:@"SecondPage"];
    [self SecondPage animated:YES]; 
```

我怎样才能最好地实现？请帮忙！最好的问候伊万。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:39:29.837

为第二个视图控制器编写您自己指定的初始化程序，例如。

```
-(id)initWithTextArray:(NSArray *)_textarray;

```

现在分配初始化第二个视图控制器

```
第二个 *aSecond = [[Second alloc] initWithTextArray:array];

```

在第二个视图控制器的 viewDidLoad 方法中，使用您的 textarray 来填充您的视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T08:37:06.700

如果您通过情节提要使用它，则需要这样做，

```
SecondPage *aSecondPage = [self.storyboard instantiateInitialViewController];
aSecondPage = [self.storyboard instantiateViewControllerWithIdentifier:@"SecondPage"];
aSecond.textArray = @[textField1.text, textField2.text];
[self aSecondPage animated:YES]; 
```

当您执行此操作`aSecond = [[Second alloc] init];`然后执行`aSecondPage = [self.storyboard instantiateViewControllerWithIdentifier:@"SecondPage"];`时，它会创建一个单独的实例而不是相同的实例。您在第一个实例上设置了这个数组，并希望在第二个实例上设置它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:10:11.523

嘿，您是否尝试过“使用委托方法的全局变量和数组”。在您删除之前，它不会释放。在应用程序实例之前它将是全局的。

在代表课上，

.h 文件

```
NSMutableArray *obj; 
```

.m 文件，

```
Synthesize & Alloc - init array. 
```

然后，

在 ViewContoller .m 文件中

```
AppDelegate *app;
app = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

然后，

```
[app.obj addObject: text1.text]; 
```

在第二个 .m 文件中，您可以使用它。

```
NSLog(@" Data : %@", app.obj); 
```

请记住，无论何时你想要这个数组，你都应该初始化 'Delegate' 类的 'app' 对象。

它将在全球范围内工作和存储数据。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T15:36:27.507

我可以想到两种方法：

1) 在 Second 中添加一个方法并在初始化后调用它并将值作为参数传递给方法。所以在 Second.m 中`-(void) push :(NSArray *)array{}`，在你的 NSArray 名称之前用“&”传递它。

2) 在 First 中创建一个吸气剂。由于它的 NS，您必须在 First.h 中使用 assign 所以在 First.m 中`@property(nonatomic, assign) NSArray *array1;` 添加`@synthesize array1;` 并调用它 `self.array1 = [@"t", @"e", @"s", @"t"];` 然后在 Second 中传递对 First 类的引用并在 Second.m 中创建一个变量并获取它 `NSArray *array1 = first.array1;`

您可以编写自己的吸气剂，但不合理。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-15T08:32:17.940

```
SecondPage *SecondPage = [self.storyboard instantiateInitialViewController];
    SecondPage = [self.storyboard instantiateViewControllerWithIdentifier:@"SecondPage"];
    [self SecondPage animated:YES]; 
```

1) 你的变量名和你的类名是一样的 2) 我不确定 XCode 是否接受你写的 [self SecondPage animated:YES];

最后，你分配了你的数组吗？

编辑;

哦，还有：

```
aSecond.textArray = @[textField1.text, textField2.text]; 
```

你应该写：

```
[aSecond.textArray addObject:textField1.text]; // using NSMutableArray 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-01-15T08:45:10.900

有很多方法可以将值从一个控制器转移到另一个控制器，但对你来说，我认为这将是最简单的。采用`NSUserDefaults`

第一种简单的方法

在第一个控制器中

```
[[NSUserDefaults standardUserDefaults] setObject:@[textField1.text, textField2.text] forKey:@"listOfData"]; 
```

在第二个控制器中

```
NSArray *array = [[NSUserDefaults standardUserDefaults]objectForKey:@"listOfData"]; 
```

第二种简单的方法是

```
DetailVC *detailVC = [self.storyboard instantiateInitialViewController];
detailVC = [self.storyboard instantiateViewControllerWithIdentifier:@"DetailVC"];
detailVC.textArray = @[textField1.text, textField2.text]; 
```

# php - opencart 内部服务器错误 500

> ID：14333612
> 
> 赞同：-2
> 
> 时间：2013-01-15T08:20:35.847
> 
> 标签：php, shopping-cart, opencart

我为 opencart 使用 shoppica 主题。当我以测试客户身份登录并单击订单历史记录部分时，我总是收到内部服务器错误 500。我没有更改 .htaccess 和配置文件中的任何内容。它来自乞讨，但从现在开始我需要它。客户面板中的所有部分都可以使用，除了订单历史记录和交易部分。一个线索是，当我向我的客户提供奖励交易时，面板中之前的交易部分会消失并给我一个内部 500 错误。请帮助我，因为我非常需要它。我不能再次安装它，因为它是 3 个月，我不能从头开始。我使用 opencart 1.5.3.1

对于另一个内部错误，我在日志中收到了这些错误：

```
PHP Warning:  unlink(public_html/system/cache/cache.currency.1358109327) [<a href='function.unlink'>function.unlink</a>]: No such file or directory in public_html/system/library/cache.php on line 14
PHP Warning:  session_start() [<a href='function.session-start'>function.session-start</a>]: Cannot send session cookie - headers already sent by (output started at public_html/index.php:104) in public_html/system/library/session.php on line 11
PHP Warning:  session_start() [<a href='function.session-start'>function.session-start</a>]: Cannot send session cache limiter - headers already sent (output started at public_html/index.php:104) in public_html/system/library/session.php on line 11
PHP Warning:  Cannot modify header information - headers already sent by (output started at public_html/index.php:104) in public_html/index.php on line 177
PHP Warning:  Cannot modify header information - headers already sent by (output started at public_html/index.php:104) in public_html/vqmod/vqcache/vq2-system_library_currency.php on line 45 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:41:17.810

你应该检查 unlink 功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-12T10:50:04.663

对于这个特定问题，我为时已晚，但是由于它有很多观点，我仍然会提供答案。

对于其他在 OpenCart 中遇到 500 个服务器错误的人来说——调试这些错误时要做的第一件事是**查看服务器的错误日志并找到确切的错误消息**。

如果没有，您可能需要通过调整 PHP 配置中的**error_reporting**、**display_errors**和**log_errors**设置来显式启用它们。您也可以直接在主 index.php 文件中临时更改它们。

一旦您知道确切的错误消息，修复它就是一个简单的过程。

我们在博客文章中介绍了一些导致 500 服务器错误的最常见 OpenCart 错误消息：[OpenCart 中的服务器错误和空白页：最常见的原因](https://multimerch.com/blog/blank-pages-in-opencart-most-common-causes/)。

在这种特殊情况下，问题是由于您的缓存文件夹丢失或服务器不可写入的事实引起的：

*PHP警告：unlink（public_html/system/cache/cache.currency.1358109327）[function.unlink]：第14行的public_html/system/library/cache.php中没有这样的文件或目录*

此错误表明您的 OpenCart 货币缓存文件丢失。在大多数情况下，当您的***system/cache/***文件夹缺少正确的服务器权限时会发生这种情况（对于 OpenCart，通常是 775）。应该通过调整文件夹权限并从文件夹中删除所有现有缓存文件来修复它。

# c - Plink 传递参数

> ID：14333613
> 
> 赞同：3
> 
> 时间：2013-01-15T08:20:39.247
> 
> 标签：c, linux, ssh, plink

```
plink user@10.220.60.xx -t '/home/user/test/testpgm' 
```

我可以使用上面的 plink cmd 从 Windows 机器上运行以下驻留在 Linux 机器上的程序。

```
#include<stdio.h>
int main(int argc,char *argv[])
{
   int i;
   char buf[30];
   printf("Test Pgm \n");
   printf("No of Arguments=%d\n",argc);
   printf("Enter a string:");
   fflush(stdout);
   gets(buf);
   printf("Input str:%s \n",buf);

   return 0;
}

gcc test.c -o testpgm 
```

问题：如何将命令行参数传递给这个函数？我试过

```
plink user@10.220.60.xx -t '/home/user/test/testpgm arg1'

bash: /home/user/test/testpgm arg1: No such file or directory 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T08:39:13.663

shell 将引号内的字符串视为一个单词，这意味着`plink`尝试执行程序`/home/user/test/testpgm arg1`。显然这行不通。

你要做的很简单：跳过引号！

```
$ plink user@10.220.60.xx -t /home/user/test/testpgm arg1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:40:29.207

我试过

```
plink user@10.220.60.xx /home/user/test/testpgm arg1 
```

工作正常。

# php - PHP 从 URL 下载图像

> ID：14333614
> 
> 赞同：0
> 
> 时间：2013-01-15T08:20:41.403
> 
> 标签：php, curl

我有一个 TXT 文件，其中包含每个新文件上图像的 URL。我正在读取文件并获取每个新 URL 并制作图像并将其存储在本地，如下所示。

```
$filename = 'images.txt';
displayTXTList($filename);

function displayTXTList($fileName) {
    if(file_exists($fileName)) {
        $file = fopen($fileName, 'r');
        while (!feof($file)) {
            $url = fgets($file);
            $image = basename($url);
            downloadImages($image);
            downloadImages(str_replace(".jpg", 'l.jpg ', $image));
            downloadImages(str_replace(".jpg", 's.jpg ', $image));
        }
        fclose($file);
    }
}

function downloadImages($image) {
    $ch = curl_init('http://i.imgur.com/'.$image);
    $fp = fopen('images/'.$image, 'wb');
    curl_setopt($ch, CURLOPT_FILE, $fp);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_exec($ch);
    curl_close($ch);
    fclose($fp);
    //file_put_contents('images/'.$i, file_get_contents('http://i.imgur.com/'.$i));
} 
```

我收到以下错误

```
Warning: fclose() expects parameter 1 to be resource, boolean given in C:\wamp\www\temp\nomad\index.php on line 45
Warning: fopen(images/BrRdRl.jpg ) [function.fopen]: failed to open stream: Invalid argument in C:\wamp\www\temp\nomad\index.php on line 40
Warning: curl_setopt(): supplied argument is not a valid File-Handle resource in C:\wamp\www\temp\nomad\index.php on line 41

ÿØÿàJFIFHHÿÛC  % !###&)&")"#"ÿÛC """""""""""""""""""""""""""""""""""""""""""""""""""ÿÀ«€"ÿÄÿÄ?!1AQ"aq‘2¡#B±ÁÑRáð$3bñCr‚’4SÿÄÿÄ2!1AQ"2aq‘¡±#BÁð3RáCÿÚ?²'¿>Ô ïš`#984ðv<«ë,ùÚ7§¬¸##½ç1N¹¥HóvÜtë\¯Ó4cÀ"¨mÞ€$yƒÚ† 9Æß4ºö© ý)uõÎ½Ì#?Û­&¢@ Ó°D= Ý€§Î9Ò >}éQŠn ø  áÉØšPN{T“¾9r¥8ØŸ­NÕƒ]¨d`TE‘èv¢‰NFã­Î6ö¥ÉúPÕ¶ÔiCd`1NÆ~{ÐÃo±ýiFG<Ð1ùÅ 9ÆûŠi<?lWr1µ'ÚšI ŽôÐyæ—##<©XØnFç­vq€yÒ}pÆsLuÍ&7?5Ù Ž´†hÙÜæ“=É®Ï*LŽx dc<ý©Å²6Ðk¿š€8;ÓµoËïC$ç}8óÇS@R@èq\IÎôÀ0ÛRäæ€Yß¨§ÁjÜíúRç<¶ ë ç;R‰7ÅV9ÓA'  ±íš]CN9÷¨ù Ò†ÿ†€HÎ¡È×gÒQÖƒsŽUÅ°»òmG<ë³±ýqAGù®-±É A¹ÎÞô Ÿ½FÔJ×däæ‡Øx4…Àçš@9È÷®1ÓæAÎšd;ãô¦lAÚ¹ïHçÓ¾ç­4€AçÎ“P9èkƒmŠ`p;s]ƒA?4º¶ØRÇLý(ˆ<ö4¤`íýi¤“ÓjâO*Liá‚ämCÎÛ|Ó‹d`|Ó{)rÆ»ùr®Î:ïM=Å †&lt;ö«ƒíšBÙÍ3rH;j<œdSIÞ°¿½!tÆiÝá¾q¸ö¦äŽ¦“8;òÀoœäQ`qçîiÁˆ·ô¦©Á&’A#•‚ÐíC&w |ÒŽuÇ¥ìs…¦u=;×dcs¸®$ã•¿óIÈ×z.ìÉÒ26¦’š\Œc|Òg}¶¡Ç–Æ»V6Ü×mŒcíM úÐ“ô¤ÓŸWù¤mÀÏsK¬7ùÞ¢Àz¶ JâÀg~};Ó5ïŠB #®(õ?AñOÉÁ ŠføÈ;R“¿#Ö€ §#Ôp=Í(ÿÈíýi™Æ S•ÀaÈžÔ˜ÇJïÏ§Å0Nûâ•˜’y|šinc1Y‡!ŒôÍ*îO:fœößÞœ¸2}éúí9<Ž;S—™ÏÓÝ`œ ä;ïèAA3¹Ï:A’Ù¤ÜÆM*Œu¢Àpm/Œèºð§oµ‘åJ9îhuq³ñN×¾3õ4ÄmŸjPv4:§¯ë]«¹ëBÀÈ;S³“µHTRfûB0ÛŠ ¶ç4„çßÛ4!†ãÚ»9Þ„Îôºú$ò8®ÎßZlíž\©Äž¼¨<õÎÛÒjÛ–)®Æ“QƒƒEŽ‡÷Çë\E46O1J ÿnÕÙ9ÜÓ É®ÕÒ‹€ã—Jì÷¡äô»=(0€ázWglf‡’;jí[ò¥bÄSÃ`mÓ¸ †Ûaµ.­ÆqEØPLíÊ»#VI SÁK«j:üŽB“9çLÈ°ëÎˆyc¶F{mIÀþ´Üûüm]«plÑ`<žÙÇÅ'!Ó~ô€“Þ—¯?j,tvÄçµq¡¦’kºS±ÉÆõÀo)qšîœèû³¿jLŒò&š;Î¸rçH«gé ß~Tƒc]«;v¦³¶Ç•'0w¡±qÒ”Cz~9gqîqK±ß•7'' }©w#aEŽ…ÎûóÒÍ7ÕœšP 9Ð!F:ã4…Žø®Ã:S‚“üÛÑc¦7;÷ùÙÆ:ûW2œP?—Ê8É#4Z cNØ¥ÛzBÃ#šì†æÊ1í@¨ãƒþ+Ž>ôá;‡=:k.’0A‹156Ûæ¸œàæš}ö¤$|üÑ`/3ê®þõÙä Í&AÎÍ;¹œã÷®ý=é7;•ÃnôÀâO\WoÓÚˆ¤$c oïEŠ‡ †p0i¤íµ4“Ë¯zâ=^Ô[¨ãÕý©2r~˜¡@nÝ)CY¨LæÔìåi àg#4»’psGc¶’4çn†—YÜv¦öÛzRçúP* œÎqÒ—P5ÀÆýiNO=ÿ¥¹<ö®o‘Ë­4d ñö§óå@ ƒœw¥Îã½.2» E÷¢ÀvsùFiN)9.)‡:Vúü×g'§À¦gmÆÔýCNÂˆPH"”`ò¦êa±¥ ¹ÇŒÿÁK“þô2pyNÎÙÇj@<rç]¨u;ô¦ô¥@Ü¨ä9Ò :`b7ÛíJ+·åö¦À~{×tÞš.[õ¤ÈÏ÷¤…cóŠv£é™Î7¥9ý©Ø$.Iï÷§O\žÔÍ[îkµ„àÑc¦<žÃ«Î˜¸½+ ÕêÏÞœÍ²(%ð6ú×yƒÛäRØí ä¯F?jnO6Á¡k$mI«zh8ÓùüR lÙ¡ø® ’yS È ?JfsÖ¸A TVß˜¥vÄþaŸz'OÒ1€¤ŒŸÌ3]¤rð(Z,Ÿ½v®ô¾}IúWd`oÒ†Ûf»';uéEˆ&q¸'ï\IçèzŽw®,OZv€&amp;­[Rî3VO?µ mñHAßû×g|mC-·=ë½8ï@è&tiŽ”=`‘©FÛvõg©ù®ÎÔÃ±Ø×gµõ ¶5ÙÛ4ÐG½q9Øb†ÇCÄ˜aJ$# ŽÂ…žÄWdrÎÔ†QÇ3I¬ç™9çŠëÏ˜ Q;Xž­ñša|ó8ïMÍvß4¬{«·Þ‘˜ïý)Î”¶&amp;ŠŽ|‘JF¡éJnÿÙœò¢Æ(ôüu¤;{g ®b½²i¹j,j:wé\NÝé23½v¼õÚÓ¶1óK‘Ì …¶Þ“P'–(lçp6ù¦ë¨ZŽÜ féƒ¿jÃàý)5óC‰öýisÊ€Xç¤;afÁ4ÍXÔqïLDÃ v3œoš`ÜçmùRõëj†!Ç=Æ)@ ïÊ“VvÇ;ô¨åèt;8î6®þmÁ'æ›¯O1õ§gz{1ú³‚)Gq“ïMœàûRç¶>iA#–ô£9®É3ïEŽ„ÖqÉ‰íOéìE'3]‘¾ÔZÙßÒ”¾ø#=3ÔGûR€q°¢ÐPýDíŠPG<}(dq½qcž´†[²­;^Np3ñAR@9æk³œp(PÄ¿Z][DýèE»b‚3°"€×µ8HA8'éBj@=èÞkéç±®ÎÃ¥c¹ÏA\6Ý¶ t9ëµpôäéÈ¡jßt¤,r7ø¦‰ ùßa]¨ç}èY$nMv­½ÅœŒŒRëåŽ”-X “‘Ú”0ßa÷¤9#j\ÐµgJvJ®3óEŽ‡ç¹®8è)‡¯&gt;^Ôíð>Ô¬8‹«¿Z\íÓÞ˜W|šNGN)…Üœ‚&gt;” r¦ƒØb¸9ß‘ïE…'}Îô¤úN(a;Š\ã˜ (PûSµwÚ™ØÒrçœ‚tù¦ã~7Xf›«¶Â€ Û÷ÞŒo¶hi!Ú”1í@PMX¿ZM[íLÉaÊ—Ô~jAC‡.uÛçŠL]i2zšvGuÛ;S†Ýé€œ~o¥.I8&‹ 
```

当我将图像列表缩短为 2-3 时。我看到只有最后一张图片正在下载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:24:57.383

文件名中有一个空格：

```
downloadImages(str_replace(".jpg", 'l.jpg ', $image));
downloadImages(str_replace(".jpg", 's.jpg ', $image));
                                         ^ here 
```

后面不应该有空格`jpg`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:24:02.453

```
$fp = fopen('images/'.$image, 'wb'); 
```

此调用导致失败并且未生成资源句柄

# javascript - Android webview“location.replace”不起作用

> ID：14333620
> 
> 赞同：2
> 
> 时间：2013-01-15T08:21:09.717
> 
> 标签：javascript, android, android-webview, html5-history

我有一个带有重定向到另一个页面的页面的 Android 网络视图，使用`location.replace(url)`.
假设我有页面“A”重定向到页面“B”（使用 location.replace）。当从“B”页面按下“返回”按钮时，页面返回到“A”页面，这会将其再次重定向到“B”页面。当我调试历史 API（history.length）时，我可以清楚地看到在页面“B”上长度增加了“1”（仅在 Android 4.X webview 上。在 iOS / web 浏览器 / Android 2.X 上保持不变），这是一个错误！（location.replace 不应更改 history.lenght！）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T10:09:07.327

我在这个项目上与 Yaniv 合作，我们找到了问题的原因，当我们尝试`mailto:`根据[这个答案](https://stackoverflow.com/a/3671737/241456)添加链接处理时引入了它。

答案建议使用以下 WebViewClient 扩展类：

```
public class MyWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {     
        if(MailTo.isMailTo(url)){
            MailTo mt = MailTo.parse(url);
            // build intent and start new activity
            return true;
        }
        else {
            view.loadUrl(url);
            return true;
        }
    }
} 
```

问题是明确告诉`WebViewClient`加载 URL 并返回 true（意思是“我们处理了这个”）将页面添加到历史记录中。WebViews 本身非常有能力处理常规 URL，因此返回 false 并且不接触视图实例将使 WebView 加载页面并按应有的方式处理它。

所以：

```
public class MyWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {     
        if(MailTo.isMailTo(url)){
            MailTo mt = MailTo.parse(url);
            // build intent and start new activity
            return true;
        }
        else {
            return false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-30T05:23:13.457

```
function locationReplace(url){
  if(history.replaceState){
    history.replaceState(null, document.title, url);
    history.go(0);
  }else{
    location.replace(url);
  }
}
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:39:39.300

试试这个方法。。

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        WebView mainWebView = (WebView) findViewById(R.id.webView1);

        WebSettings webSettings = mainWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);

        mainWebView.setWebViewClient(new MyCustomWebViewClient());
        mainWebView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);

        mainWebView.loadUrl("file:///android_asset/www/A.html");
    } 
```

[或从此](http://developer.android.com/reference/android/webkit/WebViewClient.html#onPageStarted)和[此](http://lexandera.com/2009/01/extracting-html-from-a-webview/)链接获得帮助

# c# - 如何在 asp.net 应用程序中从 jquery 设置 HttpPost 端点

> ID：14333621
> 
> 赞同：3
> 
> 时间：2013-01-15T08:21:10.200
> 
> 标签：c#, jquery, asp.net, http-post

我正在尝试让[Fine Uploader](http://fineuploader.com/) jQuery 示例正常工作。基本上它只是一种将文件从客户端页面上传到网络服务器的方法。

[在项目的 GitHub 页面](https://github.com/valums/file-uploader/tree/master/server/ASP.NET%20MVC%20C#)上有一个关于如何在服务器端设置文件流的示例。

我如何从脚本中调用这个 HttpPost `endpoint`？简单的 jQuery 示例如下所示：

```
$(document).ready(function () {
      $('#jquery-wrapped-fine-uploader').fineUploader({
        request: {
          endpoint: 'WhatToWriteHere??'
        },
        debug: true
      });
    }); 
```

那你在里面输入`endpoint`什么？我想它会是类似的东西`Namespace.Namespace.ClassName.UploadMethod()`，但我一直在摆弄它，但无法让它工作。使用 Firebug 进行调试时，出现以下错误：

```
405 Method Not Allowed  
[FineUploader] xhr - server response received for 0
The HTTP verb POST used to access path '/FineUploaderTest/Uploadfolder' is not allowed. 
```

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T09:03:44.873

您可以编写一个[通用的 HttpHandler](https://stackoverflow.com/questions/2332579/what-is-generic-handler-in-asp-net-and-its-use)来处理文件上传：

```
public class UploadHandler : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        var request = context.Request;
        var formUpload = request.Files.Count > 0;

        var xFileName = request.Headers["X-File-Name"];
        var qqFile = request["qqfile"];
        var formFilename = formUpload ? request.Files[0].FileName : null;

        var filename = xFileName ?? qqFile ?? formFilename;
        var inputStream = formUpload ? request.Files[0].InputStream : request.InputStream;

        var filePath = Path.Combine(context.Server.MapPath("~/App_Data"), filename);
        using (var fileStream = File.OpenWrite(filePath))
        {
            inputStream.CopyTo(fileStream);
        }

        context.Response.ContentType = "application/json";
        context.Response.Write("{\"success\":true}");
    }

    public bool IsReusable
    {
        get { return true; }
    }
} 
```

接着：

```
$(document).ready(function () {
    $('#jquery-wrapped-fine-uploader').fineUploader({
        request: {
            endpoint: '/uploadhandler.ashx'
        },
        debug: true
    });
}); 
```

# parsing - 如何在 Clojure 中懒惰地解析大 XHTML 文件？

> ID：14333637
> 
> 赞同：11
> 
> 时间：2013-01-15T08:22:40.840
> 
> 标签：parsing, xhtml, clojure, html-parsing

我有一张大表的有效 XHTML 文件（100 兆字节的数据）。第一个 tr 是列（用于数据库），所有其他 tr 都是数据。它是整个文档中唯一的表，结构为 html->body->div->table。

如何在 Clojure 中以惰性方式解析它？

我知道[data.xml](https://github.com/clojure/data.xml)，但因为我是 Clj 初学者，所以我很难让它工作。特别是因为 REPL 在处理这么大的文件时非常慢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-15T08:39:34.923

`data.xml`docs 说它创建了一个文档的惰性树：[parse](https://github.com/clojure/data.xml/blob/master/src/main/clojure/clojure/data/xml.clj#L328)。我在当地查了一下，似乎是真的：

```
; Load libs
(require '[clojure.data.xml :as xml])
(require '[clojure.java.io :as io])

; standard.xml is 100MB xml file from here http://www.xml-benchmark.org/downloads.html
(def xml-tree (xml/parse (io/reader "standard.xml")))
(:tag xml-tree) => :site

(def child (first (:content xml-tree)))
(:tag child) => :regions

(dorun (:content xml-tree)) => REPL hangs for ~30 seconds on my computer because it tries to parse whole file 
```

# udp - 与 udp 数据包一起出现的 icmp 数据包

> ID：14333638
> 
> 赞同：-1
> 
> 时间：2013-01-15T08:22:41.547
> 
> 标签：udp

![在此处输入图像描述](../Images/ab18eb6f5742da16255384a262566b7f.png)

我正在从一台电脑向另一台电脑发送 udp 数据包。我正在接收 udp 数据包的 pc 上的 wireshark 上观察流量。我看到的一件有趣的事情是突然出现 icmp 数据包。然后它们消失并再次以循环方式出现。这可能是什么原因。难道我做错了什么。它会对我的 udp 接收性能产生什么不良影响。

还请找到从目标 pc 中获取的附加的wireshark 图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:14:24.663

ICMP 数据包是由其他主机创建的，因为 UDP 端口未打开。ICMP 数据包包括被丢弃的数据包的前 X 个字节，因此发送方可以读出受影响的会话。

# c# - 遵循接口并包含抽象方法的 C# 类

> ID：14333641
> 
> 赞同：0
> 
> 时间：2013-01-15T08:23:07.023
> 
> 标签：c#, .net, interface, abstract

我尝试实现以下目标：我有一个名为 IAxis 的接口，它强制我的类 TheAxis 具有某些方法。另外我想实现某种基于参数的抽象类。为了解释这一点，将其写在代码中：

```
class TheAxis : IAxis
{
     public TheAxis(){ }

     public void IMoveToPos(int pos) {} //This is forced by the Interface

} 
```

当调用此类的实例时，它应该能够选择要包含的方法，类似于虚拟方法，但不会覆盖现有方法，而是添加来自另一个类的已经编码的方法。我正在寻找这样的东西：

```
abstract class GateAxis
{
    public void CloseGate() { IMoveToPos(0); }
}

abstract class XAxis
{
    public void MoveToStart() { IMoveToPos(100); }
}

TheGateAxis = new Axis() as GateAxis; 
```

现在我希望能够使用 TheGateAxis.Closegate(); 但不是 TheGateAxis.MoveToStart();

如果我打电话

```
TheXAxis = new Axis() as XAxis; 
```

我希望能够使用 TheXAxis.MoveToStart(); 但不是 TheXAxis.CloseGate();

XAxis 或 GateAxis 中给出的方法不需要 TheAxis 中的任何方法，除了接口给出的一次。

有可能做这样的事情吗？根据实例化类时给定的参数向类添加方法？

我希望你能明白我正在努力做的事情，因为我很难解释。

最好的，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:36:46.380

好吧，如果您希望类与基类共享一些方法，并且其他方法是分开的，您可以这样做

```
//an interface (optional)
public interface IAxis {
   void MoveToPos(int pos);
}

public abstract class AxisBase : IAxis {
   public void MoveToPos(int pos) {
      //implementation
   }
}

//optionally you can do an IGateAxis interface, inheriting (or not) from IAxis
public interface IGateAxis : IAxis {
   void CloseGate();
}

//classes inheriting from AxisBase, implementing IGateAxis
public class GateAxis : AxisBase, IGateAxis {
   public void CloseGate() {
      MoveToPos(0);
   }
}
//another interface, not inheriting from IAxis
public interface IXAxis {
   void MoveToStart();
}

//another class inheriting from AxisBase
public class XAxis : AxisBase, IXAxis {
   public void MoveToStart() {
     MoveToPos(100);
   }
} 
```

用法

```
var gateAxis = new GateAxis();
gateAxis.CloseGate();
//and you can do
gateAxis.MoveToPos(250);

var xAxis = new XAxis();
xAxis.MoveToStart();
//and you can do
xAxis.MoveToPos(40); 
```

使用 IGateAxis 接口

```
IGateAxis gateAxis = new GateAxis();
gateAxis.CloseGate();
gateAxis.MoveToPos(1); 
```

使用 IXAxis 接口

```
 IXAxis xAxis = new XAxis();
 gateAxis.MoveToStart();
 //but you can't do 
 //gateAxis.MoveToPos(10);
//as IXAxis doesn't know about this method. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:34:28.343

```
 // super class
    abstract class TheAxis : IAxis {
        public TheAxis() { }

        public void IMoveToPos(int pos) { } //This is forced by the Interface

    }

    abstract class GateAxis : TheAxis {
        public virtual void CloseGate() { IMoveToPos(0); }
    }

    abstract class XAxis : TheAxis {
        public virtual void MoveToStart() { IMoveToPos(100); }
    } 
```

现在，如果您从中派生一个类，`GateAxis`则只能访问接口方法和`GateAxis`. 也一样`TheAxis`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:36:36.030

我认为解决这个问题的最好方法是使用接口和单个（基）类。

```
public interface IAxis {
    void MoveToPos(int pos);
}

public interface IGateAxis {
    void CloseGate();
}

public interface IXAxis {
    void MoveToStart();
}

public class TheAxis : IAxis, IGateAxis, IXAxis {
     public TheAxis(){ }
     void IAxis.MoveToPos(int pos) {} 
     void IGateAxis.CloseGate() { ((IAxis)this).MoveToPos(0); }
     void IXAxis.MoveToStart() { ((IAxis)this).MoveToPos(100); }
}

IGateAxis gateAxis = new ThisAxis();
gateAxis.CloseGate();

IXAxis xAxis = new ThisAxis();
xAxis.MoveToStart(); 
```

通过这种方式，您可以指定哪些方法可用于某些类型的轴。此外，您可以通过工厂模式甚至单个静态方法强制创建轴，以方便创建轴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T08:55:24.583

假设您有超过 3 种方法，我看到的最简单的方法是简单地创建一个充当责任链的代理：

```
public class AxisProxy : IAxis
{
    public AxisProxy(params IAxis[] implementations) {
        this.implementations = implementations;
    }

    private IAxis[] implementations;

    public virtual void CloseGate()
    { 
        foreach (var item in implementations) 
        {
            try { item.CloseGate(); } catch (NotSupportedException) {}
        }
        throw new NotSupportedException();
    }

    public virtual void MoveToStart() 
    {
        foreach (var item in implementations) 
        {
            try { item.MoveToStart(); } catch (NotSupportedException) {}
        }
        throw new NotSupportedException();
    }
} 
```

您可以创建 Axis 的基本实现，以确保所有默认实现都抛出异常。派生的实现实现特定的功能。

然后，您只需调用即可使用它

```
IAxis myAxis = new AxisProxy(new GateAxis(), new XAxis()); 
```

注意：在这种情况下，我会认真考虑将类型更改为“布尔”；如果你经常调用这些方法，异常性能会增加......此外，由于 NotSupportedException 不会改变，你可以保留每个方法列表来删除抛出的实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T08:30:45.407

动态**添加**和**删除**方法不是您可以在 "normal" 中执行的操作`C#`。没有任何 OOP 模式*可以*模拟这一点。

您**可以**做的是使用[ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)来实现您想要实现的目标*。*

> 表示一个对象，其成员可以在运行时动态添加和删除。

*顺便说一句，我不鼓励在静态类型语言*领域中使用它，所以稍微修改一下您的架构并且不要使用`C#`.

# azure - 将“烘焙”的 Orchard CMS 发布到 Azure CloudService

> ID：14333642
> 
> 赞同：3
> 
> 时间：2013-01-15T08:23:07.597
> 
> 标签：azure, orchardcms, orchardcms-1.6

我正在使用 Orchard CMS 1.6 并将其部署到 Azure 云服务。我已按照将 Orchard 部署到 Windows Azure 文档中的步骤进行操作（[http://docs.orchardproject.net/Documentation/Deploying-Orchard-to-Windows-Azure](http://docs.orchardproject.net/Documentation/Deploying-Orchard-to-Windows-Azure)）

但是，它在烹饪收据期间一次又一次地出现超时错误（已尝试使用小型 VM）

我的想法是，不是在初始设置期间运行设置过程，而是想将 Orchard 的“烘焙”就绪副本（并将数据库脚本手动部署到 SQL Azure）部署到云服务。

我尝试使用 Orchard.Azure.sln 并使用 ClickToBuildAzurePackage.cmd 再次构建包，但现在我遇到了错误

“找不到类型‘Orchard.Environment.Configuration.AzureBlobTenantManager’。它可能需要程序集限定，例如“MyType，MyAssembly”。”

有什么想法或经验可以分享吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:10:12.403

最后我让它在云服务上工作。

我的想法是在我的本地机器上而不是在 Azure 本身上烹饪食谱，以避免超时问题。因此，我们将在 Azure 存储和数据库架构中拥有现成的熟结构。

然后，使用 ClickToBuildAzurePackage.cmd 构建包并将包部署到 Azure 云服务。该实例应跳过设置过程，因为 Azure 存储包含所需的信息。

以下是我的解决方法：

1.  从 Orchard Codeplex下载[Orchard.Source.1.6.zip](http://orchard.codeplex.com/releases/view/90325)
2.  解压并打开 Orchard.Source.1.6\src\Orchard.Azure\Orchard.Azure.sln
3.  打开解决方案并编辑您的 Orchard.Azure.Web 角色，将数据连接设置和诊断更改为您的生产/开发存储帐户。
4.  在 SQL Azure 中创建一个空数据库（假设您使用的是 SQL Server）
5.  按 F5 启动应用程序并输入设置信息以开始烹饪食谱。
6.  您可以在浏览器中进行果园烹饪。
7.  果园煮熟后。检查您的 Azure 存储（以 CloudBerry 为例），您应该有以下文件夹：媒体站点 wad-control-container wad-iis-logfiles
8.  按照将[Orchard 部署到 Windows Azure中的说明进行操作](http://docs.orchardproject.net/Documentation/Deploying-Orchard-to-Windows-Azure)
9.  您将运行 Orchard 实例而无需启动设置过程

# c++ - 如何使用 OpenAL 录制声音

> ID：14333645
> 
> 赞同：0
> 
> 时间：2013-01-15T08:23:28.003
> 
> 标签：c++, audio, openal

我需要用 MMSYSTEM 录制声音，为此我使用的是 OpenAL 库。录制后，我会将声音缓冲区发送到网络（VoIP）。首先，我编写了一些代码来录制声音并将其写入文件。但我的代码无法正常工作。例如，如果我用 Wavosaur 打开我的文件，我只会看到白噪声。

```
#include <OpenAL/al.h>    // OpenAL header files
#include <OpenAL/alc.h>
#include <boost\thread.hpp>
#pragma comment (lib, "OpenAl32.lib")
#include <fstream>
#include <iostream>
#include <stdio.h>
bool key = true;
using namespace std;
void ThreadFunc()
{
    int a =1;
    cin>>a;
    if (a==0)
    {
        key = false;
    }
}

int main()
{
    ofstream of;
    of.open("FILE1");
    boost::thread MyThread(&ThreadFunc);
    ALCdevice *dev[2];
    ALCcontext *ctx;
    ALuint source, buffers[3];
    char data[5000];
    ALuint buf;
    ALint val;

    float ttotal;
    unsigned int ccount;
    long int c1ount;
    c1ount =0;

    dev[0] = alcOpenDevice(NULL);
    ctx = alcCreateContext(dev[0], NULL);
    alcMakeContextCurrent(ctx);

    alGenSources(1, &source);
    alGenBuffers(3, buffers);

    /* Setup some initial silent data to play out of the source */
    alBufferData(buffers[0], AL_FORMAT_MONO16, data, sizeof(data), 22050);
    alBufferData(buffers[1], AL_FORMAT_MONO16, data, sizeof(data), 22050);
    alBufferData(buffers[2], AL_FORMAT_MONO16, data, sizeof(data), 22050);
    alSourceQueueBuffers(source, 3, buffers);

    /* If you don't need 3D spatialization, this should help processing time */
    alDistanceModel(AL_NONE); 

    dev[1] = alcCaptureOpenDevice(NULL, 22050, AL_FORMAT_MONO16, sizeof(data)/2); //22050 mean 22.050 samples per     second. or 44100 for 44.1 per second.

    /* Start playback and capture, and enter the audio loop */
    alSourcePlay(source);
    alcCaptureStart(dev[1]);    //starts ring buffer

    while(key) 
    {
        /* Check if any queued buffers are finished */
        alGetSourcei(source, AL_BUFFERS_PROCESSED, &val);
        if(val <= 0)
           continue;

       /* Check how much audio data has been captured (note that 'val' is the
        * number of frames, not bytes) */
        alcGetIntegerv(dev[1], ALC_CAPTURE_SAMPLES, 1, &val);

        /* Read the captured audio */
        alcCaptureSamples(dev[1], data, val);

          //***** Process/filter captured data here *****//

        //for (int ii=0;ii<val;++ii) {
        //  data[ii]*=0.1; // Make it quieter
        //}
    //***** end Process/filter captured data here *****//

      /* Pop the oldest finished buffer, fill it with the new capture data,
       then re-queue it to play on the source */
        alSourceUnqueueBuffers(source, 1, &buf);
        alBufferData(buf, AL_FORMAT_MONO16, data, val*2 /* bytes here, not
        frames */, 22050);
        alSourceQueueBuffers(source, 1, &buf);
        of.write(data, val*2);
        /* Make sure the source is still playing */
        alGetSourcei(source, AL_SOURCE_STATE, &val);

        if(val != AL_PLAYING)
        {

            alSourcePlay(source);
        }
    }

    cout<< "stop\n";

    of.close();
/* Shutdown and cleanup */
    alcCaptureStop(dev[1]);
    alcCaptureCloseDevice(dev[1]);

    alSourceStop(source);
    alDeleteSources(1, &source);
    alDeleteBuffers(3, buffers);
    alDeleteBuffers(1, &buf);

    alcMakeContextCurrent(NULL);
    alcDestroyContext(ctx);
    alcCloseDevice(dev[0]); 

    return 0;
} 
```

请帮助我，或者如果您有工作示例，请给我这个。编辑后

```
 while (key) {
        alcGetIntegerv(device, ALC_CAPTURE_SAMPLES, (ALCsizei)sizeof(ALint), &sample);

        alcCaptureSamples(device, (ALCvoid *)buffer, sample);
       if (sample!=0)
        {
            cout<<samplenotzero++<<endl;
            f1.write(buffer, sample);
        }

        // ... do something with the buffer 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:59:29.610

您的问题似乎与[此](https://stackoverflow.com/questions/3056113/recording-audio-with-openal)非常相似。我认为，如果您遵循那里给出的建议，您应该一切顺利。干杯！

# linux - Spring roo 仅在由 root 运行时才有效

> ID：14333648
> 
> 赞同：1
> 
> 时间：2013-01-15T08:23:52.843
> 
> 标签：linux, spring-roo

我已经使用以下说明在 Ubuntu Linux 12.04 上安装了 spring roo 版本 1.2.3.RELEASE：http: [//static.springsource.org/spring-roo/reference/html/intro.html#intro-installation](http://static.springsource.org/spring-roo/reference/html/intro.html#intro-installation)

然后我创建一个 empry 目录并尝试按照教程中的说明启动 roo：http: [//static.springsource.org/spring-roo/reference/html/beginning.html#beginning-step-1](http://static.springsource.org/spring-roo/reference/html/beginning.html#beginning-step-1)

但我得到这个错误：

> java.lang.Exception：无法创建捆绑缓存锁定文件：java.io.FileNotFoundException：/usr/share/roo/cache/cache.lock（权限被拒绝）

事实上，我的用户没有写入该文件的权限，它按预期归根用户所有，如果我运行`sudo roo`一切似乎都正常。安装说明是否遗漏了有关权限的一些重要部分？对 roo 还不太了解，我宁愿不以 root 身份运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T05:46:19.400

您不能只授予您的用户（或组）对 roo 目录（和子目录）的写入权限吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:40:17.910

为什么不将 Roo 安装在允许使用的路径中？例如，在您的家中：~/Applications/spring-roo-1.2.3.RELEASE

# javascript - 获取另一个网页的高度

> ID：14333649
> 
> 赞同：0
> 
> 时间：2013-01-15T08:23:53.977
> 
> 标签：javascript, jquery, html

我正在使用以下代码：

```
 $("#galleries").load("letters/index.php");
  $(function(){
  $('#galleries').hide().fadeIn(1500);
  }); 
```

一切正常。我的问题是，我得到了大约 8 个这样的脚本，每当我切换 div 的内容时，它并没有那么顺利，首先，它清除了 DIV 并让我看到了大约 0.7 秒，之后，它会在一秒钟内加载所有内容，这真的让我感到不安。

我想到了一个解决方案，我将获取我要加载的页面的高度，然后将 DIV 高度设置为该高度，然后加载信息。它会起作用吗？因为， LOAD 函数会从 div 中删除所有内容，它也会删除 height 属性吗？

一般来说，这就是我试图实现的目标：

```
 //GET TARGET'S HEIGHT
 //SET #galleries TO THAT HEIGHT
 $("#galleries").load("letters/index.php");
  $(function(){
 $('#galleries').hide().fadeIn(1500);
 }); 
```

我不知道如何获取目标的高度并设置它。但无论如何，它会起作用吗？或者也许有人对我有另一种解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:42:04.477

您没有使用完整的回调，`load()`它允许您在加载内容**后运行代码。**

尝试这样的事情：

```
$(function(){
/* hide first, then load*/
 $('#galleries').hide().load("letters/index.php", function(){
      /* new content now exists*/
      $(this).slideDown()/* or fadeIn() or any other effect*/
  });
}); 
```

`SlideDown`不依赖于整体高度，因此会平滑地将其下方的内容向下移动

# iphone - iphone的旋转视图不占用整个屏幕

> ID：14333652
> 
> 赞同：1
> 
> 时间：2013-01-15T08:24:01.473
> 
> 标签：iphone, view, rotation

我使用 CGAffineTransformMakeRotation 旋转了一个视图。（[iPhone - 只允许在一个视图控制器上横向显示](https://stackoverflow.com/questions/2144520/iphone-allow-landscape-orientation-on-just-one-viewcontroller)）

正如您在下面看到的，图像的左侧和右侧都有白色区域。
我希望图像占据黑色背景的整个空间。（至少在一维，宽度或高度）

![在此处输入图像描述](../Images/8d2bf546e198e25fb264ccd2f60cc0d3.png)

以下是完整代码

```
- (void) viewDidLoad
{
    [super viewDidLoad];

    self.view.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
    self.view.backgroundColor = [UIColor blackColor];

    self.imageView.backgroundColor = [UIColor blackColor];
    self.imageView.opaque = NO;
    self.imageView.contentMode = UIViewContentModeScaleAspectFit;
    self.imageView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth |
        UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin;

    [self.imageView setImageWithURL:[NSURL URLWithString:self.jsonAlbumImage.url_image
                                           relativeToURL: [NSURL URLWithString:@URL_BASE]]
                   placeholderImage: [GlobalHelper placeHolderImage]];

    [self.view addSubview: self.imageView];

}

- (void)didRotate:(NSNotification *)notification {
    UIDeviceOrientation orientation = [[notification object] orientation];

    if (orientation == UIDeviceOrientationLandscapeLeft) {
        [self.view setTransform:CGAffineTransformMakeRotation(M_PI / 2.0)];
    } else if (orientation == UIDeviceOrientationLandscapeRight) {
        [self.view setTransform:CGAffineTransformMakeRotation(M_PI / -2.0)];
    } else if (orientation == UIDeviceOrientationPortraitUpsideDown) {
        [self.view setTransform:CGAffineTransformMakeRotation(M_PI)];
    } else if (orientation == UIDeviceOrientationPortrait) {
        [self.view setTransform:CGAffineTransformMakeRotation(0.0)];
    }
} 
```

- 编辑 -

最终对我有用的东西..不知道为什么修改有效..任何解释都会很棒！

```
 UIDeviceOrientation orientation = [[notification object] orientation];

    CGAffineTransform t;
    CGRect rect;
    if (orientation == UIDeviceOrientationLandscapeLeft) {
        t = CGAffineTransformMakeRotation(M_PI / 2.0);
        rect = CGRectMake(0,0,480,320);
    } else if (orientation == UIDeviceOrientationLandscapeRight) {
        t = CGAffineTransformMakeRotation(M_PI / -2.0);
        rect = CGRectMake(0,0,480,320);
    } else if (orientation == UIDeviceOrientationPortraitUpsideDown) {
        t = CGAffineTransformMakeRotation(M_PI);
        rect = CGRectMake(0,0,320,480);
    } else if (orientation == UIDeviceOrientationPortrait) {
        t = CGAffineTransformMakeRotation(0.0);
        rect = CGRectMake(0,0,320,480);
    }
    else
        return; // looks like there are other orientations than the specified 4

    [self.view setTransform:t];
    self.view.bounds = rect; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:01:37.297

在`- (void)didRotate:(NSNotification *)notification`中，您需要重新布局视图，以便它们占据所有可用空间。你可以这样做：

```
- (void)didRotate:(NSNotification *)notification {
  UIDeviceOrientation orientation = [[notification object] orientation];

  CGAffineTransform t;
  if (orientation == UIDeviceOrientationLandscapeLeft) {
    t = CGAffineTransformMakeRotation(M_PI / 2.0);
  } else if (orientation == UIDeviceOrientationLandscapeRight) {
    t = CGAffineTransformMakeRotation(M_PI / -2.0);
  } else if (orientation == UIDeviceOrientationPortraitUpsideDown) {
    t = CGAffineTransformMakeRotation(M_PI);
  } else if (orientation == UIDeviceOrientationPortrait) {
    t = CGAffineTransformMakeRotation(0.0);
  }

  CGPoint screenCenter = CGPointMake([UIScreen mainScreen].bounds.width/2,[UIScreen mainScreen].bounds.height/2);
  self.view.center = CGPointApplyAffineTransform(screenCenter, t);
  self.view.bounds = CGRectApplyAffineTransform([UIScreen mainScreen].bounds, t);
  [self.view setTransform:t];

} 
```

在哪里 ：

> CGRectApplyAffineTransform
> 
> 将仿射变换应用于矩形。
> 
> ```
>  CGRect CGRectApplyAffineTransform (
>            CGRect rect,
>            CGAffineTransform t
>          ); 
> ```

也尝试删除这一行：

```
self.view.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth; 
```

如果您不打算使用自动旋转，则不需要它，我担心它可能会与您自己设置视图框架发生冲突。这只是一个假设，以解释您没有看到视图框架变化的事实。

编辑：

> 我很想知道这个转换的东西是做什么的

好吧，变换正在旋转。

旋转相对于用作枢轴的锚点；发生的情况是，如果锚点不在正在旋转的视图的中间，那么视图也会被平移（想象一下围绕顶点的旋转）。

因此，设置界限以使事情变得均匀是正确的；确实，我只是在建议以下几行：

```
 self.view.center = CGPointApplyAffineTransform(screenCenter, t);
  self.view.bounds = CGRectApplyAffineTransform([UIScreen mainScreen].bounds, t); 
```

但可能对中心和边界应用相同的变换的想法并没有得到祝福。（这也是为什么我要求一些痕迹，看看发生了什么:-)

# java - 一个简单的soap“rpc编码”调用的Axis2依赖项

> ID：14333654
> 
> 赞同：0
> 
> 时间：2013-01-15T08:24:03.713
> 
> 标签：java, axis2

我们需要使用“RPC 编码”样式访问过时的肥皂网络服务。不幸的是，现代工具（例如 JAX-WS）不支持这一点，因此我们需要使用 Axis2 库。

我已经使用 maven 插件创建了存根，如下例所示： [使用 XmlBeans 生成的类时出错](https://stackoverflow.com/questions/8518301/error-when-using-xmlbeans-generated-classes)

但是，当我调用 web 服务时，它抱怨缺少依赖项。我可以使用试错法添加缺少的依赖项（每次我收到 ClassNotFoundException 时，我都会找出 jar 并在 pom 文件中添加依赖项），但这不是一个好主意。

我查看了 Axis2 文档，但没有找到有关简单soap 调用所需依赖项的信息。我如何知道在我的情况下我需要的最小依赖集是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:35:46.923

使用[MAVEN](http://maven.apache.org/)，它将以优化的方式自动解决您的依赖关系。将以下内容添加到您的 pom.xml

```
<dependencies>
    <dependency>
        <groupId>org.apache.axis2</groupId>
        <artifactId>axis2</artifactId>
        <version>1.5.1</version>
    </dependency>
</dependencies> 
```

# gcc - gcc 没有正确比较双精度类型变量？

> ID：14333655
> 
> 赞同：0
> 
> 时间：2013-01-15T08:24:03.720
> 
> 标签：gcc, floating-point, double

我什至不确定我是在问一个问题，这次我找到了一种“迂回”的方式，但是……我花了几天时间才意识到这是问题所在，而且……好吧，其他时候我可能不会能够绕过它......还有其他人来过这个吗？比较实际上相等的双精度类型变量时，结果是“>”...

```
 printf("compare: %ld ?? %ld\n", (double)( radii(nowX,nowY)*irange2 ),(double)(Rad2*irange2)); getchar();
 if( (double)(radii(nowX,nowY)*irange2)<(double)(Rad2*irange2) ) printf("*** < ***\n"); 
 if( (double)(radii(nowX,nowY)*irange2)>(double)(Rad2*irange2) ) printf("*** > ***\n");
 if( (double)(radii(nowX,nowY)*irange2)==(double)(Rad2*irange2) ) printf("*** == ***\n")
 printf("SECOND = %d\n", ((double)(radii(nowX,nowY)*irange2))<= ( (double)(Rad2*irange2) 
```

输出：

```
compare: 1509949.440000 ?? 1509949.440000
*** > ***
SECOND = 0 
```

* * *

```
 printf("compare: %ld ?? %ld\n", (long)( radii(nowX,nowY)*irange2 ), (long)(Rad2*irange2)); getchar();
 if( (long)(radii(nowX,nowY)*irange2)<(long)(Rad2*irange2) ) printf("*** < ***\n");
 if( (long)(radii(nowX,nowY)*irange2)>(long)(Rad2*irange2) ) printf("*** > ***\n"); 
 if( (long)(radii(nowX,nowY)*irange2)==(long)(Rad2*irange2) ) printf("*** == ***\n")
 printf("SECOND = %d\n",  ((long)(radii(nowX,nowY)*irange2))<= ( (long)(Rad2*irange2) ) ); getchar(); 
```

输出：

```
compare: 1509949 ?? 1509949

*** == ***
SECOND = 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:13:49.337

这里的问题是浮点运算用于进行近似运算，因此它得到的结果有各种错误，并且您没有显示数字的完整值。

当完全显示时，数字看起来不相等。

比较平等不是这里的有罪操作。当输入不正确时，几乎所有函数都无法给出正确的结果。例如，如果您计算一个值的平方根，如果计算准确，则该值将为零或正，但由于先前的舍入误差而略微为负，那么您将获得取负数平方根的异常。

在舍入近似结果、减去近似结果（以增加相对误差的幅度而臭名昭著）和其他函数时，也会出现类似的问题。**所有**带有浮点的运算，而不仅仅是比较相等性，都应该考虑到结果是近似的事实（除非设计得非常仔细）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:34:04.027

发生这种情况是因为，根据计算，双精度值可能会略有不同。因此不建议检查是否相等。相反，检查两个双打是否*非常*接近。另请参阅[此链接](http://www.parashift.com/c++-faq/floating-point-arith.html)以获取说明。

**编辑：**只是为了澄清这一点：对于所有浮点类型都是如此，因为这是它们存储方式所固有的。

# image - 使用 NFC 在 Windows Phone 中共享图像

> ID：14333661
> 
> 赞同：1
> 
> 时间：2013-01-15T08:24:41.300
> 
> 标签：image, windows-phone-8, nfc

我正在进行图像编辑项目。它是一个基于 WP8 的项目。我想要的是应用程序接受图像作为来自 NFC（其他设备）的输入。我想要一个按钮点击事件，点击它可以获得图像。其次，我还希望在编辑图片后，我可以使用 NFC 共享它。我会使用应用程序栏并提供一个图标来共享图像。需要帮助。NFC 中完全没有声音！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:13:08.950

请参阅我之前对 NFC 文件传输主题的类似问题的回答 @ [WP 8 NFC 文件传输](https://stackoverflow.com/questions/13500992/wp-8-nfc-file-transfer/13501880#13501880)

简短的版本是 NFC 不适合文件传输，但您可以使用 NFC 打开其他 WP8/Win8 设备的套接字。

# android - 将android listview大小固定为特定长度

> ID：14333666
> 
> 赞同：0
> 
> 时间：2013-01-15T08:25:10.467
> 
> 标签：android, listview, layout, android-relativelayout

我创建了一个布局文件。里面还有其他布局。其中还有一个列表视图。我给它固定高度。它在我的屏幕上工作正常，但是当我们将它用于其他屏幕尺寸时，它没有完全显示。它如何适用于所有尺寸的设备。代码如下。

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:tools="http://schemas.android.com/tools"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
     android:background="@drawable/bg" >

    <include
        android:id="@+id/mainScreenHeader"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        layout="@layout/main_screen_header" />

    <include
        android:id="@+id/mainScreenListHeader"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/mainScreenHeader"
        layout="@layout/main_screen_list_header" >
    </include>

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="270dp"
        android:layout_below="@+id/mainScreenListHeader"
        android:cacheColorHint="#00000000"
        android:drawSelectorOnTop="false" />

     <include
        android:id="@+id/mainScreenFilterClient"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/list"
        android:layout_marginTop="10dp"
        layout="@layout/main_screen_filter_client" >
    </include>

    <include
        android:id="@+id/footer"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/mainScreenFilterClient"
        android:layout_marginTop="10dp"
        layout="@layout/footer" >
    </include>
    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:32:35.547

您必须根据设备屏幕尺寸预先确定行数，然后计算每行的高度。您不应明确给出 android:layout_height="270dp"。您可以获得屏幕的高度并确定列表视图中的行数可以参考：

```
 private int retrieveDimensions() {
        int noOfRows= 0;
        int screenSize = getResources().getConfiguration().screenLayout &
                Configuration.SCREENLAYOUT_SIZE_MASK;

        switch(screenSize) {
        case Configuration.SCREENLAYOUT_SIZE_LARGE:
        case Configuration.SCREENLAYOUT_SIZE_XLARGE:
            noOfRows= 5;
            break;
        case Configuration.SCREENLAYOUT_SIZE_NORMAL:
            noOfRows= 4;
            break;
        case Configuration.SCREENLAYOUT_SIZE_SMALL:
            noOfRows= 3;
            break;
    } 
```

# c++ - 欧拉相机，在相机本地系统中围绕 x 轴旋转

> ID：14333667
> 
> 赞同：0
> 
> 时间：2013-01-15T08:25:12.013
> 
> 标签：c++, math, game-engine, transformation

我有通过欧拉角和位置保持她的方向的相机类。像这样的东西：

```
float m_x;
float m_y;
float m_z;

Vector4 m_pos; 
```

我想在空间上自由移动这个相机。当用户上下移动鼠标时，相机必须在她自己的坐标系中围绕 x 轴旋转。但我只想保持这三个角度和位置，仅此而已。

所以算法看起来像这样：

1.  查找相机本地系统轴（u，v，n）
2.  在角度 alpha 上绕 u 轴旋转
3.  找到 (1, 0, 0), (0, 1, 0), (0, 0, 1) 周围的角度，这些角度响应围绕 u 轴的角度 alpha 的旋转
4.  将它们添加到 m_x、m_y、m_z

问题是：如何计算默认坐标系中的旋转角度（我的意思是在 (1, 0, 0)、(0, 1, 0) 和 (0, 1, 0) 和 (0, 0, 1) 中）回答本地相机坐标中的旋转角度系统？

![描述](../Images/4dab3a04214813f59c48f3e3512b0a8d.png)

或者对于这个问题可能存在更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:44:43.753

我正在回答[您评论](https://stackoverflow.com/questions/14333667/euler-camera-rotation-around-x-axis-in-camera-local-system#comment19923471_14333667)中的简洁问题：

> 如何计算一个坐标系中的旋转以响应另一个坐标系中的旋转？

您可以通过应用合适的变换矩阵来变换坐标系之间的旋转。这又可以从欧拉角中计算出来，参见[维基百科的转换公式部分](http://en.wikipedia.org/wiki/Rotation_formalisms_in_three_dimensions#Conversion_formulae_between_formalisms)。

根据您的应用程序，您可能需要也可能不需要考虑翻译。据我了解您的问题，您可以专注于每个转换的旋转部分。

# cocos2d-iphone - cocos2d场景释放和ccb节点

> ID：14333670
> 
> 赞同：0
> 
> 时间：2013-01-15T08:25:21.503
> 
> 标签：cocos2d-iphone, ccscene

我有一个简单的方法`CCScene`，它只包含一个从 CocosBuilder 模板创建的节点`[CCBReader nodeGraphWithFile:]`。

到目前为止，我没有`dealloc`在场景的方法中释放 ccb 节点，因为我希望它会自动释放。但是在分配分析器中，我注意到如果我在`CCDirector`.

如果我实际上是场景方法`release`中的节点，这个内存泄漏就会消失。`dealloc`

为什么我需要释放节点，尽管我没有保留/初始化它？有什么我误解了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:46:42.800

通过这个创建的对象会发生什么？

```
[CCBReader nodeGraphWithFile:] 
```

如果您将其分配给保留属性，它将被保留；所以你需要明确地释放它。例如：

```
self.nodeGraph = [CCBReader nodeGraphWithFile:...]; 
```

如果`nodeGraph`声明为保留属性，则在中创建的自动释放对象`[CCBReader nodeGraphWithFile:]`将被该属性保留，您需要在`dealloc`.

*将此与不使用*属性保持对节点对象的引用并将其直接添加到节点层次结构进行对比：

```
[self addChildNode:[CCBReader nodeGraphWithFile:...]]; 
```

在这种情况下，您不需要进行任何显式释放，因为您没有保留自己的对象。

# git - 如何在 Git 中提取和删除合并的分支？

> ID：14333671
> 
> 赞同：4
> 
> 时间：2013-01-15T08:25:25.217
> 
> 标签：git, version-control, branching-and-merging, feature-branch

我有 7 个影响相同文件的分支，都已通过辅助分支合并到主分支中。其中一个分支不打算合并，因为它不稳定 - 我可以撤消该单个分支所做的更改吗？

假设我的存储库如下所示：

```
master  A - B - - - - E - - G - - - J - K
b1          |          `- F - - - I´  
b2          |                    / 
b3          |` - C - - - - - H -´
b4           ` - - D - - - -´ 
```

现在D在主人身上。我想删除它（但将其保留在 b4 分支中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:36:23.300

你应该能够恢复 H.

```
git revert H 
```

但是，您将无法修复它并在修复后重新合并它。D 只能通过对第一次还原进行还原来重做。

根据您的工作流程，在不包含 b4 的情况下再次进行合并可能会更容易。

我在这里的帖子中解决了这类问题（或谷歌“每个功能的分支”）：[http ://dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

摆脱坏分支是这个工作流程的核心。我希望它可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T10:28:37.543

读[这个](https://www.kernel.org/pub/software/scm/git/docs/howto/revert-a-faulty-merge.txt)。

本质上，您想用类似的东西撤消合并

```
git revert -m 1 H 
```

创建提交`L`，然后在以后该提交再次生效时

```
git checkout master &&
    git revert L &&
    git checkout b3 &&
    git merge b4 
```

并再次合并它。

在我的示例中，我已经完成了 revert on `master`，但我建议`git revert H`在最低级别的分支上进行初始更改，这样更改没有意义 - 如果只是为了避免它成为 master 的一部分，那么在该级别进行，但是如果您不希望它影响 b3（或任何其他分支）然后在 b3 上执行此还原 - 以及随后的还原-还原。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T00:01:54.050

如果一切都在您的本地仓库中（没有被推送到任何地方），我只需将分支重置为合并之前的状态并再次进行合并。

**如果它被推送（即您不想重置）**：在 b3 上恢复您的合并提交（H）（这将创建一个新的提交 - 比如说 Q）并再次将 b3 合并到 master 中（因此您合并此提交以恢复更改, 由 b4) 带来。如果您想稍后将 b4 合并到 master 中，您需要：将 b3 合并到 b4（这会将 Q 带入 b4），在 b4 上恢复 Q（因此您恢复恢复） - 现在可以再次处理 b4 并合并到稍后在某个时候掌握

**如果它只是一个 D commit**，您不想在 master 中拥有，您可以执行以下操作：

*   结帐 b4
*   恢复 D （这将创建一个新的提交 - 比如说，U）
*   将 b4 合并到 master 中（或者只挑选 U 提交，删除不需要的更改）。

稍后，您可以恢复 b4 上的 U 提交（即带回在 D 中所做的更改）并再次将 b4 合并到 master 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-26T00:51:50.703

假设没有推动：

```
 git checkout master -b old-ref 
```

以防万一我们需要它......然后：

> ```
>  git checkout <old correct sha1> -b TEMP
>     git branch -D master
>     git checkout master 
> ```
> 
> 应该得到原产地/主人
> 
> ```
>  git rebase -i TEMP 
> ```

现在您可以正确（或不正确）执行未完成的合并。如果进行了推送，并且您无法控制它（意味着“从头开始”重建它），您将不得不恢复错误的提交。

# java - 数字/货币格式

> ID：14333674
> 
> 赞同：0
> 
> 时间：2013-01-15T08:25:33.493
> 
> 标签：java, regex, currency

我确实有保加利亚货币的格式`+000000027511,00`。我想将此格式转换为`27511.00`，我已经尝试过并使用子字符串组合和正则表达式，是否有任何模式或正则表达式可以以更简化的方式进行？

我试过的实现，

```
String currency= "+000000027511"; // "[1234]" String
String currencyFormatted=currency.substring(1);
System.out.println(currencyFormatted.replaceFirst("^0+(?!$)", "")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:47:51.707

使用`Double.valueOf`+ `DecimalFormat.format`, or `DecimalFormat.parse + format`, 或者`BigDecimal`你可以这样做。

```
 // method 1 (parsing to Float)
  String s = "+000000027511,00".replace(",", ".");
  Double f = Double.valueOf(s);
  DecimalFormat df = new DecimalFormat("#########0.00");
  String formatted = df.format(f);
  System.out.println(formatted);

  // method 2 (parsing using Decimal Format)
  s = "+000000027511,00";
  DecimalFormat df2 = new DecimalFormat("+#########0.00;-#########0.00");
  Number n = df2.parse(s);
  df = new DecimalFormat("#########0.00");
  formatted = df.format(n);
  System.out.println(formatted);

  // method 3 (using BigDecimal)
  BigDecimal b = new BigDecimal(s.replace(",", "."));
  b.setScale(2, RoundingMode.HALF_UP);
  System.out.println(b.toPlainString()); 
```

将打印

```
27511.00
27511.00
27511.00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:38:49.400

像这样的东西：

```
String s = "+000000027511,00";
String r = s.replaceFirst("^\\+?0*", "");
r = r.replace(',', '.'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T08:44:32.940

尝试

```
 String s = "+000000027511,00";
    s = s.replace("+", "").replaceAll("^0+", "").replace(',', '.');
    System.out.println(s); 
```

# php - if else 条件在 php

> ID：14333678
> 
> 赞同：-8
> 
> 时间：2013-01-15T08:25:56.100
> 
> 标签：php

嗨，我在下面`code`使用`city value`从`database`--

```
<?php
//echo "SELECT city FROM tbl_city_master WHERE id = ".$rs->city.""
$getCityQuery = mysql_query("SELECT city FROM tbl_city_master WHERE id = ".$rs->city."");
    $resultSetCityQuery = mysql_fetch_assoc($getCityQuery);
?>
<? echo '<strong>City-</strong>' ?><? echo $resultSetCityQuery['city'];?> 
```

我只需要在条件下说不选择城市——`if else`我该如何实现该代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:35:48.423

您可以使用以下代码执行此操作：

```
$results_count = mysql_num_rows($resultSetCityQuery);
if ($results_count > 0) {
   // do something
} else {
   echo 'No city Choosen';
} 
```

或者您可以使用 mysql_fetch_assoc 并检查是否为假：

```
$results = mysql_fetch_assoc($resultSetCityQuery);
if ($results == false) {
  echo 'No city Choosen';
} else {
  // do somthing
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:28:36.383

```
if (count ($resultSetCityQuery) === 0) echo "No city choosen"
      else echo $resultSetCityQuery['city']; 
```

或者

```
if (empty ($resultSetCityQuery)) echo "No city choosen"
      else echo $resultSetCityQuery['city']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:29:05.640

强烈建议您停止使用 mysql_* 函数，因为它们将在即将发布的 php 版本中被弃用

您可以检查是否设置了mysql结果

```
if (count($resultSetCityQuery)>0) {
    echo $resultSetCityQuery['city'];
} else { 
    echo 'No city chosen';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T08:29:43.740

试试这个：

```
foreach($resultSetCityQuery as $city){
    if(isset($city['city']) && !empty($city['city'])){
           echo "<strong>City-</strong> {$city['city']} ";
    }   
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T08:30:17.647

如果可用，此代码将显示城市

```
<?php
$getCityQuery = mysql_query("SELECT city FROM tbl_city_master WHERE id = ".$rs->city."");
if ($getCityQuery)
    $resultSetCityQuery = mysql_fetch_assoc($getCityQuery);

?>
<?php
if (resultSetCityQuery != null)
echo "<strong>City-</strong>$resultSetCityQuery['city']";
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T08:36:57.683

试试下面的代码

```
 if(!!$resultSetCityQuery) {
        echo $resultSetCityQuery['city'];
    } else {
        echo "no data found";
    or 
        echo mysql_error($getCityQuery);//if there is an error ragarding to your sql statement
    } 
```

# php - 我需要从远程 url 的 html 中获取数据

> ID：14333680
> 
> 赞同：0
> 
> 时间：2013-01-15T08:25:59.907
> 
> 标签：php, html, regex, html-parsing, web-scraping

我需要一个接受这个 ul 的脚本：

```
<ul id="activitylist">
    <li class="activitybit forum_thread">
        <div class="avatar"> <img alt="secret team's Avatar" src="images/misc/unknown.gif" title="secret team's Avatar"> </div>
        <div class="content hasavatar">
        <div class="datetime"> <span class="date">Today,&nbsp;<span class="time">11:25pm</span></span> </div>
        <div class="title"> <a class="username" href="member.php/436070-secret-team">secret team</a> started a thread <a href="showthread.php/415403-Allow-VIDEO-Code-missing-in-settings">'Allow [VIDEO] Code' missing in settings</a> </div>
        <div class="views">0 replies | 0 view(s)</div>
    </li>
</ul> 
```

一ul中有10到15个子li。我需要线程有 0 个回复的每个子 li 的线程名称。我在上面发布了一个示例 li。所以对于那个例子，我需要这个文本：

```
'Allow [VIDEO] Code' missing in settings 
```

这个 div 有 0 个回复作为文本：

```
 <div class="views">0 replies | 0 view(s)</div> 
```

我有这个示例代码，但它不能正常工作。

```
<?php
$request_url = 'https://www.vbulletin.com/forum/activity.php';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $request_url); // The url to get links from
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); // We want to get the respone
$result = curl_exec($ch);

$sPattern = "/<li class=\"activitybit forum_thread\">(.*?)<\/li>/s";
preg_match_all($sPattern, $result, $parts);
$links = $parts[1];
foreach ($links as $link) {
    if (stripos($link, "0 replies") !== false) {
        echo $link . "<br>";
    }
}
curl_close($ch);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:30:51.050

这是一个可以解析**任何**类型 HTML 的正则表达式：

```
$regex = new DOMDocument;
$regex->loadHTML($html); 
```

现在严重了。DOMDocument 已解析您的所有 HTML。您现在可以使用[这些](http://php.net/manual/en/class.domdocument.php)函数来遍历标签并提取它们的属性和内容[。](http://php.net/manual/en/class.domnode.php)[但是使用名为DOMXPath](http://php.net/manual/en/class.domxpath.php)的伴生类要容易得多：

```
$xpath = new DOMXpath($regex);
foreach ($xpath->query("//ul[@id='activitylist']/li") as $li) {
    $view = $xpath->query(".//div[@class='views']", $li)->item(0);
    $link = $xpath->query(".//div[@class='title']/a", $li)->item(1);
    if (preg_match("/0 replies/", $view->nodeValue)) {
        echo $link->nodeValue . " (" . $link->getAttribute("href") . ")\n";
    }
} 
```

这将输出一些关于您的 HTML 不完美的警告以及以下内容：

```
'Allow [VIDEO] Code' missing in settings (showthread.php/415403-Allow-VIDEO-Code-missing-in-settings) 
```

您可以阅读有关使用的更多信息~~正则表达式~~[PHP 在这里](http://htmlparsing.com/php.html)解析 HTML 。[此处提供](http://msdn.microsoft.com/en-us/library/ms256086.aspx)了 XPath 示例的完整列表。

# java - Java - 如何将用空格分隔的整数读入数组

> ID：14333681
> 
> 赞同：6
> 
> 时间：2013-01-15T08:26:02.047
> 
> 标签：java, arrays, string, integer

我的项目有问题，因为我无法正确开始，即从用户读取一行由空格分隔的整数并将值放入数组中。

```
 System.out.println("Enter the elements separated by spaces: ");
    String input = sc.next();
    StringTokenizer strToken = new StringTokenizer(input);
    int count = strToken.countTokens();
    //Reads in the numbers to the array
    System.out.println("Count: " + count);
    int[] arr = new int[count];

    for(int x = 0;x < count;x++){
        arr[x] = Integer.parseInt((String)strToken.nextElement());
    } 
```

这就是我所拥有的，它似乎只读取数组中的第一个元素，因为当 count 被初始化时，由于某种原因它被设置为 1。

谁能帮我？以不同的方式执行此操作会更好吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-15T08:37:43.863

只需进行微小的更改即可使您的代码正常工作。*错误*在这一行：

```
String input = sc.next(); 
```

正如我在问题下的评论中指出的那样，它只读取下一个输入标记。请参阅[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28)。

如果您将其替换为

```
String input = sc.nextLine(); 
```

它会做你想做的事，因为[`nextLine()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)会消耗整行输入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T08:28:34.117

```
String integers = "54 65 74";
List<Integer> list = new ArrayList<Integer>();
for (String s : integers.split("\\s"))  
{  
   list.add(Integer.parseInt(s));  
}
list.toArray(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T08:30:20.833

有其他方法可以实现相同的目标。但是当我尝试你的代码时，它似乎工作正常。

```
StringTokenizer strToken = new StringTokenizer("a b c");
int count = strToken.countTokens();
System.out.println(count); 
```

它打印计数为 3。默认分隔符为“”

我不知道你是如何得到你的输入字段的。可能是它没有以字符串格式返回完整的输入。

我认为您正在使用 java.util.Scanner 来读取您的输入

来自扫描仪的 java 文档。

> Scanner 使用分隔符模式将其输入分解为标记，默认情况下匹配空格。然后可以使用各种 next 方法将生成的标记转换为不同类型的值。

因此输入只返回一个整数，其余的无人看管

读这个。[Scanner#next()](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29)，你应该使用[Scanner#nextLine()](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)代替

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T08:30:31.650

这将是一种更简单的方法 -

```
System.out.println("Enter the elements seperated by spaces: ");
String input = sc.nextLine();
String[] split = input.split("\\s+");
int[] desiredOP = new int[split.length];
int i=0;
for (String string : split) {
    desiredOP[i++] = Integer.parseInt(string);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-12T00:12:09.553

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.StringTokenizer;
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
.
.
.
StringTokenizer st = new StringTokenizer(br.readLine());
int K = Integer.parseInt(st.nextToken());
int N= Integer.parseInt(st.nextToken()); 
```

# python - 保护鼻子免受 Python 解释器崩溃

> ID：14333684
> 
> 赞同：3
> 
> 时间：2013-01-15T08:26:15.877
> 
> 标签：python, unit-testing, boost-python, nose, python-bindings

我们有一堆调用 Python C/C++ 绑定的测试。我们用鼻子运行这些测试：

```
nosetests myapp
.....
----------------------------------------------------------------------
Ran 5 tests in 0.009s 
```

有时，我们的绑定发生了错误，导致 Python 解释器崩溃，例如，在测试号 3 上：

```
test03_badcode (myapp.tests.test_badcode) ... Segmentation fault 
```

问题：从这种情况中恢复的最佳方法是什么？理想情况下，我宁愿鼻子自己处理这些崩溃~~，但我知道这是不可能实现的~~。我想到的下一个解决方案是记下测试并重新启动鼻子，现在跳过糟糕的测试。在我的示例中，这意味着执行测试 1、2、4 和 5，但**不**执行测试 3。有没有办法用鼻子以编程方式实现这一点？还有其他更好的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T13:48:49.480

像往常一样使用鼻子，有一个插件。 [Insulate](http://code.google.com/p/insulatenoseplugin/)将在单独的进程中运行每个测试。这会减慢速度，但可以保证一个测试中的崩溃不会影响其他测试。

# c++ - C++中的继承语法

> ID：14333694
> 
> 赞同：3
> 
> 时间：2013-01-15T08:27:18.280
> 
> 标签：c++, oop, inheritance

我了解 C++ 中的继承语法：

```
class DerivedClassName : public BaseClassName {} 
```

但是，在一个程序中，我发现了一个这样的字符串：

```
class ComplexNumberTest : public CppUnit::TestCase { 
```

我不明白这是什么意思。很明显，这`ComplexNumberTest`是子类，`CppUnit`但`TestCase`它们的作用是什么？

我认为这`CppUnit::TestCase`意味着类`TestCase`方法，`CppUnit`但`DerivedClassName`应该是方法的子类？

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T08:28:36.503

CppUnit 是命名空间，ComplexNumberTest 是 CppUnit 命名空间的 TestCase 的派生类。

在您的代码中，您以这种方式拥有 TestCase：

```
namespace CppUnit
{
  class TestCase
  {
    // blah blah
  };
} 
```

或者它 TestCase 可以是 CppUnit 内的嵌套类（类型），具有公共访问权限（感谢 PeterWood）

```
class CppUnit
{
public:
  class TestCase
  {
    // blah blah
  };
};

class ComplexNumberTest : public CppUnit::TestCase
{
   // also blah
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T08:30:23.703

CppUnit 是一个命名空间或 TestCase 是 CppUnit 中的一个嵌套类。

如果它是命名空间：您可以通过使用命名空间摆脱这种语法：

```
using namespace CppUnit;

class ComplexNumberTest : public TestCase { 
```

`Although, you don't usually want to put using namespace in a header file.`- 感谢@PeterWood 的评论

# ios - 电话间隙 HTML 应用程序可以与 asp.net Mvc Web 服务器建立会话吗

> ID：14333695
> 
> 赞同：0
> 
> 时间：2013-01-15T08:27:19.843
> 
> 标签：ios, asp.net-mvc, cordova, jquery-mobile

或者您是否需要在每个请求中使用带有授权令牌的无会话系统即 Web 服务请求？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:37:00.727

这取决于您将如何创建应用程序。没有什么能阻止你这样做。您可以将 loadUrl 引用到远程 Web 服务器，而不是使用 phonegap www 目录中的文件，因此会话将起作用。这是一个例子：

Phonegap + 安卓：

在您的主要活动类中，方法**onCreate**将**loadUrl**更改为：

**super.loadUrl("http://.../index.html");**

iPhone + Phonegap 是另一个故事，仍然可以做到。因为这里有很多变化，这里有一个教程：[http ://www.joeldare.com/wiki/open_a_url_in_phonegap](http://www.joeldare.com/wiki/open_a_url_in_phonegap)

还有一件事，您必须为 Phonegap 启用互联网连接。

当您使用 android 平台时，将此行添加到您的 AndroidManifest：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

必须在您的 html 文件中设置视口元标记。

还有一件事，如果您正在创建一个 iOS 应用程序，那么由于我的第一个解决方案，您的应用程序很有可能会被发布。在这种情况下，您需要使用某种 Web 服务请求来处理它。

# tfs - 基于简单文件差异的tfs合并

> ID：14333703
> 
> 赞同：0
> 
> 时间：2013-01-15T08:28:20.447
> 
> 标签：tfs, branching-and-merging

我可以根据简单的文件差异合并 TFS 中的分支吗？
例如，
1）我从 MAIN 分支创建一个 DEV 分支
2）修改 MAIN 分支中的一些代码
我想将 MAIN 分支与 DEV 代码合并。
基本上，TFS 不允许我进行这种合并，因为它会假设在 th DEV 中没有待处理的更改，尽管文件肯定会有所不同。我可以通过一些控制台命令或一些明智的 UI 操作来做到这一点吗？我可以控制这种合并吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:11:39.723

如果在您尝试从 Main 合并到 Dev 时 TFS 没有获取更改，并且您确定尚未发生合并，您可以在 Visual Studio 命令提示符下尝试以下操作。

`tf merge $/MyTeamProject/Main $/MyTeamProject/Dev /recursive /force`

值得检查的是合并尚未完成，查看 Dev 分支的历史记录以查看 main 是否已合并。仅仅因为文件不同并不意味着合并尚未发生.

# javascript - 如何使用转义字符使用 javascript 拆分方法？

> ID：14333706
> 
> 赞同：8
> 
> 时间：2013-01-15T08:28:27.280
> 
> 标签：javascript, regex

> **可能重复：**
> [如何在 js 中拆分字符串，但有一些例外](https://stackoverflow.com/questions/7329972/how-to-split-a-string-in-js-with-some-exceptions)

例如，如果字符串是：

```
abc&def&ghi\&klm&nop 
```

所需的输出是字符串数组

```
['abc', 'def', 'ghi\&klm', 'nop] 
```

请建议我最简单的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T08:51:35.020

你需要[`match`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)：

```
 "abc&def&ghi\\&klm&nop".match(/(\\.|[^&])+/g)
 # ["abc", "def", "ghi\&klm", "nop"] 
```

我假设您的字符串来自外部来源，而不是 javascript 文字。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-15T08:45:17.110

这是 JavaScript 中的一个解决方案：

```
var str = 'abc&def&ghi\\&klm&nop',
str.match(/([^\\\][^&]|\\&)+/g); //['abc', 'def', 'ghi\&klm', 'nop] 
```

它用于`match`匹配所有字符`([not \ and &] or [\ and &])`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T08:49:36.177

```
 var str = "abc&def&ghi\\&klm&nop";
  var test = str.replace(/([^\\])&/g, '$1\u000B').split('\u000B'); 
```

您需要用双斜杠替换 \&

[如何在js中拆分字符串，但有一些例外](https://stackoverflow.com/questions/7329972/how-to-split-a-string-in-js-with-some-exceptions)

test 将包含您需要的数组

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T08:57:02.650

您只能使用 oldschool indexOf：

```
var s = 'abc&def&ghi\\&klm&nop',
    lastIndex = 0,
    prevIndex = -1,
    result = [];
while ((lastIndex = s.indexOf('&', lastIndex+1)) > -1) {
    if (s[lastIndex-1] != '\\') {
        result.push(s.substring(prevIndex+1, lastIndex));
        prevIndex = lastIndex;
    }
}
result.push(s.substring(prevIndex+1));
console.log(result); 
```

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2013-01-15T08:39:13.827

尝试这个 ：

```
var v = "abc&def&ghi\&klm&nop";
var s = v.split("&");
for (var i = 0; i < s.length; i++)
    console.log(s[i]); 
```

# json - Spring MVC 3.2 和 JSON ObjectMapper 问题

> ID：14333709
> 
> 赞同：11
> 
> 时间：2013-01-15T08:28:35.557
> 
> 标签：json, spring, spring-mvc

我最近将我的 Spring 版本从 3.1.2 升级到了 3.2.0。我发现像包装根元素这样的 JSON 属性，防止在 ObjectMapper 中定义的空值不再起作用。

这是代码片段

```
<mvc:annotation-driven content-negotiation-manager="contentNegotiationManager" /> 
    <bean id="contentNegotiationManager" class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
    <property name="favorPathExtension" value="true" />
    <property name="ignoreAcceptHeader" value="false" /> 
    <property name="mediaTypes" >
        <value>
            json=application/json
            xml=application/xml
        </value>
    </property>
</bean> 
```

和 JSON 转换器

```
<bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
   <property name="objectMapper" ref="customJacksonObjectMapper"/>  
   <property name="supportedMediaTypes" value="application/json"/>
</bean> 
```

对象映射器代码

```
public class CustomJacksonObjectMapper extends ObjectMapper {

@SuppressWarnings("deprecation")
public CustomJacksonObjectMapper() {
    super();
    final AnnotationIntrospector introspector = new JaxbAnnotationIntrospector();

    this.configure(org.codehaus.jackson.map.DeserializationConfig.Feature.UNWRAP_ROOT_VALUE, true);
    this.configure(org.codehaus.jackson.map.SerializationConfig.Feature.WRAP_ROOT_VALUE, true);

    this.configure(org.codehaus.jackson.map.SerializationConfig.Feature.WRITE_NULL_PROPERTIES, false);

    this.setDeserializationConfig(this.getDeserializationConfig().withAnnotationIntrospector(introspector));
    this.setSerializationConfig(this.getSerializationConfig().withAnnotationIntrospector(introspector));

   }
} 
```

杰克逊版

```
<dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-xc</artifactId>
        <version>1.9.7</version>
    </dependency> 
```

可能是什么问题？任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-15T11:50:47.253

*免责声明：我无法确定为什么有问题的代码不起作用，但我可以重现该问题。这个答案确实提供了一种对我有用的替代方法。*

这*可能*是一个错误，因为我可以使用显式配置重现问题：

```
<bean id="jacksonObjectMapper" class="com.demo.CustomJacksonObjectMapper"/>

<bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
   <property name="objectMapper" ref="jacksonObjectMapper"/>
   <property name="supportedMediaTypes" value="application/json"/>
</bean> 
```

并通过*mvc:message-converter*：

```
<mvc:annotation-driven content-negotiation-manager="contentNegotiationManager">
    <mvc:message-converters>
        <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
            <property name="objectMapper" ref="jacksonObjectMapper" />
        </bean>
   </mvc:message-converters>
</mvc:annotation-driven> 
```

`{"foo":null,"bar":"bar"}`使用示例类时两者都给我的地方

**演示.java**

```
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.*;
import org.codehaus.jackson.annotate.JsonProperty;

@Controller
@RequestMapping("/data")
public class Data {
    @RequestMapping
    @ResponseBody
    public Dummy dataIndex() {
        return new Dummy();
    }

    public class Dummy {
        String foo = null;
        @JsonProperty
        public String foo() {
            return foo;
        }
        String bar = "bar";
        @JsonProperty
        public String bar() {
            return bar;
        }
    }
} 
```

但是，我原以为*mvc:message-converter*方法会起作用，只是因为我看到了覆盖`<mvc:annotation-driven/>`执行的默认 bean 注册的问题（请参阅[Web MVC 框架](http://static.springsource.org/spring-framework/docs/3.2.0.RELEASE/spring-framework-reference/html/mvc.html#mvc-config-enable)）并首选使用嵌套配置（？）。

也许对[Jackson 2 的支持](http://static.springsource.org/spring-framework/docs/3.2.0.RELEASE/spring-framework-reference/html/new-in-3.2.html#new-in-3.2-webmvc-jackson-json)导致了 Jackson 1 的一些向后兼容性问题？

但是，切换到[MappingJackson2HttpMessageConverter](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/http/converter/json/MappingJackson2HttpMessageConverter.html)（在 Spring 3.1.2 和 Spring 3.2 中受支持），我*能够*更改 ObjectMapper 配置以不写入空值并包装 JSON 输出......**但**只有在使用`<mvc:message-converters/>`!

我得到`{"Dummy":{"bar":"bar"}}`以下更改：

**pom.xml**

```
<dependency>
   <groupId>com.fasterxml.jackson.core</groupId>
   <artifactId>jackson-core</artifactId>
   <version>2.1.0</version>
</dependency>
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.1.0</version>
</dependency>
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-annotations</artifactId>
    <version>2.1.0</version>
</dependency> 
```

**CustomJacksonObjectMapper.java**

```
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.DeserializationFeature;
import com.fasterxml.jackson.databind.SerializationFeature;
import static com.fasterxml.jackson.annotation.JsonInclude.*;

public class CustomJacksonObjectMapper extends ObjectMapper {

public CustomJacksonObjectMapper() {
    super();
    this.configure(DeserializationFeature.UNWRAP_ROOT_VALUE, true);
    this.configure(SerializationFeature.WRAP_ROOT_VALUE, true);
    this.setSerializationInclusion(Include.NON_NULL);
   }
} 
```

**Demo.java**切换到 Jackson 2 的新包结构

```
import com.fasterxml.jackson.annotation.JsonProperty; 
```

**演示-servlet.xml**

```
<mvc:annotation-driven content-negotiation-manager="contentNegotiationManager">
    <mvc:message-converters>
        <bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
            <property name="objectMapper" ref="jacksonObjectMapper" />
        </bean>
    </mvc:message-converters>
</mvc:annotation-driven> 
```

最后，根据[`SerializationConfig.Feature`](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/map/SerializationConfig.Feature.html#WRITE_NULL_PROPERTIES)文档，不推荐使用 < v2.0 的功能，无论如何`WRITE_NULL_PROPERTIES`您都应该使用。`SerializationConfig.setSerializationInclusion()`我认为这就是`@SuppressWarnings("deprecation")`您的代码中存在的原因。在 Jackson >= v2.0 中，它已被删除，因此**CustomJacksonObjectMapper.java**示例中的代码发生了变化。

[在 Spring 中配置 ObjectMapper](https://stackoverflow.com/questions/7854030/configurating-objectmapper-in-spring)提出了另一种解决方案。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T10:01:40.283

尽管这是一篇旧帖子，但我分阶段解决了一个类似（甚至可能相同？）的问题。我将其追踪到以下问题（这可能对其他人有所帮助）：

*   添加的额外库对 Jackson 2.x 有短暂依赖
*   到目前为止，我们依赖于 Jackson 1.x
*   在 Jackson 1.x 和 Jackson 2.x 之间更改了命名空间以避免冲突
*   Sprint 开始采用较新的 (2.x) 版本
*   注释仍然是旧的（1.x）版本

为了解决这个问题，我可以：

1.  再次删除 2.x 版本
2.  将注解升级到 2.x 版本
3.  添加一个额外的注解也涵盖了 2.x 版本

就我而言，我选择了解决方案 3，因为我们需要两个不同的版本，并且额外的注释并没有增加很大的开销。

# php - 带有数组的php foreach循环

> ID：14333712
> 
> 赞同：0
> 
> 时间：2013-01-15T08:28:38.823
> 
> 标签：php, mysql, loops, foreach

我有以下语法：

```
function get_outstandingchecking($db)  
{    
    $result = $db->query("  SELECT distinct(haulier) as haulier from v2loads where  adminstatus='captured' and  DATEDIFF(now(), capturedate) >4 group by haulier,DATEDIFF(now(), capturedate) order by DATEDIFF(now(), capturedate) desc  "); 
    return $result; 
}

$outstandingchecking = get_outstandingchecking($db); 
$outstandingchecking_row_count = $outstandingchecking->rowCount();

if ($outstandingchecking_row_count > 0) {
    $i=0;

    foreach ($outstandingchecking as $instance) {
        echo $instance[$i];
        $i=$i+1;
        //syntax email relevent haulier
    }
} 
```

$result 查询获取受影响的值（运输者）数组。然后，我想使用每个返回的“运输者”并向他们发送电子邮件通知。

输出只显示查询结果中的第一个值，我怎样才能让它显示所有值作为 foreach 循环的一部分？

一如既往地感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:32:20.413

尝试

```
foreach($outstandingchecking as $instance){ 
   echo $instance[0];
} 
```

使用 foreach 时不需要 $i

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:33:05.070

试试这个代码。

```
$final=array();
foreach($outstandingchecking as $instance){ 

$final[]=$instance;

$i=$i+1;

//syntax email relevent haulier

}

print_r($final); 
```

# jquery - jQuery追加嵌套

> ID：14333715
> 
> 赞同：0
> 
> 时间：2013-01-15T08:28:46.077
> 
> 标签：jquery, append

```
var f = a('<span class="customSelectInnerText" />');
var e = a('<span class="customSelect"><span class="customSelectInner"></span></span>').append(f); 
```

结果是：

```
<span class="customSelect>
   <span class="customSelectInner"></span>
   <span class="customSelectInnerText">Text</span>
</span> 
```

而不是想要的：

```
<span class="customSelect>
   <span class="customSelectInner">
      <span class="customSelectInnerText">Text</span>
   </span>
</span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:31:45.960

如果您只想调整代码，则需要附加`f`到`.`customSelectInner，可以使用`find`.

```
var f = a('<span class="customSelectInnerText" />');
var e = a('<span class="customSelect">' +
          '<span class="customSelectInner"></span></span>')
         .find('.customSelectInner')append(f); 
```

请注意，我会破坏该代码，因此每个元素都有自己的变量，它更具可读性并且更易于维护和调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:30:53.823

您的语句选择最外面的元素。在附加上一个之前，您必须选择内部子级`<span>`。改成：

```
var e = a('<span class="customSelect"><span class="customSelectInner"></span></span>')
            .children().append(f); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T09:46:09.020

```
var f = a('<span class="customSelectInnerText" />');

var e = a('<span class="customSelect"><span class="customSelectInner"></span></span>');
$(".customSelectInner").append(f); 
```

# symfony - Symfony2：电子邮件错误未发送

> ID：14333720
> 
> 赞同：0
> 
> 时间：2013-01-15T08:29:13.190
> 
> 标签：symfony, error-handling, monolog

[我将我的项目放在生产服务器上，并尝试使用本指南http://symfony.com/doc/current/cookbook/logging/monolog_email.html](http://symfony.com/doc/current/cookbook/logging/monolog_email.html)发送错误电子邮件

SwiftMailer 从服务器正常传递简单的电子邮件，但不发送错误电子邮件。我尝试将 action_level 设置为调试、删除缓冲区，但不适用于任何测试错误。

我使用 master 的最新版本 symfony2。我做错了什么？

```
monolog:
handlers:
    main:
        type:         fingers_crossed
        action_level: debug
        handler:      grouped
    grouped:
        type:    group
        members: [streamed, buffered]
    streamed:
        type:  stream
        path:  "%kernel.logs_dir%/%kernel.environment%.log"
        level: debug
    buffered:
        type:    buffer
        handler: swift
    swift:
        type:       swift_mailer
        from_email: error@audiocards.irev.ru
        to_email:   borzenkov@irev.ru
        subject:    An Error Occurred!
        level:      debug 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T08:57:32.710

问题是 swiftmailer 假脱机功能在 swift mailer 处理程序发送电子邮件后未刷新。有关更多详细信息，请参阅 [https://github.com/symfony/symfony-standard/issues/425](https://github.com/symfony/symfony-standard/issues/425)。这绝对是一个错误，希望它可以尽快修复。

# c# - 当我的文件很大时，我的 writer 在我关闭文件之前为空

> ID：14333722
> 
> 赞同：0
> 
> 时间：2013-01-15T08:29:22.047
> 
> 标签：c#, .net, synchronization, backgroundworker

我有一个引擎类，负责用我的`Player`类播放流字节并将字节写入我的`StreamWriter`类的文件。

我可以拥有不止一个引擎和不止一个玩家/作家。

一切正常，直到我需要关闭文件。当我说关闭时，我的意思是添加波头并进行一些操作，然后我处理写入器并打开一个新写入器来写入字节。

我的问题是，当文件很小时它可以，但是当文件较大（几 Mb​​）时，在我关闭文件之前写入器为空。我怎样才能避免这种情况？

一些代码： `Engine`类

```
AddBytesAndSave(byte,[] stream)
{
    writer.AddAndSave(stream);

    // here i think i must wait untill the operation complete
    writer.Dispose;
    writer = null;
} 
```

`Writer`班级

```
AddAndSave(byte[] stream)
{
    writrToFileWorker.RunWorkerAsync(stream);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:51:20.227

您已触发异步调用。RunWorkerAsync 方法提交请求以启动异步运行的操作。因此，您的作家在完成之前被处置/为空。

可以这样，

```
 private void writrToFileWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
  {
      // code to add (after the asynchronous call is completed)
       writer.Dispose;
       writer = null;         
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:39:33.883

显然，或者？当数组更大时，物理写入需要更多时间，而且您无需等待 - 好吧......

从技术上讲，问题在于它使 - 从您的代码 - 零感觉运行写入异步。完全没有。不需要真正的建议 - 任何重构都取决于我们从您的代码片段中不知道的情况。只是 - 如果写入是异步的，那么显然不应在 AddBytesAndSave 方法中关闭写入器。

# javascript - 根据ajax结果提交表单

> ID：14333727
> 
> 赞同：2
> 
> 时间：2013-01-15T08:29:46.817
> 
> 标签：javascript, jquery, ajax

我有一个想要手动或以编程方式提交的页面。但在允许提交页面之前，需要启动一个函数 [create_impi_num(x)] 以在该函数中使用 "$.post('" 存储数据。

问题：如果我将 submit(function(e) 设置为 return false，则调用函数并存储我的数据。如果我将 return 设置为 true，则我的表单已发布，但我的函数被忽略。

这是我的代码：

```
$('#pay-and-complete').submit(function(e) {

 var ok = confirm('Do you really want to save your data?');
    if (ok) {

     var CanPay;
     var igroupid =  Number($('#hid-step3-entryid').val());

     //function here
      create_impi_num($('#hid-parc-id').val(),$('#hid-step3-entryid').val());

      return true;
   }
    else {
     //Prevent the submit event and remain on the screen
     create_impi_num($('#hid-parc-id').val(),$('#hid-step3-entryid').val());
      e.preventDefault();
      return false;
    }

  }); 
```

我花了几个小时试图找到解决方案。如果有人可以提供帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:41:45.490

它根本无法按照您想要的方式完成。

jQuery`post`函数执行 ayncrounsly 意味着它将在未来的某个时间返回，同时代码继续执行。在返回结果之前，提交功能已经完成。

如果您需要提交，您可以做的是在`post`回调上，使用javascript原生函数提交或重定向。

# asp.net - 在 umbraco 中进行可选搜索

> ID：14333732
> 
> 赞同：1
> 
> 时间：2013-01-15T08:30:09.920
> 
> 标签：asp.net, search, umbraco, umbraco5

我在 umbraco 中创建了新的文档类型。然后通过此文档类型在内容中创建了一些节点。我将设置一个新的搜索索引，因此找到了设置新搜索索引的代码。

```
@* Get the search term from query string *@
@{var searchTerm = Request.QueryString["search"];}
@{var results = ExamineManager.Instance.Search(searchTerm, true); } 
```

但我不知道如何限制只能在我的文档类型中搜索的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:18:27.157

有几个步骤。

你不得不：

*   创建一个`ISearchCriteria`对象；
*   从条件对象创建搜索表达式，包括 docType 别名作为要搜索的字段；
*   使用表达式搜索。

这可以编码为：

```
var criteria = ExamineManager.Instance.CreateSearchCriteria();

var expression = criteria.Field("nodeTypeAlias", "yourDocTypeAlias")
                         .And()
                         .Field("nodeName", searchTerm);

var results = ExamineManager.Instance.Search(expression.Compile()); 
```

这是可能的，因为当 Umbraco 发布一个节点时，它会将节点的 docType 别名保存到搜索索引中。

这里有更多的[检查文档](http://examine.codeplex.com/documentation)。我还建议下载[Luke](http://code.google.com/p/luke/)，它是一个独立工具，可让您查看索引内部，以便查看 Umbraco 实际存储的内容。

# syntax-highlighting - Sublime Text 2 的 Forth 语法高亮显示？

> ID：14333733
> 
> 赞同：5
> 
> 时间：2013-01-15T08:30:11.523
> 
> 标签：syntax-highlighting, sublimetext2, forth, gforth

我一直在环顾四周，但没有找到 Gforth 在[Sublime Text](http://en.wikipedia.org/wiki/Sublime_Text)中使用的语法定义。

有吗？我为[TextPad](http://en.wikipedia.org/wiki/TextPad)找到了一个，但仅此而已（请参阅[TextPad 语法定义](http://www.textpad.com/add-ons/syna2g.html "文本板语法定义")）。是否可以将 TextPad 转换为与 Sublime Text 2 一起使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T17:52:31.437

我安装了[Charles Turner 的 Forth TextMate 包](https://github.com/kballard/textmate-bundles/tree/master/Review/Bundles/Forth.tmbundle)（在 Sublime Text 中），它运行良好。

如果这还不够好，也许您可​​以使用从 TextPad 语法文件中收集的模式来扩展它。要了解 Sublime Text 语法定义是如何工作的，我会通读*[Syntax Definitions](http://sublimetext.info/docs/en/extensibility/syntaxdefs.html)*。

我希望这会有所帮助！

# android - 在没有GPS的情况下在android中定位当前位置

> ID：14333736
> 
> 赞同：7
> 
> 时间：2013-01-15T08:30:21.287
> 
> 标签：android, location

我想开发一个应用程序，如果我打开应用程序，它将显示我设备的当前位置。我想在不使用 gps 的情况下做到这一点。我已经为它写了一个代码。但它会在打开地图时显示美国的位置。我希望它显示我当前的位置（即印度浦那）。如何获得我的大致正确位置？

这是我的代码

```
protected void onCreate(Bundle arg0) {
    // TODO Auto-generated method stub
    super.onCreate(arg0);
    setContentView(R.layout.main);

    LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

      LocationListener locListener = new LocationListener(){
          public void onLocationChanged(Location loc)
          {

            loc.getLatitude();
            loc.getLongitude();

            String Text = "My current location is: " +
            "Latitud = " + loc.getLatitude() +
            "Longitud = " + loc.getLongitude();

            Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show();
          } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T10:09:19.133

**这是 MyLocation 侦听器，可使用网络提供商在没有 GPS 的情况下获取当前位置**

```
public class MyLocationListener extends Service implements LocationListener {

    private static final String TAG = "MyLocationListener";

    private Context context = null;
    private Location location = null;
    private LocationManager locationManager = null;

    boolean isNetworkEnabled = false;
    boolean canGetLocation = false;

    public double latitude = 0.0;
    public double longitude = 0.0;

    // The minimum distance to change Updates in meters
    private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10;
    // The minimum time between updates in milliseconds
    private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

    public MyLocationListener(Context ctx) {
        Log.v(TAG + ".MyLocationListener",
                "MyLocationListener constructor called");
        this.context = ctx;
        getLocationValue();
    }

    public Location getLocationValue() {
        Log.v(TAG + ".getLocationValue", "getLocationValue method called");

        try {
            locationManager = (LocationManager) context
                    .getSystemService(LOCATION_SERVICE);

            isNetworkEnabled = locationManager
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

            if (isNetworkEnabled) {

                // Toast.makeText(context, "Net", 1).show();
                Log.v(TAG + ".getLocationValue", "Network provider enabled");
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER, MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);

                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                        Log.v(TAG, "Co-ordinates are: " + latitude + " "+ longitude);

                    }
                }

            } else {
                showSettingsAlert();
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return location;
    }

    /**
     * Stop using GPS listener Calling this function will stop using GPS in your
     * app
     * */
    public void stopUsingGPS() {
        if (locationManager != null) {
            locationManager.removeUpdates(MyLocationListener.this);
        }
    }

    public double getLatitude() {
        if (location != null) {
            latitude = location.getLatitude();
        }
        return latitude;
    }

    public double getLongitude() {
        if (location != null) {
            longitude = location.getLongitude();
        }
        return longitude;
    }

    /**
     * Function to check GPS/wifi enabled
     * 
     * @return boolean
     * */
    public boolean canGetLocation() {
        return this.canGetLocation;
    }

    /**
     * Function to show settings alert dialog On pressing Settings button will
     * lauch Settings Options
     * */
    public void showSettingsAlert() {
        AlertDialog.Builder alertDialog = new AlertDialog.Builder(context);

        alertDialog.setTitle("GPS Settings");
        alertDialog
                .setMessage("GPS is not enabled. Do you want to go to settings menu?");

        alertDialog.setPositiveButton("Settings",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        Intent intent = new Intent(
                                Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                        context.startActivity(intent);
                    }
                });
        alertDialog.setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.cancel();
                    }
                });
        alertDialog.show();
    }

    @Override
    public void onLocationChanged(Location location) {
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

} 
```

只需以这种方式需要当前位置坐标时调用上面的代码

```
MyLocationListener mylistner = new MyLocationListener(context);
        double lat = mylistner.latitude;
        double lon = mylistner.longitude; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T08:55:38.957

您应该请求“ **mlocManager** ”来定位并设置其侦听器：

```
public void getCurrentLocation()
{
    if (mlocManager != null) {
        mlocManager .requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, 0, 0, locListener );
        mlocManager .requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 0, 0, locListener );
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T09:10:29.283

我没有发现 LocationListener 有用，但无论如何都需要将其放入以防止空指针。

```
// Set the criteria of what to look for
criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_FINE);
criteria.setPowerRequirement(Criteria.POWER_LOW);

// This will find the location of the device via your network, but give user option to use GPS if needed
String locationprovider = mlocManager.getBestProvider(criteria,
            true);

mLoc = mlocManager.getLastKnownLocation(locationprovider);
if (mLocation != null)
{
    String Text = "My current location is: " +
    "Latitud = " + mLoc.getLatitude() +
    "Longitud = " + mLoc.getLongitude();
} else
{
    String Text = "No location found."
} 
```

# c# - 是否有一些现成的函数来解析 %specialfolders%？

> ID：14333738
> 
> 赞同：4
> 
> 时间：2013-01-15T08:30:24.223
> 
> 标签：c#, special-folders

我希望我的命令行程序采用以下形式的文件参数：

```
-out:%MyDocuments%\dummy.xps 
```

并让 %MyDocuments% 自动替换为：

```
Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments) 
```

我知道这是一个易于编写的函数，但我想它应该已经在某个地方完成了，所以我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T08:37:59.633

您可以使用[`Environment.ExpandEnvironmentVariables(variable);`](http://msdn.microsoft.com/en-us/library/system.environment.expandenvironmentvariables.aspx)

输入不需要是单个变量，它可以是“查询”，就像您的路径一样，嵌入变量，它将扩展它找到/识别的所有内容。这显示在给定链接的片段中：

```
String query = "My system drive is %SystemDrive% and my system root is %SystemRoot%";
str = Environment.ExpandEnvironmentVariables(query);
Console.WriteLine("ExpandEnvironmentVariables: {0}  {1}", Environment.NewLine, str); 
```

# ios - iPhone 的 TableView 中的复选框查询

> ID：14333743
> 
> 赞同：1
> 
> 时间：2013-01-15T08:30:47.413
> 
> 标签：ios, uitableview, checkbox

我已经在我的复选框中创建了复选框`tableView`并且工作正常，但是当我要转到上一个视图并返回到复选框视图时，我检查过的复选框不会保持选中状态。那么该怎么办？我使用两个图像来创建复选框。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:37:47.087

复选框的状态不存储在图像上。相反，它是通过一些模型/数据源显示的。

如果您有许多复选框，请将状态存储在数组中，并根据您的选中或取消选中更新数组值。

您可以将这个数组设置为 shared.global 或 static 到该类，以便它只初始化一个。在您的情况下，每次加载视图时都会初始化。

# iphone - 首次启动时重置核心数据

> ID：14333748
> 
> 赞同：1
> 
> 时间：2013-01-15T08:30:55.603
> 
> 标签：iphone, ios, core-data

由于某些原因，我必须在每次应用更新时更新我的​​核心数据模型。

问题是，在每次更新首次启动时（仅在每次更新首次启动时），我想重置我的模型，但我不知道如何继续。

有人遇到过这种问题吗？

非常感谢提前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:32:22.240

您是否启用了 Persistent Store 迁移？只要您只是进行微不足道的模型修改，自动迁移将意味着您不需要重置数据。

```
 NSError *error = nil;
_persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType
                                               configuration:nil
                                                         URL:storeURL
                                                     options:@{
                                                        NSMigratePersistentStoresAutomaticallyOption:@YES,
                                                        NSInferMappingModelAutomaticallyOption:@YES,
                                                        NSSQLiteAnalyzeOption:@YES,
                                                            }
                                                       error:&error]) 
```

如果有不同的理由来清除您的模型，那么`NSUserDefaults`就是要走的路。您可以使用#define 设置版本号，并在数字不同时重置持久存储，然后当您知道您进行了需要空存储的更改时，您可以增加#define：

```
#define kNukeTheCache 1000

...

    NSNumber *nukeNumber = [[NSUserDefaults standardUserDefaults] objectForKey:nukemeKey];

    if ((nukeNumber == nil) || (nukeNumber.integerValue < kNukeTheCache)) {
            [self deletePersistentStore:storeURL];
    }
    [[NSUserDefaults standardUserDefaults] setInteger:kNukeTheCache forKey:nukemeKey];
    [[NSUserDefaults standardUserDefaults] removeObjectForKey:totalNuke];
    [[NSUserDefaults standardUserDefaults] synchronize];

- (void)deletePersistentStore:(NSURL *)storeURL
{
    NSError *error = nil;
    [[NSFileManager defaultManager] removeItemAtURL:storeURL error:&error];
    if (error) { // Handle error }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:37:43.030

使用**NSUserDefaults**设置应用程序是否更新。如果更新，则从应用程序中清除核心数据。按照此链接重置核心数据：[链接](https://stackoverflow.com/questions/1077810/delete-reset-all-entries-in-core-data)

更新完成后：

```
[[NSUserDefaults standardUserDefaults]setBool:TRUE forKey:@"isUpdated"] 
```

然后在启动应用程序时检查相同的值。

# mysql - mysql 完全连接错误-#1054 - 'field list' 中的未知列 'feesmaster.PAIDAMOUNT'

> ID：14333751
> 
> 赞同：1
> 
> 时间：2013-01-15T08:31:07.223
> 
> 标签：mysql, join

我有查询返回这样的数据

```
DATE( expensemaster.`date` )    SUM( feesmaster.PAIDAMOUNT )    SUM( expensemaster.amount )
2013-01-09                         0                             7824.4
2013-01-15                         200                            211 
```

请查看查询，

```
SELECT DATE( expensemaster.`date` ) , 
       SUM( feesmaster.PAIDAMOUNT ) , 
       SUM( expensemaster.amount ) 
FROM 
    feesmaster
    INNER JOIN expensemaster 
        ON DATE( feesmaster.DATETIME ) = DATE( expensemaster.date ) 
WHERE 
    DATE( expensemaster.`date` ) BETWEEN  '2013-01-09' AND  '2013-01-15'
    AND DATE( feesmaster.`datetime` ) BETWEEN  '2013-01-09' AND '2013-01-15'
GROUP BY 
    DATE( feesmaster.`datetime` ), 
    DATE( expensemaster.`date` ) 
```

如果我将内部替换为完整，那么当其中一个表中有匹配项时我可以获得返回行但我收到错误

**#1054 -“字段列表”中的未知列“feesmaster.PAIDAMOUNT”**

我正在使用 phpmyadmin。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:44:54.250

据我所知 MySQL 不支持`FULL JOIN`，所以`FULL`在这种情况下这个词意味着你的第一个表的**别名**`feesmaster`。所以没有列`feesmaster.PAIDAMOUNT`但是`FULL.PAIDAMOUNT`. [您可以通过UNION LEFT JOIN 和 RIGHT JOIN](http://explainextended.com/2009/04/06/emulating-full-outer-join-in-mysql/)实现 FULL JOIN

**UPD：**在您的情况下，FULL JOIN（以及 LEFT/RIGHT JOIN 也）对此查询没有任何意义，只要您的 WHERE 条件 TRUE only if `expensemaster.date`and `feesmaster.datetime`are not `NULL`。所以只`INNER JOIN`在这种情况下有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:41:47.483

您的错误是未知列，这基本上意味着`feesmaster`表中没有`PAIDAMOUNT`列（可能是错字？）。

# audio-streaming - 如何使用 portAudio 读取声卡输出的音频数据？

> ID：14333752
> 
> 赞同：0
> 
> 时间：2013-01-15T08:31:17.810
> 
> 标签：audio-streaming, portaudio, soundcard

我想知道是否可以使用 PortAudio API 读取从声卡到扬声器的数据。查看文档后，我找到了一个示例（http://portaudio.com/docs/v19-doxydocs/paex__record_8c_source.html），他们从麦克风中读取数据。但是，我希望能够捕获来自声卡的音频。有没有办法在 PortAudio 中做到这一点，如果没有，请指出正确的方向。此外，它适用于 Windows、Mac 和 Linux 计算机也很重要，我更喜欢用 C 编写它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:36:12.933

这是无法做到的。最近有人提交了一个补丁，允许在其中一个 Windows API 上完成此操作，但这是一种特殊情况，您必须在邮件列表中询问。

它不能从一个简单的单一库跨平台完成。例如，在 OS X 上，您需要安装特殊的系统扩展（或其他任何名称）。

# ipad - 从另一个应用程序调用 Lotus Notes 客户端（发送电子邮件）

> ID：14333753
> 
> 赞同：0
> 
> 时间：2013-01-15T08:31:23.040
> 
> 标签：ipad, lotus-notes

我有一个应用程序，它可以通过电子邮件发送所显示页面的内容。它调用 iPad 的默认邮件客户端。我希望它在触发操作时调用安装在 iPad 中的 LOTUS NOTES 客户端。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:04:56.383

您不能从其他程序内部使用 iOS 中的非默认邮件客户端。它需要使用非公共 API，并且被 Apple 禁止。

# windows-8 - 找不到共享信息 Win8 应用

> ID：14333756
> 
> 赞同：0
> 
> 时间：2013-01-15T08:31:30.487
> 
> 标签：windows-8, windows-runtime, share, contract, charms-bar

我正在创建一个 Windows 8 应用程序，该应用程序应该使用作为共享源的共享合同，但问题是它一直在等待来自应用程序的共享信息，但我无法找出它仍在等待的原因。 ..我插入的唯一代码是：

```
public void InitializeShare()
    {
        _shareManager = DataTransferManager.GetForCurrentView();
        _shareManager.DataRequested += OnShareDataRequested;
    }

    private void OnShareDataRequested(DataTransferManager sender, DataRequestedEventArgs args)
    {
            DataRequest request = args.Request;
            request.Data.Properties.Title = "blablabla";
            request.Data.Properties.Description = "blablabla";
            request.Data.SetText("blablabla");
        }
    } 
```

这就是我得到的...

![在此处输入图像描述](../Images/b1750eb000209f9f591a08dc6b603690.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:24:32.537

它通过重新启动我的机器来解决。

# r - 诊断 R 包构建错误：pdfLatex 不可用

> ID：14333759
> 
> 赞同：19
> 
> 时间：2013-01-15T08:31:38.597
> 
> 标签：r, packaging, pdflatex

我正在尝试在`R`. 我制作了骨架，然后运行了命令`R CMD check package1`。[我收到了此处](https://stackoverflow.com/questions/10819959/diagnosing-r-package-build-warning-latex-errors-when-creating-pdf-version)描述的错误。我按照解决方案的步骤，结果是：

1.  套餐`devtools`不适用于`R 2.15.1`

2.  冲了进去`R CMD Rd2pdf package1`。

> ```
> Hmm.. Looks like a package
> Converting Rd files to LaTeX
> Creating pdf output from LaTeX
> Error in texi2dvi(file=file, pdf=true, clean=clean, quiet=quiet, : pdflatex not available
> Error in running tools::texi2pdf 
> ```

3.  我在其他事情中查找了[这个，安装了完整的 tex live 和 MiKTeX。](https://tex.stackexchange.com/questions/60702/setting-up-miktex-and-texworks)出现了相同的错误消息。
4.  我导航到 pdflatex 所在的目录并尝试从那里运行命令。没有帮助。

我在这里缺少什么，还是有解决方法？或者，有没有办法在包创建过程中抑制 pdf 生成？

更新：当我在 LINUX (CentOS) 中尝试时没有抛出这个错误。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-02-10T18:32:21.453

您当然可以抑制 PDF 生成。

```
R CMD check package --no-manual 
```

从[这里](https://support.rstudio.com/hc/en-us/articles/200486518-Customizing-Package-Build-Options)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T08:48:29.570

尽管您已经在 Windows 下安装了 MikTeX，但这并不能使其对 R 可用。您需要将 Latex 可执行文件的位置添加到您的 PATH 环境变量中。如何执行此操作完全取决于您的 Windows 版本。例如，[此链接](http://www.itechtalk.com/thread3595.html)描述了如何为 Windows 7 执行此操作。谷歌搜索`change environment variables (windows 7|windows xp|windows 95)`将告诉您如何更改环境变量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-21T03:16:03.010

[第 1 步：从http://miktex.org/2.9/setup](http://miktex.org/2.9/setup)下载并安装 MiKTeX

第 2 步：运行

```
Sys.getenv("PATH") 
```

在 R studio 中此命令返回 Rstudio 尝试查找 pdflatex.exe 的路径在 Windows（64 位）中它应该返回 C:\Program Files\MiKTeX 2.9\miktex\bin\x64\pdflatex.exe 如果 pdflatex.exe 是不在此位置 Rstudio 给出此错误代码 41。

第 3 步：要设置此路径变量，请运行：

```
Sys.setenv(PATH=paste(Sys.getenv("PATH"),"C:/Program Files/MiKTeX 2.9/miktex/bin/x64/",sep=";")) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-01T11:22:17.347

我最近遇到了同样的问题。对我来说，有效的是安装`texlive-fonts-extra`. 这适用于 Docker R-base 映像，也适用于 Ubuntu。

在 CentOS 中，软件包系统有所不同，您可能需要安装更多与乳胶相关的软件包（[此处为示例](https://docs.geoserver.org/latest/en/docguide/installlatex.html)）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-11T11:28:18.510

只需按照此视频的说明在 Windows 上安装 MikTex：

[https://www.youtube.com/watch?v=k-xSGZ-RLBU](https://www.youtube.com/watch?v=k-xSGZ-RLBU)

我也有关于 pdfLatex Not Available 的类似问题。以这种方式安装 MikTex 后，使用 knitr 创建 pdf 时，可以解决“pandoc.exe: pdflatex not found. pdflatex is required for pdf output. Error: pandoc document conversion failed with error 41”之类的错误。

安装文件可以从以下位置下载：

[http://mirrors.ctan.org/systems/win32/protext/ProTeXt-3.1.5-033015.exe](http://mirrors.ctan.org/systems/win32/protext/ProTeXt-3.1.5-033015.exe)

# windows-phone-7 - Windows Phone - HTC - XamlParseException 属性模式未找到 ApplicationBar

> ID：14333773
> 
> 赞同：0
> 
> 时间：2013-01-15T08:32:39.160
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone, windows-phone-8, windows-phone-7.1.1

我在 HTC Mazaa 上收到 XamlParseException。下面的代码在诺基亚手机和模拟器上运行良好。如果我从中删除属性`Mode`，`Applicationbar`它也开始在 HTC Mazaa 上工作。为什么在 HTC Mazaa 上运行时无法识别模式属性？

代码：

```
<phone:PhoneApplicationPage.ApplicationBar>
        <shell:ApplicationBar Mode="Minimized" ForegroundColor="Gray" BackgroundColor="White"  IsVisible="True" IsMenuEnabled="True" Opacity="0.9" >
            <shell:ApplicationBar.MenuItems>
                <shell:ApplicationBarMenuItem Text="About" Click="About_Click"/>
            </shell:ApplicationBar.MenuItems>
        </shell:ApplicationBar>
    </phone:PhoneApplicationPage.ApplicationBar> 
```

下面的异常和 Stacktrace

```
The property Mode was not found in type ApplicationBar
 at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator)
   at JohnCO.MainPage.InitializeComponent()
   at JohnCO.MainPage..ctor() 
```

如果我尝试在 C# 中以编程方式执行此操作，例如：

```
this.ApplicationBar.Mode = Microsoft.Phone.Shell.ApplicationBarMode.Minimized; 
```

我得到例外：

```
Could not load type 'Microsoft.Phone.Shell.ApplicationBarMode' from assembly
 'Microsoft.Phone, Version=7.0.0.0, Culture=neutral, PublicKeyToken=24EEC0D8C86CDA1E' 
```

这是 HTC Mazaa 上发生的一个奇怪问题。我无法在任何其他 HTC 手机上试用它。上面的代码在诺基亚手机和模拟器上运行良好。

此应用程序正在使用最新的 SDK 开发`Windows Phone SDK 8.0, targeting 7.1 OS - WP7.x devices.`

我正在测试的 HTC Mazaa 有 Windows Phone 7.5 软件版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:11:30.877

HTC Mazaa 上安装的操作系统是什么版本？我猜你没有安装 Mango 更新 (WP7.5) - 属性 Mode 在 WP7.0 中不可用。
无论如何，HTC Mazaa 是只为开发人员提供的预生产设备，因此它有可能根本无法与新的 SDK 一起使用。也许您甚至没有安装 Windows Phone 7.5 版本号 7720 的最终版本。

# vba - 此应用程序正在访问什么类型的数据库？

> ID：14333774
> 
> 赞同：0
> 
> 时间：2013-01-15T08:32:39.517
> 
> 标签：vba, etl, database

我有一个需要逆向工程和重写的客户端应用程序。它有在 VB 上实现的富客户端（我认为）和一个作为文件的数据库，重用这个数据库是项目的要求。

我需要检查这个数据库并在需要时提取数据。问题是我不知道该怎么做。我知道该应用程序使用**msvbvm60.dll**并且数据库文件具有扩展**名 .sys**。我认为值得检查文件的内容，但它很大（3GB），恐怕需要一个特定的工具。

有人可以帮我找出这个文件是什么类型的数据库，以便我可以连接并查看它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:14:06.450

来自[文件](http://filext.com/file-extension/SYS)：

*   PDP-10 文件
*   PlayStation 2 图标
*   SYGRAPH/SYSTAT/SPSS/PC（数据文件）
*   系统配置
*   系统设备驱动程序
*   未知的 Apple II 文件（在 Golden Orchard Apple II 光盘上找到）

也可以使用文件编辑器，例如[xvi32](http://www.chmaas.handshake.de/delphi/freeware/xvi32/xvi32.htm)来查看文件，看看文件中是否有任何可以识别数据库的文本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-21T10:33:09.840

.sys 文件可能是由 VB 应用程序创建的自定义格式。如果您没有源，则需要使用二进制转储实用程序分析 .sys 文件中的数据并重新构建格式。在 Linux 上，我使用 'od' 来完成这类工作。一旦确定了文件格式，就可以将其迁移为新应用程序使用的任何格式。

# php - 如何设计一个href以在js中用作anchor.attr但单击时不打开窗口？

> ID：14333775
> 
> 赞同：-2
> 
> 时间：2013-01-15T08:32:47.980
> 
> 标签：php, javascript, html, href

我的 php 文件中有一个 href 函数。我在我的 js 文件中将其用作 anchor.attr('href') 以在有人滚动图像的缩略图时显示图像的大版本。这很好用。问题是，如果有人点击现在显示的大版本，它会将我的 php 文件替换为包含大图像的文件。我希望它什么也不做。

我尝试在 js 中为 anchor.attr 使用其他内容，例如名称和标题，但它正在执行 img 语句并需要 href 才能运行。

如果我放了 href'#"，anchor.attr 会出错，因为那里没有要执行的文件。

有没有办法允许将 href 用于 js 函数，但在单击时不打开包含图像的新窗口。

感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:37:31.223

```
$("a").click(function(event){
  event.stopPropagation();
  // do something
}); 
```

或者您可以使用 javascript`return false`来阻止锚标记重定向

```
$('a').click(function () {
      return false;
}; 
```

# opentbs - 如何添加 openTBS docx 中的标签？

> ID：14333778
> 
> 赞同：0
> 
> 时间：2013-01-15T08:32:59.460
> 
> 标签：opentbs

我想用openTBS在一个单元格中添加多行，但`<br/>`不是`<w:br/>`“真正的”多行。所以我尝试使用`<w:p>Text</w:p>`or `<w:p><w:r><w:t>Text</w:p></w:r></w:t>`，但无法在 ms word 中打开。

那么如何在变量中添加多行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:46:12.600

如果您在 Word 中添加标签，您的标签将已经在元素中。您不能在 a 中嵌套另一个标签，因此您可能需要在开始之前关闭一些标签，然后在最后再次打开它们。您将需要查看您的 xml 以了解您需要突破哪些标签。你可以通过使用看到它

```
$TBS->Show(OPENTBS_DEBUG_XML); 
```

暂时代替您的 Show() 标签。一旦你知道你的标签是如何嵌套的（`<w:p><w:r><w:t>[onshow;data;]</w:t></w:r></w:p>`例如在内部），你可以通过像这样设置 $data 来突破：

```
$data = '</w:t></w:r></w:p><w:p><w:r><w:t>Text</w:t></w:r></w:p><w:p><w:r><w:t>'; 
```

请记住，您的标签需要正确嵌套，例如`<w:p><w:r><w:t>Text</w:t></w:r></w:p>`，不像您的示例中那样`<w:p><w:r><w:t>Text</w:p></w:r></w:t>`。

Word 对这些东西非常烦躁，但如果你仔细看，它会告诉你问题出在哪里。您是否尝试过将文件扩展名从 .docx 更改为 .zip 并进入 word/document.xml 并查看 Word 在错误弹出窗口的详细信息中为您提供的行号和列号？

# c# - 设置 Windows 对话框输入

> ID：14333780
> 
> 赞同：0
> 
> 时间：2013-01-15T08:33:05.660
> 
> 标签：c#, winapi

我正在尝试编写一个自动处理文件上传的 C# 代码。我需要执行的以下操作是从打开的文件对话框中选择一个文件：

*   [我需要控制的对话框](http://i.stack.imgur.com/Y4QVu.png)

我设法使用`users32.dll` `FindWindow()`方法找到了窗口。但我不知道如何在对话框中设置输入并批准所选文件（选择一个文件并按 OK）。

到目前为止我的代码：

```
[DllImport("user32.dll")]
public static extern int FindWindow(string lpClassName, string lpWindowName);

public const int WM_SYSCOMMAND = 0x0112;
public const int SC_CLOSE = 0xF060;
public const int WM_SETTEXT = 0x000C;

private void ChooseFile()
{
    // retrieve the handler of the window  
    int iHandle = FindWindow("#32770", "File Upload");
    if (iHandle > 0)
    {
        //Choose File
        //Press OK
    }
} 
```

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:39:29.920

您有 C# 类 OpenFileDialog (http://www.dotnetperls.com/openfiledialog)，对于 user32.dll 来说不是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:40:26.290

你想做的事情有点奇怪。您正在调用 Win32 函数，但您只需要使用 OpenFileDialog 类，这是正确的 .NET 方式（[MSDN OpenFileDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx)）

```
OpenFileDialog dlg = new OpenFileDialog();
DialogResult res = dlg.ShowDialog();
if (res == DialogResult.OK)
{
    string filePath = dlg.FileName;
    // do your upload logic here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:01:40.553

经过大量研究，我找到了解决方案。

我使用了模拟键盘并将字符串发送到焦点窗口的 Windodows.Form.SendKeys 类。

这是代码：

```
 SendKeys.SendWait(fileInfo.FullName);
 Thread.Sleep(2000);
 SendKeys.SendWait("{ENTER}");
 Thread.Sleep(5000); 
```

# symfony-2.1 - 渲染模板时抛出异常

> ID：14333781
> 
> 赞同：4
> 
> 时间：2013-01-15T08:33:06.303
> 
> 标签：symfony-2.1

我正在使用 symfony2.16 中产品的 id 更新值，也使用 MngoDBbundle

但我收到这样的错误

> 在第 1 行的 AcmeStoreBundle:Default:index.html.twig 中呈现模板期间引发了异常（““acme_store_update”路由缺少一些强制参数（“id”）。”）。

这是我的控制器，请检查更新操作

```
<?php

namespace Acme\StoreBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use Acme\StoreBundle\Document\Product;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpFoundation\Request;

class DefaultController extends Controller
{
    /**
     * @Route("/hello/{name}")
     * @Template()
     */
    public function indexAction($name)
    {
        return array('name' => $name);
    }

// ...

    /**
     * @Route("/create", name="acme_store_create")
     * @Template()
     */
    public function createAction(Request $request)
    {
        $product = new Product();
        //$product->setName('apple');
        //$product->setPrice('19.99');
        $form = $this->createFormBuilder($product)
            ->add('name', 'text')
            ->add('price', 'text')
            ->getForm();
        if ($request->getMethod() == 'POST') {
            $form->bind($request);
            if ($form->isValid()) {
                $req = $request->request->get('form');
                $product->setName($req['name']);
                $product->setPrice($req['price']);
                $dm = $this->get('doctrine.odm.mongodb.document_manager');
                $dm->persist($product);
                $dm->flush();
                return new Response('Name ='.$product->getName().', price ='.$product->getPrice());
            }
         }
            return $this->render('AcmeStoreBundle:Default:index.html.twig', array(
                'form' => $form->createView(),
            ));
    }
    // ...
    /**
     * @Route("/show/{id}", name="acme_store_show")
     * @Template()
     */
    public function showAction($id)
    {
        $product = $this->get('doctrine.odm.mongodb.document_manager')
            ->getRepository('AcmeStoreBundle:Product')
            ->find($id);

        if (!$product) {
            throw $this->createNotFoundException('No product found for id '.$id);
        }
        return new Response('Name ='.$product->getName().', price ='.$product->getPrice());
        // do something, like pass the $product object into a template
    }
    // ...
    /**
     * @Route("/update/{id}", name="acme_store_update")
     * @Template()
     */
    public function updateAction(Request $request,$id)
    {
        $dm = $this->get('doctrine.odm.mongodb.document_manager');
        $product = $dm->getRepository('AcmeStoreBundle:Product')->find($id);
        $form = $this->createFormBuilder($product)
            ->add('name', 'text')
            ->add('price', 'text')
            ->getForm();
        if ($request->getMethod() == 'POST') {
            $form->bind($request);
            if ($form->isValid()) {
                $req = $request->request->get('form');
                $product->setName($req['name']);
                $product->setPrice($req['price']);
                $dm->flush();
                return new Response('Name ='.$product->getName().', price ='.$product->getPrice());
            }
        }
            return $this->render('AcmeStoreBundle:Default:index.html.twig', array(
                'form' => $form->createView(),
            ));

    }
            // ...

} 
```

我的 index.html.twig 是

```
<form action="{{ path('acme_store_update') }}" method="post" {{ form_enctype(form) }}>
    {{ form_widget(form) }}

    <input type="submit" />
</form> 
```

如何使用 id 更新值请帮助我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T12:30:16.543

在 updateAction 添加`$id`到您的模板变量：

```
return $this->render('AcmeStoreBundle:Default:index.html.twig', array(
    'form' => $form->createView(),
    'product_id' => $id,
)); 
```

并在您的模板中将`product_id`参数添加到`path`函数中：

```
<form action="{{ path('acme_store_update', {id: product_id}) }}" method="post" {{ form_enctype(form) }}>
    .... 
```

[http://symfony.com/doc/current/book/routing.html](http://symfony.com/doc/current/book/routing.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-04T14:18:58.027

就我而言，错误不在错误输出中的模板文件中，而是在扩展的 TWIG 文件中。在我使用的树枝文件中：

```
path( app.request.attributes.get('_route')) 
```

..尝试获取 URL 路径。这会产生错误，因为未提供必需的参数。

我使用了正确的方法来获取 URL：

```
{{ path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')) }} 
```

..错误消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-14T05:22:20.390

在其路由文件中错误地键入了 Id 而不是令牌，因此发生了此错误（在 AcmeStoreBundle:Default:index.html.twig 中的模板呈现期间引发了异常（“`acme_store_update`路由缺少一些强制参数（`id`）。”）在第 1 行。）

例如：在 .yml 文件 ibw_job_edit 中：

```
pattern:  /{id}/edit
defaults: { _controller: "IbwJobeetBundle:Job:edit" } 
```

而不是这个你必须写ibw_job_edit：

```
 pattern:  /{token}/edit
    defaults: { _controller: "IbwJobeetBundle:Job:edit" } 
```

# elasticsearch - ElasticSearch 搜索带空格的术语

> ID：14333782
> 
> 赞同：8
> 
> 时间：2013-01-15T08:33:08.420
> 
> 标签：elasticsearch

我们正在运行 ElasticSearch，并且在搜索包含空格的术语时遇到了一些问题。一个具体的例子：有一个名叫 JM Bruno 的人，但是在搜索这个时没有返回任何结果。我隐约记得搜索这个确切的术语确实返回了结果，但我现在无法重现。

我尝试在我的标记器模式中添加一个空格和“\”，但运气不佳。ES 设置如下（在 Ruby on Rails 应用程序中使用 Tire gem）

```
module Search
def self.included base
base.send :include, Tire::Model::Search
base.send :include, Tire::Model::Callbacks

base.class_eval do
  settings  analysis: {
              filter: {
                ngram: {
                  type: 'nGram',
                  max_gram: 12,
                  min_gram: 3
                },
                url_stop: {
                  type: "stop",
                  stopwords: %w[http https]
                }
              },
              tokenizer: {
                url_email_tokenizer: {
                  pattern: '[^\w\-\.@]+',
                  type: 'pattern'
                }
              },
              analyzer: {
                url_analyzer: {
                  tokenizer: "url_email_tokenizer",
                  filter: %w[url_stop ngram],
                  type: "custom"
                },
                name_analyzer: {
                  tokenizer: 'url_email_tokenizer',
                  filter: 'ngram',
                  type: 'custom'
                }
              }
            }

    end
  end
end 
```

我们也使用这些标记器来搜索域名和电子邮件地址。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T08:59:44.600

尝试使用您应用于字段的分析器运行[_analyze API 。](http://www.elasticsearch.org/guide/reference/api/admin-indices-analyze.html)

```
curl -XGET 'localhost:9200/_analyze?analyzer=name_analyzer' -d 'JM Bruno' 
```

您将看到 Elasticsearch 如何将您的字段内容分解为标记，以及为什么您不能使用 TermQuery 搜索它。不分析 TermQuery，因此它会将您的查询与倒排索引进行完全比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-17T15:26:31.583

我正在使用 Django，通过将分析器设置为“关键字”，我遇到了这个错误。而已。默认情况下，它使用“标准”分析器。

它不会在空白的基础上制作令牌。它会将您的整个文本视为一个标记。默认限制为最多 256 个字符。

这是我的代码。我使用了elasticsearch_dsl。这是我的 document.py 文件

```
from django_elasticsearch_dsl import Document, fields
from elasticsearch_dsl import analyzer
from .models import Job

html_strip = analyzer(
    'html_strip',
    tokenizer= 'keyword',
    filter=['lowercase'],
)

@registry.register_document
class MyDocument(Document):
    title = fields.TextField(
        analyzer=html_strip,
        fields={'raw': fields.KeywordField()}
    )

class Index:
    name = 'jobs'  # Name of Elasticsearch index
    settings = {
        'number_of_shards': 1,
        'number_of_replicas': 0
    }

class Django:
    model = Job
    fields = [
        'salary_min',
        'salary_high'
    ] 
```

这是我的 view.py 文件。在这里，我正在查询搜索对象。在这里，我使用了一个函数，其中传递了需要搜索的关键字。

```
def search_job_titles_for_autocomplete(keyword):
    autocomplete = list()
    search = f"*{keyword}*"

    queryset = JobDocument.search().query('wildcard', title=search)

    for job in queryset:
        job_to_dict = job.to_dict()
        autocomplete.append(job_to_dict["title"])

return autocomplete 
```

它返回标题列表，我的问题就解决了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-26T05:54:43.423

而不是术语查询，这可以通过使用来搜索

在 Java 中使用高级休息客户端

```
query.must((QueryBuilders.matchQuery("name", searchMap.get("JM Bruno")).minimumShouldMatch("100%"))); 
```

直接在弹性搜索中

获取 /_搜索

```
{
    "query": {
        "match" : {
            "name" : {
                "query" : "JM Bruno",
                "cutoff_frequency" : 0.001
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-10T06:11:15.907

您需要设置一个[多字段类型](https://www.elastic.co/guide/en/elasticsearch/reference/current/_multi_fields.html)

也看看这个非常酷的[教程](http://joelabrahamsson.com/elasticsearch-101/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-05-29T19:40:48.233

我遇到了同样的问题，我唯一想到的就是用“？”替换空格字符。通配符。看起来默认标记器以及我在查询字符串搜索中特别要求的标记器被忽略了。

# jsp - 用逻辑高亮交替行：迭代

> ID：14333783
> 
> 赞同：2
> 
> 时间：2013-01-15T08:33:10.467
> 
> 标签：jsp, struts

下面的代码给了我相同颜色的行。如何用相同的颜色突出显示此表中的交替行

```
<logic:iterate id="ulist" name="HomeForm" property="userList">
  <tr >
    <td class="content"><bean:write name="ulist" property="username"  />&nbsp;</td>
    <td class="content"><bean:write name="ulist" property="city"  />&nbsp;</td>
</tr>   
</logic:iterate> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T10:12:12.773

没有脚本的代码

```
<logic:iterate id="myData" name="myListFormBean" property="myList" indexId="tableCounter">
    <tr class="${tableCounter%2==0 ? 'Even':'Odd'}">
</logic:iterate> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T13:16:23.343

我正在使用这段代码：

```
<logic:iterate id="myData" name="myListFormBean" property="myList" indexId="tableCounter">
<%
if (tableCounter % 2 == 0) {
    tdClass = " white ";
} else {
    tdClass = " gray ";
}
%>
    <td class="<%=tdClass%>"></td>
</logic:iterate> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T08:41:29.903

您必须`css` `id`为每一行分配一个不同的值，您可以使用隐式迭代器属性来获得它。

另一种解决方案是使用像[displaytag](http://www.displaytag.org/1.2/)这样的库，它会自动将属性添加`odd`到`even`行中，这些属性可以在`css`样式表中使用。

# kendo-ui - 带有参数的 KendoGrid 下拉菜单

> ID：14333784
> 
> 赞同：0
> 
> 时间：2013-01-15T08:33:12.783
> 
> 标签：kendo-ui, master-detail, kendo-grid

我已经使用 MVC、Entities 和 KendoGrids 构建了一个主从细节，但我遇到了问题。

我必须从“主”KendoGrid（Tickets）中获取 CustomerID，以便在“详细信息”（TicketsDetails）中检索 CustomerContact 下拉列表。

我对如何编写这样的事情感到困惑

提前谢谢！

编辑：这是代码

掌握

```
 @(Html.Kendo().Grid<ModelApp.Models.Tickets>()
.Name("ticketgrid")
.Columns(columns =>
    {

        columns.Bound(p => p.TicketID).Title("ID").Width(100);
        columns.ForeignKey(p => p.CustomerID, (System.Collections.IEnumerable)ViewData["customers"], "CustomerID", "CustomerName").Title("Customer").Width(200) ;
        columns.ForeignKey(p => p.AreaOfBusinessID, (System.Collections.IEnumerable)ViewData["areaofbusinesses"], "AreaOfBusinessID", "AreaOfBusiness1").Title("AreaOfBusiness").Width(100);
        columns.Bound(p => p.OccurredOn).Title("Occured").Format("{0:yyyy-MM-dd}").Width(150);
        columns.ForeignKey(p => p.SeverityID, (System.Collections.IEnumerable)ViewData["severities"], "SeverityID", "Severity1").Title("Severity").Width(100);
        columns.ForeignKey(p => p.AssigneeID, (System.Collections.IEnumerable)ViewData["assignees"], "AssigneeID", "AssigneeName").Title("Assignee").Width(100);
        columns.ForeignKey(p => p.TicketStatusID, (System.Collections.IEnumerable)ViewData["ticketstatuses"], "TicketStatusID", "TicketStatus1").Title("Status").Width(100);
        columns.Bound(p => p.UserID).Title("User").Width(100);
        columns.Bound(p => p.DateRegistered).Title("Registered").Format("{0:yyyy-MM-dd}").Width(150);
})
    .ClientDetailTemplateId("ticketdetailTemplate")
.DataSource(dataSource => 
    dataSource
.Ajax()
    //.Filter(filter => filter.Add(e => e.CustomerID).IsEqualTo(CustomerID))
.Model
(model=>{
    model.Id(p => p.TicketID);
    model.Field(p=>p.TicketID).Editable(false);
    model.Field(p => p.CustomerID );
    model.Field(p => p.AreaOfBusinessID );
    model.Field(p => p.OccurredOn );
    model.Field(p => p.SeverityID );
    model.Field(p => p.AssigneeID );
    model.Field(p => p.TicketStatusID );
    model.Field(p => p.UserID );
    model.Field(p => p.DateRegistered );

})
.Read(read => read.Action("Index","Ticket"))
.Create(create => create.Action("Create", "Ticket"))
.Update(update => update.Action("Edit", "Ticket"))
//.Destroy(destroy => destroy.Action("Delete", "Ticket"))        
        )
        .Pageable()
        .Navigatable()
        .Selectable()
        .Sortable()
        .Editable(editing => editing.Mode(GridEditMode.InCell))
        .ToolBar(toolbar =>
        {
            toolbar.Create();
            toolbar.Save();
        })

 ) 
```

细节

```
<script id="ticketdetailTemplate"  type="text/kendo-tmpl">
@(Html.Kendo().Grid<ModelApp.Models.TicketsDetails>()
        .Name("ticketdetailgrid")
        .Columns(columns =>
        {
            columns.Bound(o => o.TicketsDetailID).Title("ID").Width(100);
            columns.Bound(o => o.TicketID ).Title("Ticket").Width(100);

            columns.ForeignKey(o => o.CustomerContactID, (System.Collections.IEnumerable)ViewData["customercontacts"], "CustomerContactID", "CustomerContactName").Title("CustomerContact").Width(150) ;
            columns.ForeignKey(o => o.TicketsDetailsViaID, (System.Collections.IEnumerable)ViewData["ticketsdetailsvia"], "TicketsDetailsViaID", "TicketsDetailsVia1").Title("Via").Width(100) ;

            columns.Bound(o => o.TicketsDetailsDesciption).Title("Description").Width(300);
            columns.Bound(o => o.TicketsdetailsNotes).Title("Notes").Width(200);
            columns.Bound(o => o.UserID).Title("User").Width(100);
            columns.Bound(o => o.DateTimeStart).Format("{0:yyyy-MM-dd}").Title("Start").Width(150);
            columns.Bound(o => o.DateTimeFinish).Format("{0:yyyy-MM-dd}").Title("Finish").Width(150);
            columns.Bound(o => o.DateRegistered).Format("{0:yyyy-MM-dd}").Title("Registered").Width(150);

        })
        .DataSource(dataSource => dataSource
            .Ajax()
            .Model
            (model =>
            {
                model.Id(q => q.TicketsDetailID);
                model.Field(q => q.TicketsDetailID).Editable(false);
                model.Field(q => q.TicketID);
                model.Field(q => q.TicketsDetailsDesciption);
                model.Field(q => q.TicketsdetailsNotes);
                model.Field(q => q.UserID);
                model.Field(q => q.DateTimeStart);
                model.Field(q => q.DateTimeFinish);
                model.Field(q => q.DateRegistered);

            })
            .Read(read => read.Action("TicketsDetailsRead", "Ticket", new { ticketID = "#=TicketID#" }))
            .Update(update => update.Action("TicketsDetailsEdit", "Ticket"))
        )
        .Pageable()
        .Sortable()
        .Editable(editing => editing.Mode(GridEditMode.InCell))
    .ToolBar(toolbar =>
    {
        toolbar.Create();
        toolbar.Save();
    })
            .ToClientTemplate()
) 
```

和 CustomerContacts 的实体

```
 public partial class CustomerContacts
{
    public decimal CustomerContactID { get; set; }
    public decimal CustomerID { get; set; }
    public string CustomerContactName { get; set; }
    public string CustomerContactPhone { get; set; }
    public Nullable<int> CustomerContactDuty { get; set; }
} 
```

我想从 master 获取 CustomerID 的值，并用它来检索详细信息中的 CustomerContactID 下拉列表

```
columns.ForeignKey(o => o.CustomerContactID, (System.Collections.IEnumerable)ViewData["customercontacts"], "CustomerContactID", "CustomerContactName").Title("CustomerContact").Width(150) ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:50:04.547

请分享一些代码。目前尚不清楚您尝试了什么以及您在哪里需要该 masterID。基本上，您需要使用诸如**#= #**之类的ClientExpression或父网格的**[dataItem](http://docs.kendoui.com/api/web/grid#dataitem)**方法。

# sql - 使用 jpa 将数据库中的日期与当前日期进行比较

> ID：14333785
> 
> 赞同：0
> 
> 时间：2013-01-15T08:33:13.677
> 
> 标签：sql, sql-server-2008, hibernate, jpa, hibernate-entitymanager

我正在使用 JPA 1 和休眠作为提供者。我想将实体的日期与当前日期（无论时间如何）进行比较，并将该字段保存为时间戳（因为我需要它）。当我通过以下代码使用 oracle 方言时，我得到了正确的结果：

```
select t from Task t where to_date(t.createdOn) = to_date(CURRENT_DATE) 
```

但是当我切换到 sql server(2008) 时，它不起作用。我需要一种通用的方式，以便我可以使查询数据库独立。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:38:03.040

这是您的 oracle 代码的精确模拟

```
SELECT * FROM Task t
WHERE CAST(t.createdOn as date) = cast(getdate() as date) 
```

但我建议使用这个：

```
SELECT * FROM Task t
WHERE t.createdOn >= cast(getdate() as date)
      AND t.createdOn < DATEADD(d, 1, cast(getdate() as date)) 
```

**编辑**

有关如何配置`Hibernate`以使用的详细信息，`SQL SERVER 2008`请参阅[此](http://androidyou.blogspot.com/2011/01/how-to-test-hibernate-data-access-with.html)

# c++ - 使用英特尔编译器编译 DLL 时出错

> ID：14333788
> 
> 赞同：1
> 
> 时间：2013-01-15T08:33:44.647
> 
> 标签：c++, winapi, dll, compiler-construction, intel

我正在尝试从控制台编译 DLL，而不使用任何 IDE 并面临下一个错误。

我写了这段代码：

**test_dll.cpp**

```
#include <windows.h>
#define DLL_EI __declspec(dllexport)

BOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD fwdreason, LPVOID lpvReserved){
  return 1;
}
extern "C" int DLL_EI func (int a, int b){
  return a + b;
} 
```

然后用 command 编译`icl /LD test_dll.cpp`。我试图`func`从另一个程序中调用它：

**程序.cpp**

```
int main(){
  HMODULE hLib;
  hLib = LoadLibrary("test_dll.dll");  
  double (*pFunction)(int a, int b);
  (FARPROC &)pFunction = GetProcAddress(hLib, "Function");
  printf("begin\n");
  Rss = pFunction(1, 2);
} 
```

用 编译它`icl prog.cpp`。然后我运行它，它失败并显示标准窗口*"Program is not working"*。可能存在*分段错误*错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:38:09.537

检查两者`LoadLibrary()`并`GetProcAddress()`成功，在这种情况下，它们肯定不会因为导出的函数被调用`func`，而不是`"Function"`在参数中指定的`GetProcAddress()`意思是函数指针将`NULL`在尝试调用它时。

函数指针的签名也与导出函数的签名不匹配，导出函数返回 an`int`并且函数指针期待 a `double`。

例如：

```
typedef int (*func_t)(int, int);

HMODULE hLib = LoadLibrary("test_dll.dll");
if (hLib)
{
    func_t pFunction = (func_t)GetProcAddress(hLib, "func");
    if (pFunction)
    {
        Rss = pFunction(1, 2);
    }
    else
    {
        // Check GetLastError() to determine
        // reason for failure.
    }
    FreeLibrary(hLib);
}
else
{
    // Check GetLastError() to determine
    // reason for failure.
} 
```

# javascript - 寻找哪个 被选中 (without JQuery) I have the following Element: <select id="color" name="colorId" class="btn secondary"><option value="347366" selected="selected">Purple</option> <option value="56634">White ID：14333797 赞同：8 时间：2013-01-15T08:34:28.920 标签：javascript, html, css-selectors 回答 #1 赞同：23 时间：2014-06-05T19:36:06.517 使用 :checked 选择器。这适用于复选框、单选和选择 document.querySelector('#color option:checked') 对于节点 document.querySelector('#color option:checked').value 为价值 回答 #2 赞同：10 时间：2013-01-15T08:36:15.913 在纯 JavaScript 中： var select = document.getElementById('color'); var currentOpt = select.options[select.selectedIndex]; JsBin 示例： http: //jsbin.com/ogunet/1/edit（打开你的 js 控制台） 回答 #3 赞同：1 时间：2013-01-15T08:40:10.687 这将返回选定的选项值和文本。希望这对你有用.. 干杯 var elt = document.getElementById('color'); // get option selected var option = elt.options[elt.selectedIndex].value; var optionText = elt.options[elt.selectedIndex].text; 回答 #4 赞同：0 时间：2013-01-15T08:37:43.073 使用获取<select>DOM元素getElementById()并获取其参数selectedIndex： var select = document.getElementById( 'color' ), selIndex = select.selectedIndex;, selElement = select.getElementsByTagName( 'option' )[ selIndex ]; 回答 #5 赞同：0 时间：2019-11-30T22:04:51.297 你可以这样querySelectorAll做querySelector document.querySelectorAll('option:checked')[0].innerText 或者 document.querySelectorAll('option:checked')[0].value 回答 #6 赞同：0 时间：2021-07-02T06:46:15.473 selectedOptions在从选择元素中取回所选选项时是一个有效选项 文档中的演示： let orderButton = document.getElementById("order"); let itemList = document.getElementById("foods"); let outputBox = document.getElementById("output"); orderButton.addEventListener("click", function() { let collection = itemList.selectedOptions; // <-- used here let output = ""; for (let i=0; i<collection.length; i++) { if (output === "") { output = "Your order for the following items has been placed: "; } output += collection[i].label; if (i === (collection.length - 2) && (collection.length < 3)) { output += " and "; } else if (i < (collection.length - 2)) { output += ", "; } else if (i === (collection.length - 2)) { output += ", and "; } } if (output === "") { output = "You didn't order anything!"; } outputBox.innerHTML = output; }, false); <label for="foods">What do you want to eat?</label><br> <select id="foods" name="foods" size="7" multiple> <option value="1">Burrito</option> <option value="2">Cheeseburger</option> <option value="3">Double Bacon Burger Supreme</option> <option value="4">Pepperoni Pizza</option> <option value="5">Taco</option> </select> <br> <button name="order" id="order"> Order Now </button> <p id="output"> </p></option></select>

# php - 如果主机没有 CURL 扩展，如何通过 php 发送带有参数的 get 请求？

> ID：14333798
> 
> 赞同：0
> 
> 时间：2013-01-15T08:34:46.990
> 
> 标签：php, javascript

当用户提交表单时我需要发送一条短信，我有 2 种方式通过 javascript 发送它

```
$.ajax({
        url: encodeURI('http://gate.smsaero.ru/send/?user=myuser&password=mypassword&to=4920942894&text=test&from=fromTest'),
        type: 'GET',
        crossDomain: true,
        dataType: 'jsonp',
        success: function() { alert("Success"); },
        error: function() { alert('Failed!');
 } 
```

但是在这里我有一个问题，我收到有关登录名和密码不正确的错误，这是编码问题还是可能是什么？

或者通过带参数的php发送但主机不提供CURL库，我该如何发送？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:41:23.833

在 PHP 中，您可以尝试：

```
$result = file_get_contents('http://gate.smsaero.ru/send/?user=myuser&password=mypassword&to=4920942894&text=test&from=fromTest'); 
```

# ruby-on-rails - 用于有抱负的实用程序应用程序的廉价 Rails 托管解决方案

> ID：14333800
> 
> 赞同：2
> 
> 时间：2013-01-15T08:34:57.650
> 
> 标签：ruby-on-rails, ruby, amazon-web-services, hosting, web-hosting

我的 google-fu 技能似乎没有获得任何绝对结果。我开发了这个简洁的实用应用程序，不希望吸引所有流量，但对需要它的人有用。

由于它的非营利性实用程序，我不能/负担不起每月花费超过 5~7 美元。有 heroku 免费解决方案和 AWS 解决方案。但是这些足以驱动我的应用程序请求和数据库空间需求吗？

数据空间要求不超过 300 mb（应用程序+数据库）。我预计不超过 20 个并发用户。Heroku 提供的数据库不超过 5 MB，因此毫无疑问。

Dreamhost 提供每月 8.90 的服务，但存储空间和带宽不受限制。在我看来，对于我的小型应用程序来说，这是一种矫枉过正的做法，您的想法是什么，非常感谢您提出任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:10:46.433

使用 heroku + AWS，您可以使用免费套餐，该套餐为您提供一年免费的东西 - 使用 S3 的免费存储和存储流量，使用 SES 的免费电子邮件等。

这将帮助您确定您的应用程序是否值得，而无需额外大惊小怪地管理系统。

如果一年后您决定继续使用，如果需要，您可以花 9 美元升级数据库，并且 aws 成本（300mb）将非常低，约为每 GB 10 美分

[AWS 免费套餐](http://aws.amazon.com/free/)

[Heroku 数据库计划](https://addons.heroku.com/heroku-postgresql#basic)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:01:15.433

使用 Ruby、Rails、MySQL、Postgres、Apache、Ubuntu 等，Amazon EC2 对我来说运行得非常好。

如果您对自己的系统管理感到满意，并且不计算您花费的时间，那么亚马逊的成本通常低于 Heroku。

# actionscript-3 - ActionScript 3 - 识别子字符串

> ID：14333802
> 
> 赞同：0
> 
> 时间：2013-01-15T08:35:05.523
> 
> 标签：actionscript-3, flash

我有一个 xml 文件（下面编辑），其中包含一些欧洲国家的数据：

```
xmlData = <dataSet>
 <recordSet>
    <rd id="Austria">12.3,12.6,12.0,12.4,12.0,12.1,12.6</rd>
    <rd id="Belgium">14.8,14.7,15.2,14.7,14.6,14.6,15.3</rd>
    <rd id="Bulgaria">14.0,18.4,22.0,21.4,21.8,20.7,22.3</rd>
    <rd id="Cyprus">16.1,15.6,15.5,15.7,15.3,15.3,14.5</rd>
    <rd id="Czech Republic">10.4,9.9,9.6,9.0,8.6,9.0,9.8</rd>
    ... 
 </recordSet>
 </dataSet> 
```

我需要能够将国家名称隔离为一个变量，以便稍后我可以说“如果国家 = 奥地利，请执行此操作”。

请问我该怎么做？

谢谢，

布鲁斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:50:02.113

使用这样的动态对象：

```
var xmlData:XML = <dataSet>
        <recordSet>
            <rd id="Austria">12.3,12.6,12.0,12.4,12.0,12.1,12.6</rd>
            <rd id="Belgium">14.8,14.7,15.2,14.7,14.6,14.6,15.3</rd>
            <rd id="Bulgaria">14.0,18.4,22.0,21.4,21.8,20.7,22.3</rd>
            <rd id="Cyprus">16.1,15.6,15.5,15.7,15.3,15.3,14.5</rd>
            <rd id="Czech Republic">10.4,9.9,9.6,9.0,8.6,9.0,9.8</rd>
        </recordSet>
    </dataSet>

var map:Object = new Object();
for each (var countryXML:XML in xmlData.recordSet.rd)
{
    map[countryXML.@id] = countryXML.toString();
} 
```

现在，你可以写下你的条件：

```
if (country == "Austria")
{
    //do smth
    trace(map[country])
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:11:05.573

```
xmlData.recordSet.Austria; 
```

就是这样......如果它不是一个词：

```
xmlData.recordSet["Czech Republic"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:05:46.627

感谢您的答复。我离开办公桌一个小时。我只需要隔离国家名称，例如奥地利。在某些情况下，这将是两个词。'在引号之间，我的意思是塞浦路斯和捷克共和国

```
 <rd id="Cyprus">16.1,15.6,15.5,15.7,15.3,15.3,14.5</rd>
        <rd id="Czech Republic">10.4,9.9,9.6,9.0,8.6,9.0,9.8</rd> 
```

好，谢谢。我想虽然我需要知道 * 通用术语 * 是什么，在这种情况下是各个国家的名称。

```
 <rd id="WhatAmICalled">16.1,15.6,15.5,15.7,15.3,15.3,14.5</rd> 
```

这样我就可以这样询问：

```
 if  (WhatAmICalled == Austria) 
            {eat a strudel}
        else ...
            {   } 
```

换句话说，“WhatAmICalled”元素是什么，我如何隔离它？

**目的**是选择一个特定国家的条形图（它是一个动画条形图），并对其应用特定的颜色，并为所有其他国家的条形图应用不同的颜色。

如果我只处理一个数据集，我确实有这个解决**方案**：

```
 var myData:Number = dataArray[(numBars-1)-i][currentIndex];
    var myBar:Sprite = new Sprite();
        myBar.name = "bar"+i;
        if (myBar.name == "bar10") 
```

...但不幸的是，在这种情况下，我使用了**多个**数据集，并且国家/地区以不同的顺序出现，因此 myBar.name 路线不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T19:49:56.947

据我了解，bar 与国家及其数据相关联。因此，您可以使用适当的数据变量创建 Sprite 的类 Bar 扩展：

```
public class Bar extends Sprite
{
    public var data:XML;

    public function Bar ()
    {
        super();             
    }
} 
```

初始化条形集数据时，例如：

```
for (var i:int=0; i<xmlData.recordSet.rd.length(); i++)
{
    var bar:Bar = new Bar();
    bar.data = xmlData.recordSet.rd[i];        
} 
```

现在每个酒吧都知道自己的数据。你可以写条件：

```
if (myBar.data.@id == "Austria")
    doSomething(); 
```

希望，它会有所帮助。

# visual-c++ - LoadLibrary 函数 - 编译错误

> ID：14333805
> 
> 赞同：0
> 
> 时间：2013-01-15T08:35:13.753
> 
> 标签：visual-c++

我正在尝试构建一个使用 dll 文件的小程序。使用 VC++ 编译器，我收到一条错误消息：

错误 C2039：“LoadLibrary”：不是“全局命名空间”的成员 错误 C3861：“LoadLibrary”：找不到标识符

LoadLibrary 包含在 winbase.h 文件中，我的所有文件都包含 stdafx.h 所以，winbase 已经包含在内。我无法弄清楚为什么它无法编译......这是代码：

```
 if(m_lib) 
     ::FreeLibrary(m_lib);
  if((m_lib=::LoadLibrary(path))!=NULL)
    {
     m_pfnManVersion=reinterpret_cast<ManVersion_t>(::GetProcAddress(m_lib,"ManVersion"));
     m_pfnManCreate =reinterpret_cast<ManCreate_t>(::GetProcAddress(m_lib,"ManCreate"));
    } 
```

提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T06:15:37.660

如果您查看 windows 头文件 (WinBase.h)，您会注意到 LoadLibrary 实际上是一个宏定义，可将您重定向到 unicode 或 ascii 版本

```
#ifdef UNICODE
#define LoadLibrary  LoadLibraryW
#else
#define LoadLibrary  LoadLibraryA
#endif // !UNICODE 
```

# qt - 在QML中拖动元素时如何实时获取鼠标坐标？

> ID：14333808
> 
> 赞同：4
> 
> 时间：2013-01-15T08:35:21.793
> 
> 标签：qt, mouse, mouseevent, drag, qml

我有一个用 Qt 编写的程序，它使用 QML。

我想知道在拖动元素的过程中是否可以实时知道坐标。

实际上，我使用了一个自定义图像来替换光标，它的位置是用光标的坐标更新的（它是隐藏的）。

实际上，我可以在使用“onPositionChanged”或在单击“onClicked”之后恢复鼠标光标的位置。

我还想在拖动过程中知道这些坐标，我尝试使用“onPressed”和“onPressAndHold”但没有成功，自定义光标的位置仅在单击释放时更新。

任何帮助将不胜感激，在此先感谢您。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T09:42:43.790

拖动元素会直接更改`x`和`y`属性，以便您可以监控这些：

```
Rectangle {

    id: draggable

    width: 100
    height: 100

    onXChanged: {
        if (mouseArea.drag.active) {
            console.log("x=" + x)
        }
    }
    onYChanged: {
        if (mouseArea.drag.active) {
          console.log("y=" + y)
        }
    }

    MouseArea {
        id: mouseArea
        anchors.fill: parent
        drag {
            target: draggable
            axis: Drag.XandYAxis
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-30T11:34:16.227

考虑在 MouseArea 中设置“hoverEnabled: true”

# php - \b 修饰符不适用于 Unicode 字符

> ID：14333810
> 
> 赞同：3
> 
> 时间：2013-01-15T08:35:30.407
> 
> 标签：php, regex, unicode, preg-replace, preg-match

我想用[这个](https://stackoverflow.com/questions/1078477/replace-exact-match-in-php)问题中提到`preg_replace`的修饰符替换一个确切的词。`\b`

但它似乎不适用于波斯语和阿拉伯语等 Unicode 字符。这个例子有效：

```
preg_replace('/(\bto\b|\bis\b)/i', '', 'go to test if var is set using isset') 
```

但这一个不起作用：

```
preg_replace('/(\bاز\b|\bبه\b)/i', '', 'راه مدرسه به خونه از اونجا میگذره') 
```

有没有办法获得所需的结果，在单词边界上拆分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T08:42:28.170

自己搞定了，必须`\u`简单地使用修饰符

```
preg_replace('/(\bاز\b|\bبه\b)/iu', '', 'راه مدرسه به خونه از اونجا میگذره') 
```

# android - ProgressDialog 覆盖整个屏幕

> ID：14333812
> 
> 赞同：-1
> 
> 时间：2013-01-15T08:35:34.020
> 
> 标签：android, progressdialog

我想展示一个覆盖整个屏幕的 ProgressDialog。我的意思是当对话框显示时，不应触摸、单击或交互 UI。如何创建这样的对话框？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T08:39:28.100

这已经由普通的 ProgressDialog 完成。
只需添加`myProgressDialog.setCanceledOnTouchOutside(false);`
这可以防止对话框在用户单击屏幕时关闭。
`myProgressDialog.setCancelable(false);`防止对话框在“返回”键上关闭

# css - 有什么办法可以变富：日历假期

> ID：14333817
> 
> 赞同：1
> 
> 时间：2013-01-15T08:35:46.850
> 
> 标签：css, richfaces

我需要更改rich:calendar 组件中的假期。默认情况下，组件将假期显示为“星期日”和“星期六”。

下面是为突出显示假期而定义的样式类。

```
.rich-calendar-holly
{
background-color: #FFEBDA;
} 
```

我希望这种风格在周五和周六而不是周六和周日工作。有人可以建议我如何实现它richfaces？是否有任何属性可用于设置假期？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:21:14.603

您可以定义您的自定义 CalendarDataModel 以便它返回星期五和星期六的某个 css 类，例如

```
public class CalendarModelItem implements CalendarDataModelItem {
   //rest of code
   private String styleClass;
   public void setStyleClass(String styleClass) { this.styleClass = styleClass; }
   public String getStyleClass() { return styleClass; }
   //rest of code
}

public class CalendarModel implements CalendarDataModel {
    //rest of code
    public CalendarDataModelItem[] getData(Date[] dateArray) {
       CalendarDataModelItem[] modelItems = new CalendarModelItem[dateArray.length];
       Calendar c = Calendar.getInstance();
       for (Date d : dateArray) {                
            c.setTime(d);
            CalendarModelItem modelItem = new CalendarModelItem();
            if (calendar.get(Calendar.DAY_OF_WEEK) == Calendar.FRIDAY || calendar.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY) {
                modelItem.setStyleClass("weekend");
            } else {
                modelItem.setStyleClass("");
            }
            modelItems[i] = modelItem;
       }
       return modelItems;
    }
    //rest of code
} 
```

定义您的自定义 css 类并通过 rich-calendar-holly 重置格式

```
.rich-calendar-holly{
 background-color:white;
 color:black;
}
.weekend {
 background-color: #FFEBDA;
} 
```

然后在日历组件中使用它

```
<rich:calendar ... dataModel="#{calendarModel}" /> 
```

# php - 最后导出的列表 - 最近的列表

> ID：14333822
> 
> 赞同：0
> 
> 时间：2013-01-15T08:36:09.853
> 
> 标签：php, codeigniter

我创建了一个函数，它使我能够提取在特定目录 (mydomian.com/csv_bakup/) 中创建的最新 csv 文件的日期 这是代码....

```
public function get_last_list_exported(){
      $date_str_arr = array();

      // timestamp of last csv file ?
      exec('ls -ltr mydomian.com/csv_bakup/ | tail -1',$output);
      $temp_a = explode(' ', $output[0]);      
      $date_str_arr = explode('_', $temp_a[9]); 
      return $date_str_arr[0].'/'.$date_str_arr[1].'/20'.$date_str_arr[2];
} 
```

该函数利用 php exec() 函数来运行 linux 命令。

一切都在本地运行良好，但是当我将它迁移到实时服务器时，它`undefined offsets`会在行中出错

```
return $date_str_arr[0].'/'.$date_str_arr[1].'/20'.$date_str_arr[2]; 
```

像这样运行linux命令似乎是最简单的解决方案......

是否有更好但更简单的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:22:41.483

这是我想象的情况：

`undefined offset`表示您指的是不存在的数组键，这意味着该数组为空，这意味着该数组为空，这意味着`$output`该命令的执行失败。

第一个可能的原因：你的路径绝对正确吗？

第二：这可能是因为您的服务器不允许 shell 访问/仅提供非常有限的 shell 访问。检查您`php.ini`的禁用命令并阅读[http://php.net/manual/en/ini.sect.safe-mode.php#ini.safe-mode-exec-dir](http://php.net/manual/en/ini.sect.safe-mode.php#ini.safe-mode-exec-dir)。

通过在原始输出中运行一个简单的命令`exec()`来测试第一个。`var_dump()`你得到什么了吗？

另外，如果您的回答像以前的评论者所说的那样有帮助，请接受它们。

# spring - Spring：根据参数获取bean

> ID：14333823
> 
> 赞同：0
> 
> 时间：2013-01-15T08:36:15.750
> 
> 标签：spring, dependency-injection

我有一个bean工厂类如下：

```
public class BeanFactory {
public static BeanInterface getInstance(int id) {
    return new Bean(id);
    }
} 
```

我想在spring容器中使用这个类来获取Instrument类的实例，并在其中添加了一个bean条目，`applicationcontext.xml`如下所示：

```
<bean id="TestBean" class="com.test.beans.BeanFactory" factory-method="getInstance">
</bean> 
```

但是我找不到任何可以将 id 传递给`getInstance`工厂方法的方法。有什么办法可以将参数传递给这个工厂方法？

**编辑：**将 bean 工厂视为 scope="prototype"。`TestBean`我想要基于 ID 值的新实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:24:34.590

完整的解决方案是：

豆入口：

```
<bean id="TestBean"  class="com.test.beans.BeanFactory" factory-method="getInstance" abstract="false" singleton="false" >
</bean> 
```

在代码中获取bean：

```
TestBeanInterface visitingLocation = (TestBeanInterface)    ctx.getBean("TestBean",42); //passing the argument for static method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:49:25.783

`<constructor-arg>`您可以使用元素将参数传递给工厂方法：

```
<bean id="TestBean" class="com.test.beans.BeanFactory" factory-method="getInstance">
    <constructor-arg value = "42" />
</bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:50:16.103

规则与普通 Spring 构造函数相同，即您可以使用`<contructor-arg value="..."/>`

从[文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html)

> 静态工厂方法的参数是通过元素提供的，就像实际使用了构造函数一样。工厂方法返回的类的类型不必与包含静态工厂方法的类的类型相同，尽管在本例中是相同的类型。实例（非静态）工厂方法将以基本相同的方式使用（除了使用 factory-bean 属性而不是类属性），因此此处不讨论细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T08:52:24.367

您可以将类实例（另一个 bean）作为参数传递。

```
<bean id="TestBean" class="com.test.beans.BeanFactory" factory-method="getInstance">
    <property name="beanBuilder" ref="BeanBuilder"/>
</bean>

<bean id="BeanBuilder" class="com.test.beans.SelectedBeanBuilder"/> 
```

# architecture - 客户端服务器更新的设计模式

> ID：14333826
> 
> 赞同：1
> 
> 时间：2013-01-15T08:36:30.193
> 
> 标签：architecture, client-server, graniteds

我正在编写一个在客户端使用 MVC 的 Flex 应用程序。它使用 GraniteDS，因此具有远程延迟加载和反向延迟加载功能。

用户登录到应用程序，然后单击一个按钮来更新他们的电子邮件地址。然后调用控制器，但我不确定接下来按哪个顺序执行操作。我可以看到以下选项：

**选项**

1.  在客户端更新模型，然后将更新发送到服务器。如果服务器抛出错误，则告诉用户并要求他们重新加载 Flex 应用程序，因为数据现在不同步。否则假定更新正常；
2.  控制器将数据发送到服务器，服务器响应后，控制器使用更新的数据更新客户端模型。如果没有收到服务器响应，则告诉用户出现错误并要求他们重新加载应用程序，因为数据现在可能不同步。

选项 2 似乎更好，但我不确定如何实现它。我有哪些选择？

**解决方案**

1.  克隆*MyUser*并将克隆发送到服务器，当服务器返回*MyUser*然后更新模型。您将如何处理*MyUser*集合中更深的嵌套对象，因为克隆只会复制原始集合而不克隆它？
2.  将*MyUser.id*与更改的数据一起发送到服务器。*使用id*在服务器上加载*MyUser*，然后修改其数据。一旦他们的数据在服务器上被修改，然后将*MyUser*返回给客户端，以便控制器可以更新他们的模型。

 **解决方案 2 似乎是一种非常糟糕的方法，因为它绕过了延迟/反向延迟加载的 GraniteDS 功能。

他们是这样做的最佳实践方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T13:25:53.987

如果您在保存 flex 对象时遇到数据冲突，重新加载整个 flex 应用程序是一种不太方便但有效且非常可靠的解决方案。对于请求：也许您应该只显示一条消息，并允许 flex 客户端重新发送请求（例如：网络问题），并且大部分时间应该没问题。如果在 n 失败后重新启动应用程序会打扰您，请添加一个计数器（您可以对 flex 应用程序进行编程以使用 URLRequest 重新加载自身）。

关于克隆 MyUser：如果您将基本 AMF 序列化与 ObjectUtil.copy() 一起使用，它将复制嵌套字段，因为它确实是基于 IExternalizable 的“深拷贝”，而花岗岩序列化基于此。所以你关于克隆对象的解决方案应该可以工作。

您可以按照自己的方式自由使用花岗岩，例如，许多人更喜欢禁用惰性功能，即使它带来了自己的问题。我觉得处理数据冲突始终是自定义的事情，不要指望一个框架，甚至 Granite 来解决所有问题。**

# visual-c++ - ODBC 连接字符串

> ID：14333830
> 
> 赞同：0
> 
> 时间：2013-01-15T08:36:46.550
> 
> 标签：visual-c++, odbc

这是一个 VC++ ODBC 连接字符串，它是 Unicode。如何使其通用？eg：我可以输入不同数据库的用户名、密码。

```
SQLDriverConnect (sqlconnectionhandle, 
             NULL, 
             L"Driver={SQL Server};Server=123.1.78.100, 1433;Database=DB1;Uid=user123;Pwd=pw123;",
             SQL_NTS, 
             retconstring, 
             1024, 
             NULL,
             SQL_DRIVER_NOPROMPT) 
```

我试过这个，但不起作用：

```
string serverIp = "123.1.78.100, 1433";
string db_name = "DB1";
string user_id = "uesr123"
string pwd = "pw123";

string ss;
            ss.append("Driver={SQL Server};Server=");
            ss.append(serverIP);
            ss.append(";Database=");
            ss.append(dbName);
            ss.append(";Uid=");
            ss.append(uId);
            ss.append(";Pwd=");
            ss.append(pw);
            ss.append(";");

SQLDriverConnect (sqlconnectionhandle, 
             NULL, 
             (wchar_t*)ss.c_str(),
             SQL_NTS, 
             retconstring, 
             1024, 
             NULL,
             SQL_DRIVER_NOPROMPT) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:40:48.303

我试过这样：（虽然提到的用于连接的数据库在那里存在。）它工作得很好。

```
String ss;
            ss =  ("Driver={SQL Server};Server=");
            ss = ss + (serverIp);
            ss = ss + (";Database=");
            ss = ss + (db_name);
            ss = ss + (";Uid=");
            ss = ss + (uId);
            ss = ss + (";Pwd=");
            ss = ss + (pwd);
            ss = ss + (";"); 
```

确保使用名称创建数据库... 在连接到数据库之前

# java - 当值不为空时java分配属性

> ID：14333838
> 
> 赞同：1
> 
> 时间：2013-01-15T08:37:13.023
> 
> 标签：java, properties, null

我使用 java.lang.properties 读取配置文件并将配置值分配给类的字段。但我不想在配置文件中设置所有属性。这意味着，某些字段可以具有默认值并在配置文件中被省略。所以我的代码应该是这样的：

```
if(properties.getProperty("key")!=null){
    value = properties.getProperty("key");
} 
```

但是有很多字段要像这样编码。有没有办法避免这种无聊的工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T08:39:42.067

请改用默认值参数：

```
value = properties.getProperty("key", <default value>); 
```

如果在此属性列表中找不到键，它将使用默认值。

PS de bene esse，例如。`value = properties.getProperty("key", "blabla, this is default value");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:41:51.147

您可以创建一个属性字段数组，然后使用循环遍历它们并设置值。

```
String[] arr = {"Abc","Def"};
for(String s : arr){
  if(properties.getProperty(s)!=null){
    value = properties.getProperty(s);
  }
} 
```

但请注意，您还需要一些逻辑来设置不同的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:52:32.290

您应该将您的属性建模为如下类：

```
class Prop {
      private String value;
      private String key;
      private String default;
      ...

      public void load(Properties properties) {
         if (properties.getProperty(key)!=null) {
            value = properties.getProperty(key, default);
         }
      }
    } 
```

这样，您可以声明一个`Prop`数组并以这种方式初始化它：

```
 for (Prop prop: props) {
      prop.load(properties);
   } 
```

或者更好地制作这样的静态类初始化方法：

```
static public void loadProperties(Properties properties) {
       for (Prop prop: props) {
          prop.load(properties);
       }
   } 
```

# java - Java 密码密钥转换无法正常工作

> ID：14333840
> 
> 赞同：0
> 
> 时间：2013-01-15T08:37:31.270
> 
> 标签：java, key, encryption

我有代码：

```
String Password = PasswordText.getText();
SecretKeySpec SKC = new SecretKeySpec(Password.getBytes(), "DES");
PBEKeySpec PKS = new PBEKeySpec(Password.toCharArray());
SecretKeyFactory SKF = null;
try{
    SKF = SecretKeyFactory.getInstance("DES");
} catch(NoSuchAlgorithmException AlgorithmFail) {
    return;
}
SecretKey CipherKey = null;
try{
    CipherKey = SKF.generateSecret(SKC);
} catch(InvalidKeySpecException KeyFail) {
    return;
} 
```

在最后一条语句中，我导致失败：“不适当的密钥规范”。该失败也导致我在最后一条语句中使用 SKC 而不是 PKS。我使用的代码示例来自互联网。请把我踢到我的错误。在所有示例中，但语句确实有效：

```
SecretKey MyKey = SecretKeyFactory.getInstance("DES")
                    .generateSecret(new PBEKeySpec(Password.toCharArray())); 
```

可以帮助我吗？ **请！！！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:43:29.217

看看本教程，它适用于 DES 加密

[http://www.avajava.com/tutorials/lessons/how-do-i-encrypt-and-decrypt-files-using-des.html](http://www.avajava.com/tutorials/lessons/how-do-i-encrypt-and-decrypt-files-using-des.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:52:26.257

您不能随意混合和匹配这些 keyspecs。不幸的是，文档非常令人困惑，并且不清楚如何执行此操作。Sun 提供者的 SecretKeyFactory 似乎要求 DES 密钥由[DESKeySpec](http://docs.oracle.com/javase/6/docs/api/javax/crypto/spec/DESKeySpec.html)实例指定：`DESKeySpec SKC = new DESKeySpec(Password.getBytes());`

不幸的是，我不明白你问题的其余部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:57:38.860

您可以将 Bouncy Castle 添加为提供程序。然后加：

```
Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider()); 
```

到你的例子的开头。并使用：

```
secretKeyFactory = SecretKeyFactory.getInstance("DES", "BC"); 
```

您需要使您的项目依赖于`bcprov`jar（可能`bcprov-jdk15on-147.jar`）。从[这里](http://bouncycastle.org/latest_releases.html)下载。

# javascript - 如何使输入的宽度等于否。词的价值？

> ID：14333848
> 
> 赞同：0
> 
> 时间：2013-01-15T08:38:06.477
> 
> 标签：javascript, css

如果我的价值是 xyz

我不希望输入宽度 = 100% 我希望输入宽度会自动调整大小等于输入值中的字数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:18:49.983

有点*hacky*，但我发现以下是一种可能的方法：

示例标记：

```
<input />
<span id="input-width-helper"></span> 
```

CSS：

```
input {
  min-width: 20px;
  width: 20px;
}

#input-width-helper {
  position: absolute;
  visibility: hidden;
  /* extra styles would be needed, if the input has other styles
     affecting it's font, width, etc. */
} 
```

js：

```
$('input').on('keydown', function () {
  var
    $this = $(this),
    $helper = $('#input-width-helper');

  setTimeout(function () {
    // the '+ 10' here is arbitrary to account for paddings/borders
    // if the hidden helper ('#input-width-helper') is styled correctly,
    // this could probably be removed
    $this.css('width', $helper.text($this.val()).width() + 10); 
  }, 0);
}); 
```

演示：http: [//jsbin.com/aqakus/3/](http://jsbin.com/aqakus/3/)

*注意：当然，这需要熟练使用多个输入！*

# android - webview 和 youtube 视频

> ID：14333852
> 
> 赞同：1
> 
> 时间：2013-01-15T08:38:16.940
> 
> 标签：android

对不起我的英语不好。这是我的问题。我有一个 html 文件，其中有一些 youtube 视频。我在 webview 中加载这个文件。当网络视图的活动开始时，我会看到视频缩略图，然后我会单击它们以在智能手机的媒体播放器或浏览器中观看它们。

视频嵌入到带有标签的 html 文件中：

*   object => 我可以看到缩略图，但如果我点击它，它不会打开视频

*   iframe => 我可以看到缩略图，如果我点击它，视频就会开始，但是： - 如果我点击暂停然后播放，音频会重新开始，但视频不会 - 我无法全屏观看视频

*   视频 => 我可以看到缩略图，但如果我点击它，它会出现一个灰色方块，就像缺少插件一样

有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:42:36.570

这[是一个](https://stackoverflow.com/q/1711078/1108032)讨论在 Android 中使用默认媒体播放器播放嵌入式视频并支持所有可能的手机的问题的线程。[我的回答](https://stackoverflow.com/questions/1711078/html5-video-element-on-android/8952025#8952025)在所有情况下都对我有用。

**编辑**这是我如何使用`img`标签播放视频的完整示例：

```
<a href="javascript:window.JSInterface.startVideo('video.mp4');"
    class="video-tag" >
    <img class="video-icon" src="video_icon.png">
    <img src="video_poster.jpeg" class = "video-background">
</a> 
```

这是我用于启动视频的代码：

```
public void startVideo(String videoAddress) {
    Intent intent = new Intent(activity, VideoPlayerActivity.class);
    Bundle extras = new Bundle();
    extras.putString(VideoPlayerActivity.VIDEO_LOCATION_TAG, videoAddress);
    intent.putExtras(extras);
    activity.startActivity(intent);
} 
```

这`VideoPlayerActivity`也是我开发的活动 - 它基本上授予对视频文件的临时访问权限，播放它然后撤销访问权限。

现在我使用的 css：

```
.video-icon {
    margin-bottom: 20px;
    background: rgba(0, 0, 0, 0.6);
    position: absolute;
    top: 0;
    left: 0;
    padding: 2%;
    width: 11.4%;
    padding: 0;
    width: 100%;
}
.video-tag {
    position: relative;
    display: block;
} 
```

现在选择适当的图标，您可以使它看起来非常类似于真实的视频标签，并且它适用于所有平台。

# xml - 这个 XML 有什么问题，格式不正确？

> ID：14333853
> 
> 赞同：0
> 
> 时间：2013-01-15T08:38:30.617
> 
> 标签：xml

我现在有这个 XML（从 PHP 数组创建）：

```
<?xml version="1.0" encoding="UTF-8"?>
<documentation_export>
<_data_documentation>
    <309>The quick brown fox jumps over prepared statement.</309>
    <310>Test 1</310>
    <312>Test 2</312>
    <313>nmnmnmnmn</313>
</_data_documentation>
</documentation_export> 
```

它显示 XML Parsing Error: not well-formed..我对 XML 格式不是很熟悉。这个 XML 文件是否仍然可用或者可以转换回 PHP 数组变量（尽管有错误）？

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:41:26.650

从结构上看，它看起来不错，但我认为标签不能以数字命名或以数字开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:43:43.167

标签名称不能以数字、字符串`xml`或标点符号开头。阅读更多[http://www.w3schools.com/xml/xml_elements.asp](http://www.w3schools.com/xml/xml_elements.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:03:43.283

我认为生成 xml 时会发生错误。刚刚使用 w3 validator 验证了这个 xml。共发现 7 个错误，其中一个是：

***第 4 行第 5 列：字符“<”是分隔符的第一个字符，但作为数据出现 <309> 快速棕色狐狸跳过准备好的语句。✉ 此消息可能在以下几种情况下出现：您尝试在页面中包含“<”字符：您应该将其转义为“<”您使用了未转义的 & 符号“&”：这在某些情况下可能是有效的，但它是建议使用“&”，它总是安全的。另一种可能性是您忘记关闭前一个标签中的引号。***

听到的是[w3validator的链接](http://validator.w3.org/)

所以我认为解决方案存在于生成 XML 的代码中。

# jquery - 未捕获的 SyntaxError：意外的令牌 JSON

> ID：14333856
> 
> 赞同：1
> 
> 时间：2013-01-15T08:38:39.690
> 
> 标签：jquery, json

大家好，我正在尝试从本网站的 Web 服务获取此 json 文件：“http://172.20.192.218:8080/DC_Local/rest/datacorrelation?type=/soccer/football_team&limit=20&callback=?”

但是我得到了这个“Uncaught SyntaxError：Unexpected token”但我不知道有什么问题。

这是我调用 json 文件的代码：

```
var pts = [];
    $.getJSON("http://172.20.192.218:8080/DC_Local/rest/datacorrelation?type=/soccer/football_team&limit=20&callback=?", function(data) {
        //JSON.parse(data);

        $.each(data, function(i,v){
            pts.push([v.topic, v.audience.length]);
        });
     }); 
```

这是我想要获取的 json 文件：

```
{"data":[{"id":"/en/arsenal_fc","topic":"Arsenal F.C.","audience":[],"type":"/soccer/football_team"},{"id":"/en/ajax_amsterdam","topic":"Ajax Amsterdam","audience":[],"type":"/soccer/football_team"},{"id":"/en/az_alkmaar","topic":"AZ Alkmaar","audience":[],"type":"/soccer/football_team"},{"id":"/en/as_roma","topic":"A.S. Roma","audience":[],"type":"/soccer/football_team"},{"id":"/en/ac_milan","topic":"A.C. Milan","audience":[],"type":"/soccer/football_team"},{"id":"/en/acf_fiorentina","topic":"ACF Fiorentina","audience":[],"type":"/soccer/football_team"},{"id":"/en/bristol_city_fc","topic":"Bristol City F.C.","audience":[],"type":"/soccer/football_team"},{"id":"/en/charlton_athletic_fc","topic":"Charlton Athletic F.C.","audience":[],"type":"/soccer/football_team"},{"id":"/en/ac_chievoverona","topic":"A.C. Chievo Verona","audience":[],"type":"/soccer/football_team"},{"id":"/en/chelsea_fc","topic":"Chelsea F.C.","audience":[{"information":[{"category":"Athlete","source":"Frank Lampard"}],"username":"Tan Jercia","userid":"100003921730958"},{"information":[{"category":"Athlete","source":"Didier Drogba"},{"category":"Athlete","source":"Frank Lampard"},{"category":"Professional sports team","source":"Chelsea Football Club"},{"category":"favorite_athletes","source":"Peter Cech"},{"category":"favorite_athletes","source":"Didier Drogba"},{"category":"favorite_athletes","source":"Frank Lampard"}],"username":"Ang Peterson","userid":"100003914111287"}],"type":"/soccer/football_team"},{"id":"/en/england_national_football_team","topic":"England national football team","audience":[],"type":"/soccer/football_team"},{"id":"/en/fulham_fc","topic":"Fulham F.C.","audience":[],"type":"/soccer/football_team"},{"id":"/en/f_c_den_bosch","topic":"F. C. Den Bosch","audience":[],"type":"/soccer/football_team"},{"id":"/en/hellas_verona_fc","topic":"Hellas Verona F.C.","audience":[],"type":"/soccer/football_team"},{"id":"/en/fc_internazionale_milano","topic":"F.C. Internazionale Milano","audience":[],"type":"/soccer/football_team"},{"id":"/en/juventus_fc","topic":"Juventus F.C.","audience":[],"type":"/soccer/football_team"},{"id":"/en/liverpool_fc","topic":"Liverpool F.C.","audience":[],"type":"/soccer/football_team"},{"id":"/en/luton_town_fc","topic":"Luton Town F.C.","audience":[],"type":"/soccer/football_team"},{"id":"/en/manchester_united_fc","topic":"Manchester United F.C.","audience":[{"information":[{"category":"Professional sports team","source":"Manchester United"}],"username":"Tan Jercia","userid":"100003921730958"}],"type":"/soccer/football_team"},{"id":"/en/plymouth_argyle_fc","topic":"Plymouth Argyle F.C.","audience":[],"type":"/soccer/football_team"}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:47:37.913

你必须写`$.each(data.data, function(i,v){`而不是`$.each(data, function(i,v){`.

样本：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Add many Elements</title>
        <script src="jquery.js"></script>
        <script>
            $(document).ready(function() {
            var dataString = '{"data":[{"id":"/en/arsenal_fc","topic":"Arsenal F.C.","audience":[],"type":"/soccer/football_team"},{"id":"/en/ajax_amsterdam","topic":"Ajax Amsterdam","audience":[],"type":"/soccer/football_team"},{"id":"/en/az_alkmaar","topic":"AZ Alkmaar","audience":[],"type":"/soccer/football_team"},{"id":"/en/as_roma","topic":"A.S. Roma","audience":[],"type":"/soccer/football_team"},{"id":"/en/ac_milan","topic":"A.C. Milan","audience":[],"type":"/soccer/football_team"},{"id":"/en/acf_fiorentina","topic":"ACF Fiorentina","audience":[],"type":"/soccer/football_team"},{"id":"/en/bristol_city_fc","topic":"Bristol City F.C.","audience":[],"type":"/soccer/football_team"},{"id":"/en/charlton_athletic_fc","topic":"Charlton Athletic F.C.","audience":[],"type":"/soccer/football_team"},{"id":"/en/ac_chievoverona","topic":"A.C. Chievo Verona","audience":[],"type":"/soccer/football_team"},{"id":"/en/chelsea_fc","topic":"Chelsea F.C.","audience":[{"information":[{"category":"Athlete","source":"Frank Lampard"}],"username":"Tan Jercia","userid":"100003921730958"},{"information":[{"category":"Athlete","source":"Didier Drogba"},{"category":"Athlete","source":"Frank Lampard"},{"category":"Professional sports team","source":"Chelsea Football Club"},{"category":"favorite_athletes","source":"Peter Cech"},{"category":"favorite_athletes","source":"Didier Drogba"},{"category":"favorite_athletes","source":"Frank Lampard"}],"username":"Ang Peterson","userid":"100003914111287"}],"type":"/soccer/football_team"},{"id":"/en/england_national_football_team","topic":"England national football team","audience":[],"type":"/soccer/football_team"},{"id":"/en/fulham_fc","topic":"Fulham F.C.","audience":[],"type":"/soccer/football_team"},{"id":"/en/f_c_den_bosch","topic":"F. C. Den Bosch","audience":[],"type":"/soccer/football_team"},{"id":"/en/hellas_verona_fc","topic":"Hellas Verona F.C.","audience":[],"type":"/soccer/football_team"},{"id":"/en/fc_internazionale_milano","topic":"F.C. Internazionale Milano","audience":[],"type":"/soccer/football_team"},{"id":"/en/juventus_fc","topic":"Juventus F.C.","audience":[],"type":"/soccer/football_team"},{"id":"/en/liverpool_fc","topic":"Liverpool F.C.","audience":[],"type":"/soccer/football_team"},{"id":"/en/luton_town_fc","topic":"Luton Town F.C.","audience":[],"type":"/soccer/football_team"},{"id":"/en/manchester_united_fc","topic":"Manchester United F.C.","audience":[{"information":[{"category":"Professional sports team","source":"Manchester United"}],"username":"Tan Jercia","userid":"100003921730958"}],"type":"/soccer/football_team"},{"id":"/en/plymouth_argyle_fc","topic":"Plymouth Argyle F.C.","audience":[],"type":"/soccer/football_team"}]}'
                var pts = [];
        var data = JSON.parse(dataString);

        $.each(data.data, function(index,data){
            pts.push([data.topic, data.audience.length]);
        });
            });
        </script>
    </head>
    <body>
        <div class="testDiv">
            <div class="testDivPos"></div>
        </div>
    </body>
</html> 
```

# angularjs - 如何掌握 AngularJS？

> ID：14333857
> 
> 赞同：265
> 
> 时间：2013-01-15T08:38:44.913
> 
> 标签：angularjs

我对 AngularJS 很陌生，我觉得它有点尴尬。简单的东西很容易，但高级的东西要困难得多（指令，提供者/服务/工厂......）

该[文档](http://docs.angularjs.org/api)对刚开始学习这些东西的人来说不是很有帮助。我发现自己一直在寻找我需要的东西的指令，而不是自己写。

我尝试[了 Ember.js](http://emberjs.com/)，而且我的工作效率更高，但 API 仍在发生重大变化，所以我现在更喜欢跳过它。

有没有更好的资源可以正确进入 AngularJS？

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2013-06-28T11:41:10.663

这是我遇到的最全面的 AngularJS 学习资源库：

[**AngularJS-学习**](https://github.com/jmcunningham/AngularJS-Learning)

挑选出最好的部分（按照推荐的学习顺序）：

*   [http://www.egghead.io/](http://www.egghead.io/) - 一系列简短的 AngularJS 视频
*   [AngularJS Cheatsheet](http://www.cheatography.com/proloser/cheat-sheets/angularjs/) - 定期更新的备忘单 [2013 年 2 月 13 日最新更新]
*   [On nested scopes](http://jimhoskins.com/2012/12/14/nested-scopes-in-angularjs.html) - 指出使用范围继承时可能出现的问题（参考Misko Hevery 的一篇精彩演讲，您也应该观看[）](http://www.youtube.com/watch?v=ZhfUv0spHCY&t=29m19s)
*   [依赖注入](http://docs.angularjs.org/guide/di)- 关于 DI 的官方开发者指南
*   [依赖注入](http://dailyjs.com/2013/05/23/angularjs-injection/)- 更多关于 AngularJS 依赖注入
*   [“服务还是工厂？”](http://iffycan.blogspot.com/2013/05/angular-service-or-factory.html) - 各类供应商之间的差异
*   [Directives](http://docs.angularjs.org/guide/directive) - 关于指令的官方开发者指南
*   [指令](http://amitgharat.wordpress.com/2013/06/08/the-hitchhikers-guide-to-the-directive/)- 指令的搭便车指南
*   [项目结构](https://github.com/angular-app/angular-app)- 看看这个应用程序
*   [Angular-UI](http://angular-ui.github.io/) - 必须使用组件进行任何 UI 开发
*   [UI-Bootstrap](http://angular-ui.github.io/bootstrap/) - 从头开始​​ JS 将引导组件重新实现为 AngularJS 指令
*   [使用 AngularJS 和 Karma 进行全谱测试](http://www.yearofmoo.com/2013/01/full-spectrum-testing-with-angularjs-and-karma.html)
*   [Bonus](https://stackoverflow.com/a/9693933/1218080) - AngularJS 中的数据绑定，由 Misko Hevery 本人解释。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-02-22T16:26:03.060

试试这些视频[egghead.io](http://egghead.io)他们很棒上手

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-01-15T08:52:51.240

要获得全面且不断增长的链接集合，请查看[AngularJS-Learning](https://github.com/jmcunningham/AngularJS-Learning)，这是一个收集资源、链接和有趣博客文章的 github 存储库。

我发现[AngularJS youtube 频道](http://www.youtube.com/user/angularjs)上的教程和视频非常有帮助。他们从最基本的东西到一些高级主题，这是一个很好的开始方式。

官方[twitter](https://twitter.com/angularjs)和[google+](https://plus.google.com/+AngularJS/posts)帐户是关注新闻和获得一些不错的链接的好方法。还要检查[AngularJS 邮件列表](https://groups.google.com/forum/#!forum/angular)。

一个不错的新闻/链接聚合器是[angularjsdaily.com](http://www.angularjsdaily.com/)。

还有一些新书在那里，所以你可以留意你最喜欢的在线图书馆。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-01-15T13:27:52.447

The #angularjs IRC channel on freenode.net is a great way to get real-time responses.

Advice for getting help via IRC:

1.  Have a relatively specific question to ask.
2.  If possible, demonstrate your issue using [Plunker](http://plnkr.co/) or [JSFiddle](http://jsfiddle.net/).
3.  Pick "prime time" hours to ask (Mid-afternoon to evening, EST works well for me.)
4.  Don't pop in, ask a question, and leave 2 minutes later when someone doesn't answer immediately. Most of us only check IRC periodically.

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2013-06-28T09:58:42.450

视频[AngularJS Fundamentals In 60-ish Minutes](http://www.youtube.com/watch?v=i9MHigUZKEM)提供了很好的介绍和概述。

我还强烈推荐@Atropo 提到的[O'Reilly 的 AngularJS 书。](https://rads.stackoverflow.com/amzn/click/com/1449344852)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-01-15T10:07:59.223

请留意邮件列表，了解社区成员讨论的问题/解决方案。[https://groups.google.com/forum/?fromgroups#!forum/angular](https://groups.google.com/forum/?fromgroups#!forum/angular)。这对我来说真的很有用。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-06-28T10:27:17.423

关于更高级的用法，我发现这两页是必读的：

*   [http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)
*   [http://docs.angularjs.org/guide/scope](http://docs.angularjs.org/guide/scope)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-24T19:25:08.523

这个答案基于本书的**问题**和**标题：http:** [//www.packtpub.com/angularjs-web-application-development/book](http://www.packtpub.com/angularjs-web-application-development/book)

![在此处输入图像描述](../Images/d95b260acea6a77bef1d4a6cdd38834a.png)

# hadoop - Hadoop - 需要基本 + 流式指导

> ID：14333858
> 
> 赞同：0
> 
> 时间：2013-01-15T08:38:45.057
> 
> 标签：hadoop, mapreduce, hadoop-streaming

我在 Apache Hadoop 0.2.x 版本中编写了一些 MapReduce 程序——简单来说，我是一个初学者。

我正在尝试使用名为[SeismicUnix的软件在 Linux 机器上处理一个大（超过 10GB）的](http://www.cwp.mines.edu/cwpcodes/)[SegY文件](http://en.wikipedia.org/wiki/SEG_Y)

列出了我在 Linux 机器上执行的基本命令：

```
//Read SegY file and convert to custom format (.su file)

segyread tape=input.sgy verbose=1 endian=0 | segyclean >input.su

//PIPE-SEPARATE the processing commands viz. suhilb and suaccor
suhilb | suaccor ntout=1001 sym=0 < Noise1_10.su > output.su

//Create headers for converting back to SegY format
segyhdrs < output.su bfile=binary hfile=header

//Create the final output file in SegY format
segywrite <output.su tape=output.segy buff=1 conv=1 bfile=binary hfile=header 
```

这些步骤在一台机器上需要很长时间，因此，已经设置了一个 Apache Hadoop 集群来加快速度。

根据我的思考过程：

1.  将源 SegY 文件拆分到集群上（以便在每个节点上处理一小块大文件）
2.  可能，使用 Hadoop Streaming，调用 SeismicUnix 命令来处理每个节点上的小块
3.  将处理后的文件聚合成一个大的 SegY 文件，该文件将作为输出

**技术查询/挑战：**

1.  源 SegY 文件需要先加载到 HDFS 上，然后才能提供给不同的节点进行处理。我该怎么做 - 创建一个 SequenceFile 或其他东西？SeismicUnix 读取 SegY 文件，将其转换为自定义格式，然后对其进行处理！
2.  如第二个命令所示，不同的操作（命令）按照它们想要执行的顺序进行管道传输，例如 suhilb | 苏克 现在，这可以在一个映射器中发生吗，还是我需要为 suhilb 创建一个映射器并将其输出提供给 suaccor - 这里非常困惑
3.  假设处理完成并且现在创建了每个节点 output.segy（这个假设是否正确？？？），我如何合并这些文件（这里完全没有头绪）？

我读了一些关于谷歌的 FlumeJava 的文章，认为它是一种解决方案，但我想坚持只使用 Hadoop，即目前没有库方法。

抱歉，如果我没有深入/简洁地询问我的问题 - 实际上，我无法清楚地了解设计/代码！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:18:26.073

回答与您的查询相对应的点，

1.  如果您知道该软件用于转换 SegY 文件的自定义格式，您可以`HDFS`使用相同的格式存储文件。要加载到`HDFS`您应该查看像 Sqoop 这样的开源工具。

2.  您可以使用映射器按顺序执行各种操作。因此，不同的映射器将并行对您输入的不同块执行操作。

3.  要合并输出文件，请尝试使用`output.segy`基于键排序的减速器。您使用的示例密钥可以是文件的名称。因此，各种输出文件的所有数据都被路由到一个减速器，从而生成一个输出部分 -r - 000 文件。

# iphone - ios<= 6 中的 cocos2d 方向问题

> ID：14333868
> 
> 赞同：0
> 
> 时间：2013-01-15T08:39:15.993
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

我开发的游戏只支持 ios 4.3 以上设备的横向模式。该应用程序在 ios 6 设备上实现了 gamecenter 并在测试期间崩溃，因为 gamecenter 登录屏幕不支持 ios 6 中的横向模式。所以我修复了将以下代码添加到 appdelegate.m 并开始工作但现在应用程序显示完全有线的问题（在 ios6（ios5 等）以下的设备上显示纵向倒置）

```
-(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
        return UIInterfaceOrientationMaskAll;
    else // iphone
        return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

使用 xcode:4.5 cocos2d v1.0.1

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:44:24.463

在您的项目中添加给定的类

```
GKMatchmakerViewController-LandscapeOnly.h

#import <Foundation/Foundation.h>
#import <GameKit/GameKit.h>

@interface GKMatchmakerViewController(LandscapeOnly)
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation;
@end

GKMatchmakerViewController-LandscapeOnly.m

#import "GKMatchmakerViewController-LandscapeOnly.h"

@implementation GKMatchmakerViewController (LandscapeOnly)

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation { 
    return ( UIInterfaceOrientationIsLandscape( interfaceOrientation ) );
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T22:05:13.440

替换这行代码 [window addSubview: viewController.view]; 在 AppDelegate.m 中低于一个

```
//************************************************************************
    NSString *reqSysVer = @"6.0";
    NSString *currSysVer = [[UIDevice currentDevice] systemVersion];
    if ([currSysVer compare:reqSysVer options:NSNumericSearch] != NSOrderedAscending)
    {
        [window setRootViewController:viewController];
    } else
    {
        [window addSubview: viewController.view];
    }
    //************************************************************************ 
```

并在 RootViewController.m 添加以下代码

```
///////********************************/////////

// For ios6, use supportedInterfaceOrientations & shouldAutorotate instead of shouldAutorotateToInterfaceOrientation

- (NSUInteger) supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskLandscape;
}

- (BOOL) shouldAutorotate {
    return YES;
}

///////********************************///////// 
```

# apache - .htaccess 从 URL 中删除所有第一级子目录

> ID：14333869
> 
> 赞同：0
> 
> 时间：2013-01-15T08:39:22.917
> 
> 标签：apache, .htaccess

我有几个已经重新设计的迷你站点。我需要删除所有子目录（有几千个所以我不能列出它们），例如：

```
webdomain.com/old-directory/info.html
webdomain.com/another-directory/anotherpage.html 
```

至：

```
webdomain.com/info.html
webdomain.com/anotherpage.html 
```

我可以这样做`.htaccess`吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:26:27.893

1.  从您网站上的所有链接中删除所有第一级子目录。

2.  将这些规则添加到文档根目录中的 htaccess 文件中，以**重定向**不受您控制的链接：

    ```
    RewriteEngine On
    RewriteRule ^/?[^/]+/(.*)$ /$1 [L,R=301] 
    ```

# c++ - 需要 Visual Studio 环境 2010 C++ 调试技术建议

> ID：14333873
> 
> 赞同：1
> 
> 时间：2013-01-15T08:39:28.117
> 
> 标签：c++, visual-c++

我在 C++ 项目中使用 Visual Studio 2012。我有一个设置断点的函数。

```
 MyFunction(int userid, double totalamount,char *ce_account_ref_num, int payment_type) 
```

我的调试器到了这一点，并显示了一些不需要的输入`userid`。是否可以回到调用此函数并验证输入的位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T08:45:48.170

在“**调用堆栈”**窗口（通常位于 Visual Studio 的右下角）中，双击包含要查看变量值的方法名称的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:45:34.287

您可以做很多事情，但最好的选择是注释 MyFunction 方法中的所有行，然后跳到 MyFunction 之外的下一行以检查变量。您还可以检查调用堆栈和调用层次结构以查看从何处调用您的函数，以防您对同一方法进行多次调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:03:00.303

不幸的是，不可能将角色返回（撤消执行）到调用此函数的位置。但是，您可以在输入并验证后立即尝试放置断点。调用堆栈也有助于跟踪您的程序流程序列如何到达那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T09:42:51.767

我通过按 ctrl 和 - 来做到这一点。这可以递归地完成（再次按下组合）。这将我带回到我的光标最后的位置。通过这样做，我可以返回调用函数的位置并检查值等。顺便说一下，您可以通过选择“设置下一个”转到调用函数的位置再次执行相同的函数（在调试模式下）语句”从右键菜单，而你正在调试 - 一个非常强大的功能。

# database - SQL Server 中的数据库连接和数据保存

> ID：14333883
> 
> 赞同：1
> 
> 时间：2013-01-15T08:39:41.240
> 
> 标签：database, vb.net, sql-server-2005

我在 Project 文件夹中有 SQL SERVER 数据库文件。Debug 文件夹中的相同文件副本。我在 SQL Server 中附加了这两个文件。项目文件夹表中的文件在所有字段中包含 Null 值。但是从 Debug 文件夹附加的文件中有数据。我用 Project 文件夹中的文件创建了连接字符串。实际上哪个数据库文件是正确的文件？尝试解决这个问题。

连接字符串是

```
Public Conn As SqlConnection

Public Function getConnect() As SqlConnection

    Conn = New SqlConnection("Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\EMP_DB.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True")

    Return Conn

End Function 
```

这是我的代码..

```
 Try
            getConnect()
            Dim query As SqlCommand
            Dim strSQL As String
            strSQL = "INSERT INTO EMPLOYEE (EMP_ID,EMP_NAME,EMP_FNAME,EMP_GENDER,EMP_DOB,EMP_CAST,EMP_DEPART,EMP_DESIG,EMP_DOJ,EMP_SALARY,EMP_PF_ESI,EMP_BRANCH,EMP_CONTACT,EMP_ADDRESS)VALUES(@EMP_ID,@EMP_NAME,@EMP_FNAME,@EMP_GENDER,@EMP_DOB,@EMP_CAST,@EMP_DEPART,@EMP_DESIG,@EMP_DOJ,@EMP_SALARY,@EMP_PF_ESI,@EMP_BRANCH,@EMP_CONTACT,@EMP_ADDRESS)"
            query = New SqlCommand(strSQL, Conn)
            query.Parameters.Add(New SqlParameter("@EMP_ID", TXTEMPID.Text))
            query.Parameters.Add(New SqlParameter("@EMP_NAME", TXTNAME.Text))
            query.Parameters.Add(New SqlParameter("@EMP_FNAME", TXTFNAME.Text))
            query.Parameters.Add(New SqlParameter("@EMP_GENDER", gend))
            query.Parameters.Add(New SqlParameter("@EMP_DOB", DTPEMPDOB.Value.Date))
            query.Parameters.Add(New SqlParameter("@EMP_CAST", TXTCASTE.Text))
            query.Parameters.Add(New SqlParameter("@EMP_DEPART", CMBDEPT.Text))
            query.Parameters.Add(New SqlParameter("@EMP_DESIG", CMBDESIG.Text))
            query.Parameters.Add(New SqlParameter("@EMP_DOJ", DTPEMPDOJ.Value.Date))
            query.Parameters.Add(New SqlParameter("@EMP_SALARY", MTXTSAL.Text))
            query.Parameters.Add(New SqlParameter("@EMP_PF_ESI", MTXTPFESI.Text))
            query.Parameters.Add(New SqlParameter("@EMP_BRANCH", TXTBRANCH.Text))
            query.Parameters.Add(New SqlParameter("@EMP_CONTACT", MTXTCONTACT.Text))
            query.Parameters.Add(New SqlParameter("@EMP_ADDRESS", RTXTADDRESS.Text))
            Conn.Open()
            Dim numAffected = query.ExecuteNonQuery()
            'MessageBox.Show(numAffected)
            Conn.Close()
            If numAffected > 0 Then
                Call getConnect()
                MessageBox.Show("Successfully Added", "Add", MessageBoxButtons.OK, MessageBoxIcon.Information)
                BTNCLEAR.PerformClick()
            Else
                MsgBox("No record was inserted")
            End If
        Catch ex As Exception
            MsgBox("ERROR: " + ex.Message, MsgBoxStyle.Information, "Add")
        End Try
    End If 
```

我像这样更改我的连接字符串...

```
Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\EMP_DB.mdf;Initial Catalog=EMP_DB;Integrated Security=True;Connect Timeout=30;User Instance=False 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:39:21.980

用户实例已贬值，这可能是造成这种混乱的原因。

引用 SQL Server MVP Aaron Bertrand 的话：

> 使用用户实例意味着 SQL Server 正在创建该数据库文件的特殊副本以供您的程序使用。如果您有两个不同的程序使用相同的连接字符串，它们将获得两个完全不同的数据库副本。这会导致很多混乱，因为人们将使用他们的程序测试更新数据，然后在 Management Studio 中连接到他们数据库的不同副本，并抱怨他们的更新不起作用。这使他们经历了一系列有缺陷的野鹅追逐步骤，试图解决错误的问题。

[[来源](https://stackoverflow.com/a/11178889/1220971)]

他还在同一篇文章中继续列出了一些替代方案：

1.  创建或将您的数据库附加到 SQL Server 的真实实例。然后，您的连接字符串将只需要指定实例名称、数据库名称和凭据。不会有混淆，因为 Management Studio、Visual Studio 和您的程序都将连接到数据库的单个副本。

2.  如果您使用的是 SQL Server 2012，请使用 SqlLocalDb 进行本地开发。请参阅：[“SQL Server 2012 Express LocalDB 入门”。](http://www.mssqltips.com/sqlservertip/2694/getting-started-with-sql-server-2012-express-localdb/)

3.  使用[SQL Server 紧凑](http://msdn.microsoft.com/en-us/library/aa983341.aspx)。我最不喜欢这个选项，因为功能和语法不一样 - 所以它不一定会为您提供您最终想要部署的所有功能。

# asp.net - PagedDataSource 不适用于上一页/下一页

> ID：14333899
> 
> 赞同：0
> 
> 时间：2013-01-15T08:40:46.713
> 
> 标签：asp.net, vb.net, datatable, repeater

我在这种情况下遇到了困难，希望有人可以帮助我澄清我缺少步骤/逻辑的地方。我尝试在线搜索，但找不到解决此问题的示例。

我们正在设置一个搜索页面，当第一次加载时会显示一堆选项（例如，文本框、复选框等）。用户将填写表格并将表格提交给自己。发回后，页面将使用用户选项针对数据库构建并运行 SQL 查询（例如，SELECT ID FROM Customers WHERE Company = 'Acme' AND AmtDue = 3），然后显示结果。这部分工作正常。

崩溃的部分是当我尝试添加分页时。结果集是绑定到Repeater 的DataTable。我正在使用 PagedDataSource 添加分页。分页适用于第一页，但对于后续页面，它不起作用。基本上，不是返回请求结果的下一页（例如，SELECT ID FROM Customers WHERE Company = 'Acme' AND AmtDue = 3），而是返回的结果是附加用户搜索选项之前的 SQL 查询（例如，SELECT ID FROM顾客）。

我认为我的基本问题是我不确定如何区分正常的 Page.IsPostBack 并通过结果进行分页。这导致问题的原因是因为我不想重新收集表单数据、重建查询和重新查询数据库。

我在网上找到的示例涉及每次加载页面时都会重新构建的 DataTable 的分页（例如，Not Page.IsPostBack）。

这是我们代码的粗略概述：

```
Public dtCustomers As DataTable = New DataTable()
Sub Page_Load(ByVal Sender As Object, ByVal E As EventArgs) Handles Me.Load
    ' When the page first loads, show the search form with search options.
    If Not Page.IsPostBack Then
        ShowSearchForm()
    ' Once the form is submitted, show the search results.
    Else
        ' ----------------------------------------
        ' This is the part that I'm having trouble with. How do I skip the following two steps (GatherFormData() and BuildDT()) when the user requests a subsequent page?
        GatherFormData()
        dtCustomers = BuildDT()
        ' ----------------------------------------
        BindData()
    End If
End Sub
Sub BindData()
    Dim objPDS As PagedDataSource = New PagedDataSource()
    objPDS.DataSource = dtCustomers.DefaultView
    objPDS.AllowPaging = True
    objPDS.PageSize = intNumPerPage
    objPDS.CurrentPageIndex = Me.ViewState("_CurrentPage")
    rptSearchResults.DataSource = objPDS
End Sub
' Subroutine called when the previous page button is pressed.
Sub GoToPrevPage()
    ' Set viewstate variable to the previous page.
    Me.ViewState("_CurrentPage") -= 1
    BindData()
End Sub
' Subroutine called when the next page button is pressed.
Sub GoToNextPage()
    ' Set viewstate variable to the next page.
    Me.ViewState("_CurrentPage") += 1
    BindData()
End Sub 
```

注意：我知道必须将 DataTable 放入缓存或会话变量中，但尚未确定最佳方法。

请原谅代码大纲，但实际代码量很大，因此简化是为了更容易找到问题的核心。

让我知道是否有任何不清楚的地方。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:52:37.840

我假设您要将数据存储在会话/缓存中（我更喜欢后者，但可能有将其存储在会话中的用例） - 您可以将密钥存储在视图状态中，并且密钥的存在可能是用于确定回发是否用于分页。例如，

```
if (ViewState["dataKey"] == null)
{
   // first form submittal, do the search
   GatherFormData();
   dtCustomers = BuildDT();
   // store it in cache
   ViewState["dataKey"] = Guid.NewGuid().ToString();  // create a key
   Cache.[ViewState["dataKey"].ToString()] = dtCustomers;  // TODO use Add method to control expiration etc
} 
```

重置搜索（或类似条件）时清除视图状态很重要

最后，也可以从数据库/数据存储中进行分页（例如，使用 SQL Server 中的排名函数），这样您就不必将搜索结果存储到会话/缓存中，而是在每次回发。当完整的结果集大小可能很大时，这种方法很有用。

# ajax - 使用 post 发送大量数据时出现 400 Bad request 错误

> ID：14333900
> 
> 赞同：0
> 
> 时间：2013-01-15T08:40:57.997
> 
> 标签：ajax, struts2, tomcat6

我正在使用 yahoo YUI Ajax 调用来发布请求。

页面是用 JSP 开发的，服务器是 Tomcat 6 并使用 Struts 2.x。

当我使用 Ajax 调用发布请求发送少量数据时，它工作正常。但是当我发送大量数据时，我收到 400 错误请求错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:47:44.323

请检查 conf/server.xml 中 Connector 的 maxPostSize 属性。

[有关详细信息，请参阅以下文档](http://tomcat.apache.org/tomcat-5.5-doc/config/http.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:56:18.483

当 Web 服务器认为客户端（例如您的 Web 浏览器）发送的数据流“格式错误”即不完全遵守 HTTP 协议时，就会出现 400 错误。因此，Web 服务器无法理解请求并对其进行处理。

可能存在数据太大的可能性，因此您应该更好地使用 java 脚本内置函数（例如 escape()）对数据进行编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:48:21.907

在 Tomcat 中，当 post 数据超过 maxPostSize (server.xml) 中指定的最大值时，它会返回 400 作为错误代码

# mysql - 如何在 MySQL 的 PROCEDURE 中使用新插入记录的 id？

> ID：14333909
> 
> 赞同：1
> 
> 时间：2013-01-15T08:41:26.727
> 
> 标签：mysql, sql, stored-procedures

例如，我有一张`users`桌子和`waitingUsers`一张桌子：它们的工作方式是这样的：

```
`Users`:
id
name 
```

和

```
`WaitingUsers`:
id
user_id 
```

`Users`和`WaitingUsers`的 id 都是自动递增的。我想要一个`PROCEDURE`来创建用户，新`id`用户是在创建用户后生成的，并使用它插入到`waitingUsers`. 我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:44:06.100

试试这个，

```
DELIMITER $$
CREATE PROCEDURE InsertRecord(IN _name VARCHAR(30))
BEGIN
    INSERT INTO Users VALUES (_name);
    INSERT INTO WaitingUsers VALUES (LAST_INSERT_ID());
END $$
DELIMITER ; 
```

*   [LAST_INSERT_ID()](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function%5Flast-insert-id)

或者

```
DELIMITER $$
CREATE PROCEDURE InsertRecord(IN _name VARCHAR(30))
BEGIN
    INSERT INTO Users (id, Name) VALUES (NULL, _name);
    INSERT INTO WaitingUsers (id, user_id) VALUES (NULL, LAST_INSERT_ID());
END $$
DELIMITER ; 
```

# iphone - 如何根据用户选择的配置更新整个 UI

> ID：14333912
> 
> 赞同：1
> 
> 时间：2013-01-15T08:41:31.810
> 
> 标签：iphone, ios, objective-c, xcode

我的应用程序包中有一个`configfile1.plist`文件，其中包含应用程序 UI 所需的所有设置，即背景图像、动画、声音、数据库和其他任何内容。我使用了一个 ConfigFileManager 类，其中有如下方法：

```
-(void) loadConfigFile
{
    configFile = [[NSBundle  mainBundle] pathForResource:@"ConfigFile1"
                                              ofType:@"plist"];
rootDictionary = [[NSDictionary alloc]initWithContentsOfFile:configFile];

//__ settings
settings = [rootDictionary objectForKey:@"settings"];
timerMode = [settings objectForKey:@"timerMode"];
timePerQuestion = [settings objectForKey:@"timePerQuestion"];
if (timerMode.intValue == 1) {
    //__time is fixed.
}
else
{
    //time is not fixed, there's an initialTime to begin with, and it increases if the answer is correct (timePerQuestion), and doesn't change if it's wrong.
    initialTime = [settings objectForKey:@"initialTime"];
}

//__ Textures
textures = [rootDictionary objectForKey:@"textures"];

//__ buttons
buttons = [textures objectForKey:@"buttons"];
buttonBackground = [buttons objectForKey:@"buttonBG"];
buttonBackgroundSelected = [buttons objectForKey:@"buttonBGSelected"];
mainMenuPlayButton = [buttons objectForKey:@"mainMenu.playButton"];
.
.
.
} 
```

这是应用程序打开时在应用程序委托中调用该方法的应用程序的默认配置。现在假设我有`configfile2.plist`,`configfile3.plist`等等。我也有一个`UIViewController`，它必须在表格视图中显示可用的配置文件。我应该怎么做，以便用户可以选择其中一个配置文件，并将其应用于整个应用程序？

任何详细的答复将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:37:01.197

大体思路是这样的：

1.  .plist 存储可能的选项
2.  向用户显示选项
3.  将选定的选项保存到某处
4.  根据保存的选项刷新 UI

您已经完成了第 1 步和第 2 步。因此您必须决定将选项存储在何处以供以后检索。

一种选择是用于`[NSUserDefaults standardUserDefaults]`保存选定的选项。您可以查看[`InAppSettingsKit`](http://www.inappsettingskit.com/)它的示例应用程序以了解整个事情是如何工作的。

# excel - 更改格式化单元格不起作用的单元格内容

> ID：14333914
> 
> 赞同：0
> 
> 时间：2013-01-15T08:41:40.423
> 
> 标签：excel, excel-2007

我有一个单元格，其中的数据格式为 01/07/2012 6:58:13 AM

但是我只想要日期，我试图格式化单元格并选择我想要的格式 01/07/2012 但时间仍然存在。

我怎样才能摆脱它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:19:24.763

假设由于某些原因日期存储为文本（例如，您使用的是非英语系统），您可以使用以下函数解析文本并将其转换为适当的日期：`=DATE(MID(A1,7,4),MID(A1,4,2),LEFT(A1,2))`

如果您有一个英文系统（它可能也适用于其他语言环境，请尝试一下），您不必解析文本，只需使用以下公式进行转换：（`=--A1`并将单元格格式化为日期）。

# ios - 存折不使用“\r\n”输入换行符

> ID：14333919
> 
> 赞同：3
> 
> 时间：2013-01-15T08:41:47.133
> 
> 标签：ios, passbook

我正在使用存折，并且有一些输入值，如下所示：

```
{
    "key" : "terms",
    "label" : "terms_contions",
    "value" : "1.aaaaaaa
               2.bbbbbbb 
               3.ccccccc
               4.ddddddd
} 
```

我使用“enter”键，我想换行来查看值，但是 pass 显示错误。

所以我将其修改为：

```
{
    "key" : "terms",
    "label" : "terms_contions",
    "value" : "1.aaaaaaa 2.bbbbbbb 3.ccccccc 4.ddddddd
} 
```

一切都很好，但我不想 `1\. 2\. 3\. 4.`在一条线上。我想要4行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T09:28:16.580

换行符仅适用于后面的字段。像下面这样将换行符编码到 JSON 中，你应该没问题。

```
{
    "key" : "terms",
    "label" : "terms_contions",
    "value" : "1.aaaaaaa\r\n2.bbbbbbb\r\n3.ccccccc\r\n4.ddddddd"
} 
```

在最后一个后场中使用[换行符](https://r.pass.is/DC66BgbTQAUP/d)的示例工作通行证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T08:54:25.490

```
{
    "key" : "terms",
    "label" : "terms_contions",
    "value" : "1.aaaaaaa\n 2.bbbbbbb\n 3.ccccccc\n 4.ddddddd
} 
```

# java - 我可以将 java 窗口句柄传递给 OpenGL-es

> ID：14333924
> 
> 赞同：0
> 
> 时间：2013-01-15T08:41:55.557
> 
> 标签：java, android-ndk, java-native-interface, opengl-es-2.0

我想用 Java + OpenGL（c 版本）进行开发。

1.  使用java设计UI。
2.  使用 OpenGL-es(c 版本) 在 UI 上渲染图像。

我知道如果我想开发`Java + C`，我需要 JNI。因为我必须先创建 opengl 上下文。并且这个上下文必须与一个窗口句柄相关。我可以将由 java 创建的窗口句柄传递给 JNI 的 OpenGL API。或用于`jogl`初始化 opengl 环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:35:33.513

JNI 是在 java 中运行本机代码的唯一方法，可用于加载专门生成的共享库（windows 中的 .dll，linux/android 中的 .so）并调用在该库中声明的本机函数。如果您想用 c 编写后端，则必须在 c 中创建一个共享库，其中包含一些用于启动代码的功能，例如：

```
void init(void)
{
 ...
} 
```

然后是另一个看起来像这样的函数：

```
void setWindowHandle(void* handle)
{
 ...
} 
```

然后，您可以调用第一个函数从 java 启动您的 c 代码，并使用您的第二个函数将句柄从 java 传递给您的 c 代码。

除了 JNI 需要导入某些自动生成的头文件，并且需要您在 java 类型之间来回切换，我强烈建议使用[JNA](http://jna.java.net/)来链接到这个共享库。JNA 是围绕 JNI 的包装 API，它处理类型转换，并且不需要您在 c.c 中包含任何 java 环境代码。

最后一点，为了代码的简单性和兼容性，我建议使用[JOGL](https://jogamp.org/jogl/www/)（标准 java 的 opengl 绑定）在 java 中编写 opengl 接口代码，或者如果此代码作为 android api 的一部分提供的 java opengl 绑定适用于安卓设备。你可能认为 c 更快，应该使用，但就与 opengl 的接口而言，唯一真正计算密集的代码是由显卡完成的，所有 opengl 接口代码所要做的就是告诉它什么画。

# android - 自定义 RowLayout 和 ListActivity 崩溃的自定义布局文件。包括 LogCat

> ID：14333925
> 
> 赞同：0
> 
> 时间：2013-01-15T08:41:57.723
> 
> 标签：android, android-linearlayout, listactivity, android-logcat

我正在使用 ListActivity 但它不使用自定义适配器并在我使用它时崩溃。
此处代码：
**FilesMenu.java**

```
package com.handyapp.filesaggregator;

import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import android.app.AlertDialog;
import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.SharedPreferences;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.view.Window;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class FilesMenu extends ListActivity {
    public static Context con;
    Map<String,File> dirMap;
    ArrayList<String> dirs;
    File[] files;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        //this.
        SharedPreferences prefs=(SharedPreferences) getSharedPreferences("OFFSET",MODE_PRIVATE);
        con=this;
        File sdCard=Environment.getExternalStorageDirectory();
        fileOp(sdCard);
        setContentView(R.layout.activity_files_menu);
        setListAdapter(new MyAdapter<String>(con,R.layout.item_list,R.id.txt1,dirs));
        getListView().setSelection(prefs.getInt("OFFSET_LIST",0));
        this.getListView().setFastScrollEnabled(true);
        getListView().setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {

            @Override
            public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                    int position, long arg3) {  
                new FilesCollectorTask().execute(dirMap.get(dirs.get(position)));
                return false;
            }
        });
        new AlertDialog.Builder(con)
        .setIcon(R.drawable.exclmark)
        .setMessage("INSTRUCTIONS:\n1\. This is just a BETA release"
                +"\n2\. To organize a particular folder, Long click the folder and wait"
                +"\n3\. And i repeat again, this is just a beta release, big folders take quite a lot of time to finish,PLEASE be patient"
                +"\n4\. creator:Abdul Hannan Kanji :P")
                .setNeutralButton("Got it!", new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                        dialog.dismiss();
                    }
                }).show();

    }
    private void fileOp(File root)
    {
        files=root.listFiles();
        dirs=new ArrayList<String>();
        dirMap=new HashMap<String,File>();
        dirs.add("...");
        dirMap.put("...", root.getParentFile());
        if(files!=null)
        {
        for(File file : files)
        {
            if(file!=null&&file.isDirectory())
            {
                dirs.add(file.getName());
                dirMap.put(file.getName(), file);
            }

        }
        }
    }
    public void onListItemClick(ListView parent,View v,int position,long id)
    {
        try {
            fileOp(dirMap.get(dirs.get(position)));
        } catch (NullPointerException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        //int pos=this.getListView().getBaseline();
        SharedPreferences prefs=(SharedPreferences) con.getSharedPreferences("OFFSET", MODE_PRIVATE);
        SharedPreferences.Editor editor=prefs.edit();
        editor.putInt("OFFSET_LIST", position);
        editor.commit();
        parent.setAdapter(new MyAdapter<String>(con,R.layout.item_list,R.id.txt1,dirs));
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_files_menu, menu);
        return true;
    }
    public class FilesCollectorTask extends AsyncTask<File, Void, Boolean> {
        private ProgressDialog dialog;
        @Override
        protected void onCancelled() {
            // TODO Auto-generated method stub
            super.onCancelled();
            dialog.dismiss();
            new AlertDialog.Builder(con)
            .setMessage("Operation Unsuccessful!Make sure you have enough memeory in your external storage")
            .setNeutralButton("Dismiss", new OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    dialog.dismiss();
                }
            })
            .setIcon(R.drawable.exclmark);
        }

        @Override
        protected void onPostExecute(Boolean result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            dialog.dismiss();
        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            dialog=ProgressDialog.show(con, "Aggregating Files", "Please wait...");
            super.onPreExecute();
        }

        @Override
        protected Boolean doInBackground(File... params) {
            // TODO Auto-generated method stub
            if(params==null || params.length==0)
            {
                this.cancel(true);
            }
            try {
                //Toast.makeText(con,params[0].getName(), Toast.LENGTH_SHORT).show();
                FileOperation.doWithFiles(params[0]);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                Toast.makeText(con, "IOException ", Toast.LENGTH_SHORT).show();
                this.cancel(true);
                return false;
            }
            return true;
        }

    }

} 
```

**我的适配器.java**

```
public class MyAdapter<T> extends ArrayAdapter<T> {
    Context con;
    ArrayList<String> items;
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return items.size();
    }

    @Override
    public T getItem(int position) {
        // TODO Auto-generated method stub
        return (T)items.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return super.getItemId(position);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View row;
        TextView tv;
        LayoutInflater inflator=(LayoutInflater) con.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        if(convertView==null)
        {
            row=inflator.inflate(R.layout.item_list,parent);
        }
        else
        {
            row=convertView;
        }
        tv=(TextView) row.findViewById(R.id.txt1);
        tv.setText(items.get(position));
        return row;
    }

    public MyAdapter(Context context,int resource,int textViewResourceId,
            ArrayList<String> objects) {
        super(context, textViewResourceId);
        // TODO Auto-generated constructor stub
        con=context;
        items=objects;
    }
} 
```

**activity_files_menu.xml**

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:orientation="vertical"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         android:paddingLeft="8dp"
         android:paddingRight="8dp">

     <ListView android:id="@android:id/list"
               android:layout_width="fill_parent"
               android:layout_height="0dip"
               android:background="@drawable/ambience"
               android:layout_weight="1"
               android:drawSelectorOnTop="false"/>

     <TextView android:id="@android:id/empty"
               android:layout_width="match_parent"
               android:layout_height="match_parent"
               android:background="#FF0000"
               android:text="No data"/>
 </LinearLayout> 
```

**item_list.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
    <TextView 
        android:id="@+id/txt1"
        android:alpha="0"
        android:textColor="#D2DCEE"
        android:drawableLeft="@drawable/folder_small"/>

</LinearLayout> 
```

**日志猫**

```
01-15 14:03:50.586: D/dalvikvm(579): GC_EXTERNAL_ALLOC freed 69K, 52% free 2632K/5379K, external 2002K/2137K, paused 78ms
01-15 14:03:51.096: D/AndroidRuntime(579): Shutting down VM
01-15 14:03:51.096: W/dalvikvm(579): threadid=1: thread exiting with uncaught exception (group=0x40015560)
01-15 14:03:51.126: E/AndroidRuntime(579): FATAL EXCEPTION: main
01-15 14:03:51.126: E/AndroidRuntime(579): java.lang.RuntimeException: Binary XML file line #6: You must supply a layout_width attribute.
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.content.res.TypedArray.getLayoutDimension(TypedArray.java:491)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.view.ViewGroup$LayoutParams.setBaseAttributes(ViewGroup.java:3598)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.view.ViewGroup$MarginLayoutParams.<init>(ViewGroup.java:3678)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.widget.LinearLayout$LayoutParams.<init>(LinearLayout.java:1400)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.widget.LinearLayout.generateLayoutParams(LinearLayout.java:1326)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.widget.LinearLayout.generateLayoutParams(LinearLayout.java:47)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:625)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
01-15 14:03:51.126: E/AndroidRuntime(579):  at com.handyapp.filesaggregator.MyAdapter.getView(MyAdapter.java:42)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.widget.AbsListView.obtainView(AbsListView.java:1430)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.widget.ListView.makeAndAddView(ListView.java:1745)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.widget.ListView.fillSpecific(ListView.java:1290)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.widget.ListView.layoutChildren(ListView.java:1588)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.widget.AbsListView.onLayout(AbsListView.java:1260)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.view.View.layout(View.java:7175)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.view.View.layout(View.java:7175)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.view.View.layout(View.java:7175)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.view.View.layout(View.java:7175)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1140)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.os.Looper.loop(Looper.java:123)
01-15 14:03:51.126: E/AndroidRuntime(579):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-15 14:03:51.126: E/AndroidRuntime(579):  at java.lang.reflect.Method.invokeNative(Native Method)
01-15 14:03:51.126: E/AndroidRuntime(579):  at java.lang.reflect.Method.invoke(Method.java:507)
01-15 14:03:51.126: E/AndroidRuntime(579):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-15 14:03:51.126: E/AndroidRuntime(579):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-15 14:03:51.126: E/AndroidRuntime(579):  at dalvik.system.NativeStart.main(Native Method) 
```

如果不可能，还有其他更简单的方法吗？编辑：
包含 layout_width 属性后，出现以下错误：
**logCat**

```
01-15 14:22:38.246: D/dalvikvm(614): GC_EXTERNAL_ALLOC freed 70K, 52% free 2632K/5379K, external 2002K/2137K, paused 89ms
01-15 14:22:38.826: D/AndroidRuntime(614): Shutting down VM
01-15 14:22:38.826: W/dalvikvm(614): threadid=1: thread exiting with uncaught exception (group=0x40015560)
01-15 14:22:38.846: E/AndroidRuntime(614): FATAL EXCEPTION: main
01-15 14:22:38.846: E/AndroidRuntime(614): java.lang.UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.widget.AdapterView.addView(AdapterView.java:461)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.view.LayoutInflater.inflate(LayoutInflater.java:416)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
01-15 14:22:38.846: E/AndroidRuntime(614):  at com.handyapp.filesaggregator.MyAdapter.getView(MyAdapter.java:42)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.widget.AbsListView.obtainView(AbsListView.java:1430)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.widget.ListView.makeAndAddView(ListView.java:1745)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.widget.ListView.fillSpecific(ListView.java:1290)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.widget.ListView.layoutChildren(ListView.java:1588)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.widget.AbsListView.onLayout(AbsListView.java:1260)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.view.View.layout(View.java:7175)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.view.View.layout(View.java:7175)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.view.View.layout(View.java:7175)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.view.View.layout(View.java:7175)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1140)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.os.Looper.loop(Looper.java:123)
01-15 14:22:38.846: E/AndroidRuntime(614):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-15 14:22:38.846: E/AndroidRuntime(614):  at java.lang.reflect.Method.invokeNative(Native Method)
01-15 14:22:38.846: E/AndroidRuntime(614):  at java.lang.reflect.Method.invoke(Method.java:507)
01-15 14:22:38.846: E/AndroidRuntime(614):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-15 14:22:38.846: E/AndroidRuntime(614):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-15 14:22:38.846: E/AndroidRuntime(614):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:48:07.550

`Logcat`告诉我你忘了把`layout_width`和`layout_height`价值`item_list.xml`。

尝试更改`item_list.xml`为这样的东西

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
    <TextView 
        android:id="@+id/txt1"
        android:alpha="0"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textColor="#D2DCEE"
        android:drawableLeft="@drawable/folder_small"/>
</LinearLayout> 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:48:11.477

```
Binary XML file line #6: You must supply a layout_width attribute 
```

您必须指定 android:layout_width 属性：

```
...
<TextView 
    android:id="@+id/txt1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"        
    android:alpha="0"
    android:textColor="#D2DCEE"
    android:drawableLeft="@drawable/folder_small"/> 
```

# ember.js - 如何使用 emberjs arraycontroller 在 facebook 的 twitter 中呈现流视图？

> ID：14333930
> 
> 赞同：0
> 
> 时间：2013-01-15T08:42:11.790
> 
> 标签：ember.js

要使用 emberjs 渲染数组的内容，我们通常执行以下操作

```
<ul>
  {{#each controller}}
    <li>{{name}} by {{artist}}</li>
  {{/each}}
</ul> 
```

如何像我们使用 twitter (of facebook) 一样制作实时流视图，在流列表顶部添加一个新流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:57:50.507

在控制器上，您可以设置`sortProperties`see [here](http://emberjs.com/api/classes/Ember.SortableMixin.html)以指定数组应该在哪个属性上排序，并且您可以设置`sortAscending`（这是一个布尔值）来指定数组应该排序的方向。

当您更改数组时，视图将**自动**更新。

看到这个小提琴：http: [//jsfiddle.net/ZnMFK/2/](http://jsfiddle.net/ZnMFK/2/)

或者这个小提琴： http: [//jsfiddle.net/KfzFE/](http://jsfiddle.net/KfzFE/)显示当数组改变时DOM得到更新。

**HTML：**

```
<script type="text/x-handlebars" data-template-name="index">
  <div class="patient-view extended">
    {{#each controller}}
    <p>Name: {{name}}</p>
    {{/each}}    
  </div>
</script> 
```

**应用程序：**

```
window.App = Em.Application.create();

App.Patient = Em.Object.extend({
  order: undefined,
  name: undefined
});

App.IndexView = Em.View.extend({
  click: function() {
    this.get('controller')
        .set('sortAscending', !this.get('controller').get('sortAscending'));
  }
});

App.IndexController = Em.ArrayController.extend({
  sortProperties: ['order'],
  sortAscending: false
});

App.IndexRoute = Em.Route.extend({
  model: function() {
    return Em.A([App.Patient.create({
      name: "Bert",
      order: 2
    }), App.Patient.create({
      name: "Ernie",
      order: 1
    })]);        
  }
}); 
```

# android - 这个布局的结构是什么？

> ID：14333931
> 
> 赞同：1
> 
> 时间：2013-01-15T08:42:22.460
> 
> 标签：android

这是一个`TableLayout`吗？如果是，如何在第一行和每行不同的颜色下添加下划线？

![在此处输入图像描述](../Images/192f876a49fbffe644779f2695722f5b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:36:47.223

是的，这是您必须设置表格行的背景颜色的表格布局，请参阅以下链接单击[此处](http://technotzz.wordpress.com/2011/11/04/android-dynamically-add-rows-to-table-layout/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:58:02.857

假设它是从一个[`ViewGroup`](http://developer.android.com/reference/android/view/ViewGroup.html)（包含子对象的对象，例如[`TableLayout`](http://developer.android.com/reference/android/widget/TableLayout.html)or [`ListView`](http://developer.android.com/reference/android/widget/ListView.html)）派生的，那么很容易访问它的所有子对象（行）并对其进行处理。例如交替背景：

```
final int childCount = myGroup.getChildCount();
for(int i = 0; i < childCount; i++) {
  View child = myGroup.getChildAt(i);
  if(i % 2 == 0) {
    child.setBackgroundColor(color1);
  } else {
    child.setBackgroundColor(color2);
  }
} 
```

更改第一行也是如此，只需使用`myGroup.getChildAt(0)`和修改那个特定的孩子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:18:22.997

是的，这是一个表格布局

我很容易创建了类似的。

您还可以为每行中的文本添加单击事件以执行不同的操作。

![检查这个](../Images/c689ef3f29f2aa2d30b60f7e03573b89.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T09:27:40.223

您可以将列表视图与自定义项目视图一起使用。只需在列表视图中添加页眉（也可以添加页脚）：

```
ListView list = (ListView) findViewById(R.id.listView);
View headerView = inflater.inflate(R.layout.header, list, false);
list.addHeaderView(headerView); 
```

# asp.net - VB .Net 和 asp .net 将下拉列表中的每个项目添加到标签不起作用

> ID：14333937
> 
> 赞同：0
> 
> 时间：2013-01-15T08:42:53.487
> 
> 标签：asp.net, vb.net, label

我正在尝试将下拉列表中的每个项目添加到标签。任何猜测为什么它不起作用。感谢您的回答。

```
Dim labels(2) As Label
Public Sub AddItemsFromDropdownlistToLabel()
    DefineLabels()
    'Add Items From Dropdownlist1 to three lables
    For Each item As Object In DropDownList1.Items
        If LabelCount < 3 AndAlso LabelCount > 0 Then
            labels(LabelCount).Text = item.ToString
        End If
    Next
End Sub
Public Sub DefineLabels()
    labels(0) = label1
    labels(1) = label2
    labels(2) = label3
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:47:04.473

几个问题

1：由于您正在检查`LabelCount>0` `labels(0)`将永远不会被填充。

2：对于循环中的每个项目，您没有任何增量来推进标签数组的填充。

3：`item`下拉列表中的每个都是`ListItem`. 要从中获得任何有用的信息，您最好使用`item.Text`或`item.Value`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:50:30.823

看起来`LabelCount`的值为 0 并且在`for each`. 您可以改用：

```
For i as Integer = 0 to DropDownList1.Items.Count
    If i >= 3 Then Exit For
    labels(i).Text = DropDownList1.Items(i).ToString()
Next 
```

我想`DropDownList1`是 ComboBox 或类似的。

# c# - C# Regex 在 Javascript、MVC4、自定义 RegularExpressionAttribute、IClientValidatable 中不起作用

> ID：14333939
> 
> 赞同：0
> 
> 时间：2013-01-15T08:43:03.613
> 
> 标签：c#, regex, asp.net-mvc-4, unobtrusive-javascript, unobtrusive-validation

我有一个实现 IClientValidate 的自定义正则表达式属性，以便我可以将它与不引人注目的验证一起使用。

当我运行它时，我在 FireBug 中收到以下错误

> SyntaxError: 无效的量词
> 匹配 = new RegExp(params).exec(value);

它显然不喜欢传递给它的正则表达式，它在 C# 中有效。我似乎无法弄清楚我需要做什么才能让它在 JavaScript 中有效。

正则表达式是

`^(?i)([A-PR-UWYZ0-9][A-HK-Y0-9][AEHMNPRTVXY0-9]?[ABEHMNPRVWXY0-9]?\s?[0-9][ABD-HJLN-UW-Z]{2})$`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:57:43.827

替换`(?i)`为`i`修饰符：
`var patt=/^([A-PR-UWYZ0-9][A-HK-Y0-9][AEHMNPRTVXY0-9]?[ABEHMNPRVWXY0-9]?\s?[0-9][ABD-HJLN-UW-Z]{2})$/i`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:29:18.810

与 .NET (C#) 相比，JavaScript 正则表达式风格极为有限。它不支持的众多功能之一是形式的内联修饰符`(?i)regex`or `(?i:regex)`。但是，因为您使用的是`new RegExp(params)`构造函数，所以您应该能够将修饰符作为第二个参数传递：

```
"^[A-PR-UWYZ0-9][A-HK-Y0-9][AEHMNPRTVXY0-9]?[ABEHMNPRVWXY0-9]?\s?[0-9][ABD-HJLN-UW-Z]{2}$",
"i" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:56:08.123

当我在此运行您的正则表达式时：[http](http://regexpal.com/) ://regexpal.com/ 我在这部分出现错误：`(?i)`

Rexegpal 是一个 JavaScript 正则表达式测试器。因此，如果您可以让它在这里工作，那么您可以将它应用到您的代码中。

也许您有一些示例字符串可以尝试？

# javascript - node.js 和 socket.io。websocket的传输类型配置？

> ID：14333942
> 
> 赞同：7
> 
> 时间：2013-01-15T08:43:25.197
> 
> 标签：javascript, node.js, websocket, socket.io

> 这个问题涉及 < 0.9.x 的 socket.io 版本。较新的版本具有不同的传输和设置传输的方法。

我在两周内测试了 node js 和 socket.io。当我开始时，我从`socket.send(message)`客户端的功能中得到了问题。我无法向服务器发送任何消息。但我仍然可以接收来自服务器的消息。当我找到服务器端的配置传输时，我解决了这个问题：

```
socket.set('transports',[
   'xhr-polling'
  , 'jsonp-polling'
]); 
```

一切安好。现在我也可以向服务器发送消息了。但是我仍然有一个问题，为什么我必须配置传输。默认 socket.io 使用 websocket 传输设置，如下所示：

```
socket.set('transports', [
    'websocket'
  , 'flashsocket'
  , 'htmlfile'
  , 'xhr-polling'
  , 'jsonp-polling'
]); 
```

所以它首先使用 websocket，而不是 xhr-polling。`socket.send(msg)`但是使用even时，服务器无法接收到客户端发送的任何消息`socket.emit(...)`。

所以问题是：这里不支持 websocket 的是什么？浏览器或node.js ...我很抱歉，但我从谷歌搜索了很多页面，但我还没有找到答案。

我使用 node.js 0.8.16 版、socket.io 0.9.13 版和最新的浏览器：chrome、firefox、opera

我想使用 websocket 而不是 xhr-polling。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-03T18:57:37.683

这很奇怪，因为即使您的服务器配置不支持 websocket，socket.io 也会选择下一个最佳可用方法（在您的情况下为 xhr-polling）。实际上，您甚至不需要设置这些传输，因为 socket.io 默认会尝试使用“websocket”作为主要方法。这可能表明存在其他问题，可能与您的代码有关？

不支持 websockets 的肯定不是你使用的浏览器，当然也不是 node.js。这将取决于您的服务器设置。

第一次检查：

1.  您正在收听的端口在您的防火墙中打开
2.  您的网络服务器支持 websocket。如果您使用 Apache 并将您的请求代理到内部 IP:PORT，除非您安装[apache-websocket](https://github.com/disconnect/apache-websocket)或[pywebsocket 之类的东西，否则 websocket 将无法工作](http://code.google.com/p/pywebsocket/)

最终解决我的问题是禁用 Apache 在端口 80 上侦听并让 node.js 在该端口上侦听。这是对我有帮助的答案：[https ://stackoverflow.com/a/7640966/2347777](https://stackoverflow.com/a/7640966/2347777)

# matlab - 如何在MATLAB中制作人体的3D表面？

> ID：14333944
> 
> 赞同：1
> 
> 时间：2013-01-15T08:43:32.247
> 
> 标签：matlab, 3d, cloud, point, geometry-surface

我在这个网站上搜索了很多，研究了类似的问题，并使用了给出的答案代码，但没有一个有效。所以我不得不问这个问题：

我有一个点云（一组 XYZ 用于 3D 表面）。它们实际上属于 3D 人体表面（胸部和背部）。我想在 MATLAB 中使用这些点制作 3D 曲面。我尝试了很多方法，但不幸的是没有一个有效。

如果有人能在这件事上为我提供一些帮助，我将不胜感激。谢谢你

* * *

实际上我自己得到了这个问题的答案！但我对此并不完全确定。

我必须定义这些点如何通过面矩阵连接。像这样 ：

```
Faces = [ 1 2 6 ; 1 2 4 ; 1 3 9 ; 2 6 8 ; ... ] ; 
```

这意味着例如点 1、2、6 作为面相互连接。定义面矩阵后，我必须使用补丁函数根据点（顶点）矩阵和给定的面矩阵制作一个 3D 表面。

这种事情的示例代码可能是这样的：

```
patch('Vertices', P, 'Faces', t); 
```

或者

```
patch('Faces', t, 'Vertices', P, 'FaceColor', [1 0.75 0.65], 'EdgeColor', 'k', 'FaceAlpha', 1.0); 
```

但是，我现在面临一个新问题，生成人脸矩阵！

有人对此有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:14:04.783

我能想到的一种方法是使用[Delaunay triangulation](http://www.mathworks.com/help/matlab/ref/delaunay.html)和[free boundary](http://www.mathworks.com/help/matlab/ref/trirep.freeboundary.html)。

```
% convert your X, Y, Z point cloud into a triangulated mesh
TRI = delaunay(X,Y,Z);
% get the outer boundary
[tri xf] = freeBoundary( TRI );
% plot
trisurf(tri, xf(:,1),xf(:,2),xf(:,3) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-12T19:59:37.817

代替 delaunay 只需使用 DelaunayTri

```
TRI = DelaunayTri(X,Y,Z);[tri xf] = freeBoundary( TRI );trisurf(tri, xf(:,1),xf(:,2),xf(:,3) ); 
```

# c++ - 添加VC2010编译器到VS2012

> ID：14333949
> 
> 赞同：4
> 
> 时间：2013-01-15T08:44:06.730
> 
> 标签：c++, visual-studio, visual-c++, visual-studio-2012

我已经安装了 VS2012 express。它使用 VC11 编译器。我还需要添加 VC10 编译器才能使用一些较旧的库。我已经安装了 VC10 编译器附带的 Windows 7.1 SDK。现在我可以从 PlatformToolset 中选择 VC10。但是在编译时我收到此错误：

**警告 1 警告 MSB8003：无法从注册表中找到 WindowsSDKDir 变量。TargetFrameworkVersion 或 PlatformToolset 可能设置为无效的版本号。C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets 297 5 (Visual Studio 2010)**

现在，我确定问题是我不是在 C 上而是在 E 上安装了 VS。虽然我也在 E​​ 上安装了 Windows SDK。不知何故，我看到配置正在寻找 C 上的“WindowsSDKDir”。我在哪里可以更改它?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:26:48.670

好吧，最后我通过删除 Windows SDK 并安装 Visual Studio Express 2010 来修复它。现在 VS2012 可以很好地编译 VC10。

# telerik - 将线系列绑定到 radchart telerik 中的附加 Y 轴

> ID：14333956
> 
> 赞同：0
> 
> 时间：2013-01-15T08:44:26.220
> 
> 标签：telerik, radchart

我有显示 2 个条形系列和 2 个线条系列的 radchart。条形系列根据左侧 y 轴显示，线条系列不根据右侧附加 y 轴绑定。右轴哪个线条系列必须绑定，但只有一个其中有绑定，其他没有显示绑定到左 Y 轴。

请任何人都可以为我提供任何解决方案，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:19:10.150

试试这个：

```
AxisY axisY = new AxisY();
axisY.AxisName = "AxisY1";
axisY.Title = "";
axisY.IsZeroBased = true;
axisY.DefaultLabelFormat = "#VAL{P0}";
SellInproductChart.DefaultView.ChartArea.AdditionalYAxes.Add(axisY);

AxisY axisY1 = new AxisY();
axisY1.AxisName = "AxisY2";
axisY1.Title = "";
axisY1.IsZeroBased = true;
axisY1.DefaultLabelFormat = "#VAL{P0}";

SellInproductChart.DefaultView.ChartArea.AdditionalYAxes.Add(axisY1);

objSeriesMapping1.SeriesDefinition.AxisName = "AxisY1";
objSeriesMapping2.SeriesDefinition.AxisName = "AxisY2"; 
```

# android - 如何上传多语言用户的反馈？

> ID：14333958
> 
> 赞同：0
> 
> 时间：2013-01-15T08:44:38.903
> 
> 标签：android, http, utf-8, comments

我让我的 Android 应用程序的用户能够在那里回复我的反馈。从技术上讲，我只是对我的 PHP 脚本进行 HTTP-Post，它作为存储反馈的数据库的连接器。

由于我的应用程序正在全球范围内扩展，我正面临多种语言的问题。我遇到了这种语言的问题：

```
Espagnol - Espa&Atilde;&plusmn;a
Arabic - &Oslash;&sect;&Ugrave;„&amp;Oslash;&
Korean - &euml;Œ€&amp;iacute;•œ&amp;euml;&macr;&f
Hungary - Magyarorsz&Atilde;&iexcl;g
Turkey - T&Atilde;&frac14;rkiye
Austria - &Atilde;–sterreich 
```

实施适用于全球各地的反馈系统的最佳实践是什么？

到目前为止，我做了一个 AsyncTask，它启动了一个为 HttpPost 提供动力的 HttpClient。有我的代码：

```
public class reqeust_online extends AsyncTask<Void, Integer, Boolean>
        {
        @Override
        protected void onPostExecute(Boolean result)
            {
            }

        @Override
        protected Boolean doInBackground(Void... params)
            {
            int request_widget = 0;
            if(((CheckBox)request_dialog.findViewById(R.id.chx_request_widget)).isChecked())
                {
                request_widget = 1;
                }
            int request_gallery = 0;
            if(((CheckBox)request_dialog.findViewById(R.id.chx_request_gallery)).isChecked())
                {
                request_gallery = 1;
                }
            int request_sound = 0;
            if(((CheckBox)request_dialog.findViewById(R.id.chx_request_sound)).isChecked())
                {
                request_sound = 1;
                }
            /*  End */

            HttpClient client = new DefaultHttpClient();
            HttpPost post = new HttpPost(URI.create((getResources().getString(R.string.url_request_send))));
            try {
                ArrayList<NameValuePair> nameValuePair = new ArrayList<NameValuePair>();
                nameValuePair.add(new BasicNameValuePair("request_widget", request_widget +""));
                nameValuePair.add(new BasicNameValuePair("request_gallery", request_gallery +""));
                nameValuePair.add(new BasicNameValuePair("request_sound", request_sound +""));
                nameValuePair.add(new BasicNameValuePair("request_custom", ((EditText)request_dialog.findViewById(R.id.edt_request)).getText().toString()));
                // Debug information
                nameValuePair.add(new BasicNameValuePair("device_country", Locale.getDefault().getDisplayCountry()));
                nameValuePair.add(new BasicNameValuePair("device_language", Locale.getDefault().getLanguage()));
                nameValuePair.add(new BasicNameValuePair("device_model", android.os.Build.MODEL));
                nameValuePair.add(new BasicNameValuePair("device_manufacturer", android.os.Build.MANUFACTURER));
                post.setEntity(new UrlEncodedFormEntity(nameValuePair, "UTF-8"));
                HttpResponse response = client.execute(post);
                StatusLine statusLine = response.getStatusLine();
                if(statusLine.getStatusCode() == HttpURLConnection.HTTP_OK)
                    {
                    return true;
                    }
                }
            catch (Exception e) {}
            return false;
            }
        } 
```

这是我的 PHP 代码，它存储传输到我的 MysqlDB 中的值

```
connect_mysql();
$country = clean($_POST['device_country']);     
$language = clean($_POST['device_language']); 
$model  = clean($_POST['device_model']); 
$manufacturer = clean($_POST['device_manufacturer']);
$widget = clean($_POST['request_widget']);
$gallery = clean($_POST['request_gallery']);
$sound = clean($_POST['request_sound']);
$custom = clean($_POST['request_custom']);
mysql_query("INSERT INTO wm2014_request (widget,gallery,sound,custom,country,language,model,manufacturer) VALUES ('$widget','$gallery','$sound','$custom','$country','$language','$model','$manufacturer')") or die (http_response_code(204));
http_response_code(200);

    function clean($str)
        {
        $str = @trim($str);
        $str = htmlentities($str);
        if(get_magic_quotes_gpc())
            {
            $str = stripslashes($str);
            }
        $str = mysql_real_escape_string($str);
        $str = addslashes($str);
        return $str;
        } 
```

我设置了 MySQL 数据库，`utf8_general_ci`所以这应该不是问题。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:56:58.540

```
function clean($str)
{
    $str = @trim($str);
    if(get_magic_quotes_gpc())
    {
        $str = stripslashes($str);
    }
    return mysql_real_escape_string($str);
} 
```

# rhel - 如何避免每次重启时 rhel6 中的 mac 发生变化？

> ID：14333959
> 
> 赞同：-1
> 
> 时间：2013-01-15T08:44:43.047
> 
> 标签：rhel

我有一个 NVIDIA Corporation MCP61 以太网，每次我重新启动我的机器时，它的 MAC 地址都会改变。

```
[root@sun etc]# dmesg |grep eth0
forcedeth 0000:00:07.0: ifname eth0, PHY OUI 0x732 @ 1, addr 66:b6:95:ea:3e:29
udev: renamed network interface eth0 to eth3
udev: renamed network interface eth0 to eth1 
```

这次是`66:b6:95:ea:3e:29`。如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:59:19.010

这是这里的题外话，但长期以来它是一个已知的错误。在 Ubuntu 的 bugtracker 上查看[这个广泛的讨论。](https://bugs.launchpad.net/ubuntu/+source/udev/+bug/153727)

大约 10 年前，它还提出了一个修复方案。

我知道它的 Ubuntu 的 bugtracker，但问题出在 linux 内核驱动程序上。那里的链接将引导您找到一些解决问题的方法。

# symfony - 路由要求 0

> ID：14333962
> 
> 赞同：1
> 
> 时间：2013-01-15T08:45:06.830
> 
> 标签：symfony, routes, symfony-2.2

我的 Symfony2.2 beta 路由有问题。(symfony-2-2-0-beta-1)

我使用这样的注释路由：

```
@Route("/form/{id}", defaults={"id"=0}, requirements={"id"="\d+"}); 
```

错误是：

> 在 [...]:form 中的模板渲染期间引发了异常（“路由“[...]_form”的“参数“id”必须匹配“\d+”（“”给定）。”）。 html.twig 在第 1 行。

第 1 行是：

```
{{ path("[...]_form") }} 
```

我认为路线是正确的，因为我将“id=0”定义为默认值。在 Symfony2.1 中，同样的代码可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:52:15.313

您是否尝试在操作中设置默认值并将其从注释中删除？

```
/**
 * @Route("/form/{id}", name="my_form", requirements={"id"="\d+"});
 */
public function myFunction($id = 0){
... 
```

我相信这是 Symfony 2.2 的变化之一，虽然我还没有尝试过。[http://symfony.com/blog/new-in-symfony-2-2-small-things-matter#defining-default-values-when-using-the-route-annotation](http://symfony.com/blog/new-in-symfony-2-2-small-things-matter#defining-default-values-when-using-the-route-annotation)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-07T13:53:01.120

你可以试试

```
 requirements:
    id: \S|\d+ 
```

# ruby-on-rails - 如何在我的 Gemfile 中找到未使用的宝石

> ID：14333963
> 
> 赞同：40
> 
> 时间：2013-01-15T08:45:07.580
> 
> 标签：ruby-on-rails, gemfile

如何在我的 Gemfile 中找到未使用的 gem，以便我可以清理不再使用的引用。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2015-02-20T12:26:27.980

使用 linux 的文件访问时间来查看实际使用的内容。

这需要：

1.  在 rvm gemset 中隔离的项目 gem
2.  安装在使用 atime（ubuntu 12.04 上的 strictatime）选项安装的分区上的 gem：

    sudo mount -o remount,strictatime /

3.  完整的测试覆盖（即我们将依靠测试运行来更新文件访问时间）

记下时间并运行测试。然后从您的 gemdir 执行：

```
ls --time-style long-iso -ltud1 $PWD/*/lib/** | grep "21:44" | sed s/.*gems.// | sed s/.lib.*// | sort -u 
```

将 21:44 更改为您运行测试的任何时间。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-12-04T12:23:29.880

运行您的测试，然后：

```
gem stale 
```

执行以下操作：

> stale 命令列出了已安装 gem 中所有文件的最新访问时间。
> 
> 您可以使用此命令来发现您不再使用的 gem 和 gem 版本。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-04-06T16:20:37.287

如果所有测试在没有宝石的情况下通过，则应考虑移除任何宝石。

假设您有良好的测试覆盖率 - 特别是高级功能测试 - 您可以编写一个脚本来一次选择性地删除一个 gem。即运行所有测试 N 次，其中 N 是 Gemfile 中的宝石数量，每个测试都有一个缺失的宝石。这将有助于剔除宝石而不影响它们的重量。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-09-16T22:57:00.617

您可以使用[gem_bench](http://github.com/pboling/gem_bench) gem 来分析您的 Gemfile 并确定在启动时不需要哪些 gem。从那里只需要进行一些分析即可确定可以完全移除哪些宝石。

要生成可以从引导时删除的 gem 列表：

1.  添加`gem 'gem_bench', :group => :console`到您的 Gemfile。
2.  跑`bundle install`
3.  `bundle exec rails console`使用以下命令运行：
4.  `a = GemBench.check({verbose: true})`

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-01-15T09:04:29.007

我怀疑是否有一种自动方法可以在 Gemfile 中找到未使用的 gem。

对于随着时间的推移构建应用程序的人来说，手动识别由于某种原因而被丢弃的宝石应该很容易。

对于从其他人继承的遗留应用程序，手动识别未使用的 gem 是一项非常困难的任务。如果系统有全面的测试覆盖率，它将有助于通过反复试验删除未使用的 gem，同时确保测试在 Gemfile 中的每次更改时通过。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-15T22:06:15.963

有`bundle clean --force`删除定义之外的 gem 的命令`Gemfile.lock`。

请参阅[捆绑清洁](http://bundler.io/v1.10/bundle_clean.html)。

# joomla2.5 - 仅显示位置的第一个模块

> ID：14333968
> 
> 赞同：0
> 
> 时间：2013-01-15T08:45:31.190
> 
> 标签：joomla2.5, joomla-module

有没有办法限制`<jdoc:include type="modules" name="user1" style="xhtml" />`只显示这个职位的第一个发布的模块？

**它应该尊重Module Manager**中存在的顺序，这样做的目的是仅在日期有效时显示某个模块，并且如果由于日期而取消发布，则显示下一个有效模块而无需用户帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:01:00.610

有一个非常简单的方法可以做到这一点。安装高级模块管理器，您可以轻松配置模块位置以显示正确的模块。

# c# - 如何在 C# 中创建嵌套的自定义配置部分？

> ID：14333971
> 
> 赞同：6
> 
> 时间：2013-01-15T08:45:35.263
> 
> 标签：c#, configuration, custom-configuration

我需要通过以下方式进行自定义配置

```
<root>
<group>
 <groupitem> 
    <property1/>
    <property2/>
    <property3/>
    <property4/>   
 </groupitem>
<group>
</root> 
```

我没有找到任何如何做到这一点的例子。

紧随其后，

[嵌套配置部分 app.config](https://stackoverflow.com/questions/5027284/nested-configuration-section-app-config)

但我仍然坚持定义与 groupitem 对应的类。如果我改变`property1`，`property2`从元素到属性，那很容易定义。

但是，如果这些属性具有嵌套属性，则会产生问题。

问题是，如何以上面定义的方式定义嵌套层次结构？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T09:40:23.013

配置部分是某些配置模型的顶级元素。例如，您的产品名称将是配置部分。

任何其他嵌套元素都是 a`ConfigurationElement`或`ConfigurationElementCollection`。

实际上，您还可以创建自定义部分组派生`ConfigurationSectionGroup`.

获取您的配置：

```
<root> <!-- This is a ConfigurationSection -->
<group><!-- This is a ConfigurationElement -->
 <groupitem> <-- This could be a ConfigurationElement having child items of type ConfigurationElement or a ConfigurationElementCollection -->
    <property1/> <!-- This is a ConfigurationElement -->
    <property2/> <!-- This is a ConfigurationElement -->
    <property3/> <!-- This is a ConfigurationElement -->
    <property4/> <!-- This is a ConfigurationElement -->   
 </groupitem>
<group> 
```

如果您真的想知道如何使用 .NET 配置模型，请查看以下文章：

*   [http://www.codeproject.com/Articles/37776/Writing-a-complex-custom-configuration-section](http://www.codeproject.com/Articles/37776/Writing-a-complex-custom-configuration-section)
*   [http://www.codeproject.com/Articles/163081/Custom-Configuration-Sections-in-NET](http://www.codeproject.com/Articles/163081/Custom-Configuration-Sections-in-NET)

# sql - 使用触发器如何复制刚刚插入的行

> ID：14333977
> 
> 赞同：3
> 
> 时间：2013-01-15T08:45:49.147
> 
> 标签：sql, sql-server, triggers

我正在使用 SQL Server 2008，并且我有一个触发器，我想将其中的任何行复制`My_Table`到存档`History_Table`表中。

每次有人插入新行时，如何将表的整个旧内容复制到存档中？

我的表结构是

```
 CREATE TABLE [dbo].[Stu_Table]
    (
    [Stu_Id] [int] NOT NULL,
    [Stu_Name] [varchar] (15) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Stu_Class] [int] NULL
    ) ON [PRIMARY]
    GO

ALTER TABLE [dbo].[Stu_Table] ADD CONSTRAINT [PK_Stu_Table] PRIMARY KEY CLUSTERED  ([Stu_Id]) ON [PRIMARY]
GO 
```

我的存档表结构是

```
CREATE TABLE [dbo].[Stu_TableHistory]
(
[Stu_Id] [int] NOT NULL,
[Stu_Name] [varchar] (15) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
[Stu_Class] [int] NULL
) ON [PRIMARY]
GO
ALTER TABLE [dbo].[Stu_TableHistory] ADD CONSTRAINT [PK_Stu_TableHistory] PRIMARY KEY CLUSTERED  ([Stu_Id]) ON [PRIMARY]
GO 
```

我的触发器语法是

```
Create TRIGGER [dbo].[HistoryKeep]
   ON  [dbo].[Stu_Table]
   INSTEAD OF  INSERT
AS 
BEGIN
    IF((SELECT COUNT(*) FROM Stu_Table WHERE Stu_Id = (SELECT Stu_Id FROM INSERTED)) >= 1)
    BEGIN
        INSERT INTO dbo.Stu_TableHistory( Stu_Id, Stu_Name, Stu_Class )
        SELECT Stu_Id, Stu_Name, Stu_Class FROM Stu_Table WHERE Stu_Id = (SELECT Stu_Id FROM INSERTED)

        UPDATE x
        SET x.Stu_Name = i.Stu_Name
        FROM dbo.Stu_Table AS x
        INNER JOIN inserted AS i ON i.Stu_Id = x.Stu_Id

    END
    ELSE
    BEGIN
        INSERT INTO dbo.Stu_Table( Stu_Id, Stu_Name, Stu_Class )
        SELECT Stu_Id, Stu_Name, Stu_Class FROM INSERTED
    END
END 
```

总之需要帮助将旧数据从学生表传输到存档表。我上面的触发器语法不能满足我。

如果有任何疑问请提前询问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:11:53.183

而不是你当前的触发器，你应该有类似的东西：

```
Create TRIGGER [dbo].[HistoryKeep]
   ON  [dbo].[Stu_Table]
   INSTEAD OF  INSERT
AS 
BEGIN
DECLARE @History table (
    Action sysname not null,
    STU_ID [int] NULL,
    [Stu_Name] [varchar] (15) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Stu_Class] [int] NULL
)

;MERGE INTO Stu_Table t
USING INSERTED i ON t.STU_ID = i.STU_ID
WHEN MATCHED THEN UPDATE SET STU_Name = i.STU_Name
WHEN NOT MATCHED THEN INSERT (STU_ID,STU_NAME,STU_CLASS) VALUES (i.STU_ID,i.STU_NAME,i.STU_CLASS)
OUTPUT $Action,deleted.stu_id,deleted.stu_name,deleted.stu_class INTO @History;

INSERT INTO stu_TableHistory (stu_id,stu_name,stu_class)
select stu_id,stu_name,stu_class from @History where Action='UPDATE'
END 
```

另请注意，您需要将当前的 PK 约束放在 上`STU_TableHistory`，因为只要一行更新不止一次，就会有两个条目包含相同的`STU_ID`.

* * *

根据我的评论，这被视为`INSERTED`一个包含多行的表格。因此，如果`Stu_Table`包含 1 的行`STU_ID`，则插入以下内容：

```
INSERT INTO STU_Table (STU_ID,STU_Name,STU_Class) VALUES
(1,'abc',null),
(2,'def',null) 
```

将*更新*`STU_ID`1的行，为2 插入一行，并*在**(* for 1)中插入一行`STU_ID`*`stu_tableHistory``STU_ID`*

# blackberry-simulator - 在模拟器中启用屏幕键盘

> ID：14333981
> 
> 赞同：5
> 
> 时间：2013-01-15T08:46:08.013
> 
> 标签：blackberry-simulator, blackberry-10

如何在 BlackBerry 10 alpha 模拟器中启用屏幕虚拟键盘？

我在将文本输入到移植的 Android 应用程序时遇到了一些问题，并且读到 PlayBook 模拟器在通过主机 PC 的键盘输入文本时也遇到了问题。

我在模拟器设置的“屏幕键盘”设置中启用了“按键弹出”（不知道它的作用），但它似乎没有效果： ![屏幕键盘设置](../Images/e12ad71d7c8f3d945d6872d4d3042567.png)

有没有办法让屏幕键盘出现，所以我可以使用它进行测试？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T09:19:36.547

我发现屏幕键盘只有在从**左下角**拖入时才会出现。

此外，我发现在纵向模式下，键盘无法正确显示：

![纵向模拟器； 键盘显示不正确](../Images/22e8a5d7aaa20b653b76869bc27c3631.png)

要让模拟器处于横向模式，请从**右下角**拖动；然后键盘确实正确显示：

![景观模拟器； 键盘显示正确](../Images/b58f96dd835a5707db177faecfd5da74.png)

顺便说一句，这并没有解决我的文本输入问题。由于它的工作如此零星，我相信这仅仅是由于模拟器仍处于 alpha 状态。事实上，目前各种键映射不正确，例如“3”映射到“1”，“4”映射到“8”，但大多数根本不是。这可能与`android:inputType="number"`.

# android - Dagger 是否支持 ActivityInstrumentationTestCase2 测试的依赖注入

> ID：14333985
> 
> 赞同：6
> 
> 时间：2013-01-15T08:46:25.963
> 
> 标签：android, dependency-injection, functional-testing, dagger

我正在尝试在继承 ActivityInstrumentationTestCase2 的 Android 功能测试中使用[Dagger](http://square.github.com/dagger/)。

设置代码如下所示：

```
@Override
protected void setUp() {
    // TODO Auto-generated method stub
    try {
        super.setUp();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    ObjectGraph.create(new TestModule()).inject(this);
    this.activity = super.getActivity();
}` 
```

通过调用 触发的 OnCreate 方法`super.getActivity()`不使用 TestModule 提供的类。但是，如果我手动运行我的活动（在测试上下文之外），那么所有适当的类都由我的非测试模块提供/注入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-01T18:32:09.170

`ActivityInstrumentationTestCase2`我通过懒惰地创建对象图找到了一种使用 Dagger 的方法。我所做的是等待创建对象图，直到第一次想要注入一个类，所以只要你在调用之前添加你的模块`getActivity()`（这会启动被测活动的活动生命周期）并`overrides = true`在你的测试模块中使用，这将起作用。这是相关的类和片段：

`GraphHolder`，顾名思义，`ObjectGraph`为我们保存对象。我们将对此类进行所有调用，而不是直接调用`ObjectGraph`.

```
public class GraphHolder {

    private static GraphHolder sInstance;

    private Object[] mModules;
    private ObjectGraph mGraph;

    private GraphHolder() {
    }

    public static GraphHolder getInstance() {
        if (sInstance == null) {
            sInstance = new GraphHolder();
        }

        return sInstance;
    }

    public void inject(Object object) {
        if (mGraph == null) {
            create();
        }

        mGraph.inject(object);
    }

    public <T> T get(Class<T> type) {
        if (mGraph == null) {
            create();
        }

        return mGraph.get(type);
    }

    public void addModules(Object... modules) {
        if (mGraph != null) {
            mGraph.plus(modules);
        } else {
            if (mModules == null) {
                mModules = modules;
            } else {
                mModules = concatenate(mModules, modules);
            }
        }
    }

    private void create() {
        mGraph = ObjectGraph.create(mModules);
        mModules = null;
    }

    private Object[] concatenate(Object[] a, Object[] b) {
        int aLength = a.length;
        int bLength = b.length;

        Object[] c = new Object[aLength + bLength];
        System.arraycopy(a, 0, c, 0, aLength);
        System.arraycopy(b, 0, c, aLength, bLength);

        return c;
    }
} 
```

我们将在`Application`类中添加我们的模块：

```
public class MyApplication extends Application {

    @Override
    public void onCreate() {
        super.onCreate();
        GraphHolder.getInstance().addModules(getModules());
    }

    Object[] getModules() {
        return new Object[]{
                // your modules here
        };
    }
} 
```

在我们想要注入的类中，我们将简单地调用`GraphHolder.getInstance().inject(this)`而不是`ObjectGraph.inject(this)`

在我们的测试模块中，我们将提供我们想要覆盖的对象以进行测试并添加`overrides = true`到`@Module`注释中。这告诉对象图在发生冲突时优先选择此模块的提供者而不是其他提供者。

然后，在我们的测试中：

```
@Inject Foo mFoo;

@Override
public void setUp() {
    super.setUp();
    GraphHolder.getInstance().addModules(new TestFooModule());
    GraphHolder.getInstance().inject(this); // This is when the object graph will be created
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T11:04:10.590

`ObjectGraph.create(new TestModule()).inject(this);`

此代码试图将由 TestModule 创建的依赖项注入到您的 TestCase 而不是经过测试的 Activity 中。你必须在这里做的是

`ObjectGraph.create(new TestModule()).inject(this.activity);`

# c# - MVC4不在浏览器中保存cookie

> ID：14333986
> 
> 赞同：3
> 
> 时间：2013-01-15T08:46:26.720
> 
> 标签：c#, asp.net-mvc, cookies, asp.net-mvc-4

我一直在尝试使用 MVC4 在我的浏览器中的 cookie 中保存纯文本，但由于某种原因，它从未保存在浏览器中。我在 IE、Chrome 和 FireFox 中进行了测试。

我一直在 StackOverflow 上尝试不同的解决方案，但没有一个对我有用。我不知道我做错了什么，我希望有人能够帮助我解决这个问题。

我一直在使用的代码：

```
if (Request.Cookies.AllKeys.Contains("testKanti"))
{
    // Never makes it here.
}
else
{
    HttpCookie cookie = new HttpCookie("testKanti");
    cookie.Value = "testKanti";
    cookie.Expires = DateTime.UtcNow.AddYears(1);

    Response.Cookies.Remove("testKanti");
    Response.SetCookie(cookie);
} 
```

我也试过`Response.Cookies.Add()`了，但也没有用。有人熟悉这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T16:01:51.043

您是否尝试过同时使用这两个字符串？

```
Request.Cookies.Add(cookie);
Response.SetCookie(cookie); 
```

我已经尝试过，在我的情况下它有效

```
if (Request.Cookies.AllKeys.Contains("testKanti"))
{
    // We are here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:26:44.983

尝试以下方式：

```
HttpCookie cookie = new HttpCookie("testKanti");
cookie.Value = "testKanti";
cookie.Expires = DateTime.UtcNow.AddYears(1);

Response.Cookies.Add(cookie); 
```

看看您是否可以先使 cookie 的设置起作用，因为`Response`在返回响应之前将其从对象中删除可能会导致问题。

# events - 在 python web-application 中从 Google Calander(version='v3') 获取事件时出错

> ID：14333987
> 
> 赞同：0
> 
> 时间：2013-01-15T08:46:27.903
> 
> 标签：events, oauth-2.0, google-calendar-api

我正在使用 FLOW api 在 Google 日历版本“v3”中授权通过我的应用程序访问 Google 日历。

身份验证已完美完成，但当时尝试从该人的 Google 日历访问该特定人的事件时出现以下错误。

```
HttpError: <HttpError 404 when requesting https://www.googleapis.com/calendar/v3/calendars/primary/events?alt=json&key='DEVELOPER_KEY' returned "Not Found"> 
```

虽然对此进行了很多观察，但无法解决相同的错误。

我正在使用以下代码片段从 Google 日历中获取事件。

```
events = service.events().list(calendarId='primary').execute() #fetch out events for first time
while True:
    for event in events.get('items', []):
        print event['summary']
    page_token = events.get('nextPageToken') #check if any event present in next page of the calendar
    if page_token:
        events = service.events().list(calendarId='primary', pageToken=page_token).execute()
    else:
        break 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:27:51.357

将字符串 'primary' 替换为用户的完整电子邮件地址：

```
events = service.events().list(calendarId='myuser@gmail.com').execute() #fetch out events for first time
while True:
    for event in events.get('items', []):
        print event['summary']
    page_token = events.get('nextPageToken') #check if any event present in next page of the calendar
    if page_token:
        events = service.events().list(calendarId='primary', pageToken=page_token).execute()
    else:
        break 
```

# mongodb - 如何在 MongoDB 中通过另一个字段查找一个字段分组的数量？

> ID：14333992
> 
> 赞同：0
> 
> 时间：2013-01-15T08:46:54.357
> 
> 标签：mongodb, nested, aggregation-framework

假设有一个项目数据库；它由三个字段组成： 1\. 项目名称 2\. 在该项目中工作的人的姓名 3\. 人的角色。

我们要计算每个项目内，每个人有多少个角色！以下是一个示例：

```
 {
    "Core" : {
        "Ted": 3,
        "Max":1
    },
    "Web" : {
        "Ted":1
    }
    } 
```

这是下表的结果

```
ProjectName     Person      Role
---------------------------------------------------
Core            Ted         Developer
Core            Ted         Designer
Core            Ted         Manager
Web             Ted         Developer
Core            Max         PCM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:58:48.870

使用聚合框架

```
var res = db.test.aggregate([ 
    {$group:{_id:{project:"$ProjectName", name:"$Person"}, Role:{$sum:1}}},
    {$project:{_id:"$_id.project", names:"$_id.name", roles:"$Role"}},
    {$group:{_id:"$_id", record:{$addToSet:{name: "$names", role: "$roles"}}}} 
])

var finalResult = {'final':1};
for(var i in res.result){ 
    var project ={'seq':i};
    for(var j in res.result[i].record {
        project[res.result[i].record[j].name]=res.result[i].record[j].role;
    }
    finalResult[res.result[i]._id]=project;
}
printjson(finalResult) 
```

将呈现如下结果：

```
{
    "final" : "1",
    "Web" : {
        "seq" : "0",
        "Ted" : 1
    },
    "Core" : {
        "seq" : "1",
        "Ted" : 3,
        "Max" : 1
    }
} 
```

但我相信还有更优雅的方法可以做到这一点。这个刚刚好。

# iphone - 从 NSString 中删除 HTML 标签

> ID：14333995
> 
> 赞同：1
> 
> 时间：2013-01-15T08:47:04.137
> 
> 标签：iphone, objective-c, nsstring

> **可能重复：**
> [从 iPhone 上的 NSString 中删除 HTML 标签](https://stackoverflow.com/questions/277055/remove-html-tags-from-an-nsstring-on-the-iphone)

我有一种方法可以用来从 NSString 中删除 HTML 标签（我用它创建了一个类别）：

```
-(NSString *) stringByStrippingHTML {
    NSRange r;
    NSString *s = [[self copy] autorelease];
    while ((r = [s rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location != NSNotFound)
        s = [s stringByReplacingCharactersInRange:r withString:@""];
    return s;
} 
```

问题是我想删除除标签之外的所有 HTML 标签`<br>`，我能做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:57:48.933

你可以调整为

首先替换`<br/>`为，`*br/*`然后替换所有 html 标签，然后再次替换`*br/*`为`<br/>`.

或者，您可以使用条件替换 .. if read tag is `br`continue else replace。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:54:00.597

在调用之前`stringByReplacingCharactersInRange:`确保标签不是`<br />`.

# java - 使用元模型区分大小写条件的 JPA 2 Criteria API

> ID：14333997
> 
> 赞同：1
> 
> 时间：2013-01-15T08:47:06.540
> 
> 标签：java, hibernate, jpa, criteria-api

我有以下代码行来获得基于like语句使用Hibernate 4 API的结果

```
Predicate predicate = cb.like(emp.get(EmployeeDetail_.empName),
                empName+"%"); 
```

生成的sql语句为

```
 select employeede0_.EMPLOYEE_NAME as EMPLOYEE1_0_ from EMPLOYEES employeede0_ 
        where employeede0_.EMPLOYEE_NAME like 'smith%' 
```

如何修改我的 java 代码以使 EMPLOYEE_NAME 为小写？生成的sql输出应该如下

```
select employeede0_.EMPLOYEE_NAME as EMPLOYEE1_0_ from EMPLOYEES employeede0_ 
    where lower(employeede0_.EMPLOYEE_NAME) like lower('smith%') 
```

获取结果的完整代码

```
 CriteriaBuilder cb = entityManager.getCriteriaBuilder();
        CriteriaQuery<Employee> c = cb.createQuery(Employee.class);
        Root<Employee> emp = c.from(Employee.class);
        c.select(emp);
        List<Predicate> criteria = new ArrayList<Predicate>();
        ParameterExpression<String> pexp = cb.parameter(String.class,
                "empName");
        Predicate predicate = cb.like(emp.get(Employee_.empName),
                empName+"%");
        criteria.add(predicate);

        if (criteria.size() == 1) {
            c.where(criteria.get(0));
        } else if (criteria.size() > 1) {
            c.where(cb.and(criteria.toArray(new Predicate[0])));
        }
        TypedQuery<EmployeeDetail> q = entityManager.createQuery(c);
        data.setResult(q.getResultList()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:53:46.993

使用[CriteriaBuilder#lower()](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#lower%28javax.persistence.criteria.Expression%29)：

```
Predicate predicate = cb.like(cb.lower(emp.get(EmployeeDetail_.empName)),
            empName.toLowerCase() + "%"); 
```

# java - 如何集成 Spring Security 和 Struts2

> ID：14333999
> 
> 赞同：9
> 
> 时间：2013-01-15T08:47:22.563
> 
> 标签：java, spring, security, struts2, spring-security

我已经对这个问题进行了大量的谷歌搜索，到目前为止，我找不到任何关于集成 Struts2 和 Spring Security 的教程。

我的问题是如何集成 Spring Security 和 Struts2？

在我希望限制某些操作或页面的地方，例如管理页面/url 只能由管理员访问，如果用户尝试访问该页面，他或她将被重定向到另一个页面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T09:02:30.633

假设您需要保护`/admin/*`路径上可访问的内容。您需要在您的 中声明 Spring Security 过滤器`web.xml`，Struts 过滤器应该紧随其后，这样如果您正在访问`/admin`它将首先处理请求的 Spring Security 将能够让它通过或阻止它，具体取决于用户：

```
<filter>
  <filter-name>springSecurityFilterChain</filter-name>
  <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
<filter-name>springSecurityFilterChain</filter-name>
  <url-pattern>/admin/*</url-pattern>
</filter-mapping>
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
</filter>
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

然后，您声明您的 spring 安全上下文：

```
<http>
    <intercept-url pattern="/*" filters="none" />
    <intercept-url pattern="/admin/**" access="ROLE_ADMIN" />
    <intercept-url pattern="/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />           
    <form-login login-page="/login" />
    <logout logout-url="/logout" />
</http> 
```

我建议您使用该`struts2-convention`插件，以便将类似`/login`的 URL 自动绑定到名为 let's say 的类`com.foo.bar.actions.LoginAction`。相同的`LogoutAction`

现在下面的内容`/admin/*`应该由 Spring Security 保护，其余的应该直接转发到 Struts2 过滤器。

最后，在您的 JSP 中，您可以检查某人是否是管理员：

```
<sec:authorize access="hasRole('ROLE_ADMIN')">
   <p>you are an admin</p>
</sec:authorize> 
```

其余的可以在任何 Spring Security 教程中找到。真正重要的是过滤器声明的顺序，spring security 必须是第一位的。

**编辑：**在谷歌上搜索，也有[这个链接](http://jtechspace.blogspot.fr/2012/07/integrating-struts2-with-spring.html)可以帮助你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T09:10:59.750

这实际上非常简单 - Spring Security 与 Web 框架无关 :)

您需要定义 Spring Security 过滤器链 - 这是一个应该映射到所有请求的 Java 过滤器。过滤器将检查路径是否需要任何特权，如果需要，则检查用户是否已登录并拥有这些特权。

简单的设置示例。

web.xml （插入到现有的，与 struts 配置一起）：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        classpath:META-INF/spring/applicationContext-security.xml
    </param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

Spring 安全配置（在 web.xml 中 contextConfigLocation 参数中提到的文件中）：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<http pattern="/js/**" security="none" />
<http pattern="/css/**" security="none" />
<http pattern="/images/**" security="none" />

<http auto-config="false" use-expressions="true">
    <http-basic/>
    <intercept-url pattern="/**" access="hasRole('ROLE_USER')" />
    <session-management session-fixation-protection="newSession" />
</http>
</beans:beans> 
```

您可以根据需要扩展它 - [Spring 的文档写得很好](http://docs.spring.io/spring-security/site/docs/3.2.5.RELEASE/reference/htmlsingle/)

您可以进行更简单的自动配置：

```
<http auto-config='true'>
    <intercept-url pattern="/**" access="ROLE_USER" />
</http> 
```

以上选项可根据请求路径保护您的网络应用程序。您可能还想保护这些操作。添加以下内容将使您继续前进：

```
<global-method-security secured-annotations="enabled" pre-post-annotations="enabled" proxy-target-class = "true" /> 
```

让我知道您需要哪些功能，我可以为您指明方向。请记住，命名空间配置不是灵丹妙药 - 如果您需要一个非常自定义的解决方案，您可能需要自己配置所有 Spring bean，但文档很好地解释了这一点。