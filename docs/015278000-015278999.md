# StackOverflow 问答 15278000-15278999

# javascript - 了解两种 Javascript 语法之间的差异

> ID：15278000
> 
> 赞同：2
> 
> 时间：2013-03-07T17:38:22.890
> 
> 标签：javascript, syntax, durandal

我是 javascript 新手，所以请原谅我提出这样一个新手问题。我一直在尝试通过查看 SPA 示例来学习 javascript 语言，这些示例使用以下库 durandal、knockout js 和微风 js、sammy 和 require，并且我认为我正在尝试使用模块模式。我遇到了不同的代码语法如下

```
define(['services/logger'], function (logger) {

    var model = "somedata"
    var vm = {
        activate: activate,
        title: 'Details View'
    };

    return vm;
    function activate() {
        logger.log('Details View Activated', null, 'details', true);
        return true;
    }
}); 
```

和

```
define(['services/logger'], function (logger) {

        var model = "somedata"

    return {
        activate: activate,
        title: 'Details View'
    };

    function activate() {
        logger.log('Details View Activated', null, 'details', true);
        return true;
    }
}); 
```

我的问题是

1.  过度使用一种语法有优势吗？
2.  上面代码块中的变量“model”会有全局作用域吗？
3.  从函数中访问“title”变量的最佳方法是什么？我应该使用 this.title 吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:45:35.973

1.  语法 2 更容易阅读。它不是将它分配给一个变量并立即返回它，而是只返回值。除此之外，没有任何优势。
2.  “模型”变量将不具有在此特定上下文中定义的全局范围。
3.  在返回的对象上，您通过 objName.title 调用 title

这回答了你的问题了吗？

# php - PHP更改会话cookie文件的内容

> ID：15278001
> 
> 赞同：0
> 
> 时间：2013-03-07T17:38:27.197
> 
> 标签：php, session, session-variables, session-cookies

我不确定如果我是用鼹鼠山造一座山......

我有两台服务器 A + B。我知道服务器 A 上存在一个带有会话 cookie 的 PHP 会话。我进一步知道在其中一个会话文件（存储在 var/lib/php5 中）存在一个唯一值，例如：

```
$_SESSION['name'] = "1_colourXY" 
```

我可以通过在 dir/ 文件中搜索这个值（fe：文件 sess_489b9515146e7390ac03b5dabf36b70e）来用 php 识别这个 cookie 文件。

我现在希望服务器 B 能够告诉 A 将新值存储到此显式 cookie 文件中。我的解决方案是：

服务器 B（不是启动会话的客户端！）调用服务器 A 上的 PHP 文件。在 B 通过一些安全检查后，A 应该使用 file_puts_content 向该 cookie 文件写入一个新值。注意，因为写的 Server B 还没有开始会话所以我想我不能简单地做

```
session_start();
$_SESSION['myval'] = "new val"; 
```

因此我有以下问题：

1.  是否有更简单的（本机会话处理）方式而不是 file_puts... 将值写入 cookie 文件，例如：

    ```
    write $_SESSION['myval'] = "new val" to
    sess_489b9515146e7390ac03b5dabf36b70e 
    ```

2.  会话 Dir var/lib/php5 具有 chmod 773，要在其中写入和搜索，我必须将权限更改为 777（urrgh）。如何保留 773 但使其可用于 php

3.  如果我打开一个 cookie 文件，值如下所示： place|s:6:"Muster"; |s:6: 是什么意思？

亲切的问候，

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:44:40.037

1.  您应该使用 MySQL 之类的数据库来存储会话，然后将所有会话调用抽象到该数据库中。

2.  见 1。

3.  这就是 PHP 类型被序列化为字符串的方式。在这种情况下 s:6:"Muster" 是一个 6 个字符长的字符串，恰好是 "Muster"。

# sharepoint - 使用 c# 以编程方式打开安全的 Sharepoint 文件

> ID：15278005
> 
> 赞同：0
> 
> 时间：2013-03-07T17:38:38.607
> 
> 标签：sharepoint, permissions, dialog, httpresponse, user-permissions

我需要帮助以编程方式打开在线 Sharepoint 文件。这些文件需要在 Sharepoint 上进行保护（这样用户就不会进入它们），但我还需要使用我的 webpart 以某种方式访问​​它（这将检查安全性）。通常，您可以只使用链接到 Sharepoint 文件的超链接，但我们不希望人们共享这些超链接，这样就行不通了。

我希望用户单击一个链接，并让他们看到该文件的“打开、保存、关闭”对话框菜单。

我试过这个

```
 String fileName = @"file.txt";
            String filePath = @"~online filePath/"; 

            System.Web.HttpResponse response = System.Web.HttpContext.Current.Response;
            response.ClearHeaders();
            response.ClearContent();
            response.Clear();
            response.ContentType = "text/plain"; 
            //or whatever file type, I can code that later
            response.AddHeader("Content-Disposition", "attachment; Filename=" + fileName + ";");
            response.TransmitFile(filePath + fileName);
            //response.Flush();
            response.End(); 
```

不幸的是，虽然这适用于本地文件（C://...），但当我在我的网络 fike 上尝试这个时，我只收到一个包含当前页面源代码的文本文档。不知道为什么。

至于处理权限，我计划使用提升的权限让程序获得对文件的访问权限。

我会很感激任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:48:21.020

以下是提供文件以供 SharePoint 下载的示例代码

```
using (SPWeb web = SPContext.Current.Web)
{
    //Get fileName and filePath here
    response.AddHeader("Content-disposition", "attachment; filename=" + fileName);
    response.ContentType = "application/octet-stream";
    SPFile file = web.GetFile(filePath);
    byte[] fileBytes = file.OpenBinary();
    response.OutputStream.Write(fileBytes, 0, fileBytes.Length);
    response.End();
} 
```

这有帮助还是您在定位文件名和文件路径时遇到问题？

# mysql - 连接提交后的学说和存储过程

> ID：15278006
> 
> 赞同：0
> 
> 时间：2013-03-07T17:38:38.670
> 
> 标签：mysql, stored-procedures, triggers, doctrine, connection

我试图在我的项目中调用存储过程，在保存对象之后（就像触发器一样，但 MySQL 不允许在触发器中调用存储过程）。

第一次尝试：我在 Doctrine_Record 中的 postInsert() 挂钩中编写了调用。此刻，事务还没有提交到数据库，所以走错路了。

第二次尝试：我写了一个 EventListener 并调用 postTransactionCommit() 事件。它工作正常，除了我无法在这个级别知道修改了哪个表。我可以知道在这方面哪些表被“初始化”了，但仅此而已。如果我只在事务中执行 SELECT，我不想调用我的存储过程。

所以现在我被困住了......你看到我没有遵循的领导吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:42:43.487

我通过覆盖 Doctrine_Record 中的 save() 方法解决了这个问题，所以连接是在 save() 之后提交的。

# javascript - Android股票浏览器：如何防止双击关闭浏览器

> ID：15278011
> 
> 赞同：0
> 
> 时间：2013-03-07T17:38:51.053
> 
> 标签：javascript, android, css, android-browser

在 HTC Desire Z 和 HTC Wildfire 上，我在股票 android 浏览器中看到问题，双击网页的任何部分都会导致股票浏览器崩溃。

我尝试阻止 JavaScript 运行，但它仍然会发生。

我将手机连接到 Eclipse（我不会深入了解它是如何完成的）并使用 logcat 来查看正在发生的事情，结果就是这个混乱：

```
03-07 11:09:10.650: D/webview(23902): [WebView::UPDATE_SELECTION] ====== start
03-07 11:09:10.880: I/PluginManager(23902): PluginManager add: /system/lib/plugins/com.htc.flashliteplugin
03-07 11:09:10.880: I/PluginManager(23902): PluginManager add: /data/data/com.adobe.flashplayer/lib
03-07 11:09:10.880: I/webview(23902): doDoubleTap: /system/lib/plugins/com.htc.flashliteplugin
03-07 11:09:10.880: I/webview(23902): doDoubleTap: /data/data/com.adobe.flashplayer/lib
03-07 11:09:10.880: E/webview(23902): doDoubleTap hit!
03-07 11:09:10.890: D/skia(23902): [htcFlashPlugin::_pluginGetView] hitNode is NULL
03-07 11:09:10.890: D/skia(23902): [HTCWebCore::nativeSmartTouchUp] ==== [0x0]
03-07 11:09:10.991: I/DEBUG(1238): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
03-07 11:09:10.991: I/DEBUG(1238): Build fingerprint: 'htc_wwe/htc_vision/vision:2.3.3/GRI40/192788.4:user/release-keys'
03-07 11:09:10.991: I/DEBUG(1238): pid: 23902, tid: 23902  >>> com.android.browser <<<
03-07 11:09:10.991: I/DEBUG(1238): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0000003a
03-07 11:09:10.991: I/DEBUG(1238):  r0 00000000  r1 00000000  r2 00000000  r3 7fffffff
03-07 11:09:10.991: I/DEBUG(1238):  r4 be9eccf4  r5 00000000  r6 be9ecd68  r7 0000000c
03-07 11:09:10.991: I/DEBUG(1238):  r8 ffffff24  r9 00000004  10 000000cf  fp 00000028
03-07 11:09:10.991: I/DEBUG(1238):  ip a873f7c0  sp be9ecc80  lr a858611f  pc ab17be1c  cpsr 60000010
03-07 11:09:10.991: I/DEBUG(1238):  d0  434e0000c3858000  d1  4218000043280000
03-07 11:09:10.991: I/DEBUG(1238):  d2  3f8000003f800000  d3  428c0000428c0000
03-07 11:09:10.991: I/DEBUG(1238):  d4  0000000000000000  d5  0000000043700000
03-07 11:09:10.991: I/DEBUG(1238):  d6  3f8000003f800000  d7  4080000043878000
03-07 11:09:10.991: I/DEBUG(1238):  d8  0000000000000000  d9  4362d96d4362d96d
03-07 11:09:10.991: I/DEBUG(1238):  d10 43f1142f405a0a40  d11 0000000043f1142f
03-07 11:09:10.991: I/DEBUG(1238):  d12 0000000000000000  d13 0000000000000000
03-07 11:09:10.991: I/DEBUG(1238):  d14 0000000000000000  d15 0000000000000000
03-07 11:09:10.991: I/DEBUG(1238):  d16 4070b00000000000  d17 4070b00000000000
03-07 11:09:10.991: I/DEBUG(1238):  d18 4065000000000000  d19 0000000000000000
03-07 11:09:10.991: I/DEBUG(1238):  d20 3ff0000000000000  d21 8000000000000000
03-07 11:09:10.991: I/DEBUG(1238):  d22 c065000000000000  d23 0201000001030604
03-07 11:09:10.991: I/DEBUG(1238):  d24 0003000700020006  d25 0003000700020006
03-07 11:09:10.991: I/DEBUG(1238):  d26 00090011001c0014  d27 000c000900050004
03-07 11:09:10.991: I/DEBUG(1238):  d28 002d0036003c0034  d29 3ff0000000000000
03-07 11:09:10.991: I/DEBUG(1238):  d30 0000000000000000  d31 3ff0000000000000
03-07 11:09:10.991: I/DEBUG(1238):  scr 68000012
03-07 11:09:11.061: I/DEBUG(1238):          #00  pc 0007be1c  /system/lib/libskia.so
03-07 11:09:11.061: I/DEBUG(1238):          #01  lr a858611f  /system/lib/libwebcore.so
03-07 11:09:11.061: I/DEBUG(1238): code around pc:
03-07 11:09:11.061: I/DEBUG(1238): ab17bdfc 3c800000 e92d41f0 ed2d8b02 e1a05000 
03-07 11:09:11.061: I/DEBUG(1238): ab17be0c ee082a10 e24dd050 e1a04001 e3a01000 
03-07 11:09:11.061: I/DEBUG(1238): ab17be1c e5d0703a e5906004 ebfff960 e1d533b8 
03-07 11:09:11.061: I/DEBUG(1238): ab17be2c e7e170d7 e3130040 1a000034 eddf8a3b 
03-07 11:09:11.061: I/DEBUG(1238): ab17be3c eeb58a40 eef1fa10 03a01000 1a000028 
03-07 11:09:11.061: I/DEBUG(1238): code around lr:
03-07 11:09:11.061: I/DEBUG(1238): a85860fc b00c6da0 bf00bd10 6e02b510 4300f06f 
03-07 11:09:11.061: I/DEBUG(1238): a858610c 429ab08c d1194604 2200a901 f5e36c40 
03-07 11:09:11.061: I/DEBUG(1238): a858611c ed94ee80 ed9d1a14 ee777a02 6c200a01 
03-07 11:09:11.061: I/DEBUG(1238): a858612c ee10aa0a f7ff1a90 980bff9d ee10f5e3 
03-07 11:09:11.061: I/DEBUG(1238): a858613c 0a10ee00 7ac0eefd 7a18edc4 b00c6e20 
03-07 11:09:11.061: I/DEBUG(1238): stack:
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc40  00010008  
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc44  be9ecc68  
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc48  ab20d9ec  
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc4c  0080a950  
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc50  00889a78  
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc54  ab1bade8  /system/lib/libskia.so
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc58  00000000  
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc5c  ab17140c  /system/lib/libskia.so
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc60  00000124  
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc64  be9ecee8  
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc68  00911698  
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc6c  000126e9  
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc70  000126e9  
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc74  00000000  
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc78  df002777  
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc7c  e3a070ad  
03-07 11:09:11.061: I/DEBUG(1238): #00 be9ecc80  ab17a494  /system/lib/libskia.so
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc84  ab2111b8  
03-07 11:09:11.061: I/DEBUG(1238):     be9ecc88  00000001  
03-07 11:09:11.071: I/DEBUG(1238):     be9ecc8c  00000000  
03-07 11:09:11.071: I/DEBUG(1238):     be9ecc90  00000000  
03-07 11:09:11.071: I/DEBUG(1238):     be9ecc94  ab17885c  /system/lib/libskia.so
03-07 11:09:11.071: I/DEBUG(1238):     be9ecc98  be9ecdc4  
03-07 11:09:11.071: I/DEBUG(1238):     be9ecc9c  00000000  
03-07 11:09:11.071: I/DEBUG(1238):     be9ecca0  be9ecd98  
03-07 11:09:11.071: I/DEBUG(1238):     be9ecca4  ab19a34c  /system/lib/libskia.so
03-07 11:09:11.071: I/DEBUG(1238):     be9ecca8  be9ecdc0  
03-07 11:09:11.071: I/DEBUG(1238):     be9eccac  ab175e44  /system/lib/libskia.so
03-07 11:09:11.071: I/DEBUG(1238):     be9eccb0  be9eccd8  
03-07 11:09:11.071: I/DEBUG(1238):     be9eccb4  be9ecdc0  
03-07 11:09:11.071: I/DEBUG(1238):     be9eccb8  be9ecd98  
03-07 11:09:11.071: I/DEBUG(1238):     be9eccbc  ab17b420  /system/lib/libskia.so
03-07 11:09:11.071: I/DEBUG(1238):     be9eccc0  009391bc  
03-07 11:09:11.071: I/DEBUG(1238):     be9eccc4  be9ecd44  
03-07 11:09:12.132: D/ConnectivityService(1332): getMobileDataEnabled returning false
03-07 11:09:12.402: W/ContentService(1332): binderDied() at ObserverNode name allowed_geolocation_origins
03-07 11:09:12.402: I/ActivityManager(1332): Process com.android.browser (pid 23902) has died.
03-07 11:09:12.402: I/WindowManager(1332): WIN DEATH: Window{409f71a0 com.android.browser/com.android.browser.BrowserActivity paused=false}
03-07 11:09:12.412: D/Zygote(1240): Process 23902 terminated by signal (11)
03-07 11:09:12.412: E/ActivityManager(1332): fail to set top app changed! 
```

这似乎表明它可能是一个 flash 问题（奇怪，因为页面根本不加载 flash）或内置双击事件的错误，或者某些在 android 中不起作用的 CSS 或 HTML 元素股票浏览器。

任何人都知道为什么会发生这种情况或如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:38:51.053

回答我自己的问题以帮助其他人解决同样的问题。

答案很难找到，但很容易纠正。

在我的 CSS 中，我申请了

```
body {
    -webkit-text-stroke: 1px transparent;
} 
```

解决 Google 字体无法正确呈现的问题。可悲的是，这似乎是罪魁祸首，因为删除它可以立即解决问题。

# java - Swing中的按钮单击事件

> ID：15278013
> 
> 赞同：1
> 
> 时间：2013-03-07T17:38:56.757
> 
> 标签：java, swing, chess

我已经使用 ASCII 值创建了棋盘，`JButton`并且对于棋子我使用了 ASCII 值。

我添加`ActionListener`了所有按钮。当我单击源（第一个）按钮`actionPerformed`事件被调用并且我将按钮的值存储在变量中。

但问题是当我单击目标按钮`actionPerformed`事件时，会调用源按钮值并将值替换为源按钮值。

我想要不同变量中的源按钮值和目标按钮值。怎么可能？

```
public void actionPerformed(ActionEvent ae) 
{
    JButton o = (JButton) ae.getSource();
    value = o.getText();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:47:26.767

然后，您需要 2 个变量来存储这两个值，并需要第三个变量来告诉您发生了哪个点击。

```
 if(isSource){
         source = o.getText();
         isSource = false;
     }else{
         destination = o.getText();
         isSource = true;
     } 
```

这样，第一次点击你就知道源的价值，第二次点击你就知道目的地的价值。然后在下一次单击时，它又是一个来源，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T17:49:46.750

您必须以某种方式管理应用程序的状态。在第一次点击时，应用程序的状态是等待移动源的信息。然后它等待移动目的地的信息。

你可以像这样在你的类中创建一个枚举：

```
enum ActionState {
    SOURCE,
    DESTINATION
} 
```

并将动作状态和按钮变量存储为类的成员：

```
ActionState state = SOURCE;

String source;
String destination; 
```

然后 actionPerformed 会是这样的：

```
public void actionPerformed(ActionEvent ae) 
{
    JButton o = (JButton) ae.getSource();
    String value = o.getText();

    if (state == SOURCE){
        source = value;
        state = DESTINATION;
    }
    else if (state == DESTINATION){
        destination = value;
        state = SOURCE;
        // you probably want to call something here to perform the move itself.
    }
} 
```

您可以只使用布尔值来表示您的状态，而不是枚举。但是，如果您将来需要其他状态，使用枚举可以提供更多的可扩展性。

# graph - 在无向图中寻找桥梁？

> ID：15278014
> 
> 赞同：1
> 
> 时间：2013-03-07T17:39:08.740
> 
> 标签：graph, bridge

图中的桥意味着如果我们删除它，图将断开连接！所以我想知道是否有办法在图中找到所有桥梁：这是一个例子：

```
input
    12 15
    1 2
    1 3
    2 4
    2 5
    3 5
    4 6
    6 7
    6 10
    6 11
    7 8
    8 9
    8 10
    9 10
    10 11
    11 12

Output :

    2 4
    4 6
    11 12 
```

请不要给我一个提示的解决方案！谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T05:34:36.000

如果您有图 G 中每个顶点 v 的访问数 vn[v] 和低数 low[v]，那么您可以使用以下条件找到一条边是否是非桥（在展开 dfs 递归调用时）

```
if (low[w] > vn[v]) then (v,w) is a bridge 
```

# python - 如果匹配，python将值添加到新列中的文件

> ID：15278016
> 
> 赞同：0
> 
> 时间：2013-03-07T17:39:19.463
> 
> 标签：python

我知道这应该很简单，但是由于我是 python 新手，所以在向文件添加值和列时遇到了一些问题。我有两个文件，我想找到匹配的行，如果一行匹配我想要一个值为 1 的新列，如果不匹配应该得到 0。这应该写在 file-1 或 outPut 中。我在添加值时遇到问题。

直到现在我的代码：

```
# -*- coding: utf8 -*-

f1 = open('text-1.txt', 'r')
f2 = open('text-2.txt', 'r')

fileOne= f1.readlines()
fileTwo = f2.readlines()

outPut = open('output.txt', 'w')

for x,y in zip(fileOne,fileTwo):
    if x==y:
        outPut.write("\t".join(x) + 1)

    else:
        outPut.write("\t".join(x) + 0)

f1.close()
f2.close()
outPut.close 
```

有什么建议或有更简单的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:16:47.723

正如您现在所拥有的，您的代码会产生错误：`TypeError: cannot concatenate 'str' and 'int' objects`. 执行此操作时会发生此错误`"\t".join(x) + 1`，因为 的结果`join`是一个字符串，并且`1`是一个整数。您应该将数字括在引号中：`outPut.write("\t".join(x) + "1")`

现在你的代码运行了。使用这些文件作为输入：

text-1.txt

```
foo
bar
baz 
```

text-2.txt

```
qux
bar
qux 
```

输出是：

```
f   o   o   
0b  a   r   
1b  a   z0 
```

这可能不是您想要的。我猜你想要每行最初出现的样子，然后是一个制表符，然后是一个 1 或 0。如果这是你想要的，那就`outPut.write("\t".join(x) + "1")`不是这样做的方法。`"\t".join(x)`在原始文本的每个字符之间插入一个制表符。如果你想要未修改的文本加上一个制表符加上一个数字，那么就做`outPut.write(x + "\t1")`.

现在的输出是：

```
foo
    0bar
    1baz    0 
```

这更接近 - 每个字符之间不再有一个制表符，但数字出现在错误的行上。这是因为`x`是原始行的内容，*包括*结尾的换行符。如果您希望数字出现在换行符之前，那么您必须去掉换行符，并在末尾添加一个新行：`outPut.write(x.rstrip() + "\t1\n")`

```
f1 = open('text-1.txt', 'r')
f2 = open('text-2.txt', 'r')

fileOne= f1.readlines()
fileTwo = f2.readlines()

outPut = open('output.txt', 'w')

for x,y in zip(fileOne,fileTwo):
    if x==y:
        outPut.write(x.rstrip() + "\t1\n")

    else:
        outPut.write(x.rstrip() + "\t0\n")

f1.close()
f2.close()
outPut.close() 
```

现在的输出是：

```
foo 0
bar 1
baz 0 
```

符合您规定的要求：text-1 的原始内容，加上一个新列，如果匹配，则值为 1，如果不匹配，则为 0。

# python - 在数组中分组重复？

> ID：15278017
> 
> 赞同：2
> 
> 时间：2013-03-07T17:39:21.627
> 
> 标签：python, numpy, scipy, repeat

我正在寻找一个函数，它获取一维排序数组并返回一个包含两列的二维数组，第一列包含非重复项，第二列包含该项目的重复次数。现在我的代码如下：

```
def priorsGrouper(priors):
    if priors.size==0:
        ret=priors;
    elif priors.size==1:
        ret=priors[0],1;
    else:
        ret=numpy.zeros((1,2));
        pointer1,pointer2=0,0;
        while(pointer1<priors.size):
            counter=0;
            while(pointer2<priors.size and priors[pointer2]==priors[pointer1]):
                counter+=1;
                pointer2+=1;
            ret=numpy.row_stack((ret,[priors[pointer1],pointer2-pointer1]))
            pointer1=pointer2;
    return ret;
print priorsGrouper(numpy.array([1,2,2,3])) 
```

我的输出如下：

```
[[ 0\.  0.]
 [ 1\.  1.]
 [ 2\.  2.]
 [ 3\.  1.]] 
```

首先，我无法摆脱我的 [0,0]。其次，我想知道这是否有 numpy 或 scipy 函数，或者我的可以吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T17:50:17.853

You could use [np.unique](http://docs.scipy.org/doc/numpy/reference/generated/numpy.unique.html) to get the unique values in `x`, as well as an array of indices (called `inverse`). The `inverse` can be thought of as "labels" for the elements in `x`. Unlike `x` itself, the labels are always integers, starting at 0\.

Then you can take a [bincount](http://docs.scipy.org/doc/numpy/reference/generated/numpy.bincount.html) of the labels. Since the labels start at 0, the bincount won't be filled with a lot of zeros that you don't care about.

Finally, [column_stack](http://docs.scipy.org/doc/numpy/reference/generated/numpy.column_stack.html) will join `y` and the bincount into a 2D array:

```
In [84]: x = np.array([1,2,2,3])

In [85]: y, inverse = np.unique(x, return_inverse=True)

In [86]: y
Out[86]: array([1, 2, 3])

In [87]: inverse
Out[87]: array([0, 1, 1, 2])

In [88]: np.bincount(inverse)
Out[88]: array([1, 2, 1])

In [89]: np.column_stack((y,np.bincount(inverse)))
Out[89]: 
array([[1, 1],
       [2, 2],
       [3, 1]]) 
```

* * *

Sometimes when an array is small, it turns out that using plain Python methods are faster than NumPy functions. I wanted to check if that was the case here, and, if so, how large `x` would have to be before NumPy methods are faster.

Here is a graph of the performance of various methods as a function of the size of `x`: ![enter image description here](../Images/606a0c23eb13e322ab9aa1a76492550c.png)

```
In [173]: x = np.random.random(1000)

In [174]: x.sort()

In [156]: %timeit using_unique(x)
10000 loops, best of 3: 99.7 us per loop

In [180]: %timeit using_groupby(x)
100 loops, best of 3: 3.64 ms per loop

In [157]: %timeit using_counter(x)
100 loops, best of 3: 4.31 ms per loop

In [158]: %timeit using_ordered_dict(x)
100 loops, best of 3: 4.7 ms per loop 
```

For `len(x)` of 1000, `using_unique` is over 35x faster than any of the plain Python methods tested.

So it looks like `using_unique` is fastest, even for very small `len(x)`.

* * *

Here is the program used to generate the graph:

```
import numpy as np
import collections
import itertools as IT
import matplotlib.pyplot as plt
import timeit

def using_unique(x):
    y, inverse = np.unique(x, return_inverse=True)
    return np.column_stack((y, np.bincount(inverse)))

def using_counter(x):
    result = collections.Counter(x)
    return np.array(sorted(result.items()))

def using_ordered_dict(x):
    result = collections.OrderedDict()
    for item in x:
        result[item] = result.get(item,0)+1
    return np.array(result.items())

def using_groupby(x):
    return np.array([(k, sum(1 for i in g)) for k, g in IT.groupby(x)])

fig, ax = plt.subplots()
timing = collections.defaultdict(list)
Ns = [int(round(n)) for n in np.logspace(0, 3, 10)]
for n in Ns:
    x = np.random.random(n)
    x.sort()
    timing['unique'].append(
        timeit.timeit('m.using_unique(m.x)', 'import __main__ as m', number=1000))
    timing['counter'].append(
        timeit.timeit('m.using_counter(m.x)', 'import __main__ as m', number=1000))
    timing['ordered_dict'].append(
        timeit.timeit('m.using_ordered_dict(m.x)', 'import __main__ as m', number=1000))
    timing['groupby'].append(
        timeit.timeit('m.using_groupby(m.x)', 'import __main__ as m', number=1000))

ax.plot(Ns, timing['unique'], label='using_unique')
ax.plot(Ns, timing['counter'], label='using_counter')
ax.plot(Ns, timing['ordered_dict'], label='using_ordered_dict')
ax.plot(Ns, timing['groupby'], label='using_groupby')
plt.legend(loc='best')
plt.ylabel('milliseconds')
plt.xlabel('size of x')
plt.show() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T17:47:50.073

如果顺序不重要，请使用计数器。

```
from collections import Counter
% Counter([1,2,2,3])
= Counter({2: 2, 1: 1, 3: 1})
% Counter([1,2,2,3]).items()
[(1, 1), (2, 2), (3, 1)] 
```

为了保持顺序（第一次出现），您可以实现自己的 Counter 版本：

```
from collections import OrderedDict
def OrderedCounter(seq):
     res = OrderedDict()
     for x in seq:
        res.setdefault(x, 0) 
        res[x] += 1
     return res
% OrderedCounter([1,2,2,3])
= OrderedDict([(1, 1), (2, 2), (3, 1)])
% OrderedCounter([1,2,2,3]).items()
= [(1, 1), (2, 2), (3, 1)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T17:49:35.140

If you want to count repetitions of an item you can use a dictionary:

```
l = [1, 2, 2, 3]
d = {}
for i in l:
    if i not in d:
        d[i] = 1
    else:
        d[i] += 1
result = [[k, v] for k, v in d.items()] 
```

For your example returns:

```
[[1, 1],
 [2, 2], 
 [3, 1]] 
```

Good luck.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T18:20:50.063

首先，你不需要用分号 ( `;`) 结束你的语句，这不是 C. :-)

其次，第 5 行（和其他）设置`ret`为，`value,value`但这不是一个列表：

```
>type foo.py
def foo():
        return [1],2
a,b = foo()
print "a = {0}".format(a)
print "b = {0}".format(b) 
```

给出：

```
>python foo.py
a = [1]
b = 2 
```

第三：有更简单的方法可以做到这一点，这就是我想到的：

*   使用 Set 构造函数创建唯一的项目列表
*   创建 Set 中每个条目在输入字符串中出现的次数的列表
*   使用 zip() 将两个列表组合并返回为一组元组（尽管这不是您所要求的）

这是一种方法：

```
def priorsGrouper(priors):
    """Find out how many times each element occurs in a list.

    @param[in] priors List of elements
    @return Two-dimensional list: first row is the unique elements,
                second row is the number of occurrences of each element.
    """

    # Generate a `list' containing only unique elements from the input
    mySet = set(priors)

    # Create the list that will store the number of occurrences
    occurrenceCounts = []

    # Count how many times each element occurs on the input:
    for element in mySet:
        occurrenceCounts.append(priors.count(element))

    # Combine the two:
    combinedArray = zip(mySet, occurrenceCounts)
# End of priorsGrouper() ----------------------------------------------

# Check zero-element case
print priorsGrouper([])

# Check multi-element case
sampleInput = ['a','a', 'b', 'c', 'c', 'c']
print priorsGrouper(sampleInput) 
```

# mysql - 在 MySQL 中向新用户授予权限

> ID：15278018
> 
> 赞同：2
> 
> 时间：2013-03-07T17:39:22.797
> 
> 标签：mysql

我已将所有权限授予新用户使用以下查询访问 MySQL 数据库

```
 grant all privileges on database.* to root@example.com identified by 'password'; 
```

其次是

```
 flush privileges; 
```

在此之后，我看到一个新行被添加到 mysql.user 但在所有列中都有“N”（如 Select_priv = N、Insert_priv = N 等）。

N 是否意味着用户没有被授予所有权限？这是为用户授予权限的方式吗？这是我第一次这样做。需要一些帮助

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T17:56:24.363

您正在查看错误的表，`mysql.user`定义了全局权限，所以如果您执行以下操作：

```
grant all privileges on *.* to root@example.com identified by 'password'; 
```

然后用户会出现在那里。

您要查看的表`mysql.db`定义了特定于数据库的权限。

# jquery - jQuery Cycle2 幻灯片缩略图创建

> ID：15278019
> 
> 赞同：3
> 
> 时间：2013-03-07T17:39:23.623
> 
> 标签：jquery, mustache, jquery-cycle

我正在使用出色的[Cycle2](http://www.malsup.com/jquery/cycle2/)插件，并且我想按照[这个示例](http://www.malsup.com/jquery/cycle2/demo/pager.php#adv-custom)在我的幻灯片中自动创建图像的缩略图。

但是，该示例`img`每次都将其本身作为幻灯片。由于我的布局，我每次都需要`img`在一个容器内。`figure`见下文或[这个小提琴](http://jsfiddle.net/cherryflavourpez/kEKtt/)：

```
<div class="slideshow-listing cycle-slideshow"
     data-cycle-slides="figure"
     data-cycle-auto-height="4:3"
     data-cycle-pager-template="<span><img src='{{src}}' /></span>"
     data-pause-on-hover="true">

    <figure><img src="http://placehold.it/250x570"></figure>
    <figure><img src="http://placehold.it/250x570"></figure>
    <figure><img src="http://placehold.it/450x370"></figure>
    <figure><img src="http://placehold.it/250x570"></figure>
    <figure><img src="http://placehold.it/250x570"></figure>

    <div class="cycle-pager"></div>
</div><!-- /slideshow-listing --> 
```

这意味着我的寻呼机模板无法访问图像源。文档说：

> Cycle2 默认使用简单的 Mustache 样式模板。

所以我猜有一种相当简单的方法可以修改我的模板以`img` `src`在`figure`每次访问...我只是不确定那是什么。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-09T14:29:29.593

有一种更简单的方法可以在不使用 jQuery 脚本的情况下获取 img 的 src。

根据有关高级模板的 cycle2 文档（[http://jquery.malsup.com/cycle2/demo/tmpl2.php](http://jquery.malsup.com/cycle2/demo/tmpl2.php)）

您可以使用 firstChild.src 访问 img 元素的 src 属性。

这是您回答的另一种解决方案（我保留了 cycle-slideshow 类以供 cycle2 的自动选择器工作）

```
<div class="slideshow-listing cycle-slideshow"
 data-cycle-slides="figure"
 data-cycle-auto-height="4:3"
 data-cycle-pager-template="<span><img src='{{firstChild.src}}' /></span>"
 data-pause-on-hover="true">

<figure><img src="http://placehold.it/250x570"></figure>
<figure><img src="http://placehold.it/250x570"></figure>
<figure><img src="http://placehold.it/450x370"></figure>
<figure><img src="http://placehold.it/250x570"></figure>
<figure><img src="http://placehold.it/250x570"></figure>
<div class="cycle-pager"></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T01:36:29.357

更新：我想出了如何在 jsFiddle 中做到这一点。自从我最初发布以来，这些示例已经发生了一些变化。

问题是传递给模板的对象是`figure`HTML 元素。Cycle2 中的模板引擎只能访问图形元素本身的属性。它不知道如何查看innerHTML 属性以访问`img`标签，使其`src`属性可以访问。

如果您坚持拥有 HTML 结构（`figure`包含`img`），那么我建议将`img`src 属性动态复制到`figure`标签上。为了方便，您可以保留 HTML 并使用一些 jQuery 动态执行此操作。您还需要延迟运行 Cycle2 插件，直到我们完成此操作。这是一个应该可以解决问题的示例。

HTML（这是相同的，只是从 中删除了 cycle-slideshow 类`div`）：

```
<div class="slideshow-listing"
     data-cycle-slides="figure"
     data-cycle-auto-height="4:3"
     data-cycle-pager-template="<span><img src='{{src}}' /></span>"
     data-pause-on-hover="true">

    <figure><img src="http://placehold.it/250x570"></figure>
    <figure><img src="http://placehold.it/250x570"></figure>
    <figure><img src="http://placehold.it/450x370"></figure>
    <figure><img src="http://placehold.it/250x570"></figure>
    <figure><img src="http://placehold.it/250x570"></figure>
    <div class="cycle-pager"></div>
</div><!-- /slideshow-listing --> 
```

JavaScript：

```
$(function() {
    var $slideshow = $(".slideshow-listing");
    var $figures = $slideshow.find("figure");
    var length = $figures.length;

    $figures.each(function() {
        var $this = $(this);
        var src = $this.find("img").attr("src");
        $this.prop("src", src);
        length--;

        if (!length) {
            $slideshow.cycle();
        }
    });
}); 
```

您还需要添加一些 CSS 来限制缩略图的高度/宽度。我在我的 jsFiddle 中放了一个简单的例子，它们不会按比例缩放，但你明白了。我会让你处理风格问题。

链接：[jsFiddle演示img src复制到图](http://jsfiddle.net/willslab/vXcmU/4/)

在您自己的脚本中尝试一下，如果它有效，请告诉我！

# c++ - 为什么我的变量没有初始化？

> ID：15278021
> 
> 赞同：-2
> 
> 时间：2013-03-07T17:39:27.090
> 
> 标签：c++, initialization

我只是从 c 迁移到 C++，并且正在尝试构建一个计算器。Int 'result' 不会被数学运算初始化。逻辑是根据操作's'将分配给'result'不同的值。这似乎不起作用。

```
#include<iostream>
#include<cstring>
#include<cmath>
using namespace std;

int main ()
{
    int n1, n2;
    char s,r;
    int result = 0;
    cout<< "Enter a calculation? (y/n)"<<endl;
    cin>>r;
    while(r=='y')
    {
        cout <<"Enter the first number"<<endl;
        cin>>n1;
        cout<<"Enter the operator"<<endl;
        cin>>s;
        cout<<"Enter the second number"<<endl;
        cin>>n2;

        if ('s' == '*')
        {
            result = n1*n2;
        }
        if ('s' =='+')
        {
            result = n1+n2;
        }

        if ('s' =='-')
        {
            result = n1-n2;
        }

        if ('s' =='/')
        {
            result = n1/n2;
        }
        cout << result<<endl;
        cout<< "Enter a calculation? (y/n)"<<endl;
        cin>>r;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T17:40:33.077

`s`是一个[变量名](https://en.cppreference.com/book/intro/variables)，并且`'s'`（用单引号括起来）是一个[字符文字](https://en.cppreference.com/w/cpp/language/character_literal)。

这意味着，您必须与变量`s`not with进行比较`'s'`。所以你的代码应该看起来像

```
if (s == '*')
{
    result = n1*n2;
} 
```

编码

```
 if ('s' == '*') 
```

将字符文字`s`与字符文字进行比较`*`，后者始终为假。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T17:47:42.507

@OlafDietsche 说得对。

我还建议切换到一个`switch-case`语句：

```
switch(s)
{
    case '*': result = n1*n2;  break;
    case '+': result = n1+n2;  break;
    case '-': result = n1-n2;  break;
    case '/': result = n1/n2;  break;
} 
```

# java - 如何为自定义处理器配置“初始化”方法

> ID：15278022
> 
> 赞同：0
> 
> 时间：2013-03-07T17:39:27.073
> 
> 标签：java, customization, mule, mule-studio

我一直在使用 Mule DevKit 创建自定义消息处理器。

我用“mule-devkit-archetype-generic”原型创建了项目。

它给了我带有注释“@Module”和“@Processor”的类

创建此自定义组件的对象时，我需要初始化一些变量。这些数据将在我的处理器方法中使用。

但是对于如何为这些自定义处理器创建或注释 Initialize 方法，我找不到任何帮助。

我已经尝试实现“Initialisable”并实现初始化方法。但这在编译说明时给出了错误

```
The method name 'initialise' is not valid for a no-arg non-private method 
```

请建议我可以通过哪种方式完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:41:21.717

无需实现接口：`@PostConstruct`在初始化方法上使用注释应该可以解决问题。

# iis-7 - 无法在 Windows 8 上的 IIS 中注册 .net 4.0

> ID：15278027
> 
> 赞同：1
> 
> 时间：2013-03-07T17:39:51.130
> 
> 标签：iis-7, .net-4.0, windows-8, cmd

我尝试在管理员 cmd 中运行 aspnet_regiis.exe -ir 但没有运气。

有任何想法吗？

> C:\Windows\Microsoft.NET\Framework64\v4.0.30319>aspnet_regiis.exe -ir
> 
> Microsoft (R) ASP.NET RegIIS 4.0.30319.17929 管理实用程序，用于在本地计算机上安装和卸载 ASP.NET。版权所有 (C) 微软公司。版权所有。在不更改现有 Web 应用程序的情况下开始安装 ASP.NET (4.0.30319.17929) 以使用此版本的 ASP.Net。此版本的操作系统不支持此选项。管理员应该使用“打开/关闭 Windows 功能”对话框、服务器管理器管理工具或 dism.exe 命令行工具来安装/卸载带有 IIS8 的 ASP.NET 4.5。有关详细信息，请参阅 [http://go.microsoft.com/fwlink/?LinkID=216771](http://go.microsoft.com/fwlin)。已完成安装 ASP.NET (4.0.30319.17929) 而不更改现有 Web 应用程序以使用此版本的 ASP.Net。

关于安装/卸载 ASP.NET 4.5 的所有这些可怕的讨论是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-03T18:20:10.767

我在 Windows Server 2012 上的解决方案是：

1.  在 IIS 中，打开模块，删除 ServiceModel 模块。
2.  在 IIS 中，打开处理程序，删除 svc-Integrated 处理程序。
3.  重新启动 IIS

更多信息：http: [//www.codeproject.com/Articles/613812/Solve-IIS-8-Error-Could-not-load-type-System-Servi](http://www.codeproject.com/Articles/613812/Solve-IIS-8-Error-Could-not-load-type-System-Servi)

造成这种情况的原因是我在设置 IIS 和 .NET 4.5 之后启用了 WCF 服务。这导致我在服务器上的所有应用程序都失败了。

在完成上述步骤以使除 WCF 之外的所有内容都恢复并运行之后，我仍然需要 WCF 才能工作。为此，我进入“打开和关闭 Windows 功能”并启用 .NET Framework 4.5 功能 -> WCF 服务 -> HTTP 激活

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T21:28:27.730

aspnet_regiis 在 IIS8 中已弃用。当我们安装 IIS（ASP .NET 4.5 和其他组件）时，asp .net 会自动注册。我们不需要手动注册它。

您能简要说明您面临的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T19:10:29.947

从管理命令提示符运行以下命令：**dism /online /enable-feature /featurename:IIS-ASPNET45**

对于 Windows 8 客户端计算机，在“Internet 信息服务 -> 万维网服务 -> 应用程序开发功能 -> ASP.NET 4.5”下的“打开/关闭 Windows 功能”中打开“IIS-ASPNET45”。

参考： http: [//support.microsoft.com/kb/2736284](http://support.microsoft.com/kb/2736284)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-21T04:56:18.597

I was facing the same issue as described above. It didn't work even after running following command
**dism /online /enable-feature /featurename:IIS-ASPNET45**
The solution for me was to install patch to VS 2010 SP1.
Just to give the background I have Windows 10 and VS 2010 SP1 and was facing issue when running a ASP.Net 4.6 site.
Following are links for Visual Studio versions:-
VS 2010 SP1 => [https://support.microsoft.com/en-us/help/3002340/unexpected-dialog-box-appears-when-you-open-projects-in-visual-studio](https://support.microsoft.com/en-us/help/3002340/unexpected-dialog-box-appears-when-you-open-projects-in-visual-studio)
VS 2012 => [https://support.microsoft.com/en-us/help/3002339/unexpected-dialog-box-appears-when-you-open-projects-in-visual-studio](https://support.microsoft.com/en-us/help/3002339/unexpected-dialog-box-appears-when-you-open-projects-in-visual-studio) VS

# javascript - html 网页上的虚拟操纵杆

> ID：15278029
> 
> 赞同：-1
> 
> 时间：2013-03-07T17:40:12.393
> 
> 标签：javascript, python, html

1）我需要制作一个网页（html+javascript），其中包含这个视频中的操纵杆：[http ://www.youtube.com/watch?v=-8_8CEKlsYo](http://www.youtube.com/watch?v=-8_8CEKlsYo)

2）当你移动摇杆时，python（或其他编程语言）需要根据摇杆的位置通过I²C发送数据（我知道python代码）

3）有没有人可以使用某种示例，主要需要操纵杆以及如果操纵杆移动如何发送数据？

我的网页和 python 脚本将在树莓派上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:52:32.463

对操纵杆进行编码的一种潜在解决方案：Pygame 非常适合绘制图像、获取鼠标输入以及移动操纵杆“头部”以跟随鼠标。祝你好运！

# jquery - jQuery 座位图

> ID：15278034
> 
> 赞同：0
> 
> 时间：2013-03-07T17:40:55.200
> 
> 标签：jquery, json

我正在尝试遍历这个 JSON 来创建一个表。JSON 中有 3 个元素，即席位、行数和席位价格。每个 td 需要有一个基于行的 id 以及沿行的距离（即，每个数字 1 是一个座位，因此需要将计数添加到它们）。它还必须将 pricelookup 数据添加为一个类，以便单击的座位可以有不同的价格。

```
var data =     {
    "who": "RSNO",
    "what": "An American Festival",
    "when": "2013-02-08 19:30",
    "where": "User Hall - Main Auditorium",
    "seats": [
        "00000000000000000011111111111111000000000000000000",
        "0000000000000001111111111111111aaa0000000000000000",
        "00000000000000aa111111111111111aaaaa00000000000000",
        "00000000000001111111111111111111111111000000000000",
        "000000000aa00aaaaaaaaaaaaaaaaaaaaaa1100aa000000000",
        "00000001111001111111111111111111111100111100000000",
        "00000aaaaaa0011aaaaaaaaa11111111aaa1100aaaaaa00000",
        "00001111111001111111111111111111111100111111100000",
        "000aaaaaaa110011111111111111111111110011aaaaaaa000",
        "00111111111100111111111111111111111001111111111000",
        "00aaaaa1111110011111111111111111111001111aaaaaaa00",
        "11111111111100111111111111111111111001111111111110",
        "0aaaaaaaaaaaa001111111111111111111100aaaaaaaaaaaa0",
        "01111111111110011111111111111111110011111111111100",
        "00000000000000001111111111111111110000000000000000",
        "01111111111111001111111111111111100111111111111100",
        "01111111111111001111111111111111110011111111111110",
        "01111111111111001111111111111111100111111111111100",
        "00a11111111111100111111111111111100111111111111a00",
        "00111111111111100111111111111111001111111111111000",
        "00011111111111110011111111111111001111111111111000",
        "00111111111111100111111111111111001111111111111000",
        "00011111111111110011111111111111001111111111111000",
        "00011111111111110011111111111110011111111111110000",
        "0000000111a111111001111a1111a110011111111110000000",
        "00000000111111110011111111111110011111111000000000",
        "00000000001111111001111111111110011111110000000000",
        "00000000000000111001111111111100111000000000000000"
    ],
    "rows": [
        "DD",
        "CC",
        "BB",
        "AA",
        "Z",
        "Y",
        "X",
        "W",
        "V",
        "U",
        "T",
        "S",
        "R",
        "Q",
        "P",
        "N",
        "M",
        "L",
        "K",
        "J",
        "H",
        "G",
        "F",
        "E",
        "D",
        "C",
        "B",
        "A"
    ],
    "seatPrice": [
        "                  00000000000000                  ",
        "               0000000000000000000                ",
        "              0000000000000000000000              ",
        "             0000000000000000000000000            ",
        "         00  000000000000000000000000  00         ",
        "       0000  00000000000000000000000  0000        ",
        "     000000  000000000000000000000000  000000     ",
        "    0000000  00000000000000000000000  0000000     ",
        "   000000000  0000000000000000000000  000000000   ",
        "  0000000000  000000000000000000000  0000000000   ",
        "  00000000000  00000000000000000000  00000000000  ",
        "000000000000  000000000000000000000  000000000000 ",
        " 000000000000  00000000000000000000  000000000000 ",
        " 000000000000  0000000000000000000  000000000000  ",
        "                000000000000000000                ",
        " 0000000000000  00000000000000000  0000000000000  ",
        " 0000000000000  000000000000000000  0000000000000 ",
        " 0000000000000  00000000000000000  0000000000000  ",
        "  0000000000000  0000000000000000  0000000000000  ",
        "  0000000000000  000000000000000  0000000000000   ",
        "   0000000000000  00000000000000  0000000000000   ",
        "  0000000000000  000000000000000  0000000000000   ",
        "   0000000000000  00000000000000  0000000000000   ",
        "   0000000000000  0011111111100  0000000000000    ",
        "       0000000000  111111111111  0000000000       ",
        "        00000000  1111111111111  00000000         ",
        "          0000000  111111111111  0000000          ",
        "              000  00000000000  000               "
    ],
    "priceLookup": [
        10,
        20
    ]
}

$(data.seats).each(function (index, element) {
$('#plan').append('<tr><td> ' + element[0] + ' </td></tr>');
}) 
```

到目前为止，它只创建了第一列，只创建了座位布局，而不是其他数据。任何帮助，将不胜感激。我的主要问题是试图让它同时适用于行和列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:05:39.500

我将如何解决这个问题：

1.  将所有数据解析成自己的数据结构
2.  使用自己的数据结构生成视图

有几种方法可以做到 #1，但一种快速而肮脏的处理方法是让一个对象保存一个 Row，该对象将保存一堆 Seat 对象，并且您的 Rows 存在于“座位表”中的事件结构中财产。为了得到幻想，你可以进一步抽象出来，有一个有座位和行的场地，然后活动有定价等等，但我们会很简单！

对于#2，你可以用一百万种方法来做这件事，但是通过保持解析模型和绘图分开，你可以很容易地改变它的显示方式。

所以给定上面的 JSON，我们可以很容易地创建我们的事件和绘图代码：

```
// function that retuns an "event" object with a seating model
var event = function (data) {
    // so we can get price information...
    var priceLookup = data.priceLookup;
    // helper function to create an empty, named row
    var createRow = function (rowName) {
        return {
            name: rowName,
                seats: []
        };
    };
    // helper function to make a seat object
    var createSeat = function(seatNumber, index, priceCode, booked) {
        return {
            price: priceLookup[priceCode],
                seatNumber: seatNumber, // the nth seat in the row
                index: index, // we might have empty spaces before us...
                reserved: booked
        };
    };

    // function that combines all our data into one structure
    var createSeating = function(data) {
        var rows = [], i;
        // for every row in our data set...
        for (i = 0; i < data.seats.length; i++) {
            console.log("Creating row number %d, which is row %s", i, data.rows[i]);
            var row = createRow(data.rows[i]); // make a row with the right name
            // now iterate over every position in the 'seats' string and make seats 
            // and create a counter for what the number of the actual seat is...
            var seatCount = 0;
            for (var s = 0; s < data.seats[i].length; s++) {
                console.log("Looking for a seat at index %d", s);
               var seatStr = data.seats[i].charAt(s); 
               if (seatStr === "1" || seatStr === "a") { // we are a seat!
                   console.log("... and we found one!");
                   seatCount += 1;
                   var booked = seatStr === "a";
                   // create a Seat and add it to our row
                   row.seats.push(createSeat(seatCount, s, data.seatPrice[i].charAt(s), booked));
               }

            }
            // add our row to the rows array
            rows.push(row);
        }
        return rows;

    };
    // create and return an object that describes our event
    return {
        venue: data.where,
        eventTime: data.when,
        performer: data.who,
        name: data.what,
        seating: createSeating(data)
    }
}

// this function takes the "seating" of an Event and can draw it
var drawSeating = function(seating) {
    // an array of ROW objects
    for (var i = 0; i < seating.length; i++) {
        row = seating[i];
        console.log("Drawing row %s", row.name);
        // now iterate over our seats...
        for (var s = 0; s < row.seats.length; s++) {
            var seat = row.seats[s];
            console.log("Drawing seat number %d which is at index %d and costs %s", seat.seatNumber, seat.index, seat.price);
            // you could output a view with all the relevant information in DATA attributes
            // like: <div class="seat" data-row="row.name" data-seatnum="seat.seatNumber" data-price="seat.price"  data-reserved="seat.reserved">
            // and use the index of the current seat and the index of the previously draw
            // seat to add spacing as needed.
        }
    }
};

// get an event model given our data
var myEvent = event(data);

// now we can draw it's seating chart!
drawSeating(myEvent.seating);

// add other methods to draw ui like
// drawPageheader(myEvent)
// or what have you. 
```

我实际上并没有在那里为您完整地绘制视图，但是您可以在评论中看到如何将 HTML`data`属性添加到您最终用来绘制实际座位以包含所有相关数据的任何元素。您还可以根据行和座位索引生成 ID。

编辑：您评论了图表中“a”的含义，因此我进行了修改以包括

# c++ - C/C++ 指向二维数组的指针数组

> ID：15278036
> 
> 赞同：1
> 
> 时间：2013-03-07T17:41:01.603
> 
> 标签：c++, c, arrays, pointers, multidimensional-array

我正在尝试获取指向二维布尔数组的指针数组。如何做到这一点？这是针对 Arduino 的（认为它们是 C 和 C++ 的混合体？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T17:48:24.947

根据您的描述，我认为您正在寻找类似的东西：

```
bool (*arr[K])[M][N]; 
```

它分解为

```
 arr                -- arr
       arr[K]             -- is a K-element array
      *arr[K]             -- of pointers
     (*arr[K])[M]         -- to M-element arrays
     (*arr[K])[M][N]      -- of N-element arrays
bool (*arr[K])[M][N]      -- of bool 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T18:16:41.590

如果您使用的是 C++，并且不想从声明中输入大小，则可以通过动态分配来实现。

```
int first_dim, second_dim;
// determine dimensions somewhere inside code

// create array of pointers to booleans
bool** arr[10];
for(i = 0; i < 10; i++){
    arr[i] = new bool*[first_dim];
    for(j = 0; j < first_dim; j++){
        arr[i][j] = new bool[second_dim];
    }
} 
```

确保您`delete`使用完所有阵列。

**笔记**

当您尝试分配二维数组时，不要将它们视为矩阵或表，每个都存储一个布尔值。例如，以`int`s 组成的数组，声明为 的数组`int arr[i][j]`，第一个“维度”中的`int*`每个元素都是类型，第二个“维度”中的每个元素都是类型`int`。所以它实际上是一个“数组数组”，如果你愿意的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T17:46:48.920

指向二维布尔数组的指针数组看起来像这样（在 C 和 C++ 中 - 选择一个，它们不是同一种语言，也不是混合语言）：

```
 typedef bool TwoDBoolArr[10][10];
 typedef TwoDBoolArr *TwoDBoolArrPtr;
 typedef TwoDBoolArrPtr TwoDBoolArrPtrArray[10]; 
```

当然，你需要最后一个`typedef`。

如果您想要更少的 typedef 并降低可读性：

```
typedef bool (*TwoDBoolArrPtrArray[10])[10][10]; 
```

# python - 将字符串列表中的每个元素与另一个字符串组合

> ID：15278044
> 
> 赞同：0
> 
> 时间：2013-03-07T17:34:00.337
> 
> 标签：python

我的输入是：

```
list1=['car','bike','mango'] 
```

我想将“JNU”附加到每个项目。期望的输出：

```
list1=[('car', 'JNU'), ('bike', 'JNU'), ('mango', 'JNU')] 
```

我无法得到那个结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T17:43:14.887

```
In [13]: list1 = ['car', 'bike', 'mango'] 

In [14]: list1 = [(el, 'JNU') for el in list1]

In [15]: list1
Out[15]: [('car', 'JNU'), ('bike', 'JNU'), ('mango', 'JNU')] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T17:38:10.867

你可以使用`zip()`and `itertools.repeat()`：

```
import itertools

list1 = zip(list1, itertools.repeat('JNU')) 
```

演示：

```
>>> import itertools
>>> list1 = ['car','bike','mango'] 
>>> zip(list1, itertools.repeat('JNU'))
[('car', 'JNU'), ('bike', 'JNU'), ('mango', 'JNU')] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T17:46:32.057

另一种变化...

```
list1 = ['car', 'bike', 'mango'] 
from itertools import product

list2 = list(product(list1, ['JNU'])) 
```

# ios - UIActionSheet showInView 方法如何插入它的视图？

> ID：15278047
> 
> 赞同：0
> 
> 时间：2013-03-07T17:41:36.103
> 
> 标签：ios, cocoa-touch, uiview, customization, uiactionsheet

我试图实现我自己的 CustomUIActionSheet。

我几乎可以正常工作，但我不知道 showInView 方法是如何工作的。

*   (void)showInView:(UIView *)view

给出一个视图，这个方法能够将它的视图放在每个视图的前面（也许将它添加到窗口中？）但它也能够根据正在添加的视图设置旋转。

我尝试将它添加到我作为参数接收的视图的窗口中。

```
CGFloat startPosition = view.window.bounds.origin.y + view.window.bounds.size.height;

self.frame = CGRectMake(0, startPosition, view.window.bounds.size.width, [self calculateSheetHeight]);

[view.window addSubview:self];

self.blackOutView = [self buildBlackOutViewWithFrame:view.window.bounds];
[view.window insertSubview:self.blackOutView belowSubview:self]; 
```

通过这样做，所有工作，除了当我在横向呈现操作表时，操作表从右侧出现（因为 Windows 系统引用它总是相同的）

我还尝试将它添加到视图窗口的 rootViewController 中，如下所示：

```
UIView * view = view.window.rootViewController.view;

 CGFloat startPosition = view.bounds.origin.y + view.bounds.size.height;

 self.frame = CGRectMake(0, startPosition, view.bounds.size.width, [self calculateSheetHeight]);

 [view addSubview:self];

 self.blackOutView = [self buildBlackOutViewWithFrame:view.bounds];
 [view insertSubview:self.blackOutView belowSubview:self]; 
```

但同样，它在风景中失败了，它没有添加任何东西，或者至少，我看不到它

所以，我的问题是，关于如何在两个方向上将视图添加到层​​次结构顶部的任何线索？

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:29:07.460

在阅读了一些自定义警报视图的源代码和在层次结构顶部绘制的其他 ui 组件后，我找到了一个可行的解决方案。

在窗口的第一个子视图中添加视图：

```
UIView * topView = [[view.window subviews] objectAtIndex:0]; 
```

所以最终的代码是

```
UIView * topView = [[view.window subviews] objectAtIndex:0];

CGFloat startPosition = topView.bounds.origin.y + topView.bounds.size.height;

self.frame = CGRectMake(0, startPosition, topView.bounds.size.width, [self calculateSheetHeight]);

[topView addSubview:self];

self.blackOutView = [self buildBlackOutViewWithFrame:topView.bounds];
[topView insertSubview:self.blackOutView belowSubview:self]; 
```

# javascript - Qtip2的图像映射不起作用

> ID：15278048
> 
> 赞同：1
> 
> 时间：2013-03-07T17:41:36.977
> 
> 标签：javascript, jquery, qtip2

我有一个使用 Qtip 的图像映射，我希望工具提示同时显示在左眼和右眼上，但工具提示没有显示。

这是我的 JS 代码：

```
$(document).ready(function() 
{
  $('area[alt]').qtip(
  {
     content: {
          attr: 'alt'
     },
     hide: {
          fixed: true,
          delay: 500
     },
     style: {
      classes: 'qtip-tipsy qtip-shadow'
     },
     position: {
      viewport: $(window)
     }
  });
}); 
```

这是HTML：

```
<map name="Koala">
<area alt="Left Eye" shape="rect" coords="373,365,404,402" href="#" />
<area alt="Right Eye" shape="rect" coords="641,405,681,448" href="#" />
<!-- .... more hotspots would be listed here -->
</map> 
```

当我尝试此代码时，Qtip 根本没有出现，我不知道为什么，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:48:02.940

以 qtip 页面 [http://jsfiddle.net/craga89/v2WPz/中提供的演示小提琴为例](http://jsfiddle.net/craga89/v2WPz/)

然后修改你的以反映你想要的更改，它应该可以工作。

这是最终版本：

jsfiddle.net/v2WPz/775

```
<div id="demo-imagemap">
    <h3>United States of America</h3>

    <img border="0" usemap="#statesMap" alt="USA" src="http://www.wallpaperpimper.com/wallpaper/Animal/Koalas/Koala-Bear-Australia-1-1024x768.jpg">
    <map id="statesMap" name="statesMap">
<area alt="Left Eye" shape="rect" coords="373,365,404,402" href="#" />
<area alt="Right Eye" shape="rect" coords="641,405,681,448" href="#" />
    </map>

    <p class="attribution">
        imagemap courtesy of <a href="http://www.americanbanker.com/state/state.html">American Banker</a>
    </p>
</div> 
```

Javascript：

```
// Create the tooltips only when document ready
$(document).ready(function()
{
    // We'll target all AREA elements with alt tags (Don't target the map element!!!)
    $('area[alt]').qtip(
    {
        content: {
            attr: 'alt' // Use the ALT attribute of the area map for the content
        },
        style: {
            classes: 'ui-tooltip-tipsy ui-tooltip-shadow'
        }
    });
}); 
```

# php - 为什么 JSON 不能在 Javascript 中使用？

> ID：15278049
> 
> 赞同：-3
> 
> 时间：2013-03-07T17:41:38.530
> 
> 标签：php, javascript, json, function

我有这个脚本：

```
<script>
function teste()
{
    alert("in");
    var ar_ida = <?php echo json_encode($arrayida); ?>;

    for(var i=0;i<30;i++){
         alert(ar_ida[i]);
    }
}
</script> 
```

并在此按钮中调用它：

```
<input type="button" value="teste" id="1" onclick="teste()" /> 
```

并且由于某种原因它不起作用。我试图删除 de Json 函数并且脚本已经打开。使用 json 函数，它甚至不会“输入”警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:55:59.290

因为`json_encode()`您的情况下的 PHP 函数可能会返回以下形式的 javascript*对象*：

```
{"a":1,"b":2,"c":3,"d":4,"e":5} 
```

而不是表单的javascript*数组*

```
[1,2,3,4,5] 
```

如[文档中所述](http://php.net/manual/en/function.json-encode.php)，无法`for`使用您当前使用的循环进行迭代。

# java - 使用 Spring 任务执行器

> ID：15278051
> 
> 赞同：0
> 
> 时间：2013-03-07T15:38:58.667
> 
> 标签：java, spring, multitasking

如何使用 Spring TaskExecutor 来执行工作流，我有一组模块需要按照每个模块的条件按照确切的工作流执行。模块必须作为 jar jar 文件在系统外部生成。一个模块的执行由特定的时间和执行次数设置。

任何人都有任何使用 Spring TaskExecutor 的提议或示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:25:02.140

[TaskExecutor](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/core/task/TaskExecutor.html)是一个非常简单的抽象，它只允许您执行[Runnables](http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html) ，而不考虑实际的执行策略。它可以是单线程，也可以是后台的线程池。它不支持调度。

要使用计时器和时间表，您需要使用[TaskScheduler](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/scheduling/TaskScheduler.html)。[官方文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/scheduling.html)和[javadocs](http://static.springsource.org/spring/docs/current/javadoc-api/index.html?org/springframework/scheduling/package-summary.html)是很好的起点。

# python - 在 Linux 上使用 python 接收多播 UDP 数据报

> ID：15278053
> 
> 赞同：0
> 
> 时间：2013-03-07T17:42:00.033
> 
> 标签：python, linux, sockets, udp, multicast

我有一个在我的网络上发送多播数据的硬件设备。我编写了一个 python 脚本来接收数据并打印它。但是，我发现它只适用于我的 Windows XP PC，不适用于我的 Ubuntu Linux 10.04 PC。在 Linux 下，什么都没有收到。它只是在while循环中循环，从来没有收到任何数据。我的代码发布在下面。你能看出为什么这在 Linux 下不起作用吗？谢谢，拉布。

```
# Multicast client
# Adapted from: http://chaos.weblogs.us/archives/164
# on 05/03/2013

import socket

ANY = "0.0.0.0" 
MCAST_ADDR = "224.0.33.154"
MCAST_PORT = 31800

# Create a UDP socket
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, socket.IPPROTO_UDP)

# Allow multiple sockets to use the same PORT number
sock.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1)

# Bind to the port that we know will receive multicast data
sock.bind((ANY,MCAST_PORT))

# Tell the kernel that we are a multicast socket
sock.setsockopt(socket.IPPROTO_IP, socket.IP_MULTICAST_TTL, 255)

# Tell the kernel that we want to add ourselves to a multicast group
# The address for the multicast group is the third param
status = sock.setsockopt(socket.IPPROTO_IP,
socket.IP_ADD_MEMBERSHIP,
socket.inet_aton(MCAST_ADDR) + socket.inet_aton(ANY));

# setblocking(0) is equiv to settimeout(0.0) which means we poll the socket.
# But this will raise an error if recv() or send() can't immediately find or send data. 
sock.setblocking(0)

while 1:
    try:
        data, addr = sock.recvfrom(1024)
    except socket.error as e:
        pass
    else:
        print "From: ", addr
        print "Data: ", data 
```

这是我的 Windows PC 的一些示例输出：

```
From:  ('0.0.0.0', 31801)
Data:  EDCP 
```

请注意，远程硬件设备没有 IP 地址，而是使用地址 0.0.0.0

编辑：我现在发现这在我的 Windows 笔记本电脑上也不起作用。因此，它看起来并不特定于操作系统。此外，我尝试运行另一个脚本将多播数据发送到相同的多播地址和端口。我可以从一台 PC 发送，所有其他人都可以使用我的接收脚本正确接收。但是，只有我的一台 Windows PC 能够从相关硬件设备接收数据。我想知道这是否与以太网适配器或其配置有关。这可能与硬件设备的 IP 地址为 0.0.0.0 并且需要告知这些以太网适配器和/或我的接收器脚本以接收具有此地址的消息的事实有关吗？在 Linux PC 上运行 Wireshark 可以看到来自硬件设备的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:46:51.583

尝试绑定到多播组地址：

```
sock.bind((MCAST_ADDR,MCAST_PORT)) 
```

此外，您不需要在接收者上设置多播 TTL，这是针对发送者的，也是可选的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:58:00.287

我为同样的问题争论了两天。Wireshark 看到了数据包，但我的代码没有。来自各种来源的所谓“确定”答案都没有对我有用。密钥来自[https://serverfault.com/questions/163244/linux-kernel-not-passing-through-multicast-udp-packets](https://serverfault.com/questions/163244/linux-kernel-not-passing-through-multicast-udp-packets)。

运行“ip maddr”显示与您的代码类似的代码没有将多播地址添加到任何接口。我强迫它用 smcroute 添加（见上面的链接）。仍然没有喜悦。数据包的源 IP 为 172.22...我的接口是 172.17...我向该 NIC 添加了 172.22 地址。答对了！现在我的代码收到了数据包。

现在如何在没有 smcroute 的情况下使程序工作？我注释掉了 setsockopt() 调用。仍然有效。使用 smcroute 取消链接多播地址 -- 失败。取消注释 setsockopt() 调用并用我的 172.22 地址替换“ANY”。成功！

概括：

1.  确保您的 IP 与传入的数据包位于同一网段。
2.  在 IP_ADD_MEMBERSHIP 调用中使用该地址而不是 INADDR_ANY。

如果您只有一个 NIC，您可能不需要执行 2)。我有三个，必须这样做。

以防万一，我使用的是 Ubuntu 12.04。我不需要像其他人描述的那样更改任何默认的 /etc/sysctl.conf 设置。我试过了。他们没有帮助，所以我将它们重置为安装默认值。

# mysql - 高效存储聊天记录并显示实时活动图

> ID：15278054
> 
> 赞同：1
> 
> 时间：2013-03-07T17:42:01.080
> 
> 标签：mysql, database, logging, statistics, real-time

目前，我想做一些关于聊天消息的数据挖掘项目/研究。我有一个消息源，它全天以**约 10 条消息/秒**的速度传递聊天消息。每条消息都有以下信息，我想为每条消息存储所有信息：

```
ID, CHANNEL, DATE, USER, MESSAGE 
```

我希望能够显示**实时统计数据**，根据在以下时间间隔内分别收到/发送多少消息对频道/用户进行**排名：**

```
This Minute, This Hour, This Day, This Month, This Year 
```

我还希望在**指定的时间段内**有效地绘制任何特定通道或用户的活动（通过消息计数）或两者的组合，并以**指定的精度级别**计算消息。

Q1：我应该使用什么样的数据库设置来有效地存储所有这些信息？

Q2：我应该使用什么样的方法来尽可能高效、快速地向多个客户展示上述实时信息？

谢谢。

# dojo - Dojo 日期文本输入

> ID：15278057
> 
> 赞同：0
> 
> 时间：2013-03-07T17:42:09.560
> 
> 标签：dojo, datepicker

我有一个 dateTextInput 并添加了一个约束以仅选择未来的日期，我在这里遇到的问题是早些时候它曾经是一个文本框，用户必须以 mm/dd/yy 格式输入日期 [是的，我几乎当我看到它时杀死了自己]，我没有编辑服务的权限，所以我需要做的就是以与之前接收相同的方式发送文本。

基本上有一个包含所有 javascript 的包，该包具有检索“值”的 getById，我希望以 mm/dd/yy 格式给出该值。

可能的 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:42:46.220

不幸的是，Dojo 似乎有一个功能可以让您*显示*2 位数的年份，但不能以这种方式*检索*它们：

> 有时您可能希望以只有 2 位数年份的格式输入和显示年份。请注意，服务器仍需要在表单提交时发送完整的 4 位数年份，以免其产生歧义。有一个约束属性 fullYear (boolean) 控制年份的表示为 2 位或 4 位。要注意的是，这只能在创建小部件后设置。

[http://dojotoolkit.org/reference-guide/1.8/dijit/form/DateTextBox.html#working-with-two-digit-years](http://dojotoolkit.org/reference-guide/1.8/dijit/form/DateTextBox.html#working-with-two-digit-years)

但是，您可以调用`get("value")`DateTextBox，它会给您一个 JavaScript Date 对象。您可以使用内置方法或您喜欢的日期库将其转换为您喜欢的任何字符串格式：http: [//www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

# typescript - 有没有办法在 TypeScript 中重新定义属性？

> ID：15278061
> 
> 赞同：0
> 
> 时间：2013-03-07T17:42:34.217
> 
> 标签：typescript

`data`我有一个将属性定义为的基类`any[]`。在派生类中，我想用不同的类型重新声明这个属性。所以我在 TypeScript 中寻找某种“ [C# new modifier ”功能。](http://msdn.microsoft.com/en-us/library/51y09td4%28v=vs.71%29.aspx#vclrfnew_newmodifier)有没有办法在 TypeSctipt 中做这样的事情？

```
declare class MyBase { data: any[]; }
declare class MyData { }
declare class MyDerived extends MyBase { data: MyData; /* <--- problem */ } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:25:08.353

在 TypeScript 中没有办法做到这一点。它基本上是一个运行时约束。

在 C# 中，这`new`意味着您实际上正在为函数创建一个新名称，该名称仅在通过派生类型的表达式时才可见，但通过基类型的表达式使用该名称仍然可以看到基成员（包括在基案例实施本身，关键）。

在 TypeScript/JavaScript 中，对象中只有一个“槽”，派生类实际上是在覆盖基类的成员。您通过覆盖该成员来破坏基类的可能性非常高，因为基类无法引用它认为拥有的成员。

**编辑添加**：您*可以通过*这种方式添加专业化，只要它们实际上是正确的（与在 C# 中相同，您通常只`new`在破坏基类形状时才使用关键字）。如果您的类型在运行时是一致的（即您实际上可以使用 Derived 代替 Base），则此限制实际上不应该成为问题：

```
declare class Item {}
declare class SpecialItem extends Item { }

declare class MyBase { data: Item[]; }
declare class MyData { }
declare class MyDerived extends MyBase { data: SpecialItem[]; /* OK */ }
declare class MyDerived2 extends MyBase { data: number[]; /* not OK */ } 
```

在您的示例中，`data`in`MyDerived`需要是一个`MyData[]`（否则您将违反`MyBase`合同）：

```
declare class MyBase { data: any[]; }
declare class MyData { }
declare class MyDerived extends MyBase { data: MyData[]; /* OK */ } 
```

# ruby-on-rails - Rails rake 任务 - 解析 CSV 文件并在它不存在时导入

> ID：15278062
> 
> 赞同：1
> 
> 时间：2013-03-07T17:42:36.837
> 
> 标签：ruby-on-rails, rake

我正在尝试在 rails 3 中创建一个新的 rake 任务。

我有两个 csv 文件（gas.csv 和 elec.csv），其中包含每十五分钟从 SQL 数据库更新的使用数据。csv的格式如下（我无法控制）：

```
MeterID,RoundedTimeStamp,Value,Register
165,31/01/2012 00:00,1200,0
165,28/02/2012 00:15,1201,0
165,31/03/2012 00:30,1199,0 
```

csv 每月更新一次新值，我想编写一个 rake 导入任务来将文件导入模型的相关部分，Usage(month, elec, gas)。到目前为止，我已经为 elec 导入提供了以下内容，但这并没有真正起作用：

```
require 'csv'
desc "Importing Usage data from CSV file"
task import: :environment do

    file = ".../elec.csv"

    CSV.foreach(file, headers: true) do |row|
            Usage.find_or_create_by_month({
                month: row[1],
                elec: row[2]
            })
    end
end 
```

当我从控制台运行 rake:import 时，它会很好地导入 elec 使用数据，但不会跳过重复项。有没有一种方法可以导入这个文件而不重复，还有一种方法可以对气体数据做同样的事情？

注意：我知道使用 first_or_create 而不是 find_or_create 更好，但这不适用于 _by_month。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:07:29.870

```
User.where(month: row[1]).first_or_create do |user|
  user.elec = row[2]
end 
```

更多信息请访问[http://apidock.com/rails/ActiveRecord/Relation/first_or_create](http://apidock.com/rails/ActiveRecord/Relation/first_or_create)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:22:32.510

您可以尝试[`Upsert`](https://github.com/seamusabshere/upsert)：

```
require 'upsert'
require 'active_support/core_ext' # you'll already have this in Rails
# ...
u = Upsert.new Usage.connection, Usage.table_name
# ...
CSV.foreach('elec.csv', headers: :first_row) do |row|
  date = Date.parse row['RoundedTimeStamp']
  selector = { meter_id: row['MeterID'], month: date.strftime('%Y-%m') }
  setter = { elec: row['Value'] }
  u.row selector, setter
end
CSV.foreach('gas.csv', headers: :first_row) do |row|
  date = Date.parse row['RoundedTimeStamp']
  selector = { meter_id: row['MeterID'], month: date.strftime('%Y-%m') }
  setter = { gas: row['Value'] }
  u.row selector, setter
end 
```

如果您的“月”列是一个字符串字段，那么这将起作用。如果它是一个真实的日期字段，那么您可以尝试只使用每个月的第一天：

```
date.strftime('%Y-%m-01') 
```

# optimization - 为什么大多数语言不优化“0 * ...”，有没有可以优化的语言？

> ID：15278064
> 
> 赞同：6
> 
> 时间：2013-03-07T17:42:53.560
> 
> 标签：optimization, syntax, language-agnostic

我正在编写一个 2D 曲线算法，并且有一些代码可以有效地进行求和：

```
for (i=0, end=...; i<end; i++) {
  value += coefficients[i] * expensiveToCalculateValue(i);
} 
```

其中`coefficients[i]`某些迭代步骤的值为零。由于零倍的东西仍然是零（至少在简单的算术规则下），我想我可以通过首先检查是否`coefficients[i]`为零来显着优化这段代码，如果是，就`continue`到下一次迭代。添加，排序，工作出色。

但这留下了一个问题：为什么不为我这样做？这不是乘法的一些创造性的利基版本，它是简单的算术。几乎所有语言都会短路二进制 OR 和 AND 运算，如果找到一个操作数会使结果从那时起保持不变，那么为什么算术乘以零不会同样短路呢？

我尝试在 Java、PHP、JavaScript、Perl、Python、C++ 中运行这段代码（修改为 synax），甚至看看 Prolog 做了什么，但他们都没有意识到，一旦他们看到“零次......”他们不必评估可能昂贵的第二（或第三、第四等）术语：

```
printed = 0;
function veryExpensive() {
  print "oh god this costs so much, x" + (printed++);
  return 0;
}
value = 0 * veryExpensive() * veryExpensive() * veryExpensive() 
```

所有这些最终都运行`veryExpensive()`了三遍。

现在，我知道你*可以*- 如果你是那种人 - 编写你的`veryExpensive`函数来执行管理开销工作，基于这样一个事实，你可以依赖它被执行，尽管它的结果对算术表达式没有贡献（如果你这样做那，你可能在滥用一种语言，但每个人在他们的编程生涯中的某个时候都喜欢偷偷摸摸的忍者代码），但你这样做只是因为你知道这种语言碰巧碰巧没有针对这种情况进行优化。如果该语言为您优化了算术评估，那么您的代码表达能力就不会完全受到阻碍。

那么：是否有一些历史先例导致大量当前使用的语言针对“true OR ...”和“false AND ...”而不是“zero TIMES ...”进行优化？为什么我们要优化二元运算，而不是 MUL 0？（如果我们幸运的话，有人有一个迷人的故事来讲述为什么我们现在不短路）

**更新**

John Skeet 和 Nik Bougalis 都给出了很好的论据，说明为什么用现存的语言优化它会导致问题，但 Nik 的答案与问题更吻合，所以我将他的答案标记为“正确”的答案。也就是说，它们涵盖了同一问题的不同方面，因此真正的答案是两者的结合。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T17:51:20.317

> 所有这些最终都运行了 veryExpensive() 三次。

他们应该这样做。

> 但是您这样做只是因为您知道该语言恰好没有针对这种情况进行优化。

不，这不是“有趣”不优化的问题。这是一个不违反语言规范的优化问题。

如果语言指定操作`X * Y`首先评估`X`然后评估，然后将两个值相乘，那么如果 的值恰好为 0 ，则`Y`删除评估只是一个不正确的优化。`Y``X`

当然，经常有这样的操作符*——*尤其是（在类 C 语言中）：

*   条件运算符*，*`a ? b : c`仅计算*或* `b` *`c`*
**   `x || y`仅评估`y`是否`x`为假*   `x && y`仅评估`y`是否`x`为真*

 *并且 C# 具有 null-coalescing 运算符`x ?? y`，它仅评估`y`是否`x`为 null。

乘法*可以*这样定义，但我怀疑：

*   在*大多数*乘法运算中，条件执行的分支命中是不值得的。但是你会希望行为是明确定义的：要么*是*短路，要么不是；它不应该（IMO）未定义。
*   它使语言的指定和使用都更加复杂。您可能想要一个“无条件乘法”操作，它总是评估两个操作数（就像`x | y`并且`x & y`是非短路的）。

基本上，我认为对于所有相关人员来说，增加额外的复杂性是不值得的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T17:57:22.180

让编译器自动添加运行时检查*可能*有意义，也*可能没有*意义。在您的特定情况下，检查可能确实提高了性能，但您的特定情况并不是判断优化的最终情况。

如果乘法非常昂贵*并且*微处理器没有对乘以零的内部优化，*并且*零乘法的结果被保证（例如`0 * NaN != 0`）为零*，那么*检查可能是有意义的。但这有很多*and操作数，如您所知，您可以将**and*短路。

假设您有一个准随机分布的数字，以及零与非零数字的未知比率。根据比率、零和非零序列的运行长度以及处理器的分支预测算法，检查实际上可能会导致问题（即流水线停顿）。

您*仍然*认为编译器应该代表您插入这样的检查吗？*

# django - 从 Windows 将 django 应用程序部署到 heroku 时出错

> ID：15278075
> 
> 赞同：2
> 
> 时间：2013-03-07T17:43:09.877
> 
> 标签：django, git, deployment, heroku

在 git-shell 中输入以下命令：

> (venv) path_to_project_directory> git push heroku master

给出以下错误：

> 警告：将 'heroku.com,50.19.85.154' (RSA) 永久添加到已知主机列表中。
> 
> 权限被拒绝（公钥）。致命：无法从远程存储库中读取。
> 
> 请确保您具有正确的访问权限并且存储库存在。

我检查了配置文件中的遥控器并通过 (git remote -v) 命令 --- 但遥控器似乎已正确添加：-

> (venv) path_to_project_directory> git remote -v
> 
> heroku git@heroku.com:something.git (fetch)
> 
> heroku git@heroku.com:something.git（推送）
> 
> 来源用户名@bitbucket.org/username/repo_name.git（获取）
> 
> 来源用户名@bitbucket.org/username/repo_name.git（推送）

我还通过（heroku 密钥）命令检查了目录 C:\Users\abc.ssh\ 中的 SSH 密钥：-

> (venv) path_to_project_directory> path_to_heroku\bin\heroku 键
> 
> === myemail@email.com 密钥
> 
> ssh-rsa xxxxxxxxx== abc@abc-PC

此 SSH 密钥与我的 Heroku 帐户页面上显示的密钥相同...

那么为什么在我尝试推送时会出现此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:35:21.103

您可能最好删除您的密钥，生成一个新密钥并添加它。Heroku 的说明在[这里](https://devcenter.heroku.com/articles/keys#adding-keys-to-heroku)。通常，您希望使用一个密钥，而不是 Heroku 的单独密钥。

您的流程如下所示：

```
$ heroku keys:remove myemail@email.com
$ ssh-keygen -t rsa
$ heroku keys:add 
```

# php - 使用 PHP 和 webform 创建超链接

> ID：15278076
> 
> 赞同：-1
> 
> 时间：2013-03-07T17:43:11.143
> 
> 标签：php, javascript, html

每周我都会使用复制和粘贴技术手动创建链接。我在想我疯了，可以找到一种越来越快的方法来做到这一点。

A123456 B34567 d928333 s121233

这些数字需要像这样添加到超链接中

`hxxp://website.com/1/go/A123456/1` `hxxp://website.com/1/go/B34567/1` `hxxp://website.com/1/go/d928333/1`

并成为 HYPERLINKS（测试 url 以确保其正确）。

我正在考虑一个小型网络表单，让我输入数字列表和提交按钮。提交页面后将所有超链接显示为可点击的 html

`http://website.com/1/go/A123456/1` `http://website.com/1/go/B34567/1` `http://website.com/1/go/d928333/1`

有人可以给我看一些基本代码来让它工作吗

丹客

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:48:41.690

你可能想从类似的东西开始

```
<?php
foreach(explode(' ', $_POST['inputName']) as $num) {
    $printable = htmlspecialchars($num, ENT_COMPAT, 'UTF-8');
    echo '<a href="http://website.com/1/go/', $printable, '/1">', $printable, '</a> ';
} 
```

# data-annotations - 使用没有静态属性的“ErrorMessageResourceType”

> ID：15278077
> 
> 赞同：1
> 
> 时间：2013-03-07T17:43:11.143
> 
> 标签：data-annotations, validationattribute

我正在进入验证属性的世界，试图更强烈地订阅 DRY。我不使用现成的资源系统，因为根据经验，它是有问题的。所以我开发了一个更好的基于 XML 的资源提供程序，但我发现我不能将它与`System.ComponentModel.DataAnnotations.ValidationAttribute`类族一起使用。要求资源类型为其资源具有硬编码的静态属性似乎是一个巨大的限制。我原以为界面会更合理。有没有办法我可以使用反射或其他东西来破解它，以便这些属性的资源系统认为它们是从静态属性中读取的，但实际上是通过我的组件的方法进行的？

这是我的资源提供者的接口。

```
public interface IStringProvider
{
    String GetValue(String a_name, params Object[] a_params);
} 
```

现在，我想我必须创建静态属性“替身”，这是很多额外的代码，我想避免。

永远感谢。

# c++ - 从 STDIN 读取而不按 ENTER

> ID：15278083
> 
> 赞同：2
> 
> 时间：2013-03-07T17:43:24.490
> 
> 标签：c++, c, linux, serial-port, stdin

我需要阅读 Linux 中的标准输入，尽管我的程序只会收到没有换行的消息。

我试过这段代码，但不工作：

```
int main ( void )
{
    char p_char[48];

    memset( p_char, 0, sizeof(p_char) );
    fcntl( STDIN_FILENO, F_SETFL, FNDELAY );
    read( STDIN_FILENO, p_char, sizeof(p_char) ); 

} 
```

有人有建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T17:47:12.273

您需要更改终端设置，以便立即发送每个字符。您可以通过操作来做到这一点`termios`（手册页有详细信息）。

本质上它只涉及创建两个`termios`结构，使用当前设置初始化一个`tcgetattr`，将结构复制到另一个结构，修改其中的缓冲区设置，然后使用新结构设置终端`tcsetattr`（当然，在你完成了）。

# jar - 让 LTW 在 Web 应用程序中工作的诀窍是什么？

> ID：15278084
> 
> 赞同：0
> 
> 时间：2013-03-07T17:43:30.017
> 
> 标签：jar, war, aspectj, load-time

我希望能够在加载时使用 Spring 和 AspectJ 将一个方面编织到现有的 tomcat webapp。我正在使用 AspectJ，因为我需要执行构造函数切入点。
我有两个测试场景，一个是我的方面是一个简单的 servlet 应用程序的一部分——该应用程序包含方面的源代码，我使用 MVN 和 aspectJ 插件来编译 WAR 和 Aspect。这方面按预期工作。第二种情况是我将方面分离到它自己的项目中，并使用（我尝试过 AJC 和 AJDT）将其编译成 JAR 文件，并将 jar 文件包含在我的 war/WEB-INF/lib 文件夹中。加载war文件上下文时似乎正在拾取Aspect，但未应用于war文件中的任何对象。

这是方面代码：

```
@SuppressWarnings("unused")
public aspect ProjectMonitor{

    pointcut constr() :  call(com.avaya..*.new(..)) ;
    Object around() : constr(){
        System.out.println("In Constructor for "
                + thisJoinPointStaticPart.getSignature());
        Object ret = proceed();
        return ret;
    }

    pointcut publicOperation() : execution(public * *.*(..));
    Object around() : publicOperation() {
        long start = System.nanoTime();
        Object ret = proceed();
        long end = System.nanoTime();
        System.out.println(thisJoinPointStaticPart.getSignature() + " took "
                + (end - start) + " nanoseconds");
        return ret;
    }

    pointcut callConst() : call(public *..*SCESession.new(..));
    public Object callConst(ProceedingJoinPoint jp) throws Throwable {
        System.out.println("In Project Monitor!!!");
        return jp.proceed();
    }

} 
```

我在 web app/META-INF 文件夹中包含了一个 aop.xml 文件：

```
<aspectj>
    <aspects>
        <aspect name="com.ddvc.ivr.ProjectMonitor" />
    </aspects>
</aspectj> 
```

我的 Spring Context 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:load-time-weaver aspectj-weaving="on" />
    <context:spring-configured />
    <context:component-scan base-package="com.avaya.sce.runtimecommon"/>
    <context:annotation-config />
    <aop:aspectj-autoproxy />

    <!-- Aspect Mapping -->

    <bean id="monitor" class="com.ddvc.ivr.ProjectMonitor" factory-method="aspectOf"/>

</beans> 
```

很简单，对吧？我什至有一个 -javaagent 集：

```
export JAVA_OPTS="-Xmx1024M -Xms1024M -server -javaagent:/software/apache-tomcat-6.0.36/lib/spring-instrument-3.2.1.RELEASE.jar" 
```

为什么当源文件与 WAR 文件一起编译时会起作用，但是当它作为 JAR 文件包含在类路径中时，它根本不起作用。

重新加载 WAR 上下文文件时，我在 tomcat 日志文件中多次看到以下内容：

> 11:27:51,285 调试 GenericTypeResolver:151 - 使用具体方法参数 [{ }]。

任何/所有回复表示赞赏！在此先感谢，格里夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:21:41.270

愚蠢的错误会耗费时间和金钱。我将 aop.xml 包含在 WAR 文件 /META-INF 文件夹中，而不是包含的 JAR 文件中。在 JAR 文件中移动 aop.xml 文件解决了这个问题，呵呵！

# mysql - MYSQL：按搜索查询 IN 函数排序？

> ID：15278087
> 
> 赞同：0
> 
> 时间：2013-03-07T17:43:44.373
> 
> 标签：mysql

我有一个查询：

```
SELECT * FROM products WHERE id IN (1,2,3) 
```

这将返回：

```
ID | Title
1  | Bla
2  | Bla2
3  | Bla3 
```

如果我将查询更改为：

```
SELECT * FROM products WHERE id IN (2,3,1) 
```

我仍然得到：

```
ID | Title
1  | Bla
2  | Bla2
3  | Bla3 
```

如何更改我的查询以获得：

```
ID | Title
2  | Bla2
3  | Bla3
1  | Bla 
```

对于第二个查询？换句话说，按 IN 查询中项目的顺序对结果进行排序？是否可以这样说：

```
ORDER BY ID (2,3,1) 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T17:58:17.593

你可以使用这样的东西：

```
SELECT *
FROM products
WHERE id IN (2,3,1)
ORDER BY FIND_IN_SET(id, '2,3,1') 
```

或者您也可以通过以下方式订购：

```
ORDER BY FIELD(id, 3,2,1) 
```

请[在此处](http://sqlfiddle.com/#!2/f8637/4)查看小提琴。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T18:03:28.393

您可以在子句中使用`CASE`表达式：`ORDER BY`

```
SELECT * 
FROM products 
WHERE id IN (2,3,1)
order by 
  case id 
    when 2 then 0
    when 3 then 1
    when 1 then 2
    else 3
  end 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/bed1a/6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T17:44:52.777

你必须使用`ORDER BY <ASC/DESC>`

```
SELECT * FROM products WHERE id IN (1,2,3) order by id desc 
```

# bash - 在 bash 中选择第 5 个和任何其他命令行参数

> ID：15278089
> 
> 赞同：1
> 
> 时间：2013-03-07T17:43:55.693
> 
> 标签：bash

我想将第 5、第 6 等参数组合到 bash 中的一个变量中，我不知道命令行参数的数量，例如：

```
command.sh v1 v2 v3 v4 v5 v6 v7 ... v9 v10 
```

并且有`VARIABLE=v5 v6 ...`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:59:34.700

由于所有参数都存储在`$@`/中`$*`，因此使用子字符串扩展（使用这些参数，实际上更像是数组切片）：

```
VARIABLE="${*:5}" 
```

`$*`（在这种情况下，我认为和之间没有区别`$@`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T17:49:30.223

只是`shift`前四个参数并使用`"$*"`：

```
shift 4
var="$*" 
```

如果您需要前 3 个参数，请在转换前将它们保存到变量中。

# jquery - 如何将多个 jQuery 函数压缩为一个简洁的函数？

> ID：15278092
> 
> 赞同：2
> 
> 时间：2013-03-07T17:44:03.933
> 
> 标签：jquery, toggle

希望有人能帮忙！我是 jQuery/JS 新手。有没有一种简单的方法可以将多个功能浓缩为一个。我正在使用 jQuery 展开和折叠一些隐藏的 div。我已经让它在下面的代码中正常工作，但可能有 50 多个（不仅仅是 4 个），我认为有一种方法可以以优化的名义将它们压缩成一小段代码。任何帮助将不胜感激。这是JS...

```
$('#toggle1').click(function() {
    $('.toggle').slideToggle('fast');
    return false;
    });

    $('#toggle2').click(function() {
    $('.toggle2').slideToggle('fast');
    return false;
    });
    $('#toggle3').click(function() {
    $('.toggle3').slideToggle('fast');
    return false;
    });

    $('#toggle4').click(function() {
    $('.toggle4').slideToggle('fast');
    return false;
    }); 
```

这是HTML...

```
 <div class="docBlocA">
  <div class="docTitle" id="toggle1">Document Title Goes Here (click to expand)</div>
  <div class="toggle1" style="display:none; width:100%;">Hidden div content here</div>
 </div><!--docBlocA-->

 <div class="docBlocB">
  <div class="docTitle" id="toggle2">Document Title Goes Here (click to expand)</div>
  <div class="toggle2" style="display:none; width:100%;">Hidden div content here</div>
 </div><!--docBlocB-->

 <div class="docBlocA">
  <div class="docTitle" id="toggle3">Document Title Goes Here (click to expand)</div>
  <div class="toggle3" style="display:none; width:100%;">Hidden div content here</div>
 </div><!--docBlocA-->

 <div class="docBlocB">
  <div class="docTitle" id="toggle4">Document Title Goes Here (click to expand)</div>
  <div class="toggle4" style="display:none; width:100%;">Hidden div content here</div>
 B</div><!--docBlocB--> 
```

提前谢谢了...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T17:47:16.253

您可以使用类选择器和`next`方法，`this`在处理程序的上下文中引用单击的元素。

```
$('div.docTitle').click(function(){
    $(this).next().slideToggle('fast');
}); 
```

**注意**：DIV 元素没有默认操作，因此`return false`除非您想停止事件的传播，否则您不需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T17:51:43.687

采用

```
 $('.docTitle').click(function() {
    $(this).slideToggle('fast');
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T17:47:39.887

```
$('#toggle1,#toggle2,#toggle3,#toggle4').click(function() {
    $('.toggle').slideToggle('fast');
    return false;
    }); 
```

# c# - 如何将一串数字存储在文本文件中并将每个数字读入数组索引？

> ID：15278093
> 
> 赞同：1
> 
> 时间：2013-03-07T17:44:09.777
> 
> 标签：c#

如果我有一个带有字符串的文本文件：100101101

我可以使用以下代码读取和存储它：

```
string text = System.IO.File.ReadAllText(@"writeText.txt"); 
```

如何将字符串转换为单独的数字并将每个数字添加到数组索引中，是否需要用逗号分隔每个数字？我在想我可以遍历字符串并将每个字符转换为整数并添加到数组中，这可行吗？

这是我正在尝试的：

```
 int[] arrSetup = new int[9];
        string text = System.IO.File.ReadAllText(@"writeText.txt");

        foreach (char c in text)
        {
            arrSetup[0] = Int32.Parse(c);

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:52:44.260

您的数据是这样的：`100101101`..所以用逗号分隔，然后将其添加到整数数组中是不需要的......

因此，请尝试如下所示，它将对您有所帮助...

```
 string text = System.IO.File.ReadAllText(@"writeText.txt");
        int[] arr = new int[text.Length];
        for (int i = 0; i < text.Length; i++)
        {
            arr[i] = Convert.ToInt32(text[i].ToString());
        } 
```

现在整数数组`arr[]`分别具有值...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:00:41.300

希望这会有所帮助，请自己尝试：

```
 string text = System.IO.File.ReadAllText(@"writeText.txt");
        char[] arr = text.ToCharArray() ;
        int[] nums = {0};
        for (int a = 0; a < 8; a++)
           nums[a] = System.Convert.ToInt32(arr[a]); 
```

# java - android：如何将数据写入媒体播放器缓冲区？

> ID：15278094
> 
> 赞同：3
> 
> 时间：2013-03-07T17:44:14.130
> 
> 标签：java, android, streaming, media-player, inputstream

我想通过android中的媒体播放器对象播放实时流媒体。

所以我计划从源读取缓冲区数据并将其写入媒体播放器的缓冲区，请注意我不会使用任何 URL 作为媒体播放器的流源，音频缓冲区数据将作为字节通过输入流接收。

所以，任何人都知道适当的方法来做到这一点

到目前为止，我可以用音轨对象做到这一点，但这种方法只适用于未压缩的 PCM 数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T11:12:25.523

按照这些链接，这将帮助您完成工作

[Android - ICS 4.0 中的 MediaPlayer 缓冲区大小](https://stackoverflow.com/questions/10060165/android-mediaplayer-buffer-size-in-ics-4-0)

[音频流缓冲](https://stackoverflow.com/questions/4557450/audio-stream-buffering)

这将帮助您

# html - 根据页面上的可用空间组织 div

> ID：15278096
> 
> 赞同：0
> 
> 时间：2013-03-07T17:44:17.113
> 
> 标签：html, css

我正在尝试根据可用空间均匀地组织页面中的 div。如果有足够的空间，我需要在进入下一行之前将 div 水平对齐。我可能在 tab-content 父 div 下有许多 div。有什么想法可以做到这一点吗？我插入了html和css。

html 看起来像这样：

```
<div class="tab-content" id="tabs4">
   <div id="total_mem" class="all"> </div>
   <div id="total_cpu" class="all"> </div>
   <div id="total_disk" class="all"> </div>
   <div id="total_read" class="all"> </div>
   <div id="total_io" class="all"> </div> 
```

```
My outer div's css looks like this:

.tab-content {   
width: 1400px;   
border: solid 1px #aaa;   
text-align: center;   
font-size: 20px;   
letter-spacing: 35px;   
white-space: nowrap;   
line-height: 12px;   
overflow: hidden; 
text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:52:36.180

您应该使父容器的宽度灵活，以使用页面上的所有可用空间（不多也不少）：

```
.tab-content {
    width: 100%;
}
.tab-content > div {
    box-sizing: border-box;
    float: left;
    width: 20%; /* Might have to adjust, depends on how many divs you want on each line */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:47:18.030

`div`要在转到下一行之前使s 内联（水平），请使用 CSS `inline-block`：

```
.tab-content .all {
    display: inline-block;
} 
```

# ruby-on-rails - 在 Heroku 上运行 Rails 4 应用程序的问题

> ID：15278099
> 
> 赞同：3
> 
> 时间：2013-03-07T17:44:37.553
> 
> 标签：ruby-on-rails, ruby, heroku, ruby-on-rails-4

该应用程序在开发中完美运行。

在 heroku 上运行应用程序时出现应用程序崩溃错误。

在 gemfile 中使用 ruby​​ '1.9.3'：

```
2013-03-07T17:52:54+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 6699 -e $RAILS_ENV`
2013-03-07T17:52:54+00:00 heroku[slugc]: Slug compilation finished
2013-03-07T17:52:55+00:00 app[web.1]: bash: bin/rails: No such file or directory
2013-03-07T17:52:56+00:00 heroku[web.1]: Process exited with status 127
2013-03-07T17:52:59+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 38670 -e $RAILS_ENV`
2013-03-07T17:53:00+00:00 app[web.1]: /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find railties (>= 0) amongst [Ascii85-1.0.2, activerecord-deprecated_finders-0.0.3, afm-0.2.0, angular-ui-bootstrap-rails-0.1.1, angularjs-rails-1.0.5, atomic-1.0.1, bigdecimal-1.1.0, bootstrap-sass-2.3.0.1, bootswatch-rails-0.4.0, builder-3.1.4, bundler-1.3.0.pre.5, coffee-script-2.2.0, coffee-script-source-1.5.0, erubis-2.7.0, execjs-1.4.0, hashery-2.1.0, hike-1.2.1, i18n-0.6.4, io-console-0.3, json-1.7.7, json-1.5.5, mail-2.5.3, mime-types-1.21, minitest-4.6.2, minitest-2.5.1, multi_json-1.6.1, pdf-reader-1.3.1, pg-0.14.1, polyglot-0.3.3, prawn-0.12.0, rack-1.5.2, rack-test-0.6.2, rake-10.0.3, rake-0.9.2.2, rdoc-3.12.2, rdoc-3.9.5, ruby-rc4-0.1.5, sass-3.2.6, sprockets-2.9.0, sprockets-rails-2.0.0.rc3, thor-0.17.0, thread_safe-0.1.0, tilt-1.3.4, treetop-1.4.12, ttfunk-1.0.3, tzinfo-0.3.35, uglifier-1.3.0] (Gem::LoadError)
2013-03-07T17:53:00+00:00 app[web.1]:   from /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
2013-03-07T17:53:00+00:00 app[web.1]:   from /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/rubygems.rb:1231:in `gem'
2013-03-07T17:53:00+00:00 app[web.1]:   from bin/rails:22:in `<main>'
2013-03-07T17:53:02+00:00 heroku[web.1]: Process exited with status 1
2013-03-07T17:53:02+00:00 heroku[web.1]: State changed from crashed to starting
2013-03-07T17:53:02+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-07T17:53:09+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by brian@plexm.com
2013-03-07T17:53:10+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 11069 -e $RAILS_ENV`
2013-03-07T17:53:11+00:00 app[web.1]: /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find railties (>= 0) amongst [Ascii85-1.0.2, activerecord-deprecated_finders-0.0.3, afm-0.2.0, angular-ui-bootstrap-rails-0.1.1, angularjs-rails-1.0.5, atomic-1.0.1, bigdecimal-1.1.0, bootstrap-sass-2.3.0.1, bootswatch-rails-0.4.0, builder-3.1.4, bundler-1.3.0.pre.5, coffee-script-2.2.0, coffee-script-source-1.5.0, erubis-2.7.0, execjs-1.4.0, hashery-2.1.0, hike-1.2.1, i18n-0.6.4, io-console-0.3, json-1.7.7, json-1.5.5, mail-2.5.3, mime-types-1.21, minitest-4.6.2, minitest-2.5.1, multi_json-1.6.1, pdf-reader-1.3.1, pg-0.14.1, polyglot-0.3.3, prawn-0.12.0, rack-1.5.2, rack-test-0.6.2, rake-10.0.3, rake-0.9.2.2, rdoc-3.12.2, rdoc-3.9.5, ruby-rc4-0.1.5, sass-3.2.6, sprockets-2.9.0, sprockets-rails-2.0.0.rc3, thor-0.17.0, thread_safe-0.1.0, tilt-1.3.4, treetop-1.4.12, ttfunk-1.0.3, tzinfo-0.3.35, uglifier-1.3.0] (Gem::LoadError)
2013-03-07T17:53:11+00:00 app[web.1]:   from bin/rails:22:in `<main>'
2013-03-07T17:53:11+00:00 app[web.1]:   from /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
2013-03-07T17:53:11+00:00 app[web.1]:   from /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/rubygems.rb:1231:in `gem'
2013-03-07T17:53:12+00:00 heroku[web.1]: Process exited with status 1
2013-03-07T17:53:12+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-07T17:53:15+00:00 heroku[run.3892]: Awaiting client
2013-03-07T17:53:15+00:00 heroku[run.3892]: Starting process with command `bundle exec rake db:migrate`
2013-03-07T17:53:15+00:00 heroku[run.3892]: State changed from starting to up
2013-03-07T17:53:24+00:00 heroku[run.3892]: Client connection closed. Sending SIGHUP to all processes
2013-03-07T17:53:25+00:00 heroku[run.3892]: State changed from up to complete
2013-03-07T17:53:25+00:00 heroku[run.3892]: Process exited with status 0
2013-03-07T17:53:29+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=bpetro.herokuapp.com fwd="99.104.137.64" dyno= queue= wait= connect= service= status=503 bytes=
2013-03-07T17:53:30+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=bpetro.herokuapp.com fwd="99.104.137.64" dyno= queue= wait= connect= service= status=503 bytes=
2013-03-07T17:53:30+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=bpetro.herokuapp.com fwd="99.104.137.64" dyno= queue= wait= connect= service= status=503 bytes= 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-03-07T17:48:10.993

日志表明 Heroku 正在尝试使用 ruby​​ 1.9.1 部署应用程序。Rails 4 至少需要 ruby​​ 1.9.3：[https ://blog.engineyard.com/2013/rails-4-changes](https://blog.engineyard.com/2013/rails-4-changes)

您需要更新您的`Gemfile`以指定 1.9.3：

[https://devcenter.heroku.com/articles/ruby-versions](https://devcenter.heroku.com/articles/ruby-versions)

还可以尝试 Gist 中的步骤：[https ://gist.github.com/peter/3025502](https://gist.github.com/peter/3025502)

# .net - 打开已发布的 VSTO Excel 工作簿时无法加载公共语言运行库

> ID：15278102
> 
> 赞同：1
> 
> 时间：2013-03-07T17:44:42.450
> 
> 标签：.net, visual-studio-2010, deployment, vsto

我已使用 Visual Studio 2010 和解决方案属性中的“发布”菜单将 Excel 工作簿 VSTO 项目发布到网络共享位置。

我将发布文件夹位置和安装文件夹 URL 设置为相同的 UNC 路径。

先决条件的设置如下面的屏幕截图所示，我相信我已经添加了足够多的内容，但我不能确定。

![VSTO 先决条件 1](../Images/4e3fbb99da1c5f2170d9d7c208c67f01.png)

![VSTO 先决条件 2](../Images/daf8aeb5d53dc9562d626d4fe0cbc00b.png)

使用没有安装 .NET 或 Visual Studio 的其他人的机器；我让他们复制工作簿，以便我可以测试它是否会运行并安装相关的依赖项。

他们收到“无法加载公共语言运行时...联系管理员”的错误

我没有尝试过相关的 setup.exe，因为网络管理员不允许运行可执行文件，用户希望将此文件共享给多个用户，所以我希望这可以通过打开文件来工作.. 但似乎在任何一个万一它可能行不通。

有谁知道这个问题是否与没有管理员权限有关？或者如果我缺少先决条件？

该错误最初在我看来就像它无法安装 .NET 框架先决条件一样。

不幸的是，这是一个非常缓慢的过程，因为我没有可以访问网络位置的虚拟机来回访问其他用户。

注意：我还尝试了“从与我所在位置相同的位置下载先决条件”并得到相同的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T14:22:41.053

对于其他得到这个的人。

在我的例子中，所有用户都已经安装了 .NET 4.0。

他们没有安装 VSTO4 运行时，解决方案正在使用 VSTO 运行时的功能。

VSTO4 运行时需要安装管理员权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:17:15.553

您是否使用 VS 2012 发布此内容？不确定，但在发布 VSTO 时，VS2010 是唯一对我有用的东西。还，

# excel - 逐行异步执行宏

> ID：15278103
> 
> 赞同：1
> 
> 时间：2013-03-07T17:44:44.663
> 
> 标签：excel, vba, bloomberg

我正在尝试解决我在使用适用于 Excel 的 Bloomberg 插件时遇到的问题。每天我都会为 500 多只股票填充 31 天的历史价格数据。

$A$K3 = "ACE US EQUITY" $AL$3 = "=BDH(AK3,"PX_LAST",$D$1,$C$1,"DTS=h","dir=h")" $C$1 = " =WORKDAY(TODAY(),0)" $D$1 = "=BAddPeriods(C1,"NumberOfPeriods=-31","Per=wd","CDR=#A")"

应该发生的是，在 $AL$3:$BQ$3 中会有 31 天的价格。

我将工作簿保持打开状态，因为即使 Bloomberg 可执行文件未运行，Bloomberg DDE 会话仍保持打开状态 3 天。

有时没有问题，第二天上班时，数据向前移动了一天。其他时候，大部分数据都丢失了，我不得不选择并刷新每个 $AL$_ 字段。问题在于，由于某种原因，刷新是同步发生的，我认为这会对 DDE 连接和/或 Excel 造成严重破坏。导致更新缓慢/无更新。此外，如果我刷新整个工作表，一些公式将被静态数据覆盖！

我想做的是创建一个宏，它将：

> 1) 清除 $AL$ *:$BQ* $ & $BS$ *:$CX* $中的所有数据
> 
> 2) 设置$AL$_的值 = "=BDH(AK$_,"PX_LAST",$D$1,$C$1,"DTS=h","dir=h")"
> 
> 3) 等到数据填充到 $AL$ *:$BQ$*之后再转到 $AL$(+1):$BQ$(+1); 如果 $AM$_ 有一个值，那么很可能数据已填充到该行中。
> 
> 4) 然后当 $AL$ *:$BQ$*完成后，对 $BS$ *:$CX$执行相同的操作*

一个多月以来，我一直在等待彭博的支持来满足这一要求，但没有任何结果。

我没有足够的经验来做这件事。

我在下面有一小段代码，我使用记录器创建了这些代码：

```
Sub PopulateData()
'
' PopulateData Macro 
'

'
Range("AL2:BQ2").Select
Selection.ClearContents
Range("AL2").Select
ActiveCell.FormulaR1C1 = _
    "=BDH(RC[-1],""PX_LAST"",R1C4,R1C3,""DTS=h"",""dir=h"")"
Range("AL2").Select
End Sub 
```

虽然我在录制时选择了刷新按钮，但未录制此操作。谢谢你的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:07:09.423

一种宏解决方案，一次运行一行公式，然后用值覆盖公式，因此在下一次迭代时不会执行同时查询：

```
Sub CalculateLineByLine
   For Each c In Range("AL2:AL501")
      c.FormulaR1C1 = "=BDH(RC[-1],""PX_LAST"",R1C4,R1C3,""DTS=h"",""dir=h"")"
      Calculate
      Range(c.address, "BQ" & c.row)).Copy
      c.PasteSpecial xlPasteValues
   Next c
End Sub 
```

我没有手动清除内容，因为我认为旧数据只会被特殊粘贴覆盖。我希望这对您来说是一个可能的解决方案。

如果我正确阅读了您的最后一条评论，您希望在公式设置为手动时按 F9 手动计算所有打开的工作簿。

# mysql - MySQL：在连接列上分组的索引

> ID：15278107
> 
> 赞同：0
> 
> 时间：2013-03-07T17:45:01.330
> 
> 标签：mysql, join, group-by, indexing, explain

我正在尝试优化我的索引以执行 JOIN，然后 GROUP BY 连接表中的一列。

我正在通过运行下面的脚本进行测试，使用索引，但我似乎无法弄清楚第三个查询需要哪些索引。

**已解决：**添加虚拟数据会使 sql 行为不同，我之前尝试过的索引之一工作得很好！

```
CREATE DATABASE stats_idx_test;

USE stats_idx_test;

DROP TABLE stats;
CREATE TABLE stats (article_id INT, cnt INT, type INT);
ALTER TABLE stats ADD INDEX idxs1 (article_id, cnt, type);

DROP TABLE article;
CREATE TABLE article (id INT, cat_id INT);
ALTER TABLE article ADD INDEX idxa2 (cat_id, id);

INSERT INTO article (id, cat_id) VALUES (1, 1);
INSERT INTO stats (article_id, cnt, type) VALUES (1, 9, 1);
INSERT INTO stats (article_id, cnt, type) VALUES (1, 13, 2);

EXPLAIN 
SELECT SUM(stats.cnt)
FROM stats
WHERE stats.type = 1 AND stats.article_id = 1;
-- Using where; Using index

EXPLAIN 
SELECT article.cat_id, SUM(stats.cnt)
FROM stats
JOIN article ON (stats.article_id = article.id)
WHERE stats.type = 1 AND article.cat_id = 1;
-- Using where; Using index

EXPLAIN 
SELECT article.cat_id, SUM(stats.cnt)
FROM stats
JOIN article ON (stats.article_id = article.id)
WHERE stats.type = 1
GROUP BY article.cat_id;
-- Using index
-- Using where; Using index 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:20:40.160

对于 group by，您需要 cat_id 上的索引。您拥有的当前索引无法应用。

[分组和索引](http://dev.mysql.com/doc/refman/5.0/en/group-by-optimization.html)

此外，您应该考虑将 id 作为主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:12:43.077

添加虚拟数据会使 sql 表现不同，我之前尝试过的索引之一工作得很好！

# c++ - 带有 boost::bind 的 remove_if 很慢

> ID：15278108
> 
> 赞同：4
> 
> 时间：2013-03-07T17:45:04.023
> 
> 标签：c++, boost, ref, boost-bind, remove-if

我有一个 std::list 类，并且想要删除标记为删除的条目。我正在使用 std::remove_if 和擦除。

```
class MyClass
{
    bool isDone(MyData& myData)
    {
        return myData.isDone();
    }

    void removeIfDone(std::list<MyData>& myList)
    {
        std::list<MyData>::iterator it =
            remove_if(myList.begin(), myList.end(), 
                  boost::bind(&MyClass::isDone, this, _1));
        myList.erase(it, myList.end());
    }
}; 
```

我在一个小型处理器上运行，其内存分配和释放非常昂贵。此删除在我的应用程序中调用了数千次 new 和 delete。

我以前`boost::ref`在将非平凡变量作为绑定参数传递时使用过，但在这种情况下，我认为可能是仿函数本身的创建和销毁或它的复制导致了问题。

我想做类似的事情

```
boost::bind(&MyClass::isDone, boost::ref(this), boost::ref(_1)); 
```

我找不到关于正在创建和销毁什么的文档。所以我的简单问题是如何提高效率？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T20:36:33.387

尝试将调用替换`std::remove_if`为[`std::list::remove_if`](http://en.cppreference.com/w/cpp/container/list/remove)。后者应该只从前面和后面的元素中复制一些指针，而不是尝试将元素移动到列表的末尾，这是您看到的多重分配的原因。另一个好处是，由于它是 的成员函数`std::list`，它实际上会删除（即擦除）与您的标准匹配的元素。

```
class MyClass
{
    bool isDone(MyData& myData)
    {
        return myData.isDone();
    }

    void removeIfDone(std::list<MyData>& myList)
    {
        myList.remove_if( boost::bind( &MyClass::isDone, this, _1 ) );
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:53:37.700

您也许可以使用传递给您的`std::remove_if`. 这样你就不需要`remove_if`在`boost::bind`

```
struct functor
{
public:
    bool operator()(MyData& mydata)
    { 
       return mydata.IsDone();
    }   
};

void removeIfDone(std::list<MyData>& myList)
{
   std::list<MyData>::iterator it =
     remove_if(myList.begin(), myList.end(), 
         functor()); //call operator() on functor
     myList.erase(it, myList.end());
} 
```

[在此处编译](http://coliru.stacked-crooked.com/view?id=c3586eb76ec3c443fbfb2d571ebdcbd1-18aa934a8d82d638dde2147aa94cac94)的示例

# html - HTML5 视频 IE9 红色 X

> ID：15278111
> 
> 赞同：0
> 
> 时间：2013-03-07T17:45:16.240
> 
> 标签：html, video, internet-explorer-9

出于某种原因，我的视频适用于所有其他浏览器（在此示例中我只使用 mp4，但我也使用 ogv 和 webm）。更奇怪的是，有些视频有效，有些则无效。

我创建了一个小 jsfiddle 来向您展示问题所在，希望您能提供帮助:)

[jsfiddle 示例](http://jsfiddle.net/7Bbdb/1/) *第一个工作正常，第二个不行

```
<video controls >
<source src="https://s3.amazonaws.com/alchemycollaborative/video/inspired/Hitchcock.mp4"
type="video/mp4" />
<p>Your browser does not support HTML5.</p>
</video>
<video controls >
<source src="https://s3.amazonaws.com/alchemycollaborative/video/sizzle.mp4"
type="video/mp4" />
<p>Your browser does not support HTML5.</p>
</video> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:35:36.660

这里可能发生了几件事：

请注意，如果页面顶部未声明任何指令，Internet Explorer 9 和更早版本将在 IE5 (Quirks) 模式下运行！我建议在页面顶部添加```。

确保您没有意外让您的 IE9 实例在 IE7/8 兼容模式下运行：点击 [F12] 并检查调试器窗口中菜单右侧的项目是否为“浏览器模式：IE9 文档模式：标准”

如果上述步骤不起作用，请尝试添加`<meta http-equiv="X-UA-Compatible" content="IE=9"/>`到页面的标题元素：这将强制 IE9 或更高版本在 IE9 兼容模式下运行。

> **注意**：仅在调试时使用 - 如果您在实时页面中保留此元标记，任何使用 IE10 访问您网站的人都将无法享受 IE9 不支持的任何新 HTML5 功能！

FWIW，以下在我的机器上运行良好（尽管第二个视频似乎不存在！）：

```
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>My Site's Title</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
</head>
<body>
  <video controls >  
    <source src="https://s3.amazonaws.com/alchemycollaborative/video/inspired/Hitchcock.mp4" type="video/mp4" />
    <p>Your browser does not support HTML5.</p>
  </video>
  <video controls >
    <source src="https://s3.amazonaws.com/alchemycollaborative/video/sizzle.mp4" type="video/mp4" />
    <p>Your browser does not support HTML5.</p>
  </video>
</body>
</html> 
```

# jquery - 删除类的特定实例

> ID：15278114
> 
> 赞同：0
> 
> 时间：2013-03-07T17:45:21.527
> 
> 标签：jquery, class, object, if-statement

必须有一种更有效的方法来做到这一点。我有以下代码

```
if(isOverlap("#mainCharacter", "#objID") == true) {
    $("#objID").remove();
} 
```

这将删除特定对象，但每个对象必须具有不同的 ID 和 if 语句才能正常工作。我希望它有一个类参数，但只删除一个重叠的对象。有没有类似的东西`$(this.".classID").remove();`会做我想要的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T17:46:41.197

你离它很近。您可以将 this 作为[上下文与您的选择器一起](http://api.jquery.com/jQuery/)传递，或者在此上使用[find()](http://api.jquery.com/find/)方法来查找在后代中满足选择器的元素。

```
$(this.".classID").remove(); 
```

到

```
$(".classID", this).remove(); 
```

或者

```
$(this).find(".classID").remove(); 
```

# android - 按下此按钮时，我试图显示敬酒。但是代码不起作用

> ID：15278118
> 
> 赞同：5
> 
> 时间：2013-03-07T17:45:28.523
> 
> 标签：android, toast

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button btn = (Button) findViewById(R.id.button1);
    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            EditText text = (EditText)findViewById(R.id.editText1);
            EditText text1 = (EditText)findViewById(R.id.editText2);
            String userid = text.getText().toString();
            String pass = text1.getText().toString();
        Toast.makeText(getBaseContext(),"Entered"+userid+"and password entered is"+pass,Toast.LENGTH_SHORT).show();
        }

    });

} 
```

代码成功执行，但按下按钮时没有任何反应。当我专注于 eclipse 中的线条时，它会说以下内容

```
"The method makeText(Context, CharSequence, int) in the type Toast is not applicable for the arguments (new 
 View.OnClickListener(){}, String, int)" 
```

请告诉我我需要做什么才能使它工作

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-07T17:46:55.670

您必须将当前**Context**作为第一个参数（而不是`getBaseContext()`）传递。在您的情况下，这是`MainActivity.this`.

```
Toast.makeText(MainActivity.this,"Entered"+userid+"and password entered is"+pass,Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T17:48:51.947

这是因为代码中此时的 getBaseContext() 正在引用单击侦听器。您要参考的是您的活动。您应该将 Toast 消息中 Context 的引用更改为***View.getContext()***（如果从子视图中处理上下文）或***this***。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T17:51:18.117

```
Toast.makeText(getApplicationContext(),"Entered"+userid+"and password entered is"+pass,Toast.LENGTH_SHORT).show(); 
```

或者

```
Toast.makeText(MainActivity.this,"Entered"+userid+"and password entered is"+pass,Toast.LENGTH_SHORT).show(); 
```

方法语法

```
public static Toast makeText (Context context, CharSequence text, int duration); 
```

要使用的上下文。通常是您的 Application 或 Activity 对象。

# asp-classic - ASP 发送带有附件的电子邮件表单

> ID：15278123
> 
> 赞同：2
> 
> 时间：2013-03-07T17:45:42.220
> 
> 标签：asp-classic, email-attachments

我有一个 HTML 表单，它使用此代码在提交时发送电子邮件。我如何将上传的文件也作为附件发送。我是 asp 新手，看过很多例子，但它们都非常不同和复杂。提前谢谢了。

HTML

```
<form method="post" action="index.asp">
    <input type="text" name="name" id="name">
    <input type="file" name="myFile1" id="myFile1">
    <input type="submit" value="Submit">
</form> 
```

ASP

```
<%
Set myMail=CreateObject("CDO.Message")
myMail.Subject="Sending email with CDO"
myMail.From="mymail@mydomain.com"
myMail.To="someone@somedomain.com"
myMail.TextBody="This is a message."
myMail.AddAttachment "c:\mydocuments\test.txt"
myMail.Send
set myMail=nothing
%> 
```

所以我得到了上面的代码来发送附件，但我仍然不知道如何从我的表单中附加上传的文件？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:57:23.150

您将需要使用 SaveAs 或 InputStream 将任何内容放入附件中。

[这是](http://msdn.microsoft.com/en-us/library/system.web.httppostedfile.aspx)MSDN 文档的链接。

这是一种将文件附加到邮件的方法。

```
message.Attachments.Add(new Attachment(saveLocation, MediaTypeNames.Application.Octet)) 
```

# xcode - cocos2d 中具有触摸功能的对象数组

> ID：15278124
> 
> 赞同：1
> 
> 时间：2013-03-07T17:45:43.100
> 
> 标签：xcode, arrays, cocos2d-iphone

我想创建一个简单的游戏，水果会从顶部掉下来，用户通过点击来收集它们。我的问题是，例如，点击时掉下的苹果消失了，所以到目前为止只有 1 个苹果要收集。我想制作某种数组来存储 5 个苹果，它们应该以随机速度和随机位置落下。然后当最后一个被收集时，它应该消失。

这就是我现在正在尝试的，它似乎不起作用：这是创建 CCSprite Apple 的地方：

```
 for (int i = 0; i < 5; i++) {
        Apple = [CCSprite spriteWithFile:@"Apple4.png"];
        [self addChild:Apple];
        int positionX = arc4random()%450;
        [Apple setPosition:ccp(positionX, 768)];
    } 
```

这是从上到下的运动：

```
-(void) callEveryFrame:(ccTime)dt
{
    Apple.position = ccp(Apple.position.x, Apple.position.y -300*dt);
    if (Apple.position.y < -100+64)
    {
        int positionX = arc4random()%1004;
        [Apple setPosition:ccp(positionX, 768)];
    }
} 
```

任何帮助，将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:20:16.730

注意：添加随机位置和速度的编辑解决方案。注2：新版本增加了触摸检测。

用一个变量来存储五个 CCSprite？最后，您将只有该变量中的最后一个 CCSprite。

您需要将 CCSprite(s) 存储在 CCArray（或 NSMutableArray）中

在你的头文件.h中试试这个：

```
@interface xyz : CCLayer {
        CCArray *appleArray;
}

@property (nonatomic, retain) CCArray *appleArray; 
```

在您的实现文件 .m 中：

```
@synthesize appleArray;

- (id) init
{
    if( (self=[super init])) {

        self.touchEnabled = YES;

        // Inicialize CCArray
        self.appleArray = [CCArray arrayWithCapacity:5];

        for (int i = 0; i < 5; i++) {
            CCSprite *Apple = [CCSprite spriteWithFile:@"Apple4.png"];
            [self addChild:Apple];

            int positionX = arc4random()%450;
            int positionY = 768 + arc4random()%1000;
            // Store speed 
            float speed = 150 + arc4random()%400;
            Apple.tag = speed;
            [Apple setPosition:ccp(positionX, positionY)];

            // Add CCSprite into CCArray
            [appleArray addObject:Apple];
        }

        [self scheduleUpdate];
    }
    return self;
}

- (void) update: (ccTime) dt
{
    for (int i = 0; i < 5; i++) {

        CCSprite *Apple = ((CCSprite *)[appleArray objectAtIndex:i]);

        if (Apple.position.y > -250) {
            Apple.position = ccp(Apple.position.x, Apple.position.y - (Apple.tag*dt));
        }
    }
}

- (void) ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:[touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    for (CCSprite *Apple in self.appleArray)
    {
        if (CGRectContainsPoint(Apple.boundingBox, location))
        {
            Apple.visible = NO;
        }
    }
} 
```

# objective-c - 传值不影响Setter？

> ID：15278126
> 
> 赞同：-5
> 
> 时间：2013-03-07T17:45:48.553
> 
> 标签：objective-c, pass-by-value

看起来像这样的二传手：

```
- (void)setCount:(NSNumber *)newCount {
    [newCount retain];
    [_count release];
    // Make the new assignment.
    _count = newCount;
} 
```

如果我打电话`[self setCount:anNSNumber]`，效果会发生（`_count`将被释放，`anNSNumber`将被保留，......如你所知）。但我知道在 Obj-C 中按值传递是默认值。那么，为什么会这样呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:19:23.737

参数按值传递。在这种情况下，参数是一个指针。指针，而不是对象，是按值传递的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T18:23:55.827

您说 Objective-C 使用按值传递是正确的；它不仅是默认的，而且是唯一支持的参数传递机制。Objective-C++ 也支持 C++ 引用传递。

在您的表达式中，变量中的值`[self setCount:anNSNumber]`被*传递*`anNSNumber`给`setCount`. 但是，该值是type的*引用*`NSNumber *`，并且该引用可用于修改被引用的对象。

为参数传递的值用于初始化被调用者中的局部变量，您可以修改该变量中的值而不会对调用者产生任何影响 - 这是按值调用的定义。因此，例如，您可以添加到您的`setCount`：

```
newCount = [NSNumber numberWithInteger:42]; 
```

这对调用者没有影响。

# ios - writeToFile:atomically: 方法附加到当前存在的文件？

> ID：15278127
> 
> 赞同：1
> 
> 时间：2013-03-07T17:45:50.127
> 
> 标签：ios, objective-c, file, writetofile

只要方法调用发生在同一个应用程序运行时，似乎 writeToFile 方法就会附加到当前存在的文件路径。这是真的？

是否有任何其他方法可以确保在应用程序会话运行时附加到现有文件？我希望在新会话中覆盖该文件。

仅供参考，我使用 NSMutableDictionary 作为 writeToFile 消息的接收者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T17:54:18.077

为确保每个新会话都覆盖该文件，只需在新会话开始时删除该文件。

要附加到文件，您可以使用 an`NSOutputStream`来写入数据。打开文件进行追加。但是，如果您正在从 编写 plist 文件`NSDictionary`，那么这将不起作用。更好的解决方案是在应用程序启动时加载字典，在应用程序运行时将其更新到内存中，并在应用程序进入后台时将字典写入文件。这假设您的“会话”不是由应用程序启动（或后台/前台转换）定义的。

# r - 计算年份中的周数（0-53）

> ID：15278128
> 
> 赞同：14
> 
> 时间：2013-03-07T17:45:53.867
> 
> 标签：r, date-arithmetic, week-number

我有一个包含位置和日期的数据集。我想将一年中的星期计算为数字（00-53），但使用星期四作为一周的第一天。数据如下所示：

```
 location <- c(a,b,a,b,a,b)
  date <- c("04-01-2013","26-01-2013","03-02-2013","09-02-2013","20-02-2013","03-03-2013")
  mydf <- data.frame(location, date)
  mydf 
```

我知道有 strftime 函数用于计算一年中的一周，但只能使用星期一或星期日作为一周的第一天。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-07T17:59:14.833

只需将 4 添加到日期格式的值：

```
> mydf$Dt <- as.Date(mydf$date, format="%d-%m-%Y")
> weeknum <- as.numeric( format(mydf$Dt+3, "%U"))
> weeknum
[1] 1 4 5 6 7 9 
```

这使用了基于 0 的计数约定，因为这是 strftime 提供的，我们只是捎带了该代码库，因此从周二开始的一年中的第一个星期五（如 2013 年的情况）将是 1 周的结果。如果您想要一个基于 1 的约定，则将该值加 1。（从根本上说，日期格式的值是从“原点”开始的整数序列，因此它们不能真正识别年或周。添加 4 只会改变基础日期整数的参考框架。）

编辑注释。根据 Gabor 的建议更改为添加三个策略。....这仍然没有解决如何处理前一年最后一周的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:33:38.807

由于问题表明周从 00 到 53，我们假设周数是相关日期或之前一年中的星期四数。因此，一年中的第一个星期四从第 1 周开始，第 0 周被分配到之前的任何日子。

（有人评论说，如果一年中的第一天是星期二，那将是第 1 周，但如果是这种情况，则永远不可能有第 0 周，这似乎是该主题所要求的，因此请澄清一下week number 可能是必需的。这里我们将使用上一段中的定义，但是如果我们知道定义是什么就不会很难改变它。例如，如果我们总是希望一年中的第一周是 1，即使是很短的一周，我们也可以添加`!is.thu(jan1(d))`到结果中。）

以下两种解决方案都足够短，可以用一个语句来表达；但是，为了清楚起见，我们将它们分解为几个简短的函数。第一个特别简单，但第二个是自动矢量化的，不需要 a`sapply`并且可能更有效。

**1\. sum Thursdays in year** 这个解决方案假设输入`d`是类的`"Date"`，并且只是将前一年或上一年的星期四数相加：

```
is.thu <- function(x) weekdays(x) == "Thursday"
jan1 <- function(x) as.Date(cut(x, "year"))

week4 <- function(d) {
  sapply(d, function(d) sum(is.thu(seq(jan1(d), d, by = "day"))))
} 
```

我们可以这样测试：

```
d <- as.Date(c("2013-01-04", "2013-01-26", "2013-02-03", "2013-02-09", 
    "2013-02-20", "2013-03-03"))
week4(d) # 1 4 5 6 7 9 
```

**2.下周四**

根据[zoo quickref vignette](http://cran.r-project.org/web/packages/zoo/vignettes/zoo-quickref.pdf)`nextfri`中的函数，我们看到自下一个星期四（或相关日期，如果它已经是星期四）的 Epoch (1970-01-01) 以来的天数如第一行所示以下。将此应用于一年的第一天，我们得出的结果与以前一样：`nextthu``d`

```
nextthu <- function(d) 7 * ceiling(as.numeric(d) / 7)

week4a <- function(d) (as.numeric(d) - nextthu(jan1(d))) %/% 7 + 1 
```

这是一个测试

```
week4a(d) # 1 4 5 6 7 9 
```

添加：修复了第二个解决方案中的错误。

# ruby - 如何配置 ruby 以在 Ctrl-C (SIGINT) 上进入调试器？

> ID：15278134
> 
> 赞同：3
> 
> 时间：2013-03-07T17:46:22.260
> 
> 标签：ruby, debugging, signals, sigint

我想在输入 ctrl-C（或发送 SIGINT）时进入调试器。我已经[安装了调试器](https://github.com/cldwalker/debugger)（我正在运行 Ruby 1.9.3）并验证它可以工作。我已将此添加到我的设置文件中（这是用于 Padrino，但我认为它与 Rails 类似）：

```
# file: config/boot.rb
Padrino.before_load do
  trap("SIGINT") { debugger } if Padrino.env == :development
end 
```

...但键入 Ctrl-C 不会调用调试器。事实上，如果我替换`debugger`为`puts "saw an interrupt!"`，键入 Ctrl-C 也不会导致打印发生。

### 更新

按照[Mike Dunlavey的](https://stackoverflow.com/users/23771/mike-dunlavey)[建议](http://programming-gone-awry.blogspot.com/2007/06/ruby-debug-ctrl-c.html)，我尝试从调试器中显式调用：`catch Interrupt`

```
$ rdebug `which padrino` console
^Z^Z$HOME/usr/bin/padrino:9
require 'rubygems'
(rdb:1) catch Interrupt
Catch exception Interrupt.
(rdb:1) c
=> Loading development console (Padrino v.0.10.7)
=> Loading Application BlueDotAe
=> Loading Application Admin
irb(main):001:0>   C-c C-c^C
irb(main):001:0> 
```

不高兴——中断没有进入调试器。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:21:40.990

如果您想在控制台中运行时捕获 SIGINT，简短的回答是：除非您对 IRB 进行猴子补丁，否则您不能。每个使用控制台的 Ruby 应用程序（无论是 padrino、rails 还是诸如此类）最终都会调用`usr/lib/ruby/1.9.1/irb.rb`，并且在 中`IRB.start`，它会：

```
trap("SIGINT") do
  irb.signal_handle
end 
```

...就在进入主循环之前。这将覆盖您可能在启动代码中放入的任何陷阱（“SIGINT”）。

但是，如果您想在脚本文件中捕获 SIGINT（例如，如果您想按照[Mike Dunlavey 在此处描述的](https://stackoverflow.com/a/4092705/558639)那样分析您的代码），您可以创建一个脚本文件，例如：

```
# File: profile_complex_operation.rb
trap("SIGINT") { debugger }
MyApp.complex_operation 
```

然后调用它，如下所示：

```
$ ruby profile_complex_operation.rb 
```

现在，当您点击 ^C（或从另一个进程发送 SIGINT）时，它将进入调试器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-01T18:16:27.030

您可以尝试使用[Ruby 的 GDB 包装器](http://weblog.jamisbuck.org/2006/9/25/gdb-wrapper-for-ruby)（[GitHub](https://github.com/tmm1/gdb.rb)）。

通过以下方式在 Linux 上安装：

```
sudo apt-get install gdb python-dev ncurses-dev ruby-rvm
gem install gdb.rb 
```

基本用法：

```
require 'gdb'

# create a new GDB::Ruby instance and attach it to
# pid 12345
gdb = GDB::Ruby.new(12345)

# print the (ruby) backtrace of the remote process
gdb.backtrace.each { |line| puts line }

# show the current local variables, and their values
p gdb.local_variables

# evaluate arbitrary ruby code in the remote process
p gdb.eval('%(pid #{$$})')

# show how many instances of each class exist in the
# remote process
p gdb.object_space

# raise an exception in the remote process
gdb.raise Exception, "go boom!"

# close the connection to the remote process
gdb.quit 
```

或者要调试挂起的进程，请通过以下方式附加它：

```
rvmsudo gdb.rb PID 
```

然后：

```
# in gdb get a ruby stacktrace with file names and line numbers
# here I'm filtering by files that are actually in my app dir
(gdb) ruby eval caller.select{|l| l =~ /app\//} 
```

资料来源：[使用 gdb 检查挂起的 ruby​​ 进程](http://kueda.net/blog/2013/01/31/using-gdb-to-inspect-a-hung-ruby-process/)

一些替代方案：

*   [rbtrace](https://github.com/tmm1/rbtrace) - 类似于 strace，但用于 ruby​​ 代码（用法：） `rbtrace -p <PID> --firehose`。
*   [tmm1](https://gist.github.com/tmm1/209839)（gdb.rb 的作者）的 debug.rb 脚本，它可以帮助使用 strace/gdb 调试进程。

也可以看看：

*   [调试 Ruby 工具](https://www.bignerdranch.com/blog/debugging-ruby-tools/)
*   [检查 ruby​​ 脚本挂起的原因](https://stackoverflow.com/q/13406370/55075)

# sql - 选择随机行并在达到特定总和/总数时停止

> ID：15278143
> 
> 赞同：2
> 
> 时间：2013-03-07T17:46:44.157
> 
> 标签：sql, sql-server, sql-server-2012

我正在使用 SQL Server 2012，并且正在尝试执行以下操作：

```
SELECT SUM(MILES) from tblName WHERE 
mDate > = '03/01/2012' and 
mDate <= '03/31/2012' 
-- and...
/* 
   now I want to add here do until the SUM of Miles 
   is equal to or greater then '3250' and get the 
   results rows randomly
*/ 
```

所以换句话说，我想从一个表中选择具有指定从和到日期的随机行，并在里程总和等于或超过该数字时停止：3250

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T18:21:11.373

由于您使用的是 SQL Server 2012，因此这是一种更简单的方法，不需要循环。

```
DECLARE @tbl TABLE(mDate DATE, Miles INT)

INSERT @tbl VALUES
('20120201', 520),  ('20120312', 620),
('20120313', 720),  ('20120314', 560),
('20120315', 380),  ('20120316', 990),
('20120317', 1020), ('20120412', 520);

;WITH x AS 
(
 SELECT 
   mDate, 
   Miles, 
   s = SUM(Miles) OVER 
   (
     ORDER BY NEWID() ROWS UNBOUNDED PRECEDING
   )
 FROM @tbl
 WHERE mDate >= '20120301' 
 AND mDate < '20120401'
)
SELECT 
  mDate, 
  Miles, 
  s
FROM x 
WHERE s <= 3250
ORDER BY s; 
```

[SQLfiddle 演示](http://sqlfiddle.com/#!6/a41eb/1)- 多次点击“运行 SQL”以查看随机结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T18:03:28.637

你可以做得到`SELECT TOP x ... ORDER BY newid()`随机行的总和。问题在于确定“x”。您甚至无法确定 'x' 的最大值（与查询匹配的行数）的总和是否足以满足您的要求，而无需先进行测试：

```
DECLARE @stopAt int
DECLARE @x int
DECLARE @result int

SET @stopAt = 3250
SET @x = 1

SELECT @result = SUM(MILES) from tblName 
WHERE 
  mDate >= '03/01/2012' and 
  mDate <= '03/31/2012'

IF (@result < @stopAt)
  SELECT NULL -- this can't be done
ELSE
  BEGIN
    WHILE (1=1)
    BEGIN
      SELECT TOP (@x) @result = SUM(MILES) FROM tblName
      WHERE 
        mDate >= '03/01/2012' and 
        mDate <= '03/31/2012'
      ORDER BY newid()
      IF @result >= @stopAt
        BREAK
      SET @x = @x + 1
    END
    SELECT @result
  END 
```

只是关于这一点的说明 - 算法从 1 开始并递增，直到找到合适的匹配。一种更有效的方法（对于更大的数据集）可能包括二进制类型搜索，该搜索缓存最低的合​​适结果并在找到最深的节点（或精确匹配）时返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T17:50:34.140

只是一个示例代码，您可以理解这个概念。

```
create table temp(intt int)
insert into temp values(1)
insert into temp values(2)
insert into temp values(3)
insert into temp values(4)
insert into temp values(5)
insert into temp values(6)
insert into temp values(7)
insert into temp values(8)
insert into temp values(9)
insert into temp values(10)
insert into temp values(11)
insert into temp values(12)
insert into temp values(13)
insert into temp values(14)
insert into temp values(15)
insert into temp values(16)
insert into temp values(17)
insert into temp values(18)
insert into temp values(19)
insert into temp values(20)
insert into temp values(21)

declare @sum int = 0;
declare @prevInt int = 0;
while(@sum<50)
begin
set @prevInt = (select top(1) intt from temp order by newid());
set @sum = @sum + @prevInt;
end
set @sum = @sum-@prevInt;
select @sum
drop table temp 
```

这种方法的原因是分页不会返回广泛分布的结果，除非并且直到您有数千条记录，因为在其中数据被分组到页面中并且记录较少，相同的页面被多次点击给出相同的结果。

此外，在某些情况下，可能会点击空白页，结果为 0。（我不知道为什么有时会点击空白页。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T18:00:55.857

我想不出没有 TSQL While... 循环的方法。这与使用 ROW_NUMBER() 的 TSQL 分页相结合应该可以帮助您。

[http://www.mssqltips.com/sqlservertip/1175/page-through-sql-server-results-with-the-rownumber-function/](http://www.mssqltips.com/sqlservertip/1175/page-through-sql-server-results-with-the-rownumber-function/)

在 ROW_NUMBER 查询中，将 Miles 相加到另一个 MileSum 列中，然后在 while 循环中选择集合与 ROW_NUMBER 查询对应的所有行，同时将这些 MileSum 值累积到一个变量中。当变量超过 3250 时终止。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T18:02:23.607

尝试

```
SELECT MILES
     , RANK() OVER (ORDER BY NEWID()) yourRank
FROM @tblName 
WHERE miles>3250
  AND mDate >= '03/01/2012' 
  AND mDate <= '03/31/2012'
ORDER BY yourRank 
```

然后你可以添加一个 TOP 5 或任何你想要的。您肯定会以随机顺序获得它们。

# bash - 关联数组的“.keys()”

> ID：15278146
> 
> 赞同：5
> 
> 时间：2013-03-07T17:47:02.410
> 
> 标签：bash

在 Bash (v4+) 中：

```
$ declare -A x=([foo]=bar [coconut]=banana)
$ echo ${x[@]} 
```

给出：

```
banana bar 
```

我可以输入什么来得到这个：

```
foo coconut 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T18:00:54.097

您可以先`x`使用`echo ${x[@]}`a`!`来获取密钥：

```
echo ${!x[@]} 
```

有关关联数组的更多信息：[http ://www.artificialworlds.net/blog/2012/10/17/bash-associative-array-examples/](http://www.artificialworlds.net/blog/2012/10/17/bash-associative-array-examples/)

# python - 在 Python 中获取窗口标题 - 很难吗？

> ID：15278156
> 
> 赞同：0
> 
> 时间：2013-03-07T17:47:40.417
> 
> 标签：python, linux, x11

我想在 Python 中每 X 秒检查一次窗口标题 - 到目前为止没有什么大问题，我发现了很多像 xprop 这样的东西。
现在这是棘手的部分：当使用 xprop -id [id] 而不是指针时，我只得到 2 或 3 行

```
_KDE_NET_WM_USER_CREATION_TIME(CARDINAL) = 24625202
SM_CLIENT_ID(STRING) = "1028c1d320b210000136266856800000015460035"
WM_CLIENT_LEADER(WINDOW): window id # 0x3a00004 
```

这不是我在其他地方看到的，也不是我需要的——那么我怎样才能得到那个标题呢？这是一些错误配置还是我对所有事情都大错特错？

PS：我正在使用 Fedora 18 顺便说一句

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:27:10.537

*只要您在两种情况下都选择相同的窗口，您*`-id`就可以通过鼠标单击获得相同的属性集。要获取窗口 ID，请使用并单击窗口。*`xwininfo`*

 *您获得的一小部分属性可能仅仅是因为列表很大并且包含许多空白行。尝试向上滚动终端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:46:32.213

使用时，`xprop -name somewindowname ...`您将获得所有信息。但是，如果`somewindowname`是您要查找的内容，则该表格可能没有用。

另一种方法，假设窗口 id 是一个十六进制数（例如，0x04a27cf6）是使用`wmctrl -l`和 grep 的数字。例如，在我的机器（tini）上，窗口 0x04a27cf6 标题为“xprop 手册页”，

```
wmctrl  -l | grep 0x04a27cf6 
```

生产

```
0x04a27cf6  4 tini xprop man page 
```

请注意，“wmctrl 是一个 UNIX/Linux 命令行工具，用于与兼容 EWMH/NetWM 的 X 窗口管理器进行交互”，如[tomas.styblo.name](http://tomas.styblo.name/wmctrl/)和[wikipedia](http://en.wikipedia.org/wiki/Wmctrl)中所述。几个 linux 发行版的包管理器可以安装它。

*编辑：*`xprop`阅读 nm 的答案后，我进行了更多测试。在昨天的测试中，`xprop -id 0x4a27cf7`只输出一行，`_NET_WM_USER_TIME(CARDINAL) = 440569797`. 这不是“向上滚动终端”的问题。不幸的是，我没有可用的窗口 0x4a27cf7 了，现在所有类似的测试似乎都可以正常工作，如 nm 的回答所示。例如，在命令之后

```
for i in $(wmctrl -l |tee w-wmctrl | cut -c-10); do xprop -id $i | grep ^WM_NAME; done > w-xprop 
```

文件`w-wmctrl`，`w-xprop`每个文件都有 39 行，通过并排比较`diff -y w-*|less`无一例外地显示两个文件中的名称相同。*

# crystal-reports - 如何在 vb.net 的水晶报表中显示数据

> ID：15278161
> 
> 赞同：0
> 
> 时间：2013-03-07T17:47:51.710
> 
> 标签：crystal-reports, crystal-reports-2008

我正在 vb.net 中创建一个应用程序，我在显示多行时遇到问题，它显示两行数据之间的空间太大。请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:53:47.787

看看这个 (Marcoratti) 网站：
[1.VB NET+Cristal](http://www.macoratti.net/vbn_crpt.htm)
[2.VB NET+Cristal](http://www.macoratti.net/vbn3_cr1.htm)

# android - 从一个活动移动到另一个活动时如何在android中显示进度条

> ID：15278164
> 
> 赞同：2
> 
> 时间：2013-03-07T17:48:02.023
> 
> 标签：android

我是 android 编程的新手，我需要获取用户的联系人并在其他活动中显示所有联系人。我已经完成了所有主要功能，但有一个要求是我想在获取正在进行时显示进度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:55:07.830

我在我的应用程序中使用以下代码（取自[这个答案](https://stackoverflow.com/a/8133278/1393623)）来做你想做的事情，它对我来说就像一个魅力。

```
mButton.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
        new AsyncTask<Integer, Long, Boolean>()
        {
            ProgressDialog mProgressDialog;
            @Override
            protected Boolean doInBackground(Integer... params)
            {
                mProgressDialog = new ProgressDialog(MyActivity.this);
                mProgressDialog.setMax(params[0]);
                mProgressDialog.setIndeterminate(false);
                mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
                publishProgress(0L);

                long startTime = System.currentTimeMillis();
                long waitTime = params[0] * 1000;
                try
                {
                    while (System.currentTimeMillis() - startTime < waitTime)
                    {
                        Thread.sleep(500);
                        publishProgress(System.currentTimeMillis() - startTime);
                    }
                }
                catch (Exception e)
                {
                    return false;
                }
                return true;
            }

            @Override
            protected void onProgressUpdate(Long... values)
            {
                if (values[0] == 0)
                {
                    mProgressDialog.show();
                }
                else
                {
                    mProgressDialog.setProgress((int) (values[0] / 1000));
                }
            }

            @Override
            protected void onPostExecute(Boolean result)
            {
                mProgressDialog.dismiss();
                Intent i = new Intent(context, NewActivity.class);
                startActivityForResult(i, 0);
            }
        }.execute(5);
    }); 
```

# xml - 具有节点值的 XSLT 参数名称

> ID：15278170
> 
> 赞同：0
> 
> 时间：2013-03-07T17:48:16.243
> 
> 标签：xml, xslt, xslt-1.0, param

XML:

```
<root>
 <param name="a">valueOfA</param>
 <param name="b">valueOfB</param>
 <param name="c">valueOfC</param>    
</root> 
```

我需要为`param`xml 中的每个参数节点创建。

所以预期的结果：

```
<xsl:param name="a" select="valueOfA" />
<xsl:param name="b" select="valueOfB" />
<xsl:param name="c" select="valueOfC" /> 
```

〜**编辑：**

犯了一个错误，我需要一个实际的 xslt 参数，所以以后可以在代码中使用它。固定在上面。

〜**编辑：**

需要 XSLT 1.0

〜**编辑：**

主要问题是从 xml 值中命名 xsl:param 如下是无效的：

```
<xsl:param name="{@name}" /> 
```

或变数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:14:59.550

从您的编辑看来，您正在寻找一种使用 XSLT 创建另一个 XSLT 的方法。为了在`xsl:`命名空间中创建元素，您需要使用`<xsl:element>`或使用命名空间别名工具

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
     xmlns:xslo="urn:xsl-output" exclude-result-prefixes="xslo">
  <xsl:namespace-alias stylesheet-prefix="xslo" result-prefix="xsl" />

  <xsl:template match="root">
    <xslo:stylesheet version="1.0">
      <xsl:apply-templates select="param" />
    </xslo:stylesheet>
  </xsl:template>

  <xsl:template match="param">
    <xslo:param name="{@name}" select="{.}" />
  </xsl:template>
</xsl:stylesheet> 
```

`xslo:`样式表中带有前缀的元素会`xsl:`出现在输出文档中（它本身就是另一个样式表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:51:54.733

```
<xsl:template match="root">
  <xsl:copy>
    <xsl:apply-templates select="param"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="param">
  <param name="{ ./@name }" select="{ string(.) }"></param>
</xsl:template> 
```

# ssl - 不安全资源警告

> ID：15278171
> 
> 赞同：0
> 
> 时间：2013-03-07T17:48:18.753
> 
> 标签：ssl, https

我通过 https 加载了所有资源，但 chrome 仍然表示它加载了不安全的数据：

> 您与域名的连接使用 256 位加密进行加密。但是，此页面包含其他不安全的资源。

在firefox中试了一下。那里也一样。在 Google Developers Tool 中，在 Network 选项卡下，所有资源似乎都已安全加载。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:04:59.213

我重新启动浏览器后它工作了。它一定缓存了一些东西。

# kendo-ui - Kendo Grid 发送额外参数

> ID：15278176
> 
> 赞同：2
> 
> 时间：2013-03-07T17:48:44.190
> 
> 标签：kendo-ui

如何在我的 GRID POST 上发送额外参数。

这是我的传输配置：

```
transport: {
     read: {
     dataType: "json",
     url: "/user/list",
     type: "POST"
     }
} 
```

我需要发送一个动态的额外信息（特别是过滤器 XD）。我将在网格上的任何提交之前设置一个脚本变量。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T18:24:07.653

问题在互联网上多次讨论。您应该使用[数据](http://docs.kendoui.com/api/framework/datasource#configuration-transport.read.data)功能。[这里](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/faq#how-do-i-send-values-to-my-action-method-when-binding-the-grid?)有更多信息。您也可以将参数直接传递给 dataSource 的**read**方法。

```
 $('#myGrid').data().kendoGrid.dataSource.read({foo:42}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-07T08:30:14.513

**您可以使用Data("addParameter")**添加额外的参数

 **```
@(Html.Kendo().Grid<Project.Models.UserModel>()
.Name("grid")
.Columns(columns =>
{
    columns.Bound(item => item.UserId).Title("UserId").Width(100);
    columns.Bound(item => item.UserName).Title("UserName").Width(200);
})
.Sortable()
.DataSource(dataSource => dataSource
.Ajax()
.PageSize(5)
.Read(read => read.Action("list", "user").Data("addParameter"))
)

<script>
function addParameter()
    {
        return {
            UserId: 10 //Your value here
        };
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-19T05:24:34.527

这是向 AJAX 调用发送参数以及记录请求和响应的另一种方法。

```
 read: function (options) {

            var jsonData = {
                "ID":          $('#ID').val(),         
                "ObjectType":  $('#dropObjectType :selected').val()
            };
            console.log("REQ: " + JSON.stringify(jsonData));

            $.ajax({
                type: "POST",
                url: "/api/internal/SomeService",
                data: jsonData,
                success: function (result) {
                    console.log("RES: " + JSON.parse(JSON.stringify(result))); 
```

`jsonData`您也可以通过这种方式发送上述内容：

```
$("#grid").data("kendoGrid").dataSource.read(jsonData); 
```

并将其分配给`data:`（并记录）：

```
read: function (options) {

        console.log("REQ: " + JSON.stringify(options.data));

        $.ajax({
            type: "POST",
            url: "/api/internal/SomeService",
            data: options.data, 
```**

# android - 果冻豆应用程序在电话中被杀死

> ID：15278177
> 
> 赞同：0
> 
> 时间：2013-03-07T17:48:45.690
> 
> 标签：android, crash

我们的应用程序在果冻豆手机（不是所有手机）上崩溃，我们完全一无所知。可以通过打电话重复，logcat 中没有任何内容（我们的代码中没有异常或 jni 崩溃）只是：

```
03-07 13:07:33.506: I/WindowState(1660): WIN DEATH: Window{4115b0c0 com.mapfactor.navigator/com.mapfactor.navigator.map.MapActivity paused=false}
03-07 13:07:33.506: W/InputDispatcher(1660): channel '4115b0c0 com.mapfactor.navigator/com.mapfactor.navigator.map.MapActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x9
03-07 13:07:33.506: I/ActivityManager(1660): Process com.mapfactor.navigator (pid 3248) has died.
03-07 13:07:33.506: E/InputDispatcher(1660): channel '4115b0c0 com.mapfactor.navigator/com.mapfactor.navigator.map.MapActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
03-07 13:07:33.506: W/InputDispatcher(1660): Attempted to unregister already unregistered input channel '4115b0c0 com.mapfactor.navigator/com.mapfactor.navigator.map.MapActivity (server)'
03-07 13:07:33.506: W/WindowManager(1660): Force-removing child win Window{40f34610 SurfaceView paused=false} from container Window{4115b0c0 com.mapfactor.navigator/com.mapfactor.navigator.map.MapActivity paused=false}
03-07 13:07:33.506: I/LocationManagerService(1660): remove gps (pid 1660), disabled
03-07 13:07:33.506: I/LocationManagerService(1660): remove network (pid 1660), next minTime = 86400000
03-07 13:07:33.506: W/GpsLocationProvider(1660): Unneeded remove listener for uid 1000
...
03-07 13:07:33.506: W/WindowManager(1660): Failed looking up window
03-07 13:07:33.506: W/WindowManager(1660): java.lang.IllegalArgumentException: Requested window android.os.BinderProxy@40e2e780 does not exist
03-07 13:07:33.506: W/WindowManager(1660):  at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7675)
03-07 13:07:33.506: W/WindowManager(1660):  at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7666)
03-07 13:07:33.506: W/WindowManager(1660):  at com.android.server.wm.WindowState$DeathRecipient.binderDied(WindowState.java:854)
03-07 13:07:33.506: W/WindowManager(1660):  at android.os.BinderProxy.sendDeathNotice(Binder.java:449)
03-07 13:07:33.506: W/WindowManager(1660):  at dalvik.system.NativeStart.run(Native Method)
03-07 13:07:33.506: I/WindowState(1660): WIN DEATH: null
03-07 13:07:33.506: I/WindowManager(1660): WINDOW DIED Window{4115b0c0 com.mapfactor.navigator/com.mapfactor.navigator.map.MapActivity paused=false} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:51:11.813

Just an idea: Have you disabled `"Don't keep activities", "Destroy every activity as soon as the user leaves it"` in your *Settings > Developer Options* screen?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:01:20.960

# 记不清

可能，但不太可能查看您的 logcat。

只是把这个建议抛在空中：基于第一条线，你不是停止消耗像 GPS 这样的昂贵资源吗？你的暂停代码有什么奇怪的吗？

# IO错误

因此，基于此处的第 2 行和第 5 行，这似乎是一个 IOError （不确定为什么没有引发 IOException）。

# c++ - 为什么这个数学不起作用？

> ID：15278185
> 
> 赞同：-1
> 
> 时间：2013-03-07T17:49:08.617
> 
> 标签：c++, visual-studio

我正在尝试运行一个循环 1 + 1/3 + 1/5 - 1/7 + 1/9 ....等等

但它一直显示为 1！

我试过了

```
double answer = 1 + 1/3 + 1/5 - 1/7 + 1/9 - 1/11;
displays 1 
```

数学很奇怪，就像我什至搞砸并尝试过

```
double answer = 1 / 5; //should display 0.2
displays 0!!!!!!!! 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T17:50:25.347

您正在使用整数数学。

两个整数之间的运算结果将是一个整数，向 0 舍入。

所以你的代码变成：

```
double answer = 1 + 0 + 0 - 0 + 0 - 0; 
```

试试这个。

```
double answer = 1.0 + 1.0/3.0 + 1.0/5.0 - 1.0/7.0 + 1.0/9.0 - 1.0/11.0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T17:50:54.830

因为您使用的是整数文字。试试这个：

```
double answer = 1 + 1/3.0 + 1/5.0 - 1/7.0 + 1/9.0 - 1/11.0; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T17:50:31.467

在 C++ 中，当您将一个整数除以另一个时，您会得到一个整数。因此，`1/3`等于`0`。

尝试：

```
double answer = 1 + 1/3.0 + 1/5.0 - 1/7.0 + 1/9.0 - 1/11.0; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T17:51:12.203

该操作对整数常量起作用，然后将结果**转换**为双精度。您应该如下定义常量：

```
double answer = 1.0 + 1.0/3.0 + 1.0/5.0 - 1.0/7.0 + 1.0/9.0 - 1.0/11.0; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-07T17:51:37.230

尝试 1.0/3.0 等。

否则，每个子表达式将计算为 0，因为它们被解释为整数。

# javascript - text/x-handlebars 永远不会出现

> ID：15278186
> 
> 赞同：0
> 
> 时间：2013-03-07T17:49:10.163
> 
> 标签：javascript, html, ember.js, handlebars.js

我正在尝试开发我的第一个应用程序，但无法让浏览器显示我的车把脚本

这是我的html：

```
<!doctype html>
<html>
<head>
        <title>Random Presents</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="style.css">
        <script src="lib/jquery.min.js"></script>
        <script src="lib/handlebars.js"> </script>
        <script src="lib/ember.js"></script>
        <script src ="js/app.js"></script>
</head>

<body>
    <script type="text/x-handlebars">
    {{#view App.AView}}{{firstName}}{{/view}}
</script>
<script type="text/x-handlebars">
    {{#view App.AView}}{{surname}}{{/view}}
</script>
</body>
</html> 
```

和我的 app.js 文件：

```
App = Ember.Application.create();

App.AView = Ember.View.extend({
    tagName: 'span',
    firstName: 'Joe',
    surname: 'Bloggs'
}); 
```

当我加载文件时；该页面是空的，即使源对应于我的 html 文件。我在 chrome javascript 控制台中看不到任何错误。

有什么我想念的东西真的很明显吗？我测试了这些库，它们直接来自网站并且是最新版本。

更糟糕的是，我什至尝试使用仅包含 html 的脚本，但他也不会加载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:58:52.027

因为您在类中创建了属性，所以在某些情况下`View`您应该使用`view`类似于关键字的指针的属性。`this`

将您的模板更改为：

```
<script type="text/x-handlebars">
    {{#view App.AView}}
        {{view.firstName}}
        {{view.surname}}
    {{/view}}
</script> 
```

由于 Ember 约定，您的代码中的两个把手模板代表相同的东西。当没有名称时，Ember 假定模板名称为“应用程序”。这意味着即使您将属性固定`{{view.propertyName}}`在两个模板上，后者也会覆盖第一个（或所有具有相同名称的前任），因为 Ember 会将模板（带有 Handlebars）编译成模板函数，并且名称将是用作模板集合（路径`Ember.TEMPLATES`）的键，这就是为什么您要将这些表达式移动到单个模板中，就像上面的代码一样。

但是你应该避免使用这样的视图。

视图应该显示数据，但不应该保留数据。您的数据应该存在于模型中（在商店中），并且视图应该向控制器询问数据，并且应该从疼痛中获取数据。控制器应该通过路由器从存储中填充数据（它知道做什么和什么时候做）。

我一点也没有说不好。因为您从 Ember 开始，所以只是想避免您在街道的错误一侧开车。

众所周知，有很多过时的教程，这有时会引起很多混乱（有一个包含过时教程/文章的[仓库](https://github.com/trek/ember-outdated-articles)，应该接收更新或添加免责声明的通知）。但总的来说，我建议您遵循[指南](http://emberjs.com/guides/)，观看一些[有关 Ember 的视频](http://www.youtube.com/watch?v=_6yMxU-_ARs&list=PLLUBPLc28H8c8ihVHkYeRHe8OiB8P5WL0)，查看互联网上的[其他](http://emberwatch.com/) [可用](https://www.google.ca/search?q=ember+js+tutorial)[资源。](http://www.toranbillups.com/blog/)

这是一个非常基本的[示例应用程序](http://jsfiddle.net/schawaska/mbuEL/)的注释代码，只是为了展示您可以并且应该使用的一些功能：

**车把**：

```
<!-- 
    when a template doesn't have a data-template-name, Ember assumes this is the 
    application main template. This is usually where you'd render the layout structure
    and also where you'd put the main outlet
-->
<script type="text/x-handlebars">
    <h1>Example</h1>
    {{outlet}}
</script>

<!-- 
    As per convention, a named template should match with its route name
    There are ways around using "partial", "render", or even defining 
    a View class and setting the templateName property to a different name, or
    using the route's renderTemplate hook

    Another thing. You can have nested views when using nested routes
    This view template has another outlet to display a person from the collection
-->
<script type="text/x-handlebars" data-template-name="people">
    {{#each person in controller}}
        {{#linkTo people.person person}}
            {{person.fullName}}
        {{/linkTo}}<br />
    {{/each}}
    <hr />
    {{outlet}}
</script>

<!-- 
    Unlike the very first code piece in this answer, when you have a view or 
    template connected to a controller, you can access the data from the controller
    using handlebars expressions.
-->
<script type="text/x-handlebars" data-template-name="people/person">
    First name: {{view Ember.TextField valueBinding="firstName"}}<br />
    Last name: {{view Ember.TextField valueBinding="lastName"}}<br />
    Full Name: {{fullName}}    
</script> 
```

**JavaScript**：

```
window.App = Ember.Application.create();

// defining routes which are somewhat like states (think of a state machine)
// they also provide the ability to have hash urls
// the router is a very important piece of ember due to conventions
App.Router.map(function() {
    // sample url ~/#/people
    this.resource('people', function() {
        // sample url ~/#/people/1
        this.route('person', { path: ':person_id' });
    });    
});

// In this route we provide the data to the list view in "people" template
// the data will actually go to the controller 'content' property which can 
// be a type of array for arraycontroller or a single object for object controller
// this should allow the view to call data from the controller 
App.PeopleRoute = Em.Route.extend({
    model: function() {
        return App.Person.find()
    }
});

// in this route we provide data for the "people/person" template
// In this case we are using the person id from the parameters to query our
// application store.
App.PeoplePersonRoute = Em.Route.extend({
    model: function(params) {
        return App.Person.find(params.person_id)
    }
});

// This is the very first route of the application
// Most of the time, you'll simply redirect from your index to a resource
// in this example, from ~/#/ to ~/#/people
App.IndexRoute = Em.Route.extend({
    redirect: function() {
        this.transitionTo('people');
    }
});

// The store manages your application data. Normally you only have to define
// the revision since it's not 1.0 yet (https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md)
// for this sample, I'm using the Fixture Adapter so I can add mock up data to the 
// app while testing/coding front end
App.Store = DS.Store.extend({
    revision: 11,
    adapter: 'DS.FixtureAdapter'
});

// Using Ember-Data, you can define a Model object which uses application
// semantics to describe your data, and does many operations which you'd 
// normally expect to see in a ORM. Ember-Data is no ORM, but it gets pretty close
// and in certain scenarios it goes beyond
App.Person = DS.Model.extend({
    firstName: DS.attr('string'),
    lastName: DS.attr('string'),
    fullName: function() {
        return '%@ %@'.fmt(
            this.get('firstName'),
            this.get('lastName')
        );
    }.property('firstName', 'lastName')
});

// Using the FixtureAdapter you can add mockup data to your data store
App.Person.FIXTURES = [
    {id: 1, firstName: 'Joe', lastName: 'Bloggs'},
    {id: 2, firstName: 'Other', lastName: 'Dude'}
];

// when your controller wants to handle a collection, use ArrayController
App.PeopleController = Em.ArrayController.extend();
// when it handles a single object, use ObjectController
App.PeoplePersonController = Em.ObjectController.extend(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T18:14:34.100

在模板中，默认上下文是控制器，因此您需要显式引用视图以访问其属性：`{{view.property}}`

在您的示例中：

```
{{#view App.AView}}{{view.surname}}{{/view}} 
```

[工作示例 JSBin](http://jsbin.com/ixupad/165/edit)

# asp.net-mvc - 防止访问 MVC 4 中的路由

> ID：15278188
> 
> 赞同：1
> 
> 时间：2013-03-07T17:49:15.127
> 
> 标签：asp.net-mvc, security, asp.net-mvc-4, asp.net-mvc-routing

在我的 MVC 应用程序中，我拥有`Player`和`Coach`对象，用户可以是其中之一。我也有`Team`对象，我想知道的是我如何防止在列表中的用户或`Players`正在访问路由的用户，例如除了他/她所属的团队之外，团队的 ID在哪里. `Coach``Team``/Teams/Details/2``2`

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:52:59.613

由于您想限制他们不属于的 id，这似乎是您可以从 继承`AuthorizeAttribute`并提供您的实现的情况`AuthorizeCore`

您的实施可以检查他们的角色/团队 ID 并决定做什么/重定向。

```
public class TeamAuthorize : AuthorizeAttribute
{

  protected override bool AuthorizeCore(HttpContextBase httpContext)
  {
    return UserIsInTeam(httpContext); //whatever code you are using to check if the team id is right      

  }

} 
```

您现在可以像应用任何其他属性一样应用它。

```
[TeamAuthorize] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:06:27.467

最简单的解决方案是将 URL 从使用 ID 更改为随机 GUID。您几乎可以消除有人猜测另一个有效值的机会。当然，这在定义上并不安全（主要是因为有人可以从历史记录或其他来源获取其他 URL），但在某些情况下这已经足够了。

更好的解决方案是基于`IActionFilter`实现方法的接口创建一个新属性，并使用and`OnActionExecuting`来检查 ID 。然后，您将将此属性应用于您的控制器方法。`this.ControllerContext.HttpContext.User.Identity.Name``this.RouteData.Values["id"]`

在我们当前的系统中，我们在控制器方法中实现了行级安全性，只需将验证用户权限的代码添加为每个方法的第一行。检查代码与属性相同，并且需要添加相同数量的代码。这种方法还有一个额外的好处 - 更容易实现这样的场景，例如教练可以查看其他团队的详细信息但不能修改它们（我们有一个操作和视图用于读取和更新，具体取决于权限）。

如果您需要去数据库检查权限，并且您正在使用 IoC 框架（例如 Ninject）和基于构造函数的注入，您也可以使用最后一种方法 - 因为您将无法访问属性中的这些值。

# c - C中的浅拷贝和深拷贝

> ID：15278194
> 
> 赞同：16
> 
> 时间：2013-03-07T17:49:31.493
> 
> 标签：c, deep-copy, shallow-copy

我尝试用谷歌搜索，但只有面向对象的语言作为结果弹出。

据我了解，浅拷贝是复制结构的某些成员。

所以让我们说一个结构是

```
typedef struct node
{
    char **ok;
    int hi;
    int yep;
    struct node *next;
}node_t 
```

复制 char** 将是一个浅拷贝

但是复制整个链表会是深拷贝吗？

我有正确的想法还是我离题了？谢谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-07T17:57:18.177

不。在这个特定的上下文中，浅拷贝意味着您将“引用”（指针等）复制到对象，并且这些引用或指针的后备存储是相同的，它是相同内存位置的相同对象。

相反，深拷贝意味着您复制整个对象（结构）。如果它具有可以浅拷贝或深拷贝的成员，您还可以对它们进行深层拷贝。考虑以下示例：

```
typedef struct {
    char *name;
    int value;
} Node;

Node n1, n2, n3;

char name[] = "This is the name";

n1 = (Node){ name, 1337 };
n2 = n1; // Shallow copy, n2.name points to the same string as n1.name

n3.value = n1.value;
n3.name = strdup(n1.name); // Deep copy - n3.name is identical to n1.name regarding
                           // its *contents* only, but it's not anymore the same pointer 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-08T13:22:21.493

复制构造函数用于用先前创建的同一类的对象来初始化新对象。默认情况下，编译器写了一个浅拷贝。当不涉及动态内存分配时，浅拷贝工作正常，因为当涉及动态内存分配时，两个对象将指向堆中的相同内存位置，因此为了解决这个问题，我们编写了深拷贝，因此两个对象都有自己的属性副本记忆中。为了阅读带有完整示例和解释的详细信息，您可以查看本文中关于[浅拷贝构造函数和深拷贝构造函数](http://www.hellgeeks.com/constructors-and-destructors/)之间区别的部分。

# html - 反向的HTML选择选项？

> ID：15278199
> 
> 赞同：0
> 
> 时间：2013-03-07T17:49:39.120
> 
> 标签：html, popup

我对 HTML 选择有一个小问题：

```
<select>
    <option>...</option>
    <option>...</option>
    <option>...</option>
</select> 
```

默认情况下，所有选项都将显示在选择字段下方，我似乎无法改变它们的方向。我需要的是显示在选择字段而不是下方。这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:54:01.597

这几乎是不可能的（没有自定义的基于 JavaScript 的元素），因为它们是操作系统`select`和`option`浏览器内置的元素。

一种思考方式：所有下拉菜单的样式都设置为使所有列表都位于字段下方。如果你让你的与众不同，有些人可能会感到困惑，这不是一件好事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:00:23.007

这不可能，伙计，对不起......我已经为你做了研究，但似乎没有任何东西可以解决你的问题......

看到它的好方法，您可能是为此提出 JavaScript 代码并在您自己的问题上发布解决方案的人，并为需要相同内容的未来用户回答问题

继续前进，你会得到它。祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-23T17:31:04.940

您可以尝试在您的 CSS 中使用它：

```
direction: rtl; 
```

您可以为您的选择内联或给它一个类/ID。我可以通过使用它来反转我的选择菜单的方向。我不得不改变一些样式，因为它把我的文字推到了右边。[看到这个答案](https://stackoverflow.com/questions/40275891/how-to-reverse-the-direction-in-html5-range-input)。

希望有帮助！

# php - PHP Zend 身份验证 - 我如何告诉 Zend 用户已通过身份验证

> ID：15278200
> 
> 赞同：0
> 
> 时间：2013-03-07T17:49:40.543
> 
> 标签：php, zend-framework

我需要告诉 Zend 一个用户是在一个非常特定的场合被认证的，但我不想为此目的构建一个 Auth Adapter。

我想要这样的东西：

```
if ($user == 'sam') {

    // this user is valid, tell Zend to authenticate
    Zend_Auth::authenticate(true);

} 
```

换句话说，我不想将确定用户是否有效的任务委托给某个 Auth Adapter。我想告诉 Zend “嘿，这家伙和我在一起，所以设置身份验证 cookie 并让他使用我的网站”。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:09:49.433

您可以通过写入 Zend_Auth 存储来做到这一点：

```
$userData = (object)array('username' => 'Johny23');
Zend_Auth::getInstance()->getStorage()->write($userData); 
```

当你这样做时，Zend 会自动创建新的 Zend_Auth_Storage_Session 对象来处理会话。

然后，您可以检查：

```
$auth = Zend_Auth::getInstance();
if($auth->hasIdentity()){
    echo 'welcome back, ' . $auth->getIdentity()->username;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:14:29.800

[http://framework.zend.com/manual/1.12/en/zend.auth.adapter.dbtable.html](http://framework.zend.com/manual/1.12/en/zend.auth.adapter.dbtable.html)

查看Advanced Usage By Example下的最后一个代码，代码如下

```
 $registry       =   Zend_Registry::getInstance();
    $DB             =   $registry['DB'];
    $authAdapter    =   new Zend_Auth_Adapter_DbTable($DB,'usertable','username','password');

    $authAdapter->setIdentity($request->getParam('username'));
    $authAdapter->setCredential($request->getParam('password'));

    $select         =   $authAdapter->getDbSelect();
    $select->where('`active` = 1');
    $result         =   $authAdapter->authenticate();

    if($result->isValid()){
            //set user proper to zend instance
            $this->_redirect('/index');
    }
    else
    {
       //logout or redirect to same page
    } 
```

# sas - 在 sas 中将每日数据滞后 1 个月

> ID：15278201
> 
> 赞同：1
> 
> 时间：2013-03-07T17:49:43.490
> 
> 标签：sas, time-series, lag

我在 SAS 中有一个包含每日数据的数据集。我想通过 id 与上个月的值不同，将其转换为月度形式。例如：

```
thedate, id, val
2012-01-01, 1, 10
2012-01-01, 2, 14
2012-01-02, 1, 11 
2012-01-02, 2, 12
...
2012-02-01, 1, 20
2012-02-01, 2, 15 
```

我想输出：

```
thedate, id, val
2012-02-01, 1, 10
2012-02-01, 2, 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:03:25.797

这是一种方法。如果您获得 SAS-ETS 的许可，则使用 PROC EXPAND 可能会有更好的方法。

```
*Setting up the dataset initially;
data have;
informat thedate YYMMDD10.;
input thedate id val;
datalines;
2012-01-01 1 10
2012-01-01 2 14
2012-01-02 1 11 
2012-01-02 2 12
2012-02-01 1 20
2012-02-01 2 15
;;;;
run;

*Sorting by ID and DATE so it is in the right order;
proc sort data=have;
by id thedate;
run;

data want;
  set have;
  retain lastval;  *This is retained from record to record, so the value carries down;
  by id thedate;
  if (first.id) or (last.id) or (day(thedate)=1); *The only records of interest - the first record, the last record, and any record that is the first of a month.;

  * To do END: if (first.id) or (last.id) or (thedate=intnx('MONTH',thedate,0,'E'));
  if first.id then call missing(lastval); *Each time ID changes, reset lastval to missing;
  if missing(lastval) then output; *This will be true for the first record of each ID only - put that record out without changes;
  else do;
    val = val-lastval; *set val to the new value (current value minus retained value);
    output;  *put the record out;
  end;
  lastval=sum(val,lastval); *this value is for the next record;
run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:46:49.667

您可以使用 PROC SQL 和 intnx 函数将上个月的日期提前一个月来实现这一点......

```
过程 sql ;
  创建表滞后为
  选择 b.thedate, b.id, (b.val - a.val) 作为 val
  来自我的数据 b
       左连接
       mydata a on b.date = intnx('month',a.date,1,'s')
               和 b.id = a.id
  按 b.date、b.id 排序；
辞职 ;

```

这可能需要调整以处理上个月不存在或与上个月有不同天数的月份的情况。

# c++ - How to using command terminal in C in Ubuntu

> ID：15278203
> 
> 赞同：-5
> 
> 时间：2013-03-07T17:49:45.567
> 
> 标签：c++, c

I am trying to make a copy of a file in a folder and I want to write a function to calculate how much of the file remains to be copied.

I can implement it in the terminal with two commands.

The first command will get all files in the folder - before processing

`find . -type f | wc -l` => `counter1` -number of original file

And the second command will get all files already in the folder at current time.

`find . -type f | wc -l` => `counter2` -number of the original file+ its coping

So, file_remaining = `counter1 * 2 - counter2`

`counter1` is multiplied by 2 because I want to make a copy file

How can I make a function to get the information from the two commands in the Ubuntu terminal using C or C++?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:46:43.290

这是我的回答。如果你不明白我的问题，请不要回答

```
#include <iostream>
#include<stdio.h>
using namespace std;
   int main( int argc, const char * argv[] )

   {      
         FILE * fp ;
         char tstCommand[] ="find . -type f | wc -l";
         char path[100];
         fp = popen(tstCommand, "r");
         while ( fgets( path, 100, fp ) != NULL )
               cout << path << endl;

         pclose(fp);
         return 0;
   } 
```

# tomcat - Detecting first use of a Connection in a JdbcInterceptor

> ID：15278205
> 
> 赞同：1
> 
> 时间：2013-03-07T17:49:47.340
> 
> 标签：tomcat, jdbc-pool

While creating a JdbcInterceptor for Tomcat jdbc-pool, one can override the method reset(ConnectionPool parent, PooledConnection con), which will called every time the connection is borrowed from the pool.

Is there a way to detect if this is the first time a particular underlying connection is being borrowed from the pool?

I could code something in my interceptor to "remember" and then check this each time, but I wonder if there is some type of property on the PooledConnection that I can check. I tried isInitialized(), but that is always true in the reset() method.

[http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html#Interceptors](http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html#Interceptors)

# ruby-on-rails - 在 ruby on rails 之前安装 Web 服务器

> ID：15278206
> 
> 赞同：-1
> 
> 时间：2013-03-07T17:49:48.967
> 
> 标签：ruby-on-rails, apache, ubuntu

不过，这可能是一个微不足道的问题……是否应该安装 Web 服务器（例如 Apache）才能安装 Ruby on Rails？数据库呢？如果是，您能建议具体的计划吗？我使用的是 Ubuntu 12.10，Ruby 是 1.9.3.p392，Rails 是 3.2.12。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:52:32.283

这取决于你的任务。您可以将 Rails 与[Webrick 一起](http://en.wikipedia.org/wiki/WEBrick)用作 HTTP 服务器（用于开发），它与 Rails 一起安装，您可以使用 Sqlite 作为需要单独安装的数据库。

[这](http://excid3.com/blog/setting-up-rails-on-ubuntu-12-10-quantal-quetzal-with-ruby-node-js-nginx-passenger-and-mysql-or-postgres/#.UTjUVqVUp-U)是一个可以帮助你的指南。

# javascript - How can I use this jQuery plugin with my custom Spotify Application?

> ID：15278209
> 
> 赞同：0
> 
> 时间：2013-03-07T17:49:57.590
> 
> 标签：javascript, jquery, jquery-plugins, spotify, html5-audio

I currently have a jQuery plugin I am working with that is setup to use songs / tracks like this:

```
//Using an audio object
var a = new Audio();
a.src = 'somesong.mp3';
customPlayer.load( a ); 
```

It also supports these options:

```
//Using an audio element on the page
customPlayer.load( document.getElementsByTagName('audio')[0] );

//Using a config object and you only have one encoding
customPlayer.load({ src: 'somesong.mp3' });

//Using a config object, and you have an ogg and mp3 version
customPlayer.load({ src: 'somesong', codecs: [ 'ogg', 'mp3' ]}); 
```

I am trying to figure a way to use it with a Spotify track!... Any thoughts / suggestions would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:00:58.220

Spotify 的 API 不以任何方式支持 HTML5 音频，包括播放 mp3 文件或类似文件的外部音频以及使用 HTML5 音频元素来控制播放器。Spotify 播放器 API 只是指示客户端播放您想要的曲目，而不是将其托管在 HTML5 音频元素中。

做你想做的唯一方法是创建一个与 jQuery Audio 类具有相同接口的包装类，但调用 Spotify API。

# sencha-touch - 预览下一个和上一个轮播项目

> ID：15278212
> 
> 赞同：2
> 
> 时间：2013-03-07T17:49:58.280
> 
> 标签：sencha-touch, sencha-touch-2, carousel

我试图创建一个轮播，除了活动项目之外，用户可以预览下一个和上一个项目的一部分。我画了一个图来说明它：

![在此处输入图像描述](../Images/772305009effc20b375f36811889251b.png)

我尝试了填充或边距之类的方法，但任何方法都有效。

这是一个轮播：http: [//jsfiddle.net/XpG8v/](http://jsfiddle.net/XpG8v/)

```
 Ext.Viewport.add({
        xtype: 'carousel',
        height: 300,
        width: 300,
        items: [{
            style: 'background-color: #00ffff;'
        },{
            style: 'background-color: #ff00ff;'
        },{
            style: 'background-color: #ffff00;'
        }]
    }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T23:40:28.040

只需将“itemLength”配置设置为固定值，例如：

```
Ext.Viewport.add({
    xtype: 'carousel',
    itemLength: 200,
    // ...
}); 
```

# c# - 如何在 c# 中像使用 marshal 的 vb6 中的类型一样执行结构数组

> ID：15278213
> 
> 赞同：0
> 
> 时间：2013-03-07T17:50:07.370
> 
> 标签：c#, dll, vb6, marshalling

抱歉，如果我没有很好地解释。dll不是用VB写的，是用机器语言写的，实际上可以从vb6 delphi 7和c++中访问dll。连接方法“PBusConnectEx”在 C# 代码中完美运行。我真正的问题是我在 vb6 中有一个“类型”，我必须在 C# 中将其设为“结构”。

第一个问题是如果你认为C#中的结构“struct”等价于vb6中的结构“type”。

第二个问题是，如果您认为外部函数声明“PBusTransferPLUCluster”与 vb6 中的外部函数声明“PBusTransferPLUCluster”相比做得很好。

第三个问题是：¿你觉得PBusTransferPLUCluster函数和参数类型应该怎么调用，和vb6中的PBusTransferPLUCluster函数调用相比，必须发送。对不起，如果我知道我在上面解释，我是论坛的新手，英语写得不太好。

VB6代码单元1.bas

```
Attribute VB_Name = "Module1"
Type TPlu
   PLUName As String
   LFCode As Long
   Code As String
   BarCode As Long
   UnitPrice As Long
   WeightUnit As Long
   Deptment As Long
   Tare As Double
   ShlefTime As Long
   PackageType As Long
   PackageWeight As Double
   Tolerance As Long
   Message1 As Byte
   Reserved As Byte
   Reserved1 As Integer
   Message2 As Byte
   Reserved2 As Byte
   MultiLabel As Byte
   Rebate As Byte
   Account As Long
End Type

Type TPLUCluster
   PLU(0 To 3) As TPlu
End Type

Type THotkeyTable
   Hotkey(0 To 83) As Long
End Type

Declare Function PBusConnect Lib "PBusDrv.dll" (ByVal RefLFZKFileName As String, ByVal RefCFGFileName As String, ByVal SerialNO As Integer, ByVal CommName As String, ByVal BaudRate As Integer) As Long
Declare Function PBusDisConnect Lib "PBusDrv.dll" (ByVal SerialNO As Integer) As Long
Declare Function PBusTransferPLUCluster Lib "PBusDrv.dll" (ByRef PLUCluster As TPLUCluster) As Long
Declare Function PBusTransferHotkey Lib "PBusDrv.dll" (ByRef HotkeyTable As THotkeyTable, ByVal TableIndex As Long) As Long
Declare Function PBusPLUToStr Lib "PBusDrv.dll" (ByRef PLU As TPlu, ByVal LPStr As String) As Long
Declare Function PBusStrToPLU Lib "PBusDrv.dll" (ByVal LPStr As String, ByRef PLU As TPlu) As Long
Declare Function MessageBox Lib "user32" Alias "MessageBoxA" (ByVal hwnd As Long, ByVal lpText As String, ByVal lpCaption As String, ByVal wType As Long) As Long 
```

Unit1.frm

```
VERSION 5.00
Begin VB.Form Form1 
   Caption         =   "Sample for Windows NT 4.0"
   ClientHeight    =   1500
   ClientLeft      =   1770
   ClientTop       =   1710
   ClientWidth     =   2190
   LinkTopic       =   "Form1"
   PaletteMode     =   1  'UseZOrder
   ScaleHeight     =   1500
   ScaleWidth      =   2190
   Begin VB.CommandButton TestBtn 
      Caption         =   "Test"
      Height          =   375
      Left            =   360
      TabIndex        =   1
      Top             =   480
      Width           =   1335
   End
   Begin VB.Label Label1 
      AutoSize        =   -1  'True
      Height          =   195
      Left            =   1560
      TabIndex        =   0
      Top             =   4560
      Width           =   45
   End
End
Attribute VB_Name = "Form1"
Attribute VB_GlobalNameSpace = False
Attribute VB_Creatable = False
Attribute VB_PredeclaredId = True
Attribute VB_Exposed = False

Private Sub TestBtn_Click()
Dim Result As Long
Dim PLUCluster As TPLUCluster
Dim PLU As TPlu
Dim HotkeyTable As THotkeyTable
Dim Str As String

PLU.PLUName = "chorizoxx"
PLU.LFCode = 1
PLU.Code = 1
PLU.Deptment = 1
PLU.UnitPrice = 21414
PLU.BarCode = 22
PLUCluster.PLU(0) = PLU

Result = PBusConnectEx(".\lfzk.dat", ".\system.cfg", "192.168.1.87")
Result = PBusTransferPLUCluster(PLUCluster)
Result = PBusDisConnect(1234)
Result = MessageBox(0, "Test OK", "Demo", 0)

End Sub 
```

这是我的 C# 代码：

```
using System.Runtime.InteropServices;
[StructLayout(LayoutKind.Sequential)]

namespace BALANZAC_{

   public partial class MainForm : Form{

      struct TPlu{
      public string PLUName;
      public long LFCode;
      public string Code;
      public long BarCode;
      public long UnitPrice;
      public long WeightUnit;
      public long Deptment;
      public double Tare;
      public long ShlefTime;
      public long PackageType;
      public long PackageWeight;
      public long Tolerance;
      public byte Message1;
      public byte Reserved;
      public int Reserved1;
      public byte Message2;
      public byte Reserved2;
      public byte MultiLabel;
      public byte Rebate;
      public long Account;
   }

   private TPlu PLU;
   private TPlu[] PPC=new TPlu[3];

   [DllImport("PBusDrv.dll")]
   public static extern int PBusConnectEx(string RefLFZKFileName, string RefCFGFileName , string IPAddr);
   [DllImport("PBusDrv.dll")]

   private static extern int PBusTransferPLUCluster([MarshalAs(UnmanagedType.LPArray, SizeConst=3)]TPlu[] PPC);

      public MainForm()
         InitializeComponent();

         PBusConnectEx("lfzk.dat", "system.cfg", "192.168.1.87");
         PLU.PLUName="PRUEBA PESADO X1";
         PLU.Code="222";
         PLU.LFCode=222;
         PLU.Deptment=1;
         PLU.UnitPrice=12993;
         PLU.BarCode=22;
         PPC[0]=PLU;
         PLUCluster.PLU[0]=PLU;

        }
    }   
} 
```

如果我不能在上一篇文章中解释我真的很抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:44:11.463

Vb6 中的 Int 在 C# 中是 Short，在 VB6 中 Long 是 C# 中的 Int

VB6 没有 C# 中的 64 位 Long

您可以在 VB6 中为 Long (C#) 创建一个 UDT，

```
Type VB6Long64
   LoValue As Long
   HiValue As Long
End Type 
```

请参阅[VB6 和 VS2005 之间的数据类型比较](http://msdn.microsoft.com/en-US/library/7f5ztkz3%28v=vs.80%29.aspx)以及[如何在 vba 中进行 64 位（即 VB6）](http://support.microsoft.com/kb/189862)

# javascript - Nodejs中的setInterval问题

> ID：15278214
> 
> 赞同：0
> 
> 时间：2013-03-07T17:50:10.223
> 
> 标签：javascript, node.js, timer, setinterval

我有这段代码，它向我抛出了以下错误：

```
 this.modifyAspect('health');
                 ^
TypeError: Object #<Timer> has no method 'modifyAspect'
    at Timer.tick (/Users/martinluz/Documents/Nodes/societ/node_modules/societal/societal.js:93:9)
    at Timer.exports.setInterval.timer.ontimeout (timers.js:234:14) 
```

我试过调用`modifyAspects()`as `Societ.modifyAspects`, `this.modifyAspects()`and `modifyAspects()`, 只得到错误。任何帮助或建议表示赞赏...

这是代码：

```
 var Societ = function(inboundConfig){

    this.population = undefined;
    this.owner_id =  undefined;
    this.owner_name = undefined;
    this.config = inboundConfig;
    this.aspects = {
        education:{
            facilities: undefined,
            rating: undefined
        },
        health: {
            facilities: undefined,
            rating: undefined
        }
    };

    this.modifiers = {
        health: 1,
        education: 2,
        population: 2
    };

    this.tickio = function(){
        console.log('tickio');
    }

    return{
        config: this.config,
        bootstrap: function(){
            this.owner_id = this.config.owner_id;
            setInterval(this.tick, 10000); /*** Problematic line ***/
        },
        yield: function(){

            console.log(this.population);   
        },
        getOwnerId: function(){
            return this.owner_id;
        },
        modifyAspect: function(aspect){
            console.log('Modifying aspect: '+aspect);
        },
        tick: function(){
            console.log('Ticking!');
            this.modifyAspect('health');
            console.log('Recalculate education');
            console.log('Recalculate population');
        },

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T17:56:26.740

您需要将传递给的函数绑定`setInterval`到正确的上下文：

```
setInterval(this.tick.bind(this), 10000); 
```

这将定义`this`in`this.tick`实际指向的内容，如果您不绑定它，它将在计时器（处理`setInterval`）的上下文中运行，正如您在错误中注意到的那样。

# java - Maven project with JavaFX (with jar file in `lib`)

> ID：15278215
> 
> 赞同：49
> 
> 时间：2013-03-07T17:50:13.817
> 
> 标签：java, maven, javafx

I'm setting up a maven project, that is going to use JavaFX. Since I've heard JavaFX does not come with all versions of Java, I downloaded and put the `jfxrt.jar` file in a `lib` directory in my project.

1) How do I specify that the dependency (ie., JavaFX) should not be downloaded, but which is located in `lib`?

2) Does this then mean the project can be built on any machine with JDK (and not necessary JDK 1.7 - update 9+) ?

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-07T23:36:11.133

**最新 JavaFX 版本的 2019 年更新**

从 Java 11 开始，JavaFX 已与 JDK 分离，因此 JavaFX 库不再自动与 JDK 安装捆绑在一起（例如在 Oracle JDK 8 发行版中）。相反，JavaFX 系统现在被设计为一组独立于 JDK 的独立库，可以通过 Maven 等工具从存储库下载这些库，供您的应用程序使用。

openjfx.io 有一个关于在 Maven 中使用 JavaFX 11+ 的简短教程：

*   [https://openjfx.io/openjfx-docs/#maven](https://openjfx.io/openjfx-docs/#maven)

本教程建议使用[OpenJFX JavaFX Maven 插件](https://github.com/javafx-maven-plugin/javafx-maven-plugin)，并为“hello, world”风格的应用程序提供以下示例 maven pom.xml 项目文件。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.openjfx</groupId>
  <artifactId>hellofx</artifactId>
  <packaging>jar</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>demo</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>org.openjfx</groupId>
      <artifactId>javafx-controls</artifactId>
      <version>12.0.1</version>
    </dependency>
  </dependencies>
  <build>
    <plugins>
      <plugin>
        <groupId>org.openjfx</groupId>
        <artifactId>javafx-maven-plugin</artifactId>
        <version>0.0.2</version>
        <configuration>
          <mainClass>HelloFX</mainClass>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

请注意，用于 Java 11+的[org.openjfx JavaFX maven 插件与用于 Java 8 和 9 的](https://github.com/openjfx/javafx-maven-plugin)[com.zenjava JavaFX maven 插件](https://github.com/javafx-maven-plugin/javafx-maven-plugin)不同，因此请使用适合您的 Java 版本的插件。

**建议的方法**

使用 Maven 构建 JavaFX 应用程序：

1.  使用带有 Java 8 和 9 AND/OR的[com.zenjava maven JavaFX 插件](https://github.com/zonski/javafx-maven-plugin)
2.  使用 Java 8 或 9 并且不为 JavaFX 指定任何类型的 Maven 依赖项或
3.  在Java 11+ 中使用[org.openjfx maven JavaFX 插件。](https://github.com/openjfx/javafx-maven-plugin)

与 Java 7 不同，Java 8 没有必要将 JavaFX 设置为 maven 依赖项，因为 JavaFX 位于标准 Java 运行时类路径上（类似于今天的 Swing 方式）。

**观点**

我认为您将`jfxrt.jar`文件放在项目`lib`目录中的问题的方法是有缺陷的。

它有缺陷的原因是：

1.  JavaFX 还包含本机库，因此您也需要包含它们（在`jfxrt.jar`能够找到它们的位置）。
2.  给定版本的 JavaFX 将仅经过认证可针对其随附的 JDK 版本进行操作，因此您放置在项目`lib`目录中的 JavaFX 运行时可能不适用于更高版本的 JDK，例如 JDK 8。
3.  JDK 的未来版本（例如 JDK 8）将在 JDK 的默认类路径中包含 JavaFX，因此您可能会与放置在`lib`目录中的版本发生冲突。

总之，JavaFX 应该被视为 Java 运行时系统的一部分，而不是项目库。

**JavaFX 系统依赖示例**

如果您必须使用 Java 7 并且不想使用 JavaFX maven 插件，那么您可以采用不太推荐的方法：

*   引用 jdk（不是您的项目`lib`目录）中的 JavaFX 库作为[maven 系统依赖项](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#System_Dependencies)。

此示例仅为 Java 7 提供，Java 8 不需要（并且不会按原样工作）。Java 8 将 jfxrt.jar 放在 ${java.home}/lib/ext/jfxrt.jar 中，即在默认的 Java 运行时类路径上，使 Java 8 的系统依赖关系无关紧要。

```
<dependency>
  <groupId>javafx</groupId>
  <artifactId>jfxrt</artifactId>
  <version>${java.version}</version>
  <scope>system</scope>
  <systemPath>${java.home}/lib/jfxrt.jar</systemPath>
</dependency> 
```

如果您使用这样的系统依赖项打包您的应用程序，那么您需要为您的用户编写一些执行指令，以便他们在 Java 7 上运行您的应用程序时可以将 jfxrt.jar 添加到运行时类路径。这是一个非常好的不使用这种方法的理由。

如果您选择使用 maven 系统依赖方法，您可能还希望使用 maven [antrun 插件](http://maven.apache.org/plugins/maven-antrun-plugin/)来嵌入对[JavaFX ant 任务](http://docs.oracle.com/javafx/2/deployment/javafx_ant_task_reference.htm#CIADCBJG)的调用，如[本示例](http://code.google.com/p/willow-browser/source/browse/pom.xml)中所示。您可能还想使用[maven enforcer 插件](http://maven.apache.org/enforcer/maven-enforcer-plugin/)来确保您的应用程序至少是根据最低要求的 Java 版本构建的，其中包含您的应用程序工作所需的 JavaFX 版本。

# haskell - 如何从 hmatrix 库中创建 Matrix 和 Vector 的仿函数实例？

> ID：15278221
> 
> 赞同：3
> 
> 时间：2013-03-07T17:50:28.403
> 
> 标签：haskell

`Matrix`和构造函数都有`Vector`kind `*->*`，所以它们看起来像值构造函数。但是当我尝试类似的东西时

```
instance Functor Vector a where
    fmap g ( Vector a ) = Vector ( g a ) 
```

我收到此错误：

```
 Not in scope: data constructor `Vector' 
```

这是有道理的，因为`let v = Vector [1..3]`无论如何我都无法通过使用来制作矢量。但是检查源代码我发现 Matrix 和 Vector 构造函数都是从它们各自的模块中导出的：

```
Vector.hs
module Data.Packed.Vector (
    Vector,
    fromList, (|>), toList, buildVecto.. 
) where

Matrix.hs

module Data.Packed.Matrix (
    Element,
    Matrix,rows,cols...
) where 
```

Dido 用于应用函子、monad 等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T08:28:26.173

正如[康拉德帕克](https://stackoverflow.com/users/744300/conrad-parker)所说，我们需要`Storable`实例。

使用最近的 ghc 扩展，我们可以定义一个更通用的 Functor'：

```
{-# LANGUAGE ConstraintKinds, TypeFamilies #-}

import Numeric.LinearAlgebra
import Foreign.Storable(Storable)
import GHC.Exts (Constraint)

class Functor' c where
  type Ok c u v :: Constraint
  type Ok c u v = ()

  fmap' :: Ok c u v => (u -> v) -> c u -> c v

instance Functor' Vector where
  type Ok Vector u v = (Storable u, Storable v)
  fmap' = mapVector 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T17:58:20.183

```
module Data.Packed.Vector (
    Vector,
    fromList, (|>), toList, buildVecto.. 
) where 
```

这公开了 Vector 类型，但没有公开它的任何构造函数。

您的实例声明已更正：

```
instance Functor Vector where
    fmap  = V.map 
```

（假设您`import Vector as V`，并进一步假设您正在谈论矢量包中的矢量）。

* * *

**编辑**：对不起，没有看到你提到包名。对于 hmatrix Vectors，它将是 mapVector 而不是 V.map。

**EDIT_ 2**：正如其他人所提到的，对于 hmatrix 这将不起作用，因为 Matrix 和 Vector 需要`Storeable`它们的内容。

# c# - 在 C# 中按名称访问 PSObject 属性

> ID：15278228
> 
> 赞同：15
> 
> 时间：2013-03-07T17:50:45.467
> 
> 标签：c#, powershell, psobject

例如，我有一个具有两个属性的 PSObject 事务： id 和 transactionName ，因此它看起来像： transaction { id: 123 transactionName : tranName1 }

如果事务的名称是 tranName1，我想返回事务的 id。

在我看来，在 powershell 脚本中，我们可以简单地执行以下操作：

```
if $transaction.transactionName -eq tranName return $transaction.id 
```

但是在 c# 中它会给出错误，因为它无法通过名称识别属性......任何想法如何在 c# 中做到这一点？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-07T18:44:29.743

尝试这样的事情：

```
psobjectvariable.Properties["transactionName"].Value 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-06-08T22:44:41.937

这是我没想到会起作用的东西，但它确实起作用了。

```
dynamic x = psobjectvariable;
Console.Write(x.transactionName); 
```

# function - Find ALL local maxima of a function

> ID：15278230
> 
> 赞同：1
> 
> 时间：2013-03-07T17:50:48.683
> 
> 标签：function, maxima

Hello everybody I try to find ALL the maxima of a function and plot the points where the maxima are.

The Function is:

```
U[x_,y_,a_]:=-((1-a)/Sqrt[(x-a)^2+y^2])-a/Sqrt[(x+1-a)^2+y^2]- 0.5*(x^2+y^2); 
```

Of course this is a 3D function but i satisfied also if someone give me a code to find all maxima with the 2D version of the function. I put a graph of the function.

```
points1=Table[{x, 2*U[x, 0, a]}, {x, -1.5, 1.5,0.005}];

ListPlot[points1, Joined->True,PlotRange->{{-1.5,1.5},{-5.5,-3.0}}, 
```

AxesLabel->{"x","cost. di Jacobi"}]

I saw a similar post but with a more complex function so i can't understand how modify the code: [https://mathematica.stackexchange.com/questions/5575/how-to-find-all-the-local-minima-maxima-in-a-range](https://mathematica.stackexchange.com/questions/5575/how-to-find-all-the-local-minima-maxima-in-a-range) .

Some one can help me? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:11:41.220

我终于用最大化解决了二维问题。看看我是如何解决问题的！

```
a=0.23;
J=-3.5;
U[x_,y_,a_]:=-((1-a)/Sqrt[(x-a)^2+y^2])-a/Sqrt[(x+1-a)^2+y^2]- 0.5*(x^2+y^2);

f[x_] := U[x, 0, a];
g[x_] := J;

{max1,val1} = Maximize[{U[x,0,a], x < a-1}, x];

{max2,val2} = Maximize[{U[x,0,a], a-1 < x < a}, x];

{max3,val3} = Maximize[{U[x,0,a], x > a}, x];

sol = x /. NSolve[g[x] == f[x] && -1.5 < x < 1.5, x];

Show[
    Plot[{f[x], g[x]}, {x, -1.5, 1.5},AxesLabel->{"x","cost. di Jacobi J(x,a)"},
        Epilog -> { 
            {Red, PointSize[0.025], 
            Point[{x /. val1, max1}], 
            Point[{x /. val2, max2}],
            Point[{x /. val3, max3}],
            Text["\!\(\*SubscriptBox[\(L\), \(1\)]\)",{x /. val1, max1-0.4}],
            Text["\!\(\*SubscriptBox[\(L\), \(2\)]\)",{x /. val2, max2-0.4}],
            Text["\!\(\*SubscriptBox[\(L\), \(3\)]\)",{x /. val3, max3-0.4}]},
            {Black, PointSize[0.025], 
            Point[{a, -6.0}],
            Point[{a-1, -6.0}],
            Text["Cost. di Jacobi \!\(\*SubscriptBox[\(J\), \(0\)]\)",{1.0, J-0.2}]}
                }
        ],
    ListPlot[{#, g[#]} & /@ sol, PlotStyle -> PointSize[Large]]
] 
```

# c++ - 双链表实现

> ID：15278234
> 
> 赞同：1
> 
> 时间：2013-03-07T17:51:03.670
> 
> 标签：c++, doubly-linked-list

我为教育目的编写的双链表程序遇到了一些语法问题。我在头文件中创建了一个结构，我的主程序似乎没问题，但是在 .cpp 文件中实现我的功能给我带来了巨大的困难。我无法辨别将记录插入列表的三种情况。具体来说，分配内存、初始化列表头部和尾部以及语句的顺序让我感到困惑，就像传递要添加到我的列表中的记录副本一样。

我的头文件如下：

```
struct rec
{
   char * id;
   char firstname[15];
   char lastname[15];
   struct rec* prev;
   struct rec* next;
};

int AddItem ( rec r );
int DeleteItem ( char* delid );
void PrintList ( int order ); 
```

我的.cpp文件，也就是难点所在，如下：

```
#include <iostream>
#include "list.h"
#include <string.h>
using namespace std;

// These pointers refer to the head and tail of the list.
rec* first = NULL;
rec* last = NULL;

int AddItem( Rec r )
{

   rec* newRecEntry;
   rec* current = NULL;
   rec* previous = NULL;

   // Check for duplicate id
   current = first;
   while (current)
   {
     if( strcmp(current -> id, r.id) == 0)
      {
         return 0;
      }
     else
      // Create a new node
      {
         newRecEntry = new Rec;
         newRecEntry->id = new char[strlen(r.id)+1];
         strcpy(newRecEntry->id, r.id);
         strcpy(newRecEntry->firstname,r.firstname);
         strcpy(newRecEntry->lastname,r.lastname);
         newRecEntry->next = NULL;
         newRecEntry->prev = NULL;
      }
      // Find the appropriate position for the node and insert accordingly
      // Check to see if the list is empty
      if (first == NULL)
      {
         first = newRecEntry;
         last = newRecEntry;
      }
      else if ( r.lastname>last.lastname)
      {

      else
      {

   return 0;
}

/*int DeleteItem(char* ID) 
```

我应该能够在列表的开头、中间和结尾插入。根据 ID 从列表中删除一个项目，并根据用户输入以升序或降序打印列表，但我首先只想处理将项目添加到所述列表中。我的函数定义如下，也包含一些错误

*列表.cpp*

```
#include <iostream>
#include "list.h"
#include <string.h>
using namespace std;

// These pointers refer to the head and tail of the list.
   rec* first = NULL;
   rec* last = NULL;

int AddItem( Rec r )
{

   rec* newRecEntry;
   rec* current = NULL;
   rec* previous = NULL;

   // Check for duplicate id
   current = first;
   while (current)
   {
     if( strcmp(current -> id, r.id) == 0)
      {
         return 0;
      }
     else
     // Create a new node
      {
         newRecEntry = new Rec;
         newRecEntry->id = new char[strlen(r.id)+1];
         strcpy(newRecEntry->id, r.id);
         strcpy(newRecEntry->firstname,r.firstname);
         strcpy(newRecEntry->lastname,r.lastname);
         newRecEntry->next = NULL;
         newRecEntry->prev = NULL;
      }
      // Find the appropriate position for the node and insert accordingly
      // Check to see if the list is empty
      if (first == NULL)
      {
         first = newRecEntry;
         last = newRecEntry;
      }
      else if ( r.lastname>last.lastname)
      {

      else
      {

   return 0;
}

/*int DeleteItem(char* ID)
{
   rec
}
*/

/*void printList(int order)
{
loop
 {
   cout << ptr -> Id << " ";
   cout << ptr -> firstname << " ";
   cout << ptr -> lastname << " ";
   cout << ptr -> prev << " ";  // address of previous
   cout <<  ptr << " ";   // address of item
   cout << ptr -> next << " ";  //  address of next item
 }

} 
```

主要如下：

```
#include <iostream>
#include "list.h"
#include <string.h>  // <string>

using namespace std;

void main (void)
{
   int choice, printorder;
   char idbuffer[100];
   rec r;

do
{
  cout << "Enter your choice 1 Add, 2 Delete, 3 Print, 0 quit "<<endl;
  cin >> choice;

   switch ( choice )
   {
      case 1:  //AddItem
         cout << "\nEnter ID ";
         cin >> idbuffer;

         r.id = idbuffer;
         cout << "\nFirst Name ";
         cin >> r.firstname;
         cout << "\nLast Name ";
         cin >>  r.lastname;
         if ( AddItem ( r ) )
         {
            cout << "\nSuccess!\n";
         }
         else
         {
            cout << "\nItem failed to be added\n";
         }

         break;
      case 2:  //Delete
         cout << "\nEnter id :";
         cin >> idbuffer;
         if ( DeleteItem ( idbuffer ) )
         {
            cout << "\nDelete OK\n";
         }
         else
         {
            cout << "\nDelete Failed for " << idbuffer;
         }
         break;
      case 3: // Print
        cout << "Enter order 0 - Ascending, 1 - Descending\n";
        cin >> printorder;
        PrintList (printorder);
        break;
      case 0:  // quit
         break;

      default: // bad choice
         break;
   } // end switch

}
while ( choice != 0 );// end do while
}  // end main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:48:32.783

它可能看起来不像，但即使是这个功能

```
int AddItem(Record entry)
{
   Record* newRecordPointer;
   newRecordPointer=new Record;
   strcpy(newRecordPointer->firstName,entry.firstName);
   strcpy(newRecordPointer->lastName,entry.lastName);
   newRecordPointer->ID=new char[strlen(entry.ID)+1];
   strcpy(newRecordPointer->ID, entry.ID);
   return 0;
} 
```

正在尝试做太多事情。

让我们编写将项目添加到列表的伪代码描述：

1.  *创建*一个**新节点**
2.  *使用提供的**值***填充***新节点***
****   *将***新节点**附加到**列表*****

 ***我已经标记了所涉及的*动词*和**名词**，您已经可以看到您的函数中缺少一个**名词。**您要求`AddItem`将一个项目添加到列表中......但您没有给它一个可以处理的列表。

清楚地写出您的期望也很有用：

1.  之前`AddItem`被称为：
    *   它需要一个清单来处理
    *   我们没有列表容器类，只有记录，所以我们必须传递一个`Record`
    *   假设我们要在传入*后添加新项目*`Record`
2.  之后`AddItem`被称为：
    *   无论`Record`我们传入什么，它`Next`都应该指向新节点
    *   新节点`Previous`应该指向传入的节点
    *   等等等等（这些是标准的双向链表插入行为）
3.  稍后注意：我们还没有描述我们如何存储一个空列表
    *   如果它是一个循环列表，一个空列表将是一个`Record`其`Next`和`Previous`成员指向自身
    *   如果它是线性的，它们可能都是 NULL 而不是
    *   它可能只是一个 NULL 指针，但是将第一个节点添加到空列表需要更多的努力

因此，假设可能起作用的最小功能是：

```
void AddItem(Record *insert_after, Record value)
{
    Record *new_node = CreateRecord();
    CopyRecordValues(new_node, &value);
    AttachAfter(insert_after, new_node);
} 
```

请注意，如果我们正在编写真正的 C++，前两行可以只使用复制构造函数`Record *new_node = new Record(value)`，但要从我们开始的地方获得惯用的 C++ 代码，需要进行更多的更改。

* * *

现在，鉴于此，您能否：

*   实现这三个功能？（`CreateRecord`并且`CopyRecordValues`已经在您当前的代码中处理）
*   为您的其他操作编写等效的伪代码，然后自己翻译？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:04:40.330

尝试改变这个：

```
int AddItem(Record entry); 
```

对此：

```
Record* AddItem(Record entry, Record *insertion_point = NULL ); 
```

如果`insertion_point`是`NULL`，您可以假设`Record`是新列表的开始。

现在您有足够的信息来设置`Next`和`Previous`指针，并返回新创建的节点。***

# ios - Signing an ipa file using Enterprise Account Certificate

> ID：15278243
> 
> 赞同：0
> 
> 时间：2013-03-07T17:51:27.257
> 
> 标签：ios, xcode

I'm new to iOS application development. I have an Enterprise Account and I successfully added that Provisioning Profile to my Mac.

My understanding is that an iOS application signed with an Enterprise Account's certificate can be installed on any number of iOS devices within that organization.

I already have an .ipa file which is signed with a different certificate (not using the enterprise one that I have). I need to sign this application with the enterprise account that I have with me. Is it possible to do this? Or what should I need to sign the application using my Enterprise Account' certificate? Could you please help me?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-26T07:54:13.497

您可以通过解压缩 IPA 并将嵌入式移动配置文件替换为您的企业配置文件来退出 IPA。

之后，使用 codesign 和您的企业分发证书对 .app 目录进行签名。Codesign 是 Xcode 附带的命令行工具。

最后，您将 IPA 压缩备份并以企业应用程序的正常方式分发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:15:46.600

您需要在归档应用程序时指定证书和 mobileprovision。然后在管理器中，“分发”应用程序并选择“保存为企业或临时分发”选项

# c - 返回两个值的 C 函数

> ID：15278244
> 
> 赞同：-1
> 
> 时间：2013-03-07T17:51:28.540
> 
> 标签：c, function

我必须在 C 中完成以下作业。

> 编写一个函数，要求用户输入两个正整数，读取这两个数字，比如 a 和 b，并不断询问它们，直到用户输入两个这样的数字。该函数将两个数字都返回到调用它的位置。

我在这里有点困惑。我如何要求用户从一个函数中输入两个值？您不能仅从 main() 函数执行此操作吗？截至目前，我有以下功能代码。它工作正常，但我当然需要在外部函数中使用它。

```
#include <stdio.h>

int main() {

int a(2); // initialize just as some positive number so as not to set off negative alert.
int b(2);
printf("Enter two positive numbers: \nFirst: ");
do {
    if (a <= 0 || b <= 0) { // negative alert
        printf("Woops. Those are negative. Try again. \nFirst: ");
    }
    scanf(" %d", &a);
    printf("Second: ");
    scanf(" %d", &b);
    printf("\n");
} while (a <= 0 || b <= 0);

return(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:00:03.840

`c`和（实际上在我所知道的所有其他编程语言中）中的函数（oop 中的方法`c++`）只能返回一个值。使用一个包含两个值的结构并从你的函数中返回它

```
#include<stdio.h>
#include<stdlib.h>

typedef struct two_ints {
    int a, b;
} two_ints_t;

two_ints_t read_two_ints();

two_ints_t read_two_ints() {
    two_ints_t two_ints;
    two_ints.a = 0;
    two_ints.b = 0;
    char tmp[32] = "";
    printf("Enter two positive numbers: \nFirst: ");
    do {
        scanf(" %s", tmp);
        two_ints.a = atoi(tmp);
        printf("Second: ");
        scanf(" %s", tmp);
        two_ints.b = atoi(tmp);
        printf("\n");
        if (two_ints.a <= 0 || two_ints.b <= 0) { // negative alert
            printf("Woops. Those are negative. Try again. \nFirst: ");
        }
    } while (two_ints.a <= 0 || two_ints.b <= 0);

    return two_ints;
}

int main() {
    two_ints_t two_ints = read_two_ints();
    printf("a=%i, b=%i\n", two_ints.a, two_ints.b);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T17:56:43.533

唯一特别的`main`是它是您的应用程序的入口点。您可以随时调用任何您想要的名称¹。一旦指令指针命中入口点中的第一条指令，它就只是从那里开始的操作码流。除了跳跃之外，您还有“功能”这一事实并没有什么特别之处。你也可以内联它们。

将代码强加到另一个方法中只会在传递和返回信息方面有所不同：

```
/* this signature will change if you need to pass/return information */
void work()
{
    int a = 2; /* did you really mean C++? */
    int b = 2;
    printf("Enter two positive numbers: \nFirst: ");
    do {
        if (a <= 0 || b <= 0) { /* negative alert */
            printf("Woops. Those are negative. Try again. \nFirst: ");
        }

        scanf(" %d", &a);
        printf("Second: ");
        scanf(" %d", &b);
        printf("\n");
    } while (a <= 0 || b <= 0);
} 
```

像这样调用：

```
int main(int argc, char **argv)
{
    work(); /* assuming it is defined or declared above us */

    return 0;
} 
```

[1\. 对于“无论什么”和“无论何时”的合理定义。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T18:09:19.027

没有人提到的一个技巧是从函数返回多个值的另一种方法是将指针作为参数传递。执行此操作的常用函数是 scanf：

```
int x,y;
scanf("%d %d", &x, &y); 
```

您可以将此代码视为 scanf 返回两个值并将它们分配给 x 和 y。

# php - Paypal IPN returning blank

> ID：15278245
> 
> 赞同：0
> 
> 时间：2013-03-07T17:51:29.300
> 
> 标签：php, wordpress, paypal-ipn

I am trying to use paypal IPN but it only returns a blank field instead of "Verified" or not verified? Is it suposed to return a blank field?

function VerifyPayment() {

```
 // parse the Paypal URL
          $url_parsed=parse_url($this->GatewayUrl);        

          // generate the post string from the _POST vars aswell as load the
          // _POST vars into an array so we can play with them from the calling
          // script.
          //print_r($_POST);

          $this->InvoiceNo = $_POST['invoice'];

          $post_string = '';    
          foreach ($_POST as $field=>$value) { 
             $this->ipn_data["$field"] = $value;
             $post_string .= $field.'='.urlencode(stripslashes($value)).'&'; 
          }
          $post_string.="cmd=_notify-validate"; // append ipn command

          // open the connection to Paypal
          $fp = fsockopen($url_parsed[host],"80",$err_num,$err_str,30); 
          if(!$fp) {

             // could not open the connection.  If loggin is on, the error message
             // will be in the log.
             $this->last_error = "fsockopen error no. $errnum: $errstr";
             $this->log_ipn_results(false);       
             return false;

          } else { 

             // Post the data back to Paypal
             fputs($fp, "POST $url_parsed[path] HTTP/1.1\r\n"); 
             fputs($fp, "Host: $url_parsed[host]\r\n"); 
             fputs($fp, "Content-type: application/x-www-form-urlencoded\r\n"); 
             fputs($fp, "Content-length: ".strlen($post_string)."\r\n"); 
             fputs($fp, "Connection: close\r\n\r\n"); 
             fputs($fp, $post_string . "\r\n\r\n"); 

             // loop through the response from the server and append to variable
             while(!feof($fp)) { 
                $this->ipn_response .= fgets($fp, 1024); 
             } 

             fclose($fp); // close connection

          }

          if (eregi("VERIFIED",$this->ipn_response)) {

                // Valid IPN transaction. 
                $to = "my-emailo@gmail.com";
                $subject = "VerifyPayment TRUE";
                $message = "text";
                $from = "zezecamarinha@gajas.come";
                $headers = "From:" . $from;
                mail($to,$subject,$message,$headers);
                echo "Mail Sent.";

                return true;       

          } else {
            $to = "my-email@gmail.com";
                $subject = "VerifyPayment FALSE";
                $message = "||response:".$this->ipn_response."||errornum:".$err_num."||errorstr:".$err_str."||url_parsed[path]:".$url_parsed[path]."||url_parsed[host]:".$url_parsed[host]."||post_string:".$post_string;
                $from = "zezecamarinha@gajas.come";
                $headers = "From:" . $from;
                mail($to,$subject,$message,$headers);
                echo "Mail Sent.";

             // Invalid IPN transaction.  Check the log for details.
             return false;

      }

   } 
```

and the response I get (in may e-mail) is:

> ´||response:HTTP/1.0 302 Found Location: [https://www.sandbox.paypal.com](https://www.sandbox.paypal.com) Server: BigIP Connection: close Content-Length: 0
> 
> ||errornum:0||errorstr:||url_parsed[path]:/cgi-bin||url_parsed[host]:www.sandbox.Paypal.com||post_string:mc_gross=0.04&invoice=5138d0b85e6b5&protection_eligibility=Eligible&address_status=confirmed&payer_id=DM32R376STZLY&tax=0.00&address_street=1+Main+St&payment_date=09%3A40%3A14+Mar+07%2C+2013+PST&payment_status=Completed&charset=windows-1252&address_zip=95131&first_name=ze&mc_fee=0.04&address_country_code=US&address_name=ze+malh%E3o&notify_version=3.7&custom=5138d0b85e6b5&payer_status=verified&business=admin_1362650103_biz%40gmail.com&address_country=United+States&address_city=San+Jose&quantity=1&verify_sign=AALyDIKsAioIkAct58DvtIPZSSJJAoGuIYe.LXHArin2.kTsH2Y.VvW6&payer_email=zepipo_1362649981_per%40gmail.com&txn_id=3064854848985250B&payment_type=instant&last_name=malh%E3o&address_state=CA&receiver_email=admin_1362650103_biz%40gmail.com&payment_fee=0.04&receiver_id=4S4KP74V2695Q&txn_type=web_accept&item_name=WPMP+Order%23+5138d0b85e6b5&mc_currency=USD&item_number=5138d0b85e6b5&residence_country=US&test_ipn=1&handling_amount=0.00&transaction_subject=5138d0b85e6b5&payment_gross=0.04&shipping=0.00&ipn_track_id=35c2de10de615&cmd=_notify-validate

# javascript - Transpose non-well formed XML document to an HTML Unordered List

> ID：15278250
> 
> 赞同：1
> 
> 时间：2013-03-07T17:51:53.123
> 
> 标签：javascript, jquery, html, xml, ajax

I am working on a project that requires me to parse an XML tree where the XML is not so great. I need to define a UL structure from the XML but the issue is that all the nodes are the same name with different attributes. I am using jQuery ajax function to call this XML file and return it on success. Here is my conundrum:

```
>     <class name="Juice">
>       <class name="OJ">
>         <class name="Low Sugar" />
>         <class name="Some Pulp" />
>       </class>
>       <class name="Apple" />
>       <class name="Grape" />
>     </class> 
```

As you can see the node names make it hard to transpose this to a uniformed list. I am trying to get this to recurse and look like this:

```
<ul>
    <li>Juice
        <ul>
            <li>OJ
                <ul>
                    <li>Low Sugar</li>
                    <li>Some Pulp</li>
                </ul>
            </li>
            <li>Apple</li>
            <li>Grape</li>
        </ul>
    </li>
</ul> 
```

my ajax call:

```
$.ajax({
    type: "GET",
    url: "nav.xml",
    dataType: "xml",
    success: function (xml) {
        xmlParser(xml);
    }
}); 
```

my xmlParser function:

```
function xmlParser(xml) {

    $(xml).find("class class").each(function () {

        var cname = $(this).attr("name");

        if ($(this).children.length > 0) {

            $("#nav .categories").append("<li id='" + cname + "'><a href='#'>" + cname + "</a></li>");
            $(xml).find("[name='" + cname + "']").children().each(function () {
                var cname1 = $(this).attr("name");
                $("#" + cname).append("<ul></ul>");
                $("#" + cname + " ul").append("<li id='" + cname1 + "'><a href='#'>" + cname1 + "</a></li>");
            });

        } else {
            $("#nav .categories").append("<li id='" + cname + "'><a href='#'>" + cname + "</a></li>");
        }
    });

} 
```

My HTML on the page where I want to append the unordered list:

```
<ul id="nav" class="categories"></ul> 
```

This ends up duplicating some code and is not recursive, I would like to get something where I can recall the parseXml function and pass some argument where the elements are not duplicated in the tree. I would rather trash this function and start over with something cleaner and neater.

Are there any jQuery plugins that do this already. I have checked this site and Google but nothing I am looking for works with this bad XML. All others I found use a well formed XML structure.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:51:20.030

这个怎么样？

```
<html>
<body>
<script>

var isIE = (window.attachEvent);

var txt = "<class name=\"Juice\"><class name=\"OJ\"><class name=\"Low Sugar\" /><class name=\"Some Pulp\" /></class><class name=\"Apple\" /><class name=\"Grape\" /></class>";
var doc = NewXmlDoc(txt);
var output = "<ul>";
WalkTree(doc.documentElement);
output+="</ul>";
alert( output );

function WalkTree(node)
{
    output += "<li>"+node.getAttribute("name");
    if (node.childNodes.length > 0)
    {
        output += "<ul>";
        for (var inx = 0; inx < node.childNodes.length; inx++)
        {
            var childNode = node.childNodes[inx];
            WalkTree(childNode);
        }
        output += "</ul>";
    }
    output += "</li>";
}

function NewXmlDoc(sXml) 
{
  var xmlDoc;
  if (isIE)
  {
    xmlDoc = new ActiveXObject("Microsoft.XMLDOM")
    xmlDoc.async = false;
    xmlDoc.loadXML(sXml);
    if (xmlDoc.parseError.errorCode != 0)
        return null;
  }
  else if (document.implementation && document.implementation.createDocument)
    xmlDoc = (new DOMParser()).parseFromString(sXml, "text/xml");

  return xmlDoc;
}

/* Result is...
<ul>
  <li>Juice
      <ul>
        <li>OJ
            <ul>
              <li>Low Sugar</li>
              <li>Some Pulp</li>
            </ul>
        </li>
        <li>Apple</li>
        <li>Grape</li>
      </ul>
   </li>
 </ul>
 */

</script> 
```

# javascript - 从浏览器托管的 JavaScript 应用程序到自定义服务器的跨域资源共享

> ID：15278258
> 
> 赞同：0
> 
> 时间：2013-03-07T17:52:10.207
> 
> 标签：javascript, xmlhttprequest, cross-domain, user-agent

我正在寻找一种方法来允许浏览器托管的 JS 应用程序向运行在不同端口上的服务器发出请求，并且可能与最初为 JS 应用程序提供服务的机器不同。

我正在从我的 Mac OS X Apache Web 服务器提供一个简单的 JavaScript (HTML5) 应用程序。我希望能够在 Windows、Android 和 OS X 的尽可能多的浏览器中运行这个应用程序。但我会满足于每个浏览器。

我的 JavaScript 应用程序使用 XMLHttpRequest 向返回 JSON 的最小自定义服务器发出请求。

因此，例如，我的 JS 应用程序可以在`http://10.0.1.3/poc/dashboard.html`

我的自定义服务器在同一台机器上运行，监听端口 49379 ......这样的请求`http://10.0.1.3:49379/find?name=Fred`将返回一组元组，其中 'name' 等于 'Fred'。

如果我将此请求直接输入到导航工具栏中，那么我会得到想要的结果。

如果我在 JS 中提出相同的请求，我会收到一些错误。

```
var theXHR = new XMLHttpRequest();
theXHR.onreadystatechange = onReadyStateHandler;
theXHR.open("GET", "http://" + ipAddress + ":49379/find?name=Fred", true);
theXHR.setRequestHeader("User-Agent", "XMLHTTP/1.0");
theXHR.send(null); 
```

我得到这两个错误：

1.  拒绝设置不安全的标头“User-Agent”

2.  XMLHttpRequest 无法加载`http://10.0.1.3:49379/find?name=Fred`。Access-Control-Allow- Origin`http://10.0.1.3`不允许 Origin。

我可以控制 Apache 服务器、JavaScript 和自定义服务器。这只是一个概念证明，将在孤立的网络上进行演示。所以，我不关心安全问题。

另外，我在 Chrome、Firefox、Safari 中运行。所有这些似乎都使用 XMLHttpRequest2 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:15:11.977

I have found the way to get around CORS is to use jsonp - which is json with a callback function - I've never used it with XMLHttpRequest, but it works with jQuery ajax functions like `$.getJSON`. In your url query string simply add the parameter `jsoncallback=?` and voila, no more CORS problems. `$.getJSON` dynamically assigns its `success` parameter to the callback function.

# jenkins - Jenkins cannot start xvnc, because USER variable is not set

> ID：15278260
> 
> 赞同：2
> 
> 时间：2013-03-07T17:52:28.190
> 
> 标签：jenkins, jenkins-plugins, vnc-server

Jenkins cannot start xvnc, because USER variable is not set. Here is the output that I get:

```
Starting xvnc
[workspace] $ vncserver :10 -localhost -nolisten tcp
vncserver: The USER environment variable is not set. 
```

Where should the variable be set? What should it be set to?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:25:12.567

验证运行 Jenkins 服务的用户是否存在环境变量。这可能与您登录的用户不同，也可能不同，具体取决于您的配置。

您可能还想查看[EnvInject 插件](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)，您应该能够使用它来配置您需要的环境。

# basic-authentication - WSO2 ESB：对代理服务使用基本身份验证

> ID：15278267
> 
> 赞同：0
> 
> 时间：2013-03-07T17:52:39.113
> 
> 标签：basic-authentication, wso2esb

我需要公开使用基本身份验证在 WSO2 ESB 4.3.0 上创建的代理服务。

这怎么可能？

提前致谢，

亚历山德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T12:19:50.547

本章有几篇文章参考[1] [2]

[1] [http://blog.facilelogin.com/2008/11/secure-your-service-with-http-basic.html](http://blog.facilelogin.com/2008/11/secure-your-service-with-http-basic.html)

[2] [http://blog.thilinamb.com/2011/04/how-to-access-web-service-using-http.html](http://blog.thilinamb.com/2011/04/how-to-access-web-service-using-http.html)

# java - JTable 中的进度条

> ID：15278268
> 
> 赞同：0
> 
> 时间：2013-03-07T17:52:40.937
> 
> 标签：java, swing, jtable, tablecelleditor

我有一个问题，我无法使用 JTable 和包含 JProgressBar 的编辑器和渲染器来解决。我有一个 JButton 用于启动增加进度条值的线程。问题是当我单击 JTable 的单元格时，进度条不再自行刷新。我尝试将 ChangeListener 添加到终止编辑的进度条，但其他单元格也不可编辑。
这是一个SSCCE：

```
public class TableTest {

    final static MyObjectTableModel model = new MyObjectTableModel();
    final static JTable table = new JTable(model);
    private static Map<Integer, Future> mapSubmittedReadProgress = new HashMap<Integer, Future>();
    final static StartProgressActionListener progressActionListener = new StartProgressActionListener();
    final static CloseActionListener closeActionListener = new CloseActionListener();
    final static ProgressChangeListener progressChangeListener = new ProgressChangeListener();

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TableTest().createGUI();
            }
        });
    }

    public static class MyObjectTableModel extends AbstractTableModel {

        private LinkedList<MyObject> myList;

        public MyObjectTableModel() {
            super();
            myList = new LinkedList<MyObject>();
        }

        public MyObjectTableModel(SortedSet<MyObject> myObjects) {
            super();
            this.myList = new LinkedList<MyObject>(myObjects);
        }

        public void addRow(MyObject myObject) {
            myList.add(myObject);
            fireTableRowsInserted(myList.size() - 1, myList.size() - 1);
        }

        public void removeRow(int row) {
            myList.remove(row);
            fireTableRowsDeleted(row, row);
        }

        @Override
        public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
            myList.set(rowIndex, (MyObject) aValue);
            fireTableCellUpdated(rowIndex, 0);
        }

        @Override
        public int getRowCount() {
            return myList.size();
        }

        @Override
        public int getColumnCount() {
            return 1;
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            switch (columnIndex) {
                case 0:
                    return MyObject.class;
                default:
                    throw new IllegalArgumentException("invalid column: " + columnIndex);
            }
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            switch (columnIndex) {
                case 0:
                    return myList.get(rowIndex);
                default:
                    throw new IllegalArgumentException("invalid column: " + columnIndex);
            }
        }

        public MyObject getMyObjectAt(int row) {
            return myList.get(row);
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return true;
        }

        public int getIndexOf(MyObject myObject) {
            return myList.indexOf(myObject);
        }
    }

    private static void createGUI() {
        JFrame f = new JFrame("TableTest");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        table.getModel().addTableModelListener(new TableModelListener() {
            @Override
            public void tableChanged(TableModelEvent e) {
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        setPreferredRowHeights();
                    }
                });
            }
        });

        for (int i = 0; i < 16; i++) {
            MyObject myObject = new MyObject();
            myObject.setText1("" + i);
            model.addRow(myObject);
        }
        table.setOpaque(false);
        table.setShowGrid(false);
        table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        table.setDefaultRenderer(MyObject.class, new MyTableCellRenderer());
        table.setDefaultEditor(MyObject.class, new MyTableCellEditor());
        table.setFillsViewportHeight(true);
        f.add(new JScrollPane(table));

        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    private static void setPreferredRowHeights() {
        for (int row = 0; row < table.getRowCount(); row++) {
            setPreferredRowHeight(row);
        }
    }

    private static void setPreferredRowHeight(int row) {
        int prefHeight = getPreferredRowHeight(row);
        table.setRowHeight(row, prefHeight);
    }

    public static int getPreferredRowHeight(int row) {
        int pref = 0;
        for (int column = 0; column < table.getColumnCount(); column++) {
            TableCellRenderer renderer = table.getCellRenderer(row, column);
            Component comp = table.prepareRenderer(renderer, row, column);
            pref = Math.max(pref, comp.getPreferredSize().height);
        }
        return pref > 0 ? pref : table.getRowHeight();
    }

    private static class MyTableCellEditor extends AbstractCellEditor implements TableCellEditor {

        private MyObjectPanel myObjectPanel = new MyObjectPanel();
        private transient List<CellEditorListener> listeners;

        public MyTableCellEditor() {
            myObjectPanel.addStartProgressActionListener(progressActionListener);
            myObjectPanel.addCloseActionListener(closeActionListener);
//            myObjectPanel.addProgressChangeListener(progressChangeListener);
            listeners = new ArrayList<>();
        }

        @Override
        public boolean isCellEditable(EventObject e) {
            return true;
        }

        @Override
        public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
            MyObject myObject = (MyObject) value;
            myObjectPanel.setMyObject(myObject);
            return myObjectPanel;
        }

        @Override
        public Object getCellEditorValue() {
            MyObject myObject = myObjectPanel.getMyObject();
            return myObject;
        }

        @Override
        public void addCellEditorListener(CellEditorListener l) {
            listeners.add(l);
        }

        @Override
        public void removeCellEditorListener(CellEditorListener l) {
            listeners.remove(l);
        }

        @Override
        protected void fireEditingStopped() {
            ChangeEvent ce = new ChangeEvent(this);
            for (int i = listeners.size() - 1; i >= 0; i--) {
                ((CellEditorListener) listeners.get(i)).editingStopped(ce);
            }
        }
    }

    private static class MyTableCellRenderer implements TableCellRenderer {

        private MyObjectPanel myObjectPanel = new MyObjectPanel();

        public MyTableCellRenderer() {
            myObjectPanel.addStartProgressActionListener(progressActionListener);
            myObjectPanel.addCloseActionListener(closeActionListener);
//            myObjectPanel.addProgressChangeListener(progressChangeListener);
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            MyObject myObject = (MyObject) value;
            myObjectPanel.setMyObject(myObject);
            return myObjectPanel;
        }
    }

    private static class ProgressChangeListener implements ChangeListener {

        @Override
        public void stateChanged(ChangeEvent e) {
            if (table.isEditing()) {
                table.getCellEditor().stopCellEditing();
            }
        }
    }

    private static class CloseActionListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            if (table.isEditing()) {
                table.getCellEditor().stopCellEditing();
            }
            model.removeRow(table.getSelectedRow());
        }
    }

    private static class StartProgressActionListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            if (table.isEditing()) {
                table.getCellEditor().stopCellEditing();
            }
            final ExecutorService executor = Executors.newFixedThreadPool(1);
            int row = table.getSelectedRow();
            MyObject myObject = (MyObject) table.getValueAt(row, 0);
            myObject.setStartEnable(false);
            myObject.setText1Enable(false);
            myObject.setText2Enable(false);
            Runnable progressRunnable = new ProgressRunnable(table.getSelectedRow(), myObject);
            final Future<?> submit = executor.submit(progressRunnable);
            mapSubmittedReadProgress.put(table.getSelectedRow(), submit);
        }
    }

    private static class ProgressRunnable implements Runnable {

        private ExecutorService executor;
        private long beT;
        private int dur = 30; // s
        private int progress = 0;
        private int row;
        private MyObject myObject;

        public ProgressRunnable(int row) {
        }

        private ProgressRunnable(int selectedRow, MyObject myObject) {
            this.row = selectedRow;
            this.myObject = myObject;
            beT = System.currentTimeMillis();
        }

        @Override
        public void run() {
            boolean abort = false;
            int i = 0;
            while (i <= dur && !abort) {
                final long curT = System.currentTimeMillis();
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    abort = true;
                    executor.shutdown();
                }
                if (Thread.currentThread().isInterrupted()) {
                    abort = true;
                    executor.shutdown();
                }
                progress = (int) Math.round(100 * ((double) (curT - beT) / 1000) / dur);
                myObject.setProgress(progress);
                table.setValueAt(myObject, row, 0);
                i++;
            }
        }
    }

    // My object
    static class MyObject {

        private String text1;
        private String text2;
        private int progress;
        private boolean startEnable = true;
        private boolean abortEnable = true;
        private boolean text1Enable = true;
        private boolean text2Enable = true;
        private boolean closeEnable = true;

        public String getText1() {
            return text1;
        }

        public void setText1(String text1) {
            this.text1 = text1;
        }

        public String getText2() {
            return text2;
        }

        public void setText2(String text2) {
            this.text2 = text2;
        }

        public int getProgress() {
            return progress;
        }

        public void setProgress(int progress) {
            this.progress = progress;
        }

        public boolean isStartEnable() {
            return startEnable;
        }

        public void setStartEnable(boolean startEnable) {
            this.startEnable = startEnable;
        }

        public boolean isAbortEnable() {
            return abortEnable;
        }

        public void setAbortEnable(boolean abortEnable) {
            this.abortEnable = abortEnable;
        }

        public boolean isText1Enable() {
            return text1Enable;
        }

        public void setText1Enable(boolean text1Enable) {
            this.text1Enable = text1Enable;
        }

        public boolean isText2Enable() {
            return text2Enable;
        }

        public void setText2Enable(boolean text2Enable) {
            this.text2Enable = text2Enable;
        }

        public boolean isCloseEnable() {
            return closeEnable;
        }

        public void setCloseEnable(boolean closeEnable) {
            this.closeEnable = closeEnable;
        }
    }

    // MyObjectPanel
    static class MyObjectPanel extends javax.swing.JPanel {

        /**
         * Creates new form MyObjectPanel
         */
        public MyObjectPanel() {
            initComponents();
        }

        /**
         * This method is called from within the constructor to initialize the
         * form. WARNING: Do NOT modify this code. The content of this method is
         * always regenerated by the Form Editor.
         */
        @SuppressWarnings("unchecked")
        // <editor-fold defaultstate="collapsed" desc="Generated Code">
        private void initComponents() {

            jTextField1 = new javax.swing.JTextField();
            jTextField2 = new javax.swing.JTextField();
            jProgressBar1 = new javax.swing.JProgressBar();
            btnStart = new javax.swing.JButton();
            btnStop = new javax.swing.JButton();
            btnClose = new javax.swing.JButton();

            btnStart.setText("Start");

            btnStop.setText("Stop");

            btnClose.setText("Close");

            javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
            this.setLayout(layout);
            layout.setHorizontalGroup(
                    layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                    .addContainerGap()
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jTextField1)
                    .addComponent(jTextField2)
                    .addComponent(jProgressBar1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(layout.createSequentialGroup()
                    .addComponent(btnStart)
                    .addGap(18, 18, 18)
                    .addComponent(btnStop)
                    .addGap(18, 18, 18)
                    .addComponent(btnClose)
                    .addGap(0, 199, Short.MAX_VALUE)))
                    .addContainerGap()));
            layout.setVerticalGroup(
                    layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(18, 18, 18)
                    .addComponent(jProgressBar1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(18, 18, 18)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnStart)
                    .addComponent(btnStop)
                    .addComponent(btnClose))
                    .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)));
        }// </editor-fold>
        // Variables declaration - do not modify
        private javax.swing.JButton btnClose;
        private javax.swing.JButton btnStart;
        private javax.swing.JButton btnStop;
        private javax.swing.JProgressBar jProgressBar1;
        private javax.swing.JTextField jTextField1;
        private javax.swing.JTextField jTextField2;
        // End of variables declaration

        void setMyObject(MyObject myObject) {
            jTextField1.setText(myObject.getText1());
            jTextField2.setText(myObject.getText2());
            jProgressBar1.setValue(myObject.getProgress());
            btnStart.setEnabled(myObject.isStartEnable());
            btnClose.setEnabled(myObject.isCloseEnable());
            btnStop.setEnabled(myObject.isAbortEnable());
            jTextField1.setEnabled(myObject.isText1Enable());
            jTextField2.setEnabled(myObject.isText2Enable());
        }

        MyObject getMyObject() {
            MyObject myObject = new MyObject();
            myObject.setText1(jTextField1.getText());
            myObject.setText2(jTextField2.getText());
            myObject.setProgress(jProgressBar1.getValue());
            myObject.setStartEnable(btnStart.isEnabled());
            myObject.setCloseEnable(btnClose.isEnabled());
            myObject.setAbortEnable(btnStop.isEnabled());
            myObject.setText1Enable(jTextField1.isEnabled());
            myObject.setText2Enable(jTextField2.isEnabled());
            return myObject;
        }

        void addStartProgressActionListener(ActionListener progressActionListener) {
            btnStart.addActionListener(progressActionListener);
        }

        void addCloseActionListener(ActionListener closeActionListener) {
            btnClose.addActionListener(closeActionListener);
        }

        void addProgressChangeListener(ChangeListener changeListener) {
            jProgressBar1.addChangeListener(changeListener);
        }
    }
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:23:55.947

有一些事情需要改变以使其工作。

首先，您的`MyObjectPanel`类需要有一个`MyObject`变量并在每次`getMyObject`调用时都返回该变量而不是一个新变量。`setMyObject`当调用 on时设置此变量`MyObjectPanel`。

```
// End of variables declaration

private MyObject object;
void setMyObject(MyObject myObject) {
  object = myObject;
...
}

MyObject getMyObject() {
  return object;
} 
```

其次，您的`MyObject`类需要一个`int row`变量才能知道它代表哪一行。也为这个变量做一个吸气剂。`for`在循环中设置这个变量`createGUI`。

最后，在`while`您的`ProgressRunnable`in 中`run`，如果您的进度正在运行，您需要停止编辑单元格。为此，您检查该行是否与进度变量相同`JTable.getEditingRow`的表。像这样的东西：`isEditing``myObject.getRow``myObject`

```
myObject.setProgress(progress);
          if (table.isEditing()) {
            if (table.getEditingRow() == myObject.getRow()) {
              table.getCellEditor().stopCellEditing();
            }
          }
          model.fireTableRowsUpdated(row, row); 
```

另请注意，我改为改为`setValue`那里`fireTableRowsUpdated`。

这应该使它按您的意愿工作。

您可以删除您的`TableModelListener`in`createGUI`并且之前只调用`setPreferredRowHeights`一次`pack`。

# selenium - Watir - 驱动 Chrome 时，file_field 调用点击了错误的元素

> ID：15278269
> 
> 赞同：2
> 
> 时间：2013-03-07T17:52:41.397
> 
> 标签：selenium, webdriver, watir

在包含带有选择文件输入的表单的网页上工作，如以下代码段所示：

```
<form ... >
<div class="form__wrap">
  <ul class="form__list">
    Import: 
    <label for="fileUploadInput" class="btn mediaChoose inline" id="fileUpload">Choose File</label>
    <input class="mediaFile" id="fileUploadInput" name="file" type="file" />
  </ul>
</div>
...
</form> 
```

使用 Watir WebDriver，以下返回 true：

```
puts file_field(:id => "fileUploadInput").exists? 
```

但是，下面的 file_field 调用会在 Chrome 上导致以下错误（适用于 Firefox 和 IE）：

```
file_field(:id => "fileUploadInput").set(pathtofile)

Element is not clickable at point (695, 314). Other element would receive the click:
<label for="fileUploadInput" class="btn mediaChooseinline" id="fileUpload">...</label> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T08:39:12.033

My guess is that you are driving Chrome, since I have seen errors like that before. The error message is saying that you are trying to click file upload element, but label is displayed over it, so clicking the desired coordinates on the screen will click the label instead of file upload element. Chrome gets confused at that point and refuses to click.

To make sure that is the problem, try the same code with another browser, Fireofox for example. Experience has shown that Firefox does not care if another element will receive the click.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:45:05.490

我尝试了一个类似于您发布的表单的缩小表单，它在 Chrome 和 Firefox 中对我有用。这是在 Windows 机器上测试的。我确实注意到 FireFox 和 Chrome 对路径目录有不同的语法。

HTML -

```
<!DOCTYPE html>
<html>
<body>

<form action="demo_form.asp">
Import:
<label for="fileUploadInput" class="btn mediaChoose inline" id="fileUpload" >test</label>
<input class="mediaFile" id="fileUploadInput" name="file" type="file" />

</form>

</body>
</html> 
```

测试代码

```
require 'watir-webdriver'

browser = Watir::Browser.new :firefox
browser.goto "C:\\Users\\mike\\ruby\\chrome1.html"

puts browser.file_field(:id => "fileUploadInput").exists?
#browser.file_field(:id => "fileUploadInput").set("c:\\Windows\\")  #chrome
browser.file_field(:id => "fileUploadInput").set("c:\\Windows\\..")  #firefox
browser.file_field(:id => "fileUploadInput").click 
```

# iphone - Iphone Settings.Bundle - 如何在运行时更新类型字段

> ID：15278271
> 
> 赞同：0
> 
> 时间：2013-03-07T17:52:45.457
> 
> 标签：iphone, settings.bundle

有没有办法更新 Settings.Bundle 文件中的 Type 字段？

我需要做的是在运行时切换 settings.Bundle 文件项的编辑能力。

因此，如果我在启动程序后有一个名为“name”的 root.plist 项目并且它的 Type 是“Title”，我希望能够将 Type 更改为“Text Field”。
我真正寻找的是一种使整个设置不可编辑然后再次可编辑的方法（我想切换此功能）。

如果在编译时有一个解决方案也可以讨论。

![在此处输入图像描述](../Images/78d2862480569dc232cc885b4c668970.png)

![在此处输入图像描述](../Images/ee073303a66db0d776f43ad150154ba2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:55:09.577

这是无法做到的。无法从运行时修改 Settings.bundle。您必须在您的应用程序中实现一个设置屏幕。

# c# - C# DataTable 中 DataColumn 的约束？

> ID：15278273
> 
> 赞同：4
> 
> 时间：2013-03-07T17:52:56.767
> 
> 标签：c#, .net, datatable, constraints, system.data

**是否可以在 C# 中的 DataTable 上创建值范围约束？**

我正在向 DataTable 动态添加一列：

```
this.PrimaryCorrelationMatrix.Columns.Add(sName, typeof(int)); 
```

但我希望此列中的所有值都是 [0, 10] 中的整数。我可以直接在 DataTable 上实现这样的约束吗？

我能想到的下一个最佳选择是创建一些具有可能值 [0, 10] 的对象，而不是 typeof(int)，使用 typeof(specialObj)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-20T14:51:52.037

一种方法是检查`e.ProposedValue`DataTable 的 ColumnChanging 事件。

要对特定列进行约束，可以使用 DataColumn 的 ExtendedProperties 集合作为标志来检查这些约束：

```
DataTable dt = new DataTable();
DataColumn dc = new DataColumn("Range", typeof(int));
dc.ExtendedProperties.Add("Min", 0);
dc.ExtendedProperties.Add("Max", 10);
dt.Columns.Add(dc);
dt.ColumnChanging += dt_ColumnChanging; 
```

在 ColumnChanging 事件中，您将检查这些属性是否存在，然后使用它们：

```
void dt_ColumnChanging(object sender, DataColumnChangeEventArgs e) {
  if (e.Column.ExtendedProperties.ContainsKey("Min") &&
      e.Column.ExtendedProperties.ContainsKey("Max")) {
    int min = (int)e.Column.ExtendedProperties["Min"];
    int max = (int)e.Column.ExtendedProperties["Max"];
    if ((int)e.ProposedValue < min) e.ProposedValue = min;
    if ((int)e.ProposedValue > max) e.ProposedValue = max;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-21T02:21:01.070

我可以建议您忘记数据表并使用类。您可以使用数据注释来验证您的模型。

使用此[属性](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.rangeattribute%28v=vs.95%29.aspx)验证特定属性的一系列值/

此代码摘自指定文章（验证范围的类示例）：

```
public class Product
{

  [Range(5, 50)]
  public int ReorderLevel { get; set; }

  [Range(typeof(Decimal),"5", "5000")]
  public decimal ListPrice { get; set; }

} 
```

你会发现使用类有很多好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-19T21:25:07.410

这是一篇旧文章，但我正在使用一种解决方案来同步未由[OleDbDataAdapter.FillSchema](https://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdataadapter.fillschema(v=vs.110).aspx)填充的 Check_Constraints值得一提的 Access 数据库。只需使用 OleDbConnection 检索[GetOleDbSchemaTable](https://support.microsoft.com/en-us/help/309681/how-to-retrieve-schema-information-by-using-getoledbschematable-and-vi)和 foreach() 提取验证文本表达式的行，并在附加到适当 Table.ColumnChanging 事件的适当表和列处创建匿名[委托。](https://stackoverflow.com/questions/13635505/anonymous-method-for-event-handler-not-a-leak)Access 模式提供的字符串验证将由[此处描述的方便的](https://www.codeproject.com/Articles/11939/Evaluate-C-Code-Eval-Function)[Eval()](https://www.codeproject.com/Articles/11939/Evaluate-C-Code-Eval-Function)函数动态评估。有我的代码：

```
DataTable schemaTable = connection.GetOleDbSchemaTable(OleDbSchemaGuid.Check_Constraints, null);
// Attach delegate Eval() of each Check_Constraints on proper Table/Column
foreach (DataRow myField in schemaTable.Rows)
{
    string constraint_name = "";
    string check_clause = "";
    foreach (DataColumn myProperty in schemaTable.Columns)
    {
        if (myProperty.ColumnName == "CONSTRAINT_NAME")
            constraint_name = myField[myProperty.ColumnName].ToString();
        if (myProperty.ColumnName == "CHECK_CLAUSE")
            check_clause = myField[myProperty.ColumnName].ToString();
    }
    var rule = constraint_name.Replace("[", "").Replace("]", "").Split('.');
    if (rule.Length == 3 && dataset.Tables.Contains(rule[0]) && dataset.Tables[rule[0]].Columns.Contains(rule[1]) && String.IsNullOrEmpty(check_clause) == false)
    {
        dataset.Tables[rule[0]].ColumnChanging += delegate (object sender, DataColumnChangeEventArgs e)
        {
            if (e.Column.ColumnName == rule[1] && Convert.ToBoolean(ToolBox.Eval(e.ProposedValue + check_clause)) == false)
            {
                throw new Exception("Tabela: " + rule[0] + ", coluna: " + rule[0] + ", cheque: " + check_clause);
            }
        };
        Debug.WriteLine(rule[0] + "." + rule[1] + ": " + check_clause);
    }
} 
```

# asp.net - ASP.Net VB SqlDataReader 格式

> ID：15278275
> 
> 赞同：0
> 
> 时间：2013-03-07T17:52:57.427
> 
> 标签：asp.net, vb.net, sqldatareader

我有一个从数据库读取数据的 SqlDataReader。如何格式化电话号码以在我的 aspx 页面上返回**(123) 456-7890**而不是 1234567890？我的读者如下：

`txtFaxPhone.Text = reader("FaxPhone").ToString()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:35:47.477

尝试这样的事情：

```
If reader.IsDbNull(reader.GetOrdinal("FaxPhone"))
   txtFaxPhone.Text = String.Empty
Else
   txtFaxPhone.Text = String.Format("(000) 000-0000", reader("FaxPhone"))
End If 
```

注意：这假设您的电话号码是一个数字。如果它是一个字符串，则必须对其进行子字符串化。

# grails - 整数约束列表

> ID：15278281
> 
> 赞同：0
> 
> 时间：2013-03-07T17:53:12.200
> 
> 标签：grails, groovy, constraints

我需要在约束中为信用卡到期年份写一个约束

这是我的限制

```
static constraints = {
    cardNumber(nullable:false, blank:false, creditCard:true)
    expiryMonth(nullable:false, range:1..12)
    expiryYear(nullable:false, range:(defaultExpiryYear)..(defaultExpiryYear + YEARS_TO_LIST))
} 
```

哪里`defaultExpiryYear = Current Year - 2000` 和`YEARS_TO_LIST = 10 years`。

但是，如果年份是`2095`因为范围将会消失`expiryYear(nullable:false, range:95..105)` ，但由于`expiryYear`年份只有 2 位数字，`2105`它将`05`失败，这种情况将失败。

如何将其转换为范围内的进入列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:55:30.513

这就是我修复它的方法，如果您有任何其他好的想法，其中 epiryStartYear 和 expiryEndYear 是 4 位数年份 expiryYear(nullable:false, InList:( getExpiryRangeList()))，请发表评论

```
def static private getExpiryRangeList() {
def  yearList = []
(expiryStartYear..expiryEndYear).each {
    yearList << it % 100
}
yearList
} 
```

或者我可以

```
def static private getExpiryRangeList() {
[expiryStartYear..expiryEndYear].collect(it % 100)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:59:29.487

我可能是错的，但从我的角度来看，你不应该担心大约 90 年后的事情。90 年后——谁能保证还有信用卡？如果还有信用卡，他们会有“到期年”吗？如果他们有一个到期日，它是如何计算的？

所以，很抱歉这可能不是您期望的答案，但考虑到过去几年的发展速度，我不会以任何方式担心您的问题；）

# c++ - “检测 32 位整数内的零字节”的代码有什么用？

> ID：15278282
> 
> 赞同：1
> 
> 时间：2013-03-07T17:53:12.357
> 
> 标签：c++, c, bit-manipulation

原帖 [http://bits.stephan-brumme.com/null.html](http://bits.stephan-brumme.com/null.html)

1.  这段代码有什么作用？（已回答，谢谢）

2.  它在哪里使用？

    ```
    bool hasZeroByteSimple(unsigned int x)
    {
        if ((x & 0x000000FF) == 0)
            return true;
        if ((x & 0x0000FF00) == 0)
            return true;
        if ((x & 0x00FF0000) == 0)
            return true;
        if ((x & 0xFF000000) == 0)
            return true;

        return false;
    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:01:50.817

检查 an`unsigned int`中是否有 0x00 字节，下面是一些示例：

```
0x11223300
0x11220033
0x11002233
0x00112233 
```

作为一个反例，虽然这个数字中有零，但它没有零`byte`：

```
0x70801206 (bytes: 0x70, 0x80, 0x12, 0x06) 
```

`byte`作为第二个反例，虽然这个数字连续有 8 个零位，但如果将数字分成四个组成字节，它就没有零：

```
0x10023456 (bytes: 0x10, 0x02, 0x34, 0x56) 
```

**编辑：** 针对您的附加问题，当您尝试在字符串中查找 NULL 终止符时，您将寻找零字节，就像您正在计算`strlen()`函数的等效项一样。您可以一次查看 4 个字节（无符号整数），而不是逐字节查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T17:55:56.363

它假设`unsigned int`32 位（4 字节）宽，并检查是否至少有一个字节`x`为零。

作者认为这可以用来加速`strlen()`，通过快速检测四个连续字符的块内是否存在 NUL 终止符。如果没有，`strlen()`可以继续下一个区块；如果有，则需要重新检查这四个字节以查看其中哪个是 NUL。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T17:59:01.037

这段代码只是检查数字是否有一个零字节，这意味着它是一个由 8 位组成的字节，全部设置为零。

0xFF 是 255，所以如果 x & 255 为零，这意味着最后一个字节全为零。0xFF00 是 255^2，所以在这种情况下，第二个字节全为零，依此类推，直到第四个字节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T17:56:15.637

就像名字说的那样，函数检查参数（4byte unsigned int）是否包含至少一个字节，这个字节完全为零。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T17:56:19.357

`x`由四个字节组成。它检查这些字节中的任何一个是否为零。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-07T17:58:33.870

它旨在等同于：

```
return memchr(&x, 0, sizeof x); 
```

即在所占用的内存中寻找一个零字节，`x`根据是否找到该字节返回真或假。

# gdb - 由于损坏，如何使用 gdb 免费观看固定内存

> ID：15278283
> 
> 赞同：0
> 
> 时间：2013-03-07T17:53:20.547
> 
> 标签：gdb, watchpoint

我有一个包含接口详细信息的指针数组。例如

```
tIfInfoStruct      *gapIfTable[16]; 
```

创建接口时已为指针分配内存。例如

```
gapIfTable[14] = 0x39cc345. 
```

经过一系列操作后， 的值`gapIfTable[14]`变为`NULL(0x0)`。我想看看，程序的哪一部分在释放内存。我是否可以 `gapIfTable[14]`使用

```
gdb> watch *0x39cc345 
```

我希望我的程序在上述内存地址变为时停止在 gdb 上`NULL`，以便我可以在 Gdb 中进行回溯以找到罪魁祸首。我正在运行一个多线程程序。

如果我的理解有误，请指正。如果我错了，请帮助我解决一些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:03:59.090

> gdb> 观看 *0x39cc345

这在位置上观察内存`0x39cc345`，而*不是*在位置上的内存`&gapIfTable[14]`成为`NULL`。

所以你可能想`watch *(gapIfTable+14)`改用。

# python - 为 Flask 应用程序单元测试设置（模拟）请求标头

> ID：15278285
> 
> 赞同：26
> 
> 时间：2013-03-07T17:53:23.323
> 
> 标签：python, unit-testing, flask

有谁知道在单元测试期间设置（模拟）FLask（Werkzeug）提供的请求对象的用户代理的方法？

就目前而言，当我尝试获取诸如 request.headers['User-Agent'] 之类的详细信息时，会引发 KeyError，因为 Flask test_client() 没有设置这些信息。（请参阅下面的部分堆栈跟踪）

在单元测试期间尝试从 Flask 项目中的请求对象获取用户代理时，会引发 KeyError。

```
File "/Users/me/app/rest/app.py", line 515, in login
    if request.headers['User-Agent']:
File "/Users/me/.virtualenvs/app/lib/python2.7/site-packages/werkzeug/datastructures.py", line 1229, in __getitem__
    return self.environ['HTTP_' + key]
    KeyError: 'HTTP_USER_AGENT' 
```

- 更新 -

连同下面的（接受的）解决方案，environ_base 提示将我引向这个其他[SO 解决方案](https://stackoverflow.com/questions/14872829/get-ip-address-when-testing-flask-application-through-nosetests)。该方案的前提是为 Flask 应用创建一个包装类，并重写**call**方法以自动设置环境变量。这样，为所有调用设置变量。所以，我最终实现的解决方案是创建这个代理类：

```
class FlaskTestClientProxy(object):
    def __init__(self, app):
        self.app = app

    def __call__(self, environ, start_response):
        environ['REMOTE_ADDR'] = environ.get('REMOTE_ADDR', '127.0.0.1')
        environ['HTTP_USER_AGENT'] = environ.get('HTTP_USER_AGENT', 'Chrome')
        return self.app(environ, start_response) 
```

然后用该代理包装 WSGI 容器：

```
app.wsgi_app = FlaskTestClientProxy(app.wsgi_app)
test_client = app.test_client() 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-07T20:33:22.430

`environ_base`调用时需要传入`get()`或`post()`。例如，

```
client = app.test_client()
response = client.get('/your/url/', 
                      environ_base={'HTTP_USER_AGENT': 'Chrome, etc'}) 
```

那么你`request.user_agent`应该是你传入的任何东西，你可以通过`request.headers['User-Agent']`.

有关更多信息，请参阅[http://werkzeug.pocoo.org/docs/test/#testing-api](http://werkzeug.pocoo.org/docs/test/#testing-api)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-08-08T09:05:18.613

即使@chris-mckinnel 写的有效，我也不会选择`environ_base`在这种情况下使用。

您可以轻松地执行如下所示的操作：

```
with app.test_request_context('url', headers={'User-Agent': 'Your value'}):
    pass 
```

这应该可以完成工作，同时它使您的代码保持显式 - 显式优于隐式。

如果您想知道可以将定义传递给`test_request_context`引用的内容`EnvironBuilder`；可以在[这里](http://werkzeug.pocoo.org/docs/0.14/test/#testing-api)找到。

# c++ - 访问违反写入位置 (visual studio 2008) 基于指针的代码

> ID：15278291
> 
> 赞同：0
> 
> 时间：2013-03-07T17:53:43.480
> 
> 标签：c++, pointers, struct, access-violation, unions

主要问题是在 sem->i = a; 之后 在调用 yylex 并且 c isalpha sem->s[i] = c; 时使用 不起作用，因为 sem->s[i] 它指向的地址有问题。

更多细节：所以我想做的是打开一个txt并阅读里面的内容，直到文件结束。如果它是函数 yylex 中的字母数字（例如：hello ，example2 hello45a），我将每个字符放入一个数组（sem->s[i]），直到我找到文件结尾或不是字母数字的东西。如果它是函数 yylex 中的一个数字（例如：5234254 example2: 5），我将每个字符放入数组 arithmoi[] 中。在使用 attoi 之后，我将数字放入 sem->i 中。如果我删除了 yylex 的 else if(isdigit(c)) 部分，它可以工作（如果 txt 中的每个单词都不以数字开头）。无论如何，当它只找到以字符开头的单词时，它的效果很好。然后，如果它找到数字（它使用 elseif(isdigit(c) 部分）它仍然可以工作......直到它找到一个以字符开头的单词。当发生这种情况时，会出现违反写入位置的访问权限，问题似乎出在我有箭头的地方。如果你能帮助我，我会非常感激。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>
#include <iostream>
using namespace std;

union SEMANTIC_INFO
{
    int i;
    char *s;
};

int yylex(FILE *fpointer, SEMANTIC_INFO *sem)
{
    char c;
    int i=0;
    int j=0;
    c = fgetc (fpointer);
    while(c != EOF)
    {
        if(isalpha(c))
        {
           do
           {
               sem->s[i] = c;//the problem is here... <-------------------
                       c = fgetc(fpointer); 
               i++;
           }while(isalnum(c));
        return 1;
        }
        else if(isdigit(c))
        {
            char arithmoi[20];
            do
            {
                arithmoi[j] = c;
                j++;
                c = fgetc(fpointer);
            }while(isdigit(c));
            sem->i = atoi(arithmoi); //when this is used the sem->s[i] in if(isalpha) doesn't work
            return 2;
        }
    }
    cout << "end of file" << endl;
    return 0;
}

int main()
{
    int i,k;
    char c[20];
    int counter1 = 0;
    int counter2 = 0;
    for(i=0; i < 20; i++)
    {
        c[i] = ' ';
    }
    SEMANTIC_INFO sematic;
    SEMANTIC_INFO *sema = &sematic;
    sematic.s = c;
    FILE *pFile;
    pFile = fopen ("piri.txt", "r");
    do
    {
       k = yylex( pFile, sema);
       if(k == 1)
       {
           counter1++;
           cout << "it's type is alfanumeric and it's: ";
          for(i=0; i<20; i++)
          {
              cout << sematic.s[i] << " " ;
          }
          cout <<endl;
          for(i=0; i < 20; i++)
          {
              c[i] = ' ';
          }
       }
       else if(k==2)
       {
           counter2++;
           cout << "it's type is digit and it's: "<< sematic.i << endl;

       }
    }while(k != 0);
    cout<<"the alfanumeric are : " << counter1 << endl;
    cout<<"the digits are: " << counter2 << endl;
    fclose (pFile);
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:48:32.760

这一行`main`正在创建一个**未初始化的** `SEMANTIC_INFO`

```
SEMANTIC_INFO sematic; 
```

整数的值`sematic.i`是未知的。

指针的值`sematic.s`未知。

然后，您尝试写入`sematic.s[0]`. 您希望它`sematic.s`指向可写内存，大到足以容纳该文件的内容，但您没有让它指向任何东西。

# function - Backbone.js 在模板中调用函数返回未定义

> ID：15278295
> 
> 赞同：1
> 
> 时间：2013-03-07T17:53:52.807
> 
> 标签：function, backbone.js, return-value

我正在构建一个待办事项应用程序，我有一个任务视图，它呈现一个任务模板，每个任务都有一个由用户选择的类别。每个任务都有一个 CategoryId 属性。我想显示每个任务的类别。所以我在任务视图中有以下功能：

```
getCategoryName: function (categoryId) {
    return app.Categories.each(function (category) {
        if (categoryId === category.get('CategoryId')) {
            return category.get('CategoryName');
        }
    });
} 
```

这是任务模板：

```
<script type="text/template" id="taskTemplate">
<div class="view">
    <input class="toggle" type="checkbox" <%= Completed ? 'checked' : '' %> />
    <label class="title"><%- Description %></label>
    <section class="info">
        <span class="category"><%- this.getCategoryName(CategoryId) %></span>
    </section>
    <button class="destroy"></button>
</div>
<input class="edit" value="<%- Description %>" />
</script> 
```

我调用 getCategoryName 函数并传递任务的 CategoryId。然后该函数循环遍历每个类别并检查传递的 CategoryId 是否与 Category 集合中的某个类别的 id 匹配，然后返回匹配的类别的名称。但没有类别显示。所以我认为我没有正确返回类别的名称。当我在回调函数中 console.log 时，它会出现在控制台中，但不会返回。

你有什么想法？你能建议这个问题的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:57:01.403

`Collection.each`实际上并没有返回任何东西；它只是遍历集合中的项目并为每个项目执行回调函数。您应该[`Collection.find`](http://underscorejs.org/#find)改用：

```
getCategoryName: function (categoryId) {

  //find model that matches
  var category = app.Categories.find(function (category) {
    return categoryId === category.get('CategoryId');
  });

  //return the name if found, otherwise returns undefined
  if(category)
    return category.get('CategoryName');
} 
```

# three.js - 如何管理具有可变屏幕尺寸的 WebGL (THREE.js)？

> ID：15278297
> 
> 赞同：2
> 
> 时间：2013-03-07T17:53:55.793
> 
> 标签：three.js, webgl

有什么方法可以根据显示尺寸管理网格尺寸和位置。

我正在做的是一个简单的动画演示，它将具有相机缩放和场景/相机位置的变化。

如果屏幕尺寸不同网格定位和网格尺寸都会出错..

我不知道如何控制这个？

如何在屏幕上查找网格位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:20:32.697

我的预感是某个聪明的人会出现并为您提供您真正想要的解决方案（例如如何移动相机以使对象保持正确的位置/大小），但这里有一些对您的问题的直接答案可能会有所帮助.

您可以通过将比例设置为 window.innerWidth 和 window.innerHeight 的某些函数来管理网格大小。

要确定网格是否在屏幕上，您可以使用以下代码。它将 3D 空间中的网格位置投影到浏览器中的 2D 空间。此外，请务必在移动相机或更改您正在查看的内容后调用 camera.updateMatrixWorld() - 否则您会得到不稳定的结果（感谢 WestLangley 的提示）。如果vector.x > window.innerWidth 或vector.x > window.innerHeight，则对象位于屏幕的可视区域之外。

```
function toXYCoord (object) {
    var vector = projector.projectVector(object.position.clone(), camera);
    vector.x = (vector.x + 1)/2 * window.innerWidth;
    vector.y = -(vector.y - 1)/2 * window.innerHeight;
    return vector;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T23:18:35.593

您要做的是检查屏幕上的调整大小，或者如下例所示，我用作容器的“桶” div...当我调整 div 的大小（以编程方式或其他方式）时，我只是制作一定要调用 onBucketResize()

```
function onBucketResize() {
    camera.aspect = bucket.clientWidth / bucket.clientHeight;
    camera.updateProjectionMatrix();
    renderer.setSize( bucket.clientWidth, bucket.clientHeight );
} 
```

设置，你可以使用类似的东西：

```
bucket.addEventListener( 'resize', onBucketResize, false ); 
```

或许

```
document.addEventListener( 'resize', onBucketResize, false ); 
```

任何合适的:)

让我知道这是否有帮助！

# algorithm - 查找数据集之间的相似性

> ID：15278303
> 
> 赞同：2
> 
> 时间：2013-03-07T17:54:12.773
> 
> 标签：algorithm, math, hash, dataset

我有包含不同值的数据集：

> Set1 = {X1, X2, ..., Xn}
> 
> Set2 = {X1, X2, ..., Xn}
> 
> ...

X 值具有不同的范围（这正是我无法弄清楚解决我的问题所需的算法的原因） - 有些是严格的 [0.0 - 1.0] 值，有些可能在不同/任何范围内。

我需要找到一种方法来“分组”这些集合，或者换句话说 - 找到两个给定集合之间的“相似性”。

显然，我可以简单地编写长链的“IF”语句，将每个值与另一个值进行比较，如果它们相差一些 DELTA 量，我可以指出两个给定的集合不是“相似的”。问题是，我的集合很大并且包含动态数据。因此，我需要一个*通用*函数来计算每组的某种哈希值（至少我是这样想的）：

> int hash1 = HashFunction(Set1)
> 
> int hash2 = HashFunction(Set2)
> 
> if (|hash1 - hash2| < DELTA): return "Sets are similar"

我真的很感激如何实现它的任何提示或想法。

**更新：**

阅读评论后，我意识到也许我也应该稍微改变一下我的问题：*您对良好的“相似性”指标有何建议？*

“相似性”是指一些动态值，表示“接近”集合的值有多接近。例如，如果我有一个测试集：*SetA{ 0.5, 100 }*，那么*SetB{ 0.5, 100 }*应该产生 1（或其他表示完美匹配的值）。同时比较*SetA*和*SetC { 0.1, 300 }*应该返回低很多的“匹配”值，而*SetD { 0.45, 101 }*应该返回一个类似于“完美匹配”的值。这里要注意的关键点，例如 0.45 和 0.5 的值比 100 和 300 的值“更相似”，因为：*|0.45 - 0.5| / 最大值(0.45, 0.5) < |100 - 300| / 最大（100, 300）*。

如果我只是计算两组之间的值差之和，它不会为我提供任何有意义的结果（因为两组可以包含完全不同的数字（从逻辑角度来看），但相互抵消却给出不正确的结果）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:22:28.340

所以，你想知道两个物体之间的距离。在数学中，一个集合与一个给出集合中对象距离的操作一起被称为[度量空间](http://en.wikipedia.org/wiki/Metric_space)。

显然，该指标有几种可能的选择。常见的是绝对差之和（距离 = |x1-y1|+|x2-y2|+...）和平方差之和（距离 = (x1-y1)²+(x2-y2)²+ ...）。如果这些指标不适合您，请定义“相似”的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:15:26.077

由于您的集合具有相同的基数，但您不关心顺序（即它们是*集合*，而不是*向量*），我建议的一种方法是：对集合进行排序并将它们视为向量。

现在的问题是，选择R ^(2上的哪个)[指标](http://en.wikipedia.org/wiki/Metric_space)。

选项很多。基本上，您可以选择 R 上的任何指标并将它们按坐标组合。

所以，如果你想要相对差异，你可以定义

reldist(x,y) = abs(xy)/max(x,y)

dist [1] (A,B) = sum [i] (reldist(a [i] ,b [i] ))

或者

dist [2] (A,B)=sqrt(sum [i] (reldist(a [i] ,b [i] ) ² ))

请记住，A 和 B 已排序，因此 a [i]应该匹配 b [i]。

# css - 填充/边距百分比 - 可能的 CSS 错误？

> ID：15278304
> 
> 赞同：1
> 
> 时间：2013-03-07T17:54:16.317
> 
> 标签：css

所以我正忙着制作一个水平滚动的网站。`div`我们要说的容器有一个`area`. 它的宽度是可变的，就像在传统站点上的平均`div`高度是可变的一样。

我的网站是“垂直响应”的，所以我使用了很多百分比值，包括高度，就像在普通网站上使用百分比宽度一样。

问题是，当我使用百分比填充/边距时，`div.area`它会根据 div 的宽度而不是高度来计算百分比，即使在设置时`padding-top`也是如此。

这类似于尝试`padding-left`在`body`正常站点上设置百分比并根据站点的高度计算填充。这很疯狂，而且完全不直观。

这是一个已知的问题？还是故意的？是否有任何仅限 CSS 的解决方法。我不想使用 JS 或其他东西来解决这样的问题我宁愿只在`em`s中设置填充

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T18:03:34.867

W3C 标准规定[填充](http://www.w3.org/TR/CSS2/box.html#padding-properties)和[边距](http://www.w3.org/TR/CSS2/box.html#margin-properties)的任何百分比都是元素宽度的百分比，而不是高度的百分比：

> 百分比是根据生成框的包含块的宽度计算的。请注意，“margin-top”和“margin-bottom”也是如此。如果包含块的宽度取决于此元素，则结果布局在 CSS 2.1 中未定义。

但是，`top`and`bottom`位置是由容器高度决定的；) 没有单一的 CSS-only 方法可以做到这一点，但如果你愿意加入一些 JS，那是完全可能的。

我能想到的一些解决方案（非详尽列表）：

1.  从顶部位移 50%（仅限 CSS），然后偏移为元素自身高度一半的负上边距（基于 JS 的计算）

2.  确定容器高度后，由 JS 计算顶部和底部填充/边距

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T08:03:06.077

只是偶然发现了同样的问题。适合我的解决方案：

不要设置宽度/高度并使用

```
.percent10 {
  top: 10%;
  left: 10%;
  bottom: 10%;
  right: 10%;
} 
```

# php - php 多词搜索算法/脚本不适用于搜索数组变量周围的单引号。我究竟做错了什么？

> ID：15278305
> 
> 赞同：0
> 
> 时间：2013-03-07T17:54:17.697
> 
> 标签：php, mysql, sql, algorithm, search

当人们搜索超过 1 个单词时，我有一个基本的搜索代码来搜索数据库。我做了很多研究，所有的算法似乎都差不多。修剪搜索词。`explode`他们变成了一个`array`. 然后使用`foreach`或`while`将数组的每个单词添加到`msql_query`.

但有一个问题。这是我的代码：

```
if (isset($_POST['search'])){
$words = $_POST['searchfield']; 
$arraySearch = explode(" ", trim($words));       
$countSearch = count($arraySearch);
$a = 0;
$query = "SELECT * FROM parts WHERE ";

while ($a < $countSearch)
{
  $query = $query."description RLIKE '$arraySearch[$a]'";
  $a++;
  if ($a < $countSearch)
  {
    $query = $query." AND ";
    }

  }

$results=mysql_query($query) or die($query);
 if(!$results){
    $msg = "No results, please try another search";}

} 
```

好的，看看`$query`它说的第二个变量`"decription RLIKE '$arraySearch'"`

为了使搜索工作，任何单词都`$arraySearch`必须用单引号引起来。但是当我尝试它时，脚本将无法运行。但是如果我去掉脚本运行的单引号。但它不执行搜索。它`die`出现了错误。在这种情况下，我将错误消息作为实际查询来尝试找出问题所在。

所以如果我去掉单引号并搜索“汽车轮胎”。查询将是`SELECT * FROM parts WHERE description RLIKE car AND description RLIKE tyre`，但它不会工作，除非它像这样：`SELECT * FROM parts WHERE description RLIKE 'car' AND description RLIKE 'tyre'`。

我知道这一点是因为我已经通过将它输入另一个查询来测试它来测试它。

我花了好几个小时试图解决这个问题，但我想不通。为什么要这样对我？我如何绕过它？为什么其他人似乎没有同样的问题？？？？？？

谢谢你的帮助:)

....事后添加：我认为这样做的唯一可能方法是在变量中已有单引号。但我不知道该怎么做。如： `$arraySearch = ("'car'", "'tyre'");`有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:36:33.537

要使引号正常工作，请尝试这样编写：

```
$query = $query."description RLIKE '".$arraySearch[$a]."'"; 
```

在单引号中添加`".`and`."`可能会解决您的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-01T11:32:05.400

尝试这样做：

```
$quote = "'";

$query = $query."description RLIKE $quote$arraySearch[$a]$quote"; 
```

# backbone.js - 需要帮助理解主干中嵌套视图的基础知识

> ID：15278312
> 
> 赞同：7
> 
> 时间：2013-03-07T17:54:34.857
> 
> 标签：backbone.js, backbone-views, backbone-routing

我一直在阅读关于backbone.js中嵌套视图的大量阅读，并且我了解很多，但仍然让我感到困惑的一件事是......

如果我的应用程序有一个 shell 视图，其中包含在使用应用程序的过程中不会改变的子视图（如页面导航、页脚等），我是否需要为每条路由渲染 shell 还是我做某种检查视图以查看它是否已经存在？

如果有人在应用程序中继续前进之前没有击中“家”路线，那么在我看来是这样。

我在谷歌搜索中没有发现任何有用的信息，所以任何建议都值得赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-07T18:15:37.043

由于您的“外壳”或“布局”视图永远不会改变，因此您应该在应用程序启动时渲染它（在触发任何路由之前），并将进一步的视图渲染**到**布局视图中。

假设您的布局看起来像这样：

```
<body>
  <section id="layout">
    <section id="header"></section>
    <section id="container"></section>
    <section id="footer"></section>
  </section>
</body> 
```

您的布局视图可能如下所示：

```
var LayoutView = Backbone.View.extend({
  el:"#layout",
  render: function() {
    this.$("#header").html((this.header = new HeaderView()).render().el);
    this.$("#footer").html((this.footer = new FooterView()).render().el);
    return this;
  },

  renderChild: function(view) {
    if(this.child) 
      this.child.remove();
    this.$("#container").html((this.child = view).render().el); 
  }
}); 
```

然后，您将在应用程序启动时设置布局：

```
var layout = new LayoutView().render();
var router = new AppRouter({layout:layout});
Backbone.history.start(); 
```

在您的路由器代码中：

```
var AppRouter = Backbone.Router.extend({
  initialize: function(options) {
    this.layout = options.layout;
  },

  home: function() {
    this.layout.renderChild(new HomeView());
  },

  other: function() {
    this.layout.renderChild(new OtherView());
  }
}); 
```

有很多方法可以给这只特殊的猫剥皮，但这是我通常处理它的方式。这为您提供了一个单一的控制点 ( `renderChild`) 来呈现您的“顶级”视图，并确保在`remove`呈现新元素之前前一个元素是 d 。如果您需要更改视图的呈现方式，这也可能会派上用场。

# python - Google 云端硬盘文件夹 ID

> ID：15278315
> 
> 赞同：5
> 
> 时间：2013-03-07T17:54:55.973
> 
> 标签：python, python-2.7, google-drive-api

我有一个文件夹路径，例如 /docs/word，我想获取“word”文件夹（最后一个文件夹）的 ID，以便在那里上传文件。我如何获得身份证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T14:38:27.997

所以我想通了。您需要做的是获取根目录的 id `drive_service.about().get().execute()["rootFolderId"]`，然后获取根目录中的文件，转到路径中的下一个文件夹，等等。顺便说一句，我编写的函数列出了路径中的文件夹并将它们保存到字典（使用 self.addPath()）

```
def listFolders(self, path):
    fId = self.getPathId(path) #get the id of the parent folder
    files = self.drive_service.children().list(folderId=fId).execute() #Request children
    files = files["items"] #All of the items in the folder

    folders = []
    for i in range(len(files)):
        sId = files[i]["id"]
        sFile = self.drive_service.files().get(fileId=sId).execute()
        if sFile["labels"]["trashed"] == False and sFile["mimeType"] == "application/vnd.google-apps.folder":
            self.addPath(path+sFile["title"]+"/", sFile["id"])
            folders.append(sFile["title"])
    return folders 
```

# charts - 水晶报表多日期计数

> ID：15278316
> 
> 赞同：1
> 
> 时间：2013-03-07T17:54:57.347
> 
> 标签：charts, crystal-reports, report, bar-chart

我正在尝试创建一个**水晶报表图表**来计算每个月打开和关闭的票的数量。

`Example they opened 10 tickets but 15 were close (7 from the same month 8 from other months).`

当我尝试生成报告时，我可以获得开放或封闭的工作。我知道问题出在分组上（如果按提交日期分组，则提交日期是正确的，但关闭是错误的，因为其他月份的日期是错误的，反之亦然）。

我尝试过重叠报告，但问题是报告的自动缩放可能不同，并且固定缩放不是一种选择。

因为过滤数据以返回所有提交日期或关闭日期大于一年前的行。我用总和来计算记录

例子：

```
if submitted > 1 year ago  
1    
else 
0 
```

封闭的也一样

对于显示，我需要一个条形图，其中两组按月份排序。那个月开的一个柱，那个月结束的一个柱。

类似的情况，但我无法修改 sql。 [Crystal Reports XI 中多个组中的一条记录](https://stackoverflow.com/q/9083599/1420820)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:22:43.173

我将根据多年与 Crystal 的搏斗提供我的解决方案。

在数据库（存储过程）或核心应用程序（C# 或其他）中进行数据处理，然后将一两个简单的表交给 Crystal。

这使您的报告轻巧且易于维护（或稍后移至另一个报告工具），并将逻辑的“胆量”放在可以在源代码控制中管理的纯代码中。

我相信你可以让它在 Crystal 中工作，但下个月你会忘记它是如何工作的，你的同事会更糟。让 Crystal 进行基本格式化并呈现漂亮的报告，但在其他地方进行核心数据处理。

花一个小时提供 Crystal 简单数据，而不是花一个小时在 Crystal 设计器中配置 5 级深度选项。

# dojo - Dojo 商店获取关联后，Dojo FitleringSelect 响应不佳

> ID：15278322
> 
> 赞同：0
> 
> 时间：2013-03-07T17:55:16.200
> 
> 标签：dojo

使用下面的代码，我试图将一个新商店分配给没有与之关联的商店的 FilteringSelect。

我的问题是单击 FilteringSelect 女巫时出现错误： *Uncaught TypeError: Object [object Object] has no method 'query' *

```
console.log("alternate on movement create");                
storeData = new Write({url: "/account/getall", clearOnClose: true, urlPreventCache: true});
storeData.fetch({ onComplete: function () { console.log("done");} });
console.log("after new read");                              
dijit.byId("far_mt_accountbundle_movementtype_toAccount").store = storeData; 
```

我正在使用道场 1.8

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:07:23.133

看起来您正在使用 ItemFileWriteStore，它是已弃用的 dojo.data API 的实现。要将 ItemFileWriteStore 与 FilteringSelect 一起使用，您应该将其包装在[dojo/store/DataStore](http://dojotoolkit.org/reference-guide/1.8/dojo/store/DataStore.html#dojo-store-datastore)

```
require(['dojo/store/DataStore','dojo/data/ItemFileWriteStore'],function(DataStore,Write){
  var writeStore = new Write({url: "/account/getall", clearOnClose: true, urlPreventCache: true});
  var dataStore = new DataStore({store: writeStore});
  dijit.byId('filteringSelect').set('store',dataStore);
}); 
```

# numpy - 将图像从 RGB 转换为 HSV 颜色空间

> ID：15278323
> 
> 赞同：26
> 
> 时间：2013-03-07T17:55:16.287
> 
> 标签：numpy, matplotlib, scipy, python-imaging-library

我在or文档中找不到这样的函数（即 `RGB_to_HSV()`），并且 Google 不显示指针，除了演示函数的配方，虽然不能按原样在数组上使用。`Scipy``Matplotlib's``ActiveState``rgb2hsv``Numpy`

有人知道捷径吗？

* * *

编辑：对不起，刚刚发现`matplotlib.colors.rgb_to_hsv()`这正是我想要的。我应该删除这个问题吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-07T18:23:56.420

Matplotlib 提供 RGB 到 HSV 的转换函数：[matplotlib.colors.rgb_to_hsv()](http://matplotlib.org/api/colors_api.html#matplotlib.colors.rgb_to_hsv)：

> `matplotlib.colors.rgb_to_hsv(arr)`
> 
> 将 numpy 数组中的 rgb 值转换为 hsv 值输入和输出数组应具有形状 (M,N,3)

# c - 理解 C 函数参数

> ID：15278325
> 
> 赞同：0
> 
> 时间：2013-03-07T17:55:28.857
> 
> 标签：c

我有这个函数声明：

```
void gaussian_blur
(
    const unsigned char* const inputChannel,
    unsigned char* const outputChannel,
    const float* const filter
) 
{..} 
```

我是 C 新手。我已经阅读了基本教程并理解了指针和常量的概念，但我无法理解这个参数列表的含义。

谁能解释这意味着什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T18:06:34.150

```
const unsigned char* const inputChannel; 
```

输入通道是一个指向常量 unsigned char 的常量指针。

```
unsigned char* const outputChannel; 
```

OutputChannel 是一个指向无符号字符的常量指针。

```
const float* const filter 
```

filter 是一个指向常量浮点数的常量指针。

> 常量指针 - 指针变量保存的地址不能更改。
> 
> 常量数据 - 数据被视为只读/常量，不能修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T18:00:04.503

从右到左阅读：

```
const unsigned char* const inputChannel 
```

`inputChannel`是一个指向常量的常量指针`unsigned char`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T18:14:33.590

如果您查看标记此问题的[c标签的信息链接，请向下滚动到](/questions/tagged/c "显示标记为“c”的问题")

> 可以节省您时间的重要说明

你会看到一个指向[螺旋规则](http://c-faq.com/decl/spiral.anderson.html)的链接，它对于破译你在 C 中不理解的事物的含义非常有帮助：

它的基本原理是读取变量的名称，然后向右移动，然后一次向左移动一个元素。在这种情况下，因为您的变量右侧没有任何内容，您只需向左移动：

```
 inputChannel,                           // inputChannel is a
 const inputChannel,                     // constant
 * const inputChannel,                   // pointer
 char* const inputChannel,               // to a char
 unsigned char* const inputChannel,      // which is unsigned
 const unsigned char* const inputChannel // which is constant 
```

所以它是一个常量指针，它指向的（一个无符号字符）也是常量。相当容易。

如果这太多了，你也可以随时作弊，把你不明白的东西扔到这里：[http](http://cdecl.org/) : //cdecl.org/ 它会用英语吐回（通常）

# sql - 是否可以在一个查询中执行多个 SQL 选择语句？两个选择语句都在同一个表上

> ID：15278326
> 
> 赞同：5
> 
> 时间：2013-03-07T17:55:34.647
> 
> 标签：sql, join

这可能是由于我的 SQL 知识有限，但我正在尝试使用如下语句获取数据：

```
SELECT hostname 
FROM mytable 
WHERE hostname NOT LIKE '%obl%' 
    AND group NOT IN ('group1','group2','group3','group4','group5','group6','group7')
    AND osname LIKE '%Windows%' 
    AND hostname NOT LIKE 'nic%' 
```

我意识到这可能是一个非常糟糕的说法，但到目前为止它已经奏效了。一开始我排除了主机名不像“obl”的条目。我有另一个这样的查询：

```
SELECT hostname 
FROM mytable 
WHERE hostname LIKE '%obl%' 
    AND group IN ('group9','group0') 
```

据我了解，在这种情况下不会使用**连接，因为两个查询都在同一个表上（尽管我对连接的了解非常有限）。**我正在通过网络服务访问这个数据库，但我不确定它是什么类型的数据库。

有没有人知道如何在一个查询中从两个查询中获取值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T17:58:04.377

您应该使用 UNION 语句。

```
SELECT hostname FROM mytable  
WHERE hostname  
    NOT LIKE '%obl%' AND 
    group NOT IN ('group1','group2','group3','group4','group5','group6','group7')  
    AND osname LIKE '%Windows%' 
    AND hostname not LIKE 'nic%'

UNION

SELECT hostname FROM mytable 
WHERE hostname 
    LIKE '%obl%' 
    AND group in ('group9','group0') 
```

那会做到这一点，但我认为你可以重新考虑那些条件。如有必要，我会考虑一下并进行编辑。

**编辑：**您可以通过单个查询来实现您想要实现的目标，而无需联合。

```
SELECT hostname FROM mytable 
WHERE (
    hostname NOT LIKE '%obl%' 
    AND group NOT IN ('group1','group2','group3','group4','group5','group6','group7') 
    AND osname LIKE '%Windows%' 
    AND hostname NOT LIKE 'nic%'
)
OR (
    hostname LIKE '%obl%' 
    AND group IN ('group9','group0')
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:01:35.843

您可以使用`union`语句或`OR`条件来组合这两个语句。

```
select hostname from mytable where (hostname not like '%obl%' and group not in ('group1','group2','group3','group4','group5','group6','group7') and osname like '%Windows%' and hostname not like 'nic%')
OR
(hostname like '%obl%' and group in ('group9','group0')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T18:03:03.487

您可以将两个 WHERE 条件组合成一个条件，使用 OR 来应用它们。像这样的东西：

```
SELECT hostname FROM mytable WHERE 
(hostname NOT LIKE '%obl%' AND group NOT IN ('group1','group2','group3','group4','group5','group6','group7') AND osname LIKE '%Windows%' AND hostname NOT LIKE 'nic%')
OR
(hostname LIKE '%obl%' AND group IN ('group9','group0') 
```

两点：

*   使用大写的 SQL 词更容易阅读查询。
*   如果您想确保不会重复相同的主机名，也许您将不得不使用 SELECT DISTINCT 主机名。

# bash - 通过 CLI 检索带有特定主题标签的最新推特推文

> ID：15278330
> 
> 赞同：2
> 
> 时间：2013-03-07T17:55:45.240
> 
> 标签：bash, shell, twitter, hashtag

我正在寻找一种方法来通过 cli (bash) 检索包含特定 twitter 主题标签的最新推文。运行如下：“./get-tweet.sh blah”并返回“伙计，我感觉如此#blah”谢谢！

看起来我可以通过这样做获得 rss 提要：

curl -s ' [http://search.twitter.com/search.rss?q=%23blah&rpp=1](http://search.twitter.com/search.rss?q=%23blah&rpp=1) '

然后我只需要删除正确的xml

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:44:36.133

我会看[TTYtter](http://www.floodgap.com/software/ttytter/)这样做。特别是它允许像这样编写脚本：

```
ttytter -runcommand="/search #haiku" 
```

尽管对于 oAuth，您需要以交互方式进行初始设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:33:31.010

好的，我一起破解了一个解决方案：

# !/bin/bash

curl -s " [http://search.twitter.com/search.rss?q=%23](http://search.twitter.com/search.rss?q=%23) $1&rpp=1" > /tmp/hashtag.xml

xmllint --xpath '/rss/channel/item/title/text()' /tmp/hashtag.xml | sed 's/http\://t.co/*//g' | sed 's/#//g' | sed 's/@//g' |xargs -i -0 echo -n "{}" echo

rm /tmp/hashtag.xml

# java-io - 如果有 3 个 [(a OR b) AND c] 问题，老师只想要一个

> ID：15278342
> 
> 赞同：0
> 
> 时间：2013-03-07T17:56:19.380
> 
> 标签：java-io

这是一个奇怪的问题，我知道，但我需要编写一个包含 3 个问题的程序，基本上 [(a OR b) AND c] 不使用 if。我的老师想让我们问用户动物是否是黑色的，然后回答 y 或 n。如果 n 询问它是否为白色并回答 y 或 n。如果任一陈述为真，则询问它是否友好，回答 y 或 n。如果它是黑色或白色且友好的，那么我们会收到一条消息，它可以和我一起回家，否则我们会收到一条抱歉消息。我的问题是她说我们只能使用一个 if 并且必须使用 compareToIgnoreCase 和一个函数。我可以用 if 来做到这一点，但我什至不知道如何在不使用 if 的情况下开始。请帮忙，我已经用谷歌搜索过，阅读了所有听起来很有希望的各种答案，而我一直在寻找的所有内容都指示我使用 if 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:49:05.090

这似乎是一个教你[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)的问题。这个想法是`answersYesTo(String question)`在你的布尔表达式中使用并使用它`(a || b) && c`。短路评估将从评估开始，`a`并且仅在评估`b`为`a`假时进行评估。这样做的原因是如果`a`为真，那么我们已经知道它`a||b`为真，因此无需评估子表达式的最后一部分。

此外，`c`如果评估为 false，则不会评估`a||b`，因为此时我们知道表达式将评估为`false`.

以下代码显示了一种可能的实现：

导入 java.io.Console；

```
public class App 
{

    static public void main(String [] args) {
        boolean allowedToBringHome = 
            (answersYesTo("Is the animal black?")||answersYesTo("Is the animal white?")) 
            && answersYesTo("Is it friendly?");

        if( allowedToBringHome ) {
            print("You can bring the animal home.");
        }
        else {
            print("Sorry, you can't bring the animal home.");
        }
    }

    static boolean answersYesTo(String question) {
        String answer = System.console().readLine(question);
        return answer.compareToIgnoreCase("y")==0;
    }

    static void print(String msg) {
        System.out.println(msg);
    }
} 
```

注意：使用短路评估时，请始终考虑代码的可读性。复杂的表达式变得难以快速阅读和掌握，这增加了引入错误的风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:05:24.223

您可以尝试使用三元运算符（[http://en.wikipedia.org/wiki/%3F:](http://en.wikipedia.org/wiki/%3F:)）

您没有使用实际的“if”运算符，而是使用 if/else。

例子：

> 如果 (a == b) 返回 1; 否则返回 0；

是相同的

> 返回（a == b）？1 : 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T18:05:28.023

我认为我们不会为您做作业，但根据您的老师对使用“如果”的定义，您也许可以使用三元运算符。

即你可以写 if (A) do x else do y as A 吗？x：是的。

或者，阅读 switch/case 语句。对于这类事情，这不是一个很好的解决方案，但确实适用于您的限制。

# c++ - C++11 线程安全队列

> ID：15278343
> 
> 赞同：79
> 
> 时间：2013-03-07T17:56:22.413
> 
> 标签：c++, multithreading, c++11, queue, condition-variable

我正在处理的一个项目使用多个线程来处理一组文件。每个线程都可以将文件添加到要处理的文件列表中，因此我将（我认为是）一个线程安全队列放在一起。相关部分如下：

```
// qMutex is a std::mutex intended to guard the queue
// populatedNotifier is a std::condition_variable intended to
//                   notify waiting threads of a new item in the queue

void FileQueue::enqueue(std::string&& filename)
{
    std::lock_guard<std::mutex> lock(qMutex);
    q.push(std::move(filename));

    // Notify anyone waiting for additional files that more have arrived
    populatedNotifier.notify_one();
}

std::string FileQueue::dequeue(const std::chrono::milliseconds& timeout)
{
    std::unique_lock<std::mutex> lock(qMutex);
    if (q.empty()) {
        if (populatedNotifier.wait_for(lock, timeout) == std::cv_status::no_timeout) {
            std::string ret = q.front();
            q.pop();
            return ret;
        }
        else {
            return std::string();
        }
    }
    else {
        std::string ret = q.front();
        q.pop();
        return ret;
    }
} 
```

但是，我偶尔会在`if (...wait_for(lock, timeout) == std::cv_status::no_timeout) { }`块内发生段错误，并且 gdb 中的检查表明由于队列为空而正在发生段错误。这怎么可能？据我了解，`wait_for`只有在收到通知时才会返回`cv_status::no_timeout`，并且这应该只在`FileQueue::enqueue`刚刚将新项目推送到队列后才会发生。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-04-18T06:00:48.270

最好使条件（由您的条件变量监控）成为 while-loop: 的逆条件 `while(!some_condition)`。在这个循环中，如果条件失败，您将进入睡眠状态，从而触发循环体。

这样，如果您的线程被唤醒（可能是虚假的），您的循环仍将在继续之前检查条件。将*条件*视为感兴趣的状态，并将*条件变量*更多地视为来自系统的信号，表明该状态**可能**已准备好。循环将完成实际确认它是真实的繁重工作，如果不是，则进入睡眠状态。

我刚刚为异步队列编写了一个模板，希望对您有所帮助。这`q.empty()`是我们想要的相反条件：队列中有东西。所以它作为while循环的检查。

```
#ifndef SAFE_QUEUE
#define SAFE_QUEUE

#include <queue>
#include <mutex>
#include <condition_variable>

// A threadsafe-queue.
template <class T>
class SafeQueue
{
public:
  SafeQueue(void)
    : q()
    , m()
    , c()
  {}

  ~SafeQueue(void)
  {}

  // Add an element to the queue.
  void enqueue(T t)
  {
    std::lock_guard<std::mutex> lock(m);
    q.push(t);
    c.notify_one();
  }

  // Get the "front"-element.
  // If the queue is empty, wait till a element is avaiable.
  T dequeue(void)
  {
    std::unique_lock<std::mutex> lock(m);
    while(q.empty())
    {
      // release lock as long as the wait and reaquire it afterwards.
      c.wait(lock);
    }
    T val = q.front();
    q.pop();
    return val;
  }

private:
  std::queue<T> q;
  mutable std::mutex m;
  std::condition_variable c;
};
#endif 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-03-07T18:01:33.463

根据标准`condition_variables`允许虚假唤醒，即使事件没有发生。在虚假唤醒的情况下，它会返回`cv_status::no_timeout`（因为它是唤醒而不是超时），即使它没有被通知。正确的解决方案当然是在继续之前检查唤醒是否真的合法。

详细信息在标准§30.5.1 [thread.condition.condvar] 中指定：

> — 当调用 notify_one()、调用 notify_all()、abs_time 指定的绝对超时 (30.2.4) 到期或虚假发出信号时，该函数将解除阻塞。
> 
> ...
> 
> **返回：**如果 abs_time 指定的绝对超时 (30.2.4) 已过期，则返回 cv_status::timeout，否则为 cv_status::no_timeout。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-03-07T18:08:37.297

这可能是您应该这样做的方式：

```
void push(std::string&& filename)
{
    {
        std::lock_guard<std::mutex> lock(qMutex);

        q.push(std::move(filename));
    }

    populatedNotifier.notify_one();
}

bool try_pop(std::string& filename, std::chrono::milliseconds timeout)
{
    std::unique_lock<std::mutex> lock(qMutex);

    if(!populatedNotifier.wait_for(lock, timeout, [this] { return !q.empty(); }))
        return false;

    filename = std::move(q.front());
    q.pop();

    return true;    
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-05-20T21:09:36.017

除了接受的答案之外，我想说实现正确的多生产者/多消费者队列很困难（不过，自 C++11 以来更容易）

我建议您尝试（非常好的）[无锁 boost 库](http://www.boost.org/doc/libs/1_55_0/doc/html/lockfree.html)，“队列”结构将做您想做的事，具有无等待/无锁保证并且[不需要 C++11 编译器](http://www.boost.org/doc/libs/1_55_0/doc/html/lockfree/appendices.html#lockfree.appendices.supported_platforms___compilers)。

我现在添加这个答案是因为无锁库对于提升来说是相当新的（我相信从 1.53 开始）

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-07T18:10:11.570

我会将您的出列函数重写为：

```
std::string FileQueue::dequeue(const std::chrono::milliseconds& timeout)
{
    std::unique_lock<std::mutex> lock(qMutex);
    while(q.empty()) {
        if (populatedNotifier.wait_for(lock, timeout) == std::cv_status::timeout ) 
           return std::string();
    }
    std::string ret = q.front();
    q.pop();
    return ret;
} 
```

它更短，并且没有像您那样重复的代码。仅发出它可能会等待更长的超时时间。为防止您需要记住循环之前的开始时间，请检查超时并相应地调整等待时间。或指定等待条件的绝对时间。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-17T19:40:57.303

这个案例也有 GLib 解决方案，我还没试过，但我相信这是一个很好的解决方案。 [https://developer.gnome.org/glib/2.36/glib-Asynchronous-Queues.html#g-async-queue-new](https://developer.gnome.org/glib/2.36/glib-Asynchronous-Queues.html#g-async-queue-new)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-10-15T17:01:45.283

[BlockingCollection](https://github.com/CodeExMachina/BlockingCollection)是一个 C++11 线程安全的集合类，它提供对队列、堆栈和优先级容器的支持。它处理您描述的“空”队列场景。以及“完整”队列。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-17T23:48:58.093

你可能喜欢 lfqueue，[https://github.com/Taymindis/lfqueue](https://github.com/Taymindis/lfqueue)。它是无锁并发队列。我目前正在使用它来消耗来自多个来电的队列，并且像一个魅力一样工作。

# google-visualization - 将值放置在图表上而不是工具提示中的条形图

> ID：15278347
> 
> 赞同：1
> 
> 时间：2013-03-07T17:56:26.690
> 
> 标签：google-visualization, bar-chart

我正在尝试使用谷歌图表 api 创建一些图表。我需要一个条形图，其值直接放在图表上（而不是默认设置的工具提示上）。我知道这在图像图表中是可能的（现在已弃用）。有没有办法在谷歌图表中获得类似的结果？我将不胜感激任何帮助或建议...

以下是我想要实现的一些示例：

![在此处输入图像描述](../Images/ad3e4307d392deed991447070e180393.png)

![在此处输入图像描述](../Images/5e8e2ef32dff144956fbcea4038c1b8b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:34:00.917

不，没有。[请参阅此问题](https://stackoverflow.com/questions/15249247/google-visualization-how-to-show-some-icon-at-the-top-of-a-column/15262949#15262949)中的答案。

引用如下：

* * *

目前不支持此功能。实现它的唯一方法是编写一些花哨的 javascript 来创建它。

我不是使用 javascript 处理 SVG 的专家，也不会假装是。我会让你知道我在 Firebug 中发现了什么，并与大家分享。

使用[此图表](http://code.google.com/apis/ajax/playground/?type=visualization#area_chart)，我检查了创建的 SVG 元素。它有 5 个不同的`<g>`（我假设是组）元素。

*   `g[1]`包含有关标题的信息。
*   `g[2]`包含图例
*   `g[3]`contains the chart information (sub-groups with the chart area, gridlines, series, axis label values, etc.) -- when a point is selected, this shows the circle/double-circle for that point too
*   `g[4]`包含轴标题
*   `g[5]`包含两个单独组中的工具提示，但仅在鼠标悬停时

这是当您将鼠标悬停在某个点时触发的代码中的函数：

```
Y.Ov=function(a,b,c){a=new kv(a);var d=this.Mf.pk(Wj);b=b[zc](sd);d[w](this.Mf[sb](b[0]));for(var e=1;e<b[L];++e)d[w](this.Mf.pk(ti)),d[w](this.Mf[sb](b[e]));Qt(d,c);a.t()[w](d);a.Zz(100);a.Yz(100);this.on[y](a);return a};Y.appendChild=function(a,b){if(b){var c;if(b[Bc]==Sv){if(!b.Th())return;c=b.t()}else c=b;a.t()[w](c)}};Y.replaceChild=function(a,b,c){a.t().replaceChild(b,c);Cu(c)};Y.Fg=function(a){a.Th()&&this.xs(a.t())};Y.xs=function(a){this.Mf.Fg(a)};Y.ds=function(a){this.Mf.removeNode(a);Cu(a)}; 
```

这可能对你没有帮助。我找不到任何简单的方法来为这个（哦，非常需要的）功能创建一个解决方法。抱歉还没有解决方案！

# android - vmware 上的 Android X86，Google Play 需要 wifi

> ID：15278349
> 
> 赞同：5
> 
> 时间：2013-03-07T17:56:27.233
> 
> 标签：android, x86, vmware, google-play, emulation

我在 vmware 机器上安装了 Android X86 4.0 RC2（eeepc 版）（我更喜欢 VMware，因为它真的比 Android 虚拟设备快）。我用终端启用了以太网，互联网和地图运行良好。

但是，当我打开 Google Play 时（我需要这个服务，不仅是为了安装应用程序），它会要求一个帐户并需要 wifi 连接才能完成操作。显然，VMware 不模拟 wifi 网络。

任何可能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:37:39.293

出于显而易见的原因，需要帐户信息。关于无线，您可以尝试编写一个伪造它的内核模块。我个人的建议是使用物理设备，因为我一直发现缺乏仿真

# php - 从大类和小类创建对象。（表现）

> ID：15278350
> 
> 赞同：0
> 
> 时间：2013-03-07T17:56:29.280
> 
> 标签：php, performance, oop

假设给定 2 个 claas`a`和`b`

`a`类很大，里面有几十个方法。

`b`类代码只有这样：

```
 class b {
        function __construct () {
            // do nothing
        }
    } 
```

我想测试从这些类创建对象的性能，第一次，我在循环中从大类创建对象`a`百万次：

```
 $date_1 = microtime(TRUE);

    for ($i = 0; $i < 1000000; $i++) {
        $obj = new a();
    }

    $date_2 = microtime(TRUE);

    echo $date_2 - $date_1; 
```

结果大约是 0.34 秒。

现在我从小班`b`循环中创建对象。

我很奇怪，结果比第一次测试时间多，大约 0.47 秒......

你能告诉我，为什么会这样吗？还是我在测试中的某个地方错了？

# c++ - 在 C++ 中将信息作为变量存储在文本文件中

> ID：15278354
> 
> 赞同：-3
> 
> 时间：2013-03-07T17:56:43.833
> 
> 标签：c++, input, format

我需要 C++ 从*输入*文件中获取信息并将其存储为*不同变量*的帮助。它采用以下格式。

> 我们，诺斯菲尔德，诺斯菲尔德，弗吉尼亚州，9342,38.8042,-77.205

我该怎么做呢？

编辑：对不起，这是我第一次使用论坛。这就是我到目前为止所拥有的。

```
#include "city.h"

void readLineOfData( istream& in, string &country,  string &city, string &city2, 
    string &state, int &pop, string &lat, string &longi);

void output( ostream& out, string country, string city, string city2,
    string state, int pop, string lat, string longi );

void cities( istream& in, ostream& out )
{
    ifstream ("cities.txt");
    string country, city, city2, state, lat, longi;
    int pop;
    readLineOfData(in, country, city, city2, state, pop, lat, longi);
    while(!in.fail())
    {

        output( cout, country, city, city2, state, pop, lat, longi );

        readLineOfData(in, country, city, city2, state, pop, lat, longi);
    }
    return;
}

void readLineOfData( istream& in, string &country,  string &city, string &city2, 
    string &state, int &pop, string &lat, string &longi)
{
    getline( in, country, ',');
    getline( in, city, ',');
    getline( in, city2, ',');
    getline( in, state, ',');
    in >> pop;
    in.ignore( 200, ',' );
    getline( in, lat, ',');
    getline( in, longi, '\n' );

}

void output( ostream& out, string country, string city, string city2,
    string state, int pop, string lat, string longi )
{
    out << country << endl;
    out << city << endl;
    out << city2 << endl;
    out << state << endl;
    out << pop << endl;
    out << lat << endl;
    out << longi << endl;
} 
```

目前我已经设置它来设置变量。我有一个有助于缩短代码的头文件。我现在需要能够识别最高的人口，如果不使用数组，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:12:22.060

除非将它们写入源代码，否则您无法将它们变成真正的变量。

您可以获得的最接近通常是将它们存储在 a`std::map`或`std::unordered_map`以预期的“变量名”作为键。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T18:14:10.553

尝试这样的事情：

```
std::vector<std::string> data;
std::ifstream in("file.txt");
std::string temp = "";
for(std::istream_iterator<char> iter(in); in; ++iter) {
  if(*iter == ',') {
    data.push_back(temp);
    temp = "";
  }
  else {
    temp += *iter;
  }
} 
```

然后，您可以访问不同的值作为`data`缓冲区中的索引。

# c++ - 不使用 sqrt 函数求平方根的底

> ID：15278355
> 
> 赞同：-5
> 
> 时间：2013-03-07T17:56:52.387
> 
> 标签：c++, algorithm

假设我有一个整数`n`，我想找到该数`m`的平方小于的最大数`n`。

这个问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T18:05:16.907

“最优解”很少存在，但一个相当快的算法如下（~~有人知道它的名字吗？~~），它被称为巴比伦方法：

```
int num = 4567;

int r1 = num / 2;
int r2 = 2;

while (std::abs(r2 - r1) > 1) {
     r2 = (r1 + r2) / 2;
     r1 = num / r2;
} 
```

这里`r1`和`r2`是平方根的较低和较高的近似值。在您的情况下，您将需要较小的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:19:36.177

由于您只是在寻找整数部分，您可以这样做：

1.  以尽可能低的 m 开始循环，即 m=1 （除非您允许 n < 1 ）
2.  检查 m*m 是否大于 n
3.  如果不是，则需要检查下一个 m，因此将 m 加 1 并继续循环的下一个迭代
4.  如果它更大，则停止循环并从 m 中减去 1，因为 m-1 是小于 n 的平方根的最终值。

```
int n = 123; //or whatever you want
int m = 1;
while (m * m <= n) {
    m = m + 1;
}
return (m - 1); 
```

# ios - 以编程方式读取 PDF 嵌入式搜索索引

> ID：15278363
> 
> 赞同：3
> 
> 时间：2013-03-07T17:57:07.933
> 
> 标签：ios, objective-c, search, pdf, indexing

存在使用 Acrobat pro（工具/文档处理/管理嵌入式索引）和其他 3rd 方程序（例如 Nuance）将搜索索引嵌入 PDF 的功能。

我正在为 iPad 用户编写一个应用程序，该应用程序部分允许高亮显示 pdf 文本搜索。有许多类，例如 pdfkitten 进行 pdf 搜索。一些 PDF 文件很大，使用这些类进行搜索需要 2 分钟以上。

我希望能够直接访问嵌入式索引以加快搜索时间。我无法在我阅读的文档中找到有关索引位置或其格式的信息。我查看了[Adob​​e 的](http://www.adobe.com/devnet/pdf/pdf_reference.html)文档以及[Wikipedia](http://en.wikipedia.org/wiki/Portable_Document_Format)和其他 ISO 32000 文档，除了如何创建它之外，无法找到有关嵌入式索引的任何信息。

我很高兴获得描述索引以及如何访问它或任何类的信息。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T22:02:30.817

我们正在寻找完全相同的东西。这是 Adob​​e 的博客，我在其中提出了这个问题，Adobe 的回答是移动 Adob​​e Reader 不支持自定义页码和搜索索引。我现在正在为 iPad 寻找其他选项，它们可以像在台式机上一样有效地读取和索引搜索。

博客：http: [//blogs.adobe.com/readermobile/2013/03/06/reader-mobile-update/#comment-2235](http://blogs.adobe.com/readermobile/2013/03/06/reader-mobile-update/#comment-2235)

希望在某种程度上有所帮助。-布赖恩

# recurly - recurly - ajax howto

> ID：15278364
> 
> 赞同：0
> 
> 时间：2013-03-07T17:57:13.567
> 
> 标签：recurly

我刚刚将 recurly.js 与我的网站集成。

```
 Recurly.buildSubscriptionForm({
        target : '#recurly_form',
        planCode:plan_code,
        successURL: 'payment_success',
        signature:sign_val
    }); 
```

现在我可以发送请求ajax方式，所以当支付成功时，它会通知我一些回调函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:14:24.590

对不起。我太着急问问题了。我在周期性文档中找到了解决方案。这是解决方案

```
Recurly.buildSubscriptionForm({
    target : '#recurly_form',
    planCode:plan_code,
    successHandler:function(token){
        alert("Payment Success");
    },
    signature:sign_val
}); 
```

而不是successUrl，使用successHandler。

# c# - wcf P2P 更新主界面

> ID：15278365
> 
> 赞同：0
> 
> 时间：2013-03-07T17:57:15.907
> 
> 标签：c#, wcf

我希望 SetLogText 下面的方法更新主 GUI，但它不起作用。没有错误。如何更新 GUI？

**C# 代码**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Configuration;
using System.ServiceModel;
using System.ServiceModel.PeerResolvers;

namespace Client
{
    public partial class Form1 : Form
    {

        IChatChannel participant;
        DuplexChannelFactory<IChatChannel> factory;

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {}

        // Chat service contract
        // Applying [PeerBehavior] attribute on the service contract enables retrieval of PeerNode from IClientChannel.
        [ServiceContract(Namespace = "http://Microsoft.ServiceModel.Samples", CallbackContract = typeof(IChat))]
        public interface IChat
        {
            [OperationContract(IsOneWay = true)]
            void Join(string member);

            [OperationContract(IsOneWay = true)]
            void Chat(string member, string msg);

            [OperationContract(IsOneWay = true)]
            void Leave(string member);
        }

        public interface IChatChannel : IChat, IClientChannel
        {}

        public class ChatApp : IChat

        {
            // member id for this instance
            string member;

            public ChatApp(string member)
            {
                this.member = member;
            }

            //IChat implementation
            public void Join(string member)
            {
                Console.WriteLine("[{0} joined]", member);
            }

            public void Chat(string member, string msg)
            {

                try
                {                      
                    Form1 myForm = new Form1();
                    myForm.SetLogText("eureka");
                }
                catch (Exception ex)
                {    
                    MessageBox.Show(ex.Message.ToString());    
                }

            }

            public void Leave(string member)
            {
                Console.WriteLine("[{0} left]", member);
            }

        }

        // PeerNode event handlers
        public void OnOnline(object sender, EventArgs e)
        {
            radListViewChats.Items.Add("Another user went  Online");
        }
        public void OnOffline(object sender, EventArgs e)
        {
            radListViewChats.Items.Add("Another user went  Offline");
        }

        private void radButtonConnect_Click(object sender, EventArgs e)
        {
            try
            {   

                // Construct InstanceContext to handle messages on callback interface. 
                // An instance of ChatApp is created and passed to the InstanceContext.
                InstanceContext instanceContext = new InstanceContext(new ChatApp(radTextBoxusername.Text));

                // Create the participant with the given endpoint configuration
                // Each participant opens a duplex channel to the mesh
                // participant is an instance of the chat application that has opened a channel to the mesh
                factory = new DuplexChannelFactory<IChatChannel>(instanceContext, "ChatEndpoint");

                participant = factory.CreateChannel();

                // Retrieve the PeerNode associated with the participant and register for online/offline events
                // PeerNode represents a node in the mesh. Mesh is the named collection of connected nodes.  

                IOnlineStatus ostat = participant.GetProperty<IOnlineStatus>();
                ostat.Online += new EventHandler(OnOnline);
                ostat.Offline += new EventHandler(OnOffline);

                try
                {
                    participant.Open();
                }
                catch (CommunicationException)
                {

                    radListViewChats.Items.Add("Could not find resolver.  If you are using a custom resolver, please ensure");
                    radListViewChats.Items.Add("that the service is running before executing this sample.  Refer to the readme");
                    radListViewChats.Items.Add("for more details.");
                    return;
                }

                radListViewChats.Items.Add("You are connected: ", radTextBoxusername.Text);

                // Announce self to other participants
                participant.Join(radTextBoxusername.Text);

            }

            catch (Exception ex)
            {

                MessageBox.Show(ex.Message.ToString());
            }
        }
        private void radButtonLeave_Click(object sender, EventArgs e)
        {
            try
            {
                participant.Leave(radTextBoxusername.Text);
                participant.Close();
                factory.Close();
            }
            catch (Exception ex)
            {

                MessageBox.Show(ex.Message.ToString());

            }
        }
        private void radButtonChat_Click(object sender, EventArgs e)
        {
            participant.Chat(radTextBoxusername.Text, radTextBoxText2Send.Text);
        }

        public void SetLogText(String text)
        {   

                if (this.InvokeRequired)
                {
                    this.Invoke(new EventHandler(delegate
                    {
                        textBox1.Text = text;
                    }));
                }
                else
                    textBox1.Text = text;

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:01:37.157

您正在 Form1 的新实例上调用 SetLogText。您需要在*现有*实例上调用它才能对该实例产生任何影响。如果您将代码分成多个文件来构建您的项目，这可能会有所帮助。很明显，Chat 对 Form1 一无所知，需要在程序中的某个时间点提供它的一个实例。

例子：

```
public class ChatApp : IChat
{
   string member;
   Form1 form;

   public ChatApp(string member, Form1 form)
   {
        this.member = member;
        this.form = form;
   }

   public void Join(string member)
   {
       Console.WriteLine("[{0} joined]", member);
   }

   public void Chat(string member, string msg)
   {
       try
       {                      
            form.SetLogText("eureka");
       }
       catch (Exception ex)
       {    
           MessageBox.Show(ex.Message.ToString());    
       }
   }

   public void Leave(string member)
   {
       Console.WriteLine("[{0} left]", member);
   }
} 
```

# jpa - WebSphere Application Server V8.0.0.5 JPA 无法持久化

> ID：15278366
> 
> 赞同：0
> 
> 时间：2013-03-07T17:57:17.480
> 
> 标签：jpa, jpa-2.0, openjpa, websphere-portal, websphere-8

我有一个在 WAS 7 上完美运行的代码，但是当我在 WAS 8.0.0.5 中运行它时失败了。我使用 JPA 2.0 和 openJPA 作为我的提供者。在我的 em 上调用 persist 会引发嵌套异常。有没有人设法在 WAS 8.0.0.5 中编写 JPA 程序

这是例外

WTRN0074E: 从 before_completion 同步操作中捕获的异常：org.apache.openjpa.persistence.PersistenceException：DB2 SQL 错误：SQLCODE=-204，SQLSTATE=42704，SQLERRMC=.OPENJPA_SEQUENCE_TABLE，DRIVER=3.58.81 {prepstmnt -1559269434 SELECT SEQUENCE_VALUE FROM 。 OPENJPA_SEQUENCE_TABLE 其中 ID = ？只读，RS 使用并保持更新锁 [params=?]}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:48:05.127

SQLCODE=-204 指出缺少某些东西。日志不断打印 THAKHANI.OPENJPA_SEQUENCE_TABLE 这让人认为可能是表丢失了。您还可以检查以确保 JPA 使用的 DB2 用户有权创建表并在其上运行 SELECT 语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T09:57:22.450

在从表中生成实体时，我通过选择 Identity 作为我的主键生成机制来设法解决该问题。我还在我的 persistence.xml 中添加了以下内容。

```
<properties>
    <!-- OpenJPA specific properties -->
    <property name="openjpa.TransactionMode" value="managed"/>
    <property name="openjpa.ConnectionFactoryMode" value="managed"/>
    <property name="openjpa.jdbc.DBDictionary" value="db2"/>
    <property name="openjpa.jdbc.Schema" value=<SchemaName>/>
 </properties> 
```

# matlab - 使用 quad 仅针对一个变量对函数进行积分

> ID：15278369
> 
> 赞同：0
> 
> 时间：2013-03-07T17:57:21.387
> 
> 标签：matlab, integration

有什么办法可以整合两个变量的函数，比如说

f=@(x) x^2 + x*y

超过 x

试过四边形（f，a，b）

但不起作用，正在寻找替代解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:08:31.997

看起来你想要这样的东西：

```
y = 100; % whatever y is
a = 0;
b = 2;
% you'll need to vectorize the integrand function
f = @(x) x.*x + x.*y
val = quad(f, a, b); 
```

但是，如果您正在寻找代数答案，则需要使用 Symbolic Toolbox，或其他一些软件，或您的微积分书。:-)

整个“矢量化”的东西来自[Mathworks quad 文档](http://www.mathworks.com/help/matlab/ref/quad.html)，上面写着：

> 函数 y = fun(x) 应该接受向量参数 x 并返回向量结果 y，即在 x 的每个元素处计算的被积函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:16:34.753

抱歉，quad 不能解决符号问题。它只进行数值积分。

```
syms x y
int(x^2 + x*y,x)
ans =
    (x^2*(2*x + 3*y))/6 
```

解决符号问题的自然方法是使用符号工具。

从后续来看，安雅想要介于两者之间。借用一位名叫米克的老摇滚明星的话，“你不能总是得到你想要的。”

同样，如果您只想在 x 上进行积分，则不能使用 quad，因为 quad 是一种自适应工具。

在一些简单的情况下，您可以使用像辛普森规则这样的简单工具来完成这项工作。例如，假设您想解决上述问题，x 在区间 [0 1] 上积分。出于比较的目的，我将首先象征性地进行。

```
syms x y
res = int(x^2 + x*y,x);

subs(res,x,1) - subs(res,0)
ans =
   y/2 + 1/3 
```

现在，让我们尝试使用 x 上的数值积分。

```
syms y
x = 0:.01:1;
coef = mod((0:100)',2)*2 + 2;
coef([1 end]) = 1;
coef = 0.01*coef/3;

(x.^2 + x.*y)*coef
ans =
   y/2 + 1/3 
```

所以在这个非常简单的情况下，它确实有效。稍微复杂一点的东西怎么样？在区间 [-1 1] 上积分 x*exp(x*y)。同样，已知形式可以象征性地访问。

```
syms x y
res = int(x*exp(x*y),x);

res = subs(res,x,1) - subs(res,-1)
res =
   (exp(-y)*(y + 1))/y^2 + (exp(y)*(y - 1))/y^2 
```

稍后测试它，在 y = 1/2 时它取什么值？

```
vpa(subs(res,y,1/2))
ans =
   0.34174141687554424792549563431876 
```

让我们尝试同样的技巧，使用辛普森法则。

```
syms y
x = -1:.01:1;
coef = mod((-100:100)',2)*2 + 2;
coef([1 end]) = 1;
coef = 0.01*coef/3;

res = (x.*exp(x*y))*coef
res =
   exp(y/2)/300 - exp(-y/2)/300 - exp(-y)/300 - exp(-y/4)/300 + exp(y/4)/300 - exp(-y/5)/750 + exp(y/5)/750 - exp(-(3*y)/4)/100 - exp(-(2*y)/5)/375 + exp((2*y)/5)/375 + exp((3*y)/4)/100 - exp(-(3*y)/5)/250 + exp((3*y)/5)/250 - (2*exp(-(4*y)/5))/375 + (2*exp((4*y)/5))/375 - exp(-y/10)/1500 + exp(y/10)/1500 - exp(-(3*y)/10)/500 + exp((3*y)/10)/500 - (7*exp(-(7*y)/10))/1500 + (7*exp((7*y)/10))/1500 - (3*exp(-(9*y)/10))/500 + (3*exp((9*y)/10))/500 - exp(-y/20)/1500 + exp(y/20)/1500 - exp(-(3*y)/20)/500 + exp((3*y)/20)/500 - exp(-y/25)/3750 + exp(y/25)/3750 - (7*exp(-(7*y)/20))/1500 - exp(-(2*y)/25)/1875 + exp((2*y)/25)/1875 + (7*exp((7*y)/20))/1500 - exp(-(3*y)/25)/1250 + exp((3*y)/25)/1250 - (3*exp(-(9*y)/20))/500 - (2*exp(-(4*y)/25))/1875 + (2*exp((4*y)/25))/1875 + (3*exp((9*y)/20))/500 - (11*exp(-(11*y)/20))/1500 - exp(-(6*y)/25)/625 + exp((6*y)/25)/625 + (11*exp((11*y)/20))/1500 - (7*exp(-(7*y)/25))/3750 + (7*exp((7*y)/25))/3750 - (13*exp(-(13*y)/20))/1500 - (4*exp(-(8*y)/25))/1875 + (4*exp((8*y)/25))/1875 + (13*exp((13*y)/20))/1500 - (3*exp(-(9*y)/25))/1250 + (3*exp((9*y)/25))/1250 - (11*exp(-(11*y)/25))/3750 + (11*exp((11*y)/25))/3750 - (17*exp(-(17*y)/20))/1500 - (2*exp(-(12*y)/25))/625 + (2*exp((12*y)/25))/625 + (17*exp((17*y)/20))/1500 - (13*exp(-(13*y)/25))/3750 + (13*exp((13*y)/25))/3750 - (19*exp(-(19*y)/20))/1500 - (7*exp(-(14*y)/25))/1875 + (7*exp((14*y)/25))/1875 + (19*exp((19*y)/20))/1500 - (8*exp(-(16*y)/25))/1875 + (8*exp((16*y)/25))/1875 - (17*exp(-(17*y)/25))/3750 + (17*exp((17*y)/25))/3750 - (3*exp(-(18*y)/25))/625 + (3*exp((18*y)/25))/625 - (19*exp(-(19*y)/25))/3750 + (19*exp((19*y)/25))/3750 - (7*exp(-(21*y)/25))/1250 + (7*exp((21*y)/25))/1250 - (11*exp(-(22*y)/25))/1875 + (11*exp((22*y)/25))/1875 - (23*exp(-(23*y)/25))/3750 + (23*exp((23*y)/25))/3750 - (4*exp(-(24*y)/25))/625 + (4*exp((24*y)/25))/625 - exp(-y/50)/7500 + exp(y/50)/7500 - exp(-(3*y)/50)/2500 + exp((3*y)/50)/2500 - (7*exp(-(7*y)/50))/7500 + (7*exp((7*y)/50))/7500 - (3*exp(-(9*y)/50))/2500 + (3*exp((9*y)/50))/2500 - (11*exp(-(11*y)/50))/7500 + (11*exp((11*y)/50))/7500 - (13*exp(-(13*y)/50))/7500 + (13*exp((13*y)/50))/7500 - (17*exp(-(17*y)/50))/7500 + (17*exp((17*y)/50))/7500 - (19*exp(-(19*y)/50))/7500 + (19*exp((19*y)/50))/7500 - (7*exp(-(21*y)/50))/2500 + (7*exp((21*y)/50))/2500 - (23*exp(-(23*y)/50))/7500 + (23*exp((23*y)/50))/7500 - (9*exp(-(27*y)/50))/2500 + (9*exp((27*y)/50))/2500 - (29*exp(-(29*y)/50))/7500 + (29*exp((29*y)/50))/7500 - (31*exp(-(31*y)/50))/7500 + (31*exp((31*y)/50))/7500 - (11*exp(-(33*y)/50))/2500 + (11*exp((33*y)/50))/2500 - (37*exp(-(37*y)/50))/7500 + (37*exp((37*y)/50))/7500 - (13*exp(-(39*y)/50))/2500 + (13*exp((39*y)/50))/2500 - (41*exp(-(41*y)/50))/7500 + (41*exp((41*y)/50))/7500 - (43*exp(-(43*y)/50))/7500 + (43*exp((43*y)/50))/7500 - (47*exp(-(47*y)/50))/7500 + (47*exp((47*y)/50))/7500 - (49*exp(-(49*y)/50))/7500 + (49*exp((49*y)/50))/7500 - exp(-y/100)/7500 + exp(y/100)/7500 - exp(-(3*y)/100)/2500 + exp((3*y)/100)/2500 - (7*exp(-(7*y)/100))/7500 + (7*exp((7*y)/100))/7500 - (3*exp(-(9*y)/100))/2500 + (3*exp((9*y)/100))/2500 - (11*exp(-(11*y)/100))/7500 + (11*exp((11*y)/100))/7500 - (13*exp(-(13*y)/100))/7500 + (13*exp((13*y)/100))/7500 - (17*exp(-(17*y)/100))/7500 + (17*exp((17*y)/100))/7500 - (19*exp(-(19*y)/100))/7500 + (19*exp((19*y)/100))/7500 - (7*exp(-(21*y)/100))/2500 + (7*exp((21*y)/100))/2500 - (23*exp(-(23*y)/100))/7500 + (23*exp((23*y)/100))/7500 - (9*exp(-(27*y)/100))/2500 + (9*exp((27*y)/100))/2500 - (29*exp(-(29*y)/100))/7500 + (29*exp((29*y)/100))/7500 - (31*exp(-(31*y)/100))/7500 + (31*exp((31*y)/100))/7500 - (11*exp(-(33*y)/100))/2500 + (11*exp((33*y)/100))/2500 - (37*exp(-(37*y)/100))/7500 + (37*exp((37*y)/100))/7500 - (13*exp(-(39*y)/100))/2500 + (13*exp((39*y)/100))/2500 - (41*exp(-(41*y)/100))/7500 + (41*exp((41*y)/100))/7500 - (43*exp(-(43*y)/100))/7500 + (43*exp((43*y)/100))/7500 - (47*exp(-(47*y)/100))/7500 + (47*exp((47*y)/100))/7500 - (49*exp(-(49*y)/100))/7500 + (49*exp((49*y)/100))/7500 - (17*exp(-(51*y)/100))/2500 + (17*exp((51*y)/100))/2500 - (53*exp(-(53*y)/100))/7500 + (53*exp((53*y)/100))/7500 - (19*exp(-(57*y)/100))/2500 + (19*exp((57*y)/100))/2500 - (59*exp(-(59*y)/100))/7500 + (59*exp((59*y)/100))/7500 - (61*exp(-(61*y)/100))/7500 + (61*exp((61*y)/100))/7500 - (21*exp(-(63*y)/100))/2500 + (21*exp((63*y)/100))/2500 - (67*exp(-(67*y)/100))/7500 + (67*exp((67*y)/100))/7500 - (23*exp(-(69*y)/100))/2500 + (23*exp((69*y)/100))/2500 - (71*exp(-(71*y)/100))/7500 + (71*exp((71*y)/100))/7500 - (73*exp(-(73*y)/100))/7500 + (73*exp((73*y)/100))/7500 - (77*exp(-(77*y)/100))/7500 + (77*exp((77*y)/100))/7500 - (79*exp(-(79*y)/100))/7500 + (79*exp((79*y)/100))/7500 - (27*exp(-(81*y)/100))/2500 + (27*exp((81*y)/100))/2500 - (83*exp(-(83*y)/100))/7500 + (83*exp((83*y)/100))/7500 - (29*exp(-(87*y)/100))/2500 + (29*exp((87*y)/100))/2500 - (89*exp(-(89*y)/100))/7500 + (89*exp((89*y)/100))/7500 - (91*exp(-(91*y)/100))/7500 + (91*exp((91*y)/100))/7500 - (31*exp(-(93*y)/100))/2500 + (31*exp((93*y)/100))/2500 - (97*exp(-(97*y)/100))/7500 + (97*exp((97*y)/100))/7500 - (33*exp(-(99*y)/100))/2500 + (33*exp((99*y)/100))/2500 + exp(y)/300 
```

所以我得到了一个结果，但它不是我想要的分析结果，而且有点令人讨厌。这是正确的吗？

```
vpa(subs(res,y,1/2))
ans =
   0.34174141693463006644516447861307 
```

我将复制上面的分析结果，以便我们进行比较...

```
 0.34174141687554424792549563431876 
```

如您所见，辛普森规则在 [-1,1] 上的步长为 0.01 时，表现相当不错，同意大约 9 位小数。

不能保证这种技术在任何更通用的内核上也能正常工作，但它可能会给你你想要的东西。

# ios - 将一个框架包含到另一个框架中，有可能吗？

> ID：15278371
> 
> 赞同：1
> 
> 时间：2013-03-07T17:57:22.397
> 
> 标签：ios, frameworks

我正在为 iOS 创建一个框架，我的一个类使用框架 MobileCoreServices 来获取给定路径的文件的 MIME 类型。问题是我还必须在使用我的框架的每个应用程序中包含 MobileCoreServices，如果特定应用程序不需要使用该框架的类和方法。

有解决办法吗？像在我的中包含 MobileCoreServices 框架之类的东西？这样最终用户就不需要知道他必须包含哪些内容。

# python - 如何让 pexpect 匹配除给定行之外的所有内容？

> ID：15278374
> 
> 赞同：1
> 
> 时间：2013-03-07T17:57:25.827
> 
> 标签：python, regex, pexpect

假设有这样一个对 pexpect.expect 的调用：

```
ret = pex.expect([re.escape(line), pexpect.EOF, pexpect.TIMEOUT], timeout)
if ret == 0:
    do_stuff()
elif ret == 1:
    do_eof_stuff()
elif ret == 2:
    do_timeout_stuff() 
```

除了处理 EOF 和 TIMEOUT 之外，我不想匹配我感兴趣的行，而是想切换并匹配除该行之外的任何内容。有点像这样：

```
ret = pex.expect([not re.escape(line), pexpect.EOF, pexpect.TIMEOUT], timeout)
if ret == 0:
    do_error_stuff()
elif ret == 1:
    do_eof_stuff()
elif ret == 2:
    do_timeout_stuff()
else:
   # Our line "matched" so do stuff
   do_stuff() 
```

我知道'not re.escape(line)' 是无效的，它只是展示我想要什么的一种方式。我会在它的地方实际使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:31:39.767

我使用否定的前瞻来玩弄这个：

```
ret = pex.expect([r'^((?!' + re.escape(line) + ').)*$', pexpect.EOF, pexpect.TIMEOUT], timeout) 
```

这里需要注意的是，如果 line 是`hello world`例如：

```
hello world -> won't match
hello world 2 -> won't match
my hello world -> won't match
hello worl -> will match 
```

不确定您需要的具体程度。

# mysql - 将较大的 SQL 文件导入 MySQL

> ID：15278375
> 
> 赞同：76
> 
> 时间：2013-03-07T17:57:32.823
> 
> 标签：mysql

我有一个 400 MB 的大型 SQL 备份文件。我正在尝试使用*WAMP* → *import*将该文件导入 MySQL 数据库，但由于上传文件太大等多种原因，导入不成功。因此，我继续对 WAMP 下的 PHP 和 MySQL 设置的配置进行了一些更改。所做的更改是

```
Under WAMP->MySQL->my.ini

    max_allowed_packet = 800M
    read_buffer_size = 2014K

 Under WAMP->PHP->PHP.ini

    max_input_time = 20000
    memory_limit = 128M 
```

这是使用*WAMP* → *import*导入如此大的 SQL 文件的正确方法吗？

如果是这样，我是否对配置文件进行了正确的更改？上述变量允许的最大值是多少？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2013-03-07T18:01:22.720

您可以通过以下命令行方式导入大文件：

```
mysql -h yourhostname -u username -p databasename < yoursqlfile.sql 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-03-07T18:48:25.647

由于您声明（在对另一个人的回答的澄清评论中）您正在使用 MySQL Workbench，您可以尝试在那里使用“sql script”选项。这将避免使用命令行的需要（尽管我同意另一个答案，即爬上那匹马并学习骑马很好）。

1.  在 MySQL Workbench 中，转到 File 菜单，然后选择“open script”。这可能需要很长时间，甚至可能使应用程序崩溃，因为它不是用来打开像你描述的那么大的东西。

2.  更好的方法是使用命令行。确保您的机器上安装了 MySQL 客户端。这意味着实际的 MySQL（不是 Workbench GUI 或 PhpMyAdmin 或类似的东西）。这是[描述命令行工具的链接](http://dev.mysql.com/doc/refman/5.5/en/mysql.html)。下载并安装后，在您的机器上打开一个终端窗口，您有两种选择可以将文件系统（例如备份文件）中的数据下载到目标数据库中。一种是使用'source' 命令，另一种是使用< 重定向操作符。

选项 1：从备份文件所在的目录：

```
$mysql -u username -p -h hostname databasename < backupfile.sql 
```

选项 2：从备份文件所在的目录：

```
$mysql -u username -p -h hostname
[enter your password]
> use databasename;
> source backupfile.sql 
```

显然，这两个选项都要求您有一个 SQL 备份文件。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2015-02-05T22:19:18.130

从 mysql 命令窗口使用它：

```
mysql> use db_name;
mysql> source backup-file.sql; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-07T18:24:10.373

您可以使用以下命令从任何 SQL 查询浏览器发出导入命令：

```
source C:\path\to\file\dump.sql 
```

在查询窗口中运行上面的代码......并等待一段时间:)

这或多或少等于前面所述的命令行版本。主要区别在于它是从 MySQL 内部执行的。对于那些使用非标准编码的人来说，这也比使用命令行版本更安全，因为编码失败的风险更小。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-18T22:31:32.620

在内部移动 sql server 时，我们遇到了同样的问题。

我们最终使用的一个很好的解决方案是将 sql 文件拆分为块。有几种方法可以做到这一点。采用

[http://www.ozerov.de/bigdump/](http://www.ozerov.de/bigdump/)看起来不错（但从未使用过）

[http://www.rusiczki.net/2007/01/24/sql-dump-file-splitter/](http://www.rusiczki.net/2007/01/24/sql-dump-file-splitter/)使用了它，从混乱中获取结构非常有用，您可以从那里获取它。

希望这可以帮助 ：）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-12T04:52:09.640

如果您在本地进行，则必须做三件事：

在您`php.ini`的`php.cfg`PHP 安装中

```
post_max_size=500M

upload_max_filesize=500M

memory_limit=900M 
```

或设置其他值。**重启阿帕奇**。

*或者*

使用 PHP[大转储工具](http://www.ozerov.de/bigdump/)。这是我见过的最好的。它是免费和开源的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-06-10T16:14:26.850

有类似的问题，但在 Windows 中。我试图弄清楚如何在 Windows 中打开一个大型 MySQL SQL 文件，这些是我必须采取的步骤：

*   转到下载网站 ( [http://dev.mysql.com/downloads/](http://dev.mysql.com/downloads/) )。

*   下载 MySQL Community Server 并安装它（选择开发人员或完全安装，这样它将安装客户端和服务器工具）。

*   从开始菜单打开 MySQL 命令行客户端。

*   输入您在安装时使用的密码。

*   在提示符*mysql>*中，输入：

    ```
     CREATE DATABASE database_name;

      USE database_name;

      SOURCE myfile.sql 
    ```

那应该导入您的大文件。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-06-13T06:04:28.247

最简单的解决方案是[MySQL Workbench](https://en.wikipedia.org/wiki/MySQL_Workbench)。只需将 .sql 文件文本复制到 MySQL Workbench 的查询窗口并执行即可。所有重命名的事情都将由它完成。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-05-14T13:51:54.380

这个问题是几个月前的问题，但对于其他人来说——

导入大文件的更简单方法是在文件夹 c:/wamp/apps/phpmyadmin3.5.2 中创建一个子目录“上传”，并在同一目录中的 config.inc.php 文件中编辑此行以包含该文件夹名称 $cfg['UploadDir'] = '上传';

然后将传入的 .sql 文件放在文件夹 /upload 中。

从 phpmyadmin 控制台内部工作，转到新数据库并导入。您现在将看到从该文件夹上传文件的附加选项。选择正确的文件并耐心等待。有用。

如果仍然出现超时错误，请尝试添加 $cfg['ExecTimeLimit'] = 0; 到相同的 config.inc.php 文件。

我在导入用户名为 root 且密码与新服务器上的 root 密码不同的 .sql 文件时遇到了困难。我只是在导出 .sql 文件之前取消了密码，并且导入工作顺利。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-08-09T04:39:09.937

在 phpMyAdmin 的第 1.16 项中，他们说：

**1.16 我无法上传大转储文件（内存、HTTP 或超时问题）。**

* * *

从版本 2.7.0 开始，导入引擎已被重新编写，不应出现这些问题。如果可能，请将您的 phpMyAdmin 升级到最新版本以利用新的导入功能。

首先要检查（或要求您的主机提供商检查）是配置文件中`upload_max_filesize`的`memory_limit`和`post_max`_size的值。`php.ini`所有这三个设置都限制了 PHP 可以提交和处理的最大数据大小。一位用户也表示，`post_max_size`需要`memory_limit`大于upload_max_filesize。如果您的上传太大或您的托管服务提供商不愿意更改设置，则有几种解决方法：

看`$cfg['UploadDir']`特征。这允许人们通过 scp、ftp 或您喜欢的文件传输方法将文件上传到服务器。然后 PhpMyAdmin 能够从临时目录中导入文件。本文档的配置中提供了更多信息。

在上传之前使用实用程序（例如[BigDump](http://www.ozerov.de/bigdump/)）拆分文件。我们不支持此应用程序或任何第三方应用程序，但知道用户已成功使用它。

如果您有 shell（命令行）访问权限，请使用 MySQL 直接导入文件。你可以通过在 MySQL 中发出“source”命令来做到这一点：

```
source filename.sql; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-03-04T12:15:06.690

我相信最简单的方法是使用 MYSQL 命令行上传文件。

使用来自终端的命令访问 MySQL 命令行并运行*源代码*

```
 mysql --host=hostname -uuser -ppassword
    source filename.sql 
```

或直接从终端

```
 mysql --host=hostname -uuser -ppassword < filename.sql 
```

在提示下。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-05-09T10:57:50.023

如果您在 Windows 上使用 source 命令，请记住使用`f:/myfolder/mysubfolder/file.sql`而不是`f:\myfolder\mysubfolder\file.sql`

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2014-06-04T13:37:58.847

**我的.ini**

```
max_allowed_packet = 800M
read_buffer_size = 2014K 
```

**PHP.ini**

```
max_input_time = 20000
memory_limit = 128M
post_max_size=128M 
```

# postgresql - 从 heroku 数据库关注者进行 postgres 备份

> ID：15278377
> 
> 赞同：0
> 
> 时间：2013-03-07T17:57:37.753
> 
> 标签：postgresql, heroku

以前，您曾经能够在 heroku 上创建数据库关注者的数据库转储。

`heroku pgbackups:capture HEROKU_FOLLOWER_COLOR --expire`

它最近停止工作。

如果`heroku logs --tail --ps pgbackups`我得到

```
2013-03-07T17:27:49+00:00 app[pgbackups]: dump_progress: start
2013-03-07T17:27:49+00:00 app[pgbackups]: pg_dump-9.2.1-64bit: [archiver (db)] query failed: ERROR:  cannot use serializable mode in a hot standby
2013-03-07T17:27:49+00:00 app[pgbackups]: HINT:  You can use REPEATABLE READ instead.
2013-03-07T17:27:49+00:00 app[pgbackups]: pg_dump-9.2.1-64bit: [archiver (db)] query was: SET TRANSACTION ISOLATION LEVEL SERIALIZABLE, READ ONLY, DEFERRABLE
2013-03-07T17:27:49+00:00 app[pgbackups]: dump_progress:    0B
2013-03-07T17:27:49+00:00 app[pgbackups]:
2013-03-07T17:27:49+00:00 app[pgbackups]: dump_progress: error 
```

不过，从主 DATABASE_URL 转储似乎工作正常。

这是heroku平台最近的变化还是我做错了什么？另外，如果我转储主数据库，是否会影响性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:08:31.880

追随者的备份现在应该可以再次使用了。失败是由于我们对 pgbackups 所做的一些更改（即，为 增加了[--serializable-deferable](http://www.postgresql.org/docs/9.2/static/app-pgdump.html)标志`pg_dump`）。我们错过了这对追随者不起作用 - 对此感到抱歉。

谢谢，

马切克，

Heroku Postgres

# svg - svg 路径上的 d3.js selectAll().each .. 未定义？

> ID：15278380
> 
> 赞同：9
> 
> 时间：2013-03-07T17:57:55.207
> 
> 标签：svg, d3.js, each

我正在以这种方式导入一个 svg（作为来自服务器的静态内容）

```
d3.xml("http://localhost:3000/mysvg.svg", "image/svg+xml", function(xml) {
    var importedNode = document.importNode(xml.documentElement, true);
    var mySvg = d3.select("#somediv").node().appendChild(importedNode); 
```

然后我试图遍历所有 svg 路径并用它们做一些事情

```
 d3.selectAll("#somediv svg path").each(function(d, i) {
        console.log(this, d, i);
    });
} 
```

我得到的是这个问题

*   `i`是从1到路径数，这是正确的。

*   `d`不是`undefined`正确的 svg 路径元素。

*   `this`是 svg 路径元素，比如这个

    `<path id="m021" fill="#00AAFF" d="M225.438,312.609c-0.665-1.084-1.062-1.691-2.368-1.963c-0.582-0.121-1.686-0.271-2.265-0.069 c-0.507,0.174-0.637,0.649-1.431,0.368c-0.934-0.33-0.665-1.272-0.71-2.104c-0.597-0.021-1.18,0-1.733,0.262 ...etc" ></path>`

我期望`d`成为真正的 svg 路径，为什么不是？

### 编辑：

对我想做的事情有一点了解可能会有所帮助。

我有一个 svg，我镇的每个区都有一条路径。我想在每条路径的中心制作一些饼图。我现在没有数据，它将用于饼图。我想在路径上创建一个鼠标悬停功能，并在每条路径上添加一个小红圈（在以后的步骤中将成为饼图）。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T18:08:55.657

简化您的原始请求，假设您要在每个区域的中心添加一个圆圈。让我们假设这些地区是相对方形的。请注意，如果您有地理数据而不是路径，这会更简单。

```
var svg = d3.select("#somediv svg");
var districts = svg.selectAll("path");

var district_centers = districts[0].map(function(d, i) {
    var bbox = this.getBBox();
    return [bbox.left + bbox.width/2, bbox.top + bbox.height/2];
});

svg
  .selectAll("circle")
  .data(district_centers)
  .enter()
  .append("circle")
     .attr("class", "district_circle")
     .attr("cx", function(d){ return d[0]})
     .attr("cy", function(d){ return d[1]})
     .attr("r", 10)
     .attr("fill", "red"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T18:04:01.160

根据[selection.each 的 API 文档](https://github.com/mbostock/d3/wiki/Selections#wiki-each)，d 应该是数据，如果您之前没有调用 .data() 将数据绑定到节点，您将不会拥有该数据。您所拥有的只是没有数据绑定的纯 SVG。

我注意到你的路径确实有 ID，所以如果你有一个与这些 ID 匹配的数据集，你可以使用[.data 函数的 keys 参数绑定到它](https://github.com/mbostock/d3/wiki/Selections#wiki-data)

# iphone - 1<<1 的值是多少？怎么计算呢？

> ID：15278383
> 
> 赞同：-1
> 
> 时间：2013-03-07T17:58:09.290
> 
> 标签：iphone, ios, objective-c, ios4

谁能告诉我如何计算`1<<0`和其他人的价值？我是 iOS 新手，我很难理解它。

```
 kSCNetworkReachabilityFlagsTransientConnection = 1<<0,
  kSCNetworkReachabilityFlagsReachable      = 1<<1,
  kSCNetworkReachabilityFlagsConnectionRequired = 1<<2,
  kSCNetworkReachabilityFlagsConnectionOnTraffic    = 1<<3,
  kSCNetworkReachabilityFlagsInterventionRequired   = 1<<4,
  kSCNetworkReachabilityFlagsConnectionOnDemand = 1<<5, // 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T17:59:41.493

这只是一个位移操作。

```
1 << 0 = 1
1 << 1 = 2
1 << 2 = 4
1 << 3 = 8
etc... 
```

或在二进制视图中

```
00000001 << 1 = 00000010
00000001 << 2 = 00000100
00000001 << 3 = 00001000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:00:00.027

这是左移运算符。

所有位都向左移动一位。结果是通过移位值的 *2 值。

像

1<<3 将是 1*2*2*2=8，移位 3 位，所以 3 次 *2

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T18:00:35.420

“<<”表示左移（二进制数）。所以 1 << n 等于 2 的 n 次方。然而，以二进制形式查看它是最合适的，

```
1<<0 = 1b
1<<1 = 10
1<<2 = 100 
```

# php - 如何管理 PHP odbc_exec 超时？

> ID：15278394
> 
> 赞同：0
> 
> 时间：2013-03-07T17:58:34.580
> 
> 标签：php, timeout, odbc

我有一个命令行 PHP 脚本，它使用 ODBC 连接连接到 SQL Server 2005。它使用 odbc_exec() 执行可能需要一段时间才能处理的存储过程，我不希望它超时。

我一直无法在 PHP 文档中找到有关如何为 odbc_exec() 设置超时的任何内容。它是否默认为无限等待？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:08:57.170

在这里你能做的只有这么多。PHP 的默认脚本执行时间设置为 30 秒。有很多方法可以改变这一点，包括`set_time_limit()`函数（在手册中找到），以及通过 using`ini_set`或 using延长执行时间`odbc_setoption`

```
//extend execution time
$num_minutes = 5;
ini_set('max_execution_time', (60*$num_minutes)); //set timeout to 5 minutes 
```

您还可以在 php.ini 文件中更改此设置。但是，所有这些都只控制您的 apache 服务器可以控制的范围。如果数据库本身有超时，它仍然会中断你的调用并返回错误，即使你个人设置的执行时间增加了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:04:31.597

根据 php.net，您可以使用 `odbc_setoption()`：

```
$result = odbc_prepare($conn, $sql);
odbc_setoption($result, 2, 0, 30);// 30 seconds timeout
odbc_execute($result); 
```

因此，您可以根据需要将超时增加到更大的数字

# c# - 提取和比较 eventargs 数据

> ID：15278395
> 
> 赞同：0
> 
> 时间：2013-03-07T17:58:44.303
> 
> 标签：c#, windows, winforms, forms

我在比较从事件参数获得的数据时遇到问题，更具体地说，我有 2 个使用接口的类，我们称之为“IInt”。我还有一个列表，其中包含这两个类的对象。

我目前使用 OnDragDrop 事件从该列表中拖动对象，但我需要一种方法来确定我拖动的对象是 class1 还是 class2。有没有办法提取数据并使用 DragEventArgs drgevent 进行比较？

首先，当我从列表中抓取一个对象时。

```
foreach (IInt d in dlist)
    DoDragDrop(d.GetType(), DragDropEffects.Move); 
```

当我想提取数据时，即检查拖动了什么对象。

```
 protected override void OnDragDrop(DragEventArgs drgevent)
    {
        if (drgevent.GetType() == typeof(DragedObject))
            do stuff...
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:00:26.790

在终于找到了这个问题的根源之后，您的答案似乎就[在这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.dodragdrop.aspx)

```
if (e.Data.GetDataPresent(typeof(YourType))) {
    YourType item = (YourType)e.Data.GetData(typeof(YourType)); 
```

如果我对您的理解正确，那么您正在寻找[反思](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.80%29.aspx)

您可以使用[GetType](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)

```
arg.GetType() == typeof(Class1) 
```

或者[是](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.71%29.aspx)

```
arg is Class1 
```

**更新**

没有比提供更多的代码，这听起来像是你需要做的：

```
foreach (IInt d in dlist)
    DoDragDrop(d, DragDropEffects.Move); 
```

`DoDragDrop`听起来它会从对象和效果创建 DragEventArgs，所以你会想要这样的东西：

```
protected override void OnDragDrop(DragEventArgs drgevent)
{
    if (drgevent.dObject.GetType() == typeof(DraggedObject))
        do stuff...
} 
```

请注意，您不是在测试 arg 本身，而是在测试它包含的内容。

# perl - 防止perl中的多个包含

> ID：15278403
> 
> 赞同：1
> 
> 时间：2013-03-07T17:59:09.187
> 
> 标签：perl, module

假设我有两个文件：一个看起来像这样的模块文件：

```
package myPackage;
use Bio::Seq; 
```

和另一个看起来像这样的文件：

```
use lib "path/to/lib";
use myPackage;
use Bio::Seq; 
```

我怎样才能防止 Bio::Seq 被包含两次？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:06:00.837

模块不像在 C 中那样“包含”在 Perl 中。它们是“加载的”，我的意思是“执行”。

一个模块只会被加载/执行一次，无论有多少条`use`语句指定它。

每个模块唯一发生的事情`use`就是调用模块的`import`方法。这通常用于将符号导出到 using 命名空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T18:16:19.333

它不会被包含两次。`use`语义可以这样描述：

1.  `require`模块
2.  调用模块的`import`

正如文档所说，它相当于：

```
BEGIN { require Module; Module−&gt;import( LIST ); } 
```

`require`另一方面，机制确保模块的代码只**编译和执行一次**，有些人第一次需要它。这种机制是基于特殊变量的`%INC`。您可以在 、 和 perlmod 页面的文档中[找到](http://perldoc.perl.org/perlmod.html)[更多`use`](http://perldoc.perl.org/functions/use.html)详细信息。[`require`](http://perldoc.perl.org/functions/require.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T18:18:58.727

`use Foo`

主要相当于

```
 # perldoc -f use
BEGIN { 
    require "Foo.pm";
    Foo->import();
} 
```

并且`require "Foo"`大多相当于

```
 # perldoc -f require
sub require {
  my ($filename) = @_;
  if (exists $INC{$filename}) {
    return 1 if $INC{$filename};
    die "Compilation failed in require";
  }
  # .... find $filename in @INC
  # really load
  return do $realfilename;
} 
```

所以

不，代码不会多次“加载”，只会多次“导入”。

如果您有代码，例如

```
 package Bio::Seq;
...
sub import { 
  # fancy stuff
} 
```

你想确保加载了一个库，但**不**调用`import`它，

```
 #perldoc -f use
use Bio::Seq (); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T18:14:48.343

我猜，你想**优化**Module的*加载*（使用）。

对于优化，动态加载可能会有所帮助。

为了动态加载 Perl 模块，我们使用[Class::Autouse](http://p3rl.org/Class%3a%3aAutouse)。

有关更多详细信息，您可以访问[此](https://stackoverflow.com/questions/9470019/load-perl-modules-automatically-during-runtime-in-perl)链接。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-28T18:10:37.580

`use`我猜 OP 可能会寻找一种方法来避免在他/她的 Perl 脚本开头出现一长串语句样板。在这种情况下，我想向大家指出[`Import::Into`](https://metacpan.org/pod/Import::Into). 它的工作方式类似于 Java 和 Python 中的关键字`import`。此外，[这篇博](http://friedo.com/blog/2014/06/removing-boilerplate-with-importinto)文还提供了一个精彩的`Import::Into`.

# highcharts - Highcharts 散点图性能

> ID：15278404
> 
> 赞同：2
> 
> 时间：2013-03-07T17:59:10.757
> 
> 标签：highcharts

我是 Highcharts 的新手，并且一直在[jsFiddle](http://jsfiddle.net/Jx5n2/3651/)上对其进行一些修改。

一个独立于小提琴的例子看起来像这样：

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Highcharts Example</title>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">

$(function() {

var chart;
$(document).ready(function() {

chart = new Highcharts.Chart({

    chart: {
        renderTo: 'container',
          type: 'scatter',
          zoomType: 'xy'
    },

    xAxis: {
        type: 'datetime'

    },
    series: [{
        color: 'rgba(223, 83, 83, .5)',
        data:
        [[Date.UTC(2012,10,15,12,25,47), 90.7000],
          // Many more data points here, see fiddle for complete list
         [Date.UTC(2013,2,7,11,37,18), 199.5000],
         [Date.UTC(2013,2,7,11,37,18), 199.5000]]
    }]

});
    });

});
</script>
</head>
<body>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<div id="container" style="height: 300px"></div>
</body>
</html> 
```

无论如何，我有一个系列，由一大组（~16k）（日期时间，浮点数）笛卡尔点组成，我希望在散点图上可视化。我得到了我想要的东西，但它似乎让我的浏览器变得非常缓慢。特别是如果我重新调整窗口大小或将鼠标悬停在工具提示上。寻找任何建议或技巧来优化性能或指出（不是双关语）我应该为这种可视化做的其他事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:47:29.583

您可以做的几件事是删除图表本身的动画和工具提示。此外，如果您能侥幸成功，您只能为每 10 个点渲染一个工具提示。

[http://jsfiddle.net/Jx5n2/3653/](http://jsfiddle.net/Jx5n2/3653/)

```
chart: {
    renderTo: 'container',
    type: 'scatter',
    zoomType: 'xy',
    animation:false
},

tooltip:{
    animation:false,
    formatter:function(){
        if(this.x % 10 != 0) return false;
        return 'The value for <b>'+ this.x +
                '</b> is <b>'+ this.y +'</b>';
    }
}, 
```

# gradle - 在 Gradle 构建中处理依赖项中缺少的配置

> ID：15278409
> 
> 赞同：10
> 
> 时间：2013-03-07T17:59:22.787
> 
> 标签：gradle

我有一个 Gradle 构建，它可以生成我的产品的主要可交付工件（安装程序）。对此进行建模的 Gradle 项目在不同的配置中具有许多不同的依赖项。其中许多依赖项都依赖于外部模块的默认配置，其中一些模块的`testResults`配置包含测试任务的（压缩）结果。

重要的是，所有依赖项的测试结果（如果存在）作为主要产品构建的工件发布（用作测试发生并成功的证据）。如果它们不存在，这不是问题。

我试图通过迭代产品构建的所有配置、迭代每个配置中的依赖项并在`testResults`模块的配置上添加以编程方式创建的依赖项（在为此目的创建的新配置中）来做到这一点。

换句话说，我创建这样的依赖项：

```
def processDependencyForTests( Dependency dependency ) {

    def testResultsDependency = [
      'group' : dependency.group,
      'name' : dependency.name,
      'version' : dependency.version,
      'configuration' : 'testResults'
      ]

    project.dependencies.add 'allTestResults', testResultsDependency 
```

**这可以很好地填充该配置，但是当然，当我尝试使用它做任何事情时，它会在我第一次遇到对实际上没有**配置的模块的依赖时失败`testResults`：

```
 def resolvedConfiguration = configurations.allTestResults.resolvedConfiguration 
```

结果如下：

```
Build file 'C:\myproduct\build.gradle' line: 353

* What went wrong:
Execution failed for task ':myproduct:createBuildRecord'.
> Could not resolve all dependencies for configuration ':myproduct:allTestResults'.
   > Module version group:mygroup, module:myproduct, version:1.2.3.4, configuration:allTestResults declares a dependency on configuration 'testResults' which is not declared in the module descriptor for group:mygroup, module:mymodule, version:1.0 
```

以声明的方式显式列出依赖项并不实际，因为我希望它们源自“产品项目具有的任何**真正的依赖项”。**

如何确保这种预期的缺失配置不会破坏我的构建？我认为与宽松的配置有关的问题可能是答案，但我什至还没有走到这一步（据我所知，我需要获得`ResolvedConfiguration`第一个）。或者，如果我这样做的方式很疯狂，那么实现这一点的更自然的 Gradle 习语是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:41:59.487

在引用它之前，您需要检查配置是否存在。在这种情况下，[gradle DSL 文档](http://www.gradle.org/docs/current/dsl/index.html)是你的朋友。事实上，gradle 项目是我合作过的文档最完整的开源项目之一。

在这里，您会发现它`configurations`只是一个`configuration`对象容器。它们分别是[ConfigurationContainer](http://www.gradle.org/docs/current/dsl/org.gradle.api.artifacts.ConfigurationContainer.html)和[Configuration](http://www.gradle.org/docs/current/dsl/org.gradle.api.artifacts.Configuration.html)的实例。知道了这一点，您需要做的就是检查容器是否`configurations`包含一个`configuration`名为“testResults”的容器。

这可以通过以下代码实现：

```
if (configurations.find { it.name == 'testResults' }) {
    // do your stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-08T15:34:12.950

似乎暗示`Dependency`传递给您的`processDependencyForTests`方法的实例是多模块构建中的模块依赖项。

在这种情况下，您可以将它们强制转换为[ProjectDependency](https://docs.gradle.org/current/javadoc/org/gradle/api/artifacts/ProjectDependency.html)，它具有`dependencyProject`允许您访问该`Project`依赖项的对象的属性。从那里您可以`depProject.configurations.findByName`用来测试配置是否存在。

类似于以下内容：

```
def processDependencyForTests( Dependency dependency ) {
  if( dependency instanceof ProjectDependency ) {
    ProjectDependency projDep = (ProjectDependency) dependency
    if( projDep.dependencyProject.configurations.findByName( 'testResults' ) ) {
      def testResultsDependency = [
        'group' : dependency.group,
        'name' : dependency.name,
        'version' : dependency.version,
        'configuration' : 'testResults'
      ]
      project.dependencies.add 'allTestResults', testResultsDependency
    }
  } 
```

高温高压

# php - 编辑从 php 5.2 到 php 5.3 版本的错误

> ID：15278410
> 
> 赞同：1
> 
> 时间：2013-03-07T17:59:26.090
> 
> 标签：php, joomla, joomla2.5, joomla1.5

我的主机将 php 版本从 5.2 更新到 5.3（无法回到 5.2 版本），我的站点中只有一个警告错误，即：->

```
Warning: number_format() expects parameter 2 to be long, string given in /currency.php on line 77 
```

这是文件的代码：

```
<?php
defined('_JEXEC') or die('Restricted access');
class GCurrency
{
var $_symbol=null;
var $_value=null;
var $_currency=null;
var $_decimal_separator=null;
var $_decimals=null;
var $_val_separator=null;
var $_format=null;
function __construct($val=0,$symbol='$',$currency='USD',$format="%S %V %C",$decimal="2",$dec=".",$v=",")
{
    $this->_symbol=empty($symbol)?'$':$symbol;
    $this->_currency=empty($currency)?"USD":$currency;
    $this->_value=$val;
    $this->_decimal_separator=empty($dec)?".":$dec;
    $this->_decimals=empty($decimal)?"2":$decimal;
    $this->_val_separator=empty($val)?",":$v;
    $this->_format=empty($format)?"%S %V %C":$format;
}
function setCurrencySymbol($symbol='$')
{
    $this->_symbol=$symbol;
}
function setDecimals($dec="2")
{
    $this->_decimals=$dec;
}
function setCurrency($currency="USD")
{
    $this->_currency=$currency;
}
function setValue($val=0,$symbol='$',$currency='USD')
{
    $this->_symbol=empty($symbol)?'$':$symbol;
    $this->_currency=empty($currency)?"USD":$currency;
    $this->_value=$val;
}
function setDecimalSeparator($dec=".")
{
    $this->_decimal_separator=$dec;
}
function setValueSeparator($val=",")
{
    $this->_val_separator=$val;
}
function setFormat($format="%S %V %C")
{
    $this->_format=$format;
}
function set($val=0,$symbol='$',$currency='USD',$format="%S %V %C",$decimal="2",$dec=".",$v=",")
{
    $this->_symbol=empty($symbol)?'$':$symbol;
    $this->_currency=empty($currency)?"USD":$currency;
    $this->_value=$val;
    $this->_decimal_separator=empty($dec)?".":$dec;
    $this->_decimals=empty($decimal)?"2":$decimal;
    $this->_val_separator=empty($val)?",":$v;
    $this->_format=empty($format)?"%S %V %C":$format;
}
function setParameters($format="%S %V %C",$decimal="2",$dec=".",$v=",")
{
    $this->_decimal_separator=empty($dec)?".":$dec;
    $this->_decimals=empty($decimal)?"2":$decimal;
    $this->_val_separator=empty($val)?",":$v;
    $this->_format=empty($format)?"%S %V %C":$format;
}
function toString()
{
    $pattern=array();
    $pattern[]='/%S/i';
    $pattern[]='/%V/i';
    $pattern[]='/%C/i';
    $value=array();
    /*$value[]=$this->_symbol;*/
    $value[]=number_format($this->_value,$this->_decimals,$this->_decimal_separator,$this->_val_separator);
    $value[]=$this->_currency;      
    return preg_replace($pattern,$value,$this->_format);
}
}
?> 
```

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:05:02.350

制作`$this->_decimals`一个数字而不是一个字符串。因此，将其转换为整数，警告就会消失。

[http://php.net/manual/en/function.number-format.php](http://php.net/manual/en/function.number-format.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:06:49.713

正如错误所说，它预计很长。我怀疑 PHP 无论如何都会转换为 long，但是在所有三元语句中，您都将 $this_decimals 设置为字符串，请注意您将值包含在.. "2" 中的双引号。

# ios - ManagedObjectContext 取消回滚未完全删除插入的数据

> ID：15278413
> 
> 赞同：1
> 
> 时间：2013-03-07T17:59:34.693
> 
> 标签：ios, core-data, rollback, managedobjectcontext

我在类似的主题上看到了一堆回复，但是在遵循他们的建议之后，我仍然遇到了一个奇怪的问题，并且我的头撞到了墙上。

我有一张人员表，并且可以选择让用户通过填写​​表格来为另一个用户添加条目。该构造函数如下所示：

```
-(id)initWithContext:(NSManagedObjectContext *)context {

    self = [super initWithNibName:@"FamilyMemberInfoViewController" bundle:[NSBundle mainBundle]];

    if (self) {

        self.managedObjectContext = context;

mainUser = [NSEntityDescription insertNewObjectForEntityForName:@"FamilyMember" inManagedObjectContext:context];
    Details *userDetails = [NSEntityDescription insertNewObjectForEntityForName:@"Details" inManagedObjectContext:context];
    mainUser.details = userDetails;
    userDetails.familyMember = mainUser; 
```

...ETC。

然后如果用户单击后退按钮，我会调用：

```
-(void) viewWillDisappear:(BOOL)animated {
    if ([self.navigationController.viewControllers indexOfObject:self]==NSNotFound) {

...

           [self.managedObjectContext rollback];
           [mainUser release];
           self.managedObjectContext = nil;    

... 
```

当它转到父表视图控制器时，它使用以下代码重新加载数据，并且正如预期的那样，该对象消失了。

```
-(void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated {

    if (viewController == self) {
        NSFetchRequest *familyMemberRequest = [NSFetchRequest new];
        NSEntityDescription *familyDescription = [NSEntityDescription entityForName:@"FamilyMember" inManagedObjectContext:self.managedObjectContext];
        familyMemberRequest.entity = familyDescription;

        NSPredicate *predicate = [NSPredicate predicateWithFormat:
                                  @"isMainUser == 0"];
        [familyMemberRequest setPredicate:predicate];

        NSError *error;
        self.familyMembers = [managedObjectContext executeFetchRequest:familyMemberRequest error:&error];

        NSLog(@"Retrieved family members! Count = %i", self.familyMembers.count);
        [familyMemberRequest release];
    }
} 
```

但是 - 当我点击离开选项卡`tableView`并返回它时，它会再次运行相同的代码并在托管对象上下文中找到取消的对象。

但是 - 然后当我重新运行该应用程序时，它无处可寻。

如果我尝试创建另一个新人并退出，它最初会显示正确的条目数（没有任何已取消的对象），然后当我单击另一个选项卡并返回时，除了那些应该在那里的。

我已经尝试过清除`FamilyMemberInfoViewController`: `[context reset]`、`[context rollback]`、`[context deleteObject:]`等中的托管对象上下文的各种方式`[context processPendingChanges]`。我尝试过`familyMembers`两次尝试加载数组，即使单击后退按钮它仍然可以找到正确数量的对象，但是当我单击一个不同的选项卡，然后返回它会显示额外的对象（如果我去那里并返回，它会继续显示）。

有任何想法吗？

# php - PHP 比较一个值的更聪明的方法，一个不使用 foreach 的多维？

> ID：15278415
> 
> 赞同：1
> 
> 时间：2013-03-07T17:59:39.560
> 
> 标签：php, multidimensional-array, compare

这是一个快速的。有没有一种方法可以将给定值与预设规则的多维数组进行比较，而无需遍历我们的规则？

我给你举个例子。假设我们正在评估从 1 到 10 的学生。我们想用几句话来分配一个绩效评估。所以我们会有一系列标记以及它们代表的内容，例如：

```
$evaluation = array(
    array('from' => 1, 'to' => 3, 'comment' => 'Stop watching TV'),
    array('from' => 4, 'to' => 6, 'comment' => 'Keep trying'),
    array('from' => 7, 'to' => 8, 'comment' => 'Almost there'),
    array('from' => 9, 'to' => 10, 'comment' => 'EMC2')
); 
```

一个学生得了 8 分，所以我们会这样做：

```
$grade = 8;
foreach($evaluations as $evaluation) {
    if($grade >= $evaluation['from'] && $grade <= $evaluation['to']) {
        echo $evaluation['comment'];
    }
} 
```

我想这很好。但是有没有更简洁的方法来做到这一点？也许一个内置的 PHP 函数会比遍历我们的规则集更快？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:02:42.263

switch 语句会稍微快一些，但由于您正在处理一个 4 元素数组，所以几乎任何事情都可以。

如果使用`switch`语句展开循环，则会减少需要计算的表达式数量，因为在循环中需要进行大于和小于比较。使用`switch`，您只需进行一次比较。

如果您定义正确的回调函数，还有其他类似的 PHP 函数`array_filter`可能`array_reduce`会导致相同的结果，但您现在拥有的可能与其他任何函数一样好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:22:14.507

认为您对数组的思考过度了，您可以按每个范围内的最大值作为键，它的数据少一点，评估的少一点，但老实说，这似乎是一种微优化

```
$evaluation = array(
    3 => 'Stop watching TV',
    6 => 'Keep trying',
    8 => 'Almost there',
    10 => 'EMC2'
);

$grade = 8;
foreach ($evaluation as $limit => $comment) {
    if ($limit < $grade) continue;
    break;
}
echo $comment; 
```

# pyephem - 我可以使用 PyEphem 跟踪火星表面的点吗，例如，漫游者的着陆点

> ID：15278418
> 
> 赞同：1
> 
> 时间：2013-03-07T17:59:49.543
> 
> 标签：pyephem

我是否可以使用 PyEphem 跟踪火星表面的点，例如漫游者的着陆点，以及从地球上的某个点或能见度期间是否可以看到特定点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:01:14.563

不幸的是，我认为答案是否定的：PyEphem 提供了底层 libastro 库的支持，支持我们面对我们的月球经度，以及面对我们的木星经度；但对于火星来说似乎不是。

**回复评论：**

由于月球总是指向我们的同一面，因此您对月球的评论的大致答案是“0°经度始终指向我们，因此我们可见的月球面是经度 0-90° 和 270- 360°。”</p>

然而，在任何特定时刻，正对地球中心的确切月球经度都会有轻微的摆动。您可以查看该属性`moon.libration_long`以了解在给定的时刻，月球目前在“完全面向我们”的东或西多远。

**进一步回应：**

您可以使用系统 I 或系统 II，通过询问其中央经线来询问木星如何面对我们，如下所示：

```
import ephem
j = ephem.Jupiter()
j.compute('2013/1/1')
print j.cmlI
print j.cmlII 
```

结果是以弧度为单位测量的经度，打印为度数：

```
64:29:25.5
169:52:16.2 
```

# jquery-ui - 选择事件后的jquery

> ID：15278423
> 
> 赞同：0
> 
> 时间：2013-03-07T18:00:04.743
> 
> 标签：jquery-ui, jquery, jquery-plugins

我正在使用 jQuery 选项卡，每个选项卡都有不同的高度。当我选择一个选项卡时，我需要刷新 div 中的内容以适应出现/消失的窗口滚动。

查看选项卡插件的 API 文档有加载事件和选择事件。我似乎找不到任何其他可以插入的事件。

负载事件工作正常，但在选择已加载的选项卡时，在显示内容之前已加载的选项卡。

```
$("#tabs").tabs({
    cache: false,
    select: function (e, ui) {
        // running the event here will not work as it runs before the content is diplayed
    },
    load: function (event, ui){
        // running it here works ok as it fires the event after the content is displayed
    }
}); 
```

我需要在显示内容后触发事件。

有没有我可以针对这种特定行为插入的事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:32:13.357

JqueryUI [1.8 API 文档](http://api.jqueryui.com/1.8/tabs/)描述了`show`和`select`事件。

如果`show`不起作用，那么也许在`select`处理程序中配置一个计时器以在几毫秒后刷新 div 就可以了。

# backbone.js - 在新窗口中打开主干视图

> ID：15278425
> 
> 赞同：1
> 
> 时间：2013-03-07T18:00:10.293
> 
> 标签：backbone.js, javascript, trigger.io

我正在使用主干开发 trigger.io 应用程序，整个应用程序在一个页面中，但我需要在新窗口中打开详细信息页面（不是模式视图，android 中的选项卡）。

我不知道是否可以在新窗口中呈现视图，或者将视图写入历史记录并导航到 url。

任何人都可以给我一些提示。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:42:43.317

如果要打开特殊视图，请指定调用该视图的路由。

现在您创建一个简单的链接，目标为空白到该路线。

应用程序在新窗口中启动并加载映射到路由的操作。

我认为这是最好的解决方案，尽管有一些方法可以在 JavaScript 中创建窗口并在它们之间进行通信。如果您需要控制新选项卡，例如关闭选项卡或处理其内容，您将被迫通过 javascript 创建新选项卡并保留对新选项卡的引用。

# python - 检索所有包含特定单词的“雅虎答案”问题。速率限制问题

> ID：15278428
> 
> 赞同：0
> 
> 时间：2013-03-07T18:00:13.410
> 
> 标签：python, api, yahoo-api

所以，我正在尝试编译一个包含某个单词的 Yahoo Answers 中所有问题的数据库。我目前正在使用我编写的以下脚本执行此操作，使用 Pynswers 包装类调用 Yahoo API

```
from Answers import Answers

app = Answers()
wbk = xlwt.Workbook()

sheet = wbk.add_sheet('sheet 1')

app.appid = '...'
questions = app.questionSearch({'query':'tornado',})

#Write all column headings
sheet.write(0,0, 'Question')
sheet.write(0,1,'Answer')
sheet.write(0,2, 'Date')
sheet.write(0,3,'Number of Answers')

for i, value in enumerate(questions):
        content = value['Content'].strip()
        chosenAnswer = value['ChosenAnswer'].strip()
        date = value['Date'].strip()
        numAnswers = value['NumAnswers'].strip()

        #Write values into respect columns, (row, column)
        sheet.write(i+1,0,content)
        sheet.write(i+1,1,chosenAnswer)
        sheet.write(i+1,2,date)
        sheet.write(i+1,3,numAnswers)

wbk.save('C://test.xls') 
```

问题是我从这个查询中只得到了大约 10 个回复，而且我想不出一种方法来扩大我得到的问题的范围。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:08:49.263

[Pynswers](http://code.google.com/p/pynswers/)似乎是[Yahoo API 本身](http://developer.yahoo.com/answers/V1/questionSearch.html)的一个非常松散的包装器。API 文档显示在请求中使用“开始”和“结果”字段：

因此，也许您可​​以执行以下操作：

```
first_50 = app.questionSearch({'query':'tornado', 'start' : 0, 'results' : 50})
next_50 = app.questionSearch({'query':'tornado', 'start' : 50, 'results' : 50}) 
```

**编辑**

此外，关于“速率限制”，[Yahoo 就他们的 API 声明](http://developer.yahoo.com/yql/faq/)（本节取自 2013 年 3 月 7 日）：

> 一分钟/小时/天我可以调用多少次 YQL？
> 
> YQL 中的速率限制基于您的身份验证。如果您使用基于 IP 的身份验证，则公共 YQL Web 服务 URL (/v1/public/ *) 的调用次数/小时/IP 限制为 2,000 次，或者私有 YQL Web 服务 URL (/v1) 的调用次数/小时/IP 限制为 20,000 次/yql/* ) 需要 OAuth 授权。有关公共和私有 URL，请参阅 YQL Web 服务 URL。应用程序（由访问密钥标识）限制为 100,000 次呼叫/天/密钥*。但是，为了确保每个人都可以使用该服务，我们要求您调用 YQL 的次数不要超过 0.2 次/秒或 1,000 次/小时（对于 IP 身份验证用户）和 2.7 次/秒或 10,000 次/小时。
> 
> *请不要创建多个密钥来“避免”速率限制。如果您希望我们提高您的限额，请与我们联系并提供您项目的详细信息，我们将尽最大努力满足您的需求。

显然，您需要小心您的代码，以确保您在不超过速率限制的情况下获得所需的信息。因此，获得“所有”答案可能不切实际。

# css - 画廊上的 CSS Absolute 元素，遵循 16:9 的比例

> ID：15278438
> 
> 赞同：2
> 
> 时间：2013-03-07T18:00:51.413
> 
> 标签：css, position, absolute

这是我的第一个问题，我不认为我做错了什么，因为它很具体，我正在尝试做一个画廊，这个画廊有页面，每个页面都有一个标题，我需要展示一个比例为 16:9 的图像和标题，无论它有多长。

就像现在一样，它可以显示标题，但是当我们将浏览器调整为较小的断点时，如果标题太长它就会中断（如果标题太长，将显示标题但可能不会显示图像）。

这就是我现在正在寻找的解决方案，我将留下一个 jsfiddle 作为示例，我试图使其尽可能简单，所以不要看丑陋的箭头和东西：P。

小提琴：http: [//jsfiddle.net/Vb7bP/5/](http://jsfiddle.net/Vb7bP/5/)

一个丑陋的解决方法是在此处更改 padding-bottom：

```
.galleryContainer {
    padding-bottom: 56.25%; // This is for the image to respect a 16:9 aspect ratio.
} 
```

但这不起作用，因为如果标题太长或太短，它可能会中断，我们可能会失去 16:9 的比例。

我认为标题 css 很好，它位于 div 的底部，是绝对的。

```
.galleryCaptionWrapper {
    background: #ccc;
    width: 100%;
    position: absolute;
    padding: 25px;
    z-index: 3;
    bottom: 0;
} 
```

任何形式的帮助将不胜感激，如果问题是错误的，对不起。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:41:42.620

这是你要找的吗？

[http://jsfiddle.net/Vb7bP/3/](http://jsfiddle.net/Vb7bP/3/)

我认为你在很多不需要的事情上都有绝对的定位。相关的css在这里：

```
.galleryImageWrapper {
    background-color: #000;
    width: 100%;
    padding-bottom: 56%;
    position: relative;
}
.galleryImageWrapper img {
    position: absolute;
    width: 100%;
    top: 0;
    left: 0;
    height: 100%;
} 
```

我自己也有类似的问题：

[使用 CSS 缩放对象元素高度与宽度成比例 + 常量](https://stackoverflow.com/questions/14161321/scaling-object-element-height-proportional-to-width-constant-with-css)

你不需要做任何特别的事情来让标题出现在图像之后。这是块元素的标准行为。

# php - 数组内容不会从 jquery ajax 函数传递到 php

> ID：15278441
> 
> 赞同：0
> 
> 时间：2013-03-07T18:00:54.980
> 
> 标签：php, javascript, jquery, ajax, json

我正在尝试使用 jquery ajax 将数组作为参数传递给 php，但我无法在 php 端获取内容......它像这样返回：

```
Array
(
    [attributes] => 
) 
```

也许我在 JS 中创建的关联数组作为对象传递.. 但不确定。

jQuery代码

```
 $(".submit").on("click", function () {

         var myattributes = new Array();
         $("select").each(function () { 
             myattributes[$(this).attr('id')] = this.value;

         });

         //for(var index in myattributes) {
         // document.write( index + " : " + myattributes[index] + "<br />");
         // }
         //this works

var data = 'attributes=' + myattributes'&act=test';

         $.ajax({
             type: "POST",
             url: "myphp.php",
             data: data,
             beforeSend: function (html) { 
                 alert(html);
             },
             success: function (html) { 

                 alert(html);
             },
             complete: function (html) { 
                 alert (html); 
             }
         });

     }); 
```

PHP (myphp.php):

```
if (isset($_REQUEST['attributes'])  ) {
print_r ($_REQUEST);
//$array=$_REQUEST['attributes'];
//print_r ($array);

//foreach ($array as $key => $value)
// echo $key.'=>'.$value.'<br />';

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:16:47.860

如果您的所有`select`元素都是 html 中表单的一部分，则可以使用以下方法一次获取所有表单元素的数据：

```
...
url: "myphp.php",
data: $("form").serialize(),
... 
```

# android - android ListView不会突出显示选定的行

> ID：15278445
> 
> 赞同：4
> 
> 时间：2013-03-07T18:01:00.370
> 
> 标签：android, android-listview

在我的应用程序中，我从服务器检索用户的播放列表并感受`ListView`数据。问题是，`ListView`没有突出显示单击的行。为了防止愤怒的评论告诉我我不在这里使用搜索是我尝试过的事情：

*   将我行中的按钮设置为不可聚焦
*   通过代码和 XML 设置 listSelector（不是同时）
*   试图改变传入的`View`背景`OnItemClickListener`
*   使用带有机器人 true 和 false 参数的 setItemsCanFocus()
*   将状态为“已选择”和“已按下”的 XML 可绘制对象设置为行布局根

自从我使用`Toast`. 但我只是不能强制`ListView`突出显示选定的行

列表显示

```
 <ListView
    android:id="@android:id/list"
    android:listSelector="@drawable/list_selected"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@+id/etbg"
    android:choiceMode="singleChoice"
    android:divider="@color/div" >
</ListView> 
```

用作列表行的布局

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
 >

<TextView
    android:id="@+id/tvListItemArtist"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_marginLeft="14dp"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:text="Small Text"
    android:layout_toRightOf="@+id/tbListPlay"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#FFFFFF" />

<TextView
    android:id="@+id/tvListItemSong"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/tvListItemArtist"
    android:layout_centerVertical="true"
    android:layout_marginLeft="5dp"
    android:layout_toRightOf="@+id/tvListItemArtist"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:text="Small Text"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#FFFFFF" />

<ImageView
    android:id="@+id/img_list_audio_saved"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:layout_marginRight="50dp"
    android:src="@drawable/attention"
    android:visibility="gone" />

<Button
    android:id="@+id/tbListPlay"
    android:layout_width="40dp"
    android:layout_height="40dp"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:layout_marginBottom="8dp"
    android:layout_marginTop="8dp"
    android:background="@drawable/button_play"
    android:focusable="false"
    android:focusableInTouchMode="false" />

     </RelativeLayout> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:05:10.747

你已经改变了你的 ListSelector：`android:listSelector="@drawable/list_selected"`我假设你的自定义 drawable 不是一个选择器，它有不同的状态。请参阅此[站点](http://developer.android.com/guide/topics/resources/drawable-resource.html)或此[问题](https://stackoverflow.com/q/1219312/1173391)以了解用法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:06:00.107

在drawables文件夹中为列表视图创建一个选择器，并将列表项背景设置为此drawable。请参阅下面的代码

select_button_background.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/select_button_selected" android:state_enabled="true" android:state_pressed="true"/>
    <item android:drawable="@drawable/select_button_selected" android:state_enabled="true" android:state_selected="true"/>

    <item android:drawable="@drawable/select_button_selectable" android:state_pressed="false"/>
    <item android:drawable="@drawable/select_button_selectable" android:state_selected="false"/>
 </selector> 
```

select_button_selectable.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <gradient
        android:angle="270"
        android:endColor="#CCCCCC"
        android:startColor="#DDDDDD"
        android:type="linear" />

    <corners android:radius="10dp" />

    <shape>
        <stroke
            android:width="1dp"
            android:color="#333333" />
    </shape>

</shape> 
```

select_button_selected.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <gradient
        android:angle="270"
        android:endColor="#AAAAAA"
        android:startColor="#BBBBBB"
        android:type="linear" />

    <corners android:radius="10dp" />

    <shape>
        <stroke
            android:width="1dp"
            android:color="#333333" />
    </shape>

</shape> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T18:12:06.827

嗨，我已经在这个问题链接[android - identify items in a ListView 中](https://stackoverflow.com/questions/15161021/android-identify-items-in-a-listview)为你发布了答案，你说它对你不起作用，我提供了相同的答案，它适用于其他检查这个问题[Inflate ListView row from OnClickListener在安卓？](https://stackoverflow.com/questions/15253987/inflate-listview-row-from-onclicklistener-in-android/15254297?noredirect=1#comment21555171_15254297). 我希望这能帮到您。

# sql-server - 在 SQL Server 中将 base 31 值转换为 BigInt

> ID：15278464
> 
> 赞同：3
> 
> 时间：2013-03-07T18:02:17.630
> 
> 标签：sql-server, valueconverter

在我们的数据库中，我们对数字 0 到 9 和字母表中所有非誓言的字母组合的所有内容都使用主键。包括字母 Y。我创建了这张表来组织它。

```
CREATE Table Base31
(ID varchar(1),
 NumberValue bigint)

GO

Insert into Base31 SELECT '0', '0'
Insert into Base31 SELECT '1', '1'
Insert into Base31 SELECT '2', '2'
Insert into Base31 SELECT '3', '3'
Insert into Base31 SELECT '4', '4'
Insert into Base31 SELECT '5', '5'
Insert into Base31 SELECT '6', '6'
Insert into Base31 SELECT '7', '7'
Insert into Base31 SELECT '8', '8'
Insert into Base31 SELECT '9', '9'
Insert into Base31 SELECT 'B', '10'
Insert into Base31 SELECT 'C', '11'
Insert into Base31 SELECT 'D', '12'
Insert into Base31 SELECT 'F', '13'
Insert into Base31 SELECT 'G', '14'
Insert into Base31 SELECT 'H', '15'
Insert into Base31 SELECT 'J', '16'
Insert into Base31 SELECT 'K', '17'
Insert into Base31 SELECT 'L', '18'
Insert into Base31 SELECT 'M', '19'
Insert into Base31 SELECT 'N', '20'
Insert into Base31 SELECT 'P', '21'
Insert into Base31 SELECT 'Q', '22'
Insert into Base31 SELECT 'R', '23'
Insert into Base31 SELECT 'S', '24'
Insert into Base31 SELECT 'T', '25'
Insert into Base31 SELECT 'V', '26'
Insert into Base31 SELECT 'W', '27'
Insert into Base31 SELECT 'X', '28'
Insert into Base31 SELECT 'Y', '29'
Insert into Base31 SELECT 'Z', '30' 
```

我正在尝试将这些主键转换为数值，但我一直在运行 int 限制。我已经更改了所有内容以使用大的 int 数据类型。如何获得使用大 int 数据类型的算术？

```
GO
CREATE Proc Base_31 @v varchar(8)

as    

DECLARE @Ai bigint
DECLARE @Bi bigint
DECLARE @Ci bigint
DECLARE @Di bigint
DECLARE @Ei bigint
DECLARE @Fi bigint
DECLARE @Gi bigint
DECLARE @Hi bigint

SELECT @Ai = NumberValue                 from Base31 where      RIGHT(@v,1)    = ID
SELECT @Bi = (NumberValue * POWER(31,1)) from Base31 where LEFT(RIGHT(@v,2),1) = ID
SELECT @Ci = (NumberValue * POWER(31,2)) from Base31 where LEFT(RIGHT(@v,3),1) = ID
SELECT @Di = (NumberValue * POWER(31,3)) from Base31 where LEFT(RIGHT(@v,4),1) = ID
SELECT @Ei = (NumberValue * POWER(31,4)) from Base31 where LEFT(RIGHT(@v,5),1) = ID
SELECT @Fi = (NumberValue * POWER(31,5)) from Base31 where LEFT(RIGHT(@v,6),1) = ID
SELECT @Gi = (NumberValue * POWER(31,6)) from Base31 where LEFT(RIGHT(@v,7),1) = ID
SELECT @Hi = (NumberValue * POWER(31,7)) from Base31 where LEFT(      @v   ,1) = ID

SELECT @v       AS Original
     , Cast(@Ai AS bigint) 
     + Cast(@Bi AS bigint) 
     + Cast(@Ci AS bigint) 
     + Cast(@Di AS bigint) 
     + Cast(@Ei AS bigint) 
     + Cast(@Fi AS bigint) 
     + Cast(@Gi AS bigint)
     + Cast(@Hi AS bigint) 
     as [Base 31 converted]
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:57:05.350

有更好的方法来做到这一点。以下方法适用于任意长度的数字和任意基数，只需稍作调整：

```
-- First convert a bigint to base-31 number string.
DECLARE @number bigint

SET @number = 123740194325432

DECLARE @Base31 table
(Digit varchar(1) NOT NULL,
 Value bigint NOT NULL PRIMARY KEY)

INSERT into @Base31 (Digit, Value) VALUES ('0', '0')
INSERT into @Base31 (Digit, Value) VALUES ('1', '1')
INSERT into @Base31 (Digit, Value) VALUES ('2', '2')
INSERT into @Base31 (Digit, Value) VALUES ('3', '3')
INSERT into @Base31 (Digit, Value) VALUES ('4', '4')
INSERT into @Base31 (Digit, Value) VALUES ('5', '5')
INSERT into @Base31 (Digit, Value) VALUES ('6', '6')
INSERT into @Base31 (Digit, Value) VALUES ('7', '7')
INSERT into @Base31 (Digit, Value) VALUES ('8', '8')
INSERT into @Base31 (Digit, Value) VALUES ('9', '9')
INSERT into @Base31 (Digit, Value) VALUES ('B', '10')
INSERT into @Base31 (Digit, Value) VALUES ('C', '11')
INSERT into @Base31 (Digit, Value) VALUES ('D', '12')
INSERT into @Base31 (Digit, Value) VALUES ('F', '13')
INSERT into @Base31 (Digit, Value) VALUES ('G', '14')
INSERT into @Base31 (Digit, Value) VALUES ('H', '15')
INSERT into @Base31 (Digit, Value) VALUES ('J', '16')
INSERT into @Base31 (Digit, Value) VALUES ('K', '17')
INSERT into @Base31 (Digit, Value) VALUES ('L', '18')
INSERT into @Base31 (Digit, Value) VALUES ('M', '19')
INSERT into @Base31 (Digit, Value) VALUES ('N', '20')
INSERT into @Base31 (Digit, Value) VALUES ('P', '21')
INSERT into @Base31 (Digit, Value) VALUES ('Q', '22')
INSERT into @Base31 (Digit, Value) VALUES ('R', '23')
INSERT into @Base31 (Digit, Value) VALUES ('S', '24')
INSERT into @Base31 (Digit, Value) VALUES ('T', '25')
INSERT into @Base31 (Digit, Value) VALUES ('V', '26')
INSERT into @Base31 (Digit, Value) VALUES ('W', '27')
INSERT into @Base31 (Digit, Value) VALUES ('X', '28')
INSERT into @Base31 (Digit, Value) VALUES ('Y', '29')
INSERT into @Base31 (Digit, Value) VALUES ('Z', '30')

DECLARE @base bigint
DECLARE @power bigint
DECLARE @divisor bigint
DECLARE @output varchar(50)
DECLARE @digit varchar(1)
DECLARE @digitValue bigint

SET @output = ''
SET @base = 31

IF @number < 0
BEGIN
    SET @number = ABS(@number)
    SET @output = '-'
END

IF NOT @number = 0
BEGIN   
    /* Due to the fact that the LOG10 function in SQL yields a float which limits the 
    available precision of the logarithm, numbers above 147209586032873 may have some 
    artifacts, i.e. LOG10(147209586032874) = LOG10(147209586032873). In actual practice, 
    I've found that numbers above 31^10 - 5 may manifest a leading zero when they are 
    near a power of 31, i.e. numbers in the ranges 31^10 - 4 to 31^10 - 1 and 
    31^11 - 158 to 31^11 - 1\. */

    SET @power = FLOOR(LOG10(@number) / LOG10(@base))
END

WHILE @power >= 0 AND @number > 0
BEGIN
    SET @divisor = POWER(@base, @power)
    SET @digitValue = @number / @divisor
    SET @number = @number % @divisor

    SELECT @digit = Digit
    FROM @Base31
    WHERE Value = @digitValue

    SELECT @output = @output + @digit
    SET @power = @power - 1
END

SET @output = @output + COALESCE(REPLICATE('0', @power + 1), '0')

SELECT @output

-- Now convert the base-31 number string back to a bigint and see if we're right.
DECLARE @position bigint

SET @position = LEN(@output)
SET @number = 0

WHILE @position > 0
BEGIN
    SET @digit = SUBSTRING(@output, @position, 1)

    SELECT @digitValue = Value
    FROM @base31
    WHERE Digit = @digit

    SET @power = LEN(@output) - @position
    SET @number = @number + (@digitValue * POWER(@base, @power))
    SET @position = @position - 1
END

SELECT @number 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T18:38:16.987

问题是 POWER 函数返回与其第一个参数相同的类型。因此，您只需将第一个参数显式转换为 bigint。

此语句失败：

```
select power(31,7) 
```

这个有效：

```
select power(cast(31 as bigint),7) 
```

# python - 当一个无效的参数被提供给 uuid.UUID() 时会发生什么？

> ID：15278467
> 
> 赞同：2
> 
> 时间：2013-03-07T18:02:24.063
> 
> 标签：python, exception, uuid

会抛出异常吗？UUID() 是否会默默地失败？是否有任何情况下'myStatus'来自

```
myStatus = True
myUUID = uuid.UUID( someWeirdValue )
if myUUID == None:
    myStatus = False 
```

等于假？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T18:03:37.243

根据传入的内容，`UUID()`构造函数会引发 a`TypeError`或 a 。`ValueError`

不传入任何`hex`, `bytes`, `bytes_le`, `fields`, 或`int`选项会引发 a `TypeError`，传入无效的值会引发 a `ValueError`：

```
>>> uuid.UUID()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/uuid.py", line 129, in __init__
    raise TypeError('need one of hex, bytes, bytes_le, fields, or int')
TypeError: need one of hex, bytes, bytes_le, fields, or int
>>> uuid.UUID('abcd')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/uuid.py", line 134, in __init__
    raise ValueError('badly formed hexadecimal UUID string')
ValueError: badly formed hexadecimal UUID string
>>> uuid.UUID(bytes='abcd')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/uuid.py", line 144, in __init__
    raise ValueError('bytes is not a 16-char string')
ValueError: bytes is not a 16-char string 
```

等等

它*不会*默默地失败。它肯定永远不会回来`None`。要么`myUUID`设置为`UUID`实例，要么引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:07:40.650

由于[`UUID`该类](http://hg.python.org/cpython/file/cfc777407b03/Lib/uuid.py#l53)没有 override `__new__`，因此它的构造无法返回除`uuid.UUID`实例之外的任何内容。

模块提供的 UUID 工厂，通过 的函数`uuid1`，`uuid4`可以想象有一个错误导致它们返回`None`。粗略地看一下他们的[实现](http://hg.python.org/cpython/file/cfc777407b03/Lib/uuid.py#l490)，这样的错误不太可能出现。无论是什么错误导致您的 UUID 对象成为`None`，该`uuid`模块都不是一个可靠的罪魁祸首。

# selenium - 页面在 firefoxdriver 中变得完全不可点击

> ID：15278469
> 
> 赞同：0
> 
> 时间：2013-03-07T18:02:24.547
> 
> 标签：selenium, selenium-webdriver

我正在使用 Selenium，并且某些页面完全无法点击。让我解释。

如果我使用 chrome 或 Firefox（不是 selenium）访问页面，则该页面运行良好。但是，一旦我进入 FirefoxDriver 中的同一页面，当我使用 click() 或 sendKeys(Keys.RETURN) 时，它不会抛出错误，它根本不会点击它。此外，当浏览器打开时，如果我手动尝试单击元素，它们将不起作用。

我已验证页面上没有我必须浏览的框架。我试过点击按钮、链接和其他元素，它们都做同样的事情。在其他页面上，Selenium 工作正常。

我无法发布页面的来源，但我绝对可以回答有关它的问题。

谢谢！

编辑：这是我正在做的代码，非常基本：

driver.get(url);

driver.findElement(By.cssSelector(".toolbar-logo")).click();

# jquery - 在高度为 100% 的网站中嵌入网站

> ID：15278470
> 
> 赞同：0
> 
> 时间：2013-03-07T18:02:26.487
> 
> 标签：jquery, html, css

我正在尝试使用 iframe 将一个网站放入另一个网站上的页面。我已经设法加载到页面。但是我需要页面内的站点加载到网站的高度。而不是它所在的网站页面。

目前，如果我将高度设置为 100%，它只会显示网站的一部分，因为这是页面上唯一的内容。我不想做的是将嵌入网站的高度设置为 4000 像素，因为某些页面只会显示几张图像或几行文本。

我只是想知道这是可能的。

代码到 iframe -

```
<iframe src="http://example.com" width="100%" height="100%" frameborder="0" scrolling="no"></iframe> 
```

反对的代码 -

```
<object data="http://example.com" type="text/html" height="100%" width="1024px"></object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:59:28.363

你可以：

```
iframe {
position:absolute;
top:0px;
bottom:0px;
left:0px;
right:0px;
overflow:auto; /* coz you need vertical and horizontal scrollbars */
} 
```

如果没有 iframe 父级的位置不是静态的（这是默认值），这将起作用

你可能也需要`body {margin:0px; padding:0px;}`。

# jquery - jQuery Masonry 和 margin-right

> ID：15278472
> 
> 赞同：0
> 
> 时间：2013-03-07T18:02:30.267
> 
> 标签：jquery, html, css, jquery-masonry

我连续有两列，第一列有边距，而第二列没有。我想使用 jQuery Masonry 来删除空格。但是，margin right 似乎不适用于 Masonry。

如何保持相同的框宽度并删除行中第二个框后的边距？

这是**HTML：**

```
<div class="list">

    <div class="item"></div>
    <div class="item no-margin"></div>

    <div class="item"></div>
    <div class="item no-margin"></div>

    <div class="item"></div>
    <div class="item no-margin"></div>
</div> 
```

**CSS：**

```
.list{
    width: 350px;
    border: 1px solid red;
    overflow: hidden;
}

.item{
    width: 150px;
    height: 150px;
    background: green;
    margin-right: 50px;  
    margin-bottom: 50px;
    float: left;
}

.no-margin{
    margin-right: 0 !important;

} 
```

**jQuery：**

```
jQuery('.list').masonry({
        itemSelector: '.item',
}); 
```

**演示：http:** [//jsfiddle.net/Y7USd/](http://jsfiddle.net/Y7USd/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T03:11:24.160

jQuery Masonry 有一个名为`gutterWidth`. 您应该使用它在元素之间创建额外的边距/装订线。

在您的小提琴中，您还错过了包含`modernizr-transitions.js`.

这是一个工作示例：http: [//jsfiddle.net/shodaburp/T3FLr/](http://jsfiddle.net/shodaburp/T3FLr/)

# css - Firefox打印CSS中表格单元格的不透明度

> ID：15278474
> 
> 赞同：1
> 
> 时间：2013-03-07T18:02:33.257
> 
> 标签：css, google-chrome, firefox, opacity, printing-web-page

我正在尝试在表格单元格的 print.css 文件中应用不透明度。使用 Firefox 打印时，这些不透明的单元格是完全不可见的。由于页面上的其他元素，打印是在未选中“打印背景颜色和图像”的情况下完成的。然而，在 Chrome 上，打印正确完成，某些 td 单元格褪色但仍然出现在原地。

**样式表参考：**

```
<link rel="stylesheet" type="text/css" href="style.css"/>
<link type="text/css" href="print.css" rel="stylesheet" media="print" /> 
```

**print.css 文件中的相关 CSS 规则：**

```
td.fade {
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";
    filter: alpha(opacity=30);
    -webkit-opacity: 0.3;
    -moz-opacity: 0.3;
    opacity: .3;
} 
```

所有 td 元素都有一些先前的规则，但没有任何与不透明度冲突的规则。此规则是 print.css 中适用于表格单元格或父级的最后一条规则。

另一个奇怪的问题是 Firefox 中的打印预览显示好像可以正确打印，但事实并非如此。Firefox 在 print.css 中显示不透明度是否存在错误？我知道正在使用 print.css，因为由于 print.css 文件中的某些规则，在打印时没有显示其他表单元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:54:32.507

Rafe 在评论中提到了这一点，但我不知道他为什么不提供它作为答案。使用`rgba()`颜色可以在 Firefox 中打印褪色的文本。使用此代码的[示例小提琴：](http://jsfiddle.net/PhJzU/2/)

**HTML**

```
<table>
    <tr><td>Test No Fade</td></tr>
    <tr><td>Test Fade 70%</td></tr>
    <tr><td>Test Fade 50%</td></tr>
    <tr><td>Test Fade 30%</td></tr>
</table> 
```

**CSS**

```
tr + tr td {
    color: rgba(0,0,0,.7);
}
tr + tr + tr td {
    color: rgba(0,0,0,.5);
}
tr + tr + tr + tr td {
    color: rgba(0,0,0,.3);
} 
```

由于您不打印背景颜色和图像，因此我建议您的所有`.fade`课程都切换到`rgba()`用于`color`打印媒体的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T12:30:46.483

**moz-opacity**是一种方式，还有另一种**rgba 颜色代码**的方式，它具有 alpha 值，它使颜色具有透明度..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:06:30.740

Crome 打印是使用他们内置的单独驱动程序完成的，该驱动程序从页面获取图像，如快照并传输到打印机，以验证，安装 PDF 打印机并打印页面，页面将以图像的形式，文本不是可选择的。

现在在打印不透明度时。它只是一个 media="screen" 效果。在 media="print" 中，这将不适用于打印机，因为文件假脱机将逐个字符完成（或逐行，但将在打印机中应用。）

解决方案：对于 print.css 或 media="print" 我有一件事要说，

降低颜色对比度。如果边框颜色：#000; 对于不透明度 0.3，它可能会导致附近的颜色为：#888。

这样就可以了，不透明度是过滤器，适用于屏幕不适用于打印机。

我希望读完这篇文章后事情会很清楚:)

谢谢你，

# ruby-on-rails - 使用 `index do` 时，您可以在 Active Admin 中添加额外的行吗？

> ID：15278476
> 
> 赞同：0
> 
> 时间：2013-03-07T18:02:49.133
> 
> 标签：ruby-on-rails, activeadmin

我只是想在`<tr>`我的桌子上添加一个垫片。

我的设置如下：

```
index do
  column :id
  column :name
end 
```

而且我想要一个额外的行或每个表行，作为装饰目的的间隔。

这可能吗？还是我需要把我的整个模型掏空，然后像这样重做：

```
content do
  table id: 'my_table' do
     ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:23:50.400

您不应该为“美容目的”添加一行（这在语义上是不正确的，这就是我们使用样式的原因）。我认为没有办法`<tr>`在 ActiveAdmin 的行 () 中添加一个类，因此您必须执行以下操作：

```
column :id do |id|
  div class: 'new_section' do 
    id  
  end
end 
```

您将此类添加到每个“部分”的第一行并具有样式的位置。这将增加高度的大小，并希望行。

```
div.new_section { height: 100px; } 
```

# mocking - 检查模拟类中的嵌套数组结构

> ID：15278481
> 
> 赞同：2
> 
> 时间：2013-03-07T18:03:08.927
> 
> 标签：mocking, phpunit, multidimensional-array

我写了一个基本上看起来像这样的方法：

```
public function collectData($input, FooInterface $foo) {
   $data = array();
   $data['products']['name'] = $this->some_method();
   if(empty($input['bar'])) {
       $data['products']['type'] = "Baz";
   }
   // hundreds of calls later
   $foo->persist($data);
} 
```

现在我想对该`collectData`方法进行单元测试，以检查是否`$data`为某些输入设置了值。对于对象参数，我通常会使用这样的模拟：

```
$mock = $this->getMock('FooInterface');
$mock->expects($this->once())
             ->method('persist')
             ->with($this->identicalTo($expectedObject)); 
```

但是我将如何测试某些嵌套数组键（例如，如果`$data['products']['prices']['taxgroup']`是 1），而忽略数组中可能存在的所有其他键？PHPUnit 或 Mockery 是否提供此类检查？或者他们可以很容易地扩展以提供这样的检查吗？

还是做我现在正在做的事情更好：创建我自己的`FooClassMock`类来实现`FooInterface`并将数据存储在`persist`调用中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:56:04.180

事实证明，有一种方法——我可以创建自己的[约束类](https://gist.github.com/gbirke/5115086)。之后，很容易：

```
$constraint = new NestedArrayConstraint(
    array('products', 'prices', 'taxgroup'),
    $this->equalTo(1)
);
$mock = $this->getMock('FooInterface', array('persist'));
$mock->expects($this->once())
             ->method('persist')
             ->with($constraint); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:21:34.633

您还有一个选择，但前提是您使用 PHPUnit >= 3.7。有一个回调断言，你可以像这样使用它：

```
$mock = $this->getMock('FooInterface', array('persist');
$mock->expects($this->once())
         ->method('persist')
         ->with($this->callback(function($object) {
             // here you can do your own complex assertions

             return true|false;
         })); 
```

这里有更多细节：

[https://github.com/sebastianbergmann/phpunit/pull/206](https://github.com/sebastianbergmann/phpunit/pull/206)

# algorithm - 动态规划：任务计划变化

> ID：15278482
> 
> 赞同：0
> 
> 时间：2013-03-07T18:03:15.957
> 
> 标签：algorithm, dynamic-programming, job-scheduling

我在动态编程问题上苦苦挣扎了几天。它是这样的：John 的工作日被划分为 N 个时隙，每个时隙 i 都关联一个增益 G[i]，如果他在那个时隙工作，他可以​​获得的收益 G[i]。如果他决定在时间间隔 [i, j] 内工作，他的总奖励将是 R[i,j]=G[i+1]+...+G[j]，因为第一个时间段用于热身。每天他必须准确地工作 T 个时隙——他可以从可用的 N 个总时隙中选择 T 个时隙的子集。他想通过选择一组分离区间 [a1,b1], [a2,b2], ...[ak,bk] 来最大化他的利润，其中 1 <= a1 <= b1 < a2 <= b2 <... < ak <= bk 和 Sum[i=1, k](bi-ai+1)=T。

示例：N=7，T=5，增益向量 {3,9,1,1,7,5,4}。最佳解决方案是选择区间 [1,2] 和 [4,6]，总利润为 9+12=21。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:18:16.603

DP解：int f[i][j][0..1]；

```
let f[i][j][0] denotes the maximal gain for the first i time slots and using j time slots, and the i-th time slot is not used.
let f[i][j][1] denotes the maximal gain for the first i time slots and using j time slots, and the i-th time slot is used.

obviously,f[i][j][k] can determine f[i+1][j][k] or f[i+1][j+1][k]. details below:
f[i+1][j+1][1]=max(f[i+1][j+1][1],f[i][j][0],f[i][j][1]+G[i+1]);
f[i+1][j][0]=max(f[i+1][j][0],f[i][j][0],f[i][j][1]); 
```

# javascript - 支持矢量图层的基于瓦片的地图解决方案

> ID：15278484
> 
> 赞同：1
> 
> 时间：2013-03-07T18:03:18.997
> 
> 标签：javascript, svg, d3.js, gis, shapefile

我需要显示美国的地图，在此之上，还有一层州、另一个县和另一个地方（[根据美国人口普查的定义](http://www.census.gov/geo/www/cob/cbf_place.html)）。此外，根据某些标准，我需要动态切换一层或另一层，并对层的某些部分进行着色（例如，将某些县填充为红色，将其他县填充为绿色等）。地图本身可以很简单，我不需要道路或任何详细的东西。

我的第一次尝试是基于[此示例](http://bl.ocks.org/mbostock/4060606)使用 d3 完成的，但我真的很想切换到基于平铺的解决方案，因为它似乎响应更快、更轻巧、更流畅且对移动设备的支持更好。

我一直在网上寻找解决方案（商业和非商业，作为服务或本地可实施），但我还没有找到满足我所有需求的解决方案。例如，我发现[MapBox](http://mapbox.com)甚至有一个[非常好的编辑器](http://mapbox.com/tilemill)，但是您无法精细控制您定义的图层。我可以隐藏/显示一个图层，但我不能只着色它的一部分。谷歌地图当然是我的第一选择，但我没有找到上述方法。

你知道是否有任何我可以使用的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T02:24:21.057

我会看看无限提供的产品。它们使您能够使用广泛的技术并以多种方式提供最终产品。他们使用 Geoserver 作为切片服务器，您可以根据您对该图层的需求将切片或要素输出到其中。

您可以使用 ESRI、Quantum GIS 或使用包含的基于 Web 的地图连接到它。它们是开源的，因此有一个可以免费使用的社区版本或一个基本相同但带有企业支持的商业版本。

你可以在[这里](http://boundlessgeo.com/)找到它们。

# swing - 解释这个 Java Swing NetBeans 自动生成的代码

> ID：15278486
> 
> 赞同：-3
> 
> 时间：2013-03-07T18:03:25.517
> 
> 标签：swing, netbeans

有人可以告诉我这个自动生成的代码是什么意思。它来自 Netbeans IDE 的 GUI Builder。我真的需要一个可以解释 Netbeans 自动生成代码的网站。

```
 javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
    jPanel2.setLayout(jPanel2Layout);
    jPanel2Layout.setHorizontalGroup(
        jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
            .addContainerGap(189, Short.MAX_VALUE)
            .addComponent(jLabel8)
            .addGap(18, 18, 18)
            .addComponent(txt_name, javax.swing.GroupLayout.PREFERRED_SIZE, 212, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(152, 152, 152))
    ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:27:04.013

这几乎可以通过阅读[GroupLayout](http://docs.oracle.com/javase/7/docs/api/javax/swing/GroupLayout.html)上的 JavaDocs 来解释。

也许你对流畅的风格感到困惑？

不过，Netbeans 在视觉上的安排上做得非常好。将每个缩进层视为添加另一个约束。它是水平的、平行的（意味着它们是对齐的）和顺序的（按特定顺序）。从左到右，我们布局

*   [布局边缘与第一个组件之间的间隙](http://docs.oracle.com/javase/7/docs/api/javax/swing/GroupLayout.SequentialGroup.html#addContainerGap%28int,%20int%29)，理想情况下为 189 像素，但可以更大。
*   一个[JLabel](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLabel.html)
*   正好 18 像素的[间隙](http://docs.oracle.com/javase/7/docs/api/javax/swing/GroupLayout.SequentialGroup.html#addGap%28int,%20int,%20int%29)
*   `txt_name`（无论是什么组件），最好是 212 像素宽。
*   正好 152 像素的间隙

花一些时间阅读 JavaDocs 并尝试对代码进行小的更改，您就会掌握它的窍门。

**或者**，您可以决定只是盲目地信任 NetBeans，而不学习如何使用布局。只要您只需要基本界面之外的任何东西，这是一个可行的选择。

# java - 用Java从文本文件中读取数据

> ID：15278489
> 
> 赞同：0
> 
> 时间：2013-03-07T18:03:28.490
> 
> 标签：java, multidimensional-array, text-files

我在从文本文件中读取数据并将其放入二维数组时遇到问题。数据集的样本是：

> 1,2,3,4,5,6
> 
> 1.2,2.3,4.5,5.67,7.43,8

这段代码的问题是它只读取了第一行而不读取下一行。任何建议表示赞赏。

```
package test1;
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

public class Test1{ 

public static void main(String args[])throws FileNotFoundException, IOException{
try{    

double[][] X = new double[2][6];
BufferedReader input = new BufferedReader(new FileReader(file));

String [] temp;
String line = input.readLine();
String delims = ",";
temp = line.split(delims);
int rowCounter = 0;
while ((line = input.readLine())!= null) {
for(int i = 0; i<6; i++){
X[rowCounter][i] = Double.parseDouble(temp[i]);
}

rowCounter++;
} 

}catch (Exception e){//Catch exception if any
  System.err.println("Error: " + e.getMessage());
}finally{
}
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:08:53.300

您是否尝试过 Array 实用程序？像这样的东西：

```
while ((line = input.readLine())!= null) {  
  List<String> someList = Arrays.asList(line.split(","));
  //do your conversion to double here
  rowCounter++;
} 
```

我认为空白行可能会让你的 for 循环关闭

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:06:16.257

尝试：

```
int rowCounter = 0;
while ((line = input.readLine())!= null) {
String [] temp;
String line = input.readLine();
String delims = ",";
temp = line.split(delims);
for(int i = 0; i<6; i++){
X[rowCounter][i] = Double.parseDouble(temp[i]);
}
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T18:11:41.550

`temp`分配数组的唯一位置是`while`循环之前。您需要`temp`在循环内分配数组，并且不要从`BufferedReader`until 循环中读取。

```
String[] temp;
String line;
String delims = ",";
int rowCounter = 0;
while ((line = input.readLine())!= null) {
    temp = line.split(delims);  // Moved inside the loop.
    for(int i = 0; i<6; i++){
    X[rowCounter][i] = Double.parseDouble(temp[i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T18:17:02.007

readLine 期望在行尾有一个换行符。您应该放置一个空行来读取最后一行或使用 read 代替。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T18:18:12.747

我无法运行代码，但您的一个问题是您只拆分了第一行文本。

```
package Test1;

import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

public class Test1 {

    public static void main(String args[]) {
        try {
            double[][] X = new double[2][];
            BufferedReader input = new BufferedReader(new FileReader(file));

            String line = null;
            String delims = ",";

            int rowCounter = 0;
            while ((line = input.readLine()) != null) {
                String[] temp = line.split(delims);
                for (int i = 0; i < temp.length; i++) {
                    X[rowCounter][i] = Double.parseDouble(temp[i]);
                }
                rowCounter++;
            }

        } catch (Exception e) {// Catch exception if any
            System.err.println("Error: " + e.getMessage());
            e.printStackTrace();
        } finally {
        }
    }
} 
```

我格式化了您的代码以使其更具可读性。

我推迟设置二维数组的第二个元素的大小，直到我知道一行上有多少个数字。

# soap - 如何从 wsdl 为 groovy-wslite 生成代码？

> ID：15278492
> 
> 赞同：2
> 
> 时间：2013-03-07T18:03:31.523
> 
> 标签：soap, groovy

有没有一种简单的方法可以从 wsdl 为 groovy-wslite 生成代码？与来自 JaxWS 的 wsimport 类似，我们希望为数十个服务的发送/信封生成代码。我们可以使用任何想法、技巧、库或工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:42:39.970

您看过[Groovy SOAP](http://groovy.jmiguel.eu/groovy.codehaus.org/Groovy+SOAP.html)吗？Groovy 比使用 JaxWE 更容易处理 SOAP Web 服务。就像是：

```
def myService = new SoapClient("myNiceWSDLURL")
def result = myService.method(param1, param2) 
```

# spring - 为什么 Spring 没有运行我的验证器？

> ID：15278494
> 
> 赞同：1
> 
> 时间：2013-03-07T18:03:35.003
> 
> 标签：spring, spring-mvc

我正在使用 Spring MVC 并且正在制作一个验证器，但看起来 Spring 从未运行它。

这是我的验证器现在很简单，只需检查两个字段

```
public class MemberRequestValidator  implements Validator {

    public boolean supports(Class aClass) {
        return MemberRequest.class.equals(aClass);
    }

    public void validate(Object obj, Errors errors) {

        MemberRequest mr = (MemberRequest) obj;

        ValidationUtils.rejectIfEmptyOrWhitespace(errors, "content", "Content field is Required");

        ValidationUtils.rejectIfEmptyOrWhitespace(errors, "areacode", "Area code field is Required");

    }

} 
```

现在我的控制器如下所示：

```
 @InitBinder("memberrequest")
    public void initMemberRequestBinder(WebDataBinder binder) {
        binder.setValidator(new MemberRequestValidator());
    }

    @RequestMapping(value = "/save", method = RequestMethod.POST)
    public ModelAndView saveRequest(@ModelAttribute @Valid MemberRequest mr,  BindingResult result)
    {

        if (result.hasErrors())
        {
            LOGGER.debug("Pages had errors on it... returning to input page");
                return new ModelAndView("question");
        }
        else
        {
                String Ticket = mService.sentWebRequest(mr);

                Map<String, Object> model = new HashMap<String, Object>();
                Ticket t = new Ticket();
                t.setTicketDetails(Ticket);

                model.put("ticket", t);

                return new ModelAndView("thanks", model);
        }

    } 
```

在我的 JSP 页面中，我有以下内容：

```
 <c:url var="saveUrl" value="/mrequest/save.html" />

            <form:form modelAttribute="memberrequest"  action="${saveUrl}" name="memberrequest" id="memberrequest"> 
```

所以如果我没有在表格中输入任何数据，我应该点击错误但我没有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:48:47.733

尝试使用`@ModelAttribute("memberrequest")`in handler 或 modelAttribute="memberRequest" 在表单和`@initBinder("memberRequest")`

# jsf - 价值在 不会传给 bean

> ID：15278495
> 
> 赞同：2
> 
> 时间：2013-03-07T18:03:36.047
> 
> 标签：jsf, jsf-2

我的代码存在问题，其中来自各种 ` 的值不会传递给 bean。代码与我的旧项目基本相同（一切工作正常），但无论我做什么，bean 中的值都不会更新。我想要做的是让用户填写表格以注册帐户。我尝试通过两种方式做到这一点：

```
<p:inputText id="address" value="#{Register.user.address}.../> 
```

这`Register`是具有 User 类的属性 user 的 bean，其中有几个属性，包括`String`地址。这并没有真正起作用，所以我尝试将 getter 和 setter 放在 RegisterBean 中，并将它们设置为这种格式

```
public String getAddress(){
    return user.getAdress();
} 
```

并在 xhtml 中像这样使用它们

```
<p:inputText id="address" value="#{Register.address]".../> 
```

但它仍然不起作用。尝试调试，似乎根本没有输入设置器。有谁知道为什么这不起作用以及如何解决它？

这是其余的代码：

.xhtml

```
<h:head>
        <title>Register</title>
    </h:head>
    <body>
        <ui:composition template="userTemplate.xhtml">
            <ui:define name="content">
                <h:form>
                    <h:panelGrid id="grid" columns="3" >
                        <f:facet name="header">
                             Please fill in the required information  
                        </f:facet> 
                    <p:outputLabel value="Username" />
                    <p:inputText  id="username" value="#{Register.user.username}" validator="#{Register.validateUsername}" required="true" requiredMessage="Cannot be blank!"/>
                    <p:message for="username"/>
                    <p:outputLabel value="Password"/>
                    <p:password id="password" value="#{Register.user.password}" validator="#{Register.validatePasswords}"/>
                    <p:message for="password" showSummary="true" showDetail="false"/>
                    <p:outputLabel value="Repeat password" />
                    <p:password id="repPassword" value="#{Register.user.repeatPass}" validator="#{Register.validateRepPassword}"/>
                    <p:message for="repPassword" showSummary="true" showDetail="false"/>
                    <p:outputLabel value="First name" />
                    <p:inputText id="firstName" value="#{Register.user.firstName}"/> 
                    <p:message for="firstName" showSummary="true" showDetail="false"/>
                    <p:outputLabel value="Surname" />
                    <p:inputText id="surname" value="#{Register.user.surname}" required="true" requiredMessage="Cannot be blank!"/> 
                    <p:message for="surname" showSummary="true" showDetail="false"/>
                    <p:outputLabel value="Address" />
                    <p:inputText id="address"  value="#{Register.user.address}" required="true" requiredMessage="Cannot be blank!"/>
                    <p:message for="address" showSummary="true" showDetail="false"/>
                    <p:outputLabel value="Postnumber"/>
                    <p:inputText id="postnumber" value="#{Register.user.postnumber}" validatorMessage="Can only be numbers!" required="true" requiredMessage="Cannot be blank!"/>
                    <p:message for="postnumber" showSummary="true" showDetail="false"/>
                    <p:outputLabel value="City"/>
                    <p:inputText id="city" value="#{Register.user.city}" required="true" requiredMessage="Cannot be blank!"/>
                    <p:message for="city" showSummary="true" showDetail="false"/>
                    <p:outputLabel value="E-mail" />
                    <p:inputText id="email" validator="#{Register.user.validateEmail}" value="#{Register.email}"/>
                    <p:message for="email" showSummary="true" showDetail="false"/>
                    <p:outputLabel value="Phone number" />
                    <p:inputText id="phone" value="#{Register.user.phone}" required="true" validatorMessage="Phone number must be between 8 and 16 numbers long" requiredMessage="Cannot be blank!">
                        <f:validateLongRange  minimum="8" maximum="16"/>
                    </p:inputText> 
                    <p:message for="phone" showDetail="false" showSummary="true"/>
                    <p:commandButton type="submit" id="submitButton" value="submit" update="grid" ajax="true"/>
                    <p/>
                    #{Register.user}
                </h:panelGrid>
            </h:form>
        </ui:define>
    </ui:composition>
</body>
</html> 
```

豆子：

```
@SessionScoped
@ManagedBean(name="Register")
public class registerBean implements Serializable {
private User user = new User();

public void validateUsername(FacesContext context, UIComponent component, Object value) {
    String message = "";
    String username = (String) value;
    if(username == null || username.equals("")) {
        ((UIInput)component).setValid(false);
        message = "Enter a username";
        context.addMessage(component.getClientId(context), new FacesMessage(message));
    }
    //else user.setUsername(username);
}

public void validatePasswords(FacesContext context, UIComponent component, Object value) {
    String message = "";
    String password = (String) value;
    boolean hasNumber = false;
    for(int i = 0; i < password.length(); i++) {
        if(Character.isDigit(password.charAt(i))) {
            hasNumber = true;
        }
    }
    if(!hasNumber && password.length() < 8) {
        ((UIInput)component).setValid(false);
        message = "You need to have at least one number and the password must be atleast 8 characters long";
        context.addMessage(component.getClientId(context), new FacesMessage(message));
    }
    //else user.setPassword(password);
}

public void validateRepPassword(FacesContext context, UIComponent component, Object value) {
    String message = "";
    String repPassword = (String) value;
    if(!repPassword.equals(user.getPassword())) {
        ((UIInput)component).setValid(false);
        message = "The passwords don't match.";
        context.addMessage(component.getClientId(context), new FacesMessage(message));
    }
    //else user.setRepeatPass(repPassword);

}
public void validatePostnumber(FacesContext context, UIComponent component, Object value) {
    String message = "";
    try {
      Integer postnumber = (Integer) value;
    } catch (Exception e) {
        ((UIInput)component).setValid(false);
        message = "The postnumber can only be numbers";
        context.addMessage(component.getClientId(context), new FacesMessage(message));
    }
    //user.setPostnumber(((Integer) value).intValue());
}
public void validateEmail(FacesContext context, UIComponent component, Object value) {
    String message = "";
    try {
        InternetAddress email = new InternetAddress((String) value);
        email.validate();
    } catch(AddressException ae) {
        ((UIInput)component).setValid(false);
        message = "Type a valid email address";
        context.addMessage(component.getClientId(context), new FacesMessage(message));
    }
    //user.setEmail((String)value);
}
public User getUser() {
    return user;
}
} 
```

最后是普通的用户 java 类

```
public class User {

private String username;
private String password;
private String repeatPass;
private String address;
private int postnumber;
private String city;
private String firstName;
private String surname;
private String email;
private long phone;

+setters/getters and a toString()
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:49:58.190

我解决了这个问题。我觉得有点愚蠢，但从一开始就没有任何问题。问题是，由于所有验证器和所有内容，验证在几个字段上设置为 false，这导致值没有传回。一旦我设置了所有正确的信息，它就起作用了。

# socks - 为什么不广泛支持带有身份验证的 socks5？

> ID：15278496
> 
> 赞同：0
> 
> 时间：2013-03-07T18:03:36.890
> 
> 标签：socks

我一直在四处寻找，似乎没有多少 socks5 支持支持身份验证。我在我的 ubuntu 服务器上设置了一个带有身份验证的 socks5，但似乎没有很多浏览器支持它。为什么当时还制作了socks5？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:26:08.457

**为什么当时还制作了socks5？**

更新 SOCKS 协议以支持身份验证、IPv6 和 UDP。

# php - PHP session_start 不恢复会话

> ID：15278498
> 
> 赞同：2
> 
> 时间：2013-03-07T18:03:38.047
> 
> 标签：php, session

我想恢复会话。所以我正在传递会话 ID 并尝试像这样恢复会话：

```
 session_save_path($_SERVER["DOCUMENT_ROOT"].'/mysessions');
    if(!empty($_POST['session_id'])) { 
      session_id($_POST['session_id']);  // $_POST['session_id'] = "4dkwkeiugraqhfpeq745l2c2a1";
      session_start();
    }

    $session_var = $_SESSION['property_name']; // <- null even though there was something there

    ob_start();
    var_dump($_SESSION);
    $session_data = ob_get_clean(); // $session_data = NULL 
```

我看到物理会话文件存在`sess_4dkwkeiugraqhfpeq745l2c2a1`于我存储会话的会话文件夹中。三是那里的数据。但是，会话不会恢复。调用后`session_start()`，`$_SESSION`变量不存在。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:15:50.753

> 我在这里想念什么？

这很难说。`session_id()`是更改会话 ID 的正确功能，但`session_save_path()`可能是不同的。所以你认为会话在磁盘上，但它是错误的目录。

甚至是不同的保存处理程序，因此甚至不保存到磁盘而是保存到数据库中。

同样在您的代码中，我看不到任何检查来测试它`$_SESSION`是否实际上是空的，因此不清楚您在哪里检查。您应该在之后直接对此进行测试，`session_start()`以便知道数据是否已加载。

# javascript - Ajax javascript n jquery src 参考问题

> ID：15278500
> 
> 赞同：0
> 
> 时间：2013-03-07T18:03:38.903
> 
> 标签：javascript, jquery, ajax

我是 Jquery 和 AJAX 的新手。我正在尝试使用 AJAX 调用上传文件。当我将脚本引用设置为来自网站时，它工作正常，但是当我下载它并将引用设置为本地文件夹时，它不起作用。我的代码有什么问题？

当我使用：

```
<script src="http://malsup.github.com/jquery.form.js"></script> 
```

它工作正常，

但是当我使用

```
<script type="text/javascript" src="http://localhost:8080/Upload/js/jquery.js"></script> 
```

或者

```
<script type="text/javascript" src="js/jquery.js"> 
```

它不工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:05:28.490

在文件夹下的网站文件夹中添加`jquery.form.js`库`js`，然后

*改变*

```
<script type="text/javascript" src="js/jquery.js"> 
```

*到*

```
<script type="text/javascript" src="js/jquery.form.js"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:22:11.637

此版本指向该网站上的一个文件：

```
<script src="http://malsup.github.com/jquery.form.js"></script> 
```

此版本通过端口 8080 指向本地服务器（机器）上的文件（通常不是一个好主意）

```
<script type="text/javascript" src="http://localhost:8080/Upload/js/jquery.js"></script> 
```

此版本指向`js`与其链接的页面相关的文件夹

```
<script type="text/javascript" src="js/jquery.js"> 
```

为了在本地使用文件（如最后两个），您需要**下载该文件，并将其保存到您的 Web 服务器（或本地服务器）的文件夹**中。在第二个示例中，这意味着将其保存到`Upload\js`本地服务器站点（该机器）根目录下的文件夹中。

在第三个示例中，您需要找到它链接的页面，`js`在该文件夹下创建（如果不存在）一个文件夹并将 js 文件保存在该位置。

请注意，使用原始名称形式或类似的形式而不是 jQuery.js 总是一个好主意——因为这经常与 jQuery 库本身混淆。

一个示例可能会将其另存为：

*   jquery.form.js
*   malsup.jquery.form.js
*   malsup.version1.jquery.form.js

或一些这样的命名实例。

注意 使其尽可能通用的一种方法是使用

```
<script type="text/javascript" src="/Upload/js/jquery.js"></script> 
```

这指向一个名为 Upload 的文件夹，其中包含一个子文件夹 js (Upload\js)，它位于您网站的根目录。例如，如果您的站点位于 wwwroot 文件夹中的 windows e: 驱动器上，则它可能是：

```
E:\wwwroot\Upload\js\malsup.jquery.form.js 
```

# spring - 用于excel视图解析器的spring Java配置

> ID：15278505
> 
> 赞同：10
> 
> 时间：2013-03-07T18:04:00.517
> 
> 标签：spring, jakarta-ee, spring-mvc

我有一个带有（jsp）视图解析器的基于spring java配置的web应用程序。现在，当用户单击应用程序中的 excel 图标时，我想显示一个带有一些数据的 excel 表。在整个互联网上，我只找到了我不熟悉的 excel 视图的基于 xml 的 spring 配置。我在某种程度上进行了解码，并且非常接近完成我的任务。下面是我得到的。

我有类似的控制器和主页下面的链接：

[http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch17s06.html](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch17s06.html)

控制代码：

```
@Controller
public class ExcelController extends AbstractController {

@Override
@RequestMapping(value = "/Excel", method = RequestMethod.POST)
protected ModelAndView handleRequestInternal(HttpServletRequest request,
        HttpServletResponse response) throws Exception {
    BufferedReader in = null;
     try {
            URL oracle = new URL("example.com");
            URLConnection yc =null;
                yc = oracle.openConnection();
                  in = new BufferedReader(
                         new InputStreamReader(
                         yc.getInputStream()));
     }
     catch(Exception e){
         System.err.println(e);
     }
     Map map = new HashMap();
     map.put("input", in);

    return new ModelAndView("xl", map);
} 
```

}

查看代码：

```
public class ExcelReportView extends AbstractExcelView{

@Override
protected void buildExcelDocument(Map model, HSSFWorkbook workbook,
    HttpServletRequest request, HttpServletResponse response)
    throws Exception {
        HSSFSheet sheet;
        HSSFRow row;
        HSSFCell cell;
     try {
            BufferedReader in = (BufferedReader) model.get("input");            
            sheet=workbook.createSheet("spring");

                     String inputLine;
                     int rowNum =0;
                        while ((inputLine = in.readLine()) != null) {
                             row = sheet.createRow(rowNum++);
                            String[] coloumns = inputLine.split("\t");
                            int cellNum =0;
                            for(String coloumn: coloumns){
                                    cell = row.createCell(cellNum++);
                                   cell.setCellValue(coloumn);
                            }
                            System.out.println(inputLine);
                } 
                        in.close();  
                        System.out.println("Excel written successfully..");

                } catch (IOException e) {
                    e.printStackTrace();
                } 
```

} }

视图.properties

```
 xl.class=package.ExcelReportView 
```

WebAppConfig.java

```
@Configuration
@EnableWebMvc
@ComponentScan(basePackages = "package")
public class WebAppContextConfig extends WebMvcConfigurerAdapter {
// Resolve logical view names to .jsp resources in /WEB-INF/views directory

@Bean
public InternalResourceViewResolver configureInternalResourceViewResolver() {
    InternalResourceViewResolver resolver = new InternalResourceViewResolver();
    resolver.setPrefix("/WEB-INF/jsp/");
    resolver.setSuffix(".jsp");
    return resolver;
}

@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
    registry.addResourceHandler("/scripts/**").addResourceLocations(
            "/scripts/");
    registry.addResourceHandler("/css/**").addResourceLocations("/css/");
    registry.addResourceHandler("/img/**").addResourceLocations("/img/");
} 
```

}

前端代码：

```
 function AjaxCallForExcel(){
   $.ajax({
        type: 'POST',
        url: location.href + '/Excel',
        data: ({name:name })
        }); 
   } 
```

以下是我在日志中看到的内容：

```
 DispatcherServlet with name 'appServlet' processing POST request for [/App/Excel]
 Looking up handler method for path /App/Excel
 Returning handler method [protected org.springframework.web.servlet.ModelAndView package.ExcelController.handleRequestInternal(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
 Returning cached instance of singleton bean 'excelController'
 Invoking afterPropertiesSet() on bean with name 'xl'
 Rendering view [org.springframework.web.servlet.view.JstlView: name 'xl'; URL [**/WEB-INF/jsp/xl.jsp**]] in DispatcherServlet with name 'appServlet'
 Added model object 'org.springframework.validation.BindingResult.input' of type [org.springframework.validation.BeanPropertyBindingResult] to request in view with name 'xl'
 Added model object 'input' of type [java.io.BufferedReader] to request in view with name 'xl'
 Forwarding to resource [/WEB-INF/jsp/xl.jsp] in InternalResourceView 'xl'
 Successfully completed request 
```

我不知道如何避免它转发到 xl.jsp。我确信视图解析器正在将其放入 jsp 视图中。有人可以指出我该如何解决它。

**编辑**

我在网上看到了这个 xml 等效配置。不知道如何使它成为java配置：

```
<bean id="excelViewResolver" class="org.springframework.web.servlet.view.XmlViewResolver">
  <property name="order" value="1"/>
  <property name="location" value="/WEB-INF/views.xml"/>
</bean> 
```

我尝试通过以下方式转换它：

```
@Bean
public XmlViewResolver configureXmlViewResolver(){
    XmlViewResolver resolver = new XmlViewResolver();
    resolver.setOrder(1);
    resolver.setLocation(**WHAT SHOULD BE HERE**);
} 
```

我不知道该放什么位置。我不能给字符串。我没有views.xml，因为我使用的是java configs

**编辑**（这是我在按照您所说的进行更改后的代码）

```
public class ExcelReportView extends AbstractExcelView{
BufferedReader in;
ExcelReportView(BufferedReader in){
this.in = in;
 }

@Override
protected void buildExcelDocument(Map model, HSSFWorkbook workbook,
    HttpServletRequest request, HttpServletResponse response)
    throws Exception {
        HSSFSheet sheet;
        HSSFRow row;
        HSSFCell cell;
        response.setHeader("Content-Type", "application/octet-stream");
        response.setHeader("Content-Disposition", "attachment; filename=MyExcelSpreadsheet.xls");

     try {
            //BufferedReader in = (BufferedReader) model.get("input");          
            sheet=workbook.createSheet("spring");

                     String inputLine;
                     int rowNum =0;
                        while ((inputLine = in.readLine()) != null) {
                             row = sheet.createRow(rowNum++);
                            String[] coloumns = inputLine.split("\t");
                            int cellNum =0;
                            for(String coloumn: coloumns){
                                    cell = row.createCell(cellNum++);
                                   cell.setCellValue(coloumn);
                            }
                            System.out.println(inputLine);
                } 
                        in.close();  
                        System.out.println("Excel written successfully..");

                } catch (IOException e) {
                    e.printStackTrace();
                }
     OutputStream outStream = null;

        try {
            outStream = response.getOutputStream();
            workbook.write(outStream);
            outStream.flush();
        } finally {
            outStream.close();
        }    
    }
    } 
```

控制器代码：

```
 @Controller
    public class ExcelController    {

@RequestMapping(value = "/Excel", method = RequestMethod.POST)
protected ModelAndView generateCSV(HttpServletRequest request,
        HttpServletResponse response) throws Exception {
    BufferedReader in = null;
     try {
            URL oracle = new URL("http://service.com");
            URLConnection yc =null;
                yc = oracle.openConnection();
                  in = new BufferedReader(
                         new InputStreamReader(
                         yc.getInputStream()));
     }
     catch(Exception e){
         System.err.println(e);
     }
     ModelAndView mav = new ModelAndView();
     mav.setView(new ExcelReportView( in));
    return mav;
}
    } 
```

日志输出：

```
 DispatcherServlet with name 'appServlet' processing POST request for [/App/Excel]
    Looking up handler method for path /App/Excel
    Returning handler method [protected org.springframework.web.servlet.ModelAndView com.package.ExcelController.generateCSV(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse) throws java.lang.Exception]
    Returning cached instance of singleton bean 'excelController'
    Rendering view [com.package.controllers.ExcelReportView: unnamed] in DispatcherServlet with name 'appServlet'
    Created Excel Workbook from scratch
    Title Id required
    Excel written successfully..
    Successfully completed request 
```

**编辑：**

响应标头：

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Pragma: private
Cache-Control: private, must-revalidate
Content-Disposition: attachment; filename=MyExcelSpreadsheet.xls
Content-Type: application/octet-stream;charset=ISO-8859-1
Content-Language: en-US
Transfer-Encoding: chunked
Date: Tue, 12 Mar 2013 16:36:52 GMT 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T21:20:31.483

您可以从控制器方法返回[ModelAndView ，将](http://static.springsource.org/spring/docs/3.0.6.RELEASE/api/org/springframework/web/servlet/ModelAndView.html)[View设置为](http://static.springsource.org/spring/docs/3.0.6.RELEASE/api/org/springframework/web/servlet/View.html)[AbstractExcelView](http://static.springsource.org/spring/docs/3.0.6.RELEASE/api/org/springframework/web/servlet/view/document/AbstractExcelView.html)的实例。然后，您根本不需要弄乱您的 XML。

**编辑：添加一些附加信息：** 我已经多次使用自定义视图方法来处理 CSV 下载。

首先，您需要创建 AbstractExcelView 的实例化。您可以通过覆盖 buildExcelDeocument() 方法来实现。您将需要 POI 库，因为我认为它是必需的。例如：

```
@Override
public void buildExcelDocument(Map<String, Object> model, HSSFWorkbook workbook, 
                                HttpServletRequest request, HttpServletResponse response)
                                throws Exception {
    // Set the headers
    response.setHeader("Content-Type", "application/octet-stream");
    response.setHeader("Content-Disposition", "attachment; filename=MyExcelSpreadsheet.xls");

    // Here is where you will want to put the code to build the Excel spreadsheet

    OutputStream outStream = null;

    try {
        outStream = response.getOutputStream();
        workbook.write(outStream);
        outStream.flush();
    } finally {
        outStream.close();
    }       
} 
```

接下来需要修改Controller方法

```
@RequestMapping(params = "actionMethod="+Constants.ACTION_METHOD_REPORT)
public ModelAndView generateCSV( 
        @ModelAttribute(Constants.REPORT_FORMBEAN_MODEL_ATTRIBUTE) FormBean formBean,
        ModelAndView mav,
        HttpServletRequest request, 
        HttpServletResponse response) {
    mav.setView(new MyExcelView( /* modify your constructor to pass in your data so the view can build the output */ ));

    return mav;
} 
```

无需编辑上下文 XML、修改 bean 的连接方式、创建任何服务或任何东西。只需创建自定义视图的实例，传入构建电子表格所需的任何内容，然后在 ModelAndView 上设置视图。就那么简单。

**编辑 - 你需要这样做......**

您需要更改您的 AJAX 调用，以便您可以判断它是否已完成或有错误。你现在瞎了眼：

```
function AjaxCallForExcel(){
   $.ajax({
        type: 'POST',
        url: location.href + '/Excel',
        data: ({name:name }),
        complete: function(jqXHR,textStatus ) {
                               alert("Complete: "+textStatus );
                             },
        error: function(jqXHR,textStatus,errorThrown ) {
                             alert("Status: "+textStatus+"\nerror: "+errorThrown );
                          }
        }); 
   } 
```

# django - ForeignKey 的第一个元素

> ID：15278510
> 
> 赞同：0
> 
> 时间：2013-03-07T18:04:14.060
> 
> 标签：django

我有两个模型：

```
Cars(models.Model):
many-many fields

Pictures(models.Model):
car = models.ForeignKey(Cars, related_name='pictures')
img-field, etc 
```

如何查看汽车的第一张图片（它是一个画廊，很多汽车，我需要第一张图片进行预览）？我用：

```
car = Cars.objects.all()[:6].values('id', 'pictures__image') 
```

在 db 中，我有一辆带有 4 张图片的汽车，视图返回 4 个具有相同 ID 和不同图像的字典，但我需要一个 ID - 一张图片。这该怎么做？（不是OneToOneField，因为一辆车的图片很多）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:29:27.010

你可以这样做：

```
class Car(models.Model):
    @property
    def default_picture(self):
        try:
            return self.pictures.all()[:1][0]
        except IndexError:
            return None 
```

然后，当您运行汽车查询时，您可以执行以下操作：

```
cars = Car.objects.all().values('id', 'default_picture__image') 
```

# html - 安全的 HTML 表单接受字符集？

> ID：15278512
> 
> 赞同：1
> 
> 时间：2013-03-07T18:04:26.937
> 
> 标签：html, forms, spring-mvc, character-encoding

使用 get 方法提交表单时遇到参数编码问题（我不能使用 post 方法）。由于我的页面是 UTF8，因此 URL 中的一些重音字符没有转义。Spring 控制器改为检索坏字符。

我通过在我的表单上进行设置解决了这个问题`accept-charset="ISO-8859-1"`，但是现在，我想知道哪个字符集对于所有服务器/浏览器组合都是*安全的。*我的表单和“获取”网址有什么推荐的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T13:09:28.937

这对于 servlet 来说是令人沮丧的（委婉地说）。标准 URL 编码必须使用 UTF-8，但 servlet 不仅默认为 ISO-8859-1，而且不提供任何方法来使用代码更改它。

当然你可以`req.setRequestEncoding("UTF-8")`在你阅读任何东西之前，但出于某种**不虔诚**的原因，这只会影响请求正文，而不是查询字符串参数。servlet 请求接口中没有指定用于查询字符串参数的编码。

在您的表单中使用`ISO-8859-1`是一种技巧。使用这种古老的编码会导致比确定解决的问题更多的问题。特别是因为浏览器不支持 ISO-8859-1 并且始终将其视为 Windows-1252。而 servlet 将 ISO-8859-1 视为 ISO-8859-1，所以如果你这样做，你会变得难以置信。

例如，要在 Tomcat 中更改此设置，您可以在元素中使用该`URIEncoding`属性：`<connector>`

```
<connector ... URIEncoding="UTF-8" ... /> 
```

* * *

如果您不使用具有这些设置的容器，无法更改其设置或其他问题，您仍然可以使其工作，因为 ISO-8859-1 解码保留了原始二进制文件的完整信息。

```
String correct = new String(request.getParameter("test").getBytes("ISO-8859-1"), "UTF-8") 
```

假设`test=ä`一切设置正确，浏览器会将其编码为`test=%C3%A4`. 您的 servlet 会错误地将其解码为 ISO-8859-1 并为您提供结果字符串`"Ã¤"`。如果您应用更正，您可以`ä`返回：

```
System.out.println(new String("Ã¤".getBytes("ISO-8859-1"), "UTF-8").equals("ä"));
//true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:44:33.983

尼克多斯​​是对的。另一种方法是使用元数据标签：

```
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8"> 
```

还要记住，在服务器上处理响应时，代码也应该使用正确（相同）的编码。

例子：

利用`stringParamer.getBytes("utf-8") instead of stringParamer.getBytes()`

在使用 Spring 时，请确保在 DispatcherServlet 的配置文件 (XYZ_-servlet.xml) 中为消息转换器配置了正确的编码，例如：

```
<bean id="stringHttpMessageConverter" class="org.springframework.http.converter.StringHttpMessageConverter">
    <property name="supportedMediaTypes" value = "text/plain;charset=UTF-8"/>
</bean> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-29T22:08:00.850

问题是 URL 总是被编码为 127-ASCII。因为您的表单通过 GET 发送回标准 ASCII 集之外的其他字符值，所以您遇到了几个问题：

1.  URL 限制为 2048 个字符，因此您的表单值可能会被截断
2.  如果用户输入您在 Form 属性中设置的 ISO 接受类型之外的字符，它们将不会被正确编码到 URL 中。这是因为浏览器在第一次使用页面编码后对 URL 进行编码时会将所有内容转换为 127-ASCII。任何不在该 ISO 集中的特殊字符都将被错误编码。
3.  浏览器总是首先使用页面编码或元标记来翻译 URL 中的字符。但是，如果有一个服务器 HTTP 标头，该编码将覆盖您的元标记编码。HTML5 页面的默认编码是 UTF-8。但是您使用的是覆盖它的 ISO 标准。即便如此，您的浏览器完成的所有编码都会用“%”替换非 ASCII 字符，后跟来自页面编码的十六进制数字，或者在您的情况下是表单的设置编码。然后将其发送到服务器，因此请查看您的 URL 以查看已发送的内容。
4.  当您的 URL 到达服务器时，它以 127-ASCII 的形式出现，因此您需要首先将字符串作为 ASCII 获取，然后解码回页面编码，或者在您的情况下，表单接受用于获取真实值的值。

我建议您删除表单编码，使用页面 UTF-8 设置以获得更广泛的字符支持，并放入下面的这两个元标记以确保您发送回 UTF-8 编码数据，其中包括所有需要的字符并且易于解码如上面其他海报所述，在服务器上。

```
<meta charset="utf-8" />
<meta content="text/html; charset=utf-8" http-equiv="content-type" /> 
```

# haskell - 我如何告诉 GHC，当它使用 FFI 尝试编译 C++ 文件时，它应该在特定文件夹中查找库？

> ID：15278516
> 
> 赞同：0
> 
> 时间：2013-03-07T18:04:44.763
> 
> 标签：haskell, ffi

我在 src/Galakhsy/ 目录中有一个 Haskell 文件 Saturn.hs，以及一个 C++ 文件 hssaturn.cpp 和 hssaturn.h。hssaturn.cpp 需要 libsaturn.cpp 和/或 libsaturn.hpp，它们位于 lib/saturn/src/lib/ 中。

我不知道如何正确编译它，任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:51:21.713

使用 . 将所有 C++ 文件编译为目标文件`g++ -c filename.cpp`。在您的情况下，这会产生 hssaturn.o 和 libsaturn.o。然后用 . 编译你的 Haskell 程序`ghc --make -o whatever Saturn.hs hssaturn.o libsaturn.o`。还要指定 C++ 所需的任何共享库`-lblabla`。您可能至少需要 C++ 标准库，即使`-lstdc++`GHC 命令类似于

```
ghc --make -o whatever Saturn.hs hssaturn.o libsaturn.o -lstdc++ 
```

（嗯，以两个目标文件的正确路径为模）。

还要记住通过使用`extern "C"`从 Haskell 调用的 C++ 函数来防止名称混淆。

附录： libsaturn 这个名字让我觉得它可能是一个图书馆。您可能需要考虑按原样编译它并简单地动态链接（`-l`如上所述切换到 GHC）。

# php - 带有phantomjs的Windows PHP exec / shell_exec总是返回null

> ID：15278519
> 
> 赞同：1
> 
> 时间：2013-03-07T18:04:56.040
> 
> 标签：php, windows, exec, phantomjs

我在 Windows 服务器上运行 PHP 5.4.9

我尝试在 PHP 中运行所有脚本命令（exec、shell_exec、system、proc_open、passthru）。所有似乎都返回空或空。

我已将 phantomjs 添加为 PATH 变量。

并`phantomjs --version`在命令提示符下运行，它返回`1.8.2`

虽然当我尝试跑步时

```
$return = exec("phantomjs --version") 
```

或者

```
$return = shell_exec("phantomjs --version", $output) 
```

`$return`始终为 null 并且`$output`为空。

我确保 IUSR 和 IIS_IUSRS 用户有权运行 phantomjs.exe

在 php.ini 中禁用了安全模式

另外，我尝试运行`exec('ls') && exec('ipconfig /all')`，并且那些输出我期望的数据。

我不确定还能尝试什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-22T08:27:18.663

I was facing the same problem.. The thing is phantomjs requires complete path for all Here is the solution I came up with:

```
$getout = exec('D:\\xampp\\htdocs\\phantomjsdir\\phantomjs.exe D:\\xampp\\htdocs\\rasterisejsdir\\rasterize.js http://localhost/pagetobecaptured/test D:\\xampp\\htdocs\\outputfiledir\\test2.jpg "1800px*840px"',$o,$e); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T14:10:00.237

您非常接近解决方案。基本上是：

```
$stdout = shell_exec('time /T');
echo $stdout; 
```

您需要确保 Phantom 二进制文件位于路径上或使用完整路径调用。

有关执行 PhantomJS 的完整示例，请参阅[“jakoch/PHPUnit-headless”的驱动程序文件](https://github.com/jakoch/phpunit-headless/blob/master/src/PHPUnit/Extensions/Phantom/Driver.php#L161)。

# c# - 如何将 ResourceDictionary 中的 SolidColorBrush 的 Color 属性绑定到 ViewModel Color 属性

> ID：15278521
> 
> 赞同：1
> 
> 时间：2013-03-07T18:04:59.093
> 
> 标签：c#, wpf, mvvm, datacontext

我有一个 wpf`Window`正在使用`ResourceDictionary`其中已`SolidColorBrush`定义的 a 。

我可以`SolidColorBrush`通过使用像这样的十六进制值来选择使用它的 Color 属性设置什么颜色：

```
<SolidColorBrush Color="#FF0000"/> 
```

当我尝试这样设置时：

```
<SolidColorBrush Color="{Binding UserSelectedColor}"/> 
```

它显然不起作用，因为 a`ResourceDictionary`没有`DataContext`要设置的。

我尝试这样做是因为我认为 Binding 可能会使用在使用 的`DataContext`上设置的任何内容，但这似乎不起作用。`Control``SolidColorBrush`

所以我想知道如果我`Color`不能设置`ViewModel``DataContext``ResourceDictionary`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T18:43:17.780

一种可能的解决方案是将 ViewModel 对象也放入 ResourceDictionary 并显式设置[`Source`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.source.aspx)绑定：

```
<Window ...>
    <Window.Resources>
        <local:ViewModel x:Key="ViewModel"/>
        <SolidColorBrush x:Key="UserSelectedBrush"
            Color="{Binding UserSelectedColor, Source={StaticResource ViewModel}}"/>
    </Window.Resources>
    <Grid DataContext="{StaticResource ViewModel}">
        <Rectangle Fill="{StaticResource UserSelectedBrush}"/>
    </Grid>
</Window> 
```

* * *

然而，在 ViewModel 中声明一个`UserSelectedBrush`类型的属性`Brush`并直接绑定到该属性会更容易：

```
<Rectangle Fill="{Binding UserSelectedBrush}"/> 
```

# php - 只有最后一个文本输入数组发送到 php 处理脚本

> ID：15278529
> 
> 赞同：0
> 
> 时间：2013-03-07T18:05:21.337
> 
> 标签：php, html, codeigniter, textinput

我正在尝试使用 jquery 为项目动态添加字段。我的问题是，当我将表单发送到处理脚本并在 $_POST['item'] 上执行 print_r() 时，它只列出了最后一个数组......

这是我的代码：

```
<div class="itemAdd row">
                            <div class="span4">
                                <p>Item Number: <br /><input class="span4" type="text" name="item[itemNumber]" /></p>
                                <p>Status: <br />
                                <select name="item[status]" class="span4">
                                    <option value="enabled" selected="selected">Enabled</option>
                                    <option value="disabled">Disabled</option>
                                    <option value="damaged">Damaged</option>
                                </select>
                                </p>
                            </div>
                            <div class="span4">
                                <p>Item Notes:<br /><textarea class="span4" style="height:100px;" name="item[notes]"></textarea></p>
                            </div>
                            <div class="clearfix"></div>
                            <hr />
                        </div> 
```

此按钮添加新字段：

```
<a href="#" class="btn btn-small btn-primary" id="addItem"><i class="icon-plus icon-white"></i> Add Item</a> 
```

这是添加新字段的jquery：

```
<script>
//Add Items
$('a#addItem').on('click', function(event) {

    event.preventDefault();
    $('#productItems').append('<div class="itemAdd row"><div class="span4"><p>Item Number: <br /><input class="span4" type="text" name="item[itemNumber]" /></p><p>Status: <br /><select name="item[status]" class="span4"><option value="enabled" selected="selected">Enabled</option><option value="disabled">Disabled</option><option value="damaged">Damaged</option></select></p></div><div class="span4"><p>Item Notes:<br /><textarea class="span4" style="height:100px;" name="item[notes]"></textarea></p></div><div class="clearfix"></div><hr /></div>');

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:09:31.693

您在表单字段等中强制使用数组键：

```
... name="item[itemNumber]" ... 
```

itemNumber 不是 JS var，它是您要附加的 html blob 中的文字 html/属性文本。也许你的意思更像

```
... name="item[' + itemNumber + ']" ... 
```

反而。甚至只是`item[]`允许 PHP 自动为您分配数组键。但就目前而言，PHP 将为您创建一个数组，但由于您的所有字段都使用相同的键名，您将不断地覆盖值并最终只得到表单中的最后一个字段名/键对。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T18:09:42.070

您在 html 中使用数组，但索引是一个字符串：

```
item[itemNumber] 
```

所以每一项都会覆盖前一项。

您可以将其更改为：

```
itemNumber[] 
```

和

```
itemNote[] 
```

或者，如果您有数字 ID，则可以使用它。

# delegates - 为什么以编程方式选择 tabbarController 索引不会调用委托方法

> ID：15278537
> 
> 赞同：5
> 
> 时间：2013-03-07T18:05:46.143
> 
> 标签：delegates, uitabbarcontroller, uitabbar, uitabbaritem

当我们触摸 tabbarcontroller 的 tabbaritem 时，会调用委托方法：

```
-(BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController;
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController; 
```

但是当尝试以编程方式做同样的事情时，即

```
[self.tabbarController setSelectedIndex:selectedIndexNo]; 
```

或者

```
[self.tabBarController setSelectedViewController:[self.tabBarController.viewControllers objectAtIndex:0]]; 
```

不调用委托方法。这是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-31T03:21:01.753

覆盖 UITabBarController setSelectedIndex：

```
-(void)setSelectedIndex:(NSUInteger)selectedIndex
{
    //must call super function. 
    [super setSelectedIndex:selectedIndex];

    [self myMethod];
}

- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
    [self myMethod];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:12:57.283

当您通过代码自己设置它们时，您会意识到这是调用委托方法的时间。因此，无论您想做什么，都可以在以编程方式设置索引时进行。假设您想在被调用的 tabbardelegate 上调用方法 aMethod。您可以在设置索引后立即调用该方法。

```
[self.tabbarController setSelectedIndex:selectedIndexNo];
[self aMethod]; 
```

# c - 缩进 GNU 样式如何在 VIM 中正常工作？

> ID：15278539
> 
> 赞同：1
> 
> 时间：2013-03-07T18:05:48.813
> 
> 标签：c, vim, indentation

我写我的函数，比如，

```
static int
foo_bar(const char *string)
{
} 
```

当我使用 Vim 缩进时，它会执行类似的操作，

```
 static int
foo_bar(const char *string)
{
} 
```

它在之前添加了一些额外的空格`static int`。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:46:20.350

我最近才发现这个：

[http://thisblog.runsfreesoftware.com/?q=2009/04/20/indent-gnu-style-vim](http://thisblog.runsfreesoftware.com/?q=2009/04/20/indent-gnu-style-vim)

将其添加到您的 vimrc 并通过键入重新缩进`==`，如果您想要，例如 5 行缩进类型`5==`

# jquery - 同一屏幕上两个 asp.net 网格内的 JQuery DatePicker

> ID：15278544
> 
> 赞同：1
> 
> 时间：2013-03-07T18:06:09.843
> 
> 标签：jquery, datepicker

我有一个页面，其中有多个网格。每个控件都有一个与 JQuery 绑定的文本框`Datepicker`。我有`beforeShow`事件绑定在文本框下显示日期选择器。主要问题是，当页面呈现 jquery datepicker 日历时，即使我单击第一个文本框，也会在绑定到 datepicker 的最后一个文本框下显示。

提前致谢，

阿里

# angularjs - ng-repeat 什么都不做

> ID：15278559
> 
> 赞同：0
> 
> 时间：2013-03-07T18:07:06.500
> 
> 标签：angularjs

重构我的 Angular 应用程序以通过工厂服务传递基本数据。现在突然 ng-repeat 没有向页面输出任何内容，它根本没有运行，而且我没有收到任何错误消息！发生了什么？

```
<ul ng-repeat="section in sections">
    <li  class="section_title {{section.active}}" >
        {{section.name}}
    </li>
    <ul>
        <li class="tutorial_title {{tutorial.active}}" ng-click="loadFromMenu([$parent.$index, $index])" ng-repeat="tutorial in AppData.section.tutorials">
            {{tutorial.name}}
        </li>
    </ul>
</ul>

    var Tutorials = angular.module('Tutorials', ['functions', 'tutorials']);

Tutorials.factory("AppData", function(){
    return { 
        sectionNumber: 0,
        tutorialNumber: 0,
        questionNumber: 0,
        sections: sections
    }
})

Tutorials.run(function(AppData){loadFromMenu([0,0, true], AppData);})

function loadFromMenu (tut, AppData) {
    if (tut[1] === AppData.tutorialNumber && tut[0] === AppData.sectionNumber && !tut[2]) {//if clicked on already playing tut
        return;
    } 
    if (tut[1] !== undefined && tut[0] !== undefined) {
        AppData.tutorialNumber = tut[1];
        AppData.sectionNumber = tut[0];
    }
    var section = AppData.sections[tut[0]];
    for (var x in AppData.sections) {
        AppData.sections[x].active = "inactive";
        for (var y in AppData.sections[x].tutorials){
            AppData.sections[x].tutorials[y].active = "inactive";
        }
    }
    section.active = "active";
    section.tutorials[tut[1]].active = "active";
    //$scope.$apply();
    AppData.questionNumber = 0;
    if (AppData.sectionNumber === 1){
        conjugationController();
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:35:08.290

根据您的代码，您的问题是您实际上*没有*使用控制器。控制器是我们以编程方式访问范围的方式，我们将从服务中获得的内容分配给该范围。视图也与范围相关联。因此，当您说. 时`ng-repeat="section in sections"`，它正在当前范围内寻找一个名为`sections`. 在大多数情况下，这将对应于您的控制器中的内容，即`$scope.sections = ...`. 我在您的代码中没有看到类似的内容。这是它应该如何工作的。

```
<div ng-controller="MainCtrl">
  <ul ng-repeat="section in sections">
    <li  class="section_title {{section.active}}" >
      {{section.name}}
    </li>
    <ul>
      <li class="tutorial_title {{tutorial.active}}" ng-click="loadFromMenu([$parent.$index, $index])" ng-repeat="tutorial in AppData.section.tutorials">
        {{tutorial.name}}
      </li>
    </ul>
  </ul>
</div> 
```

（PS：以您的方式嵌套 UL 并不是真正有效的 HTML；您需要将内部 UL 放在 LI 中。）

现在我不知道 之外存在什么`ul`，所以我只是将它设置为`div`，我们告诉视图将哪个控制器分配给页面的该部分。所以现在我们的控制器必须将这些变量放在作用域上：

```
Tutorials.controller( 'MainCtrl', function ( AppData ) {
  $scope.sections = AppData.sections;
}); 
```

现在它将起作用。至于你的其余`loadFromMenu`功能，大部分你会想要移植到你的控制器，但我不确定你想用那个`run`块或`loadFromMenu`函数做什么。所以这里有一个一般原则：服务数据的通用操作应该发生在服务中。

随意发表评论以提供更多信息，我将更新此答案，但 ngRepeat 不起作用的原因是因为您没有控制器并且您的`sections`变量从未分配给范围。

# .net - 实体框架视图读取次数

> ID：15278561
> 
> 赞同：2
> 
> 时间：2013-03-07T18:07:13.807
> 
> 标签：.net, entity-framework

我对搜索人有相当复杂的看法。有几个链接表，如地址、电话、电子邮件、会员资格等。该视图名为 vSeachMember，实体也是如此。

如果我像这样在 SQL Mgmt Studio 中运行查询：

```
Select * FROM vSearchMember WHERE FirstName like '%kelly%' 
```

它在大约 2 秒内运行并且有大约 160,000 次读取（使用 sql profiler 找到）

如果我使用 EF 在我的 MVC 应用程序中运行此代码（_db 是上下文）：

```
var p = _db.vSearchMembers.Where(p => p.FirstName.Contains("kelly") ).ToList(); 
```

大约需要 25 秒，有 12,000,000 次读取。

我试图预先生成我的观点，但没有帮助。我也试过关闭延迟加载。有任何想法吗？谢谢。

EF生成的代码：

```
exec sp_executesql N'SELECT 
[Extent1].[Id] AS [Id], 
...
FROM (SELECT  
[vSearchMember].[Id] AS [Id],
...     
FROM [dbo].[vSearchMember] AS [vSearchMember]) AS [Extent1]
WHERE ( CAST(CHARINDEX(LTRIM(RTRIM(@p__linq__0)), [Extent1].[FirstName]) AS int)) =
1',N'@p__linq__0 nvarchar(4000)',@p__linq__0=N'kelly' 
```

为简洁起见，上面的“...”被省略了，它只是每个字段的语法相同（其中 29 个）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:25:31.570

Check the SQL that EF is generating. Separate the query from the extraction in your code like so and breakpoint on the second line

```
var query = vSearchMembers.Where(p => p.FirstName.Contains("kelly") )
var p = query.ToList(); 
```

You can get the SQL by inspecting query.

I don't know why, but willing to bet it's quite different to your hand-coded SQL query.

Interested to see vSearchMembers DDL.

FURTHER EDIT:

Just to make the code in the comment a bit more readable, can you try something like this:

```
var members = db.Members.Where(p => p.FirstName.Contains("kelly");
var query = from m in members
            from s in vSearchMembers.Where(s => s.MemberId == m.MemberId)
            select s;
var p = query.ToList(); 
```

# arrays - Matlab中具有多个约束的数组中可能值的组合？

> ID：15278563
> 
> 赞同：1
> 
> 时间：2013-03-07T18:07:18.560
> 
> 标签：arrays, matlab, constraints, combinations

我有一个数组 B ：

```
B=[1 2 3; 10 20 30 ; 100 200 300 ; 1000 2000 3000] 
```

这样

```
B =

           1           2           3
          10          20          30
         100         200         300
        1000        2000        3000 
```

我正在使用以下代码来查找低于某个值（约束）的这些变量之间的可能组合——在这种情况下为 2000：

```
A=[123; 323; 12 ; 421]
SA=sum(A)
V=cell(length(B),1);
n=1;
for k = 1:length(B)
    for idx = nchoosek(1:length(B), k)'
        B_subset = B(idx);
        if (SA + sum(B_subset) <= 2000)
            V(n)={B_subset(:)}; %store them in a cell
            n=n+1;
        end
    end
end 
```

但是我未能按照我想要的方式将它们组合在下面。

* * *

客观的 ：

找出 B 中要与 SA 相加的可能组合，使它们的总和小于 2000 ？

* * *

约束 1：

*   一次只能使用数组中每一行的一个值`B`。

例如，这是**不可接受**的：[1 2 20] [2 20 30]
这是**正确**的：[1 20 100] [3 200 3000]

* * *

约束 2： - 答案应仅存储在单元格 V 中的一列中（如上面代码中初始化的那样）。

该单元格的输出应与我当前的输出相似：

```
V = 

    [       100]
    [       300]
    [       200]
    [2x1 double]
    [2x1 double]
    [2x1 double]
    [3x1 double] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:37:29.367

稍微更改了您的代码并在下面添加了一个测试 - 如果 V 未更改 -> 没有组合 -> 显示它。编辑以允许将其保存到单元格数组中`V`并同时构造一个用于打印的字符串。

此代码考虑了 B 中三个元素的每种组合，其中每个元素来自不同的列。

```
V=cell(length(B),1);
A=[123; 323; 12 ; 421];
SA=sum(A);
S = 'possible combinations :';
n = 1
for ii=1:4
    for jj=1:4
        if jj == ii
            continue
        end
        for kk=1:4
            if or(kk == jj,kk == ii)
                continue
            end
            B_subset = [B(ii,1), B(jj,2), B(kk,3)];
            if (SA + sum(B_subset) <= 2000)
                S = [S, ' ', mat2str(B_subset)];
                V{n} = B_subset;
                n += 1;
            end
        end
    end
end

if V == 'possible combinations :'
    disp('No possible combinations found')
else
    disp(S)
end 
```

编辑：为问题的新部分添加答案。在最里面的循环中，计算包含行的不同组合。

```
V = {}
for ii=1:3
    for jj=1:3
        for kk=1:3
            for ll = 1:3
                rows = [ii, jj, kk, ll]
                if isequal(rows, unique(rows))
                    % loop for turning off individual elements
                    result = [B(1,ii), B(2,jj), B(3,kk), B(4,ll)]
                    for mm = 0:1:15
                        % make a binary string - will loop through all combinations of zeros and ones
                        str1 = dec2bin(mm,4)
                        mask = zeros(1,4)
                        for nn = 1:4 % make a numeric vector
                            mask(nn) = str2num(str1(nn))
                        end
                        masked_result = mask.*result
                        V = [V {masked_result}]
                    end
                end
            end
        end
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:34:12.737

在这里，这个修复应该可以解决问题：

```
SA = sum(A);
V = cell(numel(B), 1);                  % // Changed 'length' to 'numel'
n = 1;
for k = 1:size(B, 1)                    % // Changed 'length' to 'size'
    for idx = nchoosek(1:numel(B), k)'  %'// Changed 'length' to 'numel'

        %// Ignore the combination if there are two elements from the same row
        rows = mod(idx, size(B, 1));
        if ~isequal(rows, unique(rows))
            continue
        end

        B_subset = B(idx);
        if (SA + sum(B_subset) <= 2000)
            V(n) = {B_subset(:)};
            n = n + 1;
        end
    end
end 
```

也许它不是最有效的解决方案，但它很短而且很有效。

# jsf - 使用 log4j 在日志文件的页面上记录 JSF facelet(xhtml) 表达式语言错误？

> ID：15278565
> 
> 赞同：0
> 
> 时间：2013-03-07T18:07:24.177
> 
> 标签：jsf, el

我想知道是否有一种方法可以使用 log4j 在日志文件中的 jsf-facelet(xhtml) 页面上记录 EL(Expression Language) 错误？我尝试了以下记录器但徒劳无功..

```
 <logger name="javax.faces">
    <level value="WARN" />
    <appender-ref ref="appLogFile"/>
 </logger>
 <logger name="javax.servlet">
    <level value="WARN" />
    <appender-ref ref="appLogFile"/>
 </logger>
 <logger name="org.apache">
    <level value="WARN" />
    <appender-ref ref="appLogFile"/>
 </logger> 
```

实际上，我在 JSF EL`#{intA/intB}` `#{intA-intB-intC}`等中有一些简单的数学计算，并且想在客户浏览我们的 Web 应用程序时记录是否发生错误。

任何提示表示赞赏:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:26:32.910

You can add it to your log4j properties or XML ,

# log4j.properties

```
log4j.rootLogger=DEBUG,myapp

log4j.appender.myapp=org.apache.log4j.RollingFileAppender
log4j.appender.myapp.file=/var/log/appLogFile.log
log4j.appender.myapp.maxFileSize=10MB
log4j.appender.myapp.maxBackupIndex=10
log4j.appender.myapp.layout=org.apache.log4j.PatternLayout
log4j.appender.myapp.layout.ConversionPattern=%5p | %d | %F:%L | %m%n

log4j.logger.javax.faces=DEBUG
log4j.logger.javax.el=ERROR
log4j.logger.com.sun.faces=DEBUG

 <logger name="javax.faces">
    <level value="WARN" />
    <appender-ref ref="appLogFile"/>
 </logger>

  <logger name="javax.el">
    <level value="ERROR" />
    <appender-ref ref="appLogFile"/>
 </logger> 
```

or

If you want to use an error page,

```
 <error-page>
        <exception-type>javax.el.ELException</exception-type>
        <location>/elError.xhtml</location>
    </error-page> 
```

elError.xhtml can be somethhing like ,

```
<h:panelGrid>
    <h:outputText value="Exception Occured:" />
        <h:outputText  value="#{ErrorBean.message}" />  
</h:panelGrid> 
```

Create a ManagedBean to get the error and do logging to database or log4j ,

```
@ManagedBean
        public class ErrorBean{

            public String getMessage() {

                FacesContext context = FacesContext.getCurrentInstance();
                Map requestMap = context.getExternalContext().getRequestMap();
                Throwable exception = (Throwable) 
                               requestMap.get("javax.servlet.error.exception");

                // Log the error in database or log4j

                return ex.getMessage();
            }
        } 
```

# c# - 发出局部变量并为其赋值

> ID：15278566
> 
> 赞同：12
> 
> 时间：2013-03-07T18:07:27.360
> 
> 标签：c#, .net, reflection, cil, reflection.emit

我正在初始化一个整数变量，如下所示：

```
LocalBuilder a = ilGen.DeclareLocal(typeof(Int32)); 
```

如何访问它并为其赋值？我想做这样的事情：

```
int a, b;
a = 5;
b = 6;
return a + b; 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-07T18:34:49.553

使用`Ldloc`和`Stloc`操作码读写局部变量：

```
LocalBuilder a = ilGen.DeclareLocal(typeof(Int32));
LocalBuilder b = ilGen.DeclareLocal(typeof(Int32));
ilGen.Emit(OpCodes.Ldc_I4, 5); // Store "5" ...
ilGen.Emit(OpCodes.Stloc, a);  // ... in "a".
ilGen.Emit(OpCodes.Ldc_I4, 6); // Store "6" ...
ilGen.Emit(OpCodes.Stloc, b);  // ... in "b".
ilGen.Emit(OpCodes.Ldloc, a);  // Load "a" ...
ilGen.Emit(OpCodes.Ldloc, b);  // ... and "b".
ilGen.Emit(OpCodes.Add);       // Sum them ...
ilGen.Emit(OpCodes.Ret);       // ... and return the result. 
```

请注意，C# 编译器使用一些操作码的简写形式（通过 .NET Reflector）：

```
.locals init (
    [0] int32 a,
    [1] int32 b)

ldc.i4.5 
stloc.0 
ldc.i4.6 
stloc.1 
ldloc.0 
ldloc.1 
add 
ret 
```

# java - 无法在windows 7中插入mysql数据库。使用macintosh用java编写的程序

> ID：15278574
> 
> 赞同：-3
> 
> 时间：2013-03-07T18:07:49.463
> 
> 标签：java, mysql, macos, windows-7

我在 eclipse 中为 macintosh 编写了一个 java 程序，我的数据在 MySQL 数据库中。将其打包为可运行的 jar 文件时，它在 macintosh 中完美运行。它从数据库中插入数据、加载数据和更新数据，但是在 Windows 7 中运行可运行 jar 时，它会加载数据、更新数据但不会将数据插入数据库。我在 Windows 机器上没有开发程序来查找控制台捕获的消息。而且我不知道我还能做些什么来让它发挥作用（我在 10 个月前一直在开发这个程序，现在我感到非常沮丧）。请任何人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:13:37.437

您不需要开发人员环境来获取错误消息。更改 Macintosh 上的代码以将错误消息转储到控制台或日志文件并在 Windows 控制台上执行。

获取错误消息，让我们尝试做一些有价值的事情来解决问题。

# bash - bash 脚本：视频文件测试失败

> ID：15278578
> 
> 赞同：0
> 
> 时间：2013-03-07T18:08:03.223
> 
> 标签：bash

我编写了一个小 bash 脚本，以批处理模式从视频文件中提取音频。

使用 avconv（和 flac 编解码器）将声音从每个 mp4 文件中提取为 flac 格式。

```
#!/bin/sh
#
# Batch conversion of audio extraction from video

FOLDER_SRC="/home/Me/Music/TestBatchConv"

for myvid in $(find ${FOLDER_SRC} | grep mp4)
do
avconv -i $myvid -acodec flac "${myvid}.flac"
done

exit 0 
```

它工作正常，但我想改进它。

如何测试文件是否为视频？我尝试了类似的东西

```
for myvid in $(find ${FOLDER_SRC})
do
    if [ file -i $myvid | grep video ]
        then avconv -i $myvid -acodec flac "${myvid}.flac"
    fi
done 
```

但我无法完成（是的，我是新手）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:41:07.780

将您的新测试重写为

```
 if  file -i $myvid | grep -q video  ; then 
```

-q 选项表示安静，因此 grep`true`如果找到搜索目标则返回，否则返回`false`。根据返回的or状态`if`适当地响应。`true``false`

与语句一起使用的大括号`if`实际上是 cmd 的别名`test`，所以类似于

```
 if [ $(file -i $myvid | grep video) = "video" ] ; then 
```

也可以。

要了解如何正确处理这类事情，只需在命令行上工作，一次添加一位，即

```
 file -i $myvid 
```

然后

```
file -i $myvid | grep video 
```

或者

```
file -i $myvid | grep -q video ; echo $? 
```

并看到相反的情况，更改为

```
file -i $myvid | grep nonesuch ; echo $? 
```

**编辑**

并且要测试不止一件事，您可以使用`egrep`，即

```
 if  file -i $myvid | egrep -q 'video|application/octet'  ; then 
```

IHTH

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T18:42:02.473

### 我会首先创建一个文件列表

```
 find ${FOLDER_SRC} -type f -exec file \{\} + 
```

只有一次调用`file`，查看`man find`并查找“-exec command {} +”

### 为空间添加一个简单的解决方法

```
 find ${FOLDER_SRC} -type f -exec file \{\} + |tr ' ' '°' 
```

简单而足够。另一种方法是使用`mapfile`.

### 遍历文件列表并在 case 语句中定义操作

```
 for line in $(find ${FOLDER_SRC} -type f -exec file \{\} + |tr ' ' '°')
   do
     file=${line%%:*}
     file=${file//°/ }          
     content=${line#*:}
     content=${content//°/ }          
     case "${content}" in
         *video/mp2p*) myConvertFunctionA;;
         *video/mpeg*) myConvertFunctionB;;
         *video*) echo "found unsupported video type: ${content}";;
     esac
   done 
```

*   通过 bash 内置的字符串操作很快
*   `case`很容易理解
*   避免多次实例化`grep`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T20:19:40.037

使用“文件”对幻数起作用，所以有时它可能是错误的。

我使用“mplayer”来获取数据：

```
mplayer -ao null -vo null -endpos 0.01 ${MEDIAFILE} 2>/dev/null | egrep "AUDIO:|VIDEO:" 
```

这将匹配音频和视频。您可以省略一个或另一个或在 egrep 中添加一个“-c”，以便进行匹配：

```
if [ `mplayer -ao null -vo null -endpos 0.01 ${MEDIAFILE} | egrep -c "VIDEO:"` -gt 0 ]; then
    # HANDLE VIDEO FILE
fi 
```

但是，由于您要从视频文件中提取音频，因此您可能需要确保要处理的视频文件也具有音频组件：

```
AVCHECK=`mplayer -ao null -vo null -endpos 0.01 ${MEDIAFILE} 2>/dev/null | egrep "AUDIO:|VIDEO:"`

if [ `echo "${AVCHECK}" | grep -c AUDIO` && `echo "${AVCHECK}" | grep -c VIDEO` ]; then
    # STRIP AUDIO FROM VIDEO FILE
fi 
```

# php - APC 致命：缺少类信息

> ID：15278579
> 
> 赞同：0
> 
> 时间：2013-03-07T18:08:17.483
> 
> 标签：php, class, apc, fatal-error

根据[这个 PHP 错误报告](https://bugs.php.net/bug.php?id=59298&edit=3#1357227329)，错误消息是由在 if 语句中嵌套一个类并静态声明它引起的。

我只在一个地方声明了一个类，但我用 if 保护了它：

```
if (!class_exists('myClass', false)) {
    class myClass{ 
```

（尝试做一些类似于 C++ 预处理器指令/条件包含的事情。）

这是为了防止因多个编码器不正确地包含它而失败（require 而不是 require_once）。在这一点上，我唯一的其他选择是注释掉 if 并在应用程序中搜索包含，然后将它们全部设为“require_once”。

那么，有没有其他人遇到过这个错误，除了将所有要求更改为 require_once 之外，还有其他方法可以解决吗？（这个软件由多个编码人员维护，所以我想防止它失败。）

*   此错误仅偶尔（随机）发生，当它发生时，我必须从类文件中添加/删除一个空格并重新保存以修复错误。

附带说明一下，我们安装 APC 的主要原因是为了支持 IE 9 及更低版本的文件上传进度。因此，如果我们可以只启用这些部分，我们可以禁用导致此问题的任何功能。（不确定这是否可能。）

更新：重新保存文件显然没有效果。看起来它有一种“超时”。当错误发生时，我只需要等待一段时间让它消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:05:23.570

似乎这可能是由[自动加载](http://php.net/manual/en/language.oop5.autoload.php)类以及在类本身中包含类依赖关系引起的。

在我们升级到 PHP 5.3 之前，我们没有选择使用 PHP 的自动加载功能。因此，我们必须在类文件中包含类依赖项。例如：

```
<?php
require "parent_class.php";

if (!class_exists('this_class')) {
    class this_class extends parent_class { 
```

当我们升级到 PHP 5.3 时，我们实现了类自动加载功能。这可能是“静态”和“动态”类声明（根据问题中的 PHP Bug）的发生方式。- 在实际类文件中静态声明并在自动加载器中动态声明。

我检查并删除了类依赖项的所有包含/要求。这解决了这个问题。

# java - 读取在线xml文件并解析

> ID：15278581
> 
> 赞同：0
> 
> 时间：2013-03-07T18:08:33.690
> 
> 标签：java, xml, xml-parsing, youtube, sax

我正在尝试获取有关 youtube 视频的评论并使用 sax 解析它们。以下是仅打印给定 url 的注释的代码。我想将其更改为将 url 作为用户输入并打印评论的内容。XML 是在线的并且没有保存在本地磁盘上，我也不想使用预先保存的文件。

```
public class ReadXMLFile {
    public static void main(String argv[]) {
        try {
            SAXParserFactory factory = SAXParserFactory.newInstance();
            SAXParser saxParser = factory.newSAXParser();
            DefaultHandler handler = new DefaultHandler() {
                boolean content=false;
                int i=0;
                public void startElement(String uri, String localName,String qName, 
                    Attributes attributes) throws SAXException {
                    if (qName.equalsIgnoreCase("Content")) {
                        content = true;
                        i+=1;
                    }    
                }
                public void endElement(String uri, String localName,
                    String qName) throws SAXException { 

                }
                public void characters(char ch[], int start, int length) throws SAXException {
                    if (content) {
                        System.out.println("Comment " + i +": "+ new String(ch, start, length));
                        content = false;
                    }
                }
            };
            saxParser.parse("D:\\comment.xml", handler);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:02:13.837

有了这个，您可以将网页的内容作为 inputStream 获取：

```
String urlStr = "http://www.stackoverflow.com";
URL url = new URL(urlStr);
URLConnection conn = url.openConnection ();
conn.getInputStream() 
```

# c# - 创建 .sh 文件以执行 Visual Studio 2010 项目

> ID：15278583
> 
> 赞同：0
> 
> 时间：2013-03-07T18:08:40.977
> 
> 标签：c#, shell, project

我有一个问题：如何创建 .sh 文件以在 C# 中执行 Visual Studio 2010 控制台项目？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:19:13.890

你的意思是运行一个bash脚本吗？我发现[了这个](http://ubuntuforums.org/showthread.php?t=1804818)

```
{
    ProcessStartInfo psi = new ProcessStartInfo();
    psi.FileName = "/tmp/bash.sh";
    psi.UseShellExecute = false;
    psi.RedirectStandardOutput = true;

    psi.Arguments = "test";
    Process p = Process.Start(psi);
    string strOutput = p.StandardOutput.ReadToEnd();
    p.WaitForExit();
    Console.WriteLine(strOutput);
} 
```

# php - ZF2 Module API - 什么结构和类？

> ID：15278585
> 
> 赞同：1
> 
> 时间：2013-03-07T18:08:44.443
> 
> 标签：php, api, architecture, module, zend-framework2

我正在使用 Zend Framework 2 构建一个网上商店，这个网上商店将使用供应商提供的 API。

我们想销售定制汽车产品，如进气口、空气悬架零件和套件、车身套件、排气管、格栅、方向盘等。

供应商提供具有以下功能的 API（仅`GET`使用参数和逗号分隔的响应调用）

*   **产品**

    *   按类别搜索；
    *   按汽车品牌搜索-->车型-->类型；
    *   按 ID 搜索；
    *   按名称搜索；
*   **订单**

    *   添加;
    *   看法;
    *   删除。
*   **发票**

    *   看法;
*   **Stock**获取当前值

*   **交付**按 orderId 查看当前状态。

我已经构建了一个名为**SupplierName**的模块。我创建了一个 Module.php 文件：

```
<?php
/**
* This file is placed here for compatibility with ZendFramework 2's ModuleManager.
* It allows usage of this module even without composer.
* The original Module.php is in 'src/SupplierName/Module.php' in order to
* respect the PSR-0 convention
*/
require_once __DIR__ . '/src/SupplierName/Module.php'; 
```

**供应商/供应商名称/src/供应商名称/Module.php**

```
<?php

namespace SupplierName;

class Module
{
    public function getConfig()
    {
        return include __DIR__ . '/../../config/module.config.php';
    }

    public function getAutoloaderConfig()
    {
        return array(
            'Zend\Loader\StandardAutoloader' => array(
                'namespaces' => array(
                    __NAMESPACE__ => __DIR__,
                ),
            ),
        );
    }
} 
```

在主模块的 IndexController 的 indexAction 中，我使用下面的代码来加载我的模块。

```
$supplierNameClient = $this->getServiceLocator()->get('SupplierName\Client'); 
```

现在我的问题来了……这是我第一次构建一个仅用于从外部资源加载数据并将其传递到我自己的系统的模块。问题是我没有想出一个好的模块结构......我认为每种产品类型（烤架、排气装置、转向轮等）、订单、发票等都应该有一个类。

我一直在搜索并查看[http://modules.zendframework.com/page/2?query=api](http://modules.zendframework.com/page/2?query=api)。有一个包含应该用于与 Web 服务通信的模块的列表。

谁能告诉我在哪里寻找信息/样本来构建这样的模块？或者谁能​​给我一个例子，我应该如何构建这个模块？

非常感谢，如果有不清楚的地方，请告诉我，以便我解释！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T07:58:27.343

我的方法是为每种产品类型创建一个实体类。这些是简单的 PHP 类，具有代表产品的属性和相关方法。例如

```
namespace SupplierName\Entity;

class SteeringWheel
{
    protected $diameter;

    public function getDiameter()
    {
        return $this->diameter;
    }

    public function setDiameter($diameter)
    {
        $this->diameter = $diameter;
        return $this;
    }

} 
```

要获取这些实体，我将使用与外部对话的映射器类。例如

```
namespace SupplierName\Mapper;

class SteeringWheelMapper extends AbstractWebServiceMapper
{
    public function fetchbyDiameter($diameter) {
        // construct search query and then call up a parent
        // class method that calls the vendor's webservice
        // that presumably returns an array of data.
        //
        // Within this method, convert that array of data into a
        // set of SteeringWheel objects and return.
    }
} 
```

与外部资源对话的通用代码存储在`AbstractVendorWebServiceMapper`（可能还有支持类）中，专门`SteeringWheelMapper`处理方向盘和创建`SteeringWheel`实体。

然后我可能会向映射器添加一个`EventManager`，以便我可以设置事件和侦听器来缓存来自供应商 Web 服务的数据。

# android - 管道进入`adb shell`

> ID：15278587
> 
> 赞同：11
> 
> 时间：2013-03-07T18:08:49.400
> 
> 标签：android, pipe, adb

为什么我不能插管`adb shell`？

```
[klm@kth ~]$ echo foo | adb shell cat
^C 
```

上面的命令挂在我的 4.0.1 模拟器上，我没有看到预期的`foo`输出。

我认为这是因为`adb shell`没有将它的标准输入传送到它的子进程的标准输出中，并且`cat`永远坐在那里等待。这真的没有在 中实施`adb`，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T03:45:10.843

另一种选择可能是使用 adb 端口转发和 netcat。

设置 Android 端接收：

```
busybox nc -lp 5555 > piped_file.txt 
```

PC端，设置转发和发送：

```
adb forward tcp:4444 tcp:5555 # Anything sent to localhost 4444 will be forwarded to Android 5555
cat piped_file.txt | busybox nc localhost 4444 # Pipe through the port to Android 
```

PC netcat通过转发端口连接到Android netcat，并`piped_file.txt`交付。

* * *

附加信息
结合 tar，您可以将整个目录结构复制到您的设备上。

`busybox nc -lp 5555 | tar -x # Android side`

```
adb forward tcp:4444 tcp:5555 # PC side
tar -c directory | busybox nc localhost 4444 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T19:10:21.390

这是对的。此功能尚未实现。

更新：

`adb`自发布原始问题以来，已修复了许多错误并实施了新功能。包括对正确`stdin`处理的支持`adb shell`。因此，不再需要`netcat`解决方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-15T07:51:48.347

这是我的解决方案。将以下内容放入`adb_shell.sh`文件并使用它代替`adb shell`：

```
#!/bin/bash

adb forward tcp:12345 tcp:12345
adb shell busybox nc -lp 12345 -e "$@" &
sleep 1s
exec nc -q 1 localhost 12345 
```

这将创建一个`nc`侦听器，该侦听器在连接上运行指定的命令，然后连接到它。

# c# - 字典 JSON 格式

> ID：15278594
> 
> 赞同：4
> 
> 时间：2013-03-07T18:09:15.170
> 
> 标签：c#, .net, json, asp.net-mvc-4

我有一个 .NET 字典，其中包含来自实体框架中的 SQL 函数的项目。这是我将项目添加到字典的代码：

```
 public FooViewModel GetFoo()
    {

        var fooresults = new FooResultsViewModel();

        using (var db = new DBEntities())
        {
            var results = db.FunctionResults().ToList();
            foreach (var d in results)
            {
                foo.a.Add(d.ColumnName, d.ColumnValue);
            }

        }
        return fooresults; 
```

这是我的模型：

```
public class FooViewModel : GraphViewModel
{
    public FooResultsViewModel() { }
    public Dictionary<string, decimal> a = new Dictionary<string, decimal>();
} 
```

最后这是我的控制器：

```
 public virtual JsonResult GetData()
    {
        var fooresults = new FactSurveryResultsQueries().GetAverages();
        return new JsonResult { JsonRequestBehavior = JsonRequestBehavior.AllowGet, Data = fooresults };
    } 
```

这是返回的 JSON：

```
{"a":
{"FooResult1":3.579831,
"FooResult2":3.359243,
"FooResult3":3.720588,
"FooResult4":3.636554,
"FooResult5":3.285714,
"FooResult6":3.758403,
"FooResult7":3.262605}} 
```

但是我正在寻找返回的东西，例如：

```
{"a":
{ColumnName:"FooResult1", 
ColumnValue:3.579831,
ColumnName:"FooResult2",
ColumnValue:3.359243,
ColumnName:"FooResult3",
ColumnValue:3.720588,
ColumnName:"FooResult4",
ColumnValue:3.636554,
ColumnName:"FooResult5",
ColumnValue:3.285714,
ColumnName:"FooResult6",
ColumnValue:3.758403,
ColumnName:"FooResult7",
ColumnValue:3.262605}} 
```

有没有办法为第二个结果格式化 JSON 输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:44:47.727

我想您忘记在每对 , 之间添加`{`&并将其序列化为数组。`}``ColumName``ColumnValue`

相反，您的 JSON 无效或不是 JSON，因为您多次重复相同的属性名称。

如果我是对的，这是一个以您想要的方式塑造字典的测试用例：

```
[TestClass]
public class CustomDictionaryJsonSerialization
{
    [TestMethod]
    public void SerializeDictionary()
    {
        Dictionary<string, object> dict
            = new Dictionary<string, object> {{"col1", 1}, {"col2", "two"}};

        var nameValues = dict.Keys.Select(k =>
            new {ColumnName = k, ColumnValue = dict[k]});

        var toSerialize = new {a = nameValues.ToList()};

        string serialized = JsonConvert.SerializeObject(toSerialize);

        Assert.IsNotNull(serialized);
    }
} 
```

得到的`serialized`值是这样的：

```
{"a":
  [ { "ColumnName":"col1", "ColumnValue":1 },
    { "ColumnName":"col2", "ColumnValue":"two" } ]
} 
```

# css - top、margin-top 和 padding-top --- 它们有什么不同？

> ID：15278595
> 
> 赞同：0
> 
> 时间：2013-03-07T18:09:16.560
> 
> 标签：css

问题是：**它们有何不同？**

我的理解是这样的：

*   `margin-top`类似于我们习惯的margin `MS Word`。这更像是页面周围的空白区域。使用时，它确定内容距顶部的距离或内容与其包含元素的距离。如果内容在`div`标签中，则位置将相对于计算，`div`但如果没有包含元素，则它将相对于浏览器计算。它确实压低了其他内容。*   `top`用于下推内容并用作属性的*调整。*`position`它会在不损害其他内容的情况下将内容向下推。换句话说，它提供了细粒度的控制。*   `padding-top`还会将内容向下推，同时在顶部增加空间。

**我得到这个正确吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:19:36.183

## 边距

边距会遭受[边距塌陷](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)——如果*垂直*边距被认为是相邻的（例如，没有边框将它们分开），那么两个元素之间的间隔将不是它们各自的相邻边距之和，而是两个边距中较大的一个。同时，*水平*边距永远不会崩溃。

边距位于元素的框之外。

## 填充物

顶部填充按预期工作，并且不会崩溃。但是，当以百分比定义时，顶部填充将是元素宽度的百分比，而不是高度的百分比。

填充位于元素的框内。如果将元素的尺寸定义为 500*500px 并将 padding 设置为 20px，则该元素的实际尺寸将为 540*540px (500 + 20 + 20)。这可以通过使用来规避`box-sizing: border-box`，它告诉浏览器呈现由宽度和高度属性定义的元素，包括所有边框和填充。

## 最佳

另一方面，顶部将从以下位置替换所述元素：

*   是父容器，如果父容器是相对定位的，
*   视口，如果所述元素具有固定位置，
*   文档，如果所述元素具有绝对位置并且其父元素没有相对定位。

更重要的是，顶部位置偏移百分比基于父级的高度，而不是宽度（与填充不同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:15:03.153

根据我搜索的内容：

边距在块元素的外部，而填充在内部，顶部使元素独立（位置方面）。

使用 margin(margin-top) 将块与其外部的东西分开，使用 padding(padding-top) 将内容从块的边缘移开，如果需要通过位置调用漫游元素，最后使用 top。

# java - 将我的 java 应用程序设置为 windows 服务

> ID：15278598
> 
> 赞同：2
> 
> 时间：2013-03-07T18:09:22.183
> 
> 标签：java, windows, service, autorun

我知道有一些类似的问题，但我宁愿知道如何通过同一个应用程序设置 java 应用程序。更准确地说，我想用java创建程序并将其发送给我的恶魔，打开它后，我的应用程序会将自己设置为windows服务，比如hamachi，当我们下载时，它总是会在我们的系统中运行。我阅读了有关 java 服务包装器的信息，但我认为它允许从计算机位置执行此操作，我错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T18:12:25.933

您可以使用 launch4j 包装到[exe](http://launch4j.sourceforge.net/)

[您可以根据此处](https://stackoverflow.com/questions/3582108/create-windows-service-from-executable)描述的 exe 添加服务

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:37:23.943

我使用[WinRun4J](http://winrun4j.sourceforge.net/)安装启动 Java 应用程序的 Windows 服务。它适用于 64 位和 32 位 JVM。它非常容易配置和安装。它正在积极开发中，这个家伙提供了很好的支持。在 Windows Server 2008、Windows XP、Windows 7 和 Java 6 和 7（32 位和 64 位）上进行了测试

# ruby-on-rails - 在 rails 的脚手架生成语句中设置属性

> ID：15278599
> 
> 赞同：1
> 
> 时间：2013-03-07T18:09:23.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当您在 Rails 中创建模型时，您可以这样操作：

美元`rails g scaffold ModelName attributeName1:type attributeName2:type attributeName3:type`...

有没有办法从 generation 语句中声明默认值，或者你必须在迁移之前在迁移文件中这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:16:38.110

后者; **在数据库级别**设置默认列值是通过在运行迁移文件之前手动修改它们来完成的。

# objective-c - 在objective-c中表示数组的特殊方法

> ID：15278604
> 
> 赞同：2
> 
> 时间：2013-03-07T18:09:32.910
> 
> 标签：objective-c, cocoa, nsarray, objective-c-literals

当数组以以下格式表示时，我在网上的许多地方甚至在苹果文档中都看到过：

```
@[obj1,obj2] 
```

例如；在谓词编程指南中有这样的语句：

```
NSCompoundPredicate *predicate = [NSCompoundPredicate andPredicateWithSubpredicates:@[greaterThanPredicate, lessThanPredicate]]; 
```

但是当我在代码中编写相同的代码时，我得到一个“程序中的意外@”（如预期的那样）编译器错误。这只是表示数组的一种方式还是我错过了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T18:12:06.877

这是一个[相对较新的语法](http://clang.llvm.org/docs/ObjectiveCLiterals.html)，它仅适用于包含 clang 3.3 或更新版本的 Xcode。

这个

```
@[greaterThanPredicate, lessThanPredicate] 
```

在逻辑上等价于^*：

```
[NSArray arrayWithObjects:greaterThanPredicate, lessThanPredicate, nil] 
```

您始终可以用旧语法替换新语法，而不会丢失功能。

**编辑**（回应[Nikolai Ruhe](https://stackoverflow.com/users/104790/nikolai-ruhe)的评论）Apple 的版本方案与开源版本不同。引入该功能的正确版本号是：Apple 4.0、clang 3.1。

* * *

^*在底层，新语法的数组初始化器被转换为对`arrayWithObjects:count:`. 感谢[newacct](https://stackoverflow.com/users/86989/newacct)的更正。

# laravel - Laravel css/js 给出 404 但文件存在

> ID：15278606
> 
> 赞同：1
> 
> 时间：2013-03-07T18:09:36.843
> 
> 标签：laravel, laravel-3

我在管理包中工作，但 css/js 不工作。 [http://d.pr/i/UJHo](http://d.pr/i/UJHo)

从打印中，引导 js/css 来自外部域，我尝试调用本地捆绑文件，但出现错误。我的 htaccess 与原来的 laravel 没有变化：http: [//d.pr/i/VWua](http://d.pr/i/VWua)

*   在我的 apache 站点中，我的虚拟主机显然是正确的[http://d.pr/i/CBXO](http://d.pr/i/CBXO)
*   我的 style.css 已经拥有正确的权限并且已经存在：

    $tree public/bundles/admin public/bundles/admin └── css └── style.css

提示：当我访问时`http://domain/img/bg.png`，这是有效的，但不是当我尝试时`http://domain/images/bg.png`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:39:41.340

看起来您正在将 /images 重写为 /public/img。'public' 是 webroot，所以大概请求将发送到 /public/public/img...

但看起来这些规则根本没有被应用，因为 /img 路径也会有同样的问题。检查 404 响应的正文。如果它包含 Laravel 返回的 404 页面的 HTML，那么就是这种情况。

无论哪种方式，这些行都不是真正需要的。如果你希望 /images 返回 /public/img 中的内容，那么你应该创建一个从 /public/images 到 /public/img 的符号链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-22T21:07:00.130

我认为你应该改进你的 .htaccess 文件。

我建议使用这个：

```
RewriteEngine On
RewriteRule !\.(js|gif|jpg|png|css|txt)$ public/index.php [L]
RewriteCond %{REQUEST_URI} !^/public/
RewriteRule ^(.*)$ public/$1 [NC,L] 
```

这对我来说很好。

# email - Outlook VBA 用于发送带附件的电子邮件

> ID：15278611
> 
> 赞同：2
> 
> 时间：2013-03-07T18:09:51.480
> 
> 标签：email, vba, outlook

我需要在一天内向不同文件名的不同人发送近 100 封电子邮件。下面的代码工作得很好，但问题是我必须附加的文件应该是前一天的。例如，今天的日期是 2013 年 3 月 7 日 (7-03-13)。我得到文件 RN2425 06-03-13.xls，这些文件每天都在变化。我想在特定目录 D:\Reporting\Daily\RN2425\RN2425 (一天前的日期戳).xls 中查找前一天的文件

请使用此代码帮助我，我需要更改文件名中的日期。我希望这能自动完成。

```
Sub CreateEmail(Subject As String, Body As String, ToSend As String, CCs As String, FilePathtoAdd As String)

 'write the default Outlook contact name list to the active worksheet

 Dim OlApp As Object
 Dim OlMail As MailItem
 Dim ToRecipient As Variant
 Dim CcRecipient As Variant

 'Set OlApp = CreateObject("Outlook.Application")
 'Set OlMail = OlApp.CreateItem(olMailItem)

 Set OlApp = Application
 Set OlMail = OlApp.CreateItem(olMailItem)

 'For Each ToRecipient In Array("mba.szabist@gmail.com", "mba.szabist@gmail.com", "mba.szabist@gmail.com")
 'OlMail.Recipients.Add ToRecipient
 OlMail.Recipients.Add ToSend
 'Next ToRecipient

 'For Each CcRecipient In Array("happychords@yahoo.com", "happychords@yahoo.com", "happychords@yahoo.com")
 'With OlMail.Recipients.Add(CcRecipient)
 '.Type = 2
 'End With
 'Next CcRecipient
 Dim Temp As Recipient
 Set Temp = OlMail.Recipients.Add(CCs)
 Temp.Type = olCC

 'fill in Subject field
 OlMail.Subject = Subject
 OlMail.Body = Body

 'Add the active workbook as an attachment
' OlMail.Attachments.Add "C:\Users\Ali\Desktop\Sentence Correction\Comparisons.pdf"
 If FilePathtoAdd <> "" Then
    OlMail.Attachments.Add FilePathtoAdd
 End If
 'Display the message
 OlMail.Display 'change this to OlMail.Send if you just want to send it without previewing it

 End Sub
Sub EmailIt()
CreateEmail "This is Subject", "Body", "kamran@yahoo.com, kamu@yahoo.com", "me@yahoo.com, my@yahoo.com", "E:\Ali's Documents\RN2425 06-03-13.xls"
CreateEmail "This is Subject", "Body", "kamran@yahoo.com, kamu@yahoo.com", "me@yahoo.com, my@yahoo.com", "E:\Ali's Documents\RN2425 06-03-13.xls"
CreateEmail "This is Subject", "Body", "kamran@yahoo.com, kamu@yahoo.com", "me@yahoo.com, my@yahoo.com", "E:\Ali's Documents\RN2425 06-03-13.xls"
CreateEmail "This is Subject", "Body", "kamran@yahoo.com, kamu@yahoo.com", "me@yahoo.com, my@yahoo.com", "E:\Ali's Documents\RN2425 06-03-13.xls"
CreateEmail "This is Subject", "Body", "kamran@yahoo.com, kamu@yahoo.com", "me@yahoo.com, my@yahoo.com", "E:\Ali's Documents\RN2425 06-03-13.xls"
CreateEmail "This is Subject", "Body", "kamran@yahoo.com, kamu@yahoo.com", "me@yahoo.com, my@yahoo.com", "E:\Ali's Documents\AVSEQ03 Comp 1.avi"

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:30:25.633

要以正确的格式获取今天的日期：

*   格式（日期，“dd-mm-yy”）

要获取昨天的日期：

*   DateAdd("d", -1, 日期)

把它们放在一起：

*   "E:\阿里的文档\RN2425 " & Format(DateAdd("d", -1, Date),"dd-mm-yy") & ".xls"

# c# - 服务器标签格式不正确错误

> ID：15278616
> 
> 赞同：43
> 
> 时间：2013-03-07T18:10:09.820
> 
> 标签：c#, asp.net

我写了这段代码。该代码包含预期的 runat="server" 属性，但它给了我这个错误消息：`error on hiddenfield`part.

```
 <asp:Repeater ID="Repeater1" runat="server">
    <ItemTemplate>
        <asp:HiddenField ID="HiddenField1" Value="<%#Eval("Path")%>" runat="server" />
        <img alt="image" style="text-align: center" src="<%#Eval("Path")%>" /><asp:CheckBox
            ID="CheckBox1" runat="server" />
        <br></br>
    </ItemTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-03-07T18:11:56.703

您不能在双引号中使用双引号，因此请使用*single*和*double* `quotes`的组合。

*改变*

```
<asp:HiddenField ID="HiddenField1" Value="<%#Eval("Path")%>" runat="server" /> 
```

*到*

```
<asp:HiddenField ID="HiddenField1" Value='<%#Eval("Path")%>' runat="server" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T18:13:53.453

在使用 eval scriptlet 时尝试使用单引号而不是双引号，如下所示：

```
 <asp:Repeater ID="Repeater1" runat="server">
    <ItemTemplate>
        <asp:HiddenField ID="HiddenField1" Value='<%#Eval("Path")%>' runat="server" />
        <img alt="image" style="text-align: center" src='<%#Eval("Path")%>' /></a><asp:CheckBox
            ID="CheckBox1" runat="server" />
        <br></br>
    </ItemTemplate>
</asp:Repeater> 
```

我真的不明白为什么需要这样做的原因，但这就是有效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-12T11:56:53.823

由于**引号**，我遇到了同样的错误，这就是我修复我的方法

```
 OnClientClick='<%# "CallToFunc("+ Eval("Val") + 
    ",\"" + Eval("StringVal")  + "\");return false;"' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-15T17:00:49.673

您不能`runat`在 html 注释中包含。

（不是本题的问题，但与本题的题目相符）

假设您有一个想要“注释掉”的 ASP 控件，那么您最终可能会得到一个根本无法显示的页面，如果幸运的话，会出现“服务器标签格式不正确”异常，或者一个简单的 404-not found 状态码。

修复：更改 runat，例如：

```
<!-- asp.Label   runatX="server" ... --> 
```

# java - Lib Gdx json 序列化异常和缺少无参数构造函数

> ID：15278619
> 
> 赞同：3
> 
> 时间：2013-03-07T18:10:14.190
> 
> 标签：java, serialization, libgdx, filehandle

尝试执行这段代码时：

```
public void load(String filename) { 
   FileHandle file = Gdx.files.external(filename + ".bim");
   Json json = new Json();      
   String text = file.readString();
   datamap.clear(); 
   datamap = json.fromJson(HashMap.class, text); 
```

我收到一个错误：

> 线程“LWJGL 应用程序”com.badlogic.gdx.utils.GdxRuntimeException 中的异常：com.badlogic.gdx.utils.SerializationException：无法创建类（缺少无参数构造函数）：com.bvo.easyBim.Model.Cursor 在 com .badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:113) 原因：com.badlogic.gdx.utils.SerializationException：无法创建类（缺少无参数构造函数）：com.bvo.easyBim .Model.Cursor 在 com.badlogic.gdx.utils.Json.newInstance(Json.java:915) 在 com.badlogic.gdx.utils.Json.readValue(Json.java:793) 在 com.badlogic.gdx.utils .Json.readValue(Json.java:803) 在 com.badlogic.gdx.utils.Json.fromJson(Json.java:644) 在 com.bvo.easyBim.View.DataProcessor.load(DataProcessor.java:85) 在com.bvo.easyBim.View.World.init(World.java:115) 在 com.bvo.easyBim.View。WorldRenderer.buttons(WorldRenderer.java:173) at com.bvo.easyBim.View.WorldRenderer.render(WorldRenderer.java:106) at com.bvo.easyBim.Screens.AppScreen.render(AppScreen.java:22) at com .badlogic.gdx.Game.render(Game.java:46) 在 com.bvo.easyBim.EasyBim.render(EasyBim.java:39) 在 com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java :187) 在 com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:110) 引起：java.lang.InstantiationException：com.bvo.easyBim.Model.Cursor at java.lang.Class。 newInstance0(Unknown Source) at java.lang.Class.newInstance(Unknown Source) at com.badlogic.gdx.utils.Json.newInstance(Json.java:901) ... 12 更多106) 在 com.bvo.easyBim.Screens.AppScreen.render(AppScreen.java:22) 在 com.badlogic.gdx.Game.render(Game.java:46) 在 com.bvo.easyBim.EasyBim.render(EasyBim .java:39) 在 com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:187) 在 com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:110) : java.lang.InstantiationException: com.bvo.easyBim.Model.Cursor at java.lang.Class.newInstance0(Unknown Source) at java.lang.Class.newInstance(Unknown Source) at com.badlogic.gdx.utils.Json .newInstance(Json.java:901) ... 12 更多106) 在 com.bvo.easyBim.Screens.AppScreen.render(AppScreen.java:22) 在 com.badlogic.gdx.Game.render(Game.java:46) 在 com.bvo.easyBim.EasyBim.render(EasyBim .java:39) 在 com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:187) 在 com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:110) : java.lang.InstantiationException: com.bvo.easyBim.Model.Cursor at java.lang.Class.newInstance0(Unknown Source) at java.lang.Class.newInstance(Unknown Source) at com.badlogic.gdx.utils.Json .newInstance(Json.java:901) ... 12 更多mainLoop(LwjglApplication.java:187) at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:110) 原因：java.lang.InstantiationException: com.bvo.easyBim.Model.Cursor at java .lang.Class.newInstance0(Unknown Source) at java.lang.Class.newInstance(Unknown Source) at com.badlogic.gdx.utils.Json.newInstance(Json.java:901) ... 12 更多mainLoop(LwjglApplication.java:187) at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:110) 原因：java.lang.InstantiationException: com.bvo.easyBim.Model.Cursor at java .lang.Class.newInstance0(Unknown Source) at java.lang.Class.newInstance(Unknown Source) at com.badlogic.gdx.utils.Json.newInstance(Json.java:901) ... 12 更多

在将 json 文件正确保存在另一段代码中后，我正在尝试将其转换回数据映射。（哈希图）但这似乎不起作用。

我猜他无法阅读文本字符串，但我实际上不知道问题是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T22:57:07.770

异常消息“无法创建类（缺少无参数构造函数）：com.bvo.easyBim.Model.Cursor”准确描述了问题所在。

Libgdx JSON 代码使用反射来创建对象实例并初始化它们。在您的示例中，保存的 JSON 文件中必须有一个`com.bvo.easyBim.Model.Cursor`。因此，在读取该文件时，JSON 代码需要创建一个 a 的实例`Cursor`来放入数据。它假定有一个可用于创建空的无参数构造函数`Cursor`（否则它无法确定哪个构造函数是合适的）。但是，似乎没有这种方法。

您要么必须向 中添加无参数构造函数`Cursor`，要么必须添加[知道](https://code.google.com/p/libgdx/wiki/JsonParsing#Customizing_serialization)如何保存`Cursor`实例并知道在读`Cursor`回时要调用的适当构造函数。

# perl - 如何从命令行测试我的 Web 界面 Perl 程序？

> ID：15278622
> 
> 赞同：1
> 
> 时间：2013-03-07T18:10:25.603
> 
> 标签：perl, debugging, shell, command-line

我可以访问从我的 Web 代码调用的 Perl 模块，该模块以通常的 URI 编码形式（即`myperl.pl?var1=val2&var2-val2&var3=val3`）从 AJAX 或 curl 传递查询参数。

如何从命令行测试相同的模块？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T18:15:48.383

如果它是一个 CGI 脚本，那么它可能会通过检查`QUERY_STRING`环境变量来找到这些变量；因此，您可以尝试从 shell 设置该变量。例如，如果你使用 Bash，你可以这样写：

```
QUERY_STRING='var1=val2&var2=val2&var3=val3' perl myperl.pl 
```

或者，如果您愿意：

```
export QUERY_STRING='var1=val2&var2=val2&var3=val3'
perl myperl.pl 
```

（请注意，您可能还需要设置其他环境变量，可能还需要设置标准输入。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T18:15:08.963

它使用[CGI](http://search.cpan.org/perldoc?CGI)模块吗？如果是这样，请参阅文档的[调试](http://search.cpan.org/perldoc?CGI#DEBUGGING)部分。

```
myperl.pl var1=val2&var2-val2&var3=val3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T18:21:11.897

如果您使用的是 CGI.pm，那么我相信 params() 函数会从命令行返回参数。

```
@vars = $query->param 
```

例如

```
myperl.pl "var1=value1&var2=value2&var3=value3" 
```

param() 方法将以列表形式返回变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T18:15:25.213

只要您在属性下将程序设置为可执行文件，那么：

```
./program_name.pl param1 param2 param3 
```

应该管用。除非我误读了这个问题。

# android - setLayoutParams 搞砸了 RelativeLayout

> ID：15278623
> 
> 赞同：2
> 
> 时间：2013-03-07T18:10:33.970
> 
> 标签：android, layout, android-relativelayout, layoutparams

我看到了这种奇怪的行为，想问问是否有人找到了解决方法。我有一个简单的 RelativeLayout，里面有另一个布局。

奇怪的行为发生在代码中。如果我从嵌套布局中获取 LayoutParams 并将其设置回它，它会改变布局的外观。似乎某些参数在此过程中丢失了。这是代码：

```
RelativeLayout v = (RelativeLayout)findViewById(R.id.group1);

RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(v.getLayoutParams());

v.setLayoutParams(lp); 
```

在这个电话之后，我希望一切都保持原样，但是，我正在失去“layout_AlignParentRight”效果（至少）。谁能帮我理解为什么会这样？

从实际的角度来看，我所需要的只是在运行时更改 group1 布局的宽度。所以我通过改变上面“lp”的宽度来做到这一点，它可以工作，但会弄乱对齐方式。因此，如果有任何关于在不影响其他属性的情况下更改布局大小的替代方法的建议，也请加入。

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"    
android:orientation="vertical">

    <RelativeLayout 
     android:id="@+id/group1"
     android:layout_width="100dp"
     android:layout_height="wrap_content"    
     android:orientation="vertical"
     android:layout_alignParentRight="true">

        <TextView
         android:layout_alignParentLeft="true"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="Test">
        </TextView>

    </RelativeLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T18:21:39.940

只需修改已经存在的参数而不是实例化新的参数：

```
RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams)v.getLayoutParams();
params.width = myNewWidth;
v.requestLayout(); 
```

# jquery - 定位 jQuery 工具提示

> ID：15278630
> 
> 赞同：8
> 
> 时间：2013-03-07T18:10:58.950
> 
> 标签：jquery, jquery-ui, jquery-ui-tooltip

我正在尝试使用[jQuery UI Tooltip](http://jqueryui.com/tooltip/)和以下代码自定义我的工具提示的位置：

```
$(".karma").tooltip({
  position: {
    my: "center bottom",
    at: "right top"
  }
}); 
```

但无论我对“我的”和“在”做什么，都没有任何改变。我究竟做错了什么？

这是[jQuery Tooltip API 位置部分的链接](http://api.jqueryui.com/tooltip/#option-position)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:39:21.763

您的代码没有任何问题。但是，如果没有看到您的 HTML，很难说它为什么不起作用。

确保您已加载[jQueryUI](http://jqueryui.com/)脚本：[here](http://code.jquery.com/ui/1.10.1/jquery-ui.js)。还 make 用[`$(document).ready()`](http://api.jquery.com/ready/). 如果您还有其他问题，请告诉我。

演示：http: [//jsfiddle.net/dirtyd77/SLGdE/16/](http://jsfiddle.net/dirtyd77/SLGdE/16/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-24T17:01:59.683

如果您因为定位添加不起作用而来到这里（例如`at: "right + 10"`），那么解决方案是删除操作员周围的所有空间。

更改`at: "right + 10"`为`at: "right+10"`，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T15:43:54.133

你可以试试这个：

```
 my: "left-25 bottom", 
    at: "center" 
```

# xml - XSD - 失败一些，通过一些

> ID：15278631
> 
> 赞同：1
> 
> 时间：2013-03-07T18:11:00.747
> 
> 标签：xml, validation, xsd, jaxb

我正在尝试做一些不可能的事情。

我有一个包含相同类型记录列表的 XML 文档。像这样的东西：

```
<root>
  <record>I'm a shark.</record>
  <record>I'm a shark.</record>
  <record>Suck it.</record>
  <record>I'm a shark.</record>
</root> 
```

首先，我通过 XSD 运行它以确保标签正确。然后，我解组它并对实际值进行一些编程验证。我想通过`<xs:pattern />`（将值与正则表达式匹配以测试有效性）将第二步折叠到 XSD 中。

问题是我有一个业务规则，我应该继续处理 XML 文档中列出的所有有效记录，并且只处理无效的特定记录。在我上面的例子中，我想要让“Suck it”失败。重视并传递所有“我是鲨鱼”。值转发到某些处理步骤以供实际使用。

不幸的是，据我所知，在 XSD 中，如果一个部分失败，则整个文档只是“糟糕”并且无法通过验证。所以，在我上面的例子中，“Suck it”。value 删除整个文档。有没有办法解决这个问题？我只是坚持我的第二个编程步骤吗？如果我*只能*使单个标签而不是整个文档失败，是否有某种方法可以解决“此标签因这个原因而失败”。在验证期间？

**编辑：**我最终使用了一个`SAXParser`带有`Schema`集合的 a ，并给它一个扩展的自定义类，该类`DefaultHandler`在某种程度上手动处理 XML。

`Node`我在我的 custom 内部设置了一个私有类`DefaultHandler`，这是一个非常简单的 Tree 实现。每个都`Node`包含一个开始标记、值和结束标记，都存储为`String`s，以及与父级和子级的关系。每当我收到一条`SAXException`包含以“cvc-pattern-valid”或“cvc-type.3.1.3”（或我想要捕获的任何 XML 错误）开头的消息时，我都会`Node`从树中删除 I'm in the middle of我正在建造（因为它坏了），然后继续下一个。`String`然后，当我通过调用`Node.depthFirstSearch()`根（使用各种`StringBuilder`s）完成解析时，我可以将整个文档（减去剔除的标签）输出为一个大 XML 。

我现在的问题是感觉就像我做了大量的工作只是为了将 XML 视为 XML。我必须重新添加 " `<`"、" `>`" 和 " `<\`" 字符，因为其中的方法`DefaultHandler`只给了我像 stripped 之类的东西`qName`。所有这些树的构建和遍历似乎效率低下；喜欢太多的工作。当然必须有一个更简单的方法？

注意：我想将 XML 保留为 XML 的原因是因为这是我以前的工作流程：

```
XSD -> XSLT -> Unmarshal to JAXB-Annotated Object 
```

现在是这样的：

```
SAXParser(XSD) -> XSLT -> Unmarshal to JAXB-Annotated Object 
```

也许有一些神奇的方法可以做到：

```
SAXParser(XSD, XSLT) -> Unmarshal to JAXB-Annotated Object 
```

或者

```
SAXParser(XSD, XSLT, Unmarshal to JAXB-Annotated Object) 
```

但我不知道那会是什么。

**编辑：**好吧，除了可能的低效率之外，扩展`DefaultHandler`，覆盖`DefaultHandler.error(SAXParseException exception)`是正确的答案，至少对我来说。因此，Petru 得到了梦寐以求的绿色复选标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:08:17.030

JAXB 能够设置[自定义错误处理程序](http://docs.oracle.com/javaee/5/api/javax/xml/bind/ValidationEventHandler.html)，因此允许您覆盖默认行为，即放弃所有处理。用您的特定测试用例尝试一下，看看它是如何工作的。

据我所知，所有主要的验证器都有一种基于事件的方法来允许自定义处理验证错误，以便继续处理。

最坏的情况可能是使用例如 SAX API（而不是直接使用 JAXB）实际解析 XML，它可以让您更好地控制处理错误；然后`record`成功验证任何节点，将其解组到您的 JAVA 类中（尽管您最终会进行双重解析）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:10:02.943

让我们区分概念层面和实践层面。

从概念上讲 - XSD 不仅为整个文档（或更具体地说，为验证开始的文档节点）定义有效性，还为以验证开始的节点为根的子树中的每个节点定义有效性。

因此，在文档的 PSVI（模式验证后信息集）中，每个“记录”元素在概念上都标有 [validity=valid] 或 [validity=invalid] 或 [validity=notKnown]。正如您所观察到的，无效性会向上传播，因此如果父“根”元素具有无效的子元素，它通常也是无效的。

XSD 规范完全没有说明发现其输入无效的应用程序是否应该继续处理输入或中止；这超出了 XSD 规范的范围。如果您想处理有效的“记录”元素并对无效的元素执行其他操作，XSD 规范旨在使验证器能够为您提供执行此操作所需的信息。

实际上 - 许多用户和一些实现者还没有看到 XSD 定义的更丰富的有效性概念的实用性，因此许多验证器和代码绑定工具提供的 API 在默认情况下基本上将有效性降低到验证根的单个布尔属性，并且在某些情况下，这种简化的有效性概念是该工具实际支持的唯一概念。

因此，您的验证器 API 可能会或可能不会让您访问“记录”元素的有效性信息。如果是这样，您只需要编写消费代码来询问 API 并采取相应措施。如果没有，您需要告诉您的供应商您需要该信息（或寻找不同的验证器）。如果您使用数据绑定工具来生成代码，则适用相同的原则：了解如何使您的工具生成可以在存在无效输入的情况下继续使用的代码，如果该工具不支持该功能，请咨询供应商为什么不。

XSD 不会尝试为验证器定义 API 或最低质量标准，因此说服供应商提供对 XSD 完整原生有效性概念的访问的唯一方法是通过市场压力。

XSD 与其他模式语言的不同之处在于，其有效性不是作为整个文档的简单布尔属性定义，而是作为已验证文档部分中每个节点的三值属性（有效、无效、未知）。像您描述的那样的使用场景（与 Stanley de Boer 在评论中提供的观点相反）是这项工作的核心动机。因此，如果您不能使用当前的 XSD 验证器做您想做的事情，那么障碍在于实现，而不是 XSD 本身。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T22:45:35.980

Saxon 没有达到 Michael Sperberg-McQueen 所描述的理想化 XSD 处理器，主要是因为它的设计主要是为了满足模式感知 XSLT 和 XQuery 处理的需要，它们不需要 XSD 规范中内置的所有灵活性。但是，您仍然可以走很长的路，因为您实际上并不需要完整的 PSVI：您需要的是源文档加上一个错误列表 [我的术语，不是 XSD 规范中使用的那个]，链接在一起某种方式。你可以很容易地做到这一点——细节取决于你想要基于树还是基于事件的处理方法。

（几乎可以肯定，其他 XSD 处理器也是如此，但 Saxon 是我最了解的处理器）。

如果您正确选择了处理选项，Saxon 将始终在验证错误后继续处理，但在某些情况下，它会决定不对文档的一部分进行任何进一步的验证。例如，如果一个内容模型应该包含 (a,b,c,d)，而实例实际上包含 (a,x,b,c,d)，那么一旦在 x 处报告错误，则不进行验证在 b、c 和 d 上。

# r - 如何将多个图放在具有相同 y aix 范围但在 R 中不同 x 轴的同一图中

> ID：15278632
> 
> 赞同：0
> 
> 时间：2013-03-07T18:11:04.177
> 
> 标签：r, graphics

数据集 1：

```
0.8519685   1
0.8400882   1
0.8464  1
0.8428793   1
0.8438172   1
0.8416375   1
0.8475025   1
0.8296616   1
0.8415241   1
0.8577903   1
0.8654286   1
0.8591148   1
0.8352778   1
0.8508564   1
0.8199912   1
0.8440318   1
0.8161487   1
0.8592727   1
0.850286    1
0.8563889   1
0.8585333   1
0.854275    1
0.8418394   1
0.8315148   1
0.8040112   2
0.7881706   2
0.78821 2
0.7818517   2
0.7773207   2
0.7817786   2
0.769675    2
0.7681707   2
0.7568771   2
0.7822226   2
0.7774829   2
0.7894815   2
0.7744519   2
0.7782154   2
0.7394333   2
0.7749136   2
0.7497919   2
0.7928364   2
0.7887512   2
0.8072222   2
0.78303 2
0.8209792   2
0.7590879   2
0.7787667   2
0.8447202   3
0.8406627   3
0.831145    3
0.8319397   3
0.8370069   3
0.8103875   3
0.8024688   3
0.8127556   3
0.8072374   3
0.8147936   3
0.8389314   3
0.8404519   3
0.8145204   3
0.8214462   3
0.7823491   3
0.8034705   3
0.7878973   3
0.8193091   3
0.8240977   3
0.8301389   3
0.8144933   3
0.8180958   3
0.7862212   3
0.8342704   3 
```

数据集 2：

```
0.8551  2001
0.8626  2001
0.716   2001
0.8455  2001
0.847   2001
0.794   2001
0.8144  2001
0.7992  2001
0.7794  2001
0.8121  2001
0.8364  2001
0.8778  2001
0.8698  2001
0.872   2001
0.8775  2001
0.8226  2001
0.8226  2001
0.8226  2001
0.8049  2001
0.783   2001
0.8611  2002
0.8738  2002
0.7886  2002
0.8762  2002
0.8797  2002
0.844   2002
0.7166  2002
0.841   2002
0.8069  2002
0.8393  2002
0.8323  2002
0.8771  2002
0.8748  2002
0.8748  2002
0.8704  2002
0.836   2002
0.8403  2002
0.8162  2002
0.8429  2002
0.828   2002 
```

主要问题：如何将多个图放在具有相同 y 轴范围但不同 x 轴的同一图中？

进一步说明：两个数据集区域的第一列包含 CELL 的值，而“数据集 1”的第二列是“类别”，而“数据集 2”的第二列是“年份”。我想要 Y 轴中的“单元格”，而“x 轴”中的“类别”和“年份”。非常感谢

我希望类别在盒子/胡须中与年份对齐和/或堆叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:48:12.370

这里有一些东西：

```
datasetcomb<-rbind(dataset1,dataset2) #combine datasets

#V1 is cell, V2 is another variable

boxplot(V1~factor(V2),data=datasetcomb,at=c(1,4,7,2,5),ylab="Cell",
    xlab="Category/Year",xaxt="n",col=c(3,3,3,2,2))
axis(side=1,at=c(1,4,7,2,5),labels=c(1,2,3,2000,2001)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:34:01.130

这是另一个可能有用的解决方案。

```
data1 <- read.table("data1.txt")
data2 <- read.table("data2.txt")
names(data1) <- c("cell","category")
names(data2) <- c("cell","year")
library(reshape2)
library(ggplot2)
meltdata1 <- melt(data1, id=c("cell"))
head(meltdata1)

meltdata2 <- melt(data2, id=c("cell"))
comb <- rbind(meltdata1,meltdata2)
head(comb)

ggplot(comb, aes(x=factor(value), y=cell))+geom_boxplot()+facet_wrap(~variable, scales="free_x")+xlab(" Category / Year") 
```

输出如下：

![在此处输入图像描述](../Images/9c6768929d816dc2edaf3cd10d9be5af.png)

希望能帮助到你。

# sql - Oracle Multiset 到字符串

> ID：15278639
> 
> 赞同：1
> 
> 时间：2013-03-07T18:11:42.503
> 
> 标签：sql, oracle, plsql

我正在运行一个导致自定义 Oracle 类型的多集的查询，我想在另一个查询中使用生成的多集并将其与 VARCHAR2 字段连接。我想知道是否有办法将多重集转换为逗号分隔的字符串？

我从查询中得到的是：

```
SCHEMA.TYPE_T(SCHEMA.TYPE('D0010422'),SCHEMA.TYPE('D0010599'),SCHEMA.TYPE('D0010600')) 
```

我想要做的是在另一个查询中将其作为字符串包含在内：

```
D0010422, D0010599, D0010600 
```

我的多集 SQL：

```
SELECT CAST( MULTISET( query here) AS SCHEMA_type_t ) checks FROM DUAL; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:22:08.627

```
create or replace type t_str as table of varchar2(100);

select 
   listagg(column_value, ',') within group (order by column_value) 
from 
   table(
      cast(
         multiset(
            select 'one' from dual
            union all
            select 'two' from dual
         ) as t_str
      )
   ) 
```

[小提琴](http://sqlfiddle.com/#!4/985ae/1)

# java - 不受支持的 ISO 3166 国家/地区 ES？

> ID：15278640
> 
> 赞同：3
> 
> 时间：2013-03-07T18:11:42.960
> 
> 标签：java, android, iso-3166

我测试过的 Android 应用程序在英国和美国语言环境下运行良好，但是当我将语言环境更改为 ES 时，我收到以下错误：

java.lang.IllegalArgumentException：不支持的 ISO 3166 国家：es

我检查了 ISO 3166 并且 es 绝对是一个有效的国家代码。我试过把它改成大写，没什么区别。

这是有问题的代码：

```
Currency myCurrency;
myCurrency = Currency.getInstance(Locale.getDefault()); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:41:05.673

`Locale`名称由*语言代码*（小写）和**可选的** *国家代码*组成。您应该将默认语言环境设置为`es-Es`. 例如，`Locale.US`实际上是`en-US`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-04-10T11:29:48.203

试试这个：

```
Currency.getInstance(new Locale("es", "ES")); 
```

# git - 手动将更改拉入存储库

> ID：15278647
> 
> 赞同：1
> 
> 时间：2013-03-07T18:12:07.480
> 
> 标签：git

我有一个客户使用我的应用程序及其 .git 存储库的本地副本，她用它来还原更改和测试补丁等。但是由于防火墙和其他规则，她没有简单的方法可以拉出具有最新更改的远程. 所以我想“让他们下载一个新的、完整的 .git 存储库压缩起来”。但是存储库是一个大妈妈，可以舒适地四处走动，所以我宁愿只给她发送一个压缩的 .git 增量更改（对象、引用等），以便在她的本地 .git 目录中解压缩。

根据文件时间戳，我尝试了以下工作流程（在我的软件中自动执行）：

1.  在她的 .git/objects 目录中获取最新的时间戳
2.  从该时间戳开始的文件的 .git 目录创建一个 zip
3.  电子邮件压缩文件
4.  在客户的 .git 中解压缩 zip（如果某些文件被覆盖，则无关紧要）
5.  `git checkout -f master`（或他们需要的任何分支/标签）和`git clean -d -f`

它工作得很好，因为她的工作树和 .git 目录从未在本地修改，只是从一个分支签出到一个标签或其他什么。但是文件时间戳肯定是不可靠的......即它可能都`touch`被一些备份或其他东西所编辑，所以我正在寻找一种更优雅的方式来使用某种提交来创建这个增量压缩包。

那么，**如果我有来自客户本地 .git 的信息，我如何以编程方式创建我的 .git 目录的增量 zip 文件？**我想这与 git 在内部以增量方式从远程拉取东西的做法非常相似。选择正确文件的算法是什么？如何确定来自客户存储库的基线提交以构建增量 zip？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:07:39.657

为什么不使用[git format-patch](https://www.kernel.org/pub/software/scm/git/docs/git-format-patch.html)命令？还是[git bundle](https://www.kernel.org/pub/software/scm/git/docs/git-bundle.html)？[这](http://alblue.bandlem.com/2011/12/git-tip-of-week-patches-by-email.html)是一个如何做到这一点的例子。您的客户只需下载`.git`一次完整的压缩目录，之后他就可以使用增量补丁。

# c# - Razor 语法 - 在字符串中使用两个变量

> ID：15278653
> 
> 赞同：8
> 
> 时间：2013-03-07T18:12:28.680
> 
> 标签：c#, razor

```
SomeObject record = new SomeObject();
record.value1 = 1;
record.value2 = "hello";

<td><input type="checkbox" id="indicator_@record.value1_@record.value2" /><td> 
```

创建 id 为“indicator_1_hello”的复选框的正确剃刀语法是什么？

尝试这种方式时，它说该对象不包含 value1_ 的定义（可以理解），当我尝试“indicator_@record.value1@_@record.value2”时，如果有关于名为 _ 的东西在上下文（再次，可以理解）。

编辑：

作为一个临时解决方案，我已经完成了：

```
SomeObject record = new SomeObject();
record.value1 = 1;
record.value2 = "hello";
var combined = String.Format("{0}_{1}", record.value1, record.value2);

<td><input type="checkbox" id="indicator_@combined" /><td> 
```

不过，我仍然很好奇您是否可以内联完成所有操作。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-07T18:30:52.050

```
@{
    // just for testing
    var record = new { value1 = "foo", value2 = "bar" };
}

<input type="checkbox" id="indicator_@( record.value1 + "_" + record.value2 )"> 
```

给出：`<input type="checkbox" id="indicator_foo_bar">`

Just make sure that you aren't building an ID which would be better auto-generated by the natural hierarchy of your view model. Most of the time, you shouldn't need to manually construct IDs in your view.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:25:19.940

如果您需要这样的东西，我建议将该字段（即 CheckboxID）添加到您的模型中并在服务器端填充它，然后再将其传递给视图。

# java - JDom 将内容从一个 xml 获取到另一个

> ID：15278655
> 
> 赞同：0
> 
> 时间：2013-03-07T18:12:44.653
> 
> 标签：java, xml, transfer, jdom

我有两个不同的 XML，都包含相同的产品但使用另一种语言。问题是，我想将法语 XML 的描述添加到荷兰语的描述中，但是法语 XML 包含更多的产品。这是我尝试过的，但它不起作用，因为法语 XML 更大。（另外，我认为我犯了一个错误，因为产品也不在同一个位置，它们只是共享相同的产品代码（荷兰 XML 中的命名代码和法语 XML 中的 artikelnummer）。我应该在这里做什么？

```
 doc = (Document) builder.build(xmlFile);
    docfrans = (Document) builder.build(xmlFilefrans);

    root = doc.getRootElement();
    root.setName("productlist");
    List<Element> elementje = root.getChildren();

    rootfrans = docfrans.getRootElement();
    List<Element> elementjefrans = rootfrans.getChildren();
    for (int i = 0; i < elementjefrans.size(); i++) {
        Element verwijderdelementfrans = elementjefrans.get(i);
        Element verwijderdelement = elementje.get(i);
        List<Element> lijstjefrans = verwijderdelementfrans.getChildren();
        List<Element> lijstje = verwijderdelement.getChildren();
        for (int j = 0; j < lijstjefrans.size(); j++) {
            if ( verwijderdelementfrans.getChild("artikelnummer").getText().equals(verwijderdelement.getChild("code").getText()) ){
                System.out.println("test");
                verwijderdelement.getChild("description").setText(verwijderdelement.getChild("description").getText()+verwijderdelementfrans.getChild("omschrijving").getText());
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:50:25.057

对于那些感兴趣的人，经过大量搜索后自己弄清楚了：SAXBuilder builder = new SAXBuilder();

```
 String eol = System.getProperty("line.separator");

    doc = (Document) builder.build(xmlFile);
    docfrans = (Document) builder.build(xmlFilefrans);

    root = doc.getRootElement();
    root.setName("productlist");
    List<Element> elementje = root.getChildren();

    rootfrans = docfrans.getRootElement();
    List<Element> elementjefrans = rootfrans.getChildren();

    for (int i = 0; i < elementjefrans.size(); i++) {
        for (int k = 0; k < elementje.size(); k++) {
            Element verwijderdelementfrans = elementjefrans.get(i);
            Element verwijderdelement = elementje.get(k);
//                for (int j = 0; j < lijstje.size(); j++) {
                if (verwijderdelementfrans.getChild("artikelnummer").getText().equals(verwijderdelement.getChild("code").getText())) {
                    System.out.println("test");
                    verwijderdelement.getChild("description").setText(verwijderdelement.getChild("description").getText() +"\n"+"\n"+ verwijderdelementfrans.getChild("omschrijving").getText());

                }
//                }
        }
    } 
```

# c - 跳过位图到字符串转换器中的填充？

> ID：15278657
> 
> 赞同：0
> 
> 时间：2013-03-07T18:12:48.273
> 
> 标签：c, windows, file-io, bitmap, padding

我有以下算法用于将 24 位位图转换为像素的十六进制字符串表示形式：

```
// *data = previously returned data from a call to GetDIBits
// width = width of bmp
// height = height of bmp
void BitmapToString(BYTE *data, int width, int height)
{
    int total = 4*width*height;
    int i;
    CHAR buf[3];
    DWORD dwWritten = 0;
    HANDLE hFile = CreateFile(TEXT("out.txt"), GENERIC_READ | GENERIC_WRITE, 
                                0, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);
    for(i = 0; i < total; i++)
    {
        SecureZeroMemory(buf, 3);
        wsprintfA(buf, "%.2X", data[i]);

        // only write the 2 characters and not the null terminator:
        WriteFile(hFile, buf, 2, &dwWritten, NULL);

    }
    WriteFile(hFile, "\0", 2, &dwWritten, NULL);
    CloseHandle(hFile);
} 
```

问题是，我希望它忽略每行末尾的填充。例如，对于一个 2x2 位图，其中所有像素的值为 #7f7f7f，out.txt 的内容也包含填充字节：

```
7F7F7F7F7F7F00007F7F7F7F7F7F0000 
```

我将如何调整循环以避免包含填充零？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:23:57.797

将您的项目设置更改为在写入时不填充到 16 个字节是一种想法。另一个是知道填充设置的字节数（在您的示例中为 16），并使用模数（或和）来确定每行需要跳过多少字节：

```
 int offset = 0;
  for(i = 0; i < height; i++)
  {
    // only read 3 sets of bytes as the 4th is padding.
    for(j = 0; j < width*3; j++)
    {
        SecureZeroMemory(buf, 3);
        wsprintfA(buf, "%.2X", data[offset]);

        // only write the 2 characters and not the null terminator:
        WriteFile(hFile, buf, 2, &dwWritten, NULL);
        offset++;
    }

    // offset past pad bytes
    offset += offset % 8;
  } 
```

这个解决方案应该可以工作，但如果不进一步了解您的填充字节是如何发生的，我不会保证它。

# java - astyanax 可以返回有序的列名吗？

> ID：15278659
> 
> 赞同：0
> 
> 时间：2013-03-07T18:12:55.730
> 
> 标签：java, cassandra, astyanax

使用 com.netflix.astyanax，我为给定行添加条目，如下所示：

```
final ColumnListMutation<String> columnList = m.withRow(columnFamily, key);
columnList.putEmptyColumn(columnName); 
```

后来我检索了我的所有列：

```
 final OperationResult<ColumnList<String>> operationResult = keyspace
          .prepareQuery(columnFamily).getKey(key).execute();
  operationResult.getResult().getColumnNames(); 
```

以下正确返回了我添加的所有列，但这些列没有按照它们在数据库中输入的时间进行排序。由于每列都有与之关联的时间戳，因此应该有一种方法可以做到这一点，但我没有看到。在那儿？

注意：如果没有，我可以随时将上面的代码更改为：

```
columnList.putColumn(ip,new Date()); 
```

然后检索列值，对它们进行相应的排序，但这似乎很麻烦、效率低下和愚蠢，因为每列都已经有一个时间戳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:33:50.120

我从 PlayOrm 知道，如果您执行列切片，它会按顺序返回这些切片。事实上，playorm 使用它确实在分区中启用了 S-SQL，并且基本上根据请求的方式对按顺序或反向顺序返回的列切片进行批处理。您可能想要从 0 到 MAXLONG 进行列切片。

我不确定是否会获得这一行。我没试过。

哦，PlayOrm 只是 astyanax 之上的一个映射层，虽然不是真正的关系，而且更多的是 noSql'ish，正如它的模式页面所展示的那样

[http://buffalosw.com/wiki/Patterns-Page/](http://buffalosw.com/wiki/Patterns-Page/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T17:03:13.143

Cassandra 永远不会按“插入顺序”对您的列进行排序。

列总是按最低的顺序排列。它还取决于 cassandra 如何解释您的列名。您可以使用定义列族时设置的比较器来定义解释。

从你给出的看起来你使用字符串时间戳值。如果您只是将时间戳序列化为例如“123141”和“231”，请注意使用`UTF8Type`比较器“231”>“123131”。

更好的方法：使用基于时间的 UUID 作为列名，正如 Cassandra 中时间序列数据的许多示例所建议的那样。然后你可以使用`UUIDType`比较器。

```
 CREATE COLUMN FAMILY timeseries_data
 WITH comparator = UUIDType
 AND key_validation_class=UTF8Type; 
```

# java - Log4j PropertyConfigurator.configure() 将不接受 eclipse 中的字符串

> ID：15278660
> 
> 赞同：0
> 
> 时间：2013-03-07T18:12:57.733
> 
> 标签：java, logging, log4j

我有一个奇怪的问题，可能很简单，但我已经用谷歌搜索了 20 分钟，但没有解决

我正在尝试在 Eclipse 中使用 log4j。我下载了最新的 zip 并添加到我的类路径中。我通过从教程中复制创建了属性文件。属性文件位于我项目的根文件夹中，名为“log4j.properties”。该文件包含

```
#define the console appender
log4j.appender.consoleAppender = org.apache.log4j.ConsoleAppender

# now define the layout for the appender
log4j.appender.consoleAppender.layout = org.apache.log4j.PatternLayout
log4j.appender.consoleAppender.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n

# now map our console appender as a root logger, means all log messages will go to this     appender
log4j.rootLogger = DEBUG, consoleAppender 
```

我的课如下，eclipse在PropertyConfigurator.configure()行出现如下错误。此行有多个标记 - 标记“log4j.properties”上的语法错误，删除此标记 - 标记上的语法错误，错误的构造

但是 log4j 的 api 显示 propertyconfigurator 应该接受一个字符串。有什么建议么？-

```
package org.dnsdojo.ryanhost.GA.MuPlusOne;

import java.util.Random;
import org.apache.log4j.Logger;
import org.apache.log4j.PropertyConfigurator;

public class Genome
{
private static Logger logger = Logger.getLogger(Genome.class);
PropertyConfigurator.configure("log4j.properties");
byte[] genome;
Random rng = new Random();
String genomeString = "";

public Genome ( int stringLength, int motorSet )
{
    genome = new byte[ stringLength * 7 * motorSet]; // stringLength depends on how many bytes you wish to have. For the arpibot this is dependant on the number of sensor readings taken
    for (int i = 0; i < genome.length; i++)
    {
        genome[i] = (byte)rng.nextInt(2);
        genomeString += genome[i];
    }
    logger.debug(genomeString);     
}

public byte[] getGenome()
{
    return genome;
}

public byte[] mutate (float mutationStep)
{
    return genome;                                  //placeholder
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:16:09.070

You currently have `PropertyConfigurator.configure` in the class block so the compiler is complaining. Move the statement (along with the other non-declarative statements) into a method or `static` initializer block.

# c# - 如何为 IEnumerable 赋值

> ID：15278661
> 
> 赞同：2
> 
> 时间：2013-03-07T18:12:59.317
> 
> 标签：c#, razor, webmatrix

我有以下代码：

```
var db = Database.Open("Text");
var headers = db.Query("SELECT * FROM Headers");

//headers is now an IEnumerable<dynamic>

string s = headers[0].Text; // Works correctly

headers[0].Text = "Some string"; 
```

如果我尝试将“某些字符串”分配给标题的 Text 属性，则会收到以下错误：

`Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: WebMatrix.Data.DynamicRecord contains no definition for Text.`

如何将标头对象转换为列表/数组，以便能够为其分配新值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:15:52.913

问题是`DynamicRecord`从 WebMatrix 返回的类实际上是“只读的”。DynamicObject 不允许设置`Text`.

如果要更改值，则需要将此数据映射到您自己的类中，而不是将它们保留在原始`dynamic`类型中。

# html - 如何在动态创建的输入标签中获取跨度标签的 html

> ID：15278662
> 
> 赞同：2
> 
> 时间：2013-03-07T18:13:00.520
> 
> 标签：html, jquery

```
<span class="edt">ddddd</span>
    <span class="edt">ssss</span>
    <span class="edt">aaaaa</span>
    <a id="edit">edit</a>

    $('#edit').click(function(){

       $('.edt').html("<input type=\"text\" id=\"\"  value=\"\" /> ") 
    }); 
```

我想要做的是在 jquery 创建的输入中获取 span 标签的 html 部分。我知道更好的解决方案是在变量中通过 id 传递 html，但 span 标签是在页面加载时动态创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:19:55.557

这将循环遍历每个`edt`类，并将 span 的内容替换为与要替换的内容具有相同值的 input 元素。

```
$('#edit').click(function(){
    $('.edt').each(function() {
        var value = $(this).text();
        $(this).html('<input type="text" id="" value="'+value+'" />');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:19:57.513

如果`#edit`元素是动态创建的，您应该委托该事件。

```
$(document).on('click', '#edit', function(){
   $('span').html(function(index, oldHTML){
       return '<input type="text" id="id'+ index +'"  value="'+ oldHTML +'" />';
   })
}); 
```

[http://jsfiddle.net/yHbsa/](http://jsfiddle.net/yHbsa/)

看来您想编辑元素的内容，一些建议：

1.  `Focus`在输入上（以编程方式）和在`blur`事件上用它们的值替换输入。
2.  如果应执行一次处理程序，请使用`one`方法而不是`on`.
3.  如果您使用的是 HTML5 文档类型，您也可以使用`contenteditable`属性而不是替换元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T18:20:05.230

这是你想要达到的目标吗？**[演示](http://jsfiddle.net/letiagoalves/337ER/5/)**

**单击生成的一些输入元素以查看绑定事件。**

```
$('#content').on("click", "#edit", function () {
    $.each($('.edt'), function (i, k) {
        $(k).removeClass("edt");
        k.innerHTML = "<input type='text' id='' value='" + k.innerHTML + "' />";
    });
});

$('#content').on("click", "input", function () {
    alert("Some event.");
}); 
```

# jquery - 使用 jquery 获取锚点 #id 网址

> ID：15278666
> 
> 赞同：2
> 
> 时间：2013-03-07T18:13:11.880
> 
> 标签：jquery, html, anchor

我有一个使用 jquery 平滑滚动到锚点的固定菜单，效果很好 - 但是当我使用脚本时，锚链接不再出现在 url 中。有任何想法吗？

该网站是[http://www.julianvanmil.com](http://www.julianvanmil.com)

听到我正在使用的代码；

```
<script>
jQuery(document).ready(function($) {

    $(".scroll").click(function(event){     
        event.preventDefault();
        $('html,body').animate({scrollTop:$(this.hash).offset().top}, 400);
    });
});
$(function() {
    var bar = $('.logo');
    var top = bar.css('top');
    $(window).scroll(function() {
        if($(this).scrollTop() > 700) {
            bar.stop().animate({'top' : '35px'}, 300);
        } else {
            bar.stop().animate({'top' : top}, 300);
        }
    });
});
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:18:12.293

尝试将哈希与 JS...

```
$(".scroll").click(function(event){     
    event.preventDefault();
    $('html,body').animate({scrollTop:$(this.hash).offset().top}, 400);
    window.location.hash = "hash";
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:19:31.323

这`event.preventDefault();`是阻止默认操作，即将散列附加到 URL，然后滚动。

尝试添加：`location.hash = this.hash`在`event.preventDefault();`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T19:09:09.323

试试这个，它的工作原理：

```
$('a[href^="#"]').click(function(event){     
    event.preventDefault();
    $('html,body').animate({scrollTop:$(this.hash).offset().top}, 800);
    var target_anchor = this.hash;
    setTimeout(function(){
        window.location.hash = target_anchor;
    }, 800);
}); 
```

# sql - 过滤连接表但还包括连接和过滤表为空的数据？

> ID：15278667
> 
> 赞同：0
> 
> 时间：2013-03-07T18:13:12.410
> 
> 标签：sql, sql-server, join, tags

我有一个包含用户信息的表和一个包含标签信息的表。标记表基本上具有标记类型、用户 ID 和标记值。我根据 UserID 加入了这两个表。

现在我想用 TagType = 1 的标签的值查询所有用户的列表。

```
SELECT [user].name, [tag].value
FROM user LEFT OUTER JOIN 
  tag ON user.id = tag.userid
WHERE [tag].type = 1 
```

到目前为止，一切都很好。这很好用。

我现在遇到的问题是，我还希望在我的查询中看到没有标签类型 = 1 的标签的用户。在这种情况下，它应该只返回 NULL。现在，查询不会返回这些用户。

如果我摆脱了“WHERE [tag].id = 1”，那么它们就会出现，但它会为每个用户返回几行——每个现有标签类型一个——但我不希望这样。

从某种意义上说，我想得到：

```
Column 1: User Name
Column 2: Tag value of Tag Type 1 if it exists, otherwise NULL 
```

我被困在那里。我不知道如何让其他用户加入，但将其他标签类型拒之门外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:18:14.263

把你的`WHERE`条件放在条件里面`JOIN`。

```
SELECT [user].name, [tag].value
FROM user LEFT OUTER JOIN 
  tag ON user.id = tag.userid and [tag].type = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:17:32.500

尝试：

```
SELECT [user].name, [tag].value
FROM user LEFT OUTER JOIN 
  tag ON user.id = tag.userid AND [tag].type = 1 
```

# progress-4gl - 在浏览中使其中一个列分隔符比其他列分隔符更厚

> ID：15278668
> 
> 赞同：1
> 
> 时间：2013-03-07T18:13:19.810
> 
> 标签：progress-4gl, openedge

我浏览了**5**列。**我希望第3**列和**第 4**列之间的分界线稍微粗一点。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:53:35.373

简短的回答是否定的，你不能改变列之间的线。

但是您可以在第 3 列和第 4 列之间添加一个具有空白值的空虚拟列，这样您就可以让它看起来像一个更厚的分隔符。

问候，

# database-connection - Navicat、对象数据库和 Postgres

> ID：15278671
> 
> 赞同：1
> 
> 时间：2013-03-07T18:13:25.877
> 
> 标签：database-connection, postgresql-9.2, intersystems-cache, data-import, navicat

我在 Postgres 中通过 Navicat 导入向导（通过 ODBC 连接）导入表。从 Caché Intersystem DB 导入允许对象列表对象的表时出现问题。示例表测试

```
Id (int),
Name (varchar(10)),
Preferences (List <Objects>) 
```

如何在不更改架构的情况下管理首选项列？Navicat 向导导入有一些功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T11:44:39.247

我现在还没有找到解决方案。我已将数据导入为分隔的字符串管道，并且我使用 Hibernate 的自定义对象管理了集合数据列表。

# sql-server - Sql 查询协助。如何正确获取where子句中的项目

> ID：15278672
> 
> 赞同：0
> 
> 时间：2013-03-07T18:13:27.527
> 
> 标签：sql-server, sql-server-2008

我创建了这个简化的 sql 查询。它需要一个只有 2 个字符的级别代码（“GR”、“PH”...等），我需要更改查询以允许在一个实例中返回多个项目。

这是代码

```
 DECLARE @ALEVL_CODE varchar(5), @test varchar(100)
    SET @ALEVL_CODE = 'GR'
    SET @test = @ALEVL_CODE + ',' + 'PH'

-
                    select ALEVL_CODE  from PMP_Admissions_Letter_Data AD
                    INNER JOIN      PMP_LM_Review LMR
    ON              LMR.PMP_Letter_Data_ID = AD.PMP_Admissions_Letter_Data_ID
    WHERE           LMR.ToPrinter = 1 AND
                    LMR.Extracted = 0 AND 
                    AD.ALEVL_CODE = @ALEVL_CODE                 
                    AND
                    AD.DSCN_MAX_CODE = 'PA' 
```

我遇到的问题是`AD.ALEVL_CODE=@ALEVL_CODE` where 子句中的行。我想成为类似 when `@ALEVL_CODE`is `GR`then do`GR`和`PH`else just do的东西`@ALEVL_CODE`。这有道理吗？一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:17:22.150

```
 AND (AD.ALEVL_CODE = @ALEVL_CODE
         OR (@ALEVL_CODE='GR' AND AD.ALEVL_CODE = 'PH')) 
```

一个简化的替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:23:00.730

```
 select ALEVL_CODE  from PMP_Admissions_Letter_Data AD
            INNER JOIN      PMP_LM_Review LMR
ON              LMR.PMP_Letter_Data_ID = AD.PMP_Admissions_Letter_Data_ID
WHERE           LMR.ToPrinter = 1 AND
            LMR.Extracted = 0 AND 
            ((@ALEVL_CODE = 'GR' AND AD.ALEVL_CODE in ('GR', 'PH')) 
                OR (@ALEVL_CODE <> 'GR' AND AD.ALEVL_CODE = @ALEVL_CODE))                 
            AND
            AD.DSCN_MAX_CODE = 'PA' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T18:17:27.737

```
and case when (@ALEVL_CODE = 'GR') then AD.ALEVL_CODE in ('GR', 'PH') 
         else AD.ALEVL_CODE = @ALEVL_CODE
    end 
```

# php - 如何在 PhpStorm 中标记非返回函数

> ID：15278674
> 
> 赞同：4
> 
> 时间：2013-03-07T18:13:41.987
> 
> 标签：php, phpstorm

是否有一个属性来标记总是抛出异常或死亡的函数？

```
/** @noreturn */
function customDie() {
    die();
}

function bar() {
    switch( .. ) {
        case 1: customDie();  // <-- should not warn because there is no break
        case 2: xxx();
}

/** @return int */
function goo() {
    ...
    customDie();  // <-- should not warn that the method is not returning an integer
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:17:22.253

当前版本的 PhpStorm 中没有这样的“属性”/功能。详情请关注此票：http: [//youtrack.jetbrains.com/issue/WI-10673](http://youtrack.jetbrains.com/issue/WI-10673)

我可以建议的唯一选择是`die();`在调用此类函数后添加实际值。是的——多了一行，但只有 1 行实际上永远不会被执行。

# javascript - 使用提交按钮提交下拉框输入

> ID：15278678
> 
> 赞同：0
> 
> 时间：2013-03-07T18:14:00.590
> 
> 标签：javascript, jquery, html

问这个我感觉很糟糕，但我无法在 SO 或谷歌上找到解决方案。

我需要在网页上的多个下拉框中捕获输入。我已经创建了页面，并且已经合并了一个提交按钮。当我点击提交时，提交的唯一信息来自文本框和可点击按钮。

此代码将从按钮提交

```
<div id="selectionButtons"><!-- allows the user to select between veto and issue-->
    <input type="radio" name="searchType" value="issue" checked>Issues<br>
    <input type="radio" name="searchType" value="veto">Vetos
</div> 
```

此代码还将导致信息被提交

```
<div class="listbox" id="orgCode" style="padding-right:10%">
        <label for="orgCode">Organization Code</label>
        <select size="10" name="org" class="box" style="width:100%;" 
        multiple="true">
            <option selected>Code 1
            <option>Code 2
            <option>Code 3
            <option>Code 4
            <option>Code 5
            <option>Code 6
        </select>
</div> 
```

但是这段代码不会提交文本框中的信息

```
<div class="ui-widget" id="fiscalYear">
        <label for="fiscalYear">Fiscal Year</label>
        <select id="fisc">
            <option value="">Select one...</option>
            <option value="1">first</option>
            <option value="2">second</option>
            <option value="3">third</option>
            <option value="4">fourth</option>
            <option value="5">fifth</option>
            <option value="6">sixth</option>
            <option value="7">seventh</option>
            <option value="8">eight</option>
            <option value="9">ninth</option>
            <option value="10">tenth</option>
        </select>
        <script>
            $(function() {
                $( "#fisc" ).combobox();
                $( "#toggle" ).click(function() {
                    $( "#fisc" ).toggle();
                });
            });
        </script> 
```

起初我认为问题在于我对 jQuery 组合框的实现，所以我去了一个简单的选择选项下拉菜单。那并没有解决问题，所以我认为它可能是由结束选项标签引起的。

任何帮助将不胜感激，这是我第一次使用 html 和 javascript/css

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:18:05.100

你必须给你的选择标签一个名字，而不仅仅是一个ID

```
<select id="fisc" name="fisc"> 
```

# regex - 使用 sed/awk 使用正则表达式模式从文件中删除多行

> ID：15278679
> 
> 赞同：1
> 
> 时间：2013-03-07T18:14:03.790
> 
> 标签：regex, sed, awk

Eclipse 的“从表中生成实体...”JPA 代码生成器坚持创建一个 @Id 字段和相关的 getter/setter 方法，尽管事实上这些是在我在向导步骤中指定的超类中定义的。

为了解决这个问题，我的想法是编写一个脚本来删除有问题的行并以其他方式清理生成的文件。（是的，我可以使用 Eclipse 中的“查找/替换”对话框手动执行此操作，但我想自动化整个更改集，因为我将在处理各种模型时多次执行此代码生成/清理例程。）

问题是我找不到正确的正则表达式模式来匹配多行以在 awk 或 sed 中使用。我创建的正则表达式模式适用于 Eclipse 和 TextWrangler 的搜索对话框，但不适用于 awk 或 sed。

这是我要删除的多行文本（当然，在**单独**调用 awk/sed 时）：

```
 @Id
@GeneratedValue(strategy=GenerationType.AUTO)
@Column(unique=true, nullable=false)
private String id; 
```

和

```
 public String getId() {
    return this.id;
}

public void setId(String id) {
    this.id = id;
} 
```

请注意，上面引用的代码中的每个非空行都以 \t 字符开头，即使粘贴到此处时它不存在。

例如，要删除 getter/setter 行，我尝试过

```
awk '!/\tpublic String getId\(\) \{\r\t\treturn this\.id;\r\t\}\r\r\tpublic void setId\(String id\) \{\r\t\tthis\.id = id;\r\t\}\r/' $file > temp.txt && mv temp.txt $file 
```

或缩短版

```
awk '!/^\tpublic String getId.*\r.*\r.*\r\r.*\r.*\r.*\r\r/' ... 
```

但两者都不起作用。

（这两种模式都可以在 Eclipse 或 TextWrangler 中找到要删除的行。）

例如，我只能删除单行

```
awk '!/^\tpublic String getId.*\r/' ... 
```

但这没有用，因为删除 "\t}\r" 会删除所有方法结尾和类结尾的花括号。

我在运行 OS X 10.8.2 的 Mac 上执行此操作，如果这有什么不同的话。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T22:51:50.543

默认情况下，awk 和 sed 是基于行的工具，因此您不能匹配多于一行。

我建议使用正则表达式识别第一行的范围和最后一行的偏移量，如下所示：

```
sed -e '/^\tpublic String getId/,+2 d' 
```

这将删除 line`public String getId`和以下两行。

# glassfish - Glassfish - 如何向集群中的所有实例广播 JMS 消息？

> ID：15278687
> 
> 赞同：0
> 
> 时间：2013-03-07T18:14:31.957
> 
> 标签：glassfish, ejb, jms, cluster-computing, message-driven-bean

我使用的是 Glassfish 3.1.2，并设置了一个包含一个节点和两个实例的集群。

我的应用程序中有一个消息驱动 bean，它订阅了我部署到集群的主题。

当我向主题发布消息时，我希望两个实例都接收消息。

但是，在实践中，我发现只有一个实例接收到该消息。

我相信我遇到了一个名为“共享订阅”的功能 [http://docs.oracle.com/cd/E18930_01/html/821-2438/gjzpg.html#MQAGgjzpg](http://docs.oracle.com/cd/E18930_01/html/821-2438/gjzpg.html#MQAGgjzpg)

该功能（默认启用）表示集群中具有相同客户端 ID 的 bean 是共享的，并且实际上只是一个订阅。

它说默认情况下，MDB 的客户端 ID 是它的名称，这意味着我的两个实例都使用相同的客户端 ID。

因此，除了完全禁用此功能之外，我想知道是否可以设置一个 MDB，以便每个实例使用不同的客户端 ID 订阅？这似乎有点棘手，因为两个实例都使用相同的 WAR 文件。我认为您可以在注释中设置客户端 ID，但我不确定是否可以在运行时更改...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:17:35.007

我不确定您为什么要完全禁用此功能。在您提供的链接中，它清楚地表明您根据 ActivationSpec/MDB 进行配置。据我了解，它只会影响您手头的MDB。

> 对于 MDB，将 ActivationSpec 属性 useSharedSubscriptionInClusteredContainer 设置为 false。使用与其他 ActivationSpec 属性完全相同的方式执行此操作，使用 MDB 本身或部署描述符 ejb-jar.xml 或 glassfish-ejb-jar.xml 中的注释。

但是您当然可以在运行时动态设置连接上的客户端 ID。请注意，您可能不得不自己处理 JMS 连接，而不是依赖容器管理的功能。

[http://docs.oracle.com/javaee/6/api/javax/jms/Connection.html#setClientID(java.lang.String)](http://docs.oracle.com/javaee/6/api/javax/jms/Connection.html#setClientID(java.lang.String))

# iphone - 如何控制广告横幅在屏幕上的显示位置？

> ID：15278694
> 
> 赞同：0
> 
> 时间：2013-03-07T18:15:07.470
> 
> 标签：iphone, ios, xcode, ipad, banner

早上好，

我正在尝试将广告横幅设置为出现在屏幕顶部或底部的某个位置，所以我一直在做的是这样的；

```
 if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {

        bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeSmartBannerPortrait];
        bannerView_.adUnitID = MY_BANNER_UNIT_ID;
        CGRect screenRect = [[UIScreen mainScreen] bounds];
        CGFloat screenWidth = screenRect.size.width;
        CGFloat screenHeight = screenRect.size.height;
        CGFloat screenXPos = (screenWidth /2);
        CGFloat screenYPos = screenHeight - 150;
        [bannerView_ setCenter:CGPointMake(screenXPos, screenYPos)];
        bannerView_.rootViewController = self;
        bannerView_.adUnitID = MY_BANNER_UNIT_ID;
        bannerView_.rootViewController = self;
        [self.view addSubview:bannerView_];

    }else{

        bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeSmartBannerPortrait];
        bannerView_.adUnitID = MY_BANNER_UNIT_ID;
        CGRect screenRect = [[UIScreen mainScreen] bounds];
        CGFloat screenWidth = screenRect.size.width;
        CGFloat screenHeight = screenRect.size.height;
        CGFloat screenXPos = (screenWidth /2);
        CGFloat screenYPos = screenHeight -480;
        [bannerView_ setCenter:CGPointMake(screenXPos, screenYPos)];
        bannerView_.rootViewController = self;
        bannerView_.adUnitID = MY_BANNER_UNIT_ID;
        bannerView_.rootViewController = self;
        [self.view addSubview:bannerView_]; 
```

它非常不整洁，并不能真正按我的意愿工作，例如，我希望广告横幅出现在任何设备（iPad/iPhone 等）的顶部约 150 像素处

我会更好地在界面生成器中创建横幅视图吗？但如果是这样的话，我将如何实现上面的代码呢？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:06:15.560

```
bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeSmartBannerPortrait];
        bannerView_.adUnitID = MY_BANNER_UNIT_ID;
       bannerView.frame = CGRectMake(0, 0, 320,150);
     [bannerView_ setCenter:CGPointMake(screenXPos, screenYPos)];
        bannerView_.rootViewController = self;
        bannerView_.adUnitID = MY_BANNER_UNIT_ID;
        bannerView_.rootViewController = self;
        [self.view addSubview:bannerView_]; 
```

# javascript - 在 CSS 无显示和表格列的显示块之间切换会创建一个奇怪的边框......为什么？

> ID：15278696
> 
> 赞同：1
> 
> 时间：2013-03-07T18:15:10.157
> 
> 标签：javascript, html, css

看看表格最后一列周围那个奇怪的边框......

![在此处输入图像描述](../Images/71549ee50d7bf19cc03b95447f01e806.png)

该表如下所示：

```
<table style="font-family: courier new; font-size: 0.75em" border="1" cellspacing="0" cellpadding="3">
<tbody>
   <tr id="tableheader" class="">
      <th title="id">id</th>
      <th title="old_name">old_name</th>
      <th title="new_name">new_name</th>
      <th class="edit" title="Edit Options" style="display: block; overflow: hidden;">Edit Options</th>
   </tr>
   <tr class="tableevenrow">
      <td data-col="id" valign="middle" align="left"><div>1</div></td>
      <td data-col="old_name" valign="middle" align="left"><div>taco</div></td>
      <td data-col="new_name" valign="middle" align="left"><div>bell</div></td>
      <td class="edit" data-col="editoptions" valign="middle" align="left" style="display: block; overflow: hidden;">
         <div class="row0 col3 col_editoptions">
            <div class="edit" style="display: block; overflow: hidden;">
               <select id="dropdown_0">
                  <option value="1">Confirm</option>
                  <option value="0">Decline</option>
               </select>
               <button id="submit_r0">Submit</button>
            </div>
         </div>
      </td>
   </tr> 
```

我的按钮基本上只是在这两种状态之间切换：

```
 $('.edit').css('display','none'); 
        $('.norm').css('display','block'); 

        $('.edit').css('display','block'); 
        $('.norm').css('display','none'); 
```

因此，当编辑类的任何内容设置为“无”时，屏幕上根本不会显示整个“编辑选项”列。这种切换有效。唯一的问题是，当显示编辑类时，该列周围有一个奇怪的边框。我想知道是否有人知道为什么以及如何解决它。我的按钮使用表格下方的编辑/规范类切换可见性（它们在 div 中），但边框不会出现在它们周围......

这是表格样式的 css ......它是继承的（有点）但我需要尽量避免改变它，即使是动态的：

```
 body          { background: #e8ccbb; }
   .tableheader  { background: #4d4e86; color: #ffffff; }
   .tableoddrow  { background: #c2bad4; }
   .tableevenrow { background: #c2c3c2; }
   #tableheader  { background: #4d4e86; color: #ffffff }
   #tableoddrow  { background: #c2bad4 }
   #tableevenrow { background: #c2c3c2 }
   #hiliterow    { background: #ffffff }
   .menu_color {
      background:#4d4e86;
      background-image:-webkit-gradient(linear,left top,left bottom,from(#c2bad4),to(#4d4e86));
      background:-webkit-linear-gradient(top,#c2bad4,#4d4e86);
      background:-moz-linear-gradient(top,#c2bad4,#4d4e86);
      background:-o-linear-gradient(top,#c2bad4,#4d4e86);
      background:-ms-linear-gradient(top,#c2bad4,#4d4e86);
      background:linear-gradient(top,#c2bad4,#4d4e86)
   } 
```

另外......旁注......我正在使用PHP来完成大部分工作，我绝不会将我自己描述为当前或过去的前端开发人员......也许是未来，但谁知道呢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:36:14.393

`display: table-cell`那是因为您正在触发块显示，但应该是那些

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:42:24.937

最好是使用一个按钮来显示和隐藏使用 jQuery 的单元格`.toggle()`。这是因为您不必为切换元素的“初始”显示而烦恼 - jQuery 为您完成。

```
$('#my_button').click(function(){
    $('#el_to_toggle').toggle();
}); 
```

实现： http: [//jsfiddle.net/Dr3Cm/](http://jsfiddle.net/Dr3Cm/)

参考资料：

*   [jQuery .toggle()](http://api.jquery.com/toggle/)

# bash - 新手：如何在 bash 脚本中包含重定向？

> ID：15278707
> 
> 赞同：1
> 
> 时间：2013-03-07T18:15:46.707
> 
> 标签：bash, io-redirection

我正在尝试在涉及输入重定向的 bash 命令提示符上编写一个单行 bash 脚本：

```
dbs$ for $f in *; do tr '\n' '' < $f; done 
```

但是“<”字符引起了问题。我是否需要以某种方式转义 < 字符？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:19:34.237

它应该读

```
dbs$ for f in *; do tr '\n' '' < $f; done 
```

内置函数将被迭代的`for`各个值（即`*`）绑定到变量，因此您不能要求 bash 在`for`.

* * *

编辑后；脚本看起来不错。您的问题是在其他地方引起的。

一方面，您的调用`tr`看起来是错误的：您可能的意思是`tr -d '\n'`.

# git - 获取后立即“分支......未完全合并”

> ID：15278711
> 
> 赞同：7
> 
> 时间：2013-03-07T18:15:56.160
> 
> 标签：git, github

以下对我来说毫无意义

```
% git clone $REPO_URL --branch dev wd
% cd wd
% git fetch origin master:master
From github.com:ghuser/someproj
 * [new branch]      master     -> master
% git branch -d master
error: The branch 'master' is not fully merged.
If you are sure you want to delete it, run 'git branch -D master'. 
```

请注意，上述错误消息发生在从远程仓库获取分支后*立即*`git branch -d master`发生的命令上。这是否意味着以某种方式损坏了？我无法弄清楚这是怎么发生的。*`master``origin`*

 ** * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T18:32:47.913

警告

```
branch is not fully merged 
```

当您尝试删除的分支未合并到另一个分支时出现。此警告可防止您在合并之前删除分支及其更改，因此您不会丢失更改。

在您的情况下，自从您收到消息以来，您的计算机中似乎没有分支“master”

```
* [**new branch**]      master     -> master 
```

`master`因此，当您下载了您所在的分支`dev`然后您尝试`git branch -d master`了但由于从 dev 的角度来看它没有合并您收到消息

您可以看到整个树，在`gitk --all`那里您将看到分支 master 是如何不合并到另一个的。因此消息。

如果您仍想删除它，只需使用`-D`命令

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-07T18:37:56.333

如果[tip of `A`]是B.`B``A`

因此，您得到的错误与您如何克隆 repo 或何时获取无关。这仅意味着“master”具有尚未包含在您当前分支“dev”中的提交。*

# c# - 在 web-api 中使用可选参数进行路由

> ID：15278714
> 
> 赞同：1
> 
> 时间：2013-03-07T18:16:10.147
> 
> 标签：c#, asp.net-web-api, asp.net-web-api-routing

使用 web-api 我去 /api/cat/orders/

我指定了以下路线和控制器方法。我希望使用“ApiRouteWithCategoryAndExtId”路由和“GetMessageByCategoryExtId”方法，因为我将“extid”设为可选。但它使用的是默认的 Get 方法。

（/api/cat/orders/id18 使用GetMessageByCategoryExtId，但是extid 不是可选的）

我究竟做错了什么？

路线：

```
config.Routes.MapHttpRoute(
    name: "ApiRouteUniqueId",
    routeTemplate: "api/def/{id}",
    defaults: new { id = RouteParameter.Optional, controller = "Default" }
);

config.Routes.MapHttpRoute(
    name: "ApiRouteWithCategoryAndExtId",
    routeTemplate: "api/cat/{category}/{extid}",
    defaults: new { extid = RouteParameter.Optional, controller = "Default"}
); 
```

控制器：

```
public string Get()

public HttpResponseMessage GetMessageById(int id)

public HttpResponseMessage GetMessageByCategoryExtId(
    string category, string extid) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:05:55.690

在这里，您需要为 指定默认值`extid`：

```
public HttpResponseMessage GetMessageByCategoryExtId(
    string category, string extid **= null**) 
```

如果未指定上述默认值，webapi 会尝试将操作参数与可用值进行严格匹配（通过路由参数或查询字符串值），并且由于此处您的 url`/api/cat/orders/`没有“extid”值，因此它是' 不存在于路由值中，因此 webapi 无法匹配到`GetMessageByCategoryExtId`.

# sql - 我可以让子查询返回多条记录吗？

> ID：15278717
> 
> 赞同：1
> 
> 时间：2013-03-07T18:16:29.493
> 
> 标签：sql, oracle10g, oracle11g

当我`ORA-01427: single-row subquery returns more than one row`转向运行以下查询时出现错误，知道如何解决这个问题吗？或者你认为我可能需要写一个游标来克服这个问题？请帮忙！

```
SLECT DISTINCT J.NAME
 FROM Q_jobs j, xx_po x
WHERE j.name IN
                CASE
                   WHEN x.name IS NOT NULL THEN
                      (select name from xx_po)                  
                ELSE
                      (SELECT DISTINCT j.name
                         FROM per_jobs
                        WHERE j.name not LIKE '%Des%')
                END
ORDER BY J.NAME 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:11:30.357

尝试这个 ）

```
SELECT DISTINCT J.NAME
 FROM Q_jobs j, xx_po x
WHERE (x.name IS NOT NULL and j.name IN (select name from xx_po)) 
    or (x.name IS NULL and j.name IN (
                         SELECT DISTINCT j.name
                         FROM per_jobs
                         WHERE j.name not LIKE '%Des%'))
ORDER BY J.NAME 
```

# google-visualization - 谷歌饼图大小选项

> ID：15278723
> 
> 赞同：0
> 
> 时间：2013-03-07T18:16:41.583
> 
> 标签：google-visualization, pie-chart

我正在使用[Google 饼图](https://developers.google.com/chart/interactive/docs/gallery/piechart)来可视化一些数据。我的问题是尺寸总是限制在 200px 高度。我试图找出不同的选择，但无济于事。即使我的原始容器（chart_div）设置为 500px 的高度，自动生成的子容器的高度也被限制为 200px：

```
<div id="chart_div" style="width: 900px; height: 500px; position: relative;">
    <div style="position: relative; width: 400px; height: 200px;" dir="ltr">
        <div style="position: absolute; left: 0px; top: 0px; width: 100%; height: 100%;">
            <svg width="400" height="200" style="overflow: hidden;">
                 ...
        </div>
    <div>
</div> 
```

我尝试添加一些选项，例如`chartArea:{left:20,top:0,width:"100%",height:"100%"}`，但这只会将图例推出 div，并且不会影响 div 的大小。

# api - 是否有 API 可以获取 gmail 过滤器列表并更新它们？

> ID：15278725
> 
> 赞同：6
> 
> 时间：2013-03-07T18:16:47.537
> 
> 标签：api, gmail, google-apps

Google Apps 有一个“ [Google Apps 电子邮件设置 API](https://developers.google.com/google-apps/email-settings/) ”，它允许[通过 API 调用创建新的邮件过滤器](https://developers.google.com/google-apps/email-settings/#creating_a_filter)。

是否有任何（可能未记录）方法来获取当前过滤器列表并更新它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-10T12:12:18.143

过滤器对象被添加到允许过滤器处理，包括检索、创建和删除的 API。

[https://developers.google.com/gmail/api/guides/filter_settings](https://developers.google.com/gmail/api/guides/filter_settings)

具体来说：

**列表过滤器**

```
GET https://www.googleapis.com/gmail/v1/users/userId/settings/filters 
```

*返回过滤器*对象的 JSON 列表

**检索特定过滤器**

```
GET https://www.googleapis.com/gmail/v1/users/userId/settings/filters/id 
```

返回单个 JSON*过滤器*对象

**删除特定过滤器**

```
DELETE https://www.googleapis.com/gmail/v1/users/userId/settings/filters/id 
```

**创建过滤器**

```
POST https://www.googleapis.com/gmail/v1/users/userId/settings/filters 
```

在请求正文中使用 JSON 编码的*过滤器。*

虽然 REST URL 在地址中有 v1，但它们是从当前文档链接的。另请注意，GMail API 迁移目前正在进行中，已弃用的 API 将于**2016 年 7 月**停止运行。请记住这一点，因为 API 可能会更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:59:06.707

不，没有 API 可以检索过滤器，只能创建新的（如您所见）。

但是，用户可以从 UI 导出所有过滤器，然后手动将它们重新导入另一个帐户：

[使用过滤器](http://support.google.com/mail/bin/answer.py?hl=en&answer=6579)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-07-19T20:02:22.960

我没有尝试过，但根据 Google Admin SDK 文档，看起来你可以： [https ://developers.google.com/admin-sdk/email-settings/#retrieving_labels](https://developers.google.com/admin-sdk/email-settings/#retrieving_labels)

# javascript - 正则表达式 - 格式化块中的文本 - IM

> ID：15278728
> 
> 赞同：4
> 
> 时间：2013-03-07T18:16:47.767
> 
> 标签：javascript, regex, algorithm, instant-messaging

您好，我正在尝试找出一个正则表达式来替换 innerHTML 块中的文本，以提供类似于 Google IM 操作的文本的本地格式。

```
Where: 
_Italics_
!Inderline!
*Bold*
-Strike- 
```

部分条件是文本必须由符号包裹，但如果紧随其后有一个空格，则触发条件无效；所以 * bold* 不会加粗，并且： * notbold *but this is bold*

innerHTML 将具有已转换为 href 的 URL，因此为了不弄乱它们，我在正则表达式的前面添加了以下内容。

```
 (?!(?!.*?<a)[^<]*<\/a>) 
```

以下 javascript 不会捕获所有结果，并且会根据我进行替换的顺序产生不同的结果。

```
var boldPattern          = /(?!(?!.*?<a)[^<]*<\/a>)\*([^\s]+[\s\S]?[^\s]+)\*([\s_!-]?)/gi;
var italicsPattern       = /(?!(?!.*?<a)[^<]*<\/a>)_([^\s]+[\s\S]?[^\s]+)_([\s-!\*]?)/gi;
var strikethroughPattern = /(?!(?!.*?<a)[^<]*<\/a>)-([^\s]+[\s\S]?[^\s]+)-([\s_!\*]?)/gi;
var underlinePattern     = /(?!(?!.*?<a)[^<]*<\/a>)!([^\s]+[\s\S]?[^\s]+)!([\s-_\*]?)/gi;
str = str.replace(strikethroughPattern, '<span style="text-decoration:line-through;">$1</span>$2');
str = str.replace(boldPattern, '<span style="font-weight:bold;">$1</span>$2');
str = str.replace(underlinePattern, '<span style="text-decoration:underline;">$1</span>$2');
str = str.replace(italicsPattern, '<span style="font-style:italic;">$1</span>$2'); 
```

3 选择 4 的测试数据如下所示：

```
1 _-*ISB*-_ 2 _-!ISU!-_ 3 _*-IBS-*_ 4 _*!IBU!*_
5 _!-IUS-!_ 6 _!*IUB*!_ 7 -_*SIB*_- 8 -_!SIU!_-
9 -*_SBI_*- 10 -*!SBU!*- 11 -!_SUI_!- 12 -!*SIB*!-
13 *_-BIS-_* 14 *_!BIU!_* 15 *-_BSI_-* 16 *-!BSU!-*
17 *!_BUI_!* 18 *!-BUS-!* 19 !_-UIS-_! 20 !_*UIB*_!
21 !-_USI_-! 22 !-*USB*-! 23 !*_UBI_*! 24 !*-UBS-*! 
```

您甚至可以像选择所有 4 种模式的 24 种排列中的任何一种一样拥有 4 级深度嵌套样式跨度，例如：

```
 -!_*SUIB*_!- 
```

谢谢我已经为此奋斗了大约一个星期。

避免 Mozilla 对“标记不应`innerHTML`动态传递”的不良反馈的奖励积分。（我不明白当一个人改变格式时这怎么可能）。

感谢一百万个正则表达式向导！我欠你的。

沃尔夫。

**更新**

使用与上面相同的 href 检测和 @talemyn 帮助，我们现在处于：

```
var boldPattern          = /(?!(?!.*?<a)[^<]*<\/a>)\*([^\s][^\*]*)\*/gi;
var italicsPattern       = /(?!(?!.*?<a)[^<]*<\/a>)_([^\s][^_]*)_/gi;
var strikethroughPattern = /(?!(?!.*?<a)[^<]*<\/a>)-([^\s][^-]*)-/gi;
var underlinePattern     = /(?!(?!.*?<a)[^<]*<\/a>)!([^\s][^!]*)!/gi;
str = str.replace(strikethroughPattern, '<s>$1</s>');
str = str.replace(italicsPattern, '<span style="font-style:italic;">$1</span>');
str = str.replace(boldPattern, '<strong>$1</strong>');
str = str.replace(underlinePattern, '<u>$1</u>'); 
```

这似乎涵盖了一个极端的例子：

```
 _wow *a real* !nice *person! on -stackoverflow* figured- it out_ cool beans. 
```

我认为可以使用样式跨度并进行正则表达式回溯以确定先前未关闭的跨度，关闭它，使用旧格式和新属性打开一个新跨度，在假定时关闭并打开一个新跨度以完成格式化..但是正如@NovaDenizen 指出的那样，使用正则表达式可能会变得混乱或不可能。

谢谢你的帮助。如果有任何改进，请告诉我。注意：我无法使用，因为网站上的 CSS 不会呈现它。可以超载吗？[这是一个 firefox/greasemonkey/chrome 插件]

**更新（几乎）最终**

正如@MikeM 正确陈述的那样，使用我的“损坏”测试短语作为示例，无论嵌套是否正确，它都会在Google IM 中正确呈现（减去下划线）。因此，查看 Google IM 中文本的 HTML 输出时，我注意到它很高兴没有预先格式化字符串，而是根据需要简单地进行了替换。

因此，在查看了使用 resetcss 删除的站点代码后，我需要通过 javascript 插入 CSS 格式。Stackoverflow 来救援。 `https://stackoverflow.com/questions/707565/how-do-you-add-css-with-javascript`和`https://stackoverflow.com/questions/20107/yui-reset-css-makes-strongemthis-not-work-em-strong`

所以我的解决方案现在看起来像：

```
....
var css = document.createElement("style");
css.type = "text/css";
css.innerHTML = "strong, b, strong *, b * { font-weight: bold !important; } \
            em, i, em *, i * { font-style: italic !important; }";
document.body.appendChild(css);
 ....
var boldPattern          = /(?!(?!.*?<a)[^<]*<\/a>)\*([^\s][^\*]*)\*/gi;
var italicsPattern       = /(?!(?!.*?<a)[^<]*<\/a>)_([^\s][^_]*)_/gi;
var strikethroughPattern = /(?!(?!.*?<a)[^<]*<\/a>)-([^\s][^-]*)-/gi;
var underlinePattern     = /(?!(?!.*?<a)[^<]*<\/a>)!([^\s][^!]*)!/gi;
str = str.replace(strikethroughPattern, '<s>$1</s>');
str = str.replace(italicsPattern, '<i>$1</i>');
str = str.replace(boldPattern, '<b>$1</b>');
str = str.replace(underlinePattern, '<u>$1</u>');
..... 
```

它`tada`主要是有效的！

**更新最终解决方案** 在最后一刻对@MikeM 的锚元素检查进行了简化并结合了另一个[stackoverflow](https://stackoverflow.com/questions/15288276/regex-query-help-lookbehind)帖子的条件，我们已经得到了一个完整的工作解决方案。

我还需要添加一个带有结束符号的单字符样式的检查，因为我们要并排替换触发器标记。

正如@acheong87 提醒的那样，小心 \w 因为它包含`_`, 所以它被添加到除删除线模式之外的所有包装条件中。

```
var boldPattern          = /(?![^<]*<\/a>)(^|<.>|[\s\W_])\*(\S.*?\S)\*($|<\/.>|[\s\W_])/g;
var italicsPattern       = /(?![^<]*<\/a>)(^|<.>|[\s\W])_(\S.*?\S)_($|<\/.>|[\s\W])/g;
var strikethroughPattern = /(?![^<]*<\/a>)(^|<.>|[\s\W_])-(\S.*?\S)-($|<\/.>|[\s\W_])/gi;
var underlinePattern     = /(?![^<]*<\/a>)(^|<.>|[\s\W_])!(\S.*?\S)!($|<\/.>|[\s\W_])/gi;
str = str.replace(strikethroughPattern, '$1<s>$2</s>$3');
str = str.replace(italicsPattern, '$1<i>$2</i>$3');
str = str.replace(boldPattern, '$1<b>$2</b>$3');
str = str.replace(underlinePattern, '$1<u>$2</u>$3'); 
```

非常感谢大家（@MikeM、@talemyn、@acheong87 等）

沃尔夫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:27:31.263

试试这些：

```
var boldPattern          = /\*([^\s][^\*]*)\*/gi;
var italicsPattern       = /_([^\s][^_]*)_/gi;
var strikethroughPattern = /-([^\s][^-]*)-/gi;
var underlinePattern     = /!([^\s][^!]*)!/gi; 
```

虽然，在`replace`, 不要使用，`$2`因为在这些正则表达式模式中没有第二个匹配项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:11:17.020

以下不应创建不正确的嵌套跨度

```
var old;
var rx = /(?![^<]*(?:>|<\/a>))([!*_-])((?!\1)[^<>\s][^<>]*?)\1/g;

while ( old != str ) {
    old = str;
    str = str.replace( rx, function ( $0, $1, $2 ) {
        var style = $1 == '!' ? "text-decoration:underline"
                  : $1 == '*' ? "font-weight:bold"
                  : $1 == '_' ? "font-style:italic"
                              : "text-decoration:line-through";

        return  '<span style="' + style + ';">' + $2 + '</span>'
    } );
} 
```

因为它首先替换了外部分隔符，所以绝不应该在分隔符内插入任何跨度。

应要求提供进一步解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T11:41:00.387

我建议您从负面预测中删除内部负面预测：

```
/(?!(?!.*?<a)[^<]*<\/a>)_it_/.test( ' _it_ <a></a>' );         // true  (correct)
/(?!(?!.*?<a)[^<]*<\/a>)_it_/.test( '<a> _it_ </a>' );         // false (correct)
/(?!(?!.*?<a)[^<]*<\/a>)_it_/.test( '<a> _it_ </a> <a></a>' ); // true  (wrong)

/(?![^<]*<\/a>)_it_/.test( ' _it_ <a></a>' );                  // true  (correct)
/(?![^<]*<\/a>)_it_/.test( '<a> _it_ </a>' );                  // false (correct)
/(?![^<]*<\/a>)_it_/.test( '<a> _it_ </a> <a></a>' );          // false (correct) 
```

# javascript - 使用字符串名称调用 javascript 函数

> ID：15278734
> 
> 赞同：3
> 
> 时间：2013-03-07T18:17:09.677
> 
> 标签：javascript

正确解释我的意思有点复杂，所以请尝试理解我:)

我希望能够在 javascript 中使用作为参数发送的文本来调用元素方法/函数。例如：

```
function CallAFunction(function_name){
 document.getElementById('some_id').function_name();
} 
```

正如您在上面的示例中看到的，我想发送 function_name 作为参数，它是字符串类型或简单文本。那么我如何使用这个函数名来调用它呢？

或者，请向我推荐一些可以帮助我获得所需的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T18:18:40.237

使用括号表示法；

```
document.getElementById('some_id')[function_name](); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:27:56.327

使用字符串调用函数名：

```
var myFunc = window[myFuncName]; 
```

你可以像这样发送参数：

```
<button onclick="myFunction('Harry Potter','Wizard')">Try it</button>

<script>
function myFunction(name,job)
{
alert("Welcome " + name + ", the " + job);
}
</script> 
```

# css - CSS：对齐未知大小的元素

> ID：15278742
> 
> 赞同：0
> 
> 时间：2013-03-07T18:17:40.857
> 
> 标签：css, html5-video

我正在构建一个基于[https://apprtc.appspot.com/](https://apprtc.appspot.com/)的视频聊天应用程序（要运行此应用程序，您需要在两个单独的选项卡中打开相同的 URL）。

我想对此参考应用程序进行两处更改。

1.  在浏览器窗口中居中视频。
2.  对齐大视频右下角的小视频（类似于Skype）。

我设法使用[http://css-tricks.com/centering-in-the-unknown/](http://css-tricks.com/centering-in-the-unknown/)解决了＃1，但我无法弄清楚＃2。问题在于大视频大小是动态的（WebRTC 会根据 CPU 和带宽条件随时间改变其大小）。它还会随着浏览器窗口大小的调整（适合查看）而增长/缩小。当大视频改变大小时，小视频会失去对齐。

**当后者的大小随时间变化时，如何将小视频与大视频的右下角对齐？**

**更新**：请提供重叠视频的解决方案，而不仅仅是盒子。此外，请确保视频随着浏览器窗口的增大/缩小而增大/缩小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:33:16.587

您可以使用 CSS 定位：

HTML

```
<div id="container">
    <div id="big_video">
        test
         <div id="small_video">test2</div>
    </div>

</div> 
```

CSS

```
#big_video{
    border: 1px solid black;
    width: 500px;
    height: 500px;
    position: relative;
}

#small_video{
    border: 1px solid black;
    width: 200px;
    height: 200px;
    position: absolute;
    bottom: 0;
    right: 0;
} 
```

小提琴：http: [//jsfiddle.net/FhtCP/12/](http://jsfiddle.net/FhtCP/12/)

# amazon-web-services - Amazon Web Services 或本地的 Apache Nutch

> ID：15278745
> 
> 赞同：0
> 
> 时间：2013-03-07T18:17:56.167
> 
> 标签：amazon-web-services, nutch

我想学习 Apache Nutch，我在 Amazon Web Services (AWS) 有一个帐户。我在 AWS 有三台机器，其中一台是微型的，另一台是小型的，另一台是中型的。我想从小型开始，我会在上面安装 Nutch、Hadoop 和 Hbase。我的机器上有 Centos 6。

这里有一个问题，但我没有问：[Nutch 2.1 (HBase, SOLR) with Amazon Web Services](https://stackoverflow.com/questions/14139296/nutch-2-1-hbase-solr-with-amazon-web-services)

我想知道哪种方法更好。我想将它们安装在小型机器上。之后我想添加微型。另一方面，我对 Nutch 没有任何经验，也许我应该在本地工作，或者是否有可能同时使用我的机器和 AWS（是否收费更高，即从 AWS 复制数据可能会收费。）

当我想在我的 Nutch 中实现一个包装器时，我应该将它安装在我的本地（以获得源代码）并在 AWS 上运行它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:47:05.290

听起来你面临着一条陡峭的学习曲线。

一方面，你承认你只是在学习 Nutch，所以我建议你将 CentOS 安装在家里的物理机器上并在那里玩。

另一方面，您正在考虑使用微型 AWS 实例，这对于运行像 Nutch 这样的 CPU/内存密集型应用程序没有用处。**在此处阅读有关[AWS 微实例的信息](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/concepts_micro_instances.html)。**

我的建议是在家中坚持使用单个物理盒解决方案，并在继续使用 AWS 实例之前编写解决方案的脚本。

# php - 此代码中使用了哪种语言

> ID：15278747
> 
> 赞同：2
> 
> 时间：2013-03-07T18:17:57.693
> 
> 标签：php, content-management-system, smarty

我的 CMS 系统有问题。我有这样的代码：

```
{if}
   {$hello}
{/if} 
```

你能告诉我用什么语言来写这段代码吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T18:19:23.910

它看起来像带有 Smarty 模板引擎的 PHP：

[http://www.smarty.net/docs/en/language.syntax.functions.tpl](http://www.smarty.net/docs/en/language.syntax.functions.tpl)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:20:03.097

在我看来，它就像 Smarty 语法，即 PHP。

[聪明的](http://www.smarty.net/docsv2/en/language.function.if.tpl)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T18:20:21.077

看起来像[Smarty 模板引擎](http://www.smarty.net/docs/en/language.basic.syntax.tpl)。

# ruby - Ruby - 意外的 tIDENTifier，期待 $end

> ID：15278748
> 
> 赞同：1
> 
> 时间：2013-03-07T18:17:58.517
> 
> 标签：ruby, syntax

我刚开始学习Ruby。我正在其中创建一个简单的程序，我仍然不确定如何使用它。这是我的代码：

```
=begin
Filename: GameCompanyPoem.rb
Program Name: Poem Generator
Version 1.0
Created: March 7th, 2013
Purpose: To generate a poem based on key words given by the user
=end
print 'The following program will ask you to input words. Based on the words you input it will generate a poem. Now, please enter a name. '
name = gets.chomp
print 'Please enter a mammal. '
mammal = gets.chomp
print 'Now please enter a colour. '
colour1 = gets.chomp
print 'We are almost done! Please enter a place or location now. '
place = gets.chomp
print 'Now enter a verb. '
verb1 = gets.chomp
print 'And another verb. '
verb2 = gets.chomp
print 'Your poem will now be generated. Press enter to continue.
space = gets.chomp
print 'Someone by the name of ' + name + 'had a little' + mammal + ', little ' + mammal + ', little ' + mammal + ',' + name + 'had a little ' + mammal + 'its fleece was' + colour + 'as snow. It followed her to ' + place + 'one day, ' + place + 'one day, ' + place + 'one day, it made the children ' + verb1 + 'and ' + verb2 + 'to see a ' + mammal + 'at' + place + '."' 
```

当我运行它时，最后一个方法（打印）中的每个空格都有这个错误：

意外的 tIDENTifier，期待 $end

在每个空间，如果我填写它，它就会消失，但它会进入下一个空间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:34:31.843

包括 Ruby 在内的许多语言中的一个绝妙技巧，称为插值

```
print "Someone by the name of #{name} had a little #{mammal}, little #{mammal}, little #{mammal}, had a little #{mammal} its fleece was #{colour} as snow. It followed her to #{place} one day, #{place} one day, #{place} one day, it made the children #{verb1} and #{verb2} to see a #{mammal} at #{place}." 
```

嗯，它可能不再押韵了。

还有一点。查找 Ruby 插值以获取详细信息。但基本上 ruby​​ 会遇到 #{something} 它用某事的结果替换它。

`print "1 + 2 = #{1 + 2}"`将打印

1 + 2 = 3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:20:16.340

尝试：

```
print 'Your poem will now be generated. Press enter to continue.'
print 'Someone by the name of ' + name + 'had a little' + mammal + ', little ' + mammal + ', little ' + mammal + ',' + name + 'had a little ' + mammal + 'its fleece was' + colour1 + 'as snow. It followed her to ' + place + 'one day, ' + place + 'one day, ' + place + 'one day, it made the children ' + verb1 + 'and ' + verb2 + 'to see a ' + mammal + 'at' + place + '.' 
```

# sql - 仅返回相关组中的第一项

> ID：15278749
> 
> 赞同：1
> 
> 时间：2013-03-07T18:17:59.677
> 
> 标签：sql, oracle

我有一个这样的数据块：

```
RW |  PK   A    B    C    D
============================
1  |  1    aa   123  x    99
2  |  2    aa   234  v    98
3  |  3    bb   321  z    11
4  |  4    bb   210  w    91
5  |  5    cc   456  y    55 
```

我怎样才能抓住每组的第一个项目（由 A 列标识），像这样？

```
RW |  A    B    C    D
=======================
1  |  aa   123  x    99
2  |  bb   321  z    11
3  |  cc   456  y    55 
```

我可以`GROUP BY`或使用`DISTINCT`，但这对于我正在查看的内容非常低效，而运行直接列表所需的时间不到 100 毫秒。由于相关值可能不同，因此上述两个选项也可能在 A 列中产生不止一次的项目实例。

换句话说，

```
SELECT MYTABLE.A, MYTABLE.D, MYTABLE.D, MYTABLE.D 
FROM MYTABLE 
```

非常快（不到一秒），而

```
SELECT MYTABLE.A, MYTABLE.D, MYTABLE.D, MYTABLE.D 
FROM MYTABLE
GROUP BY MYTABLE.A, MYTABLE.D, MYTABLE.D, MYTABLE.D 
```

和

```
SELECT DISTINCT MYTABLE.A, MYTABLE.D, MYTABLE.D, MYTABLE.D 
FROM MYTABLE 
```

需要更长的时间（几分钟，但我没有让它完成）。

我不需要聚合函数（`COUNT`,`SUM`等），只需要一个列表，每个项目一次。A 列中每个值的出现次数各不相同，所以我不能只抓取每个*x*行。

**为什么我不直接运行列表并使用 Excel 或类似的东西进行排序？**我正在查看要返回的几百万条记录，但我无法使用我熟悉的任何软件处理这么多记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T18:21:24.513

听起来你想要类似的东西

```
SELECT pk,
       a,
       b,
       c,
       d
  FROM( SELECT pk,
               a,
               b,
               c,
               d,
               row_number() over (partition by a order by pk asc) rnk
          FROM your_table )
 WHERE rnk = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:27:04.833

这个也试试。。

```
select * from table where rowid in (select min(rowid) from table group by a); 
```

# arrays - 尝试将 2 列输入文件读入两个单独的数组并遇到很多麻烦

> ID：15278751
> 
> 赞同：3
> 
> 时间：2013-03-07T18:18:10.130
> 
> 标签：arrays, fortran

这可能是一个微不足道的问题，但由于某种原因，我在解决这个问题时遇到了很多麻烦。我正在从一个输入文件中读取，该文件必须在两列中包含一组数字。第一列是表示时间的整数列表（例如 0530）。第二列是 5 位长的真实数据列表，小数点后 3 位（例如 19.213）。两列之间有 3 个空格。我想把它读入我的程序到单独的数组中。我已经在最大可能长度（1440）处统计了数组的维度，如下所示。我想最终在函数中使用这个数组，但我什至无法让输入正常工作。谢谢您的帮助。

```
PROGRAM readtest1
IMPLICIT NONE

INTEGER, DIMENSION(1440) :: t
REAL, DIMENSION(1440) :: tuvr

OPEN(1, FILE='AP2412.tv', STATUS='old', ACTION='read')
OPEN(2, FILE='timetuvr.txt', STATUS='replace', ACTION='write')
READ(1,100) t, tuvr
100 FORMAT(I5, F8.3)

WRITE(2,100) t, tuvr

END PROGRAM readtest1 
```

哦，当我编译并运行程序时，我收到错误“FORTRAN 运行时错误：在格式化传输中第 2 项预期为 REAL，得到 INTEGER）我相信 fortran 正在直接读取列，这导致了这个问题，但我”我不确定如何解决它。我需要双循环吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:34:37.057

`read (...) t, tuvr`在一个块中一次读取整个数组。您想一次读取一个元素，因为这就是它们的归档方式。像这样：

```
do i=1, 1440
   read (1, '(i5,f8.3)' ) t(i), tuvr(i)
end do 
```

根据文件中的数字是否完全在列中，您可能会发现有必要使用 list-directed IO: `read (1, *) t(i), tuvr(i)`。这种方法非常灵活且易于使用。

如果文件可能少于 1440 行，请尝试这样的操作，它会检测文件结尾并计算读取的行数：

```
program test

use, intrinsic :: iso_fortran_env

implicit none

integer, parameter :: ArrayLen = 1440
INTEGER, DIMENSION(ArrayLen) :: t
REAL, DIMENSION(ArrayLen) :: tuvr
integer :: i, ReadCode, num

num = 0
ReadLoop: do i=1, ArrayLen

   read (1, '(i5,f8.3)', iostat=ReadCode ) t(i), tuvr(i)

   if ( ReadCode /= 0 ) then
      if ( ReadCode == iostat_end ) then
         exit ReadLoop
      else
         write ( *, '( / "Error on read: ", I0 )' )  ReadCode
         stop
      end if
   end if

   num = num + 1

end do ReadLoop

end program test 
```

# c# - 如何防止“该进程无法访问文件'Bla.txt'，因为它正在被另一个进程使用”错误？

> ID：15278752
> 
> 赞同：0
> 
> 时间：2013-03-07T18:18:11.093
> 
> 标签：c#, file-io, process, io

我有这段代码可以将字节数组写入文本文件以进行调试：

```
string path = @"\LOG\WrittenData.txt";
. . .
if( bWriter != null )
{
    if( bWriter.BaseStream.CanWrite )
    {
        bWriter.Write( readbuffer, 0, numberOfBytesRead );
        //TODO: Remove after testing
        WriteByteArrayToFile(path, readbuffer);
    }
} 
```

. . .

```
public static bool WriteByteArrayToFile(string fileName, byte[] readBuffer) 
{ 
    try
    {
        FileStream _FileStream = new FileStream(fileName, FileMode.Append, FileAccess.Write);
                _FileStream.Write(readBuffer, 0, readBuffer.Length);
    }
    catch (Exception ex)
    { 
        MessageBox.Show(ex.Message);
    } 
    return false;
} 
```

...不幸的是，它在标题中显示错误消息而失败。

## 更新

好的，我尝试尝试在 finally 中关闭的建议。但是，它不会编译！下面显示的是，注释掉的不是！什么！？！

```
try
{
    // Open file for reading. // changed from FileMode.Create to FileMode.Append
    System.IO.FileStream _FileStream = new FileStream(fileName, FileMode.Append, FileAccess.Write);
    _FileStream.Write(readBuffer, 0, readBuffer.Length);
    _FileStream.Close();
}   
finally
{
    ;//_FileStream.Close(); <-- won't compile - "The type or namespace name '_FileStream' could not be found (are you missing a using directive or an assembly reference?)"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:20:12.250

显然，该文件以不允许写入文件的模式打开。关闭那个东西。

如果您不确定打开的是哪个进程，您可以使用 Process Explorer 找到它

[http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:20:48.277

可能是您自己的程序使文件保持打开状态。确保每次打开文件时都关闭它？

如果您不确定这一点，请发布更多代码，从您发布的内容来看，您似乎打开同一个文件两次而不关闭它。

你有`bWriter`然后你在`WriteByteArrayToFile`没有关闭的情况下再次打开它。

# javascript - 关于更改视图并将数组放入集合的问题 Meteor

> ID：15278756
> 
> 赞同：1
> 
> 时间：2013-03-07T18:18:19.737
> 
> 标签：javascript, meteor

我有两个关于 Meteor 框架的问题

首先，如何将数组放入 Meteor 集合中？我怎样才能将价值观推入其中？

其次，当我有一个按钮并单击它时，如何更改当前视图？这是通过隐藏和显示模板吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:36:36.240

使用[$addToSet](http://docs.mongodb.org/manual/reference/operator/addToSet/)将值推送到数组中：

```
var coll = new Meteor.Collection;
coll.insert({myArray: []});
coll.update({}, {$addToSet: {myArray: "myNewValue"}}); 
```

有很多方法可以更改视图，但一种简单的方法是使用`Session`并检查它是否在您的模板中具有值：

```
<template name="mytemplate">
  <button>Say hello</button>
  {{#if sayHello}}<p>Hello</p>{{/if}}
</template>

Template.mytemplate.events({
  "click button": function() {
    Session.set("sayHello", true);
  }
});

Template.mytemplate.sayHello = function() {
  return Session.equals("sayHello", true);
} 
```

# ruby - 如何修改给定名称的变量的值

> ID：15278761
> 
> 赞同：0
> 
> 时间：2013-03-07T18:18:42.817
> 
> 标签：ruby

我希望有一个接受字符串的方法，然后用该字符串的名称更新一个变量。这是我尝试的一个例子：

```
@other_class = OtherClass.new()

def change_variable(variable_string)
  self.@other_class.send.variable_string += 1
end 
```

我收到错误消息：

> 语法错误，意外的 tIVAR

在上述方法中使用“发送”之前的指针。有没有人有任何建议来完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:28:31.220

你可能想要 instance_variable_set [http://ruby-doc.org/core-2.0/Object.html#method-i-instance_variable_set](http://ruby-doc.org/core-2.0/Object.html#method-i-instance_variable_set)

我认为使用变量的语法是：

```
other_var = ('@' + variable_string).to_sym

@other_class.instance_variable_set( other_var, @other_class.instance_variable_get( other_var ) + 1 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:31:01.993

`self`直接的语法错误是您使用`@`错误。

任何一个都可以，但不能相互结合。

所以在你的情况下`self.other_class.send...`会很好，但是您不能将其声明为`@`. 就像那样`@`，但你不能这样做`self`。

这些是为了做不同的事情，这些是

`@`是一个实例变量，`self`但不同的是 using直接`@`调用属性`other_class`到哪里`self`调用方法的位置`other_class`。

所以`@`，getter 和 setter 合二为一，因此您可以这样做

`@other_class = my_milk_man`至于在哪里

`self.other_class` `->` `self.other_class (as getter)`,

`self.other_class = my_milk_man`-> `self.other_class= (as setter)`。

# business-intelligence - 带有加载脚本的 Qlikview 计算字段

> ID：15278763
> 
> 赞同：1
> 
> 时间：2013-03-07T18:18:46.030
> 
> 标签：business-intelligence, pivot-table, qlikview

我目前在 Qlikview 数据透视表中使用以下计算字段。

```
=if([Event Type] = 'PO',date(MonthStart([EvtDt.Date Code]-15), 'YYYY-MMM'),if([Event Type]   = 'WO',date(MonthStart([EvtDt.Date Code]-50), 'YYYY-MMM'), if([Event Type] = 'BFT PLAN',date(MonthStart([EvtDt.Date Code]), 'YYYY-MMM')))) 
```

是否可以预先计算该字段，可能在 LOAD 脚本中，以便数据透视表中的字段只是日期值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:49:49.883

建议在加载脚本中预先计算这一点，以提高较大数据量的 UI 性能，它还提高了可维护性，因为您可以在整个 UI 中重用该字段，而无需将逻辑存储在多个位置（即多个图表上）。

如果没有看到您的数据结构，很难为您提供确切的结构，但是，假设您在加载期间内存表中的两个字段都可用，您应该能够扩展您的加载脚本以将计算作为附加字段包含在内：

```
LOAD 
    *
    ,if([Event Type] = 'PO',date(MonthStart([EvtDt.Date Code]-15), 'YYYY-MMM'),if([Event Type]   = 'WO',date(MonthStart([EvtDt.Date Code]-50), 'YYYY-MMM'), if([Event Type] = 'BFT PLAN',date(MonthStart([EvtDt.Date Code]), 'YYYY-MMM')))) as [My New Field]
INLINE [
    Event Type,EvtDt.Date Code,Value
    PO,01/01/2013,1234
    WO,01/01/2013,1234
    BFT PLAN,01/01/2013,1234
]; 
```

# matlab - Matlab中的有限和

> ID：15278764
> 
> 赞同：0
> 
> 时间：2013-03-07T18:18:51.230
> 
> 标签：matlab, sum, rows, octave

嗨，可以说我的矩阵大小为 5x5。

```
B=[1 2 3 4 5; 10 20 30 40 50; 100 200 300  400 500; 1000 2000 3000 4000 5000; 10000 20000 30000 40000 50000]; 
```

我如何使用函数 sum，对 2 到 4 之间的行求和并得到结果：

```
A = [1110;2220;3330;4440] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T18:25:04.493

You'll find some useful information about matrix indexing in the documentation at [http://www.mathworks.co.uk/help/matlab/math/matrix-indexing.html](http://www.mathworks.co.uk/help/matlab/math/matrix-indexing.html)

To illustrate your example, you can use B(2:4,:) to retreive the following:

```
ans =
          10          20          30          40          50
          100         200         300         400         500
          1000        2000        3000        4000        5000 
```

You can then use the sum function as follows to achieve your desired result:

```
A = sum(B(2:4,:)) 
```

I hope this helps!

All the best,

Matt

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:22:36.867

```
MATLAB>> sum(B(2:4,1:4))

ans =

        1110        2220        3330        4440 
```

如果要转置结果，`'`请在末尾添加。

# css - 尽管有可用空间，但 Div 仍向下移动

> ID：15278771
> 
> 赞同：1
> 
> 时间：2013-03-07T18:19:13.983
> 
> 标签：css, html, layout

我准备在我的页面上尖叫，感觉就像一场真正的战斗。我正在尝试为 html 应用程序获取完整的页面布局。我试图让两个主要的 div 并排，我可以用 js 隐藏。我在每个 div 中也有一个 44px 高的标题。我的问题是我似乎无法阻止大量内容流入第一个 div，即使隐藏了溢出等。我不能发布所有代码，但我应该能够发布相关部分。大部分代码与问题无关。我制作了一个[JSfiddle](http://jsfiddle.net/gGt9S/)只是为了让它更容易看到。提前致谢。哦，还有一些关于让我投票支持答案的技巧。不要试图改变列宽，我需要它们灵活的边界。提前致谢！

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="style.css" rel="stylesheet">
    <title>Stack Overflow</title>
</head>
<body>
    <div id="page-holder">
        <div id="main-menu" class ="menu-width">
            <div class="wide vert-center-right header large">
                <div>
                <input id="search" type="text" class="search"/>
                <img class="visible-phone" src="css/images/logo.png" />
                </div>
            </div>
            <div id="menu-body" class="menu-body">
                <button class="wide small vert-center-left">Push Me</button>
            </div>
        </div>
        <div id="main-view" class="view-width">
            <div id="view-header" class="header view-header vert-align-left">
                <a href="#" class="visible-phone" onclick="resized()"><img class="plain" src="css/images/header-icon-back-18x18.png"/></a>
                <img src="css/images/header-logo.png" />
            </div>
            <div id="view-body" class="view-body">
                Large block of text that I want to not wrap into menu column. Large block of 
                text that I want to not wrap into menu column. Large block of text that I want 
                to not wrap into menu column. Large block of text that I want to not wrap into 
                menu column. Large block of text that I want to not wrap into menu column. 
                Large block of text that I want to not wrap into menu column. Large block 
                of text that I want to not wrap into menu column. Large block of text that 
                I want to not wrap into menu column. Large block of text that I want to not 
                wrap into menu column. Large block of text that I want to not wrap into menu 
                column. Large block of text that I want to not wrap into menu column. Large 
                block of text that I want to not wrap into menu column. Large block of text 
                that I want to not wrap into menu column. Large block of text that I want to 
                not wrap into menu column. Large block of text that I want to not wrap into 
                menu column. Large block of text that I want to not wrap into menu column. 
                Large block of text that I want to not wrap into menu column. 
            </div>
        </div>
        <div style="clear:both"></div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:33:18.033

那是因为你只是漂浮`#main-menu`而不是`#main-view`. 在这种情况下， 的内容`#main-view`将环绕`#main-menu`项目。

如果您想阻止右侧的内容在左侧菜单下方向左流动，只需将浮点数分配给`#main-view`，或使用等于宽度加上右侧边距的填充`#main-menu`。

对于后一种解决方案：

```
$(document).ready(function() {
    var offset_left = $("#main-menu").width() + parseInt($("#main-menu").css("marginRight")); /* Also added the calculated right margin (currently 0), just in case you decided you want more spacing between the menu and content */

    $("#main-view").css({
        "padding-left": offset_left 
    });
}); 
```

[http://jsfiddle.net/teddyrised/gGt9S/3/](http://jsfiddle.net/teddyrised/gGt9S/3/)

[编辑]：您可能希望在调整浏览器大小时重新计算所有像素值，因为您使用了各种最小和最大宽度，并且还用于响应更快的布局。为此，只需将上面的代码包装在`.resize()`函数中：

```
$(document).ready(function() {
    $(window).resize(function() {
        // Calculate the necessary offset
        var offset_left = $("#main-menu").width() + parseInt($("#main-menu").css("marginRight")); /* Also added the calculated right margin (currently 0), just in case you decided you want more spacing between the menu and content */

        // Assign left offset as padding
        $("#main-view").css({
            "padding-left": offset_left 
        });
    }).resize();

    // Note: we fire resize() once when the window loads so that everything is calculated properly the first time the page loads (because by default, resize() is not triggered upon page load)
}); 
```

[http://jsfiddle.net/teddyrised/gGt9S/4/](http://jsfiddle.net/teddyrised/gGt9S/4/)

为了完整起见，您可能想研究如何消除[事件](http://paulirish.com/2009/throttled-smartresize-jquery-event-handler/)- 当用户拖动窗口的调整大小手柄时，`.resize()`Chrome 等浏览器会连续触发事件，并且可能会影响较慢计算机上的浏览器性能，或者如果您有`.resize()`函数中的计算过多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:36:40.873

我不确定这是否适合你，但为你设定一个高度`div`将帮助你实现你想要的。我已将 设置`min-height`为某个值，并设置`height:auto`为在有更多数据时提供帮助。它避免了文本流入菜单部分这是JSFiddle [http://jsfiddle.net/gGt9S/2/](http://jsfiddle.net/gGt9S/2/)

# javascript - Javascript：如何使用循环输出多个数组？

> ID：15278772
> 
> 赞同：1
> 
> 时间：2013-03-07T18:19:16.920
> 
> 标签：javascript, arrays

请帮忙。我只是这方面的新手。我一直在尝试用循环输出 2 组数组，但我似乎无法弄清楚。

这是我的代码：

```
<script>
cars=["BMW","Volvo","Saab","Ford"];
type=["Sports","Luxury","Premium","Economy"];
var i=0;
var a=0;
while (cars[i])
{
document.write(cars[i] + " - " + type[a]"<br/>");
i++;
}
</script> 
```

我想要的结果是：

```
BMW - Sports
Volvo - Luxury
Saab - Premium
Ford - Economy 
```

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T18:20:42.447

由于您要打印的条目位于数组中的相同索引处，因此只需在两者中使用（并在后面`i`添加 he missing ）：`+``type[i]`

```
document.write(cars[i] + " - " + type[i] + "<br/>");
// Here ------------------------------^  ^-- this was the missing + 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:21:55.960

只需将 type[a] 更改为 type[i]。由于数组似乎是并行的，因此您可以使用相同的索引。

```
while (cars[i])
{
document.write(cars[i] + " - " + type[i] + "<br/>");
i++;
} 
```

# android - 使用安卓手机定位 Zigbee 传感器

> ID：15278774
> 
> 赞同：1
> 
> 时间：2013-03-07T18:19:19.470
> 
> 标签：android, bluetooth, rfid, zigbee

我想用 ZigBee 传感器标记重要的东西，并能够通过我的 Android 手机知道/跟踪它的大致距离（理想位置，但我知道这需要很多参考传感器），如果它超出范围，我会提醒我. 或者，使用单元格来定位 RFID 标签（我知道确切的位置是不可能的，但寻找 +/- 5-10M）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T13:21:35.813

我已经测试这些 SDIO ZigBee 卡一段时间了： [http](http://www.spectec.com.tw/sdz-539.html) ://www.spectec.com.tw/sdz-539.html 虽然我还没有设法让它们在 Android 中工作。但老实说，在过去的几个月里，我已经把这个项目推到一边了 :-(

希望能帮助到你。如果您找到解决方案或设法使用这些设备，请给我留言，我将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:10:11.917

[rfid+zigbee 用于位置监控](http://www.libelium.com/rfid_nfc_zigbee_sensors/)

首先，最重要的是，Android 手机必须支持 zigbee。[此](http://www.cepro.com/article/taztag_claims_first_android_phone_with_nfc_zigbee/.)链接显示支持 zigbee 的 Android 手机。

另一个链接：[支持zigbee的安卓手机](http://i.stack.imgur.com/p4DrT.jpg)

您的问题最重要的方面是，智能手机应充当 zigbee 网络中的终端设备（节点）。然后，如果节点（智能手机）移出 zigbee 网络，那么它将被 co-ordinator 感知。

# html - 悬停效果无法正常工作

> ID：15278778
> 
> 赞同：0
> 
> 时间：2013-03-07T18:19:33.383
> 
> 标签：html, css, webpage, mousehover, onhover

我如何加载原始图像，以便当用户将光标移到图像顶部时，它应该自动更改而不显示白色背景然后加载原始图片？是否有任何代码可以在我的网页加载时加载原始图像？请告诉我。我的代码是：

```
#middlefoto{
    background-image:url(../images/middleblack.jpg);
    margin-left:1px;
    height:158px;
    width:333px;
    }
#middlefoto:hover{
    background:#fff url(../images/middlecolor.jpg) 0 0 no-repeat;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:27:16.623

Use sprites with positioning.

Find more information at [W3 Schools](http://www.w3schools.com/css/css_image_sprites.asp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:27:35.413

将图像包含在屏幕外元素中（使用 CSS 将其推离屏幕）。这将导致浏览器下载图像，因此它应该为翻转做好准备。您可以在页面加载后清理屏幕外图像。

```
<img src="rollover image" class="preloader" style="position:absolute; margin-left:-99999px" /> 
```

（不要真正使用内联样式）然后，如果您使用的是 jquery

```
$(document).ready(function(){ $('.preloader').remove(); }); 
```

清理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T18:34:47.297

您看到空白背景的原因是因为尚未从服务器加载悬停图像。为避免这种情况，请预加载图像。有几种方法可以做到这一点，但概念是相同的：强制浏览器在实际需要之前加载图像。这是使用 JavaScript 执行此操作的简单方法：

```
function preloadImages(sources)
{
    var img = new Image();
    for (var i = 0; i < sources.length; i++) {
        img.src = sources[i];
    }
}

preloadImages([ '../images/middlecolor.jpg', 'image2.jpg', 'image3.jpg' ]); 
```

# javascript - 移动元素后如何更新包含元素列表的jQuery对象

> ID：15278786
> 
> 赞同：6
> 
> 时间：2013-03-07T18:19:45.387
> 
> 标签：javascript, jquery

有一个元素列表，让我们说一些图像：

```
<img src="" alt="">
<img src="" alt="">
<img src="" alt=""> 
```

我选择它们并将结果存储在一个变量中：

```
var elements = $('img'); 
```

现在我想把最后一张图片放到第一个位置。它像这样工作正常：

```
elements.first().before(elements.last()); 
```

之后，对象`elements`自然仍然按照之前的顺序保存值。我可以通过在班次后再次查询来更新它：

```
elements = $('img'); 
```

但是当我已经将所有元素放在一起时，运行另一个查询似乎效率低下。此外，因为它不是一个数组，所以这不起作用：

```
elements.unshift(elements.pop()); 
```

在这种情况下更新对象列表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:28:32.580

假装！

```
[].unshift.call(elements, [].pop.call(elements)) 
```

[演示](http://jsfiddle.net/Q95F5/)

* * *

警告：我怀疑这比重新执行查询更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:51:59.350

这里有两件事。

您在 DOM 中有一组元素，以及一个保存对这些元素的引用的 DOM 片段的变量。

jQuery`first()`和`last()`函数正在移动 DOM 中的元素，但它们对变量一无所知。

从代码简单的角度来看，您建议的代码是最易读的，除非您经常调用它，否则应该没问题。

```
elements = $('img'); 
```

否则，将变量转换为数组：

```
var elementsarray = [];
elements.each(function(i) { elementsarray[] = this; }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T18:32:24.097

```
<div class="container">
 <img src="" alt="">
 <img src="" alt="">
 <img src="" alt="">
</div> 
```

* * *

```
$('.container img:last-child').prependTo('.container'); //would work

$('img:last', elements).prependTo(elements); 
// i think this will also work if you need to cache it 
```

# xaml - 可以“捕捉”的列表框

> ID：15278787
> 
> 赞同：0
> 
> 时间：2013-03-07T18:19:50.640
> 
> 标签：xaml, windows-phone-8, windows-phone-7.1

我正在制作一个 Windows Phone 应用程序，它需要一个可以在滚动时“捕捉”到位置的列表框（就像媒体中心中显示当前/未来歌曲的列表框一样）。

我花了一段时间在谷歌上寻找，找不到任何东西。是否有执行此操作的本机控件，或包含它的第三方库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:22:25.623

没有内置控件可以执行此操作。[Telerik RadControls](http://www.telerik.com/products/windows-phone.aspx)可以做到这
一点`SlideView`。

如果您注册[诺基亚高级开发人员计划](http://www.developer.nokia.com/Developer_Programs/Premium_program.xhtml)而不是直接注册 App Hub，则费用为 99 美元或免费。

# linux - 如何使用shell逐字符替换特殊字符

> ID：15278793
> 
> 赞同：0
> 
> 时间：2013-03-07T18:20:09.423
> 
> 标签：linux, bash, shell, unix

我在脚本中有一个字符串变量`x=tmp/variable/custom-sqr-sample/test/example` ，我想做的是用/替换所有的“-”，之后，我应该得到以下字符串

```
x=tmp/variable/custom/sqr/sample/test/example 
```

谁能帮我？

我尝试了以下语法它不起作用

```
exa=tmp/variable/custom-sqr-sample/test/example
exa=$(echo $exa|sed 's/-///g') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:22:25.803

sed 基本上支持任何分隔符，当您尝试匹配 a 时，它会派上用场`/`，最常见的是`|`和`#`，`@`选择一个不在您需要处理的字符串中的分隔符。

```
$ echo $x
tmp/variable/custom-sqr-sample/test/example

$ sed 's#-#/#g' <<< $x
tmp/variable/custom/sqr/sample/test/example 
```

在您上面尝试的推荐中，您只需要转义斜线，即

```
echo $exa | sed 's/-/\//g' 
```

但选择不同的分隔符更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:52:38.603

与这种情况相比，该`tr`工具可能是更好的选择`sed`：

```
x=tmp/variable/custom-sqr-sample/test/example
echo "$x" | tr -- - / 
```

（这`--`不是绝对必要的，但可以防止`tr`（和人类）误认为`-`一个选项。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T19:42:48.767

在`bash`中，您可以使用参数替换：

```
$ exa=tmp/variable/custom-sqr-sample/test/example
$ exa=${exa//-/\/}
$ echo $exa
tmp/variable/custom/sqr/sample/test/example 
```

# php - php array_unique() 返回重复

> ID：15278794
> 
> 赞同：2
> 
> 时间：2013-03-07T18:20:09.600
> 
> 标签：php, array-unique

我有一些代码正在运行，并且运行良好，但是当数组中的值为“morphsuite”时，相关站点已开始生成重复项

编码：

```
if(isset($sort2))
  {
   $sort2 = array_unique($sort2);
   foreach($sort2 as $value)
       {
        $f_dress .= '<li><a href="../shop/shop.php?cat=2&amp;sub='.$value.'">'.$value.'</a></li>';
       }
  }
  else{
      $f_dress = '';
      } 
```

从数据库中提取的所有其他输入都可以，但是当值为“morphsuit”时会获得双倍

有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:23:09.017

这些值并不完全相同 - 最可能的原因是其中一个或另一个（或两者）嵌入了某种不可打印的内容；诸如空格、内联 HTML 或控制字符之类的东西。

尝试在值上运行 var_dump() 并注意输出的长度部分，当它说类似 string(9) "morphsuit" vs. string(2031) "morphsuit" 时（我在那里发明了数字，但你得到了主意）。

# java - 如何在 @Processor 方法中访问 Payload 和 MuleMessage

> ID：15278800
> 
> 赞同：0
> 
> 时间：2013-03-07T18:20:30.687
> 
> 标签：java, customization, mule, mule-studio

我一直在使用 Mule Devkit 实现我的自定义处理器。

我用“mule-devkit-archetype-generic”原型创建了项目。它给了我带有注释“@Module”和“@Processor”的课程

我可以将参数传递给我的处理器方法。

但是我无法在 @Processor 方法中访问 MuleMessage 和 Payload。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:28:01.277

要访问有效负载，请使用：

```
@Payload final DESIRED_TYPE payload 
```

替换`DESIRED_TYPE`为您想要的类型，Mule 会将当前有效负载自动转换为所需的类型。

例如，这为您提供了一个字节有效负载：

```
@Payload final byte[] payload 
```

要访问 MuleMessage，您实际上是访问 MuleEvent 并从中获取消息。为此，您需要在方法`@Inject`上添加注释并向处理器方法`@Processor`添加参数。`MuleEvent muleEvent`

**使用 Mule 3.8.1 更新 2017/08/31**

如果您尝试`@Processor`使用`@Inject`. 错误消息指出，如果您只是在方法中添加`MuleEvent`或`MuleMessage`参数`@Processor`，DevKit 将正确注入参数。

# html - flash 文本区域未检测到 img 标签高度

> ID：15278801
> 
> 赞同：2
> 
> 时间：2013-03-07T18:20:32.680
> 
> 标签：html, actionscript-3, flash, cdata

我有一个文本区域，我正在从 xml 文件中添加 html（当然是在 CDATA 标记中）。当我添加额外的文本时，文本添加正常，并且字段滚动正常，但是一旦我`<img>`显示图像，但字段内部高度（溢出部分）没有调整，`<img>`所以我无法滚动向下查看图像的其余部分（我什至添加了宽度和高度，但没有 aval ）。

有没有办法通过 as3 调整文本字段的内部高度，以便该字段可以滚动到图像的底部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:55:08.930

我认为您最好使用 webview 或其他东西。文本区域有 htmlmode，但并非所有功能都受支持。计划 B：您可以实现自己的解析器，使文本成为您想要的。

# java - 这两种字符串格式有什么区别？

> ID：15278806
> 
> 赞同：0
> 
> 时间：2013-03-07T18:20:44.633
> 
> 标签：java, string, string-formatting

价值

```
double value = 345.12345; 
```

字符串格式 1

```
String str = String.format("%.02f", value); 
```

字符串格式 2

```
String str = String.format("%.2f", value); 
```

两者都打印相同的值 345.12。那么，这两者有什么区别呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T18:23:11.703

0 前缀符号仅适用于整数部分，而不适用于小数部分。如果您改为使用 %07.2f，它会将值显示为 0345.12。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T18:26:00.040

[格式说明符](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)的语法是

```
%[argument_index$][flags][width][.precision]conversion 
```

请注意，`precision`在`02`第一种情况和`2`第二种情况下，但由于它们是相同的数字，因此输出是相同的。因此`"%.02f"`和`"%.2f"`是相同的。

但是，如果你写了`%02f`，那么`flags`将是`0`("zero-pad output up to width") 并且`width`将是`2`. 然后输出将被零填充到指定的宽度。

# jquery - 在 jQuery 队列中调用自己的方法

> ID：15278808
> 
> 赞同：0
> 
> 时间：2013-03-07T18:20:49.637
> 
> 标签：jquery, methods, call, undefined

我在 jQuery 中创建了自己的方法：

```
$.fn.plop = function(){
    // Method 
}; 
```

我试图在队列中调用它，例如：

```
$(elems[0]).plop().delay(800).fadeOut(); 
```

但是 Firefox 返回错误：

> 类型错误：$(...).plop(...) 未定义

关于导致问题的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:22:57.877

如果你希望它是可链接的，你需要在你的函数中返回 jQuery。简单地说`return $;`，如果没有别的。

例子：

```
$.fn.plop = function(){
    // Method
    return this.html('bar'); // html() returns jQuery
};

$('#myDiv').plop().delay(800).fadeOut(); 
```

[http://jsfiddle.net/mUuhF/](http://jsfiddle.net/mUuhF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:26:22.100

To extend jQuery properly, you need to write your methods like this:

```
$.fn.plop = function () {  
    return this.each(function () {

        // Do something for each element

    });
}; 
```

This will allow you to run .plop() on any collection of jQuery elements, applying the behavior or action to each element, and it will return the original collection so that you may continue to chain additional method calls to it.

# .net - NHibernate 在保存时截断长字符串

> ID：15278811
> 
> 赞同：3
> 
> 时间：2013-03-07T18:20:56.923
> 
> 标签：.net, sql-server-2008, nhibernate, ssms

我在使用`NHibernate`. 字符串被截断为 43,680 个字符。字符串是一个很长的`XML`数据包，大小不一，但有时很长。

数据库数据类型`nvarchar(max)`因此限制不存在。

有人可以帮助我理解为什么`NHibernate`要截断它，以及如何防止它？

这是我的映射：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
  assembly="Application.DataObjects"
  namespace="Company.Application.DataObjects.Transaction.Domain">

  <class name="TransactionDO" table="Transactions">
    <id name="TransactionID">
    </id>
    <property name="Created" />
    <property name="LongXML"  type="StringClob">
      <column name="LongXML" sql-type="nvarchar(max)"/>
    </property>
    <property name="ProcessConstructor" />
    <property name="VeryLongXML" type="StringClob">
      <column name="VeryLongXML" sql-type="nvarchar(max)" />
    </property>
  </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:02:37.460

正如 OP 问题中的评论所述，问题在于`SSMS`显示数据。

存在一个已知错误，`Sql Server Management Studio 2008` [即您不能从网格模式的列中粘贴超过 43679 个字符。](https://connect.microsoft.com/SQLServer/feedback/details/499608/ssms-can-not-paste-more-than-43679-characters-from-a-column-in-grid-mode)

[选项（查询结果/SQL Server/结果到网格页面）版本 SQL Server 2008 R2](http://msdn.microsoft.com/en-us/library/ms190078%28v=sql.105%29.aspx)

> 在网格模式下检索的非 XML 数据的最大字符数应为 65535 个字符。

已经讨论了几种显示`XML`through的方法`SSMS`：

*   将 Maximum Characters Retrieved 设置为`XML`data 并将限制设置为**Unlimited**。

    尝试将结果转换为`XML`，即`cast(COLUMN_NAME as XML)`

*   将列的输出拆分为多行
*   将列复制粘贴到另一个程序
*   第三方工具 (ssmsboost)

或者，这些讨论可能有用：

[https://stackoverflow.com/a/5508193/368552，https://stackoverflow.com/a/2760023/368552](https://stackoverflow.com/a/5508193/368552) _ [_](https://stackoverflow.com/a/2760023/368552)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-13T12:52:55.597

您可以添加长度属性并将其设置为最大长度（“2147483647”）以确保xml字符串的完整存储；像

```
<property name="VeryLongXML" type="StringClob" length="2147483647"> 
```

# windows-server-2012 - IIS 8 在 Windows Server 2012 上损坏

> ID：15278812
> 
> 赞同：0
> 
> 时间：2013-03-07T18:21:05.320
> 
> 标签：windows-server-2012, iis-8, was

我们在 Windows Server 2012 上配置了 IIS 8。每当我们尝试访问任何虚拟目录时，应用程序池都会停止。

我尝试了 iisreset 和所有其他选项。当我检查 Windows 服务时，我看到 WAS 和 W3SVC 服务已停止。

尝试启动服务 (WAS) 时会引发错误 ![在此处输入图像描述](../Images/36eae1274e68ac41ccb3eac023a3a5a4.png)

我什至尝试重新安装 IIS，重新启动机器几次但没有运气。

补充一点，我已经安装了所有最新的 Windows 更新。

有没有人遇到过这个问题？任何解决方法？

[我什至尝试使用此链接](http://www.iis.net/learn/get-started/whats-new-in-iis-8/installing-iis-8-on-windows-server-2012)重新配置 IIS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T06:56:04.697

安装顺序很重要。在安装 WCF 组件之前，我配置了 ASP.NET 和相关组件。

在那之后，我再也没有遇到过问题。

1 更多更改 IIS 8 不支持 ASP.NET impersonate 设置为 false。

# asp.net - Google Apps SSO 到 ASP.Net Web 应用程序

> ID：15278819
> 
> 赞同：1
> 
> 时间：2013-03-07T18:21:24.690
> 
> 标签：asp.net, single-sign-on, saml

如果您能对我遇到的问题有所了解，我将不胜感激。

我有一个使用 2 因素身份验证的 Web 应用程序，第一个是 AD 用户名和密码。现在这个网络应用程序是互联网托管的，不驻留在任何内部域上。它通过 LDAP 连接到 AD 域。

在同一个应用程序中，我们希望用户能够通过 SSO 发送和接收他们的 Gmail 电子邮件。我们不希望他们为他们的 gmail 帐户重新输入用户名和密码。相反，用户可以将他们的 Gmail 用户名存储在 Active Directory 中的用户属性（如描述）中。

身份服务器和我们的网络应用程序都将位于同一个互联网托管服务器上，但不会成为任何 AD 域的一部分，因为我们的网络应用程序和身份服务器都将用于多个域。

Identity Server 应该能够从我们的 web 应用程序接收特定域的域详细信息和服务帐户详细信息。

当用户登录我们的网络应用程序时，Google 的自动 SSO 请求会发送到身份服务器，其中包含用户所属域的信息。SSO 请求得到满足并建立了一个会话。然后用户应该只能在我们的网络应用程序中看到 Gmail 电子邮件、联系人、日历等。

我不知道这是否可能。

对此或确实实现类似功能的任何建议将不胜感激。

# jquery - 为什么我的内容框在此扩展功能中无法正常工作？

> ID：15278824
> 
> 赞同：0
> 
> 时间：2013-03-07T18:21:34.573
> 
> 标签：jquery, html, css

我在设计这个展开 div 的内容框（verticalslider_contents）时遇到了一些麻烦，我希望这个框有边框，并且有一个动态的高度（与其中的文本一样高）。我知道我必须使用清除浮动，但我不知道为什么它不起作用。你能帮助我吗？为此，我使用 jquery 扩展功能，您可以在此处看到：http: [//jsfiddle.net/DaUNb/](http://jsfiddle.net/DaUNb/)

**html**

```
<div class="verticalslider" id="textExample">
        <ul class="verticalslider_tabs">
            <li><a href="#">Activitate 1</a></li>
            <li><a href="#">Praesent Pulvinar</a></li>
            <li><a href="#">Nunc Adipiscing</a></li>
            <li><a href="#">Praesent Dapibus</a></li>                        
        </ul>
        <ul class="verticalslider_contents">
            <li>
            <h2>Activitate 1</h2>
            <p>DADA ipsum dolor sit amet, consectetur adipiscing elit. Ut accumsan placerat bibendum. Etiam ut nunc sed purus tempus varius. Donec id magna massa, posuere consectetur neque. Mauris tortor lacus, iaculis a pulvinar luctus, lobortis vel velit. In elementum lorem eu felis fermentum placerat et sit amet ligula. Integer euismod augue eu massa tincidunt consectetur. Suspendisse potenti. Donec in enim sollicitudin enim dignissim imperdiet ut et dolor. Phasellus nec risus vel nunc hendrerit auctor. Sed rhoncus sapien at nisl aliquam luctus. </p>
             <p>DADA ipsum dolor sit amet, consectetur adipiscing elit. Ut accumsan placerat bibendum. Etiam ut nunc sed purus tempus varius. Donec id magna massa, posuere consectetur neque. Mauris tortor lacus, iaculis a pulvinar luctus, lobortis vel velit. In elementum lorem eu felis fermentum placerat et sit amet ligula. Integer euismod augue eu massa tincidunt consectetur. Suspendisse potenti. Donec in enim sollicitudin enim dignissim imperdiet ut et dolor. Phasellus nec risus vel nunc hendrerit auctor. Sed rhoncus sapien at nisl aliquam luctus. </p>
             <p>DADA ipsum dolor sit amet, consectetur adipiscing elit. Ut accumsan placerat bibendum. Etiam ut nunc sed purus tempus varius. Donec id magna massa, posuere consectetur neque. Mauris tortor lacus, iaculis a pulvinar luctus, lobortis vel velit. In elementum lorem eu felis fermentum placerat et sit amet ligula. Integer euismod augue eu massa tincidunt consectetur. Suspendisse potenti. Donec in enim sollicitudin enim dignissim imperdiet ut et dolor. Phasellus nec risus vel nunc hendrerit auctor. Sed rhoncus sapien at nisl aliquam luctus. </p>

            </li>
            <li>
                <p>blabla</p>
            </li>
            <li>
            <h2>Nunc Adipiscing</h2>
            <p>CUC adipiscing purus id orci rutrum placerat. Nam posuere elementum ipsum quis faucibus. Fusce fermentum turpis ac erat mollis sit amet varius mi placerat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Ut ante justo, varius quis dignissim nec, condimentum in dui. Nulla sed lectus eu nunc vehicula vulputate vel nec velit. Integer eu purus nunc. Donec odio augue, sagittis pellentesque adipiscing id, dignissim vel enim. Maecenas a risus est.</p></li>
            <li>
            <h2>Praesent Dapibus</h2>
            <p>Praesent dapibus metus vitae velit blandit tempor. Donec dignissim tempus neque, a vestibulum massa aliquam sed. Vestibulum velit quam, facilisis vel pharetra nec, bibendum eget mauris. In vitae ligula ac justo varius ullamcorper. Nullam vitae urna eu metus pellentesque vehicula vel sit amet nibh. Cras nec velit dictum neque imperdiet congue in nec eros. Suspendisse ante felis, eleifend sed pellentesque id, sagittis ut magna. .</p></li>                        
        </ul>
        <div id="clear"></div>
    </div> 
```

和CSS

```
@charset "utf-8";

/* Container */
.verticalslider {
/*border: 1px solid #666666;*/
overflow: hidden; 
width:1000px;
margin-top: 25px; 
height: 100%; 
}

/* Tabs */
.verticalslider_tabs {
float: left;
width: 220px;
}
.verticalslider_tabs li{ 
border-left:1px solid #666666;
}

.verticalslider_tabs, .verticalslider_tabs li{
margin: 0px; padding: 0px;
}
.verticalslider_tabs li{
list-style-type: none;
}

.verticalslider_tabs a:link, .verticalslider_tabs a:visited{
display: block; 
width: 200px; 
height: 29px; 
padding: 14px 10px 6px 10px; 
background: url(../img/tab-activitati/tabBG.jpg) bottom repeat-x;  
background-color: #eeeeee;
font-family: Georgia, "Times New Roman", Times, serif; 
font-size: 20px; 
font-weight: bold;
color: #333333;  
border-right: 1px solid #666666; 
border-bottom: 1px solid #666666; 
text-decoration: none;
}

.verticalslider_tabs a:hover, .verticalslider_tabs a:active{ 
background: url(../img/tab-activitati/tabHoverBG.jpg) bottom repeat-x; 
background-color: #fcfcfc;
}
.verticalslider_tabs li:first-child a:link, .verticalslider_tabs li:first-child a:visited{
border-top: 1px solid #666666;
 height: 30px;
 }

.verticalslider_tabs .activeTab a:link, .verticalslider_tabs .activeTab a:visited{
background: #ffffff; 
border-right: 1px solid #ffffff;
}
.verticalslider_tabs .activeTab a:hover, .verticalslider_tabs .activeTab a:active{
background: #ffffff; 
border-right: 1px solid #ffffff;
}
.verticalslider .arrow {
background: url(../img/tab-activitati/arrow.png); 
width: 27px; 
height: 60px; 
position: absolute; 
z-index: 1000; 
margin-left: 220px; 
margin-top: -55px; 
}

/* Contents */
.verticalslider_contents{
float: left;
width: 750px;
display: inline; 
margin: 0px; 
padding: 0px;
border: 1px solid #666666;
height:100%;
}
.verticalslider_contents li{
margin: 0px; 
padding: 0px;
width: 750px;
padding: 0px;
display: none;
position: absolute;
list-style-type: none; 
}
.verticalslider_contents li h2{
font-family: Georgia, "Times New Roman", Times, serif, font-size: 15px; 
color: #333333;margin: 5px 20px; 
padding: 0px;
}

.verticalslider_contents li p{ 
margin: 5px 20px; 
padding: 0px;
color: #333333;
font-family: Tahoma, Geneva, sans-serif; 
font-size: 13px; 
}

.verticalslider_contents .activeContent{
display: inline;
}

#clear {
clear:both;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:28:16.567

的样式`.verticalslider_contents li`使它`position: absolute`，如果您希望高度适合内容，这不是最佳选择。将其更改为`position:relative`似乎可以解决问题，我们添加`overflow:auto`以使滚动条在需要时可见：

```
.verticalslider_contents li {
    overflow: auto;
    position: relative;
    height: initial !important;
    min-height: 200px !important;
}

.verticalslider_contents .activeContent {
    display: block;
} 
```

它使用该`min-height`属性将内容的最小高度设置为选项卡容器的高度。该`height: initial !important`属性覆盖了 jQuery 的样式`height: 208px`（我不知道为什么在这里），成为内容的高度。

我还更改了to的`display`属性，以便它遵循这些高度变化。请注意，原始属性不允许您指定高度。`.activeContent``block``inline`

新的 JSFiddle：http: [//jsfiddle.net/DaUNb/2/](http://jsfiddle.net/DaUNb/2/)

# java - EXE JAR 未按预期运行

> ID：15278825
> 
> 赞同：0
> 
> 时间：2013-03-07T18:21:34.890
> 
> 标签：java, netbeans-7, executable-jar

我已经`.exe`使用应用程序（NetBeans 7.1.2 JDK7）创建了我的项目的 jar 文件`JartoExe`。现在对于某些类它工作得很好。但它没有显示特定类的/和之后的 GUI。

我已经包含了所有需要的依赖项。但是在特定类之后 GUI 不会显示。`.exe`文件有什么问题？我错过了什么吗？

**更新** 在控制台上，它抛出`FileNotFound`异常。我的文件在当前项目文件夹中。那么，我需要改变什么？

这是因为 `getClass().getResourceAsStream()`?

异常详情：

```
Mar 07, 2013 10:57:07 PM projectfinal.KaraokeTest$3 run
SEVERE: null
java.io.FileNotFoundException: Na Kajre Ki Dhar.txt (The system cannot find the file specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(Unknown Source)
    at java.util.Scanner.<init>(Unknown Source)
    at projectfinal.KaraokeTest.initComponents(KaraokeTest.java:89)
    at projectfinal.KaraokeTest.<init>(KaraokeTest.java:35)
    at projectfinal.KaraokeTest$3.run(KaraokeTest.java:375)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:14:55.707

很多时候 jars 没有目录。所以`getClass().getResourceAsStream(somefile)`应该是`getClass().getResourceAsStream("\somefile")`.

# google-chrome-extension - “访问您在所有网站上的数据”是否仅适用于应用程序选项卡/窗口或浏览器范围？

> ID：15278828
> 
> 赞同：2
> 
> 时间：2013-03-07T18:21:50.470
> 
> 标签：google-chrome-extension, chrome-web-store, google-chrome-app

许多 Chrome 网上应用店应用程序都要求这样做 - 这是否意味着该应用程序可以访问您浏览器中打开的所有选项卡和窗口中的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:50:04.340

是的，请求此权限的扩展程序可以查看所有打开的选项卡的内容。

# c# - 选项卡控件和预先存在的 datagridview

> ID：15278830
> 
> 赞同：-1
> 
> 时间：2013-03-07T18:22:03.790
> 
> 标签：c#, wpf

我在 wpf 表单上有一个数据网格。我需要的是让这个数据网格驻留在选项卡控件上。是否可以调整 xaml 来实现这一点，还是我必须删除数据网格，然后添加选项卡控件，然后在选项卡控件中重做数据网格？我尝试在标签之间封装datagrid xaml，但没有给它尺寸。那没有得到所需的结果。

这是数据网格 xaml

```
<DataGrid x:Name="_dgvInventory"
                                         VirtualizingStackPanel.IsVirtualizing="True"
                                         VirtualizingStackPanel.VirtualizationMode="Recycling"
                                         Grid.Row="1"
                                         AutoGenerateColumns="False"
                                         ItemsSource="{Binding}"
                                         IsReadOnly="True"
                                         SelectionMode="Single"
                                         SelectionUnit="FullRow"
                                         RowHeaderWidth="30"
                                         SelectionChanged="DGVInventory_SelectionChanged"
                                         LoadingRow="DataGridLoadingRow"
                                         VerticalScrollBarVisibility="Auto"
                                         HorizontalScrollBarVisibility="Auto">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Status"
                                                              Binding="{Binding Status}"/>
                                    <DataGridTextColumn Header="Tag ID"
                                                              Binding="{Binding TagId}"/>
                                    <DataGridTextColumn Header="Description"
                                                              Binding="{Binding Description}"/>
                                    <DataGridTextColumn Header="Part Number"
                                                              Binding="{Binding PartNumber}"/>
                                    <DataGridTextColumn Header="Serial Number"
                                                              Binding="{Binding SerialNumber}"/>
                                    <DataGridTextColumn Header="Location"
                                                              Binding="{Binding Location}"/>
                                    <DataGridTextColumn Header="Room"
                                                              Binding="{Binding Room}"/>
                                    <DataGridTextColumn Header="Inventory"
                                                              Binding="{Binding Inventory}"/>
                                    <DataGridTextColumn Header="Comment"
                                                              Binding="{Binding OwnedComment}"/>
                                </DataGrid.Columns>
                                <DataGrid.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="Search"
                                                     Click="SearchParts_Click" />
                                        <MenuItem Header="Masked Search" Click="MaskedSearchMenuItem_Click"/>
                                    </ContextMenu>
                                </DataGrid.ContextMenu>
                                <DataGrid.RowStyle>
                                    <Style TargetType="{x:Type DataGridRow}">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Status}"
                                                             Value="Inv:found">
                                                <Setter Property="Background"
                                                          Value="GreenYellow"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Status}"
                                                             Value="Inv:unfound">
                                                <Setter Property="Background"
                                                          Value="Salmon"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Status}"
                                                             Value="unknown">
                                                <Setter Property="Background"
                                                          Value="Yellow"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Status}"
                                                             Value="stray">
                                                <Setter Property="Background"
                                                          Value="LightBlue"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DataGrid.RowStyle>
                            </DataGrid> 
```

它存在于 wpf 窗口选项卡控件上。选项卡控件上有一些其他数据网格和滑块等。我需要做的就是将这个特定的数据网格放在一个选项卡控件上，该选项卡控件本身将位于主选项卡控件中。我希望我的问题更清楚。我想知道在 xaml 中我是否可以做一些简单的事情并创建迷你选项卡控件并将其“滑动”到数据网格后面（然后它将成为迷你选项卡控件的子控件）。如果我的术语不是公认的规范，我深表歉意。在这方面是新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:06:14.007

我想这就是你追求的...

```
<TabControl HorizontalAlignment="Left" Height="250" Margin="0,10,0,0" VerticalAlignment="Top" Width="292">
        <TabItem Header="TabItem">
            <Grid Background="#FFE5E5E5">
                <TabControl>
                    <TabItem Header="TabItem">
                        <Grid>
                            <DataGrid x:Name="_dgvInventory"
                                     VirtualizingStackPanel.IsVirtualizing="True"
                                     VirtualizingStackPanel.VirtualizationMode="Recycling"
                                     Grid.Row="1"
                                     AutoGenerateColumns="False"
                                     ItemsSource="{Binding}"
                                     IsReadOnly="True"
                                     SelectionMode="Single"
                                     SelectionUnit="FullRow"
                                     RowHeaderWidth="30"
                                     SelectionChanged="DGVInventory_SelectionChanged"
                                     LoadingRow="DataGridLoadingRow"
                                     VerticalScrollBarVisibility="Auto"
                                     HorizontalScrollBarVisibility="Auto">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Status"
                                                          Binding="{Binding Status}"/>
                                    <DataGridTextColumn Header="Tag ID"
                                                          Binding="{Binding TagId}"/>
                                    <DataGridTextColumn Header="Description"
                                                          Binding="{Binding Description}"/>
                                    <DataGridTextColumn Header="Part Number"
                                                          Binding="{Binding PartNumber}"/>
                                    <DataGridTextColumn Header="Serial Number"
                                                          Binding="{Binding SerialNumber}"/>
                                    <DataGridTextColumn Header="Location"
                                                          Binding="{Binding Location}"/>
                                    <DataGridTextColumn Header="Room"
                                                          Binding="{Binding Room}"/>
                                    <DataGridTextColumn Header="Inventory"
                                                          Binding="{Binding Inventory}"/>
                                    <DataGridTextColumn Header="Comment"
                                                          Binding="{Binding OwnedComment}"/>
                                </DataGrid.Columns>
                                <DataGrid.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="Search"
                                                 Click="SearchParts_Click" />
                                        <MenuItem Header="Masked Search" Click="MaskedSearchMenuItem_Click"/>
                                    </ContextMenu>
                                </DataGrid.ContextMenu>
                                <DataGrid.RowStyle>
                                    <Style TargetType="{x:Type DataGridRow}">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Status}"
                                                         Value="Inv:found">
                                                <Setter Property="Background"
                                                      Value="GreenYellow"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Status}"
                                                         Value="Inv:unfound">
                                                <Setter Property="Background"
                                                      Value="Salmon"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Status}"
                                                         Value="unknown">
                                                <Setter Property="Background"
                                                      Value="Yellow"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Status}"
                                                         Value="stray">
                                                <Setter Property="Background"
                                                      Value="LightBlue"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DataGrid.RowStyle>
                            </DataGrid>
                        </Grid>
                    </TabItem>
                </TabControl>
            </Grid>
        </TabItem>
        <TabItem Header="TabItem">
            <Grid Background="#FFE5E5E5"/>
        </TabItem>
    </TabControl> 
```

我注意到，当我将子 TabControl 拖入父级时，它根本没有任何项目。然后你需要在每个项目中都有一个网格。

# matlab - 约束 fmincon MATLAB

> ID：15278832
> 
> 赞同：1
> 
> 时间：2013-03-07T18:22:05.893
> 
> 标签：matlab, optimization, statistics, minimize

我正在尝试在 MATLAB 中使用 fmincon 函数来获取 4 个变量的值。我收到警告：

```
Local minimum possible. Constraints satisfied.

fmincon stopped because the size of the current search direction is less than
twice the default value of the step size tolerance and constraints are 
satisfied to within the selected value of the constraint tolerance.

<stopping criteria details>

Optimization stopped because the norm of the current search direction, 6.854643e-07,
is less than 2*options.TolX = 1.000000e-06, and the maximum constraint 
violation, -3.940985e-05, is less than options.TolCon = 1.000000e-15.

Optimization Metric                                               Options
norm(search direction) =   6.85e-07                        TolX =   1e-06 (default)
max(constraint violation)  =  -3.94e-05                  TolCon =   1e-15 (selected) 
```

我尝试将 TolFun 和 TolCon 从 1e-6 更改为 1e-10，但我仍然收到相同的消息。有没有其他方法可以让它收敛

```
My code:
A = [1, 1, 0, 0];
b = 1;
lb = [0; 0; 0; 0];
ub = [1; 1; 1; 1];
Aeq = [];
beq = [];
noncoln = [];
init_guess = [.03;.93; long_term_sigma; initial_sigma];
%option = optimset('FunValCheck', 1000);
options = optimset('fmincon');
options = optimset(options, 'MaxFunEvals', 1000, 'MaxIter', 1000, 'Algorithm', 'active-set', 'TolCon', 1e-15, 'TolFun', 1e-15);
func = @(theta)Log_likeli(theta, ret_1000);
%[x, maxim] = fminsearch(@(theta)Log_likeli(theta, ret_1000), init_guess, options);
[x, maxim] = fmincon(func, init_guess, A, b, Aeq, beq, lb, ub, noncoln, options); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:29:14.110

你的问题有九个约束。如果您使 theta_i =exp(x_i) 并在所有地方用这个新变量替换 theta_i，也许您的问题可以简化为五个约束。因此，您已经消除了积极性约束，新问题取决于 x_i（x_i 是您的新变量）。好的....您找到 x_i 的最佳值并计算 theta_i=exp(x_i)。例如，当您处理方差或波动率时，这是计量经济学中非常常见的替代方法。

您也可以尝试另一种替换（我以前没有出现过，但它似乎有效）来消除所有 lb 或 ub... 使 y=exp(x)/(1+exp(x)) [逻辑函数]。现在您的问题要容易得多，因为它只有一个约束（由 A 和 b 给出）并遵循上述相同的过程。

# ios - 使图像出现在屏幕上？

> ID：15278833
> 
> 赞同：0
> 
> 时间：2013-03-07T18:22:08.033
> 
> 标签：ios, objective-c, uiimage

我正在尝试以编程方式实例化图像，我的最终目标是在屏幕上的不同点水平放置一系列 Empty.png。我不知道该怎么做，但首先我只是想让一个图像出现在屏幕上。这是我在 .m 文件中的代码。

```
- (void)drawAtPoint:(CGPoint)point {
point = CGPointMake(100.0,100.0);
UIImageView *img = [[UIImageView alloc] init];
img.image = [UIImage imageNamed:@"Empty.png"];
[self.view addSubview:img]; 
```

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:27:14.003

You are taking an entirely wrong approach.

As a beginner, if you find yourself in drawing code (`drawAtPoint:`, `drawInRect:` etc.), you are almost certainly in the wrong place.

Especially for things like loading and displaying images, iOS does almost all the work for you, so you really don't have to draw anything yourself.

Please do not take this the wrong way, but do yourself a big favor and get a good introductory book on the subject. The books from the Big Nerd Ranch Guide series are excellent, and very well worth the money.

EDIT:

If you really do not want to get a book (please, for your own sake, get a book - I did, and I'm very glad I did), here's a quick way that should work.

You had the right idea in creating a `UIImageView`, but you're using it wrong.

You very probably have a `UIViewController` somewhere in your app. Find (or create) the `- (void)viewDidLoad` method, and display your image from there:

```
- (void)viewDidLoad
{
    UIImage *myImage = [UIImage imageNamed:@"Empty"]; //you can leave out PNG.
    UIImageView *myFirstImageView = [[UIImageView alloc] initWithImage:myImage]; //this automatically gives the UIImageView the correct height and width
    [self.view addSubview:myFirstImageView]; //That's all. UIKit will handle displaying the imageView automatically.
} 
```

This will display the image in the upper left hand corner of the screen.

You can easily move it around by inserting the following line somewhere after `UIImageView *myFirst...`:

```
myFirstImageView.center = CGPointMake(210.0, 345.0); 
```

Did I mention the Big Nerd Ranch books are great to learn about iOS development, and are also even fun to read?

Also, the official documentation is very good (though not as fun or easy to read, and doesn't explain as much).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:30:23.913

对不起，我之前的回答是错误的。我没有意识到你确实做了drawInRect。

不要使用图像视图。在这里，您应该使用核心图形。UIImageView 对象可能会有所帮助，但只是其中的一部分。

```
[img drawAtPoint:point]; 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T18:34:31.580

您需要设置框架：

```
- (void)placeImageViewAtPoint:(CGPoint)point 
{
    UIImageView *img = [[UIImageView alloc] init];
    img.image = [UIImage imageNamed:@"Empty.png"];
    img.frame.origin = point;
    [self.view addSubview:img];  
} 
```

我没有对此进行测试，但是如果这引发了您需要的错误：

```
- (void)placeImageViewAtPoint:(CGPoint)point 
{
    UIImageView *img = [[UIImageView alloc] init];
    img.image = [UIImage imageNamed:@"Empty.png"];
    CGRect frame = img.frame;
    frame.origin = point;
    img.frame = frame;
    [self.view addSubview:img];  
} 
```

并且您可能应该从 viewDidAppear 或类似方法调用此方法：

```
-(void)viewDidAppear
{
    CGPoint point = point = CGPointMake(100.0,100.0);
    [self placeImageViewAtPoint:point];
} 
```

# vb.net - 用于 word doc 的代码签名 VB 宏...发布并安装了代码证书..但宏仍然不受信任

> ID：15278836
> 
> 赞同：1
> 
> 时间：2013-03-07T18:22:13.427
> 
> 标签：vb.net, macros, certificate

所以，我有一个附有 VB 宏的 word 文档。我们的公司政策不允许宏在没有经过我信任的经过身份验证的机构签名的情况下运行。

1.  我有一个企业 CA。我登录并请求代码签名证书。它下载并安装。
2.  我打开word文档。它像往常一样警告我该文档有一个来自不受信任来源的宏。我去开发者工具。我卸载了当前的证书（过期的旧公司签名）。我找到并添加了我自己的新代码签名证书。然后我保存文档。
3.  我打开文件。它说这...

数字签名有效。但签名来自您尚未选择信任的出版商。

我已经下载了 CA 证书。它在我信任的根证书目录中，但它仍然不信任内容。

我在我的灯芯结束:-(

# c# - 如何将变量保存到新的文本文件中，以便下次程序运行时加载这些变量？

> ID：15278839
> 
> 赞同：4
> 
> 时间：2013-03-07T18:22:19.190
> 
> 标签：c#, console, save

新的 C#er 在这里。我正在制作基于控制台的 RPG。它进展顺利，但我需要找出如何保存游戏。我猜想有一种方法可以将我的应用程序中的变量保存到一个文本文件中，该文件可用于在应用程序再次运行时加载变量。不幸的是，我不知道从哪里开始。

此外，我需要一种方法在加载保存文件时转到代码中的某个点。

我的一些变量包括：

```
int xCoordinate, yCoordinate, hp, hpmax, level; 
```

任何示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T18:31:23.500

将一些变量写入文本文件很简单：

```
TextWriter tw = new StreamWriter("SavedGame.txt");

// write lines of text to the file
tw.WriteLine(xCoordinate);
tw.WriteLine(yCoordinate);

// close the stream     
tw.Close(); 
```

并将它们读回：

```
// create reader & open file
TextReader tr = new StreamReader("SavedGame.txt");

// read lines of text
string xCoordString = tr.ReadLine();
string yCoordString = tr.ReadLine();

//Convert the strings to int
xCoordinate = Convert.ToInt32(xCoordString);
yCoordinate = Convert.ToInt32(yCoordString);

// close the stream
tr.Close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T18:25:14.947

您可以将变量保存到 XML 文件中，并在下次启动时加载它们，这个过程称为[序列化](http://msdn.microsoft.com/en-us/library/vstudio/ms233843.aspx)。 有关可以序列化和反序列化大多数任何 c# 对象（包括列表，但不包括字典）与 XML 文件之间的帮助程序类，[请参见此处。](https://stackoverflow.com/a/15257397/102937)

如果您只想将几个值传输到下一个控制台应用程序，则可以使用[命令行参数](http://msdn.microsoft.com/en-us/library/aa288457(v=vs.71).aspx)或[管道](https://stackoverflow.com/questions/199528/c-sharp-console-receive-input-with-pipe)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T18:29:25.187

您可以使用二进制序列化来相当容易地完成此操作。首先，创建一个包含您要编写的所有变量的类：

```
[Serializable]
class Data
{
    int x;
    int y;
} 
```

然后按如下方式使用它：

```
Data data = new Data();

//Set variables inside data here...

// Save data
BinaryFormatter formatter = new BinaryFormatter();
using (FileStream stream = File.OpenWrite("C:\\Temp\\bin.bin"))
{
    formatter.Serialize(stream, data);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-14T11:18:00.660

我的变量保存脚本（隐藏、加密、可以编辑、更改、保存、删除）

```
public class SavingPlugin
{

    public static void SaveVariable(string savename, TypeCode tc, object value,string Encryption_password)
    {
        string path = AppDomain.CurrentDomain.BaseDirectory + @"\" + savename + "." + tc.ToString();

        if (!File.Exists(path))
        {
            var myfile = File.Create(path);
            myfile.Close();
            string val = value.ToString();
            string encrypted = StringCipher.Encrypt(val, Encryption_password);
            File.WriteAllText(path, encrypted);
            File.SetAttributes(path, FileAttributes.Hidden);

        }
        else
        {
            string txt = "";
            try
            {
                txt = StringCipher.Decrypt(File.ReadAllText(path), Encryption_password);
                File.SetAttributes(path, FileAttributes.Normal);
                string val = value.ToString();
                string encrypted = StringCipher.Encrypt(val, Encryption_password);
                File.WriteAllText(path, encrypted);
                File.WriteAllText(path, encrypted);
                File.SetAttributes(path, FileAttributes.Hidden);
            }
            catch
            {
                MessageBox.Show("Incorrect password : " + Encryption_password + " for the variable : " + savename + "." + tc.ToString());
            }

        }
    }

    public static object GetVariable(string savename, TypeCode tc, string Encryption_password)
    {
        string path = AppDomain.CurrentDomain.BaseDirectory + @"\" + savename + "." + tc.ToString();
        File.SetAttributes(path, FileAttributes.Normal);
        string txt = "";

        try
        {
            txt = StringCipher.Decrypt(File.ReadAllText(path), Encryption_password);
            File.SetAttributes(path, FileAttributes.Hidden);
            var value = Convert.ChangeType(txt, tc);
            return value;
        }
        catch
        {
            MessageBox.Show("Incorrect password : " + Encryption_password + " for the variable : " + savename + "." + tc.ToString());
            return null;
        }

    }

    public static void DeleteVariable(string savename,TypeCode tc)
    {
        string path = AppDomain.CurrentDomain.BaseDirectory + @"\" + savename + "." + tc.ToString();
        File.SetAttributes(path,FileAttributes.Normal);
        File.Delete(path);
    }

    public static bool Exists(string savename,TypeCode tc)
    {
        string path = AppDomain.CurrentDomain.BaseDirectory + @"\" + savename + "." + tc.ToString();
        bool _true = true;

        try
        {
            File.SetAttributes(path, FileAttributes.Normal);
            File.SetAttributes(path, FileAttributes.Hidden);
        }
        catch
        {
            _true = false;
        }

        return _true;
    }
}

public static class StringCipher
{
    // This constant is used to determine the keysize of the encryption algorithm in bits.
    // We divide this by 8 within the code below to get the equivalent number of bytes.
    private const int Keysize = 256;

    // This constant determines the number of iterations for the password bytes generation function.
    private const int DerivationIterations = 1000;

    public static string Encrypt(string plainText, string passPhrase)
    {
        // Salt and IV is randomly generated each time, but is preprended to encrypted cipher text
        // so that the same Salt and IV values can be used when decrypting.  
        var saltStringBytes = Generate256BitsOfRandomEntropy();
        var ivStringBytes = Generate256BitsOfRandomEntropy();
        var plainTextBytes = Encoding.UTF8.GetBytes(plainText);
        using (var password = new Rfc2898DeriveBytes(passPhrase, saltStringBytes, DerivationIterations))
        {
            var keyBytes = password.GetBytes(Keysize / 8);
            using (var symmetricKey = new RijndaelManaged())
            {
                symmetricKey.BlockSize = 256;
                symmetricKey.Mode = CipherMode.CBC;
                symmetricKey.Padding = PaddingMode.PKCS7;
                using (var encryptor = symmetricKey.CreateEncryptor(keyBytes, ivStringBytes))
                {
                    using (var memoryStream = new MemoryStream())
                    {
                        using (var cryptoStream = new CryptoStream(memoryStream, encryptor, CryptoStreamMode.Write))
                        {
                            cryptoStream.Write(plainTextBytes, 0, plainTextBytes.Length);
                            cryptoStream.FlushFinalBlock();
                            // Create the final bytes as a concatenation of the random salt bytes, the random iv bytes and the cipher bytes.
                            var cipherTextBytes = saltStringBytes;
                            cipherTextBytes = cipherTextBytes.Concat(ivStringBytes).ToArray();
                            cipherTextBytes = cipherTextBytes.Concat(memoryStream.ToArray()).ToArray();
                            memoryStream.Close();
                            cryptoStream.Close();
                            return Convert.ToBase64String(cipherTextBytes);
                        }
                    }
                }
            }
        }
    }

    public static string Decrypt(string cipherText, string passPhrase)
    {
        // Get the complete stream of bytes that represent:
        // [32 bytes of Salt] + [32 bytes of IV] + [n bytes of CipherText]
        var cipherTextBytesWithSaltAndIv = Convert.FromBase64String(cipherText);
        // Get the saltbytes by extracting the first 32 bytes from the supplied cipherText bytes.
        var saltStringBytes = cipherTextBytesWithSaltAndIv.Take(Keysize / 8).ToArray();
        // Get the IV bytes by extracting the next 32 bytes from the supplied cipherText bytes.
        var ivStringBytes = cipherTextBytesWithSaltAndIv.Skip(Keysize / 8).Take(Keysize / 8).ToArray();
        // Get the actual cipher text bytes by removing the first 64 bytes from the cipherText string.
        var cipherTextBytes = cipherTextBytesWithSaltAndIv.Skip((Keysize / 8) * 2).Take(cipherTextBytesWithSaltAndIv.Length - ((Keysize / 8) * 2)).ToArray();

        using (var password = new Rfc2898DeriveBytes(passPhrase, saltStringBytes, DerivationIterations))
        {
            var keyBytes = password.GetBytes(Keysize / 8);
            using (var symmetricKey = new RijndaelManaged())
            {
                symmetricKey.BlockSize = 256;
                symmetricKey.Mode = CipherMode.CBC;
                symmetricKey.Padding = PaddingMode.PKCS7;
                using (var decryptor = symmetricKey.CreateDecryptor(keyBytes, ivStringBytes))
                {
                    using (var memoryStream = new MemoryStream(cipherTextBytes))
                    {
                        using (var cryptoStream = new CryptoStream(memoryStream, decryptor, CryptoStreamMode.Read))
                        {
                            var plainTextBytes = new byte[cipherTextBytes.Length];
                            var decryptedByteCount = cryptoStream.Read(plainTextBytes, 0, plainTextBytes.Length);
                            memoryStream.Close();
                            cryptoStream.Close();
                            return Encoding.UTF8.GetString(plainTextBytes, 0, decryptedByteCount);
                        }
                    }
                }
            }
        }
    }

    private static byte[] Generate256BitsOfRandomEntropy()
    {
        var randomBytes = new byte[32]; // 32 Bytes will give us 256 bits.
        using (var rngCsp = new RNGCryptoServiceProvider())
        {
            // Fill the array with cryptographically secure random bytes.
            rngCsp.GetBytes(randomBytes);
        }
        return randomBytes;
    }
} 
```

如何使用 ：

```
SavingPlugin.SaveVariable("int16",TypeCode.Int16,15,"awwdad");
MessageBox.Show(SavingPlugin.GetVariable("int16", TypeCode.Int16,"awwdad").ToString()); 
```

您可以使用 SaveVariable 更改已经存在的变量的值，但您需要输入正确的密码

# android - AsyncTask 类中的getApplicationContext？

> ID：15278840
> 
> 赞同：12
> 
> 时间：2013-03-07T18:22:21.127
> 
> 标签：android, android-asynctask

我有几个私有 AsyncTask 方法，我想将它们分解为公共外部类。在我的应用程序中，我有一个扩展 Application 的公共类，它包含一些我想从应用程序的不同部分访问的共享例程。但是，当我分解 AsyncTask 类时，我不再能够调用 getApplicationContext() 来获取对我的应用程序库的引用（该类现在不从 Activity 继承任何东西）。getBaseContext() 也会有问题。当它被实例化并从那里构建时，我是否应该将上下文传递给 AsyncTask？不确定这是否安全。

```
import java.util.ArrayList;
import android.os.AsyncTask;

public class DlTask extends AsyncTask
{
    long totalbytes = 0;
    long totalread = 0;
    ArrayList <String> data;

    @Override
    protected void onPreExecute ()
    {   
        AppLib lib = (AppLib) getApplicationContext();

        lib.saveStatusText ("Contacting " + lib.getServerAddress () + ":" + lib.getServerPort () + "...");
       super.onPreExecute ();
    }

      @Override
      protected Object doInBackground (Object... params)
      {
        data = lib.sendCommand (CMD_LIST);
         return true;
      }

      @Override
      protected void onPostExecute (Object result)
      {

         if (data != null)
         {
                    lib.saveStatusText (data.size () + " files found");
         }
         else
         {
            Log.d (TAG, "data is null");
            Toast.makeText (getBaseContext(), msg, Toast.LENGTH_SHORT).show ();                     
         }

         super.onPostExecute(result);
      }

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T18:25:13.880

> 当它被实例化并从那里构建时，我是否应该将上下文传递给 AsyncTask？

您别无选择，因为您将无法`Context`通过任何其他方式获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-16T18:18:04.143

你应该这样做。就我而言，它有效：

```
public class DlTask extends AsyncTask {
     private Context context;

     public DlTask(Context context) { this.context = context; }

     @Override
     protected void onPreExecute() {
         super.onPreExecute();
         ..........
     }

     @Override
     protected Object doInBackground (Object... params)
     {
        data = lib.sendCommand (CMD_LIST);

        return true;
     }

     @Override
     protected void onPostExecute (Object result)
     {

        if (data != null)
     {
         lib.saveStatusText (data.size () + " files found");
     }
     else
     {
        Log.d (TAG, "data is null");
        Toast.makeText (context, msg, Toast.LENGTH_SHORT).show ();              
        //You can use the CONTEXT like this (passing the context variable like parameter
     }

     super.onPostExecute(result);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T18:26:26.030

要么在 AsyncTask 的构造函数中传递 Context，要么在 Application 类中使用静态变量来访问它（set `sMyInstace = this;`）。不过，第一种解决方案更可取。

# tsql - SQl 查询以从最小结果集中查找最大值

> ID：15278841
> 
> 赞同：0
> 
> 时间：2013-03-07T18:22:21.530
> 
> 标签：tsql, subquery, max, min

是否可以编写一个查询，从同一查询中检索到的一组最小值中找到最大值？

通过减小值（将所需的最大值留在列表顶部）来排序最小值很容易，但我很好奇是否可以构造一个只返回该值而不返回其他值的查询。

检索最小值的查询：

```
SELECT dbo.tblDevices.Status
, L.Device_id
, MIN(L.DateAndTime) As 'End Date'
FROM dbo.tblDeviceLocation AS L
JOIN dbo.tblDevices
ON L.Device_id = dbo.tblDevices.Device_id
GROUP BY L.Device_id, dbo.tblDevices.Status 
```

我想找到这些分钟的最大值的行。我想过尝试使用子查询，但我认为它不起作用，因为它返回 N 最小值的行数。然后我想到了使用 COMPUTE，因为这可以被认为是一个小计，但这也不起作用，因为你不能对未分组的东西（L.DateAndTime）进行小计。

有什么想法吗？

*编辑：我刚刚看到这篇文章[http://www.programmerinterview.com/index.php/database-sql/find-maximum-value-without-using-aggregate/](http://www.programmerinterview.com/index.php/database-sql/find-maximum-value-without-using-aggregate/)从粗略的快速阅读中可能适用。当/如果我发现某些东西时，我会更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:24:10.157

您可以使用 ORDER BY 如果您使用的是 SQL-Server TOP 1 如果您使用的是 MySQL，那么您必须在查询结束时使用 LIMIT 1

```
SELECT TOP 1 dbo.tblDevices.Status
, L.Device_id
, MIN(L.DateAndTime) As 'End Date'
FROM dbo.tblDeviceLocation AS L
JOIN dbo.tblDevices
ON L.Device_id = dbo.tblDevices.Device_id
GROUP BY L.Device_id, dbo.tblDevices.Status
ORDER BY MIN(L.DateAndTime) DESC // order by max value 
```

# assembly - MIPS 的“addi”指令溢出 - 示例

> ID：15278842
> 
> 赞同：0
> 
> 时间：2013-03-07T18:22:22.913
> 
> 标签：assembly, mips, inline-assembly, bluespec

我意识到**addi**指令会导致溢出异常。我目前正在使用 Bluespec HDL 来模拟导致异常的处理器并适当地处理它们。

无论如何，我正在编写一些测试用例来触发溢出异常，特别是使用 MIPS 的 addi 命令。

**注意**：我正在测试的处理器是基于 SMIPS 的，但我支持一些 MIPS 指令用于异常和中断等目的。

我知道我检测溢出的逻辑是正确的（下面的伪代码）：

```
if (function == Addi) begin
  if(( a < 0 && b < 0 && result >= 0) || (a >0 && b > 0 && result < 0))
    return True;
  else 
   return False;
end 
```

***问题***：什么可能是溢出的示例：我正在尝试以下操作：（使用内联汇编`__asm__`）

```
 addi $2, $0, 0x7fff
 addi $3, $2, 0x000f 
```

这并没有引发异常。如果我尝试这个：

```
 addi $2, $0, 0x7fffffff
 addi $3, $2, 0x0000000f 
```

我收到一个汇编错误，因为立即数必须是 16 位。我怎样才能从 andi 获得溢出？你能给我很好的例子吗...我需要使用其他指令来填充高位吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:36:15.400

您的第一个序列不会导致溢出异常，因为寄存器是 32 位的。32767 + 15 = 32782，在 32 位以内。

您不能在 MIPS 中的单个指令中加载大立即数。首先使用 LUI 指令加载高 16 位，然后再加载低 16 位的 ADDI（或 ORI，或 XORI）。

您还可以 LW 从内存中引入 32 位值。

# r - 在 R 中拆分数据框的问题

> ID：15278850
> 
> 赞同：-2
> 
> 时间：2013-03-07T18:22:55.253
> 
> 标签：r, split, dataframe

我有一个包含 1500 个数据帧的列表，每个数据帧有 3 个变量和 8 行（使用函数“split”生成）

我想按第 2 列（独立地）对它们进行排序，然后，排序后，我想消除该列（第 2 列）中低于某个值的所有行

任何的想法？

非常感谢您提前。

蒂娜。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:27:52.940

这是一个小例子。

```
# dummy list of data.frames
set.seed(45)
df <- data.frame(V1=sample(8), V2= sample(8), V3 = sample(8))
df.list <- list(df, df, df, df, df, df, df, df)

# function that does the job
df.out <- lapply(df.list, function(x) {
    x[order(x$V2)), ] # order by 2nd column using column name
    x[x$V1 > 3, ] # filter by some criteria
    # you can combine these two lines as:
    # x[order(x$v2)), ][x$v2 > 3, ] (thanks @Ananda for the suggestion)
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:50:38.280

几个建议：

排序往往是一个缓慢的过程，您可以通过在排序之前先执行子集来加快该过程。或者您可能根本不需要排序。

任何时候您想将数据对象拆分为多个片段，对每个片段应用一个函数，然后将结果重新组合在一起，考虑使用 plyr 包，它可能会使过程更容易。

你的最终目标是什么？可能以更简单的方式完成整个事情。

# node.js - Despotify、node-spotify-web 和 Spotify track id 表示

> ID：15278857
> 
> 赞同：1
> 
> 时间：2013-03-07T18:23:06.100
> 
> 标签：node.js, spotify, despotify

我正在使用[node-spotify-web](https://github.com/TooTallNate/node-spotify-web)，我猜协议与 Despotify 相同，至少它们的展位似乎使用 16 个字节来表示 Spotify 曲目 ID（32 个十六进制字符）。

这就是我在搜索曲目时在 xml 响应中得到的信息。

我的问题是[Spotify 轨道 ID](https://developer.spotify.com/technologies/spotify-play-button/documentation/)应该是 22 个字符的 0-9a-zA-Z 字符串。

我不知道如何将其转换为实际的轨道 ID，而且我无法在两个项目的任何文档中找到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T00:00:58.173

项目中有一个转换函数！

可以在[这里](https://github.com/TooTallNate/node-spotify-web/blob/master/lib/util.js)找到！

# java - 持久化使用 XML 抛出空指针异常

> ID：15278861
> 
> 赞同：0
> 
> 时间：2013-03-07T18:23:29.233
> 
> 标签：java, xml-serialization, nullpointerexception, persistence, distributed-system

我正在设计一个分布式系统，它将库存的 ArrayList 保存到文件中。我正在将库存写入文件，并在读取该文件时收到空指针异常错误。

这是 A 类中的一个字段：

```
private static StockList instance = null; 
```

这是我在 A 类中的方法 getInstance()，它从文件中检索股票列表。

```
public static StockList getInstance(){
    if (instance==null){
        try {
            XMLDecoder d = new XMLDecoder(
                    new BufferedInputStream(
                    new FileInputStream("Stock.xml")));
            instance = (StockList) d.readObject();
            d.close();
        } catch (IOException ex) {
            instance= new StockList();
            Logger.getLogger(StockList.class.getName()).log(Level.SEVERE, null, ex);
        } 
    }
    return instance;
} 
```

这是 A 类的构造函数，如果 getInstance() 中存在 IOException，则调用它：

```
public StockList(){
    stock.put("APL", new Stock("APL","Apple","Apple",3200));
    System.out.println("");
} 
```

这是我在 A 类中的 writeStockList 方法，它将股票写入文件：

```
public void writeStockList()
    {
       try {
            XMLEncoder e = new XMLEncoder(
                new BufferedOutputStream(
                new FileOutputStream("Stock.xml")));
        e.writeObject(getInstance());
        e.flush();
        e.close();            
    } catch (IOException ex) {            
        Logger.getLogger(StockList.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

这是我在 B 类中的主要方法，它在服务器运行时初始化库存清单：

```
public static void main(String[] args){
    try {
        //Make sure all lists are initialised
        StockList.getInstance();
        //delete after first run
        //StockList.getInstance().addStock(new Stock("APL2","Apple2","Apple",3200));
        //StockList.getInstance().writeStockList();
        System.out.println(StockList.getInstance().getStock("APL" ).name);          
        System.out.println(StockList.getInstance().getStock("APL2" ).name);

        System.out.println("registered ok");
    } catch (RemoteException ex) {
        Logger.getLogger(ClientServer.class.getName()).log(Level.SEVERE, null, ex);
    }
    System.out.println("finished server setup");
} 
```

出于测试目的，第一次运行程序时，以下行未注释：

```
//StockList.getInstance().addStock(new Stock("APL2","Apple2","Apple",3200));  
//StockList.getInstance().writeStockList(); 
```

这应该将新股票 (APL2) 添加到列表中并将其写入文件。

正确打印的以下行 - 证明找到了两种库存：

```
System.out.println(StockList.getInstance().getStock("APL" ).name);          
System.out.println(StockList.getInstance().getStock("APL2" ).name); 
```

然后当我们第二次运行时，上面的行被注释了，但是上面的 System.out.println 抛出了以下错误：

```
Exception in thread "main" java.lang.NullPointerException at food.stockticker.priceserver.ClientServer.main(ClientServer.java:46)
Java Result: 1 
```

上述情况不应发生，因为在调用 getInstance() 时将第二项写入文件并读回库存列表。如果我打印第一项（APL），它会返回它。打印 APL2 时，会发生错误。

似乎 Stock.xml 文件要么被覆盖，要么第一次运行时所做的更改未写入 xml 文件。有任何想法吗？

编辑：

XML：

```
<?xml version="1.0" encoding="UTF-8"?> 
<java version="1.6.0_41" class="java.beans.XMLDecoder"> 
<object class="food.stockticker.priceserver.StockList"/> 
</java> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:48:18.320

如果我理解正确的话，文件在第一次运行后被删除，然后注释掉的行被带回来。在这种情况下，此时文件不存在，阅读器不会初始化，很多东西都会为空，包括实例 - 因此`NullPointerException`.

还要注意的是，如果这是为分布式（多线程并发）系统构建的：

如果应该只有一个主要股票对象的实例，请使用[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)，在这种情况下，当从文件中读取数据时，在加载器周围加一个锁（并使其成为不同的方法）。在这种情况下，通常建议在静态加载时执行此操作，以保证仅执行一次，并且不需要在高并发系统中无论如何都不起作用的[双重检查锁。](http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html)

```
private static synchronized void load()
{
 // return if file is already loaded, unless you meant to re-load
 // load the file here...
} 
```

否则，多个并发线程可能同时调用 getInstance，库存对象仍将执行/为空，并且它们将相互遍历。设计和代码也存在许多超出这个问题的问题，但希望这能解决 NPE 问题。

# ruby - 如何在停止时杀死 ruby Thor 中的所有进程？

> ID：15278862
> 
> 赞同：5
> 
> 时间：2013-03-07T18:23:35.477
> 
> 标签：ruby, thor, daemons

我在下面有一个脚本，它使用[Thor](https://github.com/wycats/thor)像 rake 任务管理一样运行`ARGV`。

```
#!/usr/bin/env ruby
require "thor"

class Run < Thor

  desc "start", "start script"
  def start
      p1 = fork{ loop... }
      p2 = fork{ loop... }

      # 3 processes running

      Process.detach(p1)
      Process.waitpid(p1)

  end

  desc "stop", "stop script"      
  def stop
    # kill all 3 pids
  end

end

Run.start 
```

当 start 时`ruby script.rb start`，它会生成两个子进程（总共三个）。我的问题是如何在我执行时杀死所有进程`ruby script.rb stop`。我在网上看到，在启动时，我应该将 pid 父进程存储到一个文件中，当停止时，我读取它并杀死它。问题是杀死父母不会杀死孩子。所以我可以将所有三个pid都保存在文件中，然后一一杀死。

我在问自己什么是正确的方法，以及我在内部处理流程的方式`start`是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T11:15:44.280

如果你知道你的父 pid，你可以像这样找到并杀死所有的孩子：

```
# Find child pids, works on Linux / OSX
def child_pids(pid)
  pipe = IO.popen("ps -ef | grep #{pid}")
  pipe.readlines.map do |line|
    parts = line.strip.split(/\s+/)
    parts[1].to_i if parts[2] == pid.to_s and parts[1] != pipe.pid.to_s
  end.compact
end

# kill -9 every child
child_pids(parent_pid).each { |pid| Process.kill('TERM', pid) } 
```

# php - 将特殊字符转换为普通字符

> ID：15278864
> 
> 赞同：1
> 
> 时间：2013-03-07T18:23:49.700
> 
> 标签：php, special-characters

`?`并将`=`用作我的网址中的部分。在生成网址时，我使用

`<?php echo l('node/'. $someID .'/delete?destination=chapter/'. $anotherID);?>`. 当我检查时`Firebug`，`href`链接的属性不是通常的 url，而不是具有`?`，它正在被替换`%3F`并`=`正在被替换`%3D`。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-03T13:34:52.677

我遇到了同样的问题，但我使用了以下代码并为我工作：

```
rawurldecode(rawurldecode(l('node/'. $someID .'/delete?destination=chapter/'. $anotherID,array('absolute' => TRUE)))); 
```

希望这对任何人都有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T20:18:22.050

阅读 Drupal 中 l() 函数的文档（我假设您使用的是 Drupal）

[http://api.drupal.org/api/drupal/includes%21common.inc/function/l/6](http://api.drupal.org/api/drupal/includes%21common.inc/function/l/6)

'html' 选项在属性数组中默认为 FALSE，但是如果您使用 HTML 内容，这需要为 TRUE...

# web-services - 需要非常长的轮询/“反向 RPC”的 RPC 实现

> ID：15278866
> 
> 赞同：0
> 
> 时间：2013-03-07T18:23:55.540
> 
> 标签：web-services, language-agnostic, rpc

我正处于计划项目的早期阶段。我想知道不涉及实现我自己的协议的常规/简单方法。

我知道 RPC 的概念 - 拥有一个服务器，该服务器公开可以由客户端调用的某些过程。好吧，我有很多客户端，但不幸的是我无法直接连接到它们（NAT/防火墙问题；它们主要是家用 PC）。因此，我正在考虑让客户端直接连接到服务器并调用“轮询操作”方法。我猜这是“向后 RPC”。也就是说，这个方法所做的只是阻塞，直到服务器决定需要做某事（这可能需要几秒钟或几天），然后返回一个指示需要做什么的数据片段，并实际调用适当的代码客户端并将其返回给服务器。注意3个步骤：

1.  客户端轮询服务器。等待可能很长时间。
2.  服务器以序列化的形式返回一些操作。例如，“给我发一份文件”
3.  客户端执行操作并向服务器发送这个

所以我不明白我如何才能真正使用通过 HTTP 的东西来做到这一点，因为使用 HTTP 只有一个请求和响应。我想我可以使用 GET（第 1 步和第 2 步）和 POST（第 3 步）来做到这一点，但我希望有一些更优雅的东西，因为这包括服务器端的大量簿记（每个请求一个 cookie 或东西等）。

我正在寻找一种跨平台的方式来做到这一点。客户端将在 C# 中，但我还没有决定服务器。我不在乎这是否通过 HTTP 完成，所以“网络服务”可能适用也可能不适用。

关于符合我描述的协议/约定的任何想法？你能为我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:43:59.830

如果您想建立双向通信并且希望能够导航 NAT/防火墙/等，听起来您可能对[WebSocket](http://en.wikipedia.org/wiki/WebSocket)感兴趣。

# jquery - 子对话框关闭时重新加载父对话框内容

> ID：15278880
> 
> 赞同：0
> 
> 时间：2013-03-07T18:24:29.133
> 
> 标签：jquery, jquery-ui, javascript-events

我有一个大的 jQuery 对话框窗口，当在父对话框窗口中单击按钮以更新数据库时，它会在内部打开更多对话框窗口。

我想在子对话框关闭时更新父窗口。

我可以看到如何通过事件关闭来执行此操作，`load(url)`但是如何在不指定每个 ID 的情况下在子级和父级之间建立关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:41:37.853

如果没有一些标记结构，我无法理解您的子对话框如何驻留在父级中。

jQuery 有一个函数叫做[`.closest()`](http://api.jquery.com/closest/ "对于集合中的每个元素，通过测试元素本身并向上遍历其在 DOM 树中的祖先来获取与选择器匹配的第一个元素")沿着 DOM 树向上移动以找到最近的匹配选择器，所以你可以通过给父对话框一个类来使用它。并选择它们，当您想使用它时喜欢它。

```
$(this).closest(".parent").html("Updated Content");
// ^ Represent your child dialog as you want 
```

# c# - PropertyChangedEventArgs 格式异常

> ID：15278884
> 
> 赞同：2
> 
> 时间：2013-03-07T18:25:02.153
> 
> 标签：c#, .net, xaml, formatexception

我有下一个 XAML：

```
<TextBlock Text="{Binding Path=Parameter.LocalizedName}"/> 
```

我的视图模型中的这段代码：

```
public FilterParameter Parameter
{
  get
  {
    return this._Parameter;
  }
  set
  {
    this._Parameter = value;
    base.RaisePropertyChanged("Parameter");
  }
} 
```

我愿意

```
this.Parameter = newParameter 
```

为什么我会得到

> FormatException（输入字符串的格式不正确。）

打电话后`PropertyChangedEventHandler`？

[http://oi45.tinypic.com/11trceg.jpg](http://oi45.tinypic.com/11trceg.jpg)

* * *

内部异常为空。堆栈跟踪看起来像

```
mscorlib.dll!System.Number.StringToNumber(string str, System.Globalization.NumberStyles options, ref System.Number.NumberBuffer number, System.Globalization.NumberFormatInfo info, bool parseDecimal) + 0xf7 bytes 
mscorlib.dll!System.Number.ParseInt32(string s, System.Globalization.NumberStyles style, System.Globalization.NumberFormatInfo info) + 0x92 bytes   
mscorlib.dll!string.System.IConvertible.ToInt32(System.IFormatProvider provider) + 0x2f bytes   
mscorlib.dll!System.Convert.ChangeType(object value, System.Type conversionType, System.IFormatProvider provider) + 0x1ff bytes 
PresentationFramework.dll!MS.Internal.Data.SystemConvertConverter.Convert(object o, System.Type type, object parameter, System.Globalization.CultureInfo culture) + 0x11 bytes  
PresentationFramework.dll!MS.Internal.Data.DynamicValueConverter.Convert(object value, System.Type targetType, object parameter, System.Globalization.CultureInfo culture) + 0x51 bytes 
PresentationFramework.dll!System.Windows.Controls.Primitives.Selector.VerifyEqual(object knownValue, System.Type knownType, object itemValue, MS.Internal.Data.DynamicValueConverter converter) + 0x64 bytes    
PresentationFramework.dll!System.Windows.Controls.Primitives.Selector.FindItemWithValue(object value, out int index) + 0x1f7 bytes  
PresentationFramework.dll!System.Windows.Controls.Primitives.Selector.SelectItemWithValue(object value) + 0x3e bytes    
PresentationFramework.dll!System.Windows.Controls.Primitives.Selector.CoerceSelectedValue(System.Windows.DependencyObject d, object value) + 0x91 bytes 
WindowsBase.dll!System.Windows.DependencyObject.ProcessCoerceValue(System.Windows.DependencyProperty dp, System.Windows.PropertyMetadata metadata, ref System.Windows.EntryIndex entryIndex, ref int targetIndex, ref System.Windows.EffectiveValueEntry newEntry, ref System.Windows.EffectiveValueEntry oldEntry, ref object oldValue, object baseValue, object controlValue, System.Windows.CoerceValueCallback coerceValueCallback, bool coerceWithDeferredReference, bool coerceWithCurrentValue, bool skipBaseValueChecks) + 0x55 bytes   
WindowsBase.dll!System.Windows.DependencyObject.UpdateEffectiveValue(System.Windows.EntryIndex entryIndex, System.Windows.DependencyProperty dp, System.Windows.PropertyMetadata metadata, System.Windows.EffectiveValueEntry oldEntry, ref System.Windows.EffectiveValueEntry newEntry, bool coerceWithDeferredReference, bool coerceWithCurrentValue, System.Windows.OperationType operationType) + 0x247 bytes   
WindowsBase.dll!System.Windows.DependencyObject.InvalidateProperty(System.Windows.DependencyProperty dp, bool preserveCurrentValue) + 0xd1 bytes    
PresentationFramework.dll!System.Windows.StyleHelper.InvalidateDependents(System.Windows.Style ownerStyle, System.Windows.FrameworkTemplate frameworkTemplate, System.Windows.DependencyObject container, System.Windows.DependencyProperty dp, ref MS.Utility.FrugalStructList<System.Windows.ChildPropertyDependent> dependents, bool invalidateOnlyContainer) + 0x79 bytes   
PresentationFramework.dll!System.Windows.StyleHelper.OnBindingValueInTemplateChanged(object sender, MS.Internal.Data.BindingValueChangedEventArgs e) + 0xe2 bytes   
PresentationFramework.dll!System.Windows.Data.BindingExpressionBase.ChangeValue(object newValue, bool notify) + 0x94 bytes  
PresentationFramework.dll!System.Windows.Data.BindingExpression.TransferValue(object newValue, bool isASubPropertyChange) + 0x40c bytes 
PresentationFramework.dll!System.Windows.Data.BindingExpression.ScheduleTransfer(bool isASubPropertyChange) + 0x3a bytes    
PresentationFramework.dll!MS.Internal.Data.ClrBindingWorker.NewValueAvailable(bool dependencySourcesChanged, bool initialValue, bool isASubPropertyChange) + 0x60 bytes 
PresentationFramework.dll!MS.Internal.Data.PropertyPathWorker.UpdateSourceValueState(int k, System.ComponentModel.ICollectionView collectionView, object newValue, bool isASubPropertyChange) + 0x211 bytes 
PresentationFramework.dll!MS.Internal.Data.ClrBindingWorker.OnSourcePropertyChanged(object o, string propName) + 0x85 bytes 
PresentationFramework.dll!MS.Internal.Data.PropertyPathWorker.OnPropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e) + 0x68 bytes   
WindowsBase.dll!System.Windows.WeakEventManager.ListenerList<System.ComponentModel.PropertyChangedEventArgs>.DeliverEvent(object sender, System.EventArgs e, System.Type managerType) + 0x12c bytes 
WindowsBase.dll!System.ComponentModel.PropertyChangedEventManager.OnPropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs args) + 0x40c bytes   
>   MyApp.Framework.Core.dll!MyApp.Framework.Core.NotifyObject.RaisePropertyChanged(string propertyName) Line 45 + 0x32 bytes   C# 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:20:34.650

WPF 正在尝试将 System.String 转换为 System.Int32，但失败并出现 FormatException。

您应该将自定义 IValueConverter 设置为您的 Binding 以处理这种情况，例如，如果字符串无法解析为 int，则返回一些默认 int 值。

# c++ - 如何在体素引擎中正确使用 VAO 和 VBO

> ID：15278891
> 
> 赞同：3
> 
> 时间：2013-03-07T18:25:14.533
> 
> 标签：c++, opengl

我目前正在构建一个体素引擎（例如 Minecraft），并且我正在使用 opengl。

引擎的当前设计如下所示：

> 类 Map -> 包含 2d 块数组（std::vector 的 std::vector）
> 
> 类 Chunk -> 包含块的 3d 数组（也使用 std::vector）
> 
> 类 Block -> 包含块的顶点。（立方体，由 12 个三角形组成）；

我想要做的是让每个块都有一个 draw() 函数，它将绘制块中的所有块。我想我会使用 glGenBuffers() 为每个块创建一个缓冲区。从我阅读的教程中，应该首先使用 glVertexArray 创建一个顶点数组，然后绑定它，然后使用目标 GL_ARRAY_BUFFER 将缓冲区绑定到它并用数据填充它。

到目前为止，我设法使用使用 glGenBuffers() 在块中创建的缓冲区来渲染具有多个块的单个块，但在主函数中我创建 glVertexArray 并绑定它，而不是在块中调用 draw() 函数使用 glDrawArrays() 绑定块的缓冲区和绘图。

我的问题是，为每个块创建一个 VBO 是否正确？我也需要为每个块创建一个 glVertexArray 吗？或者我应该为所有块使用一个并且每次绑定另一个 VBO？

我试图通过教程和 opengl wiki 更多地研究 VAO 和 VBO，但到目前为止我还没有完全理解它是如何工作的以及应该如何正确使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-05T13:26:11.517

我觉得你可能想得太早了。为什么你的地图被分成几块？您是否期待某种分页并非所有地图都在内存中？如果您的整个地图适合 GPU 内存，则每个地图使用一个缓冲区，并且不需要块。首先让你的渲染像那样。

之后，您可以考虑优化，例如仅绘制可见部分。或者以较低的细节绘制远处的部分。然后，您决定如何保留 GPU 缓冲区，何时更新或丢弃它们。这只是一个缓存问题。这不是一个简单的问题，而是一个缓存问题。

更实际的是：如果你按块组织，是的，每个块一个缓冲区。一个顶点和一个索引缓冲区。一次画一张。切换缓冲区对于绘图来说还不错。但是当你加载一个缓冲区时，你想加载整个东西，而不是部分。不要为大约 65k 顶点下的缓冲区而烦恼。

不过，第一步只是从 CPU 内存中提取数据。一旦你更好地了解了缓存的排列方式。不要过早将 GPU 结构混合到您的设计中。您还需要 CPU 结构来处理拣货或 AI 等事情。您应该有一个“基本事实”数据集，然后具有不同的分区和表示以满足不同的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-05T18:21:14.937

我知道我已经很晚了，但是如果将来有人发现这个问题，我会把这个答案放在这里。

Minecraft 的做法与人们想象的不同。与您在上面描述的带有嵌套缓冲区的系统不同，一个块可以简单地使用一个整数数组（如果您的块类型少于 256 个，则可以使用无符号字符）。如果它的“ID”出现在块数组中，您可以拥有每种类型的一个块，然后在特定位置渲染它，而不是为块提供许多对象。

它可以是一个 3D 数组（或在您的情况下是向量的向量，但这不是很有效）或一个可以通过宽度、高度和深度访问的 1D 数组。每个 ID（整数或无符号字符）都将链接到一种块类型。正因为如此，当你想渲染一个块时，你可以遍历块的所有维度——宽度、高度、深度——然后查看那个点的 ID。如果是 3，则渲染一块泥土，如果是 1，则将其制作为草块，如果为 0，则将其保留为空气块等。该系统非常适合塑造和生成地形，就像您一样重新操作一个整数数组。如果您按密度顺序排列块，那么您可以对块的区域进行一些算术以塑造地形（从块的该区域中的所有 ID 中减去一个，

这将通过实例化来完成，这样您就可以在一个块中拥有一个泥土块，并在需要的地方多次渲染它。在某种程度上，它甚至可以用制服来完成，这会改变方块的位置并一个一个地渲染它。

要回答您的问题，您需要一个定义块的位置数据和纹理坐标的**VBO 。****VAO 也是一个**，用于存储该数据在内存中的排列方式。但在那之后，您可以在渲染每个块之前根据块中 blockArray 中的 ID 绑定不同的纹理。在加载时，根据你制作的块的大小，将所有污垢块的位置分组到一个块中，并绑定一次纹理，然后将所有污垢块渲染为一个（因为纹理绑定调用可能是一个性能问题，如果它们'发生得太频繁了）。

# javascript - 延迟 Javascript 的解析/加载

> ID：15278893
> 
> 赞同：0
> 
> 时间：2013-03-07T18:25:14.810
> 
> 标签：javascript, ruby-on-rails

这可能是过早优化的情况，也可能是“它取决于”的事情......但是有没有办法推迟 Javascript 部分的解析/执行，直到可以证明需要这些代码部分？

就我而言，我使用的是 Rails 资产管道，它可以方便地将我的所有 JS 捆绑/缩小到一个文件中。但是，据我了解，每次加载页面时都需要重新加载此文件。但文件的某些部分仅在某些页面上使用。

我的模块使用以下模式编码：

```
(function (window, undefined) {
... all code here ...
})(window); 
```

我想要的是一种包装每个模块的方法，以便它们仅在需要它们的页面上解析/加载/执行，例如通过`<div class='use-module-x'>`在 DOM 中查找标签。

我知道我可以`if/then`在模块的 init 函数中执行一个操作，以防止它在不需要时尝试自行初始化，但似乎最好避免让 JS 引擎在不需要时考虑此代码。

即使这不是一个真正的问题，我也很好奇是否/如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:28:11.227

我认为您正在寻找的正是[require.js 提供](http://requirejs.org/)的。使用基于约定的方法，您可以定义将以托管方式导入页面的代码模块。请参阅[入门指南](http://requirejs.org/docs/start.html)和[api 参考](http://requirejs.org/docs/api.html#jsfiles)。

# .net - Microsoft.Bcl.Async doesn't work

> ID：15278894
> 
> 赞同：2
> 
> 时间：2013-03-07T18:25:16.460
> 
> 标签：.net, async-await, portable-class-library, base-class-library

I try to use Async with Portable Class Library. I use Profile 104, which includes:

*   .NET 4.5
*   Silverlight 4
*   WP 7.5
*   WinRT

Installation works and I can use `System.Threading.Tasks` but I can't compile because I have this error:

> Cannot await `System.Threading.Task<System.Net.HttpWebResponse>`

On the line with `await` in this sample:

```
public async Task<string> GetAsync(string urlToCall)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(urlToCall);
    request.Method = HttpMethod.Get;
    HttpWebResponse response = (HttpWebResponse)await request.GetResponseAsync();
    using (var sr = new StreamReader(response.GetResponseStream()))
    {
        return sr.ReadToEnd();
    }
} 
```

Why?

**Update**

My profile 104 is update with monodroid and monotouch I use NuGet to install Microsoft.Bcl.Async v 1.0.16 If I add AsyncBridge.Portable v 0.2.0 I have no warning of Visual Studio, but it doesn't compile. There are conflicts between this 2 libraries in System.Attributes

How make working this libraries together ?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:42:57.663

我使用了来自 Nuget 的 Bcl.async 和 AsyncBridge.Portable，但我遇到了错误。

如果我使用来自 Nuget 的 Bclasync 和 Daniel Plaisted 创建的 AsyncBridge.Portable 就可以了。

我很想知道丹尼尔在做什么来制作这个库？

谢谢，

# java - What does it mean "No Launcher activity found! and The launch will only sync the application package on the device!"

> ID：15278900
> 
> 赞同：0
> 
> 时间：2013-03-07T18:25:33.333
> 
> 标签：java, android

I got this warning from console when running my application on emulator No Launcher activity found! The launch will only sync the application package on the device!

In fact i have declared two activities as the GMapsActivity and MainActivity launcher in AndroidManifest.xml file

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.emsgpstracking.fh"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="16" />
      <uses-permission android:name="android.permission.INTERNET"/>
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity

            android:name="com.emsgpstracking.fh.GMapsActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.main" />

            <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
             android:exported="false"
            android:name="com.emsgpstracking.fh.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.main.MAINACTIVITY" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
         <uses-library android:name="com.google.android.maps" />

    </application>

</manifest> 
```

What's the reason? Please give me a solution

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:27:02.707

The line:

```
<action android:name="android.intent.action.main" /> 
```

Should be:

```
<action android:name="android.intent.action.MAIN" /> 
```

# cmd - 命令提示符中的 FINDSTR

> ID：15278902
> 
> 赞同：0
> 
> 时间：2013-03-07T18:25:45.247
> 
> 标签：cmd, find, command-prompt, findstr

`FINDSTR`我正在尝试使用in 中的命令从包含某个字符串的输入文件中生成一个包含所有行的文件`cmd.exe`。我下面的命令不会产生任何结果，而`FIND`命令（也在下面）显示有 182,688 行包含我正在寻找的字符串......

**查找命令：**

```
FIND /c "searchstring" c:\Users\karl\Desktop\Report.csv 
```

给出以下内容：

```
---------- C:\USERS\KARL\DESKTOP\REPORT.CSV: 182688 
```

**FINDSTR 命令：**

```
findstr /i /c:"searchstring" c:\Users\karl\Desktop\Report.csv > results.out 
```

给了我一个名为 results.out 的空白文件。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:15:29.493

FINDSTR 有许多可能会绊倒您的未记录“功能”。请参阅[Windows FINDSTR 命令有哪些未记录的功能和限制？](https://stackoverflow.com/q/8844868/1012053)

你还没有告诉我们你的搜索字符串是什么，所以我不能确定。但您的问题可能与以下一项或多项有关：

*   `"`转义和`\`文字搜索字符串内的特殊规则
*   许多扩展的 ASCII 字符在命令行搜索字符串中使用时找不到自己。
*   FINDSTR 无法搜索 unicode 文件。有人告诉我 FIND 可以搜索 unicode 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T13:37:27.240

试试这个。/n 给出一个行号：

`findstr /i /n "\<searchstring\>" c:\Users\karl\Desktop\Report.csv`

# php - php curl won't connect using proxy

> ID：15278903
> 
> 赞同：3
> 
> 时间：2013-03-07T18:25:50.343
> 
> 标签：php, curl, proxy

I have a script on my shared web hosting and i want to do curl calls along with proxies. here is my script

```
<?php

$ch = curl_init("http://dynupdate.no-ip.com/ip.php");

curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_PROXY, "187.20.30.97:8080");
curl_setopt($ch, CURLOPT_HTTPHEADER, Array("Content-Type:application/x-www-form-urlencoded"));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; GTB7.4; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; InfoPath.2)"); 
curl_setopt($ch, CURLOPT_COOKIE, "auth=somevaluehere");
$x = curl_exec($ch);    

print "page:" . htmlentities($x) . curl_error($ch) ;

curl_close($ch);

?> 
```

But it keep loading for ages then shows error : couldn't connect to host.

But if i didn't use proxies it will load immediately.

I have got two shared hostings one on godaddy and one on another cheap web hosting and both didn't work. i think it is a server side configuration that deny the using of proxies?

EDIT : I figured out that the server is running in Safe Mode.

# android - Google Maps V2 maps always blank

> ID：15278905
> 
> 赞同：0
> 
> 时间：2013-03-07T18:25:55.407
> 
> 标签：android, google-maps-android-api-2

I'm trying to implement Google's new api v2 on Android 2.3.3 with the debug.keystore

What ever i do i get a blank map..

**Code:**

```
public class MainFragment extends FragmentActivity{

    @Override
    protected void onCreate(Bundle arg0) {
        super.onCreate(arg0);
        setContentView(R.layout.activity_map);
    }       
} 
```

**activity_map.xml:**

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <fragment
        android:name="com.WhosAround.MainFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"/>

</FrameLayout> 
```

**Manifest.xml:**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.WhosAround"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="10" />

    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="com.WhosAround.permission.MAPS_RECEIVE" />

    <permission
        android:name="com.WhosAround.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />
    <permission
        android:name="com.WhosAround.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.permission.MAPS_RECEIVE" />
    <uses-permission android:name="com.WhosAround.permission.C2D_MESSAGE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <application
        android:name="com.WhosAround.AppVariables"
        android:allowBackup="true"
        android:icon="@drawable/questionmark"
        android:label="Who&apos;s Around?"
        android:theme="@android:style/Theme.NoTitleBar"
        android:windowSoftInputMode="stateHidden" >
        <uses-library android:name="com.google.android.maps" />
        <!-- android:name="com.WhosAround.Activities.PreLoader" -->
        <activity
            android:name=".MainFragment"
            android:configChanges="orientation"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="my_key_generated_from_google" />
    </application>

</manifest> 
```

any ideas ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:55:44.860

由于某种原因，它突然起作用了......也许谷歌控制台服务器需要时间来更新......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:36:38.760

我发现如果您更换计算机，您的调试 api 密钥就会失效。我必须为我的笔记本电脑和家里的电脑生成一个，然后在两者之间切换。这是因为它使用 pc mac 地址来验证代码。如果你没有改变电脑，你可以看看[这个](https://stackoverflow.com/questions/13747455/google-mapfragment-is-blank-white-with-could-not-find-class-maps-j-k)问题。

# photoshop - 如何在 PS CS6 中为 web 保存选定的图层？

> ID：15278910
> 
> 赞同：0
> 
> 时间：2013-03-07T18:26:05.360
> 
> 标签：photoshop

如何在 PhotoShop CS6 中为 web 保存选定的图层？我有一个 PSD 设计，我只想将徽标保存为 png。如何在 Photoshop cs6 中执行此操作？这有什么捷径吗？

提前致谢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:29:33.847

隐藏所有其他图层！然后选择你的图层，alt+点击眼睛符号。隐藏除选定图层之外的所有图层。然后保存为网络

将其复制到新文档中：
选择要导出到新文件的图层。
在顶部菜单中，单击“图层”->“复制图层...”
第二个选项用于目的地。选择“新建”

# vb.net - Unable to Catch COMException ( VB.net Excel workbook.styles)

> ID：15278912
> 
> 赞同：1
> 
> 时间：2013-03-07T18:26:15.983
> 
> 标签：vb.net, styles, try-catch, excel-interop, comexception

I'm using VB.net in MS Visual Studio 2012 to create an add-in for Excel (2010, 2007). The add-in uses Excel's Styles to format reports. Rather than iterate through the Styles collection, I thought it would be easier to try getting a reference to my style by name and catch the exception if it doesn't exist.

```
Imports xi = Microsoft.Office.Interop.Excel

<ComVisible(True)> _
<ClassInterface(ClassInterfaceType.None)> _
Public Class ReportOptions
    Implements IReportOptions

    Private Const _TitleStyleName As String = "TitleStyle"
    Private Const _SubtitleStyleName As String = "SubtitleStyle"

    Public Sub SetDefaults() Implements IReportOptions.SetDefaults
        Dim MyApp As xi.Application
        Dim wb As xi.Workbook
        Dim styles As xi.Styles
        Dim SubtitleStyle As xi.Style
        Dim TitleStyle As xi.Style

        MyApp = GetObject(, "Excel.Application")
        wb = MyApp.ActiveWorkbook
        styles = wb.Styles
        Try
            SubtitleStyle = styles.Item(_SubtitleStyleName) 'Exception here
        Catch ex As COMException
            SubtitleStyle = styles.Add(_SubtitleStyleName)
        End Try

        TitleStyle.Font.Name = "Calibri"
        'More code setting style values

        'Code to clean up the COM Objects...
    End Sub
End Class 
```

I keep getting Visual Studio's exception dialog for "COMException crossed a native/managed boundary" with the following details:

```
Invalid index. (Exception from HRESULT: 0x8002000B (DISP_E_BADINDEX))
at System.RuntimeType.ForwardCallToInvokeMember(String memberName, BindingFlags flags, Object target, Int32[] aWrapperTypes, MessageData& msgData)
at Microsoft.Office.Interop.Excel.Styles.get_Item(Object Index)
at ReportClassLibrary.ReportClassLibrary.ReportOptions.SetDefaults() in <Path>\ReportClassLibrary.vb:line 68 
```

I have tried everything I could think of to catch this "simple" exception:

1.  the infamous catch-all **"Catch ex As Exception"**, or **"Catch"**
2.  Googled various combinations of COMException, DISP_E_BADINDEX, workbook.styles, and several forms of "can't catch exception"
3.  verified the Thrown checkbox is NOT checked for COMException under **Common Language Runtime Exceptions -> System.Runtime.InteropServices**
4.  treating it as a Corrupt State Exception [(CSE)](http://msdn.microsoft.com/en-us/library/system.runtime.exceptionservices.handleprocesscorruptedstateexceptionsattribute.aspx) by adding the **HandleProcessCorruptedStateExceptions** Attribute
5.  Checked **Enable native code debugging** in the Debug section of the Project Properties

I realize it may be better (and possibly even faster) to loop through entire Styles collection looking for a match to **_TitleStyleName**, but I would much prefer to understand why I've been unable to simply **Catch** this Exception.

Thank you for taking the time to read all this. :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:21:50.420

我知道它必须是简单的！

我打算按照 Hans Passant 的建议仔细检查 Exception 设置，但乍一看我没有在**Debug menu**上看到 Exceptions 选项。相反，我在底部附近看到了**选项和设置。**这带来了选项对话框。在**Debugging** -> **General**部分，我发现**Break when exceptions cross AppDomain or managed/native boundary**。

我取消选中该框，现在我的 try/catch 块按预期处理 COMException！

**总结**
如果您在捕获异常时遇到问题，请查看它是否跨越了 AppDomain 或托管/本机边界。如果是这样：
1) 转到**调试**菜单
2) 单击**选项和设置**
3) 转到**调试 -> 常规**部分
4)**当异常跨越 AppDomain 或托管/本机边界时取消选中中断**

# android - Android SQLiteException：没有这样的表错误

> ID：15278913
> 
> 赞同：0
> 
> 时间：2013-03-07T18:26:16.460
> 
> 标签：android, sqlite, android-contentprovider, simplecursoradapter, android-cursoradapter

我创建了一个 CursorLoader 来与我的[Contentprovider](https://stackoverflow.com/questions/15232014/sqlite-content-provider-assistant)一起工作（单击以查看提供程序），但我收到了一个`swapCursor`错误

> “未为类型 CursorAdapter 定义方法 swapCursor(Cursor)”

将 SwapCursor 更改为 changeCursor 以消除错误。

新错误是加载程序或提供程序试图提取 sqlite 数据。请看logcat

任何帮助将不胜感激。

日志猫：

```
03-10 10:35:02.788: E/AndroidRuntime(1318): FATAL EXCEPTION: ModernAsyncTask #1
03-10 10:35:02.788: E/AndroidRuntime(1318): java.lang.RuntimeException: An error occured while executing doInBackground()
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.support.v4.content.ModernAsyncTask$3.done(ModernAsyncTask.java:137)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at java.lang.Thread.run(Thread.java:856)
03-10 10:35:02.788: E/AndroidRuntime(1318): Caused by: android.database.sqlite.SQLiteException: no such table: _id: , while compiling: SELECT sName, wUrl, uName, pWord, lNotes FROM _id

03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:127)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:94)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:53)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1564)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.database.sqlite.SQLiteQueryBuilder.query(SQLiteQueryBuilder.java:354)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.database.sqlite.SQLiteQueryBuilder.query(SQLiteQueryBuilder.java:291)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at com.loginplus.home.ListProvider.query(ListProvider.java:61)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.content.ContentProvider$Transport.query(ContentProvider.java:178)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.content.ContentResolver.query(ContentResolver.java:310)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.support.v4.content.CursorLoader.loadInBackground(CursorLoader.java:49)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.support.v4.content.CursorLoader.loadInBackground(CursorLoader.java:35)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.support.v4.content.AsyncTaskLoader.onLoadInBackground(AsyncTaskLoader.java:240)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:51)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:40)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at android.support.v4.content.ModernAsyncTask$2.call(ModernAsyncTask.java:123)
03-10 10:35:02.788: E/AndroidRuntime(1318):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-10 10:35:02.788: E/AndroidRuntime(1318):     ... 4 more 
```

装载机活动：

```
public class LoginList extends FragmentActivity implements OnClickListener, OnItemClickListener, LoaderManager.LoaderCallbacks<Cursor> {

private ListView loginList;
private Button webLogin;
private CursorAdapter adapter ;
private static final int LOADER_ID = 02;

private ArrayList<LoginDetails> loginArrayList;

@Override 
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

setContentView(R.layout.login_listview);
getSupportLoaderManager().initLoader(LOADER_ID, null, this);

String[] from = { dataStore.COLUMN_NAME_SITE, dataStore.COLUMN_NAME_ADDRESS, dataStore.COLUMN_NAME_USERNAME, dataStore.COLUMN_NAME_PASSWORD, dataStore.COLUMN_NAME_NOTES};
int[] to = {R.id.rusName, R.id.ruwUrl, R.id.ruuName, R.id.rupWord, R.id.ruNotes};

adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, null, from, to);

loginList = (ListView)
findViewById(R.id.loginlist);
loginList.setOnItemClickListener(this);

webLogin = (Button)
findViewById(R.id.button3);
webLogin.setOnClickListener(this);  
}

public Loader<Cursor> onCreateLoader(int id, Bundle args) {

String[] projection = { dataStore.COLUMN_NAME_SITE, dataStore.COLUMN_NAME_ADDRESS, dataStore.COLUMN_NAME_USERNAME, dataStore.COLUMN_NAME_PASSWORD, dataStore.COLUMN_NAME_NOTES};
CursorLoader cursorloader = new CursorLoader(this, ListProvider.CONTENT_URI, projection, null , null, null);
return  cursorloader;   
 }
 public void onLoadFinished(Loader<Cursor> cursorLoader, Cursor cursor) {
adapter.changeCursor(cursor); 
}
 public void onLoaderReset(Loader<Cursor> cursorLoader) {
adapter.changeCursor(null);  
}

@Override
public void onClick (View v) {
Intent webLoginIntent = new Intent (this, LoginPlusActivity.class);
startActivity(webLoginIntent);
}

public List<String> populateList (){

List<String> webNameList = new ArrayList<String>();

dataStore openHelperClass = new dataStore (this);

SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();

Cursor cursor = sqliteDatabase.query(dataStore.TABLE_NAME_INFOTABLE, null, null, null, null, null, dataStore.COLUMN_NAME_SITE, null);

while (cursor.moveToNext()){
String sName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_SITE));
String wUrl = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_ADDRESS));
String uName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_USERNAME));
String pWord = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_PASSWORD));
String lNotes = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_NOTES));

LoginDetails lpDetails = new LoginDetails();
 lpDetails.setsName(sName);
 lpDetails.setwUrl(wUrl);
 lpDetails.setuName(uName);
 lpDetails.setpWord(pWord);
 lpDetails.setlNotes(lNotes);

 loginArrayList.add(lpDetails);
 webNameList.add(sName);
}

 cursor.close();
 return webNameList;
} 
```

SQLite 数据库：

```
 String sqlDataStore = "create table if not exists " +
        TABLE_NAME_INFOTABLE + " ("+ BaseColumns._ID + " integer primary key autoincrement,"

                    + COLUMN_NAME_SITE + " text not null,"
                    + COLUMN_NAME_ADDRESS + " text not null,"
                    + COLUMN_NAME_USERNAME + " text not null,"
                    + COLUMN_NAME_PASSWORD + " text not null,"
                    + COLUMN_NAME_NOTES + " text not null);";

        db.execSQL(sqlDataStore);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:11:31.363

为了在适配器中可用，您的 SQLite 表必须有一个“_id”列。看起来你的桌子没有。通常的做法是将其声明为整数主键自动增量。检查[这个答案](https://stackoverflow.com/questions/3192064/about-id-field-in-android-sqlite)。

# tfs - Working with shared libraries across team projects on TFS

> ID：15278915
> 
> 赞同：4
> 
> 时间：2013-03-07T18:26:24.667
> 
> 标签：tfs, shared-libraries, project-management

After working quite long without versioning I am trying to restructure one of my old projects and try to learn how to work with TFS. For the moment I have the following (simplified) structure:

```
$/Application
$/Application/Main (Branch)
...
$/Application/Main/Source
$/Application/Main/Source/Application
$/Application/Main/Source/SharedBinaries
$/Application/Main/Source/SharedSource
$/Application/Main/Source/SharedSource/Library1
$/Application/Main/Source/SharedSource/Library1/Include
$/Application/Main/Source/SharedSource/Library2
$/Application/Main/Source/SharedSource/Library2/Include
$/Application/Main/Source/Tool1
$/Application/Main/Source/Tool2
...
$/Application/Development (branched from Main) 
```

The sourcecode of `Application` resides in `$/Application/Main/Source/Application` while storing binary dependencies such as `*.lib` and `*.dll` files in `$/Application/Main/Source/SharedBinaries`. In `$/Application/Main/Source/SharedSource` there should be a directory for each used library. Right now these are only 3rd party libs such that they only provide the necessary include files and no sourcecode at all.

Now I want to create a new team project for a common library referred to as `ClassLibrary`. The `Application` will use it, but other applications too, such that directly integrating the library would definitely be no good design. Similiar to the app itself we have this hierarchy:

```
$/ClassLibrary
$/ClassLibrary/Main (Branch)
...
$/ClassLibrary/Main/Source
$/ClassLibrary/Main/Source/ClassLibrary
...
$/ClassLibrary/Development (branched from Main) 
```

My very first attempts was to branch `$/ClassLibrary/Main/Source/ClassLibrary` to `$/Application/Main/Source/SharedSource` such that updating the lib, all other projects get the updated version like merging Development to Main however this doesn't work and this is a sign that I have no idea how to structure this right. **What is the general approach of handling such shared content and libraries across different team projects boundaries?**

* * *

*Notice: Yes, this question is another version of one I asked yesterday, which I have deleted to completely update this.*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-29T18:30:43.823

我遇到了和你一样的问题。有一个名为[AIT Dependency Manager](http://visualstudiogallery.msdn.microsoft.com/92a6416d-fc18-4b5b-9b66-fba7af728984)的 Visual Studio 扩展。它绝对是一个可以解决您将类库传播到应用程序的问题的工具。

# c# - 使用 DotNetOpenAuth 刷新授权后收到的新 RefreshToken 如何处理

> ID：15278918
> 
> 赞同：5
> 
> 时间：2013-03-07T18:26:30.837
> 
> 标签：c#, oauth-2.0, dotnetopenauth

`DotNetOpenAuth`每当我们使用new 刷新我们的授权`Oauth2.0` `RefreshToken`时，都会在响应中包含。由于它`RefreshToken`本身是一个长期存在的令牌，我们`RefreshToken`在每次请求后得到一个新令牌的原因是什么？

处理这个新的 RefreshToken 的最佳方法是什么，我们应该在`RefreshToken`每次刷新授权时存储新的，还是应该保留旧的`RefreshToken`而忽略新的？

另请参阅此示例代码以提供一些上下文。

```
var serviceDescription = new AuthorizationServerDescription
{
    ProtocolVersion = ProtocolVersion.V20,
    TokenEndpoint = new Uri(Constants.TokenEndPoint)
};

var client = new WebServerClient(serviceDescription, 
    Constants.ClientId, Constants.ClientSecret);

var authorization = new AuthorizationState() 
{ 
    //Insert our stored RefreshToken
    RefreshToken = TokenStore.Instance.RefreshToken 
};

if (client.RefreshAuthorization(authorization))
{
    //Store or ignore the new RefreshToken?
    var NewRefreshToken = authorization.RefreshToken;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T04:49:21.160

您在响应中返回的刷新令牌可能包含在响应中，也可能不包含在响应中。如果存在，规范说您必须使用新的刷新令牌来进行所有未来的令牌刷新。如果您再次使用旧的，授权服务器可能会完全撤销授权。

这样做的原因，根据我对工作组讨论的理解，是通过定期更改客户端上的刷新令牌，授权服务器可以检测刷新令牌是否已意外泄露给第三方。由于批准的客户端和第 3 方都将使用相同的刷新令牌，如果一方收到新的刷新令牌，另一方仍将使用旧的刷新令牌。当旧的出现时，有两个客户端使用相同的刷新令牌这一事实会提示身份验证服务器存在安全漏洞，并且可能会关闭它。

# java - AlertDialog...没有确定按钮，只有取消

> ID：15278922
> 
> 赞同：1
> 
> 时间：2013-03-07T18:26:56.390
> 
> 标签：java, android

我想显示一个带有确定和取消按钮的警报对话框，但我只得到取消。当我注释掉取消按钮时，我会得到确定按钮。奇怪的。无论如何，这是代码：

```
final AlertDialog ukucajIme = new AlertDialog.Builder(Kviz.this).create();
            ukucajIme.setTitle("Insert your name");
            final EditText input = new EditText(Kviz.this);

            ukucajIme.setView(input);

            ukucajIme.setButton("Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                  Editable ukucanoIme = input.getText();
                  finish();
                  }
                });
            ukucajIme.setButton("Cancel", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int whichButton) {
                     ukucajIme.dismiss();
                     finish();
                  }
                  });
            ukucajIme.show(); 
```

第二个问题：每当我尝试使用 ukucajIme.setPositiveButton 之类的东西时，它都会给我一个错误并说将其更改为 setButton。这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T18:29:37.673

尝试使用方法`setPositiveButton()`和`setNegativeButton()`AlertDialogBu​​ilder 像这样

```
AlertDialog.Builder builder = new AlertDialog.Builder(Kviz.this);

builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog,int which) {
    Editable ukucanoIme = input.getText();
    finish();
});

builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
         dialog.dismiss();
         finish();
         dialog.cancel();
    }
});

AlertDialog dialog = builder.create(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:29:58.570

像这样使用。

使用两个按钮创建警报对话框。`setPositiveButton()`用于在警告对话框中创建一个肯定按钮，并`setNegativeButton()`用于调用否定按钮来警告对话框。

```
AlertDialog.Builder alertDialog = new AlertDialog.Builder(Kviz.this);
ukucajIme.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog,int which) {
       Editable ukucanoIme = input.getText();
       finish();
    }
});

// Setting Negative "Cancel" Button
ukucajIme.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
        finish();
        dialog.cancel();
    }
});

ukucajIme.show();  // Showing Alert Message 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T18:33:16.197

警报对话框不包含 setNegativeButton 或 setPositiveButton。而是使用：

```
ukucajIme.setButton(AlertDialog.BUTTON_POSITIVE, "OK", new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog,int which) {
    Editable ukucanoIme = input.getText();
    finish();
});

ukucajIme.setButton(AlertDialog.BUTTON_NEGATIVE, "Cancel", new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog,int which) {
     ukucajIme.dismiss();
     finish();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T20:09:34.263

好的，这是完整的代码。我只是改变了一些变量。

```
AlertDialog.Builder builder = new AlertDialog.Builder(Kviz.this);
                     builder.setTitle("Ukucaj svoje ime");
                     final EditText input = new EditText(Kviz.this);
                     builder.setView(input);

                     builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                     public void onClick(DialogInterface dialog,int which) {
                         Editable ukucanoIme = input.getText();
                         finish();
                     }
                     });

                     builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                         public void onClick(DialogInterface dialog, int which) {
                              dialog.dismiss();
                              finish();
                         }
                     });
                     builder.show();
                     AlertDialog dialog = builder.create(); 
```

# javascript - iPad 没有在

> ID：15278930
> 
> 赞同：12
> 
> 时间：2013-03-07T18:27:24.790
> 
> 标签：javascript, html, ipad, input

`<input>`在 iPad 上运行我的应用程序时，我遇到了现场问题。

在桌面上单击文本框，输入文本并单击按钮以验证输入。但是在 iPad 上，当您单击它时它会打开键盘面板，但是当您键入时，文本不会显示在文本框中。
为了让事情变得更奇怪，我`<textarea>`在应用程序的另一部分有一个，它运行良好。不同之处在于一个位于应用程序之上，另一个位于导入的 html 中。

应用程序的结构是这样的：

![应用结构](../Images/73a50c7e05bce0e758b5b2f181129ddf.png)

在顶部我有主 HTML5 页面，它导入一个包含 3 个 div 的 html 页面。每个 div 依次导入其他 html 页面。这些页面每个都有不同的内容，包括有问题的输入字段。像这样的东西：

```
Main.html
    -> container.html (imported via iframe)
        -> div1 (imports page n-1 via load(url))
        -> div2 (imports page n via load(url))
        -> div3 (imports page n+1 via load(url))

pageN.html
    -> contains the <input> field 
```

`<textarea>`坐在主html上的代码是这样的：

```
<form id="formNotes">
    <textarea id="mainTextbox" type="text" onKeyUp="RefreshNote()" onChange="RefreshNote()"></textarea>
</form> 
```

`<input>`导入的html页面内的字段代码如下：

```
input{
    -webkit-user-select: auto;
}

<form id="formInput">
    <input id="text1" type="text" ontouchstart="OpenKeyboard(this)" onKeyDown="WriteText(this)" onKeyUp="WriteText(this)" onChange="WriteText(this)"></input>
</form> 
```

我学到的关于在导入的 HTML 上使用事件的一件事是，您需要使用 ontouchstart 和其他方法来调用点击函数。但在这种情况下，我可以让 iPad 打开键盘，所以我不知道为什么它不能识别键盘按键上的点击，或者为什么它没有将值发送到文本框中。

[编辑：] 我发现我没有写任何文本的原因是因为 iPad 认为该`<input>`字段不存在（它在警报中显示为空白，而不是`[object Object]`or `[object HTMLInputElement]`）。我不知道为什么。

[编辑 2：] 我尝试使用`getElementsByTagName`and`getElementsByClassName`而不是`getElementById`. 有了它，它似乎可以识别`<input>`，但我仍然无法达到该值。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-02-05T00:50:45.210

我在构建 PhoneGap 应用程序时遇到了同样的问题。不知道这是否是同一个问题：

罪魁祸首是`-webkit-user-select: none;`。

[这是演示。](http://jsbin.com/ilUZori/1)

我原以为禁用用户选择只会阻止诸如放大镜或复制粘贴按钮之类的各种工具出现，但事实证明这完全禁用了输入。点击输入字段时会出现键盘——但仅此而已：您输入的任何内容都不会显示在输入字段中。

删除`-webkit-user-select: none;`或至少更有选择地应用它就可以了。

只有现在我正在写这个答案，谷歌*终于*提供了。这是[关于SO的另一个答案](https://stackoverflow.com/questions/12812587/phonegap-styles-webkit-user-select-none-disabling-text-field)；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:37:10.070

当您在调用后动态创建输入或加载 html`document.ready`时，jQuery`.live()`函数就是票证。

所以虽然通常你会有这样的功能：

```
$(function () {

    $('#text1').on('keyup', function() {
        // do something
    })
}) 
```

会成为：

```
function doSomething() {
    // do something
}
$(function () {

    $('#text1').live('keyup', doSomething);
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T16:42:13.997

这不是问题的实际解决方案，而是一个相当“粗略”的解决方法。

出于某种原因，iPad 中的键盘没有将值发送到`<input>`，尽管它正在触发键事件。所以我被迫捕获这些值，将它们写下来，然后将完整的字符串发送到文本框中。换句话说，做键盘应该自动开始的相同工作！

```
// Text container
temp = "";

document.addEventListener('keydown', function(event) {

    // Checks if the key isn't the delete
    if(event.keyCode != 8){

       // Converts and writes the pressed key
       temp += String.fromCharCode(event.keyCode);
    }
    else{
       // Deletes the last character
       temp = temp.slice(0, temp.length-1);
    }
}

document.addEventListener('keyup', function(event) {

    // Writes the text in the text box
    document.getElementById("text1").value = temp;
} 
```

但是，此解决方案仅适用于字母数字字符。如果我想使用特殊字符，我需要为每个单独的键代码添加一个开关盒（`charCode`在 iPad 上工作，但在桌面浏览器上表现得很奇怪）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-11T21:54:42.970

另一个粗略的解决方法（适用于所有角色）：

```
document.addEventListener('keydown', function(e) {
  window.focus()
  $(':focus').focus()
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-18T18:52:30.183

我不得不添加`!important`到`user-select: auto`

```
input {
    -webkit-user-select: auto !important;
    -khtml-user-select: auto !important;
    -moz-user-select: auto !important;
    -ms-user-select: auto !important;
    -o-user-select: auto !important;
    user-select: auto !important;  
} 
```

# jquery - ASP.NET 请求和 .NET 4.5 - 奇怪的行为

> ID：15278933
> 
> 赞同：9
> 
> 时间：2013-03-07T18:27:31.467
> 
> 标签：jquery, asp.net, iis, xmlhttprequest, .net-4.5

将产品升级到 .NET 4.5 后，我们的网站上出现了一些奇怪的行为。我会尽量具体，但问题很模糊，所以请多多包涵。此外，对于这种情况，请在没有遵循最佳实践的假设下工作。

用户将进入一个页面，该页面以异步方式对 Web 服务进行大量 jquery ajax 调用。由于此页面上糟糕的设计/编码，加载可能需要很长时间，但它确实提供了用户需要访问的子菜单。页面开始加载后，他们单击其中一个菜单选项以转到另一个页面。到目前为止没有什么特别的。

当我们在仅安装了 .NET 4.0 的机器上使用 perfmon 时，我们可以看到 ASP.NET 请求上下波动，正如您所期望的：

![4.0 盒子上的 Perfmon](../Images/2c7971903a5fe9ece17b7d0f15a60a1d.png)

当我们将它安装在安装了 .NET 4.5 的盒子上时，我们会得到： ![在此处输入图像描述](../Images/cb9b55f690ab0e6b4b11dd28239e8a41.png)

在执行了我上面描述的工作流程后，请求被挂断了。未排队；他们只是坐在那里。

经过进一步研究，我们注意到两个不同页面之间的点击不仅仅是简单的href，实际上是使用了Response.Redirect(url);

**此外，这仅在使用 IE 时发生。使用 Firefox 和 Chrome 时，这不是问题。**

以下是我们迄今为止所做的尝试：

1.  我们已经联系了 M$ 并将他们发送了 DebugDiag 转储。还在等待。
2.  我已经访问了 IIS，将站点设置为跟踪失败的请求，并设置了失败的请求过滤器来为我提供一切。一旦站点锁定，我会清除日志，然后检查站点锁定后的内容。每次它在 AspNetSessionDataBegin 和 AspNetSessionDataEnd 事件之间挂起。
3.  我们确实有一个读取/写入会话的 HttpHandler，禁用它似乎在很大程度上解决了问题，但没有解释原因。
4.  jquery 的 onunload 处理程序，它应该清理并中止所有剩余的 xmlhttp 请求，似乎没有持续执行。
5.  安装了这个[补丁](http://support.microsoft.com/kb/2759112)，还是没用。
6.  我们目前正在将此导航逻辑中的 Response.Redirect(url) 方法更改为 Response.Redirect(url, false); （往上看）。

同样根据要求，这里是 HttpHandler 代码：

```
public class KeepSessionAliveHttpHandler : IHttpHandler, IRequiresSessionState
{
    public bool IsReusable
    {
        get { return true; }
    }

    public void ProcessRequest(HttpContext context)
    {

        if (context.Session.IsNewSession)
        {
            string redirectUrl = context.Request.Url.AbsoluteUri.Replace(context.Request.Url.AbsolutePath, VirtualPathUtility.ToAbsolute(Constant.Page_Logout));
            context.Response.Clear();
            context.Response.ContentType = "application/json; charset=utf-8";
            context.Response.Flush();
            context.Response.Write("{\"IsSessionAlive\": \"false\", \"RedirectUrl\": \"" + redirectUrl + "\"}");
        }
        else
        {
            context.Session["KeepSessionAlive"] = TimeZoneHelper.GetCurrentUtcDateTime();

            context.Response.Clear();
            context.Response.ContentType = "application/json; charset=utf-8";
            context.Response.Flush();
            context.Response.Write("{\"IsSessionAlive\": \"true\"}");
        }
    }
} 
```

关于我们下一步应该看哪里的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:30:08.737

Microsoft 现已发布以下补丁，似乎无需更改 web.config 或 IIS 配置即可修复该问题。 [http://support.microsoft.com/kb/2828841/en-us](http://support.microsoft.com/kb/2828841/en-us) [http://support.microsoft.com/kb/2828842/en-us](http://support.microsoft.com/kb/2828842/en-us)

# 以前的答案

在 .NET 兼容性团队提供的进一步调查和洞察/解决方案之后，我正在编辑这个答案。

[如果 IE9 用户在调用正在进行时离开页面，则](https://stackoverflow.com/questions/15437524/managedpipelinehandler-for-an-ajax-post-crashes-if-an-ie9-user-navigates-away-fr/15484368#15484368)在 ManagedPipelineHandler 中找到的 AJAX POST 解决方案似乎对我们来说更可靠。这是我们在 IE8-10 中遇到的行为，但不仅仅是 9。

我将在这里保留旧答案，因为如果第一个答案不相关，它希望可以将人们引向另一个方向。

# 以前的回答

源最终是会话锁定。AspNetSessionDataBegin 和 AspNetSessionDataEnd 事件应该是一个死的赠品。对于遇到同样问题的任何人，请查看您何时以及如何写入会话。这些链接也有帮助。

[完全替换 ASP.Net 的会话](https://stackoverflow.com/questions/8989648/replacing-asp-nets-session-entirely)

[我刚刚发现了为什么所有 ASP.Net 网站都很慢，我正在尝试解决这个问题](https://stackoverflow.com/questions/3629709/i-just-discovered-why-all-asp-net-websites-are-slow-and-i-am-trying-to-work-out/3660837)

# mongodb - MongoDb：如何从嵌套数组中取消设置属性？

> ID：15278944
> 
> 赞同：6
> 
> 时间：2013-03-07T18:27:57.753
> 
> 标签：mongodb

我试图从三重嵌套数组中删除一个属性，但没有成功。这是我要删除的数据的示例：

```
Controls: [
    {    
        Name: 'ControlNumberOne',
        Submit: {   
            Executes: [
                {
                    Name: 'execute',
                    Type: 0
                },
                {
                    Name: 'anotherExecute',
                    Type: 0
                }
            ]
        }
    },
    {    
        Name: 'ControlNumberTwo',
        Submit: {   
            Executes: [
                {
                    Name: 'anotherFromAnotherControl',
                    Type: 1
                }
            ]
        }
    }

] 
```

我尝试了以下更新查询，但没有一个有效：

*   `db.Page.update('Controls.Submit.Executes.Type': { $exists : true } }, { $unset : { 'Controls.Submit.Executes.Type' : 1 } }, false, true);)`

*   `db.Page.update('Controls.Submit.Executes.Type': { $exists : true } }, { $unset : { 'Controls.$.Submit.Executes.$.Type' : 1 } }, false, true);)`

但是，如果我执行`db.Page.find('Controls.Submit.Executes.Type': { $exists : true } })`它确实会返回所有仍然具有 Type 属性的 Executes。

这可以实现吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T22:10:38.113

MongoDB 命令不（还）直接支持查询和更新嵌套数组，这必须在客户端完成：

*   将文档读入变量
*   操作数组
*   更新文档，重写整个数组

在 Jira 上查看此问题：[https](https://jira.mongodb.org/browse/SERVER-831) ://jira.mongodb.org/browse/SERVER-831和 stackoverflow 上的此线程：[Mongo update of subdocs](https://stackoverflow.com/questions/15236322/mongo-update-of-subdocs)

鉴于您的示例，这将如下所示：

```
db.xx.find(
    {'Controls.Submit.Executes.Type': { $exists : true } }
).forEach( function(doc) {
    doc.Controls.forEach( function(c) {
        c.Submit.Executes.forEach( function(e) {
            if ( e.Type != undefined ) delete e.Type;        
        });
    });
    db.xx.update({_id: doc._id},{$set:{Controls:doc.Controls}});
}); 
```

结果是：

```
> db.xx.findOne()
{
    "Controls" : [
        {
            "Name" : "ControlNumberOne",
            "Submit" : {
                "Executes" : [
                    {
                        "Name" : "execute"
                    },
                    {
                        "Name" : "anotherExecute"
                    }
                ]
            }
        },
        {
            "Name" : "ControlNumberTwo",
            "Submit" : {
                "Executes" : [
                    {
                        "Name" : "anotherFromAnotherControl"
                    }
                ]
            }
        }
    ],
    "_id" : ObjectId("5159ff312ee0f7d445b03f32")
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-07-08T07:29:01.923

如果有人仍在寻找答案（像我一样），就在这里。

在 MongoDB 版本 3.6+ 中，现在可以使用位置运算符更新数组中的所有项目，包括更深的嵌套级别。请参阅[此处的官方文档](https://docs.mongodb.com/manual/reference/operator/update/positional-all/)。：

```
db.getCollection('xxx').update(
   {'Controls.Submit.Executes.Type': { $exists : true },
   { $unset : {'Controls.$[].Submit.Executes.$[].Type' : 1}}
) 
```

此代码经过测试，可与 MongoDB CLI、RoboMongo 和 Mongo-Java 驱动程序很好地配合使用。

# c# - 如何从包含多个 GzipStreams 的文件中读取

> ID：15278951
> 
> 赞同：5
> 
> 时间：2013-03-07T18:28:23.423
> 
> 标签：c#, gzip, gzipstream

我有一个使用如下代码创建的文件：

```
 using (var fs=File.OpenWrite("tmp"))
        {
            using (GZipStream gs=new GZipStream(fs,CompressionMode.Compress,true))
            {
                using (StreamWriter sw=new StreamWriter(gs))
                {
                    sw.WriteLine("hello ");
                }
            }

            using (GZipStream gs = new GZipStream(fs, CompressionMode.Compress, true))
            {
                using (StreamWriter sw = new StreamWriter(gs))
                {
                    sw.WriteLine("world");
                }
            }
        } 
```

现在我正在尝试使用以下代码从该文件中读取数据：

```
 string txt;

        using (var fs=File.OpenRead("tmp"))
        {
            using (GZipStream gs=new GZipStream(fs,CompressionMode.Decompress,true))
            {
                using (var rdr = new StreamReader(gs))
                {
                    txt = rdr.ReadToEnd();
                }
            }

            using (GZipStream gs = new GZipStream(fs, CompressionMode.Decompress, true))
            {
                using (StreamReader sr = new StreamReader(gs))
                {
                    txt+=sr.ReadToEnd();
                }
            }
        } 
```

第一个流读取正常，但第二个流没有读取。

如何阅读第二个流？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T08:59:26.550

这是 GzipStream 处理具有多个 gzip 条目的 gzip 文件的方式的问题。它读取第一个条目，并将所有后续条目视为垃圾（有趣的是，gzip 和 winzip 等实用程序通过将它们全部提取到一个文件中来正确处理它）。有几种解决方法，或者您可以使用第三方实用程序，如DotNetZip ( [http://dotnetzip.codeplex.com/](http://dotnetzip.codeplex.com/) )。

也许最简单的方法是扫描文件中的所有 gzip 标头，然后手动将流移动到每个标头并解压缩内容。这可以通过在原始文件字节中查找 ID1、ID2 和 0x8 来完成（Deflate 压缩方法，参见规范：[http](http://www.gzip.org/zlib/rfc-gzip.html) ://www.gzip.org/zlib/rfc-gzip.html ）。这并不总是足以保证您正在查看 gzip 标头，因此您需要读取标头的其余部分（或至少前十个字节）以验证：

```
 const int Id1 = 0x1F;
    const int Id2 = 0x8B;
    const int DeflateCompression = 0x8;
    const int GzipFooterLength = 8;
    const int MaxGzipFlag = 32; 

    /// <summary>
    /// Returns true if the stream could be a valid gzip header at the current position.
    /// </summary>
    /// <param name="stream">The stream to check.</param>
    /// <returns>Returns true if the stream could be a valid gzip header at the current position.</returns>
    public static bool IsHeaderCandidate(Stream stream)
    {
        // Read the first ten bytes of the stream
        byte[] header = new byte[10];

        int bytesRead = stream.Read(header, 0, header.Length);
        stream.Seek(-bytesRead, SeekOrigin.Current);

        if (bytesRead < header.Length)
        {
            return false;
        }

        // Check the id tokens and compression algorithm
        if (header[0] != Id1 || header[1] != Id2 || header[2] != DeflateCompression)
        {
            return false;
        }

        // Extract the GZIP flags, of which only 5 are allowed (2 pow. 5 = 32)
        if (header[3] > MaxGzipFlag)
        {
            return false;
        }

        // Check the extra compression flags, which is either 2 or 4 with the Deflate algorithm
        if (header[8] != 0x0 && header[8] != 0x2 && header[8] != 0x4)
        {
            return false;
        }

        return true;
    } 
```

请注意，如果您直接使用文件流，GzipStream 可能会将流移动到文件末尾。您可能希望将每个部分读入 MemoryStream，然后在内存中单独解压缩每个部分。

另一种方法是修改 gzip 标头以指定内容的长度，这样您就不必扫描文件中的标头（您可以以编程方式确定每个标头的偏移量），这需要更深入地研究gzip 规范。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T18:42:26.317

多部分 gzip 处理似乎现在在 .NET Core 中实现。此讨论对于 .NET Framework 仍然有效。

* * *

这是 GzipStream 中的一个错误。根据[gzip 格式的 RFC 1952 规范](https://www.rfc-editor.org/rfc/rfc1952)：

> 2.2\. 文件格式
> 
> gzip 文件由一系列“成员”（压缩数据集）组成。每个成员的格式在下一节中指定。成员只是在文件中一个接一个地出现，在它们之前、之间或之后没有其他信息。

因此，一个兼容的解压器需要在前一个 gzip 成员之后立即寻找另一个 gzip 成员。

您应该能够简单地使用有缺陷的 GzipStream 读取单个 gzip 成员的循环，然后再次使用 GzipStream 从最后一次使用 GzipStream 未使用的第一个输入字节开始读取下一个 gzip 成员。这将是完全可靠的，而不是尝试搜索 gzip 成员的开头的其他建议。

压缩数据可以具有任何字节模式，因此当它实际上是 gzip 成员的压缩数据的一部分时，可能会误以为您找到了 gzip 标头。实际上，deflate 方法之一是不压缩存储数据，在这种情况下，可能会存储在 gzip 成员中压缩的 gzip 流（因为大部分数据已压缩，因此很可能无法进一步压缩），因此会在 gzip 成员的压缩数据中间显示一个完全有效的虚假 gzip 标头。

使用 DotNetZip 的建议是一个很好的建议。GzipStream 中存在许多错误，其中一些已在 NET 4.5 中修复，而一些显然没有。微软可能需要几年时间才能弄清楚如何正确编写该类。DotNetZip 可以正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-27T08:25:36.107

DeflateStream 也有类似的问题。

一种简单的方法是将底层 Stream 包装在 Stream 实现中，当调用 Read(byte[] buffer, int offset, int count) 时，该实现只返回一个字节。这会阻碍 DeflateStream/GZipStream 的缓冲，当到达第一个流的末尾时，将底层流留在正确的位置。当然，由于对 Read 的调用次数增加，这里显然效率低下，但这可能不是问题，具体取决于您的应用程序。

深入了解 DeflateStream 的内部结构，可以使用反射来重置内部 Inflater 实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-16T00:09:11.930

我已经验证[SharpZipLib](https://icsharpcode.github.io/SharpZipLib/) 0.86.0.518 可以读取多成员 gzip 文件：

```
using (var fileStream = File.OpenRead(filePath))
using (var gz = new GZipInputStream(fileStream))
{
    //Read from gz here
} 
```

您可以使用 NuGet 获取它。

# ruby-on-rails - Rails UJS ajax：完成不触发

> ID：15278952
> 
> 赞同：0
> 
> 时间：2013-03-07T18:28:29.477
> 
> 标签：ruby-on-rails, jquery, ujs

我有一个使用 Rails UJS 触发 ajax 请求的链接。响应实际上替换了包含链接的父元素。ajax:before 事件按预期触发，但 ajax:complete 事件永远不会触发。我认为这只是元素被替换的结果。但只是为了检查，我直接绑定到一个 ajax“完成”回调而不使用 UJS，它工作正常。

所以我的问题是为什么“完成”回调在直接绑定到 ajax 调用时起作用，但在通过 UJS 绑定到“ajax：完成”时不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:41:19.363

阅读这个 jquery-ujs 问题：

[事件 ajax:complete 不会在表单替换后触发](https://github.com/rails/jquery-ujs/issues/223)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-07T20:56:01.480

我之前发表评论时并没有考虑（道歉），但现在我想我足够清醒可以帮助你:)。

尽管 JQuery 支持 script() 函数，但您通常不会通过 Ajax 触发 UJS！使用带有 remote:true 的常规 form_tag（这将在您的表单中粘贴一个“数据远程”标签。Ajax 与 JSON 和 UJS 一起使用，您将返回纯 js

请记住，该操作通常会以 app/views/<controller>/<action>.js.erb 的名称呈现到表单（或您当前使用的任何模板技术）

请记住在您的控制器中有 respond_to 块，例如

```
`respond_to do |format|
  format.js   #note.. not .json
end` 
```

`还要确保您的请求标头接受 javascript.. 'application/javascript', 'script'`

# curl - 此 html 表单的等效 Curl 调用

> ID：15278953
> 
> 赞同：0
> 
> 时间：2013-03-07T18:28:29.980
> 
> 标签：curl

我有以下html表单：

```
<form method="post" action="http://api.website.com/upload/index.php" enctype="multipart/form-data">
<input type="text" name="myhandle" />
<input type="file" name="file" />
<input type="submit" value="submit" />
</form> 
```

如果我在 Linux 上的 Bash 中，等效的 CURL 调用是什么？我试过 ：

```
curl -X POST '-F file=@1.jpg -d myhandle=helloworld' http://api.website.com/upload/index.php 
```

但我不断收到此错误：

```
curl: (26) failed creating formpost data 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:34:35.183

我想到了

```
curl --form file=@1.jpg --form myhandle=helloworld http://api.website.com/upload/index.php 
```

# ios5 - 如何让我的 iPhone 应用程序按计划或按需与我的服务器通信？

> ID：15278957
> 
> 赞同：1
> 
> 时间：2013-03-07T18:28:39.337
> 
> 标签：ios5, networking, background

所以基本上我们想要构建一个 iPhone/iPad 应用程序，它可以让用户阅读我们公司的文件，但是当手机丢失或被盗时，我们希望能够删除存储在手机上的文件。为此，任一服务器都需要向移动设备发送推送通知消息，或者移动设备应该能够以计时器为基础（例如每 1 小时）与服务器进行回通信。

我是 iPhone 开发的新手。根据我在网上的阅读，以下是我发现的，如果我在这里错了，请纠正我：

*   无法安排我的应用程序在本地以计时器为基础运行
*   我可以使用 APNS 推送通知向设备发送通知，这样用户就会点击通知，我的应用就会启动。那时我将能够与我的服务器通信以获取删除命令，然后我的应用程序将删除手机上的文档
*   我可以使用本地推送通知来为我的应用安排通知，这样用户就会点击通知，我的应用就会启动。那时我将能够与我的服务器通信以获取删除命令，然后我的应用程序将删除手机上的文档。这与 APNS 推送通知相同。

然而，在上述案例 2 和案例 3 中，需要用户交互。那么如果我的手机丢失或被盗并且手机有 PIN 码保护怎么办。拥有我手机的人无法解锁手机。在这种情况下，我的应用程序将永远无法与服务器通信，因此它将无法删除文档。

我的理解在这里正确吗？对这个案子有什么建议吗？非常感谢您的建议和见解。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:36:40.063

> 当手机丢失或被盗时，我们希望能够删除手机上存储的文件。

[您可以使用iCloud 远程擦除功能](http://support.apple.com/kb/ph2701)擦除整个手机。为什么不使用它？

![在此处输入图像描述](../Images/8d13e60a36cc9e608f90d21193c3bf8c.png)

![在此处输入图像描述](../Images/4d87955bb67a599f3dbcca5540e05140.png)

# ios - 为半透明工具栏添加标题

> ID：15278959
> 
> 赞同：0
> 
> 时间：2013-03-07T18:28:48.290
> 
> 标签：ios, objective-c, xcode

我正在使用一个使用导航控制器和 UITableViewControllers 的应用程序。我想在其中一个表视图中添加一个工具栏。所以使用 setToolBarHidden 我确实设法显示工具栏并将其设置为半透明。但是我想为该工具栏添加一个标题。您可能会问，如果工具栏实际上是用于工具的，为什么要这样做？答案是只要添加新单元格，我的应用程序就需要显示一个值。我尝试添加自定义工具栏，但它坚持导航栏，因为它是一个表格视图。有什么解决办法吗？（我想我没有应该显示的代码）

![在此处输入图像描述](../Images/a60a935c9520c89dd830054545635eda.png)

注意：这是所需的输出，但工具栏应该是半透明的，这不应该是一个问题，因为有一个功能！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:55:44.253

我找到了答案（我自己真的）。实际上，这是我发现的一个技巧，它使您可以在工具栏中输入类似标签的文本。您所要做的就是使用对象库中的灵活空间和工具项对象。你实际上要添加两个灵活的空间和一个项目。然后将项目放置在中间的两个空格之间，并将项目的样式更改为普通。然后你可以给它一个出口来改变它的名字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:49:27.460

您可以设置您以编程方式创建的 backgroundImage 以及在其中绘制 Text 的位置。利用`UIToolbar.setBackgroundImage:forToolbarPosition:barMetrics:`

# php - PHP - 常量数组

> ID：15278961
> 
> 赞同：2
> 
> 时间：2013-03-07T18:28:52.457
> 
> 标签：php

我有一个小的 PHP 脚本，在其中使用全局变量是有意义的。其中一个全局变量是一个数组，它只包含要解包但不被几个不同函数修改的值。如果脚本扩展，拥有一个全局数组的想法有点令人不安。有没有办法将一个全局数组变成一个不变的、不可修改的值？如果是这样，我仍然可以使用它的`implode()`功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:39:40.417

PHP 常量不支持高级数据结构，因此无法将数组存储为常量的值。除非你按照你提到的那样做，通过爆炸字符串。

有几个全局变量（称为超全局变量）可在所有 PHP 范围内使用：

*   $_GET
*   $_POST
*   $_REQUEST
*   $_SERVER
*   $全球

我强烈建议使用`$GLOBALS`, 并将您的数组放在该数组中。它将立即在任何函数、类或包含文件中可用。

```
<?php
$GLOBALS['my_arr'] = array('key1' => 'val1', 'key2' => 'val2');

function my_func() {
  return $GLOBALS['my_arr']['key1'];
}

print my_func(); // prints: val1 
```

虽然您*可以*序列化常量的值或在您想从中获取值时对其进行分解，但请记住，转换操作确实需要时间。当您可以简单地将值附加到`$GLOBALS`. 如果您需要在脚本中引用来自三个不同范围的单个值，您将被迫取消序列化或分解三个不同的时间。这会占用更多内存，最重要的是，会占用处理时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:32:12.110

我害怕明确地说“不，你不能”，但我很确定情况就是这样。您可以做的是在某处创建一个静态函数，该函数将始终返回相同的值数组。那能解决你的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T18:39:21.223

您可以序列化数组并在脚本中定义一个常量；

```
define("GLOBAL_DATA", "xxxxxxxx");   -- use the serialized array 
```

任何函数现在都可以反序列化常量并获取原始数组，知道它没有被修改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-12T10:25:11.217

使用 PHP 的 json_encode() 函数将其转换为 JSON，并使用 json_decode() 将其转换回字符串。

例子：

```
<?php
define('CONSTANT',json_encode(array('test')));
//Use the constant:
if(in_array('CONSTANT',json_decode(constant('CONSTANT')))) {
    return true;
} else {
    return false;
}
?> 
```

# cloud-foundry - 如何将 ngnix 服务添加到 Cloudfoundry

> ID：15278962
> 
> 赞同：1
> 
> 时间：2013-03-07T18:28:54.597
> 
> 标签：cloud-foundry

我想在我的 cloudfoundry 安装中使用 ngnix 而不是 Apache 作为 PHP 应用程序的前端，这可能吗？

所以想法是使用 PHP-FPM 而不是 mod_php

任何示例/收据将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:52:51.603

通过 BOSH 而不是 dev_setup 安装的最新版本的 Cloud Foundry 包括对构建包的支持。我看不出为什么你不能在 php 的构建包中包含 nginx 和 php-fpm。我们正在编写用于在 OpenStack、AWS 和 VSphere 等虚拟环境中构建所有“前沿”东西的文档，但这一切都将通过我们的工具“BOSH”完成。

有一个支持构建包的 Micro Cloud Foundry 构建，但是，目前该特定构建不支持运行服务，如果需要，我可以提供链接。

# c# - TransactionScope 的真正作用是什么

> ID：15278963
> 
> 赞同：12
> 
> 时间：2013-03-07T18:29:00.943
> 
> 标签：c#, transactions, transactionscope, distributed-transactions

调查它，我验证了例如值 o "myInt" 在以下场景中没有回滚

```
int myInt = 10;
using (TransactionScope scope = new TransactionScope(TransactionScopeOption.RequiresNew))
{
    myInt=20;
    Transaction t = Transaction.Current;

    t.Rollback();
} 
```

所以它让我想到“TransactionScope 是否只回滚与数据库相关的活动？还是事务可以管理其他事情而我不知道这些？”

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-07T18:43:08.090

当前事务仅影响称为资源管理器的特定对象。这些对象必须实现特定的接口才能参与事务。ADO.NET SqlConnection 对象就是一个例子。创建一个用作“事务性内存”的对象并不难。这些对象称为易失性资源管理器。一个简单的例子是[here](http://www.codeguru.com/csharp/.net/net_data/sortinganditerating/article.php/c10993/SystemTransactions-Implement-Your-Own-Resource-Manager.htm)。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-07T18:34:05.590

TransactionScope（和 Transactions）仅用于处理数据库查询。无论如何“回滚”只是暂时保留的更改（例如您的 int 变量）是没有意义的。

# mysql - MySQL：当所有字段为NULL时如何返回空记录？

> ID：15278964
> 
> 赞同：2
> 
> 时间：2013-03-07T18:29:02.927
> 
> 标签：mysql, sql, null

情况一：

```
SELECT SUM(mark) AS totalMark, userID, credit
FROM users, marks
WHERE marks.receiverID = users.userID
AND userID = '2' 
```

它会回来

```
totalMark   userID  credit
---------------------------
0           2       0.0 
```

而且非常好，没问题。但这里是情况2：

```
SELECT SUM(mark) AS totalMark, userID, credit
FROM users, marks
WHERE marks.receiverID = users.userID
AND userID = '-1' 
```

结果：

```
totalMark   userID  credit
---------------------------
NULL        NULL    NULL 
```

但我想要的是什么都不返回（没有找到记录）。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:32:08.657

当您使用像 SUM() 这样的聚合函数时，查询必然会返回一行。但由于它没有对任何值求和，因此求和的结果是未定义的。

您可以通过以下方式解决此问题：

```
SELECT * FROM (
    SELECT SUM(mark) AS totalMark, userID, credit
    FROM users, marks
    WHERE marks.receiverID = users.userID
    AND userID = '-1'
) t
WHERE t.totalMark IS NOT NULL; 
```

# emacs - Emacs No-Window 进入无限循环

> ID：15278965
> 
> 赞同：1
> 
> 时间：2013-03-07T18:29:08.680
> 
> 标签：emacs, window, infinite-loop, freeze

我通过 ssh -Y 从 windows7 上的 cygwin 远程访问 linux 机器。

一旦 ssh 完成，如果我以通常的方式（）执行 emacs `emacs`，一切正常。如果我尝试在控制台中执行它（即 via `emacs -nw`），它会加载暂存缓冲区并挂起，而不会对任何键做出反应。我`top`看到它使用了 100% 的 CPU，这在我的 emacs 之前从未发生过。

相同的设置在其他 Linux 机器上也可以正常工作（相同的配置文件、相同的 bash、相同的命令序列）。我什至不知道有什么问题。有人可以帮忙吗？

非常感谢。

**编辑**XEmacs 工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:10:01.900

重新安装了emacs，它工作。仍然不确定出了什么问题...

# php - MVC PHP 应用程序中的 Windows 任务计划程序

> ID：15278966
> 
> 赞同：0
> 
> 时间：2013-03-07T18:29:09.070
> 
> 标签：php, windows, cakephp, scheduled-tasks

我需要在我的 MVC 应用程序（CakePHP 框架）中运行对控制器操作的每日调用，并且我知道 Windows Server 可以在计划任务管理器中将 PHP 脚本作为日常任务运行。`www.test.com/reports/import`如果我可以将它称为-this 从 .csv 导入到 MYSQL 表，我将如何调用控制器中的方法。或者在脚本中我将如何告诉它遵循 CakePHP 的 MVC“工作流程”，调用控制器和调用模型方法。

# c# - 自调用匿名函数

> ID：15278967
> 
> 赞同：22
> 
> 时间：2013-03-07T18:29:24.687
> 
> 标签：c#, anonymous-function, anonymous-methods, self-invoking-function

在 JavaScript 中，自调用函数并不少见：

```
var i = (function(x) {
    return x;
})(42);

// i == 42 
```

虽然我当然不会比较这些语言，但我认为这样的结构可以翻译成 C#，并提供了支持的语言版本：

```
var i = (delegate(int x) {
    return x;
})(42); 
```

或者：

```
var i = ((x) => {
    return x;
})(42); 
```

甚至：

```
var i = (x => x)(42); 
```

但是，每个版本都有错误：

> 预期方法名称

是否不支持自调用匿名方法（*由于显式禁止或类型推断的不可能性*），还是我的尝试有错误？

我冒昧地猜测，因为没有*`Func<T,T>`*可以推断类型的方法声明（ .

* * *

**勘误表**

在这个问题被淹没之前：

```
var i = new Func<int, int>(x => x)(42); 
```

我应该说我希望利用类型推断，但我认为由于*过于*隐含，这可能是不可能的。

所以，稍微澄清一下这个问题；我们知道我们可以`var i = new Func<int, int>(x => x)(42);`，但无需创建实例或强制转换为`Func`，这可能吗？

**用例**

对于那些好奇（*或关心*）的人来说，用例是这样的：

```
var o = new {
    PropertyA = () => {
        // value computation
    }(),
    PropertyB = () => {
        // value computation
    }(),
}; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-07T18:33:21.863

```
var x = ((Func<int, int>)(y => y * 2))(10); 
```

问题是，当编译器看到`y => y * 2`它默认将其分类为 a`Expression`而不是 a`Func`时，除非有一些上下文信息让它知道它应该是 a `Func`。通过将其转换为`Func`我们为它提供所需的上下文。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-08T08:48:59.443

我想 C# 团队的某个人可以给出更好的答案，但我尝试了一下。这里的问题不是它是否是最佳实践，而是它是否可能，如果不是，为什么。

让我们从你要写的开始：

```
var i = (x => x)(42); 
```

非常简单，您将整数 ( `42`) 传递给 lambda，它会使用它并返回相同的值。它的参数是一个整数（从它的用法推断），它返回一个整数（从表达式推断）并且`i`是另一个整数（从返回值推断）。

不幸的是，这在第一步就被打破了。让我[引用大乔恩](https://stackoverflow.com/questions/479883/how-good-is-the-c-sharp-type-inference)：

> 编译器尝试根据使用它的上下文来计算 lambda 表达式的参数类型。

这是什么意思？实际上，编译器需要一些信息，但它只能使用：

*   显式转换、构造函数或声明，如 in`(Func<int, int>)(x => x))`或`new Func<int, int>(x => x)`。此处所需的类型是使用所需的最终类型给出或推断的。
*   一个赋值（同样是因为可以推断出最终类型），例如：`Func<int, int> f = (x => x);`

在您的情况下，编译器必须从其参数推断函数类型，这是不可能的，因为参数是针对表达式进行验证的，反之亦然。

**为什么这在 C# 中是不可能的？**因为`(x => x)`它只是一个委托，所以它可以是任何接受整数参数的委托（如果我们假设编译器可以从 rhs 推断 lhs 并根据 lhs 验证 rhs）并返回另一个整数。实际上，C#**中不允许**在委托之间进行转换，因此表达式无效（即使此*特殊*委托不会分配给任何变量并且将来也不会使用）。它可以是`Func<int, int>`或`Expression<Func<int, int>>`任何其他委托（对于`bool`参数，它甚至可能是 bee `Predicate<bool>`）。

当然，这是一个 C# 设计决策，相同的表达式 - 例如 - 在 VB.NET 中是完全有效的：

```
 Dim i = (Function(x) x)(42) 
```

不同的语言，不同的规则要遵守，C#的目标就是避免这种歧义。

# sql-server - 使用 scope_identity() 从存储过程返回值

> ID：15278976
> 
> 赞同：1
> 
> 时间：2013-03-07T18:29:38.867
> 
> 标签：sql-server, tsql

我有一个带有两个插入语句的存储过程。我想从第一个插入返回 ID。它看起来大致是这样的：

```
declare @retVal int
Begin transaction

insert into myTable(..) values (..)

set @retVal = scope_identity()

insert into myTable2(..) values(..)

Commit transaction

return @retVal 
```

当我这样做时，插入语句工作正常，但每次都返回相同的值（在这种情况下，ID 6 from `myTable`，出于某种奇怪的原因。）

有人能猜出发生了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T18:47:38.110

请使用`OUTPUT`参数。`RETURN`用于返回状态/错误代码，而不是数据。例如，`RETURN`仅处理`INT`. 猜猜当你`BIGINT`因为`INT`不够用而改变你的桌子时会发生什么？

```
ALTER PROCEDURE dbo.YourProcedure
  @params VARCHAR(32),
  @Table1ID INT = NULL OUTPUT
AS
BEGIN
  SET NOCOUNT ON;

  BEGIN TRANSACTION;

  INSERT dbo.Table1...
  SET @Table1ID = SCOPE_IDENTITY();
  INSERT dbo.Table2...

  COMMIT TRANSACTION;
END
GO 
```

# php - Listviewdefs 中的 SugarCRM Smarty 代码

> ID：15278977
> 
> 赞同：3
> 
> 时间：2013-03-07T18:29:39.203
> 
> 标签：php, smarty, sugarcrm

我正在尝试将 Smarty PHP 用于 SugarCRM (6.5.3) 的 ListView (custom/modules/Leads/metadata/listviewdefs.php) 中的自定义功能。

这工作正常：

```
'customCode' => '{$LD_ASSUMED_SUGAR_ACCOUNT_ID_C}', 
```

这也是如此：

```
'customCode' => '{$ACCOUNT_NAME}', 
```

然而，这只是在列表中输出代码（括号和所有）（但用帐户名称替换了正确的值）：

```
'customCode' => '{if $LD_ASSUMED_SUGAR_ACCOUNT_ID_C}{$ACCOUNT_NAME}{/if}', 
```

我究竟做错了什么！？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T22:00:14.307

我认为您无法像在 EditView 和 DetailView 中那样在 ListView 中获得相同的结果。解决此问题的一种方法是将非 db 字段添加到 Leads vardefs 并使用逻辑挂钩来处理条件格式。

**创建一个新的 vardef：**

/custom/Extension/modules/Cases/Ext/Vardefs/my_listview_value_c.php

```
<?php
    $dictionary['Lead']['fields']['my_listview_value_c'] = array(
      'name' => 'my_listview_value_c',
      'vname' => 'LBL_MY_LISTVIEW_VALUE_C',
      'type' => 'varchar',
      'len' => '255',
      'source' => 'non-db',
    );
?> 
```

**创建逻辑挂钩：**

/custom/modules/Leads/ListViewLogicHook.php

```
<?php
class ListViewLogicHook {

    public function getListValue(&$bean, $event, $arguments) {
        if ($bean->ld_assumed_sugar_account_id_c) {
            $bean->my_listview_value_c = $bean->account_name;
        } else {
            // Whatever you'd like
        }
    }
} 
```

**添加逻辑钩子条目：**

```
// position, file, function
$hook_array['process_record'] = Array();
$hook_array['process_record'][] = Array(1, 'Conditional formatting in a listview column', 'custom/modules/Leads/ListViewLogicHook.php','ListViewLogicHook','getListValue'); 
```

**最后，在您的 listviewdefs 添加新列：**

```
'MY_LISTVIEW_VALUE_C' => 
    array (
        'width' => '10%',
        'label' => 'LBL_MY_LISTVIEW_VALUE_C',
        'default' => true,
 ), 
```

希望有帮助。

# c - GL_REPEAT 和 GL_CLAMP 给出相同的结果

> ID：15278979
> 
> 赞同：0
> 
> 时间：2013-03-07T18:29:52.167
> 
> 标签：c, opengl, textures, repeat

在 OpenGL 中生成纹理时，我遇到了 GL_REPEAT 和 GL_CLAMP 的问题。在我的以下代码中，我使用 GL_REPEAT 和 GL_CLAMP 得到相同的结果（它总是重复）......我看不出我的代码与许多教程中的代码有任何区别。请帮我找出这个错误。我尝试将图像大小从 4 增加到 128 .. 但 GL_CLAMP 和 GL_REPEAT 之间仍然没有区别

```
#include <GL/gl.h>
#include <GL/glu.h>
#include <GL/glut.h>

#include <cmath>
#include <stdlib.h>
#include <stdio.h>

/*  Create checkerboard texture  */
#define checkImageWidth 64
#define checkImageHeight 64
static float checkImage[checkImageHeight][checkImageWidth][4];

static GLuint texName;

void makeCheckImage(void)
{
   int i, j;
   float c;

   for (i = 0; i < checkImageHeight; i++) {
      for (j = 0; j < checkImageWidth; j++) {
//         c = ((((i&0x8)==0)^((j&0x8))==0))*255;
            c = 10*sin(i*j);
//         checkImage[i][j][0] = (GLubyte) c*0;
         checkImage[i][j][0] =  c*0.1;
         checkImage[i][j][1] =  c*0.25;
         checkImage[i][j][2] =  c*0.0;
         checkImage[i][j][3] = 250;
      }
   }
}

void init(void)
{    
   glClearColor (0.0, 0.0, 0.0, 0.0);
   glShadeModel(GL_FLAT);
   glEnable(GL_DEPTH_TEST);

   makeCheckImage();
   glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

   glGenTextures(1, &texName);
   glBindTexture(GL_TEXTURE_2D, texName);

   glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
   glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);
   glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, 
                   GL_LINEAR);
   glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, 
                   GL_NEAREST);
   glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, checkImageWidth, 
                checkImageHeight, 0, GL_RGBA, GL_FLOAT, 
                checkImage);
}

void display(void)
{
   glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
   gluLookAt(1, -1, 1, 0, 1, 0, 0, 0, 1);
   glEnable(GL_TEXTURE_2D);
   glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);
   glBindTexture(GL_TEXTURE_2D, texName);
   glMatrixMode(GL_MODELVIEW);
    //glLoadIdentity();

  // glLoadIdentity();
    glPushMatrix();

   glBegin(GL_QUADS);
   glTexCoord2f(0.0, 0.0); glVertex3f(-2.0, -1.0, 0.0);
   glTexCoord2f(0.0, 1.0); glVertex3f(-2.0, 1.0, 0.0);
   glTexCoord2f(1.0, 1.0); glVertex3f(0.0, 1.0, 0.0);
   glTexCoord2f(1.0, 0.0); glVertex3f(0.0, -1.0, 0.0);

   glTexCoord2f(0.0, 0.0); glVertex3f(1.0, -1.0, 0.0);
   glTexCoord2f(0.0, 1.0); glVertex3f(1.0, 1.0, 0.0);
   glTexCoord2f(1.0, 1.0); glVertex3f(2.41421, 1.0, -1.41421);
   glTexCoord2f(1.0, 0.0); glVertex3f(2.41421, -2.0, -1.41421);

    glPopMatrix();

   glPushMatrix();
   /*
    glTranslated(-6, -2, 1);
    glScaled(0.5,0.5,0.5) ;
   //GLint mysphereID;
   GLUquadricObj *sphere=NULL;
  sphere = gluNewQuadric();
  gluQuadricDrawStyle(sphere, GLU_LINE);
  gluQuadricTexture(sphere, GL_TRUE);
  gluQuadricNormals(sphere, GLU_SMOOTH);
  gluSphere(sphere, 01.0, 100, 100);
*/
  glPopMatrix();

   glPushMatrix();

    glColor3f(0.7f, 0.0f, 0.4f);
    glTranslated(-1, -3, -1);
     glScaled(0.5,0.5,0.5) ;
    GLUquadricObj *quadObj = gluNewQuadric();
     gluQuadricDrawStyle(quadObj, GLU_LINE);
      gluQuadricNormals(quadObj, GLU_SMOOTH);
      gluQuadricTexture(quadObj, GL_TRUE);
    gluCylinder(quadObj, 0.8, 0.8, 1.4, 100, 100);

    glPopMatrix();

   glDisable(GL_TEXTURE_2D);
  //gluDeleteQuadric(sphere);
  gluDeleteQuadric(quadObj);

   glEnd();
   glFlush();

}

void reshape(int w, int h)
{
   glViewport(0, 0, (GLsizei) w, (GLsizei) h);
   glMatrixMode(GL_PROJECTION);
   glLoadIdentity();
   gluPerspective(100.0, (GLfloat) w/(GLfloat) h, 1.0, 30.0);
   glMatrixMode(GL_MODELVIEW);
   glLoadIdentity();
   glTranslatef(0.0, 0.0, -3.6);
}

void keyboard (unsigned char key, int x, int y)
{
   switch (key) {
      case 27:
         exit(0);
         break;
      default:
         break;
   }
}

int main(int argc, char** argv)
{
   glutInit(&argc, argv);
   //glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB | GLUT_DEPTH);
   glutInitWindowSize(550, 550);
   glutInitWindowPosition(100, 100);
   glutCreateWindow(argv[0]);
   init();
   glutDisplayFunc(display);
   glutReshapeFunc(reshape);
   glutKeyboardFunc(keyboard);
   glutMainLoop();
   return 0; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:33:23.300

除非您的纹理坐标超出 0 到 1 的范围，否则您不会看到差异。否则，没有任何东西可以钳制或重复。

# haskell - 在 Haskell 中，`this@(Sentence string _) = do` 是什么意思？

> ID：15278980
> 
> 赞同：2
> 
> 时间：2013-03-07T18:29:52.863
> 
> 标签：haskell

这是我被分配调试的 Haskell 程序的一部分：

```
process :: Sentence -> IO ()
process this@(Sentence string _) = do
  render string
  render "==>"
  render $ translate this

render = putStrLn

data Sentence = Sentence String Task

translate :: Sentence -> String     ; Incomplete Definition
translate (Sentence string task)
  | ...

  | ...

  | ...

  | ... 
```

这个程序的唯一部分我不理解或不认识是`process this@(Sentence string _) = do` 我以前从未见过的行`this@`，我也不太确定下划线的`(Sentence string _)`含义。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T18:48:32.743

这`this@`是一个'as-pattern'`_`的例子，而是一个通配符模式的例子。当我们不关心模式中那个点的值是什么时，使用通配符模式，因此`_`在模式中将匹配任何内容，并且它不绑定任何本地名称/变量。

另一方面，当我们想绑定一个额外的本地名称/变量同时匹配它时，我们使用 as 模式。你可以考虑一下

```
process this@(Sentence string _) = ... 
```

大致相当于

```
process this = let (Sentence string _) = this
               in ... 
```

它将符号左侧给出的额外名称绑定`@`到它匹配的任何值。at 模式本身匹配所有内容，但符号右侧的内部模式`@`也匹配它匹配的任何内容 - 并且该模式很可能不匹配所有内容，在这种情况下它仅匹配`Sentence`构造函数。

正因为如此，如果 let 绑定中的模式匹配失败，at 模式版本和带有 let 绑定的版本会有不同的行为，所以当我们为一个函数定义多个 case 时，通常首选 at 模式，因为它允许内部模式也会影响调用函数的哪种情况。例如

```
safeHead xs = let (x:_) = xs in Just x
safeHead [] = Nothing 
```

调用时会失败`[]`，因为第一个参数的模式匹配`xs`成功，所以函数的第一个案例被调用，然后`xs`无法匹配到`(x:_)`。但是，如果我们用 as 模式写这个：

```
safeHead xs@(x:_) = Just x
safeHead [] = Nothing 
```

调用 with`[]`可以正常工作，因为在我们决定使用函数的第一种情况之前，还会检查内部模式，因此虽然`xs`匹配`[]`,`(x:_)`也匹配`[]`，但失败了，所以然后调用第二种情况。我意识到这是一个非常愚蠢的例子，尤其是当我们第二次不使用 xs 时，但我希望它能说明不同之处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T18:34:03.203

`@`定义了一个[as 模式](http://www.haskell.org/tutorial/patterns.html)，它允许您命名要匹配的事物。在这种情况下，是您匹配`this`的值的名称。`Sentence`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T18:42:30.233

`Sentence`作为一个接受 a`String`和 a的构造函数`Task`，在 pattern`this@(Sentence string _)`中，`this`是一个[as 模式](http://learnyouahaskell.com/syntax-in-functions)，它命名整个 Sentence，`string`命名 Sentence's `String`，并且下划线位于`Task`原本应该命名的地方，本质上说`Task`应该在那里忽略。

# sql - CASE 的“子查询返回超过 1 个值”错误

> ID：15278982
> 
> 赞同：-1
> 
> 时间：2013-03-07T18:29:58.837
> 
> 标签：sql, case

表结构：

```
Customer
    ID int not null,
    Name varchar(100) null 
```

询问：

```
SELECT ID, 
  (SELECT CASE WHEN (Name IS NULL AND Name <> '')
          THEN CAST(1 AS BIT)
          ELSE CAST(0 AS BIT) END
   FROM Customer) AS IsNameNullOrWhitespace 
```

这给了我“子查询返回超过 1 个值这是 ..”。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:33:08.237

看来您不需要子查询-您可以将 嵌入`case`到顶级 中`select`，如下所示：

```
SELECT id, 
       CASE 
         WHEN ( name IS NULL 
                AND name <> '' ) THEN Cast(1 AS BIT) 
         ELSE Cast(0 AS BIT) 
       END AS IsNameNullOrWhitespace 
FROM   customer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:37:17.947

```
SELECT ID, 
Case When IsNull(Name,'') ='' Then CAST(1 AS BIT) Else CAST(0 AS BIT) End  
IsNameNullOrWhitespace
FROM Customer 
```

您需要以上查询。

# bash - 所有 bash 历史记录在带有空格的目录上没有此类文件或目录错误

> ID：15278988
> 
> 赞同：5
> 
> 时间：2013-03-07T18:30:37.360
> 
> 标签：bash, .bash-profile

我一直在尝试实现博客文章“重[访所有 bash 历史](http://nodsw.com/blog/leeland/2012/03/07-all-bash-history-revisited-load-time-solved-plus-directory-history)”中描述的功能。基本上，脚本使您能够做的就是永久保留所有 bash 历史记录并跨越多个会话。

有人好心[地在 Github 上轻松访问](https://github.com/oktools/all-bash-history)了所有代码。

但是，每当我使用带空格的目录时：

```
cd ~/Desktop/
mkdir "dir with spaces"
cd dir\ with\ spaces/ 
```

下次登录时，我收到如下错误：

```
-bash: pushd: /Users/jack/Desktop/dir: No such file or directory
-bash: pushd: with: No such file or directory
-bash: pushd: spaces: No such file or directory 
```

我理解的唯一参考似乎没有引起问题：

```
# Now change to the new dir and add to the top of the stack
pushd "${the_new_dir}" > /dev/null 
```

我希望一些 bash 脚本专家可以指出代码中的错误，以便我可以修补它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T22:28:11.610

这是罪魁祸首：

```
for x in `hd 20` `pwd`; do cd_func $x ; done 
```

用。。。来代替：

```
( hd 20; pwd ) | while read x; do cd_func "$x"; done 
```

在 github repo 上发布的拉取请求。

# aspdotnetstorefront - 在 ASPDotNetStoreFront 中手动添加管理员用户

> ID：15278989
> 
> 赞同：-1
> 
> 时间：2013-03-07T18:30:39.520
> 
> 标签：aspdotnetstorefront

我想在 ASPDotNetStoreFront 9.3 中手动创建一个具有管理员权限的用户，不使用该界面，我对 ASPDSF 数据库没有很好的了解，我探索了数据库，但找不到用户和角色表及其映射表等。任何一个请指导我所需的步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:46:07.553

首先，没有用户表，而是客户表。您需要的一切都在该表中。他们使用 IsAdmin 字段来表示用户角色。话虽如此，有一种方法可以导入客户信息（称为 WSI），这是正确的方法。这是链接 - [http://manual.aspdotnetstorefront.com/c-144-wsi.aspx](http://manual.aspdotnetstorefront.com/c-144-wsi.aspx)。本质上，您使用 XML 来导入客户信息。这是他们的测试程序的另一个链接 - [http://manual.aspdotnetstorefront.com/p-1434-test-application.aspx](http://manual.aspdotnetstorefront.com/p-1434-test-application.aspx)，希望它对您想要实现的目标有所帮助。

# node.js - 节点 - 尝试使用 Forever 重新启动在 cronjob 上的 bash 脚本中不起作用

> ID：15278993
> 
> 赞同：2
> 
> 时间：2013-03-07T18:30:54.593
> 
> 标签：node.js, forever

我编写了一个简单的 bash 脚本，每当提交时自动将代码部署到我的 Node.js 服务器，然后使用永远重新启动服务器。此脚本在 cronjob 上定期运行。哦，是的，该站点在发布之前仍处于开发阶段，因此服务器不断重启。:)

该脚本还做了一些其他的事情，但真正有趣的部分是以下两行代码：

```
forever stopall
forever start app.js 
```

当我自己从命令行手动运行脚本时，这两个命令会出现以下输出：

```
Stopping all node jobs
info:    Forever stopped processes:
data:        uid  command             script forever pid   logfile                          uptime
data:    [0] ev5a /usr/local/bin/node app.js 17482   17484 /home/ec2-user/.forever/ev5a.log 0:0:13:17.967
Starting up node server again
info:    Forever processing file: app.js 
```

但是，当作业通过 cron 自动运行时，会输出以下内容：

```
Stopping all node jobs
^[[32minfo^[[39m:    No forever processes running
Starting up node server again
^[[32minfo^[[39m:    Forever processing file: ^[[90mapp.js^[[39m 
```

这对我来说真的很奇怪。看来，当脚本通过 cron 运行时，Forever 似乎认为在尝试 stopall 时甚至没有任何 Node 进程正在运行。我知道 Node 进程正在运行，所以不知道为什么会出现这种情况。看来这两种运行方法之间应该没有区别。两个脚本都以同一用户身份运行。有谁知道为什么永远的行为如此奇怪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T21:05:39.673

`forever`通常仅限于当前用户拥有的进程。如果触发 cron 作业的用户不是最初启动该进程的用户，那么`forever stopall`将找不到任何要杀死的 PID。

例如，我使用名为“nodejs”的用户执行所有节点应用程序。如果我以交互方式使用系统，我可以使用`sudo -H -u nodejs forever list`. 在 root crons 或 /etc/rc.local 上，我将使用`su - nodejs -c "forever start /path/to/app.js"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:17:46.117

我尚未对其进行测试，但您可能想研究一些永远的选项，例如 --exitcrash 标志。

Forever 在处理自动重启服务器的其他程序时会出现问题。虽然不是特定于 Chron，[但此链接](https://github.com/remy/nodemon/issues/30)可能会有所帮助。

# javascript - 如何使用 eval 向 jQuery ajax 调用注入额外的数据

> ID：15278995
> 
> 赞同：-1
> 
> 时间：2013-03-07T18:31:06.593
> 
> 标签：javascript, jquery, eval

我正在开发一个通用的自动完成功能，用于从数据库中选择值（考虑从产品名称列表中选择 ProductID）

由于某些类型需要额外的参数来过滤和验证列表，我有一个`data-params`在输入中有一个字段来捕获表单中的数据（或固定的）

我正在尝试`data-params='{ProductType1: $("#ProductType1"), ProductType2: $("#ProductType2")}'`在输入中使用此语法提供 ajax 调用，但出现此错误：`Uncaught SyntaxError: Unexpected token :`

仅使用 1 个参数可以正常工作：
`data-params='{ProductType1: $("#ProductType1")}'`

![在此处输入图像描述](../Images/2cdc47bc1dbf976163f4dd158291f763.png)

## jsBin 供你尝试

[http://jsbin.com/atamez/1/edit](http://jsbin.com/atamez/1/edit)

## 这是html

```
<form>
    <input type="text" id="ProductType1" name="ProductType1" value="123">
    <input type="text" id="ProductType2" name="ProductType2" value="456">
<p>
    <span class="superlist">
    <input type="hidden" id="ProductID" name="ProductID" value="0">
    <input type="text" id="Product" name="Product" value="" style="Width: 150px;" 
         class="superlistinput" 
         data-controller="Products" 
      data-params='{ProductType1: $("#ProductType1"), ProductType2: $("#ProductType2") }'>
  </span>
  </p> 
</form> 
```

## Javascript

```
$(function () {
    $('.superlistinput').each(function (i, el) {
        dosuperlistinput(el);
    });
});

function dosuperlistinput(el) {
    el = $(el);
    el.autocomplete({
        minLength: 0,
        source: function(request, response) {
            $.ajax({
              url: '/' + el.data("controller") + '/Lista/?term=' + request.term,
                dataType: 'json',
                data: eval(el.data("params")),
                success: function(data) {
                    response(data);
                }
            });
        },
        select: function (event, ui) {
            el.prev().val(ui.item.ID);
            el.val(ui.item.Nombre);
            return false;
        },
        change: function (event, ui) {
            el.removeClass('superlistinvalid');
            if (!ui.item) {
                var valoractual = el.val();
                $.getJSON('/' + el.data("controller") + '/ListaValidar/' + valoractual,
                    eval(el.data("params")),
                    function (json) {
                        var valid = false;
                        if (json.length > 0) {
                            el.prev().val(json[0].ID);
                            el.val(json[0].Nombre);
                            valid = true;
                        }
                        if (!valid) {
                            // it didn't match anything
                            el.addClass('superlistinvalid');
                            el.prev().val("0");
                        }
                        return false;
                    }
                );
            }
        }
    })
    .data("autocomplete")._renderItem = function (ul, item) {
        return $("<li></li>")
          .data("item.autocomplete", item)
          .append('<a>' + item.Nombre + (item.ExtraInfo === null ? '' : '<div><i>' + item.ExtraInfo + '</i></div>') + '</a>')
          .appendTo(ul);
    };

    el.keyup(function (event) {
        if (event.keyCode != '13' && event.keyCode != '9') {
            el.prev().val(0).trigger('change');
        }
    });

    addbuttonautocomplete(el);

}

function addbuttonautocomplete(el) {
    el = $(el);
    $('<button type="button">&nbsp;</button>')
        .attr('tabIndex', -1)
        .attr('title', 'Mostrar todos los items')
        .insertAfter(el)
        .button({
            icons: {
                primary: 'ui-icon-triangle-1-s'
            },
            text: false
        })
        .removeClass('ui-corner-all')
        .addClass('ui-corner-right ui-button-icon autocompletebutton')
        .click(function (event) {
            event.preventDefault();

            // close if already visible
            if (el.autocomplete('widget').is(':visible')) {
                el.autocomplete('close');
                return;
            }

            el.autocomplete('search', '');
            el.focus();
        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:33:28.213

与使用 JSON 的方式类似`eval`（在本机`JSON`对象出现之前），您需要在要解析的字符串周围添加括号，如下所示：

```
data: eval("("+eval(el.data("params"))+")") 
```

话虽如此，必须有更好的方法来做你想做的事情。也许您可以将元素的 ID 放在 data 属性中，然后从实际的 JavaScript 中调用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:01:14.310

我认为你做错了，你不应该使用代码来表示动态数据，而只是使用数据。例如，存储`id`您想要从中获取值的元素（以及您现在如何拥有它，您甚至没有仅获取 jQuery 元素的值），例如
`data-params='{"ProductType1": "#ProductType1", "ProductType2": "#ProductType2"}'`

现在您可以检索属性并设置值。

```
var data = {};
var params = el.data("params");
for (var prop in params){
    data[prop] = $(params[prop]).val();
}
...
    data:data,
... 
```

# wordpress - Wordpress 3.5 - 如何仅使用 wp_nav_menu 显示父级的子菜单？

> ID：15278997
> 
> 赞同：2
> 
> 时间：2013-03-07T18:31:12.513
> 
> 标签：wordpress, navigation

我想找到使用 wp_nav_menu 函数获取特定页面的子列表（存储在外观>菜单选项卡中）的最简单方法。

例如，我有一个名为“primary_navigation”的菜单：

**家庭**
**服务**
- 网页
- 设计
- 移动
**联系**

***代码示例***

```
<?php 
wp_nav_menu( array(
'theme_location' => 'primary_navigation',
'container'       => '',
'items_wrap' => '%3$s')
); 
?> 
```

如何仅获取“**服务**”选项卡内的项目，例如：

*   **网络**
*   **设计**
*   **移动的**

***我正在寻找的代码示例...***

```
<?php 
    wp_nav_menu( array(
    'theme_location' => 'primary_navigation',
    'container'       => '',
    'child_of' => 'PARENT_ID'
    'items_wrap' => '%3$s')
    ); 
    ?> 
```

我想使用**wp_nav_menu**功能，因为客户端更容易管理导航。

谢谢！

* * *

**更新：**
我找到了这个链接：[https ://wordpress.stackexchange.com/questions/2802/display-a-portion-branch-of-the-menu-tree-using-wp-nav-menu/2809#2809](https://wordpress.stackexchange.com/questions/2802/display-a-portion-branch-of-the-menu-tree-using-wp-nav-menu/2809#2809)

它工作，但不完全，我发现它有点复杂。使用此解决方案，我无法通过父 ID 获取子元素，并且名称中的引号似乎有问题。

如果你有更好的方法，我真的很感兴趣！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T01:34:17.963

我相信我有一个更好的解决方案，在您的示例中，您将指定您正在寻找的 parent_id。我写了一个插件，可以让你简单地指定你想要的 start_depth。因此，如果您想显示二级菜单，而忽略第一级菜单项，您可以将 start_depth 设为 1，如下所示：

```
wp_nav_plus(array('theme_location' => 'primary_navigation', 'start_depth' => 1)); 
```

当然，您需要先安装并激活插件，然后才能开始使用 WP Nav Plus。任何有兴趣的人都可以在我的网站上找到它：[https ://mattkeys.me/products/wp-nav-plus/](https://mattkeys.me/products/wp-nav-plus/)

作为旁注：此功能是我使用过的许多其他内容管理系统的原生功能，我想知道为什么它不是 Wordpress 中的默认选项？我厌倦了所有的变通方法和它们的特殊“怪癖”，以至于我终于编写了自己的解决方案。

# android - 在不同的选项卡中启动新活动

> ID：15278998
> 
> 赞同：0
> 
> 时间：2013-03-07T18:31:13.583
> 
> 标签：android, android-layout

我正在使用以下代码从选项卡内的 ActivityGroup 启动新选项卡中的活动：

```
 TabHost mTabHost = TabsFragment.getTabHost();    
    mTabHost.setCurrentTab(2);
    Intent i = new Intent(Downloader.this,Test.class);
    replaceContentView(Test.class.getName(),i);
    public void replaceContentView(String id, Intent newIntent) {
        View view = getLocalActivityManager().startActivity(id,newIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)).getDecorView();
this.setContentView(view);} 
```

使用此代码，我可以切换到新选项卡，但我遇到的问题是，在调用 Test 活动的 oncreate() 之前，正在调用当前 ActivityGroup 的 oncreate()。之后，尽管调用了 Test.class 的 oncreate()（通过日志确认），但 Downloader 活动将继续显示在新选项卡中，而不是 Test 活动。

为什么会发生这种情况，尽管我找不到上述任何原因？

非常感谢任何解决相同问题的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:34:21.420

取决于您的活动堆栈，如果您的当前活动恰好位于父活动之上，您只需完成当前活动，它将转到上一个活动。如果您想清除所有活动堆栈并重新开始新活动，请尝试

```
Intent intent1 = new Intent(context, activity.class);
             intent1.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
             intent1.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  
            startActivity(intent1); 
```

# c# - 为什么使用值类型和引用类型时接口行为不同

> ID：15278999
> 
> 赞同：0
> 
> 时间：2013-03-07T18:31:15.447
> 
> 标签：c#, interface, value-type, reference-type

我在 c# 中做了以下示例

```
 interface IChangeable
    {
        void Change(params Int32[] array);
    }

    struct SomeValueType : IChangeable
    {
        private Int32 m_X;

        public SomeValueType(int X)
        {
            m_X = X;
        }

        public void Change(params Int32[] array)
        {
            m_X = array[0];
        }

        public override string ToString()
        {
            return String.Format("Crt value of m_X: {0}", m_X);
        }
    } 
```

在主要：

```
 static void Main(String[] args)
    {
        SomeValueType someValueType = new SomeValueType(5);
        Console.WriteLine(someValueType);                                   // No boxing occured. It showed: 5

        Object someRefType = someValueType;                                 // Boxed
        Console.WriteLine(someRefType);                                     // Also Shows 5 (from heap)

        someValueType.Change(2);                                            // Change Value of x not o's
        Console.WriteLine(someValueType + " " + someRefType);               // 2 5

        ((SomeValueType)someRefType).Change(3);                             // Copies to a temp stack so no change ocuured in o
        Console.WriteLine(someRefType);                                     // 5

        IChangeable itfStackChange = (IChangeable)someValueType;
        itfStackChange.Change(7);
        Console.WriteLine(someValueType);                                   // Shows 2 and not 7 ... why?

        IChangeable itfChange = (IChangeable)someRefType;
        itfChange.Change(1);                                                // Unboxes the value of o, making the value of x 1 boxes o again?
        Console.WriteLine(someRefType);                                     // Shows 1
    } 
```

现在我想知道当我这样做时会发生什么：

```
 IChangeable itfStackChange = (IChangeable)someValueType;      //value was 2 and its still 2
        itfStackChange.Change(7);
        Console.WriteLine(someValueType); 
```

但是，如果我将结构的定义更改为类，例如：

```
class SomeValueType : IChangeable 
```

它写的是 7 而不是 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:33:50.620

值类型语义使得值在赋值时被*复制*。这意味着当您在赋值后更改时，变量指向不同的对象。

对于引用类型，*引用*被复制，这意味着当您在赋值后更改时，两个变量都指向同一个对象。

请参阅MSDN 上的[值类型和引用类型](http://msdn.microsoft.com/en-us/library/t63sy5hs.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:26:30.067

A structure-type definition actually defines two kinds of things: a kind of storage location, and a kind of heap object which inherits from the abstract class `System.ValueType`. The heap object effectively has one field of the corresponding storage-location type, but exposes all the members of that storage-location type as though they were its own. To the outside world, the heap type will behave like a class object; internally, however, references to `this` are references to its field of the corresponding storage-location type.

Although C# defines the term "inheritance" in such a way as to pretend that the storage-location type and the heap-object type are one and the same, the two types will behave differently. Casting a value type to an interface that it represents will generate a new heap object which holds a copy of the public and private fields of the value type that was cast, and then return a reference to that new instance. The resulting reference will exhibit reference semantics, since it will be a reference.

If one regards heap objects and value-type storage locations as existing in separate universes, and recognizes the cases in which values must be copied from one universe to the other, one will find that such a model will accurately predict how things will behave.