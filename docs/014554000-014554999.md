# StackOverflow 问答 14554000-14554999

# contenteditable - 我如何自定义 hallo.js 以使用而不是？

> ID：14554002
> 
> 赞同：4
> 
> 时间：2013-01-28T00:41:41.190
> 
> 标签：contenteditable, hallo-js

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-14T20:37:02.583

如果它可能对某人有帮助：

我想达到同样的效果，我最终在保存之前对内容进行了预处理。在 Python 中替换标签的示例：

```
content.replace('<b>', '<strong>').replace.('</b>', '</strong>') 
```

您可以对您可能想要替换的任何其他标签或子字符串使用相同的技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:19:50.370

这无法完成，因为标记不取决于 hallo.js 或任何其他富文本编辑器。它们只是触发插入标记，但插入是由浏览器完成的。你会从不同的浏览器得到略有不同的结果。只有在最后更改标记才能解决问题。

编辑指向评论问题的文档：问题是这是浏览器的行为，因为 IE 发明了设计模式而不是标准。whatwg 将它写在 HTML5 的标准中。要获取有关该主题本身的更多信息，请阅读
[http://www.quirksmode.org/dom/execCommand.html](http://www.quirksmode.org/dom/execCommand.html)
[http://dev.opera.com/articles/view/rich-html-editing-in-the-browser-第 1 部分/](http://dev.opera.com/articles/view/rich-html-editing-in-the-browser-part-1/)
[http://www.thissuchiknow.co.uk/?p=64](http://www.thismuchiknow.co.uk/?p=64)
[http://www.whatwg.org/specs/web-apps/2007-10-26/multipage/section-contenteditable.html](http://www.whatwg.org/specs/web-apps/2007-10-26/multipage/section-contenteditable.html)
[http ://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html](http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html)
[http://www.w3.org/wiki/Web_Editing_APIs](http://www.w3.org/wiki/Web_Editing_APIs)
[http://annevankesteren.nl/2005/07/contenteditable](http://annevankesteren.nl/2005/07/contenteditable)
[http://www.sitepoint.com/the-tragic-comedy-that-is-rich-text-editing-on-the-web/](http://www.sitepoint.com/the-tragic-comedy-that-is-rich-text-editing-on-the-web/)

# python - 如何检查另一个程序是否正在运行？使用“打开”不起作用

> ID：14554006
> 
> 赞同：0
> 
> 时间：2013-01-28T00:43:06.200
> 
> 标签：python

我正在尝试制作一个程序，如果某个程序打开，它不会让你继续。在这种特殊情况下，如果 Cheat Engine.exe 打开，您将无法继续。

我认为代码会是这样的：

```
def openedprogram():
with open('Cheat Engine.exe', 'r') as f:
    print("You have Cheat Engine Open! Close and uninstall it before continuing!")
else:
    continue() 
```

这会出现一些错误，我尝试删除“Else：”，但我收到一条错误消息，提示 Cheat Engine.exe 不是有效目录。任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T00:46:50.670

这几乎是完全不可能做到的（请参阅防病毒和反黑客注入），但您可以在大多数情况下查看进程名称是否显示在进程列表中。

像这样的事情会在此刻激活进程

```
import os
import psutil # http://code.google.com/p/psutil/
import time

def get_procs():
    while 1:
        procs = psutil.get_process_list()
        procs = sorted(procs, key=lambda proc: proc.name)

        for proc in procs:
            yield proc.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:32:04.410

您的问题询问一件事（程序“正在运行”），而您的代码检查另一件事（您能否成功打开文件以读取它）并且您的错误消息和您的问题文本正在讨论另一件事（是给定的可执行文件“已安装）。

在您了解这些不同问题之间的区别之前，您不可能编写一个程序来执行您想要的（无论实际上是什么）。

打开文件会告诉您给定名称的文件是否存在于给定位置，并且具有允许您访问它的权限。这对于试图防止在您的程序/游戏运行时使用“作弊”实用程序是没有用的。

通过检查 PATH 以查看“cheat.exe”程序是否在其上的任何位置，您可能会获得一些非常有限的成功。然而，那将是相当蹩脚的。重命名程序并将其保存在不在 PATH 上的某个目录中的智能和教育栏非常低。我认为在 MS Windows 上玩游戏的平均 10 岁儿童可能会在大约五分钟或更短的时间内解决这个难题（破解该策略）（“成就解锁！”）。

诸如“魔兽世界”之类的程序具有相当复杂的“守望者”技术，试图阻止程序（例如“滑翔机”或“Shadowbot”）在《魔兽世界》打开时运行。当然，这样的程序可以安装在任何目录中，使用任何名称，并且可以在运行时在进程列表中重命名它们自己。这些“作弊”程序使用的操作系统工具与调试器使用的基本相同（MacOS X 下的 ptrace 接口以及 MS Windows 下的任何模拟接口）。这些允许像 gdb 和 strace 这样的程序“窥视”另一个程序的地址空间并“戳”到其中的值。因此，他们通过查看程序存储有关用户界面的某些模型信息的位置（基本上是目标所在的位置，

可以想象，“管理员”可以尝试扫描进程表以查找某些签名（类似于防病毒软件），甚至可以尝试使用类似的“调试”界面来查找被禁止程序的痕迹。

然而，如果没有硬件支持（比如臭名昭著的 TPM --- 可信平台模块），这最终不是一款你会赢的游戏，目前商品消费市场（通用 PC 和 Mac、例如）。

但是，嘿，玩得开心。

# canvas - 如何设置最小窗格大小 - javafx

> ID：14554009
> 
> 赞同：1
> 
> 时间：2013-01-28T00:43:38.860
> 
> 标签：canvas, resize, javafx, minimum, pane

我想设置一个最小尺寸，例如 200x200，所以当我的窗格调整大小时，它不能比选择的最小尺寸小。任何人的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T02:36:37.960

使用[setMinSize](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Region.html#setMinSize%28double,%20double%29)方法设置[Pane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Pane.html)的最小尺寸：

```
Pane pane = new Pane();
pane.setMinSize(200, 200); 
```

# javascript - How to Dynamically Update postToFeed() redirect_uri?

> ID：14554012
> 
> 赞同：0
> 
> 时间：2013-01-28T00:43:59.053
> 
> 标签：javascript, facebook, jquery

I'm sure there is a relatively simple way to solve this problem, but I could use some help. I have a landing page that accepts a user's email address and generates a unique URL that they can use to refer friends. I use AJAX to bind to the form and render the user's unique referral link as well as some social sharing mechanisms. For these social sharing mechanisms (Tweet, Share, etc.), I need to pass the user's dynamically generated unique referral URL to the Facebook postToFeed() script.

I used to use fb:share-button, but it seems that's now deprecated in favor of the like and posttofeed actions. In past applications and with other social network sharing functions like Twitter this was trivial because the those buttons use a href attribute.

```
<a href="#" id="twitter">Tweet</a> 
```

which I can then update on the appropriate trigger event using JS or jQuery

```
$('#twitter').attr('href', data.link); 
```

However, with postToFeed(), you need to pass in the information to be shared in a script (see below).

Can anyone help me figured out how I dynamically add the appropriate redirect_uri below after it has been created when the user submits their email address?

Thanks a bunch!

```
 FB.init({appId: "", status: true, cookie: true});
        function postToFeed() {
          var obj = {
            method: 'feed',
            redirect_uri: '',
            link: '',
            picture: '',
            name: '',
            caption: '',
            description: ''
          };

          function callback(response) {
            document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
          }

          FB.ui(obj, callback);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T00:53:44.763

You could place the obj variable outside of the postToFeed method:

```
var postToFeedObj = {
    method: 'feed',
    redirect_uri: '',
    link: '',
    picture: '',
    name: '',
    caption: '',
    description: ''
};

function postToFeed() {

    function callback(response) {
        document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    }

    FB.ui(postToFeedObj, callback);
} 
```

and change the object properties for the link to your needs. There is also a way to do it with a direct link, but in this case you don't have a callback:

```
https://www.facebook.com/dialog/feed?
  app_id=YOURAPPID&
  link=YOURLINK&
  picture=YOURPICTURE&
  name=THE%20NAME&
  caption=THE%20CAPTION&
  description=THE%20DESCRIPTON&
  redirect_uri=THEREDIRECTLINK 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T01:11:26.093

The way I do it is:

Add onclick method to your href:

```
<a href="#" onclick = 'postToFeed("<?= $uniqueURL;?>")' id="facebook">Share</a> 
```

And then javascript looks like:

```
FB.init({appId: "125980477501398", status: true, cookie: true});
    function postToFeed(url) {
      /* You said you wanted it to be redirect_uri, so you put 
       * the url parameter there
       */
       var obj = {
        method: 'feed',
        redirect_uri: url,
        link: '', 
        picture: '',
        name: '',
        caption: '',
        description: ''
      };

      function callback(response) {
        document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
      }

      FB.ui(obj, callback);
    } 
```

Hope this helps!

# php - 如何在 PHP 中指定参数的类型

> ID：14554026
> 
> 赞同：-1
> 
> 时间：2013-01-28T00:45:48.947
> 
> 标签：php, casting

> **可能重复：**
> [原始值的 PHP 类型提示？](https://stackoverflow.com/questions/5724677/php-type-hinting-to-primitive-values)

说，我创建了一个名为

```
retrieveCount($count){
   return ++$count;
} 
```

只是一个简单的例子。如何将函数设置为仅接受整数类型？在 Java 或其他语言中，我们有：

```
public int retrieveCount(int count){
   return ++count;
} 
```

有没有办法在 PHP 中做同样的事情？我在文档中读到，对于 OOP，PHP 具有复杂结构的类型提示，例如对象、数组、接口等，但没有标量类型（int、string）。

真的是这样，我们不能指定类型吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T00:57:42.243

PHP 没有直接的标量类型提示可能性。但是您可以通过检查函数内部的类型并触发适当的错误来模拟它：

```
function retrieveCount( $count )
{
    if( !is_int( $count ) )
    {
        // I believe E_USER_WARNING is the appropriate error level
        // equivalent to what PHP issues itself on type hint errors
        trigger_error(
            'Argument 1 passed to retrieveCount() must be an integer',
            E_USER_WARNING
        );
    }

    return ++$count;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T00:50:33.580

没有直接的方法可以做到这一点，但是您可以像这样在函数中强制类型：

```
function retrieveCount($count) {
    $count = intval($count);
    return ++$count;
}; 
```

查看类似的功能`strval`，`floatval`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T00:57:58.633

为了确保函数接收整数类型，您需要像这样调用[is_int()](http://php.net/manual/en/function.is-int.php)：

```
function retriveCount( $count ){
  if( !is_int( $count ) )
    return 0; // or whatever you want errors to return

  return ++$count;
} 
```

或者，如果您希望能够处理形成为不一定是数字的数字的字符串，您可以执行以下操作：

```
function retriveCount( $count ){
  if( (int)$count != $count )
    return 0; // or err value

  return ++$count; // will be integer type
} 
```

[在Type Juggling 文档](http://php.net/manual/en/language.types.type-juggling.php)中阅读为什么返回值将是一个没有任何强制转换的整数。

# php - 重复数组...那不应该重复吗？

> ID：14554033
> 
> 赞同：0
> 
> 时间：2013-01-28T00:46:53.653
> 
> 标签：php

由于某种原因，这个数组不断重复第一行到第二行，第一行和第二行到第三行，依此类推。

```
unset ($grade); $grade = array();
foreach ($row as $grade => $value) {
  if (substr($grade, 0,1)== "y") {
  if ($grade == "y1") {if ($value == "x") {$grades[] = "1";}}
  if ($grade == "y2") {if ($value == "x") {$grades[] = "2";}}
  if ($grade == "y3") {if ($value == "x") {$grades[] = "3";}}
  if ($grade == "y4") {if ($value == "x") {$grades[] = "4";}}
  if ($grade == "y5") {if ($value == "x") {$grades[] = "5";}}
  if ($grade == "y6") {if ($value == "x") {$grades[] = "6";}}
  if ($grade == "y7") {if ($value == "x") {$grades[] = "7";}}
}}
$grades_string = implode(", ", $grades); 
```

dB 行的标题为 y1、y2 等。如果需要，我可以向某人展示一个链接，其中包含我的意思是错误的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T00:53:44.097

这是因为你创造`$grade = array();`，但你想要创造`$grades = array();`

更正此语法错误，然后它应该可以正常工作。

**您也**可以移至`if ($value == "x")`此，`if (substr($grade, 0,1)== "y")`使您的代码更简洁、更快。在你的情况下：

```
if (substr($grade, 0,1)== "y" && $value == "x") {
    if ($grade == "y1") {$grades[] = "1";}
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T00:53:09.100

我将重写循环以使其更具可读性/更有意义，您仍然需要您清除问题所在，然后我将更新我的答案。

```
foreach ($row as $grade => $value) {
    if (substr($grade, 0,1)== "y" AND $value == "x") {
        if ($grade == "y1") {$grades[] = "1";}
        elseif ($grade == "y2") {$grades[] = "2";}
        elseif ($grade == "y3") {$grades[] = "3";}
        elseif ($grade == "y4") {$grades[] = "4";}
        elseif ($grade == "y5") {$grades[] = "5";}
        elseif ($grade == "y6") {$grades[] = "6";}
        elseif ($grade == "y7") {$grades[] = "7";}
    }
} 
```

# jpeg - 转换脚本并使用它

> ID：14554037
> 
> 赞同：0
> 
> 时间：2013-01-28T00:47:56.723
> 
> 标签：jpeg, file-extension

我一直在谷歌上搜索如何将文件扩展名插入到多个没有扩展名的文件（文件名到 filename.txt），以及更正错误的扩展名（例如，从错误保存的 .txt 到 .jpg），以及从此重命名过程中排除其他文件/文件夹。

我特别偶然发现的一页与我的非常相似：[http ://ubuntuforums.org/showthread.php?t=1185203](http://ubuntuforums.org/showthread.php?t=1185203)

在该线程的第二页上，有一个由 tinge 发布的脚本，这似乎是我正在寻找的解决方案（有人可以验证吗？）：

* * *

```
#!/bin/bash
program () {
    FILETYPE="$1"
# Select all files in current directory, and process one at a time
for FILE in *; do
    # Strip of any extension, and save to FILE1
    FILE1=${FILE%\.*}

    # If it's the same afterward, then there was no extension - rename it
    if [ "$FILE1" = "$FILE" ]; then
    while [ -f "${FILE1}.${FILETYPE}" ] ; do
        FILE1="${FILE1}_1"
    done
        mv "$FILE" "$FILE1.$FILETYPE"
    fi
done
exit 0
}

case $1 in
    --help)   echo;echo;echo "Usage: noext.sh filetype i.e. noext.sh JPG changes all     files with no extension to a .JPG";echo;echo;echo
    ;;
    -h)   echo;echo;echo "Usage: noext.sh filetype i.e. noext.sh JPG changes all files     with no extension to a .JPG";echo;echo;echo
    ;;
    *) program $1
    ;;
esac 
```

* * *

我不确定它是否正确复制（我试图遵循 4 空格缩进规则。我想我把它砍掉了，哈哈），但它在我发布的线程链接的第二页上。由于不熟悉脚本，我不知道如何处理它。

我正在使用 Windows 7。

有人可以帮忙吗？

谢谢，-B

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T00:57:05.960

正如您可能已经看到的那样，此脚本以该行开头

```
#!/bin/bash 
```

这意味着，在您希望该脚本由 bash 二进制文件执行的[unix 环境中。](https://stackoverflow.com/questions/3009192/how-does-the-work/3009280#3009280)但是，在 Windows 7 中没有预装 bash。Windows 脚本和 Unix 脚本大多是相同的东西，但它们是用不同的语言编写的，而且它们通常互不理解。

您可能想要一个用于 Windows 的脚本版本`cmd.exe`，它是 Windows 中的内置 shell。

否则，如果你真的想执行*这个*特定的文件，你可以安装一些编译版本的 bash（比如 MinGW、Cygwin 或 Git 等工具附带的那个）。

如果您只想重命名文件，则可以使用其他一些工具做得更好，例如[此答案](https://stackoverflow.com/a/8822951/488191)中提供的工具或[其他问题的答案](https://stackoverflow.com/questions/191351/windows-dos-scripting-for-command-to-rename-all-files-in-a-directory)

# php - 在多个网页中包含相同的表单

> ID：14554039
> 
> 赞同：1
> 
> 时间：2013-01-28T00:48:12.050
> 
> 标签：php, javascript, mysql, ajax

我在网站 A 的 MySQL 表中保存了一个简单的表单。

我需要能够在网站 B、C、D、E 等网站上发布相同的表格。这些网站都没有托管在与网站 A 相同的服务器上。当表格更新时，其余网站上的表格网站也必须更新。

我尝试在网站 A 上创建一个页面，该页面查询数据库并显示表单。然后在网站 B 上，包括页面。我收到以下错误：

> 警告：include(): http:// wrapper 在服务器配置中被 allow_url_include=0 禁用

我知道 allow_url_include 可能被大多数网络主机关闭，所以我需要一种方法来规避这个并安全地包含我的表单。是使用 AJAX 还是 Javascript 的解决方案？你能指点一下如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T00:54:41.957

如果您的表单位于 MySQL 数据库中，那么说它“保存在网站 A 上”是不准确的。无论您在网站 A 中拥有什么服务器端代码，都可能连接到**localhost**端口 3306 上的 MySQL 数据库以检索表单。

来自网站 BE 的代码也可以连接到**服务器**A 的端口 3306 上的 MySQL，如果该端口是开放的并且有一个 MySQL 用户可以远程连接。如果所有服务器都在同一个专用网络中，那可能没问题。否则，将 MySQL 端口对外开放是有安全风险的。您可以使用防火墙将与服务器 A 上端口 3306 的连接限制为仅服务器 BE。或者，您可以在服务器 A 上编写一个简单的 Web 服务，当通过 HTTP 调用时，它会从 MySQL 获取表单并返回表单 HTML，您可以从 Servers BE 异步调用该表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T00:54:41.560

首先，AJAX 是通过使用 javascript 完成的，所以如果您使用 AJAX，您将使用 javascript。

然后，没有办法通过将表单直接嵌入到 html 中来做到这一点。我的建议是：

*   创建一个 Web 服务，该服务返回您要包含在表单中的字段列表。
*   创建一个 js 脚本，根据服务返回的信息动态构建表单。
*   在您的 Web 服务中创建从表单接收信息的函数，或尝试将表单直接提交到您想要的 url（我不记得这是否可行）
*   在所有页面中使用该脚本。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-28T00:54:17.820

你可以使用以下方法，你需要学习它们，因为这不是写教程的地方：

1.  使用 curl/file_get_contents 获取在**服务器**端使用的 HTML。
2.  **在客户**端使用`<script>`标签来包含来自您托管表单的服务器的文件
***   使用**iframe****

# assembly - tasm代码fpu浮点单元

> ID：14554041
> 
> 赞同：0
> 
> 时间：2013-01-28T00:49:03.247
> 
> 标签：assembly, tasm, fpu

```
 .MODEL SMALL
    .STACK 100h
ASSUME CX:_TEXT, DS:_DATA   
_DATA SEGMENT DWORD PUBLIC 'DATA'   
xparr db 10 dup (?)
TOW DB 2
CHECKER DB 2
XP DB 1
N DB (?)
_DATA ENDS
    .CODE
.386
.387
PUBLIC _XPN
_XPN PROC NEAR
    PUSH BP
    MOV BP,SP
    MOV DI,OFFSET XPARR
    MOV BX,OFFSET XPARR
    INC BX
    FILD 1
    FCOMP [BP+8]
    FSTSW AX
    SAHF
    JE EQUAL
    JBE BELOW
    MOV AX,[BP+4]
    MOV [DI],AX
    FILD TOW
    JMP CHECK 
BELOW:
    MOV [DI],1
    JMP END
EQUAL:
    MOV AX,[BP+4]
    MOV [DI],AX
    JMP END 
CHECK:
    FCOMP [BP+8]
    FSTSW AX
    SAHF
    JBE SECOND
    FLD [DI]
    FMUL WORD PTR [DI]
    FSTSW AX
    FFREE ST
    MOV [BX],AX
    INC DI
    INC BX
    FILD TOW
    FIMUL CHECKER
    FSTSW AX
    FFREE ST
    MOV CHECKER,AX
    FILD CHECKER
    JMP CHECK
SECOND :
    MOV DI,OFFSET XPARR
    MOV N,[BP+8]
SCND :
    FILD N
    FIST
    FSTSW AX
    FFREE ST
    SAHF 
    JZ END
    FILD TOW
    FILD N
    FPREM 
    FILD 1
    FCOMPP 
    FSTSW AX
    SAHF
    JNE notequal
    FLD [DI]
    FMUL XP
    FSTSW AX 
    MOV XP,AX   
    FFREE ST
notequal:   
    FILD 2
    FIDIVR N
    FSTSW AX 
    MOV N,AX
    FFREE ST
    INC DI
    JMP SCND
END :   
        MOV XP,AX
    POP BP 
    RET
    _XPN ENDP
    _TEXT ENDS
    END 
```

嘿，我`m trying to calculate x^n by a public function xpn that gets double x and int n so i have to calculate in array x^1 , X^2 , x^4 ..... x^k k<n then i have to multiple xp=1 with array[i] if (n mod 2)=1 if not n=n/2 ,and i=i+1 so somebody can help me because it is not working !! i don`知道如何像 qword ptr 那样进行转换，它是 tasm assembley fpu= 浮点单元，我`m trying to do : i`得到的是 double x 和 int n，我在 xpn x^1,x^2,x^4 中计算....x^k k0 { if n mod 2 = 1 xp=xp*xpn[i] n=n/2 i=i+1 } 所以最后我得到 x^n !!!!!!

# c++ - Halide 编程语言入门？

> ID：14554042
> 
> 赞同：3
> 
> 时间：2013-01-28T00:49:16.537
> 
> 标签：c++, image-processing, installation, halide

我正在尝试使用名为[**Halide**](http://halide-lang.org/)**的图像处理领域特定语言（C++ 扩展）**。[](http://halide-lang.org/)

 **在[Halide README](https://github.com/halide/Halide#readme)之后，这是我尝试过的：

1.  下载了[Ubuntu 12.04 Halide 二进制文件](https://github.com/halide/Halide/downloads)，并解压到一个名为`~/halide`.
2.  在该`~/halide`目录中，我创建了`hello_halide.cpp`，如[本页](https://github.com/halide/Halide#readme)`Using Halide`部分所述。
3.  试图编译`hello_halide.cpp`：

    `g++-4.6 -std=c++0x hello_halide.cpp -L halide -lHalide -ldl -lpthread -o hello_halide`

    但是，g++ 找不到 libhalide：

    `/usr/bin/ld: error: cannot find -lHalide`

4.  尝试添加`~/halide`到我的`$PATH`and `$LD_LIBRARY_PATH`，但这没有帮助。

**如何编译这个基本`hello_halide.cpp`的卤化物程序？**

* * *

笔记：

*   CUDA 是 Halide 的依赖项之一。我已经安装了 CUDA，我可以编译/运行 CUDA 程序。
*   我正在使用 Ubuntu 12.04。
*   我的 g++ 版本是 4.6.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:05:20.563

`-L halide`告诉链接器在子目录中查找库`halide`。在这种情况下，这意味着您的源文件`hello_halide.cpp`应该在一个文件夹`~/myfolder/`中，而库`libHalide.so`在`~/myfolder/halide/libHalide.so`（或者`.a`如果它是静态的）。如果它在其他地方，请将绝对路径传递给`-L`.

`LD_LIBRARY_PATH`您设置or的想法`PATH`不起作用，因为后者用于搜索可执行文件的目录，而前者用于*在您启动需要共享库的可执行文件时*搜索共享库的目录。**

# c++ - 大型对象数组中的空向量

> ID：14554043
> 
> 赞同：0
> 
> 时间：2013-01-28T00:49:18.223
> 
> 标签：c++, class, vector

我有一个 A 类的大型对象数组（千万个），我想添加一个向量作为 A 类的成员。这个向量只需要数组中的少数对象。我想知道，将向量添加到类中会是一个明智的选择吗？多少内存将占用一个空向量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:07:55.367

现在我们知道空向量不是很“大”（VC2012x64 intellisense show`sizeof(std::vector<int>)`是 16 字节）。如果`sizeof(A)`比向量的大小大得多，则将向量成员添加到 A 对您来说可能是一个很好的解决方案。但是如果它不好，并且会增加很多内存，而且实际上没有多少 A 有向量，我会用向量创建第二个容器。例如：

```
#include <unordered_map>
unordered_map<size_t , vector<T>> VectorForA; 
```

其中 size_t 的意思是 A 的大数组的索引类型，以及`vector<T>`要添加到 A 的向量的类型。这对于固定索引“大”数组可能是好的。如果不知何故大数组中的 A 没有固定位置，则将 A 的值设为键可能会导致更简单的代码（同样，仅当 A 的值不重复时）。

注意：我（我）希望看到@Andy Prowl 或@Tony D 的完整答案，我认为这将非常有用

# alfresco - CMIS 查询错误

> ID：14554044
> 
> 赞同：0
> 
> 时间：2013-01-28T00:49:27.853
> 
> 标签：alfresco, cmis

我想知道 Alfresco 中“Company Home”目录下的所有文件夹名称，但出现错误。

代码 -

```
ItemIterable<QueryResult> results = session.query("SELECT * FROM cmis:folder where IN_TREE('/Company Home')", false);
try {
    for (QueryResult result : results) {
        folderId = result.getPropertyValueById(PropertyIds.OBJECT_ID);
        Folder folder = (Folder) session.getObject(folderId);
        System.out.println("Folder Name " + folder.getName());
    }
} catch(Exception e) {
    e.printStackTrace();
} 
```

错误 -

```
org.apache.chemistry.opencmis.commons.exceptions.CmisRuntimeException: 00270668 Request failed 500 /solr/alfresco/cmis?wt=json&amp;fl=DBID%2Cscore&amp;rows=100&amp;df=TEXT&amp;start=0&amp;locale=en_US&amp;fq=%7B%21afts%7DAUTHORITY_FILTER_FROM_JSON&amp;fq=%7B%21afts%7DTENANT_FILTER_FROM_JSON
    at org.apache.chemistry.opencmis.client.bindings.spi.atompub.AbstractAtomPubService.convertStatusCode(AbstractAtomPubService.java:452)
    at org.apache.chemistry.opencmis.client.bindings.spi.atompub.AbstractAtomPubService.post(AbstractAtomPubService.java:570)
    at org.apache.chemistry.opencmis.client.bindings.spi.atompub.DiscoveryServiceImpl.query(DiscoveryServiceImpl.java:142)
    at org.apache.chemistry.opencmis.client.runtime.SessionImpl$3.fetchPage(SessionImpl.java:567)
    at org.apache.chemistry.opencmis.client.runtime.util.AbstractIterator.getCurrentPage(AbstractIterator.java:132)
    at org.apache.chemistry.opencmis.client.runtime.util.CollectionIterator.hasNext(CollectionIterator.java:48)
    at main.java.org.apache.chemistry.opencmis.doc.QueryTest.folderName(QueryTest.java:180) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:13:36.920

IN_TREE 采用对象 id，而不是对象路径。如果您提供“公司主页”文件夹的 ID，则此查询应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:58:23.037

Company Home 是根文件夹，我建议您使用以下内容：

```
 Session session = createSession();

    Folder rootFolder = session.getRootFolder();

    ItemIterable<CmisObject> children = rootFolder.getChildren();

    for (CmisObject child : children) {

        System.out.println(child.getName());

    } 
```

# java - 是否需要在 Android Java 类中声明上下文？

> ID：14554046
> 
> 赞同：0
> 
> 时间：2013-01-28T00:50:05.783
> 
> 标签：java, android, class, constructor, android-context

我正在查看一个 android 应用程序中的一个类，它是一个普通的 java 类，它不扩展 Activity 或 Service 或任何其他 Android 类。

我注意到代码的作者创建并初始化了一个上下文对象。

对于Android中所有不扩展任何其他类的java类，是否需要创建上下文对象？可以只创建一个没有上下文部分的空构造函数吗？

我想在自己的应用程序中制作普通的 java 类，但不知道是否可以这样做，或者不这样做有什么缺点。

这是示例的代码剪辑：

```
 public class PlayGame {]

 private final Context ourContext;

 // constructor as required for android java classes
 public PlayGame(Context c){
    ourContext = c;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T01:29:39.847

> 我想在自己的应用程序中制作普通的 java 类，但不知道是否可以这样做，或者不这样做有什么缺点。

只要您的类正在为您的程序进行计算而不是实际的 UI 工作，那么您就可以在不提供 Context obj 的情况下声明一个类。通常，不传入 Context obj 的类是基本的帮助类，用于为您的应用程序操作数据/对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T00:53:23.213

上下文实例包含有关环境的信息并提供应用程序可能需要的服务。如果您的类不需要它，您可以随意跳过将上下文对象传递到您的类构造函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T00:54:22.973

> 可以只创建一个没有上下文部分的空构造函数吗？

是的。只要您不打算使用 Context 对象提供的任何东西。

# php - PHP proc_open 可用性

> ID：14554050
> 
> 赞同：2
> 
> 时间：2013-01-28T00:52:03.017
> 
> 标签：php, proc-open

我制作了一个 PHP 库，它使用`proc_open`并依赖外部应用程序来处理数据。

现在，我需要创建一个“检查”文件，该文件将分析服务器并返回是否可以在其上使用我的库。

我认为这些步骤就足够了：

*   检查是否允许 proc_open
*   检查是否安装了外部应用程序

如何检查是否允许 proc_open？另外，我猜 proc_open 也适用于基于 Windows 的服务器（仅使用 Windows 命令提示符而不是终端）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T00:54:47.400

`if( function_exists("proc_open"))`将是一个好的开始。然后使用一个`try..catch`块来尝试调用一个简单的`proc_open`测试。如果测试通过，则`proc_open`允许。

至于外部应用程序，如果它定义了任何功能，您可以使用`function_exists`它来检查它是否已安装并运行。

# objective-c - UITableView 浮动视图，如 iPhone 地图应用程序

> ID：14554051
> 
> 赞同：4
> 
> 时间：2013-01-28T00:52:05.503
> 
> 标签：objective-c, cocoa-touch

在 iOS 6 地图应用程序中，当查看位置的详细信息时，有一个控件，其作用类似于`UISegmentedControl`. 它有 3 个“标签”：“信息”、“评论”和“照片”。

当图片可见时，此控件上下滚动，但当向下滚动更多时，它会锚定到屏幕顶部并浮动。这些图片可能有助于澄清我要说明的内容：

![第一的](../Images/0c1c040016433a97211a1250a844002d.png) ![第二](../Images/bb47a42b4ed0a06e131de90ad438f0b5.png) ![第三](../Images/31c26d7831abe4d1addea36809304f16.png)

关于如何在我自己的 UITableView 上创建此行为的任何提示？tableview 需要有`Grouped`样式，而且我需要有多个 section，所以使用 Section Header View 是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T01:03:25.333

利用该`UITableView's tableHeaderView`属性添加您的分段控件。

`MapView`并且`TableView`应该是兄弟姐妹，并作为子视图添加到滚动视图。

`tableView.frame.size.height`应该是您在 image2 中看到的（parentViewHeight-navBarHeight ）

```
scrollView.frame.size.height = tableView.frame.size.height

scrollView.contentSize.height = tableView.frame.size.height + mapView.frame.size.height 
```

这应该足以获得您想要的效果。如果您有任何问题，请告诉我。

PS：mapView 只是我假设您在分段控件上方看到的视图的占位符。你可以用你想要的任何视图替换它。我假设您知道如何执行这些视图的分组 tableView 部分。

# java - 如何从构造函数返回错误消息（字符串）？

> ID：14554054
> 
> 赞同：0
> 
> 时间：2013-01-28T00:52:48.163
> 
> 标签：java, constructor

要求：

1.  部分是通过选择一位老师、一门学科和一个时间表来创建的。

2.  系统验证是否遵循所有业务规则。

    *   系统检测到未遵循业务规则。

    *   系统通知用户冲突。

    *   系统不创建新部分。

3.系统创建新部分。

我的问题是，如果我为 Section(Teacher t, Subject s, Schedule c) 定义了一个构造函数，我不知道如何返回冲突的错误消息。

我应该让我的构造函数抛出异常吗？如果是，如何从捕获的异常中返回字符串？如何创建该异常？

或者有没有更好但更简单的实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T01:03:11.967

报告构造函数失败归结为两个选项：

1.  按照您的建议抛出异常。如果失败不会经常发生并且确实是“异常”的，那么这是一种合理的方法。
2.  如果失败是业务逻辑的正常部分，我建议使用工厂模式并返回一个包装器对象，该对象包含新创建的对象以及一个状态变量，该变量可以指示失败发生时的详细原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T01:05:11.883

您可以肯定地抛出异常。

```
throw new Exception("Some required files are missing"); 
```

或者创建一个新的异常以在您的应用程序中使用（它的工作方式相同）

如果您想阅读 try / catch 语句中的消息，只需执行以下操作：

```
try
{
  // ...
}
catch(Exception ex)
{
  System.out.println(ex.getMessage()); //this will get "Some required files are missing"
} 
```

有关更多信息，请查看以下链接： [http ://en.wikibooks.org/wiki/Java_Programming/Throwing_and_Catching_Exceptions](http://en.wikibooks.org/wiki/Java_Programming/Throwing_and_Catching_Exceptions) [如何在 Java 中抛出一般异常？](https://stackoverflow.com/questions/6942624/how-to-throw-a-general-exception-in-java) [http://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html#getMessage()](http://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html#getMessage())

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T01:00:27.360

不可能从构造函数返回值。这样做的唯一方法是抛出某种异常。您可以使用现有的异常类型（如果有任何适用）或通过扩展创建自己的`Exception`. 例如：

```
public class MyException extends Exception {

    public MyException(){
        super();
    }

    public MyException(String message){
        super(message);
    }
} 
```

您的构造函数将简单地抛出异常的新实例并设置适当的消息。创建类实例的代码将捕获异常并处理它。您可以在此时通过调用获取消息`getMessage()`。

# android - 使用 OpenCV 设置 Android

> ID：14554067
> 
> 赞同：2
> 
> 时间：2013-01-28T00:54:30.757
> 
> 标签：android, eclipse, opencv

> **可能重复：**
> [Android 上的 OpenCV 使用 Eclipse](https://stackoverflow.com/questions/7991621/opencv-on-android-using-eclipse)

什么是解释如何配置 Android SDK 以使用 OpenCV 构建 Android 应用程序的好网站？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T07:00:26.620

我昨天用 OpenCV 设置了一个 Android 应用程序。

有两种方法可以解决它

1.  使用适用于 Android 的 OpenCV
2.  使用 JavaCV

OpenCV for Android 比 JavaCV 得到更全面的支持。按照 Google 的说明安装 Eclipse、Android SDK 和[NDK](http://developer.android.com/tools/sdk/ndk/index.html)（不要忘记 NDK！运行 C++ 代码需要它。没有它，您的应用程序将神秘地崩溃）。之后，按照本[教程](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html)安装 openCV。试用示例应用程序。

或者，您可以尝试使用 JavaCV 而不是 Android 的 OpenCV。这意味着您无需设置 Android NDK。这也意味着您不需要编写任何 C++。这个我没试过。但我怀疑这更容易。缺点是：它不支持 OpenCV 所做的一切。

# android - 有没有办法在 Google Map API v2 中显示道路方向？

> ID：14554078
> 
> 赞同：13
> 
> 时间：2013-01-28T00:56:23.423
> 
> 标签：android, google-maps, driving-directions, google-directions-api

我正在使用谷歌和这里寻找答案，我发现的唯一相关帖子是：

[Google Maps Android V2 和 Direction API](https://stackoverflow.com/questions/13916679/google-maps-android-v2-and-direction-api)

[使用 Google Maps API v2 获取行车路线](https://stackoverflow.com/questions/14495030/google-map-api-v2-get-driving-directions)

但那里没有答案。所以我已经提到过，但我会再说一遍。我正在寻找使用 FragmentActivity 和 SupportMagFragment 和 LatLng 对象而不使用 MapView、MapActivity 和 GeoPoint 的 Google Map API v2 解决方案。

此外，我没有使用 Overlay 对象，因此无法在地图上绘制方向，是否有替代方法？

那么有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T16:40:54.220

[在此处](https://stackoverflow.com/questions/14495030/google-map-api-v2-get-driving-directions/15053901#15053901)尝试此解决方案。您可以在 V2 上获取驾驶或步行方向。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T01:09:07.337

叠加层确实值得忘记。

可以轻松绘制折线

[https://developers.google.com/maps/documentation/android/lines#add_a_polyline](https://developers.google.com/maps/documentation/android/lines#add_a_polyline)

解析 JSON 响应后，只需遍历您的点：

```
PolylineOptions rectOptions = new PolylineOptions()
        .add(new LatLng(37.35, -122.0))
        .add(new LatLng(37.45, -122.0))  // North of the previous point, but at the same longitude
        .add(new LatLng(37.45, -122.2))  // Same latitude, and 30km to the west
        .add(new LatLng(37.35, -122.2))  // Same longitude, and 16km to the south
        .add(new LatLng(37.35, -122.0)); // Closes the polyline.

// Set the rectangle's color to red
rectOptions.color(Color.RED);

// Get back the mutable Polyline
Polyline polyline = myMap.addPolyline(rectOptions); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-20T17:55:29.537

您的问题标题比您的要求更笼统，因此我将以一种我认为对查看此问题的人有益的方式回答这个问题，并希望以不同的方式满足您的要求。

如果您没有在已经加载的片段的地图上下文中显示方向，并且已经做了一些事情来显示地图上的方向（这可能类似于 OP 正在做的事情），那么它会更容易并且我相信这样做是标准的带有`Intent`.

这将启动一个地图路径活动（通过一个单独的应用程序 - 启动的应用程序取决于用户的兼容应用程序，默认情况下是谷歌地图），该活动绘制从起始地址 ( `String originAddress`) 到目的地地址 ( `String destinationAddress`) 通过道路的方向：

```
// Build the URI query string.
String uriPath = "https://www.google.com/maps/dir/";
// Format parameters according to documentation at:
// https://developers.google.com/maps/documentation/directions/intro
String uriParams = 
    "?api=1" +
    "&origin=" + originAddress.replace(" ", "+")
        .replace(",", "") +
    "&destination=" + destinationAddress.replace(" ", "+")
        .replace(",", "") +
    "&travelmode=driving";
Uri queryURI = Uri.parse(uriPath + uriParams);
// Open the map.
Intent intent = new Intent(Intent.ACTION_VIEW, queryURI);
startActivity(activity, intent, null); 
```

（在哪里`activity`只是当前活动的`Activity`- 通过当前编程上下文中适当的任何方式获得）。

下面的代码`String`从一个`LatLng`对象中获取一个地址（然后必须`String`为上面的 URI 查询进行处理）：

```
/**
* Retrieves an address `String` from a `LatLng` object.
*/
private void getAddressFromLocation(
    final StringBuilder address, final LatLng latlng) {
    // Create the URI query String.
    String uriPath = 
        "https://maps.googleapis.com/maps/api/geocode/json";
    String uriParams = 
        "?latlng=" + String.format("%f,%f",
            latlng.latitude, latlng.longitude) +
        "&key=" + GOOGLE_MAPS_WEB_API_KEY;
    String uriString = uriPath + uriParams;
    // Issue the query using the Volley library for networking.
    RequestFuture<JSONObject> future = RequestFuture.newFuture();
    JSONObject response = null;
    // Required for JsonObjectRequest, but not important here.
    Map<String, String> jsonParams = new HashMap<String, String>();
    JsonObjectRequest request = 
        new JsonObjectRequest(Request.Method.POST, 
            uriString,
            new JSONObject(jsonParams),
            new Response.Listener<JSONObject>() {
                @Override
                public void onResponse(JSONObject response) {
                    try {
                        if (response != null) {
                            String resultString =
                                response.getJSONArray("results")
                                        .getJSONObject(0)
                                        .getString("formatted_address");
                            // Assumes `address` was empty.
                            address.append(resultString);
                        } // end of if
                        // No response was received.
                    } catch (JSONException e) {
                        // Most likely, an assumption about the JSON 
                        // structure was invalid.
                        e.printStackTrace();
                    }
                } // end of `onResponse()`
            }, // end of `new Response.Listener<JSONObject>()`
            new Response.ErrorListener() {
                @Override
                public void onErrorResponse(VolleyError error) {
                    Log.e(LOG_TAG, "Error occurred ", error);
                }
            });
    // Add the request to the request queue.
    // `VolleyRequestQueue` is a singleton containing
    // an instance of a Volley `RequestQueue`.
    VolleyRequestQueue.getInstance(activity)
        .addToRequestQueue(request);
} 
```

此请求是异步的，但[可以设为同步](https://stackoverflow.com/questions/16904741/can-i-do-a-synchronous-request-with-volley)。您将需要调用`toString()`传递给的实际参数`address`来获取`originAddress`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T03:22:56.847

> 问：我正在使用谷歌和这里寻找答案，我发现的唯一相关帖子是：谷歌地图 Android V2 和方向 API 谷歌地图 API v2 - 获取行车路线

**答案：**你说，“但那里没有答案”。不是绝对正确的。在此站点中，您只能找到一些关于此的线索。我认为你不会在这里得到完美的代码和具体的实现 KNOW-HOWs。事实上，很多开发者都想让应用程序在谷歌地图上显示路线或方向。但我认为仅使用纯 Google Maps API v2 没有解决方案来获取路线。

> 问：所以我已经提到过，但我会再说一遍。我正在寻找使用 FragmentActivity 和 SupportMagFragment 和 LatLng 对象而不使用 MapView、MapActivtiy 和 GeoPoint 的 Google Map API v2 解决方案。

**答：**这里有[一些很好的示例教程（点击这里）](http://wptrafficanalyzer.in/blog/gps-and-google-map-in-android-applications-series/)。你可以找到你想要的。

> 问：另外我没有使用 Overlay 对象，所以我无法在地图上绘制方向，是否有替代方法？那么有没有办法做到这一点？

**答：**在 Google Maps API v2 中，不再需要烦人的 Overlay 等。为此，您可以在我上面的链接网站中找到答案。

# python - 如何使用 Flask 处理 Foursquare 推送 POST 请求？

> ID：14554079
> 
> 赞同：0
> 
> 时间：2013-01-28T00:56:54.407
> 
> 标签：python, flask, foursquare

我正在尝试以下所有方法来获取[推送请求](https://developer.foursquare.com/overview/realtime)信息，但它们都失败了：

```
@app.route('/handlepush', methods=['POST'])
def handlepush():
    """
    Handles push notifications from Foursquare
    """
    print 'handling push'
    print request

    try:
        print 'request.form:' + json.loads(request.form['checkin'],
                          parse_float=str)
    except:
        print 'request.form error'

    try:
        print 'request.data: ' + json.loads(request.data['checkin'], parse_float=str)
    except:
        print 'no request.data'

    try:
        print 'request.form' + request.form
    except:
        print 'no request.form'

    try:
        print 'request.args' + request.args
    except:
        print 'no request.args'

    if request.headers['Content-Type'] == 'text/plain':
        print'text/plain'
        return "Text Message: " + request.data

    elif request.headers['Content-Type'] == 'application/json':
        print 'application/json'
        return "JSON Message: " + json.dumps(request.json)

    try:
        print 'request.form["id"]:' + request.form['checkin']['id']
    except:
        print 'request.form error'

    try:
        print request.data['checkin']['id']
    except:
        print 'request.data error'

    try:
        print 'request.json: ' + request.json
    except:
        print 'no request.json'

    return 'hi' 
```

这是我的回应：

```
2013-01-28T00:54:31+00:00 app[web.1]: <Request 'http://my.herokuapp.com/handlepush' [POST]>
2013-01-28T00:54:31+00:00 app[web.1]: handling push
2013-01-28T00:54:31+00:00 app[web.1]: no request.args
2013-01-28T00:54:31+00:00 app[web.1]: 10.71.26.114 - - [28/Jan/2013 00:54:31] "POST /handlepush HTTP/1.1" 200 -
2013-01-28T00:54:31+00:00 app[web.1]: request.form error
2013-01-28T00:54:31+00:00 app[web.1]: no request.data
2013-01-28T00:54:31+00:00 app[web.1]: no request.form
2013-01-28T00:54:31+00:00 app[web.1]: request.data error
2013-01-28T00:54:31+00:00 app[web.1]: no request.json
2013-01-28T00:54:31+00:00 app[web.1]: request.form error 
```

所以我想知道解决这个问题的最佳方法。根据我的经验，当标头指定为“application/json”时，request.json 适用于 json POST，但我不知道如何获取此推送数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:23:45.700

```
request.form['checkin'] 
```

成功了，让我得到了 json。

# java - HADOOP :: java.lang.ClassNotFoundException: WordCount

> ID：14554088
> 
> 赞同：2
> 
> 时间：2013-01-28T00:57:53.263
> 
> 标签：java, hadoop, mapreduce, classnotfoundexception

我正在使用 eclipse 导出 map-reduce 程序的 jar 文件。当我使用命令运行 jar 时

```
 hadoop jar hadoop-prog.jar WordCount /home/temp/input /home/temp/output 
```

它总是显示错误：

```
 Exception in thread "main" java.lang.ClassNotFoundException: WordCount
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:149) 
```

顺便说一句，我从互联网上得到了一个 wordcount 示例 jar 文件，它运行得很好。

我无法弄清楚问题出在哪里。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T01:07:50.660

如果您尝试运行示例中提供的字数统计，您应该运行：

```
hadoop jar hadoop*examples*.jar wordcount /home/temp/input /home/temp/output 
```

有关如何在[此链接](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/#running-a-mapreduce-job)上运行 wordcount 的更多信息。

一般来说，如果您正在开发自己的 Map/Reduce 作业，则应包含驱动程序类的完整包名，这样可能会起作用：

```
hadoop jar wordcount.jar com.something.WordCount /home/temp/input /home/temp/output 
```

# ruby - 在任何源中都找不到 mysql2-0.3.11

> ID：14554097
> 
> 赞同：0
> 
> 时间：2013-01-28T01:00:39.430
> 
> 标签：ruby, rubygems, bundler

我有一个需要使用 mysql2 的 Ruby-on-Rails 应用程序。当我尝试运行该应用程序时，我收到以下错误：

> 在任何来源中都找不到 mysql2-0.3.11

如果我运行，`bundle install`我会收到以下错误：

> 安装 mysql2 (0.3.11) 时出错，Bundler 无法继续。

最后，如果我尝试运行，`gem install mysql2 -v '0.3.11'`我会收到此错误：

> 错误：安装 mysql2 时出错：错误：无法构建 gem 原生扩展。

有什么建议么？

# symfony - Symfony2 和 Doctrine2：如果加入的表没有关联的行，则自定义实体存储库查询以检索单个结果

> ID：14554099
> 
> 赞同：0
> 
> 时间：2013-01-28T01:00:57.237
> 
> 标签：symfony, doctrine-orm, repository, entity

我有两个实体/表，一个用于县，一个用于城市。一个特定的县与城市具有 OneToMany 关系，我正在尝试在实体存储库中进行自定义查询，以根据其 ID 查询一个县并返回该县和与其对应的城市。

如果县有分配的城市，我的查询目前似乎工作得很好，但如果它还没有任何城市，Doctrine 会给我一个“无法找到县实体。”例外。

我相信我的查询中存在逻辑错误，但是如果没有城市与之关联，我很难重写它以仅按 ID 返回县。

我的查询：

```
class CountyRepository extends EntityRepository
{
  public function findOneByIdJoinedToCities($id)
  {
    $qb = $this->createQueryBuilder('c')
               ->addSelect('p')
               ->join('c.cities', 'p')
               ->where('p.county = :id')
               ->setParameter('id', $id)
               ;

    $query = $qb->getQuery();

    try {
        return $query->getSingleResult();
    } catch (\Doctrine\ORM\NoResultException $e){
        return null;
    }
  }
} 
```

如果尚未分配城市，我如何更改上面的代码以仍然返回一个单一的县结果？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:23:00.113

基本 SQL 问题：使用左连接。例如：

```
 $qb = $this->createQueryBuilder('c')
               ->addSelect('p')
               ->leftJoin('c.cities', 'p')
//               ^^^^^^^^
               ->where('p.county = :id')
               ->setParameter('id', $id)
               ; 
```

# c - 一行输入多个整数，返回整数个数

> ID：14554100
> 
> 赞同：0
> 
> 时间：2013-01-28T01:01:26.977
> 
> 标签：c, input

在学习了 Java（以及其他语言）之后，我正在学习 C，我对如何处理这个简单的问题感到有些困惑。我需要编写一个程序，它将以一行的形式输入。比如`5 2 75 43 68`（只有`int`s），我需要返回`int`s的个数，它们的总和，以及正负数的个数。

问题是输入的数量显然是可变的——可能有一个 int 或七个，但都将在一行上。我不确定如何使用 C 来处理可变数量的输入。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:09:17.307

要处理可变数量的输入，您需要循环和 scanf 直到您按下 (Ctrl+D) 下面是一个示例：

```
int n,sum=0,count=0;
while(scanf("%d",&n)!=EOF)
{
sum=sum+n;
count++;
}
printf("sum=%d,count=%d",sum,count); 
```

注意：当您按下 Ctrl+D 时，scanf 返回 -1，因此接受输入的过程终止！

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T01:05:28.417

输入一个字符串，然后搜索空格，然后转换该位置的每个数字并将其添加到计数和求和中。这样，您只需要在输入行的缓冲区上设置上限；你不使用数组，所以你不需要限制整数的数量，也不需要搞乱动态分配。

编辑：在 Kerrek SB 的格式中，`fgets`combine`strchr`和`strtol`. :P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T01:15:43.423

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
char buffer[200];
int numbers[100];
int main() {

    char *ptr;
    int cnt = 0;

    fgets(&buffer[0], 200, stdin); // Get the string

    ptr = strtok(buffer, " "); // Split in every space
    do {
            printf("Number %d: %s\n", cnt, ptr);
            numbers[cnt] = strtol(ptr, NULL, 0); // Grab number
            cnt++;
    } while((ptr = strtok(NULL, " ")));

    printf("Total numbers: %d\n", cnt);

} 
```

# c# - HtmlAgilityPack - 删除节点后保留文本位置

> ID：14554102
> 
> 赞同：2
> 
> 时间：2013-01-28T01:01:50.013
> 
> 标签：c#, html, parsing, html-agility-pack

当我删除包含文本和子节点的节点（带有`keepGrandChildren`）时，文本将一直推到子节点之后，而不是停留在其原始位置。

**例子：**

```
var doc = new HtmlDocument();
doc.LoadHtml(@"
<span id='first'>
    This text comes first.
    <span id='second'>This text comes second.</span>
</span>");

var node = doc.GetElementbyId("first");
node.ParentNode.RemoveChild(node, true);
doc.Save(Console.Out); 
```

我得到的输出是：

```
 <span id='second'>This text comes second.</span>
        this text comes first. 
```

代替：

```
 this text comes first.
    <span id='second'>This text comes second.</span> 
```

**有没有什么方法可以在`keepGrandChildren`不将内部文本推到最后的情况下删除节点？**
我想保留*绝对*顺序并确保没有文本或节点更改其原始位置，否则文档将被破坏。

*编辑：* 我正在使用`HtmlAgilityPack 1.4.6.0`和`.NET 4.0`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T01:15:08.850

这是 HtmlAgilityPack 中的一个[已知问题](http://htmlagilitypack.codeplex.com/workitem/9113)。下面的代码应该可以解决这个问题：

```
public static void RemoveChildKeepGrandChildren(HtmlNode parent, HtmlNode oldChild)
{
    if (oldChild.ChildNodes != null)
    {
        HtmlNode previousSibling = oldChild.PreviousSibling;
        foreach (HtmlNode newChild in oldChild.ChildNodes)
        {
            parent.InsertAfter(newChild, previousSibling);
            previousSibling = newChild;  // Missing line in HtmlAgilityPack
        }
    }
    parent.RemoveChild(oldChild);
} 
```

# javascript - WEBVTT 字幕显示多次

> ID：14554105
> 
> 赞同：1
> 
> 时间：2013-01-28T01:02:19.870
> 
> 标签：javascript, html, video, subtitle

这是 WEBVTT：

```
WEBVTT FILE

1
00:10:21.125 --> 00:10:23.951
Test

2
00:10:25.080 --> 00:10:27.392
another
test

3
00:10:39.959 --> 00:10:42.676
Damn 
```

此代码是“即时”生成的。我的`track`标签如下：

```
<track kind="subtitles" srclang="en" label="English" default></track> 
```

我从生成的字符串创建一个 blob，然后从 blob 创建一个 URL，并将其链接`track`到 URL。

如果生成的文件有一个字幕 - 一切都很好。添加第二个字幕后，第一个出现两次（一个在另一个之上），第二个出现一次。有三个字幕，第一个出现三次，第二个出现两次，第三个出现一次。

这是什么垃圾？我错在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:13:34.133

通过删除轨道元素并每次生成一个新元素来解决它。

# c# - 在哪里存储域中可查询的用户特定日志？

> ID：14554109
> 
> 赞同：0
> 
> 时间：2013-01-28T01:02:36.497
> 
> 标签：c#, sqlite, logging, active-directory

我有一个在远程桌面会话主机服务器上运行的应用程序，它正在跟踪用户登录/注销/空闲时间，但是我不知道在哪里存储我收集的数据的好地方。

用户流失率相当高，一个用户账户只会存在 1-4 个月，最多会有大约 3KB 的 XML 格式的日志与之关联。

数据需要可从其他用户（特别是其他用户查询的服务）检索，因此我认为将其存储在用户 AppData 文件夹中是不可能的。

我正在考虑将 XML 日志存储在 Active Directory 属性中，但我不知道 Active Directory 是否真的旨在存储 3KB 范围内的文本 blob。

我最后的想法是使用类似 SQLite 数据库的东西。然而，由于用户流失率很高，我希望使用每个用户存储的东西。这样，当用户被删除时，记录也会随用户一起删除，如果通过我设置的管理软件之外的方法删除用户，我无需担心保持数据库同步。

在这种情况下记录记录的最佳选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:23:06.050

我建议一个包含每个用户子文件夹的日志文件夹。

在删除帐户后运行（预定的）powershell 脚本进行清理，或者在历史信息突然获得价值时存档。

然后，数据位于指定位置，（仅）用户可以轻松定位和访问，而不会污染 AD。

# commit - 我应该将小型开发承诺压缩成更大的开发承诺吗？

> ID：14554110
> 
> 赞同：5
> 
> 时间：2013-01-28T01:02:49.757
> 
> 标签：commit, dvcs, squash

*关于如何*压缩 git 和其他 DVCS 的提交存在（太多）问题，例如：

*   [使用 Git 将我最后的 X 提交压缩在一起](https://stackoverflow.com/questions/5189560/how-can-i-squash-my-last-x-commits-together-using-git)
*   [如何将所有 git 提交压缩为一个？](https://stackoverflow.com/questions/1657017/git-squash-all-commits-into-a-single-commit)
*   [在不合并的情况下将各种提交合二为一](https://stackoverflow.com/questions/6728397/joining-various-commits-in-one-without-merging)
*   [有没有办法以非交互方式压缩大量提交？](https://stackoverflow.com/questions/7275508/is-there-a-way-to-squash-a-number-of-commits-non-interactively?lq=1)
*   [我可以在 Mercurial 中压缩提交吗？](https://stackoverflow.com/questions/1725607/can-i-squash-commits-in-mercurial)
*   [使用 Mercurial，我如何在推送之前将一系列变更集“压缩”成一个？](https://stackoverflow.com/questions/1200691/with-mercurial-how-can-i-compress-a-series-of-changesets-into-one-before-push)
*   ...

我的问题是，**我想压缩提交**吗？我应该保留详细的提交序列以显示功能是如何开发的，还是应该在功能完成后将它们压缩成一个，以保持历史更清晰？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T12:44:16.550

# **压缩提交的**原因：

*   更干净、更简单的历史。
*   更小的历史。克隆 repos 时的包袱更少。
*   删除“垃圾”提交，例如拼写错误修复。
*   提供改进提交消息的机会。

# **反对**压缩提交的原因：

*   我们不能再跟踪该功能/错误修复的历史来了​​解它是如何开发的，或者查看尝试过但后来被替换的替代解决方案。*（引自 Mike Gerwitz 的[A Git Horror Story](http://mikegerwitz.com/docs/git-horror-story.html)。）*
*   它使 git bisect 无用。如果我们在软件中发现由 300 个压缩提交组成的单个补丁引入的错误，我们只能自己挖掘代码并调试，而不是让 Git 为我们找出问题所在。*（引自 Mike Gerwitz 的[A Git Horror Story](http://mikegerwitz.com/docs/git-horror-story.html)。）*

* * *

[如果您不想给出自己的答案，请随时在此 wiki 答案中添加其他原因。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T02:15:33.660

这取决于您希望历史记录的粒度。如果在较小的提交中添加和删除了某些行，其他人稍后在提交历史中查看它们是否有用，或者它们只是会误导未来维护者的噪音？

考虑一下如果你压扁所有较小的提交，那么差异将被表达为一次提交。它是否正确传达了变更（或一系列变更）的全部内容？或者，中间提交中是否有一些东西可以传达一些关于你在做什么的重要信息？

如果您再次实施更改，是否有必要进行相同的中间提交？通常对我来说，这些中间提交要么是我在其上迭代构建整个更改的脚手架，在这种情况下，我可以通过挤压来丢弃它们。有时，一些中间提交修复了不需要成为提交历史的一部分的愚蠢错误或拼写错误，因此它们也可以被压缩。

没有硬性规定。在考虑是否压缩特定提交时，询问他们是否贡献了使整个更改不清楚的烟雾，或者他们是否贡献了有助于解释整个更改的光。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T22:51:51.127

DVCS 的优势之一是能够为检查点和保留工作进行频繁的小提交，而不必发布它。

也就是说，我最近开始遇到我认为是 Mercurial 鼓励的默认“重写历史记录不好”立场的限制。将功能拆分为许多提交，并合并而不是变基，历史会很快变得非常混乱。正如[DavidM 指出的那样](https://stackoverflow.com/a/14554553/351301)，您采用哪种方法或方法组合将取决于您之后如何使用您的历史记录。我发现自己更频繁地使用 Mercurial 队列和变基等工具，以帮助保持历史更清晰。

我也对 Mercurial（目前）[前沿的过时标记概念](http://mercurial.selenic.com/wiki/ChangesetEvolution)的潜力很感兴趣。通过存储原始变更集但允许它们被压扁的变更集取代，您似乎也可以吃掉蛋糕：清理历史记录，默认情况下仅显示最新的、合理大小的变更集 - 但始终具有选项解包一个功能并仔细检查其中的较小努力。

# javascript - 使用 Backbone.js 将表单输入序列化为 JSON

> ID：14554111
> 
> 赞同：11
> 
> 时间：2013-01-28T01:03:03.223
> 
> 标签：javascript, jquery, json, backbone.js, serialization

我正在开发 RESTful 应用程序——我在服务器端使用 Java，在前端使用 Backbone。2 将通过 JSON 进行通信。

我的应用程序有很多表格，我想：

1.  将表单输入序列化为 JSON
2.  将 JSON 发送到服务器

我的问题：

1.  将表单输入序列化为 JSON 的最佳方法是什么？也许只有 Backbone 的解决方案？
2.  一旦表单输入序列化为 JavaScript 对象 - 将 JSON 发送到服务器的最佳方式是什么？

到目前为止我的代码：

**Javascript 和骨干网**

```
$(function(){
    $.fn.serializeObject = function()
    {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function() {
            if (o[this.name] !== undefined) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });
        return o;
    };

    //Model 
    var SignupForm = Backbone.Model.extend();

    //View
    var SignupView = Backbone.View.extend({
        el: '.signupForm',
        events: {
            'click input.submit': 'getStatus'
        },
        getStatus: function(event){
            var data = JSON.stringify($('form').serializeObject());
            $('.test').html(data);
            return false;
        }
    });

    var signupForm = new SignupForm();
    var signupView = new SignupView({
        model: signupForm
    });
}); 
```

**HTML**

```
<div class="signupForm">
    <form class"signup">
        <label for="name" >Name:</label>
        <input type="text" id="name" name="name" />

        <label for="surname" >Surname:</label>
        <input type="text" id="surname" name="surname" />

        <input type="submit" value="submit" class="submit" />
    </form>

    <div class="test"></div>
</div> 
```

如果这是微不足道的，我是 Backbone 的新手，很抱歉。

我很想尽可能以最好的方式编写我的应用程序，所以请随时告诉我是否有更好的方法来做到这一点。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-14T21:28:05.560

仅序列化为 JSON 也有此选项

[https://github.com/marioizquierdo/jquery.serializeJSON](https://github.com/marioizquierdo/jquery.serializeJSON)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T01:24:36.460

> 将表单输入序列化为 JSON 的最佳方法是什么？也许只有 Backbone 的解决方案？

使用[Backbone.Forms](https://github.com/powmedia/backbone-forms)将表单数据读入模型。

例如：

```
var User = Backbone.Model.extend({
    schema: {
        title:      { type: 'Select', options: ['Mr', 'Mrs', 'Ms'] },
        name:       'Text',
        email:      { validators: ['required', 'email'] },
        birthday:   'Date',
        password:   'Password',
        address:    { type: 'NestedModel', model: Address },
        notes:      { type: 'List', listType: 'Text' }
    }
});

var user = new User();

var form = new Backbone.Form({
    model: user
}).render();

$('body').append(form.el); 
```

> 一旦表单输入序列化为 JavaScript 对象 - 将 JSON 发送到服务器的最佳方式是什么？

之后，您可以将模型与 REST 服务同步。你必须在你的模型上设置一个 url 属性，然后调用 save 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-23T14:02:07.033

另一种解决方案是使用[backbone.syphon](https://github.com/derickbailey/backbone.syphon/)扩展，它允许您以与实体创建表单相同的方式简单地提交表单：

```
Backbone.View.extend({
  events: {
    "submit form": "formSubmitted"
  },

  formSubmitted: function(e){
    e.preventDefault();

    var data = Backbone.Syphon.serialize(this);
    this.model.set(data);

    this.model.save();
  }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T01:39:30.537

Backbone 不对您如何实现行为做出任何假设。它只提供了一个干净的架构模式。所以你实现表单序列化的方式似乎很好（类似于或改编自：[Convert form data to JavaScript object with jQuery](https://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery)）

就持久性而言，您可以在单击提交按钮时设置模型的属性。

在您看来：

```
getStatus: function(event){
            var data = JSON.stringify($('form').serializeObject());
            this.model.set(data);

 } 
```

在你的模型中：

```
initialize: function(){
   //This will save attributes every time a change event is triggered.
   this.bind("change", this.save);
} 
```

# c# - 将 MVC DropDownlistFor() 绑定到模型的导航属性

> ID：14554112
> 
> 赞同：3
> 
> 时间：2013-01-28T01:03:09.593
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4

我正在为我的 C# MVC 课程编写一个简单的教程应用程序，我们的教授让我们使用会话和列表在内存系统中使用了一些非常糟糕的东西，因为他还没有开始教授实体框架

我遇到的问题是，当我尝试将下拉列表绑定到我的模型时，它给了我一个意想不到的结果。

我在视图中使用的代码是：

```
<div class="editor-label">
    @Html.LabelFor(model => model.Author)
</div>
<div class="editor-field">
    @Html.DropDownListFor(m => m.Author, new SelectList(new Lab2Repository().GetAuthors(), "Id", "Name"), "---- Select Category ----")
    @Html.ValidationMessageFor(m=>m.Author)
</div>
<div class="editor-label">
    @Html.LabelFor(m=>m.Category)
</div>
<div class="editor-field">
    @Html.DropDownListFor(m => m.Category, new SelectList(new Lab2Repository().GetCategories(), "Id", "Name"), "---- Select Category ----")
    @Html.ValidationMessageFor(m => m.Category)

</div> 
```

当我运行该代码时，无论选择什么，它都会给出验证错误 ![在此处输入图像描述](../Images/5520ab37f67b553a6b2493c5e302b517.png)

存储库代码：

```
using System;
using System.Linq;
using System.Collections.Generic;
using Int422.Lab2.Data;
using System.Web;
using Int422.Lab2.Models;

public class Lab2Repository
{
    public Lab2Context Data { get; set; }
    public Lab2Repository()
    {
        Data = (Lab2Context)HttpContext.Current.Application["State"];
    }

    #region Retrieval

    public IEnumerable<Book> GetBooks()
    {
        return Data.Books;
    }
    public IEnumerable<Author> GetAuthors()
    {
        return Data.Authors.Select(obj => new Author(obj.Name) 
        { 
            Id = obj.Id, 
            Books = GetBooks().Where(b=>b.Author.Id == obj.Id).ToList() 
        });
    }

    public IEnumerable<Category> GetCategories()
    {
        return Data.Categories.Select(obj => new Category(obj.Name, obj.Description) 
        {  
            Id = obj.Id, 
            Books = GetBooks().Where(b=>b.Category.Id == obj.Id).ToList(),
        });

    } 
    #endregion
    #region Singles
    public Author GetAuthor(int id)
    {
        return GetAuthors().Where(obj => obj.Id == id).Single();
    }

    public Category GetCategory(int id)
    {
        return GetCategories().Where(obj => obj.Id == id).Single();
    }

    public Book GetBook(int id)
    {
        return Data.Books.Where(obj => obj.Id == id).Single();
    }
    #endregion
    #region Edit
    public void Edit(int id, Category rec)
    {
        if (id != rec.Id)
            throw new InvalidOperationException("Id Mismatch during edit process");

        int index = Data.Categories.IndexOf(Data.Categories.Single(p => p.Id == id));
        if (index == -1)
            throw new InvalidOperationException("Record not found no record to edit");
        Data.Categories[index] = rec;
        SaveChanges();

    }
    public void Edit(int id, Book rec)
    {
        if (id != rec.Id)
            throw new InvalidOperationException("Id Mismatch during edit process");

        int index = Data.Books.IndexOf(Data.Books.Single(p => p.Id == id));
        if (index == -1)
            throw new InvalidOperationException("Record not found no record to edit");
        Data.Books[index] = rec;
        SaveChanges();
    }

    public void Edit(int id, Author rec)
    {
        if (id != rec.Id)
            throw new InvalidOperationException("Id Mismatch during edit process");

        int index = Data.Authors.IndexOf(Data.Authors.Single(p => p.Id == id));
        if (index == -1)
            throw new InvalidOperationException(String.Format("Record id {0} not found", id));
        Data.Authors[index] = rec;
        SaveChanges();

    }
    #endregion
    #region Create
    //
    public int Create(Category m)
    {
        m.Id = Data.Categories.Max(o => o.Id) + 1;
        Data.Categories.Add(m);
        SaveChanges();
        return m.Id;

    }

    //adds new author to the collection returns the id 
    public int Create(Author m)
    {
        m.Id = Data.Authors.Max(o => o.Id) + 1;
        Data.Authors.Add(m);
        SaveChanges();
        return m.Id;
    }

    public int Create(Book m)
    {
        m.Id = Data.Authors.Max(o => o.Id) + 1;
        Data.Books.Add(m);
        SaveChanges();
        return m.Id;
    }
    #endregion
    #region Delete

    public void Delete(Author rec)
    {
        Data.Authors.Remove(Data.Authors.Single(o => o.Id == rec.Id));
        SaveChanges();
    }

    public void Delete(Category m)
    {
        Data.Categories.Remove(Data.Categories.Single(o => o.Id == m.Id));
        SaveChanges();
    }

    public void Delete(Book m)
    {
        Data.Books.Remove(Data.Books.Single(o => o.Id == m.Id));
        SaveChanges();
    }

    #endregion
    #region Session Persistance

    public void SaveChanges()
    {
        //save to session 
        HttpContext.Current.Application["State"] = Data;
        //refresh repo state from session 
        Data = (Lab2Context)HttpContext.Current.Application["State "];
    }

    #endregion

} 
```

楷模：

```
 public class Author
    {
        public Author(string name)
        {
            Name = name;
        }
        public Author()
        {
            Books = new List<Book>();
        }
        public int Id { get; set; }
        public string Name { get; set; }
        public virtual ICollection<Book> Books { get; set; }

    }

public class Category
    {

        public Category(string name, string desc)
        {
            Name = name;
            Description = desc;
            Books = new List<Book>();
        }
        public Category()
        {

        }
        public int Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
        public virtual ICollection<Book> Books  { get; set; }

    }

public class Book
    {
        public Book(string title, Author author, Category category, double retailPrice, double cost)
        {
            Title = title;
            Author = author;
            Category = category;
            RetailPrice = retailPrice;
            Cost = cost; 
        }
        public Book()
        {

        }

        public int Id { get; set; }
        public Category Category { get; set; }
        public Author Author { get; set; }
        public string Title { get; set; }
        public double RetailPrice { get; set; }
        public double Cost { get; set; }

    } 
```

控制器：

```
public partial class BooksController : Controller
    {
        private Lab2Repository repo = new Lab2Repository();

        //
        // GET: /Books/

        public virtual ViewResult Index()
        {
            return View(repo.GetBooks());
        }

        //
        // GET: /Books/Details/5
        [GET("Books/{id:int}")]
        public virtual ActionResult Details(int id)
        {
            Book book = repo.GetBook(id);
            return View(book);
        }

        //
        // GET: /Books/Create

        public virtual ActionResult Create()
        {
            return View();
        } 

        //
        // POST: /Books/Create

        [HttpPost]
        public virtual ActionResult Create(Book book)
        {
            if (!ModelState.IsValid)
                return View(book);

            repo.Create(book);

            return RedirectToAction(MVC.Books.Index());

        }

        //
        // GET: /Books/Edit/5

        public virtual ActionResult Edit(int id)
        {
            Book book = repo.GetBook(id);
            return View(book);
        }

        //
        // POST: /Books/Edit/5

        [HttpPost]
        public virtual ActionResult Edit(int id, Book book)
        {
            if (!ModelState.IsValid)
                return View(book);

            repo.Edit(id, book);

            return RedirectToAction(MVC.Books.Details(id));
        }

        //
        // GET: /Books/Delete/5

        public virtual ActionResult Delete(int id)
        {
            Book book = repo.GetBook(id);
            return View(book);
        }

        //
        // POST: /Books/Delete/5

        [HttpPost, ActionName("Delete")]
        public virtual ActionResult DeleteConfirmed(int id)
        {
            Book book = repo.GetBook(id);
            repo.Delete(book);

            return RedirectToAction("Index");
        }

    } 
```

初始化器：

```
public class Lab2StoreInitializer
{
public void Seed(Lab2Context c)
{

    //add categories 
    var cat_Programming = new Category("Programming", "Books about writing computer code and developing software") { Id = 1 };
    var cat_Politics = new Category("Politics", "books with politically charged subjects") { Id = 2 };
    var cat_NonFiction = new Category("Non-Fiction", "Books about real life events") { Id = 3 };

    c.Categories.Add(cat_Programming);
    c.Categories.Add(cat_Politics);
    c.Categories.Add(cat_NonFiction);

    //add authors 
    var noamChomsky = new Author("Noam Chomsky") { Id = 1};
    var howardZinn = new Author("Howard Zinn") { Id = 2 };
    var scottHanselman = new Author("Scott Hanselman") { Id = 3 };
    var philHaack = new Author("Phil Haack") { Id = 4 };
    var danielleSteele = new Author("Danielle Steele") { Id = 5 };
    var johnSkeet = new Author("John Skeet") { Id = 6 };
    var johnResig = new Author("John Resig") { Id = 7 };
    var scottKlein = new Author("Scott Klein") { Id = 8 };

    c.Authors.Add(noamChomsky);
    c.Authors.Add(howardZinn);
    c.Authors.Add(scottHanselman);
    c.Authors.Add(philHaack);
    c.Authors.Add(danielleSteele);
    c.Authors.Add(johnSkeet);
    c.Authors.Add(johnResig);
    c.Authors.Add(scottKlein);

    // add books 

    c.Books.Add(new Book("Manufacturing Consent", noamChomsky, cat_Politics, 16.57, 12.00) { Id = 1 });
    c.Books.Add(new Book("The Zinn Reader", howardZinn, cat_Politics, 35.75, 30.00) { Id = 2 });
    c.Books.Add(new Book("C# In Depth", johnSkeet, cat_Programming, 29.99, 25.00) { Id = 3 });
    c.Books.Add(new Book("Professional ASP.NET MVC 2", scottHanselman, cat_Programming, 34.99, 30.00) { Id = 4 });
    c.Books.Add(new Book("Professional MVC 4", philHaack, cat_Programming, 49.99, 45.00) { Id = 5 });
    c.Books.Add(new Book("His Bright Light: The Story of Nick Traina", danielleSteele, cat_NonFiction, 19.99, 14.00) { Id = 6 });
    c.Books.Add(new Book("Secrets of the JavaScript Ninja", johnResig, cat_Programming, 34.99, 29.99) { Id = 7 });
    c.Books.Add(new Book("Professional LINQ", scottKlein, cat_Programming, 39.99, 35.00) { Id = 8 });
    c.Books.Add(new Book("jQuery in Action", johnResig, cat_Programming, 49.99, 43.00) { Id = 9 });

    HttpContext.Current.Application["State"] = c;
    //base.Seed(c);
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T01:30:07.563

```
@Html.DropDownListFor(m => m.Author.Id, new SelectList(new Lab2Repository().GetAuthors(), "Id", "Name"), "---- Select Category ----") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T01:16:54.917

`SelectList`是使用 的属性`Id`在`Author`中识别它`Book`。但是，您的`Book`模型将其定义为：

```
public Author Author { get; set; } 
```

默认模型绑定器不知道如何将`Id`与`Author`. 要解决此问题，您可以像这样声明它：

```
public int Author { get; set; } 
```

因为`Id`和`Author`现在是相同的数据类型 ( `int`)，所以它可以工作。这同样适用于`Category`：

```
public int Category { get; set; } 
```

您的替代方法是编写自己的模型绑定器并将其注册到 MVC。然后，您可以在下拉列表中仅传递一个时强制它加载整个`Author`对象。`int`请参阅此问题以获取一些建议：[ASP.Net MVC 自定义模型绑定解释](https://stackoverflow.com/questions/1193453/asp-net-mvc-custom-model-binding-explanation)

# ruby-on-rails - Rails、Devise 和多个域

> ID：14554120
> 
> 赞同：1
> 
> 时间：2013-01-28T01:04:34.723
> 
> 标签：ruby-on-rails, ruby, https, devise, cross-domain

假设我有一个应用程序将从完全不同的域访问，这些域都指向同一个服务器*：

example.com、example.net、foobar.com、...

我有一个基于设计的身份验证系统，之前运行良好。但是，现在的目标是将 HTTPS 添加到登录系统。问题是，事实证明，没有办法在同一个 IP 地址上托管多个 HTTPS 网站**。为了解决这个问题，我将登录页面设置为始终 POST 到[https://secure.example.com](https://secure.example.com)。据我所知，这工作正常。设计似乎对此毫无疑虑。但是，棘手的部分是用户现在需要重定向到 foobar.com，这也需要了解用户已登录。我在登录表单中的隐藏参数中传递了要返回的站点，并且重定向工作正常。我仍然无法通知 foobar.com 用户现在已登录。

我已经设法设置它，以便在返回到 foobar.com 后，它将用户的 secure.example.com 会话 cookie 复制到 foobar.com 的新 cookie 中。这部分工作正常。然而，在 Rails 控制台中，对 secure.example.com 和 foobar.com 的 Web 请求——每个请求都发送相同的 cookie——产生两个完全不同的会话，因此，难怪 Devise 的行为就像用户从未登录过foob​​ar.com

有谁知道为什么这不起作用 - 为什么两个相同的 Web 请求（只有请求 URI 的域不同 - 我也在 Firebug 中尝试过）会在 Rails 3 应用程序中产生两个完全不同的会话，但具有不同但一致，会话ID？更重要的是，有人知道如何进行这项工作吗？

* 出于本练习的目的，假设这是不可避免的，并且站点不能全部托管在不同的子域下，并且所需的域数量太大而无法为每个域获取单独的 IP 地址。

** 除非它们是子域并且您拥有 *.example.com 证书，但这不是重点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:25:11.820

如果您已经在使用 Devise，我建议您尝试使用[token authenticateable](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/TokenAuthenticatable)。您可以为相关用户生成令牌，使用令牌重定向他们以登录，然后在他们登录后快速使令牌过期。

您也可以尝试使用[doorkeeper](https://github.com/applicake/doorkeeper)滚动您自己的 OAuth 提供程序。

# objective-c - 声明方法参数 __autoreleasing 的优点是什么？

> ID：14554121
> 
> 赞同：7
> 
> 时间：2013-01-28T01:05:02.337
> 
> 标签：objective-c, automatic-ref-counting

根据[过渡到 ARC 发行说明](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)：

> __autoreleasing 用于表示通过引用 (id *) 传递并在返回时自动释放的参数。

例如：

`-(BOOL)performOperationWithError:(NSError * __autoreleasing *)error;`

但与以下相比，上述优势有哪些：

`-(BOOL)performOperationWithError:(NSError * __strong *)error;`

* * *

**更新：**

*有几个答案是指编译器使用*temp var 技巧来处理 var 和参数之间的不匹配作为`__autoreleasing`. 我不明白为什么编译器不能对`__strong`参数做同样的把戏。我的意思是，对于`__weak`var 和`__strong`参数，编译器可以类似地这样做：

```
NSError * __weak error;
NSError * __strong tmp = error;
BOOL OK = [myObject performOperationWithError:&tmp];
error = tmp;
if (!OK) {
    // Report the error.
} 
```

编译器知道`-(BOOL)performOperationWithError:(NSError * __strong *)error;`返回一个强引用（+1），所以它就像任何`new`-family 方法一样处理它。由于`tmp`与 位于同一范围内，因此`error`编译器可以合理地保持其活动，只要reference( ) 现在由reference( ) 支持，并且在范围结束之前不会被取消。`error``__weak``error``__strong``tmp`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T02:12:16.917

## tl;博士

在这种情况下，将对象隐式转换为`__weak`对象`__strong`会改变程序的语义，这是编译器绝不应该做的事情。

* * *

## 场景

举个例子

```
NSError *error;
BOOL success = [myObject performOperationWithError:&error];
if (!success) {
    // Report the error
} 
```

在这种情况下，`error`局部变量会被 ARC 自动推断为`__strong`.

同时，`error`论据

```
-(BOOL)performOperationWithError:(NSError * __autoreleasing *)error; 
```

是类型`NSError * __autoreleasing *`。

请注意，在任何情况下，ARC 都会将通过引用 ( `id *`) 传递的参数推断为类型`id __autoreleasing *`，因此上述签名等价于

```
-(BOOL)performOperationWithError:(NSError **)error; 
```

弧下。

因此我们有一个不匹配，因为我们将一个带`__strong`注释的变量传递给一个需要`__autoreleasing`参数的方法。

## 在引擎盖下

在我们的示例中，编译器将通过创建局部 `__autoreleasing tmp`变量来解决这种不匹配问题。

代码变成

```
NSError * __strong error;
NSError * __autoreleasing tmp = error;
BOOL success = [myObject performOperationWithError:&tmp];
error = tmp;
if (!success) {
    // Report the error.
} 
```

## 替代

现在让我们假设我们可以更改 的签名`performOperationWithError:`。

如果我们想避免使用`tmp`变量的“编译器技巧”，我们可以将我们的签名声明为

```
-(BOOL)performOperationWithError:(NSError * __strong *)error; 
```

我们有一个`__strong`变量，我们现在将它传递给一个需要`__strong`参数的方法，所以我们只是消除了不匹配。

## 看起来不错，为什么不总是声明`__strong`参数？

一个原因是，将参数声明为 as`__autoreleasing`将使该方法甚至接受`__weak`引用。

在当前示例中它没有多大意义，但在某些情况下，我们希望`__weak`通过引用传递变量并声明`__autoreleasing`（或让 ARC 推断它）将允许我们这样做。

ARC 将应用上面看到的相同技巧，创建一个`__autoreleasing tmp`变量。

## 结论

到目前为止提出的机制名为*pass-by-writeback*。

这种机制被设计为与`__autoreleasing`,`__strong`和`__weak`变量一起使用，因此程序员可以安全地依赖编译器所做的类型推断，而不必太在意变量的注释。

在某些情况下声明`id __strong *`参数可能有意义，但通常它可能会导致编译器生成意外错误。

我的建议是：“让编译器发挥他的魔力，你会好起来的”

## 更新

> 我不明白为什么编译器不能对`__strong`参数做同样的把戏。

告诉编译器以某种`__autoreleasing`方式处理 a`__strong`或`__weak`变量的管理是可以的，因为它基本上意味着：“请编译器，自动做正确的事情”。

这就是为什么上面看到的技巧可以正常工作的原因。

另一方面，如果您声明一个变量，因为`__weak`您可能有充分的理由这样做，并且您想要的最后一件事是在您明确指定时隐式保留它。这将从根本上改变您编写的代码的语义，因此编译器不会这样做（感谢上帝！）。

换句话说

`__weak` -->`__autoreleasing` **好**
`__strong`-->`__autoreleasing` **好**
`__weak` <-->`__strong` **错了！**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T12:52:12.543

正如您所说，唯一的优点是该对象在返回时自动释放。因此，如果没有 ARC，它与发送保留和自动释放是一样的。在 C 中，作为参数传递的每个变量都会被复制，因此这不会影响原始指针的处理方式，而只会影响复制的指针。

优势的一个例子可能是这样，假设参数不是 __autoreleasing：

```
-(BOOL)performOperationWithError:(NSError * __strong *)error; 
```

所以我调用传递弱引用的方法：

```
NSError* __weak error;
[object performSelectorWithError: &error]; 
```

这里会发生什么？复制的参数在返回时不会自动释放，因此当方法返回时错误为零。如果相反，方法是这个：

```
-(BOOL)performOperationWithError:(NSError * __autoreleasing *)error; 
```

在这种情况下，错误的保留计数仍然为 1，但它是自动释放的，因此它不是 nil 并且可以在池中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-05T21:23:41.010

我没有提到的另一个原因是遵循 Cocoa 约定，以便 ARC 代码可以与非 ARC 代码正确互操作。

# cordova - 如何在刷新时禁用 jquery mobile ajax

> ID：14554123
> 
> 赞同：0
> 
> 时间：2013-01-28T01:05:06.890
> 
> 标签：cordova, jquery-mobile, angularjs

我正在尝试将 jquery mobile 与本地文件链接一起使用，但它对我来说无法正常工作。从查找器打开页面时，我可以很好地加载初始页面。在地址栏中我看到完整的文件路径

```
 file://localhost/Users/me/[pathToMyApp]/www/index.html#/page1 
```

但是，当我在 chrome 中按刷新，或者只是将页面 url 复制到另一个窗口时，我得到了错误

```
 Error loading Ajax Page 
```

我缺少一个基本步骤吗？

这是我的页面：

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />

    <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.2.0.css" />

    <script type="text/javascript" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" src="jquery-1.8.3.js"></script>
    <script type="text/javascript" src="jquery.mobile-1.2.0.js"></script>
    <script language="text/javascript">
        $(document).bind("mobileinit", function () {
                         $.mobile.ajaxEnabled = false;
                         $.mobile.ajaxLinksEnabled = false;
                         });
    </script>
    <script type="text/javascript" src="angular.js"></script>
    <script type="text/javascript" src="angular-resource.js"></script>
    <script type="text/javascript" src="js/myApp.js"></script>
</head>
<body>
    <div data-role="page">
        <div ng-view></div>
        <div data-role="footer" data-id="myFooter" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#" data-ajax="false">link1</a></li>
                    <li><a href="#" data-ajax="false">link2</a></li>
                    <li><a href="#" data-ajax="false">link3</a></li>
                </ul>
            </div><!-- /navbar -->
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T01:12:00.923

您缺少的基本步骤是使用 http 服务器为您的页面提供服务。

这是 Chrome 的故意行为，它限制了对文件系统上文件的 ajax 调用。

为了能够正常有效地开发您的 jQM 应用程序，只需安装并使用其中一个 Web 服务器。任何平台都有很多。

**不建议**这样做，但您可以强制 chrome 通过使用标志启动它来允许您这样做

```
--allow-file-access-from-files --disable-web-security 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T03:46:19.810

好的，经过一番调查，问题是因为 JQuery 和 AngularJS 不能很好地协同工作。

AngularJS 使用哈希标签来为它的控制器划定路由。

jQueryMobile 试图巧妙地处理散列，这完全弄乱了 url。

在我用我的私人修复修补 jquery mobile 之后，它现在可以工作了。（如禁用哈希处理）..它现在正在工作。

# google-chrome-extension - 选项卡权限或内容脚本？

> ID：14554128
> 
> 赞同：0
> 
> 时间：2013-01-28T01:05:47.623
> 
> 标签：google-chrome-extension

我正在编写一个需要在 amazon.com 页面上显示页面操作的扩展程序。

请求“标签”权限或将内容脚本注入 amazon.com 页面会更好吗？

选项卡权限让我印象深刻，因为它使用的资源更少（因为它只是根据后台脚本中的正则表达式检查 URL），但我认为这是一个更可怕的权限消息（“访问你的选项卡和浏览活动”）？

将内容脚本注入 amazon.com 页面似乎需要更多资源，但只需要 amazon.com 的许可......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:02:20.120

这是一个通用问题，答案取决于客户对客户。您已经指出了每个的 + 和 -。

`content scripts`如果您的客户特别关注安全和隐私，我建议您使用内容脚本，在这种情况下，您正在向页面（使用和）添加额外的负载，`message passing`这可能会减慢正常的执行过程。

如果你只关心性能，我建议你去获得标签权限。它是一个原生 API，在后台页面中执行，标签上没有额外的负载。网上商店的许多扩展确实使用标签 API，我认为这不会吓到他们，因为这不是新的。

但是，这完全取决于您的目标用户部分。

# django - 如何在 Django 的 FormWizard 视图中插入登录 if 语句？

> ID：14554130
> 
> 赞同：0
> 
> 时间：2013-01-28T01:06:31.283
> 
> 标签：django, login, formwizard

我如何将“if request.user.is_authenticated”插入到下面的表单向导类中，如下例所示？这个想法是这个视图是我的主页，如果用户已经登录，我想重定向到另一个页面。

目前它给我“名称'请求'未定义”作为错误消息。我尝试了 BusinessWizard(request, SessionWizardView) 类，但不幸的是它不起作用。也许这是我的一个简单的疏忽。感谢您的帮助！

**视图.py**

```
class BusinessWizard(SessionWizardView):
      if request.user.is_authenticated:
          HttpResponseRedirect('some url')
      else:
          #some code and functions etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T01:40:43.127

最简单的方法是在 urlconf中添加~~login_required user_passes_test 装饰器：~~

```
from django.conf.urls import patterns
from django.contrib.auth.decorators import user_passes_test
from .views import BusinessWizard

urlpatterns = patterns('',
    (r'^wizard/$', user_passes_test(lambda user: user.is_anonymous(), 'some url', None)(BusinessWizard.as_view())),
) 
```

参考：
[https ://docs.djangoproject.com/en/dev/topics/class-based-views/#decorating-in-urlconf](https://docs.djangoproject.com/en/dev/topics/class-based-views/#decorating-in-urlconf)
[https://docs.djangoproject.com/en/dev/topics/auth/default/ #django.contrib.auth.decorators.user_passes_test](https://docs.djangoproject.com/en/dev/topics/auth/default/#django.contrib.auth.decorators.user_passes_test)

如果要定义自己的装饰器，可以使用以下代码段：

```
from functools import wraps
from django.conf.urls import patterns
from django.http import HttpResponseRedirect
from .views import BusinessWizard

def anonymous_required(redirect_url=None):
    """
    Decorator that redirects authenticated users to a different URL.
    """

    def decorator(view_func):
        @wraps(view_func, assigned=available_attrs(view_func))
        def _wrapped_view(request, *args, **kwargs):
            if request.user.is_anonymous():
                return view_func(request, *args, **kwargs)
            return HttpResponseRedirect(redirect_url)
        return _wrapped_view
    return decorator

urlpatterns = patterns('',
    (r'^wizard/$', anonymous_required('some url')(BusinessWizard.as_view())),
) 
```

# android - Monodroid - 加载自定义活动

> ID：14554133
> 
> 赞同：0
> 
> 时间：2013-01-28T01:06:40.903
> 
> 标签：android, android-activity, xamarin.android

我目前正在尝试使用 Mono 在 Android 下开发应用程序。我想为我的应用程序添加对插件的支持，以便可以为其带来额外的功能。

我能够在我的程序中在运行时加载简单的 .dll，但是每当我尝试创建一个实现我的接口和自定义活动的 dll 时，就会抛出 Java.Lang.NoClassDefFoundError 类型的异常。

dll代码里面有类：

```
[Activity (Label = "Vestiaire")]
public class Vestiaire : Activity, IModule
{   

    public string Name { get; set; }
    public string Version { get; set; }

    void OnClickVestiaireButton(object sender, System.EventArgs e)
    {
        ;
    }

    public void InitVestiaireModule()
    {
        Run();
    }

    public Type LaunchActivity ()
    {
        return typeof(Vestiaire);
    }

    public void Init()
    {
        Name = "Vestiaire Module";
        Version = "0.1";
    }

    public void Run()
    {

    }

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
    }
} 
```

负责异常的行：（来自程序核心）

```
LoadedPlugin.Add((IModule)(Activator.CreateInstance(Plugin))); 
```

我真正想知道的是： - 是否有可能真正实现我想要的？如果是，将在该问题上获得帮助：P

否则最好的选择是什么？全局点是能够在运行时从 dll 加载自定义菜单。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:34:55.707

我认为您的问题的关键是 Activity 需要在您的 Manifest.xml 文件中注册。

对于您主应用程序中的活动，MonoDroid 会为您执行此操作 - 但我认为这不适用于您的插件。

你可以尝试的事情是：

*   自己将 Activity 放入清单中（MonoDroid 似乎非常有能力合并这些文件）

*   如果这不起作用，那么您可以尝试使用 Fragment - 并将 Fragment 加载到主应用程序中的自定义 FragmentActivity 中。

# php - 删除“pp_link”类后如何自定义 PrettyPhoto 按钮？

> ID：14554134
> 
> 赞同：0
> 
> 时间：2013-01-28T01:06:42.427
> 
> 标签：php, javascript, jquery, escaping, prettyphoto

PrettyPhoto 曾经`<span class="pp_link">`在**jquery.prettyPhoto.js** *版本：3.1.2*

这样，我就可以将自定义内容添加到`<div class="pp_social">`弹出库的按钮区域。

*我的 HTML 是什么样的：*

```
<a href="" rel="prettyPhoto[]">
<img src="" link="&lt;div&gt;---My Custom PHP Code Here---&lt;/div&gt;></a> 
```

通过**转义的 HTML** “链接”部分 ( `link="&lt;div&gt;---My Custom PHP Code Here---&lt;/div&gt;`)，我在 Twitter 和 Facebook 按钮所在的位置**添加了 PHP和特殊函数。**

在最新的**PrettyPhoto 版本 (3.1.5)**中，我**无法再这样做了**。由于最新的 jQuery 更新，我被迫更新到这个。

 ****有谁知道我在 PP v3.1.5 中将自定义 PHP 添加到我的每个 PrettyPhoto 弹出窗口的最佳或最简单的方法？**

那里的代码会根据活动图像而变化。这就是为什么我想将 PHP 添加到 HTML，而不是编辑 .js 文件。

让我知道你们是否需要更多说明。期待您的帮助！-安德鲁**

# scala - Tuple2 的 scala 类型匹配

> ID：14554136
> 
> 赞同：1
> 
> 时间：2013-01-28T01:07:35.937
> 
> 标签：scala, types, match

我正在做一些练习，并注意到以下匹配 tuple2 的行为。这有什么特别的原因吗？

```
 def test(x: Any): Unit= x match{
  case i: Int => println("int")
  case b: Boolean => println("bool")
  case ti: (_, Int) => println("tuple2 with int")
  case tb: (_, Boolean)=> println("tuple2 with boolean")
  case _ => println("other")
  }                                                

test(false) //prints bool
test(3) ///prints int
test((1,3)) //prints tuple with int
test((1,true)) //prints tuple with int 
```

如果我交换 ti 和 tb 的情况，那么 (1,3) 用布尔值打印 tuple2。我认为这里正在进行一些类型转换，但我不清楚为什么。

有人可以给我一个快速的解释。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T01:49:00.820

类型擦除。它无法判断`Tuple`运行时内部的类型。它会编译得很好，但它应该发出警告。这就是我`:paste`在 REPL 模式下执行此操作时发生的情况：

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

def test(x: Any): Unit= x match{
  case i: Int => println("int")
  case b: Boolean => println("bool")
  case ti: (_, Int) => println("tuple2 with int")
  case tb: (_, Boolean)=> println("tuple2 with boolean")
  case _ => println("other")
  }                                                

// Exiting paste mode, now interpreting.

<console>:10: warning: non-variable type argument Int in type pattern (_, Int) is unchecked since it is eliminated by erasure
         case ti: (_, Int) => println("tuple2 with int")
                  ^
<console>:11: warning: non-variable type argument Boolean in type pattern (_, Boolean) is unchecked since it is eliminated by erasure
         case tb: (_, Boolean)=> println("tuple2 with boolean")
                  ^
<console>:11: warning: unreachable code
         case tb: (_, Boolean)=> println("tuple2 with boolean")
                                        ^
test: (x: Any)Unit 
```

注意最后一个警告，它说`(_, Boolean)`是不可访问的，因为`(_, Int)`将匹配每个`Tuple2`，由类型擦除提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T06:10:27.037

您可以试试这个，只需对您的代码进行最少的更改即可正常工作。通过解包和键入，该功能可以正常工作。

```
def test: Any => Unit = _ match{
  case i: Int => println("int")
  case b: Boolean => println("bool")
  case (x:Any, y: Boolean)=> println("tuple2 with boolean")
  case (x:Any, y: Int) => println("tuple2 with int")
  case _ => println("other")
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T04:35:00.507

```
def test(x: Any) {
x match {
  case xi: Int => println("int [" + xi + "]")
  case yb: Boolean => println("boolean [" + yb + "]")
  case (x, y @ (y1: Int)) => println("[" + x + ", int(" + y + ")]")
  case (x, y @ (y1: Boolean)) => println("[" + x + ", boolean(" + y + ")]")
  case _ => println("anything else")
} 
```

}

```
test(1);
test(true);
test("hello", 1);
test("hello", false); 
```

它似乎以这种方式工作。但是，只是 case (x, y @ Int) 不起作用，即使它符合要求。

# ruby - 缩进行（意外行为）

> ID：14554146
> 
> 赞同：0
> 
> 时间：2013-01-28T01:09:26.573
> 
> 标签：ruby, indentation

我想写一行递归缩进的代码。我只是在研究一种使用全局选项卡变量的方法。所以我使用了以下代码：

```
@@tab = '  '
@@tab_add = '  '
@@nl = "\n"

def helper
    left = @@tab 
    right = @@tab
    @@tab = @@tab + @@tab_add
    str = '<hello>' + @@nl + left + helper2 + right + @@nl + '</hello>'
end 

def helper2
    left = @@tab 
    right = @@tab
    @@tab = @@tab + @@tab_add
    str = '<goodbye>' + @@nl + left + helper3 + right + @@nl + '</goodbye>' 
end 

def helper3
    str =  'dawg'
end 
```

我知道，这不是最优雅的方式，但我只是在尝试。无论如何，当我输入

```
helper 
```

我明白了

```
<hello>
   <goodbye>
     dawg
</goodbye>
</hello> 
```

但是为什么结束的再见标签也没有缩进呢？我将它保存为“帮助”函数中的“正确”局部变量。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:12:30.980

您的 helper2 方法输出一个字符串，其中包含：

```
@@nl + '</goodbye>' 
```

换行符和结束标记之间不可能有任何缩进

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:16:34.107

你需要一个递归方法。

```
@@tab  = '  '
@@nl   = "\n"
indent = 0

def helper3
    str =  'dawg'
end

def indented(p_indent, p_string='')
    @@tab * p_indent + p_string
end

def write_indented(p_indent, p_array)
    return indented(p_indent, helper3) if p_array.empty?
    head, *tail = p_array
    indent = indented(p_indent)
    indent + '<' + head + '>' + @@nl + 
            # recursive call :
        write_indented(p_indent + 1, tail) +
        @@nl + indent + '</' + head + '>'
end

tags = %w[hello goodbye]
puts write_indented(indent, tags) 
```

执行（红宝石 1.8.6）：

```
$ ruby -w t.rb 
<hello>
  <goodbye>
    dawg
  </goodbye>
</hello> 
```

不幸的是，递归大部分时间都是用阶乘或斐波那契函数来解释的，这使得它更难理解。
如果您通过级联调用来表示递归，这实际上非常简单：

```
write_indented(0, ['hello', 'goodbye'])
    ...
    call write_indented(1, ['goodbye'])
       |
       |
       +--> ...
            call write_indented(2, [])
               |
               |
               +--> return if stop condition
                        |
               +<-------+
       +<------+ return   
       |
  <----+ returned value
end 
```

# c# - 使用正则表达式删除一段字符串（JSON 字符串）

> ID：14554147
> 
> 赞同：-2
> 
> 时间：2013-01-28T01:09:52.133
> 
> 标签：c#, regex, json

> **可能重复：**
> [在反序列化之前从我的 JSON 中删除奇怪的隐藏字符](https://stackoverflow.com/questions/14553954/remove-strange-hidden-charecters-from-my-json-before-deserialinzing)

我有一些 JSON，我需要先删除其中的一个元素，然后才能对其进行反序列化。

我有一些不良数据进入我的系统，我需要将其删除，这不是最好的解决方案，但这是紧急情况。

所以我希望从我的 JSON 中删除一个属性。

这是一个示例：

```
{
 "UDF4" : "",
 "ProductID" : 0,
 "Dimensions" : "",
 "weight" : 0,
 "Category" : "",
 "OrderID" : 0,
 "ManufacturerID" : 439,
 "CatalogCode" : "BARB",
 "ItemID" : "BARB13HIV",
 "Description" : "BARB13HIV",
 "BasePrice" : 0,
 "OrderItemID" : 0,
 "Price" : 44,
 "UDF5" : "�65",
 "UDF1" : "13HIV",
 "Qty" : 3,
 "UPC" : "BARB13HIV",
 "DiscountValue" : 0,
 "Cubes" : 0,
 "CatalogName" : "BARBARA COSGROVE LAMPS",
 "UDF2" : "",
 "ItemName" : "13\" Painted parchment ivory",
 "ModifierListID" : 0,
 "UnitOfMeasure" : "",
 "SortOrder" : 36,
 "SubTotal" : 132,
 "PhotoName" : "barb-13hiv",
 "OverrridePrice" : 0,
 "UDF3" : "",
 "AdditionalImageCount" : 0,
 "OrderGUID" : "3DFB932C-2F88-4C44-9417-251EABE1B863",
 "CompleteItemID" : "BARB13HIV",
 "PiecesBox" : 0,
 "SalesRepID" : 0,
 "Source" : "",
 "HasLineItemDiscount" : 0} 
```

我需要删除此字符串的 UDF5 部分，同时保持 JSON 不变 - UDF 的值是可变的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T01:19:04.113

假设我可以依赖您在上面显示的格式，并且它是每个正则表达式运行的格式之一，这可以像这样简单地完成

`([\S\s]*\"])\"UDF5\" : \"[\S\s]*?\",([\S\s]*)`

使用引用`$1$2`UDF5 字段之前和之后的部分的反向引用来写回。

如果有要删除的换行符，我现在不这样做。这可能会更好 - 如果其他人有时间更正或提供额外的答案。但为了让您获得紧急修复，我希望这会有所帮助。

# css - 如何在网格系统的排水沟中定位块？

> ID：14554150
> 
> 赞同：0
> 
> 时间：2013-01-28T01:10:18.753
> 
> 标签：css, twitter-bootstrap, 960.gs

我正在学习使用网格系统，例如 960.gs 或 Twitter 的 Bootstrap。

如果我想定位一个内容块（例如一个），它的左侧从两列之间的排水沟中间开始，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:09:39.963

按照设计，排水沟应该是空的。所以，如果你不能使用基本的[脚手架](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)来做你需要的事情，并且你真的希望你的内容的左侧从排水沟的中间开始，你可能需要添加一个 CSS 类，比如：

```
margin-left: -1em; 
```

当然，您可能需要将负值更改`-1em`为排水沟宽度的一半。

不漂亮，但它应该可以解决问题。

# c# - IDisposable 对象的依赖注入和生命周期

> ID：14554151
> 
> 赞同：4
> 
> 时间：2013-01-28T01:10:34.120
> 
> 标签：c#, dependency-injection, ninject, idisposable, object-lifetime

我正在尝试使用依赖注入方法（使用 Ninject）开发一个库，但由于我的设计不正确，我可能会遇到某种混乱。总之，我的设计方法是

1.  一个`parent`对象有一个`common`对象。
2.  一个`parent`对象使用一些可变数量的`child`对象。
3.  所有`child`对象都应使用`common`与其`parent`对象完全相同的对象实例

这是我的问题域的简单模型。

```
interface IParent : IDisposable {
    void Operation();
}
interface ICommon : IDisposable {
    void DoCommonThing();
}
interface IChild1 {
    void DoSomething();
}
interface IChild2 {
    void DoAnotherThing();
}
class Parent : IParent {
    private readonly ICommon _common;
    public Parent(ICommon common) {
        _common = common;
    }
    public void Dispose() {
        _common.Dispose();
    }
    public void Operation() {
        var c1 = ObjectFactory.GetInstance<IChild1>();
        c1.DoSomething();
        var c2 = ObjectFactory.GetInstance<IChild2>();
        c2.DoAnotherThing();
        // number of childs vary, do things until cn
        _common.DoCommonThing();
    }
}
class Common : ICommon {
    private bool _isDisposed;
    public void Dispose() {
        _isDisposed = true;
    }
    public void DoCommonThing() {
        if (_isDisposed) 
            throw new Exception("Common Object is Disposed");
    }
}
class Child1 : IChild1
{
    private readonly ICommon _common;
    public Child1(ICommon common) {
        _common = common;
    }
    public void DoSomething() {
        // Do Something...
        _common.DoCommonThing();
    }
}
class Child2 : IChild2 {
    private readonly ICommon _common;
    public Child2(ICommon common) {
        _common = common;
    }
    public void DoAnotherThing() {
        // Do Another Thing...
        _common.DoCommonThing();
    }
} 
```

## 问题 1

所需`child`对象的数量各不相同。例如，根据`c1.DoSomething`I 的返回值可能需要也可能不需要其他子对象。所以我不想通过构造函数注入它们，只是在需要时创建它们。但这种做法违反了好莱坞原则。

## 问题 1

在不通过构造函数注入子对象的情况下，如何防止这种违规行为？

## 问题 2

我希望`child`对象使用与其对象相同`common`的对象实例`parent`。所以`common`对象的生命周期应该和它的父对象一样。

1.  如果没有为 ICommon 定义生命周期，那么所有`child`对象都将拥有自己的`common`对象实例。

2.  如果 ICommon 的生命周期是在 Thread 或 Request 范围内定义的，那么我不能`parent`在同一 Thread 或 Request 范围内使用不同的对象实例。因为每个`parent`对象都应该使用自己的全新`common`对象并处理它。

所以我无法使用我知道的生命周期范围选项来解决它。我为第二个问题提出了另一种解决方案，但它使代码变得更糟。

首先，它不是注入`ICommon`到`parent`对象中，`parent`而是通过它自己创建的对象`ObjectFactory`

```
class Parent : IParent {
    private readonly ICommon _common;
    public Parent() {
        _common = ObjectFactory.GetInstance<ICommon>();
    }
..... 
```

然后，对象不是注入`ICommon`对象`child`，而是`parent`设置`common`子对象的对象。

```
interface IChild {
    ICommon Common { get; set; }
}
interface IChildN : IChild {
     void DoNthThing();
}
abstract class ChildBase : IChild {
    ICommon IChild.Common { get; set; }
}
class ChildN : IChildN {
     public void DoNthThing() { }
}
class Parent : IParent {
    private readonly ICommon _common;
    public void Operation() {
        var c1 = ObjectFactory.GetInstance<IChild1>();
        c1.Common = _common;
        c1.DoSomething();
        var c2 = ObjectFactory.GetInstance<IChild2>();
        c2.Common = _common;
        c2.DoAnotherThing();
        _common.DoCommonThing();
    }
} 
```

但是这个解决方案再次违反了好莱坞原则，我必须设置每个`child`对象的 Common 属性。

## 问题2

对象如何使用依赖注入`parent`将其`common`对象分发给对象？`child`（最好使用 Ninject）

## 问题 3

关于我的问题，这有点笼统：如何将依赖注入正确应用于此模型？

注意：Ninject 的`ObjectFactory.GetInstance`调用`Kernel.Get`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T06:33:31.213

您需要使用`CallScope`或`NamedScope`。这些是`Ninject.Extensions.NamedScope`包装的一部分。这允许您将公共对象的范围限定为父对象，以便所有子请求都接收相同的公共对象。

关于子对象的创建。如果您必须根据某些算法请求子对象，则需要使用工厂对其进行实例化。使用`Ninject.Extensions.Factory`包来实现这一点。这会保留获取上下文并将父上下文传递给子请求，因此允许在工厂创建的子项中重用您的公共对象。

所以最终将不需要使用你自己的对象工厂。

# ios - iOS 项目的后端

> ID：14554152
> 
> 赞同：2
> 
> 时间：2013-01-28T01:10:42.480
> 
> 标签：ios, google-app-engine, google-cloud-endpoints, client-library

由于谷歌应用引擎基础设施只支持 Java 和 Python，我是否有义务用其中一种语言编写后端类代码。如果是的话，我对 Java 感觉很舒服，那么工作流程也应该是这样的：

```
-Write classes code in Eclipse (Java code).
-Annotate API methods.
-Deploy to Google app engine.
-Generate objective-c client library.
-Connect my app to the cloud end points via the client library. 
```

我观看了关于[移动客户端后端](http://www.youtube.com/watch?v=NU_wNR_UUn4&feature=player_embedded)的 I/O 会话，其中有一部分是关于如何为 Objective-c 生成客户端库，我想知道他们是如何做到的。

我错了还是错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:35:08.833

他们是在谈论端点功能吗？

[http://endpoints-trusted-tester.appspot.com/](http://endpoints-trusted-tester.appspot.com/)

# php - 如何使用 Javascript 解析数组 Json？

> ID：14554154
> 
> 赞同：-1
> 
> 时间：2013-01-28T01:11:04.590
> 
> 标签：php, javascript, jquery, ajax, json

> **可能重复：**
> [我有一个嵌套的数据结构/JSON，我怎样才能访问一个特定的值？](https://stackoverflow.com/questions/11922383/i-have-a-nested-data-structure-json-how-can-i-access-a-specific-value)

我通过 ajax 接收数据

```
<?
 $locations[] = array(
'Name'=>$name,
'Latitude'=>$lat,
'Longitude'=>$long};
print_r(json_encode($locations));
?> 
```

在这里我有错误，因为当我尝试使用 alert(data) 时它没有显示任何内容并且它可以工作并显示下面的数组 json

```
success:function(data) {
  var dat =$.parseJSON(data);
   $("#pru").html(dat.Name); //here it doesn't show anything if I put alert(data) it show me all the array json
} 
```

数组json内容，下一个数组：

```
[{"Name":"Jayme jayden","Latitude":"36.712005","Longitude":"-4.43825"},
{"Name":"Jhonny","Latitude":"36.728744","Longitude":"-4.443822"},
{"Name":"Jessica Lynn","Latitude":"36.7418","Longitude":"-4.4333 "}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T01:13:09.863

你不应该`print_r`用来发送 JSON。做一个常规的`echo`：

```
$locations = array(
    'Name' => $name,
    'Latitude' => $lat,
    'Longitude' => $long
);

echo json_encode($locations); 
```

您的代码中也有语法错误（数组的右大括号），我认为您无意中创建了一个多维数组。使用上面的代码，它*应该可以*工作。

# django - 什么会导致视图中的 django 运行时错误？

> ID：14554157
> 
> 赞同：0
> 
> 时间：2013-01-28T01:11:22.313
> 
> 标签：django, django-views

什么会导致视图中的 django 运行时错误？

（抱歉，这不是一个好问题。我有点不知道如何解决这个问题，甚至不知道如何提出问题。）

当我访问我的视图时，我得到了 RuntimeError。

```
RuntimeError at /
maximum recursion depth exceeded
Request Method: GET
Request URL:    http://127.0.0.1:8000/
Django Version: 1.4.3
Exception Type: RuntimeError
Exception Value:    
maximum recursion depth exceeded
Exception Location: /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/template/base.py in compile_string, line 151
Python Executable:  /Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python

  145\.             t = get_template(template_path)
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/template/loader.py" in get_template
  145\.     template, origin = find_template(template_name)
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/template/loader.py" in find_template
  134\.             source, display_name = loader(name, dirs)
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/template/loader.py" in __call__
  42\.         return self.load_template(template_name, template_dirs)
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/template/loader.py" in load_template
  48\.             template = get_template_from_string(source, origin, template_name)
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/template/loader.py" in get_template_from_string
  156\.     return Template(source, origin, name)
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/template/base.py" in __init__
  125\.         self.nodelist = compile_string(template_string, origin)
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/template/base.py" in compile_string
  151\.     lexer = lexer_class(template_string, origin)

Exception Type: RuntimeError at /
Exception Value: maximum recursion depth exceeded 
```

# objective-c-blocks - C++ 对象可以有块作用域吗？

> ID：14554161
> 
> 赞同：0
> 
> 时间：2013-01-28T01:11:45.947
> 
> 标签：objective-c-blocks, objective-c++

C++ 对象可以有块作用域吗？例如，这样可以吗：（它崩溃了）

*（放轻松，我还在学习 C++）*

```
__block Poco::Thread* lastThread;

dispatch_async(dispatch_get_main_queue(), ^
{
    for (int i = 1; i <= 5; i++)
    {
        Poco::Runnable* worker = new  Worker(_counter, "worker" + Poco::NumberFormatter().format(i));
        Poco::Thread* workerThread = new Poco::Thread();
        workerThread->start(*worker);
        lastThread = workerThread;
    }
});

lastThread->join(); //wait so we can watch what happens. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T01:18:03.433

您的代码是有效的，声明该指针`__block`范围没有错。但是您的代码会崩溃，因为调用`lastThread`时不指向任何对象`join()`。您异步运行该块，因此几乎可以肯定`lastThread->join()`到达之前`lastThread`将指向工作线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T01:22:12.313

是的，指针可以具有块范围。`lastThread->join()`它崩溃的原因是指针初始化之间存在竞争。

# azure - Git 推送后 Azure 构建失败

> ID：14554162
> 
> 赞同：2
> 
> 时间：2013-01-28T01:11:50.943
> 
> 标签：azure, msbuild, web-deployment

我在 azure 中有一个网站设置，它被配置为在我将代码提交到 Git 后进行部署。同步部分工作正常，因为 Azure 能够自动检测推送到 Git 并开始构建。

但是，构建失败并显示以下错误消息：

> EastVisionSystems.Util -> C:\DWASFiles\Sites\TheCastOd\VirtualDirectory0\site\repository\Platform\project\EastVisionSystems.Util\bin\Release\EastVisionSystems.Util.dll
> 
> SGEN：错误：尝试加载格式不正确的程序集：D:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\mscorlib.dll。[C:\DWASFiles\Sites\TheCastOd\VirtualDirectory0\site\repository\Platform\project\PaypalPaymentModule\PaypalPaymentModule.csproj]

不用说，解决方案在本地机器上构建得很好。我什至可以从 Visual Studio 部署到 Azure，并且站点运行正常。

我正在使用 VS 2010 Ultimate 并针对 .NET 4.0。为“任何 CPU”设置了配置管理器。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:04:15.633

这是每个 Microsoft 的已知问题。应在 4-6 周内修复。 [在 MSDN 上发布了相同的问题](http://social.msdn.microsoft.com/Forums/en-US/azuregit/thread/23f2177e-5071-4d75-8646-0f624dfd9bc7)

# php - 将 PHP 配置为与 SQL Server 和 IIS 一起使用

> ID：14554171
> 
> 赞同：0
> 
> 时间：2013-01-28T01:12:55.667
> 
> 标签：php, sql-server, iis

我正在尝试将 PHP 配置为与 SQL Server 和 IIS 一起使用。

我已成功连接 PHP（5.3 版）以使用 IIS。它工作非常顺利。

[我从这个链接（ http://php.iis.net/](http://php.iis.net/)）下载了 PHP

但不幸的是，我无法将 PHP 与 SQL 服务器一起使用。我确实在 ext 文件夹中检查了 php_pdo_sqlsrv.dll 和 php_sqlsrv.dll 文件，它们存在。

它们也被指定为 php.ini 文件中的扩展名。

我真的很困惑可能是什么问题，以确保我可以使用它们。

下面的 PHP 代码返回 false

```
<?php
  if (function_exists('mssql_connect')) {
  echo "True.<br />\n";
 } else {
  echo "False.<br />\n";
 } 
```

?>

phpinfo() 上的配置命令显示“无 mssql”。我不确定它是什么。??

```
cscript /nologo configure.js "--enable-snapshot-build" "--enable-debug-pack" "--disable-zts" 
"--disable-isapi" "--disable-nsapi" "--without-mssql" "--without-pdo-mssql" "--without-pi3web" "-
-with-pdo-oci=C:\php-sdk\oracle\instantclient10\sdk,shared" "--with-oci8=C:\php-  
sdk\oracle\instantclient10\sdk,shared" "--with-oci8-11g=C:\php-sdk\oracle\instantclient11
\sdk,shared" "--with-enchant=shared" "--enable-object-out-dir=../obj/" "--enable-com-
dotnet=shared" "--with-mcrypt=static" "--disable-static-analyze" 
```

任何输入都会有所帮助。！！！

谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T02:52:20.950

这可能会有所帮助；

[http://www.microsoft.com/en-us/download/details.aspx?id=20098](http://www.microsoft.com/en-us/download/details.aspx?id=20098)

你安装这个了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T06:09:44.367

我也遇到了用于 mssql 2008 的 php 5.5 驱动程序的问题。我设法通过使用 vc9 降低 php 版本来解决它。现在我有 PHP 版本 5.3.27 和 mssql 版本 2 的驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-02T22:41:02.020

关于配置的问题--without-mssql，这里有一条评论：[http](http://php.net/manual/en/intro.mssql.php) ://php.net/manual/en/intro.mssql.php MSSQL 自 PHP 5.3 起已停止使用并使用扩展 SQLSRV，可通过@Taicho 提供的链接从微软获得。

# loops - Prolog - 为什么将“文件结尾”写入输出文本文件？

> ID：14554176
> 
> 赞同：2
> 
> 时间：2013-01-28T01:13:36.533
> 
> 标签：loops, input, prolog, iteration, output

我正在做一个编程任务，我想知道是否有人可以帮助我解决这个问题。这个任务说要在 Prolog 中编写一个程序，该程序从输入文本文件中获取文本并将其写入输出文本文件。为了获取文本文件的位置，需要提示用户写入文本文件的路径。

我已经想出了如何做到这一点，但我有一个小问题真的很烦人。这是我的代码：

```
main:-
    %Ask the user for the input text file and then open the file
    write('Please enter the filename you would like to read from:'),
    nl,
    read(X),
    open(X,read,In),

    %Ask the user for the output text file and then open the file
    write('Please enter the filename you would to write to:'),
    nl,
    read(Y),
    open(Y,write,Out),

    %Read in characters from the input text file and then put them
    %on the output text file.
    tell(Out),
    repeat,
    get_char(In,T),
    write(T),
    T == end_of_file, !,
    close(In),
    told,
    close(Out). 
```

假设要读取的文本文件说“这是一个测试”。我的问题是，如果我使用程序保存此文本并将其写入另一个文本文件，它将改为写“这是一个 testend_of_file”。

我意识到发生这种情况是因为循环没有在正确的时间终止，但我不确定如何修复循环，因此“end_of_file”也不会被意外写入文本文件。任何帮助将非常感激。我觉得我什么都试过了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T01:25:41.233

你首先做`write(T)`，然后你的测试`T == end_of_file`，所以没有意外 end_of_file 将被写入。

尝试`( T == end_of_file -> ! ; write(T), fail ),`

顺便说一句，您使用的是什么 Prolog 系统？

# python - Python反转嵌套字典

> ID：14554178
> 
> 赞同：3
> 
> 时间：2013-01-28T01:14:09.427
> 
> 标签：python, nested, reverse, dictionary

例如，我想使用嵌套字典并反转值

```
input = { "a" : { "x": 2, "y": 3 },
          "b" : { "x": 5, "z": 7 } }
output = {'y': {'a': 3},
          'x': {'a': 2, 'b': 5},
          'z': {'b': 7} } 
```

我有的：

```
def reverse_nest_dicts(nested_dict):
    reverse_nest_dict = {}
    for k, v in nested_dict:
        for k2, v2 in nested_dict.values():
            reverse_nest_dict[k2][k] = v2
    return reverse_nest_dict 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T01:17:27.557

```
for k2, v2 in nested_dict.values(): 
```

应该

```
for k2, v2 in v.items(): 
```

（另请注意，如果您使用的是 Python 2.x，则使用它可能更有效，`.iteritems()`而不是`.items()`.）

* * *

您还需要确保子字典已初始化 - 您可以使用`defaultdict`...

```
from collections import defaultdict
reverse_nest_dict = defaultdict(dict) 
```

...或通过使用`setdefault`：

```
reverse_nest_dict.setdefault(k2, {})[k] = v2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T01:27:07.053

您的函数有三个不同的错误。以下是您所追求的：

```
def reverse_nest_dicts(nested_dict):
    reverse_nest_dict = {}
    for k, v in nested_dict.iteritems():
        for k2, v2 in v.iteritems():
            try:
                reverse_nest_dict[k2][k] = v2
            except KeyError:
                reverse_nest_dict[k2] = { k : v2 }
    return reverse_nest_dict 
```

错误是：

*   第一个 for 循环：使用字典作为循环序列只会产生键，你想要 (key,value) 所以需要使用 items() 或 iteritems()

*   第二个for循环：循环序列应该是嵌套字典，而不是外部字典

*   在尝试访问它们之前，您需要将 reverse_nest_dict 值初始化为内部字典。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T02:09:02.073

[字典*items()*](http://docs.python.org/2.7/library/stdtypes.html#dict)*和[setdefault](http://docs.python.org/2.7/library/stdtypes.html#dict) [*()*](http://docs.python.org/2.7/library/stdtypes.html#dict)[方法](http://docs.python.org/2.7/library/stdtypes.html#dict)可以轻松解决此类问题：*

 *```
>>> input = { "a" : { "x": 2, "y": 3 },
              "b" : { "x": 5, "z": 7 } }
>>> result = {}
>>> for k1, subdict in input.items():
        for k2, v in subdict.items():
            result.setdefault(k2, {})[k1] = v

>>> result
{'y': {'a': 3}, 'x': {'a': 2, 'b': 5}, 'z': {'b': 7}} 
```

*在 Python 2 中，您可以通过使用iteritems()*而不是*items()*来获得较小的速度提升。

同样，使用*collections.defaultdict(dict)*可能比使用*setdefault*快一点。当然，这将返回一个 defaultdict 而不是您问题中指定的 dict。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-07T06:10:47.317

如果字典太大，检查[https://stackoverflow.com/a/47151034/676214](https://stackoverflow.com/a/47151034/676214)

> 如果您只想访问反向嵌套字典，如果字典太大而无法反转，请节省内存。

```
class mdict2(dict):
    def __init__(self, parent, key1):
        self.parent = parent
        self.key1 = key1

    def __getitem__(self, key2):
        return self.parent.mirror[key2][self.key1]

class mdict(dict):
    def __init__(self, mirror):
        self.mirror = mirror

    def __getitem__(self, key):
        return mdict2(self, key)

d0 = {
 'Bob' : {'item1':3, 'item2':8, 'item3':6},
 'Jim' : {'item1':6, 'item4':7},
 'Amy' : {'item1':6,'item2':5,'item3':9,'item4':2}
}
d1 = mdict(d0)

d0['Amy']['item1'] == d1['item1']['Amy']
# True 
```*

# c++ - 如何使用 const 成员构造动态数量的类？

> ID：14554180
> 
> 赞同：0
> 
> 时间：2013-01-28T01:15:02.033
> 
> 标签：c++, class, constructor, constants, declaration

因此，在处理[完最后一个问题](https://stackoverflow.com/questions/14544442/how-to-iteratively-add-unknown-number-of-nodes-to-an-intrusive-list)之后，我将其归结为：

我需要将未知数量的用户定义类 ( `object_c`) 添加到[`boost::intrusive::list`](http://www.boost.org/doc/libs/1_41_0/doc/html/boost/intrusive/list.html). 这些类中有`const`成员。我需要做的`list`就是构建它们，然后让它们持续存在，它们会自动添加自己。

有问题的代码基本上是

```
for (unsigned i = 0; i < json_objects.count(); ++i) {

    ctor_data = read(json_objects[i]);

    // construct object here

} 
```

## 我试过的：

1.  **`malloc`生成一个对象数组，然后将它们填充：**不起作用，因为我有`const`成员。

    ```
    static object_c *json_input = (object_c*) malloc(json_objects.size() * sizeof(object_c));

    ...

    json_input[i](ctor_data); //error: no match for call to (object_c) (ctor_data&) 
    ```

2.  **制作指针：**这不起作用，函数无法正常工作，并且不会被破坏

    ```
    new object_c(ctor_data); 
    ```

3.  **将对象推回`std::vector`：**这不起作用，当我尝试时会增加数十行的咆哮[（在此处输出）](http://pastebin.com/qGkC0Zcp)

    ```
    vector_of_objects.push_back(object_c(ctor_data)); 
    ```

4.  **只是宣布该死的事情：**显然不起作用，立即超出范围（dur）

    ```
    object_c(ctor_data); 
    ```

我确信有一种简单的方法可以做到这一点。有人有想法么？我周末大部分时间都在处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T01:26:14.313

`#3`应该是您需要使用的方法。您需要详细说明您的错误是什么。

如果它就像`operator=`您在上一个问题中显示的那样，并且您不想定义一个，那么`emplace_back`只要您在`C++11`. 当然我在说`std::vector`，我需要检查什么是等效的，如果有的话`boost::intrusive`。编辑：我可能错了，但它似乎还不支持移动语义..

或者`#2`与智能指针一起使用。

如果您要使用`#1`，则需要`placement new`按照@rasmus 的指示使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T01:41:47.910

[在文档使用部分](http://www.boost.org/doc/libs/1_41_0/doc/html/intrusive/usage.html)的末尾，它告诉您

> “存储对象的生命周期不受容器绑定或管理”

所以你需要以某种方式管理对象的生命周期。

一种方法是将它们放在 中`std::vector`，如文档的最后一个示例中所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T03:17:30.923

抱歉回复晚了，考试学习等等。

基本上，它比我想象的要简单。另外，对于这个答案，我将我的类称为`entity_c`，因此对象`entity_c`实际上是有意义的。

我在我的 OP 中所做的是，当我`push_back`'时`entity_c`，它会自动将自身添加到**global** `intrusive::list`中，并且不知何故使它不起作用。在我不再懒惰之后，我编写了一个[最小的可编译程序](https://gist.github.com/4661401)并玩弄了它。我发现制作一个`std::vector`来存储构造`entity_c`的 s 是有效的（即使在添加它们时它会解构它们？我不知道那是什么）。然后我所要做的就是用这些对象填充一个**本地，然后将** *本地*列表`intrusive::list`克隆到*全局*列表中。

 **感谢所有的帮助，我会调整该程序以尝试适应不同的东西，就像`placement new`@rasmus 建议的那样（谢谢你，以前没见过）。还要感谢@karathik 展示了我的`emplace_new`，我想我可能需要去了解所有这些已添加的新 C++11 功能，有很多很酷的功能。我什至学会了如何制作自己的复制构造函数。
真实而有启发性的教育经验。**

# vb.net - 全屏运行，没有开始菜单

> ID：14554186
> 
> 赞同：3
> 
> 时间：2013-01-28T01:15:53.643
> 
> 标签：vb.net, visual-studio-2010, fullscreen

> **可能的重复：**
> [使 Winforms 全屏](https://stackoverflow.com/questions/4649877/making-winforms-fullscreen)

我正在制作一个我想全屏运行的 VB 表单，就像覆盖开始菜单和任务栏一样。现在我正在使用

```
 Me.Size = SystemInformation.PrimaryMonitorSize
    Me.WindowState = 2
    Me.Location = New Point(0, 0)
    Me.TopMost = True
    Me.FormBorderStyle = 0 
```

但开始菜单仍然显示。我假设这是因为窗口只是最大化而不是真正处于“全屏”状态

有什么办法可以覆盖vb中的开始菜单以使程序全屏运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T01:32:12.600

这里似乎有一些副作用。如果您只是重新排序行，它应该可以正常工作。事实上，将 WindowState 设置为最大化或启用“始终在顶部”似乎并不明确需要达到此效果。

```
Me.FormBorderStyle = Windows.Forms.FormBorderStyle.None
Me.Location = New Point(0, 0)
Me.Size = SystemInformation.PrimaryMonitorSize
'Me.WindowState = 2
'Me.TopMost = True 
```

# c# - 返回 System.Object

> ID：14554188
> 
> 赞同：0
> 
> 时间：2013-01-28T01:16:12.080
> 
> 标签：c#, winforms, checkedlistbox

我将 a 传递`List<object>`给填充 a 的方法`checkedListBox`。我的理解是`Object.ToString()`将对象与`checkedListBox`项目相关联并显示可读字符串。Object.Name 完成此操作，但随后数据未与项目关联。如何访问项目的`ValueMember`属性`checkListBox`？

```
public void CategoryListBox(List<Category> categoryList)
{
    checkedListBox1.Items.Clear();

    foreach (Category category in categoryList)
    {     
        checkedListBox1.Items.Add(category);
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T01:47:02.567

# 价值会员`CheckBoxList`

根据*codingbiz先生*`checkListBox`的回答，我对这个关于Property的控件做了一些快速研究`ValueMember`，所以很明显，从Intellisense我们无法导航这个`.DisplayMember` 和`.ValueMember`for `checkListBox`，所以我发现这个Property已经包含在其中`checkListBox`但没有显示在其中。[更多细节](http://social.msdn.microsoft.com/forums/en-US/vsto/thread/5ebd210e-4bb0-4ddd-a717-552d0ad38a3d/)

# 列出所有名称

通过使用 Linq，我们可以实现这一点。

```
 public class Category
  {
    public int Id { get; set; }
    public string CategoryName { get; set; }
  }

  List<Category> category = new List<Category>();
  category.Add(new Category { Id = 1, CategoryName = "test"  });
  category.Add(new Category { Id = 2, CategoryName = "let" });
  category.Add(new Category { Id = 3, CategoryName = "go" });
  checkedListBox1.DataSource = category;
  checkedListBox1.DisplayMember = "CategoryName";
  //checkedListBox1.ValueMember = "Id"; 
  //checkedListBox1.Items.AddRange(category.Select(c => c.CategoryName).ToArray()); 
```

我希望你能从这个答案中得到一些想法。

# jquery - ASP.Net 中的两个 JQuery API

> ID：14554189
> 
> 赞同：0
> 
> 时间：2013-01-28T01:16:23.440
> 
> 标签：jquery, asp.net

我在 ASP.Net 中有两个 JQuery API，

[这是用于消息框](http://akquinet.github.com/jquery-toastmessage-plugin/)

[这是进度条](http://docs.jquery.com/UI/API/1.8/Progressbar#option-value)

我应该怎么做才能避免他们两个之间的冲突？因为如果我声明了API 的**来源**，那么进度条就会起作用，那么消息框将不起作用。

这是**消息框的来源**

```
 <script src="<%# Page.ResolveUrl("~/Style/javascript/jquery-1.7.1.js")%>" type="text/javascript"></script>
 <script src="<%# Page.ResolveUrl("~/Style/javascript/jquery.toastmessage.js")%>" type="text/javascript"></script> 
```

这是**进度条的来源**

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js" type="text/javascript"></script> 
```

# lua - 字符串中字符的最后索引

> ID：14554193
> 
> 赞同：18
> 
> 时间：2013-01-28T01:17:04.167
> 
> 标签：lua

如何在 Lua 中获取字符串中字符的最后一个索引？

```
"/some/path/to/some/file.txt" 
```

如何获取`/`上述字符串中最后一个的索引？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-28T01:23:49.880

```
index = string.find(your_string, "/[^/]*$") 
```

（基本上，找到模式“一个正斜杠，然后是零个或多个不是正斜杠的东西，然后是字符串的结尾”出现的位置。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-29T01:00:25.923

这种方法更快一点（它从字符串的末尾开始搜索）：

```
index = your_string:match'^.*()/' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-23T18:41:06.007

循环？！？为什么你需要一个循环呢？请注意，有一个“反向”本机字符串函数，只需应用它然后获取第一个实例 :) 遵循示例，从完整路径获取扩展名：

```
function fileExtension(path)
    local lastdotpos = (path:reverse()):find("%.")
    return (path:sub(1 - lastdotpos))
end 
```

当然，您可以在一行中完成，为了便于阅读，我将其分成两部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-05T11:34:19.773

这是一个完整的解决方案。

```
local function basename(path)
  return path:sub(path:find("/[^/]*$") + 1)
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-19T07:16:26.070

```
local s = "/aa/bb/cc/dd/ee.txt"
local sep = "/"

local lastIndex = nil
local p = string.find(s, sep, 1)
lastIndex = p
while p do
    p = string.find(s, sep, p + 1)
    if p then
        lastIndex = p
    end
end
print(lastIndex) 
```

您可以继续查找下一个值，直到找到零，记录最后一个位置

# c# - IDisposable 到底需要什么？

> ID：14554200
> 
> 赞同：1
> 
> 时间：2013-01-28T01:18:37.940
> 
> 标签：c#, memory, idisposable, base-class

> **可能重复：**
> [正确使用 IDisposable 接口](https://stackoverflow.com/questions/538060/proper-use-of-the-idisposable-interface)

我试图从书籍、互联网和 stackoverflow 上找到我的问题的实际答案，但到目前为止没有任何帮助我，所以希望我能准确地表达我的问题以使其有意义。

一般来说，我总是发现如何释放内存的基本用法相同，大约是。如下，我确实理解代码本身：

```
public class MyClass : IDisposable
{
    bool disposed = false;
    public void Dispose()
    {
        if (!disposed)
        {
        Dispose(true);
        GC.SuppressFinalize(this);
        disposed = true;
        }
    }

    protected virtual void Dispose(bool disposing)
    {
        if (disposing)
        {
        //free managed ressources
        }
    // free other ressources
    }

    ~MyClass()
    {
        Dispose(false);
    }
} 
```

方法的工作方式完全有意义。但现在我的问题是：为什么我们需要基类 IDisposable？在此代码示例中，我们定义了一个名为`Dispose()`. 正如我在各处读到的那样，该方法是 IDisposable 的一部分，但是我们刚刚在其中定义了该方法`MyClass`，如果我们不实现基类 IDisposable，此代码仍然可以工作，还是我对这个假设有误？

我对 C# 并不完全陌生，但我还有很多东西要学，所以希望有人能在这里带领我朝着正确的方向前进。我检查了另一个具有相同问题的帖子，但找不到它，所以如果它确实存在并且它确实回答了我的问题，请带我去那里，我将删除这个帖子。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T01:26:35.287

你是对的，作为你的析构函数`~MyClass`调用`Dispose`，似乎不需要 interface `IDisposable`。

但`Dispose`不仅仅由析构函数调用。当您想要处置非托管资源时，您可以在代码中自己调用它。它是必需的，因为您不知道何时调用析构函数（这取决于垃圾收集器）。

最后，`IDisposable.Dispose`在您使用`using`.

```
using(MyDisposableClass myObject = new MyDisposableClass())
{
    // My Code
} 
```

相当于：

```
MyDisposableClass myObject = new MyDisposableClass();
try
{
    // My Code
}
finally
{
    myObject.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T01:24:56.557

IDisposable.Dispose 的实际实现调用 Dispose(bool) 的基类实现。从这个类继承的任何人现在都需要处理以下任务：

```
public override Dispose(bool disposing)
{
    base.Dispose(disposing);
    //my disposal code
} 
```

使用这种公认的模式允许继承者扩展处置代码，而不会破坏基类的处置。

通常，如果您没有可处置的非托管资源**并且**有能力密封您的课程，您可以使用以下代码简化问题：

```
public sealed class SomeDisposable:IDisposable
{
    public void Dispose()
    {
       //just go ahead and clean up
       //because we're sealed, no-one can ever break
       //this code via inheritance
    }
    //~SomeDisposable()
    //{
    //   if this is being called then it will be called
    //   on all referenced and unrooted IDisposables too
    //   If everything is managed, that means we've got nothing
    //   left to clean up, so we can omit this Finalizer 
    //}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T01:50:42.360

实施 IDispose 为您提供了一个地方来释放您“持有”的资源，例如流、句柄或数据库连接。

从垃圾收集器调用 Dispose()，基本上是询问对象：“如果有什么你不再需要，但我想不通；现在释放它；清理！”

在某种意义上类似于 C++ 中的析构函数

不同之处在于 C++ 析构函数会立即被调用，而 Dispose() 会及时被调用。

在大多数情况下，您不需要实现它。GC 足够聪明，可以在 90% 的情况下找出如何释放已用资源。

但是例如：释放流使用的内存不会自动关闭流，释放数据库连接也不会关闭它。

实现 Dispose 允许您在释放对象时关闭文件：

```
internal class Something : IDisposable {
private Stream stream;

public void SomeMethod() {
    stream.Write("nskdns");
}

public void Dispose() {
    if (stream != null) {
        stream.Close();
    }
} 
```

此外：实现 IDispose 使您有机会在 using 语句中使用该类：

```
public void Example() {
    using (var x = new Something())
    {
        x.SomeMethod();
    }
} 
```

确保 x 在被 GC 释放时总是会关闭已使用的流。

但是，我更喜欢类上的专用 Close() 方法，以允许显式关闭流，而不是依赖 GC 并调用 Dispose()

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T01:24:05.637

它与`using`C# 编译器的块一起使用。

# g-wan - 用于 G-WAN 的 SIG 11，没有太多调试信息

> ID：14554201
> 
> 赞同：0
> 
> 时间：2013-01-28T01:18:59.570
> 
> 标签：g-wan

gwan (4.1.18) 实例运行了大约一天，然后由于这个跟踪信息而崩溃（不知道它有多大用处：（如何获得有意义的跟踪信息？）

```
----------------
----------------
Sun, 27 Jan 2013 20:07:34 GMT: warning: no loadable sections found in added symbol-file /home/gwan/gwan
0x00007f0018206148 in ?? ()
  Id   Target Id         Frame 
* 1    process 2860 "gwan" 0x00007f0018206148 in ?? ()

Thread 1 (process 2860):
#0  0x00007f0018206148 in ?? ()
#1  0x0000000000000004 in ?? ()
#2  0x00007f0018941245 in ?? ()
#3  0x00007f0018206070 in ?? ()
#4  0x00007f000b70ece8 in ?? ()
#5  0x000000000000002e in ?? ()
#6  0x0000000000000000 in ?? ()

Signal        : 11:Address not mapped to object
Signal src    : 1:.
errno         : 0
Thread        : 1
Code   Pointer: 0000004343c0 (module:gwan, function:??, line:0)
Access Address: 0001004647f0

Registers     : EAX=7f000ca04d40 CS=00000033 EIP=0000004343c0 EFLGS=000000010282
                EBX=7f000ca08eb0 SS=00000000 ESP=7f000ca04af0 EBP=00000001aeb0
                ECX=0000ffffffb0 DS=00000000 ESI=7f000ca04cf0 FS=00000033
                EDX=0000000000b0 ES=00000000 EDI=7f000ca04d9c CS=00000033

Module         :Function        :Line # PgrmCntr(EIP)  RetAddress  FramePtr(EBP)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:31:29.370

> 如何获取有意义的追踪信息？

留下相关的每线程崩溃信息肯定会帮助您获得一些见解。

但是由于您手动将其删除，我假设您知道自己在做什么。

请注意，在下面运行 gwan`/home/gwan/gwan -d`不是一个好主意。

而是使用类似的东西，`/opt/gwan/gwan -d`因为`/home`其他帐户无法访问的内容。

而且，如果您在没有父天使进程（-d 模式）的情况下运行，那么这不是一个好主意。

这不是 G-WAN 特定的：

“[你永远不应该在生产环境中使用‘master_process off’运行 Nginx](http://nginx.org/en/docs/faq/daemon_master_process_off.html) ”

# javascript - angular js - 选择“理解表达式”中的条件

> ID：14554203
> 
> 赞同：1
> 
> 时间：2013-01-28T01:19:39.910
> 
> 标签：javascript, angularjs

我有一个角度应用程序，它通过两个选择元素将一组对象映射到另一组对象。
进行映射时，映射对象的“映射”属性设置为 true。

```
<select ng-model='sourceToMap' required='true' ng-options='code.code for code in sourceCodes'>
<select ng-model='targetToMap' required='true' ng-options='code.code for code in targetCodes'></select> 
```

我希望我的选择显示 sourceCodes/targetCodes 中映射属性为 false 的所有项目。就像是...

```
ng-options="code.code for code in sourceCodes where code.mapped = false" 
```

如果可能的话，我想避免出现看起来很恶心的 mappedItems / unmappedItems 集合

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T01:36:37.823

使用过滤器，如下所示：

```
ng-options="code.code for code in sourceCodes | filter:{mapped: false}" 
```

**jsFiddle**：http: [//jsfiddle.net/bmleite/T97DN/](http://jsfiddle.net/bmleite/T97DN/)

# c# - 使用 C# 连接到网站的 SOAP API

> ID：14554207
> 
> 赞同：2
> 
> 时间：2013-01-28T01:21:14.873
> 
> 标签：c#, api, soap

我正在尝试连接到具有基于肥皂的 API 的提供商网站。我是 C# 的新手，所以我不确定该怎么做。我一直在疯狂地搜索，但我得到的只是错误。这是我所做的。

我已将 URL（例如：[http](http://www.companysite.com/api/api.cfc?wsdl) ://www.companysite.com/api/api.cfc?wsdl ）作为 Web 服务添加到我的 .net 解决方案中，并为其提供了 CompanyAPI 的命名空间。

如果我右键单击解决方案资源管理器窗口中的服务引用，然后转到对象资源管理器。我可以看到所有可用的方法。

当我尝试实例化它时，我会遇到无法实例化抽象类实例之类的错误。

```
'CompanyApi.Api MBApi = new MyApp.CompanyApi.Api();' 
```

我不知道我做错了什么。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T01:59:36.460

在 Visual Studio 中添加服务引用时，它会创建一个接口来表示服务合同和一个实现该接口的客户端类。您可能正在尝试直接创建接口的实例，这是不允许的；您应该创建一个客户端实例。客户端应命名为`ApiClient`，在这种情况下，您可以执行以下操作：

```
CompanyApi.ApiClient MBApi = new MyApp.CompanyApi.ApiClient(); 
```

# c - 当前时间的时间戳

> ID：14554209
> 
> 赞同：-1
> 
> 时间：2013-01-28T01:21:45.340
> 
> 标签：c

对于我正在构建的应用程序，我需要当前时间的时间戳。如何在 C 中获取当前时间的时间戳？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:25:07.053

[您可以在此](http://www.cplusplus.com/reference/ctime/localtime/)链接中找到您的答案。

```
#include <stdio.h>
#include <time.h>

int main ()
{
  time_t rawtime;
  struct tm * timeinfo;

  time ( &rawtime );
  timeinfo = localtime ( &rawtime );
  printf ( "Current local time and date: %s", asctime (timeinfo) );

  return 0;
} 
```

简化版获取系统时间，而不是本地时间。

```
time_t now = time(0); 
```

# python - python JSON解析：我可以部分加载以加快速度吗？

> ID：14554214
> 
> 赞同：1
> 
> 时间：2013-01-28T01:22:49.833
> 
> 标签：python, json, partial

我正在使用 Python 处理大型文本文件。文件的每一行都是一个完整的 JSON 消息，并且可能很长。我需要将有关每一行的信息插入到数据库中。此信息非常简单：行的长度加上每条消息包含的唯一 ID。所以每一行都有形式

```
{"field1":"val1", ..., "ID":"12345", ..., "fieldK":"valK"} 
```

我需要从消息中提取“12345”。

现在我加载整个字符串，`json.loads()`然后找到 ID 并忽略其余部分。

我的代码太慢了，我需要加快速度。我想看看是否有一种方法可以比加载整个字符串更快地提取“ID”。一种选择是在字符串中搜索“ID”，然后处理`:"12345"`. 但是如果碰巧在消息的其他地方有一个子字符串“ID”，它可能会很脆弱。

那么有没有办法以某种方式部分加载行来查找 ID，这与加载整行一样健壮，但也比加载整行更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T01:31:03.580

我会推荐几个路径：

如果您的输入非常大，则可能将其全部加载到内存中是浪费的。单独加载/解析每一行可能会更快。

如果上述方法没有帮助，那么设计一些方法来在文件中搜索正确的 ID 并不是一个坏主意。当您真正找到正确的数字时，只需验证输入是否符合犹太教规`ID:`。所以你应该：

1.  搜索（正则表达式或其他）您期望的 ID。
2.  对于匹配，实际解析该行并确保它有效。如果不是（例如，只是`ID:`嵌入在某个字符串中），请将其删除并继续搜索。

由于 (2) 的不合法出现应该很少见，因此验证不必非常有效。

# java - 如何检查地图是否有重复键？

> ID：14554217
> 
> 赞同：2
> 
> 时间：2013-01-28T01:22:59.740
> 
> 标签：java, map

好的，这就是我要做的：

将传递的内容拆分`List`为单独的行，然后使用分隔符拆分这些行，然后将这些部分添加到`Map`.

我的代码：

```
public GrammarSolver(List<String> rules) {
    if(rules == null || rules.size() == 0) {
        throw new IllegalArgumentException();
    }
    Map<String, String> rulesMap = new HashMap<String, String>();
    Iterator<String> i = rules.iterator();
    while(i.hasNext()) {
        String rule = i.next(); // store a line from 'rules' List
        String[] parts = rule.split("::="); // split the line into non-terminal and terminal
        rulesMap.put(parts[0], parts[1]); // Put the two parts into the map
    }
    // TODO: exception when duplicate key in map
} 
```

一切正常，但现在我的任务说，如果任何行的键重复（多次出现），我需要抛出异常。

据我了解，键只能是唯一的，那么我在这里缺少什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T01:25:59.643

一旦添加到 中，键是唯一的，但是您可以通过使用or方法`HashMap`查询哈希映射来知道要添加的下一个是否已经存在。`containsKey(..)``get(..)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T06:50:42.477

只需将异常添加到该行

```
rulesMap.put(parts[0], parts[1]); // Put the two parts into the map 
```

像

```
// Put the two parts into the map
if((String existing = rulesMap.put(parts[0], parts[1])) != null) 
      throw new IllegalStateException(
             "duplicated key " + parts[0] 
             + " with value " + existing + " overwritten by " + parts[1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T01:34:10.453

你可以像下面这样写：

```
while(i.hasNext()) {
    String rule = i.next(); // store a line from 'rules' List
    String[] parts = rule.split("::="); // split the line into non-terminal and terminal
    if(rulesMap.containsKey(parts[0]){
        throw New Excpetion(...);
    }else{
        rulesMap.put(parts[0], parts[1]); // Put the two parts into the map
    }

} 
```

# php - 如何完成此登录脚本？

> ID：14554221
> 
> 赞同：4
> 
> 时间：2013-01-28T01:23:26.997
> 
> 标签：php, mysql, login, registration

我几乎完成了我的登录脚本，但我不知道如何检查用户名和密码是否正确。这是我的脚本文件。

1.  索引.php：

    ```
    <html>
    <body>

    <form action="action1.php" method="post">
    Username: <input type="text" name="uname">
    Password: <input type="password" name="pword">
    <input type="submit">
    </form>

    </body>
    </html> 
    ```

index.php 文件只是我用来收集用户注册信息的页面。

1.  动作1.php：

    ```
    <?php
    $con = mysql_connect("localhost", "root", "");
    if (!$con)
    {
    die ('Could not connect: ' . mysql_error());
    }

    mysql_select_db("user1", $con);

    $sql="INSERT INTO useri1 (uname, pword)
    VALUES
    ('$_POST[uname]','$_POST[pword]')";

    if (!mysql_query($sql, $con))
    {
    die('Error: ' . mysql_error());
    }
    echo "1 record added";

    mysql_close($con);
    ?> 
    ```

action1.php 文件只是将用户注册到数据库中的页面。

1.  登录.php：

    ```
    <html>
    <body>

    <form action="checklogin.php" method="post">
    Username: <input type="text" name="uname1">
    Password: <input type="password" name="pword1">
    <input type="submit">
    </form>

    </body>
    </html> 
    ```

login.php 文件只是我用于用户输入登录信息的页面。

现在这是我的问题，我不知道如何检查用户登录信息，以便他们可以进入仅限会员的区域。我是新手，非常感谢任何帮助。

谢谢，

——德文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T01:40:32.217

首先，您想使用[mysqli](http://php.net/manual/en/intro.mysqli.php)而不是 mysql，因为 mysql 已经过时并且不再积极开发。其次，您想开始转义数据库查询以停止 sql 注入。在下面的代码中，我使用会话来跟踪用户。[您可以在此处](http://www.w3schools.com/php/php_sessions.asp)了解有关会话的更多信息。

```
<?php

session_start();

$mysqli = new mysqli('localhost', 'root', DB_PASSWORD, 'user1');

/* check connection */
if ($mysqli->connect_error)
  die('Connect Error (' . $mysqli->connect_errno . ') ' . $mysqli->connect_error);

/* escape string from sql injection */
$userName = $mysqli->real_escape_string($_POST['uname1']);

/* query database */
$result = $mysqli->query("SELECT `pword` FROM `user1` WHERE `uname` = '".$userName."'");
if ($result->num_rows == 1) {
  while ($col = $result->fetch_array(MYSQLI_ASSOC)) {
    // This presumes you're storing your passwords in plain text.
    // If you hashed your passwords or anything, you would have to do the same to $_POST['pword']
    if ($_POST['pword'] == $col['pword']) {
      // You could do anything here, but sessions are a way of keeping track of a user.
      $_SESSION['userName'] = $_POST['uname1'];
      $_SESSION['loggedIn'] = true;
    }
  }
}
$result->close();

/* don't forget to close the connection */
$mysqli->close();

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T01:34:12.697

您将按照以下方式运行查询：

```
$user_check_query = "SELECT * FROM useri1 WHERE uname=" . $_POST['uname'] . " AND pword=" . $_POST['pword'] .";"; 
```

如果查询返回一个值，那么他们可以继续。如果查询不返回任何内容，则它们不能通过。至于逻辑，看看你创建的代码，看看如何创建`if`和`else`语句来处理逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T01:39:11.653

您需要执行 SELECT 查询 - 类似于

`SELECT STRCMP('{$_POST['pword']}', pword) FROM useri1 WHERE uname = '{$_POST['uname']}'`

这应该返回 [-1, 1] 范围内的值 - 如果它不为 0，则密码错误。如果没有行，则用户不存在。

您还需要考虑 SQL 注入 - 但这很可能是另一天的练习。

# google-maps - 带有 CoffeeScript 的 Google Maps API：用户单击时不会关闭 infoWindow

> ID：14554222
> 
> 赞同：1
> 
> 时间：2013-01-28T01:23:34.710
> 
> 标签：google-maps, google-maps-api-3, coffeescript, onclicklistener, infowindow

所以这是我第一次同时使用 Google Maps API 和 CoffeeScript。我们有在标记单击时弹出的 infoWindows，但它们仅在有人单击另一个标记并显示不同的 infoWindow 时才会被删除，否则不会关闭。当用户点击离开它时，我们只需要关闭弹出框。这是我们正在使用的代码（抱歉，如果它有点多，我不确定确切的调用应该在哪里）：

```
 @infoWindow = new google.maps.InfoWindow unless @infoWindow?
        @infoWindow.close()

        places = if @options.places? and @options.places.length > 0 then @options.places else null

        if places?
          # add pins
          @add_pins(places)

          # fit bounds
          if @options.googleMap.setBounds == true
            @set_bounds(places)

        # ie8 hack
        ie_8_map()
        # results
        if @options.resultType == 'floating'
          $(".places-map .overlay").show()

      #######
      add_pins: (places) ->
        @pins = {}
        if @markers
          for marker in @markers
            marker.setMap null

        for place, i in places
          @pins[place.id] = '/assets/pins/'+ String.fromCharCode('A'.charCodeAt()+i)+'.png'
          project_pin = new google.maps.MarkerImage '/assets/pins/'+ String.fromCharCode('A'.charCodeAt()+i)+'.png', new google.maps.Size(40, 63), new google.maps.Point(0,0), new google.maps.Point(20, 63)
          project_pin_shadow = new google.maps.MarkerImage '/assets/pin-shadow.png', new google.maps.Size(74, 63), new google.maps.Point(0,0), new google.maps.Point(22, 63)
          marker = new google.maps.Marker map: @googleMap, position: @_latLng(place), icon: project_pin, shadow: project_pin_shadow
          @markers.push marker
          # Adding the pop-up info window
          if place.name
            google.maps.event.addListener marker, 'click', @clickMapMarker.bind(this, place, marker)
        # Add pin pictures
        for k,v of @pins
          pinImg = $(".place-result ." + k + "_place_pin")
          pinImg.parent(".place_pins_popup_img").show()
          pinImg.attr("src", v)

      #######
      clickMapMarker: (place, marker) ->
        @infoWindow.close()
        if @options.resultType == 'leftbar'
          if place.result_html
            @infoWindow.setContent place.result_html
          else
            pop = $('<div class="place-result"></div>').html($('#res_' + place.id).clone().attr("id":"cln_"+place.id))
            pop.find('.place_pins_popup_img').remove()
            #pop.find('.place_pins_popup_img').remove()
            @infoWindow.setContent pop.html()
        else
          @infoWindow.setContent JST["templates/places_map_listings"](places: [place])
        @infoWindow.open(@googleMap, marker) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:12:15.263

恐怕我对 CoffeeScript 还不熟悉，但从外观上看，您需要在地图上添加另一个单击事件侦听器，以便当用户单击地图时，InfoWindow 会关闭。

所以是这样的：

```
google.maps.event.addListener @googleMap, "click", ->
  @infoWindow.close()    

# @googleMap.panTo(someGoogleMapLatLng);
# @googleMap.setZoom(someIntZoomLevel); 
```

# ruby-on-rails - 如何在rails 3中将默认类添加到text_field

> ID：14554231
> 
> 赞同：3
> 
> 时间：2013-01-28T01:25:01.223
> 
> 标签：ruby-on-rails, forms

如何更改 Rails 表单助手的默认生成代码？

代码...

```
<%= f.text_field :title, class: 'inputbox' %> 
```

...产生...

```
<input id="post_title" name="post[title]" class="inputbox" type="text"> 
```

...但我希望默认情况下没有类参数的 text_field 生成上面的代码。

我正在使用导轨 3.2。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T01:35:55.790

为了获得这种行为，您要么必须覆盖现有的文本字段方法，要么添加一个新方法来满足您的需求。我会推荐后者，因为您不会更改内置 Rails 方法的现有行为。

类似于[另一个答案](https://stackoverflow.com/questions/2128114/add-a-form-helper-method)：

```
class ActionView::Helpers::FormBuilder
  def inputbox_field(method, options = {})
    text_field(method, options.merge(class: 'inputbox'))
  end
end 
```

然后，您只需更改视图以使用它：

```
<%= f.inputbox_field :title %> 
```

# matlab - Matlab上的对数最小二乘法

> ID：14554233
> 
> 赞同：2
> 
> 时间：2013-01-28T01:25:12.653
> 
> 标签：matlab, logarithm, least-squares, data-fitting

如何使用这个函数`y=(a*x)./(b+x)`来近似这个数据 `x = [1.5 4 5 8 12 16 17]`，`y = [1.6 2.6 2.4 3.2 3.4 3.6 3.4]`使用 matlab 的最小二乘法？

我用对数得到`log(y)=log(a*x)-log(b+x)`. 结果不是`y = a*x + b`我需要的形式。它没有像它应该`a`那样乘以，而是被添加到它上面，因为. 所以我不知道下一步该怎么做。我知道要执行的代码and ，但我不知道如何解决这个问题。`x``log(y)=log(a)+log(x)-log(b)``y=b*x.^a``y=b*exp.(x*a)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T04:22:21.090

嗯，我认为是时候回到代数 1 了。log(b+x) 与 log(b) 不同。您无法使用日志来解决此问题，至少不是您尝试过的那样。

只要您愿意在错误结构中快速轻松地玩弄（即使您不知道这意味着什么，它仍然很重要），那么假设您颠倒了事情？

```
1/y = (b+x)/(ax) = b/(ax) + 1/a 
```

变换问题，使

```
c = b/a
d = 1/a
u = 1/x
v = 1/y 
```

现在我们有

```
v = cu + d 
```

解决这个线性回归问题，然后从 c 和 d 中恢复 a 和 b。

在 MATLAB 中，它很简单。

```
x = [1.5 4 5 8 12 16 17];
y = [1.6 2.6 2.4 3.2 3.4 3.6 3.4];

u = 1./x;
c_d = polyfit(u,1./y,1)
c = c_d(1);
d = c_d(2);

a = 1./d
a =
          3.90554889035516

b = c*a
b =
          2.19394529536478 
```

并绘制拟合结果。

```
ezplot(@(x) a.*x./(b+x),[1.5 17])
hold on
plot(x,y,'ro') 
```

![在此处输入图像描述](../Images/30b3d599ecb0e81a26a15f206139fd8b.png)

# ios - 多个 Web 视图

> ID：14554240
> 
> 赞同：-1
> 
> 时间：2013-01-28T01:25:56.353
> 
> 标签：ios, objective-c, webview

我有四个链接到它的按钮。当单击按钮等其他按钮时，如何让 webview 转到该特定链接？我以为会是这样，但事实并非如此

```
WebView.detailURL = [[[redLinks objectAtIndex:indexPath.section] objectAtIndex:NSIndexPath.row] objectForKey:@\"URL\"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:23:08.180

使用新的 detailURL 重新加载您的 webView

```
[yourWebView loadRequest:[NSURLRequest requestWithURL:detailURL]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T03:23:38.577

你的问题很模糊，但据我了解，你需要这样的东西

```
 [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"google.com"]]]; 
```

您在每个按钮的 IBAction 中放置类似的内容，并将“google.com”更改为您需要的内容

# android - Android 显示来自数据库的记录列表（sqlite）

> ID：14554245
> 
> 赞同：0
> 
> 时间：2013-01-28T01:26:18.877
> 
> 标签：android, database, sqlite

我想在我的 android 应用程序中显示名称为“Bernadette”的项目列表。我的代码如下所示：

```
public List<WebsiteRecords> getAllWebsite() {
    List<WebsiteRecords> websites = new ArrayList<WebsiteRecords>();
    Cursor cursor = database.rawQuery("SELECT * FROM " + MySQLiteHelper.TABLE_URL + "WHERE user=?", new String[]{MySQLiteHelper.COLUMN_USER});
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        WebsiteRecords website = cursorToWebsite(cursor);
        websites.add(website);
        cursor.moveToNext();
    }
    cursor.close();
    return websites;
}

private WebsiteRecords cursorToWebsite(Cursor cursor) {
    WebsiteRecords website = new WebsiteRecords();
    website.setId(cursor.getInt(0));
    website.setUser(cursor.getString(1));
    website.setSitename(cursor.getString(2));
    website.setUsername(cursor.getString(3));
    website.setPassword(cursor.getString(4));
    return website;
} 
```

但是当我运行它时，它说应用程序已经停止工作并且我的 logcat 说：

```
01-28 09:07:26.922: E/AndroidRuntime(835): FATAL EXCEPTION: main
01-28 09:07:26.922: E/AndroidRuntime(835): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.bernadette.remembermypassword/com.bernadette.remembermypassword.PasswordActivity}: android.database.sqlite.SQLiteException: near "=": syntax error (code 1): , while compiling: SELECT * FROM websitesWHERE user=?
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.os.Looper.loop(Looper.java:137)
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-28 09:07:26.922: E/AndroidRuntime(835):  at java.lang.reflect.Method.invokeNative(Native Method)
01-28 09:07:26.922: E/AndroidRuntime(835):  at java.lang.reflect.Method.invoke(Method.java:511)
01-28 09:07:26.922: E/AndroidRuntime(835):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-28 09:07:26.922: E/AndroidRuntime(835):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-28 09:07:26.922: E/AndroidRuntime(835):  at dalvik.system.NativeStart.main(Native Method)
01-28 09:07:26.922: E/AndroidRuntime(835): Caused by: android.database.sqlite.SQLiteException: near "=": syntax error (code 1): , while compiling: SELECT * FROM websitesWHERE user=?
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1253)
01-28 09:07:26.922: E/AndroidRuntime(835):  at com.bernadette.remembermypassword.DataSource.getAllWebsite(DataSource.java:62)
01-28 09:07:26.922: E/AndroidRuntime(835):  at com.bernadette.remembermypassword.PasswordActivity.show_list_layout(PasswordActivity.java:172)
01-28 09:07:26.922: E/AndroidRuntime(835):  at com.bernadette.remembermypassword.PasswordActivity.onCreate(PasswordActivity.java:42)
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.app.Activity.performCreate(Activity.java:5008)
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
01-28 09:07:26.922: E/AndroidRuntime(835):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
01-28 09:07:26.922: E/AndroidRuntime(835):  ... 11 more 
```

你能帮我解决这个问题吗？我有一个名为 users 的数据库，其中包含 _id、user、site、username、password 列。当我登录我的应用程序时，我想显示具有相同“用户”名称的项目列表。我该怎么办？

我还想知道我是否输入了正确的代码集，因为当我继续运行它时，它仍然显示数据库中的所有记录，而不仅仅是显示我在 Toast 中显示的用户名的列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:30:16.757

```
Cursor cursor = database.rawQuery("SELECT * FROM " + MySQLiteHelper.TABLE_URL + "WHERE user=?", new String[]{MySQLiteHelper.COLUMN_USER}); 
```

您需要在 之前的另一个空格`WHERE`，将行更改为

```
Cursor cursor = database.rawQuery("SELECT * FROM " + MySQLiteHelper.TABLE_URL + " WHERE user=?", new String[]{MySQLiteHelper.COLUMN_USER}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T01:30:26.257

你的问题在

```
" WHERE user=?", new String[]{MySQLiteHelper.COLUMN_USER}); 
```

改变“？”的值 直接地。

采用

```
 database.rawQuery("SELECT * FROM " + MySQLiteHelper.TABLE_URL); 
```

代替

```
database.rawQuery("SELECT * FROM " + MySQLiteHelper.TABLE_URL + "WHERE user=?", new String[]{MySQLiteHelper.COLUMN_USER}); 
```

# php - 日志文件 php 正则表达式问题

> ID：14554250
> 
> 赞同：0
> 
> 时间：2013-01-28T01:27:16.487
> 
> 标签：php, regex

嘿伙计们，我需要一些关于 php 正则表达式问题的帮助。正则表达式甚至可能不是在这里使用的最佳方法。我根本不知道如何使用 php - 我只是四处浏览示例并尝试将它们粘贴在一起以完成我需要完成的工作。

我当前的代码看起来像这样......

```
// full path to text file
define("TEXT_FILE", "cports.log");
// number of lines to read from the end of file
define("LINES_COUNT", 5);

function read_file($file, $lines) {
    $handle = fopen($file, "r");
    $linecounter = $lines;
    $pos = -2;
    $beginning = false;
    $text = array();
    while ($linecounter > 0) {
        $t = " ";
        while ($t != "\n") {
            if(fseek($handle, $pos, SEEK_END) == -1) {
                $beginning = true; 
                break; 
            }
            $t = fgetc($handle);
            $pos --;
        }
        $linecounter --;
        if ($beginning) {
            rewind($handle);
        }
        $text[$lines-$linecounter-1] = fgets($handle);
        if ($beginning) break;
    }
    fclose ($handle);
    return array_reverse($text);
}

$fsize = round(filesize(TEXT_FILE)/1024/1024,2);

$lines = read_file(TEXT_FILE, LINES_COUNT);
foreach ($lines as $line) {
    echo $line;
}

?> 
```

它基本上读取一个名为 cports.log 的文件并在最后 5 行结尾。但是，我的日志文件示例如下所示...

```
1/27/2013 7:16:06 PM Added          {92.255.176.84}
1/27/2013 7:16:07 PM Removed        {92.255.176.84}
1/27/2013 7:16:08 PM Added          {176.15.101.53}
1/27/2013 7:16:09 PM Removed        {176.15.101.53}
1/27/2013 7:16:23 PM Added          {98.119.183.235}
1/27/2013 7:16:24 PM Removed        {98.119.183.235}
1/27/2013 7:16:27 PM Added          {37.251.51.9}
1/27/2013 7:16:28 PM Removed        {37.251.51.9}
1/27/2013 7:16:38 PM Added          {92.255.176.84}
1/27/2013 7:16:38 PM Added          {82.112.38.83}
1/27/2013 7:16:39 PM Removed        {92.255.176.84}
1/27/2013 7:16:39 PM Removed        {82.112.38.83}
1/27/2013 7:16:45 PM Added          {74.61.121.147}
1/27/2013 7:16:50 PM Removed        {74.61.121.147} 
```

所以我的 php 文件的输出只是日志文件的最后 5 行。但我需要做的是将每个 IP 嵌套在括号中，然后将它们存储到数组或变量中，以便在这部分代码中使用......

```
<?php

require_once("geoipcity.inc");

$ip = "8.8.8.8";

$gi = geoip_open("GeoLiteCity.dat", GEOIP_STANDARD);

$record = geoip_record_by_addr($gi, $ip);
    echo "Location One <br>";
    echo "Country: " .$record->country_name . "<br>";
    echo "City: " .$record->city . "<br>";
    echo "Latitude: " .$record->latitude . "<br>";
    echo "Longitude: " .$record->longitude . "<br>";

geoip_close($gi);
?> 
```

这段代码基本上迭代了 5 次，以从 $ip 中打印出 5 个 IP 的地理位置。任何帮助将非常感激！再次，我不知道 php 所以请耐心等待我。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T01:50:03.557

第一个技巧是使用该[`file()`](http://php.net/file)函数逐行读取文件，然后您可以遍历它们：

```
foreach (file("text.txt") as $line) {
    ###
} 
```

但是使用正则表达式，您可以一次读取文件并[`preg_match_all`](http://php.net/preg_match_all)一举提取所有 IP：

```
preg_match_all('/\{([\d.]+)\}/', file_get_contents($fn), $matches);
print_r($matches[1]); 
```

使用这样一个结构良好的文件，您甚至可以一次完全排列所有列，使用

```
#^  ([\d/]+)\s  ([\d:]+)\s \w+\s  (.*?)\s  \{([\d.]+)\}\s*  $#mix 
```

# java - 使用带有布尔 IN 参数的 CallableStatement 在 Java 中调用 Oracle PL/SQL 过程会产生 PLS-00306 oracle 错误：

> ID：14554251
> 
> 赞同：12
> 
> 时间：2013-01-28T01:27:29.057
> 
> 标签：java, sql, oracle, jdbc, plsql

我在具有以下参数的 Oracle 11g 上有一个 pl/sql 过程：

```
PROCEDURE validate_product
   ( product_id_in IN varchar2 , 
     username_in in varchar2, 
     source_in varchar2,    
     source_id_in varchar2 , 
     isEuProduct in boolean , 
     error_code out varchar2, 
     product_type out varchar2  
     ) 
```

我正在尝试使用以下代码从 java 中调用上述存储过程：

```
cstmt = getConnection().prepareCall("begin " + DBUtil.SCHEMANAME + ".PRODUCT_UTILITIES.validate_product(:1,:2,:3,:4,:5,:6,:7); end;");

cstmt.registerOutParameter(6, Types.CHAR); 
cstmt.registerOutParameter(7, Types.CHAR); 

cstmt.setString(1, productId);
cstmt.setString(2, username);
cstmt.setString(3, sourceName);
cstmt.setString(4, sourceId);
cstmt.setBoolean(5, isEUProduct);

cstmt.execute(); 
```

Java 变量的类型都是`String`除了. 每当我运行上述程序时，我都会收到以下错误：`isEUProduct``boolean`

```
PLS-00306: wrong number or types of arguments in call to validate_product ORA-06550: line 1, column 7: PL/SQL: Statement ignored" 
```

我必须调试程序一百次，但一切似乎都是正确的类型并且参数的数量是正确的。

我完全不知道我做错了什么。用谷歌搜索后，我怀疑我可能没有正确设置布尔参数。

有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-28T04:41:24.960

当我们遇到这个时我很惊讶，但是 Oracle JDBC 驱动程序不支持将布尔值传递到存储过程中......是的，我不是在编造它 :)

[PL/SQL 存储过程中的布尔参数](http://docs.oracle.com/cd/B28359_01/java.111/b31224/apxtblsh.htm#i1005380)

> JDBC 驱动程序不支持将 BOOLEAN 参数传递给 PL/SQL 存储过程。如果 PL/SQL 过程包含 BOOLEAN 值，您可以通过使用第二个 PL/SQL 过程包装 PL/SQL 过程来解决此限制，该过程接受作为 INT 的参数并将其传递给第一个存储过程。当调用第二个过程时，服务器执行从 INT 到 BOOLEAN 的转换。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-15T15:23:36.740

该限制有一个简单的解决方法，它不需要包装程序，只需将 PL/SQL 中的布尔参数包装在`CASE`语句中并使用 Integer 进行绑定：

```
stmt = connection.prepareCall("begin" 
        +"  booleanFunc(par_bool => (CASE ? WHEN 1 THEN TRUE ELSE FALSE END)); "
        +"end;"
       );

// now bind integer, 1 = true, 0 = false
stmt.setInt(1, 0); // example for false 
```

如果您的方法使用布尔值，您可以在绑定期间以相反的方式包装整数，例如：

```
// now bind integer, 1 = true, 0 = false
stmt.setInt(1, myBool ? 1 : 0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T06:15:48.557

我认为这是问题所在

```
cstmt.registerOutParameter(6, Types.CHAR); 
cstmt.registerOutParameter(7, Types.CHAR); 
```

你像上面一样从java调用，但是你在过程中声明参数为`varchar2`，这意味着数据类型不匹配。

试试这个代码，

```
cstmt.registerOutParameter(6, Types.VARCHAR); 
cstmt.registerOutParameter(7, Types.VARCHAR); 
```

我希望这会奏效..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T04:14:23.747

我怀疑 out 语句可能需要修改以下内容（因为 out 参数的类型在过程中是 varchar2 ）：-

```
cstmt.registerOutParameter(6, Types.VARCHAR); 
cstmt.registerOutParameter(7, Types.VARCHAR); 
```

但是，如果这不起作用，请尝试将 prepareCall 语句也修改为以下内容：-

```
cstmt = getConnection().prepareCall("{call " + DBUtil.SCHEMANAME + ".PRODUCT_UTILITIES.validate_product(?,?,?,?,?,?,?)}"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-14T21:28:21.243

从 Oracle 12.2 开始，[JDBC 支持绑定 PLSQL_BOOLEAN](https://docs.oracle.com/en/database/oracle/oracle-database/12.2/newft/new-features.html#GUID-CFFB1DD7-E544-4E13-A4A8-7B5D161A57F1)

我将演示一个带有`IN`和`OUT` `BOOLEAN`参数的简单过程

```
create or replace PROCEDURE proc_C (flag_in BOOLEAN, flag_out OUT BOOLEAN) as
begin
  flag_out := flag_in;
end;
/ 
```

不幸的是，不能直接使用`setBoolean`绑定第一个参数。

司机`Version 19.3.0.0.0`在这种情况下返回`PLS-00306: wrong number or types of arguments in call to 'PROC_C'`

解决方法很简单`setObject(1,true,oracle.jdbc.OracleTypes.PLSQL_BOOLEAN)`

整个例子

```
stmt = con.prepareCall("{ call proc_C(?,?)}") 
stmt.setObject(1,false,oracle.jdbc.OracleTypes.PLSQL_BOOLEAN)
stmt.registerOutParameter(2, oracle.jdbc.OracleTypes.PLSQL_BOOLEAN) 
stmt.execute()
flag = stmt.getBoolean(2) 
```

# javascript - 仅通过知道它的类，可以通过javascript动态更改DIV的CSS属性吗？

> ID：14554252
> 
> 赞同：-1
> 
> 时间：2013-01-28T01:28:06.877
> 
> 标签：javascript, html, css

我有这个 div：

```
<div class="galleria-info" style="">
    <div class="galleria-info-text">
        <div class="galleria-info-title" style="">#test</div>
    </div>
</div> 
```

我有这个CSS：

```
.galleria-info {
    width: 100%;
    top: 290px;
    left: 330px;
    z-index: 10;
    position: absolute;
} 
```

我想做的是通过javascript以某种方式动态更改galleria.info div的left属性，以便根据#test的文本长度，我可以将div定位到足够远的位置，以便在屏幕上为它腾出空间。

我在 HTML 中动态地写了单词#test 所在的不同信息，并且它没有仅 ID 类。

任何线索或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T01:29:56.283

```
document.getElementsByClassName('galleria-info')[0].style.left = '300px'; // or whatever you want 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T02:00:59.990

你有两个问题；我有两个答案。

# 按类名获取

`getElementById()`通过 id`getElementsByTagName()[]`获取元素，通过标签名获取元素，并通过类名获取元素，使用：

```
document.querySelectorAll("galleria-info") 
```

# 设置位置

对不起，我用`getElementById`and`getElementsByTagName`而不是`querySelectorAll`.

## `right`属性

属性不是`right`更合适吗？你可以得到身体（或容器）的宽度，然后从中减去你想要的。

```
var body_width = document.getElementsByTagName('body')[0].style.width;
var body_width = parseFloat(body_width);
document.getElementById('galleria-info').style.right = (body_width - 600) + "px"; 
```

## 固定宽度字体

但是，如果您使用的是固定宽度的字体，那么您可以获得字符串的长度，乘以每个字符的宽度，然后设置`style.left`为减去它可以达到的最大距离（即 300 像素）。

```
var str_length = document.getElementById('galleria-info').innerHTML.length;
var str_length = str_length * 10; // Or whatever the fixed width is
document.getElementById('galleria-info-text').style.left = (300 - str_length) + "px"; 
```

## 包装器

这不使用 JavaScript，在我看来，这是一件好事，因为用户可以禁用 JavaScript。您可以在具有以下 CSS 的原始 div 周围有一个包装 div：

```
#galleria-info-wrapper {
    width:300px;
    text-align:right;
}
#galleria-info {
    text-align:left;
} 
```

# c# - 游戏引擎的多线程（Unity3D）？

> ID：14554256
> 
> 赞同：4
> 
> 时间：2013-01-28T01:28:47.007
> 
> 标签：c#, multithreading, unity3d, game-engine

我正在使用 Unity3D 和 Mono 制作多人在线游戏。语言是 C# 脚本。我知道 Unity 不是线程安全的。Mono 中的 C# 允许您使用[System.Threading](http://msdn.microsoft.com/en-us/library/system.threading.aspx)创建新线程。但是 Unity 会禁止新线程修改任何[GameObjects](http://docs.unity3d.com/Documentation/ScriptReference/GameObject.html)。

在我的代码中，我启动了一个新线程来等待来自我的一些本机 C 代码（作为[插件](http://docs.unity3d.com/Documentation/Manual/Plugins.html)合并到 Unity 中）的回调。这样，当回调被调用时，它将在新线程上，而不是 Unity 有权操作 GameObjects 的主线程。但是，我**希望**修改游戏对象。我该怎么办？我应该使用主线程来轮询新线程吗？或者有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T01:49:56.397

有不止一种方法可以向主线程发出第二个线程上可用数据的信号。一般来说，第一种方法可能是让第一个线程“阻塞”（等待）直到第二个线程“发出信号”；但是，这里不做详细介绍，这*不是*您想要采用的方法，因为在您在第二个线程上执行冗长的计算时阻塞主线程将使您的游戏在最坏的情况下无响应或在最好的情况下变得紧张。

所以这留下了您提出的另一种方法：轮询。无论您是否经常觉得有必要（每帧一次，每 60 帧一次），您的主线程代码（例如在 MonoBehaviour 中）都会想要检查第二个线程中的任务状态。这可以通过调用方法或检查第二个线程“拥有”的对象上的布尔值来实现。通过这种方法，您的任务将指示主线程轮询事情是“完成”还是“未完成”。Unity co-routines 可能是从主线程实现轮询逻辑的有用机制。

但是，您不一定已经完成。如果您的第二个线程将重复生成新数据到同一个变量或缓冲区中，您还必须确保您的主线程不会同时从您的第二个线程正在写入的缓冲区中读取。对于少量数据，当新数据准备好时，您可以使用双缓冲方法（两个缓冲区/变量，一个用于读取，一个用于写入，通过指针/引用交换进行交换）；或者您可以使用 C# 锁（但这可能会阻塞您的主线程并产生前面描述的副作用）。

一旦您的主线程获得所需的数据，您当然可以继续从主线程修改您的游戏对象。

请注意，您的问题并不是 Unity 特有的。大多数 UI 框架都有这个限制（有充分的理由），并且线程之间的通信在每个实例中都以类似的方式解决。

# php - 限制用户的登录尝试

> ID：14554257
> 
> 赞同：0
> 
> 时间：2013-01-28T01:28:51.760
> 
> 标签：php

我需要帮助来限制用户的登录尝试。这是我的代码。

```
$login = login($username, $password);
        if($login === false) {
            if(isset($_COOKIE['login'])){
                      if($_COOKIE['login'] < 3){
                           $attempts = $_COOKIE['login'] + 1;
                           setcookie('login', $attempts, time()+60*10); //set the cookie for 10 minutes with the number of attempts stored
                           $errors[] = 'That username/password combination is incorrect!';
                      } else{
                           echo 'You are banned for 10 minutes. Try again later';
                      }
            } else {
                   setcookie('login', 1, time()+60*10); //set the cookie for 10 minutes with the initial value of 1
             }

        } else {        
            $_SESSION['user_id'] = $login;
            header('Location: ../../home.php');
            exit();
        } 
```

它看起来很适合我，但它就是行不通。即使在尝试 3 次登录后，用户仍然可以访问他/她的帐户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T01:49:19.457

使用 SQL 数据库，我目前正在处理一段代码，给我大约一个小时，我会为你举一个例子

* * *

PHP：

```
<?php
$host = "";//Host name
$username = "";//MYSQL username
$password = "";//MYSQL password
$db_name = "";//Database name
$tbl_name = "";//Name of login table
$bl_name2 = "";//Name of table to store IP if attempt is incorrect

//connect to server and select database
try{
$conn = new PDO('mysql:host='.$host.';dbname='.$db_name.'',$username, $password);
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);}
catch(PDOException $e){
echo 'ERROR: ' . $e->getMessage();}

//get users ip next, as this is for a log in, this example will show for username and pass also
$userIP = $_SERVER['REMOTE_ADDR'];
$userPassword = $_POST['passwordfromform'];
$userUsername = $_POST['usernamefromform']

if(empty($userUsername) && empty($userPassword)){
die("You must enter a username and password");
}

//check for log in excess
$checkSql="
SELECT * FROM ".$tbl_name2."
WHERE PostersIP = '".$userIP."'
";
$stmt = $db->query($checkSql);
$row_count = $stmt->rowCount();
if($rowcount >= 7){//change this number to reflect the nuber of login chances
die("You have tried to log in too many times");
}

//check to log in
$insertSql = "
SELECT * FROM ".$tbl_name."
WHERE USERNAME = '".$userUsername."'
AND PASSWORD = '".$userPassword."'";

//execute check query
$result = $conn->query($insertSql);
if($result != false){
echo "Username and Password were correct!";//link to correct page
}
else{
$incorrectSql="
INSERT INTO ".$tbl_name2."
(PostersIP) VALUES 
('".$userIP."')";
    $result2 = $conn->query($incorrectSql);
     if($result2 != false){
          die("You entered an invalid username or password, your attempt has been stored.");
        }
die("Error inserting data");
}
?> 
```

我没有现场测试，所以可能会有一些缺陷，但是我对你的评价很好。您确实需要第二张表来存储用户提交的 ips。这是一种非常混乱的方法。我很确定有更好的方法来做到这一点，但我的 10 分钟解决方案有 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T01:44:52.163

使用数据库，我建议使用 IP 地址。看看这个[获取用户 ip 地址 php 的权威方法](https://stackoverflow.com/questions/6794782/definitive-way-to-get-user-ip-address-php)

捕获用户名、密码和时间戳，将这些记录到表中，无论是失败还是成功。设置您想要禁止它们的参数。

为您的登录脚本添加一个检查以检查 IP 地址，并且仅在该 IP 地址未用于 3 次失败尝试时才允许他们输入详细信息。

显然，您可能需要一个新表来记录被禁止的 IP 地址以及允许他们重新输入详细信息的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-11T17:44:24.483

我只想制作另一个包含 cols 的表：用户名、时间戳、尝试。这将在时间戳的 10 分钟内检查用户名的尝试（在第一次尝试时设置）。

```
If ( attempts > max attempts then attempt login )
   { "Sorry to many attempts"
   else { Check login 
       if failed { Attempts++ } else (login success) { set attempts = 0 } 
(reset attempts counter)}
 } 
```

# android - Android HttpURLConnection NumberFormatException

> ID：14554260
> 
> 赞同：0
> 
> 时间：2013-01-28T01:28:57.860
> 
> 标签：android, httpurlconnection, numberformatexception

所以谷歌音乐没有官方的api，但有非官方的。因为它是非官方的，所以我们必须使用 ClientLogin 而不是 OAuth，我遇到以下问题

URL url = 新 URL(" [https://www.google.com/accounts/ClientLogin](https://www.google.com/accounts/ClientLogin) ");

HttpURLConnection 连接 = (HttpURLConnection)url.openConnection();

我深深地得到了一个 NumberFormatException 。有什么想法吗？

这是堆栈跟踪

```
Integer.parseInt(String, int) line: not available   
Integer.<init>(String) line: not available  
InetAddressCachePolicy.<clinit>() line: not available   
InetAddress$Cache.getPolicy() line: not available   
InetAddress$Cache.put(String, Object) line: not available   
InetAddress.cacheInitIfNeeded() line: not available 
InetAddress.cacheAddress(String, Object, boolean) line: not available   
InetAddress.getAddressFromNameService(String, InetAddress) line: not available  
InetAddress.getLocalHost() line: not available  
SeedGenerator$1.run() line: not available   
AccessController.doPrivileged(PrivilegedAction<T>) line: not available [native method]  
SeedGenerator.getSystemEntropy() line: not available    
SecureRandom$SeederHolder.<clinit>() line: not available    
SecureRandom.engineNextBytes(byte[]) line: not available    
SecureRandom.nextBytes(byte[]) line: not available  
SecureRandom.next(int) line: not available  
SecureRandom(Random).nextInt() line: not available  
DefaultSSLContextImpl(SSLContextImpl).engineInit(KeyManager[], TrustManager[], SecureRandom) line: not available    
DefaultSSLContextImpl.<init>() line: not available  
NativeConstructorAccessorImpl.newInstance0(Constructor, Object[]) line: not available [native method]   
NativeConstructorAccessorImpl.newInstance(Object[]) line: not available 
DelegatingConstructorAccessorImpl.newInstance(Object[]) line: not available 
Constructor<T>.newInstance(Object...) line: not available   
Class<T>.newInstance0() line: not available 
Class<T>.newInstance() line: not available  
Provider$Service.newInstance(Object) line: not available    
GetInstance.getInstance(Provider$Service, Class) line: not available    
GetInstance.getInstance(String, Class, String) line: not available  
SSLContext.getInstance(String) line: not available  
SSLContext.getDefault() line: not available 
SSLSocketFactory.getDefault() line: not available   
HttpsURLConnection.getDefaultSSLSocketFactory() line: not available 
HttpsURLConnectionImpl(HttpsURLConnection).<init>(URL) line: not available  
HttpsURLConnectionImpl.<init>(URL, Proxy, Handler) line: not available  
Handler.openConnection(URL, Proxy) line: not available  
Handler.openConnection(URL) line: not available 
URL.openConnection() line: not available 
```

# c - 在 C 中矢量化的任何方式

> ID：14554261
> 
> 赞同：3
> 
> 时间：2013-01-28T01:29:09.853
> 
> 标签：c

我的问题可能看起来很原始或愚蠢，因为我刚刚切换到 C。我已经使用 MATLAB 工作了几年，我了解到任何计算都应该在 MATLAB 中向量化，我应该避免任何`for`循环以获得可接受的性能. 似乎如果我想添加两个向量，或者矩阵相乘，或者进行任何其他矩阵计算，我应该使用`for`循环。如果您让我知道是否有任何方法可以在向量化的意义上进行计算，例如仅使用一个命令读取向量的所有元素并使用一个命令将这些元素添加到另一个向量，我们将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T01:35:19.280

MATLAB 建议您避免任何`for`循环，因为向量和矩阵上可用的大多数操作已经在其 API 中实现并且可以使用。它们可能已经过优化，它们直接在底层数据上工作，而不是在 MATLAB 语言级别上工作，我猜这是一种不透明的实现。

甚至 MATLAB 在下面使用 for 循环来实现它的大部分魔法（或将它们委托给高度专业化的汇编指令或通过 CUDA 到 GPU）。

你问的不是直接可能的，你需要使用循环来处理向量和矩阵，实际上你会搜索一个[库](https://stackoverflow.com/questions/7228575/c-library-for-linear-algebra)，它允许你在不直接使用 for 循环但使用已经定义的函数的情况下完成大部分工作包裹它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T02:31:21.540

如前所述，无法隐藏 for 循环。但是，我怀疑 MATLAB 生成的代码在任何方面都比 C 生成的代码快。如果您使用 编译您的 C 代码，`-O3`它将尝试使用您的计算机可用的所有硬件功能，例如 SIMD 扩展和多个问题。此外，如果您的代码很好并且不会导致太多管道停顿并且您使用缓存，那么它会非常快。但我认为你正在寻找的是一些图书馆，在谷歌上搜索 LAPACK 或 BLAS，它们可能就是你正在寻找的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T01:35:27.563

在 C 中，没有办法以向量化的方式执行操作。您可以使用结构和函数来抽象出操作的细节，但最终您将始终使用 fors 来处理您的数据。

至于速度 C 是一种编译语言，在 C 中使用 for 循环不会对性能造成影响。C 的好处（与 MATLAB 相比）它不会对您隐藏任何内容，因此您始终可以看到您的时间在哪里正在使用。不利的一面是，您会注意到 MATLAB 使琐碎的事情（svd、cholesky、inv、cond、imread 等）在 C 中具有挑战性。

# java - 以下代码中的变量“MAP_WIDTH = 64”用于渲染精灵表有什么用

> ID：14554262
> 
> 赞同：0
> 
> 时间：2013-01-28T01:29:24.370
> 
> 标签：java, arrays, sprite, game-engine, sprite-sheet

我想知道“MAP_WIDTH = 64”在下面的代码中做了什么。它取自一系列关于 Java 2d 游戏引擎设计的视频中的一集，我已经链接了有问题的视频。

正在使用的精灵表是 256 x 256 .png，网格/平铺/精灵（？）为 8 x 8。精灵表仅使用 4 种颜色，他们将这 4 种颜色中的每一种设置为代码中的其他颜色。以下代码位于底部链接的视频的第一分钟。（省略了与渲染有关的一些变量）

我无法为我的生活弄清楚发生了什么。64 是从哪里来的？我唯一能看到的是 8 x 8 网格中有 64 个像素，但是为什么还要再乘以 64 呢？它不能是每行/列的像素，因为其中有 256 个，也不能是图块的数量，因为每行/列有 32 个。

我可以看到为什么 int colours[] 比瓦片数组大 4 倍，因为每个像素可以是 4 个值之一，但我很难掌握这一点。

```
public class Screen{
   public static final int MAP_WIDTH = 64;
   public static final int MAP_WIDTH = MAP_WIDTH - 1;

   public int[] tiles = new int[MAP_WIDTH * MAP_WIDTH]
   public int[] colours = new int[MAP_WIDTH * MAP_WIDTH * 4]

   public Screen(){
       for(int i =0; i<MAP_WIDTH * MAP_WIDTH; i++){
           colours[i*4 +0] = 0xff00ff;
           colours[i*4 +1] = 0x00ffff;
           colours[i*4 +2] = 0xffff00;
           colours[i*4 +3] = 0xffffff;
       }
   }
} 
```

[YouTube 链接](https://www.youtube.com/watch?v=6FMgQNDNMJc)

# r - R函数解决大型密集线性方程组？

> ID：14554263
> 
> 赞同：2
> 
> 时间：2013-01-28T01:29:28.737
> 
> 标签：r, matrix, large-data

抱歉，也许我是盲人，但我找不到任何特定于一个相当普遍的问题的东西：

我要实施

```
solve(A,b) 
```

A 是一个大方阵，因为上面的命令使用了我所有的内存并发出错误（b 是具有相应长度的向量）。我拥有的矩阵并不稀疏，因为会有大块零等。必须有一些函数实现逐步迭代方案，这样即使可用内存有限，也可以找到解决方案。

我发现了几篇关于稀疏矩阵的帖子，当然还有 Matrix 包，但无法识别出我需要的函数。我也看过这篇[文章](https://stackoverflow.com/questions/5724515/large-matrix-solvecrossprodx-when-dimx-100-0005000)，但 biglm 产生了一个完整的线性模型拟合。我需要的只是一个简单的解决方案。我将不得不多次重复该步骤，因此保持它尽可能苗条会很棒。

我已经担心“重复旧问题”和“看这里”的评论，但我会非常感谢一些帮助。

# eclipse - 如何通过 Eclipse 编码和编译 Matlab mex 文件？

> ID：14554267
> 
> 赞同：2
> 
> 时间：2013-01-28T01:29:58.970
> 
> 标签：eclipse, matlab, compilation, mex

我想在 Eclipse IDE 上编码和构建 Matlab mex 文件。我如何才能将 mex 编译器包含为 c++/c 编译器之一，并在 Eclipse 上使用该编译器构建我拥有的 mex 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:04:56.100

我不知道你想说什么，但我会解释 mex 如何帮助我。

1.  Mex 是 - Matlab 可执行文件，您将使用它来创建类似于 Matlab 函数的函数 例如：function varargout = foo(varargin)。这个 foo 将是你的 foo.c 或 foo.cpp。
2.  foo.c 或 cpp 使用此处提到的众所周知的 C/C++ 编译器进行编译 - [http://www.mathworks.in/support/compilers/R2012a/win64.html](http://www.mathworks.in/support/compilers/R2012a/win64.html)
3.  这会在 Windows 中生成 foo.mexw32 或 foo.mexw64，您可以像 Matlab 函数一样调用它。
4.  您可以做的是使用 C 编译器在 Eclipse 中编写代码，使其执行并将其轻松移植到 mex 函数中。从 mex -setup 中选择编译器

我发现本教程非常有帮助： [Mex 教程](http://classes.soe.ucsc.edu/ee264/Fall11/cmex.pdf)

我怀疑至少我没有遇到过所谓的“Mex 编译器”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T17:15:08.283

我使用[http://ngoonee.xanga.com/664222870/compiling-mexw32-mex-for-windows-files-using-eclipse-cdt-ide-mingw-gcc-compiler/的教程](http://ngoonee.xanga.com/664222870/compiling-mexw32-mex-for-windows-files-using-eclipse-cdt-ide-mingw-gcc-compiler/)

为我工作！

# c++ - 是否有更好更快的方法来仅填充圆弧（以像素为单位）？

> ID：14554271
> 
> 赞同：1
> 
> 时间：2013-01-28T01:30:21.577
> 
> 标签：c++, algorithm

有没有更好更快的方法来填充圆弧？我传递给中心、半径、最小和最大角度（弧角）的函数坐标。目前，我返回圆 (x,y,r) 内的所有像素，并检查角度之间的点角度是否插入结果中。//lineTo (bresenham) 是返回两个像素之间的点的函数

```
float calculateAngle(float x0, floaty0, float x1, float y1);// returns angle between two points and x axis

std::set< std::pair<int,int> > Board::getFilledCellsinRadius(const int x,const int y,const int r, float alpha1, float alpha2)
{
    std::set< std::pair<int,int> > result;
    int x1;
    int x2;
    int counter=(y+r);
    for(int count=(y-r);count<=counter;count++)
    {
        x1=int(x+sqrt(static_cast<double>((r*r)-((count-y)*(count-y)))+0.5));
        x2=int(x-sqrt(static_cast<double>((r*r)-((count-y)*(count-y)))+0.5));

        std::set< std::pair<int,int> > temp=lineTo(x1,count,x2,count);
        for(std::set< std::pair<int,int> >::iterator iter=temp->begin();iter!=temp->end();++iter){
            float a=calculateAngle(x,y,(*iter).first, (*iter).second);
            if(a>=alpha1 && a<=alpha2){
               result.insert(*iter);
             }
        }
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T01:50:07.613

为什么不返回圆弧上的点，然后使用 lineto 函数填充圆弧？

弧上的点应该可以用数学计算，这样可以避免不必要的计算。

或者，绘制圆弧和 2 个半径并使用[Flood Fill Algorithm](http://en.wikipedia.org/wiki/Flood_fill)进行填充，谢谢@user814628

# html - 连接到 HTML5 Websocket

> ID：14554273
> 
> 赞同：14
> 
> 时间：2013-01-28T01:30:36.107
> 
> 标签：html, websocket

我对 HTML5 Websockets 有点困惑。我看过很多教程，其中很多都有使用不同端口进行连接的不同变体。这些端口是什么意思？

例如，[Adobe使用这个：](http://www.adobe.com/devnet/html5/articles/real-time-data-exchange-in-html5-with-websockets.html)

```
new WebSocket('ws://localhost:1740'); 
```

然后另一个[教程](http://www.websocket.org/aboutwebsocket.html)有这个不需要端口：

```
new WebSocket("ws://www.websockets.org"); 
```

最后第三个教程有一个端口，但它完全不同：

```
new WebSocket("ws://localhost:8080/echo"); 
```

我的问题是，为什么这些会有所不同？我如何知道要连接到哪些端口？另外，我试图做我自己的连接：

```
var ws = new WebSocket("ws://test.ontarget-network.com/"); 
```

但我收到以下错误：`Unexpected response code: 200`

我已经测试并尝试连接到各种其他“端口”（显然不知道我在做什么，输入随机数）并且这个错误会消失，但是，我的代码

```
ws.onopen = function(){
   alert("Connection Established");
}; 
```

不会执行。

我正在尝试完全理解 HTML5 的 Websockets API，以便我可以试验并创建更多动态应用程序。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T04:41:45.117

以下来自[最新的 WebSocket 草案](https://datatracker.ietf.org/doc/html/draft-ietf-hybi-thewebsocketprotocol-17)：

> 默认情况下，WebSocket 协议使用端口 80 进行常规 WebSocket 连接，端口 443 用于通过 TLS [RFC2818] 隧道传输的 WebSocket 连接。

但实际上，您应该能够使用任何未使用的有效端口。只要客户端尝试连接到服务器端脚本为套接字连接打开的相同端口，就应该没问题。

关于端口的快速说明：

*   端口 80 是 HTTP 端口。
*   端口 8080 是备用 HTTP 端口。
*   端口 443 是 HTTPS（即带有 TLS 的 HTTP）端口。
*   Adobe 代码中的端口 1740 似乎是其他服务尚未使用的某个随机端口。

有关预设端口的完整列表，请参阅以下内容：
[http ://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers](http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers)

至于您的“意外响应代码：200”错误，我猜您在客户端使用的 WebSocket URL 未指向有效的服务器端脚本，但如果没有更多信息，这很难评论。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-11-12T18:49:45.140

服务器应该有一个接受 WebSocket 连接的端点。因此，如果该端点是`/echo`您想要连接到：

```
ws://localhost:8080/echo/websocket 
```

如果您在端点之后排除后缀，您将收到`Unexpected response code: 200`错误消息。`/websocket`我也有同样的困惑，[这个链接](http://procbits.com/2013/10/09/connecting-to-a-sockjs-server-from-native-html5-websocket)为我清除了一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T09:44:45.670

我有同样的问题，但为了生存

```
Unexpected response code: 200 
```

您需要使用服务器端脚本来处理 Web 套接字，或者您可以使用**Node.js**构建您的服务器脚本。为了教育起见，您可以尝试构建自己的 websocket 服务器脚本。

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2013-04-06T10:41:35.773

实际上还有其他东西......您无法打开到每个端口的连接，因为每个浏览器中都有一个被阻止端口的列表。我记得在 Michal Zalewski 的“The tangled Web”中看到了完整的端口列表；但是，我认为快速谷歌也会显示这一点。

# python-2.7 - 编辑列表python中的整数

> ID：14554274
> 
> 赞同：0
> 
> 时间：2013-01-28T01:30:39.870
> 
> 标签：python-2.7

最近我一直在做一些 Python 编码，遇到了一个小问题。

是否可以编辑列表中的值，例如将一个添加到现有数字，或者我必须删除它并重新添加它。

例如：

```
X = [1, 2, 3]
X[2] = X[2] + 1 
```

是否可以将该片段编辑为工作状态？

编辑：

好吧，现在越来越烦了……

这是我尝试使用的代码：

```
clickcache = []

def record_user_click(index,keyword,url):
if [index, keyword, url] in clickcache:
    arc = clickcache.index([index, keyword, url]) + 1
    clickcache[arc] += 1
else:
    clickcache.append([index, keyword, url])
    clickcache.append([1]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:36:42.837

你所拥有的可能是最简单的方法，所以使用它：D。您没有删除那里的值，而是更改了值。

此外，`X[2] = X[2] + 1`可以简化为`X[2] += 1`（完全相同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T01:36:50.323

列表在 Python 中是可变的 -[请参见此处](http://docs.python.org/2/library/stdtypes.html#mutable-sequence-types)。因此，您可以就地添加、删除和编辑值。

所以你的代码可以按原样工作。Python 中添加到现有值的快捷方式是：

```
>>> x = [1, 2, 3]
>>> x[2] += 1
>>> x
[1,2,4] 
```

# regex - 正则表达式和解析

> ID：14554275
> 
> 赞同：-1
> 
> 时间：2013-01-28T01:30:40.560
> 
> 标签：regex

我想替换`password=aaa`为`password=bbb`.

我怎样才能使用 RegEx 做到这一点？

我的字符串是：

`string input = "user=fred;password=aaa;server=localhost";`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:35:37.217

由于您没有指定您的语言，我假设您在 Bash 中编写脚本:)

```
$ echo $input | sed s/password=aaa/password=bbb/
user=fred;password=bbb;server=localhost 
```

确切的语法取决于您使用的语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T01:36:13.943

由于您没有指定语言，我只会让我的答案通用。您使用什么功能/方法取决于语言。

正则表达式：`(?<=password=).*?(?=;)`

替换：`newpassword`

这是一个工作示例： http: [//fiddle.re/jn2b](http://fiddle.re/jn2b)

# java - 检查是否设置了方法

> ID：14554276
> 
> 赞同：-1
> 
> 时间：2013-01-28T01:30:52.243
> 
> 标签：java

“用于跟踪是否设置了警报的第四个字段；或者，您可以将警报字段设置为负值（我最喜欢-1）。” 请帮忙，我正在尝试创建一个字段来检查我的方法是否已设置。到目前为止，我已经尝试过 if 和语句，但这可能不是要走的路。我需要检查我的闹钟是否已设置。那么可能需要一个返回值，对吗？

```
public void setAlarm (int hours, int minutes, int seconds)
{
    if(hours minutes seconds > 0) {
        alarmHour = hours;
        alarmMinute = minutes;
        alarmSecond = seconds;
    }
    else {
        System.out.println("Please set the alarm.");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T01:36:31.027

我相信这是有意的。

```
private boolean isSet;

public boolean isAlarmSet()
{
    return isSet;
}

public void setAlarm (int hours, int minutes, int seconds)
{
    alarmHour = hours;
    alarmMinute = minutes;
    alarmSecond = seconds;
    isSet = true;
} 
```

# java - 裁剪具有特定边框颜色和某些背景颜色的矩形 JAVA

> ID：14554277
> 
> 赞同：3
> 
> 时间：2013-01-28T01:31:01.713
> 
> 标签：java, image, opencv, javacv

我有一个里面有一些矩形的图像..我需要的是使用（Java）或JavaCV仅裁剪具有红色边框和白色背景的矩形。

例如，我有一个带有车牌的汽车图像.. 车牌上的每个字母周围都有红色边框和白色背景。

我正在寻找的是在单个图像中裁剪每个字母。字母由每个字母周围的红色边框和白色背景标识。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:09:08.677

你可以试试这个：

1.  找到一组彼此靠近的红色像素
2.  找到所有连接到这些的红色像素，桶填充样式
3.  计算找到的所有像素的边界框
4.  也许检查红色像素是否都靠近边界框的边缘
5.  检查盒子内部是否多为白色

只要您的盒子没有中断并且没有重叠，这应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:50:13.623

1.  将色彩空间更改为 HSV

    ```
     IplImage* imgHSV = cvCreateImage(cvGetSize(img), 8, 3);
     cvCvtColor(img, imgHSV, CV_BGR2HSV); 
    ```

2.  仅获取色调通道：

    ```
    cvSplit( imgHSV, h_plane, s_plane, v_plane, 0 ); 
    ```

3.  进行阈值处理以找到红色：

    ```
    cvInRangeS(h_plane, cvScalar(x, x, x), cvScalar(x, x, x), imgThreshed); 
    ```

    x - HSV 颜色模型中的红色范围。

    在此之后，您将获得白色和黑色图像，其中白色是原始图像上的红色（如您所说，它们应该是矩形）。

4.  然后使用 cvFindContours 函数。

    ```
    int contoursCont = cvFindContours( imgThreshed, storage,&contours,sizeof(CvContour),CV_RETR_LIST,CV_CHAIN_APPROX_SIMPLE,cvPoint(0,0)); 
    ```

5.  要绑定框（矩形）使用（对于每个轮廓）：

    ```
    CvBox2D box = cvMinAreaRect2( @current_contour@,
                            CvMemStorage* storage CV_DEFAULT(NULL)) 
    ```

    要检查背景颜色，请计算其直方图并检查 bin 的值是否仅为 255 和 0（它们是白色和黑色的值）。

希望，这将是有用的！

# opencv - opencv_traincascade 中的无限循环 CvCascadeClassifier::fillPassedSamples

> ID：14554281
> 
> 赞同：3
> 
> 时间：2013-01-28T01:31:48.530
> 
> 标签：opencv, computer-vision, haar-wavelet

所以我一直在玩opencv最新的LBP级联训练器，我一直在无限循环。我相信原因可能是由于我有限的负（背景）图像集造成的。但是程序不应该陷入无限循环......我设法确定了无限循环的位置并对源代码进行了一些修改，不仅避免了无限循环，而且提高了生成的级联文件的检测性能。但是，我仍然希望了解代码的人告诉我这是否是一个正确的修复以及它为什么起作用（或其他原因）：

样本准备：所以我有一个正图像，并使用“createsamples”生成 100 个扭曲/旋转的正样本：

```
opencv_createsamples -img positive1.png -num 100 -bg neg.txt -vec samples.vec -maxidev 50 -w 100 -h 62 -maxxangle 0 -maxyangle 0.6 -maxzangle 0.4 -show 1 
```

我在“负”目录中只有 5 个负样本。然后我的训练命令：

```
opencv_traincascade -data cascade_result -vec samples.vec -bg neg.txt -numStages 10 -numPos 100 -numNeg 200 -featureType LBP -w 100 -h 62 -bt DAB -minHitRate 0.99 -maxFalseAlarmRate 0.2 -weightTrimRate 0.95 -maxDepth 1 
```

请注意，即使“neg.txt”中只有 5 张负片图像，我也设置了 -numNeg 200。后来我发现 numNeg 不需要匹配负图像的数量，因为程序会反复从负图像中“裁剪”出图像片段，以针对正图像进行训练。

在第 4 阶段，我遇到了无限循环，它位于（参见“// !!!!!”）：

```
int CvCascadeClassifier::fillPassedSamples( int first, int count, bool isPositive, int64& consumed )
{
    int getcount = 0;
    Mat img(cascadeParams.winSize, CV_8UC1);
cout << "isPos: "<< isPositive << "; first: "<< first << "; count: "<< count << endl;
    for( int i = first; i < first + count; i++ )
    {
  int inner_count = 0;
  // !!!!! Here is the start of infinite loop
        for( ; ; )
        {
            // !!!!! This is my code to fix the infinite loop:
        /*
        inner_count++;
        if (inner_count > numNeg * 200) // there should be less than 200 crops of negative images per negative image
        {
            cout << "force exit the loop: inner count: "<< inner_count << "; consumed: " << consumed << endl;
            break;
        }
    */
            bool isGetImg = isPositive ? imgReader.getPos( img ) :
                                       imgReader.getNeg( img );
            if( !isGetImg )
                return getcount;
            consumed++;

            featureEvaluator->setImage( img, isPositive ? 1 : 0, i );
            if( predict( i ) == 1 )
            {
                getcount++;
                break;
            }
        }
    }
    return getcount;
} 
```

我认为问题是 imgReader.getNeg(img) 不断从负集裁剪，直到满足“preduct(i) == 1”条件以退出无限循环。我不明白“预测（i）”的作用，但我猜如果负集很小且有限，它将用完“预测（i）”的“各种”图像以返回1......所以循环永远不会结束。一种解决方案是创建负集，这是我接下来要尝试的。另一个更快的解决方案是我在 // !!!!!! 中添加的代码 将尝试次数限制为平均每个负图像 200 次，然后如果没有找到好的候选者，则强制退出循环。

通过此修复，我的训练课程进入第 5 阶段，然后停在那里。我将级联 xml 放在我的应用程序中，它的性能相当不错，比我在第 4 阶段设置停止以避免无限循环要好。

我希望更了解代码的人能进一步启发我们......

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:17:35.977

乔

你可能会遇到和我一样的问题。

问题是因为opencv_traincascade.exe没有正确获取图像宽高或者原始图像宽高小于训练窗口大小。

您可以将以下代码中箭头指向的两行添加到 opencv/appa/traincascade/imagestorage.cpp 以解决问题。

```
bool CvCascadeImageReader::NegReader::nextImg()
{
    Point _offset = Point(0,0);
    size_t count = imgFilenames.size();
    for( size_t i = 0; i < count; i++ )
    {
        src = imread( imgFilenames[last++], 0 );
        if(src.rows<winSize.height || src.cols < winSize.width)   <-----------
            continue;                                             <-----------
        if( src.empty() )
            continue;
.... 
```

希望此解决方案对您有所帮助。

# javascript - angularjs 与 jquery-mobile 的标头不兼容

> ID：14554283
> 
> 赞同：0
> 
> 时间：2013-01-28T01:32:02.553
> 
> 标签：javascript, jquery-mobile, angularjs

我似乎遇到了 jquery-mobile 的 header 和 angularjs 的问题。

问题是我正在尝试放置一个标准的 jquery-mobile 标头。

```
<div data-role="header">
    <a href="index.html" data-icon="delete">Cancel</a>
    <h1>Edit Contact</h1>
    <a href="index.html" data-icon="check">Save</a>
</div> 
```

当标头位于 ng-view 之外时，这将按预期工作。
在 chrome 中，我看到以下 html。

```
<div data-role="header" class="ui-header ui-bar-a" role="banner">
    <a href="index.html" data-icon="delete" class="ui-btn-left ui-btn ui-btn-up-a ui-shadow ui-btn-corner-all ui-btn-icon-left" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="a"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">Cancel</span><span class="ui-icon ui-icon-delete ui-icon-shadow">&nbsp;</span></span></a>
    <h1 class="ui-title" role="heading" aria-level="1">Edit Contact</h1>
    <a href="index.html" data-icon="check" class="ui-btn-right ui-btn ui-btn-up-a ui-shadow ui-btn-corner-all ui-btn-icon-left" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="a"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">Save</span><span class="ui-icon ui-icon-check ui-icon-shadow">&nbsp;</span></span></a>
</div> 
```

当我尝试放入 ng-view 时，angularjs 会在 div 上放置一个 ng-scope，这会产生冲突。这是输出的最终控制

```
<div ng-view>
     <div data-role="header" class="ng-scope">
         <a href="index.html" data-icon="delete">Cancel</a>
         <h1>Edit Contact</h1>
         <a href="index.html" data-icon="check">Save</a>
     </div>
</div> 
```

有没有一种简单的方法可以让两个平台表现得很好？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-28T13:42:50.600

在谷歌群组中找到了这个解决方案

[https://groups.google.com/forum/?fromgroups=#!searchin/angular/jquery$20​​mobile/angular/-BufJRGQ6-M/bYa6AfCSTVYJ](https://groups.google.com/forum/?fromgroups=#!searchin/angular/jquery$20mobile/angular/-BufJRGQ6-M/bYa6AfCSTVYJ)

# javascript - window.onpopstate 似乎过于频繁地触发

> ID：14554285
> 
> 赞同：1
> 
> 时间：2013-01-28T01:32:36.977
> 
> 标签：javascript, html

我正在这个网站上工作： http: [//calebg.me/](http://calebg.me/)

要重现该问题，请单击几个链接：项目、研究、简历、联系方式

`window.history.length`应该是`5`。

按后退按钮将按预期加载“/resume.html”。`window.history.length`还是`5`..

再次按下将重新加载“/resume.html”。`window.history.length`还是`5`……

最后按一次将最终按预期正确加载“/research.html”。`window.history.length`现在是`4`。

如果您继续一直按回主页，您会注意到所有历史记录条目只有在按两次后才会“弹出”。

有没有其他人遇到过这个可以发现我做错了什么？您将在 template.js 文件中找到相关代码：

```
window.onpopstate = function(event) {
    LoadURL(document.location.pathname);
} 
```

我几乎可以肯定我只需要`return true`在回调内部使用一个或一些愚蠢的东西。:P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T04:46:45.477

我也有同样的问题，但使用这个参考解决了。请尝试以下链接一次，

[用于解决页面加载时的弹出状态](https://stackoverflow.com/questions/15896434/window-onpopstate-on-page-load/15897177#15897177)

# gcc - gcc - 如何从静态库输出（.a）中删除所有绝对路径

> ID：14554287
> 
> 赞同：4
> 
> 时间：2013-01-28T01:32:49.997
> 
> 标签：gcc, static-libraries

我正在为 ARM 使用 GCC（[Red Suite 4 NXP](http://www.code-red-tech.com/red-suite-4-nxp.php)）。我正在编译用于最终应用程序的静态库文件 (.a)。我需要配置项目，以便任何开发人员都可以生成完全相同的静态库输出。（这主要是为了让新开发人员可以验证他们的设置是否正确。）我有两个项目副本（来自 SVN 的两个结帐）。当我使用每个构建时，我注意到静态库 .a 输出文件中的一些绝对路径信息。这意味着 SVN 会检测到变化。我已经在使用 ar -D （确定性）选项。是否有任何其他选项可以删除路径信息？我尝试了 gcc -s 但这不起作用（看来这仅适用于最终可执行文件，而不是库）

我不知道绝对路径在 .a 中的位置/原因，但如果有人能指出我正确的方向，我可以提供更多信息。

我查看了 strip 实用程序手册页（尚未尝试过），这会删​​除此路径信息吗？

另外，我正在使用 Red Suite 来管理项目，所以我正在尝试以 Red Suite 的方式做事（并让它做它的事）。但是，如果我需要调整 gcc 或 ar 选项，我确实知道该怎么做。我只是不知道要更改什么选项。

这是构建控制台输出。这会导致我的项目的绝对路径包含在生成的 .a 中。这就是我要解决的问题。

```
**** Build of configuration Release for project lib_touch ****

make -j all 
Building file: C:/Users/my_user_name/Documents/My Project Verification build/src/touch/Touch.c
Building file: C:/Users/my_user_name/Documents/My Project Verification build/src/touch/TouchCalibration.c
Building file: C:/Users/my_user_name/Documents/My Project Verification build/src/touch/TouchPoint.c
Building file: C:/Users/my_user_name/Documents/My Project Verification build/src/touch/TouchEventQueue.c
Invoking: MCU C Compiler
Invoking: MCU C Compiler
arm-none-eabi-gcc -D__REDLIB__ -DNDEBUG -D__CODE_RED -D__USE_CMSIS=CMSISv2p00_LPC177x_8x -I"C:\Users\my_user_name\Documents\My Project Verification build\src\build\RedSuite4NXP\CMSISv2p00_LPC177x_8x\inc" -I../../../../board -I../../../../board/lpc1788 -I../../../../communication -I../../../../events -I../../../../geometry -I../../../../graphics -I../../../../hmilogic/include -I../../../../sound -I../../../../util -O3 -Wall -Werror -c -fmessage-length=0 -fno-builtin -ffunction-sections -fdata-sections -std=gnu99 -mcpu=cortex-m3 -mthumb -MMD -MP -MF"touch/Touch.d" -MT"touch/Touch.d" -o"touch/Touch.o" "C:/Users/my_user_name/Documents/My Project Verification build/src/touch/Touch.c"
arm-none-eabi-gcc -D__REDLIB__ -DNDEBUG -D__CODE_RED -D__USE_CMSIS=CMSISv2p00_LPC177x_8x -I"C:\Users\my_user_name\Documents\My Project Verification build\src\build\RedSuite4NXP\CMSISv2p00_LPC177x_8x\inc" -I../../../../board -I../../../../board/lpc1788 -I../../../../communication -I../../../../events -I../../../../geometry -I../../../../graphics -I../../../../hmilogic/include -I../../../../sound -I../../../../util -O3 -Wall -Werror -c -fmessage-length=0 -fno-builtin -ffunction-sections -fdata-sections -std=gnu99 -mcpu=cortex-m3 -mthumb -MMD -MP -MF"touch/TouchCalibration.d" -MT"touch/TouchCalibration.d" -o"touch/TouchCalibration.o" "C:/Users/my_user_name/Documents/My Project Verification build/src/touch/TouchCalibration.c"
Invoking: MCU C Compiler
Invoking: MCU C Compiler
arm-none-eabi-gcc -D__REDLIB__ -DNDEBUG -D__CODE_RED -D__USE_CMSIS=CMSISv2p00_LPC177x_8x -I"C:\Users\my_user_name\Documents\My Project Verification build\src\build\RedSuite4NXP\CMSISv2p00_LPC177x_8x\inc" -I../../../../board -I../../../../board/lpc1788 -I../../../../communication -I../../../../events -I../../../../geometry -I../../../../graphics -I../../../../hmilogic/include -I../../../../sound -I../../../../util -O3 -Wall -Werror -c -fmessage-length=0 -fno-builtin -ffunction-sections -fdata-sections -std=gnu99 -mcpu=cortex-m3 -mthumb -MMD -MP -MF"touch/TouchEventQueue.d" -MT"touch/TouchEventQueue.d" -o"touch/TouchEventQueue.o" "C:/Users/my_user_name/Documents/My Project Verification build/src/touch/TouchEventQueue.c"
Finished building: C:/Users/my_user_name/Documents/My Project Verification build/src/touch/Touch.c
arm-none-eabi-gcc -D__REDLIB__ -DNDEBUG -D__CODE_RED -D__USE_CMSIS=CMSISv2p00_LPC177x_8x -I"C:\Users\my_user_name\Documents\My Project Verification build\src\build\RedSuite4NXP\CMSISv2p00_LPC177x_8x\inc" -I../../../../board -I../../../../board/lpc1788 -I../../../../communication -I../../../../events -I../../../../geometry -I../../../../graphics -I../../../../hmilogic/include -I../../../../sound -I../../../../util -O3 -Wall -Werror -c -fmessage-length=0 -fno-builtin -ffunction-sections -fdata-sections -std=gnu99 -mcpu=cortex-m3 -mthumb -MMD -MP -MF"touch/TouchPoint.d" -MT"touch/TouchPoint.d" -o"touch/TouchPoint.o" "C:/Users/my_user_name/Documents/My Project Verification build/src/touch/TouchPoint.c"

Finished building: C:/Users/my_user_name/Documents/My Project Verification build/src/touch/TouchEventQueue.c
Finished building: C:/Users/my_user_name/Documents/My Project Verification build/src/touch/TouchCalibration.c

Finished building: C:/Users/my_user_name/Documents/My Project Verification build/src/touch/TouchPoint.c

Building target: lib_touch.a
Invoking: MCU Archiver
arm-none-eabi-ar -rD "lib_touch.a"  ./touch/Touch.o ./touch/TouchCalibration.o ./touch/TouchEventQueue.o ./touch/TouchPoint.o   
c:\code_red\RedSuiteNXP_4.3.0_1033\redsuite\tools\bin\arm-none-eabi-ar.exe: creating lib_touch.a
Finished building target: lib_touch.a

make --no-print-directory post-build
Performing post-build steps
arm-none-eabi-size "lib_touch.a" ; cp "lib_touch.a" "../../../../lib/lib_touch.a"; # arm-none-eabi-objdump -h -S "lib_touch.a" >"lib_touch.lss"
   text    data     bss     dec     hex filename
   1864       0     156    2020     7e4 Touch.o (ex lib_touch.a)
    576       0       0     576     240 TouchCalibration.o (ex lib_touch.a)
    320       0       0     320     140 TouchEventQueue.o (ex lib_touch.a)
     96       0       0      96      60 TouchPoint.o (ex lib_touch.a) 
```

更新：更多信息

我做了更多的挖掘，看起来完整的文件路径位于字符串常量的前面。.a 文件中的路径数据显示

```
C:/Users/my_user_name/Documents/My Project Verification build/src/touch/Touch.c.TouchIdleTimer 
```

我在文件 Touch.c 中有一个字符串文字“TouchIdleTimer”。这是原因吗？我将如何删除路径部分，或者有可能吗？TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:44:27.857

**更新**

通过这个对GCC 的[回答](https://stackoverflow.com/a/4156166/1085891)[： static linking only some libraries](https://stackoverflow.com/questions/4156055/gcc-static-linking-only-some-libraries)

> 注意：如果您使用 .so 文件的完整路径，它将再次动态链接。

* * *

[Code Red IDE v4 中增强的静态库支持：创建静态库项目](http://support.code-red-tech.com/CodeRedWiki/StaticLibrarySupportv4)

环顾四周，我看到了有关`-fPIC`or的建议`-fpic`。[在此评论线程](http://www.techytalk.info/c-cplusplus-library-programming-on-linux-part-one-static-libraries/comment-page-1/#comment-4692)中建议您回答与您类似的问题。

[3.2 共享库和静态库](http://www.network-theory.co.uk/docs/gccintro/gccintro_25.html)提供了编译共享库和静态库的一个很好的细分。

您说静态不是共享库，但以防万一：[如何编写共享库](http://www.akkadia.org/drepper/dsohowto.pdf)

# c++ - 将函数标记为虚拟会导致编译器错误，unique_ptr

> ID：14554288
> 
> 赞同：7
> 
> 时间：2013-01-28T01:33:05.260
> 
> 标签：c++, templates, c++11, instantiation, overload-resolution

我有一个包装矢量的模板类。我正在尝试将 unique_ptrs 存储在此类中，并且效果很好。但是，当我将该`void add(const T& elem)`函数标记为虚拟时，我的编译器 (clang) 告诉我，我正在为 unique_ptr 进行“调用隐式删除的复制构造函数”。

我知道 unique_ptrs 不能被复制，所以这就是我创建该`void add(T&& elem)`函数的原因。我只是不知道为什么将另一个添加函数标记为虚拟会导致编译器错误。

谢谢你的时间。

```
#include <iostream>
#include <vector>
#include <memory>

using namespace std;

template <typename T>
class ContainerWrapper {
private:
    vector<T> vec;
public:
    ContainerWrapper() : vec() {

    }

    //Marking this as virtual causes a compiler error
    void add(const T& elem) {
        vec.push_back(elem);
    }

    void add(T&& elem) {
        vec.push_back(std::move(elem));
    }

    T removeLast() {
        T last = std::move(vec.back());
        vec.pop_back();
        return last;
    }
};

int main() {
    ContainerWrapper<unique_ptr<string>> w;
    w.add(unique_ptr<string>(new string("hello")));

    unique_ptr<string> s = w.removeLast();

    cout << *s << endl;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T01:41:24.337

这很可能是因为 ContainerWrapper 是一个模板。使用模板，只要您不调用它们，编译器通常甚至不会检查成员函数。但是，将其标记为虚拟会强制该功能存在（您甚至可能会遇到链接错误）。

您可以看看这篇文章：[模板类的虚拟成员函数何时实例化？](https://stackoverflow.com/questions/3483932/when-the-virtual-member-functions-of-a-template-class-instantiated).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T12:41:52.693

这里的问题是`std::unique_ptr`它的复制构造函数标记为`=delete`. 这意味着重载成员函数`vec.push_back(elem)`内部的调用在使用. 一旦该成员函数被实例化，编译器就会意识到这一点。`add(T const&)``std::unique_ptr`

该[标准在](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)**14.7.1 隐式实例化 [temp.inst]**中有 2 个相关引用：

> 6 如果重载决策过程可以在不实例化类模板定义的情况下确定要调用的正确函数，则未指定实例化是否实际发生。
> 
> 10 [...] 如果虚拟成员函数不会被实例化，则未指定实现是否隐式实例化类模板的虚拟成员函数。[...]

第 6 条规定 - 没有`virtual`关键字 - 编译器被允许但不需要实例化两者`add(T const&)`，并且`add(T&&)`为了解决哪个重载是最佳匹配。gcc 4.7.2 和 Clang 3.2 都不需要实例化，因为它们碰巧推断出右值引用总是比左值引用更适合临时对象。

第 10 条规定 - 即使使用`virtual`关键字 - 编译器也被允许但不需要实例化`add(T const&)`，`add(T&&)`以便确定哪个重载是最佳匹配。gcc 4.7.2 和 Clang 3.2 都实例化了这两个成员函数，尽管它们都可以推断出左值重载永远不会是更好的匹配。

请注意，如果您`ContainerWrapper`使用嵌套的常规类`typedef unique_ptr<string> T;`，则 gcc 和 Clang 都会生成带有或不带有`virtual`关键字的错误，因为它们必须为两个成员函数生成代码。这不会被 SFINAE 删除，因为在替换推导参数期间不会发生错误。

**结论**：这**不是错误**，而是**实施质量**问题。

# python - 在python3中将一个类实例化为一个未知的变量名

> ID：14554289
> 
> 赞同：1
> 
> 时间：2013-01-28T01:33:08.677
> 
> 标签：python, class, dynamic, python-3.x

我试图找到一种方法来从未知`nodeName`领域中的未知实例化一个类（不使用`eval()`）。

我想做类似这样的伪代码假设`node`是 a`dom node`在 a 中`dom tree`：

```
# create dom and get a node

class SuperNode(node):
    def __init__(self):
        # do narly node stuff 
```

但我想根据节点名称创建类，这将是未知的。

```
makeInstance(SuperNode, node.nodeName, node) 
```

为了澄清， node.nodeName 是我想成为实例变量名的节点的名称。因此，如果`node.nodeName = 'clarence'`它像这样实例化它（我会担心稍后按字母顺序排列节点名称以符合类命名）：

```
clarence = SuperNode(node) ''' where node is the node specified 
                               by the name clarence''' 
```

如果名称已知，构造函数将是这样的：

```
makeInstance(SuperNode, 'clarence', node) ''' where clarance will be the 
                                              instantiated variable of 
                                              class SuperNode''' 
```

这类似于使用 setattrib 设置属性：

```
setattr(class instance, attribute, value) 
```

其中属性可以在变量中定义。

如果存在如何访问这些名称的问题，它们将在另一个类中定义，然后可以检查整个 dom。

有没有办法做到这一点？

一个例子是狗的 XML 文件，包括狗名、品种、生日等元素。每只狗将是我的初始 dom 类下的一个超节点类，所有属性“神奇地”设置在每个超节点实例中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:19:45.813

我终于想到了我需要做的事情，可悲的是，答案已经在上面了（有点谦虚总是好的）。包装对象时，只需使用`setattr`，如下所示：

```
>>> class SuperClass():
...     def print_hello(self):
...         print('Hello, world!')

>>> class WrapperClass():
...     pass

>>> wrapper = WrapperClass()
>>> setattr(wrapper, 'clarence', SuperClass())

>>> wrapper.clarence.print_hello()
Hello, world!
>>> 
```

实际上，我将在 wrapper-type 类中使用代码，因此它将是：

```
setattr(self, 'clarence', SuperClass()) 
```

如果要在全局范围内执行此操作，请使用 globals() 分配值，如下所示：

```
>>> globals()['clarence'] = SuperClass()
>>> clarence.print_hello()
Hello, world! 
```

# android - Sherlock 选项菜单项没有响应

> ID：14554290
> 
> 赞同：0
> 
> 时间：2013-01-28T01:33:16.783
> 
> 标签：android, actionbarsherlock

这是一个影响 3.0 之前的平台的问题，即当 Sherlock 充当代理来提供操作栏菜单项时。

我有一个包含两个片段的片段活动，每个片段都有自己的一组选项菜单。当活动开始时，第一个片段选项卡会显示出来，并且它的菜单项正常工作。但是，我第一次切换到另一个选项卡时，它的菜单项没有响应。如果我切换回第一个选项卡并再次选择另一个选项卡，它们就会开始正常触发。

看起来这是一个已知问题。看看[这里](https://github.com/JakeWharton/ActionBarSherlock/issues/521)的讨论。

我现在的解决方法是检测第一次选择第二个选项卡并以编程方式切换回第一个选项卡。这会强制用户再次选择第二个选项卡，但从那时起，只要用户停留在该活动中，它就可以正常工作。

我想知道是否有其他人找到了解决此问题的更优雅的解决方案。谢谢！

第一个片段：

```
 @Override
      public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
      moveMenuItem   = menu.add(Flashum.MENU_GROUP_MULTI, Flashum.MOVE_FLASHES_ID, 0, R.string.move_flashes);
      cloneMenuItem  = menu.add(Flashum.MENU_GROUP_MULTI, Flashum.CLONE_FLASHES_ID, 0, R.string.clone_flashes);
      deleteMenuItem = menu.add(Flashum.MENU_GROUP_MULTI, Flashum.DELETE_FLASHES_ID, 0, R.string.delete_flashes);
      moveMenuItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
      moveMenuItem.setIcon(R.drawable.move2red);
      cloneMenuItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
      cloneMenuItem.setIcon(R.drawable.hard_drive_clone);
      deleteMenuItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
      deleteMenuItem.setIcon(R.drawable.delete);
   } 
```

第二个片段：

```
 @Override
      public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
      saveMenuItem = menu.add(Flashum.MENU_GROUP_SAVE, Flashum.SAVE_CHANGES_ID, 0, R.string.save_changes);
      saveMenuItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
      saveMenuItem.setIcon(R.drawable.save);
      menu.setGroupVisible(Flashum.MENU_GROUP_SAVE, true);

      recMenuItem = menu.add(Flashum.MENU_GROUP_REC, Flashum.RECORD_ID, 0, R.string.record);
      recMenuItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
      recMenuItem.setIcon(R.drawable.microphonehot);
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:26:13.913

尝试在片段中充气之前清除菜单。因此，在 onCreateOptionsMenu 方法中的片段中调用 menu.clear(); 在开始，然后膨胀你的菜单。像这样的东西：

```
 @Override
  public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {

  super.onCreateOptionsMenu(menu, inflater); 
  menu.clear();

  saveMenuItem = menu.add(Flashum.MENU_GROUP_SAVE, Flashum.SAVE_CHANGES_ID, 0, R.string.save_changes);
  saveMenuItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
  saveMenuItem.setIcon(R.drawable.save);
  menu.setGroupVisible(Flashum.MENU_GROUP_SAVE, true);

  recMenuItem = menu.add(Flashum.MENU_GROUP_REC, Flashum.RECORD_ID, 0, R.string.record);
  recMenuItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
  recMenuItem.setIcon(R.drawable.microphonehot); 
```

}

在你的两个片段中尝试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T11:56:27.057

与其检测何时选择了第二个选项卡，不如使用延迟后的方法在 Activity 的 onCreate 中以编程方式切换片段。例如，我有 3 个片段，我以相反的顺序（2、1、0）切换它们，它会在 Activity 开始时用漂亮的动画欺骗你的用户：

```
if (android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.HONEYCOMB){
  mIndicator.setCurrentItem(2);
  mIndicator.postDelayed(new Runnable() {
public void run() {
  mIndicator.setCurrentItem(1);
  mIndicator.postDelayed(new Runnable() {
    public void run() {
      mIndicator.setCurrentItem(0);
  }}, 100);
}}, 100);
} 
```

# jqgrid - jqgrid 通过超链接获取记录信息

> ID：14554291
> 
> 赞同：0
> 
> 时间：2013-01-28T01:33:33.400
> 
> 标签：jqgrid

我有一个表格，表格中有以下数据：

```
ID   Course
2    Math
5    English
7    Science
9    History
12   Gym 
```

我喜欢的是 ID 和 Course 的值是超链接，因此它们是可点击的。当用户单击给定 ID 时，我希望有一个显示给定 ID 的警报。当用户点击课程时，我希望有一个同时显示 ID 和课程的警报。

我不知道该怎么做。我知道有一个showlink

但不确定如何将所有内容联系在一起。

查看stackoverflow问题，我可以执行以下操作：

```
 var grid = jQuery('#list');
    var sel_id = grid.jqGrid('getGridParam', 'selrow');
    var myCellData = grid.jqGrid('getCell', sel_id, 'MyColName'); 
```

其中 MyColName 将是列的名称，但不确定如何将其完全绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:27:36.293

您可以通过多种方式解决问题。格式化程序`"showlink"`旨在创建标准的 HTML 链接`<a>`，而不是使用 JavaScript`click`事件处理程序。您可以使用格式化程序`"showlink"`（请参阅我的非常[旧的答案](https://stackoverflow.com/a/4391786/315935)）来调用您的自定义 JavaScript 代码，但有更好的实现方法。例如，您可以使用[自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter)或使用`formatter: "dynamicLink"`您可以在[此处](https://github.com/OlegKi/jqGrid-plugins/blob/master/jQuery.jqGrid.dynamicLink.js)找到的以及我[在此处](https://stackoverflow.com/a/9048483/315935)描述的。

我现在建议您的最好和最简单的方法是使用**伪链接**。有关详细信息，请参阅[答案](https://stackoverflow.com/a/13765086/315935)或[其他](https://stackoverflow.com/a/14537512/315935)答案。

# logic - 手动评估逻辑表达式

> ID：14554298
> 
> 赞同：0
> 
> 时间：2013-01-28T01:34:24.880
> 
> 标签：logic, boolean-logic, boolean-expression

我不确定这是否属于这里，但有人告诉我评估 (00110101 ^ (10010101 v 10100000))

我的答案看起来如何？我想知道我该怎么做？

我正在考虑将这些值中的每一个都视为一个变量，例如 (a ^ (bvc)) 然后制作一个真值表？那是我应该做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T01:40:43.750

对于按位逻辑，只需逐位计算每个表达式。取表达式 b 和 c 的第一位，然后将它们与 a 的第一位相与​​。然后移动到第二位，依此类推。您应该得到一个与起始字符串长度相等的位串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T01:48:04.247

先做括号里的东西：

```
 10010101
|  10100000
-----------
   101..... 
```

然后将结果与第一个数字相加：

```
 00110101
&  101.....
-----------
   001..... 
```

# postgresql - Postgres 查询优化（强制索引扫描）

> ID：14554302
> 
> 赞同：45
> 
> 时间：2013-01-28T01:34:47.837
> 
> 标签：postgresql, indexing, query-optimization, postgresql-9.1, postgresql-performance

以下是我的查询。我试图让它使用索引扫描，但它只会 seq 扫描。

顺便说一下，该`metric_data`表有 1.3 亿行。该`metrics`表有大约 2000 行。

`metric_data`表列：

```
 metric_id integer
, t timestamp
, d double precision
, PRIMARY KEY (metric_id, t) 
```

如何让这个查询使用我的 PRIMARY KEY 索引？

```
SELECT
    S.metric,
    D.t,
    D.d
FROM metric_data D
INNER JOIN metrics S
    ON S.id = D.metric_id
WHERE S.NAME = ANY (ARRAY ['cpu', 'mem'])
  AND D.t BETWEEN '2012-02-05 00:00:00'::TIMESTAMP
              AND '2012-05-05 00:00:00'::TIMESTAMP; 
```

解释：

```
Hash Join  (cost=271.30..3866384.25 rows=294973 width=25)
  Hash Cond: (d.metric_id = s.id)
  ->  Seq Scan on metric_data d  (cost=0.00..3753150.28 rows=29336784 width=20)
        Filter: ((t >= '2012-02-05 00:00:00'::timestamp without time zone)
             AND (t <= '2012-05-05 00:00:00'::timestamp without time zone))
  ->  Hash  (cost=270.44..270.44 rows=68 width=13)
        ->  Seq Scan on metrics s  (cost=0.00..270.44 rows=68 width=13)
              Filter: ((sym)::text = ANY ('{cpu,mem}'::text[])) 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-28T04:50:36.263

出于**测试**目的，您可以通过“禁用”顺序扫描来强制使用索引 - 最好只在当前会话中：

```
SET enable_seqscan = OFF; 
```

不要**在**生产服务器上使用它。[手册中的详细信息在这里。](https://www.postgresql.org/docs/current/runtime-config-query.html#RUNTIME-CONFIG-QUERY-ENABLE)

我引用了“禁用”，因为您实际上无法禁用顺序表扫描。但是现在任何其他可用选项都更适合 Postgres。这将证明`(metric_id, t)` *可以*使用多列索引 - 只是不如前导列上的索引有效。

通过将您`PRIMARY KEY`（以及用于在幕后实现它的索引）中的列顺序切换到`(t, metric_id)`. 或者创建一个带有反向列的*附加索引。*

*   [复合索引是否也适用于第一个字段的查询？](https://dba.stackexchange.com/a/27493/3684)

您通常不必通过手动干预来强制执行更好的查询计划。如果设置 `enable_seqscan = OFF`导致更好的*计划*，那么您的数据库中可能有问题。考虑这个相关的答案：

*   [防止 PostgreSQL 有时选择错误的查询计划](https://stackoverflow.com/questions/8228326/keep-postgresql-from-sometimes-choosing-a-bad-query-plan/8229000#8229000)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T04:00:47.517

在这种情况下，您不能强制执行索引扫描，因为它不会使其更快。

您当前有索引 on `metric_data (metric_id, t)`，但服务器无法利用此索引进行查询，因为它需要能够`metric_data.t`仅通过（不带`metric_id`）进行区分，但没有这样的索引。服务器可以在复合索引中使用子字段，但只能从头开始。例如，search by`metric_id`将能够使用此索引。

如果您在 上创建另一个索引`metric_data (t)`，您的查询将使用该索引并且工作得更快。

此外，您应该确保在`metrics (id)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:52:38.493

看来您缺少合适的 FK 约束：

```
CREATE TABLE metric_data
( metric_id integer
, t timestamp
, d double precision
, PRIMARY KEY (metric_id, t)
, FOREIGN KEY metrics_xxx_fk (metric_id) REFERENCES metrics (id)
) 
```

并在表指标中：

```
CREATE TABLE metrics
( id INTEGER PRIMARY KEY
...
); 
```

还要检查您的统计数据是否足够（并且足够细粒度，因为您打算选择 0.2% 的 metrics_data 表）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-21T17:48:07.450

您是否尝试过使用：

S.NAME = ANY (VALUES ('cpu'), ('mem')) 而不是 ARRAY

喜欢[这里](https://www.datadoghq.com/blog/100x-faster-postgres-performance-by-changing-1-line/)

# entity-framework - 配置实体框架以加载预定义的对象

> ID：14554303
> 
> 赞同：3
> 
> 时间：2013-01-28T01:35:03.077
> 
> 标签：entity-framework, singleton

我有这门课

```
public class Status
{
    private string status;
    public string StatusName
    {
        get
        {
            return status;
        }
    }
    private Status (string _status)
    {
        status = _status;
    }
    public static readonly Status Open = new Status("Open");
    public static readonly Status Closed = new Status("Closed");
} 
```

使用 Code First，我可以将 EF 配置为加载其中一个预定义对象（打开、关闭）而不是尝试创建一个新对象吗？
还是有更好的方法来完成类似的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:40:51.723

当前的 EF 版本不提供任何挂钩来替换对象实现（除非您下载源代码并尝试自己实现它）。这意味着 EF 将始终创建自己的状态，并且能够做到这一点还需要您的`Status`类来匹配其规则。我不知道你为什么需要这个，但如果你真的需要为你的状态总是相同的对象实例，你可以破解它。

首先你需要`Status`为 EF 修改你的类：

```
public class Status{
    // EF needs access to your property
    public string StatusName { get; private set; }

    // EF needs parameterless constructor because it will create instances
    private Status() {}

    private Status (string status) {
        StatusName = status;
    }

    public static readonly Status Open = new Status("Open");
    public static readonly Status Closed = new Status("Closed");
} 
```

现在您需要将`Status`EF 创建的原始文件替换为您自己的：

```
public Context() : base() {
    var objectContext = ((IObjectContextAdapter)this).ObjectContext;
    objectContext.ObjectMaterialized += OnObjectMaterialized;
}

private void OnObjectMaterialized(object sender, ObjectMaterializedEventArgs args) {
    var objectContext = (ObjectContext)sender;
    var entity = args.Entity as Entity;
    if (entity != null) {
        switch (entity.Status.StatusName) {
            case "Open":
                entity.Status = Status.Open;
                break;
            case "Closed":
                entity.Status = Status.Closed;
                break;
        }

        // This is necessary because previous code made your object modified
        objectContext.DetectChanges();
        var entry = objectContext.ObjectStateManager.GetObjectStateEntry(entity);
        entry.AcceptChanges();
    }
} 
```

这是丑陋的黑客，但如果你真的需要这个，你将不得不做类似的事情。

# android - 从 Web 浏览器访问位置链接时，使用对话框弹出两次完成操作

> ID：14554308
> 
> 赞同：1
> 
> 时间：2013-01-28T01:35:33.243
> 
> 标签：android, browser, android-intent, web

**[重现步骤]：**

1.  创建一个活动

2.  插入要在浏览器中打开的网址

3.  现在，我们打开的网页中还有一个链接。

4.  在网页中打开 Location 链接，然后会弹出 Complete action using 对话框

5.  使用对话框从完成操作中选择浏览器

**【实际结果】：**

5.  在第 5 步之后再次弹出 Complete action using 对话框。

**【预期结果】：**

5.  网页中的给定链接应在浏览器中启动。

**[再现率]：**

尝试次数：10 次。失败：10次。

请让我知道问题浏览器、服务器或我的活动应用程序在哪里？提前致谢..

# java - 在 Android 上从 IP 解析主机名

> ID：14554310
> 
> 赞同：2
> 
> 时间：2013-01-28T01:35:43.133
> 
> 标签：java, android, network-programming, android-networking

我有一个长期以来一直在处理的问题......我正在创建一个 Android 应用程序，它将获取与 Android 设备位于同一子网中的设备的信息。例如，我给它 ip 地址 192.168.0.3 它显示它的主机名是 xxxx 和 MAC 地址 xx:xx:xx... 。

我设法读取了 MAC 地址，但我的主机名失败了……我试过了

```
InetAddress.getHostname()
InetAddress.getCanonicalHostName() 
```

它总是返回一个IP地址......我也尝试过jmDNS库，但它只是返回“ipaddress.local”

如何获取网络中设备的 NETBIOS 名称？请帮忙 ：）

# oop - 在 MVC 中，控制器是对象还是函数？

> ID：14554315
> 
> 赞同：0
> 
> 时间：2013-01-28T01:36:26.050
> 
> 标签：oop, model-view-controller

我正在学习 Symfony2，[关于控制器的部分文档](http://symfony.com/doc/current/book/controller.html#a-simple-controller)指出，控制器对象上的方法实际上是控制器，而对象更多的是控制器容器。

哪个部分具体称为控制器？我是 MVC 和 OOP 的新手，所以我只是想确保我做对了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:42:42.563

在您分享的示例页面中，“HelloController 类”是控制器，其功能是控制器“方法”。

好的，他们将默认方法 indexAction() 称为控制器。

在这个 MVC 架构（以及大多数其他架构，如果不是全部）中，“索引”方法是在请求该控制器时调用的默认方法（函数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T01:55:03.140

该页面实际上描述了Symfony2 创建者认可的*约定。*

在一些 MVC 框架中（尤其是在 Java 中）控制器是通过一个控制器的一个类约定来实现的，例如：

```
class ListContactsController {
    public function start() {
      // query db...
      return ...;
    }
}

class AddContactController {
    public function start($name, $details) {
      // insert into db...
      return ...;
    }
} 
```

请注意，每个控制器类都有一个方法 start() 定义控制器实际执行的操作

在其他 MVC 框架（如 Symfony2 或 cake-php）中，控制器通过每个控制器一个方法的约定实现，为方便起见将它们组合在一起，例如：

```
class ContactsController {
    public function list() {
      // query db...
      return ...;
    }

    public function add($name, $details) {
      // insert into db...
      return ...;
    }
} 
```

这里的约定假设每个控制器都实现为一个方法，而不是一个具有特定方法（如 start()）的单独类

编辑：考虑这种差异的另一种方式是：

*   每个控制器一个类假设有一个控制器实例（可能保持内部状态），并且当用户与视图交互时，视图通过回调（即控制器类中的方法）与该控制器实例通信。
*   每个控制器一个方法假设任何状态都包含在传递给方法的参数中，并且当用户与视图交互时，视图正在与单独的控制器/动作进行通信。这些控制器被视为独立的概念。

# database - 在代码后面插入多对多数据库？

> ID：14554321
> 
> 赞同：1
> 
> 时间：2013-01-28T01:36:55.083
> 
> 标签：database, tsql

我有 4 张桌子

```
命令
物品
顾客
order_items
```

在`order_items`我有`item_id`& `order_id`as many to many 关系。谁能解释如何做正确的插入语句？

我的想法...当按钮 add_order 被点击时，我认为我应该`item_id`从数据库中获取并将 'order_id' 插入`item_id`到 table 中`order_items`。或者它是自动完成的，当我将新的`order`插入数据库时​​？如果有人能抽出几分钟时间，我需要一些步行槽。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T01:46:47.993

它不是自动完成的。您需要使用存储过程或触发器*一次性*完成此操作。根据任何属性约束，必须按特定顺序完成。在您的情况下，您需要插入`order`, 然后`order_items`.

# type-conversion - Arduino 将 DEC 转换为 int

> ID：14554326
> 
> 赞同：2
> 
> 时间：2013-01-28T01:37:35.693
> 
> 标签：type-conversion, arduino

我有[DHT11 温度](http://playground.arduino.cc/Main/DHT11Lib)传感器，我正在尝试将湿度转换为可用于比较数据的数字。

如果我使用：

```
Serial.print("Humidity (%): ");
Serial.println((int)DHT11.humidity, DEC);
//Prints: 38 for the humidity 
```

但是，如果我使用

```
 int tempHum;
  tempHum = ((int)DHT11.humidity, DEC);
  Serial.print("Humidity (%): ");
  Serial.println(tempHum);
  //Always Prints: 10 
```

我怎样才能将湿度变成序列号以外的准确数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:51:08.687

下次您发布时，请添加指向您正在使用的库的链接 - 这样我们肯定会谈论相同的内容。你还没有发布你所有的代码，但是看着[这个](http://playground.arduino.cc/Main/DHT11Lib)，在我看来，这条线`tempHum = ((int)DHT11.humidity, DEC);`会导致你的问题。

如果您尝试`tempHum = DHT11.humidity`改用，您可能会得到更好的结果。这是因为您正在执行的转换和添加`DEC`参数似乎是 println 函数，因此底层系统知道它应该打印哪种类型。

当然，你们都需要记住做 a`int retval = DHT11.read(DHT11PIN)`并检查您的 retval 是否没有出错 - 这应该可以正常工作。

# android - getWritableDatabase 方法中的“Java.lang.NullPointerException”异常

> ID：14554327
> 
> 赞同：1
> 
> 时间：2013-01-28T01:37:45.847
> 
> 标签：android, sqlite, exception, nullpointerexception, getwritabledatabase

我正在尝试构建一个将一些信息存储在 SQLite 表中的小型应用程序。但我总是在 getWritableDatabase 方法中收到“Java.lang.NullPointerException”异常。谁能帮我？所有代码都在下面。

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.dbtest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.dbtest.Principal"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

活动（activity_principal.xml）：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Principal" 
    android:orientation="horizontal">
</LinearLayout> 
```

字符串.XML：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">DBTest</string>
    <string name="menu_settings">Config</string>
</resources> 
```

爪哇：

```
package com.example.dbtest;

public class Prova {

    String _codigo;
    String _nome;
    String _campeonato_codigo;
    String _campeonato_nome;

    public Prova(){
    }

    public Prova(String _codigo, String _nome, String _campeonato_codigo, String _campeonato_nome) {
        this._codigo = _codigo;
        this._nome = _nome;
        this._campeonato_codigo = _campeonato_codigo;
        this._campeonato_nome = _campeonato_nome;
        }

    public String get_codigo(){ return this._codigo; }
    public void set_codigo(String _codigo){ this._codigo = _codigo; }

    public String get_nome(){ return this._nome; }
    public void set_nome(String _nome){ this._nome = _nome; }

    public String get_campeonato_codigo(){ return this._campeonato_codigo; }
    public void set_campeonato_codigo(String _campeonato_codigo){ this._campeonato_codigo = _campeonato_codigo; }

    public String get_campeonato_nome(){ return this._campeonato_nome; }
    public void set_campeonato_nome(String _campeonato_nome){ this._campeonato_nome = _campeonato_nome; }

}

package com.example.dbtest;

import android.app.Activity;
import android.os.Bundle;

public class Principal extends Activity {

    DownloadProva DP = new DownloadProva();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        DP.baixarProva();

        setContentView(R.layout.activity_principal);

    };

}

package com.example.dbtest;

import android.app.Activity;

public class DownloadProva extends Activity {

    public String strNomeProva = "";

    public void baixarProva() {

        String strCampeonatoCodigo = "1";
        String strCampeonatoNome = "dois";
        String strEtapaCodigo = "3";
        String strEtapaNome = "quatro";

        DatabaseHelper mydb = new DatabaseHelper(getBaseContext());

        mydb.addProva(new Prova( strCampeonatoCodigo, strCampeonatoNome, strEtapaCodigo, strEtapaNome));

    };

};

package com.example.dbtest;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHelper extends SQLiteOpenHelper {

    private static final int DATABASE_VERSION = 1;
    private static final String DATABASE_NAME = "dbtest.db";

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    public static final String TABLE_NAME_PROVA = "prova";
    public static final String COLUMN_NAME_PROVA_CODIGO                 = "codigo";
    public static final String COLUMN_NAME_PROVA_NOME                   = "nome";
    public static final String COLUMN_NAME_PROVA_CAMPEONATO_CODIGO      = "campeonato_codigo";
    public static final String COLUMN_NAME_PROVA_CAMPEONATO_NOME        = "campeonato_nome";

    public static final String TEXT_TYPE = " TEXT";
    public static final String COMMA_SEP = ",";
    public static final String PRIMARY_KEY = " PRIMARY KEY ";

    @Override
    public void onCreate(SQLiteDatabase db) {

        final String SQL_CREATE_PROVA = 
            "CREATE TABLE " + TABLE_NAME_PROVA + " (" +
            COLUMN_NAME_PROVA_CODIGO             + TEXT_TYPE + COMMA_SEP +
            COLUMN_NAME_PROVA_NOME               + TEXT_TYPE + COMMA_SEP +
            COLUMN_NAME_PROVA_CAMPEONATO_CODIGO  + TEXT_TYPE + COMMA_SEP +
            COLUMN_NAME_PROVA_CAMPEONATO_NOME    + TEXT_TYPE + " )";
        db.execSQL(SQL_CREATE_PROVA);

    };

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME_PROVA);

        onCreate(db);
    }

    public void addProva(Prova prova) {

        try {
            // ****** fires "java.lang.NullPointerException" **********
            SQLiteDatabase db = this.getWritableDatabase(); 

            ContentValues values = new ContentValues();
            values.put(COLUMN_NAME_PROVA_CODIGO, prova.get_codigo());
            values.put(COLUMN_NAME_PROVA_NOME, prova.get_nome());
            values.put(COLUMN_NAME_PROVA_CAMPEONATO_CODIGO, prova.get_campeonato_codigo());
            values.put(COLUMN_NAME_PROVA_CAMPEONATO_NOME, prova.get_campeonato_nome());

            db.delete(TABLE_NAME_PROVA, null, null);
            db.insert(TABLE_NAME_PROVA, null, values);
            db.close();
            return;
        }
        catch ( Exception e ) {
            return;
        }        

    }

    public Prova getProva(String codigo) {

        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_NAME_PROVA, new String[] { COLUMN_NAME_PROVA_CODIGO, 
            COLUMN_NAME_PROVA_NOME, COLUMN_NAME_PROVA_CAMPEONATO_CODIGO,
            COLUMN_NAME_PROVA_CAMPEONATO_NOME }, 
            null, null, null, null, null, null);

        if (cursor != null)
            cursor.moveToFirst();

        Prova prova = new Prova(cursor.getString(0), cursor.getString(1), cursor.getString(2), 
            cursor.getString(3));

        db.close();
        return prova;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:46:53.653

1.  您可以使用调试来准确查看希望行是否给您 Nullpointerexception。
2.  它可能： db.delete(TABLE_NAME_PROVA, null, null); //删除这个
3.  如果您是新手，本教程可以帮助您更多地了解 Sqlite：[http ://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite /](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:29:50.793

自己解决（初学者的小错误:( ...)：

```
public class Principal extends Activity {

    ...

        // wrong >>>>> DP.baixarProva();
        DP.baixarProva(getApplicationContext());

...

public class DownloadProva extends Activity {

    ...

    // wrong >>>>> public void baixarProva() {
    public void baixarProva(Context myContext) {

        ...

        // wrong >>>>> DatabaseHelper mydb = new DatabaseHelper(getBaseContext());
        DatabaseHelper mydb = new DatabaseHelper(myContext); 
```

# c# - 单击事件上的 GridView 列标题

> ID：14554328
> 
> 赞同：4
> 
> 时间：2013-01-28T01:38:03.757
> 
> 标签：c#, wpf, events, gridview, header

在 WPF 中，如何在单击 GridView（在 ListView 内）列标题时触发事件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T01:45:07.790

只需使用以下`GridViewColumnHeader.Click`事件`ListView`：

```
<ListView GridViewColumnHeader.Click="GridViewColumnHeaderClickedHandler"> 
```

# dynamic - 带有 Ember js 的动态选项卡/列表

> ID：14554331
> 
> 赞同：3
> 
> 时间：2013-01-28T01:38:53.517
> 
> 标签：dynamic, tabs, ember.js

我正在努力学习Ember js，做了一些实验，目前没有太大的成功，但是慢慢的往前走。

但是现在我被卡住了，我正在尝试创建一个没有路由器的动态选项卡。我有这两个小提琴

[http://jsfiddle.net/drulia/BzRUF/](http://jsfiddle.net/drulia/BzRUF/)

[http://jsfiddle.net/drulia/uNNXy/](http://jsfiddle.net/drulia/uNNXy/)

一种简单，将引用保存在控制器中，另一种使用 ContainerView，但我坚持使用这两种方法。我也尝试了 StateManager，但再次没有运气。

第一个问题是我发现没有其他方法可以在 View 中获取元素的内容，而不是使用`this._parentView.get('content');`which is not right 因为我不打算使用任何带有 prefix 的东西 `_`。但我不知道我还能如何实际检查元素是否属于活动选项卡。

第二个主要问题是我不知道如何将内容附加到选项卡。还在为删除标签的能力而苦苦挣扎，因为`{{action remove this target="App.Tabs"}}`总是指向同一个元素。

[我一直在阅读http://emberjs.com](http://emberjs.com)上的所有指南和 API ，也阅读了很多其他教程，它们中的大多数都没有真正的价值，因为它们已经过时了，尤其是对我的新手来说，因为它已经很难连接起来了迄今为止在官方页面中提供的作品。

不过，这个 todo 应用程序示例非常有用[https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences](https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences)它的质量非常好，但标签等区域是手写的他们通过路由器工作。

总而言之，目前视图对我来说是一个谜，所以任何有助于动态标签的灯光都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T23:19:57.533

解决方案

[http://jsfiddle.net/drulia/BzRUF/9/](http://jsfiddle.net/drulia/BzRUF/9/)

不完美，但可以完成工作，您可以导航、创建和删除选项卡。

为了使它真正可用，应该有一些带有标签的 id，所以标签可以有相同的标题。但是这个想法就在那里，我真的希望有人会发现它有用。

以下是 js 的主要部分，以了解发生了什么

```
App.IndexController = Ember.ArrayController.extend({
    tabs: ['Tab1','Tab2'],
    activeTab: 'Tab1',
    counter: 2,
    closeTab: function(tab) {
        var i = this.tabs.indexOf(tab);
        this.tabs.removeAt(i);
        if(tab === this.activeTab)
            this.set('activeTab',this.tabs.objectAt(0));
    },
    createTab: function() {
        var newTab = 'Tab' + ++this.counter;
        this.tabs.pushObject(newTab);
        this.set('activeTab',newTab);
    }
});

App.TabInputView = Ember.TextArea.extend({
    placeholder: function() {
        return 'Empty Area of ' + this.tab;
    }.property(),
    isVisible: function(s) {
        var activeTab = this.get('controller.activeTab');
        return Boolean(activeTab === this.tab);
    }.property('controller.activeTab')
}); 
```

这里是 html 的主要部分

```
 {{#each tab in tabs}}
        {{#view App.TabView tabBinding="tab"}}
    {{tab}} <span class="close" {{action closeTab tab bubbles=false}}>x</span>
        {{/view}}
    {{/each}}
    <button {{action createTab}}>+</button> 
```

# php - MySQL – 我应该使用 last_insert_id() 吗？或者是其他东西？

> ID：14554340
> 
> 赞同：0
> 
> 时间：2013-01-28T01:40:40.657
> 
> 标签：php, mysql

我有一个`users`具有自动递增`id`列的表。对于每个新用户，我基本上需要在三个不同的表中插入三行，分别是 1\. `user`、 2.`user_content`和 3\. `user_preferences`。插入的行`user_content`并由`user_preferences`它们`id`的 's 引用，这些行对应于每个用户的 id（保存在 中`user`）

我该如何做到这一点？

我是否应该`INSERT INTO user`先进行查询，使用 获取自动递增`id`的`last_insert_id()`，然后`INSERT INTO`使用获得的用户 ID 进行其他两个查询？或者，有没有更简洁的方法来做到这一点？

（注意：我使用的是 MySQL 和 PHP，如果有区别，我使用 a`bigint`将`id`值存储在所有三个表中。）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T01:44:51.530

您描述的方法（`user`首先插入，获取 的结果`last_insert_id()`，然后使用它插入其他两个表）是完全合理的；我看不出有什么问题。

从技术上讲，结合三个查询并使用`LAST_INSERT_ID()`MySQL 函数将值插入其他两个表在技术上是可行的，但是如果没有任何相应的好处，这将更加复杂。换句话说，真的不值得去做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T01:45:21.833

我看到 3 个选项：

1.  PHP端使用一些`*_last_insert_id`（如你所描述的）
2.  创建触发器
3.  使用存储过程。

# android - Android - ExpandableListView 通过单击行中的任意位置展开

> ID：14554343
> 
> 赞同：1
> 
> 时间：2013-01-28T01:41:02.047
> 
> 标签：android, expandablelistview

目前，`ExpandableListView`我使用单击位于每行最左侧的箭头的默认功能扩展了我已实现的功能。

我需要更改它，以便当用户单击行上的任意位置时它会展开。

非常感谢。

# java - java中的XSS漏洞

> ID：14554351
> 
> 赞同：0
> 
> 时间：2013-01-28T01:43:28.443
> 
> 标签：java

1.  如何修复以下 XSS 漏洞问题？

    如何保护我的网站免受 XSS 漏洞的影响？

通过在网站的 URL 中添加 javascript，所有 cookie 值都会显示出来。

下面是一个类似的 URL 示例，它包含一个 java 脚本：

[https://www.example.com/](https://www.example.com/) >< script>alert(document.cookie)</ script>&UserTarget= [https://www.example.com/homepageredirect.jsp](https://www.example.com/homepageredirect.jsp)

为了克服这个问题，我在 webserver 7.0 的 obj.conf 文件中添加了以下文件管理器：

* * *

```
Input fn="insert-filter"

method="POST"

filter="sed-request"

sed="s/(<|%3c)/\\< / gi"

sed="s/(>|%3e)/\\>/gi" 
```

* * *

在 obj.conf 中进行这些更改之后，问题仍然没有解决。请提出一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:55:44.513

当您打印 HTML 时，只需在客户端（或服务器端，这取决于您要打印的内容）中转义特殊字符，然后您将被允许传递任何输入，而无需使用笨拙的正则表达式或其他一种过滤器。

示例：假设我有一个可以接收 a 的变量`<script>alert( document.cookie )</script>`，当我打印时我会执行类似`<div> <%= escapeHTML( dangerousVariable ) %> </div>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-02T09:33:29.777

[在此 URL XSS 预防规则中提到您可以根据您的要求应用规则](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)

# java - 即使在设置 c3p0.testConnectionOnCheckout=true 之后，与 MySQL 的数据库连接也会超时

> ID：14554353
> 
> 赞同：5
> 
> 时间：2013-01-28T01:43:40.497
> 
> 标签：java, mysql, hibernate, jdbc, c3p0

我有一个使用 hibernate (v3.6.4) 的应用程序，连接池由 C3P0 (v0.9.1.2) 提供。

问题是，如果我进行数据库查询，如果应用程序进程（以及因此 C3P0 池）运行的时间超过 MySQL wait_timeout 值，则会出现 JDBC 通信链接故障。我将 /etc/mysql/my.cnf 中的 wait_timeout 的值设置为 600 秒以测试此问题：

```
2013-01-27 20:08:00,088 ERROR [Thread-0] (JDBCExceptionReporter.java:234) - Communications link failure

The last packet successfully received from the server was 665,943 milliseconds ago.  The last packet sent successfully to the server was 6 milliseconds ago.
org.hibernate.exception.JDBCConnectionException: could not execute query
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:99)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
at org.hibernate.loader.Loader.doList(Loader.java:2536)
at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
at org.hibernate.loader.Loader.list(Loader.java:2271)
at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:119)
at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1716)
at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:347) 
.....
Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure
The last packet successfully received from the server was 665,943 milliseconds ago.  The last packet sent successfully to the server was 6 milliseconds ago.
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3102)
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2991)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3532)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2002)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2624)
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2127)
at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2293)
at  com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:76)
at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208)
at org.hibernate.loader.Loader.getResultSet(Loader.java:1953)
at org.hibernate.loader.Loader.doQuery(Loader.java:802)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
at org.hibernate.loader.Loader.doList(Loader.java:2533)
... 9 more
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2552)
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3002)
... 22 more

2013-01-27 20:19:00,179  WARN [Thread-0] (NewPooledConnection.java:487) - [c3p0] Another error has occurred [ com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: The last packet successfully received from the server was 1,326,037 milliseconds ago.  The last packet sent successfully to the server was 660,100 milliseconds ago. is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem. ] which will not be reported to listeners!
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: The last packet successfully received from the server was 1,326,037 milliseconds ago.  The last packet sent successfully to the server was 660,100 milliseconds ago. is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)
at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3364)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1983)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2624)
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2127)
at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2293)
at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:76)
at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208)
at org.hibernate.loader.Loader.getResultSet(Loader.java:1953)
at org.hibernate.loader.Loader.doQuery(Loader.java:802)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
at org.hibernate.loader.Loader.doList(Loader.java:2533)
at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
at org.hibernate.loader.Loader.list(Loader.java:2271)
at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:119)
at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1716)
at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:347)
....
Caused by: java.net.SocketException: Broken pipe
at java.net.SocketOutputStream.socketWrite0(Native Method)
at java.net.SocketOutputStream.socketWrite(Unknown Source)
at java.net.SocketOutputStream.write(Unknown Source)
at java.io.BufferedOutputStream.flushBuffer(Unknown Source)
at java.io.BufferedOutputStream.flush(Unknown Source)
at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3345)
... 20 more 
```

这看起来像是一个常见问题，所以为了解决这个问题，我在检查了 hibernate/c3p0 文档并回答了 Stack Overflow 上已经提出的问题后尝试调整这些 hibernate/c3p0 属性：

相关休眠属性：

```
<property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
<property name="hibernate.connection.url">jdbc:mysql://localhost:3306/gsui?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true</property>

<property name="hibernate.connection.autoReconnect">true</property>

<!-- C3p0 Performance Improvements -->
<property name="hibernate.c3p0.acquire_increment">1</property>
<property name="hibernate.c3p0.idle_test_period">300</property>
<property name="hibernate.c3p0.maxConnectionAge">3600</property>
<property name="hibernate.c3p0.timeout">120</property>
<property name="hibernate.c3p0.max_size">300</property>
<property name="hibernate.c3p0.min_size">1</property>
<property name="hibernate.c3p0.max_statements">100</property>
<property name="hibernate.c3p0.preferredTestQuery">select 1;</property>

<property name="hibernate.connection.useUnicode">
    true
</property>
<property name="hibernate.connection.characterEncoding">
    UTF-8
</property>
<property name="hibernate.connection.charSet">
    UTF-8
</property> 
```

我还在我维护的 c3p0 属性文件中将 c3p0.testConnectionOnCheckout 设置为 true：

```
c3p0.testConnectionOnCheckout=true 
```

在日志中，C3P0 池通过以下消息正常初始化：

```
2013-01-27 19:45:04,607  INFO [main] (ConnectionProviderFactory.java:173) - Initializing connection provider: org.hibernate.connection.C3P0ConnectionProvider
2013-01-27 19:45:04,609  INFO [main] (C3P0ConnectionProvider.java:103) - C3P0 using driver: com.mysql.jdbc.Driver at URL: jdbc:mysql://localhost:3306/gsui?useUnicode=true&characterEncoding=UTF-8&autoReconnect=true
2013-01-27 19:45:04,610  INFO [main] (C3P0ConnectionProvider.java:104) - Connection properties: {useUnicode=true, autoReconnect=true, user=root, password=****, shutdown=true, characterEncoding=UTF-8, charSet=UTF-8}
2013-01-27 19:45:04,610  INFO [main] (C3P0ConnectionProvider.java:107) - autocommit mode: false
2013-01-27 19:45:04,629  INFO [main] (MLog.java:80) - MLog clients using log4j logging.
2013-01-27 19:45:04,757  INFO [main] (C3P0Registry.java:204) - Initializing c3p0-0.9.1.2 [built 21-May-2007 15:04:56; debug? true; trace: 10]
2013-01-27 19:45:04,842  INFO [main] (C3P0ConnectionProvider.java:194) - JDBC isolation level: READ_COMMITTED
2013-01-27 19:45:04,871  INFO [main] (AbstractPoolBackedDataSource.java:462) - Initializing c3p0 pool... com.mchange.v2.c3p0.PoolBackedDataSource@9f4a7137 [ connectionPoolDataSource -> com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@71b9e1e9 [ acquireIncrement -> 1, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, debugUnreturnedConnectionStackTraces -> false, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> z8kfsx8sz4pted1s4b69w|51f726b9, idleConnectionTestPeriod -> 300, initialPoolSize -> 1, maxAdministrativeTaskTime -> 0, maxConnectionAge -> 3600, maxIdleTime -> 120, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 300, maxStatements -> 100, maxStatementsPerConnection -> 0, minPoolSize -> 1, nestedDataSource -> com.mchange.v2.c3p0.DriverManagerDataSource@58f45048 [ description -> null, driverClass -> null, factoryClassLocation -> null, identityToken -> z8kfsx8sz4pted1s4b69w|454b7177, jdbcUrl -> jdbc:mysql://localhost:3306/gsui?useUnicode=true&characterEncoding=UTF-8&autoReconnect=true, properties -> {useUnicode=true, autoReconnect=true, user=******, password=******, shutdown=true, characterEncoding=UTF-8, charSet=UTF-8} ], preferredTestQuery -> select 1;, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> true, unreturnedConnectionTimeout -> 0, usesTraditionalReflectiveProxies -> false; userOverrides: {} ], dataSourceName -> null, factoryClassLocation -> null, identityToken -> z8kfsx8sz4pted1s4b69w|71ffd9f1, numHelperThreads -> 3 ] 
```

从上面的日志中可以发现，C3P0 中 testConnectionOnCheckout=true 和 autoReconnect=true。有人可以帮我弄清楚为什么 C3P0 还是会检查超时连接吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-19T23:09:11.063

当我们使用 JPA 和 C3P0 进行连接池将休眠升级到 4.3.x 时，我们开始遇到相同的“通信链接”问题。

尽管我的 C3P0 设置，这似乎是一个连接池问题，因为连接的保留时间比数据库长`wait_timeout`（默认为 8 小时）。但是，我通过更改我们的休眠配置解决了这个问题`persistence.xml`：

```
<property name="hibernate.connection.release_mode" value="after_transaction" /> 
```

似乎休眠中的默认行为更改为在事务后不释放连接，因此如果您使用池化，则必须显式设置此模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T12:35:26.777

在您的休眠配置文件中添加以下属性。我希望它会奏效。

```
<property name="connection.provider_class">
  org.hibernate.connection.C3P0ConnectionProvider
</property> 
```

# option - 我如何使用一些和无

> ID：14554354
> 
> 赞同：1
> 
> 时间：2013-01-28T01:43:53.863
> 
> 标签：option, ml

> **可能重复：**
> [SML 如何定义正确的选项](https://stackoverflow.com/questions/14552287/sml-how-to-define-proper-option)

此函数接受一个字符串和一个列表，如果在列表中找到它，则返回没有字符串的列表。否则它返回相同的列表。

有趣的 all_except_str(str,xs)=

```
case xs of
[] => []
| x::xs' => if x=str
        then all_except_str(str,xs')
        else 
        let val lst=all_except_str(str,xs')

        in x::lst
                    end 
```

这很好用，但是我不想返回一个列表，而是返回一个选项，如果列表为空，则返回 NONE 或具有与上述相同规则的 SOME(lst)。我想我不能将 [] 替换为 NONE 并将 x::lst 替换为 SOME(x::lst) 因为它不起作用。为什么？？谢谢

# html - 无法让链接在弹出窗口中正常工作以引导 html 数据内容

> ID：14554355
> 
> 赞同：0
> 
> 时间：2013-01-28T01:44:12.913
> 
> 标签：html, twitter-bootstrap, knockout.js

我正在尝试将 html 放在引导弹出窗口中，并且内容显示得很好，但是当我单击弹出窗口内的链接时，它只会转到触发弹出窗口的锚标记上的父“OpenRecent”方法。您可以在下面的 data-content html 中看到我尝试调用我想要的函数的不同方式。我怎样才能做到这一点？

```
<ul id="RecentSearches" class="nav nav-tabs nav-stacked well" data-bind="foreach: CurrentItems">
        <li>
            <div>
                <input type="checkbox" class="checkbox inline" data-bind="value: $data.TransId,
                                                                          checked: $root.ItemsSelected"/>
                <a href="#"
                   data-bind="text: $data.Description + '-' + $data.County,
                              attr: 
                              { 
                                id: $data.TransId,
                                'data-title': $data.Description
                              },
                              click: $root.OpenRecent"
                   data-trigger="hover"
                   rel="popover"
                   data-html="true"
                   data-content="<a data-bind='click: $parent.Print.bind($data)'>Print</a> |
                                 <a data-bind='click: app.RecentSearches.Print.bind($data)'>Print 2</a>
                                 <a data-bind='click: $parent.Email'>Email</a> |
                                 <a data-bind='click: $parent.SaveToPDF'>PDF</a> |
                                 <a data-bind='click: $parent.SavetToCSV'>CSV</a>">
                </a>
            </div>
        </li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:31:14.507

HTML 是您`data-content`不会被 Knockout 绑定的，因为它是后来动态添加的。

一种选择是添加一种方法来识别链接（类），然后使用一种不[显眼的方法](http://knockoutjs.com/documentation/unobtrusive-event-handling.html)来添加事件处理程序。

```
$("ul").on("click", ".print", function(event) {
     var context = ko.contextFor(this);
     context.$root.Print(context.$data);
     event.preventDefault();
}); 
```

我不确定为什么`OpenRecent`要调用您的函数。在我看来，引导程序在触发它的元素之外创建了弹出框。因此，这不会是弹出框的父级。如果你仍然对那部分有疑问，那么也许你可以让它在 jsFiddle 中工作。

这是一个不显眼的处理程序的小提琴：http: [//jsfiddle.net/rniemeyer/Edww3/](http://jsfiddle.net/rniemeyer/Edww3/)

# android - Android库如何编译排序？

> ID：14554356
> 
> 赞同：1
> 
> 时间：2013-01-28T01:44:15.930
> 
> 标签：android, buildpath, library-project, build-environment

我在 Android 库上遇到编译问题。假设存在四个库项目（LPA、LPB、LPC、LPD）和一个主要应用程序（MP）。LPB 参考 LPA。LPC 和 LPD 参考 LPB。MP 参考 LPC 和 LPD。

当我点击 clean all 并 compile all 时，eclipse 的 package explorer 肯定会出现很多红叉和红色问号。

如何解决这个问题呢？是我按顺序编译 LPA、LPB、LPC、LPD 和 MP。我认为这很愚蠢，但我没有其他解决方案。

因此，任何人都可以知道如何设置构建环境以按顺序编译所有项目。

非常感谢。

更新：

[http://dl.dropbox.com/u/78582670/main.png](http://dl.dropbox.com/u/78582670/main.png)

这是我的主要应用程序项目设置。我看不到其他图书馆项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T01:56:10.810

如果您使用的是 eclipse，则可以更改顺序。转到项目属性，java构建路径，然后单击最右侧的选项卡，您将看到排序。您可以使用向上和向下按钮来交换它们的顺序。

# android - 意图的预期类无法从所述意图中读取扩展信息

> ID：14554359
> 
> 赞同：1
> 
> 时间：2013-01-28T01:44:41.223
> 
> 标签：android

我正在尝试将信息从我的主要活动类发送到我的应用程序包中的另一个类。该信息用于自动更新 AlertDialog。这是我一直在使用的代码：

```
//This is in MainActivity.class
//Tests to see if SyncDialog will update itself with new intents.
public void testLoop() {
    int n = 0;
    Intent intent = new Intent(this, SyncDialog.class);
    while (n != 10) {
        intent.putExtra(TEST_NUMBER, n);
        n++;
    }
}

//This is in SyncDialog.class
//This method should get the int value from MainActivity
protected void onNewIntent(Intent intent) {
    int n = intent.getIntExtra(TEST_NUMBER, 0);
    showNextDialog(n);
} 
```

TEST_NUMBER 定义为 MainActivity 顶部的公共常量，我什至尝试将 MainActivity 导入 SyncDialog.class。

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T01:55:17.883

如果您想以您尝试的方式访问它，则必须将其设为静态常量。在 MainActivity 中：

`public static String TEST_NUMBER = "test";`

在 SyncDialog 中：

`intent.getExtra(MainActivity.TEST_NUMBER, 0)`

# scheme - 方案中的数据定义？

> ID：14554365
> 
> 赞同：1
> 
> 时间：2013-01-28T01:45:52.837
> 
> 标签：scheme, racket

我今天一直在做这个，我剩下要做的就是开发一个函数，它需要一个服务员并返回服务员被分配到的动物的总年龄。因此，如果我以服务员 Dave 为例，我会得到 10 个。不知道从哪里开始。你怎么把年龄相加？

```
(define-struct animal (name species age breakfasthour dinnerhour))
    (define-struct attendant (name a1 a2 a3))

    (define gorilla (make-animal "Koko" "Gorilla" "4" "8" "10"))
    (define bat (make-animal "Bruce" "Bat" "1" "23" "5"))
    (define mandrill (make-animal "Manny" "Mandrill" "5" "8" "7"))
    (define crocodile (make-animal "Swampy" "Crocodile" "1" "10" "8"))
    (define ocelot (make-animal "Ozzy" "Ocelot" "7" "7" "17"))
    (define capybara (make-animal "Capy" "Capybara" "4" "6" "8"))
    (define potto (make-animal "Spot" "Potto" "2" "2" "6"))
    (define tapir (make-animal "Stripey" "Tapir" "3" "10" "6"))
    (define vulture (make-animal "Beaky" "Vulture" "10" "9" "6"))

    (define attendant1 (make-attendant "Dave" gorilla bat mandrill))
    (define attendant2 (make-attendant "John" crocodile ocelot capybara))
    (define attendant3 (make-attendant "Joe" potto tapir vulture))

    #;(define (meal-time? e1 e2)
      (string=? (animal-species e1)
                (animal-dinnerhour e2)))

    #;(define (animal-template s...)
      (...(animal-name s)...
          (animal-species s)...
          (animal-age s)...
          (animal-breakfasthour s)...
          (animal-dinnerhour s)...))

    #;(define (attendant-template s...)
      (...(attendant-name s)...
          (attendant-s1 s)...
          (attendant-s2 s)...
          (attendant-s3 s)...)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:21:54.810

只需使用每种类型的访问器过程：

```
(define (animals-age att)
  (+ (animal-age (attendant-a1 att))
     (animal-age (attendant-a2 att))
     (animal-age (attendant-a3 att)))) 
```

显然，这仅适用于年龄是*数字*，在您当前的代码中是字符串（为什么？），请考虑将年龄表示为数字，这更有意义。

# python - 当我运行完整的 django 测试时，jenkins 工作失败

> ID：14554366
> 
> 赞同：0
> 
> 时间：2013-01-28T01:46:01.467
> 
> 标签：python, django, testing, jenkins, pylint

当我在本地机器上运行测试时，一切正常

当我只运行我的应用程序测试一切正常

但是当我在詹金斯运行全套测试时它失败了，更奇怪的是所有测试都通过了。

我猜它与pylint有关，但我不确定。

将不胜感激任何关于发生了什么的建议？

```
+ python nexus7/manage.py jenkins
............................................................................................................................................................................................................................................................................................................................................................................................s............................................................................................
----------------------------------------------------------------------
Ran 473 tests in 12.744s

OK (skipped=1)
Creating test database for alias 'default'...
Destroying test database for alias 'default'...
Traceback (most recent call last):
  File "nexus7/manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/var/lib/jenkins/shiningpanda/jobs/cb5c943f/virtualenvs/d41d8cd9/local/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/var/lib/jenkins/shiningpanda/jobs/cb5c943f/virtualenvs/d41d8cd9/local/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/var/lib/jenkins/shiningpanda/jobs/cb5c943f/virtualenvs/d41d8cd9/local/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/var/lib/jenkins/shiningpanda/jobs/cb5c943f/virtualenvs/d41d8cd9/local/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/var/lib/jenkins/shiningpanda/jobs/cb5c943f/virtualenvs/d41d8cd9/local/lib/python2.7/site-packages/django_jenkins/management/commands/__init__.py", line 81, in handle
    if test_runner.run_tests(test_labels):
  File "/var/lib/jenkins/shiningpanda/jobs/cb5c943f/virtualenvs/d41d8cd9/local/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/test/simple.py", line 384, in run_tests
    self.teardown_test_environment()
  File "/var/lib/jenkins/shiningpanda/jobs/cb5c943f/virtualenvs/d41d8cd9/local/lib/python2.7/site-packages/django_jenkins/runner.py", line 253, in teardown_test_environment
    signals.teardown_test_environment.send(sender=self)
  File "/var/lib/jenkins/shiningpanda/jobs/cb5c943f/virtualenvs/d41d8cd9/local/lib/python2.7/site-packages/Django-1.4.3-py2.7.egg/django/dispatch/dispatcher.py", line 172, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/var/lib/jenkins/shiningpanda/jobs/cb5c943f/virtualenvs/d41d8cd9/local/lib/python2.7/site-packages/django_jenkins/tasks/run_pylint.py", line 43, in teardown_test_environment
    lint.Run(args, reporter=ParseableTextReporter(output=self.output), exit=False)
  File "/var/lib/jenkins/shiningpanda/jobs/cb5c943f/virtualenvs/d41d8cd9/local/lib/python2.7/site-packages/pylint/lint.py", line 929, in __init__
    linter.check(args)
  File "/var/lib/jenkins/shiningpanda/jobs/cb5c943f/virtualenvs/d41d8cd9/local/lib/python2.7/site-packages/pylint/lint.py", line 542, in check
    self.check_astng_module(astng, walker, rawcheckers)
  File "/var/lib/jenkins/shiningpanda/jobs/cb5c943f/virtualenvs/d41d8cd9/local/lib/python2.7/site-packages/pylint/lint.py", line 615, in check_astng_module
    walker.walk(astng)
  File "/var/lib/jenkins/shiningpanda/jobs/cb5c943f/virtualenvs/d41d8cd9/local/lib/python2.7/site-packages/pylint/utils.py", line 558, in walk
    cb(astng)
  File "/var/lib/jenkins/shiningpanda/jobs/cb5c943f/virtualenvs/d41d8cd9/local/lib/python2.7/site-packages/pylint/checkers/variables.py", line 176, in leave_module
    elt_name = elt.value
AttributeError: 'Name' object has no attribute 'value'
Build step 'Virtualenv Builder' marked build as failure
Archiving artifacts
Skipping Cobertura coverage report as build was not UNSTABLE or better ...
Recording test results
Notifying upstream projects of job completion
Finished: FAILURE 
```

# knockout.js - 淘汰赛JS删除不起作用

> ID：14554368
> 
> 赞同：2
> 
> 时间：2013-01-28T01:46:16.870
> 
> 标签：knockout.js

我有一些非常基本的绑定......工作。现在我正在尝试删除一行。它不工作。

[http://jsfiddle.net/uC8Vt/57/](http://jsfiddle.net/uC8Vt/57/)

我没有通过正确的

```
var ClientModel = function () {

    this.clients = ko.observableArray(data); // Load json data

    self.del = function(elem) { 
        if (confirm('Delete:  ' + elem.Name)) {
            this.client.remove(elem);
        };
    }
} 
```

我不确定为什么删除不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T02:02:40.503

选择和删除的功能在父视图模型中，所以你应该用`$parent.select`and来调用它们`$parent.del`。

这条线也有一些错误：

```
self.clients.remove(elem); 
```

这是[固定的 jsfiddle](http://jsfiddle.net/pomber/uC8Vt/60/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T02:07:16.953

一方面 - 改变 this.client.remove(elem); to: self.clients.remove(elem);

您指定了“this”而不是“self”，并且指定了“client”而不是“clients”

# javascript - 用 Javascript 动态创建一个 html 表

> ID：14554376
> 
> 赞同：2
> 
> 时间：2013-01-28T01:46:55.903
> 
> 标签：javascript, html-table

我正在尝试使用 Javascript 根据用户输入创建一个表（实际上是两个或三个表，具体取决于用户输入..），我非常熟悉 PHP，并且已经在 PHP 中使用它，但是我希望用户以便能够在查询之前看到该表。我在这里找到了一个脚本，它部分完成了我想要的并尝试对其进行编辑（我发现它与 PHP 惊人地相似） 基本上它计算单元格（端口）的总量，将其按行和列拆分，即“超级”列如果用户希望将其拆分为多个表，这些表彼此相邻对齐，因此使用 div 标签。这是我的 JS：

```
<html>
<head>
<script type="text/javascript">
function createTable()
{
var num_ports = document.getElementById('ports').value;
var num_super = document.getElementById('super').value;
var num_rows = document.getElementById('rows').value;
var num_cols = document.getElementById('cols').value;
var tbody = '';
var colStart = num_cols / num_super;
for( var i=0; i<num_super; i++){
    var theader = '<div><table border="1">\n';
        for(u=1; u<=num_row; u++){
          tbody += '<tr>';
            for( var j=0; j<colStart; j++)
            {
            tbody += '<td>';
            tbody += 'Cell ' + i + ',' + j;
            tbody += '</td>'
            }
    tbody += '</tr>\n';
}
var tfooter = '</table></div>';
document.getElementById('wrapper').innerHTML = theader + tbody + tfooter;
}
</script>
</head>

<body>
<form name="tablegen">
<label>Ports: <input type="text" name="ports" id="ports"/></label><br />
<label>Super Columns: <input type="text" name="super" id="super"/></label><br />
<label>Rows: <input type="text" name="rows" id="rows"/></label><br />
<label>Columns: <input type="text" name="cols" id="cols"/></label><br/>
<input name="generate" type="button" value="Create Table!" onclick='createTable();'/>
</form>

<div id="wrapper"></div>
</body>
</html> 
```

下面是经过 PHP 处理后的最终输出（端口：24，列：6，行：2，超级：2）：

![桌子](../Images/61f358f27224ed64df8a343132bf6367.png)

这是我放在一起的一个 js 小提琴：http: [//jsfiddle.net/9SnLB/](http://jsfiddle.net/9SnLB/)

目前，当我单击按钮时没有任何反应，但是，我想这是我的第一个问题，但我是否正确进行设置？为什么按钮不运行该功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T02:29:12.970

两个错误。一个你没有关闭函数括号，即最后缺少 }。第二个是您使用 $row 而不是您创建的变量 num_rows。由于某种原因，它在小提琴中不起作用，但是它在本地起作用。小提琴是说 createTable 函数是未定义的。

```
function createTable()
{
    var num_ports = document.getElementById('ports').value;
    var num_super = document.getElementById('super').value;
    var num_rows = document.getElementById('rows').value;
    var num_cols = document.getElementById('cols').value;
    var tbody = '';
    var colStart = num_cols / num_super;
    for( var i=0; i<num_super; i++){
        var theader = '<div><table border="1">\n';
            for($u=1; $u<=num_rows; $u++){
              tbody += '<tr>';
                for( var j=0; j<colStart; j++)
                {
                tbody += '<td>';
                tbody += 'Cell ' + i + ',' + j;
                tbody += '</td>'
                }
        tbody += '</tr>\n';
    }
    var tfooter = '</table></div>';
    document.getElementById('wrapper').innerHTML = theader + tbody + tfooter;
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T02:31:06.220

```
var table = [["a1","a2","a3"]["b1","b2","b3"]["c1","c2","c3"]];
for(x = table.length;x > 0;x--) {
  document.write("<tr>");
  for(y = table[x].length;y > 0;y--) {
    document.write("<td>"+y+"</td>");
  }
document.write("</tr>");
} 
```

对不起，如果语法错误。你明白了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T03:04:14.787

您需要将 jsFiddle 框架更改为“no wrap (head)”并更正 javascript 中的错误。“no wrap (head)”将允许访问该功能。"for ($u=1" 循环缺少右括号，$row 应该是 num_rows。"for (j=0" 循环缺少最后一个 "tbody=" 的分号。

这是更正的js。

```
function createTable() {
var num_ports = document.getElementById('ports').value;
var num_super = document.getElementById('super').value;
var num_rows = document.getElementById('rows').value;
var num_cols = document.getElementById('cols').value;
var tbody = '';
var colStart = num_cols / num_super;
for (var i = 0; i < num_super; i++) {
    var theader = '<div><table border="1">\n';
    for ($u = 1; $u <= num_rows; $u++) {
        tbody += '<tr>';
        for (var j = 0; j < colStart; j++) {
            tbody += '<td>';
            tbody += 'Cell ' + i + ',' + j;
            tbody += '</td>';
        }
    }
    tbody += '</tr>\n';
}
var tfooter = '</table></div>';
document.getElementById('wrapper').innerHTML = theader + tbody + tfooter; 
```

}

# javascript - 检查元素的特殊值

> ID：14554377
> 
> 赞同：1
> 
> 时间：2013-01-28T01:46:58.067
> 
> 标签：javascript, jquery, html

是否可以从这样的元素中读取值，即

```
<div id="element" winner="first"></div> 
```

所以我可以从获胜者那里得到“第一”的价值？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T01:49:11.687

```
var winner = $("#element").attr('winner'); 
```

如果您可以控制标记，我建议您不要编造自己的属性。而是使用 HTML5`data-*`属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T01:49:54.087

你可以，但你应该使用数据属性来存储自定义数据：

```
<div id="element" data-winner="first"></div> 
```

现在，您可以使用以下`.data()`方法：

```
$('#element').data('winner');  // "first" 
```

如果不能使用数据属性，可以使用`.attr()`方法：

```
$('#element').attr('winner');  // "first" 
```

# javascript - iFrame 中网站加载的链接滚动到顶部

> ID：14554380
> 
> 赞同：1
> 
> 时间：2013-01-28T01:47:03.997
> 
> 标签：javascript, html, iframe, cross-browser

[我的投资组合网站](http://www.ellenportercreative.com)有指向不同页面的链接，这些页面在右侧的 IFrame 中加载。我希望页面始终加载在顶部 - 因此在子页面的 head 标记中添加了以下代码：

```
<head>
  <script type='text/javascript'> 
    parent.document.body.scrollTop = 0;
  </script>
</head> 
```

它适用于 Safari，但不适用于 Firefox 或 Chrome.... 什么适用于所有浏览器？

谢谢！

# php - 如何在 Magento 社区版中包含制造商描述而不使用产品属性？PHP/XML/MySQL

> ID：14554385
> 
> 赞同：0
> 
> 时间：2013-01-28T01:48:21.017
> 
> 标签：php, magento

在规范化的数据库模式中，制造商将拥有自己的属性，例如名称、描述、地址、电话号码。

制造商描述对产品页面很有用。许多电子商务网站在每个产品页面上都显示制造商描述。

据我所知，在 Magento 中你必须创建一个产品属性，“制造商描述”或类似的东西。例如，如果 ABC Corporation 有 1,000 种产品，则每次更改 ABC Corporation 的描述时都必须更新所有 1,000 种产品。

这是唯一相当简单的方法吗？

或者是否有更正常的数据库方式来执行此操作，其中单个原子更新会导致所有制造商的项目在前端显示更新的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:06:29.870

创建一个包含以下内容的模块：

*   **创建所需制造商表的**设置脚本****
***   **制造商的模型**和**资源模型**类*   **网格**来管理制造商（这很复杂，你应该按照这样的教程[或](http://markshust.com/2012/07/05/creating-magento-adminhtml-grids-simplified)从另一个模块复制基础知识）*   制造商**块**和**模板**以呈现制造商信息的 HTML。您将使用它作为manufacturer_id 属性的前端模型（见下文）*   **添加产品属性的**设置脚本**`manufacturer_id`*****   **制造商 ID 的源模型**，因此您可以从下拉列表中选择制造商，而不是输入 ID****

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:17:16.137

要在不使用产品属性的情况下在产品页面上显示制造商描述，您需要创建新表**“manufacturer_info”**，该表包含制造商 ID 和描述信息。

表是这样的

制造商 ID | 描述

要添加描述，您需要创建一个新模块，该模块将在网格中显示所有商店品牌和描述。当您编辑制造时，将出现一个表格，并在该表格中添加描述并将其保存到数据库中。

保存描述后，您可以根据manufacturer_id将其显示在产品页面上。

要获得当前制造使用以下代码

$_product = $this->getProduct();

$manufacturerName = $_product->getAttributeText('manufacturer');

$manufacturerId = $_product->getManufacturer();

**使用manufacturer_id 从新创建的表中获取描述**

我希望这有帮助。****

# sharepoint - 在 SharePoint2010 中集成 CKEditor

> ID：14554387
> 
> 赞同：0
> 
> 时间：2013-01-28T01:48:39.847
> 
> 标签：sharepoint, sharepoint-2010, ckeditor

是否可以在不使用的情况下将 CKEditor 集成到 SharePoint2010 的 EDIT ITEM 或 ADD ITEM 页面`CKEditor for SharePoint`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:46:53.217

如果你想用 CKEditor 替换默认的编辑器，那会很困难。请记住，默认编辑器已集成在功能区中。如果您出于某种原因想在 Web 部件中或在特定情况下（例如在页面布局中）使用它，您可以按照以下方式进行操作：

[http://www.sharepointbriefing.com/features/article.php/3928401/Sharepoint-Tools-You-Can-Use-CKEditor.htm](http://www.sharepointbriefing.com/features/article.php/3928401/Sharepoint-Tools-You-Can-Use-CKEditor.htm)

# javascript - 带有 Jquery 的订单表单中的 Google 地图

> ID：14554394
> 
> 赞同：0
> 
> 时间：2013-01-28T01:49:34.510
> 
> 标签：javascript, jquery, html, google-maps

我已经制作了一个包含 5 个步骤的订单，在第 2 步有一个谷歌地图 V2 来指出销售地址。

现在我已将此代码添加到表单中：http: [//jsfiddle.net/davidoleary/cTDvd](http://jsfiddle.net/davidoleary/cTDvd)，但现在地图不再显示了。但是当我删除 jquery.min.js 地图时工作正常，但代码不正常。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js"></script> 
```

现在有人知道 Jquery 和 Maps 存在问题，当然还有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T02:24:33.477

我认为使用 JQuery 和谷歌地图没有问题：

[http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-basic-example.html](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-basic-example.html)

如前所述；为什么要使用这么旧的 JQuery 库？

看起来 google maps api v2 在 2013 年 5 月 19 日之后将无法使用。

[https://developers.google.com/maps/documentation/javascript/v2/](https://developers.google.com/maps/documentation/javascript/v2/)

因此，如果您希望您的页面可以运行几个月以上，我建议您使用更新的版本。

# java - JSTL - 为某些 DynamicAttribute 生成编译错误

> ID：14554395
> 
> 赞同：0
> 
> 时间：2013-01-28T01:49:50.420
> 
> 标签：java, html, jsp, jstl, taglib

我在 jstl 中使用 DynamicAttribute。它可能会捕获所有未在 tld 中声明的属性。有没有办法只为某些不存在的属性生成编译错误？

假设我想禁止使用`foo="bar"`属性，但允许动态使用HTML 5 数据属性规范中指定的任何字符串`data-*="bar"`。`*`如果没有这样的功能，我将如何使用当前的 java jstl 规范实现相同的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:59:29.257

我认为这个功能不可能实现，如果我错了，鼓励任何人回答，然后我会接受。

# c# - 非数值数据的错误检查

> ID：14554396
> 
> 赞同：0
> 
> 时间：2013-01-28T01:49:52.980
> 
> 标签：c#, copy-paste, error-checking

我希望有人可以帮助我检查粘贴方法的错误。我想防止将任何不是剪贴板中的数值的内容粘贴到我的文本框中。下面列出了粘贴的编码。

```
 private void pasteToolStripMenuItem_Click(object sender, EventArgs e)
    {
                 // Determine if there is any text in the Clipboard to paste into the text box. 
                if (Clipboard.GetDataObject().GetDataPresent(DataFormats.Text) == true)
                {
                    // Determine if any text is selected in the text box. 
                    if (textBox1.SelectionLength > 0)
                    {
                        // Ask user if they want to paste over currently selected text. 
                        if (MessageBox.Show("Do you want to paste over current selection?", "Cut Example", MessageBoxButtons.YesNo) == DialogResult.No)
                            // Move selection to the point after the current selection and paste.
                            textBox1.SelectionStart = textBox1.SelectionStart + textBox1.SelectionLength;
                    } // end if
                } // Paste current text in Clipboard into text box.
                textBox1.Paste();
   } // end pasteToolStripMenuItem 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T02:30:10.613

如果你想包含`Currency symbols`,`decimal places`等`Thousand seperators`可能`Int.Parse`是你最好的选择

```
 public bool IsValidNumber(string input)
    {
        int val = 0;
        return int.TryParse(input.Trim(), NumberStyles.Any, null, out val);
    }

"$100,000" = true
"100.002" = true
"1000,44j" = false
etc. 
```

# android - 如何在Android中处理这个特定java类的上下文

> ID：14554398
> 
> 赞同：0
> 
> 时间：2013-01-28T01:49:55.240
> 
> 标签：android, class, this, android-context

该`deleteDatabase`方法需要一个上下文才能工作。所以在我的课堂上有一个声明为`ourContext`. 这个类不扩展任何其他类，如 Activity，所以我想你可以称它为辅助类。

类中唯一使用上下文的地方是下面显示的一种方法，称为`deleteData`. 这会调用`deleteDatabase`需要上下文才能工作的方法。

```
ourContext.deleteDatabase(DATABASE_NAME); 
```

在这种情况下是否可以不为类声明上下文？我可以`this`用于上下文吗？

```
public class PlayGame {

private DbHelper ourHelper;
private final Context ourContext;
private SQLiteDatabase ourDatabase;

 public PlayGame(Context c){
    ourContext = c;
}

 public void deleteData(){
     ourContext.deleteDatabase(DATABASE_NAME);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T01:52:42.400

不，Context 是一个类，您必须从它派生才能将其用作上下文。我建议让 deleteData 将 Context 作为参数。我假设它将从 Activity、Service 或类似具有对 Context 引用的视图中调用。

# c++ - 托管 c++/cli .net 将固定字节数组转换为字符串^

> ID：14554405
> 
> 赞同：2
> 
> 时间：2013-01-28T01:50:36.800
> 
> 标签：c++, .net, bytearray, command-line-interface

如何在托管 c++/cli 中将固定字节数组转换为字符串？
例如，我有以下 Byte 数组。

```
Byte byte_data[5];
byte_data[0]='a';
byte_data[1]='b';
byte_data[2]='c';
byte_data[3]='d';
byte_data[4]='e'; 
```

我试过下面的代码
`String ^mytext=System::Text::UTF8Encoding::UTF8->GetString(byte_data);`

我收到以下错误：
`error C2664: 'System::String ^System::Text::Encoding::GetString(cli::array<Type,dimension> ^)' : cannot convert parameter 1 from 'unsigned char [5]' to 'cli::array<Type,dimension> ^'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T01:58:40.437

这是一种选择：

```
array<Byte>^ array_data = gcnew array<Byte>(5);
for(int i = 0; i < 5; i++)
    array_data[i] = byte_data[i];
System::Text::UTF8Encoding::UTF8->GetString(array_data); 
```

没有编译，但我想你明白了。

或者使用 String 构造函数，如@ta.speot.is 所示，编码设置为`System.Text::UTF8Encoding`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T02:50:58.790

[用一些关于在指向有符号和无符号类型的指针之间转换的知识武装自己，](https://stackoverflow.com/questions/5040920/converting-from-signed-char-to-unsigned-char-and-back-again)然后你应该设置为使用[`String::String(SByte*, Int32, Int32)`](http://msdn.microsoft.com/en-us/library/ezh7k8d5.aspx). 阅读页面上的*备注*也可能是值得的，特别是关于编码。

我已经从此处的页面复制了示例：

```
// Null terminated ASCII characters in a simple char array 
char charArray3[4] = {0x41,0x42,0x43,0x00};
char * pstr3 =  &charArray3[ 0 ];
String^ szAsciiUpper = gcnew String( pstr3 );
char charArray4[4] = {0x61,0x62,0x63,0x00};
char * pstr4 =  &charArray4[ 0 ];
String^ szAsciiLower = gcnew String( pstr4,0,sizeof(charArray4) );

// Prints "ABC abc"
Console::WriteLine( String::Concat( szAsciiUpper,  " ", szAsciiLower ) );

// Compare Strings - the result is true
Console::WriteLine( String::Concat(  "The Strings are equal when capitalized ? ", (0 == String::Compare( szAsciiUpper->ToUpper(), szAsciiLower->ToUpper() ) ? (String^)"TRUE" :  "FALSE") ) );

// This is the effective equivalent of another Compare method, which ignores case
Console::WriteLine( String::Concat(  "The Strings are equal when capitalized ? ", (0 == String::Compare( szAsciiUpper, szAsciiLower, true ) ? (String^)"TRUE" :  "FALSE") ) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T06:16:40.067

对于那些对另一种工作解决方案感兴趣的人。我使用了 ta.speot.is 的笔记并开发了一个可行的解决方案，您应该可以使用这个解决方案或 Rasmus 提供的解决方案。

```
Byte byte_data[5];
byte_data[0]='a';
byte_data[1]='b';
byte_data[2]='c';
byte_data[3]='d';
byte_data[4]='e';

char *pstr3 =  reinterpret_cast<char*>(byte_data);
String^ example1 = gcnew String( pstr3 );//Note: This method FAILS if the string is not null terminated
                                        //After executing this line the string contains garbage on the end example1="abcde<IqMŸÖð"

String^ example2 = gcnew String( pstr3,0,sizeof(byte_data));    //String Example 2 correctly contains the expected string even if it isn't null terminated 
```

# c++ - 使用 OpenAL 和 FFMPEG 流式传输音频

> ID：14554409
> 
> 赞同：4
> 
> 时间：2013-01-28T01:51:11.500
> 
> 标签：c++, audio, ffmpeg, streaming, openal

好吧，基本上我正在开发一个简单的视频播放器，稍后我可能会问另一个关于滞后视频\同步到音频的问题，但现在我遇到了音频问题。我设法做的是浏览视频的所有音频帧并将它们添加到矢量缓冲区，然后使用 OpenAL 从该缓冲区播放音频。

这是低效且占用内存的，因此我需要能够使用我猜想的所谓旋转缓冲区来流式传输它。我遇到了一些问题，其中一个是关于使用 OpenAL 进行流式传输的信息并不多，更不用说使用 FFMPEG 解码音频并将其通过管道传输到 OpenAL 的正确方法了。我什至不太习惯使用向量作为缓冲区，因为老实说，我不知道向量在 C++ 中是如何工作的，但我知道如何设法从我的脑海中抽出一些东西来使它工作。

目前我有一个看起来像这样的视频类：

```
class Video
{
    public:
        Video(string MOV);
        ~Video();
        bool HasError();
        string GetError();
        void UpdateVideo();
        void RenderToQuad(float Width, float Height);
        void CleanTexture();
    private:
        string FileName;
        bool Error;
        int videoStream, audioStream, FrameFinished, ErrorLevel;
        AVPacket packet;
        AVFormatContext *pFormatCtx;
        AVCodecContext *pCodecCtx, *aCodecCtx;
        AVCodec *pCodec, *aCodec;
        AVFrame *pFrame, *pFrameRGB, *aFrame;

        GLuint VideoTexture;
        struct SwsContext* swsContext;

        ALint state;
        ALuint bufferID, sourceID;
        ALenum format;
        ALsizei freq;

        vector <uint8_t> bufferData;
}; 
```

底部的私有变量是相关的。目前我正在将类构造函数中的音频解码为 AVFrame 并将数据添加到 bufferData，如下所示：

```
 av_init_packet(&packet);

    alGenBuffers(1, &bufferID);
    alGenSources(1, &sourceID);

    alListener3f(AL_POSITION, 0.0f, 0.0f, 0.0f);

    int GotFrame = 0;

    freq = aCodecCtx->sample_rate;
    if (aCodecCtx->channels == 1)
        format = AL_FORMAT_MONO16;
    else
        format = AL_FORMAT_STEREO16;

    while (av_read_frame(pFormatCtx, &packet) >= 0)
    {
        if (packet.stream_index == audioStream)
        {
            avcodec_decode_audio4(aCodecCtx, aFrame, &GotFrame, &packet);
            bufferData.insert(bufferData.end(), aFrame->data[0], aFrame->data[0] + aFrame->linesize[0]);
            av_free_packet(&packet);
        }
    }
    av_seek_frame(pFormatCtx, audioStream, 0, AVSEEK_FLAG_BACKWARD);

    alBufferData(bufferID, format, &bufferData[0], static_cast<ALsizei>(bufferData.size()), freq);

    alSourcei(sourceID, AL_BUFFER, bufferID); 
```

在我的 UpdateVideo() 中，我通过视频流将视频解码为 OpenGL 纹理，因此我在那里解码音频并将其流式传输是有意义的：

```
void Video::UpdateVideo()
{
    alGetSourcei(sourceID, AL_SOURCE_STATE, &state);
    if (state != AL_PLAYING)
        alSourcePlay(sourceID);
    if (av_read_frame(pFormatCtx, &packet) >= 0)
    {
        if (packet.stream_index == videoStream)
        {
            avcodec_decode_video2(pCodecCtx, pFrame, &FrameFinished, &packet);
            if (FrameFinished)
            {
                sws_scale(swsContext, pFrame->data, pFrame->linesize, 0, pCodecCtx->height, pFrameRGB->data, pFrameRGB->linesize);
                av_free_packet(&packet);
            }
        }
        else if (packet.stream_index == audioStream)
        {
            /*
            avcodec_decode_audio4(aCodecCtx, aFrame, &FrameFinishd, &packet);
            if (FrameFinished)
            {
                //Update Audio and rotate buffers here!
            }
            */
        }
        glGenTextures(1, &VideoTexture);
        glBindTexture(GL_TEXTURE_2D, VideoTexture);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
        glTexImage2D(GL_TEXTURE_2D, 0, 3, pCodecCtx->width, pCodecCtx->height, 0, GL_RGB, GL_UNSIGNED_BYTE, pFrameRGB->data[0]);
    }
    else
    {
        av_seek_frame(pFormatCtx, videoStream, 0, AVSEEK_FLAG_BACKWARD);
    }
} 
```

所以我想最大的问题是我该怎么做？我一点头绪都没有。任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:23:31.990

首先，您需要创建 OpenAL 流式声源。此外，您还需要缓冲区池来读取流数据并排队等待 OpenAL 播放。

在打开时，您需要从 pull 中填充一些缓冲区并将它们添加到源队列 (alSourceQueueBuffers)。在更新过程中，您需要取消已播放缓冲区的队列

```
int processed = 0;
ALuint bufID = 0;
// ...
alGetSourcei(source_handle, AL_BUFFERS_PROCESSED, &processed);
while (processed--) {
    alGetError();
    alSourceUnqueueBuffers(source_handle, 1, &bufID);
    // return buffId to buffers pool;
} 
```

然后您需要从池中获取空缓冲区并使用它的缓冲区 ID 调用您的 bufferData 代码。

在 bufferData 中，您不需要创建源 - 将其作为参数传递。此外，您不需要设置源参数。只需将现有缓冲区排队到现有源。而不是 alSourcei(sourceID, AL_BUFFER, bufferID) 你需要使用 alSourceQueueBuffers(sourceID, 1, &bufferID)

# annotations - ebean 不会为继承的带注释字段生成方法？

> ID：14554410
> 
> 赞同：1
> 
> 时间：2013-01-28T01:51:35.577
> 
> 标签：annotations, playframework-2.0, ebean

这有效：

```
@MappedSuperclass
public class ExtendableTranslation extends Model {
    public String label;    
}

@Entity
public class LeagueT extends ExtendableTranslation {
   @Id
   public Integer id;
} 
```

但是如果我将 id 字段移动到超类：

```
@MappedSuperclass
public class ExtendableTranslation extends Model {
    public String label;    

    @Id
    public Integer id;
}

@Entity
public class LeagueT extends ExtendableTranslation {

} 
```

我有一个错误：

**[运行时异常：java.lang.NoSuchMethodError：models.translations.LeagueT._ebean_setni_id(Ljava/lang/Integer;)V]**

所有其他带注释的字段（@ManyToOne、@OneToMany）都是一样的。这是一个错误还是我做错了什么？

# qt - QtQuick 2.0 与 QGraphicsView (QPainter)

> ID：14554415
> 
> 赞同：5
> 
> 时间：2013-01-28T01:52:23.400
> 
> 标签：qt, pyqt, pyside, qpainter, qt-quick

我现在正在用 Python（PyQt / PySide）编写一个应用程序，它应该可视化并且应该可以编辑复杂的数据流图（如搅拌机中的节点）。另外，我希望这些节点显示 opengl 3D 对象（小的 opengl 场景，如节点上的按钮）、图像、控件等。 GUI 也会很复杂 - 它允许细分到面板并允许在每个面板中打开上下文（就像在 Eclipse 或 Visual Studio 中一样）。

我现在正在学习`QtQuick 2.0`，我已经阅读[了 Qt 5 中的绘画概述](http://qt-project.org/wiki/Qt5GraphicsOverview)。我想知道使用`QtQuick`over的真正好处是什么`QPainter`。 `QtQucik 2.0`不再`QGraphicsView`用作其后端（它直接使用`OpenGL`上下文）

在您可以使用的每种技术中`OpenGL`。在每一个中，您都可以绘制自定义外观的按钮和小部件（如节点、它们的连接等）（您甚至可以自己绘制它们`QPainter`并自己处理鼠标）。

当然`qml`是声明性的并且可以优化`OpenGL`调用，但这真的重要吗？我一直在寻找`QPainter`( `QGraphicsView`) 之间的任何基准测试，`QtQuick 2.0`但没有发现任何有趣的东西。

所以问题是：

1.  真的`QtQuick`是“未来”的技术吗？如果可能，我应该使用它吗？我将来会从中受益吗？或者它是简单的“另一种”方式来做同样的事情，比如`QPainter`with`QGraphicsView`和`QWidgets`？
2.  的可能性`QtQuick 2.0`真的高于`PySide`/`PyQt`吗？
3.  是`QtQuick`更适合开发这种应用程序还是应该坚持`PySide`/`PyQT`和`QPainter`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:20:46.677

如果您想将 UI 直接嵌入其他 OpenGL 元素，尤其是当您希望在有限的硬件上平滑过渡、动画等时，OpenGL 最重要。

1), 2) 很难回答 - 这取决于。对于具有类似 Eclipse 的复杂 UI 的桌面应用程序，在 QtQuick 中做所有事情是不可行的。我会留在那里的小部件。在 QtQuick 中重新实现 Eclipse 将是一项艰巨的任务，最终会导致一个几乎无法使用的 UI，与桌面无法很好地融合。如果您想要动画的自定义 UI，那么我会选择 QtQuick。那里有适合这项工作的工具，在 QWidget/plain QGraphicsView 中模仿它会很痛苦。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-20T13:52:19.733

A1。QtQuick 是一种实现流畅高级 UI 的现代技术。它使用场景图作为后端，这是以高性能和非常智能的方法利用硬件加速的最新技术。如果目标机器支持 OpenGL ES 2，场景图在 QPainter、QGraphicsView、场景图之间具有最佳性能。
它非常高效，但您需要注意一些性能技巧以保持尽可能高的性能。
它自然适用于 MVC/MVC 类模式，但选择/设计一个高效且合适的模型来集成和交互 Model/Controller/View 需要经验）。

A2。你的问题是错误的！QtQuick 是 Qt 的一部分，而不是与整个 Qt 平行的新事物。

A3。根据我的经验，在大型复杂应用程序的情况下，您需要谨慎选择一种好的方法来集成 C++ 和 QML（换句话说，从 C++ 控制 UI）。
您还可以使用 QPainter 或 QGraphicView 或 QOpenGL 或 QQuickItem 创建自定义元素，并将其与基于 QtQuick 的 UI 集成。
请记住，现在不可能静态构建 QtQuick！（AFAIK）

最后一句话，我强烈建议你在现实世界中学习和测试它。因为它在 Qt 框架中发展迅速，在我看来它是未来。

# c# - 匿名类型范围问题

> ID：14554418
> 
> 赞同：6
> 
> 时间：2013-01-28T01:52:53.957
> 
> 标签：c#, scope, anonymous-objects

创建一个变量的正确方法是什么，该变量将容纳通过 a 生成的匿名对象列表，`LINQ query`同时将变量声明保持在 a 之外`try/catch`并且在 a 内部处理分配`try/catch`？

目前我将变量声明为`IEnumberable<object>`，但是当我稍后尝试使用它时，这会导致一些问题......

IE

```
var variableDeclaration;
try{
    ...
    assignment
    ...
}catch... 
```

**编辑：**

如果它是相关的（不认为它是相关的），则作为`Json`MVC3 操作的结果返回对象列表。我正在尝试减少一些`using`语句在数据库中打开的时间，因为我遇到了一些我正在尝试解决的性能问题。在进行一些测试时，我遇到了这个问题，似乎找不到关于它的信息。

**编辑2：**

如果我可以要求避免专注于`LINQ`. 虽然使用了 LINQ，但问题更具体到与`Anonymous`对象相关的范围问题。不是使用 LINQ（在这种情况下）来生成它们的事实。

此外，一些答案提到了使用`dynamic`while 这将编译它不允许我稍后在该方法中需要的用法。如果我想要做的事情是不可能的，那么目前的答案似乎是`class`用我需要的定义创建一个新的并使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T01:59:23.180

好吧，如果您使用的是 LINQ，除非具体化，否则不会评估查询...

因此，您可能能够：

```
var myQuery = //blah
try
{
    myQuery = myQuery.ToList();  //or other materializing call
}
catch
{
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T02:02:58.450

可以通过创建Jon Skeet[在此处](https://msmvps.com/blogs/jon_skeet/archive/2009/01/09/horrible-grotty-hack-returning-an-anonymous-type-instance.aspx)`Cast`概述的通用方法来解决此问题。它会起作用并为您提供所需的智能感知。但是，在这一点上，为您的 linq 方法创建自定义类型有什么问题？

```
public class MyClass
{
    public int MyInt { get; set; }
}

IEnumerable<MyClass> myClass = 
    //Some Linq query that returns a collection of MyClass 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T02:08:11.543

你能不能使用`dynamic`??

```
 dynamic variableDeclaration;
     try
     {
         variableDeclaration = SomeList.Where(This => This == That);
     }
     catch { } 
```

不确定这会在您的代码块中进一步影响什么，但只是一个想法:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T02:13:43.233

如果您在像 try/catch 一样使用它之前声明变量，则不能使用 [var]，因为它是预期的。相反，您必须键入变量。

```
var x = 0;
try{
   x = SomethingReturningAnInt();
} 
```

或者

```
int x;
try{
   x = SomethingReturningAnInt();
} 
```

但是，在您的情况下，您并不真正“知道”该方法返回什么

```
var x = ...;
try{
   x = Something();
}
catch{} 
```

行不通

当您事先不知道类型时，您可以选择使用动态：

```
dynamic x;
try{
   x = Something();
}
catch{} 
```

（但这感觉就像回到 VB4）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T02:51:38.280

另一个作弊：您可以在本地定义变量（类似于 Jon 在 Dave Zych 答案中的破解），然后在 try/catch 中使用它。只要您可以在 try-catch 之前创建相同的匿名项目类型就可以了（因为具有相同字段名称和类型的匿名类型被认为是相同的）：

```
var myAnonymouslyType = Enumerable.Repeat(
    new {Field1 = (int)1, Field2 = (string)"fake"}, 0);

try 
{ 
   myAnonymouslyType = ...(item => 
     new {Field1 = item.Id, Field2=item.Text})...
}
... 
```

[这比Jon 在函数之间的匿名类型转换中](https://msmvps.com/blogs/jon_skeet/archive/2009/01/09/horrible-grotty-hack-returning-an-anonymous-type-instance.aspx)涵盖的选项更安全，因为如果类型不匹配，编译器会立即发现错误。

注意：如果你必须这样做，我会投票给非匿名类型......

注 2：根据您的实际需要，考虑简单地从 try/catch 内部返回数据，并在外部进行第二次默认信息返回。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-20T21:45:43.930

这让我烦恼了一段时间。最后，我构建了一些通用辅助方法，我可以在其中传入生成匿名对象的代码，并将 catch 代码作为 lamdas 如下

```
public static class TryCatch
{
    public static T Expression<T>(Func<T> lamda, Action<Exception> onException)
    {
        try
        {
            return lamda();
        }
        catch(Exception e)
        {
            onException(e);
            return default(T);
        }            
    }

}

//and example

Exception throwexception = null;
        var results = TryCatch.Expression(
            //TRY
            () => 
                {
                    //simulate exception happening sometimes.
                    if (new Random().Next(3) == 2)
                    {
                        throw new Exception("test this");
                    }
                    //return an anonymous object
                    return new { a = 1, b = 2 };
                } ,
            //CATCH
            (e) => { throwexception = e;                         
                     //retrow if you wish
                     //throw e;
                   }
            ); 
```

[https://gist.github.com/klumsy/6287279](https://gist.github.com/klumsy/6287279)

# javascript - 如何在 jplayer 音频播放器中播放我的音频文件？

> ID：14554419
> 
> 赞同：0
> 
> 时间：2013-01-28T01:52:59.480
> 
> 标签：javascript, jquery, html, html5-audio, jplayer

我正在尝试设置一个 Jplayer 音频播放器。我几乎完成了，但我想知道如何使用 $GET 方法播放我选择的音频文件并从数据库中检索？

这是指向音频播放器页面的链接，该页面假定播放一个文件`Kalimba.mp3`，该文件存储在目录中`AudioFiles/Kalimba.mp3`。

[音频播放页面](http://helios.hud.ac.uk/u0867587/Mobile_app/previewaudio.php?filename=Kalimba.mp3)

以下是 jplayer 说明的链接（错误所在的注释行）

[http://www.jplayer.org/latest/quick-start-guide/](http://www.jplayer.org/latest/quick-start-guide/)

下面是我目前拥有的代码，我注释了错误所在的行号：

```
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <title>Preview Audio</title>
    <link type="text/css" href="jquery/skin/jplayer.blue.monday.css" rel="stylesheet" />
    <script type="text/javascript" src="jquery/jquery-1.7.min.js"></script>   
    <script type="text/javascript" src="/jquery/jquery.jplayer.min.js"></script>
    <script type="text/javascript">   
        $(document).ready(function(){
      $("#jquery_jplayer_1").jPlayer({
        ready: function () {
          $(this).jPlayer("setMedia", { 
            mp4: "http://www.jplayer.org/audio/m4a/Miaow-07-Bubble.mp4",
            ogg: "http://www.jplayer.org/audio/ogg/Miaow-07-Bubble.ogg"
            mp3: "http://www.jplayer.org/audio/m4a/Miaow-07-Bubble.mp3",
            wav: "http://www.jplayer.org/audio/ogg/Miaow-07-Bubble.wav"
          });
        },
        swfPath: "/jquery",
        supplied: "mp4, ogg, mp3, wav"  // ERROR SHOWN HERE
      });
    }); 
    </script>  
</head>

<body>

<?php

$getaudio = 'AudioFiles/' . $_GET['filename'];

$audioquery = "SELECT AudioFile FROM Audio WHERE (AudioFile = ?)";

        if (!$audiostmt = $mysqli->prepare($audioquery)) {
        // Handle errors with prepare operation here
}

// Bind parameter for statement
$audiostmt->bind_param("s", $getaudio);

// Execute the statement
$audiostmt->execute();

            if ($audiostmt->errno) 
            {
                // Handle query error here
            }

$audiostmt->bind_result($dbAudioFile); 

$audiostmt->fetch(); 

$audiostmt->close(); 

?>

  <div id="jquery_jplayer_1" class="jp-jplayer"></div>
  <div id="jp_container_1" class="jp-audio">
    <div class="jp-type-single">
      <div class="jp-gui jp-interface">
        <ul class="jp-controls">
          <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
          <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
          <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
          <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
          <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
          <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
        </ul>
        <div class="jp-progress">
          <div class="jp-seek-bar">
            <div class="jp-play-bar"></div>
          </div>
        </div>
        <div class="jp-volume-bar">
          <div class="jp-volume-bar-value"></div>
        </div>
        <div class="jp-time-holder">
          <div class="jp-current-time"></div>
          <div class="jp-duration"></div>
          <ul class="jp-toggles">
            <li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
            <li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:59:41.247

下面的代码应该可以解决问题：

```
$getaudio = 'AudioFiles/' . $_GET['filename'];

$audioquery = "SELECT AudioFile FROM Audio WHERE (AudioFile = ?)";

        if (!$audiostmt = $mysqli->prepare($audioquery)) {
        // Handle errors with prepare operation here
}

// Bind parameter for statement
$audiostmt->bind_param("s", $getaudio);

// Execute the statement
$audiostmt->execute();

            if ($audiostmt->errno) 
            {
                // Handle query error here
            }

$audiostmt->bind_result($dbAudioFile); 

$audiostmt->fetch(); 

$audiostmt->close(); 

$info = pathinfo($dbAudioFile); 
```

# php - 提交php表单后将数据传递给jquery

> ID：14554420
> 
> 赞同：-2
> 
> 时间：2013-01-28T01:53:03.603
> 
> 标签：php, jquery, facebook

我有一个将文件上传到服务器的 php 代码，然后我有一个 facebook 发布 api。我想要做的是在用户输入通过 php 完全插入到 db 之后，然后将用户发布的数据传递给 jquery facebook api，然后 FB api 将自动获取数据并发布到用户提要。

我做了什么

*   PHP将文件上传到服务器和数据库中的数据存储（普通php），不是ajax，因为我不知道如何通过ajax上传文件
*   FB:api 使用硬编码数据发布到用户提要

还没完成

将插入的数据传递给jquery，并自动触发FB post api（我需要帮助）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:10:07.247

您始终可以回显出您需要的值：

```
<?php
    $phpValue = "This is the value.";
?>

<script>
    var phpValue = <?=$phpValue;?>;
    console.log(phpValue);
</script> 
```

[这是官方Facebook SDK 示例](https://github.com/facebook/facebook-php-sdk/blob/master/examples/with_js_sdk.php)的片段，其中完成了此操作：

```
[...]
<script>
      window.fbAsyncInit = function() {
        FB.init({
          appId: '<?php echo $facebook->getAppID() ?>',
          cookie: true,
          xfbml: true,
          oauth: true
        });
[...] 
```

# ember.js - DS.Adapter & ajax 请求

> ID：14554421
> 
> 赞同：1
> 
> 时间：2013-01-28T01:53:11.087
> 
> 标签：ember.js, ember-data

我不确定为我的“特定”json数据构建我的商店[https://gist.github.com/63fb3294a126a8150373#file-gistfile1-json](https://gist.github.com/63fb3294a126a8150373#file-gistfile1-json)

# 适配器

```
AppAdapter = DS.Adapter.extend
  findAll: (store, type) ->
    url = type.url
      $.ajax
        url: url
        dataType: 'json'
        context: store
        success: (response) =>
          response = response[0]
          @loadMany(type, response.data) 
```

# 楷模

```
App.Party = DS.Model.extend
  _id           : DS.attr 'string'
  name          : DS.attr 'string'
  lineup        : DS.attr 'string'
  begin_at      : DS.attr 'string'
  end_at        : DS.attr 'string'
  description   : DS.attr 'string'
  party_type    : DS.attr 'string'
  funny_rate    : DS.attr 'number'
  girls_rate    : DS.attr 'number'
  price_rate    : DS.attr 'number'
  place_id      : DS.attr 'string'
  begin_at_tmsp : DS.attr 'date'
  end_at_tmsp   : DS.attr 'date'
  digitick      : DS.attr 'string'
  # date          : DS.belongsTo 'App.Day'
  # place         : DS.belongsTo 'App.Place'
  # places        : DS.belongsTo 'App.Place'

App.Place = DS.Model.extend
  _id           : DS.attr 'string'
  city          : DS.attr 'string'
  description   : DS.attr 'string'
  gal_rating    : DS.attr 'string'
  latitude      : DS.attr 'string'
  location      : DS.attr 'string'
  longitude     : DS.attr 'string'
  name          : DS.attr 'string'
  postal_code   : DS.attr 'string'
  street        : DS.attr 'string'
  total_points  : DS.attr 'string'
  total_rating  : DS.attr 'string'
  # parties       : DS.hasMany 'App.Party' 
```

我总是收到错误

**'对象[对象对象]没有方法'loadMany'**

你能帮忙吗 ？

# jquery - BX Slider - div 类包装器错误

> ID：14554422
> 
> 赞同：1
> 
> 时间：2013-01-28T01:53:17.033
> 
> 标签：jquery, slider, jquery-ui-slider, bxslider

我是第一次使用 bxslider，一点也不精通 javascript，但我一直在拼凑一些项目。我完美地设置了滑块，当我上传到服务器时，我替换了我的一个 jquery 文件。现在它无法正确加载，我不知道为什么。

你可以在这个链接上看到 [http://www.blackheartmx.com/index.html](http://www.blackheartmx.com/index.html)

我不知道它是冲突的 CSS 文件还是 jquery 文件中的错误，但我很难过。我将滑块完美地集成在一起，因此它看起来像是订购页面之一。

[http://www.blackheartmx.com/crf-calamity.html](http://www.blackheartmx.com/crf-calamity.html)（例如没有bx滑块的图像定位）。

我真诚地感谢一些帮助！

# php - 如何从此 PHP 数组中提取值

> ID：14554423
> 
> 赞同：-2
> 
> 时间：2013-01-28T01:53:27.340
> 
> 标签：php, arrays, laravel

我对 PHP 比较陌生，我正在尝试从数组中提取特定值

我的代码是`$zc1 = DB::query('select lat, lon from zips where zip_code=?', $zip1);`

当我`return print_r($zc1);`得到以下信息时

数组（[0] => stdClass 对象（[lat] => 38.296199798584 [lon] => -77.485298156738））

我的问题是如何获得“lat”和“lon”的值？

顺便说一句，我正在使用 PHP 框架 Laravel。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T01:56:14.587

这是非常基础的，如果您不知道这一点，您可能应该阅读一两本关于 PHP 的书。

话虽如此，方法如下：

```
$lat = $zc1[0]->lat;
$lon = $zc1[0]->lon; 
```

# asp.net - ASP.NET 验证建议

> ID：14554426
> 
> 赞同：0
> 
> 时间：2013-01-28T01:54:13.587
> 
> 标签：asp.net

简单地说，现在我有 8 个从左到右的文本框和最右边的标签。它就像一个时间表的员工工作表，您将时间输入每个文本框，它会计算时间并输出到右侧的标签。

现在，我需要验证每个文本框中的数字，第一个文本框是“in”，第二个是“out”，第三个是“in”，第四个是“out”，依此类推。验证任务将是

*   如果它们都是数字
*   如果数字在范围之间（用户输入 . 而不是 : 以分钟为单位的时间），那么 1:39 将是 1.39 并且不能有例如 2.61。1<=x<=1.59。
*   在“in”之后，必须有一个“out”，并且不能紧跟“in”
*   例如，第一个盒子和第四个盒子可以有一些值，第二个和第三个可以是空的。但是，第 4 个框中的值必须等于或大于第 1 个框。

我不知道如何解决这个问题。我需要一个干净、简单、可管理、可扩展且优雅的编程结构。有办法吗？

我尝试了验证器控件，但有限制。我应该为每个验证任务设置一个函数并调用它们中的每一个吗？（我有一个名为计算的按钮，它将开始这一切）。

我认为这对业主来说是一个简单的解决方案，但它变得非常复杂和忙碌。有人可以朝正确的方向小费吗？对不起，复杂的规则。顺便说一句，我对 ASP.NET 还很陌生，想看看大师如何解决这个问题。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T04:16:16.623

您的描述听起来像是您正在尝试计算 4 个班次的总小时数 InTimeShift1, OutTimeShift1; InTimeShift2，OutTimeShift2；InTimeShift3，OutTimeShift4；InTimeShift4，OutTimeShift4

您不应该使用数字代替时间。例如，您的员工将如何在下午 2:35 快速键入 InTime？在数量上，它将是 2.5833333333333333。我不相信您的所有用户都是数学专家。

相反，允许用户键入实际的 InTime 和 OutTime。

然后进行验证：

```
Public Function fnbIsValidInputs( pvsTime As String) As Boolean
    Dim vbValidationOK As Boolean = False
    If IsDate( InTimeShift1 ) And IsDate( InTimeShift2 ) And IsDate( InTimeShift3 ) _
        And IsDate( InTimeShift4 ) And IsDate( OutTimeShift1 ) _
        And IsDate( OutTimeShift2 ) And IsDate( OutTimeShift3 ) _
        And IsDate( OutTimeShift4 ) Then vbValidationOK = True

    Return vbValidationOK
End Function

Public Function fniMinutesClocked( pvdInTime As Date, pvdOutTime As Date ) As Long
    Return DateDiff( DateInterval.Minute, pvdInTime, pvdOutTime )
End Function 
```

# arrays - Delphi 处理大量运行时创建的组件

> ID：14554428
> 
> 赞同：0
> 
> 时间：2013-01-28T01:54:55.067
> 
> 标签：arrays, delphi, components

现在，我使用 2 个数组，一个是 TImage，另一个是 TMemo，在滚动框内逐行绘制文本数据旁边的图像。

我希望用面板上的几个组件替换 TMemo。所以可能是一些静态文本一个按钮和一些标签。但我现在这样做的方式似乎会变得一团糟。

有没有更好的方法来解决这个问题而无需编写组件或类。我应该使用某种多维数组还是可以使用记录结构来声明组件并拥有一个数组？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T04:29:25.913

记录至少可以减轻您管理大量并行数组的负担，但您可以做得比记录更好，也比数组更好。

首先，您可以设计一个*框架*来表示表单的一个“行”。给它一个图像、按钮、标签和任何你需要的东西。然后在每次需要时创建该框架类的实例。它将自动为您创建组件。你说你不想要一个自定义组件，这本质上就是一个框架，但是通过像设计一个表单一样在视觉上设计它，创建复合控件的大部分负担都被解除了，所以你只是得到了好处一组可以作为一个单元相互交互的相关控件。

与数组相比，您可能会发现使用不同的集合对象会更成功，尤其是`TComponentList`它比数组更容易增长和缩小，并且还有助于管理其内容的所有权。

# ruby-on-rails - 我是否需要 FreeTDS 才能在 Windows 下使用 TinyTDS？

> ID：14554432
> 
> 赞同：1
> 
> 时间：2013-01-28T01:55:33.573
> 
> 标签：ruby-on-rails, ruby, tiny-tds

我正在尝试从 Rails 应用程序连接到 SQL Express，并且我已经安装了 TinyTDS gem。我不断收到错误消息：

```
--------------------
Unable to connect: Adaptive Server is unavailable or does not exist
-------------------- 
```

我在 Google 上找到的所有内容都与 FreeTDS 有关。我是否需要它才能在 Windows 上使用 TinyTDS？TinyTDS [github 页面](http://github.com/rails-sqlserver/tiny_tds)说它需要它，但它没有提到 Windows。

我需要驱动程序或其他东西吗？我已经安装了“activerecord-sqlserver-adapter”gem。

如果我确实需要 FreeTDS，我在哪里可以得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:08:53.163

安装此 gem 时，Windows 上会安装 Tiny_TDS 的二进制版本。这包括 FreeTDS，因此无需单独安装。只有当您想在 Windows Azure 上使用 SQL 数据库时，您才需要担心 Windows 上的 FreeTDS，这需要您手动构建 FreeTDS。

有几件事可能出错，可能导致连接失败：

*   SQL Express 不安装默认实例，而是安装“sqlexpress”实例。也许尝试连接到'servername\sqlexpress'。
*   SQL Express 可能不允许网络连接。如果您通过网络尝试此操作，您可能必须启用网络。
*   TCP/IP 和命名管道可能未启用。我认为 Tiny_TDS 使用 TCP/IP。
*   SQL Express 可能使用的是动态端口，而不是预期的 1433，因此可能需要检查端口。

这是一篇可能有帮助的文章：http: [//blogs.msdn.com/b/sqlexpress/archive/2005/05/05/415084.aspx](http://blogs.msdn.com/b/sqlexpress/archive/2005/05/05/415084.aspx)。

# c# - 自定义属性的检查方法

> ID：14554447
> 
> 赞同：1
> 
> 时间：2013-01-28T01:58:14.337
> 
> 标签：c#, custom-attributes, late-binding

我不确定为什么下面的方法总是返回 false

```
 // method to check for presence of TestCaseAttribute
    private static bool hasTestCaseAttribute(MemberInfo m)
    {
        foreach (object att in m.GetCustomAttributes(true))
        {
            Console.WriteLine(att.ToString());
            if (att is TestCase.TestCaseAttribute) // also tried if (att is TestCaseAttribute)
            {
                return true;
            }
        }
        return false;

    } 
```

即使控制台输出如下所示：

```
TestCase.DateAttribute
TestCase.AuthorAttribute
TestCase.TestCaseAttribute 
```

我在这里想念什么？

编辑; 这种方法似乎有效......

```
 private static bool hasTestCaseAttribute(MemberInfo m)
    {
        if (m.GetCustomAttributes(typeof(TestCaseAttribute), true).Any())
        {
            return true;
        }
        else
        {
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T02:13:10.043

这应该可以解决问题。

```
 private static bool hasTestCaseAttribute(MemberInfo m)
    {
        return m.GetCustomAttributes(typeof(TestCaseAttribute), true).Any();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T02:29:08.610

```
public static bool HasCustomAttribute(MethodInfo methodInfo, bool inherit = false)
{
    return methodInfo.GetCustomAttribute<CustomAttribute>(inherit) != null;
} 
```

您可以使用上面的函数，它比您当前的方法更简洁。sa_ddam 的片段也可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T02:10:55.873

你可以试试这个：

```
private static bool hasTestCaseAttribute(MethodInfo method)
{    
    object[] customAttributes = Attribute.GetCustomAttribute(method, 
                                    typeof(TestCase), true) as TestCase;
    if(customAttributes.Length>0 && customAttributes[0]!=null)
    {
        return true;
    }
    else
    {
        return false;
    }
  } 
```

# android - ViewPager 和长按

> ID：14554450
> 
> 赞同：3
> 
> 时间：2013-01-28T01:58:36.770
> 
> 标签：android, android-viewpager, onlongclicklistener

我有一个位于 viewpager 之上的布局。

viewpager 用作动态变化的背景。

长按viewpager（长按背景），前景元素应该消失。

我在 viewpager 上放置了一个长点击监听器，但它没有立即响应这个。这个链接的答案似乎触及了这个主题，但我不知道如何实现它，帮助？

[https://stackoverflow.com/a/11303508/727429](https://stackoverflow.com/a/11303508/727429)

我也在尝试其他用户体验（点击、按钮和动作手势来做同样的事情）但现在我想解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:11:22.633

答案是在 viewpager 的 instantiateItem 类中设置一个监听器。

基本上在其中声明您的视图，并在其上设置一个 onClickListener

# macos - 捕获 osx 10.8 屏幕的高效 wat

> ID：14554452
> 
> 赞同：0
> 
> 时间：2013-01-28T01:58:48.020
> 
> 标签：macos, screenshot

我想捕获屏幕进行处理，可能会录制视频或其他内容，但 CGDisplayCreateImage 似乎效率低下，需要 0.023808 秒

代码：

```
NSDate* timingDate = [NSDate date];
cgi_image = CGDisplayCreateImage(mainDisplay);
NSLog(@"Time taken: %f", [[NSDate date] timeIntervalSinceDate: timingDate]); 
```

我读了一些关于 framebuffer 和 opengl 但没有用的东西，有什么建议吗？

研究生。

# jquery - 在 Rails 中使用 AJAX 查询更新内容

> ID：14554457
> 
> 赞同：0
> 
> 时间：2013-01-28T02:00:25.487
> 
> 标签：jquery, ruby-on-rails, ajax

rails/ajax/jquery 的初学者，所以不确定如何实现。基本上，我有一个计划页面，其中显示了来自我的数据库的过滤结果（结果由多个参数过滤）。

我有一堆切换和下拉菜单，所有这些都采用相同的形式，并且具有需要传递给数据库以过滤结果的值。

我想在这些切换/下拉列表中的任何一个发生更改时查询数据库，并使用 ajax 更新结果列表。

结果，切换在planner/index过滤在Planner_controller中完成，它调用不同的模型restaurant.rb和activity.rb

{

```
class PlannerController < ApplicationController
def index
puts "these are params"
#Restaurant.create params[:restaurant]
#params[:restaurant]
b,g,a,l,t,loc = "b2", "g2", "a2", "l2", "t2", "newyork"
if(params[:budget] != nil)
  b= params[:budget]
end
if(params[:size] != nil)
  g=params[:size]
end
if(params[:age] != nil)
  a= params[:age]
end
if(params[:activity] != nil)
  l= params[:activity]
end
if(params[:tourist] != nil)
  t= params[:tourist]
end
if(params[:city] != nil)
    loc = params[:city]
end    

@lrestaurants = Restaurant.lsearching(b,g,a,l,t,loc)
@drestaurants = Restaurant.dsearching(b,g,a,l,t,loc)
@activities = Activity.searching(b,g,a,l,t,loc)
activitieslist = @activities
drestlist = @drestaurants 
lrestlist = @lrestaurants 
end 
```

}

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T02:24:04.407

我之前给出了几乎相同的[答案](https://stackoverflow.com/a/11603188/868273)

唯一的区别是您需要呈现 erb 表单（我猜），但在我的示例中 - 它是 ActiveAdmin DSL

要呈现部分文本而不是内联文本，您需要完成两个额外的步骤

根据此更改渲染方法

```
 def change_flats
   @flats = House.find_by_id(params[:house_id]).try(:flats)

   respond_to do |format|
     format.js(render :layout=>false)
   end
 end 
```

并使用 JS 创建部分`change_flats.js.erb`，您需要替换当前页面的一部分

```
#change_flats.js.erb

$("#block_id").html("<%= render 'partial_with_necessary_html_here' %>") 
```

# php - 如何在新行中的每个部分将逗号分隔的字符串插入 MySQL 表？

> ID：14554458
> 
> 赞同：-2
> 
> 时间：2013-01-28T02:00:27.367
> 
> 标签：php, mysql, loops, explode

> **可能重复：**
> [在 MYSQL 中从文本框中的逗号分隔文本添加新行 在](https://stackoverflow.com/questions/5690250/add-new-row-in-mysql-from-comma-separated-text-in-textbox)
> [表中插入逗号分隔的记录](https://stackoverflow.com/questions/8134967/insert-comma-separated-records-in-table)

```
$words = 'word1,word2,word3'; 
```

我如何将这些数据转换为以下结构：

MySQL 表：

```
id    value
 1    word1
 2    word2
 3    word3 
```

我在想什么：

```
$separated = explode(",",$words);
//do some kind of loop
INSERT INTO table (value) VALUES ('$something'); 
```

我想我很讨厌循环：/

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T02:03:47.257

```
$wordArray = explode(",", $words);

$stmt = "INSERT INTO table (column) VALUES ('" . implode("'), ('", $wordArray) . "')"; 
```

这将产生：

```
INSERT INTO table (column) VALUES ('word1'), ('word2'), ('word3') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T02:04:01.640

做一个简单的循环，例如：

```
foreach($separated as $seperate){
    $sql .= "INSERT INTO table (value) VALUES ('$seperate')";
} 
```

# ios - 以编程方式创建对象并更改该对象的位置

> ID：14554459
> 
> 赞同：2
> 
> 时间：2013-01-28T02:00:34.963
> 
> 标签：ios, objective-c, uiimageview

我正在尝试创建几个 UIImageViews（最好使用 for 循环），然后移动它们，但我不知道如何移动它们，因为如果以编程方式制作它们，我无法弄清楚如何引用它们。

所以我想要这样的东西：

```
 for (int i = 0; i < 2; i++)
    {
        UIImageView *iv = [[UIImageView alloc]initWithImage:[UIImage imageNamed: picturo]];
        CGRect rect = CGRectMake((i * 50) + 50,30, 25, 25);
        [iv setFrame:rect];
        iv.tag = i;
        [self.view addSubview:iv];
    }

    (iv with tag of 0).center.y = 80; // <-- How do I do that!! 
```

显然这个例子没有实际用途，我可以将 'rect' 以上的 y 值更改为 80，但我想知道如何：

一个。创建多个 uiimageviews（或任何对象）并能够单独识别/引用/操作每个（我不知道如何，但我会假设通过唯一命名它们或使用标签）和

湾。能够识别/引用/操作以编程方式创建的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:29:28.143

creating views with tags works the way you have it.

To access those views use the `viewWithTag` property on a view to identify one of it's subviews:

```
 UIView* subview = [self.view viewWithTag:0];
  subview.center = CGPointMake(subview.center.x, 80); 
```

(you cannot write to a `view.center`'s `x` or `y`, you have to recreate the whole thing. Likewise with other geometric structs such as `CGSize`, `CGRect`)

# google-app-engine - 如何让 Google App Engine 中的 Web2py 表迁移工作？

> ID：14554461
> 
> 赞同：0
> 
> 时间：2013-01-28T02:01:16.297
> 
> 标签：google-app-engine, web2py

我已经使用 web2py 几年了，但只是从部署到 GAE 开始。

我能够在 GAE 上运行一个简单的 web2py 应用程序，然后进行了一些修改，其中包括架构修改。我开始遇到奇怪的错误（插入失败，因为字段需要是浮点数，当它被显式设置为浮点常量时），看起来 GAE 中没有进行模式修改——检查数据存储显示带有旧模式的实体（例如，我有问题的浮点字段丢失）。这些迁移在本地运行良好（使用 SQLite）。

settings.migrate 设置为 True，并且所有表都已将 migrate 设置为该值。

不确定我可以提供哪些代码会有所帮助；所有 define_table 调用都是非常标准的。

至于问题：

如果有的话，我需要做什么才能使这些迁移工作？如果它涉及删除我的表的当前实体（因此可以创建具有正确模式的新实体），我将如何去做？（我的 Datastore Admin 页面完全空白。）这可能与尝试在 GAE 上截断表失败有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:41:35.673

通过将新字段从浮点数更改为双精度数解决了该问题；不确定带有浮动的问题来自哪里（web2py 或 GAE，或两者之间的接口），但这是绕过它的简单方法。

# ios - 按下 UITableView“单元格”时在 DOCUMENTS 中加载音频

> ID：14554462
> 
> 赞同：2
> 
> 时间：2013-01-28T02:01:39.067
> 
> 标签：ios, uitableview, audio, avfoundation, documents

我有一个 UITableView 在 Documents Directory 中显示一个 llist f 文件......我希望它在按下时播放 Documents 目录中的音频文件......

它运行没有错误，但按下时不播放音频...

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *fileName = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%d.caf",indexPath.row+1]];
NSURL *audioURL = [NSURL URLWithString:fileName];

NSData *audioData = [NSData dataWithContentsOfURL:audioURL];

NSError *error;

_audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:audioURL error:&error];

    _audioPlayer.delegate = self;
        [_audioPlayer play];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T03:39:17.753

更改此行：

```
NSURL *audioURL = [NSURL URLWithString:fileName]; 
```

对此：

```
NSURL *audioURL = [NSURL fileURLWithPath:fileName isDirectory:NO]; 
```

然后做：

```
 if(_audioPlayer == nil)
    {
        _audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:audioURL error:nil];
    }
    else
    {
        _audioPlayer = [self.audioAlert initWithContentsOfURL:audioURL error:nil];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T03:15:20.467

首先，声明文件路径的最佳方法是

```
- (NSString *)docsdir {
return [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0];
} 
```

在您的标题中，声明`NSString *Path;`

然后，在视图加载时声明这样的路径

```
Path = [[self docsdir]stringByAppendingPathComponent:[NSString stringWithFormat:@"%d.caf",indexPath.row+1]];
if (![[NSFileManager defaultManager]fileExistsAtPath:Path]) {

    [[NSFileManager defaultManager]copyItemAtPath:[[NSBundle mainBundle]pathForResource:[NSString stringWithFormat:@"%d",indexPath.row+1] ofType:@"caf"] toPath:Path error:nil];

} 
```

现在玩它，这样做

```
 AVAudioPlayer *player = [[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:Path] error:&error];
player.delegate = self;
[player play]; 
```

# java - 在设备中安装 Android 应用

> ID：14554468
> 
> 赞同：0
> 
> 时间：2013-01-28T02:02:39.357
> 
> 标签：java, android, installation

我是一个android编程的新手，几天前我做了一个简单的游戏，我尝试将它安装在平板电脑（Android 4.0）中。

该程序运行正常，但安装后我的应用程序有四 (4) 个图标，其中只有一个是正确的（第三个）。

我只想知道如何解决这个错误，以便当我将它安装在另一台设备上时它运行正常并且只得到一个图标。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:10:38.783

这是因为在您的清单中，您需要更改所有活动，除了您的第一个活动（通常是您的 mainActivity）：

```
<activity
            android:name=".SecondActivity"
            android:label="activity name" >
            <intent-filter
                android:label="Your App Name">
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

到：

```
<activity
            android:name=".SecondActivity"
            android:label="activity name" >
        </activity> 
```

基本上只需从所有不是主要活动的活动中取出意图过滤器。您的主要活动需要它，以便有一个启动器图标。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T02:07:40.990

> 安装后我的应用程序有四 (4) 个图标

表示您已将多个 Activity 声明`AndroidManifest.xml`为启动 Activity。要仅将一个 Activity 显示为启动器，您只需声明一个带有`android.intent.action.MAIN`意图`android.intent.category.LAUNCHER`过滤器的 Activity。将您想在启动器中显示的主要活动声明为：

```
<activity android:name="MainActvity"
          android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

和其他 3 个活动声明`AndroidManifest.xml`为：

```
<activity android:name="Actvity_Two"
              android:label="@string/app_name" />
<activity android:name="Actvity_Three"
              android:label="@string/app_name" />
//declare other in same way .. 
```

# sql - Firebird 将整数转换为时间或日期

> ID：14554471
> 
> 赞同：3
> 
> 时间：2013-01-28T02:03:09.657
> 
> 标签：sql, firebird, firebird2.5

我有一个将秒数存储为整数的表。我想显示它并将其用作时间或日期。

如果我写这个：

```
Select Cast(ColAmountofSeconds as Time) as ThisTime From MyTable; 
```

与：

```
Select Cast(ColAmountofSeconds as Date) as ThisTime From MyTable; 
```

我收到以下错误：

> 数据类型转换期间发生溢出。字符串“14”的转换错误。

注意“14”是 ColAmountofSeconds 列中第一行的值。

这在 SQL Server 中是如此自然，以至于我无法相信我花了这么多时间来解决这个问题。

**编辑**

我不敢相信这是答案：

```
Update MyTable
Set TIMESPENT =  time '00:00:00' + ColAmountOfSeconds; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T02:29:03.297

Firebird [cast 函数](http://www.firebirdsql.org/refdocs/langrefupd21-intfunc-cast.html)不支持将数值转换为日期、时间或时间戳。

您可以利用 Firebird 支持日期和数值之间的算术这一事实，因此您可以这样编写查询：

```
select dateadd(second, ColAmountOfSeconds, cast('00:00:00' as time))
  from myTable;

--or the equivalent:

select cast(cast('2013-01-01' as timestamp) + cast(ColAmountofSeconds as double precision) / 86400 as TIME)
  from myTable; 
```

# java - 正则表达式和 StringTokenizer 语法错误

> ID：14554472
> 
> 赞同：-2
> 
> 时间：2013-01-28T02:03:11.470
> 
> 标签：java, regex, stringtokenizer, matcher

我是正则表达式的新手`StringTokenizer`，并且每当我将此正则表达式放入时都会出现语法错误`matches`：

```
while ((line = br.readLine()) != null) { 
    StringTokenizer stringTokenizer = new StringTokenizer(line, "\n");

    while (stringTokenizer.hasMoreElements()) {
        String function = stringTokenizer.nextElement().toString();

        if (function.matches(\\s*(unsigned int|float|int|char|void|double)(\\s)+[a-zA-Z_](\\w)*(\\s)*\\((\\s)*((((unsigned int|float|int|char|double)(\\s)*,(\\s)*)*((unsigned int|float|int|char|double)(\\s)*))|(\\s)*|(void)(\\s)*)\\)(\\s)*\\;)) {
            System.out.println("VALID - ");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:49:29.867

可能是复制和粘贴错误，但可能是您缺少正则表达式周围的引号以使其成为`String`. 例如：

```
while ((line = br.readLine()) != null) { 
    StringTokenizer stringTokenizer = new StringTokenizer(line, "\n");

    while (stringTokenizer.hasMoreElements()) {
        String function = stringTokenizer.nextElement().toString();

        if (function.matches("\\s*(unsigned int|float|int|char|void|double)(\\s)+[a-zA-Z_](\\w)*(\\s)*\\((\\s)*((((unsigned int|float|int|char|double)(\\s)*,(\\s)*)*((unsigned int|float|int|char|double)(\\s)*))|(\\s)*|(void)(\\s)*)\\)(\\s)*\\;")) {
            System.out.println("VALID - ");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:07:33.757

[`matches`方法](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29)作为方法参数......因此，将`String`您的正则表达式括在引号**“”**中 ，如下所示：

```
function.matches("\\s*(unsigned int|float|int|char|void|double)(\\s)+[a-zA-Z_](\\w)*(\\s)*\\((\\s)*((((unsigned int|float|int|char|double)(\\s)*,(\\s)*)*((unsigned int|float|int|char|double)(\\s)*))|(\\s)*|(void)(\\s)*)\\)(\\s)*\\;)") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:38:51.697

用引号**""**将您的字符串括起来，注意当使用运算符“或” (|) 来表示两个连续的单词时，我们应该在括号中使用它们`((unsigned int) | float)`

```
while ((line = br.readLine()) != null) { 
StringTokenizer stringTokenizer = new StringTokenizer(line, "\n");

while (stringTokenizer.hasMoreElements()) {
    String function = stringTokenizer.nextElement().toString();

    if (function.matches("\\s*((unsigned int)|float|int|char|void|double)(\\s)+[a-zA-Z_](\\w)*(\\s)*\\((\\s)*((((unsigned int|float|int|char|double)(\\s)*,(\\s)*)*((unsigned int|float|int|char|double)(\\s)*))|(\\s)*|(void)(\\s)*)\\)(\\s)*\\;")) {
        System.out.println("VALID - ");
    }
} 
```

}

# static-analysis - ttest 返回值 by , sort: 在 Stata

> ID：14554478
> 
> 赞同：1
> 
> 时间：2013-01-28T02:04:15.680
> 
> 标签：static-analysis, stata

我有一个包含大约 40 个变量的数据集。其中大约一半是测量值，另一半是有关该观察的人口统计信息。每个 id 有两个观察入口和出口。我正在比较进入与退出时的测量方法。

我已经编写了代码来为每个测量运行 ttest 然后存储在一个 txt 文件中，这很好用。

现在我需要按人口统计变量进行一些分组。

我正在使用以下

```
by var1, sort: ttest var2 by stage 
```

stage 是定义观察是进入还是退出的变量。var1 是人口统计变量之一（例如性别、吸烟、饮酒），可以有 2-4 个编码值。

我要做的是循环运行此代码并写入文本文件。但是， r() 命令仅返回运行 ttest 的最后一组的结果。

它自己工作的代码，因为所有 ttest 结果都打印到结果屏幕，但是，并非所有结果都被写入文件。

例如，如果 var1 的可能值为 1 ,2 ,3 和 4 我只得到第 4 组的结果。

```
foreach var of var  ttlchol-exvol{
foreach v of var sex dm chf diastolic copd ckd Depression {
        capture by `v',sort: ttest `var' , by(stage)
        if !_rc {
        by `v',sort: ttest `var', by(stage)
        file write myfile2 ///
            %9s "`var'" _tab %7.3f (r(N_1)) ///
            _tab %7.3f (r(N_2))      _tab %7.5f (r(p_l)) /// 
            _tab %7.5f (r(p_u))      _tab %7.5f (r(p)) /// 
            _tab %7.5f (r(se))      _tab %7.3f (r(t)) /// 
            _tab %7.3f (r(sd_1))      _tab %7.3f (r(sd_2)) /// 
            _tab %7.3f (r(mu_1))      _tab %7.3f (r(mu_2)) /// 
            _tab %7.3 (r(df_t)) ///
            _n
                }
                                                            }
                            } 
```

我已经寻找有关 STATA 如何处理 by , sort: 的更多详细信息，但我无法找到一种方法来捕获每次迭代的结果。

是否有可能获得 a by , sort: 函数的每次迭代的结果？如果是这样，我会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:51:56.597

我不确定这是否可行，但我认为如果您单独运行每个 ttest，然后在每个 ttest 之后写入文件，而不是运行一次最多执行 4 个 ttest 的 bysort，它会有所帮助。这是我这样做的想法：

```
foreach var of var  ttlchol-exvol{
    foreach v of var sex dm chf diastolic copd ckd Depression {
        levelsof `v', local(coded_vals)
        foreach single_val of local coded_vals {
            capture ttest `var' if `v' == `single_val' , by(stage)
            if !_rc {
                ttest `var' if `v' == `single_val' , by(stage)
                file write myfile2 ///
                    %9s "`var', `v' = `single_val'" _tab %7.3f (r(N_1)) ///
                    _tab %7.3f (r(N_2))      _tab %7.5f (r(p_l)) /// 
                    _tab %7.5f (r(p_u))      _tab %7.5f (r(p)) /// 
                    _tab %7.5f (r(se))      _tab %7.3f (r(t)) /// 
                    _tab %7.3f (r(sd_1))      _tab %7.3f (r(sd_2)) /// 
                    _tab %7.3f (r(mu_1))      _tab %7.3f (r(mu_2)) /// 
                    _tab %7.3 (r(df_t)) ///
                    _n
             }
        }
    }
} 
```

这里：

```
levelsof `v', local(coded_vals) 
```

创建一个`coded_vals`具有所有`v`发生值的本地。然后它遍历这些值并对每个值进行一次测试，并将其记录到文件中。我不是文本格式化专家，但我还在你的文件编写器中添加了一行，记录了它的编码值`v`。如果您有任何问题，请告诉我。

# c# - 是否有等效的散装包含？

> ID：14554479
> 
> 赞同：2
> 
> 时间：2013-01-28T02:04:16.490
> 
> 标签：c#, linq

是否有一些实用程序可以检查序列是否包含多个元素而不是`Contains`重复使用？

```
List<string> containter = new List<string>();

for (int i = 0; i < 10; i++)
{
    containter.Add("string #" + i);
}

if (containter.Contains("string #2") &&       //Is it possible to replace this with one call passing two strings to improve efficiency 
    containter.Contains("string #6"))
{
    //Do Something
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T02:07:38.183

根据更新的问题，我修改了我的答案：

```
List<string> containter = new List<string>();
for (int i = 0; i < 10; i++)
{
    containter.Add("string #" + i);
}
//define a checklist
List<string> checkList = new List<string> { "string #2", "string #6" };
//we're in, if every item in checkList is present in container
if (!checkList.Except(containter).Any())
{
    Console.WriteLine("true");
} 
```

你仍然可以使用[`Any`](http://msdn.microsoft.com/en-us/library/bb337697.aspx). [`Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)但在这种情况下，使用方法会很好。

`checkList`如果结果序列中的每个项目都不`container`包含任何元素，那么`Any`应该返回`false`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T02:19:25.270

我假设您想比较两个序列，并想知道一个序列是否包含另一个序列中的所有元素。

```
var outer = new List<String>() { "1", "2", "3" };
var inner = new List<String>() { "1", "2" };
bool outerContainsAllInnerElements = inner.TrueForAll(i => outer.Contains(i)); 
```

或者，您可以使用`Intersect()`，但是当您尝试获取其计数时，这会将您的项目投影到一个新序列中。如果那是您想要的，那很好，但是如果您不需要知道哪些元素相交，那么`TrueForAll()`可以节省开销。

```
var outer = new List<String>() { "1", "2", "3" };
var inner = new List<String>() { "1", "2" };
var elementsInBoth = outer.Intersect(inner);
bool outerContainsAllInnerElements = (elementsInBoth.Count() == inner.Count()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T02:06:41.163

`Any`：

```
string s = "I am a string";
string[] check = { "is", "my" };

Console.WriteLine(check.Any(x => s.Contains(x))); // False

s = "This is a string";
Console.WriteLine(check.Any(x => s.Contains(x))); // True

s = "my string";
Console.WriteLine(check.Any(x => s.Contains(x))); // True 
```

# java - 为 Eclipse 安装 TFS 插件的问题

> ID：14554484
> 
> 赞同：2
> 
> 时间：2013-01-28T02:05:20.187
> 
> 标签：java, eclipse, tfs

我想为 Eclipse (Juno) 安装 TFS 插件。我按了帮助->安装新软件。然后，“添加”-> 输入微软网站上写的地址（[http://dl.microsoft.com/eclipse/tfs/](http://dl.microsoft.com/eclipse/tfs/)）。

Eclipse 尝试加载它一段时间，然后它给了我一个错误：“与[http://dl.microsoft.com/eclipse/tfs/](http://dl.microsoft.com/eclipse/tfs/)上的存储库通信失败。读取超时”

在那次错误之后，我更新了所有插件和 Eclipse，重新启动了 Eclipse 和操作系统（Windows 7）。错误一直都是一样的。

有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T05:13:50.300

我发现可以直接从[http://www.microsoft.com/en-us/download/details.aspx?id=30661](http://www.microsoft.com/en-us/download/details.aspx?id=30661)下载，而不是上面描述的方式， 然后安装为“From档案”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:14:05.270

也许您正在使用（或不使用）代理连接调整您的“首选项 - 常规 - 网络连接”设置

说明 -> [Eclipse 的 TFS 插件](https://stackoverflow.com/questions/2264016/tfs-plugin-for-eclipse/16034241#16034241)

# javascript - 轮询电池耗尽

> ID：14554488
> 
> 赞同：1
> 
> 时间：2013-01-28T02:06:17.140
> 
> 标签：javascript, cordova, polling

我想知道多少轮询会耗尽电池寿命。它取决于消息大小吗？或者仅仅是我在投票的事实使它耗尽了击球手？

我可以提供更多细节：

每两秒轮询一次，消息长度为60字节（平均）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T05:20:40.273

它与消息大小无关，与频率有很大关系。

每次轮询时，电话都必须使用它的网络——基本上就是它的收音机。如果您发送一条大消息，它可能会使用无线电稍长一点的时间（但可能还不够重要）。如果您发送非常大的消息，这将开始产生更大的影响 - 但您不会轮询非常大的消息，对吗？

但是，频繁轮询（即使是小消息）会导致手机*严重*耗电。不同的手机有不同的反应……使用 Android 时要特别小心，在某些硬件/软件组合中，即使在后台运行时，您也可以进行轮询。

我们通过检测与页面的交互（所有触摸事件）并在页面一段时间未触摸时逐渐延迟我们的民意调查，取得了很好的成功（也在 HTML5 中构建）。例如，ontouch，poll = 3s。下一次轮询 = 4s。下一次投票 = 5s... 以此类推。

# javascript - 如何获取缺少 alt/title 的图像的行号..？

> ID：14554489
> 
> 赞同：0
> 
> 时间：2013-01-28T02:06:18.187
> 
> 标签：javascript, html, regex

我正在使用一个 javascript 函数，该函数使用正则表达式来获取没有 alt/title 属性的图像列表：

```
function AltTitle(aSourceHTML, aResultField) {
  try {
  regexp = /<img((?:(?!alt)[^<>])*)>/gim;
      var vArray = aSourceHTML.match(regexp);
      var vLinks = vArray.join("\n\n");
      aResultField.value = vLinks;
  } catch (err) {
      alert("No Images Found");
  }
} 
```

有什么方法可以获取行号以及图像列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:11:18.933

尝试使用 DOM 来获取图像。

```
var imgs = [].filter.call(document.images, function(img) {
  return !img.alt && !img.title;
}); 
```

这将抓取所有没有`alt`或`title`属性或为空的图像，但它不会告诉您图像在哪一行。尝试使用[http://validator.w3.org/](http://validator.w3.org/)找出答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T02:52:30.213

如果您已经在变量中拥有源代码，则可以通过换行符将其拆分，然后针对每一行运行您的正则表达式。

```
function AltTitle(aSourceHTML, aResultField) {
    aSourceHTML = aSourceHTML.split('\n');

    for (var i = 0; i < aSourceHTML.length; i++ {
        // run your regex against aSourceHTML[i]...
    }
} 
```

如果您尝试对特定页面执行此操作，例如您所在的页面，您可以对其执行 ajax 请求，然后通过换行符拆分并运行它。尝试在控制台的 Stack Overflow 上运行以下代码。它将显示此页面的 HTML 以及行号。

```
$.get(window.location, function(data){
    data = data.split('\n');

    for (var i = 0; i < data.length; i++) {
        console.log('line ' + i, data[i]);
    }
}); 
```

但除非您尝试在 javascript 中为此编写工具，否则您应该只使用[http://validator.w3.org/](http://validator.w3.org/)。它会为您找到任何没有替代/标题的图像。

编辑：写了一个如何在 jsfiddle 上工作的例子：http: [//jsfiddle.net/c8X4K/](http://jsfiddle.net/c8X4K/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T02:11:27.363

我会说“他来的小马”，但这似乎更多地处理纯文本而不是实际的 HTML。

我这样做的方法是首先将整个内容拆分为换行符，然后遍历每一行并对其运行正则表达式。由于您正在遍历这些行，因此只需打印出当前的迭代器值，您就有了行号。

# jquery - 结合两个json对象？

> ID：14554491
> 
> 赞同：0
> 
> 时间：2013-01-28T02:06:33.197
> 
> 标签：jquery, facebook, json, facebook-graph-api

> **可能重复：**
> [在 JQUERY 中组合 2 个 JSON 对象](https://stackoverflow.com/questions/8310204/combine-2-json-objects-in-jquery)

我正在后端创建一个带有节点的 facebook 应用程序，以获取专辑列表并显示每个的封面照片。它需要通过两个调用来完成，一个是获取专辑列表，另一个是获取带有特定专辑 ID 的封面照片

我的代码看起来像这样

```
 $('#main').on('click', '#albums', function() {
      $.get('/albums', function(data) {
           for (i = 0; i < data.data.length; i++) {
                $.get('/cover-photo?id=' + data.data[i].cover_photo, function(dataz) {
                     data+=dataz;
                });
            }
            console.log(data);
       });
  }); 
```

我想要一个对象的原因是因为我正在使用 javascript 模板，最好只有一个对象包含所有内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T02:30:31.203

如果您想将此对象组合起来使用模板工程，我建议您只需添加另一个具有相同对象的键，这样您就可以访问专辑的所有信息以及每个专辑封面照片对象。

像：

```
$('#main').on('click', '#albums', function() {
 $.get('/albums', function(data) {
   for(i = 0; i < data.data.length; i++) {
    $.get('/cover-photo?id=' + data.data[i].cover_photo, function(dataz) {
      data.data[i].coverPhotoObj = dataz;
      //this new key with perticular album object will hold that cover photo object details
    });
  }
 console.log(data);
});}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T02:08:54.210

采用

```
$.extend({},firstobject,secoundobject) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T02:09:50.850

使用[jquery.extend](http://api.jquery.com/jQuery.extend/)：

```
jQuery.extend({}, json1, json2); 
```

# python - 嵌套字典的下键，如果下键已经存在，则合并数据

> ID：14554492
> 
> 赞同：1
> 
> 时间：2013-01-28T02:06:35.730
> 
> 标签：python, json, dictionary, nested

我有一个树结构，由嵌套字典构建：

```
{
  'test': {
    'Data': {},
  },
  'Test': {
    'data': {
      'Other': {},
    },
  },
} 
```

我想将其转换为：

```
{
  'test': {
    'data': {
      'other': {},
    },
  },
} 
```

有没有办法在 python 中执行这种转换？

我坚持：所有价值都是字典。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T02:19:46.203

尝试递归函数调用以小写键：

```
>>> def lower_keys(tree):
        if not tree:
            return tree
        return {k.lower() : lower_keys(v) for k, v in tree.items()}

>>> t = {
  'test': {
    'Data': {},
  },
  'Test': {
    'data': {
      'Other': {},
    },
  },
}

>>> lower_keys(t)
{'test': {'data': {'other': {}}}} 
```

# asp.net - 通知 ASP.NET 网站有关当前登录用户的信息

> ID：14554494
> 
> 赞同：1
> 
> 时间：2013-01-28T02:06:46.880
> 
> 标签：asp.net, authentication, authorization, forms-authentication

我是 ASP.NET 的新手，现在一直在尝试解决这个问题。

我遇到了这个[博客](http://www.codeproject.com/Articles/2905/Role-based-Security-with-Forms-Authentication)，一切看起来都很好，除了一件事：`HttpContext.Current.User.Identity is FormsIdentity`在这个代码片段中，下面的代码总是评估为 false：

```
protected void Application_AuthenticateRequest(Object sender,
EventArgs e)
{
  if (HttpContext.Current.User != null)
  {
    if (HttpContext.Current.User.Identity.IsAuthenticated)
    {
     if (HttpContext.Current.User.Identity is FormsIdentity)
     {
        FormsIdentity id =
            (FormsIdentity)HttpContext.Current.User.Identity;
        FormsAuthenticationTicket ticket = id.Ticket;

        // Get the stored user-data, in this case, our roles
        string userData = ticket.UserData;
        string[] roles = userData.Split(',');
        HttpContext.Current.User = new GenericPrincipal(id, roles);
     }
    }
  }
} 
```

当我使用断点时，我的 PC 名称是当前用户，我认为它不是`FormsIdentity`.

网络配置：

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>
</configuration> 
```

我在这里想念什么？成功登录后如何判断`HttpContext`当前用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:05:21.357

如果您希望用户拥有 FormsIdentity，则需要在 web.config 文件中打开 FormsAuthentication。在您的元素中，您需要填充身份验证和授权节点。（例如，请参阅您提到的标题为“使用基于角色的表单身份验证保护目录”的博客文章的部分）现在这些元素不存在于您的 web.config 文件中，因此不会发生表单身份验证。像这样的配置是典型的：

```
<system.web>
    <authentication mode="Forms">
       <forms name=".ASPXFORMSDEMO" loginUrl="logon.aspx"  protection="All" path="/" timeout="30" />
    </authentication> 
    <authorization>
       <deny users ="?" />
       <allow users = "*" />
    </authorization>
</system.web> 
```

该节点指示 ASP.Net 使用表单身份验证，而该节点拒绝任何未进行身份验证的用户访问该站点。

更多信息可以在[这里](http://support.microsoft.com/kb/301240)和[这里找到](http://msdn.microsoft.com/en-us/library/7t6b43z4%28v=vs.100%29.aspx)

# ios - UITableView 在搜索时崩溃

> ID：14554503
> 
> 赞同：1
> 
> 时间：2013-01-28T02:07:59.650
> 
> 标签：ios, uitableview, uisearchbar

我正在尝试向我的 UITableView 添加一个搜索栏，并且在执行此代码时似乎崩溃了：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath         
   {
    Book *book = nil;

    if (tableView == self.searchDisplayController.searchResultsTableView)
    {
        NSLog(@"Configuring cell to show search results");
        book = [self.searchResults objectAtIndex:indexPath.row];
        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (!cell) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
        }

        // Configure the cell.
        [self configureCell:cell atIndexPath:indexPath];
        return cell;
    }
    else
    {
        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        // Configure the cell.
        [self configureCell:cell atIndexPath:indexPath];
        return cell;
    }    
 } 
```

控制台错误是：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“索引 0 部分中索引 2 处没有对象”

```
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath { 
  // Configure the cell to show the book's title 
  Book *book = [self.fetchedResultsController objectAtIndexPath:indexPath];   
  cell.textLabel.text = book.title; 
}

      - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
 {
    return [[self.fetchedResultsController sections] count];
 }

// Customize the number of rows in the table view.
  - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

if (tableView == self.searchDisplayController.searchResultsTableView)
{
    return [self.searchResults count];
}
else
{

id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
return [sectionInfo numberOfObjects];
} 
```

}

```
- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type
{    
   switch(type) {

    case NSFetchedResultsChangeInsert:
        [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
        break;

    case NSFetchedResultsChangeDelete:
        [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
        break;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:19:16.120

在 configureCell: 你有

```
Book *book = [self.fetchedResultsController objectAtIndexPath:indexPath]; 
```

这仅在您不搜索时有效，您应该将 Book 传递给 configureCell 而不是 indexPath。

所以

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath         
   {
    Book *book = nil;

    if (tableView == self.searchDisplayController.searchResultsTableView)
    {
        NSLog(@"Configuring cell to show search results");
        book = [self.searchResults objectAtIndex:indexPath.row];
        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (!cell) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
        }

        // Configure the cell.
        [self configureCell:cell withBook:book];
        return cell;
    }
    else
    {
        book = [self.fetchedResultsController objectAtIndexPath:indexPath];
        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        // Configure the cell.
        [self configureCell:cell withBook:book];
        return cell;
    }    
 }

- (void)configureCell:(UITableViewCell *)cell withBook:(Book *)book { 
  // Configure the cell to show the book's title    
  cell.textLabel.text = book.title; 
} 
```

# python - Selenium '模态对话框存在'但实际上不在屏幕上

> ID：14554511
> 
> 赞同：0
> 
> 时间：2013-01-28T02:09:11.787
> 
> 标签：python, selenium

我有一个完整的澳大利亚邮政编码列表，我需要使用特定站点的搜索功能来获取相应的远程代码。我创建了一个 Python 脚本来执行此操作，并且它可以有效地执行此操作。

除此之外，在迭代期间看似随机的时间，它会引发“模态对话框存在”异常。问题是，我看不到任何对话框！网页看起来和往常一样，我可以用鼠标正常与它交互。可能是什么问题，是否有解决方案？

```
browser = webdriver.Firefox() # Get local session of firefox
browser.set_page_load_timeout(30)
browser.get("http://www.doctorconnect.gov.au/internet/otd/Publishing.nsf/Content/locator") # Load page
assert "Locator" in browser.title
search = browser.find_element_by_name("Search") # Find the query box
ret = browser.find_element_by_id("searchButton")

doha_addr = []
doha_ra = []

for i in search_string_list:
    search.send_keys(i)
    ret.send_keys(Keys.RETURN)
    addr = browser.find_element_by_xpath("//table/tbody/tr[2]/td[2]")
    doha_addr.append(addr.text)
    ra = browser.find_element_by_xpath("//table/tbody/tr[4]/td[2]")
    doha_ra.append(ra.text)
    try:
        browser.find_element_by_xpath("//html/body/div/div[3]/div/div/div/div/div/div[7]/div/div[13]/div[1]").click()
    except:
        pass
    search.clear() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:15:34.833

我似乎瞥见了一个弹出对话框，该对话框在我的脚本运行时显示并隐藏起来。无论如何，这与 while 开关和 try/except 子句无关......：7D

```
doha_ra = {}

for i in search_string_list:
    switch = True
    while switch == True:
        search.send_keys(i)
        ret.send_keys(Keys.RETURN)
        try:
            addr = browser.find_element_by_xpath("//table/tbody/tr[2]/td[2]")
            ra = browser.find_element_by_xpath("//table/tbody/tr[4]/td[2]")
            doha_ra[addr.text] = ra.text
            switch = False
        except:
            pass
        search.clear() 
```

# sql - 按类型计算一系列日期的成员资格

> ID：14554512
> 
> 赞同：1
> 
> 时间：2013-01-28T02:09:21.790
> 
> 标签：sql, sql-server, sql-server-2012

我正在使用 SQL Server 2012 并且有一个包含成员信息的数据库。我正在尝试编写 SQL 来计算每个月存在的每种类型的成员，这样我就可以报告成员资格是否逐月上升/下降。我的架构的简化版本是：

[http://www.sqlfiddle.com/#!6/5fed2/1](http://www.sqlfiddle.com/#!6/5fed2/1)

```
CREATE TABLE MemberType
(
    MemberTypeID INT,
    Name VARCHAR(50)
);

CREATE TABLE Person
(
    PersonID INT,
    Name VARCHAR(50)
);

CREATE TABLE Invoice
(
    InvoiceID INT,
    DateStart DATE,
    DateEnd   DATE,
    PersonID  INT,     --(FK) Person that purchased the membership
    MemberTypeID INT,  --(FK) Type of membership
);

INSERT MemberType (MemberTypeID,Name) VALUES (1,'Regular')
INSERT MemberType (MemberTypeID,Name) VALUES (2,'Special')
INSERT MemberType (MemberTypeID,Name) VALUES (3,'Honorary')

INSERT Person (PersonID,Name) VALUES (1,'Joe Smith')
INSERT Person (PersonID,Name) VALUES (2,'Anna Smith')
INSERT Person (PersonID,Name) VALUES (3,'Ted Williams')
INSERT Person (PersonID,Name) VALUES (4,'Bill Williams')

INSERT Invoice VALUES(1,'2011-5-1', '2012-1-1', 1, 1)
INSERT Invoice VALUES(2,'2010-1-1', '2013-1-1', 2, 2)
INSERT Invoice VALUES(3,'2012-2-1', '2013-2-1', 3, 1)
INSERT Invoice VALUES(4,'2009-1-1', '2011-5-1', 1, 1)
INSERT Invoice VALUES(5,'2011-1-1', '2012-5-1', 4, 1) 
```

**我试图获取特定日期的成员计数，如下所示：**

```
DECLARE @RunDt DATE='2011-1-1'

SELECT
mt.Name [MemberType], @RunDt [Date], count(p.PersonID) [Count]
FROM MemberType mt
LEFT OUTER JOIN Invoice i ON i.MemberTypeID=mt.MemberTypeID
LEFT OUTER JOIN Person p ON p.PersonID=i.PersonID
WHERE @RunDt BETWEEN i.DateStart AND i.DateEnd
GROUP BY mt.Name 
```

我认为这很接近，但我希望将名誉类型包含在计数为 0 中。我认为`LEFT OUTER JOIN`s 可以做到这一点，但你没有。此外，这仅适用于单个日期。我的下一步是将每个月 1 日的查询结果放在一个结果集中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T02:13:20.090

通过将`Invoice`表的过滤条件放在`WHERE`子句中，您实际上已将您转换`OUTER JOIN`为`INNER JOIN`. 尝试将该过滤条件放在反对的`ON`条件中。`OUTER JOIN``Invoice`

```
SELECT 
  mt.Name AS [MemberType], 
  @RunDt AS [Date], 
  count(p.PersonID) AS [Count]
FROM dbo.MemberType AS mt
LEFT OUTER JOIN dbo.Invoice AS i 
  ON i.MemberTypeID=mt.MemberTypeID
  AND @RunDt BETWEEN i.DateStart AND i.DateEnd
LEFT OUTER JOIN dbo.Person AS p 
  ON p.PersonID = i.PersonID
GROUP BY mt.Name; 
```

演示：

[http://www.sqlfiddle.com/#!6/5fed2/2](http://www.sqlfiddle.com/#!6/5fed2/2)

* * *

如果您想在给定年份的每个月执行此操作：

```
DECLARE @year INT = 2012;

;WITH x(d) AS 
(
    SELECT CONVERT(DATE, DATEADD(MONTH, n-1, 
      DATEADD(YEAR, @year-1900, '19000101')))
    FROM 
    (
      SELECT TOP (12) n = ROW_NUMBER() OVER 
        (ORDER BY [object_id])
      FROM sys.all_objects 
      ORDER BY [object_id]
    ) AS y
)
SELECT
    mt.[Name],
    [Date] = x.d, 
    [Count] = COUNT(p.PersonID)
FROM x CROSS JOIN dbo.MemberType AS mt
LEFT OUTER JOIN dbo.Invoice AS i 
ON i.MemberTypeID = mt.MemberTypeID
AND x.d BETWEEN i.DateStart AND i.DateEnd
LEFT OUTER JOIN dbo.Person AS p 
ON p.PersonID = i.PersonID
GROUP BY mt.Name, x.d
ORDER BY x.d, mt.Name; 
```

SQLFiddle 演示：

[http://sqlfiddle.com/#!6/f5f84/2](http://sqlfiddle.com/#!6/f5f84/2)

有关没有循环的生成集的更多信息：

[http://www.sqlperformance.com/2013/01/t-sql-queries/generate-a-set-1](http://www.sqlperformance.com/2013/01/t-sql-queries/generate-a-set-1)
[http://www.sqlperformance.com/2013/01/t-sql-queries/generate-a -set-2](http://www.sqlperformance.com/2013/01/t-sql-queries/generate-a-set-2)
[http://www.sqlperformance.com/2013/01/t-sql-queries/generate-a-set-3](http://www.sqlperformance.com/2013/01/t-sql-queries/generate-a-set-3)

# c - SSL 例程：SSL3_READ_N：未设置读取生物

> ID：14554514
> 
> 赞同：2
> 
> 时间：2013-01-28T02:10:04.550
> 
> 标签：c, ssl, network-programming, openssl, client-server

我在 C 中找到了一个非常好的[SSL/TLS 服务器-客户端示例](http://simplestcodings.blogspot.ro/2010/08/secure-server-client-using-openssl-in-c.html)，我想对其进行调整以与 BIO 库一起使用。我几乎成功了，除了运行服务器时出现的一个错误：

`$ ./ssl-server 68671:error:140950D3:SSL routines:SSL3_READ_N:read bio not set:/SourceCache/OpenSSL098/OpenSSL098-35.1/src/ssl/s3_pkt.c:203:`

我`gcc -o ssl-server SSL-Server.c -lssl -lcrypto -Wall`用来编译服务器：

```
//SSL-Server.c
#include <errno.h>
#include <unistd.h>
#include <stdlib.h>
#include <string.h>
#include <arpa/inet.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <resolv.h>
#include "openssl/ssl.h"
#include "openssl/err.h"

#define FAIL -1
#define PORT "2013"

SSL_CTX* InitServerCTX(void)
{
    SSL_METHOD *method;
    SSL_CTX *ctx;

    OpenSSL_add_all_algorithms();
    SSL_load_error_strings();
    method = SSLv3_server_method();
    ctx = SSL_CTX_new(method);

    if( ctx == NULL )
    {
        ERR_print_errors_fp(stderr);
        abort();
    }

    return ctx;
}

void LoadCertificates(SSL_CTX* ctx, char* CertFile, char* KeyFile)
{
    if( SSL_CTX_use_certificate_file(ctx, CertFile, SSL_FILETYPE_PEM) <= 0 )
    {
        ERR_print_errors_fp(stderr);
        abort();
    }

    if( SSL_CTX_use_PrivateKey_file(ctx, KeyFile, SSL_FILETYPE_PEM) <= 0 )
    {
        ERR_print_errors_fp(stderr);
        abort();
    }

    if( !SSL_CTX_check_private_key(ctx) )
    {
        fprintf(stderr, "Private key does not match the public certificate\n");
        abort();
    }
}

void ShowCerts(SSL* ssl)
{
    X509 *cert;
    char *line;

    cert = SSL_get_peer_certificate(ssl);
    if ( cert != NULL )
    {
        printf("Server certificates:\n");
        line = X509_NAME_oneline(X509_get_subject_name(cert), 0, 0);
        printf("Subject: %s\n", line);
        free(line);
        line = X509_NAME_oneline(X509_get_issuer_name(cert), 0, 0);
        printf("Issuer: %s\n", line);
        free(line);
        X509_free(cert);
    }
    else
    {
        printf("No certificates.\n");
    }
}

void Servlet(SSL* ssl)
{
    char buf[1024];
    int sd, bytes;

    if( SSL_accept(ssl) == FAIL )
    {
        ERR_print_errors_fp(stderr);
    }
    else
    {
        ShowCerts(ssl);
        bytes = SSL_read(ssl, buf, sizeof(buf));

        if( bytes > 0 )
        {
            buf[bytes] = 0;
            printf("Client msg: \"%s\"\n", buf);
            SSL_write(ssl, "back message", strlen("back message"));
        }
        else
        {
            ERR_print_errors_fp(stderr);
        }
    }

    sd = SSL_get_fd(ssl);
    SSL_free(ssl);
    close(sd);
}

int main(int count, char *strings[])
{
    SSL_CTX *ctx;
    BIO *acc, *client;

    SSL_library_init();

    ctx = InitServerCTX();
    LoadCertificates(ctx, "mycert.pem", "mycert.pem");

    acc = BIO_new_accept(PORT);
    if(!acc)
    {
        printf("Error creating server socket");
    }
    while(1)
    {
        if(BIO_do_accept(acc) <= 0)
        {
            printf("Error binding server socket");
        }

        SSL *ssl;
        client = BIO_pop(acc);
        if(!(ssl = SSL_new(ctx)))
        {
            printf("Error creating SSL context");
        }
        SSL_set_bio(ssl, client, client);

            // Here should be created threads
        Servlet(ssl); 
    }

    SSL_CTX_free(ctx);
} 
```

我`gcc -o ssl-client SSL-Client.c -lssl -lcrypto -Wall`用来编译客户端：

```
//SSL-Client.c
#include <stdio.h>
#include <errno.h>
#include <unistd.h>
#include <stdlib.h>
#include <string.h>
#include <sys/socket.h>
#include <resolv.h>
#include <netdb.h>
#include <openssl/ssl.h>
#include <openssl/err.h>
#include <openssl/bio.h>

#define FAIL -1
#define SERVER "localhost"
#define PORT "2013"

SSL_CTX* InitCTX(void)
{
    SSL_METHOD *method;
    SSL_CTX *ctx;

    OpenSSL_add_all_algorithms();
    SSL_load_error_strings();
    method = SSLv3_client_method();
    ctx = SSL_CTX_new(method);

    if( ctx == NULL )
    {
        ERR_print_errors_fp(stderr);
        abort();
    }

    return ctx;
}

void ShowCerts(SSL* ssl)
{
    X509 *cert;
    char *line;

    cert = SSL_get_peer_certificate(ssl);
    if( cert != NULL )
    {
        printf("Server certificates:\n");
        line = X509_NAME_oneline(X509_get_subject_name(cert), 0, 0);
        printf("Subject: %s\n", line);
        free(line);
        line = X509_NAME_oneline(X509_get_issuer_name(cert), 0, 0);
        printf("Issuer: %s\n", line);
        free(line);
        X509_free(cert);
    }
    else
    {
        printf("No certificates.\n");
    }
}

int main(int count, char *strings[])
{
    SSL_CTX *ctx;
    SSL *ssl;
    BIO *conn;
    char buf[1024];
    int bytes;

    SSL_library_init();
    ctx = InitCTX();

    conn = BIO_new_connect(SERVER ":" PORT);
    if(!conn)
    {
        printf("Error creating connection BIO");
    }
    if(BIO_do_connect(conn) <= 0)
    {
        printf("Error connecting to remote machine");
    }

    ssl = SSL_new(ctx);
    SSL_set_bio(ssl, conn, conn);

    if( SSL_connect(ssl) <= 0 )
    {
        printf("Error connecting SSL object");
    }
    else
    {
        printf("Connected!");
        ShowCerts(ssl);
        SSL_write(ssl, "ana are mere", strlen("ana are mere") );

        bytes = SSL_read(ssl, buf, sizeof(buf));
        printf("%s\n", buf);

        SSL_free(ssl);
    }

    SSL_CTX_free(ctx);

    return 0;
} 
```

我正在使用`openssl req -x509 -nodes -days 365 -newkey rsa:1024 -keyout mycert.pem -out mycert.pem`命令生成证书。

一切正常，消息发送正常。请忽略缺少错误检查并原谅代码中的全部混乱，这只是为了学习目的。

谁能指出我出了什么问题？你能告诉我是否犯了重大错误，我正在努力学习吗？（例如例行呼叫顺序、重大安全问题等）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:46:48.093

根据[手册页](https://www.openssl.org/docs/crypto/BIO_s_accept.html)（底部的示例代码非常具有说明性），第一次调用`BIO_do_accept()`将设置接受 BIO 并且不执行任何其他操作。只有第二个和所有后续调用将是接受连接的实际调用。这很好地说明了为什么 OpenSSL 永远不会赢得“最直观的 API 设计”奖。

那么你的代码会发生什么？您只能`BIO_do_accept()`在循环内调用。第一次通过循环，它将设置 BIO 并立即返回。您的代码调用`Servlet()`不存在的连接，但`SSL_accept()`失败，返回您看到的错误。返回后`Servlet()`，您的代码将愉快地循环到`BIO_do_accept()`这次阻塞的第二次调用，等待第一次连接，一切都按预期工作。

要解决此问题，您需要`BIO_do_accept()`在循环之前调用一次，如下所示（使用您破坏的错误处理风格以保持一致性 - 您确实需要修复您的错误处理！）：

```
[...]
acc = BIO_new_accept(PORT);
if(!acc)
{
    printf("Error creating server socket");
}
/* first call is to set up accept BIO */
if(BIO_do_accept(acc) <= 0)
{
    printf("Error calling BIO_do_accept() the first time");
}
while(1)
{
    if(BIO_do_accept(acc) <= 0)
    {
        printf("Error binding server socket");
    }
[...] 
```

# php - PHP 命令不同步错误

> ID：14554517
> 
> 赞同：28
> 
> 时间：2013-01-28T02:10:45.890
> 
> 标签：php, mysql, mysqli

我在 PHP/MySQLi 中使用两个准备好的语句从 mysql 数据库中检索数据。但是，当我运行语句时，出现“命令不同步，您现在无法运行命令”错误。

这是我的代码：

```
 $stmt = $mysqli->prepare("SELECT id, username, password, firstname, lastname, salt FROM members WHERE email = ? LIMIT 1";
    $stmt->bind_param('s', $loweredEmail);
    $stmt->execute();
    $stmt->store_result();
    $stmt->bind_result($user_id, $username, $db_password, $firstname, $lastname, $salt);
    $stmt->fetch();

    $stmt->free_result();
    $stmt->close();

    while($mysqli->more_results()){
        $mysqli->next_result();
    }

    $stmt1 = $mysqli->prepare("SELECT privileges FROM delegations WHERE id = ? LIMIT 1");
    //This is where the error is generated
    $stmt1->bind_param('s', $user_id);
    $stmt1->execute();
    $stmt1->store_result();
    $stmt1->bind_result($privileges);
    $stmt1->fetch(); 
```

我试过的：

*   将准备好的语句移动到两个单独的对象。
*   使用代码：

    ```
    while($mysqli->more_results()){
        $mysqli->next_result();
    }
    //To make sure that no stray result data is left in buffer between the first
    //and second statements 
    ```

*   使用 free_result() 和 mysqli_stmt->close()

PS：“不同步”错误来自第二条语句的“$stmt1->error”

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-28T12:04:31.907

在 mysqli::query 如果你使用 MYSQLI_USE_RESULT 所有后续调用将返回错误 命令不同步，除非你调用 mysqli_free_result()

调用多个存储过程时，可能会遇到以下错误：“Commands out of sync; you can't run this command now”。即使在调用之间对结果对象使用 close() 函数时，也会发生这种情况。要解决此问题，请记住在每次存储过程调用后对 mysqli 对象调用 next_result() 函数。请参见下面的示例：

```
<?php
// New Connection
$db = new mysqli('localhost','user','pass','database');

// Check for errors
if(mysqli_connect_errno()){
 echo mysqli_connect_error();
}

// 1st Query
$result = $db->query("call getUsers()");
if($result){
     // Cycle through results
    while ($row = $result->fetch_object()){
        $user_arr[] = $row;
    }
    // Free result set
    $result->close();
    $db->next_result();
}

// 2nd Query
$result = $db->query("call getGroups()");
if($result){
     // Cycle through results
    while ($row = $result->fetch_object()){
        $group_arr[] = $row;
    }
     // Free result set
     $result->close();
     $db->next_result();
}
else echo($db->error);

// Close connection
$db->close();
?> 
```

我希望这个能帮上忙

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-28T12:11:59.613

“命令不同步；您现在无法运行此命令”

可以在 mysql 文档中找到有关此错误的详细信息。阅读这些细节可以清楚地表明，在同一连接上执行另一个准备好的语句之前，需要完全获取准备好的语句执行的结果集。

可以通过使用 store 结果调用来解决问题。这是我最初尝试做的一个例子：

```
<?php

  $db_connection = new mysqli('127.0.0.1', 'user', '', 'test');

  $post_stmt = $db_connection->prepare("select id, title from post where id = 1000");
  $comment_stmt = $db_connection->prepare("select user_id from comment where post_id = ?");

  if ($post_stmt->execute())
  {
    $post_stmt->bind_result($post_id, $post_title);

    if ($post_stmt->fetch())
    {
      $comments = array();

      $comment_stmt->bind_param('i', $post_id);
      if ($comment_stmt->execute())
      {
        $comment_stmt->bind_result($user_id);
        while ($comment_stmt->fetch())
        {
          array_push($comments, array('user_id' => $user_id));
        }
      }
      else
      {
        printf("Comment statement error: %s\n", $comment_stmt->error);
      }
    }
  }
  else
  {
    printf("Post statement error: %s\n", $post_stmt->error);
  }

  $post_stmt->close();
  $comment_stmt->close();

  $db_connection->close();

  printf("ID: %d -> %s\n", $post_id, $post_title);
  print_r($comments);
?> 
```

以上将导致以下错误：

注释语句错误：命令不同步；你现在不能运行这个命令

PHP 注意：未定义变量：第 41 行 error.php 中的 post_title ID：9033 -> Array ( )

以下是使其正常工作需要做的事情：

```
<?php

  $db_connection = new mysqli('127.0.0.1', 'user', '', 'test');

  $post_stmt = $db_connection->prepare("select id, title from post where id = 1000");
  $comment_stmt = $db_connection->prepare("select user_id from comment where post_id = ?");

  if ($post_stmt->execute())
  {
    $post_stmt->store_result();
    $post_stmt->bind_result($post_id, $post_title);

    if ($post_stmt->fetch())
    {
      $comments = array();

      $comment_stmt->bind_param('i', $post_id);
      if ($comment_stmt->execute())
      {
        $comment_stmt->bind_result($user_id);
        while ($comment_stmt->fetch())
        {
          array_push($comments, array('user_id' => $user_id));
        }
      }
      else
      {
        printf("Comment statement error: %s\n", $comment_stmt->error);
      }
    }

    $post_stmt->free_result();
  }
  else
  {
    printf("Post statement error: %s\n", $post_stmt->error);
  }

  $post_stmt->close();
  $comment_stmt->close();

  $db_connection->close();

  printf("ID: %d -> %s\n", $post_id, $post_title);
  print_r($comments);
?> 
```

关于上面的例子有几点需要注意：

```
The bind and fetch on the statement still works correctly.
Make sure the results are freed when the processing is done. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-28T19:21:28.100

对于那些做正确事情并使用预准备语句的存储过程的人。

由于某种原因，当使用输出变量作为存储过程中的参数时，mysqli 无法释放资源。要解决此问题，只需在过程主体内返回一个记录集，而不是将值存储在输出变量/参数中。

例如，代替 SET outputVar = LAST_INSERT_ID(); 你可以有 SELECT LAST_INSERT_ID(); 然后在PHP中我得到这样的返回值：

```
$query= "CALL mysp_Insert_SomeData(?,?)"; 
$stmt = $mysqli->prepare($query); 
$stmt->bind_param("is", $input_param_1, $input_param_2); 
$stmt->execute() or trigger_error($mysqli->error); // trigger_error here is just for troubleshooting, remove when productionizing the code
$stmt->store_result();
$stmt->bind_result($output_value);
$stmt->fetch();
$stmt->free_result();
$stmt->close();
$mysqli->next_result();
echo $output_value; 
```

现在您已准备好执行第二个存储过程，而不会出现“命令不同步，您现在无法运行命令”错误。如果您在记录集中返回多个值，则可以循环并获取所有这些值，如下所示：

```
while ($stmt->fetch()) {
    echo $output_value;
} 
```

如果您从存储过程中返回多个记录集（您有多个选择），请确保使用 $stmt->next_result(); 遍历所有这些记录集；

# sqlalchemy - 如何在 SQLAlchemy 上打印标签

> ID：14554522
> 
> 赞同：1
> 
> 时间：2013-01-28T02:11:11.687
> 
> 标签：sqlalchemy

试图`use_labels=True`在下面的这个查询上工作......但图书馆不断吐出错误......我正在做这个复杂的连接，需要查看列上的标签来尝试获取数据。我知道我不应该使用 ORM 会话，`execute()`但坦率地说，此时 idc 只是想让它工作。我已经放弃了 ORM ...不适用于以下查询：

```
data = DBSession.execute(text("SELECT \
                        * \
                        FROM \
                        art_packs \
                        LEFT OUTER JOIN \
                        art_pack_pieces AS art_pack_pieces_1 ON art_packs.art_pack_id = art_pack_pieces_1.art_pack_id \
                        LEFT OUTER JOIN \
                        art_pack_pieces_artists AS art_pack_pieces_artists_1 ON art_pack_pieces_1.art_pack_piece_id = art_pack_pieces_artists_1.art_pack_piece_id \
                        LEFT OUTER JOIN \
                        users ON art_pack_pieces_artists_1.artist_id = users.id \
                        LEFT OUTER JOIN \
                        art_pack_pieces as art_pack_pieces_2 ON art_packs.cover_id = art_pack_pieces_2.art_pack_piece_id \
                        LEFT OUTER JOIN \
                        art_pack_pieces_likes as art_pack_pieces_likes_1 ON art_pack_pieces_1.art_pack_piece_id = art_pack_pieces_likes_1.art_pack_piece_id AND art_pack_pieces_likes_1.artist_id = " + str(artistID) + " \
                        WHERE art_packs.art_pack_id = " + id, use_labels=True)).fetchall() 
```

查询不是最安全的..但是 int 已经过验证，所以我想我正在做的事情没有错。

谢谢。

# java - 云中的 Eclipse Java 项目

> ID：14554527
> 
> 赞同：4
> 
> 时间：2013-01-28T02:11:45.503
> 
> 标签：java, eclipse, cloud

我想在家里和办公室使用 Eclipse 项目，我不想每次在使用前都导出/导入它们。有什么方法可以像云铸造一样从云中存储/使用我的 Eclipse Java 项目。

请让我知道选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T02:36:13.493

您可以将 Eclipse 文件夹移动到[Dropbox](https://www.dropbox.com/)文件夹中。

额外的好处：从任何地方访问您的项目。

您也可以使用[GitHub](https://github.com/)，但是除非您为他们的“计划”之一付费，否则您的源代码将向社区开放。

另外，考虑使用[Bitbucket](https://bitbucket.org/)，它也不为人所知，但它是免费的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T02:52:30.157

我个人使用 GitHub 来存储我的所有代码，并在必要时使用 Eclipse 中的 Git 集成将代码推送和拉取到 GitHub 上的主版本。

这有几个优点：

*   我可以使用标准的 Eclipse 设置，只需最少的定制
*   我可以离线工作（无需将实际当前工作区存储在云端）
*   Eclipse内部的git集成非常好
*   它与其他人完成的工作（拉取请求等）很好地集成在一起
*   我可以在笔记本电脑和台式机上处理不同的分支，并在必要时合并。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:57:50.533

与给其他人的答案类似，我在我的 Dropbox 上设置了一个 SVN 存储库。这很容易做到，而且在使用 Ivy 时，它不会占用太多空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T23:02:06.107

还有[Git Annex](http://git-annex.branchable.com/not/)，它提供了一组很酷的功能，值得一试。

# javascript - Javascript 事件对象 ClientY 错误地为 0

> ID：14554536
> 
> 赞同：1
> 
> 时间：2013-01-28T02:12:49.393
> 
> 标签：javascript, object, dom-events, scrollbar, addeventlistener

我写了一个 scollbar，到目前为止效果很好。

这是它的工作顺序：

1.  当我单击抓手/滚动条元素时`foo.addEventListener( "mousedown", scrollObject.sbar1, false);`，将触发并`sbar1()` 正确获得`event.clientY`抓手/滚动条元素的坐标。

2.  我用`foo.addEventListener( "mousemove", sbar2, false);`in `sbar1(event)`在它滑动时实时获取抓手坐标。

但是，问题是当`sbar2(event)`被调用时，`event.clientY`坐标总是从 0 开始。在我的逻辑中，`event.clientY`坐标应该与 sbar1 的事件对象坐标相同，因为它与`mousedown`事件侦听器是相同的元素。

为什么`sbar2()` `mousedown`事件对象 ( `event.clientY`) 坐标为 0？如何使事件目标对象按原样正确，`sbar1()` `event.clientY`以便它可以从那里开始，因为它需要实时坐标？

HTML：

```
<div id="portfolioScrollbar">
        <div id="scrollbarTrack"><a id="scrolla" href="#scrollbar"></a></div>
    <div id="pbody">
                      ...all the text stuff...
             </div>
     </div> 
```

Javascript：

```
function start() {
    var foo = document.getElementById("scrolla");
        foo.addEventListener( "mousedown", scrollObject.sbar1, false);
        foo.addEventListener( "mouseup", removeAll, false);
        foo.addEventListener( "mouseout", removeAll, false);
    }

var scrollObject = function (event) {

    var current = null;
    var move = null;
    var scroll = document.getElementById("scrolla"); // THIS IS THE GRIPPER/SLIDER ELEMENT

    function sbar1(event) {
        console.log("mousedown");
        event.preventDefault();
        current = event.clientY;
        console.log(current);
        console.log("seperate");
        foo.addEventListener( "mousemove", sbar2, false);
    }

    function sbar2(event) {
//      console.log(event.clientY);
        event.preventDefault();
        move = event.clientY - current;

        move = Math.abs(move);
        console.log(move);
        scroll.style.top =  move + "px";

    }

    return {
        sbar1: sbar1,
            sbar2: sbar2,
    }
}(); 
```

出于我自己的学习目的，我更喜欢在没有 jQuery 的情况下使用 Javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T02:50:18.193

想通了....这是正确的坐标，而不是零。与当前的差异导致它为 0 ......不知道如何或为什么。

# java - TableModel 和 CellRenderer 的值差异

> ID：14554540
> 
> 赞同：0
> 
> 时间：2013-01-28T02:13:14.640
> 
> 标签：java, swing, jtable, tablecellrenderer

我创建了 ColumnAutofitTable 扩展 JTable，参考[http://tips4java.wordpress.com/2008/11/10/table-column-adjuster/](http://tips4java.wordpress.com/2008/11/10/table-column-adjuster/)

然而，它有时会显示奇怪的行为，如附图所示。 ![时间间隔列未正确调整大小](../Images/46d6a1a6cf53600b06614a0fd51890e8.png)

通过写一些日志，我发现当列宽被错误扩展时，TableModel中的值和CellRenderer中的值是不同的，在正常情况下是相同的。

正常情况，TableModel 的 Value 和 CellRenderer 的 text 是一样的。

> 行 == 0，列 == 1，旧宽度 == 0，新宽度 == 78，值 == 00d 01:52:07，渲染器 == javax.swing.table.DefaultTableCellRenderer$UIResource[Table.cellRenderer,- 74,-15,0x0,无效,alignmentX=0.0,alignmentY=0.0,border=javax.swing.border.EmptyBorder@1dd085d,flags=25165832,maximumSize=,minimumSize=,preferredSize=,defaultIcon=,disabledIcon=,horizo​​ntalAlignment= LEADING,horizo​​ntalTextPosition=TRAILING,iconTextGap=4,labelFor=,text= 00d 01:52:07,verticalAlignment=CENTER,verticalTextPosition=CENTER]

奇怪的情况，有错误的 CellRenderer 文本值

> 行 == 465，列 == 1，旧宽度 == 78，新宽度 == 333，值 == 00d 00:20:23，渲染器 == javax.swing.table.DefaultTableCellRenderer$UIResource[Table.cellRenderer,216,336 ,74x15,无效,alignmentX=0.0,alignmentY=0.0,border=javax.swing.border.EmptyBorder@1dd085d,flags=25165832,maximumSize=,minimumSize=,preferredSize=,defaultIcon=,disabledIcon=,horizo​​ntalAlignment=LEADING,horizo​​ntalTextPosition= TRAILING,iconTextGap=4,labelFor=,text=DRIVER:S120146165 IN_QTY:0 OUT_QTY:1 TRUCKER:null ,verticalAlignment=CENTER,verticalTextPosition=CENTER]

我没有在表格中添加任何自定义的单元格渲染器。我使用 setDataVector() 将数据添加到表中，以防止调整每一行的大小。

我的主要问题是：
1）为什么会出现这种症状？是 JTable 还是 CellRenderer 的 bug？
2）如何在不修改核心java模块的情况下避免这种事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T02:30:57.700

渲染器是共享资源，您可能看到渲染器使用的最后一个值/单元格，这可能不是您报告的单元格

# c - 3rdparty/libtiff/CMakeLists.txt:27 (ocv_include_directories) 的 CMake 错误：未知的 CMake 命令“ocv_include_directories”

> ID：14554545
> 
> 赞同：2
> 
> 时间：2013-01-28T02:13:43.260
> 
> 标签：c, opencv, cmake

对，所以我正在尝试在 VS2012 中构建一个项目，过去 2 天我一直在追查各种错误......我正在处理很多遗留代码，它处理 OpenCV2.1

因此，在查找了我需要的所有第 3 方文件后，我现在收到以下错误：错误 C1021: invalid preprocessor command 'cmakedefine' c:\opencv2.1\3rdparty\libtiff\tif_config.h

线：

```
/* Define to 1 if you have the <assert.h> header file. */
#cmakedefine HAVE_ASSERT_H 
```

我在这里找到的唯一帮助是： [cannot compile allegro using visual c++](https://stackoverflow.com/questions/4309113/cannot-compile-allegro-using-visual-c)

建议我需要用 cmake 重建 OpenCV。此时我得到错误：

```
CMake Error at 3rdparty/libtiff/CMakeLists.txt:27 (ocv_include_directories):   Unknown CMake command "ocv_include_directories". 
```

在可视化编辑器中。所以我追溯到[这里](https://stackoverflow.com/questions/13146650/compiling-opencv-samples-unknown-cmake-command-ocv-check-dependencies)。

所以我在命令行中运行它：

```
cmake C:/OpenCV2.1 -DBUILD_SAMPLES=ON 
```

哪个会吐出更多错误： CMake Error at 3rdparty/libtiff/CMakeLists.txt:5 (project): project PROJECT called with wrong number of arguments

```
CMake Error at 3rdparty/libtiff/CMakeLists.txt:27 (ocv_include_directories):
  Unknown CMake command "ocv_include_directories". 
```

我找不到 ocv_include_directories 的任何文档。我尝试了多个 OpenCV cmake 教程，但没有任何成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T01:12:06.380

事实证明，问题实际上是我有 Visual Studio 2012，而我正在使用的代码库是 Visual Studio 2008 构建的。不可能追踪所有这些错误。解决方案是卸载 2012 并安装 2008。

# c# - 如何在 GoDaddy 上托管我的 ASP.NET 应用程序？

> ID：14554547
> 
> 赞同：0
> 
> 时间：2013-01-28T02:13:55.240
> 
> 标签：c#, asp.net

我希望能够将我的作品上传到我的网站，但是当我在 Web 浏览器中查看 Default.aspx 文件时，我只看到了代码，而不是代码的实际“渲染”。有谁知道我做错了什么？

这是我的意思的图像：

![在此处输入图像描述](../Images/0f668e39eb20e13bb5a843386f2be5cf.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T02:33:11.213

您需要支持 ASP.Net 的主机，否则服务器只会将页面呈现为文本。周围有很多 - 搜索并找到适合您的需求/预算的。

请注意，如果上传到不支持该特定语言的主机，任何其他服务器端语言也会发生同样的情况。

# sql - Sql 更改数据类型

> ID：14554548
> 
> 赞同：1
> 
> 时间：2013-01-28T02:14:12.347
> 
> 标签：sql, oracle, foreign-keys

现在有一列名为 Line_no ( `smallint`)。我想更改此列的数据类型是`bigint` ，但此列是主键，并且有这么多表上有外键引用，那么如何更改呢？我需要同时`Sql server`更改`oracle`数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:01:35.277

首先，目前没有简单的方法可以做到这一点。特别是在Oracle中，为了改变数据类型，字段的所有值都应该为空。无论如何，以下过程适用于 Oracle 和 SQL Server：

1.  使您的数据库脱机，以免任何操作干扰我们的流程。
2.  添加一个新字段，例如 line_num 具有您的新数据类型。
3.  使用所有记录的 line_no 值更新新字段。
4.  编写一个存储过程以使用元数据删除所有引用当前 PK 的 FK，并且**此 SP 应在循环时将 add FK 命令写入 dbms 输出，以便稍后您可以执行它们以在步骤 9 中再次添加这些 FK**。
5.  将主键从 line_no 字段中删除。
6.  删除字段 line_no。
7.  将字段 line_num 重命名为 line_no。
8.  在新字段上添加主键。
9.  运行步骤 4 中生成的命令以再次添加所有 FK。
10.  使您的数据库在线:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T02:16:53.970

这取决于您的 DBMS。您可能必须删除外键约束、更改列并重新创建约束。

# google-maps - 静态地图 api 返回与 maps.google.com 不同的位置作为地址

> ID：14554549
> 
> 赞同：1
> 
> 时间：2013-01-28T02:14:56.337
> 
> 标签：google-maps

我正在使用静态地图 api 查找此地址：105 W. County Road Y Oshkosh, WI 54901。

我用来返回地图图像的静态地图 URL 是：[http ://maps.googleapis.com/maps/api/staticmap?sensor=false¢er=105+W.+County+Road+Y,Oshkosh,WI,54901&markers =color:blue%7C105+W.+County+Road+Y,Oshkosh,WI,54901&size=250x250&zoom=15](http://maps.googleapis.com/maps/api/staticmap?sensor=false&center=105+W.+County+Road+Y,Oshkosh,WI,54901&markers=color:blue%7C105+W.+County+Road+Y,Oshkosh,WI,54901&size=250x250&zoom=15) （我去掉了api键）

这将返回一个不同于 maps.google.com 返回的标记：[https ://maps.google.com/maps?q=105%20W.%20County%20Road%20Y%2C%20Oshkosh%2C%20WI%2054901](https://maps.google.com/maps?q=105%20W.%20County%20Road%20Y%2C%20Oshkosh%2C%20WI%2054901)

奇怪的是，如果您将静态地图 URL 中的地址更改为 105 E. County Road Y, Oshkosh WI 54901，这将返回应该从 105 W. County Road Y 返回的标记。

我在这里做错了什么，或者这是一个谷歌地图问题（我猜是我，但我只是不知道如何解决它..）

谢谢

# python - web2py - 设置我自己的环境

> ID：14554551
> 
> 赞同：1
> 
> 时间：2013-01-28T02:14:59.467
> 
> 标签：python, web2py

我已经使用管理界面创建了一个 web2py 应用程序，但我想使用我自己的编辑器和版本控制。我已经下载了打包的应用程序，但是我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T02:29:13.027

您可以使用管理界面来安装（即解压缩）应用程序。从那时起，该应用程序只是文件夹中的一堆文件，因此您可以根据需要对这些文件使用任何编辑器、IDE 和版本控制系统。

# html - 如何使用箭头键导航垂直页面

> ID：14554552
> 
> 赞同：1
> 
> 时间：2013-01-28T02:15:22.580
> 
> 标签：html, scroll, keyboard

我有一个网页，上面有照片。我希望观众能够使用箭头键（上、下、左、右）前进。通常向下键滚动大约 10 个像素。我想要向下键和向右键前进到下一张照片，或者说，1000 像素。我希望向上和向左键做同样的事情，但相反，所以向后滚动页面相同的 1000 像素。我想为每组照片分配一个锚 (#) 标签，然后让页面滚动到下一个标签。我几乎不知道 HTML、CSS、Javascript 和 Jquery，所以我需要耐心的回复来帮助我解决这个问题。

我正在使用的页面是[我的个人网站](http://pavelrozman.com)，我想在我网站上的所有页面上应用这种相同类型的键盘导航。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T02:20:24.037

将`keydown`事件侦听器附加到窗口，然后查看它是否是箭头键（keyCode 37 为左，38 为上，39 为右，40 为下）并相应地调整`document.body.scrollTop`（以及`document.documentElement.scrollTop`对于某些浏览器）。

例如：

```
var handler = function(e) {
    e = e || window.event;
    var k = e.keyCode || e.which;
    switch(k) {
      case 37:
        document.body.scrollLeft -= 1000;
        document.documentElement.scrollLeft -= 1000;
        break;
      case 38:
        document.body.scrollTop-= 1000;
        document.documentElement.scrollTop-= 1000;
        break;
      case 39:
        document.body.scrollLeft += 1000;
        document.documentElement.scrollLeft += 1000;
        break;
      case 40:
        document.body.scrollLeft += 1000;
        document.documentElement.scrollLeft += 1000;
        break;
      default: return true;
    }
    if( e.preventDefault) e.preventDefault();
    return false;
};
if( window.attachEvent) window.addEvent("onkeydown",handler,false);
else window.addEventListener("keydown",handler,false); 
```

您可能还需要添加`overflow:hidden`以防止通过其他方式（滚动条、鼠标滚轮）滚动以确保滚动以适当的增量。

# jquery - 使用 jQuery 有条件地隐藏 div

> ID：14554557
> 
> 赞同：1
> 
> 时间：2013-01-28T02:16:16.863
> 
> 标签：jquery, show-hide

如果条件在 jQuery 中为真，如何隐藏 div 1 并显示 div 2？

这是我的代码：

```
<div class="div1">Content 1 </div>
<div class="div2">Content 2 </div>

function(someFunction) {
    var option = this.config.option;
    if (someFunction && this.config.option == true) {
        option = this.config.option;
    }
    $$('div.div1').each(function(el) {
        $(el).hide(); //and add show div2 ?
    });
}; 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:23:36.243

如何使用[切换](http://api.jquery.com/toggle/)功能？

```
$('div.div1').toggle(option);
$('div.div2').toggle(!option); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T02:22:07.777

正如评论者所提到的，没有必要使用 each()。这应该这样做：

```
<div class="div1">Content 1 </div>
<div class="div2">Content 2 </div>

function hide1show2() {
    $('div.div1').hide(); 
    $('div.div2').show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T04:33:56.430

```
<div class="div1">Content 1 </div>
<div class="div2">Content 2 </div>

function(someFunction) {
    var option = this.config.option;
    if (someFunction && this.config.option) {
        option = this.config.option;
    }
if(option === 'Yes'){
    $$('div.div1').each(function(el) {
        $(el).hide();
    })
    $$('div.div2').each(function(el) {
        $(el).show();
    })
    }

if(option === 'No'){
    $$('div.div1').each(function(el) {
        $(el).show();
    })
    $$('div.div2').each(function(el) {
        $(el).hide();
    })
    }
}; 
```

# r - 模拟线性模型 100 次

> ID：14554558
> 
> 赞同：2
> 
> 时间：2013-01-28T00:36:23.627
> 
> 标签：r

我需要模拟 n=100 次线性模型，但会迷失在 R 命令中。

我还在学习统计和 R 的基础知识，我对这个练习有点困惑：

我需要使用 OLS 复制基本线性模型 100 次并收集 N 个估计值，以便执行一致性和效率测试。我试图以这种方式解决问题：

```
a <- 3
B <- 0.5
C <- -0.7

for (i in 1:100){
   x1[i] <- rnorm(200, mean=0, sd=1)
   x2[i] <- rnorm(200, mean=0, sd=1) 
   e[i] <- rnorm(200, mean=0, sd=1)
   y1[i] <- a+(B*x1[i])+(C*x2[i])+e[i] 

   y<- lm(y1[i]~x1[i]+x2[i]))
   results <-data.frame(coef(y))
} 
```

但 R 一直告诉我有错误。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T02:31:02.793

就像是：

```
a <- 3
B <- 0.5
C <- -0.7

results <- matrix(nrow=100,ncol=3)
for (i in 1:100){
   x1 <- rnorm(200, mean=0, sd=1)
   x2 <- rnorm(200, mean=0, sd=1) 
   e <- rnorm(200, mean=0, sd=1)
   y1 <- a+B*x1+C*x2+e 

   y<- lm(y1~x1+x2)
   results[i,] <- coef(y)
} 
```

这假设您只需要保存每次运行的系数。一个更优雅的解决方案是这样的：

```
simfun <- function(a=3,B=0.5,C=-0.7,n=200,x1.sd=1,x2.sd=1,e.sd=1) {
   x1 <- rnorm(n, mean=0, sd=x1.sd)
   x2 <- rnorm(n, mean=0, sd=x2.sd) 
   e <-  rnorm(n, mean=0, sd=e.sd)
   y1 <- a+B*x1+C*x2+e 
   data.frame(x1,x2,y1)
}

statfun <- function(d) {
    coef(lm(y1~x1+x2,data=d))
}

library(plyr)
raply(100,statfun(simfun())) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T02:34:07.930

```
 a <- 3
    B <- 0.5
    C <- -0.7
    sims <- 100

    #initialize a data frame to collect results
    df <- data.frame(matrix(ncol = 3, nrow = sims))
    colnames(df) <- c('a', 'B' , 'C')

    for(i in 1:sims){
    ##vectors each  200 long 
    x1 <- rnorm(200)
    x2 <- rnorm(200)
    e <- rnorm(200)

    y <- a + B*x1 + C*x2 +e
    #collect results for each itter
    df[i,] <- data.frame(t(lm(y ~x1 + x2)$coeff))
    }

    #results
    df 
```

# php - 如何隐藏选定的arraylist？

> ID：14554559
> 
> 赞同：-2
> 
> 时间：2013-01-28T02:16:28.587
> 
> 标签：php, arraylist, hidden-field

我用于arraylist的代码和我隐藏arraylist的编码方式是这样的

```
<?php 
    echo arraySelect($companies, 
                     'project_company', 
                     'type="hidden" 
                      class="text" 
                      size="1"', 
                      ($project->project_company=2), true);
?> 
```

但是当我测试这段代码时，它并没有显示隐藏的arraylist，所以我能知道问题出在哪里以及如何解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:47:26.797

如果您的函数的输出类似于：

```
<select type="hidden" name="foo">
   <option>bar</option>
   <option>bar</option>
   <option>bar</option>
</select> 
```

它不起作用，因为HTML 标签没有`type`属性。仅适用于输入。`<select>``type=hidden`

您必须使用 css 隐藏 Dropbox：

```
<select name="foo" style="display: none;">
... 
```

# svn - 我可以在提交指定路径时触发 post-commit.bat 吗？

> ID：14554566
> 
> 赞同：1
> 
> 时间：2013-01-28T02:17:59.787
> 
> 标签：svn, post-commit, post-commit-hook

目前，钩子脚本在 repos/hooks 下，但是，在同一个仓库中有多个项目，如果任何项目被提交，就会触发 post-commit 钩子。现在，如果我想只触发一个提交的项目的提交后挂钩，有什么办法可以解决这个问题吗？</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:15:23.150

只能有一个顶级提交后挂钩，但在顶级脚本中，您可以根据 Repository 输入参数触发其他脚本。

post-commit 钩子的命令行输入参数的第一个参数是“存储库路径”（[http://svnbook.red-bean.com/nightly/en/svn.ref.repohooks.post-commit.html](http://svnbook.red-bean.com/nightly/en/svn.ref.reposhooks.post-commit.html)）。

所以你可以写一个像这样的伪代码的脚本：

```
If  path is project1
    call script1
Else If  path is project2
    call script2
.... 
```

# vba - 自动将拼写错误替换为长术语列表的建议

> ID：14554567
> 
> 赞同：2
> 
> 时间：2013-01-28T02:18:08.137
> 
> 标签：vba, excel

我有一长串术语。超过 90% 是拼写错误。其中大部分是中间没有空格的两个词。我注意到 MS Word、Excel、Office 等非常擅长建议正确的拼写。当我运行拼写检查器时，我没有时间确认每一个建议的更正。有一些错误是可以的。

如何在没有提示的情况下自动进行拼写检查，或者更确切地说“拼写正确”？我不介意使用除 Microsoft 之外的其他工具，但它的拼写检查器似乎相当不错。我尝试了一些与 Excel 一起使用的 VBA 代码，但我找不到任何可以以编程方式向我显示主要建议的内容，以便我可以替换拼写错误的术语。

```
Sub spellcheck()

    With Application.SpellingOptions
        .SuggestMainOnly = True
        .IgnoreCaps = True
        .
    End With

    Cells.CheckSpelling

End Sub 
```

任何帮助表示赞赏。请我理解自动更正的危险。错误更正的影响很小。

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:06:00.807

第三方拼写检查器，例如[aspell](http://aspell.net/) ，可能会为您提供最快的速度和灵活性。但显然，您可以[控制 Access 的拼写检查器](http://bytes.com/topic/access/answers/201683-controlled-use-access-spell-check-possible)，所以这可能是一种可能性。

鉴于您的特殊情况是由于两个单词之间没有空格而导致的错误，您可能可以使用 Excel 的拼写检查器：

```
Sub test()
    Dim str, correction As String
    Dim i As Long, n As Long

    With Application
    For Each str In Array("pancake", "sausagebiscuit", "oatmeal", "largecoffee")
      correction = str ' by default leave alone
      If .CheckSpelling(str) Then
        ' already a word
      Else
        n = Len(str)
        For i = 1 To n
          If .CheckSpelling(Left$(str, i)) And .CheckSpelling(Right$(str, n - i)) Then
            correction = Left$(str, i) & " " & Right$(str, n - i)
          End If
        Next
      End If
      Debug.Print str & " -> " & correction
    Next
    End With
End Sub 
```

输出：

```
pancake -> pancake
sausagebiscuit -> sausage biscuit
oatmeal -> oatmeal
largecoffee -> large coffee 
```

嗯，早餐……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:22:20.240

假设您在 A 列（从第 1 行开始）中有一个拼写错误的单词列表，并且在 B 列中有它们的更正，您可以使用此宏将它们添加到 Office 的自动更正库中。这样，Excel 将在输入单词后立即用其更正替换该单词。

```
子 subAddAutoCorrects()
    调暗为范围
    设置 rng = Sheets("Sheet1").Range("A1")

    虽然 rng ""
        Application.AutoCorrect.AddReplacement 什么：=rng.Value，替换：=rng.Offset(, 1).Value
        设置 rng = rng.Offset(1)
    文德
结束子

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-23T15:03:01.173

已经一年多了，但也许你仍然需要解决问题的方法。
试试这个（以毫秒为单位）：

```
Sub use_suggestion()  
Dim rng As Range  
Dim i As Long  

For i = 1 To ActiveDocument.Range.SpellingErrors.Count  
Set rng = ActiveDocument.Range.SpellingErrors(i)  

If rng.GetSpellingSuggestions.Count <> 0 Then  
rng = rng.GetSpellingSuggestions.Item(1).Name & "ZXQ"  
End If  

Next i  

Selection.HomeKey Unit:=wdStory  
Selection.Find.ClearFormatting  
Selection.Find.Replacement.ClearFormatting  

   With Selection.Find  
     .Text = "ZXQ"  
     .Replacement.Text = ""  
     .Forward = True  
     .Wrap = wdFindContinue  

   End With  

   Selection.Find.Execute Replace:=wdReplaceAll  
End Sub 
```

注意：没有建议的拼写错误的单词不会改变。

# plone - Plone 4：如何定义重定向到对象父容器的内容操作 url_expr

> ID：14554571
> 
> 赞同：2
> 
> 时间：2013-01-28T02:19:10.877
> 
> 标签：plone

我有一个（灵巧）内容类型，它定义了以下操作。

```
<action title="Search" 
        action_id="search" 
        category="object" 
        condition_expr=""
        url_expr="python:aq_parent(aq_inner(context))" 
        visible="True">
        <permission value="View"/>
</action> 
```

`url_expr`包含，我试图得到的，但我得到一个`NameError`. 我在相应的内容类中从 Acquisition 导入了函数，但这没有帮助。

有什么提示吗？提前致谢。

**更新一**

我尝试了建议的解决方案，但这会导致以下跟踪（url 被裁剪）：

[http://pastie.org/6100541](http://pastie.org/6100541)

所以我切换回我的解决方案。错误或功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:08:32.247

`aq_parent`和`aq_inner`功能在那里不可用，但您可以使用：

```
python:context.aq_inner.aq_parent 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T02:35:50.670

问有帮助！

问了几分钟后我就有了这个想法；）

```
[...]
url_expr="python:'/'.join(object_url.split('/')[0:-1])"
[...] 
```

对我来说似乎有点*被黑*了，这种形式不处理 GET 的东西。任何更好的想法或建议仍然欢迎。

# ruby-on-rails-3 - 使用 rspec 在 rails 中存根保存方法

> ID：14554573
> 
> 赞同：0
> 
> 时间：2013-01-28T02:19:24.423
> 
> 标签：ruby-on-rails-3, rspec, stub, stubbing

我的控制器中有以下操作：

```
def create
    @user = current_user
    @vin = @user.vins.new(params[:vin])

    if @vin.save
        # waiting for implementation
        logger.debug("here we are")
    else
        redirect_to(vins_path)
    end         
end 
```

我想用 rspec 进行测试。但是，我想取消保存操作以模拟失败：

```
it "should send user to vins_path if there is a problem creating the VIN" do
    @vin.stub!(:save).and_return(false)
    post 'create', :vin => { :name => "Test 1", :vin => "test" }
    response.should redirect_to(vins_path)
end 
```

但是，存根似乎不起作用，因为保存操作总是成功的。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T02:31:13.960

试试这个：

```
Vin.any_instance.stub(:save).and_return(false) 
```

# python - Python 系统路径

> ID：14554576
> 
> 赞同：0
> 
> 时间：2013-01-28T02:19:29.700
> 
> 标签：python

如果我在 python 中有以下文件结构：

```
 directory1
    ├── directory2
    │   └── file2
    └── file1 
```

其中目录 2 是目录 1 的子目录，并且假设两者都不是包，假设我使用的是 sys.path，如何从 file2 引用 file1 模块？假设我在文件 1 中有 x=1 并且我想打印出文件 2 中 x 的值，我将在文件 2 中使用什么导入语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:29:50.393

如果 directory1 和 directory2 都是`sys.path`绝对路径，无论一个是另一个的子目录，那么您可以使用简单的语句导入这两个文件（我假设它们至少以 .py 扩展名命名）：

```
# in file 1:
import file2

# in file 2:
import file1 
```

然后你可以像往常一样访问内容：

```
# in file 2
import file1
print file1.x 
```

如果您需要`sys.path`在 file2 中进行设置，请使用以下内容：

```
# in file 2
import sys
import os.path
path = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
sys.path.insert(0,path)

import file1
print file1.x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T02:29:08.750

```
└── directory1
    ├── directory2
    │   └── file2.py
    └── file1.py 
```

$ cat directory1/file1.py

```
x=1 
```

$ cat directory1/directory2/file2.py

```
import sys 
from os.path import  dirname, realpath
sys.path.append(dirname(realpath(__file__)) + '/..')
sys.path.append('..')

from file1 import x

print x 
```

$ python directory1/directory2/file2.py

```
1 
```

# cordova - jQuery Mobile：跳回到列表视图中的位置 (iOS 4.3)

> ID：14554578
> 
> 赞同：1
> 
> 时间：2013-01-28T02:19:43.737
> 
> 标签：cordova, jquery-mobile, ios4

我正在使用 Phonegap 和 jQuery Mobile 构建一个 iPhone 应用程序。我有一个包含多个条目的列表视图，链接到每个条目的详细信息站点。

使用 iOS > 4.3，当我从详细信息页面导航回列表视图时，我会回到选择条目的旧位置。使用 iOS 4.3 不起作用。

（我也遇到了修复 haeder 和 iOS 4.3 的问题，但通过 polyfill 修复解决了这个问题）

这个问题也有解决方法吗？

谢谢！

# android - 使用 SystemUiHider 保持导航栏隐藏

> ID：14554580
> 
> 赞同：8
> 
> 时间：2013-01-28T02:20:20.647
> 
> 标签：android, uinavigationbar, fullscreen, android-fullscreen

在旧版本的 Android 中，必须使用：`android:theme="@android:style/Theme.NoTitleBar.Fullscreen"`在清单中使标题栏消失。

在较新的 ADT 版本中，我注意到一个`SystemUiHider`类，它允许您调用它的`hide()`方法来删除不仅标题栏，还删除操作栏和导航栏。

我正在尝试编写一个全屏应用程序，除非按下一个小的隐藏按钮，否则我希望保持全屏状态（用于信息亭实现）。

我尝试采用标准 FullscreenActivity（从新的 android 项目向导生成），并以多种方式防止 UI 重新出现：

*   调用`mSystemUiHider.hide()`in `setOnVisibilityChangeListener`（在检测到可见性变化时尝试立即隐藏 UI）
*   设置：（`AUTO_HIDE_DELAY_MILLIS = 0`尝试在可见时立即隐藏它）
*   防止在方法`mSystemUiHider.show();`内调用（以防止显示）`onClick``contentView.setOnClickListener`
*   我还在`setSystemUiVisibility`android.view 的文档中看到了示例（如果显示或可见性发生更改，再次尝试立即隐藏它）

它们似乎都不起作用（当尝试其中任何一种时，Android 默认为导航栏的低调模式。

我知道他们可能不希望开发人员做我想做的事情，但我希望我可以扩展`SystemUiHider`（和/或`SystemUiHiderBase`）并覆盖这些`show()`方法，使其基本上不显示，除非传递一个`true`标志。我似乎找不到关于这些类的任何文档（也许是因为它们是实用程序类？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:06:21.830

与设备的任何交互都会带回导航栏。

[https://developer.android.com/reference/android/view/View.html#SYSTEM_UI_FLAG_HIDE_NAVIGATION](https://developer.android.com/reference/android/view/View.html#SYSTEM_UI_FLAG_HIDE_NAVIGATION)

# python - 在 mac 上安装 Python/PyGame

> ID：14554582
> 
> 赞同：4
> 
> 时间：2013-01-28T02:20:51.787
> 
> 标签：python, macos, installation, pygame

我一直在尝试安装 PyGame，但收效甚微。我下载了

`pygame-1.9.1release-python.org-32bit-py2.7-macosx10.3.dmg`

来自此[链接](http://www.pygame.org/downloads.shtml)的 PyGame 版本并使用向导安装它，但是当我在 IDLE 中键入 import pygame 时，我收到以下消息。

```
$ import pygame

Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    import pygame
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pygame/__init__.py", line 95, in <module>
    from pygame.base import *
ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pygame/base.so, 2): no suitable image found.  Did find:
    /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pygame/base.so: no matching architecture in universal wrapper 
```

我做错了什么？另外，PyGame 的先决条件是什么？我在一台新电脑上做这一切，我几乎没有下载任何东西。

我正在运行 OS X 版本 10.8.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-23T07:35:15.927

我知道这个线程有点旧，但我想我会分享我在这个主题上的经验......

我正在使用运行 OS Mavericks 和 python 2.7 的 64 位 MacBook Pro。

**脚步：**

*   如果您安装了几个不同版本的 pygame，同时试图让该死的东西导入并成功运行，请确保您删除/卸载所有这些以重新开始。我在终端中进行了简单的搜索，以查看所有各种 pygame 文件夹的位置：

    ```
    In Terminal: sudo find / -iname "pygame" 
    ```

结果显示所有 pygame 目录的列表，这些是您要删除的文件夹。请注意，我在终端中创建了一个新选项卡来执行此操作，因此我可以从前一个选项卡上的搜索中引用目录，并轻松复制每个目录，而无需再次搜索以记住它们的位置：

```
 In Terminal: sudo rm -R -i path/pygame 
```

另请注意，您可以`-i`从上面的代码中取出，它不会确认删除某些文件，但在从终端删除完整目录时要非常小心。

*   一旦您的机器清除了所有以前的 pygame 安装，请确保您拥有来自 python.org 的 python 2.7，而不是 IDLE（默认的 Mac Python 解释器）！这个非常重要。我使用 PyCharm，它很震撼！此外，选择适用于 32 位机器和 64 位机器的版本 - 这样您的 64 位机器上的 pygame 32 位安装程序就不会出现问题。我尝试了相同的安装过程，但只安装了 64 位 python 2.7 并且它不起作用。下面提供的链接：

    [下载 32/64 位 Python 2.7](https://www.python.org/ftp/python/2.7.8/python-2.7.8-macosx10.6.dmg)

*   接下来，下载适用于 OS X 10.3 及更高版本的 32 位 pygame 文件并运行从 dmg 创建的 mpkg 文件。下面提供的链接。

    [下载 python 2.7 的 pygame 1.910 版本](http://pygame.org/ftp/pygame-1.9.1release-python.org-32bit-py2.7-macosx10.3.dmg)

你现在应该在你的 python 2.7 包库中安装了一个工作的 pygame。享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T03:35:28.737

你下载的是python 64位还是python 32位？

如果您没有正确的，这可能会导致严重问题，如果您有 64 位，则可以从[http://www.lfd.uci.edu/~gohlke/pythonlibs/#pygame下载 pygame 64 位](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pygame)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T02:35:26.867

您是否从 python.org 安装了 python？还是使用 OS X 自带的那个？

如果您使用的是 Apple 提供的，则必须先从 python.org 下载该软件包，然后使用该软件包进行安装。或者你可以试试 Lion-pygame 包（链接在下载页面的 Macintosh 部分的底部），但它可能不兼容。

# php - PHP 计费周期的天数，仅知道月份中的某天

> ID：14554589
> 
> 赞同：-1
> 
> 时间：2013-01-28T02:22:32.700
> 
> 标签：php, date, mktime

我正在尝试计算计费周期中的天数和计费周期中剩余的天数。我有一个值（即 5），它代表每个月的计费日期（在这种情况下是每个月的 5 日）。我需要一种方法：

一种。计算本月5日到次月4日之间的天数

湾。计算今天到下个月4号之间的天数

比方说，我一直卡住的地方是，今天是本月的 3 号。好吧，这个月的 5 号还没有发生，所以计算需要回溯到上个月的 5 号（最终将计算出计费周期还剩两天）。我能得到一些帮助如何计算这个属性吗？很抱歉，我没有要发布的任何代码片段 - 我尝试的每个 mktime / date / strtotime 组合都失败了，所以我没有任何有用的东西可以发布。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:21:26.103

你的问题很难理解，你的解释也没有让它变得更容易，但似乎你有一个特定的日期 X（完全知道，有日、月和年），以及该月的下一个第 n 天.

假设您有 $d、$m、$y（当前日期的日、月、年）和 $n（在第 n 天计费）。如果您还没有拆分它们，您可以使用“date()”来提取这些部分。

如果`$d > $n`，那么您将在下个月向他们收费。如果`$d < $n`，则将在本月。如果`$d == $n`账单是现在或下个月，您的选择。

添加一个月（记住要正确处理 12 月）将为您提供计费日期，您可以计算差异。

或者，只需在循环中为当前日期添加一天，直到您达到计费日期...

# c++ - 如何重构具有大量 std::cin 和 std::cout 操作的程序？

> ID：14554590
> 
> 赞同：0
> 
> 时间：2013-01-28T02:22:33.320
> 
> 标签：c++

这是我的代码，我不太喜欢它，我知道它可以改进，但我不知道怎么做。我如何根据每行上的许多`std::cin`和相互操作来重构这个程序？`std::cout`是否有任何 STL 库魔法可以改善这一点？谢谢。

```
#include <iostream>
#include <string>

int main() {

   int grade;

   std::cout << "Enter the grade you recieved: ";
   std::cin >> grade;
   std::cout << grade << "\n\n";

   if (grade == 100) {
      std::cout << "You got a perfect score!\n";
   } else if (grade > 90 && grade < 100) {
      std::cout << "You got an A\n";
   }

   if (grade == 100) {
      std::cout << "Grade: A+";
   } else if (grade > 90 && grade < 100) {
      std::cout << "Grade : A";
   } else if (grade > 80 && grade < 90) {
      std::cout << "Grade: B";
   } else if (grade > 70 && grade < 80) {
      std::cout << "Grade: C";
   } else if (grade > 60 && grade < 70) {
      std::cout << "Grade: D";
   } else if (grade < 60) {
      std::cout << "Grade: F";
   }

} 
```

为了清楚起见，我想改进这段代码，因为使用所有这些 if 语句和打印函数似乎非常不习惯。如何利用 STL 或模板函数/类来重构它？也欢迎 C++11。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T03:19:54.193

你已经得到了几个答案，但我想我还是会做一些不同的事情：

```
static char const *grades[] = { "F", "F", "F", "F", "F", "F", "D", "C", "B", "A", "A+"};

std::cout << grades[grade/10]; 
```

[我希望我正确地计算了“F”的数量。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T02:41:15.877

```
#include <iostream>
#include <string>
#include <map>

int main() {
    std::map<int,std::string> grades = {
        {10,"A+"}, {9,"A"}, {8,"B"}, {7,"C"}, {6,"D"}, {5,"F"}
    };
    std::cout << "Input a grade: ";
    int grade;
    std::cin >> grade;
    grade /= 10;
    if(grade <= 5)
        grade = 5;
    std::cout << "Your grade is: " << grades[grade];
} 
```

使用查找表。不验证输入或任何东西，但它很短。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T02:25:43.347

```
std::string GetGrade(int grade);

cout<<GetGrade(grade); 
```

是清理东西的一种方法。基本上将所有`if`s 移入 GetGrade 函数并调用`cout`一次。

一旦进入 GetGrade，您可以使用下面的数组并取消`if`s 以支持循环。

```
struct Grade{
    int start,end;
    std::string gradeStr;
}; 
```

# c# - C# 中的分布点（整数）

> ID：14554593
> 
> 赞同：-1
> 
> 时间：2013-01-28T02:23:09.370
> 
> 标签：c#, arrays, points

基本上我正在尝试建立一个积分系统，除了分配积分之外，一切都已完成。

例如，我有一个存储点的数组（键是玩家 ID）：

```
array[0] = 0
array[1] = 0
array[2] = 3
array[3] = 3
array[4] = 5 
```

所以从这个我必须去以下积分系统： 5 代表第 1 4 代表第 2 3 代表第 3 2 代表第 4 1 代表第 5

现在，如果您并列第二，就像示例中一样，两名球员都得到 4 分，最后两名球员得到 2 分，因为他们并列第四，但我需要以下示例的可能性：

```
array[0] = 1
array[1] = 2
array[2] = 3
array[3] = 4
array[4] = 5 
```

均匀分布的积分，也可以转换成其他积分系统，现在这是动态的，可能有 10 个玩家，在这种情况下，积分系统如下所示：

第 10 名 第 2 名 9 名 第 3 名 8 名 第 4 名 7 名 第 5 名 6

等等。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:53:27.883

像这样的东西应该是你正在寻找的东西。请记住，考虑到我是按照大脑的想法写下来的，它并没有完全优化。

我们可以从我们的分数数组开始（根据提供的示例）：

```
int[] scores = { 0, 0, 3, 3, 5 }; 
```

接下来，我们可以把数据换成不同的形式，这样更容易排序：

```
Dictionary<int, int> playerScorePair = new Dictionary<int, int>();

//Loop through scores[] and add each player # and score to the Dictionary.
for (int i = 0; i < scores.Length; i++)
    playerScorePair.Add(i, scores[i]);

playerScorePair = playerScorePair.OrderByDescending(psp => psp.Value)
                                 .ToDictionary(psp => psp.Key, psp => psp.Value); 
```

这会根据每个玩家的分数按降序对字典进行排序。之后，我们可以找出每个玩家进来的地方：

```
int previousScore = -1, counter = 1, place = 1; //A few starting variables.
int totalPlayers = playerScorePair.Count;
int[] endScores = new int[scores.Length]; //This endScores[] array will hold the final scores for each player based on the place they finished in.

foreach (KeyValuePair<int, int> kvp in playerScorePair)
{
    //If the previous score is not equal to the current score, then we can
    // increment the current place. For example, if players 1-2-3 had scores of
    // 10-10-5 respectively, players 1 and 2 would be in first, but player 3 would be
    // equal to "counter", which would be the 3rd iteration, thus 3rd place.
    if (previousScore != kvp.Value && previousScore != -1)
        place = counter;

    endScores[kvp.Key] = (totalPlayers - place) + 1;
    previousScore = kvp.Value;
    counter++;
} 
```

`endScores`现在将包含基于每个玩家进入的位置的所有分数。例如，玩家 #2 将`endScores[2]`等于 4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:46:58.323

使用以下代码解决了这个问题：

```
 int maxPointGiven = scoreManager.numPlayers;

        int previousScore = 0;
        int previousPosition = 0;
        int previousPoints = 0;
        int countGiven = 0;
        bool newCount = true;

        for (int i = (scoreList.Count - 1); i >= 0; i--)
        {
            if (newCount == true)
            {
                previousPosition = i + 1;
                previousScore = scoreList[i].Value;
                previousPoints = maxPointGiven;
                newCount = false;
            }

            if (scoreList[i].Value == previousScore)
            {
                int oldPoints = int.Parse(dgvPlayers.Rows[scoreList[i].Key].Cells[2].Value.ToString());
                dgvPlayers.Rows[scoreList[i].Key].Cells[2].Value = previousPoints + oldPoints;
                countGiven += 1;
            }
            else
            {
                int oldPoints = int.Parse(dgvPlayers.Rows[scoreList[i].Key].Cells[2].Value.ToString());
                previousPosition = i + 1;
                previousScore = scoreList[i].Value;
                previousPoints = maxPointGiven - countGiven;
                dgvPlayers.Rows[scoreList[i].Key].Cells[2].Value = previousPoints + oldPoints;
                countGiven += 1;
            }
        } 
```

# java - Mahout：运行 grouplens 示例会给出 ClassNotFound 异常

> ID：14554595
> 
> 赞同：2
> 
> 时间：2013-01-28T02:23:27.000
> 
> 标签：java, mahout

我正在[这个网站](https://cwiki.apache.org/MAHOUT/recommender-documentation.html)上运行初学者 Mahout 推荐器教程。我到了运行 jetty 以启动推荐程序的步骤：

```
mvn jetty:run 
```

Jetty 似乎已启动，但无法找到 grouplens 示例 jar。IE 我得到这个例外：

> javax.servlet.ServletException: java.lang.IllegalStateException:java.lang.ClassNotFoundException:org.apache.mahout.cf.taste.example.grouplens.GroupLensRecommender

在做了一些研究之后，我发现[了几个](http://lucene.472066.n3.nabble.com/Jetty-Http-error-404-td1852221.html) 没有明确解决这个问题的问题[。](http://comments.gmane.org/gmane.comp.apache.mahout.user/13885)或者列出了解决方案，但没有给出关于什么有效的反馈。我尝试将 maven 的内存从推荐的 1024 MB 增加到 2048 MB，但这似乎并没有改变任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T02:23:27.000

这是 Maven 依赖项的问题。似乎上述线程之一建议（但没有关于它是否有效的反馈）正确的解决方案是编辑 integration/pom.xml 文件并包含此依赖项：

```
<dependency>
  <groupId>${project.groupId}</groupId>
  <artifactId>mahout-examples</artifactId>
  <version>0.7</version>
</dependency> 
```

我相信这可能与我的 maven 存储库中有旧版本的 Mahout 有关。

# php - How to make a PHP Calendar with future months and dates?

> ID：14554605
> 
> 赞同：0
> 
> 时间：2013-01-28T02:24:47.450
> 
> 标签：php, jquery, html, css, calendar

Okay, so I have a website I am creating, and I have a calendar made with HTML.

[http://screencloud.net/v/b1OD](http://screencloud.net/v/b1OD)

I want to add raquo's to the left and right of where it says (January 2013), so the user can browse the future and past months. How can I achieve this, along with making it update every month? Anyone have any ideas? It's coded in pure xHTML and CSS.

Long story short: How can I make this update the calendar monthly automatically? Also, how can I browse future and past months? (jQuery maybe?)

Thanks a lot, IntactDev

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:45:57.403

这是一个php日历。[http://keithdevens.com/software/php_calendar](http://keithdevens.com/software/php_calendar) 希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T02:40:40.870

我同意@Matthew 的观点——实际上有 100 个……而且一般来说，如果你可以避免重新发明轮子——就这样做。如果您想要一些与您的布局相得益彰的东西，请查看以下内容：

[http://amsul.github.com/pickadate.js/themes.htm](http://amsul.github.com/pickadate.js/themes.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T02:28:26.233

There are literally hundreds of Javascript calendars to choose from. This site here actually has a category for it: [http://www.javascriptkit.com/script/cutindex1a.shtml](http://www.javascriptkit.com/script/cutindex1a.shtml)

I suggest googling something like `css javascript calendar`. That can give you your controls, etc. Then you need to figure out how you will be passing your dates (AJAX calls or page post backs to load the data from different months). Either way, if you start with a JavaScript calendar (and layout) you like, it will get you on the right path.

Note: most calendars you will see will be date-pickers for filling forms, but even these can be easily adapted if you find one you like.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T02:33:40.573

你看过 AJAX/jQuery 吗？它具有日期选择器的功能：

[日期选择器 jQuery UI](http://jqueryui.com/datepicker/)

**Edit1：**您可能需要编辑 CSS 以使用自己的配色方案或图像，但我认为它会满足您的所有需求。

**编辑2：**

您可以使用基于 jquery.com 的 CSS 或在本地下载、更改和引用它们。

```
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Datepicker - Default functionality</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
  $(function() {
  $( "#datepicker" ).datepicker();
  });
  </script>
</head>
<body>
  <p>Date: <input type="text" id="datepicker" /></p>
</body>
</html> 
```

# android - 为什么 AlertDialog 在 show() 上崩溃？

> ID：14554607
> 
> 赞同：0
> 
> 时间：2013-01-28T02:24:58.623
> 
> 标签：android

我是 AlertDialogs 的新手，无法让它与光标一起使用。下面的代码在我的 onCreate() 函数中，我知道 Cursor 中有行。我是否缺少创建代码的一部分？

```
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);

// set title
alertDialogBuilder.setTitle("Choose a playlist");

// set dialog message
alertDialogBuilder.setCancelable(false);

// Add cursor items
alertDialogBuilder.setCursor(cursor, new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int pos) {
        Toast.makeText(getApplicationContext(), "Clicked on: " + pos, Toast.LENGTH_SHORT).show();
    }
}, MediaStore.Audio.Media.DISPLAY_NAME);

// create alert dialog
AlertDialog alertDialog = alertDialogBuilder.create();

// show it
alertDialog.show(); 
```

光标生成器：

```
private Cursor getPlaylists() {
    String[] ARG_STRING = {
            MediaStore.Audio.Media._ID,
            MediaStore.Audio.Media.DATA,
            MediaStore.Audio.Media.DISPLAY_NAME,
            MediaStore.Audio.Media.IS_MUSIC
    };
    Cursor cursor = getContentResolver().query(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
                                               ARG_STRING,
                                               null,
                                               null,
                                               null);

    int nameColumn = cursor.getColumnIndex(MediaStore.Audio.Media.IS_NOTIFICATION);
    cursor.moveToFirst();
    for (int i=0; i<5; i++)
        Toast.makeText(getApplicationContext(), "" + cursor.getString(nameColumn), Toast.LENGTH_SHORT).show();
    return cursor;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T02:27:44.303

你说的对。我的意思是代码如下所示：

```
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);

// set title
alertDialogBuilder.setTitle("Choose a playlist");

// set dialog message
alertDialogBuilder.setCancelable(false);

// Add cursor items
alertDialogBuilder.setCursor(cursor, new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int pos) {
        Toast.makeText(getApplicationContext(), "Clicked on: " + pos, Toast.LENGTH_SHORT).show();
    }
}, MediaStore.Audio.Media.DISPLAY_NAME);

// show it
alertDialogBuilder.show(); 
```

那应该行得通。如果没有，你能显示你的 logcat 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T03:55:57.650

在 Cursor Builder 中，您试图获取未查询的列的索引。

```
int nameColumn = cursor.getColumnIndex(MediaStore.Audio.Media.IS_NOTIFICATION); 
```

您的查询需要四列，其中不包括您尝试访问的 MediaStore.Audio.Media.IS_NOTIFICATION：

```
String[] ARG_STRING = {
        MediaStore.Audio.Media._ID,
        MediaStore.Audio.Media.DATA,
        MediaStore.Audio.Media.DISPLAY_NAME,
        MediaStore.Audio.Media.IS_MUSIC
}; 
```

要解决此问题，只需将 MediaStore.Audio.Media.IS_NOTIFICATION 添加到 ARG_STRING。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T03:58:48.813

事实证明，以数字开头的字符串会破坏它。改变

```
MediaStore.Audio.Media.DISPLAY_NAME 
```

到

```
"" + MediaStore.Audio.Media.DISPLAY_NAME 
```

修复它。

# quickbooks - Using QBWC 2.0 to sync QB files

> ID：14554608
> 
> 赞同：1
> 
> 时间：2013-01-28T02:25:08.083
> 
> 标签：quickbooks

I've just begun to read the QB Developer documentation and have come to the conclusion that to write a web-enabled application that will sync/remote backup QB files between two machines over the Internet, that the QBWC is the 'approved' way to accomplish this task. The .NET application samples in the QB SDK (V12) are not using WCF but WSDL and SOAP.

But before I commit to going that route, I am asking if anyone has a better approach. I'd prefer to use WCF and MS Sync Framework, but I don't want to head down that road if it will mean using a cannon to kill a mosquito.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:24:22.110

您在这里确实暗示了两个不同的目标，因此我将具体解决每个目标：

> ... 两台机器之间远程备份 QB 文件 ...

如果您的目标是*备份*，那么 Web 连接器肯定不是答案。Web 连接器的目的是通过 QuickBooks API/SDK 实现 QuickBooks 和 Web 应用程序之间的*集成。*由于并非所有存储在 QuickBooks 中的数据都可以通过 API 访问，因此 Web 连接器*不适合备份*。不可能通过 Web 连接器对整个 QuickBooks 数据集进行完整、准确的备份。

另一方面...

> ... 将同步的启用 Web 的应用程序...

如果您的目标是允许您的 Web 应用程序和 QuickBooks 之间的数据集成/同步，那么 Web 连接器是一个不错的解决方案。是的，它使用 SOAP（总共只有大约 5 个非常简单的方法）。不，如果不编写自己的 Web 连接器版本，就不能使用 WCF/其他任何东西。

如果您添加更多关于您希望具体处理哪些数据的详细信息，您可能会得到一些关于方法的更好答案和建议。

# delphi - TMemoryStream -> PNGImage -> TIcon convertion

> ID：14554612
> 
> 赞同：-3
> 
> 时间：2013-01-28T02:25:25.077
> 
> 标签：delphi, delphi-5

This is rather complicated, but a solution that uses components that I don't have currently installed would be fine, as long as they work with Delphi 5 (cannot currently upgrade this old project to a new Delphi version).

I've a TMemoryStream. The content of the stream is a png image.

I need this data converted to a bitmap that is stored in a TIcon object.

So the chain should be:

MemoryStream -> a png class that loads the image from the stream -> convertion to a TIcon (not HICON).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T10:47:06.653

这是我在另一个论坛中得到的解决方案。问题是/根本不是微不足道的！我在谷歌搜索后问了很多没有任何结果。

```
Procedure LoadPNGAsIcon(const fn: String; var ICO: TIcon);
 var
   Header: PBitmapV5Header;
   hNewBitmap, hMonoBitmap: HBITMAP;
   Bits: Pointer;
   x, y: Integer;
   DC: HDC;
   IconInfo: _ICONINFO;
   Pixel: ^Integer;
   ScanLine: PRGBTriple;
   AlphaScanline: pByteArray;
   PNG: TPngObject;
 begin

   PNG := TPngObject.Create;
   try
     PNG.LoadFromFile(fn);
     if not Assigned(ICO) then
       ICO := TIcon.Create;
     New(Header);
     FillMemory(Header, SizeOf(BitmapV5Header), 1);
     Header.bV5Size := SizeOf(BitmapV5Header);
     Header.bV5Width := PNG.Width;
     Header.bV5Height := -PNG.Height;
     Header.bV5Planes := 1;
     Header.bV5BitCount := 32;
     Header.bV5Compression := BI_BITFIELDS;
     Header.bV5RedMask := $00FF0000;
     Header.bV5GreenMask := $0000FF00;
     Header.bV5BlueMask := $000000FF;
     Header.bV5AlphaMask := $FF000000;
     DC := GetDC(0);
     hNewBitmap := CreateDIBSection(DC, PBitmapInfo(Header)^, DIB_RGB_COLORS,
       Bits, 0, 0);
     Dispose(Header);
     ReleaseDC(0, DC);
     hMonoBitmap := CreateBitmap(PNG.Width, PNG.Height, 1, 1, nil);
     Pixel := Bits;
     for y := 0 to PNG.Height - 1 do
     begin
       ScanLine := PNG.ScanLine[y];
       AlphaScanline := PNG.AlphaScanline[y];
       for x := 0 to PNG.Width - 1 do
       begin
         if Assigned(AlphaScanline) then
           Pixel^ := AlphaScanline[x]
         else
           Pixel^ := 255;
         Pixel^ := Pixel^ shl 8;
         Inc(Pixel^, ScanLine^.rgbtRed);
         Pixel^ := Pixel^ shl 8;
         Inc(Pixel^, ScanLine^.rgbtGreen);
         Pixel^ := Pixel^ shl 8;
         Inc(Pixel^, ScanLine^.rgbtBlue);
         Inc(Pixel);
         Inc(ScanLine);
       end;
     end;
     IconInfo.fIcon := true;
     IconInfo.hbmMask := hMonoBitmap;
     IconInfo.hbmColor := hNewBitmap;
     ICO.Handle := CreateIconIndirect(IconInfo);

     DeleteObject(hNewBitmap);
     DeleteObject(hMonoBitmap);
   finally
     PNG.Free;
   end;
 end;

 procedure TForm1.Button1Click(Sender: TObject);
 var
   ICO:TIcon;
 begin
   ICO := nil;
   LoadPNGAsIcon('C:\Bilder\about.png',ico);
   image1.Picture.Assign(ico);
   ico.Free;
 end; 
```

# dwolla - 使用 Dwolla 付款按钮的最低金额？

> ID：14554614
> 
> 赞同：0
> 
> 时间：2013-01-28T02:25:45.433
> 
> 标签：dwolla

关于使用支付按钮和服务商费用的一个问题：

我将辅导员费用设置为 2%，然后注意到我无法使用付款按钮收取低于 0.26 美元的费用。

我“做错了”吗？

另外，这是否记录在任何地方？如果没有，可能吗？

更重要的是，我想提出分级引导者费用的建议，这样用户可以相互支付低于 0.26 美元的费用，而引导者不会得到 2%。但是付款按钮仍然适用于低于 0.26 美元的金额，并且只有在金额为 0.26 美元或更高时才会收取中介费。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:26:28.370

Dwolla 的最低交易金额为 0.01 美元。由于您将中介费默认设置为交易金额的 2%，因此 Dwolla 必须强制执行一个涵盖交易总金额和中介费至少为 0.01 美元的总金额。满足中介费要求的最低交易金额为 0.25 美元（0.25 x 2% = 0.01 美元），再加上 0.01 美元的最低交易金额，您就得到了 0.26 美元。

结论 - 要么在您的应用程序的功能页面中禁用促进者费用功能，要么在您的 API 调用中简单地将促进者费用覆盖为 0.00 美元。

# android - Start an Activity even when Android phone is in locked mode / on lock screen

> ID：14554616
> 
> 赞同：6
> 
> 时间：2013-01-28T02:26:01.383
> 
> 标签：android, android-wake-lock

How I can start my activity even when phone is in locked mode so I can access my application?

I want to ring an alarm first using `ringAlarm()` then goes to another activity that will display `alertdialog` to stop the alarm.

It works fine if phone is active, but when the phone is locked, it just alarms continuously and by the time i unlock the phone, the stop alarm button doesn't activate. Please help me. Thanks for help in advance.

Here is my code:

```
public class EAlarmReceiver extends BroadcastReceiver {
public static String sender;
public static String sms = "";
public static Ringtone r;
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Bundle bundle = intent.getExtras(); 
    Object[] pdusObj = (Object[]) bundle.get("pdus"); 
    SmsMessage[] messages = new SmsMessage[pdusObj.length]; 
    for (int i = 0; i<pdusObj.length; i++) 
    { 
            messages[i] = SmsMessage.createFromPdu ((byte[]) 
            pdusObj[i]); 
            sender = messages[i].getOriginatingAddress();
            sms = messages[i].getMessageBody();//save sms to string
    } 

    for (SmsMessage msg : messages) {
        if (msg.getMessageBody().contains("alert")) {

            Intent openStopAlarm = new Intent("proj.receiver.STOPALARM");
            openStopAlarm.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_NO_HISTORY);
            ringAlarm(context);
            context.startActivity(openStopAlarm);
            abortBroadcast();
        }//end if
    }//end for
}// end onreceive

//ring the alarm
public void ringAlarm(Context context)
{
     Uri alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
     if(alert == null){
         // alert is null, using backup
         alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
         if(alert == null){  // 
             // alert backup is null, using 2nd backup
             alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);               
         }
     }
     r = RingtoneManager.getRingtone(context.getApplicationContext(), alert);
     AudioManager audioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
     int maxVolumeAlarm = audioManager.getStreamMaxVolume(AudioManager.STREAM_ALARM);
     int maxVolumeRing = audioManager.getStreamMaxVolume(AudioManager.STREAM_RING);
     audioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
     audioManager.setStreamVolume(AudioManager.STREAM_ALARM, maxVolumeAlarm,AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE);
     audioManager.setStreamVolume(AudioManager.STREAM_RING, maxVolumeRing,AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE);
     r.play();
        Toast.makeText(context.getApplicationContext(), "alarm started", Toast.LENGTH_LONG).show();
}
//end ringAlarm()
} 
```

I've seen a code on how to do it but I didn't know how to use it. so I'm still having the same problem. Here's the code.

```
public class DismissLock extends Activity {

PowerManager pm;
WakeLock wl;
KeyguardManager km;
KeyguardLock kl;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    Log.i("INFO", "onCreate() in DismissLock");
    pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
    km=(KeyguardManager)getSystemService(Context.KEYGUARD_SERVICE);
    kl= km.newKeyguardLock("INFO");
    wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP|PowerManager.ON_AFTER_RELEASE, "INFO");
    wl.acquire(); //wake up the screen
    kl.disableKeyguard();// dismiss the keyguard

    setContentView(R.layout.main);
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    wl.release(); 
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    wl.acquire();//must call this!
}

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T02:55:43.163

您只需要设置一些额外的窗口标志：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON
        + WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD|
        + WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED|
        + WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON); 
```

来源：[默认锁定屏幕上的 Android 活动](https://stackoverflow.com/questions/3629179/android-activity-over-default-lock-screen)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-21T18:14:09.053

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON
    + WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD|
    + WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED|
    + WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON); 
```

将上面的代码粘贴到您要在锁定屏幕上执行的那个活动中。将代码放入 oncreate();

# objective-c - 尝试实例化我自己的类时出现编译器错误

> ID：14554617
> 
> 赞同：-1
> 
> 时间：2013-01-28T02:26:03.373
> 
> 标签：objective-c

我正在尝试创建一个类的实例`Dog`，但是编译器无法识别该类并且不会实例化它。`Pet`我尝试将初始化程序从超类复制到`Dog`中，但这并没有奏效。为什么我不能实例化`Dog`对象？

宠物.h

```
#import <Foundation/Foundation.h>

@interface Pet : NSObject
{
    // Some ivars
}

//Randomizer
+(id)randomPet;

//Initializer 
-(id)initName:(NSString *)name
initColor:(NSString *)color
initBreed:(NSString *)breed;

// Getters and setters...

@end 
```

宠物

```
#import "Pet.h"

@implementation Pet

+(id)randomPet
{
   // Empty 
}

-(id)initName:(NSString *)name
    initColor:(NSString *)color
    initBreed:(NSString *)breed;
{
    self = [super init];
    if(self)
    {
        // Initialization...
    }
    return self;

}

@end 
```

狗.h

```
#import "Pet.h"

@interface Dog : Pet
-(id)initName:(NSString *)name initColor:(NSString *)color
    initBreed:(NSString *)breed;

// Getters and setters...
@end 
```

狗.m

```
#import "Dog.h"

@implementation Dog

+(id)RandomPet
{
    // Snip...
}

- (id)initName:(NSString *)name
        initColor:(NSString *)color
        initBreed:(NSString *)breed;
{
    self = [super init];
    if(self) {
        // Initialization...
    }
    return self;
} 
```

主文件

```
#import <Foundation/Foundation.h>
#import "Pet.h"
int main(int argc, const char * argv[])
{

    @autoreleasepool
    {
        Dog *d = [[Dog alloc] init]];
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:35:49.967

您没有将 Dog 导入具有 main 方法的方法中。添加：

```
#import "Dog.h" 
```

宠物进口下。您可能需要考虑将所有域对象放在一个标头中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T02:37:50.713

我注意到的几件事：

*   您`main.m`将需要 import `Dog.h`，而不仅仅是`Pet.h`，因为它专门指`Dog`类。

*   你的接口`Dog.h`重新声明了一堆已经在父类中声明的方法。您不需要这样做——所有类都隐式支持父类上定义的所有方法。是否需要唯一的实现由您决定，但不需要在标题中说明。

*   既没有`-[Dog init]`也没有`-[Pet init]`实施。也许您想要（未完全实现的）`+[Dog randomPet]`方法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T03:01:02.803

您有以下错误：

1.  而不是`#import Pet.h`使用`#import Dog.h`

2.  `Dog *d = [[Dog alloc] init]];`应该`Dog *d=[Dog alloc]init];`

3.  无需在子类中重新定义与在超类中相同的方法。

除了这些答案之外，我还想补充一些东西，这些不是错误，但它会增加你的可可编程风格和习惯：

方法

```
//Initializer 
-(id)initName:(NSString *)name
initColor:(NSString *)color
initBreed:(NSString *)breed; 
```

不符合标准，它应该是：

```
//Initializer 
-(id)initName:(NSString *)name withColor:(NSString *)color withBreed:(NSString *)breed; 
```

* * *

在以下几行中

```
int petId;
while(petId != 1 && petId!=2) 
```

用 初始化`petID=0;`呢？如果它的垃圾值变为 1，那么它永远不会进入循环。

* * *

您可以使用@property 创建属性。

# jquery - jQuery：切换一个 到它的原始位置，如 CSS 中的 divs ID 所述

> ID：14554618
> 
> 赞同：0
> 
> 时间：2013-01-28T02:26:09.853
> 
> 标签：jquery, css, positioning

我有几个带有“itemWerk”类的div。我希望切换它们，以便我可以放大它们并将它们设置回原始大小和位置。

[正如你在这里](http://casperjonker.site50.net/MijnWerk.html)看到的，我已经走了很远。这只是我无法开始工作的第二个功能中的定位。我不确定我应该使用什么：.position 或 .offSet 或 .data... 看过几个指南来解释我在寻找什么但无法让它工作。

这是我的 jQuery 代码：

```
$('.itemWerk').toggle(

function(){

    $(this)
        .animate({'z-index':'10'}, { duration: 0, queue: false })
        .animate({'left':'0.5em'}, { duration: 400, queue: false })
        .animate({'top':'0.5em'}, { duration: 400, queue: false })
        .animate({'width':'74em'}, { duration: 400, queue: false })
        .animate({'height': '53em'}, { duration: 400, queue: false })

    $("#achtergrondWerk")
        .animate({'height':'54em'},{ duration: 400, queue: false }) 
;},

function(){

    $(this)
        .animate({'left':'postion.left'}, { duration: 400, queue: false })
        .animate({'top':'position.top'}, { duration: 400, queue: false })
        .animate({'width':'10em'}, { duration: 400, queue: false })
        .animate({'height': '16em'}, { duration: 400, queue: false })

    $("#achtergrondWerk")
        .animate({'height':'38em'},{ duration: 400, queue: false }) 
}); 
```

这是 HTML 文档中的 div 之一：

```
<div class="itemWerk" id="werkEen">

</div> 
```

这是 .itemWerk 类的 CSS 代码

```
.itemWerk {
width: 10em;
height: 16em;
background: white;
float: left;
overflow: hidden;
white-space: nowrap;
cursor: pointer;
} 
```

和 ID #werkEen

```
#werkEen {
position: absolute;
top: 2em;
left: 2em;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T02:28:44.850

使用`animate()`属性`style`。所以你可以这样做：

```
$('.itemWerk').removeAttr('style'); 
```

是的，我正要从评论中说这些。

> **注意：** jQuery [UI](http://jqueryui.com/)`.animate()`项目通过允许一些非数字样式（例如颜色）动画化来扩展该方法。该项目还包括通过 CSS 类而不是单个属性指定动画的机制。

[使用 jQuery](http://jqueryui.com/switchClass/)的 CSS 类动画示例，不使用内联样式。

* * *

如果你只想依赖 jQuery 和`.animate()`方法，你可以使用`.data()`来存储以前的值。

```
$('.itemWerk').toggle(

function(){

    $.data(this, 'top', $(this).css('top'));
    $.data(this, 'left', $(this).css('left'));
    /* if you need to store others, yeah, go ahead **/

    $(this)
        .animate({'z-index':'10'}, { duration: 0, queue: false })
        .animate({'left':'0.5em'}, { duration: 400, queue: false })
        .animate({'top':'0.5em'}, { duration: 400, queue: false })
        .animate({'width':'74em'}, { duration: 400, queue: false })
        .animate({'height': '53em'}, { duration: 400, queue: false })

    $("#achtergrondWerk")
        .animate({'height':'54em'},{ duration: 400, queue: false }) 
;},

function(){

    $(this)
        // use the $.data this way: //
        .animate({'left':$.data(this, 'left')}, { duration: 400, queue: false })
        .animate({'top':$.data(this, 'top'}, { duration: 400, queue: false })
        .animate({'width':'10em'}, { duration: 400, queue: false })
        .animate({'height': '16em'}, { duration: 400, queue: false })

    $("#achtergrondWerk")
        .animate({'height':'38em'},{ duration: 400, queue: false }) 
}); 
```

### 工作小提琴：http: [//jsfiddle.net/praveenscience/K2PL3/](http://jsfiddle.net/praveenscience/K2PL3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T02:47:55.340

您可以使用`data`来存储元素的顶部和左侧位置。然后在将项目设置回原位时使用这些值。

[http://jsfiddle.net/AKhGc/](http://jsfiddle.net/AKhGc/)

您可以选择`offset`或`position`检索顶部和左侧的值。你想要`position`，因为你正在寻找相对于父母。

```
$('.itemWerk').toggle(

function () {
    //store itemWerk's original size and position
    var $this = $(this);
    $this.data('left', $this.position().left).data('top', $this.position().top);

    //animation code removed because it isn't relevant to the answer

},

function () {
    $this = $(this);

    $(this)
        .animate({'left':$this.data('left')}, { duration: 400, queue: false })
        .animate({'top':$this.data('top')}, { duration: 400, queue: false })
        .animate({'width':'10em'}, { duration: 400, queue: false })
        .animate({'height': '16em'}, { duration: 400, queue: false })

    $("#achtergrondWerk")
        .animate({'height':'38em'},{ duration: 400, queue: false }) 

}); 
```

# python - Sublime Text 2 Plugin Development Trace Variable

> ID：14554619
> 
> 赞同：0
> 
> 时间：2013-01-28T02:26:20.720
> 
> 标签：python, sublimetext2

I've looked everywhere and can't seem to find a way to dump a variable into the command prompt. For example, if I have the following:

```
 def (self, edit):
      myvar = 'this is a string' 
```

I would like to call a method that would show the value of `myvar` in the Sublime Command Prompt. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:14:39.183

我是 python 新手，但 Sublime 只是向您展示了一个 Python 编译器。因此，您可以使用以下内容打印到命令行：

```
print(myvar) 
```

# list - Ocaml return a function from a list of tuples

> ID：14554620
> 
> 赞同：0
> 
> 时间：2013-01-28T02:26:35.127
> 
> 标签：list, function, ocaml

I need to convert a list into a function. I've managed to make the list into a list of tuples. So I have something like this now:

```
[Expr, (Expr, [[T"("; N Expr; T")"]; [N Num]; [N Expr; N Binop; N Expr]; [N Lvalue]; [N Incrop; N Lvalue]; [N Lvalue; N Incrop]]
 Lvalue, [[T"$"; N Expr]])] 
```

I want the final result to look something like:

```
(Expr,
 function
   | Expr ->
       [[N Term; N Binop; N Expr];
       [N Term]]
   | Lvalue ->
       [[T"$"; N Expr]]) 
```

I'm mostly stuck on how I can implement the OR symbols (|). Any advice would be greatly appreciated. Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T02:45:16.310

您正在描述事物，就好像您要生成函数的*源代码一样。*除非您正在编写某种预处理工具，否则这没有多大意义。

假设您不是在使用预处理器，您应该考虑您希望该函数做什么，而不是它应该具有的文本形式。您可以轻松获得您想要的功能——它基本上就像`List.assoc`功能一样工作。但是你不能通过在运行时为函数创建某种文本形式来做到这一点。

这是一个将一对列表转换为查找函数的函数：

```
# let makeLookup pairs = fun x -> List.assoc x pairs;;
val makeLookup : ('a * 'b) list -> 'a -> 'b = <fun>
# let f = makeLookup [(1, "yes"); (2, "no")];;
val f : int -> string = <fun>
# f 1;;
- : string = "yes"
# f 2;;
- : string = "no"
# 
```

（实际上和它的参数颠倒`makeLookup`是一样的。）`List.assoc`

# c++ - Setting a calling convention for std::function

> ID：14554622
> 
> 赞同：1
> 
> 时间：2013-01-28T02:27:04.457
> 
> 标签：c++, stl, calling-convention

I'm very new to using std and I'm currently trying to call into a function that takes an std::function as a param. Something similar to below:

In the .h file in one lib:

```
typedef bool t (/*Params*/);

void __stdcall Foo(std::function<t> &function) {m_function = function;}

std::function<t> m_function; 
```

I imported the lib and tried to use Foo in another cpp file:

```
bool Implementation (/*Params*/)
{
   // Implementation
}

void Bar()
{
    Foo(std::function<t> (Implementation));
} 
```

I'm getting a linker error (LNK2019) when I compile for x86 (but not x64) because of the calling convention:

```
Unresolved External Symbol __stdcall Foo (class std::tr1::function<bool __cdecl(/*Params*/) const&) 
```

From this I gathered that I need to mark "t" and Implementation as __stdcall but doing so causes other compile failures. I should also note the code compiled correctly when it was being built in the same lib. Is there a way to associate a calling convention to an std::function?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T02:40:37.767

尝试：

```
void Foo(const std::function<bool()> &func)
{
  func();
}

bool Implementation (/*Params*/)
{
  cout << "Implementation"<<endl;
  return true;
}

void Bar()
{
    Foo(std::function<bool()>(&Implementation));
}

int main()
{
  Bar();
  return 0;
} 
```

# ubuntu - Unix script command not capturing stdin when launched as external process

> ID：14554625
> 
> 赞同：2
> 
> 时间：2013-01-28T02:27:28.527
> 
> 标签：ubuntu, groovy, stdin, external-process

My situation is similar to [Redirect Stdin and Stdout to File](https://stackoverflow.com/questions/220814/redirect-stdin-and-stdout-to-file?rq=1). I want to run a program and capture the entire session (stdin and stdout) of running a program as though it had been run interactively from a terminal.

From [Dump terminal session to file](https://stackoverflow.com/questions/7564960/dump-terminal-session-to-file) I found out that the `script` command would work. Here is a simplified version of my program (written in Groovy) that does this.

```
import groovy.io.GroovyPrintWriter

def OUTPUT_FILE = "output.txt"

def sysout = new StringBuffer()
def syserr = new StringBuffer()

// On Linux (Ubuntu 12.04) - starts the bc command with script and capture session to OUTPUT_FILE
Process proc = "script -q -f -c bc ${OUTPUT_FILE}".execute()
// On OS X with a slightly different version of Script
// Process proc = "script -q ${OUTPUT_FILE} bc".execute()

proc.consumeProcessOutput(sysout, syserr) // Spawns separate threads that will consume the out to prevent overflow

proc.withWriter { writer ->
  // Writes the following commands to the spawned process
  def gWriter = new GroovyPrintWriter(writer)
  // Imagine that the user enters these lines
  gWriter.println "a = 5"
  gWriter.println "b = 4"
  gWriter.println "c = a * b"
  gWriter.println "c"
  gWriter.println "quit"
}

proc.waitForOrKill(20000) // Give it 20 seconds to complete or kill the process

println 'Standard out captured from process:\n' + sysout
println 'Standard err captured from process:\n' + syserr 
```

The program I wrote works on the version of script available on OS X. On OS X, the entire session is captured in the sysout variable and also written to the OUTPUT_FILE correctly.

**Here's what I expect to get**

```
bc 1.06.95
Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006 Free Software Foundation, Inc.
This is free software with ABSOLUTELY NO WARRANTY.
For details type `warranty'. a = 5
b = 4
c = a * b
c
20
quit 
```

However, **here is what I get** on Linux (Ubuntu 12.04), it omits everything that was typed into STDIN and only captures STDOUT. Here is the content of sysout and OUTPUT_FILE

```
bc 1.06.95
Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006 Free Software Foundation, Inc.
This is free software with ABSOLUTELY NO WARRANTY.
For details type `warranty'. 
20 
```

As you can see, the lines `a = 4, b = 5, etc` are missing.

When I run the `script` command manually on Linux from the command line prompt (`script -q -f -c bc output.txt}` and enter the lines one by one, it works, i.e., all the lines are also written to OUTPUT_FILE.

What additional steps do I need to do to get my program to work on Linux? I know that the program works on OS X so it is unlikely to be a problem with the program (or Groovy). I suspect that it must be something with how the Linux version of script behaves when launched as an external process.

Any pointers would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:13:01.490

我不确定为什么会在 Ubuntu 而不是 OS X 上发生这种情况，但 Ubuntu 上的一种可能的解决方法可能是用您自己的类装饰编写器，该类将写入的字符附加到 StringBuffer。

它不是*很*漂亮，因为您必须添加特定于操作系统的代码以确保输出不会在 OS X 上包含两次。

无论如何，这是带有装饰器类的完整脚本，它在使用 Groovy 2.0.5 的 Ubuntu 12.04 上对我来说很好。

```
import groovy.io.GroovyPrintWriter

def OUTPUT_FILE = "output.txt"

def sysout = new StringBuffer()
def syserr = new StringBuffer()

// On Linux (Ubuntu 12.04) - starts the bc command with script and capture session to OUTPUT_FILE
Process proc = "script -q -f -c bc ${OUTPUT_FILE}".execute()
// On OS X with a slightly different version of Script
// Process proc = "script -q ${OUTPUT_FILE} bc".execute()

proc.consumeProcessOutput(sysout, syserr) // Spawns separate threads that will consume the out to prevent overflow

proc.withWriter { writer ->
    // Writes the following commands to the spawned process
    def gWriter = new GroovyPrintWriter(new MyCaptureWriter(writer, sysout))
    // Imagine that the user enters these lines
    gWriter.println "a = 5"
    gWriter.println "b = 4"
    gWriter.println "c = a * b"
    gWriter.println "c"
    gWriter.println "quit"
}

proc.waitForOrKill(20000) // Give it 20 seconds to complete or kill the process

println 'Standard out captured from process:\n' + sysout
println 'Standard err captured from process:\n' + syserr

class MyCaptureWriter extends Writer {

    @Delegate OutputStreamWriter writer
    def sysout

    MyCaptureWriter(writer, sysout) {
        this.writer = writer
        this.sysout = sysout
    }

    @Override
    void write(char[] cbuf, int off, int len) throws IOException {
        sysout.append(cbuf, off, len)
        writer.write(cbuf, off, len)
    }
} 
```

# vb.net - 查询后我得到一个空白的水晶报表

> ID：14554627
> 
> 赞同：0
> 
> 时间：2013-01-28T02:28:03.493
> 
> 标签：vb.net, crystal-reports

我正在使用以下代码动态创建报告：

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

        Dim mycon As New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;" & _
                    "Data Source=" + My.Application.Info.DirectoryPath + "\mswd-rms.mdb")
        Dim mycomm As New OleDbCommand("SELECT * FROM tbl_day_care", mycon)
        Dim da As New OleDbDataAdapter()
        da.SelectCommand = mycomm
        Dim ds As New DataSet()
        da.Fill(ds, "tbl_day_care")

        Dim rpt As New CrystalReport1() 'The report you created. 

        rpt.SetDataSource(ds)
        frmViewReport.CrystalReportViewer1.ReportSource = rpt
        frmViewReport.Show()
    End Sub 
```

但是当报告加载时，报告是空白的。我从中获取记录的表不是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T03:39:40.200

只需按照以下步骤操作，希望对您有所帮助:)

链接：http: [//vb.net-informations.com/crystal-report/vb.net_crystal_report_step_by_step.htm](http://vb.net-informations.com/crystal-report/vb.net_crystal_report_step_by_step.htm)

# pascal - Pascal beginner program

> ID：14554628
> 
> 赞同：1
> 
> 时间：2013-01-28T02:28:14.170
> 
> 标签：pascal, freepascal

```
Program q2;

Var input: integer ;
Var repeatvar: char ;

Procedure display(input : integer) ;

Begin
If (input = 9) then 
  Write ('********************************************************') ;
  Write ('9! = 9 x 8 x 7 x 6 x 5 x 4 x 3 x 2 x 1 = 362880 ');
  Write ('********************************************************') ;    
If (input = 8) then
  Write ('********************************************************') ;
  Write ('8! = 8 x 7 x 6 x 5 x 4 x 3 x 2 x 1 = 40320 ');
  Write ('********************************************************') ;
If (input = 7) then
  Write ('********************************************************') ;
  Write ('7! = 7 x 6 x 5 x 4 x 3 x 2 x 1 = 5040 ');
  Write ('********************************************************') ;
If (input = 6) then
  Write ('********************************************************') ;
  Write ('6! = 6 x 5 x 4 x 3 x 2 x 1 = 720 ');
  Write ('********************************************************') ;
If (input = 5) then
  Write ('********************************************************') ;
  Write ('5! = 5 x 4 x 3 x 2 x 1 = 120 ');
  Write ('********************************************************') ;
If (input = 4) then
  Write ('********************************************************') ;
  Write ('4! = 4 x 3 x 2 x 1 = 24 ');
  Write ('********************************************************') ;
If (input = 3) then
  Write ('********************************************************') ;
  Write ('3! = 3 x 2 x 1 = 6 ');
  Write ('********************************************************') ;
If (input = 2) then
  Write ('********************************************************') ;
  Write ('2! = 2 x 1 = 2 ');
  Write ('********************************************************') ;
If (input = 1) then
  Write ('********************************************************') ;
  Write ('1! = 1 = 1 ');
  Write ('********************************************************') ;
If (input = 0) then
  Write ('********************************************************') ;
  Write ('0! = 1 = 1 ');
  Write ('********************************************************') ;

End ;

Begin

While (repeatvar = 'y') do
Begin
Write('Enter an integer between 0 and 9 or -1 to quit');
readln(input);

If (input = -1) then
  begin
  Write('Sentinel value - Exiting program !'); 
  Readln;
  end
Else
  display(input);

End 

End. 
```

This is the warning I get after compiling it .

```
Free Pascal Compiler version 2.4.0 [2010/05/18] for x86_64
Copyright (c) 1993-2009 by Florian Klaempfl
Target OS: Linux for x86-64
Compiling q2.pas
q2.pas(61,8) Warning: Variable "repeatvar" does not seem to be initialized
Linking q2
/usr/bin/ld: warning: link.res contains output sections; did you forget -T?
78 lines compiled, 0.2 sec
1 warning(s) issued 
```

I am typing in q2 but cannot see any output , it's not doing anything. I have tried a number of things , also I am totally new to Pascal , and fpc . Can anyone tell me what's the problem ?

In the part of the repeatvar , i wanted to implement this :

i wanted to implement this c++ code :

```
do
{
    cout << "Enter an integer between 0 and 9 or -1 to quit => " ;
    cin >> input ; // get number 
    if(input == -1)
    {
        cout << "Sentinel value - Exiting program !" << endl;
        exit ;
        system("pause");
        return 0;
    }
    else
    {

    // display function
    display(input) ;
    }

    cout << endl;
    cout << " Press y to repeat , any other key and enter to terminate: " ;
    cin >> repeat ;
    if(repeat != 'y')
        exit;

}while( repeat == 'y'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T02:34:19.247

因为repeatvar 永远不会被初始化，所以你的程序永远不会进入while 循环，因为repeatvar 不可能从'y' 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T05:56:38.600

你忘了初始化变量

```
repeatvar := 'y' 
```

在行之前插入上面的行

```
While (repeatvar = 'y') do 
Begin

...

End 
```

# c++ - Choosing network interface by app

> ID：14554630
> 
> 赞同：1
> 
> 时间：2013-01-28T02:28:37.400
> 
> 标签：c++, c, tcp, ip, nat

I'm a C/C++/Qt dev, and today, I have a particular need and I'm sure I'm not the only one. I need to choose with which network interface my computer app will connect to...

For example, I'm home, using a VPN to access some protected stuff (like a VPN used by my company). And I know I can't use the VPN to browse the Internet. I would like to be able to tell my FTP Client to connect to the VPN interface and my browser, to the classic interface (VPN may be a bad example, but the idea is there.)

As almost none of classical app one have on his computer, let the user choose which IP to, I would like to dev something which can do this for me and everybody who can need it, but I simply don't know where to begin. I know I'll have to hack, maybe intercept and relay the connection (Firewall like, or more NAT like), or maybe I can close and reopen the connection for the app (and STOP/CONT it to avoid it to notice, or anything else.

If you have any idea of how and where I can begin my research, it would be helpful. Thank you for your help.

# google-maps - How to Refresh Googlemap when Fusiontable updated?

> ID：14554637
> 
> 赞同：0
> 
> 时间：2013-01-28T02:29:12.757
> 
> 标签：google-maps, caching, google-fusion-tables

I'm using fusiontable on googlemap and I have some problem that I can't see updated marks on googlemap even though I updated fusiontable data.

i have tried following.

```
layer.setOptions({

  query: {

    select: 'latitude',

    from: 'tableId'

  }

}); 
```

I have tried all kind of browser and it does not work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:48:06.270

这是一个已知问题，切片将缓存在服务器端和客户端。

常见的解决方法是创建一个不影响结果的随机 where 子句，因为它总是评估为真。

例子：

```
query: {
          select: "latitude",
          from: "TableId",
          where: "latitude NOT EQUAL TO '"+new Date().getTime()+"'"
        } 
```

（假设`latitude`是一个位置列，其值永远不能是
返回的整数`new Date().getTime()`）

这种方法的缺点是您完全禁用缓存，这可能会损害您的应用程序的性能。

更好的解决方案是将上次修改的时间戳存储在服务器端并将其应用于 where 子句而不是 JS 生成的时间戳。

# jenkins - Jenkins Process 中的 ios-sim 泄露了文件描述符

> ID：14554641
> 
> 赞同：0
> 
> 时间：2013-01-28T02:29:35.847
> 
> 标签：jenkins, ios-simulator

尝试使用 shell 启动 ios-sim 时，我在 Jenkins 中得到一个文件泄漏描述符。我应该提到的是，我将 Jenkins 的用户从最初安装的“/Users/Shared/Jenkins”位置更改为我的用户。这是消息

> *   ./ios-sim launch /Users/me/Desktop/tmp/iOS.app --sdk 6.0 --family iphone 处理泄露的文件描述符。有关更多信息，请参见[http://wiki.jenkins-ci.org/display/JENKINS/Spawning+processes+from+build](http://wiki.jenkins-ci.org/display/JENKINS/Spawning+processes+from+build)

该链接指出，这可能是由于无法检测到 EOF。如果是这样，如何让詹金斯写信给“stdin/stdout/stderr”？

当我将“/User/Shared/Jenkins/Home”位置移动到 /Users/me/Jenkins/Home 和“/Applications/Jenkins/jenkins.war”文件时，我可能会错过一些文件到“/User/me/Applications/jenkins.war”？

除了这些动作之外，我还更新了 org.jenkins-ci.plist 如下：

```
 <plist version="1.0">
<dict>
<key>StandardOutPath</key>
<string>/var/log/jenkins/jenkins.log</string>
<key>StandardErrorPath</key>
<string>/var/log/jenkins/jenkins.log</string>
    <key>EnvironmentVariables</key>
    <dict>
            <key>JENKINS_HOME</key>
            <string>/Users/me/Jenkins/Home</string>
    </dict>
    <key>GroupName</key>
    <string>staff</string>
    <key>KeepAlive</key>
    <true/>
    <key>Label</key>
    <string>org.jenkins-ci</string>
    <key>ProgramArguments</key>
    <array>
            <string>/bin/bash</string>
            <string>/Library/Application Support/Jenkins/jenkins-runner.sh</string>
    </array>
    <key>RunAtLoad</key>
    <true/>
    <key>UserName</key>
    <string>me</string>
    <key>SessionCreate</key>
    <true />
</dict>
</plist> 
```

我正在使用 Jenkins 版本 1.499

这是 jenkins.log 错误：

```
WARNING: Process leaked file descriptors. See http://wiki.jenkins-ci.org/display/JENKINS/Spawning+processes+from+build for more information
java.lang.Exception
at hudson.Proc$LocalProc.join(Proc.java:329)
at hudson.Launcher$ProcStarter.join(Launcher.java:360)
at hudson.tasks.CommandInterpreter.perform(CommandInterpreter.java:91)
at hudson.tasks.CommandInterpreter.perform(CommandInterpreter.java:60)
at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:19)
at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:810)
at hudson.model.Build$BuildExecution.build(Build.java:199)
at hudson.model.Build$BuildExecution.doRun(Build.java:160)
at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:592)
at hudson.model.Run.execute(Run.java:1543)
at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
at hudson.model.ResourceController.execute(ResourceController.java:88)
at hudson.model.Executor.run(Executor.java:236) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:55:30.390

“膜中的疯狂”为什么到处都宣传停止启动和停止詹金斯使用：

```
sudo launchctl unload /Library/LaunchDaemons/org.jenkins-ci.plist
sudo launchctl load /Library/LaunchDaemons/org.jenkins-ci.plist 
```

？？？谁想编辑 jenkins-runner.sh 或将值添加到 .plist 文件？？？？嘘

秘密是在“/Users/me/.jenkins”位置安装时创建的秘密用户 jenkins。

您需要拥有所有进程，为此只需找到 j​​enkins.war 文件并像这样启动它：

```
nohup java -jar ~/.jenkins/jenkins.war --httpPort=8080 
```

突然间，一切都开始在您公司机器上的用户下运行！

请享用

# string - 如何计算字符串中的两个字符？

> ID：14554643
> 
> 赞同：0
> 
> 时间：2013-01-28T02:29:37.097
> 
> 标签：string, character, counting

共有三个参数（String s、char c、char d）

如何定义一个方法，使其以 int 形式返回，即 char c 在 String s 中出现的次数加上 char d 在 String s 中出现的次数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T02:50:44.540

根据语言的不同，可能已经有一个现有的函数可以为您执行此操作。

否则，您需要将字符串视为数组（如果语言这样做，那就太好了。如果没有，那么您需要将其转换为数组），运行循环并使用计数器。如果要查找特定字符，可以将其与字符串/数组一起传递给函数）。

示例（这只是伪代码，因为我不知道您使用的是什么语言）：

```
function countCharsInString(string s, char c1, char c2)
{
 int count = 0;

 for(i = 0; i < s.Length; i++)
 {
   if(s[i] == c1 || s[i] == c2)
   {
    count++;
   }
 }
 return count;
} 
```

# c# - GetConsumingEnumerable() Producer-Consumer 的多线程 BlockingCollection 替代方案

> ID：14554652
> 
> 赞同：2
> 
> 时间：2013-01-28T02:30:55.470
> 
> 标签：c#, multithreading, wait, producer-consumer, blockingcollection

我有一个情况，我有多个生产者和多个消费者。生产者将作业输入队列。我选择了 BlockingCollection，它的效果很好，因为我需要消费者等待找到工作。但是，如果我使用 GetConsumingEnumerable() 功能，集合中项目的顺序会发生变化......这不是我需要的。

它甚至在 MSDN [http://msdn.microsoft.com/en-us/library/dd287186.aspx](http://msdn.microsoft.com/en-us/library/dd287186.aspx) 中说它不保留项目的顺序。

有谁知道这种情况的替代方案？

我看到 Take 方法可用，但它是否也为消费者线程提供了“等待”条件？

它说[http://msdn.microsoft.com/en-us/library/dd287085.aspx](http://msdn.microsoft.com/en-us/library/dd287085.aspx)

“对 Take 的调用可能会阻塞，直到可以删除某个项目。” 使用 TryTake 会更好吗？**我真的需要线程等待并继续检查工作。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T02:58:59.367

Take 阻塞线程直到有东西可用。

TryTake 顾名思义会尝试这样做，但如果失败或成功则返回一个布尔值。允许更多的弹性使用它：

```
while(goingOn){
   if( q.TryTake(out var){
      Process(var)
   }
   else{
      DoSomething_Usefull_OrNotUseFull_OrEvenSleep();
   }
} 
```

代替

```
while(goingOn){
   if( var x = q.Take(){
      //w'll wait till this ever will happen and then we:
      Process(var)
   }
} 
```

我的票是 TryTake :-)

例子：

```
 public class ProducerConsumer<T> {

        public struct Message {
            public T Data;
        }

        private readonly ThreadRunner _producer;
        private readonly ThreadRunner _consumer;

        public ProducerConsumer(Func<T> produce, Action<T> consume) {
            var q = new BlockingCollection<Message>();
            _producer = new Producer(produce,q);
            _consumer = new Consumer(consume,q);
        }

        public void Start() {
            _producer.Run();
            _consumer.Run();
        }

        public void Stop() {
            _producer.Stop();
            _consumer.Stop();
        }

        private class Producer : ThreadRunner {

            public Producer(Func<T> produce, BlockingCollection<Message> q) : base(q) {
                _produce = produce;
            }

            private readonly Func<T> _produce;

            public override void Worker() {
                try {
                    while (KeepRunning) {
                        var item = _produce();
                        MessageQ.TryAdd(new Message{Data = item});
                    }
                }
                catch (ThreadInterruptedException) {
                    WasInterrupted = true;
                }
            }
        }

        public abstract class ThreadRunner {

            protected readonly BlockingCollection<Message> MessageQ;

            protected ThreadRunner(BlockingCollection<Message> q) {
                MessageQ = q;
            }

            protected Thread Runner;
            protected bool KeepRunning = true;

            public bool WasInterrupted;

            public abstract void Worker();

            public void Run() {
                Runner = new Thread(Worker);
                Runner.Start();
            }

            public void Stop() {
                KeepRunning = false;
                Runner.Interrupt();
                Runner.Join();
            }

        }

        class Consumer : ThreadRunner {

            private readonly Action<T> _consume;

            public Consumer(Action<T> consume,BlockingCollection<Message> q) : base(q) {
                _consume = consume;
            }

            public override void Worker() {
                try {
                    while (KeepRunning) {
                        Message message;
                        if (MessageQ.TryTake(out message, TimeSpan.FromMilliseconds(100))) {
                            _consume(message.Data);
                        }
                        else {
                            //There's nothing in the Q so I have some spare time...
                            //Excellent moment to update my statisics or update some history to logfiles
                            //for now we sleep:
                            Thread.Sleep(TimeSpan.FromMilliseconds(100));
                        }
                    }
                }
                catch (ThreadInterruptedException) {
                    WasInterrupted = true;
                }
            }
        }
    }

} 
```

用法：

```
[Fact]
public void ConsumerShouldConsume() {

    var produced = 0;
    var consumed = 0;

    Func<int> produce = () => {
        Thread.Sleep(TimeSpan.FromMilliseconds(100));
        produced++;
        return new Random(2).Next(1000);
    };

    Action<int> consume = c => { consumed++; };

    var t = new ProducerConsumer<int>(produce, consume);
    t.Start();
    Thread.Sleep(TimeSpan.FromSeconds(5));
    t.Stop();

    Assert.InRange(produced,40,60);
    Assert.InRange(consumed, 40, 60);

} 
```

# c - 使用 enif_resource_alloc 正确释放分配的内存

> ID：14554658
> 
> 赞同：1
> 
> 时间：2013-01-28T02:31:16.510
> 
> 标签：c, erlang, alloc

我写了一个 Erlang C NIF，它在调用 new 后返回一个指向结构的指针，现在只在插入时增加一个变量。我想知道如何正确销毁原始资源，或者至少将其标记为 GC。我没有运气。

```
#include <stdio.h> 
#include "erl_nif.h"

typedef struct level {
    float a;
    float b;
} LVL;

// data array with key being the price
typedef struct book {
    int array_size; // # of TTL indices
    int len; // # of Occupied indices (inc. val) from bestPriceIndex
    int max_len; 

    LVL lvl_data[];

} Book;

static ErlNifResourceType *MEM_RESOURCE;

    static int
on_load(ErlNifEnv *env, void **priv_data, ERL_NIF_TERM load_info)
{
    ErlNifResourceFlags flags = (ErlNifResourceFlags)(ERL_NIF_RT_CREATE);

    if ( (MEM_RESOURCE = enif_open_resource_type(env, 
            NULL,
            "mem_resource", 
            NULL, //dtor
            flags, 
            NULL)) == NULL)
        return -1;

    return 0;
}

    static ERL_NIF_TERM 
new( ErlNifEnv* env, int argc, const ERL_NIF_TERM argv[] ) 
{   
    int max_len = 50;

    int mem_size = sizeof(Book) + max_len * sizeof(LVL);
    Book *q = enif_alloc_resource(MEM_RESOURCE, mem_size );
        if( q == NULL ) return enif_make_string(env, "could not alloc", ERL_NIF_LATIN1);

    q->lvl_data[0].a = 7.0;     

    ERL_NIF_TERM term = enif_make_resource(env, q);

    enif_release_resource(q);

    return term;
};

    static ERL_NIF_TERM 
insert( ErlNifEnv* env, int argc, const ERL_NIF_TERM argv[] ) 
{
    Book *p;
    if (!enif_get_resource(env, argv[0], MEM_RESOURCE, (void **)&p)) 
       return enif_make_badarg(env); 

    float x = ++p->lvl_data[0].a;

    return enif_make_string(env, "okk", ERL_NIF_LATIN1);
};

static ErlNifFunc nif_funcs[] = 
{ 
    {"new", 0, new},
    {"insert", 1, insert}
};

ERL_NIF_INIT( test, nif_funcs, on_load, NULL, NULL, NULL ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T07:12:55.540

当没有terms持有该资源时，GC会*自动收集该资源。*

# twitter-bootstrap - Twitter Bootstrap - 我需要下载哪些文件？

> ID：14554659
> 
> 赞同：0
> 
> 时间：2013-01-28T02:31:20.653
> 
> 标签：twitter-bootstrap

我是 Twitter Bootstrap 的新手。我正在尝试从这里重建“入门”网站以了解一切如何运作：http: [//twitter.github.com/bootstrap/getting-started.html](http://twitter.github.com/bootstrap/getting-started.html)

我下载了 Bootstrap 包，但是缺少标题图像，并且左侧的导航不固定。（它与其余部分一起滚动）

我需要下载什么 - 是否缺少 .JS 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:41:39.557

zip 文件包含您开始所需的一切。有关更多详细信息，您可以克隆 git，并检查示例文件夹。指南中列出的每个功能都有几个 .js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T02:36:43.333

查看网站使用哪些文件的一个好方法是使用 Chrome Inspector。使用菜单 > 工具 > 开发人员工具在网页上打开它。单击“资源”选项卡以查看网页使用的文件。请注意，并非所有网页都是静态文件。有些是动态生成的。

如果您想访问整个站点的源代码，请访问[https://github.com/twitter/bootstrap/tree/gh-pages](https://github.com/twitter/bootstrap/tree/gh-pages)

# java - SqlRowSet 不能识别列名别名吗？

> ID：14554664
> 
> 赞同：1
> 
> 时间：2013-01-28T02:31:59.483
> 
> 标签：java, spring, jdbctemplate

我刚刚从使用普通旧连接切换到 JdbcTemplate，当我运行我的应用程序时，我收到了这个：

```
org.springframework.jdbc.InvalidResultSetAccessException: Invalid column name; nested exception is java.sql.SQLException: Invalid column name 
```

我发现当您使用它的 getXXX 方法时，SqlRowSet 无法识别列名别名。有没有办法使用 SqlRowSet 解决这个问题？还是我只需要使用这些列的完整列名或索引？

提前致谢，

ktm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:40:54.537

我不确定 SqlRowSet，但如果您**不需要**断开连接的 ResultSet (SqlRowSet)，另一种选择是使用以 RowMapper 作为参数的查询方法之一。RowMapper 将获得一个 ResultSet，它应该支持别名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T02:47:52.627

在类 ResultSetWrappingSqlRowSet 源中，

```
public class ResultSetWrappingSqlRowSet implements SqlRowSet 
```

像 getXXX 这样的包装方法使用字段“标签”而不是字段名称。

```
public int getInt(String columnLabel) throws InvalidResultSetAccessException {
    return getInt(findColumn(columnLabel));
}

public int findColumn(String columnLabel) throws InvalidResultSetAccessException {
    Integer columnIndex = this.columnLabelMap.get(columnLabel);
    if (columnIndex != null) {
        return columnIndex;
    }
    else {
        try {
            return this.resultSet.findColumn(columnLabel);
        }
        catch (SQLException se) {
            throw new InvalidResultSetAccessException(se);
        }
    }
} 
```

[ResultSetMetaData#g​​etColumnLabel(int)](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSetMetaData.html#getColumnLabel%28int%29)文档链接。

```
public ResultSetWrappingSqlRowSet(ResultSet resultSet) throws InvalidResultSetAccessException {
    this.resultSet = resultSet;
    try {
        this.rowSetMetaData = new ResultSetWrappingSqlRowSetMetaData(resultSet.getMetaData());
    }
    catch (SQLException se) {
        throw new InvalidResultSetAccessException(se);
    }
    try {
        ResultSetMetaData rsmd = resultSet.getMetaData();
        if (rsmd != null) {
            int columnCount = rsmd.getColumnCount();
            this.columnLabelMap = new HashMap<String, Integer>(columnCount);
            for (int i = 1; i <= columnCount; i++) {
                this.columnLabelMap.put(rsmd.getColumnLabel(i), i);
            }
        }
        else {
            this.columnLabelMap = Collections.emptyMap();
        }
    }
    catch (SQLException se) {
        throw new InvalidResultSetAccessException(se);
    }

} 
```

所以你需要检查你的 sql 和数据库配置（支持从 sql 获取数据库元数据）。

# android - Android - 如何像在 getView 中一样在 bindView 中获得位置？

> ID：14554667
> 
> 赞同：19
> 
> 时间：2013-01-28T02:32:10.510
> 
> 标签：android, android-cursor, android-cursoradapter

在`getView()`中`CursorAdapter`，有一个参数`position`，所以我可以做一个检查，`position`我怎么能对它做同样的`bindView()`事情，没有`position`参数`BindView`。

目前我正在覆盖`newView()`，`bindView()`而`getView()`我阅读和听到的内容很糟糕，要么覆盖**`getView()`**OR**`newView()`和`getView()`**.

谢谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-28T05:38:21.400

试试这个

```
public void bindView(View arg0, Context arg1, Cursor arg2)
{
    int pos = arg2.getPosition();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-22T12:30:34.443

codeboys 的回答是正确的，cursor.getPosition() 就可以了。但是如果有人需要在 listitems 子项的 onClick 事件中定位，例如 listItem 内的图标，解决方案是在图标上放置一个位置作为 setTag 并在事件发生时检索它：

```
@Override
public void bindView(View vw, Context ctx, final Cursor cursor) {
    /* ...
    *  do your binding 
    */
    ImageView icon = (ImageView) vw.findViewById(R.id.your_icon);
    icon.setTag(cursor.getPosition());   // here you set position on a tag
    icon.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            //  use a tag to get the right position 
            ((MainActivity) context).onIconClick((int)v.getTag());
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T07:29:58.653

```
@Override
public void bindView(View view, Context context, Cursor cursor) {
    // TODO Auto-generated method stub

}

@Override
public View newView(Context context, Cursor cursor, ViewGroup view) {
    // TODO Auto-generated method stub
    int mCount = cursor.getCount();
    //Returns Total count(Rows) in cursor

     int currentPostion= cursor.getPosition();
    //Returns the current position of the cursor in the row set
} 
```

# c# - 如何从 FileSystemWatcher 事件中处理事件侦听器

> ID：14554668
> 
> 赞同：2
> 
> 时间：2013-01-28T02:32:24.093
> 
> 标签：c#, filesystemwatcher

使用 FileSystemWatcher，有没有办法在事件触发后处理事件侦听器的实例？

我的程序基本上会在新创建的文件夹中监听 batch.complete.xml 文件的创建。一旦程序检测到文件已创建，则无需继续在此文件夹中侦听。

我的程序如下所示：

```
public static void watchxmlfile(batchfolderpath){

 var deliverycompletewatcher = new FileSystemWatcher();    

 deliverycompletewatcher.Path = batchfolderpath;

 deliverycompletewatcher.Filter = "*.xml";

 deliverycompletewatcher.Created += new FileSystemEventHandler(OnChanged);

 deliverycompletewatcher.EnableRaisingEvents = true;

}

private static void OnChanged(object sender, FileSystemEventArgs e)
{
    BuildingestionXml(string.Format(@"{0}\{1}",e.FullPath,e.Name));
    Console.WriteLine(@"Second: Success sending{0}\{1}", e.FullPath, e.Name);
} 
```

因此，当上述事件被触发时，我不再需要监视“batchfolderpath”中的事件，除非显式调用 watchxmlfile()，它将有一个新路径。

我试图防止上述事件的太多侦听器实例导致内存泄漏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T02:37:56.163

在您`EventHandler`中，您可以取消分配事件，但是您必须将其声明`FileSystemWatcher`为变量。

例子

```
 private static FileSystemWatcher deliverycompletewatcher;

    public static void watchxmlfile(string batchfolderpath)
    {
        deliverycompletewatcher = new FileSystemWatcher();
        deliverycompletewatcher.Path = batchfolderpath;
        deliverycompletewatcher.Filter = "*.xml";
        deliverycompletewatcher.Created += OnChanged;
        deliverycompletewatcher.EnableRaisingEvents = true;
    }

    private static void OnChanged(object sender, FileSystemEventArgs e)
    {
        deliverycompletewatcher.EnableRaisingEvents = false;
        deliverycompletewatcher.Created -= OnChanged;

        // Do some cool stuff
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T02:49:25.347

您不需要分配变量，`sender`是 FileSystemWatcher：

```
private static void OnChanged(object sender, FileSystemEventArgs e)
{
    BuildingestionXml(string.Format(@"{0}\{1}",e.FullPath,e.Name));
    Console.WriteLine(@"Second: Success sending{0}\{1}", e.FullPath, e.Name);
    ((FileSystemWatcher)sender).Dispose();
} 
```

# time - 时间复杂度 O?

> ID：14554670
> 
> 赞同：-1
> 
> 时间：2013-01-28T02:32:42.687
> 
> 标签：time, complexity-theory

当输入的大小增加时间减少时，时间复杂度是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T02:36:17.583

无论时间的限制是什么，随着大小接近无穷大；它是“足够大”输入的上限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T03:02:18.620

这取决于时间减少的速度。例如，如果将输入大小加倍会使运行时间减半，则运行时间将为`O(1/n)`.

基本上这与增加输入大小也会增加运行时间的通常情况没有任何不同。

当然，这只是理论上的，因为在实践中，没有一种算法的运行时间会随着输入大小接近无穷大而不断减少。

# php - 组合数组但保留键？

> ID：14554674
> 
> 赞同：2
> 
> 时间：2013-01-28T02:33:05.550
> 
> 标签：php, arrays

我正在尝试组合两个数组，但将它们的键保持在适当的位置。

例如，我的 $artist_ids 数组如下：

```
Array
(
    [1] => Array
    (
        [artist_id] => 12291
        [artist_name] => Maroon 5
    )
) 
```

我有我的 $song_ids 数组：

```
Array
(
[0] => Array
    (
        [id] => 113064
        [title] => Harder To Breathe
        [artist_id] => 12291
        [artist_name] => Maroon 5
    )

[2] => Array
    (
        [id] => 113065
        [title] => This Love
        [artist_id] => 12291
        [artist_name] => Maroon 5
    )

[3] => Array
    (
        [id] => 113066
        [title] => Shiver
        [artist_id] => 12291
        [artist_name] => Maroon 5
    )
} 
```

现在，如果我使用 array_merge($artist_ids, $song_ids)，看起来它会创建一个新数组并将 $song_ids 添加到我的 $artist_ids 的底部；完全无视键 - $artist_ids[1] 突然变为 [0] ，其余部分紧随其后。

我可以使用什么来固定钥匙？我希望我的输出看起来像：

```
Array
(
[0] => Array
    (
        [id] => 113064
        [title] => Harder To Breathe
        [artist_id] => 12291
        [artist_name] => Maroon 5
    )
[1] => Array
    (
        [artist_id] => 12291
        [artist_name] => Maroon 5
    )

[2] => Array
    (
        [id] => 113065
        [title] => This Love
        [artist_id] => 12291
        [artist_name] => Maroon 5
    )

[3] => Array
    (
        [id] => 113066
        [title] => Shiver
        [artist_id] => 12291
        [artist_name] => Maroon 5
    )
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T02:38:18.950

只需使用重载`+`来合并数组：

```
$new_array = $artist_ids + $song_ids; 
```

在此处查看实际操作：[http ://codepad.viper-7.com/1bJAfH](http://codepad.viper-7.com/1bJAfH)

# ruby-on-rails - 使用脚手架生成器时，如何自定义 Rails 中生成的模型内容？

> ID：14554676
> 
> 赞同：1
> 
> 时间：2013-01-28T02:33:11.390
> 
> 标签：ruby-on-rails, templates, generator

*   使用的命令

    rails 生成脚手架学生名字：字符串姓氏：字符串

生成的模型代码是

```
class Student < ActiveRecord::Base
  attr_accessible :firstname, :lastname
end 
```

==================================================== ===============================

生成脚手架或模型时，我的所有模型都应具有以下内容

```
class Student < ActiveRecord::Base
  resourcify
  acts_as_tenant(:tenant)
  attr_accessible :firstname, :lastname
end 
```

因此，当我使用生成器生成模型时，resourcecify 和acts_as_tenant 等行已经存在于生成的模型中，我不需要将它们手动包含在模型中。

有人可以指导我如何实现同样的目标吗？

问候，
Dkat。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T02:52:15.920

脚手架是不可能的

您可以为 gsub 创建 rake 任务或 shell 脚本

```
attr_accessible :firstname, :lastname 
```

至

```
resourcify
acts_as_tenant(:tenant)
attr_accessible :firstname, :lastname 
```

在所有模型的文件中

就[这里](https://github.com/m-ryan/magic_encoding)发生的情况而言，当您需要添加`#encoding: utf-8`到所有文件时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:56:13.473

在终端rails中运行以下命令后生成脚手架学生名字：字符串姓氏：字符串

转到 db 目录中的迁移文件。编辑该文件..这可能会解决您的问题..

# php - 如何在具有不同字段名称的一行中插入多个数组复选框值

> ID：14554682
> 
> 赞同：0
> 
> 时间：2013-01-28T02:34:16.093
> 
> 标签：php, javascript

我将使用我以前发布的代码，因为我正在开发同一个程序。我想要的是如何才能将所有选定的值保存在一行中，用户的学生 ID 不会重复。请帮助...

```
 <?php session_start(); ?>
     <?php
     //server info
      $server = 'localhost';
     $user = 'root';
     $pass = 'root';
    $db = 'user';

        // connect to the database
      $mysqli = new mysqli($server, $user, $pass, $db);

      // show errors (remove this line if on a live site)
           mysqli_report(MYSQLI_REPORT_ERROR);
       ?>
      <?php
     $_SESSION['username'];
     $voter = $_SESSION['username'];
    echo 'Student ID: '. $voter.'';
     echo "<br />";
       if ($_POST['representatives']){
     $check = $_POST['representatives'];
     foreach ($check as $ch){
      global $voter;
      $mysqli->query("INSERT INTO sample (studentid, candidate1) VALUES ('".$voter."', '". $ch ."')");
        echo  $ch. "<br>";
        }
        }
       ?>
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
  <html>
 <head>  
    <script type="text/javascript">
    <!--
function get_representatives_value()
 {
  for (var i=0; i < document.list.representatives.length; i++)

  {
 if (document.list.representatives[i].checked)
 {
 return document.getElementById('candidates').innerHTML = document.list.representatives[i].value

 }
 }
 }

 //-->
</script>
title></title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link href="candidate.css" rel="stylesheet" type="text/css">
</head>
<body> <p id="txt"></p>
<form name="list" action="president2.php" method="post" onSubmit="return get_representatives_value()">
<div id="form"> 
 <?php
// get the records from the database
 if ($result = $mysqli->query("SELECT * FROM candidate_info WHERE position= 'representatives' AND department ='CCEITE' ORDER BY cand_id"))
    {
  // display records if there are records to display
    if ($result->num_rows > 0)
      {
       // display records in a table
    echo "<table border='1' cellpadding='10'>";

     // set table headers
     echo "<tr><th>Student ID</th><th>Candidate ID</td><th>Course</th><th colspan = '3'>Name</th></tr>";

    while ($row = $result->fetch_object())
              {
     // set up a row for each record
    echo "<tr>";
    echo "<td>" . $row->cand_studid . "</td>";
   echo "<td>".$row->cand_id."</td>";
  echo "<td>" . $row->course . "</td>";
  echo "<td coslpan ='5'>" . $row->fname . " ". $row->mname ." ". $row->lname ." </td>";
 echo "<td><input type ='checkbox' name='representatives[]' id='". $row->cand_studid ."' value='" . $row->cand_studid . "' onchange='get_representatives_value()' /></td>";
  echo "</tr>";
                                }
 echo "</table>";
                        }
     // if there are no records in the database, display an alert message
                        else
                        {
      echo "No results to display!";
                        }
                }
       // show an error if there is an issue with the database query
        else
                {
             echo "Error: " . $mysqli->error;
                }

       // close database connection
       $mysqli->close();

echo "<input type='submit' name='representatives  value='Submit' />";

   ?> 
  </div>
 </form>
 <table>
 <tr><td>Preview List</td></tr>
 <tr><td>Candidates: </td><td id="candidates"> </td></tr>
  </table>
  </body>
 </html> 
```

这是我的输出和选中复选框的预览

![在此处输入图像描述](../Images/b04e8c859b09e37bc06ec9fbb886127f.png)

现在这是我的数据库的预览。这是我从上面的预览中选择的结果，我的桌子上重复了学生 ID。

![在此处输入图像描述](../Images/6aa4f002b5943b0d780bf79741cd46ec.png)

我想要的是这样保存

![在此处输入图像描述](../Images/7c9a2964cb1f7dd846534f964d64b60f.png)

还有一件事，我如何预览我在复选框上选择的所有内容，这是我的预览输出，表格下方是用户单击复选框时的候选预览列表。但它只返回一个且仅返回最后一个选择的值，因为选择多个复选框将被打印。我怎么能在数组中应用这个方法，因为这个预览，我删除了输入类型 name='representative' 上的 '[]' 并且它可以工作，但在存在 '[]' 的情况下不行。

![在此处输入图像描述](../Images/bcfe96cae1b1b31b71af2269c9d00082.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:57:38.847

我不知道我是否正确阅读了您的问题，但是...

**对于您的插入问题**

我不知道你在数据库中存储数据的方式是否是最好的方法，但如果你想使用你所拥有的，你可以像这样插入你的记录（假设你已经放入了一些验证脚本防止用户选择超过 2 个候选人）：

```
<?php
$_SESSION['username'];
$voter = $_SESSION['username'];
if ($_POST['representatives']){
 $check = $_POST['representatives'];
 $mysqli->query("INSERT INTO sample (studentid, candidate1, candidate2) VALUES ('". $voter ."', '". $check[0] ."', '". $check[1] ."')");
 }
}
?> 
```

**对于您的 Preivew 问题：**

我假设你想要这样的东西来预览你的学生ID，以显示候选人1和候选人2的选择：

```
<h3>Preview List</h3>
<table>
<tr><th>StudentID</th><th>Candidate 1</th><th>Candidate 2</th></tr>
<?php
$result = $mysqli->query("SELECT * FROM candidate_info");
while ($row = $result->fetch_object())
{
 echo "<tr><td>" . $row->studentid . "</td><td>" . $row->candidate1 . "</td><td>" . $row->candidate2 . "</td></tr>";
}
$mysqli->close();
?>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T03:24:24.750

以下是一些可用于更新示例表的伪代码：

```
$candidate=array(null,null);
$candidateCounter=0;
foreach ($check as $ch){
    $candidate[$candidateCounter]=$ch;
    $candidateCounter++;
    if(candidateCounter>1){
        something wrong, only 2 candidates can be selected
    }
}
UPDATE sample set $candidate1=candidate[0], $candidate2=candidate[1] WHERE 
    studentid=$voter 
```

# json - dust.js 键中的特殊字符？

> ID：14554688
> 
> 赞同：2
> 
> 时间：2013-01-28T02:35:06.460
> 
> 标签：json, dust.js

我正在尝试使用带有 JSON 数据的dust.js 模板，该模板的键包含特殊字符，如“：”和“#”。

如何在模板中指定这些键？

例如：

```
JSON data:
{
    "opensearch:totalResults": 200,
    "#text": "some data"
} 
```

dust.js 模板：

```
<div>There are {opensearch:totalResults} items found</div> 
```

这不能正确解决，只是打印模板文本而不是替换为 JSON 数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T14:01:52.553

问题是密钥在dustjs中无效。这是我们用来验证密钥的pegjs规则：

```
key "key"
 = h:[a-zA-Z_$] t:[0-9a-zA-Z_$-]*
 { return h + t.join('') } 
```

这意味着密钥仅在以下情况下有效：

*   以字母、下划线或 $ 开头
*   其余键是字母、下划线、$ 或破折号 (-)

如您所见，# 和 : 不是作为键的一部分的有效符号。

如果你需要添加它，你可以打开一个问题或者只是发送一个拉取请求，解释你为什么需要这个功能。

# jquery - 如果当我将鼠标悬停在 div 的内部元素上时触发事件，我如何在 div 上使用 jquery mouseout？

> ID：14554689
> 
> 赞同：2
> 
> 时间：2013-01-28T02:35:22.197
> 
> 标签：jquery

我有一个 div，当您悬停时会扩展，当您鼠标悬停时会缩小到小尺寸。唯一的问题是当您将鼠标悬停在 div 中的内部元素（例如图像或 < p >）上时会触发 mouseout。

[这里的例子小提琴](http://jsfiddle.net/FCxYW/1/)

这是我的jQuery代码：

```
$(".riser").mouseover(function(){ 
 $(this).animate({height:400}, 100);
});  

$(".riser").mouseout(function(){ 
 $(this).animate({height:150}, 100);
}); 
```

我只想在鼠标移出 div 时使 div 变小，当我将鼠标悬停在内部元素上时，我不希望它做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T02:37:39.060

更改`mouseout`为`mouseleave`（和更改`mouseover`为`mouseenter`，尽管这无关紧要）。

[http://jsfiddle.net/FCxYW/2/](http://jsfiddle.net/FCxYW/2/)

# java - 使用 Weka 进行文本分类

> ID：14554697
> 
> 赞同：1
> 
> 时间：2013-01-28T02:36:32.173
> 
> 标签：java, classification, weka

我是 Weka 的新手！

我的目的是将现有文章分为 2 类：教育或娱乐。

我已经有 400 篇教育类文章和 400 篇娱乐类文章。

那么如何为 Weka 创建 arff 输入文件呢？或者 Weka 的任何其他解决方案？

（对不起我的英语不好，谢谢）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:36:43.103

[本文介绍](http://weka.wikispaces.com/Converting+CSV+to+ARFF)如何将 CSV 格式转换为 ARFF，前提是您的数据集为 CSV 格式。

但是，如果您还没有数据集，则需要事先执行很多任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-10T12:59:09.350

尽管这似乎是一段漫长的旅程，但您实际上可以做到。您尝试做的一切都与文本挖掘的主题有关。我想你可以从[这个链接](https://www.tidytextmining.com/tidytext.html)中学到很多东西。此外，我认为可能对您有用的信息是：

1.  首先，在每个文本表单中打开您的文件并将其粘贴到电子表格程序（例如 Excel）中的一行中。在其旁边的列中，输入文档类型（教育或娱乐）。您总共将有 800 行。

2.  单击 Excel 文件菜单中的“另存为”，然后选择文件类型为“.csv”。并将其保存为“.csv”。（在“Excel”中单击“保存”后，他询问您是否要将工作簿保存为“Excel”。我认为“否”。

3.  在“Weka”中打开“.csv”文件： 在“Weka”中选择“打开文件”，将文件类型标记为 .csv，然后选择“.csv”文件。

4.  从“过滤器 -> 选择”列表中选择“StringToVector”。您可以检查[此地址](https://weka.sourceforge.io/doc.stable/weka/filters/unsupervised/attribute/StringToWordVector.html)以进行必要的参数设置。

5.  您将使用 Weka 中的“保存”命令获得所需的“.arff”格式文件。

[![StringToVector_in_Weka](../Images/3478eeb825537c55740a065e35784e85.png)](https://i.stack.imgur.com/xVOcU.png)

我希望它有所帮助。祝你好运。

# sql - 禁用 oracle 触发器的脚本

> ID：14554702
> 
> 赞同：0
> 
> 时间：2013-01-28T02:36:46.193
> 
> 标签：sql, triggers, oracle11g

在其他任何事情之前，我已经在堆栈中看到了这篇[文章。](https://stackoverflow.com/questions/1129288/how-do-i-find-all-code-triggers-from-an-oracle-database-that-relate-to-specific)它在那里说如何列出所有触发器，我要的是禁用（而不是删除/删除）所有触发器的脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T03:37:35.313

有趣的问题。不幸的是，我无法在本地对此进行测试，但这样的事情可能会奏效。基本上，声明一个`CURSOR`循环遍历所有触发器（出于我的目的，我正在使用几个 TEST 触发器进行测试）。然后`EXECUTE IMMEDIATE`用来执行动态sql。

```
DECLARE
CURSOR cur_trigger IS
SELECT 'ALTER TRIGGER ' ||
       table_owner ||
       '.' ||
       trigger_name ||
       ' DISABLE' SQLStatement
FROM all_triggers
WHERE trigger_name like '%TEST%';
sqlText cur_trigger%ROWTYPE;

BEGIN
  OPEN cur_trigger;
  LOOP
    FETCH cur_trigger INTO sqlText;
    EXIT WHEN cur_trigger%NOTFOUND;

    EXECUTE IMMEDIATE sqlText.SQLStatement;
  END LOOP;
  CLOSE cur_trigger;
END; 
```

这是[SQL Fiddle](http://www.sqlfiddle.com/#!4/85fda/4)。它在 Fiddle 中不能完全工作，但我相信这是因为 Fiddle 而不是代码。

祝你好运。

# objective-c - 无法让 LIBXLS 在 Cocoa 中工作

> ID：14554704
> 
> 赞同：0
> 
> 时间：2013-01-28T02:36:50.667
> 
> 标签：objective-c, excel, frameworks

我正在尝试将一个名为 LIBXLS 的包编入我正在构建的 Mac OS X 程序中，我收到以下编译/链接消息：

```
ld: warning: ignoring file /Users/joeruth/Documents/cocoa applications/TestExcel/libxls-0.2.0-i386/usr/local/libxls/lib/libxlsreader.dylib, 
file was built for unsupported file format ( 0xce 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 0 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) 
which is not the architecture being linked (x86_64): 
/Users/joeruth/Documents/cocoa applications/TestExcel/libxls-0.2.0-i386/usr/local/libxls/lib/libxlsreader.dylib 
```

我希望我做的完全错误，只需要调整我如何将这个包链接到我的程序中。我担心这个包根本不兼容 Xcode 和 Mac OS X。

我在项目的目标“构建阶段”“将二进制文件与库链接”选项卡中添加了一个看起来像这样的文件。困扰我的是，我链接到了一个`libxlsreader.a`根据包文档命名的文件，并且错误出现在正确的库名称上`libxlsreader.dylib`。这告诉我我做了正确的事情，编译器已经查看了文件并判断它是 fubar。

任何人都可以确认这是消息试图告诉我的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T02:51:19.310

您收到的错误消息表明（相当迟钝）您获得的库文件是为`i386`（32 位英特尔）架构构建的，而不是`x86_64`（64 位英特尔）。tipoff 是文件的前四个字节 ( `CE FA ED FE`)。

# asp.net - 为什么要将pdf转换为swf？

> ID：14554705
> 
> 赞同：-3
> 
> 时间：2013-01-28T02:36:54.630
> 
> 标签：asp.net, pdf, web-applications, web, flash

优点和缺点？

我是一名新手开发人员，目前正在从事一个项目。它涉及查看文件。其中大部分原本是pdf转换成swf的。

我的老板更喜欢swf。这有什么好处和坏处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T02:54:12.037

优点：用户不需要PDF查看器，SWF查看器提供的用户界面可能会被某些人认为更好，用户界面可能加载速度更快，文档难以下载（如果您认为“专业”）

缺点：用户需要有一个Flash Player，用户界面和用户习惯的用户界面不同，用户界面可能缺少很多功能，文档很难下载

有许多不同的移动设备，其中大多数不支持 Flash。最重要的是，Apple iOS 设备（iPhone、iPad）不支持并且可能永远不会支持 Flash (SWF)，而原生支持 PDF。Chrome 提供了一个内置的 PDF 查看器，而 Firefox 很快也将提供。

在我个人看来，在 5 年前左右将 PDF 转换为 SWF 可能是一个好主意。我今天绝对不推荐它。

# flash - 在 phantomjs 1.8 中伪造 flash 插件信息

> ID：14554713
> 
> 赞同：3
> 
> 时间：2013-01-28T02:38:12.947
> 
> 标签：flash, plugins, phantomjs

我是 PhantomJs 的新手。我使用的是 1.8.1 版本。我已经看过[here](https://groups.google.com/forum/#!msg/phantomjs/8pCA0x2evH8/l8CTff6y53MJ)来解决这个问题，因为我有类似的要求。

我正在做这样的事情：

```
page.onInitialized = function () {
    page.evaluate(function () {
        (function () {
            window.navigator.plugins = {
                'length': 1, 
                'Shockwave Flash': {
                    'description':'fakeflash'
                }
            };
        })();
    });
}; 
```

当我做 console.log (window.navigator.plugins['Shockwave Flash'].description)

我得到未定义的结果。

谁能告诉我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T16:45:06.930

替换整个`navigator`对象（不能只修改某些属性）。

```
var page = require('webpage').create();

page.onConsoleMessage = function (msg) {
    console.log(msg);
};

page.onInitialized = function () {
    page.evaluate(function () {
        window.navigator = {
            plugins: {
                length: 1,
                'Shockwave Flash': {
                    description: 'fakeflash'
                }
            }
        };
    });
};

page.content = '<html><body>Hello</body></html>';
page.evaluate(function () {
    console.log(window.navigator.plugins['Shockwave Flash'].description);
});

phantom.exit(); 
```

# jquery - 如何从 $.post 函数中检索返回值

> ID：14554715
> 
> 赞同：0
> 
> 时间：2013-01-28T02:38:23.803
> 
> 标签：jquery

作为我的主题/标题。这是我的代码

```
$(document).on("keyup","[name=BNAM]",function(){
    var nam = $(this).attr("name");
    var val = $(this).val();
    var typ = $(this).prev().val();

    $.post(
        "pro/bulletins_handle.php",
        {BTN:"QCHKNAM",BTYP:typ,BNAM:val},
        function(data){ 
        alert(nam+":"+val+":"+data); //display to check the return value of data
        var reTURN = data; //assign data into reTURN
            alert($(this).html());//Error: it say undefined
        });
    alert(reTURN); //Error: reTURN is not defined
}); 
```

** 我的帖子返回值为 0 或 1 **

* * *

问题：
1）。如何从 $.post 函数中检索返回值？
2）。为什么它说未定义？$(this) 不是 = [name=BNAM] ??

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T03:08:36.043

首先，您必须将行`alert(reTURN);`向上移动到函数（数据）块中。该函数中的代码将在数据成功加载后执行。由于 js 的异步特性，下面的代码（即使它在下面）将在数据准备好之前执行。

此外，您在 $.post 块中使用的 this 变量并不代表您的想法。此代码应该更好地工作：

```
$(document).on("keyup","[name=BNAM]",function(){
    var $this = $(this);
    var nam = $this.attr("name");
    var val = $this.val();
    var typ = $this.prev().val();

    $.post(
        "pro/bulletins_handle.php",
        {BTN:"QCHKNAM",BTYP:typ,BNAM:val},
        function(data){ 
            alert(nam+":"+val+":"+data); //display to check the return value of data
            alert($this.html());
            alert(data);
        });    
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T02:43:04.800

## 1

所有 ajax 请求（包括`$.post`）*异步*执行。这意味着可能在请求之后但在回调之外的任何代码部分很可能会在 ajax 请求完成*之前*执行，并且您不能依赖对该数据的访问。

如果要使用数据，必须在 ajax 请求的回调中使用。

## 2

`this`在上面的上下文中是一个 jQuery XMLHttpRequest 对象，而不是一个`DOM`元素。它没有`html`方法。做这样的事情：

```
$(document).on('keyup', '[name=BNAM]', function () {
   var $this = $(this);
   //$this is now available as the DOM element in the ajax callback 
```

# wpf - 在代码中定义数据模板

> ID：14554716
> 
> 赞同：0
> 
> 时间：2013-01-28T02:38:24.090
> 
> 标签：wpf

我有一个自定义控件，其中我在 Generic.xaml 中定义了资源。我需要在运行时创建数据模板，例如

```
xaml = "<DataTemplate><TextBlock Text=\"{Binding " + Binding + "}\"/></DataTemplate>"; 
```

这很好用，但是如果模板访问其他资源，我会被卡住，例如

```
xaml = "<DataTemplate><TextBlock Text=\"{Binding " + Binding +
                      "}\" Margin=\"{Binding Bar, Converter={StaticResource MyConverter}, RelativeSource={RelativeSource AncestorType={x:Type local:Foo}}}\"/></DataTemplate>"; 
```

转换器和RelativeSource 都会导致问题。

“无法从文本‘local:Foo’创建‘类型’。” 或“找不到名为 'MyConverter' 的资源。” 如果我尝试在代码中创建的数据模板是在 Generic.xaml 中定义的，并使用 TemplateSelector 进行选择，则它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:06:03.223

您还必须在 datatemplate 中定义资源。

```
 <DataTemplate xmlns:local="clr-namespace:WpfApplication2">
        <DataTemplate.Resources>
            <local:MyConverter x:Key="MyConverter"/>
        </DataTemplate.Resources>
        <TextBlock Text="{Binding }"/>
    </DataTemplate> 
```

请将其转换为 C# 支持格式。

# css - 如何在jsplumb中设置连接线的不透明度？

> ID：14554717
> 
> 赞同：3
> 
> 时间：2013-01-28T02:38:28.613
> 
> 标签：css, svg, jsplumb

请参阅下面的工作代码。有人可以告诉我如何设置连接两个 div 的线的不透明度吗？我在有关此的文档中找不到任何内容。我尝试传递`setOpacity: 0.5`,`opacity: 0.5`并将`strokeStyle: rgba(120, 120, 240, 0.4)`其用作`paintStyle`. 这些都没有帮助。

谢谢你的帮助。

**编码**

```
<!DOCTYPE html>
<html>
<head>
    <title>jsplumb example</title>
    <style type="text/css">
        .nodes {
            border: 2px solid steelblue;
            width: 200px;
            height: 100px;
        }
        .div1 {
            position: relative;
            top: 10%;
            left: 10%;
        }
        .div2 {
            position: relative;
            top: 20%;
            left: 40%;
        }
    </style>
</head>
<body>
    <div class='containerdiv'>
        <div class="nodes div1" id="inner1">Inner 1</div>
        <div class="nodes div2" id="inner2">Inner 2</div>
    </div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
<script type="text/javascript" src="./jquery.jsPlumb-1.3.16-all-min.js"></script>

<script type="text/javascript">
    jsPlumb.bind("ready", function() {
        jsPlumb.connect({
            source:"inner1", target:"inner2",
            paintStyle: {strokeStyle: 'rgb(120,120,240)', lineWidth: 6}
        });
        jsPlumb.draggable('inner1');
        jsPlumb.draggable('inner2');
    });                     

</script>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T02:52:31.320

有两个选项，第一个（我无法使用）是使用该[`connectorClass`](http://www.jsplumb.org/apidocs/files/jquery-jsPlumb-1-3-16-all-js.html#connectorClass)属性为连接器元素分配一个类名或一个用空格分隔的类名列表。但是，如前所述，这似乎不起作用（或者我做错了，考虑到时间，这是可能的）。

另一方面，鉴于包含连接器的 svg 元素具有可预测的类名，您可以简单地使用 CSS 直接设置该元素的样式：

```
._jsPlumb_connector  {
    opacity: 0.5; /* or whatever... */
} 
```

[JS 小提琴演示](http://jsfiddle.net/vStyR/)。

# c - 程序意外终止

> ID：14554718
> 
> 赞同：0
> 
> 时间：2013-01-28T02:38:50.697
> 
> 标签：c

我是 C 新手，我正在使用 scanf 函数。我要求用户输入的数字是一个名为 myNumber 的长整数。但是，当我输入值时，程序给出“分段错误：11”

```
long double ObtainNumber (myNumber)
{

    scanf("%lf", &myNumber);
    while (myNumber > 999999999)
        {
            printf("Error. Please enter a number with no greater than 9 digits\n");
            scanf("%lf", &myNumber);
        }

    return (myNumber);
} 
```

我想知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T02:44:26.540

```
long double ObtainNumber (/* you have no type name here */myNumber) 
```

除非您指定类型 ，否则`myNumber`假定其类型为`int`。当您将指针传递`int`给`scanf`说明`%lf`符时，您会得到未定义的行为。

您需要指定`myNumber`要成为的类型`double`

```
long double ObtainNumber (double myNumber) 
```

请注意，这不会让您将值传递`myNumber`回调用者：该值将设置在按值传递的参数中；一旦函数退出，它将被丢弃。

如果你需要从函数返回值，你需要传递一个指针`myNumber`：

```
long double ObtainNumber (double *myNumberPtr) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T02:47:26.283

您没有向`myNumber`函数声明参数的类型，因此假定它是`int`. 然后你继续将它传递给 a `scanf`，它期望它是 a `double`，各种坏事最终都会发生。

在这种情况下，根本不清楚为什么`myNumber`是参数——它当然根本不会影响函数的作用。您可能只想将其声明为局部变量：

```
long double ObtainNumber(void)
{
    long double myNumber;
    scanf("%lf", &myNumber);
    ... 
```

顺便说一句，`long double`不太可能是您真正想要的类型。它是一种时髦的扩展精度类型，其大小会根据您使用的架构、编译器和系统而有所不同。( [ref](http://en.wikipedia.org/wiki/Long_double) ) 它很少使用，也没有必要。`double`更容易键入，并且更有可能按照您期望的方式行事。

# ios - 如何使用“详细信息披露”按钮？

> ID：14554719
> 
> 赞同：19
> 
> 时间：2013-01-28T02:38:57.937
> 
> 标签：ios, xcode, disclosure

我是 Xcode 的新手，我需要知道如何使用已添加到表中的 Detail Disclosure 按钮。按下圆形蓝色箭头按钮会将用户重定向到另一个 ViewController，并且在该 ViewController 中，将显示所选行中的数据。我将使用它进行更新。对于我对 iOS 编程缺乏了解，我深表歉意。请耐心等待我。谢谢！:)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-28T02:52:15.210

正确的 tableView 委托方法是：

```
-(void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath 
```

- 基本上，详细信息披露按钮可用于在 tableView 中显示一些额外信息，而不是在用户选择行时调用的主要信息（即 didSelectRowAtIndexPath 方法）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-07-17T13:52:06.230

**Swift 3.0 中的委托方法**

```
func tableView(_ tableView: UITableView, accessoryButtonTappedForRowWith indexPath: IndexPath) {

} 
```

但是对于使用此委托：您可以使用以下两种附件类型中的任何一种：

```
cell.accessoryType = .detailDisclosureButton
cell.accessoryType = .detailButton 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T02:46:10.043

细节披露指示器所做的只是让用户知道他们可以（并且应该）点击单元格或箭头以显示更多信息。要显示附加信息，您需要处理`-didSelectRowAtIndexPath`tableview 的委托方法。从那里您可以推送另一个视图控制器或显示与您选择的单元格相关的任何内容。

# jquery - jQuery 与父元素一起横向滑动

> ID：14554725
> 
> 赞同：1
> 
> 时间：2013-01-28T02:40:23.430
> 
> 标签：jquery, slide

我知道之前有人问过类似的问题，但我想要的是让父级随着元素的滑入而增大。我尝试了很多技巧，包括 jQuery UI。

这是我到目前为止得到的：http: [//jsfiddle.net/U8z49/25/](http://jsfiddle.net/U8z49/25/)

**html**：

```
<table class="t">
    <tr>
        <td class="l">
            <div>Click me.<br /><br />This div has fixed width of 100px and is taller than the right stuff.</div>
        </td>
        <td class="r">
            <div class="rdiv">I would like this cell or div to slide in from left to right and to cause the parent table and its background to grow along with it. Currently the table first snaps to 100% width, and then the content (the div) slides in.</div>
        </td>
    </tr>
</table> 
```

**CSS**：

```
.t { background: #ddd; border-radius: 10px; width: auto; }
.l div { width: 120px; margin: 1em; text-align: right; }
.rdiv { padding: 1em; border-left: 1px solid #bbb; display: none; } 
```

**js**：

```
$('.l').click(function(){$('.rdiv').show("slide", {direction:"left"}, 500);}); 
```

正如您所看到的，我的问题是父母先捕捉到 100% 宽度，然后孩子才滑入。

ps 我选择了一个表格和单元格，因为左边的宽度应该是固定的，右边的应该跨越剩余空间到表格保持元素的 100% 宽度（实际设置更复杂，但这就是它的要点）。

# php - 在 MySQL 查询调用的 HTML 表中追加新行，并更新 MySQL 中的当前列

> ID：14554729
> 
> 赞同：0
> 
> 时间：2013-01-28T02:40:58.510
> 
> 标签：php, javascript, jquery, mysql

两部分问题。不一定要在这里要求任何代码，只要一个关于如何处理它的方向就足够了。

我有一个存储在 MySQL 表中的一行的表，我们称之为它`$row['request']`，当回显时将打印一个完整的`<table><tr><td></td></tr></table>`.

这都是用户在提交任务时生成的，我目前真的无法更改。

因此，假设用户决定在几天后`$row['request']`通过在底部添加一些新行来更新 HTML 表格。

如何`</table>`在回显结果末尾的标记之前添加这些行？

这是我添加新行的内容：[JsFiddle Example](http://jsfiddle.net/UX5M4/)。

如果这就足够了，那么我将如何将这个新的 HTML 数据添加到 MySQL 中的现有字段中？

我应该使用类似的东西吗

```
$query = "UPDATE t1
   SET request = CONCAT(request,'$extra')
   WHERE id = '$id'"; 
```

在添加新的 HTML 之前，我很困惑如何将其附加到`</table>`仍被标记的附加内容。

我也可以重写整个字段，但我不太确定如何将整个表作为 PHP 变量获取并提交。一如既往地感谢您的帮助。

编辑：我将`<table><tr><td></td></tr></table>`信息存储在我的 MySQL 表中的单个字段中。我知道这很烦人，但该表最初是由用户将 Excel 表中的内容粘贴到 textarea 生成的，并且提交查询将 \n 和 \t 替换为表标签。因此，当我单击“添加行”时，我需要将新`<tr><td></td></tr>`信息以及其中的数据提交给 UPDATE 查询。那是我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:26:10.677

根据您的评论，我猜您想“将 new 的整个 HTML 字符串提交`tr`给 MySQL”，您可以这样做：

```
var counter = 1;
jQuery('a.add-row').click(function(event){
  event.preventDefault();
  counter++;

  var $tr = $( '.requesttable tr:last' ) // assume new <tr> always the last one
  $tr.find( 'input' ).each( function() {
    $(this.parentNode).html( this.value ) // get rid of <input> tag, only keep value
  })

  $.ajax( {
    url: url, // PHP page that receive data and update MySQL
    data: $tr.get(0).outerHTML, // "<tr><td>value1</td><td>value2</td></tr>"
    type: 'post', // or 'get', depends on your PHP page
    success: function() {
      // if added, append new row
    },
    error: function() {
      // if failed, alert user
    }
  } )
}); 
```

# java - 为什么我的带有蓝牙蜜蜂的 xbee shield v1.4 的 arduino uno 没有从 android 接收任何数据？

> ID：14554730
> 
> 赞同：3
> 
> 时间：2013-01-28T02:41:01.867
> 
> 标签：java, android, bluetooth, arduino

我为 android 开发了这个应用程序，它通过蓝牙向蓝牙蜜蜂发送 1 和 0 作为其要连接的固定设备。它假设控制连接到 UNO 的外部 LED。但是，当我在为 arduino 上传程序后将 arduino 插入电源时，当我按下 android 应用程序时，LED 没有发生任何变化。我想知道我是否没有正确编程微控制器。请帮忙！>< 这是我的应用程序代码和 arduino 的草图。：

阿杜诺素描

```
#include <SoftwareSerial.h>

SoftwareSerial mySerial(6, 5);
int dataFromBT;

void setup() {
  Serial.begin(57600);
  Serial.println("LEDOnOff Starting...");

  // The data rate for the SoftwareSerial port needs to 
  // match the data rate for your bluetooth board.
  mySerial.begin(115200);
  pinMode(13, OUTPUT);   
}

void loop() {
  if (mySerial.available())
    dataFromBT = mySerial.read();

  if (dataFromBT == '0') {
    // Turn off LED
    digitalWrite(13, LOW);
  } else if (dataFromBT == '1') {
    // Turn on LEFD
    digitalWrite(13, HIGH);
  }
} 
```

Java代码：

```
package com.example.twobuttonapp;

import java.io.IOException;
import java.io.OutputStream;
import java.util.UUID;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity {

     private static String TAG = "TwoButtonApp";//for use as the tag when logging 

     private static final int REQUEST_ENABLE_BT = 1;
      private BluetoothAdapter btAdapter = null;
      private BluetoothSocket btSocket = null;
      private OutputStream outStream = null;

      // Well known SPP UUID
      private static final UUID MY_UUID =
          UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");

      // Insert your bluetooth devices MAC address
      private static String address = "07:12:04:18:51:58";

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

         Log.d(TAG, "In onCreate()");

        setContentView(R.layout.activity_main);

        Button buttonStart = (Button)findViewById(R.id.buttonStart);        
         buttonStart.setOnClickListener(new OnClickListener() {
              public void onClick(View v) {
                sendData("1");
                Toast msg = Toast.makeText(getBaseContext(),
                    "You have clicked On", Toast.LENGTH_SHORT);
                msg.show();
              }
            });

         Button buttonStop = (Button)findViewById(R.id.buttonStop);        
         buttonStop.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                  sendData("0");
                  Toast msg = Toast.makeText(getBaseContext(),
                      "You have clicked Off", Toast.LENGTH_SHORT);
                  msg.show();
                }
              });
         btAdapter = BluetoothAdapter.getDefaultAdapter();
            checkBTState();
    }

     @Override
      public void onResume() {
        super.onResume();

        Log.d(TAG, "...In onResume - Attempting client connect...");

        // Set up a pointer to the remote node using it's address.
        BluetoothDevice device = btAdapter.getRemoteDevice(address);

        // Two things are needed to make a connection:
        //   A MAC address, which we got above.
        //   A Service ID or UUID.  In this case we are using the
        //     UUID for SPP.
        try {
          btSocket = device.createRfcommSocketToServiceRecord(MY_UUID);
        } catch (IOException e) {
          errorExit("Fatal Error", "In onResume() and socket create failed: " + e.getMessage() + ".");
        }

        // Discovery is resource intensive.  Make sure it isn't going on
        // when you attempt to connect and pass your message.
        btAdapter.cancelDiscovery();

        // Establish the connection.  This will block until it connects.
        Log.d(TAG, "...Connecting to Remote...");
        try {
          btSocket.connect();
          Log.d(TAG, "...Connection established and data link opened...");
        } catch (IOException e) {
          try {
            btSocket.close();
          } catch (IOException e2) {
            errorExit("Fatal Error", "In onResume() and unable to close socket during connection failure" + e2.getMessage() + ".");
          }
        }

        // Create a data stream so we can talk to server.
        Log.d(TAG, "...Creating Socket...");

        try {
          outStream = btSocket.getOutputStream();
        } catch (IOException e) {
          errorExit("Fatal Error", "In onResume() and output stream creation failed:" + e.getMessage() + ".");
        }
      }

      @Override
      public void onPause() {
        super.onPause();

        Log.d(TAG, "...In onPause()...");

        if (outStream != null) {
          try {
            outStream.flush();
          } catch (IOException e) {
            errorExit("Fatal Error", "In onPause() and failed to flush output stream: " + e.getMessage() + ".");
          }
        }

        try     {
          btSocket.close();
        } catch (IOException e2) {
          errorExit("Fatal Error", "In onPause() and failed to close socket." + e2.getMessage() + ".");
        }
      }

      private void checkBTState() {
        // Check for Bluetooth support and then check to make sure it is turned on

        // Emulator doesn't support Bluetooth and will return null
        if(btAdapter==null) { 
          errorExit("Fatal Error", "Bluetooth Not supported. Aborting.");
        } else {
          if (btAdapter.isEnabled()) {
            Log.d(TAG, "...Bluetooth is enabled...");
          } else {
            //Prompt user to turn on Bluetooth
            Intent enableBtIntent = new Intent(btAdapter.ACTION_REQUEST_ENABLE);
            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
          }
        }
      }

      private void errorExit(String title, String message){
        Toast msg = Toast.makeText(getBaseContext(),
            title + " - " + message, Toast.LENGTH_SHORT);
        msg.show();
        finish();
      }

      private void sendData(String message) {
        byte[] msgBuffer = message.getBytes();

        Log.d(TAG, "...Sending data: " + message + "...");

        try {
          outStream.write(msgBuffer);
        } catch (IOException e) {
          String msg = "In onResume() and an exception occurred during write: " + e.getMessage();
          if (address.equals("00:00:00:00:00:00")) 
            msg = msg + ".\n\nUpdate your server address from 00:00:00:00:00:00 to the correct address on line 37 in the java code";
          msg = msg +  ".\n\nCheck that the SPP UUID: " + MY_UUID.toString() + " exists on server.\n\n";

          errorExit("Fatal Error", msg);       
        }
      }

    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.activity_main, menu);
        return true;
    }

    @SuppressWarnings("null")
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.about:
            Toast aboutAlert = null;
            // Show info about the author (that's me!)
         aboutAlert.show();
            return true;
        }
        return false;
        //respond to menu item selection
    }
}; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T23:23:49.900

只看arduino代码：

*   该`read()`函数返回一个char，而不是一个int
*   我认为默认的 Zigbee 速度是 9600
*   跳过`available()`，只需设置 char from`read()`并使用它。该`read()`函数处于阻塞状态，将等待下一个字节发生。

# sql - 通过 sem 选择两个表之间不匹配的行

> ID：14554732
> 
> 赞同：7
> 
> 时间：2013-01-28T02:41:43.613
> 
> 标签：sql, join, sql-server-2012

我有两个表，Table1 和 Table2。我想选择 Table2 中不包含在 Table1 中的不同行。这是一个例子：

```
 Table1        

   | A  |   | sem|
   ------------------
1\. | aa |   | 1 |
   ---------------
2\. | bb |   | 1 |
   ----------------
3\. | aa |   | 2 |
   -----------------
4\. | cc |   | 2 |
   ---------------

Table2

   | B  |
   ------
1\. | aa |
   ------
2\. | aa |
   ------
3\. | bb |
   ------
4\. | cc |
   ------
5\. | cc |
   ------
6\. | ee |
   ------
7\. | ee |
   ------ 
```

当 sem = 1 时，我想要这两个表中不常见的那些行，就像 sem = 1 结果的输出

## | 乙|

1.  | 抄送|
2.  | 呃 |

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T03:04:00.923

你可以试试这样的。

```
SELECT B
FROM Table2 b
WHERE NOT EXISTS (
    SELECT *
    FROM Table1 a
    WHERE a.A = b.B) 
```

据我所知，您无法正常工作的原因是您获得了 table1 和 table2 中的所有值。你应该做的就像我上面做的一样。获取两个表中的所有值并检查两个表中的哪些值不在结果集中，这就是我设置子查询的原因。我对我的 SQL 有点生疏，所以请接受我所说的话。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-28T02:44:56.683

您可以使用`outer join`and`where`子句来做到这一点。在这种情况下，我认为是右外连接：

```
SELECT cd.cGenotype
FROM  dbo.TestResults tr right outer join
      dbo.CombinedData cd
      ON (tr.TestResult = cd.cGenotype)
where tr.testresult is null
GROUP BY cd.cGenotype 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T02:44:55.233

```
SELECT DISTINCT b.cGenotype
FROM  dbo.CombinedData b 
WHERE NOT EXISTS (SELECT * 
                  FROM dbo.TestResults a 
                  WHERE a.TestResult = b.cGenotype) 
```

# shell - 剪切命令指定制表符作为分隔符

> ID：14554733
> 
> 赞同：21
> 
> 时间：2013-01-28T02:42:10.060
> 
> 标签：shell, cut

当我使用命令时，有一个分隔符为制表符的文件

```
cut -d \t file.txt  #or  "\t"  or  "\\t" 
```

我收到这条消息

> cut：必须指定字节、字符或字段的列表
> 
> 尝试使用“cut --help”获取更多信息。

如何使用`cut` 命令？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-28T02:52:48.373

Cut 在给定的分隔符处拆分输入行（-d，--delimiter）。

要按制表符拆分，请省略 -d 选项，因为按制表符拆分是默认设置。

通过使用 -f (--fields) 选项，您可以指定您感兴趣的字段。

```
echo -e "a\tb\tc" |cut -f 1 # outputs "a"
echo -e "a\tb\tc" |cut -f 2 # outputs "b"
echo -e "a\tb\tc" |cut -f 3 # outputs "c"
echo -e "a\tb\tc" |cut -f 1,3 # outputs "a\tc"
echo -e "a\tb\tc\td\te" |cut -f 2-4 # outputs "b\tc\td" 
```

您还可以指定输出分隔符（--output-delimiter）并去掉不包含任何分隔符的行（-s/--only-delimited）

```
echo -e "a\tb\tc\td\te" |cut -f 2-4 --output-delimiter=":" # outputs b:c:d 
```

如果您对输入文件的第一个字段感兴趣，只需...

```
cut -f 1 file.txt 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-28T02:50:06.650

默认分隔符是 '\t' 所以你只需要执行：

```
cut -f <n> file.txt 
```

`<n>`列号在哪里

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T09:55:03.320

如果先按“ v”，然后按“”键，可以尝试在引号之间放置一个制表符

```
eg  cat > test.txt 
a    b     c
<ctrl d>

$ grep test.txt | cut -f 2 -d "<ctrl v> <presstab>" 
```

将返回“b”

# java - 使用 PHP 和 mysql 构建 Android 登录

> ID：14554734
> 
> 赞同：0
> 
> 时间：2013-01-28T02:42:20.150
> 
> 标签：java, php, android, mysql, login

我创建了我的 android 登录并连接到我的 PHP 和 mysql，问题是，每次我运行我的程序并输入正确的电子邮件和密码时，它总是在我的 EditText 中显示 android.os.NetworkOnMainException，或者当我正在删除没有任何反应的代码。我在编码中犯了错误还是我遗漏了什么。好的，这是我的代码伙计们。

安卓：

**

```
public class LoginActivity extends Activity {
/** Called when the activity is first created. */
     EditText inputEmail ;
    EditText inputPassword ;
    Button btnLogin ;
    public void validation()
    {
        if(inputEmail.getText().toString().equals("") || inputPassword.getText().toString().equals(""))
                {
                Toast.makeText( getApplicationContext(),"Fill Empty Fields",Toast.LENGTH_SHORT ).show();
                }
        else
        {
            connectphp();
        }
        }
    public void connectphp()
    {
    // TODO Auto-generated method stub
    ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
    postParameters.add(new BasicNameValuePair("eadd", inputEmail.getText().toString()));
    postParameters.add(new BasicNameValuePair("password", inputPassword.getText().toString()));
    //Passing Parameter to the php web service for authentication
    //String valid = "1";
    String response = null;
    try {
    response = CustomHttpClient.executeHttpPost("http://10.0.2.2:8080/TheCalling/log_in.php", postParameters);  //Enter Your remote PHP,ASP, Servlet file link
    String res=response.toString();
    res = res.trim();
    res= res.replaceAll("\\s+","");
    //error.setText(res);
    if(res.equals("1"))
    {
        Toast.makeText( getApplicationContext(),"Correct Username or Password",Toast.LENGTH_SHORT ).show();
        Intent i = new Intent(LoginActivity.this,MainMenu.class);
        startActivity(i);
    }
        else
            if(res.equals("0"))
        {
        Toast.makeText( getApplicationContext(),"Sorry!! Incorrect Username or Password",Toast.LENGTH_SHORT ).show();
        }
    } catch (Exception e) {
        inputEmail.setText(e.toString());
    }}

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.login);
 inputEmail = (EditText)findViewById(R.id.inputEmail);
 inputPassword = (EditText)findViewById(R.id.inputPassword);
btnLogin = (Button)findViewById(R.id.btnLogin);
btnLogin.setOnClickListener(new OnClickListener() {
public void onClick(View v)
{ 
    validation(); 
    //(This is to check empty fields)
}
});
}} 
```

**

顺便说一句，这些代码也来自堆栈溢出。

自定义HttpClient

**

```
public class CustomHttpClient {
/** The time it takes for our client to timeout */
public static final int HTTP_TIMEOUT = 30 * 1000; // milliseconds
/** Single instance of our HttpClient */
private static HttpClient mHttpClient;
/**
 * Get our single instance of our HttpClient object.
 *
 * @return an HttpClient object with connection parameters set
 */
private static HttpClient getHttpClient() {
    if (mHttpClient == null) {
        mHttpClient = new DefaultHttpClient();
        final HttpParams params = mHttpClient.getParams();
        HttpConnectionParams.setConnectionTimeout(params, HTTP_TIMEOUT);
        HttpConnectionParams.setSoTimeout(params, HTTP_TIMEOUT);
        ConnManagerParams.setTimeout(params, HTTP_TIMEOUT);
    }
    return mHttpClient;
}
/**
 * Performs an HTTP Post request to the specified url with the
 * specified parameters.
 *
 * @param url The web address to post the request to
 * @param postParameters The parameters to send via the request
 * @return The result of the request
 * @throws Exception
 */
public static String executeHttpPost(String url, ArrayList<NameValuePair> postParameters) throws Exception {
    BufferedReader in = null;
    try {
        HttpClient client = getHttpClient();
        HttpPost request = new HttpPost(url);
        UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(postParameters);
        request.setEntity(formEntity);
        HttpResponse response = client.execute(request);
        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        StringBuffer sb = new StringBuffer("");
        String line = "";
        String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null) {
            sb.append(line + NL);
        }
        in.close();
        String result = sb.toString();
        return result;
    } finally {
        if (in != null) {
            try {
                in.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
}
/**
 * Performs an HTTP GET request to the specified url.
 *
 * @param url The web address to post the request to
 * @return The result of the request
 * @throws Exception
 */
public static String executeHttpGet(String url) throws Exception {
    BufferedReader in = null;
    try {
        HttpClient client = getHttpClient();
        HttpGet request = new HttpGet();
        request.setURI(new URI(url));
        HttpResponse response = client.execute(request);
        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        StringBuffer sb = new StringBuffer("");
        String line = "";
        String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null) {
            sb.append(line + NL);
        }
        in.close();
        String result = sb.toString();
        return result;
    } finally {
        if (in != null) {
            try {
                in.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
}
} 
```

**

和我的 PHP 代码。

**

```
<?php
include("db_config.php");
$eadd=addslashes($_POST['eadd']);
$password=addslashes($_POST['password']);
$sql="SELECT * FROM users WHERE eadd='$eadd' and password='$password'";
$result=mysql_query($sql);
$row=mysql_fetch_array($result);
$count=mysql_num_rows($result);
if($count==1)
    {
    echo "1";
    //(If result found send 1 to android)
    }
else
    {
    echo "0";
    //(If result not found send o to android)
    }
?> 
```

**

谢谢你们的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:49:17.407

在较新版本的 Android 中，默认启用严格模式。基本上，这意味着您不能在 UI 线程上执行网络操作，因为它们会冻结应用程序并使其看起来有问题；这样你就得到了`NetworkOnMainThreadException`。

为了避免这种情况，请使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)，它可以让您在不同的线程上运行下载代码。该文档显示了如何创建子类以及如何运行它（单击按钮时将运行它）。

# c# - 使用单个编辑按钮在转发器中编辑项目（超链接）

> ID：14554738
> 
> 赞同：1
> 
> 时间：2013-01-28T02:43:24.143
> 
> 标签：c#, xml, web, repeater, edit

我有一个中继器，它绑定到从 XML 文件生成的 List<>。该文件由两个节点组成，ID 和 Item。

```
<Items><ID>0</ID>
<Item><![CDATA[<a target='blank' href="http://www.cnn.com">CNN News</a> ]]></Item> 
```

我需要提供编辑功能以允许用户编辑转发器中每个项目的 url 和文本。我不想为每一行单独的编辑/保存按钮；太杂乱了。我想这意味着一个编辑/保存按钮，这基本上会导致在每次保存时重新“创建”XML文件。或者，是否有更好的方法来做到这一点？

我想我在问两件事：

1.  关于如何使 URL 列表可编辑（包括 url 和文本）的设计建议。我猜是两个单独的文本框？

2.  如何处理编辑。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:14:49.377

1.  是的，两个单独的字段是去这里的方式
2.  就编辑而言，您的`ItemTemplate`. 一个用于**View**，一个用于**Edit**。默认情况下，**编辑**面板的可见性设置为 false。每行都有一个“编辑”按钮，其中项目的 ID 为其`CommandArgument`，按下该按钮时，您将设置一个带有所单击项目 ID 的 Session 变量。然后，当您重新绑定中继器时，您会根据会话编辑 ID 变量检查每个项目的 ID。如果它们匹配，则将**View**面板的可见性设置为 false，并将**Edit**面板的可见性设置为 true。**编辑**_**面板有两个按钮，一个用于保存，一个用于取消。一旦用户单击 Save 或 Edit，您就可以进行任何后端处理，清除 Session 变量并重新绑定转发器。尽管有内置控件具有“内置”编辑功能，但我发现使用中继器分配给我的控件更出色。**

 **这个方法我用过很多次了，效果很好！

如果您需要任何代码来说明上述任何一点，请随时提出。

另一方面，您的 XML 看起来有点奇怪。似乎没有代表每个 URL/ID 对的父节点。这是一个疏忽，一个错字，还是我在这里遗漏了什么？

**编辑：**

这是在您的场景中利用 ViewState 的好方法：

```
 private enum PageStates
    {
        None = 0,
        View = 1,
        Edit = 2
    }

    /// <summary>
    /// The current state of the page
    /// </summary>
    private PageStates PageState
    {
        get
        {
            if (ViewState["PageState"] == null)
                ViewState["PageState"] = PageStates.View; //default to view state

            return (PageStates)ViewState["PageState"];
        }
        set
        {
            ViewState["PageState"] = value;
        }
    } 
```

通过将 ViewState 访问封装在一个属性中，对存储变量（Session、DB 等）的方法的任何更改都会从访问它的任何代码中抽象出来。**

# python - 如何在 Python 中从文本文件中打开程序

> ID：14554742
> 
> 赞同：0
> 
> 时间：2013-01-28T02:44:47.843
> 
> 标签：python, file

我将如何通过引用文本文件在 Python 中打开文件。例子：

```
 f.open('openthis.txt') 
```

然后我会将 openthis.txt 放在同一个文件夹中，它会说：

> C:\文件夹\myprogram.exe

因此代码从目录中打开 myprogram.exe

我想这样做，这样代码很容易更改，而不是每次我想更改打开的文件时都必须在 IDLE 中编辑它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:50:32.100

您需要[子流程](http://docs.python.org/2/library/subprocess.html#module-subprocess)模块。具体来说，您会执行以下操作：

```
import subprocess

with open("inputfile", "rb") as f:
    subprocess.call(f.read()) 
```

# django - 类型匹配查询不存在。应该很容易，但无法弄清楚

> ID：14554743
> 
> 赞同：0
> 
> 时间：2013-01-28T02:44:52.760
> 
> 标签：django, django-urls

我真的需要你的帮助。

我有一个应用程序，我希望它生成一个链接。整个过程在第一步中起作用。但是当您在第二页并单击下一个链接时，我得到一个：

类型匹配查询不存在。

我的代码生成错误的链接：

```
http://127.0.0.1:8000/typ/Richie%20Eisler/ 
```

问题是此链接的自动填充 slug 是：

```
http://127.0.0.1:8000/typ/richie-eisler/ 
```

当我从手进入上部时，我进入了正确的页面 - 它被创建并工作。而且我不知道它在哪里交出了错误的链接。看起来它传递了名称字段（即“Richie Eisler”）而不是 slug。

我以前做过完全相同的事情，它工作得很好，我不知道出了什么问题。它告诉我错误在这一行：

```
typ         = Typ.objects.get(slug=typslug) 
```

这是不起作用的视图：

```
def Typen(request, typslug):
    typ         = Typ.objects.get(slug=typslug)
    context     = {'typ': typ}
    return render_to_response('typ.html', context, context_instance=RequestContext(request)) 
```

这是来自 url.py

(r'^typ/(?P.*)/$', 'sk8.views.Typen'),

这完全是“相同的”，但有效：

```
def SpeziellerSk8(request, sk8slug):
    sk8         = Sk8.objects.get(slug=sk8slug)
    context     = {'sk8' : sk8}
    return render_to_response('diesersk8.html', context, context_instance=RequestContext(request))

 (r'^skates/(?P<sk8slug>.*)/$', 'sk8.views.SpeziellerSk8'), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T02:57:43.483

我刚刚想通了。

问题出在模板中。

这是正确的方法：

```
<p>Typ: <a href="/typ/{{sk8.typ.slug}}/">{{sk8.typ}}</a></p> 
```

这就是我以前的

```
<p>Typ: <a href="/typ/{{sk8.typ}}/">{{sk8.typ}}</a></p> 
```

我认为他正在创建链接，但随后转到错误的链接，错误必须在链接内。链接是在模板中创建的。所以我检查了模板，发现我的链接搞砸了。

我希望这有助于其他人有类似的问题。

欢呼丹尼尔

# c++ - 在 Visual Studio 2012 中执行完 C++ 程序后，内存泄漏是否仍然存在？

> ID：14554748
> 
> 赞同：6
> 
> 时间：2013-01-28T02:45:15.380
> 
> 标签：c++, memory-leaks, visual-studio-2012

我不是编程新手，而是 C++ 新手。我发现当我玩这种语言并与之互动时，我学得更好。所以我发现的一件很酷的事情是如何让 Visual Studio 通过以下方式提醒您程序中的任何内存泄漏：

```
#define _CRTDBG_MAP_ALLOC
#include <stdlib.h>
#include <crtdbg.h> 
```

然后打电话

```
_CrtDumpMemoryLeaks(); 
```

在程序退出并将所有内存泄漏打印到输出窗口之前，太棒了！

我的问题是

*   发现内存泄漏后是否需要重新启动 Visual Studio 2012？
*   我需要重新启动计算机吗？
*   这些东西会泄露多久？还是 Windows 在执行结束时清理所有内存？如果这是真的，那么在 Visual Studio 中以“调试模式”运行程序是否仍然如此？

是的，我知道我真的应该使用智能指针，如`shared_ptr`,`unique_ptr`等，但我这样做是为了学习。这不是一个“真正的”应用程序，只是沙盒测试！

另外，这种查找内存泄漏的方法`_CrtDumpMemoryLeaks ()`是否存在无法准确找到泄漏的情况？这似乎是一个了不起的工具！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T02:51:03.777

不，内存泄漏在程序中。一旦被调试者终止，VS或调试器与泄漏的内存无关。除非它是内核内存，否则操作系统会在进程终止时释放所有用户模式内存分配。

_CrtDumpMemoryLeaks 在很多情况下都没有用。一旦情况是任何内核内存泄漏（在许多情况下都属于句柄泄漏，并且需要 Windows 上的其他工具）。您可能需要查看 WinDbg 和相关工具，如 GFlags（来自 Microsoft 网站上免费提供的 Windows 调试工具包），以获得更详尽的诊断内存泄漏/堆损坏等

# matlab - Matlab：绘制存储为一列的 x、y、z 值

> ID：14554750
> 
> 赞同：1
> 
> 时间：2013-01-28T02:45:34.853
> 
> 标签：matlab, matrix

我应该如何在 Matlab 中完成[这个绘图任务任务？](https://stackoverflow.com/questions/14392411/gnu-plot-plotting-x-y-z-values-stored-as-one-column)

谢谢你。

编辑：我要问的是当数据在一列中时如何在 Matlab 中绘图，如上面给出的链接中所述。

问候，

伊克尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T03:24:51.797

您可以`reshape`转置矩阵并提取列：

```
vec = [1 2 3 4 5 6 7 8 9 10 11 12]';
reshaped_mat = reshape(vec,3,[])'; 
```

`reshaped_mat`最终会看起来像这样：

```
 1     2     3
 4     5     6
 7     8     9
10    11    12 
```

您可以按如下方式提取列：

```
x = reshaped_mat(:,1);
y = reshaped_mat(:,2);
z = reshaped_mat(:,3); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T03:02:30.663

你可以试试这样的>

例如：A=[1 2 3; 4 5 6；7 8 9]

`A'`将会

```
 1     4     7
     2     5     8
     3     6     9 
```

首先进行转置，

```
B = A' 
```

并将其转换为单列，

`B(:)`会给

```
ans =

     1
     2
     3
     4
     5
     6
     7
     8
     9 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T08:51:37.180

懒惰用户的另一个选择：给定一个向量`v`

```
 v = [1 2 3 4 5 6 7 8 9 10 11 12]; 
```

因为我们知道元素是这样的`[x1,y1,z1,x2,y2,z2,...]`，所以绘图`x,y,z`可能需要`plot3`，所以这就是它可以直接完成的方式：

```
 plot3(v(1:3:end),v(2:3:end),v(3:3:end)) 
```

其中条目相当于

```
 x=v(1:3:end);
 y=v(2:3:end);
 z=v(3:3:end); 
```

# parsing - 如何在简单语法中添加括号作为最高优先级？

> ID：14554752
> 
> 赞同：2
> 
> 时间：2013-01-28T02:45:53.507
> 
> 标签：parsing, grammar, context-free-grammar, parentheses, operator-precedence

我正在尝试在我的语法中添加两件事：

1.  一元减号，即'-'，和

2.  括号

到目前为止，这是我的语法：

```
<comp>  ::= <expr> | <comp> <op0> <expr>
<expr>  ::= <term> | <expr> <op1> <term>
<term>  ::= <darg> | <term> <op2> <darg>
<darg>  ::= <digit> | <darg> <digit>
<digit> ::= 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9
<op0>   ::= > | < | =< | => | =
<op1>   ::= + | -
<op2>   ::= * | / 
```

我已经尝试了一切，但无法弄清楚。如何使一元减号处于最高优先级，然后是括号，然后是描述的其余运算符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T03:03:58.250

改为`<term>`使用`<fred>`而不是`<darg>`定义

```
<fred> ::= -<fred> | (<comp>) | <darg> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:00:22.117

我在您当前的语法中添加了一个`<new>` *以三个新生产规则*`Unary minus sign`命名的新变量，以添加和 `Parentheses`：

```
<comp>  ::= <expr>   | <comp> <op0> <expr>
<expr>  ::= <term>   | <expr> <op1> <term>
<term>  ::= <new>    | <term> <op2> <darg>
<new>   ::= (<comp>) | -<darg> | <darg> 
<darg>  ::= <digit>  |  <darg> <digit>
<digit> ::= 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9
<op0>   ::= > | < | =< | => | =
<op1>   ::= + | -
<op2>   ::= * | / 
```

[通过添加括号，您将在语法中添加两个新终端`{ (, ) }`]

此外，`<new> ::= ( <new> )`如果您想生成`(-7)`,`(7)`和`((6+7))`like 表达式，您可以添加。（*这些是有效的表达式*）

[我想通知您，如果您正在编写编译器，请改用模棱两可的语法并在 YACC 工具中添加运算符优先级，以实现高效解析]

**编辑**：

如果您想添加类似的表达式`-(7)`，那是一个有效的表达式。所以`<new> ::= -<new>`而不是`<new> ::= <drag>`

# mysql - 使用 IF ... THEN ... ELSE 在两个 SELECT 查询之间进行选择

> ID：14554753
> 
> 赞同：4
> 
> 时间：2013-01-28T02:45:57.517
> 
> 标签：mysql, select, if-statement

我需要有关我将调用“app_Update_Users”的应用程序中的 SELECT 语句的帮助。此应用程序旨在更新用户表中的记录。应用程序代码参考下表：

*   状态
*   县
*   组织
*   用户

States 表包含美国所有 50 个州的列表。Counties 表包含加利福尼亚州 58 个县的列表。组织表包含可能位于任何州并在加利福尼亚州的一个或多个县提供服务的组织列表。添加或更新用户记录时，我想根据组织所在的州和提供服务的县过滤组织列表。

该应用程序具有三个选择类型语句来创建用户记录中的属性选择列表。我已经编写了适用于前两个语句的代码，但是我遇到了第三个语句的代码问题。这些语句引用的字段是： - uState - uCounty - uOrganization

uState 和 uCounty 字段的语句调用 onChange Ajax 处理来更新 uOrganization 字段的选择列表中的选择。使用以下代码选择前两个字段的选项列表选项：

对于 uState 字段：

```
SELECT stAbbr, CONCAT(stAbbr, ' - ', stStatePK)
   FROM States 
   ORDER BY stAbbr; 
```

对于 uCounty 字段：

```
SELECT cCounty, cCounty 
   FROM Counties 
   ORDER BY cCounty; 
```

Organizations 表中的记录可以在 oCounties 字段中列出多个县，因为一个组织可以在多个县开展业务。因此，当前使用以下代码选择 uOrganization 字段的选项列表选项：

```
SELECT oName
   FROM Organizations 
   WHERE oCounties LIKE '%{uCounty}%' 
   ORDER BY oName ASC ; 
```

我还可以使用以下代码根据它们所在的状态选择 Organizations 表中的记录：

```
SELECT oName, oName
   FROM Organizations 
   WHERE oState = '{uState}' 
   ORDER BY oName ASC ; 
```

但是，我想用于为 uOrganization 字段选择选项的逻辑将结合这两个代码片段。用简单的英语，它会是这样的：“如果 uState 字段设置为 'California'，则根据 uCounty 字段中的值从 Organizations 表中选择记录。如果 uState 字段未设置为 'California' ，然后根据 uState 字段中的值从 Organizations 表中选择记录。

下面的 IF 。. . 然后 。. . ELSE 语法明白了这一点，但它不起作用：

```
IF uState = 'CA' THEN
   SELECT oName, oName
   FROM Organizations 
   WHERE oCounties LIKE '%{uCounty}%' 
   ORDER BY oName ASC ;  
ELSE
   SELECT oName, oName
   FROM Organizations 
   WHERE oState = '{uState}' 
   ORDER BY oName ASC ;
ENDIF 
```

编写此代码的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T02:49:51.473

您可以在没有`if`with 单个语句的情况下执行此操作：

```
SELECT oName, oName
FROM Organizations 
WHERE (ustate = 'CA' and oCouties like '%{uCounty}%') or
      (uState <> 'CA' and oState = '{uState}')
ORDER BY oName ASC ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:31:01.517

您可以在 where 条件下使用 if 语句

```
SELECT 
    oName, 
    oName
FROM Organizations 
WHERE 
    IF(uState = 'CA' , oCounties LIKE '%{uCounty}%' , oState = '{uState}'  )
ORDER BY oName ASC ; 
```

# javascript - 如何混淆音频标签的 src 属性

> ID：14554754
> 
> 赞同：0
> 
> 时间：2013-01-28T02:46:07.253
> 
> 标签：javascript, java, audio, encryption

我目前正在构建一个 Web 应用程序，我将在其中播放用户上传的文件，其中用户上传的文件只能流式传输。问题是我将如何隐藏或混淆音频标签 src 属性，但同时仍可以流式传输/播放音频文件并从数据库中检索？

这样做的主要目的是我想要音频文件的来源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T02:49:29.853

没有明智的方法可以完成你说你想做的事情。如果元素可以找到该文件，那么任何在浏览器中启用了调试工具的用户都可以找到该文件。您试图通过隐藏源 URL 来服务的目的是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T02:54:28.957

*   也许您应该使用网络音频 API 开始使用音频[上下文](http://www.html5rocks.com/en/tutorials/webaudio/intro/)

    或
*   仅在某些情况下使用服务器端脚本 (php) 加载，例如，您可以让您的网站在用户的浏览器中保存一个 cookie，并且当您要加载文件~~时，在链接上传递它的值~~*

*：我忘记了 cookie 是随请求一起发送到服务器的（在 php 中：使用 $_COOKIE 超级全局）

# python - 写入现有工作簿

> ID：14554770
> 
> 赞同：1
> 
> 时间：2013-01-28T02:48:54.520
> 
> 标签：python, xlrd, xlwt, xlutils

我想知道是否有人可以帮助我解决这个问题。我想使用 xlwt/xlrd/xlutils 对现有的 .xls 文件进行更改。我看了一下[这个](https://stackoverflow.com/questions/2725852/writing-to-existing-workbook-using-xlwt)问题，并尝试了页面底部的两个答案。当我尝试第二个答案时，我收到了这个错误：

```
AttributeError: 'Sheet' object has no attribute 'cooked_page_break_preview_mag_factor' 
```

当我尝试第三个答案时，我收到了这个错误：

```
AttributeError: 'str' object has no attribute 'datemode' 
```

我使用的文件与答案中的文件完全相同，但文件名除外。

我很感激任何帮助。我会评论答案，但我没有足够的代表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-05T22:32:39.483

我有同样的错误，并意识到我正在复制工作表而不是工作簿。

```
rb = open_workbook(file_path,formatting_info=True)
wb = copy(rb) 
```

# java - Google App Engine JDO 增强失败

> ID：14554774
> 
> 赞同：3
> 
> 时间：2013-01-28T02:49:19.477
> 
> 标签：java, google-app-engine, ant, jdo, datanucleus

我正在尝试构建我的第一个 Google App Engine WAR，并正在设置我自己的外部（Eclipse 之外）Ant 构建以从终端执行。我正在尝试让`<enhance_war/>`Ant 宏工作并且遇到了一个奇怪的`NoSuchMethodError`.

这是我的 Ant 目标：

```
<target name="package" depends="gendocs">
    <echo message="Enhancing WAR JDO classes." />
    <enhance_war war="war" />

    <echo message="Packaging the WAR file." />
    <war destfile="gen/dist/myapp.war" webxml="war/web.xml">
        <fileset dir="war">
            <includes name="**/*.xml" />
        </fileset>
        <lib dir="war/WEB-INF/lib" />
        <classes dir="war/WEB-INF/classes" />
    </war>
</target> 
```

这是 Ant 尝试执行`package`目标时的输出：

```
package:
     [echo] Enhancing WAR JDO classes.
  [enhance] Encountered a problem: Unexpected exception
  [enhance] Please see the logs [/tmp/enhance4426322586552955387.log] for further information.

BUILD FAILED
/home/myuser/sandbox/workbench/eclipse/workspace/myapp/build/build-local.xml:193: The following error occurred while executing this line:
/home/myuser/sandbox/workbench/google/gae-sdk/1.7.1/appengine-java-sdk-1.7.1/config/user/ant-macros.xml:95: Java returned: 1 
```

这`ant-macros.xml:95`对应于以下行：

```
<enhance failonerror="true" api="@{api}">
    <!-- Rest of the enhance task def -->
</enhance> 
```

所以在执行这个`<enhance />`任务时出了点问题，但我不知道是什么。

最后是日志文件`/tmp/enhance4426322586552955387.log`：

```
java.lang.RuntimeException: Unexpected exception
    at com.google.appengine.tools.enhancer.Enhancer.execute(Enhancer.java:76)
    at com.google.appengine.tools.enhancer.Enhance.<init>(Enhance.java:71)
    at com.google.appengine.tools.enhancer.Enhance.main(Enhance.java:51)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.appengine.tools.enhancer.Enhancer.execute(Enhancer.java:74)
    ... 2 more
Caused by: java.lang.NoSuchMethodError: org.datanucleus.plugin.PluginManager.<init>(Lorg/datanucleus/PersistenceConfiguration;Lorg/datanucleus/ClassLoaderResolver;)V
    at org.datanucleus.OMFContext.<init>(OMFContext.java:159)
    at org.datanucleus.enhancer.DataNucleusEnhancer.<init>(DataNucleusEnhancer.java:172)
    at org.datanucleus.enhancer.DataNucleusEnhancer.<init>(DataNucleusEnhancer.java:150)
    at org.datanucleus.enhancer.DataNucleusEnhancer.main(DataNucleusEnhancer.java:1157)
    ... 7 more 
```

这里发生了什么？我不*认为*这是一个类路径问题，因为`org.datanucleus.plugin.PluginManager`该类是在内部定义的`datanucleus-core-1.1.5.jar`，我在构建类路径中绝对有。加上它`NoSuchMethodError`，所以它让我觉得我有一个 JAR 地狱/版本控制问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:57:29.847

您的类路径中的 datanucleus-core 版本与增强器所需的版本不同。验证增强器正在使用什么并修复它。有关兼容性要求，请参阅[http://code.google.com/p/datanucleus-appengine/wiki/Compatibility](http://code.google.com/p/datanucleus-appengine/wiki/Compatibility)。

最新的 GAE SDK 提供了“GAE JDO 插件”v2.1.1 IIRC，它是最新版本（尽管有更新的尚未发布的 fwiw），它位于 lib/opt/blahblahblah 下。这利用了 DataNucleus v3.1.x。这是人们被推荐反对的。GAE JDO 插件在[http://code.google.com/p/datanucleus-appengine/开发](http://code.google.com/p/datanucleus-appengine/)

# actionscript-3 - AS3 继承和参数问题

> ID：14554782
> 
> 赞同：1
> 
> 时间：2013-01-28T02:50:24.463
> 
> 标签：actionscript-3, class, inheritance, parameters

我在继承方面遇到了麻烦，因为我从未在 ActionScript 3 中这样做过。

请告诉我在这种情况下该怎么办？

假设我有以下课程

```
package
{
    public class animal
    {
        var age;
        var amountOfLegs;
        var color;
        public function animal(a,b,c)
        {
            age=a;
            amountOfLegs=b;
            color=c;
        }
    }
 } 
```

然后，我想做一个派生类

```
package
{
    public class cat extends animal
    {
        var hairType;
        public function cat(a,b,c,d)
        {
            age=a;
            amountOfLegs=b;
            color=c;
            hairType=d;
        }
    }
} 
```

为什么我不能像那样让班级“猫”？有人请解释我如何继承一个类并仍然满足它的参数。我迷路了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:08:41.493

在你的 cat 类中，替换：

```
age=a;
amountOfLegs=b;
color=c; 
```

和

```
super(a, b, c); 
```

this 调用基类/超类的构造函数，传入 a,b,c。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T03:10:24.657

您需要使用`super`来调用父类的构造函数并传入您的值。

[http://www.emanueleferonato.com/2009/08/10/understanding-as3-super-statement/](http://www.emanueleferonato.com/2009/08/10/understanding-as3-super-statement/)

考虑这个例子

```
//this class defines the properties of all Animals

public class Animal{

    private var _age:int;
    private var _amountOfLegs:int;
    private var _color:String;

    public function Animal(age:int, amountOfLegs:int, color:String){
         _age = age;
         _amountOfLegs = amountOfLegs;
         _color = color;
    }

    public function traceMe():void{

         trace("age: " + _age + "legs: " + _amountOfLegs + " color: " + _color);
    }

}

//this makes a cat
public class Cat extends Animal{
   public function Cat(){
        //going to call the super classes constructor and pass in the details that make a cat
        super(5, 4, "black");
        traceMe(); //will print age: 5 legs: 4 color: black
   }

} 
```

更多阅读：

[http://active.tutsplus.com/tutorials/actionscript/as3-101-oop-introduction-basix/](http://active.tutsplus.com/tutorials/actionscript/as3-101-oop-introduction-basix/)

# javascript - JavaScript 复合字符串

> ID：14554785
> 
> 赞同：6
> 
> 时间：2013-01-28T02:50:44.977
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 等价于 printf/string.format](https://stackoverflow.com/questions/610406/javascript-equivalent-to-printf-string-format)

我不确定确切的术语（字符串替换？），但许多语言（C、VB、C# 等）提供了类似的动态构造字符串的机制。以下是 C# 中的示例：

```
string firstName = "John";
string lastName = "Doe";
string sFinal = string.Format(" Hello {0} {1} !", firstName, lastName); 
```

我想在 JavaScript 中完成同样的事情。任何人都可以解释一下吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T02:51:44.840

JavaScript 本身[还没有](http://www.nczonline.net/blog/2012/08/01/a-critical-review-of-ecmascript-6-quasi-literals/)这个功能。您必须使用连接：

```
var firstName = "John";
var lastName = "Doe";
var sFinal = " Hello " + firstName + " " + lastName + " !"; 
```

那糟透了？真的。但这就是我们生活的世界。

* * *

正如@PeterSzymkowski 所指出的，您可以使用C/PHP[函数](http://www.diveintojavascript.com/projects/javascript-sprintf)[的这个 JavaScript 实现`sprintf`](http://www.diveintojavascript.com/projects/javascript-sprintf)。

# java - 批处理脚本一次运行多个 Jar 文件

> ID：14554786
> 
> 赞同：9
> 
> 时间：2013-01-28T02:50:45.173
> 
> 标签：java, batch-file

我有两个要同时运行的批处理文件。所以我写了这个：

```
@echo off
java -jar happyjar.jar
java -jar sadjar.jar
pause 
```

当我运行脚本时，它首先运行happyjar，然后运行sadjar。是否可以同时运行两个 jar 而无需运行多个批处理文件？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-28T05:35:10.120

```
@echo off
start "Title1" java -jar happyjar.jar
start "Title2" java -jar sadjar.jar
pause 
```

[start](http://ss64.com/nt/start.html)命令在新窗口中运行您的命令，因此所有 3 个命令都将异步运行。

不要添加 /wait 选项，否则它将等待这个新窗口完成，然后再执行下一个命令。

# sql-server - SQL：如何从连接表中获取列

> ID：14554787
> 
> 赞同：0
> 
> 时间：2013-01-28T02:50:45.803
> 
> 标签：sql-server, tsql

我有这个查询，它给出了显示的初始结果。我的最终目标是解决以下问题：

对于每对都喜欢对方的学生，返回两个学生的姓名和年级

这是我编写的初始查询，以及匹配的 ID 对：

```
select L1.ID1, L1\. ID2
from Likes L1, Likes L2
where L1.ID1 = L2.ID2 and L2.ID1 = L1.ID2 and L1.ID1 > L1.ID2 
```

我的查询结果：

```
1709 1689
1934 1501 
```

我遇到的问题是返回每个 ID 的名称和等级，其中 ID 将在此表中：

学生（ID、姓名、年级）

那么，我该如何获得以下信息：

**预期的查询结果：**

```
name1 grade1 name2 grade2
name1 grade1 name2 grade2 
```

根据第一个查询的 ID，姓名和成绩来自学生表的哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:24:29.447

两个加入学生应该做的伎俩

```
SELECT 
l1.ID1, l1.ID2
s1.name as name1, s1.grade as grade1, 
s2.name as name2, s2.grade as grade2
FROM Likes l1
INNER JOIN Likes l2 ON l1.ID1 = l2.ID2 and l2.ID1 = l1.ID2
INNER JOIN students s1 on s1.ID = l1.ID1
INNER JOIN students s2 on s2.ID = l1.ID2
WHERE l1.ID1 > l1.ID2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:44:27.650

```
Select L1.name as name1, L1.grade as grade1, L2.name as name2, L2.grade as gade2 from ... 
```

# android - 设置世界坐标和相机矩阵 OpenGL ES 2.0

> ID：14554788
> 
> 赞同：0
> 
> 时间：2013-01-28T02:50:52.600
> 
> 标签：android, opengl-es, matrix, opengl-es-2.0, coordinate-systems

最近我一直在尝试 OpenGL ES 2.0 并在线查看了一些教程，但有一件事让我感到困惑。因此，如果我理解正确，（0,0,0）是设备的中心，我可以在每个方向上走 1 以到达手机的边缘。

现在，是否可以为世界设置我自己的坐标？假设一个 1024x640 或类似的世界，相机矩阵为 320x480（静态，即使我在游戏中为不同级别更改世界，相机也会保持不变，使视口相同，只是级别更大或更小）？

我真的对所有矩阵的东西感到困惑，现在我正在使用

```
setLookAtM (float[] rm, int rmOffset, float eyeX, float eyeY,
float eyeZ, float centerX, float centerY, float centerZ, 
float upX, float upY, float upZ); 
```

设置相机的视图。我明白这是如何工作的。

但是我如何将世界设置为某个坐标系？我想了解它，而不仅仅是“了解它”。

我现在打算将其制作为 2D 游戏，因此将所有 Z 坐标设置为 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:55:33.947

我只会将 setLookAtM 用于 3d 场景。您需要构建一个正交矩阵并开始使用它。有几个关于 2D OpenGL ES 2.0 渲染的教程：

例如，对于 android 来说，一个好的开始将是这个：http: [//developer.android.com/training/graphics/opengl/index.html](http://developer.android.com/training/graphics/opengl/index.html)

编辑：您需要设置和正交投影矩阵，将“世界”坐标转换为相机空间而不会失真：

```
void buildOrthoProjectionMatrix(){
    int viewport_h = (int)_viewportHeight;
    int viewport_w = (int)_viewportWidth;

    // Calcuate view aspect factor to normalize everything to a 800x480 screen
    float view_factor_x = (float)viewport_w/(float)480;
    float view_factor_y = (float)viewport_h/(float)800;

    float [] ortho_matrix2 = {
            view_factor_x*2.f/viewport_w,           0.f,    0.f, 0.f,
            0.f, view_factor_y*2.f/viewport_h,      0.f,    0.f,
            0.f,                                    0.f,    1.f, 0.f,
            -1.f,                                   -1.f,   1.f, 1.f
    };

    this._orthoProjectionMatrix = new Matrix4(ortho_matrix2);
} 
```

然后将您的模型视图矩阵与这个正交投影矩阵相乘。

# java - 从哈希图中检索多个值

> ID：14554792
> 
> 赞同：0
> 
> 时间：2013-01-28T02:51:23.167
> 
> 标签：java, collections, hashmap

数据类包含两个字段价格（双精度），运算符（字符串），我将数据类作为多个值映射到映射的每个键，如下所示 1)。

我无法在代码 2) 中显示。映射在同一键下的所有值，

例如，对于 Key=1，map 的值为 Price {0.2,0.3,0.4} ，运算符：{A,B,C}

此代码的输出只能显示价格= 0.2，运算符：A 表示键 1。所有其他值均未显示。如何解决？

```
1) Map<Integer, ArrayList<Data>> mp = new HashMap<Integer, ArrayList <SortData>>(); 
```

2)

```
 ArrayList<Data> ls = mp.get (keys.get(k));

              int i=0;
            for ( Data e: ls)
            {           
     System.out.println(e.getOperator() + e.getPrice());
                i++;    
            } 
```

在地图中添加数据的代码：

```
enter code here
     ArrayList<Test> list = new ArrayList<Test>();
      Map<Integer,ArrayList<Test>> mp = new HashMap<Integer,ArrayList<Test>>();
       list.add(new Data(0,1,"A"));
    list.add(new Data(0,2,"B"));
     mp.put(1,list);

  List<Test> value = mp.get(1);
  value.add(0.3,"c");
  value.add(0,5,"E"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:33:21.107

在您向地图添加值的代码中 - 编译错误。您不能将数据对象添加到 ArrayList。

您的迭代代码是正确的。所以我相信这些值根本不存在于地图中。因此，查看所有代码从列表中删除值。并确保在添加值代码中将值添加到存储在 Map 中的同一实例中。

尽管如此，要创建更少的错误电话代码，请考虑使用[Guava MultiMap](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multimap)

# php - 使用 jQuery 在 PHP 中插入 Select 标签

> ID：14554795
> 
> 赞同：0
> 
> 时间：2013-01-28T02:51:50.920
> 
> 标签：php, javascript, jquery, ajax, json

我想做的是每当用户单击添加更多按钮时，都会创建一个新的选择标签，我设法创建选择标签，但是每当我尝试为我的选择标签添加选项时，它都没有显示我的代码

jQuery :

```
 $(".addjob").click(function(){

     $("<tr><td>Choose Job Title</td><td><select name='jobtitles_id' class='jobtest' ></select></td></tr>").insertAfter($(this).parents("tr:last"));
     addjobtitle();
 }); 
```

这是我的 html/php 代码

```
<tr classs="afterthis">
<td>Choose Job Title</td><td><select name="jobtitles_id" style="min-width:145Px"><?php
    $rows1 = array();
    $result1 = $db->query("job_titles", " WHERE id NOT IN (SELECT jobtitles_id FROM categorybridge) ORDER BY name ASC ");
                $selected1 = '';
        while($rows1 = mysql_fetch_array($result1)) {
                    if($rows1['name'] == 'none'){
                    $selected1 = "selected";        
                    }
             ?> 
            <option value="<?php echo $rows1['id']; ?>" <?php echo $selected1; ?>><?php echo ucwords($rows1['name']); ?></option>       
    <?php $selected1 = ''; } ?>
    <option value="26" >None</option>   
    </select></td><td><div class="addjob" >Add another Job Title</div></td>
</tr> 
```

顺便说一句，我的选择标签中的值来自 mySql，我不知道该怎么做:(

请帮助我..提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:24:28.490

在黑暗中拍摄，但我认为这是您根据发布的代码尝试做的事情。

[http://jsfiddle.net/NUET3/1/](http://jsfiddle.net/NUET3/1/)

监视表格何时`addjob`被单击。单击后，克隆其表行并将其附加到表中。

```
$('table').on('click', '.addjob', function() {
    var $clone = $(this).parents('tr').clone();
    $('table').append($clone);
}); 
```

# java - 在java中设置jLabel文本会引发异常

> ID：14554797
> 
> 赞同：2
> 
> 时间：2013-01-28T02:52:11.690
> 
> 标签：java, swing, jlabel

我正在用 Java 实现井字游戏，但是当我运行程序并按下按钮时，由于我的点击方法而发生了异常。不知何故，JLabel 似乎从未被初始化过。为什么？

```
package piskvorky;

import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class Piskvorky extends JFrame {
    String[] tahy = {"O", "X"};
    int tah = 0;
    JButton[][] buttons;
    JLabel stav;
    int x, y;

    public Piskvorky(int x, int y) {
        this.x = x;
        this.y = y;

        setTitle("Piskvorky");
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        getContentPane().setLayout(new GridLayout(x, y+1));

        JButton[][] buttons = new JButton[x][y];

        for (int i = 0; i < x; ++i) {
            for (int j = 0; j < y; ++j) {
                buttons[i][j] = new JButton();
                buttons[i][j].setPreferredSize(new Dimension(50, 50));
                buttons[i][j].addActionListener(new MyTextListener());
                add(buttons[i][j]);
            }
        }

        JLabel stav = new JLabel();
        add(stav);

        pack();
    }

    class MyTextListener implements ActionListener{
        public void actionPerformed(ActionEvent e) {
            JButton kliknute = (JButton) e.getSource();
            setProperties(kliknute);
        }
    };

    private void setProperties(JButton source)
    {
        source.setText(tahy[tah]);
        source.setEnabled(false);
        tah = 1-tah;
        if(tah == 0)
            stav.setText("Current player: o");
        else
            stav.setText("Current player: x");
    }

    public static void main(String[] args) {
        new Piskvorky(10, 10).setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T02:57:38.867

您通过在构造函数中重新声明它来隐藏 stav 变量，所以是的 stav 类字段为空。解决方案：当然，在构造函数中初始化 stav 但不要在那里重新声明它。

编辑：根据 imxylz 的评论，您也在隐藏其他变量。是时候了解变量阴影了。请查看有关此内容的 Wikipedia 文章或 Google 文章，因为这是一个重要的概念，需要了解并学习如何避免。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T03:41:13.567

```
JLabel stav = new JLabel(); 
```

上面的线表示本地声明。但你正在使用，

```
stav.setText("Current player: o"); 
```

在`setProperties`方法中。所以你得到一个`NPE`. 删除那里的 reclration 并将其`stav`用作实例变量而不是局部变量。删除`stav`.

# c# - 将数据表值分配给变量

> ID：14554802
> 
> 赞同：1
> 
> 时间：2013-01-28T02:52:28.087
> 
> 标签：c#, dataset

我试图将一个变量从 Visual C# 中的数据源传递给一个变量，但代码没有返回任何值。
我用来提取值的代码是：

```
object o = rateTableDBDataSet1.Tables["RateTable"].Rows[1][0]; 
```

我得到的回报是位置 1 没有行。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:01:16.533

我对你想要什么有点困惑；

如果要将数据表的结构和数据复制到另一侧，请尝试 Copy 方法：

```
 System.Data.DataTable tb = new System.Data.DataTable();
    System.Data.DataTable tb2 = new System.Data.DataTable();
    object obj = new object();

    obj = tb.Copy();//adding to obj if you want....
    tb2 = tb.Copy();// of to another table without carrying the reference 
```

编辑：

根据您的评论，这是您想要的示例：

```
 DataSet rateTableDBDataSet1 = new DataSet();
        //ds = whatever your data is comming from

        bool doesItHaveData = rateTableDBDataSet1.Tables["RateTable"].Rows.Count > 0;

        if (doesItHaveData)
        {
            object col1row1 = rateTableDBDataSet1.Tables["RateTable"].Rows[0][0];
            object col2row1 = rateTableDBDataSet1.Tables["RateTable"].Rows[0][1];

            object col1row2 = rateTableDBDataSet1.Tables["RateTable"].Rows[1][0];
        } 
```

您当前的错误可能是因为没有非 2 条数据记录的数据（您正在访问第 1 行并且索引以 0 开头）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T09:17:04.390

它说您命名`RateTable`的数据表不包含任何行位置为 1 的行。

其实它的代表方式是

```
object o=dataset.tables[0].[rownumber][columnnumber/"columnname"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T12:37:21.587

```
 public static decimal opcomm { get; set; }
      public static decimal opcommPercentage { get; set; }

      public static void SetOpCommission()
      {
          using (DataBaseClass dataclass = new DataBaseClass())
          {

              dataclass.Connect();

              string sql = @"SELECT  EmployeeComission, EmployeeComissionPercentage,MobileKindId,Id,StartDate FROM EmployeeCommission";

              opcomm = (decimal)dataclass.ExecuteScalar(sql);
              opcommPercentage = (decimal)dataclass.ExecuteScalar(sql);
          }
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T03:29:36.913

首先，您需要弄清楚为什么“RateTable”中没有第二行。

通常，您获取列值的代码是正确的。但是，通常最好按名称访问列。如果列的顺序发生变化，这更具可读性并且不易出错：

```
object o = rateTableDBDataSet1.Tables["RateTable"].Rows[0]["Column"] 
```

其中“Column”是您的实际列名。

# c# - 如果这不等于？然后这样做

> ID：14554807
> 
> 赞同：-8
> 
> 时间：2013-01-28T02:52:42.560
> 
> 标签：c#

我正在做一个刽子手游戏，刚刚开始创建随机词，该词会生成用户必须猜测的新词，但有时随机代码会生成与之前使用过的词相同的词。我的问题是......是否有一个符号或代码会说如果随机数不等于......做这个代码块。

这是我的代码...

```
private void button1_Click(object sender, EventArgs e)
    {
        Random rW = new Random();

        foreach (TextBox textBox in addTextBox())
        {
            textBox.Visible = false;
        }

        RW = rW.Next(1, 4);

        if (RW == 1) //Cat
        {
            textBox1.Visible = true;
            textBox2.Visible = true;
            textBox3.Visible = true;

        }
        else if (RW == 2) //Elephant
        {
            textBox1.Visible = true;
            textBox2.Visible = true;
            textBox3.Visible = true;
            textBox4.Visible = true;
            textBox5.Visible = true;
            textBox6.Visible = true;
            textBox7.Visible = true;
            textBox8.Visible = true;
        }
        else if (RW == 3) //Giraffe
        {
            textBox1.Visible = true;
            textBox2.Visible = true;
            textBox3.Visible = true;
            textBox4.Visible = true;
            textBox5.Visible = true;
            textBox6.Visible = true;
            textBox7.Visible = true;
        }
        else if (RW == 4) //Monkey
        {
            textBox1.Visible = true;
            textBox2.Visible = true;
            textBox3.Visible = true;
            textBox4.Visible = true;
            textBox5.Visible = true;
            textBox6.Visible = true;
        }
        else
        {
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T02:56:13.963

您应该使用`!=`which 是一个[相等运算符](http://msdn.microsoft.com/en-us/library/6a71f45d.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T03:00:45.590

使用通用列表，一旦生成了一个单词，就将其添加到列表中。然后只生成一个新词，直到生成的词不包含在已用词列表中。此外，对于 if/elseif 语句，我会说改用 switch 语句，它使其更具可读性。

还要确保 usedWords 集合在您的按钮事件处理程序之外，并且没有在内部声明，否则每次单击按钮时它都会被重置。

List usedWords = new List();

private void button1_Click(object sender, EventArgs e) { Random rW = new Random();

```
 foreach (TextBox textBox in addTextBox())
    {
        textBox.Visible = false;
    }

    RW = rW.Next(1, 4);

    while(usedWords.Contains(RW))
{
    RW = rW.Next(1,4);
}

usedWords.Add(RW);

    if (RW == 1) //Cat
    {
        textBox1.Visible = true;
        textBox2.Visible = true;
        textBox3.Visible = true;

    }
    else if (RW == 2) //Elephant
    {
        textBox1.Visible = true;
        textBox2.Visible = true;
        textBox3.Visible = true;
        textBox4.Visible = true;
        textBox5.Visible = true;
        textBox6.Visible = true;
        textBox7.Visible = true;
        textBox8.Visible = true;
    }
    else if (RW == 3) //Giraffe
    {
        textBox1.Visible = true;
        textBox2.Visible = true;
        textBox3.Visible = true;
        textBox4.Visible = true;
        textBox5.Visible = true;
        textBox6.Visible = true;
        textBox7.Visible = true;
    }
    else if (RW == 4) //Monkey
    {
        textBox1.Visible = true;
        textBox2.Visible = true;
        textBox3.Visible = true;
        textBox4.Visible = true;
        textBox5.Visible = true;
        textBox6.Visible = true;
    }
    else
    {
    }
} 
```

# java - Java中文件中定义的绘制点

> ID：14554810
> 
> 赞同：0
> 
> 时间：2013-01-28T02:52:53.743
> 
> 标签：java, swing, graphics, drawing, jpanel

我正在尝试学习 Java 的一些图形方面。我制作了一个列出点的文本文件，文件中的第一行确定有多少点。我需要获取文本文件中的点并将它们绘制在画布上。我查看了几个资源，但我只是不明白一切是如何协同工作的。我什至找不到提供所有代码并解释每个部分的位置以及如何调用它的教程。基本上，我对 JPanels、JFrames 以及基本上整个过程感到困惑。下面是我到目前为止编写的代码和文件外观的屏幕截图。

代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;
import java.awt.Graphics.*;
import java.util.*;
import java.io.*;

public class drawPoints extends JPanel
{

public void paintComponent(Graphics g)
{
super.paintComponent(g);
this.setBackground(Color.WHITE);
g.setColor(Color.BLUE);

  try{

  FileInputStream fstream = new FileInputStream("Desktop/Assign2Test1.txt");

  DataInputStream in = new DataInputStream(fstream);
  BufferedReader br = new BufferedReader(new InputStreamReader(in));
  String strLine;

 int i = 1;
  while ((strLine = br.readLine()) != null){

  final Point[] points = new Point[Integer.parseInt(br.readLine())];

  final String[] split = strLine.split("\u0009"); 
  points[i++] = new Point(Integer.parseInt(split[0]), Integer.parseInt(split[1])); 

  }

  in.close();
    }catch (Exception e){  System.err.println("Error: " + e.getMessage());
  }

}

import javax.swing.*;

public class mainDrawPoint
{
public static void main(String args[])
  {

  JFrame f = new JFrame("Draw Points Application");
  f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  drawPoints dP = new drawPoints();
  f.add(dP);
  f.setSize(500,500);
  f.setVisible(true);
  }
} 
```

代码所做的就是将值放入一个数组中。

![在此处输入图像描述](../Images/f26f234afd800dc6c59abb2b60ecbecd.png)

x 和 y 坐标由制表符分隔。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:47:58.637

您应该考虑以下几点：

据我所知，其中的第一个数字是计数。如果确实如此，则不需要为字符串使用 LinkedList。构建一个 Point 数组，例如：

```
final Point[] points = new Point[Integer.parseInt(br.readLine())]; 
```

从那里，使用带有 strLine 变量的循环系统，使用该字符串并计算出如何解析它，例如：

```
int i = 0; // Put this outside of the while loop. 
//While loop condition check here

final String[] split = strLine.split("\u0009"); // Unicode character for tab. 
points[i++] = new Point(Integer.parseInt(split[0]), Integer.parseInt(split[1])); // Assuming length 2 of split. 
```

至于渲染点，创建一个新类，一个扩展 JPanel 的类。在该类中，添加以下代码并填写 TODO：

```
@Override
public void paintComponent(final Graphics g){
    //TODO: Paint what you want here, automatically double-buffered
} 
```

现在，当您创建一个新的 Panel 类并将其添加到 JFrame 时，每当您从 JFrame 调用 repaint() 时，它将呈现 Panel 类的 paintComponent() 方法中的代码。如果您有任何其他问题，请随时提出。

编辑：示例代码：

```
import javax.swing.*;
import java.awt.*;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;

public class Test {

    private static final String FILE = "Desktop/Assign2Test1.txt";
    private static Point[] points;

    public static void main(final String[] args){
        try{
            final BufferedReader br = new BufferedReader(new FileReader(new File(FILE)));
            points = new Point[Integer.parseInt(br.readLine())];
            int i = 0;
            int xMax = 0;
            int yMax = 0;
            while(br.ready()){
                final String[] split = br.readLine().split("\u0009");
                final int x = Integer.parseInt(split[0]);
                final int y = Integer.parseInt(split[1]);
                xMax = Math.max(x, xMax);
                yMax = Math.max(y, yMax);
                points[i++] = new Point(x, y);
            }
            final JFrame frame = new JFrame("Point Data Rendering");
            final Panel panel = new Panel();
            panel.setPreferredSize(new Dimension(xMax + 10, yMax + 10));
            frame.setContentPane(panel);
            frame.pack();
            frame.setVisible(true);
            frame.repaint();
        } catch (final Exception e){
            e.printStackTrace();
        }
    }

    public static class Panel extends JPanel {

        @Override
        public void paintComponent(final Graphics g){
            g.setColor(Color.RED);
            for(final Point p : points){
                g.fillRect((int) p.getX(), (int) p.getY(), 2, 2);
            }
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:35:06.210

使用`panel.getGraphics()`方法从元素中获取 Graphics 对象的实例。以后用图形对象用`graphics.drawLine()` [方法](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html#drawLine%28int,%20int,%20int,%20int%29)画线。

您可以使用 regex 拆分一行的内容`string.split("\t")`。这将为您提供一个包含 2 个元素的数组（因为您说每行包含 2 个数字，中间有一个制表符）。

# c - Char ** 用法和打印

> ID：14554811
> 
> 赞同：7
> 
> 时间：2013-01-28T02:52:56.590
> 
> 标签：c, malloc, multidimensional-array, double-pointer

在 C 中，我使用 a`char **`来保存一系列字符串。

这是我的代码：

```
char ** c;
//now to fill c with data ????

//cannot change:
printf ("%*s%s", 0, "", *c);
while (*++w)
    printf (" %s", *c); 
```

我不知道如何填写`c`数据。什么是正确的方法？我无法更改 3 条打印线，因为它们在外部函数中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T03:11:56.250

我认为，术语在这里很重要。根本不“`char **`保存”一系列字符串（与比 C 更高级的语言中的容器对象不同）。该变量`c`只是一个指向字符指针的指针，该字符将成为以空字符结尾的字符串中的第一个字符。

这种思路直接导致了解决方案：如果 c 是指向字符指针的指针，这意味着我们必须分配一些内存来实际保存字符串数组。

@DB_Monkey 作为评论发布的解决方案试图做到这一点，但并不完全正确，因为它暗示像将`c[0] = "cat"`“cat”这样的代码复制到`c[0]`中，但事实并非如此——赋值适用于指针，而不适用于字符串。更好的方法是：

```
int rows = 3;
char **c = calloc (rows,sizeof(char*));
c[0] = "cat";
c[1] = "dog";
c[2] = "mouse"; 
```

这也表明没有必要显示每个字符串的显式 nul 终止。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T03:39:40.433

你的 char** 实际上是一个数字，它认为该数字是一个数字的地址，它是一个有效字符的地址......

简而言之：

```
// I am a number that has undefined value, but I pretend to point to a character.
char *myCharPointer;
// | The statement below will access arbitrary memory
// |   (which will cause a crash if this memory is not allowed to be accessed).
char myChar = *myCharPointer; 
```

要使用此指针，您必须对其进行初始化。

```
char *myCharPointer = (char *)malloc(10 * sizeof(char)); 
```

现在，您可以像处理数组一样使用这个指针，或者如果需要，可以使用适当的指针算法。

请注意，malloc 不会将“数组”中的所有值都设置为 0，默认情况下它们的值是未定义的。

为了做你想做的事，你必须做到以下几点：

```
// I can store 10 "strings"
char **myArrayOfStrings = (char **)malloc(10 * sizeof(char *));
char *str0 = "Hello, world0";
char *str1 = "Hello, World1";
char *str2 = "Hello, World2";
char *str3 = "Hello, world3";
char *str4 = "Hello, world4";
char *str5 = "Hello, world5";
char *str6 = "Hello, world6";
char *str7 = "Hello, world7";
char *str8 = "Hello, world8";
char *str9 = "Hello, world9";
myArrayOfStrings[0] = str0;
myArrayOfStrings[1] = str1;
myArrayOfStrings[2] = str2;
myArrayOfStrings[3] = str3;
myArrayOfStrings[4] = str4;
myArrayOfStrings[5] = str5;
myArrayOfStrings[6] = str6;
myArrayOfStrings[7] = str7;
myArrayOfStrings[8] = str8;
myArrayOfStrings[9] = str9;
// the above is the same as
// *(myArrayOfStrings + 9) = str9 
```

您不必拥有任何相同长度的字符串，假设 str[0..9] 实际上是存储这些字符串的第一个字符在内存中的地址的数字，例如

```
str0 = (char *)&9993039;
str1 = (char *)&9993089; 
```

myArrayOfStrings 实际上也是一个数字，它存储第一个字符串位置的地址，特别是`myArrayOfStrings = (char **)&str0;`

显然，您不会像我展示的那样明确地执行此操作，但这可以在运行时完成而没有太大问题，只需将来自用户的字符串存储在缓冲区中，然后将其附加到列表中，希望它不会用完空间（有一些技术可以避免这种情况）。

希望这有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T03:35:09.053

你所拥有的是一个指向`char`. 这意味着您保留了足够的空间来引用可能（更多必须）是另一个指针的变量。在为这些字符保留空间之前，这不允许您在其中保存实际字符。

因此，现在，您需要两步分配内存，以便您可以在`c`变量中包含字符或字符串（如果您愿意）。

您可以使用[malloc](http://pubs.opengroup.org/onlinepubs/009695399/functions/malloc.html)、[sizeof](http://en.wikipedia.org/wiki/Sizeof)和`for`循环来执行此操作。

首先，您需要为字符串向量分配空间（在 C 中，这只是字符向量，因此，实际上，您将为指向字符向量的指针向量分配空间）：

```
char **c = malloc(NUMBER_OF_STRINGS * sizeof(char*)); 
```

这使您的 c 变量指向`NUMBER_OF_STRINGS`，它是一个整数，指向 char 的指针。

现在，您可以为您的字符串选择最大大小并分配您需要的所有空间，或者您可以在每次需要放置新字符串时执行此操作：

```
/*All the space with MAX_STR= maximum string size*/
 for(i=0;i<NUMBER_OF_STRINGS;i++){
    c[i] = malloc(MAX_STR * sizeof(char));
 } 
```

现在，您可以将字符串复制到`c[i]`包含`MAX_STR`大小的字符串，甚至可以通过`char`将字符串`c[i][j]`从 i 字符串中得到 j 字符来从字符串中获取实际值。

```
/*Alloc when you have the string*/
  while(fgets(buff, BUFFSIZE, stdin) != NULL){   //This is just an example of an input reading from the keyboard
       c[i] = malloc(strlen(buff) * sizeof(char));
       i++;
  } 
```

我使用了一个函数`strlen`来获取`buff`（buff 只是一个字符串）的大小。检查[string.h](http://www.acm.uiuc.edu/webmonkeys/book/c_guide/2.14.html)以获取字符串操作函数。

所以我希望这能解决你的问题。还有一件事，在每个 malloc 之后，您应该检查是否`malloc`没有返回`NULL`，当您用完进程虚拟内存时会发生这种情况。

希望这可以帮助。

# android - Android imageview、缩放全屏和centerCrop

> ID：14554812
> 
> 赞同：3
> 
> 时间：2013-01-28T02:53:09.300
> 
> 标签：android, imageview

我怎样才能拥有一个图像填充屏幕但保持其纵横比并适合中心的图像视图？

目前我有大图像，比手机屏幕分辨率还大，但我怀疑它们会在分辨率更高的设备上被装箱

什么组合`scaleType`可以解决问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T03:29:19.487

您可以简单地使用[`adjustViewBounds`](http://developer.android.com/reference/android/widget/ImageView.html#attr_android%3aadjustViewBounds)value 来保持图像的纵横比

```
<ImageView
        android:id="@+id/metallicaImage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:adjustViewBounds="true"
        android:src="@drawable/metallica" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-24T18:45:13.093

```
<ImageView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="fitCenter" /> 
```

这是一个基本设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T03:38:22.770

我之前遇到过这个问题，问题是当图像需要放大时（屏幕宽度大于图像），Android 不会将图像缩放到超出其给定大小。但是，按比例缩小效果很好。

我最终创建了`AspectRatioImageView`下面提到的，效果很好。请务必阅读有关`getIntrinsicWidth()`返回 0 和`getDrawable()`返回 null 的注释，并对它们进行一些安全检查。

[如何在屏幕上拉伸三个图像以保持纵横比？](https://stackoverflow.com/questions/4677269/how-to-stretch-three-images-across-the-screen-preserving-aspect-ratio)

# html - 在 Opera 和 Google Chrome 的无序列表中垂直对齐图像

> ID：14554813
> 
> 赞同：0
> 
> 时间：2013-01-28T02:53:16.170
> 
> 标签：html, css, image, google-chrome, opera

在以下代码的示例中，

```
<html>
<head>
<style>
.gallery li {
    border: 1px dotted black;
    width:100px;
    height:100px;
    float:left;
    list-style:none;
    margin:10px;
    text-align:center;
    line-height:100px;
    vertical-align:middle;
}
</style>
</head>
<body>
<ul class="gallery">
    <li>
        <img src="http://dummyimage.com/20x20/000/000000.png" />
    </li>
</ul>
</body>
</html> 
```

我发现，只有 Firefox 可以使它垂直居中。虽然 Opera 和 Chromium (Google Chrome) 不能这样做。无论如何在 Opera 和 Chromium 中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:32:58.953

将 a 放在元素之前，例如`DOCTYPE`，`html`

```
<!DOCTYPE html>
<html> 
```

# segmentation-fault - strlen：地址越界导致分段错误

> ID：14554815
> 
> 赞同：1
> 
> 时间：2013-01-28T02:53:26.940
> 
> 标签：segmentation-fault, strlen

我正在尝试在 C 中执行几个简单的 string_reverse 实现。但是，当我在 gdb 中调试时出现以下错误：

```
Program received signal SIGSEGV, Segmentation fault.
0x00000000004005ca in string_reverse1 (string=0x68 <Address 0x68 out of bounds>)
28          length = strlen(*string);
Missing separate debuginfos, use: debuginfo-install glibc-2.15-58.fc17.x86_64 
```

这是我遇到的错误的代码（我评论了错误的来源）：

```
#include <stdio.h>
#include <string.h>

int main(int argc, char *argv[])
{
    char *char1 = "hello";
    char *char2 = "hi";
    char *char3 = "this is a really long string!";

    string_reverse1(*char1);
    string_reverse1(*char2);
    string_reverse1(*char3);
    printf("%s, %s, %s\n", char1, char2, char3);

    return 0;
}

//Assuming method's purpose is to reverse the passed string
//and set the original string equal to the reversed one
void string_reverse1(char *string) 
{
    //Calculate length once so it isn't recalculated at
    //every iteration of the for loop
    int length;
    char *reversed;
    int i;
    int reversed_counter;
    length = strlen(*string); //ERROR
    reversed_counter = 0;
    for(i = length - 1; i >= 0; i--) {
        reversed[reversed_counter] = string[i];
        reversed_counter++;
    }
    //Can't forget to add the terminating null character!
    reversed[length] = '\0';
    string = reversed;
} 
```

我知道 strlen 通过推进字符串返回传递字符串的长度，直到它到达 \0，即空字节。所以我想知道传递的字符串是否以某种方式不是以空值结尾的？我不认为我在 main 中错误地声明了字符串。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:02:34.493

问题是当你打电话时`string_reverse1`：

```
string_reverse1(*char1); 
```

`*`before`char1`取消引用`char1`返回字符串的第一个字符的值。如果你想通过，`*char`你应该省略`*`. 这是因为 的类型`char1`已经是`char *`。没有必要改变它。

当您取消引用时，`char1`您将发送第一个字符“h”的实际 ascii 值。然后`strlen`尝试访问地址“h”处的内存并进行段错误，因为那只是一些任意的内存位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T03:04:22.260

代替...

```
string_reverse1(*char1); 
```

...做这个：

```
string_reverse1(char1); 
```

您的字符串定义已经是指针，所以这就是您需要传入的内容。取消引用它们会给出一个根本不是内存地址的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T03:28:51.823

根据您的声明 void string_reverse1(char *string)，

```
 length = strlen(*string); //ERROR 
```

应该改为

```
 length = strlen(string); 
```

主程序应将该函数调用为

```
string_reverse1(char1);
string_reverse1(char2);
string_reverse1(char3); 
```

然后出现错误

反转[reversed_counter] = string[i];

因为您没有为您的字符分配空间（分段错误通常是由于访问未分配的内存造成的。

解决此问题的一种方法是使用

```
char* reversed = (char*) malloc(sizeof(char)*(length+1)); 
```

您仍然会遇到此代码的问题，因为

```
string = reversed; 
```

实际上并没有改变“字符串”的内容。你可以改变函数的工作方式来解决这个问题。更好的方法是更改​​“字符串”本身中的字符，而不是使用另一个数组。

# c++ - 从模板化基类模板化子类时出错

> ID：14554816
> 
> 赞同：3
> 
> 时间：2013-01-28T02:53:41.110
> 
> 标签：c++, templates, subclass, base-class

我正在尝试从模板化的基类模板化一个子类，稍后将指定该子类。但是出现错误

```
test.C: In constructor ‘myDeri<U>::myDeri()’:
test.C:30:16: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
test.C:35:5: error: expected ‘{’ before ‘~’ token 
```

仅从以下

```
#include <iostream>

using namespace std;

// Base class
template<typename U>
class myBase  // base class to be derived
{
  public:
    myBase(){}
    ~myBase() {}

};

template<typename U>
class myDeri : public myBase<U> // as i know, this should be Template derived class, Template base class case
{
  public:
    myDeri() : myBase<U> {}
    ~myDeri() {}
};

int main()
{
  return (0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T02:55:16.840

您没有正确调用模板化基类的构造函数

```
myDeri() : myBase<U> {} 
```

应该

```
myDeri() : myBase<U>() {} 
```

# java - Eclipse 不会在设备上运行 Android 应用程序

> ID：14554818
> 
> 赞同：1
> 
> 时间：2013-01-28T02:53:48.363
> 
> 标签：java, android, eclipse

我正在尝试在我的设备上从 Eclipse 运行一个 android 应用程序。这是一款 HTC Android Incredible。

但是，每当我尝试运行它时，都会弹出此错误。

```
[2013-01-27 21:46:54 - PowerSourceInternational] Failed to install PowerSourceInternational.apk on      device 'HT0CDHJ08446': Read-only file system
[2013-01-27 21:46:54 - PowerSourceInternational] com.android.ddmlib.SyncException: Read-only file system
[2013-01-27 21:46:54 - PowerSourceInternational] Launch canceled! 
```

我该如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-03T22:24:25.893

通过调用 adb kill-server 来解决此问题，然后重新启动设备，然后以通常的方式从您的开发环境（在我的情况下为 Eclipse）运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T02:55:36.530

一个可能的原因是需要打开通过*未知来源*安装应用程序的功能；`Settings -> Application -> Unknown sources`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T07:12:49.907

去放置 adb 的地方试试这个

adb shell sysrw

adb push your_app

adb 外壳同步

adb shell sysro

# android - 带有向上或向下箭头的 Android 滚动视图

> ID：14554826
> 
> 赞同：0
> 
> 时间：2013-01-28T02:55:19.407
> 
> 标签：android, xml, scrollview

如果当前视图上方或当前视图下方有更多文本，是否可以显示向上或向下箭头？在我的 Android 应用程序中，当前视图下方有更多文本并不是很明显，但我希望用户知道当前视图下方有更多文本。如何使箭头出现这个？

代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/backgnd" >

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical">

              <Button
                  android:id="@+id/awesome_constant1"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"
                  android:onClick="doSomething"
                  android:tag ="1"
                  android:text="@string/awesome_constant1" />
              <Button
                  android:id="@+id/awesome_constant2"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"
                  android:onClick="doSomething"
                  android:tag ="2"
                  android:text="@string/awesome_constant2" />
              <Button
                  android:id="@+id/awesome_constant3"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"
                  android:onClick="doSomething"
                  android:tag ="19"
                  android:text="@string/awesome_constant3" />
              <Button
                  android:id="@+id/awesome_constant4"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"
                  android:onClick="doSomething"
                  android:tag ="3"
                  android:text="@string/awesome_constant4" />
              <Button
                  android:id="@+id/awesome_constant5"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"
                  android:onClick="doSomething"
                  android:tag ="10"
                  android:text="@string/awesome_constant5" />
              <Button
                  android:id="@+id/awesome_constant6"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"
                  android:onClick="doSomething"
                  android:tag ="7"
                  android:text="@string/awesome_constant6" />
              <Button
                  android:id="@+id/awesome_constant7"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"
                  android:onClick="doSomething"
                  android:tag ="15"
                  android:text="@string/awesome_constant7" />
              <Button
                  android:id="@+id/awesome_constant8"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"
                  android:onClick="doSomething"
                  android:tag ="13"
                  android:text="@string/awesome_constant8" />
              <Button
                  android:id="@+id/awesome_constant9"
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"
                  android:onClick="doSomething"
                  android:tag ="16"
                  android:text="@string/awesome_constant9" />
        </LinearLayout>

    </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:06:28.047

您可以覆盖 onScrollChanged ，它可以告诉您您的内容是否在屏幕之外在那里您可以

```
@Override
protected void onScrollChanged(int l, int t, int oldl, int oldt) {

       View view = (View) getChildAt(getChildCount() - 1);
       int diff = (view.getBottom() - (getHeight() + getScrollY()));
       if (diff > 0) { //then not at bottom

       }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T03:01:59.063

通常解决这个问题的方法就是在滚动视图上有一个阴影或**淡入淡出的边缘**，默认情况下应该启用。您可以通过`android:requiresFadingEdge`在 XML 中使用来设置属性。

![Fading edge](../Images/5f75e245dd63a78b86dd4ebbdea989cb.png)

If you want arrows then you will have to overlay them yourself by adding two images (for example, in a `FrameLayout` or something); there is nothing really built in.

# c# - CreateIfNotExists() 它不会创建上下文的表吗？

> ID：14554828
> 
> 赞同：0
> 
> 时间：2013-01-28T02:55:22.177
> 
> 标签：c#, entity-framework, ef-code-first

我试图在实体框架中创建一个自定义初始化程序：

```
 public void InitializeDatabase(DataSourceContext context)
    {
        if (context.Database.Exists())
        {
            try
            {
                if (!context.Database.CompatibleWithModel(true))
                {
                    context.Database.Delete();
                    context.Database.Create();

                }
                else
                {
                    context.Database.Create();
                }
            } 
```

但我得到这个错误：

> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：对象名称“dbo.SiteSources”无效。

我假设是因为即使建立了数据库连接，`sitesource`也没有创建表。如果我只运行初始化程序，它本来可以工作的`CreateDatabaseIfNotExists`。

# python - 如何通过继承避免 ModelForms 中的代码重复

> ID：14554837
> 
> 赞同：1
> 
> 时间：2013-01-28T02:56:30.517
> 
> 标签：python, django, inheritance, django-forms

好的，所以我有 UserUpdateForm 和 RegistrationForm。目前每个都有这个功能：

```
def clean_email(self):
    email = self.cleaned_data.get('email')

    if email and User.objects.filter(email=email).exclude(pk=self.instance.id).count():
        raise forms.ValidationError('Email already in use.')
    return email 
```

我想知道避免这种重复的理想方法是什么。

请指教。

** 更新 **

如果我需要调用父函数但所有一些东西，说我有这个怎么办：

```
def clean_email(self):
    email = self.cleaned_data.get('email')

    if email and User.objects.filter(email=email).exclude(pk=self.instance.id).count():
        raise forms.ValidationError('Email already in use.')

    ### THIS BIT IS ONLY NEEDED IN ONE OF THE CHILD FORMS ###
    # Check whether the email was change or not
    if self.instance.email != email:

        # To not change the email in our database until the new one is verified
        return self.instance.email
    ###

    return email 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:07:15.357

使用信号例如：

```
 models.py

 @receiver(pre_save, sender=User)
 def User_pre_save(sender, **kwargs):
     email = kwargs['instance'].email
     username = kwargs['instance'].username

     if not email: raise ValidationError("email required")
     if sender.objects.filter(email=email).exclude(username=username).count(): raise ValidationError("email is already exist") 
```

视图.py

```
 def view_name(request):
     try:
          .......
     except ValidationError, e:
        message_dict = e.update_error_dict({})
        state = message_dict[NON_FIELD_ERRORS] 
 return render(request, 'page.html', {'state':state}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T03:22:00.537

您可以创建一个具有该功能的基本表单，然后让两种表单都扩展该功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T04:20:57.877

从基本形式继承（如其他答案所示），或者由于该形式是从您的模型派生的，您可以直接将其放入[模型清理](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#interaction-with-model-validation)中。这种方法的唯一问题是它每次都会访问数据库。只是向您展示选项。

> ...在进行任何唯一性检查之前，将调用模型的 clean() 方法。有关模型的 clean() 挂钩的更多信息，请参阅验证对象。

```
class MyModel(models.Model):
   # ... your model
   def clean(self):
        if self.email and User.objects.filter(email=self.email).exclude(pk=self.id).count():
        raise ValidationError('Email already in use.') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T07:23:31.357

扩展 msc 的答案，创建一个基本表单并拥有`UserUpdateForm`并`RegistrationForm`扩展您的基本表单。

```
class YourBaseForm(ModelForm):

    def clean_email(self):
        email = self.cleaned_data.get('email')

        if email and User.objects.filter(email=email).exclude(pk=self.instance.id).count():
            raise forms.ValidationError('Email already in use.')
        return email

class UserUpdateForm(YourBaseForm):

    # ....add unique fields or methods here

class RegistrationForm(YourBaseForm):

    # ....add unique fields or methods here 
```

该`clean_email`方法现在可以在`UserUpdateForm`和`RegistrationForm`对象上使用。

有关表单继承的更多信息，请查看[文档。](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#form-inheritance)

更新：

如果您需要更改子类中的方法，那么您可以覆盖它，但包括对[super](http://docs.python.org/2/library/functions.html#super)方法的调用，`clean_email`如下所示 -

```
UserUpdateForm(YourBaseForm):

    def clean_email(self):
        email = super(UserUpdateForm, self).clean_email()
        if self.instance.email != email:
            return self.instance.email
        return email 
```

# r - 混合数据、面板数据和纵向数据有什么区别？

> ID：14554843
> 
> 赞同：1
> 
> 时间：2013-01-28T02:58:39.750
> 
> 标签：r, economics

我不明白混合数据、面板数据或纵向数据之间的区别。最近，我正在研究 boost 技术并学习`R`包`GMMBoost`：基于似然的 Boosting for Generalized mixed models。这个包正在处理混合数据。我不确定这个包是否对面板数据也有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:04:20.163

这是一个流行的问题。通常计量经济学的人称其为重复测量面板数据，但生物统计学的人称其为纵向数据。两者之间的区别可以是，面板数据的观察时间点对于所有受试者（例如第 1 年、第 2 年和第 3 年）可能是固定的和共同的，但可以是随机的（例如，对于受试者 1 的第 1 个月和第 3 个月，但第 2 个月和 5 用于主题 2) 用于纵向数据。

我没有听说过“混合数据”这个词，但“混合模型”是指包含固定和随机效应的模型。

# ios - 什么是“offset”和“sourceColorRect”键texturepacker pList 模式？

> ID：14554846
> 
> 赞同：0
> 
> 时间：2013-01-28T02:59:11.060
> 
> 标签：ios, objective-c, plist, sprite-sheet

我正在编写一个 .NET 服务来提供与纹理打包器模式匹配的数据，[以](http://www.codeandweb.com/texturepacker)使 iOS 开发人员可以轻松使用我生成的精灵表。这是一个基本节点（我还没有找到文档）：

```
 <dict>
            <key>frame</key>
            <string>{{449,767},{139,117}}</string>
            <key>offset</key>
            <string>{0,0}</string>
            <key>rotated</key>
            <true/>
            <key>sourceColorRect</key>
            <string>{{0,0},{139,117}}</string>
            <key>sourceSize</key>
            <string>{139,117}</string>
        </dict> 
```

除了架构中明显的冗余之外，还有“框架”，这是目标矩形吗？

什么是 sourceColorRect？如果这只是源，为什么不这样称呼它并摆脱 sourceSize，因为那是一种冗余？

另外，什么是抵消？这就像一个注册点的事情吗？如果我们不需要原点坐标信息，我可以忽略它吗？

似乎理想情况下这个列表看起来像

```
 - frame (but is this really the destRect?)
    - sourceRect
    - destRect
    - rotated
    - offset 
```

也许只给我自己的 pList 提供简化的数据和 iOS 开发人员将 image_name 确定为键所需的准系统并忘记什么是“框架”会更容易。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T07:11:31.750

首先：格式不是我发明的——它是 cocos2d 可以读取的。我知道有一些冗余——但如果不改变 cocos2d 就无法改变。

**frame:** {{x,y},{width,height}} 那是图像在精灵表中的位置。

**偏移量：**如果你有修剪过的精灵，那是原始精灵和修剪过的精灵之间的偏移量。在你的情况下，你可以很容易地忽略它

**旋转：**如果精灵被旋转了 - 猜你也可以省略它

**sourceColorRect：**原始精灵的一部分。仅在修剪时才重要

**sourceSize：**未修剪精灵的原始大小

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-22T01:02:11.823

![精灵表](../Images/594a9cd58c4764ab6a5f0749d5b3ef8f.png)

右键单击并选择`Open Image In New Tab`，以查看更大的图片。

尖端：

1.  无论是否相同，您都会得到**相同** 的结果。`frame.w``frame.h``rotated`

# php - 它没有将数据插入数据库

> ID：14554847
> 
> 赞同：6
> 
> 时间：2013-01-28T02:59:33.090
> 
> 标签：php, jquery, html, mysqli

我想将数据插入`Image_Question`表中。但它不会在`Image_Question`表中执行插入。

我收到两个错误：

*   注意：未定义的偏移量：0 in ... 在第 305 行
*   注意：未定义的偏移量：3 in ... 在第 305 行

这是您可以使用的应用程序：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/InputTest.php)

要使用应用程序查看正在发生的事情，请执行以下操作：

1.  单击`Add Question`按钮两次以附加两个文件输入

2.  现在一次上传一个文件，但要这样做。在第 1 行的文件输入中上传一个文件，然后在第 2 行上传一个文件，然后在第 1 行再次上传文件，最后在第 2 行上传文件。

下面是mysqli代码：

```
// Prepare your statements ahead of time
$questionsql = "INSERT INTO Question (QuestionNo) VALUES (?)";
if (!$insert = $mysqli->prepare($questionsql)) {
  // Handle errors with prepare operation here
  echo __LINE__.': '.$mysqli->error;
}

$imagequestionsql = "INSERT INTO Image_Question (ImageId, QuestionId)  
VALUES (?, ?)"; 

if (!$insertimagequestion = $mysqli->prepare($imagequestionsql)) { 
  // Handle errors with prepare operation here 
 echo __LINE__.': '.$mysqli->error; 
}

//make sure both prepared statements succeeded before proceeding
if( $insert && $insertimagequestion) {
  $c = count($_POST['numQuestion']);
  $question_ids = array();

  for($i = 0;  $i < $c; $i++ ) {
    $questionNo = $_POST['numQuestion'][$i];

    $insert->bind_param("i", $questionNo);

    $insert->execute();

    if ($insert->errno) {
        // Handle query error here
      echo __LINE__.': '.$insert->error;
      break 1;
    }

    $questionId = $mysqli->insert_id;

    $question_ids[$questionNo] = $questionId;
  }

  $imgresults = $_POST['imgid'];
  foreach($imgresults as $imgid => $imgvalue) { 
    $image = $imgvalue;
    $imgquesid = $question_ids[$imgid];  //LINE 305 where error is

    foreach($imgvalue as $image) {
      $insertimagequestion->bind_param("ii",$image, $imgquesid); 
      $insertimagequestion->execute();

      if ($insertimagequestion->errno) { 
        // Handle query error here
        echo __LINE__.': '.$insertimagequestion->error;
        break 2;
      }
    }
  }
  $insertimagequestion->close(); 
  $insert->close();
}

?> 
```

下面是设置演示的代码：

```
function GetFormImageCount(){ 
  return $('.imageuploadform').length + 1;
}

var qnum = 1;
var qremain = 5;

function insertQuestion(form) {   

  if (qnum > 5)
    return;

  var $tbody = $('#qandatbl_onthefly > tbody');
  var $tr = $("<tr class='optionAndAnswer' align='center'>");
  var $qid = $("<td width='5%' class='qid'></td>").text(qnum);
  var $image = $("<td width='17%' class='image'></td>"); 

  $('.num_questions').each( function() {

    var $this = $(this);

    var $questionNumber = $("<input type='hidden' class='num_questionsRow'>").attr('name',$this.attr('name')+"[]").attr('value',$this.val());

    $qid.append($questionNumber);                             

    ++qnum;    
    $(".questionNum").text(qnum);
    $(".num_questions").val(qnum);

    --qremain;
    $(".questionRemain").text(qremain);
  });

  var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target_image' onsubmit='return imageClickHandler(this);' class='imageuploadform' >" + 
    "<p class='imagef1_upload_form'><label>" + 
    "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
    "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
    "<p class='imagef1_upload_process'>Loading...<br/><img src='Images/loader.gif' /></p>" +
    "<input type='hidden' class='numimage' name='numimage' value='" + GetFormImageCount() + "' />" +
    "</p><p class='imagemsg'></p><p class='listImage'></p>" +
    "<iframe class='upload_target_image' name='upload_target_image' src='/' style='width:0px;height:0px;border:0px;solid;#fff;'></iframe></form>");   

  $image.append($fileImage);

  $tr.append($qid);
  $tr.append($image);  
  $tbody.append($tr);
}

function imageValidation(imageuploadform) {
  var val = $(imageuploadform).find(".fileImage").val();
  switch(val.substring(val.lastIndexOf('.') + 1).toLowerCase()){
    case 'gif':
    case 'jpg': 
    case 'jpeg':
    case 'pjpeg':
    case 'png':
      return true;

    case '':
      $(imageuploadform).find(".fileImage").val();
      alert("To upload an image, please select an Image File");
      return false;

    default:
      alert("To upload an image, please select an Image File");
      return false;
  }
  return false;
}

function htmlEncode(value) { return $('<div/>').text(value).html(); }

function startImageUpload(imageuploadform){
  $(imageuploadform).find('.imagef1_upload_process').show()
  $(imageuploadform).find('.imagef1_upload_form').hide();
  $(imageuploadform).find('.imagemsg').hide();
  sourceImageForm = imageuploadform;

  return true;
}

var imagecounter = 0;

function stopImageUpload(success, imageID, imagefilename) {
  var result = '';
  imagecounter++;

  if (success == 1){
    result = '<span class="imagemsg'+imagecounter+'">The file was uploaded successfully</span>';   
    $('.hiddenimg').eq(window.lastUploadImageIndex).append('<input type="text" name="imgid[]" id="'+imageID+'" value="' + imageID + '" />');
    $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" data-imageID="'+imageID+'"  data-image_file_name="' + imagefilename + '" value="'+imageID+'">Remove</button><br/><hr/></div>');
  }

  $(sourceImageForm).find('.imagef1_upload_process').hide();
  $(sourceImageForm).find('.imagemsg').html(result);
  $(sourceImageForm).find('.imagemsg').show();
  $(sourceImageForm).find(".fileImage").replaceWith("<input type='file' class='fileImage' name='fileImage' />");
  $(sourceImageForm).find('.imagef1_upload_form').show();

  var _imagecounter = imagecounter;

  $('.listImage').eq(window.lastUploadImageIndex).find(".deletefileimage").on("click", function(event) {
    jQuery.ajax("deleteimage.php?imagefilename=" + $(this).attr('data-image_file_name')).done(function(data) {
      $(".imagemsg" + _imagecounter).html(data);
    });

    var buttonid = $(this).attr('value');
    $(this).parent().remove();
    $("#"+ buttonid  +"").remove();
  });

  return true;   
}

function imageClickHandler(imageuploadform){ 
  if(imageValidation(imageuploadform)){ 
    window.lastUploadImageIndex = $('.imageuploadform').index(imageuploadform); 
    return startImageUpload(imageuploadform); 
  }
  return false;
}
</script>
</head>
<body>
  <form id="QandA" action="insertQuestion.php" method="post">
    <table id="question">
      <tr>
        <th colspan="2">
          Question Number <span class="questionNum">1</span>
          <input type="hidden" class="num_questions" name="numQuestion" value="1">
        </th>
      </tr>
    </table>

    <table id="questionBtn" align="center">
      <tr>
        <th>
          <input id="addQuestionBtn" name="addQuestion" type="button" value="Add Question" onClick="insertQuestion(this.form)" />
        </th>
      </tr>
    </table>

  </div><hr/><!-- This Divide close tag has no open tag!-->

  <table id="qandatbl" align="center" cellpadding="0" cellspacing="0" border="0">
    <thead>
      <tr>
        <th width="5%" class="qid">Question Number</th>
        <th width="17%" class="image">Image</th>
      </tr>
    </thead>
  </table>
  <div id="qandatbl_onthefly_container">
    <table id="qandatbl_onthefly" align="center" cellpadding="0" cellspacing="0" border="0">
      <tbody>
      </tbody>
    </table>
  </div>
  <div class="hiddenimg"><!-- All uploaded image file ids go here --></div>
</form>
</body> 
```

通过执行以下 var_dumps：

```
 var_dump($question_ids);
    var_dump($imgresults); 
```

我得到这些结果：

```
 array(2) { 
        [1]=> int(159)
        [2]=> int(160) 
        } 
array(2) { 
[0]=> string(3) "129"
[1]=> string(3) "130" 
} 
```

奇怪的是，imgresult 的数字从 0 开始，然后是 1，而且我不知道为什么它是字符串，它应该是一个 int。但是，如果它来自输入，我是调用 bind_param`i`还是`s`在 db 中调用它的 int？

**额外细节：**

我没有得到的是低于这个mysqli，我为答案生成了一个类似的mysqli，奇怪的是它正确地插入，即使它以0开头，就像上面的image_question插入：

```
$results = $_POST['value'];
foreach($results as $id => $value) 
{
    $answer = $value;

    $quesid = $question_ids[$id];   

    foreach($value as $answer) 
    {
        $insertanswer->bind_param("is", $quesid, $answer);

        $insertanswer->execute();

        if ($insertanswer->errno) {
            // Handle query error here
            echo __LINE__.': '.$insertanswer->error;
            break 5;
        }
    }
} 
```

var_dump($result) 显示 1 个问题的先前 var 转储：

```
array(1) { //var_dump($question_ids);
[1]=> int(171) 
} array(1) { //var_dump($imgresults);
[0]=> string(3) "130" 
} array(1) { 
[1]=> array(1) { //var_dump($results);
[0]=> string(1) "B" } } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-30T06:32:51.160

我的回答不是针对特定问题，而是针对更广泛的主题。

这是关于你做你的工作的方式。
你需要改变它。
看，你所有的问题都**很难**回答。并且变得更大。然而得到的答案更少。
它让你做绝望的事情——在问题、赏金、账户上作弊——但一切都是徒劳的。那是一条无路可走的路。

您需要改变学习方式和使用这个伟大网站的方式。
任何人都知道他们正在使用的工具是非常重要的。您必须自己编写代码，只有在真正修复时才寻求帮助。
**结果，您将理解您的代码。**这很重要 - 了解您的代码做了什么。它的每一行。因此，您将能够自己整理并修复代码。
*否则你注定要为每一个错字寻求帮助，就像在这种情况下一样。*

此外，由于您无法挖掘问题的根源，因此您必须发布大量代码以及您的问题，这使得回答变得复杂。
您的问题中有**三个独立的领域**——JavaScript、PHP 和 Mysql。而问题只属于其中之一。你必须学会​​将你的问题至少分离到这些领域的限制。
是 JS 从客户端发送错误（意外）数据吗？好了，收起所有PHP和Mysql代码，只留下JS。它将帮助 Stackoverflowers 甚至您自己调查问题。
这个数据好吗？你确定吗？打印出来并确保它完全符合您的期望。
如果没问题 - 转到 PHP 部分（**但不要忘记从问题中删除所有 JS**）。
等等。

问你的问题不是像“它没有插入”这样的一般术语，而是特定的数据流：“我期待这样的数据进入程序，但我还有另一个。”
一旦您开始使用它，您将不需要 Stackoverflow 来回答：您将能够将问题追溯到数据意外错误的地方。所以 - 你找到了错误的地方。

*运行*问题代码也很重要。并在您遇到问题的环境中运行它。
运行代码并检查实际结果比仅仅*用眼睛看代码***更有效率**。 甚至可能有一些情况只属于你的服务器而其他人不知道，使他们根本无法回答你的问题。 此外，*人类*不应该在他们的头脑中运行 PHP 代码。它可以运行几行代码，但从某种意义上说，在*精神上*运行所有代码并找到错误是不可能的。 ***这就是为什么运行代码并打印出所有值、函数结果、检查变量状态等如此重要的原因——并寻找其中的不一致之处。***

 ***当然，要使用这种技术，您必须了解哪些数据是正确的，哪些不是。
这就是为什么从头开始编写代码并自己计划如此重要的原因。
如果是**您**决定，应该从 JS 获取哪些数据 - 您可以判断它是好是坏。如果是其他人——你就陷入了死胡同，注定要再次问，让事情变得更糟。
你需要打破这个恶性循环。
这就是为什么它如此重要的原因 - 自己编写代码，而不是让别人为你做。

希望对您有所帮助，祝您学习顺利。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T23:54:02.340

使用 Firebug，我进入了 HTML，经过大量挖掘（我的意思是大量挖掘），我知道你的问题是什么。但首先让我说Your Common Sense 是对的，因为你要理解你需要自己编写的代码。

无论如何，解决方案是您需要添加一个多维数组并从 0 开始计算每一行。您需要的是这样的：

```
 var imagecounter = 0;

      var result = '';
      imagecounter++;

....

     $('.hiddenimg').append('<input type="hidden" name="imgid[' + imagecounter + '][]" id="'+imageID+'" value="' + imageID + '" />'); 
```

现在你之前做了类似的事情`gQuestion++`，这证明了我的观点，你需要开始学习代码。如果您有几个小时的空闲时间，请阅读您的代码并尝试了解正在发生的事情。它只会让你受益:)***

# multithreading - 从特定点缓冲 YouTube 视频

> ID：14554848
> 
> 赞同：0
> 
> 时间：2013-01-28T02:59:45.007
> 
> 标签：multithreading, youtube, buffer

我正在使用 YouTube API 进行一些工作，我想知道是否可以在播放的同时在一个线程中的特定点拥有一个视频缓冲区。例如，如果我从头开始观看视频，我希望在观看视频的同时从 30 秒开始缓冲。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T23:09:09.357

不，Youtube API 只允许您从视频中的当前点向前缓冲。

# phpmyadmin - PHPMyAdmin sql 查询错误 1064

> ID：14554849
> 
> 赞同：0
> 
> 时间：2013-01-28T02:59:46.827
> 
> 标签：phpmyadmin

我正在尝试运行查询脚本来创建横幅表

```
CREATE TABLE IF NOT EXISTS `tan_banners` (
`id` smallint(5) NOT NULL AUTO_INCREMENT,
`banner_tag` varchar(40) NOT NULL DEFAULT ”,
`descr` varchar(200) NOT NULL DEFAULT ”,
`code` text NOT NULL,
`approve` tinyint(1) NOT NULL DEFAULT ’0′,
PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8; 
```

但我不断得到：

```
error #1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '”, `descr` varchar(200) NOT NULL DEFAULT ”, `code` text NOT NULL, `approv' at line 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:04:36.403

`banner_tag`您在, `descr`&`approve`命令的查询中有额外的奇数引号：

```
CREATE TABLE IF NOT EXISTS `tan_banners` (
`id` smallint(5) NOT NULL AUTO_INCREMENT,
`banner_tag` varchar(40) NOT NULL DEFAULT ”,
`descr` varchar(200) NOT NULL DEFAULT ”,
`code` text NOT NULL,
`approve` tinyint(1) NOT NULL DEFAULT ’0′,
PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8; 
```

尝试这个：

```
CREATE TABLE IF NOT EXISTS `tan_banners` (
`id` smallint(5) NOT NULL AUTO_INCREMENT,
`banner_tag` varchar(40) NOT NULL DEFAULT '',
`descr` varchar(200) NOT NULL DEFAULT '',
`code` text NOT NULL,
`approve` tinyint(1) NOT NULL DEFAULT 0,
PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8; 
```

# solr - Solrj Query - 首先获取最相关的记录

> ID：14554850
> 
> 赞同：2
> 
> 时间：2013-01-28T03:00:01.420
> 
> 标签：solr, schema, solrj

我有一些文件在`Solr 4.0`. 我希望首先显示最相关的记录，然后再显示不太相关的记录。

例如，我有 3 个标题如下的文件 -

1.  迈向收入分配政策
2.  收入分配和经济政策
3.  发展中国家的收入分配政策

现在，当我查询类似的内容时`q=title:Income Distribution Policy`，

我希望第 3 号文件首先出现（因为前 3 个单词完全匹配）然后我希望第 1 号文件出现在第二个（除了“Towards”剩余的匹配项）然后我想要第 2 号文件出现（因为中间有一些词）。

我的`schema.xml`长相是这样的——

```
<types>
  <fieldType name="search" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.SnowballPorterFilterFactory" language="German2" />
    <filter class="solr.PorterStemFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.SnowballPorterFilterFactory" language="German2" />
    <filter class="solr.PorterStemFilterFactory"/>
  </analyzer>
</fieldType>
</types>

<fields>
   <field name="title" type="search" indexed="true" stored="true"/>
</fields> 
```

**编辑 1 调试输出**

```
"rawquerystring": "title:Income Distribution Policy",
"querystring": "title:Income Distribution Policy",
"parsedquery": "title:incom title:distribut title:polici",
"parsedquery_toString": "title:incom title:distribut title:polici" 
```

**编辑 2 修改了 fieldType**

我使用了以下组合，输出仍然相同。

1.  StandardTokenizerFactory - autoGeneratePhraseQueries（不存在） - PorterStemFilterFactory。
2.  StandardTokenizerFactory - autoGeneratePhraseQueries="true" - PorterStemFilterFactory。
3.  StandardTokenizerFactory - autoGeneratePhraseQueries（不存在）。
4.  StandardTokenizerFactory - autoGeneratePhraseQueries="true"。
5.  WhitespaceTokenizerFactory - autoGeneratePhraseQueries（不存在） - PorterStemFilterFactory。
6.  WhitespaceTokenizerFactory - autoGeneratePhraseQueries="true" - PorterStemFilterFactory。
7.  WhitespaceTokenizerFactory - autoGeneratePhraseQueries（不存在）。
8.  WhitespaceTokenizerFactory - autoGeneratePhraseQueries="true"。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:42:21.090

如果您不按其他任何内容进行排序，则您正在按相似性/相关性进行排序。因此，如果您没有以正确的顺序获得结果，您可能需要考虑如何分配权重以及您正在使用哪些查询解析器。

我假设您正在使用 eDismax 并在标题字段上进行提升。此外，请查看**mm**（最小匹配）和**pf**（短语字段）以进行提升。

您可能还想使用在您的 fieldType 上设置的 autoGeneratePhraseQueries 字段进行测试。

当然，查询中的**debugQuery=true**将帮助您了解正在发生的事情。您可能会发现，在您尝试读取调试输出的前几次，添加**debug.explain.structured=true可能很有用。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T00:23:57.240

我尝试使用`""`查询字符串并成功了。

喜欢 - `q=title:"Income Distribution Policy" OR title:Income Distribution Policy`。

这给了我作为文档 1、文档 3 和文档 2 的输出。不完美但足够接近。

# sql-server - 我无法插入到 SQL Server 中的表中

> ID：14554858
> 
> 赞同：1
> 
> 时间：2013-01-28T03:01:14.393
> 
> 标签：sql-server, stored-procedures, sql-update, sql-insert

我创建了一个存储过程，它有两个语句`insert`和`update`.

它得到两个参数：

```
@content as nvarchar(10),
@fieldName as int 
```

`Update`一切正常，但它不会插入到表中。语法和一切都是真的，但是当我执行时

```
Execute sp_update 432,4 
```

SQL Server 显示此错误：

> *消息 207，级别 16，状态 1，第 1 行
> 无效的列名称“向上”。
> 消息 207，级别 16，状态 1，第 1
> 行列名“字段 3”无效。*

这是我的脚本：

```
ALTER procedure [dbo].[sp_update]
    @content as nvarchar(10),
    @fieldName as int
as
   declare @ff as varchar
   set @ff = Convert(varchar,@fieldName)

   declare @f as char(7) 
   set @f = 'Field'+ @ff

   declare @sqlupdate varchar(500)
   declare @sqlinserttoChangelog varchar(500)

   set @sqlinserttoChangelog = 'Insert Into dbo.changelog (changeType, fieldname) Values ('+'up'+','+@f+')'
   Exec (@sqlinserttoChangelog)

   set @sqlupdate = 'update TableTest set ' + @f + ' = '+@Content
   Exec (@sqlupdate) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T03:02:57.153

由于您正在创建*动态 sql*，因此值应该用单引号引起来。要转义单引号，它必须加倍，例如。

```
set @sqlinserttoChangelog = 'Insert Into dbo.changelog (changeType, fieldname) Values ('''+'up'+''', '+@f+')' 
```

与`content`

```
set @sqlupdate = 'update TableTest set ' + @f + ' = '''+ @Content + '''' 
```

# email - 如何编写 html 时事通讯以与尽可能多的电子邮件客户端合作

> ID：14554865
> 
> 赞同：1
> 
> 时间：2013-01-28T03:02:20.950
> 
> 标签：email, html-table, newsletter, email-client, inline-styles

Stack Overflow 用户[普遍](https://stackoverflow.com/questions/13709664/confusion-about-css-coding-standards-for-html-email-newsletter)认为 HTML 时事通讯应该由 HTML 表格和内联样式组成，以确保尽可能多的电子邮件客户端可以处理代码。然而，一些标签，包括图像和锚点以及文本装饰和边框等属性，根据不同的电子邮件客户端呈现不一致。

在 HTML 时事通讯中应该使用和避免哪些标签、属性和属性，以确保所有电子邮件客户端都能正确阅读代码？MailChimp 用 css、id 和类来装饰它的模板。但是，例如，Gmail 会剪辑大多数 CSS。这是我当前代码的飞溅：

```
<!doctype html><html lang="en" dir="ltr">
<head>
  <meta http-equiv="content-type" charset="utf-8">
  <title>Twinkies maker threatens to liquidate</title>
  <meta content="Hostess Brands says if its striking bakers don't return to work today, it will liquidate the entire company." name="description">
  <link rel="image_src" href="http://www.mysite.com/i/logo.jpg">
  <style type="text/css">
  @media only screen and (max-width:480px){
    *[class~=stackonmobile]{width:100%!important;margin:0;display:block!important;clear:both!important}
    *[class~=hideonmobile]{display:none!important}
  }
  </style>
</head>
<body style="font-family:arial,sans-serif;color:#222;text-align:left;background-color:#fff;background:url(http://www.mysite.com/i/background.jpg) repeat-x;margin:0;padding:0"><center>

  <table cellspacing="0" cellpadding="0" border="0" style="border-spacing:0;max-width:640px;text-align:left;margin:auto">
    <tr>
      <!-- following td is included for message preview only -->
      <td style="height:0;font-size:0;color:#ffffff;text-indent:-9999px">Hostess Brands says if its striking bakers don't return to work today, it will liquidate the entire company.</td>
      <!-- // -->
    </tr>
    <tr><td align="left" style="float:left;text-align:left;vertical-align:middle"><a href="http://www.mysite.com/" style="color:#b12124;text-decoration:none"><img src="http://mysite.com/i/header-logo-on-top-of-background-image.png" width="100" height="41" border="0"></a></td><td align="right" style="height:16px;float:right;text-align:right;font-size:16px;line-height:16px;font-family:georgia,serif;color:#ffffff;font-style:italic;padding-top:10px">January 27, 2013</td></tr>

    <tr><td colspan="2" style="width:620px;padding-left:10px;padding-right:10px"><div style="height:5px;clear:both;margin-top:0;margin-bottom:14px;background:transparent url(http://www.mysite.com/i/1px-by-1px-white-spacer.jpg) repeat"></div></td></tr>

    <tr><td colspan="2" style="padding-left:20px;padding-right:20px">
    ... 
```

看到这里有什么你会做不同的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:07:10.560

Gmail 不会剪辑大多数 CSS，它与其他电子邮件客户端具有非常相似的支持。问题是它去掉了 head 和 style 标签。因此，媒体查询（响应式电子邮件设计）在 Gmail 中不起作用，因为您无法内联媒体查询。

我还没有调试过你的代码，但它看起来很适合响应式技术。注意到你有一个透明的背景设置，它不会始终如一地工作，使用 .png 的所有透明度。如果您想要背景图像，请使用[此](http://emailbg.net/). 此外，除非您尝试浮动某些东西，否则我不会在表格内使用 div。

可以在 Gmail 中使用的另一种方法是具有[max-width](http://stylecampaign.com/blog/2011/08/using-media-to-bypass-max-width/)的流体模板。对于桌面，它看起来像 600 像素（或您设置的任何值），并且在所有主要电子邮件客户端中它将是 100% 的屏幕宽度。

电子邮件客户端中 CSS 支持的最佳参考：http: [//www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

# php - 从 Mysql 获取数据并转换为 PHP 数组

> ID：14554868
> 
> 赞同：-3
> 
> 时间：2013-01-28T03:02:44.890
> 
> 标签：php, mysql, arrays

我希望在一个我认为必须很简单但我被困了一段时间的问题上得到一些帮助。

我有一个简单的 Mysql 表，其中包含 3 个字段（id、customer、sales）。我只需要查询这个表并获取一个 php 数组。

这是我的代码：

```
$query = "SELECT * FROM mysqltable";    
$result = $mysqli->query($query)) 
```

我需要编写一个代码来循环并以这种格式获取一个数组：

```
$row=array(0=>"500,200",1=>"500,300",2=>"1000,600",3=>"800,400",4=>"200,500"); 
```

所以我可以结束

```
echo json_encode($row); 
```

将不胜感激任何帮助来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:10:07.143

您可以使用 mysqli_fetch_all()

```
 mixed mysqli_result::fetch_all ([ int $resulttype = MYSQLI_NUM ] ) 
```

或者

```
 mixed mysqli_fetch_all ( mysqli_result $result [, int $resulttype = MYSQLI_NUM ] ) 
```

供参考阅读[http://php.net/manual/en/mysqli-result.fetch-all.php](http://php.net/manual/en/mysqli-result.fetch-all.php)

还有

```
<?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID LIMIT 3";
$result = $mysqli->query($query);

while($row = $result->fetch_array())
{
$rows[] = $row;
}

foreach($rows as $row)
{
echo $row['CountryCode'];
}

/* free result set */
$result->close();

/* close connection */
$mysqli->close();
?> 
```

# python - 如何从 request.GET 中检索字典列表？

> ID：14554873
> 
> 赞同：0
> 
> 时间：2013-01-28T03:03:39.323
> 
> 标签：python, django, dictionary, httprequest, http-get

如果我提出这样的请求：

```
$.ajax({
  url: '/some/url/',
  data: {
    normal_list: [1,2,3],
    dict_list: [{foo:'a'}, {bar:'b'}]
  }
}) 
```

...然后我似乎无法`dict_list`摆脱`request.GET`使用`getlist`. 这是我设置断点时看到的内容：

```
ipdb> request.GET
<QueryDict: {u'dict_list[1][bar]': [u'b'], u'normal_list[]': [u'1', u'2', u'3'], u'dict_list[0][foo]': [u'a']}>
ipdb> request.GET.getlist('normal_list[]')
[u'1', u'2', u'3']
ipdb> request.GET.getlist('dict_list[]')
[] 
```

如何`dict_list`在 django 中获取此请求的正确值？

编辑：我可以使用它`dict_list: JSON.stringify([{foo:'a'}, {bar:'b'}])`，但我希望能够以与内容无关的方式发送数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:15:36.767

```
 $.ajax({
    type: "POST",
    url: '/some/url/',
    data: {
       'normal_list[]': [1,2,3],
       'dict_list[]': [{foo:'a'}, {bar:'b'}],
       'csrfmiddlewaretoken': '{{csrf_token}}'
    }
    contentType: "application/json;charset=utf-8",
    dataType: "json",
    success: function(data) { 
       //Message here or show data
    },
    error: function(ts) { 
        //Message here
        alert(ts);         
    }
 }) 
```

# c# - BackgroundWorker 结果被清除

> ID：14554874
> 
> 赞同：1
> 
> 时间：2013-01-28T03:03:52.050
> 
> 标签：c#, backgroundworker

在我的代码中，我使用后台工作人员执行任务，并将该任务的返回值设置为 DoWorkEventArgs Result。奇怪的是，在 DoWork 事件期间，设置了 Result 并包含项目，但是当我在 RunWorkerCompleted 事件中访问结果时，有时 Result 是空的！

```
 private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            var i =  YouTubeDownloader.GetYouTubeVideoUrls(videoUrls);
            e.Result = i; //Contains items
        }

        private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
                UseWaitCursor = false;
                if (e.Error != null)
                    throw e.Error;

                List<YouTubeVideoQuality> urls = e.Result as List<YouTubeVideoQuality>; // Empty? 
```

# usb - 构建嵌入式系统

> ID：14554881
> 
> 赞同：3
> 
> 时间：2013-01-28T03:04:27.747
> 
> 标签：usb, wifi, microcontroller, rtos

我想用 USB 和 Wifi 构建一个嵌入式系统。我将使用 USB 来加载配置和代码。Wifi 将用于与其他类似系统进行通信。我还想在套接字级别进行编程，这意味着我希望 USB 和 Wifi 的驱动程序已经可用以及操作系统。因此，如果有人可以指出我可能需要引导这样一个系统的一组东西，那将非常有帮助。或者具有可以使用的 RTOS 的现有系统也很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:06:40.830

另一种选择是[OpenEmbedded](http://www.openembedded.org/wiki/Main_Page)。它使您能够自定义和构建自己的嵌入式 linux 发行版。还有一些已经用 OE 构建的发行版，例如我已经成功使用的[Ångström 发行版。](http://www.angstrom-distribution.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T21:05:02.067

[eCos](http://ecos.sourceware.org/about.html)是一个真正的 RTOS，支持 USB 和 TCP/IP。

任何 RTOS 可能遇到的一个问题是为任何特定 WiFi 设备获取设备驱动程序支持。使用通过 SPI 或 UART 接口或类似接口连接到您的嵌入式系统并具有完整的板载堆栈 的[WiFi 模块](http://www.microchip.com/pagehandler/en-us/technology/wifi)可能更简单。

同样，您可以获得[USB 串行芯片](http://www.ftdichip.com/)，避免在应用处理器上实现 USB 的复杂性和处理器负载。尤其是它避免了需要花费 2000 美元的 USB 供应商 ID。

如果您使用独立的 WiFi 和 USB 模块，那么您对 ​​RTOS 的选择会变得更加广泛，因为您不需要太多中间件，而提供线程、定时和 IPC 的简单 RTOS 内核可能就足够了。

当然，基于 Linux 的解决方案可能适合，但关键问题是 Linux 不是 RTOS，它需要大量内存资源。

WinCE/Windows Embedded Compact 是另一种选择，但又相对较大并且许可成本可能过高。它在一定程度上是实时的，因为它是确定性的，并不是特别快。

.Net Micro 可能是一种选择，但它不是实时的，虽然需要的资源少于 Linux 或 Windows Embedded Compact，但它仍然相对较大。

[QNX Neutrino](http://www.qnx.com/products/neutrino-rtos/neutrino-rtos.html#overview)可能是具有您需要的可扩展性、实时功能以及中间件和硬件支持的唯一解决方案，但许可成本可能再次令人望而却步。

# c++ - 链接 libcurl 问题

> ID：14554884
> 
> 赞同：0
> 
> 时间：2013-01-28T03:04:44.903
> 
> 标签：c++, gcc, ubuntu, g++

我正在尝试在 ubuntu 上编译一个需要 libcurl 的 C++ 项目。

我已经安装了以下软件包：

```
libcurl4-gnutls-dev 
```

运行“pkg-config --libs curl”返回：

```
-lcurl 
```

运行“curl-config --libs”返回：

```
-L/usr/lib/i386-linux-gnu -lcurl 
```

这是我的 g++ 构建命令行：

```
g++ -lboost_program_options -pthread -L/usr/lib/i386-linux-gnu -lcurl main.cpp 
```

这些是我得到的错误：

```
main.cpp:(.text+0x374): undefined reference to `curl_easy_init'
main.cpp:(.text+0x416): undefined reference to `curl_easy_setopt'
main.cpp:(.text+0x434): undefined reference to `curl_easy_setopt'
main.cpp:(.text+0x442): undefined reference to `curl_easy_perform'
main.cpp:(.text+0x450): undefined reference to `curl_easy_cleanup' 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T03:14:41.527

g ++命令中的参数顺序很重要，请尝试：

```
g++ main.cpp -L/usr/lib/i386-linux-gnu -lboost_program_options -pthread  -lcurl 
```

# javascript - 当前数字的正则表达式

> ID：14554885
> 
> 赞同：1
> 
> 时间：2013-01-28T03:04:50.347
> 
> 标签：javascript, regex

嗨，我只需要使用 JS 中的正则表达式来限制从 -9999 到 9999 的正确数字的输入。这样用户就不能输入数字，例如：

```
9-985
02564
1234- 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T03:06:26.500

```
^-?\d{1,4}$ 
```

此表达式可选地以 a 开头，`-`并且仅为 1 到 4 位数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T03:07:31.770

这个正则表达式应该工作：

```
^-?\d{1,4}$ 
```

这不允许空字符串 - 它可以是从 -9999 到 9999 的数字，包括 0。

# java - 美元符号替换不起作用Java

> ID：14554890
> 
> 赞同：1
> 
> 时间：2013-01-28T03:05:49.567
> 
> 标签：java, regex

好的，所以我一直在阅读有关`$`Java 和正则表达式等符号的帖子（很多）。但由于某种原因，每次我尝试更换它时，它都会给我一个`IndexOutOfBoundsException`.

`$`我正在尝试将以符号开头的字符串解析为整数。

当我这样做`$test`时，它给了我一个`NumberFormatException`（这就是我想要的），但是当我这样做时，`$5`它给了我另一个异常（`IndexOutOfBoundsException`），尽管我将其更改为`\0024`并添加了它后面的数字...有人介意帮助我吗？谢谢！

```
if (w.charAt(0) == '$') {
    try {
        w = w.replace("\u0024", "");
        int i = Integer.parseInt(w);
        m.appendReplacement(sb, ChatTweaks.Citrus.get("dollarIn") + "" + '\u0024' + i);
    } catch (NumberFormatException nume) {
        ChatTweaks.showMsg(ChatTweaks.prefix + "Please use numbers after your dollar signs ($)w=" + w);
        return;
    } catch (Exception ex){
        ChatTweaks.showMsg(ChatTweaks.prefix + "Unknown exception ex: " + ex + " w:" + w);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T03:22:40.213

您的替换代码对我来说很好，但是......为什么要使用正则表达式来删除第一个字符？这更简单，也同样有效：

```
w = w.substring(w.length()-1) 
```

另外，为了代码的可读性，'$' 和 "$" 很好——因为 '$' 是一个单字节字符，它应该等同于 '\u002' - 或者你有什么特殊要求？

请参阅[http://www.codinghorror.com/blog/2008/06/regular-expressions-now-you-have-two-problems.html](http://www.codinghorror.com/blog/2008/06/regular-expressions-now-you-have-two-problems.html)以半幽默的观点了解为什么 regex 可能不应该是第一件事当您尝试解决文本操作问题时会想到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T03:30:30.670

`\u0024`是美元符号的 Unicode 转义序列。您的代码正在检查美元符号 ( `w.charAt(0) == '$'`)，将其删除 ( `w = w.replace("\u0024", "")`)，然后再将其放回 ( `'\u0024' + i`)。

**编辑：**我知道这很奇怪，但我错过了实际问题。我现在明白了; Matcher.appendReplacement 抱怨，因为替换中有一个 $+number 序列，并将其视为对捕获组的引用。

这是因为*就 appendReplacement 而言不会*`\u0024`转义任何内容，因为转义序列是在编译时解析的。在运行时，源代码中写入的字符串 as的长度为**1**，其唯一字符是文字​​美元符号。（事实上​​，Unicode 转义序列几乎是 Java 编译器解析的第一件事，就在计算行数之后。例如，您可以声明一个变量，然后在代码（正则表达式甚至字符串之外）中使用它（或）） .*`"\u0024"`**`int $foo;``\u0024foo = 123;``\u0024\u0066\u006f\u006f = 123;`***

 ***要为 appendReplacement 转义美元符号，请使用反斜杠转义它。因为字符串中的转义序列是在编译时解析的，所以您还必须对反斜杠进行转义。IE，

```
m.appendReplacement(sb, ChatTweaks.Citrus.get("dollarIn") + "\\$" + i); 
```

澄清一下，在编译时，编译器会看到`"\\$"`并创建一个长度为 2 的字符串；其字符为 \ 和 $。在运行时，appendReplacement 可以看到它们并只插入一个 $。

方法[Matcher.quoteReplacement](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#quoteReplacement%28java.lang.String%29)也可以为您执行此操作，这是一个好主意，以防万一`ChatTweaks.Citrus.get("dollarIn")`还可能返回任何不应该返回的美元符号，这也会扰乱匹配器。例如，

```
m.appendReplacement(sb,
    Matcher.quoteReplacement(ChatTweaks.Citrus.get("dollarIn") + "$" + i)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T05:10:48.827

在您编码时替换和解析对我有用。`String.replace(String,String)`不会将参数视为正则表达式。如果您想将正则表达式作为参数传递，请使用`String.replaceAll(String,String)`or `String.replaceFirst(String,String)`。

`String.replaceAll`将与作为第一个参数给出的正则表达式匹配的所有模式替换为作为第二个参数给出的字符串。

`String.replaceFirst`替换与作为第一个参数给出的正则表达式匹配的第一个模式。

因此`w.replace("$", "")`，如果您想替换每个`$`登录名，请使用`w`. 在这里，`"$"`不被视为正则表达式。

或使用`w.replaceAll("\\$","")`. 这里`"\\$"`被视为正则表达式。

或者`w.replaceFirst("\\$","")`，如果您只想替换`$`字符串中的第一个，请使用。***

# oracle - 从触发器中捕获包/过程/函数名称

> ID：14554891
> 
> 赞同：4
> 
> 时间：2013-01-28T03:05:55.570
> 
> 标签：oracle, stored-procedures, plsql, triggers

我有一个表（Oracle 11g），多个包/存储过程在其上运行 DML 语句。我想使用触发器捕获在表上发布 DML 的包/过程名称并将其记录到日志记录表中。

例如：

包为表`MY_PACK.MY_PROC()`发出一个。我会设计一个触发器，它应该能够捕获发出的包/过程名称并将此信息存储在另一个表中。`insert into...``mytab``mytab``insert into..``my_tab_log`

我进行了一些搜索，发现`$$PLSQL_UNIT`并且`$$PLSQL_LINE`可以指出过程名称，但是如果在触发器中使用这些变量，则会捕获触发器名称而不是发出 DML 语句的包/过程名称。

像 -

```
CREATE OR REPLACE TRIGGER my_trg
AFTER INSERT OR UPDATE OR DELETE
ON MY_TAB
FOR EACH ROW
BEGIN
    IF INSERTING THEN
         insert into my_tab_log values('INSERTED A ROW'
                                       sysdate,
                                       $$PLSQL_UNIT); 
    END IF;
    -- This would capture Trigger name but I would like to capture `MY_PACK.MY_PROC()`
    -- which issued the insert statement
    ...
END; 
```

现在因为 $$PLSQL_UNIT 是一个条件编译指令。当您编译/重新编译 PL/SQL 代码时，它会得到解决。所以不幸的是，触发器中的 $$PLSQL_UNIT 只不过是触发器名称，并在触发器编译时解析。

我也找到了该程序`owa_util.who_called_me`，但无法弄清楚如何使用它来满足我的需求。甚至可以在不更改发出 DML 语句的实际包/存储过程的情况下实现我想要的吗？我不能修改这些程序，这是对它的严格限制，所以这不是一种选择。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T07:32:49.040

`$$PLSQL_UNIT` 只会提供包名称，而不是包中的过程名称。也是如此`who_called_me`。

`owa_util.who_called_me`是基于不可估量的 Kyte 先生编写的一个小实用程序。如果您在[此处查看他的源代码，](http://tkyte.blogspot.co.uk/2009/10/httpasktomoraclecomtkytewhocalledme.html)您将看到该例程从调用堆栈中获取其信息。因此，它提供的信息是：

*   程序所有者
*   程序名称（包或独立过程）
*   节目类型
*   电话号码

这些公认的令人沮丧的限制归结为重载：我们可以创建具有相同名称但不同签名的打包过程。因此，“过程名称”在识别哪段代码正在运行时对系统来说并不是特别有用。

无论如何，如果你想玩`who_called_me`，它需要四个输出参数，如下所示：

```
create or replace trigger my_trg 
before insert or update on my_tab
for each row
declare
  l_owner varchar2(30);
  l_name varchar2(30);
  l_line pls_integer;
  l_type varchar2(30);
begin
  owa_util.who_called_me(l_owner,l_name,l_line,l_type);
  IF INSERTING THEN
     insert into my_tab_log values('INSERTED A ROW'
                                   sysdate,
                                   l_owner||'.'||l_name); 
  END IF;
end;
/ 
```

# asp.net-mvc - 默认路由的 OnActionExecuting 中的区域名称为空

> ID：14554894
> 
> 赞同：2
> 
> 时间：2013-01-28T03:06:17.540
> 
> 标签：asp.net-mvc

我需要在 OnActionExeuting 中获取当前区域名称。我得到它如下：

```
_areaName =  ctx.RouteData.DataTokens["area"].ToString(); 
```

这适用于除默认路由（我的登录页面 - 登录）之外的所有路由。默认路由在 global.asax 中定义如下

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.Ignore("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default",
        "{area}/{controller}/{action}/{id}",
        new {area = "Home",
            controller = "UserLogon",
            action = "Login",
            id = UrlParameter.Optional
        }
    );
} 
```

区域注册如下：

```
public override string AreaName
{
    get
    {
        return "Home";
    }
}
 public override void RegisterArea(AreaRegistrationContext context)
 {
    context.MapRoute(
        "Home_default",
        "Home/{controller}/{action}/{id}",
        new {controller = "UserLogon", action = "Login", id = UrlParameter.Optional }

    );

 } 
```

我错过了什么？

# java - 如何使用递归在 Java 中构建关联数组？

> ID：14554896
> 
> 赞同：-1
> 
> 时间：2013-01-28T03:06:25.880
> 
> 标签：java, arrays, recursion

我有一个 PHP 示例用于我正在尝试执行的任务。如何使用 Java 做同样的事情？你能给我一个方向吗

```
function buildTree($array, $parent_id) {

    $arr = array();

    foreach ($array as $e) {

        if ($e['parent_id'] == $parent_id) {

            $arr[$e['id']] = array("title" => $e['title'],
                "id" => $e[$id],
                "children" => array());
            $submassive = buildTree($array, $e['id']);

            foreach ($submassive as $x) {
                $arr[$e['id']]['children'][] = $x;
            }
        }
    }

    return array_values($arr);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:25:31.147

Java 有 java.util.Map，您可以定义自己的 Node 类。

```
public class Node {
    public Integer id;
    public String title;
    public Integer parentId;
    public Node parent;
    public List<Node> children = new ArrayList<Node>();

    public Node(Integer id, String title, Integer parentId) {
        this.id = id;
        this.title = title;
        this.parentId = parentId;
    }

    public static Node buildTree(List<Something> things) {
        Map<Integer, Node> nodes = new HashMap<Integer, Node>();
        // step 1: create nodes and put them into a map.
        for (Something thing: things) {
            Node node = new Node(thing.id, thing.title, thing.parentId);
            nodes.put(node.id, node);
        }
        // Step 2: associate nodes with each other
        Node rootNode = new Node(null, "root", null)
        for (Node node: nodes.valueSet()) {
            if (node.parentId != null) {
                node.parent = nodes.get(node.parentId);
            } else {
                node.parent = rootNode;
            }
            node.parent.children.add(node);
        }
        return rootNode;
    }
} 
```

顺便说一句：您的示例代码依赖于根本不需要的递归。首先创建一个映射/字典/关联数组，然后使用此映射构建树要简单得多。

# c# - 检查 xna 中是否正在播放特定歌曲

> ID：14554897
> 
> 赞同：-2
> 
> 时间：2013-01-28T03:06:29.367
> 
> 标签：c#, xna

我想知道是否可以检查 XNA 中是否正在播放特定歌曲，我想做的是类似

```
if(stateS == "normal")
        {
            if(MediaPlayer.IsPlaying(song1)
            {
               //do nothing  
            }
            if(!MediaPlayer.IsPlaying(song1)
            {
               //play song 1 
            }
            spriteBatch.Draw(norm, pos, Color.White);
        }
        if(stateS == "fast")
        {
            if(MediaPlayer.IsPlaying(song2)
            {
               //do nothing  
            }
            if(!MediaPlayer.IsPlaying(song2)
            {
               //play song 2
            }
            spriteBatch.Draw(fast, pos, Color.White);
        }
        if(stateS == "slow")
        {
            if(MediaPlayer.IsPlaying(song3)
            {
               //do nothing  
            }
            if(!MediaPlayer.IsPlaying(song31)
            {
               //play song 3
            }
            spriteBatch.Draw(slow, pos, Color.White);
        } 
```

可悲的是，我还没有找到任何方法来做到这一点，因为我没有找到查看是否正在播放特定歌曲的方法。任何建议或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:13:57.247

您可以通过使用时间跨度字典标记每个声音开始播放的时间来跟踪所有声音：

```
Dictionary<string, TimeSpan> SoundStartTimeDic; 
```

每次声音开始播放时填充字典的键值对，并以它的名称作为键，当前游戏时间作为值，如下所示：

```
SoundStartTimeDic[mySound.Name()] = gameTime; 
```

然后你可以看看当前时间减去声音开始时间的差是否大于声音的持续时间：

```
if (gameTime.TotalMilliseconds -
     SoundStartTimeDic[mySound.Name()].TotalMilliseconds >
     mySound.Duration.TotalMilliseconds)
{ /* yes, the sound has played already */ } 
```

* * *

所以我想你想在结束后再次播放你的声音。而且您`MediaPlayer`出于某种原因正在使用。

您可以使用`System.Media.SoundPlayer`：

```
SoundPlayer sound = new SoundPlayer("path");
sound.PlayLooping(); 
```

或者以 XNA 方式进行：

```
SoundEffect bgmusic;
bgmusic = Content.Load<SoundEffect>("path");
SoundEffectInstance instance = bgEffect.CreateInstance();
instance.IsLooped = true;
bgEffect.Play(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T00:25:46.997

使用我命名为 Playing 的另一个 Song 变量，我将我希望播放的歌曲设置为它，然后播放它。例子：

```
 if (stateS == "normal")
        {
            if (!MediaPlayer.Equals(playing, normS))
            {
                playing = normS;
            }

            spriteBatch.Draw(norm, pos, Color.White);
        }
        else if (stateS == "fast")
        {
            if (!MediaPlayer.Equals(playing, fastS))
            {
                playing = fastS;
            }
            spriteBatch.Draw(fast, pos, Color.White);
        }
        else if (stateS == "slow")
        {
            if (!MediaPlayer.Equals(playing, slowS))
            {
                playing = slowS;
            }
        } 
```

# java - 我可以在 JAVA 中使用 dll 文件吗？

> ID：14554898
> 
> 赞同：1
> 
> 时间：2013-01-28T03:06:30.367
> 
> 标签：java

有没有办法可以在java中调用和使用dll文件中的函数？我一直在寻找一种更好的方法来做到这一点，并且大多数时候它都指出我要使用 JNI。但我的问题是，它将使用 c++。我想知道是否还有另一种方法可以做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T03:11:32.040

JNI 就是这样做的。但是，您可以使用生成器工具来加快速度，例如：

*   [胶水](http://jogamp.org/gluegen/www/)
*   [痛饮](http://en.wikipedia.org/wiki/SWIG)

您还可以查看 Java 的 Native Access 库：

*   [JNA](http://en.wikipedia.org/wiki/Java_Native_Access)（在[这里](https://github.com/twall/jna)找到）

# ios - 只使用实例变量而不是属性可以吗

> ID：14554899
> 
> 赞同：2
> 
> 时间：2013-01-28T03:06:30.897
> 
> 标签：ios

我有一个实例变量 apiEndpoint ，我不想从除 init 之外的任何地方设置它，我只希望它对类是私有的。如果我使用实例变量而不是属性可以吗？

ApiWrapper.h

```
#import <Foundation/Foundation.h>

@interface ApiWrapper : NSObject
{
    NSString *apiEndpoint;
}

- (void) initWithApiEndpoint:(NSString *) newApiEndpoint;

+ (NSString *)getApiEndpoint:(NSString *) storeUrl;
+ (NSString *)getApiEndpointWithoutIndexDotPHP:(NSString *) storeUrl;
@end 
```

ApiWrapper.m

```
#import "ApiWrapper.h"

@implementation ApiWrapper
- (void) initWithApiEndpoint:(NSString *) newApiEndpoint;
{
    apiEndpoint = newApiEndpoint;
}
+ (NSString *)getApiEndpoint:(NSString *) storeUrl
{
    if (![storeUrl hasPrefix:@"http://"] && ![storeUrl hasPrefix:@"https://"])
    {
        NSLog(@"%@ missing http", storeUrl);
    }

    return nil;
}

+ (NSString *)getApiEndpointWithoutIndexDotPHP:(NSString *) storeUrl
{

}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T03:19:43.737

是的，可以使用 ivars。但是，属性的​​优点在于它们为您创建了 getter 和 setter，它们不仅仅是读取或写入变量值，还可以包括对象保留管理、线程安全读取和写入等内容。

有一种方法可以通过在类的 .m 文件中的匿名类扩展中声明它来创建“私有属性”。请注意，您仍然必须在 init 和 dealloc 方法中使用支持该属性的 ivar。您的代码将如下所示：

```
#import "ApiWrapper.h"

@interface ApiWrapper ()
@property (strong,nonatomic) NSString* apiEndpoint;

@end

@implementation ApiWrapper

- (id) initWithApiEndpoint:(NSString *) newApiEndpoint;
{
    self = [super init]
    if ( self ) {
        _apiEndpoint = newApiEndpoint;
    }

    return self;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T03:48:50.160

在这里查看我的答案：
[我应该在接口中声明变量还是在 Objective-C 弧中使用属性？](https://stackoverflow.com/questions/14236799/should-i-declare-variables-in-interface-or-using-property-in-objective-c-arc/14236931#14236931)

总结版：

*   尽可能声明属性
*   不要单独声明 iVar
*   不要@synthesize
*   在您的 .h 文件中找到尽可能少的属性
*   在 .m 文件的类扩展中找到尽可能多的属性

我要补充的唯一一点 - 如果出于任何原因您*要*使用 iVars，*请*使用像 _leading _underscores 这样的明确约定，以便我们在阅读您的代码时知道您在做什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T03:32:48.300

我同意 claireware 的建议，即在您的私有类扩展中使用私有属性。另一种方法，如果您希望其他类能够看到它，但不能改变它，则将其定义为只读属性：

在 ApiWrapper.h 中：

```
#import <Foundation/Foundation.h>

@interface ApiWrapper : NSObject

@property (nonatomic, strong, readonly) NSString *apiEndpoint;

- (id) initWithApiEndpoint:(NSString *) newApiEndpoint;

+ (NSString *)getApiEndpoint:(NSString *) storeUrl;
+ (NSString *)getApiEndpointWithoutIndexDotPHP:(NSString *) storeUrl;

@end 
```

在 ApiWrapper.m 中：

```
#import "ApiWrapper.h"

@interface ApiWrapper ()

@property (nonatomic, strong) NSString *apiEndpoint;

@end

@implementation ApiWrapper

- (id) initWithApiEndpoint:(NSString *) newApiEndpoint;
{
    self = [super alloc];
    if (self)
    {
        _apiEndpoint = newApiEndpoint;
    }

    return self;
}

@end 
```

两个注意事项：

1.  该`init...`方法不应有`void`返回类型。`init`方法应该总是返回一个初始化的对象。

2.  如果您使用属性，请记住[不要在 Initializer Methods 和 dealloc 中使用](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-SW6)访问器方法。

* * *

显然，如果您真的想使用 ivar（我同意其他人的观点，您可以通过属性实现您想要的），它只是：

ApiWrapper.h：

```
#import <Foundation/Foundation.h>

@interface ApiWrapper : NSObject

- (id) initWithApiEndpoint:(NSString *) newApiEndpoint;

+ (NSString *)getApiEndpoint:(NSString *) storeUrl;
+ (NSString *)getApiEndpointWithoutIndexDotPHP:(NSString *) storeUrl;

@end 
```

在 ApiWrapper.m 中：

```
#import "ApiWrapper.h"

@interface ApiWrapper ()
{
    NSString *apiEndpoint;
}
@end

@implementation ApiWrapper

- (id) initWithApiEndpoint:(NSString *) newApiEndpoint;
{
    self = [super alloc];
    if (self)
    {
        apiEndpoint = newApiEndpoint;
    }

    return self;
}

@end 
```

# ios - 在 Objective-C 中调用委托函数

> ID：14554900
> 
> 赞同：1
> 
> 时间：2013-01-28T03:06:48.500
> 
> 标签：ios, objective-c

在`iOS`我创建的应用程序中`XCode`，我有一个主界面和一个函数委托：

```
- (BOOL)onUdpSocket:(AsyncUdpSocket *)sock didReceiveData:(NSData *)data withTag:(long)tag fromHost:(NSString *)host port:(UInt16)port
{
    NSString *infoString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];     
    return NO;
} 
```

..我正在使用这个函数来监听传入的数据包。它第一次按预期运行，但在设备锁定/解锁序列之后，即在`applicationWillEnterForeground`调用之后，它似乎停止工作。

我怎么能叫它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:01:25.027

很明显，您不会收到任何数据包，因为当您锁定设备时，应用程序进入后台模式，在后台模式下，您的应用程序无法接收来自互联网的任何数据包。您的问题有两种解决方案：

1.  您必须使用数据包确认方法维护客户端-服务器数据包的发送/接收。当应用程序到达后台时，您的应用程序不会将 ack 发送到服务器，因此一旦应用程序再次请求，服务器就会知道发送数据。要让应用再次发送请求，请在 中再次发出请求`applicationDidBecomeActive`。

2.  只有当您的应用程序属于以下类型时，这种方法才有效 -

    *   音乐播放器应用
    *   导航应用
    *   网络电话应用
    *   报亭应用
    *   带有外部附件的应用程序

在这种情况下，您的应用甚至可以在后台发送/接收数据。有关更多详细信息，请查看此[链接](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

# events - 为什么淘汰赛触发 afterRender 事件两次？

> ID：14554901
> 
> 赞同：2
> 
> 时间：2013-01-28T03:06:59.027
> 
> 标签：events, knockout.js

我有一个完美加载的淘汰赛模板，但是 afterRender 事件触发了两次。我认为这是我的数据对象中的一些问题，导致该函数被意外调用一次，一次被 afterRender 调用，但我已将其减少为警报，它仍然被调用两次。

这是html代码...

```
<body>
 <div id="control-wrap" data-bind="template: { name: 'control_bar', data: App.Controls, afterRender: function(){ alert('test');} }"></div>
 <div id="map_canvas" style="width:100%; height:100%"></div>
 <div id="info-window-container" data-bind="template: { name: 'info-yacht-racing', foreach: App.Transponders.transponders, afterRender: App.Tracker.infoWindowInit}"></div>
 <div id='notice-overlay'></div>
</body> 
```

最大的问题是我不知道在哪里解决这个表单？任何的想法？我可以使用 Chrome 检查器来跟踪触发事件的原因吗？谷歌地图渲染器会搞砸吗？带有模板的 foreach 会导致父模板调用多次触发吗？

白原子

更新：奇怪继续......如果我将模板设为空白，它只会触发一次。但是如果有任何内容（即使只是一个'.'），afterRender 会触发两次。不，这是奇怪的部分..一次是在内容出现在页面上之前，第二次是之后....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:17:08.957

找到了....

[https://github.com/fazzamar/Knockout.js-External-Template-Engine/commit/5b053acd0465cd5c98b947d97cbd4d2e675c9f52](https://github.com/fazzamar/Knockout.js-External-Template-Engine/commit/5b053acd0465cd5c98b947d97cbd4d2e675c9f52)

这似乎是外部模板引擎中的错误。拿出一个自己。参考，问题就解决了。

感谢 RP 的帮助，您肯定让我对代码进行了一些更简化 - 这让我解决了它。

干杯!

# c# - JavaScriptConvert.DeserializeObject 在我运行时会从arraylist 中删除一个元素吗

> ID：14554902
> 
> 赞同：0
> 
> 时间：2013-01-28T03:07:02.330
> 
> 标签：c#

我有以下代码从arraylist反序列化一个元素，我不确定DeserializeObject方法在反序列化时是否也会从arraylist中删除该元素？每次序列化后是否需要添加 recvJsonBuffer.RemoveAt(0) ？

```
 List<Json> entities = (List<Json>)JavaScriptConvert.DeserializeObject(recvJsonBuffer[0].ToString(), typeof(List<Json>));

                    foreach (Json obj in entities)
                    {
                        trace_idBuffer = obj.traceid;
                        plain_tagidBuffer = obj.Plain_tagID;
                        national_codeBuffer = obj.National_Code;
                        country_codeBuffer = obj.Country_Code;
                        res_codeBuffer = obj.Res_Code;
                        exp_codeBuffer = obj.Exp_Code;
                        reader_idBuffer = obj.Device;
                        data_sourceBuffer = obj.Datasource;
                        //  recvJsonBuffer.RemoveAt(0);
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:25:13.720

它不应该，如果`DeserializeObject`我会......对设计师非常生气。

迭代一个可枚举应该就是这样而不是操纵它。

像在代码中一样删除元素`RemoveAt`也是一个坏主意。

它从您正在处理的列表/数组中删除一个项目，类似于从您坐的树上切割树枝......

为什么要删除它？如果您不再使用它，请让 GC 摆脱它。移除它不会加速这个过程，但会让一切都敞开，让你在脚下射击（如果你在falling_off_the_branch-thing中幸存下来）

# qt - 最小化窗口后冻结的小部件

> ID：14554903
> 
> 赞同：1
> 
> 时间：2013-01-28T03:07:06.600
> 
> 标签：qt, user-interface, qt5, qmainwindow

我正在将 Qt5 Creator 用于应用程序，并在主窗口的构造函数中调用`this->setWindowState(Qt::WindowMaximized)`. 当窗口最初最大化时，单选按钮和复选框工作正常（即在选中和未选中之间轻松切换）。

但是，如果我将其最小化并最大化，那么单选按钮和复选框似乎会冻结并且不能自由切换。但如果我再次恢复，一切都会好起来的。

我尝试`this->update`在单选按钮和复选框的插槽中包含 a ，但这不起作用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-04T22:10:15.760

我遇到了类似的问题

**环境：** Windows7 + Qt5.3 + 无框QMainWindow

**我所做的：**最小化窗口，`QMainWindow::showMinimized`然后再次显示。

**发生了什么：**窗口停止重绘。它看起来冻结了。

我正在调试它并发现以下内容：

`Qt::WA_Mapped`从 QMainWindow 中删除最小化窗口属性后（您可以将断点设置为`setAttribute_internal`in`qwidget.cpp`以检查它）。但是这个属性在显示窗口后没有再次设置。这导致条件不满足，导致`if (discardSyncRequest(tlw, tlwExtra))`未清除。在 Qt 更新系统的其他部分，这导致没有进行其他渲染。`QWidgetBackingStore::sync``dirtyWidgets`

**我做的解决方法：**在窗口恢复时手动子类化`QMainWindow`并设置属性（处理changeEvent）：`Qt::WA_Mapped`

```
void MainWindow::changeEvent(QEvent *event) {
  if(event->type() == QEvent::WindowStateChange) {
    if(!isMinimized()) {
      setAttribute(Qt::WA_Mapped);
    }
  }
} 
```

这对我很有效。正确的解决方案可能是修复 Qt 中的错误。

**更多关于这个问题**

我在 Qt 项目历史中发现了类似的错误（标记为已关闭）： [QTBUG-34147](https://bugreports.qt.io/browse/QTBUG-34147)

Qt论坛中也有类似的问题：[最小化无框窗口...](http://qt-project.org/forums/viewthread/33570)

我在提到的条件旁边发现了这个评论`QWidgetBackingStore::sync`

```
// If the top-level is minimized, it's not visible on the screen so we can delay the
// update until it's shown again. In order to do that we must keep the dirty states.
// These will be cleared when we receive the first expose after showNormal().
// However, if the widget is not visible (isVisible() returns false), everything will
// be invalidated once the widget is shown again, so clear all dirty states. 
```

似乎 Qt 内核中存在一个错误（可能提到了 QTBUG-34147）已解决，但仍然存在一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:54:54.860

当您使用时，`this->setWindowState(Qt::WindowMaximized);`您可能会覆盖窗口的其他状态属性。特别是，您正在删除`Qt::WindowActive`. 所以使用任何一个

```
this->setWindowState(this->windowState() | Qt::WindowMaximized);
this->setWindowState(Qt::WindowMaximized | Qt::WindowActive); 
```

但我想知道你为什么要玩弄窗口状态。你不能`show()`在构造函数中使用来使你的窗口可见吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:10:45.760

试试`this->showMaximized()`吧。窗口状态可用于执行任何其他方法无法完成的棘手事情，但如果其他方法提供所需的功能（在这种情况下为 QWidget::showMaximized()），请改用它。

# html - Img 的最大高度不考虑父母的尺寸

> ID：14554908
> 
> 赞同：26
> 
> 时间：2013-01-28T03:07:42.863
> 
> 标签：html, css

我`img`在液体中有一个元素`div`。该 img 已`max-height`设置为 100%。因此，如果图像比 div 高，它应该被渲染为与 div 一样高。

.png 文件的原始大小为 200x200。在我的浏览器中，div 显示为 284x123。因此，img 应以 123x123 渲染，以保持其纵横比。

但是，img 打破了 div 的界限，仍然显示为 200x200。我似乎无法弄清楚为什么会这样。

这发生在 Chrome 上，但不是在 Firefox 上（我上次尝试）。

[您可以在此处](http://paginas.fe.up.pt/~ei07171/test/)查看当前状态( [http://paginas.fe.up.pt/~ei07171/test/](http://paginas.fe.up.pt/~ei07171/test/) )。如果您将鼠标悬停在图片的**左侧**，您会看到一个灰色箭头，即我所说的 .png。右侧的箭头是一个 SVG 文件并且可以正常工作。

**编辑：**我创建了一个单独的 jsfiddle ( [http://jsfiddle.net/dcastro/3Ygwp/1/](http://jsfiddle.net/dcastro/3Ygwp/1/) )，其中 img 的 max-height 似乎工作正常.. 我找不到我的项目是什么导致它不工作。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-28T04:32:37.013

我想到了。要使元素的最大高度起作用，它的父元素之一必须`height`定义一个属性（显然以固定单位，如 px，而不是百分比）。

从[w3c 规范](http://www.w3.org/TR/CSS2/visudet.html#min-max-heights)：

> 该百分比是相对于生成框的包含块的高度计算的。如果包含块的高度没有明确指定（即，它取决于内容高度），并且该元素不是绝对定位的，则百分比值被视为'0'（对于'min-height'）或'none' （对于“最大高度”）。

由于我的 img 父级都没有定义固定高度，因此我不得不将 img 限制为最大宽度。

**编辑**：另外，webkit 似乎有点过于字面化了：[https ://stackoverflow.com/a/3808701/857807](https://stackoverflow.com/a/3808701/857807)

我使用了该线程中提供的解决方法，并使用了`position: absolute; max-height: 100%; top: 0`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-12-18T00:37:56.527

我也遇到了这个问题，我设法使用`vh`CSS 中的单位在不同的浏览器中获得一致的高度，例如`max-height: 5vh;`视口高度的 5%。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-24T11:01:34.127

如果您仍然希望容器基于 % 而不是 px，则可以将容器`display: flex`和图像

```
object-fit: contain;
max-width: 100%; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T03:17:25.273

尝试将宽度和高度属性添加到您的 img

还要在 HTML 中设置自然尺寸以帮助浏览器呈现。

HTML

```
<img src="img/mywine/2high.png" width="123px" height="123px"> 
```

CSS

```
 img{
       max-width: 100%
       height: auto;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-26T22:28:18.437

根据@dcastro 的回答（我完全同意），任何父元素都必须有一个固定值（比如 px ）而不是一个相对值（比如 % ）。所以，一个使用 Jquery 的小技巧，它只允许使用相对值

```
<div id="E_slick" style="height: 75%">
    <img class="eve_img" src="myfile.jpg" style="max-width: 100%; max-height:100%"> 
</div> 
```

所以，诀窍是获取引擎盖高度并将其设置为 img，为了使其更容易，让我们使用 jQuery：

```
$('.eve_img').height( $("#E_slick").height() ) 
```

# php - AJAX 可能的冲突

> ID：14554909
> 
> 赞同：0
> 
> 时间：2013-01-28T03:07:44.813
> 
> 标签：php, jquery, ajax

我正在使用 AJAX 在我的 Wordpress 主题选项页面上设置的页面选项卡之间平滑导航：

![主题选项页面](../Images/1f1b7956963e09707fe23858d0d0ec68.png)

选项卡运行良好，只有页面中间的内容被更改，这是我想要的方式.....但是由于 AJAX 在每个页面上仅加载部分 HTML，我的媒体上传按钮不再工作（至少我相信这是问题的原因）。我想知道是否有办法重置每个页面中的脚本，以便我的媒体上传器在每次 AJAX 调用后都能正常工作。

这是我处理 AJAX 选项卡导航的代码：

```
jQuery.noConflict();

jQuery('.nav-tab').live('click', function(e){ 
   e.preventDefault();
   var link = jQuery(this).attr('href'); 

jQuery('.page-form').fadeOut(100).load(link + ' .page-form > *', function() { 
jQuery('.page-form').fadeIn(100).load(link + ' .page-form > *', function() {
  });
});
}); 
```

更新：为媒体上传添加的代码：

```
<tr>
    <td>
        <label for="upload_image">
     <input style="float:left; width:80%" id="upload_image" type="text" name="upload_image" value="<?php echo $options['upload_image']; ?>" />
     <input style="float:right" id="upload_image_button" type="button" value="Upload Image" />

    <br/>
        </label>
<div id="image-holder">
   <img id="upload_image" name="upload_image" src="<?php if ($options['upload_image'] != "" ) { echo $options['upload_image']; } ?>" />
</div>

</td>

<td></td>

</tr> 
```

这是我用来调用图像上传器的 JQUERY

```
jQuery(document).ready(function() {

jQuery('#upload_image_button').click(function() {
formfield = jQuery('#upload_image').attr('name');
tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true');
return false;
});

window.send_to_editor = function(html) 
{

imgurl = jQuery('img',html).attr('src');
jQuery('#upload_image').val(imgurl);
imgsrc = '<img src="'+imgurl+'">';
jQuery('#image-holder').html(imgsrc);
tb_remove();
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:55:18.033

改变

```
jQuery('#upload_image_button').click(function() { 
```

至

```
jQuery(document).on('click', '[id=upload_image_button]', function() { 
```

使用相同的方法并不理想`id`（实际上您应该看看是否可以找到解决方法），但这应该使上传按钮上的点击事件即使是异步加载也可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T03:15:27.767

您有 2 个带有 的元素`id="upload_image"`，即使这些元素隐藏在页面上，也会导致意外结果。

# linux - 如果你在 shell 中运行 'exec ls' 会发生什么，为什么？

> ID：14554910
> 
> 赞同：4
> 
> 时间：2013-01-28T03:07:47.677
> 
> 标签：linux, shell, unix, command-prompt

问题是标题。我不明白为什么在执行“ls”后终端会立即关闭。Linux shell 是这样的：

> 1.while (1) {
> 2\. char *cmd = read_command();
> 3\. int child_pid = fork();
> 4\. if (child_pid == 0) {
> 5\. exec(cmd);
> 6\. }else {
> 7.waitpid(child_pid);
> 8.}
> 9.}

因此，如果我们在 shell 中运行 'exec ls'，则 cmd 是一个 'exec ls' 字符串。第 3 行创建了一个子进程。在第 5 行，exec(cmd) 将替换子进程，但不会影响父进程。如果父进程不受影响，那为什么终端会关闭呢？

请告诉我上面推理中的缺陷。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T03:11:42.053

如果你运行`ls`，你的shell进程将启动*另一个*进程来运行`ls`程序，然后它会等待它完成。完成后，控制权返回给 shell。

使用`exec ls`，您实际上将*当前*进程中的 shell 程序*替换*为该程序，这样，当它完成时，没有 shell 等待它。*`ls`*

 *最有可能的是，您将拥有一个终端程序或`init`作为父程序，这将在您的进程退出时接管。这就是你的外壳消失的原因，因为你明确告诉它。

有关（非执行）情况的解释，请参阅[此答案。](https://stackoverflow.com/questions/1653340/exec-and-fork/1653415#1653415)`shell/ls`

* * *

至于您的更新，shell 并不*总是*创建一个单独的进程来做事。有大量内部命令（例如`cd`or `alias`）不涉及创建其他进程（这当然取决于您的 shell，但作为一个示例，您可以通过在命令提示符`bash`下输入来查看内部命令`man bash-builtins`）。

`exec`就是其中之一。它只是用您指定的程序替换shell 本身（即，*不是*分叉的子进程）。这就是为什么它不像你想象的那样工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T03:10:26.000

Exec 用另一个进程覆盖当前进程。通常，当您调用“ls”时，会创建一个作为 shell 的子进程运行的新进程。“exec ls”用“ls”进程覆盖你当前的shell。因此，一旦“ls”终止，您的终端就会关闭。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T03:10:07.050

`exec`用新的进程映像覆盖正在运行的进程。因此，在您当前的进程中，您正在运行的 shell 被`ls`可执行映像覆盖，一旦`ls`退出，进程就会关闭。*

# python-3.x - 如何在 python 中覆盖 dict [] 操作？

> ID：14554913
> 
> 赞同：1
> 
> 时间：2013-01-28T03:08:37.437
> 
> 标签：python-3.x

我想在字典中存储某种对象。该对象有一个名为“lastAccessDate”的属性，每当程序访问该对象时，我希望该对象的属性更新为当前系统时间，就像这样

```
def getValue(key):
    obj = objectDict.get(key,None)
    if obj is not None:
        obj.lastAccessDate = getSystemDate()
    return obj 
```

程序必须通过这个api来访问对象，否则会是一个bug。我希望我可以像普通的dict一样操作dict，当我使用objectDict[key]或objectDict.get()来访问key时，它会做这个东西自动。如何在python中实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:11:02.840

您可以重新实现或提供似乎使您的自定义对象成为字典的`[]`访问器。`__getitem__`如果您需要提供集合支持，请实施`__setitem__`

[http://docs.python.org/2/reference/datamodel.html#emulating-container-types](http://docs.python.org/2/reference/datamodel.html#emulating-container-types)

# java - JSON-XML 转换器 Java 库？

> ID：14554915
> 
> 赞同：1
> 
> 时间：2013-01-28T03:08:42.550
> 
> 标签：java, xml, json, xml-parsing, xml-serialization

是否有任何好的 JSON 到 XML 和反之亦然的 java lib 转换器可用，它可以即时转换格式。即时意味着，如果我给一个 JSON 对象（不是 .json 文件阅读器排序），它应该返回一个 xml 文档（而不是 .xml 文件）。

尝试过 XStream，但它给了我不需要的元素节点，这在我的 xml 中是不需要的。Json.org 中的转换器很接近，但它只创建基于文本/节点的 XML，而不创建基于属性。

例如：如果我的 JSON 数据是：

```
{Order:{OrderLine:{ItemID:"1234"}},OrderNo:"4567"} 
```

我想要的输出是：

```
<Order OrderNo="4567"><OrderLine ItemID="1234"/></Order> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:40:40.680

您是否尝试过**json-lib**库？[http://json-lib.sourceforge.net/usage.html#xml](http://json-lib.sourceforge.net/usage.html#xml)

# java - Eclipse，在主程序中定义了所有类。拆分为单独的类文件后程序不起作用

> ID：14554920
> 
> 赞同：0
> 
> 时间：2013-01-28T03:09:52.950
> 
> 标签：java, class

我正在使用 eclipse 来开发我的程序。最初我不认为我会继续构建这个程序，所以我在一个主类中制作了所有类，然后它变成了一堵文字墙，所以我决定将它们分成单独的类。

但是现在他们似乎无法访问主程序中的字段，因为它们位于自己的类文件中。我是否需要添加一些修饰符，例如 C++ 的**朋友类**？

我在显示错误的行上收到 NullPointerException。我也很困惑，因为在 IDE 中编写该行时，它会自动完成说我可以猜测“看到”调用 a.doSomething() 的选项，但是在运行它时，它认为它是 null .

示例代码：（这是我遇到的错误的表示，由于它太大，我无法发布整个代码）

```
// Suppose AObject is an object that does something and causes no errors.

// BEFORE SPLITING
public class myApp
{
    static myApp app = null;
    AObject a = null;
    public static void main(String[] args) 
    {
        a = new AObject();
        app = new CLUtilCompact();
    }

    public myApp() 
    {
        EventQueue.invokeLater
        (
            new Runnable() 
            {
                public void run() 
                {
                    JFrame mainscreen = new JFrame();
                    myPanel myP = new myPanel();
                    mainscreen.add(myP);
                    mainscreen.setVisible(true);
                }
            };
        )
    }
    public class myPanel
    {
        public myPanel()
        {
            a.doSomething();  // Works fine
        }
    }
}

// AFTER SPLIT TO CLASS FILES
public class myApp
{
    static myApp app = null;
    AObject a = null;
    public static void main(String[] args) 
    {
        a = new AObject();
        app = new CLUtilCompact();
    }

    public myApp() 
    {
        EventQueue.invokeLater
        (
            new Runnable() 
            {
                public void run() 
                {
                    JFrame mainscreen = new JFrame();
                    myPanel myP = new myPanel(this);
                    mainscreen.add(myP);
                    mainscreen.setVisible(true);
                }
            };
        )
    }
}
// SEPERATE CLASS
public class myPanel
{
    myApp theApp = null;
    public myPanel(myApp arg)
    {
        theApp = arg;
        theApp.a.doSomething();  // Error
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:14:06.157

您需要阅读类中字段的限定符：public、protected、private 和“包保护”。

如果没有限定符，该字段实际上是“包保护的”，并且同一个包中的类应该能够按照您指定的方式访问它。如果它在不同的包中，那么它会给你一个编译时错误，说它不能识别另一个类中的字段。

但这是猜测，因为你没有给我们真正的代码，你没有告诉我们错误是什么，你还没有告诉我们你尝试了什么。

rc

# c++ - 如何在使用 gcc（不是 g++）编译的 C 项目中组合 C++ 目标文件？

> ID：14554926
> 
> 赞同：8
> 
> 时间：2013-01-28T03:10:39.180
> 
> 标签：c++, c, gcc, g++

另一个 C/C++ 集成问题：我正在尝试`libcl.a`使用 C++ 库中的功能（我们称之为）更新一些遗留的 C 库（我们称之为`libcppl.a`）。该`liblc.a`库在我的环境中被广泛使用，并使用 GCC（在 C 编译器模式下）链接到许多 C 项目中：

```
>> gcc prog.c -lcl 
```

当前`libcl.a`由`cl.o`目标文件组成（使用`gcc`from `cl.c`+创建`cl.h`）。

由目标文件（使用from +创建）`libcppl.a`组成。`cppl.o``g++``cppl.cpp``cppl.h`

因为现有的应用程序是用 C 编写的，并且构建脚本使用的是 GCC，所以我希望尽可能简单地过渡到更新的库。因此，我想继续使用 GCC 作为主编译器，但仍然能够链接到更新的库。

找到[这个答案](https://stackoverflow.com/a/1001576/274579)，我可以使用以下方法将 C++ 对象链接到 GCC C 项目`-lstdc++`：

```
>> gcc -c cl.c   -o cl.o
>> g++ -c cppl.c -o cppl.o
>> ar rcs libcl.a cl.o cppl.o
>> gcc prog.c -lcl -lstdc++ 
```

但是，我想**消除** `libstdc++` **在编译命令行中**明确提及的。

我试图做的是在 cl 库中包含 libstdc++，方法是：

```
>> ar rcs libcl.a cl.o cppl.o /usr/lib/libstdc++.so.6 
```

但是，在构建应用程序时，我得到：

```
>> gcc prog.c -lcl
In file included from cppl.cpp:2:
./libcl.a(cppl.o):(.eh_frame+0x12): undefined reference to `__gxx_personality_v0'
collect2: ld returned 1 exit status 
```

**1\. 为什么 gcc 链接器找不到与我的对象一起归档的 C++ 标准库？**

****2\. 使用库（相对于目标文件）****是否有限制？**`ar`**

 ******3.有没有办法克服这个问题？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T03:21:09.400

`prog.c`您可以使用单独编译`gcc`，然后使用`g++`链接：

```
# compile the main program to an object file
gcc  prog.c -o prog.o

#use g++ to link everything (it'll automatically pull in libstdc++)
g++ prog.o -lcl 
```

或者，您可以通过使用以下选项明确告诉编译为 C 源文件，`prog.c`一步编译和链接：`g++``prog.c``-x`

```
g++ -x c prog.c -lcl 
```

有关和之间行为差异的更多信息，请参阅[https://stackoverflow.com/a/5854712/12711](https://stackoverflow.com/a/5854712/12711)。`gcc``g++`****

# javascript - 将javascript变量添加到javascript src？

> ID：14554928
> 
> 赞同：4
> 
> 时间：2013-01-28T03:10:54.787
> 
> 标签：javascript, html, src

这可能听起来有点无聊，但我正在尝试检索 YouTube 视频的视频信息（我在一些教程中看到）基本上这里是代码

```
 function youtubeFeedCallback1(data) {
        var s = '';
        var k = '';
        s += data.entry.title.$t;
        k += data.entry.media$group.media$thumbnail[2].url;
        vidtitle1=s
        vidthumb1=k

      }
 <script type="text/javascript" id="javaone" src='http://gdata.youtube.com/feeds/api/videos/'+vidid[0]+'?v=2&amp;alt=json-in-script&amp;callback=youtubeFeedCallback1' ></script> 
```

如您所见，我正在尝试在 src 中插入 var "vidid[0]"，但这不起作用。现在，我确实做了功课，但是当我设置一个新的脚本属性并设置新的 src 时，它仍然无法正常工作。有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T12:20:38.877

您正在尝试做的事情称为[JSONP](http://en.wikipedia.org/wiki/JSONP)。由于您不能使用常规的 Ajax 调用从另一个域中获取 JSON（这会带来安全隐患），因此您必须添加一个脚本来调用您指定的回调函数，并将 JSON 传递给它。正如其他答案所说，您必须以编程方式创建脚本标签。我不会使用`document.write`它，因为它在页面加载后不起作用（新脚本将替换整个文档）。但是有一个非常简单的替代方案：

```
function youtubeFeedCallback1(data) {
    var s = '';
    var k = '';
    s += data.entry.title.$t;
    k += data.entry.media$group.media$thumbnail[2].url;
    vidtitle1=s;
    vidthumb1=k;
}

var script = document.createElement('script');
script.src = "http://gdata.youtube.com/feeds/api/videos/" + vidid[0] + "?v=2&amp;alt=json-in-script&amp;callback=youtubeFeedCallback1";
document.body.appendChild(script); 
```

最后一个建议：我看到您的回调中有全局变量，`vidtitle1`并且`vidthumb1`. 无论您需要对它们的值做什么，都可以从回调中执行（最好摆脱全局变量），否则它可能不起作用。数据将异步加载，因此只有在回调运行*后才能保证变量包含它们的值。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:51:14.633

虽然 CDATA 工作正常，但使用 document.createElement 也是一个不错的选择。特别是如果您打算向 URL 附加一些值，例如缓存清除。

```
<script type="text/javascript"> 
    var versionJSLink = "/Folder/sub_folder/version.js?version=" + Math.random();
    JSElement = document.createElement('script');
    JSElement.src = versionJSLink;
    JSElement.onload = OnceLoaded;
    document.getElementsByTagName('head')[0].appendChild(JSElement);

    function OnceLoaded() {
        // Once loaded.. load other JS or CSS or call objects of version.js
    }
</script> 
```

玩得开心.. ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T03:14:27.933

document.write 或 createElement()/appendChild()

```
var id = "asdf";
document.write('\x3Cscript type="text/javascript" src="foo.js?id=' + id + '">\x3C/script>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T03:17:43.190

页面中的代码片段在哪里？如果它在`<script>`标签内，问题是脚本标签被解释为 javascript，而不是 html。相反，您可以使用原始脚本标签`document.write`将脚本标签写入 dom。

新代码将类似于：

```
function youtubeFeedCallback1(data) {
    var s = '';
    var k = '';
    s += data.entry.title.$t;
    k += data.entry.media$group.media$thumbnail[2].url;
    vidtitle1=s
    vidthumb1=k
  }
document.write("<script type=\"text/javascript\" id=\"javaone\" src=\"http://gdata.youtube.com/feeds/api/videos/\"+vidid[0]+\"?v=2&amp;alt=json-in-script&amp;callback=youtubeFeedCallback1\"></script>"); 
```

脚本标签需要用 javascript 编写才能访问`vidid`变量，但这意味着您必须操作 DOM 才能添加脚本标签，因为您不再使用 HTML。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-28T13:00:31.807

```
function youtubeFeedCallback1(data) {
  var s = '';
  var k = '';
  s += data.entry.title.$t;
  k += data.entry.media$group.media$thumbnail[2].url;
  vidtitle1 = s
  vidthumb1 = k

}

<script id="javaone"></script>

<script>

  var fullSrc = "http://gdata.youtube.com/feeds/api/videos/"+vidid[0]+"?v=2&amp;alt=json-in-script&amp;callback=youtubeFeedCallback1";

  $('#javaone').attr("src",fullSrc);

</script>
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
```

我想你明白了： 1\. 创建空的脚本容器。2\. 在变量中定义完整的链接。3\. 将此变量设置为空脚本的 src 属性。

ps不知道js能不能用。这是 jQuery

# java - 如何在 JAVA 中修改 JScrollPane 的外观？

> ID：14554930
> 
> 赞同：0
> 
> 时间：2013-01-28T03:11:04.500
> 
> 标签：java, jscrollpane, appearance

如何在 JAVA 中修改 JScrollPane 的外观？我希望 JScrollPane 只有一行。像 Sublime Text 这样的东西

# c# - 当 C# Windows Store (Metro) 应用程序崩溃时，如何获得有用的信息（如堆栈跟踪）？

> ID：14554931
> 
> 赞同：25
> 
> 时间：2013-01-28T03:11:15.670
> 
> 标签：c#, windows-store-apps

因此，我在 C#（以及一般的 .NET/Visual Studio）中迈出了第一步，首先编写了一个简单的拼图作为可移植库，并为不同的目标平台编写 UI。我从控制台 UI 开始，然后转到 WPF 应用程序。然后我尝试了“Windows Store”，在大多数情况下，我可以复制 WPF 代码并更改一些命名空间和方法签名。

但是有些东西的行为确实有点不同，我花了一个多小时的谷歌搜索才得到它给我关于我所遇到的坠机的任何信息。因此，例如，如果我在传统的 WPF 应用程序中做这样的事情：

```
Storyboard.SetTargetProperty(animation, 
     new PropertyPath("{Canvas.MispelledProperty}")); 
```

我在引发异常的确切位置得到一个 .NET 异常。如果我在 Windows Store App 中犯了同样的错误，我看到的就是这个

```
#if DEBUG && !DISABLE_XAML_GENERATED_BREAK_ON_UNHANDLED_EXCEPTION
        UnhandledException += (sender, e) =>
        {
            if (global::System.Diagnostics.Debugger.IsAttached) global::System.Diagnostics.Debugger.Break();
        };
#endif 
```

（编辑：这是在一个名为的文件中`App.g.i.cs`）

然后我必须仔细查看输出才能找到

```
WinRT information: Cannot resolve TargetProperty (Canvas.MispelledProperty) on specified object. 
```

现在在某些情况下，这可能就足够了，但是我真的很难相信这就是你所能得到的。我遇到了一些与 Storyboar 工作方式中的细微差别有关的问题，很容易解决（直接附加到动画的已完成事件，而不像 WPF 对应项中那样被触发），但现在我对这个错误完全一无所知：

```
A first chance exception of type 'System.ArgumentOutOfRangeException' occurred 
```

只是由于疯狂点击造成的，这也会导致整个应用程序崩溃。

`PointerPressed`现在我的应用程序真的很琐碎，它可能与我处理`PointerReleased`事件的方式有关，但没有更好的开始真的很令人沮丧。

所以我想实际的问题是：它真的应该是这样的还是我可以配置调试器来给我更多有用的信息？如果不是那么：你们在开发 Windows 应用商店应用程序时使用什么样的调试技术/解决方法？

**更新：**

好吧，起初我认为这只发生在与 WinRT 相关的异常上，即发生在 CLR 之外的地方以及没有正确包装的地方，但事实证明，所有未处理的异常都将您带到 `App.g.i.cs`而不是它们发生的地方。例如，我故意尝试在一个方法中访问其范围之外的列表，以查看在引发异常时 Visual Studio 是否会将我带到那里，但它却再次将我带到`App.g.i.cs`. 在当地人中，我得到了这个`Windows.UI.Xaml.UnhandledExceptionEventArgs`消息字符串有一些看起来几乎像堆栈跟踪但没有行号的信息。这是我故意错误的示例：

```
System.ArgumentOutOfRangeException
   at System.ThrowHelper.ThrowArgumentOutOfRangeException()
   at System.Collections.Generic.List`1.get_Item(Int32 index)
   at StorePuzzle.PuzzleRenderer.HandleTileReleased(Object sender, PointerRoutedEventArgs e) 
```

我想要的只是 Visual Studio 立即将我带到引发异常的地方，而不是`App.g.i.cs`像在“非商店应用程序”中那样带我去。现在，那个编译器预处理器指令让它看起来我可以关闭它（`#if DEBUG && !DISABLE_XAML_GENERATED_BREAK_ON_UNHANDLED_EXCEPTION`）但是谷歌搜索它并没有向我展示任何这样做的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-12T08:26:31.487

当您知道要查找的特定异常类型时，在代码中调试异常很容易。

`Debug`然后`Exceptions`从菜单中选择（或`Ctrl+D` `Ctrl+E`）

搜索您的特定异常并检查`thrown`.

调试器将在发生异常的代码行处停止。

我通常会打开大多数异常以尽早发现问题。

不过，XAML 中的错误是另一回事，有时很难找到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-26T20:34:04.427

我自己有一个关于获取堆栈跟踪和转储的非常相似的问题，我在这里问过：[如何从用 C# 编写的 WinRT 应用程序获取崩溃日志和堆栈跟踪？](https://stackoverflow.com/questions/15797671/how-do-i-get-crash-logs-and-stack-traces-from-winrt-apps-written-in-c).

**与 Android 相比，Microsoft 使得从 WinRT 应用程序获取崩溃信息变得非常困难。**与 Android 不同，没有像 logcat 这样的内置日志，您可以在其中通过简单的堆栈跟踪查看应用程序崩溃的原因。Android 将其提供给开发人员，并且不要求他们编写任何代码！

对于 WinRT 应用程序 看起来我们都必须推出自己的解决方案来解决这个问题。有很多不同的地方可能会发生异常，如果您想将它们全部记录下来——如果你不把它们全部记录下来，那么记录异常的意义何在——看起来这将是很多工作！

本文对如何捕获 XAML 异常进行了一些解释，以便您可以记录它们：

*   [http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.unhandledexception.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.unhandledexception.aspx)

本文解释了为什么需要使用 try/catch 将所有代码包装在异步事件回调中：

*   [Metro / WinRT UI async void 事件处理程序未调用未处理的异常处理程序](https://stackoverflow.com/questions/12344357/unhandled-exception-handler-not-called-for-metro-winrt-ui-async-void-event-han)

这个库看起来是进行日志记录的好选择，虽然它看起来有点重，因为它依赖于 SQLite，如果有一个更轻的选择确实需要一个可能是首选的数据库。

*   [https://github.com/mbrit/metrolog](https://github.com/mbrit/metrolog)

**更新：**

Microsoft 在 Windows 8.1 中宣布了一些新的日志记录功能，文档现在在这里：

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.foundation.diagnostics.loggingchannel](http://msdn.microsoft.com/en-us/library/windows/apps/windows.foundation.diagnostics.loggingchannel)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T15:51:29.313

关于 ArgumentOutOfRangeException：Visual Studio 中的调试器对不同类型的异常有特殊选项，您需要确保为您的异常类型选中“抛出”（您可以在您的情况下选择所有公共语言运行时异常）[http://msdn .microsoft.com/en-us/library/d14azbfh.aspx](http://msdn.microsoft.com/en-us/library/d14azbfh.aspx)

关于 WinRT：对于 WinRT，我想情况会有所不同。我不是真正的 WinRT 专家，但在我看来，Windows 实际上以不同于 WPF 的方式使用 XAML。Windows 执行大多数异步工作（例如生成控件、解析 XAML 等）。因此，这就是为什么大多数情况下您会从 XAML 中获取异常，而不是在您尝试设置属性的地方，而是作为未处理的异常。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T04:11:56.747

![VS2012中的本地人](../Images/2b80b267bd679832495b2365e3bae6e6.png)

如果您查看 Visual Studio 2012 中的“Locals”窗格，您会在调用异常时注意到一个名为 $exception 的值。如果您深入研究它，您可以找到有关该问题的各种信息。

# ajax - 发出ajax请求时禁止AJAX 403

> ID：14554935
> 
> 赞同：4
> 
> 时间：2013-01-28T03:11:36.940
> 
> 标签：ajax, general-network-error

网站发起 ajax 请求，但所有浏览器总是返回 403 错误。

我通过在 firebug 控制台中发起相同的调用来测试它，它可以工作（状态：200）

可以推断出什么问题？

```
jQuery.ajax({ 
    url: "cart_ajax_get_product.php", 
    data: {id: 355, qty: 1}, 
    success: function(data) { }); }, 
    error: function(err) { } 
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-05T13:39:40.943

可能是与 apache mod_security 相关的问题。尝试强制 ajax 请求`GET`代替`POST`：

```
jQuery.ajax({ 
    type:"GET",
    url: "cart_ajax_get_product.php", 
    data: {id: 355, qty: 1}, 
    success: function(data) { }); }, 
    error: function(err) { } 
}); 
```

或者如果这没有帮助...

您可以尝试在服务器的 .htaccess 上设置这些选项，或者在其他地方配置它们：

```
SecFilterScanPOST Off
SecFilterEngine Off 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T13:30:05.857

```
jQuery.ajax({ 
url: "cart_ajax_get_product.php", 
data: {id: 355, qty: 1}, 
success: function(data) {

}
error: function(err) { } 
}); 
```

# dojo - dojo1.8：远程加载dojo页面到内容面板

> ID：14554937
> 
> 赞同：1
> 
> 时间：2013-01-28T03:11:39.470
> 
> 标签：dojo

我可以分别通过请求和 href 将文本或 html 页面加载到内容窗格中。

但是，我无法将 dojo 页面（即 dojo 文本或按钮）加载到内容窗格中。

直接在 Firefox 中运行时，Dojo 文件被正确解析。但是，它们没有在内容窗格中正确解析。

请提前告知谢谢。

克莱门特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:38:46.630

加载到 contentPane 的内容不会针对 dojo 小部件进行解析。但是，您可以通过使用[dojox/layout/contentPane](http://dojotoolkit.org/reference-guide/1.8/dojox/layout/ContentPane.html)来实现这一目标。contentPane 的 dojox 版本的工作方式与 dijit 版本完全相同，但允许小部件解析。

# java - 将 24 小时制转换为 12 小时制 java

> ID：14554940
> 
> 赞同：2
> 
> 时间：2013-01-28T03:12:07.173
> 
> 标签：java, displaytag

好的，所以我有一个时钟类，它最初设置为 24 小时制，但我必须仅使用这种方法将时钟显示为 12 小时制！我已经尝试了几个小时，但都失败了！请帮忙。使时钟将时间显示为 12 小时制 (hh:mm:ss AM/PM)。使用抽象 - 除了 updateDisplay() 方法之外不要更改任何内容。时钟可以“在幕后”使用军用时间；它只需要在调用 getTime() 时返回正确的字符串。

```
private void updateDisplay()
{
    String AM = "AM";
    String PM = "PM";

    if(hours.getValue() == 0) {
        hours.setValue(hours.getValue() + 12);
        PM = "";
    }
    else if(hours.getValue() == 1 < hours.getValue() && hours.getValue() < 11) {
        PM = "";
    }
    else if(hours.getValue() == 12) {
       AM = "";
    }
    else if(hours.getValue() == 13 > 24) {
        hours.setValue(hours.getValue() - 12);
       AM = "";
    }

    displayString = hours.getDisplayValue() + ":" + 
    minutes.getDisplayValue() + ":" +
    seconds.getDisplayValue() + PM + AM;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T03:39:57.063

24 小时制 H，从 0<=H<=23 开始运行。如果`H div 12`为 0，则为 AM，否则为 PM。那么 12 小时制 h，`H mod 12`除非该值为 0，在这种情况下 h = 12。您不应更改`hours.setValue(...)`显示代码中的值 ( )，也无需转换为秒。我认为您的代码问题只是第一个条件语句中的语法问题。

```
... if(hours.getValue() == 1 < hours.getValue() ... // This is wrong 
```

您将小时的值与 1 进行比较，然后将比较的结果与小时进行比较。这不会在 java 中编译，因为 bool 与 int 无法比较。

注意：当我说 时`div`，我指的是整数除法（即 Java 中的截断`/`运算符），而当我说`mod`我指的是整数模数（`%`Java 中的运算符）。

**更新：**您需要做的就是将您的 24 小时值转换*为*`hours.getValue()`12 小时等值以进行显示。类似于以下内容：

```
// Not correct Java!
string meridianNess = (hours.getValue()/12==0?"AM":"PM");
int h = hours.getValue()%12;
if (h==0) h = 12;
System.out.print(h+":"+new NumberFormat("00").format(minutes.getValue())+":"+
    new NumberFormat("00").format(seconds.getValue())+" "+meridianNess); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-11T08:29:17.467

一个很好的简洁公式是添加 11，然后取“模 12”，然后再添加一个：

```
hours.setValue(((hours.getValue()+11)%12)+1); 
```

IE

```
h_12 = ( (h_24+11) % 12 ) + 1 
```

这可以为任何值（包括 hours=0、hours=12 等）提供所需的结果。

（然后当然可以使用前面提到的任何 AM/PM 显示解决方案）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T03:20:56.493

尝试将24小时时间转换为秒，那么它应该很容易......

# java - 你好世界！使用 JAVA ASM 显示字节码的程序

> ID：14554941
> 
> 赞同：2
> 
> 时间：2013-01-28T03:12:28.440
> 
> 标签：java, opcode, java-bytecode-asm

我无法在屏幕上显示字节码。我想为 hello World 生成类似 Javap 命令的输出。

我创建了以下课程和你好世界课程。谁能让我知道我必须做什么来生成字节码以及我做错了什么？

```
 **package com.gannon.ASMInterpreterMain;**

            import java.io.FileOutputStream;
            import java.io.IOException;

            import org.objectweb.asm.ClassWriter;
            import org.objectweb.asm.FieldVisitor;
            import org.objectweb.asm.MethodVisitor;
            import org.objectweb.asm.Opcodes;

            public class CodeGenerator {

                public void generateClass()
                {
                    ClassWriter cw=new ClassWriter(0);
                    FieldVisitor fv;
                    MethodVisitor mv;
                    cw.visit(Opcodes.V1_6, Opcodes.ACC_PUBLIC, "com/gannon/ASMInterpreterMain/HelloWorldOutPut", null, "java/lang/Object", null);
                    mv=cw.visitMethod(Opcodes.ACC_PUBLIC, "<init>", "()V", null, null);
                    mv.visitVarInsn(Opcodes.ALOAD, 0);
                    mv.visitMethodInsn(Opcodes.INVOKESPECIAL, "java/lang/Object", "<init>", "()V");
                    mv.visitInsn(Opcodes.RETURN);
                    mv.visitMaxs(1, 1);
                    mv.visitEnd();
                    mv=cw.visitMethod(Opcodes.ACC_PUBLIC+ Opcodes.ACC_STATIC, "Main", "([Ljava/lang/String;)V", null, null);
                    mv.visitFieldInsn(Opcodes.GETSTATIC, "java/lang/System", "out", "Ljava/io/PrintStream;");
                    mv.visitLdcInsn("Test");
                    mv.visitMethodInsn(Opcodes.INVOKEVIRTUAL, "java/io/PrintStream", "println", "(Ljava/lang/String;)V");
                    mv.visitInsn(Opcodes.RETURN);
                    mv.visitMaxs(2, 1);
                    mv.visitEnd();
                    cw.visitEnd();
                    this.WriteClass(cw);
                }
                public void WriteClass(ClassWriter cw){
                    FileOutputStream fos;
                    try{
                        fos = new FileOutputStream("C:\\Users\\Anish\\workspace\\ASMProject\\Main.class");
                        fos.write(cw.toByteArray());
                        fos.close();
                    }
                    catch (IOException ex){

                        System.out.println("Error: "+ex.getMessage());
                        //Logger.getLogger(CodeGenerator.class.getName()).log(Level.SEVERE, null, ex);
                    }
                }

                public static void main (String [] args){

                    CodeGenerator CG = new CodeGenerator();
                    CG.generateClass();

                }
            } 
```

我尝试使用 tracefilevisitor，但我的代码现在没有被编译，我得到了这样的异常；线程“主”java.lang.IncompatibleClassChangeError 中的异常：实现类可以请任何人帮助我

```
 package com.gannon.ASMInterpreterMain;

        import java.io.PrintWriter;

        import org.objectweb.asm.ClassWriter;
        import org.objectweb.asm.MethodVisitor;
        import org.objectweb.asm.Opcodes;
        import org.objectweb.asm.util.TraceClassVisitor;

        public class CodeGenerator {

            public void generateClass() {
                ClassWriter cw = new ClassWriter(0);
                TraceClassVisitor tc = new TraceClassVisitor(
                        new PrintWriter(System.out));
                MethodVisitor mv;
                tc.visit(Opcodes.V1_6, Opcodes.ACC_PUBLIC,
                        "com/gannon/ASMInterpreterMain/HelloWorldOutPut", null,
                        "java/lang/Object", null);
                mv = tc.visitMethod(Opcodes.ACC_PUBLIC, "<init>", "()V", null, null);
                mv.visitVarInsn(Opcodes.ALOAD, 0);
                mv.visitMethodInsn(Opcodes.INVOKESPECIAL, "java/lang/Object", "<init>",
                        "()V");
                mv.visitInsn(Opcodes.RETURN);
                mv.visitMaxs(1, 1);
                mv.visitEnd();
                mv = tc.visitMethod(Opcodes.ACC_PUBLIC + Opcodes.ACC_STATIC, "Main",
                        "([Ljava/lang/String;)V", null, null);
                mv.visitFieldInsn(Opcodes.GETSTATIC, "java/lang/System", "out",
                        "Ljava/io/PrintStream;");
                mv.visitLdcInsn("Test");
                mv.visitMethodInsn(Opcodes.INVOKEVIRTUAL, "java/io/PrintStream",
                        "println", "(Ljava/lang/String;)V");
                mv.visitInsn(Opcodes.RETURN);
                mv.visitMaxs(2, 1);
                mv.visitEnd();
                tc.visitEnd();
                byte [] b = cw.toByteArray();

                System.out.println(b.length);
                for (int i = 1; i < b.length; i++) {
                    System.out.println(b[i]);
                }

            }

        //  public void WriteClass(ClassWriter cw) {
        //      FileOutputStream fos;
        //      try {
        //          fos = new FileOutputStream(
        //                  "C:\\Users\\Anish\\workspace\\ASMProject\\Main.class");
        //          fos.write(cw.toByteArray());
        //          fos.close();
        //      } catch (IOException ex) {
        //
        //          System.out.println("Error: " + ex.getMessage());
        //          //Logger.getLogger(CodeGenerator.class.getName()).log(Level.SEVERE, null, ex);
        //      }
        //  }

            //public static void main (String [] args){

            //  CodeGenerator CG = new CodeGenerator();
            //  CG.generateClass();

            //}

            public static void main(String[] args) throws Exception {
                //        String pathToClassFile = "C:\\Users\\Anish\\workspace\\ASMProject\\Main.class";
                //      Textifier.main(pathToClassFile);

                CodeGenerator CG = new CodeGenerator();
                 CG.generateClass();
            }
        } 
```

> 嗨，我尝试实现您提出的概念，但我的代码仍然无法正常工作，我将我的代码附在此处，我想运行它以显示我的 helloworld 程序的操作码。你能帮我调试这段代码吗？我实现了 textifier 但它似乎在 main 方法中要求字符串数组对象。我尝试转换我的类文件路径，但没有成功。你能帮忙吗？

```
 package com.gannon.ASMInterpreterMain;

    import java.io.PrintWriter;
    import org.objectweb.asm.util.Textifier;
    import org.objectweb.asm.ClassWriter;
    import org.objectweb.asm.MethodVisitor;
    import org.objectweb.asm.Opcodes;
    import org.objectweb.asm.util.TraceClassVisitor;

    public class CodeGenerator {

        public void generateClass() {
            ClassWriter cw = new ClassWriter(ClassWriter.COMPUTE_MAXS);
            TraceClassVisitor tc = new TraceClassVisitor( cw,
                    new PrintWriter(System.out));
            MethodVisitor mv;
            tc.visit(Opcodes.V1_6, Opcodes.ACC_PUBLIC,
                    "com/gannon/ASMInterpreterMain/HelloWorldOutPut", null,
                    "java/lang/Object", null);
            mv = tc.visitMethod(Opcodes.ACC_PUBLIC, "<init>", "()V", null, null);
            mv.visitVarInsn(Opcodes.ALOAD, 0);
            mv.visitMethodInsn(Opcodes.INVOKESPECIAL, "java/lang/Object", "<init>",
                    "()V");
            mv.visitInsn(Opcodes.RETURN);
            mv.visitMaxs(1, 1);
            mv.visitEnd();
            mv = tc.visitMethod(Opcodes.ACC_PUBLIC + Opcodes.ACC_STATIC, "Main",
                    "([Ljava/lang/String;)V", null, null);
            mv.visitFieldInsn(Opcodes.GETSTATIC, "java/lang/System", "out",
                    "Ljava/io/PrintStream;");
            mv.visitLdcInsn("Test");
            mv.visitMethodInsn(Opcodes.INVOKEVIRTUAL, "java/io/PrintStream",
                    "println", "(Ljava/lang/String;)V");
            mv.visitInsn(Opcodes.RETURN);
            mv.visitMaxs(2, 1);
            mv.visitEnd();
            tc.visitEnd();
            byte [] b = cw.toByteArray();

            System.out.println(b.length);
            for (int i = 1; i < b.length; i++) {
                System.out.println(b[i]);
            }

        }

        public static void main (String [] args){

              String[] pathToClassFile = {"com/gannon/ASMInterpreterMain/HelloWorldOutPut"};
                try {
                    Textifier.main(pathToClassFile);
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    System.out.println("Excption thrown from main is "+e.getMessage());
                }
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T04:43:32.043

如果您希望将输出打印在屏幕上而不是打印到文件中，请替换

```
ClassWriter cw=new ClassWriter(0); 
```

和

```
TraceClassVisitor cw = new TraceClassVisitor(new PrintWriter(System.out)); 
```

并更换

```
this.WriteClass(cw); 
```

和

```
cw.print(new PrintWriter(System.out)); 
```

请参阅[TreeClassVisitor javadoc](http://asm.ow2.org/asm33/javadoc/user/org/objectweb/asm/util/TraceClassVisitor.html)并相应地修改您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:52:24.433

```
import org.objectweb.asm.util.Textifier;

public class ByteCodeReader {
        public static void main(String[] args) throws Exception {
        String pathToClassFile = "<path to classfile of interest goes here>";
        Textifier.main(pathToClassFile);
    }
} 
```

因此，`Textifier`当您给出您感兴趣的字节码的类文件的确切绝对路径时，通常会起作用。我试图查看它是否适用于相对路径，但似乎不起作用。

输出（字节码指令）被打印到标准输出。

另外，我使用的 jar`Textifier`是`asm-util-4.0.jar`，所以不要忘记将它包含在你的构建路径中。

# c - scanf 终止程序

> ID：14554942
> 
> 赞同：0
> 
> 时间：2013-01-28T03:12:34.673
> 
> 标签：c

我正在尝试用 C 编写一个程序，将基数 ​​n 转换为基数 10。我有 4 个函数不包括 main：ObtainNumber、GetBase、ConvertNumberToBase10、GetMyExponential。我的主函数按以下顺序执行函数：GetBase、ObtainNumber、GetMyExponential、ConvertNumberToBase10。我的程序同时运行GetBase 函数和ObtainNumber 函数。但是，我在我的获取编号函数中使用了 scanf 函数，并且程序不会继续执行其他函数：

```
 long int ObtainNumber (long int myNumber)
    {

        scanf("%ld", &myNumber);
        while (myNumber > 999999999)
            {
                printf("Error. Please enter a number with no greater than 9 digits\n");
                scanf("%ld", &myNumber);
            }

        return (myNumber);

} 
```

我想知道为什么会发生这种情况以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:31:04.760

该`scanf()`函数返回类型为 的结果`int`，该结果可以是成功扫描的项目数，或者`EOF`是出现错误时的值。您应该*始终*检查结果，因为`scanf()`可能由于程序无法控制的情况而失败。

`scanf("%ld", ...)`在跳过前导空格（包括换行符）后，将使用可选带符号整数常量的语法读取文本。之后的任何内容都留在输入流中。

如果没有看到更多代码和您提供的输入，就很难判断问题出在哪里。

使用`scanf`可能很棘手。更好的方法是`fgets()`读取整行输入，然后`sscanf()`解释其内容。通过使用`fgets()`，您不会留下部分输入行等待下一次调用（除非该行比输入缓冲区长），并且如果`sscanf()`调用失败，它不会影响输入流的状态。

注意，使用`fgets()`，*而不是* `gets()`；`gets()`本质上是不安全的，永远不应使用，并且已从语言标准中删除。

# api - 构建 API URL 的不同方法之间的权衡是什么：子域与子目录和版本控制？

> ID：14554943
> 
> 赞同：54
> 
> 时间：2013-01-28T03:12:39.153
> 
> 标签：api, rest, dns, webserver, maintainability

我们有一个域名为`example.com`. 现在我们想将此应用程序的一部分扩展为 REST API，并且我们正在讨论最佳 URL 模式。

我们可以使用 URL 模式`api.example.com`或`example.com/api`. 如果有的话，有哪些权衡需要考虑？

此外，关于 API 版本控制的方法有哪些权衡？它可以通过 URL ( `v1.api.example.com`,`example.com/api/v1`或一些奇怪的组合`v1.example.com/api`或`api.example.com/v1`) 来完成。或者，可以通过使用 HTTP 请求标头（或其他方式）来完成？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-28T03:28:50.787

这取决于您的需求。

如果您使用[http://api.example.com](http://api.example.com)它会使您的 API 成为子域。基本上，如果您的 REST 服务要由多个客户端使用，则此 URL 模式很好，但如果只有一个客户端连接到您的 API，则模式[http://example.com/api/v1](http://example.com/api/v1)很好。但是，如果您想添加更多 API 并连接更多客户端，最好使用[http://example.com/api/v1](http://example.com/api/v1)。例如，考虑以下内容。

```
http://example.com/reportapi/apioperation?parameters

http://example.com/paymentapi/apioperation?parameters

http://example.com/searchapi/apioperation?parameters 
```

最后但同样重要的是，PayPal 使用模式[http://example.com/api/v1](http://example.com/api/v1)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-06T13:42:59.043

我认为您应该考虑使用既不`http://api.example.com`也不`http://example.com/api/v1`。

相反，我建议使用`http://example.com/api`和内容协商进行版本控制。

以下是我的想法为什么：

**使用子域：**

根据[URI Scheme Specification](https://www.rfc-editor.org/rfc/rfc3986)，您在 URI 的授权部分定义 API，用于定义您的主机，而不是在您的主机上定义应用程序或 API。您实际上是在为您的 API 创建一个不同的地址，这意味着身份验证可能不适用于 api.example.com，就像它对 example.com 一样。

这样做的一个正当理由可能是在为移动设备设计一个新实例时，例如 mobile.example.com，但我认为这更像是一个基础设施决策，而不是功能决策。

**在主域上使用未版本控制的路径：**

这里有两点信息：一是表示存在 API 资源，二是表示存在该 API 资源的版本号 (v1)。

用来`/api/`区分 API 和可能在`/web/`. 这可以被认为是常见的最佳实践。

我不确定您是否打算这样做，但您的问题包括有关如何解决 API 版本控制的查询。就个人而言，我认为 API 版本控制不应该使用 URL 来完成，因为它们旨在尽可能长时间地保持稳定。[酷 URI 不会改变！](http://www.w3.org/Provider/Style/URI.html)相反，请考虑使用 HTTP Content-Type 信息来对您的 API 进行版本控制。[我实际上在VMware 文档](http://pubs.vmware.com/datadirector-20/index.jsp?topic=/com.vmware.datadirector.programming.doc/GUID-FE5E52B9-FA82-448A-B9F9-B21931D37714.html)中发现了这种方法。此外，这里有一篇相当古老但仍然有用的关于内容类型版本控制的帖子，作者[Peter Williams](http://barelyenough.org/blog/2008/05/versioning-rest-web-services/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-28T06:23:13.670

这是一个权衡的案例，没有单一的最佳解决方案。

例如，如果您的[http://example.com/](http://example.com/)通过标准 Web 界面和 API 提供内容，那么您需要类似的东西`http://api.example.com/api/<version>/<the usual resource pattern>` 来将基于浏览器的应用程序访问与 API 交互分开。这有意义吗？

示例：api.rottentomatoes.com

但是，即使您的域专用于 API 调用，无论如何使用上述模式也是有意义的，并保留[http://example.com/](http://example.com/)用于与您的应用程序交互的其他方式。例如，您可能需要[http://example.com/mobile/](http://example.com/mobile/)等。

# java - org.hibernate.ejb.criteria.path.Abs tractPathImpl.get 处的 NullPointerException

> ID：14554945
> 
> 赞同：8
> 
> 时间：2013-01-28T03:13:30.040
> 
> 标签：java, jpa, nullpointerexception, predicate, criteria-api

这工作正常：

```
 public Predicate toPredicate(Root<Campaign> root,
    CriteriaQuery<?> query, CriteriaBuilder cb) {
    return root.get("campState").get("statusId").in(campStatus);
} 
```

但我改为：</p>

```
 return  root.get(Campaign_.campState).get(CampState_.campId).in(campStatus). 
```

并抛出异常：</p>

> 编辑： org.hibernate.ejb.criteria.path.Abs​​tractPathImpl.get 的 NullPointerException

```
 @StaticMetamodel(Campaign.class)
  public class Campaign_ {
  public static volatile SingularAttribute<Campaign, CampState> campState;
  public static volatile SingularAttribute<Campaign, Long> campId;
  }

  @StaticMetamodel(CampState.class)
  public class CampState_ {
  public static volatile SingularAttribute<CampState, String> statusId;
  }

  Campaign.class
  @ManyToOne(cascade = {CascadeType.REFRESH, CascadeType.MERGE})
  @JoinColumn(name = "camp_status")
  public CampState getCampState() {
    return campState;
  }

  public void setCampState(CampState campState) {
    this.campState = campState;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T13:52:44.367

检查[这个答案](https://stackoverflow.com/a/4892085/1211174)。

似乎元模型和类应该在同一个包中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T17:42:41.803

给定两个查询对不同的属性进行操作。第二个查询无法编译，因为 CampState_ 没有属性 campId（Campaign_ 确实有这样的属性。

相当于第一个具有静态元模型的查询是：

```
root.get(Campaign_.campState).get(CampState_.statusId).in(campStatus). 
```

# python - opencv/python：流式传输网络摄像头视频时模块 cv2 中的掩码

> ID：14554946
> 
> 赞同：4
> 
> 时间：2013-01-28T03:13:40.813
> 
> 标签：python, opencv, webcam, mask

嘿大家我正在尝试使用我的网络摄像头制作游戏，我需要一些物体从屏幕上掉下来，同时我用我的网络摄像头流式传输视频（那个流是我的背景）。

我正在使用python 和opencv 的**模块 cv2**

问题是：如何对这些对象应用蒙版？我已经有一个图像作为原始图像的蒙版，但我不知道如何应用它来减去原始图像的背景..

我已经尝试使用 cv2.bitwise_and 但什么也没发生，图像在黑色背景下保持不变：

```
#targets
original_ball = cv2.imread("Aqua-Ball-Red-icon.png")
ball = cv2.resize(bola_original, (64,64), fx=1, fy=1)
#mask
mask_original = cv2.imread("input-mask.png",0)
mask = cv2.resize(mask_original, (64,64), fx=1, fy=1)
res = cv2.bitwise_and(ball, ball, mask = mask) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:20:25.923

如果您正在使用`cv2`，则您正在使用`numpy`数组，并且无需求助于 opencv 来获得像掩码这样简单的东西。

首先，操纵（可能乘以）您的掩码数组，使您想要的值（即：那些未屏蔽的值）具有值 1。然后，将您的源图像乘以您的掩码。这将使生成的图像具有掩码 == 1 的原始像素，以及掩码 == 0 的 0（即：黑色）像素。

这是它的要点：

```
import numpy
original_ball = cv2.imread("Aqua-Ball-Red-icon.png")
ball = cv2.resize(bola_original, (64,64), fx=1, fy=1)
mask_original = cv2.imread("input-mask.png",0)
mask = cv2.resize(mask_original, (64,64), fx=1, fy=1)

max_value= numpy.max(mask)
mask/=max_value
res= ball*mask 
```

根据*input-mask.png*的颜色深度，您可能需要先将其降低为灰度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:27:07.717

由于掩码图像名称旁边的 0 参数，掩码未出现）。

# android - Android Webview 中的 HTML 页面

> ID：14554948
> 
> 赞同：1
> 
> 时间：2013-01-28T03:13:53.570
> 
> 标签：android, webview

我想在我的 android Webview 中显示 html 页面的静态数据。我有该 html 页面在服务器上的路径。如何显示内容。

我正在使用此代码。

```
 DefaultHttpClient httpClient = new DefaultHttpClient();

        String restUrl = host + url; 

        HttpGet request = new HttpGet(restUrl);

        request.setHeader("Accept", "application/json");

        HttpResponse response = httpClient.execute(request);

        responseData = readResponse(response); 
```

我收到 XML 格式的响应，这是一种登录页面。为什么它不显示数据。我已经登录到服务器。

# ios - 将一个 NSManagedObject 用于 UITableView 部分，它与另一个 NSManagedObject 的关系用于行？

> ID：14554950
> 
> 赞同：4
> 
> 时间：2013-01-28T03:14:20.397
> 
> 标签：ios, uitableview, core-data, nsfetchedresultscontroller, magicalrecord

是否可以设置一个`UITableView`with ，`NSFetchedResultsController`因为它在`dataSource`哪里`Contact Group`确定部分，并且与确定每个部分的行`Contact Group`的多对多关系？`Person`

所以我的数据模型看起来像这样。

```
Contact Group
 - Person
 - Person
 - Person
Contact Group
 - Person
 - Person
 - Person 
```

`Contact Group`是一`NSManagedObject`并且它与 有一对多的关系`Person` `NSManagedObjects`。基本上表格视图也应该如上所示。

我正在使用 MagicalRecord，如果这有所不同，这看起来对吗？

```
- (NSFetchedResultsController *)fetchedResultsController {
    if (!_fetchedResultsController) {
        _fetchedResultsController = [ContactGroup fetchAllSortedBy:@"displayOrder"
                                                           ascending:YES
                                                       withPredicate:nil
                                                             groupBy:@"SELF.contacts"
                                                            delegate:self];
    }
    return _fetchedResultsController;
} 
```

哦，我需要能够对每个部分中的联系人进行排序（并保留）。

任何指导表示赞赏。如果我需要更好地澄清，请随时发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:10:47.953

我没有使用 Magical Record 的经验，但是由于您主要想要来自 Person 的记录，因此您必须在 Person 而不是 ContactGroup 上调用该方法：

```
- (NSFetchedResultsController *)fetchedResultsController {
    if (!_fetchedResultsController) {
        _fetchedResultsController = [Person fetchAllSortedBy:@"displayOrder"
                                                   ascending:YES
                                               withPredicate:nil
                                                     groupBy:@"contactGroup.groupName"
                                                    delegate:self];
    }
    return _fetchedResultsController;
} 
```

# java - 日期递增构造函数不会编译

> ID：14554953
> 
> 赞同：1
> 
> 时间：2013-01-28T03:14:35.800
> 
> 标签：java

该程序应该提示用户输入日期，并且它会自行增加。这是我遇到问题的 DateTest 类。错误消息显示“无法在数组类型 Date[] 上调用 nextDay()”

更新

我摆脱了不必要的陈述。但现在我收到了这个错误信息，

“错误：在类 Date 中找不到主方法，请将主方法定义为：public static void main(String[] args)”

我必须将主要方法移动到任何地方吗？

```
import javax.swing.JOptionPane;

public class Date {

    private int month; // 1-12
    private int day; // 1-31 based on month
    private int year; // any year
    int value;

    public Date() {
        month = 1;
        day = 1;
        year = 1900;
    }

    public Date(int m, int d, int y) {
        month = m;
        year = y;
        day = d;
    }

    public String GetDate() {
        String Msg1 = month + "/" + day + "/" + year;
        JOptionPane.showMessageDialog(null, Msg1);
        return Msg1;
    }

    public void setMonth() {
        int value = Integer.parseInt(JOptionPane.showInputDialog("Enter Month:"));

        if (value > 1 && value < 13) // validate month  
        {
            month = value;
        } // check for leap year  
        else if (month == 2) {
            boolean isleap = true;
            if (year % 4 != 0) {
                isleap = false;
            } else {
                isleap = true;
            }

        } else // month is invalid  
        {
            String Message = "Month" + month + "Month must be 1-12";
            JOptionPane.showMessageDialog(null, Message);
        }
    }

    public void setDay() {
        int value2 = Integer.parseInt(JOptionPane.showInputDialog("Enter Day:"));
        int[] daysPerMonth = {0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
// check if day in range for month
        if (value2 > 0 && value2 <= daysPerMonth[month]) {
            day = value2;
        }

        value = value2;
    }

    public void setYear() {
        int value3 = Integer.parseInt(JOptionPane.showInputDialog("Enter Year:"));
        year = value3;
    }

    public int getMonth() {
        return month;
    }

    public int getDay() {
        return day;
    }

    public int getYear() {
        return year;
    }

    public int nextDay() {
        int cDay = day + 1;
        if (value == cDay) {
            day = cDay;
        } else {
            day = 1;
        }
        {
            NextMonth();
        }
        return day;
    }

    public int NextMonth() {
        if (12 == month) {
            year++;
        }
        return month = 1;
    }

    public String toString() {

        return month + "/" + day + "/" + year;

    }

}

class dateTest {

    public static void main(String args[]) {
        Date newDate = new Date(11, 27, 2011);
        final int arraySize = 1;

        {
            for (int i = 0; i < arraySize; i++) {
                newDate.setDay();
                newDate.setMonth();
                newDate.setYear();
            }
            for (int counter = 0; counter < 4; counter++) {

                newDate.nextDay();

                {

                    String Message = "Incremented Date:" + newDate.toString();
                    {
                        JOptionPane.showMessageDialog(null, Message);
                        System.exit(0);

                    }
                }
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:16:31.293

您的意思是执行以下操作吗？

```
newDate[counter].nextDay(); 
```

编译器非常清楚这个问题。`newDate`是一个数组，您需要选择数组的一个元素来调用该方法。

@ThaiTran 已经解决了实际问题。

您定义了两次相同的符号。如果它完全有效，我希望您想在第一个上调用该方法，但编译器认为您的意思是第二个。

```
Date newDate = new Date(11,27,2011);
....
Date [] newDate = new Date[arraySize]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T03:33:48.253

**对于您更新的错误**

这是因为 main 方法必须位于公共类中，而公共类又与您的 java 文件的名称相同。因此，您必须将文件名设置为`dateTest.java`，然后设置`public`对 dateTest 类的访问权限。请注意，一个 java 文件中只有一个公共类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T03:47:17.937

如果你想`dateTest`在同一个文件中工作`Date`，你可以把它变成一个`public static`内部类......

```
public class Date {

    /** Your Date Class Here **/    

    public static class dateTest {

        public static void main(String args[]) {
            Date newDate = new Date(11, 27, 2011);
            final int arraySize = 1;

            {
                for (int i = 0; i < arraySize; i++) {
                    newDate.setDay();
                    newDate.setMonth();
                    newDate.setYear();
                }
                for (int counter = 0; counter < 4; counter++) {

                    newDate.nextDay();

                    {

                        String Message = "Incremented Date:" + newDate.toString();
                        {
                            JOptionPane.showMessageDialog(null, Message);
                            System.exit(0);

                        }
                    }
                }
            }
        }

    }

} 
```

基本上，确保 1- 它是`static`，2- 它是公开的， 3- 它在类的类括号内`Date`......

# graph - 解决依赖关系和冲突的图（可能包含循环）

> ID：14554962
> 
> 赞同：2
> 
> 时间：2013-01-28T03:15:44.507
> 
> 标签：graph, dependencies, conflict, boolean-logic, boolean-operations

给定一个图，其中每个节点可能包含任意依赖关系或与其他节点的冲突，从而导致任何可能的安排，包括循环和矛盾的引用。

我正在尝试计算一个稳定的结果列表，最大程度地包含能够遵守所有约束的节点列表。如果有的话，我只需要找到一种可能的解决方案。

在下面的示例中，“A 依赖于 B”意味着 A 为真 B 必须为真。“B 与 A 冲突”意味着 B 为真 A 一定不为真。依赖和冲突都没有优先级，具有相同的权重并同时应用。

在第三个示例中，“A”没有出现，因为它依赖于与 B 冲突的 D。因为 A 也需要 B .. A 不能作为 D 的冲突而存在，并且 A 的依赖项禁止它。

```
A depends on B
B conflicts with A
= B

A depends on B
B depends on A
= A and B

A depends on B
A depends on D
B depends on C
D conflicts with B
D conflicts with C
= B and C or D

A conflicts with B
B conflicts with C
C conflicts with D
D conflicts with A
= A and C or B and D 
```

我一直在尝试提出一种可行的算法，但到目前为止，我的努力类似于启发式 gobblygook，它在非平凡的图表上失败了。任何见解，阅读材料的指针或算法名称将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:58:45.943

我假设

*   “A 依赖于 B”意味着**A 隐含 B**并且
*   “B 与 A 冲突”意味着**B 不暗示 A**。

现在，您有**A 意味着 B = not A or B**和**B 意味着 not A = not B or not A**。这意味着问题归结为找到析取合取（也称为*子句*）的解决方案，其中每个子句都有两个参数（A，不是 A，B 或不是 B）。

这个问题被称为 2-satisfiability。您可以在网络中找到多项式时间算法，例如，从[http://en.wikipedia.org/wiki/2-satisfiability](http://en.wikipedia.org/wiki/2-satisfiability)开始。

据我了解现代 SAT 求解器的分辨率，没有必要编写自己的算法。SAT 求解器应该能够在多项式时间内自动求解此类实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:58:43.373

将问题中使用的语言翻译成布尔表达式，我们有：

“A 取决于 B”=>“（a 和 b）或（非 a）”

和

"B 与 A 冲突" => "(b and not a) or (not b)"

因此，一种简单的编写方法（在 Python 3 中）是生成笛卡尔积（给出所有可能的选择），然后仅选择满足约束的情况。为简单起见，我使用索引而不是字母作为输入，因此`y[0]`等价于`A`等。不过，我已将输出转换为字母。

对于 n 个节点，这种方法将生成并测试所有 2^n 个可能的情况。有关更复杂但可能更有效的方法，请参见下文。

```
import itertools

bbb = (True,False)

def resolve(n,test):
    return [x for x in itertools.product(bbb,repeat=n) if test(x)]

def dependsOn(a,b):
    return (a and b) or (not a)

def conflictsWith(b,a):
    return (b and not a) or (not b)

letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

def pr(d):
    for dd in d:
        s = [letters[i] for i in range(len(dd)) if dd[i] ]
        if (len(s) > 0):
            print(s,end = " ")
    print()

pr(list(resolve(2,lambda y: 
    dependsOn(y[0],y[1]) and 
    conflictsWith(y[1],y[0])
    )))
pr(list(resolve(2,lambda y: 
    dependsOn(y[0],y[1]) and 
    dependsOn(y[1],y[0]) 
    )))
pr(list(resolve(4,lambda y: 
    dependsOn(y[0],y[1]) and 
    dependsOn(y[0],y[3]) and
    dependsOn(y[1],y[2]) and 
    conflictsWith(y[3],y[1]) and 
    conflictsWith(y[3],y[2])
    )))
pr(list(resolve(4,lambda y: 
    conflictsWith(y[0],y[1]) and
    conflictsWith(y[1],y[2]) and
    conflictsWith(y[2],y[3]) and
    conflictsWith(y[3],y[0])
    ))) 
```

这给出了结果：

```
['B']
['A', 'B']
['B', 'C'] ['C'] ['D']
['A', 'C'] ['A'] ['B', 'D'] ['B'] ['C'] ['D'] 
```

...对于四个测试用例。

有关更多信息，您可以查看[关于真值表的 Wikipedia 条目](http://en.wikipedia.org/wiki/Truth_table)。

（编辑）

对于具有许多节点和许多约束的问题，一种更有效的方法是逐步构建节点列表，然后仅在该部分列表符合约束的情况下从每个部分列表继续构建，至少在它已被填充的范围内远的。我们可以通过将`resolve`上面的函数替换为以下版本并替换`dependsOn`and`conflictsWith`函数来匹配：

```
import queue

# The following constraint functions return True if the constraint is met
# or if one or more of the elements relating to the constraint is None

def dependsOn(a,b):
    if (a != None) and (b != None):
        return (a and b) or (not a)
    else:
        return True

def conflictsWith(b,a):
    if (a != None) and (b != None):
        return (b and not a) or (not b)
    else:
        return True

def resolve(n,test):
    result = []
    testCount = 0
    # initialise the list with all None
    lst = [None] * n
    q = queue.Queue()
    q.put(lst)
    while not q.empty():
        lst = list(q.get())
        testCount += 1
        if test(lst):
            # the list complies with the constraints, at least
            # as far as it is populated
            if lst[-1] != None:
                # we have a fully-populated list
                result.append(lst)
            else:
                i = lst.index(None)
                lst[i] = True
                q.put(list(lst))
                lst[i] = False
                q.put(list(lst))
    print ("testCount = %d" % testCount)
    return result 
```

这对四个测试用例给出了相同的结果。但是，对于第三和第四个测试用例， 的值`testCount`分别为 21 和 23。这超过了笛卡尔积解决方案所需的测试总数（n=4 时为 16），但是，对于有更多节点和更多约束的情况，这种方法避免了测试无法测试的节点子集可能包含一个解决方案，因此可能需要比笛卡尔积解决方案少得多的测试。当然，在约束很少或没有约束的最坏情况下，这种方法最多需要 2^(n+1) - 1 次测试。事实上，前两个测试用例确实发生了这种情况，`testCount`使用该算法的测试用例是 7。

请注意，此处显示的实现是粗略的，当然可以针对速度进行优化。

# .net - 从字符串中解析数字

> ID：14554963
> 
> 赞同：2
> 
> 时间：2013-01-28T03:15:45.083
> 
> 标签：.net, regex, vb.net

我有以下字符串格式，可以有以下格式

```
2Y11M23D4H  means Y=2,M=11,D=23,H=4
11Y2M11D19H means Y=11,M=2,D=11,H=19
3Y4H              Y=3,H=4
51H               H=51 
```

我正在使用 vb.net 并且我想将数字保存到变量中，正如您在上面的示例中看到的那样，每个数字都与它之后的变量相关，我的问题是我找不到在 a 之前获取数值的好方法特点

我想找到总天数加倍

以下代码仅适用于每个字符前的单个数字

```
 If periodstring.Contains("Y") Then
        totaldays += Convert.ToDouble(periodstring.Substring(periodstring.IndexOf("Y") - 1).First) * 365
    End If

    If periodstring.Contains("M") Then
        totaldays += Convert.ToDouble(periodstring.Substring(periodstring.IndexOf("M") - 1).First) * 30
    End If

    If periodstring.Contains("D") Then
        totaldays += Convert.ToDouble(periodstring.Substring(periodstring.IndexOf("D") - 1).First)
    End If

    If periodstring.Contains("H") Then
        totaldays += Convert.ToDouble(periodstring.Substring(periodstring.IndexOf("H") - 1).First) / 24
    End If 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T03:18:38.057

[这是正则表达式](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex%28v=vs.80%29.aspx)的主要候选者。像这样的东西会起作用：

```
Dim rex as RegEx
rex = new RegEx("(\d+)(\w+)")

Dim startPos as Int
Dim m as Match    

startPos = 0
Do
    m = rex.Match(inputString, startPos)
    If(m.Success) Then
        ' m.Groups(1)  will contain the digits
        ' m.Groups(2)  will contain the letter

        startPos = startPos + m.Length
    End if
While(m.Success) 
```

正则表达式包含两组：\d+ 和 \w+。第一组匹配一堆数字，第二组匹配一堆字母。

只要正则表达式匹配，您就可以匹配字符串并继续提取数字组和字母组。并相应地解析它们..

在此处查看这个[简单的教程，](http://www.dotnetperls.com/regex-match-vbnet)以快速开始使用 Match 类在 VB.net 中使用正则表达式提取匹配项。

# ruby - 在 Ruby 中覆盖 attr_* 方法

> ID：14554964
> 
> 赞同：3
> 
> 时间：2013-01-28T03:15:58.343
> 
> 标签：ruby

我正在阅读《[The Well-Grounded Rubyist](https://rads.stackoverflow.com/amzn/click/com/1933988657)》这本书，我突然想到了这个问题。我知道在 Ruby 中可以重新打开一个类并覆盖该方法。

例子：

```
class A
  def x
    "First definition of x"
  end

  def x
    "Second definition of x"
  end
end

test = A.new
test.x #returns "Second definition of x" 
```

基于上面的结果，我很好奇是否可以`attr_accessor`用我自己的（随机）定义覆盖类方法。这就是我的想法：

```
class Dummy
  attr_accessor :test

  def self.attr_accessor(method_name)
    puts "Overwrite the default functionality of attr_accessor by printing this text instead."
  end
end

d = Dummy.new
d.test #not sure why this returns nil instead of putting my message
Dummy.attr_accessor(test) #fails because of ArgumentError: wrong number of arguments (0 for 2..3) 
```

对于上面的两个示例，我希望通过修补并提出问题来获得您的洞察力，从而更好地理解 Ruby。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T03:26:34.143

您走在正确的道路上，但类定义在运行时按顺序执行。您需要在调用它之前定义您的新方法，否则原始方法将用于该方法。

如果你这样做

```
class Dummy
  def self.attr_accessor(method)
    puts 'your message here'
  end
  attr_accessor :test # message printed
end

d = Dummy.new
d.test # raises an error, since we aren't creating a test method anymore
Dummy.attr_accessor(test) #will still fail, read on 
```

`test`是 Ruby 中的一个方法，对应于 shell 中的`test`内置方法。这种方法就是你最后得到错误的原因。你真正想要的是

```
Dummy.attr_accessor(:test1) 
```

请注意，您将无法调用 normal `attr_accessor`，因为它是`self`类定义内部的类实例上的私有方法。（IOW，`attr_accessor`是 的私有实例方法`Module`，在执行类定义时，`self`是 的实例`Module`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T03:35:33.983

是的，这是可能的，而你刚刚做到了！

```
d.test #not sure why this returns nil instead of putting my message 
```

返回`nil`是因为您`attr_accessor :test`在下面重新定义它之前使用了它，因此，Ruby 执行了`attr_accessor`的默认行为并在`Dummy`类中创建了一个成员和访问器。它返回`nil`是因为成员的值未设置`nil`...。

```
Dummy.attr_accessor(test) #fails because of ArgumentError: wrong number of arguments (0 for 2..3) 
```

失败不是因为你认为的原因。此调用有效：

```
Dummy.attr_accessor("method_name") 
```

问题是您正在调用一个名为的方法`test`并且没有提供它的所有预期值。请参阅`Kernel.test()` [http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-test](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-test)的文档。

您看到的错误消息是因为您错误地调用了测试方法，而不是因为重新定义`attr_accessor`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T03:26:23.283

在您的`Dummy`课程中，调用的`Class`版本`attr_accessor`是因为在调用时尚`Dummy`未定义版本`attr_accessor`。如果在调用之前移动定义，行为会有所不同。

```
class Dummy    
  def self.attr_accessor(method_name)
    puts "Overwrite the default functionality of attr_accessor by printing this text instead."
  end

  attr_accessor :test
end 
```

这将在读取类定义时打印您的消息。当您尝试`test`在`Dummy`对象上调用该方法时，您会收到一个错误，因为没有定义这样的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T03:26:02.523

如果你颠倒你的`attr_accessor`电话和你的顺序会发生什么`def self.attr_accessor`？我不知道这是否会解决它，但你当然不能按照你的顺序去做。请记住，当您打开带有类似 行的类时`class Dummy`，您正在实时执行真实代码。所以*首先*你打电话`attr_accessor`，*然后*你试图重新定义它。好吧，我不知道您是否可以这样重新定义它，但是您当然需要在调用它*之前*尝试重新定义它，否则您将调用旧版本！

# asp.net - 如何更改 ASP.NET 的 Request.Form 集合的比较器？

> ID：14554968
> 
> 赞同：1
> 
> 时间：2013-01-28T03:16:33.587
> 
> 标签：asp.net, .net, collections, icomparer

ASP.NET 的`Request.Form["key"]`集合使用不区分大小写的比较器。这把我搞砸了，因为我的表单 POST 数据看起来像：

```
"subject=MySubjectLowerCase&Subject=MySubjectUpperCase" 
```

结果，`Request.Form["subject"]`（或`Request.Form["Subject"]`就此而言）返回两个值：

```
MySubjectLowerCase,Subject=MySubjectUpperCase 
```

但我想要的是我的特定键的单个值，区分大小写。

如何将比较器更改为区分大小写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T04:59:02.437

您无法更改内置比较器。但是，如果您愿意解析原始实体主体，则可以通过 HttpRequest.InputStream、GetBufferlessInputStream 或 GetBufferedInputStream 访问它。前两个将使 Request.Form 无法访问；后者保留 Request.Form 以防另一部分请求管道依赖它。这应该仅作为最后的手段来完成，因为编写解析器可能是一个非常棘手的练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T03:56:29.047

Request.Form 是一个 NameValueCollection 对象。您将需要为它实现一个自定义的 IComparerInterface。您会发现这很有用：http: [//msdn.microsoft.com/en-us/library/system.collections.icomparer (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.collections.icomparer(v=vs.100).aspx)

话虽如此，tvanfosson 是正确的，实现区分大小写的参数值是一个坏主意。

# asp.net-mvc - ASP.net & MVC : AJAX & 更新 PartialView & 确认消息

> ID：14554974
> 
> 赞同：2
> 
> 时间：2013-01-28T03:17:44.127
> 
> 标签：asp.net-mvc, jquery, confirmation, asp.net-mvc-partialview

我正在使用 ASP.Net MVC 来制作我的应用程序

我实际上是在尝试从我的数据库中删除一个条目，首先我必须有一条确认消息，当操作完成时我想刷新我的 PartialView

这是我的代码

```
 <%= Ajax.ActionLink(
            "Supprimer", 
            "Delete", 
            "Users",
            new { item.ID },
            new AjaxOptions {
              Confirm= "confirmMethod",
              UpdateTargetId = "usersListeID",
              OnSuccess = "success"
           }
              )%> 
```

问题是确认选项是一个简单的 ajax 消息，我想使用我自己的消息（结构良好，因为我使用 ajax 和 jQuery 来制作它）

```
function confirmMethod() {
$.msgBox({
    title: "Demande de confirmation",
    content: "Voulez-vous effectuer cette action?",
    type: "confirm",
    buttons: [{ value: "Oui" }, { value: "Non"}],
    success: function (result) {
        if (result == "Non") {
            abort();
        }
    }
});} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:46:30.803

您可以使用标准`Html.ActionLink`：

```
<%= Ajax.ActionLink(
    "Supprimer", 
    "Delete", 
    "Users",
    new { item.ID },
    new { @class = "delete" }
) %> 
```

然后使用jQuery订阅`.click()`tis锚的事件：

```
$(function() {
    $('.delete').click(function() {
        var anchor = this;
        // Show the confirmation dialog
        $.msgBox({
            title: "Demande de confirmation",
            content: "Voulez-vous effectuer cette action?",
            type: "confirm",
            buttons: [{ value: "Oui" }, { value: "Non"}],
            success: function (result) {
                if (result == "Oui") {
                    // send the AJAX request if the user selected "Oui":
                    $.ajax({
                        url: anchor.href,
                        type: 'POST',
                        success: function(data) {
                            // When the AJAX request succeeds update the 
                            // corresponding element in your DOM
                            $('#usersListeID').html(data);
                        }
                    });
                }
            }
        });

        // Always cancel the default action of the link
        return false;
    });
}); 
```

# java - Java return 语句混淆

> ID：14554983
> 
> 赞同：2
> 
> 时间：2013-01-28T03:19:45.723
> 
> 标签：java

我只想问，(--a,b) 是什么意思？谁能给我解释一下。目前我只想手动跟踪计算，但我被卡住了。

这部分代码：

> 否则 if (a%2 == 0) return (-a) * b + print_it(--a, b);

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T03:21:47.940

表达式`--a`是前置减量运算符，意思是：在表达式中使用它`a` *之前先递减 的值。*将其与使用表达式`a--`中的当前值的表达式进行比较`a`，并在评估结束时将其递减。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T04:14:45.613

`--`和`++`pre 和 post 运算符是 Java 看起来像 C 或 C++ 的一个领域，但具有明显不同的规则。

评估永远不会出现延迟，结果是完全确定的。关键概念是将运算符的副作用与其值分开。

表达式求值的一般规则在[第 15 章](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html)。Java 语言规范中的表达式。--a的细节在[15.15.2 中。Prefix Decrement Operator --](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.15.2)作为副作用，它将 a 的值减 1。该值是存储新值*后a 的值。*

[后缀减量](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.14.3)具有相同的副作用，在表达式求值的同一点执行，但后缀减量表达式的值是存储新值*之前的变量值。*

# c# - 使用联系人选择器时出现 System.UnauthorizedAccessException

> ID：14554986
> 
> 赞同：0
> 
> 时间：2013-01-28T03:19:55.420
> 
> 标签：c#, contacts, windows-phone-8

我正在尝试将联系人选择器植入到我的 wp8 应用程序中，但得到错误`System.UnauthorizedAccessException`我使用来自[http://www.windowsphonegeek.com/articles/How-to-choose-a-Contact-and-get的确切代码-Contact-details-in-a-WP7-app](http://www.windowsphonegeek.com/articles/How-to-choose-a-Contact-and-get-Contact-details-in-a-WP7-app)但它对我不起作用......

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:16:14.510

您是否记得将 ID_CAP_CONTACTS 添加到您的 WmAppManfiest.xml 以请求联系人权限？

# php - 数组排序，如何在整个数组中将键 1 更改为键 2

> ID：14554988
> 
> 赞同：0
> 
> 时间：2013-01-28T03:20:19.710
> 
> 标签：php, arrays, sorting

所以我有一个像这样的数组：

```
//        user 1 $historia[id_usuario][id_historia]
    $historia[1][1] = '1asdfasf';
    $historia[1][8] = '1asdfasf';
    $historia[1][7] = '1asdfasf';
    $historia[1][4] = '1asdfasf';

//        user 2 $historia[id_usuario][id_historia]
    $historia[2][5] = '2asdfasf';
    $historia[2][6] = '2asdfasf';
    $historia[2][3] = '2asdfasf';
    $historia[2][2] = '2asdfasf'; 
```

我需要让它们按第二个键排序，最终结果应该是这样的：

```
 //person1
    $historia[1][1] = '1asdfasf';
    $historia[8][1] = '1asdfasf';
    $historia[7][1] = '1asdfasf';
    $historia[4][1] = '1asdfasf';

    //person2
    $historia[5][2] = '2asdfasf';
    $historia[6][2] = '2asdfasf';
    $historia[3][2] = '2asdfasf';
    $historia[2][2] = '2asdfasf'; 
```

接着！

```
 $historia[1][1] = '1asdfasf';
    $historia[2][2] = '2asdfasf';
    $historia[3][2] = '2asdfasf';
    $historia[4][1] = '1asdfasf';
    $historia[5][2] = '2asdfasf';
    $historia[6][2] = '2asdfasf';
    $historia[7][1] = '1asdfasf';
    $historia[8][1] = '1asdfasf'; 
```

我试图阅读一些数组排序脚本，但我变得非常困惑，所以我实际上需要外部帮助......你们中的任何人都可以给我一个领导吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:01:27.933

```
$historia[1][1] = '1asdfasf';
$historia[1][8] = '1asdfasf';
$historia[1][7] = '1asdfasf';
$historia[1][4] = '1asdfasf';
$historia[2][5] = '2asdfasf';
$historia[2][6] = '2asdfasf';
$historia[2][3] = '2asdfasf';
$historia[2][2] = '2asdfasf';

$new_array=array();
foreach($historia as $uid=>$sub)
{
    foreach($sub as $hid=>$val)
    {
        if(empty($new_array[$hid])) $new_array[$hid]=array();
        $new_array[$hid][$uid]=$val;
    }
}
ksort($new_array);
print_r($new_array); 
```

输出：

```
Array
(
    [1] => Array
        (
            [1] => 1asdfasf
        )

    [2] => Array
        (
            [2] => 2asdfasf
        )

    [3] => Array
        (
            [2] => 2asdfasf
        )

    [4] => Array
        (
            [1] => 1asdfasf
        )

    [5] => Array
        (
            [2] => 2asdfasf
        )

    [6] => Array
        (
            [2] => 2asdfasf
        )

    [7] => Array
        (
            [1] => 1asdfasf
        )

    [8] => Array
        (
            [1] => 1asdfasf
        )

) 
```

# php - 无法使用 DomDocument 编辑/保存 DOM XML 元素属性

> ID：14554993
> 
> 赞同：1
> 
> 时间：2013-01-28T03:21:05.463
> 
> 标签：php, xml, dom, domdocument

我有一个如下所示的 XML 文件。我必须使用 DOMDocument，所以不允许额外的类。（注意我已经简化了，真实文件在 saleItems 和 catalogItems 中都有很多条目）：

```
<?xml version="1.0"?>
<catalog>
    <saleItems count="3">

        <item name="Xbox 360 Wired Controller" price="19" stock="50" salePrice="12" onSale="yes">
            <image>Xbox360Controller.jpg</image>
            <description>A wired controller for an Xbox 360 Game Console. Comes in either white or black.</description>
        </item>

    </saleItems>

    <catalogItems count="12">
        <item name="Dell Alienware Laptop 15 inch" price="2500" stock="200" salePrice="0" onSale="no">
            <image>alienwareLaptop.jpg</image>
            <description>sample description here</description>
        </item>
    </catalogItems>
</catalog> 
```

**我需要执行以下操作：**

**1）**根据 name="" 属性找到要更新的节点（例如：我必须找到合适的项目的唯一数据是项目名称）

**2）**找到后，我需要编辑该项目的数量属性（减去1）

**3)**数量更新后，我需要将 XML 文件保存回服务器。

我对此束手无策，我很难让 $domDocument 合作。这是我到目前为止所拥有的，但它似乎根本无法正常工作。我可以获得库存并减去它，但我的更改没有保存到文件中。

```
foreach( $GLOBALS['catalogItems'] as $item ){
    if( $item->getAttribute('name') == $itemName ){
        // we have a match
        $oldStock = $item->getAttribute("stock");
        $item->setAttribute("stock", $oldStock + $modifier);

        $dom->save('xml/catalog.xml');
    }
} 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:42:30.550

**通过 PHP 聊天解决：** [https ://chat.stackoverflow.com/transcript/message/7402294#7402294](https://chat.stackoverflow.com/transcript/message/7402294#7402294)

问题是他的`$GLOBALS['catalogItems']`包含`DOMText`项目的选择器，在调用时会失败`$item->getAttribute('name')`。解决方案是确保`$item`它实际上是一个`item`节点，然后进行其他检查，如果它是一个`item`.

# eclipse - 数据步骤中的多个 SET/MERGE 语句

> ID：14554997
> 
> 赞同：1
> 
> 时间：2013-01-28T03:21:11.057
> 
> 标签：eclipse, sas

```
    数据_null_；
    设置 hash.bankholidays;

        保留总数 0；
        格式化日期：date9.;

        设置 hash.oyster;
            日期时间 = 日期部分（日期时间）；
            格式化日期时间：date9。;

            如果 date eq datetime 则执行；
            总计 = 总计 + 金额；结尾;

    把“总=”总；

    跑;    

```

这给了我一个 Eclipse 中的弹出对话框： `Multiple SET/MERGE statements in a data step`

我想知道这里发生了什么？似乎是在说你不能在 set 语句中使用 set 语句，但我确信我以前做过。

例如。

```
    数据 data_ex.giftwrap_ribbon_final;
    设置 data_ex.giftwrap_w_ribbon_fl；
        如果没有丢失（第一个）并且没有丢失（最后一个）那么做；
            i = 从头到尾；
            设置 data_ex.ribbon (keep=ribbon_colour) 点 = i;
            输出;
            结尾;
        结尾;

        否则做；
        色带颜色 = '';
        输出;
        结尾;
    跑;

```

我可以在这里澄清一下吗？

另外，关于最后一次。如何告诉它在 set 语句完成后执行 put？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:03:25.463

您需要将 set 语句包装在 do 循环中并使用指针。

```
data _null_;
set hash.bankholidays;

    retain total 0; 
    format date :date9.;

    do i = 1 to nobs; 
        set hash.oyster point = i nobs = nobs; 
            datetime = datepart(datetime);
            format datetime :date9\. ;

            if date eq datetime then do;
            total = total + amount; end;
    end;

put "total =" total; 

run; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:47:06.397

[您可以通过使用 END= 选项（在 SET 语句上）知道在SET](http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a000173782.htm)语句上执行最后一次观察的时间......但是，您不能将此选项与 POINT= 选项一起使用

```
data _null_;
set hash.bankholidays end=first_last;

retain total 0; 
format date :date9.;

set hash.oyster end=second_last;
    datetime = datepart(datetime);
    format datetime :date9\. ;

    if date eq datetime then do;
    total = total + amount; end;

if second_last then put "total =" total; 

run; 
```

您绝对可以在 DATA STEP 中执行多个 SET 语句...您是否尝试过在 SAS 产品 IDE（EG 或 PC SAS）而不是 Eclipse 中执行此语句？