# StackOverflow 问答 13137000-13137999

# listview - JQM Listview 数据过滤器在 iphone 或模拟器上不起作用

> ID：13137000
> 
> 赞同：3
> 
> 时间：2012-10-30T10:25:37.290
> 
> 标签：listview, jquery-mobile, filter, cordova

我有一个启用了数据过滤器的列表视图。列表项是动态加载的。它在我的 Mac 上的浏览​​器中完美运行，但无法在 iPhone 或模拟器中运行。当您单击搜索字段时，键盘会弹出，但当您开始输入文本时，文本字段中不会输入任何内容。

这是我的列表视图的页面内容

```
<div id="woordenlijst_content" data-role="content" data-iscroll>
    <ul class="ul_woordenlijst_content" data-role="listview" data-filter="true" data-filter-placeholder="Zoek...">
    </ul>
</div> 
```

这就是我加载列表项的方式

```
$('#woordenlijst').live('pageinit', function(event) {
                  $.each(trefwoorden_array_sorted_nl, function(index, trefwoorden) {
                    $('.ul_woordenlijst_content').append('<li class="woord_nl" data-icon="arrow-r"><a id="opendialog_woordenlijst" class="woord_nl" selected-woord-nl="' + trefwoorden.nl +'" selected-woord-fr="' + trefwoorden.fr +'" audio="' + trefwoorden.sound + '">' + trefwoorden.nl + '</a></li>');
                  });
                  $('.ul_woordenlijst_content').listview('refresh');}); 
```

列表视图被完美填充，由于刷新，样式被附加。滚动有效，过滤器栏在顶部...尽管当我尝试在 iphone 上输入文本时，没有输入任何文本。

我不知道它有什么问题:-(

我正在使用 JQM 1.2.0 Phonegap Cordova 2.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:12:11.333

至少对我来说，我找到了解决方案。

在为 xcode 创建一个 cordova 设置时，会生成一个文件 index.css。在

```
* { } 
```

寻找

```
-webkit-user-select: none;                  /* prevent copy paste, to allow, change 'none' to 'text' */ 
```

并删除此行。

它会工作的。

# ruby-on-rails - id_element 未在 rails3-jquery-autocomplete 上更新

> ID：13137001
> 
> 赞同：2
> 
> 时间：2012-10-30T10:25:38.337
> 
> 标签：ruby-on-rails

如果我不添加选项分隔符就可以了" => ','

但如果我添加分隔符，'id_element' 不会更新" => ',' 选项

```
<%= hidden_field_tag "to_provider_ids" %>
<%= autocomplete_field_tag 'to', '', autocomplete_provider_source_agency_name_users_path, "data-delimiter" => ',',, :id_element => '#to_provider_ids' %> 
```

请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T02:02:19.563

我使用“railsAutocomplete.select”事件来更新 id。

```
$('#my_autocomplete_field').bind('railsAutocomplete.select', function(event, data){
  /* Do something here */
  alert(data.item.id);
}); 
```

# python - Python依赖项导入

> ID：13137002
> 
> 赞同：2
> 
> 时间：2012-10-30T10:25:40.277
> 
> 标签：python

假设我使用了一些依赖于另一个代码的第 3 方模块：

```
# third_party.py
from package import fun, A

class B(A):
    def foo(self):
        self.do()
        self.some()
        self.stuff()
        return fun(self) 
```

然后我想在我的代码中继承这个类来改变功能：

```
# my_code.py

from third_party import B

# from third_party import fun?
# from package import fun?

class C(B):
    def foo(self):
        return fun(self) 
```

更好的是：`from package import fun`还是`from third_party import fun`可以访问`fun`？

我喜欢第二种变体，因为我可能不关心实际路径并从`third_party`包中导入所有依赖项，但是这种方式有什么缺点吗？这是一个好习惯还是坏习惯？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:36:18.933

我不认为从第三方包中导入函数/类是一种不好的做法，它甚至可能有一些好处（例如：如果你想给一个包打补丁，或者需要确定一些东西已经设置好了正确）。

甚至可能需要支持各种设置。考虑[`ElementTree`](http://docs.python.org/2/library/xml.etree.elementtree.html)API，它在特定的 Python 版本上是不同的，甚至可能由第三方库提供（取自[此处](http://lxml.de/tutorial.html)）：

```
# somepackage.py

try:
  from lxml import etree
  print("running with lxml.etree")
except ImportError:
  try:
    # Python 2.5
    import xml.etree.cElementTree as etree
    print("running with cElementTree on Python 2.5+")
  except ImportError:
    try:
      # Python 2.5
      import xml.etree.ElementTree as etree
      print("running with ElementTree on Python 2.5+")
    except ImportError:
      try:
        # normal cElementTree install
        import cElementTree as etree
        print("running with cElementTree")
      except ImportError:
        try:
          # normal ElementTree install
          import elementtree.ElementTree as etree
          print("running with ElementTree")
        except ImportError:
          print("Failed to import ElementTree from any known place") 
```

现在，它保证`somepackage`包含一个工作`etree`实现，即使在不同的 Python 安装上，并且您的包用作抽象。

# android - Android Webview 重定向循环

> ID：13137009
> 
> 赞同：5
> 
> 时间：2012-10-30T10:26:03.887
> 
> 标签：android, webview

我的项目中有一个 Webview。

某些页面使用 javascript 链接到其他页面。

IE。我单击链接到第 2 页的链接 1。在第 2 页中，javascript 重定向到第 3 页。

在第 3 页中，我捕获 onBackpress 并检查 webview cangoback。如果可以，我调用 webview.goBack()。

但是这样做会打开第 2 页，然后自动重定向到第 3 页。使用户很难退出活动。

有谁知道如何防止重定向循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-27T04:20:34.617

使用 location.replace(url) 而不是 location.href=url。或者在重定向之前给一些延迟。

# .net - Autofac 到 Ninject

> ID：13137014
> 
> 赞同：2
> 
> 时间：2012-10-30T10:26:16.863
> 
> 标签：.net, dependency-injection, ninject, ioc-container, autofac

为了在我的所有开发中设置统一标准，我创建了一个核心库。主要功能之一是将 Action<...> 发送到基于 Autfac 的依赖注册器。我想搬到ninject。

我目前坚持提供绑定密钥（id）并将参数集合发送到绑定。

Autofac代码是：

```
public void AddComponentWithParameters(Type service, 
    Type implementation, IDictionary<string, string> properties, 
    string key = "")
{
    UpdateContainer(x =>
    {
        var serviceTypes = new List<Type> { service };

        var temp = x.RegisterType(implementation)
            .As(serviceTypes.ToArray())
            .WithParameters(properties
            .Select(y => new NamedParameter(y.Key, y.Value)));

        if (!string.IsNullOrEmpty(key))
        {
            temp.Keyed(key, service);
        }
    });
} 
```

ninject 代码：

```
public void AddComponentWithParameters(Type service, 
    Type implementation, 
    IDictionary<string, string> properties, string key = "")
{
    UpdateContainer(x =>
    {
        var serviceTypes = new List<Type> { service };

        var temp = x.Bind(serviceTypes.ToArray())
            .To(implementation)
            problem 1====>.WithParameters(properties
                .Select(y => new NamedParameter(y.Key, y.Value)));

        if (!string.IsNullOrEmpty(key))
        {
            problem 2====> temp.Keyed(key, service);
        }
    });
} 
```

这个想法基于 nopCommerce DI 管理。

# liferay - 如何知道站点管理员和站点所有者拥有哪些权限？

> ID：13137018
> 
> 赞同：4
> 
> 时间：2012-10-30T10:26:21.930
> 
> 标签：liferay, liferay-6, user-permissions

我怎么知道以下 Liferay 角色有什么权限：

1.  站点管理员
2.  网站所有者

我看不到`ResourcePermissions`表中为上述两个系统角色和角色所做的任何条目`Administrator`，因此我认为这使`Permission...Service`类在我的情况下无用。

* * *

### 用例

我们需要做的是赋予`Site Administrator`角色但删除一些权限，例如特定的`Site Administrator`不应该能够更新站点设置或不应该能够访问控制面板上的某些屏幕等。

我们正在考虑创建一个单独的角色 ( `Custom Site Admin`)，因为我们无法为 Liferay 创建的角色定义权限，然后我们将分配`Site Administrator`给该角色的所有权限并删除用例中指定的一些权限。

* * *

**编辑：**
另一个问题是，如果我创建一个新角色并分配所有权限并删除一些权限，它会影响性能吗？

* * *

**版本：** Liferay 6.1 GA2

如果您知道有关此问题的其他解决方法，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T21:45:40.123

**区别**

管理员拥有他们描述的域的所有权限，只有一个值得注意的例外。

*   他们不能分配或删除其他管理员。

例如，“站点管理员”被授予该站点的所有权限，但再次分配其他站点管理员除外。

对于您的用例，我将创建另一个角色。

**另一个问题是，如果我创建一个新角色并分配所有权限并删除一些权限，它会影响性能吗？**

不。考虑到还有 2 个其他角色“guest”和“member”，它们的使用频率要高得多，这将需要以与您的新自定义角色相同的方式进行查找。

**但是你能告诉我网站所有者和网站管理员之间的不同权限到底是什么吗？**

所有迹象都表明它是硬编码的，因为方法中有一些方法，如 ,`PermissionChecker`等`isSiteAdmin`，这些方法检查用户是否具有这些角色并允许他们执行该特定操作。`isSiteOwner``isOmniAdmin`

通常，以下操作将允许您为用户分配角色：

*   具有“分配用户角色”操作的组权限
*   具有“分配成员”操作的角色权限

但是，即使您将这些操作授予任何其他角色，您仍然无法使人们成为“站点管理员”或“站点所有者”而不是“站点所有者”

# svn - SVN 预提交挂钩以限制文件扩展名被提交

> ID：13137023
> 
> 赞同：3
> 
> 时间：2012-10-30T10:26:31.080
> 
> 标签：svn, pre-commit-hook, collabnet

在 Collabnet SVN 的预提交脚本中使用以下代码来限制要提交的特定文件扩展名，但它正在提交所有文件。你能告诉我哪里出错了。

```
#!/bin/sh

REPOS="$1"
TXN="$2"

SVNLOOK=/home/csvn/csvn/bin/svnlook

LOGMSG=`$SVNLOOK log -t "$TXN" "$REPOS" | grep "[a-zA-Z0-9]" | wc -c`

if [ "$LOGMSG" -lt 10 ];
then
  echo -e "\n===========================================================" 1>&2
  echo -e "|| COMMENTS ARE MADE MANDATORY.PLEASE ENTER RELEVANT COMMENT & COMMIT AGAIN Sanjeev sas||" 1>&2
  echo -e "===========================================================" 1>&2
  exit 1
fi

$SVNLOOK changed -t $TXN $REPOS | awk '
BEGIN {
FILTER=".(sh|xls|xlsx|pdf|jpg|JPG|gif|GIF|png|PNG|doc|DOC|docx|DOCX|mpg|swf|avi|mp3|mp4|zip|rar|gz|csv|o|obj|tar|gz|JPEG|jpeg|WMV|wmv|DAT|dat|3GP|3gp|MPEG|mpeg|VOD|vod|ear|jar|war|exe|ppt|PPT|PPTX|pptx|7z|iso|ISO|EAR|WAR|JAR|msg|MSG|rtf|RTF|xlsm|XLSM|vsd|VSD|dot|DOT|camrec|ECF|ecf|mff|MFF|class|CLASS)$"
}
{
 for (i = 1; i < 2; i++) $i = ""; sub(/^ */, "");
 if(match(tolower($1),FILTER))
 { 
     print "File" $1 "is not allowed file type to commit" 
     exit 1
 }
}'    

exit 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:59:05.920

下面的脚本对我有用！！让我知道你的想法

```
#!/bin/bash

REPOS=$1
TXN=$2
AWK=/bin/awk
SVNLOOK="/usr/bin/svnlook";

#Put all the restricted formats in variable FILTER
FILTER=".(sh|xls|xlsx|exe|xlsm|XLSM|vsd|VSD|bak|BAK|class|CLASS)$"

# Figure out what directories have changed using svnlook.
FILES=`${SVNLOOK} changed ${REPOS} -t ${TXN} | ${AWK} '{ print $2 }'` > /dev/null

for FILE in $FILES; do

#Get the base Filename to extract its extension
NAME=`basename "$FILE"`

#Get the extension of the current file
EXTENSION=`echo "$NAME" | cut -d'.' -f2-`

#Checks if it contains the restricted format
if [[ "$FILTER" == *"$EXTENSION"* ]]; then
    echo "Your commit has been blocked because you are trying to commit a restricted file." 1>&2
    echo "Please contact SVN Admin. -- Thank you" 1>&2
    exit 1

fi

done
exit 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T06:54:04.527

我和@San有同样的问题，但是@Jijo的回答对我的情况没有直接帮助，因为我在运行SVN服务器时脚本对我不起作用`AIX`，我已经增强了脚本，如下所示可能适合我的情况。无论如何感谢@Jijo 分享脚本。

```
#Put all the restricted formats in variable FILTER
FILTER=".(xls|xlsx|exe|pptx|PPTX|vsd|VSD|bak|BAK|class|CLASS|zip|ZIP|doc|DOC|docx|DOCX)$"

# Figure out what directories have changed using svnlook.
FILES=$(${SVNLOOK} changed -t ${TXN} ${REPOS} | ${AWK} '{ print $NF }') > /dev/null

for FILE in $FILES 
do
  EXTENSION=`echo "$FILE" | cut -d'.' -f2-`

  if [[ "$FILTER" == *"$EXTENSION"* ]]; then
    echo "Your commit has been blocked because you are trying to commit a restricted file." 1>&2
    echo "Please contact SVN Admin. -- Thank you" 1>&2
    exit 1
  fi
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-14T06:34:46.857

Windows pre-commit.bat 的解决方案

```
@ECHO OFF

set REPOS=%1
set TXN=%2
set SVNLOOK="path\to\svnlook.exe"

set FORMATS=*.ext1, *.ext2, *.ext3
:CHECK1
%SVNLOOK% changed -t %TXN% %REPOS% | findstr /R /I ".ext1$" 
if %ERRORLEVEL% EQU 1 goto CHECK2
echo Your commit has been blocked because you are trying to commit a restricted file. Restricted formats %FORMATS% >&2
exit /b 1

:CHECK2
%SVNLOOK% changed -t %TXN% %REPOS% | findstr /R /I ".ext2$" 
if %ERRORLEVEL% EQU 1 goto CHECK3
echo Your commit has been blocked because you are trying to commit a restricted file. Restricted formats %FORMATS% >&2
exit /b 1

:CHECK3
%SVNLOOK% changed -t %TXN% %REPOS% | findstr /R /I ".ext3$" 
if %ERRORLEVEL% EQU 1 goto OK
echo Your commit has been blocked because you are trying to commit a restricted file. Restricted formats %FORMATS% >&2
exit /b 1

:OK
exit /b 0 
```

# debugging - gcc gdb 没有调试信息

> ID：13137027
> 
> 赞同：0
> 
> 时间：2012-10-30T10:26:52.080
> 
> 标签：debugging, gdb, g++, symbols

我试图阻止 g++ 内联模板化函数，这会导致 gdb 缺少调试信息，例如局部变量甚至当前行号。

实际上，我猜这与内联模板函数有关，因为这是我无法访问调用堆栈中任何内容的唯一情况。

我已经在 g++ 选项中尝试了所有我能做的事情，例如：

```
-DDEBUG -O0 -fno-inline -fno-implicit-inline-templates 
```

甚至考虑在我的函数前面加上 __attribute__ ((noinline)) 无效。

我的调用堆栈看起来像

```
#0  CVector<CGatherColor>::operator[] (this=0x9324480, index=1208) at ../utils/vector.h:28
#1  0x0000000000ee1d27 in unsigned int CBrdfLoop::trace_t<CAreaLightSquare, CNoCulling, CAreaLightSquare, CBrdfLdSampler>(int, unsigned int, CPrimMBVH*, CVector<CBrdfCache::CVertexCache>*, CAreaLightSquare&, CNoCulling&, CAreaLightSquare&, CBrdfLoop::CVtxSmpInfo const&, CBrdfLdSampler&) ()
#2  0x0000000000eb52ac in void CBrdfLoop::illuminate_t<CAreaLightSquare, CAreaLightSquare, CBrdfLdSampler>(unsigned int, CBrdfLdSampler&, CVector<CBrdfCache::CVertexCache>*, CAreaLightSquare&, CAreaLightSquare&, unsigned int, CPrimMBVH*) () 
```

无论我做什么，都没有行号，也没有调试信息。我正在使用 g++ 4.4.5 进行编译并使用 GNU gdb (GDB) Fedora (7.1-34.fc13) 进行调试。

我很卡住，调试很困难，除了 printf 我别无选择...这是我正在使用的版本的已知问题，我能做些什么吗？

更新：使用更新版本的 gcc/gdb，没问题。似乎是一个 gcc/gdb 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:14:07.110

我建议使用 -g3 符号来获取详细的调试信息。这将产生可用于调试流程的完整代码级别信息。

# php - 另一个php日期格式问题

> ID：13137030
> 
> 赞同：1
> 
> 时间：2012-10-30T10:27:03.343
> 
> 标签：php, date, format, strtotime

我在字符串上有这个日期格式 dmy ，所以 01-01-12 是 2012 年 1 月 1 日。

现在，我想将其转换为 php 中的日期对象，以对一组日期进行排序，这些日期作为字符串存储在数组中。

目前，我正在使用 strtotime 和 date

```
$keypoints[] = date('d-m-y', strtotime($date_str)); 
```

但这是对生成的日期进行排序，就好像格式是 ymd 一样。问题是，如何设置strtotime函数的输入格式？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T10:31:09.210

PHP 的 strtotime() 返回一个 unix 时间戳，它只是一个数字。您是否考虑过将这些存储在您的数组中并像这样排序？然后，您可以在需要时转换回漂亮的日期，例如用于输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T10:34:21.103

strtotime 中带有反斜杠的日期被读取为 m/d/y，而带有 - 作为分隔符的天被读取为 dmy

从手册：

> 笔记：
> 
> m/d/y 或 dmy 格式的日期通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。
> 
> 为避免潜在的歧义，最好尽可能使用 ISO 8601 (YYYY-MM-DD) 日期或 DateTime::createFromFormat()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T10:31:07.460

你不能。explode() 你的 01-01-12 日期并使用生成的片段与 mktime() 来获得正确的 unixtime。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T10:31:38.413

在 PHP 手册页中，`strtotime`接受“日期/时间字符串。有效格式在[日期和时间格式](http://www.php.net/manual/en/datetime.formats.php)中进行了说明”。

另一种方法是使用[`DateTime::createFromFormat`](http://php.net/manual/en/datetime.createfromformat.php).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T10:35:09.823

试试这个以获取`Y-m-d`格式的日期

```
$date_arr = explode('-', $date_str);
$keypoints[] = date("Y-m-d", mktime(0, 0, 0, $date_arr[1], $date_arr[0], $date_arr[2])); 
```

# ruby-on-rails - 插件中的 Rails ActiveRecord::Observer

> ID：13137036
> 
> 赞同：5
> 
> 时间：2012-10-30T10:27:19.573
> 
> 标签：ruby-on-rails, ruby, activerecord

我想在现有的 rails 应用程序中添加一个 Observer for Issues。

我创建了一个插件，在插件下`app/model`我保存了`custom_observer.rb`

当我添加`:custom_observer`到`config.active_record.observers``config/application.rb`

我尝试了类似的东西

```
RedmineApp::Application.configure do
    config.after_initialize do
             config.active_record.observers << :custom_observer
    end
end 
```

在插件的 init.rb 中，但这不起作用。

有什么更好的方法来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-14T19:08:11.010

如果您使用的是 Rails 4.0，[观察者已从](https://github.com/rails/rails/commit/ccecab3ba950a288b61a516bf9b6962e384aae0b)核心提取到一个名为[`rails-observers`](https://github.com/rails/rails-observers)

虽然您没有说您使用的是哪个版本的 rails，但如果您使用的是 rails 4，我建议您这样做：

**宝石文件**

```
#Rails Observers
gem "rails-observers", "~> 0.1.2" 
```

**配置**

```
#config/application.rb
#Observer Classes
config.active_record.observers = :custom_observer 
```

**观察者**

```
#models/customer_observer.rb
class CustomObserver < ActiveRecord::Observer
end 
```

为我们工作，我为您提供了实时代码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:59:31.463

本博文中解决的问题：[gems/plugins 中的 ActiveRecord 观察者](https://web.archive.org/web/20100307150643/http://riotprojects.com/post/106808946/activerecord-observers-in-gems-plugins)

# php - 谷歌图表功能

> ID：13137037
> 
> 赞同：1
> 
> 时间：2012-10-30T10:27:23.920
> 
> 标签：php, image, dynamic

我正在开发一项功能，并遇到了我想要以下功能的情况：

[http://chart.googleapis.com/chart?cht=p3&chd=t:60,40&chs=250x100&chl=Hello|World](http://chart.googleapis.com/chart?cht=p3&chd=t:60,40&chs=250x100&chl=Hello|World)

我想知道它怎么可能？我需要的是作为参数传递的图像名称和作为参数传递的文本，它将返回我写在 iMage 上的 Hello World。

例如， [http](http://myurl.com?image=imagename&text=HelloWorld) ://myurl.com?image=imagename&text=HelloWorld 将返回我写在图像上的“HelloWorld”（作为参数传递的图像名）

这怎么可能？

# java - 让用户选择应用程序来打开文件

> ID：13137039
> 
> 赞同：1
> 
> 时间：2012-10-30T10:27:28.197
> 
> 标签：java, windows, swing, file-io, jdesktop

我需要我的 java 代码来打开基于默认应用程序的文件。感谢 [如何为给定文件打开用户系统首选编辑器？](https://stackoverflow.com/questions/526037/how-to-open-user-system-preffered-editor-for-given-file)这提出了一种质量方法来做到这一点

```
Runtime.getRuntime().exec("RUNDLL32.EXE SHELL32.DLL,OpenAs_RunDLL "+file); 
```

但问题是，一旦我选择应用程序打开它，它就不会打开文件。我不知道它的原因。

谢谢

编辑：

```
Desktop.getDesktop().open(file); 
```

这将在默认应用程序中打开。我希望用户选择应用程序来打开它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T10:29:05.957

采用 ：

```
Desktop.getDesktop().open(file); 
```

[http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#open(java.io.File](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#open(java.io.File) )

编辑：

这是使您的命令工作的代码：

```
import java.io.File;
import java.io.IOException;

public class TestExec {

    public static void main(String[] args) throws IOException, InterruptedException {
        File file = new File("d:/Clipboard1.png");
        ProcessBuilder builder = new ProcessBuilder("RUNDLL32.EXE", "SHELL32.DLL,OpenAs_RunDLL", file.getAbsolutePath());
        builder.redirectErrorStream();
        builder.redirectOutput();
        Process process = builder.start();
        process.waitFor();
    }

} 
```

# android - 在没有将手机插入 PC 的情况下运行 monkeyrunner

> ID：13137043
> 
> 赞同：5
> 
> 时间：2012-10-30T10:27:44.240
> 
> 标签：android, monkeyrunner

我想用monkeyrunner运行一个python稳定性测试用例

但是我想在不将移动设备插入 PC 的情况下运行脚本（因为测量的是电池寿命）

通常我使用“monkeyrunner mytest.py”

所以这个想法是在手机里用一个monkeyrunner执行py脚本。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:14:02.803

您可以使用两种方法：

1.  在 Android 设备上本地使用 monkey 命令并编写自己的脚本（此命令的语法与 monkeyrunner 语法不同）
2.  您可以使用@Gabriel Porumb 提出的方法。但是您应该按以下方式使用该命令：

首先你应该运行命令：

```
adb tcpip <port> 
```

然后在您的设备上，您应该检查分配给您的设备的 IP 地址（您可以在“设置”中检查）。

之后，您必须执行命令：

```
adb connect <your_ip>:<port> 
```

现在你可以运行你的 monkeyrunner 脚本了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:29:40.040

The monkeyrunner script runs on the PC only. However, if you don't want to connect the phone to the PC via cable, you could try connecting via wifi. Use:

```
adb connect 192.168.x.x 
```

Or something like that to connect to the phone.

# c++ - 在 MSFT CreateDevice() 函数中创建没有 HWND 输入参数的 D3D 设备

> ID：13137047
> 
> 赞同：1
> 
> 时间：2012-10-30T10:27:54.093
> 
> 标签：c++, directx, direct3d, directx-9, d3dx

如果我的怀疑是愚蠢或愚蠢的，请原谅我。我对 DirectX 编程完全陌生。只需具备 C++ 知识（非常基本的 COM 知识）。

下面的代码示例来自 MSDN[创建 D3D 设备](http://msdn.microsoft.com/en-us/library/windows/desktop/bb219676%28v=vs.85%29.aspx)，它解释了如何从头开始创建 D3D 设备。

**我的怀疑是**：

> 这里函数“ **pD3D->CreateDeviceEx()** ”接受一个参数HWND hwnd。如果我尝试从需要使用 D3D 设备接口中的某些功能的 commadline C++ win32 应用程序创建 D3D 设备怎么办？如何获得 HWND 字段。在这种情况下如何创建 D3D 设备。请详细解释。

```
HRESULT InitD3D9Ex( /* IN */ HWND hWnd, /* OUT */ IDirect3DDevice9Ex ** ppD3DDevice )
{
    HRESULT hr = E_FAIL;
    IDirect3D9Ex * pD3D = NULL;
    IDirect3DDevice9Ex * pDevice = NULL;

    if(ppD3DDevice == NULL)
    {
        return hr;
    }

    // Create the D3D object, which is needed to create the D3DDevice.
    if(FAILED(hr = Direct3DCreate9Ex( D3D_SDK_VERSION, &pD3D )))
    {
        *ppD3DDevice = NULL;
        return hr;
    }

    // Set up the structure used to create the D3DDevice. 
    D3DPRESENT_PARAMETERS d3dpp; 
    ZeroMemory( &d3dpp, sizeof(d3dpp) );
    d3dpp.Windowed = TRUE;
    d3dpp.SwapEffect = D3DSWAPEFFECT_DISCARD;
    d3dpp.BackBufferFormat = D3DFMT_UNKNOWN;

    // Create the Direct3D device. 
    if( FAILED( hr = pD3D->CreateDeviceEx( D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, hWnd,
                                      D3DCREATE_SOFTWARE_VERTEXPROCESSING,
                                      &d3dpp, NULL, &pDevice ) ) )

    {
        *ppD3DDevice = NULL;
        return hr;
    }

    // Device state would normally be set here

    *ppD3DDevice = pDevice;

    return hr;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T11:00:21.537

在 Windows 中，所有视觉对象都由窗口句柄控制。您不能创建 D3D“设备”并将其附加到“无”。您必须将“D3D 设备”与某个窗口（您自己的窗口或桌面）相关联。

你的控制台窗口是由系统创建的，你不控制它的创建标志，所以即使你使用[GetConsoleWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683175%28v=vs.85%29.aspx)函数，你也不能在 Direct3D 设备创建函数中使用这个 HWND（这可能随着 Aero 的引入而改变）。

您无法避免在控制台应用程序中创建获取另一个窗口句柄。使用`RegisterWindowClass`and`CreateWindow`函数创建一个新窗口或找到桌面的句柄（我怀疑你会想要那个）。

# sql - 运行计划作业时出错。在哪里可以找到错误详细信息

> ID：13137052
> 
> 赞同：0
> 
> 时间：2012-10-30T10:28:14.497
> 
> 标签：sql, sql-server, sql-server-2008

当列值与当前日期匹配时，我想删除 SQL 数据库中的行。我已经使用 SQL Server Management Studio 创建了一个用于删除数据的计划作业。我已经按照[视频](http://www.youtube.com/watch?v=De_GOwnTDjo)中所示的步骤进行操作 ，脚本类型是 T-SQL，我给出的命令是：

```
Delete from NewDB.dbo.Datetabel where Date=getDate();
COMMIT 
```

我想每天安排这项工作。但现在出于测试目的，我按小时给出。但这项工作失败了。

我将在哪里获得错误的详细信息。我正在研究 sql2008 r2

失败的原因应该是什么？编辑：当代码更改为：

```
BEGIN TRAN 
Delete from NewDB.dbo.Datetabel where Date=getDate();
COMMIT; 
```

但数据不会从表中删除。现在可能有什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:36:41.647

```
BEGIN TRAN 
Delete from NewDB.dbo.Datetabel 
WHERE convert(varchar(10), getdate(), 111) = convert(varchar(10), Date, 111)
COMMIT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:09:53.513

正如 Ozren 所建议的，我添加了“BEGIN TRAN”来消除错误。并且它的代码工作正常：

```
BEGIN TRAN 
Delete from NewDB.dbo.Datetabel where DATEDIFF(day, Date, GETDATE()) = 0
COMMIT; 
```

# php - PHP 上的标头位置不起作用

> ID：13137057
> 
> 赞同：0
> 
> 时间：2012-10-30T10:28:39.773
> 
> 标签：php, redirect, header

> **可能重复：**
> [标题位置 + 内容处置](https://stackoverflow.com/questions/9458854/header-location-content-disposition)

我有一个使用生成excel报告的页面 `header content-type`并将生成信息保存在数据库中（例如谁生成了报告，何时等）我的问题是为什么我不能重定向页面。下面是示例代码/算法

```
// excel content
/* excel content populates here */

// output to excel file
header("Content-Type: application/vnd.ms-excel");
header("Content-Disposition: attachment; filename=".$positionFileName);
header("Cache-Control: max-age=0");

// save logs on the database  
/* save logs code executed here */

// redirect page to get the logs on the database that display on the web page
header("location: report.php");  *<--- I can't redirect to report.php* 
```

这正是我想要的

用户要做的是选择报告类型，然后单击按钮生成以输出 excel 报告（打开/保存对话框）。然后，系统会将生成报告的日志保存在数据库中，然后显示在页面上。这就是为什么我想在report.php 上再次重定向它，以便日志将再次出现在数据库中以显示在浏览器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T10:54:17.967

标题正在碰撞。首先你说*“这里有一个文件”*，使用`Content-Disposition: attachment`，然后你说*“哦，不，它没有来，对 XYZ 做一个额外的请求”*，使用`Location`标题。您可以省略`Content-`标题以获得相同的结果。

然而，这对我有用：

```
header("Content-Type: application/octet-stream");
header("Content-Disposition: attachment; filename=foo.dat");
header("location: foo.dat"); 
```

在那里我被重定向到 foo.dat 文件，该文件显示在浏览器中（因此`Content`-headers 被忽略，因为在`Location`-header 之后发出了一个新请求，该请求在其响应中**没有**得到`Content`-headers。如果你想要要强制执行`attachment`，请将您的 Web 服务器配置为为某些扩展名或目录[发出这些标头](https://serverfault.com/questions/101948/how-to-send-content-disposition-headers-in-apache-for-files)`fpassthru($filename)`，或者在不使用`Location`-header 的情况下直接发出文件而不会遇到内存错误：

```
header("Content-Type: application/vnd.ms-excel");
header("Content-Disposition: attachment; filename=".$positionFileName);
header("Cache-Control: max-age=0");

// save logs on the database  
/* save logs code executed here */

fpasstrhu($positionFileName); 
```

但请注意，前三个`header()`语句之后的代码执行过程中产生的任何输出都会输出到浏览器，浏览器会认为是文件数据。

我猜这目前也在发生，导致`header("location: ...")`失败。[启用错误报告以查看打印数据的原因和位置](https://stackoverflow.com/questions/8028957/warning-headers-already-sent-in-php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:35:54.877

它不起作用，因为您告诉浏览器它应该期待一个 Excel 文件。然后，在您告诉浏览器它应该期待一个 Excel 文件之后，您正试图重定向到另一个页面。问题在于你的方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-30T10:30:47.920

检查您是否尚未向浏览器输出任何内容。

“位置”通常也应该是“位置”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T10:32:49.923

编辑此
标头（“位置：report.php”）；

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-30T10:35:06.283

```
header( "Location: http://" . strip_tags( $_SERVER ['HTTP_HOST'] ) . "/report.php" ); 
```

试试这个。我总是调用 HTTP 主机检查器，以确保我留在同一个域中。

**编辑**：我的错，我知道它是用大写字母 L 写的……抱歉之前的注释。

# android - 如何在屏幕上维护自定义选项卡并更改类而无需再次重绘选项卡？

> ID：13137058
> 
> 赞同：2
> 
> 时间：2012-10-30T10:28:40.523
> 
> 标签：android, android-layout, android-intent, android-tabs

让我试着在这里让我的问题更清楚。假设我有一个通过在 XML 布局中使用按钮和图像创建的自定义选项卡，它看起来像这样。

![自定义选项卡](../Images/83cc1f757c44b4e9d2585aee8ea4eded.png) 这些按钮中的每一个都应该调用一个类。通常，Intent 用于在 onClick 时调用新类。但是当我通过 Intent 调用任何类时，整个布局都会重新绘制。

```
Intent intent1 = new Intent(TabBar.this, Favourites.class);
startActivity(intent1); 
```

我尝试使用 TabHost 并且它有效，但我的项目要求我使用自定义标签栏。我还尝试了这个[Dynamically change view inside view in Android](https://stackoverflow.com/questions/4427278/dynamically-change-view-inside-view-in-android)的解决方案，这与我想要的类似（切换布局并维护其下方的标签栏），效果也很好。

我的目标是维护我拥有的自定义选项卡，并更改类而不是布局，而无需在每次单击每个按钮时重新绘制自定义选项卡栏。通过类，我可以运行不同的函数并调用不同的活动。

我对此进行了很多搜索，但似乎找不到解决方案或参考。有人可以指导我吗？提前致谢。

更新 ：

我是 Android 新手，经过多次尝试，我决定尝试 AdilSoomro 的代码来实现我想要的，[http: //adilsoomro.blogspot.com/2011/06/iphone-like-tabs-in-android .html](http://adilsoomro.blogspot.com/2011/06/iphone-like-tabs-in-android.html)用于创建看起来像 iPhone 选项卡的自定义选项卡。但是，此项目使用现在在 Android 4.1 中已弃用的 TabActivity。在参考了使用 Fragments 作为选项卡的其他来源后，我尝试将其更改为 FragmentActivity。

*   [http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/](http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/)
*   [http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

我设法使用 FragmentActivity 创建它，在这里您可以参考它们： [如何在 FragmentActivity 中使用自定义 iPhone 选项卡？](https://stackoverflow.com/questions/13193189/solved-how-to-use-custom-iphone-tab-in-fragmentactivity)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:43:01.070

您可以使用`TabHost`控件来实现此目的。浏览这篇[文章](http://www.codeproject.com/Articles/107693/Tabbed-Applications-in-Android) 它解释了所有的可能性。它还包括使用 xml 文件中定义的自定义选项卡栏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:06:46.747

实现这一点的方法之一是创建页脚并在所有活动中使用它。像[这样](https://stackoverflow.com/questions/5408336/a-common-footer-for-an-entire-application-android)。并根据您的要求告诉我它是否有用。

# python - Python：为什么 False 或 'name' 返回 'name' 而不是 False？

> ID：13137061
> 
> 赞同：1
> 
> 时间：2012-10-30T10:28:52.583
> 
> 标签：python, boolean, boolean-logic, boolean-expression, boolean-operations

AFAIK ：

`and`,`or`是布尔运算符，任何布尔表达式都应该返回一个布尔值。

那么，为什么会发生这种情况：

*   `False or 'name'`返回`'name'`而不是`True`
*   `True and ''`返回`''`而不是`False`

请解释一下，python如何处理布尔表达式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T10:30:12.627

不，在 python 中，`or`and`and`操作短路并返回最后评估的项目。

请参阅[布尔运算](http://docs.python.org/2/reference/expressions.html#boolean-operations)：

> 表达式`x and y`首先计算`x`; 如果`x`为假，则返回其值；否则，`y`评估并返回结果值。
> 
> 表达式`x or y`首先计算`x`; 如果`x`为真，则返回其值；否则，`y`评估并返回结果值。

如果您*必须*有一个布尔值，请使用[`bool()`](http://docs.python.org/2/library/functions.html#bool)：

```
>>> bool(False or 'name')
True 
```

# c# - 如何通过多个任意值搜索实体？

> ID：13137062
> 
> 赞同：1
> 
> 时间：2012-10-30T10:28:54.313
> 
> 标签：c#, linq, dynamic, entity-framework-5

我有一个`customer`实体，我希望能够通过多个任意属性搜索其记录。

例如：

```
Dictionary<string, string> searchList = new Dictionary<string, string>();
searchList.Add("LastName", "Foo");
searchList.Add("FirstName", "Bar"); 
```

我当然可以按照这些思路写一些东西：

```
foreach (KeyValuePair<string, string> kv in searchList)
{
    switch (kv.Key)
    {
       case "FirstName" :
          List<Customer> someResultPart = this._dbSet.Where(customer => customer.FirstName == kv.Value).ToList();
       break;
       case "LastName" :
          // etc.
    }
}

// Do intersection of all result parts ... 
```

除了查询`n`时间和稍后相交显然很糟糕之外，我宁愿没有那个`switch`语句（因为它会迫使我在每次`Customer`课堂上发生任何变化时都改变它。

有没有办法：

*   “动态”构建基于`searchList`字典的查询，从而消除对`switch`构造的需要？
*   将各种条件“连接”到单个数据库查询中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:48:15.157

保持类型安全！

最好构造一个返回良好属性的函数列表，而不是声明一个字符串变量，如果有一天您想更改列名，该变量将失败：

```
 public class Customer { public string FirstName; public string LastName;}
    public class CustomerFilter { public Func<Customer, string> Selector; public string Filter; }
    [TestMethod()]
    public void DynamicFilterTest()
    {
        var jonSkeet = new Customer() { FirstName = "Jon", LastName = "Skeet" };
        var joelOnSoftware = new Customer() { FirstName = "Joel", LastName = "OnSoftware" };
        var customers = new List<Customer>() { jonSkeet, joelOnSoftware };

        var jonSkeetFilters = new List<CustomerFilter>() { 
            new CustomerFilter() { Selector = c => c.LastName, Filter = "Skeet" },
            new CustomerFilter() { Selector = c => c.FirstName, Filter = "Jon" }};
        var query = customers.AsEnumerable();
        foreach (var filter in jonSkeetFilters)
        {
            query = query.Where(c => filter.Selector.Invoke(c) == filter.Filter);
        }
        var result = query.ToList();
        Assert.AreEqual(1, result.Count);
        Assert.AreEqual(jonSkeet, result.Single());
    } 
```

然后，您可以轻松地重构以对任何实体使用相同的模式：

```
public class WhereClause<T>
{
    private readonly Func<T, string> _selector;
    public Func<T, string> Selector { get { return _selector; } }

    private readonly string _value;
    public string Value { get { return _value; } }

    public WhereClause(Func<T, string> selector, string value)
    {
        this._selector = selector;
        this._value = value;
    }

    /// <summary>
    /// Append the where clause to the given query
    /// </summary>
    /// <param name="query"></param>
    /// <returns></returns>
    public IEnumerable<T> AppendTo(IEnumerable<T> query)
    {
        return query.Where(c => this.Selector.Invoke(c) == this.Value);
    }

    /// <summary>
    /// Append the wheres clauses to the given query
    /// </summary>
    /// <param name="query"></param>
    /// <returns></returns>
    public static IEnumerable<T> AppendTo(IEnumerable<T> query, IEnumerable<WhereClause<T>> wheres)
    {
        var filteredQuery = query;
        foreach (var where in wheres)
        {
            filteredQuery = where.AppendTo(filteredQuery);
        }
        return filteredQuery;
    }
}

[TestClass]
public class WhereClauseTests
{
    public class Customer { public string FirstName; public string LastName;}

    [TestMethod()]
    public void WhereClauseTest()
    {
        var jonSkeet = new Customer() { FirstName = "Jon", LastName = "Skeet" };
        var joelOnSoftware = new Customer() { FirstName = "Joel", LastName = "OnSoftware" };
        var customers = new List<Customer>() { jonSkeet, joelOnSoftware };

        var jonSkeetWheres = new List<WhereClause<Customer>>() { 
            new WhereClause<Customer>(c => c.LastName, "Skeet"),
            new WhereClause<Customer>(c => c.FirstName,  "Jon" )
        };

        var query = WhereClause<Customer>.AppendTo(customers, jonSkeetWheres);

        var result = query.ToList();
        Assert.AreEqual(1, result.Count);
        Assert.AreEqual(jonSkeet, result.Single());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:33:36.940

您可以使用[动态 LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

```
string predicate = String.Format("{0} = \"{1}\"", kv.Key, kv.Value);
List<Customer> someResultPart = _dbSet.Where(predicate); 
```

或者这样：

```
List<Customer> someResultPart = _dbSet.Where("{0}"); 
```

我什至构建了这样的完整搜索谓词：

```
Dictionary<string, object> searchList = new Dictionary<string, object>();
searchList.Add("LastName", "Foo");
searchList.Add("FirstName", "Bar");
searchList.Add("Id", 42); // yep, not only strings

var conditions = searchList.Select((kvp, i) => String.Format("{0} = @{1}", kvp.Key, i));
string predicate = String.Join(" and ", conditions);
object[] values = searchList.Select(kvp => kvp.Value).ToArray();

var query = _dbSet.Where(predicate, values); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T10:35:05.907

对于第二点，您可以这样做：

```
IQueryable<Customer> filtered = this._dbSet;
foreach (KeyValuePair<string, string> kv in searchList)
{
    switch (kv.Key)
    {
       case "FirstName" :
          filtered = filtered
              .Where(customer => customer.FirstName == kv.Value);
          break;
       case "LastName" :
          // etc.
    }
}
List<Customer> resultList = filtered.ToList(); 
```

# python - Python：当脚本运行顺序写入操作时文件为空

> ID：13137068
> 
> 赞同：1
> 
> 时间：2012-10-30T10:29:08.350
> 
> 标签：python, file

所以我写了一个简单的脚本，将一些行写入文件：

```
f = open('file.txt','w')
while(operator): 
      f.write("string")
f.close() 
```

问题是，当脚本运行时文件仍然是空的，只有当脚本完成并关闭文件时，内容才可见。发生了什么，我怎样才能使它在脚本运行时立即显示脚本写入文件的内容？

我正在运行 BackTrack 5 来运行脚本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T10:30:54.470

您需要使用`f.flush()`. 它将缓冲区中的当前内容写入文件，

```
In [17]: f.flush.__doc__
Out[17]: 'flush() -> None.  Flush the internal I/O buffer.' 
```

使用该`with`语句处理文件，因为它会自动为您关闭文件：

```
with open("file.txt","w") as f:
    while(operator):
        f.write("string")
        f.flush() 
```

# qt - 选项卡关闭按钮位置

> ID：13137069
> 
> 赞同：8
> 
> 时间：2012-10-30T10:29:14.300
> 
> 标签：qt, qtstylesheets, qtabbar

我想在我的 Qt 应用程序中设置标签的样式，如下所示：

![在此处输入图像描述](../Images/539456cdfa9f2bee13843a7784e62efa.png)

我使用了以下样式表：

```
QTabBar{background-color: #fff; border-top: 0px;}
QTabBar::tab {
    border-image: url(:/New_UI/tab_inactive.png) 7 17 7 2;
    margin-left: 2px;
    border-right: 17px;
    border-top: 5px;
    border-bottom: 5px;
    font: 400 9.2pt "Segoe UI";
    color: #ccc;
    padding: 0px 13px 0px 5px;
    max-height: 26px;
 }

QTabBar::tab:selected, QTabBar::tab:hover {
    border-image: url(:/New_UI/tab_active.png) 6 17 6 2;
}

QTabBar::close-button {
    image: url(:/New_UI/tab_close.png);
    subcontrol-origin: padding;
    subcontrol-position: right; 
    width: 13px;
    height: 13px;

} 
```

结果如下（关闭按钮的位置不是我想要的）：

![在此处输入图像描述](../Images/9e213221f768e30e5cb4fda101831c10.png)

我做错了什么&我怎么能得到我想要的结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T10:02:41.147

**编辑：**我知道这篇文章很旧，但我希望它可以帮助别人。

经过几次测试，我认为有一种方法可以做到这一点，但它不使用`Qt style sheets`：

1.  将您的子类`QTabWidget`化以完全访问受保护的功能
2.  创建您自己的`QWidget`或`QPushButton`作为您的关闭按钮
3.  使用样式表属性管理按钮的位置（`margin-right`例如）
4.  将按钮添加到选项卡`tabBar()->setTabButton(index, QTabBar::RightSide, closeButton);`

我用于测试的代码：

```
MyTab::MyTab(QWidget *parent) : QTabWidget(parent)
{
/// Create your button
QPushButton *close = new QPushButton(this);

// Add a tab
addTab(new QWidget(), QIcon(), "Tab 1");
setStyleSheet("QTabBar::tab { width : 150px;}");

// Size and move your button
close->setStyleSheet("max-height: 14px; max-width: 15px; margin-right: 50px;");

// Add your button to the tab
tabBar()->setTabButton(0, QTabBar::RightSide, close);
} 
```

最后，在 MainWindow 中，我将自己的 TabWidget 添加到布局中：

```
ui->layout->addWidget(new MyTab(this)); 
```

结果 ：

![在此处输入图像描述](../Images/2dd327b5a937a8efc9d67ca658411a1b.png)

但是现在您必须通过连接按钮手动处理关闭操作并获取`removeTab(index)`呼叫索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:18:14.100

我正在做和你一样的事情，这是我的样式表：

```
QTabBar::close-button{
    image:url(:tabclose.png); 
    margin-right:4px;
} 
```

不要使用“width”和“height”属性，这两个在这里不起作用，在子控件上设置“image:url()”会隐式设置子控件的宽度和高度（除非图像在 SVG ）。

使用“margin-right”属性控制标签右边缘的距离；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-27T05:41:51.527

添加自定义按钮是一个很好的答案。但是如果您使用边距来决定关闭按钮的位置，则关闭按钮的鼠标区域会异常，所以我在一个小部件中添加了一个 SpacerItem 和按钮，最后将此小部件添加到 TabWidget。

```
void TabBarCloseable::tabInserted(int index)
{
    QWidget *widget = new QWidget(this);
    QHBoxLayout *layout = new QHBoxLayout(this);
    widget->setLayout(layout);

    QToolButton *closeBtn = new QToolButton(this);
    layout->addWidget(closeBtn);
    layout->insertSpacing(1, 15);
    closeBtn->setStyleSheet("max-height: 16px; max-width: 16px;");

    this->setTabButton(index, QTabBar::RightSide, widget);

    QTabBar::tabInserted(index);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-31T06:34:06.847

你有错误的填充

[![在此处输入图像描述](../Images/9632dc2d779d06dea024bc3e1fd503a7.png)](https://i.stack.imgur.com/JspNp.png)

最佳

```
QTabBar::tab {
    min-width: 25ex;
    padding: 10px 50px 10px 10px;
} 
```

按钮

```
QTabBar::tab {
    min-width: 25ex;
    padding: 10px 0px 10px 10px;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-04-14T16:13:04.057

这是一个纯样式表解决方案，无需手动创建按钮：

```
QTabBar::close-button {
    image: url(:/tab-close.png);
    padding-left: -13px;
} 
```

如果您检查 Qt 源代码，图像绘制代码仅使用填充值，而不使用边距值。

# symfony - Symfony2 如何通过 DQL 获取用户信息？

> ID：13137071
> 
> 赞同：0
> 
> 时间：2012-10-30T10:29:16.313
> 
> 标签：symfony, doctrine

例如，假设获取了一篇文章。
用户 ID 在创建时附加到数据库的文章中。

```
$article->setAuthor($user_id);    // <- This is number, is not object. 
```

这是需要一些文章的代码。

```
public function find_all()
{
    $query = $this->getEntityManager()
                  ->createQuery('
                      SELECT a, r FROM MySampleBundle:Article a
                      LEFT JOIN a.reviews r
                      ORDER BY a.date_created DESC'
                  );
    return $query->getResult();
} 
```

如果只是作者。

```
public function find_all($author)
{
    $query = $this->getEntityManager()
                  ->createQuery('
                      SELECT a, r FROM MySampleBundle:Article a
                      LEFT JOIN a.reviews r
                      WHERE a.author = :author
                      ORDER BY a.date_created DESC'
                  )
                  ->setParameter('author', $author);
    return $query->getResult();
} 
```

这时候我应该怎么做才能也获取了一些文章的作者信息？
我正在使用 FOSUserBundle。
我应该将文章表与 fos_user 表相关联吗？
还是可以通过左连接？

这只是失败的一个例子。

```
$query = $this->getEntityManager()
              ->createQuery('
                  SELECT a, r FROM MySampleBundle:Article a
                  LEFT JOIN a.reviews r
                  LEFT JOIN MyUserBundle:User u
                    WITH u.id = a.author
                  WHERE a.author = :author
                  ORDER BY a.date_created DESC'
              )
              ->setParameter('author', $author); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:12:29.987

1.  您需要通过字段在`Article`实体中定义与用户的关系`author`
2.  然后您将能够检索作者数据

    ```
    $author = $restult->getAuthor() // User Entity Class Object
    $authorName = $author->getName(); 
    ```

# image - 在MATLAB中添加两个图像的差异

> ID：13137073
> 
> 赞同：0
> 
> 时间：2012-10-30T10:29:23.753
> 
> 标签：image, matlab, image-processing

我正在研究图像处理。我想添加两个图像的像素差异。

假设我有两个图像 A 和 B。我选择两个图像的第一个像素并存储差值。我想将此差异值添加到下一个像素差异。我尝试使用此代码，但它不起作用。我该怎么做？

```
A = imread('sub2.jpg');
B = imread('sub1.jpg');
tic
[rows cols] = size(A);
diff1 = 0;
for x = 1:rows
   for y = 1:cols
       diff = A(x,y)-B(x,y);
       diff1 = diff1+diff;
   end
end
disp(diff1);
toc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T10:31:24.137

您可以在一行中执行以下操作：

```
sum(sum(imsubtract(A-B))) 
```

[`imsubtract`](http://www.mathworks.com/help/images/ref/imsubtract.html)减去两个图像并将差异保存在与 大小相同的矩阵中`A`。然后，`sum`取结果的总和。

如果您需要绝对差异，您可以使用[`imabsdiff`](http://www.mathworks.com/help/images/ref/imabsdiff.html)代替[`imsubtract`](http://www.mathworks.com/help/images/ref/imsubtract.html).

请注意，差异的值在 0 和 255 之间。如果你想要负实例，那么你应该直接减去矩阵作为`A-B`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:33:16.623

虽然看起来不错，但你最好：

```
diff1 = sum(sum(A-B)); 
```

或者如果`B`大于`A`：

```
diff1 = sum(sum(A-B(1:size(A,1),1:size(A,2)))); 
```

这仅给出一个值（就像您的代码一样），我不确定这是否真的是您想要的..

# c# - 动态邻域坐标

> ID：13137077
> 
> 赞同：0
> 
> 时间：2012-10-30T10:29:56.027
> 
> 标签：c#, coordinates, generator, points

对于图像过滤器，我想生成一个可变邻域。这就是我的社区现在的样子，它是一个摩尔社区。

```
private Point[] neighborhood = new Point[]
                                               {
                                                   new Point(-1,-1),
                                                   new Point(0,-1),
                                                   new Point(1,-1),

                                                   new Point(-1,0),
                                                   new Point(1,0),

                                                   new Point(-1,1), 
                                                   new Point(0,1), 
                                                   new Point(1,1), 
                                               }; 
```

当我想改变邻域的大小时，这会变得相当复杂。我想要一个返回所有坐标的函数，比如 generateNeighborhood(8) 会返回这个点数组。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:29:43.950

像这样的东西？

```
private Point[] GetNeighbors(int count)
{
    int a, x, y, c = count / 2;
    Point[] p = new Point[count * count];

    for (a = y = 0; y < count; y++)
        for (x = 0; x < count; x++)
            p[a++] = /* Create point here */
    return p;
} 
```

*我认为您可以添加缺少的代码*；）

# ipad - QLPreviewController 未更新 iOS6 中的 previewItem

> ID：13137083
> 
> 赞同：1
> 
> 时间：2012-10-30T10:30:15.560
> 
> 标签：ipad, ios6, qlpreviewcontroller

我将文件保存在文档目录中并将其加载到 - (id)previewController:(QLPreviewController *)previewController previewItemAtIndex:(NSInteger)idx 和 [NSURL fileURLWithPath:self.path];

返回的网址是正确的图像。但 QLPreviewController 显示最后保存的图像。此问题仅在 iOS6 中出现。

这是代码：

-（无效）加载和保存文件{

```
NSData *data = [NSData dataWithContentsOfURL:self.mainURL];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSArray *arr=[self.urlString componentsSeparatedByString:@"."];
NSString *str=[arr lastObject];
self.pdfPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"Preview.%@",str]];
[data writeToFile:self.pdfPath atomically:YES];

[self preview]; 
```

}

其中 preview 是我初始化 QLPreviewController 的方法

在数据源方法 previewItemAtIndex 中，我得到这样的路径

fileURL1=[NSURL fileURLWithPath:self.pdfPath]; NSLog(@"%@",fileURL1);

```
 if ([QLPreviewController canPreviewItem:fileURL1]) {
        NSLog(@"///////%@",fileURL1);
        return fileURL1;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:52:37.853

当我关闭 QLPreviewController 时，我通过从文档目录中删除该文件来解决它

NSError *err=nil; [[NSFileManager defaultManager] removeItemAtPath: self.pdfPath error:&err];

现在它在 iOS4.3、iOS5.1 和 iOS6 上完美运行

# python - 如何在一个语句中获得唯一的排序列表？

> ID：13137087
> 
> 赞同：2
> 
> 时间：2012-10-30T10:30:32.397
> 
> 标签：python

sort() 的返回值为 None 因此以下代码不起作用：

```
def sorted_unique_items(a):
   return list(set(a)).sort() 
```

任何想法更好的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T10:31:35.357

使用[`sorted()`](http://docs.python.org/2/library/functions.html#sorted)：

```
sorted(set(a)) 
```

你可以完全省略`list()`调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:44:01.600

它很简单只需使用以下`sorted()`方法：

```
data = [10,5,46,4]
sorted_data = sorted(data)
print "Sorted Data ::::",sorted_data 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:22:23.677

上述解决方案仅适用于字符串、整数和元组等可散列类型，但不适用于列表等不可散列类型。

例如，如果您有一个列表`data= [[2],[1],[2],[4]]`

对于不可散列类型的最佳解决方案是：

```
from itertools import izip, islice

values= [[2],[1],[2],[4]]

def sort_unique_unhashable(values):

    values = sorted(values)
    if not values:
        return []
    consecutive_pairs = izip(values, islice(values, 1, len(values)))
    result = [a for (a, b) in consecutive_pairs if a != b]
    result.append(values[-1])
    return result
print sort_unique_unhashable(values) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T11:41:17.633

有两种选择：

```
a = [2,34,55,1,22,11,22,55,1]

#First option using sorted and set. 
sorted(set(a))

#second option using list and set.
list(set(a)) 
```

# java - 有没有办法检查当前未登录的用户的角色？

> ID：13137090
> 
> 赞同：2
> 
> 时间：2012-10-30T10:30:41.040
> 
> 标签：java, spring-security

在我的项目中，我向所有注册用户发送预定邮件。到目前为止，没有任何限制，所以我只是从数据库中获取所有用户并发送邮件而没有任何安全检查。现在，我必须确保只有具有特定角色的用户才能收到这些邮件。

到目前为止，我发现的唯一一件事是检查当前登录用户角色的几种方法。但我需要检查当前未登录的整个用户列表的角色。

我不知道如何访问这些角色。我什至不知道这是否可以通过spring security来完成。那么，有人知道这种问题吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:50:40.680

我认为您不了解“角色”对用户意味着什么。通常角色是在应用程序的数据库部分实现的。您可能拥有`User`带有属性的表格`(id, name, sname, ...., role)`（第一种情况），或者您可能将其作为带有属性的单独表格前“角色”，`(id, name, desc)`然后`FK`在您的`User`表格中有一个链接到表格的`Roles`表格（第二种情况）。

因此，当您想向所有人发送电子邮件时，`role = admin`您可以这样做：

```
sql = "select * from users where role = 'admin'"; //First case

sql = "select * from users , roles where users.role_id = roles.id and roles.desc = 'admin' "; //second case 
```

正如您已经猜到的那样，它的实现与弹簧或任何安全性无关......

# java - 在jtable中添加行

> ID：13137091
> 
> 赞同：1
> 
> 时间：2012-10-30T10:30:42.380
> 
> 标签：java, swing, jtable, keylistener, tablemodel

```
 this.tModel.insertRow(rowCount,new Object[]  {"","","",""});    
 this.table.setRowSelectionAllowed(true);
 this.table.changeSelection(0, 0, false, false);

 this.table.addKeyListener(new KeyListener() {
      @Override
      public void keyPressed(KeyEvent e) {
          if (e.getKeyCode()==KeyEvent.VK_ENTER) {
               rowCount = this.table.getSelectedRow() + 1;
               tModel.insertRow(rowCount,new Object[]{"", "","",""}); 
          }
      }
 }); 
```

我正在尝试创建一个 jtable，在运行时通过鼠标单击添加行。我已经添加了一个默认行。但我无法在该行上进行选择。我想在按键操作上添加时将选择更改为新添加的行？请提出答案？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T10:55:08.217

首先，我鼓励您使用[key bindings API](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)，`KeyListener`这是一个低级 API，可以在您看到它们之前使用事件。

要更改/设置 a 中的行选择`JTable`，您应该使用[JTable#setRowSelectionInterval](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setRowSelectionInterval%28int,%20int%29)

```
InputMap im = getInputMap(WHEN_FOCUSED);
im.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "enter");
ActionMap am = getActionMap();
am.put("enter", new AbstractAction() {
    @Override
    public void actionPerformed(ActionEvent e) {
        int rowCount = table.getSelectedRow() + 1;
        tModel.insertRow(rowCount,new Object[]{"", "","",""});                 
        table.setRowSelectionInterval(rowCount, rowCount);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T11:11:22.023

要选择表中的最后一个条目，您可以使用如下方法：

```
private void selectLastPossibleEntry() {
    final int rowCount = tableModel.getRowCount();
    final int selectedRowCount = jTable.getSelectedRowCount();
    if (rowCount > 0 && selectedRowCount <= 1) // we do not want do destroy multiple selected lines by the user
        jTable.setRowSelectionInterval(rowCount - 1, rowCount - 1);
} 
```

或更笼统地说：

```
private void selectLastPossibleEntryForJTable(final JTable jTable) {
    final int rowCount = jTable.getModel().getRowCount();
    final int selectedRowCount = jTable.getSelectedRowCount();
    if (rowCount > 0 && selectedRowCount <= 1) // we do not want do destroy multiple selected lines by the user
        jTable.setRowSelectionInterval(rowCount - 1, rowCount - 1);
} 
```

提示：这不考虑不同的排序

# css - FF3.0.7 文字换行

> ID：13137094
> 
> 赞同：0
> 
> 时间：2012-10-30T10:30:50.347
> 
> 标签：css, firefox-3

在这里抓着稻草，但有人找到了在 Firefox 3.0.7 中包装文本的解决方案吗？

文本应该像其他浏览器一样包裹在容器中。

示例： http: [//jsfiddle.net/4t7Ut/](http://jsfiddle.net/4t7Ut/)（显然在FF3.0.7中查看）

```
#container {
    border: 1px dashed;
    width: 100px;
}

.text-to-wrap {
    white-space: pre-wrap; /* css-3 */
    white-space: -moz-pre-wrap; /* Mozilla, since 1999 */
    white-space: -pre-wrap; /* Opera 4-6 */
    white-space: -o-pre-wrap; /* Opera 7 */
    word-wrap: break-word; /* Internet Explorer 5.5+ */
} 
```

...

```
<div id="container">
<div class="text-to-wrap ">VWvU3dpVq5wJio6oFE82pmQuBTRzbii4dLd4NGBr332V2P4Skx8GwLozZrczNoRPmqWSrxnLEKh5PBZ6s3AjMFX3ftLHyuR7RGSA</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:57:50.697

要使内容换行，使其分成多行，每行包含尽可能多的字符（当然最后一行除外），您需要`<wbr>`在文本内容中的每个字符之后添加标签，以使即使在像 Firefox 3 这样的古老浏览器上，事情也是如此。您可以为此目的使用客户端脚本：

```
<script>
var cont = document.getElementById('container').getElementsByTagName('div')[0];
cont.innerHTML = cont.innerHTML.replace(/(.)/g, '$1<wbr>');
alert(cont.innerHTML);
</script> 
```

允许这样的破坏几乎是不够的。人类和计算机语言都有自己的换行规则。因此，`<wbr>`标签应仅插入合适的位置，手动或使用适合内容的算法。

除了`<wbr>`，您还可以使用它的字符级对应物零宽度空格 ( `&#x200b;`)。非常旧的浏览器不支持它，尽管 Firefox 3 似乎可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:51:51.983

尝试一下：

用来`width:100%; display:inline-block;`_`.text-to-wrap`

# php - Jquery Ajax 每个函数返回双精度

> ID：13137098
> 
> 赞同：0
> 
> 时间：2012-10-30T10:31:01.800
> 
> 标签：php, jquery

我有一个 Jquery 函数，它基本上从数据库中检索用户列表并将信息插入到 div 中。问题是我得到了双重结果，这是我第一次从数据库中检索，我只发送到数据库。任何帮助将不胜感激。

谢谢 ：）

这是Jquery代码：

```
$(function () {
    $.ajax({                                      
        url: 'data.php', 
        data: "", 
        dataType: 'json',  
        success: function(rows) {
            for (var i in rows) {
                var row = rows[i];          
                var id = row[0];
                var name = row[1];
                var mobile = row[2];
                var address = row[3];
                var email = row[4];

                $.each(rows, function() {
                    $('#contain').append('<div id="name">' + '<span>' + name + '</span>' + '</div>' + '<div id="id">' + id + '</div>' + '<div id="mobile">' + mobile + '</div>' + '<div id="address">' + address + '</div>' + '<div id="email">' + email + '</div>');
                });
            } 
        } 
    });
}); 
```

和 PHP：

```
$result = mysql_query("SELECT * FROM $tableName");
$data = array();
while ( $row = mysql_fetch_row($result) )
{
    $data[] = $row;
}
echo json_encode( $data ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T10:34:43.983

我认为问题出在这里：

```
$.each(rows, function (){
     $('#contain').append('<div id="name">'+'<span>'+name+'</span>'+'</div>'+'<div id="id">'+id+'</div>'+'<div id="mobile">'+mobile+'</div>'+'<div id="address">'+address+'</div>'+'<div id="email">'+email+'</div>');
}); 
```

你应该这样做

```
$('#contain').append('<div id="name"><span>'+name+'</span></div><div id="id">'+id+'</div><div id="mobile">'+mobile+'</div><div id="address">'+address+'</div><div id="email">'+email+'</div>'); 
```

# asp.net-mvc - 使 mvc 中的文本框可从模型中读取

> ID：13137103
> 
> 赞同：-1
> 
> 时间：2012-10-30T10:31:13.017
> 
> 标签：asp.net-mvc

我有一个模型，我绑定了一个带有文本框的视图。现在它们是某些文本框，我想让它们只读并且来自模型类。所以任何建议我怎样才能让它们只从模型类中读取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:54:49.203

`ReadOnly`不适用于 MVC 2 或 MVC 1，但它适用于 3 和 4（测试版）。

从模型中，您可以使用如下：

```
 [ReadOnly(true)]
 public bool IsAdmin { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:05:15.533

这是答案：视图类似于

```
<div>
    <table>
        <tr>
            <td>@Html.LabelFor(x => x.Name)</td>
            <td>@Html.EditorFor(x => x.Name)</td>
        </tr>
        <tr>
            <td>@Html.LabelFor(x => x.DOB)</td>
            <td>@Html.EditorFor(x => x.DOB)</td>
        </tr>
        <tr>
            <td>@Html.LabelFor(x => x.Address)</td>
            <td>@Html.EditorFor(x => x.Address)</td>
        </tr>
    </table>
</div> 
```

我的视图模型是：

```
public class SampleModel
    {
        [EnableForRole]
        public String Name { get; set; }

        [EnableForRole]
        public DateTime DOB { get; set; }

        [EnableForRole]
        public String Address { get; set; }
    } 
```

自定义元数据属性如下：

```
public class EnableForRoleAttribute : Attribute, IMetadataAware
    {

        public void OnMetadataCreated(ModelMetadata metadata)
        {
            var toEnable = IsAccessible(metadata.PropertyName);
            metadata.IsReadOnly = !toEnable;
        }
        private bool IsAccessible(String actionName)
        {            
            return HttpContext.Current != null && HttpContext.Current.User != null && HttpContext.Current.User.IsInRole(roleName); //if you use MembershipProvider
        }
    } 
```

现在最后你应该在 EditorTemplate 文件夹中添加部分视图（String.cshtml），如：

```
@if (ViewData.ModelMetadata.IsReadOnly)
{
    @Html.TextBox("", ViewData.TemplateInfo.FormattedModelValue,
        new {  @readonly = "readonly" })                                     
}
else
{
    @Html.TextBox("", ViewData.TemplateInfo.FormattedModelValue) 
} 
```

就这样。

享受。

# objective-c - addButtonName 是什么意思？

> ID：13137104
> 
> 赞同：1
> 
> 时间：2012-10-30T10:31:13.857
> 
> 标签：objective-c, xcode4.5

我想在我的 viewController 上创建一个 void 函数。

突然我有这个自动完成建议我做：

```
-(void)addNearbyButton:(NSSet *)objects 
```

嗯……这到底是做什么的？

我所有的其他按钮都具有相同的功能。

```
-(void)addMapButtonObject:(<#object-type#> *)object 
```

呜呜呜

那是什么？我从不使用它，但它应该做什么？

# c# - 以编程方式在表格中显示列表项

> ID：13137109
> 
> 赞同：0
> 
> 时间：2012-10-30T10:31:31.220
> 
> 标签：c#, sharepoint-2010, foreach, web-parts, listitem

到目前为止，我有以下代码显示列表中的列表项（使用自定义 Web 部件属性来获取列表 url 和列表名称）。

显示列表项的代码：

```
if(this.WebPart.ListUrl != null && this.WebPart.ListName != null && 
this.WebPart.AwardYear != null)
{

//getting custom properties values
string listURL = this.WebPart.ListUrl.ToString();
string listName = this.WebPart.ListName.ToString();
string awardYear = this.WebPart.AwardYear.ToString();

using (SPSite site = new SPSite(listURL))
{

using (SPWeb web = site.OpenWeb())
{

try
{

 SPList list = web.Lists[listName]; //name of the list

 //CAML query to filter list items by year and then order by year in descending order
 SPQuery awardsYear = new SPQuery();
 awardsYear.Query = @"<Where><Eq><FieldRef Name='Year'/><Value Type='Text'>" + 
 awardYear + @"</Value></Eq></Where>" + "<OrderBy><FieldRef Name='Year' 
 Ascending='False' /></OrderBy>";

 SPListItemCollection listItemColl = list.GetItems(awardsYear);

 //code for generating the table goes here EXPERIMENTAL
 Table table1 = new Table();
 TableRow tableRow = new TableRow();
 TableCell tableCell = new TableCell();

 int numberOfColumns = 4; //number of columns for the chambers table
 for (int x = 0; x < numberOfColumns; x++)
 {

 //Table columns created here need to be added somehow to the table above

 }

 //getting all the list items in the list and displaying them
 foreach (SPListItem listItem in listItemColl)
 {

  //For each of the list items create the table rows

  //The below needs to be put into a table generated programatically
  chambers = listItem["Title"].ToString();
  band = listItem["Band"].ToString();
  peopleRecommended = listItem["PeopleRecommended"].ToString();
  band2 = listItem["Band2"].ToString();

  //placeholders used to display the results
  plhDirRankings.Controls.Add(new LiteralControl("Chambers: " + chambers + "<br/>"));
  plhDirRankings.Controls.Add(new LiteralControl("Band: " + band + "<br/>"));
  plhDirRankings.Controls.Add(new LiteralControl("People Recommended: " + 
  peopleRecommended + "<br/>"));
  plhDirRankings.Controls.Add(new LiteralControl("Band: " + band2 + "<br/>"));

  }

  }

  catch (Exception err)
  {

  plhDirRankings.Controls.Add(new LiteralControl(err.ToString()));

  }

  }

  }

  } 
```

以编程方式生成表格以显示列表项的最简单方法是什么，如下所示：

```
Chambers | Band  | PeopleRecommended | Band2 
--------------------------------------------
item1    | item1 | item1             | item1
item2    | item2 | item2             | item2 
```

我之前没有做太多以编程方式创建表的工作，所以我有点困惑。我已经开始为表格编写一些代码来让我思考，但还没有设法将它们放在一起。

非常感谢您对此提供任何帮助或链接到一个好的教程

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:09:27.433

如果您想逐个单元格地构建表格，我相信该过程类似于：

```
Table table = new Table();
TableRow headerRow = new TableRow();
foreach(string field in fields)
{
    TableCell headerCell = new TableCell();
    headerCell.Text = field;
    headerRow.Controls.Add(headerCell);
}
foreach(SPListItem li in listItemColl)
{
    TableRow dataRow = new TableRow();
    foreach(string field in fields)
    {
        TableCell dataCell = new TableCell();
        dataCell.Text = li[field].ToString();
        dataRow.Controls.Add(dataCell);
    }
}
plhDirRankings.Controls.Add(table); 
```

但是，您可以使用数据绑定控件（例如[`GridView`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.aspx).

例如，在你的情况下，我个人会做类似的事情

```
// As before until you have your collection.

// Create simple anonymous objects out of your list items.
var items = listItemColl.Cast<SPListItem>()
    .Select(li => new {
        Chambers = li["Title"].ToString(),
        Band = li["Band"].ToString(),
        PeopleRecommended = li["PeopleRecommended"].ToString(),
        Band2 = li["Band2"].ToString()});

// Bind objects to a GridView.
var gridView = new GridView();
plhDirRankings.Controls.Add(gridView);
gridView.DataSource = items;
gridView.DataBind(); 
```

我相信这足以得到一个带有列标题的简单表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:15:19.767

找到了一种更快更简单的方法来做到这一点：

```
//creating the table and the table hearers
plhDirRankings.Controls.Add(new LiteralControl("<table><tr><td width='170' 
valign='top'>" + "<strong>Chambers</strong>" + "</td><td width='180' valign='top'>" + 
"<strong>Band</strong>" + "</td><td width='180' valign='top'>" + "<strong>People 
Recommended</strong>" + "</td><td width='145' valign='top'>" + "<strong>Band</strong>" 
+ "</td></tr>"));

 //getting all the list items in the list and displaying them
 foreach (SPListItem listItem in listItemColl)
 {

  //getting listitem values
  chambers = listItem["Title"].ToString();
  band = listItem["Band"].ToString();
  peopleRecommended = listItem["PeopleRecommended"].ToString();
  band2 = listItem["Band2"].ToString();

  //Generating the table content 
  plhDirRankings.Controls.Add(new LiteralControl("<tr><td valign='top'>" + chambers + 
  "</td><td valign='top'>" + band + "</td><td valign='top'>" + peopleRecommended + 
  "</td><td valign='top'>" + band2 + "</td></tr valign='top'>"));

   }

   //closing the table
   plhDirRankings.Controls.Add(new LiteralControl("</table>")); 
```

而是使用使用 for 循环生成表的相当复杂的方法，我刚刚决定在 foreach 循环之外创建表，然后在 foreach 循环内创建表行，然后在 foreach 之外关闭表环形。

更简单，效果很好，感谢大家的帮助，非常感谢

# c# - 无法访问 WPF 中其他 ViewModel 类的成员

> ID：13137111
> 
> 赞同：0
> 
> 时间：2012-10-30T10:31:34.763
> 
> 标签：c#, .net, wpf, class, mvvm

我正在研究在我的应用程序中动态生成的一组单选按钮。在访问班级成员时，我似乎面临一个问题。这是我到目前为止所做的：

XAML：

```
<GroupBox Header="Daughter Cards" Height="Auto" HorizontalAlignment="Stretch" Margin="20,5,20,20" Name="groupBox2" VerticalAlignment="Stretch" Width="Auto">
            <Grid>                   
                <Grid Grid.Column="0">
                    <ItemsControl ItemsSource="{Binding SlotChildren}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <UniformGrid Columns="3" Rows="8" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>

                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <RadioButton Content="{Binding SlotButtons}" Margin="0,10,0,0" IsChecked="{Binding IsChecked}" GroupName="SlotGroup" Height="15" Width="80" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </Grid>                

                <Grid Grid.Column="1">                                                  
                        <ComboBox Grid.Row="0" ItemsSource="{Binding DaughterBoardBoxList}" SelectedItem="{Binding SelectedDaughterBoardBoxList, Mode=TwoWay}" SelectedIndex="0" Height="23" HorizontalAlignment="Center" Margin="0" Name="comboBox5" VerticalAlignment="Center" Width="158" />
                        <ComboBox Grid.Row="1" ItemsSource="{Binding DaughterVersionBoxList}" SelectedItem="{Binding SelectedDaughterVersionBoxList, Mode=TwoWay}" SelectedIndex="0" Height="23" HorizontalAlignment="Center" Margin="0" Name="comboBox6" VerticalAlignment="Center" Width="158" />
                        <ComboBox Grid.Row="2" ItemsSource="{Binding DaughterSerialBoxList}" SelectedItem="{Binding SelectedDaughterSerialBoxList, Mode=TwoWay}" SelectedIndex="0" Height="23" HorizontalAlignment="Center" Margin="0" Name="comboBox7" VerticalAlignment="Center" Width="158" />

                        <Button Grid.Row="1" Command="{Binding GetStringCommand}" Content="Get String" Height="23" HorizontalAlignment="Center" Margin="0" Name="RefreshDaughterCards" VerticalAlignment="Center" Width="90" />
                        <Button Grid.Row="2" Command="{Binding SetStringCommand}" Content="Set String" Height="23" HorizontalAlignment="Center" Margin="0" Name="WriteEEPROMDCBtn" VerticalAlignment="Center" Width="90" />
                        <Label Content="{Binding DaughterStatus}" Height="25" HorizontalAlignment="Center" Margin="0" Name="DaughterCardLabel" VerticalAlignment="Center" Width="170" />
                    </Grid>                                       
                </Grid> 
        </GroupBox> 
```

EEPROMViewModel 类：

```
public ObservableCollection<EEPROMSlotViewModel> SlotChildren { get; set; }

public EEPROMViewModel ()
{
        SlotChildren = new ObservableCollection<EEPROMSlotViewModel>();
        SlotChildren.Add(new EEPROMSlotViewModel() { ParentVM = this, SlotButtons = "0 : None", ID = 0 });
        SlotChildren.Add(new EEPROMSlotViewModel() { ParentVM = this, SlotButtons = "1 : None", ID = 1 });
        SlotChildren.Add(new EEPROMSlotViewModel() { ParentVM = this, SlotButtons = "2 : None", ID = 2 });
        SlotChildren.Add(new EEPROMSlotViewModel() { ParentVM = this, SlotButtons = "3 : None", ID = 3 });
        SlotChildren.Add(new EEPROMSlotViewModel() { ParentVM = this, SlotButtons = "4 : None", ID = 4 });
        SlotChildren.Add(new EEPROMSlotViewModel() { ParentVM = this, SlotButtons = "5 : None", ID = 5 });
        SlotChildren.Add(new EEPROMSlotViewModel() { ParentVM = this, SlotButtons = "6 : None", ID = 6 });
 } 
```

生成 7 个单选按钮，每个单选按钮的 ID 相关。

EEPROMSlotViewModel 类：

```
private string _SlotButtons;
    public string SlotButtons
    {
        get; set;
    }

    private EEPROMViewModel _parentVm;
    public EEPROMViewModel ParentVM
    {
        get; set;
    }

    private int _ID;
    public int ID
    {
        get; set;
    }

    private bool _isChecked;
    public bool IsChecked
    {
        get; set;
    } 
```

因此，每当我选择一个单选按钮并单击`SETSTRING`按钮时，都会执行以下代码：

```
EEPROMSlotViewModel mSlotVM = new EEPROMSlotViewModel();

        string label;
        if (mSlotVM.ID == 0) //Accessing the 1st radiobutton clicked
        {
            label = string.Empty;
            mSlotVM.getShortName(0, label);
            if (label == string.Empty)
            {
                label = "None";
            }

            mSlotVM.SlotButtons = Convert.ToString(0 + ":" + label); // Setting CONTENT of radiobutton selected 
        } 
```

假设我单击了第一个单选按钮，ID 应该为 0。它调用`getShortName()`执行以下操作的方法：

```
ParentVM.SelectedDaughterBoardBoxList = ParentVM.DaughterBoardBoxList[0];
ParentVM.SelectedDaughterVersionBoxList = ParentVM.DaughterVersionBoxList[0];
ParentVM.SelectedDaughterSerialBoxList = ParentVM.DaughterSerialBoxList[0];
shortlabel = "Hello"; 
```

我在这里面临几个问题：

*   `mSlotVM`访问其他班级成员/功能的正确方法是什么？
*   一旦控制进入`getShortname()`，它就会抛出如下异常：`Object reference not set to an instance of an object.`at `ParentVM.DaughterBoardBoxList[0];`。
*   即使我在 getShortName() 中注释前 3 个语句，当调用 getShortName 并且一旦控件返回时，值为 `label`“”，我应该是“你好”。

我觉得`mSlotVm`这是异常背后的原因。请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:58:20.190

1.  不，您只需创建`EEPROMSlotViewModel`-Class 的新实例，您没有访问任何 RadioButtons ViewModel。
2.  `EEPROMViewModel`如果您能向我们展示您的-Class将会很有帮助。我认为问题在于，您的`ParentVM.`-Lists 为空。
3.  要实现您想要的，您的`getShortname()`-method 必须如下所示：

    ```
    public void getShortname(int i, ref string shortlabel)
    {
        ParentVM.SelectedDaughterBoardBoxList = ParentVM.DaughterBoardBoxList[0];
        ParentVM.SelectedDaughterVersionBoxList = ParentVM.DaughterVersionBoxList[0];
        ParentVM.SelectedDaughterSerialBoxList = ParentVM.DaughterSerialBoxList[0];
        shortlabel = "Hello";
    } 
    ```

编辑：通过`EEPROMSlotViewModel mSlotVM = new EEPROMSlotViewModel();`你创建一个新的实例`EEPROMSlotViewModel`，但你没有得到选中的 RadioButtons ViewModel。因此，当您调用`mSlotVM.getShortName(0, label);`mSlotVM 时没有 ParentVM 时，这就是引发异常的原因。您可以做的是通过您的 SlotChildren-List 并获取 IsChecked-property 为 true 的 EEPROMSlotViewModel。

例子：

```
EEPROMSlotViewModel checkedVM;    
string label = string.Empty;
foreach (EEPROMSlotViewModel vm in SlotChildren)
{
    if (vm.IsChecked)
    {
        checkedVM = vm;
    }
    else
    {
        vm.SlotButtons = vm.ID + " : NONE"
    }

} 
checkedVM.getShortName(0, ref label);
if (label == string.Empty)
{
    label = "None";
}
checkedVM.SlotButtons = Convert.ToString(0 + ":" + label); // Setting CONTENT of radiobutton selected 
```

# android - 如何在Android中实现图像失真效果

> ID：13137115
> 
> 赞同：9
> 
> 时间：2012-10-30T10:31:45.810
> 
> 标签：android, image, image-processing, distortion

我想在 Android 中实现图像失真效果。我使用 GPUImage 框架在 iOS（iPhone 和 iPad）中做了同样的事情。Android中是否有可用的框架或库来做同样的事情。我想在 Android 中实现以下失真效果。

捏变形

漩涡畸变

膨胀变形

拉伸变形

请为此提供任何解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:22:58.903

您的 SDK 文件夹中有一个非常基本的示例，位于 APIDemos 项目中。见`SDK_DIR/samples/android-*/ApiDemos/src/com/example/android/apis/graphics/BitmapMesh.java`。

[图像失真算法资源的](https://stackoverflow.com/questions/225548/resources-for-image-distortion-algorithms)答案也可能有所帮助。

# html - 页脚不粘在页面底部

> ID：13137117
> 
> 赞同：0
> 
> 时间：2012-10-30T10:31:49.393
> 
> 标签：html, css, footer, sticky-footer

我找不到“页脚”不粘在页面末尾的原因，而且正文不是真正的 100% 高度。

我在此链接中有代码：

[https://dl.dropbox.com/u/107452929/flow/CWSMainTitle.htm](https://dl.dropbox.com/u/107452929/flow/CWSMainTitle.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T10:35:25.237

添加`position:fixed`

```
footer {
position: fixed;
bottom: 0;
left: 0;
right: 0;
height: 30px;
} 
```

* * *

如果您希望页脚粘在页面底部，那么您需要添加一个 div 来包装整个代码并提供`position:relative`给包装器 div 并保持您的页脚 css 原样。

在这种情况下，页脚具有父 div 来应用绝对位置，但在您当前的代码中，您没有父 div 来放置绝对位置。

**HTML**

```
<div class="wrapper">
your full html code here
</div> 
```

**CSS**

```
.wrapper{
position:relative;
height:auto;
} 
```

**[现场演示](http://jsfiddle.net/BWaGx/2/)**

* * *

如果您不特别关注，`position:absolute`则可以将其更改为`position:relative`并将页脚 html 标记放置在页面末尾。在这种情况下，您不需要添加包装器 div。

[**演示 2**](http://jsfiddle.net/BWaGx/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:43:07.610

尝试使用 `min-height:100%`到身体。并给`display:inline-block`你的内容的包装

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T10:45:29.387

尝试这个：

```
.footer {position:absolute;bottom:0;left:0;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T10:40:59.677

如果您想将页脚放在整个页面的末尾，那么您无事可做，没有绝对的，没有固定的：只是在所有其他人之后的一个块。

# xml - 修改“NodeJS”上的 XML 标签

> ID：13137120
> 
> 赞同：3
> 
> 时间：2012-10-30T10:31:58.713
> 
> 标签：xml, node.js

有谁知道如何使用 NodeJS 修改 XML 文件的标记值

这是我的 XML 文件：

```
<note>
    <to>Tove</to>
    <from>Jani</from>
    <heading>Reminder</heading>
    <body>Don't forget me this weekend!</body>
</note> 
```

我想更改`<node>`为`<n>`

我在 Windows 上运行 nodeJS。到目前为止，我有以下代码；

```
var parser = new xml2js.Parser();
function xmltxt(response, postData){
    fs.readFile( './foo.xml', function(err, data) {
        parser.parseString(data, function (err, result) {
            console.dir(result.note.to[0]);
        });
    });
} 
```

这会读取节点值，但我需要修改标签值。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-30T17:04:26.407

使用[该死的simple-xml](https://www.npmjs.com/package/damn-simple-xml)，您可以执行以下操作：

```
var Serializer = require("damn-simple-xml");  // constructor
var dsx = new Serializer();
var fs = require("fs");

var out = fs.createWriteStream("./foo2.xml");

dsx.deserialize(fs.createReadStream("./foo.xml"), function(err, root) {
    if (err) {
        console.log(err);
        return;
    }
    dsx.serialize({
        name: "n",
        data: root.data
    }, 
    function(err, xmlpart, level) {
        if (err) {
            console.log(err);
            return;
        }
        out.write(xmlpart);
        if (level === 0) { // XML streaming done
            out.end(); // closes the stream.
        }
    });
}); 
```

在前面的示例中，我们`root`在反序列化回调中接收到一个对象。该对象由`root.name`（即根节点的名称）组成，`root.data`它是来自反序列化 XML 文档的实际数据。

然后在序列化时，我们返回相同的`root.data`对象，但在那里我们将根节点的名称更改为您问题中指定的“n”。

由于damn-simple-xml 可以使用流来输入xml 并将其内容作为XML 块输出，因此该库的内存占用非常小。

# php - 使用插件删除 WordPress 的 license.txt

> ID：13137127
> 
> 赞同：2
> 
> 时间：2012-10-30T10:32:24.487
> 
> 标签：php, wordpress

我想写一个插件`HTTP 404`在用户请求时 返回`license.txt`，什么是正确`action`的钩子（有效和有效的阻塞方式）？

**更新：**

因为我无法控制 Web 服务器，所以我必须将其作为插件执行

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T15:43:10.497

解决方案实际上非常简单。您需要创建写入 .htaccess 的插件。

1.  在 /wp-content/plugins 创建**licence_redirect**文件夹。
2.  在该文件夹中创建**licence_redirect.php**文件。
3.  将下面的代码粘贴到这个**licence_redirect.php** php 文件中：

> ```
> <?php
> /*
> Plugin Name: Licence redirect
> Description: Redirects license.txt. to 404
> Author: J. Wrong
> Version: 0.1
> */
> ?>
> <?php
> function lr_flush_rewrites() {
>     global $wp_rewrite;
>     $wp_rewrite->flush_rules();
> }
> 
> function lr_add_rewrites() {
>     global $wp_rewrite;
>     $lr_wp_rules = array(
>         'license\.txt$' => '[R=404,L]',
>     );
> 
>     $wp_rewrite->non_wp_rules = $lr_wp_rules + $wp_rewrite->non_wp_rules;
> }
> 
> register_activation_hook( __FILE__, 'lr_flush_rewrites' );
> add_action('generate_rewrite_rules', 'lr_add_rewrites'); 
> ```

1.  安装并激活插件。
2.  在管理面板中转到设置 -> 永久链接
3.  按保存更改 从现在开始，您的 license.txt 请求将被重定向到 404。如果您无法在服务器上创建文件夹，那么您需要压缩插件的文件夹并使用 WP 管理员上传。干杯...现在计算赏金：P

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T06:13:13.380

你不能。使用标准的 WordPress `.htaccess`，对静态文件的请求根本不会传递给 PHP，因此无法挂钩它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T22:58:40.267

有一个插件可以为您做到这一点。只需设置要重定向的文件及其目标。它甚至保留日志

[http://wordpress.org/extend/plugins/redirection/](http://wordpress.org/extend/plugins/redirection/)

# python - 为什么 map 和 filter 在 Python 3.x 中不像在 Python 3.x 中那样“交互”？

> ID：13137136
> 
> 赞同：2
> 
> 时间：2012-10-30T10:32:59.063
> 
> 标签：python, python-3.x

我曾经在 Python 2.7 中使用 IDLE 进行交互式编程。在 2.7 中，当我执行以下操作时：

```
map(... some fn ..., ... some collection ...) 
```

或者

```
filter(... some fn ..., ... some collection ...) 
```

我得到的结果是应用函数产生的集合。

升级到 Python 3.2 后，当我执行相同操作时，我只会得到“过滤器对象”或“映射对象”，并且必须手动遍历集合以查看结果。

这是有意的吗？您是否知道任何 Python 3.2 IDE 在打印函数输出方面会表现得像旧的 IDLE？我基本上是在寻找“REPL for Python”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T10:35:39.567

这与 IDLE 无关；[`filter()`](http://docs.python.org/3/library/functions.html#filter)和[`map()`](http://docs.python.org/3/library/functions.html#map)函数在 Python 3 中发生了变化，现在返回一个迭代器而不是一个列表：

> `filter`: 构造一个迭代器...
> 
> `map`: 返回一个迭代器...

如果您想以列表的形式查看结果，请使用`list(filter(...))`and 。`list(map(...))`

或者，您可以使用列表推导：

```
[func(item) for item in somelist]  # same as list(map(func, somelist))
[item for item in somelist if func(item)]  # same as filter(func, somelist)) 
```

# python - 如何从已执行但未在其中声明的函数中获取模块的文件路径？

> ID：13137141
> 
> 赞同：1
> 
> 时间：2012-10-30T10:33:08.887
> 
> 标签：python, filepath

如果我想要当前模块的路径，我将使用`__file__`.

现在假设我想要一个函数来返回它。我不能这样做：

```
def get_path():
    return __file__ 
```

因为它将返回已在其中声明函数的模块的路径。

即使不是在模块的根目录而是在任何嵌套级别调用该函数，我也需要它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:16:32.320

我会这样做：

```
import sys

def get_path():
    namespace = sys._getframe(1).f_globals  # caller's globals
    return namespace.get('__file__') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:38:24.673

在这种情况下从`globals`dict 中获取它：

```
def get_path():
    return globals()['__file__'] 
```

编辑以回应评论：给定以下文件：

```
# a.py
def get_path():
    return 'Path from a.py: ' + globals()['__file__']

# b.py
import a

def get_path():
    return 'Path from b.py: ' + globals()['__file__']

print get_path()
print a.get_path() 
```

运行它会给我以下输出：

```
C:\workspace>python b.py
Path from b.py: b.py
Path from a.py: C:\workspace\a.py 
```

除了绝对/相对路径不同（为简洁起见，让我们忽略它），它对我来说看起来不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:41:58.460

我找到了一种使用检查模块的方法。我对这个解决方案没意见，但如果有人找到一种方法来做到这一点而不倾倒整个堆栈跟踪，它会更干净，我会感激地接受他的回答：

```
def get_path():
    frame, filename, line_number, function_name, lines, index =\
        inspect.getouterframes(inspect.currentframe())[1]
    return filename 
```

# wordpress - “无法修改标题信息” - Wordpress functions.php

> ID：13137147
> 
> 赞同：0
> 
> 时间：2012-10-30T10:33:34.147
> 
> 标签：wordpress, php

我的functions.php 上出现无法修改标头信息错误，更具体地说是它包含的文件（这不是问题）。

`Warning: Cannot modify header information - headers already sent by (output started at /home/yc/domains/yc.keytoe.nl/public_html/wp-content/themes/yourconnector/inc/metaboxes.php:6) in /home/yc/domains/yc.keytoe.nl/public_html/wp-includes/pluggable.php on line 881`

Metaboxes.php 是我的 metabox 文件，我的所有代码都在其中。一切正常，除了尝试保存任何内容时，我得到一个空白页。保存成功，但我必须手动返回 wp-admin，这显然不是它应该如何工作的。

我的 metaboxes.php 代码是：

```
<?
// --- METABOX CREATE --- //
add_action('admin_init', 'page_spec_meta');

function page_spec_meta(){
(this is line 6) $post_id = $_GET['post'] ? $_GET['post'] : $_POST['post_ID'] ; $template_file =  get_post_meta($post_id,'_wp_page_template',TRUE);
 if ($template_file == 'talenten.php')
{
    add_meta_box("career-meta", "Career", "career_meta", "page", "normal", "high");
    add_meta_box("business-meta", "Business", "business_meta", "page", "normal", "high");
    add_meta_box("inspired-meta", "inspired", "inspired_meta", "page", "normal", "high");
    add_meta_box("network-meta", "Network", "network_meta", "page", "normal", "high");
    add_meta_box("future-meta", "Future", "future_meta", "page", "normal", "high");
}
if ($template_file == 'bedrijven.php')
{
    add_meta_box("unique-meta", "Unique", "unique_meta", "page", "normal", "high");
    add_meta_box("providing-meta", "Providing", "providing_meta", "page", "normal", "high");
    add_meta_box("inspired-meta", "inspired", "inspired_meta", "page", "normal", "high");
    add_meta_box("network-meta", "Network", "network_meta", "page", "normal", "high");
    add_meta_box("future-meta", "Future", "future_meta", "page", "normal", "high");
}
}

....rest of the page
?> 
```

我真的不知道出了什么问题。它不能是空格，检查所有这些。

# php - php需要文件

> ID：13137149
> 
> 赞同：1
> 
> 时间：2012-10-30T10:33:39.493
> 
> 标签：php, require

我在需要文件时遇到了麻烦：

```
$path_requires = "/var/www/vhosts/website.com/v3" ;

require("$path_requires/vars.inc.php") ; 
```

错误是：

> /var/www/vhosts/website.com/portraits 致命错误：require()：打开失败需要'/var/www/vhosts/website.com/v3/vars.inc.php'

如果我从终端做：

```
cat /var/www/vhosts/website.com/v3/vars.inc.php 
```

我检查了目录的权限。网站.com。它的：

> drwxr-xr-x 17 apache psaserv 4096 Oct 18 03:32 v3

我更改了对该目录的权限，但没有成功。

有谁知道发生了什么。为什么我不能要求这个 php 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:47:35.753

很有可能它正在您的实际主机中寻找 /var/www/vhosts 文件夹，但很明显没有找到它。尝试：

```
$path_requires = "/v3" ;

require("$path_requires/vars.inc.php") ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:33:28.483

phpinfo() 结果：

```
open_basedir    /var/www/vhosts/website.com/portraits/:/tmp/    no value 
```

/etc/php.ini：

```
;open_basedir = 
```

如何更改本地值？如果我更改 /etc/php.ini 本地值占上风。

/website.com/portraits/ Portraits是子域portraits.website.com的目录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T10:48:18.670

使用这个检查

```
$path_requires = "https://www.website.com/v3" ; (base url)

require("$path_requires/vars.inc.php") ; 
```

# android - GreenDAO 创建自动 ID 属性

> ID：13137150
> 
> 赞同：10
> 
> 时间：2012-10-30T10:33:41.087
> 
> 标签：android, sqlite, greendao

有没有办法让数据库以自动方式创建 ID 属性？

我想生成如下所示的东西：

```
Entity entity = schema.addEntity("MyEntity");
entity.addIdProperty().autoIncrement().primaryKey(); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T10:38:17.280

是的，这看起来很好。根据您的需要 entity.addIdProperty() 或 entity.addIdProperty().autoIncrement() 应该没问题。addIdProperty 已经调用了primaryKey()。

# php - 为什么在 65535 上使用 0xffff

> ID：13137151
> 
> 赞同：19
> 
> 时间：2012-10-30T10:33:41.170
> 
> 标签：php

我已经看到一些 PHP**脚本**在`mt_rand(0, 0xffff)`. 我这样做`echo 0xffff;`了，结果是**65535**。使用这个**0xffff**有什么意义吗？那是什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-30T10:38:58.677

十六进制表示法`0xffff`清楚地表明数字中的所有位都是`1`. 是相同的`65535`数字，但二进制表示不那么明显。这只是一个计数。所以这种写数字的方式有不同的语义。

例如，如果要声明某个变量的最大值必须为 65535，那么最好这样声明：

```
$max_value = 65535; 
```

因为这使人类很容易将其与其他值进行比较，例如 65500 ( `< $max_value`) 或 66000 ( `> $max_value`)。

位域则相反。

```
$default_state = 65535; 
```

这并没有告诉我所有位都是一（实际上它们是）。

```
$default_state = 0xFFFF; 
```

这样做：每个十六进制数字代表四个位，一个`F`表示四个 1 位。因此`0xFFFF`是`0b1111111111111111`二进制的。

当程序员想要明确二进制表示的重要性时使用十六进制表示法，可能比精确的数值更重要。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T10:35:46.837

如果您的代码正在执行二进制操作，那么与十进制相比，使用这样的十六进制值在上下文中更容易理解；尽管我不会将 mt_rand 视为其中一种情况（尤其是因为下限是十进制，而在您的示例中只有上限是十六进制）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-30T10:35:15.940

这只是 65535 的十六进制表示法。在您提供的上下文中，两者之间没有重要区别，但比 65535 更容易记住“0、x 和四个 f 字符”。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-08-21T09:37:23.713

**0xffff**是一个十六进制数。**0x**只告诉你 0x 后面的值**是**十六进制的。十六进制有**16 位数字**，从**0 到 9**和从**a 到 f**（这意味着，`a = 10, b = 11, c = 12, d = 13, e = 14, f = 15`在十六进制数中）。

要计算十六进制数的十进制值，您必须将数字的值乘以 16 乘以数字中位数的幂。

例子：

```
ffff = (15*16^3) + (15*16^2) + (15*16^1) + (15*16^0) = 65535 
```

在上述情况下，`f`值为 15，它位于数字的 0、1、2 和 3 位。然后在下面的示例中，十六进制 3、4 和 6 的行为与十进制等效，`a`其值为 10。

```
34a6 = (3*16^3) + (4*16^2) + (10*16^1) + (6*16^0) = 13478 
```

希望能有所帮助

# objective-c - IOS中心底部位置视图

> ID：13137153
> 
> 赞同：2
> 
> 时间：2012-10-30T10:33:47.313
> 
> 标签：objective-c, ios, view, position

我对加载动画执行以下操作，将其放置在屏幕的底部中心。

```
CGPoint bottomCenter = CGPointMake((self.imageView.bounds.size.width / 2), (self.imageView.bounds.size.height * 0.8));  
    self.activityView.center = bottomCenter; 
```

（imageView 是全屏启动画面）

如果方向是纵向，则它的位置是完美的，但是在侧面、横向或倒置纵向时，动画会在几英里之外结束：S

有谁知道放置这个加载动画的正确方法，它用于启动画面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:41:26.207

首先，看看 tkanzakic 的回答。其次，不要使用屏幕边界，通过其父视图来定位视图。如果您将视图放在父视图的底部并正确设置了自动调整大小的蒙版，那么一切都会自动完成 - 无需检查设备方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:44:49.973

试试这个代码

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
CGPoint bottomCenter;
if (deviceOrientation == 1) {

bottomCenter = CGPointMake((screenBounds.size.width / 2), (screenBounds.size.height * 0.8));
} 
else if (deviceOrientation == 4) {
bottomCenter = CGPointMake((screenBounds.size.width / 2), (screenBounds.size.height * 0.8));
} 
```

在横向模式下，您的宽度和高度错误

在横向模式下，宽度和高度也会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T10:38:20.327

使用`UIDeviceOrientationIsLandscape(deviceOrientation)`and`UIDeviceOrientationIsPortrait(deviceOrientation)`而不是`deviceOrientation==X`

# visual-studio-2010 - 在 TFS 中合并文件时如何避免编码冲突？

> ID：13137160
> 
> 赞同：3
> 
> 时间：2012-10-30T10:34:15.840
> 
> 标签：visual-studio-2010, encoding, tfs

我们正在使用 TFS 作为版本控制系统在 Visual Studio 2010 中开发大型代码库。

在执行合并时，我们最近遇到了很多编码问题。对于他们中的大多数，我们为我们获得的其他文件提供“选择编码和合并”选项：

`"The encodings for the files being merged must match or an encoding conversion must be specified."`

我们通常将每个文件都放在 UTF-8 中，尽管在代码页 1252 和 utf-8 之间合并时会发生冲突。

为了解决这些问题，我们总是执行手动合并，这可能非常麻烦。我们怎样才能避免这些错误呢？TFS 中源代码文件的推荐编码是什么？我们如何递归设置编码以避免将来出现此类错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T17:26:30.650

您收到该消息是因为 TFS 认为（正确或错误地）文件在不同分支中具有不同的编码。要仔细检查编码，请转到任何源代码控制文件的[属性窗口。](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28VS.TFC.SOURCECONTROL.DIALOGFILEFOLDERPROPERTIES%29&rd=true)

尽管 TFS 会在将文件添加到源代码管理时检测到编码，但如果稍后更改编码，TFS 并不总是会选择它。单击[设置编码](http://msdn.microsoft.com/en-us/library/ms245453%28v=vs.100%29.aspx)按钮，然后单击检测以查看实际编码是什么。如果它不是您所期望的，则检查文件，在文本编辑器中修改编码，然后让 TFS 重新检测编码。

一旦两个分支中的编码相同，您就不应该再收到此错误。

# xslt - 空白文本操作

> ID：13137165
> 
> 赞同：0
> 
> 时间：2012-10-30T10:34:26.487
> 
> 标签：xslt

我生成了以下 XML：

```
<InvoiceStreet>Rod House Rods Way Euro Industrial Estate</InvoiceStreet> 
```

这包含空格，我想使用 xslt 将其转换为以下内容：

```
<AddressLine>Rod House Rods Way</AddressLine>
<AddressLine>Euro Industrial Estate</AddressLine> 
```

目前我只能像这样输出它：

```
<AddressLine>Rod House Rods Way
Euro Industrial Estate</AddressLine> 
```

有没有办法使用 XSLT 做到这一点？

## 编辑

这是我目前拥有的：

```
<Address>
  <AddressLine>
    <xsl:value-of select="/*/*/*/*/*/xsales:DeliveryStreet" />
  </AddressLine>
</Address> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:03:16.703

使用[substring Function](http://msdn.microsoft.com/en-us/library/ms256054.aspx)，尝试使用这段代码片段：

```
<Address>
  <AddressLine>
    <xsl:value-of select="substring(/*/*/*/*/*/xsales:DeliveryStreet,0,18)" />
  </AddressLine>
  <AddressLine>
    <xsl:value-of select="substring(/*/*/*/*/*/xsales:DeliveryStreet,19,22)" />
  </AddressLine>
</Address> 
```

**更好的方法**

1.  获取完整地址的长度。例如，上面提供的示例字符串的长度为 41。

    ```
    <xsl:variable name="addressLength" select="string-length(/*/*/*/*/*/xsales:DeliveryStreet)" /> 
    ```

2.  将长度除以 2 并截断浮动部分，即得到 20

    ```
    <xsl:variable name="splitLength" select="$addressLength / 2" /> 
    ```

3.  现在将子字符串函数从零 (0) 应用到`splitLength`变量

    ```
    substring(/*/*/*/*/*/xsales:DeliveryStreet, 0, $splitLength) 
    ```

    例如，您将获得输出为`"Rod House Rods Way E"`

4.  再次使用`LastIndexOf`模板将子字符串函数应用到最后一次出现的空间。

    例如，您将获得所需的输出`"Rod House Rods Way"`

    对于`LastIndexOf`模板方法，你可以参考这篇文章，[XSLT：Finding last occurrence in a string](https://stackoverflow.com/questions/3141847/xslt-finding-last-occurance-in-a-string)

希望这将解决您的动态地址问题，干杯！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:50:24.007

从您发布的输出来看，输入似乎具有`<xsales:DeliveryAddress>`由换行符分隔的地址组件。

如果是这样，您可以拆分换行并使用递归模板`xsales:DeliveryAddress`将每一行放入它自己的行中到模板：`<AddressLine>``<AddressLine>`

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsales="xsales"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:mailplus="http://api.mailplus.nl/rss/mailplus/">
    <xsl:output method="html" indent="yes"/>
    <xsl:param name="ItemsToShow" select="2"/>
    <xsl:param name="ShowItemDetails"/>
    <xsl:param name="ShowItemDate"/>
    <xsl:param name="Locale"/>
    <xsl:param name="Target"/>
    <xsl:template match="rss">
        <Address>
           <xsl:call-template name="AddressLines">
               <xsl:with-param name="txt" 
                               select="/*/*/*/*/*/xsales:DeliveryStreet"/>
           </xsl:call-template>
        </Address>
    </xsl:template>

    <xsl:template name="AddressLines">
        <xsl:param name="txt"/>
        <!--default value for delimiter to use line-feed character -->
        <xsl:param name="delimiter" select="'&#xA;'"/>
        <xsl:choose>
            <xsl:when test="contains($txt, $delimiter)">
                <AddressLine>
                    <xsl:value-of select="normalize-space(
                                           substring-before($txt, 
                                                            $delimiter))"/>
                </AddressLine>
                <xsl:call-template name="AddressLines">
                    <xsl:with-param name="txt" 
                                    select="substring-after($txt,
                                                            $delimiter)"/>
                    <xsl:with-param name="delimiter" select="$delimiter"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
            <!--filter out whitespace-only lines(from trailing line feeds)-->
                <xsl:if test="normalize-space($txt)">
                    <AddressLine>
                        <xsl:value-of select="$txt"/>
                    </AddressLine>    
                </xsl:if>  
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

# r - R 和并行化

> ID：13137166
> 
> 赞同：2
> 
> 时间：2012-10-30T10:34:39.457
> 
> 标签：r, parallel-processing

我是并行处理的新手，我想要一些建议。

我的 R 程序的结构如下：

```
Data reading
Preliminary calculations

vector1 <- array(NA,sim=nsim)
vector2 <- array(NA,sim=nsim)
for (i in 1:nsim)
{
some calculations involving some global variables and 
whose results are saved in vector1 and vector2
}
Final calculations using vector1 and vector2 
```

这个循环非常耗时，我想知道哪个 R 包可以为我提供并行化它的最佳方法。你有什么想法吗？提前致谢。

# google-chrome - 如何在 Google Chrome 的 NPAPI 插件中获取打印机接口？

> ID：13137168
> 
> 赞同：0
> 
> 时间：2012-10-30T10:34:54.840
> 
> 标签：google-chrome, interface, npapi

如何在谷歌浏览器的 NPAPI 插件中接收打印机接口？我在写 a `plug-in`of 时遇到了困难`NPAPI`。我无法理解。如何接收所有列表`printers`并接收`interface`其中之一？

我使用[https://developer.mozilla.org/en-US/docs/Gecko_Plugin_API_Reference/Scripting_plugins](https://developer.mozilla.org/en-US/docs/Gecko_Plugin_API_Reference/Scripting_plugins)的文档编写脚本插件。但我没有在这个文档中找到关于这个问题的答案。

我需要访问打印机并在插件中对其进行设置。它是如何制作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T03:25:56.093

您尝试做的事情不能直接使用 NPAPI 完成。NPAPI 中没有用于获取打印机列表的接口——事实上，NPAPI 完全不知道存在可能具有设置的浏览器这一事实。NPAPI 插件只知道它已插入的页面和/或它正在处理的文件的流。

NPAPI 插件在打印方面唯一能做的就是响应 NPP_Print 调用，一旦用户决定打印页面，浏览器就会调用该调用。当它被调用时，插件接收到的所有内容都是它可以绘制的上下文，然后将被打印——没有关于可用打印机、打印设置等的信息。

有关 NPAPI 插件是什么和不是什么的更多信息，请参阅[http://npapi.com/extensions](http://npapi.com/extensions)

您尝试执行的操作*可能*是使用系统 API 调用（Windows API、mac API 等）或使用扩展。扩展是完全特定于浏览器的，因此您必须查看您想要支持的每个单独的浏览器，看看是否可以完成您想要做的事情。

# jquery - jqgrid 加载完成应用过滤器

> ID：13137169
> 
> 赞同：6
> 
> 时间：2012-10-30T10:34:57.880
> 
> 标签：jquery, jqgrid

我正在使用 jqgrid 的客户端过滤器功能：

```
var opts = {  
            ...
            loadonce: true,
            ...
}

var grid = jQuery("#Grid");
grid.jqGrid(opts)
grid.jqGrid('navGrid','#mpager',{edit:false, 
                                     add:false,
                                     del:false}, {}, {}, {}, 
                                     {
                                      multipleSearch:true, 
                                      multipleGroup:true,
                                      recreateFilter: true,
                                      overlay: 0,
                                      tmplNames: ['Not Empty','All','=10kw','fg'],
                                      tmplFilters: populateStaticFilters(),
                                      } ); 
```

我正在基于一些复选框构建这样的自定义过滤器：

```
var filter = { "groupOp": "OR",
               "rules": []
}

var rules = {
    factive :  { "field": "Total", "op": "nn", "data": "" },
    fempty :  { "field": "Total", "op": "nu", "data": "" },
    f10 :  { "field": "Power", "op": "eq", "data": "10" },
    factivetoday  :   { "field": "LastUpdate", "op": "eq", "data": today },
}

function jqgselectFilter(myfilter){
    grid = jQuery("#Grid");
    //console.log(myfilter);
    grid[0].p.search = myfilter['rules'].length>0;
    jQuery.extend(grid[0].p.postData,{filters:JSON.stringify(myfilter)});
    grid.trigger("reloadGrid",[{page:1}]);    
}

function populateFilter() {
        filter['rules']=[]
        if (jQuery('input[name=showactive]').attr('checked')) {
            filter['rules'].push(rules['factive']);
        }
        if (jQuery('input[name=showempty]').attr('checked')) {
            filter['rules'].push(rules['fempty']);
        }
        if (jQuery('input[name=showactivetoday]').attr('checked')) {
            filter['rules'].push(rules['factivetoday']);
        }
        //console.log(filter);
        jqgselectFilter(filter);
} 
```

我的问题是我无法在加载完成时或网格完成时应用与默认选择相对应的过滤器：

```
grid.jqGrid('setGridParam', { "loadComplete": populateFilter() }); 
```

如果我稍微延迟执行，一切都会按预期工作：

```
setTimeout('populateFilter();',500); 
```

我如何在不使用 setTimeout 的情况下实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T06:52:46.817

你能试试下面提到的网格完成方法吗？

grid.jqGrid('setGridParam', { "gridComplete": populateFilter() });

# iphone - iOS 文件预览

> ID：13137171
> 
> 赞同：1
> 
> 时间：2012-10-30T10:35:02.163
> 
> 标签：iphone, ipad, ios5, ios4, ios6

我想在应用程序中预览文件。
文件来自网络服务器（我有文件的 url。）
可以是任何类型。（图像/音频/视频/文档等）

我想要 Mac 中的 Finder 预览器之类的预览器（通过在 Mac 中的任何文件上按空格键）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-25T00:30:33.790

您应该使用[UIDocumentInteractionController](https://developer.apple.com/library/ios/documentation/uikit/reference/UIDocumentInteractionController_class/Reference/Reference.html)。您可以在此处查看教程以获取有关如何使用它的示例：

[http://mobile.tutsplus.com/tutorials/iphone/previewing-and-opening-documents-with-uidocumentinteractioncontroller/](http://mobile.tutsplus.com/tutorials/iphone/previewing-and-opening-documents-with-uidocumentinteractioncontroller/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T12:39:03.577

IMO 最简单的方法是简单地使用 UIWebView。

`[self.webView loadRequest:[NSURLRequest requestWithURL:fileUrl]];`

指向文件 URL（远程或本地）的`fileUrl`位置在哪里。`NSURL`根据我的经验，UIWebViews 非常有能力有效地打开许多不同的文件类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-01T18:16:35.670

UIWebView 的问题是它有内存泄漏，如果你持续预览图像会导致你的应用程序崩溃，你可以通过仪器检查行为。如果您不关心加密，我认为最好的方法是使用 Quick Look Previewer。如果你关心加密，你可以使用 UIImageView

# c# - C# XmlNodeList 扩展 IsNullOrEmpty 检查

> ID：13137178
> 
> 赞同：1
> 
> 时间：2012-10-30T10:35:17.960
> 
> 标签：c#

我有这样的 IEnumerable 集合的扩展：

```
public static bool IsNullOrEmpty<T>(this IEnumerable<T> enumerable) {
    return enumerable == null || !enumerable.Any(); 
} 
```

它适用于除 XmlNodeList 之外的许多集合。这是为什么？XmlNode 实现 IEnumerable ??

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:39:42.570

这是因为[`XmlNodeList`implements `IEnumerable`， not`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/system.xml.xmlnodelist.aspx)，你可以使用下面的代替：

```
public static bool IsNullOrEmpty(this IEnumerable enumerable)
{
    return enumerable == null || !enumerable.Cast<object>().Any();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:39:46.037

`XmlNodeList`only implements`IEnumerable`而不是`IEnumerable<T>`，所以你必须有这个方法才能完成它。

```
public static bool IsNullOrEmpty(this IEnumerable enumerable) {
    return enumerable == null || !enumerable.Cast<object>().Any();
} 
```

# html - 将 HTML 5 用于 NFC 应用程序

> ID：13137182
> 
> 赞同：0
> 
> 时间：2012-10-30T10:35:33.723
> 
> 标签：html

我想在我的 NFC 应用程序中使用 HTML5，以支持 NFC，我是否可以使用 HTML5 实现 NFC 功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:39:11.773

通过一些专有框架进行 NFC 访问是可能的，在 phonegap 中的 HTML5 中可以使用 nfc。你应该使用 phonegap NFC 插件。查看此链接[https://github.com/chariotsolutions/phonegap-nfc/blob/master/www/phonegap-nfc.js](https://github.com/chariotsolutions/phonegap-nfc/blob/master/www/phonegap-nfc.js)

# java - 在 netty 4.0 中选择 simplehandler 或 executor

> ID：13137183
> 
> 赞同：2
> 
> 时间：2012-10-30T10:35:36.883
> 
> 标签：java, netty

考虑以下服务器引导代码：

```
ChannelFuture f;
ServerBootstrap b = new ServerBootstrap();

try {
    b.group(new NioEventLoopGroup(), new NioEventLoopGroup())
            .channel(NioServerSocketChannel.class)
            .localAddress(1234)
            .childOption(ChannelOption.TCP_NODELAY, true)
            .childHandler(new MyChannelInitializer(new DefaultEventExecutorGroup(10)));

    f = b.bind().sync();
    f.channel().closeFuture().sync();
} 
```

和**MyChannelInitializer.java**：

```
public class MyChannelInitializer  extends ChannelInitializer<SocketChannel> {
    private EventExecutorGroup executorGroup;

    public MyChannelInitializer(EventExecutorGroup _executorGroup) {
        executorGroup = _executorGroup;
    }

    @Override
    public void initChannel(SocketChannel ch) throws Exception {
        ChannelPipeline pipeline = ch.pipeline();

        pipeline.addLast("framer", new DelimiterBasedFrameDecoder(8192, Delimiters.nulDelimiter()));
        pipeline.addLast("decoder", new StringDecoder(CharsetUtil.UTF_8));
        pipeline.addLast("encoder", new StringEncoder(CharsetUtil.UTF_8));

        // and then business logic.
        pipeline.addLast(this.executorGroup, "handler", new MyHandshakeHandler());
    }    
} 
```

现在- MyHandshakeHandler() 监听消息，这些消息需要与数据库交互。

在我们继续之前 - 上面的代码是正确的方法吗？（即，我使用 EventExecutorGroup 处理这种阻塞类型的处理程序的方式）

假设现在它是正确的，这是我的问题 - 虽然 MyHandshakeHandler() 确实需要与数据库交互，但这**只是**在与客户端的初始协商期间和通道关闭时。其余时间——即在握手完成之后和通道关闭之前——所需要的只是反弹不需要数据库的 ping/pong/heartbeat/keepalive 类型的消息。因此，A）是否应该是一个单独的处理程序（我们称之为“MyPingHandler”），它在 MyHandshakeHandler 或 B）之前添加到管道中，我应该将该逻辑添加到 MyHandshakeHandler 吗？

如果 A）我如何阻止消息进一步传播，以便不需要调用 MyHandshakeHandler，除非它专门是通道关闭事件（即 channelInactive()）？作为奖励点 - 如果 MyPingHandler 仅在握手完成后添加到管道中会很好，这样它就不会被不必要地调用。

如果 B) 在这种情况下，我不明白 EventExecutorGroup 的目的。这些连接是该服务器将支持的唯一类型....所以设置一组专用的线程组似乎很奇怪，这些线程组将用于每个单独的处理程序，而不仅仅是使用默认值。因此，如果 B 是解决这个特定情况的方法——我是否应该在没有 EventExecutorGroup 的情况下正常地将处理程序添加到管道中（如果不是——为什么不呢）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:48:24.387

答案是（A）。

要将事件传播到其下一个处理程序，您通常调用一个`ctx.fireXXX()`方法。如果您不调用其中任何一个，则不会传播该事件。因此，在您的情况下，您可以在握手完成后通过*不*调用`ctx.fireXXX()`方法在大多数情况下吞下事件。

此外，管道可以动态配置。您可以随时在管道中添加或删除处理程序。因此，您可以在握手结束后删除握手处理程序，也可以在握手结束后添加 ping 处理程序（或两者兼而有之）。

# android - Android：java.lang.IllegalStateException：数据库 xxx.db (conn# 0) 已经关闭

> ID：13137184
> 
> 赞同：5
> 
> 时间：2012-10-30T10:35:37.930
> 
> 标签：android, database, sqlite, illegalstateexception

我已经阅读了很多关于此错误消息的主题，但我无法解决我的问题。

我在 google play 上有一个应用程序，我从用户那里收到了一些错误报告。当我尝试应用程序时，一切正常。

在应用程序中，我正在管理一个包含 30 个表的大型数据库。我正在我的主要活动 onDestroy() 中关闭数据库，并且在查询完成后关闭所有游标。

我真的不知道为什么用户会不时收到此错误消息。

这是整个错误日志：

```
java.lang.IllegalStateException: database /data/data/mdpi.android/databases/LocalDatabase.db (conn# 0) already closed
at android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2213)
at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1565)
at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1525)
at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1605)
at mdpi.android.database.LocalDatabase.getHistoryLastSuccessfullUpdate(LocalDatabase.java:661)
at mdpi.android.Journals$7.onItemClick(Journals.java:723)
at android.widget.AdapterView.performItemClick(AdapterView.java:292)
at android.widget.Gallery.onSingleTapUp(Gallery.java:960)
at android.view.GestureDetector.onTouchEvent(GestureDetector.java:1310)
at android.widget.Gallery.onTouchEvent(Gallery.java:937)
at android.view.View.dispatchTouchEvent(View.java:5724)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1964)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1725)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1970)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1739)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1970)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1739)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1970)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1739)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1970)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1739)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1970)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1739)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1970)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1739)
at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2071)
at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1405)
at android.app.Activity.dispatchTouchEvent(Activity.java:2426)
at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2019)
at android.view.View.dispatchPointerEvent(View.java:5904)
at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3155)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2670)
at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:1000)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2679)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4517)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
at dalvik.system.NativeStart.main(Native Method) 
```

还有一个：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{mdpi.android/mdpi.android.UserInformations}: java.lang.IllegalStateException: database /data/data/mdpi.android/databases/LocalDatabase.db (conn# 0) already closed
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2202)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2237)
at android.app.ActivityThread.access$600(ActivityThread.java:139)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:154)
at android.app.ActivityThread.main(ActivityThread.java:4974)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.IllegalStateException: database /data/data/mdpi.android/databases/LocalDatabase.db (conn# 0) already closed
at android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2194)
at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1536)
at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1496)
at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1576)
at mdpi.android.database.LocalDatabase.getUserInformations(LocalDatabase.java:357)
at mdpi.android.UserInformations.onCreate(UserInformations.java:122)
at android.app.Activity.performCreate(Activity.java:4538)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2158)
... 11 more 
```

编辑：一个新错误。

今天，我得到一个与数据库访问有关的新错误：

```
java.lang.RuntimeException: An error occured while executing doInBackground()

at android.os.AsyncTask$3.done(AsyncTask.java:278)
at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
at java.lang.Thread.run(Thread.java:856)
Caused by: java.lang.NullPointerException
at android.database.sqlite.SQLiteStatement.releaseAndUnlock(SQLiteStatement.java:290)
at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:115)
at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1718)
at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1591)
at mdpi.android.database.LocalDatabase.insertCountry(LocalDatabase.java:143)
at mdpi.android.database.CountryTable.EnterCountry(CountryTable.java:21)
at mdpi.android.UserInformations$insertCountryAsync.doInBackground(UserInformations.java:270)
at mdpi.android.UserInformations$insertCountryAsync.doInBackground(UserInformations.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:264)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
... 4 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:33:21.703

`onDestroy()`只会在活动完成/销毁/从堆栈中删除时调用。当你搬出活动`onStop()`时会被调用。如果您需要保留当前设计，只需调用 close in `onStop()`。**注意：**当前活动的 onStop 将在新/下一个活动的 onCreate/onRestart 之后调用。

如果您有一个单独的数据库，则可以使用 pawelieba 提到的 SQLiteOpenHelper 类您也可以在 Application 类中使用 sqlite db 引用，并且可以在所有活动中使用该引用，例如

`((MyApplication)getApplication()).db`

`onCreate()`只需打开Application 类的 DB并在`onTerminate()`.

您还可以查看此错误的其他 SO 答案。之前已经问过很多次了。

[java.lang.illegalstateexception 数据库未打开android](https://stackoverflow.com/questions/10797927/java-lang-illegalstateexception-database-not-open-android)

[Android java.lang.IllegalStateException 数据库已经关闭](https://stackoverflow.com/questions/12420688/android-java-lang-illegalstateexception-database-already-closed)

[Android 插入数据 SQLite 错误 Caused by java.lang.IllegalStateException: database not open](https://stackoverflow.com/questions/9529995/android-insert-the-data-sqlite-error-caused-by-java-lang-illegalstateexception)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:14:01.707

SQLite 数据库具有可通过本机接口访问的本机接口`SQLiteDatabase`- 此类负责同步从不同线程对本机 SQLite 的访问。
`SQLiteDatabase`被缓存在`SQLiteOpenHelper`其中负责提供的实例`SQLiteDatabase`，它是单例模式。

根据我的经验，您应该拥有一个实例`SQLiteOpenHelper`并从中获取缓存`SQLiteDatabase`。那么你不需要照顾关闭/打开`SQLiteDatabase`。

应用程序的一个实例`SQLiteOpenHelper`必须在应用程序中有一个实例`SQLiteDatabase`。它将解决多线程访问本机数据库的问题。

简而言之：`SQLiteOpenHelper`您可以从中获取每个查询的数据库的单例。
我正在使用 Roboguice 来处理丑陋的单例模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T09:34:13.663

在我从事的一个项目中，我遇到了类似的问题。

该项目使用了数据访问层 (DAL)，它是一个抽象类，具有用于从只读数据库中检索数据的静态方法。这些方法打开数据库，检索数据并关闭数据库。这导致在关闭数据库时引发异常。并非总是如此，也并非在所有手机上。

当我实现[内容提供程序](http://developer.android.com/guide/topics/providers/content-providers.html)并使用它而不是 DAL 时，问题就消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-08T02:22:27.120

确定

*   查询后关闭光标以从 sqlite 获取数据。

*   在更新中使用事务，插入到 sqlite。

但是有时我们可能在查询序列中使用了很多 JOIN，它创建了 Temple 表来查询并且可能没有立即关闭

# php - 通用文件加密

> ID：13137189
> 
> 赞同：0
> 
> 时间：2012-10-30T10:35:47.217
> 
> 标签：php, ssl

我想知道是否有人可以给我一些关于文件加密的建议，我目前正在构建一个 Intranet，它需要具备的功能之一是让用户将文件发送给其他用户，[http://www.mailbigfile.com/](http://www.mailbigfile.com/)是我想要实现的一个例子。目前这是通过 SSL 完成的，我在上传之前使用 PHP 来验证文件类型等。我遇到的唯一问题是我的雇主希望我在上传文件之前加密文件，他们还希望每个上传的文件都用随机盐加密作为额外的安全措施。我主要担心的一个问题是文件类型并没有真正受到限制，因此它可以是从 jpeg 到 word 文档的任何内容，到目前为止，我发现使用 php 加密 word 和 pdf 文档很困难。所以我想知道是否有人可以就以下问题给我建议

1.如果您使用SSL并限制对目录的直接访问，您是否需要加密文件

2.我应该使用 php 来加密例如 MCRYPT 还是有替代方案。从以前的线程有人推荐使用 PEAR

[php文件加密方法。存在简单的东西吗？](https://stackoverflow.com/questions/805686/php-file-encryption-methods-does-something-simple-exist)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:43:30.330

1）不是为了传输，但我认为这里的重点是以安全的方式存储文件，这样即使您以某种方式获得了对该文件的访问权限，您也无法在不知道其加密和盐的情况下使用它。您将生成盐并将其与对文件的引用一起保存在数据库中。这个想法是，如果有人可以访问该文件而不是数据库，那么这些文件将毫无用处，因为攻击者对该文件一无所知。当有人请求下载文件并且获得授权时，您需要在将其发送给客户端之前对其进行解密。猜猜你的要求是什么？

2）我会做一个回退，如果没有回退到 PEAR，则使用模块中的 mcrypt 函数，因为 pear 会比模块慢。但是你说它是一个内网，所以添加 mcrypt 模块应该很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:06:41.713

*在上传之前*加密每个文件意味着它必须在客户端计算机上进行。因此，这必须通过单独的程序（例如，GNU PG）或在浏览器中完成，例如[通过 Javascript 的 AES](http://code.google.com/p/crypto-js/)（或 Java 小程序，或执行相同操作的 Flash）。

不需要为通过 SSH 传输的文件加密，因为协议已经这样做了。然而，虽然文件在“网络上”是安全的，但任何有权访问接收机器（和服务器）的人都可以读取该文件。如果这是一个问题，您**必须**加密文件。

最大的挑战是以安全的方式在发送者和接收者之间传递加密密钥。这完全不是微不足道的，如果做错了，多层加密和添加大量盐的整个过程将毫无用处。例如，如果加密密钥在收件人下载文件的服务器上（通过 SSH），那么任何对服务器有足够访问权限的人（管理员或入侵者）都可以使用存储在那里的密钥解密文件，从而所有加密都没用。公钥密码术是解决该问题的一种方法。我之前提到过 GNU PG 吗？

至于“盐”，这是错误的术语，您的意思可能是“初始化向量”（盐是用于散列函数，而不是用于加密）。

“需要个人IV”要求的解决方案相当简单：在客户端计算机上生成一个或两个伪随机数据块（也添加一些真正的随机或非随机但可变的数据，例如，`nanotime`如果可以的话） . 对于 AES，两个块将是 32 字节（256 位），顺便说一下，这是几个现代密码散列函数的输出大小。
这使得例如连接 10-20 个伪随机字符（即使来自一个糟糕的生成器）与纳秒时间戳、`SELECT RAND();`来自附近的 SQL 服务器、服务器响应的时间以及浏览器历史记录中的 5 个最后查看的站点成为可能，将所有这些输入 SHA-256，并将输出用作实际上不可预测的初始化向量。
将文件传输给接收方后，对其进行解密，并忽略前 32 个字节。

# forms - Wordpress 重力形式 - 动态人口

> ID：13137191
> 
> 赞同：0
> 
> 时间：2012-10-30T10:35:56.043
> 
> 标签：forms, wordpress, gravity

我的网站上有一个重力表格，如下所示：

```
Activities:
[checkbox] Brand
[checkbox] Retailer
[checkbox] Other

Tags:
[Text input] 
```

I want to dynamically fill the text input with the selected activities, so for example when Brand is selected it places Brand into the text input.

这可能与动态人口？如果是这样，是否有任何教程供我学习？我已经能够找到如何使用页面 URL 动态填充但没有这样的东西，但想象它必须是可能的......</p>

干杯!

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-02-20T12:35:51.020

这可以通过[Gravity Forms Copy Cat](https://gravitywiz.com/documentation/gravity-forms-copy-cat/)实现。这是它的样子：

![示范](../Images/1100934f2cdedbf103b7cc8ff470cf53.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:17:21.317

如果我错了，请纠正我，但我相信重力形式中输入的动态人口必须来自预先确定的信息。您可以编写自定义过滤器以在页面加载时预填充该字段，但该信息必须来自某个地方。它需要已经建立。使用 PHP，当页面加载时，它会在服务器上完全处理，所以我认为您不能观看要单击的复选框，然后仅从 Gravity Forms 过滤器动态填充该字段。我相信您需要实现一些自定义 JS 或 AJAX 来完成此操作。我会和 GF 混在一起，看看我是不是错了，或者能找到另一种方式来做你想做的事。与此同时，也许其他人可以更好地回答这个问题。

# javascript - Javelin - IE 测试

> ID：13137198
> 
> 赞同：2
> 
> 时间：2012-10-30T10:36:09.333
> 
> 标签：javascript, internet-explorer

在[Javelin JS](https://github.com/facebook/javelin/blob/master/pkg/javelin.dev.js) - **line 820**中，我看到了一个奇怪的 IE 测试，如下所示

```
// IE does not enter this loop.
for (var i in {toString: 1}) {
  return;
}

// Do IE specific stuff 
```

有人知道这有多可靠吗？它依赖于一个错误吗？

编辑 - 它什么都不做？

# c# - 如何在 C#.net 中不同机器上的两个独立 winform 应用程序之间传递值

> ID：13137201
> 
> 赞同：1
> 
> 时间：2012-10-30T10:36:24.817
> 
> 标签：c#, .net, winforms, wcf, network-programming

***我有两个用 C# 编码的 winform 应用程序，每个应用程序都在不同的应用程序上。现在我想在它们之间传递值**..*在网站的情况下可以轻松完成，但如何在 winform 应用程序中做到这一点。

**请记住，这些表单不是同一个应用程序的父子表单，而是两个不同应用程序的表单。**

**逻辑**：实际上，我将根据遇到 ID 在 1 台机器上进行一些验证。如果遇到 ID 被验证，那么我想在不同的机器上运行一个 exe（仅用 C# 编程）。（即我计划在第二台机器上发送经过验证的遭遇 ID 并打开带有相关人员详细信息的 exe 与那个经过验证的相遇）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T10:37:28.937

我建议使用 WCF 或 .NET Remoting 等基础技术之一。

# java - Java RMI 服务器和 Objective-C 客户端

> ID：13137207
> 
> 赞同：-1
> 
> 时间：2012-10-30T10:36:56.557
> 
> 标签：java, iphone, objective-c, sockets, rmi

> **可能重复：**
> [Java RMI 服务器和 Objective C 客户端](https://stackoverflow.com/questions/12970505/java-rmi-server-and-objective-c-client)

假设您在 RMI 中有以下内容：

这是远程接口：

```
 import java.rmi.Remote;
    import java.rmi.RemoteException;

    public interface Hello extends Remote 
    {
         String sayHello() throws RemoteException;
    } 
```

这是服务器实现代码：（它实现了接口）

```
 import java.rmi.registry.Registry;
    import java.rmi.registry.LocateRegistry;
    import java.rmi.RemoteException;
    import java.rmi.server.UnicastRemoteObject;
    import java.net.*;
    public class Server implements Hello {
    public Server() {}
    public String sayHello() 
    { 
    return "Hello, world!";    
    }
    public static void main(String args[]) 
    {
    try 
        {
        Server obj = new Server();
        Hello stub = (Hello) UnicastRemoteObject.exportObject(obj, 0);
        // Bind the remote object's stub in the registry
        Registry registry = LocateRegistry.getRegistry();

            registry.bind("HelloServer", stub);
        System.err.println("Server ready");
        } catch (Exception e) 
              {
               System.err.println("Server exception: " + e.toString());
               e.printStackTrace(); 
              }
    }
} 
```

这是客户端代码：

```
 import java.rmi.*;
    import java.rmi.server.*;//////note additional imports
    import java.io.*;
    import java.rmi.registry.LocateRegistry;
    import java.rmi.registry.Registry;
    import java.net.*;

    public class HelloClient2 {
    private HelloClient2() {}
    public static void main(String[] args) {
String host = (args.length < 1) ? null : args[0];
try {/////note this addition
    RMISocketFactory.setSocketFactory(new sun.rmi.transport.proxy.RMIHttpToCGISocketFactory());     
    Registry registry = LocateRegistry.getRegistry(host);
    Hello stub = (Hello) registry.lookup("HelloServer");
    String response = stub.sayHello();
    System.out.println("response: " + response);
    }   catch (Exception e) {
    System.err.println("Client exception: " + e.toString());
    e.printStackTrace();    
    }    
  }
} 
```

现在我想创建一个连接到 rmi 服务器的 Objective-C 客户端。为了能够调用 rmi 服务器上的方法，我在 apache web 服务器上创建了一个代理，它将 RMI 调用嵌入到 HTTP 请求中。

客户端中的行：RMISocketFactory.setSocketFactory(new sun.rmi.transport.proxy.RMIHttpToCGISocketFactory()); 负责 RMI 隧道（在 http 请求中传递 RMI 调用）。所以基本上这一行创建了一个 http post 请求的形式

```
 http://localhost:80/cgi-bin/java-rmi?forward=portnum 
```

其中 portnum 是服务器远程对象的端口（匿名）

这是什么意思？这意味着应该有一个 Web 服务器在 localhost 上的端口 80 上进行侦听。我们有理想的 apache tomcat Web 服务器监听 8080，但我们将其端口更改为 80。

解决了，我们仍然需要处理 url 的其余部分。所以在 tomcat 的 web 应用中，我们创建了一个名为 cgi-bin 的新目录。cgi-bin 有一个 WEB-INF 目录，其中包含一个 classes 目录和一个 web.xml 文件。在 classes 目录中，我们添加了服务器和客户端的编译类以及 servlet 处理程序。servlet 处理程序接收 http post 请求，获取 rmi 调用并将它们转发到 rmi 服务器。

如何让 web 服务器知道他应该调用 servlet 处理程序？在 web.xml 文件中，我们为该 servlet 添加了一个条目，其名称为 ServletHandler（类的名称）和一个 url 映射：/java-rmi。这样本地主机就知道将请求转发到哪里。正如我之前所说，一旦 servlet 处理程序接收到请求，它将处理它并将其发送到 rmi 服务器。

现在我的问题是这些：

```
 Registry registry = LocateRegistry.getRegistry(host);
    Hello stub = (Hello) registry.lookup("HelloServer"); 
```

我根本不知道如何定位注册表并在 Objective-C 中查找以找到远程对象。（存根是远程对象的本地引用）

而且我不认为可以使用代理来完成，代理专门用于处理定向到 rmi 服务器的请求。因此，为了测试 servlet，需要调用某个远程方法，例如在服务器中实现的 sayHello()。与注册表相关的东西不是远程方法调用。

那么我如何在 Objective-C 中处理这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T10:51:45.573

你的老板想要什么并不重要。答案[与您上次发布此问题时相同](https://stackoverflow.com/questions/12970505/java-rmi-server-and-objective-c-client)。这是不可能的。重新发布问题不会改变这一点。

# c++ - 分析算法

> ID：13137211
> 
> 赞同：1
> 
> 时间：2012-10-30T10:37:27.670
> 
> 标签：c++, algorithm, profiling

我需要实现执行时间测量功能。我想过两种可能。

*   首先 - 定期 time() 调用，只需记住每个执行步骤开始的时间和每个执行步骤完成的时间。Unix `time`shell 命令以这种方式工作。

*   第二种方法是抽样。每个执行步骤在执行开始之前设置某种标志（例如 - 在堆栈帧中创建一些对象），并在完成时将其销毁。计时器定期扫描所有标志并生成执行时间配置文件。如果某个执行步骤比其他执行步骤花费更多时间 - 它将被扫描更多次。许多分析器都是这样工作的。

我需要在我的服务器应用程序中添加一些分析功能，什么方法更好，为什么？我认为第二种方法不太准确，第一种方法增加了对分析库代码的依赖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:46:31.627

当 boost 是一个选项时，您可以使用[timer library](http://www.boost.org/doc/libs/1_51_0/libs/timer/doc/index.html "定时器库")。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:53:44.893

在我的分析器中，我使用了您提到的第一种方法的扩展版本。

我有一个提供上下文对象的类。您可以在工作代码中将它们定义为自动对象，一旦执行流离开定义它们的上下文（例如，函数或循环），就会被释放。构造函数调用`GetTickCount`（它是一个Windows项目，你可以选择适合你的目标平台的类似函数）并存储这个值，而析构函数`GetTickCount`再次调用并计算这个时刻和开始之间的差异。每个对象都有唯一的上下文 ID（可以在同一上下文中自动生成为静态对象），因此分析器可以汇总具有相同 ID 的所有时间，这意味着相同的上下文已经传递了多次。还计算执行次数。

这是预处理器的宏，它有助于分析函数：

```
#define _PROFILEFUNC_  static ProfilerLocator locator(__FUNC__); ProfilerObject obj(locator); 
```

当我想分析一个函数时，我只需在函数的开头插入*PROFILEFUNC 。*这会生成一个静态对象`locator`，该对象标识上下文并将其名称存储为函数名称（您可以决定选择其他命名）。然后自动`ProfilerObject`在堆栈上创建并“跟踪”自己的创建和删除，并将其报告给分析器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T10:58:37.397

确保您真的知道您在编写的分析器中要查找的内容，每当您收集某段代码的总执行时间时，它将包括在其所有子代码中花费的时间，这可能很难真正找到系统中的瓶颈是什么，因为最顶层的函数总是会冒出最昂贵的函数——比如 main()。

我的建议是挂钩每个函数的序言和结尾（如果您的应用程序是 CLR 应用程序，您可以[`ICorProfilerInfo::SetEnterLeaveFunctionHooks`](http://msdn.microsoft.com/en-us/library/ms231434.aspx)使用开始和每个函数的代码）并以树的形式为您分析的每个线程收集您的时间。

这个算法看起来和这个有点相似：

*   为您监控的每个线程创建一个类似堆栈的数据结构。
*   每当您收到有关开始执行的函数的通知时，将可以识别该函数的内容推送到该堆栈中。

    *   如果该函数不是堆栈上的唯一函数，那么您知道尚未返回的前一个函数是调用您的函数的函数。
    *   在您最喜欢的数据结构中跟踪那些被调用者调用的关系。
*   每当一个方法返回时，它的标识符将始终位于其线程堆栈的顶部。它的总执行时间等于（最后一个（它的）标识符被压入堆栈的时间 - 当前时间）。弹出堆栈的标识符。

通过这种方式，您将对占用执行时间的内容进行树状细分，您可以在其中查看子调用占函数总执行时间的原因。

玩得开心！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T13:30:51.100

第二种方法本质上是堆栈采样。您可以尝试通过某种进出事件捕获自己来完成，或者如果有一个实用程序来实际读取堆栈会更好。后者的优势在于您可以获得代码行分辨率，而不仅仅是方法级别。

很多人对此并不了解，那就是*时间测量的精度远不如问题识别的精度重要*。

即使在 I/O 或其他阻塞期间进行采样也很重要，因此您不会对不必要的 I/O 视而不见。如果您担心与其他流程的竞争可能会增加时间，请不要担心，因为真正重要的不是绝对时间测量，而是百分比。例如，如果一行代码在堆栈上占挂钟时间的 50%，因此要负责这么多，那么无论发生什么其他事情，删除它都会使应用程序的速度加倍。

分析不仅仅是获取样本。人们通常对他们对他们的所作所为很随意，但这就是钱的所在。首先，包含时间是方法或代码行在堆栈上的时间分数。忘记“自我”时间——它包含在包容性时间中。忘记调用计数 - 它与包含百分比的关系充其量是非常间接的。如果你在总结，最好的方法是有一个“蝴蝶视图”，它的重点是一行代码。它的左右是堆栈样本上紧邻其上方和下方的代码行。每行代码旁边都有一个百分比 - 包含该行代码的堆栈样本的百分比。（不用担心递归。这根本不是问题。）

比任何类型的总结更好的是让用户自己看到堆栈样本的一小部分随机选择。这样，用户就可以全面了解每个快照的使用时间。*保证出现在多个样本*上的任何可避免的活动都有可能实现一些严重的加速。人们经常认为“嗯，这可能只是侥幸，而不是真正的瓶颈”。不是这样。修复它会得到回报，也许是一点点，也许是很多，但平均而言——意义重大。人们不应该被风险厌恶所统治。

[*更多关于这一切。*](https://scicomp.stackexchange.com/a/2719/1262)

# opencv - H264 到 C++ 中的 MP4 文件容器

> ID：13137218
> 
> 赞同：2
> 
> 时间：2012-10-30T10:38:07.360
> 
> 标签：opencv, ffmpeg, h.264, mp4, avi

如何将网络摄像机中的原始 h264 转储为 MP4 或 AVI 文件？我正在从网络摄像机中检索 H264 数据包。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:25:27.907

将原始 H.264 数据保存到文件并将其转换为 mp4：

```
ffmpeg -f h264 -i <input file.264> -vcodec <output file.mp4> 
```

# android - 应用程序在新活动中的后退按钮上停止

> ID：13137230
> 
> 赞同：2
> 
> 时间：2012-10-30T10:38:41.233
> 
> 标签：android, android-activity, back-button

我有这个应用程序，它有一个 listView，当我单击 listView 上的一个项目时，它会打开一个新活动。这很好用！

但是，如果我打开新活动并按下“后退按钮”，则应用程序“不幸的是，已停止”。

有什么我做错了吗？这是我的代码：

第一项活动：

> 公共类 AndroidSQLite 扩展 Activity { private SQLiteAdapter mySQLiteAdapter;
> 
> ```
> @Override
> public void onCreate(Bundle savedInstanceState) {
>   super.onCreate(savedInstanceState);
>     setContentView(R.layout.main);
>     ListView listContent = (ListView)findViewById(R.id.contentlist);
> 
>     mySQLiteAdapter = new SQLiteAdapter(this);
>     mySQLiteAdapter.openToRead();
> 
>     Cursor cursor = mySQLiteAdapter.queueAll();
>     startManagingCursor(cursor);
> 
>     String[] from = new String[]{SQLiteAdapter.KEY_NOME,SQLiteAdapter.KEY_ID};
>     int[] to = new int[]{R.id.text,R.id.id};
> 
>     SimpleCursorAdapter cursorAdapter =
>      new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);
> 
>     listContent.setAdapter(cursorAdapter);
> 
>     listContent.setOnItemClickListener(new OnItemClickListener() {
>         public void onItemClick(AdapterView<?> parent, View view, int position,
>                 long id) {
> 
>           Toast.makeText(getBaseContext(), id + "", Toast.LENGTH_LONG).show();
> 
>           Intent details = new Intent(getApplicationContext(),DetailsPassword.class);
>           startActivity(details);
> 
>         }
>     });
> 
>     mySQLiteAdapter.close();
> } } 
> ```

第二个活动：

> 公共类 DetailsPassword 扩展 Activity {
> 
> ```
> @Override
> public void onCreate(Bundle savedInstanceState) {
>   super.onCreate(savedInstanceState);
> 
>   TextView text = new TextView(getApplicationContext());
>   text.setText("Text to show");
>   setContentView(text);
> } } 
> ```

// ===== 已编辑 =====

这是堆栈轨道

> 10-30 08:55:05.744: E/AndroidRuntime(28046): 致命异常: main 10-30 08:55:05.744: E/AndroidRuntime(28046): java.lang.RuntimeException: 无法恢复活动 {com.example .sqliteexemple2/com.example.sqliteexemple2.AndroidSQLite}: java.lang.IllegalStateException: 试图重新查询一个已经关闭的游标 android.database.sqlite.SQLiteCursor@4180a370 10-30 08:55:05.744: E/AndroidRuntime(28046):在 android.app.ActivityThread.performResumeActivity(ActivityThread.java:2701) 10-30 08:55:05.744: E/AndroidRuntime(28046): 在 android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2729) 10-30 08 :55:05.744: E/AndroidRuntime(28046): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1250) 10-30 08:55:05.744: E/AndroidRuntime(28046): 在 android.os。 Handler.dispatchMessage(Handler.java:99) 10-30 08:55:05.744: E/AndroidRuntime(28046): 在 android.os.Looper.loop(Looper.java:137) 10-30 08:55:05.744: E/AndroidRuntime(28046): 在android.app.ActivityThread.main(ActivityThread.java:4931) 10-30 08:55:05.744: E/AndroidRuntime(28046): 在 java.lang.reflect.Method.invokeNative(Native Method) 10-30 08:55 :05.744: E/AndroidRuntime(28046): at java.lang.reflect.Method.invoke(Method.java:511) 10-30 08:55:05.744: E/AndroidRuntime(28046): at com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791) 10-30 08:55:05.744: E/AndroidRuntime(28046): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558) 10 -30 08:55:05.744: E/AndroidRuntime(28046): at dalvik.system.NativeStart.main(Native Method) 10-30 08:55:05.744: E/AndroidRuntime(28046): Caused by: java.lang.非法状态异常：试图重新查询已经关闭的游标 android.database.sqlite.SQLiteCursor@4180a370 10-30 08:55:05.744: E/AndroidRuntime(28046): at android.app.Activity.performRestart(Activity.java:5051) 10-30 08:55:05.744: E/AndroidRuntime(28046): 在 android.app.Activity.performResume(Activity.java:5074) 10-30 08:55:05.744: E/AndroidRuntime(28046): 在 android.app.ActivityThread .performResumeActivity(ActivityThread.java:2691) 10-30 08:55:05.744: E/AndroidRuntime(28046): ... 10 更多E/AndroidRuntime(28046): 在 android.app.ActivityThread.performResumeActivity(ActivityThread.java:2691) 10-30 08:55:05.744: E/AndroidRuntime(28046): ... 还有 10 个E/AndroidRuntime(28046): 在 android.app.ActivityThread.performResumeActivity(ActivityThread.java:2691) 10-30 08:55:05.744: E/AndroidRuntime(28046): ... 还有 10 个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:59:41.773

您必须覆盖 onKeyUp 方法

```
 @Override
public boolean onKeyUp(int keyCode, KeyEvent event) {

    Intent backintntent= new Intent();
    intententregas.setClass(ThisActiviti.this, MainActivity.class);
            // you can add extra variables 
    // intent.putExtra("variable", Value);
    startActivity(backintntent);
    finish();
    return true;

} 
```

# python - 关联规则中的置信度计算

> ID：13137232
> 
> 赞同：-6
> 
> 时间：2012-10-30T10:38:49.027
> 
> 标签：python, list, associations, tuples

```
supportData = {('ELF'): 0.75, ('CAT'): 0.75, ('BAT', 'CAT', 'ELF'): 0.5, ('ARK',    'BAT'): 0.25, ('ARK', 'ELF'): 0.25, ('CAT', 'ELF'): 0.5, ('DOG'): 0.25, ('BAT', 'CAT'): 0.5, ('BAT', 'ELF'): 0.75, ('ARK'): 0.5, ('ARK', 'CAT'): 0.5, ('BAT'): 0.75}

L = [('ARK'), ('CAT'), ('CAT'), ('ELF'),('ARK', 'CAT'), ('BAT', 'ELF'), ('BAT', 'CAT'), ('CAT', 'ELF'),('BAT', 'CAT', 'ELF')]
for freqSet in L:

    H =  list(freqSet)

    if len(H) == 1:
        pass
    else:
            for conseq in H:
            freqsetlist = list(freqSet)
            freqsetlist.remove(conseq)
            if len(freqsetlist) == 1:
               conf = supportData[freqSet]/supportData[tuple(freqsetlist)[0]]
               if conf >= 0.1:
                  print freqsetlist,'-->',conseq,'conf:',conf
            else:
               conf = supportData[freqSet]/supportData[tuple(freqsetlist)[:]]
               if conf >= 0.1:
                  print freqsetlist,'-->',conseq,'conf:',conf

Output

KeyError: ('R','K') 
```

有人能指出我为什么会收到这个错误吗？当 len(freqsetlist) > 1 时似乎会发生错误。那是在计算具有 3 个元素的元组时

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T10:40:30.400

那是对象的表示，如果您想要不同的表示，则必须自己构造它：

```
>>> k = ['van']
>>> "({})".format(", ".join(k))
'(van)' 
```

请注意，这意味着您正在使用 Python 的对象表示作为程序的一部分，这是一个坏主意，您应该始终手动构建所需的内容，而不是尝试使用 Python 的表示，因为它是用于调试的。

编辑：逗号是 Python 表示它是一个元组的方式，因为括号表示操作的分组而不是默认的元组。您可以创建自己的元组子类并更改`__repr__()`/`__str__()`如果您真的想要，但这将是非常没有意义的（并且在`__repr__()`它应该评估为对象的情况下是非pythonic）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:00:05.773

```
 supportData = {('nas','fat'): 0.5, ('nas'): 1.0, ('fat'):0.6, ('van'):0.72, ('jos'):0.55,('van','jos'):0.10}

  itemSets = [('nas','fat'),('van','jos')]

  for freqSet in itemSets: H = [''.join(list(item)) for item in freqSet]

  for conseq in H:

    freqsetlist = list(freqSet)
    freqsetlist.remove(conseq)
    conf = supportData[freqSet]/supportData[tuple(freqsetlist)[0]] 
```

# java - JVM 连接不足导致 CPU 使用率过高和 OutOfMemoryException

> ID：13137234
> 
> 赞同：0
> 
> 时间：2012-10-30T10:38:54.620
> 
> 标签：java, multithreading, drools, drools-guvnor

我们有一台 64 位的 linux 机器，我们与其他服务建立多个 HTTP 连接，Drools Guvnor 网站（如果你不知道，规则引擎）就是其中之一。在 drools 中，我们为每个被触发的规则创建知识库，并且知识库的创建与 Guvnor 网站建立 HTTP 连接。

所有其他线程都被阻塞，CPU 利用率上升到 ~100%，导致 OOM。我们可以在 15-20 分钟后进行更改以编译规则。但如果有人已经面临这个问题，我想确定这个问题。

我检查了`"cat /proc/sys/kernel/threads-max"`它显示27000个线程，这是一个原因吗？

我有几个问题：

1.  我们什么时候知道我们的容量已经超出了？
2.  可以在内部产生多少线程（任何粗略估计或与差异参数相关的公式都可以）？
3.  有没有其他人看到过 Drools 的类似问题？并发访问 Guvnor 网站基本上是导致问题的原因。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:42:36.847

我的回答是基于您正在为每个请求创建一个知识库的假设，并且这个知识库创建包括从 Guvnor 下载最新的规则源，如果我弄错了，请更正。

我怀疑包的构建/编译需要时间并且占用你的系统。

您可以从 guvnor 下载预构建包，而不是在每个请求上编译包，如果您的规则没有太大变化，您也可以在本地缓存这些包。唯一的限制是您需要在 guvnor 和您的应用程序中使用相同版本的 drools。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:55:22.453

> 我检查了“cat /proc/sys/kernel/threads-max”，它显示了 27000 个线程，这是一个原因吗？

这个数字看起来确实很大，但我们不知道这些线程中的大多数是否属于您的 java 应用程序。创建一个 java 线程转储来确认这一点。您的线程转储还将显示每个线程占用的 CPU 时间。

> 我们什么时候知道我们的容量已经超出了？

您有 100% 的 CPU 和 OOM 错误。你已经超负荷了 :) 开个玩笑，你应该监控你的 HTTP 连接队列以确定你做错了什么。您的帖子没有说明您如何处理 HTTP 连接（大概是通过某种由队列支持的池化机制？）。我已经看到容器和程序无限地排队请求，导致它们突然崩溃。绘制以下图表以隔离您的问题

1.  一段时间内的阻塞线程数
2.  每个线程花费的时间
3.  每个线程池的线程数以及它们如何随时间增加/减少（池大小）

> 可以在内部产生多少线程（任何粗略估计或与差异参数相关的公式都可以）？

只有负载测试才能回答这个问题。加载您的服务器并确定它在 60-70% 容量下可以支持的并发用户数。请注意此时在内部产生的线程数。那是您的峰值容量（为意外流量留出空间）

> 有没有其他人看到过 Drools 的类似问题？并发访问 Guvnor 网站基本上是导致问题的原因

我无法帮助那里，因为我没有以这种方式访问​​流口水。对不起。

# mysql - 如何将德国日期转换为 MySQL 标准日期？

> ID：13137236
> 
> 赞同：3
> 
> 时间：2012-10-30T10:38:56.677
> 
> 标签：mysql, date

我正在将带有点德国日期的 CSV 文件导入 MySQL 数据库。我希望 CSV 中的日期自动正确格式化为 MySQL 使用的正确数据类型字段。

我正在使用 Sequel Pro 进行导入。我认为我应该使用该`STR_TO_DATE`函数，但我无法理解如何在程序中使用 Add Value 或 Expression。

**德国日期**

以下是 CSV 文件中的日期：

> DD.MM.YYYY 例如：28.01.1978

**MySQL 日期**

这是我想在数据库中得到的结果：

```
YYYY-MM-DD
e.g.: 1978-01-28 
```

**这是我尝试过的**

我`STR_TO_DATE('$5', '%d.%m.%Y');`输入了添加值或表达式，但这只会给出以下错误消息：

> [ERROR in row 1] 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 '06.04.1997''、'%d.%m 附近使用的正确语法。%Y');,'2KMX','43354997')' 在第 2 行

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T10:46:02.730

您需要先在 varchar 字段 (temp_varchar_field) 中导入日期字段，之后，您可以使用以下内容：

```
update table_name set final_date=STR_TO_DATE(temp_varchar_field,'%d.%m.%Y'); 
```

您应该执行以下操作：

1.  创建一个临时字段：`alter table table_name add column temp_varchar_field varchar(10);`
2.  使用 Sequel Pro 导入 CVS 文件，但使用 temp_varchar_field 作为日期。
3.  `update table_name set final_date=STR_TO_DATE(temp_varchar_field,'%d.%m.%Y');`
4.  如果所有内容都正确导入，请删除 temp 字段。使用：`alter table_name drop column temp_varchar_field;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T12:20:23.827

我刚刚让它与这段 SQL 代码一起工作：

```
load data local infile 'myfile.csv' into table `mytable` 
fields terminated by ','
enclosed by '"'
lines terminated by '\n'
(surname, name, @germandate, telephone, etc)
set birthyear = STR_TO_DATE(@germandate , "%d.%m.%Y")
; 
```

这里的线索`@germandate`是通过将相应列设置为`STR_TO_DATE()`. 无需黑客！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T10:50:37.017

如果您的 CSV 导入将包含一个日期作为 MySQL 字符串会更容易，但也可以这样做：

第 1 步：为您的德国日期定义一个 varchar(10) 并导入数据。

第 2 步：向表中添加另一个字段：

```
ALTER TABLE `yourtable` 
ADD COLUMN `your_mysql_date` DATE NULL; 
```

第 3 步：移动数据：

```
UPDATE yourtable
SET your_mysql_date = CONCAT(
    RIGHT(your_german_date,4),
    '-',
    MID(your_german_date,4,2),
    '-',
    LEFT(your_german_date,2)
); 
```

...完毕！

可能有一种更简单的方法可以解决这个问题，但是这样您就可以对数据和格式进行大量控制。

# google-apps-script - 是否可以在上传的 pdf 或 google doc 中搜索关键字？

> ID：13137240
> 
> 赞同：0
> 
> 时间：2012-10-30T10:39:09.043
> 
> 标签：google-apps-script

情况如下：

我的驱动器文档列表中有一个 pdf 和 google 文档。我想构建一个界面，可以在这些文档中搜索关键字并返回文档名称以及与搜索参数匹配的文本的可能预览。这是可能的还是可能的一些变化？

问候，

肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-29T05:30:27.443

从 Google Doc 获取文本很简单：

```
// Get text from GDOC  
var gdocDoc = DocumentApp.openById(gdocFile.id);
var text = gdocDoc.getBody().getText(); 
```

[Get pdf-attachments from Gmail as text](https://stackoverflow.com/questions/26613809/getting-certain-pdf-attachments-from-my-gmail-as-text/26623198#26623198)中的 pdfToText() 实用程序使用高级 Drive 服务和 DocumentApp 将 PDF 转换为 Google-Doc 到文本。您可以通过这种方式获取 OCR 文本，或将其直接保存到云端硬盘上任何文件夹中的 txt 文件中。

```
// Start with a Blob object
var blob = DriveApp.getFilesByName("my.pdf")[0];

// filetext will contain text from pdf file, no residual files are saved:
var filetext = pdfToText( blob, {keepTextfile: false} ); 
```

获得文本后，搜索关键字变得非常容易！

```
if (filetext.indexOf( keyword ) !== -1) {
  // Found keyword...
} 
```

# c++ - y=x++ 中有多少个原始步骤？

> ID：13137243
> 
> 赞同：5
> 
> 时间：2012-10-30T10:39:15.540
> 
> 标签：c++, c, post-increment

```
y=x++; 
```

它在编译器级别中断了多少步而不在 CPU 级别或指令上进行优化？是否创建了任何临时以将 x 分配给 y 或者直接发生？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-30T10:44:19.147

C++ 遵循 as-if 原则，所以答案确实是“n”步。

*   它可能是**2** : 1) 分配`x`给`y`. 2) 增量`x`。
*   如果从不使用它可能是**1**`y`
*   它可能是**未定义的行为**，`y`被声明为`int& y = x;`
*   最终产生相同结果的可能是**100 次分配和重新分配。**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-30T10:41:01.653

1.  一个临时变量是用值创建的`== x`
2.  `x`递增
3.  （保留在该临时变量中）的旧值`x`分配给`y`

这些将是基本步骤。

取决于你所说的“原始”是什么意思——如果你指的是 CPU 指令，那么答案会有所不同。

您可能想阅读有关后缀和前缀递增/递减运算符的更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T10:40:41.480

这取决于您编译此代码的架构。

C++ 没有指定这些内容，甚至没有指定可能的“原始步骤”是什么。

[对于古老的M68000 CPU](http://en.wikipedia.org/wiki/Motorola_68000) ，一个可能的答案可能是：

```
move.l x, d0
addq.l #1, x
move.l d0, y 
```

因此，这使用了三个指令（原始步骤）和一个临时的寄存器形式`d0`。

注意：自从我编写 M68k 程序集以来已经有一段时间了，我确实希望上面的代码是有效的，但目前似乎在到达相关参考页面时遇到了问题。作为一个例子，我很确定它是有效的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-30T11:09:07.133

取决于原始步骤是什么意思，如果原始步骤是 CPU 指令，我做了如下快速测试：

（linux 环境，g++ 4.6.3）使用 g++ -S main.cpp 显示 g++ 生成了哪些 CPU 指令，我得到以下输出：

```
movl -8(%ebp), %eax<br>
movl %eax, -4(%ebp)<br>
addl $1, -8(%ebp) 
```

这意味着 g++ 会将 y 复制到 x，然后增加 x。在这种情况下，会生成 3 个 CPU 指令（如果您将它们视为原始步骤）。

请注意，不同的编译器优化级别和不同的 CPU 架构，结果会有所不同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T10:43:23.377

请参阅[运算符优先级表](http://en.cppreference.com/w/cpp/language/operator_precedence)

步骤如下：

*   一个临时变量被分配了`x`' 值。

*   `x`递增 1。

*   `y`分配有临时变量值。

因此，抽象级别的 3 个原始步骤。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T10:44:08.673

*   为 x 的地址分配寄存器
*   x的加载地址
*   为 x 分配临时寄存器
*   取消引用 x
*   为 y 分配寄存器
*   分配 y<=x
*   增加 x
*   写回 x
*   为 y 的地址分配临时寄存器
*   y的加载地址
*   商店 y

然后经过很多优化阶段后，它可能会使用两条指令进行处理：

```
add r0, r1, #0
add r1, r1, #1 
```

感谢您的评论——无论如何，我的观点是编译器可能需要执行一些步骤来读取变量。（它是全局的还是在本地堆栈帧中，或者它是否具有链接器文件给出的绝对地址......）

编辑：当然这不是故事的结局：x 和 y 是什么类型的变量？它们是否比机器寄存器宽度长？它们是否更短并且需要零或符号扩展？也许它们是浮点数或双精度数，需要调用外部库...

# jquery - jquery选项卡 - 中继器项目命令未触发

> ID：13137244
> 
> 赞同：0
> 
> 时间：2012-10-30T10:39:20.167
> 
> 标签：jquery, asp.net, events, tabs, repeater

我正在使用 jquery 选项卡，并且在我的页面上有几个选项卡...在其中一个页面上添加了转发器和绑定等工作正常，因为它正在加载。

但是当我尝试绑定转发器的 Itemcommand 事件时，它不会触发，并且我在 firebug 中收到此错误：

```
Timestamp: 30/10/2012 10:37:35
Error: TypeError: theForm.__EVENTTARGET is undefined
Source File: http://localhost:53351/Default.aspx
Line: 8 
```

第 8 行是我对 jquery 的引用：

`<script src="Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>`

如果我删除它显然没有选项卡，我会被重定向到没有选项卡的原始页面，并且事件运行正常。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:33:10.343

发现问题是由于在 Jquery 选项卡上禁用了回发。

# sql - 表中的列的类型不能用作索引中的键列

> ID：13137246
> 
> 赞同：15
> 
> 时间：2012-10-30T10:39:27.127
> 
> 标签：sql, sql-server, sql-server-2008

我有一张存储员工详细信息的表格。我想更改表并将其中一列设置`emp_code`为主键。它的数据类型是`nvarchar(max)`，但我无法将其设置为主键。

我运行以下查询：

```
ALTER TABLE user_master
ADD PRIMARY KEY (emp_code) 
```

但它给了我一个错误：

> *消息 1919，级别 16，状态 1，行 1**表中的*
> *列的类型不能用作索引中的键列。`emp_code``user_master`*
> *消息 1750，级别 16，状态 0，行 1*
> *无法创建约束。请参阅以前的错误。*

我该如何克服呢？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-30T10:41:24.770

索引的键总大小不能超过 900 字节。将数据类型更改为`NVARCHAR(450)`. 如果这不合适，请使用代理键（通常是一`IDENTITY`列）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T10:42:48.740

你不能使用`varchar(max)`. 它不是为存储主键而设计的。

找出最长的员工代码，并创建一个大小合适的 nvarchar 来覆盖您的最长案例。

例如最长的员工代码是 70 个字符，请尝试：-

```
nvarchar(100) 
```

...只是为了掩饰自己。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-20T09:37:54.470

是的，你是对的。警告！最大密钥长度为 900 字节。索引`PK__bookmark__2DFA2B0E164452B1`的最大长度为 2000 字节。对于较大值的某些组合，插入/更新操作将失败。不使用`varchar(max)`

# android - 如何在列表首选项选项中传递时间间隔

> ID：13137255
> 
> 赞同：1
> 
> 时间：2012-10-30T10:40:04.947
> 
> 标签：android, handler, android-preferences

```
<ListPreference
 android:entries="@array/listOptions2"
 android:entryValues="@array/listValues2"
 android:key="listprefrefresh"
 android:summary="Set refresh the Application"
 android:title="Set Time Interval" /> 
```

```
 <item>10 </item>
    <item>30</item>

</integer-array>
<integer-array name="listValues2">
    <item>10000</item>
    <item>30000</item>
</integer-array> 
```

这是我想要通过时间的代码我现在如何实现？我正在传递整数值。请告诉我

```
public static final String PREF_BEER_SIZE2 = "listprefrefresh";
        Preference beerPref2 = (Preference) findPreference(PREF_BEER_SIZE2);
    beerPref2
                    .setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {

                        public boolean onPreferenceChange(Preference preference,
                                Object newValue) {
                            // TODO Auto-generated method stub

                            final ListPreference listrefresh = (ListPreference) preference;
                            final int idx = listrefresh
                                    .findIndexOfValue((String) newValue);

                            if (idx == 0 ) {
                                handler.post(timedTask);

                                //

                            } else if (idx == 1) {
                                // System.out.println("2");

                            } 
                            return true;
                        }
                    }); 
```

# android - Android 取景器和画廊

> ID：13137256
> 
> 赞同：1
> 
> 时间：2012-10-30T10:40:06.710
> 
> 标签：android, android-view, android-gallery

我正在尝试开发一个应用程序，其中包含一个带有视图翻转器的画廊。

图库显示所有图像。我想要做的是，视图翻转器中显示的图像应该在图库中突出显示。

目前我可以在 onClick 上突出显示它。但无法在两者之间进行通信。

我尝试使用以下方法

```
viewflipper.getDisplayedChild(); 
```

但它不起作用。

以下是我的代码

```
public class SliderActivity extends Activity 
{
int mFlipping = 0 ;
public int currentimageindex=0;
Timer timer;
TimerTask task;
ImageView slidingimage;
android.widget.ViewFlipper flipper;
Gallery gallery;

private int[] IMAGE_IDS = 
{
    R.drawable.android0, R.drawable.android1,           R.drawable.android2,R.drawable.android3,R.drawable.android4
};

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mygame);
    flipper = (android.widget.ViewFlipper) findViewById(R.id.flipper1);

    for(int i=0;i<IMAGE_IDS.length;i++)
    {
    //  This will create dynamic image view and add them to ViewFlipper
        ImageView image = new ImageView(getApplicationContext());
        image.setBackgroundResource(IMAGE_IDS[i]);
        flipper.addView(image);
    }

    gallery=(Gallery)findViewById(R.id.gallery1);
    gallery.setAdapter(new ImageAdapter(this));

    if(mFlipping==0){
        /** Start Flipping */
        flipper.startFlipping();
        mFlipping=1;
        //mButton.setText(R.string.str_btn_stop);
    }
    else{
        /** Stop Flipping */
        flipper.stopFlipping();     
        mFlipping=0;
    //  mButton.setText(R.string.str_btn_start);
    }

}

public class ImageAdapter extends BaseAdapter 
{
       int mGalleryItemBackground;
       private Context mContext;

       public ImageAdapter(Context c) 
       {
           mContext = c;
           TypedArray a = obtainStyledAttributes(R.styleable.Theme);
           mGalleryItemBackground = a.getResourceId(
             R.styleable.Theme_android_galleryItemBackground,0);
           a.recycle();
       }

       public int getCount() 
       {
           return IMAGE_IDS.length;
       }

       public Object getItem(int position) 
       {

           return position;
       }

       public long getItemId(int position) 
       {
           return position;

       }

       public View getView(int position,View convertView, ViewGroup parent) 
       {
           ImageView i = new ImageView(mContext);
           i.setImageResource(IMAGE_IDS[position]);
           i.setLayoutParams(new Gallery.LayoutParams(150, 100));
           i.setScaleType(ImageView.ScaleType.FIT_XY);
           i.setBackgroundResource(mGalleryItemBackground);

           return i;
       }
    }

public void onClick(View v) {

    finish();
    android.os.Process.killProcess(android.os.Process.myPid());
  } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:45:54.200

如果我理解您的问题...我认为您需要使用 setOnItemSelectedListener ...

```
gallery.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> adapter, View gallery,
                int position, long arg3) {          

            myPosition = position;
                           //tell your flipper something useful here using the current position of the gallery

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    }); 
```

并在 onItemSelected 回调中与您的脚蹼交谈。

# sql - Oracle SQL Developer 如何动态运行 sql 脚本

> ID：13137258
> 
> 赞同：1
> 
> 时间：2012-10-30T10:40:09.210
> 
> 标签：sql, oracle, batch-file, oracle-sqldeveloper

我有以下挑战；

我想在一个数据库上执行一批 *.sql 文件。假定 sql 文件按其执行顺序的升序命名。所以主 sql 脚本应该执行 'dir /s *.sql'，然后按顺序启动每个找到的脚本。

这可能吗 ？

下面是我为 SQL Server 找到的东西，但我想要为 Oracle SQL Developer 提供类似的东西。

[http://pradeep1210.wordpress.com/2012/03/15/executing-a-set-of-sql-script-files-sql-on-a-group-of-sql-server-databases/](http://pradeep1210.wordpress.com/2012/03/15/executing-a-set-of-sql-script-files-sql-on-a-group-of-sql-server-databases/)

提前致谢。

雷蒙德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:08:19.387

1.  为例如创建一个文件夹：`Batch_Files`在您的本地计算机中，它将包含您要执行的所有 sql 脚本，
2.  然后打开你。在你的 Batch_Files 文件夹中`sql developer`创建一个文件`batch.sql`。
3.  `Batch.sql`依次添加要执行的sql文件。

    @file1.sql

    @file2.sql：

    ：

    @fileN.sql

这些文件包含您需要按顺序运行的代码。这是一个非常基本的示例。您可以根据需要进行各种更改，您可以添加匿名块以在执行文件后打印一些内容。我没有测试过这个是`SQL-DEVELOPER`，但我认为这肯定对你有用。

# javascript - 将“返回”按钮添加到 jQuery 幻灯片

> ID：13137260
> 
> 赞同：0
> 
> 时间：2012-10-30T10:40:23.803
> 
> 标签：javascript, jquery, css, slideshow

我最近改编了一个 jQuery 幻灯片，我对它感到 99.2% 的满意 - 哦，是的 :)

我只是想知道，**添加一个“返回”按钮返回上一张幻灯片有多容易**？

**演示：http:** [//jsfiddle.net/Qu3NK/13/](http://jsfiddle.net/Qu3NK/13/)

例如，当幻灯片加载时，我想单击短语“文本”，然后单击“返回”以返回上一张幻灯片（上面有“文本”的幻灯片）。

有人可以解释我是如何实现这一目标的吗？

我目前正在通过在我的 JS 中使用它来导航到另一个“幻灯片”： `"firstline" : "<div class=\"navigator\" id=\"navigator-2\">Text</div>",`

**它甚至不必“返回”-只要单击“返回”导航到 1 个特定图像，就可以了 :)**

非常感谢您对此的任何指示:)

# android - 有关 Android 版 YouTube API 何时发布的消息？

> ID：13137265
> 
> 赞同：3
> 
> 时间：2012-10-30T10:40:47.580
> 
> 标签：android, youtube-api

[http://www.i-programmer.info/news/193-android/4479-youtube-android-player-api.html](http://www.i-programmer.info/news/193-android/4479-youtube-android-player-api.html) 在 G i/o 大会上有一堆类似上面的文章。但从那以后……无线电静默。有没有人知道这个 API 什么时候投入生产？

非常感谢所有相关新闻/链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:33:14.587

目前还没有正式的日期，但我可以告诉你，团队一直在努力工作，我们希望尽快推出。

更新：

API发布（实验版）：

[https://developers.google.com/youtube/android/player/](https://developers.google.com/youtube/android/player/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:47:54.147

我不知道它什么时候发布，但他们的开源 google i/o 应用程序中有一些代码。

[http://code.google.com/p/iosched/](http://code.google.com/p/iosched/)

这里例如：

[http://code.google.com/p/iosched/source/browse/#git%2Fandroid%2Fsrc%2Fcom%2Fgoogle%2Fandroid%2Fyoutube%2Fapi%253Fstate%253Dclose](http://code.google.com/p/iosched/source/browse/#git%2Fandroid%2Fsrc%2Fcom%2Fgoogle%2Fandroid%2Fyoutube%2Fapi%253Fstate%253Dclosed)

以及应该使用它的活动：

[http://code.google.com/p/iosched/source/browse/android/src/com/google/android/apps/iosched/ui/SessionLivestreamActivity.java](http://code.google.com/p/iosched/source/browse/android/src/com/google/android/apps/iosched/ui/SessionLivestreamActivity.java)

# java - 我们是否必须关闭 FileInput/OutputStream 才能删除文件？

> ID：13137271
> 
> 赞同：0
> 
> 时间：2012-10-30T10:41:12.243
> 
> 标签：java, file-io

在我正在处理的应用程序中，我们必须处理临时文件。由于常见的编程错误，文件可能无法正确处理（直到我们注意到并修复它！）。我想编写一个简单的模块来垃圾收集文件。

我想知道我是否可以随时删除这些文件，无论上面是否有打开的流。

我尝试了它（vm 1.6，linux）并且它可以工作，但是由于我找不到规范，所以我犹豫要实施它。

*注 1：我们谈论的是单进程应用程序。*

*注意 2：我主要对 inputStream 感兴趣，如果它有所作为的话。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:33:24.577

AFAIK，在 Linux 上你可以，在 Windows 上你不能

正如@EJP 指出的那样，您可以让自己陷入无休止的混乱之中。如果您要解决一个错误，那么只有在您*真的别无选择*时才这样做 我所看到的解决方法之一是，您不仅会弄得一团糟，而且还会使以后修复错误变得更加困难。在不止一次的情况下，我看到了对代码破坏的解决方法导致程序中断的解决方法。

# customization - Alfresco 共享自定义限制

> ID：13137272
> 
> 赞同：1
> 
> 时间：2012-10-30T10:41:13.803
> 
> 标签：customization, share, alfresco

我们为我们的项目选择了 Alfresco，因为 Alfresco 满足了我们需要的大部分功能要求。

Share 是一个很棒的应用程序，但是它对我们的场景来说有太多的功能，远远超过我们在项目中需要的功能。这就是发布这个问题的原因，我们不知道什么是最好的选择：要么自定义 Share 创建自定义页面、自定义仪表板、自定义操作和元数据等，要么创建一个与存储库交互的新 Web 应用程序。

大致来说，我们有这些要求：

*   带有自定义菜单的自定义标题，禁用对存储库的直接访问（用户只能使用站点进行协作）
*   包含的自定义仪表板
    1.  在左侧，站点列表
    2.  在中心，自定义仪表板以不同的方式和格式显示多个内容
    3.  [正如我在上一个问题](https://stackoverflow.com/questions/12973535/dynamic-dashlet-in-alfresco-share)中解释的那样，其中一个仪表板将是“动态”仪表板
*   自定义文档详细信息页面，包含自定义操作和自定义元数据

我想了解基于经验的意见，解释何时以及为什么创建与 Alfresco 存储库交互的新 Web 应用程序或何时根据您的需要自定义 Share 是个好主意。**我对了解共享自定义限制非常感兴趣**。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T21:08:38.147

Alfresco Share 没有任何限制，它已经是基于存储库构建的 UI。

我已经看到了共享修改直到天空，一个人甚至看不到它的共享了。

您上面描述的内容只是模板化和构建正确的 freemarker 模板/js 来查看信息。

如果您仔细查看默认模板及其区域并在默认区域周围移动，您会发现您不需要大量自定义来实现不同的布局。

唯一可能缺少的就是分享的经验。

# python - 我如何编写一个跨平台的python程序来处理键盘事件和彩色终端输入/输出

> ID：13137273
> 
> 赞同：2
> 
> 时间：2012-10-30T10:41:17.730
> 
> 标签：python, eval, curses

我正在尝试编写一个能够在控制台窗口中显示彩色文本并根据某些组合键进行操作的游戏。

这个想法是制作一款游戏，帮助教授用户 vim，重点是优化 python 开发。这个想法是有一个上升的文本墙，包含没有正确排列的pythonic汤。当每一行到达屏幕顶部时，它就会被解释。用户必须使用光标滚动文本并使用某些 vim 命令模式组合（但没有插入模式）来尝试以将其排列成正确的 python 命令和语法的方式来操作文本以实现某些目标，同时随着文本的上升与时间赛跑。

我认为 python 将是最容易编写代码的语言，因为我可以只`eval`解释需要解释的每一行，尽管如果这样更容易的话，我愿意使用另一种语言和嵌入式 python。

就我在 python 中的选择而言，这是我所考虑的：

*   诅咒。

    这对我来说是最直观的。我确信我可以创建我正在寻找的东西，但需要注意的是它只能在 Linux 环境中运行。

    理想情况下，我希望 Windows 用户也能够运行游戏，虽然这对于正确设置 Linux 模拟器的 Windows 用户来说是可能的，但这比我想要的要多一些开销。如果 Windows 用户有一种简单的方法来运行程序，不需要他们对 Linux 了解太多并且可以轻松安装，这将是我理想的方法，但是各种方法（VMWare、cygwin 和 colinux ) 似乎不满足这个标准。

*   为 Linux 和 Windows 开发这个。

    这似乎比必要的工作要多，尽管一旦我使用 Curses 开发了它，也许将它移植到 Windows 中类似的东西不会太难。

*   游戏。

    据我了解，这是跨平台的，可以做我需要做的一切。但是，我必须做更多的工作才能让我的程序处理文本和用户输入、文本滚动等。我不打算使用 Pygame 的任何图形功能，所以这似乎也是太多的工作/边界是不可能的。

*   另一种语言？

    也许除了调用“eval”命令外，我可以嵌入 Python，同时使用另一种更适合这些目标的语言。我在 C 和 C++ 方面的背景最强，而且我是一个非常生疏的 Java 新手。我也熟悉 Javascript，并且一直在寻找机会了解更多信息。Javascript 在可移植性方面是小菜一碟，但据我了解，用 JS/HTML5 开发这种游戏将是一场噩梦。也许我不太熟悉的其他东西会更好？

# node.js - fs.exists 方法在 node.js 中不再存在

> ID：13137277
> 
> 赞同：5
> 
> 时间：2012-10-30T10:41:36.360
> 
> 标签：node.js

我使用节点 v0.6.12

这是我的代码：

```
var fs = require("fs");

fs.exists(".", function() {
    console.log("Whatever);
}); 
```

我得到这个输出：

```
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
TypeError: Object #<Object> has no method 'exists'
    at Object.<anonymous> (/home/dbugger/Projects/nodetest/test.js:3:4)
    at Module._compile (module.js:441:26)
    at Object..js (module.js:459:10)
    at Module.load (module.js:348:32)
    at Function._load (module.js:308:12)
    at Array.0 (module.js:479:10)
    at EventEmitter._tickCallback (node.js:192:41) 
```

“存在”是否已被弃用？那我能用什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T12:00:09.727

您可以使用`path.exists()`，但在最新版本的节点中已弃用。这些天首选的 api 是`fs.exists()`，所以你需要准备在某个时候切换。

```
$ node --version
v0.8.3

$ node
> require('fs').exists
[Function]
> require('path').exists
[Function: deprecated] 
```

相关文档：

*   [http://nodejs.org/docs/v0.6.12/api/all.html](http://nodejs.org/docs/v0.6.12/api/all.html)
*   [http://nodejs.org/api/all.html](http://nodejs.org/api/all.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T10:53:23.477

你的节点版本是多少？我在我的机器上得到了相同的结果（v0.6.14）。我认为该`exists()`方法最近已从`path`模块移至`fs`模块。尝试`path.exists()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T11:08:57.193

好的，升级到最新版本的节点（0.8.12）解决了这个问题。谢谢 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-06T07:13:34.620

我在 Raspberry Pi 中也遇到了同样的问题。因为如果我们只是跑

```
 sudo apt-get install nodejs npm 
```

这不会安装最新版本的 NodeJs。为了安装最新版本的 NodeJs 运行这个命令

```
 # Note the new setup script name for Node.js v0.10
  curl -sL https://deb.nodesource.com/setup_0.10 | sudo bash -

  # Then install with:
  sudo apt-get install -y nodejs 
```

不要尝试在 Raspberry Pi 上安装 Node.js v0.12。还有一个未解决的问题（[https://raspberrypi.stackexchange.com/questions/24059/node-js-v0-11-14-exits-with-illegal-instruction](https://raspberrypi.stackexchange.com/questions/24059/node-js-v0-11-14-exits-with-illegal-instruction)）

如果上述方法不起作用，请按照这个 [https://learn.adafruit.com/node-embedded-development/installing-node-dot-js](https://learn.adafruit.com/node-embedded-development/installing-node-dot-js)

# javascript - 如何从 noSql 数据库呈现示例源代码？

> ID：13137279
> 
> 赞同：0
> 
> 时间：2012-10-30T10:41:51.477
> 
> 标签：javascript, json, mongodb, backbone.js, syntax-highlighting

我已经用谷歌搜索了这个负载，并且确信我缺少一种明显的方式，但是..有人知道如何处理保存在 noSql 数据库中的示例源代码吗？

我正在编写一个 javaScript 博客站点，并希望显示从主干模板呈现的示例代码，这些模板的模型是从 mongoDB 数据库中填充的。

大多数谷歌结果都提供了各种语法高亮插件，但是我将如何格式化代码以保留缩进等，因为代码在 JSON 对象中是平坦的。

我在想桌子可能是关键，但我不确定我是否在这里重新发明轮子。

与往常一样，我们将不胜感激任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:26:16.260

那么你需要一些东西来访问数据库并将其返回给backbone.js客户端。

如果您更喜欢 javascript ，可以使用带有[MongoDB 驱动程序的](https://github.com/mongodb/node-mongodb-native)[Node.JS](http://nodejs.org/)服务器。

您可能想尝试一些 node.js 包，例如 Express 和 Mongoose。

如果这是一个小项目，只是为了了解一切是如何工作的，没关系。否则，您可能需要考虑如何通过backbone.js 仅显示博客文本，并将视图与数据分开。因此，如果您想更改博客的 CSS 或样式，则无需更新（mongo 上的每个博客文章文档）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:50:16.160

MongoDB 中的字符串可以存储任何特殊字符，例如换行符、制表符或多个空格。当您将某些程序源代码作为字符串存储在文档中时，检索文档时它应该看起来相同。

# jquery - 选择多个提交问题 - 如果未选择，则 POST 为空

> ID：13137280
> 
> 赞同：2
> 
> 时间：2012-10-30T10:41:52.737
> 
> 标签：jquery, html, forms, post, select

我有一个多项选择，如下所示。

![在此处输入图像描述](../Images/ef4ac9d15cc1925ca95181c06769ab38.png)

它允许我选择如下选项。假设选择了 3 项运动。

![在此处输入图像描述](../Images/6cc8db5fa9aa5cc6fe4ddd73d5fec5eb.png)

当项目被选中时，如上所示，表单提交成功。

但不幸的是，如果在提交表单时没有像下面那样选择运动，则帖子为空。

![在此处输入图像描述](../Images/33828e43bf12f43dc134d9bb33338f39.png)

选择框

```
<select style="width: 100px; height: 80px;" class="input" id="selected_sport_list" name="selected_sport_list[]" multiple="">
<option value="2">sport 2</option>
<option value="3">sport 3</option>
<option value="5">sport test x</option></select> 
```

如何确保在提交表单时选择了特定项目？是否可以使用 jquery 来解决这个问题？或如何？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T10:53:00.217

这里的问题是浏览器不会提交来自每个选择框的值，除非用户首先“选中”它们。这是标准行为，您必须使用 JavaScript 解决问题。

您需要做的是确保在提交表单时，HTTP 请求包含每个选择框内的值。您可以通过两种方式做到这一点：

1.  手动构造部分提交的数据并将其转发到服务器——例如，通过将其作为查询字符串的一部分包含在内或将填充的数据对象传递给某些 jQuery AJAX 方法，或者
2.  动态向表单添加/删除隐藏的输入元素以匹配选择框状态，以便在提交表单时这些输入元素包含所需的信息（在这种情况下，您应该小心覆盖用户选择某些选项的*情况*太；你不想重复输入！）

第一个选项涉及拦截表单提交并通过 JavaScript 提交您自己修改的请求。

第二个选项涉及向表单添加和删除元素，可以立即实现（拦截选择框之间的元素传输并立即使用隐藏元素镜像状态）或惰性实现（拦截表单提交并将隐藏元素注入飞）。

由于此时我们手头没有所有信息，因此您应该尝试从上面选择一种方法并提供您编写的一些相关代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:52:14.890

HTML

```
<form onsubmit="return testSelects();"></form> 
```

JS

```
function testSelects() {
    if ( $('select').children(":selected").length == 0) {
       alert("Please select options before submiting the form!");
       return false;
    }

    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T10:59:18.983

是的，你可以这样做：使用

```
jQuery("#form").submit(function(){
 if(jQuery("select.input:selected").length == jQuery("select.input").length){
  // your actions if true
 } else {
  // your actions if false
 }
}); 
```

祝你好运

# javascript - 使用 html 写入 csv 和 xls 文件的替代方法

> ID：13137282
> 
> 赞同：0
> 
> 时间：2012-10-30T10:42:04.143
> 
> 标签：javascript, jquery, html, jquery-plugins

我在我的代码中使用**Activex**来写入 xls(excel) 文件。但问题是只有 Internet Explorer 支持 activex。是可用于将值从 xml 或 javascript 变量导出为**csv**或**xsl**的任何**脚本**或**jquery**脚本。代码或演示高度赞赏。提前致谢

# android - 滚动视图和嵌套的线性布局

> ID：13137283
> 
> 赞同：0
> 
> 时间：2012-10-30T10:42:22.210
> 
> 标签：android, android-layout, android-view

这是我的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/yellow" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <include
            android:id="@+id/header"
            layout="@layout/header" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginTop="10dp"
            android:background="@drawable/green"
            android:orientation="vertical" >

            <TextView/>

            <TextView/>

            <TextView/>

            <TextView/>

        </LinearLayout>
    </LinearLayout>

</ScrollView> 
```

这是它的外观：

![在此处输入图像描述](../Images/9bbcdb31285e94a21af67b284a04a97e.png)

**蓝色**是标题，**黄色**是 ScrollView，**绿色**是 LinearLayout，我想填充用红色箭头标记的空间。

为了使用 ScrollView，我使用了另一个包含标题和绿色 LinearLayout 的 LinearLayout。

**问题**：如何让 Green LinearLayout 将整个空间填充到底部？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T10:47:21.197

在 ScrollView 上，尝试将填充视口设置为 true。

您可以通过 xml 或代码来完成。

[http://developer.android.com/reference/android/widget/ScrollView.html#setFillViewport(boolean](http://developer.android.com/reference/android/widget/ScrollView.html#setFillViewport(boolean) )

# android - 即使在模拟器运行时也找不到设备

> ID：13137287
> 
> 赞同：1
> 
> 时间：2012-10-30T10:42:40.187
> 
> 标签：android, ant, android-emulator, jenkins

我正在尝试使用 Android Emulator Plugin 设置 Jenkins 以进行自动化测试。当 Jenkins 尝试安装 apk 时，找不到模拟器。但是，如果我通过 Eclipse 安装 .apk 一切正常。

作为我正在使用的 Ant 命令`installt`

这是詹金斯的输出：

```
$ /opt/android-sdk-linux/platform-tools/adb connect localhost:43944
[android] Emulator is ready for use (took 35 seconds)
[workspace] $ ant "-Dadb.device.arg=-s  Froyo" -Dsdk.dir=/opt/android-sdk-linux -Dtarget=android-8 -Dtested.project.dir=../../Finder/workspace installt
Buildfile: /var/lib/jenkins/jobs/FinderTest/workspace/build.xml

-check-env:
 [checkenv] Android SDK Tools Revision 20.0.3
 [checkenv] Installed at /opt/android-sdk-linux

-setup:
     [echo] Project Name: Finder
  [gettype] Project Type: Test Application

-test-project-check:

-set-mode-check:

-set-debug-files:

install:
     [echo] Installing /var/lib/jenkins/jobs/FinderTest/workspace/bin/Finder-debug.apk onto default emulator or device...
     [exec] error: device not found
     [exec] - waiting for device - 
```

正如您在第二行看到的那样，模拟器已准备就绪，但在安装时无法识别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T23:09:47.200

您正尝试在序列号为“Froyo”的模拟器上安装。仅此一项就很奇怪，因为“-s”参数用于设备标识符，而不是 AVD 名称。但通常你不应该硬编码这样的东西。

从 Ant 构建中删除“adb.device.arg”参数，应用程序将安装在 Jenkins 启动的模拟器上。

# paypal - 隐藏贝宝注册模块

> ID：13137291
> 
> 赞同：0
> 
> 时间：2012-10-30T10:43:04.010
> 
> 标签：paypal

我正在为**CreateRecurringPaymentsProfile** / **DoDirectPayment**使用 paypal API并想隐藏

> 没有贝宝账户？以 PayPal 客人身份使用借记卡或信用卡付款

而买家重定向到贝宝登录页面以继续结帐 ![在此处输入图像描述](../Images/bea72bd886c2f523c94f7c152afba3eb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:19:49.857

检查这篇文章：[Paypal - 无帐户付款](https://stackoverflow.com/questions/1783832/paypal-payment-without-account?rq=1)

> 贝宝帐户中有选项可以启用此功能

# android - 当我的活动更改或破坏时，如何阻止 ASyncTask 崩溃？

> ID：13137292
> 
> 赞同：3
> 
> 时间：2012-10-30T10:43:05.117
> 
> 标签：android, android-asynctask, screen-rotation, android-anr-dialog

这可能是另一个问题的重复，我不确定。我读过类似的问题，但要么无法理解，要么无法成功应用给定的解决方案。

我创建了一个具有多个选项卡的应用程序。当用户滑入选项卡时，大多数选项卡使用 ASyncTask 更新数据。然而，当 AST 仍在运行时，当活动发生变化时（这种情况经常发生；例如，当用户旋转屏幕或使用后退按钮退出时），应用程序将强制关闭 (ANR)。

这是我在 LogCat 中看到的情况：

```
10-30 11:30:01.422: E/AndroidRuntime(4687): FATAL EXCEPTION: main
10-30 11:30:01.422: E/AndroidRuntime(4687): java.lang.NullPointerException
10-30 11:30:01.422: E/AndroidRuntime(4687):     at com.appconstructor.khcreates.Core$refreshList.onPostExecute(Core.java:913)
10-30 11:30:01.422: E/AndroidRuntime(4687):     at com.appconstructor.khcreates.Core$refreshList.onPostExecute(Core.java:1)
10-30 11:30:01.422: E/AndroidRuntime(4687):     at android.os.AsyncTask.finish(AsyncTask.java:631)
10-30 11:30:01.422: E/AndroidRuntime(4687):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
10-30 11:30:01.422: E/AndroidRuntime(4687):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
10-30 11:30:01.422: E/AndroidRuntime(4687):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-30 11:30:01.422: E/AndroidRuntime(4687):     at android.os.Looper.loop(Looper.java:137)
10-30 11:30:01.422: E/AndroidRuntime(4687):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-30 11:30:01.422: E/AndroidRuntime(4687):     at java.lang.reflect.Method.invokeNative(Native Method)
10-30 11:30:01.422: E/AndroidRuntime(4687):     at java.lang.reflect.Method.invoke(Method.java:511)
10-30 11:30:01.422: E/AndroidRuntime(4687):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-30 11:30:01.422: E/AndroidRuntime(4687):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-30 11:30:01.422: E/AndroidRuntime(4687):     at dalvik.system.NativeStart.main(Native Method) 
```

据我所知，ASyncTask（刷新列表）无法处理没有应用程序可以应用更改的事实。

我想做的是制作一个在没有活动时不会强制关闭的应用程序。

1.  如果活动停止，我希望 ASyncTask 停止
2.  或者我希望应用程序只保持任务运行，而不是强制关闭（例如：如果没有连接活动，则 onPostExecute() 不会发生任何事情。

如果有人需要我的 onPostExecute() 代码来解决问题，请告诉我。

这一直困扰着我一段时间，我无法自己解决这个问题。有了这个错误，我的应用程序的体验非常糟糕。非常感谢您的帮助！

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T10:45:33.917

保留对您的任务的引用，并在`onDestroy`and`onConfigurationChanges`方法中，取消任务..

```
if(task != null && task.getStatus() == Status.RUNNING)
    task.cancel(true); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T11:13:55.793

最好`cancel(true)`使用与命令相同的实例`execute()`执行：

```
AsyncTask<Void,Void,Void> task = new MyAsyncTask();
task.execute();

.....

task.cancel(true); 
```

编辑：您需要`AsyncTask`在每个片段中存储您的个体实例，因此将实例保存`new freshList(this,getActivity(),mNum)`为片段的变量，并且由于这是一个片段，因此请在片段`cancel(true)`的`onPause()`方法中执行。希望这会帮助你。

# javascript - 在滚动时使用 jquery 更改背景位置

> ID：13137294
> 
> 赞同：0
> 
> 时间：2012-10-30T10:43:09.163
> 
> 标签：javascript, jquery, background-position

尝试使用滚动位置更改正文背景位置。背景图像具有以下设置：

```
 background: #fff url(images/bg.png) center 100% no-repeat; background-attachment:fixed; 
```

我在那个页面上有一个高度为 120 像素的页脚。当滚动到达带有鼠标滚轮或滚动条的页脚时，我正在尝试更改正文背景位置（y 轴）。

**编辑**：

我已经设法使它适用于鼠标滚轮和酒吧，以防有人需要在“固定”背景之外制作页脚。

```
$(window).scroll(function() {
        var def_bg_pos = 300;
        var footer = $(document).height() - 120; // footer height

        if($(window).scrollTop() + $(window).height() > footer) {
            var counter = ($(window).scrollTop() + $(window).height()) - footer;
            $('body').css('background-position', 'center '+ ((counter * -1) - def_bg_pos) + 'px');
        }
        else
            $('body').css('background-position', 'center -'+def_bg_pos+'px');
    });

<body style="background: #fff url(images/bg.png) center -300px no-repeat; background-attachment:fixed;"> 
```

# ruby - Ruby - 写入嵌套数组

> ID：13137297
> 
> 赞同：-1
> 
> 时间：2012-10-30T10:43:19.930
> 
> 标签：ruby, web-scraping, nokogiri

我正在尝试抓取有关网站新专辑发行的信息，我正在通过 Nokogiri 处理这个问题。这个想法是创建一个漂亮的数组，其中包含这样的项目

```
[ 
  0 => ['The Wall', 'Pink Floyd', '1979'], 
  1 => ['Led Zeppelin I', 'Led Zeppelin', '1969']
 ] 
```

这是我当前的代码。我是一个完全的红宝石新手，所以任何建议都将不胜感激。

```
@events = Array.new()
# for every date we encounter
doc.css("#main .head_type_1").each do |item|

  date = item.text

  # get every albumtitle
  doc.css(".albumTitle").each_with_index do |album, index|
    album = album.text
    @events[index]['album'] = album
    @events[index]['release_date'] = date
  end

  #get every artistname
  doc.css(".artistName").each do |artist|
    artist = artist.text
    @events[index]['artist'] = artist
  end

end

puts @events 
```

PS我试图抓取的页面格式有点奇怪：

```
<tr><th class="head_type_1">20 October 1989</th></tr>
<tr><td class="artistName">Jean Luc-Ponty</td><td class="albumTitle">Some example album</td></tr>
<tr><td class="artistName">Some Other Artist</td><td class="albumTitle">Some example album</td></tr>
<tr><td class="artistName">Some Other Artist</td><td class="albumTitle">Some example album</td></tr>
<tr><th class="head_type_1">29 October 1989</th></tr>
<tr><td class="artistName">Some Other Artist</td><td class="albumTitle">Some example album</td></tr> 
```

当我尝试在 ruby​​ 解释器中运行它时，出现以下错误：

```
get_events.rb:25:in `block (2 levels) in <main>': undefined method `[]=' for nil:NilClass (NoMethodError)
from /Users/adrian/.rvm/gems/ruby-1.9.3-p286/gems/nokogiri-1.5.5/lib/nokogiri/xml/node_set.rb:239:in `block in each'
from /Users/adrian/.rvm/gems/ruby-1.9.3-p286/gems/nokogiri-1.5.5/lib/nokogiri/xml/node_set.rb:238:in `upto'
from /Users/adrian/.rvm/gems/ruby-1.9.3-p286/gems/nokogiri-1.5.5/lib/nokogiri/xml/node_set.rb:238:in `each'
from get_events.rb:23:in `each_with_index'
from get_events.rb:23:in `block in <main>'
from /Users/adrian/.rvm/gems/ruby-1.9.3-p286/gems/nokogiri-1.5.5/lib/nokogiri/xml/node_set.rb:239:in `block in each'
from /Users/adrian/.rvm/gems/ruby-1.9.3-p286/gems/nokogiri-1.5.5/lib/nokogiri/xml/node_set.rb:238:in `upto'
from /Users/adrian/.rvm/gems/ruby-1.9.3-p286/gems/nokogiri-1.5.5/lib/nokogiri/xml/node_set.rb:238:in `each'
from get_events.rb:18:in `<main>' 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:37:57.537

我无法理解您的解决方案，但是在玩了一会儿之后，我想出了这个。

```
require 'pp'
require 'nokogiri'

str = %Q{
<tr><th class="head_type_1">20 October 1989</th></tr>
<tr><td class="artistName">Jean Luc-Ponty</td><td class="albumTitle">Some album</td></tr>
<tr><td class="artistName">Some Other Artist</td><td class="albumTitle">Some album</td></tr>
<tr><td class="artistName">Some Other Artist</td><td class="albumTitle">Some album</td></tr>
<tr><th class="head_type_1">29 October 1989</th></tr>
<tr><td class="artistName">Some Other Artist</td><td class="albumTitle">Some album</td></tr>
}

doc = Nokogiri::HTML(str)
date = ""
result = []

doc.xpath("//tr").each do |tr|
  children = tr.children
  if children.first["class"] == "head_type_1"
    date = children.first.content
  else
    artist, album = children.map {|c| c.content}
    result << {album: album, artist: artist, date: date}
  end
end

pp result 
```

输出：

`[{:album=>"Some album", :artist=>"Jean Luc-Ponty", :date=>"20 October 1989"},
{:album=>"Some album", :artist=>"Some Other Artist", :date=>"20 October 1989"},
{:album=>"Some album", :artist=>"Some Other Artist", :date=>"20 October 1989"},
{:album=>"Some album", :artist=>"Some Other Artist", :date=>"29 October 1989"}]`

不完全符合您的要求，但可能更符合 Ruby 的习惯，我相信您可以根据需要对其进行修改。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T12:57:19.897

您的第二个索引变量未定义`each`。

# opengl - GLSL 中的 OpenGL 预乘 alpha 为 DDS 纹理提供了意想不到的结果

> ID：13137298
> 
> 赞同：3
> 
> 时间：2012-10-30T10:43:22.073
> 
> 标签：opengl, glsl

我有以下情况。我在 OpenGL 渲染器上工作（OpenGL 4.2 所以没有固定的东西）。由于与我在着色器中所做的各种图像效果相关的原因，我不使用硬件混合。我有两种类型的输入纹理：

1) 带有 alpha 通道的 PNG 24。2) 带 alpha 通道的 DDS (DXT5)。

在片段着色器中，我在输出之前预乘 alpha：

片段着色器：

```
 outputColor=texture(colorMap,interpolateAtSample(uvsOut , gl_SampleID));
      /////// PREMULTIPLY ALPHA //////////
     outputColor.a *= alpha;
     outputColor.rgb *= outputColor.a; 
```

基于 PNG 的纹理工作正常： ![在此处输入图像描述](../Images/64b3775ca66e54670c28cbc421e0f4cf.png)

但 DDS 看起来像这样： ![在此处输入图像描述](../Images/fc75789a90208e99ce04a84b50e0db98.png)

你可以看到光晕+黑边。我认为的第一件事是 alpha 乘法的问题。但后来我将 DDS 的纹理过滤从 GL_LINEAR 更改为 GL_NEAREST，它同时删除了光晕和黑边。虽然这个“hack”基本上解决了这个问题，但我仍然想了解为什么 GL_LINEAR 会导致 DDS 压缩纹理出现此类问题。

差点忘了：如果我删除预乘，它可以解决 DDS 的问题，但会为基于 PNG 的纹理创建一个问题。

更新：在 MSAA 解析之后还有另一个通道，即混合通道。正如我所提到的，在这种情况下我不做任何混合，但混合着色器中的输出代码如下所示：

```
 ///Prevent background bleeding:
         blendTex.rgb/=blendTex.a;
         //base texture is the texture under the current one.
         //This particular technique does "NORMAL" blend-just returns blendTex.
         vec4 blendedRes=blendTechnique( baseTex , blendTex) ;
         outputColor= vec4( blendedRes.rgb * blendTex.a, blendTex.a); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:34:36.537

我找到了问题的根源。我的代码实际上是 100% 正确的。问题出在我用于测试的特定 DDS 纹理中。它已损坏。当我尝试不同的 DDS (DXT5) 时，它与 GL_NEAREST 和 GL_LINEAR 都可以正常工作过滤。要记住的重要细节是默认情况下不能预乘 DDS，因此如果需要，请在 GPU 上进行。

# android - 保存图像并将所有图像复制到 sd 卡中

> ID：13137300
> 
> 赞同：1
> 
> 时间：2012-10-30T10:43:24.750
> 
> 标签：android, eclipse, android-image

我有 10 张图像，想将所有这些图像保存在 android 应用程序内存中。因此，无论何时使用安装此应用程序，他都已经拥有了所有图像。

我已经硬编码了很多次，但没有得到很好的回应。

有什么办法吗。所以我会做到的。

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:51:30.023

将所有图像存储在 APK 的 assets 文件夹中。安装后，扫描内部存储器以查看是否存在所需的图像。如果没有，请将它们复制到那里。这样，即使用户清除了您应用程序的数据，您也可以将它们复制回来。另一个好处是用户也不会对此一无所知，因此它是一个很好的用户体验。唯一的问题是您的 APK 大小会增加，因此请进行相应的管理。

试试下面的代码

```
InputStream inputStream = getAssets().open("yourfile.jpg");
            OutputStream out = new FileOutputStream(new File("/sdcard/yourfile.jpg"));
            int read = 0;
            byte[] bytes = new byte[1024];
            while ((read = inputStream.read(bytes)) != -1) {
                out.write(bytes, 0, read);
            }
            inputStream.close();
            out.flush();
            out.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:28:01.397

您可以将文件保存在您的资产或 res 文件夹中，这里我将文件保存在 res/drawable/ 中，并在需要时将它们复制到 sdcard 上。在下面的代码中，我们首先检查文件是否不存在，然后从可绘制对象创建位图并将文件写入 sdcard。

```
 File file = new File(pathExt+"/Pictures/", "s1.png");
                if(isSDCARDMounted()){
                if (!file.exists()) {
                    bmp = BitmapFactory.decodeResource(getResources(),
                            R.drawable.s1);

                    try {

                        FileOutputStream outStream = new FileOutputStream(file);
                        bmp.compress(Bitmap.CompressFormat.JPEG, 100, outStream);
                        outStream.flush();
                        outStream.close();
                    } catch (FileNotFoundException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                        }
} 
```

**isSDCARDMounted** : 检查卡是否挂载的函数

**pathExt** ：外部存储目录路径的变量

确保设置了在外部存储上写入的权限

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# gwt - 如何发现 .cache.html 将由 chrome 或 firefox 加载

> ID：13137301
> 
> 赞同：3
> 
> 时间：2012-10-30T10:43:26.700
> 
> 标签：gwt

**GWT 模块用****6 种排列**编译并生成`6 .cache.html files`. **如果从firefox**或**chrome**访问模块，如何确定`.cache.html file`将加载哪些模块？

 ***** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:56:03.713

*   如果您使用的是最新的 GWT-2.5，则在输出文件夹中有一个名为`compilation-mappings.txt`的文件，其中包含每个排列的文件名和每个排列的属性值（user.agent、locale 等）。

    *注意*：`compilation-mappings.txt`如果您`CrossSiteIframeLinker`在`.gwt.xml`文件中启用，则会生成唯一的：

    <add-linker name="xsiframe">

*   对于较旧的 gwt 版本，您可以

    *   在请求排列的那一刻，用 firebug（或任何类似的检查器）检查网络流量
    *   在客户端有一个方法可以打印出排列名称 GWT.getPermutationStrongName()
    *   在服务器端，您可以读取客户端在每个 ajax 请求中发送的 X-GWT-Permutation 标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:58:29.103

转到您的页面，打开*检查器*（右键单击），然后转到*网络*选项卡，然后刷新。您应该会看到所有已加载的资源。

希望它会有所帮助:)****

# iphone - 竹纸风格的记号笔工具

> ID：13137302
> 
> 赞同：0
> 
> 时间：2012-10-30T10:43:28.997
> 
> 标签：iphone, ios, opengl-es

我开发 ios 绘图应用程序。我想在 Bamboo Paper 应用程序（[https://itunes.apple.com/us/app/bamboo-paper-notebook/id443131313?mt=8](https://itunes.apple.com/us/app/bamboo-paper-notebook/id443131313?mt=8)）中实现标记工具。在这个应用程序中，如果我使用标记进行绘制并且在此期间不进行修饰，那么我的线条具有相同的 alpha： ![在此处输入图像描述](../Images/8cc9051e152cc8025a4c840e5c3bcebb.png)

如果我再次尝试使用标记进行绘制，我在与旧线的交叉处有另一个 alpha： ![在此处输入图像描述](../Images/99d1bc41c52ebe712b5ed2f7b13aa7fb.png)

我怎样才能获得相同的效果？我使用 opengl es 2.0 开发应用程序。

# ruby-on-rails - 如何结合 procs 来过滤 ruby 中的列表？

> ID：13137304
> 
> 赞同：1
> 
> 时间：2012-10-30T10:43:45.627
> 
> 标签：ruby-on-rails, ruby, lambda, closures, proc

我正在尝试在我的一个小项目中实施按标准过滤的方法。我有一个过滤器类，其中有名称、年份、流派的过滤器。例如：

```
Filter.new.name("The Shawshank Redemption")
Filter.new.year("1994")
Filter.new.genre("drama") 
```

我还有一个电影列表，每一个都是一个具有方法名称、年份和流派的对象。我希望能够执行以下操作（MoviesContainer 只是一个具有@movies 列表的类）：

```
MoviesContainer.filter Filter.new.name("The Godfather") & Filter.new.year("1972") | Filter.year("1974") 
```

我可以轻松地使 |、& 和 ! 我的过滤器类中的运算符，但我不知道如何组合过滤器对象，以便它们成为我可以传递给过滤器的一个对象。我很乐意接受任何想法。:)

到目前为止，我最好的想法是为每个 Filter.new 创建一个 proc，然后将它们组合在 &,| 和 ！方法，但我不知道如何。我在想这样的事情可以工作，但是，它没有：D

```
proc { |movie| proc { |movie| movie.name == "The Godfather" } && proc { |movie| movie.year== "1972" } 
```

然后用每个 @movies 项目调用它。你能帮我解决合并过程的问题吗，或者提出一个更好的解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:25:01.143

也许是这样的？

```
class Filter
  attr_accessor :proc
  class <<self; alias :old_new :new end
  def self.new attribute, value
    old_new.tap{|f| f.proc = ->x{x.send(attribute) == value}}
  end
  def & other
    self.class.old_new.tap{|f| f.proc = ->x{proc.call(x) && other.proc.call(x)}}
  end
  def | other
    self.class.old_new.tap{|f| f.proc = ->x{proc.call(x) || other.proc.call(x)}}
  end
  def !
    self.class.old_new.tap{|f| f.proc = ->x{!proc.call(x)}}
  end
end

class Movie
  attr_accessor :name, :year, :genre
end

MoviesContainer = [
  Movie.new.tap{|m| m.name = "The Godfather"; m.year = "1972"},
  Movie.new
]

module Enumerable
  def filter f
    select(&f.proc)
  end
end

filter1 = Filter.new(:name, "The Godfather")
filter2 = Filter.new(:year, "1972")
filter3 = Filter.new(:year, "1974")

MoviesContainer.filter(filter1 & filter2 | filter3)
# => [#<Movie:0x000000017dba08 @name="The Godfather", @year="1972">] 
```

# android - 没有得到 R.java 文件

> ID：13137305
> 
> 赞同：2
> 
> 时间：2012-10-30T10:43:51.133
> 
> 标签：android, r.java-file

`R.java`清理我的项目后，我无法取回我的文件。

请建议我一个解决方案，帮助我解决这个问题..

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T10:46:08.590

这可能是由于以下两个原因之一：

1.  你不是在自动重建你的项目。（可以在设置中修复）。

2.  您的项目中有一个名称非法的属性（例如带有大写字母的文件）。

解决这个问题，项目将毫无问题地重建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T10:46:42.293

尝试通过选择您的项目--> 构建项目来构建您的项目。

从 Eclipse 的项目选项卡中删除自动生成设置。

尝试手动构建它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T10:45:30.453

eclipse 无法构建 R.java 。您的 xml 布局中可能存在一些问题。去看一下。

# datetime - Symfony2：如何使用日期时间对象进行操作

> ID：13137307
> 
> 赞同：8
> 
> 时间：2012-10-30T10:44:03.240
> 
> 标签：datetime, symfony

我真的不知道如何在 symfony2 中使用日期时间对象。

我在数据库中几乎没有游戏条目，其中一个具有日期时间属性。现在我想与实际日期进行比较：我想拥有过去 10 天的所有记录。我怎样才能做到这一点？

我试过这个

```
date($game->getZeit(), mktime(0,0,0,date('m'),date('d'),date('y'))) 
```

得到一个可比较的日期，我可以与之比较

```
date('Y.m.d H:i:s', mktime(0,0,0,date('m'),date('d'),date('y'))); 
```

但这没有用，因为

```
$game->getZeit() 
```

不能转换为字符串。为什么？那么我该如何调试这个呢？我怎么知道它的价值？我如何将它与其他日期时间或日期字符串进行比较？

快速帮助将不胜感激！:)

亲切的问候

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-30T10:56:22.177

在 Symfony2（Doctrine ORM）中，日期表示为 DateTime 对象（[http://php.net/DateTime](http://php.net/DateTime)）所以如果`$game->getZeit()`是[DateTime](http://www.php.net/manual/en/class.datetime.php)的实例，您可以将其转换为字符串，如

```
$game->getZeit()->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-12T11:03:38.430

让我再举一个例子。

就我而言，我检索到的数据是

```
array(3) {
  ["full_name"]=>
  string(13) "Administrator"
  ["current_location"]=>
  string(8) "Orogenic"
  ["location_updatedAt"]=>
  object(DateTime)#682 (3) {
    ["date"]=>
    string(26) "2019-09-12 08:21:03.000000"
    ["timezone_type"]=>
    int(3)
    ["timezone"]=>
    string(3) "UTC"
  }
} 
```

要获取您可以使用的 location_updatedAt 值，

```
$boxInfo['warehouseLocationUpdatedAt']->format('Y-m-d') 
```

# .htaccess - htaccess 块 *bot 和 bot*

> ID：13137311
> 
> 赞同：1
> 
> 时间：2012-10-30T10:44:13.010
> 
> 标签：.htaccess, block, bots

我无法阻止两个不断从我的站点吸走带宽的坏机器人，我确信这与他们使用的用户代理名称中的 * 有关。

现在，我正在使用以下代码来阻止坏机器人（这是摘录）......

```
# block bad bots
RewriteCond %{HTTP_USER_AGENT} ^$ [OR]
RewriteCond %{HTTP_USER_AGENT} ^spider$ [OR]
RewriteCond %{HTTP_USER_AGENT} ^robot$ [OR]
RewriteCond %{HTTP_USER_AGENT} ^crawl$ [OR]
RewriteCond %{HTTP_USER_AGENT} ^discovery$
RewriteRule .* - [F,L] 
```

当我尝试这样做`RewriteCond %{HTTP_USER_AGENT} ^*bot$ [OR]`或`RewriteCond %{HTTP_USER_AGENT} ^(*bot)$ [OR]`出现错误时。

猜测有一种非常简单的方法可以做到这一点，我只是在谷歌上还没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:56:33.253

正则表达式模式中的星号 (*) 需要转义，因为它被解释为正则表达式的一部分。
`RewriteCond %{HTTP_USER_AGENT} ^\*bot$`
应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:05:01.020

我认为您缺少一个点`.`，将您的条件更改为：

```
RewriteCond %{HTTP_USER_AGENT} ^.*bot$ [OR] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:06:30.010

但这将如何防止 Bad Bot 访问？

我在一家安全公司工作（也是[Botopedia.org](http://www.botopedia.org)的 PM ），我可以看出 99.9% 的恶意机器人不会在其用户代理字符串中使用任何这些表达式。

大多数情况下，Bad Bots 会使用看起来合法的用户代理（模拟浏览器和 VIP 机器人，如 Googlebot），您根本无法仅通过用户代理数据过滤它们。

要进行有效的机器人检测，您应该查看其他迹象，例如：

1）可疑签名（即Order of Header参数）

或/和

2) 可疑行为（即早期 robots.txt 访问或请求率/模式）

然后您应该使用不同的挑战（即 JS 或 Cookie 甚至 CAPTCHA）来验证您的怀疑。

您所描述的问题通常被称为“寄生阻力”。

这是一个非常真实和严肃的问题，我们实际上在几个月前发表了一项关于它的研究。

（我们发现在平均规模的网站上，51% 的访问者是机器人，31% 是恶意的）

老实说，我不认为你可以用几行 RegEx 来解决这个问题。

我们免费提供我们的 Bot 过滤服务，还有其他几个像我们一样。（如果需要，我可以认可良好的服务）

总帐。

# android - Android：从应用程序更新操作系统

> ID：13137316
> 
> 赞同：1
> 
> 时间：2012-10-30T10:44:28.800
> 
> 标签：android, operating-system, updates

是否可以从 Android 应用程序更新 Android 操作系统/检查操作系统的更新？更准确地说，操作系统提供的检查更新的功能（设置->关于设备->更新（检查更新），有没有办法从我的应用程序中做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:48:15.207

是的，但为此您需要成为系统应用程序。非系统应用程序将没有更新操作系统所需的权限。

# android - 具有自定义 RelativeLayout 的 ActionBarSherlock 不显示标题文本

> ID：13137325
> 
> 赞同：10
> 
> 时间：2012-10-30T10:45:03.513
> 
> 标签：android, actionbarsherlock

使用相对布局时，ActionBar 不显示标题。当我不使用RelativeLayout 时，这些项目不会右对齐。请不要告诉我使用菜单项作为解决方案。应该是定制的。

这是我的设置方式：

```
 ActionBar bar = getSupportActionBar();
    bar.setDisplayOptions(
            ActionBar.DISPLAY_HOME_AS_UP |
            ActionBar.DISPLAY_SHOW_CUSTOM |
            ActionBar.DISPLAY_SHOW_HOME |
            ActionBar.DISPLAY_SHOW_TITLE |
            ActionBar.DISPLAY_USE_LOGO);

    bar.setTitle(title);
    bar.setCustomView(actionBar);
    this.setTitle(title); 
```

这是对齐良好但未显示标题的情况

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_alignParentRight="true" >

        <ImageButton
            android:id="@+id/acion_add"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/menu_label_add"
            style="?attr/actionButtonStyle" />

        <ImageButton
            android:id="@+id/action_prev"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/menu_label_prev"
            style="?attr/actionButtonStyle" />

        <ImageButton
            android:id="@+id/action_next"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/menu_label_next"
            style="?attr/actionButtonStyle" />

    </LinearLayout>

</RelativeLayout> 
```

[截屏](http://i48.tinypic.com/96cg9y.png)

这是显示标题的布局，但项目左对齐

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:gravity="right">

    <ImageButton
        android:id="@+id/acion_add"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/menu_label_add"
        style="?attr/actionButtonStyle" />

    <ImageButton
        android:id="@+id/action_prev"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/menu_label_prev"
        style="?attr/actionButtonStyle" />

    <ImageButton
        android:id="@+id/action_next"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/menu_label_next"
        style="?attr/actionButtonStyle" />

</LinearLayout> 
```

[截屏](http://i46.tinypic.com/2gy0yep.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T20:56:30.987

我遇到了同样的问题并找到了这个链接：[https ://groups.google.com/forum/?fromgroups=#!topic/actionbarsherlock/He6gst4nvR0](https://groups.google.com/forum/?fromgroups=#!topic/actionbarsherlock/He6gst4nvR0)

这对我有用：

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    ...

</LinearLayout> 
```

代码：

```
import com.actionbarsherlock.app.ActionBar.LayoutParams;
...
LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, Gravity.RIGHT | Gravity.CENTER_VERTICAL);
getSupportActionBar().setCustomView(segmentView, lp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:10:32.863

有一种解决方法是在布局中添加带有 titleTextStyle 的 TextView。如果你们中的任何人有更好的答案，我很期待看到它。

我的解决方法：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/player_title"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_toLeftOf="@+id/buttons_holder"
        android:ellipsize="end"
        style="@style/TextAppearance.Sherlock.Widget.ActionBar.Title"/>

    <LinearLayout
        android:id="@+id/buttons_holder"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_alignParentRight="true" >

        <ImageButton
            android:id="@+id/acion_add"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/menu_label_add"
            style="?attr/actionButtonStyle" />

        <ImageButton
            android:id="@+id/action_prev"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/menu_label_prev"
            style="?attr/actionButtonStyle" />

        <ImageButton
            android:id="@+id/action_next"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/menu_label_next"
            style="?attr/actionButtonStyle" />

    </LinearLayout>

</RelativeLayout> 
```

# jquery - 2个html页面之间的白色闪烁

> ID：13137326
> 
> 赞同：0
> 
> 时间：2012-10-30T10:45:06.337
> 
> 标签：jquery, html, jquery-mobile, cordova

我的问题是在 2 个单独的 html 页面名称 index.html 和 mainpage.html 之间的转换之间出现白屏。任何人都可以请这个dissapear。我已经放入了jquery函数来淡入淡出！代码如下：

PS：我使用的是windows phone 7模拟器！

HTML：

```
 <a  id="loginbtn" data-role="button" href="MainPage.html" 
style="margin-left: 60px;" class="ui-btn-up-a"> Log in</a> 
```

查询：

```
 $(document).ready(function () {
        $("body").css("display", "none");
        $("body").fadeIn(3000);

        $("a#loginbtn").click(function (event) {
            event.preventDefault();
            linkLocation = this.href;
            $("body").fadeOut(200, redirectPage);
        });

        function redirectPage() {
            window.location = linkLocation;
        }
    }); 
```

我一直在以下链接，但我对使用 Cordova/PhoneGap 非常陌生，所以我不明白，也许有人向我解释会很有帮助！

链接：

[Github 论坛](https://github.com/jquery/jquery-mobile/issues/4024)

[Github 论坛 - “答案”](https://github.com/jquery/jquery-mobile/commit/ff1a7e019f45ad00fc9aa3e0fcb08df5acc54a66)

淡出有效，淡入！但在淡出后出现白屏并加载新页面。

使用：HTML5/CSS/Javascript/Jquerymobile/Jquery.1.7/JqueryMobile.1.2.0

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:31:02.367

One of the benefits of using jquery mobile is to have access to its built-in transitions. Instead of manually doing a fade out fade in, you should instead change page by either:

*   Simply linking to the target page: JQM allows you to define a transition in a simple link, using the following syntax `<a href="mainpage.html" data-transition="fade">link</a>`. No additional js involved, jqm handles everything, as described and shown [here](http://jquerymobile.com/test/docs/pages/page-transitions.html)

*   Using the $.mobile.changePage() jquery mobile method (in place of setting window.location) and specify the "transition" parameter to the value you want.You do not need to add fade effects manually You can find more details [here](http://jquerymobile.com/test/docs/api/methods.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:02:32.273

Part of the problem is using document.location and efectively restarting the app as Romain pointed out. However, after fixing that, you will still get a blank page but for a different reason.

By default, jquery mobile transitions after 1.1 are sequential (aka horribly broken) - page one fades out, leaving the default white background, then page two fades in. You need to replace the transition handler to get a nice crossfade.

[https://github.com/watusi/jquery.mobile.simultaneous-transitions](https://github.com/watusi/jquery.mobile.simultaneous-transitions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:04:29.483

Bypassing the jquery mobile etc, maybe including a background color to your body or html could solve your problem quite easily. Not sure how your design is supposed to be, so feel free to vote my answer down :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T11:10:56.773

Here's a little snippet from CSS-Tricks which allegedly gets rid of IE page flicker:

```
<!-- Stop IE page flicker -->
<!--[if IE]>
    <meta http-equiv="Page-Enter" content="blendTrans(duration=0)" />
    <meta http-equiv="Page-Exit" content="blendTrans(duration=0)" />
<![endif]--> 
```

Not sure if it applies to mobile as well as desktop, but it's worth a shot.

# forms - zend 表单相关下拉菜单

> ID：13137328
> 
> 赞同：3
> 
> 时间：2012-10-30T10:45:07.007
> 
> 标签：forms, validation, zend-framework

我有两个用于选择部门和名称的下拉列表。

```
$model = new Application_Model_DbTable_Department();
$departments = $model->fetchAll();
$department = $this->createElement('select','department');
$department->setLabel('Department');
$department->setAttrib('class', 'department');
foreach($departments as $d)
    $department->addMultiOption($d->id, $d->depname);

$model = new Application_Model_DbTable_Designation();
$designations = $model->fetchAll('depid=1');
$designation = $this->createElement('select','designation');
$designation->setLabel('Designation');
$designation->setAttrib('class', 'designation');
$designation->setRegisterInArrayValidator(false);
foreach($designations as $ds)
    $designation->addMultiOption($ds->id, $ds->designation); 
```

我有 jquery 功能，用于在更改部门时进行指定查找。我的问题是提交表单时，如果表单有验证错误，我需要显示选定的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:20:25.533

In cases like this, It is best to do the form population after the form has been instantiated. Reason: it is next to impossible to get the values of the form elements on initialization because they do not exist yet (That is, in the `init()` method of the `Zend_Form`). You could do this:

```
$form = new Your_Zend_Form();
$designation = $form->getElement('designation');

$departmentId = null;

$request = $this->getRequest();

if($request->isPost()){
    $departmentId = $request->getPost('department');
}

$desigantionOptions = $this->_getDesignationOptions($departmentId);

$designation->addMultiOptions($desigantionOptions); 
```

This would be in your controller action or something... But in essence, your designation options would take values from the current department if available from the post or else it would fall to the default selection. The method signature of `$this->_getDesignationOptions($departmentId)` will be as follows:

```
protected function _getDesignationOptions($departmentId = null); 
```

And this would return an array of value/option pair.

# wpf - 如何使用 WPF 必应地图控件组织图钉

> ID：13137330
> 
> 赞同：0
> 
> 时间：2012-10-30T10:45:10.617
> 
> 标签：wpf, bing-maps

我正在使用 WPF bing maps 控件构建一个桌面触摸应用程序。我已经看到您可以将元素作为项目直接添加到地图控件，或者如果使用 MVVM，我们可以使用 MapItemControls 并定义与 Location 集合的绑定。

对于我的场景，我将在地图上显示不同类型的信息，例如：

*   客户项目在不同位置的位置。项目按类型组织（大项目、中项目、已验证项目）

*   客户销售办事处的位置

PushpPins 将根据项目类型和销售办公室以不同的方式进行视觉识别。

我的问题是关于在地图上组织这些图钉的方式。

我是否必须转到包含项目位置和销售区域的单个 ObservableCollection 位置并将它们全部显示在一个地图层中？

我是否最好为每个 PushPin 类型创建一个 MapLayer 并将它们绑定到各自的集合？

哪个最好 ？

问候哔叽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T09:06:23.273

通过使用不同的地图层解决

# sublimetext2 - 包控制 - 在浏览器中运行文件的插件

> ID：13137332
> 
> 赞同：0
> 
> 时间：2012-10-30T10:45:19.887
> 
> 标签：sublimetext2

我正在寻找插件以在浏览器中运行 .html 文件并在 Windows 资源管理器中打开文件夹。

原因很简单。我总是以同样的方式开始工作：运行 Sublime Text 2，用鼠标在文件夹上单击 16 次以打开包含项目的文件夹并运行 index.html 或其他。我还需要打开文件夹，因为我不时复制一些图形或其他文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:14:45.070

**导航到文件**
您可以将工作区保存为 Sublime Text 中的项目，这样您就不必每次都重新导航到相同的文件。

*   打开您需要的文件并按您喜欢的方式布置它们
*   转到项目>将项目另存为并将项目文件保存在方便的地方
*   打开项目文件以继续处理这些文件

作为旁注，我强烈推荐[SyncedSidebar](https://github.com/sobstel/SyncedSideBar)插件来自动扩展侧边栏以显示您打开的文件。

您还*应该*能够右键单击您正在编辑的文件和“在 Windows 资源管理器中显示”（我使用的是 Mac，所以我只能验证“在 Finder 中显示”）。

**在浏览器中打开**您可以为此
设置[构建路径，或使用诸如](https://stackoverflow.com/a/8023999/1684247)[View in Browser](https://github.com/adampresley/sublime-view-in-browser)之类的插件。

# php - 想要设置值以输入类型文本，然后将表单从 javascript 发布到 php

> ID：13137336
> 
> 赞同：0
> 
> 时间：2012-10-30T10:45:30.277
> 
> 标签：php, javascript, forms, variables

id 不想将值放入`document.getElementById("UniLoc").value = val;`并且它不想提交表单如何解决这个问题？

这就是我将函数`JS`nas 称为某些值“asd56”的方式

```
 echo "
 <script type="text/javascript">
    repostD("'.$JS.'");
 </script>"; 
```

这是我里面的功能

```
<script>
function repostD(val)
{   
   //document.getElementById("UniLoc").value = val;
   document.getElementById('UniLoc').innerHTML = val;
   //document.UlRL.UniLoc.value = val;
   document.forms["UlRL"].submit();
}
</script> 
```

这是我的表格`html`

```
<form name="UlRL" id="UlRL" action="in.php" method="post">
<input type="text" id="UniLoc" name="UniLoc" value="<?php echo $UniLoc;?>" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:52:54.710

采用

```
document.getElementById('UniLoc').value=val; 
```

如果您的完整表格没有其他问题，则应提交。如果您还没有关闭表单标签，请关闭它。

```
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:56:12.023

我真的不能从你的问题中看出什么是错的，但看看你的代码：

```
document.getElementById('UniLoc').innerHTML=val; 
```

您正在尝试使用 id 'UniLoc' 设置输入的值，但是您使用了错误的语法。使用 .value 代替 .innerHTML

```
document.getElementById('UniLoc').value=val; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T10:56:14.043

尝试在 php all 中而不是在函数中做一个 if 子句，在代码中执行将执行表单发布操作的代码，并在 php 开始时尝试这个

```
 if($JS!="" )
 {

 $UniLoc=$JS;
 $JS="something that will go throught the other if down at the code";

  }
 else {

  $UniLoc=$_POST["UniLoc"];
 } 
```

# android - 我们可以在我们的 android 应用程序中获取 chrome 浏览历史记录/书签吗

> ID：13137339
> 
> 赞同：13
> 
> 时间：2012-10-30T10:45:39.357
> 
> 标签：android, android-contentprovider, android-browser, google-chrome-app

我们可以像使用 READ_HISTORY_BOOKMARKS 权限在默认浏览器中一样获取 chrome 浏览历史记录/书签吗？PS：我只是想知道这可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-20T05:00:20.627

是的，很有可能。使用这个 uri:`content://com.android.chrome.browser/bookmarks`而不是 Browser.BOOKMARKS_URI

```
String[] proj = new String[] { Browser.BookmarkColumns.TITLE,Browser.BookmarkColumns.URL };
Uri uriCustom = Uri.parse("content://com.android.chrome.browser/bookmarks");
String sel = Browser.BookmarkColumns.BOOKMARK + " = 0"; // 0 = history, 1 = bookmark
Cursor mCur = getContentResolver().query(uriCustom, proj, sel, null, null);
mCur.moveToFirst();
@SuppressWarnings("unused")
String title = "";
@SuppressWarnings("unused")
String url = "";

if (mCur.moveToFirst() && mCur.getCount() > 0) {
    boolean cont = true;
    while (mCur.isAfterLast() == false && cont) {
        title = mCur.getString(mCur.getColumnIndex(Browser.BookmarkColumns.TITLE));
        url = mCur.getString(mCur.getColumnIndex(Browser.BookmarkColumns.URL));
        // Do something with title and url
        mCur.moveToNext();
    }
} 
```

Havent 测试了代码是否有错误，但它应该可以正常工作。重要的是知道要使用的 uri。阅读[这个](https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-bugs/ThAoOAYOPCk)和[这](https://code.google.com/p/chromium/issues/detail?id=138755)可能会有所帮助。

# android - 使用没有 SL4A 的 Python android.py 模块

> ID：13137341
> 
> 赞同：2
> 
> 时间：2012-10-30T10:46:01.793
> 
> 标签：android, python, sl4a, android-scripting

有没有办法在`android.py`不安装 SL4A 的情况下使用模块？

我的意思是我从终端模拟器成功地在 android 上运行了 Python。我可以在不安装该层的情况下使用该模块（或者如果我不能再安装它）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T02:59:30.050

不，因为 SL4A 包提供了进行设备 API 调用的外观，充当中间人。如果没有它，您*可能*可以导入它，但您无法进行任何 API 调用。

# powershell - 抑制错误信息

> ID：13137343
> 
> 赞同：0
> 
> 时间：2012-10-30T10:46:07.213
> 
> 标签：powershell, powershell-2.0

当我运行以下内容并且没有 .csv 文件时，我收到一条错误消息，指出路径为空 - 这是因为没有什么可删除的......它不会停止脚本，但我让用户认为有什么东西错误，因为 powershell 喜欢显示 RED 字符，这让人们感到害怕！

如何让脚本运行但抑制错误？

代码：

```
filter removeallcsv([string]$path = '.')
    {
        Get-ChildItem $path | Where-Object {$_.Extension -eq ".csv"} | Foreach-Object {$_.fullName}
    }

Remove-Item (removeallcsv) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:52:38.090

您可以使用以下`If`语句：

```
$files = removeallcsv

if ($files) { Remove-Item $files } else {"nothing to delete"} 
```

一个班轮：

```
 if ( ($files=removeallcsv)) { Remove-Item $files } else {"nothing to delete"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:40:44.563

您实际上是将 $null 传递给`Remove-Item`，请尝试以下方法：

```
Get-ChildItem $path | Where-Object {$_.Extension -eq '.csv'} | Remove-Item 
```

# math - 用负数缩放值的范围

> ID：13137348
> 
> 赞同：7
> 
> 时间：2012-10-30T10:46:15.563
> 
> 标签：math, scale

如果一组值包含负数，我如何缩放它们以适应新范围？

例如，我有一组数字 (-10, -9, 1, 4, 10)，它们必须缩放到范围 [0 1]，这样 -10 映射到 0，而 10 映射到 1。

任意数字“x”的常规方法是：(x - from_min) * (to_max - to_min) / (from_max - from_min) + to_min

但这不适用于负数。任何帮助表示赞赏。谢谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T10:59:09.897

我相信 id 可以；在你的例子中，

```
from_min = -10,
from_max = 10,
to_max = 1,
to_min = 0. 
```

这产生

```
to_max - to_min = 1,
from_max - from_min = 20; 
```

所以使用公式

```
x -> (x - from_min) * (to_max - to_min) / (from_max - from_min) + to_min
   = (x - from_min) * 1 / 20 + 0
   = (x - from_min) / 20 
```

产量

```
-10 -> (-10 + 10) / 20 = 0 / 20,
-9 -> (-9 + 10) / 20 = 1 / 20,
1 -> (1 + 10) / 20 = 11 / 20,
4 -> (4 + 10) / 20 = 14 / 20,
10 -> (10 + 10) / 20 = 20 / 20, 
```

所以所有结果值都是非负的。此外，原始最小值 -10 映射到 to_min = 0，原始最大值 10 映射到 to_max = 1。如果这在您的实现中不起作用，请检查您是否混合了整数类型和浮点类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:49:09.510

您的公式适用于负数。

你有：

*   from_min = -10
*   from_max = 10
*   to_min = 0
*   to_max = 1

将这些代入您的公式：

```
(x - (-10)) * (1 - 0) / (10 - (-10)) + 0 
```

这简化为：

```
(x + 10) / 20 
```

# types - 定义 TypeScript 回调类型

> ID：13137350
> 
> 赞同：218
> 
> 时间：2012-10-30T10:46:20.697
> 
> 标签：types, callback, typescript

我在 TypeScript 中有以下类：

```
class CallbackTest
{
    public myCallback;

    public doWork(): void
    {
        //doing some work...
        this.myCallback(); //calling callback
    }
} 
```

我正在使用这样的类：

```
var test = new CallbackTest();
test.myCallback = () => alert("done");
test.doWork(); 
```

该代码有效，因此它按预期显示一个消息框。

我的问题是：我可以为我的类字段提供任何类型`myCallback`吗？现在，公共字段`myCallback`的类型`any`如上所示。如何定义回调的方法签名？或者我可以将类型设置为某种回调类型吗？或者我可以做这些吗？我必须使用`any`（隐式/显式）吗？

我尝试过这样的事情，但它不起作用（编译时错误）：

```
public myCallback: ();
// or:
public myCallback: function; 
```

我在网上找不到任何解释，所以我希望你能帮助我。

* * *

## 回答 #1

> 赞同：264
> 
> 时间：2012-10-30T10:51:45.260

我刚刚在 TypeScript 语言规范中找到了一些东西，它相当简单。我非常接近。

语法如下：

```
public myCallback: (name: type) => returntype; 
```

在我的示例中，它将是

```
class CallbackTest
{
    public myCallback: () => void;

    public doWork(): void
    {
        //doing some work...
        this.myCallback(); //calling callback
    }
} 
```

作为类型别名：

```
type MyCallback = (name: type) => returntype; 
```

* * *

## 回答 #2

> 赞同：176
> 
> 时间：2013-01-10T01:39:07.477

更进一步，您可以声明一个指向函数签名的类型指针，例如：

```
interface myCallbackType { (myArgument: string): void } 
```

并像这样使用它：

```
public myCallback : myCallbackType; 
```

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2015-10-16T14:52:45.357

您可以声明一个新类型：

```
declare type MyHandler = (myArgument: string) => void;

var handler: MyHandler; 
```

### 更新。

`declare`关键字不是必需的。它应该在 .d.ts 文件或类似情况下使用。

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2012-10-30T10:49:08.073

这是一个示例 - 不接受任何参数并且不返回任何内容。

```
class CallbackTest
{
    public myCallback: {(): void;};

    public doWork(): void
    {
        //doing some work...
        this.myCallback(); //calling callback
    }
}

var test = new CallbackTest();
test.myCallback = () => alert("done");
test.doWork(); 
```

如果你想接受一个参数，你也可以添加它：

```
public myCallback: {(msg: string): void;}; 
```

如果你想返回一个值，你也可以添加：

```
public myCallback: {(msg: string): number;}; 
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2016-07-15T17:40:43.967

如果你想要一个通用函数，你可以使用以下。尽管它似乎没有在任何地方记录。

```
class CallbackTest {
  myCallback: Function;
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-08-07T13:50:58.380

您可以使用以下内容：

1.  类型别名（使用`type`关键字，给函数文字起别名）
2.  界面
3.  函数字面量

* * *

以下是如何使用它们的示例：

```
type myCallbackType = (arg1: string, arg2: boolean) => number;

interface myCallbackInterface { (arg1: string, arg2: boolean): number };

class CallbackTest
{
    // ...

    public myCallback2: myCallbackType;
    public myCallback3: myCallbackInterface;
    public myCallback1: (arg1: string, arg2: boolean) => number;

    // ...

} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2020-01-29T15:59:36.817

我有点晚了，但是，因为前段时间在 TypeScript 中你可以定义回调的类型

```
type MyCallback = (KeyboardEvent) => void; 
```

使用示例：

```
this.addEvent(document, "keydown", (e) => {
    if (e.keyCode === 1) {
      e.preventDefault();
    }
});

addEvent(element, eventName, callback: MyCallback) {
    element.addEventListener(eventName, callback, false);
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-03-26T11:48:27.447

这是我如何定义包含回调的接口的简单示例。

```
// interface containing the callback

interface AmazingInput {
    name: string
    callback: (string) => void  //defining the callback
}

// method being called

public saySomethingAmazing(data:AmazingInput) {
   setTimeout (() => {
     data.callback(data.name + ' this is Amazing!');
   }, 1000)

}

// create a parameter, based on the interface

let input:AmazingInput = {
    name: 'Joe Soap'
    callback: (message) => {
        console.log ('amazing message is:' + message);
    }
}

// call the method, pass in the parameter

saySomethingAmazing(input); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-04-24T09:12:55.223

尝试将回调添加到事件侦听器时，我遇到了同样的错误。奇怪的是，将回调类型设置为 EventListener 解决了它。它看起来比将整个函数签名定义为一种类型更优雅，但我不确定这是否是正确的方法。

```
class driving {
    // the answer from this post - this works
    // private callback: () => void; 

    // this also works!
    private callback:EventListener;

    constructor(){
        this.callback = () => this.startJump();
        window.addEventListener("keydown", this.callback);
    }

    startJump():void {
        console.log("jump!");
        window.removeEventListener("keydown", this.callback);
    }
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-05-13T17:10:26.280

*这是 Angular 组件和服务的可选回调函数示例*

```
 maincomponent(){
        const param = "xyz";
       this.service.mainServie(param, (response)=>{
        if(response){console.log("true");}
        else{console.log("false");}
      })
    }

//Service Component
    mainService(param: string, callback?){
      if(string === "xyz"){
        //call restApi 
        callback(true);
      }
    else{
        callback(false);
      }
    } 
```

# facebook - 以编程方式获取广告数据的最佳方式是什么？（链接和每千次展示费用）

> ID：13137352
> 
> 赞同：2
> 
> 时间：2012-10-30T10:46:24.550
> 
> 标签：facebook, ads

据我了解，广告 API 应该为我提供我想要的信息，但 AFAIK 甚至仅限于广告公司，尽管我只想查询我当前的设置，而不是使用它放置广告。

自动电子邮件似乎是个好主意，但它只是向您发送一个链接，所以我仍然需要登录。

即使登录后，使用网络报告我也无法获得链接，使用超级编辑器我也无法获得 CPM。

我可以下载它们并合并结果，但肯定有更简单的方法（来自网络和电源编辑器的 csvs 也是不同的，一个是逗号分隔的 UTF-8，另一个是制表符分隔的 UCS-2）。

# windows-8 - 如何从桌面应用程序获取 Metro Style 应用程序版本？

> ID：13137354
> 
> 赞同：0
> 
> 时间：2012-10-30T10:46:31.497
> 
> 标签：windows-8, microsoft-metro

如何从桌面应用程序获取已安装的 Metro 应用程序版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:37:53.447

我在这里找到了答案：[http ://weblogs.thinktecture.com/cnagel/2012/10/calling-winrt-from-windows-desktop-apps.html](http://weblogs.thinktecture.com/cnagel/2012/10/calling-winrt-from-windows-desktop-apps.html)

```
var pm = new PackageManager();
IEnumerable<Package> packages = pm.FindPackages();
foreach (var package in packages)
{
    if (package.Id.FullName.Equals("X"))
    {
        Console.WriteLine("Architecture: {0}", package.Id.Architecture.ToString());
        Console.WriteLine("Family: {0}", package.Id.FamilyName);
        Console.WriteLine("Full name: {0}", package.Id.FullName);
        Console.WriteLine("Name: {0}", package.Id.Name);
        Console.WriteLine("Publisher: {0}", package.Id.Publisher);
        Console.WriteLine("Publisher Id: {0}", package.Id.PublisherId);
        Console.WriteLine("Version: {0}.{1}.{2}.{3}", package.Id.Version.Major, package.Id.Version.Minor, package.Id.Version.Revision, package.Id.Version.Build);
        Console.WriteLine();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T23:28:03.420

对维尼修斯的回答稍作修正。版本号的正确顺序是主要、次要、构建（不是修订）、修订。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:06:16.617

我不确定你到底在问什么。但是，如果您在市场上搜索一个刚刚开发的桌面应用程序，或者您可以像在 Windows 7 或 Windows XP 中一样使用和安装桌面应用程序。

# iphone - iOS为拇指调整图像大小？

> ID：13137356
> 
> 赞同：2
> 
> 时间：2012-10-30T10:46:44.723
> 
> 标签：iphone, image-resizing

我对处理图像有点陌生，有很多我不知道的事情，所以请多多包涵。基本上我是用相机拍照，然后把它呈现在里面`UIImageView`，这是 60:80 的小视图。图像会自动调整大小以适应`UIImageView`，一切看起来都很好。

我的问题是 - 我需要做更多的图像操作（为了最大限度地提高效率），还是仅此而已？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T11:17:51.950

请使用以下代码，这将为您提供更好的缩略图

```
 -(UIImage *)generatePhotoThumbnail:(UIImage *)image 
  {
    CGSize size = image.size;
    CGSize croppedSize;
    CGFloat ratio = 120.0;
    CGFloat offsetX = 0.0;
    CGFloat offsetY = 0.0;

     if (size.width > size.height) {
        offsetX = (size.height - size.width) / 2;
        croppedSize = CGSizeMake(size.height, size.height);
     } else 
         {
        offsetY = (size.width - size.height) / 2;
        croppedSize = CGSizeMake(size.width, size.width);
     }

     CGRect clippedRect = CGRectMake(offsetX * -1, offsetY * -1, croppedSize.width, croppedSize.height);
     CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], clippedRect);

     CGRect rect = CGRectMake(0.0, 0.0, ratio, ratio);

     UIGraphicsBeginImageContext(rect.size);
     [[UIImage imageWithCGImage:imageRef] drawInRect:rect];
     UIImage *thumbnail = UIGraphicsGetImageFromCurrentImageContext();
     UIGraphicsEndImageContext();
         CGImageRelease(imageRef);

     return thumbnail;
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T10:59:25.263

`Resize` `image` `function`将会：

```
-(UIImage *)resizeImage:(CGSize)imgSize
  UIGraphicsBeginImageContext(imgSize);
  [image drawInRect:CGRectMake(0,0,imgSize.width,imgSize.height)];
  UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();
  return newImage;
} 
```

`Save``document directory`用调整大小的图像`unique names`。后来`access thumbnail image`从`document directory`。

如果图像计数`more`比使用`lazy loading`图像显示图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:24:50.850

If you are happy with the way the picture is displayed, then you don't need any additional code. Image views have no problems rescaling images for you and they are quite efficient at that, so don't worry about it.

# java - Spring mvc app 和 php 论坛和 wiki 集成

> ID：13137362
> 
> 赞同：2
> 
> 时间：2012-10-30T10:47:21.970
> 
> 标签：java, php, jsp, spring-mvc

我已经在`spring mvc, java, mysql (hibernate)`. 现在客户想要新功能。论坛和维基。

根据过去的经验，我知道有两个不错的，但它们是用 php 完成的，它们要么用于 wiki，`phpbb/mybb/punbb`要么`mediawiki`用于 wiki。

由于我在我的数据库中使用自定义加盐方法保护了加盐密码，我想知道将这两个或这三个集成在一起工作的好方法是什么？

通过一起工作，我的意思是当用户登录 spring mvc 应用程序时，他不应该重新登录以便在论坛或 wiki 上显示登录一次。

现在我不知道从哪里开始，更不用说如何去做了，无论有没有经验的人，一些创意都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:37:58.560

对此的典型答案是建立一个 OpenID 基础设施（基于您的 Spring MVC Web 应用程序及其密码存储）并使用 OpenID 集成来验证论坛和 wiki 应用程序上的用户。

有一个用于 phpbb 的 OpenID[插件](http://sourceforge.net/projects/phpbb-openid/)；MediaWiki 也有一个[插件](http://www.mediawiki.org/wiki/Extension%3aOpenID)。

您可以从互联网上了解 OpenID；[这](http://www.packtpub.com/article/opening-up-to-openid-with-spring-security)是一篇关于将 OpenID 与 Spring Security 结合使用的文章。

# winapi - 是否可以将 WM_INPUT 与 WM_KEYDOWN 消息链接或仅通过设备区分它（WM_KEYDOWNs）？

> ID：13137363
> 
> 赞同：0
> 
> 时间：2012-10-30T10:47:26.260
> 
> 标签：winapi

我在这个领域做了一些研究（通过单个输入设备），发现在大多数情况下，消息是成对发送的，首先是 WM_INPUT，然后是 WM_KEYDOWN。因此，只能将它们链接在一起进行过滤，即 WM_INPUT 标志它对应的 WM_KEYDOWN 不应发送给接收者（在我的情况下，首先我丢弃所有 WM_KEYDOWN 然后决定何时需要将它们发送回他们的收件人）。我只是假设所有下一个 WM_KEYDOWN 都属于最后一个 WM_INPUT。

我的问题正是：我可以认真地依赖这个原则吗？如果我使用多个输入设备，这些消息不会混淆吗？

关于它的可靠性已经存在一些严重的问题： 1\. 我如何区分来自多个设备的重复输入（答案很明显 - 我不能）。2\. 如果来自多个设备的输入，WM_INPUT-WM_KEYDOWN 对会混淆吗？即形成一个像WM_INPUT、WM_INPUT、WM_KEYDOWN、WM_KEYDOWN这样的队伍？

另外也许可以丢弃所有 WM_KEYDOWN 并自己生成所有键盘事件？尽管这在技术上是相当困难的，因为一个 WM_INPUT 可能有多个 WM_KEYDOWN（键重复以这种方式工作，多个 WM_KEYDOWN，一个 WM_KEYUP）。

以防万一，这就是我需要实现的目标：我需要按时间过滤所有消息。所有用户输入都按按键之间的时间间隔过滤。如果以 <50ms 的间隔发送了两条消息，我将丢弃第一条消息并在其 TTL 超过时等待第二条消息，如果是，则将其发送给其收件人。困难在于可以有多个输入设备，并且这些时间会相互混淆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:09:16.673

我了解您的问题有多个设备并且事情变得一团糟。

每个设备都有不同的产品和供应商 ID，所以我建议是根据他们的产品和供应商 ID 来区分它们。

我最近一直在研究 HID 设备，所以这也可能对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:33:12.517

我发现键盘钩子（WH_KEYBOARD）实际上发生在 WM_KEYDOWN 消息之前，无法检查来自多个设备的同时输入是否会打乱 WM_INPUTS 和 KeyboardHook 事件的顺序（如事件序列：Dev0_WM_INPUT Dev1_WM_INPUT Dev0_KBDHook Dev1_KBDHook - altrough 该事件序列将被处理，我担心的是 Dev1_KBDhook 是否会出现在 Dev0_KBDhook 之前或更糟）。

使用 WM_KEYDOWN 这样的混乱是可能的，仍然不知道它是否会与键盘挂钩相同。

无论如何，这是可能的解决方案。在 WM_INPUT 我创建 Message 本身并部分填充，在下一个 KeyboardHookEvent 上我只填充剩余部分。

通常 WM_INPUTs 和 KeyboardHook 事件成对发生，但正如我之前提到的，我不完全知道它是否会搞砸，但即使这样，它是否会保持 KeyboardHookEvents 和 WM_INPUTS 的顺序（如 Dev0_INPUT、Dev1_INPUT 和 Dev0_KBDEvent， Dev1_KBDEvent）它不会给解析这些序列带来麻烦。例如一个堆栈：WM_INPUT 推送新消息结构，KBDEvent 弹出并填充剩余部分。

通常不是很好的解决方案，但我想如果没有其他解决方案就足够了，至少可以部分解决问题。

如果我能够在来自多个设备的同时输入时测试其行为，我将在此处发布信息。尽管我真的怀疑会有任何无法处理的混乱。除非windows随机选择时间发送相应的键盘事件...

忘了提，是的，部分可能丢弃所有输入并手动生成。我只是 PostMessage 手动伪造消息（我从 KeyboardHookEvent 获得 lparam）。但是会带来一些问题。像热键和任何使用 GetAsyncKeyState 的东西都不起作用。就我而言，这是可以接受的。

# spring - 在 Struts 动作类中注入静态引用

> ID：13137364
> 
> 赞同：-1
> 
> 时间：2012-10-30T10:47:26.650
> 
> 标签：spring, struts

我们的应用程序包含 struts 和 spring。Struts 动作类也在 applicationContext.xml 中配置为 spring bean。Spring 类引用使用“属性”连接到动作类。

例如，

**应用程序上下文.xml**

```
<bean id="sampleAction" class="com.arizona.sample.action.SampleAction">
    <property name="sampleManager" ref="sampleManager" />
</bean> 
```

在 SampleAction 中，我必须编写一个使用“sampleManager”引用的静态方法。因此，我已将“sampleManager”配置为静态变量。在运行时，我在使用“sampleManager”的地方得到了一个 NullPointerExcpetion。我的结论是“sampleManager”没有被初始化。

任何人都可以在这方面帮助我吗？

PS：我提供了 setSampleManager(..) 并尝试使用 @Autowired。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:33:39.183

如果您发现自己试图从静态上下文（方法）与固有的非静态对象（sampleManager）进行交互，那么您的设计存在一些根本缺陷。返回并重构您的解决方案以采用正确的 OO 设计，不要试图用一些丑陋的 hack 来修复它。

# go - 如何将 int 更改为 int64？

> ID：13137365
> 
> 赞同：131
> 
> 时间：2012-10-30T10:47:28.473
> 
> 标签：go

我试图在 go 中将整数转换为 integer64，但我没有运气。任何人都知道一个简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2012-10-30T10:51:40.630

这称为[类型转换](http://golang.org/doc/effective_go.html#conversions)：

```
i := 23
var i64 int64
i64 = int64(i) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-11-18T12:54:50.293

这可能很明显，但最简单：

```
i64 := int64(23) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-18T03:58:16.533

```
i := 23
i64 := int64(i)
fmt.Printf("%T %T", i, i64) // to print the data types of i and i64 
```

# jquery - 如何使此滑块自动滑动？

> ID：13137367
> 
> 赞同：-1
> 
> 时间：2012-10-30T10:47:39.800
> 
> 标签：jquery, css, jquery-plugins, jquery-selectors

我在我的一个网站中使用了[responsiveslidercss3](http://csscience.com/responsiveslidercss3/index.html)滑块。但是你可以看到这个滑块没有自动滑动选项意味着滑块不是自动滑动。要滑动，您必须单击箭头或按钮之一。我想让它自动滑动。那么有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:50:37.670

**没有 Javascript 的**响应式 CSS3 滑块

 **找到一个不同的滑块。Autoslide 需要 javascript，它不能单独使用 CSS 来完成。**

# windows-runtime - 在winrt中沿Y轴旋转对象

> ID：13137369
> 
> 赞同：0
> 
> 时间：2012-10-30T10:47:50.387
> 
> 标签：windows-runtime

如何在 Y 轴上旋转矩形，CompositeTransform 和 Rotate Transform 只有 X 轴旋转方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:19:17.583

使用 Projection 属性并分配一个 PlanarProjection 值。当您在 Blend 中编辑它时，它非常靠前和居中。

编辑*示例

```
<TextBlock
    Text="Hello"
    FontSize="96"
    HorizontalAlignment="Center"
    VerticalAlignment="Center">
    <TextBlock.Projection>
        <PlaneProjection
            RotationY="45"/>
    </TextBlock.Projection>
</TextBlock> 
```

# error-handling - 如何让 Xlib 打印错误信息，但不退出？

> ID：13137372
> 
> 赞同：1
> 
> 时间：2012-10-30T10:48:04.563
> 
> 标签：error-handling, xlib

“默认处理程序的操作是打印解释性消息并退出。” [（关联）](http://tronche.com/gui/x/xlib/event-handling/protocol-errors/default-handlers.html)

此类消息的示例：

```
X Error of failed request:  BadWindow (invalid Window parameter)
  Major opcode of failed request:  12 (X_ConfigureWindow)
  Resource id in failed request:  0xc0007a
  Serial number of failed request:  140
  Current serial number in output stream:  141 
```

如果我设置（XSetErrorHandler）我自己的“忽略一切”错误处理程序，“解释性消息”就会消失。

如何让 Xlib 忽略错误，但仍然打印错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-08-10T16:55:49.803

如果您真的想要这些错误消息，您几乎有两种选择：

*   连同一些私有头文件一起`_XPrintDefaultError`退出（`XlibInt.c`以及使用库私有定义的所有注意事项）。
*   重新定义在调用它`exit()`时不实际退出。`_XDefautError`

两者都不是特别漂亮，两者都可能破坏并降低您的便携性，但它们确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:58:06.957

您必须格式化自己的消息。消息的内容是 XErrorEvent 结构的内容：

[http://tronche.com/gui/x/xlib/event-handling/protocol-errors/default-handlers.html](http://tronche.com/gui/x/xlib/event-handling/protocol-errors/default-handlers.html)

# php - 在不直接接触核心文件本身的情况下，用 PHP 重构一行代码

> ID：13137376
> 
> 赞同：0
> 
> 时间：2012-10-30T10:48:15.917
> 
> 标签：php, timthumb

我在我的网站上使用了一个名为 timthumb.php 的小 PHP 脚本。该脚本即时裁剪和调整图像大小，并`cache`在与脚本相同的位置创建一个文件夹，用于存储新图像。

是否有可能在 PHP 中以某种方式在另一个文件中编写一行代码，该文件可以替换定义“缓存”文件夹位置的 timthumb.php 中的代码行？

我查看了 timthumb.php，第 40 行如下：

```
if(! defined('FILE_CACHE_DIRECTORY')) define ('FILE_CACHE_DIRECTORY', './cache'); 
```

我已经尝试将最后一部分`./cache`更改为例如`../../../uploads`，这很好。我这样做的唯一保留是如果/当下次更新 timthumb.php 时它会丢失，所以我想知道是否可能有另一种解决方案。

对不起，如果这是一个愚蠢的问题。我是 PHP 新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T10:50:34.880

在加载的脚本中，`timthumb.php`在调用`include`.

```
define ('FILE_CACHE_DIRECTORY', './cache') 
```

并更改`./cache`为您想要缓存的位置。

**说明：** 脚本检查常量`FILE_CACHE_DIRECTORY`是否由您定义，如果不是，它将使用默认值 ( `./cache`)。

# excel - 将十六进制数转换为十进制数

> ID：13137379
> 
> 赞同：-1
> 
> 时间：2012-10-30T10:48:21.773
> 
> 标签：excel

当我在我的 excel 单元格中输入 15 位数字时，它会将其转换为`1.002E+15`. 我如何将其恢复为 15 位数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T10:51:36.903

这只是一个显示问题，您的号码不会被转换。

右键单击单元格，选择“格式化单元格...”，选择“数字”，就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:51:15.050

*   只需右键单击单元格
*   选择`Format Cells...`
*   在数字选项卡中，选择类别中的数字
*   并单击`OK`。

此外，如果您不想要，您可以将 Decimal places: 设置为 0。

# java - 保存它的最佳方法是什么？（保存应用程序生成的数据）

> ID：13137380
> 
> 赞同：-1
> 
> 时间：2012-10-30T10:48:24.550
> 
> 标签：java, database, file

我有这段代码，我想保存生成的数据，但我不知道如何，一个数据库？一份文件？我是否需要在代码中尝试一切并重新开始？

我来自巴西，所以变量和字符串是葡萄牙语的，但我猜编码的方式是通用的，所以任何改进代码的技巧都会很棒，我还没有完成，但这不是问题。

```
package sistema_academico;

import javax.swing.JOptionPane;

public class Sistema_Academico
{
    static Aluno Aluno[] = new Aluno[100];
    static Professor Professor[] = new Professor[100];
    static int idA = 0;
    static int idP = 0;

    public static void main(String[] args)
    {
        boolean bSair = true;

            do
            {
                    int nOption = 0;
                    String sEntrada = "";
                    String sConcatenar = "";
                    try
                    {
                     nOption = Integer.parseInt(JOptionPane.showInputDialog("0 - Sair \n" +
                                                    "1 - Cadastrar Aluno \n" +
                                                    "2 - Cadastrar Professor \n" +
                                                    "3 - Pesquisar Aluno \n" +
                                                    "4 - Pesquisar Professor \n" +
                                                    "5 - Alterar Aluno \n" +
                                                    "6 - Alterar Professor \n" +
                                                    "7 - Excluir Aluno \n" +
                                                    "8 - Excluir Professor \n"));
                    }
                    catch(Exception NumberFormat)
                    {

                    }
                     switch (nOption)
                    {           
                    case 1: JOptionPane.showMessageDialog(null, "Cadastrar Aluno");     
                        sEntrada = "";
                        sConcatenar = "";

                        sEntrada = JOptionPane.showInputDialog("Nome: ") + "_";
                        sConcatenar = sEntrada;

                        sEntrada = JOptionPane.showInputDialog("Endereço: ") + "_";
                        sConcatenar += sEntrada;

                        sEntrada = JOptionPane.showInputDialog("Curso: ") + "_";
                        sConcatenar += sEntrada;

                        sEntrada = JOptionPane.showInputDialog("RA: ") + "_";
                        sConcatenar += sEntrada;

                        CadastrarAluno(sConcatenar);

                        break;

                    case 2: JOptionPane.showMessageDialog(null, "Cadastrar Professor");
                        sEntrada = "";
                        sConcatenar = "";

                        sEntrada = JOptionPane.showInputDialog("Nome: ") + "_";
                        sConcatenar = sEntrada;

                        sEntrada = JOptionPane.showInputDialog("Endereço: ") + "_";
                        sConcatenar += sEntrada;

                        sEntrada = JOptionPane.showInputDialog("Curso: ") + "_";
                        sConcatenar += sEntrada;

                        sEntrada = JOptionPane.showInputDialog("Registro: ") + "_";
                        sConcatenar += sEntrada;

                        sEntrada = JOptionPane.showInputDialog("Materia: ") + "_";
                        sConcatenar += sEntrada;

                        CadastrarProfessor(sConcatenar);                    

                        break;

                    case 3: JOptionPane.showMessageDialog(null, "Pesquisar Aluno");
                        sEntrada = "";

                        sEntrada = JOptionPane.showInputDialog("Pesquisar RA:");
                        JOptionPane.showMessageDialog(null, PesquisarAluno(sEntrada));

                        break;

                    case 4: JOptionPane.showMessageDialog(null, "Pesquisar Professor");
                        sEntrada = "";

                        sEntrada = JOptionPane.showInputDialog("Pesquisar Registro:");
                        JOptionPane.showMessageDialog(null, PesquisarProfessor(sEntrada));

                        break;

                    case 5: JOptionPane.showMessageDialog(null, "Alterar Aluno");

                        break;

                    case 6: JOptionPane.showMessageDialog(null, "Alterar Professor");

                        break;

                    case 7: JOptionPane.showMessageDialog(null, "Excluir Aluno");

                        break;

                    case 8: JOptionPane.showMessageDialog(null, "Excluir Professor");

                        break;

                    case 0:
                        bSair = false;
                        break;

                    default:
                        JOptionPane.showMessageDialog(null, "Opção Invalida");
                        break;
                    }
            }while(bSair);
    }// Metodo Principal

    public static void CadastrarAluno(String Al)
    {   
        idA++;
        String array[] = Al.split("_");
        Aluno[idA] = new Aluno();
        Aluno[idA].setNome(array[0]);
        Aluno[idA].setEndereco(array[1]);       
        Aluno[idA].setCurso(array[2]);
        Aluno[idA].setRA(array[3]);     
    }

    public static void CadastrarProfessor(String Pf)
    {
        idP++;
        String array[] = Pf.split("_");
        Professor[idP] = new Professor();
        Professor[idP].setNome(array[0])    ;
        Professor[idP].setEndereco(array[1]);
        Professor[idP].setCurso(array[2]);
        Professor[idP].setRegistro(array[3]);
        Professor[idP].setMateria(array[4]);
    }

    public static String PesquisarAluno(String RA)
    {
        for(int i = 0; i < idA; i++)
        {
            if(Aluno[idA].getRA().equals(RA))
            {
                return Aluno[idA].getNome();
            }
        }
        return "RA não Cadastrado";
    }

    public static String PesquisarProfessor(String RE)
    {
        for(int i = 0; i < idP; i++)
        {
            if(Professor[idP].getRegistro().equals(RE))
            {
                return Professor[idP].getNome();
            }
        }
        return "Registro não Cadastrado";
    }

    public static void AlterarAluno(String Al)
    {

    }

    public static void AlterarProfessor(String Pf)
    {

    }

    public static void ExcluirAluno(String Al)
    {

    }

    public static void ExcluirProfessor(String Pf)
    {

    }
}// Classe Principal 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:27:38.167

我看到您将所有变量和方法声明为“静态”，当您尝试在不同环境中调用方法时可能会导致严重问题。首先确保它们在您的情况下是独一无二的。

如果您想存储代码生成的所有值，我建议使用数据库来记录所有输出。

1.  为教授等创建表（如果您在这里有多个表），属性如：姓名，课程，...。（你知道还剩下什么）

2.  在他们每个人之间建立关系

3.  使用 mySQL 将生成的数据插入到相关表中。

希望这可以帮助 ：）

# php - 如何通过带有 Doctrine2 DQL 的关联表获取远程表 ID

> ID：13137393
> 
> 赞同：0
> 
> 时间：2012-10-30T10:49:28.790
> 
> 标签：php, doctrine, doctrine-orm, foreign-keys, dql

我有以下模型，其中包含 2 个表`foo`以及它们之间`bar`的`foo_has_bar`关联：

![在此处输入图像描述](../Images/df0dd99016995d27f1d0e3f649880e43.png)

对于给定的，我试图获得`foo.id`所有相应`bar.id`的 's。

到目前为止，我已经能够检索`foo_has_bar`与特定相关的所有条目，`foo.id`如下所示：

```
$query = $em->createQuery("SELECT h FROM 'FooHasBar' h INNER JOIN h.foo f WHERE f.id = ?1");
$query->setParameter(1, $foo_id);
$results = $query->getArrayResult(); 
```

问题是`$results`它只包含`id`字段`foo_has_bar`，而不是外键`foo_id`和`bar_id`，因此我无法实现我想要的。

**有没有办法，给定一个特定的用单个 DQL 命令`foo.id`检索所有相应的 's？`bar.id`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:57:47.417

假设实体分别与和`FooHasBar`具有关系`foo`和关系，则查询非常简单：`bar``Foo``Bar`

```
$q = $em->createQuery(
    'SELECT 
        b.id as bar_id, f.id as foo_id 
    FROM FooHasBar fb 
    JOIN fb.bar b 
    JOIN fb.foo f 
    WHERE f.id = :fooId'
);
$q->setParameter( 'fooId', $foo->getId() );

$results = $query->getArrayResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:03:14.457

如果实体之间的关联是双向的：

```
$q = $em->createQuery( 'SELECT b.id FROM Bar b JOIN b.fooHasBar x WHERE x.foo = :fooId' );
$q->setParameter( 'fooId', $foo->getId() );

$results = $query->getScalarResult(); 
```

如果实体之间的关联是单向的（这只适用于 Doctrine 2.3+）：

```
$q = $em->createQuery( 'SELECT b.id FROM Bar b JOIN FooHasBar x WITH x.bar = b.id WHERE x.foo = :fooId' );
$q->setParameter( 'fooId', $foo->getId() );

$results = $query->getScalarResult(); 
```

# gmail - 删除附件

> ID：13137395
> 
> 赞同：0
> 
> 时间：2012-10-30T10:49:31.523
> 
> 标签：gmail

附件在邮件底部显示如下...

```
3 attachments — Download all attachments  
    Summary_JUNE2012_02057.pdf
12K   View Download  
    S_NO_XXXXXX5_02012_03223.pdf
12K   View Download  
    important.pdf
73K   View Download 
```

如何删除所有附件但保留邮件？我只想存档邮件文本而不是附件。这将帮助我节省空间，而不会丢失在某些情况下比附加文件重要的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:12:39.367

我只有一种方法可以做到这一点。将相同的电子邮件转发给自己，不带附件，然后删除之前有附件的电子邮件。

# jquery - 格式化和附加文本框

> ID：13137396
> 
> 赞同：2
> 
> 时间：2012-10-30T10:49:31.993
> 
> 标签：jquery, asp.net, textbox

我正在努力允许在我的网站上格式化消息。基本上，我的粗体、斜体、下划线等按钮将在我的文本框中的文本上附加 [b][/b]、[i][/i]、[u][/u] 等标签。

我什至没有看过格式化突出显示的文本，因为我不知道如何检测文本框中的哪些文本被突出显示......

目前我正在处理附加部分......

```
<tr>
    <td></td>
    <td>
        <div class="button style" id="btnBold"><b>B</b></div>
    </td>
</tr>
<tr>
    <td></td>
    <td><asp:TextBox runat="server" ID="txtMailMessage" TextMode="MultiLine" Width="430" Height="100"></asp:TextBox></td>
</tr>

<script type="text/javascript">
    //
    // TEXT STYLE BUTTONS
    //
    $("#btnBold").click(function () {
        var textbox = $("#<%= txtMailMessage.ClientID %>");
        textbox.text(textbox.text + "[b][/b]");
    });
</script> 
```

在我看来，这在理论上是可行的......
我用这段代码得到的是将当前文本保留在文本框中，然后添加标签。

如果我在文本框为空时尝试它，我会得到以下结果：

```
function (a) {
    return p.access(this, function(a) {
        return a===b ? p.text(this) : this.empty().append((this[0] && this[0].ownerDocument || e).createTextNode(a))
    }, null, a, arguments.length)
} 
```

如果文本框中已经有文本，则单击根本不执行任何操作...

任何人都可以帮助我进行附加（主要）并就控件中选定文本的格式提供一些指导吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T10:54:17.527

而不是这样做：

```
textbox.val(textbox.val() + "[b][/b]"); 
```

您是否尝试在文本周围放置标签？如果你想在你的文本框中格式化你的文本，你应该这样做：

```
textbox.val("[b]" + textbox.val() + "[/b]"); 
```

如果您想在所选文本周围放置标签，或者如果未选择任何内容，则附加，您可以创建一个 javascript 函数来为您执行此操作。这是代码：

```
function addTagsToSelectedText(e) {
    var yourInputText = $("#yourtext");
    //Here you get the start of the selection
    var ss = yourInputText[0].selectionStart;
    //Here you get the end of the selection
    var se = yourInputText[0].selectionEnd;

    var text = yourInputText.val();
    //if there are no selections just append.
    if (ss == se)
        yourInputText.val(text + "[b][/b]");
    else
        yourInputText.val(text.substr(0, ss) + "[b]" + text.substr(ss, se) + "[/b]" + text.substring(se, text.length));
} 
```

您需要将此函数用作 mousedown 事件的处理程序。那是因为当您单击一个按钮时，您会失去对其他元素的选择。因此，您将在鼠标按下时使用它，而选择仍处于活动状态：

```
<button onmousedown="addTagsToSelectedText(event)">click</button> 
```

我希望它有所帮助。

# sql-server - sql server 选择查询

> ID：13137397
> 
> 赞同：0
> 
> 时间：2012-10-30T10:49:42.300
> 
> 标签：sql-server

当我`SELECT`在 SQL Server Management Studio 中运行具有`WHERE`子句且数据库位于网络上的查询时，查询是在服务器还是我的台式 PC 上“运行”，例如。整个表会从服务器中取回，然后在我的 PC 上进行过滤，还是在服务器上进行过滤？

如果我使用 MS Access 对（远程）数据库运行查询，这种行为会有所不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:52:33.767

每个数据库都有它的数据库引擎来处理所有的请求。因此，当您连接到数据库服务器时，它会打开一个通道并接受带有参数的请求，然后执行所有内务处理并将所需的结果返回给您。它只返回查询的结果，并且发生在服务器上。

# objective-c - NSTimer vs NSThread 使用 AFNetworking 进行递归调用

> ID：13137398
> 
> 赞同：0
> 
> 时间：2012-10-30T10:49:45.700
> 
> 标签：objective-c, ios, nstimer, afnetworking, nsthread

我的基本要求是每 5 秒轮询一次服务器并获取一些数据。无论如何，此活动不应冻结/影响 UI。数据将对 UI 进行少量更新。

对服务器的调用是使用 AFNetworking 进行的。我会更喜欢 NSThread 而不是 NSTimer 但我很困惑，因为 AFNetworking 使异步调用后端，我真的需要一个单独的线程吗？

我不希望应用程序（IPOD/IPAD 应用程序）的整体性能受到影响。应该首选哪种方式？

# java - 尝试呈现 pdf 时获取此“org.xhtmlrenderer.render.BlockBox 无法转换为 org.xhtmlrenderer.newtable.TableBox”

> ID：13137401
> 
> 赞同：2
> 
> 时间：2012-10-30T10:50:10.957
> 
> 标签：java, playframework, pdf-generation, playframework-1.x, flying-saucer

我在尝试渲染 pdf 时收到此错误。我正在将 Nicolas Leroux 的 PDF 模块用于播放框架。

这是整个堆栈跟踪：[Pastebin](http://pastebin.com/PuDgnGs9)。谷歌搜索仅显示 4 个结果。他们建议删除我已删除的任何浮动属性和位置属性，只是试一试。我仍然面临这个问题。有没有人能够解决这个问题？

编辑：这是呈现 pdf 的 html：

```
#{extends 'main.html' /} #{set title:'Salary Details' /}
<html>
<head>
<title>Employee Name</title>
<style>
body {
    font: 9pt Arial, Helvetica, sans-serif;
}

.container {
    margin: 0 auto;
    width: 1000px;
    border: 1px solid black;
    padding: 12px;
}

.logoClass {
    width: 200px;
    height: 85px;;
}

.companyAddressClass {
    width: 60%;
    margin: 0 auto;
    font-size: 17px;
    font-weight: bold;
    text-align: center;
}

.empClass table {
    width: 100%;
    border: 1px solid #ccc;
    border-collapse: collapse;
    margin: 10px 0px;
}

.empClass table th,td {
    border: 1px solid #ccc;
    padding: 5px 5px;
}

.empClass table th {
    background: #f2f2f2;
}
</style>
</head>

<body onload="window.print();">

    %{for(int i=0;i<dataList.size ();i=i+1){}%
    <div class="container" style="page-break-after:#{if i == dataList.size()-1} avoid;#{/if} #{else} always; #{/else}">
    <div class="logoClass"></div>
    <div class="companyAddressClass">
        ${dataList.get(i).distributorName},<br /> ${dataList.get(i).city},<br />
        ${dataList.get(i).state} <br /> <br /> <span>Payslip for the
            month of ${dataList.get(i).salaryMonth}</span>
    </div>
    <br class="clear" />
    <div class="empClass">
        <table border="1">
            <tr>
                <td>Employee No: ${dataList.get(i).employeeNumber}</td>
                <td>Location: ${dataList.get(i).location}</td>
            </tr>
            <tr>
                <td>Name: ${dataList.get(i).employeeName}</td>
                <td>Salary for the M/O: ${dataList.get(i).salaryMonth}</td>
            </tr>
            <tr>
                <td>Bank Name: ${dataList.get(i).bankName}</td>
                <td>Designation: ${dataList.get(i).designation}</td>
            </tr>
            <tr>
                <td>Bank Acc No: ${dataList.get(i).accountNumber}</td>
                <td>Join Date: ${dataList.get(i).joinDate}</td>
            </tr>
            <tr>
                <td>PF No: ${dataList.get(i).pfNumber}</td>
                <td>Gender: ${dataList.get(i).gender}</td>
            </tr>
            <tr>
                <td>ESI No: ${dataList.get(i).esiNumber}</td>
                <td>LOP: ${dataList.get(i).lop}</td>
            </tr>
            <tr>
                <td>PAN No: ${dataList.get(i).panNumber}</td>
                <td>Days Worked: ${dataList.get(i).daysWorked}</td>
            </tr>
        </table>
    </div>
    <br />
    <div class="empClass">
        <table border="1">
            <tr>
                <th colspan="3">Earnings</th>
                <th colspan="2">Deductions</th>
            </tr>
            <tr>
                <th align="left">Header</th>
                <th align="right">Actual</th>
                <th align="right">Paid</th>
                <th align="left">Header</th>
                <th align="right">Paid</th>
            </tr>
            <tr>
                <td>Basic</td>
                <td align="right">${dataList.get(i).basic}</td>
                <td align="right">${dataList.get(i).basic}</td>
                <td>PF</td>
                <td align="right">${dataList.get(i).pf}</td>
            </tr>
            <tr>
                <td>HRA</td>
                <td align="right">${dataList.get(i).hra}</td>
                <td align="right">${dataList.get(i).hra}</td>
                <td>ESICEE</td>
                <td align="right">${dataList.get(i).esicee}</td>
            </tr>
            <tr>
                <td>Conveyance Allowance</td>
                <td align="right">${dataList.get(i).conveynanceAllowance}</td>
                <td align="right">${dataList.get(i).conveynanceAllowance}</td>
                <td>ESICEE(PWS)</td>
                <td align="right">${dataList.get(i).esiceePWS}</td>
            </tr>
            <tr>
            <td>Medical Allowance</td>
                <td align="right">${dataList.get(i).medicalAllowances}</td>
                <td align="right">${dataList.get(i).medicalAllowances}</td>
                <td>PT</td>
                <td align="right">${dataList.get(i).pt}</td>
            </tr>
            <tr>
                <td>Special Allowance</td>
                <td align="right">${dataList.get(i).specialAllowance}</td>
                <td align="right">${dataList.get(i).specialAllowance}</td>
                <td>PT(PWS)</td>
                <td align="right">${dataList.get(i).ptPWS}</td>
            </tr>
            <tr>
                <td>Incentives</td>
                <td align="right">${dataList.get(i).midMonthAmountPWS}</td>
                <td align="right">${dataList.get(i).midMonthAmountPWS}</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td>Other Allowances</td>
                <td align="right">${dataList.get(i).otherAllowance}</td>
                <td align="right">${dataList.get(i).otherAllowance}</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td colspan="3" align="right">Total
                    Earnings:${dataList.get(i).totalEarnings}</td>
                <td colspan="2" align="right">Total Deduction
                    :${dataList.get(i).totalDeduction}</td>
            </tr>
            <tr>
                <td colspan="3">&nbsp;</td>
                <td colspan="2" align="right"><strong>Salary Credited
                        : ${dataList.get(i).salaryCredited}</strong></td>
            </tr>
        </table>

        <table>
        <thead>
            <tr>
                <th>Position Title</th>
                <th>City Name</th>
                <th>State Name</th>
            </tr>
        </thead>
        <thead>
            <tr>
                ..
                ..
                ..
                ..
                <th>${dataList.get(i).positionTitle}</th>
                <th>${dataList.get(i).cityName}</th>
                <th>${dataList.get(i).stateName}</th>
            </tr>
        </thead>
    </table>
    <br>
        <table>
        <thead>
            <tr>
                <th>Some Header</th>
                <th>Some Header</th>
                <th>Some Header</th>
                <th>Some Header</th>

            </tr>
        </thead>
        <tbody>
            <tr>
                <td align="center">Values</td>
                ..
                ..
                ..
                ..
                ..
            </tr>
        </tbody>
    </table>
    </div>
    <div>
        <span style="font-size: 15px; font-weight: bold;"> Salary
            Credited Amount(In Words): ${dataList.get(i).salaryCreditedInWord} </span>
    </div>
    </div>
    <br />
    <br />

    %{}}% 
</body>
</html> 
```

我正在使用 Windows 7 和 Tomcat6 作为测试环境，[这里](https://code.google.com/p/flying-saucer/issues/detail?id=144)的人们面临着同样的环境。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-06-16T13:39:23.183

[此提交](https://github.com/pepite/play--pdf/issues/28)可以解决您的问题。您可以[下载整个类](https://raw.githubusercontent.com/philcali/flyingsaucer/e653850a67b06a08364030a51e5ae4a855213016/flying-saucer-core/src/main/java/org/xhtmlrenderer/layout/BoxCollector.java)并将其放入源代码中，因此您无需重新构建库 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-24T15:12:27.617

如果您遇到此问题，要解决此问题，只需在 td 内添加一个 span 标签并将样式添加到该 span 标签。例子：

```
<td>
<span style = style="position: absolute;">
</td> 
```

基本上，如果您将样式添加到 td，您会因为飞碟 pdf 中的错误而收到错误。

# java - 如何使用 Java 中的新 API 迁移 Fusion Tables SQL API

> ID：13137403
> 
> 赞同：2
> 
> 时间：2012-10-30T10:50:15.237
> 
> 标签：java, google-fusion-tables

我在 Java 语言中使用 Fusion Table SQL API，应用程序托管在 Google App 引擎中。应用程序正在通过 Java 语言在融合表中添加和删除记录。但是 Fusion Tables SQL API 已于 2012 年 6 月 26 日正式弃用，并将于 2012 年 12 月 26 日关闭。因此，我必须使用新 API 迁移 Fusion Tables SQL API。

我的问题是如何使用 Java 中的新 API 迁移 Fusion Tables SQL API？

我当前的脚本是

```
import com.google.gdata.client.ClientLoginAccountType;
    import com.google.gdata.client.GoogleService;
    import com.google.gdata.client.Service.GDataRequest;
    import com.google.gdata.client.Service.GDataRequest.RequestType;

    import com.google.gdata.util.AuthenticationException;
    import com.google.gdata.util.ContentType;
    import com.google.gdata.util.ServiceException;

    import java.io.IOException;
    import java.net.URL;
    import java.net.URLEncoder;
    import java.util.Scanner;
    import java.util.regex.MatchResult;
    import java.util.regex.Pattern;

    public class SampleProgram {

      private static final String SERVICE_URL = "https://www.google.com/fusiontables/api/query";

      private static final Pattern CSV_VALUE_PATTERN = Pattern.compile("([^,\\r\\n\"]*|\"(([^\"]*\"\")*[^\"]*)\")(,|\\r?\\n)");

      private GoogleService service;

      public SampleProgram(String email, String password) throws AuthenticationException 
      {
        service = new GoogleService("fusiontables", "fusiontables.ApiExample");
        service.setUserCredentials(email, password, ClientLoginAccountType.GOOGLE);
      }

      public String GetrunSelectQuery(String selectQuery) throws IOException,ServiceException 
      {
          URL url = new URL(SERVICE_URL + "?sql=" + URLEncoder.encode(selectQuery, "UTF-8"));
            GDataRequest request = service.getRequestFactory().getRequest(RequestType.QUERY, url, ContentType.TEXT_PLAIN);

            request.execute();
            String decoded="";
            Scanner scanner = new Scanner(request.getResponseStream(),"UTF-8");
            while (scanner.hasNextLine()) {
              scanner.findWithinHorizon(CSV_VALUE_PATTERN, 0);
              MatchResult match = scanner.match();

              String quotedString = match.group(2);
              decoded = quotedString == null ? match.group(1): quotedString.replaceAll("\"\"", "\"");

            }
            return decoded;
      }

      public static void main(String[] args) throws ServiceException, IOException 
      {

        String tableEncryptedID="XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX";
        String sEmailId="XXXX@XXXXX.com";
        String sPassword="XXXXXXXXX";
        SampleProgram obj = new SampleProgram(sEmailId, sPassword);

        System.out.println(obj.GetrunSelectQuery("select name from "+tableEncryptedID+" limit 1"));

      }
    } 
```

# javascript - jquery，滚动时在某个位置找到div类名

> ID：13137404
> 
> 赞同：2
> 
> 时间：2012-10-30T10:50:21.393
> 
> 标签：javascript, jquery

固定的 div ( `fixed_div`) 位于顶部以在其中显示 Google 地图。然后一个大 div ( `big_div`) 留在它下面。大 div 里面有许多带有 class 的小 div `small_div`。每个小 div 都有一个 id `small_div_n`，其中 n=0,1,2,3.. 连续。大 div 在固定 div 下方滚动。

HTML：

```
<div class="fixed_div" >
</div><!-- end of class fixed_div -->

<div class="big_div">
    <div class="small_div" id="small_div_0">
    </div><!--end of class small_div -->
    <div class="small_div" id="small_div_1">
    </div><!--end of class small_div -->
    <div class="small_div" id="small_div_2">
    </div><!--end of class small_div -->
</div><!--end of class big_div --> 
```

CSS：

```
.fixed_div {
  position:fixed;
  height:100px;
}

.big_div {
  padding-top:100px;
}

.small_div {
  min-height:80px;
} 
```

小 div 具有可变的高度属性。

如果我能够知道一个新的`small_div`已经到达固定div的下部，我可以找到`id`小div的对应，并且可以通过ajax调用了解在固定div中显示哪个google map。

如何感知一个新的`small_div`已经到达固定div的下部？

**编辑**：大 div 有一个`min-height`属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T09:16:07.010

```
<script>
(function() {
    var fixed = $('div.fixed_div');
    $(window).on('scroll',function() {
    var currentFixedDivPosition = fixed.position().top + fixed.height() + $(window).scrollTop();
    var temp, whichOne;
        $('div.small_div').each(function(i,s) {
        var diff = Math.abs($(s).position().top - currentFixedDivPosition);
            if(temp) {
                    if(diff < temp) {
                        temp = diff;
                        whichOne = s;
                    }
            }else {
                temp = diff;
                whichOne = s;
            }           
        });
        console.log(temp, $(whichOne).attr('id') + ' was closest');
    });
})();
</script> 
```

这是一个小提琴： http: [//jsfiddle.net/s3JKk/](http://jsfiddle.net/s3JKk/) ，我不确定我是否正确理解了你想要的东西，但我希望这至少会给你一些开始。：） 祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-07T21:58:01.447

希望以下代码能够达到目的，

1.  我添加了一个代码来动态地将一个小的 DIV 元素附加到一个 big_div 元素
2.  然后我添加了一个事件监听器，它检测到 big_div 的任何新条目

```
// the system will append a new DIV when the button is clicked
document.getElementById("add").addEventListener("click", function(){
  addDiv();
});

// an event listener which listenes to any new added element to big_div
$('#big_div').on('DOMNodeInserted', function(e) {
    // here I am getting the id of the last added element
    var newdivid = document.getElementById("big_div").lastChild.id;
    document.getElementById("div_status").innerHTML = "new small div added, id: " + newdivid;    
});

function addDiv() {
  var smalldiv = document.createElement("div");
  // here I am setting the id of the newly created DIV to any random string
  smalldiv.setAttribute("id", Math.random().toString(36).slice(-5));
  smalldiv.appendChild(document.createTextNode("small div"));
  document.getElementById("big_div").appendChild(smalldiv);
}
```

```
.fixed_div {
  position:fixed;
  height:100px;
}

.big_div {
  padding-top:100px;
}

.small_div {
  min-height:10px;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div class="fixed_div" >
  fixed div
  <p id="div_status">No Status</p>
</div><!-- end of class fixed_div -->

<div class="big_div" id="big_div">
    <div class="small_div" id="small_div_0">
      div 0
    </div><!--end of class small_div -->
</div><!--end of class big_div -->  
<button type="button" id="add">Add Small DIV</button>
```

# java - 使用带有 POP3 协议的 javamail 检索所有未读电子邮件

> ID：13137405
> 
> 赞同：38
> 
> 时间：2012-10-30T10:50:29.213
> 
> 标签：java, jakarta-mail, pop3

我正在尝试访问我的 gmail 帐户并从中检索所有未读电子邮件的信息。

在参考了许多链接后，我已经编写了我的代码。我提供了一些链接供参考。

[使用 Java 通过 GMail 帐户发送和接收电子邮件](http://buddhimawijeweera.wordpress.com/2011/02/09/sendreceiveemailsjava/)

[使用 JavaMailAPI 接收邮件的 Java 代码](http://metoojava.wordpress.com/2010/03/21/java-code-to-receive-mail-using-javamailapi/)

为了测试我的代码，我创建了一个 Gmail 帐户。所以我收到了来自 Gmail 的 4 条消息。我在检查邮件数量后运行我的应用程序。这显示了正确的结果。4 封未读邮件。正在显示所有信息（例如日期、发件人、内容、主题等）

然后我登录到我的新帐户，阅读其中一封电子邮件并重新运行我的应用程序。现在未读消息的计数应该是 3，但它显示“未读消息数：0”

我在这里复制代码。

```
public class MailReader

{

    Folder inbox;

    // Constructor of the calss.

    public MailReader() {
        System.out.println("Inside MailReader()...");
        final String SSL_FACTORY = "javax.net.ssl.SSLSocketFactory";

        /* Set the mail properties */

        Properties props = System.getProperties();
        // Set manual Properties
        props.setProperty("mail.pop3.socketFactory.class", SSL_FACTORY);
        props.setProperty("mail.pop3.socketFactory.fallback", "false");
        props.setProperty("mail.pop3.port", "995");
        props.setProperty("mail.pop3.socketFactory.port", "995");
        props.put("mail.pop3.host", "pop.gmail.com");

        try

        {

            /* Create the session and get the store for read the mail. */

            Session session = Session.getDefaultInstance(
                    System.getProperties(), null);

            Store store = session.getStore("pop3");

            store.connect("pop.gmail.com", 995, "abc@gmail.com",
                    "paasword");

            /* Mention the folder name which you want to read. */

            // inbox = store.getDefaultFolder();
            // inbox = inbox.getFolder("INBOX");
            inbox = store.getFolder("INBOX");

            /* Open the inbox using store. */

            inbox.open(Folder.READ_ONLY);

            /* Get the messages which is unread in the Inbox */

            Message messages[] = inbox.search(new FlagTerm(new Flags(
                    Flags.Flag.SEEN), false));
            System.out.println("No. of Unread Messages : " + messages.length);

            /* Use a suitable FetchProfile */
            FetchProfile fp = new FetchProfile();
            fp.add(FetchProfile.Item.ENVELOPE);

            fp.add(FetchProfile.Item.CONTENT_INFO);

            inbox.fetch(messages, fp);

            try

            {

                printAllMessages(messages);

                inbox.close(true);
                store.close();

            }

            catch (Exception ex)

            {
                System.out.println("Exception arise at the time of read mail");

                ex.printStackTrace();

            }

        }

        catch (MessagingException e)
        {
            System.out.println("Exception while connecting to server: "
                    + e.getLocalizedMessage());
            e.printStackTrace();
            System.exit(2);
        }

    }

    public void printAllMessages(Message[] msgs) throws Exception
    {
        for (int i = 0; i < msgs.length; i++)
        {

            System.out.println("MESSAGE #" + (i + 1) + ":");

            printEnvelope(msgs[i]);
        }

    }

    public void printEnvelope(Message message) throws Exception

    {

        Address[] a;

        // FROM

        if ((a = message.getFrom()) != null) {
            for (int j = 0; j < a.length; j++) {
                System.out.println("FROM: " + a[j].toString());
            }
        }
        // TO
        if ((a = message.getRecipients(Message.RecipientType.TO)) != null) {
            for (int j = 0; j < a.length; j++) {
                System.out.println("TO: " + a[j].toString());
            }
        }
        String subject = message.getSubject();

        Date receivedDate = message.getReceivedDate();
        Date sentDate = message.getSentDate(); // receivedDate is returning
                                                // null. So used getSentDate()

        String content = message.getContent().toString();
        System.out.println("Subject : " + subject);
        if (receivedDate != null) {
            System.out.println("Received Date : " + receivedDate.toString());
        }
        System.out.println("Sent Date : " + sentDate.toString());
        System.out.println("Content : " + content);

        getContent(message);

    }

    public void getContent(Message msg)

    {
        try {
            String contentType = msg.getContentType();
            System.out.println("Content Type : " + contentType);
            Multipart mp = (Multipart) msg.getContent();
            int count = mp.getCount();
            for (int i = 0; i < count; i++) {
                dumpPart(mp.getBodyPart(i));
            }
        } catch (Exception ex) {
            System.out.println("Exception arise at get Content");
            ex.printStackTrace();
        }
    }

    public void dumpPart(Part p) throws Exception {
        // Dump input stream ..
        InputStream is = p.getInputStream();
        // If "is" is not already buffered, wrap a BufferedInputStream
        // around it.
        if (!(is instanceof BufferedInputStream)) {
            is = new BufferedInputStream(is);
        }
        int c;
        System.out.println("Message : ");
        while ((c = is.read()) != -1) {
            System.out.write(c);
        }
    }

    public static void main(String args[]) {
        new MailReader();
    }
} 
```

我在谷歌上搜索，但我发现你应该使用 Flags.Flag.SEEN 来阅读未读的电子邮件。但这在我的情况下没有显示正确的结果。

有人可以指出我可能在哪里做错了吗？

如果您需要完整的代码，我可以编辑我的帖子。

注意：我编辑了我的问题以包含整个代码，而不是我之前发布的代码片段。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-30T18:33:24.017

Your code should work. You can also use the Folder.getUnreadMessageCount() method if all you want is the count.

JavaMail can only tell you what Gmail tells it. Perhaps Gmail thinks that all those messages have been read? Perhaps the Gmail web interface is marking those messages read? Perhaps you have another application monitoring the folder for new messages?

Try reading an unread message with JavaMail and see if the count changes.

You might find it useful to turn on session debugging so you can see the actual IMAP responses that Gmail is returning; see the [JavaMail FAQ](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug).

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-07-26T14:50:03.980

您无法使用 POP3 获取未读邮件。来自[JavaMail API](https://javamail.java.net/nonav/docs/api/com/sun/mail/pop3/package-summary.html)：

> POP3 不支持永久标志（请参阅 Folder.getPermanentFlags()）。特别是，永远不会为 POP3 消息设置 Flags.Flag.RECENT 标志。由应用程序来确定 POP3 邮箱中的哪些邮件是“新的”。

您可以使用 IMAP 协议并使用 SEEN 标志，如下所示：

```
public Message[] fetchMessages(String host, String user, String password, boolean read) {
    Properties properties = new Properties();
    properties.put("mail.store.protocol", "imaps");

    Session emailSession = Session.getDefaultInstance(properties);
    Store store = emailSession.getStore();
    store.connect(host, user, password);

    Folder emailFolder = store.getFolder("INBOX");
    // use READ_ONLY if you don't wish the messages
    // to be marked as read after retrieving its content
    emailFolder.open(Folder.READ_WRITE);

    // search for all "unseen" messages
    Flags seen = new Flags(Flags.Flag.SEEN);
    FlagTerm unseenFlagTerm = new FlagTerm(seen, read);
    return emailFolder.search(unseenFlagTerm);
} 
```

要注意的另一件事是 POP3 不处理文件夹。IMAP 获取文件夹，POP3 只获取收件箱。更多信息：[如何使用 POP3 检索 gmail 子文件夹/标签？](https://stackoverflow.com/questions/5925944/how-to-retrieve-gmail-sub-folders-labels-using-pop3)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-29T05:51:26.220

更改`inbox.open(Folder.READ_ONLY);`为`inbox.open(Folder.READ_WRITE);` 它将更改您在收件箱中阅读的邮件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-22T14:42:09.497

```
Flags seen = new Flags(Flags.Flag.RECENT);
FlagTerm unseenFlagTerm = new FlagTerm(seen, false);
messages = inbox.search(unseenFlagTerm); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-05T18:47:32.123

要使用的正确标志是

```
Flags.Flag.RECENT 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-12-22T05:25:35.950

请使用此方法获取未读邮件

getNewMessageCount()

请参考以下链接：

[https://javamail.java.net/nonav/docs/api/com/sun/mail/imap/IMAPFolder.html](https://javamail.java.net/nonav/docs/api/com/sun/mail/imap/IMAPFolder.html)

# javascript - 为什么我的简单打字稿函数需要一个 jQueryEventObject 参数？

> ID：13137422
> 
> 赞同：1
> 
> 时间：2012-10-30T10:51:26.290
> 
> 标签：javascript, jquery, typescript

我有以下代码：

```
function submitSuccessAccess() {
    $(".accessLink")
        .attr("data-disabled", "no");
    window.location.reload();
} 
```

我试图这样调用这个函数：

```
submitSuccessAccess(); 
```

但是，我在 submitSuccessAccess 下得到一条红色下划线：提供的参数与调用目标的任何签名都不匹配。似乎 submitSuccessAccess 期望：

```
(eventObject: JQueryEventObject) => any 
```

我找到了一个临时解决方案。我定义和使用如下：

```
function submitSuccessAccess(any) {
    $(".accessLink")
        .attr("data-disabled", "no");
    window.location.reload();
}
submitSuccessAccess(null); 
```

只有我一个人经历过这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:27:03.173

由于打字稿中的错误。

尝试指定函数的返回类型以使用 jQuery.d.ts 中的定义更改函数定义：

```
jqueryevent(handler: (eventObject: JQueryEventObject) => any): JQuery; 
```

jqueryevent 就像点击，绑定等。

您的定义可能是：

```
function submitSuccessAccess():void {
    $(".accessLink")
        .attr("data-disabled", "no");
    window.location.reload();
} 
```

可能你的调用上下文是这样的：

```
$(selector).click(function() {
    submitSuccessAccess();
}); 
```

它是由这样的东西初始化的：

```
$(document).ready(function() {
    initSubmitAccessFunction();
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:40:08.580

您的函数的实际代码可能是：

```
function submitSuccessAccess(eventObject: JQueryEventObject) {
    $(".accessLink")
        .attr("data-disabled", "no");
    window.location.reload();
} 
```

如果您不喜欢提供参数，您可以更改 jquery.d.ts 文件中的相关行

```
(eventObject: JQueryEventObject) => any 
```

至

```
(eventObject?: JQueryEventObject) => any 
```

一开始它可能应该是这样的。

# c# - Different methods using Functors/Delegates in c#

> ID：13137439
> 
> 赞同：1
> 
> 时间：2012-10-30T10:51:58.293
> 
> 标签：c#, delegates, functor

I have a method that I call multiple times, but each time a different method with a different signature is called from inside.

```
public void MethodOne()
{
//some stuff

*MethodCall();

//some stuff

} 
```

So `MethodOne` is called multiple times, each time with a different `*MethodCall()`. What I'm trying to do is something like this :

```
public void MethodOne(Func<> MethodCall)
{
//some stuff

*MethodCall;

//some stuff

} 
```

but the Methods that are called each have a different return type and different parameters. Is there a way to do this using Functors? If not, how would I go about doing this?

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:55:53.860

You best bet would be to use the non-generic `Action` type (or `MethodInvoker` would be the same), i.e.

```
public void MethodOne(Action callback)
{
    //some stuff

    if(callback != null) callback();

    //some stuff
} 
```

From this you can call any method by wrapping it at the caller, i.e.

```
MethodOne(SimpleMethod); // SimpleMethod has no parameters and returns void
MethodOne(() => MoreComplexMethod(1, "abc")); // this one returns void
MethodOne(() => { MethodThatReturnsSomething(12); }); // anything you like 
```

etc

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:58:34.657

You cannot call a function which requires parameters without supplying them, so the answer is "no, not possible"

Also, maybe you want the following:

```
void MethodOne(Action a)
{
    // some stuff
    a();
    // some stuff
}

... // somewhere in the code
MethodOne((Action)(() => { DoSomethingOther(1, 2, 3); }));
MethodOne((Action)(() => { DoSomethingEvenDifferent(1, 2, 3, 4, 5); })); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T11:09:21.270

Every delegate in .Net is an instance of a class derived from [Delegate](http://msdn.microsoft.com/en-us/library/y22acf51.aspx). So if you really wish to pass 'any' delegate to a method, you can pass it as `Delegate`

To invoke it, you need to use its [DynamicInvoke](http://msdn.microsoft.com/en-us/library/system.delegate.dynamicinvoke.aspx) method.

```
public void MethodOne(Delegate MethodCall)
{
//some stuff

//Assuming you now have the required parameters
//or add params object[] args to the signature of this method
object res = MethodCall.DynamicInvoke(args); //args is object[] representing the parameters

//some stuff
} 
```

But this is not recommended as `DynamicInvoke` is slow and it does not offer any compile time safety. Probably you should revisit your design.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T10:59:26.653

This is basically not possible. You could make `MethodOne` generic for the return type, and use a lambda that closes over its outside block instead of parameters:

```
static void Main(string[] args)
{
    int parameterSubst = 1;
    int result = MethodOne<int>(() => parameterSubst);
    string result2 = MethodOne<string>(() =>
    {
        string s = parameterSubst.ToString();
        s += "foo";
        return s;
    });
}

static T MethodOne<T>(Func<T> function)
{
    return function();
} 
```

As you can see, `parameterSubst` is used in the passed `Func<T>`s, but not as a parameter.

# c++ - 构建有错误时，Eclipse C++ 从不运行

> ID：13137440
> 
> 赞同：3
> 
> 时间：2012-10-30T10:52:05.137
> 
> 标签：c++, eclipse, build

在 eclipse (c++) 中编程时，我只想按 f5（运行）并让我正在处理的项目保存、构建和（如果没有错误）运行。如果有错误，我希望它显示问题窗口并停止。

目前这一切都有效，除了出现错误时不应运行的部分。

有没有办法让eclipse在出现错误时永远不会运行项目？也许有一个插件？

编辑：忘了提提示...提示确实显示，但我希望它根本不显示。如果您查看首选项窗口，您会发现没有“从不”选项，所有其他选项都有一个选项，但“如果项目包含错误则启动”则没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:05:05.330

默认情况下，Eclipse CDT 不会运行带有构建错误的代码，但也许您已经选中了*始终启动而不询问*复选框。

如果项目包含错误，您应该转到*Windows menu->Preferences->Run/Debug->Launching->Continue launch*并检查*Prompt*选项而不是*Always*。使用它，Eclipse CDT 将提示您在构建过程中是否存在错误，或者如果编译没有错误，则启动您的二进制文件。

# r - 3 元组的 3d 图或等高线图，其中 x&y 不在网格中且在 R 中不等间距

> ID：13137443
> 
> 赞同：2
> 
> 时间：2012-10-30T10:52:23.067
> 
> 标签：r, lattice, rgl

我正在尝试可视化不在网格中的 3 元组点，并且 x 和 y 的间距不相等。因此，我无法按照大多数要求制作矩阵，也无法满足接受向量的格子等高线图的要求，但它们必须采用非常严格的形式。（x,y 必须形成一个网格并且等间距...）

我不在乎结果是 3d 曲面还是 2D 等高线图。但以某种方式，我想可视化我的 3 元组的（可能是插值的）表面。

数据将如下所示：

```
 myX myY myZ
1   458 4   0.54
2   101 5   0.46
3   390 0   0.45
4   186 2   0.84
5   241 3   0.50
6   495 2   0.67 
```

我已经尝试了 graphics、rgl 和 lattice 包中的几个绘图功能。我知道在任意位置连接 x,y 对是微不足道的——但是任何包中是否有任何绘图函数可以处理这个问题？或者我可以轻松地预先填充（插值）我的数据以获得完整的矩阵吗？（我已经拟合了可视化模型，但我想查看原始数据......）

任何帮助或提示表示赞赏！

干杯，尼科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:01:49.420

我有点难以理解这个问题，但我会尝试展示如何插入一个完整的矩阵。我通常使用包中的`interp`功能`akima`：

```
set.seed(1)
x <- runif(20)
y <- runif(20)
z <- x^3 + sin(y)

require(akima)
F <- interp(x,y,z)
image(F)
points(x,y) 
```

这是一个外推示例：

```
F <- interp(x,y,z, linear=FALSE, extrap=TRUE)
image(F)
points(x,y) 
```

# c# - 如何抓取基于 Flash 的网站？

> ID：13137444
> 
> 赞同：0
> 
> 时间：2012-10-30T10:52:24.563
> 
> 标签：c#, flash, web-scraping, web-crawler, html-agility-pack

我们正在使用*Html Agility Pack*为基于 HTML 的站点抓取数据；有没有像*Html Agility Pack*这样的 DLL来抓取基于 flash 的站点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:34:55.880

这实际上取决于您要废弃的网站。在这方面有两种类型的网站：

*   如果站点在 swf 文件中有数据，那么您必须反编译 swf 文件，并读取其中的数据。通过足够的工作，您可能可以通过编程方式完成。但是，如果是这种情况，手动收集数据可能会更容易，因为它可能不会有太大变化。

*   然而，如果大多数情况下，特别是对于有大量数据的网站，flash 文件实际上是在联系外部 API。在这种情况下，您可以完全忽略闪存并直接访问 API。如果您不确定，只需激活 Firebug 的网络面板，然后开始浏览。如果它使用外部 api，它应该变得很明显。
    一旦找到该 API，您可能可以对如何操作它进行逆向工程，从而为您提供所需的任何数据。

另请注意，如果它是一个足够大的站点，则可能有非闪存方式来获取相同的数据：

*   它可能有一个移动站点（没有 Flash） - 尝试使用 iPhone 用户代理访问该站点。
*   它可能有一个用于爬虫的网站（如 googlebot） - 尝试使用 googlebot 用户代理访问该网站。

编辑：如果您谈论的是抓取（抓取意味着从任何随机站点获取数据）而不是抓取（从特定站点获取结构化数据），那么您无能为力，即使 googlebot 也不会抓取 Flash 内容。主要是因为与 HTML 不同，flash 没有标准化的语法，您可以立即分辨什么是文本、什么是链接等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T05:49:39.987

HTML Agility Pack 不会给您带来太多的运气。一种方法是使用[FiddlerCore](http://www.fiddler2.com/fiddler/Core/)之类的东西来代理与 Flash 站点之间的 HTTP 请求。您将启动 FiddlerCore 代理，然后使用 C# WebBrowser 之类的东西转到您要抓取的 URL。当页面加载时，所有这些 HTTP 请求都将被代理，您可以检查它们的内容。但是，您不会得到大多数文本，因为它们在 Flash 中通常是静态的。相反，您将获得通常单独存储的大部分内容（视频、音频，也许还有图像）。与更传统的抓取/爬网相比，这将变慢，因为您实际上必须在浏览器中执行/运行页面。

如果您熟悉所有这些 YouTube 下载器类型的扩展，它们的工作原理相同，只是它们直接拦截来自 FireFox（例如）而不是单独的代理的 HTTP 请求。

我相信谷歌和一些大型搜索引擎与 Adob​​e/Flash 有特殊的安排，并提供了一些软件，让他们的搜索引擎爬虫看到更多谷歌依赖的文本和东西。PDF 内容也是如此。我不知道这个软件是否可以公开使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T20:59:48.993

抓取 Flash 内容会非常复杂，任何声称这样做的组件的可靠性充其量都是值得怀疑的。但是，如果您希望在某些网页上“爬行”或跟随 Flash 动画中的超链接，您可能会遇到[Infant](http://www.infant-ir.info/)的一些运气。Infant 是一个免费的用于网络爬取的 Java 库，并提供有限/尽力而为的 Flash 内容超链接跟踪功能。Infant 不是开源的，但可以免费用于个人和商业用途。无需注册！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-25T05:35:03.143

How about capturing the whole page as an image and running an [OCR](http://en.wikipedia.org/wiki/Optical_character_recognition) on the page to read the data

# jsf - JSF 1.1：selectManyCheckbox 未正确提交

> ID：13137446
> 
> 赞同：2
> 
> 时间：2012-10-30T10:52:32.927
> 
> 标签：jsf, jakarta-ee, selectmanycheckbox

我的 selectManyCheckbox 标签有问题..

我们在 JBoss Portal 中使用 JSF 1.1（我认为它的版本是 4.2，但不确定）..

我有以下 JSF 标记：

```
<h:selectManyCheckbox layout="lineDirection" 
   value="#{personBean.selectedPersonsLongArray}"
   id="selectedPersons">
   <f:selectItems value="#{personBean.persons}" />
</h:selectManyCheckbox> 
```

（当然我有一个提交表单的按钮）。我的豆子看起来像这样：

```
 public class PersonBean {
        private List<SelectItem> persons;

        private List<SelectItem> selectedPersons = new ArrayList<SelectItem>(); // +getter +setter
        private List<String> selectedPersonsStringList = new ArrayList<String>();// +getter +setter
        private List<Long> selectedPersonsStringList = new ArrayList<Long>();// +getter +setter
        private long[] selectedPersonsLongArray = new long[0];// +getter +setter
        private String[] selectedPersonsStringArray = new String[0]; // +getter +setter

        public void getPersons(){
            if(persons == null){
                List<Person> personsFromDb = // get from DB
                persons = new ArrayList<Person>(personsFromDb.size());
                for(Person person : personsFromDb){
                    // ID of a person is a long
                    persons.add(new SelectItem(person.getId(), person.getName()));
                }
            }
            return persons;
        }

        public void setPersons(List<SelectItem> persons){
            this.persons = persons;
        }

        ...
    } 
```

bean 是会话范围的，并且 Person 的 Id 属性是类型`long`。我尝试将标签的值绑定到 bean 中列出的所有类型。提交时，几乎都会`selectedPersonLongArray`给出“验证错误”消息。如果我将它绑定到`selectedPersonLongArray`我得到一个错误，说`selectedPersons`必须填写。

正如我所说，bean 是会话范围的，我已经仔细检查过`persons`请求之间的列表没有变化，这似乎是这个标签的一个常见问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T11:34:33.047

泛型类型信息在运行时丢失。所有 JSF/EL（实际上是反射）看到的是 a `List`，而不是 a `List<Long>`。默认类型是`String`因为它只是标准的返回类型`request.getParameter()`。这永远不会`true`在`equals()`检查`Long`可用项目列表中的任何值时返回。这解释了“验证错误：值无效”错误。

您需要一个固定的类型属性，例如，`long[]`以便`Long[]`JSF/EL 能够通过反射确定正确的类型。

如果您真的需要它是`List<Long>`由于设计限制，那么您应该明确指定一个转换器。否则 JSF 只会用未转换`String`的对象填充它，这最终只会导致`ClassCastException`业务代码开始对其进行迭代。

您可以为此使用 JSF 内置`javax.faces.Long`转换器。

```
<h:selectManyCheckbox ... converter="javax.faces.Long"> 
```

* * *

**更新**：根据评论，`long[]`很可能导致转换错误，而`Long[]`工作。这很可能是 JSF 1.1 特定的错误。那就坚持吧`Long[]`。

# android - 如何在以下版本上实现 Android ICS 时间选择器？

> ID：13137448
> 
> 赞同：0
> 
> 时间：2012-10-30T10:52:34.297
> 
> 标签：android, datetimepicker, timepicker

我想为所有 android 设备实现 ICS 风格的 Timepicker？请为我提供相同的参考链接。

在创建自定义布局的情况下，如何为 ICS timepicker 之类的文本设置动画？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-15T13:22:18.620

检查构建版本并相应地设置 timePicker 主题。

```
AlertDialog.Builder builder;
if (isICS()) {
         builder = new AlertDialog.Builder(this, AlertDialog.THEME_DEVICE_DEFAULT_DARK);
      } else {
         builder = new AlertDialog.Builder(CreateScheduleScreen.this);
      }

private boolean isICS() {
      int currentVer = Build.VERSION.SDK_INT;
      if (currentVer >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
         return true;
      }
      return false;
   } 
```

//Build.VERSION.SDK_INT 适用于 1.6+

# python - 在 python 应用程序中结合 websockets 和 WSGI

> ID：13137449
> 
> 赞同：16
> 
> 时间：2012-10-30T10:52:35.437
> 
> 标签：python, websocket, wsgi

我正在进行一项科学实验，大约有两打测试人员互相玩回合制游戏。现在，它是一个带有 WSGI 接口的 Python Web 应用程序。我想通过 websockets 来增加可用性：当所有玩家完成他们的回合时，我想通知所有客户端更新他们的状态。现在，每个人要么等待转弯超时，要么不断重新加载并等待“转弯仍在进行中”错误消息不再出现（忙于等待，有效）。

我通读了多个 websocket 库的文档，了解 websockets 的工作原理，但我不确定混合 WSGI 和 websockets 的架构：我可以在同一个进程中拥有 websockets 和 WSGI 服务器吗（如果可以，如何，使用任何 websockets 库）并且只`my_websocket.send_message()`从 WSGI 处理程序调用，或者我应该有一个单独的 websockets 服务器并做一些 IPC？还是我根本不应该混合它们？

**编辑，6 个月后：**我最终启动了一个单独的 websockets 服务器进程（使用 Autobahn），而不是将它与 WSGI 服务器集成。原因是，将它们两者分开更容易和更清晰，并且从 WSGI 进程（服务器到服务器通信）与 websockets 服务器进行对话是直接的，并且在第一次尝试时使用[websocket-client](https://pypi.python.org/pypi/websocket-client)进行了工作。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T11:49:46.090

这是一个可以满足您要求的示例：

*   [https://github.com/tavendo/AutobahnPython/tree/master/examples/twisted/websocket/echo_wsgi](https://github.com/tavendo/AutobahnPython/tree/master/examples/twisted/websocket/echo_wsgi)

它运行一个 WSGI Web 应用程序（在这种情况下基于 Flask，但可以是任何符合 WSGI 的）加上一个 WebSocket 服务器，在 1 个服务器和 1 个端口下。

您可以从 Web 处理程序中发送 WS 消息。Autobahn 还在 WebSocket 之上提供了 PubSub，这极大地简化了通知的发送（通过`WampServerProtocol.dispatch`），就像您的情况一样。

*   [http://autobahn.ws/python](http://autobahn.ws/python)

披露：我是 Autobahn 的作者，为 Tavendo 工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-11-20T17:10:06.147

> 但我不确定混合 WSGI 和 websockets 的架构

**我做到了**

**使用[WSocket](https://wsocket.gitbook.io/)**

## 简单的 WSGI HTTP + Websocket 服务器、框架、中间件和应用程序。

## 包括

*   包括服务器（WSGI） - 适用于任何 WSGI 框架
*   中间件 - 为任何 WSGI 框架添加 Websocket 支持
*   框架 - 简单的 Websocket WSGI Web 应用程序框架
*   App - 用于 Websocket 通信的基于事件的应用程序 **当使用外部服务器时，某些客户端（如 Firefox）需要`http 1.1`服务器。用于中间件、框架、应用程序**
*   [处理程序 - 向wsgiref](https://docs.python.org/3/library/wsgiref.html "python内置WSGI服务器")添加 Websocket 支持（python 内置 WSGI 服务器）
*   客户 - 即将推出...

## 共同特征

*   只有一个文件少于 1000 行
*   支持 websocket 子协议
*   支持 websocket 消息压缩（如果客户要求可以工作）
*   接收和发送 pong 和 ping 消息（带有自动 pong 发送器）
*   接收和发送二进制或文本消息
*   适用于带或不带掩码的消息
*   支持关闭消息
*   自动和手动关闭

使用 Bottle Web 框架和 WSocket 中间件的示例

```
from bottle import request, Bottle
from wsocket import WSocketApp, WebSocketError, logger, run
from time import sleep

logger.setLevel(10)  # for debugging

bottle = Bottle()
app = WSocketApp(bottle)
# app = WSocketApp(bottle, "WAMP")

@bottle.route("/")
def handle_websocket():
    wsock = request.environ.get("wsgi.websocket")
    if not wsock:
        return "Hello World!"

    while True:
        try:
            message = wsock.receive()
            if message != None:
                print("participator : " + message)

            wsock.send("you : "+message)
            sleep(2)
            wsock.send("you : "+message)

        except WebSocketError:
            break

run(app) 
```

# sql-server - 亚马逊 MWS - 测试/沙盒/生产

> ID：13137455
> 
> 赞同：3
> 
> 时间：2012-10-30T10:52:49.463
> 
> 标签：sql-server

我目前正在开发一个使用亚马逊 MWS 的应用程序。要将 API 与我的应用程序集成，我需要进行测试。亚马逊建议，由于他们没有沙盒帐户，因此需要在生产站点上完成此测试。此后被告知我的卖家账户由于表现不佳（因为没有将产品发送给我自己:-)）而被关闭，并且我将无法创建另一个账户。有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T20:50:44.677

除非您能找到愿意让您使用他们的帐户的卖家，否则您几乎不走运。我猜你是在为某人做这项工作，所以他们可能会让你在他们的身上进行测试。但是除非你保持一个账户开放并且信誉良好，否则你会失去它，亚马逊几乎不可能处理这样的问题。

# java - 在 java 中读取 System.in 的权限

> ID：13137456
> 
> 赞同：5
> 
> 时间：2012-10-30T10:52:49.557
> 
> 标签：java, security

我有一些代码正在使用以下代码从控制台读取用户输入。

```
Console console = System.console();
String input = console.readLine(); 
```

但是，此代码应该在非常安全的环境中运行，其中每个操作的权限都通过策略文件进行控制。

所以我用策略文件对java代码进行了测试

```
grant codeBase "file:/myjar.jar" {
   permission java.security.AllPermission;
}; 
```

我不知道，我应该使用什么权限来授予`console.readLine()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T11:56:10.737

如果您在启用`System.console`的 JVM 中使用，则`SecurityManager`需要以下 RuntimePermissions：

```
permission java.lang.RuntimePermission "readFileDescriptor";
permission java.lang.RuntimePermission "writeFileDescriptor"; 
```

**为什么？**

和文件描述符（0 和 1，其中 2 表示`System.in`）已经对 JVM 开放。[验证您是否具有通过该方法](http://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html#checkWrite%28java.io.FileDescriptor%29)对打开的文件描述符的写访问权，并且类似地您是否具有通过该[方法](http://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html#checkRead%28java.io.FileDescriptor%29)的读访问权。这些方法所需的内容列在 javadocs 中。`System.out``System.err``SecurityManager`[`checkWrite(FileDescriptor fd)`](http://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html#checkWrite%28java.io.FileDescriptor%29)[`checkRead(FileDescriptor fd)`](http://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html#checkRead%28java.io.FileDescriptor%29)`RuntimePermission`

虽然“writeFileDescriptor”可能显得多余，但它是初始化控制台对象所必需的（至少在 Oracle Java 7 运行时中）。

# php - 无法在 php 中处理 mysql_query() 函数中的字符串

> ID：13137459
> 
> 赞同：0
> 
> 时间：2012-10-30T10:53:17.033
> 
> 标签：php, mysql

我有一个字段数组，在使用`implode`函数并将它们转换为字符串之后，我试图将此字符串用作`mysql_query()`函数中的列名，如下所示：

```
$field_array = array('course','batch','branch');

$fields = implode(", ",$field_array);
$resource = mysql_query("SELECT $fields FROM some_table") or die(mysql_error()); 
```

但我收到以下错误。我在这里做错了什么？

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM fix_data' at line 1 
```

下面是我正在使用的确切代码

```
function fetch_resource_db_nowhere($table_name,$field_array,$return_type,$return_type_name) {

    if($field_array[0]=='ALL') {
        //echo "asda";
        $resource = mysql_query("SELECT * FROM ".$table_name."") or die(mysql_error());
    }
    else {
        $fields = implode(",",$field_array);
        $sql = "SELECT ".$fields." FROM ".$table_name."";
        echo $sql;
        $resource = mysql_query($sql) or die(mysql_error());
    }

    if($return_type == 'resource') {
        return $resource;
    }

    if($return_type == 'resource_array') {
        return mysql_fetch_assoc($resource);
    }

    if($return_type == 'resource_array_value') {
        $resource_array = mysql_fetch_assoc($resource);
        return $resource_array[$return_type_name];
    }

}

$data = fetch_resource_db_nowhere('fix_data',array('course','branch','name'),'resource',''); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T10:55:08.090

您试图内爆一个名为 field_array 的数组，即使您的示例显示了一个名为 fields_array 的数组：

```
$fields_array = array('course','batch','branch');
$fields = implode(", ",$fields_array);
$resource = mysql_query("SELECT $fields FROM some_table") or die(mysql_error()); 
```

编辑：您再次更改了代码。您能否给我们您正在使用的确切代码？

# jquery - 想要使用 jquery 在条件下为 td 中的值着色

> ID：13137462
> 
> 赞同：0
> 
> 时间：2012-10-30T10:53:24.547
> 
> 标签：jquery

我想根据条件将负值着色为红色，我现在这样做：

```
$('td.numeric:contains('-')").addClass("negative") 
```

上面的代码找到类名 numeric 的 td，如果 value 包含“-”，它将类“negative”应用于该 td。

我的问题是，如果我将数字类应用于例如还包含“-”作为分隔符的日期值并使日期变为红色。

所以我的问题是，我怎样才能找到以'-'开头的值的 td？

喜欢

```
$('td.numeric:startwith('-')").addClass("negative") 
```

CSS

```
.numeric {  text-align:right; }
.negative { text-align:right; color:red; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:00:02.400

您可以使用[`filter()`](http://api.jquery.com/filter/)：

```
$("td.numeric").filter(function() {
    return $.trim($(this).text()).indexOf("-") == 0;
}).addClass("negative") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:14:21.180

这样写：

```
$('td.numeric').filter(function(){return this.innerHTML[0] === '-';}); 
```

或更安全的：

```
$('td.numeric').filter(function(){return this.innerHTML.match(/^\s*-/;}); 
```

将很多函数放在 jquery 选择器中只会损害性能，使用过滤器是更好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:01:55.687

尝试这个：

```
$("td").each(function() {
var text = $(this).text();
if (/[+-]?\d+(\.\d+)?/.test(text)) {
 var num = parseFloat(text);
 if (num < 0) {
   $(this).addClass("negative"); //add negative class
 } else if (num > 0) {
    $(this).addClass("positive"); //add positive class
 }

 }
 }); 
```

# arrays - 声明一个常量数组

> ID：13137463
> 
> 赞同：220
> 
> 时间：2012-10-30T10:53:27.807
> 
> 标签：arrays, go, constants

我试过了：

```
const ascii = "abcdefghijklmnopqrstuvwxyz"
const letter_goodness []float32  = { .0817,.0149,.0278,.0425,.1270,.0223,.0202, .0609,.0697,.0015,.0077,.0402,.0241,.0675, .0751,.0193,.0009,.0599,.0633,.0906,.0276, .0098,.0236,.0015,.0197,.0007 }
const letter_goodness  = { .0817,.0149,.0278,.0425,.1270,.0223,.0202, .0609,.0697,.0015,.0077,.0402,.0241,.0675, .0751,.0193,.0009,.0599,.0633,.0906,.0276, .0098,.0236,.0015,.0197,.0007 }
const letter_goodness = []float32 { .0817,.0149,.0278,.0425,.1270,.0223,.0202, .0609,.0697,.0015,.0077,.0402,.0241,.0675, .0751,.0193,.0009,.0599,.0633,.0906,.0276, .0098,.0236,.0015,.0197,.0007 } 
```

第一个声明和初始化工作正常，但第二个、第三个和第四个不起作用。

如何声明和初始化一个 const 浮点数组？

* * *

## 回答 #1

> 赞同：312
> 
> 时间：2012-10-30T11:00:47.843

数组本质上不是不可变的。你不能让它保持不变。

你能得到的最近的是：

```
var letter_goodness = [...]float32 {.0817, .0149, .0278, .0425, .1270, .0223, .0202, .0609, .0697, .0015, .0077, .0402, .0241, .0675, .0751, .0193, .0009, .0599, .0633, .0906, .0276, .0098, .0236, .0015, .0197, .0007 } 
```

请注意`[...]`而不是`[]`：它确保您获得（固定大小）数组而不是切片。所以值不是固定的，但大小是固定的。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2012-10-30T13:30:06.203

从[有效的](https://golang.org/doc/effective_go.html#constants)开始：

> Go 中的常量就是常量。它们是在编译时创建的，即使在函数中定义为局部变量，也只能是数字、字符（符文）、字符串或布尔值。由于编译时的限制，定义它们的表达式必须是常量表达式，可由编译器计算。例如，`1<<3`是一个常量表达式，而`math.Sin(math.Pi/4)`不是因为函数调用`math.Sin`需要在运行时发生。

切片和数组总是在运行时评估：

```
var TestSlice = []float32 {.03, .02}
var TestArray = [2]float32 {.03, .02}
var TestArray2 = [...]float32 {.03, .02} 
```

`[...]`告诉编译器计算数组本身的长度。切片包装数组并且在大多数情况下更容易使用。不要使用常量，只需使用小写首字母使其他包无法访问变量：

```
var ThisIsPublic = [2]float32 {.03, .02}
var thisIsPrivate = [2]float32 {.03, .02} 
```

`thisIsPrivate`仅在它定义的包中可用。如果您需要从外部读取访问权限，您可以编写一个简单的 getter 函数（请参阅[golang 中的 Getters](https://golang.org/doc/effective_go.html#Getters)）。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-03-31T10:01:26.153

Go 中没有数组常量之类的东西。

引用[Go 语言规范：常量](http://golang.org/ref/spec#Constants)：

> 有*布尔常量*、*符文常量*、*整数常量*、*浮点常量*、*复数常量*和*字符串常量*。符文、整数、浮点数和复数常量统称为*数值常量*。

[常量表达式](http://Constant%20expressions%20may%20contain%20only%20constant%20operands%20and%20are%20evaluated%20at%20compile%20time.)（用于初始化常量）可能只包含[常量](https://golang.org/ref/spec#Constants)操作数并在编译时进行评估。

该规范列出了不同类型的常量。请注意，您可以使用具有一种允许类型作为[基础类型的类型的](http://golang.org/ref/spec#Types)[常量表达式](https://golang.org/ref/spec#Constant_expressions)来创建和初始化常量。例如这是有效的：

```
func main() {
    type Myint int
    const i1 Myint = 1
    const i2 = Myint(2)
    fmt.Printf("%T %v\n", i1, i1)
    fmt.Printf("%T %v\n", i2, i2)
} 
```

[输出（在Go Playground](http://play.golang.org/p/vHlzfHt0-F)上试试）：

```
main.Myint 1
main.Myint 2 
```

如果需要数组，只能是变量，不能是常量。

我推荐这篇关于常量的精彩博客文章：[**常量**](http://blog.golang.org/constants)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-12-22T17:58:57.650

正如其他人所提到的，没有官方的 Go 构造。我能想象的最接近的是返回切片的函数。通过这种方式，您可以保证没有人会操纵原始切片的元素（因为它被“硬编码”到数组中）。

我已经缩短了您的切片以使其...更短...：

```
func GetLetterGoodness() []float32 {
    return []float32 { .0817,.0149,.0278,.0425,.1270,.0223 }
} 
```

# android - 突出显示列表视图项目android

> ID：13137465
> 
> 赞同：0
> 
> 时间：2012-10-30T10:53:31.587
> 
> 标签：android, listview, highlight

我有带有自定义基本适配器的列表视图。当我填充列表时，我必须检查我正在填充列表视图的对象中的布尔值，以及更改该行的背景颜色是否属实。

```
public View getView(int position, View convertView, ViewGroup parent) {
    LoginsList entry = listOfLoginsLists.get(position);
    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.lists_row, null);
    }

    TextView ListName = (TextView) convertView.findViewById(R.id.tvListName);
    ListName.setText(entry.getListName());

    TextView ListDescription = (TextView) convertView.findViewById(R.id.tvListDescription);
    ListDescription.setText(entry.getListDescription());

    Button Send = (Button) convertView.findViewById(R.id.bSend);
    Send.setOnClickListener(this);
    Send.setTag(entry);

    RelativeLayout RelLayout = (RelativeLayout) convertView.findViewById(R.id.layoutListsRow);
    RelLayout.setFocusableInTouchMode(false);
    RelLayout.setFocusable(false);
    RelLayout.setOnClickListener(this);
    RelLayout.setTag(entry);

    if (entry.isSent()) {
        RelLayout.setBackgroundColor(Color.parseColor("#4400FF00"));
    }

    return convertView;
} 
```

但是这段代码不能正常工作。当我滚动列表视图时，行颜色会变得混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T10:58:05.780

```
if (entry.isSent()) {
        RelLayout.setBackgroundColor(Color.parseColor("#4400FF00"));
}else {
        RelLayout.setBackgroundColor(//default color);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:59:10.833

可能已经定义了列表选择器....或者使用

```
RelLayout.setBackgroundResource(R.color.mycolor); 
```

还要检查在任何情况下您的 isSent() 条件是否为真；

# javascript - 使用js代码从url获取xml数据

> ID：13137467
> 
> 赞同：0
> 
> 时间：2012-10-30T10:53:32.117
> 
> 标签：javascript, jquery, xml, ajax

> **可能重复：**
> [XmlHttpRequest 错误：Access-Control-Allow-Origin 不允许 Origin null](https://stackoverflow.com/questions/3595515/xmlhttprequest-error-origin-null-is-not-allowed-by-access-control-allow-origin)

我尝试了不同的方法来使用 js、ajax、jquery 从 url 读取 xml 数据，但没有用。

xml url 是：[http ://api.simplyhired.com/a/jobs-api/xml-v2/q-java?pshid=46484&ssty=2&cflg=r&jbd=nichehire.jobamatic.com&clip=183.82.97.123](http://api.simplyhired.com/a/jobs-api/xml-v2/q-java?pshid=46484&ssty=2&cflg=r&jbd=nichehire.jobamatic.com&clip=183.82.97.123)

我收到如下所示的错误：

> XMLHttpRequest 无法加载“ [http://api.simplyhired.com/a/jobs-api/xml-v2/q-java?pshid=46484&ssty=2&cflg=r&jbd=nichehire.jobamatic.com&clip=183.82.97.123](http://api.simplyhired.com/a/jobs-api/xml-v2/q-java?pshid=46484&ssty=2&cflg=r&jbd=nichehire.jobamatic.com&clip=183.82.97.123)。” Access-Control-Allow-Origin 不允许 来源[http://www.nichehire.com 。](http://www.nichehire.com)

请求 url 时是否需要添加请求标头。

如果是这样，我如何在请求时添加请求标头，

是否有任何从 URL 获取 XML 数据的程序。

有人可以用你的代码试试这个 URL 来读取 XML 数据，如果可能的话让我知道

我试过下面的代码

```
$.ajax({
    type: "GET",
url: "http://api.simplyhired.com/a/jobs-api/xml-v2/q-java?pshid=46484&ssty=2&cflg=r&jbd=nichehire.jobamatic.com&clip=183.82.97.123",
dataType: "xml",
success: function(xml) {
alert(xml);
}}); 
```

# html - html lang 标签不适用于谷歌翻译

> ID：13137468
> 
> 赞同：0
> 
> 时间：2012-10-30T10:53:40.620
> 
> 标签：html, google-translate

我必须用法语显示一个 html 页面。[页](http://www.tudor-tea.com/lan/)。_

我使用了如下的 HTML 标签

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"> 
```

我在我的页面中使用了谷歌翻译器。第一次放置此页面时，它会自动将整个页面更改为法语。现在不工作请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T10:58:30.587

HTML 没有自动翻译内容的功能。该`lang`属性的意思是“这个元素的内容是用这种语言编写的”。（这被用作文本到语音软件的发音指南，以及以 HTML 作为输入的自动翻译软件的提示）。

为 WWW 翻译内容的唯一合理方法是：

*   使用专业翻译人员的服务，然后将他们的工作放在另一个 URL 上
*   让用户在遇到以他们不懂的语言编写的文本时使用自动翻译服务（某些浏览器，例如 Google Chrome，将提供通过这些服务自动运行内容）。

自动翻译不是很好，所以你不应该自己把它呈现给最终用户。这意味着糟糕的翻译是您认为足以发布的东西（它不会）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:39:15.700

问题在于您调用 Google 翻译器的方式。该`pageLanguage`属性指定*源*语言，因此它必须是`en`. （它也可以被省略，但是翻译器会开始猜测。）*目标*语言将在`includedLanguages`属性中指定。要将法语固定为目标语言，您将使用`fr`那里。如果代码

```
function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: 'fr', layout: google.translate.TranslateElement.InlineLayout.SIMPLE,autoDisplay: false, includedLanguages: ''}, 'google_translate_element');} 
```

因此被替换为

```
function googleTranslateElementInit() {
  new google.translate.TranslateElement(
    {pageLanguage: 'en',
     layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
     autoDisplay: false, includedLanguages: 'fr'},
    'google_translate_element');} 
```

然后页面出现一个小部件，用于从英语翻译成（破碎的）法语。如果您保留`includedLanguages`空值`''`，小部件中将有一个目标语言菜单。我想这是你能得到的最接近的值；谷歌似乎打算通过用户操作进行翻译。（**原文，错误：** 然后页面会自动从英文翻译成（坏掉的）法文。你可能希望`#google_translate_element { display: none }`在 CSS 中设置，因为翻译小部件没有用，只会让人困惑。或者，如果你`includedLanguages`留空value `''`，谷歌翻译会为用户生成一个语言菜单。）

我强烈支持昆汀关于避免自动翻译网页的建议，至少在以这种方式使用时是这样。谷歌翻译产生的翻译表面上看起来不错，有些句子看起来相当不错，但它也会产生难以理解的单词组合，更糟糕的是，翻译看起来相当不错但内容全错（尽管最坏的情况是不像以前那么普遍，因为他们可能已经调整了他们的技术）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-30T11:01:40.240

先生，您输入 HTML4 的 DOCTYPE ... html lang 属性将与 html doctype 一起正常工作。试试看 ： `<!DOCTYPE html>`

# heroku - 每周运行任务，在 Heroku 上只运行 4 次

> ID：13137470
> 
> 赞同：0
> 
> 时间：2012-10-30T10:53:46.030
> 
> 标签：heroku, ruby-on-rails-3.2, scheduler

我只想在周日运行 4 次 rake 任务。

我正在考虑执行以下操作：

1.  检查它的星期日 => Time.now.wday = 0
2.  检查时间是否小于凌晨 4 点 => Time.now < 4:00:00

我会每小时运行一次任务。

句法：

```
if Time.now.wday == 0 && Time.now < 4:00:00
              rake "some_rake_task"
         end 
```

上面的方法有用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:25:50.770

我可以使用以下

```
task :get_resource_scores => :environment do 
   #If this is in production mode or staging mode then only get the scores 4 times on Sunday between midnight and 4 am
   if  Time.now.wday == 7 && Time.now.hour < 5
     get_resource_scores
   end
end 
```

# svn - Tortoise SVN - 错误：Delta 源意外结束

> ID：13137473
> 
> 赞同：6
> 
> 时间：2012-10-30T10:54:13.160
> 
> 标签：svn, tortoisesvn

尝试对目录执行 SVN 更新时出现上述错误，因此对该目录中文件的更改不会被下拉到我的工作副本中。如果我去 repo-browser 它可以看到所做的更改，但这个错误似乎只是将更新拉在一起。

我尝试删除有问题的文件并执行 SVN 更新，删除目录，甚至删除顶级目录并重新签出整个存储库，但仍然出现相同的错误。经过广泛的谷歌搜索，这是我能找到的唯一成功的方法。

我正在运行 TortoiseSVN：1.7.9 和 Subversion 1.7.7

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-25T12:29:14.510

其他答案都不适合我。即使完全删除本地副本并再次检查它也不起作用。

相反，我遵循了[http://www.tomaz.me/2014/01/01/resolving-delta-source-ended-unexpectedly-svn-issue.html](http://www.tomaz.me/2014/01/01/resolving-delta-source-ended-unexpectedly-svn-issue.html)提供的建议：

*   从存储库中删除文件
*   提交删除
*   再次添加文件
*   提交添加

**编辑**

事实证明，上面的修复通常只有助于处理一次提交的错误。后来又出现了。但是，所有受影响的文件的名称中都有空格。重命名这些文件（例如消除空格）可以更持久地解决错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T11:09:07.770

排序后，必须对我的本地副本进行顶级删除，并删除作为关键部分的隐藏 .svn 文件夹。然后只需重新检出存储库即可。希望这至少对将来遇到此问题的任何人都有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-14T00:55:29.300

有关添加的信息（以及提交删除然后重新添加攻击性文件的原因），我发现尝试提交以下内容时会出现此错误：

> filename.JPG（原始版本文件）
> 
> filename.jpg （我试图提交的修改文件）

它标识为同一个文件，但是大小写差异会导致增量源错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-11T13:58:58.830

将 TortoiseSVN 从 1.6 更新到 1.9，然后应用“SVN 升级工作副本”操作（通过 Windows 资源管理器中的上下文菜单）对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-25T12:11:27.350

我遇到过同样的问题。导致错误的文件与 svn:external 链接。我首先尝试删除/重新提交真实文件，但没有帮助。然后我删除了链接并再次添加它，这为我解决了这个问题！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-20T09:19:12.213

我不得不回到使用旧 svn 客户端文件格式的 svn 客户端 < 1.7。所以我安装了最新的 1.6 版本的 TortoiseSVN (1.6.17)，到现在都可以正常工作。

提供一点背景知识：从 SVN 版本 1.7 开始，使用了基于`sqlite`数据库的新客户端文件格式。`.svn`这可以通过顶部项目文件夹中的单个文件夹来识别，而旧的（1.7 之前）文件格式`.svn`每个本地文件夹使用一个文件夹。`sqlite`与基于新文件格式的工作副本相比，基于旧格式的工作副本占用的空间大约是两倍。

# php - 查询中的 PDO 逗号

> ID：13137475
> 
> 赞同：0
> 
> 时间：2012-10-30T10:54:17.717
> 
> 标签：php, mysql, pdo

嘿，伙计们，我尝试使用 PDO 获取此查询，但到目前为止还没有实现，所以这可能是逗号我的问题（'，'）你怎么想？我只是尝试做的是在一个十进制数字或十进制数字逗号分隔的字段中减去该字符串中的一个值，当然管理逗号（从开头或结尾删除）。如有必要，更改查询也很有用

```
$query = "UPDATE table SET field_to_change = SUBSTR(REPLACE(CONCAT(',' , field_to_change, ','), ':userid', ','), 2, LENGTH(REPLACE(CONCAT(',', field_to_change, ','), ':userid', ',')) - 2) WHERE field_id = :ownid ";

$conn = New PDO ...

$user_with_comma = ','.$value.','

$sql = conn->prepare($query);
$sql->bindValue(':userid', $user_with_comma , PDO::PARAM_STR);
$sql->bindValue(':ownid', $value2 , PDO::PARAM_INT);
$sql->execute(); 
```

我也试试

```
$query = "UPDATE table SET field_to_change = SUBSTR(REPLACE(CONCAT(',' , field_to_change, ','),   ', :userid ,', ','), 2, LENGTH(REPLACE(CONCAT(',', field_to_change, ','), ', :userid ,', ',')) - 2) WHERE field_id = :ownid ";

  $sql->bindValue(':userid', $value , PDO::PARAM_INT); 
```

它总是给我“绑定变量的数量与令牌的数量不匹配”错误。

预先感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:00:20.777

您不能以这种方式重用参数标记。给出前两个单独的名称并为它们分配相同的值：

```
"UPDATE table SET field_to_change = SUBSTR(REPLACE(CONCAT(',' , field_to_change, ','),   :userid1, ','), 2, LENGTH(REPLACE(CONCAT(',', field_to_change, ','), :userid2, ',')) - 2) WHERE field_id = :ownid " 
```

然后：

```
$sql->bindValue(':userid1', $user_with_comma , PDO::PARAM_STR);
$sql->bindValue(':userid2', $user_with_comma , PDO::PARAM_STR);
$sql->bindValue(':ownid', $value2 , PDO::PARAM_INT); 
```

# android-layout - 膨胀布局中抛出空指针异常

> ID：13137478
> 
> 赞同：0
> 
> 时间：2012-10-30T10:54:35.547
> 
> 标签：android-layout

我有以下代码：

**1) 从膨胀的 EditText 读取值并将其存储在 ArrayList 中的方法**

```
private List<String> getDynEditText(LinearLayout parentLayout, int resourceId) {
  List<String> contactDataList = new ArrayList<String>();
  int dataSize = (parentLayout.getChildCount() != 0 ) ? parentLayout.getChildCount() : 0;

  for (int i=0; i<dataSize;i++) {
     EditText editText = (EditText) parentLayout.getChildAt(i).findViewById(resourceId);

     String editString = editText.getText().toString();

     if (editString != null && !editString.trim.equals("")) {
       contactDataList.add(editString);
   }
} 
```

**2）我在其他地方调用这个方法**

```
mcontactList.addAll(getDynEditText(mPhoneNumberLinearLayout,
                                     R.id.dy_phone_number_edit_text_id)); 
```

问题 ：

```
 java.lang.NullPointerException

  at.dyn.edt.contacts.ContactActivityDemo.getDynEditText(....) 
```

如果我点击它，它会在该行显示错误

```
 int dataSize = (parentLayout.getChildCount() != 0) ? parentLayout.getChildCount() : 0; 
```

请有人帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:01:04.300

有多个地方可能发生 NPE：

*   `parentLayout`是`null`。

*   `parentLayout.getChildAt(i)`是`null`。

*   `editText`是`null`

*   `editText.getText()`一片空白。

您应该始终分析完整的堆栈跟踪以找到异常的根本原因。

# csv - Prestashop 1.5.1 - 如何导入产品的运输特征？

> ID：13137480
> 
> 赞同：1
> 
> 时间：2012-10-30T10:54:44.067
> 
> 标签：csv, import, prestashop

我目前负责将大量产品导入客户的数据库。我一直在使用 CSV 文件来执行此操作，但到目前为止，我无法正确确定产品本身的运输特性（例如：宽度、高度、深度）（目录 > 产品 > 编辑（产品 XPTO >船运）。

在 CSV 文件中，我尝试使用：

```
(...);"Height:9 cm:1, Width:13,7 cm:2";(....) 
```

然后，我会将这个值映射到 Features (Name:Value:Position) 列。结果，产品的高度和宽度确实出现在产品的数据表上，但到目前为止，我还没有设法将这些值复制到运输选项卡上。

如何才能做到这一点？ [这是一个示例 CSV 虚拟文件](http://pastebin.com/9UPCgWiM)

还有一件事：Feature 的 Name:Value:Position 列表中的“Position”有什么作用？我正在使用诸如*Feature Name:Feature Value:increment*之类的东西，但据我所知，这不是应该的方式。

提前致谢！

**编辑：**如果可能的话，我还想知道字段“值（值：位置）*”到底指的是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T22:11:54.903

产品运输特征存储在`ps_product`Prestashop 数据库表的以下字段中：

*   宽度小数（20,6）
*   高度小数（20,6）
*   深度小数（20,6）

不幸的是，CSV 导入脚本`controllers/admin/AdminImportController.php`（ ，您必须运行以下 MySQL 查询（**请在继续之前备份您的数据库**）：

```
update ps_product p, 
       ps_feature_lang fl, 
       ps_feature_product fp, 
       ps_feature_value_lang fvl 
   set p.width=fvl.value 
 where p.id_product=fp.id_product 
   and fl.id_feature=fp.id_feature 
   and fl.name='Width' 
   and fvl.id_feature_value=fp.id_feature_value;

update ps_product p, 
       ps_feature_lang fl, 
       ps_feature_product fp, 
       ps_feature_value_lang fvl 
   set p.height=fvl.value 
 where p.id_product=fp.id_product 
   and fl.id_feature=fp.id_feature 
   and fl.name='Height' 
   and fvl.id_feature_value=fp.id_feature_value;

update ps_product p, 
       ps_feature_lang fl, 
       ps_feature_product fp, 
       ps_feature_value_lang fvl 
   set p.depth=fvl.value 
 where p.id_product=fp.id_product 
   and fl.id_feature=fp.id_feature 
   and fl.name='Depth' 
   and fvl.id_feature_value=fp.id_feature_value; 
```

一个注意事项：由于`ps_feature_value_lang.value`字段是“十进制（ `varchar(255)`20,6 `ps_product.width/height/depth`）”，因此查询仅更新值，但不更新度量单位。
这意味着您必须在“本地化”设置中设置您在 CSV 文件中使用的相同“维度单位”（例如，在您的虚拟文件中使用“cm”）。
最后，关于“位置”的含义：它只是一个序号，用于在“功能”选项卡中按一定顺序显示各种功能。
即使我没有尝试过，也应该可以从 CSV 文件中添加新的产品功能，因此通过“位置”字段，您还可以指定必须在哪个位置添加这些新功能。

# r - 使用间隔将数据框拆分为列表

> ID：13137490
> 
> 赞同：1
> 
> 时间：2012-10-30T10:55:12.667
> 
> 标签：r, list, dataframe, intervals

我想像这样拆分数据框

```
chr.pos nt.pos  CNV
1   74355   0
1   431565  0
1   675207  0
1   783605  1
1   888149  1
1   991311  1
1   1089305 1
1   1177669 1
1   1279886 0
1   1406311 0
1   1491385 0
1   1579761 0
2   1670488 1
2   1758800 1
2   1834256 0
2   1902924 1
2   1978088 1
2   2063124 0 
```

关键是要获取 chr 相同且 CNV=1 列的区间列表，但要考虑到它们之间的 0 inervals

```
[[1]]

   1    783605  1
   1    888149  1
   1    991311  1
   1    1089305 1
   1    1177669 1
[[2]]
   2    1670488 1
   2    1758800 1
[[3]]
   2    1902924 1
   2    1978088 1 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T11:04:04.633

您可以使用`rle`创建一个变量来使用`split`

```
 # create a group identifier
  DF$GRP <- with(rle(DF$CNV), rep(seq_along(lengths),lengths))

  # split a subset of DF which contains only CNV==1
  split(DF[DF$CNV==1,],DF[DF$CNV==1,'GRP'] )

$`2`
  chr.pos  nt.pos CNV GRP
4       1  783605   1   2
5       1  888149   1   2
6       1  991311   1   2
7       1 1089305   1   2
8       1 1177669   1   2

$`4`
   chr.pos  nt.pos CNV GRP
13       2 1670488   1   4
14       2 1758800   1   4

$`6`
   chr.pos  nt.pos CNV GRP
16       2 1902924   1   6
17       2 1978088   1   6 
```

# objective-c - 接收关于从其父集合或表视图中删除 UICollectionViewCell（或 UITableViewCell）的通知

> ID：13137494
> 
> 赞同：2
> 
> 时间：2012-10-30T10:55:30.610
> 
> 标签：objective-c, uitableview, uikit, uicollectionview, uicollectionviewcell

**背景：**

我有一个`UICollectionViewController`以两种模式之一显示项目，用户可以在这两种模式之间切换。每种模式使用不同类别的`UICollectionViewCell`. 我们将这些模式称为“列表视图”和“网格视图”。

当我切换模式时，我调用`.reloadData`，`UICollectionView`它使用正确的单元格类重绘集合视图。这里一切正常。

现在：在`UICollectionViewCell`一种类型的单元格的子类中，我希望在包含它的集合视图切换模式时得到通知。视觉上，屏幕上的一个单元格消失了；集合视图完全使用其他类型的单元格绘制。切换回来时，单元格会重新显示。

**问题：**

`UICollectionViewCell`当 a 从其父集合视图中*“删除”*（即不再显示；我不确定幕后发生了什么）时，如何通知我？

**笔记：**

*   `prepareForReuse`当集合视图`updateData`导致单元格不再被包含时，不会在单元格上调用。
*   `willTransitionFromLayout:toLayout:`（一个空的布局？）没有被调用。
*   覆盖`didMoveToSuperview`没有帮助；它没有被调用。
*   观察`.hidden`或`.alpha`对细胞不起作用。
*   `dealloc`不调用单元格；它停留在重用队列中。

牢房中的某些东西一定在发生变化，我可以观察到或陷入其中，那是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:15:32.053

更新：`UICollectionViewDelegate`有这种方法，从文档中看它似乎符合我的要求：

*   集合视图：didEndDisplayingCell：forItemAtIndexPath：

* * *

原答案：

当我要切换和调用时，我通过使用这种方法`UICollectionViewController`手动通知即将到来的厄运的*可见*单元，我得到了这个工作`reloadData`：

```
- (void)notifyCellsWillBeHidden {
    for (UICollectionViewCell *cell in self.collectionView.visibleCells) {
        if ([cell respondsToSelector:@selector(willBeRemovedFromCollectionView)]) {
            [cell performSelector:@selector(willBeRemovedFromCollectionView)];
        }        
    }
} 
```

如果这些单元实现了上述方法，那么它们就可以做他们需要做的事情。

调用`prepareForReuse`可能不是一个好主意，因为如果这是一个问题，它将在重新显示单元格之前再次调用。

我仍然很好奇是否有办法让单元格接收通知，即如果没有明确的调用，它将变得不可见。

# php - GD饼图图像不会显示

> ID：13137495
> 
> 赞同：0
> 
> 时间：2012-10-30T10:55:32.443
> 
> 标签：php, image, image-processing, gd

这些是我的代码：

**index.php 文件**

```
<script>
        $(document).ready(function() {  
            $('#num_fields').change(function(){
               var num = $('#num_fields').val();                  

                var i = 0,j=0; 
                var html = ''; 
                for (i=1;i<=num;i++) {

                        html += 'Name: <input type="text" name="field-' + i + '" maxlength="25"/> Rating: <select name="rating-'+ i +'"><option value=50>1</option><option value=80>2</option><option value=110>3</option><option value=140>4</option><option value=170>5</option><option value=200>6</option><option value=230>7</option><option value=260>8</option><option value=290>9</option><option value=320>10</option></select><br/>'; 
                }
                $('#numFields').html(html);
            });
        }); 
</script>

<form name="input" method="post" action="generate.php">
            Select number of fields:      
                <select id="num_fields" name="num_fields">
                    <option selected>     SELECT   </option>
                    <?php for($i=6;$i<=10;$i++)
                        echo "<option value=$i>$i</option>";
                    ?>
                </select>
             <div id="numFields"></div><br/>
            <input type="submit" name="submit" value="Generate Wheel"/>
</form> 
```

* * *

**生成.php 文件**

```
<body>
    <div style="margin-top: 0px;">
        <a href="code here">Print This Image</a>
        <img src="image.php" alt="" />
    </div>
</body> 
```

* * *

**图像.php 文件**

```
$num_fields = $_POST['num_fields'];
// create image
$image = imagecreate(500, 500);

// allocate some colors
$white    = imagecolorallocate($image, 255, 255, 255);
$pink     = imagecolorallocate($image, 255, 105, 180);
$red = imagecolorallocate($image, 255, 000, 000);
$green     = imagecolorallocate($image, 034, 139, 034);
$brown = imagecolorallocate($image, 139, 069, 019);
$yellow      = imagecolorallocate($image, 255, 255, 000);
$orange  = imagecolorallocate($image, 255, 140, 000);
$blue  = imagecolorallocate($image, 100, 149, 237);
$purple  = imagecolorallocate($image, 218, 112, 214);
$gray  = imagecolorallocate($image, 205, 205, 193);
$black    = imagecolorallocate($image, 000, 000, 000);
$cyan    = imagecolorallocate($image, 000, 255, 255);

//bg color//
imagefilledrectangle($image,0,0,500,500,$white);

$font = 'arial.ttf'; 

if($num_fields =='6')
{ 
// for each slices
imagefilledarc($image, 250, 250, $_POST['rating-1'], $_POST['rating-1'], 0, 60, $pink, IMG_ARC_EDGED);
imagefilledarc($image, 250, 250, $_POST['rating-2'], $_POST['rating-2'], 60, 120 , $green, IMG_ARC_EDGED);
imagefilledarc($image, 250, 250, $_POST['rating-3'], $_POST['rating-3'], 120, 180 , $red, IMG_ARC_EDGED);
imagefilledarc($image, 250, 250, $_POST['rating-4'], $_POST['rating-4'], 180, 240 , $gray, IMG_ARC_EDGED);
imagefilledarc($image, 250, 250, $_POST['rating-5'], $_POST['rating-5'], 240, 300 , $orange, IMG_ARC_EDGED);
imagefilledarc($image, 250, 250, $_POST['rating-6'], $_POST['rating-6'], 300, 360 , $blue, IMG_ARC_EDGED);

//outline
imagefilledarc($image, 250, 250, 400, 400, 0,360, $black, IMG_ARC_NOFILL); //outer circle
imagefilledarc($image, 250, 250, 320, 320, 0,360, $black, IMG_ARC_NOFILL); //inner circle
imageline($image, 250, 250, 450, 250, $black ); //line bet blue and pink 0 deg
imageline($image, 250, 250, 349, 78, $black ); //line bet orange and blue
imageline($image, 250, 250, 150, 78, $black ); //line bet orange and gray 
imageline($image, 250, 250, 50, 250, $black ); //line bet red and gray 
imageline($image, 250, 250, 151, 422, $black ); //line bet red and green 
imageline($image, 250, 250, 350, 422, $black ); //line bet pink and green 

//text legends 2
imagettftext($image, 9, 243, 425, 280, $black, $font, $_POST['field-1']);
imagettftext($image, 9, 183, 315, 415, $black, $font, $_POST['field-2']);
imagettftext($image, 9, 120, 130, 380, $black, $font, $_POST['field-3']);
imagettftext($image, 9, 60, 75, 210, $black, $font, $_POST['field-4']);
imagettftext($image, 9,0, 200, 80, $black, $font, $_POST['field-5']);
imagettftext($image, 9, 300, 378, 128, $black, $font, $_POST['field-6']);

// flush image
header('Content-type: image/png');
imagepng($image);
imagedestroy($image);   
} 
```

我得到的只是一个破碎的图像。请帮忙！:( 我想要的只是在渲染的饼图图像中有一个“打印此图像”选项，这是我知道在图像中放置 html 代码的唯一方法。如果您有其他解决方案，请通过建议帮助我。谢谢！

**编辑**：我只想在生成图像的页面上有一个“打印”按钮。**我已经搜索过了，人们说我不能在header()**之前放置任何 html 代码甚至是回显代码。如果我将 html 代码放在**image.php**文件中的所有 php 代码之后，它会显示图像图表，但 html 代码中的任何其他文本都不会显示。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:02:46.657

简单.. 由于以下原因，您无法看到 PHP 错误：

`header('Content-type: image/png');`

当您的帖子字段具有有效数字时，您的代码工作正常

简单示例

```
$num_fields = 6;
for($i = 0; $i <= $num_fields; $i ++) {
    $_POST['rating-' . $i] = mt_rand(50, 200);
    $_POST['field-' . $i] = "Field $i";
}
// create image
$image = imagecreate(500, 500);

// allocate some colors
$white = imagecolorallocate($image, 255, 255, 255);
$pink = imagecolorallocate($image, 255, 105, 180);
$red = imagecolorallocate($image, 255, 000, 000);
$green = imagecolorallocate($image, 034, 139, 034);
$brown = imagecolorallocate($image, 139, 069, 019);
$yellow = imagecolorallocate($image, 255, 255, 000);
$orange = imagecolorallocate($image, 255, 140, 000);
$blue = imagecolorallocate($image, 100, 149, 237);
$purple = imagecolorallocate($image, 218, 112, 214);
$gray = imagecolorallocate($image, 205, 205, 193);
$black = imagecolorallocate($image, 000, 000, 000);
$cyan = imagecolorallocate($image, 000, 255, 255);

// bg color//
imagefilledrectangle($image, 0, 0, 500, 500, $white);

$font = 'verdana.ttf';

if ($num_fields == '6') {
    // for each slices
    imagefilledarc($image, 250, 250, $_POST['rating-1'], $_POST['rating-1'], 0, 60, $pink, IMG_ARC_EDGED);
    imagefilledarc($image, 250, 250, $_POST['rating-2'], $_POST['rating-2'], 60, 120, $green, IMG_ARC_EDGED);
    imagefilledarc($image, 250, 250, $_POST['rating-3'], $_POST['rating-3'], 120, 180, $red, IMG_ARC_EDGED);
    imagefilledarc($image, 250, 250, $_POST['rating-4'], $_POST['rating-4'], 180, 240, $gray, IMG_ARC_EDGED);
    imagefilledarc($image, 250, 250, $_POST['rating-5'], $_POST['rating-5'], 240, 300, $orange, IMG_ARC_EDGED);
    imagefilledarc($image, 250, 250, $_POST['rating-6'], $_POST['rating-6'], 300, 360, $blue, IMG_ARC_EDGED);

    // outline
    imagefilledarc($image, 250, 250, 400, 400, 0, 360, $black, IMG_ARC_NOFILL); // outer
                                                                                // circle
    imagefilledarc($image, 250, 250, 320, 320, 0, 360, $black, IMG_ARC_NOFILL); // inner
                                                                                // circle
    imageline($image, 250, 250, 450, 250, $black); // line bet blue and pink 0
                                                   // deg
    imageline($image, 250, 250, 349, 78, $black); // line bet orange and blue
    imageline($image, 250, 250, 150, 78, $black); // line bet orange and gray
    imageline($image, 250, 250, 50, 250, $black); // line bet red and gray
    imageline($image, 250, 250, 151, 422, $black); // line bet red and green
    imageline($image, 250, 250, 350, 422, $black); // line bet pink and green

    // text legends 2
    imagettftext($image, 9, 243, 425, 280, $black, $font, $_POST['field-1']);
    imagettftext($image, 9, 183, 315, 415, $black, $font, $_POST['field-2']);
    imagettftext($image, 9, 120, 130, 380, $black, $font, $_POST['field-3']);
    imagettftext($image, 9, 60, 75, 210, $black, $font, $_POST['field-4']);
    imagettftext($image, 9, 0, 200, 80, $black, $font, $_POST['field-5']);
    imagettftext($image, 9, 300, 378, 128, $black, $font, $_POST['field-6']);

    // flush image
    header('Content-type: image/png');
    imagepng($image);
    imagedestroy($image);
} 
```

输出

![在此处输入图像描述](../Images/7721153339822f598623633568d12ba9.png)

# cucumber - 如何在黄瓜中使用 ARGV？

> ID：13137496
> 
> 赞同：2
> 
> 时间：2012-10-30T10:55:36.670
> 
> 标签：cucumber, watir-webdriver, argv

我怎样才能写 argv。在黄瓜测试？

我希望我的测试在 localhost:3000 上运行，而不是在产品（现场）上运行。

我想要这个和argv。界定。

```
ARGV.each do |s|
  if s == `-d`
    @text = `localhost:3000`
  elsif   s == `-p`
    @text = `www.world.com`
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:16:16.847

通过快速测试，您似乎可以将代码原样包含在 env.rb 文件中。然后，该`@test`变量将在您的所有步骤中可用。

（我不确定这是否是最佳做法，但它确实有效。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T09:18:33.593

您可以创建 bin 目录并使用您的 ARGV 逻辑将 cucumber.rb 文件放在那里。

然后当你像这样运行时：

`ruby bin/cucumber.rb -u '[http://www.ololo.com](http://www.ololo.com)'`

该脚本将：

*   设置你的测试环境（设置@url或写入env.yml到' [http://www.ololo.com](http://www.ololo.com) '）
*   运行“黄瓜”命令。

或者你可以使用这个：[如何在我的 cucumber.yml 文件中指定浏览器？](https://stackoverflow.com/questions/18833071/how-do-i-specify-the-browsers-in-my-cucumber-yml-files?rq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T06:21:47.580

我会推荐[Fig Newton](https://github.com/cheezy/fig_newton)来解决这类问题。您可以在执行时调用许多不同的*环境。*这很简单。

# linux - 如何使用 awk 压缩文件

> ID：13137501
> 
> 赞同：27
> 
> 时间：2012-10-30T10:55:57.747
> 
> 标签：linux, shell, unix, gzip, bzip2

如何更改压缩文件的以下命令？

```
awk 'FNR==NR { array[$1,$2]=$8; next } ($1,$2) in array { print $0 ";" array[$1,$2] }' input1.vcf input2.vcf 
```

该命令适用于普通文件。我需要更改压缩文件的命令。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-30T13:25:29.973

您需要像这样读取它们的压缩文件：

```
awk '{ ... }' <(gzip -dc input1.vcf.gz) <(gzip -dc input2.vcf.gz) 
```

试试这个：

```
awk 'FNR==NR { sub(/AA=\.;/,""); array[$1,$2]=$8; next } ($1,$2) in array { print $0 ";" array[$1,$2] }' <(gzip -dc input1.vcf.gz) <(gzip -dc input2.vcf.gz) | gzip > output.vcf.gz 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-05-26T13:42:49.497

```
zcat FILE | awk '{ ...}' 
```

我无法判断所有这些方法中哪种方法效果最好，zcat 至少打字速度更快；）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-30T10:57:52.783

```
bzip2 -dc input1.vcf.bz2 input2.vcf.bz2 | awk 'FNR==NR { array[$1,$2]=$8; next } ($1,$2) in array { print $0 ";" array[$1,$2] }' 
```

或者

```
gzip -dc input1.vcf.gz input2.vcf.gz | awk 'FNR==NR { array[$1,$2]=$8; next } ($1,$2) in array { print $0 ";" array[$1,$2] }' 
```

编辑：

要编写压缩输出，只需附加

```
| bzip2 >output.vcf.bz2 
```

或者

```
| gzip >output.vcf.gz 
```

这适用于任何将结果打印到标准输出的程序。

顺便说一句：编辑如此大的命令行很快就会变得乏味。您应该考虑编写一个小的 shell 脚本来完成这项工作。这具有额外的好处，您不必记住整个内容，并且可以轻松地重复命令或在必要时对其进行修改。

Linux shell 编程的一个很好的起点是Mike G的[Bash Programming Introduction 。](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html)

# objective-c - ObjC：将 id 限制为某些类型

> ID：13137506
> 
> 赞同：1
> 
> 时间：2012-10-30T10:56:27.997
> 
> 标签：objective-c, types

在 Objective-C 中，是否可以限制`id`为几种类型？我想写一个有`id`参数的方法，但是这个方法只适用于某些 ObjC 类型：使用`id`可能会导致运行时错误。是否有任何 LLVM 约定或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:01:06.953

只要你在处理对象，你就可以要求它的类：

```
id anId;

if ([anId isKindOfClass:[NSNumber class]]) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:59:56.093

`id`是一个通用的Objective-C 对象指针，即它表示*任何对象*。

您可以限制类型的唯一方法是使用协议：

```
id <myProtocol> 
```

因此，通过这种方式，您指向任何采用该`myProtocol`协议的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T11:03:35.310

“限制”`id`不是 Objective-C 的东西。无论如何，如果你传递一个类型与方法声明中指定的类型不匹配的对象，你只会得到一个警告而不是编译器错误（除非你编译 using `-Werror`），所以编译器不能真正*阻止*你从这样做。

是的，这很容易出现运行时错误，但这就是 Objective-C 的工作方式。您*应该*做的一件事是**记录**接受哪些类型。

您*可以*做的一件事是**在运行时检查类型**，可以使用 的`isKindOfClass:`或`isMemeberOfClass:`方法`NSObject`。此外，如果对象应该响应一组公共消息，您可以将它们包装到协议中并要求类型的表达式`id <MyProtocol>`。

# xml - 通过 xslt 导出文件生成器 xml

> ID：13137517
> 
> 赞同：4
> 
> 时间：2012-10-30T10:57:51.460
> 
> 标签：xml, xslt, loops, filemaker

我正在尝试从我们的 Filemaker 数据库中导出一些数据并通过 XSLT 对其进行转换

我已经完成了大部分工作，但陷入了一些嵌套数据：

XML 输出的当前结构是：

```
 <?xml version="1.0" encoding="UTF-8"?>
<FMPXMLRESULT xmlns="http://www.filemaker.com/fmpxmlresult">
    <ERRORCODE>0</ERRORCODE>
    <PRODUCT BUILD="07-18-2011" NAME="FileMaker" VERSION="ProAdvanced 11.0v4"/>
    <DATABASE DATEFORMAT="D/m/yyyy" LAYOUT="" NAME="bubbles.fp7" RECORDS="34604" TIMEFORMAT="k:mm:ss "/>
    <METADATA>
        <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="description intro" TYPE="TEXT"/>
        <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="Description Line 1" TYPE="TEXT"/>
        <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="Description Line 2" TYPE="TEXT"/>
        <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="description short" TYPE="TEXT"/>
        <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="description W3" TYPE="TEXT"/>
        <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="Destination URL" TYPE="TEXT"/>
        <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="EAN Code" TYPE="TEXT"/>
        <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="product code W1" TYPE="TEXT"/>
        <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="product group name" TYPE="TEXT"/>
        <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="product name W6" TYPE="TEXT"/>
        <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="stock_for_sale_quantity" TYPE="NUMBER"/>
        <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="UPC Code" TYPE="NUMBER"/>
        <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="web link standard" TYPE="TEXT"/>
        <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="products_ADDITIONAL_IMAGES::full url" TYPE="TEXT"/>
    </METADATA>
    <RESULTSET FOUND="6">
        <ROW MODID="5678" RECORDID="5051">
            <COL>
                <DATA>description info here</DATA>
            </COL>
            <COL>
                <DATA> desc line 1</DATA>
            </COL>
            <COL>
                <DATA>desc line 2</DATA>
            </COL>
            <COL>
                <DATA>short description here</DATA>
            </COL>
            <COL>
                <DATA>
Reall long description goes in here</DATA>
            </COL>
            <COL>
                <DATA>url to product</DATA>
            </COL>
            <COL> 
                <DATA/>
            </COL>
            <COL>
                <DATA>SKU</DATA>
            </COL>
            <COL>
                <DATA>Acoustic guitars</DATA>
            </COL>
            <COL>
                <DATA>Epiphone EJ-200 Acoustic Guitar Vintage Sunburst EJ200</DATA>
            </COL>
            <COL>
                <DATA>0</DATA>
            </COL>
            <COL>
                <DATA>711106264509</DATA>
            </COL>
            <COL>
                <DATA>http://www.mywebsite.co.uk/catalog/product/view/id/15186</DATA>
            </COL>
            <COL>
                <DATA>http://www.mywebsite.co.uk/store/images/uploads/additional/epiej200vsbrst_01.jpg</DATA>
                <DATA>http://www.mywebsite.co.uk/store/images/uploads/additional/epiej200vsbrst_02.jpg</DATA>
                <DATA>http://www.mywebsite.co.uk/store/images/uploads/additional/epiej200vsbrst_03.jpg</DATA>
                <DATA>http://www.mywebsite.co.uk/store/images/uploads/additional/epiej200vsbrst_04.jpg</DATA>
                <DATA>http://www.mywebsite.co.uk/store/images/uploads/additional/epiej200vsbrst_05.jpg</DATA>
                <DATA>http://www.mywebsite.co.uk/store/images/uploads/additional/epiej200vsbrst_06.jpg</DATA>
                <DATA>http://www.mywebsite.co.uk/store/images/uploads/epiej200vsbrst.jpg</DATA>
            </COL>
        </ROW> 
```

我的 XSL 在一定程度上可以正常工作，但我无法完全挑选出每个图像：

```
 <?xml version="1.0" encoding="utf-8"?>
    <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fmp="http://www.filemaker.com/fmpxmlresult" version="1.0" exclude-result-prefixes="fmp">
<xsl:output method="xml" version="1.0" encoding="windows-1251" indent="yes"/>
<xsl:template match="/">
    <product>
        <product_count>
            <xsl:value-of select="count(//fmp:ROW)"/>
        </product_count>
        <xsl:for-each select="fmp:FMPXMLRESULT/fmp:RESULTSET/fmp:ROW">
            <product_info>
                <description_info>
                    <xsl:value-of select="fmp:COL[1]/fmp:DATA"/>
                </description_info>
                <desc_line_1>
                    <xsl:value-of select="fmp:COL[2]/fmp:DATA"/>
                </desc_line_1>
                <desc_line_2>
                    <xsl:value-of select="fmp:COL[3]/fmp:DATA"/>
                </desc_line_2>
                <short_description>
                    <xsl:value-of select="fmp:COL[4]/fmp:DATA"/>
                </short_description>
                <long_description>
                    <xsl:value-of select="fmp:COL[5]/fmp:DATA"/>
                </long_description>
                <dest_url>
                    <xsl:value-of select="fmp:COL[6]/fmp:DATA"/>
                </dest_url>
                <ean>
                    <xsl:value-of select="fmp:COL[7]/fmp:DATA"/>
                </ean>
                <sku>
                    <xsl:value-of select="fmp:COL[8]/fmp:DATA"/>
                </sku>
                <group_name>
                    <xsl:value-of select="fmp:COL[9]/fmp:DATA"/>
                </group_name>
                <product_name>
                    <xsl:value-of select="fmp:COL[10]/fmp:DATA"/>
                </product_name>
                <stock_level>
                    <xsl:value-of select="fmp:COL[11]/fmp:DATA"/>
                </stock_level>
                <upc>
                    <xsl:value-of select="fmp:COL[12]/fmp:DATA"/>
                </upc>
                <web_link>
                    <xsl:value-of select="fmp:COL[13]/fmp:DATA"/>
                </web_link>
                <position>
                    <xsl:value-of select="fmp:DATA"/>
                </position>
                <images>
                    <xsl:variable name="count" select="count(fmp:COL[14]/fmp:DATA)"/>
                    <image_count>
                        <xsl:value-of select="$count"/>
                    </image_count>
                    <xsl:for-each select="fmp:COL[14]/fmp:DATA[position()&lt;=$count]">
                        <img>
                            <xsl:value-of select="position()"/>
                        </img>
                    </xsl:for-each>
                </images>
            </product_info>
        </xsl:for-each>
    </product>
</xsl:template> 
```

这有效，除了给我正确数量的标签但没有数据的位

```
 <images>
        <image_count>7</image_count>
        <img/>
        <img/>
        <img/>
        <img/>
        <img/>
        <img/>
        <img/>
    </images> 
```

任何人都可以帮助完成最后一个小循环吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:12:38.087

你让事情变得比你需要的复杂得多：

```
<xsl:for-each select="fmp:COL[14]/fmp:DATA">
  <img>
    <xsl:value-of select="."/>
  </img>
</xsl:for-each> 
```

会给你

```
<img>http://www.absolutemusic.co.uk/store/images/uploads/additional/epiej200vsbrst_01.jpg</img>
<img>http://www.absolutemusic.co.uk/store/images/uploads/additional/epiej200vsbrst_02.jpg</img>
.... 
```

顺便说一句，我过去不得不编写文件生成器 XSLT 并保持理智（并且不必记住每个字段的正确列索引），我使用了这样的技巧：

```
<xsl:variable name="mdf" select="/fmp:FMPXMLRESULT/fmp:METADATA/fmp:FIELD" />
<xsl:variable name="descIntro" select="count($mdf[
    following-sibling::fmp:FIELD/@NAME = 'description intro']) + 1" />
<xsl:variable name="descL1" select="count($mdf[
    following-sibling::fmp:FIELD/@NAME = 'Description Line 1']) + 1" /> 
```

等等。这将为每个字段名称创建一个变量，其中包含该字段的正确索引，因此您可以使用表达式`fmp:COL[$images]`代替`fmp:COL[14]`. 这还有一个额外的好处，即如果您稍后更改导出定义以包含 XSLT 自动补偿的其他字段，您不必手动修改所有数字。

# html - 随机 HTML 链接生成器

> ID：13137527
> 
> 赞同：-1
> 
> 时间：2012-10-30T10:58:35.670
> 
> 标签：html, url, hyperlink

我希望生成一个 html 文件，当访问该文件时，它会从一批 URL 中选择一个随机的 URL，并将用户直接发送到这个随机链接。

当用户单击链接时会发生此功能，例如“www.thepegeek.com/random”，该链接最终会从可能的 URL 列表中绘制

关于如何使用 HTML 实现这一点的任何建议，以便可以根据需要更新这批 URL。我希望使用我的 Dropbox 帐户来托管它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:03:24.780

这对于纯 HTML 是不可能的。

您将不得不使用 JavaScript，将 URL 保存在数组或对象中，当用户单击链接时，您会捕获事件，从数组中选择一个随机 URL 并进行修改`document.location.href`以将用户发送到那里。*不确定 JavaScript Dropbox 将允许您运行多少，因此您将尝试一下*

另一种选择是使用您选择的服务器端语言并将用户重定向到随机 URL。*但是，如果您打算将其托管在 Dropbox 上，这将不起作用。*

# c# - VS2012中使用Postsharp编译c#项目时出错

> ID：13137529
> 
> 赞同：3
> 
> 时间：2012-10-30T10:58:45.077
> 
> 标签：c#, nlog, postsharp

我目前正在开发一个我们想要添加 PostSharp 功能的项目。

我已经设置了我的 Postsharp 属性

```
[Serializable]
public class NLogTraceAttribute : OnMethodBoundaryAspect
{
    private readonly string _logLevel;
    ILogger logger;

    public NLogTraceAttribute(string logLevel)
    {
        _logLevel = logLevel;

        logger = new Logger("TraceAttribute");
    }

    public override void OnEntry(MethodExecutionArgs args)
    {
        LogAction("Enter", args);
    }

    public override void OnExit(MethodExecutionArgs args)
    {
        LogAction("Leave", args);
    }

    private void LogAction(string action, MethodExecutionArgs args)
    {
        var argumentsInfo = args.GetArgumentsInfo();

        logger.Log(_logLevel, "{0}: {1}.{2}{3}", action, args.Method.DeclaringType.Name, args.Method.Name, argumentsInfo);
    }
} 
```

并尝试将其用作

```
 [NLogTrace(NLogLevel.Debug)] 
```

但是，在编译项目时，我收到以下错误：

```
 Error   26  Cannot serialize the aspects: Type 'NLog.Logger' in Assembly 
    'NLog, Version=2.0.0.0, Culture=neutral, PublicKeyToken=5120e14c03d0593c' 
    is not marked as serializable.. 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T12:10:04.317

```
[NonSerialized]
public Logger logger; 
```

像上面标记的那样声明记录器已经解决了我遇到的问题

# javascript - 获取 iframe javascript 的第一个父级

> ID：13137531
> 
> 赞同：1
> 
> 时间：2012-10-30T10:58:47.527
> 
> 标签：javascript

我在 test.aspx 中有一个 iframe，当用户单击 iframe 内的支付按钮时，iframe 重定向到具有相同 iframe 的 check.aspx

如果第一次付款成功，`then window.parent.location.href==test.aspx`

如果付款失败，iframe 会再次重定向到 check.aspx，所以现在

```
window.parent.location.href==check.aspx 
```

当付款失败时，iframe 保持重定向到 check.aspx 并且父位置不断变化，例如，如果客户端失败 3 次，我需要在 check.aspx`window.parent.parent.parent.location.href`中获取 test.aspx 重定向。

当用户付款成功时，我想重定向 test.aspx 但我不知道他有多少子 iframe 窗口！

我需要类似的东西

window.parent[0].location.href=success.aspx，这样我就可以重定向第一个父窗口。

谢谢你的帮助

巴罗兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:02:54.283

您始终可以使用 JavaScript 访问顶部窗口

```
window.top.location.href 
```

有关更多信息，请参阅：[window.location.href 和 top.location.href 之间的区别](https://stackoverflow.com/questions/3332756/difference-between-window-location-href-and-top-location-href)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:02:20.693

您可以使用：

```
window.top.location.href 
```

或者：

```
var par = window.parent;
while ( par.parent ) {
    par = par.parent;
}

//par === window.top 
```

# ruby-on-rails-3 - Mongoid Embeds_many 不会保存在嵌套表单中

> ID：13137532
> 
> 赞同：3
> 
> 时间：2012-10-30T10:59:03.313
> 
> 标签：ruby-on-rails-3, mongoid, nested-forms, mongoid3

我有一个我正在尝试建立的 embeds_many 关联，我之前已经成功完成了该关联，但我试图以一种嵌套形式完成所有操作，但我无法弄清楚。

假设我们有一个`pocket`模型：

```
class Pocket
    include Mongoid::Document
    field :title, type: String
    embeds_many :coins, cascade_callbacks: true
end 
```

和硬币模型：

```
class Coin
    include Mongoid::Document
    field :name, type: String
    embedded_in :pocket
end 
```

在我的口袋表格中，我正在使用：

```
= f.fields_for @pocket.coins do |coin|
    = coin.text_field :name 
```

我的控制器是默认的脚手架控制器。当我使用控制台时，它保存得很好，我可以看到我创建的新口袋和硬币。但是当我尝试从表单创建或更新硬币时，口袋会保存但硬币保持不变。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:31:46.660

将您的模型口袋更改为

```
class Pocket
  include Mongoid::Document
  field :title, type: String
  embeds_many :coins, cascade_callbacks: true
  accepts_nested_attributes_for :coins
end 
```

它会正常工作。

# windows - 我的 Delphi 7 应用程序在 Application.Initialize 上停止并且不返回到下一行

> ID：13137537
> 
> 赞同：1
> 
> 时间：2012-10-30T10:59:13.150
> 
> 标签：windows, delphi, operating-system, delphi-7

我在 Delphi 7 上创建了一个应用程序。我的应用程序从昨天开始运行良好。我不知道昨天发生了什么导致我的应用程序在源代码中的 Application.Initialize 行停止，并且在我跟踪程序时不返回到下一行。当生成的文件确实在另一台机器上正确运行时，我无法从寡妇那里运行创建的可执行文件。这是编译器停止的代码：

> 程序 Info_Kiosk；
> 
> 使用 SysUtils、Forms、...（其他一些单位）；
> 
> {$R *.res}
> 
> 开始
> **应用程序。初始化；**
> 
> Application.CreateForm(Tfrm_Main, frm_Main);

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T11:40:18.870

的实现`TApplication.Initialize`看起来像这样：

```
procedure TApplication.Initialize;
begin
  if InitProc <> nil then TProcedure(InitProc);
end; 
```

因此，请查看您的代码以查找任何分配给`InitProc`.

另一种方法是使用您的调试器来帮助您。启用调试 DCU。`Application.Initialize`然后在 .dpr 文件中的调用上设置一个断点。然后使用 进入该过程`F7`。然后进入调用`InitProc`并遵循它，直到你到达阻塞的代码。

如果您使用的是修订控制系统，您可以简单地检查项目的旧版本并使用二进制搜索来查找引入该行为的提交。如果您不使用修订控制，请立即开始使用。

# php - ZEND - 冲突的路线模式

> ID：13137540
> 
> 赞同：2
> 
> 时间：2012-10-30T10:59:13.970
> 
> 标签：php, zend-framework, routes, zend-route, zend-router

我正在使用 Zend 框架 1.12，试图提出自定义路由。

我正在尝试创建看起来像 facebook 的个人资料 URL ( [http://facebook.com/username](http://facebook.com/username) ) 的东西。所以，起初我尝试了这样的事情：

```
$router->addRoute(
            'eventName',
            new Zend_Controller_Router_Route(
                '/:eventName', 
                array(
                    'module' => 'default', 
                    'controller' => 'event', 
                    'action' => 'detail'
                )
            )
        ); 
```

每当我尝试运行 mydomain.com/something 时，我都会收到以下错误：

> 致命错误：在第 336 行的 /var/desenvolvimento/padroes/zf/ZendFramework-1.12.0/library/Zend/Controller/Plugin/Broker.php 中未捕获异常 'Zend_Controller_Router_Exception' 并带有消息 'eventName is not specified'

不仅我无法使那段代码工作，我所有的默认路由（显然）都被覆盖了。因此，例如，我有诸如“mydomain.com/admin”之类的东西应该将我发送到 Index 控制器上的“admin”模块，但现在返回相同的错误（因为它与 / 的模式相同：事件名称）。

我需要做的是创建这个自定义路由，而不覆盖默认路由并实际工作（dûh）。

我已经检查了在线文档和谷歌上的很多（很多）东西，但我没有找到与我遇到的错误或如何不覆盖默认路由相关的任何内容。我会很感激任何可以为我指明正确方向的东西。

谢谢。

* * *

编辑¹：我设法让它工作，但我根本没有使用任何路由。我刚刚用以下内容制作了一个插件：

```
public function preDispatch(\Zend_Controller_Request_Abstract $request) {

    if (!\Zend_Controller_Front::getInstance()->getDispatcher()->isDispatchable($request)) {

        $request->setModuleName($this->_eventRouter["module"]);
        $request->setControllerName($this->_eventRouter["controller"]);
        $request->setActionName($this->_eventRouter["action"]);

    }

} 
```

不过，这感觉像是一个丑陋的解决方法……正如[Tim Fountain](https://stackoverflow.com/users/105019/tim-fountain)指出的那样，我的事件是动态的（我从数据库中加载它们），所以我无法对其进行硬编码。此外，我当前的实现使我不必对每个模块/控制器/动作组合进行硬编码。

我只想知道是否有办法避免使用插件。

* * *

EDIT²：我不再做那个糟糕的插件了。我弄清楚是什么导致了路由器错误。我的路由定义没有变量“eventName”的有效默认值。我的解决方法是：

```
$router->addRoute(
        'eventName',
        new Zend_Controller_Router_Route(
            '/:eventName', 
            array(
                'module' => 'default', 
                'controller' => 'event', 
                'action' => 'detail',
                'eventName' => ''
            )
        )
    ); 
```

我仍然无法创建具有“冲突”模式的路由，例如**/admin**和**/:eventName**。如果有办法让**/admin**覆盖**/:eventName** ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T06:50:06.630

路线以 LIFO 为基础应用/匹配。正如[路由文档](http://framework.zend.com/manual/1.12/en/zend.controller.router.html)所指出的：

> **注意：**反向匹配路由以相反的顺序匹配，因此请确保首先定义最通用的路由。

因此，为了让您的“静态”路由（静态，在某种意义上它们不从数据库中提取`/admin`等）应用于您的动态路由（ `/:eventName`），请确保*稍后*在执行流程中定义静态路由.

实际上，这意味着您无法在引导期间定义静态路由，因此您必须在带有`routeStartup`钩子的插件中进行。也许，两个插件：一个用于您的动态路由，另一个用于静态路由，只需确保设置了插件的优先级，以便稍后添加静态路由。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T12:33:31.053

您收到的错误可能来自模板中的 URL 帮助程序调用。您需要为此指定 eventName 参数，因为您已将其设为必需，例如：

```
<a href="<?=$this->url(array('eventName' => 'foo'), 'eventName')?>">Something</a> 
```

您的其他问题的答案在一定程度上取决于您是否拥有静态、不变的事件列表或非事件 URL。您需要为路由器提供一种方法来确定`/foo`是事件还是控制器。为此，您可以将可能的事件硬编码到您的事件路由中，为您的其他非事件 URL 硬编码路由，或者（如果您的事件是动态的并且基于某些数据库内容）为您的事件路由编写一个自定义路由类，它可以进行查找以查看给定的字符串是否是事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:24:19.040

由于您使用的是 Zend Framework 1.x

这是我在这里添加的解决方案：[How to redirect Error Page and perform Routes in Zend Framework 1.x](https://stackoverflow.com/questions/13427782/how-to-redirect-error-page-and-perform-routes-in-zend-framework-1-x)

此外，为了让生活更轻松......这里是：

`I am still unable to create routes with "conflicting" patterns, such as /admin and /:eventName. If only there was a way to make /admin override /:eventName...`

一旦你在`action`调用你的eventName，你可以检查那个== admin，稍后你可以通过指定需要加载哪个动作来定义重新路由，在那个条件下。

简单的？:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T05:05:05.997

定义 eventName，即使它不是必需的，也可以将其留空。

# asp.net - 在 WCF 中是必需的

> ID：13137541
> 
> 赞同：1
> 
> 时间：2012-10-30T10:59:15.810
> 
> 标签：asp.net, wcf

如果要添加数据成员，它将通过线路发送到客户端。添加 Isrequired 有什么好处？请解释

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T11:10:45.527

这意味着当您通过网络传递对象的副本时，您应用它的数据成员必须存在。

所以，

```
[DataContract]

    public class MyObject
    {
    [DataMember] 
    public int numberTest;
    [DataMember(IsRequired=true)]
    public int numberMustBeThere;
    } 
```

如果您发送了上述内容：

```
<MyObject>
<numberTest>123</numberTest>
</MyObject> 
```

它会失败，因为它声明 numberMustBeThere 应该存在

但是，如果您发送这两个中的任何一个，都可以，因为默认值为 false（因此不需要 numberTest）

```
<MyObject>
<numberMustBeThere>123</numberMustBeThere>
</MyObject>

<MyObject>
<numberTest>123</numberTest>
<numberMustBeThere>123</numberMustBeThere>
</MyObject> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:04:19.553

基本上，当您声明 DataMember IsRequired 时，您是说如果未设置数据合同的字段，则应在客户端上引发异常。这对于在数据合同中指定必填字段很有用。

我希望它有所帮助。

问候，罗德里戈

# javascript - 在输入检查中删除类不起作用

> ID：13137546
> 
> 赞同：0
> 
> 时间：2012-10-30T10:59:36.130
> 
> 标签：javascript, jquery, checkbox

我已经设置，如果选中输入复选框，则不透明度从 0.5 变为 1。

它不起作用，如果我反其道而行之，它实际上会起作用，但这不是我的目标！

我的 CSS 代码

```
 .opacitychange {opacity: 1;}
    #total {opacity: 0.5;} 
```

和

```
 if($("#iva").is(':checked'))
    {
        $('#total').html('+' + vat);
        total += vat;
        $('#total').addClass("opacitychange");
    }    
    else
        $('#total').html('0.00').removeClass("opacitychange");

    if($("#irpef").is(':checked'))
    {
        $('#total1').html('-' + irpf);
        total -= irpf;
        $('#total1').addClass("opacitychange");
    }
    else
        $('#total1').html('0.00').removeClass("opacitychange");
        $("#total2").html(total.toFixed(2));
    }; 
```

怎么了？

这里的[情况](http://jsfiddle.net/Manna/zfNL5/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:10:18.327

如果您的代码确实是：

```
if($("#iva").is(':checked'))
{
    $('#total').html('+' + vat);
    total += vat;
    $('#total').addClass("opacitychange");
}    
else
    $('#total').html('0.00').removeClass("opacitychange");

if($("#irpef").is(':checked'))
{
    $('#total1').html('-' + irpf);
    total -= irpf;
    $('#total1').addClass("opacitychange");
}
else // <-- this is not a typo?
    $('#total1').html('0.00').removeClass("opacitychange");
    $("#total2").html(total.toFixed(2));
}; 
```

那么你只需要在`{}`你的 else 语句中添加括号。你在你的 jsFiddle 中遇到了同样的问题，你的 else 语句是：

```
else
    $('#total').html('0.00');
    $('#total').html('0.00').removeClass("opacitychange"); 
```

您实际上只执行 else 语句中的第一条指令；然后总是删除类。修复该问题后，css gerarchy 仍然可能存在一些问题，但如果您更改：

```
.opacitychange {opacity: 1;} 
```

到：

```
.opacitychange {opacity: 1 !important;} 
```

那么它应该可以工作。

PS：对不起我的英语不好。

# c# - 为 Treeview 控件的节点编号

> ID：13137550
> 
> 赞同：0
> 
> 时间：2012-10-30T10:59:50.820
> 
> 标签：c#, treeview

这是否可以将 Treeview 控件的节点命名为 Matrix 之类的？

例如：

```
Parent Node
   --> Child Node
       --> Grand child node
Other Parent Node 
```

**到**（*像这样的东西*）

```
-- Node1
   --> Node11
       --> Node111
       --> Node112
         --> Node1121
   --> Node12
   --> Node13
-- Node2 
```

我通过按钮单击添加节点和子节点`btnAddNode`，`btnAddChildNode`
现在我只是增加一个计数器值，它没有捕捉到节点是子节点还是父节点（*只是递增*）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:14:31.600

最简单的解决方案是使用这两种简单的方法。首先是将 TreeNodes 添加到 TreeView 控件，然后将子节点添加到已添加的节点。

```
public void AddNode(TreeView parent, string text)
{
    if (parent != null)
    {
         parent.Nodes.Add(new TreeNode(text + (parent.Nodes.Count + 1).ToString()));
    }
}
public void AddChildNode(TreeNode parent)
{
    if(parent != null)
    {
         string number = parent.Text;
         parent.Nodes.Add(new TreeNode(number + (parent.Nodes.Count + 1).ToString()));   
    }
} 
```

要检查它是否正常工作，您可以执行以下操作：

```
AddNode(treeView1, "Node");
AddNode(treeView1, "Node");
AddNode(treeView1, "Node");
AddChildNode(treeView1.Nodes[0]);
AddChildNode(treeView1.Nodes[0]);
AddChildNode(treeView1.Nodes[0]);
AddChildNode(treeView1.Nodes[1]);
AddChildNode(treeView1.Nodes[2]);
AddChildNode(treeView1.Nodes[2]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:13:45.830

btnAddNode 和 btnAddChildNode 有什么区别？根节点是否使用 btnAddNode 添加，所有其他子节点是否使用 btnAddChildNode 添加？

原则上，您可以使用以下代码来查找要添加的节点的深度。

```
 counter = 0 ; 
   while (node.Parent != null)
   {
       node = node.Parent;
       counter++;
   } 
```

# ios - 如何在 PhoneGap / Cordova 2.0 中使用预填充的 SQLite 数据库？

> ID：13137555
> 
> 赞同：6
> 
> 时间：2012-10-30T11:00:05.893
> 
> 标签：ios, sqlite, web-applications, cordova

我想在我的网络应用程序中使用预先填充的数据库，以便我的应用程序可以离线工作。我如何使用最新版本的 PhoneGap / Cordova (2.0) 做到这一点？

我知道这个问题之前已经被问过，但是所有的答案似乎都相对于当前版本的cordova和iOS来说已经过时了

[https://github.com/atkinson/phonegap-prepopulate-db](https://github.com/atkinson/phonegap-prepopulate-db)两年未更新 [https://github.com/davibe/Phonegap-SQLitePlugin](https://github.com/davibe/Phonegap-SQLitePlugin) 7 个月未更新，为 1.7

我在这里找到了一个帖子： [http](http://www.raymondcamden.com/index.cfm/2012/7/27/Guest-Blog-Post-Shipping-a-populated-SQLite-DB-with-PhoneGap) ://www.raymondcamden.com/index.cfm/2012/7/27/Guest-Blog-Post-Shipping-a-populated-SQLite-DB-with-PhoneGap这是唯一的方法?

另外，我应该注意我使用的是 iOS 6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-04T20:20:26.830

我已经为带有 iOS6 的 Cordova 2.7 使用了以下插件，我看到它刚刚在一天前更新。[https://github.com/pgsqlite/PG-SQLitePlugin-iOS](https://github.com/pgsqlite/PG-SQLitePlugin-iOS)

他们这里也有安卓版本。问题的一部分是PhoneGap的变化，所以经常保持插件最新可能会很耗时，所以它们会失效。这是我在这个项目中使用的 AppDelegate.m 中的 init 方法的代码[http://www.binpress.com/app/conference-core-ios-for-phonegap/1483](http://www.binpress.com/app/conference-core-ios-for-phonegap/1483)

请记住，您有时需要擦除 iOS 模拟器，以便它重新加载与应用程序相关的文件。

```
- (id)init{

NSHTTPCookieStorage* cookieStorage = [NSHTTPCookieStorage sharedHTTPCookieStorage];

[cookieStorage setCookieAcceptPolicy:NSHTTPCookieAcceptPolicyAlways];

int cacheSizeMemory = 8 * 1024 * 1024; // 8MB
int cacheSizeDisk = 32 * 1024 * 1024; // 32MB 
```

> # 如果 __has_feature(objc_arc)
> 
> ```
>  NSURLCache* sharedCache = [[NSURLCache alloc] initWithMemoryCapacity:cacheSizeMemory diskCapacity:cacheSizeDisk diskPath:@"nsurlcache"]; 
> ```
> 
> # 别的

```
 NSURLCache* sharedCache = [[[NSURLCache alloc] initWithMemoryCapacity:cacheSizeMemory diskCapacity:cacheSizeDisk diskPath:@"nsurlcache"] autorelease]; 
```

> # 万一
> 
> ```
> [NSURLCache setSharedURLCache:sharedCache]; 
> ```

```
databaseName = @"SomeCoolDatabase.db";

NSLog(@"databaseName: %@", databaseName);

databasePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex: 0];
NSLog(@"databasePath: %@", databasePath);

databaseFile = [databasePath stringByAppendingPathComponent:databaseName];
NSLog(@"databaseFile: %@", databaseFile);
// Execute the "checkAndCreateDatabase" function
[self checkAndCreateDatabase];

self = [super init];
return self; 
```

> }
> 
> -（无效）checkAndCreateDatabase {

```
// Check if the SQL database has already been saved to the users phone, if not then copy it over
BOOL success;
// Create a FileManager object, we will use this to check the status
// of the database and to copy it over if required
NSFileManager *fileManager = [NSFileManager defaultManager];
// Check if the database has already been created in the users filesystem
success = [fileManager fileExistsAtPath:databaseFile];
// If the database already exists then return without doing anything
if(success){
    NSLog(@"Database Present");
    return;
} else {
    NSLog(@"database not present");
}
// If not then proceed to copy the database from the application to the users filesystem
// Get the path to the database in the application package
NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:databaseName];

// Create the database folder structure
[fileManager createDirectoryAtPath:databasePath withIntermediateDirectories:YES attributes:nil error:NULL];
// Copy the database from the package to the users filesystem
[fileManager copyItemAtPath:databasePathFromApp toPath:databaseFile error:nil];
[fileManager release]; 
```

> }

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T15:05:47.687

谢谢！如果没有从这里开始，我将无法做到这一点！

也就是说，这对我来说不是开箱即用的，所以我更新了它，而且我对 iOS 的本机代码绝不是“好”，所以我**非常**愿意接受建议。

我将建议的代码添加到 AppDelegate.m 文件中，得到了一堆错误。所以，我转到 AppDelegate.h 文件：

```
@interface AppDelegate : NSObject <UIApplicationDelegate>{} --Looks like this to start. 
```

* * *

让它看起来像这样：

```
@interface AppDelegate : NSObject <UIApplicationDelegate>{
   NSString* databaseName;
   NSString* databasePath;
   NSString* databaseFile;
} 
```

我只需要在其中声明变量。我还删除了这一行：

```
[fileManager release]; 
```

[因为，根据这个答案，我的项目似乎会自动发布？我希望？](https://stackoverflow.com/questions/8236797/xcode-cocoa-release-is-unavailable-error)

现在我必须努力将 DB 文件放入正确的位置，以便 xcode 找到它。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-20T16:44:17.837

虽然这个问题很老......认为它可能会帮助某人发布我的解决方案 - 发现于 2017 年。（由于 PhoneGap 发生了变化，旧的解决方案将不再适用或在 Android 和 Apple 应用程序市场上被接受。）我致力于此很长一段时间的问题-问题是您要导入预填充的数据库-没有很多简单的解决方案。我找到了最好和最简单的 - 目前也是唯一的 - 解决方案是 LiteHelpers CORDOVA-SQLITE-EXT ( [https://github.com/litehelpers/cordova-sqlite-ext](https://github.com/litehelpers/cordova-sqlite-ext) )

我已将此添加到我的应用程序中，并且运行良好。虽然我不得不放弃 PhoneGap - 并使用 CORDOVA - 但它对我有用。

# java - 对原始值的集合进行排序

> ID：13137556
> 
> 赞同：0
> 
> 时间：2012-10-30T11:00:12.130
> 
> 标签：java, collections

假设，我有一个带有卷号和姓名的学生班。我想整理一下卷号。我尝试了以下。这是我的代码：

```
package CollectionDemo;
import java.util.*;

class student1 implements Comparable<student1>{
    int rollNo;
    String name;

    student1(int rollNo,String name){
        this.rollNo=rollNo;
        this.name=name;
    }
    @Override
    public boolean equals(Object o){
        if((o instanceof student1) && (((student1)o).rollNo == rollNo)){
             return true;
        }
          else
        {
              return false;
        }
    }

    @Override
    public int hashCode(){
        return 1;
    }

    public int compareTo(student1 s) {
        return s.rollNo;
    }

    public String toString(){
        return "["+rollNo+","+name+"]";
    }
}
public class treeSetDemo {
    public static void main(String... a){

        Set<student1> set=new TreeSet<student1>();
        set.add(new student1(102,"Anu"));
        set.add(new student1(101,"Tanu"));
        set.add(new student1(103,"Minu"));

        System.out.println("elements:"+set);

    }
}

o/p: elements:[[102,Anu], [101,Tanu], [103,Minu]] 
```

所以，它没有排序:(如何使它正确。

谢谢你的帮助。

=================================================

感谢你的帮助。以下代码运行良好，但现在我想知道它是如何工作的，如果我注释掉 equals 和 hashcode 方法。

```
package CollectionDemo;
import java.util.*;

class student1 implements Comparable<student1>{
    int rollNo;
    String name;

    student1(int rollNo,String name){
        this.rollNo=rollNo;
        this.name=name;
    }
   /* @Override
    public boolean equals(Object o){
        if((o instanceof student1) && (((student1)o).rollNo == rollNo)){
             return true;
        }
          else
        {
              return false;
        }
    }

    @Override
    public int hashCode(){
        return 1;
    }
*/
    public int compareTo(student1 s) {
        System.out.println("hello:"+(this.rollNo-s.rollNo));
        return this.rollNo-s.rollNo;
    }

    public String toString(){
        return "["+rollNo+","+name+"]";
    }
}
public class treeSetDemo {
    public static void main(String... a){

        Set<student1> set=new TreeSet<student1>();
        set.add(new student1(102,"Anu"));
        set.add(new student1(101,"Tanu"));
        set.add(new student1(103,"Minu"));

        System.out.println("elements:"+set);

    }
} 
```

OP: 运行: hello:-1 hello:1 元素:[[101,Tanu], [102,Anu], [103,Mnu]] 构建成功（总时间：0 秒）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:02:17.563

您必须以下列方式更改 compareTo 方法

```
 public int compareTo(student1 s) {
    if(s.rollNo == this.rollNo){
        return 0;
    }else if(s.rollNo > this.rollNo){
        return -1;
    }else{
        return 1;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:10:40.470

我认为这个实现接近推荐：

```
@Override
public int compareTo(Object other) {
    if(other == null || !(other instanceOf student)){
       throw new IllegalArgumentException();
    }
    student s = (student) other;
    if(this.rollNo > s.rollNo){
         return 1;
    } else if (this.rollNo < s.rollNo){
         return -1;
    } else {
         return 0;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:11:05.220

如果您使用的是 Comparable 接口，那么您的 compareTo() 方法应该返回比较不等于方法，谷歌可比较示例。

[检查此链接](http://www.mkyong.com/java/java-object-sorting-example-comparable-and-comparator/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T11:01:53.723

在您的`compareTo`方法中，您只是返回要比较的对象的值。您需要返回调用实例和传递实例的属性的差异。

因此，将您的`compareTo`方法更改为以下方法：-

```
@Override
public int compareTo(student1 s) {
    return this.rollNo - s.rollNo;
} 
```

**注意**： - Only`sign`对 很重要`Collections.sort`，因此您实际上并不需要一个`if-else`块来返回`-1, 0, or 1`。只退差价。就这样。

* * *

**PS： -**

您的哈希码实现非常糟糕。它会将每个实例放在同一个存储桶中。

```
@Override
public int hashCode(){
    return 1;  // All the instances will have the same hashcode.
} 
```

理想情况下，您应该只使用那些属性来计算`hashCode`您用来比较两个实例的属性，这里是`rollNo`.

因此，您可以使用一些方程式来计算您的哈希码，而不是简单地返回一个 value `1`，同时考虑您的`rollNo`和 a `large prime number`。

您可以浏览[`Effective Java - Item#9`](http://my.safaribooksonline.com/book/programming/java/9780137150021/creating-and-destroying-objects/ch02lev1sec1#X2ludGVybmFsX0ZsYXNoUmVhZGVyP3htbGlkPTk3ODAxMzcxNTAwMjElMkZjaDAzbGV2MXNlYzI=)该主题的更多解释。

* * *

现在，您的代码运行良好，让我们转向您的第二个疑问。

`equals` and `hashCode` methods are not used when you want to compare two objects that will be used while `sorting`. We override `equals` and `hashCode` methods in order to check whether an instance is equal to another instance later on. So, `compareTo` method is not concerned with whether you have ocerrided `equals` ad `hashCode` method or not. And you can also infer from name as to what the two methods does, and can they be related or not.

Moreover, `equals` method is defined in `Object` class, whereas `compareTo` method is declared in `Comparable` interface. So, they are not interrelated.

Check the documentation of these methods: - [`Object#equals`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29), [`Object#hashCode`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29), and [`Comparable#compareTo`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html#compareTo%28T%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T11:04:51.493

**-**如果您只想根据一个属性进行排序，请使用`java.lang.Comparable<T>`Intereface，以及`Collections.sort(List l)`。

**-**但是，如果您的目标是根据多个属性对其进行排序，那么请`java.util.Comparator<T>`选择`Collections.sort(List l, Comparator c)`.

**例如：**

```
import java.util.Comparator;

public class Fruit implements Comparable<Fruit>{

    private String fruitName;
    private String fruitDesc;
    private int quantity;

    public Fruit(String fruitName, String fruitDesc, int quantity) {
        super();
        this.fruitName = fruitName;
        this.fruitDesc = fruitDesc;
        this.quantity = quantity;
    }

    public String getFruitName() {
        return fruitName;
    }
    public void setFruitName(String fruitName) {
        this.fruitName = fruitName;
    }
    public String getFruitDesc() {
        return fruitDesc;
    }
    public void setFruitDesc(String fruitDesc) {
        this.fruitDesc = fruitDesc;
    }
    public int getQuantity() {
        return quantity;
    }
    public void setQuantity(int quantity) {
        this.quantity = quantity;
    }

    public int compareTo(Fruit compareFruit) {

        int compareQuantity = ((Fruit) compareFruit).getQuantity(); 

        //ascending order
        return this.quantity - compareQuantity;

        //descending order
        //return compareQuantity - this.quantity;

    }

    public static Comparator<Fruit> FruitNameComparator 
                          = new Comparator<Fruit>() {

        public int compare(Fruit fruit1, Fruit fruit2) {

          String fruitName1 = fruit1.getFruitName().toUpperCase();
          String fruitName2 = fruit2.getFruitName().toUpperCase();

          //ascending order
          return fruitName1.compareTo(fruitName2);

          //descending order
          //return fruitName2.compareTo(fruitName1);
        }

    };
} 
```

# apache - ActiveMQ 持久消费者正在通过 STOMP 用于客户端和订阅名称

> ID：13137557
> 
> 赞同：1
> 
> 时间：2012-10-30T11:00:13.070
> 
> 标签：apache, activemq, stomp

我有一个 iOS 客户端，它通过 STOMP 协议连接到多个 ActiveMQ 主题和队列。当我连接到服务器时，我发送以下消息：

```
2012-10-30 10:19:29,757 [MQ NIO Worker 2] TRACE StompIO 
CONNECT
passcode:*****
login:system

2012-10-30 10:19:29,758 [MQ NIO Worker 2] DEBUG ProtocolConverter
2012-10-30 10:19:29,775 [MQ NIO Worker 2] TRACE StompIO
CONNECTED
heart-beat:0,0
session:ID:mbp.local-0123456789
server:ActiveMQ/5.6.0
version:1.0 
```

然后，我使用以下消息订阅了几个主题：

```
2012-10-30 10:19:31,028 [MQ NIO Worker 2] TRACE StompIO 
SUBSCRIBE
activemq.subscriptionName:user@mail.com-/topic/SPOT.SPOTCODE
activemq.prefetchSize:1
activemq.dispatchAsync:true
destination:/topic/SPOT.SPOTCODE
client-id:1234
activemq.retroactive:true 
```

我面临着 ActiveMQ 服务器的两个问题。每次连接时，`Number of Consumers`Web 界面中的列都会增加，所以我只有一个真正的消费者，但数量大约是 50 个消费者。但最成问题的问题是，当我将另一台 iOS 设备插入笔记本电脑以测试消息传递环境时，连接到 ActiveMQ 时出现以下错误：

```
WARN | Async error occurred: javax.jms.JMSException: Durable consumer is in use for client: ID:mbp.local-0123456789 and subscriptionName: user@mail.com-/topic/SPOT.SPOTCODE 
```

这似乎是通过 STOMP 与 ActiveMQ 断开连接无法正常工作，因为此日志记录尝试是在其他设备未运行应用程序时进行的。为了解决这个问题，我尝试了以下方法：

*   尝试订阅主题时始终注销。
*   订阅

我目前正在使用 v5.6.0 在我的笔记本电脑上执行服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T20:16:33.173

如果您阅读 ActiveMQ 站点上的[STOMP](http://activemq.apache.org/stomp.html)页面，您会注意到 client-id 和 activemq-subscriptionName 必须匹配才能使用 STOMP 持久订阅者。对于每个客户，这些值应该不同，否则由于名称冲突，您将看到相同的错误。

# php - 使用 PHP 从 localhost 发送邮件

> ID：13137558
> 
> 赞同：0
> 
> 时间：2012-10-30T11:00:17.343
> 
> 标签：php, smtp, localhost, sendmail

我正在尝试使用 PHP 从本地主机发送邮件。我正在使用以下代码发送邮件：-

```
<?php
$to      = 'o****e@gmail.com';
$subject = 'hey You';
$message = 'Can you identify me :P';
$headers = 'From: at*****t@gmail.com' . "\r\n" .
    'Reply-To: at*****t@gmail.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
?> 
```

起初，我尝试将邮件发送给我自己（`at*****t@gmail.com`），它工作正常。但是，在那之后，现在如果我要更改`$to`，它仍然会将邮件发送到与以前的内容（不是更新的内容）相同的 ID（我的）。

我的请求是否以某种方式被缓存？为什么每封邮件都被重复发送给我，而不管内容和`$to`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:03:32.110

1.  转到您的 php.ini 文件并将 SMTP = localhost 更改为 SMTP = aspmx.l.google.com 并取消注释 sendmail_from 并输入您的发送 gmail 地址。并设置 smtp_port = 25

2.  重启本地主机

# android - 用于创建 android UI 主题的工具

> ID：13137560
> 
> 赞同：3
> 
> 时间：2012-10-30T11:00:20.367
> 
> 标签：android, user-interface, layout, themes

我已经查看了所有内容，但没有找到任何可以帮助我为我的应用程序创建主题的好工具。不是不需要创建布局，而是自定义现有布局的外观。Ideal 将是一个工具，它可以从我的 android 应用程序加载布局并对其进行处理，但它足以让我处理一些演示布局。

也许类似于这个网络工具[http://jquerymobile.com/themeroller/?ver=1.1.0&style_id=20120622-116](http://jquerymobile.com/themeroller/?ver=1.1.0&style_id=20120622-116) 有预定义的主题会很好。

你知道这样的工具吗？10倍

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T11:49:55.397

[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)有很多有用的工具，尤其是 Holo 编辑器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:43:33.997

[您可以在这里](http://speckyboy.com/2010/09/30/60-psd-icon-and-button-templates "http://speckyboy.com/2010/09/30/60-psd-icon-and-button-templates")获得设计精美的图标和 PSD 模板

# java - 将链表添加到双链表 (java) 中？

> ID：13137562
> 
> 赞同：-1
> 
> 时间：2012-10-30T11:00:26.107
> 
> 标签：java, linked-list

我在大学有项目。并且在这个项目中想做像 google 或 yahoo 这样的事情。我有很多单词，我应该将单词插入双链表并在双链表中插入另一个链表。我不知道如何将 linkdlist 添加到双链表中。所以，如果有人可以帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:04:45.783

创建一个包含 Word 属性和 A 属性的 LinkedList 的新结构 A。

在您的主应用程序中，使用 A 的 DoubleLinkedList

# jquery-ui - JqueryUI tagit - 如何禁止出现新的输入文本字段？

> ID：13137563
> 
> 赞同：1
> 
> 时间：2012-10-30T11:00:27.293
> 
> 标签：jquery-ui, tag-it

对于 JqueryUI tag-it 小部件，我想完全防止出现新的额外文本输入字段。我正在使用现有标签预先填充，我只想允许人们删除标签但不能输入它们。

我可以将新字段设为只读，但该字段在 IE 中仍然可见，并且在 IE 和 Firefox 中单击小部件区域会导致光标聚焦在该字段上。

我想做的是完全摆脱额外的输入字段。

似乎没有与 .tagit() 方法关联的 tagit 属性。我还能做些什么来防止创建额外的字段吗？

谢谢，

道格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:23:54.197

尝试这个：

```
$('#tagit').tagit({
//options
}).ready(function() {
    $(this).find('.tagit-new').css('height', '13px').empty();
}); 
```

使用 firebug 我们可以看到 tagit 创建的输入字段在一个`li`带有 class 的元素中`tagit-new`。我们需要设置高度，否则在删除最后一个标签时标签容器会挤压成一个滑行，然后我们可以`empty()`这样摆脱标签输入字段。

# android - 在 android 中使用 HTML5 日期输入元素

> ID：13137567
> 
> 赞同：4
> 
> 时间：2012-10-30T11:00:43.860
> 
> 标签：android, html, date, cordova, trigger.io

`<input type="date" />`无法激活该元素。

当我单击模拟器上的字段时，它不会显示进入日期，而是显示 android 键盘。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T11:04:57.587

看看这个：[http ://www.quirksmode.org/html5/inputs_mobile.html](http://www.quirksmode.org/html5/inputs_mobile.html)

它告诉您哪些 html5 输入类型和属性适用于每个浏览器。看起来**日期选择器不适**用于大多数 Android，因此它将显示为简单的文本输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:07:03.127

您可以使用[Trigger.io 的 UI 模块](http://docs.trigger.io/en/v1.4/modules/ui.html)来使用带有常规 HTML5 输入的原生 Android 日期/时间选择器。这样做确实需要使用整体框架（因此不能作为常规移动网页使用）。

你可以在这篇博文中看到之前和之后的截图：http: [//trigger.io/cross-platform-application-development-blog/2012/11/16/new-feature-roundup-native-date-time-picker-分析-with-flurry-android-events/](http://trigger.io/cross-platform-application-development-blog/2012/11/16/new-feature-roundup-native-date-time-picker-analytics-with-flurry-android-events/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T03:23:27.797

看看这里：[如何使 HTML5 输入类型“日期”触发 Android 上的本机日期选择器？](https://stackoverflow.com/questions/16865378/how-to-make-the-html5-input-type-date-trigger-the-native-datepicker-on-android)

[mobiscroll.com](http://demo.mobiscroll.com/datetime/datetime#mode=scroller)提供了一个不错的 polyfill。

# jquery - 如何抑制字符串的特殊字符以将其用作 jQuery 选择器？

> ID：13137571
> 
> 赞同：1
> 
> 时间：2012-10-30T11:00:57.247
> 
> 标签：jquery

考虑以下示例：

```
<input type="text" id="#ab>cd.ef" value="foo" />

<script type="text/javascript">
  var id = '#ab>cd.ef';
  alert($('#' + id).length);
</script> 
```

这会导致语法错误，所以我正在寻找一些东西来抑制选择器的特殊字符。

当然，对于这个单一的例子，我可以这样做：

```
alert($('input').length); 
```

但我将使用这个原则来使用动态选择器，例如：

```
return $('input[name="' + $(elem).attr('name') + '"]:checked').val(); 
```

即使我的“名称”属性包含特殊字符。

所以这是我的问题：如何抑制字符串的特殊字符以将其用作 jQuery 选择器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:06:53.093

你可以试试这个，用单引号括起来 id 并签入属性选择器

```
var id = '#ab>cd.ef';
alert($("[id='"+id+"']").length); 
```

# xcode - 为什么我在情节提要中的视图高度不同/不显示导航栏？

> ID：13137573
> 
> 赞同：3
> 
> 时间：2012-10-30T11:00:59.600
> 
> 标签：xcode, layout, window, size, storyboard

我有一个相当大的故事板，有很多视图，其中很多都没有以正确的大小显示，甚至没有导航栏。这是 XCode 中的某种错误吗？因为它们在模拟或构建到设备时看起来都很好。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T10:36:31.753

我每次都在解决方案下遇到了很多时间。

**试试这个：**
1\. 选择您遇到问题的 StoryBoard
2\. 转到 Attributes Inspector -> Simulated Metrics -> Size -> 有四个选项（推断默认值）
3\. 选择或在除默认值之外的选项之间切换（重复两次或更多（如果需要），然后调整视图和控件的大小以适合您选择的屏幕尺寸。

**根据我的说法，这是因为：**
有时推断（大小）的行为就像是 3.5 视网膜屏幕，但我们的故事板大小是视网膜 4 全屏，反之亦然

**避免此类问题的最佳实践：**
当您开始使用情节提要时，首先选择您想要使用的适当尺寸（3.5 或 4 全屏），然后只有您应该设置您的视图或控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T21:27:31.260

这是一个非常简单的步骤。选择 View Controller 后，进入 Simulated Metrics 并选择 size 并将其放在 iPhone 4 英寸上，然后选择 Orientation 并将其放置到 Portrait 就可以了。您的主要故事板指标是固定的。同样重要的是要知道这不会弄乱项目中的任何高度或宽度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T15:36:03.230

我在将容器视图嵌入到同一个视图控制器时遇到了这个问题。

嵌入了三个容器视图后，我发现当我选择“应用 Retina XX Form Factor”时 Xcode 自动调整了其中两个的大小，但第三个的大小保持不变。

**解决方案** 在父视图控制器中，第三个容器查看器缺少约束。添加这些约束让一切都变得简单。（我还必须调整容器视图的大小以填充其父控制器查看器）

# javascript - 使用 Javascript 进行特征提取

> ID：13137575
> 
> 赞同：8
> 
> 时间：2012-10-30T11:01:04.037
> 
> 标签：javascript, image-processing, computer-vision, sift, feature-extraction

我想知道是否有任何用于使用 Javascript 进行图像特征提取的开源或免费库？我正在开发一个需要使用像 SIFT 这样的算法的应用程序。在 JS 中很难实现，我在 JS 中找不到好的 SIFT 实现。如果不存在，我想在 JS 中实现一个特征提取库。请任何人帮助我找到一个好的解决方案或指导我从头开始写一个。

谢谢，克山。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T07:43:08.757

我不熟悉 JS 中 sift 描述符的实现，但是，可能值得从一个简单的 HOG 描述符开始，它在[https://github.com/harthur/hog-descriptor](https://github.com/harthur/hog-descriptor)中有一个很棒的 javascript 实现。

您还应该检查 jsfeat，一个 javascript 计算机视觉库 [http://inspirit.github.com/jsfeat/](http://inspirit.github.com/jsfeat/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-12T22:02:38.163

[Pixastic](http://www.pixastic.com/lib/docs/actions/edges/)具有边缘检测功能并在浏览器 JavaScript 中工作，这可能是一个好的开始。

# php - ZF2 共享活动

> ID：13137581
> 
> 赞同：0
> 
> 时间：2012-10-30T11:01:33.860
> 
> 标签：php, zend-framework2

我试图在一个模块中设置一个事件并在另一个模块的控制器中触发它。我正在使用共享事件管理器，但似乎我做错了什么..

模块1：

```
public function onBoostrap(Event $e)
        {
              $sem = $e->getTarget()->getEventManager()->getSharedEventManager();
              $sem->attach('checkSomething', function (){
                          die("checked");
              });
        } 
```

模块2控制器：

```
 public function checkAction ()
        {
                $this->getEventManager()->trigger('checkSomething');
} 
```

你们知道我可能做错了什么吗？或者，如果有更好（正确）的方法来做到这一点..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T18:00:22.343

Yassine 解决方案中的问题是事件附加在“Zend\Mvc\Application”上。此事件标识符在您的控制器中不可用

您可以通过在操作中执行以下代码来验证这一点

```
print_r($this->getEventManager()->getIdentifiers()); 
```

结果将类似于

```
Array ( 
    [0] => Zend\Stdlib\DispatchableInterface 
    [1] => Zend\Mvc\Controller\AbstractController 
    [2] => Application\Controller\TestController 
    [3] => Zend\Mvc\Controller\AbstractActionController 
    [4] => Application 
) 
```

现在要解决您模块中的问题，请将事件附加到“应用程序”标识符，然后在操作中触发您的事件。

所以：

```
/*Module*/
public function onBootstrap($e)
{
    $eventManager = $e->getApplication()->getEventManager();
    $sem          = $eventManager->getSharedManager();

    $sem->attach('Application', 'checkSomething', function () {
        echo "checked";
        /* do more stuff here */
    }, 100);

} 
```

```
/* a action in a controller */
$this->getEventManager()->trigger('checkSomething'); 
```

这应该导致

```
checked 
```

所以你已经成功触发了这个事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:23:30.623

您需要指定包含事件管理器实例的资源的标识符。许多类（Application、ModuleManager...）在其包含的 EventManager 实例中使用它们的类名作为标识符。

您的附件行应如下所示：

```
$sem->attach('Zend\Mvc\Application','checkSomething', function (){
                      die("checked");
          }); 
```

（更新）您应该从控制器调用应用程序 EventManager：

```
$this->getServiceLocator()->get('application')->getEventManager()->trigger('chec‌​kSomething'); 
```

干杯，

亚辛

# java - 无法在 /WEB-INF/urlrewrite.xml 找到 urlrewrite conf 文件

> ID：13137584
> 
> 赞同：3
> 
> 时间：2012-10-30T11:01:46.317
> 
> 标签：java, jsp, struts2, servlet-filters, tuckey-urlrewrite-filter

我正在实现 URL 重写功能，我已经在我的项目中包含了它所需要的所有内容，即`urlrewritefilter-4.0.3.jar`在WEB-INF 中`WEB-INF/lib`和`urlrewrite.xml`中，并在`web.xml`

```
<filter>
<filter-name>UrlRewriteFilter</filter-name>
<filter-class>org.tuckey.web.filters.urlrewrite.UrlRewriteFilter</filter-class>
</filter>

<filter-mapping>
<filter-name>UrlRewriteFilter</filter-name>
<url-pattern>/*</url-pattern>
<dispatcher>REQUEST</dispatcher>
<dispatcher>FORWARD</dispatcher>
</filter-mapping> 
```

但我收到以下错误，

> 无法在 /WEB-INF/urlrewrite.xml 找到 urlrewrite conf 文件

请就如何解决这个问题给我一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:13:01.170

您可以更改参数中的 conf 文件。这可以添加到过滤器配置中。

> ```
> <!-- if you need to the conf file path can be changed
>     it is specified as a path relative to the root of your context
>     (default /WEB-INF/urlrewrite.xml) -->
>     <init-param>
>         <param-name>confPath</param-name>
>         <param-value>/WEB-INF/urlrewrite.xml</param-value>
>     </init-param> 
> ```

# c# - .NET 控件，例如带有文本效果的 Ms Paint

> ID：13137587
> 
> 赞同：3
> 
> 时间：2012-10-30T11:01:53.750
> 
> 标签：c#, .net, drawing, paint

我试图找到一个允许我的用户绘制东西的控件（不一定是免费的）。拥有 Paint 所拥有的所有东西（钢笔、椭圆、矩形、导入图像、添加文本等），至少在文本部分还带有一些额外的 Photoshop 效果。你知道任何可用的/易于使用的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:57:31.103

如果您可以使用 WPF，请查看[这篇](http://www.codeproject.com/Articles/22776/WPF-DrawTools)文章和[这篇](http://www.codeproject.com/Articles/213420/A-Graphics-Drawing-Tool-by-using-WPF)文章。

# c# - 如何清除数据网格视图

> ID：13137591
> 
> 赞同：43
> 
> 时间：2012-10-30T11:02:07.247
> 
> 标签：c#, datagrid

我正在尝试根据 ComboBox 中的选定项目填充 DataGridView，这部分正在工作。

但是，我需要能够在从新项目添加新数据之前清除网格，而不是仅仅添加到末尾。

**如何在向 DataGridView 添加项目之前清除它？**

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-10-30T11:06:14.223

首先，清空数据源：

```
this.dataGridView.DataSource = null; 
```

然后清除行：

```
this.dataGridView.Rows.Clear(); 
```

然后将数据源设置为新列表：

```
this.dataGridView.DataSource = this.GetNewValues(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-03-26T11:16:57.633

如果它绑定到数据源 -

```
dataGridView.DataSource=null;
dataGridView.Rows.Clear(); 
```

为我工作。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-30T11:04:35.570

`DataGridView`你可以用这种方式 清除

```
dataGridView1.Rows.Clear();
dataGridView1.Refresh(); 
```

如果是，`databound`那么试试这个

```
dataGridView1.Rows.Clear() // If dgv is bound to datatable
dataGridView1.DataBind(); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-07-16T06:45:27.057

如果您不仅要清除数据，还要清除组合框、复选框，请尝试

```
dataGridView.Columns.Clear(); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-10-30T11:04:30.280

```
DataGrid.DataSource = null;
DataGrid.DataBind(); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-30T11:06:47.010

您可以将数据源分配为数据网格的空值，然后重新绑定它。

```
dg.DataSource = null;
dg.DataBind(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-05-01T07:30:59.470

你可以接受下一条指令，并且会在缺乏表现的情况下完成这项工作。如果您想查看其效果，请将需要清除 DataGridView 的 2 个 next 指令（技术上相似）之一放入 try{} catch(...){} finally 块并等待发生的情况。

```
 while (dataGridView1.Rows.Count > 1)
    {
        dataGridView1.Rows.RemoveAt(0);
    }

    foreach (object _Cols in dataGridView1.Columns)
    {
        dataGridView1.Columns.RemoveAt(0);
    } 
```

您改进了此任务，但还不够，重置 DataGridView 存在问题，因为 DataGridView 对象中保留有列。最后我建议，我在家庭实践中实现的最佳方法是将此 gridView 作为具有行、列的文件处理：基于行和列之间匹配的记录集合。如果您可以改进，请自行选择 a) 或 b)：foreach 或 while。

```
 //(a): With foreach 
    foreach (object _Cols in dataGridView1.Columns)
    {
        dataGridView1.Columns.RemoveAt(0);
    }

    foreach(object _row in dataGridView1.Rows){
        dataGridView1.Rows.RemoveAt(0);
    }

    //(b): With foreach 
    while (dataGridView1.Rows.Count > 1)
    {
        dataGridView1.Rows.RemoveAt(0);
    }
    while (dataGridView1.Columns.Count > 0)
    {
        dataGridView1.Columns.RemoveAt(0);
    } 
```

好吧，作为建议，永远不要先删除列，顺序在列之后的行之前，因为从逻辑上讲，首先创建的列然后是行。就正确的分析而言，这将是一种惩罚。

```
 foreach (object _Cols in dataGridView1.Columns)
    {
        dataGridView1.Columns.RemoveAt(0);
    }
    foreach (object _row in dataGridView1.Rows)
    {
        dataGridView1.Rows.RemoveAt(0);
    }
    while (dataGridView1.Rows.Count > 1)
    {
        dataGridView1.Rows.RemoveAt(0);
    }

    while (dataGridView1.Columns.Count > 0)
    {
        dataGridView1.Columns.RemoveAt(0);
    } 
```

然后，将其放入函数或方法中。

```
 private void ClearDataGridViewLoopWhile()
{           
    while (dataGridView1.Rows.Count > 1)
    {
        dataGridView1.Rows.RemoveAt(0);
    }

    while (dataGridView1.Columns.Count > 0)
    {
        dataGridView1.Columns.RemoveAt(0);
    }
}

private void ClearDataGridViewForEach()
{
    foreach (object _Cols in dataGridView1.Columns)
    {
        dataGridView1.Columns.RemoveAt(0);
    }
    foreach (object _row in dataGridView1.Rows)
    {
        dataGridView1.Rows.RemoveAt(0);
    }
} 
```

最后，调用你的新函数 ClearDataGridViewLoopWhile(); 或 ClearDataGridViewForEach(); 您需要在哪里使用它，但是当您进行查询和更改将在 grieView 中加载不同标题名称的多个表时，建议使用它。但是，如果您想在此处保留标头，则可以提供解决方案。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-30T11:04:41.943

```
dataGridView1.Rows.Clear();
dataGridView1.Refresh(); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-12-13T14:36:26.607

如果您想清除所有标题以及数据，例如，如果您在具有不同字段的 2 个完全不同的数据库之间切换，因此不同的列和列标题，我发现以下工作。否则，当您切换时，两个数据库中的列/字段都会显示在网格中。

```
dataTable.Dispose();//get rid of existing datatable
dataTable = new DataTable();//create new datatable

datagrid.DataSource = dataTable;//clears out the datagrid with empty datatable
//datagrid.Refresh(); This does not seem to be neccesary

dataadapter.Fill(dataTable); //assumming you set the adapter with new data               
datagrid.DataSource = dataTable; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-06-24T04:10:56.827

```
private void ClearGrid()
{    
    if(this.InvokeRequired) this.Invoke(new Action(this.ClearGrid));

    this.dataGridView.DataSource = null;
    this.dataGridView.Rows.Clear();
    this.dataGridView.Refresh();
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-10-07T10:44:32.670

刷新datagridview并刷新数据表

```
dataGridView1.Refresh();
datatable.Clear(); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-01-30T15:25:34.257

```
datatable.Clear();
dataGridView1.DataSource = datatable; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-01-13T23:43:49.113

要拥有 Datagrid，您必须有一个格式化 Datagrid 的方法。如果要清除 Datagrid，只需调用该方法即可。

这是我的方法：

```
 public string[] dgv_Headers = new string[] { "Id","Hotel", "Lunch", "Dinner", "Excursions", "Guide", "Bus" }; // This defined at Public partial class

    private void SetDgvHeader()
    {
        dgv.Rows.Clear();
        dgv.ColumnCount = 7;
        dgv.RowHeadersVisible = false;
        int Nbr = int.Parse(daysBox.Text);  // in my method it's the textbox where i keep the number of rows I have to use
        dgv.Rows.Add(Nbr);
        for(int i =0; i<Nbr;++i)
            dgv.Rows[i].Height = 20;
        for (int i = 0; i < dgv_Headers.Length; ++i)
        {
            if(i==0)
                dgv.Columns[i].Visible = false;  // I need an invisible cells if you don't need you can skip it
            else
                dgv.Columns[i].Width = 78;
            dgv.Columns[i].HeaderText = dgv_Headers[i];
        }
        dgv.Height = (Nbr* dgv.Rows[0].Height) + 35;
        dgv.AllowUserToAddRows = false;
    } 
```

dgv 是 DataGridView 的名称

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2015-11-04T21:34:26.913

解决方案是：

```
dataGridView1.Rows.RemoveAt(0); 
```

清除网格并保留列。

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2017-06-26T18:35:07.047

```
YourGrid.Items.Clear();
YourGrid.Items.Refresh(); 
```

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2016-12-19T16:56:58.087

这对我有用

```
'int numRows = dgbDatos.Rows.Count;

            for (int i = 0; i < numRows; i++)
            {
                try
                {

                    int max = dgbDatos.Rows.Count - 1;
                    dgbDatos.Rows.Remove(dgbDatos.Rows[max]);
                    btnAgregar.Enabled = true;
                }
                catch (Exception exe)
                {
                    MessageBox.Show("No se puede eliminar " + exe, "",
                    MessageBoxButtons.OK, MessageBoxIcon.Information);
                }
            }` 
```

* * *

## 回答 #17

> 赞同：-6
> 
> 时间：2014-05-02T10:06:42.630

解决方案是：

```
while (dataGridView1.RowCount > 1)
{
    dataGridView1.Rows.RemoveAt(0);
} 
```

你可以接受下一条指令，并且会在缺乏表现的情况下完成这项工作。如果您想查看其效果，请将需要清除 DataGridView 的下一条指令放入 try{} catch(...){} finally 块并等待发生的情况。

```
 while (dataGridView1.Rows.Count > 1)
        {
            dataGridView1.Rows.RemoveAt(0);
        }

        while (dataGridView1.Columns.Count > 0)
        {
            dataGridView1.Columns.RemoveAt(0);
        } 
```

# php - PHP_Beautifier - 致命错误 - 需要 PEAR.php

> ID：13137592
> 
> 赞同：0
> 
> 时间：2012-10-30T11:02:13.790
> 
> 标签：php, macos, terminal, pear, php-beautifier

我已经用 sudo 安装了 pear 和 php_beautifier ...

根据我的阅读，我应该能够使用命令格式化代码

```
php_beautifier x.php 
```

但是当我尝试这样做时，我得到了这个错误：

```
Warning: require_once(PEAR.php): failed to open stream: No such file or directory in /Users/philip/pear/bin/php_beautifier on line 37

Fatal error: require_once(): Failed opening required 'PEAR.php' (include_path='.:') in /Users/philip/pear/bin/php_beautifier on line 37 
```

我查看了 php_beautifier.php 代码，但我不知道出了什么问题。第 37 行：

```
require_once 'PEAR.php'; 
```

并且该文件与 pear.php 位于同一目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:04:58.743

理想情况下，PEAR 目录的路径应该[`include_path`](http://www.php.net/manual/en/ini.core.php#ini.include-path)在 php.ini 的指令中指定。这使您可以轻松地在代码中包含 PEAR 核心和包，例如：

```
require_once 'PEAR.php';
require_once 'Console/Getopt.php'; 
```

否则，您将不得不指定 PEAR 目录的完整路径，这会降低您的代码的可移植性：

```
require_once '/usr/share/pear/PEAR.php';
require_once '/usr/share/pear/Console/Getopt.php'; 
```

要探测指令的*有效值*，请使用该函数。如果它不包含 PEAR 安装路径，请使用：`include_path``phpinfo()`

```
# UNIX
include_path = ".:/path/to/pear"
# Windows
include_path = ".;C:\path\to\pear" 
```

[可以在此处找到](https://pear.php.net/manual/en/installation.checking.php)更详细的分步说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T22:03:30.650

打开/private/etc/php.ini

并替换这一行（796）：

```
;include_path = ".:/php/includes" 
```

到：

```
include_path = "/usr/lib/php/pear" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-01T11:11:53.273

首先检查 pear 是否安装了命令：

```
pear 
```

如果未安装，请使用此命令进行安装：

```
sudo apt install php-pear 
```

# javascript - 如何使用行索引和 td 索引获取 td 内的元素

> ID：13137597
> 
> 赞同：3
> 
> 时间：2012-10-30T11:02:50.287
> 
> 标签：javascript, jquery

我在表格中有一个`Row Index`and`TD index`我想`input`在`[Row Index,TD Index]`. 我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T11:10:24.327

表具有用于直接访问单个单元格的访问器属性，即：

```
table.rows[rowIndex].cells[colIndex] 
```

因此：

```
table.rows[rowIndex].cells[colIndex].getElementsByTagName('input')[0]; 
```

或者：

```
$('input', table.rows[rowIndex].cells[colIndex]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T11:05:22.730

这应该有效：

```
$('tr:eq(rowIndex) td:eq(tdIndex) input') 
```

[:eq](http://api.jquery.com/eq/)选择器以获取更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T11:05:24.543

```
var rowIndex = X;
var cellIndex = Y;
$('#my-table tbody')
    .children(':nth-child('+(rowIndex+1)+')')
      .children(':nth-child('+(cellIndex+1)+')')
        .find('input').val('Hello'); 
```

当然，您可以将它们全部放在一个选择器中

```
$('#my-table tbody tr:nth-child('+(rowIndex+1)+') td:nth-child('+(cellIndex+1)+')')
        .find('input').val('Hello'); 
```

# java - Netbeans 7.2 在更新后挂起加载模块！！ubuntu 12.04+ 32位系统

> ID：13137598
> 
> 赞同：2
> 
> 时间：2012-10-30T11:02:53.250
> 
> 标签：java, netbeans, startup, netbeans-7, netbeans-7.2

我最近在 Ubuntu 12.04 上更新了 Netbeans 7.2。下载这些更新需要很长时间，我不得不手动下载一些软件包，但这可能是我的公司网络和代理的一些问题。当它最终成功完成时，系统提示我重新启动 IDE，所以我这样做了。启动出现了，我收到消息说某些模块的版本错误，必须禁用它们。我单击“禁用模块”，然后启动挂起，仅通知“正在加载模块...”。尝试了几次，但结果总是一样的。甚至尝试重新安装 IDE，但整个过程看起来都一样。

# stored-procedures - 程序创建时出现编译错误

> ID：13137604
> 
> 赞同：0
> 
> 时间：2012-10-30T11:03:26.137
> 
> 标签：stored-procedures, plsql, oracle10g, oracle11g, plsqldeveloper

下面是我创建的过程。当我执行它时，我得到“*带有编译错误的过程*”我不明白我在下面的过程代码中哪里出错了，有人通过在代码中找到错误来帮助我

```
create or replace PROCEDURE newprocedur(inMerid IN VARCHAR2,outCount OUT NUMBER) AS  
  CURSOR c1 IS 
    select CLIENT_COUNT 
     from OP_TMER_CONF_PARENT 
    where MER_ID = inMerid 
    FOR UPDATE OF CLIENT_COUNT;
BEGIN
  Open c1
  loop
    fetch c1 into outCount;
    exit when c1%NOTFOUND;
    outCount:=outCount+1;
    update OP_TMER_CONF_PARENT 
       set CLIENT_COUNT = outCount 
     where current of c1;
  end loop;
  close c1;
END; 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T11:20:36.360

1- check for errors and see where error is
See [here](https://stackoverflow.com/questions/9788556/how-to-find-the-error-causing-ora-06575)

2- You missed a semicolon in 5th line- should be

```
Open c1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:19:22.597

在 SQL*Plus 中，您可以使用命令

```
show errors 
```

向您展示刚刚编译的 PL/SQL 代码中的错误。请参阅[http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12041.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12041.htm)

我不熟悉 PL/SQL Developer，但 TOAD 会自动执行此操作并向您显示错误，让您可以快速跳转到包含错误的行。

# javascript - TypeScript 变量初始化

> ID：13137609
> 
> 赞同：0
> 
> 时间：2012-10-30T11:03:37.633
> 
> 标签：javascript, typescript

我使用名为 EdgeJS 的 TypeScript编写了一个[图形测量库。](https://github.com/ido-ran/EdgeJS)我还使用 Jasmine 编写了单元测试来验证它是否正确。

问题是我的测试失败，根本原因是我有一个函数来初始化填充为零而不是未定义的数组，并且初始化方法似乎“记住”了它已初始化的数组，这会影响结果。

您可以在[单元测试页面的控制台输出中看到，这一行](https://github.com/ido-ran/EdgeJS/blob/master/Edge.ts#L137)打印出带有数字的数组，而不是我预期的零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:09:36.450

我整理了这个简短的例子。

1.  取回不同长度的数组没有任何问题
2.  如果我更改它们，我不会有任何问题记住任何值

如果您可以提供从 EdgeJS 代码中获得的控制台输出的详细信息，这可能有助于确定这一点。

例子

```
class ArrayUtilities {
    private arrayOfZeros(n: number) : number[] {
        var a: number[] = [];
        for (var i = 0; i < n; i++) { 
            a[i] = 0;
        }
        console.log("New array", a);
        return a;
    }

    test() {
        var a: number[] = this.arrayOfZeros(5);
        for (var i = 0; i < a.length; i++) {
            a[i] = 1;
        }
        console.log("Updated array", a);
        var b: number[] = this.arrayOfZeros(6);
        var c: number[] = this.arrayOfZeros(2);
    }
}

var au = new ArrayUtilities();
au.test(); 
```

我得到以下输出...

```
New array[0, 0, 0, 0, 0]app.js?1 (line 8)
Updated array[1, 1, 1, 1, 1]app.js?1 (line 16) 
New array[0, 0, 0, 0, 0, 0]app.js?1 (line 8)
New array[0, 0]app.js?1 (line 8) 
```

# python - 从 CSV 数据中获取延迟时间

> ID：13137610
> 
> 赞同：1
> 
> 时间：2012-10-30T11:03:39.910
> 
> 标签：python, numpy, scipy, scientific-computing

我正在测量并行端口上生成的信号有多稳定。

我们从示波器生成的 CSV 文件中导入了 numpy 数组。以下输出是显示问题的剥离变体：

```
import numpy as np
data = np.array([0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0])

t = np.array([0\.    ,0.0005, 0.001 ,0.0015,
     0.002 ,0.0025, 0.003 ,0.0035,
     0.004 ,0.0045, 0.005 ,0.0055,
     0.006 ,0.0065, 0.007 ,0.0075,
     0.008 ]) 
```

绘制时看起来像这样。 ![在此处输入图像描述](../Images/da77d9f4ded20ba8c72d11dcda8faf84.png)

我正在寻找最干净的方法来获得冲动的持久时间作为列表中的值。

在写完这篇文章之后，我将尝试自己从头开始实施解决方案，我希望的是获得持久时间的首选方式，也许有一个我不知道的 numpy 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:11:34.577

假设输入信号被去抖动，你可以循环遍历数组。

```
high_times = []

low_high = 0

for i in xrange(len(t) - 1):
    if data[i] == 0 and data[i+1] == 1:
        low_high = i
    elif data[i] == 1 and data[i+1] == 0:
        high_times.append(t[i] - t[low_high]) 
```

`high_times`是每个脉冲信号高电平所用时间的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:04:26.480

假设`data`是一个`0`'s 和`1`'s 的 int 数组：

**1.)**`0`这定义了从最后一个到最后一个脉冲的持续时间`1`：

```
import numpy as np

idx = t[np.abs(np.diff(data)) == 1]
lasting_times = idx[1::2] - idx[::2] 
```

**2.）**如果您更喜欢将持续时间定义为从第一个`1`到最后一个`1`：

```
diff = np.diff(data)
lasting_times = t[diff == -1] - t[1:][diff == 1] 
```

**注意**：无论如何，您必须处理数据的结尾，即这些解决方案假定`data`以`0`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:17:17.600

假设您的数据列表仅包含 1 和 0：

```
print [(m.start(),m.end()) for m in re.finditer('1+', '0000111100001111')] 
```

输出

```
 [(4, 8), (12, 16)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T16:54:48.253

使用 itertools 模块中的 groupby 可以很容易地做到这一点。

```
from itertools import groupby
#union of the point with duration of the point
val_dt = zip(data[:-1],t[:-1]-t[1:])
#groupby to unite similar values
steps = [ (g[0],sum( h[1] for h in g[1])) for g in groupby(val_dt,lambda s:s[0])]
print steps
#[(0, -0.002), (1, -0.002), (0, -0.002), (1, -0.002)] 
```

从内存管理的角度来看，这种方法并不完美，但它确实有效。

# java - XML 中是否有等效于 setColorFilter() 的方法？

> ID：13137612
> 
> 赞同：40
> 
> 时间：2012-10-30T11:03:40.877
> 
> 标签：java, android, xml

我想知道是否`ColorFilter`可以在 a 的 XML 中设置 a`View`或者是否唯一的方法是`setColorFilter()`在 Java 中使用。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-10-13T22:37:55.080

有; 它被称为[tint](http://developer.android.com/reference/android/R.attr.html#tint)。它在 上不可用，`View`但在`ImageView`和上可用`ImageButton`。

如果您想将它与`selector` [这个答案](https://stackoverflow.com/a/18724834/2474498)一起使用，这对我有很大帮助。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-09-14T13:43:25.387

您可以使用：

```
android:tint="@color/white" 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-30T14:18:28.420

根据文档 [http://developer.android.com/reference/android/graphics/ColorFilter.html，ColorFilter](http://developer.android.com/reference/android/graphics/ColorFilter.html) 没有相应的 xml 版本。

我还使用键“颜色”和“过滤器”在文档中搜索了属性 [http://developer.android.com/reference/android/R.attr.html](http://developer.android.com/reference/android/R.attr.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-10-21T22:32:46.407

没有等效的 xml，但在 API 级别 21 上，您可以使用 tint 属性。但我假设您不想针对 21 台以上的设备。至少在几年内不会。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-04-04T12:40:18.610

如果您想使用 tint 并支持旧版本，您可以添加`com.android.support:appcompat-v7:23.2.1`到 build.gradle（不要忘记更新 Android SDK）

感谢@sherpya 的提示！

# php - 在 PHP 中读取 xml 属性

> ID：13137614
> 
> 赞同：-1
> 
> 时间：2012-10-30T11:03:44.110
> 
> 标签：php, xml

我的 XML 文件有以下代码：

```
<Object>
  <hasOLE>false</hasOLE> 
  <Attribute Name="Absolute Number">
    <Value>1</Value> 
  </Attribute>
  <Attribute Name="Object Number">
    <Value>1</Value> 
  </Attribute>
  <Attribute Name="Object Heading">
    <Value>Introduction</Value> 
  </Attribute>
  <Attribute Name="Object Text">
    <Value /> 
  </Attribute>
</Object> 
```

如何读取 PHP 中的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:08:34.090

使用`simplexml_load_string`：

```
$string = '<Object>
    <hasOLE>false</hasOLE> 
    <Attribute Name="Absolute Number">
        <Value>1</Value> 
    </Attribute>
    <Attribute Name="Object Number">
        <Value>1</Value> 
    </Attribute>
    <Attribute Name="Object Heading">
        <Value>Introduction</Value> 
    </Attribute>
    <Attribute Name="Object Text">
        <Value /> 
    </Attribute>
</Object>';

$xml = simplexml_load_string( $string );
// Or $xml = simplexml_load_file( $filename ); if it's inside a file. 
```

并像这样简单地访问它：

```
echo $xml->Attribute->attributes(); //Absolute Number 
echo $xml->Attribute->Value;        // 1 
```

# playframework - 单击左侧导航中存在的超链接时，如何在 playframework 中呈现数据表

> ID：13137617
> 
> 赞同：0
> 
> 时间：2012-10-30T11:03:59.910
> 
> 标签：playframework, playframework-2.0

我正在使用 play framework 开发一个 web 应用程序，我想使用 id 以网格格式显示数据，这将通过单击左侧存在的导航上的链接来获取（类似于 play framework 提供的 zentasks 示例应用程序）。

我能够在左侧导航器上以 href 的形式呈现数据列表。但是当我单击任何项​​目时，它不会呈现相应的视图。

我按照他们给出的 zentasks 示例进行操作。在 zentask 示例中，我不明白他们是如何通过单击导航上存在的项目来渲染主体的。

任何人都可以分享我如何在游戏框架中实现上述功能：

我有 Main.scala.html，我有 Nav 和 Section 部分如下：

```
<h4 class="dashboard"><a href="#/">Locate Equipment</a></h4>
        <ul id="projects">
            <li data-group="equipment groups">
                <span class="toggle"></span>
                <h4 class="groupName">Equipment Groups</h4>
                <span class="loader">Loading</span>                
                <ul style="height: 500px; overflow: auto">                      
                        @equipmentgroups.map{ task=>    
                        <li data-project="@task.id">                   
                            <a class="name" href="#@routes.EquipmentGroups.search(task.id)">@task.name</a>
                             <span class="loader">Loading</span> </li>}                                                 
                </ul>       
            </li>              
    </nav>
    <section id="main">
        @body
    </section> 
```

` 和dashboard.scala.html 如下：

```
@(favorite:List[Favorite],equipmentGroup:List[EquipmentGroup],user: User)
@main(favorite,equipmentGroup,user){    
<header>
    <hgroup>
        <h1>Dashboard</h1>            
    </hgroup>
</header>    
<article  class="tasks">        
        <div class="folder" >
            <header>
                <h3><a href="#">Equipment Group</a></h3>                   
                               </header>                                 
        </div>    
</article> 
```

}

单击链接的左侧，我想在右侧显示该设备名称，我在views.EquipmentGroups 文件夹中添加了Equipment.scala.html。 `@( title: String) <h4> This is @title</h4>`

这是我的 application.java：`public class Application extends Controller {

```
public static class Login {
    public String username;
    public String password;

    public String validate() {
        if (User.authenticate(username, password) == null) {
            return "Invalid user or password";
        }
        return null;
    }
}
public static Result list() {
    System.out.println(request().username());
    return ok(dashboard.render(Favorite.GetFavorite(),
            EquipmentGroup.GetEquipmentGroup(),
            User.GetUser(session().get("username"))));
}

public static Result login() {
    return ok(login.render(form(Login.class)));
}

public static Result logout() {
    session().clear();
    flash("success", "You've been logged out");
    return redirect(routes.Application.login());
}

public static Result authenticate() {
    Form<Login> loginForm = form(Login.class).bindFromRequest();
    if (loginForm.hasErrors()) {
        return badRequest(login.render(loginForm));
    } else {
        session("username", loginForm.get().username);
        return redirect(routes.Application.list());
    }
}

public static Result javascriptRoutes() {
    response().setContentType("text/javascript");
    return ok(
        Routes.javascriptRouter("jsRoutes",
                controllers.routes.javascript.EquipmentGroups.search()
                )
        );
}` 
```

我还没有写任何javascripts。

如果我需要提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:31:25.430

我不是 100% 确定（我没有尝试过），但以下对我来说似乎很可疑：

在 Main.scala.html 中，任务导航链接似乎无效，我认为每个链接的开头都有一个不需要的字符：

```
<a class="name" href="#@routes.EquipmentGroups.search(task.id)">@task.name</a>
                      ^
                      |
                      This hash char seems to be the problem, remove it 
```

如果这个哈希不是问题，谁能解释一下它的目的是什么？;)

# objective-c - 如何使用 url 数组填充 UIImageView？

> ID：13137620
> 
> 赞同：2
> 
> 时间：2012-10-30T11:04:06.523
> 
> 标签：objective-c, ios, xcode

我有一个包含图像 URL 的数组，我想用这些 url 创建一个图像视图（现在使用 for 循环）。

但我不知道如何使用数组中的 URL 制作图像视图希望有人能澄清这一点

```
int x = 0;
for(int i = 0; i <imagearry.count; i ++){
NSDictionary *dict = [imagearry objectAtIndex:i];
NSLog(@"%@",[dict objectForKey:@"img_url"]);
NSString *filePath [NSHomeDirectory()stringByAppendingPathComponent:@"/Library/Caches"];

    stringarry = [[imagearry objectAtIndex:i] objectForKey:@"img_url"];

    int x = 0;

    imageView.image = [UIImage imageNamed:[stringarry objectAtIndex:0]];

    for(int i=0; i < [stringarry count]; i++)
    {

        UIImageView *img = [[UIImageView alloc] init];
        img.bounds = CGRectMake(10, 10, 50, 50);
        img.frame = CGRectMake(5+x, 0, 160, 110);
        NSLog(@"image: %@",[stringarry objectAtIndex:i]);

        img.image = [UIImage imageNamed:[stringarry objectAtIndex:i]];
        [stringarry insertObject:img atIndex:i];
         [scrollView addSubview:[stringarry objectAtIndex:i]];

        x += 170; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:13:12.880

您必须使用`imageWithData`而不是`imageNamed`：

```
NSURL * url = [NSURL fileURLWithPath:[filePath stringByAppendingPathComponent:[stringarry objectAtIndex:i]]];
[UIImage imageWithData:[NSData dataWithContentsOfURL:url]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:16:52.000

> UIImageView 没有显示来自 URL 的图像的属性。因此，您可能必须以 NSDATA 格式下载它，然后转换为 `UIImage`. 而不是查看 AsyncImageView 并将 AsyncImageView 的实例存储在您的数组中。

检查此链接：[AsyncImageView](https://github.com/nicklockwood/AsyncImageView)

# c# - 在动态生成的面板中动态生成图像

> ID：13137623
> 
> 赞同：0
> 
> 时间：2012-10-30T11:04:12.360
> 
> 标签：c#, asp.net

我需要通过单击按钮生成动态图像并将其拖动到面板中。

我将添加图像的面板也可以通过单击按钮动态创建。问题是如果我单击另一个按钮说添加图像（用于动态添加图像），添加的面板将被隐藏。如果我再次单击添加面板按钮，我可以看到以前添加的面板 + 新面板。

这是因为回帖还是什么？

这是我的 C# 代码：

```
private void addRow1()
{
    for (int i = 0; i < row_cnt; i++)
    {
        var row = new TableRow();
        var cell = new TableCell();
        var tbl = new Table();
        cell.Height = Unit.Pixel(100);
        cell.Width = Unit.Percentage(100);
        var pnl1 = new Panel();
        pnl1.ID = "Panel" + i;
        pnl1.Width = Unit.Percentage(800);
        pnl1.Height = Unit.Percentage(100);
        pnl1.BackColor = Color.FromArgb(255, 231, 229, 246);
        pnl1.Visible = true;
        pnl1.BorderStyle = BorderStyle.Solid;
        pnl1.BorderWidth = Unit.Pixel(2);
        cell.Controls.Add(pnl1);
        row.Cells.Add(cell);
        TableMain.Rows.Add(row);
        pnl1.Controls.Add(tbl);
        tbl.ID = "tbl" + (i + 1);
        tbl.BorderStyle = BorderStyle.Solid;
        tbl.Width = Unit.Percentage(100);
        tbl.BorderWidth = Unit.Pixel(1);
        var tbl_row = new TableRow();
        var tbl_cell = new TableCell();
        tbl_cell.Height = Unit.Pixel(90);
        tbl_cell.Width = Unit.Pixel(20);
        tbl_cell.BorderStyle = BorderStyle.Solid;
        tbl_cell.BorderWidth = Unit.Pixel(2);
        tbl_row.Cells.Add(tbl_cell);
        tbl.Rows.Add(tbl_row);
    }
} 
```

这是HTML：

```
<body>
    <form id="form1" runat="server">
        <div id="div" runat="server" style="width: 1000px; height: 500px; background-color:lightgoldenrodyellow ">
            <asp:Button ID="Button1" runat="server" Text="ADD SLAB" OnClick="Button1Click" />
            <asp:Button ID="Button2" runat="server" Text="ADD IMAGE" OnClick="Button2Click" />
            <asp:Table ID="TableMain" runat="server" Border="0">
            </asp:Table>
        </div>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:26:17.237

当您动态创建控件时，您必须在每个回帖中添加它们。

在您的代码中，当您将行和单元格添加到表中时，您不会保存之前已经存在的内容......您应该将控件添加到 ViewState。从文档中：

> 视图状态在生活中的目的很简单：它可以在回发中保持状态。（对于 ASP.NET 网页，其状态是构成其控件层次结构的控件的属性值。）

请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms972976.aspx)以了解 ViewState 并了解如何使用它。

# jquery - Codeigniter 和 JQuery 你好世界

> ID：13137625
> 
> 赞同：-1
> 
> 时间：2012-10-30T11:04:17.740
> 
> 标签：jquery, codeigniter

我无法让 Jquery 在 CI 中工作。

我从官网下载了jquery。现在我有一个简单的

```
<script type="text/javascript" src="path_to_jquery"></script> 
```

然后：

```
<script type="text/javascript">
    $(document).ready(
       function () {
          alert('The document is ready.');
       }
    ); 
</script> 
```

并且警报没有出现。那么我做错了什么..？

所有这些代码都在我的“视图”中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:33:52.593

令我困扰的是，您已接受上述答案为正确答案。因为不正确，所以将 url 添加到 type="" 而不是 src=""。

这是正确的片段：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

别客气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:07:56.033

确保`javascript`在您的 Bowser 中启用

在文件中添加此脚本`view`并运行

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

如果它不起作用，请在**浏览器中检查您的****页面源**。

 ****编辑**

如果你想从你的服务器加载 JQuery，只需使用

```
<script type="text/javascript" src="<?php echo base_url()?>file_path_in_app/jquery.js"></script> 
```

**建议**

你可以使用`firebug`工具来调试这些类型的错误..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:37:27.943

您只需下载最新的 jQuery 插件并添加

```
<script src=""></script> 
```

在 src 中，您只需维护 jQuery api 插件的文件路径。**

# google-app-engine - 在 if 中覆盖应用程序引擎模板块

> ID：13137628
> 
> 赞同：0
> 
> 时间：2012-10-30T11:04:25.453
> 
> 标签：google-app-engine

我在基本 appengine 模板中定义了一个块“left_area”

```
{% block left_area %}
   <div class="span3">
     Left area content
   </div> 
{% endblock %} 
```

在子模板中，我想在 if 中覆盖这个块

```
{% if not user %}
  {% block left_area %}
    <div class="span2">
    </div> 
  {% endblock %}
{% endif %} 
```

由于某种原因，这不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:01:36.860

在 jinja 中，你可以使用 super() 来解决它，它会渲染父块：

```
{% block left_area %}
    {% if not user %}
        <div class="span2">
        </div>
    {% else %}        
        {{ super() }}
    {% endif %} 
{% endblock %} 
```

# javascript - javascript/css 模拟时钟有一个小问题

> ID：13137631
> 
> 赞同：0
> 
> 时间：2012-10-30T11:04:32.917
> 
> 标签：javascript, css, clock

页面加载时我的时钟似乎没有运行，除非我以时钟 ID 结束网址，即`#clock`.

这不会在负载时运行：http: [//maxim.comze.com/clock/index.html](http://maxim.comze.com/clock/index.html)

这在负载时运行：http: [//maxim.comze.com/clock/index.html#clock](http://maxim.comze.com/clock/index.html#clock)

我试过`$(document).ready(function()`了，但它似乎并没有让它在负载时运行。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:34:02.343

问题是您在加载时调用了一次脚本。所以它起作用了，只有一次。您需要`setInterval();`每秒运行一次。更新了您的代码，还移动了一些东西。看看：http: **[//jsfiddle.net/uMVnE/4/](http://jsfiddle.net/uMVnE/4/)**

```
setInterval(function(){
        startClock(prop)
},100); 
```

**编辑**刚刚意识到它不像你原来的那么顺利。这是一个问题吗？

# c# - C# Timer 仅从第一个“if”开始

> ID：13137633
> 
> 赞同：-1
> 
> 时间：2012-10-30T11:04:37.510
> 
> 标签：c#, if-statement, timer

我正在制作一个游戏，并希望以不同的分数显示文本。但是目前计时器仅在第一个 if （因此如果分数等于 100）时才起作用（仅显示文本），我需要一些帮助，因为它也需要与 200、300、400、... -1000 一起使用。

这是代码：

```
void startTimer()
{  
    if (score == 100)
    {   
        timerWIN.Start();  
    } 
    else if (score == 200)   
    {    
        timerWIN.Start();  
    }  
    else if (score == 300)  
    {  
        timerWIN.Start();  
    }  
    else if (score == 400)  
    {    
        timerWIN.Start();  
    }  
    else if (score == 500)  
    {    
        timerWIN.Start();  
    }  
    else if (score == 600)  
    {    
        timerWIN.Start();  
    }  
    else if (score == 700)  
    {    
        timerWIN.Start();  
    }  
    else if (score == 900)  
    {    
        timerWIN.Start();  
    }  
    else if (score == 1000)  
    {    
        timer1000.Start();  
    } 
}

private void timerWIN_Tick_1(object sender, EventArgs e) 
{   
    if (timerTick == 1)   
    {
        lblWin1.Visible = true;
        lblWin2.Visible = true;   
    }   
    else if (timerTick == 15)   
    {
        lblWin1.Visible = false;
        lblWin2.Visible = false;
        timerWIN.Stop();   
    }

    timerTick++; 
}

private void timer1000_Tick(object sender, EventArgs e) 
{   
    if (timerTick == 1)   
    {
        lblWin1.Text = "500 points!";
        lblWin2.Text = "You're doing great.";
        lblWin1.Visible = true;
        lblWin2.Visible = true;   
    }   
    else if (timerTick == 15)   
    {
        lblWin1.Visible = false;
        lblWin2.Visible = false;
        lblWin1.Text = "Yeah that's it.";
        lblWin2.Text = "Keep feeding me baby.";
        timer1000.Stop();   
    }

     timerTick++; 
} 
```

根据要求，这是我给出分数的方式：（每次碰撞，我都会得到分数）

```
 private void timer1_Tick(object sender, EventArgs e)
{
  snakeScoreLabel.Text = Convert.ToString(score);

  if (down) { snake.moveDown(); }
  if (up) {snake.moveUp(); }
  if (right) {snake.moveRight(); }
  if (left) {snake.moveLeft(); }

  for (int i = 0; i < snake.SnakeRec.Length; i++)
  {
    if (snake.SnakeRec[i].IntersectsWith(food.foodRec))
    {
      score += points;
      snake.growSnake();
      food.foodLocation(randFood);
      startTimer();
    }

  }

  collission();

  this.Invalidate();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:15:33.380

确保`score`根据您的要求增加。从上面给出的代码来看，分数无处更新。

**建议：**使用下面的代码片段使您的代码简洁：

```
void startTimer()
{  
    if (score >= 100 && score <= 900 && score % 100 == 0)
    {   
        timerWIN.Start();  
    }  
    else if (score == 1000)  
    {    
        timer1000.Start();  
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:16:22.033

我起初误读了这个问题，您可以通过使用 switch 语句来简化代码，它可能会帮助您找到逻辑中的错误，因为从提供的代码中很难看出您到底哪里出错了。

```
switch (score)
{
    case 100:
    case 200:
    case 300:
    case 400:
    case 500:
    case 600:
    case 700:
    case 800:
    case 900:
        timerWIN.Start();
        break;
    case 1000:
        timer1000.Start();
        break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:14:44.940

`score`显示正在修改的代码片段。

* * *

你应该改变你的`startTimer`方法如下：

```
void startTimer()
{
    if(score == 1000)
    {
        timer1000.Start();  
    }
    else if(score % 100 == 0 && score < 1000)
    {
        timerWIN.Start();  
    }
} 
```

和，

在`timer1000_Tick`方法内，你不应该停下`timer1000`来代替`timerWIN`.

```
timer1000.Stop(); 
```

# android - android 2.3 以上的均衡器是使用 OpenSL 的吗？

> ID：13137638
> 
> 赞同：0
> 
> 时间：2012-10-30T11:04:47.177
> 
> 标签：android, android-ndk

文档说均衡器中使用了OpenSL。我正在寻找均衡器提供的功能之外的一些功能。谁能告诉我这是否可以通过NDK实现？

# actionscript-3 - 在 Flex 中动态创建按钮

> ID：13137639
> 
> 赞同：2
> 
> 时间：2012-10-30T11:04:47.603
> 
> 标签：actionscript-3, flex4

我对 Flex SDK 有非常基本的问题，但我没有找到任何资源来解决我的问题，老实说，我什至不知道是否可以做我想做的事。所以这是我的问题：

我使用 Adob​​e Flex Builder 4.6 创建了 Flex 项目。然后我将按钮（假设它的 id is `btn1`）放在主 MXML 文件中。我想从主 MXML 文件的脚本部分动态创建第二个按钮。具体来说，我想从`btn1`.

这是我的 MXML 代码（它是 project 中的唯一文件）：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" 
               minWidth="955" minHeight="600">

    <fx:Script>
        <![CDATA[
            protected function btn1_clickHandler(event:MouseEvent):void
            {
                var btn2:Button = new Button();
                btn2.label = "Hello";
                btn2.x = 50;
                btn2.y = 50;
            }
        ]]>
    </fx:Script>

    <fx:Declarations>
        <!-- Non visual elements -->
    </fx:Declarations>

    <s:Button id="btn1" 
              x="10" y="10" 
              label="Кнопка"
              click="btn1_clickHandler(event)"/>

</s:Application> 
```

但是当我点击时`btn1`- 没有任何反应。我可能不了解 flex 编程范式中的某些内容 - 请为我指出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:15:36.153

您必须使用 将按钮添加到视图中**`addElement()`**。

```
var btn2:Button = new Button();
btn2.label = "Hello";
btn2.x = 50;
btn2.y = 50;

addElement(btn2); 
```

# php - php中的存储过程

> ID：13137643
> 
> 赞同：0
> 
> 时间：2012-10-30T11:05:11.147
> 
> 标签：php, mysql, sql

我正在使用存储过程从数据库中获取数据。

```
$result = mysql_query("call FindProspectRequests('','Summit','','NULL','NULL')") or die (mysql_error()); 
```

最后两个参数是 starttime 和 endtime 如果我像上面那样直接调用我的程序正在工作。（字段接受值为 NULL ）

但是考虑这种情况，当我如下调用时，它对我不起作用。

```
 $starttime ='NULL';
 $endtime ='NULL';

$result = mysql_query("call FindProspectRequests('','Summit','','$starttime','$endtime')") or die (mysql_error()); 
```

请告诉我我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:13:02.867

你应该试试

```
 $starttime = "'NULL'";
     $endtime = "'NULL'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:21:36.447

我想你只是想做：

```
$starttime = "NULL";
$endtime = "NULL";

$result = mysql_query("call FindProspectRequests('','Summit','',$starttime,$endtime)") or die (mysql_error()); 
```

注意：您发送的 SQL 字符串中已删除的引号...

**但是，我强烈建议您听从@WaleedKhan 的建议**，停止使用 mysql_ 函数并在 mysqli 和 PDO 之间进行选择...如果这是一个有很多代码的应用程序已经切换到 mysqi_* 命令将是做最少的改变。

# json - Jquery ajax text/html 到 application/json

> ID：13137645
> 
> 赞同：2
> 
> 时间：2012-10-30T11:05:12.193
> 
> 标签：json, jquery

我在使用下面的 ajax 请求时出错。

```
$.ajax({
    url: "http://webservice.users.com:8000/users",
    dataType: 'jsonp',
    beforeSend: function (xhr) {
        xhr.setRequestHeader("Authorization", "Basic b2d1e77hbi5lcmVu1BhczRVYg");
    },
    success: function (json) { console.log(json); },
    error: function (httpReq, status, exception) {
        console.log(status + " " + exception);
    }
}); 
```

我的调用是跨域的，结果是 text/html（可能 jquery 无法将结果转换为 application/json）

控制台错误：parsererror 错误：jQuery18206287364205345511_1351595013388 未调用错误： chrome 浏览器中的**“SyntaxError: Unexpected token :”**。

Chrome 开发者工具服务响应头：

```
Cache-Control:no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection:Keep-Alive
Content-Encoding:gzip
Content-Length:180
Content-Type:text/html
Date:Tue, 30 Oct 2012 10:36:57 GMT
Expires:Thu, 19 Nov 1981 08:52:00 GMT
Keep-Alive:timeout=15, max=100
Pragma:no-cache
Server:Apache/2.2.16 (Debian)
Set-Cookie:active_style=style; expires=Wed, 30-Oct-2013 10:36:57 GMT
Vary:Accept-Encoding,User-Agent 
```

服务器响应正文：

```
{
    "data": {
        "islogin": "0"
    },
    "userdata": {
        "login": "0"
    },
    "rstatus": {
        "status": "0",
        "errno": "5555",
        "mesg": "blablabla"
    }
} 
```

# spring - 如何使用 Spring 将 SessionFactory 连接到 Hibernate 拦截器？

> ID：13137647
> 
> 赞同：5
> 
> 时间：2012-10-30T11:05:19.110
> 
> 标签：spring, hibernate, interceptor, sessionfactory

所以，我按照 Hibernate 文档来配置拦截器（[链接](http://docs.jboss.org/hibernate/core/4.0/manual/en-US/html/events.html#objectstate-interceptors)）。然后，我在 AnnotationSessionFactoryBean 中注册我的拦截器，如下所示：

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
<property name="entityInterceptor">
<bean class="domain.interceptor.AddressInterceptor"/>
</property>
</bean> 
```

我想要实现的是在我的拦截器中捕获某些内容时在我的日志表中插入一行。但是，这引入了循环配置依赖：Interceptor 需要 SessionFactory，而 SessionFactory 需要 Interceptor。如何在我的拦截器中连接 SessionFactory？

# java - 使用Java从网站读取php文件？

> ID：13137651
> 
> 赞同：-1
> 
> 时间：2012-10-30T11:05:26.777
> 
> 标签：java, php, execute

我知道您可以使用 Java 从以下网站执行 php 文件：

```
URLConnection conn = new URL("http://localhost/file.php").openConnection();
conn.connect(); 
```

但是，是否有可能让 Java 将 php 文件作为文本文件读取，如何读取？（可能通过使用 BufferedReader）

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:10:22.983

如果您的意思是阅读`php`源代码，那么答案是否定的——您无法`php`在典型的网络服务器配置中阅读源代码。在大多数情况下，允许它是非常不安全的——密码和其他常量通常存储在`php`源代码中。

但是，如果您只是想读出执行`php`文档的结果，就像浏览器那样，您可以使用类似的东西；

```
URL u = new URL("http://www.example.com/my/php/doc.php");
URLConnection c = u.openConnection();
InputStream r = c.getInputStream();
BufferedReader reader = new BufferedReader(new InputStreamReader(r));
for(String line; (line = reader.readLine()) != null;) System.out.println(line); 
```

* * *

要通过 http 读取远程`php`文档的源代码，需要将网络服务器配置为*不*解析和执行文件，而只是盲目地将其作为纯文本文件提供。

这可以通过几种方式实现；

1.  卸载`php`- 没有 php 引擎，没有代码执行。
2.  更改文件扩展名 - apache 实际上只是通过文件扩展名来识别文件，因此`.phpsource`在许多情况下将其更改为可以解决问题。
3.  更改 apache 配置 - 全局或通过`.htaccess`您可以更改单个目录的网络服务器配置。你会想做类似`php_flag engine off`或`RemoveHandler .php`

请注意，只有上述第一种（*可能*还有第二种）方法**不会**在您的服务器中打开潜在的安全漏洞。所以谨慎使用。

# php - 计算关系表条目

> ID：13137654
> 
> 赞同：1
> 
> 时间：2012-10-30T11:05:45.700
> 
> 标签：php, mysql, yii

代码：

```
$criteria = new CDbCriteria;
$criteria->select='id, name, count(events.id) AS event_relational';
$criteria->with=array('events');
$model = Profiles::model()->findAll($criteria); 
```

回复：

```
[{"id":"1","name":"Profile 1","event_relational":"0"}] 
```

* * *

代码 2：

```
$criteria = new CDbCriteria;
$criteria->select='id, name';
$criteria->with=array('events');
$model = Profiles::model()->findAll($criteria); 
```

回应 2：

```
[{"id":"1","name":"Profile 1","event_relational":null},{"id":"2","name":"Profile 2","event_relational":null}...] 
```

* * *

* * *

当我使用 COUNT 时，查询在第一个 MySQL 条目中停止。我想代码返回所有条目并检查是否有关系事件。

我想要的回应：

```
[{"id":"1","name":"Profile 1","event_relational":"0"},{"id":"2","name":"Profile 2","event_relational":"1"}...] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:29:22.643

为此，您需要`group`：`profile.id`

```
$criteria = new CDbCriteria;
$criteria->select='id, name, count(events.id) AS event_relational';
$criteria->with=array('events');
$criteria->group='t.id';
$model = Profiles::model()->findAll($criteria); 
```

# git - 浅克隆的局限性是什么

> ID：13137660
> 
> 赞同：6
> 
> 时间：2012-10-30T11:06:17.410
> 
> 标签：git

在我们尝试引入 Git 的组织中，我们现在遇到了与二进制文件相关的 Git 行为问题。
我们的项目将包含二进制和文本类型文件的良好组合，典型大小可能为 1 GB。我们担心几年后完整克隆会变得太大并导致性能和磁盘空间问题。
将迁移到 Git 的环境之一当前将其软件安装在称为 TCM 的系统上。7-10 年版本的存储库的总大小为 2 TB。
ClearCase 上的另一个环境有大约 7-8 年的数据，大约 1 TB。
由于 Git 不存储尤其会影响二进制文件的增量，因此 5 年多后的情况引起了我们的用户的关注。
浅克隆功能本来是理想的。但是文档说：“浅层存储库有许多限制（您不能克隆或从中获取，也不能从中推送或推入），但如果您只对具有长期历史的大型项目的近期历史感兴趣，则足够历史，并希望将修复作为补丁发送。”。对浅层克隆的粗略检查会表明它工作正常，但肯定有已知的用例无法工作，因此文档
是否有已知的用例列表无法工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T11:27:14.893

我会敦促您将二进制文件存储在专用存储库中，易于扩展且易于清理：像[Nexus](http://www.sonatype.org/nexus/)这样的工件存储库。[您在“如何处理大型 git 存储库？](https://stackoverflow.com/questions/12855926/how-to-handle-a-large-git-repository/12855986#12855986)
” 中有其他选择。

试图将所有内容都保存在 Git 中，以某种不自然的方式使用它，总是会带来更多值得的麻烦：它是一个*源代码*控制工具。您不妨将它用于它的好处。

话虽如此，~~浅克隆不支持推送（或者，至少，它很危险：请参阅“[为什么我不能从浅克隆推送？](https://stackoverflow.com/questions/6900103/why-cant-i-push-from-a-shallow-clone) ”）。~~
对于只读目的，一个简单的[`git archive`](http://www.kernel.org/pub/software/scm/git/docs/git-archive.html)就足够了，如“[不理解 git shallow clone](https://stackoverflow.com/questions/1992611/not-understanding-git-shallow-clone) ”中所述。

2015 年更新：

*   实际上，您现在可以使用浅层克隆进行推/拉，请参阅“ （浅层克隆）[是否`git clone --depth 1`比它想象的更有用？](https://stackoverflow.com/a/21217267/6309) ”
*   您甚至可以（使用 Git 2.5+）获取单个提交。请参阅“[从远程 git 存储库中拉取特定提交](https://stackoverflow.com/a/30701724/6309)”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T18:01:26.347

[Git Annex](http://git-annex.branchable.com/)也非常漂亮地解决了“git 中/附近的大二进制文件”问题。

# android - 在 Android 中发送电子邮件

> ID：13137662
> 
> 赞同：1
> 
> 时间：2012-10-30T11:06:29.313
> 
> 标签：android

我需要从我的 Android 应用程序发送一封电子邮件。因此，我向电子邮件客户端应用程序发送了 2 个参数（电子邮件和主题），但是当应用程序打开电子邮件客户端时，只添加了主题参数，并且未设置电子邮件参数。

我该如何解决这个问题？

```
 String getMail = email.toString();
  Log.d("GET MAIL:",getMail);
  String subject = "Subject";
  Intent emailIntent = new Intent(Intent.ACTION_SEND);
  emailIntent.putExtra(Intent.EXTRA_EMAIL, getMail);
  emailIntent.putExtra(Intent.EXTRA_SUBJECT, subject);

// need this to prompts email client only                                                
 emailIntent.setType("message/rfc822");
 startActivity(Intent.createChooser(emailIntent,"Choose E-mail client:")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T11:22:13.017

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 

                   emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{"me@gmail.com"}); 
                   emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,"Test Subject"); 
                   emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "From App"); 

                   startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T11:09:02.863

改变`emailIntent.putExtra(Intent.EXTRA_EMAIL, getMail);`

到：

```
emailIntent.putExtra(Intent.EXTRA_EMAIL, new String[]{getMail}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T11:22:08.187

getMail 应该是一个字符串数组...

# android - 限制 Android 同步到 WIFI

> ID：13137672
> 
> 赞同：4
> 
> 时间：2012-10-30T11:07:06.930
> 
> 标签：android, android-networking, android-syncadapter

我是 Android 新手，正在尝试编写一个`SyncAdapter`- 是否可以将其限制`SyncAdapter`为仅在网络为 WiFi（而不是 3G 等）时执行同步？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T11:27:50.837

你可以检查wifi

```
 ConnectivityManager cm = (ConnectivityManager) YourActivity.this.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo info = cm.getActiveNetworkInfo();

    if(info.getType()==ConnectivityManager.TYPE_WIFI)
    {
        System.out.println("WiFi Connected");
    }
    else
    {
            System.out.println("WiFi not connected");
    } 
```

并在清单中添加权限为

```
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T13:35:10.630

上面的答案很好，但我会添加一个 HttpHead-Request（也可以使用 HTTPGet，但您会收到比需要的更多的数据），它正在调用例如 google.com，这样您就可以确定您确实连接到了互联网。上面发布的解决方案只是检查您是否有网络访问权限，但不保证您有网络访问权限。

# java - android旋转返回错误的值

> ID：13137673
> 
> 赞同：1
> 
> 时间：2012-10-30T11:07:18.697
> 
> 标签：java, android

我正在使用 onconfigurationchanges 事件正确处理 android 上的旋转。触发事件时，会根据需要返回新的方向。但是，布局也有一个 webview，它具有 fill_parent 属性，并在旋转时根据它进行缩放。

问题是 webview 有时会返回相反的尺寸值（当纵向返回横向尺寸时，反之亦然），可能是因为在尺寸请求时它还没有被调整大小。如何处理该设备结束配置更改？谢谢你。

```
public void onConfigurationChanged(Configuration newConfig) {

      super.onConfigurationChanged(newConfig);  

      if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) { 
            //Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show(); 
              int heightW = webviewA.getHeight();
              Toast.makeText(this, Integer.toString(heightW), Toast.LENGTH_SHORT).show();

        } else{
            //Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show(); 
              int heightW = webviewA.getHeight();
            Toast.makeText(this, Integer.toString(heightW), Toast.LENGTH_SHORT).show();

   } 
```

# c# - 将 Sqlite 与 WP7 一起使用时出现 NullReferenceException

> ID：13137676
> 
> 赞同：1
> 
> 时间：2012-10-30T11:07:30.503
> 
> 标签：c#, sqlite, windows-phone-7

我是 Windows Phone 开发人员的新手，我正在关注下面链接上的教程，其中解释了如何将现有的 SQLite DB 与 WP 一起使用。

[http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Native-Database-Programming-via-Sqlite-Client-for-Windows-Phone.aspx](http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Native-Database-Programming-via-Sqlite-Client-for-Windows-Phone.aspx)

当我用我的数据库运行它时，出现以下错误：

```
System.IO.Stream src = Application.GetResourceStream(new Uri("/" + assemblyName + ";component/" + dbName, UriKind.Relative)).Stream; 
```

我尝试通过分解它来解决它，但它对我没有帮助。任何帮助表示赞赏。这就是教程中提到的方式，我也相应地更改了数据库的名称，但是 ap 崩溃了。请帮助我，把我拉出来。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:17:11.310

您应该确保：

*   数据库文件存在于指定路径
*   数据库文件的`Build Action`设置为`Resource`

# android - 由于证书不一致，在模拟器上安装失败

> ID：13137678
> 
> 赞同：0
> 
> 时间：2012-10-30T11:07:35.020
> 
> 标签：android, launcher

我一直在对默认的 ICS launcher2 进行一些更改。当我将它安装在设备上时，它工作正常。但是当我尝试在模拟器上安装时，它给了我以下错误

```
 Failure [INSTALL_PARSE_FAILED_INCONSISTENT_CERTIFICATES] 
```

我知道这是因为模拟器上先前安装的 laucher 证书与我要安装的证书之间存在冲突。我还更改了包名称并尝试过。这也适用于设备，但不适用于模拟器。
谢谢你。

# php - Joomla AJAX 调用丢失 Joomla 数据库类

> ID：13137682
> 
> 赞同：2
> 
> 时间：2012-10-30T11:07:48.847
> 
> 标签：php, ajax, database, joomla

我目前正在将一些功能构建到**Joomla**构建中，而结果是在选择框更改时从数据库返回的。我遇到的问题是，当我`Ajax`拨打电话时，我得到一个`Class JFactory`未找到的错误，我认为这是因为在拨打电话时，运行 php 代码的文件不被认为在 Joomla 框架内`AJAX`？我试图自己解决这个问题，但遇到了麻烦。谁能指出我错在哪里的正确方向？

调用（在`Ajax`index.php 中）：

```
<script type="text/javascript">
    var url = "<?php echo $this->baseurl; ?>/templates/<?php echo $this->template; ?>/directory_code.php";
    jQuery(document).ready(function() {
        jQuery('#city').change(function() {         
        jQuery.ajax({
            url: url,
            type: "POST",
            data: jQuery("#city").serialize(),
            dataType: 'json',
            success: function(data) {
            alert('data');
            }
        });
    });
});
</script> 
```

和函数（在一个名为 directory_code.php 的文件中）：

```
if(isset($_POST)) {
    if(isset($_POST['city'])) {
        $city = $_POST['city'];
        $suburbs = populateSuburbs($city);
    }
}   

function populateSuburbs($city) {               
    $db = JFactory::getDBO();
    $query = "SELECT DISTINCT suburb FROM vyj20_contact_details";
    $db->setQuery($query);
    $results = $db->loadObjectList();
    foreach($results as $key => $result) {
        $data['suburb'][] = array(
            $key => $result->suburb
        );
    }
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:34:40.800

代码`defined( '_JEXEC' ) or die( 'Restricted access' );`通常限制ajax

功能，因此您将需要使用`define('_JEXEC', 1);`

请注意，您需要使用`define`而不是`defined`，所以如果您还没有这样做，我建议您尝试一下。

# .net - wpf datagrid有角度的标题样式

> ID：13137684
> 
> 赞同：3
> 
> 时间：2012-10-30T11:07:51.727
> 
> 标签：.net, wpf, datagrid, header, angle

我正在根据[Margaret Parsons 文章](http://blogs.msdn.com/b/wpfsdk/archive/2010/01/06/angled-headers-in-the-datagrid.aspx)创建 DataGrid 角度标题样式。现在它看起来像这样：

```
<Style x:Key="DataGridColumnHeaderAngle" 
       TargetType="{x:Type DataGridColumnHeader}">
    <Setter Property="VerticalContentAlignment" Value="Center" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type DataGridColumnHeader}">
          <Grid x:Name="HeaderGrid" ShowGridLines="True" 
              Width="30">
            <Rectangle Name="HeaderRect" Fill="Azure" Stroke="Black" 
                       Width="{TemplateBinding Width}"
                       Height="{TemplateBinding Height}">
              <Rectangle.RenderTransform>
                <SkewTransform CenterX="0" AngleX="-60" AngleY="0"
                     CenterY="{Binding RelativeSource={RelativeSource TemplatedParent}, 
                              Path=ActualHeight }"/>
                </Rectangle.RenderTransform>
            </Rectangle>

            <TextBlock Text="{TemplateBinding Content}"
                   Background="Aqua"
                   VerticalAlignment="Bottom" HorizontalAlignment="Left">
                <TextBlock.LayoutTransform>
                  <RotateTransform Angle="-30"/>
                </TextBlock.LayoutTransform>
                <TextBlock.RenderTransform>
                  <TranslateTransform  X="20"/>
                </TextBlock.RenderTransform>
            </TextBlock>

            <!--ContentPresenter Content="{TemplateBinding Content}" Width="200"
                          VerticalAlignment="Bottom" HorizontalAlignment="Left">
              <ContentPresenter.LayoutTransform>
                <RotateTransform Angle="-30"/>
              </ContentPresenter.LayoutTransform>
              <ContentPresenter.RenderTransform>
                <TranslateTransform  X="18"/>
              </ContentPresenter.RenderTransform>
            </ContentPresenter-->

          </Grid>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style> 
```

`ContentPresenter`被更改为彩色`TextBlock`是为了看到它的边界。

我的问题：默认情况下，列宽等于标题文本宽度，因此单元格位置的使用不是最佳的。当我减小列 ( `HeaderGrid`) 宽度（通过绑定/转换器或手动）时，标题文本宽度也会减小

[看图片](http://i.stack.imgur.com/W1WNd.jpg)

有没有办法在不剪切标题文本的情况下减小列宽？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T09:11:03.737

我知道这是很久以前的事了，但是我使用同一个博客来实现我的倾斜标题，我想我会发布我的裁剪解决方案。我发现 ContentPresenter 的物理布局框架受其父级限制，因此通过在右边距上使用负数，将扩展 contentpresenter 的布局框架，以便呈现文本。

**（注意：在我的解决方案中，我使用了 TextBlock，而不是 ContentPresenter）**

我将 Control 的右边距绑定到自身的反向 ActualWidth 以确保正确的边距：

```
<TextBlock.Margin>
    <Binding ElementName="HeaderContent"
             Path="ActualWidth"
             Converter="{StaticResource MarginConverter}" />
</TextBlock.Margin> 
```

带转换器：

```
<TextBlock.Resources>
    <converters:AngledHeadersMarginConverter x:Key="MarginConverter" />
</TextBlock.Resources> 
```

这样做：

```
class AngledHeadersMarginConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return new Thickness(0, 0, -(double)value, 0);
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

这似乎解决了问题。

# joomla - Joomla for Business Intelligence 报告跨企业共享

> ID：13137685
> 
> 赞同：0
> 
> 时间：2012-10-30T11:07:53.020
> 
> 标签：joomla, business-intelligence, enterprise, sharing

我们正在寻找通用中心的各种选项，我们希望在其中发布通用商业智能报告，以便共享和提供对可用信息和元数据的更轻松访问。我们确实有 Microstrategy 和 Tableu 作为我们的企业报告工具，但缺乏链接到这些报告的元数据。因此，我们希望通过一个公共中心区域提供该链接，用户可以在该区域自己探索和理解各种信息区域，最终使其成为企业范围的信息存储库，而不仅仅是一个报告应用程序。

我们正在考虑与 joomla 一起的其他几个选项。我们知道 joomla 主要是一个网站内容管理系统。但我们希望了解您对使用 joomla 和可能定制的管理控制台来共享报告和链接的看法。我们目前不知道它是否是正确的使用方式。如果您的任何组织采用任何更简单的方法来解决问题，请向我们提出同样的建议。此外，如果可能，请向我们提供类似用例的链接以及自定义 joomla 管理控制台的任何示例。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T23:04:18.987

我会使用 GroupJive 管理用户组之间的通信。Groupjive 有一个可以发布链接的墙，集成了论坛 (kunena) 并具有上传文档的功能。

每个组的访问权限可在 groupjive 上配置，因此您可以将某些信息的访问权限限制为某些用户并定义版主。

希望能帮助到你！

[http://www.joomlapolis.com/cb-solutions/groupjive](http://www.joomlapolis.com/cb-solutions/groupjive)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:24:19.257

如果使用 Joomla .. 您可以尝试使用 ZOO 构建描述的功能，这是一个灵活而强大的内容应用程序构建器来管理您的内容 [http://www.yotheme.com/zoo](http://www.yootheme.com/zoo)

# java - 禁用后仍然可以从 JComboBox 中选择

> ID：13137691
> 
> 赞同：1
> 
> 时间：2012-10-30T11:07:57.030
> 
> 标签：java, swing, jcombobox, tablecellrenderer

我在设置 JComboBox 时遇到问题。在单独的面板上为用户提供了一些选项，这些选项确定是否应该启用/禁用 JComboBox - 我遇到的问题是，即使在 JComboBox 被禁用时，用户仍然可以从 JComboBox 中进行选择（它被禁用，因为组合框是灰色的）！JComboBox 使用自定义 TableCellRenderer 和自定义 DefaultCellEditor。JComboBox 也是 JTable 的一行中的一个单元格/列。

所以这里是代码的细分：

******* *JTable 的prepareRenderer* *********

 **```
public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
    JComponent component = (JComponent) super.prepareRenderer(renderer, row, column);
       //Code which checks to see if component should be enabled
       enableComponent = false;
       component.setEnabled(enableComponent);
    } 
```

*设置组合框*

```
public void setupUserCombo(){

       TableColumn col = getColumnModel().getColumn(0);
           List<String> comboUsers = new String["Adam", "Ben"]

    MyComboBoxRenderer jComboBox = (new MyComboBoxRenderer((String[])values.toArray(comboUsers ));
    col.setCellEditor(new MyComboBoxEditor((String[])values.toArray(new String[0])));
    col.setCellRenderer(jComboBox);

    repaint();
} 
```

*表格单元渲染器 *

```
 public class MyComboBoxRenderer extends JComboBox implements TableCellRenderer {
    private static final long serialVersionUID = 1L;

    public MyComboBoxRenderer(String[] items) {
        super(items);
        repaint();
    }

    public Component getTableCellRendererComponent(JTable table, Object value,
            boolean isSelected, boolean hasFocus, int row, int column) {
        setSelectedItem("");

        if (isSelected) {
            super.setBackground(table.getSelectionBackground());
        } else {
            setForeground(table.getForeground());
            setBackground(table.getBackground());
        }

        setSelectedItem(value);

        return this;
    }

} 
```

*默认单元格编辑器 *

```
 public class MyComboBoxEditor extends DefaultCellEditor {
        private static final long serialVersionUID = 1L;

    public MyComboBoxEditor(String[] items) {
        super(new JComboBox(items));
    }
} 
```

任何关于我做错了什么的指针将不胜感激！

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:21:41.673

*   请参阅有关[将组合框用作编辑器的](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#combobox)[JTable 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

*   [查看@aterai](https://stackoverflow.com/a/12844115/714968)

*   不要存储`JComponents`在 中`XxxTableModel`，然后最后选择的值`JComboBox`存储`XxxTableModel`在`String value`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T11:24:30.633

如果要禁用表格中单元格的版本，则应覆盖[`TableModel.isCellEditable(int,int)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableModel.html#isCellEditable%28int,%20int%29)

在这里，您所做的只是呈现一个禁用的 JComboBox，但这不会阻止编辑，它只是呈现一个禁用的 JComboBox。另请参阅[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)**

# c++ - 如何通过在运行时编辑文件来设置窗口属性？

> ID：13137692
> 
> 赞同：0
> 
> 时间：2012-10-30T11:08:05.550
> 
> 标签：c++, mfc, runtime

我在 C++ 中使用**MFC**（Win32 API 的上层结构）。

我有一个组件**Window**和**JSON 文件**。在 JSON 文件中是**height** , **width** , **top** , **left**和**值**（它不是那么重要）。

**我现在拥有**的：我有一个正在运行的程序和 JSON 文件。如果我编辑 JSON 文件并保存它，**更改将不会更改**。**更改在我关闭并启动新程序**后生效。

**我需要什么**：如果我编辑 JSON 文件并保存它，更改将**在运行时立即反映**。

任何想法，使用指针或如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:30:59.847

您需要使用 FindFirstChangeNotification 创建一个事件，然后在其上使用 WaitForSingleObject。当目录内容发生指定事件时，它将发出信号。然后，您需要重新阅读并修改窗口的位置

# java - 来自被称为 asynctask 的静态方法的并发修改异常

> ID：13137698
> 
> 赞同：1
> 
> 时间：2012-10-30T11:08:36.897
> 
> 标签：java, android, android-asynctask

我有一个静态方法，我从 doInBackGround() 中的 Asynctask 调用

在方法中有这部分代码：

```
 ArrayList<Message> messagesList = new ArrayList<Message>();
    if (!clearList) {
        messagesList.addAll(messages.getMessagesList());
            for (Message msg : messagesList) {
                if (msg.getId().length() == 0) {
                    messagesList.remove(msg);
                }
        }
    } 
```

有时会抛出“并发修改异常”，我尝试将该方法声明为“同步”，但它仍然没有帮助，并且我无法声明块同步，因为它是静态方法并且没有“this”引用.

如果我需要启动另一个异步任务，我也尝试停止正在运行的异步任务，但它也没有帮助。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T11:10:53.163

这与同步无关。您正在使用迭代器来循环`messagesList`，然后`remove`在迭代期间使用它来修改它。您不能这样做，因为`ArrayList`如果在迭代期间修改列表，则迭代器会失败。从[文档](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)：

> 此类的`iterator`和`listIterator`方法返回的迭代器是*快速失败的*：如果在创建迭代器后的任何时候列表在结构上被修改，除了通过迭代器自己的`remove`或`add`方法之外的任何方式，迭代器将抛出一个`ConcurrentModificationException`.

您的[增强`for`循环](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2)只是使用 an 的语法糖`Iterator`，因此您可以明确说明，然后使用迭代器的[`remove`方法](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#remove%28%29)：

```
Iterator<Message> it = messagesList.iterator();
while (it.hasNext()) {
    if (it.next().getId().length == 0) {
       it.remove();
    }
} 
```

或者，您可以只使用一个简单的`for`循环向后运行并索引到`ArrayList`（因为`get(int)`是对 an 的廉价且恒定时间的操作`ArrayList`，并非所有`List`s 都如此）：

```
int index;
for (index = messagesList.length - 1; index >= 0; --index) {
    if (messagesList.get(index).getId().length == 0) {
       messagesList.remove(index);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T11:12:50.330

[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)返回的迭代器本质上是`fail-fast`。

> 这个类的迭代器和`listIterator`方法返回的迭代器是`fail-fas`t：如果在迭代器创建后的任何时候列表在结构上被修改，除了通过迭代器自己的 remove 或 add 方法之外，迭代器将抛出一个`ConcurrentModificationException`. 因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。

`iterator.remove();`您可以基于迭代器显式而不是隐式调用和更改循环。

```
ArrayList<Message> messagesList = new ArrayList<Message>();
    if (!clearList) {
        messagesList.addAll(messages.getMessagesList());
        for (ListIterator<Message> iterator = messagesList.listIterator();iterator.hasNext();) {
            Message message = iterator.next();
            if (message.getId().length() == 0) {
                iterator.remove();
            }
        }
    } 
```

参考：

1.  [For-Each 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)
2.  [数组列表 Java 文档](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T11:14:34.763

```
 for (Message msg : messagesList) {
                if (msg.getId().length() == 0) {
                    messagesList.remove(msg);
                }
        } 
```

在这段代码中，您`messagesList`一次使用的代码也将从中删除数据，`messagesList`这就是您面临错误**并发修改异常**的原因..

这是解决您问题的更好方法。复制一个数组列表中的所有数据，以便从主列表中删除和删除所有数据。

```
Message removeMsg = new ArrayList<Message>();
 for (Message msg : messagesList) {
                    if (msg.getId().length() == 0) {
                        removeMsg.add(msg);
                    }
            }

messagesList.removeAll(removeMsg); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-30T11:10:51.613

`for`循环可能会修改它正在迭代的列表。这就是异常的原因。修改是基于条件的这一事实是它不会一直发生的原因，因为不一定要修改列表。

使用 an`Iterator`是一种可能的解决方案，它提供了一种`remove()`方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T11:14:15.007

您应该`Synchronize`为此类使用关键字，因为静态方法不属于任何实例

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T11:19:39.170

**-**您的问题与同步无关，但您面临的 ConcurrentModification 问题用于保护集合不接收错误类型的对象**。**

**例如：**

防止 Cat 对象进入 Dog 类型的 Collection。

**-**你可以通过使用来解决这个问题`Iterator`

```
ArrayList<Message> messagesList = new ArrayList<Message>();

Iterator<Message> itr = messagesList.iterator();

while(itr.hasNext()){

 Message m = itr.next();

 itr.remove();   // Its remove() method of Iterator NOT ArrayList's

} 
```

# sql - 对重复项重新编号以使其唯一

> ID：13137699
> 
> 赞同：1
> 
> 时间：2012-10-30T11:08:41.583
> 
> 标签：sql, postgresql, postgresql-8.2

```
 Table "public.t"
 Column |  Type   | Modifiers
--------+---------+-----------
 code   | text    |
 grid   | integer | 
```

该`codigo`列虽然是文本类型，但具有重复的数字序列。网格列是唯一的序列。

```
select * from t order by grid;
 code | grid
------+------
 1    |    1
 1    |    2
 1    |    3
 2    |    4
 2    |    5
 2    |    6
 3    |    7 
```

目标是消除`code`列中的重复项以使其唯一。结果应该类似于：

```
 code | grid
------+------
 1    |    1
 6    |    2
 4    |    3
 2    |    4
 7    |    5
 5    |    6
 3    |    7 
```

版本是 8.2（没有窗口函数）。

```
create table t (code text, grid integer);
insert into t values
 ('1',1),
 ('1',2),
 ('1',3),
 ('2',4),
 ('2',6),
 ('3',7),
 ('2',5); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:08:41.583

这是有效的解决方案。

```
drop sequence if exists s;
create temporary sequence s;
select setval('s', (select max(cast(code as integer)) m from t));

update t
set code = i
from (
    select code, grid, nextval('s') i
    from (
        select code, max(grid) grid
        from t
        group by code
        having count(*) > 1
        order by grid
    ) q
) s
where
    t.code = s.code
    and
    t.grid = s.grid 
```

它的问题是`update`必须重复该命令，直到不再有重复。这只是一个*“它不完美”*的问题，因为它只是一次操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:54:38.713

导出（并删除）除`code`列之外的所有内容（也许您可以对导出进行子查询，并仅删除重复的行）。使用诸如自动增量行为之类的东西作为`code`主要并重新导入所有内容。`code`列应自动生成。

# select - DOJO Datagrid 通过按钮删除行

> ID：13137701
> 
> 赞同：2
> 
> 时间：2012-10-30T11:08:44.877
> 
> 标签：select, button, datagrid, dojo, store

我有一个 DOJO Datagrid 正在运行。它基于 itemFileWriteStore。

通过格式化程序功能，我添加了一个包含 OnClick-Function 的按钮

1.  获取属性“work_id”（在商店中）
2.  进行 Ajax-Call 以删除条目
3.  从商店中删除并更新网格

这是代码：

```
 //BUTTON-FORMATTER
     function buttonFormatterRemove(){
        var w = new Button({
            label: "Löschen",
            iconClass: "dijitEditorIcon deleteIcon",
            showLabel: false,
            onClick: function() {
                    console.log(this);
                    if (confirm("Datensatz wirklich löschen?")){

                        var item = grid.selection.getSelected();
                        var work_id = grid.store.getValue(item[0], "work_id");
                        //alert(work_id);

                        //FIRE REQUEST
                            request.post("<?php echo site_url('work/delete'); ?>/"+work_id, {

                              }).then(function(text){
                                    if(text ==  1){
                                                console.log("Entry with ID"+work_id+" deleted!")
                                                workStore.deleteItem(item[0]); 
                                                grid.startup();
                                    } else alert("Es ist ein Fehler aufgetreten");
                                });     
                    }          

            }
        });
        w._destroyOnRemove=true;
        return w;
    } 
```

到目前为止一切顺利......它有效！但只有当我之前点击进入数据网格时。我点击的地方无关紧要。

如果我刷新页面并直接单击按钮，它会抛出：

```
Uncaught Error: dojo.data.ItemFileWriteStore: Invalid item argument. 
```

有谁知道如何在特定行中获取 work_id 的句柄？

先感谢您！AFX

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:44:26.933

我能够自己修复它：

我意识到格式化程序有可选参数：

```
 //BUTTON-FORMATTER
     function buttonFormatterRemove(col, rowIndex){ 
```

有了这些论点，我可以掌握这一行：

```
 var rowdata = this.grid.getItem(rowIndex);
        var work_id = rowdata['work_id']; 
```

这篇博文对我帮助很大：[http ://documentumcookbook.wordpress.com/2010/08/06/dojo-datagrid-combining-field-values-in-formatter/](http://documentumcookbook.wordpress.com/2010/08/06/dojo-datagrid-combining-field-values-in-formatter/)

无论如何谢谢！

# php - 如何找出 apache 中哪些 php 脚本运行缓慢？

> ID：13137702
> 
> 赞同：2
> 
> 时间：2012-10-30T11:08:47.790
> 
> 标签：php, performance, apache, centos, lamp

我有什么方法可以找出我的服务器上的脚本（LAMP（centos））？

我找到了 mod_log_slow，但它最后一次更新是 2009 年。值得一试吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:12:33.417

使用php`time()`函数

在脚本前后设置一些时间日志并回显时差

所以可以很容易地找出

# jakarta-ee - 带有 Web 服务身份验证的异常 401

> ID：13137709
> 
> 赞同：0
> 
> 时间：2012-10-30T11:09:09.510
> 
> 标签：jakarta-ee, soap, weblogic, ws-security

我在 WEBLOGIC 服务器上运行的这个 Web 服务。当我将 URL WSDL 粘贴到浏览器时，一切似乎都很好，并且浏览器提示输入用户名、密码。但是在客户端中，当我使用与服务器相同的身份验证调用服务时，服务器会响应 401 异常。

这是我的客户代码

```
SupplierService service = new SupplierService();
port = service.getSupplierPort();
Map<String, Object> rc = ((BindingProvider)port).getRequestContext();
rc.put(BindingProvider.USERNAME_PROPERTY, "username");
rc.put(BindingProvider.PASSWORD_PROPERTY, "pass");

port.hello(); 
```

这是我的 web.xml 配置（url wsdl 是：localhost/shop/SupplierService?WSDL）

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Web service resources</web-resource-name>
        <url-pattern>/SupplierService</url-pattern>
    </web-resource-collection>

    <auth-constraint>
        <role-name>suppliers</role-name>
    </auth-constraint>
</security-constraint>

<security-role>
    <role-name>suppliers</role-name>
</security-role> 
```

这是我的 weblogic.xml

```
<wls:context-root>ass</wls:context-root>

<wls:security-role-assignment>
        <wls:role-name>suppliers</wls:role-name>
        <wls:principal-name>SupplierGroup</wls:principal-name>
</wls:security-role-assignment> 
```

那么有什么我想念的吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:59:56.643

AFAIK 401 用于“请求失败，HTTP 状态 401：未授权”。

您需要验证几件事。

1.  您尝试访问的 Web 服务是否允许匿名访问？网络到网络调用的身份验证可能很棘手
2.  Web 应用程序在什么下运行，IWAM_xxx 或 IUSR_xxx？或者您正在使用以特定身份运行的应用程序池？3.SERVICE帐户可以访问您的Web服务服务器。

# android - 应用似乎缓存了 http 数据

> ID：13137713
> 
> 赞同：1
> 
> 时间：2012-10-30T11:09:13.607
> 
> 标签：android

我正在为我公司为内部使用而开发的应用程序编写一个自动更新程序。应用程序存储在外部 Web 服务器上。我遇到的问题是每次下载尝试都会检索不再在服务器上的旧数据。如果我使用手机的浏览器（或我的 PC 浏览器），新数据会正确下载。我正在下载 APK 和 JSON 文件。

我尝试了两种不同的方法（都在 SO 上找到），都在 AsyncTask doInBackground 中：

```
HttpClient httpclient = new DefaultHttpClient();
HttpGet request = new HttpGet(url);
request.addHeader("deviceId", "xxxxx");
String result = "";
ResponseHandler<String> handler = new BasicResponseHandler();
result = httpclient.execute(request, handler);
httpclient.getConnectionManager().shutdown();
return result; 
```

和：

```
URL url = new URL(sUrl[0]);
URLConnection connection = url.openConnection();
connection.setDefaultUseCaches(false);
connection.connect();

// this will be useful so that you can show a typical 0-100% progress bar
int fileLength = connection.getContentLength();

//download the file
InputStream input = new BufferedInputStream(url.openStream());
OutputStream output = new FileOutputStream(downloadDir + "/" + name);

byte data[] = new byte[1024];
long total = 0;
int count;
while ((count = input.read(data)) != -1) {
   total += count;
   // publishing the progress....
   publishProgress((int) (total * 100 / fileLength));
   output.write(data, 0, count);
}

output.flush();
output.close();
input.close(); 
```

我在两部手机上都试过了。第一次下载没问题，然后手机重新下载第一个下载的版本。我怀疑缓存是否在服务器上，因为它只发生在我的应用程序内部。另外，我肯定不会阅读旧文件；我已经检查过并尝试下载到字符串中。让我感到困惑的是，我在不同的应用程序中使用了上述第一种方法，并且效果很好。会不会是缓存问题？如果是这样，我如何强制它清除旧数据？重命名服务器上的文件可以解决这个问题，但是有些文件不能更改名称，而且重命名文件是一个相当丑陋的解决方案。

# asp.net-mvc - 将 JSON 作为模型对象从我的控制器传递到强类型视图

> ID：13137714
> 
> 赞同：0
> 
> 时间：2012-10-30T11:09:16.710
> 
> 标签：asp.net-mvc, json, razor

我正在构建一个调用 Web 服务提供程序的 asp.net mvc 4 Web 应用程序，然后我正在显示使用 java 脚本从 Web 服务调用返回的 json 结果。例如在控制器级别我有以下操作方法：-

```
public ActionResult ListPackages()
        {            using (var client = new WebClient())
            {                try
                {
                    var query = HttpUtility.ParseQueryString(string.Empty);
                    var url = new UriBuilder("http://localhost:8080/jw/web/json/workflow/package/list");
                    url.Query = query.ToString();
                    string json = client.DownloadString(url.ToString());
                    Thread.Sleep(500);
                    return Content(json, "application/json");
                }
                catch (System.Net.WebException) {

                   return Content("error", "application/json");

                }           }        } 
```

然后我使用 java 脚本在视图上显示 JSON：-

```
function getpackagelist(result) {
        $('#products').empty();
        $('#title').text("All Processes");
        $.each(result.data, function (key, val) {
            var str = val.packageName;
            $('<li/>', { text: str })
                .appendTo($('#products'));
        });
        $('#tobehide').hide(); 
```

最后在视图中，我有以下代码调用上述操作方法和 java 脚本：-

```
@{
    ViewBag.Title = "Home Page";
}
@Ajax.ActionLink("Get Process List", "ListPackages", "Home",
new AjaxOptions
    {    HttpMethod = "GET",
        LoadingElementId = "tobehide",
        OnBegin = "clear",

        OnFailure = "clear",
        OnSuccess = "getpackagelist"
    })
<div id= "geturl" data-url="@Url.Action("ListPackages", "Home")">
    <img class="hide" id="tobehide" src="~/Content/ajax-loading2.gif" />
<h1 id ="title"></h1>

<ul id="products">

</ul>
</div> 
```

以上运行良好，但我发现很难使用 javascript 来做整个工作人员，所以我正在考虑将 JSON 作为模型传递给强类型视图而不是使用 java 脚本，但我有以下问题：-

1.  这两种方法的优缺点是什么（使用 javaScript 与将 JSON 传递给强类型视图）。

2.  如何将 JSON 作为模型传递给我的强类型视图。

3.  我应该遵循哪种方法？

提前感谢您的帮助。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:45:33.293

1.) 使用强类型视图的优点是它适用于 SEO。蜘蛛无法执行 javascript，当您在页面上“查看源代码”时，它们会看到您看到的任何内容。使用 javascript 的优点是页面“似乎”加载得更快——您可能会获得更好的“感知性能”。

2.) 你可以这样做：

```
// in controller action
...
string json = client.DownloadString(url.ToString());
dynamic asDynamic = Newtonsoft.Json.JsonConvert.DeserializeObject<dynamic>(json);
return View(asDynamic);

@* in view *@
@model dynamic
Here is a value: @Model.SomePropertyOnYourJsonObject 
```

3.) 这取决于。我认为您没有提供足够的信息来描述最适合您的情况的决定。

# asp.net - 如何编写 SQL 连接字符串？

> ID：13137718
> 
> 赞同：1
> 
> 时间：2012-10-30T11:09:27.227
> 
> 标签：asp.net, sql, connection

我有这个作为我的连接字符串属性：

```
Data Source="c:\users\perdanny\documents\visual studio 2012\Projects\WebApplication1\WebApplication1\App_Data\Users.sdf" 
```

现在，我应该如何在我的代码中编写它：

```
sqlConnection = new SqlConnection(???); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:16:24.103

试试这个：

```
string strConnection = ConfigurationManager.ConnectionStrings["Name of connection string key"].ConnectionString;  

// Or, for a quick test you could also use
// string strConnection = "Data Source = c:\\users\\perdanny\\documents\\visual studio 2012\\Projects\\WebApplication1\\WebApplication1\\App_Data\\Users.sdf"     

  using (var conn = new SqlCeConnection(string.Format("Data Source={0}", strConnection)))
  {
     conn.Open();

     try
     {
         System.Data.SqlServerCe.SqlCeCommand cmd = System.Data.SqlServerCe.SqlCeCommand;
         cmd.CommandType = System.Data.CommandType.StoredProcedure;
         cmd.CommandText = "Your sql stored proc name";
         cmd.Connection = conn ;
         cmd.ExecuteNonQuery();     
     }
     catch (SqlCeException)
     {
         throw;
     }
     finally
     {
         if (conn.State == ConnectionState.Open) conn.Close();
     }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T12:01:55.177

字符串 connStr = ConfigurationManager.ConnectionStrings["connectionString"].ToString();

```
<add name="connectionString" connectionString="Data Source=SQLEXPRESS;Initial Catalog=dbsql;User ID=hello;Password=hello"
      providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-30T11:14:16.000

使用 ConfigurationManager 和

看下面的代码行：

```
string connectionString = ConfigurationManager.ConnectionStrings["ApplicationServices"].ConnectionString; 
```

# android - 如何访问我在收件箱中收到的短信时间？

> ID：13137719
> 
> 赞同：7
> 
> 时间：2012-10-30T11:09:32.610
> 
> 标签：android, date, time, sms, android-contentresolver

我可以从收件箱中读取消息：-

```
 Uri uriSMSURI = Uri.parse("content://sms/inbox");

 Cursor cur = getContentResolver().query(uriSMSURI, null, null, null, null); 
```

我从此访问日期：-

```
 date = cur.getString(cur.getColumnIndexOrThrow("date")); 
```

但现在的问题是它给出了当前时间而不是收件箱中的消息时间。抱歉编辑不好，任何想法都将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-30T12:10:07.220

使用此代码：

```
ContentResolver contentResolver = getContentResolver();
Cursor cursor = contentResolver.query( Uri.parse( "content://sms/inbox" ), null, null, null, null);
cursor.moveToFirst();
String date =  cursor.getString(cursor.getColumnIndex("date"));
Long timestamp = Long.parseLong(date);    
Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(timestamp);
Date finaldate = calendar.getTime();
String smsDate = finaldate.toString();
Log.d(Home.class.getName(), smsDate); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T12:12:00.327

在 Sms 表中，日期以毫秒为单位存储为 INTEGER。所以，使用

`millis = cur.getLong(cur.getColumnIndexOrThrow("date"))`在光标上。

然后，使用

`DateFormat.format("EEEE, MMMM dd, yyyy h:mm:ss aa", new Date(millis))`

得到一个很好的可读字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-22T06:29:21.133

```
 /**
 * Read messages of respective phone number from msg 
 * 
 * @param activity
 * @param ph_number
 * @return
 */

public static void getMessageDetails(Activity activity, String ph_number) {

    String forDelete_thread_id = "";
    String forDelete_id = "";
    String address = ph_number;
    Uri allMsg = Uri.parse("content://sms/");
    Cursor managedCursor = activity.getContentResolver().query(
            allMsg,
            new String[] { "_id", "thread_id", "address", "date", "body",
                    "type" }, "address=?", new String[] { address }, null);

    while (managedCursor.moveToNext()) {

        String msg_id = managedCursor.getString(0);
        String thread_id = managedCursor.getString(1);
        String address_b = managedCursor.getString(2);
        String date = managedCursor.getString(3);
        String msg_body = managedCursor.getString(4);
        String type = managedCursor.getString(5);

    }
} 
```

# javascript - Rails：不是 ember，不是 JS 响应，而是介于两者之间的东西

> ID：13137722
> 
> 赞同：3
> 
> 时间：2012-10-30T11:09:40.160
> 
> 标签：javascript, ruby-on-rails, ajax, data-binding, ember.js

我正在开发一个标准的 Rails 应用程序，到目前为止我还没有使用任何 AJAX，只是很好的 HTML。我的计划是迭代地添加“远程”链接和所有类似的东西并支持 JS 响应，因为我知道生成 JS 服务器端是非常非常邪恶的，但我发现它也非常方便，简单、快速和它使应用程序足够灵活，并且 i18n 开箱即用。

使用纯 JSON 方法会更轻松，但需要大量客户端编码。

现在想象一下，在这个应用程序中，用户有一个邮箱，因为他们的想法是他们可以在不重新加载页面的情况下执行大部分甚至所有操作，所以邮箱计数器永远不会改变，除非他们手动刷新页面。

所以，问题来了：处理这个问题的最佳方法是什么？

1.  我考虑过使用 Ember（用于数据绑定），并通过某种用于 ruby​​ 的把手实现与 rails 共享视图。那将是非常棒的，但对开发人员（我）来说不是很透明。虽然我想我只需要编写 ember 将使用的车把视图，其余的仍然可以按照它们的原始格式编写，不是吗？

2.  另一种选择可能是使用某种事件系统（可能是 EventSource？），并使用方便的 JS 视图方法，并监听这些事件。我猜这些应该是 JSON 对象，并且客户端必须经过编码才能处理它们。这似乎有点麻烦，我需要一个针对 heroku（faye？）的解决方案，这是我的应用程序所在的位置。有什么提示吗？

我认为 ember 方法是更强大的方法，但似乎也相当复杂，我不想重复自己的服务器和客户端。

**编辑：**

我见过[这个](http://layervault.tumblr.com/post/30932219739/rails-in-realtime)，这或多或少是选项#2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T02:59:50.760

使用 JavaScript 框架的优点之一是整个应用程序可以连接并压缩到一个 JavaScript 文件中。假设现代浏览器积极缓存 JavaScript，浏览器将不再需要在初始页面加载后请求这些资产。

使用 JavaScript 框架的另一个优点是它要求您成为自己 API 的使用者。如果移动应用程序或第 3 方有可能访问它，那么充实应用程序的 API 供您自己使用可能会减少未来的工作量。

如果您不需要您的应用程序使用等效的 HTML 响应来响应每个请求，我认为可以为使用 JavaScript 框架做出令人信服的案例。

如果您的应用程序需要使用等效的 HTML 模板响应每个请求，则可能会失去其中的许多好处。Ember 核心一直相对直言不讳，反对支持这种渐进式增强风格。考虑到以这种方式使用 JavaScript 框架的工具相对不稳定且不成熟，我可能倾向于使用选项 2 来完成此操作。

# ruby-on-rails - Ruby on Rails - 通过使用注入方法调用验证方法来验证 CSV 文件的列

> ID：13137729
> 
> 赞同：1
> 
> 时间：2012-10-30T11:09:59.683
> 
> 标签：ruby-on-rails, ruby, validation, csv

这是我想用来验证 csv 文件中的列的 RoR 代码。但是“rowdata”数组中的值不会传递给验证方法。任何帮助是极大的赞赏。

```
#Ruby on Rails code
def validate_rows
    count_row=0
    #@passed_file is a csv file which is read from a submitted html form.
    @parsed_file=CSV::Reader.parse(params[:dump][:csvfile])
    @parsed_file.each  do |row|
        # Array of columns to be validated
        validate_cols = [:admission_no, :class_roll_no]
        rowdata={'admission_no'=>row[0],'class_roll_no'=>row[1]}

        #validate colums by sending value from the array (rowdata)  to a method injected
        #by the following code. However value from rowdata array is not passed
        #to the method.
        if count_row >=1
            valid = validate_cols.inject(true){|valid_sum, col|
                valid_sum && send("validate_#{col}", rowdata[col])
            }
            #if validation fails return row number.
            if not (valid)
                return count_row
            end
        end
        count_row=count_row+1
    end 
    #if validation suceeds return 0
    return 0
end

#The following methods are called by the inject funnction (valid)
def validate_admission_no(passed_value)
    if(passed_value)
        return true
        else
        return false
    end
end

def validate_class_roll_no(passed_value)
    if(passed_value)
        return true
        else
        return false
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:26:46.780

我的建议是使用字符串而不是符号

```
 def validate_rows
count_row=0
#@passed_file is a csv file which is read from a submitted html form.
@parsed_file=CSV::Reader.parse(params[:dump][:csvfile])
@parsed_file.each  do |row|
    # Array of columns to be validated
    validate_cols = ["admission_no", "class_roll_no"]
    rowdata={'admission_no'=>row[0],'class_roll_no'=>row[1]}

    #validate colums by sending value from the array (rowdata)  to a method injected
    #by the following code. However value from rowdata array is not passed
    #to the method.
    if count_row >=1
        valid = validate_cols.inject(true){|valid_sum, col|
            valid_sum && send("validate_#{col}", rowdata["#{col}"])
        }
        #if validation fails return row number.
        if not (valid)
            return count_row
        end
    end
    count_row=count_row+1
end 
#if validation suceeds return 0
return 0 
```

结尾

# three.js - threejs 在鼠标悬停时修改 envMap

> ID：13137730
> 
> 赞同：2
> 
> 时间：2012-10-30T11:10:16.837
> 
> 标签：three.js

我是threejs的新手，我想了解一些关于这个库的知识......但是，在我看来，文档很少。

问题是：

我有一个 SphereGeometry，我想通过鼠标事件给它一些交互性，我正在使用 three.domevent.object3d.js 的“mouseover”和“mouseout”事件来使缩放属性更大或更小。但是当鼠标悬停时我不能修改球体材料，因为没有任何反应。我的代码是：

```
 sphere.on('mouseover', function(event){
        event.target.scale.x *= 2;
        event.target.scale.y *= 2;
        event.target.scale.z *= 2;
        event.target.material.envMap = textureCube;
        event.target.material.combine = THREE.MixOperation;
        event.target.material.reflectivity = 0.15;
    }).on('mouseout', function(event){
        event.target.scale.x *= 0.5;
        event.target.scale.y *= 0.5;
        event.target.scale.z *= 0.5;
        event.target.material.envMap = null;
        event.target.material.combine = THREE.MixOperation;
        event.target.material.reflectivity = 0;
    }); 
```

textureCube是skyboxMesh的一堆jpeg，它的代码是：

```
var r = "images/";
var urls = [ r + "px.jpg", r + "nx.jpg",
             r + "py.jpg", r + "ny.jpg",
             r + "pz.jpg", r + "nz.jpg" ];

textureCube = THREE.ImageUtils.loadTextureCube( urls ); 
```

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:36:52.207

如果要从材质中添加或删除环境贴图，则必须添加

```
material.needsUpdate = true; 
```

查看“如何更新事物”文档：[https ://threejs.org/docs/index.html#manual/en/introduction/How-to-update-things](https://threejs.org/docs/index.html#manual/en/introduction/How-to-update-things)

`three.domevent.object3d.js`不是图书馆的一部分，所以我不能对此发表评论。

三.js r.52

# android - 为什么android在显示png文件时会丢失图像质量？

> ID：13137735
> 
> 赞同：6
> 
> 时间：2012-10-30T11:10:23.593
> 
> 标签：android, image

我想在android上显示一个png图像。这是图像文件：

![在此处输入图像描述](../Images/c9da88208d5c078293d13a0164312ceb.png)

右端比左端暗一点。

但是在 android 应用程序上丢失的图像质量（使用 ImageView）：

![在此处输入图像描述](../Images/83f8a38fd7ee3da5e60931e8401c2604.png)

请注意红框内的部分。颜色变化不是很顺畅。

但是如果我使用我的安卓手机的浏览器，它会很好玩（所以这不是手机屏幕的原因）：

![在此处输入图像描述](../Images/8eae781b400c9dbaf0bcdb9e64060dd8.png)

这是我的 android 代码，非常简单：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">
    <ImageView android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:background="@drawable/hhh"/>
</LinearLayout> 
```

`hhh`我在这里发布的第一张图片在哪里，在`res/drawable`.

我在我的安卓手机（安卓2.3.6）和安卓模拟器（安卓2.2/2.3/4.0）上测试，都显示不好。但它在我的 android pad（android 4.0.3）上玩得很好。

有什么问题，如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T11:14:15.453

中的图像`res/drawable`被压缩。[这应该是无损](http://developer.android.com/guide/topics/graphics/2d-graphics.html)的，但我过去听说过类似的问题。

将其移入`res/raw`，然后试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:27:47.607

尝试将以下内容添加到您的帐户中`Activity`，看看是否有帮助。

```
@Override
public void onAttachedToWindow() {
   super.onAttachedToWindow();
   Window window = getWindow();
   //eliminates color banding
   window.setFormat(PixelFormat.RGBA_8888);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-24T18:57:55.403

这个问题是众所周知的梯度带问题，我有这个问题并通过添加噪声来解决，例如[http://planetphotoshop.com/say-goodbye-to-gradient-banding.html](http://planetphotoshop.com/say-goodbye-to-gradient-banding.html)

# php - 将类别相乘并将它们绑定到数据库 Symfony2

> ID：13137736
> 
> 赞同：0
> 
> 时间：2012-10-30T11:10:32.327
> 
> 标签：php, forms, symfony, symfony-2.1

我需要帮助我创建的表单，我在一个 twig 文件中创建了 5 个表单并创建了一个控制器，我如何将我的值从表单绑定到数据库，当我现在绑定时，它只显示一个值表单 5 次，但我需要 5 次才能获得不同的价值 :(，请帮忙，我已经整天坚持这件事了..

我的树枝文件：

```
<div class="new-test">
     <h2>New test </h2>
     <form action="{{ path('test.create') }}" method="post">

        Test name:   <input type="text" name="name"/><br>
        Category 1<input type="text" name="category-new" >
        <div id="customWidget">
            <div id="colorSelector1"><div style="background-color: #00ff00"></div>  
          </div>
            <div id="colorpickerHolder1"></div>
        </div>

        Category 2<input type="text" name="category-new" ><br>
        Category 3<input type="text" name="category-new" ><br>
        Category 4<input type="text" name="category-new" ><br>
        Category 5<input type="text" name="category-new" ><br>

        <input type="submit" value="Add">
</form> 
```

我的控制器：

```
 /**
 * @Route("/add/test", requirements={"name" = "\s+"}, name="test.create")
 * @Method("Post")
 * @return array
 */
public function createAction()
{
    $success = 0;
    $name = $this->getRequest()->get('name');

    if( !empty($name) )
    {
        $test = new Test();
        $test->setName($this->getRequest()->get('name'));

        $em = $this->getDoctrine()->getManager();
        $em->persist($test);
        $em->flush();

        $success = 'Test '.$test->getName().' was created';
    }
    else
    {
        $success = 'Test name can not be empty';
    }

      $category = $this->getRequest()->get('category-new');
     for ($i=0; $i<=5; $i++){
     if( !empty($category) )   
       {
        $categoryName = new Category();
        $categoryName->setName($this->getRequest()->get('category-new'));

        $em = $this->getDoctrine()->getManager();
        $em->persist($categoryName);
        $em->flush();

        $success = ' Category '.$categoryName->getName().$i.' was created';

       }

        else
     {
        $success = 'Test name can not be empty';
    }
   }
    return $this->redirect($this->generateUrl('test.new'));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:37:50.160

不确定我是否理解正确。您希望输入名称为“category-new”且具有不同值的输入。如果是这样，您的表单视图有问题：

```
Category *<input type="text" name="category-new" ><br> 
```

name 应该在末尾有括号 name="category-new[]" 或 name="category-new[1]" 用于类别 1，name="category-new[2]" 用于类别 2，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:54:53.250

模板：

> ```
>  Category 1<input type="text" name="category-new[]" >
>     <div id="customWidget">
>         <div id="colorSelector1"><div style="background-color: #00ff00"></div>  
>       </div>
>         <div id="colorpickerHolder1"></div>
>     </div>
> 
>     Category 2<input type="text" name="category-new[]" ><br>
>     Category 3<input type="text" name="category-new[]" ><br>
>     Category 4<input type="text" name="category-new[]" ><br>
>     Category 5<input type="text" name="category-new[]" ><br> 
> ```

有趣的是，您的控制器采用名称为 category-new 的数组

> ```
> /**
>  * @Route("/add/test")
>  * 
>  * @return array
>  */
> public function createAction()
> {
>     $success = 0;
>     $name = $this->getRequest()->get('name');
> 
>     if (!empty($name)) {
>         $test = new Test();
>         $test->setName($name);
> 
>         $em = $this->getDoctrine()->getManager();
>         $em->persist($test);
>         $em->flush();
> 
>         $success = 'Test ' . $test->getName() . ' was created';
>     } else {
>         $success = 'Test name can not be empty';
>     }
> 
>     $categoryList = array_map('trim', $this->getRequest()->get('category-new'));
> 
>     foreach ($categoryList as $category) {
>         if (!empty($category)) {
>             $categoryName = new Category();
>             $categoryName->setName($category);
> 
>             $em = $this->getDoctrine()->getManager();
>             $em->persist($categoryName);
>             $em->flush();
> 
>             $success = ' Category ' . $category . ' was created';
> 
>         } else {
>             $success = 'Test category-new may not be empty';
>         }
>     }
>     return $this->redirect($this->generateUrl('test_create'));
> } 
> ```

一些单词

> Route("/add/test", requirements={"name" = "\s+"}, name="test.create")

您不需要此操作的名称为您的 project_bundlename_controller_action {project}_{bundlename}_test_create 我不知道您的项目名称和捆绑名称 - 我认为这对您来说并不困难。还有一些代码:)

# jquery - find('option[selected]') 和 find('option').filter('[selected]') 的区别

> ID：13137737
> 
> 赞同：9
> 
> 时间：2012-10-30T11:10:32.457
> 
> 标签：jquery, jquery-selectors, html-select

## 设想：

我有 2 个 jQuery 表达式：

```
/* A */ $('select').find('option[selected]');
/* B */ $('select').find('option').filter('[selected]'); 
```

这意味着（为简单起见，我们假设`select`文档中只有一个）：

*   **A**：获取`select`，然后查找所有`option`具有名为 的属性的后代`selected`。
*   **B**：获取`select`，然后查找所有`option`后代，然后按具有名为 的属性的人过滤`selected`。

## 预期行为：

**A**和**B**应该给出相同的结果。

## 实际行为：

用户更改下拉菜单中的选择后，

*   **A**返回*默认*的selected `option`。
*   **B**返回*新*选择的`option`.

## 问题：

那么它们为什么不同呢？我对 CSS 选择器的理解是错误的吗？

## 现场演示：

现场演示[在](http://jsfiddle.net/ugXtx/9/)~~[这里](http://jsfiddle.net/ugXtx/4/)~~ 。

## 源代码：

**HTML**：

```
<select>
 <option value='p'>p</option> 
 <option value='q' selected>q</option>
 <option value='r'>r</option> 
 <option value='s'>s</option> 
</select>

<input type='button' value='click me!'/> <br/> 
 ResultA : <span id='ResultA'>
    here
</span> <br/> 
 ResultB : <span id='ResultB'>
    here
</span> <br/> 
```

**Javascript**：

```
function SetResult(ResultObj, ElementObj) {
    ResultObj.text("length=" + ElementObj.length + " " + "val()=" + ElementObj.val());
}

$(function() {
    $('input[type=button]').click(function() {
        var SelectObj = $('select');
        SetResult($("#ResultA"), SelectObj.find('option[selected]'));
        SetResult($("#ResultB"), SelectObj.find('option').filter('[selected]'));
    });
}); 
```

## 测试结果：

```
+---------------------------+--------------+---------------------+---------+-----+
|          Browser          | Environment  |       jQuery        |    A    |  B  |
+---------------------------+--------------+---------------------+---------+-----+
| Chrome 22.0.1229.94m      | Win7         | 1.8.2, 1.7.2, 1.6.4 | default | new |
| Chrome 23.0.1271.64 m     | Win7         | 1.8.2, 1.7.2, 1.6.4 | default | new |
| Firefox 15.0.1            | Win7         | 1.8.2, 1.7.2, 1.6.4 | default | new |
| Firefox 16.0.2            | Win7         | 1.8.2, 1.7.2, 1.6.4 | default | new |
| IE 6                      | WinXP        | 1.8.2, 1.7.2, 1.6.4 | *new*   | new |
| IE 9                      | Win7         | 1.8.2, 1.7.2, 1.6.4 | default | new |
| Opera 12.02               | Win7         | 1.8.2, 1.7.2, 1.6.4 | default | new |
| Opera 12.10               | Win7         | 1.8.2, 1.7.2, 1.6.4 | default | new |
| Safari 5.1.7 (7534.57.2)  | Win7         | 1.8.2, 1.7.2, 1.6.4 | default | new |
+---------------------------+--------------+---------------------+---------+-----+
| Chrome 22.0.1229.94       | MacOS 10.7.5 | 1.8.2, 1.7.2, 1.6.4 | default | new |
| Chrome 23.0.1271.64       | MacOS 10.7.5 | 1.8.2, 1.7.2, 1.6.4 | default | new |
| Firefox 13.0              | MacOS 10.7.5 | 1.8.2, 1.7.2, 1.6.4 | default | new |
| Firefox 14.0.1            | MacOS 10.7.5 | 1.8.2, 1.7.2, 1.6.4 | default | new |
| Firefox 16.0.2            | MacOS 10.7.5 | 1.8.2, 1.7.2, 1.6.4 | default | new |
| Opera 12.01               | MacOS 10.7.5 | 1.8.2, 1.7.2, 1.6.4 | default | new |
| Opera 12.10               | MacOS 10.7.5 | 1.8.2, 1.7.2, 1.6.4 | default | new |
| Safari 6.0.1 (7536.26.14) | MacOS 10.7.5 | 1.8.2, 1.7.2, 1.6.4 | default | new |
+---------------------------+--------------+---------------------+---------+-----+
| Chrome 21.0.1180.82       | iOS 4.3.5    | 1.8.2, 1.7.2, 1.6.4 | default | new |
| Opera 7.0.5               | iOS 4.3.5    | 1.8.2               | default | new |
| Safari                    | iOS 4.3.5    | 1.8.2, 1.7.2, 1.6.4 | default | new |
+---------------------------+--------------+---------------------+---------+-----+ 
```

*   *default*表示它返回*默认*的selected `option`。
*   *new*意味着它返回*新*的selected `option`。

如您所见，除 IE6 之外的所有浏览器都会给出不同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T11:37:25.807

Sizzle 引擎检查元素的`selected` *属性*（包含*当前*值）而不是包含原始（默认）值的*属性。*

见[https://github.com/jquery/sizzle/blob/master/sizzle.js#L788](https://github.com/jquery/sizzle/blob/master/sizzle.js#L788)

我还没有弄清楚为什么你的第二个选择器显然调用了 Sizzle，但第一个似乎没有。

无论如何，你应该检查的是属性而不是属性，所以你应该使用`:selected`伪选择器，而不是`[selected]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:20:43.567

when you write `option[selected]` it will search for the `selected` attribute/property instead of that you should use `option:selected` if you have `readonly` property and you code `option[readonly]` it will return `s`

$('[attribute]') will selects elements that have the specified attribute, with any value.
for more information : [Has Attribute Selector [name]](http://api.jquery.com/has-attribute-selector/)

**[Fiddle](http://jsfiddle.net/pintu31/ugXtx/5/)**

```
<select>
 <option value='p'>p</option> 
 <option value='q' selected>q</option>
 <option value='r'>r</option> 
 <option value='s' readonly>s</option> 
</select> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T02:39:59.317

## 表达式应该返回什么？

`[selected]`匹配所有具有`selected`属性的元素，任何值（参考：[W3C](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)，[jQuery](http://api.jquery.com/has-attribute-selector/)）。

* * *

## 为什么结果不一致？

我在[这里](http://bugs.jquery.com/ticket/12830)向 jQuery 提交了错误报告。它被标记为另一个**现在已修复的**[错误报告](http://bugs.jquery.com/ticket/11115)的副本。

 *** * *

## 有什么解决办法吗？

要获取**当前选择**：

使用选择器（[此处](http://jsfiddle.net/ugXtx/11/)[`:selected`](http://api.jquery.com/selected-selector/)为现场演示）：

```
$('select').find('option').filter(':selected'); /* Supposedly faster */
or
$('select').find('option:selected');            /* Supposedly slower */ 
```

请注意，根据[文档，第二个表达式应该](http://api.jquery.com/selected-selector/)*更慢*。

> 因为`:selected`是 jQuery 扩展而不是 CSS 规范的一部分，所以使用的查询`:selected`不能利用原生 DOM`querySelectorAll()`方法提供的性能提升。

要获得**默认选择**：

对于**jQuery 1.9+**，使用问题中的任何表达式，即

```
/* A */ $('select').find('option[selected]');
/* B */ $('select').find('option').filter('[selected]'); 
```

对于**jQuery 1.6+**，请使用该属性（[此处](http://jsfiddle.net/ugXtx/12/)`defaultSelected`为现场演示，参考：[w3schools](http://www.w3schools.com/jsref/prop_option_defaultselected.asp)、[Mozilla](https://developer.mozilla.org/en-US/docs/DOM/HTMLOptionElement)、[MSDN](http://msdn.microsoft.com/en-us/library/ms533716(VS.85).aspx)、[MSDN](http://msdn.microsoft.com/en-us/library/ie/ms533716(v=vs.85).aspx)）：

```
$('select').find('option').filter(function() {
    return $(this).prop('defaultSelected');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T11:19:31.850

这取决于浏览器如何构建 DOM。使用`option[selected]`jQuery 搜索具有 selected 属性的选项元素，在某些情况下它不适用

你应该使用

```
SelectObj.children(':selected') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T11:22:33.913

你的实现是错误的

```
find('option[selected]') 
```

它应该是，

```
SelectObj.find('option:selected') 
```

这是编辑过的小提琴：

[http://jsfiddle.net/ugXtx/6/](http://jsfiddle.net/ugXtx/6/)

和参考：

[http://api.jquery.com/selected-selector/](http://api.jquery.com/selected-selector/)**

# xml - Web 服务 XML 请求错误

> ID：13137738
> 
> 赞同：0
> 
> 时间：2012-10-30T11:10:33.217
> 
> 标签：xml

根据此 url [服务 URL中的架构定义](http://www.con-way.com/XML/doc/RateRequest/#complexType_ItemType_Link03B55B68)

我像这样请求了 XML，但是当我向[https://www.con-way.com/XMLj/X-Rate](https://www.con-way.com/XMLj/X-Rate)发送请求时出现错误。如何传递 ItemType 元素？

```
<RateRequest>
<OriginZip country='us'>97006</OriginZip> 
<DestinationZip country='us'>33179</DestinationZip> 
<CustNmbr shipcode="S">883885</CustNmbr>
<ChargeCode>P</ChargeCode> 
<EffectiveDate>10/30/12</EffectiveDate> 

<Item> 
<CmdtyClass>775</CmdtyClass> 
<Weight unit='lbs'>667</Weight> 
</Item> 

<ItemType>
<Quantity pkgtype='PCS'>100</Quantity>
</ItemType>

<Accessorial>SSC</Accessorial> 
<Accessorial>DNC</Accessorial>   
<Accessorial>GUR</Accessorial> 

</RateRequest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:39:56.633

据我从架构定义中可以看出，ItemType 不是 RateRequest 元素的有效子元素。这可能会导致错误。

```
<xs:element name="RateRequest">
  <xs:complexType>
    <xs:sequence>
      <xs:element ref="OriginZip"/>
      <xs:element ref="DestinationZip"/>
      <xs:element name="CustNmbr" minOccurs="0">
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:positiveInteger">
              <xs:attribute name="shipcode" type="ShipCodeType" use="optional" default="S"/>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
      <xs:element ref="ChargeCode" minOccurs="0"/>
      <xs:element name="DiscountRate" type="xs:decimal" minOccurs="0"/>
      <xs:element name="EffectiveDate" type="DateMMDDYYType" minOccurs="0"/>
      <xs:element name="Item" maxOccurs="4">
        <xs:complexType>
          <xs:sequence>
            <xs:element ref="CmdtyClass"/>
            <xs:element name="Weight" type="WeightWithUnitType"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="Accessorial" type="RatingAccessorialCodeType" minOccurs="0" maxOccurs="7"/>
      <xs:element ref="TotalCubeVolume" minOccurs="0"/>
      <xs:element ref="SIC" minOccurs="0"/>
    </xs:sequence>
    <xs:attribute name="schemaVersion" type="SchemaVersionType"/>
  </xs:complexType>
</xs:element> 
```

我在 conway 网站上查看了 RateRequest xml 的建议用法，似乎 ItemType 复杂类型不能以任何方式在请求中使用。但是，Item 元素可以使用 CmdtyClass 类型引用来引用（预）定义的项目。在定义项目时，此 CmdtyClass 类型也用于 ItemType 复杂类型。

# mysql - MYSQL 声明 varchar 问题

> ID：13137745
> 
> 赞同：-1
> 
> 时间：2012-10-30T11:10:50.830
> 
> 标签：mysql, sql, oracle

在 MySQL 5.0.77 中声明 varchar 时出现错误：

```
DECLARE city varchar(20); 
```

上面的代码行在 Oracle 数据库中运行良好，但在 MySQL 中不行。有人可以提出解决方案吗？我在这个网站上看到了一个类似的问题，但找不到合适的答案。

还有一个问题： MYSQL`%ROWTYPE`中`%TYPE`有这些声明吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:18:00.420

根据[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/declare.html)DECLARE 仅在 BEGIN...END 块的开头起作用，就像在存储程序中一样。

将城市声明为 VARCHAR(20)；在 mysql 中是正确的，你在 mysql 中这样
问，那么答案是肯定的`session variables``SET @var := 1`

# matlab - MATLAB：向量化索引与向量*矩阵混淆

> ID：13137747
> 
> 赞同：0
> 
> 时间：2012-10-30T11:10:52.577
> 
> 标签：matlab, indexing, vectorization

我有一个计算，我想逐个元素地执行。

```
foreach i from i=1 to i=N
    RES_i = det(A - V_i * I) // notice V_i and RES_i are SCALARS 
```

例如，A 是 3x3，I 是 3x3，V 和 RES 是 1xN。

所以基本上我所做的是

```
idx=1:81
res(idx) = det( A - V(idx)*I ); 
```

但是，这会被干扰为取整个 V 并乘以 I。

这似乎是一个简单的例子，但我不知道如何矢量化它......

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:27:19.257

首先，这不是 Matlab 代码...

第二：我认为您将“矢量化”与隐式循环混淆了。向量化意味着使用向量/矩阵/张量表示法和操作一次将操作应用于整个数组。然而，你想要的是一个隐式的 for-each 类型循环，Matlab 抱怨它是完全有道理的。

除了明确地写出来之外别无他法：

```
res = zeros(81,1);
for ii = 1:numel(res)
    res(ii) = det(A-V(ii)*I);
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:37:51.503

您可以使用 执行逐个元素的操作。与选择的运营商一起。例如：

```
Element-by-element multiplication: .* 
Element-by-element division: ./ 
```

等等……你是这个意思吗？

# java - Android中的异步套接字

> ID：13137750
> 
> 赞同：0
> 
> 时间：2012-10-30T11:10:57.930
> 
> 标签：java, android, asyncsocket

我正在构建一个 android 监控应用程序，在我的应用程序中，我想要一个用于所有套接字任务的专用线程。这意味着在这个线程中我想使用异步套接字来发送和接收服务器中的所有数据。

我尝试在 Android 中寻找一个很好的异步套接字示例，但没有运气。

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:14:12.610

AFAIK Android 不支持 Java 7 的 NIO2，我怀疑如果支持它不会很有用。如果你想使用一个核心线程，我建议你使用一个支持 NIO 的框架来做到这一点。

# javascript - INVALID_STATE_ERR：通过 websocket 发送 blob 时出现 DOM 异常 11

> ID：13137753
> 
> 赞同：2
> 
> 时间：2012-10-30T11:11:06.900
> 
> 标签：javascript, html

我正在尝试通过 websockets 发送通过`dataURItoBlob(canvas.get()[0].toDataURL('image/png'));`这种方式获得的 blob：

```
connection.send(JSON.stringify({
                cmd: "fwd",
                msg: msg,
                p_id: worker_id,
            }) 
```

`msg`刚刚创建的 blob 在哪里。如果我尝试通过这样做来发送 blob，`msg = ""+msg`但它只发送 string `[Object object]`，这对我来说没用。

如果我在发送之前尝试这样做`msg = JSON.stringify(msg)`，它会给我同样的错误，就像在主题标题中一样。

如果我尝试发送数据而不将其封装在一个 blob 中（as `msg = canvas.get()[0].toDataURL('image/png');`），我会遇到上面解释的相同行为。

我可以做些什么来发送数据？谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-06T15:53:06.060

***JSON.stringify()***完全**没**问题，它就是这样做的方法。

“INVALID_STATE_ERR: DOM Exception 11”错误**是由于在连接套接字之前执行 send() 消息引起的**。*WebSocket.send()*应该在*WebSocket.onopen()*事件处理程序被触发后触发（或在该处理程序内部）：

```
this.ws = new WebSocket("ws://localhost:1234", "base64");
this.ws.onopen = function() { this.send({"type":"init_req"});}; 
```

# algorithm - 最接近的对伪代码示例

> ID：13137761
> 
> 赞同：1
> 
> 时间：2012-10-30T11:11:42.390
> 
> 标签：algorithm, graph-theory

我一直在阅读算法设计手册。我有同样的问题，[在这个最近邻算法中“来自不同的顶点链”是什么意思？](https://stackoverflow.com/questions/7216755/)但我无法遵循那里的答案。

> 一个不同的想法可能是重复连接最近的一对端点，它们的连接不会产生问题，例如循环的提前终止。每个顶点都从​​它自己的单个顶点链开始。将所有内容合并在一起后，我们将最终得到一个包含其中所有点的链。连接最后两个端点给了我们一个循环。在执行此最近对启发式的任何步骤中，我们将有一组可用于合并的单个顶点和顶点不相交的链。在伪代码中：

```
ClosestPair(P)
    Let n be the number of points in set P.
    For i = 1  to n − 1 do
        d = ∞
        For each pair of endpoints (s, t) from distinct vertex chains
            if dist(s, t) ≤ d then sm = s, tm = t, and d = dist(s, t)
        Connect (sm, tm) by an edge
    Connect the two endpoints by an edge
Please note that sm and tm should be sm and tm. 
```

我无法遵循上述逻辑。[请演示书中](http://www.cs.sysu.edu.cn/~lxm/DSA/textbook/Skiena.-.TheAlgorithmDesignManual.pdf)给出的简单示例的计算：`-21, -5, -1, 0, 1, 3, and 11`。逐步显示计算，以便您可以轻松地遵循上面的代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T11:43:22.100

# mysql - 在 mySQL 中创建动态表

> ID：13137764
> 
> 赞同：1
> 
> 时间：2012-10-30T11:11:53.047
> 
> 标签：mysql, pivot

我的 mySQL 有问题。我有一张这样的桌子：

```
Time                    Sensor    Value   
2012-10-16 14:42:32 VI0    0      
2012-10-16 14:42:32 VI1    0      
2012-10-16 14:42:32 VI2    0      
2012-10-16 14:42:32 VI3    0      
2012-10-16 14:42:33 VI0    1      
2012-10-16 14:42:33 VI1    1      
2012-10-16 14:42:33 VI2    1      
2012-10-16 14:42:33 VI3    1 
```

我有一个表“ `sensor`”，其中包含所有名称传感器和其他信息。是否可以在这样的表中重新排列该表：

```
Time                    VI0        VI1      VI2    VI3

2012-10-16 14:42:32 0      0         0      0

2012-10-16 14:42:32 1      1         1      1 
```

我正在查看数据透视表，但我不知道它是否正确。

PS也许我找到了解决方案：

SELECT time,GROUP_CONCAT(value) as Sensor FROM measure2 GROUP BY time；

时间 GROUP_CONCAT(值)

2012-10-16 14:42:32 0,0,0,0

我可以用逗号代替 GROUP_CONCAT 写传感器的名称吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:12:00.200

在我看来，您需要`pivot`动态地对数据使用准备好的语句。这将使用带有`CASE`语句的聚合函数：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when Sensor = ''',
      Sensor,
      ''' then value end) AS ',
      Sensor
    )
  ) INTO @sql
FROM  measure2;

SET @sql = CONCAT('SELECT time, ', @sql, ' 
                  FROM measure2 
                  GROUP BY time');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/7c2ef/1)

如果您有已知的值，那么您可以对这些值进行硬编码：

```
select time,
  max(case when sensor = 'VI0' then value end) as VI0,
  max(case when sensor = 'VI1' then value end) as VI1,
  max(case when sensor = 'VI2' then value end) as VI2,
  max(case when sensor = 'VI3' then value end) as VI3
from measure2
group by time 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/b6529/1)

# c++ - 为什么 std::string::max_size 不是编译时常量？

> ID：13137766
> 
> 赞同：34
> 
> 时间：2012-10-30T11:11:59.443
> 
> 标签：c++, string, compile-time-constant

`std::string`提供了一种`max_size()`方法来确定它可以包含的最大元素数。

然而，一般来说，要计算出字符串的最大长度，程序员必须创建一个（可能为空的）字符串对象。

如果这个类不需要程序员提供任何信息，为什么不能`max_size()`作为编译时常量使用？字符串计算其最大大小是否需要某种运行时信息？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-30T12:34:23.423

一个原因是该`max_size`功能根本不是很有用，委员会认为尝试修复它不值得。所以它就保持原样，因为它是文档化界面的一部分。

请参阅库缺陷报告 #197：

[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3440.html#197](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3440.html#197)

> max_size() 对很多事情都没有用，现有的措辞对于 max_size() 可以用于的少数情况来说已经足够清楚了。改变现有措辞的任何尝试都不是改进。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-30T11:31:53.717

`std::string::max_size()``std::allocator::max_size()`在引擎盖下调用。

根据标准，20.9.6.1.10：

> `size_type max_size() const noexcept;`
> 
> 返回： 调用 allocate(N,0) 可能成功的最大值 N。

（另见：[分配器::max_size](http://en.cppreference.com/w/cpp/memory/allocator/max_size)）

从理论上讲，分配器实现可以计算出它可以通过系统调用分配的内存块的最大大小。这将有助于确定特定进程内字符串的最大可能大小。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-30T11:23:50.997

调用`max_size()`委托给用于容器的分配器。

理论上，一个非常智能的分配器可以`max_size`在运行时计算它，例如取决于可用的 RAM。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T22:12:16.960

这也应该有效：

```
enum : std::string::size_type {
    npos     = std::string::size_type(-1),
    max_size = npos - 1
}; 
```

# php - 类必须是 php symfony 学说上 Doctrine_Record 错误的子类：insert-sql

> ID：13137767
> 
> 赞同：0
> 
> 时间：2012-10-30T11:12:00.790
> 
> 标签：php, mysql, symfony-1.4, doctrine-1.2

我在使用以下命令生成表时遇到问题：

```
php symfony doctrine:insert-sql 
```

它返回我以下错误：

```
>> doctrine  creating tables

  Class "Complaint" must be a child class of Doctrine_Record

PHP Fatal error:  Call to a member function evictAll() on a non-object in D:\Internet\PHP\ijzerleeuw_bezoekrapporten\lib\vendor\symfony\lib\plugins\sfDoctri
nePlugin\lib\vendor\doctrine\Doctrine\Connection.php on line 1239
PHP Stack trace:
PHP   1\. {main}() D:\Internet\PHP\ijzerleeuw_bezoekrapporten\symfony:0
PHP   2\. include() D:\Internet\PHP\ijzerleeuw_bezoekrapporten\symfony:14
PHP   3\. sfDatabaseManager->shutdown() D:\Internet\PHP\ijzerleeuw_bezoekrapporten\lib\vendor\symfony\lib\database\sfDatabaseManager.class.php:0
PHP   4\. sfDoctrineDatabase->shutdown() D:\Internet\PHP\ijzerleeuw_bezoekrapporten\lib\vendor\symfony\lib\database\sfDatabaseManager.class.php:134
PHP   5\. Doctrine_Manager->closeConnection() D:\Internet\PHP\ijzerleeuw_bezoekrapporten\lib\vendor\symfony\lib\plugins\sfDoctrinePlugin\lib\database\sfDoctr
ineDatabase.class.php:165
PHP   6\. Doctrine_Connection->close() D:\Internet\PHP\ijzerleeuw_bezoekrapporten\lib\vendor\symfony\lib\plugins\sfDoctrinePlugin\lib\vendor\doctrine\Doctrin
e\Manager.php:580
PHP   7\. Doctrine_Connection->clear() D:\Internet\PHP\ijzerleeuw_bezoekrapporten\lib\vendor\symfony\lib\plugins\sfDoctrinePlugin\lib\vendor\doctrine\Doctrin
e\Connection.php:1268 
```

这是我用来生成模型的 schema.yml（php symfony 学说：build-mdeol）：

```
InspectionReport:
  actAs: { Timestampable: ~ }
  columns:
    customer_id:    { type: integer(5), notnull: true }
    username:       { type: string(255), notnull: true }
    start_time:     { type: string(5) }
    end_time:       { type: string(5) }
    type:           { type: string(5) }
    reason:         { type: string(4) }
    contact:        { type: string(5) }
    subject:        { type: string(5) }
    remarks:        { type: string(5000) }
    emailaddresses: { type: string(5) }
  relations:
    Complaints:
      class: Complaint
      refClass: ComplaintInspectionReport
      local: id
      foreign: complaint_id
    Reviews:
      class: Review
      refClass: ReviewInspectionReport
      local: id
      foreign: review_id

ComplaintInspectionReport:
  columns:
    complaint_id:  { type: integer(4), primary: true }
    inspection_report_id: { type: integer, primary: true }
  relations:
    Complaint:  { onDelete: CASCADE, local: complaint_id, foreign: id }
    InspectionReport: { onDelete: CASCADE, local: inspection_report_id, foreign: id }

ReviewInspectionReport:
  columns:
    review_id:  { type: integer, primary: true }
    inspection_report_id: { type: integer, primary: true }
  relations:
    Review:  { onDelete: CASCADE, local: review_id, foreign: id }
    InspectionReport: { onDelete: CASCADE, local: inspection_report_id, foreign: id }

Complaint:
  columns:
    id:            { type: integer, notnull: true }
    description:   { type: string(32), notnull: true }
    contact:       { type: string(32) }
    remark:        { type: string(50) }

Review:
  columns:
    id:            { type: integer, notnull: true }
    description:   { type: string(32), notnull: true }
    contact:       { type: string(32) }
    remark:        { type: string(50) }
    grade:         { type: string(1) }
    email_address: { type: string(32) } 
```

还有我从模型/模式生成的 schema.sql（php symfony 学说：build-sql）：

```
CREATE TABLE complaint (id BIGINT AUTO_INCREMENT, description VARCHAR(32) NOT NULL, contact VARCHAR(32), remark VARCHAR(50), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE complaint_inspection_report (complaint_id INT, inspection_report_id BIGINT, PRIMARY KEY(complaint_id, inspection_report_id)) ENGINE = INNODB;
CREATE TABLE inspection_report (id BIGINT AUTO_INCREMENT, customer_id BIGINT NOT NULL, username VARCHAR(255) NOT NULL, start_time VARCHAR(5), end_time VARCHAR(5), type VARCHAR(5), reason VARCHAR(4), contact VARCHAR(5), subject VARCHAR(5), remarks TEXT, emailaddresses VARCHAR(5), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE review (id BIGINT AUTO_INCREMENT, description VARCHAR(32) NOT NULL, contact VARCHAR(32), remark VARCHAR(50), grade VARCHAR(1), email_address VARCHAR(32), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE review_inspection_report (review_id BIGINT, inspection_report_id BIGINT, PRIMARY KEY(review_id, inspection_report_id)) ENGINE = INNODB;
ALTER TABLE complaint_inspection_report ADD CONSTRAINT complaint_inspection_report_complaint_id_complaint_id FOREIGN KEY (complaint_id) REFERENCES complaint(id) ON DELETE CASCADE;
ALTER TABLE complaint_inspection_report ADD CONSTRAINT ciii FOREIGN KEY (inspection_report_id) REFERENCES inspection_report(id) ON DELETE CASCADE;
ALTER TABLE review_inspection_report ADD CONSTRAINT riii FOREIGN KEY (inspection_report_id) REFERENCES inspection_report(id) ON DELETE CASCADE;
ALTER TABLE review_inspection_report ADD CONSTRAINT review_inspection_report_review_id_review_id FOREIGN KEY (review_id) REFERENCES review(id) ON DELETE CASCADE; 
```

如果我手动运行 SQL，它可以正常工作，但是当使用学说：insert-sql 时，它会返回错误。

我在想我的架构中有一个错误，但似乎无法掌握它。或者也许是完全不同的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:50:43.707

我错了，我只是生成了类，并没有尝试加载 sql。

事实上，你有几个错误：

*   你不应该为一个表定义一个列`id`，只有当你不需要它的主键，而不是递增等..否则它会给Doctrine带来麻烦
*   对于每个中间表（`ComplaintInspectionReport`& `ReviewInspectionReport`），您不必重新定义`relations`. 如果它们在父类中正确定义，则此处不需要它们
*   注意`integer`类型。Doctrine 将始终使用`integer`，但如果您定义一个`integer(4)`导致由 Doctrine 自动生成的 id 的外部变量，则插入 sql 时关系将失败。因为一方面你有`integer`，另一方面`integer(4)`。
*   最后，请注意您`local`在`InspectionReport`. 您使用`id`了两次，但您必须为中间表定义本地键，而不是当前表。所以你必须同时设置`inspection_report_id`。

这是固定模式：

```
InspectionReport:
  actAs: { Timestampable: ~ }
  columns:
    customer_id:    { type: integer(5), notnull: true }
    username:       { type: string(255), notnull: true }
    start_time:     { type: string(5) }
    end_time:       { type: string(5) }
    type:           { type: string(5) }
    reason:         { type: string(4) }
    contact:        { type: string(5) }
    subject:        { type: string(5) }
    remarks:        { type: string(5000) }
    emailaddresses: { type: string(5) }
  relations:
    Complaints:
      class: Complaint
      refClass: ComplaintInspectionReport
      local: inspection_report_id
      foreign: complaint_id
    Reviews:
      class: Review
      refClass: ReviewInspectionReport
      local: inspection_report_id
      foreign: review_id

ComplaintInspectionReport:
  columns:
    complaint_id:  { type: integer, primary: true }
    inspection_report_id: { type: integer, primary: true }

ReviewInspectionReport:
  columns:
    review_id:  { type: integer, primary: true }
    inspection_report_id: { type: integer, primary: true }

Complaint:
  columns:
    description:   { type: string(32), notnull: true }
    contact:       { type: string(32) }
    remark:        { type: string(50) }

Review:
  columns:
    description:   { type: string(32), notnull: true }
    contact:       { type: string(32) }
    remark:        { type: string(50) }
    grade:         { type: string(1) }
    email_address: { type: string(32) } 
```

在尝试重新插入 sql 之前不要忘记清除缓存。

# c# - 如何使用 C# 对列表中每个项目的特定部分进行排序

> ID：13137768
> 
> 赞同：0
> 
> 时间：2012-10-30T11:12:09.483
> 
> 标签：c#, list, sorting

请参阅下面的列表：

```
 string[] Separator = new string[] { "__" };

    string[] lines_acc = File.ReadAllLines(accfilePath);
    List<string> list_lines_acc = new List<string>(lines_acc);

    List<string> list_lines_silver_count = new List<string>();
    FileStream fs_ = null;
    if (!File.Exists(silver_countfilePath))
    {
        using (fs_ = File.Create(silver_countfilePath))
        {
            foreach (string line_acc in list_lines_acc)
            {
                string[] line_acc_ar = line_acc.Split(Separator, StringSplitOptions.None);
                string line_acc_new = line_acc_ar[0] + "__" + line_acc_ar[1] + "__" + line_acc_ar[3] + "__" + line_acc_ar[4] + "__" + "0";
                list_lines_silver_count.Add(line_acc_new);
            }

            File.WriteAllLines(silver_countfilePath, list_lines_silver_count);
        }
    }
    else
    {
        string[] lines_silver_count = File.ReadAllLines(silver_countfilePath);
        list_lines_silver_count = new List<string>(lines_silver_count);
    } 
```

我想`list_lines_silver_count`按`line_acc_ar[4]`部分排序！
那部分是一个字符串，如 -> 325423 -> 意味着我可以将它转换为整数。
我怎么能做这份工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:20:09.293

One way is to implement the comparer and provide it as an argument to the `Sort` function:

```
public class SilverCountLineComparer : IComparer<string>
{
    public int Compare(string x, string y)
    {
        string xPart = x.Split(new char[] {'_'}, StringSplitOptions.RemoveEmptyEntries)[3];
        string yPart = y.Split(new char[] {'_'}, StringSplitOptions.RemoveEmptyEntries)[3];

        int xNum = Int32.Parse(xPart);
        int yNum = Int32.Parse(yPart);

        return xNum.CompareTo(yNum);
    }
} 
```

And to sort call it like this:

```
list_lines_silver_count.Sort(new SilverCountLineComparer()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:21:12.337

Change the `foreach`:

```
foreach (var line_acc_ar in list_lines_acc
    .Select(s => s.Split(Separator, StringSplitOptions.None)
    .OrderBy(a => a[4])) {

} 
```

Further refactorings could make the code more elegant, but I think this piece of LINQ should do the job.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T11:21:13.397

You can try this

sorted using a Comparison generic delegate representing the CompareStringByInteger method

```
public static int CompareStringByInteger(string x, string y)
{
    if (x == null)
    {
        if (y == null)
            return 0;
        else
                return -1;
    }
    else
    {
        try{
            return Convert.ToInt32(x).CompareTo(Convert.ToInt32(y));
        }catch{
            return x.CompareTo(y);
        }
    }
} 
```

and apply it in sort method.

```
list_lines_silver_count.Sort(CompareStringByInteger); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T11:19:45.270

您可以使用 Linq：

```
int number = 0;
string[] lines_silver_count = File
                .ReadLines(silver_countfilePath)
                .Select(l => new { 
                    Line = l, 
                    Parts = l.Split(Separator, StringSplitOptions.None) 
                })
                .Where(x => x.Parts.Length > 4
                    && int.TryParse(x.Parts[4], out number))
                .OrderBy(x => number)
                .Select(x => x.Line)
                .ToArray(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T11:21:36.207

```
public class MyCompare : IComparer<string> 
{ 
    public int Compare(string x, string y) 
    { 
        //get line_acc_ar[4] part from strings x and y
        string[] Separator = new string[] { "__" };
        string partX = x.Split(Separator, StringSplitOptions.None)[3];
        string partY = y.Split(Separator, StringSplitOptions.None)[3];

        int intPartX = int.Parse(partX );
        int inrPartY = int.Parse(partY );
        return intPartX.CompareTo(inrPartY)

    } 
}
list_lines_silver_count.OrderBy(a => a, new MyCompare()); 
```

# windows - 致命错误：无法打开基础包

> ID：13137770
> 
> 赞同：2
> 
> 时间：2012-10-30T11:12:18.347
> 
> 标签：windows, r, cygwin, rcpp, rinside

所以，现在我已经成功地在**WindowsXP**（VirtualBox）上编译了**RInside的 hello 程序。**但是，当我单击其可执行文件时，会出现一个显示上述错误的对话框。

 **搜索谷歌将我带到了[这个线程](http://lists.r-forge.r-project.org/pipermail/rcpp-devel/2012-February/003476.html)，他们正在讨论以下设置。

**回复：**

```
> Sys.getenv("R_LIBS")
[1] ""
> Sys.getenv("R_LIBS_USER")
[1] "C:\\Documents and Settings\\admin\\My Documents/R/win-library/2.15"
> Sys.getenv("R_HOME")
[1] "C:/R-2.15.1"
> sessionInfo ()
R version 2.15.1 (2012-06-22)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252 
[2] LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     
> 
```

从这里：[http ://cran.r-project.org/bin/windows/base/rw-FAQ.html#How-do-I-set-environment-variables_003f](http://cran.r-project.org/bin/windows/base/rw-FAQ.html#How-do-I-set-environment-variables_003f)

> 环境变量的优先顺序是列出这些选项的顺序，即命令行，然后是 .Renviron，然后是继承的环境。

**小路：**

![在此处输入图像描述](../Images/43d0659a9a2680813bc2bcb574a949fb.png)

**Rcmd_环境：**

```
## from R.sh
R_SHARE_DIR=${R_HOME}/share
R_INCLUDE_DIR=${R_HOME}/include
R_DOC_DIR=${R_HOME}/doc
R_ARCH=

## from Rcmd
R_OSTYPE=windows
TEXINPUTS=.;${TEXINPUTS};${R_SHARE_DIR}/texmf/tex/latex;
BIBINPUTS=.;${BIBINPUTS};${R_SHARE_DIR}/texmf/bibtex/bib;
BSTINPUTS=.;${BSTINPUTS};${R_SHARE_DIR}/texmf/bibtex/bst;

## from etc/Renviron
# R_PLATFORM='i386-pc-mingw32'
R_PAPERSIZE_USER=${R_PAPERSIZE}
R_PAPERSIZE=${R_PAPERSIZE-'a4'}
# for Rd2dpf, reference manual
R_RD4PDF=${R_RD4PDF-'times,inconsolata,hyper'}
## used for options("texi2dvi")
# R_TEXI2DVICMD=${R_TEXI2DVICMD-${TEXI2DVI-'texi2dvi'}}
## used by INSTALL, check, build
R_GZIPCMD=${R_GZIPCMD-'gzip'}
## Default zip/unzip commands
R_UNZIPCMD=${R_UNZIPCMD-'unzip'}
R_ZIPCMD=${R_ZIPCMD-'zip'}
R_BZIPCMD=${R_BZIPCMD-'bzip2'}
## Default browser
# R_BROWSER=${R_BROWSER-'open'}
## Default editor
# EDITOR=${EDITOR-${VISUAL-vi}}
## Default pager
# PAGER=${PAGER-''}
## Default PDF viewer
# R_PDFVIEWER=${R_PDFVIEWER-'open'}
# MAKE=${MAKE-make}
SED=${SED-sed}

R_LIBS=c:/DOCUME~1/admin/MYDOCU~1/R/win-library/2.15; 
```

**简介：**

```
# Things you might want to change

# options(papersize="a4")
# options(editor="notepad")
# options(pager="internal")

# set the default help type
# options(help_type="text")
  options(help_type="html")

# set a site library
.Library.site <- file.path(chartr("\\", "/", R.home()), "site-library")

# set a CRAN mirror
# local({r <- getOption("repos")
#       r["CRAN"] <- "http://my.local.cran"
#       options(repos=r)})

# Give a fortune cookie, but only to interactive sessions
# (This would need the fortunes package to be installed.)
#  if (interactive()) 
#    fortunes::fortune() 
```

请指出我遗漏的一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T11:27:22.153

这个错误会在下一个版本中得到一点帮助。发生的情况是，当*构建 RInside CRAN 包*时，`R_HOME`会检测到并编译进去。使用构建机器的值。即不是你的。

答案是 a) 在本地构建 RInside 以便它存储您的`R_HOME`值或 b) 设置环境变量`R_HOME`[并且仅在 Windows 上需要，因为只有 Windows 可以为您提供预构建版本]。在下一个版本中，我们还将使用 R 中的一些代码为您查找注册表；请参阅 SVN 存储库。

然而，这个问题之前已被多次提出和解决。**

# c# - DSN 无法连接到远程 SQL 服务器

> ID：13137778
> 
> 赞同：0
> 
> 时间：2012-10-30T11:12:41.250
> 
> 标签：c#, asp.net, sql, odbc, dsn

我将所有现有应用程序移动到新的 Web 服务器，应用程序使用基于 DSN 的连接，使用 ODBC 驱动程序。

在新服务器上，我正在尝试构建连接到远程 SQL Server 的 DSN，但出现错误：

```
System.Data.OleDb.OleDbException: [DBNETLIB][ConnectionOpen (Connect()).]SQL Server does not exist or access denied.
Invalid connection string attribute 
```

连接字符串是：`"Dsn=dsnName;uid=userID;pwd=pswd;Provider=SQLOLEDB;Integrated Security=SSPI"`

它在我的本地 PC 上运行良好，但在 Web 服务器上建立 DSN 时出现此错误。

如果我指定端口号和服务器名称（服务器名称，6000），那么连接会通过，但我的应用程序会抛出相同的错误。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:18:26.360

尝试使用如下连接字符串：

服务器=dsnName；uid=userID；pwd=pswd；提供者=SQLOLEDB；集成安全=SSPI"

或尝试使用

数据源=myServerAddress；初始目录=myDataBase；集成安全=SSPI；用户 ID=myDomain\myUsername;Password=myPassword;

# javascript - 等距全宽菜单？

> ID：13137780
> 
> 赞同：0
> 
> 时间：2012-10-30T11:12:45.450
> 
> 标签：javascript, jquery

我有一个包含四个选项的菜单，我需要将它们放在这样的图像下方：

```
----------------------------------------------------------------
|                        This is an image                      |
----------------------------------------------------------------
Menu 1               Menu 2             Menu 3             Menu4 
```

这些尺寸是响应式的，所以我动态地定位菜单项。我的问题是如何计算菜单宽度，使间距相等，以及 Menu1 和 Menu4 满足图像边缘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:19:29.307

在给定时间，您是否会拥有超过 4 个菜单项？如果不是，您可以轻松地将链接包装在无序中，并将`<li>`宽度分配为每个 25%。请参见以下示例：

**HTML**

```
<ul>
    <li><a href="#">Menu 1</a></li>
    <li><a href="#">Menu 2</a></li>
    <li><a href="#">Menu 3</a></li>
    <li><a href="#">Menu 4</a></li>
</ul> 
```

**CSS**

```
ul {
    list-style: none;
    margin: 0;
    overflow: hidden;
}

li {
    float: left;
    width: 25%;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T11:22:19.770

如果您有固定数量的项目，您可以计算出每个项目需要的百分比（如[@Chris](https://stackoverflow.com/a/13137888/370103)所示）。

如果菜单项的数量可以变化，您可以使用 jQuery 来确定宽度：

```
var imgWidth = $(".img").width();
var itemWidth = imgWidth / $("ul.menu li").length;

$("ul.menu li").width(itemWidth); 
```

在这里，我获取图像的宽度，然后将宽度除以`li`元素的数量，然后将此值应用为每个`li`元素的宽度。

**见演示：http: [//jsfiddle.net/rwvhG/](http://jsfiddle.net/rwvhG/)**

* * *

在对齐方面，这可以通过 CSS 完成：

```
ul li
{
    float:left;
    text-align:center;
}

ul li:first-child
{
    text-align:left;
}

ul li:last-child
{
    text-align:right;
} 
```

**见演示：http: [//jsfiddle.net/rwvhG/1/](http://jsfiddle.net/rwvhG/1/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T12:12:42.580

虽然您可以使用 css 设置 25% 的宽度，但如果菜单项的文本宽度非常不同，这将无法正常工作。如果您希望它非常准确，请尝试以下操作：

HTML

```
<ul class="menu">
    <li><a href="#">Menu 1</a></li>
    <li><a href="#">Menu 2</a></li>
    <li><a href="#">Menu 3</a></li>
    <li><a href="#">Menu 4</a></li>
</ul>​ 
```

JavaScript

```
$(document).ready( function( ) {

    var widths = 0;
    var items = $(".menu > li");
    var menu_width = items.eq(0).parent().width();

    // total width of all existing li
    items.each( function( ) {
        widths += $(this).width( );
    });        

    var gap = parseInt( ( menu_width - widths ) / ( items.length - 1 ) );

    // set widths of list items except for last one. Last li gets pushed to edge
    items.slice( 0, -1 ).each( function( ) { 
        $(this).width( $(this).width() + gap );
    });
}); 
```

[​在这里](http://jsfiddle.net/UEcd6/1/)拨弄

但是，如果菜单项的宽度几乎相同，则使用 CSS 可能会更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T14:46:30.633

您*可以*完全在 CSS 中完成

检查这个**演示**：http: [//jsfiddle.net/Gv7fZ/](http://jsfiddle.net/Gv7fZ/)

HTML：

```
<div class="outer">
    <img src="<put-image-url-here>">
    <div class="menu">
        <div class="menuitem">Menu 1</div>
        <div class="menuitem">Menu 2</div>
        <div class="menuitem">Menu 3</div>
        <div class="menuitem">Menu 4</div>
    </div>
</div> 
```

CSS：

```
.outer {
    margin: auto;    
    display: table-cell;
}
.menuitem {
    float: left;
    text-align: center;
    width: 33%;
}
.menuitem:first-child {
    text-align: left;  
    width: 16%;    
}
.menuitem:last-child {
    float: right;
    text-align: right;   
    width: 16%;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T11:23:28.573

如果您的布局是响应式的，则将您的菜单项设置为每个 25% 的宽度，然后将最后一个子项设置为 text-align:right 以便它与右边距对齐。

```
#Menu ul li {text-align:left;display:inline-block;width:25%}
#Menu ul li:last-child {text-align:right} 
```

# java - 如何将 HTML 转义字符从 JSP 转义到 Java

> ID：13137781
> 
> 赞同：0
> 
> 时间：2012-10-30T11:12:47.210
> 
> 标签：java, jakarta-ee, html-escape-characters, html-escape

我正在应用JSP 中`fn:escapeXml`的输入值（例如`>`）来进行 html 转义。当我提交表单时，我确实需要将参数发送到控制器。在我的控制器中，请求参数是 as`&gt`而不是`&gt;`。因此，我无法在控制器中取消转义以获得原始值。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:17:16.900

Apache Commons Lang - 字符串转义实用程序

[http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html)

使用其中一种转义方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:21:03.890

One solution is, create a custom method, and replace all string occurrences of &gt with > and do similar operation for other html characters.

# python - 获取 QPushButton 的名称

> ID：13137782
> 
> 赞同：1
> 
> 时间：2012-10-30T11:12:49.337
> 
> 标签：python, pyqt

有什么办法可以得到 a 的名字`QPushButton`吗？

IE

```
self.pushButton_9_3.setObjectName("pushButton_9_3") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T11:20:12.223

好吧，如果您有对按钮的引用，您可以简单地使用

```
my_button.objectName() 
```

或者在你的情况下

```
self.pushButton_9_3.objectName() 
```

# batch-file - 如何在使用批处理文件制作的输出 .txt 文件中进行换行

> ID：13137784
> 
> 赞同：1
> 
> 时间：2012-10-30T11:12:50.140
> 
> 标签：batch-file

> **可能重复：**
> [如何在批处理文件中回显换行符？](https://stackoverflow.com/questions/132799/how-can-you-echo-a-newline-in-batch-files)

我想知道是否可以帮助我在使用批处理文件制作的输出 .txt 文件中进行换行。
这是我脚本的开头，因此您可能会更好地理解我的意思：

```
@echo OFF
type NUL > newfile.txt
ECHO Hello, world. I am currently asking a question. > newfile.txt 
```

我希望将文本输出到 newfile.txt 文件中，如下所示：

```
Hello, world.
I am currently asking a question. 
```

我尝试了很多搜索，尝试了使用`&`and`^`和`ECHO`and `ECHO.`and的不同建议，`$'\r'`但我没有得到任何工作。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:03:43.097

您可以在回声中嵌入换行符。

这里需要空行

```
@echo off
echo Hello, world.^

I am currently asking a question. >newfile.txt 
```

或者为了获得更好的光学效果，您可以将换行符移动到变量中

```
@echo off
setlocal EnableDelayedExpansion
set LF=^

rem Two empty lines are required
echo Hello, world.!LF!I am currently asking a question. >newfile.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T11:28:19.680

单程;

```
@(
echo Hello, world
echo I am currently asking a question
echo I like cake.
) > newfile.txt 
```

# jquery - 更新面板刷新后没有获得 span id

> ID：13137785
> 
> 赞同：0
> 
> 时间：2012-10-30T11:12:54.343
> 
> 标签：jquery, jsfiddle

[小提琴](http://jsfiddle.net/Tax9n/6/)

我的表在更新面板刷新后位于更新面板中，
我没有获得跨度 ID。

```
$(".csstablelisttd").live('mousedown', function (e)
                {
                    clearFields();

                    //This line gets the index of the first clicked row.
                    lastRow = $(this).closest("tr")[0].rowIndex;

                    var rowIndex = $(this).closest("tr").index();
                    colIndex = $(e.target).closest('td').index();
    var id =$('.csstextheader').find('td').eq(colIndex).find('span').attr('id');

});
<table id="contentPlaceHolderMain_tableAppointment" cellspacing="1" width="100%" bgcolor="#cccccc">
        <tr Class="csstextheader">
            <td class="csstextheader" width="70px">
                                        </td>
            <td class="csstextheader" width="70px">
                                            <b>Time Slot&nbsp;</b>
                                        </td>
            <td ID="9"><span id=9>CR (CR1)</span></td>
            <td ID="10"><span id=10>ES (ES1)</span></td>
            <td ID="11"><span id=11>MR (MR1)</span></td>
            <td ID="13"><span id=13>US (US1)</span></td>
        </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:16:25.047

您的选择器不够精确。采用

```
$('tr.csstextheader').find('td').eq(colIndex).find('span').attr('id') 
```

* * *

请注意，您可以使用

```
<th... 
```

代替

```
<td class="csstextheader"... 
```

然后你的代码将是

```
$('th').eq(colIndex).find('span').attr('id') 
```

# c++ - 被移出的对象是否应该处于“安全”状态？

> ID：13137786
> 
> 赞同：8
> 
> 时间：2012-10-30T11:12:54.883
> 
> 标签：c++, c++11, move-semantics

> **可能重复：**
> [如何使用移动的对象？](https://stackoverflow.com/questions/3872521/how-can-moved-objects-be-used)
> [什么构成 C++11 中“移出”对象的有效状态？](https://stackoverflow.com/questions/12095048/what-constitutes-a-valid-state-for-a-moved-from-object-in-c11)

在 C++11 中实现移动语义时，被移动的对象应该处于*安全*状态，还是只能处于“垃圾”状态？

例如，在以下 C++11 包装器到原始`FILE*`资源的示例中，实现移动构造函数的首选选项是什么？

```
// C++11 wrapper to raw FILE*
class File
{
  FILE* m_fp;

public:

  // Option #1
  File(File&& other)
    : m_fp(other.m_fp)
  {
    // "other" left in a "junk" state
  }

  // Option #2
  File(File&& other)
    : m_fp(other.m_fp)
  {
    // Avoid dangling reference in "other"
    other.m_fp = nullptr;
  }

  ...
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T11:22:08.327

The only thing you *must* be able to do with a moved-from object is destroy it. Beyond that, it's up to your class what the normal class invariants are and whether moved-from objects bother to satisfy them.

For example, it's a good idea to ensure that you can assign to the object, just in case someone wants to use `std::move` on an instance and give it a new value later. [Edit: as pointed out in an answer to one of the suggested-dupe questions, the general `std::swap` template moves from an object and then move-assigns to it, so if you don't ensure this then either you need to specialize `std::swap` or you need to forbid users of your class from using it.]

Since your class does nothing in its destructor, either option is fine. Option 2 might be easier for users to work with, but then again if they're coding on the assumption that they can't do anything with a moved-from object, then it makes no difference. Since the class is incomplete, though, that might change when you write the destructor.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-30T11:29:27.740

已被移动的对象仍然是对象，并且它必须处于*有效*状态，尽管它可能是*不确定*的。特别是，应该可以安全地*为其分配*一个新值（当然它必须是可破坏的，正如@Steve 所说）。只要移出的对象保持有效，您就可以为自己的类赋予什么特定的语义。

通常，您应该将“移动”视为优化的“复制”。然而，对于一些本质上是“只移动”的类，例如`unique_ptr`，额外的保证可能是合适的——例如，`unique_ptr`承诺在它被移动之后它是空的，而且肯定没有其他东西真正有意义。

（您的实际代码是不完整的，但鉴于 a`FILE*`是一种只能移动的资源，它可能已损坏，您应该尝试`unique_ptr`尽可能接近地模拟 - 甚至[直接使用它](https://codereview.stackexchange.com/questions/4679/shared-ptr-and-file-for-wrapping-cstdio-update-also-dlfcn-h)。）

# mysql - Joomla 300 并发用户

> ID：13137792
> 
> 赞同：2
> 
> 时间：2012-10-30T11:13:22.127
> 
> 标签：mysql, performance, joomla, webserver

我在 Joomla 2.5 制作的网站上有一个问题，该网站使用 Ja teline IV 模板，有 300 个并发用户，它是一本足球杂志，所以文章经常更新，在比赛期间也是一分钟一分钟。

我有一台 16gb 内存和四核处理器的服务器，但是当 300 个用户访问该网站时，网站冻结。

我已经完成了所有的前端优化，但是，我最后的优化可能是启用缓存。我的问题是： - 也为登录用户启用缓存 - 缓存时间，如果我有那种类型的文章，我可以启用缓存过期到 1 分钟吗？这也是一个不错的选择吗？可以优化性能。

你能建议我做什么吗？其他可能的优化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:14:37.820

你必须找到瓶颈：处理器？记忆？磁盘？数据库？网络？

找到问题后，您必须选择正确的解决方案：更大的处理器、更多的内存、更快的磁盘、数据库索引、内存缓存、网络缓存等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:22:13.493

16gb 应该足以处理 300 个并发用户...闻到 mysql 服务器没有微调。为您的 Mysql 服务器运行此脚本

[https://github.com/rackerhacker/MySQLTuner-perl](https://github.com/rackerhacker/MySQLTuner-perl)

# javascript - 从数据库中获取数据并将其呈现到backbone.js中的表中

> ID：13137796
> 
> 赞同：0
> 
> 时间：2012-10-30T11:13:31.917
> 
> 标签：javascript, json, backbone.js

我是新的骨干.js 世界。我想使用backbone.js与服务器通信并将员工详细信息呈现到表上。我使用以下代码从服务器获取数据：

```
 var EmployeeCollection = Backbone.Collection.extend({
    model: Person,
    url:"http://localhost:4000/get/employee",
     parse : function(res) 
     {
         console.log('response inside parse' + res);
        return res;
     }

});

var employee = new EmployeeCollection();
employee.fetch(); 
```

在日志声明中我得到：`response inside parse[object Object],[object Object],[object Object]`

但我不知道接下来会发生什么。如何从我正在获取的对象中检索数据并将其呈现到表上。有人有建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T12:12:28.520

让我们假设您的 HTML 页面中有一个表格，`id="employee"`并且您已经定义了一个`template`对应于表格中的行的表格。为简单起见，我们假设员工行只有`firstname`和`lastname`：

```
<table id="employee">
  <thead>
    <tr><td>Firstname</td><td>Lastname</td></tr>
  </thead>
  <tbody>
  </tbody>
</table>
<script type="text/template" id="employee-template">
    <td><%= firstname %></td><td><%= lastname %></td>
</script>​ 
```

您需要两个`views`来渲染表格，一个来渲染表格中的每一行。它们可能看起来像：

```
//a (table) view to render the list of employees
var employee_list_view = Backbone.View.extend({
    el: $('#employee'),
    initialize: function() {
        this.collection.bind("add", this.render, this);
    },

    //this creates new rows in the table for each model in the collection
    render: function() {
        _.each(this.collection.models, function(data) {
            this.$el.append(new employee_view({
                model: data
            }).render().el);
        }, this);
        return this;
    }
});

//a (row) view to render each employee
var employee_view = Backbone.View.extend({
    tagName: "tr",
    template: _.template($("#employee-template").html()),

    render: function() {
        this.$el.html(this.template(this.model.toJSON()));
        return this;
    }
}); 
```

从服务器获取集合后，项目将存储在集合中。您可以使用以下代码查看检索到的数据。成功后，我们创建一个新的员工列表（在本例中为表）并传递员工集合。

```
var employee = new EmployeeCollection();

employee.fetch({
    success: function() {
        console.log(employee.toJSON());
        new employee_list_view({collection: employee}).render();
    },
    error: function() {
        console.log('Failed to fetch!');
    }
}); 
```

注意：建议使用成功/失败回调。

看看[JSFiddle 上的这个工作版本](http://jsfiddle.net/aVxwz/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:04:24.587

首先，如果您`console.log`以这种方式使用，您可以获得更多信息`console.log('response inside parse', res);`。`res`不会转换为字符串，但会显示为一个 JavaScript 对象及其所有属性和值。然后，检查backbone.js 文档[Collection.parse](http://backbonejs.org/#Collection-parse)并阅读`res`此上下文中的内容以及此方法应返回的内容。

下一步可能是创建一个使用您集合中的一些模板和数据呈现表格的视图。

# java - 如何在 Eclipse 4.2 的 RCP 应用程序中重用菜单？

> ID：13137797
> 
> 赞同：22
> 
> 时间：2012-10-30T11:13:32.697
> 
> 标签：java, eclipse, eclipse-rcp, eclipse-emf, eclipse-juno

我正在使用带有兼容层的 Eclipse 4.2 来为我的 RCP 应用程序重用现有部分。

我想在我的 RCP 应用程序中重用来自**File 菜单**和*Run***菜单的***New*，因此我打开 Eclipse 的 EMF 编辑器，它看起来像这样：

 *****![在此处输入图像描述](../Images/95a2ea8c967e30e8526c2d5fcb802ccd.png)

但是对于*新*菜单，它显示如下：`org.eclipse.e4.model.application....`

我的应用程序看起来像这样（它只是带有一些额外功能的 Java 脚本调试器）：

![在此处输入图像描述](../Images/27d4860a9d9dfa3b7e4febefe6ace8b4.png)

那么如何在我的 RCP 应用程序中重用这些菜单呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:37:18.537

I think I understand what you are saying. You opened the E4 Live Editor on your Eclipse Juno, to get the commands for New and Run menu items so that you can reuse it in your own code?

If I am correct, then in E4 you can no longer use the default commands provided by Eclipse. You need to define your own commands. See [here](http://www.vogella.com/articles/EclipseRCP/article.html#commands_defaults) for details.

> If you know Eclipse 3.x you are probably searching for the predefined commands which you can re-use. The Eclipse 4 platform tries to be as lean as possible.
> 
> Eclipse 4 does not include standard commands anymore. You have to define all your commands.

So if you try to add these commands via the .e4xmi file, then you must define your own commands with its own handlers.

There is a way out if you still wish to use the commands given by Eclipse and that will have to be done via the plugin.xml file. Since you said you are using the compatibility layer, you probably still have a lot of legacy code, and it might be ok to add these menu items via the plugin.xml. Although, once you do a hard migration, I believe Eclipse is trying to reduce the use of extensions in plugin.xml and in that case you will have to define your own commands.

So if you want to add these commands then you must do it via the extensions in the plugin.xml.

To add the New menu item, go to your `plugin.xml`, in the Extensions tab, add `org.eclipse.ui.menus`. Create a menucontribution with a locationURI of `menu:org.eclipse.ui.main.menu`. Then you must add a menu and give it the label `File`.

This will add the menu `File` to your RCP. Then to this you must add the `New` command. In order to do this, you add a command to the File menu you just created. Once you add a command, in commandID you select Browse and look for `org.eclipse.ui.file.newQuickMenu`.

So your plugin.xml will have the following code.

```
<extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="menu:org.eclipse.ui.main.menu">
         <menu
               id="fileMenu"
               label="File">
            <command
                  commandId="org.eclipse.ui.file.newQuickMenu"
                  style="push">
            </command>.... 
```*****

# javascript - 无法使用 Raphaël 库

> ID：13137798
> 
> 赞同：1
> 
> 时间：2012-10-30T11:13:33.520
> 
> 标签：javascript, raphael

我在使用 Raphaël 库时遇到问题。我收到以下错误

'R._g.doc.body' 为空或不是对象

我刚刚使用了以下代码

```
<html>
<head>
<script src="raphael.js"></script>
<script>
// Creates canvas 320 × 200 at 10, 50
var paper = Raphael(10, 50, 320, 200);

// Creates circle at x = 50, y = 40, with radius 10
var circle = paper.circle(50, 40, 10);
// Sets the fill attribute of the circle to red (#f00)
circle.attr("fill", "#f00");

// Sets the stroke attribute of the circle to white
circle.attr("stroke", "#fff");

</script>
</head>
</html> 
```

我为此使用了 IE8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:16:31.440

不确定，但是鉴于您的代码和错误消息的内容，我会说您需要`<body></body>`在文档中添加一个标签。

不确定这是否是 IE8 的东西。我把你的例子放在一个[小提琴](http://jsfiddle.net/ZbDsR/)中，对我来说，在 Chrome 22 中，它也可以在没有 body 标签的情况下工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:17:29.980

您没有使用`<body></body>`n 并将您的脚本放在`body`而不是`head`

尝试这个

```
<html>
<head>
<script src="raphael.js"></script>
</head>
<body>
  <script>
// Creates canvas 320 × 200 at 10, 50
var paper = Raphael(10, 50, 320, 200);

// Creates circle at x = 50, y = 40, with radius 10
var circle = paper.circle(50, 40, 10);
// Sets the fill attribute of the circle to red (#f00)
circle.attr("fill", "#f00");

// Sets the stroke attribute of the circle to white
circle.attr("stroke", "#fff");

</script>
</body>
</html> 
```

# iphone - 在 AdMob 中介中添加 InMobi 时出错

> ID：13137799
> 
> 赞同：0
> 
> 时间：2012-10-30T11:13:33.667
> 
> 标签：iphone, ios, inmobi

我在 InMobi iOS 中添加时会出现以下错误：

> > `Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[IMAdView initWithFrame:imAppId:imAdUnit:rootViewController:]: unrecognized selector sent to instance 0xb9e2080'`

我有以下内容：

・ AdMob 中介 SDK 添加
・ InMobi 适配器和 SDK 添加
・ 其他链接器标志添加 -ObjC 和 -all_load**

还是错过了什么？你需要还是进口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:27:10.053

看起来您没有在适当的`IMAdView`对象上调用此方法。根据[文档](http://developer.inmobi.com/wiki/index.php?title=MoPub_InMobi_iOS)，这有效：

```
IMAdView *someAdView = [[IMAdView alloc] initWithFrame:CGRectMake(0, 0, 320, 50) imAppId:@"YOUR_INMOBI_APP_ID" imAdSize:IM_UNIT_320x50 rootViewController:self]; 
```

您必须先分配一个对象，`alloc`然后再对其进行初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T03:50:19.617

当我将 Google AdMob SDK 更新到 6.4.2 版和 InMobiAdMobiOSAdapter 更新到最新版本时，我也遇到了这个问题，但忽略了将 inMobi SDK 更新到 3.7.0。

在此页面上：[https](https://developers.google.com/mobile-ads-sdk/docs/admob/mediation-networks) ://developers.google.com/mobile-ads-sdk/docs/admob/mediation-networks查看 InMobi 的行。您必须同时下载适配器（“iOS 适配器”）和 SDK（“下载 iOS”），并将它们合并到您的项目中。

# c# - 将远程 XML 文件导入 MVC 4 Webapp

> ID：13137800
> 
> 赞同：2
> 
> 时间：2012-10-30T11:13:44.333
> 
> 标签：c#, xml, entity-framework, asp.net-mvc-4

我有一个 webapp，需要每晚导入 3 个不同的远程 XML 文件。这些文件有学生和家长信息、学习信息等。

有人可以告诉我如何读取 XML（通过 http）然后遍历每个学生，以便我可以添加来自其他 XML 文件的信息并将关系存储到我的数据库中吗？

需要一些示例代码，例如：

*   打开和读取父母 XML 并使用 XML 文件中的固定 ID 存储在数据库中
*   打开和读取学生 XML 并存储在数据库中，并使用父 XML 中的父 ID 链接到他们各自的父
*   还存储每个学生的学习信息

我需要知道我的策略是什么。使用 Entity Framework 完成此任务的最聪明和最有效的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:13:15.023

先给点建议。。

当您只使用 web 应用程序时需要注意，因为它不会自动获取更新的文件。至少不是开箱即用的。webapp 会在长时间不使用时被 IIS 卸载，并且几乎总是一个“反应式”应用程序。

但是......可以安排一个任务，您可以在每晚的某个时间打开一个网页，然后以这种方式开始导入。

您可以使用 System.Net.HttpWebRequest 将 xml 提取到本地临时文件夹，如下所示：

```
HttpWebRequest req = WebRequest.Create("http://url.to/file.xml") as HttpWebRequest;

// check if the cast went well
if (req != null) {
    try {
        HttpWebResponse resp = req.GetResponse() as HttpWebResponse;
        System.IO.FileStream outFileStream =  
            System.IO.File.Create(@"Path\To\localfile.xml");

        resp.GetResponseStream().CopyTo(outFileStream);

        outFileStream.Close();
        outFileStream.Dispose();
    }
    catch (ExceptionTypeA ex1) { 
        // Catch all specific exceptions... ommitted here for brevity 
    }
} 
```

然后，您可以使用 XDocument / XElement (Linq to Xml) 从 Xml 文件中提取数据，并使用标准 ADO.NET API 创建和处理 DB 导入。

只有导入（关系）数据库后，您才能完全使用实体框架进行数据检索/修改。您甚至可以将所有 xml 数据转换为 POCO 类型的结构化集合，并使用实体框架来查询这些集合，但老实说，我认为这不是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:13:23.470

我看不到您将如何直接将实体框架与您的 XML 文件一起使用。EF 旨在与关系数据库一起使用。

我认为您必须以某种方式将数据导入关系数据库。

[如果使用 SQL Server，您可以使用DataSet](http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx)和[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)实现这样的导入（假设您已经借助 Web 服务器上的计划任务下载了 XML 文件）：

```
// Create DataSet and load data
DataSet ParentData = new DataSet();
ParentData.ReadXml(Server.MapPath("ParentFile.xml"));

// Create SqlBulkCopy object
SqlConnection connection = new SqlConnection("YourConnectionString");
SqlBulkCopy bulkCopy = new SqlBulkCopy(connection);
bulkCopy.DestinationTableName = "YourParentTable";

// Get DataTable and copy it to database
DataTable ParentTable = ParentData.Tables["Parent"];
bulkCopy.WriteToServer(ParentTable); 
```

# javascript - 让 Ajax 取消超链接

> ID：13137805
> 
> 赞同：0
> 
> 时间：2012-10-30T11:13:59.070
> 
> 标签：javascript, ajax

有没有办法从超链接进行 Ajax 调用？

当有人使用 javascript 单击超链接时，我想更改 div 元素的内部 html。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:15:59.960

Ajax 只是“你可以用 JavaScript 做的事情”

超链接可以像任何其他 HTML 元素一样绑定事件处理程序。

```
var links_in_document = document.getElementsByTagName('a');
var a_link = links_in_document[0];
a_link.addEventListener('click', a_function_that_does_something_ajaxy);

function a_function_that_does_something_ajaxy(e) {
    var xhr = new XMLHttpRequest();
    // etc
    e.preventDefault();
} 
```

注意：此代码示例中不包含不支持标准的浏览器的兼容性例程。您应该添加一些（以及更明智的方法来确定您定位的链接）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:18:05.333

```
<a href="javascript:yourAjaxFunctionName();">click</a> 
```

# delphi - TeeChart 的 PieSeries 可以将非重要数据汇总到“其他”切片中吗？

> ID：13137812
> 
> 赞同：2
> 
> 时间：2012-10-30T11:14:14.857
> 
> 标签：delphi, delphi-xe2, teechart

`TPieSeries`当填充数据时，我有一个看起来像这个图像的图像。不是很亮...我可以指示饼系列显示前 N 个最重要的记录，并将其余记录汇总到另一个名为“Others”的切片中吗？到目前为止，我唯一想到的就是设置图表分页和排序我的数据，以便前 N 条记录显示在第一页上。我正在使用 TeeChart Standard v2011.03.32815 VCL。 ![在此处输入图像描述](../Images/1e691cb3c54e2f8f1f64c2054786372d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:13:02.077

是的，您可以使用[此处](http://www.teechart.net/support/viewtopic.php?f=3&t=10917&p=45970&hilit=otherslice#p45970)[Yeray](https://stackoverflow.com/users/509369/yeray)的示例中所示的 OtherSlice 属性来执行此操作。

# python - 如何使用请求下载图像

> ID：13137817
> 
> 赞同：461
> 
> 时间：2012-10-30T11:14:25.950
> 
> 标签：python, urllib2, python-requests

我正在尝试使用 python 的`requests`模块从网上下载并保存图像。

这是我使用的（工作）代码：

```
img = urllib2.urlopen(settings.STATICMAP_URL.format(**data))
with open(path, 'w') as f:
    f.write(img.read()) 
```

这是使用的新（非工作）代码`requests`：

```
r = requests.get(settings.STATICMAP_URL.format(**data))
if r.status_code == 200:
    img = r.raw.read()
    with open(path, 'w') as f:
        f.write(img) 
```

你能帮我从响应中使用什么属性`requests`吗？

* * *

## 回答 #1

> 赞同：602
> 
> 时间：2012-10-30T11:18:15.533

您可以使用[`response.raw`文件对象](https://requests.readthedocs.io/en/latest/api/#requests.Response.raw)，也可以遍历响应。

默认情况下，使用`response.raw`类文件对象不会解码压缩响应（使用 GZIP 或 deflate）。`decode_content`您可以通过将属性设置为`True`（`requests`将其设置`False`为控制解码本身）来强制它为您解压缩。然后，您可以使用[`shutil.copyfileobj()`](https://docs.python.org/2/library/shutil.html#shutil.copyfileobj)Python 将数据流式传输到文件对象：

```
import requests
import shutil

r = requests.get(settings.STATICMAP_URL.format(**data), stream=True)
if r.status_code == 200:
    with open(path, 'wb') as f:
        r.raw.decode_content = True
        shutil.copyfileobj(r.raw, f) 
```

要迭代响应，请使用循环；像这样迭代可确保在此阶段解压缩数据：

```
r = requests.get(settings.STATICMAP_URL.format(**data), stream=True)
if r.status_code == 200:
    with open(path, 'wb') as f:
        for chunk in r:
            f.write(chunk) 
```

这将以 128 字节块的形式读取数据；如果您觉得另一个块大小效果更好，请使用自定义块大小的[`Response.iter_content()`方法](https://requests.readthedocs.io/en/latest/api/#requests.Response.iter_content)：

```
r = requests.get(settings.STATICMAP_URL.format(**data), stream=True)
if r.status_code == 200:
    with open(path, 'wb') as f:
        for chunk in r.iter_content(1024):
            f.write(chunk) 
```

请注意，您需要以二进制模式打开目标文件，以确保 python 不会尝试为您翻译换行符。我们还设置`stream=True`了`requests`不先将整个图像下载到内存中。

* * *

## 回答 #2

> 赞同：268
> 
> 时间：2013-08-04T13:32:16.223

从请求中获取类文件对象并将其复制到文件中。这也将避免一次将整个内容读入内存。

```
import shutil

import requests

url = 'http://example.com/img.png'
response = requests.get(url, stream=True)
with open('img.png', 'wb') as out_file:
    shutil.copyfileobj(response.raw, out_file)
del response 
```

* * *

## 回答 #3

> 赞同：205
> 
> 时间：2014-02-06T06:33:00.427

这个怎么样，快速解决。

```
import requests

url = "http://craphound.com/images/1006884_2adf8fc7.jpg"
response = requests.get(url)
if response.status_code == 200:
    with open("/Users/apple/Desktop/sample.jpg", 'wb') as f:
        f.write(response.content) 
```

* * *

## 回答 #4

> 赞同：85
> 
> 时间：2013-08-07T15:52:16.180

我同样需要使用请求下载图像。我首先尝试了 Martijn Pieters 的答案，效果很好。但是当我对这个简单的函数进行概要分析时，我发现与 and 相比，它使用了如此多的函数`urllib`调用`urllib2`。

然后我尝试了请求模块作者[推荐的方式：](http://docs.python-requests.org/en/latest/user/quickstart/#binary-response-content)

```
import requests
from PIL import Image
# python2.x, use this instead  
# from StringIO import StringIO
# for python3.x,
from io import StringIO

r = requests.get('https://example.com/image.jpg')
i = Image.open(StringIO(r.content)) 
```

这大大减少了函数调用的数量，从而加快了我的应用程序。这是我的分析器的代码和结果。

```
#!/usr/bin/python
import requests
from StringIO import StringIO
from PIL import Image
import profile

def testRequest():
    image_name = 'test1.jpg'
    url = 'http://example.com/image.jpg'

    r = requests.get(url, stream=True)
    with open(image_name, 'wb') as f:
        for chunk in r.iter_content():
            f.write(chunk)

def testRequest2():
    image_name = 'test2.jpg'
    url = 'http://example.com/image.jpg'

    r = requests.get(url)

    i = Image.open(StringIO(r.content))
    i.save(image_name)

if __name__ == '__main__':
    profile.run('testUrllib()')
    profile.run('testUrllib2()')
    profile.run('testRequest()') 
```

结果`testRequest`：

```
343080 function calls (343068 primitive calls) in 2.580 seconds 
```

结果`testRequest2`：

```
3129 function calls (3105 primitive calls) in 0.024 seconds 
```

* * *

## 回答 #5

> 赞同：67
> 
> 时间：2015-11-23T08:02:30.077

这可能比使用`requests`. 这是我唯一一次建议不要用`requests`它来做 HTTP 的事情。

两个班轮使用`urllib`：

```
>>> import urllib
>>> urllib.request.urlretrieve("http://www.example.com/songs/mp3.mp3", "mp3.mp3") 
```

* * *

还有一个不错的 Python 模块，名为`wget`，非常易于使用。[在这里](https://pypi.python.org/pypi/wget)找到。

这证明了设计的简单性：

```
>>> import wget
>>> url = 'http://www.futurecrew.com/skaven/song_files/mp3/razorback.mp3'
>>> filename = wget.download(url)
100% [................................................] 3841532 / 3841532>
>> filename
'razorback.mp3' 
```

享受。

**编辑：**您还可以添加`out`参数来指定路径。

```
>>> out_filepath = <output_filepath>    
>>> filename = wget.download(url, out=out_filepath) 
```

* * *

## 回答 #6

> 赞同：38
> 
> 时间：2017-04-07T19:42:01.650

以下代码片段下载文件。

该文件以指定 url 中的文件名保存。

```
import requests

url = "http://example.com/image.jpg"
filename = url.split("/")[-1]
r = requests.get(url, timeout=0.5)

if r.status_code == 200:
    with open(filename, 'wb') as f:
        f.write(r.content) 
```

* * *

## 回答 #7

> 赞同：21
> 
> 时间：2016-05-31T14:01:08.617

主要有2种方式：

1.  使用`.content`（最简单/官方）（见[张振一的回答](https://stackoverflow.com/a/18108000/167897)）：

    ```
    import io  # Note: io.BytesIO is StringIO.StringIO on Python2.
    import requests

    r = requests.get('http://lorempixel.com/400/200')
    r.raise_for_status()
    with io.BytesIO(r.content) as f:
        with Image.open(f) as img:
            img.show() 
    ```

2.  使用`.raw`（参见[Martijn Pieters 的回答](https://stackoverflow.com/a/13137873/167897)）：

    ```
    import requests

    r = requests.get('http://lorempixel.com/400/200', stream=True)
    r.raise_for_status()
    r.raw.decode_content = True  # Required to decompress gzip/deflate compressed responses.
    with PIL.Image.open(r.raw) as img:
        img.show()
    r.close()  # Safety when stream=True ensure the connection is released. 
    ```

两者的时间都没有明显的差异。

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2018-09-17T08:33:37.277

就像导入图像和请求一样简单

```
from PIL import Image
import requests

img = Image.open(requests.get(url, stream = True).raw)
img.save('img1.jpg') 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-04-06T16:08:35.440

这是一个更加用户友好的答案，仍然使用流媒体。

只需定义这些函数并调用`getImage()`. 默认情况下，它将使用与 url 相同的文件名并写入当前目录，但两者都可以更改。

```
import requests
from StringIO import StringIO
from PIL import Image

def createFilename(url, name, folder):
    dotSplit = url.split('.')
    if name == None:
        # use the same as the url
        slashSplit = dotSplit[-2].split('/')
        name = slashSplit[-1]
    ext = dotSplit[-1]
    file = '{}{}.{}'.format(folder, name, ext)
    return file

def getImage(url, name=None, folder='./'):
    file = createFilename(url, name, folder)
    with open(file, 'wb') as f:
        r = requests.get(url, stream=True)
        for block in r.iter_content(1024):
            if not block:
                break
            f.write(block)

def getImageFast(url, name=None, folder='./'):
    file = createFilename(url, name, folder)
    r = requests.get(url)
    i = Image.open(StringIO(r.content))
    i.save(file)

if __name__ == '__main__':
    # Uses Less Memory
    getImage('http://www.example.com/image.jpg')
    # Faster
    getImageFast('http://www.example.com/image.jpg') 
```

`request`胆量`getImage()`是基于[这里](https://stackoverflow.com/a/14114741/130427)的答案，胆量`getImageFast()`是基于上面的[答案](https://stackoverflow.com/a/18108000/130427)。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2019-10-18T10:37:49.020

我就是这样做的

```
import requests
from PIL import Image
from io import BytesIO

url = 'your_url'
files = {'file': ("C:/Users/shadow/Downloads/black.jpeg", open('C:/Users/shadow/Downloads/black.jpeg', 'rb'),'image/jpg')}
response = requests.post(url, files=files)

img = Image.open(BytesIO(response.content))
img.show() 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2016-05-24T13:50:40.550

我将发布一个答案，因为我没有足够的代表发表评论，但是使用 Blairg23 发布的 wget，您还可以为路径提供一个 out 参数。

```
 wget.download(url, out=path) 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-08-20T01:01:04.920

我的方法是使用 response.content (blob) 并以二进制模式保存到文件中

```
img_blob = requests.get(url, timeout=5).content
     with open(destination + '/' + title, 'wb') as img_file:
         img_file.write(img_blob) 
```

查看我的[python 项目](https://github.com/adriano-pinaffo/download_images)，它根据关键字从 unsplash.com 下载图像。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2019-06-17T13:23:38.527

这是谷歌搜索如何下载带有请求的二进制文件的第一个响应。如果您需要下载带有请求的任意文件，您可以使用：

```
import requests
url = 'https://s3.amazonaws.com/lab-data-collections/GoogleNews-vectors-negative300.bin.gz'
open('GoogleNews-vectors-negative300.bin.gz', 'wb').write(requests.get(url, allow_redirects=True).content) 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-05-02T19:21:42.187

你可以这样做：

```
import requests
import random

url = "https://images.pexels.com/photos/1308881/pexels-photo-1308881.jpeg? auto=compress&cs=tinysrgb&dpr=1&w=500"
name=random.randrange(1,1000)
filename=str(name)+".jpg"
response = requests.get(url)
if response.status_code.ok:
   with open(filename,'w') as f:
    f.write(response.content) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-10-29T07:12:02.340

同意[Blairg23](https://stackoverflow.com/a/33866125/15164646)的观点，使用`urllib.request.urlretrieve`是最简单的解决方案之一。

我想在这里指出一个注意事项。有时它不会下载任何东西，因为请求是通过脚本（bot）发送的，如果你想从谷歌图像或其他搜索引擎解析图像，你需要先传递`user-agent`给请求`headers`，然后再下载图像，否则，请求将被阻止并抛出错误。

通过`user-agent`并下载图像：

```
opener=urllib.request.build_opener()
opener.addheaders=[('User-Agent','Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36 Edge/18.19582')]
urllib.request.install_opener(opener)

urllib.request.urlretrieve(URL, 'image_name.jpg') 
```

在线 IDE 中的代码，使用`requests`, `bs4`, `urllib.requests`.[从 Google 图片中抓取和下载图片](https://replit.com/@DimitryZub1/Scrape-and-Download-Google-Images-with-Python#bs4_original_images.py)

* * *

或者，如果您的目标是从 Google、Bing、Yahoo!、DuckDuckGo（和其他搜索引擎）等搜索引擎抓取图像，那么您可以使用[SerpApi](https://serpapi.com/)。这是一个带有免费计划的付费 API。

最大的不同是无需弄清楚如何绕过搜索引擎的阻止或如何从 HTML 或 JavaScript 中提取某些部分，因为它已经为最终用户完成了。

要集成的示例代码：

```
import os, urllib.request
from serpapi import GoogleSearch

params = {
  "api_key": os.getenv("API_KEY"),
  "engine": "google",
  "q": "pexels cat",
  "tbm": "isch"
}

search = GoogleSearch(params)
results = search.get_dict()

print(json.dumps(results['images_results'], indent=2, ensure_ascii=False))

# download images 
for index, image in enumerate(results['images_results']):

    # print(f'Downloading {index} image...')

    opener=urllib.request.build_opener()
    opener.addheaders=[('User-Agent','Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36 Edge/18.19582')]
    urllib.request.install_opener(opener)

    # saves original res image to the SerpApi_Images folder and add index to the end of file name
    urllib.request.urlretrieve(image['original'], f'SerpApi_Images/original_size_img_{index}.jpg')

-----------
'''
]
  # other images
  {
    "position": 100, # 100 image
    "thumbnail": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQK62dIkDjNCvEgmGU6GGFZcpVWwX-p3FsYSg&usqp=CAU",
    "source": "homewardboundnj.org",
    "title": "pexels-helena-lopes-1931367 - Homeward Bound Pet Adoption Center",
    "link": "https://homewardboundnj.org/upcoming-event/black-cat-appreciation-day/pexels-helena-lopes-1931367/",
    "original": "https://homewardboundnj.org/wp-content/uploads/2020/07/pexels-helena-lopes-1931367.jpg",
    "is_product": false
  }
]
''' 
```

> 免责声明，我为 SerpApi 工作。

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2021-06-17T05:33:55.550

下载图片

```
import requests
Picture_request = requests.get(url) 
```

# asp.net - Web.Config 中的 Aspx 授权

> ID：13137825
> 
> 赞同：0
> 
> 时间：2012-10-30T11:15:07.217
> 
> 标签：asp.net, web-config, security

我需要修改 web.config 文件以确保 First.aspx 只能由订阅者组的成员访问。

什么是正确的：

一个

```
<location path="First.aspx"> 
<system.web> 
<authorization> 
<allow roles="Subscribers"/> 
<deny users="*"/> 
</authorization> 
</system.web> 
</location> 
```

或者

乙

```
<location path="First.aspx"> 
<system.web> 
<authorization> 
<deny users="*"/> 
<allow roles="Subscribers"/> 
</authorization> 
</system.web> 
</location> 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T11:16:29.797

第一个是正确的，因为第二个会在尝试检查他们的角色之前否认每个人。`deny`并且`allow`条目按照输入的顺序进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:41:23.003

在这里我找到了这个（[http://weblogs.asp.net/gurusakar/archive/2008/09/29/setting-authorization-rules-for-a-particular-page-or-folder-in-web-config.aspx](http://weblogs.asp.net/gurusarkar/archive/2008/09/29/setting-authorization-rules-for-a-particular-page-or-folder-in-web-config.aspx) ) 所以 A 是正确的：

由于授权是从上到下进行的，因此会检查规则直到找到匹配项。在这里我们有第一个，因此即使在管理员角色中，它也不会再检查允许并拒绝访问。

所以 PUT all 允许在任何拒绝之前。

注意：拒绝的工作方式与允许相同。您可以根据您的要求拒绝特定角色或用户。

# ruby-on-rails - 如何为活动记录添加方法？

> ID：13137826
> 
> 赞同：0
> 
> 时间：2012-10-30T11:15:23.337
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我想在 Active Record Istance 上使用我的方法 getScheduleFixed()

```
ps = ProgramSchedule.all
ps.getScheduleFixed 
```

重要的事实是如何在我的方法声明中访问“ps”数组（活动记录）

```
class ProgramSchedule < ActiveRecord::Base

  def getScheduleFixed

    array = (HERE ARRAY RETURNED BY ACTIVE RECORD)

    # some stuff...

    return array

  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:57:25.857

我认为您应该为此使用范围：

```
class ProgramSchedule < ActiveRecord::Base

  scope :fixed, { all.map(&:getScheduleFixed) }

end 
```

或者

```
class ProgramSchedule < ActiveRecord::Base

  def self.fixed
    all.map(&:getScheduleFixed)
  end

end 
```

现在您只需要调用`ProgramSchedule.fixed`. 这两种方法都可以链接到其他范围，例如`ProgramSchedule.latest.fixed`. [在此处](http://apidock.com/rails/ActiveRecord/NamedScope/ClassMethods/scope)查看更多详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:23:45.580

当你这样做时`ProgramSchedule.all`，你会得到一个`Array`，而不是`ProgramSchedule`.

如果您的方法将始终与所有记录一起调用，您可以使用这样的类方法：

```
class ProgramSchedule < ActiveRecord::Base
  def self.getAllScheduleFixed
    array = ProgramSchedule.all # or self.class.all could be used if you subclass this class
    #some stuff
  end
end 
```

如果您只需要使用 ProgramSchedule 的子集，即条件，则需要将条件传递给此类方法，或者将结果数组直接传递给某个类方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T11:28:04.377

你在这里把事情搞混了。

**1)**您可以在单个 ActiveRecord 对象上使用（**实例）方法。**

```
# Returns an ARRAY with all programschedule instances
all_ps = ProgramSchedule.all

# You can now iterate over over the array
all_ps.each do |ps|
  # in here you can call the instance method on the actual model instance
  ps.instance_method
end

# Definition of this method in app/models/program_schedule.rb
class ProgramSchedule < ActiveRecord::Base
  def instance_method
    # Foo
  end
end 
```

**2)**您可以在 ActiveRecord 模型本身上运行一些**类方法。**

```
ProgramSchedule.class_method

# Definition of this method in app/models/program_schedule.rb
class ProgramSchedule < ActiveRecord::Base
  def self.class_method
    # Bar
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T11:18:55.600

```
 def getScheduleFixed
    array = User.all.map(&:name)
    return array
  end 
```

# c# - 字节流中的双值传输

> ID：13137828
> 
> 赞同：0
> 
> 时间：2012-10-30T11:15:32.723
> 
> 标签：c#, c++, arrays, double

C++

```
unsigned char lbytes[] = { 0x0A, 0x01, 0x02 };
unsigned char bytes[10];

double dbl = sin((double)i) * 10; 

i+=5; if (i == 360) i = 0;

memcpy(&bytes, &lbytes, 3);
cout << dbl << endl;
memcpy(&bytes[3], &dbl, sizeof(double)); 
```

C＃

```
switch (m[1]) {
    case 0x01: {
        if (m.Length > 5) {
            double myval = Math.Round( BitConverter.ToDouble(m, 3), 2 ); 
```

但是这里出了点问题，myval 总是一些非常小的值，并且 rount 总是为 0。

问题是：我的错误在哪里，我可以在 cout 中看到有效值，我发送了 10 个字节，出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:33:53.113

问题是您只发送*了*十个字节。double 是*8 个*字节，加上您的 3 个字节的标头，这意味着您应该发送 11 个字节。

如果您调整`bytes`阵列并发送正确的长度，它应该可以工作。

# c# - 谷歌地图 API v3 没有响应

> ID：13137833
> 
> 赞同：1
> 
> 时间：2012-10-30T11:15:50.867
> 
> 标签：c#, javascript, asp.net

我是新来的。我正在尝试制作一个应用程序，使用谷歌地图 API 计算两个地址之间的距离和行驶时间。

我的问题是 google DirectionsService() 似乎没有响应。我想不通。我一直在努力弄清楚一个星期。

我希望你们能提供帮助。问题似乎出在 gmapApi.js

这是我的代码。
默认.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs"           Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<script type="text/javascript">
    function postbackObj() {
        var orig = document.getElementById('<%= txbOrigin.ClientID %>').value;
        var dist = document.getElementById('<%= txbDestination.ClientID %>').value;
        var temp = showLocation(orig, dist);
        __doPostBack('gmAPIObj',temp);
    }
</script>
    <script src="http://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript">< /script>
    <script type="text/javascript" src="gmapApi.js"></script>

</head>
<body>
<form id="form1" runat="server">
<div>
<asp:TextBox ID="txbOrigin" Text="" runat="server" />
<asp:TextBox ID="txbDestination" Text="" runat="server" />
<asp:Button ID="btnSubmit" runat="server" Text="Search" OnClientClick="postbackObj()"/>    

<p>
    < asp:Label runat="server" ID="lblPrint" />
</p>

</div>
</form>

</body>
</html> 
```

gmapApi.js

```
function showLocation(orig, dist) {
var directionService = new google.maps.DirectionsService();
var t = "";
var request = {
    origin: orig,
    destination: dist,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
};

directionService.route(request, function (response, status) {
    if (status != google.maps.DirectionsStatus.OK) {
        alert(status + "  \nreq. failed.");
    }
    else {
        t = request.origin + ';' + request.destination + ';' +  response.routes[0].legs[0].distance.value + ';' + response.routes[0].legs[0].duration.value;
    }
});

return t;
} 
```

响应变量为null，状态变量在directionService.route（request，function（response，status）中为空字符串我试图更改为无锁。我试图将标签放置在没有锁的body标签中。

呈现的 html 代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>

</title>
<script type="text/javascript">
    function postbackObj() {
        var orig = document.getElementById('txbOrigin').value;
        var dist = document.getElementById('txbDestination').value;
        var temp = showLocation(orig, dist);
        __doPostBack('gmAPIObj',temp);
    }
</script>
    <script src="http://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script>
    <script type="text/javascript" src="gmapApi.js"></script>

</head>
<body>
<form method="post" action="Default.aspx" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTE2MjMyMzMwNTZkZHxi8IJlhy7bL8nAZqZfL2Vh4Yr8uF80ja6jX9Ypc87B" />
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['form1'];
if (!theForm) {
theForm = document.form1;
}
function __doPostBack(eventTarget, eventArgument) {
if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
    theForm.__EVENTTARGET.value = eventTarget;
    theForm.__EVENTARGUMENT.value = eventArgument;
    theForm.submit();
}
}
//]]>
</script>

<div class="aspNetHidden">

<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION"   value="/wEWBALsorucDwLTmobsAwK0weWLAwLCi9reA32PxME86E6mQhRTgBkF7cdktbiURIpf/IzKvAs5PHwI" />
</div>
<div>
<input name="txbOrigin" type="text" value="tilst" id="txbOrigin" />
<input name="txbDestination" type="text" value="aarhus" id="txbDestination" />
<input type="submit" name="btnSubmit" value="Search" onclick="postbackObj();" id="btnSubmit" />    

<p>
    <span id="lblPrint"></span>
</p>

</div>
</form>

</body>
</html> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:51:15.510

请求directionService是一个异步过程，你在函数内部的变量t`showLocation`不会被调用修改`directionService.route()`

`__doPostBack('gmAPIObj',t)`而是从成功的回调中调用`directionService.route()`。

* * *

```
function postbackObj() {
    var orig = document.getElementById('txbOrigin').value;
    var dist = document.getElementById('txbDestination').value;
    showLocation(orig, dist);
}

//-----

function showLocation(orig, dist) {
var directionService = new google.maps.DirectionsService();
var t = "";
var request = {
    origin: orig,
    destination: dist,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
};

directionService.route(request, function (response, status) {
    if (status != google.maps.DirectionsStatus.OK) {
        alert(status + "  \nreq. failed.");
    }
    else {
        t = request.origin + ';' + request.destination + ';' +  response.routes[0].legs[0].distance.value + ';' + response.routes[0].legs[0].duration.value;
       __doPostBack('gmAPIObj',t);
    }
});
} 
```

# selenium-webdriver - 用于文件上传的 Autoit 脚本不适用于 selenium 脚本

> ID：13137834
> 
> 赞同：0
> 
> 时间：2012-10-30T11:15:52.897
> 
> 标签：selenium-webdriver, autoit

我有下面的 autoIT 脚本可以在 Firefox 中上传文件。当我手动运行 autoit 脚本时它工作正常。但是当我在我的自动化 selenum 脚本中使用它时它不起作用。

# 自动脚本

```
$title = WinGetTitle("File Upload") ; retrives whole window title
WinWait("[CLASS:#32770]")``
WinActive($title)
WinActivate($title)
WinWaitActive($title)
Sleep(700)
send("!n")
Sleep(800)
Send("F:\Projects\MergeServerProject\File\OfflineAgreemntDocuments\DOC\File-1.docx")
Sleep(800)
Send("!o") 
```

# 硒脚本

```
clickBrowserBtn(); //This function click on browse button in file upload control on FF
String[]templatenamenew=new String[] {"F:\\Projects\\f1\\scripts\\AutoIt\\FileUpload.exe"};
Runtime.getRuntime().exec(templatenamenew); 
```

# HTML 文件上传控件

# 笔记：

我也尝试使用 sendkey 功能，但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:34:38.670

我注意到这没有得到回答，但这应该在 C# 中工作（不确定 Java，但你没有指定语言）。此行出现在您的 selenium 脚本单击打开窗口的按钮/字段之后。

```
Process.Start(@"C:\<source>\upload_something.exe", @"C:\<source>\myfile.jpg"); 
```

希望能帮助到你！

# html - html表中的div覆盖放置

> ID：13137835
> 
> 赞同：1
> 
> 时间：2012-10-30T11:15:54.110
> 
> 标签：html, css

我在此处的页面上有一个表格元素，第一行配置有 colspan=2 和行内的 div，如下所示。出于某种原因，搜索元素将自己强制到页面顶部并完全在表格之外。我似乎无法追查为什么会发生这种情况，而不是像应该的那样在表格中显示。

示例网址：[http ://tinyurl.com/9rjd2ta](http://tinyurl.com/9rjd2ta)

```
 <table width="100%" border="0">
    <tbody>
    <tr>
    <td colspan="2">
    <div>my content</div>
    </td>
    </tr>
<tr><td>other content 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:26:24.430

我认为您的代码可能是这样的

```
<tr colspan="2">
<td >
<div>my content</div>
</td>

<td>other content</td> 
```

# php - 循环遍历特定的数组元素

> ID：13137837
> 
> 赞同：0
> 
> 时间：2012-10-30T11:16:01.207
> 
> 标签：php

我有一个表，每行包含 5 列，其中可能包含也可能不包含图像文件名。假设我已检索到该行并将其放入 assoc 数组中。我想循环并将这些图像文件名（cols 可能会或可能不会全部填充）回显到 html 标记中，但前提是该列中包含图像文件名。还有比这更好的方法吗？

```
for ($i = 1; $i < 6; $i++){
if($item_array['image_' . {$i}]{
echo "<li><img src=\"images/work-items/$item_array['image_' . {$i} . '.jpg'\"/></li>"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T11:19:37.080

你的语法到处都是：

```
for ($i = 1; $i < 6; $i++){
    if(isset($item_array['image_' . $i])){
        echo '<li><img src="images/work-items/'. $item_array['image_' . $i] . '.jpg"/></li>';
    }
} 
```

# wpf - 从滚动中排除控件

> ID：13137841
> 
> 赞同：1
> 
> 时间：2012-10-30T11:16:21.940
> 
> 标签：wpf

我有一种情况，`ScrollViewer`在基类 ( `Window`) 中设置并且我的用户控件被动态添加为窗口的内容。现在，我希望将`ToolBar`用户控件中的一个控件 ( ) 排除在滚动之外（以保持在顶部可见）。我知道类上有一个属性`HandlesScrolling`，`Control`但它是内部的。我无法将工具栏放在外面，`ScrollViewer`因为我无权访问它。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:14:47.493

我能想到的唯一方法是让你的控件大小自己到外部`ScrollViewer`，然后有自己的内部`ScrollViewer`来处理滚动。下面有一些示例代码，但关键是将`Height`您的控件绑定到`ActualHeight`外部控件，`ScrollerViewer`如下所示：`Height="{Binding Path=ActualHeight, RelativeSource={RelativeSource AncestorType={x:Type ScrollViewer}}}"`

外滚动查看器：

```
<ScrollViewer>
    <ListBox:HandlesItsOwnScrolling />
</ScrollViewer> 
```

您的控制：

```
<UserControl x:Class="ListBox.HandlesItsOwnScrolling"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300" Height="{Binding Path=ActualHeight, RelativeSource={RelativeSource AncestorType={x:Type ScrollViewer}}}" >
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Button Grid.Row="0">Toolbar</Button>
        <ScrollViewer Grid.Row="1">
            <Border Background="AliceBlue" Height="1000" />
        </ScrollViewer>
    </Grid>
</UserControl> 
```

# java - JfreeChart：需要去除stackedareachart中的垂直白线

> ID：13137843
> 
> 赞同：5
> 
> 时间：2012-10-30T11:16:23.697
> 
> 标签：java, charts, jfreechart

我创建了一个堆积面积图。在图表中出现垂直的白线。我需要删除垂直的白线。如何才能做到这一点。附上图片链接。

[![垂直线](../Images/b1a38743b761193583272714b4dc3f55.png)](https://i.stack.imgur.com/Hxac9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:44:10.500

看看[这个](http://www.jfree.org/phpBB2/viewtopic.php?t=16218)。该问题与抗锯齿效果有关。解决方案并不容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:38:10.123

Heyy Vegeta 现在你将在天空中飞翔......我有一个解决你问题的方法。

覆盖 StackedAreaRenderer 以在单个路径中绘制路径。基本上图表是通过组合两个多边形来绘制的，多边形是左右交替的，所以如果你制作左 = 右多边形，就不会有任何间隙。对我有用，你也试试。我希望你的老板现在会很高兴。

这是诀窍

```
GeneralPath left = new GeneralPath();
GeneralPath right = left; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-02T23:05:23.160

遵循以下几行：

```
JFreeChart objChart = ChartFactory.createStackedBarChart(
                title, 
                titleX, 
                titleY, 
                objDataset, 
                PlotOrientation.VERTICAL, 
                true, 
                true, 
                false 
);

CategoryPlot plot = (CategoryPlot) objChart.getPlot();

BarRenderer renderer = ((BarRenderer) plot.getRenderer());
renderer.setBarPainter(new StandardBarPainter()); 
```

StandardBarPainter 样式没有“白线”

# javascript - 使用 jquery 查找所选菜单选项的索引

> ID：13137849
> 
> 赞同：1
> 
> 时间：2012-10-30T11:16:32.923
> 
> 标签：javascript, jquery

我有一个选择菜单。我希望获得当前选择的选项的索引。`selected="selected"`在初始页面加载时，除非包含在 HTML 中，否则它将为零。如果稍后更改，索引将指示当前选择的选项。以下适用于我当前的浏览器，但我想确认这是否是最好的跨浏览器解决方案。

```
var i=$('#mySelectID').prop("selectedIndex"); 
```

笔记。当我展示`$('#mySelectID')`时，我的示例实际上循环了几个元素，所以确实如此`$(this)`，但我认为这没有任何区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T11:18:05.680

您也可以使用[`index()`](http://api.jquery.com/index/)方法：

```
var i = $("#mySelectID :selected").index(); 
```

这是跨浏览器，如果您没有选择任何选项，则会在页面加载时给出结果。

**演示：http:** [//jsfiddle.net/mZ9Dc/](http://jsfiddle.net/mZ9Dc/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T11:18:25.367

```
var selectedIndex = $('#mySelectID :selected').index(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T11:21:31.210

你也可以使用

```
var i=$('#mySelectID :selected').val();  //if you have given the values 
```

或者

```
var i=$('#mySelectID :selected').text(); //if you have used the text 
```

# architecture - 处理来自服务器的信息的最佳方式

> ID：13137850
> 
> 赞同：0
> 
> 时间：2012-10-30T11:16:36.113
> 
> 标签：architecture, xna, client-server

我正在开发一个 xna 游戏并遇到了一些问题。我开始只是从主循环中的服务器获取信息，如下所示：

```
player.X = client.GetInt32();
player.Y = client.GetInt32();
player.IsShooting = client.GetBoolean(); 
```

过了一会儿，我把这段代码移到了一个单独的类：ServerLayer。

起初 ServerLayer 包含播放器实例，但过了一段时间，ServerLayer 引用了地图和炸弹以及一堆其他东西。所以我决定将需要服务器信息的对象直接传递到这样的方法中：

在主循环中：

```
serverLayer.GetPosition(player); 
```

在服务器层中：

```
public void GetPosition(Player player) 
{
    player.X = client.GetInt32();
    player.Y = client.GetInt32();
    player.IsShooting = client.GetBoolean();
} 
```

这是正确的方法吗？一些方法（GetInit 等）需要很多参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:26:44.143

对我来说看起来是正确的方法，我唯一看到的是方法的名称，也许它应该是 UpdatePosition 而不是 GetPosition。

您使用套接字将数据从客户端传输到服务器？如果您在每个 GetPosition 调用中发送一个数据包（您在主循环中调用它，所以在每一帧）它可能在生产环境中非常滞后

也许你可以每 80/100 毫秒调用一次

# mvvm - MVVM 事件到命令

> ID：13137854
> 
> 赞同：0
> 
> 时间：2012-10-30T11:16:57.497
> 
> 标签：mvvm, eventtocommand

嗨朋友，我正在开发**MVVM WPF 应用程序**，我需要执行**TelerikRadTab** Control **SelectionChanged**事件的事件，我知道使用 MVVM 灯使用 EventToCommand 行为很简单，但是因为我使用的是 MVVM 框架（[链接](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)），所以我必须使用交互触发建议[@Link](http://geekswithblogs.net/lbugnion/archive/2009/11/05/mvvm-light-toolkit-v3-alpha-2-eventtocommand-behavior.aspx)。

对于下面我添加了交互 dll 参考

```
C:\Program Files (x86)\Microsoft SDKs\Expression\Blend\Silverlight\v4.0 
```

在 XAML 中我包括

```
xmlns:I="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity

<i:Interaction.Triggers>
    <i:EventTrigger EventName="SelectionChanged">
     <Command:ChangePropertyOnTarget
          Target="{Binding}" PropertyName="SelectedItems"
          Value="{Binding SelectedItems, ElementName=ItemsToChoose}" />
    </i:EventTrigger>
  </i:Interaction.Triggers> 
```

当我构建应用程序时，出现以下错误。

[XML 命名空间“链接](http://schemas.microsoft.com/winfx/2006/xaml/presentation)”中不存在属性“事件名称”。

对此的任何建议或帮助都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:00:37.803

我正在使用 mvvm light 但不需要经常使用事件来命令功能。我以稍微不同的方式管理了与您相同的功能：

```
<telerik:RadTabControl Template="{StaticResource TabControlTemplate}" 
                ItemsSource="{Binding TabbedViewModels }" SelectedItem="{Binding ActiveTabbedViewModel, Mode=TwoWay}"
                ItemTemplate="{StaticResource TabItemTemplate}" Style="{StaticResource RadTabControlStyleBorderless}" /> 
```

所以在主窗口视图模型上，我有一组视图模型，每个选项卡项目一个，我绑定到作为控件的项目源。然后我将选定项绑定到主视图模型上的属性。然后在该属性的设置器中，我可以执行我在 SelectionChangedEvent 中需要执行的任何特定操作。在我的情况下，选项卡的视图模型是根据用户启动的内容动态加载的，并且每个视图模型都可能完全不同，因此它们都继承自一个公共基类，尽管您也可以使用接口。因此，该集合是该 bas 类的 ObservableCollection，并且 selectedItem 绑定到的 ActiveTabbedViewModel 属性也是该类型。

可能适合也可能不适合您的场景，但是通过使用这种方法，我不需要任何交互触发器

编辑：更详细一点 - 恐怕我不知道有一个博客可以指点你，所以将更多地解释一下我是如何处理这个问题的

所以 MainPage.xaml 带有 TabControl 和内容框架。MainPageViewModel 是主页的视图模型。它有一个名为 TabbedViewModels 的属性，它是 TabbedWindowViewModelBase 的 ObservableCollection（我为此目的创建的一个类）

```
 /// <summary>
    /// Gets or sets a collection of TabbedViewModels - each one will be represented by a tab on the top bar of the main window
    /// </summary>
    public ObservableItemCollection<CastleTabbedWindowViewModelBase> TabbedViewModels
    {
        get
        {
            return this.tabbedViewModels;
        }

        set
        {
            this.tabbedViewModels = value;
            this.RaisePropertyChanged(() => this.TabbedViewModels);
        }
    }

        /// <summary>
    /// Gets or sets the Active Tab - is bound to the Tab bars SelectedItem - when changing to
    /// another tab / view model it sets the page menu item to the correct one for that view model
    /// </summary>
    public CastleTabbedWindowViewModelBase ActiveTabbedViewModel
    {
        get
        {
            return this.activeTabbedViewModel;
        }

        set
        {
            this.activeTabbedViewModel = value;
            this.RaisePropertyChanged(() => this.ActiveTabbedViewModel);

            if (value != null)
            {
                // when the active tab has changed want to ensure we open the previously opened page that the new tab was on
                value.DoSomething();
            }
        }
    } 
```

在这一点上，这取决于您的场景有多复杂。如果您有相同的视图但只是更改数据，那么您的视图可以绑定到 ActiveTabbedViewModel，因为这会引发 propertychanged 事件，它将自动刷新绑定并显示与新选项卡相关的数据。您可以使用子视图模型上的 DoSomething 来最初加载它的数据 - 您只需执行一次，除非您想刷新它。

根据您的描述，解决此问题的一种方法是在下面创建 TabbedWindowViewModel 类：`

```
public class TabbedWindowViewModel :ViewModelBase
{
    private RelayCommand<NavigationEventArgs> navigationCommand;

    /// <summary>
    /// Gets or sets the position /order that this tab item is relative to the other tab items
    /// </summary>
    public int MenuOrder { get; set; }

    /// <summary>
    /// Gets or sets the Navigation Id
    /// </summary>
    public int NavigationId { get; set; }

    /// <summary>
    /// Gets or sets the Title that will be displayed for this tab item
    /// </summary>
    public string Title { get; set; }

    /// <summary>
    /// Gets or sets the navigation target that will be navigated to when the tab item is clicked
    /// </summary>
    public string NavigationTarget { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether the tab item is enabled
    /// </summary>
    public bool IsEnabled { get; set; }

    /// <summary>
    /// Gets the command for regular navigation.
    /// </summary>
    public virtual ICommand NavigationCommand
    {
        get
        {
            return this.navigationCommand
                   ??
                   (this.navigationCommand =
                    new RelayCommand<NavigationEventArgs>(
                        this.ExecuteNavigationCommand, x => this.IsEnabled));
        }
    }

   public void DoSomething()
   {
       //do whatever you need to
       //then navigate to the correct page
       this.NavigationCommand.Execute(null);

   }

    private void ExecuteNavigationCommand(NavigationEventArgs e)
    {
        NavigationManager.NavigateToView(this.NavigationTarget);
    }

} 
```

请注意，NavigationManager 是一个帮助导航的静态助手类。然后，您可能导航到的每个视图都将从 MainPage 继承数据上下文 - 因此您有两个选择 - 您可以在 TabbedWindoViewModel 上拥有一个 DataViewModel 属性，并通过 ActiveTabbedWindow.DataViewModel 将所有内容绑定到该属性。或者，像我们一样，在主视图模型上为每个子视图模型设置一个属性，并直接绑定到该属性：

```
 public SummaryViewModel SummaryViewModel
    {
        get
        {
                  return this.summaryViewModel
                  ?? (this.summaryViewModel = (SummaryViewModel)ViewModelFactory.GetPageViewModel<SummaryViewModel>());
        }
    } 
```

希望这可以帮助...

# c++ - 没有制定目标的规则：代码块

> ID：13137858
> 
> 赞同：2
> 
> 时间：2012-10-30T11:17:16.723
> 
> 标签：c++, linux, codeblocks

我已经在 Ubuntu Linux 12.10 上安装了 Code::Blocks 并尝试使用 Openframeworks 的示例。我在 Code::Blocks 中编写的 HelloWorld 和其他程序构建并运行良好。

但是，当我在 Code::Blocks 中打开`empty example`OpenFrameworks 的 Code::Blocks 工作区并尝试构建它时，我收到一条错误消息`No rule to make target ../../../libspoco/lib/linux64/libPocoNet.a needed by bin/emptyExample_debug`

我检查了相对路径，没有名为 的文件夹`linux64`，但只有一个名为 的文件夹`linux`，也许这就是我在尝试构建时遇到此错误的原因。我的问题是如何更改此规则？这个 linux64 问题可能也存在于其他项目中，是否有一个通用的地方可以将其更改为 'linux' 而不是 'linux64'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:35:01.860

检查您的机器和代码块是否都具有相同的位。避免这种冲突的最简单方法之一是从 ubuntu 软件中心安装代码块。

# android - cursor.requery() -错误

> ID：13137868
> 
> 赞同：0
> 
> 时间：2012-10-30T11:18:01.870
> 
> 标签：android, cursor, simplecursoradapter

我如何更新光标数据？cursorComp.requery() - 导致错误

代码：

```
 void someTask() {
 try
 {
 JSONArray jArray = new JSONArray(result);
 for(int i=0;i<jArray.length();i++) 
  {
     JSONObject json_data = jArray.getJSONObject(i);
     extId = json_data.getString("id");
     nameComp = json_data.getString("name");
    db.addRec(nameComp,extId,compDescription,minPrice);
    //update cursor
    cursorComp.requery(); //This line generates an error
  }
 }
 } 
```

# javascript - Symfony2 使用动态 javascript 路由 - 或者 - 安装 FOSJsRoutingBundle

> ID：13137875
> 
> 赞同：0
> 
> 时间：2012-10-30T11:18:22.037
> 
> 标签：javascript, symfony, twig, symfony-2.1

我试图找到处理通过使用 Symfony2 的 AJAX 调用生成的动态路由的最佳方法。

进行新调用时，我需要当前路径可用，以及一些传递到路径中的动态变量。

本质上是[这个](https://stackoverflow.com/questions/7626792/generating-routes-in-javascript-with-twig-and-symfony2)。

一些答案建议将路线放入每个模板中的变量中，例如

```
 <script type="text/javascript">
    var productPath = {{ path("acme_myBundle_default_product" , {"magazine" : "bobscheese" , "product" : "chedderfornoobs"}) }};
</script> 
```

这里的问题是，路径依赖于在运行时不存在的变量（即 $magazine 和 $product）。

一个完美的解决方案似乎是[FOSJsRoutingBundle](https://github.com/FriendsOfSymfony/FOSJsRoutingBundle/blob/master/Resources/doc/README.markdown)，但安装似乎不是最新的 Symfony2 。

安装运行良好`git submodule add git://github.com/FriendsOfSymfony/FOSJsRoutingBundle.git vendor/bundles/FOS/JsRoutingBundle`

但后来我认为自述文件的其余部分已经过时，之后它给了我一个空白屏幕，日志中没有错误。

所以我的问题是，如何在 Symfony2.1.3 中安装 FOSJsRoutingBundle，或者如何最好地在 Symfony2 中处理客户端生成的 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:54:35.617

FOSJsRoutingBundle 在我的环境（2.1.3）中可以正常使用。路由会出错吗？

设置好了吗？

```
acme_myBundle_default_product:
    pattern:  // ...
    defaults: // ...
    options:
        expose: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:34:55.693

我刚下楼

```
<script type="text/javascript">
    var basePath = 'http://www.mybaseurl.com';
</script> 
```

路线。没有那么充实，但在这种情况下为我工作。

# android - 如何在 android 应用程序中集成谷歌分析以及如何查看 GA 的仪表板？

> ID：13137881
> 
> 赞同：1
> 
> 时间：2012-10-30T11:18:56.610
> 
> 标签：android

我已经在我的应用程序中集成了 GA，但仍然无法在 GA 仪表板上获取任何数据。任何人都可以解释如何做到这一点。不要添加任何链接，我已经检查过所有有关此的网站。

```
public void onCreate(Bundle savedInstanceState) 
 {
   tracker=GoogleAnalyticsTracker.getInstance();
   tracker.startNewSession("id",this);
   tracker.trackPageView("page");
   boolean isTracker = tracker.dispatch();
   Log.v(TAG, "isTracker   "+isTracker);
 }

 @Override
    protected void onDestroy() 
 {
    super.onDestroy();
    tracker.stopSession();
    Log.v("newslistView","onDestory()");
  } 
```

谢谢你。

# emacs - 如何使用 Emacs 自动完成/片段？

> ID：13137883
> 
> 赞同：2
> 
> 时间：2012-10-30T11:19:01.740
> 
> 标签：emacs, configuration, autocomplete, code-snippets, emacs24

我一直在使用[emacs-live](https://github.com/overtone/emacs-live)，真是太棒了！

我只是不知道如何使用自动完成/片段，弹出建议，你可以循环浏览选项，但是你如何选择一个选项。

我已经尝试了很多事情来让它应用选择，但似乎没有任何效果，这让我发疯。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:18:49.710

我似乎通过拉取最新版本的配置解决了这个问题。不知道我改变了什么或改变了什么，但它现在正在工作。

四处挖掘我找到了一个插件[手册：](https://github.com/overtone/emacs-live/blob/master/packs/live/clojure-pack/lib/auto-complete/doc/manual.txt)

```
### Summary ###

Completion will be started by inserting characters. After completion is started,
operations in the following table will be enabled temporarily. After completion
is finished, these operations will be disabled.

| Key       | Command     | Description               |
|-----------|-------------|---------------------------|
| TAB, C-i  | ac-expand   | Completion by TAB         |    
| RET, C-m  | ac-complete | Completion by RET         |
| down, M-n | ac-next     | Select next candidate     |
| up, M-p   | ac-previous | Select previous candidate |
| C-?, f1   | ac-help     | Show buffer help          |

To stop completion, simply use `C-g`. 
```

# javascript - 如何在 XPages 中获取 MSWord 文档内容

> ID：13137885
> 
> 赞同：2
> 
> 时间：2012-10-30T11:19:07.620
> 
> 标签：javascript, xpages

再会。有人可以告诉我如何通过 Javascript 从 XPages 中的 NotesDocument 获取 MSWord_File_Content 并将其放入 RichText 字段中吗？我正在尝试不将 MSWord 文件提取到 temp_local_directory 中。有可能还是我必须提取它并在本地工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:20:26.897

拉玛我想你有一个词附件。您可以使用 EmbeddedObject.getInputStream 来获取文件内容。然后，您需要使用[Apache POI](http://poi.apache.org/)来访问文档内容。然后使用[word2HtmlConverter](https://stackoverflow.com/questions/8242407/using-wordtohtmlconverter-converter-in-apache-poi)将您的文档转换为 HTML，然后您就可以在 RichText 中显示了。聪明点，将 RichText 字段指定为“保存在 MIME 中”，这样可以正确保留所有 HTML。您可能想为此使用 bean。

如果您的 Word 文档是 OLE 对象，那么您可能对 POI 也很幸运，但我从未对此进行过测试。让我们知道怎么回事。

# c# - 在 ListBox.Items 更改后引发事件

> ID：13137892
> 
> 赞同：0
> 
> 时间：2012-10-30T11:19:40.590
> 
> 标签：c#, windows-phone-7, listbox

任何人都知道如何在 ListBox 重绘时引发事件。我正在尝试有条件地屏蔽一列中的内容，但条件检查似乎是在绘制列表框之前完成的，因此屏蔽不起作用，因为没有什么可以屏蔽：

```
 /// <summary>
    /// Locks or unlocks the quantity textbox based on 100% flour and activates or deactivate weights
    /// </summary>
    private void activatePieceQuantity()
    {
        if (isFlour100Percent())
        {
            ((TextBox)NumberOfItemsTextBox as TextBox).IsEnabled = true;
            weightsActive(true);
        }
        else
        {
            ((TextBox)NumberOfItemsTextBox as TextBox).IsEnabled = false;
            weightsActive(false);
        }
    }

    /// <summary>
    /// Send controls to search with control name and activate or deactivate flag
    /// </summary>
    /// <param name="activate"></param>
    private void weightsActive(bool activate)
    {
        int locationInList = 0;
        foreach (RecipieIngredient ri in activeRecipie.RecipieIngredients)
        {
            SearchTree(this.IngredientsListBox.ItemContainerGenerator.ContainerFromIndex(locationInList), "QuanityWeight", activate);
            locationInList++;
        }
    }

    /// <summary>
    /// Find all weight related objects in the ingredients list and set the visibility accordingly
    /// </summary>
    /// <param name="targetElement"></param>
    /// <param name="flagName">Derived from the Tag of the textbox</param>
    /// <param name="enableFlag"></param>
    private void SearchTree(DependencyObject targetElement, string flagName, bool enableFlag)
    {
        if (targetElement == null)
            return;
        var count = VisualTreeHelper.GetChildrenCount(targetElement);
        if (count == 0)
            return;

        for (int i = 0; i < count; i++)
        {
            var child = VisualTreeHelper.GetChild(targetElement, i);
            if (child is TextBlock)
            {
                TextBlock targetItem = (TextBlock)child;

                if (targetItem.Name == flagName)
                    if (enableFlag)
                    {
                        ((TextBlock)targetItem as TextBlock).Visibility = Visibility.Visible;
                        return;
                    }
                    else
                    {
                        ((TextBlock)targetItem as TextBlock).Visibility = Visibility.Collapsed;
                    }
            }
            else
            {
                SearchTree(child, flagName, enableFlag);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:21:48.717

我现在明白了，问题是调用 SearchTree 函数时没有绘制 ListBox，因此从来没有任何 DependencyObject 可以传递给它。

我通过在代码中放置一个标志来表示检查已经完成，然后从 LayoutUpdated 事件中调用掩码函数来解决了这个问题（在我看来有点骇人听闻）

```
 private void IngredientsListBox_LayoutUpdated(object sender, EventArgs e)
    {
        if (ingredientsListLoaded)
        {
            activatePieceQuantity();
            ingredientsListLoaded = false;
        }
    } 
```

# c - 如何从终端分离程序并将其附加回来？

> ID：13137893
> 
> 赞同：5
> 
> 时间：2012-10-30T11:19:42.463
> 
> 标签：c, linux, terminal, embedded-linux, multiplexing

我正在开发一个嵌入式项目，我需要一个没有外部依赖项的程序，如 screen 或 tmux。这两个程序不好，因为它们需要其他库。

由于我只需要分离一个程序，能够在我再次登录时注销并恢复它，我想知道我是否可以为此编写一个小程序。

您知道我需要执行哪些调用（在 C 中）来分离程序并将其恢复吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T12:16:22.230

如果我正确理解您的要求，理论上您可以使用 termios struct 和 ioctl 来实现这一点。

```
ioctl(0, TIOCNOTTY, NULL); 
```

分离和

```
ioctl(0, TIOCSCTTY, 1); 
```

连接回终端。但是，它实际上并没有执行这项工作。

以下解决方案描述了一个不太好的但实用的解决方法

[tty破乳](http://blog.habets.pp.se/2009/03/Moving-a-process-to-another-terminal)

主要目的是将程序附加到另一个终端，但我相信这也是您实现目标的方式。

关于您提到的嵌入式平台，您也许可以从[busybox中找到一些帮助](http://www.busybox.net/downloads/BusyBox.html)

它使用非常小的二进制文件为嵌入式 linux 编译，并包含大多数常用的 linux 实用程序，例如 getty、stty 等。

# python - Django ORM：按相关表过滤器的聚合排序

> ID：13137894
> 
> 赞同：0
> 
> 时间：2012-10-30T11:19:43.443
> 
> 标签：python, sql, django, orm, django-models

这是我的模型的一个子集：

```
class Case(models.Model):
    ... # primary key is named "id"
class Employee(models.Model):
    ... # primary key is named "id"
class Report(models.Model):
    case = ForeignKey(Case, null=True)
    employee = ForeignKey(Employee)
    date = DateField() 
```

给定一个特定的员工，我想生成一个所有案例的列表，按员工最近报告的时间排序。那些没有报告的案例应该排在最后。同一日期的案例（包括 NULL）应按进一步的标准排序。

我可以在 Django ORM api 中表达这个吗？如果是这样，怎么做？

在伪 SQL 中，我想我想要

```
Select Case.*
From Case some-kind-of-join Report
Where report.employee_id = the_given_employee_id
Group by Case.id
Order by Max(Report.date) Desc /* Report-less cases last */, Case.id /* etc. */ 
```

我是否需要通过 Report 引入从 Case 到 Employee 的多对多关系才能在 Django ORM 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:21:47.553

django 模型中的每个关系都有[一个可以轻松查询的反向关系](https://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward)（包括在您订购时），因此您可以执行以下操作：

```
Case.objects.all().order_by('-report__date', 'another_field', 'a third field') 
```

但这不会为您提供有关单个特定员工的任何信息。你可以这样做：

```
Case.objects.filter(report__employee__pk=5).order_by('-report__date', 'another_field', 'a third field') 
```

但这不会返回`Case`您的特定员工未编辑的任何对象。

所以不幸的是，您不能在本地进行子查询，因此您必须编写自定义注释查询以便执行子查询（即，特定员工最后编辑的那些对象的最后订购日期）。这是未经测试的，但这是一般的想法：

```
Case \
    .objects \
    .all() \
    .extra(select = {
        "employee_last_edit" : """
            SELECT app_report.date
            FROM app_report
                JOIN app_case ON app_case__id = app_report.case_id
            WHERE app_report.employee_id = %d
        """ % employee.id }) \
    .order_by('-employee_last_edit' , 'something_else') 
```

# html - 带最小高度的动态内容高度

> ID：13137904
> 
> 赞同：0
> 
> 时间：2012-10-30T11:20:24.550
> 
> 标签：html, css

我正在编写一个小浏览器游戏来提高我的网络技能，但我陷入了布局问题。我的游戏页面由页眉、内容和页脚组成，其中两个分隔符之间有一个背景图像。content-div 应该垂直拉伸，以便使用视图的整个空间。如果内容比浏览器高，则应使用滚动条进一步拉伸。高度正确很重要，因为我使用渐变填充作为背景，这不应该在某些时候重复。我想我可以用 height:auto 来实现这个，用于大尺寸的内容，而 min-height:100% 用于小尺寸的内容。但这不起作用。我阅读了几个论坛帖子，但没有任何效果。请问你能帮帮我吗？我的推理错误在哪里？

HTML：（br 用于超大页面）

```
<html>
<head>
  <link rel="stylesheet" type="text/css" href="mycss.css">
</head>
<body>
  <div class="center">
    <div class="header">
      Header
    </div>
    <div class="spacer"></div>
    <div class="main">
      Content
      <!--<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
            <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>-->
    </div>
    <div class="spacer"></div>
    <div class="footer">
      Footer
    </div>
  </div>
</body>
</html> 
```

CSS：

```
html,body {
    margin:0px;
    padding:0px;
    height: auto;
    min-height: 100%;
}

body {

    background: rgb(122,188,255); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(122,188,255,1) 0%, rgba(96,171,248,1) 44%, rgba(64,150,238,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(122,188,255,1)), color-stop(44%,rgba(96,171,248,1)), color-stop(100%,rgba(64,150,238,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(122,188,255,1) 0%,rgba(96,171,248,1) 44%,rgba(64,150,238,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(122,188,255,1) 0%,rgba(96,171,248,1) 44%,rgba(64,150,238,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(122,188,255,1) 0%,rgba(96,171,248,1) 44%,rgba(64,150,238,1) 100%); /* IE10+ */
    background: linear-gradient(top,  rgba(122,188,255,1) 0%,rgba(96,171,248,1) 44%,rgba(64,150,238,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#7abcff', endColorstr='#4096ee',GradientType=0 ); /* IE6-9 */

}

.center {
    height: auto;
    min-height: 100%;

    width:1024px;
    margin-left:auto;
    margin-right:auto;
    text-align:left;

    box-shadow: 0px 0px 20px 0px #000;

    background: rgb(181,189,200); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(181,189,200,1) 0%, rgba(130,140,149,1) 36%, rgba(117,117,117,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(181,189,200,1)), color-stop(36%,rgba(130,140,149,1)), color-stop(100%,rgba(117,117,117,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(181,189,200,1) 0%,rgba(130,140,149,1) 36%,rgba(117,117,117,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(181,189,200,1) 0%,rgba(130,140,149,1) 36%,rgba(117,117,117,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(181,189,200,1) 0%,rgba(130,140,149,1) 36%,rgba(117,117,117,1) 100%); /* IE10+ */
    background: linear-gradient(top,  rgba(181,189,200,1) 0%,rgba(130,140,149,1) 36%,rgba(117,117,117,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b5bdc8', endColorstr='#757575',GradientType=0 ); /* IE6-9 */

}

.spacer{
    min-height:16px;
    background-image: url(Absperrband.png);
    background-repeat: repeat;
    -webkit-box-shadow: 0px 0px 5px 0px #000;
            box-shadow: 0px 0px 5px 0px #000;
}

.header {
    padding : 8px;
    height:70px;
}

.main{
    min-height: 100%;
    padding : 12px;
}

.footer{
    padding : 12px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:21:34.497

听起来您正在寻找“粘性页脚”效果。

[http://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:28:37.980

html, body 应该是`height:100%`并且你的主 div (.center) 应该有`min-height:100%; height:auto`

[**演示**](http://jsfiddle.net/LDcuZ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:07:16.733

添加`display:inline-block;`到`body`and`.center` 并查看结果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T10:44:04.047

添加`display:inline-block;text-align:center;`到`body` 和`display:inline-block;text-align:left;`_`.center`

希望它可以解决我的答案

# sql - Doctrine2 中的 JOIN ON 和 JOIN WITH 有什么区别？

> ID：13137908
> 
> 赞同：11
> 
> 时间：2012-10-30T11:20:40.213
> 
> 标签：sql, join, doctrine-orm, dql

Doctrine2 中的 JOIN ON 和 JOIN WITH 有什么区别？

我在手册中找不到任何相关信息。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T11:23:07.587

`ON`替换原始连接条件，
`WITH`为其添加条件。

* * *

**示例**：

```
[Album] ---OneToMany---> [Track] 
```

1.  案例一

    **DQL**

    ```
    FROM Album a LEFT JOIN a.Track t WITH t.status = 1 
    ```

    **将在 SQL 中翻译**

    ```
    FROM Album a LEFT JOIN Track t ON t.album_id = a.id AND t.status = 1 
    ```

2.  案例二

    **DQL**

    ```
    FROM Album a LEFT JOIN a.Track t ON t.status = 1 
    ```

    **将在 SQL 中翻译**

    ```
    FROM Album a LEFT JOIN Track t ON t.status = 1 
    ```

# plone - z3c.form and Javascript subform CRUD widget for Plone

> ID：13137909
> 
> 赞同：1
> 
> 时间：2012-10-30T11:20:40.473
> 
> 标签：plone, z3c.form

I need a widget which has add/remove of subforms via Javascript (create-read-update-delete).

It would be similar to DataGridField, but instead of having lines it would present subforms as blocks.

A jQuery plug-in example: [http://vipullimbachiya.com/jQuery/Plugins/MultiField/SampleMultiField.htm#example](http://vipullimbachiya.com/jQuery/Plugins/MultiField/SampleMultiField.htm#example)

Does z3c.form or Plone has this kind of subform CRUD widgets already? The main thing would be implement this 100% on the client side, without HTTP postback when you press add/remove buttons.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:35:27.933

有[`plone.z3cform.crud`](http://pypi.python.org/pypi/plone.z3cform)/ [`plone.app.z3cform.crud`](http://pypi.python.org/pypi/plone.app.z3cform)：

```
class IOneEntry(interface.Interface):
    # Schema definition

class MainForm(crud.CrudForm):
    update_schema = IOneEntry

    def get_items(self):
        # return items implementing IOneEntry

    def add(self, data):
        # Add one IOneEntry object

    def remove(self, (id, data)):
        # Remove one IOneEntry object 
```

但这*不*使用 AJAX 添加条目。

# r - Rd file name conflict when extending a S4 method of some other package

> ID：13137912
> 
> 赞同：58
> 
> 时间：2012-10-30T11:20:57.607
> 
> 标签：r, generics, package, s4, roxygen2

## Actual question

How do I avoid Rd file name conflicts when

1.  a S4 generic and its method(s) are **not** necessarily all defined in the same package (package containing (some of) the custom method(s) depends on the package containing the generic) **and**
2.  using `roxygenize()` from package [roxygen2](http://cran.r-project.org/web/packages/roxygen2/index.html) to generate the actual Rd files?

I'm not sure if this is a `roxygen2` problem or a common problem when the generic and its method(s) are scattered across packages (which IMHO in general definitely is a realistic use-case scenario if you follow a modular programming style).

**What's the recommended way to handle these situations?**

## Illustration

**In package `pkga`**

Suppose in package `pkga` you defined a generic method `foo` and that you've provided the respective roxygen code that `roxygenize()` picks up to generate the Rd file:

```
#' Test function
#' 
#' Test function.
#' 
#' @param ... Further arguments.
#' @author Janko Thyson \email{janko.thyson@@rappster.de}
#' @example inst/examples/foo.R
#' @docType methods
#' @rdname foo-methods
#' @export

setGeneric(
    name="foo",
    signature=c("x"),
    def=function(
         x,  
        ...
    ) {
    standardGeneric("xFoo")       
    }
) 
```

When `roxygenizing()` your package, a file called `foo-methods.Rd` is created in the `man` subdirectory that serves as the reference Rd file for all methods that might be created for this generic method. So far so good. If all of the methods for this generic are also part of your package, everything's good. For example, this roxygen code would make sure that documentation is added to `foo-methods.Rd` for the `ANY`-method of `foo`:

```
#' @param x \code{ANY}.
#' @return \code{TRUE}.
#' @rdname foo-methods
#' @aliases foo,ANY-method
#' @export

setMethod(
    f="foo", 
    signature=signature(x="ANY"), 
    definition=cmpfun(function(
        x,
        ...
    ) {
    return(TRUE)
    }, options=list(suppressAll=TRUE))
) 
```

However, if package `pkga` provides the generic for `foo` and you decide in some other package (say `pkgb`) to add a `foo`-method for `x` being of class `character`, then `R CMD check` will tell you that there is a name clash with respect to Rd file names and/or aliases (as there already exists a Rd file `foo-methods.Rd` in `pkga`):

**In package `pkgb`**

```
#' @param x \code{character}.
#' @return \code{character}.
#' @rdname foo-methods
#' @aliases foo,character-method
#' @export

setMethod(
    f="foo", 
    signature=signature(x="character"), 
    definition=cmpfun(function(
        x,
        ...
    ) {
    return(x)
    }, options=list(suppressAll=TRUE))
) 
```

To be more precise, this is the error that's thrown/written to file `00install.out`

```
Error : Q:/pkgb/man/foo-methods.Rd: Sections \title, and \name must exist and be unique in Rd files
ERROR: installing Rd objects failed for package 'pkgb' 
```

## Due dilligence

I tried to change the values for `@rdname` and `@aliases` to `foo_pkgb*` (instead of `foo*`), but `\title` and `\name` still are set to `foo` when roxygenizing and thus the error remains. Any ideas **besides manually editing the Rd files** generated by `roxygenize()`?

* * *

## EDIT 2012-12-01

In light of starting the bounty, the actual question might get a slightly broader flavor:

**How can we implement some sort of an "inter-package" check with respect to Rd files and/or how can we consolidate S4 method help files scattered across packages into one single Rd file in order to present a single source of reference to the end-user?**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T15:05:58.953

基本问题确实是“roxygenize”-only。这就是为什么我从来没有看到过这个问题。

虽然包开发的 roxygenizing 方法有充分的理由，但我仍然看到一个很好的理由**不去**那里：

## 请求减少极端的氧化作用

生成的帮助页面往往看起来**非常**无聊，不仅是自动生成的 *.Rd 文件，还有渲染的结果。例如

1.  示例通常很少，不包含注释，通常格式不正确（使用空格、/换行/..）
2.  数学问题很少通过 \eqn{} 或 \deqn{} 来解释
3.  \describe{ .. } 和类似的高级格式很少使用

这是为什么？因为

1）阅读和编辑 roxygen 评论比在 ESS 或 Rstudio 或（其他内置 *.Rd 支持的 IDE）中阅读和编辑 *.Rd 文件更“麻烦”或至少在视觉上没有回报

2）如果您使用该文档

> 是在你的包构建/检查结束时自动生成的东西

您通常倾向于不将写得好的 R 文档视为重要的东西（而是您的 R 代码，所有文档都*只是*评论:-)

所有这一切的结果：人们更喜欢在小插曲甚至博客、github gists、youtube 视频或...中编写有关其功能的文档，这些文档在创作时非常好，但与代码和绑定几乎无关变得过时和枯萎（因此，通过谷歌搜索**误导**你的用户）--> roxygen 将代码和文档放在同一个地方的最初动机完全被打败了。

我喜欢 roxygen 并在创建新函数时广泛使用它……只要我的函数不在包中**或未**导出，我就会保留并维护它。一旦我决定导出它，我会运行一次（相当于 ESS 的）roxygenize() **，** 然后承担维护格式良好的 *.Rd 文件的额外*负担*，包含自己的注释（对于我作为作者） ，有很多很好的例子，有自己的版本控制（git / svn / ...）历史等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-24T12:12:26.733

我设法为 S4 方法生成 NAMESPACE 和 *.Rd 文件，用于在我的另一个包中定义的泛型。

我采取了以下步骤：

1.  手动创建 NAMESPACE 作为[已知 roxygen2 错误](https://stat.ethz.ch/pipermail/r-package-devel/2015q3/000456.html)的解决方法。

    手写一个 NAMESPACE 一点也不难！

    在 RStudio 中关闭 roxygen2 生成的 NAMESPACE：

    ```
    Build > more > Configure build tools > configure roxygen > do not use roxygen2 to generate NAMESPACE. 
    ```

2.  [导入包含泛型的包并使用 exportMethods 导出 S4 方法](https://stackoverflow.com/questions/28301188/r-when-to-use-setgeneric-or-export-a-s4-method-in-the-namespace)。

3.  为每个 S4 方法编写单独的 roxygen2 文档。不要合并 roxygen2 文档（就像我通常对相同泛型的不同方法所做的那样）。

4.  将显式 roxygen 标签 @title 和 @description 添加到 S4 方法的 roxygen 文档中。显式编写@description，即使它的值与@title 相同。

这使它对我有用。

# asp.net-mvc - Accessing the exception if custom redirection redirects to a controller

> ID：13137914
> 
> 赞同：0
> 
> 时间：2012-10-30T11:21:07.297
> 
> 标签：asp.net-mvc, http, error-handling

I am using MVC4, and would like to be able to throw HttpExceptions from a ontroller, and handle those in a seperate controler.

I have set up `<customErrors mode="On" defaultRedirect="/Error"/>` for this. This works, but in my controller I would like to be able to access the exception.

Preferably I would like to have two modes:

1.  Handle instances of HttpException, so that from a controller I can throw a HttpException and have it handled accordingly

2.  Handle all other errors.

in case of the first, I would like to present the useragent with the appropriate status code, and possibly a view. In case of the second I want to present the useragent with status 500, and show a default view with an optional message.

For this, I think I need to access the exception data - at least, I can't think of any other proper way to do this.

What is the proper way to set this up? I know there are plethoria of other questions on error handling in MVC, yet none seem to answer these questions.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:00:08.523

```
 but in my controller I would like to be able to access the exception. 
```

Have you tried [Server.GetLastError](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.getlasterror.aspx):

```
Exception ex = Server.GetLastError(); 
```

Server.GetLastError() - should be used in Application_Error in global.asax, in that case you can handle last error like [described here](http://forums.asp.net/t/1751599.aspx/1), besides you should remove

```
filters.Add(new HandleErrorAttribute()); 
```

in FilterConfig.cs

for more info look at:

[Application_Error not firing when customerrors = "On"](https://stackoverflow.com/questions/6508415/application-error-not-firing-when-customerrors-on)

[ASP.NET custom error page - Server.GetLastError() is null](https://stackoverflow.com/questions/343014/asp-net-custom-error-page-server-getlasterror-is-null)

[http://www.secretgeek.net/custom_errors_mvc.asp](http://www.secretgeek.net/custom_errors_mvc.asp)

[http://devstuffs.wordpress.com/2010/12/12/how-to-use-customerrors-in-asp-net-mvc-2/](http://devstuffs.wordpress.com/2010/12/12/how-to-use-customerrors-in-asp-net-mvc-2/)

# python - 单元测试嵌入式python

> ID：13137917
> 
> 赞同：0
> 
> 时间：2012-10-30T11:21:16.027
> 
> 标签：python, unit-testing

我有一个第三方软件，它能够使用以下方式运行一些 python 脚本：

```
software.exe -script pythonscript.py 
```

我的公司严重依赖这个软件以及我们为它开发的脚本。目前我们有一些 QA 来检查脚本的输出，但我们真的想开始对脚本进行单元测试，以便更容易发现错误并使测试系统更加完整。

我的问题是如何运行“嵌入式”单元测试？我们使用 pydev+eclipse，我尝试使用它的[远程调试](http://pydev.org/manual_adv_remote_debugger.html)来使其与单元测试一起工作，但我不能真正让它工作。如何使服务器连接“馈送”单元测试？

另一个想法是解析软件的标准输出，但这并不是真正的单元测试......而且它似乎带来的额外复杂性使得这种方法不那么有趣。

我希望这样的事情已经在其他地方完成了，我尝试用谷歌搜索它，但也许我只是没有使用正确的关键字。谁能给我一个起点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:33:59.743

更多信息会有所帮助。您是否使用了测试框架（例如 unittest 或 nose），或者如果没有，测试的结构如何？是什么`software.exe`？

在 python 中，单元测试实际上只不过是在失败时引发异常的函数的集合，因此它们可以像任何其他函数一样从脚本中调用。因此，理论上，您可以简单地创建一个测试运行程序（如果您还没有使用诸如鼻子之类的运行程序），并将其运行为`software.exe -script runtests.py`. 在 pydev 中，您可以设置`software.exe`为自定义的 python 解释器。

如果问题是`software.exe`隐藏了标准输出，那么只需将结果写入日志文件即可。您还可以创建一个模拟由提供的环境`software.exe`并使用`python.exe`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:29:58.637

如果单元测试适用于您的代码而不是提供的功能，那么您可以在必要时`software.exe`使用独立的 python 模拟部件运行测试。`software.exe`作为中间步骤，您可以尝试[`unittest`](http://docs.python.org/2/library/unittest.html)使用“software.exe”运行基于脚本的脚本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:34:16.123

好吧，一般来说，测试软件应由持续集成套件完成（并且[`Jenkins`](http://jenkins-ci.org)是您的朋友）。

Now, I think you'll have to test your scripts `pythonscript.py` by setting a test() function inside the python script that will emulate the possible environments you'll give to the entry point of your script. And you'll be able to use [`unittest`](http://docs.python.org/2/library/unittest.html) to execute the test functions of all your scripts. You can also embed tests in doctests, but I personally don't like that.

And then, in your `software.exe`, you'll be able to execute tests by emulating all the environment combinations. But as you don't say much about `software.exe` I won't be able to help you more... (what language ? is `software.exe` already unit tested ?)

# java - linkedin-j authorization failed

> ID：13137920
> 
> 赞同：0
> 
> 时间：2012-10-30T11:21:26.410
> 
> 标签：java, linkedin, linkedin-j

i work with the linkedin-j lib and try to authorize, but there always an exception is thrown:

I try to authorize first. But if i fetch the

```
request 
```

and the

```
authURL 
```

an exception is thrown(see below).

This is my code:

```
private static String consumerKeyValue="[mykey]";
private static String consumerSecretValue="[mySecret]";
private static String accessTokenValue="[myTokenValue]";
private static String tokenSecretValue="[mytokenSecretValue]";

static LinkedInApiClientFactory factory;
static LinkedInApiClient client;

static LinkedInOAuthService oAuthService;
static LinkedInRequestToken request;
static String authURL;

private static LinkedInAccessToken accessToken;

public static void main(String[]args) throws IOException{

    authorize(consumerKeyValue, tokenSecretValue);
    createClient(consumerKeyValue, consumerSecretValue, accessTokenValue, tokenSecretValue);

}

public static void createClient(String key, String secret, String token, String secretToken){
factory=LinkedInApiClientFactory.newInstance(key,secret);
client=factory.createLinkedInApiClient(accessToken);
}

public static void authorize(String key, String secret) throws IOException{
    oAuthService=LinkedInOAuthServiceFactory.getInstance().createLinkedInOAuthService(key, secret);
    request=oAuthService.getOAuthRequestToken();
    authURL=request.getAuthorizationUrl();
    System.out.println("Paste this URL to your browser:");
    System.out.println(authURL);
    System.out.println("and now paste the given PIN here and press enter");
    BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
    String input=br.readLine();
    accessToken =oAuthService.getOAuthAccessToken(request, input);
}

} 
```

and now following exception is thrown:

```
Exception in thread "main" com.google.code.linkedinapi.client.oauth.LinkedInOAuthServiceException: oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: Server returned HTTP response code: 401 for URL: https://api.linkedin.com/uas/oauth/requestToken
at com.google.code.linkedinapi.client.oauth.LinkedInOAuthServiceImpl.getOAuthRequestToken(LinkedInOAuthServiceImpl.java:159)
at Connection.authorize(Connection.java:46)
at Connection.main(Connection.java:32)
Caused by: oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: Server returned HTTP response code: 401 for URL: https://api.linkedin.com/uas/oauth/requestToken
at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:214)
at oauth.signpost.AbstractOAuthProvider.retrieveRequestToken(AbstractOAuthProvider.java:69)
at com.google.code.linkedinapi.client.oauth.LinkedInOAuthServiceImpl.getOAuthRequestToken(LinkedInOAuthServiceImpl.java:148)
... 2 more
Caused by: java.io.IOException: Server returned HTTP response code: 401 for URL: https://api.linkedin.com/uas/oauth/requestToken
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection$6.run(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection$6.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at sun.net.www.protocol.http.HttpURLConnection.getChainedException(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(Unknown Source)
at oauth.signpost.basic.HttpURLConnectionResponseAdapter.getContent(HttpURLConnectionResponseAdapter.java:18)
at oauth.signpost.AbstractOAuthProvider.handleUnexpectedResponse(AbstractOAuthProvider.java:228)
at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:189)
... 4 more
Caused by: java.io.IOException: Server returned HTTP response code: 401 for URL: https://api.linkedin.com/uas/oauth/requestToken
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
at java.net.HttpURLConnection.getResponseCode(Unknown Source)
at sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(Unknown Source)
at oauth.signpost.basic.HttpURLConnectionResponseAdapter.getStatusCode(HttpURLConnectionResponseAdapter.java:22)
at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:178)
... 4 more 
```

# ios - Debug iPhone app from device crash log

> ID：13137922
> 
> 赞同：4
> 
> 时间：2012-10-30T11:21:33.283
> 
> 标签：ios, iphone, logging

I'm trying to debug a hard to reproduce crash on my iPhone app. The only info I have till now is the following log from the device of my customer:

```
Incident Identifier: 7A3417A-4F27-44E3-97A3-AF811A79C88E
CrashReporter Key:   13d8ee7a1052506be1ae7b4bbcb3439d1c86df85
Hardware Model:      iPhone4,1
OS Version:          iPhone OS 6.0 (10A403)
Kernel Version:      Darwin Kernel Version 13.0.0: Sun Aug 19 00:28:05 PDT 2012; root:xnu-2107.2.33~4/RELEASE_ARM_S5L8940X
Date:                2012-10-24 08:11:29 +0200
Time since snapshot: 7156 ms

Free pages:        793
Active pages:      3323
Inactive pages:    2043
Throttled pages:   88283
Purgeable pages:   144
Wired pages:       33372
Largest process:   NLinBusiness

Processes
     Name                                           rpages       recent_max       [reason]          (state)

             lsd           172              172         [vm]         (daemon) (idle)
     MobilePhone          1015             1015         [vm]         (resume) (continuous)
            tccd           170              170         [vm]         (daemon)
    NLinBusiness         51246            51246         [vm]         (frontmost) (resume)
      calaccessd           288              288                      (daemon)
    mediaserverd          2319             2319                      (daemon)
           wifid           570              570                      (daemon)
       locationd          1312             1312                      (daemon)
         syslogd           171              171                      (daemon)
      aosnotifyd           684              684                      (daemon)
     dataaccessd          2504             2504                      (daemon)
   iaptransportd           235              235                      (daemon)
     SpringBoard         23545            23545                     
      backboardd          5779             5779                      (daemon)
        networkd           210              210                      (daemon)
        BTServer           240              240                      (daemon)
         configd           804              804                      (daemon)
   fairplayd.N94           161              161                      (daemon)
       fseventsd           499              499                      (daemon)
         imagent           703              703                      (daemon)
   mDNSResponder           306              306                      (daemon)
  UserEventAgent           601              601                      (daemon)
    mediaremoted           225              225                      (daemon)
           amfid           136              136                      (daemon)
   syncdefaultsd           294              294                      (daemon)
             ubd           456              456                      (daemon)
        recentsd           859              859                      (daemon)
        SCHelper           146              146                      (daemon)
        twitterd           636              636                      (daemon)
   absinthed.N94           104              104                      (daemon)
         sociald           885              885                      (daemon)
filecoordination           202              202                      (daemon)
       distnoted           129              129                      (daemon)
            apsd           348              348                      (daemon)
      aggregated           103              103                      (daemon)
       lockdownd           349              349                      (daemon)
          powerd           189              189                      (daemon)
       securityd           389              389                      (daemon)
      CommCenter          1045             1045                      (daemon)
         notifyd           210              210                      (daemon)
     ReportCrash           332              332                      (daemon)

**End**

```

Is there any useful info about the crash in this log?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T00:16:55.983

实际上，这个日志信息量很大。有问题的应用程序没有崩溃 - 它被 Jetsam/memorystatus 杀死。我们在[我的应用程序崩溃和关闭中对此进行了解释，关于原因的信息很少](https://stackoverflow.com/questions/13152502/my-app-crashes-and-closes-down-and-there-is-very-little-information-as-to-why/13160021#13160021)

在您的情况下，NlinBusiness 应用程序（我猜是您的？）使用*了*太多内存 - 请记住 iOS 没有交换。空闲页面计数低以触发低内存条件，并且您的应用程序被终止。通过响应内存不足事件，您可以避免被杀死。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:35:31.770

这个日志根本不会帮助你。它不包含任何特定于您的代码的内容。要在日志文件中获取信息，请查看此链接

[http://cocoaforbreakfast.wordpress.com/2011/02/25/logging-into-files-for-ios/](http://cocoaforbreakfast.wordpress.com/2011/02/25/logging-into-files-for-ios/)

# php - 如何从 URL 创建 Blob？

> ID：13137925
> 
> 赞同：3
> 
> 时间：2012-10-30T11:21:34.723
> 
> 标签：php, url, blob

我有一个这样的网址（基本网址）：

`"http://blablablbalbalka.jpg"`

这使我可以检索网站上的图像。

我想使用 PHP，检索该图像并为数据库中的插入创建一个 BLOB。

我怎样才能做到这一点 ？

我需要使用像 file_get_contents 这样的功能吗？开？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:29:24.093

您可以使用您所说的 file_get_contents （取决于网络服务器上的安全性 - 有关信息，请参阅手册），或者您可以使用 CURL 来获取图像。

```
$img = file_get_contents("theurl"); 
```

卷曲：

```
$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, "theurl");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_HEADER, 0);

// grab URL and pass it to the browser
$img = curl_exec($ch);

// close cURL resource, and free up system resources
curl_close($ch); 
```

然后将 $img 插入 BLOB 字段...

# firefox-addon - nsIWebProgressListener - 重定向到另一个 URL

> ID：13137929
> 
> 赞同：3
> 
> 时间：2012-10-30T11:21:45.177
> 
> 标签：firefox-addon

在我的扩展中，我需要使用部分 URL 被一些标记替换的书签。当用户打开此类书签时，扩展程序应将此标记替换为某个值并打开新位置。为了实现这一点，我使用了 nsIWebProgressListener，如下所示：

```
bookmarksResolver: {
    onLocationChange: function(aWebProgress, aRequest, aLocation, aFlags) {
        if (aLocation) {
            try {
                // Replace markers
                var resolvedLocation = resolveReferences(location);
                if (resolvedLocation != location) { // Open new location if markers were found and replaced
                    aWebProgress.DOMWindow.location.replace(resolvedLocation);
                }
            }
            catch(ex) {
                   //Logging error
            }
        }
    },

    /* Stubs for other listeners */
    onStateChange: function(a, b, c, d) {},
    onProgressChange: function(a, b, c, d, e, f) {},
    onStatusChange: function(a, b, c, d) {},
    onSecurityChange: function(a, b, c) {},

    QueryInterface: function (aIID) {
        if (aIID.equals(Components.interfaces.nsIWebProgressListener) ||
                aIID.equals(Components.interfaces.nsIWebProgressListener2) ||
                aIID.equals(Components.interfaces.nsISupportsWeakReference) ||
                aIID.equals(Components.interfaces.nsISupports)) {
            return this;
        }
        else {
            throw Components.results.NS_NOINTERFACE;
        }
    }
}, 
```

问题是当我尝试替换 URL 中的标记时，例如`https://[marker].site.com`显示一个奇怪的错误页面（说 netError.xhtml 上存在语法错误），然后打开带有替换标记的 url，但地址栏一直显示`https://[marker].site.com`URL。

问题 #1：我在这里正确使用 onLocationChange 吗？也许，应该使用另一种方法？

问题 #2：我该怎么做才能防止此错误发生？

* * *

**UPD：**使用 onStateChange 而不是 onLocationChange 并使用标志 STATE_TRANSFERRING | STATE_IS_DOCUMENT 因为捕获标志 STATE_START | STATE_IS_DOCUMENT 在重定向之前导致严重的 UI 挂起。我还提出了请求取消方法调用。现在看起来像这样：

```
bookmarksResolver: {
    onStateChange: function(aWebProgress, aRequest, aStateFlags, aStatus) {
        var nsIWebProgressListener = Components.interfaces.nsIWebProgressListener;
        if (aStateFlags & nsIWebProgressListener.STATE_TRANSFERRING
                    && aStateFlags & nsIWebProgressListener.STATE_IS_REQUEST) {
            try {
                var location = aWebProgress.DOMWindow.location.href;
                var resolvedLocation = resolveReferences(location);
                if (resolvedLocation != location) {
                    aRequest.cancel(Components.results.NS_BINDING_REDIRECTED);
                    aWebProgress.DOMWindow.location.href = resolvedLocation;
                    logger.info('Old URL: [' + location + ']');
                    logger.info('Redirected to: [' + resolvedLocation + ']');
                }
            }
            catch(ex) {
                    //Logging error
            }
        }
    },

    /* Stubs for other listeners */
    onLocationChange: function(a, b, c, d) {},
    onProgressChange: function(a, b, c, d, e, f) {},
    onStatusChange: function(a, b, c, d) {},
    onSecurityChange: function(a, b, c) {},

    QueryInterface: function (aIID) {
        if (aIID.equals(Components.interfaces.nsIWebProgressListener) ||
                aIID.equals(Components.interfaces.nsIWebProgressListener2) ||
                aIID.equals(Components.interfaces.nsISupportsWeakReference) ||
                aIID.equals(Components.interfaces.nsISupports)) {
            return this;
        }
        else {
            throw Components.results.NS_NOINTERFACE;
        }
    }
}, 
```

除 RSS 页面外，一切正常。旧位置和“重定向到”的日志条目显示标记已被替换并且新 URL 是正确的。但是它们会一遍又一遍地重新加载，因为实际的 URL（我从中得到`aWebProgress.DOMWindow.location.href`）由于某种原因没有更改，并且会一次又一次地执行替换。加载 RSS URL 有什么不同以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:41:02.390

Q1：我更喜欢`onStateChange`

Q2：也许`aRequest.cancel(Components.results.NS_BINDING_REDIRECTED)`会和平结束最初的请求。

# angularjs - Issue on angular Model changed (duplicate dom elements)

> ID：13137931
> 
> 赞同：0
> 
> 时间：2012-10-30T11:21:58.200
> 
> 标签：angularjs

i'm using angular js in my website and i'm getting a strange behavior when i update my model.

My model is an json complex object like this:

```
$scope.DataSource = {prop1:"", prop2:[{a:1, b:b2}, {a:3, b:4}], prop3:"value"} 
```

use a controller to edit object an use custom directives to edit separatelly child objects like in prop2 ( in this case are tabs ).

My problem is that when i update $scope.DataSource the previous generated DOM elements are not removed or updated, i just get a duplicated UI for each object in Prop2.

is there any way to force angular to update or remove previous generated elements? preventing a duplicated tabs(in this case)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:54:35.353

重复的 DOM 元素可能是与视图关联的范围内重复数据的结果。如果没有任何代码，则不清楚生成视图的范围是绑定到控制器还是指令。尝试将生成视图的范围记录到控制台。

# java - GWT 和 GAE：如何将 RequestFactory 服务器代码与 Servlet 链接？

> ID：13137933
> 
> 赞同：0
> 
> 时间：2012-10-30T11:22:03.327
> 
> 标签：java, google-app-engine, gwt, servlets, requestfactory

我试图弄清楚如何将 GWT 应用程序部署到 Google App Engine。从[this page on using JSPs](https://developers.google.com/appengine/docs/java/gettingstarted/usingjsps)看来，GAE 期待一个普通的、`HttpServlet`基于 - 的 web 应用程序，带有典型的处理程序：

```
public class MyServlet extends HttpServlet {
    public void doPost(HttpServletRequest req, HttpServletResponse resp) {
        // Handle the HTTP request here and return a response
    }
} 
```

在阅读了 GWT 文档并观看了几个 Google I/O 视频之后，我确信我想使用 GWT 的`RequestFactory`选项而不是传统的 GWT-RPC 方法进行客户端-服务器通信。

在研究如何使用的示例时`RequestFactory`，我发现[了这个简单的示例](http://cleancodematters.com/2011/06/04/tutorial-gwt-request-factory-part-i/)，它提出了以下类架构：

```
Client-Side:
    PizzaProxy - client-side proxy for Pizza.class
    PizzaRequestFactory - RF impl
    PizzaRequestContext - RF context impl

Server-Side:
    Pizza - the entity
    PizzaDao - DAO for entity
    DaoLocator - ServiceLocator for all DAOs
    PizzaLocator - Locator for entity 
```

一方面，我想说看到这样规范化的代码我有点惊讶，但是不要介意每个实体的这种架构，如果它在性能上得到回报，或者只是提供良好的老式干净代码的通常好处.

**最重要的是，我没有看到 GAE 想要的和它`RequestFactory`似乎提供的（在服务器端）之间的联系。**换句话说，我看到了一个`RequestFactory`没有任何形式的服务器端代码示例`HttpServlet`。

所以我问：我如何“连接”这两个 (`RequestFactory`和`HttpServlet`) 概念，以便 GWT 客户端应用程序可以将 HTTP/S 发送到由 servlet 驱动的 GAE 后端？有没有办法保留上面“Pizza App”中提出的架构，或者在部署到 GAE 时是否需要不同的架构/方法？

事实上，仔细想想，这个问题不仅适用于 GAE，还适用于任何标准的 Java Web 容器：Tomcat、JBoss、Jetty...

**更新**：我刚刚找到了[GWT 请求框架](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/http/client/package-summary.html)的代码示例，看起来这*可能*就是我正在寻找的。但是，这似乎`RequestFactory`与`RequestFactory`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:20:22.637

您必须将`RequestFactoryServlet`, 默认情况下映射到`/gwtRequest`（这是`DefaultRequestTransport`客户端的默认设置）。其他一切都是通过反思完成的。

请参阅[http://blog.ltgt.net/gwt-211-requestfactory/](http://blog.ltgt.net/gwt-211-requestfactory/)（这是关于 GWT 2.1.1；RF 在 GWT 2.4 中发生了很大变化，但总体思路仍然相同）

# flash - 如何使用动作脚本将事件分配给 Flash 中新创建的影片剪辑

> ID：13137938
> 
> 赞同：-1
> 
> 时间：2012-10-30T11:22:08.060
> 
> 标签：flash, actionscript-2

我有一个 Flash 电影，它引入 xml 并循环吐出横幅。但是，我需要通过在横幅上提供一个按钮列表来提供轮播样式功能，这些按钮提供“转到”横幅链接，即 1 2 3 4 5 等。

我可以让它创建一个影片剪辑，因为它循环通过 xml 以创建 goto 链接，但这是我遇到问题的 Click 功能。主要针对新创建的影片剪辑按钮。

函数 creaBottone 成功地创建了一个位于横幅上的影片剪辑，该剪辑从数组中传递了一个数字，onMouseDown 函数应该传递所需的横幅编号以希望转到正确的横幅。我希望这是有道理的。

这是代码：

```
import mx.transitions.Tween;
import mx.transitions.easing.*;

stop();

// Load data
var Articles:Array;
var Data:XML = new XML();

Data.ignoreWhite = true;
Data.onLoad = function(success:Boolean):Void
{

    if (success)
    {

      var ArticleCount:Number = Data.firstChild.childNodes.length;
      _global.maxDepth = ArticleCount * 2; //max depth that an Mc can be...

      //         homepage  .article      .image        .value 
      //trace(Data.firstChild.childNodes[0].childNodes[1].firstChild.toString());

      //create Array
      Articles = new Array();

      //loop through the articles
      for (i:Number = 0; i < ArticleCount; i++)
      { 

        var Node:XMLNode = Data.firstChild.childNodes[i];

        var Article:Object =
        {  

          Duration : Node.childNodes[0].firstChild.nodeValue,
          BannerImage : Node.childNodes[1].firstChild.nodeValue,
          Blurb : Node.childNodes[2].firstChild.nodeValue,
          Link : Node.childNodes[3].firstChild.nodeValue

        };

        Articles.push(Article);

        creaBottone(i);

      }//end of 'for'

      playAnimation(Articles);
    }//end of 'if'

};
//Data.load(xmlpath);
Data.load("Homepage.xml");

function playAnimation(articlesArr:Array) 
{

  _global.mcArray = new Array();
  _global.totalArticles = articlesArr.length;
  _global.durationArray = new Array();
  _global.linkArray = new Array();

  var tweenTime:Number = 2; //time in seconds for an article to fade in/out 
  var globeDuration:Number = 3000; //milliseconds
  var currDepth:Number = _global.maxDepth;

  for(var i:Number = 0; i < articlesArr.length; i++)
  {

    var mc = bannerCont.attachMovie("article_mc", "article"+i, currDepth);
    mc.gotoAndStop(1);

    linkArray[i] = articlesArr[i].Link;

    mc.imgCont._alpha = 100;
    var imgRef = mc.imgCont.createEmptyMovieClip("img", 100);

    var myListener = new Object();
    var loader:MovieClipLoader = new MovieClipLoader();

    myListener.mc = mc;
    myListener.onLoadInit = function () {

      var aScale:Tween = new Tween(this.mc.imgCont, "_alpha", Strong.easeIn, 0, 100, .5, true);

    };

    loader.addListener(myListener);
    loader.loadClip(articlesArr[i].BannerImage, imgRef);

    mc.blurbField.text = articlesArr[i].Blurb;

    mcArray[i] = mc;
    durationArray[i] = articlesArr[i].Duration;
    currDepth -= 2;

  }

  var globe_mc = bannerCont.attachMovie("globeMc", "globe", _global.maxDepth + 1);
  globe_mc._x = Stage.width/2;
  globe_mc._y = Stage.height/2;
  playGlobe(globe_mc);

  _global.currArticleIndex = 0;
  var curr:Number = _global.currArticleIndex;
  setTimeout(showArticle, globeDuration, mcArray[0], tweenTime, (durationArray[0] * 1000), curr);

}

function showArticle(article:MovieClip, tweenTime, duration, currArticleIndex)
{

  //trace("global:"+_global.linkArray[currArticleIndex]);
  _root["urlText"] = _global.linkArray[currArticleIndex];

  if(_global.linkArray[currArticleIndex] != null)
    _root.btn.enabled = true;

  article.gotoAndPlay(1);
  article.linkBtn.enabled = true;
  var globeDuration:Number = 3000;
  var totalDuration:Number = duration;// + globeDuration;
  trace(totalDuration);
  setTimeout(fadeArticle, totalDuration, article, tweenTime, currArticleIndex);  

}

function fadeArticle(article:MovieClip, tweenTime, currArticleIndex)
{

  _root.btn.enabled = false;

  var aScale:Tween = new Tween(article , "_alpha", Strong.easeIn, 100, 0, tweenTime, true);
  var depth:Number = article.getDepth();
  var globeMc = loadGlobe(depth);

  aScale.onMotionFinished = function() 
  { 
    playGlobe(globeMc);

    currArticleIndex += 1;

    //if the currArticleIndex falls outside the article array boundaries
    if(currArticleIndex >= _global.totalArticles)
    {

      currArticleIndex = 0;
      var thisMc = bannerCont["article"+0];
      var aScale:Tween = new Tween(thisMc , "_alpha", Strong.easeIn, 0, 100, tweenTime, true);  

      aScale.onMotionFinished = function(){ 

        resetAlphas(_global.mcArray); //bring all the mc's alpha levels back to 100

      }

    }

    var mc = _global.mcArray[currArticleIndex];
    var duration:Number = parseInt(_global.durationArray[currArticleIndex]) * 1000;

    setTimeout(showArticle, 3000, mc, tweenTime, duration, currArticleIndex);  
  }

}

function loadGlobe(depth:Number):MovieClip
{

  var globe_mc = bannerCont.attachMovie("globeMc", "globe", depth-1);
  globe_mc._x = Stage.width/2;
  globe_mc._y = Stage.height/2;
  globe_mc.gotoAndStop(1);

  return globe_mc;

}

function playGlobe(globe_mc:MovieClip)
{

  globe_mc.gotoAndPlay(1);

}

function resetAlphas(array:Array)
{

  for(var i:Number = 0; i < array.length; i++)
  {

    var mc = bannerCont["article"+i];
    mc._alpha = 100;

  }

}

function getNextArticle(mcArray:Array, currIndex:Number)
{ 

  var depth:Number = _global.maxDepth - ((currIndex+1)*2);
  var mc = bannerCont.attachMovie("article_mc", "article"+(currIndex+1), depth);
  mc.blurbField.text = mcArray[currIndex+1].blurbField.text;
  //trace("here:"+mc.blurbField.text);

}

function creaBottone(currIndex:Number):Void
{
    mymcn = eval("container"+currIndex);
    var mymc:MovieClip = this.createEmptyMovieClip(mymcn, this.getNextHighestDepth()+currIndex);
    var positionx = 30 + (currIndex * 30);                      
    var positiony = (Stage.height - 35);    
    mymln = eval("label"+currIndex);
    var myml:TextField = mymc.createTextField(mymln, 1, positionx, positiony, 20, 20);
    myml.background = true;
    myml.backgroundColor = 0xFFFFFF;
    myml.text = String(currIndex+1);
    myml.border = true;
    f_myTxt = new TextFormat();
    f_myTxt.align = 'center';
    //f_myTxt.color = 0xDDDDDD;
    myml.setTextFormat(f_myTxt);
    mymc.onMouseDown = function() {
    getNextArticle(_global.mcArray, currIndex);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:00:45.693

试试这个代码：

```
mymc.currIndex = currIndex;
mymc.onMouseDown = function()
{
    getNextArticle(_global.mcArray, this.currIndex);
} 
```

# c# - LinkBut ton 事件不会在 Gridview 中被调用

> ID：13137950
> 
> 赞同：0
> 
> 时间：2012-10-30T11:22:48.700
> 
> 标签：c#, asp.net, gridview, postback, asplinkbutton

我在显示属性设置为无的更新面板“PanelSearch”中有包含gridview 的表。
当我第一次加载页面时，我已将表格添加到另一个更新面板（主面板）内的占位符中。我在“PanelSearch”中有一个搜索按钮，当用户单击搜索时，我正在从数据库中检索数据并将其绑定到 gridview。

网格视图具有链接按钮作为模板字段和 OnCommand 事件。当我单击链接按钮时，**没有触发任何事件，但我的页面刷新并且“PanelSearch”内的表格消失了。**

我不知道为什么。有人可以帮我吗？

我的标记如下；

```
<asp:UpdatePanel ID="PanelPatientSearch" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <table id="tablePatientSearch" clientidmode="Static" cellpadding="2" cellspacing="2" border="0"
              style=" width:98%;display: table; margin-left: 10px;margin-right: 5px" runat="server" class="table">
              <tr>
              <th style="height:10px;width:100%"></th>
              </tr>
                <tr>
                    <td style="text-align: center">
                        <asp:Label ID="LabelSearchPatient" runat="server" CssClass="sectionHeaderForManagePages"
                            Text="Search Patient"></asp:Label>                          

                    </td>
                </tr>
                <tr>
                    <th style="height:10px;width:100%">
                        &nbsp;
                    </th>
                </tr>
                <tr>
                    <td>
                    <table cellpadding="5" cellspacing="3" width="100%" >
                    <tr> <th colspan="4">
                        &nbsp;
                    </th></tr>
                    <tr>
                    <th class="textCenterAlign" align="center" colspan="4"><asp:Label ID="labelSelectMessage" runat="server" Text="Search for Patient below or"></asp:Label> &nbsp;&nbsp&nbsp;
                    <asp:Button ID="buttonAddNewPatient" runat="server" CssClass="buttonLarge" 
                            Text="Add Patient" onclick="buttonAddNewPatient_Click" CausesValidation="false" />
                    </th>
                    </tr>
                      <tr> <th colspan="4">
                        &nbsp;
                    </th></tr>
                    <tr>
                    <td class="textRightAlign" width="25%">
                        <asp:Label ID="LabelPatientId" runat="server" Text="Patient ID" />
                    </td>
                    <td class="textLeftAlign" width="25%">
                        <asp:TextBox ID="textBoxID" runat="server" ClientIDMode="Static" CssClass="textBox" />
                        <asp:RequiredFieldValidator ID="RFVPatientID" runat="server" ControlToValidate="textBoxID"
                            CssClass="failureNotification" Display="None" ErrorMessage="Patient ID can not be blank"
                            SetFocusOnError="True" Width="0px"></asp:RequiredFieldValidator>
                        &nbsp;
                        <cc1:ValidatorCalloutExtender ID="ValidatorCalloutExtender1" runat="server" CssClass="ajaxvalidatorPopup"
                            Enabled="True" TargetControlID="RFVPatientID">
                        </cc1:ValidatorCalloutExtender>
                    </td>
                    <td class="textRightAlign" width="25%">
                        <asp:Label ID="labelFirstName" runat="server" Text="First Name" />
                    </td>
                    <td class="textLeftAlign" width="25%">
                        <asp:TextBox ID="textBoxFirstName" runat="server" CssClass="textBox" />
                    </td>
                    </tr>
                    <tr>
                    <td class="textRightAlign" width="25%">
                        <asp:Label ID="labelLastName" runat="server" Text="Last Name" />
                        <br />
                    </td>
                    <td class="textLeftAlign" width="25%">
                        <asp:TextBox ID="textBoxLastName" runat="server"  CssClass="textBox" />
                        <br />
                    </td>
                    <td class="textRightAlign" width="25%">
                        <asp:Label ID="labelDOB" runat="server" Text="Date of Birth" />
                    </td>
                    <td class="textLeftAlign" width="25%">
                        <asp:TextBox ID="textBoxDOB" runat="server"  CssClass="textBox" />
                        <cc1:CalendarExtender ID="CalendarExtenderAppDate" runat="server" Enabled="True" Format="MM/dd/yyyy" TargetControlID="textBoxDOB">
                        </cc1:CalendarExtender>
                    </td>
                </tr>
                    <tr>
                    <td class="textCenterAlign" colspan="4">
                        <br />
                        <asp:Button ID="buttonSearch" runat="server" CssClass="buttonLarge" 
                            Text="Search" onclick="buttonSearch_Click" ClientIDMode="Static" CausesValidation="false" EnableViewState="false" />
                        <br />
                        <br />
                    </td>
                </tr>
                    <tr>
                    <td colspan="4">
                        <br />
                        <asp:GridView ID="GridViewPatients1" runat="server" AutoGenerateColumns="False" CssClass="GridViewFullWidthCss"
                             EmptyDataText="No Patients are available" AllowPaging="True"  OnRowCommand="GridViewPatients1_RowCommand"
                            AllowSorting="false" EnableViewState="true" ClientIDMode="Static" >

                            <Columns>

                                  <asp:TemplateField HeaderText="Select">
                                     <ItemTemplate>
                                   <asp:LinkButton ID="linkButtonSelect" runat="server" CommandName="Select" CommandArgument='<%#DataBinder.Eval(Container.DataItem,"PatientID") %>' CausesValidation="false" OnCommand="SelectPatient" Text="Select" EnableViewState="true"></asp:LinkButton>

                                     </ItemTemplate>

                                  </asp:TemplateField>

                                <asp:BoundField DataField="PatientID" HeaderText="Patient ID" SortExpression="PatientID">
                                    <ItemStyle Width="20%" />
                                </asp:BoundField>
                                <asp:BoundField DataField="first_name" HeaderText="First Name" SortExpression="FirstName">
                                    <ItemStyle Width="20%" />
                                </asp:BoundField>
                                <asp:BoundField DataField="last_name" HeaderText="Last Name" SortExpression="LastName">
                                    <ItemStyle Width="20%" />
                                </asp:BoundField>
                                <asp:BoundField DataField="birth_date" HeaderText="Date of Birth" SortExpression="DOB">
                                    <ItemStyle Width="20%" />
                                </asp:BoundField>                                  
                            </Columns>
                        </asp:GridView>
                    </td>
                </tr>
                </table>
                </td>
                </tr>  
            </table>
        </ContentTemplate>
        <Triggers>
        <asp:AsyncPostBackTrigger ControlID="buttonSearch" EventName="click" />          
        </Triggers>
    </asp:UpdatePanel> 
```

而我背后的代码是这样的

```
protected void SelectPatient(object sender, EventArgs e)
{
        LinkButton lnkSelect = (LinkButton)sender;
        Session["Selected_Patient_Id"] = lnkSelect.CommandArgument;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:06:50.303

生成 GridView 的 RowCommand 事件并像..一样使用它

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
   if(e.CommandName == "Select")
   {
       //write what you want to do

   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-30T13:36:38.867

`LinkButton`click 事件不会触发，因为它会在您单击它时替换它在页面加载时的事件。您应该使用`IsPostBack`Page_Load 来避免这种情况。我认为您每次都`DataBind`在`GridView`页面加载。所以忽略这一点并以这种方式使用代码。这将对您的问题有所帮助。

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
          grid.DataSource = dsGrid;
          grid.DataBind();
        }
    } 
```

# jquery - jQuery DataTables 中的下拉分页

> ID：13137953
> 
> 赞同：1
> 
> 时间：2012-10-30T11:23:00.223
> 
> 标签：jquery, pagination, datatables

是否可以使用 jquery 数据表进行如下图所示的下拉分页？ ![在此处输入图像描述](../Images/ee285f664aed0b7ef5eceb4e3ef8704b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:17:25.437

是的 - 使用这样的插件：http: [//datatables.net/plug-ins/pagination#listbox](http://datatables.net/plug-ins/pagination#listbox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-06T07:50:02.883

使用选择分页插件列表，您可以实现这一点。

将 select.js 与您的数据表 js 文件一起导入。

您可以使用 CDN`//cdn.datatables.net/plug-ins/1.10.19/pagination/select.js`

例子：

```
 $(document).ready(function() {
          $('#example').dataTable( {
              "sPaginationType": "listbox"
          } );
      } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-21T06:31:52.363

如果您想使用默认的 DataTable 分页添加选择框分页，那么我找到了使用默认分页创建添加选择框分页的代码，而不使用任何 DataTable 分页插件。您可以在下面找到使用创建动态选择框初始化 DataTable 的源代码。

```
var dataTable = $('#customer_data').DataTable({
        "processing" : true,
        "serverSide" : true,
        "order" : [],
        //"dom": 'Bfrtip',
        "retrieve": true,
        "ajax" : {
            url:"fetch.php",
            method:"POST",
            data:{start:start, length:length}
        },
        "drawCallback": function( settings ){

            var page_info = dataTable.page.info();

            console.log(page_info);

            $('#totalpages').text(page_info.pages);

            var html = '';

            var start = 0;

            var length = page_info.length;

            for(var count = 1; count <= page_info.pages; count++)
            {                   
                var page_number = count - 1;

                html += '<option value="'+page_number+'" data-start="'+start+'" data-length="'+length+'">'+count+'</option>';

                start = start + page_info.length;
            }
            $('#pagelist').html(html);

            $('#pagelist').val(page_info.page);
        }
    }); 
```

我从这里找到了这个源代码 - [https://www.webslesson.info/2021/04/how-to-add-custom-select-box-pagination-in-jquery-datatable-with-ajax-php.html](https://www.webslesson.info/2021/04/how-to-add-custom-select-box-pagination-in-jquery-datatable-with-ajax-php.html)

添加上述代码后，您就可以在jQuery DataTable中实现下拉分页，输出将显示在下面。 [![在此处输入图像描述](../Images/b5cca4272296efca72744807c64e78fd.png)](https://i.stack.imgur.com/CbHzN.jpg)

# grails - Grails标准错误？具有复合外键作为 id 的域：找不到列“ALIAS2X2_.ID”

> ID：13137954
> 
> 赞同：0
> 
> 时间：2012-10-30T11:23:06.300
> 
> 标签：grails, grails-orm

问题在于以下查询。我想列出 L 中所有包含 ID 为“I01”的 I 的 LI:s。

询问：

```
def c = L.withCriteria {
  lis {
    i {                   
      eq("id","I01")                                 
    }
  }
} 
```

> 未找到“I_ALIAS2X2_.ID”列；SQL语句：select this_.id as id4_1_, this_.version as version4_1_, lis_alias1x1_.i_id as i1_7_0_, lis_alias1x1_.l_id as l2_7_0_, lis_alias1x1_.version as version7_0_ from l this_ inner join LI lis_alias1x1_ on this_.id=lis_alias1x1_.l_id where ( (i_alias2x2_.id=?)) [42122-164]

我的标准有问题还是我的域不正确？如果我将“long id”添加到 LI 域并注释掉“id：composite ...”行，则标准运行正常。

域：

```
class L {
long id   
//can this hasMany be used here ? domain L is the other FK in LI domain
static hasMany = [lis: LI]

static mapping = {       
    lis: joinTable: false       
}

static constraints = {
}
}

import org.apache.commons.lang.builder.HashCodeBuilder

class LI implements Serializable {
//domain has only FK:s to L and I

static belongsTo = [l: L, i: I]

static mapping= {
    table "LI"
    id composite:['i', 'l']
    i column: 'i_id'
    l column: 'l_id'       
}

static constraints = {
}

boolean equals(other) {        
    if (!(other instanceof LI)) { return false }       
    other.l == l && other.i == i       
}

int hashCode() {        
    def builder = new HashCodeBuilder()
    builder.append l
    builder.append i
    builder.toHashCode()            
}
}

class I {
String id       
static mapping = {   
    table "I"       
    id generator:'assigned'
    version: false   
}   
static constraints = {
}
} 
```

引导程序：

```
 I ii = new I(id:"I01").save(flush:true)           
    I ii2 = new I(id:"I02").save(flush:true)

    L l = new L().save(flush:true);           
    L l2 = new L().save(flush:true);       

    LI li = new LI(l:l,i:ii).save(flush:true)       
    LI li2 = new LI(l:l2, i:ii2).save(flush:true) 
```

架构：

创建表 I (id varchar(255) not null, version bigint not null, d varchar(255) not null, 主键 (id)); 创建表 LI (i_id varchar(255) not null, l_id bigint not null, version bigint not null, 主键 (i_id, l_id)); 更改表 LI 添加约束 FK97D312CFA 外键 (i_id) 引用 I；更改表 LI 添加约束 FK97D328A1A 外键 (l_id) 引用 l；

**编辑：**

Sérgio 的解决方案有效，但如果您有我这样定义的域：

类 I { 字符串 id

```
static belongsTo=[A:a] //has only 'string id' column

static mapping = {   
    table "I"       
    id generator:'assigned'
    version: false   
}   
static constraints = {
}
} 
```

那么这将不起作用：

```
def c = L.withCriteria {
  lis {
    i {                   
      eq("a.id","A01")                                 
    }
  }
} 
```

如果你只写：

```
def c = L.withCriteria {
  lis {
    i {                   

    }
  }
} 
```

这将给出相同的原始错误。有些事情不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:33:49.043

我在这里遇到了同样的错误。这是标准上的东西，但写了一些不同的作品：

```
def c = L.withCriteria {
  lis {
    eq('i.id',"I01") 
  }
} 
```

# javascript - 防止输入失去焦点

> ID：13137958
> 
> 赞同：1
> 
> 时间：2012-10-30T11:23:19.020
> 
> 标签：javascript, jquery, html

我有一个这样的网页：

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Random Thoughts Blog - Add a New Post!</title>
        <link rel="stylesheet" type="text/css" href="Styles/main.css" />
        <link rel="stylesheet" type="text/css" href="Styles/add.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script src="Scripts/add.js"></script>
    </head>    
    <body>
        <div id="Wrapper">
            <header>
                <h1>Admin</h1>
                <a href="index.php"><p>Home</p></a>
            </header>
            <nav>
                <a href="admin.php">
                    <div class="Button">
                        <p>Add</p>
                    </div>
                </a>
                <a href="edit.php">
                    <div class="Button">
                        <p>Edit</p>
                    </div>
                </a>
                <a href="delete.php">
                    <div class="Button">
                        <p>Delete</p>
                    </div>
                </a>
            </nav>
            <div id="MainContent">
                <h1>Write a New Blog Post!</h1>
                <form name="NewPost" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
                    <label for="Title">Title:</label><input id="title" name="Title" type="text" value="<?php if (isset($_POST['Title'])) { echo $_POST['Title']; } ?>"/>
                    <textarea id="textarea" name="PostBody"><?php if (isset($_POST['PostBody'])) { echo $_POST['PostBody']; } ?></textarea>
                    <label style="font-size: 12pt; width: 25px; margin: 8px 0 0 0;" for="Tags">Tags:</label><input style="float: right; width: 465px;" name="Tags" type="text" value="<?php if(isset($_POST['Tags'])) { echo $_POST['Tags']; } ?>"/>
                    <div id="Emoticons">
                        <a href="" id="Happy"><img alt="Smiley" src="Images/Happy.png" /></a>
                        <a href="" id="Sad"><img alt="Sad" src="Images/Sad.png" /></a>
                        <a href="" id="Neutral"><img alt="Neutral" src="Images/Neutral.png" /></a>
                        <a href="" id="Angry"><img alt="Angry" src="Images/Angry.png" /></a>
                        <a href="" id="Meh"><img alt="Meh" src="Images/Meh.png" /></a>
                        <a href="" id="Orly"><img alt="Orly" src="Images/Orly.png" /></a>
                        <a href="" id="Sleepy"><img alt="Sleepy" src="Images/Sleepy.png" /></a>
                    </div>
                    <input type="Submit" name="Submit" value="Post!" />
                </form>
            </div>
            <footer>
                <div id="FooterContent">
                    <a href="http://www.logicanddesign.ca/">
                        <p>Design by Jack R. Schaible</p>
                        <img src="Images/Icon.png" alt="Logo" />
                    </a>
                </div>
            </footer>
        </div>
        <?php
            if ($errors != '') {
                echo '<script type="text/javascript">';
                    echo 'alert("' . $errors . '");';
                echo '</script>';
            }
        ?>
    </body>
</html> 
```

我想知道我是否可以使用 javascript 或 jQuery 或任何东西来制作它，所以当有人点击“表情”中的一个图像锚标签时，当前输入（无论用户当前输入数据的哪个输入）不会t失去焦点？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T11:43:31.897

这是我知道的最好的方法：

```
var lostFocus = function() {
    setTimeout(function(){
    var value = $('#myinput').val();
        $('#myinput').val('').focus().val(value);},0);
};

$('#myinput').blur(lostFocus);​ 
```

见[jsFiddle](http://jsfiddle.net/CNEaC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:39:36.033

```
var currFocus;

$('input').focus(function(){currFocus=this});

$('#Emoticons a').click(function(){$(currFocus).focus();}); 
```

你的意思是这样的吗？

# regex - 在破折号 (-) 后从图像文件名中删除所有字符

> ID：13137964
> 
> 赞同：0
> 
> 时间：2012-10-30T11:23:58.670
> 
> 标签：regex, filenames

我有大约 1400 张这样的图像。

```
101018-202x300.jpg
100116-215x300.jpg
1000748-300x157.jpg
100138-196x300.jpg
100308-companion-in-surgical-studies-208x300.jpg
100463-Ambroise-Pare-300x216.jpg
100523-Grulee-collection-pediatrics-194x300.jpg 
```

我需要在第一个破折号后去掉所有字符，**这样**它就可以读起来了

```
101018.jpg
100116.jpg
1000748.jpg
100138.jpg
100308.jpg
100463.jpg
100523.jpg 
```

我知道这可以用正则表达式来完成，但我不知道从哪里开始？

我正忙于[通过这个正则表达式站点来了解有关该主题的更多信息。](http://www.regexbuddy.com/)

谢谢你。

**编辑：**抱歉，我没有添加其他一些更多样化的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:27:18.220

您可以重命名捕获 101018 并重命名您使用的文件。[新（演示）](http://regex101.com/r/pQ6yY2)

[旧（演示）](http://regex101.com/r/rW2mB4)

`(\d+)[\w-]+\.jpg`

编辑：第二个选项是用“-”分割并获取第一个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:27:26.807

在 PowerShell 中：

```
$_ -replace '-.*(?=\.\w+$)' 
```

例如

```
PS> -split'101018-202x300.jpg
>> 100116-215x300.jpg
>> 1000748-300x157.jpg
>> 100138-196x300.jpg' | %{ $_ -replace '-.*(?=\.\w+$)'}
>>
101018.jpg
100116.jpg
1000748.jpg
100138.jpg 
```

如果您只有 JPEG，或者它始终是连字符减号和点之间的部分，您可以稍微简化一下正则表达式：

```
-[^.]+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:17:15.310

使用 shell 和 sed..

```
for i in $(ls /path/to/your/images)

do

mv $i $(echo $i | sed -r 's/([0-9]\*)\-.*\.jpg/\1.jpg/g')

done 
```

让我解释一下这会做什么。 `for loop`每次迭代都需要一个文件， `echo $i | sed -r 's/([0-9]*)\-.*\.jpg/\1.jpg/g'`用于将文件名更改为所需的输出。

# mysql - 用另一个字段更新另一个表的字段

> ID：13137967
> 
> 赞同：-1
> 
> 时间：2012-10-30T11:24:04.190
> 
> 标签：mysql, sql

我想用 table2 中的另一个字段更新 table1 中的一个字段。我编写了以下查询，但它不起作用。

```
UPDATE tempdata A
  SET A.new_user_id =
  (SELECT B.id FROM user B
  WHERE A.usr_email = B.usr_email) 
```

它给出“#1242 - 子查询返回超过 1 行”错误。任何人请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:25:28.467

```
UPDATE tempdata A, user B
  SET A.new_user_id = B.id
  WHERE A.usr_email = B.usr_email 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:33:55.417

这也是处理这个场景的一种方法

```
UPDATE  A  
SET A.new_user_id = B.id
FROM tempdata A 
INNER JOIN user B ON A.usr_email = B.usr_email 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T11:25:41.947

即使是更新语句，您仍然可以连接表。

```
UPDATE tempdata A
       INNER JOIN user B
          ON A.usr_email = B.usr_email
SET A.new_user_id = B.id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T11:26:59.433

请注意，错误意味着在表用户中有超过 1 行字段 usr_email 等于 tempdata 的行。在使用 Salil 建议的 LIMIT 1 a 运行实际更新语句之前检查是否有欺骗性

# perl - Perl：显示使用的子例程

> ID：13137968
> 
> 赞同：4
> 
> 时间：2012-10-30T11:24:05.073
> 
> 标签：perl, optimization, subroutine, mason

在某些项目（ Mason ）中有很多 perl 模块（> 200）。真正使用了这段代码的 5-10%。我怎么看，哪些子程序被使用（或未使用）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:44:45.100

除了 choroba 的链接，您还可以使用分析器来显示调用了哪些子例程（调用了多少次以及花费了多长时间）：

*   [分析 Perl](http://www.perl.com/pub/2004/06/25/profiling.html)
*   [Devel::NYTProf - 分析 Perl 代码](http://www.perl.org/about/whitepapers/perl-profiling.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T15:13:52.977

`Perl::Critic`考虑从命令行开始使用：

```
perlcritic --single-policy=UnusedPrivateSubroutines --verbose 2 ./*.pl 
```

您将获得未使用子例程的列表。列出未使用的变量：

```
perlcritic --single-policy=UnusedVariables --verbose 2 /root/*.pl 
```

为未使用的子例程审核整个“石匠”项目，例如

```
cat *.pl > all-perl-files.pl 
```

并再次使用`percritic`可能`all-perl-files.pl` *会给*您一个初始列表。那是因为如果同一个子程序的名称在多个文件中声明并在您的项目中的某个地方使用，它可能会从您的未使用列表中被屏蔽。

# python - Python从两个文件的嵌套for循环中读取行

> ID：13137969
> 
> 赞同：1
> 
> 时间：2012-10-30T11:24:08.900
> 
> 标签：python, file, loops, line

我想将一个文本文件的行与另一个文本文件逐行匹配，我的嵌套for循环有问题，一定很简单，但我找不到，

```
for line1 in ratings:
    cont1+=1

    for line2 in movies:
         cont2+=1
         print(cont1,cont2) 
```

我用这个循环简化了它，检查错误，外循环没有达到 cont=2，

```
1 1
1 2
1 3
1 4
1 5
1 6
1 7
.
.
.
1 157
>>> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T11:26:37.623

您需要同时遍历两个文件

```
ratings= open('ratings.txt')
movies= open('movies.txt')

for rating, movie in itertools.izip(ratings, movies):
    # do task 
```

或者

```
ratings= open('ratings.txt').readlines()
movies= open('movies.txt').readlines()

for rating, movie in zip(ratings, movies):
    # do task 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:38:04.953

The problem is that I need to reset the inner loop with seek(0), doing that the loop works properly, thanks to everyone for your replies.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:27:23.727

您的实现运行在 file1 中的每一行运行 file2 中的所有行，

实际的代码是，

```
for line1,line2 in zip(ratings,movies):
 cont1+=1
 cont2+=1
 print(cont1,cont2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:03:18.290

```
with open('ratings.txt') as ratings, open('movies.txt') as movies:
    for rating, movie in itertools.izip(ratings, movies):
        # do task 
```

This is an improvement on [avasal's answer](https://stackoverflow.com/a/13138004/36537) in that it picks up the lines iteratively (equivalent to the old `xreadlines` that is now deprecated) rather than reading all the lines in via `readlines()`. So it should read a line from each, then process them, then read another line etc, permitting Files Of Enormity where `readlines` implementation would be limited to smaller files.

Note that `izip` continues until one of the iterators stops, so you'll only get as many rows as the shorter file. I'm assuming that's correct, however, since the code implicitly assumes the two files match anyway.

# javascript - 如何处理 HTML 和 javascript 之间的自定义事件

> ID：13137971
> 
> 赞同：0
> 
> 时间：2012-10-30T11:24:22.693
> 
> 标签：javascript, html, events

我有一个 html 文件。我正在从 html 文件调用一些 javascript 文件中的函数。我想从 js 文件中分派事件并希望将控件返回。我想在我想要的时候把控制发回。任何人都可以帮助我如何处理 html 和 javascript 中的自定义事件。

问候， 达克什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:49:31.990

我真的不明白你想要达到什么目的。一些代码会有所帮助。如果您确信您需要自定义事件，您可以[在 MDN 上](https://developer.mozilla.org/en-US/docs/DOM/Event/CustomEvent)阅读它。

如果您使用 jQuery，请检查[这些答案](https://stackoverflow.com/questions/399867/custom-events-in-jquery)。

# c# - 如何在 C# 中使用 OpenXml 从 Word 文档中删除两个书签中的数据或表格

> ID：13137974
> 
> 赞同：0
> 
> 时间：2012-10-30T11:24:45.987
> 
> 标签：c#, openxml, openxml-sdk

我正在使用 OpenXML 在 C# 中创建 word 文档。我可以在指定书签之后插入我的文本，但是如何删除两个书签中的数据。

以下是在指定书签之后插入文本的代码。

```
 string fileName = @"C:\Users\sharepointadmin\Desktop\volc.docx";

            TableValues ObjTableValues = new TableValues();
            List<TableValues> allValues = new System.Collections.Generic.List<TableValues>();

            for (int i = 1; i <= 5; i++)
            {
                ObjTableValues = new TableValues();
                ObjTableValues.EmpID = i.ToString();
                ObjTableValues.EmpName = "Emp" + i.ToString();
                ObjTableValues.EmpDesig = "SE";
                ObjTableValues.EmpDept = "Software";

                allValues.Add(ObjTableValues);
                //ConvertMailMergeEscape(fileName);

            }

            AddTable(fileName, allValues);

        }
            using (var document = WordprocessingDocument.Open(fileName, true))
            {
                IDictionary<String, BookmarkStart> bookmarkMap = new Dictionary<String, BookmarkStart>();               

                var doc = document.MainDocumentPart.Document;
                var mainpart = document.MainDocumentPart;
                var res = from ObjTableValues in mainpart.Document.Body.Descendants<BookmarkStart>() where ObjTableValues.Name == "testbookmark" select ObjTableValues;                
                var bookmark = res.SingleOrDefault();
                if (bookmark != null)
                {
                    var parent = bookmark.Parent;
 run.Append(text);
                    Paragraph newParagraph = new Paragraph(run);

                    // insert after bookmark parent
                    parent.InsertAfterSelf(newParagraph);
  foreach (BookmarkStart bookmarkStart in document.MainDocumentPart.RootElement.Descendants<BookmarkStart>())
                {
                    bookmarkMap[bookmarkStart.Name] = bookmarkStart;
                }

                MoveToRangeStart ranstart = new MoveToRangeStart();

                foreach (BookmarkStart bookmarkStart in bookmarkMap.Values)
                {
                    Run bookmarkText = bookmarkStart.NextSibling<Run>();
                    if (bookmarkText != null)
                    {
                        //bookmarkText.GetFirstChild<Text>().Text = "blah";
                    }
                }

                DocumentFormat.OpenXml.Wordprocessing.Table table = new DocumentFormat.OpenXml.Wordprocessing.Table();

                TableProperties props = new TableProperties(
                    new TableBorders(
                    new TopBorder
                    {
                        Val = new EnumValue<BorderValues>(BorderValues.Single),
                        Size = 12
                    },
                    new BottomBorder
                    {
                        Val = new EnumValue<BorderValues>(BorderValues.Single),
                        Size = 12
                    },
                    new LeftBorder
                    {
                        Val = new EnumValue<BorderValues>(BorderValues.Single),
                        Size = 12
                    },
                    new RightBorder
                    {
                        Val = new EnumValue<BorderValues>(BorderValues.Single),
                        Size = 12
                    },
                    new InsideHorizontalBorder
                    {
                        Val = new EnumValue<BorderValues>(BorderValues.Single),
                        Size = 12
                    },
                    new InsideVerticalBorder
                    {
                        Val = new EnumValue<BorderValues>(BorderValues.Single),
                        Size = 12
                    }));

                table.AppendChild<TableProperties>(props);

                foreach (TableValues Tableitem in allValues)
                {
                    var tr = new DocumentFormat.OpenXml.Wordprocessing.TableRow();

                    var tc = new DocumentFormat.OpenXml.Wordprocessing.TableCell();

                    tc.Append(new Paragraph(new Run(new Text(Tableitem.EmpID))));
                    tr.Append(tc);

                    tc = new DocumentFormat.OpenXml.Wordprocessing.TableCell();
                    tc.Append(new Paragraph(new Run(new Text(Tableitem.EmpName))));
                    tr.Append(tc);

                    tc = new DocumentFormat.OpenXml.Wordprocessing.TableCell();
                    tc.Append(new Paragraph(new Run(new Text(Tableitem.EmpDesig))));
                    tr.Append(tc);

                    tc = new DocumentFormat.OpenXml.Wordprocessing.TableCell();
                    tc.Append(new Paragraph(new Run(new Text(Tableitem.EmpDept))));
                    tr.Append(tc);

                    table.Append(tr);

                }
                doc.Body.Append(table);
                doc.Save();
            }
        }
    }
} 
```

任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:53:39.537

我假设您想从 word 文档中删除一些表格或数据。如果是这种情况，我建议您在 Microsoft Word 中启用开发人员选项卡。对于 Microsoft Word 2007，如果您单击 Office 按钮，然后转到下拉菜单底部的“Word 选项”按钮。现在启用显示“功能区中的开发人员选项卡”。现在，一旦您激活了开发人员选项卡，您就可以在 Microsoft Word 中看到一个附加选项卡“开发人员”。如果您在此选项卡中单击富文本图标（标记为**Aa**），则会在您的 Word 文档中插入一个标签。现在，如果你右击标签，你可以给这个标签一个名字和ID。

现在您可以在 C# 中通过其 id 或名称访问此标签。例如，您给出的标签名称是“测试标签”

```
 MainDocumentPart mainPart = doc.MainDocumentPart;
    List<SdtBlock> taggedContentControls = mainPart.Document.Descendants<SdtBlock>().ToList();
    foreach (var tagControl in taggedContentControls)
                    {
                        string tagName = tagControl.Descendants<SdtAlias>().First().Val.Value;
                        if(tagName== "Test Tag")
                        {
// you can insert any data in this tag over here
} 
```

现在，使用类似的方法，假设您要删除此标签中的表格和其他一些数据

```
foreach (var tagControl in taggedContentControls)
                {
                    string tagName = tagControl.Descendants<SdtAlias>().First().Val.Value;
                    if (tagName.Contains("Test Tag"))
                    {
// If we want to delete table only
                        //tagControl.SdtContentBlock.Descendants<Table>().First().Remov();       
// If you want to remove everything in this tag                        
tagControl.SdtContentBlock.Remove();
                    }
                } 
```

不要忘记在此操作结束时保存您的文档，我的意思是 mainpart.Document.Save();

为简单起见，我编写了多个 LINQ 语句来从文档中获取标签。您可以根据自己的理解进行更改。

我希望它可以帮助您解决问题。

问候

# sql-server - 从选定的列中除以

> ID：13137975
> 
> 赞同：0
> 
> 时间：2012-10-30T11:24:46.977
> 
> 标签：sql-server, sql-update, division, multiple-columns

抱歉，如果在我尝试搜索但未找到之前提出问题。我还是 mssql 的新手，所以也许答案很明显，只是我找不到。

我目前的查询是：

```
SELECT gold_min, gold_max, gold_min_2, gold_max_2
FROM m_rdb 
```

我想将当前列上的值除以 20，然后更新，只是不知道该怎么做。欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:28:13.140

您是否正在寻找这个：

```
update m_rdb
set col=col/20.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:29:22.050

**如果您将值更新为相同的列，那么**

```
Update m_rdb SET gold_min = gold_min/20, gold_max=gold_max/20,
gold_min_2=gold_min_2/20, gold_max_2=gold_max_2/20 
```

如果您将值更新为其他列，那么

```
Update m_rdb SET gold_min_other = gold_min/20, gold_max_other=gold_max/20,
gold_min_2_other=gold_min_2/20, gold_max_2_other=gold_max_2/20 
```

# magento - Magento-Custom 购物车价格规则 - 购买 2 种不同的产品并以统一价格获得这些产品？

> ID：13137978
> 
> 赞同：1
> 
> 时间：2012-10-30T11:24:57.077
> 
> 标签：magento, cart, magento-rules

我想为我的客户设置不同类型的价格规则（购物车价格规则）。我尝试了默认的 magento 扩展，但我做不到。当我在网上搜索时，一些解决方案告诉我使用观察者可以解决我的问题。但这些对我来说还不够。让我解释一下我的一个问题。

购买 2 种不同的产品并以统一价格购买。

比如说，产品 X 是 700，产品 Y 是 500。当客户购买这 2 个产品（总共 1200 个）时，他可以以 1000 的价格购买这两个产品。

有没有直接的方法可以做到这一点，或者应该需要使用数据库表和观察者创建自定义模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-29T11:18:58.647

[![在此处输入图像描述](../Images/ad9003a813d7a6b69289b8647ef863c3.png)](https://i.stack.imgur.com/hPp9X.png)

[![在此处输入图像描述](../Images/5493a2882fc6a87c91cf56a47f8c389a.png)](https://i.stack.imgur.com/H6xbq.png)

1.  首先指定您的`X`并`Y` `SKU`设置此条件和操作并应用折扣金额。
2.  如果您在条件中没有找到`SKU`，则更改`SKU`属性以应用购物规则`YES`

# javascript - JavaScript 客户端搜索引擎

> ID：13137985
> 
> 赞同：4
> 
> 时间：2012-10-30T11:25:15.863
> 
> 标签：javascript

我正在使用 jQuery/JavaScript 开发一个本地 Web 应用程序。

我的目标是创建用于从 JSON 文件中搜索内容的搜索引擎。我已经用正则表达式做了它，但它工作得很慢。

什么是最好的方法？有 JavaScript 搜索引擎吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-12T19:01:50.677

试试[lunr.js](http://lunrjs.com/)，它支持 JavaScript 中的全文搜索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T11:42:31.067

术语**“搜索引擎”**通常意味着对大量数据进行**索引**（资源密集型任务）。索引后搜索数据集很快。如果数据集非常大，则更有可能在服务器上进行索引和搜索（然后只将搜索结果返回给浏览器）。

如果您只需要在中小型 JSON 文件中搜索字段，请考虑使用 JavaScript **“搜索算法”**而不是搜索引擎。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T07:29:02.237

看看 fullproof，它是一个基本的搜索引擎，可以在浏览器中使用[http://reyesr.github.com/fullproof/](http://reyesr.github.com/fullproof/) 虽然可能还有其他的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T14:36:54.130

我认为它不存在，你已经开发了它

将您的应用程序内容放入 String 对象并使用 indexOf（用于目标字符串）和子字符串（用于提取片段）开发搜索功能

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-12T07:20:51.047

我认为你有两个选择。前面提到的[Lunr和](https://lunrjs.com/)[search-index](https://github.com/fergiemcdowall/search-index)。

# c# - 如何在“添加连接窗口”中提供端口号 MySql 数据库

> ID：13137986
> 
> 赞同：1
> 
> 时间：2012-10-30T11:25:20.137
> 
> 标签：c#, .net, mysql, visual-studio-2010, database-connection

我的数据库服务器中有两个版本的 MySql。其中一个低于 5.0，另一个低于 5.2。旧的看起来是 3306 端口，新的看起来是 3307 端口。我想在我的 .net 项目中使用新的。当我尝试将服务器的 IP 地址提供给“添加连接”窗口时，它看起来是 3306 端口并显示“连接器/网络不再支持 5.0 之前的服务器版本”。我想当我可以提供端口号时它会解决。

![在此处输入图像描述](../Images/81ab54e2aa2ea9f7135b64328bc4c46c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:33:34.433

从[文档](http://dev.mysql.com/doc/refman/5.5/en//connector-net-visual-studio-making-a-connection.html)

> 您还可以通过按“高级”按钮设置与 MySQL 服务器连接的端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:38:22.173

点击“高级”按钮打开高级设置，在里面你会找到端口参数然后改变它，我已经练习过很多次了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:39:27.610

在 ip 之后，只需在连接字符串上添加 ":portnumber"

# ios - 将 OSX 文件夹复制到 iOS 目录

> ID：13137987
> 
> 赞同：0
> 
> 时间：2012-10-30T11:25:26.390
> 
> 标签：ios, objective-c, xcode, macos, filesystems

我正在尝试将文件夹及其内容复制到文档目录中的子目录中，但失败并出现错误：“操作无法完成。没有这样的文件或目录”

首先，我尝试在文档目录中创建一个文件夹，如下所示：

```
NSString *diagramsDirectory = [docDirectory stringByAppendingPathComponent:@"Diagrams"];
if (![fileManager fileExistsAtPath:docDirectory isDirectory:&isDirectory] || !isDirectory)
{
    NSError *error = nil;
    NSDictionary *attr = [NSDictionary dictionaryWithObject:NSFileProtectionComplete
                                                     forKey:NSFileProtectionKey];
    [fileManager createDirectoryAtPath:diagramsDirectory
           withIntermediateDirectories:NO
                            attributes:attr
                                 error:&error];
    if (error) {
        NSLog(@"error creating dir. path: %@", [error localizedDescription]);
    }
}
NSLog(@"diagrams directory = %@", diagramsDirectory); 
```

控制台日志似乎表明这是可行的：

```
diagrams directory = /Users/../iPhone Simulator/../Library/Documentation/Diagrams 
```

但是，当我尝试从 Mac 上的目录中复制一个名为“Diagrams”的文件夹时：

```
NSString *pathToDirectories = @"/User/Desktop/Project Resource Files/Files/";
NSError *error = nil;
NSArray *folders = [fileManager contentsOfDirectoryAtPath:pathToDirectories error:&error];   
for (NSString *folder in folders) {      
    if ([folder isEqualToString:@"Diagrams"]) {
        [self copyFolderAtPath:folder toDestinationFolderAtPath:docDirectory];            
    } 
```

它调用“copyFolderAtPath”方法：

```
- (BOOL)copyFolderAtPath:(NSString *)sourceFolder toDestinationFolderAtPath:(NSString *)destinationFolder
{
    destinationFolder = [destinationFolder stringByAppendingPathComponent:[sourceFolder lastPathComponent]];    
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error = nil;

    // check for destination folder
    if ([fileManager fileExistsAtPath:destinationFolder])
    {
        if (![fileManager removeItemAtPath:destinationFolder error:&error])
        {
            NSLog(@"Could not remove old files. Error: %@", error);
            return NO;
        }
    }
    error = nil;
    // copy destination
    if (!([fileManager copyItemAtPath:sourceFolder toPath:destinationFolder error:&error])) {
        NSLog(@"failed copying file at path %@ to path %@. Error %@", sourceFolder, destinationFolder, error);
        return NO;
    }
    return YES;
} 
```

它返回“否”，我得到错误。

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:56:01.407

设备（以及模拟器）与操作系统隔离，因此您不能直接进行文件系统复制。想象一下，即使它允许您从模拟器中执行此操作，运行您的应用程序的断开连接的设备将如何访问操作系统文件系统？

您将不得不考虑其他选项，例如在 mac 上安装一个[打开套接字](https://stackoverflow.com/questions/7047250/building-a-server-client-application-in-cocoa)的应用程序，或者在设备复制的 mac 上安装一个 http 端点。[其他选项包括通过 iCloud](http://www.raywenderlich.com/6015/beginning-icloud-in-ios-5-tutorial-part-1)或[其他云服务](https://stackoverflow.com/questions/748520/scaleable-cloud-computing-services)同步文档。您还可以[通过 iTunes 传输文件](http://support.apple.com/kb/HT4094)。我敢肯定还有很多其他的选择......也看看[这个](https://stackoverflow.com/questions/7913342/transfer-file-from-mac-pc-to-iphone-app-document-folder)

# html - 奇怪的css换行符

> ID：13137989
> 
> 赞同：0
> 
> 时间：2012-10-30T11:25:29.373
> 
> 标签：html, css, whitespace, line-breaks

> **可能重复：**
> [如何避免在 php 中回显字符 65279？（这个问题也与 Javascript xmlhttp.responseText (ajax) 有关）](https://stackoverflow.com/questions/6538203/how-to-avoid-echoing-character-65279-in-php-this-question-also-relates-to-java)

我不明白为什么 div 表现得如此奇怪，右侧有一个 div，它有类 - .rightcolumn，它有子 div .basket_refresh_box，问题是在 basket_refresh_box div 之前有一个空格/断线，即算作 1 个文本行，所以这个 div，basket_refresh_box，下降 1 行，我试图删除所有空格，所以它看起来像......，所以它们之间甚至没有一个空格或制表符，然后是 firebug在它们之间只显示空文本（“”），但 div 仍然下降。是否可以以某种方式删除此分页符？CSS空白没有帮助..

顺便说一句，我试图在 rightcolumn 之后插入另一个 div 并且它以正确的方式显示，

提前感谢您的帮助，

更新：我已经更新了我的代码，所以它看起来像： `<div class="rightcolumn"><div id="basket_refresh_box"></div>`

但是在div之前还有这个“”空文本，

这是萤火虫的显示方式：http: [//i.stack.imgur.com/dbeO9.jpg](https://i.stack.imgur.com/dbeO9.jpg)

这是它在浏览器中的显示方式：http: [//i.stack.imgur.com/jJYyQ.jpg](https://i.stack.imgur.com/jJYyQ.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:43:29.200

确保您的文件保存为 UTF-8，检查文件中的字节顺序标记 (BOM)。

# c# - 无法使用 facebook c# sdk 从 facebook 注销

> ID：13137992
> 
> 赞同：0
> 
> 时间：2012-10-30T11:25:43.280
> 
> 标签：c#, asp.net-mvc-3, facebook-c#-sdk

我正在使用 facebook C# SDK 从我的 mvc3 应用程序连接到 facebook。我可以登录但无法注销。我使用以下代码注销

```
var oauth = new FacebookClient();

        var logoutParameters = new Dictionary<string, object>
              {
                  { "next", "http://localhost:8691" }
              };

        var logoutUrl = oauth.GetLogoutUrl(logoutParameters);

        return Redirect(logoutUrl.ToString()); 
```

此代码总是将我重定向到 facebook 主页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:10:53.587

查看此[链接](http://csharpsdk.org/docs/web/getting-started)，他们建议使用 FB 的 javascript sdk 处理所有登录\注销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:30:56.333

我已经解决了。我刚刚在 logoutParameters 中传递了访问令牌。

这是我的操作结果代码。

```
 public ActionResult LogOut(string accessToken)
    {
        var oauth = new FacebookClient();

        var logoutParameters = new Dictionary<string, object>
              {
                 {"access_token", accessToken},
                  { "next", "http://localhost:8691" }
              };

        var logoutUrl = oauth.GetLogoutUrl(logoutParameters);

        return Redirect(logoutUrl.ToString());
    } 
```

# android - 在 Android 应用程序中使用 Microsoft Translator API

> ID：13137995
> 
> 赞同：1
> 
> 时间：2012-10-30T11:26:10.620
> 
> 标签：android, localization, language-translation, microsoft-translator

我创建了使用 Microsoft Translator API 翻译文本的示例 Android 应用程序。我包含了来自这个项目的 jar 文件[https://github.com/boatmeme/microsoft-translator-android-test](https://github.com/boatmeme/microsoft-translator-android-test)。这是我的应用程序代码...

```
public class translateSample extends Activity{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Translate.setClientId("my client key");
        Translate.setClientSecret("client secret key");
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.activity_translate);
        Button Trans1 = (Button)findViewById(R.id.translate);
        Trans1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                EditText Input = (EditText)findViewById(R.id.input);
                EditText Output = (EditText)findViewById(R.id.output);
                        String In =Input.getText().toString();
                        //String Out;
                        try
                        {
                            String Out = Translate.execute(In, Language.ENGLISH, Language.FRENCH);

                            Input.setText(Out);
                            Output.setText(Out);
                        } catch (Exception e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
            }
        });
    }

} 
```

我收到以下错误：

```
java.lang.Exception: [microsoft-translator-api] Error retrieving translation : Hostname <datamarket.accesscontrol.windows.net> was not verified 
```

请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-18T10:56:21.260

您需要打开设备上的 WI-Fi 才能使您的应用程序正常工作。我在打开 WI-FI 时遇到了同样的错误，一切都很顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T04:29:30.860

确保在以下代码的相应位置输入您的客户端和密钥：

```
 Translate.setClientId("my client key");
    Translate.setClientSecret("client secret key"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-23T15:15:48.307

首先，您必须在 bing 中创建 ID 和密码，并将它们写在您的代码中，如下所示 Translate.setClientId("my client key"); Translate.setClientSecret("客户端密钥"); 注意网络必须存在，因为这本词典在线工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-24T20:39:18.900

似乎 Jonathan Briggs 编写的 JAVA 代码不适用于 2012 年之后创建的帐户的 ACCESS TOKENS。它在文件中说。查看 README.md 文件

# git - Heroku 拉取私有 github 仓库

> ID：13137996
> 
> 赞同：12
> 
> 时间：2012-10-30T11:26:15.080
> 
> 标签：git, heroku, github

我尝试了不同的方法在 Rails 应用程序**Gemfile**中使用 Github 私有存储库引用。

```
1) Gemfile:
gem 'my_gem', :git => "https://#{github_user}:#{github_pw}@github.com/me/my_gem.git" 
```

'git push heroku' 的结果：

```
Fetching https://user:pw@github.com/me/my_gem.git
error: The requested URL returned error: 401 while accessing https://user:pw@github.com/me/my_gem.git/info/refs
Git error: command `git clone 'https://user:pw@github.com/me/my_gem.git' "/tmp/build_2wxmqutch8gy7/vendor/bundle/jruby/1.9/cache/bundler/git/my_gem-929bddeee3dd4a564c2689e189190073df01431e" --bare --no-hardlinks` in directory /tmp/build_2wxmqutch8gy7 has failed.
Dependencies installed 
```

然后我找到了这篇文章[https://help.github.com/articles/creating-an-oauth-token-for-command-line-use](https://help.github.com/articles/creating-an-oauth-token-for-command-line-use)并创建了一个 OAuth 令牌。

```
2) Gemfile:
gem 'my_gem', :git => "https://#{github_oauth_token}@github.com/me/my_gem.git" 
```

'git push heroku' 的结果：

```
Fetching https://0123456789abcdef0123456789abcdef01234567@github.com/me/my_gem.git
Password: 
```

Heroku 停止并提示输入密码。

在我的本地机器上：

```
git clone https://user:pw@github.com/me/my_gem.git 
```

和

```
git clone https://0123456789abcdef0123456789abcdef01234567@github.com/me/my_gem.git 
```

工作完美！

当地的：

```
# git --version
git version 1.7.9.5 
```

赫罗库：

```
# heroku run git --version
git version 1.7.0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T00:59:30.733

Heroku 运行较旧的 Git 版本，遗憾的是它不完全支持 URL 的 auth 部分。

您可以通过添加GitHub 提供的[虚拟密码](https://help.github.com/articles/git-over-https-using-oauth-token)来解决此问题。所以不要使用：

```
https://#{github_oauth_token}@github.com/me/my_gem.git 
```

采用：

```
https://#{github_oauth_token}:x-oauth-basic@github.com/me/my_gem.git 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T08:22:38.767

Heroku 的 git（1.7 版）不支持使用电子邮件作为 Github 存储库的用户名。

您必须使用您的 Github 用户名。

此外，Heroku 的 git 不支持使用 oauth 令牌。

希望 Heroku 能尽快升级他们的 git，这样他们就可以继续让我的生活更轻松 :-)

# c# - 从会话中检索字段

> ID：13137997
> 
> 赞同：0
> 
> 时间：2012-10-30T11:26:15.943
> 
> 标签：c#, asp.net, sql-server, session-variables

我有一个公司可以注册的表格，在此注册中随机生成一个用户代码... CompCode 与数据库表中的所有其他信息一起保存为主键...

当用户注册时，他们可以登录...当他们成功登录时，他们的 compName 被保存为会话变量

```
Session["CompName"] = TextBox1.Text; 
```

现在一旦登录，他们就有机会发布工作，这个工作详细信息保存在另一个名为 job 的表中......但是为了使工作详细信息与公司相关，我需要 CompID

如何使用会话 CompName 检索 CompID

```
 protected void Save_Click(object sender, EventArgs e)
{
    string answer = "NO";
    string strcon = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\VC_temps.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
    SqlConnection con = new SqlConnection(strcon);

    SqlCommand com = new SqlCommand("Store-Jobs", con);
    com.CommandType = CommandType.StoredProcedure;
    com.Parameters.AddWithValue("Job", TextBox1.Text);
    com.Parameters.AddWithValue("JobType", DropDownList1.Text);
    com.Parameters.AddWithValue("StartDate", Calendar1.SelectedDate);
    com.Parameters.AddWithValue("Time", TextBox2.Text);
    com.Parameters.AddWithValue("JobID", TextBox1.Text.Substring(3).ToUpper());
    com.Parameters.AddWithValue("CompanyID", ?);
    com.Parameters.AddWithValue("PoistionFilled", answer);
    com.Parameters.AddWithValue("Description", TextBox4.Text);

    con.Open();
    com.ExecuteNonQuery();
    Labelinfo.Text = "Post successful.";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:29:52.437

如果您的意思是您想从会话中获得价值，那么您就是这样做的

```
 if(Compname == (string)Session["CompName"]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:34:40.177

在存储过程本身中处理这个问题，传递存储在会话中的公司名称，如@sleiman jneidi 所述。

在存储过程中，首先检索 compName = @compName 的所有 compCode，然后执行其余操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:30:32.900

首先，我创建了一个数据源，如下所示：

```
<asp:SqlDataSource ID="SqlDataSource_CompID" runat="server" 
                ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
                SelectCommand="SELECT [CompanyID] FROM [Company] WHERE ([CompName] = @CompName)">
                <SelectParameters>
                    <asp:SessionParameter Name="CompName" SessionField="CompName" Type="String" />
                </SelectParameters>
            </asp:SqlDataSource> 
```

然后我在后面的代码中添加了以下代码

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!this.IsPostBack)
    {
        this.getName();
    }
}
private void getName()
{
    DataView dv = (DataView)SqlDataSource_CompID.Select(DataSourceSelectArguments.Empty);
    DataRowView drv = dv[0];

    Session["CompID"] = drv["CompanyID"].ToString();
} 
```

这行得通，它给了我我想要的东西，如果有更好的理由，请随时发表评论

# core-data - 核心数据使用 NSSortDescriptor 对数值进行排序

> ID：13137998
> 
> 赞同：1
> 
> 时间：2012-10-30T11:26:19.083
> 
> 标签：core-data, ios6, nssortdescriptor

我有一组核心数据项，我想根据我设置为整数 16 的数字属性对其进行排序。它只是一个具有自定义排序的事物列表，所以我添加了一个“排序”整数，这样我可以说 abc->1 cba->2 aaa->3 等。我想使用 1,2,3 进行排序并显示键（这是另一个属性）。

我不知道该怎么做，我猜我需要更改选择器，但我不知道该怎么做。

```
request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"ordering" ascending:YES selector:@selector(localizedStandardCompare:)]]; 
```

我得到的错误是

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFNumber localizedStandardCompare:]: unrecognized selector sent to instance 0x8142450' 
```

我正在创建这样的核心数据属性：

```
dataItemOne.ordering = [NSNumber numberWithInteger:1]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T12:12:32.263

不会

```
request.sortDescriptors = [NSArray arrayWithObject:
    [NSSortDescriptor sortDescriptorWithKey:@"ordering" 
                                  ascending:YES]]; 
```

做这份工作？