# StackOverflow 问答 14831000-14831999

# c# - wcf 服务返回派生类型

> ID：14831003
> 
> 赞同：1
> 
> 时间：2013-02-12T11:02:24.963
> 
> 标签：c#, .net, wcf, datacontractserializer

我有以下示例 wcf 服务（使用 webHttpBinding）：

```
[ServiceContract]
public class Animals {

    [OperationContract]
    [WebGet(UriTemplate = "/{id}")]
    [ServiceKnownType(typeof(Dog))]
    public Animal GetAnimalById(string id) {
        switch (id) {
            case "1": return new Animal { Id = 1 };
            case "2": return new Dog { Id = 2 };
        }
        throw new ArgumentException();
    }
} 
```

类型定义如下：

```
[DataContract]
[KnownType(typeof(Dog))]
public class Animal {
    [DataMember]
    public int Id { get; set; } 
}

public class Dog : Animal {
    [DataMember]
    public string Name { get; set; }
} 
```

当提供 1 时，从服务返回的 xml 为（为简洁起见省略 xmlns）：

```
<Animal><Id>1</Id><Name i:nil="true"/></Animal> 
```

提供 2 时：

```
<Dog><Id>2</Id><Name i:nil="true"/></Dog> 
```

这里有一个问题：**为什么不能为 Animal 构造的 DataContractSerializer 反序列化第二个 xml？**它抛出类似：从命名空间'bla bla'中期待元素'Animal'..遇到名称为'Dog'的'Element'，命名空间'bla bla'。

附加信息：
1\. 如果我构造 DataContractSerializer 并提供 typeof(Dog) 作为参数，它显然可以工作。
2\. 如果我构造 DataContractSerializer 提供 typeof(Animal) 作为参数（因为我不知道我要序列化/反序列化的对象类型）然后序列化 Dog，xml 将如下所示：

```
<Animal i:type="Dog"><Id>0</Id><Name i:nil="true"/></Animal> 
```

反过来可以使用相同的序列化程序对其进行反序列化，而不会出现任何问题。我可以强制 WCF 使用提供基本类型而不是派生的 DataContractSerializer 进行序列化（这似乎更合理，并且可能默认情况下应该存在）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-03T20:13:51.243

**在服务的接口**上使用 ServiceKnownType，而不是在类 Animal 上。

```
[ServiceKnownType(typeof(Dog))]
[ServiceContract]
public interface IAnimals 
{
  public Animal GetAnimalById(string id);
}

public class Animals : IAnimals { [your original code] } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:56:32.080

因为 WCF 传递的是结构化的 XML 数据，而不是类型。WCF 不是面向对象的。请参阅[http://msdn.microsoft.com/en-us/library/ms751512.aspx](http://msdn.microsoft.com/en-us/library/ms751512.aspx)

如果您愿意，可以使用[http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx ，或者创建一个自定义的。](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)

# mysql - 介绍一列从 1 到 381 的数字

> ID：14831005
> 
> 赞同：0
> 
> 时间：2013-02-12T11:02:30.737
> 
> 标签：mysql, phpmyadmin

我有一个包含 381 条记录的表，其列**id,name,dept_id**。

我将如何引入一个名为**row_id**的列，其编号为 1-381（以唯一标识每一行，之后它们需要从这一点自动递增）。

我需要在 MySQL 中写这个。我能想到的唯一其他方法是手动输入，但这会花费太长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:49:13.867

添加一个新列`alter table table_name add column row_id int()`然后执行此命令`SELECT @i:=0;UPDATE table_name SET row_id = @i:=@i+1`然后将其设为主键并将其设置为自动增量

# android - 错误将数据插入数据库

> ID：14831010
> 
> 赞同：0
> 
> 时间：2013-02-12T11:03:00.813
> 
> 标签：android

我尝试将数据插入到我的 sqlite 表中，但插入时遇到问题

我的错误日志

```
02-12 10:55:47.927: V/aaaa(1273): zaza
02-12 10:55:47.927: I/Database(1273): sqlite returned: error code = 1, msg = no such table: users
02-12 10:55:47.957: E/Database(1273): Error inserting username=zaza
02-12 10:55:47.957: E/Database(1273): android.database.sqlite.SQLiteException: no such table: users: , while compiling: INSERT INTO users(username) VALUES(?);
02-12 10:55:47.957: E/Database(1273):   at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
02-12 10:55:47.957: E/Database(1273):   at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
02-12 10:55:47.957: E/Database(1273):   at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
02-12 10:55:47.957: E/Database(1273):   at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
02-12 10:55:47.957: E/Database(1273):   at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:41)
02-12 10:55:47.957: E/Database(1273):   at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1149)
02-12 10:55:47.957: E/Database(1273):   at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1569)
02-12 10:55:47.957: E/Database(1273):   at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1426)
02-12 10:55:47.957: E/Database(1273):   at com.example.database.DatabaseMain$1$1.onClick(DatabaseMain.java:63)
02-12 10:55:47.957: E/Database(1273):   at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:159)
02-12 10:55:47.957: E/Database(1273):   at android.os.Handler.dispatchMessage(Handler.java:99)
02-12 10:55:47.957: E/Database(1273):   at android.os.Looper.loop(Looper.java:123)
02-12 10:55:47.957: E/Database(1273):   at android.app.ActivityThread.main(ActivityThread.java:3683)
02-12 10:55:47.957: E/Database(1273):   at java.lang.reflect.Method.invokeNative(Native Method)
02-12 10:55:47.957: E/Database(1273):   at java.lang.reflect.Method.invoke(Method.java:507)
02-12 10:55:47.957: E/Database(1273):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-12 10:55:47.957: E/Database(1273):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-12 10:55:47.957: E/Database(1273):   at dalvik.system.NativeStart.main(Native Method) 
```

我正在插入使用带有edittext的自定义对话框，我显示的editttext`log.v`是显示

但为什么不能插入我的数据？

我的代码

```
public class DatabaseMain extends Activity {

    private DataBaseHelper dbHelper;
    SQLiteDatabase db;
    //private CursorAdapter dataSource;

    //put the table name and column in constants
    public static final String TABLE_NAME = "users";
    public static final String COLUMN_NAME = "username";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_database_main);
        dbHelper = new DataBaseHelper (this);
        //dbHelper.openDataBase();
        db = dbHelper.getWritableDatabase();

        ListView listdata= (ListView)findViewById(R.id.listView1);
        Button btn = (Button)findViewById(R.id.button1);
        btn.setOnClickListener(new View.OnClickListener() {

            ContentValues values = new ContentValues();
            public void onClick(View v) {
                LayoutInflater inflater = DatabaseMain.this.getLayoutInflater();
                final View v1 =inflater.inflate(R.layout.username , null) ;

                new AlertDialog.Builder(DatabaseMain.this)
                    .setTitle("input your name:")
                    .setView(v1)
                    .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dlg, int sumthin) {
                            EditText name = (EditText)v1.findViewById(R.id.name);

                            String your_name = name.getText().toString();
                            values.put(COLUMN_NAME,name);

                                    db.insert(TABLE_NAME,null,values);
                        }
                    })
                    .show();

            }
        }); 
    }

} 
```

我正在使用文件中的数据库然后我放入文件夹资产然后我用这段代码复制

```
public class DataBaseHelper extends SQLiteOpenHelper{

    private static String DB_PATH = "/data/data/com.example/databases/";

    private static String DB_NAME = "MyDb";

    private SQLiteDatabase myDataBase; 

    private final Context myContext;

    private static DataBaseHelper sInstance = null;

    public DataBaseHelper(Context context) {

        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }   

    public void createDataBase() throws IOException{

        boolean dbExist = checkDataBase();

        if(dbExist){
            //do nothing - database already exist
        }else{

            this.getReadableDatabase();

            try {

                copyDataBase();

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }

    }

    private boolean checkDataBase(){

        SQLiteDatabase checkDB = null;

        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){

            //database does't exist yet.

        }

        if(checkDB != null){

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

    private void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        OutputStream myOutput = new FileOutputStream(outFileName);

        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException{

        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }
    public Cursor select(String query) throws SQLException {
        return myDataBase.rawQuery(query, null);
    }

    public void insert(String table, ContentValues values) throws SQLException {
        myDataBase.insert(table, null, values);
    }

    public void delete(String table, String where) throws SQLException {

        myDataBase.delete(table, where, null);

    }

    public void update(String table, ContentValues values, String where) {

        myDataBase.update(table, values, where, null);

    }
    public void sqlCommand(String command) {
        myDataBase.execSQL(command);
    }

    @Override
    public synchronized void close() {

            if(myDataBase != null)
                myDataBase.close();

            super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

    public static DataBaseHelper instance() {
        /*
        if (sInstance == null) {
            sInstance = new DataBaseHelper();
        }
        */
        return sInstance;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:06:53.157

它说数据库中不存在表名用户，如果您`db.execSQL("CREATE TABLE STATEMENT FOR USERS Table");`在创建数据库后已经为类似用户添加了创建表语句。我会向`uninstall`您推荐您的应用程序并`reinstall`再次推荐它。它也将用新添加的表创建数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:04:56.283

您需要在插入表之前创建表：

```
android.database.sqlite.SQLiteException: no such table: users: , while compiling: INSERT INTO users(username) VALUES(?); 
```

就像是：

```
db.execSQL("CREATE TABLE users(username varchar);"); 
```

# mule - Mule 应用程序进入可部署的 WAR

> ID：14831012
> 
> 赞同：4
> 
> 时间：2013-02-12T11:03:02.763
> 
> 标签：mule

如何将 Mule 应用程序直接转换为 war 文件，以部署在 Jboss 应用程序服务器中，我尝试按照[此处](http://somaniab.blogspot.in/2012/12/steps-to-deploy-mule-esb-application-on.html)提到的手动创建 war 文件但失败了，也经历了[这个](https://stackoverflow.com/questions/8648001/how-to-make-a-deployable-war-file-of-a-mule-esb-application)，但仍然没有对此有清晰的认识部分。提供示例帮助。注意：我的示例 mule 应用程序中没有 Mule-config.xml 文件

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T17:15:32.290

*   在 中`pom.xml`，确保您有`<packaging>war</packaging>`
*   `src/main/webapp/WEB-INF/web.xml`使用下面的模板创建，用`YOUR_CONFIGS`逗号分隔的 Mule 配置列表和`YOUR_PATH`您想要的 Mule servlet 路径替换，
*   用 Servlet 端点替换所有入站 HTTP 端点，例如`<servlet:inbound-endpoint path="/YOUR_ENDPOINT_PATH" />`

你应该很高兴去！

**网页.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">

    <context-param>
        <param-name>org.mule.config</param-name>
        <param-value>YOUR_CONFIGS</param-value>
    </context-param>

    <listener>
        <listener-class>org.mule.config.builders.MuleXmlBuilderContextListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>muleServlet</servlet-name>
        <servlet-class>org.mule.transport.servlet.MuleReceiverServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>muleServlet</servlet-name>
        <url-pattern>/YOUR_PATH/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

**编辑**我已经开源了一个正在运行的演示：[https ://github.com/ddossot/mule-webapp-example](https://github.com/ddossot/mule-webapp-example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:10:40.543

在这里你有所需的步骤： http: [//www.mulesoft.org/documentation/display/current/Deploying+Mule+to+JBoss](http://www.mulesoft.org/documentation/display/current/Deploying+Mule+to+JBoss)

# android - 从资产加载应用程序中的pdf文件

> ID：14831027
> 
> 赞同：0
> 
> 时间：2013-02-12T11:03:34.990
> 
> 标签：android, pdf

我的资产中存储了一个 PDF 文件。我想从我的资产中加载 PDF 并在应用程序本身中阅读它，而不使用任何 3rd 方应用程序来查看。

我在这个[链接](https://stackoverflow.com/questions/10299839/how-to-read-pdf-in-my-android-application/10352422#10352422)中得到了解决方案。从 sdcard 中选择文件时它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:07:57.757

以下代码段可能会帮助您访问文件`asset`夹中的文件，然后打开它：

```
private void ReadFromAssets()
{
    AssetManager assetManager = getAssets();

    InputStream in = null;
    OutputStream out = null;
    File file = new File(getFilesDir(), "file.pdf");
    try
    {
        in = assetManager.open("file.pdf");
        out = openFileOutput(file.getName(), Context.MODE_WORLD_READABLE);

        copyFile(in, out);
        in.close();
        in = null;
        out.flush();
        out.close();
        out = null;
    } catch (Exception e)
    {
        Log.e("tag", e.getMessage());
    }

    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setDataAndType(
            Uri.parse("file://" + getFilesDir() + "/file.pdf"),
            "application/pdf");

    startActivity(intent);
} 
```

方法`copyFile`如下：

```
private void copyFile(InputStream in, OutputStream out) throws IOException
{
    byte[] buffer = new byte[1024];
    int read;
    while ((read = in.read(buffer)) != -1)
    {
        out.write(buffer, 0, read);
    }
} 
```

**编辑**

为此，您必须使用外部库。下面的链接解释得很好： [Render a PDF file using Java on Android](https://stackoverflow.com/questions/2456344/display-pdf-within-app-on-android)

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:22:19.057

如果您可以使用 webview 打开它会更好

```
WebView web = (WebView) findViewById(R.id.webView1);

web.loadUrl("file:///android_asset/yourpdf.pdf"); 
```

希望它有效。

糟糕，刚才我检查了，无法在 web 视图中加载 pdf 抱歉

# cmake - CMake：在一个命令中将多个库链接到两个可执行文件

> ID：14831028
> 
> 赞同：8
> 
> 时间：2013-02-12T11:03:35.487
> 
> 标签：cmake

我有两个可执行文件都需要链接到 N 个相同的库：

```
add_executable(MyExe1 main1.cpp)
add_executable(MyExe2 main2.cpp)

target_link_libraries(MyExe1 lib1 lib2 lib3 ... libN)
target_link_libraries(MyExe2 lib1 lib2 lib3 ... libN) 
```

所以我必须写`target_link_libraries`两次；一次`MyExe1`又一次`MyExe2`。有什么办法可以缩短一些常用库链接到两个不同可执行文件的方式？我想知道是否可以在一个命令中将`lib1`...`libN`库链接到两者`MyExe1`，`MyExe2`以避免冗余并使 CMake 文件更干净。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T11:11:32.523

您可以使用该`set`命令从参数列表中设置变量：

```
add_executable(MyExe1 main1.cpp)
add_executable(MyExe2 main2.cpp)

set(LIBS lib1 lib2 lib3 ... libN)

target_link_libraries(MyExe1 ${LIBS})
target_link_libraries(MyExe2 ${LIBS}) 
```

# c# - 当另一个表被修改时更新一个表

> ID：14831032
> 
> 赞同：0
> 
> 时间：2013-02-12T11:04:01.747
> 
> 标签：c#, database, ado.net, oledb

我在 Access 数据库中有 2 个表。（SQL 示例很好）。

第一个表是一个名为 Reports 的表。

字段是： -

*   ID
*   报告名称
*   报告类型

第二个表是一个模板，用户将在其中存储大量报告。用户每周修改这个模板表。以下是字段：-

*   ID
*   用户身份
*   报告名称
*   报告类型
*   约定的日期
*   完全的
*   分配者

我的代码中的所有内容都可以正常工作，但我忽略了一些重要的事情。

我需要将用户可能对报告表、IE、编辑报告名称所做的更改反映到模板表中，以便已编辑报告的任何实例现在都显示新名称。

我正在努力弄清楚我该怎么做？

任何帮助将不胜感激，它不必是确切的代码，更重要的是方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:15:10.607

仅适用于 .adp 项目，您应该可以使用触发器来执行此操作。

就像是

```
create <trigger_name>
ON Report
.... 
```

# java - Java将整数值连接为一个字节

> ID：14831034
> 
> 赞同：4
> 
> 时间：2013-02-12T11:04:04.160
> 
> 标签：java, java-me, argb

我有以下 4 个代表 ARGB 的整数值：

```
int value1 = 0xFF;
int value2 = 68;
int value3 = 68;
int value4 = 68; 
```

我想连接这些值，以便它们表示以下内容：

```
int test = 0xFF686868; 
```

我目前的方法是使用：

```
int test2 = 0xFF | value1 | value2 | value3; 
```

但是使用这种方法 test1 和 test2 的整数值不匹配，我做错了什么？我仅限于 J2ME。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T11:05:14.020

您快到了：您需要做的就是将各个字节移动到位，然后`OR`再将它们 -ing 在一起。

```
int test2 = (value1 << 24) | (value2 << 16) | (value3 << 8) | value4; 
```

不要忘记`68`为所需的输出制作你的 s 十六进制`0xFF686868`

```
int value2 = 0x68; // Add 0x to all three of the 68s 
```

# python - 如何使用selenium python webdriver从Web应用程序中计算表中的行数

> ID：14831041
> 
> 赞同：15
> 
> 时间：2013-02-12T11:04:41.150
> 
> 标签：python, selenium-webdriver

如何使用 selenium python web 驱动程序从 web 应用程序中计算表中的行数。在这里，我们可以从 Web 应用程序中检索表中的所有数据，但无法计算行数和列数，请告诉我如何执行此操作。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-12T16:15:58.617

尝试这样的事情

```
int rowCount=driver.findElements(By.xpath("//table[@id='DataTable']/tbody/tr")).size();

int columnCount=driver.findElements(By.xpath("//table[@id='DataTable']/tbody/tr/td")).size(); 
```

仅供参考：这是java中的实现。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-25T22:34:27.873

Santoshsarma 的答案对于 Java 来说几乎是正确的，但它会计算单元格的数量而不是列的数量。这是一个 Python 版本，它将计算第一行中的列数：

```
row_count = len(driver.find_elements_by_xpath("//table[@id='DataTable']/tbody/tr"))
column_count = len(driver.find_elements_by_xpath("//table[@id='DataTable']/tbody/tr/td")) 
```

如果您的表格有标题，您可以计算那里的列。

我还没有尝试过使用 storeXpathCount。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-03T09:19:26.770

您可以使用[find_elements_by](http://selenium-python.readthedocs.io/locating-elements.html#locating-elements)或[execute_script](http://selenium-python.readthedocs.io/api.html?highlight=execute_script#selenium.webdriver.remote.webdriver.WebDriver.execute_script)来完成。

[通过在find_elements_by](http://selenium-python.readthedocs.io/locating-elements.html#locating-elements)的结果上应用[len](https://docs.python.org/2/library/functions.html#len)来检索计数是正确的方法，但是在另一方面，通过使用[**execute_script**](http://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webdriver.WebDriver.execute_script)获取行和列的计数比从方法调用的结果中获取要**快得多：**[](http://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webdriver.WebDriver.execute_script)****`len``find_elements_by`****

 ****```
rows_count = driver.execute_script("return document.getElementsByTagName('tr').length")
columns_count = driver.execute_script("return document.getElementsByTagName('tr')[0].getElementsByTagName('th').length") 
```

以下是使用**find_elements_by 与 execute_script**方法的性能指标：

```
from timeit import timeit

# Time metrics of retrieving 111 table rows
timeit(lambda:driver.execute_script("return document.getElementsByTagName('tr').length"), number=1000)
# 5.525
timeit(lambda:len(driver.find_elements_by_tag_name("tr")), number=1000) 
# 9.799
timeit(lambda:len(driver.find_elements_by_xpath("//table/tbody/tr")), number=1000)
# 10.656

# Time metrics of retrieving 5 table headers
timeit(lambda:driver.execute_script("return document.getElementsByTagName('tr')[0].getElementsByTagName('th').length"), number=1000)
# 5.441
timeit(lambda:len(driver.find_elements_by_tag_name("th")), number=1000)
8.604
timeit(lambda:len(driver.find_elements_by_xpath("//table/tbody/th")), number=1000)
# 9.336 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-28T14:35:03.833

Selenium 具有计算 XPath 结果的功能，请参见[http://release.seleniumhq.org/selenium-core/1.0/reference.html](http://release.seleniumhq.org/selenium-core/1.0/reference.html)。据此，您可以使用 storeXpathCount。

我正在使用 selenium-java-client-driver 中的 DefaultSelenium 类，我可以在其中使用（也在 java 中）以下内容：

```
int rowCount = selenium.getXpathCount("//table[@id='Datatable']/tbody/tr").intValue() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-06T13:26:55.530

对于 python 用户，计算标签的简单方法如下。

```
!#use find_elements_by_xpath

test_elem = self.driver.find_elements_by_xpath("//div[@id='host-history']/table[1]/tbody[1]/tr")

!#then check the len of the returnes list

print (len(test_elem)) 
```****

# java - 在 HashSet/HashMap java中找到最大的数

> ID：14831045
> 
> 赞同：26
> 
> 时间：2013-02-12T11:04:48.870
> 
> 标签：java, hashmap, hashset

我想在 HashSet 和 HashMap 中找到最大的数字。假设我的 HashSet 中有数字 [22,6763,32,42,33]，我想在当前的 HashSet 中找到最大的数字..我该怎么做？HashMap 也一样。我希望你能帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-02-12T11:06:41.113

您可以使用它[`Collections.max(Collection)`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#max%28java.util.Collection%29)来查找任何集合中的最大元素。同样，对于 a [`HashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)，您可以在其[`keySet()`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#keySet%28%29)or上使用相同的方法[`values()`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#values%28%29)，具体取决于您想要最大键还是最大值。

此外，如果您愿意，您可以使用[`TreeSet`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)and[`TreeMap`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)代替，它将元素按排序键顺序存储。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-12T11:10:05.340

尝试

```
 int max = Collections.max(set);
    int maxKey = Collections.max(map.keySet());
    int maxValue Collections.max(map.values()); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-12T11:07:04.390

如果您被迫使用`HashSet`/ `HashMap`，那么您必须扫描整个`HashSet`/`HashMap`才能找到最大值。像这样的库函数`Collections.max()`会这样做。

如果您想`O(1)`检索最大值，并且您可以更改正在使用的集合类型，请使用排序集/映射（例如`TreeSet`/ `TreeMap`）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-12T11:08:16.173

像这样的东西：

```
Set<Integer> values = new HashSet<Integer>() {{
    add(22);
    add(6763);
    add(32);
    add(42);
    add(33);
}};
int maxValue = Integer.MIN_VALUE;
for (int value : values) {
    if (value > maxValue) {
        maxValue = value;
    }
} 
```

还有这个：

```
Map<String, Integer> values = new HashMap<String, Integer>() {{
    put("0", 22);
    put("1", 6763);
    put("2", 32);
    put("3", 42);
    put("4", 33);
}};
int maxValue = Integer.MIN_VALUE;
for (int value : values.values()) {
    if (value > maxValue) {
        maxValue = value;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T11:29:04.670

在 TreeMap 的情况下，如果您知道键/值是随机插入的，那么树将或多或少是平衡的。树变得不平衡，如果以已经排序的顺序插入数据，那么快速查找（或插入或删除）给定元素的能力将丢失。在不平衡树的情况下，它将花费与 n 成正比的时间，O(n) 否则 O(1)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-03T06:46:15.670

考虑使用[Apache Commons Math](http://commons.apache.org/math/)。这是[API 文档](http://commons.apache.org/proper/commons-math/apidocs/index.html)。
感兴趣的类是[SummaryStatistics](http://commons.apache.org/proper/commons-math/apidocs/org/apache/commons/math3/stat/descriptive/SummaryStatistics.html)。它与`double`s 一起工作并即时计算最大值、最小值、平均值等（当您向其添加值时）。数据值不存储在内存中，因此此类可用于计算非常大的数据流的统计信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-17T21:27:03.080

这是一个简单的方法，可以满足您的要求：

```
 public String getMapKeyWithHighestValue(HashMap<String, Integer> map) {
    String keyWithHighestVal = "";

    // getting the maximum value in the Hashmap
    int maxValueInMap = (Collections.max(map.values()));

    //iterate through the map to get the key that corresponds to the maximum value in the Hashmap
    for (Map.Entry<String, Integer> entry : map.entrySet()) {  // Iterate through hashmap
        if (entry.getValue() == maxValueInMap) {

            keyWithHighestVal = entry.getKey();     // this is the key which has the max value
        }

    }
    return keyWithHighestVal;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-25T15:22:50.483

**注意**：如果您想从 Map 中找到最大值，请尝试使用 maxEntry.get().getValue() 而不是 maxEntry.get().getKey()

**1\. 使用流**

```
public <K, V extends Comparable<V>> V maxUsingStreamAndLambda(Map<K, V> map) {
    Optional<Entry<K, V>> maxEntry = map.entrySet()
        .stream()
        .max((Entry<K, V> e1, Entry<K, V> e2) -> e1.getValue()
            .compareTo(e2.getValue())
        );

    return maxEntry.get().getKey();
} 
```

**2\. 将 Collections.max() 与 Lambda 表达式一起使用**

```
public <K, V extends Comparable<V>> V maxUsingCollectionsMaxAndLambda(Map<K, V> map) {
    Entry<K, V> maxEntry = Collections.max(map.entrySet(), (Entry<K, V> e1, Entry<K, V> e2) -> e1.getValue()
        .compareTo(e2.getValue()));
    return maxEntry.getKey();
} 
```

**3\. 使用 Stream 和方法参考**

```
public <K, V extends Comparable<V>> V maxUsingStreamAndMethodReference(Map<K, V> map) {
    Optional<Entry<K, V>> maxEntry = map.entrySet()
        .stream()
        .max(Comparator.comparing(Map.Entry::getValue));
    return maxEntry.get()
        .getKey();
} 
```

**4\. 使用 Collections.max()**

```
public <K, V extends Comparable<V>> V maxUsingCollectionsMax(Map<K, V> map) {
    Entry<K, V> maxEntry = Collections.max(map.entrySet(), new Comparator<Entry<K, V>>() {
        public int compare(Entry<K, V> e1, Entry<K, V> e2) {
            return e1.getValue()
                .compareTo(e2.getValue());
        }
    });
    return maxEntry.getKey();
} 
```

**5\. 使用简单迭代**

```
public <K, V extends Comparable<V>> V maxUsingIteration(Map<K, V> map) {
    Map.Entry<K, V> maxEntry = null;
    for (Map.Entry<K, V> entry : map.entrySet()) {
        if (maxEntry == null || entry.getValue()
            .compareTo(maxEntry.getValue()) > 0) {
            maxEntry = entry;
        }
    }
    return maxEntry.getKey();
} 
```

# cuda - 如何禁用特定的 nvcc 编译器警告

> ID：14831051
> 
> 赞同：20
> 
> 时间：2013-02-12T11:05:01.917
> 
> 标签：cuda, compiler-warnings, pragma, nvcc

我想用 禁用特定的编译器警告`nvcc`，特别是

> 警告：不允许 NULL 引用

我正在编写的代码使用`NULL`引用是 SFINAE 的一部分，因此无法避免。

一个理想的解决方案是`#pragma`在我们想要禁用警告的源文件中，但是如果存在一个编译器标志来只关闭有问题的警告，那么编译器标志也可以。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-06-13T19:59:40.153

实际上可以使用 NVCC 禁用设备上的特定警告。我花了很长时间才弄清楚该怎么做。

您需要将该标志与[此页面](http://www.ssl.berkeley.edu/~jimm/grizzly_docs/SSL/opt/intel/cc/9.0/lib/locale/en_US/mcpcom.msg)`-Xcudafe`上列出的令牌结合使用。例如，要禁用“控制表达式是常量”警告，请将以下内容传递给 NVCC：

```
-Xcudafe "--diag_suppress=boolean_controlling_expr_is_constant" 
```

有关其他警告，请参阅上面的[链接](http://www.ssl.berkeley.edu/~jimm/grizzly_docs/SSL/opt/intel/cc/9.0/lib/locale/en_US/mcpcom.msg)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-04-24T09:09:14.927

只是添加到关于 -xcudafe 的先前答案（还没有足够的声誉发表评论）

**主要编辑：**

cudaFE 显然是来自 Edison Design Group 的 Nvidia 定制版 C++ 前端。你可以在这里找到它的文档：[http](http://www.edg.com/docs/edg_cpp.pdf) ://www.edg.com/docs/edg_cpp.pdf 。我目前指的是 2019 年 7 月 v5.1 手册中的页码。

@einpoklum 指出，像我最初在最初的帖子中所说的那样做 push/pop 是行不通的，特别是 #pragma push 会产生一个警告，表明它被忽略了。我无法复制警告，但实际上在下面的测试程序中，CUDA 10.1 和 CUDA 9.2 都没有推送/弹出实际上做任何事情（请注意，第 20 和 22 行不生成任何警告）。

但是，在本手册的第 75 页上，他们介绍了如何在没有推送/弹出的情况下进行本地化诊断严重性控制：

> 下面的例子抑制了 A 类声明中的“无意义的朋友声明”警告：
> 
> ```
> #pragma diag_suppress 522
> class A { friend class A; };
> #pragma diag_default 522
> class B { friend class B; }; 
> ```

#pragma diag_default 将警告返回到默认状态。另一个例子是：

```
#pragma diag_suppress = code_is_unreachable
...
#pragma diag_default = code_is_unreachable 
```

等号是可选的。测试表明这是可行的，并且真正本地化了严重性控制。此外，测试表明以这种方式添加诊断抑制会增加以前的诊断抑制 - 它不会取代。另外值得注意的是，在 CUDA 10.1 中，无法访问的代码在 CUDA 9.2 中没有生成警告。最后，手册的第 77 页提到了一种新的 push/pop 语法：

```
#pragma push_macro(“identifier”)
#pragma pop_macro(“identifier”) 
```

但我无法让它在下面的程序中工作。

以上所有内容都在下面的程序中进行了测试，编译为`nvcc -std=c++14 test_warning_suppression.cu -o test_warning_suppression`：

```
#include <cuda_runtime.h>

__host__ __device__ int return1(){
    int j = -1; //warning given for both CUDA 9.2 and 10.1
    return 1;
    if(false){ return 0; } //warning given here for CUDA 9.2
}

#pragma push
#pragma diag_suppress = code_is_unreachable 
#pragma diag_suppress = declared_but_not_referenced
__host__ __device__ int return2(){
    int j = -1;
    return 2;
    if(false){ return 0; }
}
#pragma pop

__host__ __device__ int return3(){
    int j = -1; //no warning given here
    return 3;
    if(false){ return 0; } //no warning here even in CUDA 9.2 
}

//push/pop did not localize warning suppression, so reset to default
#pragma diag_default = declared_but_not_referenced
#pragma diag_default = code_is_unreachable

//warning suppression localized to lines above by diag_default!
__host__ __device__ int return4(){
    int j = -1; //warning given for both CUDA 9.2 and 10.1
    return 4;
    if(false){ return 0; } //warning given here for CUDA 9.2
}

/* below does not work as of CUDA 10.1
#pragma push_macro(“identifier”)
#pragma diag_suppress = code_is_unreachable 
__device__ int return5(){
    return 5;
    if(false){ return 0; }
}
#pragma pop_macro(“identifier”)

__device__ int return6(){
    return 6;
    if(false){ return 0; }
} */

int main(){ return 0; } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-01-11T08:39:10.320

要增加 user2333829 的答案：如果您知道警告名称，您可以像这样禁用它：

```
-Xcudafe "--diag_suppress=boolean_controlling_expr_is_constant" 
```

如果您不知道名称，请通过编译获取警告编号：

```
-Xcudafe --display_error_number 
```

然后：

```
-Xcudafe --diag_suppress=<warning_number> 
```

（注意：两个选项同时显然不起作用。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-13T04:53:14.497

您可以使用 w 标志来抑制警告 `nvcc -w`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-18T21:31:28.327

我努力`-Xcudafe`为我的警告找到匹配项。所以这里有另一种方式。

您可以将编译器标志传递给`CL.exe`它将禁用特定警告。例如，要禁用有关未经检查的迭代器的警告，您可以通过`/wd4996`.

```
warning C4996: 'std::_Copy_impl': Function call with parameters that may be
unsafe - this call relies on the caller to check that the passed values are 
correct. To disable this warning, use -D_SCL_SECURE_NO_WARNINGS. See 
documentation on how to use Visual C++ 'Checked Iterators' 
```

这里的棘手之处在于，默认情况下主机编译器设置中的参数不会传递给`nvcc`，因此您需要通过`CUDA C/C++`对话框添加它。

[![在此处输入图像描述](../Images/b2a03f0ca6efb755b179c317f67939e4.png)](https://i.stack.imgur.com/BGhX8.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-10T19:41:44.067

我将 nvcc 与 ubuntu g++ 编译器一起使用，在我的例子中是 openmpi mpic++。对于 g++ 编译器的“-Wunused-result”，相应的消息抑制是“-Wno-unused-result”。所以像 -Xcompiler "-Wno-unused-result" 这样在 nvcc 中传递它对我有用。

# java - 如何在 iText 中从 pdf 的第一页创建图像

> ID：14831056
> 
> 赞同：2
> 
> 时间：2013-02-12T11:05:25.030
> 
> 标签：java, android, pdf, itext

我想从 PDF 的第一页创建图像。我在 java 中使用 iText 。您能建议我如何将 pdf 的第一页提取为图像吗？

```
Document document = new Document();               
PdfWriter writer = PdfWriter.getInstance(  
  document, new FileOutputStream(RESULT));     
document.open();                  

File extStore = Environment.getExternalStorageDirectory();
String path=extStore.getPath()+"/FirstPdf.pdf";

PdfReader reader = new PdfReader(path); 
int n = reader.getNumberOfPages();
PdfImportedPage page; 
for (int i = 1; i <= n; i++) {
  page = writer.getImportedPage(reader, i);
//  Image.getInstance(page) ; 
} 

document.close(); 
```

我已经写了上面的代码。如何将 pdf 的第一页提取为图像并将其保存在 SDCARD 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-08T19:40:22.303

iText 不适用于此目的。

[http://www.java2s.com/Open-Source/Android_Free_Code/Pdf/Download_Free_code_Android_Pdf_Viewer_Library.htm](http://www.java2s.com/Open-Source/Android_Free_Code/Pdf/Download_Free_code_Android_Pdf_Viewer_Library.htm)

jar 文件在 zip 中。

下载该库 PdfViewer.jar 并尝试以下代码：

```
 byte[] bytes;
        try {

            File file = new File("/storage/extSdCard/Test.pdf");
            FileInputStream is = new FileInputStream(file);

            // Get the size of the file
            long length = file.length();
            bytes = new byte[(int) length];
            int offset = 0;
            int numRead = 0;
            while (offset < bytes.length && (numRead=is.read(bytes, offset, bytes.length-offset)) >= 0) {
                offset += numRead;
            }
            ByteBuffer buffer = ByteBuffer.NEW(bytes);
            String data = Base64.encodeToString(bytes, Base64.DEFAULT);
            PDFFile pdf_file = new PDFFile(buffer);
            PDFPage page = pdf_file.getPage(2, true);

            RectF rect = new RectF(0, 0, (int) page.getBBox().width(),
            (int) page.getBBox().height());

            Bitmap image = page.getImage((int)rect.width(), (int)rect.height(), rect);
            FileOutputStream os = new FileOutputStream("/storage/extSdCard/pdf.jpg");
            image.compress(Bitmap.CompressFormat.JPEG, 80, os);
            //((ImageView) findViewById(R.id.testView)).setImageBitmap(image);

        } catch (Exception e) {
            e.printStackTrace();
        } 
```

您可以更改 rect 以使其提取您想要的 pdf 的任何部分等，非常好。在找到解决方案之前，我花了大约 16 个小时将我的头撞在墙上。不太确定如果没有 swing awt 库是否可行。抱歉，存储是硬编码的，但这是我当时最不关心的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-09T10:37:04.280

我最终发现了如何做最初提出的问题！！！

您需要 iTextG 库 (itextg-5.5.3.jar)、scpkix-jdk15on.1.47.0.1.jar & scprov-jdk15on-1.47.0.2.jar

在里面想从哪里调用它：

```
public static final String RESULT = "/storage/sdcard0/dirAtExtStorage/Img%s.%s";

public void extractImages(String filename)
    throws IOException, DocumentException {

    PdfReader reader = new PdfReader(filename);
    PdfReaderContentParser parser = new PdfReaderContentParser(reader);
    MyImageRenderListener listener = new MyImageRenderListener(RESULT);
    for (int i = 1; i <= reader.getNumberOfPages(); i++) {
        parser.processContent(i, listener);
    }
} 
```

在 MyImageRendererListener.java 中：

```
public class MyImageRenderListener implements RenderListener{

private String path;

public MyImageRenderListener(String path) {
    this.path = path;

  }

@Override
public void beginTextBlock() {
    // TODO Auto-generated method stub

}

@Override
public void endTextBlock() {
    // TODO Auto-generated method stub

}

public void renderImage(ImageRenderInfo renderInfo) {
    try {
        System.out.print("renderImage");
        String filename;
        FileOutputStream os;
        PdfImageObject image = renderInfo.getImage();
        if (image == null) return;
        filename = String.format(path, renderInfo.getRef().getNumber(), image.getFileType());
        os = new FileOutputStream(filename);
        os.write(image.getImageAsBytes());
        os.flush();
        os.close();
    } catch (IOException e) {
        System.out.println(e.getMessage());
    }
}

@Override
public void renderText(TextRenderInfo arg0) {
    // TODO Auto-generated method stub
  }
  } 
```

享受伙计们

# ruby-on-rails - 来自 before_configuration 的 rails 变量在 database.yml 中不可用

> ID：14831059
> 
> 赞同：1
> 
> 时间：2013-02-12T11:05:36.230
> 
> 标签：ruby-on-rails, callback, database-connection, yaml, initializer

我已经编写了自己的 yaml 配置文件，如[railscast #85](http://railscasts.com/episodes/85-yaml-configuration-file)中所述。APP_CONFIG['FOO'] 在初始化程序（例如 sidekiq.yml）中有效，但在 database.yml 中无效（错误：nil:NilClass 的未定义方法 '+'；'+' 用于串联：APP_CONFIG[' FOO'] +'酒吧'）。

即使将 APP_CONFIG 放入 before_configuration 也不能解决这个问题。

```
Rails.application.config.before_configuration do
  APP_CONFIG = YAML.load_file("#{RAILS_ROOT}/config/config.yml")
end 
```

同样的问题。APP_CONFIG 仍然导致 database.yml 中的 nil:NilClass 错误。所以这里的问题是：如何强制我的 config.yml 在 database.yml 之前加载，以便它在 database.yml 以及初始化程序（sidekiq.yml）中可用？

# c# - 从 Web 应用程序调用 exe 文件

> ID：14831060
> 
> 赞同：0
> 
> 时间：2013-02-12T11:05:39.357
> 
> 标签：c#, asp.net

我有一个控制台应用程序的 exe 文件，其参数为：

> A.exe --i=123 --o=abc

out 是在预定义的输出文件夹中创建的通用 tsv 文件。

出于某种原因，我需要开发一个可以调用 A.exe 的 Web 应用程序（以便将输入参数作为请求参数传递）并将文件的内容作为 Web 响应返回。

就像是：

www.myserver.com/A?i=123?o=abc

有人可以建议一些入门指南吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:16:02.643

您可以尝试使用 Process 如下，

```
Process proc = new Process(); 
proc.EnableRaisingEvents = false; 
proc.StartInfo.FileName = Path.Combine(exePath, @"A.exe");
proc.StartInfo.Arguments = String.Format(@"-i = ""{0}"" -o = ""{1}""", "123", "abc");
proc.Start() 
```

注意：为应用程序池设置适当的权限以运行此应用程序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T11:13:31.717

制作你的 exe 的 dll 并从 asp.net 处理程序中调用它 .ashx
这是一个更好的选择。

# php - jQuery在id选择器中连接int和string

> ID：14831064
> 
> 赞同：0
> 
> 时间：2013-02-12T11:05:49.007
> 
> 标签：php, jquery, click

我有一堆这样命名的表格单元格：

```
for($x=0;$x<20;$x++){
            echo "<td id='td"; echo $x; echo "'>";
                        //put some text in the cell...
                    echo "</td>";

} 
```

即每个单元格的 id 是 td0,td1,td2... 表格看起来不错。现在我想用 jQuery 让它可点击（按单元格）。

我尝试作为测试用例：

```
$("#td0").click(function(){        
  $(this).css("background-color","yellow");
  //do some other stuff...

}); 
```

这工作得很好。第一个单元格是可点击的。现在我想使用 for 循环使每个单元格都可以点击：

```
for(i=0;i<20;i++){
    cell = "#td"+i;
    $(cell).click(function(){
                 //stuff...
        });
} 
```

这不适用于任何单元格。我不确定为什么，或者如何解决它。任何帮助表示赞赏。

编辑

抱歉，我应该提到，功能会因单元格的不同而有所不同（例如，单击 td0 与单击 td8 会有非常不同的动作），所以我不能只使用通用的“td”，我不认为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:06:58.417

```
$('td[id^="td"]').click(function() { ... }) 
```

编辑：[小提琴](http://jsfiddle.net/bUsKp/1/)。

编辑（问题略有改变）：[新小提琴](http://jsfiddle.net/bUsKp/2/)。

```
$('td[id^="td"]').click(function() {
    var tdVal = $(this).attr('id').replace('td', '');
    switch (tdVal) { ... }
}) 
```

我认为您最好使用 data-* 属性来表示值，但是：

```
<td class="myTableCell" data-value="0"></td>
<td class="myTableCell" data-value="1"></td>

$('td.myTableCell').click(function() {
    var tdVal = $(this).attr('data-value');
    ...
}) 
```

编辑：[最终小提琴](http://jsfiddle.net/bUsKp/3/)。

...并使用 PHP（无需多次使用 echo）：

```
for($x=0;$x<20;$x++){
        echo "<td id='td' data-value='" . $x . "'>";
                    //put some text in the cell...
                echo "</td>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:17:33.087

解决它的最便宜的方法是添加一个类并且只使用 1 个绑定函数。

```
for($x=0;$x<20;$x++){
        echo "<td class='table-cell' id='td" . $x . "'>";

        //put some text in the cell...
        echo "</td>";

} 
```

现在将其绑定到 click 并检查 clicked 的 id

```
$(".table-cell").click(function(e){        
    $(e.target.id).css("background-color","yellow");
    //do some other stuff...

}); 
```

或者您可以在绑定中使用开关

```
$(".table-cell").click(function(e){        

    switch(e.target.id)
    {
    case 1:
      //execute code block 1
      break;
    case 2:
      //execute code block 2
      break;
    default:
      //code to be executed for default
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:08:19.673

```
$('td[id^="td"]').click(function(){        
  $(this).css("background-color","yellow");
  //do some other stuff...

}); 
```

# python - GAE Python：图像在本地主机上工作，但在部署后不工作

> ID：14831066
> 
> 赞同：0
> 
> 时间：2013-02-12T11:05:58.453
> 
> 标签：python, google-app-engine

```
- url: /static/images/(.*\.(gif|ico|jpeg|jpg|png))
  static_files: static/images/\1
  upload: uploads/(.*\.(gif|ico|jpeg|jpg|png)) 
```

以上是我的 app.yaml 文件。它在本地主机上工作，但在部署后不工作。我在 gae 网站上收到 404 响应。谁知道怎么修它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:45:47.753

您正在尝试从错误的文件夹上传文件。试试这个：

```
- url: /static/images/(.*\.(gif|ico|jpeg|jpg|png))
  static_files: static/images/\1
  upload: static/images/(.*\.(gif|ico|jpeg|jpg|png)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:08:38.143

AppEngine 是区分大小写的文件系统，请检查图像的大小写是否与文件名匹配。

* * *

也许你的文件没有上传，从一个基本的处理程序开始，看看是什么阻止了上传：

```
- url: /static/images
  static_files: static/images
  upload: uploads 
```

# html - 将内容从本地存储移动到 OS 文件系统

> ID：14831079
> 
> 赞同：-1
> 
> 时间：2013-02-12T11:06:40.647
> 
> 标签：html, api, browser, filesystems, local-storage

我正在寻找实现拖放解决方案，而不是使用文件系统 API 将网页内容和资产存储在本地存储中。我的问题是我需要将存储在本地存储中的文件移动到 OS 文件系统。听到很少有人对此进行实施会很有趣。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:17:37.777

HTML5 包含一个文件系统 API，允许您在安全的虚拟文件系统中读取、写入和创建文件，这些文件也是特定于域的（没有文件与其他域交叉）。
如果您只是想存储内容和资产以供离线查看，您可以创建一个 Manifest Cache。我认为不需要本地存储、拖放或文件系统 API，因为这些是非常不同的工具，可以满足非常不同的需求。无论如何，如果您仍想使用文件系统 API，[请查看 MDN 的此页面](https://developer.mozilla.org/en-US/docs/DOM/File_API/File_System_API)。

安吉拉

# iphone - 可变内存地址归属 EXEC_BAD_ACESS

> ID：14831083
> 
> 赞同：0
> 
> 时间：2013-02-12T11:06:50.900
> 
> 标签：iphone, objective-c, pointers, nsdate, exc-bad-access

我有一个分配的对象，其属性存储在以下内存位置： ![内存状态](../Images/0c5228640abf5c430797f241023cd273.png)

当我将属性简单归因`NSDate`于变量时，它给了我一个`EXEC_BAD_ACESS`. 正如您从第一张图片中看到的，只有日期属性和`fileDate`变量具有不同的地址。

![EXEC_BAD_ACCESS](../Images/4dd50ec8c1b84792bc08a49440062797.png)

我是否犯了一些与指针相关的错误？其他 2 个属性已正确分配给变量，它只发生在 .`NSDate`所以我可能遗漏了一些关于`NSDate`.

编辑1

`DownloadFile`定义： ![下载文件](../Images/3683fec6e563d30bf6c04aa971245735.png)

编辑2

初始化函数： ![在此处输入图像描述](../Images/5d6ff8719a28c904173568b89f384bc6.png)

EDIT3 日期参数：

![日期](../Images/2010bbd8a4a7063b4ce2c38cba62c993.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:41:51.030

你有什么理由不使用ARC？那里有很多内存管理错误会导致泄漏，还有一个会导致崩溃。

```
NSDate *dateFromString = [dateFormatter dateFromString:receivedDate]; 
```

返回一个自动释放的`NSDate`，所以当你然后调用附加的

```
[dateFromString autorelease]; 
```

你过度释放了`NSDate`你的崩溃。

* * *

```
[pFile setDate:[[NSDate alloc] init]]; 
```

是内存泄漏。通过 setter`setDate:`将导致`pFile`在日期上获得 +1 保留，它应该在它的`dealloc`. 该`[[NSDate alloc] init]`调用返回一个带有 +1 的日期对象，但随后永远不会在其他地方发布。

您可以使用以下方法解决此问题

```
[NSDate date] 
```

或者

```
[[[NSDate alloc] init] autorelease]; 
```

第一个选项是首选

# vb.net - DotNetOpenAuth2 与 VB.Net 的错误

> ID：14831086
> 
> 赞同：0
> 
> 时间：2013-02-12T11:07:04.830
> 
> 标签：vb.net, dotnetopenauth, google-api-dotnet-client

我的新项目需要实现 OpenAuth。以下是我的代码。

线

```
scopes.Add(CalendarService.Scopes.Calendar.GetStringValue()) 
```

在 GetAuthorization 中给出以下错误。

> 重载解析失败，因为没有可访问...

GetStringValue 是这些参数最具体的。我可以理解 GetStringValue 不是在 calendarservice.scopes.calendar 中找到的方法/参数，但我的问题是为什么会这样？我已经从某个网站下载了这段代码，大多数网站都在 C# 中给出示例，但几乎没有任何网站在 VB.Net 中显示任何示例。有人能帮我一下吗。

问候

PS 我正在使用 Visual Studio 2008。

```
Imports System
Imports System.Diagnostics
Imports DotNetOpenAuth.OAuth2
Imports Google.Apis.Authentication.OAuth2
Imports Google.Apis.Authentication.OAuth2.DotNetOpenAuth
Imports Google.Apis.Calendar.v3
Imports Google.Apis.Util
Imports Google.Apis.Calendar.v3.Data
Imports Google.Apis.Tasks.v1
Imports Google.Apis.Tasks.v1.Data

Partial Class _Default
    Inherits System.Web.UI.Page

    Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim provider = New NativeApplicationClient(GoogleAuthenticationServer.Description)
        provider.ClientIdentifier = "Client ID Here"
        provider.ClientSecret = "Client Secret Here"
        Dim auth = New OAuth2Authenticator(Of NativeApplicationClient)(provider, AddressOf GetAuthorization)

        Dim service = New CalendarService(auth)
        Dim first = service.CalendarList.List.Fetch().Items().First()

        Label1.Text = first.Summary

    End Sub

    Private Function GetAuthorization(ByVal arg As NativeApplicationClient) As IAuthorizationState

        Dim scopes As New System.Collections.Generic.List(Of String)

        scopes.Add(CalendarService.Scopes.Calendar.GetStringValue())

        Dim state As IAuthorizationState = New AuthorizationState(scopes)
        state.Callback = New Uri(NativeApplicationClient.OutOfBandCallbackUrl)
        Dim authUri As Uri = arg.RequestUserAuthorization(state)

        Process.Start(authUri.ToString())

        ' Open a modal dialogue for user to paste the authorization code from Browser = authCode 
        Dim authCode As String = Console.ReadLine()
        Return arg.ProcessUserAuthorization(authCode, state)

    End Function
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:58:48.973

GetStringValue 是在 Google.Apis.Util.Utilities 上定义的扩展方法。

与此类似的 VB.NET 代码在具有最新版本库的 VS2012 上对我有用。[你可以在https://codereview.appspot.com/7007048/](https://codereview.appspot.com/7007048/)找到我的 VB.NET 示例，但它仍然没有被批准，所以要小心使用它。

在示例存储库 ( [http://code.google.com/p/google-api-dotnet-client/source/browse/?repo=samples#hg%2FDiscovery.VB.ListAPIs](http://code.google.com/p/google-api-dotnet-client/source/browse/?repo=samples#hg%2FDiscovery.VB.ListAPIs) ) 中，目前只有一个 VB。 NET 示例，但希望上面的示例将很快获得批准，并将添加到存储库中。

请详细说明您在项目中的引用和堆栈跟踪。看起来您的代码或参考程序集中的其他地方（[http://msdn.microsoft.com/en-us/library/2hx4ayzs(v=vs.80).aspx ）对此 GetStringValue 有另一个重载。](http://msdn.microsoft.com/en-us/library/2hx4ayzs(v=vs.80).aspx)

# c++ - 在构造函数中调用纯虚函数会报错

> ID：14831094
> 
> 赞同：4
> 
> 时间：2013-02-12T11:07:17.137
> 
> 标签：c++, oop, class, inheritance, virtual

```
class a //my base class
 {
public:
    a()
    {
        foo();
    }
  virtual void foo() = 0;
};

class b : public a
{
    public:
    void foo()
    {
    }
};

int main()
{
    b obj; //ERROR:  undefined reference to a::foo()
} 
```

为什么它给我错误？定义了纯虚拟 foo。我需要对代码进行哪些更改才能使其正常工作？我需要在其构造函数中调用来自基类的纯虚方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-12T11:09:45.983

在构造函数中调用虚函数被[认为是一件坏事](http://www.artima.com/cppsource/nevercall.html)。

> 在派生类对象的基类构造过程中，对象的类型是基类的类型。不仅虚函数解析为基类，而且使用运行时类型信息的语言部分（例如，dynamic_cast（参见条款 27）和 typeid）将对象视为基类类型。

因此，您的实例化`b`调用`a`构造函数。调用`foo()`，但调用的是`foo()`on `a`。这（当然）是未定义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T11:41:19.050

引自 Yashwant Kanetkar 的《Let Us C++》一书

> 它始终是当前类的成员函数，被调用。也就是说，虚拟机制在构造函数中不起作用

因此，`foo()`of`class a`被调用。既然是声明`pure virtual`的，就会报错

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T11:11:02.143

`foo`类的构造函数中调用了`a`函数，此时对象`b`还没有完全构造，因此它的`foo`实现是不可用的。

引自“Effective C++”：

> 不要在构造或销毁期间调用虚函数，因为这样的调用永远不会转到比当前执行的构造函数或析构函数更派生的类

# c# - 在 GAC 中注册自定义 C# 程序集

> ID：14831095
> 
> 赞同：1
> 
> 时间：2013-02-12T11:07:18.207
> 
> 标签：c#, .net, dll, gacutil

我用 C# 编写了一些代码并制作了 dll 文件。当我将我的应用程序放在另一个系统上时，我的应用程序需要 .exe 文件旁边的 dll 文件。我知道一些 dll 文件复制到 GAC 并且 exe 文件不再需要这些文件。我也知道如果 dll 是 ActiveX 或 COM 类型，我们可以使用 regsvr32 或 regAsm。但我不知道如何在 Windows 中注册自己的 dll 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:10:40.667

你需要打开VS自带的命令提示符。

您需要使用 gacutil 工具

```
gacutil /i myown.dll 
```

欲了解更多信息：

[http://msdn.microsoft.com/en-us/library/ex0ss12c%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ex0ss12c%28v=vs.80%29.aspx)

您可以参考此页面以编程方式执行此操作：

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/7d3165cf-ca3b-43cc-8f77-a46dbf38f13d/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/7d3165cf-ca3b-43cc-8f77-a46dbf38f13d/)

您还可以使用 Microsoft Windows Installer 来部署您的应用程序：

[http://codefornothing.wordpress.com/2007/11/27/short-msi-tutorial/](http://codefornothing.wordpress.com/2007/11/27/short-msi-tutorial/)

如果需要，您可以在此处找到 MSI。

[http://www.microsoft.com/en-in/download/details.aspx?id=25#overview](http://www.microsoft.com/en-in/download/details.aspx?id=25#overview)

# c++ - 文件输入 - 文件未被读取 QT

> ID：14831096
> 
> 赞同：0
> 
> 时间：2013-02-12T11:07:28.917
> 
> 标签：c++, file, qt, input

我对 C++ 和 QT 很陌生。基本上，我只是做了 Java 的东西，但是我们被扔进了 C++ 的一个模块中，我们必须在其中设计一个 Zork 游戏 UI。我计划创建 Room 对象的方式是使用 roomnum.long、.short 和 .name 构造 Room，分别表示 long desc、short desc 和 name。

对于第一个房间，我将暂时直接加载文件，直到我正确处理对象等。但是，我似乎无法将文件写入文本标签。返回“重新启动游戏等”确实会在按钮按下时写入，但不会写入文件的内容。Rooms 文件夹与源文件（在本例中为 islandmain.cpp）位于同一文件夹中

有任何想法吗？

```
void TheIslandMain::on_startButton_clicked()
{
    ui->roomDesc->setText(readFirstRoom("/Rooms/room1.long"));
    ui->roomDesc->setWordWrap(true);
}

QString TheIslandMain::readFirstRoom(QString filename)
{
    QFile mFile(filename);

    if (!mFile.open(QFile::ReadOnly | QFile::Text))
    {
        qDebug() << "Could not open file for reading Line 31";
        return "Could not load file. Please restart game.";
    }

    QTextStream in(&mFile);
    QString fileInput = in.readAll();

    qDebug() << fileInput;

    mFile.close();

    return fileInput;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:12:45.917

检查文件是否存在，`bool QFile::exists(const QString& path)`以及它是否只有您在函数中拥有的文件名或整个路径（需要路径）

苏龙仔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:21:15.260

`/Rooms/room1.long`指向根目录中的文件，然后是 Rooms，然后是 room1.long 作为文件。If`Rooms`是它需要相对于应用程序本身的目录，所以如果`Rooms`它与您的应用程序在同一目录中，它只是`Rooms/room1.long`，如果它在更高级别`../Rooms/room1.long`或`Resources/Rooms/room1.long`.

# c - 如何通过用户输入获取文本中的一行？

> ID：14831097
> 
> 赞同：0
> 
> 时间：2013-02-12T11:07:29.780
> 
> 标签：c, file-io

我对包含 55 个随机数列表（全部在一个列中）的文本文件有疑问。我想要做的是要求用户选择一个行号，以便我可以提出它，但我不知道为此在代码中输入什么。

我正在尝试做一个小游戏，重点是要求用户选择一条线，然后让他/她猜测该线上隐藏的数字。

任何建议都会非常有帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:09:48.663

查看[`fgets()`](http://linux.die.net/man/3/fgets)标准库中的函数，它是读取一行文本的最佳方法之一。

# c++ - 如何获得名字？

> ID：14831098
> 
> 赞同：-4
> 
> 时间：2013-02-12T11:07:30.077
> 
> 标签：c++

我需要从一个文件中获取名称并将它们写入另一个文件。第一个文件的行如下所示：

```
a001   0 0 :N
a0100  0 0 :N
a1000  0 0 :N 
```

其中 a*** - 名称，第一个 0 - 坐标 X，第二个 0 - 坐标 Y，和 :N - 无关紧要。我需要编写的第二个文件必须包含第一个文件的名称，而第一个 0 和第二个 0 必须是随机数。最后，第二个文件必须如下所示：

```
a001  10  150 :N
a0100 0   20  :N
a1000 130 0   :N 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:14:35.233

要阅读，请尝试使用 C++ 的流运算符来读取令牌：[C++ Reading file Tokens](https://stackoverflow.com/questions/275355/c-reading-file-tokens)

要编写，请尝试使用 C++ 的流运算符[`setw`](http://www.cplusplus.com/reference/iomanip/setw/)来排列列。

# php - 教义2约束违反

> ID：14831100
> 
> 赞同：1
> 
> 时间：2013-02-12T11:07:32.483
> 
> 标签：php, symfony, doctrine-orm

我有以下实体：

```
/**
* Acme\DemoBundle\Entity\Book
*
* @ORM\Table(name="book")
* @ORM\Entity(repositoryClass="Acme\DemoBundle\Repository\BookRepository")  
* @ORM\HasLifecycleCallbacks  
* @UniqueEntity(fields="publickey", groups={"publickey"})
*/
class P1guestlistentry {
/**
 * @var P1guestlistentrystatistic
 *
 * @ORM\OneToOne(targetEntity="P1guestlistentrystatistic", orphanRemoval=true, cascade={"all"}, fetch="EAGER")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="fkstatistic", referencedColumnName="pkId", nullable=false)
 * })
 */
private $fkstatistic; 
```

当我尝试删除像这里这样的对象时：

```
$this->getEntityManager()->getConnection()->beginTransaction();
try{

     $book = $this->getEntityManager()->getRepository('AchmeDemoBundle:Book')->find(3928);
     $this->getEntityManager()->remove($book);
     $this->getEntityManager()->flush();
     $this->getEntityManager()->getConnection()->commit();         
   }catch(Exception $e){
     $this->getEntityManager()->getConnection()->rollBack();
     echo $e->getMessage();
   }
exit; 
```

我可以做任何我想做的事，我收到以下错误：

> 执行“DELETE FROM WHERE pkId = ?”时发生异常 带参数 {"1":3928}: SQLSTATE[23000]: 完整性约束违规：1451 无法删除或更新父行：外键约束失败（`p1`. `book`, CONSTRAINT `FK_F51A442F78734022`FOREIGN KEY ( `fkstatistic`) REFERENCES `bookstatistic`( `pkId`)）

有人知道我做错了什么吗？我尝试了很多方法，但没有任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:21:57.400

如果有人遇到类似的问题，这里是解决方案：

```
/**
 * @var statistic
 *
 * @ORM\OneToOne(targetEntity="statistic", cascade="ALL")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="fkStatistic", referencedColumnName="pkId", onDelete="SET NULL")
 * })
 */ 
```

该`onDelete`选项将首先删除关系，然后学说将执行级联操作。

# c++ - fork exec 和 mmap 问题

> ID：14831104
> 
> 赞同：0
> 
> 时间：2013-02-12T11:07:36.687
> 
> 标签：c++, linux, exec, fork, mmap

对于我正在开发的应用程序（在 Linux 下，但我试图保持可移植性），我需要切换到共享内存以在不同进程（以及进程内的线程）之间共享数据。有一个父亲过程产生不同的孩子

例如，我需要让每个进程都能够使用命名信号量来增加共享计数器。

在这种情况下一切正常：

```
#include <sys/mman.h>
#include <sys/wait.h>
#include <semaphore.h>
#include <fcntl.h>
#include <iostream>
#include <stdlib.h>
#include <string.h>
using namespace std;

#define SEM_NAME "/mysem"
#define SM_NAME "tmp_sm.txt"

int main(){
    int fd, nloop, counter_reset;
    int *smo;
    sem_t *mutex;

    nloop = 100;
    counter_reset = 1000;

    if (fork() == 0) {
        /* child */
        /* create, initialize, and unlink semaphore */
        mutex = sem_open(SEM_NAME, O_CREAT, 0777, 1);
        //sem_unlink(SEM_NAME);
        /* open file, initialize to 0, map into memory */
        fd = open(SM_NAME, O_RDWR | O_CREAT);
        smo = (int *) mmap(NULL, sizeof(int), PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);
        close(fd);
        /* INCREMENT */
        for (int i = 0; i < nloop; i++) {
            sem_wait(mutex);
            cout << "child: " << (*smo)++ << endl;
            if(*smo>=counter_reset){
                (*smo)=0;
            }
            sem_post(mutex);
        }
        exit(0);
    }
    /* parent */
    /* create, initialize, and unlink semaphore */
    mutex = sem_open(SEM_NAME, O_CREAT, 0777, 1);
    sem_unlink(SEM_NAME);
    /* open file, initialize to 0, map into memory */
    fd = open(SM_NAME, O_RDWR | O_CREAT);
    smo = (int *) mmap(NULL, sizeof(int), PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);
    close(fd);
    /* INCREMENT */
    for (int i = 0; i < nloop; i++) {
        sem_wait(mutex);
        cout << "parent: " << (*smo)++ << endl;
        if(*smo>=counter_reset){
            (*smo)=0;
        }
        sem_post(mutex);
    }
    exit(0);
} 
```

到目前为止一切顺利：信号量和共享计数器都可以（内存中的地址相同）并且增量和重置工作正常。

只需将子源代码移动到 exec 调用的新源文件中，程序就会失败。共享内存和命名信号量地址不同，因此增量失败。

有什么建议吗？我使用命名信号量和命名共享内存（使用文件）来尝试获取相同的指针值。

* * *

更新：

根据 Joachim Pileborg 的要求，这是对原始代码之上的“服务器端”改进：

```
...
if (fork() == 0) {
    /* child */
    /*spawn child by execl*/
    char cmd[] = "/path_to_bin/client";
    execl(cmd, cmd, (char *)0);
    cerr << "error while istantiating new process" << endl;
    exit(EXIT_FAILURE);
}
... 
```

这是“客户端”源代码：

```
#include <sys/mman.h>
#include <sys/wait.h>
#include <semaphore.h>
#include <fcntl.h>
#include <iostream>
#include <stdlib.h>
using namespace std;

#define SEM_NAME "/mysem"
#define SM_NAME "tmp_ssm.txt"

int main(){
    int nloop, counter_reset;
    int *smo;
    sem_t *mutex;
    /* create, initialize, and unlink semaphore */
    mutex = sem_open(SEM_NAME, O_CREAT, 0777, 1);
    //sem_unlink(SEM_NAME);
    /* open file, initialize to 0, map into memory */
    int fd = open(SM_NAME, O_RDWR | O_CREAT);
    smo = (int *) mmap(NULL, sizeof(int), PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);
    close(fd);
    nloop=100;
    counter_reset=1000;
    /* INCREMENT */
    for (int i = 0; i < nloop; i++) {
        sem_wait(mutex);
        cout << "child: " << (*smo)++ << endl;
        if(*smo>=counter_reset){
            (*smo)=0;
        }
        sem_post(mutex);
    }
    exit(0);
} 
```

执行此代码会导致进程阻塞（死锁）并等待无限时间。查看他们通常发现的地址：

```
father semaphore: 0x7f2fe1813000
child semahpore: 0x7f0c4c793000
father shared memory: 0x7f2fe1811000
child shared memory: 0x7ffd175cb000 
```

删除 'sem_post' 和 'sem_wait' 一切都很好，但我需要在递增时相互排除......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:23:44.933

不要取消链接信号量。它实际上删除了信号量。

从[`sem_unlink`](http://linux.die.net/man/3/sem_unlink)手册页：

> **sem_unlink()**删除由名称引用的命名信号量。信号量名称被立即删除。一旦所有其他打开信号量的进程关闭它，信号量就会被销毁。

这意味着一旦您在父进程中创建了信号量，就立即将其删除。然后子进程将无法找到信号量，而是创建一个新信号量。

# c# - 如何使用 C# 读取这个 json 字符串？

> ID：14831109
> 
> 赞同：3
> 
> 时间：2013-02-12T11:07:48.307
> 
> 标签：c#, json

```
"{\n  \"connections\": {\n    \"_total\": 1,\n    \"values\": [{\n \"apiStandardProfileRequest\": {\n        \"headers\": {\n \"_total\": 1,\n          \"values\": [{\n 
```

我无法读取此字符串格式的属性。请建议我如何从这种字符串格式中读取属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:09:18.477

使用此方法可能有用

```
public static T Deserialise<T>(string json)
{
    T obj = Activator.CreateInstance<T>();
    using (MemoryStream ms = new MemoryStream(Encoding.Unicode.GetBytes(json)))
    {
        DataContractJsonSerializer serializer = new DataContractJsonSerializer(obj.GetType());
        obj = (T)serializer.ReadObject(ms); // 
        return obj;
    } 
} 
```

另外，仅供参考，这里是 Serialize 方法：

```
public static string Serialize<T>(T obj)
{
    DataContractJsonSerializer serializer = new DataContractJsonSerializer(obj.GetType());
    using (MemoryStream ms = new MemoryStream())
    {
        serializer.WriteObject(ms, obj);
        return Encoding.Default.GetString(ms.ToArray());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:51:34.977

```
public static dynamic Deserialize(string content)
{
return new System.Web.Script.Serialization.JavaScriptSerializer().DeserializeObject(content);
}

var f = Deserialize(json);
List<Name> list = new List<Name>();

foreach(var item1 in (Dictionary<string, object>) f)
{
Dictionary<string, object> item2 = (Dictionary<string, object>) item1.Value;

list.Add( new Name(){
    id = (int) item2["id"],
    name = (string) item2["name"],
    age = (int) item2["age"]
});             

} 
```

该代码也可以正常工作...

# .net - 使用 .NET 将 PNG 保存为 GIF 看起来有可怕的斑点

> ID：14831113
> 
> 赞同：1
> 
> 时间：2013-02-12T11:08:07.610
> 
> 标签：.net, image, png, gif

我的简单代码将我从这个 PNG![在此处输入图像描述](../Images/65e3b2f2222219914dae0251286fee29.png)带到这个 GIF ![在此处输入图像描述](../Images/4635d457af8e56e371031b9597db4729.png)，这是不可接受的。我知道 GIF 不是最好的格式，但我必须适应当前的情况。

```
Imports System.Drawing
Dim oImage As Image = Image.FromFile("c:\whatever\temp.png")
oImage.Save("c:\whatever\temp.gif", Imaging.ImageFormat.Gif) 
```

我还想调整图像的大小（缩小一点），但这看起来更糟。我想我需要用调色板、编码器、P 模式与 RGBA 做一些事情……但我的 Google-fu 似乎完全虚弱，我什么也没找到！

如果有人能用一些方便的 VB.NET 或 C# 指出我的愚蠢，那就太好了，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T11:17:17.037

基本上你需要做的是自适应地生成一个 256 色的调色板，让你尽可能忠实地再现原始图像。

这里有一篇很棒的文章（包含代码）可以做到这[一点](http://msdn.microsoft.com/en-us/library/aa479306.aspx#colorquant_topic5)。抓住`OctreeQuantizer`然后它就像示例代码一样简单：

```
 var quantizer = new OctreeQuantizer(255, 8);
   using (var quantized = quantizer.Quantize(image))
   {
       quantized.Save(target, ImageFormat.Gif);
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T11:17:04.903

您必须为输入图像找到优化的图像调色板。

看看这里：http: [//msdn.microsoft.com/en-us/library/aa479306.aspx](http://msdn.microsoft.com/en-us/library/aa479306.aspx)

注意：我知道您正在寻找基于 .NET 的答案，但仍然值得查看[ImageMagic](http://www.imagemagick.org)。它使您可以对转换选项进行大量控制。甚至还有一个 .NET 包装器，虽然我没有亲自使用它：http: [//imagemagick.codeplex.com/](http://imagemagick.codeplex.com/)

# c++ - 如果我们声明一个包含四个元素的数组，这些元素可以存储值吗？

> ID：14831114
> 
> 赞同：-4
> 
> 时间：2013-02-12T11:08:11.917
> 
> 标签：c++, c

在 C++ 中，如果我们声明一个包含四个元素的数组，这些元素可以存储值吗？我的意思是，如果我们声明以下数组：

```
#include <iostream>
int main()
{
    int a[4];
    double res;
    double avg;
    avg = res = 0.0; 
    for(int i=0; i<4; i++)
    {
        cout<<"Please enter age ";
        cin>> a[i];
    }

    for(int i=0; i<4; i++)
    {
        cout<< "You have entered these ages " <<a[i];
        cout<<endl;
        res += a[i];
    }

    avg = res/4;
    cout<< "Total is "<<res <<endl;
    cout<< "Avg is "<<avg;
} 
```

上面的这个程序是一个带有整数（数字）数组的程序，而在字符数组中我们可以为字符数组的元素赋值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:14:26.070

是的。

Array 是相同类型和 no 值的占位符。在数组声明期间保留的位置。

```
int a[3]; 
```

意味着它可以存储3个整数。被访问为`a[0]`,`a[1]`和`a[2]`.

现在，您可以看到循环中的问题：

```
for(int i=1; i<=4; i++)
{
    cout<<"Please enter age ";
    cin>> a[i];
} 
```

1.  `a[0]`仍然是空的
2.  循环运行 4 次：`a[1], a[2], a[3], a[4]`并且，最后 2 个索引未被保留。

您可以按以下方式更正它：

```
for(int i=0; i<3; i++)
{
    cout<<"Please enter age ";
    cin>> a[i];
} 
```

你的另一个问题：

> 而在字符数组中，我们可以分配字符数组元素的任何值

不，每个索引都将存储一个`char`。

```
char c[3]; 
```

将准确存储 3`char`秒。如果您尝试使用其他索引，可能会导致未定义的行为、分段错误。当您尝试访问未分配给您的进程的内存时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:13:59.337

是的，声明的元素可用于存储值。

但是，在您的示例中，您只声明了一个 3 元素数组，它为您提供数组元素`a[0], a[1],`和`a[2]`. 您正在访问数组元素`a[1], a[2], a[3], a[4]`，导致超出范围的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:15:25.130

如果您要问是否可以为数组的元素赋值，那么答案是肯定的。以下所有内容都是完全有效的：

```
char a[10];
a[4] = 'x';
std::cin >> a[6]; 
```

但是请注意，您的代码包含错误：

1.  您`a`使用索引 1 到 4 进行索引。这意味着`a`必须至少有 5 个元素长；它目前定义为长度为 3。

2.  `#include <iostream.h>`应该只是`#include <iostream>`。`<iostream.h>`是预标准和过时的。

3.  C++ 数组索引是基于 0 的，因此虽然从技术上讲不是错误，但您忽略了数组的第一个元素。您可能应该将`for`循环表述为`for (int i = 0; i < 4; ++i)`

# hadoop - 合并 hdfs 文件

> ID：14831117
> 
> 赞同：19
> 
> 时间：2013-02-12T11:08:16.930
> 
> 标签：hadoop, hdfs

我在 HDFS 中有 1000 多个文件可用，命名约定为`1_fileName.txt`to `N_fileName.txt`。每个文件的大小为 1024 MB。我需要将这些文件合并为一个（HDFS）并保持文件的顺序。说`5_FileName.txt`应该只在之后附加`4_fileName.txt`

执行此操作的最佳和最快方法是什么。

有没有什么方法可以在不复制数据节点之间的实际数据的情况下执行这种合并？例如：获取此文件的块位置并在名称节点中使用这些块位置创建一个新条目（文件名）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-13T00:34:40.440

没有有效的方法可以做到这一点，您需要将所有数据移动到一个节点，然后再返回 HDFS。

执行此操作的命令行 scriptlet 可能如下所示：

```
hadoop fs -text *_fileName.txt | hadoop fs -put - targetFilename.txt 
```

这会将与 glob 匹配的所有文件分类到标准输出，然后将该流通过管道传输到 put 命令并将流输出到名为 targetFilename.txt 的 HDFS 文件

你唯一的问题是你所使用的文件名结构 - 如果你有固定的宽度，零填充数字部分会更容易，但在当前状态下你会得到一个意想不到的字典顺序（1、10、100、1000 , 11, 110 等）而不是数字顺序（1,2,3,4 等）。您可以通过将 scriptlet 修改为：

```
hadoop fs -text [0-9]_fileName.txt [0-9][0-9]_fileName.txt \
    [0-9][0-9[0-9]_fileName.txt | hadoop fs -put - targetFilename.txt 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-07-11T07:14:13.463

有一个 API 方法[org.apache.hadoop.fs.FileUtil.copyMerge](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/FileUtil.html#copyMerge%28org.apache.hadoop.fs.FileSystem,%20org.apache.hadoop.fs.Path,%20org.apache.hadoop.fs.FileSystem,%20org.apache.hadoop.fs.Path,%20boolean,%20org.apache.hadoop.conf.Configuration,%20java.lang.String%29)可以执行此操作：

```
public static boolean copyMerge(
                    FileSystem srcFS,
                    Path srcDir,
                    FileSystem dstFS,
                    Path dstFile,
                    boolean deleteSource,
                    Configuration conf,
                    String addString) 
```

`srcDir`它按字母顺序读取所有文件并将其内容附加到 dstFile。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-08T01:10:16.573

如果你可以使用火花。它可以像

```
sc.textFile("hdfs://...../part*).coalesce(1).saveAsTextFile("hdfs://...../filename) 
```

希望这可行，因为 spark 以分布式方式工作，您不必将文件复制到一个节点中。虽然只是一个警告，但如果文件非常大，在 spark 中合并文件可能会很慢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-19T16:21:49.020

由于文件顺序很重要，而字典顺序并不能达到目的，因此为这个任务编写一个映射器程序似乎是一个不错的选择，它可能会定期运行。当然没有reducer，把它写成一个HDFS map任务是高效的，因为它可以将这些文件合并到一个输出文件中，而无需在数据节点之间移动太多数据。由于源文件在 HDFS 中，并且由于映射器任务将尝试数据关联，它可以合并文件而无需跨不同数据节点移动文件。

映射程序将需要一个自定义 InputSplit（在输入目录中获取文件名并根据需要对其进行排序）和一个自定义 InputFormat。

映射器可以使用 hdfs append 或原始输出流，它可以在 byte[] 中写入。

我正在考虑的 Mapper 程序的粗略草图类似于：

```
public class MergeOrderedFileMapper extends MapReduceBase implements Mapper<ArrayWritable, Text, ??, ??> 
{
    FileSystem fs;

    public void map(ArrayWritable sourceFiles, Text destFile, OutputCollector<??, ??> output, Reporter reporter) throws IOException 
    {

        //Convert the destFile to Path.
        ...
        //make sure the parent directory of destFile is created first.
        FSDataOutputStream destOS = fs.append(destFilePath);
        //Convert the sourceFiles to Paths.
        List<Path> srcPaths;
        ....
        ....
            for(Path p: sourcePaths) {

                FSDataInputStream srcIS = fs.open(p);
                byte[] fileContent
                srcIS.read(fileContent);
                destOS.write(fileContent);
                srcIS.close();
                reporter.progress();  // Important, else mapper taks may timeout.
            }
            destOS.close();

        // Delete source files.

        for(Path p: sourcePaths) {
            fs.delete(p, false);
            reporter.progress();
        }

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-22T18:27:49.773

我为 PySpark 编写了一个实现，因为我们经常使用它。

以 Hadoop 为模型`copyMerge()`并使用相同的较低级别的 Hadoop API 来实现这一点。

[https://github.com/Tagar/abalon/blob/v2.3.3/abalon/spark/sparkutils.py#L335](https://github.com/Tagar/abalon/blob/v2.3.3/abalon/spark/sparkutils.py#L335)

它保持文件名的字母顺序。

# ios - 在应用程序内从 Facebook 注销？

> ID：14831133
> 
> 赞同：-1
> 
> 时间：2013-02-12T11:08:59.820
> 
> 标签：ios, objective-c, facebook-ios-sdk

是否可以在应用程序中实现 Facebook 注销功能？我正在使用最新的 Facebook SDK (3.1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:24:22.883

您可以在应用程序内注销，因为它适用于单点登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:36:48.537

用它来注销

```
 [[NSUserDefaults standardUserDefaults] setValue:nil forKey:@"FBAccessTokenKey"];
    [[NSUserDefaults standardUserDefaults] setValue:nil forKey:@"FBExpirationDateKey"];
    [[NSUserDefaults standardUserDefaults] synchronize];
    [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"SignInWithFaceBokk"];
    [[NSUserDefaults standardUserDefaults] setObject:nil  forKey:@"selectedUSAState"];

    NSHTTPCookie *cookie;
    NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    for (cookie in [storage cookies])
    {
        NSString* domainName = [cookie domain];
        NSRange domainRange = [domainName rangeOfString:@"facebook"];
        if(domainRange.length > 0)
        {
            [storage deleteCookie:cookie];
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-07T17:03:40.190

我假设您已经将 facebook 框架添加到您的项目中，并且

```
#import <FacebookSDK/FacebookSDK.h> 
```

在您正在使用的**视图控制器**中.. 并添加

```
-(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    return [[FBSession activeSession] handleOpenURL:url];
} 
```

如果您完成了所有操作，则发送给您的**应用程序委托**，然后制作一个带有操作的**按钮并调用：**

```
[FBSession.activeSession closeAndClearTokenInformation]; 
```

应该做的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-25T08:30:49.883

```
[[NSUserDefaults standardUserDefaults] removeObjectForKey:@"FBAccessTokenKey"];

[[NSUserDefaults standardUserDefaults] removeObjectForKey:@"FBExpirationDateKey"]; 
```

只有两条线对我有用...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T11:10:27.387

```
if (FBSession.activeSession.isOpen)
    {
        [FBSession.activeSession closeAndClearTokenInformation];
    } 
```

# asp.net - 我正在使用 MasterPage 在 ASP.Net 中创建一个网站

> ID：14831142
> 
> 赞同：0
> 
> 时间：2013-02-12T11:09:22.057
> 
> 标签：asp.net

我正在使用 MasterPage 在 ASP.Net 中创建一个网站。我需要帮助才能在每个页面上使用不同的页面标题。

例如：我的公司：首页

和我的同伴：我的第二页上的产品如何使用 MasterPage

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:14:04.477

掌握

```
...
<title>
     <asp:ContentPlaceHolder ID="TitleContentPlaceHolder" runat="server"></asp:ContentPlaceHolder>
</title>
... 
```

内容

```
...
<asp:Content ContentPlaceHolderID="TitleContentPlaceHolder" runat="server" ID="TitleContent">
    <asp:Literal runat="server" ID="TitleLabel"></asp:Literal>
</asp:Content>
... 
```

内容代码隐藏

```
protected void Page_Load(object sender, EventArgs e)
{
    ...
    TitleLabel.Text = "Some title";
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:27:23.253

您的子页面上有一个部分如下

```
 <asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
  </asp:Content> 
```

您可以将任何内容放在您在该`head`部分中编写的内容之间。

```
 <%@ Page Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" 
          CodeFile="Default.aspx.cs" Inherits="_Default" Title="Untitled Page" %> 
```

在这里您可以在页面指令

或后面的代码中设置标题

```
 protected void Page_Load(object sender, EventArgs e)
 {
      Page.Title = "Master Page ";
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:13:36.873

您可以使用代码隐藏为您的内容页面赋予标题。

```
 protected void Page_Load(object sender, EventArgs e)
 {
 Page.Title="your title";
 } 
```

这是您可以遵循的最简单的方法..

# sql - 从 DataGridView 更新 SQL

> ID：14831144
> 
> 赞同：2
> 
> 时间：2013-02-12T11:09:31.317
> 
> 标签：sql, vb.net, sql-server-2008, visual-studio-2008, datagridview

我正在从 SQL Server 2008 数据库表中填充 DataGridView。然后我允许用户编辑 DataGridView 中的值，我正在努力的是如何在按下按钮时将这些更改写回 SQL 表？

我正在使用这个填充：

```
 Try

            Dim command As New SqlCommand
            Dim adapter As New SqlDataAdapter

            DutyRef = DutyRef.Trim
            Dim DutyDetails As String = "SELECT * from MyTable WHERE Col1 = 1"

            If ds1.Tables("DT_Test").Rows.Count > 0 Then
                ds1.Tables("DT_Test").Rows.Clear()
                Tab2_DGVDuty.Refresh()
            End If

            SQLConn = New SqlConnection(SQLConnString)

            command = New SqlCommand(DutyDetails, SQLConn)
            adapter.SelectCommand = command
            adapter.Fill(ds1, "DT_Test")

            Tab2_DGVDuty.DataSource = ds1.Tables("DT_Test")
            Tab2_DGVDuty.Columns("ID").Visible = False

            adapter.Dispose()
            command.Dispose()
            SQLConn.Close()

        Catch ex As Exception
            MsgBox(ex.Message)
        End Try 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:16:13.137

看一眼[`SqlDataAdapter.Update`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.update.aspx)

本文可能对您有所帮助：[如何在 Visual Basic .NET 中使用 SqlDataAdapter 对象更新 SQL Server 数据库](http://support.microsoft.com/kb/308055)

# c# - 查询谷歌电子表格行

> ID：14831147
> 
> 赞同：3
> 
> 时间：2013-02-12T11:09:48.993
> 
> 标签：c#, google-sheets, google-spreadsheet-api

我使用 c# google 电子表格 api 来处理我们的电子表格。

我在查询我们拥有的工作表时遇到问题。

即我在尝试根据标题获取特定行时遇到问题，这是行的第一个单元格中的值，我们目前没有在电子表格中使用标题，因为我们需要垂直布局而不是水平布局。

```
listQuery.SpreadsheetQuery = "Select A"; 
```

从阅读应该是我需要在那里做的所有事情的 api 文档，但它会引发一个错误，这是一个带有空响应消息的错误请求..

```
AtomLink ListFeedLink = worksheet.Links.FindService(GDataSpreadsheetsNameTable.ListRel,         null);

ListQuery listQuery = new ListQuery(ListFeedLink.HRef.ToString());
if (!string.IsNullOrEmpty(spreadsheetQuery))
{
   listQuery.SpreadsheetQuery = "age=25";
}

ListFeed listFeed = myService.Query(listQuery); 
```

我使用上面的代码

有人对以这种方式查询电子表格有任何提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T23:05:58.113

您说：“我们目前没有在电子表格中使用标题”。当我测试 ListFeed 时，它需要标题，这不是可选的额外内容。CellFeed 不需要标题并且具有搜索样式查询，请参阅[https://code.google.com/p/gdata-java-client/source/browse/trunk/java/sample/spreadsheet/cell/CellDemo.java](https://code.google.com/p/gdata-java-client/source/browse/trunk/java/sample/spreadsheet/cell/CellDemo.java)

# c# - 如何从 Windows Phone 7 中的媒体库优化专辑封面图像大小？

> ID：14831150
> 
> 赞同：1
> 
> 时间：2013-02-12T11:09:51.990
> 
> 标签：c#, windows-phone-7, xaml, media-player, albumart

我正在尝试为 Windows Phone 7 开发音乐播放器。在此，我必须使用以下方法将媒体库中专辑的所有专辑艺术图像一张一张地加载为 200X200px 图像：

```
albumArtStream = library.Albums[loop_counter].GetAlbumArt(); 
```

但是，原始专辑封面图像的大小为 500X500px（大约），内存使用量增加到大约 150-200MB，导致应用程序崩溃。我尝试使用应用程序分析选项检查内存泄漏，但没有帮助。暂时我正在使用：

```
albumArtStream = library.Albums[loop_counter].GetThumbnail(); 
```

在这里，内存使用量只有大约 25MB。但是，因为它的缩略图，专辑封面图像看起来一点也不好看。

谁能帮助我并告诉我一些将图像分辨率/尺寸减小到所需尺寸并节省内存的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:22:48.123

找到了我要找的东西。优化图像大小可以通过 ScaleTransform 完成。这是我找到解决方案的地方：http: [//www.wintellect.com/CS/blogs/jprosise/archive/2009/12/17/silverlight-s-big-image-problem-and-what-you-can-do -about-it.aspx](http://www.wintellect.com/CS/blogs/jprosise/archive/2009/12/17/silverlight-s-big-image-problem-and-what-you-can-do-about-it.aspx)

虽然这篇博文是针对博主正在创建的某个网站的，但他在这篇博文中谈到了 Silverlight 的问题，因此适用于此处。

# python - 在 Python 2.6 中使用 openpyxl 有点挣扎

> ID：14831151
> 
> 赞同：3
> 
> 时间：2013-02-12T11:09:54.107
> 
> 标签：python, excel, xls, xlsx, openpyxl

抱歉，如果已经在其他地方问过这个问题。

我已经为 Python（在本例中为 2.6）导入了 openpyxl（v.1.6.1）。到目前为止它工作得很好，但我想做什么我不太清楚。

我将列出我需要首先阅读的 xlsx 文件的结构。它本质上是一个备用名册，如下所示：

`A1 B1 C1 D1
YYYY/MM/DD System1 System2 System3
A2 B2 C2 D2
2013/02/11 User A User B User C
A3 B3 C3 D3
2013/02/12 User D User E User F
A4 B4 C4 D4
2013/02/13 User G User H User I`

我需要做的是首先扫描A中的所有单元格（第1行除外，所以A2到A-infinity），然后根据我是否可以在单元格A2到A-infinity中找到今天的日期，打印与今天相关的整行日期以及用户关联的系统（因此在本例中为 B3、C3 和 D3 以及 B1、C1 和 D1）。

我可以粘贴到目前为止的内容，但数量不多：

```
import openpyxl  
from openpyxl import load_workbook

wb = load_workbook(filename = 'standby.xlsx', use_iterators = True)  
ws = wb.get_sheet_by_name(name = 'Sheet1') # ws is now an IterableWorksheet  
for row in ws.iter_rows(): # it brings a new method: iter_rows()  
    for cell in row:  
        print cell.internal_value 
```

使用标准文本文件，我通常会执行以下操作：

```
textfile = os.open('textfile', 'r')
textfiler = textfile.readlines()
for line in textfile:
    if "today's date" in line:
        print line 
```

我只是不确定如何使用 openpyxl 处理带有 xlsx 文件的文本文件。谁能给我一个提示如何去做？

我想我需要做的是扫描 A 下的所有内容（不知道该怎么做），匹配今天的日期（我想我能弄清楚的日期），然后打印出整行（Bxxx，Cxxx， Dxxx 等）如果找到今天的日期（也不知道如何执行此操作）。

希望我可以解释我的问题，但如果没有，请告诉我，我会再试一次。

**编辑：**多亏了格伦，我想我比以前更进一步了，但还没有完全到达那里。我到目前为止的代码：

```
import openpyxl
from openpyxl import load_workbook

def find_row(today, ws):
    for a in ws.iter_rows():
        if today == a.internal_value:
            return (a)

def main():
    wb = load_workbook(filename = 'standby.xlsx', use_iterators = True)
    ws = wb.get_sheet_by_name(name = 'Sheet1') # ws is now an IterableWorksheet
    today = '2013-02-12 00:00:00' #whatever date format you're using
    row = find_row(today, ws)
    print row

def test():
    wb = load_workbook(filename = r'standby.xlsx')
    sheet_ranges = wb.get_sheet_by_name(name = 'Sheet1')
    print sheet_ranges.cell('A2607').value # D18

if __name__ == '__main__':
    main() 
```

我现在遇到的错误是“AttributeError：'tuple'对象没有属性'internal_value'”（仍在谷歌搜索这个）。

def find_row 部分以前看起来像这样：

```
def find_row(today, ws):
    for a in ws.rows():
        if today == a.internal_value:
            return (a) 
```

这提供了以下内容： NotImplementedError: use 'iter_rows()' instead

**编辑#2：**感谢 Glen Swinfield 的帮助和耐心，我想我终于弄明白了。这是代码现在的样子（如果看起来有点乱，请原谅，原来电子表格中有很多列）：
import datetime import openpyxl from openpyxl import load_workbook

```
def find_row(today, ws):
    for a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14,a15,a16,a17,a18,a19,a20,a21,a22,a23,a24,a25,a26,a27,a28,a29,a30,a31,a32,a33,a34,a35,a36,a37,a38,a39,a40,a41,a42,a43,a44,a45,a46,a47,a48,a49,a50,a51,a52,a53,a54,a55,a56,a57,a58,a59,a60,a61,a62,a63,a64,a65,a66,a67,a68,a69,a70,a71,a72,a73,a74,a75,a76,a77,a78,a79,a80,a81,a82,a83,a84,a85,a86,a87,a88,a89,a90,a91,a92,a93 in ws.iter_rows():
        if today == a1.internal_value:
            print(a1.internal_value,a2.internal_value,a3.internal_value,a4.internal_value,a5.internal_value,a6.internal_value,a7.internal_value,a8.internal_value,a9.internal_value,a10.internal_value,a11.internal_value,a12.internal_value,a13.internal_value,a14.internal_value,a15.internal_value,a16.internal_value,a17.internal_value,a18.internal_value,a19.internal_value,a20.internal_value,a21.internal_value,a22.internal_value,a23.internal_value,a24.internal_value,a25.internal_value,a26.internal_value,a27.internal_value,a28.internal_value,a29.internal_value,a30.internal_value,a31.internal_value,a32.internal_value,a33.internal_value,a34.internal_value,a35.internal_value,a36.internal_value,a37.internal_value,a38.internal_value,a39.internal_value,a40.internal_value,a41.internal_value,a42.internal_value,a43.internal_value,a44.internal_value,a45.internal_value,a46.internal_value,a47.internal_value,a48.internal_value,a49.internal_value,a50.internal_value,a51.internal_value,a52.internal_value,a53.internal_value,a54.internal_value,a55.internal_value,a56.internal_value,a57.internal_value,a58.internal_value,a59.internal_value,a60.internal_value,a61.internal_value,a62.internal_value,a63.internal_value,a64.internal_value,a65.internal_value,a66.internal_value,a67.internal_value,a68.internal_value,a69.internal_value,a70.internal_value,a71.internal_value,a72.internal_value,a73.internal_value,a74.internal_value,a75.internal_value,a76.internal_value,a77.internal_value,a78.internal_value,a79.internal_value,a80.internal_value,a81.internal_value,a82.internal_value,a83.internal_value,a84.internal_value,a85.internal_value,a86.internal_value,a87.internal_value,a88.internal_value,a89.internal_value,a90.internal_value,a91.internal_value,a92.internal_value,a93.internal_value)

def main():
    wb = load_workbook(filename = 'standby.xlsx', use_iterators = True)
    ws = wb.get_sheet_by_name(name = 'Sheet1') # ws is now an IterableWorksheet
    today = datetime.datetime(2013, 02, 12, 0, 0) #whatever date format you're using
    row = find_row(today, ws)

def test():
    wb = load_workbook(filename = r'standby.xlsx')
    sheet_ranges = wb.get_sheet_by_name(name = 'Sheet1')
    print sheet_ranges.cell('A2607').value # D18

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:37:16.187

我现在无法对此进行测试，但原则上您需要遍历每一行，边走边解开单元格，然后检查单元格 A 是否有今天的日期，如果有，则返回该行。

```
import openpyxl  
from openpyxl import load_workbook

def find_row(today, ws):
    for a,b,c,d in ws.rows():
        if today == a.internal_value:
            return (a, b, c, d)
    raise someException('row not found')

wb = load_workbook(filename = 'standby.xlsx', use_iterators = True)  
ws = wb.get_sheet_by_name(name = 'Sheet1') # ws is now an IterableWorksheet
today = '' #whatever date format you're using
try:
    row = find_row(today, ws) 
except someException:
    # handle exception 
```

在 python 中有几种方法可以做到这一点，例如 while/else 循环，但这是它的本质。

**更新回复评论：**

```
def find_row(today, ws):
    for a,b,c,d in ws.iter_rows():
        if today == a.internal_value:
            return (a, b, c, d)
    raise someException('row not found') 
```

该`use_iterators = True`标志意味着您获得了一个迭代器，因此您必须使用`iter_rows()`而不仅仅是`.rows`.

# css - 用css将一个div覆盖在另一个div上

> ID：14831152
> 
> 赞同：2
> 
> 时间：2013-02-12T11:09:56.140
> 
> 标签：css, html, position, overlay

我有一个包装器 div，它设置了一些 css 属性。单击按钮时，我必须过度显示一些消息。

```
<div class="dvLanding">
 <div class="popupArea">
            <span class="VoteOnce">You can only vote once.</span> <a style="vertical-align: top">
                <img alt="close" src="../../Images/error1-exit-button.png" /></a></div></div>
    </div> 
```

我的 CSS 课程。

```
.dvVoteWrapper
{
    background-color: #949494;
    opacity: 0.5;
    filter: Alpha(opacity=50);
    display:none;
    width: 1024px;
    height: 768px;
    position: absolute;
}

.popupArea
{
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
}

.dvLanding
{
    background-image: url(/Images/screen1-bg-logos.jpg);
    background-repeat: no-repeat;
    position: absolute;
    width: 100%;
    height: 100%;
}
   .VoteOnce
{
    font-family: Calibri regular;
    font-size: 24pt;
    background-image: url(/Images/error1-vote-once-bg.png);
    background-repeat: no-repeat;
    width:288px;
    height:74px;
    color: #000000;
} 
```

我正在`display:none`使用 jquery 删除属性。应用此类时，它不会覆盖整个页面并且看起来会变形。请建议如何做到这一点。为了更好地理解，![在此处输入图像描述](../Images/d76ecd1474f95d5305c204867792c9f4.png)我附上了屏幕截图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:50:52.060

这是另一个

HTML：

```
<div class="dvLanding">
    <div class="dvVolunter"></div>
    <div class="dvVote">
        <br />
        <br />
    </div>
    <div class="dvVoteWrapper"></div>
</div>
<div class="popupArea">
    <span class="VoteOnce">You can only vote once.
        <a class="closeButton">
            <img alt="close" src="../../Images/error1-exit-button.png" />
        </a>
    </span> 
</div> 
```

CSS：

```
.dvLanding {
    background-image: url(http://lorempixel.com/800/600);
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0.5;
}
.popupArea {
    background-color: yellow;
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -30px;
    margin-left: -180px;
}
.closeButton {
    vertical-align: top;
    font-size: 10pt;
}
.VoteOnce {
    font-family: Calibri regular;
    font-size: 24pt;
} 
```

[JSFiddle](http://jsfiddle.net/T5jUr/)用于测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:16:31.860

如果您希望包装器覆盖整个屏幕，您可以使用：

```
position:fixed; left:0; top:0; z-index:100; width:100%; height:100%; 
```

您的`z-index`财产需要高于您试图涵盖的任何其下方的元素

# crystal-reports - 参数字段问题

> ID：14831168
> 
> 赞同：0
> 
> 时间：2013-02-12T11:10:50.083
> 
> 标签：crystal-reports

我的一个参数字段有问题。在其他参数字段中，如果我将字段保留为“...”，我将显示所有带有 yes 的结果，而对于所有未打开的结果，如果我将字段显示为“...”，它将同时显示是和否。我似乎无法选择“...”作为默认值。当我在参数字段中单击“...”时，不显示任何结果。

请参阅以下与本专栏相关的屏幕截图：

图 1

![在此处输入图像描述](../Images/e5aac8cec5b53866190347b6b2f4c691.png)

图 2

![在此处输入图像描述](../Images/5058885fa2de685928b83492f2d094a9.png)

图 3

![在此处输入图像描述](../Images/34ca4e48ac23c67fe25b323679dde6b1.png)

图 4

![在此处输入图像描述](../Images/ae76d75b3f3a978fb8fae95952976f29.png)

如果您需要更多信息，请询问。

谢谢你，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:33:58.737

'...' 不是可以设置的值。它是未选择值时显示的内容。

您可以：

*   使其成为可选参数；请参阅[有条件地提示输入可选参数](https://stackoverflow.com/questions/7163188/conditionally-prompting-for-optional-parameters)
*   使其成为多选参数并查找其中一个或另一个或两者的存在

在这两种情况下，如果您使用布尔参数而不是字符串，对您来说会更容易。

# c++ - C ++中的蓝牙库跨平台

> ID：14831171
> 
> 赞同：3
> 
> 时间：2013-02-12T11:11:00.053
> 
> 标签：c++, list, bluetooth, device

是否有任何用 C++ 编写的跨平台库，允许知道连接到这台电脑的设备列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-01-29T23:16:56.963

这里有一些额外的库，它们都不是真正的生产就绪：

*   [https://github.com/iotile/baBLE](https://github.com/iotile/baBLE)
*   [https://github.com/mbientlab/Warble](https://github.com/mbientlab/Warble)
*   [https://github.com/kdewald/nativeble](https://github.com/kdewald/nativeble)

有人知道任何其他可能正在进行的跨平台蓝牙库吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-24T20:45:17.133

从 Qt5.2 开始，您可以使用 Qt 蓝牙库：[http ://doc.qt.io/qt-5/qtbluetooth-module.html](http://doc.qt.io/qt-5/qtbluetooth-module.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-19T15:21:25.130

Qt5.2 和 Qt5.4 蓝牙跨平台支持*** * 非常 * ***有限。

Qt 5.4 蓝牙支持仅适用于 Android 和 Linux (BlueZ 4.x/5.x)。我猜黑莓 10 也包括在内，因为它是基于 QNX 的。

没有提到计划对 Windows、OSX 或 iOS 的 Qt 蓝牙支持。

请参阅：[Qt 蓝牙](http://doc.qt.io/qt-5/qtbluetooth-index.html)

-埃德

# postgresql - 成为超级用户 postgresql

> ID：14831173
> 
> 赞同：1
> 
> 时间：2013-02-12T11:11:12.003
> 
> 标签：postgresql, vagrant

如何让自己成为 postgresql 的超级用户？

我一直在尝试创建数据库，并且不断收到以下错误：

> createdb：数据库创建失败：错误：创建数据库的权限被拒绝

我猜这是因为我不是超级用户，但我不知道出了什么问题。这是我所做的：

```
> sudo su postgres

> postgres@precise64:/xxx/xxx/projectfile$createuser -P
> Enter name of role to add: vagrantUser
> Enter password: 
> Enter it again:
> Shall the new role be a superuser? (y/n) y
> postgres@precise64:/vagrant/django_projects/mblog$ psql -U vagrantUser template1
> psql: FATAL:  Peer authentication failed for user "vagrantUser"
> postgres@precise64:/vagrant/django_projects/mblog$ exit
> (venv)vagrant@precise64:/vagrant/project$:psql template1
> template1 =# \q
> (venv)vagrant@precise64:/vagrant/project$:createdb mydb 
```

我收到以下错误：

> createdb：数据库创建失败：错误：创建数据库的权限被拒绝

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T11:19:37.640

长话短说 - 你不希望 vagrant 成为超级用户。相反，从 postgres 帐户创建 vagrant 数据库，并使其成为所有者（即数据库）vagrant 用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:24:42.480

createuser 脚本采用“--createdb”选项来允许新用户创建数据库（参见[http://www.postgresql.org/docs/8.1/static/app-createuser.html](http://www.postgresql.org/docs/8.1/static/app-createuser.html)）。您没有指定这一点，因此“vagrantUser”无法创建新数据库。

话虽如此，@depesz 提出了一个很好的观点——最佳实践是拥有一个超级用户/根数据库帐户并使用它来创建/维护数据库、为数据库创建单独的帐户并为这些帐户授予适当的权限；但我完全专注于这个问题 =)

# c# - 我怎样才能保留所有重点表格？

> ID：14831176
> 
> 赞同：1
> 
> 时间：2013-02-12T11:11:15.100
> 
> 标签：c#, .net, focus

我有一个使用两种形式的应用程序：Form1（主要）和 Form2（次要）。我使用以下代码显示 Form2：

```
Form2 frm = new Form2();
frm.TopMost = true;
frm.Show(); 
```

当 Form2 可见时，它没有焦点。如何在 Form2 上进行焦点并保持在 Form1 上的焦点？对不起，我的英语不好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:56:59.413

在 MDI 父表单（主表单）中尝试以下代码

```
private Form2 _form2;

#region UtilOpenForm
    /// <summary>
    /// UtilOpenForm
    /// </summary>
    /// <param name="appContainer"></param>
    /// <param name="childForm"></param>
    private void UtilOpenForm(Form appContainer, Form childForm)
    {
        this.Cursor = Cursors.WaitCursor;
        if (childForm == null)
        {
            throw new ArgumentNullException("childForm");
        }
        childForm.MdiParent = appContainer;
        childForm.StartPosition = FormStartPosition.CenterScreen;
        childForm.MaximizeBox = false;
        childForm.MinimizeBox = false;
        childForm.Closed += new EventHandler(childForm_Closed);
        childForm.Show();
        this.Cursor = Cursors.Default;
    } 
```

现在从 MDI 父级中的按钮/菜单单击

```
 if (_form2 == null)
        {
            UtilOpenForm(this, _form2 = new Form2());
        } 
```

现在 MDI Parent 中的子窗体关闭函数

```
 #region childForm_Closed
    /// <summary>
    /// 
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private void childForm_Closed(object sender, EventArgs e)
    {
        if (sender.GetType() == typeof(Form2))
        {
            _form2.Dispose();

            if (_form2 != null)
            {
                _form2 = null;
            }
        } 
```

# javascript - 如何检测是否单击了形状（HTML5 画布）？

> ID：14831186
> 
> 赞同：6
> 
> 时间：2013-02-12T11:12:06.513
> 
> 标签：javascript, html, canvas

我正在使用[**此博客**](http://blog.riacode.in/2011/03/03/drawing-regular-polygons-in-html5-canvas/)`lineTo`中的画布和方法绘制不同的形状，如矩形、三角形、六边形等。我只想要一种简单的方法来查找我是否在形状内单击。我可以通过用某种颜色填充形状并检查我单击的点是否具有这种颜色来做到这一点，但我不想使用填充颜色方法。还有其他方法吗？[](http://blog.riacode.in/2011/03/03/drawing-regular-polygons-in-html5-canvas/)

 **还找到了[**isPointInPath**](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-ispointinpath)但它没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:35:44.240

您可以尝试一些画布框架，例如[http://kineticjs.com/](http://kineticjs.com/)（检查[事件部分](http://www.html5canvastutorials.com/kineticjs/html5-canvas-path-mouseover/)），它支持开箱即用的可点击元素，或者您需要编写两个函数，一个可以为您提供相对的鼠标点击坐标画布元素（我使用了这里描述的元素：[https](https://stackoverflow.com/a/5932203/532102) ://stackoverflow.com/a/5932203/532102 ），然后编写另一个函数来检查返回的鼠标坐标是否与画布上的形状相交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T11:38:12.967

在这里签到：

[Javascript 检查鼠标在圆或多边形内单击](https://stackoverflow.com/questions/2212604/javascript-check-mouse-clicked-inside-the-circle-or-polygon/2212851#2212851)

**meouw** answer肯定有效，我已经对其进行了测试并保证它有效。似乎还有其他一些解决方案也被赞成，也许你可以尝试它们，要么**

# android - 詹金斯和安卓构建

> ID：14831188
> 
> 赞同：8
> 
> 时间：2013-02-12T11:12:11.557
> 
> 标签：android, ant, jenkins

我正在尝试使用 Jenkins 自动化 android 构建过程

我正在使用以下站点来实现此 [站点链接](http://androiddevresources.com/blog/2012/04/01/building-an-android-app-with-jenkins/)

我成功地在我自己的机器上构建它。最初我收到错误说找不到 build.xml 文件（使用 ant 构建需要这个文件）。所以我执行“android更新项目”。所以它会自动为 ant 生成所有必要的文件。

现在，当我尝试将我的 repo 托管到远程服务器并尝试从另一台机器构建时，我的问题就开始了。它给出的错误是 sdk.dir 不正确。当我分析项目文件夹时，有一个名为 local.properties 的文件，其中包含我的第一台机器的 SDK 路径，这对其他机器来说是错误的。所以我将该文件添加到 gitignore。现在该文件未跟踪，因此构建失败。

那么在詹金斯从远程仓库克隆项目后，有什么方法可以自动生成 ant 所需的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:17:54.033

从您链接到的网站，他们准确地解释了如何配置 sdk.dir：

> 配置环境
> 
> 当 jenkins 用 Ant 构建你的项目时，它需要知道你的 android sdk 文件夹在哪里。为此，在您刚刚配置的 Ant 目标构建步骤上单击 Advanced，并将以下变量添加到 Properties 字段。sdk.dir=/opt/android-sdk-linux/
> 
> 不要忘记将变量的值替换为构建服务器上安装 Android SDK 的正确位置。
> 
> 作业配置完成。单击保存。是时候测试你的构建了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T11:17:32.270

我们还用 Jenkins 构建了 android 应用，还需要编辑 local.properties。

就我而言，我已通过 Jenkins 构建本身使用 SDK 的路径更新了文件。就在构建开始之前。

您可以在 linux 上使用简单的 sed 命令或在 windows 上回显内容（覆盖内容）。

示例流程：

1.  SCM - 获取资源
2.  编辑 local.properties（如前所述）
3.  运行蚂蚁构建

注意 - 如果您使用“Invoke Ant”，您应该在处理 local.properties 的编辑之前添加一个“Execute Shell”步骤。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T11:17:15.120

是的。

如果您安装了适用于 Jenkins 的[Android 模拟器插件](https://wiki.jenkins-ci.org/display/JENKINS/Android+Emulator+Plugin)，您可以将“创建 Android 构建文件”构建步骤添加到您的工作中。

这将自动检测 Jenkins 工作区中的任何 Android 应用程序、测试或库项目，并根据需要添加/更新 build.xml 和 local.properties 文件。

或者，如果您正在使用 Ant 构建步骤并且您的存储库中已经有 build.xml，您可以忽略创建 local.properties 文件的需要，只需`sdk.dir`在 Advanced Ant 选项中指定属性即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T11:18:11.603

您可以在 jenkins 中配置 ant 属性。因此，您可以`local.properties`通过 jenkins 作业配置指定您的所有属性。

当然，您必须在 jenkins 构建服务器上安装 android sdk。

请阅读[本文](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project#Buildingasoftwareproject-AntScripts)以获取有关如何使用 jenkins 设置 ant 属性的信息。

将 local.properties 置于源代码管理之下并不是一个好习惯，因为多个开发人员和 CI 对这些属性会有不同的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T11:17:06.717

您可以将 jenkins 工作区文件夹中的 local.properties 文件编辑到正确的 sdk 路径

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-23T19:47:20.200

我认为您想将构建步骤添加`"Create Android build files"`到您的配置中。将它放在 ant build 之前。这会调用`android update project`and `android update lib-project`。确保您在 project.properties 中使用相对路径引用了您的库依赖项。像这样：

```
# Project target.
target=Google Inc.:Google APIs:19
android.library.reference.1=../external-libs/google-play-services_lib
android.library.reference.2=../external-libs/android-support-v7-appcompat 
```

![添加构建步骤 - 创建 Android 构建文件](../Images/c4f3191bbb52771ab3bacd77320c8c93.png)

# jquery - jquery $.post $.get 在使用网站 URL 时不起作用

> ID：14831190
> 
> 赞同：2
> 
> 时间：2013-02-12T11:12:14.363
> 
> 标签：jquery, post, get

我正在尝试通过 jquery 将登录名和密码发布到另一个网站我尝试了所有方法，jquery post，jquery get 和使用`XMLHttpReques`t 但没有任何效果的旧方法！每次我尝试从其他网站阅读（我的意思是获取或发布）时，我都会在 firebug 中遇到错误

> 连接关闭 Content-Type text/html; charset=UTF-8 日期 Mon, 11 Feb 2013 22:20:29 GMT Server Apache Transfer-Encoding chunked X-Powered-By PHP/5.3.3

但是当我尝试从服务器上的页面中读取时，我可以获得它们的 html。使用网站 url 获取文件时出现问题。哪位大神知道怎么解决这样的问题，请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:27:22.177

您必须知道，大多数浏览器都限制了对其他域的 ajax 调用。其他人，由于其他一些正当理由，为了这样做，使用第三方 js 库来执行这个 CROSS-DOMAIN 请求/调用。

# ruby - 红宝石收集独特的元素

> ID：14831191
> 
> 赞同：4
> 
> 时间：2013-02-12T11:12:20.613
> 
> 标签：ruby, hash

我有一些哈希数组

```
a = [{name:"x", long:1.0, lat:2.0}, 
     {name:"y", long:2.0, lat:3.0}, 
     {name:"z", long:1.0, lat:2.0}] 
```

如何删除`{name:"x", long:1.0, lat:2.0}`，哪些坐标等于最后一个元素，换句话说，我需要留下最后一个（在我的情况下：with `name:"z"`）具有唯一坐标的散列并删除所有具有相同坐标的先前元素

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T11:23:46.247

尝试使用`Array#uniq`块：

```
a.uniq { |item| [item[:lat], item[:long]] } 
```

块的返回值用作比较唯一性的值。

目前尚不清楚为什么要删除“x”而不是“z”，但您可以通过在调用数组之前反转数组来使用示例数据集来实现这`uniq`一点。

# servicestack - ServiceStack：在没有 AuthUser 的情况下保留自定义用户对象

> ID：14831192
> 
> 赞同：2
> 
> 时间：2013-02-12T11:12:29.177
> 
> 标签：servicestack, couchbase

我正在研究 ServiceStack 的授权功能，并希望使用 Couchbase 作为我的数据存储。我知道 Couchbase 没有 IUserAuthRepository 实现，所以我必须自己开发，这不是问题。

我遇到的问题是，如果我按原样存储内置的 UserAuth 对象，CB 它使用 Id 字段作为文档标识符。这是一个问题，因为我认为标识符应该是特定于对象类型的，否则需要一个单独的“桶”来防止不同对象之间的 id 冲突。我真的不想有很多桶，除非我必须。

我的偏好是将文档 ID 设置为对象的类型加上对象特定的标识符。

例如使用 ID“UserAuth_1234”或使用用户名“UserAuth_MikeGoldsmith”

我尝试为不同的应用程序对象重新使用存储桶的假设是否有效，或者我应该考虑每个对象类型/命名空间的存储桶？

无论是来自 Couchbase 还是 ServiceStack 爱好者，任何方向都将受到欢迎。

谢谢

**附加信息**

好的，所以从约翰的回答中，我将假设我的对象类型的附加属性是有效的。

我发现这篇***[文章](https://stackoverflow.com/questions/11117469/how-can-i-extend-servicestack-authentication)***Mythz 建议***[BootStrapApi](https://github.com/ServiceStack/SocialBootstrapApi)***示例`AuthUser`使用自定义属性扩展。但是，对我来说，它看起来像`AuthUser`被持久化了两次，第一次作为对象，`AuthUser`然后再次作为`User`对象（两次都使用`OrmLiteAuthRepository`）。我对吗？

本质上，我想利用 SS 身份验证功能，但控制将保存到 Couchbase 中的 POCO 对象。如果可能的话，有人可以给出一些指导吗？如果可以，我需要实施/挂钩什么？

我尝试实现 Couchbase 版本`IUserAuthRepository`，但是它使用 UseAuth 具体类型，所以我不能使用我自己的对象。

我也尝试过使用 register 的`OnAuthenticated`方法，`AuthUserSession`但此时`UserAuth`POCO 将一直使用 register `IUserAuthRepository`。

我很高兴使用，`CredentialsAuthProvider`因为我只想要用户名/密码身份验证。以后可以添加更多。

再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:03:00.693

存储桶与关系世界中的数据库大体相似，因此通常不应将它们映射到应用程序对象。我不熟悉 ServiceStack 的身份验证功能，但您建议使用有意义的前缀键似乎是合理的，并且是提供文档分类的常用方法。

请记住，在 Couchbase 中，文档中没有被视为“id”或“key”字段的字段。用于存储文档的密钥在元数据中可用，但不是 JSON 文档本身的一部分。因此，如果您能够利用视图，那么您还可以存储具有 type 属性的文档，然后通过一些非 id 属性进行查询。换句话说，键值中的键不必是您检索用户身份验证文档的方式。

此外，有些开发人员使用键前缀作为为视图提供文档分类的一种方式，因此您上面的键模式也适用于此。我的偏好是类型属性，但这并不比您的建议更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:07:14.510

我遇到过 ServiceStack UseCase 示例，其中一个直接解决了我的***[自定义身份验证](https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/CustomAuthentication)***问题。

我能够覆盖该`TryAuthenticate`方法并使用我自己的 UserRepository 来支持 Couchbase。

# php - 使用 array_merge_recursive 合并 2 个数组无法正常工作

> ID：14831194
> 
> 赞同：0
> 
> 时间：2013-02-12T11:12:35.017
> 
> 标签：php, arrays, multidimensional-array

我的数据库有 2 列。该人的 ID 在 1 列中重复 5 次，每次在另一列中与问题答案配对 像这样：

```
ID  Answer
1   A1
1   A4
1   A2
1   A9
1   A3
12  A1
12  A11
12  A12
12  A17
12  A2 
```

我想做的是将所有答案合并到 1 个数组中，其 ID 类似于

```
array (
        [1] => array ( 0 => 'A1', 1 => 'A4', 2 => 'A2', 3 => 'A9', 4 => 'A3'),
        [12] => array ( 0 => 'A1', 1 => 'A11', 2 => 'A12', 3 => 'A17', 4 => 'A2')
        ) 
```

我的代码如下：

```
foreach ($quiz_answers as $aq => $aa)
            {
                $array_loop = array(  $aa['response_id'] => array( $aa['answer'] ) );
                $ss = array_merge_recursive($array_loop, $array_loop);

            } 
```

我的问题是循环没有以所需的方式合并，我只得到 2 个输出。我不太擅长操作数组，可能我需要另一个函数，但我不太确定我缺少什么。我尝试过使用另一个变量，`array_merge_recursive($anotherVariable, $array_loop);`但这也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:26:25.250

只需更改您的`foreach`循环以按照您的意愿构建结果数组。

```
foreach ($quiz_answers as $aa) {
    $ss[$aa['response_id']][] = $aa['answer'];
} 
```

这给出了一个`$ss`你想要的数组：

```
array(
    1  => array('A1', 'A4', 'A2', 'A9', 'A3'),
    12 => array('A1', 'A11', 'A12', 'A17', 'A2'),
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:20:19.433

您需要做的是拥有一个包含用户 ID 的数组，每个用户 ID 都是一个关联数组，其中包含一组答案。

```
array (
        [1] => array ( 0 => 'A1', 0 => 'A4', 0 => 'A2', 0 => 'A9', 0 => 'A3'),
        [12] => array ( 0 => 'A1', 0 => 'A11', 0 => 'A12', 0 => 'A17', 0 => 'A2')
        ) 
```

所以这样的事情会起作用（下面的骨架代码）

```
$answers = array();
foreach( $quiz_answers as $id => $ans ) {
  // check if $answers[$id] exists, otherwise create it here....
  if(exists(....)) ...
  else $answers[$id] = array();

  // Then add the current answer to it, as below
  array_push($answers[$id], $ans );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:26:15.043

```
echo "<pre />";
for($i=0;$i<count($array);$i++)
{
    $output[$array[$i]['ID']][]=$array[$i]['Answer'];
}
print_r($output); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T11:34:26.293

```
$quiz_answers = // get all the data from database.
$res          = array();
foreach($quiz_answers as $key=>$val){
     $res[$val['response_id']][]    = $val['answer'];
}

print_r($res); 
```

# oracle - Oracle VPD 列屏蔽，如何将默认（空）值更改为 XXX

> ID：14831195
> 
> 赞同：0
> 
> 时间：2013-02-12T11:12:43.517
> 
> 标签：oracle, oracle10g

使用 Oracle VPD，在添加策略和创建函数后，我能够对未经授权的用户隐藏列。

但不是（空）我怎么能显示像'xxxxxx'这样的东西

同样在我验证用户登录的功能中，比如

```
if sys_context( 'userenv', 'session_user' ) = 'USER1' 
```

在函数中删除这种硬编码的最佳方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:35:43.580

为了在不为 null 的位置返回文本，您必须在表顶部创建一个视图以将 null 更改为您想要的静态文字，因为 VPD 中的唯一选项是隐藏行或设置秘密列为 NULL。

对于您问题的第二部分，如果您使用该检查来确定谁可以访问敏感列，您可以使用一个角色并让 VPD 函数检查如下：

```
return 'exists (select null from session_roles where role = ''XXXXXX'')'; 
```

即`XXXXXX`在他们的会话中设置了角色（只需创建一个适当的角色并将其授予您的特权用户）的任何人都可以看到数据。这样你就不需要硬编码一堆用户ID。

例如：

如果我们创建一个角色并将其授予测试用户：

```
SQL> create role ACCESS_TABLEA_SEC_COL;

Role created.

SQL> grant ACCESS_TABLEA_SEC_COL to test;

Grant succeeded. 
```

对于我的设置，我创建了一个简单的测试表 + 一个阻止人们阅读该`your_sec_col`列的策略。

```
SQL> create or replace package pkg_security_control
  2  as
  3    function apply_access(p_owner in varchar2, p_obj_name  in  varchar2) return varchar2;
  4  end;
  5  /

Package created.

SQL> create or replace package body pkg_security_control
  2  as
  3    function apply_access(p_owner in varchar2, p_obj_name  in  varchar2)
  4      return varchar2
  5    is
  6    begin
  7      return 'exists (select null from session_roles where role = ''ACCESS_TABLEA_SEC_COL'')';
  8    end;
  9  end;
 10  /

Package body created.

SQL> create table TABLEA
  2  (
  3    id number primary key,
  4   your_sec_col  varchar2(30)
  5  );

Table created.

SQL> insert into tablea values (1, 'secret text1');

1 row created.

SQL> insert into tablea values (2, 'secret text2');

1 row created. 
```

现在，如果我们从该表中选择并且我们没有`ACCESS_TABLEA_SEC_COL`角色，我们会得到：

```
SQL> select *
  2    from tablea;

        ID YOUR_SEC_COL
---------- ------------------------------
         1
         2 
```

但你想要一个像`xxxxx`. VPD 本身无法做到这一点，但视图可以解码`NULL`为该字符串。

```
SQL> create view v_tablea
  2  as
  3  select id, case when your_sec_col is null then 'xxxxxx' else your_sec_col end your_sec_col
  4    from TABLEA;

View created. 
```

现在从视图中选择将取决于是否设置了角色：

```
SQL> set role none;

Role set.

SQL> select *
  2    from tablea;

        ID YOUR_SEC_COL
---------- ------------------------------
         1
         2

SQL> select *
  2    from v_tablea;

        ID YOUR_SEC_COL
---------- ------------------------------
         1 xxxxxx
         2 xxxxxx

SQL> set role all;

Role set.

SQL> select *
  2    from v_tablea;

        ID YOUR_SEC_COL
---------- ------------------------------
         1 secret text1
         2 secret text2

SQL> select *
  2    from tablea;

        ID YOUR_SEC_COL
---------- ------------------------------
         1 secret text1
         2 secret text2 
```

所以 VPD 仍然可以保护您的表免受任何人从中选择，但您会让客户从视图中选择来获取文字字符串。如果您的受保护字符串可以包含 NULL，并且您想将它们与无访问权限区分开来，则可以将角色检查放在视图中。

```
create view v_tablea
as
select id, 
       case (select 'A' from session_roles where role = 'ACCESS_TABLEA_SEC_COL') 
         when 'A' then your_sec_col else 'xxxxxxxx' end your_sec_col
  from TABLEA; 
```

# java - 替换 PDF 中的签名内容

> ID：14831200
> 
> 赞同：1
> 
> 时间：2013-02-12T11:13:04.007
> 
> 标签：java, pdf, itext

如何在 iText 中做到这一点？我有一个带有客户签名的 PDF。我需要为无符号属性添加 ocsp 响应。

我知道如何使用

```
org.bouncycastle.cms.CMSSignedData.replaceSigners(...).getEncoded() 
```

但我不知道如何`PdfName.CONTENTS`在 PDF 中使用`new PdfString(newSignature).setHexWriting(true)`. 如果我使用此代码：

```
PdfDictionary other = new PdfDictionary();
other.put(PdfName.CONTENTS, new PdfString(newSignature).setHexWriting(true));
dicSignature.merge(other); 
```

包含签名的字典在哪里`dicSignature`，然后签名（在 Adob​​e Reader 中打开文档时）被破坏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:00:25.147

当 iText 在正常模式下使用 a 操作文档时`PdfStamper`，它可以（并且经常这样做）重新排列现有的 PDF 对象。这显然破坏了任何现有集成签名的哈希值。此外，必须签名的字节范围会发生变化。这很可能是您的问题。

当 iText 使用`PdfStamper`附加模式处理文档时，它会保持 PDF 原样，仅附加其添加和更改。虽然这通常是防止集成签名被破坏的方法，但您不能以这种方式更改签名的内容，因为对于嵌入签名有比一般 PDF 更严格的规则。因此，切换到附加模式并不能解决您的问题。

因此，iText 有一个明确的方法来进行签名插入，而无需更改 PDF：

```
MakeSignature.signDeferred(PdfReader reader,
    String fieldName,
    OutputStream outs,
    ExternalSignatureContainer externalSignatureContainer)
throws DocumentException, IOException, GeneralSecurityException 
```

它的名字是因为这个方法最初是为延迟签名的用例设计的，即首先准备 PDF 进行签名（即添加哈希字节范围所需的所有字典和其他必要的结构，包括在其中留下一个空白最终将注入签名容器），计算哈希值，并将其发送到其他服务，同时将准备好的 PDF 存储在本地。一旦其他服务返回签名，准备好的 PDF 就会被定位，并使用此方法将检索到的签名插入其中。

与您的用例的唯一区别是间隙中已经存在签名。但是，该签名将在使用时被您更新的签名覆盖`signDeferred`。

说了这么多，如果您期望在*对未签名属性添加 ocsp 响应后，* Adobe Reader 会使用这些信息进行验证，您可能会感到惊讶。在根据[ISO-32000-1](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)的集成 PDF 签名的上下文中，第 12.8.3.3 节*PKCS#7 Signatures as used in ISO 32000*，

> PKCS#7 对象应包含 [...] 作为**签名属性**的吊销信息（PDF 1.6）：此属性可能包括对签名者证书及其颁发者证书执行吊销检查所需的所有吊销信息。由于撤销信息是签名属性，**因此必须在计算数字签名之前获取。**这意味着签名者使用的软件必须能够构建证书路径和相关的撤销信息。如果无法获得其中一个元素（例如无法连接），则无法使用此属性进行签名。

# android - 切换标签时如何获得通知（并能够取消）

> ID：14831201
> 
> 赞同：0
> 
> 时间：2013-02-12T11:13:05.893
> 
> 标签：android, tabs, navigation, android-viewpager, android-tabhost

## 背景

我有一个 viewPager 和一个 tabHost 用于在页面之间导航。

在某些情况下，viewPager 中的片段想要禁止导航，甚至显示一个对话框来要求用户验证片段中所做的更改是否将被取消。

如果用户确认，我将允许导航，如果没有，我将禁止它。

## 问题

当用户尝试导航到另一个选项卡时，我需要得到通知，并且（在我创建的某些条件下）禁止/允许它。

## 我试过的

我发现的唯一功能是如何禁用切换。

对于 viewPager ，我使用：

```
mViewPager.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(final View v, final MotionEvent event) {
        return !mIsTabsSwitchingEnabled;
    }
}); 
```

对于 tabHost ，我使用：

```
mTabHost.getTabWidget().setEnabled(mIsTabsSwitchingEnabled); 
```

然而，我需要的是完全不同的——我需要捕捉开始导航的事件，并且能够告诉它我是否允许它。

## 问题

我应该如何解决这个问题？

如何在开始导航时收到通知，并在需要时取消它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:15:18.523

您应该使用 Tab [TabHost.OnTabChangeListener](http://developer.android.com/reference/android/widget/TabHost.OnTabChangeListener.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:13:37.753

好的，我现在已经通过使用下一个代码解决了它，我希望它涵盖了所有内容。

如果有人能想到其他可能更好的解决方案，请写下来。

```
final OnTouchListener onTouchListener = new OnTouchListener() {

    @Override
    public boolean onTouch(final View v, final MotionEvent event) {
        return isCurrentFragmentNeedTabSwitchingBlocking();
    }
};
mViewPager.setOnTouchListener(onTouchListener);
for (int i = 0; i < mTabHost.getTabWidget().getChildCount(); ++i) 
    mTabHost.getTabWidget().getChildAt(i).setOnTouchListener(tabOnTouchListener); 
```

# inheritance - JPQL 等效

> ID：14831205
> 
> 赞同：0
> 
> 时间：2013-02-12T11:13:15.570
> 
> 标签：inheritance, eclipselink, jpql, criteria-api

我必须为以下 Oracle-SQL 编写一个 JPQL 查询：

```
SELECT * FROM Foo f, Bar b, Xyz x WHERE f.id = b.foo(+) and f.id = x.foo(+) and (lower(f.label) like lower('%filter%') or lower(f.code) like lower('%filter%') or lower(b.label) like lower('%filter%') or lower(x.label) like ('%filter%'); 
```

有多个 Bar 和 Xyz 表，每个 Bar/Xyz 对都连接到 Foo 的一个子类：

```
@Entity
@Table(name = "FOO")
// JOINED doesn't work because of an EclipseLink error!
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "TP", discriminatorType = DiscriminatorType.STRING, length = 5)
public abstract class Foo extends AbstractEntity {

private static final long serialVersionUID = -9137682737124302402L;

@Column(name = "CODE", nullable = false, length = 40)
private String code;

@Column(name = "LABEL", nullable = false, length = 4000)
private String label;

    //...other properties

}

@Entity
@Table(name = "ABCD")
@DiscriminatorValue("ABCD")
public class Abcd extends Foo {

private static final long serialVersionUID = 250474360860393393L;

@OneToMany(mappedBy = "abcd")
@OrderColumn(name = "IDX")
private List<Bar> barList;

@OneToMany(mappedBy = "abcd")
@OrderColumn(name = "IDX")
private List<Xyz> xyzList;

protected Abcd() {
    this.barList = new ArrayList<Bar>();
    this.xyzList = new ArrayList<Xyz>();
}

    //...getter/setter
}

@Entity
@Table(name = "BAR")
public class Bar extends AbstractEntity {

private static final long serialVersionUID = 2628239098357340769L;

@ManyToOne(fetch = FetchType.EAGER, optional = false, cascade = CascadeType.ALL)
@JoinColumns({ @JoinColumn(name = "ABCD_ID", referencedColumnName = "ID", nullable = false) })
private Abcd abcd;

@Column(name = "LABEL", nullable = false, length = 4000)
private String label;

protected Bar() {
}

    // ...getter/setter, some other properties
}

@Entity
@Table(name = "XYZ")
public class Xyz extends AbstractEntity {

private static final long serialVersionUID = 2628239098357350769L;

@ManyToOne(fetch = FetchType.EAGER, optional = false, cascade = CascadeType.ALL)
@JoinColumns({ @JoinColumn(name = "ABCD_ID", referencedColumnName = "ID", nullable = false) })
private Abcd abcd;

@Column(name = "LABEL", nullable = false, length = 4000)
private String label;

protected Xyz() {
}

    // ...getter/setter, some other properties
}

@MappedSuperclass
public abstract class AbstractEntity {

private static final long serialVersionUID = -8574667350713432415L;

@EmbeddedId
private PersistId id;

public static boolean isId(PersistId id) {
    return (id != null && id.getId() > 0);
}

public boolean hasId() {
    return isId(getId());
}

public PersistId getId() {
    return this.id;
}

public void setId(PersistId id) {
    this.id = id;
}
} 
```

PersistId 封装了一个名为 ID 的列，目前实现为 Long。正如我之前所说，Foo 还有一些其他子类，它们连接到其他一些类，例如 Bar/Xyz。

如何在 Eclipselink 中实现 SQL（使用 Criteria API）？我已经测试了一些不同的东西，但我没有得到任何结果。我还使用子查询来获取与过滤器匹配的 ABCD_ID，但是我在匹配 Foo 和 Abcd 时遇到了问题。我有两种方法，分别生成查询和过滤器参数。

```
private CriteriaQuery<Foo> getQuery() {
    CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();
CriteriaQuery<Foo> query = criteriaBuilder.createQuery(Foo.class);
Root<Foo> foo = query.from(Foo.class);
query.select(foo);
query.distinct(true);
return query;
}

private CriteriaQuery<Foo> addFilter(CriteriaQuery<Foo> query, String fullTextFilter) {
    CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();
Set<Root<?>> roots = query.getRoots();
Iterator<Root<?>> iter = roots.iterator();
Root<Foo> foo = (Root<Foo>) iter.next();

List<Predicate> criteria = new ArrayList<Predicate>();

if (fullTextFilter != null) {
        ParameterExpression<String> p = criteriaBuilder.parameter(String.class, "filter");
    Path<String> label = foo.<String>get("label");
        Path<String> code = foo.<String>get("code");

        // TODO: add some code to handle Bar and Xyz labels
        criteria.add(criteriaBuilder.or(criteriaBuilder.like(criteriaBuilder.lower(label), criteriaBuilder.lower(p)),
                criteriaBuilder.like(criteriaBuilder.lower(code), criteriaBuilder.lower(p))));
    }
    if (criteria.size() == 1) {
        query.where(criteria.get(0));
    }
    if (criteria.size() > 1) {
        query.where(criteriaBuilder.and(criteria.toArray(new Predicate[0])));
    }

    return query;
} 
```

有任何想法吗？我想，我还没有理解 Criteria API 的任何基本内容，你能用一些源代码启发我吗？

谢谢安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:46:44.047

如果您可以允许加入 Abcd 表，则查询应该在 Abcd 实体而不是 Foo 上，因为它与 Xyz 和 Bar 有关系。然后，您将在查询中添加 Joining 或 fetch join：

```
CriteriaQuery<Abcd > query = criteriaBuilder.createQuery(Abcd.class);
Root<Abcd> foo = query.from(Abcd.class);
foo.fetch("barList", JoinType.LEFT);
foo.fetch("xyzList", JoinType.LEFT);
query.select(foo);
query.distinct(true); 
```

# mysql - 如何加入自己的选择？

> ID：14831207
> 
> 赞同：2
> 
> 时间：2013-02-12T11:13:22.730
> 
> 标签：mysql

1.  加入一个表本身是没有问题的。但是我需要自己加入一个创建的选择。第一个想法：使用临时表，但我只能打开一次。这是真的？

2.  MySQL 是否足够聪明，可以计算始终只有一次相同术语的子选择？例如：

    ```
    join (select * from asdf where term) as one
    join (select * from asdf where term) as two
    ...
    join (select * from asdf where term) as ten 
    ```

一般是怎么解决的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:07:22.097

您可以多次加入临时表

```
 select * into #temp from asdf where term
    ...
    join #temp as one
    join #temp as two
    ...
    join #temp as ten 
```

# javascript - 如何获取 POST 方法“$.post()”的结果？

> ID：14831208
> 
> 赞同：-3
> 
> 时间：2013-02-12T11:13:25.513
> 
> 标签：javascript, jquery

我使用以下代码发布数据：

```
$.post("http://domain/page.aspx", postdata); 
```

**更新：**

以下代码不起作用：

```
$.post("http://domain/page.aspx", postdata, function(data){alert(data);}); 
```

如何以字符串形式获取服务器响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:16:36.807

使用回调函数

```
$.post("http://domain/page.aspx", postdata, function(result) {
    alert(result);
    $('divID').html(result);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:19:26.063

我希望您遇到的是[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)，这会阻止 ajax 跨域发布，除非服务器上支持并配置了[CORS以允许来自页面来源的请求（并且正在使用的浏览器支持它）。](http://www.w3.org/TR/access-control/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T11:39:12.303

从你的评论

> *好的，我明白了。当我在它之后放置警报时，POST 具有“正在等待”状态。**如果我删除警报页面正在更改（很难阻止它）。重定向前 POST 的状态为“已取消”。***

我了解您是`.post`在单击某个链接后拨打电话的。您需要取消点击事件，以便不跟随链接。

所以如果你有一些代码

```
$('a').click(function(){
  $.post("http://domain/page.aspx", postdata, function(data){alert(data);});
}); 
```

将其更改为

```
$('a').click(function(e){ // added e as parameter which get the event
  e.preventDefault(); // added this line which cancels the default action of the click
  $.post("http://domain/page.aspx", postdata, function(data){alert(data);});
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-12T11:19:06.127

`$.post()`在文档中有以下描述：

**描述：**使用 HTTP POST 请求从服务器加载数据。

```
 jQuery.post( url [, data ] [, success(data, textStatus, jqXHR) ] [, dataType ] ) 
```

在哪里，

**网址**

```
 Type: String
    A string containing the URL to which the request is sent. 
```

**数据**

```
 Type: PlainObject or String
    A plain object or string that is sent to the server with the request. 
```

**成功（数据，文本状态，jqXHR）**

```
 Type: Function()
    A callback function that is executed if the request succeeds.
    dataType
    Type: String
    The type of data expected from the server. Default: Intelligent Guess (xml, json, script, text, html). 
```

所以，

```
$.post("test.php", { "func": "getNameAndTime" },
function(data){
console.log(data.name); // John
console.log(data.time); // 2pm
}, "json"); 
```

返回 JSON 数据。因此，在此处使用您的 dataType 并相应地使用该功能。

# similarity - 余弦相似度的预处理要求是什么？

> ID：14831210
> 
> 赞同：0
> 
> 时间：2013-02-12T11:13:30.857
> 
> 标签：similarity, cosine-similarity

余弦相似度的输入是两个向量，代表我要比较的两个不同数据。对向量的语义有要求吗？它可以简单地是每个文件的字节表示。然后计算每个字节的频率？这有意义吗？或者应该有一个文件的矢量化，其中每个维度不是来自文件的原始数据，而是一些元数据作为每个术语的频率，如果我们为文本文件或 tf-idf 编码模型说话？换一种说法：为了“正确”，余弦相似度是否要求对数据进行复杂的预处理步骤，或者我可以将其作为输入整数值给出，代表我的数据的每个字节，而不考虑文本或只是频率每个字节的术语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:26:04.577

数据的“语义”至关重要。例如，假设您正在比较英文文本文档。对于大型文档，各种字母出现的频率大致相同，因此如果向量的元素表示字母的数量，您将难以区分文档。如果你的向量的元素代表字数，你会得到更好的结果。如果向量的元素代表“词干”单词的数量，那就更好了。等等。

余弦相似度是一种“愚蠢”的统计量度——由你决定是否给它一些有意义的东西来比较。

# json - 如何在 MVC 4 中网站的用户管理模块中设置控制级别权限

> ID：14831211
> 
> 赞同：0
> 
> 时间：2013-02-12T11:13:31.403
> 
> 标签：json, asp.net-mvc-4

我有内置于 MVC4 的用户管理模块。我的目的是为每个用户设置访问主网站网页中的控件的权限。我不想在我的主网站的每个网页中硬编码权限。我完全想要在 webforms 中工作的东西，即“查找控件”属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:13:31.403

一种解决方法是获取客户端作为 Jason 数据的权限，并使用 JS 从客户端启用或禁用控件，我对此很确定。有人请给我一些启发。

# php - 用于 Json 输出的 php 数组

> ID：14831213
> 
> 赞同：2
> 
> 时间：2013-02-12T11:13:32.363
> 
> 标签：php, javascript, arrays, json, google-analytics

我正在尝试获得最佳实践来操作我的数组以获取类似于此格式的 json（更好地使用图表）

```
 {
    "serieMonth":["Aug-12","Sep-12","Oct-12","Nov-12","Dec-12","Jan-13","Feb-13"],
    "serieCA":[4214,10119,13325,12818,7177,20628,7664],
    "serieAdwordsCA":[0,0,0,0,0,310,332],
    "serieBooking":[10,28,46,34,17,51,16],
    "serieAdwords":[0,0,0,0,0,1,1],
    "serieTotalBooking":[10,28,46,34,17,52,17],
    "serieCartRepartition":[421,361,290,377,422,397,451],
    "serieTotalCart":[421,361,290,377,422,397,451]
    } 
```

实际上我的输出看起来像这样：

```
[
{"date_year":"2012","date_month":"08","ad_cost":"0.0","ad_clicks":"0"},
{"date_year":"2012","date_month":"09","ad_cost":"0.0","ad_clicks":"0"},
{"date_year":"2012","date_month":"10","ad_cost":"0.0","ad_clicks":"0"},
{"date_year":"2012","date_month":"11","ad_cost":"0.0","ad_clicks":"0"},
{"date_year":"2012","date_month":"12","ad_cost":"44.9","ad_clicks":"43"},
{"date_year":"2013","date_month":"01","ad_cost":"297.56","ad_clicks":"462"},
{"date_year":"2013","date_month":"02","ad_cost":"82.5","ad_clicks":"103"}
] 
```

我正在使用 javascript 来更改它：

```
var xAxisLabels = new Array(),
adClicks = new Array(),
adCost = new Array();
$.each(data, function(i,v) {
  xAxisLabels.push(v["date_month"]+'/'+v["date_year"]);
  adCost.push(parseInt(v["ad_cost"]));
  adClicks.push(parseInt(v["ad_clicks"]));
}); 
```

我正在寻找在 php 中执行此操作的最佳方法，因为我通过 google api 获取此数据，这是我的 php。

```
// dimensions
$dimensions = 'ga:year,ga:month';
$_params[] = 'date_year';
$_params[] = 'date_month';
// metrics
$metrics = 'ga:adCost,ga:adClicks';
$_params[] = 'ad_cost';
$_params[] = 'ad_clicks';

$response = $service->data_ga->get('ga:' . $projectId, $from, $to, $metrics, array('dimensions' => $dimensions));

$analyticsStats = array();
foreach ($response['rows'] as $row) {
  $dataRow = array();
  foreach ($_params as $colNr => $column) {
    $dataRow[$column] = $row[$colNr];
  }
  array_push($analyticsStats, $dataRow);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:10:47.680

您可以构建一个数组数组，然后在循环中添加子数组项：

```
$output = array(
    "serieMonth" => array(),
    "serieCA" => array(),
    "serieAdwordsCA" => array(),
    "serieBooking" => array(),
    "serieAdwords" => array(),
    "serieTotalBooking" => array(),
    "serieCartRepartition" => array(),
    "serieTotalCart" => array()
);
foreach($response["rows"] as $row) {
    $output["serieMonth"][] = date("Y-M", strtotime("{$row['date_year']}-{$row['date_month']}-01"));
    $output["serieCA"][] = $row["ad_cost"];
    $output["serieAdwordsCA"][] = $row["ad_clicks"];
    // etc...
}
echo json_encode($output); 
```

# javascript - Nodejs，快递。有没有办法存储/获取端点中需要向客户端显示的 POST 参数？

> ID：14831217
> 
> 赞同：1
> 
> 时间：2013-02-12T11:13:50.000
> 
> 标签：javascript, node.js, express

我正在编写一些测试页面来调试我的 API 并整齐地公开它。

使用 Express [app.routes](http://expressjs.com/api.html#app.routes)我可以获得我的应用程序实现的所有端点的简洁列表，因此我可以向用户显示可能的 POST 请求列表。

但是，它们中的大多数都需要一些 POST 参数，服务器通过这种方式从请求中获取这些参数，例如（/api/ping 需要一个“ping”POST 参数）：

```
app.post("/api/ping", function(req, res) //
{
    var ping = req.param('ping');

    if( ping ) {    
        res.out.message = "Pong";
    } else {
        res.out.message = "Ping missing";
    }

    return exports.respond(res);
}); 
```

我注意到 app.routes 在端点列表中有一个“keys”和一个“params”键，但我认为这似乎仅用于路径中的参数（例如，当有人请求时将“userid”作为参数“/user/:userid”路径）。我相信 express 将这些存储的参数称为“前提条件”。

有没有办法添加这样的先决条件来表达 POST 参数的应用程序，以便它们也显示在 app.routes 对象中，并且我可以整齐地显示哪个端点需要哪些参数？

# c# - 如何在 c#.net 中播放多个 wav 文件

> ID：14831229
> 
> 赞同：1
> 
> 时间：2013-02-12T11:14:41.223
> 
> 标签：c#, naudio

我需要同时（同时）播放多个 wav 文件。它必须具有音量控制和停止、暂停和播放的选项。

我为此使用了 naudio dll。它工作正常，但有时应用程序会崩溃。

这是我的代码：

```
_WavOut = new WaveOut();
_WavReader = new WaveFileReader(soundfilepath);
_WavReader = (WaveFileReader)WaveFormatConversionStream.CreatePcmStream(
    _WavReader);
_WavOut.Init(_WavReader);
_WavOut.Play(); 
```

这是我得到的堆栈跟踪：

在 NAudio.Wave.WaveOutBuffer.WriteToWaveOut() 在 NAudio.Wave.WaveOutBuffer.OnDone() 在 NAudio.Wave.WaveOut.Callback(IntPtr, WaveMessage, IntPtr, NAudio.Wave.WaveHeader, IntPtr)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:21:36.290

如果您使用的是 SoundPlayer，这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T05:41:53.533

**现在我正在使用 wmp.dll .. 效果很好。创建一个windowsmediaplayer对象的对象并给他们playurl，然后它将播放并且还可以通过创建多个对象同时播放多个wav文件，并且在obj.setting.mute = true中也有静音选项；并且还可以使用 obj.controlls.stop 功能停止播放和恢复选项。**

# javascript - 从 iframe 替换顶部文档而不更改当前 URL

> ID：14831232
> 
> 赞同：2
> 
> 时间：2013-02-12T11:14:47.410
> 
> 标签：javascript, dom

我需要从 iframe（同源）替换顶部文档的全部内容。在 iframe 执行的 JavaScript 之后完成这项工作：

```
var doc = window.top.document.open("text/html", "replace");
doc.write('hello');
doc.close(); 
```

但是，在 Firefox 中，该操作会将当前文档的 URL 更改为 iframe 的 URL。在 Chrome 中，URL 没有改变。是否可以从 iframe 中替换文档，但以适用于所有合理浏览器的方式保留其原始 URL？（我尝试删除“替换”参数，但没有帮助）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:13:00.943

如果您必须替换完整的内容（包括头部等），您可以尝试：

```
var html = 'YOUR HTML' /* your html string*/,
    url = "javascript:(function(){var c = '" +html +
           "';document.open();document.write(c);document.close();})();";
// replacing the original location with the dynamically generated one 
window.top.location.replace(url); 
```

在这种情况下，url 将与以前相同。如果您不需要更改完整文件，只需更改内容，您可以使用：

```
window.top.document.documentElement.innerHTML = 'YOUR HTML'; 
```

这将使顶部文档的头部保持不变，但会在不更改 url 的情况下替换所有内容。

# android - Google API OAuth 用户信息

> ID：14831239
> 
> 赞同：0
> 
> 时间：2013-02-12T11:15:15.240
> 
> 标签：android, oauth-2.0

我正在使用 google OAuth API 使用[此 url获取用户信息](https://www.googleapis.com/oauth2/v1/userinfo?alt=json)

与范围

> [https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)
> [https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)

我得到以下回复

```
 { "id": "123456788", "name": "Joe Shmoe", 
   "given_name": "Joe", "family_name": "Shmoe", 
   "link": "https://plus.google.com/1234567788", 
   "picture": "https://IMAGE_URL/photo.jpg", 
   "gender": "male", "birthday": "0000-03-10", "locale": "en-GB"} 
```

我正在寻找电子邮件，但没有回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T00:56:21.190

这是因为 google profile API 仅针对您允许在您的个人信息可见性设置中查看的圈子提供扩展信息。

例如，如果您允许您的朋友圈查看您的移动和私人电子邮件 - 他们可以看到它（但只有添加到这些圈子中的人和应用程序）。

默认情况下，所有应用程序都是访客（公共）。

# c# - Migration Ninject -> 简单注入器

> ID：14831243
> 
> 赞同：1
> 
> 时间：2013-02-12T11:15:35.630
> 
> 标签：c#, dependency-injection, ninject, simple-injector

我们`Ninject`在我们的项目中使用，但有一些性能问题。用 .测试同一个项目会很有趣`Simple Injector`。

你知道一些使迁移更容易的指南吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:31:16.120

至于今天没有这样的迁移指南`Ninject`-> `Simple Injector`。

# clearcase - 在 ClearCase 中，将新文件添加到源代码控制后，更新集和动态视图需要多长时间？

> ID：14831245
> 
> 赞同：1
> 
> 时间：2013-02-12T11:15:39.383
> 
> 标签：clearcase

我试图了解执行添加到源代码控制操作后 ClearCase 操作需要多长时间。

如果我正在通过 CCRC 快照视图工作并将文件添加到源代码控制，那么更改集需要多长时间才能使用新行进行更新，以及在操作完成之前新文件将在动态下可用多长时间指向文件签入的流的视图？

有没有办法通过调用动态视图的手动更新或其他方式来加速该过程？

问候，

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:22:42.267

> 使用新行更新变更集需要多长时间

一旦你签出一个文件，选择一个活动，它会立即更新该活动的 chenge 集。

只有在您签入后（通过您在 CCRC 中的 Web 快照视图），动态视图才会反映该文件，并且该更新也几乎是即时的。
为了加快速度，您可以刷新动态视图，或者在要查看更新的目录中执行 cleartool ls。

在每种情况下，当您通过 CCRC 进行结帐或签入时，您都会向 CCRC 服务器发布一个 http 请求，该服务器反过来完成 ClearCase Vob/View 服务器的操作。
因此，一旦结帐/签入完成，任何其他 ClearCase 视图（CCRC 与否）都将准备好反映更改。
唯一需要时间的部分是 CCRC 客户端和 CCRC 服务器之间的通信。该服务器通常与 ClearCase 服务器在同一个 LAN 上，ClearCase 命令本身执行得相当快。

* * *

“相当快”对于 OP 的需要来说太慢了：**在 checkin 上的 postop 触发器**。

该触发器在服务器端使用 ClearCase 动态视图，并且必须在元素签入 (on `mkelem`) 上引入休眠，以便该触发器的第二次调用（在签入的父目录上）正确检测新创建的文件.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:22:52.970

从理论上讲，它应该是即时的。添加完成后，动态视图应该会看到新文件。实际上，由于 ClearCase 的性质及其视图流程，它可能需要更长的时间。

每个视图都有一个在视图服务器（本地或远程）上运行的进程，该进程需要查询 VOB 服务器以获取更改。

在我们的 ClearCase 环境中，我们看到许多可能是加载的服务器和网络流量的组合滞后。

底线 - 应该很快（几秒钟），但不是即时的。如果需要更长的时间，您应该尝试查看可能会减慢进程的原因。

# scala - 从测试内部访问 ScalaTest 测试名称？

> ID：14831246
> 
> 赞同：12
> 
> 时间：2013-02-12T11:15:45.780
> 
> 标签：scala, integration-testing, scalatest

是否可以从 ScalaTest 测试中访问当前正在执行的测试的名称？（我该怎么做？）

**背景：**

我正在测试我的数据访问对象`OverQuotaException`是否最终会抛出一个用户，例如创建太多页面。这些测试需要很长时间才能运行。为了更开心，我想将进度打印到标准输出——因为有很多测试，我想在输出中包含测试名称，这样我就知道当前正在运行什么测试。

（我在这里没有找到任何看似相关的功能： [http](http://www.artima.com/docs-scalatest-2.0.M5/#org.scalatest.FreeSpec) ://www.artima.com/docs-scalatest-2.0.M5/#org.scalatest.FreeSpec ）

**例子：**

```
 "QuotaCharger can" - {
    "charge and decline quota consumers" - {

      "charge a per site IP number (guest user)" in {
         // ... Here, a guest user post very many comments until it's over quota.
         // This takes a little while, and there are many similar tests.

         // ---> Here <--- I'd like to access the string:
         //   "charge a per site IP number (guest user)",
         //  is that possible somehow?
      } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T16:08:39.540

这样做的预期方法是覆盖 withFixture 并捕获测试数据。在这个用例中，最好在 fixture.FreeSpec 中覆盖 withFixture，这样您就可以将测试数据传递到每个测试中，而不是使用 var。相关信息在这里：

[http://www.artima.com/docs-scalatest-2.0.M5/org/scalatest/FreeSpec.html#withFixtureNoArgTest](http://www.artima.com/docs-scalatest-2.0.M5/org/scalatest/FreeSpec.html#withFixtureNoArgTest)

当我今天早上看到你的问题时，我意识到 ScalaTest 应该具有这样做的特性，所以我只添加了一个。它将在下一个里程碑版本 2.0.M6 中，但同时您可以使用本地副本。这里是：

```
import org.scalatest._

/**
 * Trait that when mixed into a <code>fixture.Suite</code> passes the
 * <code>TestData</code> passed to <code>withFixture</code> as a fixture into each test.
 *
 * @author Bill Venners
 */
trait TestDataFixture { this: fixture.Suite =>

  /**
   * The type of the fixture, which is <code>TestData</code>.
   */
  type FixtureParam = TestData

  /**
   * Invoke the test function, passing to the the test function to itself, because
   * in addition to being the test function, it is the <code>TestData</code> for the test.
   *
   * <p>
   * To enable stacking of traits that define <code>withFixture(NoArgTest)</code>, this method does not
   * invoke the test function directly. Instead, it delegates responsibility for invoking the test function
   * to <code>withFixture(NoArgTest)</code>.
   * </p>
   *
   * @param test the <code>OneArgTest</code> to invoke, passing in the
   *   <code>TestData</code> fixture
   */
  def withFixture(test: OneArgTest) {
    withFixture(test.toNoArgTest(test))
  }
} 
```

你会像这样使用它：

```
import org.scalatest._

class MySpec extends fixture.FreeSpec with TestDataFixture {
  "this technique" - {
    "should work" in { td =>
      assert(td.name == "this technique should work")
     }
    "should be easy" in { td =>
      assert(td.name == "this technique should be easy")
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T13:59:30.513

创造你自己的特质，比方说`RichFreeSpec`。

```
trait RichFreeSpec extends Free {
  protected final class RichFreeSpecStringWrapper(name: scala.Predef.String) {
    def in(f: String => scala.Unit) {
      def f2 = f(name)
      new WordSpecStringWrapper(string).in(f2)
    }
  }  

  protected implicit def convertToRichFreeSpecStringWrapper(n: scala.Predef.String): = {
    new RichFreeSpecStringWrapper(n)
  }
} 
```

不仅仅是使用：

```
"sth" in { testName => 
   ...
 } 
```

当然，您可以更进一步，实现全名层次结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T15:40:24.697

这是一个解决方案。扩展这个类而不是 FreeSpec。许可证：[CC0](http://creativecommons.org/publicdomain/zero/1.0/)。

*编辑：但这不适用于并发测试。*

（这种方法和其他答案的区别在于 1）这里有一个`currentTestName`字段，在另一个答案中，测试名称被传递给测试主体，2）这个测试名称包括所有连接的测试分支名称 + 实际测试名称，而另一个答案的测试名称正是测试名称（没有测试分支名称）。）

[（哎呀，你需要使用`getOrElse ...`而不是我可爱的`getOrDie`。）]

```
/**
 * Adds a field `currentTestName` that you can use inside a FreeSpec test,
 * if you for example have many tests that take rather long, and you wonder
 * which one is currently running.
 */
trait RichFreeSpec extends FreeSpec {

  private var _currentTestName: Option[String] = None
  def currentTestName = _currentTestName getOrDie "DwE90RXP2"

  protected override def runTest(testName: String, args: org.scalatest.Args) {
    _currentTestName = Some(testName)
    super.runTest(testName, args)
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-14T17:08:55.240

如果意图是能够从任何地方访问测试名称，正如@kajmanus 在之前的评论中所建议的那样，ThreadLocal 非常适合。

您可以定义一个案例类来存储当前测试上下文所需的信息。例如，

```
case class TestContext(name: Option[String] = None)

object TestContext {
  val currentTest: ThreadLocal[TestContext] =
    ThreadLocal.withInitial(() => TestContext())
} 
```

然后定义一个你的各种规格将扩展的特征。例如，

```
trait BaseFunSpec
  extends AnyFunSpec
  ...
{
  override protected def withFixture(test: NoArgTest): Outcome = {
    try {
      TestContext.currentTest.set(TestContext(name = Some(test.name)))
      super.withFixture(test)
    } finally {
      TestContext.currentTest.remove()
    }
  }
} 
```

最后，您可以根据需要从当前线程中的任何位置访问您为当前线程设置的当前测试上下文（在此示例中纯粹是测试名称）。例如，

```
def cachedResults(bytes: Array[Byte], fileType: String): Unit = {
  TestContext.currentTest.get().name match {
    case Some(testname) => 
      import scala.util.Using
      val file = new File("target", s"${testname}.${fileType}")
      Using(new BufferedOutputStream(new FileOutputStream(file))) { os =>
        os.write(bytes)
      }
    case None => throw new IllegalStateException("Unknown test context")
  }
} 
```

假设您没有异步处理事物（即在另一个线程中），无论您是否并行运行测试，这都将起作用。

更简洁的用法是创建有目的的演员。例如，

```
case class TestContext(name: Option[String] = None)

object TestContext {
  val currentTest: ThreadLocal[TestContext] = ThreadLocal.withInitial(() => TestContext())

  class TestNamer {
    def currentName: String = currentTest.get().name match {
      case Some(testname) => testname
      case None => throw new IllegalStateException("No test context available")
    }
  }

  class TestContextWriter(testNamer: TestNamer = new TestNamer()) {
    def cachedBytes(bytes: Array[Byte], extension: String): Array[Byte] = {
      import java.io.{BufferedOutputStream, File, FileOutputStream}
      import scala.util.Using

      val file = new File("target", s"${testNamer.currentName}.${extension}")

      Using(new BufferedOutputStream(new FileOutputStream(file))) { outstream =>
        outstream.write(bytes)
      }

      bytes
    }
  }
} 
```

并根据需要注入：

```
trait BaseFunSpec {
  val testContextWriter = new TestContextWriter()

  def fetchRawResults(...): Array[Byte] = {
    ...
    testContextWriter.cachedBytes(bytes, "pdf")
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-01T10:47:36.040

您可以根据`BeforeAndAfterEachTestData`需要使用。

如果您需要在 beforeEach 或 afterEach 方法中访问测试用例名称。

```
class MyTestSuite with AnyFunSuiteLike with BeforeAndAfterEachTestData {

    override def beforeEach(testData: TestData): Unit = {
        testData.name // do whatever.
        super.beforeEach(testData)
    }
} 
```

如果您需要在测试用例本身中访问测试用例名称，那么您可以使用线程本地方法

```
private val currentTestCaseName = new ThreadLocal[String]

override def beforeEach(testData: TestData): Unit = {
    currentTestCaseName.set(testData.name)
    super.beforeEach(testData)
}

test("fancy test") {
    currentTestCaseName.get() // do whatever
} 
```

# python - PIL 选择坐标以制作图像

> ID：14831248
> 
> 赞同：1
> 
> 时间：2013-02-12T11:15:50.330
> 
> 标签：python, image, python-imaging-library

我想从我拥有的一组坐标中创建一个图像。所以我希望每个坐标都设置一个特定的大小和颜色，比如黑色和 2X2，然后将它放置在它所代表的特定像素处。我将如何处理这件事？该功能`putpixel`是否适用于我想做的事情？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:21:22.570

这样做`putpixel`会很不方便，但并非不可能。既然您说要制作多个像素的点，那么最好使用[`ImageDraw.rectangle()`](http://effbot.org/imagingbook/imagedraw.htm)or`ellipse()`代替。

例如：

```
import Image
import ImageDraw

img = Image.new("RGB", (400,400), "white")
draw = ImageDraw.Draw(img)

coords = [(100,70), (220, 310), (200,200)]
dotSize = 2

for (x,y) in coords:
    draw.rectangle([x,y,x+dotSize-1,y+dotSize-1], fill="black")

img.show() 
```

# unit-testing - 如果应该产生错误，我应该更改单元测试的日志级别吗？

> ID：14831249
> 
> 赞同：2
> 
> 时间：2013-02-12T11:15:51.147
> 
> 标签：unit-testing, logging

我有一个创建错误条件的单元测试。通常，被测类会将此错误写入日志（在这种情况下使用 log4j，但我认为这并不重要）。我可以临时更改日志级别，使用

```
Logger targetLogger = Logger.getLogger(ClassUnderTest.class);
Level oldLvl = targetLogger.getLevel();
targetLogger.setLevel(Level.FATAL);

theTestObject.doABadThing();

assertTrue(theTestObject.hadAnError());

targetLogger.setLevel(oldLvl); 
```

但这也意味着如果在测试期间发生不相关/意外的错误，我也不会在日志中看到该信息。

我应该在这里使用最佳实践或常见模式吗？如果可以的话，我不喜欢刺激日志级别，但我也不喜欢`ERROR`在测试输出中有一堆噪音，这可能会吓到未来的开发人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:18:57.667

如果您的日志记录层允许，最好对错误消息进行断言。您可以通过实现自己的记录器来实现它，该记录器只对消息进行断言（没有输出），或者通过使用内存缓冲区记录器然后检查日志缓冲区的内容。

在任何情况下，错误消息都不应出现在单元测试执行日志中。这将导致人们习惯于日志中的错误并掩盖其他错误。简而言之，您的选择是：

1.  最优选：捕捉线束中的消息并对其进行断言。
2.  还可以：提高级别并忽略该消息。
3.  不行：不要做任何事情，让日志消息到达 stderr/syslog。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:36:09.023

假设 XUnit 风格的单元测试（Junit、Pyunit 等），我处理这个问题的方式

```
@Test(expected = MyException)  
 foo_1() throws Exception
{
    theTestObject.doABadThing(); //MyException here
} 
```

进行日志记录的问题是需要有人去实际解析日志文件，这既费时又容易出错。但是，如果生成，则测试将通过上述测试，否则将`MyException`失败。这反过来又允许您自动使构建失败，而不是希望测试人员正确读取日志。

# wpf - 需要更改 wpf 中其他行的下拉项的下拉项

> ID：14831252
> 
> 赞同：0
> 
> 时间：2013-02-12T11:16:03.803
> 
> 标签：wpf

我有一个包含以下代码的列表视图

```
<ListView Name="configurationModeGrid" Width="400" Margin="236,440,58,143" BorderBrush="Black" FontFamily="Microsoft Sans Serif" FontSize="11">
        <ListView.View>
            <GridView>
                <GridView.Columns>
                    <GridViewColumn Width="110" Header="Network">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox Margin="-5,0,-5,0" Name="NetworkName" Height="20" Width="108" Text="{Binding NetworkName, Mode=OneWay}"  Background="#FFFFCAA6" HorizontalAlignment="Left" Style="{StaticResource DisableText}" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Width="110" Header="Trend Mode">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <ComboBox Name="TrendListItems" Margin="-5,0,-5,0" Width="108" ItemsSource="{Binding TrendModeList}" SelectedItem="{Binding CurrentMode}" HorizontalAlignment="Left" Style="{StaticResource ListBoxCombo}" SelectionChanged="TrendListItems_SelectionChanged" >

                                </ComboBox>
                            </DataTemplate>

                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="LAN" Width="50">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox Name="LanNumber"  Margin="-5,0,-5,0" Width="48" Text="{Binding LanNumber,Mode=OneWay}" IsEnabled="False" Background="#FFFFCAA6"  HorizontalAlignment="Left" Style="{StaticResource DisableText}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Label" Width="100">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox Name="LanLabel" Margin="-5,0,-5,0" Width="98" Text="{Binding LanLabel, Mode=OneWay}" Background="#FFFFCAA6" HorizontalAlignment="Left" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView.Columns>
            </GridView>
        </ListView.View>
    </ListView> 
```

1.  下拉列表将绑定以下选项

    i) 互联网络 II) 局域网 iii) 无

问题

1.  如果下拉列表中的 lan 项目是从列表视图的第一行中选择的，我想让其他其他下拉列表项目的项目必须变为无。

这可以使用 WPF UI 完成还是必须仅使用数据模型？

# c# - 使用 Parallel ForEach 进行本地初始化如何工作？

> ID：14831255
> 
> 赞同：15
> 
> 时间：2013-02-12T11:16:18.717
> 
> 标签：c#, task-parallel-library

我不确定 Parallel.ForEach 中本地初始化函数的使用，如 msdn 文章中所述：http: [//msdn.microsoft.com/en-us/library/dd997393.aspx](http://msdn.microsoft.com/en-us/library/dd997393.aspx)

```
Parallel.ForEach<int, long>(nums, // source collection
   () => 0, // method to initialize the local variable
   (j, loop, subtotal) => // method invoked by the loop on each iteration
   {
      subtotal += nums[j]; //modify local variable 
      return subtotal; // value to be passed to next iteration
   },... 
```

() => 0 如何初始化任何东西？变量的名称是什么，如何在循环逻辑中使用它？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-06-25T07:46:52.063

参考静态扩展方法的[如下重载：](https://msdn.microsoft.com/en-us/library/dd991486(v=vs.110).aspx)`Parallel.ForEach`

```
public static ParallelLoopResult ForEach<TSource, TLocal>(
    IEnumerable<TSource> source,
    Func<TLocal> localInit,
    Func<TSource, ParallelLoopState, TLocal, TLocal> taskBody,
    Action<TLocal> localFinally
) 
```

**在您的具体示例中**

该行：

```
() => 0, // method to initialize the local variable 
```

只是一个 lambda（匿名函数），它将返回常量整数零。这个 lambda 作为`localInit`参数传递给`Parallel.ForEach`- 因为 lambda 返回一个整数，所以它具有类型`Func<int>`并且类型`TLocal`可以`int`由编译器推断（类似地，`TSource`可以从作为参数传递的集合的类型推断`source`）

然后将返回值 (0) 作为第三个参数（名为`subtotal`）传递给`taskBody` `Func`. 这个 (0) 用作主体循环的初始种子：

```
(j, loop, subtotal) =>
{
    subtotal += nums[j]; //modify local variable (Bad idea, see comment)
    return subtotal;     // value to be passed to next iteration
} 
```

第二个 lambda（传递给`taskBody`）被调用 N 次，其中 N 是 TPL 分区器分配给此任务的项目数。

对第二个 lambda 的每个后续调用都`taskBody`将传递 的新值`subTotal`，从而有效地计算此任务的运行**部分**总计。添加分配给此任务的所有项目后，`localFinally`将再次调用第三个也是最后一个函数参数，并传递返回的最终值`subtotal`from `taskBody`。因为几个这样的任务将并行运行，所以还需要最后一步来将所有部分总计加到最终的“总”总计中。但是，由于多个并发任务（在不同线程上）可能会争用该`grandTotal`变量，因此以线程安全的方式对其进行更改非常重要。

（我更改了 MSDN 变量的名称以使其更清晰）

```
long grandTotal = 0;
Parallel.ForEach(nums,            // source collection
  () => 0,                        // method to initialize the local variable
  (j, loop, subtotal) =>          // method invoked by the loop on each iteration
     subtotal + nums[j],          // value to be passed to next iteration subtotal
  // The final value of subtotal is passed to the localFinally function parameter
  (subtotal) => Interlocked.Add(ref grandTotal, subtotal) 
```

*在 MS 示例中，修改任务主体内的参数小计是一种不好的做法，并且没有必要。即代码`subtotal += nums[j]; return subtotal;`会更好，因为`return subtotal + nums[j];`它可以缩写为 lambda 速记投影`(j, loop, subtotal) => subtotal + nums[j]`*

**一般来说**

[Parallel.For / Parallel.ForEach](https://msdn.microsoft.com/en-us/library/dd991486(v=vs.110).aspx)的`localInit / body / localFinally`重载允许*每个任务*初始化和清理代码在任务执行之前和之后（分别）运行一次。*`taskBody`*

 *（注意传递给并行的 For range / Enumerable `For`/`Foreach`将被划分为批次`IEnumerable<>`，每个批次都将分配一个任务）

在**每个 Task**中，`localInit`都会被调用一次，`body`代码会被重复调用一次，每项批量调用一次（`0..N`次），`localFinally`完成后调用一次。

此外，您可以通过来自的通用返回值传递任务期间所需的任何状态（即到`taskBody`和委托） - 我在下面调用了这个变量。`localFinally``TLocal``localInit Func``taskLocals`

**“localInit”的常见用法：**

*   创建和初始化循环体所需的昂贵资源，例如数据库连接或 Web 服务连接。
*   保留任务局部变量以保存（无竞争的）运行总计或集合
*   `localInit`如果您需要从`taskBody`and返回多个对象`localFinally`，您可以使用强类型类 a ，`Tuple<,,>`或者，如果您只使用 lambdas `localInit / taskBody / localFinally`，您也可以通过匿名类传递数据。请注意，如果您使用 return from`localInit`在多个任务之间共享一个引用类型，您将需要考虑此对象的线程安全性 - 不可变性更可取。

**“localFinally”动作的常见用法：**

*   释放资源，例如`IDisposables`在`taskLocals`（例如数据库连接、文件句柄、Web 服务客户端等）中使用的资源
*   将每个任务完成的工作聚合/组合/减少回共享变量。这些共享变量将被争用，因此线程安全是一个问题：
    *   例如`Interlocked.Increment`对于像整数这样的原始类型
    *   `lock`写操作需要或类似的
    *   利用[并发集合](https://msdn.microsoft.com/en-us/library/system.collections.concurrent(v=vs.110).aspx)来节省时间和精力。

这`taskBody`是`tight`循环操作的一部分 - 您需要优化它以提高性能。

这一切都最好用一个评论的例子来总结：

```
public void MyParallelizedMethod()
{
    // Shared variable. Not thread safe
    var itemCount = 0; 

    Parallel.For(myEnumerable, 
    // localInit - called once per Task.
    () => 
    {
       // Local `task` variables have no contention 
       // since each Task can never run by multiple threads concurrently
       var sqlConnection = new SqlConnection("connstring...");
       sqlConnection.Open();

       // This is the `task local` state we wish to carry for the duration of the task
       return new 
       { 
          Conn = sqlConnection,
          RunningTotal = 0
       }
    },
    // Task Body. Invoked once per item in the batch assigned to this task
    (item, loopState, taskLocals) =>
    {
      // ... Do some fancy Sql work here on our task's independent connection
      using(var command = taskLocals.Conn.CreateCommand())
      using(var reader = command.ExecuteReader(...))
      {
        if (reader.Read())
        {
           // No contention for `taskLocal`
           taskLocals.RunningTotal += Convert.ToInt32(reader["countOfItems"]);
        }
      }
      // The same type of our `taskLocal` param must be returned from the body
      return taskLocals;
    },
    // LocalFinally called once per Task after body completes
    // Also takes the taskLocal
    (taskLocals) =>
    {
       // Any cleanup work on our Task Locals (as you would do in a `finally` scope)
       if (taskLocals.Conn != null)
         taskLocals.Conn.Dispose();

       // Do any reduce / aggregate / synchronisation work.
       // NB : There is contention here!
       Interlocked.Add(ref itemCount, taskLocals.RunningTotal);
    } 
```

还有更多例子：

[每个任务的非竞争字典示例](https://stackoverflow.com/a/31036093/314291)

[每个任务的数据库连接示例](https://stackoverflow.com/questions/27774265/c-sharp-multiple-parallel-inserts-in-database)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-12T12:15:18.063

作为[@Honza Brestan](https://stackoverflow.com/a/14831399/424963)答案的扩展。Parallel foreach 将工作拆分为任务的方式也很重要，它将多个循环迭代分组到一个任务中，因此实际上`localInit()`每 n 次循环迭代调用一次，并且可以同时启动多个组。

`localInit`a and的要点`localFinally`是确保并行 foreach 循环可以将每次迭代的结果组合成单个结果，而无需在 中指定锁定语句，`body`为此，您必须为要创建的值提供初始化 ( `localInit`)然后每次`body`迭代都可以处理本地值，然后您提供一种方法以`localFinally`线程安全的方式组合来自每个组 () 的值。

如果您不需要 localInit 来同步任务，则可以使用 lambda 方法照常引用周围上下文中的值，而不会出现任何问题。有关使用 localInit/Finally 的更深入教程，请参阅[C# 中的线程（Parallel.For 和 Parallel.ForEach）](http://www.albahari.com/threading/part5.aspx#_Parallel.For_and_Parallel.ForEach)，并向下滚动到**使用本地值优化**，Joseph Albahari 确实是我所有线程的 goto 源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T11:24:24.923

您可以在 MSDN 上获得**[正确`Parallel.ForEach`](http://msdn.microsoft.com/en-us/library/dd783634.aspx)**重载的提示。

> localInit 委托为参与循环执行的每个线程调用一次，并返回每个任务的初始本地状态。这些初始状态被传递给每个任务的第一个主体调用。然后，每个后续的主体调用都会返回一个可能已修改的状态值，该值将传递给下一个主体调用。

在您的示例`() => 0`中，委托只是返回`0`，因此该值用于**每个任务**的第一次迭代。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-06T10:58:38.010

从我这边来看一个更简单的例子

```
class Program
{
    class Person
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public int Age { get; set; }
    }

    static List<Person> GetPerson() => new List<Person>()
    {
        new Person() { Id = 0, Name = "Artur", Age = 26 },
        new Person() { Id = 1, Name = "Edward", Age = 30 },
        new Person() { Id = 2, Name = "Krzysiek", Age = 67 },
        new Person() { Id = 3, Name = "Piotr", Age = 23 },
        new Person() { Id = 4, Name = "Adam", Age = 11 },
    };

    static void Main(string[] args)
    {
        List<Person> persons = GetPerson();
        int ageTotal = 0;

        Parallel.ForEach
        (
            persons,
            () => 0,
            (person, loopState, subtotal) => subtotal + person.Age,
            (subtotal) => Interlocked.Add(ref ageTotal, subtotal)
        );

        Console.WriteLine($"Age total: {ageTotal}");
        Console.ReadKey();
    }
} 
```*

# package - 将 moment.js 和 account.js 等包添加到流星项目

> ID：14831259
> 
> 赞同：2
> 
> 时间：2013-02-12T11:16:23.250
> 
> 标签：package, meteor, momentjs

如何将这些 JS 包添加到流星项目中？我是否只是将 JS 文件放在公用文件夹中，以便客户端和服务器可以访问它们？或者我需要遵循一些具体的步骤吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T12:20:37.440

这些独立的库可以直接放在`/lib`你的项目下的目录中。

要在客户端和服务器上使用，请将它们放入`project/lib`文件夹中。

或者，如果您只想在客户端使用它们，请像往常一样将它们放在`project/client/lib`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T12:40:35.403

简而言之，这取决于。

我建议您查看[http://atmosphere.meteor.com](http://atmosphere.meteor.com)以获取软件包列表。如果你正在寻找的东西在那里，安装陨石`npm install -g meteorite`（[https://github.com/oortcloud/meteorite](https://github.com/oortcloud/meteorite)）

一旦你安装了 metorite，你可以很容易地使用安装这些社区包`mrt add packagename`

大多数软件包都在[http://atmosphere.meteor.com](http://atmosphere.meteor.com)上。

但是如果由于某种原因您想要的 JS 包不在大气中，取决于包，如果它是 UI 包（例如 datepicker 等），请将其放在`/client/lib`文件夹中以避免流星崩溃（只能由客户端访问）。

如果它是一种模块抽象器（例如骨干 - 骨干已经包含在流星中，顺便说一句：添加使用`meteor add backbone`），您可以将它放在`/lib`包的目录中，服务器和客户端都会自动引用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T12:20:18.613

您必须通过控制台添加软件包。

例如，输入“meteor add accounts-password”。

看[这里](http://docs.meteor.com/#packages)

[也许你应该在这里](http://www.eventedmind.com/)观看其中一些视频

了解如何添加流星包。

# mysql - SELECT COUNT(*) with GROUP BY 对于大表来说很慢

> ID：14831265
> 
> 赞同：1
> 
> 时间：2013-02-12T11:16:37.313
> 
> 标签：mysql

我有一个包含大约 1 亿行的表，由三列（全部为 INT）组成：

```
id | c_id | l_id 
```

即使我使用索引，即使是基本的

```
select count(*), c_id 
from   table 
group by c_id; 
```

需要 16 秒 (MYISAM) 到 25 秒 (InnoDB) 才能完成。

有没有办法在不跟踪单独表中的计数的情况下加快这个过程（例如通过使用触发器）？

/edit：所有列都有索引

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:33:49.540

请参阅执行计划以了解执行相同查询[SqlFiddle](http://sqlfiddle.com/#!2/821fc/3)的可能方法，

`SELECT COUNT(id)``c_id`如果没有在我提供的测试集上编入索引，将会更快。

否则您应该使用`COUNT(*)`，因为查询中可能不会使用索引优化。

**它还取决于 DB 中的行数和 ENGINE 类型**，因为 mysql 也会根据这一事实决定什么更好。

**在执行查询之前，您应该始终**`EXPLAIN`通过在选择之前键入来查看查询的执行计划。

我不得不说，在大多数情况下，在大数据集上，`COUNT(*)`应该`COUNT(id)`产生相同的执行计划。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:19:30.690

这不是导致`Count(*)`性能问题的原因，而是对 1 亿行进行分组。

您应该在 c_id 列上添加索引

# php - 比较表行，大数据量

> ID：14831266
> 
> 赞同：2
> 
> 时间：2013-02-12T11:16:45.553
> 
> 标签：php, mysql, mongodb

我有一个非常有趣的任务。但我不知道如何一言以蔽之，以便搜索相关主题。即使这个主题标题也可能无法反映我的需要。所以，如果有人有更好的标题 - 欢迎。

我会试着解释我的问题。

我在 MySQL 数据库表中有大约 100,000 行。我需要“比较”表中的条目。

“比较”并不意味着**相等**。有计算比较级别的算法。我有每个表格列的权重系数。意味着如果 entry#1 的 column1 等于 entry#2 的 column2，那么我给这对给出 5 个点。每列依此类推。

最直接的方法是为每对条目应用计算规则。我为什么害怕这个？100,000 个条目意味着大约 50 亿次“比较”操作。当然，我可以*按需*计算并将结果存储在缓存中的某处。但我相信最明显的方法并不是最有效的。

所以，我的第一个问题是：**除了蛮力，还有其他更好的方法来实现我的目标吗？**

我的第二个问题与**更适合计算的工具**有关。

1.  应用程序语言是 PHP。因此，我需要将整个表加载到内存中并迭代数据。
2.  在 MySQL 中创建存储过程。
3.  使用 MongoDB 的聚合框架或 MapReduce。

我最不喜欢第一种方式。最重要的是 - 最后一个。

我正在寻找在这种情况下有经验的人的任何建议或建议。

因为，我不知道如何向谷歌寻求帮助，任何链接将不胜感激。

**更新：**

计算规则比我描述的要复杂一些......

表有一组相关的列，这些列将作为组一次使用（不是一个接一个）。让我们假设：

`table`有字段，比如说，`tag_1`, `tag_2`, .., `tag_n`. `row_1`和`row_2`- 中的条目`table`。

规则（伪代码）：

```
if(row_1.tag_1==row_2.tag_1)
{
    // gives 10 points
}
elseif(row_1.tag_1 is in row_2.tags && row_1.tag_1!=row_2.tag_1)
{
    // gives 5 points
}
....
// and so on 
```

基本上，我需要检查两个数组的交集。如果它不是空的 - 给出分数。如果两行中标签的索引匹配，则给出附加点。

我想知道，如何使用存储过程语言来实现这一点？因为使用任何编程语言都可以很容易地完成它。

如果存储过程可以做到这一点，那么这是我的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:47:07.383

如果您有一个静态表，那么只要您将结果存储在某个地方（大概回到数据库中），您选择的就不会有所不同。

如果您的数据正在发生变化，那么您需要将每个新行与所有行进行比较，这本质上是一次全表扫描。这可能最好在数据库中完成。

如果数据适合内存（并且 500,000 行应该适合内存），那么 (2) 在同等硬件上可能会比 (3) 快。“等效硬件”是一个非常重要的考虑因素。

在大多数情况下，我会选择（2）。听起来查询类似于：

```
select t.id, t2.id,
       ((case when t1.col1 = t2.col1 then 5 else 0 end) +
        (case when t2.col2 = t2.col2 then 7 else 0 end) +
        . . .
       )
from t cross join t2 
```

如果您对 map-reduce 更满意，那么您可能会发现在那里编写代码更容易。我知道这两种语言，并且更喜欢 SQL 来完成类似的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:45:05.753

你不能做这样的事情：

```
UPDATE table SET points = points+5 WHERE column1 = column2 
```

如果您也检查特定值，则可以尝试以下操作：

```
UPDATE table SET points = points+5 WHERE column1 = 'somevalue' AND column2 = 'somevalue' 
```

# testing - 自动化测试中手工代码和录制脚本的区别

> ID：14831274
> 
> 赞同：1
> 
> 时间：2013-02-12T11:17:23.820
> 
> 标签：testing, automation, coded-ui-tests

请让我知道自动化测试工具（如编码 ui 或任何其他工具）中手写代码和录制脚本之间的区别。问候， 拉吉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T11:31:39.833

通过“手写”，我假设您的意思是手动编码......

我可以看到几个原因。编码经验非常棒。如果您编写自己的测试代码，这将是一项值得的投资，因为您可以学到很多关于您正在使用的测试框架（CodedUI、Selenium 等）以及您正在使用的语言（Java、C#）的知识。使用内置的框架方法手动编写这些测试代码将为您提供良好的服务，并为您提供比自动回放工具更多的知识。

自动播放工具会产生可怕的代码。丑陋的代码、糟糕的命名、没有遵循最佳实践以及不可靠的定位方法。

播放工具将简单地使用最简单的方法来查找元素。这并不总是最好的。一个典型的例子是 XPath。

最值得注意的是，XPath 是一个强大的工具，它可以为您提供所需的任何元素（或者至少，我从未发现*不能*使用 XPath 的情况），但是回放工具会产生可怕的 XPath 查询，纯粹基于位置。 .让我们举个例子。

您有一个包含 100 个提要项的页面。您希望在执行特定操作后验证此页面上显示的提要项目，但它不仅显示，而且是**第**一个。您不能使用 ID 等，因为标记制作不当，因此您必须使用 XPath。

回放工具可能会生成一个非常奇怪的 XPath，例如：`//div[1]/span[2]/table[1]/tbody[1]/tr[10]/[td[2]/a[text()='Test']`.

看起来很奇怪，对吧？

这将工作几次，但如果应用程序将另一个`tr`元素推到表格顶部会发生什么？现在，`tr[10]` **不会**是你想要的元素，它会是`tr[11]`.

通过手动编码，您可以解决这个问题，您可以输入逻辑来解决这个问题。播放工具不会。

我**强烈**建议您自己编写这些测试。你**不需要**几年的经验来做这件事，你**不需要**任何编程学位。你需要*时间*。

回放工具的功能也将受到限制……您想在测试失败时截屏吗？我非常怀疑播放工具会做到这一点，您需要自己输入逻辑。然而，*这并不难做到自己*。

也可能有商业原因 - 回放工具可以更快地将手动测试转换为自动化测试，但它们并不可靠 - 您需要有时间致力于使其可靠和快速。最好把时间花在自己编写代码上。

# file - 在 ModelSim 中获取内存转储（定期）

> ID：14831275
> 
> 赞同：0
> 
> 时间：2013-02-12T11:17:25.500
> 
> 标签：file, memory, dump, modelsim

如何定期在 ModelSim 中获取内存转储？

我知道如何导出内存数据。有没有办法在 .do 文件中写入命令以每 1000 ns 或每 x 个周期导出一次内存数据？

**更新：**

感谢您的回答。我现在这样做的方式：

```
mkdir -p mlog
set counter 0
set limit 30

while { true } {
   run 100 us
  incr counter +1
  mem save -o ./mlog/spram1_${counter}.mem -f mti -data binary -addr hex /ram_tb/spram1/mem
  mem save -o ./mlog/spram2_${counter}.mem -f mti -data binary -addr hex /ram_tb/spram2/mem
  /path/to/third/mem
} 
```

这是在您之前使用 run -all 并且您不知道模拟何时停止的情况下。VHDL 测试用例当然应该有类似的东西

```
ASSERT false
    REPORT "### End of Simulation!"
    SEVERITY failure; 
```

结束模拟（更好的方法见下面的答案，但这有效）

如果您知道模拟将运行多长时间，您也可以使用这种方式：

```
 mkdir -p mlog
  set counter 0
  set limit 10

  while { $counter < $limit } {
    run 1 ns
    incr counter +1
    mem save -o ./mlog/filename1_${counter}.mem -f mti -data binary -addr hex /path/to/another/mem
    mem save -o ./mlog/filename2_${counter}.mem -f mti -data symbolic -addr hex -wordsperline 1 /path/to/mem
    ## mem save -o ./mlog/anotherfile ...
  } 
```

可以替换“运行 10 ns”

或者，您可以使用指示模拟结束的信号

```
 signal end_of_sim   : std_logic := '0';
  ...
  end_of_sim <= '1' 
```

在do-file中：

```
 when -label end_of_simulation {/end_of_sim == '1'} {
    echo "End of simulation"; 
    stop ;
    #quit -f
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:26:11.927

对于您的问题，这不是一个绝妙的解决方案，但它可以帮助您一点。

在 TCL while 循环中，您可以执行以下两个命令：

```
while ... {
    run 100 ns;
    mem save -outfile $filename...
} 
```

请注意，Modelsim DO 文件是 TCL 文件。

更好的解决方案是在“onbreak”函数中添加内存转储。

```
onbreak {mem save ...} 
```

每当您中断或停止模拟时，都会保存 RAM 的内容。然后你仍然需要一个触发器来打破模拟。有人吗？

# c# - 服务总线 QueueClient.Receive 是如何工作的？

> ID：14831281
> 
> 赞同：3
> 
> 时间：2013-02-12T11:17:42.147
> 
> 标签：c#, azure, azure-web-roles, azure-worker-roles, servicebus

我正在使用服务总线队列在 Web 角色和辅助角色之间进行通信。我的服务总线上有两个队列。我正在将来自 Web 角色的消息放入队列，并且辅助角色处理该消息并将另一条消息放回另一个队列，Web 角色检索并发送给客户端。Web 角色和工作角色线程都在持续运行

我想知道执行控制何时位于 QueueClient.Receive，它是等到收到消息还是队列上没有消息然后移动到下一行？因为在队列上没有消息的情况下，我在 QueueClient.Receive 放置了一个断点来检查接下来会发生什么，但是控件没有转到下一行它只是消失了，所以我认为它可能只是在等待。

但是在下面我的网络角色中，我通过服务总线队列向工作角色发送一条消息，并期待立即从工作角色再次响应但有时工作角色需要一些处理时间并且网络角色没有得到它并且网络角色线程进入睡眠状态。

我是 Windows azure 的初学者，所以对整个问题有点困惑。谁能帮帮我？

我的工人角色：

```
// Receive the message from Web Role
BrokeredMessage receivedBroadcastMessage = null;
receivedBroadcastMessage = WebRoleClient.Receive();

if (receivedBroadcastMessage != null)
{
    // Process the message

    receivedBroadcastMessage.Complete();
}

BrokeredMessage webRoleMessage = new BrokeredMessage(processedMessage);
WorkerRoleClient.Send(webRoleMessage); 
```

我的网络角色：

```
// send the request to worker role
BrokeredMessage webRoleMessage = new BrokeredMessage(details);
WebRoleClient.Send(webRoleMessage);

// receive the queue from worker role
BrokeredMessage workerRoleMessage = null;
workerRoleMessage = WorkerRoleClient.Receive();

if (workerRoleMessage != null)
{ 
    //process message

    workerRoleMessage.Complete();
}
else
{
    // sleep thread
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:52:24.977

使用默认方法，对 QueueClient.Receive 的调用将立即返回。如果在特定时间队列中没有消息，您将获得 NULL 值，如果有消息，您将获得 BrokeredMessage 的实例。

QueueClient.Receive 有几个覆盖，您可以在其中指定超时。在这种情况下，如果没有任何消息，该方法将等到超时到期从调用中返回。这有助于避免在收到消息之前必须重新连接多次。

对于您提到的情况，您应该尝试使用 API 的[QueueClient.Receive(timespan)](http://msdn.microsoft.com/en-us/library/hh322662.aspx)版本，因此线程将等待更长的时间来接收消息。另一种选择是将您的消息接收逻辑放在一个循环中，并中断直到您收到一条消息。

# iphone - JSON 值失败

> ID：14831285
> 
> 赞同：0
> 
> 时间：2013-02-12T11:17:52.677
> 
> 标签：iphone, json

我正在从服务器获取数据到我的 iPhone 应用程序中。

但它显示了异常

> -JSONValue 失败。错误跟踪是：（
> “Error Domain=org.brautaset.JSON.ErrorDomain Code=4 \"有效片段，但不是 JSON\" UserInfo=0x6e9b460 {NSLocalizedDescription=有效片段，但不是 JSON}"

任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:04:28.060

检查您的数据应该是这种格式使用[http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)来检查 json 格式

# parsing - backbone.js 将文本文件加载到集合中

> ID：14831288
> 
> 赞同：1
> 
> 时间：2013-02-12T11:18:07.653
> 
> 标签：parsing, backbone.js, text-files, loading

这是我第一次使用开发框架并坚持第一步。

我正在将 Flex 应用程序转换为 Javascript 应用程序并使用主干作为框架。

我必须加载一个名称值格式的文本文件。

```
<!doctype html>
<html>
<head>
<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js'></script>
<script src='http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js'></script>
<script src='http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.10/backbone-min.js'></script>
<script>
var ResourceBundleCollection = Backbone.Collection.extend({
url:'ResourceBundle.txt',
});
var resourceBundleCollection = new ResourceBundleCollection();
resourceBundleCollection.fetch();
</script>
</head>
<body>
</body>
</html> 
```

ResourceBundle.txt 包含以下格式的内容

```
location_icon=../../abc/test.png
right_nav_arrow_image=assets/images/arrow.png
right_nav_arrow_image_visible=true 
```

它抛出以下错误，格式不正确

我可以使用 JQuery 轻松加载文本文件并解析它

```
$.ajax({
type : "GET",
url : "ResourceBundle.txt",
datatype : "script",
success : resourceXMLLoaded
}); 
```

并使用以下代码解析它

```
var lines = txt.split("\n");
for(var i=0;i<lines.length;i++) {
if(lines[i].length > 5) {
var _arr = lines[i].split("=");
resourceBundleObj[$.trim(_arr[0])] = $.trim(_arr[1]);
}
} 
```

请建议如何在backbone.js中获得相同的结果

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T13:05:09.050

如果您必须使用纯文本来支持这一点，您可以覆盖`Backbone.Collection.parse`以实现您所需要的。

除此之外，您可能还需要创建一个`ResourceBundleModel`来托管`ResourceBundleCollection`.

你可以在这里看到一个演示：http: [//jsfiddle.net/dashk/66nkF/](http://jsfiddle.net/dashk/66nkF/)

模型和集合的代码在这里：

```
// Define a Backbone.Model that host each ResourceBundle
var ResourceBundleModel = Backbone.Model.extend({
    defaults: function() {
        return {
            name: null,
            value: null
        };
    }
});

// Define a collection of ResourceBundleModels.
var ResourceBundleCollection = Backbone.Collection.extend({
    // Each collection should know what Model it works with, though
    // not mandated, I guess this is best practice.
    model: ResourceBundleModel,

    // Replace this with your URL - This is just so we can demo
    // this in JSFiddle.
    url: '/echo/html/',

    parse: function(resp) {
        // Once AJAX is completed, Backbone will call this function
        // as a part of 'reset' to get a list of models based on
        // XHR response.
        var data = [];
        var lines = resp.split("\n");

        // I am just reusing your parsing logic here. :)
        for (var i=0; i<lines.length; i++) {
            if (lines[i].length > 5) {
                var _arr = lines[i].split("=");

                // Instead of putting this into collection directly,
                // we will create new ResourceBundleModel to contain
                // the data.
                data.push(new ResourceBundleModel({
                    name: $.trim(_arr[0]),
                    value: $.trim(_arr[1])
                }));
            }    
        }

        // Now, you've an array of ResourceBundleModel. This set of
        // data will be used to construct ResourceBundleCollection.
        return data;
    },

    // Override .sync so we can demo the feature on JSFiddle
    sync: function(method, model, options) {
        // When you do a .fetch, method is 'read'
        if (method === 'read') {
            var me = this;

            // Make an XHR request to get data
            // Replace this code with your own code
            Backbone.ajax({
                url: this.url,
                method: 'POST',
                data: {
                    // Feed mock data into JSFiddle's mock XHR response
                    html: $('#mockData').text()
                },
                success: function(resp) {
                    options.success(me, resp, options);
                },
                error: function() {
                    if (options.error) {
                        options.error();
                    }
                }
            });
        }
        else {
            // Call the default sync method for other sync method
            Backbone.Collection.prototype.sync.apply(this, arguments);
        }
    }
}); 
```

Backbone 旨在通过原生 JSON 使用 RESTful API。然而，它是一个足够灵活的库，可以满足您的需求，并提供足够的定制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T11:36:53.847

默认情况下，Backbone 中的集合只接受 JSON 格式的集合。因此，您需要将输入转换为 JSON 格式：

```
[{"name": "name", "value": "value},
 {"name": "name", "value": "value}, ...
] 
```

当然你可以覆盖默认行为： [覆盖主干的解析函数](https://stackoverflow.com/questions/11938500/overriding-backbones-parse-function)

# javascript - jQuery keyup 仅影响 textarea 内容的键

> ID：14831289
> 
> 赞同：2
> 
> 时间：2013-02-12T11:18:09.463
> 
> 标签：javascript, jquery

如何使用 jQuery 检测 textarea 的值是否发生变化？我目前正在使用 keyup() 但这当然会触发每个击键，如果它是按下的箭头键或任何其他对文本区域的值没有影响的键，我不希望我的代码运行。

看一看：

```
$('textarea').keyup(function() {
     if (content was changed)
         // Do something
}); 
```

我希望你明白。我怎样才能以最好的方式做到这一点？我不想将当前值与旧值进行比较以检查更改，我希望这不是唯一的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T11:20:45.147

无论如何，最简单的方法是将旧值存储到数据中并在每个`keyup`. 该解决方案非常简短，并且在任何情况下都可以使用。无需重新发明轮子。

```
$("textarea").data("oldValue", function() {
    return this.value;
}).keyup(function() {
    var $this = $(this);
    if (this.value !== $this.data("oldValue")) {
        // Do something

        $this.data("oldValue", this.value);
    }
}); 
```

**演示：http:** [//jsfiddle.net/vvbSj/](http://jsfiddle.net/vvbSj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:23:28.747

```
$('textarea').blur(function() {
  //This will be invoked when the focus is removed
});

$('textarea').change(function() {
  //Same as the blur
}); 
```

这是你想要的吗

# django - 具有字符主键的 Django 1.5 AbstractBaseUser 不可 JSON 序列化

> ID：14831292
> 
> 赞同：0
> 
> 时间：2013-02-12T11:18:32.573
> 
> 标签：django, json, django-1.5

我有以下自定义用户模型尝试使用 Django 1.5 AbstractBaseUser：

```
class Merchant(AbstractBaseUser): 
    email = models.EmailField()
    company_name = models.CharField(max_length=256)
    website = models.URLField()
    description = models.TextField(blank=True)
    api_key = models.CharField(blank=True, max_length=256, primary_key=True)   

    USERNAME_FIELD = 'email' 
    REQUIRED_FIELDS = ['email','website']

   class Meta:
        verbose_name = _('Merchant')
        verbose_name_plural = _('Merchants')

   def __unicode__(self):
        return self.company_name 
```

该模型运行良好，数据库符合预期，但问题是当我尝试转储数据为我的测试创建夹具时。

```
python manage.py dumpdata --natural --exclude=contenttypes --exclude=auth.permission --indent=4 > fixtures/initial_data.json 
```

然后我得到错误：

```
CommandError: Unable to serialize database: <Merchant: Test Shop> is not JSON serializable 
```

你有什么想法可能是什么原因。它可能是 charfield 主键还是带有 abstractbaseuser 模型的东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:36:19.730

花了一些时间后，我发现了问题。实际上，它不是在 Merchant 模型中，而是在具有 Merchant 外键的 Product 中：

```
class Product(models.Model):
    name = models.CharField(max_length=200)
    #merchant = models.ForeignKey(Merchant, to_field='api_key')
    merchant = models.ForeignKey(Merchant)
    url = models.URLField(max_length = 2000)  
    description = models.TextField(blank=True) 
    client_product_id = models.CharField(max_length='100')

    objects = ProductManager() 
    class Meta:
        verbose_name = 'Product'
        verbose_name_plural = 'Products' 
        unique_together = ('merchant', 'client_product_id',) 

    def __unicode__(self):
        return self.name 

    def natural_key(self):
        return (self.merchant, self.client_product_id) 
```

模型中的 natural_key 方法返回 self.merchant 而不是 self.merchant_id，因此它试图序列化整个商家对象以创建自然键。将 natural_key 方法切换到以下方法后，问题得到了修复：

```
def natural_key(self):
    return (self.merchant_id, self.client_product_id) 
```

# jsp - DNN 7.0：我可以将 Web 应用程序中的 .jsp 页面迁移到 DNN 中吗？

> ID：14831294
> 
> 赞同：0
> 
> 时间：2013-02-12T11:18:38.297
> 
> 标签：jsp, dotnetnuke

我想将包含 .jsp 页面的 Web 应用程序的页面迁移到 DNN 7.0。我该怎么做？我尝试在 Google 中搜索，但所有搜索结果都显示从 .net 迁移到 .netnuke。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:27:35.217

如果 JSP 页面只是内容，您可以手动将所有内容拉入带有 HTML 模块的 DotNetNuke 页面。

如果 JSP 页面是功能、表单等，那么您可能需要使用 C# 或 VB.Net 将它们转换为基于 .NET 的模块。

最后一个选项，可能是最容易开始，但不是长期解决方案，是使用 IFrame 模块将这些 JSP 页面嵌入到 DNN 站点中。

# c++ - c++ vs2010增加栈大小

> ID：14831295
> 
> 赞同：5
> 
> 时间：2013-02-12T11:18:40.600
> 
> 标签：c++, visual-studio-2010

我正在使用 vs2010 c++ 来处理图像。

我的图像是 1920 x 1200 的数组。

我什至不能声明：

```
unsigned short frame [1920*1200]; 
```

由于堆栈溢出。

如何增加堆栈大小？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T11:21:47.987

在 Visual Studio 中，您可以通过这种方式增加堆栈大小

**属性 -> 配置属性 -> 链接器 -> 系统 -> 堆栈保留大小**

# java - 如何确定哪些用户操作触发了 JDialog 调整大小事件？

> ID：14831298
> 
> 赞同：0
> 
> 时间：2013-02-12T11:18:54.300
> 
> 标签：java, resize, awt, event-listener

我在我的 中添加了一个`ComponentAdapter`，`ComponentListener`我`JDialog`想实现`componentResized(ComponentEvent e)`. 目标是保持`JDialog`的比率，并且为了计算如何根据用户的操作调整它的大小，我想知道用户是否拖动了窗口的**侧边缘**、窗口的**顶部/底部边缘**或其中之一窗户的**角落**。

有没有办法从 中检索该信息`ComponentEvent`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T15:44:24.853

我不知道我原来的问题的答案（有没有办法告诉来源`ComponentEvent`），所以我只存储以前的尺寸，并计算新的尺寸。如果它对任何人有帮助，这就是我正在使用的代码。请享用：

```
public class ResizableImageView extends JDialog {
    BufferedImage img;
    Dimension OriginalImgSize;
    double imageRatio;
    JPanel jp;
    JLabel label;
    Dimension previousSize;

    public ResizableImageView(BufferedImage img) {

        ...

        setResizable(true);
        this.img = img;
        OriginalImgSize = new Dimension(img.getWidth(), img.getHeight());
        imageRatio = (double)img.getWidth() / (double)img.getHeight();

        label = new JLabel(new ImageIcon(img));
        label.setMinimumSize(OriginalImgSize);
        jp = new JPanel();
        jp.setBorder(new EmptyBorder(0, 0, 0, 0));
        jp.add(label);
        setContentPane(jp);
        pack();
        previousSize = getSize();

        addComponentListener(new ComponentAdapter() {
            private boolean allreadyResized = true;

            private void resize(Image img) {
                ImageIcon ico = new ImageIcon(img);
                label = new JLabel(ico);
                label.setBorder(new EmptyBorder(0, 0, 0, 0));
                label.setPreferredSize(new Dimension(img.getWidth(null), img.getHeight(null)));
                jp = new JPanel();
                jp.setBorder(new EmptyBorder(0, 0, 0, 0));
                jp.add(label);
                setContentPane(jp);
                allreadyResized = true;
                pack();
                previousSize = getSize();
            }

            @Override
            public void componentResized(ComponentEvent e) {
                if (allreadyResized) {
                    allreadyResized  = false;
                    return;
                }
                double xChange = (double) Math.abs(getSize().width - previousSize.width);
                double yChange = (double) Math.abs(getSize().height - previousSize.height);
                if (xChange == 0 && yChange == 0) return; 
                int height = getSize().height - getInsets().bottom - getInsets().top;
                int width = getSize().width - getInsets().left - getInsets().right;

                if (height > OriginalImgSize.height 
                        || width > OriginalImgSize.width) {
                    resize(img);
                    return;
                }
                if (yChange == 0 || xChange/yChange > imageRatio) {
                    resize(img.getScaledInstance(width, -1, Image.SCALE_SMOOTH));
                    return;
                } else {
                    resize(img.getScaledInstance(-1, height, Image.SCALE_SMOOTH));
                    return;
                }
            }
        });
    }
} 
```

# for-loop - 循环不一致的 IDL

> ID：14831301
> 
> 赞同：0
> 
> 时间：2013-02-12T11:18:58.393
> 
> 标签：for-loop, idl-programming-language

我最近在查看某人的 IDL 代码时遇到了这种明显的不一致：

```
IDL> for i=0.,1.9,1\. do print,i
      0.00000
      1.00000
IDL> for i=0.,1.9,1 do print,i
      0.00000
      1.00000
IDL> for i=0.,1.9 do print,i
      0.00000
      1.00000
      2.00000 
```

谁能解释第三个循环中的行为背后是否存在逻辑。

使用的 IDL 版本是 8.2.0。

（请注意，我自己的代码会坚持在 for 循环中使用整数，而且肯定是在找到这个之后。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:18:36.197

这可能是 IDL 8.2 中的一个错误 - 当我在 8.2.1 版本中运行命令时，我会得到与您相同的行为。当我在另一台 8.0 版本的计算机上运行它们时，我得到了预期的行为，即每个命令都给出相同的输出。内置的 IDL 帮助当然建议它们都应该提供相同的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:22:42.030

这肯定与浮点精度有关。IDL 中推荐的不是创建显式浮点循环，而是使用整数循环，其中浮点值是从主体中派生的。

# c# - 避免多个 Web 服务访问。如何做到这一点？

> ID：14831305
> 
> 赞同：1
> 
> 时间：2013-02-12T11:19:09.407
> 
> 标签：c#, web-services, windows-8, winrt-xaml, async-await

我正在尝试实现一个简单的 Windows 8 C# XAML 应用程序，其中有两个调用来访问单个 Web 服务，一个来自项目以加载和显示数据，另一个用于显示通知。由于对同一个 Web 服务进行了两次调用，我希望如果已经对该服务进行了一次调用，则另一个调用应该等待并使用第一次调用的相同响应。

我怎样才能实现这种功能？我没有添加任何代码，因为我没有为此编写任何代码。我只是想先思考，然后再编码。

请让我知道我可以为这种项目结构获得一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:23:57.983

您可以通过缓存`Task`当前正在下载的内容来做到这一点，如果有缓存，则不再开始下载`Task`：

```
private volatile Task<string> m_cachedWebServiceTask;

async Task<string> AccessWebServiceAsync()
{
    var task = m_cachedWebServiceTask;

    if (task == null)
        task = m_cachedWebServiceTask = DownloadFromWebServiceAsync();

    try
    {
        return await task;
    }
    finally
    {
        m_cachedWebServiceTask = null;
    }
} 
```

请注意，此代码有一个竞争条件：如果您`AccessWebServiceAsync()`同时调用两次，也有很小的机会`DownloadFromWebServiceAsync()`会被调用两次。但由于这只是一个优化，我认为这不应该是一个问题。如果这对您来说是个问题，您需要用锁来保护进入该领域的通道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:22:53.760

由于我觉得这个问题需要进一步关注并且它的解决方案仍然可以优化，我决定发布另一种方法。OP 主要是关于利用以下 3 个需求范围的问题：应用程序内的**用户体验**、应用**程序的内部需求**和**Web 服务的加载**多个请求。

1.  **应用程序**需要发出初始请求以加载数据。
2.  当他要求时，**用户希望**获得最新更新的结果。
3.  另一方面，它不会在*很短的时间*内发起**对 Web 服务的大量调用**。

 *因此，管理在这*很短的时间内*发生的事情实际上是解决问题的方法。

在客户端，`Service1Client`类：

```
public partial class Service1Client
{
    // default time buffer value
    int _timeBuffer = 100;

    // a time buffer used for returning the same response  
    public int TimeBuffer
    {
        get { return _timeBuffer; }
        set { _timeBuffer = value; }
    }
    // the start and end time of the web service request
    static DateTime _start, _end;

    // a volatile static variable to store the response in the buffering time
    volatile static string _response;

    // used for blocking other threads until the current thread finishes it's job
    object _locker = new object();

    public async Task<string> GetResponseData()
    {
        return await Task.Factory.StartNew<string>(() =>
        {
            lock (_locker)
            {
                if (DateTime.Now >= _end.AddMilliseconds(TimeBuffer))
                {
                    _start = DateTime.Now;
                    var async = GetDataAsync();
                    _response = async.Result;
                    _end = DateTime.Now;
                }
            }
            return _response;
        });
    }
} 
```

用于测试的控制台应用程序：

```
class Program
{
    static void Main(string[] args)
    {
        while (true)
        {
            var client = new ServiceReference1.Service1Client();
            client.TimeBuffer = 150;
            Console.WriteLine(client.GetResponseData().Result);
            if (Console.ReadKey().Key == ConsoleKey.Enter)
                break;
        }
    }
} 
```

作为备注，请注意，出于清晰示例的原因，我决定将`GetDate`WCF 服务方法的返回类型从`DateTime`更改为`string`。

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    string GetData();
}

public class Service1 : IService1
{
    public string GetData()
    {
        System.Threading.Thread.Sleep(5000);
        return DateTime.Now.ToString();
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T14:08:45.730

对于您的方案，一个可行的想法是扩展服务类。

`IService1`接口定义：

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    DateTime GetData();
} 
```

类`Service1`定义：

```
public class Service1 : IService1
{
    public DateTime GetData()
    {
        System.Threading.Thread.Sleep(5000);
        return DateTime.Now;
    }
} 
```

在客户端，扩展`Service1Client`类定义并添加一个新方法：

```
public partial class Service1Client
{
    static bool _isOpen;

    static DateTime? _cachedResponse;
    object _locker = new object();

    public DateTime GetResponseData()
    {
        if (!_isOpen)
        {
            if (!_cachedResponse.HasValue)
            {
                lock (_locker)
                {
                    _isOpen = true;
                    _cachedResponse = GetData();
                    _isOpen = false;
                }
                return _cachedResponse.Value;
            }
            else
            {
                Task.Factory.StartNew<DateTime>(() =>
                {
                    lock (_locker)
                    {
                        _isOpen = true;
                        _cachedResponse = GetData();
                        _isOpen = false;
                    }
                    return _cachedResponse.Value;
                });
            }
        }
        return _cachedResponse.Value;
    }
} 
```

测试它：

```
class Program
{
    static void Main(string[] args)
    {
        while (true)
        {
            var client = new ServiceReference1.Service1Client();
            Console.WriteLine(client.GetResponseData());
            if (Console.ReadKey().Key == ConsoleKey.Enter)
                break;
        }
    }
} 
```*

# find - 在 Calc Openoffice 中返回分数的一部分。

> ID：14831306
> 
> 赞同：0
> 
> 时间：2013-02-12T11:19:14.610
> 
> 标签：find, return, openoffice-calc, fractions

我想做的是让 Calc OpenOffice 返回单元格分母的值。我可以用右手或左手做到这一点，但后来我受到了位置的限制。

有没有办法让我找到一个单元格的分母，而不管该单元格中的数字数量如何？

所以说我有三个单元格，A1，B1，C1。值为 1/3；13/4；1/1003，分别我希望 Calc 返回 3；4；1003 在单元格 A2、B2、C2 中。我想从中获取值的单元格被格式化为文本，以保留其原始分数形式。分数代表错误/总数。

这可能吗？我该怎么做呢？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:24:28.847

由于没有人回复并且您也没有报告您找到了答案：

单元格 A1 中的分数数据：

```
=LEFT(A1;FIND("/";A1;1)-1)   = numerator
=MID(A1;FIND("/";A1;1)+1;9)  = denominator 
```

# php - 如何插入多条记录

> ID：14831307
> 
> 赞同：2
> 
> 时间：2013-02-12T11:19:21.217
> 
> 标签：php, sql, cakephp-2.0

我是一个新的蛋糕 php 开发人员。我正在尝试插入多条记录，但我不能。我的表结构如下所示：表名：代理

```
===============================================  
 编号 | 联系方式 | 姓名 | email_add | 地址
===============================================   

```

控制器代码：

```
public function send_money()
    {
         $this->layout='agent';
         $this->Agent->create();
         $this->Agent->set($this->data);

         if(empty($this->data) == false)
            {
                    if($this->Agent->save($this->data))
                    {
                        $this->Session->setFlash('Information Added Successfully.');
                        $this->redirect('send_money');
                    }

            }
            else
            {
                $this->set('errors', $this->Agent->invalidFields());    
            }
    } 
```

型号代码是：

```
<?php
App::uses('AppModel', 'Model');
/**
 * Admin Login Model
 *
 */
 class Agent extends AppModel
 {
    public $name='Agent';
    public $usetables='agents';

    public $validate = array(

    'contact' => array(
    'contact_not_empty' => array(
        'rule' => 'notEmpty',
        'message' => 'Please Give Contact No',
        'last' => true
        ),
    ),

      'name' =>array(
      'rule' => 'notEmpty', // or: array('ruleName', 'param1', 'param2' ...)
      'allowEmpty' => false,
      'message'    => 'Please Enter Name.'
    ),

    'email_add' => array(
            'email_add' => array(
            'rule' => 'email',
            'allowEmpty' => true,
            'message' => 'Please Enter Valid Email',
            'last' => true
    )),

    );

 } 
```

?>

无法使用此代码插入记录。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:27:09.663

在您的查询中尝试这个 saveall() 除了保存，希望这会有所帮助

```
 if($this->Agent->saveall($this->data)) 
```

让我知道它是否有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T11:40:51.177

让我解释一切。

首先，您的 html 表单必须如下所示。

```
<?php echo $this->Form->create('User'); ?>
<tr>
    <td>
        <?php
            echo $this->Form->input('User.0.address',array
            (
                'div'   => null,
                'label' => false,
                'class' => 'span required'
            ));
        ?>

        <?php
            echo $this->Form->input('User.1.address',array
            (
                'div'   => null,
                'label' => false,
                'class' => 'span required'
            ));
        ?>

        <?php
            echo $this->Form->input('User.2.address',array
            (
                'div'   => null,
                'label' => false,
                'class' => 'span required'
            ));
        ?>
    </td>
    <td>
        <input type="submit" value="Add" >
    </td>
</tr>
<?php echo $this->Form->end(); ?>
```

正如您所看到的，使用 cakephp 同时保存许多记录，您必须如上所述定义它，它将输入字段解析为数组，这是**cakephp 约定**。

我是说`User.0.address for first array element`

`User.1.address for second array element`

`User.2.address for third array element`等等。

现在。

**在控制器文件中。**

```
<?php
    function add()
    {
        $this->User->saveAll($this->data['User']);
    }
```

是的，您已经完成了同时保存多条记录。

**我只是告诉你 cakephp 是如何工作的，你需要做的就是根据你的需要在提示上方设置。**

祝你好运...

干杯...

随意问... :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:37:19.043

I think this

```
php echo $this->Form->create('Agents', array('action' => 'send_money'));?> 
```

should be replaced with

```
php echo $this->Form->create('Agent', array('action' => 'send_money'));?> 
```

and use saveall() in place of save.

# ios - iOS：以 png 或 jpeg 编写 CGImageRef 磁盘

> ID：14831312
> 
> 赞同：5
> 
> 时间：2013-02-12T11:19:38.520
> 
> 标签：ios, uikit

在 iOS 中将 CGImageRef 保存为 png 或 jpeg 文件的最佳方法是什么？

对于一般的可可应用程序（不使用 UIkit），请参阅：将 CGImageRef[保存到 png 文件？](https://stackoverflow.com/questions/1320988/saving-cgimageref-to-a-png-file)但这似乎太长太笨重了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T11:19:38.520

使用 UIKit，代码变成了一个简单的 3 行代码：

```
UIImage *uiImage = [UIImage imageWithCGImage:cgImage];
NSData *jpgData = UIImageJPEGRepresentation(uiImage, 0.9f);
[jpgData writeToFile:path atomically:NO]; 
```

# ruby-on-rails-3.2 - 在 Rails_admin 中发送带有延迟作业的电子邮件会导致错误

> ID：14831316
> 
> 赞同：1
> 
> 时间：2013-02-12T11:19:48.977
> 
> 标签：ruby-on-rails-3.2, delayed-job, rails-admin

我在 Rails Admin 中有一个自定义收集操作，如下所示：

需要'rails_admin/config/actions' 需要'rails_admin/config/actions/base'

```
module RailsAdminSendNewsletter
end

module RailsAdmin
  module Config
    module Actions
      class SendNewsletter < RailsAdmin::Config::Actions::Base

      # Is the action on a model scope (Example: /admin/team/export)
       register_instance_option :collection? do
         true
       end

       register_instance_option :link_icon do
          'icon-share'
       end

       register_instance_option :pjax? do
           false
         end

        register_instance_option :controller do
          Proc.new do
              if request.xhr?
                  resources = Resource.where(:for_newsletter => true)
                  subscriber = Subscriber.all.each do |subscriber|
                     NewsletterMailer.delay.newsletter(subscriber, resources)
                  end
                  resources.each do |resource|
                        resource.update_column(:sent_on, Time.now)
                      end   
              end
                flash[:success] = "The Newsletter has successfully been sent."
                redirect_to back_or_index
          end  
      end

      end
    end
  end
end 
```

产生以下错误：

```
ArgumentError (wrong number of arguments (2 for 1)):
  lib/rails_admin_send_newsletter.rb:30:in `block (3 levels) in <class:SendNewsletter>'
  lib/rails_admin_send_newsletter.rb:29:in `each'
  lib/rails_admin_send_newsletter.rb:29:in `block (2 levels) in <class:SendNewsletter>' 
```

这是时事通讯邮件：

```
class NewsletterMailer < ActionMailer::Base
    default from: ' "Agile Designers" <info@agiledesigner.com>'

    def newsletter(subscriber, resources)
        @subscriber = subscriber
        @resources = resources
        @twitter = "https://twitter.com/agiledesigners"
        mail(:to => subscriber.email, :subject => "Agile Designer Newsletter")
    end
end 
```

我不明白是什么原因造成的

任何帮助表示赞赏。

# papyrus - Papyrus Marte 建模

> ID：14831317
> 
> 赞同：3
> 
> 时间：2013-02-12T11:19:50.087
> 
> 标签：papyrus

我正在尝试在 Eclipse 中使用 Papyrus Marte 进行建模，我想知道可双向导航的关联与仅可在一个方向导航的关联之间有什么区别。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:02:57.950

因为它代表一个链接，所以一个关联有两个端点。关联的末端通过 UML 属性建模，该属性可由关联相关末端涉及的分类器拥有，在这种情况下，关联被称为可导航的，因为源分类器可以直接引用目标实例（关联另一端的实例）通过该属性。否则，代表关联端的属性可能归关联实例本身所有。

[您可以在http://lowcoupling.com/post/47801917915/understanding-uml-associations](http://lowcoupling.com/post/47801917915/understanding-uml-associations)中找到有关此主题的更多详细信息

# c++ - c++ tcp server (windows OS) - 当与服务器的连接超过 1 个时，recv() 会延迟

> ID：14831319
> 
> 赞同：0
> 
> 时间：2013-02-12T11:19:55.543
> 
> 标签：c++, windows, tcp, delay

当我尝试仅使用 1 个客户端连接到服务器时，`recv()`服务器上的功能不会延迟。

但是，当我启动客户端控制台超过 1 次（大约 7 次）时，在您使用该功能将数据包发送到服务器后，会有大约 2000 毫秒的延迟，`send()`直到服务器将数据包打印到控制台中。

有没有为每个客户端启动线程的解决方案？（Windows 限制每个进程的线程数）。

该代码使用 Visual Studio 2008 编译，这是完整的服务器代码：

```
#include <WinSock2.h>
#include <ws2tcpip.h>
#pragma comment(lib, "ws2_32.lib")
#include <Windows.h>
#include <stdio.h>

struct sslv3
{
#define max_clients 1024
private:
    int cClient;
public:
    SOCKET fd;
    int CurrentClient()
    {
        return cClient;
    }
    struct client
    {
        client()
        {
            Valid = false;
        }
        bool Valid;
        DWORD ip;
        WORD port;
        char ipstr[33];
        char portstr[33];
        SOCKET fd;
        void StrGen()
        {
            wsprintf(ipstr, "%d.%d.%d.%d", ip & 0xFF, (ip & 0xFF00)/0x100, (ip & 0xFF0000)/0x10000, (ip & 0xFF000000)/0x1000000);
            wsprintf(portstr, "%d", port);
        }
    } clients[max_clients];
    //
    sslv3(bool server_client)
    {
        WSADATA wsaData;
        WSAStartup(MAKEWORD(2, 2), &wsaData);
        cClient = 0;
        fd = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
        //
        DWORD timeout = 1;
        setsockopt(fd, SOL_SOCKET, SO_RCVTIMEO, (const char*)&timeout, sizeof(DWORD));
    }
    int Bind(WORD port)
    {
        int ret = 0;
        sockaddr_in local;
        local.sin_addr.s_addr = htonl(INADDR_ANY);
        local.sin_family = AF_INET;
        local.sin_port = htons(port);
        if((ret = bind(fd, (struct sockaddr *)&local, sizeof(local)))
            != SOCKET_ERROR)
            listen(fd, SOMAXCONN);
        return ret;
    }
    int Accept()
    {
        SOCKET clientfd;
        sockaddr_in client;
        int addrlen = sizeof(client);
        clientfd = accept(fd, (struct sockaddr *)&client, &addrlen);
        if(clientfd == -1)
            return -1;
        clients[cClient].ip = client.sin_addr.S_un.S_addr;
        clients[cClient].port = client.sin_port;
        clients[cClient].StrGen();
        clients[cClient].fd = clientfd; 
        clients[cClient].Valid = true;
        //
        DWORD timeout = 1;
        setsockopt(clients[cClient].fd, SOL_SOCKET, SO_RCVTIMEO, (const char*)&timeout, sizeof(DWORD));
        cClient++;
        if(cClient >= max_clients)
        {
            cClient = 0;
            return max_clients - 1;
        }
        return cClient - 1;
    }
    int Connect(char ip[], WORD port)
    {
        sockaddr_in addr;
        addr.sin_family = AF_INET;
        addr.sin_addr.s_addr = inet_addr(ip);
        addr.sin_port = htons(port);
        return connect(fd, (const struct sockaddr*)&addr, sizeof(addr));
    }
    int Send(SOCKET sfd, void* buffer, int length)
    {
        return send(sfd, (char*)buffer, length, 0);
    }
    int Read(SOCKET sfd, void* buffer, int length)
    {
        return recv(sfd, (char*)buffer, length, 0);
    }
};

sslv3 cssl(true);

DWORD WINAPI ReadThread(void* args)
{
    while(true)
    {
        for(int j = 0; j <= cssl.CurrentClient(); j++)
        {
            if(cssl.clients[j].Valid)
            {
                char rpack[1024];
                for(int i = 0; i < sizeof(rpack); i++)
                    rpack[i] = 0;
                if(cssl.Read(cssl.clients[j].fd, rpack, sizeof(rpack)) > 0){
                    printf("%s:%s says: %s\n", cssl.clients[j].ipstr, cssl.clients[j].portstr, rpack);
                }
            }
        }
        Sleep(1);
    }
    return TRUE;
}

int main()
{
    cssl.Bind(1234);
    CreateThread(0,0,ReadThread,0,0,0);
    while(true)
    {
        Sleep(1);
        int cid = cssl.Accept();
        if(cid != -1){
            printf("%s:%s connected!\n", cssl.clients[cid].ipstr, cssl.clients[cid].portstr);
        }
    }
    return 0;
} 
```

以下是完整的客户端代码：

```
#include <WinSock2.h>
#include <ws2tcpip.h>
#pragma comment(lib, "ws2_32.lib")
#include <Windows.h>
#include <stdio.h>

#include <iostream>
using namespace std;

struct sslv3
{
#define max_clients 1024
private:
    int cClient;
public:
    SOCKET fd;
    int CurrentClient()
    {
        return cClient;
    }
    struct client
    {
        client()
        {
            Valid = false;
        }
        bool Valid;
        DWORD ip;
        WORD port;
        char ipstr[33];
        char portstr[33];
        SOCKET fd;
        void StrGen()
        {
            wsprintf(ipstr, "%d.%d.%d.%d", ip & 0xFF, (ip & 0xFF00)/0x100, (ip & 0xFF0000)/0x10000, (ip & 0xFF000000)/0x1000000);
            wsprintf(portstr, "%d", port);
        }
    } clients[max_clients];
    //
    sslv3(bool server_client)
    {
        WSADATA wsaData;
        WSAStartup(MAKEWORD(2, 2), &wsaData);
        cClient = 0;
        fd = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
        //
        DWORD timeout = 1;
        setsockopt(fd, SOL_SOCKET, SO_RCVTIMEO, (const char*)&timeout, sizeof(DWORD));
    }
    int Bind(WORD port)
    {
        int ret = 0;
        sockaddr_in local;
        local.sin_addr.s_addr = htonl(INADDR_ANY);
        local.sin_family = AF_INET;
        local.sin_port = htons(port);
        if((ret = bind(fd, (struct sockaddr *)&local, sizeof(local)))
            != SOCKET_ERROR)
            listen(fd, SOMAXCONN);
        return ret;
    }
    int Accept()
    {
        SOCKET clientfd;
        sockaddr_in client;
        int addrlen = sizeof(client);
        clientfd = accept(fd, (struct sockaddr *)&client, &addrlen);
        if(clientfd == -1)
            return -1;
        clients[cClient].ip = client.sin_addr.S_un.S_addr;
        clients[cClient].port = client.sin_port;
        clients[cClient].StrGen();
        clients[cClient].fd = clientfd; 
        clients[cClient].Valid = true;
        //
        DWORD timeout = 1;
        setsockopt(clients[cClient].fd, SOL_SOCKET, SO_RCVTIMEO, (const char*)&timeout, sizeof(DWORD));
        cClient++;
        if(cClient >= max_clients)
        {
            cClient = 0;
            return max_clients - 1;
        }
        return cClient - 1;
    }
    int Connect(char ip[], WORD port)
    {
        sockaddr_in addr;
        addr.sin_family = AF_INET;
        addr.sin_addr.s_addr = inet_addr(ip);
        addr.sin_port = htons(port);
        return connect(fd, (const struct sockaddr*)&addr, sizeof(addr));
    }
    int Send(SOCKET sfd, void* buffer, int length)
    {
        return send(sfd, (char*)buffer, length, 0);
    }
    int Read(SOCKET sfd, void* buffer, int length)
    {
        return recv(sfd, (char*)buffer, length, 0);
    }
};

sslv3 cssl(false);

int main()
{
    cssl.Connect("127.0.0.1", 1234);
    while(true)
    {
        printf("say: ");
        char buf[1024];
        for(int i = 0; i < sizeof(buf); i++)
            buf[i] = 0;
        cin >> buf;
        int len = strlen(buf);
        cssl.Send(cssl.fd, buf, len);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:24:20.330

服务器似乎“空闲”了 2 秒，因为一些客户端在 2 秒后处理`sleep`，每个客户端 1 秒。

这显然不是在服务器上处理多个客户端的正确方法。您可能需要检查[参考](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740141%28v=vs.85%29.aspx)`select()`。

一个非常好的socket编程教程是[Beej的](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html#select)

# asp.net - 从 DropdownList SelectedItem 获取属性

> ID：14831321
> 
> 赞同：7
> 
> 时间：2013-02-12T11:20:12.207
> 
> 标签：asp.net, drop-down-menu, attributes, listitem

我有一个下拉列表，我需要在其中存储比标准列表项允许的更多的数据。我采用的方法是为每个列表项添加一个属性。

我监视更改并可以返回 SelectedIndex，但我不确定如何从那里取回属性，或者是否有更简单的方法来实现这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T11:38:22.067

尝试这个：

```
ddl.SelectedItem.Attributes["key"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:35:59.717

我之前确实尝试过一次，但我认为我无法真正使用 DropDownList 属性上的属性。

**我所做的是以下内容：**

创建一个包含*KeyValuePair的**列表*。KeyValuePair 中的键与您放入 DropDownList 项中的 ID 相同。

 *KeyValuePair 的值是您希望与您的项目保持/连接的值（或多个值）。

一旦您在 DropDownList 中选择了一个项目并使用 ID 找到正确的 KeyValuePair，您就可以将 List 存储在您的 viewState 中并读取数据。

所以你可以像这样“存储”数据：

```
 var listKeyValuePair = new List<KeyValuePair<int, string>>();
    listKeyValuePair.Add(new KeyValuePair<int, string>(1, "data"));
    ViewState["DataList"] = listKeyValuePair; 
```

你可以像这样得到你的数据：

```
 var listKeyValuePair = (List<KeyValuePair<int, string>>)ViewState["DataList"];
    var dataILikeToHave = listKeyValuePair.Find(k => k.Key == Convert.ToInt16(dropDownlist.SelectedItem.Value)); 
```*

# url - 有没有人在预先输入的输入文本中使用 url 属性？

> ID：14831326
> 
> 赞同：0
> 
> 时间：2013-02-12T11:20:30.770
> 
> 标签：url, xpages, typeahead

我正在尝试在输入文本字段中使用预输入功能。我不想使用固定列表或 DBColumn 填充值（这会降低数千个条目的速度），而是使用预先输入属性的 url 参数。

到目前为止，我所做的是：

```
<xp:inputText value="#{docEntry.namUsers}" id="namUsers">
    <xp:typeAhead mode="external" valueMarkup="false" minChars="3" var="namEntries" frequency="1" maxValues="10" id="typeAheadNamUsers">
        <xp:this.url><![CDATA[#{javascript:"http://server/databse.nsf/view?ReadViewEntries&OutputFormat=JSON&StartKey=" + getComponent("namUsers").getAttributes().get("value");}]]></xp:this.url>
    </xp:typeAhead>
</xp:inputText> 
```

当输入最少需要的字符时，我可以看到一个 GET 请求被触发。这个 GET 请求返回视图的所需内容。

但是我没有找到任何方法来获取返回的信息以解析内容并为 typeahead 元素提供有效列表。

有没有人尝试过使用 typeahead 元素的 url 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:47:51.583

您不能以这种方式使用预先输入的*url*参数。该参数只是用于初始化预输入小部件的配置参数，不会随您的服务器端代码更新。

如果您查看 firebug 控制台，您会看到一个名为*$$value*的 URL 参数会自动添加到您定义的 url（包含查找本身的字符）。

Typeahead 的响应需要是简单的 HTML 代码：

```
<ul>
   <li>Result 1</li>
   <li>Result 2</li>
   <li>Result 3</li>
   <li>...</li>
</ul> 
```

[它可以更改以用于显示目的，但它必须是 HTML]

外部请求没有 JSON / XML。

您可以为您的视图创建一个*$$ViewTemplate*（HTML 内容）以返回所需的格式，并添加一个重定向代理：

```
Option Public
Option Declare

Sub Initialize
    Dim session As New NotesSession
    Dim doc As NotesDocument
    Dim hlp

    Set doc = session.Documentcontext
    hlp = Split( doc.QUERY_STRING_DECODED(0), "$$value=" )
    Print "[http://example.com/YourDB.nsf/View?OpenView&startKey=" & hlp(1) & "]"

End Sub 
```

然后您可以将 url 设置为您的代理而不是视图：

```
<xp:typeAhead mode="external" valueMarkup="false" minChars="3"
   frequency="1" maxValues="10" id="typeAheadNamUsers"
   url="http://example.com/YourDB.nsf/RedirectAgent?OpenAgent">
</xp:typeAhead> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:25:34.450

AFAIK 该 URL 预期的数据需要“准备好收集”，这意味着由分隔符（逗号或换行符）分隔的值列表。?ReadViewEntries 不提供该格式，因此您想改用 HTML passthru 视图。我会挑战你的假设。如果您用于查找的数据库位于同一台服务器上，那么是什么让您认为添加 HTTP 延迟会比 @DbColumn 更快？如果它是不同的服务器，那将是一个有趣的测试——此外，无论如何将值查找保持在同一台服务器上会更好。另一个问题：在预先输入的列表中包含数千个潜在值的用户体验真的是高效、有效和愉快的吗？

# django - 在 Django QuerySet 中，如何在多对一关系中过滤“不存在”

> ID：14831327
> 
> 赞同：86
> 
> 时间：2013-02-12T11:20:33.190
> 
> 标签：django, django-models, django-orm

我有两个这样的模型：

```
class User(models.Model):
    email = models.EmailField()

class Report(models.Model):
    user = models.ForeignKey(User) 
```

实际上，每个模型都有更多与这个问题无关的字段。

我想过滤所有拥有以“a”开头的电子邮件但没有报告的用户。将有更多基于其他领域的标准`.filter()`。`.exclude()`

我想这样处理它：

```
users = User.objects.filter(email__like = 'a%')

users = users.filter(<other filters>)

users = ??? 
```

我想 ？？？过滤掉没有与之关联的报告的用户。我该怎么做？如果这不可能，因为我已经提出了它，那么另一种方法是什么？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-02-12T11:58:26.627

**注意：这个答案是在 2013 年为 Django 1.5 编写的。请参阅其他答案以了解适用于较新版本 Django 的更好方法**

使用[`isnull`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#std:fieldlookup-isnull).

```
users_without_reports = User.objects.filter(report__isnull=True)
users_with_reports = User.objects.filter(report__isnull=False).distinct() 
```

使用 时`isnull=False`，`distinct()`需要 以防止重复结果。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2018-08-16T14:24:32.077

从 Django 3.0 开始，您现在可以直接在 a 中使用表达式`filter()`，删除不必要的 SQL 子句：

```
User.objects.filter(
    ~Exists(Reports.objects.filter(user__eq=OuterRef('pk'))),
    email__startswith='a'
) 
```

```
SELECT user.pk, user.email
FROM user
WHERE NOT EXISTS (SELECT U0.pk FROM reports U0 WHERE U0.user = user.pk) AND email LIKE 'a%'; 
```

文件：

*   [存在](https://docs.djangoproject.com/en/dev/ref/models/expressions/#exists-subqueries)
*   [外部参考](https://docs.djangoproject.com/en/dev/ref/models/expressions/#django.db.models.OuterRef)
*   [过滤 Subquery() 或 Exists() 表达式](https://docs.djangoproject.com/en/dev/ref/models/expressions/#filtering-on-a-subquery-or-exists-expressions)

* * *

对于 Django 1.11+，您可以添加`EXISTS`子查询：

```
User.objects.annotate(
    no_reports=~Exists(Reports.objects.filter(user__eq=OuterRef('pk')))
).filter(
    email__startswith='a',
    no_reports=True
) 
```

这会生成类似这样的 SQL：

```
SELECT
    user.pk,
    user.email,
    NOT EXISTS (SELECT U0.pk FROM reports U0 WHERE U0.user = user.pk) AS no_reports
FROM user
WHERE email LIKE 'a%' AND NOT EXISTS (SELECT U0.pk FROM reports U0 WHERE U0.user = user.pk); 
```

`NOT EXISTS`子句几乎总是执行“不存在”过滤器的最有效方式。

* * *

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-08-10T17:41:23.490

在没有额外查询或联接的情况下获得本机 SQL EXISTS/NOT EXISTS 的唯一方法是将其作为原始 SQL 添加到 .extra() 子句中：

```
users = users.extra(where=[
    """NOT EXISTS(SELECT 1 FROM {reports} 
                  WHERE user_id={users}.id)
    """.format(reports=Report._meta.db_table, users=User._meta.db_table)
]) 
```

事实上，这是一个非常明显和有效的解决方案，我有时想知道为什么它没有内置到 Django 作为查找。它还允许细化子查询以查找例如仅在*上周*有[out] 报告的用户，或[out] 未答复/未查看报告的用户。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-01-31T07:33:11.083

除了@OrangeDog 答案。[从 Django 3.0](https://docs.djangoproject.com/en/3.0/ref/models/expressions/#filtering-on-a-subquery-or-exists-expressions)开始，您可以使用`Exists`子查询直接过滤查询集：

```
User.objects.filter(
    ~Exists(Reports.objects.filter(user__eq=OuterRef('pk'))
) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-23T23:05:25.110

[Alasdair 的回答](https://stackoverflow.com/a/14832060/4794)很有帮助，但我不喜欢使用`distinct()`. 有时它可能很有用，但它通常是一种代码味道，告诉你你搞砸了你的连接。

幸运的是，Django 的查询[集](https://docs.djangoproject.com/en/3.0/ref/models/querysets/#in)允许您过滤子查询。使用 Django 3.0，您还可以使用[exists 子句](https://docs.djangoproject.com/en/3.0/ref/models/expressions/#filtering-on-a-subquery-or-exists-expressions)。

以下是从您的问题运行查询的几种方法：

```
# Tested with Django 3.0 and Python 3.6
import logging
import sys

import django
from django.apps import apps
from django.apps.config import AppConfig
from django.conf import settings
from django.db import connections, models, DEFAULT_DB_ALIAS
from django.db.models import Exists, OuterRef
from django.db.models.base import ModelBase

NAME = 'udjango'
DB_FILE = NAME + '.db'

def main():
    setup()

    class User(models.Model):
        email = models.EmailField()

        def __repr__(self):
            return 'User({!r})'.format(self.email)

    class Report(models.Model):
        user = models.ForeignKey(User, on_delete=models.CASCADE)

    syncdb(User)
    syncdb(Report)

    anne = User.objects.create(email='anne@example.com')
    User.objects.create(email='adam@example.com')
    alice = User.objects.create(email='alice@example.com')
    User.objects.create(email='bob@example.com')

    Report.objects.create(user=anne)
    Report.objects.create(user=alice)
    Report.objects.create(user=alice)

    logging.info('users without reports')
    logging.info(User.objects.filter(report__isnull=True, email__startswith='a'))

    logging.info('users with reports (allows duplicates)')
    logging.info(User.objects.filter(report__isnull=False, email__startswith='a'))

    logging.info('users with reports (no duplicates)')
    logging.info(User.objects.exclude(report__isnull=True).filter(email__startswith='a'))

    logging.info('users with reports (no duplicates, simpler SQL)')
    report_user_ids = Report.objects.values('user_id')
    logging.info(User.objects.filter(id__in=report_user_ids, email__startswith='a'))

    logging.info('users with reports (EXISTS clause, Django 3.0)')
    logging.info(User.objects.filter(
        Exists(Report.objects.filter(user_id=OuterRef('id'))),
        email__startswith='a'))

    logging.info('Done.')

def setup():
    with open(DB_FILE, 'w'):
        pass  # wipe the database
    settings.configure(
        DEBUG=True,
        DATABASES={
            DEFAULT_DB_ALIAS: {
                'ENGINE': 'django.db.backends.sqlite3',
                'NAME': DB_FILE}},
        LOGGING={'version': 1,
                 'disable_existing_loggers': False,
                 'formatters': {
                    'debug': {
                        'format': '%(asctime)s[%(levelname)s]'
                                  '%(name)s.%(funcName)s(): %(message)s',
                        'datefmt': '%Y-%m-%d %H:%M:%S'}},
                 'handlers': {
                    'console': {
                        'level': 'DEBUG',
                        'class': 'logging.StreamHandler',
                        'formatter': 'debug'}},
                 'root': {
                    'handlers': ['console'],
                    'level': 'INFO'},
                 'loggers': {
                    "django.db": {"level": "DEBUG"}}})
    app_config = AppConfig(NAME, sys.modules['__main__'])
    apps.populate([app_config])
    django.setup()
    original_new_func = ModelBase.__new__

    @staticmethod
    def patched_new(cls, name, bases, attrs):
        if 'Meta' not in attrs:
            class Meta:
                app_label = NAME
            attrs['Meta'] = Meta
        return original_new_func(cls, name, bases, attrs)
    ModelBase.__new__ = patched_new

def syncdb(model):
    """ Standard syncdb expects models to be in reliable locations.

    Based on https://github.com/django/django/blob/1.9.3
    /django/core/management/commands/migrate.py#L285
    """
    connection = connections[DEFAULT_DB_ALIAS]
    with connection.schema_editor() as editor:
        editor.create_model(model)

main() 
```

如果将其放入 Python 文件并运行它，您应该会看到如下内容：

```
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) PRAGMA foreign_keys = OFF; args=None
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) PRAGMA foreign_keys; args=None
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) BEGIN; args=None
2019-12-06 11:45:17[DEBUG]django.db.backends.schema.execute(): CREATE TABLE "udjango_user" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "email" varchar(254) NOT NULL); (params None)
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) CREATE TABLE "udjango_user" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "email" varchar(254) NOT NULL); args=None
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) PRAGMA foreign_key_check; args=None
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) PRAGMA foreign_keys = ON; args=None
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) PRAGMA foreign_keys = OFF; args=None
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) PRAGMA foreign_keys; args=None
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) BEGIN; args=None
2019-12-06 11:45:17[DEBUG]django.db.backends.schema.execute(): CREATE TABLE "udjango_report" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "user_id" integer NOT NULL REFERENCES "udjango_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) CREATE TABLE "udjango_report" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "user_id" integer NOT NULL REFERENCES "udjango_user" ("id") DEFERRABLE INITIALLY DEFERRED); args=None
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) PRAGMA foreign_key_check; args=None
2019-12-06 11:45:17[DEBUG]django.db.backends.schema.execute(): CREATE INDEX "udjango_report_user_id_60bc619c" ON "udjango_report" ("user_id"); (params ())
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) CREATE INDEX "udjango_report_user_id_60bc619c" ON "udjango_report" ("user_id"); args=()
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) PRAGMA foreign_keys = ON; args=None
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.017) INSERT INTO "udjango_user" ("email") VALUES ('anne@example.com'); args=['anne@example.com']
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.023) INSERT INTO "udjango_user" ("email") VALUES ('adam@example.com'); args=['adam@example.com']
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.022) INSERT INTO "udjango_user" ("email") VALUES ('alice@example.com'); args=['alice@example.com']
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.022) INSERT INTO "udjango_user" ("email") VALUES ('bob@example.com'); args=['bob@example.com']
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.029) INSERT INTO "udjango_report" ("user_id") VALUES (1); args=[1]
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.033) INSERT INTO "udjango_report" ("user_id") VALUES (3); args=[3]
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.033) INSERT INTO "udjango_report" ("user_id") VALUES (3); args=[3]
2019-12-06 11:45:17[INFO]root.main(): users without reports
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) SELECT "udjango_user"."id", "udjango_user"."email" FROM "udjango_user" LEFT OUTER JOIN "udjango_report" ON ("udjango_user"."id" = "udjango_report"."user_id") WHERE ("udjango_user"."email" LIKE 'a%' ESCAPE '\' AND "udjango_report"."id" IS NULL) LIMIT 21; args=('a%',)
2019-12-06 11:45:17[INFO]root.main(): <QuerySet [User('adam@example.com')]>
2019-12-06 11:45:17[INFO]root.main(): users with reports (allows duplicates)
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) SELECT "udjango_user"."id", "udjango_user"."email" FROM "udjango_user" INNER JOIN "udjango_report" ON ("udjango_user"."id" = "udjango_report"."user_id") WHERE ("udjango_user"."email" LIKE 'a%' ESCAPE '\' AND "udjango_report"."id" IS NOT NULL) LIMIT 21; args=('a%',)
2019-12-06 11:45:17[INFO]root.main(): <QuerySet [User('anne@example.com'), User('alice@example.com'), User('alice@example.com')]>
2019-12-06 11:45:17[INFO]root.main(): users with reports (no duplicates)
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) SELECT "udjango_user"."id", "udjango_user"."email" FROM "udjango_user" WHERE (NOT ("udjango_user"."id" IN (SELECT U0."id" FROM "udjango_user" U0 LEFT OUTER JOIN "udjango_report" U1 ON (U0."id" = U1."user_id") WHERE U1."id" IS NULL)) AND "udjango_user"."email" LIKE 'a%' ESCAPE '\') LIMIT 21; args=('a%',)
2019-12-06 11:45:17[INFO]root.main(): <QuerySet [User('anne@example.com'), User('alice@example.com')]>
2019-12-06 11:45:17[INFO]root.main(): users with reports (no duplicates, simpler SQL)
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) SELECT "udjango_user"."id", "udjango_user"."email" FROM "udjango_user" WHERE ("udjango_user"."email" LIKE 'a%' ESCAPE '\' AND "udjango_user"."id" IN (SELECT U0."user_id" FROM "udjango_report" U0)) LIMIT 21; args=('a%',)
2019-12-06 11:45:17[INFO]root.main(): <QuerySet [User('anne@example.com'), User('alice@example.com')]>
2019-12-06 11:45:17[INFO]root.main(): users with reports (EXISTS clause, Django 3.0)
2019-12-06 11:45:17[DEBUG]django.db.backends.debug_sql(): (0.000) SELECT "udjango_user"."id", "udjango_user"."email" FROM "udjango_user" WHERE (EXISTS(SELECT U0."id", U0."user_id" FROM "udjango_report" U0 WHERE U0."user_id" = "udjango_user"."id") AND "udjango_user"."email" LIKE 'a%' ESCAPE '\') LIMIT 21; args=('a%',)
2019-12-06 11:45:17[INFO]root.main(): <QuerySet [User('anne@example.com'), User('alice@example.com')]>
2019-12-06 11:45:17[INFO]root.main(): Done. 
```

您可以看到最终查询使用了所有内部联接。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-12T11:55:21.273

要过滤没有与之关联的报告的用户，请尝试以下操作：

`users = User.objects.exclude(id__in=[elem.user.id for elem in Report.objects.all()])`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-02T16:38:25.080

### *查找存在*连接行的行的最佳选择：

```
Report.objects.filter(user__isnull=False).distinct() 
```

这使用一个`INNER JOIN`（然后冗余检查`User.id`不为空）。

### *查找没有*连接行的行的最佳选择：

```
Report.objects.filter(user__isnull=True) 
```

这使得`LEFT OUTER JOIN`, then checks`User.id`不为空。

基于连接的查询将比子查询更快，因此这比新可用的选项（例如 Django >= 3）更快，用于查找*没有*连接行的行：

```
Report.objects.filter(~Exists(User.objects.filter(report=OuterRef('pk')))) 
```

这会创建一个`WHERE NOT EXISTS (SELECT .. FROM User..)`因此涉及一个可能很大的中间结果集（感谢@Tomasz Gandor）。

这对于 Django <3，`filter()`不能传递子查询，也使用子查询，所以速度较慢：

```
Report.objects.annotate(
    no_users=~Exists(User.objects.filter(report=OuterRef('pk')))
).filter(no_users=True) 
```

这可以与子查询结合使用。在此示例中，a`Textbook`具有多个`Versions`（即，`version`具有`textbook_id`），并且 a`version`具有多个`Pages`（即，`page`具有`version_id`）。子查询获取与页面相关联的每本教科书的最新版本：

```
subquery = (
    Version.objects
        .filter(
            # OuterRef joins to Version.textbook in outer query below
            textbook=OuterRef('textbook'), 
            # excludes rows with no joined Page records
            page__isnull=False)
        # ordered so [:1] below gets highest (ie, latest) version number
        .order_by('-number').distinct()
)
# Only the Version.ids of the latest versions that have pages returned by the subquery
books = Version.objects.filter(pk=Subquery(subquery.values('pk')[:1])).distinct() 
```

要返回连接到两个表中的一个或两个表的行，请使用 Q 对象（`Page`并且`TextMarkup`两者都有可空的外键连接到`File`）：

```
from django.db.models import Q

File.objects.filter(Q(page__isnull=False) | Q(textmarkup__isnull=False).distinct() 
```

# c - 有些线程计算正确，有些线程不正确

> ID：14831328
> 
> 赞同：0
> 
> 时间：2013-02-12T11:20:32.730
> 
> 标签：c, parallel-processing

简单的并行加法器。您将指向数组中第一个元素的指针、指向数组中最后一个元素的指针、第一个指针的元素 # 以及正在操作的数组的这一部分中的元素数传递给它。

```
 double my_func (double *x, double *x_last, int first_pos, int n)
    {
      if (n ==1) {
        return x[first_pos];
      }
      else if (n == 2) {
        return x[first_pos] + x[first_pos+1];
      }
      else {
        double x1,x2;

        x1 = _Cilk_spawn my_func (&x[first_pos], &x[n/2+first_pos-1],first_pos, n/2);
        x2 = my_func (&x[n/2+first_pos],&x[first_pos+n-1],n/2+first_pos, n-n/2);
        _Cilk_sync;

        return x1 + x2;
      }
    } 
```

假设我们从一个大小为 80 的数组开始。这对于元素 #0-19（第一季度）非常有效，然后为元素 #20-39 和之后的所有元素返回一堆 0/垃圾。显然，x1 和 x2 线都在某种程度上工作，但功能出现故障，我不知道为什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:25:27.940

您对数组进行了错误的切片：

```
x1 = my_func (&x[n/2+first_pos],&x[first_pos+n-1],n/2+first_pos, n-n/2);
                    ^                                 ^
            new "base" pointer                first pos in slice?! 
```

您不能*同时*将调整后的指针传递给切片的第一个元素，*以及*该元素的全局索引。可以说，您最终会多次编制索引，从而导致无效地址被取消引用。

对于 的情况`n = 80`，第二个递归调用将通过`x`指向元素`&x[80/2+0]`，即`&x[40]`，但它也将设置`first_pos`为该`40`调用。最终你会到达`n < 3`，并使用累积索引`first_pos`。

此外，为了清楚起见，输入数据应该是`const`只读的。

# c# - 替换列表中的扩展名

> ID：14831329
> 
> 赞同：0
> 
> 时间：2013-02-12T11:20:34.727
> 
> 标签：c#, .net, .net-4.0

我有以下字符串列表，我想用 String.Empty 删除/替换字符串的最后一部分（即“.mp4\n”）。

```
List<String> _response
[0] ---- “test.mp4\n”
[1] ---- “test2.mov\n”
[3] ---- “test3.mp4\n”
[4] ---- “test3.mp3\n”
etc. 
```

如何以智能且简单的方式删除扩展？我正在使用 .NET 4.0，而且我是 C# 和 .NET 的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T11:21:33.397

使用[Path.GetFileNameWithoutExtension](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)方法，例如：

```
var newList = _response.Select(r=> Path.GetFileNameWithoutExtension(r.Trim())).ToList(); 
```

如果[`string.Trim`](http://msdn.microsoft.com/en-us/library/system.string.trim.aspx)您的字符串以`\n`

或者更短的形式（如果文件名不包含 '\n`）：

```
var newList = _response.Select(Path.GetFileNameWithoutExtension).ToList(); 
```

# scala - scala案例类私有应用方法（repl bug？）

> ID：14831330
> 
> 赞同：7
> 
> 时间：2013-02-12T11:20:38.833
> 
> 标签：scala, constructor, read-eval-print-loop, case-class

在 Scala2.10.0 REPL

```
Welcome to Scala version 2.10.0 (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0_13).
Type in expressions to have them evaluated. 
Type :help for more information.

scala> case class A private(i:Int)
defined class A

scala> A(1)
res0: A = A(1) 
```

但是如果编译

```
$ scala -version
Scala code runner version 2.10.0 -- Copyright 2002-2012, LAMP/EPFL
$ cat Main.scala 
package foo

case class A private (i:Int)

object Main extends App{
  println(A(1))
}

$ scalac Main.scala 
Main.scala:6: error: constructor A in class A cannot be accessed in object Main
  println(A(1))
          ^
one error found 
```

`A.apply(1)`是编译错误。

这是 Scala2.10.0 REPL 错误吗？

仅供参考 Scala2.9.2 REPL 如下

```
Welcome to Scala version 2.9.2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0_13).
Type in expressions to have them evaluated.
Type :help for more information.

scala> case class A private(i:Int)
defined class A

scala> A(1)
<console>:10: error: constructor A in class A cannot be accessed in object $iw
              A(1)
              ^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:47:15.697

这绝对看起来像一个 REPL 错误。

请注意，构造函数被正确标记为`private`（换句话说，`new A(1)`未按预期编译），只有工厂 ( `A.apply`) 被错误地公开。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-12T16:22:14.530

我明白了...您认为您在编写时正在调用构造函数`A(1)`。你不是。您正在调用在自动生成的（公共）伴随对象及其公共`apply`方法中为您添加的工厂。

**附录**

我的日子一再犯错……</p>

在 2.10.0 REPL 中：

```
scala> object REPL { case class CC1 private(i: Int); val cc1_1 = CC1(23) }
<console>:7: error: constructor CC1 in class CC1 cannot be accessed in object REPL
       object REPL { case class CC1 private(i: Int); val cc1_1 = CC1(23) } 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-12T14:53:55.057

REPL 与普通编译器有一个巨大的语义差异。

考虑一下能够做到这一点意味着什么：

```
scala> val v1 = 23
v1: Int = 23

scala> val v1 = 42
v1: Int = 42 
```

你能在编译的 Scala 代码中做到这一点吗？当然不是，这将是一个被禁止的双重定义。

REPL 如何做到这一点？实际上，您输入的每一行都在一个逐渐嵌套的范围内。重新定义的外观是实际的阴影。就好像你这样做了：

```
object REPL1 {
  val v1 = 23
  object REPL2 {
    val v1 = 42
    object REPL3 {
      // Next REPL line here...
    }
  }
} 
```

那么，如何获得同伴呢？在它们周围放置一个显式对象（或其他范围形成结构）。请记住，没有空行。当您这样做时，REPL 将停止接受给定“行”或“块”的输入。

# emacs - 从 emacsclient 静默调用 defun

> ID：14831334
> 
> 赞同：2
> 
> 时间：2013-02-12T11:20:56.137
> 
> 标签：emacs, emacsclient

在源代码编译期间，我希望 GNU Make 调用 emacs defun。为此，我有 2 个选项：

*   启动一个新的 emacs 实例，并加载所需的函数并调用它。
*   从 emacsclient 调用 defun 如下：

    ```
    emacsclient --eval "(my-emacs-defun)" 
    ```

后者有优势，它更快，因为 emacs 服务器已经在运行并且加载了所需的 defun。

但这也有一个缺点，如果`(message ...)`从 调用`(my-emacs-defun)`，它会中断我的活动 emacs 会话。我可以尝试修改`(my-emacs-defun)`所以`(message ...)`不调用，但是在使用 emacs 内置函数时真的很难。

因此，我想知道如何抑制`(message ...)`from `(my-emacs-defun)`。是否可以在为此调用 (defadvice)` 时改变`(message ...)`行为`(my-emacs-defun)? Can I use`？

**编辑** 真正的问题是，消息显示在小缓冲区中。那时（例如在 期间`(find-file)`）使用 minibuffer 时会很烦人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:56:14.117

只需为您的呼叫重新定义消息功能（暂时）：

```
(flet ((message (msg) ))
  (my-emacs-defun))) 
```

由于全局函数的动态作用域，名称`message`将在**flet 表达式内执行时重新定义，并且在退出****flet**后将返回其原始含义。

### 例子：

```
(defun verbose ()
  (message "hi"))

(let ()
  (message "one")
  (flet ((message (msg) ))
     (verbose))
  (message "two"))
; ->
; one
; two 
```

您也可以暂时重新绑定 s *Messages*缓冲区，但我不知道它存储在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:44:31.160

您可以在函数调用之前恢复回显区域中显示的消息，如下所示：

```
(let ((msg (current-message)))
  (do-something-that-calls-message)
  (message "%s" (or msg ""))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T13:31:09.713

我决定选择第一个选项：没有 emacsclient。

更准确地说，我现在使用：

```
emacs --batch --eval "(my-emacs-defun)" 
```

在我的 Makefile 中，它看起来像这样：

```
sometarget:
        @emacs --batch --eval "$${elisp_code}"

define elisp_code
   (require 'something)
   (my-emacs-defun)
endif 
```

这似乎也很快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T10:53:42.260

更好的是：

```
define emacs_script_content=
  (require 'something)
  (my-emacs-defun)
endef
export emacs_script_content

emacs-script:
    @echo $${emacs_script_content} > $@
.INTERMEDIATE: emacs-script

some-target: emacs-script
    @emacs --script $< 
```

`make`这样您在调用函数或`"text"`在脚本中引用时不会出错。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T09:26:14.727

我查看了 emacs 源代码，发现了这个 hack：

```
 (let ((message-log-max nil)
        (executing-kbd-macro t))
    (my-emacs-defun)) 
```

这确实会抑制所有消息，但仍然`(find-file)`会丢失迷你缓冲区的焦点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-12T19:24:10.107

`(with-temp-message "" (my-emacs-func))`

# javascript - css砂纸不工作ie7和8

> ID：14831335
> 
> 赞同：2
> 
> 时间：2013-02-12T11:20:59.063
> 
> 标签：javascript, css

我目前正在使用 css 砂纸（[http://www.useragentman.com/blog/csssandpaper-a-css3-javascript-library/](http://www.useragentman.com/blog/csssandpaper-a-css3-javascript-library/)）来旋转指定的 div。它在 Firefox 和 ie9 中运行良好。

但在 ie 7 和 8 中，我在控制台中收到以下错误：

```
CRIPT5007: Unable to get value of the property 'split': object is null or undefined 
cssSandpaper.js, line 563 character 21 
```

这是我设置的 CSS：

```
-sand-transform: rotate(340deg);
-webkit-transform: rotate(340deg);
-moz-transform: rotate(340deg);
-o-transform: rotate(340deg);
-ms-transform:rotate(340deg); 
```

有人对问题可能是什么有任何想法吗？

干杯丹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:53:19.803

遇到同样的问题。我已经（快速）通过更改 cssSandpaper.js 解决了这个问题。

添加：

```
if(propertiesStr === undefined) {
    return false;
} 
```

之间：

```
var propertiesStr = parsedRule[1];
var properties = propertiesStr.split(';'); 
```

不是最好的解决方案，但我没有时间调试整个脚本；-)

# android - 自定义动作条 sherlock

> ID：14831338
> 
> 赞同：2
> 
> 时间：2013-02-12T11:21:10.730
> 
> 标签：android

我已经用 theme.sherlock 实现了 Action bar Sherlock。操作栏有导航选项卡。我已经使用样式来自定义操作栏。样式xml如下所示

```
 <resources>
 <style name="MyTheme" parent="Theme.Sherlock">
<item name= "actionBarStyle">@style/ActionStyle</item>
<item name="actionBarTabTextStyle">@style/MyTabTextStyle</item>
</style>
<style name= "ActionStyle" parent="Widget.Sherlock.ActionBar">
   <item name="android:background">@drawable/actionstyle</item>
   <item name="background">@drawable/actionstyle</item>
  </style>
<style name="MyTabTextStyle" parent="Widget.Sherlock.ActionBar.TabText" >
<item name="android:textColor">#0EBFE9</item>
<item name ="android:textStyle">bold</item>
<item name= "android:textSize">14dp</item>
</style>
 </resources> 
```

可绘制的动作风格

```
 <?xml version="1.0" encoding="utf-8"?>
 <layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Bottom Line -->
<item>
    <shape android:shape="rectangle">
        <solid android:color="@android:color/darker_gray"/>
    </shape>
</item>

<!-- Color of your action bar -->
<item android:bottom="2dip">
    <shape android:shape="rectangle">
        <solid android:color="@android:color/darker_gray" />
    </shape>
</item>
</layer-list> 
```

我需要删除操作栏和导航选项卡之间的分隔线 在导航选项卡下方显示蓝色分隔线

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:23:16.037

您所要做的就是设置`background`xml 的属性。您可以将“颜色”设置为**透明**以将其删除。

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Bottom Line -->
    <item>
        <shape android:shape="rectangle">
            <solid android:color="@android:color/transparent" />
        </shape>
    </item>

    <!-- Color of your action bar -->
    <item android:bottom="2dip">
        <shape android:shape="rectangle">
            <solid android:color="@color/action_bar_color" />
        </shape>
    </item>
</layer-list> 
```

然后将其应用到您的主题中：

```
<style name="Widget.MyTheme.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">@drawable/action_bar_background</item>
    <item name="background">@drawable/action_bar_background</item>
</style> 
```

# list - javascript 函数在 IE 中不起作用 - 选择列表的选项

> ID：14831343
> 
> 赞同：1
> 
> 时间：2013-02-12T11:21:34.370
> 
> 标签：list, function, select, option

我得到了以下jquery函数：`

$('img.thumbnail22').click(function () { $("select[name='group[{$sConfigurator.groupID}]']").val('{$configValue.optionID}'); $ ('.upprice_config').submit(); return false; });`

此代码通过单击图像将值提交到选择列表。它在除 IE7/8/9 之外的所有浏览器中都能正常工作。

您是否知道 IE 也使用此代码或要更改什么？

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:50:28.220

我解决了这个问题。因此我得到了几张图片，我必须指定点击的。想知道为什么其他浏览器做得对......

$('img.thumbnail22* *[value="{$configValue.optionID}"]* *')

# c++ - 将菜单栏添加到 QT cvNameWIdow

> ID：14831345
> 
> 赞同：1
> 
> 时间：2013-02-12T11:21:40.947
> 
> 标签：c++, c, qt, opencv, menubar

我正在尝试使用 QT creator 创建具有开放 CV 的视频播放器应用程序。使用 openCV 可以通过将每个视频帧作为图像添加到 cvNamedWindow 实例来播放视频文件。

现在我想向这个 cvNamedWindow 添加一个菜单栏，以便我可以添加文件、帮助等菜单。菜单。我查阅了 cvNamedWindow 的文档，但找不到任何线索。有什么建议么？

Ps 在使用 QMainWindow 创建的 opencv 窗口中，直接添加菜单栏。但我想要的是将菜单栏添加到 cvNamedWindow 而不是使用 QMainWindow 创建的窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:41:07.760

OpenCV 的[用户界面](http://docs.opencv.org/modules/highgui/doc/user_interface.html)非常有限，因此无法使用 OpenCV 的 API 来完成您正在寻找的内容。

另一方面，Qt 有丰富的 API 用于构建图形应用程序。幸运的是，我刚刚分享了**[cvVideo：一个演示如何在`QWidget`表面](https://github.com/karlphillip/GraphicsProgramming/tree/master/cvVideo)**上播放视频的示例。另外，该演示有一些巧妙的技巧来改变[纵横比模式](http://doc.qt.digia.com/stable/qt.html#AspectRatioMode-enum)。差点忘了，它的显示也很简单`QMenuBar`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:14:16.890

您可以将 createButton 和 createTrackbar 与 namedWindow 一起使用，仅此而已。

当然，您可以模拟带有一排按钮的菜单，但如果您需要更高级的东西，请坚持使用原生 Qt api。

# r - gbm 多项分布

> ID：14831346
> 
> 赞同：1
> 
> 时间：2013-02-12T11:21:40.467
> 
> 标签：r, multinomial

我第一次尝试在我的数据上使用 gbm（实际上是第一次使用任何类型的回归树），它由 14 个连续因变量和一个作为响应变量的因子组成，具有 13 个水平。我是通过 Elith 等人的一个非常好的描述来到 gbm 的，但是他使用了对基本 gbm 包的修改，该包无法处理多项分布。gbm 的帮助声称它可以处理这个问题：

“分布：要么是一个字符串，指定要使用的分布的名称，要么是一个带有指定分布的组件名称的列表以及所需的任何其他参数。如果未指定，gbm 将尝试猜测：如果响应只有 2 个唯一值，则假定为伯努利；否则，如果响应是因子，则假定为多项式；否则，如果响应具有类“Surv”，则假定为 coxph；否则，假定为高斯。当前可用的选项是“高斯”（平方误差)、“laplace”（绝对损失）、“tdist”（t-分布损失）、“bernoulli”（0-1 结果的逻辑回归）、“huberized”（0-1 结果的huberized铰链损失）、“多项式”（超过 2 个类别时的分类），“adaboost”（0-1 结果的 AdaBoost 指数损失）、“泊松”（计数结果）、“coxph”（右删失观察）、“分位数”或“成对”（使用 Lambda Mart 算法的排名度量）。

尽管如此，无论我指定“多项式”还是“让它猜测”，它都不起作用。有人知道我在做什么错吗？或者我是否完全误解了某些东西——我的数据的多项式分布是否意味着我的误差损失函数也是多项式分布？如果我选择“高斯”，它会运行，但我想在这种情况下会计算出完全不同的东西？我会很感激任何帮助！艾格尼丝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:51:02.943

您使用的是最新版本的 gbm 吗？我有一个类似的问题，在重新安装 gbm 包后得到了解决。

# python - 在 python 和 UNIX 中拉取 URL

> ID：14831352
> 
> 赞同：-3
> 
> 时间：2013-02-12T11:22:12.377
> 
> 标签：python, web-services, parsing, unix, curl

我正在尝试通过使用 raw_html = urlopen(url).read() 来使用 python 提取特定的 URL。

当我检查“raw_htm”时，我发现预期的 HTML/文本已被一些文本替换，这些文本基本上告诉我我无法抓取该网站。

但是，当我使用 UNIX/python 中的“curl -O”提取相同的 url 时，页面下载得很好。

差异的原因是什么，我应该在 python 中使用什么方法，以便我可以像在 unix 中使用 curl 命令一样获取 html？

提前感谢您的任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:25:02.650

当 HTTP 客户端发出请求时，它会向服务器标识自己。在这种情况下，服务器会检查客户端是否是机器人，如果是，它会拒绝访问（尽管显然它无法检测到 Curl）。

您可以通过将用户代理字符串设置为欺骗浏览器来解决此问题。请参阅[此问题](https://stackoverflow.com/questions/802134/changing-user-agent-on-urllib2-urlopen)以了解如何使用`urllib`. 但是，如果服务器的所有者不希望您抓取它，并且它检测到您无论如何都在这样做（因为您请求页面的速度太高），您可能会发现自己被阻止访问该站点，因此联系所有者可能是比欺骗更好的主意。

# svn - svn 存储库已更改

> ID：14831353
> 
> 赞同：0
> 
> 时间：2013-02-12T11:22:13.683
> 
> 标签：svn, repository

一家外部公司将其存储库的 URL 从 切换`http://ServerA/PathA`到`http://ServerB/PathB`. 我应该能够简单地重新定位我的工作副本以通过以下方式指向新地址

```
svn switch --relocate http://ServerA/PathA http://ServerB/PathB 
```

但我收到错误消息“重新定位只能更改 URL 的存储库部分”。虽然其他一些人似乎也有这个问题（SE 上也有几十个帖子），但我没有找到任何解决方案（除了从新 URL 签出并手动复制所有更改的文件）。

当前的 debian-stable svn 是 1.6.12。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:46:21.670

因此，解决方案是一个两阶段的方法。我先切换服务器，然后切换路径。

```
svn switch --relocate http://ServerA/PathA http://ServerB/PathA
svn switch http://ServerB/PathB 
```

这实际上对我有用。

# c++ - 如何避免虚拟继承

> ID：14831360
> 
> 赞同：1
> 
> 时间：2013-02-12T11:22:26.353
> 
> 标签：c++, templates, multiple-inheritance

像这样组合我的对象（作为策略）似乎是一个很好的策略：

```
template<typename FluxType, typename SourceType>
class Model : public FluxType, public SourceType
{ };
//later in the code:
template<typename FluxType, typename SourceType>
class ConcreteModel : public Model<FluxType, SourceType>
{}; 
```

但是，`FluxType`和`SourceType`是使用相同数据的类。所以我使用了虚拟继承：

```
class ConcreteModelProps{};
class ConcreteFlux : virtual public ConcreteModelProps
{};
class ConcreteFlux2 : virtual public ConcreteModelProps
{/*sligthly different implementation*/};
class ConcreteSource : virtual public ConcreteModelProps
{};
class DefaultSource2 
{/*no need for data*/}; 
```

这样我就可以`ConcreteModel`用不同`FluxType`的`SourceType`对象来组成我的。

```
ConcreteModel<ConcreteFlux, DefaultSource2> /*or whatever*/. 
```

事实是 中定义的数据`ConcreteModelProps`与`ConcreteModel`. 在我看来，我至少做错了什么。我怎样才能使这个设计更好？最好没有虚拟继承？谢谢，dodol

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:49:42.353

好吧，这很简单：您通过继承来违反[LISKOV 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)；所以你付出代价是正确的。`ConcreteFlux``ConcreteModelProps`

现在，如果您将数据*外部*化，您可能会使用更健全的模型。

```
template <typename FluxType, typename SourceType>
class Model {
public: 
    typedef typename FluxType::DataType DataType;
}; // class Model

template <typename M>
class ConcreteModel: public M {
}; // class ConcreteModel 
```

进而：

```
class ConcreteFlux {
public:
    typedef ConcreteModelProps DataType;
};

class ConcreteSource {
public:
    typedef ConcreteModelProps DataType;
};

template <typename Data>
class DefaultSource {
    typedef Data DataType;
}; 
```

最后：

```
class ConcreteModel<Model<ConcreteFlux, ConcreteSource>> {}; 
```

当然，这意味着现在所有的方法`ConcreteFlux`和`ConcreteSource`需要`ConcreteModelProps`在它们的每个方法中传递句柄。这就是*外化*的意义所在。

# sql - 更新 SQL Server 中每个唯一记录的一个条目

> ID：14831362
> 
> 赞同：1
> 
> 时间：2013-02-12T11:22:30.893
> 
> 标签：sql, sql-server, sql-server-2005, sql-update

我有一个包含用户名和已删除状态的表。重复的用户名已删除状态组合是可能的。如果用户名有多个条目的已删除状态为 1，那么我需要将每个用户名的一个条目的已删除状态更新为 0。

考虑以下数据：

```
Name  EmpId  Deleted
--------------------
A     01     1
A     01     1
B     02     1
B     02     0
C     03     1 
```

要求：名称 A 和 C 的一项应更新为 0（已删除状态）。

```
declare @testTable table (Name varchar(10), EmpId varchar(10), Deleted tinyint)

insert into @testTable
select 'A', '01', 1 UNION ALL
select 'A', '01', 1 UNION ALL
select 'B', '02', 1 UNION ALL
select 'B', '02', 0 UNION ALL
select 'C', '03', 1

select * from @testTable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:34:46.680

尝试这个;

```
;with cte as
(
  select name, empId, deleted, 
         row_number() over (partition by name, empId order by deleted desc) rn
  from T
)
Update cte set deleted = 0
where rn <> 1 and deleted = 1 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!3/49984/8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:35:23.317

这是一种方法：

```
with toupdate as (
      select t.*,
             row_number() over (partition by name, deleted order by deleted) as seqnum
      from t
     )
update toupdate
    set deleted = 0
    where deleted = 1 and seqnum = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T11:46:16.683

[SqlFillde 演示](http://sqlfiddle.com/#!6/0e0bb/1)

```
with t1 as 
(
select *, ROW_NUMBER() OVER 
           (PARTITION BY EMPID order by deleted) as rn
       from testtable
)
update t1 set deleted=0 where rn=1 and deleted=1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T11:48:56.417

```
declare @testTable table 
(
    Name varchar(10), 
    EmpId varchar(10), 
    Deleted tinyint
)

insert into @testTable
select 'A', '01', 1 UNION ALL
select 'A', '01', 1 UNION ALL
select 'A', '01', 1 UNION ALL
select 'B', '02', 1 UNION ALL
select 'B', '02', 0 UNION ALL
select 'B', '02', 0 UNION ALL
select 'C', '03', 1

select * from @testTable
update @testTable set deleted=1
BEGIN
with t1 as 
(
select *, ROW_NUMBER() OVER 
           (PARTITION BY EMPID order by deleted) as rn
       from @testTable
)
update t1 set deleted=0 where rn=1 and deleted=1
END
select * from @testTable 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-14T12:52:42.407

```
 UPDATE A
    SET Deleted = (CASE WHEN RowNum = 1 THEN 0 ELSE Deleted END)
    FROM
    (SELECT *,ROW_NUMBER() OVER(PARTITION BY Name ORDER BY Deleted) AS RowNum
    FROM @testTable A WHERE Name NOT IN (SELECT Name FRom @testTable B Where Deleted=0)
    ) A 
```

# android - 如何像这样创建自定义 ListView？

> ID：14831363
> 
> 赞同：-1
> 
> 时间：2013-02-12T11:22:39.530
> 
> 标签：android, android-listview, customization

我想创建一个自定义列表视图，如下图所示。我正在创建一个聊天应用程序，在该应用程序中必须传递文本、图像和视频等。见下图。

![在此处输入图像描述](../Images/7c3c09b7580e04fb3587ab9df5c09cf8.png)

其中，当用户在聊天中发送/接收图像时，如果他想通过单击该图像旁边的按钮来查看该图像，如何使用该图像路径（或）URL 移动到另一个活动，以显示完整图像，以及何时图像上的用户 clickngi 必须显示快速视图。同样，如果那是视频，我必须获取该路径（或）网址才能正确播放视频。如何区分列表项取决于项目类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:31:48.850

你可以

*   实现`ScrollView`并向其中添加视图。
*   创建包含所有可能视图的适配器，然后决定隐藏或显示哪个视图
*   您可以创建适配器并动态地将视图添加到每一行（在这种情况下它太慢了）。

我的选择是 #2 - 创建包含所有可能视图的行视图，然后决定隐藏什么，在这种情况下，您可以节省时间，因为您不必每次都放大视图，甚至可以使用 ViewHolder 模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:38:58.370

如果要为音频、图像和文本消息显示不同的行，则需要有 3 行布局，然后您将决定需要从您`getView()`的`CustomAdapter`. 有两种方法[`getViewTypeCount()`和`getItemViewType()`](https://stackoverflow.com/a/5301093/593709)适配器可以帮助您回收行以显示在`ListView`.

`ListView`您将首先告诉您将使用多少个布局，`getViewTypeCount()`这告诉适配器将有多少行类型，接下来检查数据模型中该位置存在的数据类型，然后返回视图类型`getItemViewType()`，因此`getView()`将接收相关的循环视图（如果有的话）。

[这是我关于使用 9 个补丁图像的博客文章](http://adilsoomro.blogspot.com/2012/12/android-listview-with-speech-bubble.html)，它演示了发送者和接收者类型的视图，同样可以根据数据模型中特定位置的项目应用于图像和音频。

# sql-server - SQL Server 中的数据透视查询苦苦挣扎

> ID：14831370
> 
> 赞同：1
> 
> 时间：2013-02-12T11:22:55.890
> 
> 标签：sql-server, sql-server-2008, stored-procedures, pivot

我目前使用 Linq-2-Sql 来执行相当复杂的查询。然而，它的效率非常低，并导致对服务器进行多次往返。

使用一些连接，我设法将数据转换为如下格式：

```
Sensor -- Timestamp        -- Value
A      -- 12/02/2013 09:00 -- 10.4
A      -- 12/02/2013 10:00 -- 10.3
A      -- 12/02/2013 11:00 -- 10.1
B      -- 12/02/2013 09:00 -- 15.3
B      -- 12/02/2013 10:00 -- 16.4
B      -- 12/02/2013 11:00 -- 15.4 
```

我希望这样的输出

```
TimeStamp        -- SensorA -- SensorB
12/02/2013 09:00 -- 10.4    -- 15.3
12/02/2013 10:00 -- 10.3    -- 16.4
12/02/2013 11:00 -- 10.1    -- 15.4 
```

我猜我需要一个动态支点？有人可以帮我指出正确的方向吗？

**编辑**- 显然有超过 2 个传感器......理想情况下，我需要这个能够按列扩展。我什至不知道 SQL Server 是否可以做到这一点，因此不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:27:54.867

您将需要使用该[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数来转换数据。

如果您的值数量有限`Sensor`，则可以对查询进行硬编码：

```
select *
from
(
  select sensor, timestamp, value
  from yourtable
) src
pivot
(
  max(value)
  for sensor in (A, B)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/5abdbb/1)

但如果值未知，那么您将需要实现动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(Sensor) 
                    from yourtable  -- table containing Sensor values
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT timestamp, ' + @cols + ' from 
             (
                select sensor, timestamp, value
                from yourtable
            ) x
            pivot 
            (
                max(value)
                for sensor in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/5abdbb/3)

两者都会给出结果：

```
|           TIMESTAMP |    A |    B |
-------------------------------------
| 2013-12-02 09:00:00 | 10.4 | 15.3 |
| 2013-12-02 10:00:00 | 10.3 | 16.4 |
| 2013-12-02 11:00:00 | 10.1 | 15.4 | 
```

*请注意，您将用`yourtable`当前查询替换 。*

编辑#1，如果要按日期过滤，可以使用以下动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @startdate datetime,
    @enddate datetime

set @startdate = '2013-12-01'
set @enddate = '2013-12-03'

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(Sensor) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT timestamp, ' + @cols + ' from 
             (
                select sensor, timestamp, value
                from yourtable
                where timestamp >= '''+convert(varchar(10), @startdate, 120)+'''
                  and timestamp <= '''+convert(varchar(10), @enddate, 120)+'''
            ) x
            pivot 
            (
                max(value)
                for sensor in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/5abdbb/9)

# c# - 单声道 2.10.8.1 上的扩展方法

> ID：14831371
> 
> 赞同：1
> 
> 时间：2013-02-12T11:23:02.547
> 
> 标签：c#, mono, extension-methods

我正在使用 Visual Studio 开发一些软件，我的目标是 CLR 的 v4.5，这个软件也在 Mono v2.10.8.1 上运行

一切都很好，直到我尝试使用扩展方法，此时我得到以下异常 System.TypeLoadException: Could not load type 'System.Runtime.CompilerServices.ExtensionAttribute' from assembly ......

现在，如果使用 Visual Studio 的 CLR v4.0 目标并在 Mono 上运行一切正常，我注意到 System.Runtime.CompilerServices.ExtensionAttribute 类已从 CLR v4.0 中的 System.Core.dll 移动到v4.5 中的 mscorlib.dll

当我使用 --verify 元数据运行他的 pedump 工具时，我得到的一个程序集上的代码

程序集 myassembly.dll 中缺少方法 .ctor，类型 System.Runtime.CompilerServices.ExtensionAttribute 错误：无效的 CustomAttribute 内容行 1 值字段 0x00000109 错误：CustomAttribute：无效的构造函数错误计数：2

有没有人有类似的问题？有什么决议吗？

提前致谢

拍

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-07T00:36:25.317

我今天有同样的问题。通过将（Debian Wheezy）服务器升级到最新的 Mono 解决；登台服务器是 Ubuntu Trusty，它们没有出现这个问题。

所以这在 Mono 3.2.8+（这是 Ubuntu Trusty 的版本）中得到了修复。

# ios - iOS 的 Dropbox 集成

> ID：14831372
> 
> 赞同：3
> 
> 时间：2013-02-12T11:23:02.670
> 
> 标签：ios, objective-c, xcode, dropbox-api

是否有任何 API 方法可以让我深入到 dropbox 的所有文件夹并查找特定类型的文件，例如 pdf、mp3 或 txt？或者是否有任何搜索 API，我可以在其中传递我的搜索参数并要求 API 在 Dropbox 的每个文件夹中查找它。我的任务是从 Dropbox 加载我的应用程序中的所有歌曲，使用以下方法真的很痛苦

```
[[self restClient] loadMetadata:@"/"]; 
```

然后继续检查元数据是目录还是文件，如果是文件，则查找其扩展名，如果是目录，则再次挖掘它，它可以进一步包含更多目录。我建议我的客户为我们的应用程序创建一个文件夹，用户将在其中放置歌曲，但他已经拒绝并希望访问整个保管箱并过滤其中的所有音乐文件。在告诉我的客户不可能之前，我只是想确保它不可能。如果可能的话，请对程序进行一些说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:49:30.890

您可以直接使用 Dropbox Core API 进行搜索：

[https://www.dropbox.com/developers/reference/api#search](https://www.dropbox.com/developers/reference/api#search)

Dropbox iOS Sync SDK 不支持 Dropbox Core API 的所有功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T14:26:30.557

[https://github.com/AbbieVys/WrapperDropBox](https://github.com/AbbieVys/WrapperDropBox)

用于在 IOS 中集成 DropBox 的有用包装类

# android - 如何使另一个活动表现得像家庭活动（第一个应用程序启动活动）

> ID：14831375
> 
> 赞同：0
> 
> 时间：2013-02-12T11:23:27.257
> 
> 标签：android, android-intent, android-activity, exit

我的应用程序中有 4 个活动。我希望后退按钮在前三个活动中正常工作（即在后退按钮按下时转到上一个屏幕）；除了最后一个。

我想要这样，当我在第四个活动（屏幕）上按下后退按钮时，用户应该转到第二个活动（第二个屏幕）。但是当用户从第二个屏幕转到第三个屏幕时，该 Activity 上的内容应该是相同的。

之后，当我现在在第二个屏幕上按下后退按钮时，我应该正常退出应用程序，即没有 system.exit() 等，就像在第一个屏幕或第一个活动上按下后退按钮后通常存在应用程序一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:39:15.780

对于第三个活动，在清单文件中执行此操作：android:noHistory="true"

并在第四个活动中执行此操作：

```
Button backButton = (Button)this.findViewById(R.id.back);
backButton.setOnClickListener(new OnClickListener() {
  @Override
  public void onClick(View v) {
    finish();
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:27:17.847

试试这个：

```
Intent intent = new Intent(this, Abc.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

# jquery - jQuery ajax 过滤表单和 URL 哈希

> ID：14831376
> 
> 赞同：1
> 
> 时间：2013-02-12T11:23:28.367
> 
> 标签：jquery, ajax

我有以下代码：

```
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='kleuren' value='Blauw' data-taxonomy='kleuren' data-category='Blauw'>  Blauw (4) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='kleuren' value='Rood' data-taxonomy='kleuren' data-category='Rood'>  Rood (2) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='kleuren' value='Wit' data-taxonomy='kleuren' data-category='Wit'>  Wit (2) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='kleuren' value='Zwart' data-taxonomy='kleuren' data-category='Zwart'>  Zwart (1) </label> 
<label>provincies</label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='provincies' value='Drenthe' data-taxonomy='provincies' data-category='Drenthe'>  Drenthe (6) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='provincies' value='Flevoland' data-taxonomy='provincies' data-category='Flevoland'>  Flevoland (1) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='provincies' value='Friesland' data-taxonomy='provincies' data-category='Friesland'>  Friesland (6) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='provincies' value='Groningen' data-taxonomy='provincies' data-category='Groningen'>  Groningen (5) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='provincies' value='Limburg' data-taxonomy='provincies' data-category='Limburg'>  Limburg (2) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='provincies' value='Noord-Brabant' data-taxonomy='provincies' data-category='Noord-Brabant'>  Noord-Brabant (2) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='provincies' value='Noord-Holland' data-taxonomy='provincies' data-category='Noord-Holland'>  Noord-Holland (1) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='provincies' value='Overijssel' data-taxonomy='provincies' data-category='Overijssel'>  Overijssel (1) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='provincies' value='Utrecht' data-taxonomy='provincies' data-category='Utrecht'>  Utrecht (1) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='provincies' value='Zeeland' data-taxonomy='provincies' data-category='Zeeland'>  Zeeland (1) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='provincies' value='Zuid-Holland' data-taxonomy='provincies' data-category='Zuid-Holland'>  Zuid-Holland (0) </label> 
<label>stijlen</label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='stijlen' value='Amerikaans' data-taxonomy='stijlen' data-category='Amerikaans'>  Amerikaans (0) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='stijlen' value='Cabriolet' data-taxonomy='stijlen' data-category='Cabriolet'>  Cabriolet (0) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='stijlen' value='Duits' data-taxonomy='stijlen' data-category='Duits'>  Duits (1) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='stijlen' value='Engels' data-taxonomy='stijlen' data-category='Engels'>  Engels (8) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='stijlen' value='Frans' data-taxonomy='stijlen' data-category='Frans'>  Frans (0) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='stijlen' value='Italiaans' data-taxonomy='stijlen' data-category='Italiaans'>  Italiaans (0) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='stijlen' value='Klassiek' data-taxonomy='stijlen' data-category='Klassiek'>  Klassiek (0) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='stijlen' value='Luxe' data-taxonomy='stijlen' data-category='Luxe'>  Luxe (0) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='stijlen' value='Modern' data-taxonomy='stijlen' data-category='Modern'>  Modern (0) </label> 
<label>merken</label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='merken' value='Austin' data-taxonomy='merken' data-category='Austin'>  Austin (7) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='merken' value='Bentley' data-taxonomy='merken' data-category='Bentley'>  Bentley (1) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='merken' value='BMW' data-taxonomy='merken' data-category='BMW'>  BMW (0) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='merken' value='Cadillac' data-taxonomy='merken' data-category='Cadillac'>  Cadillac (1) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='merken' value='Chevrolet' data-taxonomy='merken' data-category='Chevrolet'>  Chevrolet (0) </label> 
<label class='checkbox'><input type='checkbox'  class='custom_filter' name='merken' value='Chrysler' data-taxonomy='merken' data-category='Chrysler'>  Chrysler (0) </label> 
```

这表示用于将过滤器应用于数据库查询的表单。单击每个过滤器（设置复选框）后，必须刷新 URL HASH，如下所示：

```
 #provincies=Drehte,Noord-Brabant&kleuren=Wit,Rood 
```

如果选中了选定的省份和颜色，这是一个示例。

我试过做

```
 var filters = jQuery("#CUSTOM_AJAX_FILTERS").serializeArray(); 
```

其中 filters var 将从表单中获取所有数据，作为数组，但它始终返回一个空数组。我还尝试获取数据分类和数据类别（其中分类 = 类别；& 类别 = 过滤器）并使用 window.location.hash 获取 url 哈希并将所有内容拆分，附加新数据或删除等。但这不是一个好的选择。
请让我知道是否有任何其他解决方案可以使用 ajax / 使用选中的复选框轻松构建 url 哈希，而无需刷新页面。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:29:51.560

尝试 jquery`map`和`join`.

```
var CUSTOM_AJAX_FILTERS = $("input:checkbox:checked.custom_filter").map(function(){
    return $(this).val();
}).get().join(",");
```

# ruby-on-rails - Neography 和 Rails

> ID：14831384
> 
> 赞同：2
> 
> 时间：2013-02-12T11:23:46.883
> 
> 标签：ruby-on-rails, neography

我正在尝试将 Neography 与 Rails 3 一起使用，但不太明白在哪里指定数据库连接、模型验证 (validates_presence_of) 等。Neography 可用的示例没有适用于 Rails。将不胜感激任何指针。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T05:52:18.283

我不认为Neography 将其与rails 紧密集成，或者具有ActiveRecord 映射器。[您可以在他们的 wiki](https://github.com/maxdemarzi/neography/wiki/Configuration-and-initialization)上找到配置信息：他们没有明确说明，但您应该将该配置复制到`initializers/neography.rb`.

关于模型，特别是关于 Neography gem，您可能最好将数据存储在普通的 Postgres/Mysql/sqlite 中，并在模型中使用 after_create、after_update、after_delete 挂钩，然后保持 neo4j 数据库同步。如果您这样做，您实际上只需要存储 Neo4j 中所需的最少数据量（例如对象 id 以及您主动用于节点和顶点图操作的数据）。然后，当您查询 neo4j 时，您将获取生成的对象 ID，并通过查询您的 SQL ActiveRecord 模型来“补充”它们

另一种方法是使用[Neo4j gem](https://github.com/andreasronge/neo4j)本身，它提供 ActiveRecord 映射器和更干净的 api。但我假设您没有这样做是因为环境限制（例如，您想在 Heroku 上运行并使用 Neo4j 插件）

# jmeter - 在jmeter中实现文档上传

> ID：14831388
> 
> 赞同：0
> 
> 时间：2013-02-12T11:23:55.663
> 
> 标签：jmeter

我必须测试我的应用程序的上传文档功能。
请求类型为 http 请求。
Jmeter 没有记录上传功能。

如何在 jmeter 上记录文档上传采样器，然后同时对其进行参数化以从不同登录名上传文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:55:40.123

为什么不先搜索带有 jmeter 标记的问题？
之前问过很多次。

这应该适合您：[JMeter - 文件上传和文件下载方案](https://stackoverflow.com/a/8793096/993246)。

# ruby - 为什么 AREL 将 OR IN (NULL) 添加到 BETWEEN 条件？

> ID：14831389
> 
> 赞同：3
> 
> 时间：2013-02-12T11:23:57.077
> 
> 标签：ruby, ruby-on-rails-3, activerecord, arel

我在模型中有一个范围：

```
scope :daily, lambda {|day| where :post_time => 
  [day.beginning_of_day() .. day.end_of_day()] } 
```

`:post_time`在数据库中声明不可为空，但 AREL 坚持在`IN (NULL)`生成的 SQL 中添加一个虚假的：

```
SELECT `<table>`.* FROM `<table>` 
WHERE (`<table>`.`post_time` 
     BETWEEN '2013-02-05 00:00:00' AND '2013-02-05 23:59:59' 
     OR `<table>`.`post_time` IN (NULL)) 
```

我怎样才能阻止它这样做？显然我可以再添加一个条件`not_eq(nil)`，`:post_time != nil`或类似的，但我的问题是*为什么*AREL 会这样做，以及如何在没有额外条件否定它的情况下阻止它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:19:36.800

看起来你通过传入一个范围数组来混淆 arel（尽管我不确定为什么这会增加额外的子句）。

```
scope :daily, lambda {|day| where :post_time => 
  (day.beginning_of_day() .. day.end_of_day()) } 
```

应该可以。

# c# - 带有远程数据和 asp.net 的 jQuery select2

> ID：14831392
> 
> 赞同：2
> 
> 时间：2013-02-12T11:24:00.253
> 
> 标签：c#, jquery, asp.net, jsonp, generic-handler

我正在使用 select2 库来替换选择框。我重新排列了您可以在[Select2 库](http://ivaynberg.github.com/select2/)页面上找到的示例 7（使用 id 等向下滚动 `$("#e7").select2`...）。我制作了自己的通用处理程序，它返回序列化的 json 数据：

GetData.asxh 视图：公共类 GetData：IHttpHandler { public bool IsReusable { get { return false; } }

```
 public class RecipesList
    {
        public int total { get; set; }
        public List<TopRecipeTable> recipes { get; set; }

        public RecipesList() { }

        public RecipesList(int total, List<TopRecipeTable> recipes)
        {
            this.total = total;
            this.recipes = recipes;
        }
    }

    private string GenerateJsonSerializedObject(int languageId, string orderBy)
    {            
        RecipesList recipeList = new RecipesList(15, DBDataBase.GetTopRecipesByNumberOfRecipes(languageId, 15));
        return new JavaScriptSerializer().Serialize(recipeList);
    }

    public void ProcessRequest(HttpContext context)
    {
        int languageId;            
        bool languageParsed = int.TryParse(context.Request["languageId"], out languageId);
        string orderBy = (string)context.Request["orderBy"];

        if (languageParsed && orderBy != string.Empty)
        {enter code here
            context.Response.ContentType = "application/json";
            var jsonValue = GenerateJsonSerializedObject(languageId, orderBy);
            context.Response.Write(jsonValue);
        }
    } 
```

这个通用处理程序返回正确的 json 格式（我用[这个 URL](http://jsonformatter.curiousconcept.com/)检查了它）。我的结果（json）也与上述页面上的示例相同。但是在这个 jquery 不再触发之后。

我的脚本：

```
$(document).ready(function () {
        $("#e8").select2({
            placeholder: "Search for a recipe",
            //minimumInputLength: 1,
            ajax: {                               
                url: "/Handlers/GetData.ashx",
                dataType: 'jsonp',
                data: function (term, page) {
                    return {
                        languageId: 1,
                        orderBy: "TA"
                    };
                },
                results: function (data, page) {
                    alert(data.total);
                    var more = (page * 10) < data.total; // whether or not there are more results available

                    // notice we return the value of more so Select2 knows if more results can be loaded
                    return { results: data.recipes, more: more };
                }
            },
            formatResult: movieFormatResult, // omitted for brevity, see the source of this page
            formatSelection: movieFormatSelection, // omitted for brevity, see the source of this page
            dropdownCssClass: "bigdrop", // apply css that makes the dropdown taller
            escapeMarkup: function (m) { return m; } // we do not want to escape markup since we are displaying html in results
        });
    }); 
```

我尝试`alert(data.total)`在原始示例中编写相同的内容，它有效，但在我的版本中无效。所以我有正确的 json 格式，jquery 调用我的通用处理程序并收到参数 languageId ...并且还返回正确的 json 格式，但比什么都没有。我不知道我是否在这里遗漏了什么，因为我确信这个东西也可以与通用处理程序一起使用。我希望我就我的问题提供了足够的信息。

```
I can also add my result in jquery .ajax error handler : 
xhr.status = 200
ajaxOptions = parsererror
horwnError = SyntaxError : invalid label
If this is any helpful information 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T02:17:46.803

这个问题很老了，所以很确定你现在有一个解决方案......但是：

删除所有这些功能：

formatResult: movieFormatResult formatSelection: movieFormatSelection dropdownCssClass: ... escapeMarkup:....

您没有提供这些功能来格式化您的数据，是吗？仅当您要自定义项目下拉列表时，才需要所有这些。

您正在返回 data.recipes - 它需要是 {Text:"", Id:""} 的数组，或者您需要从那里返回的内容构建它。

首先，让它使用一个非常基本的列表和非常基本的数据......然后从那里开始。

此外，当您开始工作时，请尝试使用 WebApi 或 ServiceStack 来处理您的数据，而不是使用 IHttpHandler。

# fortran90 - 从 Mac OS 到 XP 的 Fortran 输入文件

> ID：14831393
> 
> 赞同：1
> 
> 时间：2013-02-12T11:24:04.733
> 
> 标签：fortran90

我最近得到了一些在 Mac OS 上成功运行的 Fortran 代码。这段代码连同输入文件后来被发送给我进行编译。我精确地使用了相同的代码和相同的输入文件，但出现了“超出数组范围”的错误。我在 Windows XP 上使用 CVF 6.6。我想知道以下几点：

1.  这是编译器还是操作系统问题？
2.  我应该安排一个 Mac OS 来编译它们吗？
3.  在互联网上浏览了这么多之后，我认为明智的做法是让我的数据“无格式”。但是当我的数据是时间序列时，我不知道如何做到这一点，时间在一列，电压在一列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:34:32.543

错误消息`array bounds exceeded`总是（我认为）表明您的代码已尝试访问数组边界之外的数组元素，例如具有 24 个元素的数组中的元素 25。*这只能在运行时发生，并且只有在编译时为数组边界检查*设置了编译器选项时，您的编译器/运行时才会发现它；您的编译器文档会告诉您这些选项是什么。

错误消息应该附带一些更多信息，告诉您错误发生在程序中的哪个位置以及越界数组访问的索引。

鉴于您的源代码和输入数据是相同的，这怎么可能发生？由于您已经在 2 个不同的平台上编译了该程序，因此您的编译不可能完全相同，因此完全有可能在您的 Mac 和 Windows PC 上关闭了数组边界检查。

尽管访问了越界的数组元素，Fortran 程序显然可以成功执行。如果 24 中的数组元素 25 的内存地址包含一个有意义的值并且该地址在您的程序空间内，则计算可能会继续。它也可能是无用的，但你可以去很多年才能发现它。

我建议你回到 Mac，用数组边界检查重新编译，然后再次运行，看看会发生什么。

读取文件的例程也可能在 XP 和 Mac 上找到不同数量的值；我怀疑这可能是由不同的行结束字符引起的，即使输入文件末尾是否有换行符也是如此。也检查一下。

# stata - “指定的变量太多”错误，预测遵循 logit

> ID：14831395
> 
> 赞同：1
> 
> 时间：2013-02-12T11:24:06.113
> 
> 标签：stata, predict

我有一组跨越多个国家的数据（公司年）。对于每个国家，我`logit`使用前五年估计一个模型，然后我使用这个模型来估计`predict`随后几年的概率。我`foreach`遍历国家并`forvalues`遍历随后的几年。

前几个国家运行良好（估计和预测），但第五个国家的第一个样本外预测失败：

```
Country: United Kingdom
Year: 1994
too many variables specified
r(103); 
```

该模型适合并且 1994 年有足够的数据来预测概率。我的`predict`电话是：

```
predict temp_`c'`y' ///
    if (country == "`c'") ///
        & (fyear == `y'), ///
    pr 
```

您有什么想法可能导致此错误吗？我很困惑，因为`logit`并且`predict`在同一循环中的其他地方工作。谢谢！

FWIW，这是 .do 文件。

```
* generate table 5 from Denis and Osobov (2008 JFE)
preserve

* loop to estimate model by country
levelsof country, local(countries)
foreach c of local countries {
    display "Country: `c'"
    summarize fyear if (country == "`c'"), meanonly
    local est_low = `r(min)'
    local est_high = `=`r(min)' + 4'
    local pred_low = `=`r(min)' + 5'
    local pred_high = `r(max)'
    logit payer size v_a_tr e_a_tr re_be_tr ///
        if (country == "`c'") ///
            & inrange(fyear, `est_low', `est_high')
    forvalues y = `pred_low'/`pred_high' {
        display "Country: `c'"
        display "Year: `y'"
        predict temp_`c'`y' ///
            if (country == "`c'") ///
                & (fyear == `y'), ///
            pr
    }
}

* combine fitted values and generate delta
egen payer_expected = rowfirst(temp_*)
drop temp_*
generate delta = payer - payer_expected

* table
table country fyear, ///
    contents(count payer mean payer mean payer_expected)

*
restore 
```

* * *

**更新**：如果 I `drop (country == "United Kingdom")`，那么同样的问题会转移到美国（面板中的下一个和最后一个国家）。如果我，`drop inlist(country, "United Kingdom", "United States")`那么问题就会消失并且 .do 文件会运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:58:53.547

您正在使用国家名称作为`predict`正在创建的新变量名称的一部分。但是，当您到达“英国”时，您的线路

```
predict temp_`c'`y' 
```

意味着类似的东西

```
predict temp_United Kingdom1812 
```

但 Stata 将其视为两个变量名，其中只允许使用一个。

否则，您会被一条简单的规则所困扰：Stata 不允许在变量名中使用空格。

显然，同样的问题会与“美国”相提并论。

最简单的软糖是更改值，使空格变为下划线“_”。Stata 可以使用包含下划线的变量名。那可能是

```
gen country2 = subinstr(country, " ", "_", .) 
```

然后是一个循环`country2`。

请注意所有未了解历史细节的人。1812年是英国军队烧毁白宫的一年。随意替换“1776”或其他选择的日期。

（顺便说一句，感谢一个清晰的问题！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:08:02.173

这是解决您的问题的另一种方法。初始化变量以保存预测值。然后，当您遍历可能性时，`replace`它会逐块地处理每组预测。这避免了生成一堆您不想长期保留的具有不同名称的变量的整个业务。

```
* generate table 5 from Denis and Osobov (2008 JFE)

preserve
gen payer_expected = . 

* loop to estimate model by country
levelsof country, local(countries)
foreach c of local countries {
    display "Country: `c'"
    summarize fyear if (country == "`c'"), meanonly
    local est_low = `r(min)'
    local est_high = `=`r(min)' + 4'
    local pred_low = `=`r(min)' + 5'
    local pred_high = `r(max)'
    logit payer size v_a_tr e_a_tr re_be_tr ///
       if (country == "`c'") ///
       & inrange(fyear, `est_low', `est_high')
    forvalues y = `pred_low'/`pred_high' {
        display "Country: `c'"
        display "Year: `y'"
        predict temp ///
            if (country == "`c'") ///
            & (fyear == `y'), pr
        quietly replace payer_expected = temp if temp < . 
        drop temp 
   }
}

generate delta = payer - payer_expected

* table
table country fyear, ///
     contents(count payer mean payer mean payer_expected)

*
restore 
```

# node.js - Mongodb 不是 $near

> ID：14831402
> 
> 赞同：1
> 
> 时间：2013-02-12T11:24:27.977
> 
> 标签：node.js, mongodb, geolocation

假设我在 mongoDB 中有一个带有 geoLocation 索引字段（坐标）的集合。我知道我可以查询我所在位置附近的记录，例如

`MySchema.find({coordinates: {$near: [100,100], $maxDistance: 500}, callback);`

但是，如果我想让这些记录远离我的位置（在位置周围的圆圈之外）怎么办？可能吗？我曾尝试使用`$not`，但它返回空结果，但我知道我附近有数百条记录。

我知道有这个选项可以获取附近的记录，然后选择那些`{_id: {$not: {$in: nearby_ids_array}`。但这是唯一的方法，还是我错过了什么？？？

# javascript - 关闭 Lightbox 后模态窗口覆盖仍然存在

> ID：14831404
> 
> 赞同：4
> 
> 时间：2013-02-12T11:24:33.103
> 
> 标签：javascript, html, popup, hide

我有一个有弹出窗口的主页（请参见我添加的图像中的窗口编号 1）。在此弹出窗口中，有一个 按钮`skip`。如果用户按下`skip`按钮，则弹出窗口消失（然后，用户看到主页）（窗口号 3）。**但是**如果用户没有按下弹出窗口，而是主窗口，主窗口的颜色变为灰色（窗口编号 2）。如果我按主窗口大约 3 次，则颜色将变为白色（窗口编号 3）。

![在此处输入图像描述](../Images/b1c8aa0312e3ac4d0f8fc28553d406ae.png)

我想如果用户按下主窗口而不是弹出窗口，我必须隐藏我的弹出窗口。

我该如何解决？

我的弹出窗口被称为：`class="popup_window"`。和按钮被称为：`X`和。`SKIP``btn_x``btn_skip`

任何帮助表示赞赏！

**更新**这是我的welcome_msg java脚本代码：

```
// welcome message
$("#welcome_dialog").lightbox_me({
 centered: true,
 onLoad: function() {
    //alert("Page is loaded");
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:56:31.480

我刚刚查看了 lightbox_me 插件网站，并在主页上列出了您可以使用的可能选项。您需要在代码中添加以下内容：“closeClick : true”。

因此，您在上面发布的代码将如下所示：

```
$("#welcome_dialog").lightbox_me({
  centered: true,
  closeClick: true,
  onLoad: function() {
  //alert("Page is loaded");
 }
 }); 
```

如网站所述：

```
CloseClick  true    Whether or not to close the lightbox with the user clicks the overlay. 
```

资料来源：[http ://buckwilson.me/lightboxme/](http://buckwilson.me/lightboxme/)

# axapta - 格式化在 AX 2012 中的字符串类型字段中写入的文本？

> ID：14831406
> 
> 赞同：1
> 
> 时间：2013-02-12T11:24:37.727
> 
> 标签：axapta, x++, dynamics-ax-2012

在 AX 2012 中是否可以根据鼠标选择在 AX 2012 表或表单中的字符串类型字段中找到写入的特定单词/单词。例如，我在名为 test 的表中有一个名为 Memo 的字段。在那个领域，我写了一段文字：

您好，我们需要确认您的<mobileNumber>与您的账号绑定成功。<帐户>。

现在，如果我打开一个表单并使用鼠标选择（突出显示）在文本字段中写入的文本**mobileNumber**。是否可以对所选单词（手机号码）进行格式化。我需要澄清一下，格式化是指修改该文本的显示样式（例如，粗体、斜体、下划线等）

或者，我可以添加一个包含所有可用格式选项的文本字段，如下图所示。 ![在此处输入图像描述](../Images/6836ddf5b038ce3e3a06333ba8ab61dc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:06:46.193

我研究了很多，实际上找到了解决方案。是的，我们不能直接在 AX2012 的表单中添加 RichTextBox 作为控件，但可以使用名为的类来实现

**“SysInetHTML 编辑器”**

只需运行上面的类，就可以看到魔法 ![在此处输入图像描述](../Images/30232123c02e558e0b996c99a2c5ee30.png)

在 AX 2012 中它是一个单独的表单，要添加richtextbox 和控件，我们可以使用一些在 SysInetHTMLEditor 类中编写的方法。

在以下链接中，Microsoft 已将 Richtext 包含为 :FormControlType 系统枚举 [AX 2012] [http://msdn.microsoft.com/en-us/library/formcontroltype.aspx](http://msdn.microsoft.com/en-us/library/formcontroltype.aspx)

我敢肯定，Microsoft 将在 Ax2012 的未来更新中包含 Richtextbox 作为控件类型。

# youtube - FancyBox2 官方演示 - YouTube 首次在 IE9 中未加载

> ID：14831409
> 
> 赞同：1
> 
> 时间：2013-02-12T11:24:44.097
> 
> 标签：youtube, internet-explorer-9, fancybox-2

我注意到 FancyBox2 Demo 在 IE9 中的特定行为，也许有人能说出问题的原因或解决方法。我的意思是 youtube 链接，它使用了 fancybox-media 类。[当我在http://fancyapps.com/fancybox/#examples](http://fancyapps.com/fancybox/#examples)上使用链接“独立版本”打开演示时，youtube 链接正常工作并且带有电影的窗口会立即打开，但是当我清理浏览历史记录然后通过粘贴[http打开站点时://fancyapps.com/fancybox/demo/](http://fancyapps.com/fancybox/demo/)进入 URL 栏，youtube 窗口第一次没有打开，下次成功。它使在任何不同站点中使用的示例源代码都会遇到相同的问题。也许解释很简单，但我对 jquery 不是很熟悉，任何提示都会很有用。

# java - 查询性能不佳，选择少数字段比选择很多字段慢 10 倍

> ID：14831410
> 
> 赞同：2
> 
> 时间：2013-02-12T11:24:44.683
> 
> 标签：java, sql, sql-server, performance, hibernate

我的团队在使用 SQL Server 数据库时不断遇到性能问题。首先，该应用程序是用 Java 编写的并利用了 Hibernate。我们有一些数据存储在数据库中，我们可以轻松顺利地检索这些数据，以防我们想要选择完整的对象（例如：给定表中的所有或大部分字段）。

这很好用，但是当我们执行一个较小的查询时，它会慢 10 倍。最明显的部分可能是我们只检索一小部分字段（在此示例中：3）并使用其中带有 like 的 WHERE 子句（这在检索 84 个字段时似乎不是问题，但是当检索 3 个字段）。

Hibernate 完成简单查询大约需要 7 秒，而大查询大约需要 3.4 秒。在 DbVisualizer 中运行普通 SQL 时，复杂查询需要 0.02 秒的查询时间和 0.7 秒的数据传输时间。在 DbVisualizer 中运行的简单查询需要 0.2 秒（慢 10 倍），然后在大约 0.36 秒内传输（因此，要传输的数据更少）。有人可能会争辩说，这仍然比使用大查询更快，但它似乎对 Hibernate 性能有某种影响。

我开玩笑说“只需添加其他字段，直到该死的东西快速运行！”，但这并没有削减它，因为要选择的字段和 where 子句都将是用户配置的.

84 字段查询如下所示：

```
select
          locateable0_.Un_ID as Un1_37_,
          locateable0_.active as active37_,
          locateable0_.code as code37_,
          locateable0_.name as name37_,
          locateable0_.ClientID as ClientID37_,
          locateable0_.equipmentGroup as equipmen7_37_,
          locateable0_.SupplierContractID as Supplier8_37_,
          locateable0_.orderingCode as ordering9_37_,
          locateable0_.expirationDate as expirat10_37_,
          locateable0_.purchaseDate as purchas11_37_,
          locateable0_.warrantyExpirationAlert as warrant12_37_,
          locateable0_.price as price37_,
          locateable0_.priceUnit as priceUnit37_,
          locateable0_.VatID as VatID37_,
          locateable0_.WEAlertJobID as WEAlert16_37_,
          locateable0_.barcode as barcode37_,
          locateable0_.erpCode as erpCode37_,
          locateable0_.description as descrip19_37_,
          locateable0_.innerWorksheet as innerWo20_37_,
          locateable0_.outerWorksheet as outerWo21_37_,
          locateable0_.ContractorCompanyID as Contrac22_37_,
          locateable0_.ContractorPersonID as Contrac23_37_,
          locateable0_.ManufacturerCompanyID as Manufac24_37_,
          locateable0_.ManufacturerPersonID as Manufac25_37_,
          locateable0_.ServicerCompanyID as Service26_37_,
          locateable0_.ServicerPersonID as Service27_37_,
          locateable0_.BudgetID as BudgetID37_,
          locateable0_.costObjectId as costObj29_37_,
          locateable0_.costKindId as costKindId37_,
          locateable0_.TemplateId as TemplateId37_,
          locateable0_.openingDate as opening32_37_,
          locateable0_.mainClassId as mainCla33_37_,
          locateable0_.pictureId as pictureId37_,
          locateable0_.productType as product35_37_,
          locateable0_.propertiesId as propert36_37_,
          locateable0_.ParentID as ParentID37_,
          locateable0_.accessDomainId as accessD38_37_,
          locateable0_.orderStateType as orderSt39_37_,
          locateable0_.orderEventId as orderEv40_37_,
          locateable0_.locationId as locationId37_,
          locateable0_.siteId as siteId37_,
          locateable0_.buildingId as buildingId37_,
          locateable0_.storeyId as storeyId37_,
          locateable0_.roomId as roomId37_,
          locateable0_.cadObjectId as cadObje46_37_,
          locateable0_.geoLattitude as geoLatt47_37_,
          locateable0_.geoLongitude as geoLong48_37_,
          locateable0_.ratingId as ratingId37_,
          locateable0_.grossArea as grossArea37_,
          locateable0_.grossVolume as grossVo51_37_,
          locateable0_1_.floor as floor99_,
          locateable0_2_.calculatedArea as calculat2_100_,
          locateable0_2_.nominalArea as nominalA3_100_,
          locateable0_2_.categoryId as categoryId100_,
          locateable0_2_.wingId as wingId100_,
          locateable0_2_.areaUnitId as areaUnitId100_,
          locateable0_2_.cleaningArea as cleaning7_100_,
          locateable0_2_.rentableArea as rentable8_100_,
          locateable0_2_.windowSurface as windowSu9_100_,
          locateable0_2_.bottomSurface as bottomS10_100_,
          locateable0_2_.topSurface as topSurface100_,
          locateable0_2_.wallSurface as wallSur12_100_,
          locateable0_2_.floorType as floorType100_,
          locateable0_3_.areaSize as areaSize101_,
          locateable0_3_.areaType as areaType101_,
          locateable0_3_.flooring as flooring101_,
          locateable0_4_.workplaceNumber as workplac2_102_,
          locateable0_4_.workplaceType as workplac3_102_,
          locateable0_4_.usingCompanyId as usingCom4_102_,
          locateable0_5_.quantity as quantity190_,
          locateable0_5_.quantityUnitId as quantity3_190_,
          locateable0_6_.inventoryNumber as inventor2_202_,
          locateable0_7_.area as area233_,
          locateable0_7_.meterValue as meterValue233_,
          locateable0_7_.calibrationFactor as calibrat4_233_,
          locateable0_7_.areaDomainId as areaDoma5_233_,
          locateable0_7_.degreeDayId as degreeDa6_233_,
          locateable0_7_.virtualType as virtualT7_233_,
          locateable0_7_.differenceFactor as differen8_233_,
          locateable0_7_.differenceMasterId as differen9_233_,
          locateable0_7_.virtual as virtual233_,
          locateable0_7_.startDate as startDate233_,
          locateable0_7_.scheduleId as scheduleId233_,
          locateable0_.discriminator as discrimi2_37_
      from
          MNT_Equipments locateable0_
      left outer join
          Storey locateable0_1_
              on locateable0_.Un_ID=locateable0_1_.id
      left outer join
          Room locateable0_2_
              on locateable0_.Un_ID=locateable0_2_.id
      left outer join
          RoomArea locateable0_3_
              on locateable0_.Un_ID=locateable0_3_.id
      left outer join
          Workplace locateable0_4_
              on locateable0_.Un_ID=locateable0_4_.id
      left outer join
          INV_Product locateable0_5_
              on locateable0_.Un_ID=locateable0_5_.id
      left outer join
          MNT_FacilityProduct locateable0_6_
              on locateable0_.Un_ID=locateable0_6_.id
      left outer join
          EN_ResourceMeter locateable0_7_
              on locateable0_.Un_ID=locateable0_7_.id
      left outer join
          DynamicProperties dynamicpro1_
              on locateable0_.propertiesId=dynamicpro1_.id
      left outer join
          KEYWORDSEARCH tags2_
              on dynamicpro1_.id=tags2_.dynamicPropertiesId
      left outer join
          MNT_Clients client3_
              on locateable0_.ClientID=client3_.Un_ID
      where
          (
              locateable0_.accessDomainId is null
              or locateable0_.accessDomainId in       (
                  select
                      uad.domainId
                  from
                      PERM_UserAccessDomain uad
                  join
                      Users u
                          on uad.userId = u.Un_ID
                  where
                      u.UserName = 'wsc'
                      and uad.functionId = 2000
              )
          )
          and locateable0_.discriminator in (
              '17000', '6010', '6020', '6030', '6035', '6040', '6060', '6070', '6080', '18000', '5010', '6000', '6100', '5000', '9000', '14000', '19000'
          )
          and (
              client3_.Un_ID in (
           1012, 1016, 1013, 1014
              )
          )
          and (
              locateable0_.productType not in  (
   18000, 19000
              )
          )
          and locateable0_.active=1
          and locateable0_.productType<>6080
          and (
              upper(tags2_.keyword) like 'B%'
          ) 
```

慢速 3-field-query 如下所示：

```
select
       locateable0_.Un_ID as col_0_0_,
       locateable0_.code as col_1_0_,
       locateable0_.name as col_2_0_
   from
       MNT_Equipments locateable0_
   left outer join
       DynamicProperties dynamicpro1_
           on locateable0_.propertiesId=dynamicpro1_.id
   left outer join
       KEYWORDSEARCH tags2_
           on dynamicpro1_.id=tags2_.dynamicPropertiesId
   left outer join
       MNT_Clients client3_
           on locateable0_.ClientID=client3_.Un_ID
   where
       (
           locateable0_.accessDomainId is null
           or locateable0_.accessDomainId in       (
               select
                   uad.domainId
               from
                   PERM_UserAccessDomain uad
               join
                   Users u
                       on uad.userId = u.Un_ID
               where
                   u.UserName = 'wsc'
                   and uad.functionId = 2000
           )
       )
       and locateable0_.discriminator in (
           '17000', '6010', '6020', '6030', '6035', '6040', '6060', '6070', '6080', '18000', '5010', '6000', '6100', '5000', '9000', '14000', '19000'
       )
       and (
           client3_.Un_ID in (
   1012, 1016, 1013, 1014
           )
       )
       and (
           locateable0_.productType not in  (
   18000, 19000
           )
       )
       and locateable0_.active=1
       and (
           upper(tags2_.keyword) like 'B%'
       ) 
```

Microsoft SQL Server Management Studio 建议为我们请求的字段添加索引，但这样做根本没有帮助。特别是要记住要查询的字段将是用户可配置的，并且休眠将在查询和获取所需的时间之上增加巨大的好处。

那么，我们可以做些什么来将性能提高到可接受的水平呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:28:14.127

我会注意到您的 where 子句有所不同，第一个是：

```
and locateable0_.productType<>6080 
```

并在第二次失踪。

您的数据库中是否有更多与此产品类型相关的记录？即您的第二个查询是否返回比第一个更多的行？

# email - 如何在java邮件中从smtp认证邮件以外的邮件地址设置

> ID：14831416
> 
> 赞同：7
> 
> 时间：2013-02-12T11:25:13.783
> 
> 标签：email, gmail, jakarta-mail

我正在使用 setFrom() 方法指定“FROM”地址，但我仍然收到具有 SMTP 身份验证邮件 ID 的“FROM”地址的邮件。并想**动态设置“FROM”地址**。不断变化。实现这一点的 RFC282 标准是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T12:18:00.620

谷歌的解决方案是这样的

**Gmail 允许您使用列为发件人的另一个电子邮件地址而不是您的 Gmail 地址来发送邮件。此功能可帮助您从 Gmail 界面管理多个帐户；仅当您已经拥有链接到备用地址的电子邮件帐户时，它才有效**

1.  选择帐户和导入选项卡（或帐户选项卡，如果您使用的是 Google Apps）。在发送邮件为下，单击添加另一个电子邮件地址。在“电子邮件地址”字段中，输入您的姓名和备用电子邮件地址。选择以下两个选项之一： 使用 Gmail 的服务器发送您的邮件（这更容易设置） 使用您的其他电子邮件提供商的 SMTP 服务器（我们建议专业邮件帐户或域使用此选项）。Google Apps 用户注意事项：根据您的 domain2 类型，此功能可能默认禁用。如果您有任何问题，请与您的管理员联系。如果您选择使用 Gmail 的服务器：

2.  单击下一步>>，然后单击发送验证。Gmail 会向您的其他电子邮件地址发送一封验证邮件，以确认您拥有该地址。

3.  打开您的其他帐户，然后单击 Gmail 发送的消息中的链接，或在 Gmail 设置的“帐户”部分输入确认码。

欲了解更多信息，请点击以下链接

[https://support.google.com/mail/bin/answer.py?hl=en&answer=22370](https://support.google.com/mail/bin/answer.py?hl=en&answer=22370)。

**所涉及的开销是任何新的发件人地址都需要在 Gamil 身份验证邮件帐户中设置一个别名。它不适合企业可销售的应用程序。**

其他解决方案是您可以安装一个邮件服务器（hmailServer）。此服务器允许您设置自定义发件人地址

如果有人知道其他解决方案，请建议我。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T18:25:17.170

这取决于您的邮件服务器。通常邮件服务器会阻止您使用除您的实际登录名之外的任何发件人地址。这有助于防止垃圾邮件。根据您的邮件服务器，可能有一些方法可以说服您应该被允许使用其他发件人地址。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T11:14:31.773

这是你在谈论的两件不同的事情：

> 您提到的 id 是 smtp 握手协议的一部分，通常映射到 mime-header 中的“Return-path”字段。
> 
> 而实际上显示在邮件列表中的“FROM”字段中的 id 是在您撰写邮件时由邮件服务器附加的。

因此，如果您可以修改 mime 标头，请确保“FROM：”字段包含您要设置的 id 而不是 smtp 身份验证 id。

顺便说一句，它的 rfc822

曾在 rediffmail 技术团队工作，以开发和增强 smtp、pop 和 imap 协议

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T04:43:20.430

它取决于您的邮件服务器和配置设置

# c++ - OpenGL glRasterPos 没有正确接受我的值

> ID：14831417
> 
> 赞同：2
> 
> 时间：2013-02-12T11:25:16.167
> 
> 标签：c++, opengl, glu

我一直在尝试向我的 OpenGL/C++ 项目中添加一些基本的类似 HUD 的文本。

因此我决定

```
glutBitmapCharacter( type, character) 
```

成为我的首选武器。

我意识到，为了最简单的使用，我应该将 2D 矩阵附加到我之前的渲染区域。

```
glPushMatrix();
glLoadIdentity();
gluOrtho2D(0, 10, 0, 10); 
```

这应该给我一个可爱的 10*10 2D 立方体来玩。

现在，当 glutBitmapCharacter 记住他的最后一个字符位置以附加下一个字符时，就会出现问题。它在写字符串时非常聪明，它显然会记住这个位置，并让我的文本在屏幕上飞过一次 :) 淘气。

```
glRasterPos2f(x,y); 
```

应该 - 正如我所听到的 - 重置这个东西是正常的 - （虽然我不完全理解为什么 gl 函数控制 glu 函数，但这只是一个旁注）。

现在发生的奇怪事情是，一旦我运行代码：

```
glPushMatrix();
glLoadIdentity();
gluOrtho2D(0, 10, 0, 10);

string message ="mmh... Pie...";
float poss[3];

glRasterPos3f(0.0, 0.0, 0.0);
glGetFloatv(GL_CURRENT_RASTER_POSITION, poss);
std::cout<< "X" <<(GLfloat) poss[0] << " Y"<<poss[1] << " Z"<<poss[2] <<  std::endl;

   for( size_t i = 0; i < message.size(); ++i ) {
    glutBitmapCharacter(GLUT_BITMAP_HELVETICA_18, message[i]);
    }
glPopMatrix(); 
```

我的文字没有显示。事实上，由此产生的 X、Y 和 Z（甚至不确定 Z 是否必要......无论如何都应该为 0）都是 inf（无限）。如果我不设置自己的 glRasterPos，除了离开屏幕之外，一切都会正常进行。我的返回位置是向上计数的 X 和 0 , 0 - 正如预期的那样。

那么这是怎么回事，我到底做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:20:51.390

您产生了一个重大的分段错误：glGetFloatv(GL_CURRENT_RASTER_POSITION, poss) 返回 4 个值，因此您必须使用：

```
float poss[4]; 
```

除此之外，您的代码在我的机器上运行良好并返回：

```
X0 Y0 Z0.5 
```

因此，错误似乎不在您在此处发布的代码中。您应该尝试将其复制到一个基本的“HelloWorld”-GL 程序中，看看它是否在那里工作。请注意，某些 OpenGL 命令仅在初始化有效的绘图表面后才起作用 - 我猜你这样做了？

# java - com.itextpdf.text.exceptions.InvalidPdfException：未找到 PDF 标头签名

> ID：14831418
> 
> 赞同：0
> 
> 时间：2013-02-12T11:25:23.000
> 
> 标签：java, pdf, itext

我在尝试对 PDF 文档进行数字签名时遇到此错误。传递两个 pdf SOURCEPDF 名称和 DESTINATIONPDF 名称（数字签名）pdf 名称。在 SOURCEPDF 上进行第一次数字签名后，我得到了 DESTINATIONPDF 。对于第二次数字签名，我使用 DESTINATIONPDF 作为源 pdf 和目标 pdf。

这是我的代码

```
try
{
    for(int i=1;i<=signature_Count;i++)
    {
        if(i==1)
        {
            tmpPdfSource=sourcePdfPath;
        }else{
            this.tmpPdfSource=destinationPdfPath;
        }

        int pageNo=Integer.parseInt(ad.readXML(xmlString, rootName,"PageNo-"+i));
        String imageSource=ad.readXML(xmlString, rootName,"ImageSource-"+i);
        float llx=Float.parseFloat(ad.readXML(xmlString, rootName,"llx-"+i));
        float lly=Float.parseFloat(ad.readXML(xmlString, rootName,"lly-"+i));
        float urx=Float.parseFloat(ad.readXML(xmlString, rootName,"urx-"+i));
        float ury=Float.parseFloat(ad.readXML(xmlString, rootName,"ury-"+i));
        String signature=ad.readXML(xmlString, rootName,"SignatureName-"+i);

        File dest = new File(destinationPdfPath);
        KeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());
        ks.load(new Fil eInputStream(certificatePath), keystore_password.toCharArray());
        String alias = (String) ks.aliases().nextElement();
        PrivateKey pk = (PrivateKey) ks.getKey(alias,key_password.toCharArray());
        java.security.cert.Certificate[] chain = ks.getCertificateChain(alias);
        PdfReader reader = new PdfReader(tmpPdfSource);
        stamper = PdfStamper.createSignature(reader,new FileOutputStream(dest), '\0', null, true);
        PdfSignatureAppearance appearance = stamper.getSignatureAppearance();

        appearance.setCrypto(pk, chain, null,PdfSignatureAppearance.SELF_SIGNED);

        if (true)
        {
            appearance.setAcro6Layers(true);
            Image img=Image.getInstance(imageSource);
            appearance.setImage(img);
            appearance.setVisibleSignature(new com.itextpdf.text.Rectangle(llx, lly, urx, ury), pageNo, signature);
        }
    }//for
    stamper.close();
} catch (Exception e) {
    GenericLog gl=new  GenericLog();
    gl.writeWarning("Error Occured in SignPdfDocument ");
    gl.writeError(e);
    e.printStackTrace();
} 
```

请帮我修复这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:55:00.823

重新格式化代码以使其可读后，问题变得明显：

```
for(int i=1;i<=signature_Count;i++)
{
    if(i==1)
    {
        tmpPdfSource=sourcePdfPath;
    }else{
        this.tmpPdfSource=destinationPdfPath;
    }
    [...]
    File dest = new File(destinationPdfPath);
    [...]
    PdfReader reader = new PdfReader(tmpPdfSource);
    stamper = PdfStamper.createSignature(reader,new FileOutputStream(dest), '\0', null, true);
    [...]
}//for
stamper.close(); 
```

从第二次迭代开始，您读取`PdfStamper`上一次迭代中生成的文件，您必须`stamper`在迭代结束时关闭它，而不是在`for`循环之外：

```
 stamper = PdfStamper.createSignature(reader,new FileOutputStream(dest), '\0', null, true);
    [...]
    stamper.close();
}//for 
```

此外，您最好`new FileOutputStream(dest)`在关闭后立即将您的变量放入变量中并显式关闭它`stamper:`

```
 FileOutputStream fout = new FileOutputStream(dest);
    stamper = PdfStamper.createSignature(reader, fout, '\0', null, true);
    [...]
    stamper.close();
    fout.close();
}//for 
```

当然，听从 Bruno 的建议，阅读他的 PDF 签名白皮书，并更新您的签名创建代码以生成非弃用类型的签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:52:23.037

我看到了这个方法`setCrypto()`，这意味着你没有使用最新版本的 iText；我还看到了这个选项`PdfSignatureAppearance.SELF_SIGNED`，这意味着您正在创建一个不再符合当今标准的签名。

您能帮自己一个忙并阅读[文档](http://itextpdf.com/book/digitalsignatures)吗？

另外：您使用与源和目标相同的文件？这不可能。您至少需要创建一个临时文件或在内存中创建文件，然后覆盖现有文件。

# here-api - IE 上诺基亚 API 的错误 500

> ID：14831420
> 
> 赞同：2
> 
> 时间：2013-02-12T11:25:26.547
> 
> 标签：here-api

我们的 API 有问题。当我们尝试使用 IE 从地址接收数据时，我们会从您的 API 收到 500 错误。

观看生成的 url 以访问此信息，我得到以下信息：

## 铬合金

```
http://api.places.lbs.maps.nokia.com/places/v1/discover/search/?callback=nokia.places.comm.data.clb[%22101%22]&app_id=ywQ7oG0pDVf4baOfgD63&app_code=FhWanW-p-KHXfPpqWIRDOg&Accept-Language=en-US&size=10&q=Fuentes%20Acebedo%20%2023%2COviedo%2C33006%2CAsturias&at=40.41764566275246,-3.7002038955688477 
```

## IE

```
http://api.places.lbs.maps.nokia.com/places/v1/discover/search/?callback=nokia.places.comm.data.clb["101"]&app_id=ywQ7oG0pDVf4baOfgD63&app_code=FhWanW-p-KHXfPpqWIRDOg&Accept-Language=en-US&size=10&q=Fuentes%20acebedo%20%2023%2Coviedo%2C33006%2Casturias&at=40.41764566275246,-3.7002038955688476 
```

唯一的区别是：IE --> ["101"] Chrome --> [%22101%22]

如果你转到我为 IE 指定的 URL，你会看到一个 500 错误。

您有解决此错误的方法吗？

坦克！

## 完全错误

```
HTTP ERROR 500

Problem accessing /places/v1/discover/search/. Reason: 

    Server Error

Caused by:

java.lang.IllegalArgumentException

at java.net.URI.create(URI.java:841)
at pbapi.Uri$.fromString(Uri.scala:37)
at pbapi.http.RequestSummary.toCurl(RequestSummary.scala:45)
at pbapi.monitoring.Incident$$anonfun$apply$2.apply(Incident.scala:41)
at pbapi.monitoring.Incident$$anonfun$apply$2.apply(Incident.scala:41)
at scala.Option.map(Option.scala:133)
at pbapi.monitoring.Incident$.apply(Incident.scala:41)
at pbapi.monitoring.LoggingIncidentReporter.createIncident(LoggingIncidentReporter.scala:46)
at pbapi.monitoring.LoggingIncidentReporter.requestProcessingError(LoggingIncidentReporter.scala:34)
at pbapi.web.springmvc.GenericExceptionResolver.resolveException(GenericExceptionResolver.scala:79)
at spring.helpers.PlacesApiDispatcherServlet.processHandlerException(PlacesApiDispatcherServlet.scala:91)
at spring.helpers.PlacesApiDispatcherServlet.doDispatch(PlacesApiDispatcherServlet.scala:72)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:648)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1336)
at org.eclipse.jetty.continuation.ContinuationFilter.doFilter(ContinuationFilter.java:137)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
at org.eclipse.jetty.servlets.UserAgentFilter.doFilter(UserAgentFilter.java:82)
at org.eclipse.jetty.servlets.GzipFilter.doFilter(GzipFilter.java:242)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
at pbapi.web.preprocessors.CorsPreprocessor.go(CorsPreprocessor.scala:20)
at pbapi.web.preprocessors.CorsPreprocessor.doFilter(CorsPreprocessor.scala:12)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
at pbapi.web.preprocessors.RequestAttributor.doFilter(RequestAttributor.scala:25)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
at pbapi.web.preprocessors.Query2Header.doFilter(Query2Header.scala:30)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:453)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:559)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
at org.eclipse.jetty.server.Server.handle(Server.java:365)
at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:485)
at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:926)
at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:988)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:635)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:627)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:51)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
at java.lang.Thread.run(Thread.java:662)

Caused by: java.net.URISyntaxException: Illegal character in query at index 100: http://api.places.lbs.maps.nokia.com/places/v1/discover/search/?callback=nokia.places.comm.data.clb["101"]&app_id=ywQ7oG0pDVf4baOfgD63&app_code=FhWanW-p-KHXfPpqWIRDOg&Accept-Language=en-US&size=10&q=Fuentes%20acebedo%20%2023%2Coviedo%2C33006%2Casturias&at=40.41764566275246,-3.7002038955688476

at java.net.URI$Parser.fail(URI.java:2810)
at java.net.URI$Parser.checkChars(URI.java:2983)
at java.net.URI$Parser.parseHierarchical(URI.java:3073)
at java.net.URI$Parser.parse(URI.java:3015)
at java.net.URI.<init>(URI.java:577)
at java.net.URI.create(URI.java:839)
... 53 more

Caused by:

java.net.URISyntaxException: Illegal character in query at index 100: http://api.places.lbs.maps.nokia.com/places/v1/discover/search/?callback=nokia.places.comm.data.clb["101"]&app_id=ywQ7oG0pDVf4baOfgD63&app_code=FhWanW-p-KHXfPpqWIRDOg&Accept-Language=en-US&size=10&q=Fuentes%20acebedo%20%2023%2Coviedo%2C33006%2Casturias&at=40.41764566275246,-3.7002038955688476

at java.net.URI$Parser.fail(URI.java:2810)
at java.net.URI$Parser.checkChars(URI.java:2983)
at java.net.URI$Parser.parseHierarchical(URI.java:3073)
at java.net.URI$Parser.parse(URI.java:3015)
at java.net.URI.<init>(URI.java:577)
at java.net.URI.create(URI.java:839)
at pbapi.Uri$.fromString(Uri.scala:37)
at pbapi.http.RequestSummary.toCurl(RequestSummary.scala:45)
at pbapi.monitoring.Incident$$anonfun$apply$2.apply(Incident.scala:41)
at pbapi.monitoring.Incident$$anonfun$apply$2.apply(Incident.scala:41)
at scala.Option.map(Option.scala:133)
at pbapi.monitoring.Incident$.apply(Incident.scala:41)
at pbapi.monitoring.LoggingIncidentReporter.createIncident(LoggingIncidentReporter.scala:46)
at pbapi.monitoring.LoggingIncidentReporter.requestProcessingError(LoggingIncidentReporter.scala:34)
at pbapi.web.springmvc.GenericExceptionResolver.resolveException(GenericExceptionResolver.scala:79)
at spring.helpers.PlacesApiDispatcherServlet.processHandlerException(PlacesApiDispatcherServlet.scala:91)
at spring.helpers.PlacesApiDispatcherServlet.doDispatch(PlacesApiDispatcherServlet.scala:72)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:648)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1336)
at org.eclipse.jetty.continuation.ContinuationFilter.doFilter(ContinuationFilter.java:137)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
at org.eclipse.jetty.servlets.UserAgentFilter.doFilter(UserAgentFilter.java:82)
at org.eclipse.jetty.servlets.GzipFilter.doFilter(GzipFilter.java:242)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
at pbapi.web.preprocessors.CorsPreprocessor.go(CorsPreprocessor.scala:20)
at pbapi.web.preprocessors.CorsPreprocessor.doFilter(CorsPreprocessor.scala:12)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
at pbapi.web.preprocessors.RequestAttributor.doFilter(RequestAttributor.scala:25)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
at pbapi.web.preprocessors.Query2Header.doFilter(Query2Header.scala:30)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:453)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:559)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
at org.eclipse.jetty.server.Server.handle(Server.java:365)
at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:485)
at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:926)
at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:988)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:635)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:627)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:51)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
at java.lang.Thread.run(Thread.java:662)

Powered by Jetty:// 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:40:13.700

解决方法很简单。使用版本 2.2.3 而不是 2.2.0

# database - 使用 like 运算符执行不返回期望结果的查询

> ID：14831424
> 
> 赞同：1
> 
> 时间：2013-02-12T11:25:34.517
> 
> 标签：database

每当我尝试对此进行查询时，我都会得到长度为 15 的单词。

```
select * from 'Table_A' where LENGTH('value') = 5 and value LIKE 'A%S'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:27:22.543

`LENGTH('value')`总是 5。因此它只返回匹配的值`LIKE 'A%S'`

修复它：

```
SELECT * FROM Table_A where LENGTH(value) = 5 and value LIKE 'A%S'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T11:27:12.243

```
select * from 'Table_A' where LENGTH(value) = 5 and value LIKE 'A%S'; 
```

您正在检查文字字符串“值”的长度，它始终为 5。删除引号，以便检查列中数据的长度。

# image - 在 SVG 图像计算公式中保持纵横比

> ID：14831429
> 
> 赞同：1
> 
> 时间：2013-02-12T11:25:50.433
> 
> 标签：image, html, svg, aspect-ratio

我在 HTML5 中有一个 SVG 的图像元素，

图片尺寸为：（stretch，preserveAspectRatio设置为“none”）width=520px height=240px

然后，我修改它以保持纵横比（preserveAspectRatio 设置为延迟），因为宽度>高度，高度仍然相同 = 240px 但我如何计算新宽度（因为保持纵横比而缩小）是否有公式到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:32:59.887

viewBox 宽度 / viewBox 高度 * 240px 我想。

# android-layout - 在运行时，为什么 Android 从布局中获取 XML 文件，而不是大型仿真器的 layout-large？

> ID：14831433
> 
> 赞同：1
> 
> 时间：2013-02-12T11:26:03.797
> 
> 标签：android-layout

我有一个 XML，`sign.xml`布局和布局很大。当我在大屏幕模拟器上运行相应的活动时`WVGA`，我**`layout-large`**从布局而不是从布局中获取 XML。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:52:16.407

仔细阅读[本文](http://developer.android.com/guide/practices/screens_support.html)，您将获得有关此问题的所有知识。

# windows-8 - VS2012，Window Phone 8 编译问题

> ID：14831441
> 
> 赞同：0
> 
> 时间：2013-02-12T11:26:37.300
> 
> 标签：windows-8, visual-studio-2012, windows-phone-8

我正在尝试在 Visual Studio 2012 上编译 Windows Phone 8 应用程序，但我不断收到错误消息，指出我需要一台运行 Windows 8 pro 的 64 位机器......但我有一台运行 Windows 8 的 64 位机器。

有 Windows 8 专业版吗？只有 Win8 Pro（升级版），从 MSDN 下载中只有 Win8 和 Win8 Enterprise。

**错误信息**

![windows phone 8 错误信息](../Images/164ffb24ebcfe60d67bf0db330437871.png)

**系统信息**

![系统信息](../Images/e294e155a0b599c2d4af258b23e3866d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:32:57.880

对于 Hyper-V 角色，您需要 Win8 Pro 或 Enterprise。您的机器看起来是 Win8 基本版。

# android - 使用默认相机预览

> ID：14831442
> 
> 赞同：0
> 
> 时间：2013-02-12T11:26:40.260
> 
> 标签：android, camera

目前我正在使用带有 FrameLayout（预览）和 2 个按钮（捕获和取消）的自定义布局，以使用 Camera API 拍照。

```
setContentView(R.layout.camera_api);
final Button captureButton = (Button) findViewById(R.id.button_capture);
final Button cancelButton = (Button) findViewById(R.id.button_cancel);

captureButton.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
          myCamera.takePicture(null, null, mPictureCallback);
}

cancelButton .setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
          finish();
} 
```

但是有没有办法我可以使用设备的默认相机布局并跟踪它的捕获和取消按钮，同时禁用视频等..，

我只想要默认相机的外观。预览和事件处理程序我已经定制了它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:29:00.067

这不可能像你想象的那样。你可以发送一个意图，让另一个相机应用为你做所有的事情。如果用户制作了快照，则将准备好的图像返回给您。

您想要做的事情是不可能的，因为**没有 default-camera-ui**。有许多 Android 版本和许多制造商，每个版本都提供略有不同的*默认相机应用程序*。

# regex - 由“.-_”分隔的单词的正则表达式，至少包括一个字母

> ID：14831443
> 
> 赞同：-2
> 
> 时间：2013-02-12T11:26:44.850
> 
> 标签：regex

这是为了验证我系统上的用户名。

每个用户名都可以包含这些符号“.-_”，但由上述符号分隔的单词不能只是数字。

一个例子是

无效的：

```
123.as-as123
123.AS-aS123 
```

有效的：

```
a123.as-as123
A123.AS-aS123 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:35:02.473

如果我正确理解您的要求，我相信这将起作用：

```
/^(?:[a-z0-9]*[a-z][a-z0-9]*[.\-_])*[a-z0-9]*[a-z][a-z0-9]*$/i 
```

它匹配零组或多组以 、 或 结尾并至少需要一个字母的字母`.`/`-`数字`_`。然后它匹配最后一组字母/数字，至少需要一个字母。

它不区分大小写（这就是`i`末尾的作用），因此它也将匹配大写。（这种语法至少在 Perl 和 PHP 中有效。在其他语言中，您可能必须以稍微不同的方式应用此选项，但始终可以使用不区分大小写的方法）。

有人可能会想像这样缩短它：

```
/^(?:[a-z0-9]*[a-z][a-z0-9]*[.\-_]?)+$/i 
```

但是，这不太理想，因为将`[.\-_]`其设为可选项会在尝试匹配的方式上提供了太多的灵活性。它可能必须在失败的模式上运行大量案例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:56:29.983

您可以使用这 4 个正则表达式进行检查。

```
^([0-9]*?)[\.\-\_]         // Check if number is present between start and symbols
[\.\-\_]([0-9]*?)[\.\-\_]  // Check if number is present between these symbols
[\.\-\_]([0-9]*)$          // Check if number is present between these symbols and eol
^([0-9]+)$                 // Check only if number is present 
```

如果其中任何一个的输出是 ne ''，则打印无效，否则有效。

# google-app-engine - 非常短暂的空闲 GAE 实例

> ID：14831444
> 
> 赞同：0
> 
> 时间：2013-02-12T11:26:47.417
> 
> 标签：google-app-engine

我完全可以接受一个空闲实例在 15 分钟左右后死亡的事实，并且需要在下一次请求时加载。

但是我有一个应用程序在不活动不到 5 分钟后就死机了。这增加了 load_request 的机会并让我收取 15 分钟的费用。

我该如何调试呢？为什么它死得这么快。我的另一个应用程序按预期在 15 分钟不活动后死机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:37:41.467

来自[GAE 定价](https://developers.google.com/appengine/kb/billing#time_granularity_instance_pricing)

> 除了 15 分钟的启动费外，实例还按正常运行时间收费，启动费涵盖 App Engine 启动和关闭实例所需的费用。因此，如果您的动态实例仅提供 5 分钟的流量，您将支付 5+15 分钟的费用，即 0.08 美元 / 60 * 20 = 2.6 美分。此外，如果实例在 15 分钟窗口内停止然后再次启动，则将仅收取一次启动费用，并且该实例将在该时间段内被视为“启动”。例如，如果动态实例服务流量 5 分钟，然后停机 4 分钟，然后再服务流量 3 分钟，您将支付 (5+4+3)+15 分钟，即 $0.08 / 60 * 27 = 3.6 美分。

这解释了为什么要向您收费，以及您的具体情况需要多少费用

# eclipse - Eclipse：多个工作区会降低 Eclipse 的速度/性能吗？

> ID：14831447
> 
> 赞同：1
> 
> 时间：2013-02-12T11:26:53.750
> 
> 标签：eclipse, performance, workspace

我正在处理多个项目，我发现将所有项目保存在一个工作区中并不麻烦。我想知道创建多个工作区是否会降低 eclipse 的速度和性能。我已经有 2 个工作区，是否建议创建多个工作区？我尝试在互联网上查找，找不到直接的答案。如果有人可以对此提供一些见解，那将非常有帮助。非常感谢任何形式的帮助。

提前致谢，

输入电压

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:56:29.863

创建多个工作区不会降低 Eclipse 性能，并且实际上会对搜索等功能产生*积极*影响，您可以将其限制为工作区（如“[在 Eclipse 中查找/替换跨工作区](https://stackoverflow.com/questions/1876664/find-replace-across-workspace-in-eclipse)”）。
将每个项目都放在*一个*工作区中实际上可能会导致性能问题（正如Eclipse 一开始就说明的这个[旧错误）。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=35974)

*我通常创建至少两个，当我需要处理同一个项目（同名）但在两个不同的分支中进行版本控制时，我使用的版本控制系统工具：你不能在一个*Eclipse 工作区中打开两个同名的 Eclipse 项目.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:30:52.020

帮助我的一件事是每隔一段时间创建一个新工作区，并从旧工作区导入现有项目。在一段时间内真正扼杀 Eclipse 性能的是 Eclipse 为您的工作区中的文件不断构建的历史。创建新工作区并从旧工作区导入所有项目有助于摆脱这些历史文件。

# unix - 如何将选择性文件夹复制到不同的目录

> ID：14831448
> 
> 赞同：0
> 
> 时间：2013-02-12T11:26:59.510
> 
> 标签：unix

```
folderA contains [dirA, dirB, dirC, fileA, fileB] 
```

我想复制`folderA to folderA-copy without dirB and dirC`我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:30:33.890

使用 rsync 命令排除选项，该选项为您提供为文件夹/文件输入正则表达式的选项，或指定包含您要忽略的所有目录的文件或指定特定目录或文件。

# google-apps-script - 使用 google-apps-script 了解文件类型

> ID：14831455
> 
> 赞同：1
> 
> 时间：2013-02-12T11:27:18.487
> 
> 标签：google-apps-script

我正在尝试获取文件的类型。
当我使用 getFileType() 函数时，我只会得到此处所述的“其他”： [https](https://developers.google.com/apps-script/class_docslist_filetype)
://developers.google.com/apps-script/class_docslist_filetype 那么我怎么才能真正知道类型呢？(pdf,jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-03-21T10:32:33.310

您可以获得 MIME 类型，它可以让您更好地了解 Google Doc 格式。这是样本

```
DriveApp.getFileById(id).getMimeType() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T13:23:05.167

`File.getBlob().getContentType()`应该有帮助，尽管我同意应该有一个更简单的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:09:19.013

一些字符串操作：

`getContentType`将返回 Google Doc 的类型。如果类型是其他，则获取文件的完整名称。找到最后一个“。” 在文件名中，然后获取在这段时间之后开始的子字符串。

如果它是 Google Docs/Sheets/Slides，这将为您提供文档类型，如果是其他内容，则为您提供文件扩展名。

# css - 字体问题？奇怪的字体行为出现

> ID：14831459
> 
> 赞同：0
> 
> 时间：2013-02-12T11:27:37.090
> 
> 标签：css, html, font-family

我使用了 urdu 字体，但在某些页面中它可以工作，在某些页面中它以奇怪的语言显示.. 我尝试使用字体 .ttf 我也尝试修复我自己的时区，但问题仍然出现..

这就是我想要做的。 ![在此处输入图像描述](../Images/657a8cd27844ba551f95c31513f9f6dd.png)

在此索引页面上，乌尔都语字体工作得非常好.. [http://safijustonline.com/projects/bost/index.html](http://safijustonline.com/projects/bost/index.html)

但是在像这样的其他一些页面上，它给出了错误。 [http://safijustonline.com/projects/bost/Admission/admission_policy.html](http://safijustonline.com/projects/bost/Admission/admission_policy.html)

那为什么会出现这个问题？？？我在这些页面中做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:54:09.497

这似乎不是 CSS 问题。index.html 和 admission_policy.html 的区别在于字符输出。

admission_policy.html：

```
<a id="ctl00_HyperLink15" class="menueshyperlink" href="#">Ù¾Ø´ØªÙˆ</a> 
```

索引.html：

```
<a id="ctl00_HyperLink15" class="menueshyperlink" href="#">پشتو</a> 
```

看到不同？由于您的网站似乎是静态的，您还可以检查您的字符编码是否为 utf8 或 utf16。您可以在保存代码的同时执行此操作。

# symfony-2.1 - Symfony 2.1 启用/禁用堆栈跟踪

> ID：14831460
> 
> 赞同：1
> 
> 时间：2013-02-12T11:27:40.500
> 
> 标签：symfony-2.1

不久前，我意识到 symfony 会打印出我的 prod 环境中的所有异常。我怎样才能关闭它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:41:26.423

经过一番寻找，似乎这就是方法（可能有更好的解决方案，但我找不到）。

在`web/app.php`, 更改`$kernel = new AppKernel('prod', true);`-`true`这里设置`display_errors`为 true，所以只需将其更改为`false`.

如果失败，您应该确保 display_errors 已关闭（如果是生产，最好在 php.ini 中完成而不是使用`ini_set`）。

# jquery-mobile - 使用不同的输出格式（html 和移动）时，资产预编译如何工作？

> ID：14831461
> 
> 赞同：0
> 
> 时间：2013-02-12T11:27:43.017
> 
> 标签：jquery-mobile, ruby-on-rails-3.2, asset-pipeline, passenger

我的应用程序有两种不同的用户界面，一种是在 PC 上的标准浏览器调用时调用，另一种是在移动设备调用时调用。所以在我的资产目录中，我有

```
assets
  javascripts
    application.js
    mobile
      application.js
  stylesheets
    application.css
    mobile
      application.css
      mobileapp.css

....
....

views
  layouts
    application.html.erb
    application.mobile.erb 
```

清单文件是：

**javascripts/application.js**

```
//= require jquery
//= require jquery_ujs
//= require_directory . 
```

**javascripts/mobile/application.js**

```
//= require jquery.mobile
//= require_directory . 
```

**样式表/application.css**

```
*= require_self
*= require_directory .
*/ 
```

**样式表/mobile/application.css**

```
*= require jquery.mobile
*= require_directory .
*/ 
```

在开发中一切正常，但是......当我使用移动设备调用应用程序时进入生产模式（Apache/Passenger），我看到使用了移动应用程序布局，但移动/移动应用程序中包含样式。不使用 css。

我无法在移动设备上进行调试（没有 firebug 或 google chrome 开发者工具）。有什么方法可以知道乘客正在为移动设备提供什么服务？我知道，我总是可以使用wireshark 来嗅探网络数据包，但如果它存在一些更高级别的工具，我将不胜感激..

**编辑**

也许现在我已经弄清楚是什么导致了这个问题。我知道 jquery mobile 会在 DOM 加载后执行它的“魔法”。当乘客（在预编译资产之后）将应用程序提供给移动设备时，会提供正确的页面和正确的应用程序布局，但 Jquery mobile 不会在 DOM 加载时初始化其所有元素，因此我的页面仍处于“混合”状态状态。

有谁遇到过这种问题并解决了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:09:20.053

好吧，这不是我第一次提出问题，然后我也发布了答案，还没有收到任何答案......

要捕获我将在移动设备上收到的页面的 HTML 代码，而无需使用 Firebug 等移动平台工具，我只需从命令行启动以下命令：

```
curl -A android http://www.mysite.com/mypage 
```

我使用 cURL 的功能来发送一个 http 请求，我控制正在发送的用户代理。不像拥有 Firebug，但现在我知道哪个 HTML 实际发送到了移动设备。

# coffeescript - 这个语句可以写成一行吗？

> ID：14831462
> 
> 赞同：2
> 
> 时间：2013-02-12T11:27:44.203
> 
> 标签：coffeescript

只是为了好奇，这个函数可以写在一行中，或者至少是`for`产生相同输出的部分吗？

```
getById = (id)->
    for e in array
        return e if e.id is id 
```

[小提琴](http://jsfiddle.net/RvpvE/)演奏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:33:01.527

```
getById = (id) -> return e for e in array when e.id is id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:33:03.087

尝试

```
getById = (id) ->
  return e for e in array when e.id is id 
```

# excel - 加载 Excel 电子表格的快速方法

> ID：14831463
> 
> 赞同：7
> 
> 时间：2013-02-12T11:27:47.077
> 
> 标签：excel, delphi, delphi-xe3

我正在使用此代码加载仅包含数字的 Excel 电子表格。但是将整个文件加载到 . 文件中需要很长时间`stringgrid`，有人知道更快的方法吗？

```
procedure sh1(SheetIndex:integer);
Var
Xlapp1, Sheet:Variant ;
MaxRow, MaxCol,X, Y:integer ;
str:string;
begin
Str:=trim(form2.OpenDialog1.FileName);

XLApp1 := createoleobject('excel.application');
XLApp1.Workbooks.open(Str) ;

Sheet := XLApp1.WorkSheets[SheetIndex] ;

MaxRow := Sheet.Usedrange.EntireRow.count ;
MaxCol := sheet.Usedrange.EntireColumn.count;

form2.stringgrid1.RowCount:=maxRow+1;
form2.StringGrid1.ColCount:=maxCol+1;
for x:=1 to maxCol do
     for y:=1 to maxRow do
            form2.stringgrid1.Cells[x,y]:=sheet.cells.item[y,x].value;

XLApp1.Workbooks.close;
end;

procedure TForm2.Button1Click(Sender: TObject);
begin
if opendialog1.Execute then begin
    stringgrid1.Visible:=true;
    sh1(1);
    end;
end; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-12T12:08:10.833

您可以尝试将整个范围复制到变体数组。就像是

```
procedure sh1(SheetIndex:integer);
Var
  Xlapp1, Sheet:Variant ;
  MaxRow, MaxCol,X, Y:integer ;
  str:string;
  arrData:Variant;
begin
  Str:=trim(form1.OpenDialog1.FileName);

  XLApp1 := createoleobject('excel.application');
  XLApp1.Workbooks.open(Str) ;

  Sheet := XLApp1.WorkSheets[SheetIndex] ;

  MaxRow := Sheet.Usedrange.EntireRow.count ;
  MaxCol := sheet.Usedrange.EntireColumn.count;

  //read the used range to a variant array
  arrData:= Sheet.UsedRange.Value;

  form1.stringgrid1.RowCount:=maxRow+1;
  form1.StringGrid1.ColCount:=maxCol+1;

  for x:=1 to maxCol do
    for y:=1 to maxRow do
      //copy data to grid
      form1.stringgrid1.Cells[x,y]:=arrData[y, x]; // do note that the indices are reversed (y, x)

  XLApp1.Workbooks.close;
end; 
```

# android - 如何处理增强现实中的触摸事件？

> ID：14831464
> 
> 赞同：2
> 
> 时间：2013-02-12T11:27:50.830
> 
> 标签：android, iphone, augmented-reality, vuforia

我正在尝试在示例应用程序[云识别的布局中放置 5 个按钮。](https://developer.vuforia.com/resources/sample-apps/cloud-recognition-sample-app) 按钮以两种不同的方式出现：

1.  当检测到跟踪器时，按钮会被扩展为跟踪器。

![在此处输入图像描述](../Images/a446cd00f00cd5945013e26464c4b517.png)

2.当相机远离跟踪器时，按钮会被击到屏幕上。

![在此处输入图像描述](../Images/32d77b8bdee95abf6e429ccf7bec0bc5.png)

显示在两种情况下都可以正常工作，但按钮的触摸事件不适用于第一种情况（增强按钮）。我需要在每个按钮上执行不同的任务。像默认 CloudReco 处理程序一样的通用处理程序不适用于我的情况。

所以我的问题是...

1.  如果按钮嵌入到跟踪器中，我可以调用按钮的事件处理程序吗？
2.  有没有办法将用户的触摸屏坐标转换为按钮的屏幕坐标

# java - 如何在 jasperreports 中安装新字体

> ID：14831465
> 
> 赞同：4
> 
> 时间：2013-02-12T11:27:50.833
> 
> 标签：java, fonts, jasper-reports

我正在使用 jasperreport 和 PHP。我在安装新字体时遇到问题我使用以下步骤在 jasper 报告中安装了新字体。

1.  已编辑`jasperreports_extension.properties`

    添加了以下行

net.sf.jasperreports.extension.simple.font.families.Mistral=net/sf/jasperreports/fonts/fonts.xml

1.  在`net\sf\jasperreports\fonts\fonts.xml`我添加了以下行

我收到以下错误

```
Fatal error: Uncaught [[o:Exception]:"java.lang.Exception: Invoke failed: [[c:JasperExportManager]]->exportReportToPdfFile((o:JasperPrint)[o:JasperPrint], (o:String)[o:String]). Cause: net.sf.jasperreports.engine.JRRuntimeException: Could not load the following font : pdfFontName : Mistral pdfEncoding : Cp1252 isPdfEmbedded : false VM: 1.6.0_24@http://java.sun.com/" at: #-18 net.sf.jasperreports.engine.export.JRPdfExporter.getFont(JRPdfExporter.java:1961) #-17 net.sf.jasperreports.engine.export.JRPdfExporter.getChunk(JRPdfExporter.java:1725) #-16 net.sf.jasperreports.engine.export.JRPdfExporter.getPhrase(JRPdfExporter.java:1694) #0 /mount1/imeddoc/dev/JasperReports/includes/javabridge.php(338): java_ThrowExceptionProxyFactory->getProxy(12, '@V', 'Could not load ...', true) #1 /mount1/imeddoc/dev/JasperReports/includes/javabridge.php(495): java_Arg->getResult(true) #2 /mount1/imeddoc/dev/JasperReports/includes/javabridge.php(501): java_Client->getWrappedResult(true) #3 /mount1/imeddoc/dev/JasperReports/includes/javabridge.php(705) in /mount1/imeddoc/dev/JasperReports/includes/javabridge.php on line 301 
```

谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T12:07:33.407

我使用 ireport 中的选项解决了它。要在 jasperreport 中安装新字体，请将其安装在 ireport 并导出到 jar 文件中，然后替换 jasper 项目中的 jar 文件。要在 ireport 中安装字体，请转到工具 -> 选项 -> 字体并单击安装字体。按照这些步骤，您现在将在 ireport 中安装新字体。请不要忘记检查在 pdf 中嵌入此字体。

现在要导出字体，请转到工具 -> 选项 -> 字体，然后从可用字体列表中选择您需要的字体，然后单击导出为扩展名。这会将字体导出为 jar 文件。现在替换 jasperreport 库中的 jar 文件。

# api - REST API 身份验证（维护经过身份验证的状态）

> ID：14831469
> 
> 赞同：2
> 
> 时间：2013-02-12T11:28:03.097
> 
> 标签：api, rest, oauth, openid, oauth-2.0

我正在开发一个 REST API。目前，我正在尝试使其安全性最低。我问这个问题是因为我发现的关于这个主题的大多数帖子都很老了。

对于身份验证，我发现了以下方案：

*   基本认证
*   AWS 身份验证协议
*   开放ID
*   OpenID 连接
*   OAuth 伪身份验证

基本身份验证和 AWS 身份验证会在首次身份验证后维护经过身份验证的请求，因为它们会继续发送签名请求。

我不明白 OpenID 和 OAuth 身份验证如何维护（第二个）请求身份验证？我是否需要在每个请求中使用 OAuth/OpenID 服务器检查访问令牌？这如何保护 REST API 不接收已更改的请求？

您推荐的任何其他方案、建议或有关该主题的阅读材料总是受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:32:55.700

我会在这里谈论**OAuth**

i) 您创建了一个网络应用程序并希望使用 google 的 OAuth API。
ii) 您[在此处](https://code.google.com/apis/console/)注册您的应用程序并获取凭据。
iii) 现在，在应用程序中，您将使用 Google 的 SDK 打开登录页面，输入您的凭据，Google 将对其进行验证并向您发送访问令牌和刷新令牌。
iv) 您将使用访问令牌对谷歌的 API 进行 REST 调用并获取用户数据。

现在，回到你问的问题 -
An`access token`通常活 1 小时。是的，您需要在一小时内对 Google 的任何 API 进行的任何经过身份验证的调用都可以使用相同的访问令牌进行。
还有另一种类型的令牌 - `Refresh Token`. 在任何时候，您的应用程序都可以访问提供者的令牌交换端点并将刷新令牌交换为 - 刷新令牌 + 访问令牌对。

现在再次，您有一个可以帮助您一小时的访问令牌和一个可以随时交换的刷新令牌。

刷新令牌只要您愿意就可以存在，直到用户明确撤销对您的应用程序的权限。（告诉谷歌它不想让你访问他的资源！）

OAuth 将确保只有经过身份验证和授权的客户端才能访问您的 API，从而使您的 REST API 安全。但通常，OAuth 仅在第三方客户端需要访问用户资源的情况下使用！

# php - Symfony2 HttpKernel 控制器中的前后方法（Kohana 风格）

> ID：14831472
> 
> 赞同：2
> 
> 时间：2013-02-12T11:28:10.963
> 
> 标签：php, symfony, annotations, listener, symfony-2.1

我知道这个问题被讨论了很多次，但我找到了一些解决方案，我不确定这是否是最好和最有效的方法。

我的问题：我正在使用 fosuserbundle 来处理用户身份验证，并且我还想防止显示登录用户的登录、密码重置等表单。下面我提出一些方法：

1.  第一个（已经实现）基于内核事件，有代码 [https://gist.github.com/walmen/871c13014b80c6a3d05d](https://gist.github.com/walmen/871c13014b80c6a3d05d)
2.  我的同事基于方法重载提到的第二种方法（删除每个方法中的侦听器和重复代码，这些方法有一些不应该为登录用户显示的逻辑）
3.  编写自定义注解，即@RequireAnonymous

正如我之前提到的，我已经实现了第一种方法，但我不确定它是否是最好和最有效的解决方案（每个请求都会调用这个监听器 - 它对应用程序的负载不是太重？监听器如何影响应用程序，如果他们？）。

第二种方法当然是最简单的方法，但是……代码重复听起来不太好。

最后一个可能是最好的，但如果我们看一下这个例子[https://gist.github.com/cystbear/1391850](https://gist.github.com/cystbear/1391850)我们会发现在任何控制器调用期间调用事件也存在问题。

有什么建议或其他想法有很好的论据和解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T15:12:03.480

如果我对您的理解正确，您可以将第三种方法与 Symfony 标准中包含的[JMSSecurityExtraBundle一起使用。](https://github.com/schmittjoh/JMSSecurityExtraBundle)

在要从经过身份验证的用户中排除的操作上，您可以这样做：

```
/**
 * @Secure(roles="IS_AUTHENTICATED_ANONYMOUSLY")
 */
public function fooAction()
{
    // stuff...
} 
```

这可确保请求特定路径的用户未经过身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:36:40.887

@Ramon 并不是因为每个用户都有角色 IS_AUTHENTICATED_ANONYMOUSLY，即使是经过身份验证的用户。

更重要的是，我们不想抛出“访问被拒绝”之类的异常，但由于重定向，我们想“隐藏”这些页面。

你觉得这个[https://github.com/FriendsOfSymfony/FOSUserBundle/issues/996#issuecomment-14812806](https://github.com/FriendsOfSymfony/FOSUserBundle/issues/996#issuecomment-14812806)怎么样？

# c# - 在导航菜单中隐藏特定选项卡

> ID：14831474
> 
> 赞同：0
> 
> 时间：2013-02-12T11:28:16.290
> 
> 标签：c#, asp.net, navigation

我有以下导航菜单 -

```
<asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" 
                EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal" >
                <Items>
                    <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home"/> 
                    <asp:MenuItem NavigateUrl="~/Test.aspx" Text="Profiles"/>
                </Items>
            </asp:Menu> 
```

在后面的代码中，我可以将 visible 设置为 false -

```
((System.Web.UI.WebControls.Menu)Master.FindControl("NavigationMenu")).Visible = false; 
```

但是，如何访问特定的 MenuItems，以便在加载 Default.aspx 时，Test.aspx 不可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:46:48.520

```
MenuItem foo = menu.FindItem(""); // your particular item
menu.Items.Remove(foo); 
```

你也可以检查一下：[我可以隐藏/显示asp：基于角色的菜单项吗？](https://stackoverflow.com/questions/4939031/can-i-hide-show-aspmenu-items-based-on-role)

# wix - 安装组件后触发自定义操作

> ID：14831479
> 
> 赞同：0
> 
> 时间：2013-02-12T11:28:34.343
> 
> 标签：wix, wix3.5, wix3.6

我有几个要安装的功能，我想在安装某个功能后触发自定义操作。有可能这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:14:15.863

不是“在”安装组件“之后”、“何时”安装组件或当组件已经安装或正在安装时。功能的相同概念。请参阅 Windows Installer 帮助主题[条件语句语法 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368012%28v=vs.85%29.aspx)

您将这些创作到 Condition 元素的内部文本中。例子是：

[条件语句语法示例 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368561%28v=vs.85%29.aspx)

# c++ - 如何为C++中的类中的每个实例生成唯一的ID？

> ID：14831480
> 
> 赞同：3
> 
> 时间：2013-02-12T11:28:41.643
> 
> 标签：c++

我试图为我的类中的所有实例创建唯一的 id，但这似乎会导致稍后在尝试编译程序时出错。这是我为课程编写的代码：

```
//this is GameObject.h
class GameObject
{
public:

    int instances;
    GameObject();
    void Display();
protected:
    int id;
};

//this is GameObject.cpp
#include "GameObject.h"
#include <iostream>

using namespace std;

GameObject::GameObject()
{
    instances = this->id; //is this the correct way to generate the unique id?

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T11:36:34.173

做这样的事情：

```
class GameObject
{
public:
    int id;
    GameObject() : id(++s_id) {}
protected:
    static std::atomic<int> s_id;
};

// in the .cpp file:
std::atomic<int> GameObject::s_id; 
```

这样，每个构造的对象都会得到下一个id，从1开始（因为static默认会初始化为零）。您从什么值开始可能并不重要。在编写复制构造函数、赋值运算符等时可能需要小心。最后，注意 atomic 类型是 C++11 的一部分；如果你不支持它，你可以在那里说“boost”而不是“std”。如果您需要，任何一个版本都会为您提供线程安全性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T11:31:20.317

不，每个实例`GameObject`都有自己的（未初始化的）实例`id`。需要有一个`id`可用于所有`GameObject`. 实现这一点的一种机制是使用`static`类变量。如果涉及线程，则需要同步对`static`变量的访问：

```
class GameObject
{
protected:
    static int id;
};

int GameObject::id; // defaults to zero and should be added to
                    // exactly one .cpp file only.

GameObject::GameObject() : instances(GameObject::id++) {} 
```

另一种选择是使用[`boost::uuid`](http://www.boost.org/doc/libs/1_53_0/libs/uuid/)：

```
#include <string>
using std::string;

#include <boost/lexical_cast.hpp>
#include <boost/uuid/uuid.hpp>
#include <boost/uuid/uuid_generators.hpp>
#include <boost/uuid/uuid_io.hpp>
using boost::lexical_cast;
using boost::uuids::uuid;
using boost::uuids::random_generator;

class GameObject
{
public:
    string instances;
    GameObject() : instances(make_uuid_());
    void Display();
private:
    string make_uuid_()
    {
        return lexical_cast<string>((random_generator())());
    }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T11:31:21.360

这是不正确的，因为`id`仅具有**不确定的值**（*因为它未初始化*）而不是唯一值。

您可以将对象的地址作为唯一标识符。C++ 中的每个对象都放置在不同的地址。但是，如果您需要以这种方式识别每个对象，那么您的设计就有问题。

# php - PHP Xpath 多节点

> ID：14831481
> 
> 赞同：0
> 
> 时间：2013-02-12T11:28:50.847
> 
> 标签：php, xpath, domxpath

我想从以下 xml 中提取属性 BODY 和 TYPE，并将 TYPE 输出为 div 类，将正文输出为文本。

例如：

```
foreach (...) {
echo "<div class='$type_value'>$body_value</div>"
} 
```

**我的 XML：**

```
<smses>
<sms body='something' type='1' address='1234'>
<sms body='something' type='2' address='12345'>
<sms body='something' type='2' address='1234'>
</smses> 
```

**我的代码（到目前为止只提取一个属性 - 正文）：**

```
$doc = new DOMDocument();
$doc->load('xml/sms.xml');

$path = new Domxpath($doc);

$num = $_POST["sel"];

$result = $path->query("//smses/sms[@address='$num']/@body");

foreach($result as $res)
{
echo "<div id='sms'>".$res->textContent.'</div><br/><br/>';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:34:18.613

从 XPath 中删除`/@body`，以便您选择实际`<sms>`元素，使用它可以将`type`属性及其正文文本放入`<div>`：

```
$result = $path->query("//smses/sms[@address='$num']");

foreach($result as $res)
{
    echo "<div id='sms' class='" . $res->getAttribute("type") . "'>". $res->getAttribute("body").'</div><br/><br/>';
} 
```

[演示](http://codepad.org/vRf7GifJ)

# javascript - 在 javascript 中使用正则表达式验证 LRC 文件

> ID：14831484
> 
> 赞同：1
> 
> 时间：2013-02-12T11:28:53.087
> 
> 标签：javascript, regex, validation

我一直在尝试验证包含 LRC 文件 [http://en.wikipedia.org/wiki/LRC_%28file_format%29的字符串](http://en.wikipedia.org/wiki/LRC_%28file_format%29)

并想通过正则表达式验证文件的格式是否正确。这将是有效的，不仅仅是以 [mm:ss.xx] 开头的行，还有 [mm:ss] 因为默认情况下它将是 xx=00

因此，如果文件更正与否，它的想法是返回，还包括可能出现在文件中的 ID 标签。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:11:07.443

我猜您需要遍历文件中的每一行并针对正则表达式进行测试以检查它是否与语法匹配。如果正则表达式失败，那么您显然会 return `false`。一个合适的正则表达式可能是这样的：

```
\[[0-9]{2}\:[0-9]{2}(\.[0-9]{2})?\]([\w:\s]+) 
```

这将匹配两者：

```
[00:29.02]Line 6 lyrics
[00:29]Line 6 lyrics 
```

并为您提供第二个匹配组，以防您想要获取歌词。

为了匹配标签，您可能需要一个正则表达式：

```
\[([a-z]+)\:(.+)\] 
```

哪个将匹配：

```
[au:Written by Kal Mann / Dave Appell, 1961]
[length: 2:23] 
```

虽然这假设标签名称中没有数字。它为标签名称和值提供了两个捕获组。

为了做你想做的事，我创建了一个[jsFiddle](http://jsfiddle.net/6gsP8/)，我认为它展示了你想要的功能。它假定 LRC 数据由`\n`字符分隔。示例方法如下：

```
function test_LRC(str) {
    var lyric_regex = /\[[0-9]{2}\:[0-9]{2}(\.[0-9]{2})?\](.+)/i;
    var tag_regex = /\[([a-z]+)\:(.+)\]/i;
    var LRC = str.split('\n');
    var len = LRC.length;
    var tags = [];
    var valid = true;

    for (var i = 0; i < len; i++) {
        var line = LRC[i].trim();
        if (line !== '') {
            if (tag_regex.test(line)) {
                var groups = tag_regex.exec(line);
                tags.push({'tag': groups[1], 'value': groups[2].trim()});
            } else if (!lyric_regex.test(line)) {
                valid = false;
                break;
            }
        }
    }

    return { 'valid': valid, 'tags': tags };
} 
```

# iphone - 获取 UILabel 中文本的物理位置

> ID：14831490
> 
> 赞同：5
> 
> 时间：2013-02-12T11:29:06.713
> 
> 标签：iphone, ios, ipad, uilabel

我知道如何通过使用来查找文本的大小，`sizeWithFont`但我真正想做的是找到在`UILabel`.

我需要将人工光标添加到其中包含 a 的视图中`UILabel`。问题是 a 中的文本`UILabel`似乎任意更改其顶部和底部边距。我无法弄清楚操作系统如何确定将文本放置在`UILabel`.

因此，最好能够创建一个类别或方法来计算绘制到视图上的实际文本的 Y 轴像素原点。

这可能吗？UITextField 如何完美定位文本和光标？

**更新**

我在想这可能通过获取 UILabel 上下文并在顶部找到空格来实现，这应该给我实际文本的 Y 像素原点，对吗？我什至不知道从哪里开始，或者让它足够高效，不会抑制对 UILabel 的频繁更改。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T19:19:18.483

您需要使用 UILabel 还是可以使用禁用的 UITextView？

对于文本视图，您可以执行类似的操作

```
CGRect rect = [textView.layoutManager usedRectForTextContainer:textView.textContainer]; 
```

这应该给你你想要的。如果内存为它返回的矩形提供服务，它将与文本视图相关。

希望这可以帮助 ：）

# visual-studio-2012 - 无法加载解决方案中的任何项目

> ID：14831493
> 
> 赞同：1
> 
> 时间：2013-02-12T11:29:09.007
> 
> 标签：visual-studio-2012, .net-framework-version

昨天我打开了解决方案，一切正常。今天我尝试打开它，所有项目都出现相同的错误：

> 错误：无法加载文件或程序集“Microsoft.Internal.Tasks.Dataflow，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”或其依赖项之一。文件或目录已损坏且无法读取。（来自 HRESULT 的异常：0x80070570）

我重新安装了视觉工作室（最终 2012 年）。我尝试重新安装 .NET Framework 4，但 Windows 8 不允许。我验证了在另一台机器上该解决方案工作正常。我删除了所有内容并从源代码管理中获取了一个新副本 - 一个在不同机器上工作的副本 - 结果相同。我在这里想念什么？

# java - Apache CXF 将支持基于 JAX-RPC 的 Web 服务 (SOAP)

> ID：14831499
> 
> 赞同：4
> 
> 时间：2013-02-12T11:29:23.873
> 
> 标签：java, web-services, cxf, jax-rpc

我想知道 Apache CXF 是否支持基于 JAX-RPC 的 Web 服务。目前我从事基于 JAX-WAS 的工作。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T11:54:42.103

Apache CXF 在`SOAP`Web 服务方面支持`document/literal`WSDL 样式。没有这样的事情`Apache CXF supports JAX-RPC`。JAX-RPC 是用于创建 Web 服务的不同堆栈，而 CXF 基于`JAX-WS`. 因此，您可能想知道 Apache CXF 是否支持`rpc/encoded`样式 Web 服务。答案是不。它不支持它们。

**也可以看看：**

*   [我应该使用哪种风格的 WSDL](https://developer.ibm.com/technologies/web-development/articles/ws-whichwsdl/)

# c++ - 如何使用 libjpeg 获取 JPEG 文件方向

> ID：14831502
> 
> 赞同：1
> 
> 时间：2013-02-12T11:29:42.580
> 
> 标签：c++, ios, jpeg, libjpeg

我需要知道我读取的 JPEG 文件的方向。

```
jpeg_create_decompress(&cinfo);

jpeg_stdio_src(&cinfo, file);
jpeg_read_header(&cinfo, TRUE); 
```

阅读标题后我该怎么办？请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T11:46:34.127

方向存储在 EXIF 部分。

我在这里看到两个选项：

*   使用`libexif`的 jpegtools，例如参见： [https](https://github.com/kif/imagizer/blob/master/libexiftran/jpegtools.c) ://github.com/kif/imagizer/blob/master/libexiftran/jpegtools.c （查找`get_orientation()`函数）

*   或使用类似于`get_orientation()`用于直接`http://src.gnu-darwin.org/ports/x11-toolkits/gtk20/work/gtk+-2.12.3/gdk-pixbuf/io-jpeg.c`检索方向的函数`j_decompress_ptr`。（这可能是最快实现的解决方案）

# visual-studio-2010 - 使用 boost asio 构建

> ID：14831504
> 
> 赞同：0
> 
> 时间：2013-02-12T11:29:46.213
> 
> 标签：visual-studio-2010, windows-xp, boost-asio

我正在尝试使用 Visual Studio 2010 使用 boost 版本 1.53.0 在 Windows XP 上构建一个项目（这应该很重要，将解释）

错误与 socket_option.hpp 中的类有关：

```
模板 <int 级别，int 名称>
布尔类
{

```

正如我上面提到的，这个类从 boost 1.35.0 中的第一个版本的 asio 没有改变

我收到这些错误：

```
D:\work\extern\include\boost/asio/detail/socket_option.hpp(34): 错误 C2332: 'class' : 缺少标签名称
D:\work\extern\include\boost/asio/detail/socket_option.hpp(34): 错误 C3306: 'boost::asio::detail::socket_option::': 不允许使用未命名的类模板
D:\work\extern\include\boost/asio/detail/socket_option.hpp(34): error C2628: 'boost::asio::detail::socket_option::' 后跟 'int' 是非法的（你忘了一个 ';'？）
D:\work\extern\include\boost/asio/detail/socket_option.hpp(35): 错误 C2143: 语法错误: 缺少';' 前 '{'
D:\work\extern\include\boost/asio/detail/socket_option.hpp(35): 错误 C2447: '{' : 缺少函数头（旧式正式列表？）

```

这也给该类的使用带来了更多错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:18:20.370

确保您引用了正确的 Boost 包含。这可以从 Visual Studio 中通过从项目菜单中选择属性或从解决方案资源管理器中右键单击您的项目并选择属性来完成。选择 C/C++ 并在其他包含目录下输入安装 Boost 的路径。在我使用 Visual Studio 2008 的系统上，我的 C:\Program Files 路径下安装了 Boost 1.52.0。所以，这就是我系统上的设置：

C:\程序文件\boost_1_52_0\;

如果您也在使用 OpenSSL，那么您还需要指定安装它的路径。在我的系统上，它看起来像这样：

C:\Users\Bob\Documents\Visual Studio 2008\Projects\Win32Client\OpenSSL-Win32\include\; C:\Users\Bob\Documents\Visual Studio 2008\Projects\Win32Client\OpenSSL-Win32\include\openssl\;

您还需要指定库路径，以便链接器能够正确构建。因此，在“属性”对话框下，选择“链接器”并在“附加库目录”下输入正确 lib 文件夹的路径。在我的系统上，它看起来像：

C:\Program Files\boost_1_52_0\lib32\;

如果使用 SSL，您还需要：

C:\Users\Bob\Documents\Visual Studio 2008\Projects\Win32Client\OpenSSL-Win32\lib\VC\static;

和

libeay32MDd.lib ssleay32MDd.lib

在链接器/输入部分下输入。

我无法通过 Boost 使用 64 位版本的 OpenSSL 库进行构建，并且已经提交了错误报告。32 位版本虽然构建良好。

# iphone - 创建 NSMutableDictionary 可以在应用程序的任何地方使用

> ID：14831505
> 
> 赞同：0
> 
> 时间：2013-02-12T11:29:48.163
> 
> 标签：iphone, ios, objective-c

我想要一个`NSMutableDictionary`可以从网络上提取数据的工具，并且可以从应用程序中的任何视图控制器中获得。

换句话说，我应该能够`dictionary`在应用程序的任何部分获取和设置其中的信息。

我已经阅读了几个解决方案，其中一个是创建一个包含该字典的 .h 文件，然后将该 .h 文件添加到 .pch 以便它可以在任何地方使用。

第二种选择是在 中创建 dict `AppDelegate`，但是人们说这是一个糟糕的解决方案。

请就执行此操作的最佳方法提出建议。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T11:32:34.360

您可以使用单例类来共享数据
检查这个[单例类](http://www.galloway.me.uk/tutorials/singleton-classes/)

`MyManger.h`

```
#import <foundation/Foundation.h>

@interface MyManager : NSObject {
NSMutableDictionary *_dict
}

@property (nonatomic, retain) NSMutableDictionary *dict;

 + (id)sharedManager;  
@end 
```

`MyManger.m`

```
#import "MyManager.h"

static MyManager *sharedMyManager = nil;

 @implementation MyManager

 @synthesize dict = _dict;

#pragma mark Singleton Methods  

+ (id)sharedManager {
 @synchronized(self) {
    if(sharedMyManager == nil)
      sharedMyManager = [[super allocWithZone:NULL] init];
 }
return sharedMyManager;
} 

- (id)init {
   if (self = [super init]) {
  dict = [[NSMutableDictionary alloc] init];
   }
 return self;
} 
```

您可以像这样从任何地方访问您的字典

```
 [MyManager sharedManager].dict 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T11:51:43.443

you can create it in the app delegate and set its setters and getters. and each time you need to acces it you can make and instance of the main delegate

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication]delegate]; 
```

# android - 网格布局的对齐问题

> ID：14831507
> 
> 赞同：7
> 
> 时间：2013-02-12T11:29:58.107
> 
> 标签：android

我有一个如图所示的数字键盘

![这里](../Images/480b205c516498057969c6dd74a7e109.png)

如您所见，只有单行的按钮没有正确对齐。我知道通过设置`android:baselineAligned`为 false 我们可以解决这个问题。但是 GridLayout 没有任何这样的属性。

我该如何解决？

**编辑：**

```
<RelativeLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="2" >

        <GridLayout
            android:id="@+id/buttons_layout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:alignmentMode="alignMargins"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/phone_number"
            android:layout_marginRight="@dimen/buttons_margin_right"
            android:layout_marginTop="10dp"
            android:columnCount="3" >

            <Button
                android:id="@+id/button1"
                android:layout_width=""65dp
                android:layout_height=""40dp
                android:textColor="@android:color/white"
                android:layout_marginTop="5dp"
                android:gravity="center"
                android:layout_marginLeft="10dp"
                android:text="1" />

           <Button
                android:id="@+id/button2"
                android:layout_width=""65dp
                android:layout_height=""40dp
                android:textColor="@android:color/white"
                android:layout_marginTop="5dp"
                android:gravity="center"
                android:layout_marginLeft="10dp"
                android:text="2\nABC" />

.
.
.
      </GridLayout>
<RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-01T19:00:30.577

对于作为 appcombat GridLayout 子级的 textview 的固定高度，我也遇到了同样的问题。每次我有一个带有两行文本视图的单元格而不像其他有一个的单元格时，都会出现错误的对齐方式。

对我来说，当我添加一个

`grid:layout_rowWeight="1"`

无法解释，但它奏效了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T10:54:07.327

我设法通过用虚拟布局包装每个元素来解决这个问题：

```
<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <Button
        android:id="@+id/button1"
        android:layout_width="65dp"
        android:layout_height="40dp"
        android:textColor="@android:color/white"
        android:layout_marginTop="5dp"
        android:gravity="center"
        android:layout_marginLeft="10dp"
        android:text="1" />
</RelativeLayout> 
```

# twitter-bootstrap - twitter bootstrap：每个按钮都关闭模式

> ID：14831511
> 
> 赞同：0
> 
> 时间：2013-02-12T11:30:13.413
> 
> 标签：twitter-bootstrap, modal-dialog, alert

我正在使用**引导程序 2.3.0**来显示模式。在此模式中，当发生错误时，我有时会显示警报。但是当用户点击警报关闭按钮时，模式也会关闭。我不确定为什么？alert 和 modal 都有 css 类`close`，但是`data-dismiss`alert 的属性值指向 to`alert`和 modal 的相同属性指向 to `modal`。尽管模式在警报出现的同时关闭。

问候，西德

编辑：

实际上我有一个问题，即我放置在模式中的每个按钮都会关闭它，无论是否`data-dismiss="modal"`设置了属性。

```
<div class="modal hide fade" id="dlg" tabindex="-1" role="dialog" 
     aria-labelledby="dlgLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
        I close the modal</button>
        <h3 id="dlgLabel">Header</h3>
    </div>
    <div class="modal-body">
        <button class="btn" id="btn">I close the modal too</button>
    </div>
    <div class="modal-footer">
        <button class="btn pull-right" id="cancel" data-dismiss="modal"
                aria-hidden="true">I close the modal</button>
    </div>
</div> 
```

# sql-server-2008 - 服务器版本：操作无效。连接已关闭

> ID：14831512
> 
> 赞同：3
> 
> 时间：2013-02-12T11:30:14.747
> 
> 标签：sql-server-2008, wampserver

我有一个装有 Windows 7 (IIS 6.0)、MS SQL Server 2008、Visual Studio 2008 的工作站。我的 SQL Server Management Studio 工作正常。但我无法通过我正在使用的 VS2008 或 VS2010 代码中的任何项目建立连接：

```
 Dim _SqlConnectionString As String = "Data Source=" + Environment.MachineName + "\\SQLEXPRESS;Initial Catalog=MyDatabase;Integrated Security=true;"
        Dim cn As SqlConnection = New SqlConnection(_SqlConnectionString) 
        Dim da As New SqlDataAdapter(cmd)
        Dim dt As New DataTable
        cmd.Connection = cn
        cn.Open() 
```

**我得到的错误在我的 SqlConnection 的 ServerVersion 属性中：无效操作。连接已关闭**

安装 wamp server & php 后出现此问题。我应该怎么办？有没有冲突？我让我的 wamp 服务器监听 IIS 以外的其他端口，但是 SQL Server 呢？为什么我无法连接到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T14:57:14.700

我以前遇到过这个问题。有一天，我在调试模式下通过代码成功运行的 Visual Studio Windows 应用程序运行良好，并且完成了它需要做的事情。第二天，它只是没有建立连接，给我这个错误：ServerVersion：Invalid Operation。连接已关闭。有趣的是，我使用了一个对该数据库具有权限的 SQL 用户作为我的用户来连接到数据库。我收到此消息的原因是因为我用来建立连接的特定 SQL 用户当时已禁用。我再次启用它，一切都重新开始工作。

它可能是这样的小东西，或者可能是未启动的 Windows 服务。个人经历

# ruby - 检查所有子字符串是否包含在另一个字符串数组中

> ID：14831514
> 
> 赞同：0
> 
> 时间：2013-02-12T11:30:18.470
> 
> 标签：ruby, arrays

我有两个字符串数组

```
order_items=["2832","3284","9832","9234"]
uri=["orderaccept/order_items/3284/cancel","orderaccept/order_items/9234/cancel"] 
```

我想找到所有`order_items`不属于`uri`. 在这种情况下，它应该返回`2832`and `9832`。

随意编辑两个数组的内容。我找不到类似的问题，但如果已经问过，请给我链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:37:06.170

```
order_items.select { |item| uri.none? { |u| u.include?(item) } } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T11:40:34.260

作为变体：

`order_items.select{|i| !uri.join.include? i}`

更新

```
order_items=["2832","3284","9832","9234"]
uri=["orderaccept/order_items/3284/cancel","orderaccept/order_items/9234/cancel"]

require 'benchmark'
joined = uri.join
n = 1_000_000
Benchmark.bm do |x|
  x.report("select:") { n.times do  order_items.select{|i| !uri.join.include? i}; end }
  x.report("reject:") { n.times do  order_items.reject{|i| uri.join.include? i}; end }
  x.report("reject2:") { n.times do  order_items.reject{|i| joined.include? i}; end }
  x.report("none?:") { n.times do  order_items.select { |item| uri.none? { |u| u.include?(item) } }; end }
  x.report("substr:") { n.times do  order_items - uri.map { |e| e.gsub /\D/, '' }; end }
  x.report("subt+substr:") {n.times do order_items - uri.map { |i| i[24..27] }; end }
end 
```

它产生了

```
 user       system      total        real
select:       4.181000   0.015000   4.196000 (  4.275000)
reject:       3.931000   0.000000   3.931000 (  3.925000)
reject2:      1.388000   0.000000   1.388000 (  1.440000)
none?:        4.462000   0.000000   4.462000 (  4.490000)
substr:       26.582000  0.016000   26.598000( 26.675000)
subt+substr:  3.167000   0.000000   3.167000 (  3.170000) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:00:32.873

我猜数组减法在这里更适用，因为它对未来的代码修订具有自我描述性（您确实愿意从数组中减去不必要的项目，不是吗？）

```
order_items - uri.map { |e| e.gsub /\D/, '' } 
```

**UPD** Ooups...基准测试迫使我准确思考，例如它来了：

```
order_items - uri.map { |i| i[24..27] } 
```

基准测试：

```
order_items=["2832","3284","9832","9234"]
uri=["orderaccept/order_items/3284/cancel","orderaccept/order_items/9234/cancel"]

require 'benchmark'
n = 1_000_000
Benchmark.bm do |x|
  x.report("select:") { n.times do  order_items.select{|i| !uri.join.include? i}; end }
  x.report("reject:") { n.times do  order_items.reject{|i| uri.join.include? i}; end }
  x.report("none?:") { n.times do  order_items.select { |item| uri.none? { |u| u.include?(item) } }; end }
  x.report("subt+gsub:") { n.times do order_items - uri.map { |e| e.gsub /\D/, '' }; end }
  x.report("subt+substr:") {n.times do order_items - uri.map { |i| i[24..27] }; end }
end 
```

产量：

```
 user     system      total        real
select:  7.200000   0.000000   7.200000 (  7.206846)
reject:  6.240000   0.000000   6.240000 (  6.253924)
none?:  9.230000   0.020000   9.250000 (  9.282425)
subt+gsub: 43.440000   0.000000  43.440000 ( 43.491133)
subt+substr:  5.320000   0.010000   5.330000 (  5.333616) 
```

# android - 使用 VideoView 播放加密的视频文件

> ID：14831518
> 
> 赞同：6
> 
> 时间：2013-02-12T11:30:33.037
> 
> 标签：android, android-videoview

android原生“VideoView”视频渲染小部件是否播放加密的视频文件？
如果是，那么如何播放它以及所有的 API。
我已经浏览了这个[链接](http://developer.android.com/reference/android/widget/VideoView.html)，我没有找到任何与播放加密视频相关的内容。

我是否需要解密我的视频然后将其传递给 VideoView？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T20:29:49.883

VideoView不能播放加密视频，必须自己解密。大致有两种方式：

1.  从加密的文件中生成一个临时的明文文件，但这有一些不便：开始播放之前的延迟以及内容的明文曝光。
2.  使用带有本地 http 服务器的流式传输方案。

[libmedia](http://libeasy.alwaysdata.net/)是为精确解决此功能而开发的库。

就像是：

```
mServer = new LocalSingleHttpServer();
mServer.setCipher(myGetCipher());
mServer.start();
path = mServer.getURL(path);
mVideoView.setVideoPath(path);
mVideoView.start(); 
```

# java - 如何在JAVA中实现jqGrid中的搜索功能

> ID：14831521
> 
> 赞同：1
> 
> 时间：2013-02-12T11:30:38.870
> 
> 标签：java, jquery, jsp, servlets, jqgrid

我在java中实现**jqgrid**。

在实施`search functionality`时我无法获得搜索结果，它重新加载所有记录的网格数据，而不是过滤结果。请帮助我解决此问题并指导我实现搜索功能以及`advanced search function in java`.

我已经完成的部分代码：

```
 var lastselected, lastsel2;
        var curRowId = -1;
        var gridContainerId = "#data-grid-container";
        var la;
        var usernames;
        $(document).ready(
          function() {

           $(gridContainerId).jqGrid(
             {
              url : 'ManageUserServlet?methodName=fetchAllUsers',
              datatype : "json",
                    colNames: ['Email', 'Lastname', 'Firstname', 'Group', 'Active'],
                    /*colModel: [
                                { name: 'Email', width: 100, index: 'Email', searchoptions: { sopt: ['eq', 'ne']} },
                                { name: 'Lastname', index: 'LastName', searchoptions: { sopt: ['eq', 'ne', 'cn']} },
                                { name: 'Firstname', index: 'FirstName', searchoptions: { sopt: ['eq', 'ne', 'cn']} },
                                { name: 'Group', index: 'Group', searchoptions: { sopt: ['eq', 'ne', 'cn']} },
                                { name: 'Active', index: 'Active', searchoptions: { sopt: ['eq', 'ne', 'cn']} }
                              ],*/

              colNames : [ 'Email', 'Lastname', 'Firstname', 'Group',
                'Active'],
              colModel : [ {
               name : 'email',
               index : 'email',
               width : 85,
               sortable : true,
               sorttype : "text",
               editable : true,
               editoptions : {
                size : "20",
                maxlength : "30"
               },
               sopt : ['cn','bw','eq','ne','lt','gt','ew']
              }, {
               name : 'lastname',
               index : 'lastname',
               width : 75,
               editable : true,
               edittype : "text",
               editoptions : {
                size : "20",
                maxlength : "30"
               },
               sopt : ['cn','bw','eq','ne','lt','gt','ew']
              }, {
               name : 'firstname',
               index : 'firstname',
               width : 85,
               sortable : true,
               sorttype : "text",
               editable : true,
               edittype : "text",
               editoptions : {
                size : "20",
                maxlength : "30"
               },
               sopt : ['cn','bw','eq','ne','lt','gt','ew']
              }, {
               name : 'groupname',
               index : 'groupname',
               width : 80,
               sortable : true,
               sorttype : "text",
               editable : true,
               edittype : "text",
               editoptions : {
                size : "20",
                maxlength : "30"
               },
               sopt : ['cn','bw','eq','ne','lt','gt','ew']
              }, {
               name : 'isactive',
               index : 'isactive',
               width : 80,
               sortable : true,
               sorttype : "text",
               editable : true,
               edittype : "text",
               editoptions : {
                size : "20",
                maxlength : "30"
               }
              } ],
              rowNum : jQuery("#data-grid-container").jqGrid(
                'getRowData'),
               rowList : [10, 20, 30, 40],
               pager : '#data-grid-pager',
              sortname : 'username',
              viewrecords : true,
              sortorder : "desc",

              /*
               * ondblClickRow : function(id) { if (id && id !==
               * lastselected) {
               * $(gridContainerId).jqGrid('restoreRow',
               * lastselected); $(gridContainerId).jqGrid('editRow',
               * id, true); lastselected = id; } },
               */
              /*
               * onSelectRow : function(username) { if (username &&
               * username !== lastselected) {
               * $(gridContainerId).jqGrid('restoreRow',
               * lastselected); lastselected = null; } },
               */
              onSelectRow : function(id) {
               curRowId = id;
               var ids = jQuery("#data-grid-container").jqGrid(
                 'getGridParam', 'selarrrow');
               // alert("test: " + ids + "Length is::"+ids.length);
               /*
                * usernames = new Array(ids.length); var row;
                * for(var i=0; i<ids.length;i++) { usernames[i] =
                * jQuery("#data-grid-container").jqGrid('getCell',
                * ids[i], 'username'); } temp='Urvin';
                */
              },
              caption : "",
              height : 500
             });

            jQuery("#data-grid-container").jqGrid('setGroupHeaders', { 
            useColSpanStyle : false,
            groupHeaders : [ {
             startColumnName : 'email',
             numberOfColumns : 4,
             titleText : '<em>Users' +la+ '</em>' ,

            },
            {
             startColumnName : 'group',
             numberOfColumns : 1,
             titleText : '<em>Users' +la+ '</em>' ,

            }

            ]
           });
           $("#data-grid-container").jqGrid(
             'navGrid',
             '#data-grid-pager',
             {
              edit : true,
              add : true,
              del : true,
              search : true
             },
             {
              savekey : [ true, 13 ],
              reloadAfterSubmit : true,
              jqModal : false,
              closeOnEscape : true,
              closeAfterEdit : true,
              caption : "Edit User",
              url : 'ManageUserServlet?methodName=editUser',
              afterSubmit : function(response, postdata) {
               if (response.responseText == "Success") {
                jQuery("#success").show();
                jQuery("#success").html(
                  "User get Added Successfully.");
                jQuery("#success").fadeOut(6000);
                return [ true, response.responseText ];
               } else {
                return [ false, response.responseText ];
               }
              }
             },
             // Add options
             {
              closeOnEscape : true,
              caption : "Add User",
              url : 'ManageUserServlet?methodName=addUser',
              closeAfterAdd : true
             },
             // Delete options
             {
              caption : "Delete User",
              onclickSubmit : function(eparams) {
               var retarr = {};
               // we can use all the grid methods here
               // to obtain some data
               var ids = jQuery("#data-grid-container").jqGrid(
                 'getGridParam', 'selarrrow');
               // alert("test: " + ids + "Length is::"+ids.length);

               var row;
               for ( var i = 0; i < ids.length; i++) {
                if (i == 0) {
                 usernames = jQuery("#data-grid-container")
                   .jqGrid('getCell', ids[i],
                     'username');
                } else {
                 usernames += ","
                   + jQuery("#data-grid-container")
                     .jqGrid('getCell', ids[i],
                       'username');
                }
               }
               alert("Usernames :" + usernames);
               retarr = {
                lstUsername : usernames
               };
               return retarr;
              },
              url : 'ManageUserServlet?methodName=deleteUser'
             }, 
             {
              Find: "Search", 
              Reset: "Reset",
              closeOnEscape : true,
              closeAfterSearch : true,
              caption : "Search",
              multipleSearch : true,
              /*onClickFind : jQuery(gridContainerId).searchGrid( {sopt:['cn','bw','eq','ne','lt','gt','ew']})*/
              /*var sg = jQuery("#mysearch").filterGrid(...)[0]; 
              sg.triggerSearch();*/
              autoSearch : true
             });
           $(".ui-jqgrid-titlebar").hide();
          }); 
```

非常感谢在 jqgrid 中实现搜索的指导。

**更新：**

这是在 servlet 上创建`JSON object`填充网格数据的代码：

```
 private void fetchAllUsers() {
          List<UserVO> lstUsers = adminServices.fetchAllUsers();
          if(lstUsers != null && !lstUsers.isEmpty()) {
           try{
            JSONObject responseData=new JSONObject();
            responseData.put("total",2);
            responseData.put("page",1);    
            responseData.put("records",3);
            JSONArray cellArray=new JSONArray();
                  JSONArray cell = new  JSONArray();     
                  JSONObject cellObj=new JSONObject();
                  int i=1;
            for(UserVO userVO : lstUsers) {
             if(userVO!= null) {
              cellObj.put("id",i);

              cell.add(userVO.getEmail());
              cell.add(userVO.getLastName());
              cell.add(userVO.getFirstName());
              cell.add(userVO.getGroupVO().getGroupName());
              if(userVO.isActive()){
               cell.add("Active"); 
              }else{
               cell.add("In-Active");
              }
              cellObj.put("cell", cell);
              cell.clear();
              cellArray.add(cellObj);
              i++;
             }
            }
            responseData.put("rows", cellArray);
            //response.setContentType("applisation/json");
            out.print(responseData);
            out.flush();
           }catch(Exception e) {
            System.out.println("There is some error");
           }
          } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:45:35.130

我想你不见了`loadonce: true`

如果你想使用`search`提供的选项，`jqgrid`那么你必须使用`loadonce: true`

# transform - 为什么 LWJGL 多边形在 z 平移后消失？

> ID：14831526
> 
> 赞同：0
> 
> 时间：2013-02-12T11:31:06.403
> 
> 标签：transform, lwjgl

我已经开始学习 lwjgl 并且遇到了问题！我在做什么：

1.  加载纹理

2.  开始渲染周期

3.  绘制矩形并应用纹理

4.  检查键盘和鼠标事件并旋转/移动相机

    ```
    public static void main(String[] args) {
    try {
        Display.setDisplayMode(new DisplayMode(320, 200));
        Display.create();
    } catch (Exception e) {
        System.out.println(e);
    }

    Texture texture = null;
    try {
        texture = TextureLoader.getTexture("JPG", ResourceLoader.getResourceAsStream("basic.jpg"), true);
    } catch (Exception e) {
        System.out.println(e);
        return;
    }

    GL11.glMatrixMode(GL11.GL_PROJECTION);
    GL11.glLoadIdentity();
    GL11.glOrtho(0, 320, 0, 200, 1, -1);
    GL11.glMatrixMode(GL11.GL_MODELVIEW);

    while (!Display.isCloseRequested()) {
        GL11.glClear(GL11.GL_COLOR_BUFFER_BIT | GL11.GL_DEPTH_BUFFER_BIT);
        Color.white.bind();
        texture.bind();
        GL11.glBegin(GL11.GL_QUAD_STRIP);
            GL11.glTexCoord2f(0, 0);
            GL11.glVertex3f(100, 100, 0);
            GL11.glTexCoord2f(0, 1);
            GL11.glVertex3f(100, 140, 0);
            GL11.glTexCoord2f(1, 1);
            GL11.glVertex3f(140, 140, 0);
            GL11.glTexCoord2f(1, 0);
            GL11.glVertex3f(140, 100, 0);
        GL11.glEnd();

        Display.update();
        processInput();
        try {
            //Thread.sleep(20);
        } catch (Exception e) {
            System.out.println(e);
        }
    }

    Display.destroy();

    }

    public static void processInput() {
    long delta = getDelta();
    long divider = 10000000;
    float camx = 0, camy = 0, camz = 0;
    float roll = 0;
    if (Keyboard.isKeyDown(Keyboard.KEY_W)) {
        camz += 1.0f * delta / divider;
    }
    if (Keyboard.isKeyDown(Keyboard.KEY_S)) {
        camz -= 1.0f * delta / divider;
    }
    if (Keyboard.isKeyDown(Keyboard.KEY_D)) {
        camx -= 1.0f * delta / divider;
    }
    if (Keyboard.isKeyDown(Keyboard.KEY_A)) {
        camx += 1.0f * delta / divider;
    }
    if (Keyboard.isKeyDown(Keyboard.KEY_SPACE)) {
        camy -= 1.0f * delta / divider;
    }
    if (Keyboard.isKeyDown(Keyboard.KEY_C)) {
        camy += 1.0f * delta / divider;
    }
    if (Mouse.isButtonDown(0)) {
        roll += 1.0f * delta / divider;
    }
    if (Mouse.isButtonDown(1)) {
        roll -= 1.0f * delta / divider;
    }
    GL11.glTranslatef(camx, camy, camz);
    GL11.glTranslatef(160, 100, 0);
    GL11.glRotatef(roll, 0, 0, 1);
    GL11.glTranslatef(-160, -100, 0);
    } 
    ```

当我在 XY 平面上旋转和移动所有东西时，它工作得很好。但是当我尝试沿 Z 轴移动时，整个矩形消失了。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:46:24.067

好的，我在查看初始参数后自己得到了解决方案。这

```
GL11.glOrtho(0, 320, 0, 200, 1, -1); 
```

函数定义了渲染，并且此框外的所有内容都不会被渲染。因此，沿 z 轴移动后，该项目消失。我将渲染框更改为

```
GL11.glOrtho(0, 320, 0, 200, 100, -100); 
```

那行得通。

# java - 使用 Java 将 PDF 转换为 XML

> ID：14831528
> 
> 赞同：0
> 
> 时间：2013-02-12T11:31:08.700
> 
> 标签：java, xml, pdf, itext

我正在尝试创建一个原型以将 PDF 文件转换为 XML 文件。结果有点奇怪，所有的字符都变成了符号。我认为错误是`StringBuffer`从字节数组中获取数据的地方。有Java知识的人可以帮忙吗？

该原型软件正在使用`iText`API。为了阅读 PDF 文件，我们使用了`PDFReader`该类。数据先转换成字节数组，然后再用 ，`Stringbuffer`再转换成字符串。然后我们使用`StreamResult`wich 作为 XML 中转换结果的持有者。

之后，`Transformer`该类处理来自各种源的 XML，并将转换输出写入各种接收器。然后`TransformerHandler`侦听 SAX `ContentHandler`，解析事件并将它们转换为结果。

方法`startElement()`和`endElement()`类`TransformerHandler`在 xml 文件中创建了标签。Parser在 XML 文档中每个元素`startElement()`的开头和每个元素的结尾调用方法。`endElement()`

```
import com.lowagie.text.*;
import com.lowagie.text.pdf.*;
import java.io.*;
import javax.xml.parsers.*;
import javax.xml.transform.*;
import javax.xml.transform.sax.*;
import javax.xml.transform.stream.*;
import org.xml.sax.*;
import org.xml.sax.helpers.*;

public class Cp2x {

        static StreamResult streamResult;
        static TransformerHandler handler;
        static AttributesImpl atts;

        public static void main(String[] args) throws IOException {

                try {
                        Document document = new Document();
                        document.open();
                        PdfReader reader = new PdfReader("C:\\helloworld.pdf");
                        PdfDictionary page = reader.getPageN(1);
                        PRIndirectReference objectReference = (PRIndirectReference) page
                                        .get(PdfName.CONTENTS);
                        PRStream stream = (PRStream) PdfReader
                                        .getPdfObject(objectReference);
                        byte[] streamBytes = PdfReader.getStreamBytes(stream);
                        PRTokeniser tokeniser = new PRTokeniser(streamBytes);

                        StringBuffer string_buffer = new StringBuffer();
                        while (tokeniser.nextToken()) {
                                if (tokeniser.getTokenType() == PRTokeniser.TK_STRING) {
                                        string_buffer.append(tokeniser.getStringValue());
                                }
                        }
                        String test = string_buffer.toString();
                        streamResult = new StreamResult("test.xml");
                        initXML();
                        process(test);
                        closeXML();
                        document.add(new Paragraph(".."));
                        document.close();
                } catch (Exception e) {
                }
        }

        public static void initXML() throws ParserConfigurationException,
                        TransformerConfigurationException, SAXException {
                SAXTransformerFactory tf = (SAXTransformerFactory) SAXTransformerFactory
                                .newInstance();

                handler = tf.newTransformerHandler();
                Transformer serializer = handler.getTransformer();
                serializer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
                serializer.setOutputProperty(
                                "{http://xml.apache.org/xslt}indent-amount", "4");
                serializer.setOutputProperty(OutputKeys.INDENT, "yes");
                handler.setResult(streamResult);
                handler.startDocument();
                atts = new AttributesImpl();
                handler.startElement("", "", "Document", atts);
        }

        public static void process(String s) throws SAXException {
                String[] elements = s.split("\\|");
                atts.clear();
                handler.startElement("", "", "Note", atts);
                handler.characters(elements[0].toCharArray(), 0, elements[0].length());
                handler.endElement("", "", "Note");
        }

        public static void closeXML() throws SAXException {
                handler.endElement("", "", "Document");
                handler.endDocument();
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:31:09.587

正如@sudmong 所说，存在编码问题：`PRTokeniser`不应该用于从页面内容流**内部**读取字符串，它只能在外部内容流中正常工作，因为它假定特殊字符编码，而页面内容流中字符串的编码完全取决于在内容描述的该步骤中当前字体的编码。参照。[ISO 32000-1](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)第 7.3.4.2 节内容流外部字符串的*文字字符串*和内容流内部字符串的 9.6.6*字符编码*。

正如@BrunoLowagie 指出的那样，您还完全忽略了页面内容不仅在直接页面内容流中，而且在从那里引用的 XObjects 中，参见。[ISO 32000-1](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)第 8.10 节*表单 XObjects*。他还指出，内容流中的字符串不必按阅读顺序排列，参见。[同上](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)第 9.4 节*文本对象*。

您还忽略了页面字典的 Contents 条目的值可以是流或流数组：

> 该值应为单个流或流数组。如果该值是一个数组，则效果应该就像数组中的所有流都按顺序连接起来形成一个流一样。符合标准的编写者可以在图像对象和其他资源出现时创建它们，即使它们会中断内容流。流之间的划分可能只发生在词汇标记之间的边界（参见 7.2，“词汇约定”），但与页面的逻辑内容或组织无关。使用或生成 PDF 文件的应用程序不需要保留 Contents 数组的现有结构。符合标准的编写者不应创建不包含任何元素的 Contents 数组。

**[ISO 32000-1](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)**中的**第 7.7.3.3 节*页面对象*

 *如果您真的想自己编写解析器，最好先学习[ISO 32000-1](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)。

否则请查看`...text.pdf.parser`iText 的包，它已经是解析 PDF 内容的好工具。如果你喜欢它，你可以帮助改进它。*

# responsive-design - 响应式设计与自适应设计

> ID：14831530
> 
> 赞同：25
> 
> 时间：2013-02-12T11:31:13.590
> 
> 标签：responsive-design, adaptive-design

您能以简单的方式解释 RWD（响应式网页设计）和 AWD（自适应网页设计）之间的区别吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-12T11:41:48.387

自适应（AWD）：不一定设置在流体网格上；针对特定设备分辨率（320、768、1024 等）；可以设置宽度（固定）或相对宽度（%），由媒体查询控制。

响应式（RWD）：建立在流体网格上；无论屏幕分辨率如何，都会随着浏览器的变化而变化；如果需要，内容可以分解并重新调整。

简而言之：RWD 与 AWD 类似，只是进一步迈出了一两步，以便为未知设备和已知设备进行未来证明设计。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-25T08:46:58.633

### 流体布局

> 随着屏幕宽度的增加或减少，以**自动换行方式进行**调整。

## 自适应布局

> 有预定义的大小是触发不同的布局。这些被称为**断点**。自适应布局可以是流动的或完全静态的！

## 响应式布局

> **流体和自适应布局的结合**。提供最佳体验。

## 渐进增强

> 通过以一种智能的方式应用技术来尊重您的内容（和您的用户）的过程，**层层叠叠**。渐进式增强不需要您在不同的浏览器中提供相同的体验。

*资料来源：* [http ://bloggingexperiment.com/archives/responsive-web-design-rwd-vs-adaptive-web-design-awd.php](http://bloggingexperiment.com/archives/responsive-web-design-rwd-vs-adaptive-web-design-awd.php)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-18T19:20:27.827

从[我关于该主题的博客文章中](http://blog.easy-designs.net/archives/2011/11/16/on-adaptive-vs-responsive-web-design/)：

> “响应式网页设计”，由 Ethan Marcotte 创造，意思是“流体网格、流体图像/媒体和媒体查询”。我使用的“自适应网页设计”是关于创建适应用户能力（在形式和功能方面）的界面。对我来说，“自适应网页设计”只是“渐进式增强”的另一个术语，响应式网页设计可以（通常应该）成为其中不可或缺的一部分，但它是一种更全面的网页设计方法，因为它还考虑了不同的标记、CSS、JavaScript 和辅助技术支持级别。
> 
> 作为记录，我确实认为区分“自适应网页设计”和“自适应布局”很重要，因为“自适应布局”仅意味着使用媒体查询，这可能不会以渐进增强的方式完成。然而，以移动优先方式实现的自适应布局很可能是渐进式增强，因此是“自适应网页设计”的一种手段。</p>

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-07-23T16:44:12.717

我看到的另一个定义将其分解为魔术发生的地方：

*   **响应**式——*客户端*——向所有设备返回相同的页面，但页面的显示响应设备，通常使用 JavaScript 和 CSS（尤其是媒体查询）。
*   **自适应**--*服务器端*-- 将有关设备规格的信息传递给服务器，并返回适用于该设备的页面。这将使用一些与 RWD 相同的 JavaScript/CSS 技术，但某些内容可能不同/更小。

资料来源：[http ://www.huffingtonpost.com/garrett-goodman/adaptive-design_b_2344569.html](http://www.huffingtonpost.com/garrett-goodman/adaptive-design_b_2344569.html)

不确定这个定义如何与其他一些更多地谈论页面内容流的定义相吻合。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-12-14T04:54:19.837

**自适应网页设计和响应式网页设计之间**的区别比这个线程中提出的区别更广泛和更重要。区别既不在于软件功能所在的位置，也不在于 CSS 条件中使用的度量单位。

这两个术语（自适应或响应）都不是品牌，因此我们不应偏离这些词的基本定义。在计算机科学中，响应是在某种刺激下产生的动作、事件或消息。这个定义起源于生物学。响应光线的瞳孔扩张是一种响应式设计。

适应意味着比简单的编程响应更高的功能。培养可以扩张的学生的能力是一种适应性设计。适应需要存储历史及其以后的应用。在生物学中，适应需要 DNA 来存储适应。在网页设计中，调整可以存储在 cookie 或服务器上的用户帐户配置文件中。

让我们从两者中较简单的开始。响应式网页设计的一个很好的正式定义是：

> *响应式**网页设计**检查显示特征并以超越 HTML 的内置自动布局功能的方式在页面显示中即时响应，以在各种显示条件下提供方便、实用且最大程度地可见的体验。*

便携式设备已经提高了这种额外尺寸响应能力的重要性。许多这样的设计技术围绕着向 CSS（层叠样式表或表单）或通过脚本（例如 JavaScript）添加条件。每个基于显示特征的条件通过控制一组由 CSS 选择器标识的文档元素（标签）的特定样式参数的值来改善整体用户体验。*

使用 ADAPTIVE 的字典定义或常见的计算机科学定义，自适应网页设计的文档布局必须根据一些比简单的静态大小阈值更高的标准进行智能变化，这些标准是不断评估的。自适应网页设计的一个很好的定义是：

> ***自适应网页设计**记录使用模式和使用条件，并随着时间的推移进行调整，以更快、更全面或个性化地为用户提供内容和功能。*

与网页设计相关的“自适应”一词的其他一些用法过多地归功于另一种响应式设计方法，并不比任何其他方法更智能或更具适应性。

可以将简单的自适应方案编程到 JavaScript 中，以根据从 RestFUL 调用返回到服务器的 JSON 数据来改变 CSS，从而通过 SQL 或 NOSQL 从数据库中获取用户滚动和点击统计信息。更高级的用户体验分析可能使用基于规则的系统（例如 DRules 或 Prolog）或异步运行的模糊逻辑、神经网络或贝叶斯方案。

一个简单规则的示例是，“按从最常点击到最不常点击的顺序对链接进行排序，每 10 个显示将一个不太受欢迎的链接排在第二位，以确保元素可以随着时间的推移逐渐增加。”

琐碎的反馈形式是常见的反馈机制。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-03T11:16:50.347

区分流体、固定、响应和自适应布局的最佳链接之一。 [http://teamtreehouse.com/library/build-a-responsive-website/introduction-to-responsive-web-design/fixed-fluid-adaptive-and-responsive-2](http://teamtreehouse.com/library/build-a-responsive-website/introduction-to-responsive-web-design/fixed-fluid-adaptive-and-responsive-2)。简而言之，在您的 html 页面中应用的样式，

1.  固定布局：使用像素。
2.  流体布局：使用百分比。
3.  响应式布局：仅对媒体查询使用百分比
4.  自适应布局：在媒体查询中同时使用像素和百分比

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-25T16:29:43.543

简单地：

**RWD（响应式）：**是针对特定设备的网站的不同结构和设计。（主要是我们在谈论服务器端工作，因为我们在谈论不同的结构和不同的功能）

**AWD（自适应）：**是针对特定设备的具有相同结构的不同设计。（主要是我们在谈论客户端工作，因为我们只在谈论不同的设计）

**请注意，这两种技术旨在为特定设备创建更友好的不同用户体验**

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-08-09T07:33:36.727

**在网站设计的意义上：** **响应式设计：使用****流体网格**和**灵活的内容**（例如图像）和媒体查询（在 css 中）创建网页。这将根据浏览器/设备宽度调整布局。 **在自适应设计中：**使用固定布局创建网页既不是流体网格也不是灵活的内容。用特定点打破页面布局（例如使用媒体查询）。

# excel - 以编程方式取列的平均值，但不是 excel 中的 value = "3"

> ID：14831533
> 
> 赞同：0
> 
> 时间：2013-02-12T11:31:18.843
> 
> 标签：在使用vba, excel, vba

[在使用vba](/questions/tagged/vba "显示标记为“vba”的问题")的excel 中，我如何以编程方式取一列的平均值，不包括空字段和等于“3”的值。

我有一个标题为“isCompleted”的列，其中值可以是 0（否）或 1（是）或 3（不相关）

要查看已完成的数量，我将仅取 0 和 1 分数的平均值。我如何以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:51:24.733

*XL03*

```
With Application.WorksheetFunction
MsgBox .SumIf(Range("A:A"), "<3") / .CountIf(Range("A:A"), "<3")
End With 
```

*或者，假设您有 xl07 或更高版本*

我想你想要

```
MsgBox Application.WorksheetFunction.AverageIfs(Range("A:A"), Range("A:A"), "<3")

'or perhaps
MsgBox Application.WorksheetFunction.AverageIfs(Range("A:A"), Range("A:A"), "<=1") 
```

平均 0 和 1 值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:38:23.767

不需要 VBA，这个公式就可以了：

```
=SUMIFS(A:A,A:A,"<>3")/COUNTIFS(A:A,"<>3",A:A,">=0")

```

# c# - 如何修复根类需要装饰器实例的装饰器？

> ID：14831534
> 
> 赞同：2
> 
> 时间：2013-02-12T11:31:20.227
> 
> 标签：c#, design-patterns, decorator

我正在重构一个软件，试图使其更易于测试/DI 友好，并使其更具可扩展性。原始代码依赖于继承，但我认为装饰器会是一种更灵活的设计，因为我希望组件的最终用户能够在我正在创建的某些层下方插入层。

但是，我遇到了困难，因为基类中的一些代码传递`this`到了一些方法中。使用继承这不会是一个问题，因为它`this`会引用顶层类型，但是我在尝试弄清楚如何使用装饰器使其工作时遇到了麻烦。这是一个例子：

```
public interface INode
{
    bool IsReadOnly { get; }
    void DoSomething();
}

public class Node : INode
{
    public Node(ISomeFactory someFactory)
    {
        if (someFactory == null)
            throw new ArgumentNullException("someFactory");
        this.someFactory = someFactory;
    }

    private readonly ISomeFactory someFactory;

    public bool IsReadOnly { get { return false; } }

    public void DoSomething()
    {
        // Some implementation code here

        // This factory doesn't get an instance of the decorator type
        // when it is in use - this is a problem
        var someInstance = someFactory.Create(this);

        // More code here...
    }
}

public class LockableNode : INode
{
    public LockableNode(INode node, ILockingService lockingService)
    {
        if (node == null)
            throw new ArgumentNullException("node");
        if (lockingService == null)
            throw new ArgumentNullException("lockingService");

        this.innerNode = node;
        this.lockingService = lockingService
    }

    private readonly INode innerNode;
    private readonly ILockingService lockingService;

    public bool IsReadOnly { get { return lockingService.IsReadOnly; } }

    public void DoSomething()
    {
       if (this.IsReadOnly)
           throw new InvalidOperationException("Node is read-only");

       this.innerNode.DoSomething();
    }
} 
```

然后我的工厂做这样的事情：

```
var someFactory = new SomeConcreteFactory();
var lockingService = new LockingService();

var node = new Node(someFactory);
var lockableNode = new LockableNode(node, lockingService);
return lockableNode; 
```

我的评论中概述的问题是我试图装饰的代码中的某些地方，当前对象作为参数传递给其他方法，我需要一个装饰器对象的实例，当它在使用时，当前对象不是。除了在装饰器类中重新实现传递`this`到工厂的代码之外，有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:31:19.710

使实际`doSomething`成为需要装饰对象作为参数的方法：

**节点**

```
public void DoSomething()
{
    this.DoSomethingWith(this)
}
public void DoSomethingWith(INode it)
{
    // ...

    var someInstance = someFactory.Create(it);

    // ...
} 
```

**可锁定节点**

```
public void DoSomething()
{
    this.innerNode.DoSomethingWith(this);
}
public void DoSomethingWith(INode it)
{
    this.innerNode.DoSomethingWith(it);
} 
```

*编辑：*当然，您也必须更改界面。

```
public interface INode
{
    bool IsReadOnly { get; }
    void DoSomething();
    void DoSomethingWith(INode it);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:37:48.213

总之，就我而言，答案是使用继承。我确信装饰器模式在某处有其用途，但是向域对象添加功能以进行跨成员调用并将对自身的引用传递给其他对象不是它，特别是如果您无法控制何时或如何将来会在代码中插入其他引用或跨成员调用。

我发现另一个帖子有一些我没有尝试过的想法：

[使用装饰器设计模式时的一个问题](https://stackoverflow.com/questions/3859469/a-problem-when-using-the-decorator-design-pattern)

# ruby - 将请求重新发送到 RabbitMQ 和 Ruby 中的同一队列

> ID：14831539
> 
> 赞同：0
> 
> 时间：2013-02-12T11:31:40.100
> 
> 标签：ruby, rabbitmq, amqp

我有一个 ruby​​ 进程来消耗 RabbitMQ 队列：

```
AMQP.start(:host => $AMQP_URL) do |connection|
  @channel ||= AMQP::Channel.new(connection)
  @queue   ||= @channel.queue("results")

  @queue.subscribe do |body|
    puts "Received -> #{body}"       
    # Publish the same message again to the same queue 
  end
end 
```

我知道这不切实际，但我很想知道我应该如何将相同的消息发布到同一个队列，直接通道对我来说不起作用，如果有的话，甚至只是为了保留消息队列而不是删除它或只是再次重新发布味精会很棒

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:48:21.973

正确的做法是拒绝带有否定确认的消息，它将自动重新排队：

```
@queue.subscribe do |metadata, payload|
  # reject and requeue
  channel.reject(metadata.delivery_tag, true)
end 
```

无论如何，如果您想手动发布，前面示例中的“元数据”参数将为您提供所需的所有信息。

# jsf - ui:repeat 中的动态 h:outputScript 名称属性

> ID：14831545
> 
> 赞同：3
> 
> 时间：2013-02-12T11:32:02.607
> 
> 标签：jsf, jsf-2

我正在使用`com.sun.faces`版本`2.1.18`。我正在显示一个问题列表，对于一些问题（基于数据库 ID），我想插入一些动态 Javascript。

根据[`h:outputScript`标签规范](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/h/outputScript.html)，该`name`属性的类型为：（`javax.el.ValueExpression`必须评估为`java.lang.String`）。

但是，这段代码对我有用：

```
<ui:repeat value="#{js.questionScripts[question.id]}" var="script">
  <h:outputScript name="myScript.js" library="js" target="head"/>
</ui:repeat> 
```

但是这段代码不是：

```
<ui:repeat value="#{js.questionScripts[question.id]}" var="script">
  <h:outputScript name="#{script}" library="js" target="head"/>
</ui:repeat> 
```

来自`#{question}`围绕`<ui:repeat>`问题列表的迭代。

我添加了一个输出来查看它是否`#{script}`不为空，但它包含正确的资源名称。

关于如何解决这个问题或实施替代方案的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:20:00.507

必须在`<h:outputScript>`视图构建期间创建，以便 JSF 资源管理识别。在`<ui:repeat>`视图渲染期间运行，因此为时已晚。你必须使用`<c:forEach>`. 我不确定它是如何失败的，但它对我来说很好，前提是它`#{js}`是一个请求、会话或应用程序范围的 bean，其`questionScripts`属性在其（后）构造期间已经准备好，并且`#{question.id}`在视图构建期间可用。

```
<c:forEach items="#{js.questionScripts[question.id]}" var="script">
    <h:outputScript name="js/#{script}" target="head"/>
</c:forEach> 
```

*（请注意，您必须使用`items`属性而不是`value`属性，还请注意，我修复了[属性看似](https://stackoverflow.com/questions/11988415/what-is-the-jsf-resource-library-for-and-how-should-it-be-used)[不当的使用`library`](https://stackoverflow.com/questions/11988415/what-is-the-jsf-resource-library-for-and-how-should-it-be-used)）*。

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

# c# - 对序列进行上采样

> ID：14831555
> 
> 赞同：1
> 
> 时间：2013-02-12T11:32:38.997
> 
> 标签：c#, system.reactive

如何对 RX 序列进行上*采样*，即使其更频繁地触发？

.Sample 运算符只允许下采样：

```
IObservable<long> source = Observable.Interval(TimeSpan.FromMilliseconds(5000));
IObservable<long> trigger = Observable.Interval(TimeSpan.FromMilliseconds(1000));

//var triggeredSource = source.Sample(trigger);
var triggeredSource = source.Sample(TimeSpan.FromMilliseconds(1000)); 

source.Subscribe(Console.WriteLine);
triggeredSource.Subscribe(Console.WriteLine); 
```

这里 triggerSource 仅每 5000 毫秒触发一次，而不是 1000 毫秒。我们想要：

```
source:  ----a----b----c----d------
trigger: -o-o-o-o-o-o-o-o-o-o-o-o-o
result:  ----aa-a-b-b-bcc-c-d-d-d-d 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:52:38.913

您可以获得您想要使用的行为`CombineLatest`- 从概念上讲，这是一个`Get Last Value`加号`Merge`：

[编辑：只有在你在评论中提到这一点后才意识到——这可能是你会得到的最“有效”的方式]

```
IObservable<long> source = Observable.Interval(TimeSpan.FromMilliseconds(500));
IObservable<long> trigger = Observable.Interval(TimeSpan.FromMilliseconds(100));

var triggeredSource = source.CombineLatest(trigger, (src, trig) => src);

using(triggeredSource.Subscribe(Console.WriteLine))
{
    Console.ReadLine();
} 
```

# c# - 启用以管理员身份启动，在安装路径中添加清单文件

> ID：14831556
> 
> 赞同：0
> 
> 时间：2013-02-12T11:32:52.587
> 
> 标签：c#, manifest, uac

我有一个作为标准用户运行良好的应用程序。我希望能够执行以下操作：当我将清单文件（我不想嵌入它，否则应用程序将始终以管理员身份运行）复制到安装文件夹时，应用程序应始终以管理员身份启动。

这是我在名为 myappname.exe.manifest 的文件中插入的文本

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel level="requireAdministrator" uiAccess="false"/>
      </requestedPrivileges>
    </security>
  </trustInfo>
</assembly> 
```

我希望将它复制到安装文件夹中就足以让应用程序以管理员身份自动启动，但它没有按预期工作。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T08:56:36.617

很可能您嵌入了默认清单文件，该文件在 Windows Server 2003+ 上覆盖了外部清单（直到 Windows XP，外部清单覆盖了内部清单）。要解决此问题，您可以构建没有清单文件的应用程序（项目属性/应用程序/清单 -> 创建没有清单的应用程序）。还要记住清单文件的正确命名，即 MyAppName.exe.manifest

# c# - javascript调用类方法

> ID：14831559
> 
> 赞同：0
> 
> 时间：2013-02-12T11:32:53.583
> 
> 标签：c#, javascript, asp.net

我的`Default.aspx`页面中有一个方法，我想知道如何通过 JavaScript 每 5 秒调用一次该方法？

```
protected void GetSlideNumber()
{
    var repos = new PresentationService();
    int slide = repos.GetSlideNumber();

    ceckSlide.Text = slide.ToString();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:36:53.377

使用 AJAX 它可以帮助你。更多信息可在[此链接](http://api.jquery.com/jQuery.ajax/)中找到。

```
$.ajax({ type: "POST", 
        url: pageMethod,
        data: "",
        success: function (result, status) {
        alert("success");
    },
    error: function (xhr, status, error) {
        alert("ERROR");
    }

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:38:12.957

像下面..

```
<script>
   window.setInterval(function(){
       GetSlideNumber()
   }, 1000);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:40:23.583

将此方法设为`[WebMethod]`并用于`AJAX`所有此方法

```
$.ajax({
  type: "POST",
  url: "PageName.aspx/MethodName",
  data: "{}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function(msg) {
    // Do something interesting here.
  }
}); 
```

[在此处](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)参考[Web 方法](http://msdn.microsoft.com/en-us/library/byxd99hx%28v=vs.71%29.aspx)
更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T12:02:19.313

尝试这个..

```
<script>
function sample()
{
alert("<%=GetSlideNumber()%>");
} 
</script> 
```

# iphone - 获取 UIImage 两个不同图像部分的面积

> ID：14831567
> 
> 赞同：1
> 
> 时间：2013-02-12T11:33:08.973
> 
> 标签：iphone, ios, objective-c

![在此处输入图像描述](../Images/bf828bb12df1d4378a4d35b33a925385.png)

这是我在图像视图上显示的 UIImage。我的要求是根据像素分别获得这两种不同形状的面积。我尝试了很多。目前，我正在添加由这两个区域包围的像素。我怎样才能以不同的方式获得这些区域是否有任何库或算法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:18:19.657

我在 C 中做过类似的事情。有一个简单的算法，您可能对[http://en.wikipedia.org/wiki/Connected-component_labeling感兴趣](http://en.wikipedia.org/wiki/Connected-component_labeling)

# php - 使用 XML 在输出中显示图像

> ID：14831569
> 
> 赞同：1
> 
> 时间：2013-02-12T11:33:16.700
> 
> 标签：php, xml

我已完成以下代码从 URL 中提取图像，但出现 XML 解析错误。如何显示包含所有 XML 输出的图像？

```
$error = true;
$msg = 'profile';
header('Content-type: text/xml');
echo '<?xml version="1.0" encoding="UTF-8"?>';
if($error)
{
    echo "<response>";
    echo "<success>S</success>";
    echo "<message>".trim($msg)."</message>";
    echo "<userid>".trim($userid)."</userid>";
    echo "<username>".trim($username)."</username>";
    echo "<firstname>".trim($firstname)."</firstname>";
    echo "<lastname>".trim($lastname)."</lastname>";
    echo "<email>".trim($email)."</email>";
    echo "<follower>".trim($follower)."</follower>";
    //echo "<photo><img src=photo/".trim($photo) ." height='200' width='200'></photo>";
    echo "</response>";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:48:34.973

对于这样一个简单的 XML 块，您可以使用[PHP 的 SimpleXML API](http://php.net/book.simplexml)来生成`<response>`XML 块。对于 XML 文档本身和没有属性的直接元素，它类似于：

```
$response          = new SimpleXMLElement('<response/>');
$response->success = 5;
$response->message = trim($msg); 
```

对于带有 img 子元素和属性的 photo 元素，如下所示：

```
$img           = $response->addChild('photo')->addChild('img');
$img["src"]    = "photo/" . trim($photo);
$img["height"] = 200;
$img["width"]  = 200; 
```

*当您在 Google 上搜索“SimpleXML 基本示例”*时，您会在 PHP 手册中找到与此类似的 PHP 示例以及更多信息。

如您所见，您不需要关心这里的 XML 编码，SimpleXML API 会为您完成这项工作。

然后输出类似直截了当：

```
header('Content-type: text/xml');
echo $response->asXML(); 
```

我希望这会有所帮助，示例性输出是：

```
<?xml version="1.0"?>
<response><success>5</success><message>profile</message><photo><img src="photo/nice-day.jpg" height="200" width="200"/></photo></response> 
```

并美化：

```
<?xml version="1.0"?>
<response>
    <success>5</success>
    <message>profile</message>
    <photo>
        <img src="photo/nice-day.jpg" height="200" width="200"/>
    </photo>
</response> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:38:39.907

XML 不能使用 <img src=...> 标记来显示图像。那是一个 HTML 标签。您可以拥有应用程序可以读取然后呈现的图像的 URL，但这是特定于应用程序的（即浏览器、移动电话或桌面应用程序） - 这是 XML 的重点，它是通用的，并且不依赖于单一应用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:46:19.970

使用单引号对标签进行`src`赋值和关闭`img`

```
 $error=true;
       $msg='profile';
       header('Content-type: text/xml');
       echo '<?xml version="1.0" encoding="UTF-8"?>';
       if($error)
       {
               echo "<response>";
               echo "<success>S</success>";
               echo "<message>".trim($msg)."</message>";
               echo "<userid>".trim($userid)."</userid>";
               echo "<username>".trim($username)."</username>";
               echo "<firstname>".trim($firstname)."</firstname>";
               echo "<lastname>".trim($lastname)."</lastname>";
               echo "<email>".trim($email)."</email>";
               echo "<follower>".trim($follower)."</follower>";
               echo "<photo><img src='photo/".trim($photo)."' height='200' width='200'></img></photo>";
               echo "</response>";
       } 
```

# c# - AltChunk 破坏富文本内容控件

> ID：14831570
> 
> 赞同：2
> 
> 时间：2013-02-12T11:33:27.403
> 
> 标签：c#, ms-word, vsto, openxml

我使用`AltChunk`对象将数据从`docx`文件复制到另一个文件中的富文本内容控件。副本工作正常。但是现在内容控件不能转换为`SdtElement`OpenXml 中的 a 或`ContentControl`VSTO 中的 a。

这是我使用的代码

```
SdtElement sdtElement = destinationdocument.MainDocumentPart.Document.Body.Descendants<SdtElement>().Where(b => b.SdtProperties.GetFirstChild<Tag>() != null).FirstOrDefault();
string altChunkId = "AltChunkId" + Guid.NewGuid().ToString();
AlternativeFormatImportPart chunk = destinationdocument.MainDocumentPart.AddAlternativeFormatImportPart(AlternativeFormatImport    PartType.WordprocessingML, altChunkId);
chunk.FeedData(File.Open("sourceFile", FileMode.OpenOrCreate));
AltChunk altChunk = new AltChunk();
altChunk.Id = altChunkId;
sdtElement.RemoveAllChildren();
sdtElement.Append(altChunk); 
```

第一次代码工作正常。但是在第二次运行时，第一行抛出了一个无法转换的异常。在客户端使用 VSTO 时会出现同样的问题，该`ContentControl`对象无法保存`AltChunk`插入的内容控件。不知何故，此过程破坏了富文本内容控件。

有什么我做错了吗？还是有更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:38:18.900

`wordDocument.MainDocumentPart.Document.Body.Descendants<SdtElement>()`返回`IEnumerable<SdtElement>`，您将其分配给`SdtElemtnt`. 尝试使用`var`或实际返回类型。

**更新：**

您的代码是有效的。你做错的是这条线`sdtElement.RemoveAllChildren();`

一个 sdt 元素（内容控件）包含其他元素，如 sdtPr（内容控件属性）、sdtContent（内容控件内的实际内容）等，如下所示。

```
 <w:sdt>
    <w:sdtPr>
        ...
    </w:sdtPr>
    <w:sdtContent>
      ....
    </w:sdtContent>
  </w:sdt> 
```

您`sdtElement.RemoveAllChildren();`所做的是删除 sdt 元素内的所有内容并将它们替换为：

```
<w:sdt>
   <w:altChunk r:id="AltChunkIdffebf242-30b3-4905-bf39-fc0077be9474" />
</w:sdt> 
```

这使您的程序在第二次运行时抛出异常，因为`destinationdocument.MainDocumentPart.Document.Body.Descendants<SdtElement>().Where(b => b.SdtProperties.GetFirstChild<Tag>() != null).FirstOrDefault();`您替换的文档 sdt 元素有 no`SdtProperties`和 no `Tag`or `sdtContent`。

要解决此问题，请尝试将您的 altchunk 块插入内容控制内容元素 ( `sdtContent`) 而不是直接插入 sdt 元素，如下所示：

```
using (
    FileStream fileStream = File.Open("file.docx",
                                        FileMode.Open))
{
    chunk.FeedData(fileStream);
    AltChunk altChunk = new AltChunk();
    altChunk.Id = altChunkId;
    //sdtElement.RemoveAllChildren();
    sdtElement.Elements<SdtContentBlock>().FirstOrDefault().Append(altChunk); // This is going to add to the existing content.
} 
```

希望这可以帮助！

# ravendb - URL 作为 RavenDB 中的键

> ID：14831576
> 
> 赞同：2
> 
> 时间：2013-02-12T11:33:55.950
> 
> 标签：ravendb

在 RavenDB 中使用 URL 作为键的最佳方式是什么？

不幸的是，更新项目的语义在文档中并不清楚：如果键以反斜杠结尾，它总是一个插入，否则如果键已经存在，它可能是一个更新。

但是[URL 可以以斜线结尾](http://googlewebmastercentral.blogspot.co.uk/2010/04/to-slash-or-not-to-slash.html)，而[RavenDB 使用终止斜线来生成密钥](http://ravendb.net/docs/client-api/basic-operations/saving-new-document)

> RavenDB 还支持身份的概念，例如，如果您需要连续的 ID。通过在实体中创建字符串 Id 属性，并将其设置为以斜杠 (/) 结尾的值，您可以告诉 RavenDB 将其用作实体的键前缀。在您调用 SaveChanges() 后，该前缀后跟下一个可用的整数 ID 将是您的实体 ID。并且该正斜杠无法重新配置。所以它并没有真正“支持”它，而是强制执行它。

编辑：同一个 RavenDB 文档页面说明了以下内容，这与观察到的行为不对应：

> 您可以为文档分配您可以想象的任何 ID。一切都会正常工作，但是您必须注意，当具有自定义生成 ID 的文档数量非常多（数百万个文档）时，某些类型的 ID 可能会导致性能问题。

选项包括： 1\. 修改您的 url 以删除结尾斜杠 2\. Url 对 url 进行编码（如 RavenDB 维护人员所建议的那样） 3\. 修改架构并使用数据库生成的 ID

在大多数情况下，选项 1 应该是安全的。选项 2 会使密钥不可读，而且我还没有设法使其工作（可能是 RavenDB 或我的代码中的错误）。选项 3 似乎不必要地使架构复杂化。

一般来说，最好的行动方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:24:21.367

我想这是一个偏好问题——但我认为 URL 不是很好的键。其他人不同意。请参阅支持论坛上的[此讨论。](https://groups.google.com/d/topic/ravendb/XKNPOW63_pQ/discussion)

我会认真考虑为什么需要它作为键，以及是否可以索引 url。例如：

```
public class Site
{
    public string Id { get; set; } // such as "sites/1"
    public string Name { get; set; }
    public string Url { get; set; }
}

var q = session.Query<Site>().Where(x=> x.Url == "http://foo/bar"); 
```

使用它作为键的理由是 URL 应该唯一地表示资源，但是当您考虑 http 与 https、可选的查询字符串参数等时，情况并非总是如此。

此外，RavenDB 文档键不区分大小写，而 URL（通常）区分*大小写*。许多 Web 服务器会忽略基本 url 上的大小写，但仍然由 Web 应用程序决定如何对查询字符串参数区分大小写或不区分大小写。`http://foo/bar?q=abc`所以它完全有可能`http://foo/bar?q=ABC`引用两个独立的资源，但在 Raven 中它们将被视为相同的文档键。

如果您觉得必须使用 URL 作为文档键，那么正如 Ayende 所说，您应该以某种方式转义它们，可能像这样：

```
// to escape
var key = Uri.EscapeDataString(url);

// to unescape
var url = Uri.UnescapeDataString(key); 
```

我确信还有其他转义或编码格式也可以，这似乎是最简单的一种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:32:34.527

如果要将 URL 用作文档键，则需要对 URL 进行转义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-18T09:17:04.980

让我在这里从一个从业者的角度来插话。我必须将 OpenIds 作为文档键存储在 RavenDb 中，所以很自然地出现了这个问题。虽然最近的版本已经修复了与作为文档键的逃逸 URL 有关的问题，但我仍然不推荐它，因为我遇到了各种错误。我报告了其中一些，它们得到了修复，但我最终放弃了。

我首先开始在 URL 上使用 base64 编码，但很快发现这可能会导致超过 RavenDb 限制的长文档键，并且您会看到服务器端 Esent ColumnTooBig 异常。

由于这些 ID 变得太长（合法的 URL 可能[长达 2000 个字符](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url-in-different-browsers)），我已经开始使用它们的 base64 编码的 SHA-Hashes。不能说它很优雅，但它工作得很好。

# java - sphinx4：在连接管理器处获取空指针异常

> ID：14831577
> 
> 赞同：0
> 
> 时间：2013-02-12T11:34:12.000
> 
> 标签：java, sphinx4

> 在这里我得到空指针异常：ConfigurationManager cm = new ConfigurationManager(url);

```
public static void main(String[] args) throws IOException,
        InstantiationException, ClassNotFoundException, SQLException {
    HelloWorld h = new HelloWorld();

    h.setVisible(true);
    try {
        URL url;

        if (args.length > 0)
            url = new File(args[0]).toURI().toURL();
        else {
            url = HelloWorld.class.getResource("helloworld.config.xml");
        }

        System.out.println("Loading...");
        ConfigurationManager cm = new ConfigurationManager(url);

        Recognizer recognizer = (Recognizer) cm.lookup("recognizer");
        Microphone microphone = (Microphone) cm.lookup("microphone");

        recognizer.allocate();

        if (microphone.startRecording()) {
            System.out.println("Say: Something");

            while (true) {
                String printOnTextArea = null;
                System.out
                        .println("Start speaking. Press Ctrl-C to quit.\n");

                Result result = recognizer.recognize();

                if (result != null) {
                    String resultText = result.getBestFinalResultNoFiller(); 
```

请让我知道如何解决这个问题。？

> 问题已解决，因为我已将配置文件放在 HelloWorld.java 的同一包中，但在识别器识别器 = (Recognizer) cm.lookup("recognizer"); 处找不到另一个类异常；请告诉我如何解决它。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:10:28.037

我希望错误是由于 url 为空。

如果是这种情况

将文件放入您的包中

给文件路径为

`HelloWorld.class.getResource("package-name/helloworld.config.xml");`

否则，如果您没有定义任何包，则将文件放在 src 文件夹中。希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:36:12.050

这意味着您的变量**`url`包含 value`null`**。由于 a`new File(...)`不会返回`null`，`HelloWorld.class.getResource("helloworld.config.xml");`所以会。确保此资源存在。

# highcharts - 数据点悬停时的 HighCharts.StockChart 工具提示标签不正确

> ID：14831579
> 
> 赞同：2
> 
> 时间：2013-02-12T11:34:17.180
> 
> 标签：highcharts

我正在尝试以渐进的方式向图表添加新点。添加新点并设置新的最小值/最大值后，工具提示标签显示不正确。

小提琴：http: [//jsfiddle.net/aAFLX/](http://jsfiddle.net/aAFLX/)

```
$(function() {
    Highcharts.setOptions({
        global : {
            useUTC : false
        },
        scrollbar:{
            enabled: true
        },
        lang: {
            rangeSelectorZoom: ' '
        }
    });

    var dataPoints = [[1293820200000, 45], [1293733800000, 25], [1293647400000, 65]]
    var counter = 0;

    var chart = new Highcharts.StockChart({
        chart: {
            renderTo: 'container'
        },
        rangeSelector: {
           enabled: false
        },
        navigator: {
          enabled: false
        },
        scrollbar : {
            enabled : false
        },        
        yAxis: {
            min: 0,
            max: null
        },
        xAxis: {
            type: 'datetime',
            linecolor: '#bbccdd',
            gridLineColor:'#bbccdd',
            tickInterval: 86400000,
            min: 1293820200000,
            max: 1294079400000
        },
        series: [{
            name: 'Count',
            data : [[1293906600000, 56]],
            type : 'column',
        }]
    });

    $('#button').click(function() {
        if(counter == dataPoints.length) {
            return;
        }
        var point = dataPoints[counter++];
        var d = new Date(point[0]);
        var min = d.setDate(d.getDate() - 1);

        chart.xAxis[0].setExtremes(min,null);
        chart.series[0].addPoint(point);
    });
}); 
```

知道有什么问题吗？我是否遗漏了某些内容或错误地使用了 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:07:18.477

Highstock 不会对输入数据进行自动排序，所以在给 Highstock 时必须进行排序。我认为这是造成问题的原因。

所以在添加新点时，添加的点必须比上一个点在时间上更晚。

我通过对数据点进行排序修改了你的[jsfiddle](http://jsfiddle.net/aAFLX/3/)：

```
dataPoints.sort(function (a, b) {
    return a[0] - b[0];
}); 
```

并将第一个点移回时间。（还删除了对 setExtremes 的调用以保持所有点都在视图中，但这与问题无关）。

# c# - 实体框架获取依赖计数

> ID：14831591
> 
> 赞同：0
> 
> 时间：2013-02-12T11:34:48.583
> 
> 标签：c#, entity-framework

我有一个我想显示的实体列表，每行上都有一个标志，指示是否可以删除这个特定的实体 - 引用此实体 ID 的其他表中的记录计数的“正在使用”总和。> 0 表示不能删除。

曾经通过存储过程来做到这一点 - 想知道是否有 EF / Linq 方式来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:36:53.127

尝试类似以下的操作：

```
int count = entity.DependencyEntities.Count(); 
```

* * *

参考： [Enumerable.Count 方法](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.count.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:37:50.180

就像是：

```
if (yourEntity.RelatedEntities.Any(e => e.InUse == true))
{
    // Can't delete
} 
else
{ 
    // Can delete
} 
```

# php - Gmail 无法接收带有超链接的 html 电子邮件

> ID：14831596
> 
> 赞同：0
> 
> 时间：2013-02-12T11:35:05.160
> 
> 标签：php, sendmail

我必须向任何电子邮件帐户发送电子邮件。我写了这段代码：

```
$sender = "Me";
$from = "me@domain.com";
$recipient = 'somebody@gmail.com';
$message = "
<!DOCTYPE html>
<head>
<title>Title</title>
</head>
<body>
<p><a href=\"http://www.something.net/verification.php?key=".$code."\">Click here</a></p>
</body>
</html>
";
$subject = "subject";
$headers   = array();
$headers[] = "MIME-Version: 1.0";
$headers[] = "Content-type: text/html; charset=iso-8859-1";
$headers[] = "From: <".$from.">";
$headers[] = "X-Mailer: PHP/".phpversion();
mail($recipient, $subject, $message, implode("\r\n", $headers)); 
```

我的问题是，如果我将此消息发送到 gmail 帐户，接收者不会收到它。如果我错过了超链接，或者我只是错过了超链接中的“/”，它会起作用并且我会收到电子邮件。

我不明白为什么？我的代码中缺少什么？

如果我将此邮件发送到另一个域，而不是 gmail，它可以正常工作。只是 gmail 不会向我显示带有超链接的电子邮件。怎么了？任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:39:04.377

消除

```
<!DOCTYPE html>
<head>
<title>Title</title>
</head>
<body> 
```

并有相应的结束标记。因此，您面临问题。

# android - 无法从 callfire api 播放 .wav 文件

> ID：14831605
> 
> 赞同：0
> 
> 时间：2013-02-12T11:35:35.397
> 
> 标签：android, cordova, sencha-touch-2

我们在我们的 Android 应用程序中使用 callfire API（使用 sencha 和 phonegap 构建的混合应用程序）。该应用程序的概念是在列表中显示录制的通话，单击列表中的任何通话都会播放录制的音频文件（.wav 格式）。现在的问题是我们无法在我们的应用程序中播放该文件。我们还尝试直接在 Android 手机浏览器上播放该 URL，但也没有成功。

这是音频文件格式的 URL 之一[https://www.callfire.com/cloud/1/files/recording/dynamic/864c81f4a8e6a898042cb47251ca1c85/2012/8/6065312/cid_1319779221_1.wav](https://www.callfire.com/cloud/1/files/recording/dynamic/864c81f4a8e6a898042cb47251ca1c85/2012/8/6065312/cid_1319779221_1.wav)

当我们将此音频文件放入我们的服务器并尝试在我们的应用程序中播放它时，它运行良好。

你能告诉我们这背后的原因是什么吗？

我们正在使用带有软件版本 2.2 的三星 Galexy Y 进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-17T14:39:31.407

您似乎在引用旧版本的 CallFire API。有一个新接口与一个提供 GetSoundData 方法的新 API 相结合。调用此方法返回原始 MP3 数据，您也可以请求 WAV。

[https://www.callfire.com/api-documentation/version/1.1/CallService/GetSoundData](https://www.callfire.com/api-documentation/version/1.1/CallService/GetSoundData)

该文档提供了一个 PHP 示例，但如果您移植到另一种语言，则参数应该相同。

```
<?php
/**
 * You'll need your login/password pair when you create the SOAP client.
 * Don't use the fake login/password provided here; it's just for show and
 * won't work.
 */
$wsdl = "http://callfire.com/api/1.1/wsdl/callfire-service-http-soap12.wsdl";
$client = new SoapClient($wsdl, array(
    'soap_version' => SOAP_1_2,
    'login'        => 'YourLoginId',    
    'password'     => 'YourPassword'));
/**
 * GetSoundData. Get raw binary sound data (MP3 or WAV) for stored sound asset.
 */
$request = new stdclass();
$request->Id = 9; // long required  
$request->Format = 'MP3'; // SoundFormat   [WAV, MP3]
$response = $client->GetSoundData($request);
$byteCount = file_put_contents("my_returned_sound.mp3", $response);
echo "byteCount: " . $byteCount;
// Sample response:
// byteCount: 22749
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:10:05.450

您可以使用[此处](http://www.areweplayingyet.org)提供的 HTML5 音频测试来检查您设备的浏览器是否支持它，但听起来好像不支持。

# java - 什么是四人帮设计模式

> ID：14831606
> 
> 赞同：44
> 
> 时间：2013-02-12T11:35:36.063
> 
> 标签：java, design-patterns, gang-of-four

我最近才知道 Java 中有一种设计模式，称为四人组 (GoF)。我无法理解它是什么以及它的用途。任何人都可以让我清楚这一点吗？提前致谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-12T11:38:38.017

> [DesignPatternsBook](http://c2.com/cgi/wiki?DesignPatternsBook)的作者被称为**“四人帮”。**这本书的名字（“Design Patterns: Elements of Reusable Object-Oriented Software”）对于电子邮件来说太长了，所以“book by the gang of four”就成了它的简称。
> 
> 毕竟，它不是唯一一本关于模式的书。这被缩短为“GOF book”，当你第一次听到它时，它非常神秘。

来源：[http ://c2.com/cgi/wiki?GangOfFour](http://c2.com/cgi/wiki?GangOfFour)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-12T11:39:07.043

四人帮不是设计模式，它是 Erich Gamma、Richard Helm、Ralph Johnson 和 John Vlissides 所著的*“设计模式：可重用的面向对象软件的元素”*一书的俗称（因此是四人帮）。请注意，Gang of Four 或 GoF 用于指代作者组或书籍本身。

另见[http://en.wikipedia.org/wiki/Design_Patterns](http://en.wikipedia.org/wiki/Design_Patterns)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T11:38:48.260

四人帮 (GOF) 指的是本书的作者：

> 设计模式：可重用的面向对象软件的要素

来自[维基](http://en.wikipedia.org/wiki/Design_Patterns)：

> Design Patterns: Elements of Reusable Object-Oriented Software 是一本软件工程书籍，描述了软件设计中常见问题的重复解决方案。这本书的作者是 Erich Gamma、Richard Helm、Ralph Johnson 和 John Vlissides，前言由 Grady Booch 撰写。作者通常被称为四人帮、GoF 或 Go4

# eclipse - 三星 SDK 4 Eclipse 缺少插件

> ID：14831615
> 
> 赞同：1
> 
> 时间：2013-02-12T11:36:07.987
> 
> 标签：eclipse, sdk, samsung-smart-tv

我刚刚安装了 SDK 版本 4，而 Eclipse IDE 没有任何三星插件，它似乎是一个简单的基本 JAVA 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:44:44.733

好的，您必须使用管理员权限打开 eclipse，我在另一个问题“[我可以将三星智能电视的 sdk 安装到现有的 eclipse 中吗？](https://stackoverflow.com/questions/13312950/can-i-install-the-sdk-for-samsung-smart-tv-into-an-existing-eclipse?rq=1) ”中找到了答案，但问题本身并不是专门针对这个问题的。

# wpf - 绑定到 WPF DataGrid 中的选定项目

> ID：14831616
> 
> 赞同：2
> 
> 时间：2013-02-12T11:36:09.793
> 
> 标签：wpf, mvvm, datagrid, selecteditem

我想知道谁是 DataGrid 中的选定项（将它们插入到 ViewModel 中的集合中）。

当我绑定到所选项目时，仅当我单击行（1 行）时才会更改，但是当我按 ctrl + 单击时它仍然是第一个项目，为什么会发生这种情况，是否可以链接所有所选项目？

这是我的数据网格：

```
<DataGrid SelectedIndex="{Binding SelectedXIndex}" DataContext="{Binding XViewModel}" SelectedItem="{Binding CurrentX}" ItemsSource="{Binding ListX, Mode=TwoWay}" AutoGenerateColumns="False" >
    <DataGrid.Columns>
     ...
    </DataGrid.Columns>
</DataGrid> 
```

在 XViewModel 我有：

`SelectedXIndex`(int) 用于选定的索引

`CurrentX`（类 x 的对象）用于当前选择

`ListX`- x 类列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:08:03.637

你看过“SelectedItems”（不是SelectedItem）集合吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T04:51:42.863

我已经发布了一种技术，该技术仅通过扩展 DataGrid 就允许只读绑定到 WPF DataGrid 的 SelectedItems 属性。[你可以在https://stackoverflow.com/a/16953833/62278](https://stackoverflow.com/a/16953833/62278)看到我的回答

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T11:43:24.907

我提出的第一个建议没有奏效。我离开他们只是出于历史原因。

我最终认为问题在于您想要做的事情有点奇怪 - 或者容易出错。当您希望能够选择多个时，您将绑定到 SelectedItem（一项）。

我个人不会在 xaml 中放置任何绑定（当然除了 ItemsSource），并使用后端代码中的 selectionChanged 事件跟踪选择更改。[在此处](https://stackoverflow.com/questions/2511708/databinding-a-listbox-with-selectionmode-multiple)找到支持此方法的具有类似问题的链接

希望你能找到更好的解决方案

**旧建议：**

这应该可以解决问题，因为您似乎将其视为单一模式选择 Datagrid，但您并没有明确地将其定义为：

```
<DataGrid SelectionMode="Single" 
```

如果您希望选择模式为多种，则不应绑定到 SelectedIndex

我还想知道为什么您同时具有 SelectedIndex 绑定和 SelectedItem 绑定。在任何情况下，都应该只需要一个。

只保留 SelectedItem 绑定将 SelectionMode 设置为 Extended，然后重试

# php - stream_context_set_params 不适用于 ssh2.sftp 包装器

> ID：14831620
> 
> 赞同：2
> 
> 时间：2013-02-12T11:36:14.837
> 
> 标签：php, sftp, libssh2

我想使用[这里](http://www.php.net/manual/en/function.stream-notification-callback.php)的功能。请检查下面的代码

```
function notify (
    $notification_code,
    $severity,
    $message,
    $message_code,
    $bytes_transferred,
    $bytes_max
) {
    echo "Runned \n";
};

$ctx = stream_context_create();
stream_set_params($ctx, array('notification' => 'notify'));
$ssh_connection = ssh2_connect('myhost');
ssh2_auth_password($ssh_connection, 'login','pass');
$sftp_resource = ssh2_sftp($ssh_connection);
$data = file_get_contents("ssh2.sftp://{$sftp_resource}/path/to/big/file",
            false, $ctx); 
```

我希望我的 notify 函数至少会被调用一次。实际上，相同的代码适用于 ftp 包装器

```
function notify (
    $notification_code,
    $severity,
    $message,
    $message_code, 
    $bytes_transferred,
    $bytes_max
) {
    echo "Runned \n";
};

$ctx = stream_context_create();
stream_set_params($ctx, array('notification' => 'notify'));
$scheme = 'ftp';
$data = file_get_contents("{scheme}://username:password@host:port/path/to/file",
            false, $ctx); 
```

它工作正常！通知函数被多次调用。我尝试像这样使用 sftp 包装器

```
$data = file_get_contents("ssh2.sftp://username:password@host:port/path/to/big/file",
            false, $ctx); 
```

而且它也不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:12:45.407

ssh2 扩展不支持通知回调。我不知道这是设计使然还是没有实现，但扩展代码缺少对以下函数的调用：

来自 (PHP-5.4.10) /ext/standard/ftp_fopen_wrapper.c，第 573 行：

```
php_stream_notify_progress_init(context, 0, file_size); 
```

一种我尚未测试过的**解决方法**`ftps://`可能是使用（FTP over ssl）。它应该满足您的安全需求，并且 - 正如代码所示 - 将支持作为 ftp 的通知。详细地说，它使用与 ftp 相同的 urlwrapper。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T18:47:55.460

看起来最近对[phpseclib 的纯 PHP SFTP 流包装器的](http://phpseclib.sourceforge.net)提交增加了对通知的支持：

[https://github.com/phpseclib/phpseclib/commit/a47c1c39809a18b870b3812ce9ab84c7bd55efdd](https://github.com/phpseclib/phpseclib/commit/a47c1c39809a18b870b3812ce9ab84c7bd55efdd)

# c# - 提交和回滚 Oracle 事务

> ID：14831623
> 
> 赞同：6
> 
> 时间：2013-02-12T11:36:17.230
> 
> 标签：c#, oracle, stored-procedures, transactionscope

我在 C# 中从 oracle 调用这个过程。我让proc返回一个错误。换句话说，proc 失败并且 pv_error 填充了字符串，并且触发了回滚，但不起作用。我不确定为什么。那么，我做错了什么？提前致谢。

```
private void hhrcv_update_dc_grs_carton()
    {
        OracleCommand cmd = new OracleCommand();
        cmd.Connection = conn;
        conn.Open();
        OracleTransaction trans = conn.BeginTransaction();
        cmd.CommandTimeout = 0;
        cmd.CommandText = "dc.hhrcv_update_dc_grs_carton";
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add("pn_dc_grs_no", OracleDbType.Number).Value = txtDcGRSNo.Text;
        cmd.Parameters.Add("pn_pallet_id_no", OracleDbType.Number).Value = txtPalletId.Text;
        cmd.Parameters.Add("pn_carton_code", OracleDbType.VarChar).Value = txtCartonCode.Text;
        cmd.Parameters.Add("pn_company_id_no", OracleDbType.Number).Value = Companyid;
        cmd.Parameters.Add("pn_order_no", OracleDbType.Number).Value = txtOrderno.Text;
        cmd.Parameters.Add("pn_emp_id_no", OracleDbType.Number).Value = empid;
        cmd.Parameters.Add(new OracleParameter("pv_error", OracleDbType.VarChar));
        cmd.Parameters["pv_error"].Direction = ParameterDirection.Output;
        string pv_error;
        cmd.ExecuteNonQuery();
        pv_error = cmd.Parameters["pv_error"].Value.ToString();

        if (pv_error.ToString() == "")
        {
            trans.Commit();
        }
        else
        {
            trans.Rollback();
            MessageBox.Show("" + pv_error, "Error");
            frmReturns r = new frmReturns();
            r.Show();
            this.Hide();
        }
    } 
```

1.  存储过程未提交
2.  Oracle SQL 开发人员自动提交已禁用
3.  当我在 Oracle SQL 开发人员中运行存储过程时，它可以工作（失败 - 就像我已经完成并且没有提交）
4.  只有在VS2005中运行存储过程时，proc失败，触发回滚但不执行

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T14:20:14.750

您很可能需要添加：

```
cmd.Transaction = tran; 
```

打电话后`BeginTransaction`。

没有这个，运行时不知道这`cmd`是事务的一部分`tran`！

有关详细信息，请参阅[文档](http://www.devart.com/dotconnect/oracle/docs/Devart.Data.Oracle~Devart.Data.Oracle.OracleConnection~BeginTransaction%28%29.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:11:46.713

正如我在评论中发布的那样，我强烈建议检查连接的 Autocommit 属性。

正如甲骨文的文档所述

> 该属性决定了每条SQL语句执行完后是否对当前事务调用Commit；否则为假。**默认值是true。**

所以至少试试

```
conn.Autocommit=false; 
```

# c - 为什么数字字符的 ASCII 值等于该值加上“0”？

> ID：14831638
> 
> 赞同：5
> 
> 时间：2013-02-12T11:37:14.220
> 
> 标签：c, ascii

为什么当我们想将一个数字的 ASCII 值转换为整数时，我们需要这样做：

`value - '0'`?

反过来，要将 Integer 转换为 ASCII，我们需要这样做：

```
value + '0' 
```

这是为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T11:40:38.320

**因为C标准保证数字字符的整数值是连续的。**

因此`'1' - '0' == 1`，`'2' - '0' == 2`等，您可以从中推断出您的公式确实有效。

旁注：

1.  由于这是由标准保证的，因此即使目标平台不使用 ASCII 也能正常工作。
2.  相反，如果标准没有强制要求（它没有对字母的值这样做），那么这种技术将不具有可移植性；它将取决于使用 ASCII 的目标系统。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T11:41:50.290

因为ASCII数字因此一个接一个地被编码。

说`'0' == 48`。然后`'1' == 49`，`'2' == 50`以此类推。

如果你仔细想想，`'2' - '0' == 50 - 48 == 2`。同样，`2 + '0' == 2 + 48 == 50 == '2'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:40:02.820

数字的ASCII值都是按顺序排列的。所以`0`只需在 ASCII 码点标记序列的开始`48`，一直到`9`位置`57`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T11:40:11.143

仅仅因为 ASCII[标准](http://en.wikipedia.org/wiki/ASCII)定义的数字代码是按顺序排列的 (48 .. 57) 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T11:42:32.900

ASCII 值是一个符号在表中的位置编号。因此，您使用“0”符号位置编号作为数字符号的偏移量，向其添加一个整数数字值，您可以计算其位置编号。

# javascript - 多次运行应用程序而不停止先前

> ID：14831641
> 
> 赞同：0
> 
> 时间：2013-02-12T11:37:19.303
> 
> 标签：javascript

我有一个时钟应用程序，我可以多次运行，但是每次我再次启动应用程序时，前一个都会停止。我想我应该使用目标？哦这个。但我不知道应该在函数中的哪个位置使用它。

时钟的功能。

```
function myFunction() {
    startClock();

    function startClock() {
        var digits = new Array("zero", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine");
        var h = new Date().getHours().toString();
        var m = new Date().getMinutes().toString();
        var s = new Date().getSeconds().toString();
        var t = ((h > 9 ? h : "0" + h) + (m > 9 ? m : "0" + m) + (s > 9 ? s : "0" + s));

        hours.appendChild(hour1).className = "clock-digit-" + digits[t.substring(0, 0 + 1)];
        hours.appendChild(hour2).className = "clock-digit-" + digits[t.substring(1, 1 + 1)];
        minutes.appendChild(minute1).className = "clock-digit-" + digits[t.substring(2, 2 + 1)];
        minutes.appendChild(minute2).className = "clock-digit-" + digits[t.substring(3, 3 + 1)];
        seconds.appendChild(sec1).className = "clock-digit-" + digits[t.substring(4, 4 + 1)];
        seconds.appendChild(sec2).className = "clock-digit-" + digits[t.substring(5, 5 + 1)];

        t = setTimeout(function () {
            startClock()
        }, 1000);
    }
} 
```

我创建了一个 jsFiddle [http://jsfiddle.net/dymond/nufwb/](http://jsfiddle.net/dymond/nufwb/)

但是，当您按下 test 两次 prev 时，您会注意到。时钟停止...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:56:01.980

尝试在`myFunction()`.

```
var t1 = setTimeout(function(){startClock()},1000);
var t2 = setTimeout(function(){startClock()},2000); 
```

您现在所做的是每次运行时都会覆盖以前的时钟`myFunction()`。

# lua - 添加 ''physics.addBody'' 本地 imgpath lua

> ID：14831648
> 
> 赞同：3
> 
> 时间：2013-02-12T11:37:40.397
> 
> 标签：lua, coronasdk, corona-storyboard

**通过添加解决**

```
if ( temp.imgpath == "badcloud.png" ) then
  physics.addBody( randomcloud, "static", { density=.1, bounce=.1, friction=.2, radius=45 } )
end 
```

==================================================== ===========================

我想将 a 添加**`physics.addBody`**到*cloud4*以便它可以与 a 交互，`Runtime:addEventListener("collision", onCollision)`但如果我这样做：

```
local cloud4 = {}
physics.addBody(cloud4, "static", {densit=.1, bounce=0.1, friction=.2, radius=45})
cloud4.imgpath = "badcloud.png";
cloud4.movementSpeed = 18000;
table.insert(cloudTable, cloud4); 
```

我收到一个错误的参数错误，我该如何解决这个问题？

```
function initcloud()
    local cloud1 = {}
    cloud1.imgpath = "cloud1.png"; --Set Image Path for cloud
    cloud1.movementSpeed = 10000; --Determines the movement speed of cloud
    table.insert(cloudTable, cloud1); --Insert cloud into cloudTable

    local cloud2 = {}
    cloud2.imgpath = "cloud2.png";
    cloud2.movementSpeed = 12000;
    table.insert(cloudTable, cloud2);               

    local cloud3 = {}
    cloud3.imgpath = "cloud3.png";
    cloud3.movementSpeed = 14000;
    table.insert(cloudTable, cloud3);

    local cloud4 = {}
    cloud4.imgpath = "badcloud.png";
    cloud4.movementSpeed = 18000;
    table.insert(cloudTable, cloud4);   

    local cloud5 = {}
    cloud5.imgpath = "cloud5.png";
    cloud5.movementSpeed = 21000;
    table.insert(cloudTable, cloud5);
end --END initcloud() 
```

* * *

完整代码

```
function createClouds()
function initcloud()
    local cloud1 = {}
    cloud1.imgpath = "cloud1.png"; --Set Image Path for cloud
    cloud1.movementSpeed = 10000; --Determines the movement speed of cloud
    table.insert(cloudTable, cloud1); --Insert cloud into cloudTable

    local cloud2 = {}
    cloud2.imgpath = "cloud2.png";
    cloud2.movementSpeed = 12000;
    table.insert(cloudTable, cloud2);               

    local cloud3 = {}
    cloud3.imgpath = "cloud3.png";
    cloud3.movementSpeed = 14000;
    table.insert(cloudTable, cloud3);

    local cloud4 = {}
    cloud4.imgpath = "badcloud.png";
    cloud4.movementSpeed = 18000;
    table.insert(cloudTable, cloud4);   

    local cloud5 = {}
    cloud5.imgpath = "cloud5.png";
    cloud5.movementSpeed = 21000;
    table.insert(cloudTable, cloud5);

end --END initcloud()   

function getRandomcloud()
local temp = cloudTable[math.random(1, #cloudTable)] -- Get a random cloud from cloudTable
local randomcloud = display.newImage(temp.imgpath);
randomcloud.myName = "cloud";
randomcloud.movementSpeed = temp.movementSpeed; -- set the cloud cloudting point
randomcloud.x = math.random(10, _W);
randomcloud.y = -35;
randomcloud.rotation = math.random(0, 20); -- move the cloud
cloudMove = transition.to(randomcloud, {
time = randomcloud.movementSpeed, 
y = 500,
onComplete = function(self)
self.parent:remove(self);
self = nil;
end 
});
end

function cloudtGame()
    cloudTimer1 = timer.performWithDelay(3000,getRandomcloud, 5)
    cloudTimer2 = timer.performWithDelay(2000,getRandomcloud, 0)
    cloudTimer3 = timer.performWithDelay(2400,getRandomcloud, 0)    
    cloudTimer4 = timer.performWithDelay(7000,getRandomcloud, 0)    
    cloudTimer5 = timer.performWithDelay(9000,getRandomcloud, 0)        
end--END cloudtGame()
initcloud()
cloudtGame()
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:20:23.753

通过添加解决

```
if ( temp.imgpath == "badcloud.png" ) then
  physics.addBody( randomcloud, "static", { density=.1, bounce=.1, friction=.2, radius=45 } )
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:41:27.150

线

```
physics.addBody(cloud4, "static", {densit=.1, bounce=0.1, friction=.2, radius=45}) 
```

里面有错字，导致错误。它应该是`density`而不是`densit`。像这样：

```
physics.addBody( cloud4, "static", { density = .1, bounce = 0.1, friction = .2, radius = 45 } ) 
```

# iphone - 从tableView中的文件夹加载图像慢

> ID：14831649
> 
> 赞同：0
> 
> 时间：2013-02-12T11:37:44.517
> 
> 标签：iphone, xcode

我已经使用自定义单元格从 tableView 中的文件夹加载了图像，该单元格在每行中有三个图像。即使我调整了图像大小，当向上或向下滚动时它也会变慢

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *cellIdentifier = @"cell";

CustomCell *cell = (CustomCell *) [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

if (cell == nil) {
    [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
    cell = customCell;
}

if ([imageLists count] > indexPath.row*noOfImageInRow) {

    ImagesClass *Obj1 = [imageLists objectAtIndex:indexPath.row*noOfImageInRow];

    UIImage *image1 = [self getImageForImageId:Obj1.imageId FromPath:SAVEDIMAGE_DIR];
    Obj1.thumbImage = [self imageWithImage:image1 convertToSize:CGSizeMake(130, 130)];

    [cell setImage:1 :Obj1.thumbImage RowNo:indexPath.row*noOfImageInRow]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:57:03.913

表格视图中没有延迟加载

```
 [cell setImage:2 :Obj2.thumbImage RowNo:indexPath.row*noOfImageInRow+1]; 
```

这些功能需要更多时间来执行

```
UIImage *image1 = [self getImageForImageId:Obj1.imageId FromPath:SAVEDIMAGE_DIR];
Obj1.thumbImage = [self imageWithImage:image1 convertToSize:CGSizeMake(130, 130)]; 
```

请参阅 Apple 了解延迟加载图像概念。

我不会描述什么是延迟加载，希望这对你有用

# c# - 如何在linq中对数组中的所有短元素求和

> ID：14831656
> 
> 赞同：-1
> 
> 时间：2013-02-12T11:38:07.253
> 
> 标签：c#, linq

取数组：

```
var array = new short[]{4,4,5,6} 
```

我想构建一个 linq 表达式，将所有这 4 个数组值相加，使结果为 19。这样我就可以进行以下比较：

```
string a = "only5chars"
if(a.length < // the total array values length ... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T11:40:12.007

它很简单：

```
 var array = new int[] {4, 4, 5, 6};
 var sum = array.Sum(); 
```

**编辑**（根据问题更新`short`）：

```
 var array = new short[] {4, 4, 5, 6};
 var sum = array.Select(x=> (int)x).Sum(); 
```

试试[这里](http://ideone.com/zYak66)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T11:39:54.703

> 我想构建一个 linq 表达式，将所有这 4 个数组值相加，使结果为 19。

**编辑：**

由于问题现在已经改变，现在它指向一个短类型数组，那么：

```
var array = new short[] { 4, 4, 5, 6 };
int sum = array.Select(r => (int)r).Sum(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:40:10.737

```
var array = new int[]{4,4,5,6};
var sum = array.Sum(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T11:40:30.010

**真实答案**

```
var array = new int[]{4,4,5,6};
array.Sum(); 
```

我希望堆栈能让我发布“让我为你谷歌搜索”链接。

**讽刺的回答**

1.  访问[www.google.co.uk](http://www.google.co.uk)
2.  搜索 - “对数组求和 C#”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T11:40:53.037

尝试[`Enumerable.Sum()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.sum.aspx)方法：

> 计算一系列数值的总和。

像;

```
public static void Main(string[] args)
{
      var array = new int[] {4, 4, 5, 6};
      int total = array.Sum();
      Console.WriteLine(total);
} 
```

这是一个[`DEMO`](http://ideone.com/gdBKdo).

# javascript - 我来自的路线，或以前的路线

> ID：14831668
> 
> 赞同：3
> 
> 时间：2013-02-12T11:38:30.263
> 
> 标签：javascript, ember.js, ember-router

当我访问一条路线然后去另一条路线时，有什么方法可以知道我来自哪条路线？
我试过`document.referrer`- 这不起作用。谷歌搜索也没有带来任何答案..

例如，我设置了[这个小提琴](http://jsfiddle.net/crUFE/5/)并进行了测试..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T11:55:23.150

没有使用 API 的直接解决方案。这意味着，此信息不是公共 API 的一部分。但是，您可以自己缓存这些信息。

```
App.set('lastRoutes', []);

App.BaseRoute = Ember.Route.extend({
    setupController: function() {
        this._super.apply(this, arguments);
        App.get('lastRoutes').pushObject(this.get('routeName'));
    }
}); 
```

使用“setupController”，而不是“enter”，因为例如，当您从 /users/1 转换到 /users/2 时，不会执行 enter/exit 方法，而 setupController 每次都会执行（并且是公共 API）。如果您有嵌套路由，则应该对其进行优化，因为这也会添加中间路由。但是对于您的示例，它运行良好。

# akka - 是否可以从 Akka 实现 Web 服务

> ID：14831670
> 
> 赞同：0
> 
> 时间：2013-02-12T11:38:38.667
> 
> 标签：akka, esb

我对 Akka 很陌生。现在处于初始阶段......
我坚持使用 Akka 的原因是因为我想在我的项目中利用它的分布式功能。如果可能的话
，主要的含义是在 Akka 之上为**基于 REST 的 Web 服务提供服务**
。 如果是这样的话。 .. 是否可以调用 Akka 的 RESTful 调用并在 REST 调用的基础上分叉各种服务
有人可以给我一些关于这个的见解吗..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:36:05.960

看看[Spray](http://spray.io)，它`spray-can`在 Akka 之上提供了一个 REST Web 服务器：

> spray-routing 模块提供了一个高级的、非常灵活的路由 DSL，用于优雅地定义 RESTful Web 服务。通常，您可以在喷雾罐 HttpServer 顶部或 servlet 容器内部与喷雾 s​​ervlet 一起使用它。

您可以在您希望服务的 URL 下向 Spray 注册您的服务，包括身份验证和授权。看看[示例项目](http://spray.io/documentation/spray-routing/examples/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:37:44.987

[https://bitbucket.org/kraythensoft/ecplat](https://bitbucket.org/kraythensoft/ecplat)

看看那个项目。我正在按照您的要求进行操作，逐个发布添加功能，以在 Scala 上为 Spray、Akka、Squeryl 提供一些操作指南。

# apache-flex - 通过 flex 中的 readBytes 函数从特定位置读取

> ID：14831679
> 
> 赞同：0
> 
> 时间：2013-02-12T11:39:03.423
> 
> 标签：apache-flex, air, flex4, flex3, bytearray

我正在尝试对文本文件进行一些操作。我在做什么如下：

使用以下代码读取文件：

```
var data:ByteArray = new ByteArray();
var inFile:File = File.desktopDirectory;
inFile = inFile.resolvePath('dummy.txt');
var inStream:FileStream = new FileStream();

inStream.open(inFile, FileMode.READ);
inStream.readBytes(data, 0, data.length);
inStream.close(); 
```

假设 dummy.txt 文件具有文本 abcdefghi123456789 - 数据长度为 18 个字符。

**情况1**

如果我想阅读整个文件，我使用这个代码

`inStream.readBytes(data, 0, data.length);`

这将成功返回完整的文件数据。

**案例2**：

我只想读取字符 12345 并将它们存储在一个 byteArray 中，我试图像下面的代码一样传递 offSet

`inStream.readBytes(data, 9, 5);`

它返回错误以下数据 -

`***_*_**_12345`

那是 9 个空格，然后是 5 个字符，理想情况下它应该只返回 5 个字符。

那么我该怎么做。任何示例代码和网络链接将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:18:31.467

该方法的`offset`参数`readBytes`指定到输出的偏移量`ByteArray`，而不是文件。`FileStream`您可以通过设置`position`属性来寻找。尝试以下操作：

```
inStream.position = 9;
inStream.readBytes(data, 0, 5); 
```

# jsf - JSF-1.1 I18n-如何在 faces-config.xml 中注册自定义 ResourceBundle

> ID：14831681
> 
> 赞同：1
> 
> 时间：2013-02-12T11:39:06.230
> 
> 标签：jsf, internationalization, faces-config

当我发现未对消息应用 UTF-8 渲染时，我正在对旧 JSF-1.x 项目中的消息/字符串进行国际化。

我在这里遇到了类似的问题：- [i18n with UTF-8 encoding properties files in JSF 2.0 appliaction](https://stackoverflow.com/questions/3645491/i18n-with-utf-8-encoded-properties-files-in-jsf-2-0-appliaction)

但这适用于 JSF-2 应用程序，我无法以与那里解释的相同方式注册我的自定义资源包。（显示名称空间不匹配的部署错误。）

需要帮助在 faces-config.xml 中为 JSF-1.x 注册我的自定义资源包。

（我们在那里使用了 message-bundle。但是我不能像在 resource-bundle 标签中那样在 message-bundle 中注册我的 bundle 类）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:37:00.863

在`JSF-1.x`中，不支持注册我自己的自定义`ResourceBundle`类。

因此，需要继续创建一个自定义标记`<x:loadBundle>`，以正确编码对属性文件进行编码。

请参阅[Facelets 自定义标签未呈现](https://stackoverflow.com/questions/3118309/facelets-custom-tag-not-rendering)以`Tag Library XML`在您的`web.xml`. 然后在你的`TagLibrary XML`，有这个配置： -

```
<tag>
            <tag-name>loadBundle</tag-name>
            <handler-class>org.somepackage.facelets.tag.jsf.handler.LoadBundleHandler</handler-class>
</tag> 
```

并扩展您的自定义 LoadBundleHandler 以扩展 TagHandler facelets 类-（代码将与 LoadBundleHandler @相同`com.sun.facelets.tag.jsf.core.LoadBundleHandler`

现在您可以像我在问题中提到的帖子中那样覆盖 Control 类。所以总的来说你的班级看起来像这样： -

```
public final class LoadBundleHandler extends TagHandler {

    private static final String BUNDLE_EXTENSION = "properties";    // The default extension for langauge Strings (.properties)

    private static final String CHARSET = "UTF-8";

    private static final Control UTF8_CONTROL = new UTF8Control();  

    private final static class ResourceBundleMap implements Map {
        private final static class ResourceEntry implements Map.Entry {

            protected final String key;

            protected final String value;

            public ResourceEntry(String key, String value) {
                this.key = key;
                this.value = value;
            }

            public Object getKey() {
                return this.key;
            }

            public Object getValue() {
                return this.value;
            }

            public Object setValue(Object value) {
                throw new UnsupportedOperationException();
            }

            public int hashCode() {
                return this.key.hashCode();
            }

            public boolean equals(Object obj) {
                return (obj instanceof ResourceEntry && this.hashCode() == obj
                        .hashCode());
            }
        }

        protected final ResourceBundle bundle;

        public ResourceBundleMap(ResourceBundle bundle) {
            this.bundle = bundle;
        }

        public void clear() {
            throw new UnsupportedOperationException();
        }

        public boolean containsKey(Object key) {
            try {
                bundle.getString(key.toString());
                return true;
            } catch (MissingResourceException e) {
                return false;
            }
        }

        public boolean containsValue(Object value) {
            throw new UnsupportedOperationException();
        }

        public Set entrySet() {
            Enumeration e = this.bundle.getKeys();
            Set s = new HashSet();
            String k;
            while (e.hasMoreElements()) {
                k = (String) e.nextElement();
                s.add(new ResourceEntry(k, this.bundle.getString(k)));
            }
            return s;
        }

        public Object get(Object key) {
            try {
                return this.bundle.getObject((String) key);
            } catch( java.util.MissingResourceException mre ) {
                return "???"+key+"???";
            }
        }

        public boolean isEmpty() {
            return false;
        }

        public Set keySet() {
            Enumeration e = this.bundle.getKeys();
            Set s = new HashSet();
            while (e.hasMoreElements()) {
                s.add(e.nextElement());
            }
            return s;
        }

        public Object put(Object key, Object value) {
            throw new UnsupportedOperationException();
        }

        public void putAll(Map t) {
            throw new UnsupportedOperationException();
        }

        public Object remove(Object key) {
            throw new UnsupportedOperationException();
        }

        public int size() {
            return this.keySet().size();
        }

        public Collection values() {
            Enumeration e = this.bundle.getKeys();
            Set s = new HashSet();
            while (e.hasMoreElements()) {
                s.add(this.bundle.getObject((String) e.nextElement()));
            }
            return s;
        }
    }

    private final TagAttribute basename;

    private final TagAttribute var;

    public LoadBundleHandler(TagConfig config) {
        super(config);
        this.basename = this.getRequiredAttribute("basename");
        this.var = this.getRequiredAttribute("var");
    }

    public void apply(FaceletContext ctx, UIComponent parent)
            throws IOException, FacesException, FaceletException, ELException {
        UIViewRoot root = ComponentSupport.getViewRoot(ctx, parent);
        ResourceBundle bundle = null;
        FacesContext faces = ctx.getFacesContext();
        String name = this.basename.getValue(ctx);
        try {
            ClassLoader cl = Thread.currentThread().getContextClassLoader();
            if (root != null && root.getLocale() != null) {
                bundle = ResourceBundle.getBundle(name, root.getLocale(), cl, UTF8_CONTROL);
            } else {
                bundle = ResourceBundle
                        .getBundle(name, Locale.getDefault(), cl);
            }
        } catch (Exception e) {
            throw new TagAttributeException(this.tag, null , e);
        }
        ResourceBundleMap map = new ResourceBundleMap(bundle);
        faces.getExternalContext().getRequestMap().put(this.var.getValue(ctx),
                map);
    }

    protected static class UTF8Control extends Control {
        public ResourceBundle newBundle
            (String baseName, Locale locale, String format, ClassLoader loader, boolean reload)
                throws IllegalAccessException, InstantiationException, IOException
        {
            String bundleName = toBundleName(baseName, locale);
            String resourceName = toResourceName(bundleName, BUNDLE_EXTENSION);
            ResourceBundle bundle = null;
            InputStream stream = null;
            if (reload) {
                URL url = loader.getResource(resourceName);
                if (url != null) {
                    URLConnection connection = url.openConnection();
                    if (connection != null) {
                        connection.setUseCaches(false);
                        stream = connection.getInputStream();
                    }
                }
            } else {
                stream = loader.getResourceAsStream(resourceName);
            }
            if (stream != null) {
                try {
                    bundle = new PropertyResourceBundle(new InputStreamReader(stream, UTF8_CONTROL));
                } finally {
                    stream.close();
                }
            }
            return bundle;
        }
    }

} 
```

您甚至可以通过删除此类`basename`中的属性来跳过配置。`<x:loadbundle var="msg basename="resources">``basename`

# php - 在 PHP 中使用 XML 文件填充下拉框

> ID：14831683
> 
> 赞同：0
> 
> 时间：2013-02-12T11:39:07.450
> 
> 标签：php, jquery, xml, drop-down-menu

我用谷歌搜索了这个，只能找到有关使用 AS3 执行此操作的信息 - 我正在使用 PHP、jQuery 和 HTML。使用这些技术完全可行吗？如果可以……怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:00:44.697

假设您有以下 XML 文件 ( `songs.xml`)

```
<songs>
    <song>
        <name>I left my heart on Europa</name>
        <id>1</id>
    </song>
    <song>
        <name>Oh Ganymede</name>
        <id>2</id>
    </song>
    <song>
        <name>Kallichore</name>
        <id>3</id>
    </song>
</songs> 
```

使用以下 PHP 代码，您可以仅使用 XML 文件中的数据[生成 JSON](http://php.net/json_encode)（我们将其命名`xml.php`）：

```
<?php

// load the XML file
$songs   = simplexml_load_file('songs.xml');

// get all song elements as an array
$options = iterator_to_array($songs->song, false);

// output json
echo json_encode($options); 
```

[在线演示](http://eval.in/private/84fe340ae41028)

现在你只需要用 jQuery 做一个 ajax 请求：

```
$.getJSON("xml.php",function(j){
       var $option = $("#option");
          $option.empty();
          $.each(j, function () {
            $option.append($('<option></option>').attr("value", this.id).text(this.name));
          });   
}); 
```

填充这样的 html 代码：

```
<select name="x" id="option"></select> 
```

jquery 未经测试，但如果您已经使用它，您可以修复任何错误:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:51:25.353

我不明白为什么不呢？您想用 XML 中的元素填充 Dropbox？通过下拉框，您可能意味着选择选项 HTML 元素。PHP 中有一堆 XML 解析器，比如[SimpleXML](http://www.php.net/manual/en/simplexml.examples.php)，当您获取元素时，只需在 php 中循环并设置选项值。

纯 PHP 解决方案（与 Sacx 相同的 XML）：

```
<?php
$songs = simplexml_load_file('songs.xml');

echo "<select id='SELsongs'>";

foreach($songs as $song)
{
echo "<option value='".$song->id."'>".$song->name."</option>";
}
echo "</select>";

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:55:55.423

您必须导入 xml 并对其进行解析，这将为您提供一个可以循环的对象或多维数组，从而为下拉菜单创建元素。

# ios - 根据设备方向将子视图从 2 行重新排列为 1

> ID：14831687
> 
> 赞同：0
> 
> 时间：2013-02-12T11:39:21.430
> 
> 标签：ios, uiview, autolayout, layoutsubviews

伙计们，

我最初的目标是使用 iOS6.1 的 iPhone，但也欢迎使用 iOS5.1 在 iPhone 上完美运行的提示和代码。

我有一个自定义 UITableViewCell 有 7 个不同的标签作为子视图：

```
-(id) initWithStyle: (UITableViewCellStyle) style reuseIdentifier: (NSString*) reuseIdentifier
{
    self = [super initWithStyle : style reuseIdentifier : reuseIdentifier] ;

    if (self){

//Adding Subviews

[self.contentView addSubView : self.myLabel1] ;
[self.contentView addSubView : self.myLabel2] ;
[self.contentView addSubView : self.myLabel3] ;
[self.contentView addSubView : self.myLabel4] ;
[self.contentView addSubView : self.myLabel5] ;
[self.contentView addSubView : self.myLabel6] ;
[self.contentView addSubView : self.myLabel7] ;
}
return self;
} 
```

当我懒惰地实例化标签时，我认为起始方向是纵向，并且标签排列在两条不同的线上：

```
-(UILabel*) myLabel1
{
    if (!_myLabel1){
        _myLabel1 = [UILabel alloc] initWithFrame: CGRectMake(10,30,40,20);
        _myLabel1.numberOfLines = 1;
        _myLabel1.opaque = YES;
}
return _myLabel1; 
}

-(UILabel*) myLabel2
{
    if (!_myLabel2){
        _myLabel2 = [UILabel alloc] initWithFrame: CGRectMake(50,30,40,20);
        _myLabel2.numberOfLines = 1;
        _myLabel2.opaque = YES;
}
return _myLabel2; 
}

-(UILabel*) myLabel3
{
    if (!_myLabel3){
        _myLabel3 = [UILabel alloc] initWithFrame: CGRectMake(90,30,40,20);
        _myLabel3.numberOfLines = 1;
        _myLabel3.opaque = YES;
}
return _myLabel3; 
}

-(UILabel*) myLabel4
{
    if (!_myLabel4){
        _myLabel4 = [UILabel alloc] initWithFrame: CGRectMake(10,60,40,20);
        _myLabel4.numberOfLines = 1;
        _myLabel4.opaque = YES;
}
return _myLabel4; 
}

-(UILabel*) myLabel5
{
    if (!_myLabel5){
        _myLabel5 = [UILabel alloc] initWithFrame: CGRectMake(50,60,40,20);
        _myLabel5.numberOfLines = 1;
        _myLabel5.opaque = YES;
}
return _myLabel5; 
}

-(UILabel*) myLabel6
{
    if (!_myLabel6){
        _myLabel6 = [UILabel alloc] initWithFrame: CGRectMake(90,60,40,20);
        _myLabel6.numberOfLines = 1;
        _myLabel6.opaque = YES;
}
return _myLabel6; 
}

-(UILabel*) myLabel7
{
    if (!_myLabel7){
        _myLabel7 = [UILabel alloc] initWithFrame: CGRectMake(130,60,40,20);
        _myLabel7.numberOfLines = 1;
        _myLabel7.opaque = YES;
}
return _myLabel7; 
} 
```

我想问一下实现这一目标的最佳方法是什么：

“如果方向是纵向，则如上所述将标签排列在 2 条不同的行上，如果方向是横向，则将所有标签排列在一行上。如果用户改变方向，重新排列应该是自动的。

横向模式下的重新排列应使所有标签与 y 值 30 对齐（而不是第一行为 30，第二行为 60）。标签 4、5、6、7 的 x 值也应该改变，因为它们不会被放置在标签 1、2、3 的下方，而是被放置在标签 3 的右侧。”</p>

顺便说一句，我发现有时在真正的 iPhone 上启动应用程序时，桌面上会出现“纵向”，在 iOS 5.1 和 iOS 6.1 中，方向都被错误地报告为“横向”。我发现这个是因为我开始使用 layoutSubviews：因为我认为这是重新排列视图的最佳位置，根据设备的方向为每个视图创建一个新框架。这是自动布局的最佳案例吗？该视图是以编程方式创建的，并且将以编程方式创建。

谢谢

尼古拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:55:13.677

感谢您的回答 Kalpesh 但实际上经过更多试验后，我发现处理它的最佳方法是在 UITableViewCell 中有一个指向其控制器的指针并使用它来获取新的方向，然后在 layoutSubviews 中进行重新排列：

```
@property(weak,nonatomic) UITableViewController *controller;

-(void) layoutSubviews
{
    [super layoutSubviews];

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){

        // I am on a Phone

        NSLog(@"The new controller orientation is: %u", self.controller.interfaceOrientation);

        if(self.controller.interfaceOrientation == UIInterfaceOrientationPortrait){
            NSLog(@"Phone - Controller orientation: Portrait.");

            //Layout the subviews for portrait orientation

            self.myLabel1.frame = CGRectMake(10,70,(self.frame.size.width-20)/4,20);

            //..

        } else{
            NSLog(@"Phone - Controller orientation: Landscape.");

            //Layout the subviews for landscape orientation

            self.myLabel1.frame = CGRectMake(10,30,(self.frame.size.width-20)/4,20);

            //..
        }

    } else if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad){

        // I am on a Pad

        if(self.controller.interfaceOrientation == UIInterfaceOrientationPortrait){
            NSLog(@"Pad - Controller orientation: Portrait.");

            //Layout the subviews for portrait orientation

        } else{
            NSLog(@"Pad - Controller orientation: Landscape.");

            //Layout the subviews for landscape orientation
        }

    }
} 
```

无论如何，按照您的建议刷新表格对于更改八行很有用！

编辑：当方向改变时，单元格高度会自动重新加载，因此无需强制重新加载表格。尼古拉

# python - PIL 绘制图像然后在 wxpython 中显示它

> ID：14831688
> 
> 赞同：1
> 
> 时间：2013-02-12T11:39:27.777
> 
> 标签：python, wxpython, python-imaging-library

我在 python 中使用 PIL 绘制了一个图像。

```
import Image
import ImageDraw
createCM():
   img = Image.new("RGB", (400,400), "white")
   draw = ImageDraw.Draw(img)

   coords = [(100,70), (220, 310), (200,200)]
   dotSize = 2

   for (x,y) in coords:
       draw.rectangle([x,y,x+dotSize-1,y+dotSize-1], fill="black") 
```

我现在想做的是在我的 wxpython 面板上显示这个。

我是这样开始的

```
CMchart = createCM(self)
self.vbox = wxBoxSizer(wx.VERTICAL)
self.vbox.Add(CMchart, 1, wx.LEFT | wx.TOP | wx.GROW)
self.vbox.AddSpacer(25)
self.SetSizer(self.vbox)
self.vbox.Fit(self) 
```

这没有显示任何东西。只想知道我哪里错了

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:53:28.380

不知道 createcM 是做什么的，很难知道如何为您提供帮助。但它的缺点是要绘制一个图像，你从 wx.Image 加载数据将其转换为 wx.Bitmap，然后使用 DeviceContext 绘制它。通常首先将其绘制为 wx.MemoryDC，当您完成所有绘图更新后，然后使用 wx.PaintDC 或 wx.ClientDC 来绘制它。看看吧

[http://wiki.wxpython.org/WorkingWithImages#PIL_.28Python_Imaging_Library.29](http://wiki.wxpython.org/WorkingWithImages#PIL_.28Python_Imaging_Library.29)

它为您提供了如何从 PIL 加载图像的一个很好的示例

# expression-blend - 设计不会显示

> ID：14831689
> 
> 赞同：0
> 
> 时间：2013-02-12T11:39:30.527
> 
> 标签：expression-blend

在我的系统中，我安装了 expression-bland4，当时我的系统中安装了 silverlight 4。之后我将 Silverlight 版本 4 更新到 5。Visual Studio 2010 可以基于 Silverlight5 创建一个项目，但是当我在我的表达式中打开该项目时，它会加载一个项目，但无法显示 xaml 设计预览仅显示文本位置。同样，当我从表达式 bland 创建新项目时，只会显示 3.0 和 4.0 版本

![在此处输入图像描述](../Images/6ec562293f5d6e963b626f3aed07285b.png) ![在此处输入图像描述](../Images/573cf5dd98540fd7d1acc69e38469c48.png) ![在此处输入图像描述](../Images/224fa03fe195ce0de6fb766fee6cb870.png)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:36:44.697

Expression Blend 4 不支持 Silverlight 5 - 您需要从[http://www.microsoft.com/en-us/download/details.aspx?id=9503安装 Blend for Silverlight 5](http://www.microsoft.com/en-us/download/details.aspx?id=9503)

# android - 应用于嵌套片段的片段间通信？

> ID：14831690
> 
> 赞同：39
> 
> 时间：2013-02-12T11:39:45.670
> 
> 标签：android, android-fragments

Android 开发者网站上有一篇[很棒的文章](http://developer.android.com/training/basics/fragments/communicating.html)，介绍了如何使用接口进行通信：

1.  A`Fragment`及其托管`Activity`
2.  两台`Fragment`同台`Activity`

我正在努力将这个概念应用于**嵌套片段**。特别是，`getActivity()`还是`Fragment#onAttach(Activity)`告诉你什么`Activity`是托管一个`Fragment`.

嵌套片段的等价物是什么？“孩子”如何`Fragment`知道`Fragment`它包含在哪个“父母”中？在不知道这一点的情况下，孩子如何`Fragment`将事件传递给其父母`Fragment`？

一个明显的方法是从孩子广播意图`Fragment`并让父母`Fragment`收听广播，但我宁愿使用`interface`基于 - 的方法。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-12T12:17:32.967

事实证明，引入了一个[getParentFragment()](http://developer.android.com/reference/android/support/v4/app/Fragment.html#getParentFragment%28%29)方法来满足嵌套片段的需求。它在`android.app.Fragment`API 17 中可用，但可以在旧版本上使用`android.support.v4.app.Fragment`.

我不敢相信我忽略了这个 API！

## 编辑：

我遇到了[这个要点](https://gist.github.com/keyboardr/5455206)，它使弄清楚父组件（无论是`Fragment`还是`Activity`）的过程变得简单、优雅和安全！

# c# - 为什么向上箭头/PgUp 时 Trackbar 值会减小？

> ID：14831694
> 
> 赞同：3
> 
> 时间：2013-02-12T11:39:58.120
> 
> 标签：c#, winforms

我在 Trackbar Winforms 控件中偶然发现了一个有趣的行为。

在水平轨迹栏上，左/右箭头键按预期工作。（向左箭头将滑块向左移动并减小值，向右箭头则相反）也可以使用向上/向下箭头键和 PageUp/PageDown 操作滑块。但是，这种行为似乎违反直觉：向上箭头和向上翻页将滑块向左移动，从而减小值。向下箭头和向下翻页将滑块向右移动并增加值。

使用垂直轨迹栏时，向上/向下键按预期工作，但向左箭头 = 增加，向右箭头 = 减少。

这是 C# Winforms 中的默认行为，显然在本机 Windows 中也是如此。（不确定后者，UAC 的滑块确实以这种方式工作）

在 WPF 中，滑块控件“正常”工作，即该值随着向上箭头、向右箭头和 PgUp 增加。Internet Explorer 隐私设置中的滑块也可以正常工作。不知道为什么，但我怀疑键的自定义处理。

从人体工程学的角度来看，很明显，任何东西的向上、向右、向前和顺时针操作都应该增加价值。（这不是什么新鲜事，比较[人类因素和人体工程学指南，第二版第 100 页](http://books.google.de/books?id=pJvSnAMIZ_gC&lpg=PP1&hl=de&pg=PA100#v=onepage&q&f=false)）

现在我的问题：有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:57:17.087

我强烈倾向于认为选择这种行为是为了使轨迹条控件与滚动条控件保持一致。

这两个控件有很多共同点（它们的拇指可以按“行”或“页”增量移动，两个控件都可以水平或垂直布局，当拇指位置发生变化时都使用[WM_HSCROLL](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787575.aspx)和[WM_VSCROLL](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787577.aspx)通知它们的父级）。

从控件的角度来看，拇指可以“向上”或“向下”移动（分别为“左”或“右”）。`Left`用于向上`Up`（向左）移动以及`Right`向下`Down`（向右）移动的滚动条的键盘导航。

跟踪条控件遵循相同的约定一定是有意义的，因此习惯于滚动条控件实现的开发人员可以将相同的原则应用于跟踪条控件。

# java - 如何使用 PDFBOX 从 PDF 表单中获取当前页码？

> ID：14831695
> 
> 赞同：1
> 
> 时间：2013-02-12T11:39:58.663
> 
> 标签：java, pdfbox

如何使用 PDFBOX 从 PDF 表单中获取当前页码？

有什么方法可以获取特定字段的页码？例如，如果一个名为的文本框`First name`出现在 PDF 表单的第 4 页上，是否可以将当前页码检索为 4？

对可能的解决方案有任何见解吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:47:01.337

我通常在 pdf 构建期间在每个新页面上填写页码信息。这意味着我知道当前是最后一页的已编辑页面的页码。

```
private void addPageNumber(int page, PDPageContentStream content) throws Exception {
  content.beginText();
  String pageNumber = page + "";
  // TODO: move to the needed text position
  content.drawString(pageNumber);
  content.endText();
} 
```

我以当前页数作为参数调用此方法：

```
addPageNumber(_document.getNumberOfPages(), content); 
```

# c# - 模拟；使用 Moq 分配代表

> ID：14831697
> 
> 赞同：0
> 
> 时间：2013-02-12T11:40:03.453
> 
> 标签：c#, unit-testing, mocking, moq

## 目前

我[`Moq`](http://code.google.com/p/moq/wiki/QuickStart#Methods)用来创建一些模拟对象；到目前为止，一切都运行良好。目前使用我正在做的 Moq 来“分配”一个代表

```
var someMock = new Mock<ISomeInterface>();
someMock.Setup(x => x.DoSomething(It.IsAny<int>())).Returns(this.DoSomething) 
```

`this.DoSomething`接受`int`参数的方法在哪里？基本上它的结构`x.DoSomething`与`ISomeInterface`.

## 问题

是否可以简单地分配一个委托，而不需要指定其所有参数，即**不使用** `It.IsAny<int>()`？理想情况下是这样的：

```
var someMock = new Mock<ISomeInterface>();
someMock.Setup(x => x.DoSomething).Returns(this.DoSomething) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:44:09.473

不，那是不可能的。这不是 Moq 的“缺点”——C# 不支持它。

一些背景：

假设`ISomeInterface`声明如下：

```
public interface ISomeInterface
{
    void Foo(int a, int b);
} 
```

这意味着该`Setup`方法的参数必须是`Func<ISomeInterface, Action<int, int>>`.
现在的问题是该`Setup`方法必须以通用方式定义，因为您的方法可以具有任何类型的参数：

```
Setup<T1, T2>(Func<T, Action<T1, T2>> param) 
```

`T`是 Mock 类的泛型类型，`T1`是`T2`方法的参数。

然而，调用此方法将导致编译器错误：

> `Mock.Setup<T1, T2>(System.Func<UserQuery.ISomeInterface,System.Action<T1,T2>>)`无法从用法中推断出方法的类型参数。尝试明确指定类型参数。

为了让它工作，你需要这样称呼它：

```
someMock.Setup<int, int>(x => x.DoSomething) 
```

或像这样：

```
someMock.Setup(x => (Action<int, int>)x.DoSomething); 
```

在这两种情况下，您都必须指定参数的类型，就像您现在所做的那样。

至于为什么会出现编译器错误：

`x.DoSomething`是一个方法组。存在到 的隐式转换`Action<int, int>`。
但是，要执行此隐式转换，编译器需要知道 和 的`T1`类型`T2`。但是这些类型只能在转换发生后推断出来。
这两个步骤相互依赖，这就是它不起作用的原因。

# c++ - 相当于opencv中matlab的“ismember”？

> ID：14831708
> 
> 赞同：1
> 
> 时间：2013-02-12T11:40:26.157
> 
> 标签：c++, c, matlab, opencv, code-conversion

opencv中matlab的“ismember”等价物是什么？

我正在尝试将 matlab 代码转换为 opencv （ C/CPP ）。为此，我需要将以下步骤转换为 Opencv。有人可以在这方面指导我吗？

```
[Lia Locb1] = ismember(tl(:,1),ind3);

  where Mat tl = Mat::ones(106, 3, CV_8U); and
        ind3 = find(Sm(:,1) >= xm & Sm(:,1) <= xM & Sm(:,2) >= ym & Sm(:,2) <= yM); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:57:51.063

它不是真正等价的，但如果 a 是标量，`ismember(a,b)`则可以替换为`any(a==b)`.

不确定这是否对您在 OpenCv 中有所帮助，否则您当然可以始终用一个简单的循环替换 ismember 以`a`检查`b`.

# haskell - 在 Haskell / 线性编程包中运行其他程序

> ID：14831713
> 
> 赞同：5
> 
> 时间：2013-02-12T11:40:36.463
> 
> 标签：haskell, linear-programming

我有一个`LPSolve`解决混合整数优化问题的程序。问题是我不能在迭代期间动态添加约束，所以我想写一个 Haskell 程序`LPSolve`来解决松弛问题，然后根据解决方案推断一些额外的约束。利用问题结构的约束。

是否可以在 Haskell 中运行可执行文件并检索发送到终端的输出？

*是否存在解决线性规划问题的 Haskell 包？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T12:06:07.107

使用[runInteractiveProcess](http://hackage.haskell.org/packages/archive/process/latest/doc/html/System-Process.html#v:runInteractiveProcess)，您可以通过 stdin/stdout 与外部进程“对话”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T13:40:36.103

[Shelly 包](http://hackage.haskell.org/package/shelly-0.15.4)有一些很好的库方法来运行外部进程。它旨在用 Haskell 编写 shell 脚本，但没有理由不能在应用程序中使用它。我发现 shell 脚本任务比标准库方法方便得多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T12:36:54.190

您可以使用 GLPK 并在 Haskell 代码中创建和运行问题

```
-- Usando GLPK, http://www.gnu.org/software/glpk/ 
import Data.List 
import Data.Maybe 
import Control.Monad 
import Data.LinearProgram 
import Data.LinearProgram.GLPK 
import qualified Data.Map as M 

-- Sólo por dar nombre a las varibles 
x e = "X" ++ show e 

-- Resuelve el problema de elegir el menor número de empleados 
solveEmployees :: [(Int, Int)] -> LP String Int 
solveEmployees es = execLPM $ do  setDirection Min 
                                  setObjective $ linCombination $ map (\e -> (1, x e)) emps 
                                  mapM_ (\(a, b) -> geqTo (varSum [x a, x b]) 1) es 
                                  mapM_ (\n -> setVarKind (x n) BinVar) emps 
                                  where emps = nub $ map fst es ++ map snd es 

-- Wrapper suponiendo que siempre hay solución (aquí siempre) 
getEmployees :: [(Int, Int)] -> IO [Int] 
getEmployees es = do 
  (_, Just (_, m)) <- glpSolveVars mipDefaults $ solveEmployees es 
  return $ map (read.tail.fst). M.toList. M.filter (==1) $ m 

-- Tráfico de influencias, intentaremos que el empleado 'e' vaya a la playa 
--       (da igual que sea de Estocolmo o de Londres) 
getEmployees' :: Int -> [(Int, Int)] -> IO [Int] 
getEmployees' e es = do 
  r <- getEmployees es 
  r' <- getEmployees $ filter (\(a, b ) -> a /= e && b /= e) es 
  return $ if length r == 1 + length r' then e: r' else r 

-- Test 
main = do 
  putStrLn $ "Input: " ++ show test2 
  putStrLn "Testing: solveEmployees" 
  r1 <- getEmployees test2 
  putStrLn $ show r1 
  putStrLn "Testing: solveEmployees' 2001" 
  r2 <- getEmployees' 2001 test2 
  putStrLn $ show r2 

test1 :: [(Int, Int)] 
test1 = [(1009, 2011), (1017, 2011)] 

test2 :: [(Int, Int)] 
test2 = [(1009, 2000), (1009, 2001), (1008, 2000), (1008, 2001)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-29T13:57:12.063

有*toysolver*。

```
import           Data.Default.Class (def)
import           ToySolver.Arith.Simplex
import qualified ToySolver.Data.LA            as LA

case_test1 = do
  solver <- newSolver
  x <- newVar solver
  y <- newVar solver
  z <- newVar solver
  assertAtom solver (LA.fromTerms [(7,x), (12,y), (31,z)] .==. LA.constant 17)
  assertAtom solver (LA.fromTerms [(3,x), (5,y), (14,z)]  .==. LA.constant 7)
  assertAtom solver (LA.var x .>=. LA.constant 1)
  assertAtom solver (LA.var x .<=. LA.constant 40)
  assertAtom solver (LA.var y .>=. LA.constant (-50))
  assertAtom solver (LA.var y .<=. LA.constant 50)

  setObj solver (LA.fromTerms [(-1,x), (-2,x), (-3,x)])

  o <- optimize solver def
  print o
  getValue solver x

> case_test1
Optimum
40 % 1 
```

它解决了有理系数。

您可以添加约束并重新运行求解器：

```
 assertAtom solver (LA.var x .<=. LA.constant 30)
  o <- optimize solver def
  print o
  getValue solver x

> case_test1
Optimum
30 % 1 
```

# php - 我想在照片上传后重定向页面

> ID：14831715
> 
> 赞同：-3
> 
> 时间：2013-02-12T11:40:38.277
> 
> 标签：php, javascript, redirect, photo-upload

我正在使用以下链接[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)中的照片 上传，但我想在上传完成后重定向页面。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:43:10.743

这里：

```
<?php
/* do something with the upload code..... */
/* Redirect browser */
header("Location: http://theos.in/");
/* Make sure that code below does not get executed when we redirect. */
exit;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:43:50.520

```
var totalUploadCount = $('#fileUpload').length;
var completedCount = 0;

$('#fileupload').fileupload({
        dataType: 'json',
        done: function (e, data) {
                if(completedCount++ == totalUploadCount)
                    window.location = "http://www.yoururl.com";
            });
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:43:12.113

上传成功后，使用这个

```
header ("location: YOUR-PAGE.php");
return; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T11:43:58.933

`window.location.href = 'new url'`在您的上传完成回调 ( `fileuploaddone`) 中使用。阅读[API](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)了解更多关于回调的信息。

# python - 我可以在运行时从脚本打开应用程序吗？

> ID：14831716
> 
> 赞同：9
> 
> 时间：2013-02-12T11:40:43.237
> 
> 标签：python, python-3.x, python-2.7

我想知道我是否可以在运行时在 Python 中打开任何类型的应用程序？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-12T11:45:02.233

假设您使用的是 Windows，您将使用以下命令之一。

[子进程调用](http://docs.python.org/2/library/subprocess.html#using-the-subprocess-module)

```
import subprocess
subprocess.call('C:\\myprogram.exe') 
```

[os.startfile](http://docs.python.org/2/library/os.html)

```
import os
os.startfile('C:\\myprogram.exe') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-27T02:04:19.757

使用系统，您还可以利用开放功能（特别是如果您使用的是 mac os/unix 环境。当您遇到权限问题时可能很有用。

```
import os

path = "/Applications/Safari.app"
os.system(f"open {path}") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T11:42:27.633

尝试看看`subprocess.call` [http://docs.python.org/2/library/subprocess.html#using-the-subprocess-module](http://docs.python.org/2/library/subprocess.html#using-the-subprocess-module)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T10:32:59.467

使用此代码： -

```
 import subprocess
 subprocess.call('drive:\\programe.exe') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-20T14:26:35.127

尝试这个 ：

```
import os
import subprocess

command  = r"C:\Users\Name\Desktop\file_name.exe"
os.system(command)
#subprocess.Popen(command) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-08T15:41:54.807

当然可以。只需导入`import subprocess`并调用`subprocess.call('applicaitonName')`.

例如你想在**Ubuntu**中打开 VS Code ：

```
import subprocess
cmd='code';
subprocess.call(cmd) 
```

此行也可用于打开应用程序，如果您需要更多信息，例如我想捕获错误，所以我使用了**stderr**

```
subprocess.check_output(cmd, shell=True, stderr=subprocess.STDOUT) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-22T22:45:32.443

Windows、Linux 和 MacOS 的一些额外示例：

```
import subprocess

# Generic: open explicitly via executable path
subprocess.call(('/usr/bin/vim', '/etc/hosts'))
subprocess.call(('/System/Applications/TextEdit.app/Contents/MacOS/TextEdit', '/etc/hosts'))

# Linux: open with default app registered for file
subprocess.call(('xdg-open', '/tmp/myfile.html'))

# Windows: open with whatever app is registered for the given extension
subprocess.call(('start', '/tmp/myfile.html'))

# Mac: open with whatever app is registered for the given extension
subprocess.call(('open', '/tmp/myfile.html'))

# Mac: open via MacOS app name
subprocess.call(('open', '-a', 'TextEdit', '/etc/hosts'))

# Mac: open via MacOS app bundle name
subprocess.call(('open', '-b', 'com.apple.TextEdit', '/etc/hosts')) 
```

如果您需要打开特定的 HTML 页面或 URL，则可以使用[webbrowser](https://docs.python.org/3/library/webbrowser.html)模块：

```
import webbrowser

webbrowser.open('file:///tmp/myfile.html')

webbrowser.open('https://yahoo.com')

# force a specific browser
webbrowser.get('firefox').open_new_tab('file:///tmp/myfile.html') 
```

# .net - 我可以在不同 xsd 文件中的表之间创建链接吗？

> ID：14831722
> 
> 赞同：1
> 
> 时间：2013-02-12T11:40:58.507
> 
> 标签：.net, visual-studio, xsd

我有（继承）一个 .Net 解决方案，其中包含一个 xsd 文件，其中包含 50 多个表，以及表之间的大量关系。这非常难以管理，并且开始导致性能问题（我相信将来某个时候我需要添加更多表）。我想把这个 xsd 分成逻辑部分，但是有几个核心表，几乎所有东西都以某种方式链接到。

在 Visual Studio 中，是否可以在不同 xsd 文件中的表之间创建关系？

如果是这样，我该怎么做？

如果不是，最好的选择是什么（我不喜欢在单独的 xsd 文件中复制这些代码表的想法，但我真的不想重写应用程序与数据库交互的整个方式）？

抱歉，如果这个问题有点含糊，但没有任何代码可以发布，如果我想发布任何图片，我无法对图片进行消毒。

提前致谢

邓肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:41:41.000

我认为不可能实现你想要的。一个 XSD 文件定义了一个 DataSet；我将 DataSet 与数据库相关联，并且没有声明性方法来维护跨数据库的数据库对象之间的引用完整性。

# ios - [[NSManagedObject changedValuesForCurrentEvent]] 返回旧值

> ID：14831723
> 
> 赞同：3
> 
> 时间：2013-02-12T11:41:05.190
> 
> 标签：ios, core-data, nsmanagedobject

[NSManagedObject changedValuesForCurrentEvent] 返回旧值。有人遇到过这个问题吗？

文档说：

> 返回一个字典，其中包含自上次发布 NSManagedObjectContextObjectsDidChangeNotification 以来已更改的持久属性的键和（新）值。

但实际上它返回旧值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:48:16.430

我在回复的时候看到了这个`NSManagedObjectContextObjectsDidChangeNotification`。我不知道这是否与其他`NSManagedObjectContext`通知一致。作为一种解决方法，我使用键通过以下方式从托管对象本身获取新值：

```
NSDictionary *changedProperties = [managedObject changedValuesForCurrentEvent];
for(NSString *key in changedProperties) {
    NSObject *newValue = [managedObject performeSelector:NSSelectorFromString(key)];
} 
```

另一方面：我发现（在某些情况下），在使用`[managedObjectContext refreshObj:managedObject mergeChanges:NO]`. 就我而言，我需要遍历已删除对象的关系。但是即将被删除的对象关系已经被清空了。刷新对象解决了这个问题。

希望这可以帮助。

# android - Android：imageView.setImageResource(AnimationDrawable) 导致内存错误

> ID：14831728
> 
> 赞同：1
> 
> 时间：2013-02-12T11:41:20.370
> 
> 标签：android, image, animation, memory

这是我正在做的

```
ImageView image2 = (ImageView) findViewById(R.id.imageView3);
image2.getDrawable().setCallback(null);
image2.setImageResource(R.drawable.fire); 
```

其中 fire 是一个提出动画可绘制的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" 
    android:oneshot="true">
<item android:drawable="@drawable/fire1" android:duration="50" />
<item android:drawable="@drawable/fire2" android:duration="50" />
<item android:drawable="@drawable/fire3" android:duration="50" />
<item android:drawable="@drawable/fire4" android:duration="50" />
<item android:drawable="@drawable/fire5" android:duration="50" />
...
<item android:drawable="@drawable/fire16" android:duration="50" /> 
```

我有这个错误

```
02-12 11:37:20.919: E/dalvikvm-heap(3193): 1535664-byte external allocation too large for this process.
02-12 11:37:20.959: E/GraphicsJNI(3193): VM won't let us allocate 1535664 bytes
02-12 11:37:20.959: W/dalvikvm(3193): threadid=1: thread exiting with uncaught exception (group=0x40018560)
02-12 11:37:20.979: E/AndroidRuntime(3193): FATAL EXCEPTION: main
02-12 11:37:20.979: E/AndroidRuntime(3193): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.content.res.Resources.loadDrawable(Resources.java:1709)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.content.res.Resources.getDrawable(Resources.java:581)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.graphics.drawable.AnimationDrawable.inflate(AnimationDrawable.java:267)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.content.res.Resources.loadDrawable(Resources.java:1694)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.content.res.Resources.getDrawable(Resources.java:581)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.widget.ImageView.resolveUri(ImageView.java:501)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.widget.ImageView.setImageResource(ImageView.java:280)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at com.example.kersplatt.GameActivity.onCreate(GameActivity.java:71)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.os.Looper.loop(Looper.java:130)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at android.app.ActivityThread.main(ActivityThread.java:3683)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at java.lang.reflect.Method.invokeNative(Native Method)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at java.lang.reflect.Method.invoke(Method.java:507)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:875)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:633)
02-12 11:37:20.979: E/AndroidRuntime(3193):     at dalvik.system.NativeStart.main(Native Method) 
```

我读了很多关于内存泄漏、内存错误的线程（例如[java.lang.OutOfMemoryError: bitmap size超出 VM budget - Android](https://stackoverflow.com/questions/1949066/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-android/6779067#6779067)），但我没有成功解决我的问题

当我将fire1`image2.setImageResource(R.drawable.fire);`替换`image2.setImageResource(R.drawable.fire1);`为简单的png时，一切正常我该怎么做才能解决我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T03:19:23.140

要消除 OutOfMemory 错误，您应该专注于缩放。您可以在[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html找到](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

# qt - 在 Qt 中使用单选按钮选择显示数据库值？

> ID：14831731
> 
> 赞同：0
> 
> 时间：2013-02-12T11:41:23.090
> 
> 标签：qt, qt-creator

我想在 Qt GUI 中显示一些带有单选按钮选择的数据库行值。这怎么能实现？我猜这可以使用 foreach 循环来完成。我对以下课程进行了一些研究：

1）QMainWindow 2）QSqlTableModel 3）QTableWidget。

但是哪一个满足我的要求？我无法实现它，请指导我。提前致谢。

我已经在我的源文件中实现了这一点-

**主.cpp**：

```
#include <QtGui/QApplication>
#include <QtSql>
#include <QTableWidget>
#include <QMessageBox>
#include "mainwindow.h"
#include <QRadioButton>
#include <QVBoxLayout>
#include <QGroupBox>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QTableWidget* table = new QTableWidget();
    table->setWindowTitle("Connect to Mysql Database Example");

        QSqlDatabase db = QSqlDatabase::addDatabase("QMYSQL");
        db.setHostName("localhost");
        db.setDatabaseName("guests");
        db.setUserName("sri");
        db.setPassword("******");
        if (!db.open())
        {
          QMessageBox::critical(0, QObject::tr("Database Error"),
          db.lastError().text());
        }

        QSqlQuery query("SELECT * FROM new_members");

        table->setColumnCount(query.record().count());
        table->setRowCount(query.size());

        int index=0;
        while (query.next())
        {

            table->setItem(index,0,new QTableWidgetItem(query.value(0).toString()));
            table->setItem(index,1,new QTableWidgetItem(query.value(1).toString()));

            index++;

        }

// This is sample radiobutton from QGroupBox class. Like this I need to implement the values from DB in with radio button selections for each value

        QMainWindow *window = new QMainWindow();
        window->setWindowTitle(QString::fromUtf8("QGroupBox"));
        window->resize(400, 400);
        QGroupBox *groupBox = new QGroupBox("Radio Buttons");
        QRadioButton *radio1 = new QRadioButton("Radio button 1");
        radio1->setChecked(true);
        QVBoxLayout *vbox = new QVBoxLayout;
        vbox->addWidget(radio1);
        groupBox->setLayout(vbox);
        window->setCentralWidget(groupBox);
        window->show();

        table->show();
                                         //MainWindow w; w.show();

        return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:24:11.973

使用 a`QSqlTableModel`来驱动 a `QTableView`，您将需要一个自定义`QStyledItemDelegate`来*绘制*`QRadioButton`（是的，我说的[是绘制，而不是创建](http://qt-project.org/doc/qt-4.8/qstyleditemdelegate.html#details)），并创建一个编辑器小部件（当然那真的是 a `QRadioButton`）。

这是一项相当大的工作，因此您需要阅读上述课程的文档以重新实现您需要的位。从[MVC 文档](http://qt-project.org/doc/qt-4.8/model-view-programming.html)开始。

# php - 我想在填写每个文本字段或使用 ajax 或 jQuery 选择类别后显示成功图像

> ID：14831734
> 
> 赞同：2
> 
> 时间：2013-02-12T11:41:27.957
> 
> 标签：php, jquery, ajax, response

这是我所做的......我想在输入字段被填满后显示图像第一个字段正在工作现在如何添加额外的输入字段以在该输入字段上显示该特定图像欢迎建议..... HTML代码

```
$(document).ready(function() {

    $("#username").blur(function() { // when focus out

        //$("#message").html(''); //before AJAX response

        var form_data = {
            action: 'last_name',
            username: $(this).val()
        };

        $.ajax({
            type: "POST",
            url: "functions.php",
            data: form_data,
            success: function(result) {
                $("#lastnamefirstname").html(result);   
            }
        });

    });

});

<div id="lastnamefirstname"></div>
 <input id="username" name="lname" required="required" class="text"  placeholder="Last Name"/> 
```

函数.php

```
$action = $_POST['action'];

    if($action == 'last_name')
    {
        $firstnamelast = $_POST['username'];
        if($firstnamelast!='')
        {
        last_name($firstnamelast);
        }
    }

    function last_name($firstnamelast)
    {   
        echo ' <img src="images/profile/name.png" style="margin: 1px 0 -28px -37px;"/>';
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:55:28.247

您可以尝试使用以下 if 语句。它只是检查所有输入字段是否不为空。

```
if ( ($("#field_id_1").val() != '') && ($("#field_id_2").val() != '') && ... ) {
  // display image
  // trigger ajax request

} 
```

模糊的想法不是最合适的，因为如果关注其他内容，该字段可以留空。

# awk - awk - 分配来自多个来源的变量

> ID：14831737
> 
> 赞同：0
> 
> 时间：2013-02-12T11:41:32.317
> 
> 标签：awk, grep

我想打印输出，它是多个文件内容的组合。

例子：

```
grep -v 'word' FILE_A | awk -v var1="string1" -v var2="string2" -v var3="string3"   
 '{ print $1 var1 var2 var3}' 
```

我可以使用上面的命令来做到这一点：将特定的字符串分配给变量并使用`grep`'ed 内容打印它。
但是，如果`string1/2/3`'s 很长，那么分配这么长的单词会很复杂。

问题：

如果我将`string1/2/3`单行写入 a`File_B`如何将此类 File_B 行分配为变量？

例子：

```
cat File_B
string1
string2
string3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:46:51.490

为什么不把它全部放在一个`awk`脚本中而不仅仅是变量：

```
$ cat script.awk 
!/word/ {
    var1="string1"
    var2="string2"
    var3="string3longlonglonglonglonglong"
    print $1,var1,var2,var3
}

$ cat file
word no match
match1 
word no match
match2 match 123

$ awk -f script.awk file
match1 string1 string2 string3longlonglonglonglonglong
match2 string1 string2 string3longlonglonglonglonglong 
```

你永远不需要结合`grep`和`awk`。

# cmake - 如何在 CPACK 和 NSIS 中为文本文件添加开始菜单项

> ID：14831739
> 
> 赞同：2
> 
> 时间：2013-02-12T11:41:33.293
> 
> 标签：cmake, nsis, cpack

我想在开始菜单中输入`release_notes.txt`或。`release_notes.html`当我在菜单中选择 release_notes 条目时，文本文件将出现在记事本中或 html 填充在 Web 浏览器中。但我不知道如何编写命令`CMakeLists.txt`来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T01:42:32.677

你在用`CPACK_NSIS_MENU_LINKS`吗？

或者你可以使用[`CPACK_NSIS_EXTRA_INSTALL_COMMANDS`](http://cmake.3232098.n2.nabble.com/CPACK-on-windows-td5796081.html)...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T08:18:39.133

不确定当前版本的 CMake 是否提供更简单/不同的方式，但这就是我们所做的：

```
SET( CPACK_NSIS_CREATE_ICONS_EXTRA 
"
CreateShortcut \\\"$SMPROGRAMS\\\\$STARTMENU_FOLDER\\\\SDK Documentation.lnk\\\" \\\"$INSTDIR\\\\doc\\\\html\\\\index.html\\\"
" )

SET( CPACK_NSIS_DELETE_ICONS_EXTRA 
"
Delete \\\"$SMPROGRAMS\\\\$MUI_TEMP\\\\SDK Documentation.lnk\\\"
" ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-29T01:40:10.340

与 Johannes 的回答类似，*CPACK_NSIS_CREATE_ICONS_EXTRA*和*CPACK_NSIS_DELETE_ICONS_EXTRA*是管理快捷方式（开始菜单、桌面等）的一种灵活方式，包括在需要时添加命令行参数。[这篇简短的文章](http://crascit.com/2015/08/07/cmake_cpack_nsis_shortcuts_with_parameters/)提供了更多信息。它对删除链接使用略有不同的路径，并解释了原因。它还包括指向 NSIS 文档的链接，以显示可以创建快捷方式的其他位置等。

# android - 触摸时更改按钮颜色强制关闭

> ID：14831740
> 
> 赞同：-1
> 
> 时间：2013-02-12T11:41:35.877
> 
> 标签：android, xml, button

我在名为 simon_button 的 res/drawable 中创建了这个

```
 <selector xmlns:android="http://schemas.android.com/apk/res/android">   

     <item android:state_focused="true"
           android:color="#fc000000"/>    

     <item android:state_enabled="false" 
           android:color="#fcf60000" />  

     <item android:color="#fcf60000"/> 

 </selector> 
```

这是我的按钮代码

```
 <Button
        android:id="@+id/red"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_above="@+id/green"
        android:background="@drawable/simon_button"
        android:layout_marginBottom="7dp"
        android:layout_toLeftOf="@+id/CheckedSS"
        android:layout_marginRight="0dp"
        android:text="" /> 
```

谁能告诉我为什么这是强制关闭。当我从这个网站上阅读其他东西时，我一直在改变东西，但这是从 android 网站上复制粘贴的，我仍然强制关闭

```
02-12 04:31:01.277: D/memalloc(31678): ion: Mapped buffer base:0x5d8a5000 size:3768320 offset:0 fd:62
02-12 04:31:08.265: D/memalloc(31678): ion: Mapped buffer base:0x5dc3d000 size:3768320 offset:0 fd:66
02-12 04:31:08.305: D/memalloc(31678): ion: Mapped buffer base:0x59cc1000 size:147456 offset:0 fd:75
02-12 04:31:08.335: D/memalloc(31678): ion: Unmapping buffer  base:0x5d50d000 size:3768320
02-12 04:31:08.335: D/memalloc(31678): ion: Unmapping buffer  base:0x5d8a5000 size:3768320
02-12 04:31:08.335: D/memalloc(31678): ion: Unmapping buffer  base:0x5d075000 size:3768320
02-12 04:31:08.955: D/memalloc(31678): ion: Mapped buffer base:0x5d075000 size:3768320 offset:0 fd:57
02-12 04:31:08.975: D/memalloc(31678): ion: Unmapping buffer  base:0x59cc1000 size:147456
02-12 04:31:09.085: D/memalloc(31678): ion: Mapped buffer base:0x5d50d000 size:3768320 offset:0 fd:60
02-12 04:31:09.216: D/memalloc(31678): ion: Mapped buffer base:0x5d8a5000 size:3768320 offset:0 fd:63
02-12 04:31:09.266: D/memalloc(31678): ion: Unmapping buffer  base:0x5d075000 size:3768320
02-12 04:31:09.266: D/memalloc(31678): ion: Unmapping buffer  base:0x5d50d000 size:3768320
02-12 04:31:09.266: D/memalloc(31678): ion: Unmapping buffer  base:0x5dc3d000 size:3768320
02-12 04:31:10.086: D/memalloc(31678): ion: Mapped buffer base:0x5d075000 size:3768320 offset:0 fd:57
02-12 04:31:10.187: D/memalloc(31678): ion: Mapped buffer base:0x5d50d000 size:3768320 offset:0 fd:60
02-12 04:31:10.287: D/memalloc(31678): ion: Mapped buffer base:0x5dc3d000 size:3768320 offset:0 fd:66
02-12 04:31:10.337: D/memalloc(31678): ion: Unmapping buffer  base:0x5d8a5000 size:3768320
02-12 04:31:10.337: D/memalloc(31678): ion: Unmapping buffer  base:0x5d075000 size:3768320
02-12 04:31:10.337: D/memalloc(31678): ion: Unmapping buffer  base:0x5d50d000 size:3768320
02-12 04:31:11.478: D/memalloc(31678): ion: Mapped buffer base:0x5d075000 size:3768320 offset:0 fd:57
02-12 04:31:11.568: D/memalloc(31678): ion: Mapped buffer base:0x5d50d000 size:3768320 offset:0 fd:60
02-12 04:31:11.668: D/memalloc(31678): ion: Mapped buffer base:0x5d8a5000 size:3768320 offset:0 fd:63
02-12 04:31:11.718: D/memalloc(31678): ion: Unmapping buffer  base:0x5dc3d000 size:3768320
02-12 04:31:11.718: D/memalloc(31678): ion: Unmapping buffer  base:0x5d075000 size:3768320
02-12 04:31:11.718: D/memalloc(31678): ion: Unmapping buffer  base:0x5d50d000 size:3768320
02-12 04:31:12.329: D/memalloc(31678): ion: Mapped buffer base:0x5d075000 size:3768320 offset:0 fd:57
02-12 04:31:12.429: D/memalloc(31678): ion: Mapped buffer base:0x5d50d000 size:3768320 offset:0 fd:60
02-12 04:31:12.489: D/AndroidRuntime(31678): Shutting down VM
02-12 04:31:12.489: W/dalvikvm(31678): threadid=1: thread exiting with uncaught exception (group=0x40c67a68)
02-12 04:31:12.519: E/AndroidRuntime(31678): FATAL EXCEPTION: main
02-12 04:31:12.519: E/AndroidRuntime(31678): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.}: android.view.InflateException: Binary XML file line #7: Error inflating class <unknown>
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.os.Looper.loop(Looper.java:137)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.app.ActivityThread.main(ActivityThread.java:4514)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at java.lang.reflect.Method.invokeNative(Native Method)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at java.lang.reflect.Method.invoke(Method.java:511)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at dalvik.system.NativeStart.main(Native Method)
02-12 04:31:12.519: E/AndroidRuntime(31678): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class <unknown>
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.view.LayoutInflater.createView(LayoutInflater.java:606)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:274)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.app.Activity.setContentView(Activity.java:1835)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at com..onCreate(SimonSays.java:40)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.app.Activity.performCreate(Activity.java:4470)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
02-12 04:31:12.519: E/AndroidRuntime(31678):    ... 11 more
02-12 04:31:12.519: E/AndroidRuntime(31678): Caused by: java.lang.reflect.InvocationTargetException
02-12 04:31:12.519: E/AndroidRuntime(31678):    at java.lang.reflect.Constructor.constructNative(Native Method)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.view.LayoutInflater.createView(LayoutInflater.java:586)
02-12 04:31:12.519: E/AndroidRuntime(31678):    ... 24 more
02-12 04:31:12.519: E/AndroidRuntime(31678): Caused by: android.content.res.Resources$NotFoundException: File res/drawable-hdpi/simon_button.xml from drawable resource ID #0x7f020005
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.content.res.Resources.loadDrawable(Resources.java:1956)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.view.View.<init>(View.java:2834)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.widget.TextView.<init>(TextView.java:565)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.widget.Button.<init>(Button.java:108)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.widget.Button.<init>(Button.java:104)
02-12 04:31:12.519: E/AndroidRuntime(31678):    ... 27 more
02-12 04:31:12.519: E/AndroidRuntime(31678): Caused by: org.xmlpull.v1.XmlPullParserException: Binary XML file line #4: <item> tag requires a 'drawable' attribute or child tag defining a drawable
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:178)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:869)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.graphics.drawable.Drawable.createFromXml(Drawable.java:806)
02-12 04:31:12.519: E/AndroidRuntime(31678):    at android.content.res.Resources.loadDrawable(Resources.java:1953)
02-12 04:31:12.519: E/AndroidRuntime(31678):    ... 32 more
02-12 04:31:12.569: D/dalvikvm(31678): GC_CONCURRENT freed 3874K, 21% free 19070K/23907K, paused 1ms+12ms
02-12 04:36:49.844: I/Process(31678): Sending signal. PID: 31678 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:04:41.457

`android:color`可能由于您的选择器的参数而出现此错误。这似乎`color`不是一个有效的参数。尝试将其更改为`android:drawable`，如果有必要将您的颜色值移动到 reources 文件，如下所示：

```
<drawable name="color1">#fc000000</drawable>
<drawable name="color2">#fcf60000</drawable>
<drawable name="color3">#fcf60000</drawable> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T12:16:08.950

```
 <item android:state_focused="true"
       android:drawable="@color/Black"/>    

 <item android:state_enabled="false" 
       android:drawable="@color/Red" />  

 <item android:drawable="@color/Red"/> 

 </selector> 
```

虽然当我按下按钮时没有任何变化

# javascript - 使用 underscore.js _.each 函数获取重复项？

> ID：14831741
> 
> 赞同：0
> 
> 时间：2013-02-12T11:41:38.057
> 
> 标签：javascript, html, json, html-table, underscore.js

我正在做这样的事情来在下划线模板中获取 JSON

```
 <% _.each(CList, function(d) {
    var i = 0 
      _.each(d, function(Cdata) {
          console.log(Cdata)
         var pid=JSON.stringify(Cdata["_id"]);
         if(typeof(Cdata["LOCATION"]) !== "undefined"){
       %>
       <tr>
       <td><input type="checkbox" id="Check<%= i %>" onclick='myfunctioncustomer(this,id,"<%= Cdata['COMPANY'] %>"," <%= Cdata['FIRST NAME'] %>","<%= Cdata['LAST NAME'] %> ","<%= Cdata['COMPANY URL'] %> ","<%= Cdata['LINKEDIN URL'] %> ","<%= Cdata['PERSONAL URL'] %> ","<%= Cdata['TWITTER URL'] %> ","<%= Cdata['DESIGNATION'] %> ","<%= Cdata['LOCATION'] %> ","<%= Cdata['PHONE'] %> ",<%= pid %>)' value='<%= Cdata["EMAIL"]  %>' ></input></td>
       <td> <%= Cdata['COMPANY'] %> </td>
       <td> <%= Cdata['FIRST NAME'] +' ' +Cdata['LAST NAME'] %> </td>
       <td> <%= Cdata['LOCATION'] %></td>
       </tr>
      <% i++; 
      }
    })%>
  <% }); %> 
```

结果给了我 json 作为一个表，其中 2 行具有相同的值。我得到这样的东西

```
 Company Name                    Name            Location
 Mercury Interactive Germany     Georg Goller    Germany
 Mercury Interactive Germany     Georg Goller    Germany
 Mercury Interactive GmbH        Gunter Kraft    Germany
 Mercury Interactive GmbH        Gunter Kraft    Germany 
```

我在这里做错了什么..我想摆脱重复

我的 JSON 的结构：

```
 [{"SECTOR": "", "CITY": "Missassauga", "DESIGNATION": "ASCM II", "FIRST NAME":            "Michael", "LAST NAME": "Gambarotto", "COMPANY": "Mercury Interactive Corporation", "URL": "", "PHONE": "(416) 605-7872", "LOCATION": "Canada", "ADDRESS": "5800 Explorer Drive, Suite 320Missassauga, Ontario L4W5K9Canada", "_id": {"$oid": "50b5da3dea01a32302a6a2ae"}, "EMAIL": "mgambarotto@mercury.com", "SIZE": ""}, {"SECTOR": "", "CITY": "Missassauga", "DESIGNATION": "APM Major Account Manager", "FIRST NAME": "Tim", "LAST NAME": "Healey", "COMPANY": "Mercury Interactive Corporation", "URL": "", "PHONE": "(416) 706-0171", "LOCATION": "Canada", "ADDRESS": "5800 Explorer Drive, Suite 320Missassauga, Ontario L4W5K9Canada", "_id": {"$oid": "50b5da3dea01a32302a6abfc"}, "EMAIL": "thealey@mercury.com", "SIZE": ""}, {"SECTOR": "", "CITY": "Mississauga", "DESIGNATION": "AM Manager", "FIRST NAME": "Warren", "LAST NAME": "Borthwick", "COMPANY": "Mercury Interactive Corporate", "URL": "", "PHONE": "416-419-4370", "LOCATION": "Canada", "ADDRESS": "5060 Spectrum WaySuite 400 ON L4W 5N5MississaugaCanada", "_id": {"$oid": "50b5da3dea01a32302a6adbf"}, "EMAIL": "wborthwick@mercury.com", "SIZE": ""}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:36:04.770

你的内心`_.each`似乎是不必要的：

```
 <% _.each(CList, function(Cdata, i) {
    var pid=JSON.stringify(Cdata["_id"]);
    if(typeof(Cdata["LOCATION"]) !== "undefined"){
      %>
      <tr>
      <td><input type="checkbox" id="Check<%= i %>" onclick='myfunctioncustomer(this,id,"<%= Cdata['COMPANY'] %>"," <%= Cdata['FIRST NAME'] %>","<%= Cdata['LAST NAME'] %> ","<%= Cdata['COMPANY URL'] %> ","<%= Cdata['LINKEDIN URL'] %> ","<%= Cdata['PERSONAL URL'] %> ","<%= Cdata['TWITTER URL'] %> ","<%= Cdata['DESIGNATION'] %> ","<%= Cdata['LOCATION'] %> ","<%= Cdata['PHONE'] %> ",<%= pid %>)' value='<%= Cdata["EMAIL"]  %>' ></input></td>
      <td> <%= Cdata['COMPANY'] %> </td>
      <td> <%= Cdata['FIRST NAME'] +' ' +Cdata['LAST NAME'] %> </td>
      <td> <%= Cdata['LOCATION'] %></td>
      </tr>
      <%
    }
  }); %> 
```

# html - Colspan 在引导表上不起作用

> ID：14831742
> 
> 赞同：8
> 
> 时间：2013-02-12T11:41:45.467
> 
> 标签：html, twitter-bootstrap

我有一个嵌套的引导程序`table`，我想`colspan`处理它，但它似乎不起作用。

归根结底，我想得到这样的结果：

```
 ____________________
  |   Col1 | Col2      |
  |--------------------|
  |This is data I want |
  |--------------------|
  | Col 1  | Col 2     |
  ---------------------- 
```

我创建了这个[小提琴](http://jsfiddle.net/Fumunchu/pJkXd/2/)来演示完整的功能。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T12:05:46.600

我修好了你的[小提琴](http://jsfiddle.net/Fumunchu/pJkXd/2/)

```
 <tr class="child">
     <td colspan="7">
      <table>
         <tr>
            <td colspan="7">Expand This To Full Table</td>
          </tr>
      </table>
     </td>
</tr> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T14:03:10.783

正如 G-Man 所提到的，您需要有最外层`td`才能执行`colspan`. 内表实际上不需要`colspan`如下。虽然，我认为嵌套`table`在 a中并不是一个好主意`table`，但这取决于具体情况。[小提琴更新](http://jsfiddle.net/pJkXd/3/)

```
<td colspan="7">Some Content Here</td> 
```

# eclipse - java调试的快捷键

> ID：14831744
> 
> 赞同：0
> 
> 时间：2013-02-12T11:41:47.697
> 
> 标签：eclipse, debugging, keyboard-shortcuts

是否有任何快捷键可以终止所有活动的调试启动、从调试视图中删除所有终止的启动并显示调试历史快速菜单？

我找到了从这里终止单次启动的快捷键 [eclipse 中终止调试/运行的捷径是什么？](https://stackoverflow.com/questions/321118/what-is-the-short-cut-in-eclipse-to-terminate-debugging-running/14831622#14831622)

# java - 带有 2 个 JComboBox 的搜索功能 - 不显示第 1 个和第 2 个的搜索

> ID：14831748
> 
> 赞同：0
> 
> 时间：2013-02-12T11:41:50.563
> 
> 标签：java, swing, jcombobox, event-dispatch-thread

It runs fine but when choosing the `idCombo`with which I'm searching, the `nameFIeld`which is also a `JComboBox`does not change but remains the first in the list, while all other fields change accord.

```
package GUI;

import Logic.*; //Inherits from vector class found in the package Logic
import javax.swing.*;
import java.awt.*; 
import java.awt.event.*; //Works with the ActionListener

    public class Search extends JFrame implements ActionListener { 

        //Panels
        private JPanel north = new JPanel(); 
        private JPanel south = new JPanel();
        private JPanel west = new JPanel();
        private JPanel east = new JPanel();
        private JPanel center = new JPanel();

        //Labels
        private JLabel mainTitle = new JLabel ("Search Records"); //Main title

        private JLabel westLabel = new JLabel ("      "); //To create margins
        private JLabel eastLabel = new JLabel ("      ");

        //Labels and Text Fields 

        private JLabel idLabel = new JLabel("CD ID");
        private JComboBox idCombo = new JComboBox(); 
        //To create a drop down list of CD IDs

        private JLabel nameLabel = new JLabel("Customer Name");  
        private JComboBox nameField;

        private JLabel dateLabel = new JLabel("Date");
        private JTextField dateField = new JTextField();

        private JLabel subjectLabel = new JLabel("Subject");
        private JTextField subjectField = new JTextField();

        private JLabel fileLabel = new JLabel("File");
        private JTextField fileField = new JTextField();

        private JLabel pageLabel = new JLabel("Page"); 
        private JTextField pageField = new JTextField();

        //Buttons 
        private JButton exitButton = new JButton("Exit");

        //Creating an instance of type VectorRecord 
        private VectorRecord vr;
        private VectorCustomer vc;

            public Search(VectorRecord vr, VectorCustomer vc){

                //NORTH PANEL 
                super("Search Records");

                this.vr = vr;
                this.vc = vc;

                this.setLayout(new BorderLayout()); //Setting the 'Search Records' window layout to Border Layout
                this.add(north,BorderLayout.NORTH); //Adding the north panel to the Border Layout 
                mainTitle.setFont(new Font ("Arial",Font.BOLD,20)); //Arranging the font of the main title
                mainTitle.setForeground(Color.black); //Arranging the color of the main title
                north.add(mainTitle); // Adding the maintitle to the north panel

                //CENTER PANEL                 
                center.setLayout(new GridLayout(6,2,0,15)); //6 rows, 2 columns and spacing
                this.add(center,BorderLayout.CENTER); //Adding the center panel to the Border Layout

                //Adding Labels and TextFields to the center panel
                center.add(idLabel);
                center.add(idCombo);
                idCombo.setModel(new DefaultComboBoxModel(vr.fillIdCombo())); //fillIdCombo is a method  in VectorRecords class
                idCombo.addActionListener(this);
                idLabel.setFont(new Font ("Arial", Font.BOLD, 16)); //Arranging the font and size 

                center.add(nameLabel);
                center.add(nameField);
                nameField.setModel(new DefaultComboBoxModel(vc.fillCustomerCombo()));
                nameField.addActionListener(this);
                nameLabel.setFont(new Font ("Arial", Font.BOLD, 16)); //Arranging the font and size 

                center.add(dateLabel); 
                center.add(dateField);
                dateLabel.setFont(new Font ("Arial", Font.BOLD, 16)); //Arranging the font and size 

                center.add(subjectLabel); 
                center.add(subjectField);
                subjectLabel.setFont(new Font ("Arial", Font.BOLD, 16)); //Arranging the font and size 

                center.add(fileLabel); 
                center.add(fileField);
                fileLabel.setFont(new Font ("Arial", Font.BOLD, 16)); //Arranging the font and size 

                center.add(pageLabel);
                center.add(pageField);
                pageLabel.setFont(new Font ("Arial", Font.BOLD, 16)); //Arranging the font and size        

                //WEST & EAST PANEL 
                //To create margins
                west.setLayout(new FlowLayout()); //Setting the west panel in the border layout, to Flow layout 
                this.add(west,BorderLayout.WEST);
                west.add(westLabel);
                east.setLayout(new FlowLayout()); //Setting the east panel in the border layout, to Flow layout
                this.add(east,BorderLayout.EAST);
                east.add(eastLabel);

                //SOUTH PANEL
                south.setLayout(new FlowLayout()); //Setting the south panel in the border layout, to Flow layout
                this.add(south,BorderLayout.SOUTH); //Adding the south panel to the BorderLayout
                south.add(exitButton); //Adding the Exit button to the south panel
                exitButton.addActionListener(this); //In order for the Exit button to work

                this.setSize(450,350); //Giving the window a size and location a
                this.setLocation(320,250);
                this.setVisible(true);
            }

            public void actionPerformed (ActionEvent event){
                Record tempRecord= new Record();
                Record modifiedRecord = new Record();
                String recordId = (String)idCombo.getSelectedItem();
                tempRecord = vr.getRecordRec(Integer.parseInt(recordId));

                    if(event.getSource() instanceof JComboBox){
                        if(event.getSource() == idCombo){

                            nameField.setSelectedItem((Customer) tempRecord.getCustomer());
                            dateField.setText(tempRecord.getDate());
                            subjectField.setText(tempRecord.getSubject());
                            fileField.setText(tempRecord.getFile());
                            pageField.setText(tempRecord.getPage() + "");

                        }
                    }

                    if(event.getSource().equals(exitButton)){
                            vr.saveRecordsToFile();
                            this.dispose();                                                        
                        }

                    }

                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:59:08.470

当您使用**tempRecord.getCustomer()返回的****Customer**对象在 nameField 上调用**setSelectedItem**时，它将尝试查找该对象是否已存在于 nameField 组合框中。

 ****在检查它是否会为对象相等性调用 equals 方法时，请确保覆盖**Customer**类的 equals 方法。****

# mysql - Mysql 将 unicode 代码点转换为 utf-8 字符

> ID：14831749
> 
> 赞同：0
> 
> 时间：2013-02-12T11:41:57.437
> 
> 标签：mysql, utf-8, char, codepoint

我正在使用 CHAR(code_point USING ucs2) 将 unicode 代码点转换为 utf-8 字符，但它在 0x00ff 代码点之上给了我意想不到的结果。它为我提供了针对代码点 0x0100 到 0x01FF 的字符 Ā（代码点 0x0100），以及针对代码点 0x0200 到 0x02FF 的字符 Ȁ（代码点 0x0200），依此类推。

所以如果我执行这个查询：

```
SET NAMES utf8;
SELECT CHAR(0x0100 USING ucs2),CHAR(0x0101 USING ucs2),CHAR(0x0200 USING ucs2),CHAR(0x0201 USING ucs2); 
```

，它给了我结果：

| Ā | Ā |  |  |

而预期的结果是：

| Ā | 一个 |  | γ |

请帮助我理解问题，或提出另一种方法。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:01:27.027

我这样做了

```
CONVERT(CHAR(code_point) USING ucs2); 
```

我必须将字符与utf8混合，所以我必须进一步转换为utf8

```
CONVERT(CONVERT(CHAR(code_point) USING ucs2) USING utf8); 
```

# google-apps-script - 在谷歌电子表格上禁用关闭超链接和消息

> ID：14831752
> 
> 赞同：1
> 
> 时间：2013-02-12T11:42:05.150
> 
> 标签：google-apps-script, google-sheets

当我们运行 Google App Script 的任何方法时，Google 电子表格上会出现一条带有关闭超链接的消息。例如：

**运行脚本*方法名*关闭超链接**

我想知道在后台执行任何功能时是否有任何选项可以禁用消息并关闭出现在 Google 电子表格上的超链接。在 not 中，请分享哪些替代品可以隐藏这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:31:53.543

它在一个`div`类中`docs-butterbar-container`，所以在你自己的机器上，你可以添加

```
.docs-butterbar-container {
  display:none;
} 
```

到用户样式表。

但是，如果您希望将其隐藏在其他工作表/脚本中，那么您很可能不走运，除非您有办法推出用户样式表。

我也不建议隐藏这个。这很有用。

# apache-flex - 文本输入删除按钮，如 Flex 中的标签

> ID：14831758
> 
> 赞同：0
> 
> 时间：2013-02-12T11:42:36.087
> 
> 标签：apache-flex, flex4, flex3

在 Flex 应用程序中如何添加删除标签？ ![删除文本区域中的标记](../Images/d8b8e35f14bd9c5d195bba0ff75f2e27.png)

另一个例子：StackoverFlow 标签部分.. 当输入`Fx`然后点击`Space`一些图像时将添加..

只是我想要一些建议....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:02:27.387

使用对标签非常有用的库“flex-autocomplete”。您可以更改标签的外观，因为您拥有它的完整源代码。你可以从这里获取这个库的演示 [http://flex-autocomplete.com/demo/#](http://flex-autocomplete.com/demo/#)

你可以从这里下载这个库的源代码 [http://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&loc=en_us&extid=1721530](http://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&loc=en_us&extid=1721530)

愿这对你有帮助..！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:38:16.307

我认为您可以`dataGroup`为此使用 a ，添加一个`itemRenderer`in `dataGroup`。正如 JK Patel 所说，添加一个`textInput`具有`auto-complete`功能的，添加一个 `BorderContainer`用于边框样式的`textInput`. 绑定`list`一个`tags`in `datagroup`。

这里有一些关于 dataGroup 的帮助。

（[http://help.adobe.com/en_US/flex/using/WS64909091-7042-4fb8-A243-8FD4E2990264.html](http://help.adobe.com/en_US/flex/using/WS64909091-7042-4fb8-A243-8FD4E2990264.html)）

自行搜索以获取更多帮助...这里是另一个示例。

( [http://www.hufkens.net/2009/06/flex-4-datagroup-and-itemrenderers/](http://www.hufkens.net/2009/06/flex-4-datagroup-and-itemrenderers/) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-12T12:20:32.060

看看这个看起来和你想要的一样的自动完成组件。在下拉列表中将样式更改为 facebook

**DEMO** [Facebook like AutoComplete 文本输入演示](http://sketch-out.com/flexautocomplete/demo/#app=7b9d&b817-selectedIndex=0)

**来源** [来源](https://github.com/hillelcoren/flex-autocomplete)

**开发者网站** [Hillel Coren AutoComplete](http://hillelcoren.com/flex-autocomplete/)

# lua - 是否有返回它们的表达式而不是引用的名称？

> ID：14831760
> 
> 赞同：0
> 
> 时间：2013-02-12T11:42:38.613
> 
> 标签：lua, terminology

我注意到字符串、数字、bool 和 nil 数据似乎可以直接使用。但是当涉及到函数、表格等时，您会得到一个引用而不是实际的对象。

这种现象有名字吗？是否有术语描述这两组类型的处理方式之间的区别？

```
a = "hi"    
b = 1
c = true
d = nil
e = {"joe", "mike"}
f = function () end
g = coroutine.create(function () print("hi") end)

print(a) --> hi
print(b) --> 1
print(c) --> true
print(d) --> nil
print(e) --> table: 0x103350
print(f) --> function: 0x1035a0
print(g) --> thread: 0x103d30 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:48:17.713

您在这里看到的是编译器尝试返回对象的字符串表示形式。对于简单的对象类型，已经提供了 __tostring 实现，但对于其他更复杂的类型，没有直观的方法来返回字符串表示。

请参阅[Lua：为自定义用户数据提供一个 tostring 方法](https://stackoverflow.com/questions/12784446/lua-give-custom-userdata-a-tostring-method)以获取更多信息，这可能会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:50:17.103

在 Lua 中，数字是值，其他所有内容只能通过引用访问。但是打印上的不同行为仅仅是因为无法实际打印函数（虽然表可能具有打印的默认行为，但它们没有 - 可能是因为它们被允许具有循环引用）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T20:29:13.373

.Net（Microsoft Visual Basic、Visual C++ 和 C#）将它们描述为值类型和引用类型，其中引用类型通过引用引用值，而值类型保存实际值。

我不认为 lua 考虑太多，因为它应该是一种更简单的解释语言，最终它并不重要，因为 lua 是一种相当弱类型的语言（即除了抛出之外它不会强制类型安全当您尝试对无法使用的类型使用操作时出现错误）。

无论哪种方式，以我的经验，大多数程序员都将它们理解为“值类型”和“引用类型”，所以我会说它们是最好坚持使用的两个术语。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T19:55:53.707

你看到的是[`print`](http://www.lua.org/manual/5.2/manual.html#pdf-print)函数的行为。它将通过[`tostring`](http://www.lua.org/manual/5.2/manual.html#pdf-tostring)在它们上使用它的论点。`print`可以通过`io.write`这样使用来实现（简化一点）：

```
function print(...)
    local args = {n = select('#',...), ...}
    for i=1,args.n do
        io.write(tostring(args[i]), '\t')
    end
    io.write('\n')
end 
```

您应该注意到对 的调用[`tostring`](http://www.lua.org/manual/5.2/manual.html#pdf-tostring)。默认情况下，它返回数字、布尔值和字符串的表示形式。由于没有合理的默认方法将其他类型转换为字符串，因此它只显示类型和指向对象的无用内部指针（以便您可以区分实例）。您可以[在此处查看源代码](http://www.lua.org/source/5.2/lauxlib.c.html#luaL_tolstring)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T20:52:45.843

你会感到惊讶，但 Lua 中没有值/引用的区别。:-)
请[在此处](http://lua-users.org/lists/lua-l/2012-11/msg00159.html)和[此处](http://lua-users.org/lists/lua-l/2012-11/msg00153.html)阅读。

# iphone - 为特定日期设置任务（iOS 应用）

> ID：14831761
> 
> 赞同：0
> 
> 时间：2013-02-12T11:42:41.280
> 
> 标签：iphone, ios, date

假设我今天创建了一个任务，并说我想从今天起 10 天后（通过推送通知）被提醒。从本质上讲，我如何不断跟踪它是哪一天（即使我的应用程序没有被积极使用）最终识别它是从今天开始的 10 天？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:52:10.623

你不这样做。

您将安排通知何时应该像这样发生......

```
UILocalNotification *notification = [[UILocalNotification alloc] init];
notification.fireDate = [NSDate someDateInTheFuture];
notification.alertBody = @"This is your alert. Do something";
notification.alertAction = @"Alert";

[[UIApplication sharedApplication] scheduleLocalNotification:notification]; 
```

然后，通知将在到达您设置的日期时触发。您无需在应用程序中自行检查。它只是发生。

# c# - DLL 不存储字符串 C#

> ID：14831765
> 
> 赞同：0
> 
> 时间：2013-02-12T11:42:54.437
> 
> 标签：c#

我有一个可以从 Windows 驱动器的资源管理器上下文菜单启动的应用程序。当您单击菜单项时，驱动器号将传递给新实例。我想确保任何旧实例都已关闭。

我还想确保最后选择的驱动器是持久的，这样当我从开始菜单再次启动应用程序时，它会记住我最初选择的驱动器。

最好是已经运行的应用程序会收到一个事件，以便它可以更新而无需终止并重新启动。

* * *

我尝试了以下方法，但这似乎不起作用：

这是我的类库方法（它只是定义变量的一行，所以我有一个 DLL，其中有一个变量，仅此而已）

```
 namespace Dispatch
 {
     public class cls_get_drive_letter
     {
         public static string drive_letter;
     }
 } 
```

这是我的加载表单代码：（这里我将填写 DLL 的变量）

```
 private void Frm_loading_Load(object sender, EventArgs e)
 {
     Dispatch.cls_get_drive_letter.drive_letter = "XXX";
     Process currentProcess = Process.GetCurrentProcess();
     if (Process.GetProcessesByName(currentProcess.ProcessName, currentProcess.MachineName).Length >1)
     {
        currentProcess.Kill();
     }
 } 
```

因此，当我第一次运行它时，“XXX”将存储在 DLL 中，但是当当前应用程序实例正在运行并且我将运行它的下一个实例时，应用程序将因为以下代码而关闭：

```
 Process currentProcess = Process.GetCurrentProcess();
 if (Process.GetProcessesByName(currentProcess.ProcessName, currentProcess.MachineName).Length >1)
 {
     currentProcess.Kill();
 } 
```

因此，当此代码发生关闭代码时，新的“XXX”不会存储在 DLL 中，最后一个字符串将在 dll 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T11:46:01.897

所有变量，在本例中为静态字段，只会在应用程序的运行实例中保持不变。
当应用程序再次启动时，该字段为空

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T11:49:56.457

静态变量不存储在“dll 内部”，而是存储在加载 dll 的应用程序的内存中。当应用程序的第二个实例启动时，它将拥有自己的内存空间，并将拥有自己的字符串变量版本。该变量也不保留在实例之间，因此一旦您启动一个新实例，它将拥有自己的空字符串变量。

当应用程序停止时，该实例的内存被释放并且变量被“遗忘”。

如果你想在应用程序之间共享状态，有各种各样的解决方案，一种可能是 System.Configuration.Settings API、某个地方的文件、多个进程之间共享的内存映射文件、命名管道、内核信号量。选项很多。

在我们准确了解您要通过此共享状态完成什么之前，我们无法为您提供比您现在正在做的事情的解释更好的选择，这对静态变量的工作方式不起作用.

* * *

**根据新信息更新：**

您可以将当前选择的驱动器存储在[项目的设置文件中](http://msdn.microsoft.com/en-us/library/vstudio/a65txexh%28v=vs.110%29.aspx)。您可以从 Visual Studio 的项目属性中添加此类文件。有一个名为设置的选项卡。为“选定的驱动器”创建一个新设置并将其设为用户设置（这样您就可以在没有管理员权限的情况下对其进行更新）。

要将新的驱动器号传达给您已经运行的应用程序，您有多种选择。

1.  一方面，您可以检查您的可执行文件是否已经在运行（就像您现在正在做的那样），在这种情况下更新设置文件并退出新实例。您已经运行的实例可以定期刷新设置以获取新值。
2.  当你的应用程序启动时，你可以在你的机器上打开一个命名管道来监听驱动器的变化。当第二个实例启动时，它可以检测到管道已经存在，将新驱动器写入管道并关闭。已经运行的应用程序可以获取此消息并更改其配置。
3.  您可以将 WindowMessage 发送到其他应用程序
4.  您可以托管一个简单的 WCF 服务来接收通知
5.  您可以将新驱动器号写入存储在已知位置的文件中，并让其他实例使用 FileSystemWatcher 来检测对该文件的更改。
6.  正如我所说，可能性是无穷无尽的。

如果我是你，我会首先通过在应用程序中实现设置文件来确保该值在重新启动之间保持不变。然后研究我上面描述的选项，做一些实验，然后当你不知道如何使它工作时提出新的问题。

# iphone - plist 根据其值获取数据

> ID：14831771
> 
> 赞同：-1
> 
> 时间：2013-02-12T11:43:14.597
> 
> 标签：iphone, ios5, plist

我有一个如下的 plist，在这个 plist 中，我想获取所有记录在一个值上的记录。在这里，我想根据 MenuType 的值获取所有 menuCategory 名称。如果用户选择 MenuTyp 为 veg，我想获取所有 menuCatogory，其中 Menutype 为 veg。这是plis结构请帮忙？

```
<dict>
            <key>MenuType</key>
            <string>NonVeg</string>
            <key>MenuCategory</key>
            <string>MainCourse</string>
            <key>MenuName</key>
            <string>KababHandi</string>
            <key>MenuPrice</key>
            <string>200</string>
            <key>MenuContents</key>
            <string>Kabab, Meat Masala, Salt</string>
        </dict> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:51:41.243

```
NSString *plistFilePath = [[NSBundle mainBundle]pathForResource:@"YourPlistFileName" ofType:@"plist"];
NSDictionary *yourDict = [[NSDictionary alloc]initWithContentsOfFile:plistFilePath];

    NSlog(@"%@",[yourDict objctForKey:@"MenuType"]);
    NSlog(@"%@",[yourDict objctForKey:@"MenuCategory"]);
    NSlog(@"%@",[yourDict objctForKey:@"MenuName"]);
    NSlog(@"%@",[yourDict objctForKey:@"MenuPrice"]);
    NSlog(@"%@",[yourDict objctForKey:@"MenuContents"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:48:10.277

此代码将为您提供帮助。

```
NSString *fileName = [[NSBundle mainBundle]pathForResource:@"Data" ofType:@"plist"];

NSDictionary *dataDict = [[NSDictionary alloc]initWithContentsOfFile:fileName];

NSArray *catArray = [dataDict allKeys]; 
```

# nunit - NQunit.NUnit 入门指南

> ID：14831777
> 
> 赞同：1
> 
> 时间：2013-02-12T11:43:32.593
> 
> 标签：nunit, qunit

有人知道 NQUnit.NUnit 入门的好教程吗？

我已经通过 nuget 将它安装到我的测试项目中，并且不确定空白.js 和 async.js 文件的全部内容，我应该重命名这些文件以匹配我正在测试的文件还是只是将我的异步和同步测试添加到相应的文件。

塔！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:44:56.390

在以下链接中找到答案： [NQUnit：.NET / CI 中的 JavaScript 测试](http://robdmoore.id.au/blog/2011/03/13/nqunit-javascript-testing-within-net-ci/)

# c# - 处理 xml 解析中的特殊字符

> ID：14831785
> 
> 赞同：0
> 
> 时间：2013-02-12T11:44:12.510
> 
> 标签：c#, xml, xml-parsing, linq-to-xml

我在解析 XML 文件时遇到问题。实际上，XML 文件中的元素标记之一包含一个特殊字符，即 &

```
<organization>AT&T</organization> 
```

并用于解析我正在使用的这个 xml 文件-

```
 XDocument xmlDoc = XDocument.Parse(xml); 
```

当我的 xml 文件进行解析时，我得到以下异常-''是一个意外的标记。预期的标记是';'。第 43 行，第 15 位。

如何处理它，以便我可以拥有我的原始数据，即 AT&T，并且我也绕过了这个异常。任何链接或帮助都将被高度使用。

# javascript - 在另一台服务器上通过 XMLHttpRequest 发送文件

> ID：14831790
> 
> 赞同：0
> 
> 时间：2013-02-12T11:44:32.383
> 
> 标签：javascript, xmlhttprequest

我喜欢尝试通过 javascript XMLHttpRequest 发送带有附件的 POST 表单。

这是我的代码：

```
window.addEventListener('load', function() {
    var button = document.getElementById('start_file_upload_button');
    button.addEventListener('click', function()
        {
        document.getElementById("file_upload_button_button").style.display = "none";
        var mfs         = document.getElementsByName('MAX_FILE_SIZE')[0].value,
            to_up_files = document.getElementById('to_upload_files_field'),
            status      = document.getElementById('file_upload_status_text'),
            errorlog    = document.getElementById('file_upload_error_log'),
            progress    = document.getElementById('file_upload_progress_bar');
        for(var i = 0; i < document.getElementById('to_upload_files_field').files.length; ++i) {
            document.getElementById('remove_link_' + i).style.display = "none"; }
        for(var i = 0; i < <?php echo $__CONFIG['UPLOAD']['MAX_FILE_AT_ONCE']; ?>; ++i)
            {
            if(typeof(document.getElementById('to_upload_files_field').files[i]) == "undefined") break;
            var upload   = document.getElementById('to_upload_files_field').files[i],
                filename = upload.name,
                filesize = upload.size,
                mfs      = mfs; alert(filename);
            if(filesize > <?php echo $USER_DATA['UPLOAD_MAX_FILE_SIZE']; ?>)
                {
                var errorelem  = document.createElement('span');
                var errorbreak = document.createElement('br');
                errorelem.appendChild(document.createTextNode('Die Datei "' + filename + '" ist zu Groß'));
                errorelem.appendChild(errorbreak);
                errorlog.appendChild(errorelem);
                break;
                }
            if(<?php echo $USER_DATA['SPACE_MAX']; ?> < (filesize + <?php echo $USER_DATA['SPACE_USED']; ?>))
                {
                var errorelem  = document.createElement('span');
                var errorbreak = document.createElement('br');
                errorelem.appendChild(document.createTextNode('Die Datei "' + filename + '" past nicht mehr auf die Platte'));
                errorelem.appendChild(errorbreak);
                errorlog.appendChild(errorelem);
                break;
                }
            if(filesize > (<?php echo $USER_DATA['TRAFFIC_PER_DAY'] - $USER_DATA['TRAFFIC_USED']; ?>) && (<?php echo $USER_DATA['TRAFFIC_PER_DAY'] - $USER_DATA['TRAFFIC_USED']; ?>) != 0)
                { // SPERRE EINBAUEN DAS ES NUR GEPRÜFT WIRD WENN DIE TRAFFIC ÜBERWACHUNG AKTIVIERT IST
                var errorelem  = document.createElement('span');
                var errorbreak = document.createElement('br');
                errorelem.appendChild(document.createTextNode('Die Datei "' + filename + '" braucht mehr traffic als du hast'));
                errorelem.appendChild(errorbreak);
                errorlog.appendChild(errorelem);
                break;
                }
            status.innerHTML = "Lade " + filename + " hoch...";
            var request = new XMLHttpRequest();
            request.open('POST', 'http://www.domain.tld/user/upload/', true);
            request.setRequestHeader('Content-Type', 'multipart/form-data');
            request.upload.addEventListener('progress', function(evt)
                {
                var uploaded = Number((100 / evt.total) * evt.loaded).toFixed(2);
                progress.innerHTML = "Upload zu " + uploaded + "% fertig";
                if(uploaded = 100.00)
                    {
                    progress.innerHTML = "Datei wird verarbeitet... Bitte warten...";
                    }
                }, false);
            request.addEventListener('load', function(evt) {
                alert("lol2"); }, false);
            var data = new FormData();
            data.append('upload_key', '<?php echo $upload_key; ?>');
            data.append('MAX_FILE_SIZE', mfs);
            data.append('file', upload);
            request.send(data);
            request.onload = function()
                {
                if(this.status == 200)
                    {
                    alert("lol");
                    }
                else
                    {
                    alert("Some Upload Error");
                    }
                };
            }
        }, false);
    }, false); 
```

当我将脚本发送到“ [http://www.domain.tld/user/upload/](http://www.domain.tld/user/upload/) ”时，该脚本运行良好且没有问题，但我喜欢将其发送到“ [http://sub.somain.com/store/](http://sub.somain.com/store/) ” “这不起作用，为什么？

通过发送到“www.domain.tld”的控制台日志：

> [12:21:51.085] POST `http://www.domain.tld/user/upload/`[HTTP/1.1 200 OK 5ms]

通过发送到“sub.domain.tld”的控制台日志：

> [12:21:17.786] 选项`http://sub.domain.tld/store/`[HTTP/1.1 200 OK 7ms]

服务器运行相同的脚本，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:51:12.140

Javascript 不允许您在域之间发出请求，但是，如果服务器发送`Access-Control-Allow-Origin`带有白名单域名称的标头，则可以更改此行为。

## CORS

正如我所说，您可以使用特殊的响应标头来允许跨域请求。这种方法称为**CORS** - *Cross Origin 资源共享*。
它是这样使用的：

```
header("Access-Control-Allow-Origin: www.domain.tld"); 
```

不幸的是，这只是最近才引入的，并且浏览器支持很差。

### [CORS 浏览器支持](http://caniuse.com/#search=cors)

## JSONP

另一种触发跨域请求的方法是 JSONP。这只能应用于 GET 请求。因为你是发POST，我就不多介绍了。

## 框架

您可能已经忘记了使用 iframe 的可能性。当然，在这种情况下，您不会得到任何返回值，也无法监控上传过程。但是，如果您`alert()`在 iframe 中触发功能，您仍然可以通知用户有关成功的信息。此外，您可以从 iframe 重新加载页面：

```
window.top.location = "domain.com/script.php?upload=sucessfull"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:06:47.737

你违反了“同源政策”。您可以返回`Access-Control-Allow-Origin`标头，这将告诉浏览器允许请求，但是[浏览器支持不是 100%](http://enable-cors.org/client.html)。查看[您的 Web 服务器或编程语言的文档](http://enable-cors.org/server.html)。

如果您需要 100% 的浏览器支持，那么您最好上传到父域上的 /tmp，然后向子域发出 cURL 请求。

# sql - 尝试连接到 SQL 表时，MS Access 2007 中的查询错误

> ID：14831791
> 
> 赞同：0
> 
> 时间：2013-02-12T11:44:36.937
> 
> 标签：sql, ms-access

这是我的第一篇文章，希望我问的是正确的问题。

我正在尝试使用以下查询将数据从 SQL Server 链接表中提取到 ms access 2007 表中

```
SELECT PTNT.PTNT_SEQ_NBR, PTNT.INTERFERON_RECEIVED_FROM_OTHER_SOURCE
INTO tblGetNonCMKfills.PTNT_SEQ_NBR, tblGetNonCMKfills.InterferonReceivedFromOtherSource
FROM PTNT
GROUP BY PTNT.PTNT_SEQ_NBR; 
```

虽然当我尝试保存查询时，它给了我错误消息

“查询输入必须至少包含一个表或查询”

也许我在这里遗漏了一些明显的东西，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:49:36.863

在您的[`INTO`](http://msdn.microsoft.com/en-us/library/office/bb208934%28v=office.12%29.aspx)子句中，您只需要提供要创建的表的名称以将数据插入其中，而不是列名。

```
SELECT PTNT.PTNT_SEQ_NBR, PTNT.INTERFERON_RECEIVED_FROM_OTHER_SOURCE
INTO tblGetNonCMKfills
FROM PTNT
ORDER BY PTNT.PTNT_SEQ_NBR; 
```

此外，您不能`GROUP BY`在查询中使用子句，除非您在`SELECT`. 我假设您在这里真正想要的是一个`ORDER BY`子句。

# javascript - 如何自定义ckeditor工具栏按钮行为？

> ID：14831797
> 
> 赞同：3
> 
> 时间：2013-02-12T11:44:54.340
> 
> 标签：javascript, ckeditor, right-to-left

在ckeditor 4.0.1中，当“文本方向从左到右”工具栏按钮被按下时，我输入`hello`，生成的HTML源是：

```
<p dir="ltr">hello</p> 
```

我怎样才能改变这种行为，使生成的源看起来像：

```
<p dir="ltr" style="text-align: left;">hello</p> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:06:37.770

您可以使用 dataProcessor 执行此操作：

```
CKEDITOR.replace( 'editor1', {
    on: {
        instanceReady: function () {
            this.dataProcessor.htmlFilter.addRules( {
                elements: {
                    p: function( element ) {
                        if ( element.attributes.dir == 'ltr' )
                            element.attributes.style = 'text-align: left;';
                    }
                }
            });
        }
    }
} ); 
```

您也可以全局添加它：

```
CKEDITOR.on( 'instanceReady', function ( event ) {
    event.editor.dataProcessor.htmlFilter.addRules( {
        elements: {
            p: function( element ) {
                if ( element.attributes.dir == 'ltr' )
                    element.attributes.style = 'text-align: left;';
            }
        }
    });
} ); 
```

# windows-phone-7 - 如何计算两点之间的行驶距离？

> ID：14831801
> 
> 赞同：1
> 
> 时间：2013-02-12T11:45:20.423
> 
> 标签：windows-phone-7, gps, driving-distance

在我的应用程序中，我得到了现在使用的地方`latitude`的`longitude`坐标，`GeocodeService`我想获得这些地方之间的距离。

我已经尝试过`GetDistanceTo`获取两个位置坐标的距离的方法，但它给了我直接的距离。

如何计算两个位置之间的**行驶距离？**

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T04:10:32.637

要计算行驶距离，您必须使用 Bing Routes API（或 Google，但我假设您使用的是 Bing 地图）。

这里有一个使用 api 查找两个地方之间的行车路线的示例：http: [//msdn.microsoft.com/en-us/library/gg636957.aspx](http://msdn.microsoft.com/en-us/library/gg636957.aspx)

一般调用是： [http ://dev.virtualearth.net/REST/V1/Routes/Driving?o=xml&wp.0=location1&wp.1=location2&avoid=minimizeTolls&key=BingMapsKey](http://dev.virtualearth.net/REST/V1/Routes/Driving?o=xml&wp.0=location1&wp.1=location2&avoid=minimizeTolls&key=BingMapsKey)

您必须注册 Bing 地图 API 密钥，然后将 location1 和 location2 替换为您喜欢的位置。

距离应`travelDistance`在 json 或 xml 中返回

# python - 从列表中删除具有特定属性值的项目

> ID：14831805
> 
> 赞同：-1
> 
> 时间：2013-02-12T11:45:27.413
> 
> 标签：python, python-2.7

给定一个对象列表，其中每个对象都有一个名为 的属性`x`，我想从列表中删除其`x`属性包含值`v`的所有对象。

一种方法是使用列表理解：`[item for item in mylist if item.x != v]`，但由于我的列表很小（通常小于 10）。另一种方法是循环遍历列表并检查每个项目。

是否有第三种方式同样快甚至更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:49:30.580

使用列表理解语法创建一个新列表。我不认为你能做任何比这更快的事情。您的列表很小并不重要，那就更好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:55:29.360

您还可以使用**生成器**或`filter`函数。选择您认为最易读的内容；在这一点上效率并不重要（特别是如果你只处理几个元素）。

# android - 单击图像时，我想在 android 中获取 ListViewItem 名称

> ID：14831812
> 
> 赞同：0
> 
> 时间：2013-02-12T11:46:10.990
> 
> 标签：android, listview, onclick

当我单击 listView 项目上的编辑图像时。我把 onClickEvent 放在我的适配器上。我想通过我的主要活动获取该文本视图的位置或名称。

请给点建议好吗？

```
public View getView(final int position, View convertView, ViewGroup parent) {
        View v = convertView;
      if (v == null) {
          final Context context = getContext();
                LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.transferlistviewitem_layout, null);
      }

      TransferEntry item = transferList.get(position);
      if (item != null) {
                TextView name = (TextView) v.findViewById(R.id.transferName_textView);
                ImageView delete = (ImageView) v.findViewById(R.id.edit_icon);

                delete.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {                       
                        t.setText(transferList.get(position).getItemName());                                                 
                    }
              });*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:55:21.683

`TextView`是的，您可以从列表视图的`listItem`单击侦听器方法中获取文本。通过此代码：

```
 TextView name = (TextView) v.findViewById(R.id.textview_id); 
```

这里 v 是`OnItemClick`事件处理程序的视图。当您单击该项目时，您可以通过此 TextView 轻松获取文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T03:41:45.777

我已经知道答案了。

在我的适配器构造函数上，我有一个参数，它是我的 MainActivity 的实例，并将其设置为适配器中 MainActivity 的实例。:)

# c++ - 从 QLocalSocket 读取超过 2048 个字节

> ID：14831819
> 
> 赞同：1
> 
> 时间：2013-02-12T11:46:29.840
> 
> 标签：c++, sockets, qt5

我从 QLocalSocket 读取超过 2048 个字节时遇到问题。这是我的服务器端代码：

```
clientConnection->flush();  // <-- clientConnection is a QLocalSocket

QByteArray block;
QDataStream out(&block, QIODevice::WriteOnly);

out.setVersion(QDataStream::Qt_5_0);
out << (quint16)message.size() << message;  // <--- message is a QString

qint64 c = clientConnection->write(block);
clientConnection->waitForBytesWritten();
if(c == -1)
    qDebug() << "ERROR:" << clientConnection->errorString();

clientConnection->flush(); 
```

这就是我在客户端读取数据的方式：

```
QDataStream in(sock);  // <--- sock is a QLocalSocket
in.setVersion(QDataStream::Qt_5_0);

while(sock->bytesAvailable() < (int)sizeof(quint16)){
    sock->waitForReadyRead();
}
in >> bytes_to_read; // <--- quint16

while(sock->bytesAvailable() < (int)bytes_to_read){
    sock->waitForReadyRead();
}

in >> received_message; 
```

客户端代码连接到`readyRead`信号，并在第一次调用插槽后断开连接。

为什么我只能读取 2048 个字节？

==编辑==

回复后`peppe`我更新了我的代码。这是它现在的样子：

服务器端代码：

```
clientConnection->flush();

QByteArray block;
QDataStream out(&block, QIODevice::WriteOnly);

out.setVersion(QDataStream::Qt_5_0);

out << (quint16)0;
out << message;
out.device()->seek(0);
out << (quint16)(block.size() - sizeof(quint16));
qDebug() << "Bytes client should read" << (quint16)(block.size() - sizeof(quint16));

qint64 c = clientConnection->write(block);
clientConnection->waitForBytesWritten(); 
```

客户端代码：

```
QDataStream in(sock);
in.setVersion(QDataStream::Qt_5_0);

while(sock->bytesAvailable() < sizeof(quint16)){
    sock->waitForReadyRead();
}

quint16 btr;
in >> btr;

qDebug() << "Need to read" << btr << "and we have" << sock->bytesAvailable() << "in sock";
while(sock->bytesAvailable() < btr){
    sock->waitForReadyRead();
}

in >> received_message;

qDebug() << received_message; 
```

我仍然无法读取更多数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:33:16.010

```
out.setVersion(QDataStream::Qt_5_0);
out << (quint16)message.size() << message;  // <--- message is a QString 
```

这是错误的。“消息”的序列化长度将是 message.size() * 2 + 4 个字节，因为 QString 将自己的长度作为 quint32 前置，并且每个 QString 字符实际上是一个 UTF-16 代码单元，因此它需要 2 个字节。仅期望在阅读器中读取 message.size() 字节将导致 QDataStream 短读取，这是未定义的行为。

请在这些行之后检查“块”的大小——它将是 2 + 4 + 2 * message.size() 字节。所以你需要修正数学。您可以放心地假设它不会改变，因为 Qt 数据类型的序列化格式[是已知的并已记录在案](http://qt-project.org/doc/qt-5.0/qtcore/datastreamformat.html)。

不过，我确实认识到添加长度的“设计模式”。它可能来自 Qt 附带的财富网络示例。[显着的区别](http://code.woboq.org/qt5/qtbase/examples/network/fortuneserver/server.cpp.html#164)是该示例没有在 UTF-16 代码单元中添加字符串的长度（这是没有意义的，因为它不是序列化的方式）——它预先添加了*序列化*QString 的长度。看看它做了什么：

```
 out << (quint16)0;
    out << fortunes.at(qrand() % fortunes.size());
    out.device()->seek(0);
    out << (quint16)(block.size() - sizeof(quint16)); 
```

首先，它在输出中保留一些空间，方法是写一个`0`. 然后它序列化一个QString。然后它回溯并`0`用序列化 QString 的长度覆盖 ——此时，恰好是 block.size() 减去说明长度的前置整数（我们知道*quint16 的序列化长度*是`sizeof(quint16)`）

重复我自己，实际上有两个原因说明为什么*该示例以**这种方式*编码，并且它们在某种程度上是相关的：

1.  QDataStream 无法从短读取中恢复：当您使用反序列化对象时，它成功解码对象所需的所有数据都*必须可用*`operator>>`。因此，在确定收到所有数据之前，您不能使用它。这使我们：
2.  TCP 没有内置机制来分离“记录”中的数据。您不能只发送一些字节后跟一个“记录标记”，它告诉接收者他已收到与记录相关的所有数据。TCP 提供的是原始字节流。最终，您可以（半）关闭连接以向其他对等方发出传输结束的信号。

1+2 意味着您必须使用其他机制来了解（在接收方）您是否已经拥有所需的所有数据，或者您必须等待更多数据。例如，您可以引入带内标记`\r\n`（如 IRC 或 - 在一定程度上 - HTTP 做）。

财富示例中的解决方案是在“实际”数据（带有财富消息的序列化 QString）之前添加该数据的长度（以字节为单位）；然后它发送长度（作为 16 位整数），后跟数据本身。

接收端先读取长度；然后它读取了那么多字节，然后它知道它可以解码命运。*如果没有足够的可用数据*（无论是长度 - 即您收到少于 2 个字节 - 以及有效负载本身），客户端就什么也不做，等待更多。

注意：

*   **设计并不新鲜**：这是所有大多数协议所做的。在“标准”TCP/IP 堆栈中，TCP、IP、以太网等在其“标头”中都有一个字段，用于指定有效负载（或整个“记录”）的长度；
*   “长度”的传输使用以**特定字节顺序发送的 16 位无符号整数**：它不是 memcpy()d 进入缓冲区，而是使用 QDataStream 来存储它并读回它。尽管看起来微不足道，但这实际上*完成了您正在使用的协议的定义*。
*   如果 QDataStream 能够从短读取中恢复（通过抛出异常并将数据留在设备中），则您不需要发送有效负载的长度，因为 QDataStream**已经**发送了字符串的长度（作为32 位无符号 bigendian 整数）后跟 UTF-16 字符。

# java - 如何防止我的 JFrame 窗口成倍增加？

> ID：14831822
> 
> 赞同：1
> 
> 时间：2013-02-12T11:46:34.453
> 
> 标签：java, swing, user-interface, jframe, dispose

为了让每个人都理解我的问题，我创建了一个简单的 GUI 程序来显示我的问题。我先放代码供大家分析。然后，请观看下面的视频，看看我想问什么。请耐心等待，视频只有几秒钟，加载不需要时间。

菜单 JFrame：

```
 //This is a Menu JFrame Window
    import javax.swing.*;
    import java.awt.event.*;
    import java.awt.*;

    public class Menu extends JFrame implements GlobalVariables{

        public Menu(){
            clickMe.setBounds(75, 50, 100, 50);
            clickMe.addActionListener(new ActionListener(){
                @Override
                public void actionPerformed(ActionEvent e){
                    dispose();
                    SubMenu sm = new SubMenu();
                    sm.subMenuProperties();
                }
            });
            add(clickMe);

        }

        void menuProperties(){    
            setLayout(null);
            setSize(250,175);
            setVisible(true);        
            setResizable(false);
            setLocationRelativeTo(null);
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);   
        }

        public static void main(String[] args) {
            Menu m = new Menu();
            m.menuProperties();
        }
    } 
```

子菜单 JFrame：

```
 //This is a SubMenu JFrame Window
    import javax.swing.*;
    import java.awt.event.*;
    import java.awt.*;

    public class SubMenu extends JFrame implements GlobalVariables{

        public SubMenu(){
            clickMe2.setBounds(75, 50, 100, 50);
            clickMe2.addActionListener(new ActionListener(){
                @Override
                public void actionPerformed(ActionEvent e){
                    dispose();
                    Menu m = new Menu();
                    m.menuProperties();
                }
            });
            add(clickMe2);

        }

        void subMenuProperties(){    
            setLayout(null);
            setSize(250,175);
            setVisible(true);        
            setResizable(false);
            setLocationRelativeTo(null);
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);   
        }

        public static void main(String[] args) {
            SubMenu sm = new SubMenu();
            sm.subMenuProperties();
        }    
    } 
```

如果你想知道“GlobalVariables”的实现是什么，这里是：

```
 import javax.swing.*;

    public interface GlobalVariables{    
        //Menu Variable
        JButton clickMe = new JButton("SubMenu");
        //SubMenu Variable
        JButton clickMe2 = new JButton("Back");   
    } 
```

现在，这个视频将向您展示我在 JFrame 中的含义：

[http://www.youtube.com/watch?v=iCavg_1SqvY](http://www.youtube.com/watch?v=iCavg_1SqvY)

*如果您观看了视频，您会明白我所说的 JFrame 正在成倍增加的意思。我已经分析了好几天，但我无法确定我的错误。如果您能指出我的错误，我将不胜感激。我也对代码中的评论和调整持开放态度，我只是希望代码的结构不会被重新组织，因为正如我之前所说，我创建了这个简单的 GUI 只是为了向您展示我的问题，但是至少要告诉你，我有一个完整的程序等待在 GUI 制作中使用这种方法完成。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:36:50.057

Those two classes are both a subclass of JFrame which results in a new window.

The one named Menu contains a button "clickMe" which instantiates SubMenu that contains a button "clickMe2" that instantiates Menu. This creates a endless loop creating more instances of each class. I.e creating more frames.

In the class SubMenu, remove these lines:

```
Menu m = new Menu();
m.menuProperties(); 
```

To get started using swing, [Oracle](http://docs.oracle.com/javase/tutorial/uiswing/) has great tutorials.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:33:10.240

我发现了代码的问题。您需要在 actionPerformed 方法中删除 ActionListener。对于每个按钮单击，您的代码都会创建一个新的 ActionListener 对象，并与您的按钮相关联。随后的点击被这个重复的动作监听器执行，你最终会得到更多的 JFrame。

在 dispose() 行之后，将以下行添加到两个类的**actionPerformed(ActionEvent e)方法中。**这应该可以解决您的问题

```
Menu.java
clickMe.removeActionListener(this);
......
SubMenu.java
clickMe2.removeActionListener(this) 
```

;

# php - smarty中带有结束标签的自定义函数

> ID：14831823
> 
> 赞同：1
> 
> 时间：2013-02-12T11:46:42.427
> 
> 标签：php, smarty

我知道可以在 smarty 中编写自定义函数`{myunction x="1" y="2"}`。但我想知道是否有任何方法可以制作一个有结尾的函数`{myfunc}...{/myfunc}`并将其间的文本用作参数？

有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:49:52.327

是的。这些类型的功能称为[块](http://www.smarty.net/docs/en/plugins.block.functions.tpl)。

# c# - RE 在 if 语句中以双精度返回时间跨度

> ID：14831824
> 
> 赞同：0
> 
> 时间：2013-02-12T11:46:48.430
> 
> 标签：c#, timespan

我之前关于时间跨度的问题。我正在尝试做的事情。我正在尝试自动更新我的文本框，然后时间流逝。使用下面的代码可以正常工作：

```
public  void AutoSaveTimer()
{
   timer = new System.Timers.Timer ();
   timer.AutoReset= false ;
   timer.Elapsed += new System.Timers.ElapsedEventHandler (timer_Elapsed);
   timer .Interval = GetInterval();
   timer.Start ();
}

public  double GetInterval()
{      
   DateTime now = DateTime .Now;
   return ((60-now.Second )*1000-now.Millisecond );
}

public void timer_Elapsed ( object sender ,System .Timers .ElapsedEventArgs e)
{
   UpdateLogDatabase();

   timer .Interval =GetInterval ();
   timer .Start ();
}

private void AutoSaveTimerStop()
{
   timer = new System.Timers.Timer();
   timer.Stop();
} 
```

但是，如果我尝试在 if 语句中检查用户选项，则该方法没有返回 double 我收到错误：使用未分配的变量。

```
 public double GetInterval()
  {
      double d;
      DateTime now = new DateTime();

      if (cb5Min.Checked== true)
      {
          d= ((60 - now.Second) * 1000 - now.Millisecond);
      }
      else if (cb15Min.Checked)
      {
          d= ((900 - now.Second) * 1000 - now.Millisecond);
      }
      return d;
  } 
```

感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:49:37.540

> 我收到错误：使用未分配的变量。

尝试学习理解编译器错误。如果两个复选框都未选中，则返回 unassigned `d`。您最好`d`在声明它的位置进行初始化，例如`0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:49:36.800

> 我收到错误：使用未分配的变量。

您试图`d`从您的方法中返回您的变量，您已声明它但尚未初始化它，初始化是在 if 块中完成的，编译器无法确定是否会到达该部分代码。因此，如果您可以为 like 分配一些默认值，那就更好了`d`：

```
double d = 0; 
```

或者在您的代码中，您可以使用另一个 else 块来确保`d`在返回之前将其初始化为某个值。

# python - 将元组列表转换为列表列表

> ID：14831830
> 
> 赞同：51
> 
> 时间：2013-02-12T11:47:02.913
> 
> 标签：python

我编写了这个函数来将元组列表转换为列表列表。有没有更优雅/ Pythonic的方式来做到这一点？

```
def get_list_of_lists(list_of_tuples):
    list_of_lists = []                                                          
    for tuple in list_of_tuples:
        list_of_lists.append(list(tuple))

    return list_of_lists 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-02-12T11:48:25.277

您可以使用[列表理解](http://www.youtube.com/watch?v=pShL9DCSIUw)：

```
>>> list_of_tuples = [(1, 2), (4, 5)]
>>> list_of_lists = [list(elem) for elem in list_of_tuples]

>>> list_of_lists
[[1, 2], [4, 5]] 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-02-12T11:50:30.037

虽然列表理解是一个完全有效的答案，因为您只是在更改类型，但可能值得考虑替代方案，[即`map()`内置](http://docs.python.org/3.3/library/functions.html#map)：

```
>>> list_of_tuples = [(1, 2), (4, 5)]
>>> map(list, list_of_tuples)
[[1, 2], [4, 5]] 
```

`map()`内置函数只是将一个可调用对象应用于给定迭代的每个元素。这使它非常适合这项特定任务。一般来说，列表推导更具可读性和效率（就像`map()`你需要做任何复杂的事情`lambda`），但是你想简单地改变类型，`map()`可以非常清晰和快速。

请注意，我在这里使用的是 2.x，所以我们得到了一个列表。在 3.x 中，您将获得一个可迭代（惰性），如果您想要 3.x 中的列表，只需执行`list(map(...))`. 如果您对使用的可迭代对象感到满意，请在 2.x 中[`itertools.imap()`](http://docs.python.org/2/library/itertools.html#itertools.imap)提供惰性对象。`map()`

# ios - 无法将设备添加到库 - Xcode 中的配置文件

> ID：14831831
> 
> 赞同：5
> 
> 时间：2013-02-12T11:47:04.557
> 
> 标签：ios, iphone, xcode, ios-provisioning

每次我在管理器 - 设备 - 库 - 配置文件中按“新建”时，我都会收到一条消息：

“您的开发者账号需要更新，请访问会员中心[。http://developer.apple.com/membercenter](http://developer.apple.com/membercenter) ”

当我去那里时，一切都是最新的，我没有任何迹象表明我需要更新任何东西。我的所有个人信息都已更新，并且所有新的法律协议都已获得批准和阅读。我有管理员权限。

我使用 Xcode 4.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T11:44:58.260

刚刚检查过 -**您需要成为管理员或代理才能添加设备**，因此您需要让您的管理员/代理为您添加设备或要求成为您团队中的管理员/代理。如果出现进一步的问题，您应该从 Xcode 中删除所有已连接的帐户并重新读取您需要的帐户。

正如应用程序分发指南所述：

> 在团队成员可以在他或她的设备上启动应用程序之前，需要注册设备并将其添加到团队配置文件中。Xcode 会在需要时自动注册团队代理和管理设备，如“在设备上启动您的应用程序”（第 84 页）中所述。但是，团队代理或管理员必须代表他们注册团队成员设备。

这很有意义，因为在其他方面设备列表将无法管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T19:54:39.227

就我而言，错误消息的第一部分

> 您的开发者帐户需要更新。请访问会员中心。[http://developer.apple.com/membercenter](http://developer.apple.com/membercenter)

正确地指向了决议。那就是我将几个**Apple ID**添加到我的**Xcode->Prefrences->Accounts**中，它们不再有效。因此，删除或更新它们可以解决问题。

# asp.net-mvc - 通过实体框架获取表的最新记录

> ID：14831834
> 
> 赞同：1
> 
> 时间：2013-02-12T11:47:07.983
> 
> 标签：asp.net-mvc, entity-framework

我正在使用 EntityFramework 的代码优先功能，并且我创建了一个模型类，该字段具有自己的属性（我在这里没有提到它们！）：

```
public class Portrait
{
        private Guid _id;
        private string _aboutimage;
        private string _aboutMe;
        private string _mainMenu;
        private string _headerImage;
        private string _resume;
        private string _showpiece;
        private string _siteMenu;
        private string _adminMenu;
} 
```

对于此类的每个部分，我都有单独的 ViewModel，例如，我必须在管理部分`AboutViewModel`进行更新`About`并在网站的 about 页面中导航：

```
public class AboutViewModel
{
        public Guid Id { get; set; }
        public string AboutText { get; set; }
        public string Image { get; set; }
} 
```

现在，当我更新数据库中的`AboutViewModel`表`Portrait`时，将创建一条包含关于文本的记录（其他字段将为空）

并且为了更新该表的其他部分`Resume`或其他部分，它将生成另一条具有更新和插入字段的记录（现在在此记录中关于文本的内容将为空！）

现在我怎样才能让 about 字段在 UI 中显示它，因为我有几条记录！？我不想也不能通过 ID 获取这些字段，因为我总是希望他们的最新更新显示在网站上，我写的是这样的，我获取 about 文本的操作是这样的：

```
public ViewResult About()
{
            var about= _portraitRepository.GetContent();

            return View(about);
} 
```

是`GetContent()`这样的：

```
public Portrait GetContent()
{
            return _siteContext.Portraits.Find();
} 
```

但不起作用，我收到了这个错误：

> *传递的主键值的数量必须与实体上定义的主键值的数量相匹配。参数名称：keyValues*

我走错方向了吗？请问我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T18:31:05.020

另一种选择是获取Portrait 表的**Id**的最大值（**如果它是一个标识列**）。

操作将如下所示。

```
public ActionResult About()
{
    var about= _portraitRepository.GetLatest();
} 
```

存储库将如下所示。

```
public Portrait GetLatest()
{
    var latestId = _siteContext.Portraits.Max(p => p.Id);
    return _siteContext.Portraits.Find(latestId);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:37:13.703

You should retrieve the ID when you perform the insert. Then save that value to Session or something for later use in your About Action

The call to the repository to persom the insert will look like below.

```
Session["LatestPortraitId"] = _portraitRepository.AddPortrait(); 
```

The method in the Portrait repository used to insert a new Portrait should look like below.

```
public int AddPortrait(portrait)
{
    _siteContext.AddObject(portrait);
    _siteContext.SaveChanges();
    return portrait.Id;
} 
```

The About action will look like below.

```
public ActionResult About()
{
    var latestPortraitId = Int.Parse(Session["LatestPortraitId"]); 
    var about= _portraitRepository.GetContent(latestPortraitId);
} 
```

Inside the repository it should be as shown below.

```
public Portrait GetContent(int id)
{
    return _siteContext.Portraits.Find(id);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-23T13:57:00.230

按后代 ID 排序搜索，然后使用第一个属性

# extjs - 突出显示 extjs textarea 中的部分文本

> ID：14831836
> 
> 赞同：1
> 
> 时间：2013-02-12T11:47:21.710
> 
> 标签：extjs, textarea, extjs2

我需要突出显示文本区域中的部分文本。我已经看到它是用 jquery 完成的，但我不能使用 jquery，因为我正在开发的应用程序已经使用了 extjs（textarea 只是应用程序的一小部分）。这是 jquery 示例的链接：http: [//www.strangeplanet.fr/work/jquery-highlighttextarea/](http://www.strangeplanet.fr/work/jquery-highlighttextarea/)我正在使用 extjs 2.3.0

message 是 Extjs Textarea，我正在尝试突出显示文本。

```
var message = new Ext.form.TextArea({
        hideLabel: true,
        id: 'smshl',
        name       : 'smshl',
        emptyText: 'enter message here',
        anchor: '90%',
        allowBlank: false,
        style:'overflow:hidden;style:margin:15px;',
        height: 90,
        minLength: 1,
        minLengthText: 'You cannot send a blank text',
        maxLength: userObj.smsLength,
        maxLengthText: 'Sorry, Maximum length of message exceeded',
        preventScrollbars: true,
        enableKeyEvents: true,
        listeners:{
            keyup: function() {
                this.highlightTextarea({
                    words: ["first word","another word"]
                });
            }
        }
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:18:35.337

我终于想通了，要使我在问题中发布的代码起作用，我所要做的就是替换`this.highlightTextarea with jQuery('#'+this.getId()).highlightTextarea`

所以代码变成了：

```
var message = new Ext.form.TextArea({
        hideLabel: true,
        id: 'smshl',
        name       : 'smshl',
        emptyText: 'enter message here',
        anchor: '90%',
        allowBlank: false,
        style:'overflow:hidden;style:margin:15px;',
        height: 90,
        minLength: 1,
        minLengthText: 'You cannot send a blank text',
        maxLength: userObj.smsLength,
        maxLengthText: 'Sorry, Maximum length of message exceeded',
        preventScrollbars: true,
        enableKeyEvents: true,
        listeners:{
            keyup: function() {
                jQuery('#'+this.getId()).highlightTextarea.highlightTextarea({
                    words: ["first word","another word"]
                });
            }
        }
    }) 
```

# ios - Google Drive 作为视频托管/流媒体平台？

> ID：14831838
> 
> 赞同：5
> 
> 时间：2013-02-12T11:47:28.470
> 
> 标签：ios, google-drive-api

我正在开发一个 iOS 应用程序，它可以生成视频文件并有一个社交画廊供用户显示他们的剪辑。经过大量研究，我发现 Google Drive 非常适合我的需求，所以我做了一些测试，并成功地让应用程序将文件上传到 GDrive 和所有内容。

现在我需要在 MPMoviePlayerViewController 中流式传输上传的文件，因为我需要某种直接链接，对吗？在我最初的测试之后，我使用变量 WebContentLink 作为源 URL，它完美地工作，我对结果非常满意，但是现在它不再工作了，我不知道发生了什么，我认为我使用的方法不现实？我尝试了所有其他可能的链接，但它们似乎都不起作用。

有人可以就Google Drive是否真的支持它以及如何以可靠的方式存档它的最佳方式提供指导？

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T11:16:18.593

当我尝试下载 28 次（测试）相同的 24mb 文件时，我也遇到了同样的错误。

但是我意识到如果我要使用内容所有者 ID 下载，它确实允许在第 28 次之后下载

[https://docs.google.com/a/onwardsct.com/uc?id=0ByvXJAlpPqQPYWNqY0V3MGs0Ujg&export=download](https://docs.google.com/a/onwardsct.com/uc?id=0ByvXJAlpPqQPYWNqY0V3MGs0Ujg&export=download)

抱歉，您目前无法查看或下载此文件。

最近有太多用户查看或下载了此文件。请稍后再尝试访问该文件。如果您尝试访问的文件特别大或与多人共享，则最多可能需要 24 小时才能查看或下载该文件。如果 24 小时后您仍然无法访问文件，请联系您的域管理员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-02T06:13:05.237

是的，谷歌驱动器可用于托管和流式传输视频，只要你喜欢。它也可以用作 Web 项目的演示服务器。以下是[如何在 Google 驱动器上托管网站](http://crounji.wordpress.com/2014/01/18/how-to-host-a-website-on-google-drive/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T03:51:31.010

抱歉，本机流文件的体验目前并不理想。这是谷歌正在努力的事情。

不过，您这样做是正确的。webContentLink 应该使用用户的配额，这对于大多数情况来说应该足够了。如果你能给出一些具体的数字，我们可以看看。

嵌入链接是在移动设备上显示它的最佳方式，但正如您所说，它并非无处不在。

# c++ - C++ 多线程问题

> ID：14831842
> 
> 赞同：-5
> 
> 时间：2013-02-12T11:47:42.440
> 
> 标签：c++, multithreading, parallel-processing, ifstream, c++-standard-library

我有以下算法来处理文件：

```
//open ifstram to read each line

//open ofstream to output each line

while (getline(ifstream, line1)){

getline(ifstream, line2) ;
getline(ifstream, line3) ;  
getline(ifstream, line4) ;
//
getline(ifstream, line10) ;

for(int i = 1 ; i <= 10 ; i++)
// process line number i (some sort of character replacement, substring extraction)

output each line

} 
```

现在，为了让我的代码更快，我想执行多线程。但是，我不明白，如何使用多线程运行上述算法，因此我将获得更快和正确的输出。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:54:17.880

1.  多线程并不一定会导致更快的程序。
2.  这是否*可以*完成取决于您在那里进行什么样的处理。如果它是按字符串完成的并且不依赖于先前的结果，则可以在 C++11 中使用 std::future 。如果您不想使用 C++11，请指定您*想要*使用的内容。
3.  如果您正在尝试这样做，您不能从串行流中并行引导多条线路。原因应该很明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:52:50.283

如果我正确理解您的问题，您正在尝试从流中读取并以块的形式处理读取的材料。

在这个例子中有几个并行化的机会。

1.  如果您正在从文件中读取，操作系统可以在您处理第一个块时继续将文件的内容读入缓冲区。

2.  如果您正在读取的源不是真正的线性，您可以创建多个流和多个工作人员，每个工作人员都在自己的一组块上工作。

3.  在您无法控制数据源的情况下，下一个机会是拥有一个 I/O 线程，将读取的块放入某种队列中，该队列驱动任意数量的工作人员。这类似于 #2，但拆分发生在您的流程中。这可能很有帮助，例如，如果您需要保留块之间的顺序，在这种情况下，单个输出工作人员将再次将块收集到队列中，并在它们到达时对其进行排序和输出。

其中哪一个实际上适用于您的情况只能由您确定。此外，根据 I/O 与所需处理和线程开销的比率，解决方案 #3 可能是

*   有害（与低 I/O 和低处理成本相比，高线程开销）
*   仅对单个 worker 有用（线程开销低且处理成本低于 I/O；在这种情况下，单个 worker 将在读取下一个块之前完成处理）
*   受限于平台中的内核数量（线程开销和 I/O 成本低，但处理能力高；在这种情况下，额外的工作人员只会争夺有限的资源，如缓存，这会导致不必要的低效率）

# java - 循环遍历 JSP 中的图像列表并调用 servlet 以在表格中显示每个图像，但最终输出显示相同的图像

> ID：14831843
> 
> 赞同：0
> 
> 时间：2013-02-12T11:47:45.890
> 
> 标签：java, jsp, servlets

我正在执行一项任务，我必须提供一个用户登录名，之后他将被定向到一个页面，他可以在该页面上上传图像，并且他以前的所有 + 新图像都将显示在下面的表格中。所以我的应用程序的结构是这样的......

（为了清楚起见，修剪了大部分代码）

允许上传和显示图像的 JSP 文件

```
<p>Please select an image file to upload(Max file size 1 MB)</p>

<%
    Integer userId = 0;
    userId = (Integer) session.getAttribute("userId");
%>
<%
    String errorMessage = (String) request.getAttribute("error");
    if (errorMessage != null) {
        out.print("<h4> " + errorMessage + "</h4>");
    }
%>
<form action="imageupload" enctype="multipart/form-data" method="post">
    <br /> <input type="file" name="uploader" id="uploader" /> <br /> <br />
    <input type="submit" />&nbsp;&nbsp;&nbsp; <input type="button"
        value="clear" onClick="clear()" />

</form>
<br />
<h4>Uploaded Images</h4>
<br />
<table width="80%">
    <tr>
        <th>S No.</th>
        <th>Name</th>
        <th>size</th>
        <th>Preview</th>
        <th>Actions</th>
    </tr>
    <%
        UserImagesDAOImplementation userImages = new UserImagesDAOImplementation();

        List<Image> images = (List<Image>) userImages.getUserImages(userId);

        for (Image image : images) {
    %>
    <tr>
        <td><%=image.getSn()%></td>
        <td><%=image.getImageName()%></td>
        <td><%=image.getSize()%></td>
        <td><% session.setAttribute("image",image.getImage() ); %><img src="toimage" height="100px" width="100px" /></td>
        <td><img src="img/edit.png" />&nbsp;&nbsp;<img src="img/url.png" /></td>
    </tr>
    <%
        }
    %>
</table>
<br />
Total space used: <%= (userImages.getSizeUsage(userId)/1024) %> KB / 10 MB 
```

返回图像的“toimage”servlet

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    HttpSession session = request.getSession();
    Byte[] image = (Byte[]) session.getAttribute("image");
    int len = image.length;
    byte[] imageData = new byte[len];

    for(int i=0; i < len; i++) {
        imageData[i] = image[i];
    }

    response.setContentType("image/jpg");
    response.getOutputStream().write(imageData);
    response.getOutputStream().flush();
    response.getOutputStream().close();

} 
```

我的问题是它在所有表格行中显示列表中的最后一个图像，并且在上传其他图像后，它会在每一行中显示该新图像。

我对我的网站设计不是很有信心，但这是我第一次使用 JSP。我决定在 JSP 中获取图像列表，因为稍后我将不得不对其执行更多操作。我猜问题出在设置会话变量或最终调用的 src servlet 中。不管是什么，有人能解释一下这个设计中典型的事件流程吗？

编辑：在“toimage”servlet 中放置一个打印语句证明它只被调用一次。那么如何让 JSP 循环每次都调用图像 src 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:14:59.250

您使用单个会话属性来存储每个图像。因此，在循环结束时，此会话属性包含最后一个。

您根本不应该使用会话。相反，您应该将 ID 或名称或任何标识图像的内容作为 URL 参数传递：

```
<img src="toimage?imageId=<%= image.getId() %>" height="100px" width="100px" /> 
```

servlet 现在应该使用这个参数来判断它必须加载哪个图像并将其发送到浏览器。

另外，学习 JSTL 和 EL。不应使用小脚本。

# cocos2d-iphone - cocos2d 2.0 自定义绘制导致场景渲染不完整

> ID：14831844
> 
> 赞同：0
> 
> 时间：2013-02-12T11:47:51.113
> 
> 标签：cocos2d-iphone

我有一个奇怪的问题，尽管进行了大量的谷歌搜索和阅读，但我还没有找到解决方案。

我有一个使用动态生成背景的场景。背景代码基于本[教程](http://www.raywenderlich.com/3913/how-to-create-a-game-like-tiny-wings-part-2)和我发现的其他代码，例如 Haqus Tiny-Wings github。

无论如何，我的代码已经简化了山的生成，它都包含在一个名为 StripedTerrain 的 CCNode 类中。一切正常（现在！），但是当转到另一个使用相同布局和相同背景精灵的场景时，它不会完全渲染。见[截图](http://www.webpit.com/wp-content/uploads/cocos2dsceneproblem.png)。图像 A 是第一次使用我的代码运行。图像 B 在对同一场景类的新场景的 replaceScene 调用之后。然后，在弹出矩阵之前，我对绘制代码进行了这个小改动：

```
ccDrawColor4B(255, 255, 255, 255);
ccDrawLine(ccp(0.0,0.0),ccp(0.0,0.0)); 
```

然后它工作正常（图像C和D）

这是最奇怪的事情，我无法弄清楚出了什么问题。

我将发布绘图调用代码，但其余的细节不用你说了：

```
 /**
 * Previus to the draw method we have already done the following:
 * Randomly selected, or have been given two colors to paint the stripes onto our texture
 * Generated a texture to overlay on to our hill vertice geometry
 * Generated the top of the hill peaks and valleys
 * Generated the hill verticies that will fill in the surface of the hills
 * with the texture applied
 */
- (void) draw {

CC_NODE_DRAW_SETUP();
// this statement fixed the screwed up jagged line rendering
// since we are only using position and texcoord vertexes, we have to use this shader
kmGLPushMatrix();
CHECK_GL_ERROR_DEBUG();
ccGLBlendFunc( CC_BLEND_SRC, CC_BLEND_DST ); //TB 25-08-12: Allows change of blend function
ccGLBindTexture2D(self.stripes.texture.name);

//TB 25-08-12: Assign the vertices array to the 'position' attribute
glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, 0, _hillVertices);

//TB 25-08-12: Assign the texCoords array to the 'TexCoords' attribute
glVertexAttribPointer(kCCVertexAttrib_TexCoords, 2, GL_FLOAT, GL_FALSE, 0, _hillTexCoords);
glEnableVertexAttribArray(kCCVertexAttrib_Position);
glEnableVertexAttribArray(kCCVertexAttrib_TexCoords);
//TB 25-08-12: Draw the above arrays
glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)_nHillVertices);
CHECK_GL_ERROR_DEBUG();

//Debug Drawing (remove comments to enable)
if(0) {
    for(int i = MAX(_fromKeyPointI, 1); i <= _toKeyPointI; ++i) {
     ccDrawColor4B(255, 0, 0, 255);
     ccDrawLine(_hillKeyPoints[i-1], _hillKeyPoints[i]);
     }
    for(int i =0;i<_nHillVertices;i+=3) {
        ccDrawColor4B(255, 0, 0, 255);
        ccDrawLine(_hillVertices[i+1], _hillVertices[i+2]);
    }
}
// have to do this to force it to work the next scene load
ccDrawColor4B(255, 255, 255, 255);
ccDrawLine(ccp(0.0,0.0),ccp(0.0,0.0));
kmGLPopMatrix();
CC_INCREMENT_GL_DRAWS(1);

} 
```

上面有什么明显的错误吗？

我用另一种方法设置了着色器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:58:22.247

检查前一个场景及其子场景是否运行他们的 dealloc 方法。如果没有，并且一个或多个泄漏，可能会发生最奇怪的事情。

在不调用超级清理的情况下覆盖清理也是如此。

# c# - 如何在 NHibernate 查询中使用 Max 和 Group By？

> ID：14831846
> 
> 赞同：1
> 
> 时间：2013-02-12T11:47:57.247
> 
> 标签：c#, .net, linq, nhibernate

我将如何使用 NHibernate 执行以下查询？

```
SELECT ClientId, MAX(Id)
FROM Items
GROUP BY ClientId; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:36:21.563

设法解决它，最终比我想象的要简单：

```
 var result = from item in session.Linq<Item>()
                         group item by item.ClientId
                         into itemGroups
                         select new
                             {
                                 id = itemGroups.Key,
                                 max = itemGroups.Max(er => er.Id)
                             }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:52:38.643

有关 NHibernate 的三个查询 API，请参阅 NHibernate 参考的第 14、15 和 16 章。

您还可以通过 NHibernate 使用 LINQ 查询。这可能是最简单的选择。使用`Query<MyType>()`扩展方法`ISession`获取`IQueryable`.

# android - 删除自定义 ListView 中的行

> ID：14831851
> 
> 赞同：0
> 
> 时间：2013-02-12T11:48:07.913
> 
> 标签：android, android-listview

我有一个列表视图，它有一个文本视图和一个图像按钮（删除）。当我单击图像按钮时，该行被删除并且列表视图被更新。

一切工作正常，但问题是当列表视图中有不止一行时，删除一行后，我无法删除另一行，因为位置值不合适。

说清楚，例如：列表视图中有 3 行。

*   我单击要删除的第一行（位置值为 0），它被删除并且列表视图被更新。

所以现在有两行，

*   我再次单击第一行，但删除失败。（因为 listview 没有更新位置值，实际上现在它的位置值应该是 0，而是显示 1，有时显示 2）

这是我的代码，

**CustomListView.class**

```
public View getView(final int position, View convertView, ViewGroup parent) {
    holder = null;
    DataFields rowItems = (DataFields) getItem(position);
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

    if (convertView == null) {
        convertView = inflater.inflate(R.layout.home_field_row, null);
        holder = new ViewHolder();
        holder.dataFields = items.get(position);
        holder.mName = (TextView) convertView
                .findViewById(R.id.hmFieldName);
        holder.mDeleteImage = (ImageView) convertView
                .findViewById(R.id.hmFieldDeleteImage);
        holder.mDeleteImage.setTag(position);

        holder.mDeleteImage
                .setOnClickListener(new ImageView.OnClickListener() {

                    @Override
                    public void onClick(final View v) {
                        Log.d("POSITION****", String.valueOf(position));
                        final Integer index = (Integer) v.getTag();

                        holder.dataFields = items.get(position);
                        value = holder.dataFields.getId();

                        int status = dbHandler
                                .deleteField(holder.dataFields);

                        if (status != 0) {
                            items.remove(index.intValue());
                            notifyDataSetChanged(); //ListView is getting updated but not the position values of rows
                        } else {
                            Toast.makeText(getContext(),
                                    "Failed to delete !",
                                    Toast.LENGTH_SHORT).show();

                        }
                    }
                });

        convertView.setTag(holder);
    }

    else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.mName.setText(rowItems.getName());

    return convertView;
} 
```

非常感谢任何形式的帮助。谢谢 ！

**已编辑**

正如你们所说，我做了以下更改，但位置值仍然没有更新......

```
holder.dataFields = items.get(position);
DataFields obj = items.get(position);
value = holder.dataFields.getId();

int status = dbHandler.deleteField(holder.dataFields);
if (status != 0) {
    items.remove(index.intValue());
    HomeActivity.mAdapter.remove(obj); //I also tried items.remove(obj);
    HomeActivity.mAdapter.notifyDataSetChanged();
} else {
    Toast.makeText(getContext(), "Failed to delete !", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:50:35.997

完成删除部分后，您应该使用通知您的适配器`notifyDataSetChanged()`

**更新**

我认为发生这种情况是因为您使用视图的标签作为索引，这样您的索引就不会改变。`getView`您应该使用标记为的方法提供的索引`final int position`

**编辑**

您可以尝试以下代码而不是您发布为 EDIT 的代码吗

```
int status = dbHandler.deleteField(items.get(position));
if (status != 0) {
    items.remove(position);
    notifyDataSetChanged();
} else {
    Toast.makeText(getContext(), "Failed to delete !", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:58:56.220

Try resetting the adapter after the delete:

```
list.remove(adapter.getSelectedIndex());
reloadList();

    /**
 * Fixes bug where the list doesn't update. Call instead of just calling 
 * notifyDataSetChanged. 
 */
private void reloadList(){
    adapter.notifyDataSetChanged();
    getListView().setAdapter(adapter);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:52:14.753

您已经创建`DataFields`了保存记录的类。因此，从该数组列表或哈希图中删除任何对象（无论您使用过什么），然后在从列表中删除任何对象后编写下面的代码。

```
adapter.notifyDataSetChanged(); 
```

在这里，适配器是您的自定义适配器。

**编辑**

```
public class Contants extends Application
{
    public int xyz;
} 
```

如果你喜欢使用这个`xyz`对象，你只需要写，

```
((Contants) getApplicationContext()).xyz; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T11:53:58.203

尝试这个：

```
//Using the position we can
Object obj = adapter.getItem(position);
adapter.remove(obj);
//Notify the adapter
adapter.notifyDataSetChanged(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T11:54:47.127

我认为这可能是因为您正在删除一个项目，但它仍在 ViewHolder 中，因此您应该在删除后更新您的 ViewHolder DataFields。

# c# - 将数据库中的一些数据显示到datagridview

> ID：14831854
> 
> 赞同：0
> 
> 时间：2013-02-12T11:48:16.963
> 
> 标签：c#, ms-access

```
command.CommandText = "SELECT * FROM Books WHERE Author='"+Convert.ToString(comboBox1.SelectedItem)+"'";

reader = command.ExecuteReader(); 
```

前任。我`"John"`从组合框中选择。datagridview 将显示来自数据库的数据，其`Author="John"`. 例如，同一作者（John）有 4 本书，如何将这些数据显示到 datagridview？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:52:02.480

something like

```
command.CommandText = "SELECT * FROM Books WHERE Author='"+Convert.ToString(comboBox1.SelectedItem)+"'";

var reader = command.ExecuteReader();

var list = new List<string>();
while(reader.Read())
{
   list.Add(reader["Author"].ToString())
}

datagridview.DataSource = list; 
```

there are many (many!) things wrong with doing it this way - but it wil properly get you on your way.

First of all - try to avoid having your GUI so "close" to the db code. Secondly, as mentionsed, this code is vulnerable to SQL injection.

My suggestion:

```
public List<string> GetAuthors(string aurtherName)
{

  using(var con = CreateConnection()//somehow )
  {   
    var command = con.CreateCommand();

    string sql = "SELECT * FROM Books WHERE Author='@value'";
     command.Parameters.AddWithValue("@value", aurtherName);
     command.CommandText = sql ;

    var list = new List<string>();
    while(reader.Read())
    {
       list.Add(reader["Author"].ToString())
    }

     return list;
  }
} 
```

that way you can call it like this:

```
datagridview.DataSource = GetAuthors(comboBox1.SelectedItem); 
```

# unix - Cygwin 'make' 命令

> ID：14831858
> 
> 赞同：0
> 
> 时间：2013-02-12T11:48:23.130
> 
> 标签：unix, makefile, cygwin

我正在尝试使用 Unix shell编译[一个库。](http://liblo.sourceforge.net/)我在 Windows 上运行 Cygwin。库状态的安装说明：

> 1.  `cd' to the directory containing the package's source code and type` ./configure' 为您的系统配置软件包。如果您使用`csh' on an old version of System V, you might need to type` sh ./configure' 来阻止`csh' from trying to execute` configure' 本身。
>     
>     
>     
>     运行“配置”需要一段时间。在运行时，它会打印一些消息，告诉它正在检查哪些功能。
>     
>     
> 2.  输入“make”编译包。
>     
>     
> 
> <...更多说明如下...>

因此，我已将包含库源的文件夹放入我的 Cygwin 目录中，*cd*到该文件夹​​，然后运行*​​./configure*。这一切似乎都可以正常工作，但“make”命令会产生以下输出：

```
$ make
make  all-recursive
make[1]: Entering directory `/liblo-0.26'
Making all in src
make[2]: Entering directory `/liblo-0.26/src'
Making all in .
make[3]: Entering directory `/liblo-0.26/src'
/bin/bash ../libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..    -
Wall -I.. -g -O2 -MT liblo_la-address.lo -MD -MP -MF .deps/liblo_la-address.Tpo
-c -o liblo_la-address.lo `test -f 'address.c' || echo './'`address.c
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I.. -Wall -I.. -g -O2 -MT liblo_la-a
ddress.lo -MD -MP -MF .deps/liblo_la-address.Tpo -c address.c  -DDLL_EXPORT -DPI
C -o .libs/liblo_la-address.o
In file included from lo_types_internal.h:33,
                 from address.c:37:
../lo/lo_osc_types.h:32:20: stdint.h: No such file or directory
In file included from address.c:37:
lo_types_internal.h:89: field `addr' has incomplete type
lo_types_internal.h:98: confused by earlier errors, bailing out
make[3]: *** [liblo_la-address.lo] Error 1
make[3]: Leaving directory `/liblo-0.26/src'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/liblo-0.26/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/liblo-0.26'
make: *** [all] Error 2 
```

我究竟做错了什么？很高兴提供更多信息 - 但我是 Unix shell 的新手（你可能会说......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:58:00.130

`stdint.h`错误是找不到头文件。

`stdint.h`是一个新的标头，在 C99（C 标准的 1999 年发布的版本）中标准化。可能是您的 UNIX 没有它。但是 cygwin 应该是最近的并且拥有它。

您的 cygwin 安装是否安装了 C 库头文件？

# xpages - Xpage Domino 书签 nsf

> ID：14831859
> 
> 赞同：0
> 
> 时间：2013-02-12T11:48:25.053
> 
> 标签：xpages

我正在尝试创建用于在客户端中创建主页的 domino bookmarks.nsf 的 XPage 版本。用户希望能够通过链接直接查看他们最常用的数据库。

有人知道多米诺骨牌收藏夹是如何工作的以及如何从中使用数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:05:26.730

只有desktop.dsk 神秘地击败了bookmark.nsf :-) Open 按钮中的所有条目都存储为Outline 设计元素。大纲在 LotusScript/Java/SSJS API 中是读/写的，因此您可以在 SSJS 库中获取它们。我不知道收藏夹何时/如何更新

# c# - 通过 WebApi 调用从页面下载 excel 文件

> ID：14831860
> 
> 赞同：20
> 
> 时间：2013-02-12T11:48:25.683
> 
> 标签：c#, asp.net, excel, asp.net-web-api, xls

我正在尝试发送一个 9MB 的`.xls`文件作为来自 web api 控制器方法的响应。用户将单击页面上的按钮，这将通过浏览器触发下载。

这是我到目前为止所得到的，但它不起作用，但它也不会引发任何异常。

```
[AcceptVerbs("GET")]
public HttpResponseMessage ExportXls()
{
    try
    {
        byte[] excelData = m_toolsService.ExportToExcelFile();

        HttpResponseMessage result = new HttpResponseMessage(HttpStatusCode.OK);
        var stream = new MemoryStream(excelData);
        result.Content = new StreamContent(stream);
        result.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
        result.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment")
        {
            FileName = "Data.xls"
        };
        return result;
    }
    catch (Exception ex)
    {
        m_logger.ErrorException("Exception exporting as excel file: ", ex);
        return Request.CreateResponse(HttpStatusCode.InternalServerError);
    }
} 
```

这是通过界面中的按钮单击进行的咖啡脚本/javascript jquery ajax 调用。

```
$.ajax(
    url: route
    dataType: 'json'
    type: 'GET'
    success: successCallback
    error: errorCallback 
    ) 
```

现在我考虑一下，也许 dataType 是错误的，不应该是 json ......

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-10-25T14:20:27.243

也可用作 HTTP GET 方法，但不要使用 $ajax，而是使用 window.open(url);

C#代码：

```
 [HttpGet]
    [Route("report/{scheduleId:int}")]
    public HttpResponseMessage DownloadReport(int scheduleId)
    {
        var reportStream = GenerateExcelReport(scheduleId);
        var result = Request.CreateResponse(HttpStatusCode.OK);

        result.Content = new StreamContent(reportStream);
        result.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
        result.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment")
        {
            FileName = "Schedule Report.xlsx"
        };

        return result;
    } 
```

JS代码：

```
downloadScheduleReport: function (scheduleId) {
    var url = baseUrl + 'api/Tracker/report/' + scheduleId;
    window.open(url);
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-12T13:37:02.547

我必须做一些小改动才能让它工作

第一：将方法改为post

```
[AcceptVerbs("POST")] 
```

第二：从使用 jQuery ajax 库更改为使用隐藏表单，这是我的服务函数，用于执行隐藏表单并提交它。

```
exportExcel: (successCallback) =>
    if $('#hidden-excel-form').length < 1
        $('<form>').attr(
            method: 'POST',
            id: 'hidden-excel-form',
            action: 'api/tools/exportXls'
        ).appendTo('body');

    $('#hidden-excel-form').bind("submit", successCallback)
    $('#hidden-excel-form').submit() 
```

希望有更好的方法来做到这一点，但目前它正在工作并且很好地下载了 excel 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-02T07:16:58.627

我遇到了同样的问题。问题通过以下方式解决：

`window.open(url)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-07T15:57:30.833

它将创建的excel文件存储在系统的一个文件夹中，一旦发送到浏览器，它将被删除。

```
 //path to store Excel file temporarily
     string tempPathExcelFile = AppDomain.CurrentDomain.BaseDirectory + DateTime.Now.Hour + DateTime.Now.Minute +
                          DateTime.Now.Second + DateTime.Now.Millisecond +
                          "_temp";
        try
        {
            //Get Excel using  Microsoft.Office.Interop.Excel;
            Excel.Workbook workbook = ExportDataSetToExcel();
            workbook.SaveAs(tempPathExcelFile, workbook.FileFormat);
            tempPathExcelFile = workbook.FullName;
            workbook.Close();
            byte[] fileBook = File.ReadAllBytes(tempPathExcelFile);
            MemoryStream stream = new MemoryStream();
            string excelBase64String = Convert.ToBase64String(fileBook);
            StreamWriter excelWriter = new StreamWriter(stream);
            excelWriter.Write(excelBase64String);
            excelWriter.Flush();
            stream.Position = 0;
            HttpResponseMessage httpResponseMessage = new HttpResponseMessage();
            httpResponseMessage.Content = new StreamContent(stream);
            httpResponseMessage.Content.Headers.Add("x-filename", "ExcelReport.xlsx");
            httpResponseMessage.Content.Headers.ContentType = new MediaTypeHeaderValue("application/vnd.ms-excel");
            httpResponseMessage.Content.Headers.ContentDisposition =
                new ContentDispositionHeaderValue("attachment");
            httpResponseMessage.Content.Headers.ContentDisposition.FileName = "ExcelReport.xlsx";
            httpResponseMessage.StatusCode = HttpStatusCode.OK;
            return httpResponseMessage;

        }
        catch (Exception ex)
        {
            _logger.ErrorException(errorMessage, ex);
            return ReturnError(ErrorType.Error, errorMessage);
        }
        finally
        {
            if (File.Exists(tempPathExcelFile))
            {
                File.Delete(tempPathExcelFile);
            }
        }

      //Javascript Code
      $.ajax({
                    url:  "/api/exportReport",
                    type: 'GET',
                    headers: {
                        Accept: "application/vnd.ms-excel; base64",
                    },
                    success: function (data) {   
                        var uri = 'data:application/vnd.ms-excel;base64,' + data;
                        var link = document.createElement("a");    
                        link.href = uri;
                        link.style = "visibility:hidden";
                        link.download = "ExcelReport.xlsx";
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);                        
                    },
                    error: function () {
                        console.log('error Occured while Downloading CSV file.');
                    },
                }); 
    In the end create an empty anchor tag at the end of your html file. <a></a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-22T06:00:28.370

对于.NetCore，您可以简单地将类型返回为文件。

```
public IActionResult ExportAsExcel()
        {
            try
            {
                using (var ms = new MemoryStream())
                {
                    var data = ExportData(); // Note: This Should be DataTable
                    data.ConvertAsStream(ms);
                    ms.Position = 0;
                    return File(ms.ToArray(), "application/octet-stream", "ExcelReport.xlsx");
                }

            }
            catch (Exception e)
            {
                _logger.LogError(e.Message, e);
                throw;
            }
        } 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2013-02-12T13:40:04.753

当您单击特定按钮时，这将返回一个文件

```
 public FileResult ExportXls(){
     //the byte stream is the file you want to return
     return File(bytes, "application/msexcel")
     } 
```

# ruby-on-rails-3 - 谷歌浏览器强制使用 HTTPS

> ID：14831863
> 
> 赞同：7
> 
> 时间：2013-02-12T11:48:28.797
> 
> 标签：ruby-on-rails-3, http, google-chrome, https, openstreetmap

我正在开发一个使用 SSL 连接的 Rails 应用程序。我目前正在使用第三方资源，即 js 和 css 文件来实现地图 (OpenStreetMap)。我已经尝试将这些资源（js 和 css）导入我的应用程序，但 javascript 代码尝试通过 HTTP 访问外部 WMS。

问题是当应用程序处于 HTTPS 时，Google Chrome 会阻止从 HTTP 访问第三方资源。

所以我在应用程序的某些页面上禁用了 SSL，并尝试按照我想要的方式强制使用 HTTP 或 HTTPS。

关注此博客：[http](http://www.simonecarletti.com/blog/2011/05/configuring-rails-3-https-ssl/) ://www.simonecarletti.com/blog/2011/05/configuring-rails-3-https-ssl/并且它有效。

但是，当我使用 Google Chrome 将 HTTP 协议强制到将使用这些资源的页面时，它会强制 HTTPS 连接导致无限循环。

如果我清除 Chrome 缓存（已经使用 HTTPS 访问同一页面）以便通过 HTTP 访问它，它就可以工作。但是，如果我访问了 HTTPS 页面并尝试通过 HTTP 访问，Chrome 会强制 HTTPS 连接导致无限循环。

问题是：我可以在请求中设置什么东西让 Chrome 接受连接吗？

问候

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T03:40:03.950

我一直在对此进行一些研究，结果发现打开`force_ssl = true`Rails 3 会导致应用程序发送一个 HSTS 标头。这里有一些关于它的信息：[如何禁用 HTTP 严格传输安全性？](https://stackoverflow.com/questions/10629397/how-to-disable-http-strict-transport-security-apache)

本质上，HSTS 标头告诉 Chrome（和 Firefox）在特定时间内仅通过 HTTPS 访问您的站点。

所以......我现在给你的答案是，你可以通过进入`about:net-internals`Chrome 浏览器并删除 HSTS 状态来清除你自己的 HSTS 设置。

我认为这里的答案可以帮助您：[Rails：激活 SSL 支持让 Chrome 感到困惑](https://stackoverflow.com/questions/10444780/rails-activating-ssl-support-gets-chrome-confused)

# css - 使用 inline-block 换行？

> ID：14831866
> 
> 赞同：85
> 
> 时间：2013-02-12T11:48:36.370
> 
> 标签：css

我想删除`<br />`'s并通过CSS做断线。如果我将跨度更改为`display:block`宽度将变为 100%，并且我需要宽度正好是文本的长度，就像现在一样。有什么建议么？

```
<div class="fullscreen">
    <p class="text">
        <span class="medium">We</span> <br />
        <span class="large">build</span> <br />
        <span class="medium">the</span> <br />
        <span class="large">Internet</span>
    </p>
</div>

.text span {
   background:rgba(165, 220, 79, 0.8);
   display:inline-block;
   padding:7px 10px;
   color:white;
}
.fullscreen .large {  font-size:80px } 
```

[小提琴](http://jsfiddle.net/Z6aRh/)

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2013-02-12T11:56:19.727

删除所有`br`标签并使用`display: table`.

```
.text span {
   background: rgba(165, 220, 79, 0.8);
   display: table;
   padding: 7px 10px;
   color: white;
}
.fullscreen .large { font-size: 80px } 
```

说明：表格默认包裹其内容的宽度，不设置宽度，但仍然是块级元素。您可以通过为其他块级元素设置宽度来获得相同的行为：

```
<span style="display:block;border:1px solid red;width:100px;">Like a default table.</span>
<code>null</code> 
```

请注意，该`<code>`元素不会`<span>`像通常那样内联。使用开发工具中的计算样式检查它。您会在`<span>`. 无论如何，这与表格相同，但表格具有始终形成其内容宽度的额外好处。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-02-12T11:52:53.927

使用`float: left;`和`clear: left;`

[http://jsfiddle.net/rtM6J/](http://jsfiddle.net/rtM6J/)

```
.text span {
   background: rgba(165, 220, 79, 0.8);
   float: left;
   clear: left;
   padding: 7px 10px;
   color: #fff;
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-11-28T08:21:41.643

将物品放入`display: inline`并使用`:after`：

```
.text span { display: inline }
.break-after:after { content: '\A'; white-space:pre; } 
```

并将该类添加到您的 html 跨度中：

```
<span class="medium break-after">We</span> 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-11-06T00:02:49.733

我认为截至 2018 年最好的方法是使用 flexbox。

```
.text {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}
/* same as original below */
.text span {
   background:rgba(165, 220, 79, 0.8);
   display:inline-block;
   padding:7px 10px;
   color:white;
}
.fullscreen .large {  font-size:80px }
```

```
<div class="fullscreen">
    <p class="text">
        <span class="medium">We</span> 
        <span class="large">build</span> 
        <span class="medium">the</span> 
        <span class="large">Internet</span>
    </p>
</div>
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2018-01-26T10:25:15.707

这是另一种解决方案（仅列出相关声明）：

```
.text span {
   display:inline-block;
   margin-right:100%;
} 
```

当边距以百分比表示时，该百分比取自父节点的宽度，因此 100% 表示与父节点一样宽，这导致下一个元素被“推”到新行。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-12T11:54:39.660

我认为浮动在这里可能最适合您，如果您不希望元素占据整行，则将其向左浮动应该可以。

```
.text span {
       background:rgba(165, 220, 79, 0.8);
       float: left;
       clear: left;
       padding:7px 10px;
       color:white;
    } 
```

注意：`<br/>`在使用此课程之前删除 's。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-11-28T19:38:41.250

如果您可以不使用`<p>`s（仅使用`<div>`s 和`<span>`s），此解决方案甚至可以让您将`inline-block`s 居中或右对齐，如果您愿意（或者按照您最初要求的方式将它们保持在左侧）。虽然该解决方案可能仍适用于`<p>`s，但我认为生成的 HTML 代码不会完全*正确*，但这取决于您。

诀窍是`<span>`用相应的`<div>`. `<div>`通过这种方式，我们利用了由's （默认）引起的换行符`display: block`，同时仍将可视绿色框保持在文本的限制范围内（使用您的`display: inline-block`声明）。

```
.text span {
   background:rgba(165, 220, 79, 0.8);
   display:inline-block;
   padding:7px 10px;
   color:white;
}
.large {  font-size:80px }
```

```
<div class="text">
  <div><span class="medium">We</span></div>
  <div><span class="large">build</span></div>
  <div><span class="medium">the</span></div>
  <div><span class="large">Internet</span></div>
</div>
```

# database-design - 如何为艺术家实体存储三张图片和一首歌曲？

> ID：14831868
> 
> 赞同：0
> 
> 时间：2013-02-12T11:48:43.267
> 
> 标签：database-design

我有一个**艺术家**实体。一位艺术家最多可以有 3 张图片（和最少一张）和一首带有标题的歌曲。

所以我的**第一个想法**是将图片存储在一个单独的表格**Picture**中，id，artist_id，path。
并将歌曲存储在带有 id、artist_id、path、title的**Song实体中**

但**另一个想法**是将这些媒体存储在具有 id、artiste_id、picture1、picture2、picture3、path_song、title_song的**媒体表中。**

最好的方法是什么？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:10:34.633

**嗯，对当前**需求建模的最精确方法是将 3 张图片和 1 首歌曲直接作为字段存储在 Artist 表中。在这种情况下，几乎不需要垂直拆分 Artist 并制作单独的 Media 表。

* * *

唯一的问题是：你**确定**你永远不需要超过 3 张图片和超过一首歌曲吗？如果没有，请执行第一种方法，但我会按以下方式对其进行修改：

![在此处输入图像描述](../Images/3a067f3cc6511cf71de8e6de8c0edd6a.png)

```
CHECK (PICTURE_NO BETWEEN 1 AND 3)
CHECK (SONG_NO = 1) 
```

[识别关系](https://stackoverflow.com/a/10658665/533120)和 CHECK的组合确保了期望的*最大值*得到遵守。如果您需要增长，只需​​修改（或完全删除）CHECK。

不幸的是，在这个模型中不能保证*最小值（至少存在一张图片和歌曲），至少在不使用延迟循环引用的情况下不能保证，即使你的 DBMS 支持它们，这也可能比它们的价值更麻烦。*

* * *

当然，在现实生活中，一件艺术品可能涉及多个艺术家。您确定关系是 1:N 而不是 N:N？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:52:10.360

从数据库规范化的角度来看，您的第一个想法是更好的想法。

# c# - 创建一个可视化器 Unity3d

> ID：14831870
> 
> 赞同：2
> 
> 时间：2013-02-12T11:48:55.280
> 
> 标签：c#, audio, unity3d, visualizer

我一直试图在网上找到一些关于如何制作自己的响应声音的可视化器的东西，但到目前为止我只能在 mac 上找到教程。

我还找到了一些预制的可视化工具，但不想花 50 美元购买 [资产](http://u3d.as/content/altered-reality-entertainment/visualizer-studio/2dq)

我想知道有人可能会告诉我如何基本编写粒子系统来响应声音交互，例如某些频率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:01:38.563

我在这里找到了一个不错的教程：[http](http://www.41post.com/4776/programming/unity-making-a-simple-audio-visualization) ://www.41post.com/4776/programming/unity-making-a-simple-audio-visualization 。它能够从声音中获得不同的频率并相应地做一些事情。您可以尝试使用它更改粒子的变量。

~~我发现的另一件事是一个分析声音频谱的项目。你可以[在这里下载](http://dl.dropbox.com/u/7155207/AudioReactWIN.zip)。~~

~~我还发现了这个根据声音生成关卡的[教程。](http://unity3dtutorial.com/unity-3d-tutorials/audio-based-procedural-levelgeneration-manipulation-in-unity-3/)~~

**这些链接不再有效**

尝试一下，让我们知道您对它们的看法以及它们是否有帮助！祝你好运。

# ios - 带有图像资源的 iOS 静态库

> ID：14831874
> 
> 赞同：1
> 
> 时间：2013-02-12T11:49:01.860
> 
> 标签：ios, objective-c, xcode, resources, static-libraries

我有一个静态库，我需要一些图形资源作为图像。在我的课堂上，我会以这种方式添加图像：

```
[UIImage imageNamed:@"myImage.png"] 
```

但它不起作用......我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:02:20.013

拥有该捆绑包后，您可以像这样访问那里的资源：

```
NSString *bundlePath = [[NSBundle mainBundle] pathForResource:@"YourBundle" ofType:@"bundle"];
NSString *imagePath = [[NSBundle bundleWithPath:bundlePath] pathForResource:@"yourImage" ofType:@"png"];
UIImage *image= [[UIImage alloc] initWithContentsOfFile:imagePath]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:51:57.630

除了带有静态库的代码之外，您无法提供任何其他内容。这是因为`.a`文件是目标文件的简单存档，在 Mac/iOS 下增加了支持多 CPU 架构的能力。

您唯一的选择是创建一个框架，它可以提供代码以及其他资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T11:52:53.363

在 Xcode 中，如果您链​​接静态库，则该库中的代码将直接包含在您的可执行文件中。没有文件被复制到应用程序包中，因此无法复制图像。

如果您的静态库中有图像文件，您可以通过在 Xcode 中将复制文件构建阶段添加到您的目标来简单地将其复制到您的应用程序包中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T21:10:42.790

我找到了解决方案..

我探索了 bundles 目录（已编译），我注意到我的图像（`.png`）他们有所有的 iestensione`.tiff`

为避免这种情况，我将`HIDPI_COMBINE_IMAGES`bundle buid 设置中的密钥设置为`NO`

*..所以我可以按照e1985*的建议恢复我的照片

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-20T09:53:12.017

创建一个框架目标，而不是静态库。确保框架的构建阶段中存在“复制捆绑资源”。在那里添加您的资源文件。

然后从外部项目中找到框架包中的文件，我只是这样做：

```
NSArray<NSBundle *> * bundles = [NSBundle allFrameworks];
NSString * filePath;
for (int i = 0; i < bundles.count; i++) {

     filePath = [[bundles objectAtIndex:i] pathForResource:@"picture" ofType:@"png"];
     if (filePath != nil) break; // found
} 
```*

# mysql - 多重连接中子句的正确位置

> ID：14831876
> 
> 赞同：1
> 
> 时间：2013-02-12T11:49:09.380
> 
> 标签：mysql

1.  以下两个查询之间是否有区别：

    ```
    select ...
    join table1 
    on condition1
    join table2
    on condition2 
    ```

    和

    ```
    select ...
    join table1
    join table2
    on condition1
    and condition2 
    ```

2.  它取决于我的表结构吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:50:37.687

第二个错了，就不行了。第一个也错了一定

```
 join table1 on condition1
   join table2 on condition2 

//-- no need to use `FROM` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:00:52.837

我相信您正在寻找的是：

```
select *
from   table1
       join tableA on condition1,
       table2
       join tableB on condition2 
```

# git - Git - 包含来自其他存储库的文件

> ID：14831877
> 
> 赞同：26
> 
> 时间：2013-02-12T11:49:11.970
> 
> 标签：git, workflow, organization

使用 Git，我想在我的项目中包含一些常见的 JS/CSS 库和/或实用程序方法*（即来自另一个 repo 的特定文件）*，我希望它们始终是最新的。我真的不想要整个远程存储库。如果我可以处理远程文件的“本地副本”并将更改推回，那么我将获得奖励。

一个有点平行的例子：在 ASP.NET 中，我会通过引用*（“远程”）*其他库的`.dll`文件（没有“复制本地”）来做到这一点，这样每当我重新编译外部库时，我的项目就已经指向最新的版本。

## 示例场景

我的项目是... *MyProject*，我只想要来自外部存储库*ExternalLibrary*和*External2*的几个文件。我不想在其他地方克隆每个存储库并将文件复制粘贴到我的存储库中。如果我对 进行改进`MyProject/scripts/common1.js`，我想将其推回*ExternalLibrary*。

1.  **我的项目/**
    *   索引.html
    *   **脚本/**
        *   我的代码.js
        *   其他插件.js
        *   *common1.js* <-- 来自 ExternalLibrary
        *   *plugin2.js* <-- 来自 ExternalLibrary
    *   **款式/**
        *   我的样式.css
        *   *common.css* <-- 来自 External2
2.  **外部图书馆/**
    *   common1.js
    *   插件1.js
    *   插件2.js
    *   一堆杂七杂八的...
3.  **外部2/**
    *   common.css
    *   一堆杂七杂八的...

**相关参考：**

*   [Git：如何使用多个存储库？](https://stackoverflow.com/questions/3124024/git-how-to-work-with-multiple-repositories)
*   [如何从 git 存储库中仅签出一个文件？](https://stackoverflow.com/questions/2466735/checkout-only-one-file-from-git)
*   [从其他开发人员本地 GIT 获取文件并添加到主存储库](https://stackoverflow.com/questions/11411140/get-file-from-other-developer-local-git-and-add-to-main-repository)
*   [是否可以创建一个 git 存储库，其中分支是从其他存储库克隆的？](https://stackoverflow.com/questions/4310078/can-a-git-repository-be-created-where-branches-are-clones-from-other-repositorie)
*   [http://www.kernel.org/pub/software/scm/git/docs/gitworkflows.html](http://www.kernel.org/pub/software/scm/git/docs/gitworkflows.html)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-03-04T17:40:27.603

Git 不支持在远程项目中选择文件。您可以使用子树挑选出您想要的文件，然后找出某种策略将其重新放入，但这通常会很复杂，特别是如果您突然决定想要比最初选择的文件多几个文件。

我通常最终做的是使用`symlinks`. 这可以通过将项目添加为项目中的子模块，然后将文件符号链接到正确的位置来完成。

你的例子会是这样的：

```
$ git clone <url> myproject
$ cd myproject
$ git submodule add <url> external_library
$ git submodule add <url> external2
$ cd scripts
$ ln -s ../external_library/common1.js
$ ln -s ../external_library/plugin2.js
$ cd ../styles
$ ln -s ../external2/common.css 
```

要让符号链接在 Windows 中工作：

*   如果您是管理员组的成员，则必须关闭[用户访问控制 (UAC)](http://windows.microsoft.com/en-us/windows/turn-user-account-control-on-off#1TC=windows-7)，然后重新启动计算机。
*   如果您不是管理员，则需要获得[SeCreateSymbolicLinkPrivilege 权限](https://stackoverflow.com/questions/6722589/using-windows-mklink-for-linking-2-files)

然后在您进行任何更改之前，我会创建一个新分支：

```
$ cd external_library
$ git checkout -b myproject
# make changes back in ../myproject
$ git commit <files> # in external_library 
```

然后，您可以将您的分支推送到 github 或其他地方，并向作者提交拉取请求，以便回馈您的更改。

您可以像这样保持同步：

```
$ cd external_library
$ git checkout master
$ git pull
$ git checkout myproject
$ git merge master 
```

您还需要在子模块更改时更新父项目（例如`git commit external_library`）。任何使用您的项目的人都需要执行`git clone --recursive <url_to_myproject>`.

注意：您可以在不为您的项目使用单独的分支的情况下实现大部分目标。使用对你最有意义的东西。

# java - Android在后台调用Activity

> ID：14831881
> 
> 赞同：1
> 
> 时间：2013-02-12T11:49:20.137
> 
> 标签：java, android, android-activity, background, phone-call

我目前正在尝试在后台拨打电话。因此我在我的主要活动中称之为：

```
Intent callIntent = new Intent(Intent.ACTION_CALL);
callIntent.setData(Uri.parse("tel:123456789"));
startActivity(callIntent); 
```

我还写了一个 Outgoing Call Receiver 来改变活动：

```
Intent myIntent = new Intent(context, DisplayCalcActivity.class);
myIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(myIntent); 
```

现在的问题是，呼叫屏幕位于前台。如果我手动从呼叫屏幕切换到我的应用程序，则活动已按我的意愿更改，但是如何在前台启动活动，以便根本不显示呼叫屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:26:21.650

得到解决方案！

我使用另一个接收器来收听“android.intent.action.PHONE_STATE”。拨出呼叫激活接收器，接收器启动其他活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:12:19.453

Android SDK 不允许在“前台”进行调用，也许您可​​以访问私有成员，但不建议这样做。拨打电话的唯一方法是通过拨号器应用程序。

# c# - LinQ 查询不支持 LinQ 查询和两阶段查询

> ID：14831883
> 
> 赞同：0
> 
> 时间：2013-02-12T11:49:25.473
> 
> 标签：c#, linq, sharepoint, sharepoint-2010

我想从评估表中获取 moduleName 的不同值。ModuleName 是评估列表中的查找列。ModuleName 从 ModuleList 链接。请告诉我如何从评估列表中获得不同的模块名称计数？

```
protected void drpCoursesName_SelectedIndexChanged(object sender, EventArgs e)
{
    using (SiteEntitiesDataContext siteEntitiesDataContext = new SiteEntitiesDataContext(SPContext.Current.Site.Url))
    {
        EntityList<AssessmentItem> listItems = siteEntitiesDataContext.GetList<AssessmentItem>("Assessment");
        var distinctModuleCount = from module1 in listItems
                                  group module1 by new { module1.ModuleName }
                                  into grp
                                  select new
                                  {
                                      count1=grp.Count(),
                                  };
        int modulecount=distinctModuleCount.Count();

        foreach(var item in distinctModuleCount)
        {
            Label lbl1 = new Label();
            lbl1.Text = modulecount.ToString();
            PlaceHolderAssessment.Controls.Add(lbl1);
        }//end of for loop
    }//end of Data Context
}//end of method 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:23:48.497

准确解释您的目标有点困难，但我希望以下内容有所帮助。

给定一个定义为的类：

```
public class AssessmentItem
{
    public string ModuleName { get; set; }
} 
```

以下代码初始化和查询这些类的集合：

```
var items = new List<AssessmentItem>
    {
        new AssessmentItem { ModuleName = "Test 1" },
        new AssessmentItem { ModuleName = "Test 1" },
        new AssessmentItem { ModuleName = "Test 2" },
        new AssessmentItem { ModuleName = "Test 2" },
        new AssessmentItem { ModuleName = "Test 2" }
    };

var grouped = items.GroupBy(x => x.ModuleName);
Debug.WriteLine("Distinct modules {0}", grouped.Count());
foreach (var group in grouped)
{
    Debug.WriteLine("{0} has {1} entries", group.Key, group.Count());
} 
```

您将收到以下输出：

```
Distinct modules 2
Test 1 has 2 entries
Test 2 has 3 entries 
```

# web-config - dotnetopenauth 提供程序 WebConfig 错误

> ID：14831895
> 
> 赞同：1
> 
> 时间：2013-02-12T11:49:55.410
> 
> 标签：web-config, dotnetopenauth

我需要使用 DNOA 创建提供程序。我已经从 DNOA 站点下载了库并尝试加载 oAuthServiceProvider 示例。我无法加载它，因为它正在寻找

\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets"

这是 Visual Studio 2010 的一部分，但我在 2008 年。尽管将版本更改为 v9.0，但它仍在寻找 v10.0。没关系。

我将项目作为网站打开并尝试运行它。但现在得到错误“错误 1 ​​无法识别的配置部分 uri。”

关于这里发生了什么的任何想法？下面是网络配置

```
<?xml version="1.0"?> 
```

```
<!-- The uri section is necessary to turn on .NET 3.5 support for IDN (international domain names),
     which is necessary for OpenID urls with unicode characters in the domain/host name. 
     It is also required to put the Uri class into RFC 3986 escaping mode, which OpenID and OAuth require. -->
<uri>
    <idn enabled="All"/>
    <iriParsing enabled="true"/>
</uri>

<system.net>
    <defaultProxy enabled="true" />
    <settings>
        <!-- This setting causes .NET to check certificate revocation lists (CRL) 
             before trusting HTTPS certificates.  But this setting tends to not 
             be allowed in shared hosting environments. -->
        <!--<servicePointManager checkCertificateRevocationList="true"/>-->
    </settings>
</system.net>

<!-- this is an optional configuration section where aspects of dotnetopenauth can be customized -->
<dotNetOpenAuth>
    <!-- Allow DotNetOpenAuth to publish usage statistics to library authors to improve the library. -->
    <reporting enabled="true" />
    <messaging>
        <untrustedWebRequest>
            <whitelistHosts>
                <add name="localhost"/>
            </whitelistHosts>
        </untrustedWebRequest>
    </messaging>
</dotNetOpenAuth>

<appSettings/>
<connectionStrings> 
```

```
<system.web>
    <!-- 
        Set compilation debug="true" to insert debugging 
        symbols into the compiled page. Because this 
        affects performance, set this value to true only 
        during development.
    -->
    <compilation debug="true" targetFramework="4.0">
        <assemblies>
            <remove assembly="DotNetOpenAuth.Contracts"/>
            <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        </assemblies>
    </compilation>
    <authentication mode="Forms">
        <forms name="oauthSP" />
    </authentication>
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/>
</system.web>
<!-- 
    The system.webServer section is required for running ASP.NET AJAX under Internet
    Information Services 7.0\.  It is not necessary for previous version of IIS.
-->
<log4net>
    <appender name="TracePageAppender" type="OAuthServiceProvider.Code.TracePageAppender, OAuthServiceProvider">
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date (GMT%date{%z}) [%thread] %-5level %logger - %message%newline"/>
        </layout>
    </appender>
    <!-- Setup the root category, add the appenders and set the default level -->
    <root>
        <level value="INFO"/>
        <!--<appender-ref ref="RollingFileAppender" />-->
        <appender-ref ref="TracePageAppender"/>
    </root>
    <!-- Specify the level for some specific categories -->
    <logger name="DotNetOpenAuth">
        <level value="ALL"/>
    </logger>
</log4net>
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name="DataApiBehavior">
                <serviceMetadata httpGetEnabled="true"/>
                <serviceDebug includeExceptionDetailInFaults="true"/>
                <serviceAuthorization serviceAuthorizationManagerType="OAuthServiceProvider.Code.OAuthAuthorizationManager, OAuthServiceProvider" principalPermissionMode="Custom"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <services>
        <service behaviorConfiguration="DataApiBehavior" name="OAuthServiceProvider.DataApi">
            <endpoint address="" binding="wsHttpBinding" contract="OAuthServiceProvider.Code.IDataApi">
                <identity>
                    <dns value="localhost"/>
                </identity>
            </endpoint>
            <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
        </service>
    </services>
</system.serviceModel>
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

# java - 来自文件路径的 Java JTree 目录结构

> ID：14831901
> 
> 赞同：3
> 
> 时间：2013-02-12T11:50:12.807
> 
> 标签：java, swing, directory, jtree, filepath

我一直在努力解决这个问题，所以也许你们中的一些人可以帮助我。我有一个包含完整路径的文件列表（这些只是文件在另一台机器上的字符串），例如：

```
C:\a\b\c\file1.txt
C:\a\b\c\file2.txt
C:\a\d\file3.txt
C:\e\file4.txt 
```

我想创建一个 Jtree 来显示这样的目录结构：

```
C:
  a
   b
    c
     file1.txt
     file2.txt
   d
    file3.tct
  e
   file4.txt 
```

我一直在分割分隔符上的字符串，所以我最终得到了一个数组列表，例如：

```
"C:","a","b","c","file1.txt"
"C:","a","b","c","file2.txt"
"C:","a","d","file3.txt"
"C:","e","file4.txt" 
```

现在我想一次为它们添加一个索引，但如果该值已经存在于该级别，则跳到下一个索引。即它会添加第一个数组，然后在第二个数组上它会在树的第 0 级上已经存在一个“C：”所以移动到树的第 1 级和数组的索引 1。我遇到的问题是我不确定如何以这种方式导航树。

有什么建议和/或替代实施吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T16:31:41.317

让我们`File`做解析和维护路径的工作。既然要在a中显示文件`JTree`，不妨创建一个对应的`TreeModel`如，[这里](https://codereview.stackexchange.com/a/4447/6692)`FileTreeModel`引用。因为它实现了 ，所以它可以“被设置为's 模型，然后你就会有一个普通的旧标准。” 您可以使用任何挂载文件系统中的任何作为根，例如：`TreeModel``JTree``JTree``File`

```
TreeModel model = new FileTreeModel(new File(System.getProperty("user.dir")));
JTree tree = new JTree(model); 
```

![图片](../Images/1f3cb1d12ce51946b19f7fcad746a75e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T06:47:58.023

我不确定 FileTreeModel 是否是最好的方法——它会扫描整个目录。从您写的内容来看，我猜您只想显示列表中的路径。
您可以使用此处描述的 TreePathsTreeModel 来实现它：[如何在 jTree 中显示 Windows 注册表？](https://stackoverflow.com/questions/5822853/how-i-show-windows-registry-in-jtree/15812543#15812543)
您只需要将文件路径从字符串转换为 TreePath 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:56:55.130

首先，对字符串进行排序（在拆分之前）。

如何处理第一行是显而易见的，我不会对此发表评论。在第二行中，搜索已构建的树并检查节点是否已存在。找到一个不存在的之后，请按照第一行中的过程进行操作。

# java - 在单独的文件中将行动态添加到 TableLayout

> ID：14831906
> 
> 赞同：0
> 
> 时间：2013-02-12T11:50:25.643
> 
> 标签：java, android, layout, tablerow

我有这样的东西：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">

            <TextView
                android:id="@+id/chooseBirthDateText"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="25dp"
                style="@style/mediumText"
                android:gravity="center_horizontal"
                android:text="@string/choose_birth_date" />

        </TableRow>
    </TableLayout>
</ScrollView> 
```

我想添加更多行，但仅在一段时间后（比如说 10 秒）。我想先让这些行不可见，然后再让它们出现。但是这样我的scrollView不能按我的意愿工作（即使下面没有任何东西我也可以向下滚动 - 因为行是不可见的）

所以我想在第二个文件中添加我想要添加的行，在中间时间加载它们并在它们必须出现的那一刻添加它们在 tableRow1 之后。不幸的是，我不知道该怎么做（我说的是连接 2 个文件，而不是在 java 中创建第二个文件）：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:01:35.347

隐藏视图有两种模式：

*   `INVISIBLE`：这个视图是不可见的，但它仍然占用空间用于布局。
*   `GONE`：此视图是不可见的，并且它不占用任何空间用于布局目的。

[http://developer.android.com/reference/android/view/View.html#setVisibility(int)](http://developer.android.com/reference/android/view/View.html#setVisibility(int))

我想`GONE`会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:07:36.307

你应该这样尝试。让我知道它是否有用？

```
 for(int i = 0; i < _attributeList.size();i++){

        TableRow newRow = new TableRow(getApplicationContext());
        newRow.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT, TableRow.LayoutParams.WRAP_CONTENT));

        newCheckBox = new CheckBox(getApplicationContext());

                TextView feeTypeText = new TextView(getApplicationContext());
                feeTypeText.setText(jsonObj.getString("feeType"));
                feeTypeText.setTextColor(Color.BLACK);
                feeTypeText.setTextSize(16f);
                feeTypeText.setTypeface(tf);

                TextView dueAmountText = new TextView(getApplicationContext());
                dueAmountText.setText(jsonObj.getString("dueAmount"));
                dueAmountText.setTextColor(Color.BLACK);
                dueAmountText.setTextSize(16f);
                dueAmountText.setTypeface(tf);

                TextView dueDateText = new TextView(getApplicationContext());
                dueDateText.setText(jsonObj.getString("dueDate"));
                dueDateText.setTextColor(Color.BLACK);
                dueDateText.setTextSize(16f);
                dueDateText.setTypeface(tf);

                newRow.addView(newCheckBox,(new LayoutParams(0,LayoutParams.WRAP_CONTENT,0.8f)));
                newRow.addView(feeTypeText,(new LayoutParams(0,LayoutParams.WRAP_CONTENT,0.8f)));
                newRow.addView(dueAmountText,(new LayoutParams(0,LayoutParams.WRAP_CONTENT,1.0f)));
                newRow.addView(dueDateText,(new LayoutParams(0,LayoutParams.WRAP_CONTENT,1.0f))); 
```

属性表.addView(newRow); }

# ruby - 如何在 World 的模块中获取实例变量？

> ID：14831907
> 
> 赞同：0
> 
> 时间：2013-02-12T11:50:25.880
> 
> 标签：ruby, cucumber

我有：

```
module A
  H = { c: @user }

  def b
    H.fetch(:c).should_not be_nil
  end
end
World(A) 
```

`@user`在 Cucumber 步骤中定义。当我调用它时，我收到一个错误，因为@user 为零。

注意：如果我将代码更改为`@user.should_not be_nil`，我不会得到异常。

如何让 Cucumber 实例变量在 World 的模块中可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:25:53.377

这行得通吗？

```
module A
  H = { c: :@user }

  def b
    send(H.fetch(:c)).should_not be_nil
  end
end
World(A) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:26:40.630

这是我在 Cucumber 邮件列表中收到的 Matt Wynne 的回复：

> 这段代码没有意义
> 
> ```
>  H = { c: @user } 
> ```
> 
> 此行将在定义模块时运行。您要使用的 @user 实例变量尚不存在 - 它只会在运行时存在。

# c - 如何在c中拆分数组？

> ID：14831912
> 
> 赞同：-1
> 
> 时间：2013-02-12T11:50:36.493
> 
> 标签：c, controller, aes

我需要一个逻辑来实现我的目标。我的缓冲区数组大小为 38400。这个数组数据可以由控制器填充。在这里我必须获得一个AES算法。我必须从缓冲区读取 16 个字节的数据，然后加密，直到缓冲区结束。如何将数组溢出到 16 个字节并加密？. 我使用了以下逻辑，但我现在无法理解？

```
 unsigned char ptext[16] = "Attack at dawn!";
    unsigned char ctext[16];
    unsigned char decptext[16];
    unsigned char buffer[120*160*2];

    for (int count = 0; count < 120*160*2; count ++)
     buffer[count] = count + 1;

    for (i = 0; i < 120*160*2; i ++)
{

    ptext[i]= buffer[i];

    if(i%15 == 0)
    {
    aes_encrypt(ctx, ptext, ctext);
    for(k = 0; k<=i; k++)
            {
                ptext[k]='\0';
            }
    }
}

 void aes_encrypt(aes_ctx_t *ctx, unsigned char input[16], unsigned char output[16])
 {
    int i;

// copy input to state
for(i = 0; i < 16; i++)
    ctx->state[i & 0x03][i >> 2] = input[i];

aes_addroundkey(ctx, 0);

for(i = 1; i < ctx->rounds; i++) {
    aes_subbytes(ctx);
    aes_shiftrows(ctx);
    aes_mixcolumns(ctx);
    aes_addroundkey(ctx, i);
}

aes_subbytes(ctx);
aes_shiftrows(ctx);
aes_addroundkey(ctx, ctx->rounds);

// copy state to output
for(i = 0; i < 16; i++)
{
    output[i] = ctx->state[i & 0x03][i >> 2];
    printf("%c",output[i]);
}

 } 
```

注意：我已经用随机数填充了 buffer[]。

我只需要知道如何拆分数组。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:03:25.350

您不需要“拆分”数组（无论“拆分”对您意味着什么。）只需对它的每个 16 字节段进行操作：

```
void process_segment(unsigned char segment[])
{
    // Work on the first 16 bytes of 'segment'.
}

// ...

unsigned char buffer[120*160*2];

for (size_t i = 0; i < 120*160*2; i += 16) {
    process_segment(buffer + i);
} 
```

以上只是一个例子。如果你想要一个嵌套`for`循环，你会做这样的事情：

```
unsigned char buffer[120*160*2];

for (size_t i = 0; i < 120*160*2; i += 16) {
    unsigned char* segment = buffer + i;
    // Work on the first 16 bytes of 'segment'.
    for (size_t j = 0; j < 16; ++j) {
        // Work on segment[j].
    }
} 
```

您可能应该将您的 aes_encrypt() 函数更改为采用 an`unsigned char input[]`而不是 an`unsigned char input[16]`以便您可以传递`segment`给它。

您发布的代码将变成这样：

```
 unsigned char ptext[16] = "Attack at dawn!";
    unsigned char ctext[16];
    unsigned char decptext[16];
    unsigned char buffer[120*160*2];

    for (int count = 0; count < 120*160*2; count++)
        buffer[count] = count + 1;

    for (i = 0; i < 120*160*2; i += 16) {
        unsigned char *segment = buffer + i;
        aes_encrypt(ctx, segment, ctext);
        // Clear the current 16-byte segment.
        memset(segment, '\0', 16);
        // ctext now contains the encrypted data of the current
        // 16-byte segment. I assume you want to save it somewhere
        // now since it will be overridden in the next iteration of
        // the loop.
    } 
```

您的 aes_encrypt() 函数的签名将变为：

```
void aes_encrypt(aes_ctx_t *ctx, unsigned char input[],
                 unsigned char output[16]) 
```

# android - PhoneGap SQLite 错误？未捕获的类型错误：对象# has no method 'exec' I m developing Android application. I'm integrating the sqlite into my application 问问题

> ID：14831914
> 
> 赞同：-1
> 
> 时间：2013-02-12T11:50:38.903
> 
> 标签：android, sqlite, cordova

I m developing Android application. I'm integrating the sqlite into my application [https://github.com/brodyspark/PhoneGap-sqlitePlugin-Android](https://github.com/brodyspark/PhoneGap-sqlitePlugin-Android) The below error is coming

> Uncaught TypeError: Object # has no method 'exec'

while using the following code

```
window.sqlitePlugin.openDatabase({name: "DB"}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-27T02:03:14.830

您需要确保在打开数据库之前等待 Cordova 加载。

根据[项目中的 README.md](https://github.com/brodysoft/Cordova-SQLitePlugin)：

```
// Wait for Cordova to load
document.addEventListener("deviceready", onDeviceReady, false);

// Cordova is ready
function onDeviceReady() {
  var db = window.sqlitePlugin.openDatabase({name: "my.db"});
  // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T06:37:18.387

[https://github.com/xuexueMaGicK/Gift-App](https://github.com/xuexueMaGicK/Gift-App)

看到这个链接 js 文件在这里可用 数据库连接在那里

```
 window.addEventListener("DOMContentLoaded", init);

function init() {
pageshow = document.createEvent("Event");
pageshow.initEvent("pageshow", true, true);

tap = document.createEvent("Event");
tap.initEvent("tap", true, true);

pages = document.querySelectorAll('[data-role="page"]');
numPages = pages.length;

links = document.querySelectorAll('[data-role="link"]');
numLinks = links.length;

//checkDB();
document.addEventListener("deviceready", checkDB, false);
 } 
```

/ *********************************** 一般交互 ****************** ***************** /

```
 function checkDB() {
 navigator.splashscreen.hide();

 database = openDatabase('data', '', 'data', 1024 * 1024);

 if (database.version === '') {

    database.changeVersion('', '1.0', createDB, function (tx, err) {
        console.log(err.message);
    }, function (tx, rs) {
        console.log("Increment transaction success.");
    });
    addNavHandlers();
} else {
    addNavHandlers();
} 
```

}

```
function createDB(db) 
{

/*******Create Table Gifts********/

 db.executeSql('CREATE TABLE "gifts" ("gift_id" INTEGER PRIMARY KEY AUTOINCREMENT, "name_id" INTEGER, "occasion_id" INTEGER, "gift_idea" VARCHAR(45))', [], function (tx, rs) {
    console.log("Table gifts created");
}, function (tx, err) {
    console.log(err.message);
});
/*******Create Table Names********/
db.executeSql('CREATE TABLE "names" ("name_id" INTEGER PRIMARY KEY AUTOINCREMENT, "name_text" VARCHAR(80))', [], function (tx, rs) {
    console.log("Table names created");
}, function (tx, err) {
    console.log(err.message);
});
/*******Create Table Occasions********/
db.executeSql('CREATE TABLE "occasions" ("occasion_id" INTEGER PRIMARY KEY AUTOINCREMENT, "occasion_text" VARCHAR(80))', [], function (tx, rs) {
    console.log("Table occasions created");
}, function (tx, err) {
    console.log(err.message);
}); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T12:26:33.057

在 Manifest.xml 中，您必须添加与 SQLite 相关的插件。然后它将起作用。

# ruby-on-rails-3 - Rails AJAX 请求 500 内部服务器错误详细信息

> ID：14831915
> 
> 赞同：0
> 
> 时间：2013-02-12T11:50:40.400
> 
> 标签：ruby-on-rails-3, jquery

我有一个部分形式如下：

**_internet_service_form.html.erb**

```
<%= simple_form_for @internet_service, remote: true do |f| %>
  <%= f.input :start_date %>
  <%= f.button :submit %>
<% end %> 
```

当我在控制器的新操作中渲染它时，它返回一个 500 内部服务器，没有进一步的解释。

当我在控制器的编辑操作中渲染它时，它会正确渲染。

如果我用其中没有 rails 标签的文本块替换部分，它会正确呈现，所以我知道这不是路由错误。

**新的.js.erb**

```
$("#result-content").html("<%= escape_javascript(render(partial: 'new')) %>"); 
```

**新的.html.erb**

```
<%= render partial: 'internet_service_form' %> 
```

**internet_service_controller.rb**

```
def new
  @internet_service = InternetService.new
end

def edit
  @internet_service = InternetService.find(params[:id])
end 
```

这些操作是通过 AJAX 执行的，我从开发日志中得到的最有用的日志是：

```
Started POST "/accounts/29/internet_services/new.js" for 10.12.68.100 at 2013-02-13 00:28:11 +1300
Processing by InternetServicesController#new as JS
  ... snip ...
  Rendered internet_services/_internet_service_form.html.erb (14.9ms)
  Rendered internet_services/_new.html.erb (24.3ms)
  Rendered internet_services/new.js.erb (32.2ms)
Completed 500 Internal Server Error in 231ms 
```

# wcf - WCF 扩展点：从磁盘而不是服务获取虚假响应？

> ID：14831918
> 
> 赞同：0
> 
> 时间：2013-02-12T11:50:46.847
> 
> 标签：wcf

我的 Asp.Net Web 应用程序对 WCF 服务进行了大量调用。对于调试 UI 问题，我使用反序列化早期保存的 WCF 响应。这由配置键控制。

但是，通过手动反序列化，我错过了一些可能由 Web.config 文件的 ServiceModel 中的错误条目引起的反序列化问题。

因此，我希望使用 WCF 扩展点 -

1.  从磁盘读取 xml 响应。
2.  让 WCF 框架为我反序列化 xml。

哪个可扩展点有助于实现这一目标？

**编辑：**

准确地说，我正在尝试使用这些值`offline`（不影响实际服务），以找到适合我们场景的最佳值 -

```
<binding name="voucherServiceBinding" closeTimeout="00:01:00" 
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" 
          bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard" 
          maxBufferPoolSize="524288" maxReceivedMessageSize="65536" 
          messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true" 
          allowCookies="false"> 
         <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" 
             maxBytesPerRead="4096" maxNameTableCharCount="16384" /> 
</binding> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:43:39.913

在 WCF 中绕过网络请求当然是可能的，但不幸的是它并不容易实现。您需要的是一个协议通道（即进入 WCF 通道层），它将拦截请求并做出响应，而不是将其发送到通道堆栈（它将到达传输通道）。

[http://blogs.msdn.com/b/carlosfigueira/archive/2011/07/12/wcf-extensibility-channels.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/07/12/wcf-extensibility-channels.aspx)上的帖子有一个可用于绕过服务器操作的通道示例。您需要从磁盘读取所需的 XML 并`System.ServiceModel.Channels.Message`基于它创建一个 WCF 对象。祝你好运。

# asp.net-mvc - Add existing entities to a collection from View Model - EF Code First

> ID：14831919
> 
> 赞同：0
> 
> 时间：2013-02-12T11:50:47.017
> 
> 标签：asp.net-mvc, collections, ef-code-first

I am trying to add existing users to my Recipients collection in my MVC controllers CreateMessage action which passes a CreateMessageViewModel which should populate my domain Message object.

```
 public class CreateMessageViewModel
{
    public string Body { get; set; }
    public ICollection<int> Recipients { get; set; }
} 
```

Recipients are the posted user ID's I've selected in my view and the body is the message body.

My domain object is as follows:

```
public partial class Message : ModelBase
{
    public Message()  {
        this.Recipients = new HashSet<User>();
    }

    [Key]
    public int Id { get; set; }

    public int SenderId { get; set; }

    [ForeignKey("SenderId")]
    public virtual User Sender { get; set; }

    public virtual ICollection<User> Recipients { get; set; }

    public string Body { get; set; }                        

} 
```

My controller action and respository is as follows:

```
UnitOfWork db = new UnitOfWork();

[HttpPost]
    public ActionResult Create(Model.ViewModel.CreateMessageViewModel messagevm)
    {
        if (ModelState.IsValid)
        {
            var CurrentUserId = WebSecurity.CurrentUserId;

            MessageNotification message = new MessageNotification();
            message.Message = new Message
            {
                Body = messagevm.Body,
                SenderId = CurrentUserId      
            };

            foreach (int userId in messagevm.Recipients)
            {
                // How do I add the existing recipients here?
                // I get an exception here if I run this code and then save...
                User recipient = new User { UserId = userId };
                db.UserRepository.Attach(recipient);
                message.Message.Recipients.Add(recipient); 
            }

            message.Sent = DateTime.Now;
            message.UserId = CurrentUserId;

            db.MessagingRepository.Add(message);
            db.Save();

            return RedirectToAction("Index");
        }

        return View(messagevm);
    }

public class Repository<TEntity> : IDisposable where TEntity : class 
{
    internal MyDB Context; 
    internal DbSet<TEntity> dbSet;

    public Repository(MyDB context)
    {
        this.Context = context;
        this.dbSet = Context.Set<TEntity>();
    }                

    public virtual void Attach(TEntity entityToAttach)
    {
        dbSet.Attach(entityToAttach);           
    }

    ............
} 
```

How do I attach the user entities to the Recipients collection without fetching them from the database? I am using the same implementation of the repository pattern as stated in the [ASP.NET MVC tutorials](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application) .

With the code above I get the following exception:

> Store update, insert, or delete statement affected an unexpected number of rows (0). Entities may have been modified or deleted since entities were loaded. Refresh ObjectStateManager entries

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:12:23.040

你可以做

```
var user = new User { UserId = userId };
db.Users.Attach(user);
message.Message.Recipients.Add(user); 
```

您可能需要检查用户是否已在上下文中加载：

```
var user = db.Users.Local.FirstOrDefault(u => u.UserId == userId);
if (user == null)
... // create and attach user as above. 
```

**编辑**

您的修改让我注意到这`db`不是一个上下文，而是一个工作单元。您可以将上面的逻辑包装在一个方法中`db.MessagingRepository`，例如`GetUser(int userId)`.

# javascript - 在父级和 iframe 之间：mouseover/out 结合点击行为

> ID：14831920
> 
> 赞同：-1
> 
> 时间：2013-02-12T11:50:48.613
> 
> 标签：javascript, jquery, html, css

我对编程很陌生。请给我一个怜悯。根据后[mouseover/out 结合点击行为](https://stackoverflow.com/questions/14828995/javascript-mouseover-out-combined-with-click-behavior)。我想问更多问题，因为我仍然无法完成任务。

下面是我的代码：

**Child.html**

```
<div id="custom_div">This div will be highlighted</div> 
```

**父.html**

```
<iframe id="iframeID" src="Child.html"></iframe>    
<a href="#" id="custom_Link">Click to highlight the custom div in Child.html</a>

<script>
    $('#iframeID').contents().find('#custom_div');

    $('#custom_Link').hover(function () {
        $('#custom_div').toggleClass('highlight'); 
    });

    $('#Custom_Link').click(function (e) {
       $('#Custom_div').addClass('highlight');
       $(e.currentTarget).unbind('mouseenter mouseleave');
    });
    </script> 
```

我想做的是：

1.  当用户**将鼠标悬停**在“custom_link”上时，“custom_div”被突出显示。
2.  当用户**将鼠标移出**“custom_link”时，“custom_div”处的突出显示将被消除。
3.  当用户**点击**“custom_link”时，“custom_div”被突出显示。但是，当用户将鼠标移出时，'highlightDiv' 仍然被添加到“custom_div”中。

你能帮我解决这个问题吗？我寻找了很多“通过 Jquery 访问 iframe 元素”的问题，但是，我仍然无法理解。如果您也可以提供 Jsfiddle 示例，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:17:00.423

如果我目前了解您的要求，这应该可以解决此问题

```
 <script type="text/javascript">
  $(window).load(function (){
       var triggered_div = $('#iframeID').contents().find('#custom_div');
           $('#custom_Link').hover(function () {
                 triggered_div.toggleClass('highlight'); 
             });
         $('#Custom_Link').click(function (e) {
             triggered_div.addClass('highlight');
            $(e.currentTarget).unbind('mouseenter mouseleave');
         });

    });
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:15:10.210

这个小提琴：[http://jsfiddle.net/W4dUa/](http://jsfiddle.net/W4dUa/)应该做你要求的，如果我理解正确的话，但是：

首先，类和 ID 区分大小写 - 修改你的代码，因为你有这样的位：`$('#Custom_Link')`大写*C*不同于`id="custom_Link"`

我相信这是因为您取消`mouseenter mouseleave`了以下约束`click`：

```
 $(e.currentTarget).unbind('mouseenter mouseleave'); 
```

来自[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

> .hover() 方法绑定了 mouseenter 和 mouseleave 事件的处理程序。

是因为，

```
$('#custom_Link').hover(function () {
    $('#custom_div').toggleClass('highlight'); 
}); 
```

不再“工作”，`highlight`课程仍然在你的`div`

# eclipse-rap - 如何预启动我的 RAP 应用程序以在启动后立即触发预热

> ID：14831926
> 
> 赞同：0
> 
> 时间：2013-02-12T11:51:22.727
> 
> 标签：eclipse-rap

我有一个 RAP 应用程序，我们将其部署到 Tomcat 实例中。该应用程序在第一次启动期间会做一些额外的事情。

目前，当第一个用户在浏览器中打开网页时，由于这种一次性初始化工作，应用程序准备就绪需要相当长的时间。

这对可用性不利，因为第一个用户需要等待很长时间才能完成启动工作。

有没有办法在 Tomcat 启动后触发或模拟第一个会话，以便我们可以预热应用程序并让第一个用户快速收到反馈？

我尝试通过 URLConnection 执行一些简单的 URL 请求来模拟浏览器，但似乎触发新会话的协议并非易事。

我还尝试使用 HtmlUnit 来请求启用了 JavaScript 的页面，这在一定程度上可行，但是对于这个简单的步骤，HtmlUnit 相当繁重。

那么是否有官方 API 或至少某种解决方法可以让我预先启动和初始化应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:03:33.310

除非此初始化需要 UI 会话（即用户），否则`configure`您的方法`ApplicationConfiguration`可能是一个合适的地方。但是，此时 ApplicationContext 尚未完全设置，因此可能为时过早。此外，如果您的应用程序基于工作台和扩展点，您将不会拥有自己的 ApplicationConfiguration。

您介意打开一个错误报告 ( [http://eclipse.org/rap/bugs](http://eclipse.org/rap/bugs) ) 并描述您的用例吗？我认为我们应该为应用程序设置和清理提供某种钩子，例如 ApplicationContextListener？

# json - 无法在 Knockout 中绑定嵌套的 JSON

> ID：14831939
> 
> 赞同：3
> 
> 时间：2013-02-12T11:51:58.280
> 
> 标签：json, knockout.js, nested, bind

我正在尝试将 JSON 传递给淘汰赛并显示它，并且我已经成功地为前几个元素这样做了。但是我遇到了嵌套对象的问题。我想要实现的是为每个 A1,A2,A3 / B1,B2,B3 显示 desc 和 value 字段。

我查看了一百万个示例并尝试了各种版本，但仍然无法弄清楚映射是如何工作的。

非常感谢您的帮助。

JS：

```
function jsonSubsetModel (desc,value){
    var self = this;
    self.desc = ko.observable(desc);
    self.value = ko.observable(value);
    }

    var myModel = function(){
        var jsonUrl = '/myjson.json';
        var self = this;
        var mapped = {};

        //Data
        self.date = ko.observable();
        self.time = ko.observable();

        self.set1 = ko.observableArray([]);
        self.set2 = ko.observableArray([]);

    $.getJSON(jsonUrl,function (data) {     
    self.date(data.Date);
    self.time(data.Time);   
    self.img(data.ImgURL);

    mapped = ko.mapping.fromJS(data);
    self.set1(mapped.SET1);
    self.set2(mapped.SET2);             
    });

    };  

    ko.applyBindings(new myModel()); 
```

HTML：

```
<!-- This works -->
    <span data-bind="text: date"></span><br>
    <span data-bind="text: time"></span><br>
    <span data-bind="text: img"></span><br>

<!-- This doesn't -->    
    <p data-bind = "foreach:{data: set1, as:'subset'}">
    <span data-bind="text: subset.desc"></span>
    <span data-bind="text: subset.value"></span>    
    </p> 
```

JSON：

```
{    
"Date":"21/02/2013",
"Time":"13:55",    
"SET1": {       
            "A1":{          
            "desc":"descA1",
            "value":"30",               
            },
            "A2":{          
            "desc":"descA2",
            "value":"30",
            },
            "A3":{          
            "desc":"descA3",
            "value":"30",
            }                                           
    },

    "SET2": {       
            "B1":{          
            "desc":"descA1",
            "value":"30",
            },
            "B2":{          
            "desc":"descA1",
            "value":"30",
            },
            "B3":{          
            "desc":"descA1",
            "value":"30",
            }                       
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:58:08.103

`knockout.js` `foreach`与`Array`. _ 你提供的是一个对象。将您的对象更改为：

```
"SET1": [      
            {          
            "desc":"descA1",
            "value":"30",               
            },
            {          
            "desc":"descA2",
            "value":"30",
            },
            {          
            "desc":"descA3",
            "value":"30",
            }                                           
    ], 
```

# spring - Spring无法使用Tomcat提供的JNDI DataSource？

> ID：14831942
> 
> 赞同：6
> 
> 时间：2013-02-12T11:52:04.277
> 
> 标签：spring, tomcat, tomcat7, jndi, connection-pooling

我想在基于 Spring 的应用程序中使用 Tomcat 提供的 JNDI DataSource。我使用 Tomcat 7 池。尝试按照[此处](https://stackoverflow.com/questions/9183321/how-to-use-jndi-datasource-provided-by-tomcat-in-spring)所述进行配置。

配置Tomcat的server.xml：

```
 <GlobalNamingResources>
    <Resource name="jdbc/ApsuserAtAzistst"
              auth="Container"
              type="org.apache.tomcat.jdbc.pool.DataSource"
              driverClassName="oracle.jdbc.OracleDriver"
              url="jdbc:oracle:thin:@10.0.153.10:1525:AZISTST"
              username="APSUSER"
              password="PASSWORDOFAPSUSER"
              initialSize="1"
              minIdle="1"
              maxIdle="1"
              maxActive="3"
              maxWait="1000"
              validationQuery="select 1 from dual"
              jdbcInterceptors="org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer;org.apache.tomcat.jdbc.pool.interceptor.SlowQueryReport(threshold=1500)"
            />
  </GlobalNamingResources> 
```

创建了 META-INF\context.xml 的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context>
    <ResourceLink name="jdbc/ApsuserAtAzistst"
                  global="jdbc/ApsuserAtAzistst"
                  type="org.apache.tomcat.jdbc.pool.DataSource"/>
</Context> 
```

并配置了 applicationContext.xml

```
<beans profile="dev,test,default">
    <bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="java:comp/env/jdbc/ApsuserAtAzistst"/>
    </bean>
</beans> 
```

当我运行应用程序时，我收到一个错误：

```
SEVERE: Exception processing Global JNDI Resources
javax.naming.NamingException: Cannot create resource instance
    at org.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:146)
    at javax.naming.spi.NamingManager.getObjectInstance(Unknown Source)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:843)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
    at org.apache.naming.NamingContextBindingsEnumeration.nextElementInternal(NamingContextBindingsEnumeration.java:119)
    at org.apache.naming.NamingContextBindingsEnumeration.next(NamingContextBindingsEnumeration.java:73)
    at org.apache.naming.NamingContextBindingsEnumeration.next(NamingContextBindingsEnumeration.java:36)
    at org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.createMBeans(GlobalResourcesLifecycleListener.java:140)
    at org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.createMBeans(GlobalResourcesLifecycleListener.java:147)
    at org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.createMBeans(GlobalResourcesLifecycleListener.java:112)
    at org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.lifecycleEvent(GlobalResourcesLifecycleListener.java:84)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:402)
    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:347)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:725)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456) 
```

当我将 applicationContext.xml 更改为：

```
<beans profile="dev,test,default">
    <bean id="dataSource" class="org.apache.tomcat.jdbc.pool.DataSource" destroy-method="close">
        <property name="driverClassName" value="oracle.jdbc.OracleDriver"/>
        <property name="url" value="jdbc:oracle:thin:@10.0.153.10:1525:AZISTST"/>
        <property name="username" value="APSUSER"/>
        <property name="password" value="PASSWORDOFAPSUSER"/>
        <property name="initialSize" value="1"/>
        <property name="minIdle" value="1"/>
        <property name="maxIdle" value="1"/>
        <property name="maxActive" value="3"/>
        <property name="maxWait" value="1000"/>
        <property name="validationQuery" value="select 1 from dual"/>
        <property name="jdbcInterceptors"
                  value="org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer;org.apache.tomcat.jdbc.pool.interceptor.SlowQueryReport(threshold=1500)"/>
    </bean>
</beans> 
```

但是我想在Tomcat中配置JNDI DataSource并使用它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T06:26:51.563

原因是，我错过了 factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"。资源的正确定义必须是

```
 <GlobalNamingResources>
    <Resource name="jdbc/ApsuserAtAzistst"
              auth="Container"
              type="javax.sql.DataSource"
              factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
              driverClassName="oracle.jdbc.OracleDriver"
              url="jdbc:oracle:thin:@10.0.153.10:1525:AZISTST"
              username="APSUSER"
              password="PASSWORDOFAPSUSER"
              initialSize="1"
              minIdle="1"
              maxIdle="1"
              maxActive="3"
              maxWait="1000"
              validationQuery="select 1 from dual"
              jdbcInterceptors="org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer;org.apache.tomcat.jdbc.pool.interceptor.SlowQueryReport(threshold=1500)"
            />
  </GlobalNamingResources> 
```

# php - how to assign php value to javascript variable?

> ID：14831943
> 
> 赞同：-7
> 
> 时间：2013-02-12T11:52:03.890
> 
> 标签：php, javascript

I am using the following code:

> ```
>  <?php  
>          $id = $_GET['id'];
>          echo $id; 
>             var java_id= <?php echo $id; ?> ;
>              alert(java_id);
> 
>     </script> 
> ```

```
The value doesn't alert. What is the mistake? 
```

Thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:53:19.780

也许试试这个：

```
<script>
         // More java code here I am guessing from your example...
         var java_id= <?php echo $_GET['id']; ?> ;
         alert(java_id);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:53:50.903

```
<?php  
  $id = $_GET['id'];
?>

<script>
  var java_id= <?php echo $id; ?> ;
  alert(java_id);        
</script> 
```

正确关闭，您的 php 和 javascript 代码，它们是两种不同的语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:05:46.367

如果您在 .php 文件上编写代码，则需要将 javascript 变量包含在标记中，并且您可以通过在您的情况下分配变量来直接使用 php 变量，例如 var java_id= ""; 在脚本标签内...但是，如果您尝试直接访问 .js 文件中的 php 变量，那么您需要在包含 .js 文件之前创建全局 javascript 变量...

# visual-studio-2008 - 如何在 Visual Studio 8 中将自动需要的文件从任何目录复制到发布目录或调试目录

> ID：14831944
> 
> 赞同：1
> 
> 时间：2013-02-12T11:52:09.167
> 
> 标签：visual-studio-2008, directory, copy, xulrunner, geckofx

我在我的一个项目中使用 Visual Studio 2008 和导入的 GeckoFX-Framework。由于 Geckofx-13.0.dll 使用 XUL-Runner 本身，因此必须在项目的构建目录中也包含这些文件。到目前为止，我曾经手动将它们复制到两个目录（调试和发布）中。

我问自己是否可以告诉 VS 将它们自动复制到这些目录中。

如果这些文件丢失，则构建的执行将失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:14:43.460

您可以将所需的文件添加到您的项目中，在属性窗口中将它们设置为“内容”，并将构建操作设置为“如果较新则复制”。

您可以将[构建后操作](https://stackoverflow.com/q/3161232/736079)（右键单击项目，选择属性）添加到发布和调试配置以将文件复制到输出目录（您可以使用宏而不是硬编码，这样总是使用正确的目标，在项目设置中编辑时也是如此）。一个简单的`copy .\Files\*.* $(TargetDir)`可能会工作。您可以从命令行执行的任何命令也可以在此处使用。

**首选方式**：

您可以添加一个[Post-Build 目标](http://blogs.msdn.com/b/msbuild/archive/2010/02/18/build-extensibility-with-net-framework-4.aspx)（右键单击项目、卸载项目、右键单击卸载项目、编辑项目）并使用 msbuild[`<copy>`](https://www.google.nl/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDAQFjAA&url=http://msdn.microsoft.com/en-us/library/3e54c37h.aspx&ei=9y4aUaK3EYKd0QXRoICoBw&usg=AFQjCNEfzViBfzXA1KDM-7xAyBn34UVj5w&sig2=XnUuD2hdyyuGDQmVQVPnNA&bvm=bv.42261806,d.d2k)任务将文件从一个位置复制到另一个位置。您可以再次使用宏，例如`$(OutDir)`or`$(TargetDir)`或`$(Platform)`and `$(Configuration)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T12:33:35.580

我有同样的问题，我做了这样的事情：

```
XCOPY "$(ProjectDir)resources\libraries\xulrunner" "$(TargetDir)xulrunner" /E /I /Y /R 
```

它完美地工作。现在我在位于 Debug/Release 输出目录中的指定“xulrunner”目录中有 xulrunner，因此 xulrunner 文件不会与应用程序库混合。记得在 Xpcom.Initialize 调用中设置新的 xulrunner 目录。

# javascript - 需要更新 Salesforce 数据库任务表中的状态

> ID：14831951
> 
> 赞同：1
> 
> 时间：2013-02-12T11:52:21.003
> 
> 标签：javascript, jquery, salesforce

在我的应用程序中，我使用了 salesforce 数据库。单击按钮后，我需要更新任务字段的状态。我使用 html 文件中的代码来获取 newStatus-

```
<a id="btnTaskUpdateStatus" href="#task_status_change_page" data-rel="popup" data-position-to="window" data-transition="pop">
    <img src="images/task_edit24.png" width="32" height="32" />
</a>
<div data-role="popup" id="task_status_change_page" data-overlay-theme="a" data-theme="c" style="width:280px !important">
    <script>$('select').selectmenu({ preventFocusZoom: true });</script>
    <div data-role="header" data-theme="b">
        <h1>Update Status</h1>
    </div>
    <div data-role="content" data-theme="d">
        <div data-role="fieldcontain">
            <label for="select-task-status" class="select"><strong>Status:</strong></label>
            <select id="select-task-status" name="select-status" class="selectmenu">
                <option value="Not Started">Not Started</option>
                <option value="In Progress">In Progress</option>
                <option value="Completed">Completed</option>
                <option value="Waiting On someone else">Waiting On someone else</option>
                <option value="Deffered">Deferred</option>
            </select>
        </div>
        <div data-role="controlgroup" data-type="horizontal" class="center-wrapper">
            <a id="btnTaskUpdateSubmit" data-role="button" data-inline="true" data-direction="reverse" data-rel="back" >Submit</a>
        </div>
    </div>
</div> 
```

现在在 js 文件中我使用了代码 -

```
$j('#btnTaskUpdateStatus').click(function(e) {
    var recordId = $j('#TaskRecordId').val();
    如果 (recordId != null ) {
        var currStatus = $j('#TaskStatus').text();
        updateHTMLVal('#select-task-status', currStatus);
        $('#select-task-status').selectmenu('refresh');
    }
    $j('#btnTaskUpdateSubmit').click(function(e){
        var newStatus = $("#select-task-status").val();
        如果（新状态！= currStatus）{
            changeTaskStatus(recordId, newStatus,creds);
            $('#select-task-status').selectmenu('refresh');
            $('#TaskStatus').html(newStatus);
         }
    });
});
函数 changeTaskStatus(Id, newStatus) {
    变量字段 = {};
    字段[“状态”] = 新状态；
    forcetkClient.update('Task', Id, fields, function(response) {
             警报（“更新”）；   
        }, onErrorSfdc);
}

```

现在我的问题是，当我更新状态时，它会正确更新，但是下次我再次更改另一个任务的状态“ `$j('#btnTaskUpdateSubmit').click(function(e){`”这个函数调用了两次，并且新任务的状态覆盖了以前任务的状态。

如果我的问题不清楚，请指导我如何以您的方式更新任务状态。提前致谢。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:12:07.500

您可能正在将函数堆叠到 $j('#btnTaskUpdateSubmit') 元素上。在添加新的单击事件处理程序之前，请尝试删除当前的单击事件处理程序。像这样：

```
$j('#btnTaskUpdateStatus').click(function(e) {
    var recordId = $j('#TaskRecordId').val();
    if (recordId != null ) {
        var currStatus = $j('#TaskStatus').text();
        updateHTMLVal('#select-task-status', currStatus);
        $('#select-task-status').selectmenu('refresh');
    }
    // Remove any existing click handlers
    $j('#btnTaskUpdateSubmit').unbind('click');

    $j('#btnTaskUpdateSubmit').click(function(e){
        var newStatus = $("#select-task-status").val();
        if (newStatus != currStatus) {
            changeTaskStatus(recordId, newStatus,creds);
            $('#select-task-status').selectmenu('refresh');
            $('#TaskStatus').html(newStatus);
         }
    });
}); 
```

# java - 窗户尺寸不匹配

> ID：14831952
> 
> 赞同：1
> 
> 时间：2013-02-12T11:52:27.220
> 
> 标签：java, swing, jframe

```
class Main 
{     
    public static void main(String [] args)
    {
     Window h = new Window(100,100);            
    }        

}

class Window
{
    private JFrame frame;

    public Window(int width,int height)
    {
        Rectangle dim = new Rectangle();

        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocation(0, 0);
        frame.setSize(width, height);
        frame.setVisible(true);

        frame.getBounds(dim);

        System.out.print(dim); 
    }
} 
```

该程序创建一个在构造函数中指定的宽度和高度的窗口，然后测量并“回显”它的尺寸。

> 运行：java.awt.Rectangle[x=0,y=0,width=132,height=100]

你能解释一下为什么一个真正的窗口宽 32px 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:58:25.673

那是因为`JComponent`有默认的最小尺寸，在你的情况下，最小宽度是 132px。要解决此问题，您可以将`window`' 宽度增加到至少 132，或者`frame.setMinimumSize(new Dimension(100, 100))`在`frame.setSize(width, height)`.

# php - 如何在 Codeigniter 上实现 Markdown Extra？

> ID：14831953
> 
> 赞同：0
> 
> 时间：2013-02-12T11:52:31.647
> 
> 标签：php, codeigniter, markdown

我想额外安装markdown，因为它有一些我喜欢的功能。但是，codeigniter 版本只使用正常的降价，我怎么能在 codeigniter 上使用额外的降价。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:02:34.380

CodeIgniter 默认有降价吗？我刚下载了`Markdown_extra.php`，改名了`Markdown_helper.php`，放里面了`application/helpers`。

然后你只需要使用加载它`$this->load->helper('markdown')`并调用它`Markdown($string)`

# php - 如何在PHP中检查登录是否成功？

> ID：14831961
> 
> 赞同：0
> 
> 时间：2013-02-12T11:52:55.543
> 
> 标签：php, curl

我已经编写了一个 php 脚本来从 curl 登录到一个站点。下面是我的代码：

```
<?php
// INIT CURL
$ch = curl_init();

// SET URL FOR THE POST FORM LOGIN
curl_setopt($ch, CURLOPT_URL, 'http://wordpress.dev/wp-login.php');

// ENABLE HTTP POST
curl_setopt ($ch, CURLOPT_POST, 1);

// SET POST PARAMETERS : FORM VALUES FOR EACH FIELD
curl_setopt ($ch, CURLOPT_POSTFIELDS, 'log=admin&pwd=admin');

// IMITATE CLASSIC BROWSER'S BEHAVIOUR : HANDLE COOKIES
curl_setopt ($ch, CURLOPT_COOKIEJAR, 'cookie.txt');

# Setting CURLOPT_RETURNTRANSFER variable to 1 will force cURL
# not to print out the results of its query.
# Instead, it will return the results as a string return value
# from curl_exec() instead of the usual true/false.
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);

// EXECUTE 1st REQUEST (FORM LOGIN)
$store = curl_exec ($ch);
var_dump($store);exit;

// CLOSE CURL
curl_close ($ch);

?> 
```

如果我输入正确的密码，它会给出 string() "，如果输入错误的密码，它会将我重定向到登录页面 如何检查登录是否成功？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:03:58.477

您还需要检查响应代码。这可能会帮助你。

```
$contents = curl_exec($ch);
$httpcode = curl_getinfo($ch,CURLINFO_HTTP_CODE);

var_dump($httpcode);
var_dump($contents); 
```

在大多数情况下，HTTP 代码 200 是有效的身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:57:54.093

**[curl_exec()](http://php.net/manual/en/function.curl-exec.php)**返回`TRUE`成功或`FALSE`失败。

```
<?php 

     //execute the request (the login)
     $store = curl_exec($ch);    

     if($store){ //check for true/false
         //Logged in
     }else{
         //Login failed
     }

?> 
```

**更新：**

如果您使用的是 HTTPS，请添加以下内容：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); 
```

**更新 2：**

添加这个：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T09:48:33.507

您应该注意状态码。

即使您的登录未通过验证，curl_exec 也会返回 true。

它只是意味着 curl 请求执行没有错误..

确保状态码是“200”..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T11:56:00.517

你可以检查它，`$store`它会在成功时返回 true，否则返回 false。

检查[使用 curl 存储登录响应？](https://stackoverflow.com/questions/9564857/storing-the-response-of-login-using-curl). 认为它会解决你的问题。

# mysql - 带有附加 where 子句的 SQL 左连接

> ID：14831962
> 
> 赞同：0
> 
> 时间：2013-02-12T11:53:00.387
> 
> 标签：mysql, left-join

```
products (products_id, name, type)
orderform (orderform_id, product_id, country_id, price) 
```

我想获取某个 country_id 的订单表中不存在的所有产品。

以下是不正确的，我知道有更快的方法，速度并不是真正的问题，只是获得正确的结果集。

```
SELECT * FROM products p
    left JOIN orderform o ON o.product_id = p.product_id

WHERe o.product_id is NULL AND o.jur_id = 10 
```

谢谢男生女生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:54:45.750

```
SELECT * 
FROM products p
WHERE product_id NOT IN(SELECT product_id
                        FROM orderform 
                        WHERE jur_id = 10); 
```

还尝试将额外条件移动到连接条件：

```
SELECT * 
FROM products p
left JOIN orderform o  ON o.product_id = p.product_id
                      AND o.jur_id = 10                        
WHERe o.product_id is NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:55:02.927

这个很简单

```
 SELECT * 
 FROM products p
 WHERE products_id NOT IN (SELECT DISTINCT product_id 
                            FROM orderform
                            WHERE country_id = 10) 
```

我在您的架构中看不到`jur_id`，如果您愿意，您也可以应用该过滤器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:58:57.730

它看起来像这样！（虽然不是最好的方法）

```
SELECT * FROM products p
left JOIN (select * from orderform WHERe product_id is NULL AND jur_id = 10) o ON o.product_id = p.product_id 
```

# java - 在 James 中添加新用户

> ID：14831963
> 
> 赞同：3
> 
> 时间：2013-02-12T11:53:05.113
> 
> 标签：java, jakarta-mail, james

我的问题很简单。如何以编程方式在 James 中创建/添加新用户。我一直在使用 Telnet 进行此操作。但是我找不到在Java中这样做的方法。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:00:46.970

James 的用户也可以通过 JMX 创建：参见[http://james.apache.org/server/3/manage-users.html#Manage_Users_via_JMX](http://james.apache.org/server/3/manage-users.html#Manage_Users_via_JMX)

# php - cakephp 每月显示条目

> ID：14831964
> 
> 赞同：1
> 
> 时间：2013-02-12T11:53:18.607
> 
> 标签：php, cakephp

我有以下脚本，它显示了我最近的 5 张发票，如下所示：

```
<?php 
  $year = (int)(substr($invoice['Invoice']['invoice_date'], 0, -6));
  $month = (int)(substr($invoice['Invoice']['invoice_date'], 5, -3));
?>
<?php if($count < 5) : ?> 
```

这现在显示 5 个最新的发票，无论它们是在哪个月份到期的。如何调整/更改此代码段以向我展示当月的 5 张发票？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:57:57.963

为什么不使用`cakephp time helper`.

```
<?php $year  = $time->format('Y',$invoice['Invoice']['invoice_date']); ?>
<?php $month = $time->format('m',$invoice['Invoice']['invoice_date']); ?>
```

对于您本月的最新记录，请尝试以下解决方案。

```
<?php

$this->Invoice->find('all', array
(
    'conditions'=> array('DATE_FORMAT(Invoice.invoice_date,"%m") = "'.date("m").'"')
));
```

# delphi - 搜索记录上的日期

> ID：14831965
> 
> 赞同：0
> 
> 时间：2013-02-12T11:53:19.203
> 
> 标签：delphi, ms-access, delphi-xe3

我将日期与其他信息一起存储在 MS ACCESS 数据库中。但我似乎无法随心所欲地搜索它们。我想搜索：年，月。我正在使用一个`datetimepicker`

目前我正在使用此代码执行此操作： `ADOTable1.Filter := 'Date > ' + Edit1.Text; ADOTable1.Filtered := True; end;`

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:48:45.010

您有两种选择：您的解决方案使用不太可取的一种将字符串文字传递给查询。在这种情况下，您必须“转义”您传递的值，例如

```
ADOTable1.Filter := 'Date > ''' + Edit1.Text + ''''; 
```

这将导致像

```
ADOTable1.Filter := 'Date > ''27-Sep-69''' 
```

更好的解决方案是使用参数化查询

```
select <whatever> from table
where date > :p1 
```

您通过以下方式传递参数

```
ADOTable.parambyname ('p1').asdate:= strtodate (edit1.text); 
```

我承认我不使用 ADO 组件，因此语法可能略有偏差，但它是用于 Firebird 的语法。

参数比使用原始文本值更好，因为您不必担心添加正确数量的引号，并且没有人可以传入错误的值。想象一下如果 edit1.text 包含 '27-Sep-65;Drop table1'; 会发生什么？- 这可能会从数据库中删除您的表！

# layout - 在 Liferay 中动态更改页面布局

> ID：14831971
> 
> 赞同：1
> 
> 时间：2013-02-12T11:53:44.347
> 
> 标签：layout, liferay, liferay-6

谁能告诉我如何在 Liferay 中动态更改页面布局。让我们假设我们有一个带有布局 2 列 (50/50) 的页面，并且这两个列都有 portlet。如果用户单击任何 portlet，我想将页面布局更改为 2 列 (70/30)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T03:32:15.767

我从来没有试过，但你试过检查`LayoutLocalServiceUtil.updateLayout()`吗？

那应该对你有帮助。如果您要创建新页面，请`LayoutLocalServiceUtil.addLayout()`使用`updateLayout()`.

获取布局，然后更新它。

```
layout = LayoutLocalServiceUtil.getFriendlyURLLayout(groupId, false, friendlyURL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:04:51.280

添加到 - 如提供 -

layoutId = LayoutLocalServiceUtil.getFriendlyURLLayout(groupId, false, friendlyURL);

传递新页面的friendlyURL，如果它是公共页面，则为false，否则为私有，并确保您已将一些布局应用于新页面（例如- 70/30）

使用此 layoutId -

" windowState="<%= WindowState.NORMAL.toString()%>">

将 portletId 提供给 portletname 字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T11:20:35.077

下面是来自布局模板的示例 html 部分...

```
<div class="portlet-layout">
    <div class="aui-w70 portlet-column portlet-column-first" id="column-2">
        $processor.processColumn("column-2", "portlet-column-content portlet-column-content-first")
    </div>
    <div class="aui-w30 portlet-column portlet-column-last" id="column-3">
        $processor.processColumn("column-3", "portlet-column-content portlet-column-content-last")
    </div>
</div> 
```

如果你仔细检查一下，有一些类描述了 div 的宽度，在我的示例中，aui-w70 用于宽度 70%，而 aui-w30 用于 30%。我相信你也会在你的布局中得到类似的东西。如果您可以根据需要在所需事件中更改班级名称，那么您很高兴......试一试......

# java - Java：局部变量已初始化，仍然报错

> ID：14831974
> 
> 赞同：2
> 
> 时间：2013-02-12T11:53:49.533
> 
> 标签：java, variables, warnings, local

我没有发现这段代码有任何错误，但是 eclipse 告诉我变量没有初始化。这只是一个警告，但编译后它也不起作用。我根本找不到这个代码 100% 正确的错误和事情。请注意，此代码的结构不能轻易更改，因为下面提供的代码已简化，因此您无需阅读太多内容；-)

```
int min1; float somefloat;
try {
    //setting values for min and somefloat
    min1 = 1;
    somefloat = 0.92f;
} catch (IOException ioe) {
    System.err.println("Read Exception");
} 
while (true){
    //warning: variables min1 and somefloat may not be initialized.
    float value1 = (1023 - min1) * somefloat;
    System.out.println("Value: " + value1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:56:25.977

您必须在**所有变量进入任何** `try`块之前对其进行初始化。Java 编译器不知道在您的情况下，不会导致异常。

所以从理论上讲，*某处**可能*存在一个异常，导致您的变量未初始化。这是不可接受的。因此发出警告。

 *只需将变量初始化为零。

```
int min1 = 0;
float somefloat = 0f; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:01:23.027

编译器不会分析在具体情况下变量是否会被初始化。它确保如果变量仅在**try**中初始化，而不是在**catch**中初始化，或者**最后**它会确保它们**可能**不会被初始化。

使用“明显”的条件进行类似的尝试，例如`if(1>0) {}`. 编译器编译而不是分析您的代码。虽然对于人类来说很明显会发生一些事情，但 java 编译器没有代码来检测这种情况，java 语法也没有指定它。因此，您期望编译器提供它所没有的 AI，以保持编译清晰、可预测和快速。

顺便说一句，您的代码将报告错误而不是您描述的错误，因为没有地方`IOException`可以抛出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:54:33.923

您必须在声明它们时或至少在`try-catch`块之外初始化它们。因为编译器无法确定 try-catch 块内的初始化是否会正常完成，在这种情况下，您将在外面有一个未初始化的变量。

```
int min1=0; float somefloat=0.0f; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T11:57:15.580

> 但是eclipse告诉我变量没有初始化

显示警告是因为有可能在变量在 中初始化之前引发异常`try`。然后内部`while`变量保持未初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T11:57:59.210

它们应该有一个初始值，以防万一它进入`catch`块。试试这个：

```
int min1 = 0; float somefloat = 0f;
try {
   //setting values for min and somefloat
   min1 = 1;
   somefloat = 0.92f;
} catch (IOException ioe) {
    System.err.println("Read Exception");
} 
while (true){
  //warning: variables min1 and somefloat may not be initialized.
  float value1 = (1023 - min1) * somefloat;
  System.out.println("Value: " + value1); 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T12:07:07.963

您需要在声明期间初始化变量。try 中的变量赋值将覆盖该值，如果发生任何异常（不知道您的情况如何......）它将采用默认值。在编译期间，编译器不会查看您的代码是否会抛出异常（除了`throw`，它需要匹配`catch`），因此它需要显式初始化。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-12T12:01:33.087

```
private void tset(){
    int min1; float somefloat;
    try {
        //setting values for min and somefloat
        min1 = 1;
        somefloat = 0.92f;
    while (true){
        //warning: variables min1 and somefloat may not be initialized.
        float value1 = (1023 - min1) * somefloat;
        System.out.println("Value: " + value1);
    }
    } catch (Exception ioe) {
        System.err.println("Read Exception");
    } 
} 
```

这可能是您正在寻找的代码...*

# variables - Smarty：在修饰符中组合两个变量

> ID：14831976
> 
> 赞同：0
> 
> 时间：2013-02-12T11:53:54.197
> 
> 标签：variables, smarty, modifier

如何在修饰符中组合两个变量（数组 vals）？

这有效：

```
<a href="{'smartphone'|buildLink:$k:$v["brand"]}"> 
```

但这不会？？

```
<a href="{'smartphone'|buildLink:$k:$v["brand"]+$v["brand2"]}" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:12:19.210

Smarty 语法在允许表达式的位置方面受到限制，因此您可能必须将总和分配给临时变量：

```
{assign var=_sum value=$v[brand]+$v[brand2]}
<a href="{'smartphone'|buildLink:$k:$_sum}" 
```

# visual-studio-2012 - VS2012 中的 umbraco 项目 - 怎么样？

> ID：14831977
> 
> 赞同：2
> 
> 时间：2013-02-12T11:53:54.737
> 
> 标签：visual-studio-2012, umbraco

现在轮到我问这个问题了。。

我一直在阅读有关在 VS2012 中设置 umbraco 项目的信息，但我真的不知道我是否正在做它，或者它是否不可能..

是否可以在不使用 umbraco 管理工具的情况下在 VS2012 中设置一个 umbraco 项目，该项目能够添加模板、文档类型以及使用 VS2012 创建站点等等？:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:57:44.093

是的，事实上，就在 2 分钟前，我完成了一个全新项目的签入，这是一个包含 Umbraco v6 网站的 VS2012 解决方案。

我的解决方案/目录设置是特别的，毫无疑问你的也是，但底线是 Umbraco 只是一个 ASP.NET 网站，因此您可以使用“添加现有网站”选项将其添加到解决方案中，您的意愿的根目录或子目录。

然后，您可以使用解决方案资源管理器来编辑文件，例如`css`、`masterPages`和`macroScripts`文件夹等中的文件。

需要注意的一点是这一点。当使用“Umbraco 脚本”（即 Razor 脚本文件等）时，当在 Umbraco UI 中创建时，还会创建一个调用宏（默认情况下，尽管有一个选择退出）和（历史上）一些数据库正在运行，所以在脚本的情况下，我认为最初使用 Umbraco UI 创建它们总是明智的。

除此之外，您是否有特定问题，因为我没有看到您指出？

# javascript - 有没有办法加载库，以便它们只能在本地范围内使用？

> ID：14831979
> 
> 赞同：1
> 
> 时间：2013-02-12T11:54:04.300
> 
> 标签：javascript

我要做的是动态加载 jQuery 和其他库的修改版本，以便这些修改版本只能在我调用它们的本地范围内访问，并避免与同一库的其他版本发生冲突。例如：

```
//Some global code that uses regular jQuery
(function(win, doc, undefined){
   loadMyJQuery();
   //Some code that uses my modified version
})(window,document); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:11:54.167

您可以使用 jQuery.noConflict() 将每个库分配给它自己的变量并传递它

```
(function($){

})(yourjQuery) 
```

# java - 如何在servlet中使用json对象返回项目数组以及如何使用jquery显示

> ID：14831985
> 
> 赞同：1
> 
> 时间：2013-02-12T11:54:21.647
> 
> 标签：java, jquery, json, servlets

我需要将一些项目从我的数据库传递到网页。为此，我使用 json 对象将项目从 servlet 传递到 jquery。但我遇到的问题是，

*   如果数据库包含更多元素
*   然后我显然需要使用`ArrayList`.
*   当我使用时，`ArrayList`我不知道将元素传递给`JSON`.

我的代码是：

```
 PrintWriter out = response.getWriter();
    response.setContentType("text/html");
    response.setHeader("Cache-control", "no-cache, no-store");
    response.setHeader("Pragma", "no-cache");
    response.setHeader("Expires", "-1");

    response.setHeader("Access-Control-Allow-Origin", "*");
    response.setHeader("Access-Control-Allow-Methods", "GET");
    response.setHeader("Access-Control-Allow-Headers", "Content-Type");
    response.setHeader("Access-Control-Max-Age", "86400");

    Gson gson = new Gson();
    JsonObject myObj = new JsonObject();

    ArrayList<Commenter> commentInfo;
    try {
        commentInfo = commenting(uname,message,itemId,albumId);
        JsonElement commentObj = gson.toJsonTree(commentInfo);
        boolean nonNullElemExist= true;
        for (Commenter s: commentInfo) {
            if (s == null) {
                nonNullElemExist = false;
                break;
            }
        }
    if(nonNullElemExist == false){
        myObj.addProperty("success", false);
    }
    else {
        myObj.addProperty("success", true);
    }
    myObj.add("commentInfo", commentObj);
    out.println(myObj.toString());                   // I think problem is in this statement

    out.close();
    } catch (ClassNotFoundException | SQLException e) {
        System.out.println( "Error --> " + displayErrorForWeb(e));
    } 
```

方法是：

```
 private ArrayList<Commenter> commenting(String uname,String message,int itemId,int albumId) throws ClassNotFoundException, SQLException {
   ArrayList<Commenter> commentList = new ArrayList<Commenter>();
   Connection conn = null; 
   conn=prepareConnection();
   PreparedStatement stmt = null;    
   String sql = null;

    try {     
        StringBuilder sb1=new StringBuilder(1024);
        sb1.append("insert into ").append(uname.trim()).append("comments values(?,?,?)");
        String sql1=sb1.toString();
        PreparedStatement stmt1 = conn.prepareStatement(sql1);
        stmt1.setString(1,uname);
        stmt1.setString(2,message);
        stmt1.setInt(3,itemId);

        StringBuilder sb=new StringBuilder(1024);
        sb.append("select * from ").append(uname.trim()).append("comments");
        sql=sb.toString();
        stmt = conn.prepareStatement(sql);
       ResultSet rs = stmt.executeQuery();

        while(rs.next()){
            Commenter comment = new Commenter();
            comment.setUname(rs.getString("uname").trim());
            comment.setComment(rs.getString("comment").trim());
            commentList.add(comment);
           }                                                                        

        rs.close();                                                              
        stmt.close();                                                            
        stmt = null;                                                             

        conn.close();                                                            
        conn = null;                                                  

    }                                                              
    catch(Exception e){System.out.println( "Error --> " + displayErrorForWeb(e));}                     

    finally {                                                      

        if (stmt != null) {                                           
            try {                                                        
                stmt.close();                                               
            } catch (SQLException sqlex) {                               
                System.out.println( "Error --> " + displayErrorForWeb(sqlex));         
            }                                                            

            stmt = null;                                           
        }                                                       

        if (conn != null) {                                     
            try {                                                  
                conn.close();                                         
            } catch (SQLException sqlex) {                         
                System.out.println( "Error --> " + displayErrorForWeb(sqlex));
            }                                                      

            conn = null;                                           
        }                                                       
    }             

    return commentList;

} 
```

jquery是：

```
 $.ajax({
       type: "GET",
        url: "Comments",
        data:'comm='+encodeURIComponent(comm)+'&'+'data-id='+encodeURIComponent(dataid)+'&'+'data-alid='+encodeURIComponent(dataalid),
        dataType: "json",
        success: function( data, textStatus, jqXHR) 
        {
            if(data.success)
            {
       /*   $.each(data, function(i, item)
                     {*/

                    var newcommhtml = '<div id="c0'+thecid+'" class="cnew clearfix"> <section class="c-author">';
                    newcommhtml = newcommhtml + '<h3>Anonymous</h3>';
                    newcommhtml = newcommhtml + '<span class="pubdate">'+month+' '+day+', '+year+'</span> </section>';
                    newcommhtml = newcommhtml + '<section class="c-content">';
                    newcommhtml = newcommhtml + '<img src="images/green-avatar.png" alt="avatar" width="80" height="80" class="ava">';
                    newcommhtml = newcommhtml + '<p>'+nl2br(data.commentInfo.comment)+'   '+nl2br(data.commentInfo.itemId)+'</p> </section></div>';
                    /*newcommhtml = newcommhtml + '<p>'+nl2br(item.commentInfo.comment)+'   '+nl2br(item.commentInfo.itemId)+'</p> </section></div>';
                    });
                    */                  
                    var thelm = "#c0"+thecid;
                    commwrap.append(newcommhtml);
                    $(thelm).hide().fadeIn('slow');

                    setTimeout(function() { $(thelm).addClass('green'); }, 800);

                    $("#comm").val("");
                    thecid++;

                    if(errorspan.html() != null) {
                        errorspan.remove();
                    }
            }

          },
     error: function(jqXHR, textStatus, errorThrown)
      {
         alert("error"+errorThrown);
         console.log("Something really bad happened " + textStatus);
      },
}); 
```

如果我使用`$each()` `success`块根本不起作用。

请任何人告诉我如何为这种情况做这些事情............谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:25:08.757

使用 XStream 将您的对象转换为 JSON。这很简单。您可以从它的网站获得教程。XStream 有各种驱动程序。对于 JSON，您必须使用 JettisonMappedXmlDriver。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:12:11.497

使用方法将 ArrayList 转换为 json `new Gson().toJson(object)`。现在您将获得一个 jsonarray 的 jsonobjects 然后您可以像 json 一样将它传递给服务器，反之亦然。

数组列表是一个集合，所以遵循这个

```
Type collectionType = new TypeToken<Collection<Integer>>(){}.getType();
Collection<Integer> ints2 = gson.fromJson(json, collectionType); 
```

[gson 用户指南](https://sites.google.com/site/gson/gson-user-guide#TOC-Collections-Examples)

要使用 jquery 显示 json，请点击此链接。 [使用 jQuery 通过 JSON 显示数据的最佳方式](https://stackoverflow.com/questions/327231/best-way-to-display-data-via-json-using-jquery)

# css - 如何更改锚链接仅文本的颜色？

> ID：14831999
> 
> 赞同：13
> 
> 时间：2013-02-12T11:55:27.637
> 
> 标签：css, hover

我有这样的代码

```
<a href="#" title="some title">
  <span>Do not change color of this text</span>
  Want to only change this text color
</a> 
```

我只想更改锚标记文本的颜色，而不是`span`. 使用 CSS 而不是 jQuery。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-12T11:57:31.927

创建样式以确保应用正确的颜色：

```
a {
    color: #00f;
}
p, a span {
    color: #000;
} 
```

这会将普通文本 ( `p`) 的颜色和内部链接 ( `a span`) 的颜色设置为黑色，而将链接中其余文本的颜色设置为蓝色。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T11:58:08.033

您必须应用两种样式 - 一种适用于您的 a 标签，另一种适用于您的 span 标签：

```
a {color:#000000; /*new colour*/}
a span {color:#aaaaaa; /*originalcolour*/} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:58:21.040

我假设您有一个用于锚点的 CSS。为什么不为锚点内的跨度创建第二个 CSS？

```
a span {color:#000000;} 
```