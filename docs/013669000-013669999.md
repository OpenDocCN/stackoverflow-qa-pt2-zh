# StackOverflow 问答 13669000-13669999

# android - Android 片段兼容性问题

> ID：13669007
> 
> 赞同：0
> 
> 时间：2012-12-02T11:50:59.367
> 
> 标签：android, crash, android-fragments, compatibility

我有片段的主要活动

```
public class MainActivity extends Activity implements OnClickListener {

    Fragment fragment;
    Button btn1, btn2,btn3;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        btn1 = (Button)findViewById(R.id.button1);
        btn2 = (Button)findViewById(R.id.button2);

        FragmentManager fm = getFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();

        MyFragment myfragment = new MyFragment();
        ft.add(R.id.myFragment, myfragment);
        ft.commit();
    }

    @Override
    public void onClick(View v){

        Fragment fragment = null;
        if(v == btn1){
            fragment = new Fragment1();
        }else if(v == btn2){
            fragment = new Fragment2();
        }

        FragmentTransaction transcation = getFragmentManager().beginTransaction();
        transcation.replace(R.id.myFragment,fragment);
        transcation.addToBackStack(null);
        transcation.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_CLOSE);
        transcation.commit();
    }
} 
```

和三个类似的简单片段

```
public class Fragment2 extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate( R.layout.fragment2, container, false);
    }
} 
```

它适用于 HC 和 ICS，但如果我尝试在旧版本 2.3 上运行。它崩溃了....我也添加了支持的库，但不起作用。还有一个问题......请向我推荐有助于从正常开发转向片段的好教程或视频。

# cuda - 使用推力执行傅里叶变换

> ID：13669019
> 
> 赞同：9
> 
> 时间：2012-12-02T11:52:03.713
> 
> 标签：cuda, fft, thrust

Thrust 是一个用于开始编程 CUDA 的惊人包装器。我想知道有什么东西可以用推力封装 NVIDIA CUFFT 还是我们需要自己实现？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-18T21:10:01.933

这是一个很晚的答案，只是为了从未回答的列表中删除这个问题。

使用带推力的 cuFFT 应该非常简单，唯一要做的就是将 cuFFT`thrust::device_vector`转换为原始指针。下面报告一个非常简单的例子：

```
#include <iostream>
#include <cufft.h>
#include <stdlib.h>
#include <thrust/host_vector.h>
#include <thrust/device_vector.h>
#include <thrust/generate.h>
#include <thrust/transform.h>

int main(void){

    int N=4;

    // --- Setting up input device vector    
    thrust::device_vector<cuFloatComplex> d_in(N,make_cuComplex(1.f,2.f)), d_out(N);

    cufftHandle plan;
    cufftPlan1d(&plan, N, CUFFT_C2C, 1);

    cufftExecC2C(plan, thrust::raw_pointer_cast(d_in.data()), thrust::raw_pointer_cast(d_out.data()), CUFFT_FORWARD);

    // --- Setting up output host vector    
    thrust::host_vector<cuFloatComplex> h_out(d_out);

    for (int i=0; i<N; i++) printf("Element #%i; Real part = %f; Imaginary part: %f\n",i,h_out[i].x,h_out[i].y);

    getchar();
} 
```

# javascript - 从另一个文件中获取数据

> ID：13669021
> 
> 赞同：0
> 
> 时间：2012-12-02T11:52:45.400
> 
> 标签：javascript, html

我想将`<script></script>`hello.html 上的标签中的数据获取到 index.html。我怎样才能做到这一点？

索引.html：

```
<head>
<script>
// some codes
</script>
</head>

<body>
<div>
<!-- result will be come here -->
</div>
</body>

</html> 
```

你好.html：

```
<html>

<head>
</head>

<body>
<script>
document.writeln("hello world");
</script>
</body>

</html> 
```

**编辑**：我想要“document.writeln（“hello world”）；” 部分，它必须是字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:58:04.887

将脚本单独保存为`myScript.js`，然后您可以在带有脚本包含标记的两个 html 文件中使用它！`<script src="myScript.js"></script>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:58:12.460

将脚本移动到一个新文件中，例如`script.js`，然后将其添加到两个文件中：

```
<script src="script.js"></script> 
```

# spring - 将spring bean注入抽象类

> ID：13669027
> 
> 赞同：1
> 
> 时间：2012-12-02T11:53:14.890
> 
> 标签：spring, abstract-class, autowired

我正在尝试将 spring bean 注入（自动装配）到抽象类，但它似乎不起作用。

```
public abstract class BaseEntity {

    @Autowired(required = true)
    protected SecurityProvider securityService;

    public BaseEntity() {
    }
} 
```

和注入的类：

```
@Component
public class SecurityService extends SecurityProviderImpl implements SecurityProvider {

    @Autowired
    public SecurityService(ICipherDescriptor cipherDescriptor) {
    super(cipherDescriptor);
    }
} 
```

SecurityService 被初始化得很好（我可以在调试时看到它）但是从 BaseEntity 继承的类不能使用注入的 SecurityService 因为它是空的（由于某种原因没有被注入）。

我也尝试通过 XML 来实现，将 BaseEntity 定义为抽象：

```
<bean id="baseEntity" abstract="true" class="com.bs.dal.domain.BaseEntity">
    <property name="securityService" ref="securityService"/>
</bean>

<bean id="securityService" class="com.bs.dal.secure.SecurityService">
    <constructor-arg ref="cipherDescriptor" />
</bean> 
```

但仍然没有成功。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:26:30.690

我想我知道这里出了什么问题。我正在尝试将 spring bean 注入实体 - 这是不可能的（除非您使用 aspectJ 编织），因为实体不是由 Spring 实例化/管理的。有道理，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T15:12:43.927

如果您`BaseEntity`也被spring实例化，您只需向`parent`bean定义添加一个属性以将其链接到您的`BaseEntity`定义，如下所示：

```
<bean id="baseEntity" abstract="true" class="com.bs.dal.domain.BaseEntity">
   <property name="securityService" ref="securityService"/>
</bean>

<bean id="derivedEntity" parent="baseEntity" class="com.bs.dal.domain.DerivedEntity"/>

<bean id="securityService" class="com.bs.dal.secure.SecurityService">
   <constructor-arg ref="cipherDescriptor" />
</bean> 
```

简而言之，这种定义的两个关键部分是父类的**抽象**属性和子类的**父**属性。

# django - django 表单向导 - 在 vi ews.py（WizardView 子类）中定义 form_list 和 condition_dict，不在 urls.py 中

> ID：13669033
> 
> 赞同：0
> 
> 时间：2012-12-02T11:54:43.910
> 
> 标签：django, django-class-based-views, django-formwizard

今天我开始在 django 1.4 中使用表单向导。该功能似乎很好，但根据文档，需要将`form_list`（和`condition_dict`，必要时）传递给`as_view`方法（这意味着`urls.py`）而不是在子类中提供它`WizardView`

这意味着在内部编写一些逻辑，`urls.py`而不是`views.py`我认为违反 django 模式的逻辑，因为视图模块应该负责视图逻辑。

我最终得到以下结果：

```
# views.py
class MyWizard(SessionWizardView):
    _form_list = (
        ('init', forms.MyWizardFormInit), 
        ('newuser', forms.MyWizardFormNewUser),
    )
    _condition_dict = {
        'newuser': lambda wizard: (wizard.get_cleaned_data_for_step('init') or {}).get('existing_user') == 'False'
    } 
```

和`urls.py`：

```
url(.., MyWizard.as_view(MyWizard._form_list, condition_dict = MyWizard._condition_dict)), 
```

这看起来真的很*愚蠢*和*可笑*。是否有任何正确的方法来**防止在 urls.py 中声明逻辑**同时**保持 DRY**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T12:37:11.953

稍微干净一点的版本可能如下所示：

**视图.py**

```
my_wizard_view = MyWizard.as_view(MyWizard._form_list, condition_dict=MyWizard._condition_dict)) 
```

**网址.py**

```
url(r'^my_wizard/$', my_wizard_view, name='my_wizard') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:56:55.900

我还没有使用过 WizardWiev，但是您是否尝试过在 WizardView 子类本身上设置这些属性，而不是通过 url 定义传递它们？或者，提交该文件，您是否尝试过重载该`WizardView.get_form`方法？

# iphone - iOS - 从本地通知启动时托管对象上下文崩溃应用程序

> ID：13669034
> 
> 赞同：0
> 
> 时间：2012-12-02T11:54:49.853
> 
> 标签：iphone, ios, nsmanagedobjectcontext

我有一个创建本地通知的应用程序。当应用程序关闭（即未运行或在后台）时，它会在从通知启动时崩溃。我已经设法弄清楚哪一行导致应用程序崩溃（在下面的评论中说明）：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
// Override point for customization after application launch.
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackOpaque];

// Initialise the main view
self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];

// Initialise a Navigation Controller
UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:self.viewController];

// Set the ViewController as the rootViewController of the window
self.window.rootViewController = nav;

// Colour the navigation bar
nav.navigationBar.tintColor = [UIColor colorWithRed:0.07f green:0.59f blue:0.94f alpha:1];

// Set the background
if (isPhone568) {
    self.window.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"santa_back5.png"]];
}
else {
    self.window.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"santa_back.png"]];
}

[self.window makeKeyAndVisible];
[nav release];

self.viewController.managedObjectContext = [self managedObjectContext];

application.applicationIconBadgeNumber = 0;

// Handle launching from a notification
UILocalNotification *localNotif = [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];
if (localNotif) {
    NSPredicate *predicate = [NSPredicate
                              predicateWithFormat:@"(dateCreated like %@)",
                              [localNotif.userInfo objectForKey:@"dateCreated"]];

    LetterViewController *letterView = [[LetterViewController alloc] initWithNibName:@"LetterViewController" bundle:nil];

    // Get the letter to pass on
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription
                                   entityForName:@"Letter" inManagedObjectContext:[self managedObjectContext]];
    [fetchRequest setEntity:entity];
    [fetchRequest setPredicate:predicate];
    NSError *error;
//
// THIS NEXT LINE IS CRASHING THE APP
//
    NSArray *letters = [[self managedObjectContext] executeFetchRequest:fetchRequest error:&error];
    Letter *myLetter = [letters objectAtIndex:0];

    letterView.theLetter = myLetter;
    //[myLetter release];

    // Pass the selected object to the new view controller.
    [self.viewController.navigationController pushViewController:letterView animated:YES];
    [letterView release];
    [fetchRequest release];
}

return YES;
} 
```

我正在使用以下 3 个函数来获取托管对象上下文、持久存储协调器和托管对象模型：

```
//Explicitly write Core Data accessors
- (NSManagedObjectContext *) managedObjectContext {
if (managedObjectContext != nil) {
    return managedObjectContext;
}
NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
if (coordinator != nil) {
    managedObjectContext = [[NSManagedObjectContext alloc] init];
    [managedObjectContext setPersistentStoreCoordinator: coordinator];
}
return managedObjectContext;
}

- (NSManagedObjectModel *)managedObjectModel {
if (managedObjectModel != nil) {
    return managedObjectModel;
}
managedObjectModel = [[NSManagedObjectModel mergedModelFromBundles:nil] retain];

return managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
if (persistentStoreCoordinator != nil) {
    return persistentStoreCoordinator;
}
NSURL *storeUrl = [NSURL fileURLWithPath: [[self applicationDocumentsDirectory]
                                           stringByAppendingPathComponent: @"<Project Name>.sqlite"]];
NSError *error = nil;
persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc]
                              initWithManagedObjectModel:[self managedObjectModel]];
if(![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType
                                             configuration:nil URL:storeUrl options:nil error:&error]) {
    /*Error for store creation should be handled in here*/
}

return persistentStoreCoordinator;
}

- (NSString *)applicationDocumentsDirectory {
return [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
} 
```

任何解决此问题的帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:34:29.583

几件事。您似乎在显示的主线程上使用 Core Data，如果是这样，所有交互都必须在此线程上。您应该在某天更新代码以使用使用块的新“执行”API。

由于您的 localNotif 代码现在在启动委托中执行了一些繁重的工作，因此它在一段时间内不会返回，iOS 可能会杀死您的应用程序。采用相同的代码并将其放入发布到主队列的调度块中，它应该可以工作。添加一些断言以确保导航控制器属性也存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:42:50.503

感谢你的回答。似乎我的问题出在谓词上！它不喜欢我在 where 子句中使用“like”。我将其更改为 = 并且它有效！

# php - 如何在 Doctrine 2 中设置固定实体关系

> ID：13669037
> 
> 赞同：0
> 
> 时间：2012-12-02T11:55:27.273
> 
> 标签：php, symfony, doctrine-orm

我有抽象实体（App - 基础核心）：

```
namespace App\Bundles\AppBundle\Entity;

abstract class App extends ContainerAware implements AppInterface
{
// .....
} 
```

和自我实体：

```
namespace AppRus\Bundles\AppBundle\Entity;

use Doctrine\ORM\Mapping as ORM,
    App\Bundles\AppBundle\Entity\App as BaseApp;

/**
 * App
 *
 * @ORM\Table(name="apps")
 * @ORM\Entity(repositoryClass="AppRus\Bundles\AppBundle\Entity\AppRepository")
 */
class App extends BaseApp
{
  // ....
} 
```

和实体进行控制修订：

```
namespace App\Bundles\AppBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * AppHistory
 *
 * @ORM\Table(name="apps_history")
 * @ORM\Entity(repositoryClass="App\Bundles\AppBundle\Entity\AppHistoryRepository")
 */
class AppHistory
{
    /**
     * @var integer
     *
     * @ORM\ManyToOne(targetEntity="App\Bundles\AppBundle\Entity\App")
     * @ORM\JoinColumn(name="app_apple_id", referencedColumnName="apple_id")
     */
    private $app;
} 
```

我无法创建关系 AppHistory#app 到 App#apple_id

当我将实体设置为抽象类 App 时，学说创建一个新表“App”当我将 MappedSuperClass 设置为抽象类 App 时，出现错误：[http ://docs.doctrine-project.org/en/latest/reference/inheritance -mapping.html#mapped-superclasses](http://docs.doctrine-project.org/en/latest/reference/inheritance-mapping.html#mapped-superclasses)

如何创建从 AppHistory 到抽象核心 App 的关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:51:00.840

我的理解是这是不可能的。我认为您做事的方式不对，至少对于 Doctrine2 而言。

首先，从您提到的 Doctrine2 文档中：

> 映射的超类是一个抽象或具体的类，它为其子类提供持久的实体状态和映射信息，但它本身不是实体。

您无法创建与非实体的关系！

要解决您当前的问题（〜版本控制〜在学说中），请查看[Github 上的 EntityAudit](https://github.com/simplethings/EntityAudit)。

# java - 自定义验证器停止 spring 内部验证

> ID：13669040
> 
> 赞同：2
> 
> 时间：2012-12-02T11:55:33.113
> 
> 标签：java, spring-mvc

我创建了一个验证器来验证任何类的日期字段。我在我的控制器中自动装配了它的实例，并在我的控制器方法中调用了它的 validate()。一切正常。

```
@RequestMapping(value = "/{pan}",method=RequestMethod.POST)
public ModelAndView submitIfPANpresents(@ModelAttribute("command") @Valid  PortfolioBean portfolio,bindingResult result){
    dateValidator.validate(portfolio, result);
    if(result.hasErrors()){
        System.out.println(result.getErrorCount());
        return new ModelAndView("portfolioview");
    }
:
} 
```

现在我在控制器中创建了一个方法来将自定义验证器与 WebDataBinder 绑定。我这样做是希望我不必显式调用 validate() 。

```
@InitBinder
protected void initBinder(WebDataBinder binder) {
    binder.setValidator(dateValidator);
} 
```

仍然一切正常。

现在我评论了从控制器的方法调用自定义验证器的 validate() 并测试了代码。我只能看到自定义验证器设置的错误。Spring 的内部验证停止工作。

我做错了什么或错过了什么？我的需要是，不要显式调用 validate() 并将 xml 中的验证器绑定为额外的验证器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:09:30.370

当您这样做时`binder.setValidator(dateValidator);`，您将 Spring 的验证器替换为您的`dateValidator`. 这就是 Spring 的内部验证停止工作的原因。

因此，如果您希望两个验证器都工作，您应该删除此行并保留`dateValidator.validate(...)`. 如果你想拥有一个额外的验证者，你别无选择。

# c# - 在 WCF 中使用泛型时客户端的奇怪类型

> ID：13669044
> 
> 赞同：3
> 
> 时间：2012-12-02T11:55:56.780
> 
> 标签：c#, wcf

我对 WCF 比较陌生，并且使用以下两种方法创建了一个服务：

```
[ServiceContract]
public interface IDB
{
    [OperationContract]
    DbResponse<Student> AddStudent(string pnr, string firstName, string lastName, string userName, string email, string cls);

    [OperationContract]
    DbResponse<List<Student>> FindStudent(string searchString);
} 
```

DbResponse 是一个通用类：

```
[DataContract]
public class DbResponse<T>
{
    [DataMember]
    public DbStatus Status { get; set; }
    [DataMember]
    public string Message { get; set; }
    [DataMember]
    public T Data { get; set; }
} 
```

其中 DbStatus 是一个枚举：

```
[DataContract]
public enum DbStatus
{ 
    [EnumMember]
    Ok,
    [EnumMember]
    Warning,
    [EnumMember]
    Failed
}; 
```

这工作正常，除了在客户端，因为将通用属性添加到 DbResponse，我不能再使用以下内容：

```
string filter = "Foo";
DBClient dbc = new DBClient();
WebInterface.Services.DbResponse response = dbc.FindStudent(filter); 
```

相反，根据 Intellisense，我必须使用看起来很奇怪（而且丑陋）的类型：

```
WebInterface.Services.DbResponseOfArrayOfStudentL1_PcKk2u response = dbc.FindStudent(filter); 
```

如果有人能解释为什么会发生这种情况以及我是否（以及如何）可以使用“更清洁”的类型名称，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T14:07:48.383

好的，我发现可以通过使用 DataContract 属性中的 Name 属性来覆盖哈希（http://jeffbarnes.net/blog/post/2007/05/10/wcf-serialization-and-generics.aspx）：

```
[DataContract(Name = "DbResponse{0}"]
public class DbResponse<T>
{
    [DataMember]
    public DbStatus Status { get; set; }
    [DataMember]
    public string Message { get; set; }
    [DataMember]
    public T Data { get; set; }
} 
```

这仍然会输出例如 DbResponseOfArrayOfStudent，但至少没有丑陋的哈希，所以我想我将不得不忍受它。

# python - 异常代码：在 python (opencv) 上运行时出现 c000001d

> ID：13669052
> 
> 赞同：1
> 
> 时间：2012-12-02T11:57:01.863
> 
> 标签：python, opencv

当我在 OpenCV Python 示例中运行人脸检测示例时，它总是在代码输入时崩溃

```
rects = cascade.detectMultiScale(img, scaleFactor=1.3, minNeighbors=4, minSize=(30, 30), flags = cv.CV_HAAR_SCALE_IMAGE) 
```

我使用 Visual Studio，它还显示异常代码：`c000001d`

我在下面附上了问题签名。

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: python.exe
  Application Version:  0.0.0.0
  Application Timestamp:    4f84a6c8
  Fault Module Name:    cv2.pyd
  Fault Module Version: 0.0.0.0
  Fault Module Timestamp:   509430c8
  Exception Code:   c000001d
  Exception Offset: 004d60dc
  OS Version:   6.1.7600.2.0.0.256.1
  Locale ID:    1033
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:31:52.867

我通过将 opencv 2.4.3 降级到 2.4.2 解决了这个问题。

我不是说opencv2.4.3有问题，它可以在另一台电脑上工作，但不是我的电脑。

OpenCV 2.4.2 需要 tbb_debug.dll 但 OpenCV 2.4.3 不需要。我认为这就是 2.4.2 和 2.4.3 之间的区别。也许诀窍在于 tbb_debug.dll 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T12:07:51.503

`c000001d`是非法指令。最常见的原因是二进制文件损坏，例如 DLL，或者在这种情况下是`cv2.pyd`.

它有几种可能被破坏的方式。例如，您可能已将其作为文本文件传输或复制。另一个常见问题是在 32 位硬件上运行 64 位代码文件，或者可能是带有 32 位 python 的 64 位二进制文​​件，或者上述的任何组合。

也可能是您在完全不同的指令集或代码文件格式上运行代码，例如从 ARM 复制代码并期望它在 Intel 上运行，或从 Linux (ELF) 复制到 Windows (PE COFF)。

# grails - Grails 对象不是声明类的实例

> ID：13669053
> 
> 赞同：1
> 
> 时间：2012-12-02T11:57:12.020
> 
> 标签：grails, groovy, grails-orm

当我使用标准进行操作时，出现以下错误。请帮忙。

错误：

```
2012-12-02 19:50:43,678 [http-8080-2] ERROR property.BasicPropertyAccessor  - IllegalArgumentException in class: indiaweatherstation.WeatherStation, getter method of property: id
2012-12-02 19:50:43,683 [http-8080-2] ERROR errors.GrailsExceptionResolver  - Exception occurred when processing request: [GET] /IndiaWeatherStation/
Stacktrace follows:
    java.lang.IllegalArgumentException: object is not an instance of declaring class
        at grails.orm.HibernateCriteriaBuilder.invokeMethod(HibernateCriteriaBuilder.java:1163)
        at indiaweatherstation.CrawlerController$_closure1_closure3.doCall(CrawlerController.groovy:140)
        at indiaweatherstation.CrawlerController$_closure1.doCall(CrawlerController.groovy:19)
        at indiaweatherstation.CrawlerController$_closure1.doCall(CrawlerController.groovy)
        at java.lang.Thread.run(Thread.java:662) 
```

搜索：

```
 def awsdata = AWSData.withCriteria {

                        eq("station", station)
                    and {
                    eq("day",dayObject)
                    }
                    } 
```

领域：

```
class AWSData {

    static hasOne =[station:WeatherStation, day:Day, slp:SLP,
        mslp:MSLP, rain:Rainfall, tempreature:Tempreature, 
        point:DewPoint, windSpeed:WindSpeed, 
        windDir:WindDirection, ptend:PTEND, sshm:SSHM]

    int id
    String tmax
    String tmin
    static constraints = {
        station (blank:true, nullable:true)
        day     (blank:true, nullable:true)
        slp     (blank:true, nullable:true)
        mslp    (blank:true, nullable:true)
        rain  (blank:true, nullable:true)
        tempreature (blank:true, nullable:true)
        point (blank:true, nullable:true)
        windSpeed (blank:true, nullable:true)
        windDir (blank:true, nullable:true)
        ptend (blank:true, nullable:true)
        sshm (blank:true, nullable:true)
        tmax (blank:true, nullable:true)
        tmin (blank:true, nullable:true)

    }
}

class WeatherStation {

    static hasOne= [district:District]
    static hasMany = [AWSData:AWSData, ARGData:ARGData,
        HWSRData:HWSRData, radiationData:RadiationData]
    int id
    String name
    String lat
    String lng

    static constraints = {

        AWSData (blank:true, nullable:true)
        ARGData (blank:true, nullable:true)
        HWSRData (blank:true, nullable:true)
       radiationData (blank:true, nullable:true)
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T12:11:36.477

你的`eq`陈述不应该都在里面`and`吗？

```
def awsdata = AWSData.withCriteria {
  and {
    eq( "station", station )
    eq( "day", dayObject )
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:25:24.543

原因是我期待一个元素，所以应该使用

```
def awsdata = AWSData.createCriteria().get {
                    and {
                        eq( "station", station)
                        eq( "day", dayObject )
                    }
                } 
```

# entity-framework - 外键表映射

> ID：13669056
> 
> 赞同：0
> 
> 时间：2012-12-02T11:57:37.870
> 
> 标签：entity-framework, ef-code-first

我的网站上有 3 个实体，它们有很多组合。

我将创建以下层次结构：

1.  每个用户都有一组用户角色。
2.  每个 UserRole 都有固定的 PermissionRecords 集合
3.  每个 PermissionRecord 都有一个 PermissionRecordPrivileges 字段，该字段因用户而异。

我想获得用户的权限（获得permissionRecord 和UserRole 集合非常简单）。据我了解，我需要创建一个合并以下数据的表：UserId、PermissionRecordId、PermissionPrivilegesId（3 个创建主键的外键）

如何使用 EF 5（或更早版本）执行此操作？

编码：

```
public class BaseEntity
{
    public int Id { get; set; }
}
public class User:BaseEntity
{
   public virtual ICollection<UserRole> UserRoles{get;set;}
}

public class UserRole:BaseEntity
{
   public ICollection<PermissionRecord> PermissionRecords { get; set; }
}

public class PermissionRecord : BaseEntity
{
    public PermissionRecordPrivileges Privileges { get; set; }
}

public class PermissionRecordPrivileges : BaseEntity
{
    public bool Create { get; set; }

    public bool Read { get; set; }

    public bool Update { get; set; }

    public bool Delete { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:10:24.700

您的术语“创建表”有点令人困惑。表是一个数据库对象。我假设您的意思是客户端的数据结构。要收集 a`User`的权限，您可以执行以下操作：

```
var privileges = (from u in context.Users
                 from ur in u.UserRoles
                 from pr in ur.PermissionRecords
                 where u.UserId = id
                 select ur.Privileges).Distinct(); 
```

其中`id`是一个包含 a`User`的 id 的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:56:41.550

您必须创建您的**实体模型类**，如下所示。

***注意：***当您使用**实体框架代码优先**时，需要维护**约定（命名和单数/复数）**。如下所示**：**

 ******实体模型**

```
public class UserRole
 {

     public int Id { get; set; }

     public virtual ICollection<PermissionRecord> PermissionRecords { get; set; }

 }

public class PermissionRecord 
 {
    public int Id { get; set; }

    public virtual PermissionRecordPrivilege PermissionRecordPrivilege { get; set; }
 }

public class PermissionRecordPrivilege
 {

    public int Id { get; set; }

    public bool Create { get; set; }

    public bool Read { get; set; }

    public bool Update { get; set; }

    public bool Delete { get; set; }

 } 
```

您的**表格**应如下所示**：**

**表**

```
PermissionRecordPrivileges

Id            int    NotNull
Create        bit   AllowNull
Read          bit   AllowNull
Update        bit   AllowNull
Delete        bit   AllowNull

PermissionRecords

Id                             int    NotNull

PermissionRecordPrivilege_Id   int    NotNull

UserRole_Id                    int    NotNull

UserRoles

Id            int    NotNull 
```

*我希望这对你有帮助。祝你好运。*****

# file-upload - Blueimp jQuery 文件上传 - 如何更改上传目录

> ID：13669063
> 
> 赞同：3
> 
> 时间：2012-12-02T11:58:19.280
> 
> 标签：file-upload, blueimp

如何更改上传目录？

我想动态更改文件上传目录

fg ：对于每个用户，将文件上传到她/他的文件夹

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T00:47:00.213

您可以将目录存储在`$_SESSION`变量或 a`$_COOKIE`中，然后在文件 /php/index.php 中获取保存的值

```
$uplDir = $_SESSION["uploadDirectory"].'/;

$option = array(
    /* some options */
    'upload_dir' => $uplDir,

    /* .... */
);
$upload_handler = new UploadHandler($option); 
```

附言。记得`session_start();`一开始

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-16T12:48:30.473

您可以通过 js 文件中的表单数据中的参数发送它

```
 <script>
    $(function () {
     $('#fileupload').fileupload({
     dataType: 'json',
     formData: [{ name: 'custom_dir', value: '/save/file/here/' }],
     done: function (e, data) {
     $.each(data.result.files, function (index, file) {
     $('<p/>').text(file.name).appendTo(document.body);
     });
     }
     });
    });
 </script>
   //========================= 
```

在上传处理程序定义中

```
 require('UploadHandler.php');
    $custom_dir = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['custom_dir'];
    $upload_handler = new UploadHandler(array('upload_dir' => $custom_dir)); 
```

# java - 在java中返回一个int是原子操作吗？

> ID：13669065
> 
> 赞同：5
> 
> 时间：2012-12-02T11:58:38.007
> 
> 标签：java, multithreading, atomic

```
// is this atomic? 
public int size() {
    return count;
} 
```

请注意，可以通过其他线程中的其他方法更改计数。

我知道整数读写是原子的，但我不确定返回。

让我感到震惊的是，由于某种原因[ArrayBlockingQueue](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/concurrent/ArrayBlockingQueue.java#ArrayBlockingQueue.size%28%29)锁定了它的 size() 方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-02T12:00:31.293

如您所知，对原语的读取和写入`int`是原子的。返回基本上是阅读并放置在内存中的其他位置。由于读取是原子的，因此不会发生竞争条件。您可以返回 的上一个或下一个值`int`。

使用`lock`in`ArrayBlockingQueue`可能是由于可见性原因。`count`如果在此期间修改了队列，则变量不是`volatile`这样，如果没有某种锁定，则不能保证*看到*. `count`但是由于读写是原子的，至少你永远不会看到最年轻的 16 位旧值和最旧的 16 位新值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T12:20:28.190

读取原语（long 和 double 除外）是原子的。

但是假设有一个同步方法正在修改 count 的值；在这种情况下，您的阅读可能是原子的，也可能不是原子的。

```
 synchronized void changeCount(){
     //modifying value of count
 } 
```

因此，在这种情况下，您还应该同步您的读取方法或最小声明计数为 volatile。这将确保读取也是原子的，并返回正确且**一致**的值

# javascript - 如何使用 navigator.app.exitApp()？

> ID：13669066
> 
> 赞同：5
> 
> 时间：2012-12-02T11:58:55.397
> 
> 标签：javascript, android, html, cordova

我有一个内置 html5 和 phonegap for android 的应用程序，通过按退出按钮调用以下函数（JavaScript）：

```
function close_window() {
    if (confirm("Exit?")) {
        navigator.app.exitApp()
    }
} 
```

带有“退出？”消息的窗口 出现了，但是单击确定时应用程序没有关闭，我们如何关闭它？

这是使用 navigator.app.exitApp() 的方式吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T12:41:56.883

我认为您在通知电话时失踪了`confirm`。

请尝试以下代码，它在我的应用程序中运行良好：

```
document.addEventListener("exitButton", function(){ 
              navigator.notification.confirm(
                        'Do you want to quit', 
                        onConfirmQuit, 
                        'QUIT TITLE', 
                        'OK,Cancel'  
                    );
            }, true); 

    function onConfirmQuit(button){
       if(button == "1"){
        navigator.app.exitApp(); 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-03T13:30:22.547

```
document.addEventListener("deviceready", onDeviceReady, false);

   function onDeviceReady() {
    checkConnection();
}

function checkConnection() {
    var networkState = navigator.connection.type;
   if(navigator.connection.type == Connection.NONE) {        
    alert("No network connection");
}
} 
```

# asp.net - ASP.NET n 层应用程序验证/业务逻辑

> ID：13669072
> 
> 赞同：0
> 
> 时间：2012-12-02T11:59:28.770
> 
> 标签：asp.net, validation, n-tier-architecture, business-logic

我有几个关于在普通 N 层架构应用程序中使用业务逻辑层的快速问题。

我正在开发我最后一年的大学项目，并使用 Web 表单表示层、业务逻辑层、数据访问层和数据层。

1) 您对执行用户输入验证的最佳位置有何看法？对我来说，将表示层与客户端验证的 jQuery 验证和服务器端验证的 ASP.NET 验证控件一起使用是有意义的 - 但是很多文章都指出最好在 BLL 中执行验证？

2) 目前我的 BLL 相当薄，90% 的类只是充当 DAL 的接口，但我知道最终会有更多。在我的 DAL 中，每个实体都有多个选择命令，例如 GetAllProducts()、GetProductsByCategoryID(categoryID)、GetProductByProductID(productID)、GetProductsBySupplierID(supplierID)。这似乎涉及低级别的业务逻辑，即从技术上讲，应该只是一个 GetAllProducts() 函数，可以使用 BLL 中的代码对其进行过滤。

您对此的最佳做法有何看法？一个在 BLL 中进行过滤的 select 语句，还是根据需要获取所需数据的多个 select 语句？我想总是选择每个产品都会在大型应用程序上占用大量资源，但至少在层之间存在真正的逻辑分离。

干杯，斯图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:06:06.437

我不认为你需要有bll。你只需要有两层。WebUI 和 DAL。使用 linq to sql 或 lambda 表达式与数据实体模型将是完美的秘诀。

一个在 BLL 中进行过滤的 select 语句，还是根据需要获取所需数据的多个 select 语句？

如果您需要使用所有图层，您应该在 bll 中进行过滤，因为它是您的最终专业人士。当你重用你的代码时它会很有帮助。在 BLL 中制作过滤器。

# mysql - 无法更改 MySql 例程

> ID：13669074
> 
> 赞同：4
> 
> 时间：2012-12-02T11:59:36.790
> 
> 标签：mysql, database-permissions

我正在使用我的主数据库用户登录 Phpmyadmin 页面/工作台远程访问应用程序，但我遇到了权限问题。

当我试图改变我存储在数据库中的例程时，这一切都开始了。当试图从工作台应用程序中更改这些例程时，什么都没有发生。我可以调用这些例程并执行它们，但不能更改或访问脚本。

我在不同的论坛中搜索了几个小时，并获得了有关授予访问命令的一些答案，但随后我再次遇到权限问题，错误 #1142，命令拒绝用户（主用户）。

我真的很迷失在这里，并且已经失去了几个小时的工作才能获得我的例程脚本。

最后一点 - 当我与同一个用户连接但来自不同的远程连接（不同的 IP 地址）时，我创建了这些例程。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-31T11:30:02.170

这是我如何解决此问题的解决方案：

1）将“mysql”数据库添加到用户，您登录时使用

建议：现在您可以更改函数和程序

2）为您的用户添加全局权限“SUPER”

建议：否则，如果您保存过程/函数，您将收到以下错误：“错误 1227：访问被拒绝；您需要（至少一个）此操作的超级权限”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:57:15.477

CREATE DEFINER = 'admin'@'localhost' PROCEDURE account_count() SQL SECURITY INVOKER BEGIN SELECT 'Number of account:', COUNT(*) FROM mysql.user; 结尾;

请参见上面的示例。

您需要使用超级用户登录并根据您的新用户名和主机名更改过程中的定义器参数。创建的同一定义者可以编辑存储过程。

# javascript - 在图片上画线 - Javascript？

> ID：13669077
> 
> 赞同：4
> 
> 时间：2012-12-02T11:59:46.867
> 
> 标签：javascript, graph, drawing, line

我的页面上有一些图表。当用户将光标拖到图片上时，我想在图表上显示一条水平线。

![在此处输入图像描述](../Images/7a0a12a9dc6b2e704a3383db764f6f74.png)

上面的一个是起点，后者显示了当用户将光标指向图形时会发生什么。当它在图像上时，该线应与光标保持在同一水平线上。

例如，这可以通过 Javascript 实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T12:02:17.487

它是，例如，您需要一个位于光标 Y 值处的 div 框，其绿色边框为 1px。位置必须设置为绝对。但是你不能直接在图像中绘画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T14:37:05.457

您可以使用 D3，并基于 svg 来绘制图形和悬停线，您还可以添加其他图形组件进行交互，例如滑块选择子间隔放大，更改标签等。

以此为例进行开发： http: [//mpf.vis.ywng.cloudbees.net/](http://mpf.vis.ywng.cloudbees.net/)

（可以拖动黄色条，点击图例；源码点击github fork me）

# java - 将 MouseListener 或 MouseMotionListener 添加到我的 JLabel 中，该 JLabel 位于类似棋盘的 Jpanel 内

> ID：13669080
> 
> 赞同：0
> 
> 时间：2012-12-02T12:00:09.407
> 
> 标签：java, jframe, jpanel, mouseevent, jlabel

我真的不知道该怎么办。我首先创建了一个实现 MouseMotionListener 和 MouseListener 的新类，它的构造函数是 JLabel：

```
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import javax.swing.JLabel;

public class motion implements MouseMotionListener, MouseListener {

    motion(JLabel im) {
        label1 = im;
    }

    @Override
    public void mousePressed(MouseEvent e) {
        if (e.getSource() == label1) {
            drag = true;
        } 
    } 

    @Override
    public void mouseReleased(MouseEvent e) {
        drag = false;
    }

    @Override
    public void mouseDragged(MouseEvent e) {
        if (drag == true) {
            mouseX = e.getX();
            mouseY = e.getY();
            label1.setBounds(mouseX, mouseY, 
                    label1.getWidth(), label1.getHeight());
        }
    }

    public void mouseMoved(MouseEvent e) {}
    public void mouseEntered(MouseEvent e) {}
    public void mouseExited(MouseEvent e) {}
    public void mouseClicked(MouseEvent e) {}  
    private JLabel label1;
    private int mouseX;
    private int mouseY;
    private boolean drag = false;

} 
```

这是我董事会的代码。目前这些碎片无法移动。我在每个 if 语句中都有一行来添加 MouseMotionListener--picLabel.addMouseMotionListener(new motion(picLabel))--但这不起作用。

```
import java.awt.*;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.*;

   public class Checkerboard {
       public static void main (String args[]) throws IOException {
         JFrame checkerBoard = new JFrame();
         checkerBoard.setSize(700,700);
         checkerBoard.setTitle("Lines of Action");
         checkerBoard.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
         int row = 8;
         int col = 8;
         Container pane = checkerBoard.getContentPane();
         pane.setLayout(new GridLayout(row,col));
         Color checker;   
         for (int x = 1; x <= (row * col); x++) {
            int altr = 0;
            altr = (x-1) % col;
            altr += (x-1) / col;

            if (altr % 2 == 0) {
               checker = Color.darkGray;
            } else {
               checker = Color.lightGray;
            }

            JPanel panel = new JPanel();
            panel.setPreferredSize(new Dimension(400/row, 400/col));
            panel.setBackground(checker);
            if ((x < 8 && x > 1) || (x < 64 && x > 57)) {
                BufferedImage myPicture = 
            ImageIO.read(new  File("C:\\Users\\srjames90\\Downloads\\BlackPiece.png"));
                JLabel picLabel = new JLabel(new ImageIcon( myPicture ));
                picLabel.addMouseMotionListener(new motion(picLabel));
                panel.add(picLabel);
            } else if(check(x)) {
                BufferedImage myPicture = 
            ImageIO.read(new File("C:\\Users\\srjames90\\Downloads\\WhitePiece.png"));
                JLabel picLabel = new JLabel(new ImageIcon( myPicture ));
                panel.add(picLabel);
            }
            pane.add(panel);
         }
         checkerBoard.setVisible(true);
      }

      static boolean check(int y) {
           return y == 9 || y == 16 || y == 17 || y == 24 || y == 25
                   || y == 32 || y == 33 || y == 40 || y == 41 || y == 48
                       || y == 49 || y == 56;
       }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:38:08.183

要解决此问题，请将侦听器添加到 Motion 类`JLabel`

```
Motion(JLabel im) {
    label1 = im;
    label1.addMouseListener(this);
} 
```

另请阅读[Java 编程风格指南](http://geosoft.no/development/javastyle.html#General)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T15:52:18.280

`MouseListener`并`MouseMotionListener`定义两组不同的事件。为了让您的听众同时获得这两个集合，您必须同时注册这两个集合......使用类似这样的东西：

```
Motion m = new Motion(picLabel);
picLabel.addMouseMotionListener(m); //will cause m to get mouseMoved and mouseDragged calls
picLabel.addMouseListener(m); //will cause m to get mousePressed, mouseReleased, mouseEntered, mouseExited, etc. 
```

还值得注意的是，在您发布的代码片段中，您根本没有在您的`WhitePiece.png`作品中添加任何侦听器。

# wpf - 如何动态创建自定义标签类的对象并将其添加到WPF中的画布中？

> ID：13669081
> 
> 赞同：0
> 
> 时间：2012-12-02T12:00:14.960
> 
> 标签：wpf, label, dynamically-generated

我发现了一个类，`Label`其中添加了拖动和调整大小的功能`Label`。而且我不知道如何动态地（例如通过按下显示“创建标签”的按钮）创建该类的对象并将其添加到`Canvas`我的 WPF 应用程序中。

我还想在将其添加到`Canvas`.

它是如何以正确的方式完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:08:01.433

创建一个新的 Label 实例，设置它的一些属性，设置它在 Canvas 上的位置并将其添加到 Canvas 的 Children 集合中：

```
var label = new Label
{
    Width = 200,
    Height = 50,
    Content = "A Label"
};

Canvas.SetLeft(label, 100);
Canvas.SetTop(label, 100);

canvas.Children.Add(label); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T12:08:01.810

```
 //adding new MyLabel(class of Label)
   MyLabel lbl = new MyLabel();
   lbl.Text = "test text";
   lbl.Height = 27;
   lbl.Name="testLabel";
   canvas.Children.Add(lbl); 
```

关于创建后按名称获取元素，您可以在此处阅读：http: [//msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findname.aspx](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findname.aspx)

# c++ - 如何在c ++中将计算分解为两个双精度和一个字符

> ID：13669086
> 
> 赞同：0
> 
> 时间：2012-12-02T12:01:00.047
> 
> 标签：c++, calculator

我在一个格式为`x operator y`. 如何将此字符串分解为数字的两个双精度数和运算符的一个字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T12:09:21.343

这对你有用吗？

```
string line = "1 operator 2";
stringstream ss(line);
double n1, n2;
string op;
ss >> n1;
ss >> op;
ss >> n2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:02:28.590

您需要解析字符串或对其进行标记 - 将字符串拼接成单独的数据片段：

> 1.  解析字符串
> 2.  查找数据
> 3.  提取数据
> 4.  转换为 x & y 为双精度
> 5.  根据操作员做...用x和y。（例如使用 switch 语句）

我提出的两种方法可以轻松解决您的问题。你可以简单地找到'+'字符，然后得到那个字符的左边是x，然后得到那个字符的右边是y。然后将这些提取的字符串转换为双精度。注意：这只有在字符串中只有一个“x operator y”时才可以接受。否则你可能会*抢到*比你想要的更多的东西。

然后还有另一种使用二叉树的方法。*本质上你可以用二叉树*制作一个计算器，虽然它很先进，但我现在不推荐给你。[http://en.wikipedia.org/wiki/Binary_tree](http://en.wikipedia.org/wiki/Binary_tree)

使用第一个建议的解决方案的评论示例：

```
#include <iostream> //used for std::cout
#include <string>   //used for std::string
#include <sstream>  //used to convert a std::string to a double
#include <cctype>   //used for checking if a character is a digit(0-9.)

int main() 
{
    //declare the source string to parse
    std::string source = "2+6";

    //output variables
    //operator is a keyword, so just use op.
    char op=' ';     
    double x=0, y=0;

    //parse source. iterate through each character starting at 0 (first character)
    for(int i = 0; i < source.size(); i++) {

        //check to see if its a character - ie if its not a number or . its an operator!
        //(can be any *character* really - however must be only *1 character* long) and it must also not be a space.
        if(!isdigit(source[i] || ' ')) {

            //create the strings to put the copied data in
            std::string xs, ys; //x and y strings

            //get the left and right of the operator
            //you could use a for loop, your choice.

            //copy before the operator.
            xs = source.substr(0, i);

            //get the operator
            op = source[i]; // by using the [i] - will just get a character from a string at [..]

            //skip the operator by adding 1 - get the right hand side
            ys = source.substr(i+1, source.size()-1);

            //create the string stream used for converting the data to a double (its like std::cout and std::cin - uses the << and >>)
            //use the stringstream xxs(..) <- to initialise the stringstream with our string above. 
            std::stringstream xss(xs); //xss = xs string
            std::stringstream yss(ys); //'   ' '  '

            //now the string stream does the work for us. just feed the xss & yss string streams(which are our x & y strings) into the doubles using the >> operator, converting the data types.
            xss >> x; //string TO double
            yss >> y;

            //don't want to search for any more characters now. finish up.
            break;
        }
    }

    std::cout << "x  = " << x  << std::endl;
    std::cout << "op = " << op << std::endl;
    std::cout << "y  = " << y  << std::endl;

    std::system("pause");
    return 0;

} 
```

如果您只想查看裸代码，则无需注释：

```
#include <iostream>
#include <string>
#include <sstream> 
#include <cctype>  

int main()
{

    std::string source = "2+6";
    char op=' ';     
    double x=0, y=0;

    for(int i = 0; i < source.size(); i++) {
        if(!isdigit(source[i]) || ' ') {

            std::string xs, ys;

            xs = source.substr(0, i);
            op = source[i];
            ys = source.substr(i+1, source.size()-1);

            std::stringstream xss(xs);
            std::stringstream yss(ys); 

            xss >> x;
            yss >> y;

            break;
        }
    }

    std::cout << "x  = " << x  << std::endl;
    std::cout << "op = " << op << std::endl;
    std::cout << "y  = " << y  << std::endl;

    std::system("pause");

    return 0;
} 
```

This code works with no spaces, or spaces, and can be expanded upon- instead of finding a single character as the operator, find 1-3 characters. Hope I helped :)

# objective-c - 核心图：使用 scaleToFitPlots 时未绘制 x 轴标签

> ID：13669087
> 
> 赞同：1
> 
> 时间：2012-12-02T12:01:14.070
> 
> 标签：objective-c, ios, ios5, core-plot

**问题：**使用自动缩放 ( ) 时，我无法让 Core Plot (1.1) 为我的**x**`[plotSpace scaleToFitPlots:[graph allPlots]`轴绘制自动标签。

**我尝试过的：**我更改了偏移量和填充的值，但这并没有改变结果。但是，当关闭自动缩放时（不自动使用`[plotSpace scaleToFitPlots:[graph allPlots]]`和设置**y比例，** **x**轴的自动标记起作用。

**问题**：Core Plot 中是否有错误或我做错了什么？我将不胜感激任何帮助！

谢谢！

这就是我设置图表的方式：

```
CPTBarPlot *barPlot = [CPTBarPlot 
   tubularBarPlotWithColor:[CPTColor blueColor] horizontalBars:NO];
barPlot.baseValue       = CPTDecimalFromInt(0);
barPlot.barOffset       = CPTDecimalFromFloat(0.0f); // CPTDecimalFromFloat(0.5f);
barPlot.barWidth        = CPTDecimalFromFloat(0.4f);
barPlot.barCornerRadius = 4;
barPlot.labelOffset = 5;
barPlot.dataSource      = self;
barPlot.delegate        = self;

graph = [[CPTXYGraph alloc]initWithFrame:self.view.bounds];
   self.hostView.hostedGraph = graph;

graph.paddingLeft   = 40.0f;
graph.paddingTop    = 30.0f;
graph.paddingRight  = 30.0f;
graph.paddingBottom = 50.0f;

[graph addPlot:barPlot];

graph.plotAreaFrame.masksToBorder = NO;
graph.plotAreaFrame.cornerRadius  = 0.0f;
graph.plotAreaFrame.borderLineStyle = borderLineStyle;

double xAxisStart = 0;
CPTXYAxisSet *xyAxisSet = (CPTXYAxisSet *)graph.axisSet;
CPTXYAxis *xAxis = xyAxisSet.xAxis;
CPTMutableLineStyle *lineStyle = [xAxis.axisLineStyle mutableCopy];
lineStyle.lineCap = kCGLineCapButt;
xAxis.axisLineStyle = lineStyle;
xAxis.majorTickLength = 10;
xAxis.orthogonalCoordinateDecimal   = CPTDecimalFromDouble(yAxisStart);
xAxis.paddingBottom = 5;

xyAxisSet.delegate = self;
xAxis.delegate = self;
xAxis.labelOffset = 0;

xAxis.labelingPolicy = CPTAxisLabelingPolicyAutomatic;

[plotSpace scaleToFitPlots:[graph allPlots]];

CPTMutablePlotRange *yRange = plotSpace.yRange.mutableCopy;
[yRange expandRangeByFactor:CPTDecimalFromDouble(1.3)];
plotSpace.yRange = yRange;
NSInteger xLength = CPTDecimalIntegerValue(plotSpace.xRange.length) + 1;

plotSpace.xRange = [CPTPlotRange
plotRangeWithLocation:CPTDecimalFromDouble(xAxisStart) 
   length:CPTDecimalFromDouble(xLength)] ; 
```

## 编辑

埃里克的回答有所帮助。现在绘制了 x 标签，但在错误的 y 位置（偏移）。如何将它们绘制在 x 轴正下方（请参阅下面的屏幕截图）：）![在此处输入图像描述](../Images/6a02857b85e61b113c55f57d1341e3bf.png)![在此处输入图像描述](../Images/8f22960028166ac500555b1f2992644c.png)。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T17:01:40.617

在缩放绘图空间后设置`orthogonalCoordinateDecimal`轴。只是猜测，但`yAxisStart`用于定位 x 轴的值可能超出缩放范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-30T15:43:47.407

我遇到了同样的问题，并通过在 (-1,-1) 的 (x,y) 值处添加另一个带有 lineWidth:0.0 和 clearColor 的图来修补它。scaleToFit 包含此图并显示我的标签和轴。

# javascript - 带有 Spritely 的 jQuery 精灵

> ID：13669089
> 
> 赞同：1
> 
> 时间：2012-12-02T12:01:42.297
> 
> 标签：javascript, jquery, css, animation, spritely

在被一个问题困住了 2 天之后，我终于找到了一种从几帧制作动画的简单得多的方法……它叫做[Spritely](http://www.spritely.net/)。

### [到目前为止我所拥有的](http://jsfiddle.net/reveries/9Dt7n/9/)

```
var play_frames = 23;

$('#door_hov').hover(
    function() {
        $('#door').sprite({
            fps: 24,
            no_of_frames: 23,
            play_frames: play_frames
        });
        play_frames = 22;
    },
    function() {
        $('#door').sprite({
            fps: 24,
            no_of_frames: 23,
            play_frames: 22,
            rewind: true
        });
    }
);​ 
```

*   当您将鼠标悬停时，它会启动动画。

*   当您鼠标移出时，它会倒带动画。

### 问题

如果在动画结束之前鼠标悬停，或者在倒带结束之前鼠标悬停，它会走得太远并且不同步。

### 我想做的事

*   在鼠标移出时，仅倒退到第 1 帧并停在那里。
*   在鼠标悬停时，只播放到最后一帧并停在那里。
*   如果我在第 x 帧鼠标悬停（在动画期间），我希望它从第 x 帧倒回到第 1 帧。
*   如果我将鼠标悬停在第 x 帧（倒带期间），我希望它从第 x 帧播放到最后一帧。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:06:53.963

如果我理解你的话，那么你想要这样的[东西](http://jsfiddle.net/9Dt7n/13/)。注意：在`play_frames`.

```
var iFrames = 23,
    iFps = 24,
    bRewind = false,
    iStartFrame = -1,
    bAnimating = false,
    stopAndRewind = function(oAnim) {
        iStartFrame = ~iStartFrame ? -1 : iFrames - 2;
        bRewind = !bRewind;
        bAnimating = false;
        oAnim.spStop();
    };
$("#door").on("mouseenter mouseleave", function() {
    var iCurFrame = iStartFrame;
    if ($._spritely.instances && $._spritely.instances[$(this).prop("id")])
    {
        if (bAnimating)
        {
            iCurFrame = $(this).spGet("current_frame");
            stopAndRewind($(this));
        }
        $(this).destroy();
    }
    bAnimating = true;
    $(this).sprite({
        fps: iFps,
        no_of_frames: iFrames,
        start_at_frame: iCurFrame,
        rewind: bRewind,
        on_frame: (function() {
            var o = {},
                i = 1;
            if (!bRewind)
            {
                i = iFrames - 2;
            }
            o[i] = stopAndRewind;
            return o;
        })()
    });
});​ 
```

# git - git am 从分支到 master

> ID：13669090
> 
> 赞同：1
> 
> 时间：2012-12-02T12:01:46.447
> 
> 标签：git, version-control

我正在与我的一所大学一起在 git 工作。我在一个分支上工作，他在 master 上工作。我在我的分支上做了一些与他的文件相关的工作，我决定给他发送一个补丁文件。我创建了补丁`git format-patch`，并将其发送给他。当他尝试使用`git am`他得到以下消息应用补丁时：`previous release directory`

这可能是因为补丁来自不同的分支。

有没有办法让他使用主分支上的补丁？

注意：我使用的是`git am`，而不是`git apply`保留为码头生成的提交 ID。我仍然希望提交者在他的本地存储库中成为我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:47:02.650

在处理[无法正确应用的补丁](http://www.pizzhacks.com/bugdrome/2011/10/deal-with-git-am-failures/)时，请考虑使用两种解决方案之一：（
来自[bugdromer](http://www.pizzhacks.com/bugdrome/author/bugdromer/)的文章）：

* * *

> 处理它的最简单方法是：
> 
> *   `git am --abort`,
> *   手动应用补丁`patch -p1 < PATCH`，
> *   亲手解决冲突，
> *   最后提交`git commit -a`.
> 
> 但是在这种情况下，您将不得不重写提交消息，这不是很好。还有一个更聪明的方法。

* * *

> 可以在 中找到对应的补丁文件`.git/rebase-apply`，并命名为“ `0001`”（补丁所在目录的名称最近发生了变化，这个是用1.7.4.1测试的）。
> 在此刻：
> 
> *   **您可以`git apply`用于应用补丁，这是补丁命令的 git 等效项**，
> *   并以通常的方式修复冲突文件（检查`.rej`文件，将它们与冲突文件进行比较，最后将修复的文件添加到索引中）：
> 
> 例子：

```
$ git apply PATCH --reject
$ edit edit edit
$ git add FIXED_FILES
$ git am --resolved 
```

> 你就完成了！
> 换句话说，由于`git am`没有改变索引，你需要
> 
> *   **`git apply --reject`**补丁（存储在 中`.git/rebase-apply`），
> *   手动解决冲突，
> *   添加更改的文件和
> *   最后告诉 git 你解决了这个问题。
> 
> 这种情况下的好处是：
> 
> *   您无需重新编辑提交消息，
> *   如果您正在应用一组补丁（即您正在使用`git am PATCHES`，`PATCHES`邮箱在哪里），则不必一次`git abort`又一次`run git am`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:03:52.077

尝试以下`--3way`选项`git am`：

> ```
> -3, --3way
>    When the patch does not apply cleanly, fall back on 3-way merge if
>    the patch records the identity of blobs it is supposed to apply to
>    and we have those blobs available locally. 
> ```

# objective-c - 动态地将数据库值“反映”到 UIView 元素

> ID：13669091
> 
> 赞同：0
> 
> 时间：2012-12-02T12:01:50.830
> 
> 标签：objective-c, sqlite, uiview, uibutton

我有一个包含一系列 UIView 的 UIScrollView。每个 UIView 包含 UIImageView 和几个 UIButtons。这些 UIView 代表“书”，它们的数据存储在 sqlite 数据库中。

封面类：

```
// Cover
_coverImageView = [[UIImageView alloc] initWithFrame:CGRectMake(SHELF_CELL_PADDING_X, SHELF_CELL_PADDING_Y, SHELF_CELL_COVER_WIDTH, SHELF_CELL_COVER_HEIGHT)];
[self addSubview:_coverImageView];

// Label
_coverTitle = [[UILabel alloc] initWithFrame:CGRectMake(SHELF_CELL_PADDING_X, SHELF_CELL_COVER_HEIGHT, SHELF_CELL_TITLE_WIDTH, SHELF_CELL_TITLE_HEIGHT)];
_coverTitle.backgroundColor = [UIColor clearColor];
_coverTitle.textAlignment = UITextAlignmentCenter;
_coverTitle.lineBreakMode = UILineBreakModeWordWrap;
_coverTitle.numberOfLines = 0;
//_coverTitle.font = [_coverTitle.font fontWithSize:10];
_coverTitle.font = [UIFont fontWithName:@"Arial-BoldMT" size:10];
[self addSubview:_coverTitle];

// New Label
_labelNew = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 35, 6)];
[self addSubview:_labelNew];

// Favourite Button
_favouriteButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
_favouriteButton.frame = CGRectMake(SHELF_CELL_COVER_WIDTH - 5, -5, 23, 23);
[_favouriteButton addTarget:self action:@selector(favouriteButtonTouched) forControlEvents:UIControlEventTouchDown];
[self addSubview:_favouriteButton];

// Download Button
_downloadButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
_downloadButton.frame = CGRectMake(SHELF_CELL_COVER_WIDTH - 5, SHELF_CELL_COVER_HEIGHT - 20, 23, 23);
[_downloadButton addTarget:self action:@selector(downloadButtonTouched) forControlEvents:UIControlEventTouchDown];
[self addSubview:_downloadButton]; 
```

在“图书列表视图”中，我只是为每个 UIView(BookCover) 设置了实际数据，如下所示：

```
scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, SHELF_SEARCH_HEIGHT + SHELF_SECTION_HEIGHT + SHELF_HEIGHT + SHELF_SECTION_HEIGHT + 5, self.view.frame.size.width, SHELF_HEIGHT)];
NSUInteger BookCoverCount = [pamphletList count];
for (int i=0; i<BookCoverCount; i++) {
    CGFloat coverX = i * 100;

    BookCover *bookCover = [[BookCoverView alloc] initWithFrame:CGRectMake(coverX, 10, SHELF_CELL_WIDTH, SHELF_CELL_HEIGHT)];
    bookCover.backgroundColor = [UIColor clearColor];
    // Set an image for cover...
    NSDictionary *bookData = [bookList objectAtIndex:i];
    NSString *bookId = [bookData objectForKey:@"id"];
    NSString *bookImageName = [bookData objectForKey:@"image"];
    NSString *bookImageDir = [NSString stringWithFormat:@"%@/%@/%@", documentDir, BOOK_FOLDER, bookId];
    UIImage *bookImageFile = [UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/%@", bookImageDir, bookImageName]];
    bookCover.coverImageView.image = bookImageFile;
    bookCover.coverTitle.text = [bookData objectForKey:@"title"];
    bookCover.userInteractionEnabled = YES;
    bookCover.tag = i;

    [scrollView addSubview:bookCover];
} 
```

每次用户触摸它们时，我都需要更改“收藏按钮”和“下载按钮”图像并运行类似“UPDATE book SET is_favourite = 1 WHERE book_id = x”的 sql。

我应该如何实现这些，何时应该运行 sql 以将用户的操作反映到“书”对象？我已经建立了数据库并有一个类来处理 sql。再一次，我觉得问这样的问题太愚蠢了。但是作为一个objective-c初学者，这里专业人士的建议对我帮助很大。

任何帮助，将不胜感激。
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:41:37.717

经过一些尝试，我用最简单的方法做到了：

```
- (void) favouriteButtonTouched:(id)sender 
{
   UIButton *clickedButton = (UIButton*)sender;
   int bookId = clickedButton.tag;

   [db openDB];
   NSDictionary *bookData = [db getBookById:bookId];
   if (bookData != nil) 
   {
       if ([[bookData objectForKey:@"is_fav"] integerValue] == 0) {
           [_favouriteButton setImage:[UIImage imageNamed:@"star.png"] forState:UIControlStateNormal];
           [db setFavouriteForId:bookId setValue:1];
       } 
       else 
       {
           [_favouriteButton setImage:[UIImage imageNamed:@"star_empty.jpg"] forState:UIControlStateNormal];
           [db setFavouriteForId:bookId setValue:0];
       }
   }
   [db closeDB];

} 
```

我仍然不知道这是否是更改 UIView 元素（在本例中为 UIButton）的好习惯，每次按下按钮时动态调用 DB 操作。但无论如何，这是我现在的解决方案......

# python - dos和unix中的python文件

> ID：13669092
> 
> 赞同：0
> 
> 时间：2012-12-02T12:01:57.133
> 
> 标签：python, linux

我有一些 python 文件`windows`，我`gentoo`通过 samba 将它们传输到我的。

我检查他们的模式是可执行的，我用`./xxx.py`它来运行它，但得到一个错误：

> ： 没有相应的文件和目录

我很困扰它没有提示什么文件不在此处。

但是当我使用时`python xxx.py`，它可以以正确的方式运行。

然后我`set ff`在vim中使用检查CR字符，发现它是`dos`，然后我用`set ff=unix`它来设置它，现在它可以通过使用运行`./xxx.py`

但我不知道为什么它可以在什么`python xxx.py`时候使用`ff=dos`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T12:11:04.277

Windows 行结尾是 CRLF 或`\r\n`.

Unix 简单地使用`\n`.

当操作系统读取您的 shebang 行时，它会看到`#!/usr/bin/python\r`. 它无法运行此命令。

从 unix shell 中查看此行为的一种简单方法是`$(echo -e 'python\r')`（尝试`python\r`作为命令运行）。此输出也将类似于`: command not found`。

Windows 下的许多高级代码编辑器都支持以 unix 行结尾进行本机保存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T12:16:01.653

DOS 文件以 CR+LF 结束行，Unix 文件仅以 LF 结束。这意味着当 Unix 读取您的文件以找出可执行文件的名称时，该可执行文件的名称以 CR 结尾。像这样：

```
#!/usr/bin/python

print("Blah!") 
```

当我运行时，我得到：

```
$ ./test.py 
bash: ./test.py: /usr/bin/python^M: bad interpreter: No such file or directory 
```

在您的情况下发生的情况是 CR 字符（上面的 ^M）没有打印出来，而是由您的终端“执行”，即光标将返回到行首。因此， ^M 之前的所有内容都会被覆盖：

```
$ ./test.py 
```

：错误的解释器：没有这样的文件或目录

这就是为什么您不能执行以 Unix 结尾的 DOS 文件的原因。

任何甚至远程的现代源代码控制系统都会为您处理这个问题，并在您签出源代码时更改文件结尾。

# c++ - 如何在成员函数上使用 std::async？

> ID：13669094
> 
> 赞同：41
> 
> 时间：2012-12-02T12:02:15.083
> 
> 标签：c++, multithreading, c++11, std

如何对成员函数进行 std::async 调用？

例子：

```
class Person{
public:
    void sum(int i){
        cout << i << endl;
    }
};

int main(int argc, char **argv) {
    Person person;
    async(&Person::sum,&person,4);
} 
```

我想打电话来总结异步。

```
Person p;
call async to p.sum(xxx) 
```

我不知道我是否可以用 std::async 做到这一点。不想使用升压。寻找单行异步调用方式。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-02T12:04:05.530

像这样的东西：

```
auto f = std::async(&Person::sum, &p, xxx); 
```

或者

```
auto f = std::async(std::launch::async, &Person::sum, &p, xxx); 
```

where`p`是一个`Person`实例并且`xxx`是一个`int`.

这个简单的演示适用于 GCC 4.6.3：

```
#include <future>
#include <iostream>

struct Foo
{
  Foo() : data(0) {}
  void sum(int i) { data +=i;}
  int data;
};

int main()
{
  Foo foo;
  auto f = std::async(&Foo::sum, &foo, 42);
  f.get();
  std::cout << foo.data << "\n";
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-02T12:05:26.733

有几种方法，但我发现使用 lambda 是最清楚的，如下所示：

```
int i=42;
Person p;
auto theasync=std::async([&p,i]{ return p.sum(i);}); 
```

这将创建一个`std::future`. 对于一个完整的例子，我有一个完整的例子，包括一个可以异步的 mingw 设置：

[http://scrupulousabstractions.tumblr.com/post/36441490955/eclipse-mingw-builds](http://scrupulousabstractions.tumblr.com/post/36441490955/eclipse-mingw-builds)

您需要确保 p 是线程安全的，并且 &p 引用在加入异步之前有效。（您也可以使用共享指针保存 p，或者在 c++14 中，使用 unique_ptr 甚至将 p 移动到 lambda 中。）

# database - 保护和取消从应用程序到数据库的数据

> ID：13669097
> 
> 赞同：0
> 
> 时间：2012-12-02T12:02:20.170
> 
> 标签：database, security, jpa, encryption, jpa-2.0

在我基于 spring-maven-jpa 的 Web 应用程序中，一些数据必须在存储到数据库之前进行加密，然后在从数据库中汇集时解密回来。

所以我创建了我的加密服务，现在我想知道什么应该是最好的实现。

从 OO POV 来看，我认为每个实体都应该知道自己保护和不保护自己。这导致我将我的加密器注入到一个抽象的基础实体中：

```
public abstract class BaseEntity {

    @Autowired(required = true)
    protected SecurityProvider securityService;

    public BaseEntity() {
    }

    /**
     * secure the entity (if required) using the securityService
     */
    @PrePersist
    @PreUpdate
    protected abstract void secure();

    /**
     * un-secure the entity (if required) using the securityService
     */
    @PostLoad
    protected abstract void unsecure();

    /*--- Getters & Setters ---*/

    public SecurityProvider getSecurityService() {
    return securityService;
    }

    public void setSecurityService(SecurityProvider securityService) {
    this.securityService = securityService;
    }
} 
```

如您所见，我试图通过@PrePersist、@PreUpdate 和@PostLoad 回调来实现这一点。

目前我在注入加密器时遇到了一些问题，所以我看不到一路测试。

问题是 - 它看起来像一个好习惯吗？你能提出改进或更好的方法吗？

更新：

在运行了一些测试之后，看起来@PrePersist 和@PreUpdate 注释工作得很好，每个实体在写入数据库之前就被加密了。但是@PostLoad 似乎没有像我预期的那样工作。我认为每次我从数据库中汇集一个实体时它都会运行，但由于某种原因该方法没有被调用。我对@PostLoad 的想法有误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:11:53.013

“命令”设计模式非常适合这一点。基本上，您将拥有一个名为“SecurityClass”的类，其中包含加密和解密方法。

它采用“实体”类型的参数并对它们执行某种类型的加密。使用命令设计模式的优点是任何实体类型的对象都可以被加密，并且不需要继承！

也就是说，使用继承使方法成为 Entity 类的一部分是可以的，但是根据“责任驱动设计”的概念，加密本身是实体的工作，还是某种外部代理的工作?

您可能无法为您的解决方案找到明确的答案，因为它本质上是与数学真理相反的建模。我个人认为你的方式更容易理解，但在你的代码中实现设计模式总是一个好主意。

# database - 我有数千万个密钥，需要快速回答我的数据库中是否存在密钥。我应该使用哪个数据库？

> ID：13669098
> 
> 赞同：2
> 
> 时间：2012-12-02T12:02:20.420
> 
> 标签：database, indexing, key-value

键是长散列，因此数据集不适合 ram。它不是那么大：10-20Gb 但将其存储在 RAM 中对我来说太贵了。我每秒有 100-1000 次查询，询问密钥是否存在，偶尔会有 1-10 次插入。一段时间以来，我一直在使用 mongo，但它似乎无法胜任这项任务，因为它无法控制哪些索引存储到 ram 中，哪些没有，所以它经常碰到硬盘。

我很乐意使用 redis 或类似的东西，但 ram 是瓶颈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:18:36.420

散列您的键并将它们放入关系表或散列表中。这是最简单的解决方案。接下来是使用 Bloom 过滤器，它能够对 99% 甚至更多的访问进行排序（如果密钥*不*存在 - 如果密钥存在，您将不会获得任何东西，因为它可能是误报）。

不知道为什么你的哈希值那么长。你使用什么散列技术？您可能想要切换到 SHA-160 之类的东西，它的输出很小，但（几乎）在密码学上是安全的。

# ruby-on-rails - 为什么模型的创建方法不同，取决于它是直接调用还是通过关联调用？

> ID：13669099
> 
> 赞同：2
> 
> 时间：2012-12-02T12:02:24.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3

`create`如果我在模型的方法中添加一些东西

**note.rb**

```
def self.create p
    p 'in self.create'
    super p
end 
```

**用户.rb**

```
has_many :notes 
```

每当我打电话时它就会运行`Note.create`。但是，如果我调用`create`一个关联，比如`current_user.notes.create`，它就不会运行。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:56:05.097

要重新定义关联`create`方法，您可以将带有新`create`方法的块传递给`has_many`关联：

**用户.rb：**

```
has_many :notes do
  def create
    p '123'
    super
  end
end 
```

# c# - 将 HTML 代码包装在一行中 - 或删除空格和行

> ID：13669100
> 
> 赞同：1
> 
> 时间：2012-12-02T12:02:29.740
> 
> 标签：c#, html, regex, visual-studio, replace

我有一些以 HTML 格式编写的电子邮件模板，我需要在后面的代码中使用它来传递一些值。

你知道在后面的代码中我想将它传递给 Message Body 属性，所以它应该是一行，

是否有任何简单的原因，正则表达式替换或任何其他避免手动格式化的技巧，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:25:41.370

我不确定我是否完全理解你想要做什么。但是，如果您想将某种常量多行文本插入到变量中，则可以使用`@`关键字来完成。

例如，这将编译得很好：

```
 mailMessage.Body = @"<html>
                          <head>
                              <title>Test</title>
                          </head>
                          <body>
                             <div> .... ";

 mailMessage.Subject = .... 
```

当然，应该使用常量，但这只是一个示例。

# javascript - 我可以永久更改 html 按钮的值和标签吗？

> ID：13669106
> 
> 赞同：4
> 
> 时间：2012-12-02T12:02:55.960
> 
> 标签：javascript, asp.net, html

我正在制作一个简单的个人管理系统，它会根据您单击的活动（按钮）跟踪您昨天所做的事情。活动（按钮）应该是可编辑的，我可以使用 jquery 轻松完成，但即使我重新加载页面，我也希望它能够永久更改。

```
<div id='action-container'>
<div class='actions'>
<button id='action1' class="action" data-value="Wash Dishes">Wash Dishes</button>
<button>Edit Button 1</button></div>
</div> 
```

如果有办法，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:04:50.960

如果您想将状态保存在服务器上，那么您可以将状态保存在服务器可访问的隐藏字段中，并在回发时访问该字段并将状态保存在您想要的位置。如果要在客户端上保存状态，可以使用[客户端存储](http://www.w3.org/TR/webstorage/)

**在 html 中**

```
<input type="hidden" runat="server" id="hdnstate" /> 
```

**在 JavaScript 中**

```
document.getElementById('<%= hdnstate.ClientId %>').value = "stateinfo"; 
```

在后面的代码中

```
string strState = hdnstate.Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T12:07:27.133

您可以使用 cookie（用于少量信息）或（在现代浏览器上）[本地存储](http://www.w3.org/TR/webstorage/)，两者都存储状态客户端（在浏览器中）。

对于集中式存储，您需要将其存储在自己的服务器上，或者与具有[丰富 API](https://developers.google.com/google-apps/app-apis)和功能集的[Google Apps或](https://developers.google.com/google-apps/)[DropBox](http://www.dropbox.com)或其他任何东西集成。

# python - 谷歌应用引擎启动器上的应用程序错误

> ID：13669110
> 
> 赞同：1
> 
> 时间：2012-12-02T12:03:28.233
> 
> 标签：python, google-app-engine, python-2.7

在谷歌应用引擎启动器上运行应用程序时出现此错误。这是我得到的错误。我已经尝试重新安装，但它没有解决错误。请告诉我我要去哪里穿？！

```
<type 'exceptions.ImportError'> Python 2.7.3: C:\Python27\pythonw.exe
Sun Dec 02 11:43:06 2012
A problem occurred in a Python script. Here is the sequence of function calls leading up to the error, in the order they occurred.

 C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in _HandleRequest(self=<google.appengine.tools.dev_appserver.DevAppServerRequestHandler instance>)
   2988         outfile = cStringIO.StringIO()
   2989         try:
=> 2990           self._Dispatch(dispatcher, self.rfile, outfile, env_dict)
   2991         finally:
   2992           self.module_manager.UpdateModuleFileModificationTimes()
self = <google.appengine.tools.dev_appserver.DevAppServerRequestHandler instance>, self._Dispatch = <bound method DevAppServerRequestHandler._Dispat...v_appserver.DevAppServerRequestHandler instance>>, dispatcher = <google.appengine.tools.dev_appserver.MatcherDispatcher object>, self.rfile = <socket._fileobject object>, outfile = <cStringIO.StringO object>, env_dict = {'APPENGINE_RUNTIME': 'python', 'APPLICATION_ID': 'dev~rprpfind', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8081', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'B6589FC6', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.3', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8081', ...}
 C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in _Dispatch(self=<google.appengine.tools.dev_appserver.DevAppServerRequestHandler instance>, dispatcher=<google.appengine.tools.dev_appserver.MatcherDispatcher object>, socket_infile=<socket._fileobject object>, outfile=<cStringIO.StringO object>, env_dict={'APPENGINE_RUNTIME': 'python', 'APPLICATION_ID': 'dev~rprpfind', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8081', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'B6589FC6', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.3', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8081', ...})
   2857           dispatcher.Dispatch(app_server_request,
   2858                               outfile,
=> 2859                               base_env_dict=env_dict)
   2860         finally:
   2861           request_file.close()
base_env_dict undefined, env_dict = {'APPENGINE_RUNTIME': 'python', 'APPLICATION_ID': 'dev~rprpfind', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8081', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'B6589FC6', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.3', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8081', ...}
 C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in Dispatch(self=<google.appengine.tools.dev_appserver.MatcherDispatcher object>, request=<AppServerRequest relative_url: / path: main.py ...mp', mode 'rb' at 0x0342AE38> force_admin: False>, outfile=<cStringIO.StringO object>, base_env_dict={'APPENGINE_RUNTIME': 'python', 'APPLICATION_ID': 'dev~rprpfind', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8081', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'B6589FC6', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.3', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8081', ...})
    714         forward_request = dispatcher.Dispatch(request,
    715                                               outfile,
=>  716                                               base_env_dict=base_env_dict)
    717 
    718         while forward_request:
base_env_dict = {'APPENGINE_RUNTIME': 'python', 'APPLICATION_ID': 'dev~rprpfind', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8081', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'B6589FC6', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.3', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8081', ...}
 C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in Dispatch(self=<google.appengine.tools.dev_appserver.CGIDispatcher object>, request=<AppServerRequest relative_url: / path: main.py ...mp', mode 'rb' at 0x0342AE38> force_admin: False>, outfile=<cStringIO.StringO object>, base_env_dict={'APPENGINE_RUNTIME': 'python', 'APPLICATION_ID': 'dev~rprpfind', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8081', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'B6589FC6', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.3', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8081', ...})
   1791                      memory_file,
   1792                      outfile,
=> 1793                      self._module_dict)
   1794     finally:
   1795       logging.root.level = before_level
self = <google.appengine.tools.dev_appserver.CGIDispatcher object>, self._module_dict = {'Cookie': <module 'Cookie' from 'C:\Python27\lib\Cookie.pyc'>, 'StringIO': <module 'StringIO' from 'C:\Python27\lib\StringIO.pyc'>, 'UserDict': <module 'UserDict' from 'C:\Python27\lib\UserDict.py'>, '__builtin__': <module '__builtin__' (built-in)>, '__future__': <module '__future__' from 'C:\Python27\lib\__future__.pyc'>, '__main__': <module 'main' from 'C:\Users\RoHiT\Desktop\rprp\main.py'>, '_abcoll': <module '_abcoll' from 'C:\Python27\lib\_abcoll.py'>, '_bisect': <module '_bisect' (built-in)>, '_collections': <module '_collections' (built-in)>, '_functools': <module '_functools' (built-in)>, ...}
 C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in ExecuteCGI(config=<AppInfoExternal version=1 source_lang...ne runtime=python api_config=None >, root_path=r'C:\Users\RoHiT\Desktop\rprp', handler_path='main.py', cgi_path=r'C:\Users\RoHiT\Desktop\rprp\main.py', env={'APPENGINE_RUNTIME': 'python', 'APPLICATION_ID': 'dev~rprpfind', 'AUTH_DOMAIN': 'gmail.com', 'CONTENT_LENGTH': '', 'CONTENT_TYPE': 'application/x-www-form-urlencoded', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8081', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3', ...}, infile=<cStringIO.StringO object>, outfile=<cStringIO.StringO object>, module_dict={'Cookie': <module 'Cookie' from 'C:\Python27\lib\Cookie.pyc'>, 'StringIO': <module 'StringIO' from 'C:\Python27\lib\StringIO.pyc'>, 'UserDict': <module 'UserDict' from 'C:\Python27\lib\UserDict.py'>, '__builtin__': <module '__builtin__' (built-in)>, '__future__': <module '__future__' from 'C:\Python27\lib\__future__.pyc'>, '__main__': <module 'main' from 'C:\Users\RoHiT\Desktop\rprp\main.py'>, '_abcoll': <module '_abcoll' from 'C:\Python27\lib\_abcoll.py'>, '_bisect': <module '_bisect' (built-in)>, '_collections': <module '_collections' (built-in)>, '_functools': <module '_functools' (built-in)>, ...}, exec_script=<function ExecuteOrImportScript>, exec_py27_handler=<function ExecutePy27Handler>)
   1691         reset_modules = exec_py27_handler(config, handler_path, cgi_path, hook)
   1692       else:
=> 1693         reset_modules = exec_script(config, handler_path, cgi_path, hook)
   1694     except SystemExit, e:
   1695       logging.debug('CGI exited with status: %s', e)
reset_modules = True, exec_script = <function ExecuteOrImportScript>, config = <AppInfoExternal version=1 source_lang...ne runtime=python api_config=None >, handler_path = 'main.py', cgi_path = r'C:\Users\RoHiT\Desktop\rprp\main.py', hook = <google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>
 C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in ExecuteOrImportScript(config=<AppInfoExternal version=1 source_lang...ne runtime=python api_config=None >, handler_path='main.py', cgi_path=r'C:\Users\RoHiT\Desktop\rprp\main.py', import_hook=<google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>)
   1379 
   1380     if module_code:
=> 1381       exec module_code in script_module.__dict__
   1382     else:
   1383       script_module.main()
module_code = <code object <module> at 034ED4E8, file "C:\Users\RoHiT\Desktop\rprp\main.py", line 1>, script_module = <module 'main' from 'C:\Users\RoHiT\Desktop\rprp\main.py'>, script_module.__dict__ = {'Page': <class 'models.Page'>, 'PythonTerm': <class 'models.PythonTerm'>, 'SearchTerm': <class 'models.SearchTerm'>, 'Video': <class 'models.Video'>, '__builtins__': {'ArithmeticError': <type 'exceptions.ArithmeticError'>, 'AssertionError': <type 'exceptions.AssertionError'>, 'AttributeError': <type 'exceptions.AttributeError'>, 'BaseException': <type 'exceptions.BaseException'>, 'BufferError': <type 'exceptions.BufferError'>, 'BytesWarning': <type 'exceptions.BytesWarning'>, 'DeprecationWarning': <type 'exceptions.DeprecationWarning'>, 'EOFError': <type 'exceptions.EOFError'>, 'Ellipsis': Ellipsis, 'EnvironmentError': <type 'exceptions.EnvironmentError'>, ...}, '__doc__': None, '__file__': r'C:\Users\RoHiT\Desktop\rprp\main.py', '__loader__': <google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, '__name__': 'main', '__package__': None, ...}
 C:\Users\RoHiT\Desktop\rprp\main.py in ()
      4 from google.appengine.ext import db
      5 from models import PythonTerm, Page, SearchTerm, Video
=>    6 from bs4 import BeautifulSoup
      7 from operator import itemgetter
      8 import urllib
bs4 undefined, BeautifulSoup undefined
<type 'exceptions.ImportError'>: No module named bs4 
      args = ('No module named bs4',) 
      message = 'No module named bs4' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:19:11.167

该代码正在尝试导入 BeautifulSoup 库，但找不到它。

确保您已安装[`beautifulsoup4`](http://pypi.python.org/pypi/beautifulsoup4)在本地项目路径中。下载`.tar.gz`压缩包，解压缩并将`bs4`目录复制到您的项目中。

# uiview - 每当单击自定义视图之外时隐藏自定义视图？

> ID：13669111
> 
> 赞同：0
> 
> 时间：2012-12-02T12:03:32.580
> 
> 标签：uiview, ios5.1

嗨，我在自定义视图中创建了带有框架（244,75,142,85）的自定义视图，我放置了 2 个 UIButtons。但是，每当我在自定义视图之外单击时，如何隐藏自定义视图。如果有人知道，请提前告知我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T12:09:19.293

在外部视图中添加大按钮，将框架设置为整个视图。并在 Touchupinside 事件中，创建隐藏整个视图的方法。

# tinymce - 在 TinyMCE 中设置初始表格宽度

> ID：13669114
> 
> 赞同：8
> 
> 时间：2012-12-02T12:04:12.987
> 
> 标签：tinymce

当我使用 TinyMCE 添加新表格时，表格几乎不可见，因为初始宽度只有几个像素。

有什么办法可以改变这个吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-06-01T20:29:28.160

在 TinyMCE 4.x 中，您可以这样做

```
tinymce.init({
plugins: "table",
table_default_styles: {
    width: '50%'
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:34:12.443

打开 table.js，转到第 30 行有内容

```
width = formObj.elements['width'].value; 
```

将其更改为

```
width = formObj.elements['width'].value != "" ? formObj.elements['width'].value : 50; 
```

将 50 替换为您要设置的默认初始表格宽度。

希望能帮助到你！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-24T15:43:43.983

这已经有一段时间了，但对我来说，只需设置一个针对 tinymce 表的 css 规则就足够了

```
/* Set up inital table width and height */
TABLE.mce-item-table TR {
    height: 50px;
}
TABLE.mce-item-table TD {
    width: 100px;
} 
```

# winapi - WIN API 基本绘制程序

> ID：13669115
> 
> 赞同：3
> 
> 时间：2012-12-02T12:04:13.090
> 
> 标签：winapi, mousemove

只是想学习一点Win API。我正在尝试制作一个基本的绘图应用程序，有点像 MS Paint。

目前我试图让一个功能起作用，即当您左键单击并在屏幕上拖动鼠标时，鼠标后面会画一条线。这是我到目前为止所拥有的，但出于某种原因：

1) 线条立即开始绘制，而不是等待左键单击 2) 线条不是实心的，它非常模糊。

```
case WM_MOUSEMOVE:
{

    if(MK_LBUTTON){
    hdc = GetDC(hwnd);
    hPen = CreatePen(PS_SOLID,5,RGB(0, 0, 255));
    SelectObject(hdc, hPen);

    int x = LOWORD(lParam);
    int y = HIWORD(lParam);

    MoveToEx(hdc,x,y,NULL);
    LineTo(hdc, LOWORD(lParam), HIWORD(lParam));
    ReleaseDC(hwnd,hdc);
    }
    else
        break;

} 
```

}

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:07:58.893

在`WM_LBUTTONDOWN`您必须将程序中的变量设置为`true`（“是的，鼠标当前已关闭），`WM_MOUSEMOVE`然后在您的程序中检查该变量并仅将其绘制为`true`.`WM_LBUTTONUP`然后将该变量设置为`false`. （该变量应初始化为 false ）。

# c++ - 合法的dynamic_cast

> ID：13669118
> 
> 赞同：1
> 
> 时间：2012-12-02T12:04:35.657
> 
> 标签：c++, dynamic-cast

我想知道如何解决这个问题。我不明白这个问题在问我什么：

```
dynamic_cast<Y>(new X) 
```

*   要合法吗？
*   大概会成功？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T12:33:39.993

首先，要合法，`Y`必须是指针类型。所以让我们把问题改写为。完成此操作后，如果是一个完整的类类型，并且如果其中一个是多态类型，或者是相同的类型，或者是.`dynamic_cast<Y *cv_qualifiers**>( new X )``X``X``Y``X``X`

`Y`如果与 相同`X`，或者是 的基类， 它将成功`X`。请注意，在这些情况下，`dynamic_cast`具有与 相同的行为`static_cast`，并且实际上对应于隐式转换，因此通常只需编写`new X`，而无需任何强制转换。（有一些特殊情况可能需要强制转换，通常是在将结果传递给`void*`参数时。在这种情况下，我更喜欢 `static_cast`，但在这种情况下，两者的语义完全相同。）

最后，有一种特殊情况（也会成功）： if `X`是多态类型，并且`Y`is 。在这种情况下，*确实与*具有不同的语义，尽管由于返回的 from将具有类型“指向大多数派生类型的指针”，实际效果将是相同的（同样，与隐式转换相同）。`void *cv_qualifiers* *``dynamic_cast` *`static_cast``X*``new X`*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T12:18:40.197

问题应该是：

> 你对 and 的定义有什么看法`X`，`Y`这样下面的代码是合法的，而且转换成功了？

那么答案就相当直截了当：`X`必须是完整的类型才能使`new`表达式合法。动态转换对于向上转换到非虚基是有效的，因此如果`Y`是指向非虚基的指针（可能是 CV 限定的，并且包括指向`X`自身的指针），则转换是有效的*并且*成功。

*此外，在多态*类型（即具有虚函数的类）上，动态转换还有其他有效用途。如果`X`是多态的，那么`Y`可能是[`void *`](https://stackoverflow.com/questions/8123776/are-there-practical-uses-for-dynamic-casting-to-void-pointer)，或者`Y`可能是指向继承层次结构中任何其他类的指针`X`。但是，只有当是指向基址的指针时，转换才会*成功（但是，这个基址可能是虚拟的！）。*`Y`

（现在的推理比任意动态强制转换更简单，因为我们已经知道被继承者的动态类型。一般来说，动态强制转换可以做更复杂的事情。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T12:07:02.840

在不知道 Y 和 X 的情况下，这是完全无法回答的。例如，如果 Y 是 int，那么就是非法的。否则，如果 Y 是指向多态类的指针，它可能会成功，也可能不会，但肯定没有什么“可能”。最后，这是一个相当讨厌的内存泄漏。*

# visual-studio-2012 - 通配符测试容器到 mstest。可执行程序

> ID：13669122
> 
> 赞同：15
> 
> 时间：2012-12-02T12:04:51.257
> 
> 标签：visual-studio-2012, tfs, mstest, tfsbuild, vs-unit-testing-framework

是否可以将通配符 testcontainer 值传递给命令行 mstest.exe 而不是手动硬编码多个 testcontainer 值？如

Mstest.exe /testcontainer：*测试*.dll

我想在我们的 tfs 2012 升级 template.xaml 构建过程中手动调用 mstest 所以它的行为类似于在默认 template.xaml 中运行测试的自动发现方式

如果不能，是否可以将其写入 bat 脚本以遍历给定起始文件夹中的文件夹？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-11T23:28:01.947

`MSTest`测试容器不采用通配符参数（[在此处查找有关命令行选项的参考](http://msdn.microsoft.com/en-us/library/ms182489(v=vs.110).aspx)）。但是，它可以采用多个 /testcontainer 参数，如下所示：

```
mstest.exe /testcontainer:a.test.dll /testcontainer:b.tests.dll 
```

您将不得不以另一种方式提供这些参数。这可以使用批处理文件来完成，但`MSBuild`可能是更好的选择：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="RunMSTest">

<ItemGroup>
    <TestAssemblies Include="**\*Tests.dll"/>
</ItemGroup>

<Target Name="RunMSTest">
    <Exec Condition=" '@(TestAssemblies)' != ''"
          Command="Mstest.exe @(TestAssemblies ->'/testcontainer:&quot;%(RecursiveDir)%(Filename)%(Extension)&quot;', ' ')"
          />
</Target>

</Project> 
```

（感谢[https://stackoverflow.com/a/2770682/62662](https://stackoverflow.com/a/2770682/62662)的转换）

将 i 保存到文件 ( `testall.proj`)，然后使用 运行它`MSBuild testall.proj`，或者创建一个批处理文件来为您运行它。

另请注意，mstest 在一个应用程序域中加载所有提供的测试容器，因此它们需要支持相同的平台目标（任何 cpu、x86、x64）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T13:51:05.430

也可以使用 cmd 文件通过通配符将容器收集到单个变量中，然后在扩展此变量的情况下运行 mstest：

```
call "%VS100COMNTOOLS%vsvars32"
@setlocal enabledelayedexpansion enableextensions
@set list=
@for %%x in (.\Bin\Debug\*Test.dll) do set list=!list! /testcontainer:%%x
@set list=%list:~1%

mstest %list% 
```

# c# - 在 WPF 中播放动画 - 支持的图像格式？

> ID：13669123
> 
> 赞同：4
> 
> 时间：2012-12-02T12:05:06.320
> 
> 标签：c#, .net, wpf, windows

我想在我的 Windows WPF/C# 应用程序中包含一个动画，它是一个加载动画（但比微调器更复杂）。

我原本以为我会使用 GIF，我以为会有一些内置的支持来播放它们，但**[显然不是](https://stackoverflow.com/questions/210922/how-do-i-get-an-animated-gif-to-work-in-wpf)**。

**WPF 是否对任何动画格式有任何内置支持？**

**还是我应该使用上面链接中的方法？**

我的动画包括透明度和各种不透明度设置。

我自己制作了动画，因此我可以将其转换为最好的格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T09:09:53.753

我在最近的 WPF 项目中使用[了这个简单的库](http://wpfanimatedgif.codeplex.com/)。看一看。也许它对你有用。

# javascript - 当我单击谷歌地图中的标记时如何使用java脚本创建右键单击上下文菜单

> ID：13669124
> 
> 赞同：0
> 
> 时间：2012-12-02T12:05:08.730
> 
> 标签：javascript, google-maps, right-click

我开发了一个显示谷歌地图的 javascrit 代码。当我点击地图时，它会创建一个标记。

现在我想要什么，当我点击标记时，应该在点击的位置显示**右键菜单**。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-02T12:44:08.387

试试[GMAP3](http://gmap3.net/)库。它在 googles javascript api 上添加了一个抽象，它允许您以更简单的方式实现上下文菜单等功能。

他们甚至有关于如何使用 GMAP3 创建上下文菜单的教程 - [http://gmap3.net/en/pages/19-demo/](http://gmap3.net/en/pages/19-demo/)

# shadowbox - Shadowbox HTML 内容大小

> ID：13669125
> 
> 赞同：0
> 
> 时间：2012-12-02T12:05:19.517
> 
> 标签：shadowbox

我使用 Shadowbox（http://www.shadowbox-js.com）做一个带有外部页面的模态弹出窗口，但我无法让弹出窗口与内容的大小相匹配，它似乎只是填满了屏幕（有一些边距）

这是我的代码：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<!-- jQuery Latest from Google -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<!-- MM CSS file -->
<link rel="stylesheet" type="text/css" href="css/styles.css" />
<title>Title</title>
<link rel="stylesheet" type="text/css" href="css/shadowbox.css">
<script type="text/javascript" src="js/shadowbox.js"></script>
<script type="text/javascript">
Shadowbox.init();
</script>
</head> 
```

&

```
<a href="test.html" rel="shadowbox;width:985;height:460">more...</a> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:29:40.060

您只需稍微更改代码即可。由此：

```
<a href="test.html" rel="shadowbox;width:985;height:460">more...</a> 
```

为此（包括宽度和高度后的等号，而不是冒号）

```
<a href="test.html" rel="shadowbox;width=985;height=460">more...</a> 
```

[您可以在文档](http://www.shadowbox-js.com/usage.html)中看到一个示例只需在页面上搜索“myswf.swf”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T23:43:25.873

在第 204 行，（使用 netbeans 或其他，右键单击格式）

```
oversized: false 
```

那会帮助你。

上线1671

```
K.height = S.height; 
K.width = S.width; 
```

就这样

# javascript - Chrome 和 Fire Fox 中的 javascript window.history.go(-1) 刷新前一页，但在 Safari 中它工作正常

> ID：13669128
> 
> 赞同：2
> 
> 时间：2012-12-02T12:05:28.660
> 
> 标签：javascript, jquery, html

实际上，我正在尝试从以前的 HTML 页面返回，问题是页面得到刷新，而不仅仅是保留值。这是在 Chrome 和 Firefox 中，但在 Safari 中它工作得很好。

我正在使用 Html 缓存，如下所示。从控制台我可以看到文件被加载到缓存中，我还检查了网络文件正在从缓存中加载。我也有元标记。

```
<html  lang="ko" manifest="cache.manifest">
<head>
      <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
      <meta http-equiv="expires" content="Mon, 10 Jan 2013  00:00:00 GMT" />
      <meta http-equiv="Cache-Control" content="public" >

    </head>
</html> 
```

我也试过这个链接[https://www.webkit.org/blog/516/webkit-page-cache-ii-the-unload-event/](https://www.webkit.org/blog/516/webkit-page-cache-ii-the-unload-event/)但没用。

如何从缓存加载页面而不是单击返回时重新加载页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T12:10:02.000

尝试：

```
Document.location.reload(false) 
```

这应该从缓存中重新加载页面

# java - Gridlayout 仅垂直添加元素，而不是水平添加元素

> ID：13669131
> 
> 赞同：3
> 
> 时间：2012-12-02T12:06:03.083
> 
> 标签：java, grid-layout

我正在为我正在创建的一个简单游戏制作关卡编辑器，在关卡编辑器中，我希望有一些在网格上对齐的按钮和标签。几乎是 gridlayout 的设计目的。

以下代码出于某种我无法理解的邪恶原因，仅在彼此下方添加元素，如下所示：

地图宽度：

地图高度：

地图深度：

它 - 应该 - 看起来像这样：

地图宽度： 地图高度：

地图深度：

我已经尝试了一个小时，但我几乎很难过，这不应该像让它工作那样付出太多的努力，但它确实如此。

```
 private void drawUiElements()
{
    int xLoc = (int) (dim.width * 0.75);
    int yLoc = 0;
    int width = (int) (dim.width * 0.25);
    int height = dim.height;

    JPanel buttonContainer = new JPanel();
    buttonContainer.setLayout(new GridLayout(16, 2, 5, 5));
    buttonContainer.setBounds(xLoc, yLoc, width, height);
    buttonContainer.setName("buttonContainer");

    JLabel labelx = new JLabel("Map Width:");
    JLabel labely = new JLabel("Map Height:");
    JLabel labelz = new JLabel("Map Depth:");

    buttonContainer.add(labelx, "1");
    buttonContainer.add(labely, "2");
    buttonContainer.add(labelz, "3");

    add(buttonContainer);
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T12:24:35.690

使用时不能将组件添加到特定单元格`GridLayout`。您可以将初始行数设置为，`0`以便组件以*rows-first*填充。

```
buttonContainer.setLayout(new GridLayout(0, 2, 5, 5)); 
```

See: [How to Use GridLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)

# performance - C vs Haskell Collat z 猜想速度对比

> ID：13669134
> 
> 赞同：13
> 
> 时间：2012-12-02T12:07:03.360
> 
> 标签：performance, haskell

我第一次真正的编程经验是使用 Haskell。对于我的临时需求，我需要一个易于学习、编码快速且易于维护的工具，我可以说它做得很好。

然而，在某一时刻，我的任务规模变得更大，我认为 C 可能更适合他们，而且确实如此。也许我在 [任何] 编程方面不够熟练，但我无法使 Haskell 像 C 一样具有速度效率，即使我听说适当的 Haskell 能够提供类似的性能。

最近，我想我会再次尝试一些 Haskell，虽然它对于通用的简单（在计算方面）任务仍然很棒，但它似乎无法将 C 的速度与 Collat​​z 猜想等问题相提并论。我读过了：

[与 Project Euler 的速度比较：C vs Python vs Erlang vs Haskell](https://stackoverflow.com/questions/6964392/speed-comparison-with-project-euler-c-vs-python-vs-erlang-vs-haskell)

[GHC 优化：Collat​​z 猜想](https://stackoverflow.com/questions/10876110/ghc-optimization-collatz-conjecture)

[使用haskell的collat​​z-list实现](https://stackoverflow.com/questions/13556443/collatz-list-implementation-using-haskell)

但据我所见，简单的优化方法，包括：

*   选择“更严格”的类型，比如 Int64 而不是 Integer
*   开启 GHC 优化
*   使用简单的优化技术，例如避免不必要的计算或更简单的函数

仍然没有使 Haskell 代码甚至接近于几乎相同（就方法而言）非常大的数字的 C 代码。唯一使它的性能可以与 C 相媲美的 [对于大规模问题] 是使用优化方法，使代码成为一个漫长而可怕的单子地狱，这违背了 Haskell（和我）如此重视的原则。

这是C版本：

```
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>

int32_t col(int64_t n);

int main(int argc, char **argv)
{
    int64_t n = atoi(argv[1]), i;
    int32_t s, max;

    for(i = 2, max = 0; i <= n; ++i)
    {
        s = col(i);
        if(s > max) max = s;
    }
    printf("%d\n", max);

    return 0;
}

int32_t col(int64_t n)
{
    int32_t s;

    for(s = 0; ; ++s)
    {
        if(n == 1) break;
        n = n % 2 ? 3 * n + 1 : n / 2;
    }

    return s;
} 
```

和 Haskell 版本：

```
module Main where

import System.Environment (getArgs)
import Data.Int (Int32, Int64)

main :: IO ()
main = do
    arg <- getArgs
    print $ maxCol 0 (read (head arg) :: Int64)

col :: Int64 -> Int32
col x = col' x 0

col' :: Int64 -> Int32 -> Int32
col' 1 n            = n
col' x n
    | rem x 2 == 0  = col' (quot x 2) (n + 1)
    | otherwise     = col' (3 * x + 1) (n + 1)

maxCol :: Int32 -> Int64 -> Int32
maxCol maxS 2   = maxS
maxCol maxS n
    | s > maxS  = maxCol s (n - 1)
    | otherwise = maxCol maxS (n - 1)
    where s = col n 
```

TL;DR：Haskell 代码是否仅针对计算简单的任务编写快速且易于维护，并且在性能至关重要时失去了这一特性？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-02T12:28:19.677

您的 Haskell 代码的最大问题是您正在划分，而在 C 版本中您没有。

是的，您编写了`n % 2`and `n / 2`，但是编译器将其替换为移位和按位与。不幸的是，GHC 还没有被教导这样做。

如果您自己进行替换

```
module Main where

import System.Environment (getArgs)
import Data.Int (Int32, Int64)
import Data.Bits

main :: IO ()
main = do
    arg <- getArgs
    print $ maxCol 0 (read (head arg) :: Int64)

col :: Int64 -> Int32
col x = col' x 0

col' :: Int64 -> Int32 -> Int32
col' 1 n            = n
col' x n
    | x .&. 1 == 0  = col' (x `shiftR` 1) (n + 1)
    | otherwise     = col' (3 * x + 1) (n + 1)

maxCol :: Int32 -> Int64 -> Int32
maxCol maxS 2   = maxS
maxCol maxS n
    | s > maxS  = maxCol s (n - 1)
    | otherwise = maxCol maxS (n - 1)
    where s = col n 
```

使用 64 位 GHC，您可以获得相当的速度（0.35 秒与 C 在我的盒子上的 0.32 秒，限制为 1000000）。如果您使用 LLVM 后端进行编译，您甚至不需要将`% 2`and替换为`/ 2`按位操作，LLVM 会为您做到这一点（但它会为您的原始 Haskell 源代码生成更慢的代码，0.4 秒，令人惊讶的是 - 通常，LLVM 不是比循环优化的本机代码生成器差）。

使用 32 位 GHC，您将无法获得可比的速度，因为使用这些，对 64 位整数的原始操作是通过 C 调用实现的——在 32 位系统上对快速 64 位操作的需求永远不够它们将作为primops实施；少数从事 GHC 工作的人把时间花在了其他更重要的事情上。

> TL;DR：Haskell 代码是否仅针对计算简单的任务编写快速且易于维护，并且在性能至关重要时失去了这一特性？

那要看。您必须对 GHC 从何种输入生成何种代码有所了解，并且必须避免一些性能陷阱。通过一些练习，对于此类任务，很容易达到 gcc -O3 的 2 倍速度。

# php - jQuery提交表单的javascript数组

> ID：13669140
> 
> 赞同：-1
> 
> 时间：2012-12-02T12:07:34.163
> 
> 标签：php, jquery, codeigniter

好的，所以基本上我正在尝试提交带有一些 javascript 数组的表单。

我希望这会采用将数据添加到隐藏字段然后自动发布的形式。

但是我遇到了一个奇怪的错误。

1.  ~~动态添加的字段不会隐藏，而是显示在屏幕上。~~

2.  代码运行非常缓慢（在本地运行，所以我无法想象为什么）

3.  它没有链接到 PHP 页面，而是显示：与 10.0.0.2 的连接被中断。（注意：PHP 页面有效，否则可以访问）

在此代码中正确，答案是 javascript 数组

```
$("#questionForm").submit(function(e){
                e.preventDefault();
               var cform = $('<form></form>');
               cform.attr("method", "post");
               cform.attr("action"," <?php echo base_url()?>index.php/TestMaker/endTest");
               var cfield = $('<input></input>');
               cfield.attr("type", "hidden");
               cfield.attr("name", "correct");
               cfield.attr("value", correct);
               cform.append(cfield);
               cfield=$('<input></input>');
               cfield.attr("type","hidden");
               cfield.attr("name", "answers");
               cfield.attr("value", answers);
               cform.append(cfield);
               $(document.body).append(cform);
               cform.submit();
}); 
```

* * *

## 编辑

好的，隐藏的部分是固定的。第二个字段出错。没有设置隐藏。服务器端代码：TestMaker 类扩展 CI_Controller{

```
 function __construct() {
    parent::__construct();
 }

 function endTest(){
    $correct_arr=$_POST('correct');
    echo "hi";
    //$question_ids=$_POST('question_ids');
    //$question_types=$_POST('question_type');
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:28:08.810

您错误地访问了 $_POST 数组，在 PHP 中访问数组的正确方法是使用方括号`[]`，如下所示：

```
$correct_arr = $_POST['correct']; 
```

此外，如果您使用 CI，有一个[输入类](http://ellislab.com/codeigniter/user-guide/libraries/input.html)包装 $_POST 数组并且非常有用，可以这样使用：

```
$correct_arr = $this->input->post('correct'); 
```

# android - 填充自定义列表视图

> ID：13669141
> 
> 赞同：1
> 
> 时间：2012-12-02T12:07:45.177
> 
> 标签：android

我想创建一个带有自定义行的列表视图。我`ListActivity`为每个行项创建了一个扩展类和一个 XML。我还添加了一个生成一些虚拟数据的方法。但这就是我卡住的地方。如何从我的主类中调用它并在我的列表视图中填充`main.xml`？

**自定义列表视图.java**

```
public class CustomListView extends ListActivity  {

private ArrayList<HashMap<String,String>> list;

public CustomListView(){

    list =  new ArrayList<HashMap<String,String>>();

    SimpleAdapter adapter = new SimpleAdapter(
            this,
            list,
            R.layout.custom_list_item,
            new String[] {"pen","price","color"},
            new int[] {R.id.text1,R.id.text2, R.id.text3});

    populateList();

    setListAdapter(adapter);

}

private void populateList() {

    HashMap<String,String> temp = new HashMap<String,String>();
    temp.put("pen","MONT Blanc");
    temp.put("price", "200.00$");
    temp.put("color", "Silver, Grey, Black");
    list.add(temp);
    HashMap<String,String> temp1 = new HashMap<String,String>();
    temp1.put("pen","Gucci");
    temp1.put("price", "300.00$");
    temp1.put("color", "Gold, Red");
    list.add(temp1);
    HashMap<String,String> temp2 = new HashMap<String,String>();
    temp2.put("pen","Parker");
    temp2.put("price", "400.00$");
    temp2.put("color", "Gold, Blue");
    list.add(temp2);
    HashMap<String,String> temp3 = new HashMap<String,String>();
    temp3.put("pen","Sailor");
    temp3.put("price", "500.00$");
    temp3.put("color", "Silver");
    list.add(temp3);
    HashMap<String,String> temp4 = new HashMap<String,String>();
    temp4.put("pen","Porsche Design");
    temp4.put("price", "600.00$");
    temp4.put("color", "Silver, Grey, Red");
    list.add(temp4);

}

} 
```

**custom_list_item.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView android:id="@+id/text1" 
android:textSize="16sp" 
android:textStyle="bold" 
android:textColor="#FFFF00" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent"/>

<TextView android:id="@+id/text2"
android:textSize="12sp" 
android:textStyle="bold" 
android:layout_width="wrap_content" 
android:layout_height="fill_parent"/>

<TextView android:id="@+id/text3" 
android:typeface="sans"
android:textSize="14sp"
android:textStyle="italic"
android:layout_width="wrap_content" 
android:layout_height="wrap_content"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:24:00.043

你已经完成了 50% 还剩下一些步骤

1 删除`CustomListView`. 不需要这个。

2 重写`onCreate`方法

```
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    list = new ArrayList<HashMap<String, String>>();
    populateList();
    SimpleAdapter adapter = new SimpleAdapter(this, list,
            R.layout.custom_list_item, new String[] { "pen", "price",
                    "color" }, new int[] { R.id.text1, R.id.text2,
                    R.id.text3 });
    setListAdapter(adapter);
} 
```

`manifest`3 在文件中添加您的活动，例如

```
<activity
        android:name=".CustomListView"
        /> 
```

4 如何从主 Activity 开始。您希望单击按钮吗？那么你可以使用`Intents`

```
startActivity(new Intent(yourMainActivity.this,CustomListView.class)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T12:16:16.447

创建自定义列表单元实际上意味着您创建了自定义适配器。

您为列表选择数据源的类型，然后为其创建适配器并根据需要显示信息。

通常发生的情况是您需要实现该`getView`方法并膨胀您的自定义视图而不是常规视图。

这是自定义适配器的代码示例：

```
public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private String[] data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a, String[] d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.item, null);

        TextView text=(TextView)vi.findViewById(R.id.text);;
        ImageView image=(ImageView)vi.findViewById(R.id.image);
        text.setText("item "+position);
        imageLoader.DisplayImage(data[position], image);
        return vi;
    }
} 
```

尝试阅读[关于 listView 和 Adapter 的 vogalla 教程](http://www.vogella.com/articles/AndroidListView/article.html)

# php - Yii - URL 管理优化

> ID：13669143
> 
> 赞同：0
> 
> 时间：2012-12-02T12:07:51.577
> 
> 标签：php, url, yii

我有一个名为类别的表：

*   ID
*   分类名称
*   parent_id

和表产品：

*   ID
*   类别ID
*   产品名称

为了简单起见，product_name 和 catogory_name 是唯一的 URL 别名

我想像那里一样制作网址

shop/computer_parts/cpu/intel - 是具有父 cpu 和计算机的“intel”类别的 url

和产品喜欢

shop/computer_parts/cpu/intel/intel_core_i5_2500k - 是产品

我看到了解决方案，添加了模型方法，例如

类别型号

```
public function geturl() {
    ***in cycle getting aliases of all parents***
    return Yii::app()->createUrl( ...etc
} 
```

和产品

```
public function geturl() {
    *** getting aliases of category and parents ***
    return Yii::app()->createUrl( ...etc
} 
```

这样做更简单吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:43:01.123

*首先，在主配置 ( protected/config/main.php* )中将 urlFormat 设置为 path 并将 showScriptName 设置为 false ：

```
'urlManager'=>array(
    'urlFormat'         =>  'path',
    'showScriptName'    =>  false,
    'rules'=>array( 
        ... 
```

接下来，您需要为 config 中的 URL 设置规则，例如：

```
shop/<parent:.+>/<child:.+>/<category:.+>/<product:.+>    => 'product/view',
shop/<parent:.+>/<child:.+>/<category:.+>/                => 'product/index', 
```

这将这两个 URL 指向产品/视图和产品/索引（显然这将更改为您必须处理的任何控制器/操作）。您现在可以从 URL 访问所有 GET 变量，例如：

```
$product = $_GET['product']; 
```

您必须编写控制器/动作来确定您当前在 URL 结构中的级别并相应地处理它。

# c - rand() 行为不理解

> ID：13669147
> 
> 赞同：1
> 
> 时间：2012-12-02T12:08:05.380
> 
> 标签：c, random

我有一个简单的程序可以在 C 中生成 N 对随机数。

我正在使用`rand()`这个。N 的值是一个命令行参数。

我注意到当传递的命令行 arg 相同时，它总是生成相同的数字流。

`rand()`联机帮助页说，如果没有明确的种子，RNG 将通过值 1 隐式播种（在我的程序中没有调用）`srand()`。

然而，当我用 arg=10 和 arg=12 调用我的程序时，我应该看到两个序列的前 10 位是相等的，对吧？（他们都将使用相同的种子，即 1）。这没有发生。看起来种子是从隐式传递的 arg 派生和应用的，但这似乎不太可能。有任何想法吗？

**更新：** [抱歉没有早点发布]

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])  
{  
    int objs=100, i;  
    if (argc >= 2)  
        objs = atoi(argv[1]);

     for(i=0; i<objs; i++){
         int p = rand() % objs;
         int q = rand() % objs;
         printf("%d %d\n", p, q);
      }
      return 0;
} 
```

我正在使用 Ubuntu 12 和 gcc 4.7.2。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T12:13:31.097

rand 的 int 版本会生成从 0 到 RAND_MAX 的随机数。这些整数将与相同的种子相同。但是，您的代码中必须有另一个步骤将该数字转换为 0-10 或 0-12 范围内的数字。这种缩放将导致输出的不同。

例如，如果它使用除法，而 rand 返回 25，那么：

```
// for range 0..10,
25 / 11 => 2 (truncated)

// for range 0..12,
25 / 13 => 1 (truncated) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T12:19:45.733

根据发布的代码，输出的差异似乎是由于正在执行的随机数的模数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:35:00.380

两个序列的前 10 位不相等，因为`rand()`返回相同的值（我们称为 a）和相同的种子（由`srand()`函数管理），但语句`a % objs`将根据 objs 的值返回不同的值。请注意，`a % 12`mean 除以 12 并得到余数，所以当 %12 和 %10 时，我们将得到不同的值。

希望对你有帮助

# android - ImageViews 上的透明度

> ID：13669151
> 
> 赞同：2
> 
> 时间：2012-12-02T12:08:41.827
> 
> 标签：android, transparency, android-imageview, transparent, alpha

我正在尝试将 ImageView 中的一些像素（白色像素）更改为透明，这样当我移动

ImageView 在另一个 ImageView 上我可以透过透明像素看到下面的图像（我用动画移动 imageView，改变它的位置）。但经过处理后，所谓的透明像素是黑色的，我看不到任何东西。

这是使像素透明的代码：

```
 private void transparentimage() {
    // TODO Auto-generated method stub
     Bitmap bitmapscr =((BitmapDrawable)myImageView.getDrawable()).getBitmap();
         Bitmap b = bitmapscr.copy(Bitmap.Config.ARGB_8888, true);

                for (int i = 0; i< b.getWidth(); i++){
                    for (int j = 0; j< b.getHeight(); j++){

                        if (b.getPixel(i,j) == Color.WHITE)         
                            b.setPixel(i,j,Color.TRANSPARENT);
                    }
                }
            myImageView.setBackgroundColor(Color.TRANSPARENT);
            myImageView.setImageBitmap(b);
            myImageView.invalidate();

} 
```

我还将 imageView 背景设置为透明。

有任何想法吗？我一直在努力解决它很长一段时间，我会感谢任何帮助。

太感谢了

朱利安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:14:41.253

最好的方法是通过 setAlpha 命令。

```
myImageView.setAlpha(50); 
```

# android - 如何从 PreferenceActivity 调用 Activity？

> ID：13669154
> 
> 赞同：0
> 
> 时间：2012-12-02T12:08:55.237
> 
> 标签：android, android-activity, preferences

我需要在按钮单击或其他方式时从 PreferenceActivity 启动新 Activity。是否可以？怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T12:25:27.007

`Activity`你可以从你`PreferenceActivity`喜欢的标准方式开始另一个。例如：

```
Intent testIntent = new Intent(getApplicationContext(), Activity2.class);
startActivity(testIntent); 
```

首先，在您的 XML 中定义一个首选项：

```
<Preference
    android:key="test_pref"
    android:summary="@string/someDescription"
    android:title="Some Random Title" >
</Preference> 
```

在你的`PreferenceActivity`：

```
Preference pref = findPreference("test_pref");
shareSociallyYou.setOnPreferenceClickListener(new OnPreferenceClickListener() {

    @Override
    public boolean onPreferenceClick(Preference preference) {

        Intent testIntent = new Intent(getApplicationContext(), Activity2.class);
        startActivity(testIntent);

        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T12:14:03.133

这应该工作

```
Preference preference = findPreference("Your Preference Key");
    preference.setOnPreferenceClickListener(new OnPreferenceClickListener() {
        @Override
        public boolean onPreferenceClick(Preference preference) {
            Intent intent = new Intent(getApplicationContext(), YourActivity.class);
            startActivity(intent);
            return true;
        }
    }); 
```

这应该在 oncreate 或类似中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T15:32:22.513

您也可以将意图设置为 XML 中的首选项操作。只需添加到您的偏好 XML：

```
<PreferenceScreen android:key="KEY" android:title="DOYOURWORK">
    <intent android:targetClass="com.yourcompany.app.youractivity"
        android: targetPackage="com.yourcompany.app">
        <extra android:name="EXTRA_KEY" android:value="yourValue" />
    </intent>
</PreferenceScreen> 
```

现在我想分享一个棘手的部分：节点`android:targetPackage`中的 xml 属性`<intent>`指的是您的应用程序包，而**不是 JAVA 包！** 因此，只要您在您的应用程序中工作而不调用外部意图，您只需声明您的应用程序包，无论活动类位于应用程序项目中的哪个**JAVA包中。**

我希望这会有所帮助，我找不到关于这些东西的任何文档，只是网络上的用户帖子。

# c++ - 如何在不使用 C++/C 中的阻塞函数的情况下将值从线程返回到主函数

> ID：13669158
> 
> 赞同：0
> 
> 时间：2012-12-02T12:09:28.427
> 
> 标签：c++, sockets, timer, routing

我正在制作一个路由协议，我需要为每个通过线程实现的邻居设置 30 秒的非阻塞计时器，这是示例代码。但是，我检查它的值 2 或 0 以区分线程是超时还是被我停止（我通过设置结构变量的值来停止线程。）

问题是，我的值没有传递回主函数，并且我知道的唯一连接解决方​​案是阻塞，但我需要非阻塞路由协议。任何帮助将不胜感激。谢谢。

```
struct arg_struct 
{
    int Wait_30sec;
    int Alarm_port[5];
    int index;
};

void* start_timer(void *arguments)
{
    struct arg_struct *args = (struct arg_struct *)arguments;
    int i;
    clock_t endwait;
    i = args->index;
    endwait = clock() + args->Wait_30sec * CLOCKS_PER_SEC;

    while (clock() < endwait && args->Alarm_port[i] == 0)
        ;

    if(args -> Alarm_port[i]==0) 
        args -> Alarm_port[i]=2;

    pthread_exit(NULL);
    return NULL;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T12:54:12.643

根据您的代码，当您将其地址传递给线程时，该值应反映到主线程。我建议像这样调试代码：

1）首先检查您对线程的调用，并验证您发送的结构变量的地址是否正确。然后查看您是否检查结果的正确变量。

2）你`index`在调用线程之前设置了你的结构变量吗？

3）也许您的线程由于您等待的最终值中的错误而没有完成。尝试将当前值和结束值打印到标准输出或文件，并查看循环是否终止。

# java - 基础控制器 SpringMVC

> ID：13669165
> 
> 赞同：2
> 
> 时间：2012-12-02T12:10:34.667
> 
> 标签：java, spring, model-view-controller, controller

在我的项目中，我被迫创建一个带有基本控制器的类来处理错误。我想问一下除了附加到所有类之外，是否有一种方法可以使它成为真正的**“主”控制器**`extends BaseController`。我的意思是，配置文件中的一些棘手的更改或可能有用的注释。**附加到所有类定义的扩展 BaseController**是解决该问题的唯一方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:15:56.797

[`@ControllerAdvice`](http://static.springsource.org/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html)（自 3.2.0 起）将满足您的需求。

对于应用程序中所有控制器所需的 Spring @MVC 功能，请考虑使用[`@ControllerAdvice`](http://static.springsource.org/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html)注解。这是自 Spring 3.2.0 以来引入的，对于全局处理来自 @MVC 处理程序的异常非常有用。来自 javadoc：

> 它通常用于定义适用于所有方法的`@ExceptionHandler`、`@InitBinder`和 方法。`@ModelAttribute``@RequestMapping`

顺便说一句，我认为使用一种不是`BaseController`一个好的设计。但这对于较低版本的 Spring 的类似功能可能是一个很好的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:26:02.217

实现自己的[HandlerExceptionResolver](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-exceptionhandlers-resolver)有问题吗？

我认为归结为：

*   @ExceptionHandler = 在给定的控制器内
*   HandlerExceptionResolver = 整个应用程序

# linux - 在 shell 脚本中修改导出的变量

> ID：13669171
> 
> 赞同：2
> 
> 时间：2012-12-02T12:11:13.653
> 
> 标签：linux, bash, shell, global-variables

我有一个类似于以下代码片段的 shell 脚本：

```
...
export updates=0

processFiles() {
    updates=$((updates+1))
}

export -f processFiles
find $path -exec /bin/bash -c "processFiles '{}'" \;

echo $updates 
```

用途是计算要保留的更新、插入和文件的数量。不幸的是，最后一个回显总是打印 0。

我也已经尝试在函数中使用 export - 没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:31:57.683

`find`如果您的搜索条件足够简单，您可以直接使用 bash而不是使用。例如，

```
for file in *; do
    processFiles "$file"
done 
```

`processFiles`将对当前目录的所有文件和目录（隐藏文件除外）执行该函数，参数为每个文件和目录的名称。如果您需要将它递归地应用于所有文件、目录和子目录（隐藏的除外），请使用 globstar shell 选项：

```
#!/bin/bash

shopt -s globstar
shopt -s nullglob

updates=0

processFiles() {
    ((++updates))
}

for file in **; do
    processFiles "$file"
done

echo "$updates" 
```

如果您只需要文件而不需要目录，请将其插入 for 循环：

```
 [[ -f "$file" ]] || continue 
```

`file`如果不是文件（即，如果它是其他东西，比如目录），它将继续循环。

要仅匹配通过扩展变量获得的目录中的文件`path`，请编写您的 for 循环：

```
for file in "$path"/*; do 
```

（或者`"$path"/**`如果您使用 globstar 并想要递归）。

如果您需要更复杂的搜索条件，您可以随时使用`extglob`option。如果您还需要包含隐藏文件，请使用该`dotglob`选项。

您可以在参考手册中找到有关 bash 的更多信息，尤其是以下部分：

*   Shopt 内置：[http ://www.gnu.org/software/bash/manual/bashref.html#The-Shopt-Builtin](http://www.gnu.org/software/bash/manual/bashref.html#The-Shopt-Builtin)
*   模式匹配：[http ://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching](http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching)
*   条件表达式：[http ://www.gnu.org/software/bash/manual/bashref.html#Bash-Conditional-Expressions](http://www.gnu.org/software/bash/manual/bashref.html#Bash-Conditional-Expressions)

最后一点：如果你真的不喜欢这个 100% bash 解决方案，并且如果你仍然想在你的 OP 中沿着脚本做一些事情，那么不要使用 bash 变量，而是使用（临时）文件来存储您需要从一个进程传递到另一个进程的值。这是一种廉价的 IPC 方法，效果很好，但更难以安全实施。

# javascript - 如何在 Windows 上使用 MAKE 构建项目？（它从源 JS 文件构建输出）

> ID：13669175
> 
> 赞同：2
> 
> 时间：2012-12-02T12:11:21.000
> 
> 标签：javascript, linux, windows, makefile

所以，我正在尝试在 Windows 上构建它：

[https://github.com/jarnokurlin/fullcalendar/](https://github.com/jarnokurlin/fullcalendar/)

我有 Visual Studio 2012，我尝试打开开发人员工具命令提示符，转到我有上述存储库的克隆的文件夹，以及 makefile 所在的文件夹，然后运行 ​​NMAKE，我得到了这个：

我有：

> Microsoft (R) 程序维护实用程序版本 11.00.51106.1
> 版权所有 (C) Microsoft Corporation。版权所有。
> 
> makefile(12)：致命错误 U1001：语法错误：宏停止中的非法字符“{”。

我以前没有使用过任何与 MAKE 相关的东西，但我听说这在 Windows 上可能会出现问题。我假设这是一个普遍的问题，而不是特定于存储库的问题（它是一个流行的存储库的分支，并且自分支以来似乎没有更改与构建相关的文件）。不知道从哪里开始。

有任何想法吗？

.

**更新：**

我注意到这需要根据自述文件安装并包含在 PATH 环境变量中的 Java，并且运行的正确命令是，我在确保 Java bin 在 PATH 中后`make zip`尝试，但我仍然得到相同的错误。`nmake zip`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:31:13.780

该 Makefile 使用了许多 Windows`cmd.exe`无法处理的更复杂的结构。如果您需要在 Windows 上运行，我建议您尝试在 MinGW 或 Cygwin 中运行它。

# vb.net - 面板形状高度

> ID：13669177
> 
> 赞同：1
> 
> 时间：2012-12-02T12:11:39.567
> 
> 标签：vb.net, windows-forms-designer

我对正在开发的程序有疑问。抱歉，如果我的帖子不是清晰易读，作为初学者编程完美主义者，我会尽可能清楚地解释所有内容。

我有一个名为 frmMain.vb 的 Windows 窗体，它有两个单独的面板，一个称为 sidebarPanel，另一个称为 mainPanel：

![http://i.stack.imgur.com/Zs2lt.png](../Images/4ec716aca89b0cada87eaeaea1e4ddbd.png)

在运行时，表单是这样的：我缩小了屏幕以使其适合本主题，实际大小为 900、600，通过 frmMain_Load 中的此代码：

```
Me.Size = New Size(900, 600) 
```

![http://i.stack.imgur.com/gdA3z.png](../Images/afc03e9ed1c48c25b927df347bdcdf5c.png)

现在我创建了以下代码：

```
With sidebarPanel
    .Top = 0
    .Left = 0
    .Width = 200
    .Height = 300
End With

With mainPanel
    .Top = 0
    .Left = 200
    .Width = 200
    .Height = 300
End With 
```

如果你想知道侧边栏是怎么变成蓝色的，那部分来自一个 dll，那部分代码我为了让这个问题变得简单而省略了。如果仔细查看源代码，您会发现侧边栏的宽度为 200，主面板从左侧开始宽度为 200。

不碍事。我想知道答案，我在 Stackoverflow、Google 和一些 VB.NET 论坛上搜索过这些问题，但我似乎是一个孤独的人。

如何使侧边栏成为表单的 100% 高度，所以如果我调整大小，侧边栏也会改变高度。同样的问题也适用于主面板。

感谢您的阅读，感谢您的热情款待和回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:40:19.817

You can manually do so in the form's `Resize` event, by setting the `Height` property of the panels to `Me.ClientSize.Height`, however, it's easier to just do it all at design time.

To do so, in the form designer, first position and resize the panels so that they are where you want them to be for the current form size, then set the `Dock` property appropriately on both. You want the side panel's `Dock` property to be set to Top, Left, and Bottom. You probably want the main panel's `Dock` property set to Top, Bottom, Left, and Right (all four sides). When the dock property is set properly, the controls will automatically resize themselves as the form is resized.

After you have set the `Dock` property, you can test it by resizing the form right in the designer.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T00:49:00.317

`SplitContainer`您可能会发现使用控件更容易。

对于更复杂的控件布局，您可以使用 a`TableLayoutPanel`来排列控件：将`TableLayoutPanel.Dock`属性设置为`Fill`，然后`.Anchor`在`TableLayoutPanel`. （在设计时）的右上角有一个小箭头`TableLayoutPanel`，可让您指定行和列的高度和宽度。

# django - ImportError：无法导入名称时区

> ID：13669180
> 
> 赞同：1
> 
> 时间：2012-12-02T12:12:47.637
> 
> 标签：django, django-nonrel

安装 django-norel 并运行`python manage.py shell`后，我收到此错误：

```
>>> from django.utils import timezone
Traceback (most recent call last):
  File "<console>", line 1, in <module>
ImportError: cannot import name timezone 
```

使用 Ubuntu 12.04 LTS、python 2.7.3、django 1.4 以及 django-nonrel、djangotoolbox 和 django-mongodb 引擎的最新版本

这似乎是某种不兼容的问题。我应该使用早期版本的 django 吗？如果是这样，我如何在 install 命令上指定 django 版本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T13:15:19.620

您不能同时拥有“Django 1.4”和“最新版本的 django-nonrel”。Django-nonrel*替代了*Django，最新版本建立在 Django 1.3 之上，没有`utils.timezone`模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T13:09:46.073

因为时区是 Django 1.4 的一个新功能。

也许你在你的机器上安装了多版本的 Django，然后引用了低于 1.4 的版本。

**如何检查**

在你的**python manage.py shell中输入这个**

```
>>>import sys
>>>sys.path 
```

您将看到所有当前的 django 环境路径。

请检查是否在打印的文本中包含正确的 Django 1.4 的根路径。

# android - 在 Android 表中保持所有行中的列对齐

> ID：13669185
> 
> 赞同：3
> 
> 时间：2012-12-02T12:13:29.140
> 
> 标签：android, alignment, row, tablelayout

我在Android中有一个问题，无论我尝试了什么都无法解决。

想象一个有 3 个表格行的表格布局，每行有两个文本字段。

图片：[由于新用户限制，无法在此处添加图片](http://imgim.com/tbl_behaviour.png)

[现在只关注“显示数据”]

我需要平均对齐每一行中的列。

（意思是：r[ 0 ]c[ 0 ].width = r[ 1]c[ 0 ].width = r[ 2 ]c[ 0 ].width 等等..）

但是，我在文本视图中有不同的字符串，其中一些很短，一些很长。

使用 0dp 作为宽度和 1 作为 layout_weight 值，并不能解决我的问题。在每一行（单独）中调整列的大小。

[参见“当前行为”]

此外，给出恒定的宽度值（使用 px 或 dp）会使一切都保持不变。我也不想这样。。

我想要做的是，平等地设置一列（所有行）中的所有文本字段宽度。根据文本视图最长的文本值。

如果使用 tablelayout 和 tablerows 是不可能的，那么 listview 是否可能？

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T22:49:38.887

**解决了！:)**

对于将尝试这样做的人：

在 layout.xml 中打开 table_layout 并添加：

```
android:shrinkColumns="*"
android:stretchColumns="*" 
```

# java - 在 swing 中组织一个 GUI RMI 客户端

> ID：13669188
> 
> 赞同：1
> 
> 时间：2012-12-02T12:13:50.890
> 
> 标签：java, swing

我正在 RMI 中开发一个带有 GUI 的安全电话簿。

我的问题与客户端 GUI 的类结构有关，而不是与 RMI 本身有关。

所以基本上，当您单击“连接”按钮时，我的 GUI 首先会打开一个带有登录名/密码的 JFrame，如果身份验证正常，则会打开另一个 JFrame 并显示电话簿的内容。但我不知道是否需要将所有内容与 Inner 类放在同一个 java 文件中，或者使用新的 JFrame 创建一个新类。这可能是一个选择问题，但我希望以正确的方式。最重要的是，我不知道在哪里获得电话簿 RMI 参考资料更好

```
public class ClientGui extends JFrame {
private static final String registryhost= "localhost:1099"; 
private static final long serialVersionUID = 1L;
//Several attributes

public ClientGui() {
    //Creation of components and a Connect Button
}

private class ButtonConnect implements ActionListener { 
    public void actionPerformed(ActionEvent ae)
    {
        try {
            Phonebook phonebook = (Phonebook) Naming.lookup("rmi://"+registryhost+"/Phonebook");
            Customer customerInstance = phonebook.checkCredential(login, password);

            if(customerInstance!=null) {
                CustomerPage page=new CustomerPage();
                page.setVisible(true);
                JLabel label = new JLabel("Welcome");
                page.getContentPane().add(label);
            } 
        } catch (RemoteException e3) {
            //blabla
        }
    }
}

public static void main(String args[])
{
    try
    {
        ClientGui frame=new ClientGui();
        frame.setVisible(true);
    }
    catch(Exception e)
    {JOptionPane.showMessageDialog(null, e.getMessage());}
} 
```

}

如您所见，单击连接按钮时会收到电话簿参考。但我认为这不是一个好主意，因为新的 Jframe 也必须使用这个 RMI 参考。那么最好的方法是什么？将 RMI 属性作为静态存储在客户端 GUI 属性中，并将新的 JFrame 作为内部类存储？或者为新的 JFrame 创建另一个类，但它需要一个新的

```
Phonebook phonebook = (Phonebook) Naming.lookup("rmi://"+registryhost+"/Phonebook"); 
```

# java - 编写一个创建选项卡的按钮，我需要将一些信息传递给新选项卡吗？

> ID：13669193
> 
> 赞同：0
> 
> 时间：2012-12-02T12:14:25.540
> 
> 标签：java, swing, actionlistener, jtabbedpane

我正在用 JTabbed Panes 编写一个程序。我想要一个从 JTextField 获取一些文本的按钮，使用该文本创建一个新选项卡。新选项卡将包含名称 = Jtextfield.getText()，并将在 JTextArea 中打印 10 次。

我真正的问题是，如何将一些数据传递给按钮的 ActionListener，或者我将如何解决这个问题，因为它给我带来了麻烦？

更新：

这是我解决这个问题的尝试。我知道代码很复杂，我是一个糟糕的程序员。我希望你能帮助我看看这里出了什么问题。恐怕我的 CreateComponent 方法和 CreateNewFeedBlock actionListener 出了问题。

这是我的一些代码，请多多包涵。

```
private static JPanel mainPane;    
private JPanel categoryPanel; 
private JTextField categoryName;
private JPanel panel1;
private JTextField title1;
private JTextField url1;
private JPanel panel2;
private JTextField title2;
private JTextField url2;
private JPanel panel3;
private JTextField title3;
private JTextField url3;
private JPanel panel4;
private JTextField title4;
private JTextField url4;

public BIS() 
{
//unecessary code
categoryPanel = new JPanel();
categoryPanel.setLayout(new GridLayout(2,2));
JLabel emptyLabel1 = new JLabel("");
JLabel emptyLabel2 = new JLabel("");
JLabel insertCategoryName = new JLabel("Category name:");
categoryName = new JTextField(20);

panel1 = new JPanel();
panel1.setLayout(new GridLayout(2,2));
JLabel insertTitle1 = new JLabel("Feed Title:");
title1 = new JTextField(20);
JLabel insertURL1 = new JLabel("URL:");
url1 = new JTextField(20);
panel1.add(insertTitle1);
panel1.add(title1);
panel1.add(insertURL1);
panel1.add(url1);

categoryPanel.add(emptyLabel1);
categoryPanel.add(emptyLabel2);
categoryPanel.add(insertCategoryName);
categoryPanel.add(categoryName);

JPanel addPanel = new JPanel(new GridLayout(6,1));
JButton addButton = new JButton("Create Your RSS Show");

addPanel.add(categoryPanel);
addPanel.add(panel1);
addPanel.add(addButton);
addPanel.setBorder(BorderFactory.createEmptyBorder(64, 64, 64, 64));

addButton.addActionListener(new CreateTab());

pane.add("Create Your Own", addPanel);

Timer timer = new Timer(15000, new ActionListener()
{

public void actionPerformed(ActionEvent e)
{
allRun();
//System.out.println("U BO NIHER");
}
});
timer.setRepeats(true);
timer.setCoalesce(true);
timer.start();
timer.restart();
}

public class CreateTab implements ActionListener
{
public void actionPerformed(ActionEvent e)
{

panel = new JPanel();
while (!url1.getText().contains("http://"))
{
JOptionPane.showMessageDialog(panel, "The RSS Feed Link does not contain http//.");
url1.setText(JOptionPane.showInputDialog("Please enter the full URL to the RSS Feed?"));
}

rssListForTab = new ArrayList<rssInfo>();

rssInfo feedInfo = new rssInfo(title1.getText(), url1.getText());

rssListForTab.add(feedInfo);
rssListForAll.add(rssListForTab);

final Component newTab = createComponent(panel, rssListForTab);
pane.add(categoryName.getText(), newTab);

// newTab.get
// newTab.getComponent(2);

categoryName.setText("");
title1.setText("");
url1.setText("");

}
}

private JComponent createComponent(JPanel panel, ArrayList<rssInfo> rssList)
{
JLabel t1 = new JLabel(title1.getText(), JLabel.CENTER);
JTextArea u1 = new JTextArea(5,5);
JScrollPane u1Scroll = new JScrollPane(u1);
u1Scroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
u1Scroll.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
u1.setEditable(false);
u1.setFont(new Font("Tahoma", Font.BOLD, 12));
u1.setLineWrap(true);
u1.setWrapStyleWord(true);

JButton addFeedButton = new JButton("Add Feed");
panel.setLayout(new BoxLayout(panel, BoxLayout.PAGE_AXIS));

panel.add(addFeedButton);
panel.add(t1);
panel.add(u1Scroll);
panel.setSize(1,1);
panel.setBorder(BorderFactory.createEmptyBorder(6, 6, 6, 6));

addFeedButton.addActionListener(new createNewFeedBlock());
return panel;
}

public class createNewFeedBlock implements ActionListener  
{
public void actionPerformed(ActionEvent e)
{
rssInfo newFeedInfo = DisplayDialog();

JLabel t2 = new JLabel(newFeedInfo.getTitle(), JLabel.CENTER);
JTextArea u2 = new JTextArea(5,5);
JScrollPane u2Scroll = new JScrollPane(u2);  
u2Scroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
u2Scroll.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
u2.setEditable(false);
u2.setFont(new Font("Tahoma", Font.BOLD, 12));   
u2.setLineWrap(true);
u2.setWrapStyleWord(true);

rssListForTab.add(newFeedInfo);

panel.add(t2);
panel.add(u2Scroll);

}
} 
```

我认为问题在于 CreateNewFeedBlock 和/或 createComponent 方法。我知道这段代码很难阅读，但请看看你是否能以某种方式帮助我找出问题所在。

请看看你看到的任何错误，然后告诉我，我正在尽我所能解决这个问题，但我很无助。我希望你的帮助能帮助我度过这个挑战。

**更新****

此代码无法正常工作，每当我单击 addFeedButton 时，它不会将一个提要添加到从中调用它的相应选项卡，而是将一个提要添加到窗格中的所有选项卡。

我很确定这是一个变量范围问题，有人可以帮我找到解决方法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T12:30:24.277

当 Click-Action 被调用时，ActionListener 获得对作为 ActionEvent-Object 的一部分传递给它的导致 Object 的引用。所以在事件处理函数中你可以使用例如：

```
public void actionPerformed(ActionEvent e) { 
    JButton sourceButton = (JButton)e.getSource();
} 
```

如果您想从函数内部引用 TextField，您可以尝试直接解决它（如果 actionHandler 与 Objects 在同一类中定义则很容易），或者您创建自己的自定义按钮类，其中包含对文本字段（如果您有单独/在父类中定义的动作处理程序，则可能很有用）例如：

```
class MyTabButton extends JButton{
   private JTextField tabTextField;
   public MyTabButton(JTextField text){
      tabTextField = text;
   }
   public JTextField getTabTextField(){
      return tabTextField;
   }
   //... someOtherStuff
} 
```

然后你会在actionHandler中得到它

```
public void actionPerformed(ActionEvent e) { 
    MyTabButton sourceButton = (MyTabButton)e.getSource();
    String text = sourceButton.gettabTextField().getText();
} 
```

# javascript - 在 Rails 应用程序中为 d3.js 创建一个 json 对象，但取决于分页

> ID：13669194
> 
> 赞同：0
> 
> 时间：2012-12-02T12:14:32.920
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, json, d3.js

我想将我的工作 d3.js 代码包含到我的 Rails 应用程序中。在我的构建视图中，我正在使用分页，因为大约有 30000 行。我想用 d3.js 可视化它们。

当我通过模型名称调用 json-object 时，它适用于前 100 行：

```
<%= javascript_tag do %>
d3.json('builds', 
            function(data){
                //working function code..
            });     
<% end %> 
```

但是 json-object`builds`每次都采用独立于分页的前 100 个项目。这意味着`builds`拥有所有数据，但只需要前 100 个数据，因为我在构建模型`self.per_page = 100`中说我可以将其用于分页。

我还尝试在只有当前构建对象的视图中创建一个 json 对象：

```
var myJson = <%=raw @builds.to_json %>; 
```

但是这里的问题是我不能给 d3.json 函数一个变量名。

有谁知道如何创建一个 json 对象，该对象可用于我的 d3 代码，具体取决于当前页面？

我希望我的意思很清楚，否则请询问！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T12:50:16.723

好的，在尝试了一切之后，我发现了它是如何工作的：

```
d3.json('<% @builds.to_json %>', 
            function(data){
          //code 
```

您不能创建变量并将其传递给 d3.json 函数，但您必须让它自己评估 ruby​​ 代码。

# java - App Engine Map Reduce 控制器回调异常

> ID：13669199
> 
> 赞同：1
> 
> 时间：2012-12-02T12:15:08.040
> 
> 标签：java, google-app-engine, mapreduce

在我们的应用引擎 Java 实例上运行 Map Reduce 作业时，它会在一段时间后停止，并且我收到请求太大的异常。从异常中不清楚如何解决这个问题，因为它发生在应该是无缝的洗牌阶段。

我了解实体大小、超时等方面的限制，但我不确定在哪里向 API 指出这一点？

[我使用的代码与此处](http://code.google.com/p/appengine-mapreduce/wiki/GettingStartedInJava)的代码非常相似，只是计算了不同的属性属性并使 servlet 几乎相同。

这就是我得到的：

```
2012-12-02 13:18:53.632 /mapreduce/controllerCallback 500 535ms 0kb AppEngine-Google; (+http://code.google.com/appengine)
0.1.0.2 - - [02/Dec/2012:03:18:53 -0800] "POST /mapreduce/controllerCallback HTTP/1.1" 500 0 "http://xxx/mapreduce/controllerCallback" "AppEngine-Google; (+http://code.google.com/appengine)" "xxx.com" ms=535 cpu_ms=288 queue_name=default task_name=16764257756372630651 instance=00c61b117cc2653091fefc2f9b795b790f1a
I 2012-12-02 13:18:53.203
com.google.appengine.tools.mapreduce.impl.shardedjob.ShardedJobRunner pollTaskStates: Polling task states for job 002b0ae1-643b-420d-b3cd-20f03cc054ff-reduce, sequence number 166
W 2012-12-02 13:18:53.630
/mapreduce/controllerCallback
com.google.apphosting.api.ApiProxy$RequestTooLargeException: The request to API call datastore_v3.Put() was too large.
    at com.google.apphosting.runtime.ApiProxyImpl$AsyncApiFuture.success(ApiProxyImpl.java:494)
    at com.google.apphosting.runtime.ApiProxyImpl$AsyncApiFuture.success(ApiProxyImpl.java:392)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher$1.runInContext(RpcStub.java:781)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher.rpcFinished(RpcStub.java:823)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher.success(RpcStub.java:808)
    at com.google.net.rpc3.impl.client.RpcClientInternalContext.runCallbacks(RpcClientInternalContext.java:898)
    at com.google.net.rpc3.impl.client.RpcClientInternalContext.finishRpcAndNotifyApp(RpcClientInternalContext.java:803)
    at com.google.net.rpc3.impl.client.RpcNetChannel.afterFinishingActiveRpc(RpcNetChannel.java:1063)
    at com.google.net.rpc3.impl.client.RpcNetChannel.finishRpc(RpcNetChannel.java:911)
    at com.google.net.rpc3.impl.client.RpcNetChannel.handleResponse(RpcNetChannel.java:2267)
    at com.google.net.rpc3.impl.client.RpcNetChannel.messageReceived(RpcNetChannel.java:2068)
    at com.google.net.rpc3.impl.client.RpcNetChannel.access$2000(RpcNetChannel.java:143)
    at com.google.net.rpc3.impl.client.RpcNetChannel$TransportCallback.receivedMessage(RpcNetChannel.java:3129)
    at com.google.net.rpc3.impl.client.RpcChannelTransportData$TransportCallback.receivedMessage(RpcChannelTransportData.java:599)
    at com.google.net.rpc3.impl.wire.RpcBaseTransport.receivedMessage(RpcBaseTransport.java:417)
    at com.google.apphosting.runtime.udrpc.UdrpcTransport$ClientAdapter.receivedMessage(UdrpcTransport.java:424)
    at com.google.apphosting.runtime.udrpc.UdrpcTransport.dispatchPacket(UdrpcTransport.java:265)
    at com.google.apphosting.runtime.udrpc.UdrpcTransport.readPackets(UdrpcTransport.java:217)
    at com.google.apphosting.runtime.udrpc.UdrpcTransport$1.run(UdrpcTransport.java:81)
    at com.google.net.eventmanager.AbstractFutureTask$Sync.innerRun(AbstractFutureTask.java:260)
    at com.google.net.eventmanager.AbstractFutureTask.run(AbstractFutureTask.java:121)
    at com.google.net.eventmanager.EventManagerImpl.runTask(EventManagerImpl.java:578)
    at com.google.net.eventmanager.EventManagerImpl.internalRunWorkerLoop(EventManagerImpl.java:1002)
    at com.google.net.eventmanager.EventManagerImpl.runWorkerLoop(EventManagerImpl.java:884)
    at com.google.net.eventmanager.WorkerThreadInfo.runWorkerLoop(WorkerThreadInfo.java:136)
    at com.google.net.eventmanager.EventManagerImpl$WorkerThread.run(EventManagerImpl.java:1855)
C 2012-12-02 13:18:53.631
Uncaught exception from servlet
com.google.apphosting.api.ApiProxy$RequestTooLargeException: The request to API call datastore_v3.Put() was too large.
    at com.google.apphosting.runtime.ApiProxyImpl$AsyncApiFuture.success(ApiProxyImpl.java:494)
    at com.google.apphosting.runtime.ApiProxyImpl$AsyncApiFuture.success(ApiProxyImpl.java:392)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher$1.runInContext(RpcStub.java:781)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher.rpcFinished(RpcStub.java:823)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher.success(RpcStub.java:808)
    at com.google.net.rpc3.impl.client.RpcClientInternalContext.runCallbacks(RpcClientInternalContext.java:898)
    at com.google.net.rpc3.impl.client.RpcClientInternalContext.finishRpcAndNotifyApp(RpcClientInternalContext.java:803)
    at com.google.net.rpc3.impl.client.RpcNetChannel.afterFinishingActiveRpc(RpcNetChannel.java:1063)
    at com.google.net.rpc3.impl.client.RpcNetChannel.finishRpc(RpcNetChannel.java:911)
    at com.google.net.rpc3.impl.client.RpcNetChannel.handleResponse(RpcNetChannel.java:2267)
    at com.google.net.rpc3.impl.client.RpcNetChannel.messageReceived(RpcNetChannel.java:2068)
    at com.google.net.rpc3.impl.client.RpcNetChannel.access$2000(RpcNetChannel.java:143)
    at com.google.net.rpc3.impl.client.RpcNetChannel$TransportCallback.receivedMessage(RpcNetChannel.java:3129)
    at com.google.net.rpc3.impl.client.RpcChannelTransportData$TransportCallback.receivedMessage(RpcChannelTransportData.java:599)
    at com.google.net.rpc3.impl.wire.RpcBaseTransport.receivedMessage(RpcBaseTransport.java:417)
    at com.google.apphosting.runtime.udrpc.UdrpcTransport$ClientAdapter.receivedMessage(UdrpcTransport.java:424)
    at com.google.apphosting.runtime.udrpc.UdrpcTransport.dispatchPacket(UdrpcTransport.java:265)
    at com.google.apphosting.runtime.udrpc.UdrpcTransport.readPackets(UdrpcTransport.java:217)
    at com.google.apphosting.runtime.udrpc.UdrpcTransport$1.run(UdrpcTransport.java:81)
    at com.google.net.eventmanager.AbstractFutureTask$Sync.innerRun(AbstractFutureTask.java:260)
    at com.google.net.eventmanager.AbstractFutureTask.run(AbstractFutureTask.java:121)
    at com.google.net.eventmanager.EventManagerImpl.runTask(EventManagerImpl.java:578)
    at com.google.net.eventmanager.EventManagerImpl.internalRunWorkerLoop(EventManagerImpl.java:1002)
    at com.google.net.eventmanager.EventManagerImpl.runWorkerLoop(EventManagerImpl.java:884)
    at com.google.net.eventmanager.WorkerThreadInfo.runWorkerLoop(WorkerThreadInfo.java:136)
    at com.google.net.eventmanager.EventManagerImpl$WorkerThread.run(EventManagerImpl.java:1855) 
```

我发现[了这个](http://code.google.com/p/appengine-mapreduce/issues/detail?id=94)，但我没有使用任何实体，我猜测正在创建实体来存储数据，但由于我不确定在哪里定义我应该写多少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:01:23.750

运行 Map Reduce 时出现同样的异常。问题是 Map Reduce 包含大量元数据，这些元数据是在作业期间生成的，之后数据作为单个实体保存在数据存储中。当实体变得比允许的大时，抛出异常并且 Map Reduce 停止。

我的问题是我写了很多日志，比如

```
context.getCounter("some log message", "value"); 
```

在 Map Reduce 的主体中。解决方案是减少日志大小和数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T15:56:26.850

您可以在一次调用中写入的最大实体数为 500，目前，实体的大小最多为 1 MB。此处对此进行了描述：

[Quotas_and_Limits](http://code.google.com/appengine/docs/java/datastore/overview.html#Quotas_and_Limits)

因此，您试图在实体中存储太多数据，因此会引发此异常。以下是您可以尝试的一些解决方法：

*   将您的数据拆分为多个小于 1 MB 块的实体（不知道您的确切用例以具体评论）
*   对特别大的文件使用[S3](http://aws.amazon.com/s3/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-24T17:49:39.593

我最近遇到了同样的问题，并将其追溯到我的 Mapper 类。该类的成员数据被序列化为/形成切片之间的数据存储（我认为），并且我拥有大量超过 1MB 的数据。它与我的班级正在进行的对数据存储的任何显式调用无关。

# actionscript-3 - flash as3 & html5 - 当movieclip嵌入时间线时的预加载器

> ID：13669200
> 
> 赞同：0
> 
> 时间：2012-12-02T12:15:13.633
> 
> 标签：actionscript-3, flash, window, preload, preloading

我有一个嵌入在我的 Flash 时间轴中的电影，这样我就可以使用我创建的滚动条类逐帧滚动它。然而，因为电影大约 10mb，我需要有某种预加载器，无论是 HTML5 还是 Flash 中，以显示海报图像或其他东西，直到电影被加载。我已经使用预加载器动态加载了影片剪辑，但是当影片剪辑嵌入到时间线中时，我该怎么做呢？我尝试了一个 $(window).ready 函数来隐藏窗口准备好的海报图像，因为我认为这在加载所有资产之前不会触发，但我想这不适用于 flash，所以我想我'将不得不在 Flash 内完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:17:20.373

在主动画剪辑上（在主时间轴上），您应该添加第一个空帧（它应该是轻量级的并且加载速度快）。那么你应该 stop(); 影片剪辑。停止后，您可以继续检查 loaderInfo.bytesLoaded/loaderInfo.bytesLoaded 属性并显示加载过程的百分比。

此代码段可能会有所帮助（您可以将此代码放入时间线的第一帧，或放入 Main 类构造方法）：

```
//create a text field to show the progress
var progress_txt:TextField = new TextField();
//stop the timeline, will play when fully loaded
stop();
//position text field on the centre of the stage
progress_txt.x = stage.stageWidth / 2;
progress_txt.y = stage.stageHeight / 2;
addChild(progress_txt);

//add all the necessary listeners
loaderInfo.addEventListener(ProgressEvent.PROGRESS, onProgress);
loaderInfo.addEventListener(Event.COMPLETE, onComplete);

function onProgress(e:ProgressEvent):void
{
  //update text field with the current progress
  progress_txt.text = String(Math.floor((e.bytesLoaded/e.bytesTotal)*100));
}

 function onComplete(e:Event):void
{
  trace("Fully loaded, starting the movie.");
  //removing unnecessary listeners
  loaderInfo.removeEventListener(ProgressEvent.PROGRESS, onProgress);
  loaderInfo.removeEventListener(Event.COMPLETE, onComplete);
  //go to the second frame. 
  //You can also add nextFrame or just play() 
  //if you have more than one frame to show (full animation)
  gotoAndStop(2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T05:38:44.710

我不确定为什么这对我不起作用..

这是我的代码，在主时间线上：

 `````
stop();

var percent:Number; //used to show loader progress

loaderInfo.addEventListener(Event.COMPLETE, onGameLoaded);
loaderInfo.addEventListener(ProgressEvent.PROGRESS, onLoaderProgress);
trace(loaderInfo.bytesLoaded, loaderInfo.bytesTotal);

function onLoaderProgress(event: ProgressEvent): void {
    trace("Progress called");
    percent = (event.bytesLoaded / event.bytesTotal);
    preloader.bar.scaleX = percent;
    preloader.percentageTxt.text = String(Math.round(percent * 100)) + "%";
}

//Event-handler for when this main controller is completely loaded
function onGameLoaded(event: Event): void {
    loaderInfo.removeEventListener(Event.COMPLETE, onGameLoaded);
    loaderInfo.removeEventListener(ProgressEvent.PROGRESS, onLoaderProgress);
    trace("Game completely loaded");
    play();
} 
````  `跟踪语句甚至没有触发，时间线也没有向前移动。``

# php - 在表格中显示 *

> ID：13669201
> 
> 赞同：0
> 
> 时间：2012-12-02T12:15:23.020
> 
> 标签：php, mysql

我有 2 张桌子。一个叫用户，另一个叫电视节目。users 表有：users_id、displayname、用户名和密码，我有一个名为 users_id 的外键，在电视节目表中我有 tv_id、users_id FK、tvshow、seasons。我希望能够从 users 表中显示谁创建了它的显示名称，而不是显示分配给他的数字 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:18:09.163

使用以下 SQL 查询来获取有关用户的信息：

```
SELECT          users.username,
                tv_shows.*
    FROM        tv_shows
    LEFT JOIN   users
    ON          users.users_id = tv_shows.user_id 
```

然后使用以下 PHP 代码段显示有关用户的信息：

```
 echo '<td>'.
      '<a href="users.php?username='.
      $row['username'].
      '">'.
      $row['username'].
      '</a></td>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T12:23:55.983

由于您的 tv_shows 表没有名为“用户名”的列，因此它显然不起作用。因此，您需要获取要与 SQL 语句一起使用的所有字段：

```
SELECT tv_shows.*, users.username
  FROM tv_shows
  JOIN users ON users.user_id = tv_shows.user_id 
```

根据您的表结构，您可能想要使用`LEFT JOIN`...

然后您可以`$row['username']`在您的 PHP 代码中使用，因为您之前使用 SQL 获取它。

而且我认为你需要复习一些 SQL 教程来学习连接、分组等[。W3C 的 SQL 教程](http://www.w3schools.com/sql/default.asp)是一个很好的起点。

# exception - 现有方法无法理解消息

> ID：13669203
> 
> 赞同：2
> 
> 时间：2012-12-02T12:15:43.877
> 
> 标签：exception, smalltalk, pharo, method-declaration, missingmethod

好的，所以它是这样的：

```
receiver selectors 
```

返回

```
#(#expression #expression: #mondrianLabel #accept: #name) 
```

但

```
receiver expression 
```

抛出`MessageNotUnderstood`。

任何想法如何解决此问题以及为什么会导致此问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T12:43:20.290

您可能将消息发送`expression`到一个类而不是该类的实例。

如果评估的结果`receiver selectors`是`#(#expression #expression: #mondrianLabel #accept: #name)`then`receiver`很可能是一个类。消息`#selectors`在类上实现，`Behavior`并返回类的实例方法的选择器。换句话说：类（或其任何子类）的实例理解列出的消息。

因此，如果您评估`receiver expression`，那么您将收到一条*消息未理解*异常，因为该消息`#expression`是在作为`receiver`变量值的类的实例上定义的。

# matlab - Matlab：对矩阵的唯一列元素索引进行分组和最小化

> ID：13669209
> 
> 赞同：0
> 
> 时间：2012-12-02T12:16:18.047
> 
> 标签：matlab, size, unique, minimize

我们有以下矩阵`result`：

```
result =
  Columns 1 through 13
     3     1     1     1     1     1     6     2     3     6     2     1     6
     4     3     3     5     7     5    10    10     4    10     6     9     8
     6     4     4     7     9     7     0     0     0     0     0     0     0
    10     5     5     8     0     0     0     0     0     0     0     0     0
  Columns 14 through 25
     2    10     3    10     3     8     8     0     0     0     0     0
     8     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0 
```

其列唯一元素索引大小为（不含零）：

```
Indexes of result:
  Columns 1 through 13
     4     4     4     4     3     3     2     2     2     2     2     2     2
  Columns 14 through 25 
     2     1     1     1     1     1     1 
```

我想执行以下场景：从第一列开始，我们希望将每个非唯一值限制为仅在矩阵中出现一次。因此，以 col1 作为起点，矩阵的其余部分应重新排列为：

```
result =
  Columns 1 through 13
     3     1     1     1     1     1     0     2     0     0     2     1     0
     4     0     0     5     7     5     0     0     0     0     0     9     8
     6     0     0     7     9     7     0     0     0     0     0     0     0
    10     5     5     8     0     0     0     0     0     0     0     0     0
  Columns 14 through 25
     2     0     0     0     0     8     8     0     0     0     0     0
     8     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
 Indexes of result (without zeros):
  Columns 1 through 13
     4     2     2     4     3     3     0     1     0     0     1     2     1
  Columns 14 through 25 
     2     0     0     0     0     1     1 
```

现在我们看到 col4 有最独特的元素，所以我们考虑它的值继续第二次重新排列，结果是：

```
result =
  Columns 1 through 13
     3     0     0     1     0     0     0     2     0     0     2     0     0
     4     0     0     5     0     0     0     0     0     0     0     9     0
     6     0     0     7     9     0     0     0     0     0     0     0     0
    10     0     0     8     0     0     0     0     0     0     0     0     0
  Columns 14 through 25
     2     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0

Indexes of result (without zeros):
  Columns 1 through 13
     4     0     0     4     1     0     0     1     0     0     1     1     0  
  Columns 14 through 25 
     1     0     0     0     0     1     1 
```

根据需要多次执行此操作，在该示例中，col5 和 col8 再执行两次，我们达到了预期的结果：

```
result =
  Columns 1 through 13
     3     0     0     1     0     0     0     2     0     0     0     0     0
     4     0     0     5     0     0     0     0     0     0     0     0     0
     6     0     0     7     9     0     0     0     0     0     0     0     0
    10     0     0     8     0     0     0     0     0     0     0     0     0
  Columns 14 through 25
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0

Indexes of result (without zeros):
  Columns 1 through 13
     4     0     0     4     1     0     0     1     0     0     0     0     0  
  Columns 14 through 25 
     0     0     0     0     0     0     0 
```

执行此操作的最有效方法是什么？我可以看看你的建议吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:04:25.743

您的问题措辞不佳，因此以下是我设法从中理解的逐步细分。

假设您有以下矩阵：

```
result=[3  1  1  1  1  1  6  2  3  6  2  1  6  2 10  3 10 3  8  8  0  0  0  0  0;
        4  3  3  5  7  5 10 10  4 10  6  9  8  8  0  0  0  0 0  0  0  0  0  0  0;
        6  4  4  7  9  7  0  0  0  0  0  0  0  0  0  0  0  0 0  0  0  0  0  0  0;
       10  5  5  8  0  0  0  0  0  0  0  0  0  0  0  0  0  0 0  0  0  0  0  0  0] 
```

1）要计算每列中唯一元素的数量，只需[`unique`](http://www.mathworks.com/help/matlab/ref/unique.html)在每列上调用并计算非零元素：

```
count = arrayfun(@(n)sum(unique(result(:, n)) ~= 0), 1:size(result, 2)) 
```

2）要使第 1 列的所有重复元素无效，我们可以这样做：

```
idx = arrayfun(@(n)ismember(result(:, n), result(:, 1)), 2:N, 'Uniform', 0);
result(logical([idx{:}])) = 0 
```

现在我们需要遍历所有列并取消所有非唯一元素，因此我们使用循环来执行此操作。因此最终的解决方案是：

```
N = size(result, 2);
ii = 0;
while (ii <= N)

    % # Count the number of unique elements in each column
    count = arrayfun(@(n)sum(unique(result(:, n)) ~= 0), 1:N);

    % # Advance to the next column with the maximum number of unique elements
    ii = ii + find(count(:, ii + 1:N) == max(count(:, ii + 1:N)) & count(ii + 1:N), 1);
    if isempty(ii)
        break
    end

    % # Nullify non-unique elements starting from column i
    idx = arrayfun(@(n)(ismember(result(:, n), result(:, ii)) & n ~= ii), 1:N, 'Uniform', 0);
    result(logical([idx{:}])) = 0;
end 
```

这会产生您想要的结果：

```
result=
    3  0  0  1  0  0  0  2  0  0  0  0  0  0  0  0  0  0 0  0  0  0  0  0  0
    4  0  0  5  0  0  0  0  0  0  0  0  0  0  0  0  0  0 0  0  0  0  0  0  0
    6  0  0  7  9  0  0  0  0  0  0  0  0  0  0  0  0  0 0  0  0  0  0  0  0
   10  0  0  8  0  0  0  0  0  0  0  0  0  0  0  0  0  0 0  0  0  0  0  0  0 
```

希望有帮助！

# java - 将 byte[] 设置为 SQL 准备语句

> ID：13669210
> 
> 赞同：1
> 
> 时间：2012-12-02T12:16:20.927
> 
> 标签：java, sql, jdbc, prepared-statement

我正在设置这样的 SQL 准备语句：

```
prd.setBytes(i+1, temp_value); 
```

其中 temp_value 的类型为 byte[]。

最后，我将 prd 语句添加到这样的批处理中：

```
prd.addBatch();
prd.executeBatch(); 
```

executeBatch 给了我异常： **java.sql.BatchUpdateException：将数据类型 varbinary 转换为数字时出错。**

无论数据库表中的字段是数字类型还是任何其他类型，是否可以简单地将字节添加到准备好的语句中？

我必须具体说明我要插入的类型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:25:09.953

该`setBytes`方法旨在用于 SQL BLOB 类型，例如`varbinary`、`longvarbinary`等。对于需要使用的数字类型`BigDecimal`，`BigInteger`或数字原语。

允许`setBytes`与非二进制类型一起使用的问题是系统独立性：您需要将驱动程序的预期布局与 JDBC 驱动程序编写者需要发布的可能非常复杂的结构相匹配。一旦发布了这个布局，他们的驱动程序就必须终生保持兼容。然而，大多数驱动程序编写者更愿意避免与客户端代码的这种紧密耦合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T12:26:24.233

JDBC 4.1 规范中的附录 B（数据类型转换表）列出了 JDBC 驱动程序必须实现的所有转换（对于支持的类型）。具体来说，表 B-4 列出了 Java 对象类型到 JDBC 类型的映射，表 B-5 列出了`setObject()`. 对于`byte[]`，只需要 JDBC 驱动程序来支持到/从 的转换`BINARY`，`VARBINARY`和`LONGVARBINARY`.

因此，根据 JDBC 规范，您不能将`setBytes()`其用于其他数据类型。有些驱动程序也允许`setBytes()`用于其他类型，但由于这是特定于驱动程序的，因此您不应依赖该转换。您收到的错误消息非常清楚地表明您的驱动程序根本不支持这种转换。

还专门针对一种`NUMERIC`类型，您应该想知道如何以`byte[]`对您的特定数据库有效的序列来表示它。

# javascript - Javascript 中 indexOf 的替代品

> ID：13669212
> 
> 赞同：3
> 
> 时间：2012-12-02T12:16:24.293
> 
> 标签：javascript, indexof

我有字符串作为`this is test for alternative`. 我想找到的是`for`. 我知道我可以使用 来做到这一点`alert(myString.indexOf("for"))`，但是我不想使用`indexOf`.

有什么想法/建议吗？

## [jsfiddle](http://jsfiddle.net/rCn3Q/)

同样，我只需要通过**Javascript**完成此操作。没有 jQuery .. 可悲的是:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T12:21:53.477

```
.search()?

"this is test for alternative".search("for")
>> 13 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T12:24:24.163

您可以编写自己的 indexOf 吗？您在源字符串上循环，并在每个字符上检查它是否可能是您搜索的单词。

一个未经测试的版本给你一个想法：

```
function myIndexOf(myString, word) {
    var len = myString.length;
    var wordLen = word.length;
    for(var i = 0; i < len; i++) {
        var j = 0;
        for(j = 0; j < wordLen; j++) {
            if(myString[i+j] != word[j]) {
                break;
            }
        }
        if(j == wordLen) {
            return i;
        }
    }

    return -1;
} 
```

# android - 在Android中将PHP回显读入字符串

> ID：13669214
> 
> 赞同：3
> 
> 时间：2012-12-02T12:16:53.143
> 
> 标签：android

我需要阅读这个回声：

[http://wee.co.il/Ski/weatherScript.php?op=3](http://wee.co.il/Ski/weatherScript.php?op=3)

成字符串，我试过：

```
class RetreiveEcho extends AsyncTask<String, Void, String> 
{
    private static final String TAG = "Her";

    @Override
    protected String doInBackground(String... params) {

        DefaultHttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://wee.co.il/Ski/weatherScript.php?op=3");

        Log.d(TAG, "Hello!");
        try {
            HttpResponse response = httpclient.execute(httppost);
            Log.d(TAG, ""+response);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }
} 
```

现在我只在我的日志中看到：

```
 org.apache.http.message.BasicHttpResponse@4132e5a8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T12:23:34.880

代码中的 HTTPResponse 对象是一个保存响应的 java 对象。它不是一个普通的字符串。因此，打印对象会产生给定的日志输出。要访问 php echo，您可以尝试以下代码：

```
response = httpClient.execute(targetHost, targetGet);
HttpEntity entity = response.getEntity();
String htmlResponse = EntityUtils.toString(entity); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T12:24:04.033

你可以使用它的方法来`HTTPEntity`获取。您可以通过方法将其内容写入输出流。`HTTPResponse`[`getEntity()`](http://developer.android.com/reference/org/apache/http/HttpResponse.html#getEntity%28%29)[`writeTo(OutputStream outstream)`](http://developer.android.com/reference/org/apache/http/HttpEntity.html#writeTo%28java.io.OutputStream%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T11:22:40.053

您可以通过这样做简单地获取

```
 HttpClient httpclient=new DefaultHttpClient(); 
   HttpPost httppost=new  HttpPost("http://192.168.10.104/android/sample.php");
   HttpResponse response = httpclient.execute(httppost);
   String str =  EntityUtils.toString(response.getEntity()); 
```

# android - 状态改变时播放声音（Android）

> ID：13669215
> 
> 赞同：0
> 
> 时间：2012-12-02T12:17:05.060
> 
> 标签：android, audio, notifications

我创建实时应用程序，并在活动中每 5 秒检查一次链接 url 并获取结果的字符串值

我检查结果与

```
If oldvalue <> newvalue do 
   Play a sound And Show "Alert" in notification area 
```

我怎样才能像服务一样在后面工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T12:38:50.753

“每 5 秒检查一次链接” 您确实知道会消耗多少电池，对吗？只是在说'...

无论如何，看看 NotificationCompat 类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T13:08:53.640

您和您的用户都不会对此解决方案感到满意。

既然你已经有一个服务器，你正在检查，为什么不实现推送机制，只要有一个新的事件。

很简单，为此使用 Google Cloud Messaging，这是一个完美的解决方案。

当状态发生变化时，您调用推送代码，它会提醒用户。它甚至可以弹出通知、播放声音或调用活动（如果需要）。

如果您在实施 GCM 方面需要任何帮助，请告诉我。

使用以下链接，它们非常好。

[http://developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)

[http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

干杯!

# php - iphone sdk \Uxxx 转 utf-8

> ID：13669217
> 
> 赞同：1
> 
> 时间：2012-12-02T12:17:33.790
> 
> 标签：php, iphone, mysql, ios5, utf-8

我正在开发一个 iphone 应用程序，我通过 SOAP 将用户信息发送到我的服务器，在那里我将它们作为 UTF-8 字符串存储在我的数据库中。

问题是，当服务器接收到字符串时，它们会以Unicode 格式发送，格式为例如\U00fc，它应该是'ü'。包含 '\U00fc' 的字符串已正确存储在数据库中。但是当我阅读数据库时，我只得到'U00fc' \ 消失了......

但也为了更好的读取选项，我实际上想将 '\U00fc' 转换为 'ü' 将其存储到数据库中，然后在读取数据库时我会将其转换回 iPhone。

我只是在 PHP 中找不到任何这样做的函数......我很确定这样的东西一定已经存在于某个地方，而不是我必须重新实现整个 unicode 表......

如果你知道任何建议，如果你能帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:44:58.740

如果您的输入坚持使用大写`\U`，您可以使用以下方法修复它：

```
<?php
header( "Content-Type: text/plain; charset=UTF-8");

function fixEscapeSequence( $str ) {
    return preg_replace( '/\\\U([a-fA-F0-9]{4})/', '\u$1', $str );
}

echo json_decode(fixEscapeSequence('"M\U00FCller"'));
//Müller 
```

或者全部包裹在一个中：

```
function uToUTF8( $str ) {
    $needle = array( "\\", '"');
    $repl = array( "\\\\", '\\"' );
    $str = str_replace( $needle, $repl, $str );
    return json_decode( preg_replace( '/\\\\\\\U([a-f0-9]{4})/i', '\u$1', "\"{$str}\"" ) );
}

echo uToUTF8( 'M\u00FCller');
//Müller
echo uToUTF8( 'M\U00FCller');
//Müller 
```

# sql - 创建触发器 - SQL 服务器

> ID：13669220
> 
> 赞同：3
> 
> 时间：2012-12-02T12:18:14.433
> 
> 标签：sql, sql-server-2008, triggers

一个学生要去一所学校，他将支付每月的费用。该值将是（`FatherSalary + MotherSalary)*0.05`

我昨天才开始研究触发器，我做了一个但我得到了错误

> *消息 515，级别 16，状态 2，过程 TR_Calc_Value，第 25 行
> 无法将值 NULL 插入到列“IDStudent”、表“HW32.dbo.Enrollment”中；列不允许空值。插入失败。*

当我在表中插入值时`Enrollment`。任何帮助如何解决这个问题？

```
USE master;

IF DB_ID (N'HW32') IS NOT NULL
   DROP DATABASE HW32;

CREATE DATABASE HW32;

USE HW32
CREATE TABLE Family(
  IDFamily int IDENTITY(1,1),
  FirstName nchar(20) NOT NULL,
  LastName nchar(20) NOT NULL,
  Gender nchar(1)  NOT NULL,
  Salary money,
  CONSTRAINT PK_Family PRIMARY KEY(IDFamily),
  CONSTRAINT CK_Family_Gender CHECK (Gender IN ('M','F'))
) 

CREATE TABLE Student(
  IDStudent int IDENTITY(1,1),
  FirstName nchar(20) NOT NULL,
  LastName nchar(20) NOT NULL,
  CONSTRAINT PK_Student PRIMARY KEY(IDStudent)
)

CREATE TABLE Filiation(
  IDStudent int,
  IDFamily int,
  Filiation nchar(20) NOT NULL,
  CONSTRAINT FK_Filiation_IDStudent FOREIGN KEY (IDStudent)
  REFERENCES Student(IDStudent),
  CONSTRAINT FK_Filiation_IDFamily FOREIGN KEY (IDFamily)
  REFERENCES Family(IDFamily),
  CONSTRAINT PK_Filiation PRIMARY KEY(IDStudent,IDFamily)
)

CREATE TABLE Enrollment(
  IDEnrollment int IDENTITY(1,1),
  IDStudent int NOT NULL,
  Status nchar(20) NOT NULL,
  MonthlyPayment money,
  CONSTRAINT PK_Enrollment PRIMARY KEY(IDStudent), 
  CONSTRAINT FK_Enrollment_IDStudent FOREIGN KEY (IDStudent)
  REFERENCES Student(IDStudent),
  CONSTRAINT CK_Enrollment_Status CHECK(Status IN('Acepted','Rejected')),
  CONSTRAINT UC_Enrollment UNIQUE (IDEnrollment)
)

USE HW32
GO
CREATE TRIGGER TR_Calc_Value 
ON Enrollment 
AFTER INSERT, UPDATE AS
    DECLARE @monthlyPayment money, @sFather money, @sMother money
BEGIN
    SET @sFather = (SELECT FAM.Salary
            FROM Family FAM 
            LEFT JOIN Filiation F ON F.IDFamily = FAM.IDFamily
            LEFT JOIN inserted I ON I.IDStudent = F.IDStudent
            WHERE F.IDStudent = I.IDStudent AND FAM.Gender = 'M')

    SET @sMother = (SELECT FAM.Salary 
            FROM Family FAM 
            LEFT JOIN Filiation F ON F.IDFamily = FAM.IDFamily
            LEFT JOIN inserted I ON I.IDStudent = F.IDStudent
            WHERE F.IDStudent = I.IDStudent AND FAM.Gender = 'F')

    SET @monthlyPayment = ((@sFather + @sMother) * 0.05)

    INSERT INTO Enrollment (MonthlyPayment) VALUES (@monthlyPayment)
END
GO

USE HW32
INSERT INTO Family VALUES('John', 'Smith', 'M', 800)
INSERT INTO Family VALUES('Anna', 'Smith', 'F', 800)

INSERT INTO Student VALUES('Carl', 'Smith')

INSERT INTO Filiation VALUES(1, 1, 'Father')
INSERT INTO Filiation VALUES(1, 2, 'Mother')

INSERT INTO Enrollment (IDStudent, Status) VALUES(1, 'Accepted') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T12:26:41.343

您不想在触发器中*插入*一行 - 这些行已经添加。相反，您想要执行*UPDATE*：

```
CREATE TRIGGER TR_Calc_Value ON Enrollment AFTER INSERT, UPDATE AS
BEGIN
   UPDATE E 
   set MonthlyPayment = (

      select 0.05 * SUM(Salary) 
      from Family FAM 
      inner join Filiation F 
      on FAM.IDFamily= F.IDFamily 
      where F.IDStudent = I.IDStudent
      )

   from Enrollment E
   inner join inserted I
   on E.IDEnrollment=  I.IDEnrollment 
```

注意事项

*   以上正确处理`inserted`包含多行
*   我不区分父亲和母亲（因为他们似乎被同等对待）
*   如果学生有多个父亲和母亲，他们都会被包括在内。这是否正确是有争议的，并且可能无法使用更好的约束 - 但最初的触发器也不能很好地应对这种情况。

* * *

根据我的评论，如果始终可以从其他表中重新计算此信息，我还建议*不要*存储此信息（不确定在这种情况下是否正确，但如果它*应该*反映其他表，则需要更多触发器保持一切一致。

并且作为 per-marc 的已删除答案，在进行插入时始终指定列列表也是一个好习惯。这不是此特定错误的原因，但有助于更好地记录您的意图，并有助于通过目视检查快速消除可能的错误。

# facebook - 分享现有的 Facebook 帖子（从而增加原始帖子的“分享”计数

> ID：13669224
> 
> 赞同：7
> 
> 时间：2012-12-02T12:19:00.570
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

嘿，

我有一个应用程序，我正在尝试使用 Facebook PHP SDK 将现有 facebook 公共内容从帐户（如照片链接）共享到我的墙上，并调用“graph.facebook.com/me/feed”并使用帖子的原始“链接”属性，如下所示： [http ://www.facebook.com/photo.php?fbid=XXXXXXX&set=a.XXXX.XX.XXXXXX&type=1&relevant_count=1](http://www.facebook.com/photo.php?fbid=XXXXXXX&set=a.XXXX.XX.XXXXXX&type=1&relevant_count=1)

结果是一个帖子，上面写着“亚历克斯共享 XXX 的照片”并显示了照片的预览，但原始帖子的“分享”没有增加，也没有显示我通过那里的电话所做的分享。

有可能解决这个问题吗？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:45:36.137

目前没有使用 API 或 PHP SDK 转发现有帖子的方法。您唯一能做的就是创建共享的副本并发布它，但它不会增加您已经找到的原始共享计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T08:13:19.343

Niraj Shah 是对的，没有办法转发帖子。

但是有一个漏洞，因为您可以转发照片帖子：

[https://stackoverflow.com/a/16294769/441907](https://stackoverflow.com/a/16294769/441907)

# qt - 如何使用 QtWebkit 分析来自服务器的回复？

> ID：13669227
> 
> 赞同：1
> 
> 时间：2012-12-02T12:19:34.500
> 
> 标签：qt, qtwebkit, qwebview

我是Qt的初学者...

在我的程序中，我有一个**Qwebview**，我尝试访问某个站点。

如何**分析**用户向服务器发出的请求？例如：用户提交表单..

以及**如何分析来自服务器的回复**......？例如：当用户提交表单时，服务器通过将音频文件流式传输到浏览器进行回复。我想捕获这些音频流以进行分析。

有什么帮助吗？感谢你..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:56:30.217

使用[QWebInspector类](http://doc.qt.digia.com/qt/qwebinspector.html)

如果你已经开发过前端，可能对“Chrome 开发者工具”或者“Safari Web Inspector”看起来很熟悉，其实这两种浏览器都是由 WebKit 驱动的，而这个工具就是 WebInspector（http://trac. webkit.org/wiki/WebInspector)

调试愉快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:51:04.677

创建一个自定义[网络访问管理器](http://doc.qt.digia.com/qt/qnetworkaccessmanager.html)并为您的网页设置它（请参阅[QWebPage::setNetworkAccessManager](http://doc.qt.digia.com/qt/qwebpage.html#setNetworkAccessManager)）。在此特殊实现中，创建代理数据的自定义网络回复，请参阅此[镜像工具](http://gitorious.org/qtwebkit/performance/blobs/master/host-tools/mirror/main.cpp)以获取示例实现。

# cross-platform - Windows 和 Linux 的运行时有什么区别？

> ID：13669230
> 
> 赞同：0
> 
> 时间：2012-12-02T12:20:19.453
> 
> 标签：cross-platform

最近我尝试使用 Qt 使我的代码跨平台。我在 Qt for Windows 和 Qt for Linux 下编译了相同的代码。但是，我的程序似乎在 Windows 下正常运行，但在 Linux 中（随机）崩溃。我很难弄清楚它为什么会在 Linux 上崩溃。也许了解 Windows 和 Linux 之间的区别是一个好的开始？或者，也许 Windows 有一些错误预防机制？

**更新：** 经过一些工作，我发现这是`ceil()`函数使程序崩溃的结果。

```
void setPedestriansByRealCo(int &_x,int &_y,myVector &v)
{
    int _row = 0,_colm = 0;
    boost::tuples::tie(_row,_colm) = mathOp::countRowAndColumn(_x,_y);
    setPedestriansByRowColumn(_row,_colm,v);
}

boost::tuples::tuple<int,int> countRowAndColumn(int realX,int realY)
{
    return boost::tuples::make_tuple(
                ceil((float)realY / gridWidth),
                ceil((float)realX / gridWidth)
                );
} 
```

...

```
for(int i = 0; i < (int)_srcCurrentPointSet.size(); ++i) {
    int _areaRow,_areaColm;
    boost::tuples::tie(_areaRow,_areaColm) = judgePointArea(
                       _srcCurrentPointSet[i],
                       boost::tuples::make_tuple(32,24)); //use the result of countROwAndColumn
    areaPointsCurr[_areaRow * singleAreaColm + _areaColm].push_back(_srcCurrentPointSet[i]);   //<---SIGSEGV
} 
```

如果输入的`countRowAndColumn`是(181,715)，那么输入的输出就是`_srcCurrentPointSet`<18,72>，这会在Linux的for循环中引起SIGSEGV(字段为128*72)。

# maven - maven依赖错误

> ID：13669234
> 
> 赞同：0
> 
> 时间：2012-12-02T12:22:04.070
> 
> 标签：maven

我正在尝试构建一个包含以下 pom 的项目：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <build>
    <plugins>
        <plugin>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-java2ws-plugin</artifactId>
            <dependencies>
                <dependency>
                    <groupId>org.apache.cxf</groupId>
                    <artifactId>cxf-rt-frontend-jaxws</artifactId>
                    <version>${cxf.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.apache.cxf</groupId>
                    <artifactId>cxf-rt-frontend-simple</artifactId>
                    <version>${cxf.version}</version>
                </dependency>
            </dependencies>
        </plugin>
    </plugins>
    <pluginManagement>
        <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.apache.cxf</groupId>
                                    <artifactId>
                                        cxf-java2ws-plugin
                                    </artifactId>
                                    <versionRange>
                                        [2.4.1-fuse-00-43,)
                                    </versionRange>
                                    <goals>
                                        <goal>java2ws</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore></ignore>
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
  </build>
</project> 
```

但是我收到以下错误，我不明白：

[错误] 插件 org.apache.cxf:cxf-java2ws-plugin:2.4.3-fuse-01-02 或其依赖项之一无法解析：无法读取 org.apache.cxf:cxf-java2ws 的工件描述符-plugin:jar:2.4.3-fuse-01-02：在中央找不到工件 org.apache.cxf:cxf-java2ws-plugin:pom:2.4.3-fuse-01-02 (http://repo .maven.apache.org/maven2) -> [帮助 1]

你能帮我理解如何解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:18:12.643

尝试从本地存储库中删除 org.apache.cfx 组。如果这没有帮助，请使用 -X 开关运行 maven。在浏览器中打开工件的 url 并验证该文件是否存在于存储库中并且其 pom.xml 是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T12:33:26.973

从错误中，我们可以看到无法解析依赖项。

您的依赖项配置之一一定有问题。

对于第一个依赖项，请写下：

```
<groupId>org.apache.cxf</groupId>
<artifactId>cxf-rt-frontend-jaxws</artifactId>
<version>2.7.0</version> 
```

第二个写这个：

```
<groupId>org.apache.cxf</groupId>
<artifactId>cxf-rt-frontend-simple</artifactId>
<version>2.7.0</version> 
```

* * *

[PS：您始终可以使用此处](http://search.maven.org/#browse) 检查特定库的配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-09T14:30:17.107

我遇到了这个问题，当我为我的项目中的一个 jar 文件创建路径并且我的项目已经有相同的 jar 文件时。当我从配置构建路径、库中删除外部附加的 jar 文件时。问题得到解决。 [在此处输入图像描述](https://i.stack.imgur.com/DbgqV.png)

# netbeans - Netbeans Java：如何将另一个具有依赖项的项目作为库添加？

> ID：13669237
> 
> 赞同：4
> 
> 时间：2012-12-02T12:22:50.387
> 
> 标签：netbeans, dependencies, project, libraries

假设一组简单的项目 A、B、C，每个项目都需要使用同一个公共项目 Z。所有部分都在持续开发中。

所以我们将项目 Z 作为库添加到 A、B 和 C。

作为示例细节：A 类有一个方法，main()。Z 类是一个简单的基于 JFrame 的表单。Z 包含 NB IDE 的默认 main() 来实例化表单，因此它可以单独运行，但在示例使用中，A.main() 调用 Z.main() 来显示表单。

这适用于 Z 类中的简单表单。

但是，假设我们从 SwingX 或其他非标准库向 Z 类的表单添加组件。此自动将相应的库依赖项添加到项目 Z。我们可以通过直接运行 Z.main() 来测试 Z - 工作正常。但是，如果我们现在重新编译并运行 A.main()，则会引发异常：找不到 SwingX（或其他）库。

这可以通过将 Z 的依赖项也添加到 A 来实现。所以问题似乎是这种将某些项目添加为库的机制并没有考虑添加其他库/项目的*依赖*项。

什么是正确的解决方案？

Netbeans 7.2，使用 ANT。

可能是这些缺乏检查答案的类似问题的重复：

[在 netbeans 中添加其他项目作为库](https://stackoverflow.com/questions/10315597/add-other-projects-as-library-in-netbeans)

[Netbeans - 添加当前正在编辑的库](https://stackoverflow.com/questions/5928139/netbeans-add-library-that-is-currently-being-edited)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T02:50:02.353

此问题的主题包含在此 NetBeans 错误报告中： [Bug 47507 - [40cat] Transitively required libraries not automatically added to runtime classpath](http://netbeans.org/bugzilla/show_bug.cgi?id=47507)

令人难以置信的是，它已经活跃了八年多，并且受到了 19 个重复问题的影响。这个问题有很长的讨论线索。用户“fommil”在 2008 年 1 月 10 日提供了一种适度有用的解决方法：

“我的解决方法是，对于每个“[依赖库]项目”，我在库管理器中定义一个名为“library.dep”的库。这是我为该项目的依赖项定义类路径、源代码和 javadocs 的地方。然后，如果另一个项目曾经依赖于“项目”，我将“project.dep”添加到它的运行时（和测试运行时）依赖项中。”

fommil 继续讨论这种方法的缺点，但也许总比没有好。

无论如何，我将宣布这个问题“已回答”，即使没有“解决”。

# javascript - 从 D3.js 轴中删除结束标记

> ID：13669239
> 
> 赞同：44
> 
> 时间：2012-12-02T12:23:17.263
> 
> 标签：javascript, d3.js

我正在使用（优秀的）D3.js 来生成一些绘图，但我找不到从 x 和 y 轴上移除结束刻度的方法。

以 y 轴为例。

当结束刻度值与标签一致时，我可以拥有它。

但是，当最后一个圆形标签低于绘图末尾时，我得到两个刻度，一个用于最后一个圆形标签，一个位于 y 轴末端的上方。

我不希望这个结束标记可见，因为我发现它出现的时间少于标签之间的常规间隔会分散注意力。

有关我所描述的示例，请参见此处，刻度为`0`和`15`是结束刻度：

```
15 ─┐ 
    | 
10 _| 
    |
5  _|
    |
0  ─┤────── 
```

有小费吗？

PS 作为回应，我可以明确设置刻度。但我喜欢隐式生成刻度的便利性，只是不希望未标记的刻度污染轴。因此，理想的解决方案（如果存在）也会考虑在内。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2015-01-27T17:21:58.510

对于任何遇到这个问题的人，因为您要做的就是从轴上删除两个末端刻度，这将起到作用：

```
.outerTickSize(0) 
```

将其添加到您进行的任何轴调用中，例如：

```
d3.svg.axis().outerTickSize(0) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-02T12:49:56.237

这些[`axis.tick*`功能](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-ticks)可以帮助您。您有多种可能性来阻止您所描述的行为。`tickValues()`您可以使用该函数显式设置刻度。或者，您可以使用 将结束刻度的大小设置为 0 `tickSize()`。您还可以使用该`ticks()`功能控制基础规模。

根据您的特定情况，其中一个选项可能比其他选项更有意义。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-06-04T02:53:19.487

在 d3.js v4.x 中使用`.tickSizeOuter(0)`，例如：

```
self._leftAxis = d3.axisLeft(self._y)
      .tickSizeInner(3) // the inner ticks will be of size 3
      .tickSizeOuter(0); // the outer ones of 0 size 
```

请注意，下面的零刻度被认为是内部

[![在此处输入图像描述](../Images/837d88ad77757489f9faaf5d6139a354.png)](https://i.stack.imgur.com/eFbpk.png)

这个 d3.js v4 文档：[https ://github.com/d3/d3-axis](https://github.com/d3/d3-axis)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-05-25T09:36:34.207

如果您只想隐藏边界值并将隐式行为保持在中间，您可以`SVG`在绘制之后修改轴对象

说，在这里你绘制/更新你的轴：

```
g.selectAll(".x.axis").call(xAxis); 
```

现在 g 将包含`.tick`分类对象。它们中的每一个都将引用一个刻度值。您可以选择它们并设置可见性属性：

```
d3.select(g.selectAll(".tick")[0][0]).attr("visibility","hidden"); 
```

`d`或者，您可以通过其值或索引来处理任何特定的报价`i`

```
g.selectAll(".tick")
    .each(function (d, i) {
        if ( d == 0 ) {
            this.remove();
        }
    }); 
```

不过要小心`.remove()`。有时第一个值已经被删除，它会在更新时删除第二个值。可见性隐藏更可靠。

*归功于 d3-js 谷歌小组的 Ian & Denis [https://groups.google.com/forum/#!topic/d3-js/LBxR_finiME](https://groups.google.com/forum/#!topic/d3-js/LBxR_finiME)*

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-12T15:36:02.600

使用以下方式删除结束刻度：note tickSize(inner, outer)

```
var xAxis = d3.svg.axis().scale(x).
                tickSize(3, 0).orient("bottom").tickFormat( ... ); 
```

如果您在 tickSize(inner, outer) 中将外部参数设置为 0，您将不会获得外部刻度。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-15T07:39:45.093

我不确定，外部刻度大小与轴的第一个或最后一个刻度有什么关系。

* * *

`tickSize``<line>`实际上控制刻度组内元素的长度。因此，它处理`<text>`刻度元素与轴之间的距离**或**从刻度位置开始的辅助线的长度，这取决于轴的方向和它被移动到的位置（通过 css `translate()`）。

这是一个刻度组的样子：

```
<g transform="translate(10,0)" style="opacity: 1;" class="tick">
   <line x2="0" y2="-15"></line>
   <text x="0" y="-18" style="text-anchor: middle;" dy="0em">0.0</text>
</g> 
```

现在您可以使用方法来控制元素的`x2`和`y2`属性。在这里，我使用和作为 x 轴，它已移至图表底部。所以刻度的标签以一种非常混乱的方式投射到图表中。`<line>``tickSize``tickSize(15, 0)``orientation('top')`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-13T16:17:14.243

# D3 v5.9.2 的工作解决方案：

1.  声明`yAxis`并设置属性后，将其包装在 a 中`g`并**调用**它：

    ```
     svg.append("g").attr("id", "yAxisG").call(yAxis); 
    ```

2.  从轴组中删除第一个`<path>`元素：

    ```
     d3.select("g#yAxisG").select("path").remove(); 
    ```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2019-03-27T10:28:53.660

只需删除两个轴：

```
d3.selectAll('.axis').remove(); 
```

# python - 什么是键=lambda

> ID：13669252
> 
> 赞同：71
> 
> 时间：2012-12-02T12:24:41.633
> 
> 标签：python, lambda, key

在使用一些内置函数（如 sorted、sum...）时，我注意到了`key=lambda`

什么是拉姆达？它是如何工作的？

还有哪些函数使用 key=lambda？

是否还有其他关键值，例如，`key=?`

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-12-02T12:26:44.953

A[`lambda`](http://docs.python.org/reference/expressions.html#lambda)是一个匿名函数：

```
>>> f = lambda: 'foo'
>>> print f()
foo 
```

它通常用于`sorted()`将可调用对象作为参数（通常是`key`关键字参数）的函数中。`lambda`只要它是可调用对象，您也可以提供现有函数而不是那里。

以[`sorted()`函数](http://docs.python.org/library/functions.html#sorted)为例。它将按排序顺序返回给定的迭代：

```
>>> sorted(['Some', 'words', 'sort', 'differently'])
['Some', 'differently', 'sort', 'words'] 
```

但这会将大写单词排在小写单词之前。使用`key`关键字，您可以更改每个条目，以便对其进行不同的排序。我们可以在排序之前将所有单词小写，例如：

```
>>> def lowercased(word): return word.lower()
...
>>> lowercased('Some')
'some'
>>> sorted(['Some', 'words', 'sort', 'differently'], key=lowercased)
['differently', 'Some', 'sort', 'words'] 
```

我们必须为此创建一个单独的函数，我们不能将该`def lowercased()`行内联到`sorted()`表达式中：

```
>>> sorted(['Some', 'words', 'sort', 'differently'], key=def lowercased(word): return word.lower())
  File "<stdin>", line 1
    sorted(['Some', 'words', 'sort', 'differently'], key=def lowercased(word): return word.lower())
                                                           ^
SyntaxError: invalid syntax 
```

`lambda`另一方面，可以直接指定，内联在表达式`sorted()`中：

```
 >>> sorted(['Some', 'words', 'sort', 'differently'], key=lambda word: word.lower())
['differently', 'Some', 'sort', 'words'] 
```

Lambda 仅限于一个表达式，其结果是返回值。

Python 库中有很多地方，包括内置函数，它们将可调用对象作为关键字或位置参数。这里有太多的名字，他们经常扮演不同的角色。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-09-02T11:07:23.910

在 Python 中，**lambda**是用于定义**匿名函数**（没有名称的函数）的关键字，这就是它们被称为**lambda 函数**的原因。

***基本上***它用于定义可以/不能接受**参数**并返回**数据**/**表达式值的****匿名函数**。让我们看一个**例子**。

 ******```
>>> # Defining a lambda function that takes 2 parameters(as integer) and returns their sum
... 
>>> lambda num1, num2: num1 + num2 
<function <lambda> at 0x1004b5de8>
>>> 
>>> # Let's store the returned value in variable & call it(1st way to call)
... 
>>> addition = lambda num1, num2: num1 + num2
>>> addition(62, 5)
67
>>> addition(1700, 29)
1729
>>> 
>>> # Let's call it in other way(2nd way to call, one line call )
... 
>>> (lambda num1, num2: num1 + num2)(120, 1)
121
>>> (lambda num1, num2: num1 + num2)(-68, 2)
-66
>>> (lambda num1, num2: num1 + num2)(-68, 2**3)
-60
>>> 
```

现在让我回答你的**第二个**问题。第**一个**答案也很棒。这是我自己用另一个例子来解释的方式。

假设我们有一个项目列表（**整数**和**带有数字内容的字符串**），如下所示，

```
nums = ["2", 1, 3, 4, "5", "8", "-1", "-10"] 
```

我想使用**sorted()**函数对其进行排序，让我们看看会发生什么。

```
>>> nums = ["2", 1, 3, 4, "5", "8", "-1", "-10"]
>>> sorted(nums)
[1, 3, 4, '-1', '-10', '2', '5', '8']
>>> 
```

它没有给我我所**期望****的**，如下所示，

 **```
['-10', '-1', 1, '2', 3, 4, '5', '8'] 
```

这意味着我们需要一些**策略**（以便 sorted 可以将我们的字符串项视为整数）来实现这一点。这就是使用**key**关键字参数的原因。请看下面的。

```
>>> nums = ["2", 1, 3, 4, "5", "8", "-1", "-10"]
>>> sorted(nums, key=int)
['-10', '-1', 1, '2', 3, 4, '5', '8']
>>> 
```

让我们使用 lambda 函数作为**键的值**

```
>>> names = ["Rishikesh", "aman", "Ajay", "Hemkesh", "sandeep", "Darshan", "Virendra", "Shwetabh"]
>>> names2 = sorted(names)
>>> names2
['Ajay', 'Darshan', 'Hemkesh', 'Rishikesh', 'Shwetabh', 'Virendra', 'aman', 'sandeep']
>>> # But I don't want this o/p(here our intention is to treat 'a' same as 'A')
...
>>> names3 = sorted(names, key=lambda name:name.lower())
>>> names3
['Ajay', 'aman', 'Darshan', 'Hemkesh', 'Rishikesh', 'sandeep', 'Shwetabh', 'Virendra']
>>> 
```

您可以定义自己的函数（**callable**）并将其作为**key**的值提供。

亲爱的程序员，我已经为您编写了以下代码，请尝试**理解**并**评论**您的解释。我很高兴看到你的解释（很简单）。

```
>>> def validator(item):
...     try:
...         return int(item)
...     except:
...         return 0
... 
>>> sorted(['gurmit', "0", 5, 2, 1, "front", -2, "great"], key=validator)
[-2, 'gurmit', '0', 'front', 'great', 1, 2, 5]
>>> 
```

我***希望***它会有**用**。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-12-02T12:32:39.667

Lambda 可以是任何函数。所以如果你有一个函数

```
def compare_person(a):
         return a.age 
```

您可以像这样对 Person 列表（每个都有一个 age 属性）进行排序：

```
sorted(personArray, key=compare_person) 
```

这样，列表将按年龄升序排序。

该参数被称为 lambda 因为 python 有一个漂亮的 lambda 关键字用于动态定义此类函数。除了定义函数 compare_person 并将其传递给 sorted 之外，您还可以编写：

```
sorted(personArray, key=lambda a: a.age) 
```

它做同样的事情。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-06-04T07:18:48.220

```
 >>> sorted(['Some', 'words', 'sort', 'differently'], key=lambda word: word.lower()) 
```

实际上，上面的代码可以是：

```
>>> sorted(['Some','words','sort','differently'],key=str.lower) 
```

根据[https://docs.python.org/2/library/functions.html?highlight=sorted#sorted](https://docs.python.org/2/library/functions.html?highlight=sorted#sorted)，key 指定一个参数的函数，用于从每个列表元素中提取比较键：key=str。降低。默认值为无（直接比较元素）。********

# actionscript-3 - AS3：具有多个形状对象的 testHitObject

> ID：13669253
> 
> 赞同：0
> 
> 时间：2012-12-02T12:25:07.887
> 
> 标签：actionscript-3, flash-cs5

嗨，我有一个很难用语言解释的问题，所以让我放一张图片然后试着解释一下。由于我是stackoverflow的新用户，我无法在帖子中上传图片，所以我会放一个链接：[http ://tinypic.com/r/kbrpt2/6](http://tinypic.com/r/kbrpt2/6)

**我想要什么：**
我希望能够将我的玩家（蓝球）移动到第 2 点并调用函数 player.hitTestObject(Wall) 并取回值 false

**所以我的问题是**：
当我将玩家（蓝球）移动到点 1 或 2 并调用函数 player.hitTestObject(Wall) 它返回值 true

**所以基本上：**
我希望函数 player.hitTestObject(Wall) 仅在触摸对象（形状）的灰色部分时返回 true，我希望它当玩家对象位于墙对象中间但不接触灰色部分（形状）时返回 false。

**一种解决方案（但不是最佳的）：**
一种解决方案是您创建 3 个对象，然后测试 3 次以查看玩家对象是否接触了任何墙壁，在这个简单的示例中这没问题，但如果您创建更大的对象，代码开始看起来很乱。

因此，如果有人知道**任何其他解决方案**，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:49:23.983

我相信 hitTestObject 使用剪辑的边界框来检查碰撞。您可能想查看 hitTestPoint

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#hitTestPoint](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#hitTestPoint) ()

这里的想法是你的墙会针对点的 x/y 调用 hitTestPoint。确保将 shapeFlag 设置为 true，例如

myWall.hitTestPoint(point.x, point.y, true);

我的两分钱——我相信这些内置的碰撞方法非常慢。如果您可以将墙壁分成单独的矩形，您可能能够以更高效的方式使用基本数学检查碰撞。

# search - 在一个范围内提升 solr 项目：分面搜索是一种选择吗？

> ID：13669256
> 
> 赞同：1
> 
> 时间：2012-12-02T12:25:38.767
> 
> 标签：search, solr, lucene, facet, solr-boost

我想在 Solr 中列出一长串具有非常特定顺序的项目。我没有使用 Solr 方面的经验：它们是在日期范围内对结果进行分组的好方法，在该范围内我可以稍微提升各种项目？

**订货原则**

1.  所有项目通常必须按时间顺序排列
2.  此顺序必须严格按照特定范围
3.  在这样的范围内，项目可能会获得更高的优先级
4.  在此范围内，项目可能具有超高优先级
5.  在完整列表中，某些项目可能超出其范围并停留在顶部

**示例配置**

因此，如果我有一个项目表，它可能如下所示：

1.  粘性物品 100% 在顶部
2.  事件的优先级高于博客
3.  精选始终位于某个范围内的顶部
4.  范围设置为一周（7 天）

这可能看起来像这样（*示例 1*）：

```
sticky   | 2012-11-01
blog 2   | 2012-12-02
blog 1   | 2012-12-01 
```

或者（*示例 2*，虚线仅表示周障碍）：

```
blog 5   | 2012-11-26
---------------------
featured | 2012-11-19   <<< featured are at the top in week 19-25 Nov
blog 4   | 2012-11-23
blog 3   | 2012-11-22
blog 2   | 2012-11-21
blog 1   | 2012-11-19
---------------------
featured | 2012-11-12 
```

或者（*示例 3*）：

```
event    | 2012-11-28   <<< events have a bit more prio in week 26 Nov - 2 Dec
blog 5   | 2012-11-29
blog 5   | 2012-11-28
blog 5   | 2012-11-26
---------------------
event    | 2012-11-20   <<< events have a bit more prio in week 19-25 Nov
blog 4   | 2012-11-23
blog 3   | 2012-11-22
event    | 2012-11-19   <<< events have a bit more prio in week 19-25 Nov
blog 2   | 2012-11-21
blog 1   | 2012-11-19
---------------------
blog     | 2012-11-18 
```

（澄清一下，事件的优先级（1 或 2 天或 x% 只是用于微调，目前这不是我的问题的一部分）

**问题**

现在的问题是：我知道我可以将每个字段或每个字段值的项目提升到一定数量*或*较高的值，以将其推到顶部。但我**必须**将其限制在一定范围内（在示例中为 7 天）。就像事件一样，精选**永远不会超出一周的范围。**

我听说过方面，但不确定这是否可以解决我的问题。由于我是 solr 的外行，所以很难弄清楚我是否能做到这一点。我看过 solr wiki，但所有新术语都让我对这个想法的搜索有点混乱。

我可以通过使用“分页”作为日期范围来解决这个问题（所以搜索从：[日期]到：[日期]），因此我自己创建一个“方面”。这更容易吗？如您所见，我对方面和复杂的 solr 查询一无所知:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:04:10.803

您可以做的一件事是使用分组功能。您将一年中的第几周 (GregorianCalendar WEEK_OF_YEAR) 存储在一个新的索引字段中，并以此对结果进行分组。在组内部有您定义的正常相关性计算。

这是一个示例链接：[http ://wiki.apache.org/solr/FieldCollapsing](http://wiki.apache.org/solr/FieldCollapsing)

# javascript - 如何从 javascript 函数中识别 submit() 以及为什么它不起作用

> ID：13669258
> 
> 赞同：0
> 
> 时间：2012-12-02T12:25:47.117
> 
> 标签：javascript, asp.net

我有一个用户列表，在表中每一行的末尾我添加了两个链接（“href”）：一个用于“更新”用户，第二个用于“删除”用户。因此，为了启用，我添加了对捕获用户 ID 并将另一个字段设置为“true”并将这些值插入到我之前创建的某个表单（只有两个“隐藏”字段的表单）的 javascript 函数的调用，然后函数激活 submit() 操作到服务器部分（asp.net 代码）。

我检查了 submit() 操作正常（检查了 respons.write("-----")...）

但是我知道如何通过询问提交按钮的值来识别 IsPost 中的提交表单按钮（例如： if(Request.Form["ExpertButton"]== "delete"){..some code here... .})

但是当我用 javascript 激活 submit() 时，我怎么能识别帖子？我尝试了隐藏字段的值，但它没有捕捉到它，它跳过了 if 语句......

我在调试时发现的另一个问题是，当函数 submit() 发生时，浏览器（IE9）会抛出错误......

用户代码列表：

```
foreach(var row in db.Query(displayExperts,nameOfExpert))
                {
                <tr>
                    <td class="dispExpertActScreen">@row.ExpertID</td>
                    <td class="dispExpertActScreen">@row.name</td>
                    <td class="dispExpertActScreen">@row.password</td>
                    <td class="dispExpertActScreen">@row.allowBonds</td>
                    <td class="dispExpertActScreen">@row.allowStocks</td>
                    <td class="dispExpertActScreen">@row.allowExchangeTraded</td>
                    <td class="dispExpertActScreen">@row.allowMutualFund</td>
                     <td class="dispExpertActScreen"><a href="#" onclick="expertToDelete('@row.ExpertID') ;return false;" style="color: #b04e4e">update</a></td>
                    <td class="dispExpertActScreen"><a href="#" onclick="expertToDelete('@row.ExpertID') ;return false;" style="color: #b04e4e">delete</a></td>
                </tr>
                } 
```

表格：

```
<form method="post" name="deleteExpert" style="font-size: medium; margin-top: 10%" dir="rtl">
    <input type="hidden" name="expertID" id="expertID" value="">
    <input type="hidden" name="txtJavascriptMode" id="txtJavascriptMode" value="">
</form> 
```

功能：

```
<script>

    function expertToDelete(expertID) {

        document.getElementById('expertID').value = expertID;
        document.getElementById('txtJavascriptMode').value = 'true';
        document.getElementById('deleteExpert').submit();
    }

</script> 
```

asp.net 代码：

```
@{
    var db = Database.Open("MyProjectSite");
    var display="no";
    var displayExperts="";
    var nameOfExpert="";
    var category="";
     if(IsPost)
    {
        if(Request.Form["ExpertButton"]== "search")// this is by button!!!
        {
             some code.....

        }

        Response.Write("----");
         if(Request.Form["txtJavascriptMode"] == "true")
         {
            var id=Request.Form["expertID"];
            var deleteQuery="DELETE FROM InvestmanExperts WHERE ExpertID=@0";
            db.Execute(deleteQuery,id);
         }
    }
    db.Close();
} 
```

另一个奇怪的事情是当我放这行时：

```
Response.Write("----"+Request.Form["txtJavascriptMode"]); 
```

前：

```
if(Request.Form["txtJavascriptMode"] == "true"); 
```

网站缩进看起来很糟糕，但用户的删除行工作正常，为什么？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T12:36:50.573

隐藏字段应该可以正常工作。尝试将 id 添加`deleteExpert`到您的表单中。

# java - 将地图标记从 mysql 数据库获取到 android 应用程序

> ID：13669263
> 
> 赞同：1
> 
> 时间：2012-12-02T12:26:33.933
> 
> 标签：java, android, mysql, json, google-maps

我对android编程和java编程完全陌生。我有一个现有的网络应用程序，其坐标存储在 mysql 数据库中。通过遵循一些关于 Google Map API 和 JSON 的在线教程，我编写了代码以显示存储数据库的点的地图标记。

我的 php 脚本在运行时返回以下输出

`[{"RowID":"15","LatLng":"(27.70171145916157, 85.30419380111698)","Type":"hospital"},{"RowID":"16","LatLng":"(27.704200193429045, 85.32494337005619)","Type":"hospital"}]`

我创建了一个类来解析 JSON 数据

```
 public class ImportMarkers {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public ImportMarkers() {

    }

    public JSONObject getJSONFromUrl(String url) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

最后为了在我创建的地图视图中显示标记，我使用了以下代码

```
 //url to make request
private static String url = "http://10.0.2.2/jsonsenddata.php";

//JSON Node names
private static final String id = "RowID";
private static final String latlng = "LatLng";
private static final String type = "Type";

JSONArray markers = null;

     // Creating JSON Parser instance
        ImportMarkers marker = new ImportMarkers();

        // getting JSON string from URL
        JSONObject json = marker.getJSONFromUrl(url);

        try {
            // Getting AJSONObjectrray 
            markers = json.getJSONArray(null);

            // looping through All rows
            for(int i = 0; i < markers.length(); i++){
                JSONObject c = markers.getJSONObject(i);

                // Storing each json item in variable
                String RowID = c.getString(id);
                String LatLng = c.getString(latlng);
                String Type = c.getString(type);
                String[] parts = LatLng.split(",");
                String lat = parts[0]; 
                String lon = parts[1]; 
                float latInt = Float.valueOf(lat).floatValue(); 
                float longInt = Float.valueOf(lon).floatValue(); 
                GeoPoint X = new GeoPoint((int) (latInt*1E6),(int) (longInt*1E6) ); 
                if (Type == "hospital"){
                    OverlayItem overlayItem = new OverlayItem (X , "Hospital", "ADDITION");
                    AddLocation hospital = new AddLocation (hos, MainActivity.this);
                    hospital.addLocation(overlayItem);
                    overlayList.add(hospital);
                }
                else {
                    OverlayItem overlayItem = new OverlayItem (X , "Airport", "ADDITION");
                    AddLocation airport = new AddLocation (air, MainActivity.this);
                    airport.addLocation(overlayItem);
                    overlayList.add(airport);
                }

            }
        } catch (JSONException e) {
            e.printStackTrace();
        } 
```

我不知道我的代码有什么问题，如果有人提供一些帮助，我将不胜感激。

这是我的 logcat 日志

```
12-02 13:45:41.348: D/dalvikvm(448): GC_CONCURRENT freed 174K, 4% free 6623K/6855K, paused 6ms+4ms
12-02 13:45:41.628: D/dalvikvm(448): GC_CONCURRENT freed 356K, 6% free 6823K/7239K, paused 4ms+4ms
12-02 13:45:42.028: D/dalvikvm(448): GC_CONCURRENT freed 699K, 11% free 6616K/7431K, paused 4ms+5ms
12-02 13:45:42.028: W/CursorWrapperInner(448): Cursor finalized without prior close()
12-02 13:45:42.038: W/CursorWrapperInner(448): Cursor finalized without prior close()
12-02 13:45:42.438: D/dalvikvm(448): GC_CONCURRENT freed 198K, 7% free 6929K/7431K, paused 4ms+7ms
12-02 13:45:42.789: D/dalvikvm(448): GC_CONCURRENT freed 311K, 5% free 7189K/7559K, paused 8ms+16ms
12-02 13:45:43.258: D/dalvikvm(448): GC_CONCURRENT freed 519K, 8% free 7234K/7815K, paused 5ms+7ms
12-02 13:45:43.580: D/dalvikvm(448): GC_CONCURRENT freed 267K, 6% free 7385K/7815K, paused 5ms+4ms
12-02 13:45:44.048: D/dalvikvm(448): GC_CONCURRENT freed 675K, 10% free 7259K/8007K, paused 5ms+4ms
12-02 13:45:44.148: D/AndroidRuntime(448): Shutting down VM
12-02 13:45:44.148: W/dalvikvm(448): threadid=1: thread exiting with uncaught exception (group=0x40014760)
12-02 13:45:44.168: E/AndroidRuntime(448): FATAL EXCEPTION: main
12-02 13:45:44.168: E/AndroidRuntime(448): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.finalyear.quakereact/com.finalyear.quakereact.MainActivity}: android.os.NetworkOnMainThreadException
12-02 13:45:44.168: E/AndroidRuntime(448):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
12-02 13:45:44.168: E/AndroidRuntime(448):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
12-02 13:45:44.168: E/AndroidRuntime(448):  at android.app.ActivityThread.access$500(ActivityThread.java:122)
12-02 13:45:44.168: E/AndroidRuntime(448):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
12-02 13:45:44.168: E/AndroidRuntime(448):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-02 13:45:44.168: E/AndroidRuntime(448):  at android.os.Looper.loop(Looper.java:132)
12-02 13:45:44.168: E/AndroidRuntime(448):  at android.app.ActivityThread.main(ActivityThread.java:4123)
12-02 13:45:44.168: E/AndroidRuntime(448):  at java.lang.reflect.Method.invokeNative(Native Method)
12-02 13:45:44.168: E/AndroidRuntime(448):  at java.lang.reflect.Method.invoke(Method.java:491)
12-02 13:45:44.168: E/AndroidRuntime(448):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
12-02 13:45:44.168: E/AndroidRuntime(448):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
12-02 13:45:44.168: E/AndroidRuntime(448):  at dalvik.system.NativeStart.main(Native Method)
12-02 13:45:44.168: E/AndroidRuntime(448): Caused by: android.os.NetworkOnMainThreadException
12-02 13:45:44.168: E/AndroidRuntime(448):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1077)
12-02 13:45:44.168: E/AndroidRuntime(448):  at dalvik.system.BlockGuard$WrappedNetworkSystem.connect(BlockGuard.java:368)
12-02 13:45:44.168: E/AndroidRuntime(448):  at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:208)
12-02 13:45:44.168: E/AndroidRuntime(448):  at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:431)
12-02 13:45:44.168: E/AndroidRuntime(448):  at java.net.Socket.connect(Socket.java:901)
12-02 13:45:44.168: E/AndroidRuntime(448):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
12-02 13:45:44.168: E/AndroidRuntime(448):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
12-02 13:45:44.168: E/AndroidRuntime(448):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
12-02 13:45:44.168: E/AndroidRuntime(448):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
12-02 13:45:44.168: E/AndroidRuntime(448):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
12-02 13:45:44.168: E/AndroidRuntime(448):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
12-02 13:45:44.168: E/AndroidRuntime(448):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
12-02 13:45:44.168: E/AndroidRuntime(448):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
12-02 13:45:44.168: E/AndroidRuntime(448):  at com.finalyear.quakereact.ImportMarkers.getJSONFromUrl(ImportMarkers.java:38)
12-02 13:45:44.168: E/AndroidRuntime(448):  at com.finalyear.quakereact.MainActivity.onCreate(MainActivity.java:80)
12-02 13:45:44.168: E/AndroidRuntime(448):  at android.app.Activity.performCreate(Activity.java:4397)
12-02 13:45:44.168: E/AndroidRuntime(448):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
12-02 13:45:44.168: E/AndroidRuntime(448):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
12-02 13:45:44.168: E/AndroidRuntime(448):  ... 11 more
12-02 13:46:42.368: I/Process(448): Sending signal. PID: 448 SIG: 9 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:03:23.763

例外是[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。
> 
> 这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。

因此，在单独的线程上获取。`AsyncTask`也许？（如果您需要更新 UI）

# svn - 如何在提交后挂钩中执行命令？

> ID：13669273
> 
> 赞同：1
> 
> 时间：2012-12-02T12:27:55.450
> 
> 标签：svn, post-commit, svn-hooks

`mycommand`每当完成对 SVN 子目录的提交时，我希望我的 SVN 服务器执行特定命令`svn-rep/myfolder`。

我该怎么做？我知道有预装钩子的钩子目录。但是我将如何从中制作自定义钩子？SVN 如何知道何时调用哪个钩子 - 它是基于文件名的吗？并且我将如何限制仅在提交更改某些文件时才执行挂钩`svn-rep/myfolder`？

需要明确的是：该命令永远不会改变，它只是引用位于服务器某处的另一个脚本。

**编辑**：我刚刚实现`post-commit`并且出于测试目的，它应该将 SVN 目录的修订号附加到已经存在的（并且每个人都可以写）：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import os
from subprocess import Popen, PIPE

dirRevisionCmd  = 'svn info /var/www/main | grep -i "Letzte geänderte Rev"

process = Popen(headRevisionCmd, shell=True, stdout=PIPE, stderr=PIPE)
out, err = process.communicate()

with open("/var/lib/svn/rep/hooks/testfile", "a") as testfile:
    testfile.write("err:" + err.strip() + "\n")
    testfile.write("out:" + out.strip() + "\n") 
```

这导致每次提交后标准输出为空：

```
www-data
err:
out: 
```

如果我`post-commit`手动执行，“out”行包含一些文本。那么为什么它不适用于 SVN？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T00:47:16.063

服务器上的 Subversion 存储库内部是一个名为`hooks`. 里面是***示例***钩子脚本。它们都以`.tmpl`后缀结尾。他们真的是占位符。仅此而已。

如果一个程序或脚本被调用`post-commit`，Subversion 将在有人提交后执行它。这是可执行文件、Windows Batch 程序还是 Unix shell 脚本都没有关系。Subversion 将在提交发生后执行它。脚本的作用无关紧要。真的就是这么简单。

如果已经有一个名为 的程序`post-commit`怎么办？你必须修改它。正如我所说，默认存储库中没有钩子——只有一堆*模板*，你可以根据需要使用它们。如果有一个`post-commit`程序，那么肯定有人已经添加了它。

因此，只需将您的命令放在`hooks`目录中，确保它是可执行的，然后调用它`post-hook`。Subversion 将在有人提交后执行它。

* * *

您从未指定要执行的此命令是什么，因此我无法提供任何进一步的建议。但是，通常有一些挂钩脚本的准则：

1.  挂钩脚本的执行时间不应超过几毫秒。当一个钩子脚本执行时，它会占用提交者的机器，直到钩子脚本完成。例如，一个常见问题是如何通过提交后脚本进行部署。这是一个坏主意，因为它会长时间占用提交者的计算机。有更好的方法来做到这一点。
2.  挂钩脚本在服务器上运行，提交发生在客户端机器上。这表示：
    1.  钩子脚本无权访问客户端的环境。
    2.  挂钩脚本无法查询客户端。
    3.  挂钩脚本无法修改提交。
    4.  挂钩脚本无法搜索客户端的工作目录。
        *   这也意味着预提交钩子除了接受或拒绝提交之外不能做任何事情。
    5.  挂钩脚本不应导致新的提交。首先是提交钩子的问题，导致提交导致自身在循环中再次运行。其次，它使刚刚提交的人的工作目录过时。另外，这意味着你 50% 的日志历史只是你的提交钩子在自言自语。
3.  最后，Hook 脚本有一种非常简单的方式与客户端对话：
    1.  挂钩脚本无权访问客户端的`STDIN`或`STDOUT`. 事实上，钩子脚本无法访问 STDIN 或 STDOUT。
    2.  挂钩脚本通过将退出值设为零来显示成功。他们通过执行除零以外的退出值来显示失败。
    3.  如果钩子以非零值退出，则钩子脚本生成的 STDERR 将被发送到客户端，但不会发送到子进程。这样，您可以向客户端解释挂钩脚本失败的原因。

正如其他人所说：阅读在线的[精美手册](http://svnbook.com)。它一步一步地处理事情。创建一个测试存储库并使用钩子脚本。它们真的很简单。你可以看看我写的一个[post-commit 钩子。](https://github.com/qazwart/SVN-Watcher-Hook)它带有安装说明。也许这会有所帮助。

* * *

### 回复

> 如果我手动执行 post-commit，则“out”行包含一些文本。那么为什么它不适用于 SVN？

我已按列表重新编号以使其成为数字列表。看一下第 3.1 点：*钩子脚本无权访问 STDOUT*。我不是 Python 程序员，但看起来您正在尝试使用 STDOUT 将输出通过管道传输到另一个进程。挂钩脚本吃掉 STDOUT，并且该输出无法发送到另一个进程。此外，STDERR 被捕获，但不通过管道发送。相反，会收集 STDERR 并将其发送到执行提交的客户端。这样，您可以向客户端发送错误描述。

您可以打开一个子流程并将其发送文本，但不能通过管道。

# iphone - iOS - 将 NSDictionary 写入 Localizable.strings

> ID：13669274
> 
> 赞同：3
> 
> 时间：2012-12-02T12:28:02.123
> 
> 标签：iphone, ios, xcode, localization

这个问题是那个问题的连续体：[iOS - 我可以在运行时更改 localizable.strings 内容吗？](https://stackoverflow.com/questions/13625008/ios-could-i-change-the-localizable-strings-content-during-runtime)

答案很有用，但是，我面临一个问题。打印的字符串不包括单个单词键和/或值的引号（如这些“”）。这使得 Localizable.string 文件无效。因此，即使对于格式正确的键/值，也不会从中检索任何内容。

例子：

英镑 = 英镑；词汇表=词汇表；"Go_Location" = "前往位置";

前两个导致文件是无效的字符串文件。如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-06T17:10:11.037

使用 NSDictionary 的

```
- (NSString *)descriptionInStringsFileFormat; 
```

然后使用适当的编码将生成的字符串写入文件：

```
NSString* strings = [dict descriptionInStringsFileFormat];
[strings writeToFile: @"Localizable.strings" atomically: YES  encoding: NSUTF16StringEncoding  error: nil]; 
```

（显然添加您需要的任何错误检查）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T10:05:59.760

```
- (BOOL)writeLocalizableFileFromDictionary:(NSDictionary *)dictionary toURL:(NSURL *)url atomically:(BOOL)atomically
{
    NSMutableString *fileContent = [NSMutableString new];

    [dictionary enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {
        [fileContent appendFormat:@"\"%@\" = \"%@\";\n", [self escapeString:key], [self escapeString:obj]];
    }];

    return [fileContent writeToURL:url atomically:atomically encoding:NSUTF8StringEncoding error:nil];
}

- (NSString *)escapeString:(NSString *)string
{
    NSString *escapedString = [string stringByReplacingOccurrencesOfString:@"\n" withString:@"\\n"];
    escapedString = [escapedString stringByReplacingOccurrencesOfString:@"\r" withString:@"\\r"];
    escapedString = [escapedString stringByReplacingOccurrencesOfString:@"\\" withString:@"\\\\"];
    return [escapedString stringByReplacingOccurrencesOfString:@"\"" withString:@"\\\""];
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-02T12:43:26.217

通过枚举字典并将每个键/值对打印到 NSString，然后打印到字符串文件来解决它。

这是代码：

```
__block NSString *languageAndGlossaryDictionary = @"";
[[self getGlossaryDictionary] enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {
    languageAndGlossaryDictionary = [languageAndGlossaryDictionary stringByAppendingFormat:@"\n\"%@\" = \"%@\";", key, obj];
}]; 
```

# html - html5画布移动图像给出了一个线索

> ID：13669279
> 
> 赞同：0
> 
> 时间：2012-12-02T12:29:21.863
> 
> 标签：html, mouse, trial

我正在学习Html5，所以请原谅我。

我试图根据鼠标位置在另一个图像上显示图像，但是当我移动鼠标时，移动的图像会留下痕迹。还有另一个人问了类似的问题，但我没有成功理解解决方案:(((此外，我已经将代码放在 JSFiddle 上：http: [//jsfiddle.net/NinoV/sV522/5/](http://jsfiddle.net/NinoV/sV522/5/)但它不工作:(

谁能帮我？

```
 <!DOCTYPE html> 
  <html> 
  <head> 
  <title>Prova</title>
  <meta name="viewport" content="width=device-width, user-scalable=no">
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js">   </script>    
  </head>
     <script type="text/javascript">
  window.addEventListener('load', init, false);

  var canvas;
  var ctx;
  var canvasX;
  var canvasY;
  var mouseIsDown = 0;
  var move = "";
  var prevX;
  var prevY;
  function init() {
    canvas = document.getElementById("canvas");
     ctx = canvas.getContext("2d");
     cursore = new Image();
     cursore.src ='http://placekitten.com/g/50/50';    
     canvas.addEventListener("mousedown",mouseDown, false);
     canvas.addEventListener("mousemove",mouseXY, false);
     document.body.addEventListener("mouseup", mouseUp, false);
  }

  function draw() {
     var ctx = document.getElementById('canvas').getContext('2d');
     var img = new Image();
     var bao = new Image();
     bao.src ='http://placekitten.com/g/480/390';            
     bao.onload = function(){           
        ctx.drawImage(bao,0,0);
    };
  }

  function kete(n,x,y){
     var centerX = x / 2;
     var centerY = y / 2;
     var radius = 55;
     ctx.clearRect(prevX - radius, prevY - radius, radius * 2, radius * 2);
     //ctx.clearRect(prevX, prevY, radius, 0, 2 * Math.PI, false);      
     y=1;
     ctx.beginPath();
     ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
     ctx.lineWidth = 5;
     ctx.strokeStyle = '#003300';
     ctx.stroke();
     prevX=centerX;
     prevY=centerY;
  }

  function mouseUp() {
     mouseIsDown = 0;
     mouseXY();
  }

  function mouseDown() {
     mouseIsDown = 1;
     mouseXY();
  }

  function mouseXY(e) {
     e.preventDefault();
     canvasX = e.pageX - canvas.offsetLeft;
     canvasY = e.pageY - canvas.offsetTop;
     showPos();
  }

  function showPos() {

     ctx.font="12px Arial";
     ctx.textAlign="center";
     ctx.textBaseline="bottom";
     ctx.fillStyle="rgb(0,0,0)";
     if (mouseIsDown) str = str + " down";
     if (!mouseIsDown) str = str + " up";
     ctx.clearRect(0,390, canvas.width,canvas.height);
     if (canvasY>=201 && canvasY<=253) move = "A";
     if (canvasY>=254 && canvasY<=309) move = "B";

     if (canvasY>=88 && canvasY<=140) move = "b";
     if (canvasY>=141 && canvasY<=196) move = "a";
     if ((canvasX>=17 && canvasX<=444) && (canvasY>=88 && canvasY<=309)){
        //cursore.clearRect(prevX,prevY, cursore.width,cursore.height);
        ctx.drawImage(cursore,canvasX,canvasY);
        prevX=canvasX;
        prevY=canvasY;
     }else{
        move = canvasX+", "+canvasY;
     }
     ctx.fillText(move, canvas.width-50, canvas.height-50, canvas.width-10);
  }
  </script>
  </head> 

  <body  onload="draw();">
  <canvas id="canvas" width="480" height="500" style="background-color:white">
  Sorry, your browser doesn't support canvas technology
  </canvas>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:46:54.547

您的代码有几个问题，其中一些是由于不了解 JSFiddle 造成的。

首先，删除 JSFiddle 中的所有外部引用。您没有使用其中的两个，而另一个是由 JSFiddle 添加的。

您在 JSFiddle JavaScript 框中添加的所有代码都将在 JSFiddle 中的`load`事件中执行，因此不要在开始时执行此操作：

```
window.addEventListener('load', init, false); 
```

只需在最后执行此操作：

```
init(); 
```

接下来，您的代码中没有定义任何地方，`str`因此这些行失败：

```
 if (mouseIsDown) str = str + " down";
 if (!mouseIsDown) str = str + " up"; 
```

只需删除它们。

最后，您看到轨迹的原因是您没有在再次绘制之前删除图像。一旦你在上面画了东西，`canvas`它就会一直呆在那里，直到你明确地清除它。尽管您调用了`clearRect`，但它只清除了 的底部十个像素`canvas`：

```
ctx.clearRect(0,390, canvas.width,canvas.height); 
```

将其更改为此，它将清除整个`canvas`：

```
ctx.clearRect(0,0, canvas.width,canvas.height); 
```

[这是一个工作版本](http://jsfiddle.net/robertc/x85Rg/)。

# javascript - OnclientClick - 服务器标记格式错误

> ID：13669287
> 
> 赞同：1
> 
> 时间：2012-12-02T12:30:56.207
> 
> 标签：javascript, asp.net

OnClientClick = '<%# Eval("IsActive").ToString() == "True" ? “return confirm('你确定吗？这也会从 Brand-Mappings 中移除控件。');” : "" %>'

大家好，我想在这里做的是，我只想在 IsActice 评估为真时启用返回确认。我收到服务器标签未形成错误。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T12:33:31.577

问题在于您的单引号（例如`'`），您在 . 开头有一对单引号`OnClientClick`，然后在`confirm()`. 例如，尝试转义第二对：

```
OnClientClick = '<%# Eval("IsActive").ToString() == "True" ? "return confirm(\"Are you sure? This will remove the control from Brand-Mappings as well.\");" : "" %>' 
```

# c - 查找 2 个大数的乘积的程序（每个 10000 位）

> ID：13669289
> 
> 赞同：1
> 
> 时间：2012-12-02T12:31:47.127
> 
> 标签：c, algorithm

我需要一个有效的算法来计算乘以 2 个大数（每个最多 10000 位）的结果。我已经写了一个代码，但它给出了超出判断的时间限制。我已经使用字符串扫描了数字，然后使用基本的乘法方法，将结果存储在一个整数数组中：

```
#include <stdio.h>

int main() {
    int n, i, j, k, c, m, r, x, t, h, y;

    scanf("%d", &n);  // no of test cases
    for (i = 0; i < n; i++) {
        char A[10002], B[10002];
        int c1 = 0, c2 = 0, l;

        scanf("%s %s", A, B); //scanning the no.s
        for (j = 0; A[j] != '\0'; j++)
            c1++;
        for (j = 0; B[j] != '\0'; j++)
            c2++;
        l = 29999;

        int a[30002] = { 0 };
        for (j = c2 - 1; j >= 0; j--) {
            c = 0;
            x = l - 1;

            for (k = c1 - 1; k >= 0; k--) {
                h = (int)B[j] - 48;
                y = (int)A[k] - 48;
                r = (h * y) + c;  //multiply the last digit of B with all the digits of A.
                m = r % 10;
                r = r / 10; c = r;  //c is the carry 
                a[x] = m + a[x];
                if (a[x] > 9) {
                    a[x] = a[x] % 10;
                    a[x - 1] = a[x - 1] + 1; //adding 1 to previous posn of result in case of overflow.since only maximum 1 can be the 1st digit.
                }
                x--;
            }
            l--;
            a[x] = a[x] + c;
        }

        int flag = 0;
        for (k = 0; k <= 29998; k++) { 
            if (a[k] != 0) {
                printf("%d", a[k]);
                flag = 1;
            } else if (a[k] == 0 && flag == 1)
                printf("0");
        }
        if (flag == 0)
            printf("0");
        printf("\n");
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T12:34:06.117

不要逐位操作数字！如果您只是将它们分成每组 9 位数字，而不是 10000x10000，您会将其减少到 1111x1111，这应该快 80 倍左右。（这假设您的平台具有 32 位整数。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T17:39:50.157

检查这一点（前提是您将两个数字输入为整数而不是字符串）！

```
#include<stdio.h>
int main()
{
    int n,m,j,temp,i,c;
    int a[2000000];
    a[0]=1;j=0;
    printf("Enter the first number: ");
    scanf("%d",&m);
    printf("Enter the second number: ");
    scanf("%d",&n);
    for(i=0;i<=j;i++)
    {
        temp=(a[i]*m)+temp;
        a[i]=temp%10;
        temp=temp/10;
    }
    while(temp>0)
    {
        a[++j]=temp%10;
        temp=temp/10;
    }
    for(i=0;i<=j;i++)
    {
        temp=(a[i]*n)+temp;
        a[i]=temp%10;
        temp=temp/10;
    }
    while(temp>0)
    {
        a[++j]=temp%10;
        temp=temp/10;
    }
    for(i=j;i>=0;i--)
        printf("%d",a[i]);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-23T20:05:33.580

这是一个结合了 2 种有效技术的解决方案：

*   它一次处理 6 位数字组，而不是单个数字。
*   它在不检查溢出的情况下对中间产品求和，节省了大量的测试和除法`1000000`。

这是代码：

```
#include <stdio.h>
#include <string.h>
#include <time.h>

#define NDIGITS 6

int main() {
    char A[10002], B[10002];
    int aa[10000 / NDIGITS + 1];
    int bb[10000 / NDIGITS + 1];
    int cc[10000 / NDIGITS + 1 + 10000 / NDIGITS + 1];
    int n, na, nb, nc, i, j, c;

    if (scanf("%d", &n) != 1)  // no of test cases
        return 1;

    static int const m10[10] = {
        1, 10, 100, 1000, 10000, 100000, 1000000,
        10000000, 100000000, 1000000000 };

    while (n-- > 0 && scanf("%10000s %10000s", A, B) == 2) {
        for (na = 0, c = j = 0, i = strlen(A); i-- > 0;) {
            c += (A[i] - '0') * m10[j];
            if (++j == NDIGITS || i == 0) {
                aa[na++] = c;
                c = j = 0;
            }
        }
        for (nb = 0, c = j = 0, i = strlen(B); i-- > 0;) {
            c += (B[i] - '0') * m10[j];
            if (++j == NDIGITS || i == 0) {
                bb[nb++] = c;
                c = j = 0;
            }
        }
        nc = na + nb;   // max length of A*B
        // initialize result array
        for (i = 0; i < nc; i++)
            cc[i] = 0;
        for (i = 0; i < na; i++) {
            long long m = 0;
            for (j = 0; j < nb; j++) {
                m += cc[i + j] + (long long)aa[i] * bb[j];
                cc[i + j] = m % m10[NDIGITS];
                m /= m10[NDIGITS];
            }
            cc[i + j] += m;
        }
        for (i = nc; i-- > 0 && cc[i] == 0;)
            continue;
        printf("%d", cc[i]);
        while (i-- > 0)
            printf("%0*d", NDIGITS, cc[i]);
        printf("\n");
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-01-31T09:38:43.933

可以使用`break;`退出最外层的 for 循环。

# php - 将数组写入txt文件

> ID：13669290
> 
> 赞同：2
> 
> 时间：2012-12-02T12:31:52.993
> 
> 标签：php

我在网站上有一个表格，一旦完成，就会将值保存在数组中。我希望将数组的内容放入一个 txt 文件中，每次提交都在一个新行上，值由“-”分隔：

```
info-info-info-info
info-info-info-info 
```

我试过使用：

```
foreach ($clean as $info) {
    $file = fopen("userinfo.txt", "w");
    fwrite($file, $info);
    fclose($file);
} 
```

这只会将数组的最后一部分放在文本文件中，并在每次提交时覆盖文件。

使用：

```
$results = var_export($clean, true); 
file_put_contents('userinfo.txt', $results); 
```

将所有信息正确写入文件，但存储为 var 转储，并在每次提交时覆盖。我不知道如何格式化它来实现我所需要的。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:40:07.753

```
$info = implode("\n",$clean);
file_put_contents("userinfo.txt", $info); 
```

PS：不要在循环内部使用 fopen ，而是在外部使用 fopen ，然后在内部使用 fwrite 。fclose 在循环之后进行。

编辑：我误解了它应该是

```
$info = implode("-",$clean);
file_put_contents("userinfo.txt", "\n".$info,FILE_APPEND); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T12:50:59.720

您基本上是在编写一个 CSV（逗号分隔值）文件。PHP 有正确的内置函数来完成这项工作：（[`fputcsv`](http://php.net/fputcsv)作为一个额外的好处，它还可以正确处理包含分隔符本身的值的转义）；

```
if($h = fopen('./path/to/file', 'a')) {
  fputcsv($h, $clean, '-');
  fclose($h);
} 
```

用于[`fgetcsv`](http://php.net/fgetcsv)稍后检索数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T12:33:30.367

更改（从只写模式到附加模式）

```
$file = fopen("userinfo.txt", "w"); 
```

到

```
$file = fopen("userinfo.txt", "a"); 
```

# actionscript-3 - 用于 Flex 中的状态的 creationPolicy="all"

> ID：13669292
> 
> 赞同：0
> 
> 时间：2012-12-02T12:32:03.693
> 
> 标签：actionscript-3, apache-flex

`ViewStack`as中有这样`creationPolicy="all"`的东西，州有同样的东西吗？我的目标是为一种状态设置一些属性，而另一种处于活动状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:31:02.430

没有一对一的相关性，但是有些事情可以以“相似”的方式完成。这在很大程度上取决于您要设置的内容，但请记住，视觉组件在非活动状态期间甚至不会被初始化/创建。我通常以两种方式解决这个问题。

1.  创建一个 StateChangedEvent 侦听器以了解何时对特定状态做出反应 - 如果您使用某些 3rd 方框架来分离视图（即不在 mxml 本身中编写行为），则尤其如此。
2.  您可以将状态编写为“基于”另一个状态，这意味着您可以为状态创建一些准继承链。如果您有 2 个状态共享许多相同的视觉表示，这可能很有用，在这种情况下，基本状态将对“两者”都处于活动状态，因为它不会在两者之间重新初始化。

# regex - 使用 PCRE 和 ERE 转义每个元字符是否错误？

> ID：13669295
> 
> 赞同：1
> 
> 时间：2012-12-02T12:32:57.597
> 
> 标签：regex, pcre

在正则表达式中，某些字符只有在适当放置时才能获得元字符的特殊含义，否则保持其字面含义。例如，只有放在方括号表达式中并且在外面是文字短划线`-`时，该字符才被视为元字符。`[]`

但就个人而言，我喜欢将元字符视为保留字符，并采用严格的规则来转义每个需要字面量的元字符。这节省了我一点时间，否则我会花在考虑元字符在正则表达式中的位置上。

但是，据我所知，转义这样的字符通常是 GNU BRE 的错误。而这个正则表达式

```
foo\-[0-9]+ 
```

`\-`RegexBuddy认为其本身无效。此外，RegexBuddy 指示 GNU ERE（但不是 PCRE）的相同错误。另一方面，`grep`在 Ubuntu 上不会将此正则表达式视为错误，并且从我的测试中可以正常工作，即使`grep`默认情况下应该使用 ERE。

因此，将 BRE 和 RegexBuddy 放在一边，只考虑在当今许多系统和编程语言中使用的 PCRE 和 ERE，问题是习惯于转义每个可能的元字符以获取其字面意义可能是多么错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T12:44:33.077

我只能在这里回答 PCRE。在 PCRE 中，您可以随心所欲地逃避，但不会有任何影响。引用[PHP 的关于转义序列的 PCRE 文档](http://php.net/manual/en/regexp.reference.escape.php)：

> [...] 如果 [a backslash] 后跟一个非字母数字字符，它将带走该字符可能具有的任何特殊含义。

我会将“**可能**有”解释为“没有意义也没关系”。我用你给定的例子对其进行了测试，没有问题。

* * *

无论使用何种正则表达式引擎，一般来说：

我想提一下，虽然为了安全而总是逃避一切似乎是个好主意，但你至少应该有意识地考虑一下可读性的影响。无论如何，正则表达式往往会变得难以阅读，并且用不必要的反斜杠将它们弄乱并不能真正改善这一点。特别是，在字符类中，我只会转义作为字符类中元字符的字符（我个人甚至更喜欢将它们移动到不需要转义的特定位置，例如`[a-zA-Z0-9_-]`，但我可以看到有些人怎么不喜欢那样）。这有一个很好的副作用。您可以使用字符类，作为（在我看来）更容易阅读的替代方法，用于转义在字符类之外但不在字符类内部的元字符的字符。所以你可以写`[|]`代替`\|`或`[.]`代替`\.`。在等宽字体中，这个单字符字符类构成了一个漂亮的正方形，很容易将其识别为单个元素，并且重要字符就在它的中心（而在`\.`重要字符中，重要字符在“复合单个字符”如果有意义的话）。此外，如果涉及转义括号接近未转义的括号，我发现字符类转义更具可读性：`(\()(\))`vs `([(])([)])`. . 当然，这又是一个品味问题。但是在为正则表达式设置转义约定时，值得考虑一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T15:37:17.953

您不是在问是否可以“转义每个元字符”，而是“转义每个我不确定它是否是元字符的字符”。听起来你只是想逃避所有不是字母或数字的东西。

这不是功能错误，而是：

*   它使代码更难阅读。字符越少越好。
*   它让追随你的程序员想知道为什么你要不必要地转义字符，并花时间试图弄清楚你的代码有什么不同以及你试图解决什么问题。
*   当那个程序员最终发现你只是在逃避非元字符字符时，她会认为你是一个不称职的程序员。

学习你的工具，学会正确使用它们，不要使用巫术技巧来解决你缺乏知识的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T12:45:47.727

我不知道 POSIX 正则表达式或 PCRE，但在 Perl 中，每个反斜杠非单词字符都保证与自身匹配。详情请参阅[`perldoc -f quotemeta`](http://perldoc.perl.org/functions/quotemeta.html)。

# django - 如何在 Django 中表示抽象模型依赖？

> ID：13669296
> 
> 赞同：0
> 
> 时间：2012-12-02T12:32:56.213
> 
> 标签：django, django-models

假设我在 Django 中有这样的东西：

```
class PublicObject(models.Model):
    class Meta:
        abstract = True
    title = models.CharField()
    menu_link = models.ForeignKey('MenuLink')

class MenuLink(models.Model):
    title = models.CharField()
    parents = models.ManyToManyField('self')

class Page(PublicObject):
    page fields...

class BlogEntry(PublicObject)
    blog entry fields... 
```

我想要的是当我删除一个页面或一个博客条目时，相应的菜单链接也将被删除。如何在不违反 DRY 原则的情况下在 Django 中做到这一点？我必须提一下： - 覆盖 ModelAdmin 的 model_delete 不起作用，因为该函数不会从 Django 的操作菜单中批量删除。- 使用 pre_delete 模型信号不起作用，因为它需要模型名称，但不适用于抽象模型名称。它仅适用于 sender=Page 或 sender=BlogEntry，不适用于 sender=PublicObject。如果我为所有型号注册此信号并简单地检查我的发件人是什么型号，我会受到很大的性能损失吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:39:50.790

我可以建议两个解决方案。

1.  你为什么不应该覆盖`PublicObject.delete`？

2.  您可以考虑另一种关系模型：

    ```
    class PublicObject(models.Model):
        class Meta:
            abstract = True
        title = models.CharField()

    class MenuLink(models.Model):
        title = models.CharField()
        parents = models.ManyToManyField('self')
        public_obj = models.ForeignKey('PublicObject') 
    ```

# c - 为什么这个语句会在一个函数中导 致错误，而在 C 中的另一个函数中却没有？

> ID：13669304
> 
> 赞同：2
> 
> 时间：2012-12-02T12:33:43.753
> 
> 标签：c, compiler-errors, iso

声明***p++ = *source++;** 在下面的第一个程序中不会导致任何错误，但会导致错误ISO C++ 禁止在编译时转换为在第二个程序中*用作左值的非引用类型。*为什么会发生这种情况？

*   第一个程序

    ```
    #include 

    char *my_strcpy(char *destination, char *source)
    {
        char *p = destination;
        while (*source != '\0')
        {
            *p++ = *source++;
        }
        *p = '\0'; 
        return destination;
    }

    int main()
    {
        char source[] = "A string to be used for demonstration purposes";
        char destination[80];   
        my_strcpy(destination, source);
        puts(destination);
        return 0;
    } 
    ```

*   第二个节目

    ```
    #include 

    char source[] = "A string to be used for demonstration purposes";
    char destination[80];

    int main()
    {
        char *p = destination;
        putchar('\n'); 
        while(*source != '\0') 
        {
            *p++ = *source++; 
        }
        *p = '\0';
        puts(destination);
        return 0;
    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:38:54.503

发生这种情况是因为您的第一个程序增加了一个指针，而在第二个程序中您将`++`运算符应用于数组。尽管数组通常表现得像指针，但它们*不是*指针。数组支持指针算术，但它们不支持将它们视为`lvalue`（即尝试修改它们指向的位置）的指针运算符。

解决这个问题很简单——只需创建一个指向数组的指针，并在循环中使用该指针，如下所示：

```
char *p = destination;
putchar('\n'); 
char *src = source;
while(*src != '\0') 
{
    *p++ = *src++; 
}
*p = '\0';
puts(destination);
return 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T12:40:05.173

在第一个程序`source`中，通过将其传递给 char 将其转换为指向 char 的指针`my_strcpy`，因此您可以递增它。另一方面，在第二个程序中，它`source`仍然是一个数组，你不能增加一个数组。

顺便说一句，我认为 C 库`strcpy`以非常短的方式实现，如下所示：

```
while((*dst++ = *src++)); 
```

就这样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T12:37:35.480

您无法修改源，您已经创建了一个指向它的本地指针，就像您使用 p 作为目标一样。source 是一个静态定义的数组，因此您只能更改其内容，而不能更改其地址。

# php - 更改 PHP 联系表单上的操作

> ID：13669305
> 
> 赞同：0
> 
> 时间：2012-12-02T12:33:57.003
> 
> 标签：php, contact

将 PHP 联系表单上的操作从 old.php 更改为 new.php，但是当我提交表单时，我收到一个错误，指出找不到 old.php。

这可能是重置 cookie/路由器的问题吗？

要求的代码：（表格的第一行）

```
<form name="contactform" form id="contactform" method="post" action="old.php" onSubmit="return validate.check(this)"> 
```

变成：

```
 <form name="contactform" form id="contactform" method="post" action="/loc1/new.php" onSubmit="return validate.check(this)"> 
```

我已经从父目录中删除了 old.php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:21:49.453

请仔细检查您在提交 ( `validate.check(this)`) 上调用的 JavaScript 代码，可能有一些代码正在改变您的表单的操作。

# javascript - Phonegap Android 回调获取令牌

> ID：13669306
> 
> 赞同：0
> 
> 时间：2012-12-02T12:34:03.563
> 
> 标签：javascript, android, cordova, push-notification

我正在使用 pushwoosh phonegap 示例，它工作正常。现在我需要用回调来检索令牌，但不知道该怎么做。在 main.js 中，我设置了一个变量来接收来自 PushNotification.js 函数 initPushwoosh() 的返回值

这是 main.js 中的部分

```
function init() {
document.addEventListener("deviceready", deviceInfo, true);
var vvvtoken=document.addEventListener("deviceready", initPushwoosh, true);
var html='<h3>'+vvvtoken+' </h3>';
 $('#mailList').html(html).listview('refresh');

 } 
```

这是来自 initPushwoosh() 的部分

```
function initPushwoosh()
{

var pushNotification = window.plugins.pushNotification;
// CHANGE projectid & appid
pushNotification.registerDevice({ projectid: "xxxxxxxx", appid : "xxxxxxxxxxxx" },
function(status) {
var pushToken = status;
console.warn('push token: ' + pushToken);
return pushToken;
},
function(status) {
console.warn(JSON.stringify(['failed to register ', status]));
return "failed to register";
});

document.addEventListener('push-notification', function(event) {
var title = event.notification.title;
var userData = event.notification.userdata;

if(typeof(userData) != "undefined") {
console.warn('user data: ' + JSON.stringify(userData));
}

navigator.notification.alert(title);
});

} 
```

我在我的安卓手机上运行它，我没有收到任何返回值。如何进行回调并返回令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:46:43.400

`document.addEventListener`不运行函数并返回结果。它所做的只是将函数设置为在将来的某个时间运行 - 几乎可以肯定是在您尝试显示令牌之后。

代替

```
return pushtoken; 
```

尝试：

```
$("h3").html(pushtoken);
return; 
```

# c# - c# Canon SDK：CameraCommand_TakePicture 后没有回调

> ID：13669312
> 
> 赞同：9
> 
> 时间：2012-12-02T12:34:39.900
> 
> 标签：c#, canon-sdk

我一直在努力使这项工作有一段时间了……阅读了很多帖子，但没有一个可以解决此问题。

我正在使用佳能 SDK 连接到 EOS 550D。我正在运行 win7 64bit 和 Visual Studio c# 2010。

我一步一步做的是：

--> 0 初始化 SDK

```
 err = EDSDK.EdsInitializeSDK(); 
```

--> 1 获取相机列表

```
 err = EDSDK.EdsGetCameraList(out cameraList); 
```

--> 2 获取子数

```
 err = EDSDK.EdsGetChildCount(cameraList, out cameraCount); 
```

--> 3 如果有孩子，获取第一个孩子

```
 err = EDSDK.EdsGetChildAtIndex(cameraList, 0, out cameraDev); 
```

--> 4 打开一个会话

```
err = EDSDK.EdsOpenSession(cameraDev); 
```

--> 5 告诉sdk在本地保存图片

```
IntPtr saveTo = (IntPtr)EDSDK.EdsSaveTo.Host;
err = EDSDK.EdsSetPropertyData(cameraDev, EDSDK.PropID_SaveTo, 0, 4, saveTo); 
```

--> 6 设置主机可用容量

```
 EDSDK.EdsCapacity capacity = new EDSDK.EdsCapacity();

 if (err == EDSDK.EDS_ERR_OK)
 {
     capacity.NumberOfFreeClusters = 0x7FFFFFFF;
     capacity.BytesPerSector = 0x1000;
     capacity.Reset = 1;
     err = EDSDK.EdsSetCapacity(cameraDev, capacity);
 } 
```

--> 7 注册状态事件处理器

```
err = EDSDK.EdsSetCameraStateEventHandler(cameraDev, EDSDK.StateEvent_All, stateEventHandler,   new IntPtr(0)); 
```

--> 8 注册对象事件处理程序

```
 EDSDK.EdsObjectEventHandler edsObjectEventHandler = new EDSDK.EdsObjectEventHandler(objectEventHandler);
               err = EDSDK.EdsSetObjectEventHandler(cameraDev, EDSDK.ObjectEvent_All, edsObjectEventHandler, IntPtr.Zero); 
```

……

这样做时我没有收到任何错误，一切似乎都很好。

这是我的处理程序

```
 private uint objectEventHandler(uint inEvent, IntPtr inRef, IntPtr inContext)
    {
        Console.WriteLine("HALLLOOOOOOOOOO");
        switch (inEvent)
        {
            case EDSDK.ObjectEvent_DirItemCreated:
                //this.invokeNewItemCreatedEvent(new NewItemCreatedEventArgs(getCapturedItem(inRef)));
                Console.WriteLine("Directory Item Created");
                break;
            case EDSDK.ObjectEvent_DirItemRequestTransfer:
                Console.WriteLine("Directory Item Requested Transfer");
                break;
            default:
                Console.WriteLine(String.Format("ObjectEventHandler: event {0}, ref {1}", inEvent.ToString("X"), inRef.ToString()));
                break;
        }

        return 0x0;
    }

    public uint stateEventHandler(uint inEvent, uint inParameter, IntPtr inContext)
    {
        Console.WriteLine("stateEventHandler " + inEvent);
        switch (inEvent)
        {
            case EDSDK.StateEvent_JobStatusChanged:
                Console.WriteLine(String.Format("There are objects waiting to be transferred.  Job status {0}", inParameter));
                break;

            case EDSDK.StateEvent_ShutDownTimerUpdate:
                if (inParameter != 0)
                    Console.WriteLine(String.Format("shutdown timer update: {0}", inParameter));
                break;

            case EDSDK.ObjectEvent_DirItemRequestTransfer:
                //WHAT I NEED!!!
                Console.WriteLine("Hallo DirItemRequestTransfer");
                //DownloadImage(obj);
                break;

            default:
                Console.WriteLine(String.Format("StateEventHandler: event {0}, parameter {1}", inEvent, inParameter));
                break;
        }
        return 0;
    } 
```

...

所以现在我的问题是没有一个处理程序被调用过。不知道为什么，我在网上搜索了一段时间，尝试了不同的方法但没有得到回调......

这是我调用拍照命令的方法：

```
 public void takePic()
    {
        if (cameraOpened)
        {
           Console.WriteLine( "taking a shot");

            err = EDSDK.EdsSendCommand(cameraDev, EDSDK.CameraCommand_TakePicture, 0);
            if (err != EDSDK.EDS_ERR_OK)
                Console.WriteLine("TakeCommand Error: " + err.ToString());

            Console.WriteLine("Finished taking a shot");

        }
    } 
```

也许有人知道我可以尝试做什么？

提前致谢！

最好的问候，托拜厄斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T14:49:07.997

我知道 SDK 文档说回调函数将在另一个线程中执行，但对我来说，在 Windows 下使用 SDK 2.11，回调总是发生在主线程上，并且似乎是通过 Windows 消息发送的。这意味着如果您没有消息泵，您将不会收到回调。如果您的应用程序是 C# GUI 应用程序，您应该有一个消息泵，但如果它是一个控制台应用程序，您可能没有，所以在发送 TakePicture 命令后尝试手动泵送消息。您可以使用 Application.Run 但您需要在某处调用 Application.Exit 否则您的消息循环将永远不会退出（例如，您可以在从相机下载图片后调用它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T09:11:11.610

我使用 SDK 的 C++ 版本已经有几个月了。

快速扫描后，您的代码似乎一切正常。我不确定此示例中的 C# 垃圾收集/范围，但您希望确保您的处理程序在设置它们后仍然“周围”。

此外，对于最后的 EdsContext 参数，我使用指向包含类的指针而不是零指针。

```
err = EDSDK.EdsSetObjectEventHandler(cameraDev, EDSDK.ObjectEvent_All, edsObjectEventHandler, IntPtr.Zero); 
```

如果你不需要在一个类中包含你的事件处理程序，这可能不是问题，但你的应用程序中的多线程可能会咬你。从 EDSDK 手册：

> 通过回调函数指定要传递的应用程序信息。可以传递您的应用程序所需的任何数据。在**多线程环境中，回调函数由专门针对事件的线程执行**。适当地使用它，如指定 this 指针以将数据传递给 UI 线程。如果不需要，请指定一个 NULL 指针。

您还可以尝试添加一个 handlePropertyEvent 处理程序，该处理程序应该触发白平衡的变化/切换到实时取景等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T13:13:55.697

您订阅对象事件的方式并没有真正订阅任何内容。我就是这样做的，而且效果很好：

```
event EDSDK.EdsObjectEventHandler SDKObjectEvent;

void Init(IntPtr cameraDev)
{
    SDKObjectEvent += new EDSDK.EdsObjectEventHandler(objectEventHandler);
    EDSDK.EdsSetObjectEventHandler(cameraDev, EDSDK.ObjectEvent_All, SDKObjectEvent, IntPtr.Zero);
} 
```

EdsStateEventHandler、EdsPropertyEventHandler 和 EdsCameraAddedHandler 的原理相同（有点不同，但仍然有事件 EdsProgressCallback）

亲切的问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T20:22:28.283

> 我正在使用佳能 SDK 连接到 EOS 550D。我正在运行 win7 64bit 和 Visual Studio c# 2010。

您的问题就在那里：Canon SDK 是为 X86 编译的。不要再看了！您必须更改目标架构。

# android - Android<3.0 上的 AlertDialog 无边框

> ID：13669313
> 
> 赞同：1
> 
> 时间：2012-12-02T12:34:40.443
> 
> 标签：android, dialog, border, android-alertdialog

我正在尝试显示一个具有列表的 AlertDialog。当我在 Android IC 上运行应用程序时，我没有任何问题，但是当我在 Android 2.3 上尝试它时，AlertDialog 出现一个可怕的边框，它位于视图的上层和下层。我已经尝试过使用主题和很多东西，但我添加的问题是 AlertDialog.Builder(Context, Theme) 在低于 11 的 API 上无效。你知道任何解决方案吗？谢谢！

```
public boolean updialog (String table) {
    String [] data = bd.List(1, table);
    if(data[0]=="") {
        AlertDialog.Builder dialog = new AlertDialog.Builder(this,android.R.style.Theme_Translucent_NoTitleBar);
        View view = View.inflate(getApplicationContext(), R.layout.drop_no_resquest, null);
        dialog.setView(view); dialog.create();
        dialog.show(); 
        return true;
    }
    AlertDialog.Builder dialog = new AlertDialog.Builder(a);
    View view = View.inflate(getApplicationContext(), R.layout.drop, null);
    ListView lv = (ListView) view.findViewById(R.id.drop_listview);
    ArrayAdapter<String> adap = new ArrayAdapter<String> (getApplicationContext(), 
    R.layout.list_item_custom,R.id.list_item_custom_text,data);
    lv.setAdapter(adap);
    dialog.setView(view);
    dialog.create();
    dialog.show(); return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T12:52:21.937

你可以这样使用

```
AlertDialog.Builder dialog = new AlertDialog.Builder(this,R.style.ThemeDialogCustom); 
```

在哪里`ThemeDialogCustom`看起来像这样

```
 <style name="ThemeDialogCustom">
    <item name="android:windowFrame">@null</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowBackground">@color/transparent</item>
    <item name="android:colorBackgroundCacheHint">@null</item>
</style> 
```

**对于 android < 3.0** ，您需要使用`Dialog`class.

```
Dialog dialog = new Dialog(this, R.style.ThemeDialogCustom);
    View view = View.inflate(getApplicationContext(), R.layout.drop, null);
    ListView lv = (ListView) view.findViewById(R.id.drop_listview);
    ArrayAdapter<String> adap = new ArrayAdapter<String>(
            getApplicationContext(), R.layout.list_item_custom,
            R.id.list_item_custom_text, data);
    lv.setAdapter(adap);
    dialog.setView(view);

    dialog.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:47:33.570

您还可以使用 dialog.getwindow () 摆脱背景并访问对话框的窗口属性。我认为您可以使用 setbackground () 并为其设置一个透明的可绘制对象。

# c# - 当客户端\服务事务在服务端中止并且没有引发错误时，WCF 客户端是否会引发协议异常？

> ID：13669314
> 
> 赞同：1
> 
> 时间：2012-12-02T12:35:06.593
> 
> 标签：c#, wcf, distributed-transactions

我有一个现有的 Web 服务，其中不支持事务流，并在响应的错误集合中返回错误，而不是抛出错误。所以响应消息契约看起来像这样：

```
[MessageContract()]
public class UpdateResponse
{
    [MessageBodyMember()]
    public UpdateData Data { get; set; }

    [MessageBodyMember()]
    public ErrorMessages Errors { get; set; }        
} 
```

现在该服务将被更新，因此它的操作可以包含在分布式事务中，该事务将在客户端启动。因为它没有抛出错误，所以我启用了事务流并将 transactionAutoComplete 设置为 false。

所以在操作实现中我只会在错误集合为空的时候手动提交事务：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession, 
            ConcurrencyMode = ConcurrencyMode.Single,
            TransactionIsolationLevel = IsolationLevel.ReadCommitted)]
public partial class MyService: MyServiceContract
{
    [OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete = false)]
    [TransactionFlow(TransactionFlowOption.Allowed)]
    public UpdateResponse Update(UpdateRequest request)
    {
        UpdatePlanResponse response = new UpdateResponse();

        ... call inner components to perform operation ...

        if (errors.Count == 0)
        {
            OperationContext.Current.SetTransactionComplete();
        }
        return response;
    }
} 
```

在客户端，我还在 wsHttpbinding 配置中启用了事务流。该服务在事务范围内被调用，如下所示：

```
 using (TransactionScope tran = new TransactionScope(TransactionScopeOption.Required, new TransactionOptions{ IsolationLevel = System.Transactions.IsolationLevel.ReadCommitted}))
    {
        UpdateResponse response = _serviceClient.Update(updateRequest);

        ... some more work ...

        if(response.Errors != null && response.Errors.Count > 0)
        {
            ... handle and raise them ...
        }
        tran.Complete();
    } 
```

事务流向服务。在积极的情况下，一切都按预期工作，服务代码所做的更改仅在客户端提交事务时才会持久化。现在，如果在服务上发现任何问题，服务将中止事务（因为已创建内部事务范围，并且在这种情况下不会完成），并且错误集合中包含许多错误的响应消息将是退还。

但是在客户端，ProtocolException 指出“执行此方法调用的事务被异步中止”。由 WCF 抛出：

> 服务器堆栈跟踪：在 System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc) 在 System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter)。 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) 在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) 在 System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)。 ServiceModel.Channels.ServiceChannelProxy.Invoke（IMessage 消息）
> 
> 在 [0] 处重新抛出异常：在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 在 MyServiceContract.Update( UpdateRequest 请求）在 MyServiceContractClient.Update（UpdateRequest 请求）

在这种情况下我能做些什么，这样我就可以在服务端中止事务，同时仍然向客户端发送一些关于出了什么问题的信息而不会引发错误？

在这里抛出错误会更有意义（并且避免我启用会话，这是将事务自动完成设置为 false 所必需的），但由于它是现有服务，我想在使用它们之前检查我的选项。

## 更新

如果服务操作如以下示例那样实现，则包含错误信息的响应将到达客户端。我可以看到事务状态已中止，但 WCF 没有抛出任何 ProtocolException：

```
 [OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete = false)]
    [TransactionFlow(TransactionFlowOption.Allowed)]
    public UpdateResponse Update(UpdateRequest request)
    {
        UpdatePlanResponse response = new UpdateResponse();

        response.errors = new List<Error>() { new Error("dummy"); }
        if (response.errors.Count == 0)
        {
            OperationContext.Current.SetTransactionComplete();
        }
        return response;
    } 
```

但是，如果我在服务实现上启动另一个事务范围并且这被中止，那么错误将被发送回客户端，其中将引发 ProtocolException：

```
 [OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete = false)]
    [TransactionFlow(TransactionFlowOption.Allowed)]
    public UpdateResponse Update(UpdateRequest request)
    {
        UpdatePlanResponse response = new UpdateResponse();

        //start another transaction scope and abort it
        using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Required, new TransactionOptions { IsolationLevel = IsolationLevel.ReadCommitted }))
        {
        }

        response.errors = new List<Error>() { new Error("dummy"); }
        if (response.errors.Count == 0)
        {
            OperationContext.Current.SetTransactionComplete();
        }
        return response;
    } 
```

似乎在第二种情况下，WCF 尝试中止已经中止的事务，这导致以下错误被发送回客户端......

```
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:r="http://schemas.xmlsoap.org/ws/2005/02/rm" xmlns:a="http://www.w3.org/2005/08/addressing">
  <s:Header>
     ...
  </s:Header>
  <s:Body>
    <s:Fault>
      <s:Code>
        <s:Value>s:Sender</s:Value>
        <s:Subcode>
          <s:Value xmlns:a="http://schemas.microsoft.com/net/2005/12/windowscommunicationfoundation/dispatcher">a:TransactionAborted</s:Value>
        </s:Subcode>
      </s:Code>
      <s:Reason>
        <s:Text xml:lang="en-GB">The transaction under which this method call was executing was asynchronously aborted.</s:Text>
      </s:Reason>
    </s:Fault>
  </s:Body>
</s:Envelope> 
```

启用跟踪我可以看到在服务端为 System.ServiceModel 源记录了以下异常（由于此异常，上述故障被发送到客户端）：

```
<TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Error">
    <TraceIdentifier>http://msdn.microsoft.com/en-GB/library/System.ServiceModel.Diagnostics.TraceHandledException.aspx</TraceIdentifier>
    <Description>Handling an exception.</Description>
    <AppDomain>a0ef2bea-25-129990861717638246</AppDomain>
    <Exception>
        <ExceptionType>System.ServiceModel.FaultException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
        <Message>The transaction under which this method call was executing was asynchronously aborted.</Message>
        <StackTrace>
            at System.ServiceModel.Diagnostics.ExceptionUtility.TraceHandledException(Exception exception, TraceEventType eventType)
            at System.ServiceModel.Dispatcher.TransactionInstanceContextFacet.CheckIfTxCompletedAndUpdateAttached(MessageRpc&amp; rpc, Boolean isConcurrent)
            at System.ServiceModel.Dispatcher.TransactionBehavior.ResolveOutcome(MessageRpc&amp; rpc)
            at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ResolveTransactionOutcome(MessageRpc&amp; rpc)
            at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage9(MessageRpc&amp; rpc)
            at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage8(MessageRpc&amp; rpc)
            at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc&amp; rpc)
            at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc&amp; rpc)
            at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc&amp; rpc)
            at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc&amp; rpc)
            at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc&amp; rpc)
            at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc&amp; rpc)
            at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc&amp; rpc)
            at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc&amp; rpc)
            at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)
            at System.ServiceModel.Dispatcher.ChannelHandler.DispatchAndReleasePump(RequestContext request, Boolean cleanThread, OperationContext currentOperationContext)
            at System.ServiceModel.Dispatcher.ChannelHandler.HandleRequest(RequestContext request, OperationContext currentOperationContext)
            at System.ServiceModel.Dispatcher.ChannelHandler.AsyncMessagePump(IAsyncResult result)
            at System.ServiceModel.Dispatcher.ChannelHandler.OnAsyncReceiveComplete(IAsyncResult result)
            at System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result)
            at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously)
            at System.ServiceModel.Channels.ReceiveTimeoutAsyncResult.Callback(IAsyncResult result)
            at System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result)
            at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously)
            at System.Runtime.InputQueue`1.AsyncQueueReader.Set(Item item)
            at System.Runtime.InputQueue`1.Dispatch()
            at System.ServiceModel.Channels.ReliableReplySessionChannel.ProcessSequencedMessage(RequestContext context, String action, WsrmSequencedMessageInfo info)
            at System.ServiceModel.Channels.ReliableReplySessionChannel.ProcessRequest(RequestContext context, WsrmMessageInfo info)
            at System.ServiceModel.Channels.ReliableReplySessionChannel.ProcessDemuxedRequest(RequestContext context, WsrmMessageInfo info)
            at System.ServiceModel.Channels.ReliableReplyListenerOverReply.ProcessSequencedItem(ReliableReplySessionChannel reliableChannel, RequestContext context, WsrmMessageInfo info)
            at System.ServiceModel.Channels.ReliableListenerOverDatagram`4.HandleReceiveComplete(TItem item, TInnerChannel channel)
            at System.ServiceModel.Channels.ReliableListenerOverDatagram`4.OnTryReceiveComplete(IAsyncResult result)
            at System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result)
            at System.ServiceModel.Diagnostics.TraceUtility.&lt;&gt;c__DisplayClass4.&lt;CallbackGenerator&gt;b__2(AsyncCallback callback, IAsyncResult result)
            at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously)
            at System.Runtime.InputQueue`1.AsyncQueueReader.Set(Item item)
            at System.Runtime.InputQueue`1.EnqueueAndDispatch(Item item, Boolean canDispatchOnThisThread)
            at System.Runtime.InputQueue`1.EnqueueAndDispatch(T item, Action dequeuedCallback, Boolean canDispatchOnThisThread)
            at System.ServiceModel.Channels.SingletonChannelAcceptor`3.Enqueue(QueueItemType item, Action dequeuedCallback, Boolean canDispatchOnThisThread)
            at System.ServiceModel.Channels.HttpChannelListener.HttpContextReceived(HttpRequestContext context, Action callback)
            at System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult result)
            at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest()
            at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()
            at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(Object state)
            at System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
            at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
            at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
        </StackTrace>
        <ExceptionString>System.ServiceModel.FaultException: The transaction under which this method call was executing was asynchronously aborted.</ExceptionString>
    </Exception>
</TraceRecord> 
```

# autohotkey - 自动热键 将任何复制的文件、HTML 或其他格式的文本转换为纯文本

> ID：13669316
> 
> 赞同：2
> 
> 时间：2012-12-02T12:35:25.680
> 
> 标签：autohotkey

将剪贴板从任何复制的文件转换为纯文本的自动热键命令不起作用。

假设将某些内容复制到剪贴板后，我所要做的就是在脚本中运行以下命令：

```
clipboard = %clipboard%   ; 
```

其次是（不一定）：

```
ClipWait ; 
```

等到剪贴板中有文本。

但是我的脚本永远无法将复制的数据转换为纯文本，等待将永远持续下去。另外，我确实有一些东西复制到剪贴板，它是 step7 plc 程序的代码行，但我真的不知道 step 7 如何在剪贴板中格式化它们。我想要的只是以某种方式将数据转换为文本，我知道它可以以某种方式完成（尽管可能不是使用自动热键）:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:05:35.473

您想在使用该技巧*之前*使用 clipwait 。另一种选择是定期检查剪贴板中的路径。如果您不进行某种验证，您将无法复制二进制数据（例如，来自网站的图片）。

这包括对剪贴板中出现的*基本*检查（例如）。`:\``C:\abc\def`

```
Loop
{
    ClipWait
    IfInString, Clipboard, :\
        Clipboard = %Clipboard%
} 
```

# java - spring web flow builder services：什么时候需要它？

> ID：13669317
> 
> 赞同：1
> 
> 时间：2012-12-02T12:35:40.723
> 
> 标签：java, spring, jakarta-ee, spring-webflow

我读过spring flow builder服务用于“定制”一个web流。现在我的问题是：什么时候需要自定义 Web 流程？有人能给我一个具体的例子吗？

提前致以问候和感谢。H。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:24:57.420

如果您想使用另一个 el 表达式解析器或视图工厂创建者来使用 Webflow 和 Tiles，来设置您自己的转换服务，设置您的应用程序进行开发（这允许您动态更改您的流程而无需重新启动服务器）

# ubuntu - 从 Ubuntu 中删除 openjdk

> ID：13669319
> 
> 赞同：2
> 
> 时间：2012-12-02T12:36:18.967
> 
> 标签：ubuntu

为什么如果我想删除 openjdk，apt-get 会安装新包。

```
sudo apt-get purge openjdk-6-jre
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following extra packages will be installed:
  gcj-4.6-base gcj-4.6-jre gcj-4.6-jre-headless gcj-4.6-jre-lib gcj-jre gcj-jre-headless icedtea-7-jre-jamvm libbonobo2-0 libbonobo2-common libgcj-common
  libgcj12 libgcj12-awt libgnome2-0 libgnome2-bin libgnome2-common libidl-common libidl0 liborbit2 openjdk-7-jre openjdk-7-jre-headless openjdk-7-jre-lib
Suggested packages:
  fastjar gcj-4.6-jdk gcj-jdk libbonobo2-bin libgcj12-dbg desktop-base icedtea-7-plugin sun-java6-fonts fonts-ipafont-gothic fonts-ipafont-mincho
  ttf-telugu-fonts ttf-oriya-fonts ttf-kannada-fonts ttf-bengali-fonts
The following packages will be REMOVED:
  default-jre* icedtea-netx* openjdk-6-jre*
The following NEW packages will be installed:
  gcj-4.6-base gcj-4.6-jre gcj-4.6-jre-headless gcj-4.6-jre-lib gcj-jre gcj-jre-headless icedtea-7-jre-jamvm libbonobo2-0 libbonobo2-common libgcj-common
  libgcj12 libgcj12-awt libgnome2-0 libgnome2-bin libgnome2-common libidl-common libidl0 liborbit2 openjdk-7-jre openjdk-7-jre-headless openjdk-7-jre-lib
0 upgraded, 21 newly installed, 3 to remove and 0 not upgraded.
Need to get 49.7 MB/66.9 MB of archives.
After this operation, 119 MB of additional disk space will be used.
Do you want to continue [Y/n]? 
```

为什么是“21新装”？？？。我只是想卸载 openjdk 而不是安装新软件包。也许是因为我安装了 libreoffice。PS。

# php - 我的 simple_html_dom 脚本在浏览器中加载时显示我的 PHP 代码

> ID：13669320
> 
> 赞同：0
> 
> 时间：2012-12-02T12:36:19.147
> 
> 标签：php, simple-html-dom

我正在尝试获得几个 Android 应用程序的标题。这是我正在使用的代码示例：

```
<?php

// Create DOM from URL or file
$package_name = 'com.brogent.livewallpaper.halloween';
include('simple_html_dom.php');
$html = new simple_html_dom();
$html -> load_file("http://play.google.com/store/apps/details?id='$package_name'");

$det[0][1] = $html->find('h1[class=doc-banner-title]');
echo $det[1];
?> 
```

我遇到的问题是，每当我将脚本加载到 php 文件中时，浏览器都会向我显示：

```
load_file("http://play.google.com/store/apps/details?id='$package_name'"); $det[0][1] = $html->find('h1[class=doc-banner-title]'); echo $det[1]; ?> 
```

那么，我需要做些什么来解决这个问题，这样我才能获得所需的输出、获得所需的快速信息并继续前进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T12:41:12.653

您需要为您的服务器启用 PHP 解释器和/或具有正确的扩展名。

对于 Apache，您需要安装 PHP 并将以下行添加到`httpd.conf`：

```
LoadModule php5_module "C:/Program Files/PHP/php5apache2_2.dll"
AddType application/x-httpd-php .php
PHPIniDir "c:/Program Files/PHP" 
```

根据需要替换路径

也可能需要更改此行以读取`DirectoryIndex index.php index.html index.htm`

**编辑**

再检查一遍

1.  该文件的扩展名是`.php`
2.  您`<?php`在代码的开头和`?>`结尾（或启动 PHP 解释器的其他方法之一。
3.  如果使用 XML，请检查字符串是否包含`<?`或`>?`为第一行 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T12:39:26.963

您的 Web 服务器配置不正确。确保您的 Web 服务器可以正确解释 php。您需要使用 apache 安装 php 模块。

# ruby - 运行 bundle install 作为后台进程

> ID：13669321
> 
> 赞同：1
> 
> 时间：2012-12-02T12:36:29.647
> 
> 标签：ruby, shell, unix, bundler

我想`bundle install`作为后台进程运行并从终端隐藏其输出。目前我这样做

```
bundle > /dev/null & 
```

但也许有更好更短的方法可以达到同样的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:17:27.600

如果您真的不关心它的输出（以及它是成功还是失败），您还可以重定向进程的 stderr：

```
bundle >/dev/null 2>/dev/null & 
```

# c# - PhotoCaptureDevice 中的 InvalidOperation 异常

> ID：13669322
> 
> 赞同：0
> 
> 时间：2012-12-02T12:36:42.983
> 
> 标签：c#, xaml, windows-phone-8

当我在 Windows Phone 8 中调用 PhotoCaptureDevice.OpenAsync(...) 方法时，它会引发以下异常。

> System.InvalidOperationException：由于对象的当前状态，操作无效。在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess（任务任务） 在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification（任务任务） 在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult() 在 JPMC.Controls.CaptureTaskLauncher.d_ *6.MoveNext() --- 从先前引发异常的位置结束堆栈跟踪 --- 在 System.Runtime.CompilerServices.AsyncMethodBuilderCore.b* _0(Object state)}

可能是什么问题？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:46:52.943

根据异常消息*“由于对象的当前状态，操作无效”*我猜您已经初始化了 PhotoCaptureDevice？它是开放的吗？因此，您需要通过调用 Dispose() 关闭打开的 PhotoCaptureDevice 或将其缓存在字段中以供以后使用。

# java - 如何在 Spring Data 中进行“按聚合函数排序”？

> ID：13669324
> 
> 赞同：5
> 
> 时间：2012-12-02T12:36:44.623
> 
> 标签：java, spring, jpa, spring-data, spring-data-jpa

我有两个实体：

资源文件：

```
@Entity
@Table(name = "resource_file")
public class ResourceFile extends IdEntity<Integer> {

    @Id
    @SequenceGenerator(name = "resource_file_id_generator", sequenceName = "resource_file_id", allocationSize = 1)
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "resource_file_id_generator")
    @Column(name = "id", unique = true, nullable = false)
    @Nonnegative
    private Integer id;

    ...
} 
```

收藏资源文件：

```
@Entity
@Table(name = "favorite_resource_file")
@Cacheable
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
public class FavoriteResourceFile extends IdEntity<FavoriteResourceFileId> {

    @EmbeddedId
    private FavoriteResourceFileId id;

    @MapsId("resourceFileId")
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "resource_file_id", nullable = false)
    private ResourceFile resourceFile;

    ...

} 
```

我想进行以下查询“选择所有资源文件并按最喜欢的资源文件的计数对它们进行排序”。

在 SQL 中，它看起来像：

```
select rf.id, count(frf.resource_file_id) from resource_file rf
left join favorite_resource_file frf on frf.resource_file_id = rf.id
group by rf.id
order by count(rf.id) desc; 
```

但我无法理解如何使用 Spring Data 来完成它以及如何在最后映射到 ResourceFile 实体。

一些限制：

*   我无法与 ResourceFile 中的 FavoriteResourceFile 建立关系，因为它们位于不同的模块中
*   我不想使用原生 SQL 或 JPA 查询（作为字符串）。
*   最好使用元模型、规范或 QueryDSL，因为它们已经在项目中使用。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T11:46:03.000

您可以将自定义存储库实现与 Crud/PagingAndSorting 存储库实现一起使用，如下所示：

端点回购：

```
public interface ResourceFileRepository extends
    PagingAndSortingRepository<ResourceFile, Integer>,
    ResourceFileRepositoryCustom {
} 
```

自定义回购：

```
public interface ResourceFileRepositoryCustom {
    List<ResourceFile> getResourceFilesOrderByFavourites();
} 
```

使用实际代码的自定义 repo 实现来检索按收藏计数排序的 ResourceFile（注意它是 ResourceFileRepositoryImpl 而不是 ResourceFileRepositoryCustomImpl）。

我没有那些嵌入式密钥，所以我不得不稍微简化一下。查询来自FavoriteResourceFile，因为ResourceFile 与FavoriteResourceFile 没有自己的关系。

```
public class ResourceFileRepositoryImpl implements ResourceFileRepositoryCustom {
    @PersistenceContext
    private EntityManager em;

    public void setEntityManager(EntityManager em) {
        this.em = em;
    }

    @Override
    public List<ResourceFile> getResourceFilesOrderByFavourites() {
        CriteriaBuilder criteriaBuilder = this.em.getCriteriaBuilder();
        CriteriaQuery<ResourceFile> q = criteriaBuilder
                .createQuery(ResourceFile.class);
        Root<FavoriteResourceFile> root = q.from(FavoriteResourceFile.class);
        Join<FavoriteResourceFile, ResourceFile> join = root.join(
                 FavoriteResourceFile_.resourceFile, JoinType.LEFT);
        q.select(join);
        q.groupBy(join.get(ResourceFile_.id));
        q.orderBy(criteriaBuilder.desc(
                      criteriaBuilder.count(
                          join.get(ResourceFile_.id))));

        TypedQuery<ResourceFile> query = this.em.createQuery(q);
        return query.getResultList();
    }
} 
```

要查看完整的示例项目（带有一些非常基本的 sql 和测试） - checkout/fork/etc： [https ://github.com/rchukh/StackOverflowTests/tree/master/13669324](https://github.com/rchukh/StackOverflowTests/tree/master/13669324)

# c++ - 什么是“记忆脚印”？

> ID：13669329
> 
> 赞同：99
> 
> 时间：2012-12-02T12:37:36.620
> 
> 标签：c++, c, memory, memory-management

我刚刚[看到这篇博客文章](http://simpleprogrammer.com/2012/12/01/why-c-is-not-back/)，其中提到了“跺脚记忆”：

> 一个 C++ 程序，它可以轻松地占用内存（如果您出生在托管代码世界中，您可能从未听说过。）

而事实上我从来没有听说过！

那么，这是什么，一个记忆跺脚，跺脚记忆？什么时候发生？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-12-02T12:43:45.337

当一段代码在没有意识到另一段代码正在以一种冲突的方式使用该内存的情况下操作内存时，内存就会被“踩踏”。有几种常见的方法可以压制记忆。

一种是分配，比如说，100 字节的内存，然后存储超过第 100 个地址的东西。该内存可能用于保存完全不同的东西。这特别难以调试，因为当某些东西试图访问被踩踏的受害者时，问题就会出现，而踩踏它的代码可能完全不相关。

另一个是在释放内存后访问内存。内存可以分配给另一个对象。同样，显示问题的代码可能与获得相同地址的新分配对象有关，而与导致问题的代码无关。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-12-02T12:42:56.340

很多时候是缓冲区溢出；例如，这段代码：

```
char buffer[8];
buffer[8] = 'a'; 
```

将“踩”在`buffer`. 一般来说，“跺脚”是指无意中写入内存。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-07-14T08:41:02.047

其他答案基本上是正确的，但我想举个例子。

```
int a[10], i;       
for (i = 0; i < 11 ; i++)
    a[i] = 0; 
```

* * *

```
int i, a[10];     
for (i = 0; i < 11 ; i++)
    a[i] = 0; 
```

这些样本可能会导致无限循环（或可能不会导致），因为它是未定义的行为。

内存中的变量很可能`i`存储在数组之后。所以访问`a[10]`实际上可以访问`i`，换句话说，它可以重置循环计数器。

我认为这是一个很好的例子，展示了记忆“跺脚”。

# cakephp - 我如何从 cakephp 或数据库 mysql 的 php 中导出 excel 文件

> ID：13669330
> 
> 赞同：0
> 
> 时间：2012-12-02T12:37:41.477
> 
> 标签：cakephp, export-to-excel, export-to-csv, datefield

是我可以从数据库中使用 cakephp 导出 excel 文件的方式。我的数据是：

```
[Name] [Tel] [Email]    [date]
Name 1  000  1@name.com (0000-00-00)
Name 2  000  2@name.com (1391-12-01)
Name 3  000  3@name.com (1391-12-01) 
```

字段类型是：姓名和电子邮件是`varchar`
电话是`int`
日期是`Date type`

我将数据库中的日期字段转换为`locate date.( Persian date )`，如果我使用 Mysql 从数据中导出，我无法将日期字段转换为定位日期。
感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T01:29:25.690

[在http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)查看 PHPExcel 库。也有一个 CakePHP 插件。

# php - 仅限 PHP 时间戳“几小时前”

> ID：13669333
> 
> 赞同：-2
> 
> 时间：2012-12-02T12:38:08.053
> 
> 标签：php, hour, timestamping

> **可能重复：**
> [PHP时间戳直到“几小时前”麻烦](https://stackoverflow.com/questions/13668311/php-timestamp-until-hours-ago-trouble)

如何制作一个 PHP 时间戳，只显示几个小时前的时间？例如显示 48 小时而不是 2 天前和 480 小时而不是 20 天前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:49:58.000

```
$dateposted = '2012-12-1 12:59:44';
$dateposted2 = '1354661156'; // time();

echo ceil((strtotime("now") - strtotime($dateposted))/3600);
echo ceil((strtotime("now") - $dateposted2)/3600); 
```

# javascript - 仅限 Chrome 中的手风琴问题 - Javascript 错误 - 'document.domain'

> ID：13669334
> 
> 赞同：1
> 
> 时间：2012-12-02T12:38:13.170
> 
> 标签：javascript, google-chrome, frame

我有一个折叠/手风琴菜单我正在使用并拉入一些 facebook 位。

手风琴打开一次，但不会在 Chrome 浏览器中打开第二次（它在 Firefox 中运行良好）......我在 Chrome 中收到以下错误。

```
Unsafe JavaScript attempt to access frame with URL http://www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fpages%2FCornish-Roofing-Company%2F226107850785536&width=280&height=290&colorscheme=light&show_faces=true&border_color&stream=false&header=true from frame with URL http://flux3design.co.uk/crs/. The frame being accessed set 'document.domain' to 'facebook.com', but the frame requesting access did not. Both must set 'document.domain' to the same value to allow access. 
```

知道这是什么...帮助:(

干杯

# php - Ajax删除复选框删除第一个或前一个，不是必需的 - jquery

> ID：13669337
> 
> 赞同：0
> 
> 时间：2012-12-02T12:38:26.757
> 
> 标签：php, javascript, jquery

我正在尝试从下面的 html 代码中删除一个类别。当我单击前一个删除或第一个。

--HTML代码--

```
<div id="catlist" name="catlist" style=" color:#fff; font-family:arial; font-size:12px;">

<input type="checkbox" value="<?php echo $row_cat['cat']; ?>" class="checkboxcat" id="<?php $ctn = $row_cat['cat']; echo $ctn; ?>"  name="catcheckbox" style="border:#cccccc 1px solid; background-color:#fff;">

<span class="cattext" id="<?php echo $ctn; ?>"><?php echo $ctn; ?></span>

<span class="CatDelete" id="<?php echo $ctn; ?>" style="position:relative; left:10px; color:#c3c3c3; font-size:10px; cursor:pointer;">Delete</span>

</div> 
```

--JS代码--

```
$(".CatDelete").live('click',function() {

var valu = $('.checkboxcat').closest('input').find('checkbox').val();

var dataString = 'CatDelVal='+valu;
    $.ajax({     type: "POST",     
        url: "cat_delete.php",     
        data: dataString,     
        success: function(){       
    $('.success').fadeIn(1000);     }     });      
    return false;   

});

The issue is here: 
**var valu = $('.checkboxcat').closest('input').find('checkbox').val();** 
```

当我单击删除时，必须删除该特定类别，但不知道为什么？

[更新] [http://jsfiddle.net/7RrNN/](http://jsfiddle.net/7RrNN/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:49:16.837

我相信您的 JS 代码应该像这样更改：（使用`on`相反`live`，因为`live`已弃用）

```
$(".CatDelete").on('click', function() {

var valu = $(this).siblings('.checkboxcat').val();

var dataString = 'CatDelVal='+valu;
    $.ajax({     type: "POST",     
        url: "cat_delete.php",     
        data: dataString,     
        success: function(){       
    $('.success').fadeIn(1000);     }     });      
    return false;   
}); 
```

~~我相信PHP代码也应该像这样改变~~

 ~~```
<span class="CatDelete" id="<?php echo $ctn; ?>" data-id="<?php echo $row_cat['cat']; ?>" style="position:relative; left:10px; color:#c3c3c3; font-size:10px; cursor:pointer;">Delete</span> 
```~~  ~~* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T12:53:08.687

您的页面上有三个具有相同 id 的元素，这是无效的 -`ID`必须是唯一的。

不确定`$('.checkboxcat').closest('input').find('checkbox')`应该做什么，但是： 中几乎没有任何元素*，*因此`<input>`您不需要获取最近的输入父元素。此外，HTML 中没有`<checkbox>`元素。你的意思是以下吗？

```
$('input:checkbox.checkboxcat') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:09:28.853

谢谢你的时间。我不知道为什么它不起作用。我刚刚重新编码，它工作正常。可能是简单的想法。没有把握。~~

# php - 使用 YML 设置实体字段默认值

> ID：13669338
> 
> 赞同：8
> 
> 时间：2012-12-02T12:38:37.997
> 
> 标签：php, doctrine-orm, yaml

我需要在类文件中获取默认值

```
private $example_field = 0; 
```

当我使用这个

```
example_field:
    options:
        default: 0 
```

我得到了默认的数据库值，但是当我尝试在不设置“su”的情况下坚持时出现错误（列“su”不能为空）。

反正，

```
example_field:
    default: 0 
```

什么也没做。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-02-17T04:22:19.483

这对我有用：

```
fields:
    my_field:
        options:
            default: 5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-05T10:59:25.143

0 默认值的正确定义是使用引号：

```
example_field:
    options:
        default: '0' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T00:51:53.207

Doctrine 不支持 SQL 'DEFAULT' 关键字：

[http://docs.doctrine-project.org/en/2.1/reference/faq.html](http://docs.doctrine-project.org/en/2.1/reference/faq.html)

要解决此问题，您需要在实体的构造函数中设置默认值。如果您想要类文件中的默认私有变量，请制作并使用公共 getter 函数。

您还可以尝试在控制器中持久化期间设置变量。

# python - Jenkins Remote API 是否支持在视图中运行所有作业？

> ID：13669345
> 
> 赞同：1
> 
> 时间：2012-12-02T12:39:09.580
> 
> 标签：python, shell, jenkins, remoteapi

我正在尝试通过从 Python 或 shell 脚本中调用远程 API 来自动执行我们的 Jenkins 构建。

当我们发布软件时，我们会在 Jenkins 内部创建一个新的“视图”（例如`2012-12-02-oursoftware-release`），然后在该视图中创建构建作业。最好编写一个 Python 或 shell 脚本，将此视图的名称作为参数，然后使用远程 API 来执行为该特定视图配置的所有作业。

这可能吗？如果可以，怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:58:08.087

您是否尝试过[Config Slice 插件](https://wiki.jenkins-ci.org/display/JENKINS/Configuration+Slicing+Plugin)

# video - libavcodec 获取视频时长和帧率

> ID：13669346
> 
> 赞同：5
> 
> 时间：2012-12-02T12:39:19.540
> 
> 标签：video, ffmpeg, duration, frame-rate, libavcodec

我有一个视频编码，`.3gp` `h.264`我希望在 C 中获得它的帧速率和持续时间。这是我在打开文件并找到合适的编解码器后使用的代码：

```
AVRational rational = gVideoCodecCtx->time_base;

LOGI(10, "numerator is %i", rational.num);
LOGI(10, "denominator is %i", rational.den);
LOGI(10, "duration is %d", gFormatCtx->duration);
LOGI(10, "fps is %d", (double)av_q2d(rational)); 
```

这是输出：

```
12-02 12:30:19.819: I/FFmpegTest(23903): numerator is 1
12-02 12:30:19.819: I/FFmpegTest(23903): denominator is 180000
12-02 12:30:19.819: I/FFmpegTest(23903): duration is 6594490
12-02 12:30:19.819: I/FFmpegTest(23903): fps is 1692926992 
```

从文档中，我了解到持续时间是“duration/time_base”，它给了我`6594490 / 180000 = 36.6`. 我的视频文件的持续时间是`6 seconds`，我不知道这个因素`6`来自哪里。

此外，帧速率似乎完全关闭。

目前很难找到帮助，因为很多教程都使用了不推荐使用的方法，并且文档没有给出示例。

任何帮助，将不胜感激。

谢谢

**编辑：** 感谢下面的评论，我设法打印了以下内容

```
12-02 18:59:36.279: I/FFmpegTest(435): numerator is 1
12-02 18:59:36.279: I/FFmpegTest(435): denominator is 180000
12-02 18:59:36.279: I/FFmpegTest(435): duration is 6594490
12-02 18:59:36.279: I/FFmpegTest(435): fps is 0.000006 
```

我还设法找到了一个帧的时间戳`msec`：

```
int msec = 1000*(packet.pts * timeBase * gVideoCodecCtx->ticks_per_frame); 
```

这返回给我的东西大概是`33fps`（我期望的`30`）。但我不知道如何检索持续时间。文档说“流的持续时间，以`AV_TIME_BASE`小数秒为单位”但是`6594490 * 0.000006 = 39.5`- 正确的持续时间是`6.3`秒）。确切的 fps 也是`30`，但不确定如何从`0.000006`上述`30`数字中得到）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-03-14T01:16:27.760

FPS可以通过这种方式获得：

```
const double FPS = (double)videoStream->r_frame_rate.num / (double)videoStream->r_frame_rate.den; 
```

哪里`videoStream`是：

```
AVFormatContext * format = NULL;
if ( avformat_open_input( & format, "my_video.mkv", NULL, NULL ) != 0 ) ) on_error();
if ( avformat_find_stream_info( format, NULL ) < 0) on_error();
//av_dump_format( format, 0, "my_video.mkv", false );
AVCodec * video_dec = (AVCodec*)1;
const auto video_stream_index = av_find_best_stream( format, AVMEDIA_TYPE_VIDEO, -1, -1, & video_dec, 0 );
if ( video_stream_index < 0 ) on_error();
const auto videoStream = format->streams[ video_stream_index ]; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-02T18:44:19.747

您的 fps 打印是垃圾，因为它应该是 %lf 而不是 %d。你为什么不检查其他参数类型一次。

# c# - COM 和线程安全

> ID：13669347
> 
> 赞同：6
> 
> 时间：2012-12-02T12:39:20.300
> 
> 标签：c#, com, thread-safety, locking

我需要将 ASP.NET MVC 网站与第 3 方 COM 应用程序集成。代码看起来像这样：

```
Type type = Type.GetTypeFromProgID(progID);
dynamic obj = Activator.CreateInstance(type);
if (!obj.DBOpenedStatus)
{
    obj.InitApplicationContext();
    //do stuff with other COM objects
} 
```

问题是，过了一段时间我开始变得`COMExceptions`很可能是因为我从不使用`obj.ReleaseApplicationContext()`. 所以我正在考虑编写一个实现的包装器`IDisposable`，以便我可以在构造函数中初始化上下文并在它被释放时释放它。但是然后我需要一个`lock`，以便在当前线程仍在工作时另一个线程不会关闭上下文。代码如下所示：

```
lock (_locker)
{
    using (MyComContextWrapper comContext = new MyComContextWrapper())
    {
        //do stuff with other COM objects
    }
} 
```

我对线程安全知之甚少，所以我要问你的是：

1.  我的方法有什么问题吗？
2.  还有什么我应该考虑的（比如死锁或其他）？
3.  你会推荐一种不同的方法吗？

**编辑 1：**
我在注册表中查找了 COM 类的 progID，发现`ThreadingModel=Apartment`COM 应用程序使用了一个`Single-Threaded Apartment`类型。

**编辑 2：**
COM 应用程序使用系统为对象生成 id，这样当这些对象被持久保存在数据库中时，它们就已经有了一个 Id。该系统涉及在注册表中写入一些信息。过了一会儿，这个系统出了点问题，我开始`violation of primary key constraint`出错。

**编辑 3：**
我有时会得到一个`System.ArgumentNullException: Value cannot be null. Parameter name: type at Activator.CreateInstance(Type type)`. 这可能是因为我试图从另一个线程创建一个新的 STA 对象吗？

**编辑 4：**
有人让我发布完整的`COMExceptions`. 此外，我实际上找到了问题的原因：有一些非常罕见的情况是在使用一些 com 对象之前没有初始化上下文，这会弄乱系统，但错误只是在以后出现。所以我确保在使用任何 com 对象之前始终初始化上下文并且问题消失了。

我仍然对有关线程安全的答案和我提出的解决方案感兴趣。或者这个问题应该因为过于本地化而被关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:53:40.060

您不需要在对象周围使用锁，因为 COM 线程的全部目的是在多线程环境中让您的生活更轻松和自动化（一旦您了解了它的使用，并且注册表是正确的）。

在标准托管 .NET 方案中，您也不需要执行任何特定操作，即使释放 COM 对象也应该由垃圾收集器自动完成。所以你不应该需要使用模式。

话虽如此，底层的非托管 COM 对象在使用后可能会更好地工作，或者您的应用程序可能由于某种原因不能真正等待 GC 发生（例如，由于使用 hi ）。在这些情况下，您可以使用[Marshal.ReleaseComObject](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.releasecomobject.aspx)或[Marshal.FinalReleaseComObject](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.finalreleasecomobject.aspx)来强制释放使用过的 COM 对象，并使用包装器对象对其进行包装。

# python - 使用 Python 进行 PCA 分析和绘图

> ID：13669349
> 
> 赞同：-4
> 
> 时间：2012-12-02T12:39:26.390
> 
> 标签：python, numpy, matplotlib, scipy, pca

> **可能重复：**
> [使用 Python 进行 PCA 分析](https://stackoverflow.com/questions/13224362/pca-analysis-with-python)

我有这个尺寸为 1940 x 4 的[数据。](http://www.chartologic.com/php/foo.csv)它的行是读数或样本，而它的列是变量（温度、湿度、风速和压力）。我想进行 PCA 分析并使用 Python 绘制其结果。情况是，我最终得到了一些技术和示例，但我不知道如何利用它们以及即使我得到 PCA 结果该做什么。所以，我在这里寻找一个代码示例，通过它我可以在这种数据集上用 Python 实现 PCA 分析，以及了解如何解释 PCA 结果以及如何绘制它们。最后，如何解释图。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:29:37.517

主成分分析对于降低数据集的维数很有用。由于您的数据仅包含四个变量并且（据我所知）它们不相关，因此我不希望 PCA 对任何实际分析有价值。

如果我错了，并且您真诚地期望某些变量是相关的，您可以使用 PCA 来识别捕获大部分典型协方差的最重要的 4 向量。这些是协方差矩阵的特征向量。需要四个这样的向量才能完全跨越与输入变量相同的空间。

在测量大量变量并且存在大量相互信息的系统中，PCA 识别独立信息的重要位。我认为您的系统不是这种情况。

# java - 如何将 HashMap 更改为同步

> ID：13669352
> 
> 赞同：-6
> 
> 时间：2012-12-02T12:39:44.510
> 
> 标签：java, concurrency, synchronization, hashmap, hashtable

是否可以将 HashMap 更改为同步。如果是这样，请告诉我如何更改它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T12:44:44.913

对于同步 HashMap，您可以使用

```
Collections.synchronizedMap(<your hashmap reference>) 
```

这将为您返回一个同步的地图，这是线程安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T12:41:54.593

`ConcurrentHashMap`是同步的实现之一。

根据[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html)

> 支持检索的完全并发和可调整的预期更新并发的哈希表。此类遵循与 Hashtable 相同的功能规范，并包含与 Hashtable 的每个方法对应的方法版本。但是，即使所有操作都是线程安全的，检索操作也不需要锁定，并且不支持以阻止所有访问的方式锁定整个表。在依赖线程安全但不依赖同步细节的程序中，此类与 Hashtable 完全可互操作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T12:42:32.523

采用`Collections.synchronizedMap(new HashMap());`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T12:43:23.980

```
Collections.synchronizedMap(map); 
```

返回由指定映射支持的同步（线程安全）映射。为了保证串行访问，对支持映射的所有访问都是通过返回的映射完成的，这一点至关重要。

文档：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#synchronizedMap%28java.util.Map%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#synchronizedMap%28java.util.Map%29)

# haskell - 什么是新类型的 WHNF 以及 rseq 如何在新类型上工作？

> ID：13669356
> 
> 赞同：8
> 
> 时间：2012-12-02T12:40:26.753
> 
> 标签：haskell, concurrency, lazy-evaluation, newtype

由于`newtype`s 在编译期间被有效地删除，它们没有 thunk，只有值。那么如果我使用 WHNF 请求它会发生什么[`rseq`](http://hackage.haskell.org/packages/archive/parallel/latest/doc/html/Control-Seq.html#v%3arseq)？例如在

```
Sum (lengthyComputation :: Int) `using` rseq 
```

其中[`Sum`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Monoid.html#v%3aSum)定义为

```
newtype Sum a = Sum { getSum :: a } 
```

会`lengthyComputation`被评估吗？它是否在某处指定/记录，以便我可以依靠它？

* * *

**更新：**让我更详细地解释我的疑问。直观地说：“`newtype`很严格，它的 WHNF 是包裹在里面的东西的 WHNF”。但我觉得这是一个非常不精确的捷径，推理也不是很清楚。让我举个例子吧：

对于标准`data`类型，WHNF 可以定义为我们知道哪个构造函数用于构造值的形式。例如，如果我们没有`seq`，我们可以创建自己的

```
seqMaybe :: Maybe a -> b -> b
seqMaybe Nothing  = id
seqMaybe _        = id 
```

同样对于任何`data`类型，只需在其构造函数之一上进行模式匹配即可。

现在让我们采取

```
newtype Identity a = Identity { runIdentity :: a } 
```

并创建一个类似的`seqIdentity`功能：

```
seqIdentity :: Identity a -> b -> b
seqIdentity (Identity _)  = id 
```

显然，这里没有什么是强制 WHNF 的。（毕竟，我们总是知道使用了什么构造函数。）编译后，`seqIdentity`将与`const id`. 事实上，不可能创建多态性`seqIdentity`，这样它会强制评估包裹在里面的值`Identity`！我们可以将 a 的 WHNF a`newtype`简单地定义为未修改的值，并且它是一致的。所以我认为问题是，WHNF 是如何为`newtype`s 定义的？还是没有严格的定义，并且“这是内部的WHNF”行为被简单地假设为显而易见的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T13:00:48.657

根据报告中有关[数据类型重命名的部分，](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-740004.2.3)

> 与代数数据类型不同，newtype 构造函数 N 是未提升的，因此 N ⊥ 与 ⊥ 相同。

这里

```
Sum ⊥ = ⊥ 
```

所以新类型的弱头范式是包裹类型的WHNF，并且

```
Sum (lengthyComputation :: Int) `using` rseq 
```

评估`lengthyComputation`（当整个表达式被评估时，一个单纯的绑定

```
let x = Sum (lengthyComputation :: Int) `using` rseq 
```

当然不是，但是没有 newtype 构造函数也是一样的）。

的定义[方程](http://www.haskell.org/onlinereport/haskell2010/haskellch6.html#x13-1260006.2)是`seq`

```
seq ⊥ b  =  ⊥
seq a b  =  b, if a ≠ ⊥ 
```

因此

```
seq (Sum ⊥) b = ⊥ 
```

并且在

```
seq (lengthyComputaton :: Int) b 
```

需要`seq`找出（对不起拟人化）是否`lengthyComputation :: Int`是⊥。为此，它必须评估`lengthyComputation :: Int`.

* * *

重新更新：

`newtype`s 是*unlifted*，这意味着构造函数在语义上不是值构造函数（仅在语法上）。与`newtype`构造函数上的模式匹配相比，构造函数上的模式匹配`data`并不严格。给定

```
newtype Foo a = Foo { unFoo :: a }  -- record syntax for convenience below 
```

“模式匹配”

```
function :: Foo a -> Bar
function (Foo x) = whatever x 
```

完全等价于

```
function y = let x = unFoo y in whatever x 
```

匹配总是成功的，并且不评估任何内容。[构造函数只强制类型](http://www.haskell.org/onlinereport/haskell2010/haskellch3.html#x8-580003.17)和“模式匹配”它不强制值的类型。

`seq`很神奇，它不能在 Haskell 中实现。您可以在 Haskell 中编写与上述类型相同的函数`seq`，但不能为 (polymorphic)编写函数，因为 newtype 构造函数上的“模式匹配”并不严格。您必须匹配包装类型的构造函数，但对于多态，您没有它们。`data``seqMaybe``newtype``newtype`

# r - 单线创建 data.frame 并让列相互依赖

> ID：13669357
> 
> 赞同：2
> 
> 时间：2012-12-02T12:40:34.263
> 
> 标签：r, dataframe

生成 data.frames（特别是对于不可重现的 SO 问题）的一种不常见的情况是，当一列依赖于另一列的（通常是随机的）值时。例如，如果想要一个 data.frame 来测试回归，最好有一些嘈杂的线性依赖：

```
n <- 100
x <- runif(n)
dat <- data.frame( x=x, y=x+runif(n) )
plot(y~x,data=dat) 
```

![y 与 x](../Images/7e83342bd1fe120a0808fd0e5cacb635.png)

但是，我想在一行中完成（上面将算作两行，第一行创建 x，第二行在 data.frame 分配中使用 x），理想情况下不在全局环境中存放任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T13:15:17.583

这是一个简单的解决方案`within`：

```
within(data.frame(x = runif(n)), y <- x + runif(n)) 
```

此命令不*分配*给`y`全局环境（或父框架）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T13:00:16.607

这是一种不违反许多程序员喜欢坚持的“每行一个分配”规则的方法：

```
within(data.frame(row.names = 1:n), {x = runif(n); y = x + runif(n)}) 
```

where`data.frame(row.names = 1:n)`用于创建具有正确行数的空 data.frame，否则`within`会抱怨。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-02T13:04:18.260

这是一个解决方案，它没有您识别出的两个缺点。

```
library(data.table)
n <- 100

dat <- data.table(x = runif(n))[, y := x + runif(n)] 
```

它本身的缺点是：

1.  需要加载整个包。
2.  变得有点丑陋（即`data.frame(data.table(......))`，如果你想要一个“普通的”`data.frame`返回。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-02T15:59:03.523

`set.seed`将需要使随机数在任何情况下都可重现，但尝试此模数：

```
set.seed(123)
dat <- transform(data.frame(x = runif(10)), y = x + runif(10)) 
```

这给出了：

```
> dat
           x         y
1  0.2875775 1.2444109
2  0.7883051 1.2416393
3  0.4089769 1.0865476
4  0.8830174 1.4556508
5  0.9404673 1.0433920
6  0.0455565 0.9453815
7  0.5281055 0.7741932
8  0.8924190 0.9344786
9  0.5514350 0.8793557
10 0.4566147 1.4111184 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-02T15:07:58.020

这是一个自定义函数，其工作方式类似于`transform`（或`plyr::mutate`），但不需要初始数据框。（显然这对 OP 的问题并没有真正的帮助，因为没有人会拥有这个功能，但我认为其他人可能会感兴趣）

```
create <- function(...) {
  .data <- list()

  cols <- as.list(substitute(list(...))[-1])
  cols <- cols[names(cols) != ""] # Silently drop unnamed columns

  for(col in names(cols)) {
    .data[[col]] <- eval(cols[[col]], .data, parent.frame())
  }
  as.data.frame(.data)
}
create(x = runif(1:10), y = x + 1) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-02T12:40:34.263

这是我想出的最好的。它使用 R 初学者的常见错误作为编写更紧凑代码的技巧。

```
dat <- data.frame( x<-runif(n), y=x+runif(n) ) 
```

这与[@Tommy 在 CodeGolf.SE 上的提示在精神上相似](https://codegolf.stackexchange.com/a/4051/3163)。

缺点是：

1.  潜在的混乱。尤其是因为这是一个常见的错误，在这种情况下，专家代码审查员可能会将其与错误混淆。
2.  存放`x`在父（全局，在大多数用例中）环境中，它可能会覆盖其他一些变量。

**编辑**

@WojciechSobala 在评论中的解决方案值得在这里强调。只需将上面的表达式包装在`local`：

```
dat <- local( data.frame( x<-runif(n), y=x+runif(n) ) ) 
```

由于它的`local`工作原理与`evalq`（例如，它在给定环境中评估表达式）一样，除了它默认在新环境中通过 评估，因此`new.env()`在`x`这个新环境中而不是在全局环境中创建。

# linux-kernel - linux 启动时的 mknod

> ID：13669359
> 
> 赞同：2
> 
> 时间：2012-12-02T12:41:04.210
> 
> 标签：linux-kernel, kernel, kernel-module

我有一个添加到 /etc/modules 的设备，之前它是由 insmod 添加的，然后是 mknod..

我想在内核启动时添加 mknod 命令..

```
 # load driver
/sbin/insmod -f ./${module}.${suf} $* o_dbg=1 || exit 1

# Get driver major number
major=`awk "\\$2==\"$module\" {print \\$1}" /proc/devices`

mknod /dev/${device}0 c $major 0 
```

1-我将模块添加到 /lib/modules/ `uname -r`/

2- debmod -a

但我不知道如何自动制作 mknod

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:54:46.597

如果您的系统有，`udev`那么`mdev`您可以编写规则来自动创建设备节点。否则，您可以`sys_mknod`从模块代码中手动调用。确保`sys_mknod`已导出。

另请参阅：[在代码中创建设备节点](https://stackoverflow.com/questions/5970595/create-a-device-node-in-code)

# asp.net - 通过 HttpModule 调用服务初始化函数

> ID：13669360
> 
> 赞同：0
> 
> 时间：2012-12-02T12:41:11.323
> 
> 标签：asp.net, wcf-data-services, custom-authentication

我已经编写了 WCF 数据服务，它无需身份验证即可正常运行。然后我想通过在应用程序中添加 HttpModule 来添加一些身份验证代码，如下所示：

```
public class BasicIdentity : IIdentity
{
    string _name;

    public BasicIdentity(string name)
    {
        this._name = name;
    }

    string IIdentity.AuthenticationType
    {
        get { return "Custom SCHEME"; }
    }

    bool IIdentity.IsAuthenticated
    {
        get { return true; }
    }

    string IIdentity.Name
    {
        get { return _name; }
    }
}

public class BasicPrincipal : IPrincipal
{
    string[] _roles;
    IIdentity _identity;

    public BasicPrincipal(string name, params string[] roles)
    {
        this._roles = roles;
        this._identity = new CustomIdentity(name);
    }

    public IIdentity Identity
    {
        get { return _identity; }
    }

    public bool IsInRole(string role)
    {
        return _roles.Contains(role);
    }
}

public class BasicAuthenticationProvider
{
    public static bool Authenticate(HttpContext context)
    {
        //if (!HttpContext.Current.Request.IsSecureConnection)
        //    return false;

        if (!HttpContext.Current.Request.Headers.AllKeys.Contains("Authorization"))
            return false;

        string authHeader = HttpContext.Current.Request.Headers["Authorization"];

        IPrincipal principal;
        if (TryGetPrincipal(authHeader, out principal))
        {
            HttpContext.Current.User = principal;
            return true;
        }
        return false; 
    }

    private static bool TryGetPrincipal(string authHeader, out IPrincipal principal)
    {
        // 
        // WARNING: 
        // our naive – easily mislead authentication scheme 
        // blindly trusts the caller. 
        // a header that looks like this: 
        // ADMIN username 
        // will result in someone being authenticated as an 
        // administrator with an identity of ‘username’ 
        // i.e. not exactly secure!!! 
        // 
        //var protocolParts = authHeader.Split(' ');
        //if (protocolParts.Length != 2)
        //{
        //    principal = null;
        //    return false;
        //}
        //else if (protocolParts[0] == "ADMIN")
        //{
        //    principal = new CustomPrincipal(
        //       protocolParts[1],
        //       "Administrator", "User"
        //    );
        //    return true;
        //}
        //else if (protocolParts[0] == "USER")
        //{
        //    principal = new CustomPrincipal(
        //       protocolParts[1],
        //       "User"
        //    );
        //    return true;
        //}
        //else
        //{
        //    principal = null;
        //    return false;
        //}
        var creds = ParseAuthHeader(authHeader);
        if (creds != null && TryGetPrincipal(creds, out principal))
            return true;

        principal = null;
        return false; 
    }

    private static string[] ParseAuthHeader(string authHeader)
    {
        // Check this is a Basic Auth header 
        if (
            authHeader == null ||
            authHeader.Length == 0 ||
            !authHeader.StartsWith("Basic")
        ) return null;

        // Pull out the Credentials with are seperated by ':' and Base64 encoded 
        string base64Credentials = authHeader.Substring(6);
        string[] credentials = Encoding.ASCII.GetString(
              Convert.FromBase64String(base64Credentials)
        ).Split(new char[] { ':' });

        if (credentials.Length != 2 ||
            string.IsNullOrEmpty(credentials[0]) ||
            string.IsNullOrEmpty(credentials[0])
        ) return null;

        // Okay this is the credentials 
        return credentials;
    }

    private static bool TryGetPrincipal(string[] creds, out IPrincipal principal)
    {
        if (creds[0] == "Administrator" && creds[1] == "SecurePassword")
        {
            principal = new GenericPrincipal(
               new GenericIdentity("Administrator"),
               new string[] { "Administrator", "User" }
            );
            return true;
        }
        else if (creds[0] == "JoeBlogs" && creds[1] == "Password")
        {
            principal = new GenericPrincipal(
               new GenericIdentity("JoeBlogs"),
               new string[] { "User" }
            );
            return true;
        }
        else
        {
            principal = null;
            return false;
        }
    }
}

public class BasicAuthenticationModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
        context.AuthenticateRequest
           += new EventHandler(context_AuthenticateRequest);
    }
    void context_AuthenticateRequest(object sender, EventArgs e)
    {
        HttpApplication application = (HttpApplication)sender;
        if (!BasicAuthenticationProvider.Authenticate(application.Context))
        {
            application.Context.Response.Status = "401 Unauthorized";
            application.Context.Response.StatusCode = 401;
            application.Context.Response.AddHeader("WWW-Authenticate", "Basic");
            application.CompleteRequest();
        }
    }
    public void Dispose() { }
} 
```

这里 BasicAuthenticationModule 在 web.config 中注册为

```
 <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <httpModules>
      <add name="BasicAuthenticationModule"
     type="ODataEmptyWebApp.BasicAuthenticationModule"/>
    </httpModules>
 </system.web> 
```

现在，当我在浏览器中运行 WCF 数据服务时，它会询问我身份验证窗口。当我输入无效凭据时，它会继续要求提供正确的凭据，当我提供正确的凭据（即管理员/SecuredPassword）时，它会关闭窗口并显示空白页面。该页面的源代码如下：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv="Content-Type" 
content="text/html; charset=windows-1252"></HEAD>
<BODY></BODY></HTML> 
```

当我调试代码时，我发现它没有调用我的 WCF 数据服务的 Initialize 方法，该方法在我添加 HttpModule 之前曾经被调用过。

我不明白为什么控件没有传递给 Initialize 方法。我是否必须明确添加一些东西才能运行？

# python - 音乐多个同时音调，python

> ID：13669363
> 
> 赞同：2
> 
> 时间：2012-12-02T12:41:24.527
> 
> 标签：python, math, frequency, sound-synthesis

我正在做一个有趣的项目，涉及解决数学问题和音乐。生成特定的音符（或音调）很容易：

```
ton = amplitude * sin(2pi * frequency * time / samplerate) 
```

我在 python 中工作，并且有代码可以从[http://code.google.com/p/scitools/](http://code.google.com/p/scitools/)做很多事情。

```
def note(frequency, length, amplitude=1, sample_rate=44100):
    time_points = numpy.linspace(0, length, length * sample_rate)
    return numpy.sin(2 * numpy.pi * frequency * time_points) * amplitude 
```

当然，在真实的音乐中，通常会在同一时间步播放多个音调。我试图通过生成然后将两个音调相加来做到这一点，即：

> 双音=音符(440, 2)+音符(261.63, 2)

但这只是废话。我如何在数学上编码多个同时音调？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T12:46:06.937

使用两个音调时，您应该将单个振幅减半，否则总振幅可能会加倍。如果你使用两个以上，你应该混合一个反映它们相对音量的比率，总振幅为 1。

# java - 在 Java 3D 中选择形状

> ID：13669365
> 
> 赞同：2
> 
> 时间：2012-12-02T12:41:47.943
> 
> 标签：java, graphics, 3d, java-3d

我需要将拖放功能添加到我在 Java3D 应用程序中创建的一些形状（比如圆柱体）。我想我知道基本步骤（虽然含糊不清）：

1.  使用当前*Canvas*和根*BranchGroup*构造一个*PickCanvas*。
***   将 PickCanvas 的模式设置为*PickCanvas.GEOMETRY*，根据文档更准确 [**疑问**：各种拾取模式有什么区别，即 BOUNDS、GEOMETRY、GEOMETRY_INTERSECT_INFO ？从文档中我不清楚。几何挑选的真正含义是什么？]*   设置我要选择的对象的功能。[**疑问**：这两种设置能力的方法有什么区别？- `node.setCapability(Node.ENABLE_PICK_REPORTING)`和`PickTool.setCapabilities(node, PickTool.INTERSECT_FULL)`？]*   将*mouseListener*添加到画布。*   在*mousePressed*方法中，我需要确定单击了哪个对象，然后采取适当的操作。[**怀疑**：这是我最困惑的部分。如果可以就如何识别已单击的对象给出详细答案，那将非常有帮助。]**

 **另外，*PickShapes 到底是什么，它们将如何影响拾取算法？*

如果我问的是非常基本的问题，我真的很抱歉，但是我花了一整天的时间阅读文档并成为初学者，这些对我来说还不够。我时间紧迫，我希望 Stackoverflow 社区足够慷慨，耐心地解释我的疑虑。非常感谢 ！

更新：为了澄清一下，通过拖放功能，我的意思是我想使用通常的鼠标左键、拖动和鼠标释放手势将一个圆柱体从画布上的一个位置转换到另一个位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:43:56.597

要平移（和旋转）形状，请使用[MouseBehavior](http://download.java.net/media/java3d/javadoc/1.3.2/com/sun/j3d/utils/behaviors/mouse/MouseBehavior.html)类。例如，使用以下鼠标左键旋转并右键平移。

```
public Test()
{
    SimpleUniverse universe = new SimpleUniverse();
    BranchGroup group = new BranchGroup();

    TransformGroup rootTransformGroup = new TransformGroup();
    group.addChild(rootTransformGroup);
    rootTransformGroup.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
    rootTransformGroup.setCapability(TransformGroup.ALLOW_TRANSFORM_READ);

    ColorCube colorCube = new ColorCube(.3);
    rootTransformGroup.addChild(colorCube);

    BoundingSphere boundingSphere = new BoundingSphere(new Point3d(0, 0, 0), 1000);

    MouseRotate mouseRotate = new MouseRotate();
    mouseRotate.setTransformGroup(rootTransformGroup);
    mouseRotate.setSchedulingBounds(boundingSphere);
    group.addChild(mouseRotate);

    MouseTranslate mouseTrans = new MouseTranslate();
    mouseTrans.setTransformGroup(rootTransformGroup);
    mouseTrans.setSchedulingBounds(boundingSphere);
    group.addChild(mouseTrans);

    universe.getViewingPlatform().setNominalViewingTransform();
    universe.addBranchGraph(group);
} 
```**

# qt - 如何放大 QGraphicsItem 的悬停区域

> ID：13669367
> 
> 赞同：3
> 
> 时间：2012-12-02T12:41:54.573
> 
> 标签：qt, hover, qgraphicsitem

我有一个带有相当小的点标记的 QGraphicsScene。我想扩大这些标记的区域以使拖动更容易。标记是一个十字，距离原点 +/- 2 个像素。我重新实现了

```
QGraphicsItem::contains(const QPointF & point ) const
{
  return QRectF(-10,-10,20,20);
} 
```

和

```
void hoverEnterEvent(QGraphicsSceneHoverEvent* event)
{
  setPen(QPen(Qt::red));
  update();
} 
```

但是标记只有在被光标直接击中时才会变成红色（即使这样也有点挑剔）。如何扩大“悬停区域”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T18:40:01.140

如简短评论中所述：通常这些事情是通过边界矩形或形状函数处理的，请尝试重载它们。查看 QGraphicsItem 下 shape 的 qt 帮助（[http://doc.qt.io/qt-4.8/qgraphicsitem.html#shape](http://doc.qt.digia.com/qt/qgraphicsitem.html#shape)）：

> 将此项的形状作为局部坐标中的 QPainterPath 返回。该形状用于许多事情，包括碰撞检测、命中测试和 QGraphicsScene::items() 函数。
> 
> 默认实现调用 boundingRect() 来返回一个简单的矩形形状，但是子类可以重新实现这个函数来为非矩形项返回一个更准确的形状。例如，圆形项目可能会选择返回椭圆形以更好地检测碰撞。例如：
> 
> QPainterPath RoundItem::shape() const { QPainterPath 路径；path.addEllipse(boundingRect()); 返回路径；形状的轮廓可以根据绘图时使用的笔的宽度和样式而有所不同。如果你想在项目的形状中包含这个轮廓，你可以使用 QPainterPathStroker 从笔划创建一个形状。
> 
> 该函数由 contains() 和 collidesWithPath() 的默认实现调用。

所以基本上发生的是所有想要访问与项目关联的“区域”的函数，调用形状，然后对生成的painterpath进行例如包含或碰撞检测。因此，如果您有小物品，您应该扩大形状区域。例如，让我们考虑一条作为您的目标的线，而不是您的形状实现可能如下所示：

```
QPainterPath Segment::shape() const{
  QLineF temp(qLineF(scaled(Plotable::cScaleFactor)));
  QPolygonF poly;
  temp.translate(0,pen.widthF()/2.0);
  poly.push_back(temp.p1());
  poly.push_back(temp.p2());
  temp.translate(0,-pen.widthF());
  poly.push_back(temp.p2());
  poly.push_back(temp.p1());
  QPainterPath path;
  path.addPolygon(poly);
  return path;
} 
```

笔是段的成员，我用它的宽度来扩大形状区域。但是您也可以采用与对象的实际尺寸有良好关系的其他任何东西。

# c++ - 从 win32 项目链接到 x64 库时为什么会出现链接错误？

> ID：13669372
> 
> 赞同：-1
> 
> 时间：2012-12-02T12:42:26.377
> 
> 标签：c++, 64-bit

我正在使用具有 x86 和 x64 版本的库。我的项目是win32，当我链接到x64库时，出现了一堆链接错误。

我想知道为什么我会收到这些链接错误。X64 版本使用传出符号名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:44:26.193

指针大小等不匹配。您需要使用适当的库编译 32 位或 64 位。

# jquery - 使用 Jquery 验证来验证下拉所选项目

> ID：13669374
> 
> 赞同：0
> 
> 时间：2012-12-02T12:42:33.717
> 
> 标签：jquery, validation, drop-down-menu, jquery-validate

我正在使用 Mvc Web 应用程序，我的页面中有一个简单的下拉菜单。我的下拉列表有 3 个项目，我想在每次更改时检查所选项目。

目前我正在编写一个 JavaScript 函数来处理下拉“onchange”事件。但如您所知，当您通过键盘切换下拉项目时，此事件不会触发。

在这种情况下如何使用 jquery 自定义验证？我希望每次下拉所选项目发生变化时，都会发生某些事情，例如禁用文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:27:51.277

试试这个，

***jQuery代码：***

```
<script language="javascript" type="text/javascript" src="js/jquery-1.8.2.js"></script>
<script language="javascript" type="text/javascript">
$(function(){
    $('#dropdown').change(function() {  
    $('#selectedValue').html($(this).val()); // just to see what value did the user select
    if($(this).val()=='2'){// validating whether the user selected value 2 and disabling textbox
        $('#textbox').attr('disabled', 'disabled');
    }
});
});
</script> 
```

***html代码：***

```
<select name="dropdown" id="dropdown">
<option id="select1" value="1" selected="selected">1</option>
<option id="select2" value="2">2</option>
<option id="select3" value="3">3</option>
<option id="select4" value="4">4</option>
</select>
<input id="textbox" type="text" value="" />
<div id="selectedValue"></div> 
```

# assembly - 这是用什么汇编语言写的？

> ID：13669376
> 
> 赞同：-1
> 
> 时间：2012-12-02T12:43:00.190
> 
> 标签：assembly

一种。早期一代：

```
C7060F000055       mov     dword ptr [esi],5500000Fh
C746048BEC5151     mov     dword ptr [esi+0004],5151EC8Bh 
```

湾。以及它的后代之一：

```
BF0F000055         mov     edi,5500000Fh
893E               mov     [esi],edi
5F                 pop     edi
52                 push    edx
B640               mov     dh,40
BA8BEC5151         mov     edx,5151EC8Bh
53                 push    ebx
8BDA               mov     ebx,edx
895E04             mov     [esi+0004],ebx 
```

C。又一代具有重新计算（“加密”）“恒定”数据：

```
BB0F000055         mov     ebx,5500000Fh
891E               mov     [esi],ebx
5B                 pop     ebx
51                 push    ecx
B9CB00C05F         mov     ecx,5FC000CBh
81C1C0EB91F1       add     ecx,F191EBC0h ; ecx=5151EC8Bh
894E04             mov     [esi+0004],ecx 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T12:46:19.890

那是英特尔（而不是 AT&T）格式的 x86 代码。它使用类似寄存器的事实`ecx`意味着它是 32 位或更好的品种之一。

左边的十六进制数字是该行其余部分的汇编语言操作码和操作数的机器语言表示。

# python - 如何知道输出是否到终端？

> ID：13669381
> 
> 赞同：2
> 
> 时间：2012-12-02T12:43:30.767
> 
> 标签：python, c, linux, bash, xterm

> **可能重复：**
> [检测标准输入是否是 C/C++/Qt 中的终端或管道？](https://stackoverflow.com/questions/1312922/detect-if-stdin-is-a-terminal-or-pipe-in-c-c-qt)

我想知道我的程序的输出是直接到终端还是被重定向到管道或文件。

因为如果它进入终端，我想输出转义序列以制作彩色文本，但在文件或管道中这些将不受欢迎。

我知道这是可能的，因为“ls”可以做到，有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T12:45:14.087

在流的文件描述符或您需要测试的任何其他文件上使用该[`os.isatty()`函数：](http://docs.python.org/2/library/os.html#os.isatty)`stdout`

```
>>> import sys, os
>>> os.isatty(sys.stdout.fileno())
True 
```

对于打开的文件（如`sys.stdout`流），该[`.fileno()`方法](http://docs.python.org/2/library/stdtypes.html#file.fileno)返回必要的描述符。

# php - PHP如何在按下提交后不刷新输入值

> ID：13669385
> 
> 赞同：0
> 
> 时间：2012-12-02T12:44:18.973
> 
> 标签：php, html, forms

我有问题，当我在我的联系表单中按下提交按钮时，所有输入值都会刷新，如果所有字段都填写正确，那很好，但如果是一些警告用户必须看到以前的值，但都被清除了。我的 Javascript 技能很低，maye 是用 php 和 html 解决这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:46:10.987

更简单的方法是使用 html5 存储。在 onkeyup 事件上存储值并在提交成功时销毁

举个例子

```
 <input id="title"   type="text" value=""  name="article_name"> 
```

脚本

检查对 html5 的支持

```
 function supports_html5_storage() {
          try {
            return 'localStorage' in window && window['localStorage'] !== null;
          } catch (e) {
            return false;
          }
        } 
```

要存储的脚本

```
 if(supports_html5_storage()){

        $("#title").keyup(function(){

            var articel_title =  $("#title").val();
             localStorage.setItem("articel_title",articel_title);
             localStorage.getItem("articel_title");
        }); 
```

要清除存储，如果表单成功提交，您可以触发它，它将清除存储

```
 <script type=text/javascript>
          localStorage.removeItem("articel_title");

     </script> 
```

您还可以对更改或 keyup 事件进行 ajax 调用并将值存储到数据库，这样如果浏览器不支持 html5，它仍然可以工作，但会导致服务器负载增加

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T12:48:32.493

返回值给客户端：

```
<input type="text" name="val1" value="<?echo $_POST['val1']?>" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T12:49:55.200

将您的值发布到页面内的 iframe，如果条目正确，则重定向到另一个页面。

因此，如果条目错误，您无需执行任何操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T12:51:09.050

您将需要[ajax](/questions/tagged/ajax "显示标记为“ajax”的问题")和[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")。以下教程将帮助您：

*   [http://www.queness.com/post/160/create-a-ajax-based-form-submission-with-jquery](http://www.queness.com/post/160/create-a-ajax-based-form-submission-with-jquery)
*   [http://www.tuttoaster.com/create-an-ajaxjqueryphp-contact-form/](http://www.tuttoaster.com/create-an-ajaxjqueryphp-contact-form/)

# .net - 如何在.Net中使用日期时间格式的t字母？

> ID：13669389
> 
> 赞同：1
> 
> 时间：2012-12-02T12:44:41.637
> 
> 标签：.net, datetime, datetime-format

我试过用

```
DateTime.Now.ToString("yyyy-MM-ddtHH:mm"); 
```

获取类似“2011-12-02t12:39”的字符串（这是 ISO 8601 标准格式的小写版本）。

但得到“2011-12-02A12:39”而不是“A”表示“AM”。正如实验和文档所说的那样，“t”变成“A”代表 AM，“P”代表“PM”。

但无论如何，我只需要一个简单的“t”字母。如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T12:52:32.867

使用撇号具有以下格式的文字内容：

```
DateTime.Now.ToString("yyyy-MM-dd't'HH:mm"); 
```

# python - Mako：使用全局变量时出现 NameError

> ID：13669392
> 
> 赞同：1
> 
> 时间：2012-12-02T12:45:07.837
> 
> 标签：python, mako

[Mako 文档](http://docs.makotemplates.org/en/rel_0_6/defs.html#defs-within-defs)中的以下示例实际上不起作用：

```
<%
    x = 12
%>
<%def name="outer()">
    <%
        y = 15
    %>
    <%def name="inner()">
        inner, x is ${x}, y is ${y}
    </%def>

    outer, x is ${x}, y is ${y}
</%def> 
```

当我在`<%self:outer />`下面添加调用def（文件中没有其他内容）时，页面将出错并且我的apache日志显示

```
[Sun Dec 02 13:25:08 2012] [error] [client 89.247.172.1]   File "/tmp/mako_template_cache/index.html.mako.py", line 82, in render_outer
[Sun Dec 02 13:25:08 2012] [error] [client 89.247.172.1]     __M_writer(str(x))
[Sun Dec 02 13:25:08 2012] [error] [client 89.247.172.1]   File "/usr/lib/python3/dist-packages/mako/runtime.py", line 195, in __str__
[Sun Dec 02 13:25:08 2012] [error] [client 89.247.172.1]     raise NameError("Undefined")
[Sun Dec 02 13:25:08 2012] [error] [client 89.247.172.1] NameError: Undefined 
```

我可能做错了什么？我有来自 Debian 的 Mako 0.7.0，它应该可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:14:40.600

文档中给出的模板实际上并没有做任何事情，因为它甚至没有调用`inner()`or `outer()`。文档描述的用法是本地函数调用：

```
from mako.template import Template

print Template("""
<%
    x = 12
%>
<%def name="outer()">
    <%
        y = 15
    %>
    <%def name="inner()">
        inner, x is ${x}, y is ${y}
    </%def>

    outer, x is ${x}, y is ${y}

    ${inner()}
</%def>

${outer()}

""").render() 
```

输出：

```
outer, x is 12, y is 15

    inner, x is 12, y is 15 
```

当您`outer()`通过`self`命名空间调用时，它会在不同的变量范围内调用，因此您不会在“x”处得到。“x”是在“body”def 中定义的，所以只有调用body() 中定义的outer() 才会有“x”。

# extjs - sencha 创建 jsb -a ./app.html -p ./app.jsb3

> ID：13669393
> 
> 赞同：2
> 
> 时间：2012-12-02T12:45:11.123
> 
> 标签：extjs, sencha-touch, sencha-touch-2

在 Sencha SDK 3.0 中，sencha create 不是正确的命令！当我进入

```
sencha create jsb -a ./app.html -p ./app.jsb3 
```

我得到“没有这样的属性：'create'”的信息。

如何在新的 Sencha SDK 3.0 中创建 usb 文件？感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:53:12.043

我也遇到了这个错误（`[ERR] No such property : 'generate'`），但在其他情况下 - 在尝试创建我的第一个应用程序时。而不是： `sencha app create MyApp ../MyApp` 我写： `sencha generate app MyApp ../MyApp`

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:10:04.373

```
sencha create jsb 
```

是一个独特的命令，在 Sencha Cmd v3.0 中被省略了 - 为什么 - 谁知道！？

您仍然需要使用 SDK Tools v2.0，并且此命令（因为`sencha`v3.0 在您的路径中）：

```
d:\_dev\ExtPackageTest>"C:\Program Files (x86)\SenchaSDKTools-2.0.0-beta3\sencha
" create jsb -a http://localhost:60139/index.html -p app.jsb3 
```

`ExtPackageTest`您的网络应用程序代码的根在哪里

我认为如果您可以迁移到 Ext 4.1.3+，最好的办法是按照本指南直接进入 Ext Js 的新 Sencha Cmd v3.0。

它非常敏感，我建议您使用它创建一个新应用程序并将您的应用程序代码复制到它生成的模板中。我发现我的代码在打包到发布模式后表现不同，支持人员告诉我“很幸运”，调试设置没有发生这种情况^^。

[http://docs.sencha.com/ext-js/4-1/#!/guide/command](http://docs.sencha.com/ext-js/4-1/#!/guide/command)

# c++ - OpenCV - 从图像中获取灰度值

> ID：13669398
> 
> 赞同：-3
> 
> 时间：2012-12-02T12:46:03.670
> 
> 标签：c++, c, image-processing, opencv, computer-vision

大家好，现在我正在尝试获取图像中每个像素的灰度值，我的意思是灰度值是图像中的白色或黑色级别，假设白色为 0，黑色为 1。此图像的示例

![在此处输入图像描述](../Images/ce8bc88cd409b22816ccca0768c5e5b8.png)

我想要的价值就像

```
 0 0 0 0 0 0
 0 1 1 1 0 0
 0 0 1 1 0 0
 0 0 1 1 0 0
 0 0 1 1 0 0
 0 0 1 1 0 0
 0 0 1 1 0 0
 0 0 0 0 0 0 
```

这可能吗？如果是的话，如何在 C 中使用 OpenCV 来做到这一点？或者如果 OpenCV 不可能，是否还有其他库可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T13:22:41.163

你问的当然是可能的，但*如何*做到这一点取决于很多事情。如果您使用 C++，那么我们通常希望您使用 C++ 接口，这意味着您有一个`cv::Mat`对象并使用以下内容加载图像：（使用命名空间 cv）

```
#include <opencv2/core/core.hpp>
Mat mat_gray = imread(path, CV_LOAD_IMAGE_GRAYSCALE); 
```

或通过

```
Mat mat = imread(path); // and assuming it was originally a color image...
Mat mat_gray;
cvtColor(mat, mat_gray, CV_BGR2GRAY); //...convert it to grayscale. 
```

现在，如果您只想逐个访问像素值，请使用`_Tp& mat.at<_Tp>(int x,int y);`. 那是：

```
for(int x=0; x<mat_gray.rows; ++x)
  for(int y=0; y<mat_gray.cols; ++y)
    mat_gray.at<uchar>(x,y); // if mat.type == CV_8U 
```

您可以[在此处查找您的类型](https://stackoverflow.com/a/13490111/1705967)，如果 mat.type 不是 CV_8U，您应该使用它来代替 uchar。

至于**纯C**接口，可以查看[这个答案](https://stackoverflow.com/a/9697364/1705967)。但是如果你使用 C++，你肯定应该使用 C++ 接口。

# r - 防止 nls-fit 低于零

> ID：13669400
> 
> 赞同：2
> 
> 时间：2012-12-02T12:46:10.267
> 
> 标签：r, nls

我正在尝试在 R 中拟合一个函数，因此我使用 nls()。有没有办法防止拟合函数低于零？

一个简单的解决方法是`b0`在拟合后提高目标函数中的参数，但这实际上不是我想要的，因为我希望真正的拟合与积极的约束会导致更好的结果。

```
y=c(m1,m2,m3,m4,m5,m6,m7,m8,m9,m10)
d=data.frame(seq(1, 10, 1),y=y)
fitFun <- function(x, add, b0, b1) {b0 + (x+add)^b1}
m=nls(y~fitFun(x,add,intercept,power),d,start=list(intercept=1,power=3.5,add=2),trace=T) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:17:13.933

你需要改变你的模型。为此，您需要定义如果函数值低于零会发生什么。这是一个示例，它将这些值设置为 0。

```
x <- 1:200/100
set.seed(42)
y <- -10+(x+1)^3.5+rnorm(length(x),sd=3)
df <- data.frame(x,y)

plot(y~x,data=df)

fitFun <- function(x, add, b0, b1) {
    res <- b0 + (x+add)^b1
    res[res<0] <- 0
    res
}
fit <- nls(y~fitFun(x,add,intercept,power),
           data=df,start=list(intercept=1,power=3.5,add=2))
summary(fit)
lines(predict(fit)~df$x,col="red") 
```

![拟合结果](../Images/ea712f9ae110debe92b0730ea27cfb8b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:40:08.033

你在找这个吗？如果预测是参数的难以反转的函数，则约束参数以使预测为非负可能会很棘手，但在这种情况下，我们只需要`b0>=0`使用 @Roland 的示例，

```
fit2 <- nls(y~b0+(x+add)^b1,
            algorithm="port",
            lower=c(b0=0,b1=-Inf,add=-Inf),
            data=df,start=list(b0=1,b1=3.5,add=2))
lines(predict(fit2)~df$x,col="purple") 
```

下面的蓝色是原始的无约束拟合；红色适合@Roland；紫色是上面的合身。

![在此处输入图像描述](../Images/77b467f38feee88b9e3f514b8d098f26.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T14:56:16.360

非常感谢您的回答。也许我没有就我的问题提供足够的信息，但我还不允许张贴图片和描述一切会导致一个短篇故事。

@Roland 是完全正确的，优化器的任务不是关心目标函数的行为，但正如我提到的，我假设模型是修复的。

@Ben Bolker 将函数的加法部分限制为正值的建议导致了不令人满意的结果。

我没有提到的是 m1 到 m10 是我记录的数据收集的平均值。我通过在拟合过程中使用记录系列的方差作为权重解决了我的问题。

```
y=c(m1,m2,m3,m4,m5,m6,m7,m8,m9,m10)
d=data.frame(seq(1, 10, 1),y=y)
vars = c(var(lt1$V1),var(lt2$V1),var(lt3$V1),var(lt4$V1),var(lt5$V1),var(lt6$V1),var(lt7$V1),var(lt8$V1),var(lt9$V1),var(lt10$V1))
weights = rep(max(vars),10)/vars
fitFun <- function(x, add, b0, b1) {b0 + (x+add)^b1}
m=nls(y~fitFun(x,add,intercept,power),d,weights=weights,start=list(intercept=1,power=3.5,add=2),trace=T) 
```

# html - TypeScript：类型系统的问题

> ID：13669404
> 
> 赞同：112
> 
> 时间：2012-12-02T12:46:37.417
> 
> 标签：html, types, web, typescript, static-typing

我只是在 VisualStudio 2012 中测试打字稿，但它的类型系统有问题。我的 html 网站有一个 ID 为“mycanvas”的画布标签。我正在尝试在此画布上绘制一个矩形。这是代码

```
var canvas = document.getElementById("mycanvas");
var ctx: CanvasRenderingContext2D = canvas.getContext("2d");
ctx.fillStyle = "#00FF00";
ctx.fillRect(0, 0, 100, 100); 
```

不幸的是，VisualStudio 抱怨说

> “HTMLElement”类型的值上不存在属性“getContext”

它将第二行标记为错误。我认为这只是一个警告，但代码无法编译。VisualStudio 说

> 有构建错误。您想继续并运行最后一次成功的构建吗？

我根本不喜欢这个错误。为什么没有动态方法调用？毕竟 getContext 方法肯定存在于我的画布元素上。但是我认为这个问题很容易解决。我刚刚为画布添加了类型注释：

```
var canvas : HTMLCanvasElement = document.getElementById("mycanvas");
var ctx: CanvasRenderingContext2D = canvas.getContext("2d");
ctx.fillStyle = "#00FF00";
ctx.fillRect(0, 0, 100, 100); 
```

但是类型系统仍然不满意。这是新的错误消息，这次是在第一行：

> 无法将“HTMLElement”转换为“HTMLCanvasElement”：“HTMLElement”类型缺少“HTMLCanvasElement”类型中的“toDataURL”属性

好吧，我完全支持静态类型，但这使得语言无法使用。类型系统要我做什么？

更新：

Typescript 确实不支持动态调用，我的问题可以通过类型转换来解决。我的问题基本上是这个[TypeScript 的副本：casting HTMLElement](https://stackoverflow.com/questions/12686927/typescript-casting-htmlelement?rq=1)

* * *

## 回答 #1

> 赞同：246
> 
> 时间：2012-12-02T16:23:13.023

```
var canvas = <HTMLCanvasElement> document.getElementById("mycanvas");
var ctx = canvas.getContext("2d"); 
```

或使用类型的动态查找`any`（无类型检查）：

```
var canvas : any = document.getElementById("mycanvas");
var ctx = canvas.getContext("2d"); 
```

您可以查看[lib.d.ts](https://github.com/Microsoft/TypeScript/blob/master/lib/lib.d.ts)中的不同类型。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-02-12T23:55:07.293

```
const canvas =  document.getElementById('stage') as HTMLCanvasElement; 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-02-13T03:23:57.833

虽然其他答案提倡类型断言（这就是它们的本质——TypeScript 没有真正改变类型的*类型转换*；它们只是抑制类型检查错误的一种方式），解决问题的理智诚实的方法是倾听错误信息。

在你的情况下，有 3 件事可能出错：

*   `document.getElementById("mycanvas")`可能会返回`null`，因为找不到该 id 的节点（它可能已被重命名，尚未注入到文档中，有人可能尝试在无法访问 DOM 的环境中运行您的函数）
*   `document.getElementById("mycanvas")`可能会返回对 DOM 元素的引用，但该 DOM 元素不是`HTMLCanvasElement`
*   `document.getElementById("mycanvas")`确实返回了一个有效的`HTMLElement`，它确实是一个`HTMLCanvasElement`，但`CanvasRenderingContext2D`浏览器不支持。

我建议不要让编译器关闭（并且可能会发现自己处于`Cannot read property 'getContext' of null`抛出无用错误消息的情况），而是建议控制您的应用程序边界。

**确保元素包含 HTMLCanvasElement**

```
const getCanvasElementById = (id: string): HTMLCanvasElement => {
    const canvas = document.getElementById(id);

    if (!(canvas instanceof HTMLCanvasElement)) {
        throw new Error(`The element of id "${id}" is not a HTMLCanvasElement. Make sure a <canvas id="${id}""> element is present in the document.`);
    }

    return canvas;
} 
```

**确保浏览器支持渲染上下文**

```
const getCanvasRenderingContext2D = (canvas: HTMLCanvasElement): CanvasRenderingContext2D => {
    const context = canvas.getContext('2d');

    if (context === null) {
        throw new Error('This browser does not support 2-dimensional canvas rendering contexts.');
    }

    return context;
} 
```

用法：

```
const ctx: CanvasRenderingContext2D = getCanvasRenderingContext2D(getCanvasElementById('mycanvas'))

ctx.fillStyle = "#00FF00";
ctx.fillRect(0, 0, 100, 100); 
```

请参阅[TypeScript 游乐场](https://typescript-play.js.org/#code/MYewdgzgLgBA5gUygYQIZgG6ogUQDYIC2CYUAQgJ4CSAJjALwwAUAljQFwzQBOLYcASk4AJACoBZADJpM2fERKx6APhgBvAFAxtMUJFjB0WCAxg0QwAK7FSAOkRR5N8tRqsaAgNwatOlgDNmAEImQ1kTPmh0YAQQQLEpGWMnRQEBdV8dHSgAC24QAHcYMAQinG587iYAA1EchBgEAmcYOJg2GAAiABI1NgBfTvaTMBBYVBgE6SM5ZsVbGHFUAGsGiEtuBomAHjDjdpp6Hr6aQc7VJoVSYZgAB02IRXawGFyG8ytnW2qvTJh+nxZTZQDYvPbYbwAjR6aDwJBJbAAJRINAQvH4yHAUAQAA8oAAmAAiplCMwgIgk03CKVIQhgCIgyLAqPRcExpFxBOJKgyWRhBixnNM4Ig9nhgrxTAA5PiaFLfn8Asw9Ni8Qx6IwwJY8Hh0posllcvkiiUyhUQFUpXUWCYAEbGx7cMwgBAjMZcSy3W4W2D4gC0NBYNggLHAqDwujJME2zLRfDguglUFF8u8WShQKQoMTHLxkJ8-N0UBxnAZTJZ8fZqq5pgcZZRcYxSaJTDrZJpLlo0sIFBF8oEBeLtn8LB1AGUoBQCKZOgBiAAM84AYkvF51vMAhyOdcjN0x5wAaGCHmAARkXR-P868QA)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-08T16:43:32.093

这似乎在 .9 版本的 TypeScript 中得到纠正：http: [//blogs.msdn.com/b/typescript/archive/2013/03/25/working-on-typescript-0-9-generics-overload- on-constants-and-compiler-performance.aspx](http://blogs.msdn.com/b/typescript/archive/2013/03/25/working-on-typescript-0-9-generics-overload-on-constants-and-compiler-performance.aspx) 请参阅“常量重载”部分，其中明确显示了画布标记。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-04T12:12:31.847

我遇到了同样的问题，但使用的是 SVGSVGElement 而不是 HTMLCanvasElement。转换为 SVGSVGElement 会导致编译时错误：

```
var mySvg = <SVGSVGElement>document.getElementById('mySvg'); 
```

*无法将“HTMLElement”转换为“SVGSVGElement”：
“HTMLElement”类型缺少“SVGSVGElement”类型的属性“width”。
“SVGSVGElement”类型缺少“HTMLElement”类型的“onmouseleave”属性。*

如果通过首先转换为“任何”来修复它：

```
var mySvg = <SVGSVGElement><any>document.getElementById('mySvg'); 
```

或者这样（它具有相同的效果）

```
var mySvg: SVGSVGElement = <any>document.getElementById('mySvg'); 
```

现在 mySvg 被强类型化为 SVGSVGElement。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-29T19:45:00.580

您可能需要`DOM`在`compilerOptions.lib`您的`tsconfig.json`.

```
// 'tsconfig.json'
 {
  "compilerOptions": {
    "target": "ES2017",
    "module": "commonjs",
    "lib": [
      "es5",
      "DOM",
      "esnext"
    ]
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-02T01:39:20.027

这是一个老话题……也许到 2012 年就死了，但对 VS Code 和 typescript 来说是令人兴奋和新的。

我必须执行以下操作才能使其在具有以下包引用的 VS Code 中工作。

```
const demoCanvas: HTMLCanvasElement = document.getElementById('rfrnCanvas') as any;

        if(demoCanvas.getContext) {
            const context = demoCanvas.getContext('2d');

            if(context) {
                reactangle(context);
            }
        } 
```

打字稿版本：

```
{
    "@typescript-eslint/eslint-plugin": "^2.29.0",
    "@typescript-eslint/parser": "^2.29.0",
    "typescript": "^3.7.5"
} 
```

# perl - 在 Perl 中将十六进制值转换为十六进制字符串

> ID：13669405
> 
> 赞同：0
> 
> 时间：2012-12-02T12:46:50.040
> 
> 标签：perl

考虑：

```
$index = 0;

$start_addr = 0x50000000;

for (i=$index; $i<256; $i++)
{
    $addr = sprintf("%X",($start_addr = $start_addr + 4));

    print "addr:$addr\n";
} 
```

我得到了十六进制形式的数字（如 50000000、50000004、50000008、5000000C 等等..）。我的要求是我应该把它作为 0x50000000,0x50000004 等等......为此，我想将它转换为十六进制字符串（“5000000C”）并将 0x（使用 . 运算符，如 0x.5000000C）连接到那个又一次转换回十六进制值（0x5000000C）。但我不知道如何开始。是否存在更好的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T12:48:13.117

只需添加`0x`到`sprintf`模式：

```
sprintf("0x%X",($start_addr = $start_addr + 4)); 
```

# git - 清除 Bitbucket 上的 git 存储库？

> ID：13669410
> 
> 赞同：78
> 
> 时间：2012-12-02T12:48:05.100
> 
> 标签：git, bitbucket

我刚刚开始使用 git，并开始使用 Bitbucket。但是，我现在想使用我创建的存储库，但没有它的初始历史。

有什么办法可以清除或清除我的存储库，以便我可以从头开始？

我对任何内容都不太在意，所以我可以删除存储库，然后创建一个具有相同名称的新存储库吗？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-12-02T12:51:33.960

无需删除它。

如果您想上传（没有历史记录）现有的 repo，请从新的本地 repo 创建目录或远程简单的 .git：

```
 rm -rf .git 
```

仅从当前内容重新创建存储库

```
 git init
 git add .
 git commit -m "Initial commit" 
```

然后只需推送到 github 远程存储库，确保您覆盖历史记录：

```
 git push --force -u origin master 
```

这将用您在本地完成的新分支替换您的 BitBucket 主分支的历史记录。

现在，如果您之前推送过其他分支，您可能想要[删除它们](http://gitready.com/beginner/2009/02/02/push-and-delete-branches.html)。

```
git push origin :oldBranch 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-05T21:30:26.990

确实它有效，但是对于该`push`命令，您需要再次提供存储库的完整路径，因为本地存储库已重新初始化。所以`origin`需要用这样的东西替换：`https://minime@bitbucket.org/banana/test.git`

该命令应如下所示：

```
git push --force -u https://minime@bitbucket.org/banana/test.git master 
```

# matlab - 遗传算法中的选择算子和最小化适应度函数

> ID：13669414
> 
> 赞同：0
> 
> 时间：2012-12-02T12:48:39.453
> 
> 标签：matlab, artificial-intelligence, genetic-algorithm

我正在使用遗传算法开发护士排班工具 im matlab，而不使用 GA 工具箱。
个人是每周计划，并表示为一个二维数组，其中行等于护士的数量，七列，因为它是每周计划。
适应度函数获取整个种群并返回一个大小等于包含适应度值的种群大小的数组。

适应度函数应该最小化，所以最好的调度是具有最低适应度值的调度。我的健身功能是：

```
function fitness_values =Fitness_Function( thePopulation)
%UNTITLED Summary of this function goes here
%   Detailed explanation goes here
[Ar1 Ar2 popsize num_nur]  = Return_Data( 0,0,0,0 );
[prev_sched OffArr]=Return_Data1(0,0);
constraints=cell(popsize,1);
fitness_values=zeros(popsize,1); 
size=[1 7];
c1=zeros(popsize,1);
c1values=cell(popsize,1);
W1=0.25; %hard
W2=0.25; %hard
W3=0.25; %hard
W4=0.125; %soft
W5=0.125; %soft

for i=1: popsize
c1values{i}=zeros(size);
end
% Checking Constraint c1 (the difference between night and day shifts in
% each day of the schedule 
for i=1:popsize
for j=1:7
day_sum=0;
night_sum=0;
    for k=1:num_nur
      if thePopulation{i}(k,j)==1
          day_sum=day_sum+1;
      elseif thePopulation{i}(k,j)==2
          night_sum=night_sum+1;
      end
    end 
    abs_diff=abs(day_sum-night_sum);
    c1values{i}(1,j)=abs_diff.^2;
end
c1(i)=sum(c1values{i}(1,:));

%celldisp(c1values);
%defining the array that will hold the result of multiplying the number of
%violations with the correspondig weight,a cell array where each cell
%containts num_nur rows and 4 columns for c2, c3,c4 and c5.

nurse_fitness=zeros(num_nur,1);
for in=1:popsize
constraints{in}=zeros(num_nur,4);
end

for j=1:num_nur
      v2=0;
      v3=0;
      v4=0;
      %check violations with the previous schedule(the last day of the
      %previous schedule with the first day of the evaluated schedule
      % c2
      if prev_sched(j,7)==2 && thePopulation{i}(j,1)==1
          v2=v2+1;
      end
      % c3
      %check the last day of the previous schedule
       if prev_sched(j,7)==1 && thePopulation{i}(j,1)==1 && thePopulation{i}(j,2)~=3
              v3=v3+1;
       %check the last 2 days of the previous schedule       
       elseif prev_sched(j,6)==1 &&prev_sched(j,7)==1 && thePopulation{i}(j,2)~=3
              v3=v3+1;
       end
       %c4
       %check the last day of the previous schedule
       if prev_sched(j,7)==2 && thePopulation{i}(j,1)==3 &&thePopulation{i}(j,2)==1
              v4=v4+1;
       %check the last 2 days of the previous schedule       
       elseif prev_sched(j,6)==2 &&prev_sched(j,7)==3 && thePopulation{i}(j,2)==1
              v4=v4+1;
       end
       %check violations of constraints c2,c3 and c4 in the
       %evaluated schedule
       for k=1:6 
       %check violations of c2 N->N or N->O (hard)
       if thePopulation{i}(j,k)==2 &&  thePopulation{i}(j,k+1)==1 
          v2=v2+1;
       end
       end
       %check violations of c3 D->D->O     (hard)
      for k=1:5
          if thePopulation{i}(j,k)==1 && thePopulation{i}(j,k+1)==1 && thePopulation{i}(j,k+2)~=3
              v3=v3+1;
          end
       %check violations of c4 N->O->N or N->O->O (soft)
          if thePopulation{i}(j,k)==2 && thePopulation{i}(j,k+1)==3 && thePopulation{i}(j,k+2)==1
              v4=v4+1;
          end
      end
      constraints{i}(j,1)=v2*W2;
      constraints{i}(j,2)=v3*W3;
      constraints{i}(j,3)=v4*W4;
      %check violations of c5 (perefrences of each nurse)
      offdays=find(thePopulation{i}(j,:)==3);
      %disp(offdays);
      %disp(OffArr(j,:));
      %find intersection between the perefreces and the days off in the
      %schedule of each nurse
      inters=intersect(offdays,OffArr(j,:));
      num_inters=length(inters);
      if(length(offdays)==1)
      %for head nurse
      if num_inters==1
      constraints{i}(j,4)=0;
      else
      constraints{i}(j,4)=3*W5;
      end
      else
      penalty=3-num_inters;
      constraints{i}(j,4)=penalty*W5;
      end
      nurse_fitness(j)=sum(constraints{i}(j,:));
   end 
  %calculating the fitness value for the whole schedule 

  fitness_values(i)=W1*c1(i)+sum(nurse_fitness);
   end
  end 
```

我将总结它是如何工作的：它需要一个单元格数组（人口）每个单元格包含一个表示为矩阵的时间表，其中行=护士数和 7 列（每周时间表），问题有 3 个硬约束和 2 个软约束, 所以适应度会在每个时间表中检查这些约束的违反情况, 违规的惩罚是通过将每个护士的违反次数乘以相应的约束权重, 所以最终的适应度值是每个护士的惩罚值的总和. 最后，评估计划的适应度值保存在适应度值数组中（与评估计划存储在总体数组中的索引相同）。

我的问题是什么是合适的选择算子来为交叉和变异算子选择父母？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:28:15.667

您的问题中缺少的要点：

*   “个人”数组中的值是什么意思？
*   可以违反哪些限制条件？
*   “个体”是否意味着基因型和表型？

我想你也可以用一个简单的例子来说明这些，为了其他人的最佳理解，你可以使用[GA 术语](http://en.wikipedia.org/wiki/Genetic_algorithm)吗？

**到目前为止，我只能给出一个笼统的答案。**一般来说，我认为最好通过非违规个人进行搜索。我要做的不是使用复杂的拟合函数。我宁愿让*表型始终是一种非违规解决方案*，可以从（可能违规的）基因型快速计算出来。也许基因型不应该掌握整个问题，只需为一个简单的分配算法提供一个起点，该算法可以进行表型。

如果您有非违规染色体，则突变应该轻微影响，从而导致类似的解决方案。您的染色体可能是某种排列，而突变可能是这些上的一些转座。交叉出生的孩子应该跳出父母的解决方案，保留他们的一些特征。对于置换型染色体，您可以找到标准的交叉运算符。

# javascript - 渲染时无法访问 mysql 数据

> ID：13669421
> 
> 赞同：0
> 
> 时间：2012-12-02T12:50:08.500
> 
> 标签：javascript, node.js

这是我的代码：

```
app.get('/index/:name',function(req, res){
    connection.query('SELECT * FROM deneme',function(err, rows, fields){
        if (err) throw err;
        var paragraf = rows;
    });

    res.render('index', {
        title: req.params.name,
        para: paragraf
    });
}); 
```

但是节点无法从“res.render”内部访问“paragraf”变量。节点返回

> ReferenceError：未定义段落

如何从异步函数外部访问 paragraf 变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T12:53:09.480

这不是应该使用异步方法结果的方式，因为在调用查询回调之前行将不可用。

请尝试：

```
app.get('/index/:name', function(req, res){
    connection.query('SELECT * FROM deneme', function(err, rows, fields){
        ...

        res.render('index', {
            title: req.params.name,
            para: rows
        });
    });
}); 
```

这样一来，您就可以访问并呈现结果（行）。

# java - java中的格式化输出，如ls

> ID：13669430
> 
> 赞同：1
> 
> 时间：2012-12-02T12:51:30.140
> 
> 标签：java, formatting, output

我有目录中文件和目录的名称列表，例如：

```
List<String> list = new ArrayList<Strings>(); /* list of files */ 
```

我需要像 linux 中的命令 ls 那样打印它。

```
a.txt file1.txt       filewithverylongname.txt Folder1
g.txt G_longfile2.txt h.txt                    i.txt 
```

列数取决于文件的数量，列的大小取决于同一列中每个文件或目录名称的长度。如果我知道文件的数量，我会在[这个链接](http://www.homeandlearn.co.uk/java/java_formatted_strings.html)中使用一些东西， 但文件或目录的数量可能是可变的。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:50:39.943

我相信这会满足您的要求：

```
import java.io.File;

public class Ls {

    private static final int NUM_COLUMNS = 3;
    private static final int SEPARATING_SPACE_LENGTH = 2;

    public static void main(String[] args) {
        File file = new File("C:/WINDOWS");
        if(file.isDirectory()) {
           File[] listFiles = file.listFiles();
           list(listFiles);
        }
    }

    private static void list(File[] files) {
        int[] maxLength = new int[NUM_COLUMNS];

        for (int i = 0; i < files.length; i++) {
            int fileLength  = files[i].getName().length();
            int columnIndex = i % NUM_COLUMNS; 

            if (maxLength[columnIndex] < fileLength) {
                maxLength[columnIndex] = fileLength;
            }   
        }

        for (int i = 0; i < files.length; i++) {
            String fileName = files[i].getName();
            System.out.print(fileName);
            for (int j = 0; j < maxLength[i % NUM_COLUMNS] - fileName.length() + SEPARATING_SPACE_LENGTH; j++) {
                System.out.print(" ");
            }

            if ((i + 1) % NUM_COLUMNS == 0) {
                System.out.print("\n");
            }
        }
    }

} 
```

如果不清楚，请告诉我。

谢谢，
EG

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T12:59:41.543

获取文件夹中的文件数

```
File file = new File("D:\\AnyFolder");
if(file.isDirectory()) {
   File[] listFiles = file.listFiles();
   System.out.println("Total files in folder : " + listFiles.length );
} 
```

# objective-c - 打开 al 声音在来电后不播放，直到应用重新启动

> ID：13669431
> 
> 赞同：4
> 
> 时间：2012-12-02T12:51:30.343
> 
> 标签：objective-c, ios, openal, audio

我正在使用 OpenAL 播放游戏声音，并使用标准 AV 播放背景音乐。最近我发现，在来电后，所有的 openal 声音都不起作用，而 bg 音乐仍在播放。如果我强制停止应用程序并重新启动，声音会再次出现。smbd 是否碰巧知道在来电期间/之后 openal 发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:41:07.523

好的，看来我找到了解决方案。我正在使用 obj-c 声音管理器，所以我只是将 AVAudioSession（和 AVAudioPlayer）的 beginInterruption 和 endInterruption 委托方法添加到我的类中。

开始中断看起来像：

```
alcMakeContextCurrent(NULL); 
```

endInterruption 看起来像：

```
 NSError * audioSessionError = NULL;
    [audioSession setCategory:soundCategory error:&audioSessionError];
    if (audioSessionError)
    {
        Log(@"ERROR - SoundManager: Unable to set the audio session category");
        return;
    }

    // Set the audio session state to true and report any errors
    audioSessionError = NULL;
    [audioSession setActive:YES error:&audioSessionError];
    if (audioSessionError)
    {
        Log(@"ERROR - SoundManager: Unable to set the audio session state to YES with error %d.", (int) result);
        return;
    }

        //music players handling
    bool plays = false;
    if (musicPlayer[currentPlayer] != nil)
        plays = [musicPlayer[currentPlayer] isPlaying];
    if (musicPlayer[currentPlayer] != nil && !plays)
        [musicPlayer[currentPlayer] play];

    alcMakeContextCurrent(context); 
```

是的，如果您只使用 openAL 声音，这将有效。但是要播放长曲目，您应该使用 AVAudioPlayer。但这又是苹果的魔力！如果您在播放音乐的同时播放 OpenAL 的声音，就会发生一些奇怪的事情。取消来电和 AVAudioSessionDelegate::endInterruption 与 AVAudioPlayerDelegate::audioPlayerEndInterruption 永远不会调用。只有开始中断，没有结束。甚至 AppDelegate::applicationWillEnterForeground 也不会被调用，app 只是不知道我们已经返回。

但好消息是您可以在**AppDelegate::applicationDidBecomeActive**方法中调用您的 endInterruption，并且将恢复 openAL 上下文。这行得通！

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    if (MySoundMngr != nil)
    {
        [MySoundMngr endInterruption];
    }

    // Restart any tasks that were paused and so on....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-19T20:44:33.203

我很难弄清楚这一点，所以想在这里添加我的答案。这在 Xamarin 中都是专门的，但我怀疑它普遍适用并且类似于@Tertium 的答案

*   您可以防止 iOS 在某些情况下中断您的音频（例如，接听电话但拒绝接听），使用`AVAudioSession.SharedInstance().SetPrefersNoInterruptionsFromSystemAlerts(true, out NSError err);`

*   在某些情况下您仍然会被打断（例如，您接听电话）。要捕获这些，您必须`AVAudioSession.Notifications.ObserveInteruption(myAudioInterruptionHandler);`在启动应用程序时。

在此处理程序中，您可以确定是关闭还是返回，如下所示：

```
void myAudioInterruptionHandler(object sender, AVAudioSessionInterruptionEventArgs args) {
  args.Notification.UserInfo.TryGetValue(
    new NSString("AVAudioSessionInterruptionTypeKey"),
    out NSObject typeKey
  );
  bool isBeginningInterruption = (typeKey.ToString() == "1");
  // ...
} 
```

### 中断开始

当中断开始时，停止正在播放的任何音频（您需要根据您的应用程序自行处理，但可能通过调用`AL.SourceStop`所有内容）。然后，批判性地，

```
ContextHandle audioContextHandle = Alc.GetCurrentContext();
Alc.MakeContextCurrent(ContextHandle.Zero); 
```

**如果您不立即执行此操作，iOS 将炸毁您的 ALC 上下文，您注定要失败。**请注意，如果您有一个处理程序，`AudioRouteChanged`则为时*已晚*，您必须在`AudioInterruption`处理程序中执行此操作。

### 中断结束

当您从中断中恢复过来时，首先重新启动您的 iOS 音频会话： `AVAudioSession.SharedInstance().SetActive(true);`

您可能还需要重置您的首选输入（如果您始终使用默认输入，我认为此步骤是可选的）`AVAudioSession.SharedInstance().SetPreferredInput(Input, out NSError err)`

然后恢复你的上下文 `Alc.MakeContextCurrent(audioContextHandle);`

# python-2.7 - 如何从 Google Drive API python 中的文件资源中获取 parentID？

> ID：13669432
> 
> 赞同：1
> 
> 时间：2012-12-02T12:51:29.507
> 
> 标签：python-2.7, google-drive-api

在此处的文件资源中：[https ://developers.google.com/drive/v2/reference/files#resource](https://developers.google.com/drive/v2/reference/files#resource)

如何从我获得的文件资源中的父母那里获取唯一的 parentID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:52:26.990

在 python 中，如果文件资源是`f`并且只有 1 个父级：

```
parentId = f['parents'][0]['id'] 
```

# ravendb - 使用单独的 RavenDb 进行 AppHarbor 测试部署

> ID：13669435
> 
> 赞同：0
> 
> 时间：2012-12-02T12:51:55.630
> 
> 标签：ravendb, appharbor

我希望能够将我的 github 'dev' 和 'production' 分支部署到不同的 AppHarbor 托管应用程序。为了实现这一点，我在 github 上设置了一个应用程序 slug。这两个应用程序现在已根据相关分支正确部署，但问题是它们共享相同的 RavenHQ 数据库。

需要做什么才能使每个应用程序都有自己的数据库（用于测试目的）？

注意：我正在为 AppHarbor 和 RavenHQ 使用青铜/免费计划。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:34:16.737

如果您正在运行两个单独的 AppHarbor 应用程序，您应该只将 RavenDB 加载项添加到这两个应用程序中，就可以了。

# phpbb3 - 自定义phpbb3注册

> ID：13669437
> 
> 赞同：0
> 
> 时间：2012-12-02T12:52:10.463
> 
> 标签：phpbb3

我正在进行自定义 phpbb3 注册，我正在尝试从外部文件注册用户，但它不起作用。我也检查了错误。没有错误。谁能帮我解决我错的地方。另外，如果有人有任何简单的想法如何为 phpbb3 添加新的用户记录，请帮助我解决这个问题。

```
 <?php

        $username = $_POST[username];
        $password = $_POST[password];
        $email_address = $_POST[email];

    include('forums/common.php');
    require('forums/includes/functions_user.php');

    // Start session management
    $user->session_begin();
    $auth->acl($user->data);
    $user->setup('viewtopic');

        global $config, $db, $user, $auth, $template, $phpbb_root_path, $phpEx;

        $user_row = array(
            'username'                => $username,                //REQUIRED IN FORM
            'user_password'            => md5($password),            //REQUIRED IN FORM
            'user_email'            => $email_address,            //REQUIRED IN FORM
            'group_id'                =>    0,//(int) $group_id,
            'user_timezone'            => $timezone = date(Z) / 3600,//(float) $data[tz],
            'user_dst'                => date(I),//$is_dst,
            'user_lang'                => $user->lang_name,//$data[lang],
            'user_type'                => USER_NORMAL,//$user_type,
            'user_actkey'            => '',//$user_actkey,
            'user_ip'                => $user->ip,
            'user_regdate'            => time(),
            'user_inactive_reason'    => 0,//$user_inactive_reason,
            'user_inactive_time'    => 0,//$user_inactive_time,
        );

    // Register user...
        $user_id = user_add($user_row);

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T13:10:37.490

你必须定义

```
define('IN_PHPBB', true); 
```

在其他情况下，您的脚本将立即退出 common.php 和其他所需文件。你可以看到

```
if (!defined('IN_PHPBB'))
{
    exit;
} 
```

在每个必需的文件中

# android - 无法在 android 和 sqllite 中将值插入到我的表中

> ID：13669440
> 
> 赞同：0
> 
> 时间：2012-12-02T12:52:22.343
> 
> 标签：android, sqlite, android-sqlite

我的 android 应用程序因此异常而崩溃

```
12-02 12:40:50.145: E/AndroidRuntime(531): Caused by:android.database.sqlite.SQLiteException: near "(": syntax error: , while compiling: insert into target(username, (password, (lastLogin, (numberOfLogins, (status, (endpoint) values (?,?,?,?,?,?) 
```

我在代码中的插入语句如下所示

```
private static final String INSERT = "insert into " + AttachmentTable.TABLE_NAME 
                                        + " (" + AttachmentColumns.STATUS + ", "
                                        + AttachmentColumns.RETRIES + ", "
                                        + AttachmentColumns.ATT_URI + ", "
                                        + AttachmentColumns.ATT_URI_SOURCE + ", "
                                        + AttachmentColumns.COMMENT+ ", "
                                        + AttachmentColumns.ADDED + ", "
                                        + AttachmentColumns.LAST_RETRY + ", "
                                        + AttachmentColumns.FINISHED + ") " +
                                        "values (?,?,?,?,?,?,?,?)"; 
```

在代码中，我尝试保存创建的附件之一。但它不起作用。在 Android 文件资源管理器中，我可以看到数据库已创建。这是我的代码中的保存部分

```
DataManager data = new DataManagerImpl(this);
    Attachment att = new Attachment();
    att.setAdded("now");
    att.setAttUri("test");
    att.setAttUriSource("test");
    att.setComment("test");
    att.setLastRetry("test");
    att.setRetries(3);
    att.setStatus(0);
    data.setAttachment(att); 
```

这里是 setAttachment 代码

```
@Override
public boolean setAttachment(Attachment t) {
    boolean retVal = false;
    try{
        db.beginTransaction();
        long result = attDao.save(t);
        if (result != -1)
            retVal = true;

    }catch (SQLException e) {
        Log.e(TAG, "Exception during saving target " + e.getMessage() + " rolling back transaction");
    } finally{
        db.endTransaction();
    }
    return retVal; 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:02:55.763

插入只是这样做

```
ContentValues values = new ContentValues();
    values.put(AttachmentColumns.STATUS, "hello");
    values.put(AttachmentColumns.ATT_URI, "uri");
             ... 
```

和

```
db.insert(TABLE_NAME, null /* nullColumnHack */,
                values); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:01:56.720

看来您的 AttachmentColumns.STATUS 和所有其他字符串都包含“（”。您可以尝试删除它们吗？

# vb.net - 通信服务器 -> 客户端未发生

> ID：13669441
> 
> 赞同：1
> 
> 时间：2012-12-02T12:52:26.477
> 
> 标签：vb.net, tcpclient, tcplistener

我有两个应用程序在不同的计算机上运行，​​其中一个是客户端，另一个是服务器，客户端 - > 服务器上的通信完美无缺，尽管它不是相反的方向。

服务器代码：

```
Imports System.IO
Imports System.Net
Public Class Form1
    Dim listener as Net.Sockets.TcpListener
    Dim listenThread as Threading.Thread

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        listener = New Net.Sockets.TcpListener(Net.IPAddress.Any, 32111)
        listener.Start()
        listenThread = New Threading.Thread(AddressOf DoListen)
        listenThread.IsBackground = True
        listenThread.Start()
End Sub

Private Sub DoListen()
        Dim sr As IO.StreamReader
        Dim sw As IO.StreamWriter
        Do
            Try
                Dim client As Net.Sockets.TcpClient = listener.AcceptTcpClient
                sr = New IO.StreamReader(client.GetStream)
                sw = New IO.StreamWriter(client.GetStream)
                Dim Lines As String() = sr.ReadToEnd.Split(New Char() {","c}) 'get client data

                sr.Close()
                sw.Write("Message123") ' try to send data to client
                sw.Close()

            Catch
            End Try
        Loop
    End Sub
End Class 
```

客户端代码：

```
Public Class Form1
    Dim Command As String
    Dim thread As Threading.Thread

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles Me.Load
        thread = New Threading.Thread(AddressOf MyProcess)
        thread.IsBackground = True
        thread.Start()
    End Sub

Private Sub Send(ByVal Command As String)
        Try
            Dim client As New System.Net.Sockets.TcpClient
            client.Connect(TextBox1.Text, 32111)
            Dim writer As New IO.StreamWriter(client.GetStream)
            writer.Write(Command)
            writer.Flush()
            client.Close()
            MsgBox("Command has been sent successfully")
        Catch ex As Exception
        End Try
    End Sub

Private Sub MyProcess()
        Do
            Dim client As New System.Net.Sockets.TcpClient
            client.Connect("192.168.1.2", 32111)
            Dim reader As New IO.StreamReader(client.GetStream)
            MessageBox.Show(reader.ReadToEnd)
            reader.Close()
            client.Close()
        Loop
    End Sub
End Class 
```

问题是没有任何反应，MessageBox 没有出现在客户端上说“Message123”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:04:38.913

每次客户端创建一个新的套接字并连接到它时，它都会在两个应用程序之间打开一个全新的通信通道。在您的示例中，服务器在第一个套接字上返回一条消息，但在客户端上它不会尝试从第一个套接字读取。相反，它会打开第二个套接字并从中读取。您需要更改它，以便从发送请求消息的同一个套接字读取。

如果你仔细想想，你所做的假设不可能是真的。您假设从您的客户端计算机到该端口上的服务器只能有一个有效的套接字。然而显然这不是真的。例如，您可以运行许多单独的 FTP 客户端并连接到同一台服务器。每个应用程序都可以在同一台服务器上为同一端口打开任意数量的套接字，并且它们彼此完全独立。

# jquery - jQuery Mobile split-view 就像他们的演示一样

> ID：13669442
> 
> 赞同：0
> 
> 时间：2012-12-02T12:52:26.517
> 
> 标签：jquery, jquery-mobile

我一直在尝试完成 jQuery Mobile 在[http://jquerymobile.com/test/docs/about/intro.html](http://jquerymobile.com/test/docs/about/intro.html)上的演示中使用的拆分视图布局。我尝试复制他们的源代码（正文中的所有内容），但我得到的只是从上到下的布局，其中菜单位于可折叠部分中。我如何完成这个拆分视图？它是否被称为其他东西，因为我在 jQuery Mobiles 自己的页面上找不到任何关于它的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:54:58.027

他们使用一些基本的 css 宽度和 float 属性完成了它

在您的CSS中，您可以添加

```
 .content-primary{width:60%;float:right;padding:0.6em 0%;}
 .content-secondary{width:30%} 
```

这将给出一个拆分视图。希望这可以帮助..

# java - 如何比手动创建 bean 对象更快地处理 Json

> ID：13669445
> 
> 赞同：0
> 
> 时间：2012-12-02T12:52:35.077
> 
> 标签：java, json

例如，目前我正在从 Google API 获取餐馆列表。然后我必须创建一个带有 getter 和 setter 的餐厅类，然后我必须创建该类的对象并使用返回的 json 中的每个字段手动填充它们。

有没有比手动完成所有工作更快的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:00:08.363

最好的办法是找到该特定 API 的库。如果做不到这一点，您可以使用 JSON 而不将它们映射到 Java Bean（即，只需解析 JSON 并通过执行`parsed.getString("city_name")`等操作来处理解析的 JSON）。[杰克逊](http://jackson.codehaus.org/)是一个很好的图书馆。

您还可以尝试[从返回的 JSON 中生成 JSON 模式](https://stackoverflow.com/questions/7341537/tool-to-generate-json-schema-from-json-data)，然后使用它来[自动生成 Java Beans 代码](https://code.google.com/p/jsonschema2pojo/)，然后将其与[Jackson](http://jackson.codehaus.org/)之类的 JSON 库一起使用。我试过一次，但似乎你必须修复生成的 JSON 模式，因为上面引用的自动模式生成工具目前不是很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:12:00.320

我所做的只是创建一个与返回的 json 字符串匹配的对象，并使用 gson.fromjson() 将值放入对象中

目的。

```
public class Return {
    private String Status;
    private String[] Data;

    public Return(String Status, String[] Data){
        this.Status=Status;
        this.Data=Data;
    }
    public String getStatus() { return Status; }

    public String[] getData() { return Data; }
} 
```

填充对象的代码。

```
 java.lang.reflect.Type listType = new TypeToken<Return>(){}.getType();
        Return return2= new Gson().fromJson(myresponse.toString(), listType); 
```

# asp.net - 将网站的路径更改为 IIS 中的另一个驱动器

> ID：13669446
> 
> 赞同：-1
> 
> 时间：2012-12-02T12:52:37.490
> 
> 标签：asp.net, iis

我想知道在iis中更改网站路径的步骤。

我在 C: 上配置了一个网站，但由于磁盘空间问题，我想将其移动到另一个驱动器。这可以在不更改 inetpub 路径而仅更改网站路径的情况下完成吗？它还会影响ftp设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:13:02.213

是的，只需使用 inetmgr 工具更改 sie 的物理路径。它不必在inetpub 里面。

但请注意为 NETWORK_SERVICE 或运行您的 Web 应用程序的任何其他用户设置适当的权限。

# jquery - 动画完成后应用css规则jquery

> ID：13669447
> 
> 赞同：0
> 
> 时间：2012-12-02T12:52:40.410
> 
> 标签：jquery, html, css

我希望能够使用 jquery 添加一个 css 属性\值，但我想等到首先制作动画然后我希望 css 通过将其显示值设置为无来删除动画。

这是我的代码片段。

```
**Jquery**
 $(".filled-rectangle").animate(); 
 $(".filled-rectangle").css('display', 'none'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:55:45.563

您可以使用[.promise()](http://api.jquery.com/promise/)和 .done() 方法在当前动画队列的末尾添加操作：

```
$(".filled-rectangle").animate().promise().done(function() {
    $(".filled-rectangle").css('display', 'none');
}); 
```

如果您希望允许其他代码添加在动画完成后调用的回调，这将非常有用，因为您可以返回 .promise() 方法返回的承诺。

[或者，您可以使用.queue()](http://api.jquery.com/queue/)将回调添加到动画队列本身：

```
$(".filled-rectangle").animate().queue(function(next) {
    $(".filled-rectangle").css('display', 'none');
    next();
}); 
```

# sql - 为索引创建新表空间

> ID：13669448
> 
> 赞同：2
> 
> 时间：2012-12-02T12:52:44.247
> 
> 标签：sql, database, oracle

我想为索引创建一个全新的（额外的）表空间。我怎样才能做到这一点？什么是查询？据我所知，首先我必须为该新表空间创建数据文件，但我不知道如何...

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T17:02:53.707

对此的简单回答是：不要。前段时间有一个神话，出于性能原因，将表和索引分离到不同的表空间是一件好事，这是不正确的。为处理多表空间而增加的维护和监控工作几乎是不值得的，所以除非你需要做一些高级的事情，比如使用可传输表空间，你几乎肯定最好让它尽可能简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T17:10:58.507

通过以下方式创建表空间：

```
create tablespace ts_indexes
datafile '/dbf1/ts_indexes.dbf' 
size 32m 
autoextend on 
next 32m maxsize 2048m
extent management local; 
```

然后在这个表空间中创建新的索引

```
create myIndex on myTable(field1, field2) tablespace ts_indexes; 
```

并将现有索引移动到该表空间

```
alter index myIndex rebuild tablespace ts_indexes; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T13:43:34.310

DDL 非常简单。创建表空间的命令很容易猜到：`create tablespace`.

Oracle 文档是在线的、全面的和免费的。它甚至有例子。 [在这里找到它。](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7003.htm#i2231734)

# android - android自定义对话框背景

> ID：13669450
> 
> 赞同：9
> 
> 时间：2012-12-02T12:52:56.653
> 
> 标签：android, android-dialog

我需要在我的 Android 应用程序中显示一个自定义对话框。标准`AlertDialog`设计是不可接受的。Android 文档说：

> 提示：如果您想要自定义对话框，则可以将 Activity 显示为对话框，而不是使用对话框 API。只需创建一个活动并将其主题设置为清单元素中的 Theme.Holo.Dialog ：
> 
> 就是这样。该活动现在显示在对话框窗口中，而不是全屏显示。

听起来很有希望。我做到了，但透明度不起作用！背景总是灰色的：

![在此处输入图像描述](../Images/6ca5a32922d58c86de4f1812e378343b.png)

这是清单中的说明：

```
<activity
    android:name=".MyDialogActivity"
    android:screenOrientation="portrait"
    android:theme="@android:style/Theme.Holo.Dialog.NoActionBar" >
</activity> 
```

这是我活动的根源：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:background="#00000000"
    android:layout_width="400dp"
    android:layout_height="wrap_content" >

    // Content ... //

</RelativeLayout> 
```

我也试过`android:background="@null"`- 效果是一样的。如果我使用`android:background="#ff0000"`，那么它是红色的（应该是红色的）。但是如何让它透明呢？

**更新**

我结束了

```
<style name="MyThemeDialogCustom" parent="android:Theme.Holo.Dialog.NoActionBar" >
    <item name="android:windowBackground">@color/transparent</item>
    <item name="android:colorBackgroundCacheHint">@null</item>
</style> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T12:55:36.467

制作这样的主题

```
<style name="ThemeDialogCustom">
<item name="android:windowFrame">@null</item>
<item name="android:windowIsFloating">true</item>
<item name="android:windowContentOverlay">@null</item>
<item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
<item name="android:windowBackground">@color/transparent</item>
<item name="android:colorBackgroundCacheHint">@null</item>
</style> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-17T14:48:42.297

尝试...

你可以避免这样的灰色背景，这里我确实得到了透明背景。

```
 ........
    Dialog dialog = new Dialog(MainActivity.this);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    Window window = dialog.getWindow();
    window.setBackgroundDrawableResource(android.R.color.transparent);
    dialog.setContentView(R.layout.popup_layout);
    Button dialogBtn= (Button) dialog.findViewById(R.id.btn);

    dialogBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            //task
        }
    });
    dialog.show();
    ....... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-10T11:20:13.903

```
dialog.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-14T22:37:50.780

```
dialog.getWindow().setBackgroundDrawableResource(android.R.color.transparent); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-29T06:37:19.820

我把它当作一种风格：

```
<style name="DialogTransparent" parent="Theme.AppCompat.Dialog">
    <item name="android:windowFrame">@null</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowTitleStyle">@null</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>

    <item name="android:background">@android:color/transparent</item>
</style>
<!-- <item name="android:backgroundDimEnabled">false</item> --> 
```

它还具有背景透明，将 brackgroundDimEnabled 参数设置为 false 可以不显示在他背后显示对话框的灰色背景。

# java - 在 Netbeans 中测试不可执行的库？

> ID：13669451
> 
> 赞同：0
> 
> 时间：2012-12-02T12:53:01.053
> 
> 标签：java, testing, netbeans

我目前正在研究一个 Java 库——也就是说，一堆专门用于其他项目的类。自然，它没有 main() 函数。

现在，我想测试我的进步。我所说的“测试”并不是指一些专业的标准化系统；我的意思是我有一个非常简单的函数，我想运行它来收集信息，随着项目变得更加完整，它将被修改。

我*希望*我可以将一个可执行类放到 Test Packages 文件夹中，然后单击 Run。不幸的是，NetBeans 抱怨找不到主类。

那么，如何在不向我的可分发源添加可执行类的情况下测试库项目呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T12:55:23.287

您绝对应该研究单元测试框架，例如[JUnit](http://junit.org)。IDE 通常支持轻松运行测试，[看起来 Netbeans 也](http://netbeans.org/kb/docs/java/junit-intro.html)支持。（我自己不使用 Netbeans，但如果它不支持 JUnit，我会感到震惊。）这样做比到处都有方法*要简单得多。*`main`毕竟，一个`main`方法只会通过你的代码测试*一条*路线——通过单元测试，你可以有*很多*测试，每个测试一小段代码。

即使您不想以完全成熟的方式进行单元测试（顺便说一句，我强烈建议您这样做），单元测试也可以是一种非常简单的方法，只需运行一些代码并进行试验. 我有时会在第一次针对 3rd 方库进行开发时使用它——让单元测试显示和记录我对库行为的理解。（显然，图书馆及其文档越好，对此的需求就越少，但它仍然很有用......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:08:19.123

我在 Netbeans 中广泛使用了 JUnit 和 CPPUnit，发现使用这些工具很容易获得库的测试覆盖率。IntelliJ IDEA 在 JUnit 方面也做得不错，因此如果您不喜欢 Netbeans 界面，这是一个选择。xUnit 框架让我多次摆脱困境，因为它们非常擅长快速隔离错误。正如 Jon 所说，它们还有助于捕获系统的需求/行为，这是一个额外的好处。

# iphone - iOS：用捏合缩放 UITextView？

> ID：13669457
> 
> 赞同：9
> 
> 时间：2012-12-02T12:53:47.153
> 
> 标签：iphone, ios, uitextview, uigesturerecognizer, uipinchgesturerecognizer

我有兴趣创建`UITextView`在键入文本时动态扩展的内容，并在用户捏住屏幕时进行缩放（在 TinyPost 中可以找到类似的行为）。

当您只需键入（不捏）时，textView 会很好地展开。当你只是捏（不打字）时工作正常，但是当你捏然后打字时，里面的文字会被剪掉。

这是我的代码：

```
UIPinchGestureRecognizer *pinchGestRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(scaleTextView:)];
        pinchGestRecognizer.delegate = self;
        [bgFrameImageView addGestureRecognizer:pinchGestRecognizer];

    - (void)scaleTextView:(UIPinchGestureRecognizer *)pinchGestRecognizer{
        createTextView.transform = CGAffineTransformScale(createTextView.transform, pinchGestRecognizer.scale, pinchGestRecognizer.scale);

        pinchGestRecognizer.scale = 1;        
    }

    - (void)textViewDidChange:(UITextView *)textView{

        CGSize textSize = textView.contentSize;

        textView.frame = CGRectMake(CGRectGetMinX(textView.frame), CGRectGetMinY(textView.frame), textSize.width, textSize.height); //update the size of the textView  
    } 
```

你怎么看？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T20:24:44.550

尝试：

```
- (void)scaleTextView:(UIPinchGestureRecognizer *)pinchGestRecognizer{
     CGFloat scale = pinchGestRecognizer.scale;

    createTextView.font = [UIFont fontWithName:createTextView.font.fontName size:createTextView.font.pointSize*scale];

    [self textViewDidChange:createTextView];       
} 
```

它基本上会缩放字体大小，然后使用您在 textViewDidChange 中的代码重新计算内容大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-20T20:40:46.353

详细说明上面的@Cocoanetics 答案。我在 iOS 7 上实现了属性字符串的手势处理想法，但是当字符串中的字体更改过多时，它的速度非常慢。iOS 7 中还有一个可笑的缓冲错误，在您停止捏合后，更改通知会持续触发很长时间 - 让我想起了早期版本的 PC-DOS 中愚蠢的键盘缓冲区。无论如何，我已经将代码放在下面，这对我有用——尽管它只会告诉我这是浪费时间，我需要给我的用户一些其他方式来缩放他们的字体。

```
- (void)scaleTextView:(UIPinchGestureRecognizer *)pinchGestureRecognizer
{
    CGFloat scale = 0;
    NSMutableAttributedString *string;

    switch (pinchGestureRecognizer.state) {
        case UIGestureRecognizerStateBegan:
            self.old_scale = 1.0;
            self.last_time = [NSDate date];
            break;

        case UIGestureRecognizerStateChanged:
            scale = pinchGestureRecognizer.scale - self.old_scale;

            if( [self.last_time timeIntervalSinceNow] < -0.2 )  {       //  updating 5 times a second is best I can do - faster than this and we get buffered changes going on for ages!
                self.last_time = [NSDate date];
                string = [self getScaledStringFrom:[self.textview.attributedText mutableCopy] withScale:1.0 + scale];
                if( string )    {
                    self.textview.attributedText = string;
                    self.old_scale = pinchGestureRecognizer.scale;
                }
            }
            break;

        case UIGestureRecognizerStateEnded:
        case UIGestureRecognizerStateCancelled:
        case UIGestureRecognizerStateFailed:
            break;

        default:
            break;
    }
}

- (NSMutableAttributedString*) getScaledStringFrom:(NSMutableAttributedString*)string withScale:(CGFloat)scale
{
    [string beginEditing];
    [string enumerateAttribute:NSFontAttributeName inRange:NSMakeRange(0, string.length) options:0 usingBlock:^(id value, NSRange range, BOOL *stop) {
        if (value) {
            UIFont *oldFont = (UIFont *)value;
            UIFont *newFont = [oldFont fontWithSize:oldFont.pointSize * scale];
            [string removeAttribute:NSFontAttributeName range:range];
            [string addAttribute:NSFontAttributeName value:newFont range:range];
        }
    }];
    [string endEditing];
    return string;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-06T12:01:04.187

First of all add `UIPinchGestureRecognizer` in `viewDidLoad` method:

```
UIPinchGestureRecognizer *pinchOnTextfield = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(handleTextFieldFontOnAddMusicVc:)];
[self.myTextField addGestureRecognizer:pinchOnTextfield]; 
```

then put this method in your `viewController` to scale `textField` font:

```
- (void)handleTextFieldFontOnAddMusicVc:(UIPinchGestureRecognizer *)pinchGestRecognizer {
    if (pinchGestRecognizer.state == UIGestureRecognizerStateEnded || pinchGestRecognizer.state == UIGestureRecognizerStateChanged) {
        CGFloat currentFontSize = self.myTextField.font.pointSize;
        CGFloat newScale = currentFontSize * pinchGestRecognizer.scale;

        if (newScale < 20.0) {
            newScale = 20.0;
        }
        if (newScale > 60.0) {
            newScale = 60.0;
        }

        self.myTextField.font = [UIFont fontWithName:self.myTextField.font.fontName size:newScale];
        pinchGestRecognizer.scale = 1;

    }    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T09:16:10.463

UITextView 是 UIScrollView 的子类，因此您需要对任何滚动视图执行您所做的操作以启用缩放：

*   设置最小和最大缩放比例属性
*   通过滚动视图委托方法设置 viewForZooming

...缩放整个文本视图。

如果您只想缩放文本，则必须通过捏合手势识别器执行以下步骤：

*   检索当前的属性字符串
*   遍历字体范围并用缩放的字体替换字体属性
*   用修改后的版本替换文本视图中的文本
*   可能您还需要在设置文本后设置文本选择

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T13:05:15.167

不是最好但简单的解决方案是：

我不完全了解您的用例，但我认为在许多情况下，在输入文本时支持应用程序捏缩放是没有意义的。我只想设置一个标志，以防止在用户输入文本时进行缩放。

如果您的意思是输入文本，编辑文本视图，您可以在捏合手势开始时结束编辑，并在捏合手势结束后开始编辑。

# android - Eclipse Android 虚拟设备管理器无法启动

> ID：13669458
> 
> 赞同：3
> 
> 时间：2012-12-02T12:53:56.903
> 
> 标签：android, eclipse

我正在使用 Eclipse 4.2.1 (Juno)。

我的 Android 虚拟设备管理器无法启动。我按下按钮，实际上什么也没发生（没有错误消息）。

我尝试重新安装 Android SDK、ADT 和 Eclipse，但没有任何帮助解决这个问题。

有关如何解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T22:38:15.333

有同样的问题。经过几次重新安装，重新启动等等，我终于想通了：

打开 cmd，`android avd`从`sdk\tools`文件夹运行。你可能会得到一个例外，你可以用谷歌搜索，这已经比没有回应要好......这就是我得到的：

```
java.lang.NullPointerException
    at com.android.sdklib.internal.avd.AvdInfo.getDeviceName(AvdInfo.java:158) 
```

对我来说，诀窍是删除文件夹`C:\Users\<User>\.android\avd`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T02:07:47.803

重新定位整个开发目录时，我遇到了同样的问题。删除文件夹并重新启动 Eclipse 解决了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T11:40:45.860

在这种情况下，重新安装将有助于从开发人员站点获取 android 开发包.....

您可以尝试在您的 PC 中运行一个新的用户帐户，有时它会起作用！！！一切顺利！

*   关闭日食
    *   使用命令 adb kill-server 通过命令行杀死 adb
    *   如果从进程选项卡运行，现在启动任务管理器并从那里终止 adb 进程
    *   现在使用 adb start-server 从命令行再次启动您的 adb - 现在再次启动您的 Eclipse 并运行您的应用程序

尝试！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-17T17:01:31.507

就我而言，这是旧*/tmp/android-username/emulator-* * 文件的问题。我通过手动运行名为“Test”的预定义 arm AVD 找到了它

```
$ cd adt-bundle-linux-x86_64-20130522/sdk/tools
$ ./emulator64-arm -avd Test
NAND: could not write file /tmp/android-username/emulator-gKbQ19, File exists 
```

*从/tmp/android-username*中删除旧的模拟器文件解决了这个问题。

```
rm /tmp/android-username/emulator-* 
```

# java - 比较具有相同超类的 2 个子类实例

> ID：13669459
> 
> 赞同：0
> 
> 时间：2012-12-02T12:54:02.627
> 
> 标签：java, inheritance, subclass, superclass

我有 2 个子类（学生、教师）和一个超类（职业）。
我从学生创建了对象 A，从老师创建了对象 B。

```
Student A = new Student();
Teacher B = new Teacher(); 
```

我已经创建了一个将对象作为参数并返回布尔值的静态方法；

```
compare(A, B);

public static boolean compare(Student s, Teacher t) 
```

在方法中，我只是把这段代码用来比较两个对象是否属于同一个类；

```
if (s.getClass() == t.getClass()) 
```

现在我收到错误消息：

```
incomparable types: Class<CAP#1> and Class<CAP#2> 
```

其中 CAP#1,CAP#2 是新的类型变量：

```
CAP#1 extends Student from capture of ? extends Student
CAP#2 extends Teacher from capture of ? extends Teacher 
```

这里有什么问题？

注意：如果我使用比较 s.equals(t)，它根本没有任何错误。为什么我不能正确使用 object.getClass() 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:07:21.440

我想你想要这样的东西：

```
 public static boolean compare(Object o1, Object o2) 
```

然后也许`instanceof`用来比较喜欢`if(o1 instanceof Teacher && o2 instanceof Student)`

抛出异常是因为`getClass()`返回 a`Class<? extends Object>`并且就像错误消息告诉你的那样，这些类是无法比较的，因为 Student 和 Teacher 将返回不同的类（我认为你的错误是假设返回了类似字符串的东西）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T13:09:39.317

如果`class Student extends Occupation`和`class Teacher extends Occupation`，则不存在既是 a`Student`又是 a 的类`Teacher`。因此，试图比较它们是没有意义的。`s.getClass() == t.getClass()`总是会返回 false。

编译器可以检测到，因为对于任何类型 T，`T.getClass()`返回`Class<? extends T>`. `Class<? extends Student>`并且`Class<? extends Teacher>`永远不会相互平等，因此无法比较。

如果您确实想比较它们，您需要让编译器相信这些类型确实具有可比性。您可以将方法签名（如@Seismoid 所建议）更改为`compare( Object o1, Object o2)`或通过显式向上转换为`Class<?>`或什至`Class`（我在这里感觉到*原始类型*警告）或`Object`：

```
return ((Class<?>) s.getClass()) == ((Class<?>) t.getClass()); 
```

根据为什么`s.equals(t)`有效，这是因为`T.equals`is `public boolean equals(Object)`， not的签名`public boolean equals(T)`，所以编译器无法检查比较总是返回 false。实际上，它甚至可能不会返回 false，因为您可以创建一个等于来自不同类的对象的对象。

你不能 override `==`，所以编译器*知道*比较是无关紧要的，因为不能是同一个类的对象不能彼此*相同*（除非两者都是*null* - 你应该以不同的方式检查）。

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.21.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.21.3)说：

> 如果无法通过强制转换（第 5.5 节）将任一操作数的类型转换为另一个操作数的类型，则会出现编译时错误。两个操作数的运行时值必然不相等。

# c - [EDITED]实现高斯差分

> ID：13669466
> 
> 赞同：0
> 
> 时间：2012-12-02T12:55:41.097
> 
> 标签：c, opencv

我不确定我是否做对了。

```
IplImage *dog_1 = cvCreateImage(cvGetSize(oriImg), oriImg->depth, oriImg->nChannels);
IplImage *dog_2 = cvCreateImage(cvGetSize(oriImg), oriImg->depth, oriImg->nChannels);

int kernel2 = 1;
int kernel1 = 5;

cvSmooth(oriImg, dog_2, CV_GAUSSIAN, kernel2, kernel2);
cvSmooth(oriImg, dog_1, CV_GAUSSIAN, kernel1, kernel1);
cvSub(dog_2, dog_1, dst, 0); 
```

我做对了吗？以上是做狗的正确方法吗？我只是从wiki的解释中尝试过。但我无法像维基页面[http://en.wikipedia.org/wiki/Difference_of_Gaussians那样获得所需的图像](http://en.wikipedia.org/wiki/Difference_of_Gaussians)

![高斯差](../Images/3c6e1a6818ed86f5a1180c29689286be.png)

[已编辑]

我从维基页面引用这个

“高斯差是一种灰度图像增强算法，它涉及从原始灰度图像的另一个模糊版本中减去原始灰度图像的一个模糊版本。模糊图像是通过将原始灰度图像与具有不同标准的高斯核卷积获得的偏差。”

在阅读论文时，DoG 图像由

原始图像，I(x,y) -> 模糊 -> I1(x,y)

I1(x,y) -> 模糊 -> I2(x,y)

输出 = I2(x,y) - I1(x,y)

如您所见，这与我使用**与原始图像不同的内核获取 I1 和 I2 的操作略有不同**

哪一个是正确的，还是我误解了 wiki 中的含义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:06:46.060

如果您附加的图像是您的示例输出，它不一定看起来是错误的。DoG 操作非常简单：用两个不同大小的高斯模糊并计算差异图像。这似乎是您的代码正在做的事情，所以我会说您做对了。

如果您的担忧源于查看 Wikipedia 文章（其中图像主要是白色，而不是黑色），那只是您所拥有的图像的反转。我不会担心的。

# asp.net-mvc - 我的模型和行动应该是什么？

> ID：13669469
> 
> 赞同：0
> 
> 时间：2012-12-02T12:55:56.650
> 
> 标签：asp.net-mvc

我是 MVC 的新手，我查看了许多资源，但没有找到任何完整的帮助，所以这是我对我想要实现的目标的理解：

我有一个名为“公司”的模型，其中每家公司都有一个名称、地址、电子邮件和联系电话。

有人告诉我这作为一个模型有点高级，我真的不明白为什么..

至于我的行为应该是什么——添加公司、编辑公司、删除公司？- 基本上用户需要什么动作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:01:54.533

由于您是 MVC 新手并且还没有找到任何完整的资源，我建议您在 asp.net mvc 3 上观看 Scott Allen 的视频，这些视频从头开始并升级到高级水平。它几乎涵盖了初学者的 MVC 中的所有内容，并且应该可以消除您的大部分疑问，这是下面的链接

[http://pluralsight.com/training/courses/TableOfContents?courseName=aspdotnet-mvc3-intro&highlight=scott-allen_mvc3-building-intro!scott-allen_mvc3-building-controllers!scott-allen_mvc3-building-security!scott-allen_mvc3-建筑基础设施！scott-allen_mvc3-building-ajax！scott-allen_mvc3-building-deploy！scott-allen_mvc3-building-views！scott-allen_mvc3-building-data-ii！scott-allen_mvc3-building-tdd！scott-allen_mvc3- building-data-i-2#mvc3-building-intro](http://pluralsight.com/training/courses/TableOfContents?courseName=aspdotnet-mvc3-intro&highlight=scott-allen_mvc3-building-intro!scott-allen_mvc3-building-controllers!scott-allen_mvc3-building-security!scott-allen_mvc3-building-infrastructure!scott-allen_mvc3-building-ajax!scott-allen_mvc3-building-deploy!scott-allen_mvc3-building-views!scott-allen_mvc3-building-data-ii!scott-allen_mvc3-building-tdd!scott-allen_mvc3-building-data-i-2#mvc3-building-intro)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:15:20.890

我看不出有什么问题。与往常一样，这取决于您的情况。如果您正在创建一个应用程序来管理公司，那么您的模型对我来说似乎没问题。如果您是一家搬家公司，并且将公司从一个地方搬到另一个地方，那么地址也可以是您模型中的一个实体，因为它是您核心的一部分，并且可以包含更多详细信息。

操作也是如此，添加、编辑、删除都是不错的选择。Controller接收这些动作，修改Model，而这些变化也反映在View中。

MVC 本身是一个宽泛的概念。它的含义或多或少很清楚，但它已经适应了不同类型的应用程序（即通常称为[模型 2](http://en.wikipedia.org/wiki/Model_2)的网络应用程序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:04:01.933

在控制器公司内部，如果您需要添加公司详细信息，在内部视图中将您的目标控制器放置为“公司”，将操作放置为“添加公司”。通过点击提交按钮，控件直接导航到“AddCompany”Action里面，“Company”控制器。

据此，您可以将公司详细信息添加到数据库中。

编辑/更新/删除公司的类似情况。

问候， Pavan.G

# javascript - window.location.indexOf 在 Javascript 中不起作用

> ID：13669472
> 
> 赞同：10
> 
> 时间：2012-12-02T12:56:18.010
> 
> 标签：javascript, string, alert, indexof

下面是我所拥有的。

```
var myString = "http://localhost:8888/www.smart-kw.com/";
alert(myString.indexOf("localhost")); 
```

这给了我警报...但是，如果我更改`var myString = "http://localhost:8888/www.smart-kw.com/";`为`var myString = window.location;`，它将不起作用（我没有得到警报）。

```
var myString = window.location;
alert(myString.indexOf("localhost")); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-02T12:58:04.237

[`window.location`](https://developer.mozilla.org/en-US/docs/DOM/window.location)是一个访问器属性，获取它的值会给你一个对象，而不是一个字符串，所以它没有`indexOf`函数。（人们有时认为它是一个字符串是完全可以理解的，因为当你*设置*它的值时，访问器属性的设置器接受一个字符串；也就是说，它`window.location = "some url";`确实有效。但是当你*得到*它时，你没有得到一个字符串。）

如果您愿意，可以使用`window.location.toString()`,`String(window.location)`或`window.location.href`为它获取一个字符串，或者使用[它的任何各种属性](https://developer.mozilla.org/en-US/docs/DOM/window.location#Properties)来检查细节。从链接中，给定示例 url `http://www.example.com:80/search?q=devmo#test`：

*   **`hash`**: URL 中 # 符号之后的部分，包括 # 符号。您可以侦听 hashchange 事件以获取支持浏览器中哈希更改的通知。
    例子：`#test`
*   **`host`**：主机名和端口号。
    例子：`www.example.com:80`
*   **`hostname`**: 主机名（不含端口号）。
    例子：`www.example.com`
*   **`href`**: 整个网址。
    例子：`http://www.example.com:80/search?q=devmo#test`
*   **`pathname`**: 路径（相对于主机）。
    例子：`/search`
*   **`port`**: URL 的端口号。
    例子：`80`
*   **`protocol`**: URL 的协议。
    例子：`http:`
*   **`search`**: URL 后面的部分？符号，包括 ? 象征。
    例子：`?q=devmo`

例如，对于您引用的示例，您可以检查`window.location.hostname === "localhost"`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T12:58:16.287

据我所知[`window.location`](https://developer.mozilla.org/en-US/docs/DOM/window.location)是一个[`Location object`](https://developer.mozilla.org/en-US/docs/DOM/window.location#Location_object)。

例如，[`window.location.href`](https://developer.mozilla.org/en-US/docs/DOM/window.location#Properties)将为您提供整个 URL。

```
var url = window.location.href;
alert(url.indexOf("domain")); 
```

但这种检查势必会引发误报。您最好使用[`window.location.hostname`](https://developer.mozilla.org/en-US/docs/DOM/window.location#Properties)包含主机名部分的属性。

```
var hostname = window.location.hostname;
alert(hostname === "my.domain.com"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-03T16:39:18.027

我找到了一种方法来完成这项工作：

```
(window.location.href).indexOf("localhost") > -1) 
```

我实际上在我的项目中使用它作为条件，它工作得很好。

# c - 使用 fork() 的多客户端服务器

> ID：13669474
> 
> 赞同：15
> 
> 时间：2012-12-02T12:56:34.203
> 
> 标签：c, algorithm, sockets, unix, fork

我正在尝试使用fork（）创建一个套接字编程服务器来同时处理多个客户端。但是我无法正确实现它。我已经尝试了很长时间。我面临的问题是 1）地址绑定问题 2）如何处理父进程和子进程的问题 3）如何结束服务器程序，即 ..返回控制台 我的单个客户端服务器的程序工作正常。这里是我的多客户端-服务器代码。

```
#include<signal.h>
#include<stdio.h>
#include<sys/socket.h>
#include<arpa/inet.h>
#include<string.h>
#include<sys/types.h>
#include<stdlib.h>

int main()
{

    struct sockaddr_in myaddr ,clientaddr;
    int sockid,newsockid;
    sockid=socket(AF_INET,SOCK_STREAM,0);
    memset(&myaddr,'0',sizeof(myaddr));
    myaddr.sin_family=AF_INET;
    myaddr.sin_port=htons(8888);
    myaddr.sin_addr.s_addr=inet_addr("127.0.0.1");
    if(sockid==-1)
    {
        perror("socket");
    }
    int len=sizeof(myaddr);
    if(bind(sockid,( struct sockaddr*)&myaddr,len)==-1)
    {
        perror("bind");
    }
    if(listen(sockid,10)==-1)
    {
        perror("listen");
    }
    int pid,new;
    static int counter=0;
    for(;;)
    {       a:
            new =accept(sockid,(struct sockaddr *)&clientaddr,&len);

            if(pid=fork()==-1)
            {
                close(new);
                continue;

            }   
            else if(pid>0)
            {
            counter++;
            //wait();
            goto a;
            printf("here2");
            //close(new);
            continue;
            }   
            else if(pid==0)
            {
            counter++;
            printf("here 1");
            send(new,"hi",100,0);
            send(new,(char *) &counter,1,0);

            //kill(pid,SIGKILL);
            //close(new);
            }

    }
    printf("here3");
    close(sockid);
    return 0;
} 
```

这是简单的客户端程序

```
 #include<stdio.h>
#include<sys/socket.h>
#include<arpa/inet.h>
#include<string.h>
#include<sys/types.h>

int main()
{

    struct sockaddr_in myaddr ,serveraddr;
    int sockid;
    sockid=socket(AF_INET,SOCK_STREAM,0);
    memset(&myaddr,'0',sizeof(myaddr));
    myaddr.sin_family=AF_INET;
    myaddr.sin_port=htons(8888);
    myaddr.sin_addr.s_addr=inet_addr("127.0.0.1");
    if(sockid==-1)
    {
        perror("socket");
    }
    int len=sizeof(myaddr);
    if(connect(sockid,(const struct sockaddr*)&myaddr,len)==-1)
    {
        perror("connect");
    }
    fprintf(stdout,"Client Online....");
    char s[10000];

        //gets(s);
        //send(sockid,s,10000,0);
        recv(sockid,&s,10000,0);
        fprintf(stdout,"Server says....");
        puts(s);
        recv(sockid,&s,10000,0);
        fprintf(stdout,"Server says....");
        puts(s);

sleep(10);  
    close(sockid);
    return 0;
} 
```

有人可以告诉我我做错了什么以及正确的方法是什么..？任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-02T13:58:04.787

您遇到的主要问题是`==`优先级高于`=`，所以这一行：

```
if(pid=fork()==-1) 
```

正在分配`fork() == -1`to的结果`pid`，这不是你想要的：它总是`0`在`fork()`成功时，在孩子*和*父母身上。你需要使用：

```
if((pid = fork()) == -1) 
```

您还应该`close(new)`在父级之后`fork()`- 孩子现在拥有该套接字。如果要发送计数器的文本版本，则需要使用`snprintf()`将其转换为文本。孩子也应该在完成后退出 - 在您的代码中执行此操作的最简单方法是跳出循环。在这些更正之后，您的服务器中的内部循环如下所示：

```
for(;;)
{
        new = accept(sockid, (struct sockaddr *)&clientaddr, &len);

        if ((pid = fork()) == -1)
        {
            close(new);
            continue;
        }
        else if(pid > 0)
        {
            close(new);
            counter++;
            printf("here2\n");
            continue;
        }
        else if(pid == 0)
        {
            char buf[100];

            counter++;
            printf("here 1\n");
            snprintf(buf, sizeof buf, "hi %d", counter);
            send(new, buf, strlen(buf), 0);
            close(new);
            break;
        }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T06:22:02.150

试试这个也许你会得到解决方案，

服务器程序：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <stdio.h>
#include <netinet/in.h>
#include <signal.h>
#include <unistd.h>

int main()
{
int server_sockfd, client_sockfd;
int server_len, client_len;
struct sockaddr_in server_address;
struct sockaddr_in client_address;

server_sockfd = socket(AF_INET, SOCK_STREAM, 0);

server_address.sin_family = AF_INET;
server_address.sin_addr.s_addr = htonl(INADDR_ANY);
server_address.sin_port = htons(9734);
server_len = sizeof(server_address);
bind(server_sockfd, (struct sockaddr *)&server_address,server_len);

/* Create a connection queue, ignore child exit details and wait for
clients. */

listen(server_sockfd, 5);

signal(SIGCHLD, SIG_IGN);

while(1) {
char ch;

printf("server waiting\n");

/* Accept connection. */

client_len = sizeof(client_address);
client_sockfd = accept(server_sockfd,(struct sockaddr *)&client_address, &client_len);

/* Fork to create a process for this client and perform a test to see
whether we're the parent or the child. */

if(fork() == 0) {

/* If we're the child, we can now read/write to the client on
client_sockfd.
The five second delay is just for this demonstration. */

read(client_sockfd, &ch, 1);
sleep(5);
ch++;
write(client_sockfd, &ch, 1);
close(client_sockfd);
exit(0);
}

/* Otherwise, we must be the parent and our work for this client is
finished. */

else {
close(client_sockfd);
}
}
} 
```

客户计划：

```
#include<stdio.h>
#include<unistd.h>
#include<sys/types.h>
#include<string.h>
#include<sys/socket.h>
#include<arpa/inet.h>
#include<netinet/in.h>
void main()
{
    int sid;
    char s[10]={},s1[10]={};
    struct sockaddr_in ssock,csock;
    sid=socket(AF_INET,SOCK_STREAM,0);
    ssock.sin_family=AF_INET;
    ssock.sin_addr.s_addr=inet_addr("127.0.0.1");
    ssock.sin_port=htons(9734);
    connect(sid,(struct sockaddr *)&ssock,sizeof(ssock));
    while(1)
    {
        printf("\n Enter the string:");
        scanf("%s",s);
        write(sid,(void*)s,strlen(s));
        if(strlen(s)==0)
            break;
        sleep(1);
        read(sid,(void*)s1,sizeof(s1));
        printf("\n The received string is:%s\n",s1);
    }
    close(sid);
} 
```

这里的代码只为一个字符进行通信。

# php - 正则表达式 数字之间的下划线

> ID：13669476
> 
> 赞同：0
> 
> 时间：2012-12-02T12:56:46.657
> 
> 标签：php, regex, preg-match

```
<?php
    $string = '395095427174400_558374047513203';
    if(preg_match("/^[0-9][_][0-9]$/",$string)){
        echo "True";
    }else{
        echo "False";
    }
?> 
```

为什么我的正则表达式在数字之间不匹配和下划线？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T13:11:36.633

您`regex`确实匹配数字之间的下划线，即单个数字。

`/^[0-9][_][0-9]$/`

```
^      # Start of line
[0-9]  # A single digit
[_]    # An underscore 
[0-9]  # A single digit 
$      # End of line 
```

你想用来`+`匹配一个或多个数字：

`/^[0-9]+_[0-9]+$/`

```
^       # Start of line
[0-9]+  # One or more digit
_       # An underscore 
[0-9]+  # One or more digit 
$       # End of line 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T12:57:43.043

您需要`quantifier`在`digits`. `underscore`而且您实际上并不需要`underscore`在`character class`.

你可以试试这个正则表达式： -

```
/^[0-9]+_[0-9]+$/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T08:38:17.033

在您的模式中`^`并`$`限制正则表达式引擎匹配整个字符串，并且您周围有多个数字，`_`因此您的模式失败。添加`+`with`[0-9]`将解决此问题，因为其他专家建议如下：

```
/^[0-9]+_[0-9]+$/ 
```

此外，我不建议在处理数字时使用字符类，正则表达式引擎支持`\d`此目的。

像这样简化你的模式：

```
/^\d+_\d+$/ 
```

此外，如果您非常确定下划线只能出现在数字之间（而不是开始和结束），您甚至可以像这样更简化它：

```
/^_|\d+$/ 
```

# java - 正则表达式获取引号中的文件名

> ID：13669478
> 
> 赞同：0
> 
> 时间：2012-12-02T12:57:06.530
> 
> 标签：java, regex

我有一个文件名（或者基本上是一个字符串，因为它不需要扩展名，但可以有空格），它用以下格式的字符串用引号封装：

```
attachment; filename="Some filename.ext" 
```

所以基本上我的方法（java）是`Matcher`采用 a `Pattern`：

```
Matcher mat = Pattern.compile("attachment; filename=\"([\\w\\.]+)\"").matcher(filename); 
```

但`myMatcher.find()`回报`False`

RegEx 哪里出错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T12:59:54.227

`\\w`不匹配空格。此外，您不需要（但可以）转义`.`内部字符类。如果您只想允许空格，请将它们添加到字符类中：

```
"attachment; filename=\"([\\w. ]+)\"" 
```

如果字符可能多于空格、字母、数字、句点和下划线，您可能希望使用负字符类，它只接受所有内容，直到下一个引号：

```
"attachment; filename=\"([^\"]+)\"" 
```

# c# - 带有组合框的自定义控件

> ID：13669479
> 
> 赞同：0
> 
> 时间：2012-12-02T12:57:23.323
> 
> 标签：c#, .net, wpf, combobox, custom-controls

我在使用`ComboBox`.
这是我的简单代码：

```
public class MyComboBox : Control
{
    public IEnumerable ItemsSource
    {
        get { return (IEnumerable)GetValue(ItemsSourceProperty); }
        set { SetValue(ItemsSourceProperty, value); }
    }

    // Using a DependencyProperty as the backing store for ItemsSource.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty ItemsSourceProperty =
        DependencyProperty.Register("ItemsSource", typeof(IEnumerable), typeof(MyComboBox), new UIPropertyMetadata(null));

    public string DisplayMemberPath
    {
        get { return (string)GetValue(DisplayMemberPathProperty); }
        set { SetValue(DisplayMemberPathProperty, value); }
    }

    // Using a DependencyProperty as the backing store for DisplayMemberPath.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty DisplayMemberPathProperty =
        DependencyProperty.Register("DisplayMemberPath", typeof(string), typeof(MyComboBox), new UIPropertyMetadata(""));

    public string SelectedValuePath
    {
        get { return (string)GetValue(SelectedValuePathProperty); }
        set { SetValue(SelectedValuePathProperty, value); }
    }

    // Using a DependencyProperty as the backing store for SelectedValuePath.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty SelectedValuePathProperty =
        DependencyProperty.Register("SelectedValuePath", typeof(string), typeof(MyComboBox), new UIPropertyMetadata(""));

    public object SelectedValue
    {
        get { return (object)GetValue(SelectedValueProperty); }
        set { SetValue(SelectedValueProperty, value); }
    }

    // Using a DependencyProperty as the backing store for SelectedValue.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty SelectedValueProperty =
        DependencyProperty.Register("SelectedValue", typeof(object), typeof(MyComboBox), new UIPropertyMetadata(null));

    public int SelectedIndex
    {
        get { return (int)GetValue(SelectedIndexProperty); }
        set { SetValue(SelectedIndexProperty, value); }
    }

    // Using a DependencyProperty as the backing store for SelectedIndex.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty SelectedIndexProperty =
        DependencyProperty.Register("SelectedIndex", typeof(int), typeof(MyComboBox), new UIPropertyMetadata(0));

    static MyComboBox()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(MyComboBox), new FrameworkPropertyMetadata(typeof(MyComboBox)));
    }
} 
```

这是它的 Generic.xaml：

```
<Style TargetType="{x:Type local:MyComboBox}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:MyComboBox}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="MyComboBox" />
                    <ComboBox Grid.Column="1"
                              ItemsSource="{Binding Path=ItemsSource, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                              SelectedIndex="{Binding Path=SelectedIndex, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                              DisplayMemberPath="{Binding Path=DisplayMemberPath, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                              SelectedValuePath="{Binding Path=SelectedValuePath, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                              SelectedValue="{Binding Path=SelectedValue, RelativeSource={RelativeSource Mode=TemplatedParent}}">
                    </ComboBox>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

为了测试它，我用这个 MainWindow.xaml 制作了一个简单的 WPF 应用程序：

```
<Window x:Class="Example.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Example"
        Title="MainWindow" Height="350" Width="525">
    <Window.DataContext>
        <local:ViewModel />
    </Window.DataContext>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <ComboBox Grid.Row="0" Grid.Column="0" Margin="4" VerticalAlignment="Center"
                  ItemsSource="{Binding Path=Numbers}"
                  DisplayMemberPath="Key"
                  SelectedValuePath="Value"
                  SelectedValue="{Binding Path=Number, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        <TextBlock Grid.Row="0" Grid.Column="1" Margin="4" HorizontalAlignment="Center" VerticalAlignment="Center"
                   Text="{Binding Path=Number, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

        <local:MyComboBox Grid.Row="1" Grid.Column="0" Margin="4" VerticalAlignment="Center"
                          ItemsSource="{Binding Path=MyNumbers}"
                          DisplayMemberPath="Key"
                          SelectedValuePath="Value"
                          SelectedValue="{Binding Path=MyNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        <TextBlock Grid.Row="1" Grid.Column="1" Margin="4" HorizontalAlignment="Center" VerticalAlignment="Center"
                   Text="{Binding Path=MyNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
    </Grid>
</Window> 
```

和这个 ViewModel：

```
public class ViewModel : INotifyPropertyChanged
{
    private int _number;
    public int Number
    {
        get { return _number; }
        set
        {
            _number = value;
            OnPropertyChanged("Number");
        }
    }

    public Dictionary<string, int> Numbers { get; set; }

    private int _myNumber;
    public int MyNumber
    {
        get { return _myNumber; }
        set
        {
            _myNumber = value;
            OnPropertyChanged("MyNumber");
        }
    }

    public Dictionary<string, int> MyNumbers { get; set; }

    public ViewModel()
    {
        Numbers = new Dictionary<string, int>()
        {
            { "One", 1 },
            { "Two", 2 },
            { "Three", 3 }
        };
        Number = 1;

        MyNumbers = new Dictionary<string, int>()
        {
            { "Four", 4 },
            { "Five", 5 },
            { "Six", 6 }
        };
        MyNumber = 4;
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler e = PropertyChanged;
        if (e != null)
        {
            e(this, new PropertyChangedEventArgs(name));
        }
    }
} 
```

当我启动它时，我的自定义控件有一个红色边框，并且 Visual Studio 的输出窗口会发出此错误信号：

```
System.Windows.Data Error: 23 : Cannot convert '[Four, 4]' from type 'KeyValuePair`2' to type 'System.Int32' for 'en-US' culture with default conversions; consider using Converter property of Binding. NotSupportedException:'System.NotSupportedException: Int32Converter cannot convert from System.Collections.Generic.KeyValuePair`2[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]].
   at System.ComponentModel.TypeConverter.GetConvertFromException(Object value)
   at System.ComponentModel.TypeConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)
   at System.ComponentModel.BaseNumberConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)
   at MS.Internal.Data.DefaultValueConverter.ConvertHelper(Object o, Type destinationType, DependencyObject targetElement, CultureInfo culture, Boolean isForward)'
System.Windows.Data Error: 7 : ConvertBack cannot convert value '[Four, 4]' (type 'KeyValuePair`2'). BindingExpression:Path=MyNumber; DataItem='ViewModel' (HashCode=55591935); target element is 'MyComboBox' (Name=''); target property is 'SelectedValue' (type 'Object') NotSupportedException:'System.NotSupportedException: Int32Converter cannot convert from System.Collections.Generic.KeyValuePair`2[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]].
   at MS.Internal.Data.DefaultValueConverter.ConvertHelper(Object o, Type destinationType, DependencyObject targetElement, CultureInfo culture, Boolean isForward)
   at MS.Internal.Data.ObjectTargetConverter.ConvertBack(Object o, Type type, Object parameter, CultureInfo culture)
   at System.Windows.Data.BindingExpression.ConvertBackHelper(IValueConverter converter, Object value, Type sourceType, Object parameter, CultureInfo culture)' 
```

当我从 Generic.xaml 中删除属性 SelectedIndex 时，问题就消失了，但我需要它，因为我希望使用我的控件的人可以拥有与 ComboBox 相同的基本功能。
任何人都知道如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:58:51.090

我自己找到解决方案。
问题在于我为 SelectedIndex 插入的默认值：它必须是 -1 而不是 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:24:21.417

起初，在我看来，您的问题出在 SelectedValue 中。在您的 VM 中，它具有 int 类型，但 WPF 期望它是 KeyValuePair。集合项的类型。

```
ItemsSource="{Binding Path=MyNumbers}" // KeyValuePair
     DisplayMemberPath="Key" 
     SelectedValuePath="Value"
     SelectedValue="{Binding Path=MyNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" // int 
```

然后我意识到我的错误是 SelectedItem 必须是 KeyValuePair 类型。错误消息看起来像 WPF 没有查看由 SelectedValuePath 给出的项目属性，而是尝试将其显式转换为 KeyValue 对。这不是记录在案的行为。

# c# - 从字节数组中获取文件的大小（不保存到磁盘）

> ID：13669480
> 
> 赞同：65
> 
> 时间：2012-12-02T12:57:27.927
> 
> 标签：c#, .net, arrays

我有一个字节数组，如果我将这些字节写入文件，我想计算文件大小。是否可以不将文件写入光盘？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-12-02T12:59:25.287

怎么样`array.Length`？看起来像字节大小。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-12-02T12:59:56.397

嗯，是的：

```
int length = byteArray.Length; 
```

内存中的一个字节将是磁盘上的一个字节......至少在更高级别的文件系统术语中。您还需要潜在地考虑将使用多少个单独的块/集群（以及目录条目的开销），以及操作系统可能提供的任何压缩，但从问题中不清楚这是否是您所追求的。

如果您真的*想*知道“磁盘大小”而不是文件大小（就像 Windows 可以显示这两个数字一样），我怀疑您真的必须将其写入磁盘 - 然后使用 Win32 API 找出磁盘上的实际大小。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-02T13:00:04.037

`Array.Length`将给出以字节表示的总大小。
考虑到集群大小，磁盘上的物理尺寸可能会稍微多一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-21T09:42:42.130

前段时间我发现这个被剪断了，从那以后我喜欢这样做

```
public static string GetSizeInMemory(this long bytesize)
{

    string[] sizes = { "B", "KB", "MB", "GB", "TB" };
    double len = Convert.ToDouble(bytesize);
    int order = 0;
    while(len >= 1024D && order < sizes.Length - 1)
    {
        order++;
        len /= 1024;
    }

    return string.Format(CultureInfo.CurrentCulture,"{0:0.##} {1}", len, sizes[order]);
} 
```

您可以在访问任何提供文件或内存大小的东西（如 FileInfo 或 Process）时使用此扩展方法，以下是 2 个示例

```
private void ValidateResources(object _)
{

        Process p = Process.GetCurrentProcess();
        double now = p.TotalProcessorTime.TotalMilliseconds;
        double cpuUsage = (now - processorTime) / MONITOR_INTERVAL;
        processorTime = now;

        ThreadPool.GetMaxThreads(out int maxThreads, out int _);
        ThreadPool.GetAvailableThreads(out int availThreads, out int _);

        int cpuQueue = maxThreads - availThreads;
        var displayString= string.Concat(
                  p.WorkingSet64.GetSizeInMemory() + "/"
                , p.PeakWorkingSet64.GetSizeInMemory(), " RAM, "
                , p.Threads.Count, " threads, ", p.HandleCount.ToString("N0", CultureInfo.CurrentCulture)
                , " handles,  ", Math.Min(cpuUsage, 1).ToString("P2", CultureInfo.CurrentCulture)
                , " CPU usage, ", cpuQueue, " CPU queue depth"

            ));

} 
```

或带文件

```
 FileInfo file = new FileInfo(pathtoFile);
    string displaySize= file.Length.GetSizeInMemory(); 
```

# binding - Win8 应用程序：绑定到 UserControl 属性

> ID：13669484
> 
> 赞同：1
> 
> 时间：2012-12-02T12:57:57.923
> 
> 标签：binding, user-controls

我的主页上的文本框绑定到我的用户控件上的一个字符串属性，这是一个弹出窗口。文本框值与字符串属性的初始值一起正确显示，但是对属性的更改不会更新显示的值。我怎样才能让这个字段观察属性的变化？

```
**MainPage XAML:**
<TextBox x:Name="textBlockStartDate" Text="{Binding selectedDateString,Mode=OneWay}" DataContext="{Binding ElementName=MyUserControl}"/>

**MyUserControl.cs**
private DateTime selectedDate;
public string selectedDateString {get{return selectedDate.Date.ToString("dd.MM.yyyy");}} 

public DatePicker(){
  this.InitializeComponent();
  selectedDate = DateTime.Today;
}    

// Update the value when a button is pressed
private void DayButton_Clicked(object sender, RoutedEventArgs e){
  Button button = (Button)sender;
  selectedDate = (DateTime)button.Tag;
} 
```

# javascript - 向匹配正则表达式的 URL 添加负前瞻

> ID：13669485
> 
> 赞同：0
> 
> 时间：2012-12-02T12:58:00.430
> 
> 标签：javascript, regex, negative-lookahead

因此，我尝试将页面上多个元素中的所有文本 URL 替换为锚标记中的 URL：

`http://google.com`=>`<a target="_blank" href="http://google.com">http://google.com</a>`

```
var titles = document.querySelectorAll(".title");
var l = titles.length, i, title;
    for(i = 0; i < l; i++) {
    console.log('foo')
    title = titles[i];
    title.innerHTML = title.innerHTML.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a target='_blank' href='$1'>$1</a>")
} 
```

问题是在一些 AJAX 回来后我必须再次运行正则表达式，并且它将锚标签重新应用于锚标签`href=""`属性中的 url！所以我需要向这个正则表达式添加一个否定的前瞻，以防止它匹配任何带有尾随的 url`"`或`'`.

匹配`http://google.com`但不匹配`"http://google.com"`

`/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:03:33.783

断言某些内容不在双引号内的一般前瞻技术是检查在字符串末尾是否有偶数个双引号：

```
yourPatternHere(?=[\s\S]*(?:"[\s\S]*"[\s\S])*$) 
```

但是您正在对 HTML 进行操作。这可能会导致各种问题（文本节点中不匹配的引号、注释、单引号分隔的属性值等等）。[不要使用正则表达式来解析 HTML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。而是尽可能使用 JavaScript 内置的 DOM 操作功能。不要只找到`.title`元素，而是遍历它们的文本节点并将替换仅应用于这些元素。

# libjpeg - libjpeg 解码 nv12 或 yuv420p

> ID：13669487
> 
> 赞同：4
> 
> 时间：2012-12-02T12:58:04.843
> 
> 标签：libjpeg

我正在尝试使用 libjpeg 从 jpeg 中获取 YUV420 平面或半平面（NV12）图像。

我看到有一个选项可以指定 JCS_YCbCr 的输出格式，它通常是 YUV 格式，但据我了解，它会给我作为 3 个元素 { Y、U、V} 的数组的数据。因此，为了使图像格式正确，我必须自己重新排列像素并对其进行二次采样，出于性能原因，我想避免这种情况。

所以我想知道有没有办法配置 libjpeg 直接输出 YUV420p / NV12 缓冲区。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T09:28:43.017

只需查看`gst_jpeg_decode()`gstreamer 源代码树即可。这个函数和`gst_jpeg_decode_direct()`函数正是你想做的。

请注意，它提供了 YUV420 平面输出，绕过了 libjpeg 完成的所有颜色转换。（注意：这假设输入的 JPEG 是在 YUV420 颜色空间（又名 I420）中编码的，这对于几乎所有的 JPEG 都是正确的。

# android - iptables 规则显示在 android 的 textView 中；

> ID：13669488
> 
> 赞同：0
> 
> 时间：2012-12-02T12:58:14.503
> 
> 标签：android, textview, runtime, execution, iptables

我想使用此代码显示我在 textView 中创建的规则；

.....................................

```
 public void show(View btn) throws IOException{

                 Show(tv);
                   }

        public final void Show(TextView tv) throws IOException{
            Process Q =Runtime.getRuntime().exec("su -c iptables -L INPUT 1 -n -v --line-numbers ");

             String pingResult="";
            BufferedReader in = new BufferedReader(new
                    InputStreamReader(Q.getInputStream()));
                    String inputLine;

                    while ((inputLine = in.readLine()) != null) {

                           tv.setText(pingResult+="\n"+inputLine+"\n");

                    }
                    in.close();
                                        } 
                                } 
```

问题是它告诉我授予了超级用户权限，但表格没有出现在 TextView 中，即使我使用了 BufferReader ..... 帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:45:50.140

使用此代码部分，我会执行您需要的相同操作，但会列出目录并读取输入。尝试使用此代码更改 getRuntime().exec 命令。

```
private String[] GetAppFiles() throws IOException
    {
        int BUFF_LEN =2048;
        Process p = Runtime.getRuntime().exec(new String[]{"su", "-c", "system/bin/sh"});
        DataOutputStream stdin = new DataOutputStream(p.getOutputStream());
        //from here all commands are executed with su permissions
        stdin.writeBytes("ls " + CurrentApkPath + "\n"); // \n executes the command
        InputStream stdout = p.getInputStream();
        byte[] buffer = new byte[BUFF_LEN];
        int read;
        String out = new String();
        //read method will wait forever if there is nothing in the stream
        //so we need to read it in another way than while((read=stdout.read(buffer))>0)
        while(true){
            read = stdout.read(buffer);
            out += new String(buffer, 0, read);
            if(read<BUFF_LEN){
                //we have read everything
                break;
            }
        } 
```

我希望它对你有帮助。

# css - 有没有办法在 Web 开发中使用加色混合？

> ID：13669491
> 
> 赞同：7
> 
> 时间：2012-12-02T12:58:26.473
> 
> 标签：css, html, colors, transparency

我有一个使用[加色混合](http://en.wikipedia.org/wiki/Additive_color)的网页设计。想要的效果是：红色方块覆盖绿色方块，重叠区域呈现黄色。

有没有什么好的方法可以使用标准工具（CSS、CSS 透明度/不透明度、透明 png 图像）实现加色混合？

我们希望在设计中应用它的方式：两个图案（例如透明的 png 图像）相互叠加——两个图案叠加的区域更亮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-15T05:29:42.193

**方法一：**

现在可以使用 CSS mix-blend-mode 来实现所需的效果。目前仅支持 Chrome。

***访问 chrome://flags/ 和“启用实验性 Web 平台功能”查看效果。***

[http://jsfiddle.net/9AgDm/4/](http://jsfiddle.net/9AgDm/4/)

```
<div style="width: 200px; height: 200px; background-color: #F00; position: absolute; top: 100px; left: 100px;"></div>
<div style="width: 200px; height: 200px; background-color: #0F0; position: absolute; top: 0; left: 0;"></div>
<div style="width: 200px; height: 200px; background-color: #F00; position: absolute; top: 100px; left: 100px; mix-blend-mode: screen;"></div> 
```

**方法二：**

也可以使用在单个 HTML 元素上具有多个背景渐变的背景混合模式来实现该效果。

在此处查看浏览器支持： [http ://caniuse.com/css-backgroundblendmode](http://caniuse.com/css-backgroundblendmode)

[http://jsfiddle.net/9AgDm/5/](http://jsfiddle.net/9AgDm/5/)

```
<div></div> 
```

CSS：

```
div {
    background-blend-mode: screen;
    background: 
        linear-gradient(to right, #0F0, #0F0),
        linear-gradient(to right, #F00, #F00);
    background-position:
        0 0,
        100px 100px;
    background-repeat: no-repeat;
    background-size:
        200px 200px,
        200px 200px;
    height: 300px;
    width: 300px;
} 
```

**方法3：**

使用 SVG 的效果相同。适用于大多数浏览器。

测试：FF 7+；铬 16+；IE 10+；歌剧 12+; Safari 5、6+（在 5.1 上失败）

[http://jsfiddle.net/9AgDm/9/](http://jsfiddle.net/9AgDm/9/)

```
<svg width="300" height="300">
  <defs>
    <filter id="additive">
      <feFlood x="0" y="0" width="200" height="200" flood-color="#0F0" result="a"/>
      <feFlood x="100" y="100" width="200" height="200" flood-color="#F00" result="b"/>
      <feBlend in="a" in2="b" result="ab" mode="screen"/>
     </filter>
  </defs>
  <rect filter="url(#additive)" width="100%" height="100%"/>
</svg> 
```

**方法四：**

除了 IE8 及以下版本，canvas 可以在大多数浏览器上运行。以下是一些可以实现加色的示例/库：

[http://media.chikuyonok.ru/canvas-blending/](http://media.chikuyonok.ru/canvas-blending/)

[http://www.pixastic.com/lib/docs/actions/blend/](http://www.pixastic.com/lib/docs/actions/blend/)

[http://canvasquery.com/#blending](http://canvasquery.com/#blending)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-18T21:20:14.697

当我看到 TheNoble-Coder 的答案时，我想起了我第一次尝试透明度的旧方法。您可以使用彩色 GIF、PNG 甚至任何其他光栅图形格式实现与您想要的类似的视觉错觉。

诀窍是每隔一个像素就画一次基色，这样就会出现一个光栅，其中彩色和透明像素交替出现。如果您将两个具有不同基色的此类图像放在一起，则加色混合将导致观看者的眼睛，最终颜色看起来像加色混合。

![在此处输入图像描述](../Images/c3b0cd06856414d7c5857806e3803fec.png)

回到你的问题：你可以`canvas`通过 CSS 渐变的组合使用 a 或 a 来创建这样简单的图形效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T15:40:41.567

**重叠的图像可以以某种方式产生混色效果**

在下面的代码中，绝对定位已用于将顶部图像与底部图像重叠，并且顶部图像的不透明度已设置为 70% 以使其透明。

```
 <div>   
  <img src="http://upload.wikimedia.org/wikipedia/commons/thumb/f/fd/Color_icon_red.svg/220px-Color_icon_red.svg.png" style="width:200px; height:200px; float:left; background-color:#F00; position:absolute; top:100px; left:100px; opacity:0.7;filter:alpha(opacity=70); z-index:2" />
  <img src="http://upload.wikimedia.org/wikipedia/commons/thumb/7/7d/Color_icon_green.svg/220px-Color_icon_green.svg.png" style="width:200px; height:200px; float:left; background-color:#030; clear:left" />
  </div>
  <!--This Code has been checked in Firefox 16, Chrome8 and IE8(with Activex enabled) --> 
```

在此处查看上述代码的演示：- [http://jsfiddle.net/YtAHN/embedded/result/](http://jsfiddle.net/YtAHN/embedded/result/)

* * *

**重叠时的彩色 div 不能产生这种效果，但是我们可以使用 CSS 和一个简单的 CSS 技巧让它看起来像这种效果：**

如果您使用 css 和一些技巧，您可以实现看起来像两个重叠的正方形和重叠区域黄色的效果。简单的技巧是你必须添加多个 div 来制作绿色和红色方块，并使用浮动、清晰和不透明度来产生透明效果。检查这个会产生这种影响的简单代码：

```
<div>
<div style="width:200px; height:100px; float:left; background-color:#F00; opacity:0.7;
filter:alpha(opacity=70);">   <!-- filter:alpha(opacity=xx) Used For IE8 and earlier Compatibility -->
Red Div
</div>
<div style="width:100px; height:100px; float:left; background-color:#F00; clear:left; opacity:0.7;
filter:alpha(opacity=70);">
Red Div
</div>
<div style="width:100px; height:100px; float:left; background-color:#FF0; opacity:0.5;
filter:alpha(opacity=50);">
Overlapping Region
</div>
<div style="width:100px; height:100px; float:left; background-color:#030; opacity:0.7;
filter:alpha(opacity=70);">
Green Div
</div>
<div style="width:100px; height:100px; float:left;  clear:left; opacity:0.7;
filter:alpha(opacity=70);">
Blank Div
</div>
<div style="width:200px; height:100px; float:left; background-color:#030; opacity:0.7;
filter:alpha(opacity=70);">
Green Div
</div>
</div>
<!--This Code has been checked in Firefox 16, Chrome8 and IE8(with Activex enabled) --> 
```

在此处查看上述代码的演示：- [http://jsfiddle.net/JqY3r/embedded/result/](http://jsfiddle.net/JqY3r/embedded/result/)

* * *

**div 上的简单重叠和透明将不会产生这种颜色混合效果，如以下代码所示：**

*如果您只是使用重叠和透明度，它将不起作用。您必须使用类似上述代码的技巧来产生这种效果（图像除外，因为图像可用于产生这种颜色混合效果，如第一个示例所示）。* **正如您将看到的，以下代码不能产生如上所述的预期效果**

```
<div style="width:200px; height:200px; float:left; background-color:#F00; position:absolute; top:100px; left:100px; opacity:0.7;
filter:alpha(opacity=70); z-index:2">  <!-- filter:alpha(opacity=xx) Used For IE8 and earlier Compatibility -->
</div>
<div style="width:200px; height:200px; float:left; background-color:#030; opacity:0.7;
filter:alpha(opacity=70); clear:left">
</div>
<!--This Code has been checked in Firefox 16, Chrome8 and IE8(with Activex enabled) --> 
```

在此处查看上述代码的演示：- [http://jsfiddle.net/9AgDm/embedded/result/](http://jsfiddle.net/9AgDm/embedded/result/)

希望这可以帮助。

# github - GitHub for mac 使用 post-commit 钩子无法正常运行

> ID：13669492
> 
> 赞同：2
> 
> 时间：2012-12-02T12:58:50.170
> 
> 标签：github, githooks, github-for-mac, post-commit-hook

我通常使用[GitHub for Mac](http://mac.github.com/)将代码提交到我的 GitHub 项目，因为这样做会更快一些。对于我当前的项目，我必须设置以下预提交挂钩：

```
if [ -e images/sprites-01.png ]
then
    mv -f images/sprites-01.png images/sprites.png
    git add images/sprites.png
    git commit --amend -C HEAD --no-verify
fi 
```

当我通过命令行提交时，它只是执行正常的提交，然后它执行修改前一个提交的钩子，我可以获取我新重命名的文件。当我推送时，我将所有内容视为一个提交，如如果什么都没发生。

但是，如果我进行更改然后使用 GitHub for Mac 同步它们，当我同步时它会显示“请在同步之前提交所有更改”。然后它`images/sprites-01.png`在文件列表中将文件显示为仍需要删除的文件，就好像它正在执行挂钩但忽略了修改后的提交。

我能做些什么来完成这项工作？

# javascript - 如何使用 JavaScript 更改“选定”值？

> ID：13669493
> 
> 赞同：1
> 
> 时间：2012-12-02T12:58:57.517
> 
> 标签：javascript, jquery, select

> **可能重复：**
> [如何使用 JavaScript 更改组合框中的“选定”值？](https://stackoverflow.com/questions/1778184/how-to-change-selected-value-in-combobox-using-javascript)

所以这是我的代码”

```
<label class="conl">Pokaż wyniki jako
<br><select name="show_as">
<option value="topics">Wątki</option>
<option value="posts">Posty</option>
</select>
<br></label> 
```

如何更改默认选择（从主题到帖子）？我不能以任何方式修改这部分 HTML 代码，但我可以在头部的任何位置添加脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:02:56.027

试试看（未测试）：

```
 var doprdown = document.getElementsByName('show_as')[0];
 for(var i = 0; i < dropdown.options.length; i++){
     if(dropdown.options[i].value == "posts")
          dropdown.selectedIndex = i;
 } 
```

或 jQuery：

```
$("select[name='show_as'] > option[value=posts]").attr('selected', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:45:17.983

尝试使用，

***jQuery代码：***

```
<script language="javascript" type="text/javascript" src="js/jquery-1.8.2.js"></script>
<script language="javascript" type="text/javascript"> 
$(function(){
$('#show_as').val('posts');
});
</script> 
```

***html代码：***

在这里，我指定了一个 ID，以便选择名为“show_as”的选择框

```
 <label class="conl">Pokaż wyniki jako
<br><select name="show_as" id="show_as">
<option value="topics">Wątki</option>
<option value="posts">Posty</option>
</select>
<br></label> 
```

# android - android中有界服务的片段

> ID：13669494
> 
> 赞同：3
> 
> 时间：2012-12-02T12:58:58.357
> 
> 标签：android, service

我有一个`Activity`包含 3的`Fragments`。我有一个有界的`Service`.

是不是每次调用

```
getActivity(). bindService(intent, mConnection, Context.BIND_AUTO_CREATE); 
```

每个 Fragment 内部将导致 3 个客户端绑定到有界`Service`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:36:47.790

我认为它将为您提供三个有界服务的客户。

你可以做些什么来确保你只有一个客户服务是

重写 bindService 方法，如下所示。注意：有了这个，您只有一项活动的有界服务。

```
private IBinder binder;
private ComponentName name;
private ArrayList<ServiceConnection> conns = new ArrayList<ServiceConnection>();
@Override
    public boolean bindService(Intent service, final ServiceConnection conn, int flags)    {
conns.add(conn);
        if(binder != null)
            conn.onServiceConnected(name, binder);
        return super.bindService(service, new ServiceConnection() {

            @Override
            public void onServiceDisconnected(ComponentName arg0) {
for(ServiceConnection con : conns)
con.onServiceDisconnected(arg0);
            }

            @Override
            public void onServiceConnected(ComponentName arg0, IBinder arg1) {
                name = arg0;
                binder = arg1;
                conn.onServiceConnected(arg0, arg1);
            }
        }, flags);
    } 
```

# macos - 我缺少什么来阻止 Beep 在我的 Mac 10.5.8 上响起（使用 MonoDevelop 2.8.8.2）？

> ID：13669495
> 
> 赞同：0
> 
> 时间：2012-12-02T12:59:07.440
> 
> 标签：macos, cross-platform, system, monodevelop, beep

我正在编写一个跨平台程序，它显示一个计时器，可以向上或向下计数到用户设置的间隔。在那个间隔结束时，我想播放一个声音。我想使用类似的东西：

```
System.Media.SystemSounds.Beep.Play(); 
```

会工作。除了在我的 Mac 上没有播放声音之外，我没有任何故障迹象。当我用“按钮”编写一段小测试代码来触发“哔”声时，它没有播放。但是，上面的代码片段在我妻子的 Windows Vista 机器上运行良好（也使用 MonoDevelop 2.8.8.4）。具有讽刺意味的是，它在沙盒化的 Ubuntu 12.04 linux (MonoDevelop 2.8.6.3) 上也能正常工作，我通过 VirtualBox 在我的 Mac 上进行了沙盒化。

我已经在 SO 和互联网上四处寻找，但我找不到任何令人满意的答案来解决这个难题。让我再问一次。“是什么阻止我的 Mac 在我的 Mac 上播放我的程序中的“哔”声，但同一台 Mac 上的沙盒 linux 播放声音没有问题？”

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:45:03.490

查看[Mono 的 System.Media 实现](https://github.com/mono/mono/tree/master/mcs/class/System/System.Media)，它似乎只为 ALSA（Linux 声音系统之一）和 Windows 实现。我怀疑这是因为 System.Media 是一个非常简单的声音 API，不能做很多事情，所以很少使用。

我想不出任何好的平台无关的声音播放器 API，认为 GTK# UI 工具包（由 MonoDevelop 使用）有一个`Display.Beep()`AFAIK 可以在所有平台上工作。如果您的应用程序是终端应用程序，您也可以尝试`System.Console.Beep ()`.

# memory - 启用 ARMv7 VMSA 内存管理单元？

> ID：13669498
> 
> 赞同：4
> 
> 时间：2012-12-02T12:59:25.600
> 
> 标签：memory, arm, armv7, mmu

所以，基本上，我想在 ARMv7 内核上启用内存管理单元。实际过程非常简单。我只需要将转换表的地址加载到`TTBR0`并使用控制寄存器启用 MMU。

```
/* enable mmu */
mcr p15, 0, r0, c2, c0, 0
mrc p15, 0, r12, c1, c0, 0
orr r12, r12, #0x1
mcr p15, 0, r12, c1, c0, 0 
```

现在，一旦启用 MMU，问题就会出现，因为在 ARMv7 上（与其他版本的 ARM 架构不同），CPU 立即开始从虚拟地址获取。因此，如果引导加载程序在 at 运行`0x10000000`然后启用 MMU，除非它首先进入标识映射，否则下一次提取 at`0x10000004`将导致预取中止。现在，我知道可以在 MMU 的初始启用期间使用身份映射来执行此操作。但是，在切换翻译表（将新值加载到 中）时也会出现同样的问题`TTBR0`。

所以，本质上，我正在寻找一种或多或少直接的方式来加载一个新值`TTBR0`（或者只是打开 MMU），然后**立即跳转到一个新地址**，这将在新地图中有效。这在早期架构上是可能的，因为在启用 MMU 或更改状态的指令之后至少有 4 条指令是从旧地址获取的。理想情况下，我希望能够做到这一点，而无需依赖极其丑陋的 hack，每次您想要切换页表或打开 MMU 时都必须创建一个身份映射。

为了澄清我在谈论旧架构时的意思，这里有一个指向 ARM 信息中心页面的链接，该页面解释了如何在 ARM720T 上打开 MMU：[7.16.1。启用 MMU](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0087e/ch07s16s01.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:46:18.433

简短的回答是，没有办法完全按照您在 ARMv7-A 中的要求进行操作。ARM720T 示例是一个极其微架构特定的 hack，永远无法保证在不同处理器之间可移植。

对于 ARMv7-A 没有不使用恒等映射来打开/关闭 MMU 的可移植方式，但对于更新转换表：您可以做的（在 ARM720T 中不可用）是使用 TTBR1/TTBR0 的组合保存你的描述符。TTBCR 中的 N 字段配置覆盖 TTBR1 的 TTBR0 表的大小。这样，只要您的 TTB 切换代码位于通过与您正在更新的不同的 TTBR 描述的区域中，就不会出现映射冲突。

另一种选择是重写由 TTBR0 描述的转换表，而不是切换。

# c++ - 删除 Visual Studio 标头中的 void 指针

> ID：13669499
> 
> 赞同：0
> 
> 时间：2012-12-02T12:59:29.823
> 
> 标签：c++, visual-studio, memory-management, void-pointers

我在 Visual Studio 标头中发现了一些通过指向 void 的指针释放内存的地方。

xlocnum 文件：

```
template<class _Elem>
     class numpunct
            : public locale::facet
    { 
     _PROTECTED:
     _VIRTUAL __CLR_OR_THIS_CALL ~numpunct()
     {       // destroy the object
         _Tidy();
     }
     ...
     protected:
        void __CLR_OR_THIS_CALL _Init(const _Locinfo& _Lobj)
        {       // initialize from _Lobj
            _Grouping = 0;
            _Falsename = 0;
            _Truename = 0;

            _TRY_BEGIN
            _Grouping = _MAKLOCSTR(char, _Ptr->grouping, _Lobj._Getcvt());
            _Falsename = _MAKLOCSTR(_Elem, _Lobj._Getfalse(), _Lobj._Getcvt());
            _Truename = _MAKLOCSTR(_Elem, _Lobj._Gettrue(), _Lobj._Getcvt());
            _CATCH_ALL
            _Tidy();
            _RERAISE;
            _CATCH_END
             ...
            }
      ...
      private:
      void __CLR_OR_THIS_CALL _Tidy()
      {       // free all storage
         _DELETE_CRT_VEC((void *)_Grouping);
         _DELETE_CRT_VEC((void *)_Falsename);
         _DELETE_CRT_VEC((void *)_Truename);
      }
    ... 
    const char *_Grouping;  // grouping string, "" for "C" locale
    const _Elem *_Falsename;// name for false, "false" for "C" locale
    const _Elem *_Truename; // name for true, "true" for "C" locale
    }; 
```

或 xlocale 中的另一个示例：

```
template<> class _CRTIMP2_PURE ctype<char>
    : public ctype_base
    {
       public:
          explicit __CLR_OR_THIS_CALL ctype(const mask *_Table = 0,
              bool _Deletetable = false,
              size_t _Refs = 0)
              : ctype_base(_Refs)
                {       // construct with specified table and delete flag for table
                   ...
                   if (_Table != 0)
                   {       // replace existing char to mask table
                       _Tidy();
                       _Ctype._Table = _Table;
                       _Ctype._Delfl = _Deletetable ? -1 : 0;
                   }
                }
        protected:
           void __CLR_OR_THIS_CALL _Tidy()
           {       // free any allocated storage
              if (0 < _Ctype._Delfl)
                   free((void *)_Ctype._Table);
              else if (_Ctype._Delfl < 0)
                    delete[] (void *)_Ctype._Table;
            }
    } 
```

正如在[https://stackoverflow.com/a/941959/1549256](https://stackoverflow.com/a/941959/1549256)中指出的，通过 void 指针删除是 C++ 标准未定义的。

为什么在这种情况下释放内存是正确的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T13:12:52.837

标准库实现中的代码不必符合语言定义。它可以利用实施知识；这就是编译器附带它的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T13:05:24.890

未定义并不意味着它不会工作，它只是意味着一个实现可以自由地做任何它想做的事情，*包括工作正常。*

删除强制转换指针的一个可能问题是可能不会调用析构函数，但如果类型是没有需要在删除时反转的构造函数的类型，这可能不是问题。

# mysql - Spring MVC - 从二级缓存加载参考数据

> ID：13669502
> 
> 赞同：0
> 
> 时间：2012-12-02T12:59:37.440
> 
> 标签：mysql, hibernate, spring-mvc, drop-down-menu

我继续我之前提出的问题（下面的链接）

[Spring MVC - 在服务器启动时从数据库中获取参考数据](https://stackoverflow.com/questions/13660238/spring-mvc-get-reference-data-from-database-on-server-startup/13660386#comment18747498_13660386)

在获得早期帖子的一些建议后，我认为我可以用来加载参考数据的方法是，在 ArticleController （我的控制器类）中添加以下方法

```
 @ModelAttribute
    public void populateModel(@RequestParam String number, Model model) {
        model.addAttribute("countryList", articleService.getCountryList());
        model.addAttribute("skillsList", articleService.getSkillsList());
    } 
```

然后使用如下所示的休眠二级缓存，

```
 @Entity
    @org.hibernate.annotations.Cache(usage = CacheConcurrencyStrategy.READ_ONLY)
    public class Country {
        ...
    } 
```

同样适用于技能类

我有三个问题

1.  populateModel 方法 (@ModelAttribute) 会只执行一次吗？即在 ArticleController 类上执行第一个 @RequestMapping 方法之前（对于多个会话中的所有请求 - 我在日志跟踪中看到 ArticleController 在我启动服务器时被初始化）？
2.  除了我提到的实现二级缓存之外，我还需要做更多的事情吗？（contry 列表和技能列表是两个单独的表中的纯只读数据）
3.  我错过的任何小点，您都可以提供建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:11:56.243

1.  [不会。如文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-ann-modelattrib-methods)中所述，将为每个请求调用该方法。顺便说一句，如果它只被调用一次，它将在哪里找到请求参数（你不使用，顺便说一句）？

2.  如果除了二级缓存之外没有开启查询缓存，并且使查询可缓存，那么Hibernate每次都会执行一个SQL查询从数据库中加载国家ID，然后再从数据库中加载实体本身。二级缓存。如果启用了查询缓存并且查询是可缓存的，那么 Hibernate 将执行单个查询以加载缓存中的所有国家/地区，之后不再执行任何查询（至少对于缓存区域的 TTL）

3.  我想我已经做了我能做的:-)。您可以阅读[以下文章](http://www.javalobby.org/java/forums/t48846.html)以获得更好的理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-16T15:11:32.923

针对问题 1，此方法：

```
@ModelAttribute
    public void populateModel(@RequestParam String number, Model model) {
        model.addAttribute("countryList", articleService.getCountryList());
        model.addAttribute("skillsList", articleService.getSkillsList());
    } 
```

标有@ModelAttribute 注释。这意味着每次调用此控制器中的任何 @RequestMapping 注释方法时，都会（之前）执行该方法。

如果您要缓存一些模型属性，最好将它们公开为 @RequestMapping 方法。

# url - 从 Drupal 7 中的节点检索分类术语 url

> ID：13669504
> 
> 赞同：2
> 
> 时间：2012-12-02T12:59:50.670
> 
> 标签：url, drupal, drupal-7, taxonomy

我正在使用 Authcache 为经过身份验证的用户缓存页面，并使用 Authcache Actions+Rules 来使 node:url + 缓存中的首页在创建/更新/删除节点时过期。我创建了一个规则事件“在保存内容之前”+ 3 个操作“通过路径 [node:url] 清除缓存”、“通过路径 [node:edit-url] 清除缓存”和“通过路径 [site:url] 清除缓存”所有节点都标记有至少 1 个分类术语，并且节点预告片出现在分类术语页面上。因此，我需要创建一个规则来清除节点中标记的分类术语页面的缓存。到目前为止，我找不到解决方案。有关如何创建此规则的任何建议？

先感谢您。卡塔林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:14:38.903

要从 tid（附加到节点）加载分类术语的 url，请使用：

```
$tid = $node->your_taxonomy_field['und'][0]['tid'];
$taxonomy_term_url = drupal_lookup_path('alias', 'taxonomy/term/'.$tid); 
```

# javascript - jQuery Mobile 中的多 HTML 页面

> ID：13669508
> 
> 赞同：0
> 
> 时间：2012-12-02T12:59:56.990
> 
> 标签：javascript, android, html, jquery-mobile

最近我开始将 jQuery Mobile 用于原生 android 应用程序（使用 phoneGap）。

这是我的 index.html：

```
<html>
<head>
    <meta charset="utf-8">

<meta name="viewport" content="width=device-width, initial-scale=1"> 

<link rel="stylesheet" href="css/rtl.jquery.mobile-1.2.0.min.css" />
<link rel="stylesheet" href="css/style.css">

<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="js/rtl.jquery.mobile-1.2.0.min.js"></script>

    <title>Untitled Document</title>
</head>
<body>
<div class="all_app_position" data-role="homePage">
    <div data-role="header" class="header">
        header
    </div>
    <div class="middle">
        Middle contnet
    </div>

    <div class="footer">
        footer content
    </div>

</div>

</body>
</html> 
```

我想将第二个 html 文件中的内容（如下）导入中间 div。

```
 <div data-role="page" id="about">
         <div data-role="header"><h1>Page 2</h1></div>
         <div data-role="content"><p id="deviceProperties">Loading device properties...</p></div>
         <div data-role="footer"><h4>Footer</h4></div>
     </div> 
```

我该怎么做？！我尝试了很多方法，但我做不到。

对我来说很重要的是该链接将使用 Ajax。

对不起我的英语

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:39:38.717

有很多方法可以从不同的文件中嵌入 html。请查看链接[http://webdesign.about.com/od/ssi/a/aa052002a.htm](http://webdesign.about.com/od/ssi/a/aa052002a.htm)了解更多信息。

最好的方法之一是 HTML 中的内联框架或 iframe 标签。

# javascript - 正则表达式在javascript中测试字符串

> ID：13669511
> 
> 赞同：-2
> 
> 时间：2012-12-02T13:00:13.883
> 
> 标签：javascript

我想为 javascript 创建正则表达式来测试包含诸如 MCA 或 ACA 等单词的字符串。当输入这些单词（如 MCA、USD 等）时，Regex 应该返回 true。当在文本框中输入字符串时，Regex 应该返回 false

```
 .M.C.A
 ..MM
 M..........A
 M.C.A.. 
```

我可以输入任何带点或不带点的单词，但不想在文本框中输入字符串 1：以点开头 2：每个字母之间包含多个点 3：不包含任何数字 4：仅以字母开头

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:16:24.837

由于您的问题不太清楚，所以我假设您正在尝试验证首字母缩略词。以下正则表达式之一应该可以满足您的要求。

要只允许一个字母后跟一个点（即 , `M.C.A.`, `U.S.D.`）`A.C.A.`，请使用以下命令：

```
r = /^([A-Z][.])*$/gi; 
```

要只允许字母后跟其他字母（即 , `MCA`, `USD`）`ACA`，请使用以下命令：

```
r = /^([A-Z])*$/gi; 
```

要允许一个字母后跟一个点，或者只允许一个字母后跟其他字母，请使用以下命令：

```
r = /^([A-Z])*$|^([A-Z][.])*$/gi; 
```

如果您希望字母**可选地或任意地**用点分隔，您需要这样：

```
r = /^([A-Z][.]?)*$/gi; 
```

有效输入示例：

*   `MCA`
*   `M.CA`
*   `MC.A`
*   `MCA.`
*   `M.C.A`
*   `MC.A.`
*   `M.C.A.`

如果您只需要测试、、 和的组合`M`，则将上述正则表达式中的范围从调整为仅允许您关心的字母。`C``A``.``A-Z`

我设置了一个小提琴来玩，并确保你的具体情况得到处理：http: [//jsfiddle.net/eXStp/](http://jsfiddle.net/eXStp/)

# arrays - （算法）查找两个未排序的数组在 Θ(n*logn) 时间内是否有任何共同元素而不进行排序？

> ID：13669514
> 
> 赞同：1
> 
> 时间：2012-12-02T13:00:25.227
> 
> 标签：arrays, algorithm

我们有两个未排序的数组，每个数组的长度为`n`. 这些数组包含随机整数。如何及时查找这两个数组是否有任何共同的元素`Θ(n*logn)`？

不允许排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:17:03.183

让*A*和*B*成为您的未排序数组，长度均为*n*。您可以按照@amit 的建议使用哈希表；但是，还有一个更快的算法。由于*Card(A) = Card(B)*，快速交集算法是使用[布隆过滤器](http://en.wikipedia.org/wiki/Bloom_filter)来存储集合，然后使用按位与运算实现交集。这仍然需要*O(n)*，但对于隐藏在渐近符号中的常数和低阶项，它是一个更好的结果。

# c# - 使用 FTP 在 Visual Studio 中发布

> ID：13669515
> 
> 赞同：1
> 
> 时间：2012-12-02T13:00:27.503
> 
> 标签：c#, security, ftp, clickonce, publishing

我想使用 ClickOnce 来发布我的应用程序（因为我还没有找到任何其他像 IDE 一样简单且集成良好的解决方案）。

我已经建立了一个网站来发布我的应用程序，用户将从那里下载它。我的理解是，唯一可用于发布 ClickOnce 的方法是通过 FTP。我已经阅读了 FTP，您的密码可以被“拦截”。

这到底是什么意思？互联网上任何地方的任何人都可以看到您的密码吗？还是他们必须在您的本地网络上？基本上 - 从理论上讲，某人如何获得对我的 FTP 帐户的访问权限，以及发生的风险有多大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:36:44.437

使用 FTP 协议的密码以“开放”格式传输，并且可以使用嗅探器捕获。使用 ssl/sftp。将您的站点发布到文件夹，然后使用另一个 ftp 客户端，例如 winscp

# javascript - 点击事件多次触发（应该是一次）

> ID：13669518
> 
> 赞同：1
> 
> 时间：2012-12-02T13:00:55.797
> 
> 标签：javascript, jquery, onclick

这是我的第一篇文章，在这里我想创建一个 chrome 扩展，当它被按下时，它会显示可以按下的链接，使用 AJAX 检索的链接。到目前为止它一直有效，唯一的问题是当它被点击任何链接时，有时它会出现两次甚至三次。谁能给出这个问题的解释和答案？

谢谢！

```
var links = [];
links.push("http://www.tenmanga.com/book/rss/id-16896.xml");
links.push("http://mangafox.me/rss/fairy_tail.xml");
links.push("http://feeds.feedburner.com/9gag?format=xml"); 
```

函数开始（）

```
function start(){
    for (var i in links)
        getXML(links[i]);
    $(document).ready(function(){
    });

} 
```

函数 getXML

```
function getXML(url){
    var test = $.ajax({
        type: "GET",
        url: url,
        dataType: "xml",
        success: function(xml){
            parse(xml);
bind();
        }
    });
    return test;
}

function bind(){
    $("a").click(function(e){
        chrome.tabs.create({url:$(this).attr("href")});
    });
}
function parse(xml){
    //$("#content").append();
    var title = $(xml).find('title').first().text();
    var createClickHandler = function(arg){
        return function(){ 
            open_item(arg); 
        };
    }
    $("#content").append(title+"<br>");
    $(xml).find('item').each(function(){
        var temp = document.createElement("a");
        var title = this.childNodes[1].textContent;
        var link = this.childNodes[3].textContent;
        temp.innerHTML = title;
        temp.setAttribute("href",link);
        $("#content").append(temp);
        $("#content").append("<br>");
    });
    $("#content").append("<br>");
} 
```

从这里开始！

```
var start = start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:36:42.317

单击元素时多次调用单击事件的唯一原因是，在该元素上注册了多个事件处理程序。每次您调用 bind 时，您所做的就是将事件绑定到“a”，所以我猜对于第一个链接，它的事件在几秒钟内触发一次两次，第三次触发三次。可能不是只使用 $('a' ) 将属性赋予页面中的所有“a”元素，您可以使用单独的 id 动态创建“a”。这必须结束奇怪的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:04:46.400

调用单击回调`e.preventDefault();`中`e`的位置`event`，以便该事件不会冒泡，也不会触发其他任何事情。

在 ajax 返回后，每次成功时也不应调用 bind()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T13:12:03.683

不要在每个链接上绑定，而是执行以下操作一次：

```
$(document).on('click','a'
    function(e){
        chrome.tabs.create({url:$(this).attr("href")});
        return false;
    }
); 
```

如果您在链接上没有其他锚点

# matlab - 在matlab中获取第二个最大元素

> ID：13669520
> 
> 赞同：4
> 
> 时间：2012-12-02T13:01:39.793
> 
> 标签：matlab

我有一个数组，比如说`A = [ 3 5 6 7 ]`。我知道我可以得到这个数组的最大值`max(A)`并返回`7`，但是我怎样才能`6`从这个数组中得到第二个最大值（）而不排序或删除第一个最大值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T14:40:17.257

我可以提出以下棘手的解决方案：

```
second_max_value = max(A(A~=max(A))) 
```

这里`A(A~=max(A))`将是不包含原始数组最大值的临时数组。比你收到这个数组的最大值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-02T13:35:12.633

首先，除非你有非常大的向量，否则使用 unique 并获取倒数第二个索引。

如果您希望保留最大元素并且您的向量不包含 NaN，您可以尝试：

```
[max_value,max_idx] = max(A);  % [3 5 6 7]
A(idx) = NaN;              % [3 5 6 NaN]
second_max_value = max(A); % 6
A(idx) = max_value;        % [3 5 6 7] 
```

如果您有多个具有相同最大值的索引，您可以选择包括

```
if length(max_idx)>1, second_max_value=max_value, end 
```

**更新：**

根据问题旁边OP的评论，让我补充一下：

您也可以在**不**更改原始数组的情况下使用排序：

```
[~, idx] = sort(A);
A(idx(end)) % is the max value
A(idx(end-1)) % is the second max value 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T13:07:26.770

关于什么

```
 B = unique(A);      % // Finds unique values and sorts
        max_2 = B(end-1);   % // Second maximum 
```

?

测试：

```
 A= [ 3 5 6 7  2 4]
     B = unique(A)
     B(end-1)

        ans =

            6 
```

# postgresql - 非关系方式的关系数据库

> ID：13669528
> 
> 赞同：1
> 
> 时间：2012-12-02T13:02:53.927
> 
> 标签：postgresql, nosql, key-value

以 noSQL 方式使用关系数据库的优缺点是什么？

说 noSQL，我的意思是键值存储，带有一些相当简单的查询语言和水平扩展。

现在做一个简单的实验，postgreSQL数据库以key-value的方式设计和查询。这是示例。让它成为用户和文章，关系模型中的一对多。

关系：

```
User              Article
| id | login |    | id | user_id | title |
|----+-------|    |----+---------+-------|
|  1 | Alex  |    |  1 |    1    | FooBar| 
|  2 | Ann   |    |  2 |    1    | GoGoGo|
--------------    ------------------------
and some constraints on user id 
```

要获取所有用户的文章，我们需要某种连接。

键值样式：

```
User                          Article
| id | login | articles |    | id | user_id | title |
|----|-------|----------|    |----+---------+-------|
|  1 | Alex  |  1, 2    |    |  1 |    1    | FooBar| 
|  2 | Ann   |          |    |  2 |    1    | GoGoGo|
-------------------------    ------------------------ 
```

让 User.articles 为数组，例如，postgreSQL 有一些处理数组的工具。

在这种情况下，我将首先进行用户查询，然后在获取文章 ID 时将它们全部选中。我认为这与 MongdDB 的集合方式非常相似。

此外，我知道，第二种情况是我的大学导师从未说过要做的事情，但看起来这种方法非常非常可扩展。

它看起来像轮子改造，但主要目标是为一些现在使用 postgres 的有前途的项目提供可扩展的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:15:29.503

对于 n:m 关系，我会使用标准化模型。如果在创建**适当的索引**之后，`SELECT`性能仍然不够好，我可能会创建由触发器自动更新的**物化视图。**

在这样的物化视图中，所有相关的 ID 都可以聚合到一个数组中——或者你实际需要的任何东西。不过，我宁愿不将其用作主要数据模型。

# java - DatagramPacket 和 DatagramSocket 发送的字符串不等于自身的文字表示

> ID：13669541
> 
> 赞同：0
> 
> 时间：2012-12-02T13:04:39.007
> 
> 标签：java, sockets, datagram

**答案是我的其他评论**

我有一个问题，我通过 DatagramPacket 和 DatagramSocket 将用户和密码字符串发送到远程机器，我想在数据库中执行一个 select 语句，但问题是接收到的字符串似乎是它应该是的，这里有一些代码：

```
//build and send method
public void packetCompose(String user, String password) {
    try {
        byte[] userBytes = user.getBytes();
        byte[] passwordBytes = password.getBytes();
        byte[] buf = new byte[256];
        System.arraycopy( userBytes    , 0, buf,   0, Math.min( userBytes.length, 128 ) );
        System.arraycopy( passwordBytes, 0, buf, 128, Math.min( userBytes.length, 128 ) );

        DatagramPacket packet = new DatagramPacket(buf, 256, serverAddress, 4445);
        socket.send(packet);
    } catch (SocketException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

现在是数据包方法的分解

```
public void packetDecompose(DatagramPacket packet) {
            // packet has this structure
            // 128 bytes            user String
            // 128 bytes            password String
            clientAddress = packet.getAddress();
            String user = new String(packet.getData(),0,128);
            String password = new String(packet.getData(),128,128);
            System.out.println("Packet content: \nuser: "+user+"\npassword: "+password);
            boolean exists = userExists(user, password);
            byte[] buf = new byte[128];
            if(exists) {
                    System.out.println("User exists");
                    System.arraycopy( accessGranted.getBytes(), 0, buf, 0, Math.min(
accessGranted.getBytes().length, 128 ) );
                    send(new DatagramPacket(buf, 128, clientAddress, 4445));
            } else {
                    System.out.println("User does not exist");
                    System.arraycopy( accessDenied.getBytes(), 0, buf, 0, Math.min(
accessDenied.getBytes().length, 128 ) );
                    send(new DatagramPacket(buf, 128, clientAddress, 4445));
            }

    }

    public boolean userExists(String user, String password) {
            boolean exists = false;
            System.out.println("user: "+user.equals("asdf"));
            System.out.println(" pass: "+password.equals("asdf"));
            try {

                    ResultSet result = dataBase.Select("SELECT ipaddress FROM users
WHERE name='"+user+"' AND pass='"+password+"'");
                    while(result.next()) {
                            exists = true;
                    }
            } catch (SQLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            }
            return exists;
    } 
```

我通过应用程序的界面将 asdf 作为用户和密码引入，所以这些行：

```
System.out.println("user: "+user.equals("asdf"));
System.out.println(" pass: "+password.equals("asdf")); 
```

应该打印 true，但它们打印 false。对此有何建议？谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:07:46.947

您似乎有 128 个字节长的字符串。这些字符串具有普通文本，后跟您可能无法在屏幕上看到的空字节。

我建议您使用 DataOutputStream.writeUTF() 编写字符串，这样它就会发送长度，并且只发送实际在字符串中的字节（没有空填充）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:47:24.693

我终于设法解决了，感谢 Peter Lawrey 的帮助。

您必须插入包含用户字符串长度的第一个字节，并且与密码相同，因此当您分解数据包时，您可以获得用户和密码而无需空填充。这是代码：

作曲：

```
public void packetCompose(String user, String password) {
    try {
        byte[] userBytes = user.getBytes();
        byte[] passwordBytes = password.getBytes();
        byte[] buf = new byte[256];
        //first byte contain user length in bytes
        System.arraycopy( new byte[]{(byte)userBytes.length}    , 0, buf, 0, 1 );
        // Then the user
        System.arraycopy( userBytes    , 0, buf,   1, userBytes.length );
        //a byte containing password length in bytes after user
        System.arraycopy( new byte[]{(byte)passwordBytes.length} ,0 , buf,   userBytes.length +1, 1);
        // password
        System.arraycopy( passwordBytes , 0, buf,   userBytes.length+2, passwordBytes.length );

        DatagramPacket packet = new DatagramPacket(buf, 256, serverAddress, 4445);
        socket.send(packet);
    } catch (SocketException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
} 
```

分解：

```
public void packetDecompose(DatagramPacket packet) {
            // packet has this structure
            // 1 byte                       user length in bytes
            // ? bytes                      user String
            // 1 byte                       password length in byte
            // ? bytes              password String
            clientAddress = packet.getAddress();
            byte[] userLength = new byte[]{packet.getData()[0]};
            String user = new String(packet.getData(), 1, (int)userLength[0]);
            byte[] passwordLength = new byte[]{packet.getData()[(int)userLength[0]+1]};
            String password = new String(packet.getData(), (int)userLength[0]+2, (int)passwordLength[0]);
            System.out.println("Packet content: \nuser: "+user+"\npassword: "+password);
            boolean exists = userExists(user, password);
            byte[] buf = new byte[128];
            if(exists) {
                    System.out.println("User exists");
                    System.arraycopy( accessGranted.getBytes(), 0, buf, 0, Math.min(
accessGranted.getBytes().length, 128 ) );
                    send(new DatagramPacket(buf, 128, clientAddress, 4445));
            } else {
                    System.out.println("User does not exist");
                    System.arraycopy( accessDenied.getBytes(), 0, buf, 0, Math.min(
accessDenied.getBytes().length, 128 ) );
                    send(new DatagramPacket(buf, 128, clientAddress, 4445));
            }

    } 
```

# python - 字典中最大值的键

> ID：13669544
> 
> 赞同：4
> 
> 时间：2012-12-02T13:05:04.203
> 
> 标签：python, python-3.x

这给出了字典中的最大值，但是我如何获得最大值的字典键？

```
max([d[i] for i in d]) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-02T13:06:30.317

使用[`key=`关键字参数`max()`](http://docs.python.org/2/library/functions.html#max)：

```
max(d, key=lambda k: d[k]) 
```

您也可以使用 lambda 代替`operators.itemgetter`：

```
import operators
max(d, key=operators.itemgetter(d)) 
```

或传入`d.get`：

```
max(d, key=d.get) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-18T06:24:50.180

假设在这种情况下使用 == 进行比较是安全的，这可能并不总是正确的，例如使用浮点数。

```
d = { 'a' : 2, 'b' : 2, 'c' : 1}

max_val = max(d.values())
max_keys = [k for k, v in d.items() if v == max_val]

print(max_keys) 
```

给，

```
['a', 'b']

[Program finished] 
```

# android - 我的 Android 应用程序需要永远部署？

> ID：13669550
> 
> 赞同：0
> 
> 时间：2012-12-02T13:06:14.467
> 
> 标签：android

我之前已经构建了几个安卓应用程序。我不是新手，但我真的很难过为什么我正在开发的这个特定应用程序需要几分钟来编译和部署。从哪里开始解决这样的问题！由于整个变更/反馈周期太长，它减慢了我的整个开发工作。我有几个像flurry这样的库（在没有这个问题之前使用过这个），我正在使用actionbar sherlock。就是这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:13:50.700

看起来您的 eclipse/JVM 即将耗尽内存

当这发生在我身上时，我编辑了 eclipse.ini 并更改了它

```
-XX:MaxPermSize=1024m
-Xms512m
-Xmx1024m 
```

还要修改与内存相关的任何其他参数

还要确保您的 apk 大小不是太大。

# php - 在特定键上合并两个多维数组

> ID：13669554
> 
> 赞同：9
> 
> 时间：2012-12-02T13:07:10.270
> 
> 标签：php, multidimensional-array, array-merge

假设我有以下数组：

```
Array
    (
        [0] => Array
            (
                [id] => 5
                [name] => Education
            )

        [1] => Array
            (
                [id] => 4
                [name] => Computers
            )

        [3] => Array
            (
                [id] => 7
                [name] => Science

        [4] => Array
            (
                [id] => 1
                [name] => Sports
            )
    ) 
```

第二个：

```
Array
    (
        [0] => Array
            (
                [id] => 1
                [title] => Sport
            )

        [1] => Array
            (
                [id] => 7
                [title] => Sci
            )

        [3] => Array
            (
                [id] => 4
                [title] => Comp

        [4] => Array
            (
                [id] => 5
                [title] => Edu
            )
    ) 
```

所需的输出是：

```
Array
    (
        [0] => Array
            (
                [id] => 5
                [name] => Education
                [title] => Edu
            )

        [1] => Array
            (
                [id] => 4
                [name] => Computers
                [title] => Comp
            )

        [3] => Array
            (
                [id] => 7
                [name] => Science
                [title] => Sci

        [4] => Array
            (
                [id] => 1
                [name] => Sports
                [title] => Sport
            )
    ) 
```

我设法将这些数组简单地合并：

```
foreach($first as $key => $value){
    $result[$key] = array_merge($first[$key], $second[$key]);
} 
```

但是输出没有正确组合：

```
Array
    (
        [0] => Array
            (
                [id] => 5
                [name] => Education
                [title] => Sport
            )

        [1] => Array
            (
                [id] => 4
                [name] => Computers
                [title] => Sci
            )

        [3] => Array
            (
                [id] => 7
                [name] => Science
                [title] => Comp

        [4] => Array
            (
                [id] => 1
                [name] => Sports
                [title] => Edu
            )
    ) 
```

问题是我想将这些数组合并到同一个`id`. 所需的输出排序应与第一个数组中的相同。

我怎样才能做到这一点？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T13:28:07.410

您可以只做一个嵌套循环并检查`id`值是否匹配，然后添加`title`到`$first`（或`name`到`$second`）

```
foreach($first as $key => $value){
    foreach($second as $value2){
        if($value['id'] === $value2['id']){
            $first[$key]['title'] = $value2['title'];
        }               
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T13:14:52.020

你的代码工作正常。您的期望完全不正确。例如，在一个数组中，第 4 个元素`id`包含 1，但在另一个数组中，第 4 个元素`id`为 5，因此您的*“将这些数组合并到相同的 id”*是没有意义的，因为通过将第 4 个元素合并到一个元素中，您也可以合并它们的子元素，并且因为`id`使用在两个数组中，一旦值必须消失，因为数组中不能有两个相等的键。

**编辑**

您必须手动合并，因为 PHP 函数基于**键**合并，而您希望基于**内容**合并：

```
$result = array();
foreach( $arrayA as $keyA => $valA ) {
  foreach( $arrayB as $keyB => $valB ) {
     if( $valA['id'] == $valB['id'] ) {
       $result[$keyA] = $valA + $valB;

       // or if you do not care output keys, just
       // $result[] = $valA + $valB;
     }
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-03T18:36:16.507

提供在`PHP 5.5+`.

由于两个数组的顺序不相同，首先使用[array_column](http://php.net/manual/en/function.array-column.php)来索引数组`id`。

这将允许您在索引数组上使用[array_replace_recusrive 。](http://php.net/manual/en/function.array-replace-recursive.php)`id`

`array_replace_recursive`将合并与两个数组集的索引关联匹配的数组中的值。

可选地用于`array_values`重新索引数组，删除`id`索引关联。

## 示例[https://3v4l.org/ndv2j](https://3v4l.org/ndv2j)

```
$first = array_column($first, null, 'id');
$second = array_column($second, null, 'id');
$result = array_values(array_replace_recursive($first, $second)); 
```

**结果**

```
Array
(
    [0] => Array
        (
            [id] => 5
            [name] => Education
            [title] => Edu
        )

    [1] => Array
        (
            [id] => 4
            [name] => Computers
            [title] => Comp
        )

    [2] => Array
        (
            [id] => 7
            [name] => Science
            [title] => Sci
        )

    [3] => Array
        (
            [id] => 1
            [name] => Sports
            [title] => Sport
        )

) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-24T08:45:58.587

不要在foreach中使用foreach，当数组这么大时可能会太慢。

```
$idArray = array_column($secondArray,'title','id');
foreach($firstArray as $key => $val){
  $firstArray[$key]['title'] = (isset($idArray[$val['id']])) ? $idArray[$val['id']] : 'some title';
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-12T06:16:53.720

这可以使用 3 参数形式轻松完成，通过值[`array_column`](https://www.php.net/manual/en/function.array-column.php)重新索引您的`second`数组`id`，然后遍历`first`数组，合并匹配`second`值的内容（它存在的地方）：

```
$second = array_column($second, null, 'id');
foreach ($first as &$subject) {
    $subject = array_merge($subject, $second[$subject['id']] ?? []);
} 
```

输出：

```
Array
(
    [0] => Array
        (
            [id] => 5
            [name] => Education
            [title] => Edu
        )
    [1] => Array
        (
            [id] => 4
            [name] => Computers
            [title] => Comp
        )
    [3] => Array
        (
            [id] => 7
            [name] => Science
            [title] => Sci
        )
    [4] => Array
        (
            [id] => 1
            [name] => Sports
            [title] => Sport
        )
) 
```

[3v4l.org 上的演示](https://3v4l.org/9BsEc)

这比 Will B. 的不重新索引`first`数组的答案具有优势。由于只有一次调用`array_column`而没有调用`array_values`.

**更新**

[这段代码实际上可以通过使用数组联合运算符](https://www.php.net/manual/en/language.operators.array.php)( )加快速度`+`（感谢@mickmackusa）：

```
$second = array_column($second, null, 'id');
foreach ($first as &$subject) {
    $subject += $second[$subject['id']] ?? [];
} 
```

这段代码的输出与上面相同，但它再次运行速度提高了大约 10%。

[3v4l.org 上的演示](https://3v4l.org/Hbuc0)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-02T14:07:06.293

按您的“id”字段对两个数组进行排序，然后让 php 使用 array_replace_recursive 进行合并。

```
function cmp($a, $b) {
  return ((int) $a['id'] < (int) $b['id']) ? -1 : 1;
}

usort($array1, 'cmp');
usort($array2, 'cmp');

$result = array_replace_recursive($array1, $array2); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-15T13:10:42.077

确保项目的顺序相同，然后：

```
$items = array_map(function($itemFirstArray, $itemSecondArray) {
  return array_merge($itemFirstArray, $itemSecondArray);
}, $firstArray, $secondArray); 
```

# php - 在本地查看动态 php 站点 - 来自 php 新手

> ID：13669556
> 
> 赞同：0
> 
> 时间：2012-12-02T13:07:24.610
> 
> 标签：php

在这里完成 PHP 新手问题，

我正在尝试在本地加载动态 PHP 站点，但出现错误。我正在使用 EasyPhp 12.1。错误信息是：

```
Warning: mysqli::mysqli(): (HY000/1045): Access denied for user 'User'@'localhost' (using password: YES) in C:\Program Files (x86)\EasyPHP-12.1\www\site 2\includes\includes.php on line 3
Failed to connect to mysql database. 
```

我应该补充一点，我得到了访问该站点的说明，这些说明是：

1.  导入数据库（我该怎么做？到哪里？）
2.  编辑包含/config.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:10:08.880

好吧，错误信息告诉你什么？

您的脚本没有权限或能力来访问它打算访问的数据库服务器。这与php或页面没有直接关系，这是您如何设置mysql服务器的问题。您*确实*配置了本地数据库服务器，不是吗？那不会发生我的魔法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:20:39.740

虽然我不使用 EasyPHP 进行本地开发（我使用[Xampp](http://www.apachefriends.org/en/xampp.html)），但 EasyPHP 似乎是一个非常相似的包。如果您尝试查看的本地站点不包含用于通过指向特定数据库实例来设置表的 PHP 驱动的安装脚本，那么您将不得不使用 SQL 界面手动加载表。如果您尚未设置数据库，则还必须执行此操作。此外，您可能需要配置用户名和密码访问权限。所有这些都可以在 EasyPHP 打包的 PhpMyAdmin 界面中完成。

为了达到它，首先我会看一下 EasyPHP 的管理界面。可能有一个链接或其他内容可以将您带到 MySQL 管理工具。在这里，您可以管理和配置所有 MySQL 数据库，包括创建本地站点将使用的数据库表空间。

创建数据库后，为了导入数据库，这实际上取决于它是如何提供给您的。如果它是一个`.SQL`文件，您可能只需在您创建的数据库实例上的 PhpMyAdmin 界面中运行它。

这一切都可以使用其他 SQL 工具（例如命令行）来完成，但如果您是使用数据库的新手，PhpMyAdmin 可能是一个不错的起点。

最后，在您的配置中，您可能必须指定：

*   主机名（例如本地主机）
*   端口（例如 3306）
*   数据库名称（您给实例起的任何名称）
*   用户名（例如根）
*   密码（例如根）

以便它可以正确连接到您的数据库。

如有疑问，请查阅 EasyPHP（和 MySQL）的文档和设置说明。此外，如果您是使用 PHP 和数据库的新手，您还可以尝试在本地设置[WordPress](http://wordpress.org/)之类的东西或其他一些编写精美的 PHP 软件，以便您对初始设置过程更加熟悉数据库等

# r - 使用使用多项挂起和错误创建的模型进行预测

> ID：13669558
> 
> 赞同：1
> 
> 时间：2012-12-02T13:07:39.177
> 
> 标签：r, nnet

我正在尝试使用该`nnet`库从我的训练数据中创建一个多项逻辑回归模型，以查看是否可以使用它来预测我的测试数据。

我使用此脚本在 R 中设置了所有内容：

```
library(nnet)

folder <- "C:/***/"
trainingfile <- "training-set.txt"
testfile <- "test-set.txt"

train <- read.table(paste(folder, trainingfile, sep=''), sep=",", header=FALSE)
train.classes <- t(train[1:1])
train.data <- train[2:16]

test <- read.table(paste(folder, testfile, sep=''), sep=",", header=FALSE)
test.classes <- t(test[1:1])
test.data <- test[2:16]

train.model <- multinom(V1 ~ ., train, maxit=450) #converges after roughly 430 iterations 
```

这一切都很好，功能`multinom`报告收敛。

要使用模型来预测对我使用的测试数据进行分类：

```
predictions <- predict(train.model, test.data) 
```

但是，我收到了错误`Error in eval(expr, envir, enclos) : object 'V17' not found`。但是，当我检查时，`train.model`我发现确实有一个对象“V17”

```
> train.model
Call:
multinom(formula = V1 ~ ., data = train, maxit = 450)

Coefficients:
  (Intercept)        V2 
B -12.9514837 1.0668464 
C -48.1154774 1.6160071 
D  -2.2901219 1.0062945 
E -39.4371326 0.6848848 
F -20.6759707 0.8613838 
G -21.4471217 1.2858480 
H -17.4302527 0.8102932 
I  -4.7391825 1.3124087 
J -12.3513130 1.1404751 
K -13.9557738 0.7574471 
L  -0.4915034 0.7191369 
M -14.0855382 0.8888810 
N  -0.4372225 0.6041747 
O -18.2596753 1.2708861 
P  -9.8504326 1.2672870 
Q -20.9940977 1.8104502 
R  -5.8030089 0.8677690 
S -12.9944084 0.8097735 
T -32.5636344 1.8977861 
U  -9.1752184 1.6059663 
V -13.5695897 1.4547335 
W  -6.2590220 1.1292715 
X  -4.5939135 0.7603754 
Y -15.6763068 1.6498374 
Z -37.1840564 0.7382329 

*SNIP*

         V17
  1.63319426
  1.93093207
  0.80392847
  1.79189803
  1.32248565
  1.72440154
  1.22022835
  1.03014847
  0.20977345
  2.40335443
  1.17253978
  0.65072776
  0.46675729
  1.16579165
  1.50787334
  1.41267773
  1.71666099
  0.72543894
  0.64857852
  0.32401569
  1.33290027
  0.83846524
  1.02863203
 -0.05005955
  0.13792242

Residual Deviance: 26196.1 
AIC: 27046.1 
```

这很奇怪，我现在不知道为什么会发生错误。无论如何，为了获得更多数据，我尝试调用`summary(train.model)`，但这只会让 R 永远挂起。我已经尝试了 R 2.15.2 的 32b 和 64b 版本（最新的稳定版本），结果是一样的。有没有人知道我如何解决错误/挂起以及如何使用创建的模型正确预测`multinom`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T22:09:26.520

总结以上评论：

确保满足以下条件：

```
all(names(train)[-1] %in% names(test.data)) # [-1] to ignore V1 
```

否则，`predict`会抛出错误。

并增加一点价值：根据我的经验，`summary.multinom`花费这么长时间的原因`vcov.multinom`是正在调用并且正在计算 Hessian。如果您要多次调用`summary(train.model)`，则在调用中计算 Hessian 是有意义的`multinom`（这可能仍需要一段时间）：

```
train.model <- multinom(V1 ~ ., train, maxit=450, Hess = TRUE) 
```

# c# - WPF 使用 LINQ to Entities

> ID：13669566
> 
> 赞同：1
> 
> 时间：2012-12-02T13:08:49.053
> 
> 标签：c#, .net, wpf, linq, gridview

我认为我在理解一些基本概念时遇到了问题......我正在创建一个用于管理复杂数据库的项目，（我正在使用 linq 到我在 ms-sql 2012 和 WPF 中的数据库的实体）我有2个主要问题：

我想创建一个通用视图来编辑（删除更新和插入）数据库中的大量表，我手动创建表列表没有问题，但之后我如何以通用方式管理它？linq to entity 不允许执行以下操作：

```
string tableName = listbox.selectedItem.value;
var a = from p in db.tables[tableName] select p; 
```

即使我为每个表手动完成所有这些，我如何创建一个编辑信息的 UI？我需要动态创建一个表单/视图/用户控件进行编辑，其中将包含每列的文本框和日期时间选择器等项目...但我无法为表格进行通用选择...

我遇到的另一个问题是操作数据，假设我在数据库中有一个 TASK 表

```
var tsks = from p in TASKs select new {p.task_id, p.task_description, p.task_date} 
```

我想将它全部加载到gridview，但不是task_date列，我需要从函数中对其进行操作，例如：

```
02/12/2012 will show "From Today"
30/11/2012 will show "From 2 days ago" 
```

而且我只是不知道如何将这种函数连接到数据绑定我尝试过创建 sql 函数我尝试过在代码中调用函数并尝试为实体创建扩展函数但总是卡住并失败。

为了清楚起见，我在 .net 技术方面有一些很好的经验，但 WPF 和 LINQ 对我来说是新的，我可以在没有 linq 的情况下直接联系 SQL DB，轻松地在 asp.net 或 windows 窗体应用程序中创建以上所有内容，因此我理解我对一些基础知识的理解有疑问，希望得到我的 2 个问题的答案，并且非常乐意获得相关教程的指导

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:42:18.653

我将尝试回答第二个问题。我建议您先阅读一些关于 WPF 中的绑定和 MVVM 设计模式的内容，它将帮助您了解如何使用 WPF 的数据网格，它与 win 表单中的工作方式不同。

为了回答这个问题，将日期属性绑定到列后，您可以轻松创建一个值转换器，请参见此示例： [http](http://wpftutorial.net/ValueConverters.html) ://wpftutorial.net/ValueConverters.html 。

在你的情况下，你需要一个 DateTime 来字符串转换

# java - 无需获取/设置即可访问私有财产

> ID：13669567
> 
> 赞同：6
> 
> 时间：2012-12-02T13:08:51.687
> 
> 标签：java, properties, encapsulation, private-members

> **可能重复：**
> [Java 中没有属性语法](https://stackoverflow.com/questions/508735/absence-of-property-syntax-in-java)

请看以下情况：

```
class Test extends Object {
    private int x;
    public getX() {return x;}
    public setX(int _x) {x = _x;}
} 
```

如您所见，没有什么特别的。但是，我想知道是否有可能以使用该类的人不需要使用 getX() 的方式保留“私有 x”，换句话说，如果我可以映射一些自动调用的变量获取和设置。

类似于 Delphi 中的“属性”。它可以避免在复杂表达式中使用 setX() 和 getX() ，并且可以更容易理解谁在读取表达式。

例如，假设可以使用另一个标识符 xx 和 yy 来代替 get 和 set 方法。看：

```
import Test;
public static void main(String[] args) {
    new Test() {
        setX(10);
        setY(20);
        int z = getX() * getY() + (getY() * getY());
        System.out.println("%d", z);
    }
    // would be like this
    new Test() {
        xx = 10;
        yy = 20;
        int z = xx * yy + (yy * yy); // xx would access the method getX() automatically
        System.out.println("%d", z);
    }
} 
```

我希望你们明白我的意思。

编辑：

卷饼！这是很多答案！非常感谢大家。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-02T13:32:27.933

**您可以**使用反射访问它们，

```
Test test = new Test()
Field field = test.getClass().getDeclaredField("x");
field.setAccessible(true);

System.out.println(field.getName() + "="+field.get(test )); 
```

但是，你**不应该这样做**

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-02T13:12:08.383

你不能。

这就是我们在“封装”中谈论的原因。仅当您将私有更改或修改为其他内容或使用反射（会使它变得更加复杂）时。

我认为使用著名的 getter 和 setter 没有任何问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-02T13:34:48.363

我认为您正在尝试像 C# 属性一样将其理想化，如下代码，对吗？：

```
public sealed class Example {
    private int _code;
    private string _name;

    public Example(int code) {
        this._code = code;
    }

    public int Code {
        get {return this._code;}
        set {this._code = value;}
    }

    public string Name {
        set {this._name = value;}
        get {return this._name;}
    }

    public override string ToString() {
        return this._code.ToString();
    }
} 
```

到目前为止，在 Java 中，我相信我们还没有这样的手段，但我也认为使用 getter 和 setter 没有任何问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-02T13:22:23.990

最多您可以切换`private`with`protected`以便任何继承它都可以直接访问它。

但是，是的，你真的不能。此属性与方法相关联。它必须在 Java 中使用括号 ()。在 Java 中还没有办法做到这一点，它必须是某种指向方法的指针。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-02T13:31:14.527

拥有 getter 和 setter 已经在精神上打破了封装，所以不要犹豫使用公共领域。“总有一天你会想要在你的 setter 中得到验证，你会感谢自己做出有远见的决定来拥有它们”这个论点表面上看起来似乎是合理的，但实际上这只是一个孩子的故事。在我的职业生涯中，我写了几千个二传手；以后再也**不需要**添加验证。如果有验证，它总是在外面发生。这将验证与数据分离，并为每个用例允许不同的规则。

另一个想法是保留方法，但使名称真正简短：`int x()`和`void x(int x)`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-02T13:22:54.250

想想将来您将不允许为将使用您的变量 x 的 x 用户输入负值。在这种情况下，您必须通过验证更改 setX，并且已经使用该方法的人不会受到影响，这就是封装。因此，强烈建议您在进行私有声明时使用公共 getter 和 setter。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-02T13:32:19.597

我将尝试解释它们......

`class Test extends Object`

首先你**不必**使用`Test extends Object`. 每当你`don't or do explicitly extends your class to any other class, it will always extend the Object Class, directly or indirectly.`

**-**好的，现在你的问题，你在这里看到的被称为`Encapsulation`最简单和最基本的形式。在`Java`你不能做你在做的方式`Delphi or .Net`。

# ruby - 如何知道一个类的继承线在ruby中是什么

> ID：13669573
> 
> 赞同：1
> 
> 时间：2012-12-02T13:09:19.817
> 
> 标签：ruby, inheritance

如果`class C < B`和`class B < A`

是否有命令知道 C 继承了 B 继承了 A？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T13:11:21.720

你在找这个吗？

```
class A; end
class B < A; end
class C < B; end

C.ancestors # => [C, B, A, Object, Kernel, BasicObject] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T13:10:15.043

[类.超类](http://www.ruby-doc.org/core-1.9.3/Class.html#method-i-superclass)

```
class A; end
class B < A; end
class C < B; end

C.superclass            # => B
C.superclass.superclass # => A 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T13:31:37.250

你可以`is_a?`用来测试一个对象是否继承自一个类。

```
class A
end

class B < A
end

b = B.new
b.is_a? B   # true
b.is_a? A   # true 
```

# typeerror - 目的 has no method 'methodeX' i get an error in chrome: Uncaught TypeError: Object s1A has no method 'applyToSelection' in Firefox(firebug) i get this: TypeError: val.applyToSelection is not a function 问问题 问问题 2012-12-02T13:10:50.160 257 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. i get an error in chrome: Uncaught TypeError: Object s1A has no method 'applyToSelection' in Firefox(firebug) i get this: TypeError: val.applyToSelection is not a function i use the rangy-core and the rangy-cssclassappliere my Code:   if id do this:   it works fine. But i need it for an option field and i want to get the value I suggest storing appliers in an object where each property name corresponds to an input value: window.onload = function() { var appliers = {}; rangy.init(); appliers.s1A = rangy.createCssClassApplier("css_1", true); }; function dosome(el) { var val = el.value; appliers[val].applyToSelection(); } typeerrorrangy 4 1 回答 1 This answer is useful 0 我建议将应用程序存储在一个对象中，其中每个属性名称对应一个输入值： window.onload = function() { var appliers = {}; rangy.init(); appliers.s1A = rangy.createCssClassApplier("css_1", true); }; function dosome(el) { var val = el.value; appliers[val].applyToSelection(); } 于 2012-12-02T22:43:21.467 回答 Related 1 ios - 在iOS中，是否可以获取当前音轨的波形或频谱数据？例如：均衡器 3 mysql - 我需要更快的 SQL 查询来查找过期的订阅者 1 iphone - 如何创建自定义索引 1 ios - 自定义 TCP 服务与 HTTP IOS 1 parsing - 如何从语法生成代码示例？ 1 database - 创建游标，是否正在复制数据？ 3 java - 如何将字体颜色应用于使用 DefaultTableModel 的 JTable 上的特定单元格 1 facebook - 使用 XFBML 邀请时间轴 1 c# - 颜色数据网格视图的问题 3 asp.net-mvc-3 - 存储库接口中的单元测试功能 - ASP.net MVC3 & Moq Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13669579
> 
> 赞同：0
> 
> 时间：
> 
> 标签：typeerror, rangy

i get an error in chrome:

Uncaught TypeError: Object s1A has no method 'applyToSelection'

in Firefox(firebug) i get this:

TypeError: val.applyToSelection is not a function

i use the rangy-core and the rangy-cssclassappliere

my Code:

```
<script type="text/javascript"> 
    window.onload = function() {    
    rangy.init();
      s1A = rangy.createCssClassApplier("css_1", true); 
    };

   //this is the Problem.
   function dosome (el) {
      var val = el.value;
      val.applyToSelection();
   }
</script>

<body>
  <button value="s1A" onclick="dosome(this);">test</button>
</body> 
```

if id do this:

```
<script type="text/javascript"> 
    window.onload = function() {    
    rangy.init();
      s1A = rangy.createCssClassApplier("css_1", true); 
    };
   function s1() {
      s1A.applyToSelection();
   }
</script>

<body>
  <button onclick="s1();">test</button>
</body> 
```

it works fine. But i need it for an option field and i want to get the value

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:43:21.467

我建议将应用程序存储在一个对象中，其中每个属性名称对应一个输入值：

```
window.onload = function() {
    var appliers = {};
    rangy.init();
    appliers.s1A = rangy.createCssClassApplier("css_1", true); 
};

function dosome(el) {
    var val = el.value;
    appliers[val].applyToSelection();
} 
```

# javascript - 如何在js中删除touchevent？

> ID：13669581
> 
> 赞同：2
> 
> 时间：2012-12-02T13:11:19.417
> 
> 标签：javascript, dom-events, touch-event

我试图在第一次触摸后删除 touchevent。
我尝试了下一个代码，但它不起作用：

```
ourCanvas.addEventListener("touchstart", function(){
    evt.preventDefault();
    startGame();
    ourGameCanvas.removeEventListener("touchstart");
}, false);` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T13:13:04.067

您需要将对原始函数的引用传递给[`removeEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.removeEventListener)：

```
ourCanvas.addEventListener("touchstart", function **funcref**(**evt**) {
    evt.preventDefault();
    startGame();
    **ourCanvas**.removeEventListener("touchstart"**, funcref, false**);
}, false);
```

在前面的代码中，我将匿名函数表达式转换为命名函数表达式 ( `funcref`)，以便稍后在函数中使用它。

我重命名`ourGameCanvas`为`ourCanvas`. *仅当元素、事件名称、函数引用和*useCapture 标志与所使用的相同时，才能删除事件侦听器[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T13:13:47.483

该`removeEventListener`方法需要与该方法相同的参数`addEventListener`......换句话说：

```
document.body.addEventListener('touchstart',function touchStartHandler(e)
{//use named function
    document.body.removeEventListener('touchstart',touchStartHandler, flase);
},false); 
```

`attachEvent`and也是如此`detachEvent`（如果您编码也支持 IE < 9）

# networking - 如何获取本地网络中所有有效 IP 地址的列表？

> ID：13669585
> 
> 赞同：332
> 
> 时间：2012-12-02T13:11:50.427
> 
> 标签：networking, ip

有没有办法获取本地网络中所有有效 IP 地址的列表？

我的意思是每个用户在网络中使用的所有 IP 地址。

* * *

## 回答 #1

> 赞同：461
> 
> 时间：2012-12-02T13:46:04.290

安装**nmap**，

```
sudo apt-get install nmap 
```

然后

```
nmap -sP 192.168.1.* 
```

或更常见的

```
nmap -sn 192.168.1.0/24 
```

将扫描整个 .1 到 .254 范围

这会在整个子网中进行简单的 ping 扫描，以查看哪些主机在线。

* * *

## 回答 #2

> 赞同：403
> 
> 时间：2013-03-12T00:19:07.157

尝试以下步骤：

1.  在命令提示符下键入`ipconfig`（或`ifconfig`在 Linux 上）。这将为您提供您自己机器的 IP 地址。例如，您机器的 IP 地址是 192.168.1.6。所以你的广播IP地址是192.168.1.255。
2.  Ping 你的广播 IP 地址（在 Linux 上`ping 192.168.1.255`可能需要）`-b`
3.  现在键入`arp -a`. 您将获得网段上所有 IP 地址的列表。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-12-02T22:51:14.560

如果您想查看特定子网上正在使用哪些 IP 地址，那么有几个不同的 IP 地址管理器。

试试[Angry IP Scanner](http://www.angryip.org/)或[Solarwinds](http://www.solarwinds.com/ip-address-manager.aspx)或[Advanced IP Scanner](http://www.advanced-ip-scanner.com)

# java - Android源代码如何缩小和混淆？

> ID：13669592
> 
> 赞同：10
> 
> 时间：2012-12-02T13:12:36.487
> 
> 标签：java, android, minify

我已经完成了我的应用程序，有什么想法可以缩小 Android 和 Java 代码吗？它可以节省apk文件大小并提高性能吗？比较 unminify 源代码。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-12-10T10:06:47.663

在您的构建类型中启用 shrinkResources。请注意，它需要启用缩小。在您的 Gradle 文件中：

```
android {
    buildTypes {
        release {
            minifyEnabled true
            shrinkResources true
        }
    }
} 
```

接受的答案现在已经过时，所以如果其他人偶然发现这个问题，我会添加这个答案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-02T13:16:03.823

您可以为此使用 ProGuard。但是请注意，当涉及到崩溃报告等时，您的代码将被混淆，因此您需要保留混淆映射以便能够检索版本之间的堆栈跟踪等。但是，它确实可以更好地保护您免于对 .APK 进行逆向工程。

更多信息@Android 开发者：http: [//developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-17T13:00:40.300

分为三个部分

1.  缩小启用
2.  使用Proguard
3.  收缩资源

如果要删除未使用的编码部分，则可以使用**`shrinkResources true`**

如果您不想使用默认文件，如`dmp.txt`, `mapping.txt`,等`seeds.txt`，`usage.txt`那么您应该使用**`useProguard false`**

如果你想缩小你的代码和资源，那么你必须使用**`minifyEnabled true`**

有关更多详细信息，[请参阅此链接](https://developer.android.com/studio/build/shrink-code.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-02T13:15:34.453

只需启用[ProGuard](http://developer.android.com/tools/help/proguard.html)，它会缩小和混淆您的应用程序。它包含在 Android 开发者工具中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-02T13:16:28.930

[缩小](http://en.wikipedia.org/wiki/Minification_%28programming%29)在非脚本语言中几乎没有意义。您可以做的是使用 ProGuard 即删除未使用的代码部分，但由于 Android 应用程序中的主要臃肿通常是资源（可绘制对象），请确保您没有太多的资源或太大的大小。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-25T16:07:39.003

这对我有用，我禁用了即时运行

```
buildTypes {
        release {
            minifyEnabled true
            zipAlignEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'

        } 
```

在 proguard-rules.pro

```
-ignorewarnings
-keep class * {
    public private *;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-14T08:58:32.007

如果您不想优化代码，请使用 `proguard-android.txt`配置文件而不是`proguard-android-optimize.txt`. 如果要优化代码注意优化有一定的风险，比如并不是所有的优化都可以在所有版本的dalvik VM上运行良好。

```
buildTypes {
        release {
            minifyEnabled true
            shrinkResources true
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    } 
```

# java - 通过 HttpClient 下载不完美

> ID：13669594
> 
> 赞同：0
> 
> 时间：2012-12-02T13:12:49.613
> 
> 标签：java, android, download, apache-commons-httpclient

在 Android 上使用 HttpClient 下载图像时遇到问题。似乎当图像像“可下载文件”一样从服务器推送时它不起作用。另一方面，在浏览器下载中显示的图像没有任何问题。它看起来像提供的文件的标题和 mimetype 问题，或者类似的东西..我认为这是在服务器上启用 gzip 的问题，但经过几次实验后它肯定看起来不是这样。有人知道如何解决吗？谢谢

这是我的代码的简短片段

```
HttpClient httpClient = new DefaultHttpClient();
HttpResponse response = httpClient.execute(request);
HttpEntity entity = response.getEntity();
inputStream = entity.getContent();
Drawable image = Drawable.createFromStream(is, "src"); //the image is null in certain scenarios 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:39:14.090

`Drawable.createFromStream()`并不是真的要通过远程 HTTP 连接构建图像。实际上，如果您查看此方法的源代码，它最终会调用`BitmapFactory.decodeResourceStream()`，它用于从应用程序的内部资源创建图像。

我建议您尝试`BitmapFactory`直接使用方法来解码来自网络的图像。一些选项可能是`decodeStream()`，但有时网络可能会出现问题，保持缓冲区足够满以使用此方法。您还可以自己将流中的字节读入 a`byte[]`并使用`decodeByteArray()`. 使用这种方法可能会有更好的运气。

# c - 杀死僵尸进程，知道linux C中的PID

> ID：13669597
> 
> 赞同：0
> 
> 时间：2012-12-02T13:13:23.550
> 
> 标签：c, linux, process, zombie-process

我必须在 linux C 中杀死/清理一个僵尸进程。我所知道的只是僵尸的 PID。

我在一个循环中创建了一些僵尸进程：

```
int i = 0;
for (i; i<5; i++)
{
  system("(: & exec sleep 30) &"); // create zombie for 30 sec
} 
```

我可以使用以下方法获取他们的 PID 号：

```
system("ps aux | awk '{ print $8 " " $2 }' | grep -w Z"); 
```

但是如何仅使用 PID 杀死/清理它们？我将 PID 保存在变量和标准信号中：

```
kill(PID,9) 
```

甚至不起作用，因为该过程已经死了。还有其他方法可以实现吗？请不要问我为什么要制造僵尸来杀死他们。事实并非如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T13:18:13.980

“僵尸”是一个已经死亡的进程。你不能再杀了它。

“僵尸”实际上只是进程表中的一个条目，其中包含进程的退出状态。为了摆脱它，父进程必须调用`wait()`以检索该信息。或者，父进程可以自行退出；然后孩子成为所谓的“孤儿”并被`init`ID 为 1 的进程收养。`init`自动收割所有死去的孩子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T21:01:07.907

这是我创建的用于杀死所有僵尸进程的脚本。它使用 GDB 调试器附加到父进程并发送一个 waitpid 来杀死僵尸进程。这将使父母活着，只会杀死僵尸。

需要安装 GDB 调试器，并且您需要以附加到进程的权限登录。这已经在 Centos 6.3 上测试过了

```
#!/bin/bash
##################################################################
# Script: Zombie Slayer
# Author: Mitch Milner
# Date:   03/13/2013 ---> A good day to slay zombies
#
# Requirements: yum install gdb
#               permissions to attach to the parent process
#
# This script works by using a debugger to
# attach to the parent process and then issuing
# a waitpid to the dead zombie. This will not kill
# the living parent process.
##################################################################

clear
# Wait for user input to proceed, give user a chance to cancel script
echo "***********************************************************"
echo -e "This script will terminate all zombie process."
echo -e "Press [ENTER] to continue or [CTRL] + C to cancel:"
echo "***********************************************************"
read cmd_string
echo -e "\n"

# initialize variables
intcount=0
lastparentid=0

# remove old gdb command file
rm -f /tmp/zombie_slayer.txt

# create the gdb command file
echo "***********************************************************"
echo "Creating command file..."
echo "***********************************************************"
ps -e -o ppid,pid,stat,command | grep Z | sort | while read LINE; do
  intcount=$((intcount+1))
  parentid=`echo $LINE | awk '{print $1}'`
  zombieid=`echo $LINE | awk '{print $2}'`
  verifyzombie=`echo $LINE | awk '{print $3}'`

  # make sure this is a zombie file and we are not getting a Z from
  # the command field of the ps -e -o ppid,pid,stat,command
  if [ "$verifyzombie" == "Z" ]
  then
    if [ "$parentid" != "$lastparentid" ]
    then
      if [ "$lastparentid" != "0" ]
      then
        echo "detach" >> /tmp/zombie_slayer.txt
      fi
    echo "attach $parentid" >> /tmp/zombie_slayer.txt
    fi
    echo "call waitpid ($zombieid,0,0)" >> /tmp/zombie_slayer.txt
    echo "Logging: Parent: $parentid  Zombie: $zombieid"
    lastparentid=$parentid
  fi
done
if [ "$lastparentid" != "0" ]
then
  echo "detach" >> /tmp/zombie_slayer.txt
fi

# Slay the zombies with gdb and the created command file
echo -e "\n\n"
echo "***********************************************************"
echo "Slaying zombie processes..."
echo "***********************************************************"
gdb -batch -x /tmp/zombie_slayer.txt
echo -e "\n\n"
echo "***********************************************************"
echo "Script complete."
echo "***********************************************************" 
```

享受。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T13:19:10.997

你是对的，你不能杀死僵尸，因为它们已经死了。

他们是僵尸的原因是因为进程已经完成，但父级没有收获退出代码。

最终，`init`当僵尸变成孤儿时，应该为你做这件事。一个真正的僵尸，一个仍然有父进程但该父进程尚未获取退出代码的进程，将持续到以下任一情况：

*   父母*确实*收获了退出代码；或者
*   当父母退出时，它成为孤儿。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T13:19:32.783

你在做什么似乎很扭曲。我将假设您已尝试创建一个最小的测试用例来显示更广泛的问题并无论如何都要回答 - 当羽化进程未清理（调用 waitpid 和朋友）其子进程资源时会创建僵尸。

因此，要么正确地编写父进程代码以响应 SIGCHLD 并调用 waitpid，或者，如果您无法控制父进程，正如我猜的那样，杀死父进程（向父进程发送 SIGTERM）。

后者起作用的原因是所有没有父亲的孩子都被重新设置为 init (PID 1)，它将执行所需的清理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T13:23:21.833

您可以尝试使用 SIGCHLD 信号。例如在 C 中：

```
signal(SIGCHLD, handleSIGCHLD);

  void handleSIGCHLD(int signum) {
  int stat;

 /*Kills all the zombie processes*/
  while(waitpid(-1, &stat, WNOHANG) > 0);
} 
```

# css - 是否可以使用转换在两个 css 类之间创建循环？

> ID：13669598
> 
> 赞同：3
> 
> 时间：2012-12-02T13:13:27.670
> 
> 标签：css, css-transitions, css-animations

我想知道是否有可能在一个元素上的两个 CSS 类之间纯粹用 CSS（显然是 3 个）创建一个循环。

例如，想象一下我有一个错误框，我希望它`background-color`的动画从`red`to 开始，`yellow`而它从to`font-size`增加，然后又减少回，并不断地做这个动画。`18px``24px``18px`

```
.state-red {
   background-color: red;
   color: yellow;
   font-size: 18px;
}

.state-yellow {
   background-color: yellow;
   color: red;
   font-size: 24px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T13:19:03.860

您可以使用[CSS3 动画^(MDN)](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_animations)来实现（*另请参阅[W3C 规范](http://www.w3.org/TR/css3-animations/)*）

```
.state-loop{
    animation-duration:2s;
    animation-name: sizeandcolor;
    animation-iteration-count: infinite;  
    animation-direction: alternate;
}

@keyframes sizeandcolor{    
  from{
   background-color: red;
   color: yellow;
   font-size: 18px;
  }

  to{
   background-color: yellow;
   color: red;
   font-size: 24px;
  }

} 
```

**演示在** [http://jsfiddle.net/gaby/ZtQRG/](http://jsfiddle.net/gaby/ZtQRG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:28:19.633

Gaby's answer is correct. You need and animation + keyframes because you can loop them (unlike using only a transition--you can't loop a transition).

`.state-loop`'s animation properties could be shortened to:

```
.state-loop {
    animation: sizeandcolor 2s infinite alternate;
} 
```

# c# - PhoneGap发送数据C#

> ID：13669603
> 
> 赞同：1
> 
> 时间：2012-12-02T13:14:46.767
> 
> 标签：c#, html, cordova

有一个项目移动应用程序，该应用程序与现有编写的 C# 服务器进行通信。如何以有效的方式与 PhoneGap 和 C# 服务器应用程序进行通信。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:18:08.463

我推荐 ASP.NET MVC 并返回 JSON 数据。

好的示例：[http ://www.hanselman.com/blog/OneASPNETMakingJSONWebAPIsWithASPNETMVC4BetaAndASPNETWebAPI.aspx](http://www.hanselman.com/blog/OneASPNETMakingJSONWebAPIsWithASPNETMVC4BetaAndASPNETWebAPI.aspx)

# android - Android 客户端/服务器模型

> ID：13669604
> 
> 赞同：0
> 
> 时间：2012-12-02T13:14:47.270
> 
> 标签：android, database, web-services, axis2, android-ksoap2

我有一个移动应用高级项目，名为“通往 Atilim 的道路上的交通”。在此应用程序中，用户可以创建或更新交通事件，例如车祸、正在建设的道路。应用程序将获取用户的 GPS 坐标并在谷歌地图上插入事件。其他用户可以通过谷歌地图看到这个事件。

问题是 android SQL lite 不是基于服务器/客户端模型，我认为，我需要这个应用程序的模型。这是我们的应用程序 ER 图 [![](../Images/9c2d4d70ce6f5bbb77ada97d24e75403.png)](https://i.stack.imgur.com/Sx5II.png)

我的问题是如何在 android 应用程序中实现客户端/服务器模型？我能不能？如果我无法实现，我是否必须通过 SQL lite sycn oracle 数据库服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:06:15.820

我之所以回答我的问题，是因为面对 android 数据库连接的人。我一直在研究这个主题 6 天，我发现最好的方法是使用网络服务。我选择了带有 JAVA axis2 的 Web 服务。

[这是一个显示如何实现 Web 服务的链接](http://www.youtube.com/watch?v=zn8vLBOEhic)

[这里是android android web服务客户端教程](http://jatin4rise.wordpress.com/2010/10/03/webservicecallfromandroid/)

我使用本教程成功地使用 java 实现的 web 服务做了 android web 服务客户端。但是我现在需要 MS 数据库 2008 实现，如果有人知道我会对此表示赞赏。谢谢

# r - 将三列转换为 Unix 时间 R

> ID：13669611
> 
> 赞同：2
> 
> 时间：2012-12-02T13:15:31.573
> 
> 标签：r, date

我有一个数据集，其中日期在三列中给出：年、月、日。我想将其转换为标准的 R 日期格式（即自 1970 年 1 月 1 日以来的天数）。现在我有这个：

```
date <- as.Date(paste(year,month,day, sep="-")) 
```

但是我想知道这是否是正确的方法/是否有更有效的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T13:40:25.290

该`as.Date`函数将日期表示为自 1970 年 1 月 1 日以来的*天*数。Unix 时间是指自 1970 年 1 月 1 日以来的*秒数*。您需要使用该`as.POSIXct`函数，然后将其转换为数字对象：

```
as.double(as.Date(paste(year, month, day, sep="-"))) # days since 1970-1-1
as.double(as.POSIXct(as.Date(paste(year, month, day, sep="-")))) # seconds since 1970-1-1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T14:50:21.200

这几乎是执行此操作的标准方法。实际上，如果您查看代码，`ISOdatetime`您会发现它使用了类似的算法。

# rotation - 在 VPython 中，当我旋转时，我总是在 0,0,0 左右旋转，我该如何更改？

> ID：13669614
> 
> 赞同：1
> 
> 时间：2012-12-02T13:15:40.293
> 
> 标签：rotation, vpython

在 VPython 中，当我旋转视图时，我总是围绕原点 (0,0,0) 旋转，但我正在做一些需要能够将其更改为另一个点的事情。有没有办法改变观点，如果是这样，那是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T00:35:49.937

这个站点非常详细地介绍了 VPython 中的视图。您需要更改`center`位置，因为那是相机的外观。

[http://www.vpython.org/contents/docs/visual/display.html](http://www.vpython.org/contents/docs/visual/display.html)

# sql - 无法使用联接计算删除查询

> ID：13669615
> 
> 赞同：1
> 
> 时间：2012-12-02T13:15:46.750
> 
> 标签：sql, sql-server, sql-server-2008, join

```
 `IF(@ParentField = 'Reason for call - Primary Issue')
    BEGIN
        DELETE FROM dbo.ControlBrandMapping CBM
            INNER JOIN dbo.ControlManagement CM ON CM.ID = CBM.CONTROLID
                WHERE CM.DefaultName = 'Reason for call - Sub Issue' AND CBM.BRANDID = @BrandId
    END` 
```

我尽力让它看起来尽可能整洁。我收到此错误 - “'CBM' 附近的语法不正确。” 请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:18:21.473

您在子句`CBM`后缺少别名。`DELETE`试试这个：

```
 DELETE CBM
    FROM dbo.ControlBrandMapping CBM
    INNER JOIN dbo.ControlManagement CM ON CM.ID = CBM.CONTROLID
    WHERE CM.DefaultName = 'Reason for call - Sub Issue' 
      AND @ParentField = 'Reason for call - Primary Issue'
      AND CBM.BRANDID = @BrandId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:18:19.820

我不确定，我刚开始，但据我所知，在进行连接时，我认为应该`INNER JOIN dbo.ControlManagement CM ON (CM.ID = CBM.CONTROLID)` 注意括号，但我可能错了

# django - 带有 gunicorn、django 和 nginx 的静态文件

> ID：13669619
> 
> 赞同：3
> 
> 时间：2012-12-02T13:16:20.920
> 
> 标签：django, nginx, hosts, gunicorn, static-files

我有一个 django 项目，想使用 gunicorn 和 nginx 部署它。

到目前为止一切正常，但是当我添加子域时，没有提供静态文件，我的页面看起来很糟糕！

如果我改用本地主机，一切都会完美！

在这里我留下我的 nginx.conf：

```
server {
    listen 80 default;
    client_max_body_size 4G; 
    server_name mytest.dev;

    keepalive_timeout 5;

    # path for static files
    root /Users/danielrodriguez/workspace/mtt/static;

    location / { 
        # checks for static file, if not found proxy to app 
        try_files $uri @proxy_to_app;
    }   

    location @proxy_to_app {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;

        proxy_pass   http://localhost:8000;
    }   
} 
```

我的主机文件中也有这个：

```
127.0.0.1   localhost
127.0.0.1   mytest.dev
255.255.255.255 broadcasthost
::1             localhost 
fe80::1%lo0 localhost 
```

当我在浏览器中输入“mydev.test”时，如何让 nginx 像在浏览器中输入“localhost”一样工作？几乎所有我想做的就是使用 apache 中的虚拟主机之类的东西在同一个物理服务器中为一堆站点提供服务。

PD：我也在使用 OS Lion，以防万一。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T13:32:11.610

**看来你的`root`设置有误。**

```
root /Users/danielrodriguez/workspace/mtt/static; 
```

您应该检查您的 css 文件的请求 URL。假设你有`STATIC_URL = '/static/'`你的浏览器可能会想要加载`/static/css/styles.css`或类似的东西。

因此，该文件`./static/css/styles.css`应该在`root`目录中找到。

**那么正确的`root`应该是：**

```
root /Users/danielrodriguez/workspace/mtt; 
```

当然，将`root`设置设置为项目根目录确实不是一个好主意。因此，您可以为项目之外的目录创建符号链接`static`并将`media`目录分开。

希望有帮助。

# php - PHP LIFO 或 FIFO 中的数组？

> ID：13669620
> 
> 赞同：6
> 
> 时间：2012-12-02T13:16:21.653
> 
> 标签：php

我是 PHP 新手，想知道 PHP 中的数组是 LIFO 还是 FIFO。例如

```
$var1 = array('1','2','3'); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-02T13:17:53.477

他们是你做的:)

*   [`array_pop()`](http://php.net/manual/en/function.array-pop.php)从数组末尾删除一个项目（添加的最后一个项目）

*   [`array_shift()`](http://php.net/manual/en/function.array-shift.php)从数组中删除第一项（添加的第一项）。

因此，正如您所看到的，它们能够以两种方式表现。

*   后进先出
*   先进先出

这完全取决于您如何实现代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T13:19:03.573

**更新：**

那么数组既不是 也不`LIFO`是`FIFO`。实际上，他们都是`IMO`。IE。他们可以以两种方式行事。如上面 Lix 所述，您可以通过任何一种方式（根据需要）使用 php 中的可用函数。

# c# - LinqToXML - 选择通过模式验证的元素

> ID：13669622
> 
> 赞同：1
> 
> 时间：2012-12-02T13:16:30.920
> 
> 标签：c#, linq-to-xml

有没有办法只选择使用 LinqToXML 通过模式验证的元素？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T13:52:26.133

调用 Validate 方法[http://msdn.microsoft.com/en-us/library/bb354954.aspx](http://msdn.microsoft.com/en-us/library/bb354954.aspx)，将`addSchemaInfo`参数设置为，然后选择方法[http://msdn.microsoft.com/en-us/library](http://msdn.microsoft.com/en-us/library/bb342577.aspx)`true`所在的元素[/bb342577.aspx](http://msdn.microsoft.com/en-us/library/bb342577.aspx)告诉您该元素已成功验证，例如`doc.Descendants().Where(el => el.GetSchemaInfo().Validity == System.Xml.Schema.XmlSchemaValidity.Valid)`。

# ruby-on-rails-3 - 运行 db:pull 时出错

> ID：13669624
> 
> 赞同：2
> 
> 时间：2012-12-02T13:16:45.460
> 
> 标签：ruby-on-rails-3, heroku

我在运行时遇到问题`heroku db:pull -a my-app`。我收到这条消息：

```
!    Heroku client internal error.
!    Search for help at: https://help.heroku.com
!    Or report a bug at: https://github.com/heroku/heroku/issues/new

Error:       constant URI::WFKV_ not defined (NameError)
Backtrace:   /home/user/.rvm/gems/ruby-1.9.2-p320@cg/gems/rack-1.4.1/lib/rack/backports/uri/common_192.rb:53:in `remove_const'
             /home/user/.rvm/gems/ruby-1.9.2-p320@cg/gems/rack-1.4.1/lib/rack/backports/uri/common_192.rb:53:in `<module:URI>'
             /home/user/.rvm/gems/ruby-1.9.2-p320@cg/gems/rack-1.4.1/lib/rack/backports/uri/common_192.rb:19:in `<top (required)>'
             /home/user/.rvm/gems/ruby-1.9.2-p320@cg/gems/rack-1.4.1/lib/rack/utils.rb:12:in `require'
             /home/user/.rvm/gems/ruby-1.9.2-p320@cg/gems/rack-1.4.1/lib/rack/utils.rb:12:in `<top (required)>'
             /home/user/.rvm/gems/ruby-1.9.2-p320@cg/gems/taps-0.3.24/lib/taps/multipart.rb:2:in `require'
             /home/user/.rvm/gems/ruby-1.9.2-p320@cg/gems/taps-0.3.24/lib/taps/multipart.rb:2:in `<top (required)>'
             /home/user/.rvm/gems/ruby-1.9.2-p320@cg/gems/taps-0.3.24/lib/taps/data_stream.rb:2:in `require'
             /home/user/.rvm/gems/ruby-1.9.2-p320@cg/gems/taps-0.3.24/lib/taps/data_stream.rb:2:in `<top (required)>'
             /home/user/.rvm/gems/ruby-1.9.2-p320@cg/gems/taps-0.3.24/lib/taps/operation.rb:8:in `require'
             /home/user/.rvm/gems/ruby-1.9.2-p320@cg/gems/taps-0.3.24/lib/taps/operation.rb:8:in `<top (required)>'
             /usr/local/heroku/lib/heroku/command/db.rb:207:in `require'
             /usr/local/heroku/lib/heroku/command/db.rb:207:in `load_taps'
             /usr/local/heroku/lib/heroku/command/db.rb:49:in `pull'
             /usr/local/heroku/lib/heroku/command.rb:206:in `run'
             /usr/local/heroku/lib/heroku/cli.rb:28:in `start'
             /usr/local/heroku/bin/heroku:25:in `<main>'

Command:     heroku db:pull -a my-app
Version:     heroku-toolbelt/2.33.2 (i486-linux) ruby/1.9.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:50:38.530

有同样的问题。似乎不推荐使用 db:pull 。

请参阅[https://devcenter.heroku.com/articles/pgbackups](https://devcenter.heroku.com/articles/pgbackups)

# javascript - 为什么 .submit() 没有被调用？

> ID：13669626
> 
> 赞同：-3
> 
> 时间：2012-12-02T13:16:59.257
> 
> 标签：javascript, jquery, ajax

这是我的登录表单代码。但是表单提交和 JSON 响应检索根本没有发生。我哪里错了？

```
<html>
    <body>
        <script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.2.6.min.js">
        </script>
        <div id="login-box">
            <form id="login" method="post" class="login" action="http://localhost:3000/login/">
                <fieldset class="textbox">
                    <label class="username"> <span>Username or email</span>
                        <input id="username" name="username" value=""
                        type="text" autocomplete="on" placeholder="Username">
                    </label>
                    <label class="password"> <span>Password</span>
                        <input id="password" name="password" value="" type="password"
                        placeholder="Password">
                    </label>
                    <button class="submit button" type="button">Sign in</button>
                    <p>
                        <a class="forgot" href="#">Forgot your password?</a>
                    </p>
                </fieldset>
            </form>
        </div>
        <button id='theButton'>What?</button>
        <script>
            jQuery(document).ready(function () {
                jQuery('.login').submit(function () {
                    $.ajax({
                        url: $(this).attr('action'),
                        type: $(this).attr('method'),
                        data: $(this).serialize(),
                        success: function (response) {
                            alert(response);
                        }
                    });
                    return false;
                });
            });
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:26:39.060

将按钮类型从“按钮”更改为“提交”

# android - 如何在 Spinner 中设置订单数据

> ID：13669628
> 
> 赞同：2
> 
> 时间：2012-12-02T13:17:09.087
> 
> 标签：android, database, sorting, spinner

我正在使用许多 Spinner 供用户输入数据，然后将其保存到 SQLite 数据库中。每个 Spinner 都填充有来自数据库表的数据。

我想控制数据显示的顺序 - 例如，下面是“数量”微调器代码：

```
//          QUANTITY SPINNER

    Cursor quantityCursor = rmDbHelper.fetchAllQuantities();
    startManagingCursor(quantityCursor);

    // create an array to specify which fields we want to display
    String[] from6 = new String[]{RMDbAdapter.QUANTITY_FORM_TEXT};
    int[] to6 = new int[]{android.R.id.text1};

    // create simple cursor adapter
    SimpleCursorAdapter quantitySpinnerAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, quantityCursor, from6, to6 );

    quantitySpinnerAdapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
    // get reference to our spinner
    quantitySpinner.setAdapter(quantitySpinnerAdapter);

    if (damagedComponentId > 0) { // Set spinner to saved data

        int spinnerPosition = 0; 

        for (int i = 0; i < quantitySpinner.getCount(); i++)  
        { 
             Cursor cur = (Cursor)(quantitySpinner.getItemAtPosition(i)); 

             //--When your bind you data to the spinner to begin with, whatever columns you 
             //--used you will need to reference it in the cursors getString() method... 

             //--Since "getString()" returns the value of the requested column as a String--  
             //--(In my case) the 4th column of my spinner contained all of my text values  
             //--hence why I set the index of "getString()" method to "getString(3)" 

             int quantitySpinnerItem = cur.getInt(1); 

             if(quantitySpinnerItem == quantitySpinnerData) 
             { 
                //--get the spinner position-- 
                spinnerPosition = i; 
                break; 
              } 
         }       
        quantitySpinner.setSelection(spinnerPosition); 
    }

    else { // Set spinner to default

        int spinnerPosition = 0; 

        for (int i = 0; i < quantitySpinner.getCount(); i++)  
        { 
            Cursor cur = (Cursor)(quantitySpinner.getItemAtPosition(i));

            int quantitySpinnerItem = cur.getInt(1);

            if(quantitySpinnerItem == 1)
            { 
                //--get the spinner position-- 
                spinnerPosition = i;
                break; 
            } 
         }       
        positionSpinner.setSelection(spinnerPosition);
    } 
```

现在这工作正常，除了它将数据排序如下：1、10、11、12、13、14、15、16、17、18、19、2、20、21等。显然我希望它显示1， 2、3等

现在我知道我可以使用“NumberPicker”（而不是 Spinner）或者我可以使用 01、02、03 来绕过默认排序，但是有没有办法改变 Spinner 显示数据的顺序？

我见过两个可能有效的选项（但我看不到在哪里添加到我的代码中）：

1) 使用 Collections.sort(SourceArray) ，如下所示：[Spinner datasorting in Android](https://stackoverflow.com/questions/11468547/spinner-data-sorting-in-android)。但是，无法使用我的 Spinner 进行这项工作。

或者这个：

2）在查询数据库时设置“order by id”，如下所示：[Rearrange list view items in SimpleCursorAdapter](https://stackoverflow.com/questions/9898227/rearrange-list-view-items-in-simplecursoradapter)。但是看不到你会在哪里做这个..

任何建议都非常感谢..

编辑 - 以下是我的数据库助手类中的代码：

```
public Cursor fetchAllQuantities() {
    return rmDb.query(QUANTITY_TABLE, new String[] {
            QUANTITY_ID,
            QUANTITY_FORM_TEXT},
            null, null, null, null, QUANTITY_ID);
} 
```

我现在已经包含了 ORDER BY 语句 (QUANTITY_ID)，但这对 Spinner 显示数据的顺序没有影响。

编辑 2 - 从头开始​​我的最后一条语句，它已正确排序，但是当第一次创建数据库时，它以默认顺序输入数字。所以下面是我输入数据的地方：

```
 db.execSQL("INSERT INTO " + QUANTITY_TABLE + "(" + QUANTITY_FORM_TEXT + ")" + 
                " SELECT '1' AS " + QUANTITY_FORM_TEXT +
                " UNION SELECT '2' " +
                " UNION SELECT '3' " +
                " UNION SELECT '4' " +
                " UNION SELECT '5' " +
                " UNION SELECT '6' " +
                " UNION SELECT '7' " +
                " UNION SELECT '8' " +
                " UNION SELECT '9' " +
                " UNION SELECT '10' " +
                " UNION SELECT '11' " +
                " UNION SELECT '12' " +
                " UNION SELECT '13' " +  etc. 
```

但是当我查看 SQLite 程序中的数据库表时，它看起来像这样：

```
_id | quantity_form_text
 1  |  1
 2  |  10
 3  |  11
 4  |  12
 5  |  13
 6  |  14 etc. 
```

所以我想我现在的问题是你首先如何控制数据进入数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:44:57.957

好的，所以我似乎已经对其进行了排序。

我有两个微调器：一个是“数量微调器”，它由仅包含数字的数据库表填充（如上所示），另一个是“位置微调器”，它由带有数字 1-20 和文本的表填充。

因此，对于数量 Spinner，我将 Union Select 语句（见上文）更改为 01、02、03（而不是 1、2、3）。由于将其输入到仅接受整数的列中，因此在 onCreate 填充它后，数据库表将显示 1、2、3 等，这就是它在 Spinner 中的显示方式。很好！

由于位置微调器包含文本，因此该列设置为接受文本。同样，Union Select 语句是使用 01、02、03 等编写的，但这在数据库中保持不变（当它填充 Spinner 时，它显示 01、02、03 等 - 这对我的需要很好）。

在这两种情况下，David 和 Mango 建议的解决方案都有效，它现在提取按增量 id 排序的数据，并为数字等提供正确的顺序。

希望这是有道理的！谢谢，戴夫。

# java - 如何执行 HibernateQuery

> ID：13669629
> 
> 赞同：0
> 
> 时间：2012-12-02T13:17:09.643
> 
> 标签：java, hibernate, querydsl

我从 C# 迁移到 java，这是我第一次尝试实际编写一些东西，我正在尝试设置我的数据层，但我认为我在 .NET 中缺少 LINQ to SQL 中的 DataContext 之类的东西

我试图使用 Hibernate 查询数据库，但似乎我遗漏了一些东西，我下载了 Hibernate 4 和 QueryDSL 以进行类型安全查询。

接下来，我连接到我的 postgreSQL 数据库并使用 Dali 生成 DAO 对象（我认为？在菜单中我从表中选择了 JPA 实体），编写了我需要的查询，但我不确定我必须在哪个对象上执行我的查询（类似于连接管理器或者其他的东西？）

我认为这里缺少一些东西：

```
EmployeesRepository repo = new EmployeesRepository();
List<Employees> employees = repo.GetByName("Steve");
Employees s = employees.get(0);
String g = s.getName(); 
```

我的实体存储库：

```
public class EmployeesRepository {

    public List<Employees> GetByName(String ename)
    {
        HibernateQuery qry = createQuery(employees);
        qry.where(employees.name.like(ename));
        return qry.list(employees);
    }

    private HibernateQuery createQuery(QEmployees employee)
    {
        return new HibernateQuery().from(employee);
    }
} 
```

我越来越：

**java.lang.UnsupportedOperationException：分离查询中没有可用的会话**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:18:37.660

您需要在执行查询之前创建/打开休眠会话。

例子：

```
Session session = HibernateUtil.getSessionFactory().openSession(); 
```

完成查询执行后，您需要关闭。

```
session.close(); 
```

这是[一步一步的例子](http://www.dzone.com/tutorials/java/hibernate/hibernate-example/hibernate-tools-1.html)。

注意：您使用的版本可能与上述示例中描述的版本不匹配，您可能需要对其进行调整。

# objective-c - 如何在可可/石英中保存和恢复多个上下文？

> ID：13669631
> 
> 赞同：0
> 
> 时间：2012-12-02T13:17:12.893
> 
> 标签：objective-c, macos, cocoa, quartz-graphics

现在我这样做：

```
CGContextRef context = NULL;
context = [[NSGraphicsContext currentContext] graphicsPort];

[see if I need to restore]
[if so]
CGContextRestoreGState(context);

[do transformations and draw some stuff]

[save the current state]
CGContextSaveGState(context); 
```

我想要有不同的状态，所以我可以回到它们。我现在的做法，好像只能存一个。我需要多个上下文吗？我猜是这样，但我不确定最好的方法是什么。我刚接触可可，无论如何，我想我会问！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:31:33.883

听起来您可能想要实现撤消管理器而不是保存不同的状态。在这个应用程序[SimpleDrawing](https://bitbucket.org/nwoolls/simpledrawing/wiki/Home)中，有一个很好的例子，将石英与撤消管理器和上下文一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T03:53:43.877

使用`CGContextSaveGState`/ `CGContextRestoreGState`，您可以保存多个图形状态。文档`CGContextSaveGState`说“每个图形上下文都维护着一堆图形状态。”。

# c# - 将我的数据表函数修改为 CSV

> ID：13669636
> 
> 赞同：0
> 
> 时间：2012-12-02T13:18:09.087
> 
> 标签：c#

我编写了一个将数据表保存为 CSV 文件格式的函数。但问题是，当我调用该函数时，该函数会删除旧数据并写入新数据。我只想保留旧数据并在文件末尾写入新数据。我怎样才能做到这一点？我的功能是：

```
 public void CreateCSVFile(DataTable dt, string strFilePath, bool isFirstRowHeader)
    {
        StringBuilder sb = new StringBuilder();

        if (isFirstRowHeader == true)
        {
            var columnNames = dt.Columns.Cast<DataColumn>().Select(column => column.ColumnName).ToArray();
            sb.AppendLine(string.Join(",", columnNames));
        }

        foreach (DataRow row in dt.Rows)
        {
            var fields = row.ItemArray.Select(field => field.ToString()).ToArray();
            sb.AppendLine(string.Join(",", fields));
        }

        File.WriteAllText(strFilePath, sb.ToString());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:24:03.027

`File.AppendAllText`而不是`File.WriteAllText`将附加到现有 CSV 文件的末尾。当然，如果文件已经存在，您需要避免写出标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:25:07.657

尝试改用 StreamWriter 并将其 append 参数设置为 true。

```
 string filename = @"c:\test.csv";
        StringBuilder sb = new StringBuilder();

        sb.Append("test1");
        sb.Append("test2");

        StreamWriter sw = new StreamWriter(filename, true);
        sw.Write(sb.ToString());
        sw.Close(); 
```

这应该可以解决问题。

# python - Gtk 3 python 入口颜色

> ID：13669642
> 
> 赞同：1
> 
> 时间：2012-12-02T13:18:26.167
> 
> 标签：python, python-2.7, gtk, gtk3

我正在尝试创建一个带有灰色提示的文本条目，当有人在其中输入文本时它会变黑。已经提出了类似的问题，但更广泛地试图通过我到达那里，但没有得到那么多。但无论如何，它可以帮助解决其他问题。

我的另一个问题： [Gtk python entry color](https://stackoverflow.com/questions/13655829/gtk-python-entry-color)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:57:18.463

这个解决方案有不同的部分。首先，着色由 css 处理，当输入框未聚焦时将文本着色为灰色，然后在获得焦点时将文本着色为黑色。如果您希望实现第二部分，您可能希望在文本框获得焦点时清除框中的灰色文本。为方便起见，我将焦点放在当前仅打印到终端的事件处理程序中。

**代码**

```
from gi.repository import Gtk, Gdk

def focus_in(*args):
    print 'focus_in called'

def focus_out(*args):
    print 'focus_out called'

window = Gtk.Window()
window.connect('destroy', Gtk.main_quit)
screen = Gdk.Screen.get_default()
css_provider = Gtk.CssProvider()
css_provider.load_from_path('style.css')
priority = Gtk.STYLE_PROVIDER_PRIORITY_USER
context = Gtk.StyleContext()
context.add_provider_for_screen(screen, css_provider, priority)
fname = Gtk.Entry(text='First Name')
lname = Gtk.Entry(text='Last Name')
button = Gtk.Button('Submit')
fname.connect('focus-in-event', focus_in)
fname.connect('focus-out-event', focus_out)
vbox = Gtk.VBox()
vbox.add(fname)
vbox.add(lname)
vbox.add(button)
window.add(vbox)
window.show_all()
Gtk.main() 
```

**样式.css**

```
GtkEntry {
    color: darkgrey;
}

GtkEntry:focused {
    color: black;
} 
```

**截屏**

![在此处输入图像描述](../Images/811f7877ffaa4cefd7f9e213edc28070.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T20:11:32.693

当工具包为占位符文本提供了非常好的工具时，请不要使用 CSS 或 HTML：

```
entry.set_placeholder_text('First name') 
```

适用于 GTK 3.2 及更高版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T06:05:15.083

解决此问题的另一种完全不同的方法是利用一些出色的 HTML5 功能和可用于 qt 和 gtk 的出色 webkit 库。下面将介绍 qt 和 gtk 的使用示例。您想要实现的内容在 HTML5 中作为称为占位符的属性提供。你可以在 w3schools 上看到一个很好的[演示](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_input_placeholder)。

```
<input type="text" name="fname" placeholder="First name" /> 
```

然后使用 HTML 和 webkit 实现字段和表单。然后有很多方法可以在您的 html 和 python 代码之间进行通信。我发现 HTML 是一种创建用户界面的更简单且更有文档的方式。

**GTK 版本**

```
import gtk, webkit

HTML = """
<!DOCTYPE html><html><body>
<form>
  <input type="text" name="fname" placeholder="First name" /><br>
  <input type="text" name="lname" placeholder="Last name" /><br>
  <input type="button" value="Submit" />
</form>
</body></html>
"""

win = gtk.Window(gtk.WINDOW_TOPLEVEL) 
win.connect('destroy', gtk.main_quit)
view = webkit.WebView() 
view.load_html_string(HTML, 'file:///')
win.add(view)
win.show_all() 
gtk.main() 
```

**截屏**

![在此处输入图像描述](../Images/85cafb67fe03a6c5e68a94aac8a70540.png)

**QT版**

```
import sys
from PyQt4 import QtCore, QtGui, QtWebKit

HTML = """
<!DOCTYPE html><html><body>
<form>
  <input type="text" name="fname" placeholder="First name" /><br>
  <input type="text" name="lname" placeholder="Last name" /><br>
  <input type="button" value="Submit" />
</form>
</body></html>
"""

app = QtGui.QApplication(sys.argv)
view = QtWebKit.QWebView()
view.setHtml(HTML)
window = QtGui.QMainWindow()
window.setCentralWidget(view)
window.show()
sys.exit(app.exec_()) 
```

**截图**

![在此处输入图像描述](../Images/9d1ba82ddebee4d521a35706bd01de08.png)

**最后的注释** 当与界面交互时，您会看到`placeholder`webkit 中的功能以一种感觉自然且符合预期的方式实现。如果您决定自己实现这些类型的功能，则很难正确纠正它们，所以这只是需要注意的事情。

# php - 单击链接PHP MYSQL时在另一个表上显示显示名称而不是另一个表的外键

> ID：13669645
> 
> 赞同：-3
> 
> 时间：2012-12-02T13:18:39.210
> 
> 标签：php, mysql

> **可能重复：**
> [在表格中显示 *](https://stackoverflow.com/questions/13669201/displaying-in-a-table)

我有 2 张桌子、用户和电视节目。我的用户表包含 user_id、用户名、显示名称、密码，而我的电视节目表包含 tv_id、user_id FK、节目名称和季节。

我的主索引页面显示来自 tvshows 表的所有结果，您可以单击每个单独的结果，它将带您到另一个页面。

在页面顶部的 tvshows.php 上，我想在 tvshows 表中显示分配给该结果的人的姓名。

在我的 index.php 上：

```
Thank you! 
```

这仅显示创建人的 ID，但我希望它显示显示名称。如果我将 user_id 更改为 displayname 它将不起作用，因为它在不同的表上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:26:03.217

您需要使用 JOIN 从两个表中进行选择。只是一个简单的例子：

```
SELECT tvshows.user_id, users.displayname FROM tvshows, users WHERE (tvshows.user_id = users.user_id) AND (tvshow_id = '$tvshow_id') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:21:59.143

`JOIN`这两个表是这样的：

```
SELECT
  u.displayname
FROM users u
INNER JOIN TVShows t ON u.user_id = t.user_id 
WHERE t.tvshow_id = '$tvshow_id' 
```

# jquery - 是否可以让 dispay:none 元素的子元素可见？

> ID：13669652
> 
> 赞同：2
> 
> 时间：2012-12-02T13:19:15.677
> 
> 标签：jquery, html, css

我有一个列表，`dispaly:none`但我希望在某些条件下使列表 ( `li`) 的子元素可见。有可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T13:20:35.687

不。如果您的容器是不可见的，那么其子容器的可见性是无关紧要的。因此，在您的情况下，您必须隐藏所有`li`想要不可见的元素，但列表必须是可见的。

# php - 在数据库中表示具有输入依赖性的径向

> ID：13669654
> 
> 赞同：3
> 
> 时间：2012-12-02T13:19:24.030
> 
> 标签：php, mysql, database, database-design, schema

我只是想问一下如何在数据库模式中最好地表示带有单选按钮（Y/N）的表单，如果是，将有一个输入字段。比如“你现在在吃药吗？” (o) 是或 (o) 否。如果选择“是”，输入字段将变为可用，他们必须将其写下来。目前我有这个非常简单的模式：

```
tblUser
-----------
user_id

tblAnswers
--------------
answer_id
user_id
question_id
answer

tblquestions
----------------
question_id
question_text 
```

我认为我现在拥有的模式对于大多数事情来说都很好：多个复选框作为答案、单选按钮等。但对于具有相关输入字段的单选按钮，我不确定。顺便说一句，我希望它简单明了……我每 1 个用户只有 1 个调查。而且问题在很长一段时间内都不会改变；也许甚至从来没有。再说一次，也许我当前的模式适用于具有输入依赖性的径向...而不是“是”作为答案，我将使用输入字段值代替？所以在`tblanswer`我可以有一个`answer`喜欢`Stress pills`（而不是是）或`No`。这可以接受吗？或者这是一个坏主意？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:47:05.597

我将为单选按钮提供一个解决方案，我不会处理您的表结构，因为它与此答案无关，但我会在这里留下一个提示：忘记规范化规则，它们在大多数情况下是不切实际的。

现在，关于您的问题，您描述了 3 个可能的结果（是、否和文本），但实际上您只有 2 个（否和文本），因为文本的存在意味着答案已经是肯定的。

因此，您应该做的是准备您的输入以发送“null”或“text”，使用一些 javascript 来显示/隐藏文本输入，并在 INSERT 查询后面获取一些逻辑来检测它是否应该将输入保存为`null`（对于收音机关闭）或作为`$_POST['foo']`（用于收音机打开）。

# android - 使 EditText 失去焦点

> ID：13669655
> 
> 赞同：3
> 
> 时间：2012-12-02T13:19:25.157
> 
> 标签：android

我的活动中有两个 EditText 字段和一个完成按钮。当用户按下按钮时，我希望两个 EditText 字段都失去焦点（即光标不应显示在它们中的任何一个上）。我正在使用以下代码：

```
private OnClickListener saveButtonListener = new OnClickListener() {

@Override
public void onClick(View v) {
            tv1.clearFocus();
            tv2.clearFocus();
            saveButton.requestFocus();

}

} 
```

但是，当我按下完成按钮时，`tv1`即使我还没有点击任何 EditText，光标也会出现。如何使 EditText 字段放松对单击按钮的关注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:26:47.483

转到您的 XML 代码并`<requestFocus/>`从 EditText 中删除该属性。那么它应该可以正常工作。

如果没有，请尝试在启动 Activity 后立即将代码移除焦点，即在其内部`onCreate()`，这样当您单击“完成”按钮时，Activity 默认不会将焦点呈现给任何人.

# c# - 使用自定义方法进行旋转时图像褪色

> ID：13669657
> 
> 赞同：0
> 
> 时间：2012-12-02T13:20:12.687
> 
> 标签：c#, winforms, image, picturebox

我正在使用自定义方法来旋转图片框。这是代码：

```
public static Image RotateImage(Image img, float rotationAngle)
    {
        Bitmap bmp = new Bitmap(img.Width, img.Height);
        Graphics gfx = Graphics.FromImage(bmp);
        gfx.TranslateTransform((float)bmp.Width / 2, (float)bmp.Height / 2);
        gfx.RotateTransform(rotationAngle);
        gfx.TranslateTransform(-(float)bmp.Width / 2, -(float)bmp.Height / 2);
        gfx.InterpolationMode = InterpolationMode.HighQualityBicubic;
        gfx.DrawImage(img, new Point(0, 0));
        gfx.Dispose();
        return bmp;
    } 
```

这是电话：`pictureBox1.Image = RotateImage(pictureBox1.Image, someInt);`

一开始一切都很好，但是时间越长，图像就越透明。一段时间后，它几乎看不见了。我在某个论坛上找到了这个方法，我自己没有写过。有什么想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:44:59.990

由于需要使用插值来确定旋转图像中每个像素的颜色，任何图像变换都会在源图像和目标图像之间产生差异。在您的代码中，您每次都在图像上应用转换，这是从先前的转换得到的结果，有效地增加了插值的效果。你应该改变方法。您应该在某处引用原始图像，并始终使用它来绘制旋转图像。为此，您应该从一开始就使用角度调用您的方法，而不是相对于前一个图像。像这样的东西：

```
static int someInt = 5;
Bitmap bmp = new Bitmap(@"someImage.jpg");
private void button2_Click(object sender, EventArgs e)
{
      pictureBox1.Image = RotateImage(bmp, someInt);
      someInt = (someInt + 5) % 360;
} 
```

# jsf - 所有用户会话的每页视图只保留一个实例

> ID：13669661
> 
> 赞同：0
> 
> 时间：2012-12-02T13:20:43.837
> 
> 标签：jsf, jsf-2

我不想/不需要为单个页面保存不同用户会话的单独视图，因为我从不以编程方式修改页面。视图始终基于 xhtml 文件中指定的内容构建。因此，对于所有用户来说，页面的视图总是相同的，那么为什么我应该将它存储为每个用户的单独视图实例并浪费我的服务器资源并降低性能（在处理每个请求时构建/恢复维护视图实例）而没有任何收益一点也不。

我想知道如何告诉 JSF 只维护每个页面的单个实例以供查看。我如何配置 JSF 来做到这一点？

# iphone - 在 iOS 上创建用作 db 的简单文件以搜索邮政编码

> ID：13669662
> 
> 赞同：0
> 
> 时间：2012-12-02T13:20:59.313
> 
> 标签：iphone, objective-c, ios, ipad

我有一个邮政编码列表，我想将其作为某种文本文件保存在我的应用中，以便于查找值。目前我有这个作为PLIST：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
<dict><key>City</key><string>Holtsville</string><key>State</key><string>501</string><key>Zip</key><string>NY</string></dict>
<dict><key>City</key><string>Holtsville</string><key>State</key><string>544</string><key>Zip</key><string>NY</string></dict>
<dict><key>City</key><string>Adjuntas</string><key>State</key><string>601</string><key>Zip</key><string>PR</string></dict>
<dict><key>City</key><string>Aguada</string><key>State</key><string>602</string><key>Zip</key><string>PR</string></dict>
</array>
</plist> 
```

不确定这是否是最好的方法。大约有 50,00 个条目，我希望能够在没有太多开销的情况下快速查找值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:29:22.103

我会将其存储在 SQLite 数据库中。iOS 大量使用 SQLite，因此得到了很好的支持。这是一个关于在 XCode 项目中使用 sqlite 的[优秀教程](http://www.icodeblog.com/2008/08/19/iphone-programming-tutorial-creating-a-todo-list-using-sqlite-part-1/)。

# core-plot - 当coreplot中的点靠近时如何防止重叠阴影？

> ID：13669663
> 
> 赞同：1
> 
> 时间：2012-12-02T13:21:12.917
> 
> 标签：core-plot

在最近关于渲染的修复之后，[如何在 coreplot 中的符号填充后面绘制一个绘图符号阴影？](https://stackoverflow.com/questions/13542456/how-to-draw-a-plot-symbol-shadow-behind-the-symbol-fill-in-coreplot)阴影被绘制在点的后面。

但是，核心图在使用委托时将阴影单独应用于每个数据点，`-symbolForScatterPlot:recordIndex:`这会在数据点靠近时导致重叠阴影。例如，![当点靠近时阴影重叠核心图](../Images/ed9ac312e53539f672c47f94f819a86b.png)

是否可以避免先前渲染的数据点的阴影重叠？例如，通过单次扫描（或其他方式）在单独的图层中渲染阴影？

# performance - Flash actionscript 3 游戏性能 - 删除对象和重置属性

> ID：13669669
> 
> 赞同：0
> 
> 时间：2012-12-02T13:22:39.057
> 
> 标签：performance, actionscript-3, flash, object, cpu

我正在开发一个 Flash 游戏，它要求我在运行时将一个类中的对象实例化到场景中，并通过代码删除这些对象。这工作正常，我可以从游戏中动态添加和删除实例，但是大约两分钟后它开始极度滞后，最终会一起崩溃。

我曾经`numchildren()`跟踪场景中有多少对象，但似乎有些实例没有被正确删除，因为跟踪的数量会增加并最终达到接近 2000 个对象......

我`removeChild()`用来删除对象并试图弄清楚为什么这些对象仍在场景中。我在某处读到，如果对象没有正确重置，它们可能仍会使用 cpu。

我对使用 flash 工作还是很陌生，我的主要问题是 - 我如何找出哪些对象没有被删除以及如何将它们完全从游戏中删除？ 除了简单的部分
，我还需要在代码中添加什么？ 任何帮助将不胜感激。`removeChild()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:43:52.483

请提供使用 removeChild() 方法的代码部分。

通常你应该这样使用 removeChild() ：

```
import flash.display.MovieClip;
import flash.utils.Timer;
import flash.events.TimerEvent;

var movieClip:MovieClip;
var timer:Timer=new Timer(5000, 1);
timer.addEventListener(TimerEvent.TIMER_COMPLETE, onTimerComplete);

makeMovieClips();

function makeMovieClips() {
    for (var i:int; i<2000; i++) {
        movieClip=new MovieClip();
        movieClip.graphics.beginFill(Math.random()*0xFFFFFF);
        movieClip.graphics.drawCircle(Math.random()*stage.stageWidth, Math.random()*stage.stageHeight, Math.random()*40);
        movieClip.graphics.endFill();
        addChild(movieClip);
    }
    trace (numChildren) // should output 2000;
    timer.start();
}

function onTimerComplete(e:TimerEvent):void {
    while (numChildren>0) {
        movieClip=getChildAt(0) as MovieClip;
        removeChild(movieClip);
        // or we can use removeChildAt(0); instead of 2 lines above
    }
    trace (numChildren) // should output 0, because all objects are removed from display list;
} 
```

另外请注意，如果在这些对象上留下任何引用，则从显示列表中删除对象不会将它们从内存中排除。在我的示例中，在所有 Movieclip 都从舞台上移除后，对一个 MovieClip 对象的引用仍然存在，因此它将占用 VM 内存的一部分，并且垃圾收集器不会清理该部分。在我的示例中，要删除引用，我应该在 onTimerComplete 方法的 while 循环之后添加这行代码：

```
movieClip=null; 
```

# google-chrome-extension - 从 chrome 扩展访问/编辑 iframe 的内容

> ID：13669671
> 
> 赞同：2
> 
> 时间：2012-12-02T13:22:40.547
> 
> 标签：google-chrome-extension

我想通过 chrome 扩展来编辑 iframe 的内容，但因为 iframe 的 contentWindow/contentDocument 返回未定义而无法编辑。一直在寻找答案，据我所知，如果 iframe 从一开始就存在于页面上，它很容易修复，但事实并非如此。有问题的 iframe 是 iframe 形式的 gmail 撰写文本区域，它是动态添加到 DOM 中的。有没有办法通过 chrome 扩展来做到这一点？

编辑：对不起。Rob W 让我意识到 contentDocument 确实可以访问。我在这里要做的是在 Gmail 中添加一些额外的功能，在工具栏中有一个按钮，可以在撰写窗口中添加一些 html。我现在让按钮部分工作，它添加了 html，但它并没有像它应该的那样在插入符号处执行它，因为我无法访问 contentWindow 来执行此操作：

```
range = iWindow.getSelection().getRangeAt(0);
node = range.createContextualFragment(html);
range.insertNode(node); 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T13:43:32.437

[`contentWindow`在 Chrome 扩展程序中无法访问](https://stackoverflow.com/a/11815581/938089?window-open-returns-undefined-in-chrome-extension)。
`contentDocument`另一方面，如果 iframe 位于同一来源（Gmail 就是这种情况），则可以正确返回框架内的文档。

这是 Gmail 的示例。为简单起见，我假设文档中只有一个编辑器。

```
var poller = setInterval(function() {
    var editor = document.querySelector('iframe.editable');
    if (editor && editor.contentDocument && !editor.__rwHandled) {
        editor.__rwHandled = true; // Run once for an editor instance
        var textNode = document.createTextNode('It works!');
        editor.contentDocument.body.appendChild(textNode);
    }
}, 200); 
```

每当您想停止轮询器时，只需使用`clearInterval(poller);`. 确保您的检测方法价格低廉。例如：查询 DOM 节点是可以的，打开新窗口不是。

# javascript - 无法重定向以在 Asp.net WebApi 中工作

> ID：13669673
> 
> 赞同：1
> 
> 时间：2012-12-02T13:23:19.983
> 
> 标签：javascript, asp.net-web-api

我有一个重定向的 webapi 控制器：

```
 var response = this.Request.CreateResponse(HttpStatusCode.Redirect);

 response.Headers.Add("Location",
     "https://www.dropbox.com/1/oauth/authorize?oauth_token=" + pars["oauth_token"]
     + "&oauth_callback=http://localhost:2638/index.html#/tasks/compose-task/");

 return response; 
```

并从javascript调用它：

```
 $.ajax("/api/dropbox/get_request_token", { dataType: 'json' })
    .done(function (data)
    {
        alert(ko.toJSON(data));
    })
    .fail(function (err) {alert(ko.toJSON(err));}); 
```

网络选项卡显示：

```
GET http://localhost:2638/api/dropbox/get_request_token HTTP/1.1
Accept: application/json, text/javascript, */*; q=0.01
Referer: http://localhost:2638/
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.20 (KHTML, like Gecko) Chrome/25.0.1337.0 Safari/537.20 
```

但它永远不会重定向到 dropbox.com。相反，它以失败（）结束。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:59:08.867

“位置”标头已经有一个属性。尝试：

```
response.Headers.Location = new Uri( "http://google.com"); 
```

这个对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T21:47:18.167

需要将您的 HttpStatusCode 设置为 Redirect，如下所示：

```
var response = new HttpResponseMessage(HttpStatusCode.Redirect);

response.Headers.Location = new Uri("http://www.dropbox.com");

return response; 
```

更多信息：[http ://en.wikipedia.org/wiki/HTTP_302](http://en.wikipedia.org/wiki/HTTP_302)

# android - 在 Windows for Android 中安装 Intel x86 失败

> ID：13669676
> 
> 赞同：0
> 
> 时间：2012-12-02T13:23:46.953
> 
> 标签：android, avd

我正在尝试在我的 Windows 笔记本电脑中安装 Intel x86，但它失败并显示错误消息。附上截图： ![在此处输入图像描述](../Images/717a7f442b87ba1e9dde0499ebec6b1d.png)

你能帮我解决这个问题吗？没有这个，AVD 根本无法工作。

提前感谢您的所有帮助。

关于，Sudipta Deb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:50:40.217

您也可以从此[链接](http://software.intel.com/en-us/android)手动下载它。请参阅英特尔页面上的工具和下载。

您还应该先使用 SDK 管理器重试下载。如果仍然无法正常工作，请手动进行。

# ruby-on-rails - 按属性和完全匹配对哈希数组进行排序

> ID：13669681
> 
> 赞同：0
> 
> 时间：2012-12-02T13:24:33.973
> 
> 标签：ruby-on-rails, ruby, arrays, sorting

假设我有以下哈希数组：

```
arr = [{:name=>"foo", :value=>20},
       {:name=>"bar", :value=>25}, 
       {:name=>"baz", :value=>30}] 
```

我目前正在按`value`如下方式排序：

```
arr.sort{|a,b| b[:value] <=> a[:value] } 
```

是否可以在排序*后将*元素（即其中的元素`name == 'bar'`）移动到堆栈顶部而不链接另一种方法？理想情况下，这只是排序块中的更多内容。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:33:36.607

快速解决方案（我认为可以重构）

```
arr.sort{|a,b| a[:name] == 'bar' ? -1 : b[:name] == 'bar' ? 1 : b[:value] <=> a[:value] }
# => [{:name=>"bar", :value=>25}, {:name=>"baz", :value=>30}, {:name=>"foo", :value=>20}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:14:51.213

首先，您应该对[Enumerable#sort_by](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-sort_by)使用不那么冗长（并且更有效）的[Schwartzian 变换](http://en.wikipedia.org/wiki/Schwartzian_transform)：

```
arr.sort_by { |h| -h[:value]] } 
```

现在，利用数组定义的[字典顺序](http://en.wikipedia.org/wiki/Lexicographical_order)，您要求的内容可以写成：

```
arr.sort_by { |h| [h[:name] == "bar" ? 0 : 1, -h[:value]] } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T13:36:10.293

```
arr.sort do |a,b|
  if a[:name] == "bar" && b[:name] != "bar"
    # a is bar but b is not, put a to the top, i.e. a is smaller than b
    -1
  elsif a[:name] != "bar" && b[:name] == "bar"
    # a is not bar but b is, put b to the top, i.e. a is bigger than b
    1
  else
    # both a and b are "bar", or bot are not "bar", than we can sort them normally
    a[:value] <=> b[:value]
  end
end 
```

一个肮脏的解决方案，思考如何写得更好......*

# python - 在 Python Raw 字符串的上下文中

> ID：13669682
> 
> 赞同：9
> 
> 时间：2012-12-02T13:24:36.800
> 
> 标签：python, string, rawstring

我的 Python 版本是：

```
~$ python --version  
Python 2.6.6 
```

我尝试在 Python 中进行以下操作（我想展示所有内容）：

1： `\`用作转义序列

```
>>> str('Let\'s Python')       
"Let's Python" 
```

2： `\`用作转义序列

```
>>> 'Let\'s Python'             
"Let's Python" 
```

3：`str()`并打印为值而不是类型

```
>>> print 'Let\'s Python'       
Let's Python 
```

4：它的 Python 是一个原始字符串

```
>>> repr('Let\'s Python')      
'"Let\'s Python"' 
```

[**问题**]

5：Python 原始字符串

```
>>> print r'Let\'s Python'    
Let\'s Python 
```

6：这个，我不明白以下几点：

```
>>> r'Let\'s Python'            
"Let\\'s Python"

>>> r'\\'
'\\\\' 
```

为什么`\\`？为什么输出`5`和`6`不同？
`r` 和`repr()`一样不一样吗？
还请解释`string` 和`raw strings`的内部表示相同或不同。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-02T13:39:25.327

您将原始字符串文字`r''`与字符串表示混淆。有一个很大的不同。`repr()`和`r''`不是*一回事*。

`r''`原始字符串文字像普通字符串文字一样产生字符串，但它处理转义码的方式除外。产生的结果仍然是一个 python 字符串。您可以使用原始字符串文字或普通字符串文字生成相同的字符串：

```
>>> r'String with \n escape ignored'
'String with \\n escape ignored'
>>> 'String with \\n escape ignored'
'String with \\n escape ignored' 
```

当不使用`r''`原始字符串文字时，我必须将斜杠加倍以对其进行转义，否则它将被解释为换行符。使用语法时我不必转义它，`r''`因为它根本不解释转义码`\n`。*输出*，即生成的python 字符串*值*，完全相同：

```
>>> r'String with \n escape ignored' == 'String with \\n escape ignored'
True 
```

解释器`repr()`用来将这些值回显给我们；产生python值的*表示：*

```
>>> print 'String'
String
>>> print repr('String')
'String'
>>> 'String'
'String'
>>> repr('String')
"'String'" 
```

注意`repr()`结果如何包含引号。当我们只回显`repr()`一个字符串时，结果*本身就是*一个字符串，所以它有*两组*引号。其他`"`引号标记结果的开始和结束，其中`repr()`包含*的*是 python 字符串的字符串表示形式`String`。

*生成*python字符串`r''`的语法也是一种生成表示python值的字符串的方法。也适用于其他 python 值：*`repr()``repr()`*

 *```
>>> print repr(1)
1
>>> repr(1)
'1' 
```

`1`整数表示为字符串`'1'`（字符串中的`1`字符）。*

# javascript - Google 地图 API：为什么我不能使用相对图标路径设置标记的图标？

> ID：13669684
> 
> 赞同：1
> 
> 时间：2012-12-02T13:24:41.663
> 
> 标签：javascript, google-maps, icons, relative-path

这些是我的标记选项

```
var markerOptions = {
                clickable: true,
                draggable: false,
                flat: true,
                map: map,
                icon: 'food.png',
                optimized: true,
                position: pos,
                title: name,
                visible: true,
                animation:google.maps.Animation.DROP,
            }; 
```

`'food.png'`位于 javascript 文件的同一文件夹中。但是它不起作用。

如果我使用完整的 http 路径，它可以正常工作。例如

```
http://localhost/javascript/food.png 
```

有可能避免这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:40:43.360

图标图像需要与引用它的 HTML 页面位于同一目录中，而不是与 javascript 位于同一目录中。

更新：正如 webaware 指出的那样，图标的相对路径应该相对于包含 HTML 文档的目录。

[文档中](https://google-developers.appspot.com/maps/documentation/javascript/examples/icon-simple)的示例在谷歌网站和我的机器上都可以正常工作。

# c# - 列表框更新后保持选择

> ID：13669688
> 
> 赞同：1
> 
> 时间：2012-12-02T13:25:07.623
> 
> 标签：c#, wpf, listbox

我`ListBox`有一些绑定的对象。每`ListBox`30 秒更新一次。更新后如何保持用户选择`ListBoxItem`？我`ListBox`使用该`Clear()`方法更新并再次设置对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:31:21.563

嗯...如果你清除它...

```
object selection = myListBox.SelectedItem;
myListBox.Clear();
myListBox.Items.AddRange(newItems);
if (newItems.Contains(selection))
    myListBox.SelectedItem = selection; 
```

# python - 从代码注入中传递给子进程的参数是否安全？

> ID：13669690
> 
> 赞同：1
> 
> 时间：2012-12-02T13:25:32.070
> 
> 标签：python, subprocess

从代码注入中传递给子进程的参数是否安全？

我正在构建一个小型 python 程序来做一些电影文件标记。为方便起见，我使用 subprocess.call() 将标签信息传递给 AtomicParsley（在 Windows 上）。标签信息是在线资源，自动检索。如果有人将代码放在标签中（即用某种 rd 术语替换演员），子流程是否可以安全地执行？这更像是一个概念问题，而不是关于语言细节的问题。

subprocess.call 使用 ['AtomicParsley',filename,'--tag1',tag1_info,(...)] 执行。由于命令的第一部分保证是 AP 可执行文件的名称，而第二部分保证是有效的文件名，我应该认为元信息数据库中的任何恶意代码都会作为字符串写入适当的标签（即，Actor 的名称将是 del C:\Windows)。这些看起来像是合理的假设吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T13:27:09.560

只要您使用参数列表并将`shell`其设置为 False，是的，这些参数不会受到代码注入的影响。它们不会被 shell 解析，因此不会受到任何代码执行机会的影响。

`CreateProcess`请注意，在 Windows 上，使用调用的事实已经降低了使用代码注入的机会。

# mysql - 我应该给唯一名称表中的每一行一个行 ID 吗？

> ID：13669693
> 
> 赞同：1
> 
> 时间：2012-12-02T13:26:02.710
> 
> 标签：mysql, database

我需要一些最佳实践和性能建议。

假设我有三个表：Employees、Jobs 和 Ranks。每个员工都有一份工作和一个等级，所以很明显我应该在我的员工表中引用这些表。

我的问题是，这些选项中哪个是最好的：

1) 每个职位和等级都存储有一个唯一的 ID，并与描述性名称配对。Employees 表应该引用另一个表中的唯一 ID，从而节省内存（描述性名称仅在 Jobs/Ranks 表中保存一次），但要查看描述性名称，我需要这样做`JOIN`：

```
SELECT Employees.EMPL_ID, Ranks.R_NAME, Jobs.J_NAME
FROM Jobs
JOIN Ranks ON Ranks.R_ID=Employees.RANK
JOIN Jobs ON Jobs.J_ID=Employees.JOB 
```

2) 只是唯一的描述性名称。这可能会浪费内存，因为我反复保存每个职级/工作的描述性名称，但我节省了我的`SELECT`陈述时间

<**编辑：** >

澄清一下，我主要关心的是如果我需要`SELECT`用多个`JOIN`s 而不是一个`SELECT`语句执行 s，我必须处理的性能。

我希望能够处理大量流量 - 特别是员工请求查看他们的工作和排名。

<**编辑**>

例子：

选项 1（ID 和名称）：

```
Employees:
 __________________________
/ EMPL_ID  |  RANK  | JOB  \
|    1     |    2   |  3   |
|    1     |    1   |  3   |
|    1     |    1   |  1   |
\__________|________|______/

Ranks:
 __________________
/  R_ID  |  R_NAME \
|    1   |   GRUNT |
|    2   |   BOSS  |
\________|_________/

Jobs:
 ____________________
/  J_ID  |  J_NAME   \
|   1    | JANITOR   |
|   3    | PRESIDENT |
\________|___________/ 
```

选项 2（唯一名称）：

```
Employees:
 _______________________________
/ EMPL_ID  |  RANK  | JOB       \
|    1     |  BOSS  | PRESIDENT |
|    1     |  GRUNT | PRESIDENT |
|    1     |  GRUNT | JANITOR   |
\__________|________|___________/

Ranks:
 __________
/   R_NAME \
|    GRUNT |
|    BOSS  |
\__________/

Jobs:
 ___________
/  J_NAME   \
| JANITOR   |
| PRESIDENT |
\___________/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:27:38.960

## 是的，总是给每一行一个唯一的 ID。

最佳实践是始终为每个表提供此信息。通常称为 'id' 或 the-table-name_id'

它应该没有商业价值。

许多“保证唯一”记录后来发现需要或存在或重复记录，并且始终拥有唯一的主键在满足/发现这一点时有很大帮助。

“唯一”的一个例子......那不是......如果一个系统有人们的社会安全号码，它们应该是唯一的。但是，有可能打错了。然后，当具有“错误输入”值的人出现并且他们的号码被输入时...除了识别行。

唯一记录是一个众所周知的问题。为所有记录提供唯一 ID 是解决该问题的解决方案的一部分。

上述所有情况的例外是性能。我不太关心几千条记录的连接速度，因为 SQL 数据库是为加快连接速度而设计的。我发现唯一标识的优势大于劣势。在某些情况下，您可能会因性能要求而更改上述做法。例如，如果必须将数百万条记录加载到内存中，则唯一 ID 空间的开销可能会成为一个问题。通常，如果人们开始关注 Redis、MongoDB 等 no-sql 解决方案，那么这些情况通常会发生。

以下是 SO 和其他网站上的一些其他参考资料：

[表中主键的最佳做法是什么？](https://stackoverflow.com/questions/337503/whats-the-best-practice-for-primary-keys-in-tables)

[一般来说，数据库中的每个表都应该有一个身份字段用作 PK 吗？](https://stackoverflow.com/questions/1207983/in-general-should-every-table-in-a-database-have-an-identity-field-to-use-as-a)

[http://www.sql-server-performance.com/forum/threads/do-i-need-a-unique-identifier-or-identity-column.16910/](http://www.sql-server-performance.com/forum/threads/do-i-need-a-unique-identifier-or-identity-column.16910/)

[SQL 中真的需要 ID 列吗？](https://stackoverflow.com/questions/6488663/is-an-id-column-really-needed-in-sql)

正如在一个答案中评论的那样“在社区中的宗教辩论中使用自然键与代理键”。还有关于回答者如何获得他们的“规则”的评论...... tee-hee......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:44:11.783

我强烈建议您添加一个 EMPL_ID (EmployeeID)。目前，您的应用程序可能工作得非常好，但是当您扩展它时，即使您认为自己不会这样做，EMPL_ID 也会派上用场。

不仅如此，如果您在代码中有可用的 EMPL_ID 并且需要访问您现在或将来构建的其他表，您所要做的就是将 EMPL_ID 添加到该表中，而不必复制两个 R_ID和新表中的 J_ID。

例如，如果您添加了一个 tblNotes 表。（我不知道您的应用程序的范围，因此我将仅参考注释表进行讨论）

在此示例中，您只需要以下列：noteID、EMPL_ID、note、noteDateTime...。

如果不添加 EMPL_ID，您将拥有多余的列，这些列是不必要的，而且很可能在多个表中！

此外，添加索引只能在一列上。

我总是为每个表添加一个 ID，因为它使生活变得如此轻松，尤其是当您的应用程序增长时。另外，我什至在某些情况下看到公司有两个同名的员工！当然，他们不太可能拥有相同的级别和工作，但这只是值得深思的！

我希望我正确理解了您的问题，并为您提供了一些有用的信息。

约翰

# android - 检索 priceColumn android SQLite 中的所有最小值

> ID：13669694
> 
> 赞同：-1
> 
> 时间：2012-12-02T13:26:02.883
> 
> 标签：android, database, sqlite

我在数据库中有产品表。productTable 里面有 productBar 和 price。我想获取所有的最低价格并显示在 listView 中。假设 producttable 里面有三个价格为 RM1（更低）的产品。但我的问题是它只在listView 中显示productPrice 的最后一列。

```
public Cursor getMinPrice(String barcode1) {
        // TODO Auto-generated method stub
        String[] args={barcode1};
        String name="";
        Cursor c= database.rawQuery("SELECT " + SQLiteHelper.product_id
                + " as _id, "+SQLiteHelper.productName+","+SQLiteHelper.productQtty+","+SQLiteHelper.product_ShoppingF+" ,"+SQLiteHelper.product_FId+" ,MIN("+SQLiteHelper.productPrice+") FROM "+SQLiteHelper.productTable+" WHERE  "+SQLiteHelper.productBar+ "=?",args);

        //return database.query(SQLiteHelper.productTable,null, "price=(SELECT MAX("+SQLiteHelper.productPrice+"))", null, null, null, null);
        try{
        c.moveToFirst();

            return c;
        }finally{

        }

    }

  public String getProductNameLower(Cursor c) {
        // TODO Auto-generated method stub
        return((c.getString(1)));
    }
} 
```

我的查询有什么问题吗？因为它只得到最低价格的最后一列。希望有人能指导我...谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:37:26.187

使用`MIN()`，您的查询将搜索包含最低价格的记录，并返回该记录。

如果您想拥有多条记录，请使用这样的查询，它会返回价格最低的三个记录：

```
SELECT * FROM product ORDER BY price LIMIT 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T12:39:42.823

您可以使用以下查询获取最低价格

```
SELECT MIN(productPrice)FROM productTable 
```

# c - c中的分段错误（核心转储）

> ID：13669695
> 
> 赞同：-1
> 
> 时间：2012-12-02T13:26:08.170
> 
> 标签：c, segmentation-fault, qsort

我`qsort`在c中使用函数..它是一个内置函数......它适用于长度小于7的字符串..在长度> 7的字符串上，它给出“分段错误（核心转储）”

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#define MAX 100

static int cmpr( const void *a, const void *b) { 
    return strcmp( *(char **)a, *(char **)b);
}

int main()
{
    int t;
    char str1[MAX],str2[MAX];

    scanf("%d",&t);

    while(t--)
    {
    scanf("%s %s",str1,str2);

    int len1=strlen(str1)/sizeof(char *);
    int len2=strlen(str2)/sizeof(char *);

    qsort(str1, len1, sizeof(char *), cmpr);
    qsort(str2, len2, sizeof(char *), cmpr);

    if((strstr(str1,str2)!=NULL)&& (strlen(str1)==strlen(str2)))
        printf("YES");
    else if((strstr(str2,str1)!=NULL) && (strlen(str1)==strlen(str2)))
        printf("YES");
    else if((strstr(str2,str1)!=NULL) && (strlen(str1)!=strlen(str2)))
        printf("NO");
    else if((strstr(str1,str2)!=NULL) && (strlen(str1)!=strlen(str2)))
        printf("NO");
    else
    printf("YES");
}

return 0;
} 
```

...知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:34:06.343

我认为线条

```
int len1=strlen(str1)/sizeof(char *);
int len2=strlen(str2)/sizeof(char *); 
```

应该读

```
int len1=strlen(str1);
int len2=strlen(str2); 
```

那么以下内容可能应该更改

```
qsort(str1, len1, sizeof(char), cmpr);
qsort(str2, len2, sizeof(char), cmpr); 
```

由于我们没有代码，`qsort`我会冒险猜测该`cmpr`函数也不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T13:38:11.763

在

```
qsort(str1, len1, sizeof(char *), cmpr); 
```

您对一组`sizeof(char*)` `char`s 块进行排序 - 这可能不是您想要的。

这样一个块的地址被传递给比较函数，

```
static int 
cmpr(const void *a, const void *b) { 
  return strcmp(*(char **)a, *(char **)b);
} 
```

它被解释为指向 a 的指针`char*`，然后被取消引用。然后将`sizeof(char*)` `char`数组中的 s 块传递给`strcmp`，在那里它被解释为指向以 0 结尾的字符数组的指针。很可能不是。

比较函数看起来好像要对字符串的后缀进行排序。如果是这种情况，您需要一个指向数组的指针数组`str1`进行排序。

如果您只想对`char`数组中的 s 进行排序，则应如 Ed Heal 所说，使用

```
qsort(str1, strlen(str1), 1, cmpr); 
```

（类似于`str2`），但您需要将`cmpr`功能更改为

```
static int cmpr(const void* a, const void* b) {
    return *(char*)a - *(char*)b;
} 
```

然后比较各个位置的字符。

# windows-phone - 在实际设备上测试 Windows Phone 8 App

> ID：13669696
> 
> 赞同：15
> 
> 时间：2012-12-02T13:26:25.907
> 
> 标签：windows-phone, windows-phone-8

在提交到商店之前，是否可以在**实际设备**上测试我的 windows phone 8 应用程序，例如诺基亚 Lumia 820（不是模拟器）？如何？

（*另外我可能需要为自己创建一些应用程序，而不是发送到商店...... :)*）

更新：我看到开发者应该为开发者帐户付费才能在手机上安装他们的应用程序，但是 WP8 呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-02T16:24:54.817

您可以在任何真实设备上测试您的应用程序，您只需要拥有开发者帐户来解锁您的手机或手机进行调试。
每位开发人员每年的费用为 99 美元，如果您是使用 DreamSpark 或 BizSpark 的学生，或者您订阅了 MSDN 或 TechNet，则可以免费获得。
[如何注册手机进行开发](http://msdn.microsoft.com/en-US/library/windowsphone/develop/ff769508%28v=vs.105%29.aspx)
拥有开发者账号后，只需启动Windows Phone 开发者注册工具，将手机连接到PC，解锁，然后就可以选择项目中的设备进行调试了。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-12-28T17:41:35.327

您**现在可以在没有开发者帐户的情况下注册一部手机**，正如您在注册手机的先决条件中所见：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769508%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769508%28v=vs.105%29.aspx)

您只需要拥有一个 Microsoft 帐户（**而不是**开发者帐户），您就可以在其中注册您想要测试的手机。微软还改变了你可以使用该开发者帐户注册多少部手机的限制：它们现在只有三部。我没有找到关于这些变化的官方声明，但它们肯定是最近才采取的......

从 Microsoft 下载中心下载 WP 8 SDK 后，转到计算机上的“所有应用程序”并选择“Windows Phone 开发人员注册”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-02T16:17:39.890

你可以将你的应用从 Visual Studio 部署到开发人员解锁的设备。这意味着您需要注册一个 Windows Phone Store 帐户以及与之关联的设备。您最多可以将 5 台设备与一个帐户关联。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-02T16:24:44.260

您需要拥有 Windows Phone 开发人员帐户才能在您的手机上部署和测试应用程序。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-25T11:13:34.853

您需要有一个 live/outlook 帐户和 Windows Phone 开发者注册工具来解锁设备以在设备上安装应用程序。此工具与您的 Windows Phone SDK 一起安装。

要安装应用程序，您需要先解锁设备，为此您需要通过 USB 将 Windows Phone 连接到系统并启动注册工具。该工具检测到手机并要求您登录您的 Microsoft 帐户（live/outlook），此步骤后手机成功解锁。

解锁手机后，您可以使用 Visual Studio 或 Windows Phone Power Tools 或应用程序部署工具在设备上安装应用程序。

以前我们需要有一个开发者帐户才能在设备上安装应用程序，但现在一个 Microsoft 帐户（live/outlook）就足够了。

# php - 平衡：创建帐户和处理付款问题

> ID：13669710
> 
> 赞同：1
> 
> 时间：2012-12-02T13:28:13.720
> 
> 标签：php, balanced-payments

我正在使用balanced-php并想知道：

1.  如何在请求中发送持卡人姓名？

2.  如何在 $marketplace->createBuyer() 中添加账户用户名？

3.  处理新支付时如何找回存储的卡信息，如何防止买家账户中的卡信息重复？

我使用以下来检查是否创建了电子邮件

```
$buyer = $marketplace
                ->accounts
                ->query()
                ->filter(Balanced\Account::$f->email_address->eq($buyer_email))
                ->one();

if(!$buyer){
    $buyer = $marketplace->createBuyer(
        $email_address,
        $card_uri);
    echo 'created ';
    $the_hold = $buyer->hold(1500);
    $debit = $the_hold->capture();
    echo 'charged';
}else{ .... } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T17:38:13.737

1.  如何在请求中发送持卡人姓名：

    卡片名称需要在创建卡片时发送，例如，当您使用[balanced.js](https://www.balancedpayments.com/docs/overview#create-a-card)对卡片进行标记时，或者当您通过balanced-php库或使用该方法[创建卡片对象时。](https://github.com/balanced/balanced-php/blob/master/src/Balanced/Card.php#L20)[`createCard`](https://github.com/balanced/balanced-php/blob/master/src/Balanced/Marketplace.php#L70)

2.  balance-php 库目前不接受名称参数，我在 Github 存储库上为您创建[了一个问题](https://github.com/balanced/balanced-php/issues/11)，如果您想知道 Balanced 何时添加该功能，您可以订阅该问题。现在，您可以获取生成的帐户对象，添加名称，然后调用 save 方法来更新它。

    代码看起来像这样：

    ```
    $account = $marketplace->createBuyer(...);
    $account->name = "Desired name here";
    $account->save(); 
    ```

3.  `account->cards`您可以使用应该返回与该帐户关联的所有卡的集合的方法来查看帐户的所有卡。为了防止重复，您应该遍历此列表，通过匹配 on 和属性来查找`name`重复`expiration`项`last_four`。如果您需要此代码示例，请告诉我们。

# objective-c - 为什么我的 NSPanel 没有正常的灰色背景？

> ID：13669713
> 
> 赞同：4
> 
> 时间：2012-12-02T13:28:29.903
> 
> 标签：objective-c, macos, cocoa, nspanel

我的应用程序在菜单栏中有一个图标。`NSPanel`当我单击图标时会出现A。但是为什么没有`NSPanel`像其他灰色背景那样的背景颜色`NSWindow`呢？我`NSPanel`的背景看起来像透明的。我`NSPanel`来自一个`.xib`文件。我的代码如下：

```
(void)openPanel
{

NSLog(@"openPanel");

NSWindow *panel = self.panelController.window;

NSRect rect = [[[NSApp currentEvent] window] frame];
NSLog(@"rect.origin.x = %f",rect.origin.x);
NSLog(@"rect.origin.y = %f",rect.origin.y);
NSLog(@"rect.size.width = %f",rect.size.width);
NSLog(@"rect.size.height = %f",rect.size.height);
[panel setFrame:NSMakeRect(rect.origin.x, rect.origin.y-100, 200, 100) display:YES];
[NSApp activateIgnoringOtherApps:NO];
[panel makeKeyAndOrderFront:nil];

isPanelVisible = YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:28:18.563

通常 NSPanel 是半透明的。请参阅[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nspanel_Class/Reference/Reference.html)了解更多信息。如果您不想要半透明，您可以在自定义类下将 IB 中的 NSPanel 从 NSPanel 更改为 NSWindow。

# java - 数组列表索引？

> ID：13669714
> 
> 赞同：1
> 
> 时间：2012-12-02T13:28:31.163
> 
> 标签：java, arraylist, indexing

如何找到存储在 ArrayList 中的 int 的索引？

```
public static void thisClass(int max, int[] queue1, ArrayList<ArrayList<Integer>> aList) {

    int[] anArr = Arrays.copyOf(queue1, queue1.length);
    Arrays.sort(anArr);

    ... //sorts ints into groups (ArrayList of ArrayLists)

    }

    int n = 0;
    for (ArrayList<Integer> t : newList) {
        String itemS = "";
        int total = 0;
        for (int index : t) {
            int value = index; //isn't returning index of arrayList - its returning the value
            if (!itemS.isEmpty()) {
                itemS += ", ";
            }
            itemS += index + ":" + value; //want it to output "element Position : element Value
            total += value;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T13:33:33.573

您正在使用`enhanced for loop`，也称为`foreach`循环。在这个循环中，循环内没有定义索引变量；它只是数组/Iterable 本身中的值。

要获取索引，您必须使用传统`for`循环：

```
ArrayList<Integer> myNumbers = new ArrayList<>();
myNumbers.add(123);
myNumbers.add(456);
myNumbers.add(789);

for(int i = 0; i < myNumbers.size(); i++) {
    int value = myNumbers.get(i);
    if(value == 789) {
        System.out.println("Found 789 at index " + i);
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T13:29:30.453

你需要用来`indexOf(object)`获取[索引](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#indexOf%28java.lang.Object%29)。

假设您使用的大于 java5。否则，您需要创建一个 Integer 对象而不是原始 int。

增强的 for 循环在内部使用迭代器，因此您无法获取索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T13:37:15.610

**-**使用`indexOf()`方法来解决这个......

```
for (ArrayList<Integer> t : newList){

      int index = newList.indexOf(t);

      System.out.println(index);      // Use an array or list to store these 
                                      // index if you want.

} 
```

# c++ - C ++：将参数应用于函数范围

> ID：13669719
> 
> 赞同：4
> 
> 时间：2012-12-02T13:30:14.887
> 
> 标签：c++, function, arguments

是否有一些更标准的方法可以将参数应用于函数范围？我想出了下面列出的解决方案，但感觉不对 - 应该已经有一些东西可以构建这样的逻辑。

```
template<typename Function, typename Result, typename Argument>
struct apply_argument_t {
    Argument x;
    Result operator () (Function f) {
        return f (x);
    }
}; 
```

因此，一个简单的用例：

```
transform (in.begin(), in.end(), out.begin(), apply_argument(x)); 
```

我故意跳过了实现细节。

**编辑：**但无论如何，正如他们被要求的那样：

`in`是一系列一元函数（例如`vector<int(*)(char)>`）

`out`是这些一元函数结果的范围（例如`vector<int>`）

`apply_argument`类似于结构，但没有模板规范和初始化（例如`apply_argument_t<int(*)(char), int, char>`）

我也错过了没有搜索 C++11 解决方案的评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:36:16.887

> 我故意跳过了实现细节。

那么这些细节包括你从哪里得到的，例如`Argument`类型。

无论如何，使用 lambda。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:13:46.517

我同意 Alf，但让我们向您展示如何在您的情况下做到这一点。

如果您使用 C++11，以下是 lambdas 问题的可能解决方案：（我使用`Function`，但您需要使用自己的特定函数类型。）

```
Argument x;
transform (in.begin(), in.end(), out.begin(),
  [x](Function f)
  {
    return f(x);
  }
); 
```

进一步阅读维基百科，C++11。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T08:26:12.617

如果您不打算使用 C++11，则可以使用`<functional>`来自 STL 的不同解决方案：

```
#include <functional>
#include <algorithm>

template<typename Argument, typename Result>
Result apply_function(Return (*f)(Argument), Argument x)
{
  return f(x);
}

transform (in.begin(), in.end(), out.begin(), bind2nd(ptr_fun(apply_function), x) ); 
```

但我认为您的解决方案更清洁。我只能考虑一种可能的简化：

```
template<typename Argument, typename Result>
struct apply_argument_t {
    Argument x;
    Result operator () (Result (*f)(Argument)) {
        return f (x);
    }
}; 
```

* * *

应该有一个**使用 Boost lambda library的**[解决](http://www.crystalclearsoftware.com/cgi-bin/boost_wiki/wiki.pl?Cookbook_-_Lambda_Library)方案，但由于某种原因[它不起作用**：**](http://www.crystalclearsoftware.com/cgi-bin/boost_wiki/wiki.pl?Cookbook_-_Lambda_Library)

```
#include<boost/lambda/lambda.hpp>
#include<boost/lambda/bind.hpp>
using namespace boost::lambda;
transform(in.begin(), in.end(), out.begin(), bind(_1, x)); 
```

[也参考这里。](http://www.boost.org/doc/libs/1_52_0/doc/html/lambda/le_in_details.html#id2476894)（我也尝试了一切，`protect`但它们没有用。）

# java - Java - 从存储在静态列表中的另一个类中获取所有数据

> ID：13669721
> 
> 赞同：0
> 
> 时间：2012-12-02T13:30:26.913
> 
> 标签：java, arrays, list, class

这是我将新人添加到静态列表的 Dialog 类

```
public class DialogInput extends Dialog{
   public static List<Person> person = new LinkedList<Person>();

   Text txtName;    

   @Override
   protected Control createPartControl(Composite parent){
     ...
     txtName = new Text(parent, SWT.NONE);
   }

   @Override
   protected void okPressed(){
      Person p = new Person();
      p.setName(txtName.getText());
      person.add(p);
   }
} 
```

// 另一个文件中的另一个类。

```
public class MyView extends ViewPart{
    public void createPartControl(Composite parent){

    // HOW TO GET LIST ?    

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:33:09.967

```
public class MyView extends ViewPart{
    public void createPartControl(Composite parent){

    // HOW TO GET LIST ? 
    List<Person> personList = DialogInput.person;   

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:34:08.570

尝试这个：

```
public class MyView extends ViewPart{

    public void createPartControl(Composite parent){

       List<String> pList = DialogInput.person;
    }
} 
```

# javascript - 如何将返回的 JSON 提取到 Excel 工作表中

> ID：13669723
> 
> 赞同：-1
> 
> 时间：2012-12-02T13:30:38.023
> 
> 标签：javascript, jquery, asp.net-mvc

我有以下方法调用返回 JSON 的 Web API：-

```
public ActionResult CompletedProcessList(int start = 0, int rows = 50)
        {
            using (var client = new WebClient())
            {            

                try
                {
                    var query = HttpUtility.ParseQueryString(string.Empty);
                    var url = new UriBuilder("http://localhost:8080/jw/web/json/monitoring/running/process/list");                    url.Query = query.ToString();
                    string json = client.DownloadString(url.ToString());
                    Thread.Sleep(500);
                    return Content(json, "application/json");
                }
                catch (System.Net.WebException)
                {

                    return Content("error", "application/json");
                }   }        } 
```

然后使用 javaScript 我在 table 上显示返回 JSON，javaScript 代码是：-

```
function getprocesslist(result) {

    $('#tablelist tbody, #tablelist thead').empty();

    var str = 'Total Number Of Processes:- ' + result.total.toString();
        $('#total').text(str.toString());

        var str1 = '<tr><th>NO.</th><th>' + 'Process Name' + '</th><th>' + 'Process Requestor ID' + '</th><th>' + 'Process State' + ' </th><th>' + 'Process Start Date' + ' </th><th>' + 'Process Due Date' + ' </th></tr>';
        $('#tablelist thead').append(str1);
        $.each(result.data, function (key, val) {
            var number = key +1 ;
        var str2 = '<tr><td>' + number  + '</td><td>' + val.name + '</td><td>' + val.requesterId + '</td><td>' + val.state + '</td><td>' + val.startedTime + '</td><td>' + val.due + '</td></tr>';

        $('#tablelist tbody').append(str2);

    });
} 
```

以上工作正常，但我需要实现一个新功能，我需要添加以下内容：-

1.  “流程名称”和“流程到期日期”列中有两个复选框，因此用户可以选择两个复选框中的任何一个

2.  一个按钮，用于将返回的 JSON 提取到 Excel 工作表，其中系统应根据用户选择在 Excel 工作表中包含“流程名称”或“流程截止日期”或两者。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:46:11.733

1.  对于第一部分，我不明白你到底在问什么 - 让它更具体并问另一个问题
2.  对于第二部分：我不知道如何直接导出到 Excel 工作表（因为 xls 是专有格式），但您可以将数据导出为 CSV（逗号分隔值）文档，Excel 可以理解。[google](https://www.google.com/search?q=json2csv&rlz=1C1ASUT_roRO487RO488&aq=f&oq=json2csv&aqs=chrome.0.57j0.5913&sugexp=chrome,mod=4&sourceid=chrome&ie=UTF-8)为 Json2CSV 提供了一些解决方案——选择你喜欢的那个。在我们的例子中，我们使用组合的 Javascript/PHP 解决方案：

javascript - 将 CSV 内容创建为文本：

```
function DownloadJSON2CSV(objArray, documentToExportTitle) {
    var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;
    var cols = array.cols;
    var rows = array.rows;

    //convert the cols 2 csv
    var str = '';
    var line = '';
    for (var i = 0; i < cols.length; i++) {

        line += cols[i].label + ',';

        // Here is an example where you would wrap the values in double quotes
        // for (var index in array[i]) {
        //    line += '"' + array[i][index] + '",';
        // }

        line.slice(0, line.Length - 1);                
    }
    str += line + '\r\n';

    //convert the rows 2 csv
    for (var i = 0; i < rows.length; i++) {
        line = '';
        for (var j = 0; j < rows[i].c.length; j++) {
            line += rows[i].c[j].v + ',';            
        }

        line.slice(0, line.length - 1);
        str += line + '\r\n';
    }

   //Call the php which will force downloading and saving in .csv format (which is excel ready)
    $("#reportContent").append('<form id="exportform" action="addressOfPhp" method="post" target="_blank"><input type="hidden" id="exportdata" name="exportdata" /><input type="hidden" id="docTitle" name="docTitle" /></form>');
    $("#exportdata").val(str);
    $("#docTitle").val(documentToExportTitle.replace(/ /g, "_"));
    $("#exportform").submit().remove();    
} 
```

php - 在用户的 PC 上强制下载为 CSV 文件提示：

```
 <?php

        header('Content-Type: application/force-download');
        header('Content-disposition: attachment; filename='.$_POST['docTitle'].'.csv');

        print $_POST['exportdata'];

    ?> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T16:31:36.630

这是一个使用 ActiveX 的解决方案，你必须使用 IE 所以......

```
function CreateExcelSheet()
        {
            //var x = myTable.rows
            var x = json.length;
            var xls = new ActiveXObject("Excel.Application")
            xls.visible = true
            xls.Workbooks.Add

            var i = 1;
            var j = 0;

            $.each(json, function(index, item) {
                $.each(item, function(key, value) {
                    xls.Cells(i + 1, j + 1).Value = value;
                    j++;
                });
                i++;
            });

        } 
```

# android - 在触发另一个事件之前，布局高度不会更新

> ID：13669724
> 
> 赞同：3
> 
> 时间：2012-12-02T13:30:54.183
> 
> 标签：android, android-layout

`GONE`我有一个在布局 xml中设置的 LinearLayout(A) 。我想要实现的是，当单击按钮（B）时，LinearLayout（A）将设置为`VISIBLE`，然后我获取它的高度以更新其父布局的高度。我设法将 LinearLayout(A) 设置为可见并获得它的高度，但是我无法直接更新其父布局的高度。我当前代码的问题是，父布局只会在触发另一个 UI 事件后自行更新（例如打开微调器下拉菜单、显示软键盘等）。我真正想要的是在单击按钮（B）后直接更新父布局。

这是我的代码。

```
@Override
public void onClick(View v) {
    if(v==buttonB) {
        ShowLinearLayoutA();
    }
}

private ViewTreeObserver vto;

private void ShowLinearLayoutA() {
    LinearLayoutA.setVisibility(View.VISIBLE);
    if (vto == null) {
        vto = LinearLayoutA.getViewTreeObserver();
        vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {
                ParentLayout.getLayoutParams().height=LinearLayoutA.getHeight();
                ParentLayout.invalidate();
            }
        });
    }
} 
```

我做错什么了 ？

请原谅我的英语，并提前非常感谢您。

编辑 1：我尝试使用`runOnUiThread`但它不起作用

我编辑的代码

```
private void ShowLinearLayoutA() {
    LinearLayoutA.setVisibility(View.VISIBLE);
    if (vto == null) {
        vto = LinearLayoutA.getViewTreeObserver();
        vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {
                ParentLayout.getLayoutParams().height=LinearLayoutA.getHeight();
                runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        ParentLayout.invalidate();
                    }
                });
            }
        });
    }
} 
```

编辑 2：

我放弃了尝试这种方法。相反，我使用动画并让它工作。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:40:51.803

您正在错误的线程上执行 UI 工作。在 UiThread 上执行 UI 操作，例如..,.

```
private void ShowLinearLayoutA() {
    YourActivity.this.runOnUiThread(new Runnable() {
        @Override
        public void run() {
            LinearLayoutA.setVisibility(View.VISIBLE);
        }
    });

if (vto == null) {
    vto = LinearLayoutA.getViewTreeObserver();
    vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            YourActivity.this.runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    ParentLayout.getLayoutParams().height=LinearLayoutA.getHeight();
                    ParentLayout.invalidate();
                }
            });
        }
    });
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-04T13:34:27.327

我知道这确实是个老问题，但我想它没有答案。我遇到了同样的问题，关键是你试图在运行时改变高度之前更新高度，简单的延迟任务可能是一个解决方案。

```
_layout.postDelayed(new Runnable() {
        @Override
        public void run() {
            _layout.setBackgroundDrawable(backgroundImage);
        }
    }, 100); // delayed for 0.1 sec 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T13:34:37.470

称呼

```
LinearLayoutA.invalidate() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T15:55:15.143

我放弃了尝试这种方法。相反，我使用动画并让它工作。谢谢 ：）

# javascript - 使用 jQuery 动态构建一个相当大的 DOM 元素

> ID：13669729
> 
> 赞同：1
> 
> 时间：2012-12-02T13:31:36.227
> 
> 标签：javascript, jquery, html, dom

我需要能够动态生成（并插入到 DOM 中）相当大的 HTML 元素，例如下面的代码片段：

```
<div class="messageToAndFromOtherMember" id="13">
    <span>the message</span> 
    <span>2012-12-02 14:05:45.0</span> 
    <span>sent</span>
    <input type="checkbox" value="13" id="listOfMessagesForDeletion3" name="listOfMessagesForDeletion">
    <input type="hidden" name="_listOfMessagesForDeletion" value="on">
</div> 
```

到目前为止，我不确定如何构建如此大的 DOM 元素并遵循 jQuery 最佳实践。我现在所做的只是简单地连接一个字符串，如下所示（这很丑陋......）：

```
 $("#latestMessages"+" "+"div[id^='"+response.senderId+'.'+response.recipientId+"'], #latestMessages"+" "+"div[id^='"+response.recipientId+'.'+response.senderId+"']").replaceWith("<div id='"+latestMessageId+"'><span>"+response.message+"</span><span>SENT</span><span><a href='"+response.recipientId+"'>ma conversation avec "+response.recipientId+"</a></span></div>"); 
```

如果有人能提出更好的构建 DOM 元素的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:55:06.867

您可以选择子元素并将响应数据应用于它们而不是串联。我认为根据您的代码段的上下文可能会有不止一条消息。在这种情况下，您可以使用模板来附加每个后续消息 div。为此，我更喜欢 knockoutjs 中的本机模板引擎， http: [//knockoutjs.com/](http://knockoutjs.com/)。还有很多其他 jquery 模板解决方案： [https ://stackoverflow.com/search?q=jquery+templating](https://stackoverflow.com/search?q=jquery+templating)

# c# - 使用 EPPlus 将 DataTable 导出到 Excel

> ID：13669733
> 
> 赞同：74
> 
> 时间：2012-12-02T13:31:50.440
> 
> 标签：c#, excel, datatable, export, epplus

我想使用 EPPlus 将数据表导出到 Excel 文件。该数据表具有 int 类型的属性，因此我希望 Excel 文件中的格式相同。

有谁知道将这样的 DataTable 导出到 Excel 的方法？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-12-04T08:32:56.560

```
using (ExcelPackage pck = new ExcelPackage(newFile))
{
  ExcelWorksheet ws = pck.Workbook.Worksheets.Add("Accounts");
  ws.Cells["A1"].LoadFromDataTable(dataTable, true);
  pck.Save();
} 
```

那应该对你有用。如果您的字段被定义为 int EPPlus 将正确地将列转换为数字或浮点数。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-01-14T18:14:26.050

如果你想在浏览器响应中下载

```
Response.Clear();
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
Response.AddHeader("content-disposition", "attachment;filename=" + HttpUtility.UrlEncode("Logs.xlsx", System.Text.Encoding.UTF8));

using (ExcelPackage pck = new ExcelPackage())
{
    ExcelWorksheet ws = pck.Workbook.Worksheets.Add("Logs");
    ws.Cells["A1"].LoadFromDataTable(dt, true);                 
    var ms = new System.IO.MemoryStream();
    pck.SaveAs(ms);
    ms.WriteTo(Response.OutputStream);                          
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-31T10:55:18.883

为了在浏览器中下载 excelsheet 使用`HttpContext.Current.Response`而不是`Response`否则你会得到*`Response is not available in this context.`*错误。这是我的代码

```
public void ExporttoExcel(DataTable table, string filename)
{
    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.ClearContent();
    HttpContext.Current.Response.ClearHeaders();
    HttpContext.Current.Response.Buffer = true;
    HttpContext.Current.Response.ContentEncoding = System.Text.Encoding.UTF8;
    HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
    HttpContext.Current.Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
    HttpContext.Current.Response.AddHeader("content-disposition", "attachment;filename=GridData.xlsx");

    using (ExcelPackage pack = new ExcelPackage())
    {
        ExcelWorksheet ws = pack.Workbook.Worksheets.Add(filename);
        ws.Cells["A1"].LoadFromDataTable(table, true);
        var ms = new System.IO.MemoryStream();
        pack.SaveAs(ms);
        ms.WriteTo(HttpContext.Current.Response.OutputStream); 
    }

    HttpContext.Current.Response.Flush();
    HttpContext.Current.Response.End();

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-04T18:06:55.673

这是将数据集导出到 Excel 的片段：

```
 private static void DataSetToExcel(DataSet dataSet, string filePath)
    {
        using (ExcelPackage pck = new ExcelPackage())
        {
            foreach (DataTable dataTable in dataSet.Tables)
            {
                ExcelWorksheet workSheet = pck.Workbook.Worksheets.Add(dataTable.TableName);
                workSheet.Cells["A1"].LoadFromDataTable(dataTable, true);
            }

            pck.SaveAs(new FileInfo(filePath));
        }
    } 
```

并使用语句：

```
using OfficeOpenXml;
using System.Data;
using System.IO; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-07T17:13:17.167

### 前言

^(在 v5 中，EPPlus 切换到付费许可模式用于商业用途。要在非商业环境中使用 v5，您需要将此静态代码行放在可以运行的位置：)

```
ExcelPackage.LicenseContext = LicenseContext.NonCommercial 
```

^(如果您在商业上使用它，您的公司可以获得许可证或使用 v4.5.3.3（它在 netcore/net5 中工作），这是最后一个可以在商业上免费使用的版本)

以下代码适用于 4.5.3.3

# C＃

DataTable 到 Excel，使用列名作为 Excel 标题。

之后它还会遍历表格并设置任何 DateTime 列，以便它们在 Excel 中显示为日期，而不是像 45123 这样的数字

```
 DataTable dt = ...;
        string sheetName = ...;
        string dateFormat = "yyyy-MM-dd HH:mm:ss";

        using var p = new ExcelPackage();
        var ws = p.Workbook.Worksheets.Add(sheetName);
        ws.Cells["A1"].LoadFromDataTable(dt, PrintHeaders: true);
        for (int c = 0; c < dt.Columns.Count; c++)
        {
            if (dt.Columns[c].DataType == typeof(DateTime))
            {
                ws.Column(c + 1).Style.Numberformat.Format = dateFormat;
            }
        } 
```

如果您在例如 API 控制器中使用它，您可以使用以下命令将其作为下载文件返回：

```
 string fileName = ...;  //without extension

    return File(p.GetAsByteArray(), "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", fileName + ".xlsx"); 
```

注意范围`using`！它是 C#8 语法，直到它声明的块结束

# VB.NET

与上面相同，但在 VB 中：

```
 Dim dt As DataTable = ...
    Dim sheetName As String = ...
    Dim dateFormat As String = "yyyy-MM-dd HH:mm:ss"

    Using p As New ExcelPackage()
        Dim ws = p.Workbook.Worksheets.Add(sheetName)
        ws.Cells("A1").LoadFromDataTable(dt, PrintHeaders:=True)

        For c As Integer = 0 To dt.Columns.Count - 1

            If dt.Columns(c).DataType Is GetType(Date) Then
                ws.Column(c + 1).Style.Numberformat.Format = dateFormat
            End If
        Next
    End Using 
```

并且对于下载，**它必须放在 using 块内**

```
 Dim fileName As String = ...  'without extension
    Return File(p.GetAsByteArray(), "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", fileName & ".xlsx") 
```

# php - 如何在不重复代码的情况下与许多不同的 Twitter 用户一起执行多个功能？

> ID：13669734
> 
> 赞同：0
> 
> 时间：2012-12-02T13:32:04.297
> 
> 标签：php, twitter, twitter-oauth

我正在使用 Twitter API 1.1 制作一个 wep 应用程序，并成功创建了一些函数，这些函数可以引入指定的用户个人资料图像、他们的实际姓名和他们的最新推文。全部使用 OAuth 对请求进行身份验证。

我的问题是——创建的所有 3 个函数都需要定义一个 twitter 用户名。目前，我必须为我输入的每个 Twitter 用户名一遍又一遍地复制我的代码。肯定有更好的方法吗？目前我的代码看起来一点也不好看。如果有人可以提供帮助，我将不胜感激。我对 PHP 还很陌生，所以一直坚持要做什么。

请参阅下面的代码：功能：

```
function getTweets($user, $tmhOAuth){
$usertweets = array();

$code = $tmhOAuth->request('GET', $tmhOAuth->url('1.1/statuses/user_timeline'), array(
  'include_entities'    => '1',
  'include_rts'         => '1',
  'screen_name'         => $user,
  'count'               => 1,
  'exclude_replies'     => 'true',
  'contributor_details' => 'true'
));

if ($code == 200) {
  $timeline = json_decode($tmhOAuth->response['response'], true); 
  foreach ($timeline as $tweet) :
    $entified_tweet = tmhUtilities::entify_with_options($tweet);
    $is_retweet = isset($tweet['retweeted_status']);

    $diff = time() - strtotime($tweet['created_at']);
    if ($diff < 60*60)
      $created_at = floor($diff/60) . ' minutes ago';
    elseif ($diff < 60*60*24)
      $created_at = floor($diff/(60*60)) . ' hours ago';
    else
      $created_at = date('d M', strtotime($tweet['created_at']));

    $permalink  = str_replace(
      array(
        '%screen_name%',
        '%id%',
        '%created_at%'
      ),
      array(
        $tweet['user']['screen_name'],
        $tweet['id_str'],
        $created_at,
      ),
      '<a href="https://twitter.com/%screen_name%/%id%">%created_at%</a>'
    );
     $tweet['created_at'] = $created_at;
     $usertweets[] = $tweet;
   endforeach;
   } else {
       tmhUtilities::pr($tmhOAuth->response);
}
    return $usertweets;
}

function getImage($screen_name,$tmhOAuth,$size = ''){
$url = $tmhOAuth->request('GET', $tmhOAuth->url('1.1/users/show'), array(
  'screen_name' => $screen_name,
));

$results = json_decode($tmhOAuth->response['response'], true);

//Get the user's profile image
$profileImg = ($results['profile_image_url']);
return str_replace('_normal', $size, $profileImg);
}

function getName($screen_name,$tmhOAuth){
$url = $tmhOAuth->request('GET', $tmhOAuth->url('1.1/users/show'), array(
  'screen_name' => $screen_name,
));

$results = json_decode($tmhOAuth->response['response'], true);

//Get the user's name
$name = ($results['name']);
return $name;
} 
```

功能是如何实现的：

```
$name2 = getName("JoeyEssex_",$tmhOAuth);
$user2 = getTweets("JoeyEssex_",$tmhOAuth);
$image2 = getImage("JoeyEssex_",$tmhOAuth);

$name3 = getName("piersmorgan",$tmhOAuth);
$user3 = getTweets("piersmorgan",$tmhOAuth);
$image3 = getImage("piersmorgan",$tmhOAuth);

$name4 = getName("BinkyFelstead",$tmhOAuth);
$user4 = getTweets("BinkyFelstead",$tmhOAuth);
$image4 = getImage("BinkyFelstead",$tmhOAuth);

//Display the profile images of specified users

echo '<img src="' . $image2 . '" width="240px" height="240px" />';
echo '<img src="' . $image3 . '" width="240px" height="240px" />';
echo '<img src="' . $image4 . '" width="240px" height="240px" />';

//Display user's name
echo '<p>Latest tweet from <b>' . $name1 . '</b>:<br />';
//Display their tweets
foreach($user1 as $tweet){ 
echo $tweet['text'] . '<br />';
echo "Sent: <b>" . $tweet['created_at'] . "</b></p>";
}

echo '<b>' . $name2 . '</b>&nbsp;';
foreach($user2 as $tweet){
echo $tweet['text'];
echo "&nbsp;" . $tweet['created_at'] . "<br />";
}

echo '<b>' . $name3 . '</b>&nbsp;';
foreach($user3 as $tweet){
echo $tweet['text'];
echo "&nbsp;" . $tweet['created_at'] . "<br />";
}

echo '<b>' . $name4 . '</b>&nbsp;';
foreach($user4 as $tweet){
echo $tweet['text'];
echo "&nbsp;" . $tweet['created_at'] . "<br />";
} 
```

你看到可怕的重复了吗？一定有更好的办法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:57:26.953

重复代码中唯一不同的部分实际上是发推文的人的姓名。因此，创建一个所有高音扬声器名称的列表并对其进行迭代。更改`foreach`循环内的代码以反映新的输入和处理：

```
$tweeters = array('JoeyEssex_', 'piersmorgan', 'BinkyFelstead');

foreach ($tweeters as $tweeter)
{
    $tweeter_name   = getName($tweeter, $tmhOAuth);
    $tweeter_tweets = getTweets($tweeter, $tmhOAuth);
    $tweeter_image  = getImage($tweeter, $tmhOAuth);    

    // Display the profile images of user
    echo '<img src="' . $tweeter_image . '" width="240px" height="240px" />';

    // Display user's name
    echo '<p>Latest tweet from <b>' . tweeter_name . '</b>:<br />';

    // Display user's tweets
    foreach ($tweeter_tweets as $tweet)
    {
        echo $tweet['text'] . '<br />';
        echo "Sent: <b>" . $tweet['created_at'] . "</b></p>";
    }
} 
```

将重复放入循环是表达代码重复的常用方法，意思是一遍又一遍地做同样的事情。

此外，您甚至可以开始将功能包装到一个`Tweeter`类中：

```
class Tweeter {

    private $name;
    private $tmhOAuth;

    public function __construct($name, $tmhOAuth) {
        $this->name     = $name;
        $this->tmhOAuth = $tmhOAuth;
    }

    public function getName() {
        return getName($this->name, $this->tmhOAuth);
    }

    public function getTweets() {
        return getTweets($this->name, $this->tmhOAuth);
    }

    public function getImage() {
        return getImage($this->name, $this->tmhOAuth);
    }
} 
```

这写得很快，自然你甚至可以将代码从现有`get...`函数移动*到*类方法中，但我保持它一步一步快速地进行第一次更改，而不删除现有代码。

那么用法就相当简单了：

```
$tweeters = array('JoeyEssex_', 'piersmorgan', 'BinkyFelstead');

// Create all Tweeter objects
foreach ($tweeters as $i => $tweeter)
{
    $tweeters[$i] = new Tweeter($tweeter, $tmhOAuth);
}

// Display all Tweeters

foreach ($tweeters as $tweeter)
{
    echo '<img src="' . $tweeter->getImage() . '" width="240px" height="240px" />';

    echo '<p>Latest tweet from <b>' . $tweeter->getName() . '</b>:<br />';

    foreach ($tweeter->getTweets() as $tweet)
    {
        echo $tweet['text'] . '<br />';
        echo "Sent: <b>" . $tweet['created_at'] . "</b></p>";
    }
} 
```

这将使您开始从面向对象编程中获利。

# java - 用哨兵停止线程不起作用

> ID：13669735
> 
> 赞同：0
> 
> 时间：2012-12-02T13:32:07.850
> 
> 标签：java, multithreading, arraylist, sentinel

我是java中的多线程新手，我不知道如何停止线程。我有一个`ArrayList`我想停止的线程。这是我的代码片段：

```
class PrimeThread implements Runnable {
    public void run() {
        while(flag) {
        //do some stuff
        }
    }
    public void cancel() {
        flag = false;
    }
...
}
Class MainClass {
    public static void stopPrimeThreads() {
        for(int i=0; i<primeThreadList.size(); i++) primeThreadList.get(i).cancel();
    }
} 
```

我尝试通过将`flag`变量设置为来停止线程`false`。该`flag`变量是`volatile boolean`在类本身中声明的。我还尝试使用外部类变量作为哨兵，但这也不起作用。非`volatile`变量也不能完成这项工作。当我使用不推荐使用的`stop()`方法时，我得到了我想要的行为，但我不想使用不推荐使用的方法。有人知道如何解决这个问题吗？我错过了一些基本的东西吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:34:24.287

使用你的**取消**方法不要停在这条线上......

```
primeThreadList.get(i).stop(); 
```

像这样...

```
primeThreadList.get(i).cancel(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T13:38:17.893

如果您使用了非易失性字段，JIT 可以优化该字段的读取，即因为您不在线程中修改它。如果您制作该字段`volatile`，它将确保您的更改始终可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T13:40:38.460

很难知道为什么这不起作用，因为您没有提供 SSCCE，但您应该简单地使用为此设计的中断（），并且即使线程正在等待某个阻塞方法，也允许停止线程：

```
public void run() {
    while (!Thread.currentThread().isInterrupted()) {
        ...
    }
} 
```

并停止线程：

```
thread.interrupt(); 
```

当然，无论您选择哪种解决方案，如果您在外循环中有另一个长时间运行的循环，线程将不会停止，直到它检查中断/取消标志的值。确保尽可能多地检查标志。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T13:43:48.677

使内部循环类似于

```
while (flag) {
   // smaller step 1
   if (!flag) break;
   // so on
} 
```

As a side-note, if your internal loop takes very long time, it *may* indicate you using some sub-optimal algorithm. Though, if you working with very large numbers, long calculation times are unavoidable.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T13:37:03.313

```
class PrimeThread implements Runnable {
    private volatile boolean flag = true;
    public void run() {
        while(flag) {
        //do some stuff
        }
    }
    public void cancel() {
        flag = false;
    }
...
}
Class MainClass {
    public static void stopPrimeThreads() {
        for(int i=0; i<primeThreadList.size(); i++) primeThreadList.get(i).cancel();
    }
} 
```

# markdown - doxygen markdown 无法解析防护代码块

> ID：13669738
> 
> 赞同：0
> 
> 时间：2012-12-02T13:32:12.570
> 
> 标签：markdown, doxygen

Doxygen 无法解析markdown 文件中的[防护代码块](http://www.doxygen.nl/manual/markdown.html#md_fenced)。这是我的片段：

```
~~~~~~~~~~~~~~~~~~~~{.cpp}
#include <cstdio>

int main() {
    printf("Hello World");
}
~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

这以纯文本形式出现在输出中。

> ```
>  int main() { printf("Hello World"); } ~~~~~~~~~~~~~~~~~~~~~~~~~~ 
> ```

我的错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T13:38:30.600

事后看来，这看起来微不足道，但我花了很多时间调试它，所以我认为我应该与社区分享。问题是围栏块开始和结束处的波浪号`~`应该相等。

标记一个围栏块至少需要 3 个波浪号，但为了使围栏块更容易看到，我喜欢将它们延伸到整条线。我最初在末尾复制粘贴了起始行，但后来我删除了几个`~`s 为`{.cpp}`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-11-23T11:34:19.330

```
~~~c
#include <cstdio>

int main() {
    printf("Hello World");
}
~~~ 
```

At the beginning and the end of the same number of (~). You can like it more beutiful code block.

# objective-c - 向数组添加新行后 TableView 不会更新 [[self tableView] reloadData] 不起作用

> ID：13669741
> 
> 赞同：-1
> 
> 时间：2012-12-02T13:32:42.977
> 
> 标签：objective-c, cocoa-touch, uitableview, ios6

我正在开发一个程序，但在更新 tableView 时遇到问题。我几乎有一个 tableView，起初只有空行。然后用户点击 + 号，我在堆栈顶部推送一个新的 tableview，用户可以从他们想要添加到初始表的行的主列表中选择。用户选择的行被添加到数组中。当用户单击后退按钮时，第一个表不会更新。但是，如果我按下 HOME 键然后重新加载应用程序，第一个表视图会显示更新后的数组。我已经包含了两个表和我的 gloabl 数组中的代码。

第一个表的 .m 文件

```
@interface baseTableViewViewController ()

@end

@implementation baseTableViewViewController

//@synthesize tableView = _tableView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

    }
    return self; }

- (void)viewDidLoad {
    [super viewDidLoad];

     }

-(void)viewDidlAppear:(BOOL)animated{

}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated. }

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [[[DataClass getInstance]allItems]count]; }

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"base"];

    if(!cell){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:@"base"];
    }

    BaseInfo *infoAtIndex = [[[DataClass getInstance] allItems] objectAtIndex:[indexPath row]];

    [[cell textLabel] setText:[infoAtIndex name]];
    [[cell detailTextLabel] setText:[infoAtIndex icao]];
    return cell; }

-(void)awakeFromNib{
    [super awakeFromNib]; }

-(void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:YES];
    [[self tableView]reloadData];
     }

@end

.h file for first table

@class baseTableViewViewController; @class BaseInfoDataController;

@interface baseTableViewViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>

@property (nonatomic, retain) UITableView *tableView;

@end 
```

第二个表的 .m 文件（主列表）

```
@class BaseInfo; @interface MasterListTableViewController ()

@end

@implementation MasterListTableViewController @synthesize delegate;

- (id)initWithStyle:(UITableViewStyle)style {
    self = [super initWithStyle:style];
    if (self) {

    }
    return self; }

- (void)viewDidLoad {
    [super viewDidLoad];   }

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated. }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    return [self.dataController countOfList]; }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Base";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil){
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];

    }

    BaseInfo *infoAtIndex = [self.dataController objectInListAtIndex:indexPath.row];
    [[cell textLabel] setText:infoAtIndex.name];
    [[cell detailTextLabel] setText:infoAtIndex.icao];

    return cell; }

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];

    NSMutableArray *addBaseList = [[NSMutableArray alloc]init];
    self.masterList = addBaseList;
    BaseInfo *inform;

    if ([selectedCell accessoryType] == UITableViewCellAccessoryNone){
        [selectedCell setAccessoryType:UITableViewCellAccessoryCheckmark];

        inform = [self.dataController objectInListAtIndex:indexPath.row];
        NSLog(@"%@",inform.name);
        NSLog(@"%@",inform.icao);

        [DataClass.getInstance addObject:inform];

    }else{
        [selectedCell setAccessoryType:UITableViewCellAccessoryNone];

    }

    [tableView deselectRowAtIndexPath:indexPath animated:NO];
     }

-(void)awakeFromNib{
    [super awakeFromNib];
    self.dataController = [[MasterListDataController alloc]init]; }

-(IBAction)cancel:(id)sender{

    [self masterListTableViewControllerDidCancel:self];

}

-(IBAction)done:(id)sender{

    [self masterListTableViewControllerDidSave:self]; }

-(void)masterListTableViewControllerDidCancel:(MasterListTableViewController
*)controller{

    [self dismissViewControllerAnimated:YES completion:nil]; }

-(void)masterListTableViewControllerDidSave:(MasterListTableViewController
*)controller{

    [self dismissViewControllerAnimated:YES completion:nil]; }

@end 
```

下面是第二个表的 .h

```
@class MasterListTableViewController; @class BaseInfo;

@interface MasterListTableViewController : UITableViewController

@property (nonatomic, assign) id delegate; @property (nonatomic, copy) NSMutableArray *masterList; @property (nonatomic, retain) NSArray
*baseNames; @property (nonatomic, retain) NSArray *icao; @property (strong, nonatomic) MasterListDataController *dataController; @property (nonatomic, copy)BaseInfo *inform;

- (IBAction)cancel:(id)sender;
- (IBAction)done:(id)sender;

-(void)masterListTableViewControllerDidCancel:(MasterListTableViewController
*)controller;
-(void)masterListTableViewControllerDidsave:(MasterListTableViewController
*)controller;

@end 
```

最后是我与方法一起使用的全局数组

```
@implementation DataClass @synthesize userBaseList;

+(DataClass *)getInstance{
    static DataClass *instance = nil;
    //@synchronized(self)
    {
        //if(instance ==nil)
        if(!instance)
        {
            //instance = [DataClass new];
            instance = [[super allocWithZone:nil]init];
        }
    }
    return instance; }

-(void)addObject:(BaseInfo*)info{
    [self.userBaseList addObject:info];
     }
-(void)removeObjectAtIndex:(NSInteger)atIndex{
    [self.userBaseList removeObjectAtIndex:atIndex]; }

+(id)allocWithZone:(NSZone *)zone{
    return [self getInstance]; }
-(id)init{
    self = [super init];
    if (self){
        userBaseList = [[NSMutableArray alloc]init];
    }
    return self; }
-(NSArray *)allItems{
    return userBaseList; } @end 
```

我认为解决方案必须是我所缺少的非常简单的东西，但我只是看不到它。我已经阅读了适用于 uitableview 开发的苹果开发人员指南，但我仍然卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:25:50.687

您正在分配 DataClass 的超类的实例，而不是 DataClass。你不需要定义allocWithZone，反正是错的。你只需要这个：

```
-(id)init { 
    self = [super init];
    if (self) { 
        userBaseList = [[NSMutableArray alloc]init];
    }
    return self;
}
+(DataClass *)getInstance {
    static DataClass *instance = nil;
    if(!instance)
        instance = [[DataClass alloc]init];
    return instance;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:06:08.960

将表 1.h 更改为以下内容：

```
@class baseTableViewViewController; @class BaseInfoDataController;

@interface baseTableViewViewController : UITableViewController <UITableViewDelegate, UITableViewDataSource>

@property (nonatomic, retain) UITableView *tableView;

@end 
```

我不得不将它定义为 UITableViewController 而不是 UIViewController。一旦我纠正了这一点，它就会刷新列表。

# ruby-on-rails - 知道响应的类型

> ID：13669747
> 
> 赞同：0
> 
> 时间：2012-12-02T13:33:46.700
> 
> 标签：ruby-on-rails, ruby, json, response

我想在说明之前知道动作控制器（json、html、xml）的响应类型：

```
respond_to do |format|
        format.html{
...
end 
```

有可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:45:45.583

您可以使用，

```
request.format.symbol 
```

这将列出当前的请求格式。

如果您还需要其他详细信息，我建议您检查请求对象，

```
p request.inpect 
```

# c - 使用结构的函数会导致段错误

> ID：13669748
> 
> 赞同：0
> 
> 时间：2012-12-02T13:33:48.013
> 
> 标签：c, struct, segmentation-fault, function-pointers

我有一个带有两个指向函数和一些数据的指针的结构。这些函数在定义上是相同的，但是它们应该执行不同的任务（这就是为什么它们在原始源中具有不同的名称）。如果我使用第一个函数，一切顺利，但如果我使用第二个函数，我会得到一个段错误 - 即使我将相同的指针传递给这两个函数。

指针既不是 NULL 也不是垃圾，否则两者都会失败 - 但不知何故，只有后者会出现段错误。这是为什么？

我有以下代码：

```
typedef void (*funcOneDef)(void*);
typedef void (*funcTwoDef)(void*);
typedef struct structImpl* structPt;

struct structImpl {
    void *data;
    funcOneDef funcOne;
    funcTwoDef funcTwo;
}; 

structPt create(void *data, funcOneDef funcOne, funcTwoDef funcTwo)
{
    structPt test = malloc(sizeof(test));
    test->data = data;
    test->funcOne = funcOne;
    test->funcTwo = funcTwo;
    return test;
}

void execFuncOne(structPt test) 
{
    test->funcOne(test->data); //works!
}

void execFuncTwo(structPt test)
{
    test->funcTwo(test->data); //segfault!
} 
```

PS：无需对此进行测试，因为它以某种方式有效，但我的原始来源 - 基本相同 - 不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:37:03.113

线不`structPt test = malloc(sizeof(test));`应该`structPt test = malloc(sizeof(structImpl));`吗？

# php - FOSUser - 禁用登录用户的登录页面

> ID：13669749
> 
> 赞同：0
> 
> 时间：2012-12-02T13:33:51.233
> 
> 标签：php, symfony, bundle, symfony-2.1, fosuserbundle

如果他们尝试访问登录页面，我尝试了 3 天在 FOSUser 中进行重定向以将登录的人员重定向到索引，但不幸的是，似乎没有办法做到这一点。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:27:56.143

loginAction 中的这个小扩展应该可以解决问题。

```
$user = $this->container->get('security.context')->getToken()->getUser()
if (is_object($user) && $user instanceof UserInterface) {
    return  new RedirectResponse($this->container->get('router')->generate('_your_route'));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:17:23.573

您可以覆盖 FOSUserBundle SecurityController loginAction() 方法。在内部，检查用户是否已连接并在需要时`$this->container->get('security.context')->getToken()->getUser();`重定向。`$this->redirect`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:46:20.990

这可以通过防火墙配置中的**default_target_path来完成：**

```
security:
    firewalls:
    somename:
        form_login:
            default_target_path: /your-desired-path 
```

在书中找到官方说明：http: [//symfony.com/doc/current/reference/configuration/security.html#form-login-configuration](http://symfony.com/doc/current/reference/configuration/security.html#form-login-configuration)

# javascript - 页面加载后是否可以混淆javascript

> ID：13669752
> 
> 赞同：0
> 
> 时间：2012-12-02T13:34:23.110
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, razor, obfuscation

我之前问过类似的问题，但我没有找到有效的解决方案。
如果项目列表，我将模型返回到视图。
比在剃刀视图上，我使用`@:`剃刀语法将标记添加到谷歌地图。
问题是当有人检查页面代码时，他可以看到：

```
...
addMarker('aaa', 1, 44.010052, 20.914279, '', 'aaa', 'test', map, '', 'aaa');
                    addMarker('aaa', 1, 44.016009, 20.91445, '', 'aaa', 'test', map, '', 'aaa');
... 
```

我正在尝试找到不显示此内容的解决方案。
也许它与使用有关`@:`

```
foreach (var item in Model.Rents)
                {   
                    @:addMarker('@item.prop', @item.prop, @item.Latitude, @item.Longitude, '', '@item.prop', '', map, '', '@item.prop');

                } 
```

# php - 在 PHP 中重新加载页面时保留表单输入字段值

> ID：13669757
> 
> 赞同：0
> 
> 时间：2012-12-02T13:34:45.170
> 
> 标签：php, forms, session

我有一个带有表格的网页。

当 de _POST 方法被激活时，我使用这个 php 代码将表单的值放入会话中：

```
<?php session_start(); ?>
<?php
$dump ='';
$dump .='<!DOCTYPE html>
<html>
<head></head>
    <body>';

$dump .='   
    <h1>Deel 1: registratiegegevens</h1>
<form action="oplossing21-deel2.php" method="post">

<ul>
        <li>            <label for="email">email: </label><input type="text" name="email" id="email" value="'.$email.'" />
        </li>
                    <br />
        <li>            <label for="nickname">nickname: </label><input type="text" name="nickname" id="nickname" />
        </li>
                    <br />
        <li>            <input type="submit" value ="volgende" />
        </li>

</ul>
                </form>

';  

if ($_POST) {
  // Store our name in the session array
  $_SESSION["email"] = $_POST["email"];
  $_SESSION["nickname"] = $_POST["nickname"];
}

$email = isset($_SESSION["email"]) ? $_SESSION["email"] : "leeg";

    $dump .='   

    </body>
</html>';
echo $dump;

?> 
```

现在我想知道如何确保如果我重新加载页面（F5 或 cmd+r），这些字段会填充最后输入的值。所以我提交了表格，然后我转到下一页，但是当我回来时，我希望输入字段填写最后一个已知值。有人可以帮我弄这个吗？我已经尝试使用 isset() - 函数做一些事情，但我不知道从这里去哪里。

在第二页上，我只是将会话放在 html 文件中，这样就可以了..

```
<li>'.$_POST["email"].'</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:36:22.100

更好的方法将在 onkeyup 事件上使用 html5 存储，因此即使重新加载它仍将在本地存储中，但如果您不能仅在 php 中执行此操作，那么您需要使用 ajax 并在一段时间后调用 ajax 或 onkeyup..etc事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T01:43:23.060

任何时候你想使用$_POST，你都需要把它放在“form”标签调用的“action”文档中。在将表单数据发送到服务器之前，文档无法存储值。在操作文档“oplossing21-deel2.php”中放置 $_SESSION["email"] = $_POST["email"]; 和 $_SESSION["nickname"] = $_POST["nickname"];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T01:56:17.163

然后在您的表单方法文件中`oplossing21-deel2.php`使用`<?php session_start(); ?>`，执行

`$_SESSION["email"] = isset($_POST["email"]) ? $_POST["email"] : "";`

它将电子邮件值保存到会话中。

当您返回表单文件时

`$email = isset($_SESSION["email"]) ? $_SESSION["email"] : "";`

`<input type="text" value="<?php echo $email; ?>" />`

此外，当您成功使用表单方法文件中的值时，请清除会话`$_SESSION["email"]="";`，这样当您再次重新加载表单时旧值将不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T13:41:12.453

您可以通过检查是否在页面加载期间设置了变量来做到这一点。例如：

```
PHP
$email = isset($_SESSION["email"]) ? $_SESSION["email"] : ""; 
```

并且在

```
HTML
<input type="text" value="<?php echo $email; ?>" /> 
```

因此，如果设置了会话变量，则将其内容插入该字段 - 如果没有，则插入一个空字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-09T07:01:39.410

在您的表单提交的页面上做这样的事情

```
session_start();
$_SESSION['data'] = $_POST['data'];
$_SESSION['data_another'] = $_POST['data_another']; 
```

并且您可以在任何地方像这样访问这些会话变量

```
session_start(); // this should be at the top of the page before any html load
<input type="text" name="name" value="<?php echo $_SESSION['data'];?>"/> 
```

# mysql - 这个查询有什么问题？

> ID：13669761
> 
> 赞同：0
> 
> 时间：2012-12-02T13:35:16.313
> 
> 标签：mysql

这个 SQL 查询有什么问题？我是新手

```
ALTER TABLE `users`;
ADD COLUMN `balance` decimal(11,2) DEFAULT '0.00' ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:36:35.377

`;`在不使用表前的情况下尝试此操作`users`：-

```
 ALTER TABLE `users` ADD COLUMN `balance` decimal(11,2) DEFAULT 0.00; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T13:36:12.660

像这样尝试（删除第一个分号和默认值周围的引号）：

```
ALTER TABLE `users` ADD COLUMN `balance` decimal(11,2) DEFAULT 0.00; 
```

# jquery - 在内容脚本中使用 jquery 的 Chrome 扩展解决了创建对话框窗口时的错误

> ID：13669762
> 
> 赞同：1
> 
> 时间：2012-12-02T13:35:18.680
> 
> 标签：jquery, jquery-ui, google-chrome-extension

我尝试在我的 Chrome 扩展程序中使用 jQuery 和 jQuery-UI。每次创建新选项卡时，我都会尝试在内容脚本对话框窗口中创建，但我不断收到：

```
Property '$' of object [object Window] is not a function 
```

我想我在加载脚本时做错了。这是我所拥有的：

```
{
"name":"Sample",
"description":"This is a sample",
"manifest_version":2,
"version":"2",
"background":{
    "scripts":["background.js"]
},
"content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["jquery-1.8.3.min.js","jquery-ui.js","client.js","myscript.js"]
      "run_at":"document_end",
      "all_frames": true
    }
  ],
"web_accessible_resources": [
    "client.js","jquery-1.8.3.min.js","jquery-ui.js"
  ],
"permissions": [ 
        "unlimitedStorage",
        "http://*/",
        "<all_urls>",
        "tabs"
   ]
} 
```

myscript.js（内容脚本）：

```
var ss = document.createElement('script');
ss.type = "text/javascript";
ss.src = chrome.extension.getURL('jquery-1.8.3.min.js');
ss.onload = function() {
    ss.parentNode.removeChild(ss);
     console.log("jquery-1.8.3.min.js loaded");

};

var ss_ui = document.createElement('script');
ss_ui.type = "text/javascript";
ss_ui.src = chrome.extension.getURL('jquery-ui.js');
ss_ui.onload = function() {
    ss_ui.parentNode.removeChild(ss_ui);
    console.log("jquery-ui.js loaded");
};

var s = document.createElement('script');
s.type = "text/javascript";
s.src = chrome.extension.getURL('client.js');
s.onload = function() {
    s.parentNode.removeChild(s);
    console.log("client.js loaded");
};

        try{

            (document.head||document.documentElement).appendChild(ss);
            (document.head||document.documentElement).appendChild(ss_ui);
            (document.head||document.documentElement).appendChild(s);

        }catch(e){
          console.log("exception in appendChild");
        } 
```

client.js（我创建对话框的地方）

```
 try{
        console.log("Starting to create tabel");

        var layerNode= document.createElement('div');
            layerNode.setAttribute('id','dialog');
            layerNode.setAttribute('title','Basic dialog');
        var pNode= document.createElement('p');
            pNode.innerHTML = "This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.";

        layerNode.appendChild(pNode);
        document.body.appendChild(layerNode);

        jq162 = jQuery.noConflict(true);
(function($){
    $(document).ready(function() {
       $("#dialog" ).dialog();
    });
})(jq162);

        }
        catch(e){
          console.log("script in page exception in appendChild"+e);
          //alert(e);
        } 
```

当我在控制台中看到我得到的打印顺序时：

```
Starting to create tabel client.js:2
script in page exception in appendChildTypeError: Cannot call method 'dialog' of null client.js:26
client.js loaded chrome-extension://mmoccjinakdjcmhjdjghhjnihbfkkgkp/myscript.js:24
jquery-1.8.3.min.js loaded chrome-extension://mmoccjinakdjcmhjdjghhjnihbfkkgkp/myscript.js:6
jquery-ui.js loaded 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T08:49:00.420

通常的discalimer，我并没有真正做JQuery ......但我看到你的代码有一个明显的问题，所以试了一下......

摆脱 client.js，在您将注入的文件添加到清单的内容脚本部分后，不再需要它。将它们添加到清单后，Chrome 现在将为您注入它们。一旦你这样做了，它就开始工作了一半。

之后我注意到出现了对话框但没有图形/样式，因此您需要将 css 文件添加到清单的内容脚本部分以进行注入。现在有一些样式，但控制台说它无法获取样式所需的图形文件。

我不确定最好的方法是从 css 文件中引用扩展目录中包含的图形文件，所以我只是将所有图形转换为 dataurl 并将它们放入 css 文件中。您可以使用像这样的工具...
[http://dataurl.net/#dataurlmaker](http://dataurl.net/#dataurlmaker)
...完成这项工作。
现在我们有了一个漂亮的对话框。

**清单.json**

```
{
"name":"JQery UI Dialog",
"description":"https://stackoverflow.com/questions/13669762/chrome-extention-using-jquery-in-content-script-resolve-error-when-creating-dial",
"manifest_version":2,
"version":"2",
"content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["jquery-1.8.3.min.js","jquery-ui.js","client.js"],
      "run_at":"document_end",
      "all_frames": true,
      "css":["jquery-ui-base64.css"]
    }
  ],
"web_accessible_resources": [
    "client.js","jquery-1.8.3.min.js","jquery-ui.js"
  ],
"permissions": [ 
        "unlimitedStorage",
        "http://*/",
        "<all_urls>",
        "tabs"
   ]
} 
```

**jquery-ui-base64.css**
[https://gist.github.com/4193693](https://gist.github.com/4193693)
觉得放在这里可能有点大。

**客户端.js**

```
try {
  console.log("Starting to create tabel");

  var layerNode = document.createElement('div');
  layerNode.setAttribute('id', 'dialog');
  layerNode.setAttribute('title', 'Basic dialog');
  var pNode = document.createElement('p');
  pNode.innerHTML = "This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.";

  layerNode.appendChild(pNode);
  document.body.appendChild(layerNode);

  jq162 = jQuery.noConflict(true);
  (function($) {
    $(document).ready(function() {
      $("#dialog").dialog();
    });
  })(jq162);

} catch(e) {
  console.log("script in page exception in appendChild" + e);
  //alert(e);
} 
```

**编辑**
使用 chromes i18n 支持，我们可以更改 css 中图像的 url，以便它们指向我们扩展中的文件。
[https://stackoverflow.com/a/8864212/189093](https://stackoverflow.com/a/8864212/189093)
所以这...
`url(images/ui-bg_flat_0_aaaaaa_40x100.png)`
...成为...
`url(chrome-extension://__MSG_@@extension_id__/images/ui-bg_flat_0_aaaaaa_40x100.png)`
并且路径不再是相对的，并且`__MSG_@@extension_id__`被替换为您的扩展程序的ID。
此外，所有以这种方式使用的图像都需要在`web_accessible_resources`mainfest 的一部分中声明。
所以，你清单中的那部分最终看起来像这样（注意我拿出了你在那里的三个，它们现在不需要被包含在内，因为它们现在被扩展注入了）......

```
"web_accessible_resources": [
    "images/ui-bg_flat_75_ffffff_40x100.png","images/ui-icons_222222_256x240.png","images/ui-bg_highlight-soft_75_cccccc_1x100.png"
  ] 
```

..我只包括了我需要让我的测试工作的文件，你可能需要添加更多。检查脚本正在运行的页面上的控制台，它会告诉您需要添加哪些文件。
这是我的测试中使用的相同 css 文件的链接，其中 url 已更新为以这种方式工作...
[https://gist.github.com/4195616](https://gist.github.com/4195616)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:40:59.157

当您调用`jQuery.noConflict`then`$`变量时将不会被定义。

但是在`script.js`你打电话`$(document)`之后`noConflict`。`(function($`我想你打电话后忘记了线路`noConflict`。

您必须将代码更改为以下内容：

```
jq162 = jQuery.noConflict(true);
(function($){
    $(document).ready(function() {
       $("#dialog" ).dialog();
    });
})(jq162); 
```

# javascript - 将复选框从一组移动到另一组

> ID：13669768
> 
> 赞同：1
> 
> 时间：2012-12-02T13:36:21.010
> 
> 标签：javascript, jquery

我想做一个简单的工作搜索，但我不能完成，如果我选中了未完成的复选框，**它**会移动到**完成**组，如果我选中第二个复选框，它也会移动到**完成**组，如果我选中了选中**Done**中的框它移回**Undone**我已经在 jquery 中完成了此操作，但想在 javascrip 中执行此
*操作任何人都可以帮助我*

```
<table width="427" height="88">
<tr><td><input type="button" name="submit" value="Add New" /></td></tr>
<tr>
<td id="1">Undone<br />
<input type="checkbox" name="chk1" id="chk1" onclick="remove(this.id);" />
<input type="checkbox" name="chk2" id="chk2" onclick="remove(this.id);"/>
<input type="checkbox" name="chk3" id="chk3" onclick="remove(this.id);"/></td>
</tr>
<tr>
<td id="2">Done<br />
<input type="checkbox" name="chk4" id="chk4" onclick="remove2(this.id)"/>
<input type="checkbox" name="chk5" id="chk5" onclick="remove2(this.id)"/>
<input type="checkbox" name="chk6" id="chk6" onclick="remove2(this.id)"/>
</td>
</tr>
</table>
</body>
</html>
<script>
function remove(id){
 $("#"+id).remove();
 var chk='<input type="checkbox" name='+id+' id='+id+' onclick="remove2(this.id)"/>';
 $("#2").append(chk);

 };
 function remove2(id){
 $("#"+id).remove();
 var chk='<input type="checkbox"  name='+id+' id='+id+' onclick="remove(this.id)"/>';
 $("#1").append(chk);

 };
 </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-25T03:23:40.350

这是我放在一起的。您可以查看 jsfiddle 上的工作演示：http: [//jsfiddle.net/nathanmyles/CXWYa/](http://jsfiddle.net/nathanmyles/CXWYa/)

JavaScript

```
function setup(){
    var done = document.getElementById('done');
    attachClickEvents(done, moveToUndone);
    var undone = document.getElementById('undone');
    attachClickEvents(undone, moveToDone);
}

function attachClickEvents(parent, moveFunction){
    var elements = parent.children;
    for(var i = 0; i < elements.length; i++){
        var element = elements[i];
        if(element.tagName.toLowerCase() === 'input'){
            var id = element.id;
            attachOnClick(element, moveFunction, id);
        }
    }
}

function moveToDone(id) {
    remove(id);
    append('done', createCheckBoxElement(id, moveToUndone));
}

function moveToUndone(id) {
    remove(id);
    append('undone', createCheckBoxElement(id, moveToDone));
}

function createCheckBoxElement(id, moveFunction){
    var element = document.createElement('input');
    element.setAttribute('type', 'checkbox');
    element.setAttribute('name', id);
    element.setAttribute('id', id);
    attachOnClick(element, moveFunction, id);
    return element;
}

function attachOnClick(element, callback, id){
    element.onclick = function() {
        callback(id);
    };
}

function append(parentId, element){
    var parent = document.getElementById(parentId);
    parent.appendChild(element);
}

function remove(id) {
    var element = document.getElementById(id);
    element.parentNode.removeChild(element);
}

setup(); 
```

HTML

```
<table width="427" height="88">
    <tr>
        <td id="undone">Undone
            <br />
            <input type="checkbox" name="chk1" id="chk1" />
            <input type="checkbox" name="chk2" id="chk2" />
            <input type="checkbox" name="chk3" id="chk3" />
        </td>
    </tr>
    <tr>
        <td id="done">Done
            <br />
            <input type="checkbox" name="chk4" id="chk4" />
            <input type="checkbox" name="chk5" id="chk5" />
            <input type="checkbox" name="chk6" id="chk6" />
        </td>
    </tr>
</table> 
```

# python - 在排序列表中找到大于给定数字的最小数字

> ID：13669770
> 
> 赞同：9
> 
> 时间：2012-12-02T13:36:29.787
> 
> 标签：python, algorithm, binary-search

给定一个排序的数字列表，我需要找到大于给定数字的最小数字。考虑这个列表：

* * *

```
arr=[1,2,3,5,7,11,101,131,151,181,191,313,353,373,383] 
```

假设指定的数字是 320。那么，我的方法应该返回 353，因为 353 是大于 320 的最小数字。

我正在尝试使用稍微修改的二进制搜索形式；但是在执行时程序进入无限循环。

* * *

```
def modBinarySearch(arr,x):
    l=len(arr)
    mid=l/2
    if arr[mid]>=x and arr[mid-1]<x:
        return arr[mid]
    elif arr[mid]>x and arr[mid-1]>x:
        modBinarySearch(arr[mid:l],x)
    else: 
        modBinarySearch(arr[0:mid],x)

N=int(raw_input())
arr=[1,2,3,5,7,11,101,131,151,181,191,313,353,373,383]
print modBinarySearch(arr,N) 
```

有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-02T13:42:10.633

有一个标准模块，[`bisect`](http://docs.python.org/2/library/bisect.html)已经这样做了：

```
In [49]: arr[bisect.bisect(arr, 320)]
Out[49]: 353 
```

我认为这应该是搜索排序列表的首选方法。手册中有几个[例子](http://docs.python.org/2/library/bisect.html#searching-sorted-lists)。

至于你的实现，有很多问题：

1.  您的递归不能正确处理小数组。
2.  在第二个分支中进行的切片不正确。
3.  您的函数不返回任何内容。
4.  因为`arr`是升序，`arr[mid]>x and arr[mid-1]>x`相当于`arr[mid-1]>x`，提示你没有写你的意思

最后但同样重要的是，对于这个问题，递归和所有切片都是完全不必要的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-02T13:42:06.323

如果列表的大小为 15，请完全放弃二进制搜索并使用顺序搜索。

您会发现代码更容易编写，除非您需要每秒执行数百万次，否则顺序解决方案将足够快。

如果您*确实*需要坚持使用二进制搜索，那么您的*第一步*应该是实际返回递归调用的结果。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-02T13:51:08.687

如果 arr[mid] 和 arr[mid-1] 都大于你的数字，你应该在 arr[0:mid] 中搜索，你不觉得吗？

```
 elif arr[mid]>x and arr[mid-1]>x:
    modBinarySearch(arr[0:mid],x)
else: 
    modBinarySearch(arr[mid:1],x) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-02T13:49:40.823

```
def modBinarySearch(arr, n):
    m = len(arr) / 2

    if arr[m] >= n and arr[m - 1] < n:
        return arr[m]
    elif arr[m] > n and arr[m - 1] > n:
        return modBinarySearch(arr[:m], n)
    else:
        return modBinarySearch(arr[m:], n)

arr = [1, 2, 3, 5, 7, 11, 101, 131, 151, 181, 191, 313, 353, 373, 383]
n = 320
print(modBinarySearch(arr, n)) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-02T13:50:02.917

```
 python 3.2

     next(i for  i in arr if i>320) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-03T17:32:25.883

[bisect 模块](http://docs.python.org/2/library/bisect.html)是您的最佳选择：

```
from bisect import bisect_left, bisect_right

arr=[1,2,3,5,7,11,101,131,151,181,191,313,353,373,383]

def find_lt(a, x):
    'Find rightmost value less than x'
    i = bisect_left(a, x)
    if i:
        return a[i-1]
    raise ValueError

def find_gt(a, x):
    'Find leftmost value greater than x'
    i = bisect_right(a, x)
    if i != len(a):
        return a[i]
    raise ValueError

print find_lt(arr,320)          
print find_gt(arr,320) 
```

印刷

```
313
353 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-02T13:46:15.137

如果列表已排序：

```
x = range(20)
N= 15

for i in x:
    if i>N:
        print i
        break 
```

给16。

如果使用 numpy：

```
x = np.arange(20)
N = 15
x[x>15][0] 
```

给16。

如果您正在寻找简单的实现，对于您的具体问题，让我再谈一谈。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-07T19:36:28.327

```
def modBinarySearch(arr,x):
    l=len(arr)
    mid=l/2
    if arr[mid] >= x and arr[mid-1] < x:
        return arr[mid]
    elif arr[mid]>x and arr[mid-1]>x:
        num = modBinarySearch(arr[0:mid],x)
    else:
        num = modBinarySearch(arr[mid:l],x)
    return num

N=int(raw_input('Enter a number: '))
arr=[1, 2, 3, 5, 7, 11, 101, 131, 151, 181, 191, 313, 353, 373, 383]
print modBinarySearch(arr,N) 
```

# indexing - 如何为 ebean 创建自定义索引？

> ID：13669775
> 
> 赞同：3
> 
> 时间：2012-12-02T13:37:00.807
> 
> 标签：indexing, ddl, ebean

我正在使用[ebean](http://www.avaje.org/)，它非常易于使用，但我不知道创建我的自定义索引。

```
@Entity
@Table(name="users")
public class User {
    public String name;

    // how to create index for this column?
    public long displayOrder;
} 
```

我试图为该列创建索引`displayOrder`，但该怎么做呢？

这个没有注解，每次都会重新创建生成的ddl文件，所以我不能在那里添加自己的ddl语句。并且不方便直接在数据库中添加索引。

有什么简单的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T12:35:51.077

没有直接的答案，但我认为，你应该关注一段时间。

AFAIK 无法通过注释声明“KEY”索引，您只能添加`@Column(unique=true)`到它（如果您需要一个唯一字段）。

当然，对于主键，您只需要使用`@Id`注释即可。

另一方面，我不建议每次都使用自动 DDL 创建 - 请记住，这将在下一次进化应用后破坏您所有的数据库结构和数据！！！而是采用这种方式：

*   第一步准备尽可能多的模型，并使用自动 DDL 将其应用到 DB
*   禁用 Ebean 的自动生成
*   开始使用自己的演变（2.sql、3.sql 等）来添加缺失的元素 - 例如缺失索引。
*   永远不要回头 :) 从现在开始，您需要更改现有表，而不是每次从头开始创建它们。

# php - Mysql，多个查询结合JOIN和SORT BY

> ID：13669781
> 
> 赞同：4
> 
> 时间：2012-12-02T13:37:13.167
> 
> 标签：php, mysql, sql

我是 MySQL 的初学者并且被卡住了。我想我必须做一些“高级”子查询来解决我的问题，但我不知道怎么做。有人可以帮助我吗？

***第一个查询***连接三个表，“annons”、“kontering_annons”和“member”。结果是唯一的“annons.id”条目。（在我的情况下是 3 个结果）。问题是我需要为每个唯一的“annons.id”找到表“kontering_annons”中***的最后一个条目。***这个查询没有。

```
SELECT  annons.id, annons.id_user, member.saldo, member.id,
kontering_annons.id_annons, kontering_annons.dat_bet_till, 
kontering_annons.id_kontering_a, kontering_annons.dat_ut_member
FROM annons
LEFT JOIN kontering_annons 
ON kontering_annons.id_annons = annons.id
LEFT JOIN member
ON member.id = annons.id_user
WHERE (annons.status='3' OR annons.status='4')
AND annons.typ='d'
AND annons.startar < NOW() - 48*60*60
AND kontering_annons.dat_bet_till < CURRENT_DATE()
AND member.saldo >= $day_price
GROUP BY annons.id 
```

***第二个***查询为每个“id_annons”提供表“kontering_annons”中的***最后一个***条目。（在我的例子中，有 18 个结果）。我想我需要将此查询与上面的查询结合起来，才能找到只有三个唯一条目***最新***的条目 ID。但是如何？

```
SELECT a.*
FROM kontering_annons a
INNER JOIN (SELECT id_annons, dat_bet_till, max(id_kontering_a) 
AS maxid 
FROM kontering_annons 
GROUP BY id_annons) 
AS b 
ON a.id_kontering_a = b.maxid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:57:37.627

您可以将以下查询保存到临时表中。

```
SELECT a.*
FROM kontering_annons a
INNER JOIN (SELECT id_annons, dat_bet_till, dat_ut_member, 
max(id_kontering_a) AS maxid 
FROM kontering_annons 
GROUP BY id_annons) AS b 
ON a.id_kontering_a = b.maxid
AND a.dat_bet_till < CURRENT_DATE() 
```

然后使用替换 kontering_annons 表的主查询加入临时表。

```
SELECT  annons.id, annons.id_user, member.saldo, member.id,
tempT.id_annons, tempT.dat_bet_till, 
tempT.id_kontering_a, tempT.dat_ut_member
FROM annons
LEFT JOIN tempT 
ON tempT.id_annons = annons.id
LEFT JOIN member
ON member.id = annons.id_user
WHERE (annons.status='3' OR annons.status='4')
AND annons.typ='d'
AND annons.startar < NOW() - 48*60*60
AND member.saldo >= $day_price
GROUP BY annons.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:58:48.483

试试这个：

```
SELECT  
  a.id, 
  a.id_user, 
  m.saldo, 
  m.id,
  k.id_annons, 
  k.dat_bet_till, 
  k.id_kontering_a, 
  k.dat_ut_member
FROM annons a
INNER JOIN
(
    SELECT 
      id_annons, 
      dat_bet_till, 
      max(id_kontering_a) AS maxid 
    FROM kontering_annons 
    GROUP BY id_annons
) km ON a.id = km.id_annons
LEFT JOIN kontering_annons k  ON k.id_annons     = km.id_annons 
                             AND k.id_kontering_a = km.maxid 
LEFT JOIN member           m  ON m.id            = a.id_user
WHERE (a.status='3' OR a.status='4')
AND a.typ='d'
AND a.startar < NOW() - 48*60*60
AND k.dat_bet_till < CURRENT_DATE()
AND m.saldo >= $day_price 
```

我在这里所做的是带有以下内容`INNER JOIN`的表格`annons`：

```
 SELECT 
      id_annons, 
      dat_bet_till, 
      max(id_kontering_a) AS maxid 
    FROM kontering_annons 
    GROUP BY id_annons 
```

`ON a.id = km.id_annons`然后`JOIN`它，通过加入它`kontering_annons`，只选择该表中最后一个的所有数据。`id_kontering_a``kid_kontering_a = km.maxid`

**请注意**：我使用`INNER JOIN`了两个`LEFT JOIN`来保留它，`LEFT JOIN`否则如果你这样做了，`LEFT JOIN`那么`INNER JOIN`它会是一个`INNER JOIN`.

# javascript - 从给定的月份和年份输入获取一个月的星期几开始

> ID：13669786
> 
> 赞同：7
> 
> 时间：2012-12-02T13:38:06.163
> 
> 标签：javascript, date, math

我有一些 JS 代码将代表一个月中天数的 div 堆叠在一个更大的 div 中，该 div 实际上是一个日历。用户可以自由选择月份和年份。我需要为那个月建立一个日历。

例如：如果这个月从星期六开始，那么我需要先构建 5 个空块，然后开始用里面有天数的块填充日历。

如何为给定的月份和年份输入计算此数字？

![](../Images/376f248d3f339406139ede8a4deb1b13.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-02T13:43:40.930

您可以使用Date 对象的[getDay](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDay)函数获取星期几。

要获取本月的第一天，请创建一个新的[Date 对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)：

```
var year = "2012";
var month = "12";
var day = new Date(year + "-" + month + "-01").getDay();
// 6 - Saturday
console.log(day);
```

由于您从 1 开始计数，并且星期一是一周的第一天，因此您还必须这样做：

```
day = (day===0) ? 7 : day 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-08T14:16:50.397

ES6方式：

```
const firstDayInMonthIndex = (
  monthIndex = new Date().getMonth(), 
  year = new Date().getFullYear()
) => (
  new Date(`${year}-${monthIndex + 1}-01`).getDay()
) 
```

# android - 更改字体时文本移动到底部

> ID：13669793
> 
> 赞同：1
> 
> 时间：2012-12-02T13:38:44.423
> 
> 标签：android, android-layout

我遇到了一个奇怪的问题 - 当我尝试更改其字体时，按钮的内部文本移动到底部（在我的情况下字体是 Gabriola）。这是我的代码和屏幕截图：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/guess_layout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/main_background" >

<TextView
    android:id="@+id/top_text"
    android:layout_width="wrap_content"
    android:layout_height="50dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:background="@drawable/top_bottom_text_shape"
    android:gravity="center"
    android:text="@string/open_battles"
    android:textColor="@android:color/black"
    android:textSize="28sp"
    android:textStyle="bold" />

<Button
    android:id="@+id/back_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@id/top_text"
    android:layout_alignLeft="@id/top_text"
    android:layout_alignTop="@id/top_text"
    android:layout_marginBottom="7dp"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="7dp"
    android:background="@drawable/back_button_selector"
    android:drawableLeft="@drawable/back"
    android:gravity="center"
    android:onClick="back"
    android:paddingLeft="2dp"
    android:text="@string/back"
    android:textColor="@android:color/black"
    android:textSize="24sp"
    android:textStyle="bold" />

    <!-- Other views -->

</RelativeLayout> 
```

![普通视图（默认字体）](../Images/b542bd669f8740d11f54a61b552117ba.png)

![字体设置为 Gabriola](../Images/c734d4e4ce1d0290509767a519d8bb32.png)

没有进行其他更改 - 我只设置文本字体。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:53:18.003

您可以增加**字体**大小`Button`

我相信这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:17:01.527

看来问题出在我的字体上。从截图中可以看出，Gabriola 大小为 28sp 看起来像默认的 android 字体大小 ~20sp，这就是为什么文本在垂直居中时会向下移动的原因。最后，我决定选择另一种字体，一切都很完美。

# java - 如何使用无状态会话从集合中删除元素？（约束违反异常）

> ID：13669794
> 
> 赞同：0
> 
> 时间：2012-12-02T13:38:53.613
> 
> 标签：java, hibernate

我有

```
@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
public Linf getLinf() {
    return linf;
} 
```

和

```
@OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL, targetEntity = MessageEntry.class)
public Set<MessageEntry> getMessageEntries() {
    return messageEntries;
} 
```

我需要从数据库中删除单个 messageEntry。如果我说 sess.delete(messageEntry)，那么我会得到索引异常，因为它在 Linf.messageEntries 集合中。无状态会话无法加载集合，因此我必须手动加载 Linf.messageEntries 的元素，然后删除其中一个：

```
 List linfs = sess.createQuery(
                    "SELECT l FROM Linf l " +
                            "JOIN l.messageEntries e WHERE e=:e")
                    .setParameter("e", messageEntry).list();

            if (linfs.size()>1) throw new RuntimeException();

            Linf linf = (Linf) linfs.get(0);

            List<MessageEntry> curEntries =
                    sess.createQuery(
                            "SELECT e FROM Linf l " +
                            "JOIN l.messageEntries e WHERE l=:l")
                            .setParameter("l", linf).list();

            for (int i = 0; i < curEntries.size(); i++) {
                if (curEntries.get(i).getId().equals(messageEntry.getId())) {
                    curEntries.remove(i);
                    break;
                }
            }

            Set<MessageEntry> cur = new HashSet<MessageEntry>();
            cur.addAll(curEntries);
            linf.setMessageEntries(cur);

            messageEntry.setLinf(null);
            sess.update(messageEntry);
            sess.update(linf);
            sess.delete(messageEntry); 
```

我得到 ConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint failed ( `db`. `linf_messageentry`, CONSTRAINT `FK5039A8B5E770809A`FOREIGN KEY ( `messageEntries_id`) REFERENCES `messageentry`( `id`))。我该如何执行此任务？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:56:40.293

你的映射是错误的。与使用 MessageEntry 中的外键的双向一对多关联不同，您拥有使用连接表 ( `linf_messageentry`) 的 OneToMany 关联，以及使用外键的另一个不同的 ManyToOne 关联。

`mappedBy`必须使用以下属性将一侧标记为多侧的倒数：

```
// This is the owner side of the association, because it doesn't have 
// the mappedBy attribute.
// it uses a join column by default
@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
public Linf getLinf() {
    return linf;
} 
```

和

```
// This is the inverse side, because it has the mappedBy attribute
// since it's mappedBy linf, hibernate uses the same mapping as the one
// described on the linf property: a join column
@OneToMany(mappedBy = "linf", fetch = FetchType.LAZY, cascade = CascadeType.ALL)
public Set<MessageEntry> getMessageEntries() {
    return messageEntries;
} 
```

另外，请注意：

*   该`targetEntity`属性是完全多余的：Hibernate 从集合的类型中知道目标实体：`Set<MessageEntry>`
*   ManyToOne 上的 cascade = CascadeType.ALL 没有多大意义。如果你删除一个 MessageEntry，你不希望它的 Linf 被删除。

# .net - 控制台在线程完成之前退出（多线程）

> ID：13669795
> 
> 赞同：1
> 
> 时间：2012-12-02T13:39:03.720
> 
> 标签：.net, vb.net, multithreading, .net-3.5, threadpool

我有一个控制台应用程序并且我使用了一个线程池，但是我的应用程序在线程池执行其工作之前退出了。我读到我可以使用`Console.ReadLine()`，但我想在线程池完成工作后立即退出。我在 c# 中找到了示例，但我想要一些关于 vb.net 的东西，我也使用 .net 3.5，所以我不能使用任务并行库。我目前的代码是：

```
For i As Integer = 0 To addresses.Length - 1
    Dim mydata_obj = New With {Key .address = addresses(i), .subject = messages.subject, .body = messages.body}
    ThreadPool.QueueUserWorkItem(AddressOf doSomething, mydata_obj)
Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:43:45.883

用来`WaitHandle.WaitAll`等到任务完成

了解更多信息[WaitHandle.WaitAll](http://msdn.microsoft.com/en-us/library/system.threading.waithandle.waitall%28v=vs.90%29.aspx)

替代方法是使用 `threadpool`

等待一个对象也可以使用线程池来实现。在某些情况下，这会更好，因为这意味着您不需要专用线程来等待对象。

ThreadPool 类 提供线程池，可用于执行任务、发布工作项、处理异步 I/O、代表其他线程等待和处理计时器。

# java - Spring - 属性“name”不允许出现在元素“constructor-arg”中

> ID：13669798
> 
> 赞同：14
> 
> 时间：2012-12-02T13:39:24.713
> 
> 标签：java, eclipse, spring, maven

我在我的程序中使用 hsqldb 作为数据库。我想在春天注入构造函数值。

这是我的豆：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="ConnectionManager" class="at.tuwien.group2.vpm.persistence.ConnectionManager"
        scope="singleton">
        <constructor-arg name="url" value="jdbc:hsqldb:file:vpmDatabasetest" />
        <constructor-arg name="user" value="sa" />
        <constructor-arg name="password" value="" />
    </bean> 
```

我的构造函数看起来像这样：

```
public ConnectionManager(String url, String user, String password) {
    if(url == null || user == null || password == null) {
        throw new NullPointerException("Paramaeter cannot be null!");
    }
    this.url = url;
    this.user = user;
    this.password = password;
} 
```

但是，当我想执行我得到的代码时：

属性 'name' 不允许出现在元素 'constructor-arg' 中

属性 'name' 不允许出现在元素 'constructor-arg' 中

我应该改用什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-02T13:48:44.463

我猜你正在使用Sping 2.x。使用**index**属性显式指定构造函数参数的索引：</p>

```
 <bean id="ConnectionManager" ...>
        <constructor-arg index="0" value="jdbc:hsqldb:file:vpmDatabasetest" />
        <constructor-arg index="1" value="sa" />
        <constructor-arg index="2" value="" />
    </bean> 
```

此外，从**Spring 3.0**开始，您还可以使用构造函数参数名称进行值消歧。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-12T11:27:30.640

我在使用 Spring 3.1.2 库时遇到了同样的问题。我的错误是我使用了旧的模式位置。当我从

```
xsi:schemaLocation="http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
                    http://www.springframework.org/schema/aop 
                    http://www.springframework.org/schema/aop/spring-aop-2.0.xsd" 
```

到

```
 xsi:schemaLocation="http://www.springframework.org/schema/beans 
                     http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                     http://www.springframework.org/schema/aop 
                     http://www.springframework.org/schema/aop/spring-aop-3.1.xsd" 
```

使用命名而不是索引构造函数参数效果很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T14:12:48.900

只需删除名称属性

```
<bean id="ConnectionManager" class="at.tuwien.group2.vpm.persistence.ConnectionManager"
        scope="singleton">
        <constructor-arg value="jdbc:hsqldb:file:vpmDatabasetest" />
        <constructor-arg value="sa" />
        <constructor-arg value="" />
    </bean> 
```

它会起作用的。并获取最新的 Spring 版本，您似乎正在使用一个非常旧的版本。另外，我建议将[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/)作为有关 Spring 的主要信息来源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-26T16:07:33.987

如果您使用 Maven，请尝试添加较新的 spring-beans 依赖项。我通过更新 jar 依赖项而不更新 xsd 版本来解决此问题。

# haskell - 生成随机元组 Haskell

> ID：13669803
> 
> 赞同：4
> 
> 时间：2012-12-02T13:39:48.693
> 
> 标签：haskell, random, tuples

我想知道是否可以使用如下代码生成随机元组：

```
take 4 $ randomRs ((0,0),(70,100)) $ mkStdGen x  :: [(Double,Double)] 
```

当我尝试这个时，我得到了错误：

`No instance for (Random (Float, Float)) arising from a use of 'randoms'`

有没有办法在不使用的情况下获得随机元组`zip`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T13:59:43.473

基本上错误消息是说没有定义的方式来制作随机元组。但是您当然可以自己添加一个。

在我的脑海中（即，我实际上没有测试过这个），你可以做类似的事情

```
instance (Random x, Random y) => Random (x, y) where
  randomR ((x1, y1), (x2, y2)) gen1 =
    let (x, gen2) = randomR (x1, x2) gen1
        (y, gen3) = randomR (y1, y2) gen2
    in ((x, y), gen3) 
```

现在可以`randomR`在元组上使用（前提是元组中的类型*支持*随机生成）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T13:56:56.033

您可以使用 state monad 方便地生成随机元组：

```
import Control.Applicative
import Control.Monad.State
import System.Random

randomTupleR ::
    (Random a, Random b, RandomGen g)
    => (a, a)
    -> (b, b)
    -> g
    -> ((a, b), g)
randomTupleR xb yb =
    runState (liftA2 (,) (state $ randomR xb) (state $ randomR yb)) 
```

# methods - 非常高级的方法/构造函数 (Java) - 接受真正的多态参数 - Sintax

> ID：13669808
> 
> 赞同：1
> 
> 时间：2012-12-02T13:40:23.543
> 
> 标签：methods, arguments, instanceof, polymorphism, implements

有没有办法声明多态构造函数？（请不要超载！）。

我想指定一个参数，即不是 1 个类和 1 个接口，但我不想用这两者创建一个新类（类实现接口）。

我想声明一个构造函数，通常使用以下语法：

```
class Clas {
  public Clas(Object obj) { ... }
} 
```

但是这些参数“obj”是 Class1 和 Interface2 的实例，我想像这样：

```
class CubeRotationThread {
  public CubeRotationThread(Cube c implements IRotable) {...}
  //...or...
  public CubeRotationThread(Cube c instanceof IRotable) {...}
} 
```

...或仅为此参数指定多态的任何其他语法。我不想创建类：CubeRot 扩展了 Cube 实现了 IRotable，因为并非所有的立方体都有这些工作。而且我不想要铸造（Cube）CubeRot的其他选项，相反，使所有立方体可旋转。也许 IRotator 可以在多维数据集或其他类中实现或不实现。

我不想在构造函数中使用检查：

```
if (obj instanceof Class) { myMethod(); } 
```

我不想创建一个新课程

```
class CubeRotatorThread extends Cube implements IRotator {
} 
```

...因为并非所有立方体都可以旋转，而且不仅立方体实现旋转。

我不想使用泛型类：

```
class CubeRotatorThread T extends Cube implements IRotator {
} 
```

...因为 T 是一个类，我想要一个对象/参数。

而且我也不想创建一个`NotImplementsRotationException`！扔。

我想要一个多态参数，我想要一个真正的多态方法

可能吗？我搜索了它，但我没有在构造函数中找到执行此操作的语法。

我在其他语言（可能是 C# 或 C++）、帮助文档或定义文档中看到了另一种代码，例如：

```
Constructor(Class1 (Class2) args); 
```

这对我来说很奇怪。我不确定这是不是我想要的。

如果多态构造函数不存在，我认为 Oracle 必须创建它。这是非常有用的。

```
class CubeRotationThread {
    public CubeRotationThread(Cube arg implements IRotator) {}
    public CubeRotationThread(Cube arg extends IRotator) {}
    public CubeRotationThread(Cube arg instanceof IRotator) {}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:09:28.887

```
GENERIC METHOD
http://docs.oracle.com/javase/tutorial/java/generics/bounded.html
http://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html
http://docs.oracle.com/javase/tutorial/java/generics/boundedTypeParams.html

I FOUND IT ! :)

    public <Q extends Class1 & Iterf2 & Interf3> Return Method(Q Object) { }

Q is the private mixture class you want with Extends & implements & implements...

here is with multiple objects:

    public <Q extends Class1 & Iterf2 & Interf3, W extends Class2 & Inter1 & Inter2> Return Method(Q arg1, W arg2) { }

use commas to separate classes inside <>, and use & to inherit

use commas to inherit directli in a class declaration

Here is very complete:

    class Generic extends String implements Implements1, Implements2 {}

    class Generic <T extends Class1 & Interface1 & Interface2> extends Class2 <W extends 

    Class3 & Iterface 5> implements Interface3, Interface4 {
            public <Q extends Class2 & Interface4, R extends Class4 & Interface6> Generic(T wtf, Q arg, R arg) { }
        } 
```

# php - 无法动态更改使用 ajax 和 jquery 显示的图像

> ID：13669810
> 
> 赞同：0
> 
> 时间：2012-12-02T13:40:32.817
> 
> 标签：php, jquery, ajax

我是 jquery 和 php 的新手，所以如果问题很简单，我深表歉意。我必须根据列表框中选择的选项更改显示的图像。到目前为止，我的 jquery 能够检索并显示所需的 img id。我最初尝试将图像 id 发布回 php 脚本然后检索图像，但后来意识到我可以直接操作 img 标签（因为我的图像是名称1.jpg，2.jpg）。有人可以帮我吗？谢谢！以下是相关代码：

```
HTML:
<img id="design"  class ="img-rounded" alt="Ad Picture" width="450p" height="450"/>
<input type="button" id="GetImage" class="btn" value="Get Image">
Jquery:
$('#GetImage').live("click",function() {
var imageid= $('#UserIds').val();
$.ajax({
    type:'POST',
    url:'ProvidingFeedback.php',
    data:{id:imageid},
    success: function(msg){ 
       if(result=='success') {
            $('#design').attr('src','/img/2.jpg');

       }
 }
});

}); 
```

我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:42:00.627

因为您选择图像作为 id 仅尝试 img 或 #design

```
 $('#img').attr('src','/img/2.jpg'); 
```

应该

```
 $('#design').attr('src','/img/2.jpg'); 
```

和

```
 if(msg=='success') { 
```

应该

```
 if(msg=='success') { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:29:33.597

尝试

```
$.ajax({
  type:'POST',
  url:'ProvidingFeedback.php',
  data:{id:imageid},
  success: function(msg){ 
   //if(result=='success') { // 'result' is not define in you code above should be 'msg'
        $('#design').attr('src','/img/2.jpg');

   //}
 } 
```

如果你想得到结果使用`msg`

为了更好地帮助您调试代码，您可能需要查看[@Chrome 开发人员工具：断点](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints)或[Firebug 断点](http://getfirebug.com/doc/breakpoints/demo.html)

# python - 在 PyQt 中使用一个信号处理程序连接多个小部件信号

> ID：13669814
> 
> 赞同：2
> 
> 时间：2012-12-02T13:40:54.920
> 
> 标签：python, python-3.x, pyqt4, signals-slots

我正在尝试使用 PyQT4 在 Python3 中创建简单的应用程序。主窗口显示几个定制的小部件。每个小部件都包含一个 QLineEdit 小部件。这是一些代码：

```
def fill_listwidget (self, widget):
    i=0
    for data in dataList:
        item = QListWidgetItem(myListWidget)

        #create my custom widget
        item_widget = Ui_Form("Widget")

        item_widget.lineEdit1.setText(data)
        item_widget.index =i
        i=i+1

        widget.addItem(item)
        widget.setItemWidget(item,item_widget)

        #########
        def temp (self):
            lineEdit_text_changed(self, item_widget)
            print(repr(item_widget))
            print(repr(self))

        item_widget.lineEdit1.textEdited.connect(temp)
        #########

        #item_widget.lineEdit1.textEdited.connect(lambda: (lineEdit_text_changed(self, item_widget)))

def lineEdit_text_changed(self, widget, data="Null"):
    print(widget.lineEdit1.displayText()) 
```

如您所见，我为所有小部件添加了一个信号处理程序，因为我想以相同的方式处理这些信号。问题是只有最后添加的小部件被正确处理。当我修改其他小部件的“lineEdit1”字段时，仍然会打印最后一个小部件的字段。

以下是它的工作原理：
1 我修改第一个小部件的 lineEdit
2 最后一个小部件的 lineEdit 被打印
3 我修改第二个小部件的 lineEdit
4 最后一个小部件的 lineEdit 被打印
...

我假设无论哪个小部件的 lineEdit 被修改，lastWidget 都被发送到信号处理程序，但我不知道为什么。

请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:51:36.380

这是一个常见的范围界定问题。

主体中的`item_widget`变量`lambda`来自*封闭*范围，而不是`lambda`本地*范围*。因此，每次循环时，都会创建一个新信号，但`item_widget`变量只是以分配给它的最后一个对象结束。

要修复它，请使用默认参数，如下所示：

```
item_widget.lineEdit1.textEdited.connect(
    lambda widget=item_widget: self.lineEdit_text_changed(widget)) 
```

# php - 真正的基本查询在 PMA 中有效，但在 PHP 中无效

> ID：13669820
> 
> 赞同：0
> 
> 时间：2012-12-02T13:41:58.870
> 
> 标签：php, mysql

这是查询

```
$db=mysql_connect('localhost','root','root');
mysql_select_db('test');
$query=mysql_query("SELECT * FROM table");
$r=mysql_fetch_assoc($query);
print_r($r); 
```

它只给了我第一个元素。

但是在 PhpMyAdmin 中，它给了我所有的元素。

我怎样才能使它在 PHP 中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:46:37.843

`mysql_fetch_assoc`每个函数调用获取一行。你想要的可能是：

```
while($r = mysql_fetch_assoc($query)){
    print_r($r);
} 
```

# java - RESTful Web 服务 - getRemoteUser 可与 GET 一起使用，但不能与 POST 一起使用！为什么？

> ID：13669828
> 
> 赞同：1
> 
> 时间：2012-12-02T13:42:41.657
> 
> 标签：java, post, java-ee-6, cdi, restful-authentication

我有一个无状态的 Restful Web 服务。在这个服务中，我注入了一个上下文：

@Context 私有 HttpServletRequest 请求；

如果我在 GET 方法中调用方法 request.getRemoteUser() 它可以工作！但是，如果我在 POST 方法中调用它，尽管身份验证有效，但我会得到“null”。

谁能解释一下？

格列兹沃尔夫冈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:04:41.920

也许您发布到的路径不受您的安全约束的保护 - 这可能会导致这种行为（取决于设置/Servlet-Container）。如果这不是原因 - 您使用的是哪个 Servlet-Container？

# ios - 在 xcode for iOS 应用程序中存储数千个文件（在包内）

> ID：13669838
> 
> 赞同：3
> 
> 时间：2012-12-02T13:43:38.427
> 
> 标签：ios, xcode

我有一个包含大约 20,000 个图像文件（动画帧）的应用程序。由于一大堆原因，手动打包这些是不可行的（尽管......如果我有更多时间，我会这样做）。

Xcode 只有几千个文件就会慢下来，当你达到数万个文件时，它会完全停止工作（各种按钮会使 Xcode 崩溃）。我什至听说过当你浏览超过 65,535 个文件时，一些内置功能会停止工作，因为 Apple 有人使用 16 位 int 来存储索引，叹息。

有哪些选择？似乎应该有某种方式告诉 Xcode “所有这些文件都是静态二进制文件，你永远不会触摸它们，将它们放在一个包中并忽略它们”。但是谷歌搜索和阅读文档，我找不到任何:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:17:33.340

您可以将压缩版本保存在包中，并在运行时将其解压缩到应用程序的用户目录中。这只需要做一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:29:31.770

最后，我半自动地打包了它们。我会在这里解释，以防它帮助其他有同样问题的人 - 直到/除非有人想出更好的答案:(

1.  发明了我自己的文件格式，以一种快速解码的方式将 100 个 PNG 文件打包成一个文件
2.  实现的编码/解码方法
3.  在我的应用程序中编写了一对很小的 Obj-C 方法（仅通过调试开关启用），它们在运行时获取所有 PNG 文件，并将它们打包成 N 个文件。
4.  将前 1,000 个文件移动到项目中
5.  在模拟器上运行应用程序，在硬盘上找到模拟器文件夹（它在带有 Xcode4.5 的 OS X Mountain Lion 下的 Library/ApplicationSupport/iPhoneSimulator 中）
6.  将“打包”文件移动到主项目中
7.  重复这三个步骤，直到完成。

恕我直言，这是一个 hacky 解决方案——令人沮丧的是，Xcode 无法处理这个在大约 15 年前由所有其他 IDE 解决的简单问题——但它确实有效。

我不为我的包格式感到自豪，而且 - 给定时间！- 我会使用标准格式和/或为此编写适当的工具。

# android - 无错误的 AndEngine 示例崩溃

> ID：13669843
> 
> 赞同：0
> 
> 时间：2012-12-02T13:43:53.927
> 
> 标签：android, andengine

我开始使用 AndEngine，我想使用 GitHub 上包含的一些 AndEngineExamples 作为工作的基础。现在，我已经在 GitHub 上下载了所有内容，Eclipse 在任何扩展或示例上都没有给出任何错误。但是，当我尝试启动 AnalogOnScreenControlsExample 时，它​​崩溃并且我收到以下错误日志：

```
12-02 14:36:17.566: E/AndroidRuntime(5458):     FATAL EXCEPTION: main
12-02 14:36:17.566: E/AndroidRuntime(5458):     java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{org.andengine.examples/org.andengine.examples.launcher.ExampleLauncher}: java.lang.ClassNotFoundException: org.andengine.examples.launcher.ExampleLauncher
12-02 14:36:17.566: E/AndroidRuntime(5458):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1891)
12-02 14:36:17.566: E/AndroidRuntime(5458):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
12-02 14:36:17.566: E/AndroidRuntime(5458):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
12-02 14:36:17.566: E/AndroidRuntime(5458):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
12-02 14:36:17.566: E/AndroidRuntime(5458):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-02 14:36:17.566: E/AndroidRuntime(5458):     at android.os.Looper.loop(Looper.java:137)
12-02 14:36:17.566: E/AndroidRuntime(5458):     at android.app.ActivityThread.main(ActivityThread.java:4441)
12-02 14:36:17.566: E/AndroidRuntime(5458):     at java.lang.reflect.Method.invokeNative(Native Method)
12-02 14:36:17.566: E/AndroidRuntime(5458):     at java.lang.reflect.Method.invoke(Method.java:511)
12-02 14:36:17.566: E/AndroidRuntime(5458):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-02 14:36:17.566: E/AndroidRuntime(5458):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-02 14:36:17.566: E/AndroidRuntime(5458):     at dalvik.system.NativeStart.main(Native Method)
12-02 14:36:17.566: E/AndroidRuntime(5458):     Caused by: java.lang.ClassNotFoundException: org.andengine.examples.launcher.ExampleLauncher
12-02 14:36:17.566: E/AndroidRuntime(5458):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
12-02 14:36:17.566: E/AndroidRuntime(5458):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
12-02 14:36:17.566: E/AndroidRuntime(5458):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
12-02 14:36:17.566: E/AndroidRuntime(5458):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
12-02 14:36:17.566: E/AndroidRuntime(5458):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1882)
12-02 14:36:17.566: E/AndroidRuntime(5458):     ... 11 more 
```

看着这个，我认为问题出在 ExampleLauncher 中，但我检查了一下，发现该类在那里并且没有错误。那么问题可能是什么？我希望你们知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:49:46.380

尝试：1）运行项目清理并重建它 2）在物理设备上而不是在模拟器上运行它

# java - java中静态方法的用途

> ID：13669845
> 
> 赞同：10
> 
> 时间：2012-12-02T13:44:03.230
> 
> 标签：java, static

我对java中静态方法的使用感到困惑，例如，如果方法是静态的，那么它是有意义 `main` 的，但是在编码时我们有例如对象

```
 JFrame frame= new JFrame(); 
 frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);// here why not frame.EXIT_ON_CLOSE 
```

当我们使用相同的方式

```
 GridBagConstraints c= new GridBagConstraints();// we have an object but still
 c.anchor = GridBagConstraints.PAGE_END; 
```

那么任何人都可以解释一下有什么特殊原因吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T13:48:04.240

静态方法和字段属于类中的所有对象，而非静态方法和字段属于类的特定*实例*。在您的示例中，无论`JFrame frame`您创建多少对象，访问`frame.EXIT_ON_CLOSE`都会产生相同的确切结果。为了明确说明这一事实，`static`使用了成员（也称为“类成员”）。

相同的逻辑适用于静态方法：如果方法不访问实例变量，则其结果将与对象的状态无关。该`main(String[] args)`方法就是这样一个例子。其他常见的例子包括各种工厂方法、原语的解析方法等等。这些方法不对实例进行操作，因此它们被声明为静态的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-02T13:45:32.553

`JFrame.EXIT_ON_CLOSE`不是一种方法。它是静态字段。请参阅此[文档](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/JFrame.html#EXIT_ON_CLOSE)。

如果您不想要与类而不是对象相关的某些功能，那么您可以使用静态方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T13:48:22.837

**-** `JFrame.EXIT_ON_CLOSE`是**静态变量**（字段）**而不是**`JFrame`Class 中的方法。

**-** `static`方法是类方法，例如在**Math**类中**没有实例变量，它的构造函数是私有的。所以静态在那里完美地工作......**

# android - 光标关闭后自动关闭 DBHelper

> ID：13669848
> 
> 赞同：0
> 
> 时间：2012-12-02T13:44:27.177
> 
> 标签：android, cursor, sqliteopenhelper

我有这样的方法：

```
public Cursor getData(){
    DBHelper helper = new DBHelper();
    Cursor c;
    ...
    return c;
} 
```

在此方法之外关闭 Cursor(c) 后，如何定义用于关闭 DBHelper 的事件处理程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:50:49.973

您可以使 DBHelper 全球化：

```
public MyActivity extends Activity {
    DBHelper helper;

    public Cursor getData() {
        helper = new DBHelper();
        Cursor c;
        ...
        return c;
    }

    private void closeDBC() {
       c.close();
       if(helper != null) helper.close();
    }
} 
```

编辑：我通常打开我的 DBHelper`onCreate`并关闭它`onPause`- 不知道这是不是很好的做法，但它对我有用

# ios - 使用信息按钮根据文本更改文本

> ID：13669850
> 
> 赞同：-2
> 
> 时间：2012-12-02T13:44:46.010
> 
> 标签：ios, xcode, logic

您好，感谢您抽出宝贵时间查看我的问题

我有一个逻辑问题，我有一个信息按钮，按下该按钮会更改 UI 图像视图中的图像

```
 - (IBAction)infopressed:(id)sender {

 useridtext.hidden = YES;
password.hidden = YES;

    //the original image before change is called 'login alpa'

    CATransition *animation = [CATransition animation];
    animation.duration = 2.0;
    animation.type = kCATransitionFade;
    animation.timingFunction = [CAMediaTimingFunction

    functionWithName:kCAMediaTimingFunctionEaseIn];
    [_login.layer addAnimation:animation forKey:@"changeImageTransition"];

    // change image
    _login.image = [UIImage imageNamed:@"imageciren1.jpeg"];

    } 
```

如何将图像视图中的图像更改回登录 alpha？如果他们要按下按钮，请将其更改为 imageciren1 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:57:32.413

```
- (IBAction)infopressed:(id)sender {
    static int = 0;
    NSString *imageName;
    if (i == 1) {
        imageName = @"loginalpha.jpeg";
        useridtext.hidden = NO;
        password.hidden = NO;
        i--;
    } else {
        imageName = @"imageciren1.jpeg";
        useridtext.hidden = YES;
        password.hidden = YES;
        i++;
    }
    CATransition *animation = [CATransition animation];
    animation.duration = 2.0;
    animation.type = kCATransitionFade;
    animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
    [_login.layer addAnimation:animation forKey:@"changeImageTransition"];

    // change image
    _login.image = [UIImage imageNamed:imageName];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:14:03.693

```
- (IBAction)infopressed:(id)sender {
    if (contactlabel.text.length)
        [contactlabel setText:@""];
    else
        [contactlabel setText:@"Test"];
} 
```

# php - 如何管理优惠券代码？

> ID：13669851
> 
> 赞同：1
> 
> 时间：2012-12-02T13:44:49.987
> 
> 标签：php, algorithm, symfony

我生成唯一代码以将它们用作优惠券代码。这就是优惠券代码的生成方式

```
public function generateCoupon(){
    $chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    $res = "";

    for ($i = 0; $i < 6; $i++) {
        $res .= $chars[mt_rand(0, strlen($chars) - 1)];
    }

    return $res;
} 
```

为了确保我在 DB 中没有多次使用相同的代码，我检查生成的代码是否存在：

```
$coupon = $this->generateCoupon();

while($repository->findOneByCode($coupon) != null){
    $coupon = $this->generateCoupon();
} 
```

用户请求优惠券代码并将其分配给用户，直到使用为止。

优惠券在使用时应该如何处理？现在代码已从数据库中删除，可以再次使用。这是好习惯吗？还是我应该永远存储代码？您将如何管理您的优惠券？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T13:48:46.867

您可以使用[UUID](http://en.wikipedia.org/wiki/Uuid)作为您的优惠券代码，以确保唯一性，或将优惠券代码存储在“永久”记录中，标记为已使用。

# android - OpenGL 中的小屏幕尺寸仅在带有 Jelly Bean 的三星 S3 上

> ID：13669858
> 
> 赞同：2
> 
> 时间：2012-12-02T13:45:43.593
> 
> 标签：android, opengl-es, live-wallpaper, android-4.2-jelly-bean, samsung-mobile

我的应用程序一直运行良好（在大多数手机上），直到最近三星 s3 更新为 Jelly Bean。屏幕如下所示： -

![截屏](../Images/b378367e3b9276a0da03fe2c7d6af51f.png)

它在使用 ICS 的 S3 和大多数其他手机（包括其他三星手机）上运行良好。

有什么想法会导致 Jelly Bean 出现此类问题的 S3 有何不同？

这是爱德华的应用程序的调试信息

![调试信息](../Images/0ae64d4f246f57dd83313bd4cdcbb443.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:36:27.207

这听起来类似于我今年早些时候提出的问题：[Android Samsung S I9000 screen size and density issues](https://stackoverflow.com/questions/9529501/android-samsung-s-i9000-screen-size-and-density-issues)

就我而言，它与三星的“pentile”显示器有关。这项技术为三星提供了更高的有效屏幕分辨率。更新到 Jellybean 后，设备开始报告更高的屏幕分辨率，让一些软件误以为它的物理尺寸比实际尺寸小得多。当客户开始抱怨我的应用程序不再适合屏幕时，我发现了这个错误。我不得不重新调整我的字体大小以使其再次正常工作。

我最终编写了一个小应用程序，它只显示屏幕指标并了解选择了哪些资源文件。我发现在调试资源问题时，仅运行这个应用程序并查看屏幕可以提供极大的帮助：

[https://play.google.com/store/apps/details?id=org.efalk.showresources](https://play.google.com/store/apps/details?id=org.efalk.showresources)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:46:48.510

终于找到了答案。我的清单有：-

```
<supports-screens
    android:anyDensity="false"
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    >
</supports-screens> 
```

我将其更改为：-

```
<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true"
    >
</supports-screens> 
```

现在工作正常:)

# c# - 计算标签中的值

> ID：13669867
> 
> 赞同：0
> 
> 时间：2012-12-02T13:46:28.743
> 
> 标签：c#, double

`label1`没问题，但`label2`不正常并出现错误，

```
private void button1_Click(object sender, EventArgs e)
{
    double a = Convert.ToDouble(textBox1.Text);
    double b = Convert.ToDouble(textBox2.Text);
    double z = Convert.ToDouble(label1.Text);

    label1.Text = (a + b).ToString(); // it is ok
    label2.Text = (z + a).ToString(); // not ok and get error    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:28:09.630

是的，有一些语法错误。不仅如此，一旦你的代码编译和运行，你就会出现运行时错误。我认为最简单的方法是更正代码并评论问题所在以及如何以及在某些情况下，为什么你应该以不同的方式来做。

请记住，即使使用我提供的代码，您仍然*可能会*收到基于最终用户输入内容的运行时（非编译时）错误。使用我提供的模式进行额外的调整（阅读新旧代码旁边的注释。

```
 double a = Convert.ToDouble(textBox1.Text); // Tip: I would recomment using Double.TryParse() instead of what you have here unless you know a number will always be in this box (I will provide an example with your 'z')
        double b = Convert.ToDouble(textBox2.Text); // Tip: I would recomment using Double.TryParse() instead of what you have here unless you know a number will always be in this box (I will provide an example with your 'z')
        /* double z = Convert.ToDouble(label1.Text);  /* First off, you need to correct your syntax errors:
                                                    * You had: double z - Convert.toDouble(label1.Text);   Notice the minus (-) and not equal (=) sign
                                                    *  You also need to capatilize the 'T' in what you have 'toDouble' and change it to 'ToDouble' 
                                                    *  Second off, you need to correct your runtime errors:
                                                    *  In this line, you are trying to convert something in this label (lbl1) to a double.  This will not work because at 
                                                    *  runtime, there is nothing in this label because it has no text. Incase you don't know, if you are using Visual Studio, you should 
                                                    *  put a break point on this line by pressing F9\.  Then when you run your application, Visual Studio will halt/pause here so you can see 
                                                    *  value of label1.Text by moving your mouse over it.  You will notice it is "" which cannot be converted 
                                                    *  There are a few possible solutions that you can emply to make this work but I will show you my prefered method below: */
        double z;
        bool didItParseDouble = Double.TryParse(label1.Text, out z); /* The first paramater is what you want to try and parse.. in this case, you are trying to parse a label.
                                              * If it can parse it, it will assign the value to the out parameter which is 'z'  You must preceed this with the out keyword!
                                               * If it can't parse, it will */
        if (didItParseDouble)
        {
            // It parsed/convered (although parse and convert are technically different)
            // When you first run the application, you will NOT hit this block of code because ditItParse is false because label1.Text is "".  (Put a break point here and you will see)
            // This is where you should put your calcuations at.  Don't forget, though, that if the user enters nothing for the first or second textbox, your code as is will fail so you should do a try parse there as well!
            // There are many ways to handle this, various patters, this is just one.  You can even put the Double.TryParse(...) in the if conditional statement!
        }
        else
        {
            // It couldn't parse so you could put some error handling here if you would like.
        }

        label1.Text = (a + b).ToString(); // C# is case sensitive so your code won't compile!  You had:  label1.TexT = (a + b).ToString(); 

        label2.Text = ( z + a).ToString(); // Now that z is a valid double it should work.    //not ok and get error 
```

# android - 使用 android.support.v4.view.PagerTabStrip 或 ViewPagerIndicator 修复标签

> ID：13669869
> 
> 赞同：4
> 
> 时间：2012-12-02T13:46:58.687
> 
> 标签：android, actionbarsherlock, android-viewpager, android-tabs, viewpagerindicator

在我的应用程序中，我有一个带有微调器导航的 Sherlock ActionBar（“ActionBar.NAVIGATION_MODE_LIST”）。在一项活动中，我有两个可以通过选项卡切换的片段。我现在所做的是将片段加载到 ViewPager（“android.support.v4.view.ViewPager”）和“android.support.v4.view.PagerTabStrip”中，用于在片段选项卡之间切换。

我现在的问题是，这些是水平滚动标签。[Jake Whartons viewpageindicator ( viewpagerindicator.com](http://viewpagerindicator.com) )似乎也是如此。但我想要的是两个并排的固定标签。支持库或 viewpageindicator 怎么可能呢？

有关措辞，请参见[http://developer.android.com/design/building-blocks/tabs.html](http://developer.android.com/design/building-blocks/tabs.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:40:47.143

> 但我想要的是两个并排的固定标签。支持库或 viewpageindicator 怎么可能呢？

您必须编写自己的指标。或者，您可以将操作栏标签与`ViewPager`.

由于选项卡只有在屏幕太大时才会有意义地滚动，所以我个人不会担心这个问题。

# objective-c - 带有 UITextFields 和 UITextViews 的自定义 UIAlertView

> ID：13669871
> 
> 赞同：0
> 
> 时间：2012-12-02T13:47:28.940
> 
> 标签：objective-c, ios, cocoa-touch, uitextfield, uialertview

我想制作一个`UIAlertView`其中有一个`UITextField`并`UITextView`显示大约 5 - 6 行的内容。我尝试创建视图并将其添加为子视图，但它与警报视图的按钮重叠。在调整警报视图的大小时，按钮不会向下移动。我还需要为它设置不同的背景和东西。那就是我需要制作一个自定义警报视图。我是 iPhone 编程的新手。请提供一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T15:00:42.820

你真的不能制作自定义警报视图，因为 Apple 已经决定这是他们不希望我们搞砸的事情。如果您只能在警报中使用一个文本字段，并且可以使用股票背景颜色`setAlertViewStyle:UIAlertViewStylePlainTextInput`将文本字段放入警报中。

```
UIAlertView *myAlertView = [[UIAlertView alloc] initWithTitle:@"Title" message:@"Message" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:nil, nil];
[myAlertView setAlertViewStyle:UIAlertViewStylePlainTextInput];
[myAlertView show]; 
```

但是，如果您确实想要进行这些更改，则必须自己制作`UIView`并修饰它以使其看起来像警报视图。这是一个粗略的例子：

```
- (IBAction)customAlert:(UIButton *)sender
{
    UIView *myCustomView = [[UIView alloc] initWithFrame:CGRectMake(20, 100, 280, 300)];
    [myCustomView setBackgroundColor:[UIColor colorWithRed:0.9f green:0.0f blue:0.0f alpha:0.8f]];
    [myCustomView setAlpha:0.0f];

    UIButton *dismissButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [dismissButton addTarget:self action:@selector(dismissCustomView:) forControlEvents:UIControlEventTouchUpInside];
    [dismissButton setTitle:@"Close" forState:UIControlStateNormal];
    [dismissButton setFrame:CGRectMake(20, 250, 240, 40)];
    [myCustomView addSubview:dismissButton];

    UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(20, 20, 240, 35)];
    [textField setBorderStyle:UITextBorderStyleRoundedRect];
    [myCustomView addSubview:textField];

    UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(20, 75, 240, 150)];
    [myCustomView addSubview:textView];

    [self.view addSubview:myCustomView];

    [UIView animateWithDuration:0.2f animations:^{
        [myCustomView setAlpha:1.0f];
    }];
}

- (void)dismissCustomView:(UIButton *)sender
{
    [UIView animateWithDuration:0.2f animations:^{
        [sender.superview setAlpha:0.0f];
    }completion:^(BOOL done){
        [sender.superview removeFromSuperview];
    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:06:37.900

做同样的事情，为了向下移动按钮，使用多个 '\n' 字符作为消息文本。

例如：

```
UIAlertView *alert = [[UIAlertView alloc]
        initWithTitle: @"Your title"
        message: @"\n\n\n\n\n\n\n\n\n\n"
        delegate: nil
        cancelButtonTitle:@"OK"
        otherButtonTitles:nil];
[alert show];
[alert release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T14:07:09.827

对于警报消息文本，只需添加一堆换行符，如下所示：

```
@"The alert message.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T15:05:00.127

好吧，最好的方法是创建一个类，它是 的子类`UIAlertView`，但`UIAlertView`类引用说**UIAlertView 类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改。**

我需要创建一个弹出登录已经有一段时间了，我按照本[教程](http://mobile.tutsplus.com/tutorials/iphone/ios-5-sdk-uialertview-text-input-and-validation/)进行操作。它非常有用，然后我阅读了一些帖子，人们抱怨他们的应用程序被拒绝，因为使用`UIAlertView`. 有趣的是，当时 youtube 应用正在使用一个弹出登录控件，看起来他们使用了 的子类`UIAlertView`，但也许他们从头开始创建了`UIView`. 我认为值得一试。

# c++ - 如何在 C++ 中读取/写入大文件时减少 I/O 磁盘访问次数

> ID：13669873
> 
> 赞同：1
> 
> 时间：2012-12-02T13:47:44.303
> 
> 标签：c++, file, io

我想读取一个结构类似于以下的大文件：

```
 John  10  department
        Hello 14   kjezlkjzlkj
        jhfekh 144 lkjzlkjrzlj
        ........ 
```

问题是我想在用 C++ 读取这个文件时尽量减少对磁盘的 I/O 访问次数。有没有办法访问磁盘上的文件，然后将文件的大部分读取到内存（即 1 个磁盘访问），然后读取文件的第二大部分（第二个磁盘访问......等等）？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T13:52:17.440

只需创建一个大缓冲区并用一次读取填充它。必要时重复。

流（stdio）实现了这一点。您可以使用`fopen`然后使用[setbuffer](http://www.kernel.org/doc/man-pages/online/pages/man3/setbuf.3.html)

**编辑**

这很简单

```
 /* 5MB - Can increase or decrease this to your hearts content */
   #define BUFFER_SIZE 5242880

   char buffer[BUFFER_SIZE];
   file = fopen("filename", "r");
   setbuffer(file, buffer, BUFFER_SIZE); 
```

然后使用任何操作来读取`fscanf`等`fgets`。

**编辑**

抱歉没有注意到它是 C++

这是C++的代码

```
#include <iostream>
#include <fstream>
using namespace std;

...

const int BUFFER_SIZE = 5242880;

filebuf fb;
char buffer[BUFFER_SIZE];
fb.setbuf(buffer, BUFFER_SIZE);
fb.open ("test.txt",ios::in);
istream is(&fb); 
```

然后可以使用`int i; is >> i`

ETC

现在快乐蒂诺·迪德里克森

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T14:02:56.850

在 C++ iostream 中，您可以使用[rdbuf](http://www.cplusplus.com/reference/ios/ios/rdbuf/)和[pubsetbuf增加缓冲区](http://www.cplusplus.com/reference/streambuf/streambuf/pubsetbuf/)

```
ifstream f;
char buf[4096];
f.rdbuf()->pubsetbuf(buf, sizeof(buf)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T13:51:41.150

这取决于操作系统。首先，您可能想要使用大缓冲区。看到[这个问题](https://stackoverflow.com/questions/1494182/setting-the-internal-buffer-used-by-a-standard-stream-pubsetbuf)。（这也取决于读数是否是连续的）。

或者您可以使用较低级别的系统调用，例如`mmap`在 Linux 或 Posix 上。（或至少，`read`具有大兆字节大小的缓冲区）。

# sencha-touch - 何时使用命名空间，何时不使用？

> ID：13669882
> 
> 赞同：2
> 
> 时间：2012-12-02T13:48:50.640
> 
> 标签：sencha-touch, sencha-touch-2

我对何时必须指定完整路径以及何时不必指定有点困惑。例如，`store: "Front"`不使用命名空间就可以工作：

```
Ext.define "App.Front"
    extend: "Ext.navigation.View"

    config:
        items:
            store: "Front" 
```

但在这里使用只是`model: "Front"`行不通：

```
Ext.define "App.store.Front"
    extend: "Ext.data.Store"

    config:
        model: "App.model.Front" 
```

不过，一切都在我的`app.js`(`models: [...]`等) 中定义。黄金法则在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:32:22.463

好问题。正如您正确指出的那样，您需要模型的完整路径，但对于列表或任何需要商店的此类组件，只有商店 id 就足够了。据我所知，没有明确定义的黄金法则，但在大多数情况下，您不必指定完整路径。是的，我知道 Sencha 在这个上有点丢球。

# c# - 文本框限制数字或标点符号

> ID：13669885
> 
> 赞同：0
> 
> 时间：2012-12-02T13:49:14.367
> 
> 标签：c#, wpf, textbox

我有一个用于用户输入的文本框。我想处理 keydown 事件，防止用户输入除字母以外的任何内容。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:56:46.753

只需使用`e.Key`并检查它是否不是字母。

```
if ((e.Key < Key.A) && (e.Key > Key.Z))
    e.Handled = true; 
```

如果您将 设置`e.Handled`为`true`，`char`则不会出现。

# html - Is there some standalone HTML editor

> ID：13669899
> 
> 赞同：2
> 
> 时间：2012-12-02T13:51:38.133
> 
> 标签：html, editor, wysiwyg

I need to write collection of HTML documents with very simple formatting. In fact I need only `h, div, pre, code, ul, ol, li, a` tags.

Is there a tool where I can write the text "online" and occasionally mark the text part and select some formatting to it and this text will be just wrapped with selected tag?

Something like WYSIWYG that is editing some standalone html document. Markdown f.e. is ok if there is tool where I can load collection of HTML documents and then easily edit them "on the fly".

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:54:37.013

Check this HTML editor out, it might suit your purpose

[http://htmleditor.in/index.html](http://htmleditor.in/index.html)

[http://www.quackit.com/html/online-html-editor/](http://www.quackit.com/html/online-html-editor/)

[http://ckeditor.com/demo](http://ckeditor.com/demo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:02:40.467

I'll suggest jHtmlArea, its **jQuery** powered and its quite fast

*   1 image file using CSS Image sprites
*   1 line of javascript, 1 line of CSS

I have used it in a lot of projects before and its quite good.

[http://jhtmlarea.codeplex.com/](http://jhtmlarea.codeplex.com/)

yes it does wrap the text, and you can simplify the toolbar icons above it.

# objective-c - 如何接收可可绑定值已更改的通知？

> ID：13669902
> 
> 赞同：2
> 
> 时间：2012-12-02T13:52:21.923
> 
> 标签：objective-c, cocoa, nsuserdefaults, cocoa-bindings

我只是在学习 Cocoa Bindings，但遇到了障碍。当绑定的值发生变化时，有没有办法调用方法？

**例子：**

我正在绑定一个`NSStepper`to`NSUserDefaults`来设置一个 int，但是当 int 改变时我需要能够更新一些其他的东西。有没有办法直接从对象控制器接收通知？或者我应该以某种方式观察`NSStepper`？
如果是这样，我该怎么做？IB 似乎不喜欢我在它已经绑定时弄乱它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T16:40:04.953

您可以使用[Key Value Observing (KVO)](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)直接观察 NSUserDefaults。注册这样的通知：

```
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
[userDefaults addObserver:self forKeyPath:@"YourUserDefaultsKey" options:0 context:NULL]; 
```

`@"YourUserDefaultsKey"`然后实现它，每当值更改时都会调用它：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    if (object == userDefaults && [keyPath isEqualToString:@"YourUserDefaultsKey"]) {
        int intValue = [userDefaults intValueForKey:@"YourUserDefaultsKey"];
        // Do whatever you need to do with new intValue
    }
} 
```

最后，不要忘记在适当的地方（例如 in `-dealloc`）取消注册为观察者：

```
- (void)dealloc
{
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults removeObserver:self forKeyPath:@"YourUserDefaultsKey"];
} 
```

请注意，Cocoa Bindings 本身是基于 KVO 的。

免责声明：我在浏览器中输入了此答案中的所有代码。它应该是正确的，但可能有一两个错字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:18:52.327

如果你还记得 Notifications、通知中心、观察者、@selector:，那么你的工作就完成了。

编辑：

你可以通过它的类来观察int的变化。通过 IB 或通过代码如何实现它取决于您。

# ios - 在 iOS 设备上强制打开（客户端）Safari 浏览器的命令？

> ID：13669905
> 
> 赞同：0
> 
> 时间：2012-12-02T13:52:58.240
> 
> 标签：ios, mobile

我们正在开发一个移动网页，在 iOS 设备上我们想强制打开 Safari 浏览器（没有标签，但强制打开 Safari 浏览器）。我们需要使用哪个命令行？

所以 iPhone 用户点击此链接，Safari 浏览器将打开并打开此特定 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:09:11.180

`[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"<URL>"]];`如果它来自您想要启动 safari 的应用程序，那么它应该为您解决问题。如果它内部的链接说是 UIWebView，您将需要处理`webView:shouldStartLoadWithRequest:navigationType:` [委托](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)中的链接单击以执行相同的 openURL 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:07:09.313

请提供有关您的方案的更多详细信息，如果您想从使用以下代码的 iOS 应用程序打开 safari 浏览器：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"your specific url"]]; 
```

或者你的代码在 HTML5、javascript 和 css 中，`shouldStartLoadWithRequest`像这样处理 webView 的委托方法：

```
#pragma mark UIWebView
#pragma mark UIWebViewDelegate

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{

     // Handle request url to open safari browser for your specific url
    if([[[request URL] absoluteString] isEqualToString:@"Your specific url"]){

        [[UIApplication sharedApplication] openURL:[request URL]];

        return NO;
    }
  return YES;
} 
```

# assembly - C 函数原型和 .set 指令

> ID：13669908
> 
> 赞同：0
> 
> 时间：2012-12-02T13:53:42.140
> 
> 标签：assembly, avr, avr-gcc

问题在 AVR GCC 上下文中。

我有 C 函数原型的 .s 文件，如下所示：

```
Mod_BigNum_by_u8: .global Mod_BigNum_by_u8 
; c-prototype ==> uint8_t Mod_BigNum_by_u8(uint8_t * pBigNum, uint8_t ByteCount, uint8_t Divisor); 

; Parameters 
    .set pBigNum, 24        ; (u16) pointer to the BigNum Dividend.  Highbyte first 
    .set ByteCount, 22      ; (u8) number of bytes in the BigNum 
    .set Divisor, 20        ; (u8) Divisor 

; Local Variables 
    .set BitCount, 23       ; (u8) Number of bits left in the current byte 
    .set CurrentByte, 21    ; (u8) Most recently used byte of BigNum 

; Return value 
    .set Dividend, 24       ; (u16) result (we only need 8bits, but WinAVR requires 16) 
... 
```

上面的函数在 Atmel Studio 中工作正常（我想不得不说“用 avr-gcc 编译”）。

```
GNU asm syntax 
Syntax: .set symbol, expression 

AVR asm 
.SET label = expression 
```

这意味着使用了 GNU 语法。现在我想了解的是 - 这些常数 24、22、20 在 C 函数原型方面意味着什么？评论表明我正在加载函数参数，但我不明白 .set 和那些常量是如何发生的。我曾经认为参数是通过堆栈和寄存器传递的。

第二个问题 - 我知道 AVR asm 是从 GNU 派生的，但我真的可以像上面那样将 GNU asm 语法与 AVR asm 混合吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:07:02.170

AVR 使用寄存器来传递前几个参数。请参阅[此处的调用约定说明](http://gcc.gnu.org/wiki/avr-gcc)。

The registers are memory-mapped at address zero. As such, the numbers you see in the pasted code are addresses that equal register numbers and can be used to reference the arguments through the memory mapping.

# javascript - 展开 javascript 循环

> ID：13669910
> 
> 赞同：3
> 
> 时间：2012-12-02T13:53:46.893
> 
> 标签：javascript, loop-unrolling

我有一个像这样的立方 3D 数组“类”：

```
function Array3D(size) {
    this.data = new Array(size*size*size);
    var makeIndex = function(p) {
        return p[0] + p[1]*size + p[2]*size*size;
    }
    this.get = function(p) { return this.data[makeIndex(p)]; };
    this.set = function(p, value) { this.data[makeIndex(p)] = value; };
} 
```

我想推广到多个维度，但不影响访问性能。这是我的简单方法：

```
function ArrayND(size, N) {
    var s = 1;
    for(var i = 0; i < N; i++) s *= size;
    this.data = new Array(s);

    var makeIndex = function(p) {
        var ind = 0;
        for(var i = N-1; i >= 0; i--)
            ind = ind*size + p[i];
        return ind;
    }
    this.get = function(p) { return this.data[makeIndex(p)]; };
    this.set = function(p, value) { this.data[makeIndex(p)] = value; };
} 
```

有什么方法可以“展开”我的`makeIndex`函数，以便在声明时对循环进行一次评估，而不是在调用时？使用运行时生成的代码的开销是否会`eval`抵消`new Function()`不循环的好处？

两者`size`和`N`本质上都是常数，因此重复的乘法和迭代感觉就像只能完成一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:10:05.650

Consider this:

```
var makeIndex = (function () {
    var arr = _.range( N ).map(function ( i ) {
        return Math.pow( size, i );
    });

    function dotProduct ( a, b ) {
        var sum = 0;
        for ( var i = 0, l = a.length; i < l; i++ ) {
            sum += a[i] * b[i];
        }
        return sum;
    }

    return function ( p ) {
        return dotProduct( p, arr );
    };
}()); 
```

So you create the `[0, size, size*size, size*size*size, ...]` array beforehand, and then on each invocation, you perform a dot product on that array and the `p` array.

I use underscore's [range](http://documentcloud.github.com/underscore/#range) function in my code.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:05:02.927

这是执行此操作的一种方法，它使用以下方法将函数内容构建为字符串`new Function`：

```
var makeIndex = (function() {
    var code = []
    var scale = 1;
    for(var i = 0; i < N; i++) {
        code.push("p["+i+"]*"+scale);
        scale *= size;
    }
    return new Function('p', 'return '+code.join('+'));
})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:41:48.687

传统的多维数组方法有什么问题？

```
function ArrayND(size, N, fill) {
    if (N < 1) throw new Error('Arrays must have at least one dimension.');
    if (size < 1) throw new Error('Arrays must have at least one element.');
    var arr = new Array(size);
    populate(arr, 1);

    function populate(a, depth) {
        for (var i = 0; i < size; i++) {
            if (depth < N) {
                a[i] = new Array(size);
                populate(a[i], depth+1);
            } else a[i]=fill;
        }
    }

    return arr;
} 
```

这将返回一个访问起来更加直观的多维数组（可以选择填充默认值）：

```
var arr = ArrayND(5, 3, 'hi');

console.log(arr[0][1][2]); // => 'hi'
arr[0][1][3] = 'mom'; 
```

* * *

**更新：**由于您的目标是通过提供任意长度的参数来访问多维数组，因此我将使用这种方法：

```
!function() {
    function ArrayND(size, N, fill) {
        if (N < 1) throw new Error('Arrays must have at least one dimension.');
        if (size < 1) throw new Error('Arrays must have at least one element.');
        if (!(this instanceof ArrayND)) return new ArrayND(size, N, fill); // allow this ctor to be called without `new` operator

        var arr = this;
        arr.length = size;
        populate(arr, 1);

        function populate(a, depth) {
            for (var i = 0; i < size; i++) {
                if (depth < N) {
                    a[i] = new Array(size);
                    populate(a[i], depth+1);
                } else a[i]=fill;
            }
        }

        return arr;
    }

    var proto = Object.create(Array.prototype); // polyfill necessary for older browsers, see https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create#Polyfill

    proto.get = function(indicies) {
        var pos = this;
        for (var i = 0; i < indicies.length; i++) {
            pos = pos[indicies[i]];
        }
        return pos;
    };
    proto.set = function(indicies, value) {
        var pos = this;
        for (var i = 0; i < indicies.length - 1; i++) {
            pos = pos[indicies[i]];
        }
        pos[indicies[indicies.length-1]] = value;
    }
    ArrayND.prototype = proto;

    this.ArrayND = ArrayND; // export to global scope
}(); 
```

这为您提供了两全其美：a`new ArrayND(s, d)`仍然看起来和行为像一个普通数组，但也为您`get`和`set`访问器提供了可以在运行时采用任意数量的索引参数——所有这些都无需修改内置的`Array`。

```
var arr = new ArrayND(5, 3, 'hi');

console.log(arr[0][1][2]); // => hi
console.log(arr.get([0,1,2]); // => hi

arr.push([]); // => 6 (the new length)
arr.set([6,0], 'I was added'); 
```

# c# - 可查询的 按 ID 列表过滤

> ID：13669913
> 
> 赞同：14
> 
> 时间：2012-12-02T13:54:07.927
> 
> 标签：c#, iqueryable

假设我们有一个`IQueryable<T>`. 该`Where`子句可以按单个 ID 值进行过滤，但是如何`IQueryable`根据 ID 列表返回一个？

```
[TestMethod]
public void TestIQueryableWithList()
{
    int ID1 = 1;
    List<int> IDs = new List<int> { 1, 3, 4, 8 };

    using (var db = new SellooEntities())            
    {
        // works fine as single value
        var iq = db.tblSearches.Where(x => x.seaUserId == ID1);

        // how can i do it to check for all the IDs ??
        foreach(int ID in IDs)
        {
            // this obviously wont work
            var iq = db.tblSearches.Where(x => x.seaUserId == ID);
        }
    }             
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-02T13:55:47.473

从列表中的`tblSearches`位置获取数据：`seaUserId``IDs`

```
[TestMethod]
public void TestIQueryableWithList()
{
    int ID1 = 1;
    List<int> IDs = new List<int> { 1, 3, 4, 8 };

    using (var db = new SellooEntities())            
    {
        var iq = db.tblSearches.Where(x => IDs.Contains(x.seaUserId);
    }             
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-02T13:55:58.543

您可以使用[**包含**](http://msdn.microsoft.com/en-us/library/system.collections.ilist.contains.aspx)

```
var iq = db.tblSearches.Where(x => Ids.Contains(x.seaUserId)); 
```

# c# - 如何比较 LINQ 结果？

> ID：13669914
> 
> 赞同：1
> 
> 时间：2012-12-02T13:54:15.177
> 
> 标签：c#, linq

我正在尝试找到一种方法来比较 LINQ 结果中的元素

这是 LINQ 代码

```
var sets =
         from a in patient.AsParallel()
         from b in patient.AsParallel()
         from c in patient.AsParallel()
         from d in patient.AsParallel()

where a.VisitNum < b.VisitNum && b.VisitNum < c.VisitNum && c.VisitNum < d.VisitNum
select new { a, b, c, d };

var sets1 =
                 from a in patient1.AsParallel()
                 from b in patient1.AsParallel()
                 from c in patient1.AsParallel()
                 from d in patient1.AsParallel()
select new { a, b, c, d }; 
```

我用它来比较这段代码，但每次都给我假

```
 if (Enumerable.SequenceEqual(sets, sets1) == true) 
```

有什么建议吗？

// 更新为 Jani 的答案

```
public class Result
    {
        public ACVsize5 a { get; set; }
        public ACVsize5 b { get; set; }
        public ACVsize5 c { get; set; }
        public ACVsize5 d { get; set; }

}

public override Boolean Equals(Result other)
        {
            return other.a.date.ToString() == a.date.ToString() && other.a.RaId.ToString() == a.RaId.ToString() && other.b.date.ToString() == b.date.ToString() && other.b.RaId.ToString() == b.RaId.ToString() && other.c.date.ToString() == c.date.ToString() && other.c.RaId.ToString() == c.RaId.ToString() && other.d.date.ToString() == d.date.ToString() && other.d.RaId.ToString() == d.RaId.ToString();
        }

var sets =
             from a in patient
             from b in patient
             from c in patient
             from d in patient
where a.VisitNum < b.VisitNum && b.VisitNum < c.VisitNum && c.VisitNum < d.VisitNum              

select new Result { a = a, b = b, c = c, d = d };
var sets1 =
             from t in patient1
             from y in patient1
             from u in patient1
             from p in patient1
where t.VisitNum < y.VisitNum && y.VisitNum < u.VisitNum && u.VisitNum < p.VisitNum 
             select new Result { a = t, b = y, c = u, d = p }; 
```

但我在覆盖方法上遇到错误

```
//Error 1 no suitable method found to override 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:41:30.727

~~实际上，您正在尝试比较已在后台生成的两个不同的匿名类（`System.Linq.ParallelQuery<AnonymousType#1>'`和`'System.Linq.IQueryable<AnonymousType#2>'`）。~~

我错了，正如@Allon 所说，只会为相同的结构生成一个类。

每当您在 Linq 查询中使用 select new 而不在左括号前指定类名时，将在后台生成一个匿名类，您可以通过[ILDasm](http://msdn.microsoft.com/en-us/library/aa309387%28v=vs.71%29.aspx)或[Reflector](http://www.reflector.net/)等工具看到它。

~~另一个重要的一点是，当您比较您声明的类型的对象（不是 .NET Framework 库的一部分）时，它们将通过它们的引用而不是它们的内容进行比较。因此，您必须通过重写 Equals 方法来定义自己的相等实现。~~

对于匿名类，情况并非如此，因为编译器将为它们生成这些方法。

要了解更多信息： [1](http://msdn.microsoft.com/en-us/library/bb348567.aspx) , [2](http://geekswithblogs.net/BlackRabbitCoder/archive/2012/02/16/c.net-little-wonders-the-sequenceequal-method.aspx)

~~创建一个简单的类（例如命名结果）并生成该类型的查询结果。然后类`override`的`Equals`方法并使用`SequenceEqual`. 一切都会好的。~~

 ~~```
public Class Result{
  public string a {get;set}
  public string b {get;set}
  public string c {get;set}
  public string d {get;set}
  //this is a short incomplete version of equals implementation
  //consult other questions to learn more about equality
  public override boolean Equals(Result other)
  { return other.a == a && other.b == b && other.c == c && other.d == d}
}

//you must add another order by clause to query so that both of them have the same order
var sets =
     (from a in patient.AsParallel()
     from b in patient.AsParallel()
     from c in patient.AsParallel()
     from d in patient.AsParallel()
     where a.VisitNum < b.VisitNum && b.VisitNum < c.VisitNum && c.VisitNum < d.VisitNum
     select new Result{ a = a, b = b, c = c, d = d }).AsEnumerable();
var sets1 =
     (from a in patient1.AsParallel()
     from b in patient1.AsParallel()
     from c in patient1.AsParallel()
     from d in patient1.AsParallel()
     select new Result{ a = a, b = b, c = c, d = d }).AsEnumerable();
//Now it would be right
if (Enumerable.SequenceEqual(sets, sets1))
{
   //do your stuff
} 
```~~  ~~您只需要确保这些序列具有相同的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T19:17:30.503

在我尝试了很多解决方案之后，我在彼此内部做了两个 foreach 来比较集合内的元素，但是这个解决方案非常糟糕，需要很长时间来比较大量数据~~

# amazon-ec2 - 如何在 EC2 上设置 XMPP

> ID：13669915
> 
> 赞同：0
> 
> 时间：2012-12-02T13:54:20.407
> 
> 标签：amazon-ec2, xmpp

我试图弄清楚如何在 EC2 上设置 XMPP 服务器。我一直在研究 ejabberd 和 OpenFire，无法确定哪个最好。我也在寻找一些简单的东西，对于 XMPP 中的菜鸟。你能给我一个教程或其他东西来指导我这样做吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:35:57.340

Openfire 将是初学者的最佳选择。那是我开始使用并安装在我的 Amazon EC2 映像上的服务器。非常简单的设置和配置，它有一个很棒的管理界面。还有几个插件可用，（例如 MSN 网关）。他们的 Spark 客户端也非常好，但您可以使用任何支持 XMPP 的客户端。

安装简单明了，Ignite 实时站点包含您需要的所有文档。Smack API 也非常适合开发您自己的客户端（我已经使用 Smack 和 Openfire 构建了 XMPP 机器人）。

# javascript - Javascript返回查询添加到url

> ID：13669916
> 
> 赞同：0
> 
> 时间：2012-12-02T13:54:30.083
> 
> 标签：javascript, redirect

在我的注销页面上，我将用户重定向回他们所在的最后一页，但我目前正在尝试添加`&msg=2`到 URL，但我不知道该怎么做。我试过做

```
<script>
  history.back(-1) + "&msg=2";
</script> 
```

但意外惊喜，它不起作用。所以有什么想法我会怎么做？抱歉这么简单的问题，我对 JS 有点陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:01:42.253

试试这个

```
window.location.replace(document.referrer+ "&msg=2"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T15:04:42.843

这似乎有点脆弱。例如，如果另一个站点链接到您的注销 URL，它将失败（或至少做一些意想不到的事情）。您也无权访问历史 URL，您只能告诉浏览器前进或后退。

我会通过在您的注销脚本中添加一个 URL 参数来解决这个问题，该脚本包含浏览器之后应该去的 URL（*继续*URL）。服务器使用添加的参数为继续 URL 提供 302，或默认为您的主页。

伪代码：

```
handleLogout(httpRequest){
  doLogout();
  queryParams = httpRequest.getQueryParameters();
  if (queryParams.get('continue')):
    continueUrl = queryParams.get('continue');
    redirectUrl = continueUrl.appendQueryParam('msg', '2');
    return Http302Response(redirectUrl);
  else:
    return Http302Response('my_home_page'); 
```

# php - PHP foreach，获得赢/总比率

> ID：13669918
> 
> 赞同：0
> 
> 时间：2012-12-02T13:54:47.610
> 
> 标签：php, foreach

我得到了这个代码，我试图得到 Win/除以总游戏数，应该小于 1。比如 0.75。

```
foreach($dat as $stats) {
 if($stats['championId'] != 0) {
    echo '<br><br>Champion ID : '.$stats['championId'];
     echo '<br>Total Games Played : '. $stats['totalGamesPlayed']; 
    foreach($stats['stats'] as $stat) {
        if($stat['statType'] == 'TOTAL_SESSIONS_WON')
        echo '<br> Won: '.$stat['value'];
    $ratio = $stat['value'] / $stats['totalGamesPlayed'];
        echo '<br>' .$ratio;
    }        
  }
} 
```

那段代码是对的，期待 $ratio 的部分。因为当我回应它时，我得到了大约 30 个数字，只有 1 个是正确的。你能指导我完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:01:33.590

您可能需要在第二个语句`{ ... }`周围加上大括号。`if`如果您不使用大括号，则只有`if`条件之后的第一条语句将被评估为[`if`结构](http://php.net/manual/en/control-structures.if.php)的一部分。

```
foreach($dat as $stats) {
  if($stats['championId'] != 0) {
    echo '<br><br>Champion ID : '.$stats['championId'];
    echo '<br>Total Games Played : '. $stats['totalGamesPlayed']; 
    foreach($stats['stats'] as $stat) {
      if($stat['statType'] == 'TOTAL_SESSIONS_WON') { // <-- here...
        echo '<br> Won: '.$stat['value'];
        $ratio = $stat['value'] / $stats['totalGamesPlayed'];
        echo '<br>' .$ratio;
      } // <-- ... and here
    }        
  }
} 
```

# c# - 将许多文本文件读入字符串数组c#

> ID：13669919
> 
> 赞同：2
> 
> 时间：2012-12-02T13:54:48.390
> 
> 标签：c#, c#-4.0

我正在尝试使用以下代码将多个文本文件读入字符串数组

```
for (int j = 0; j < paths.Length; j++)
{
   StreamReader fs = new StreamReader(paths[j]);

   string file_text = fs.ReadToEnd();
   textToarray[j] = file_text;

   fs.Close();
} 
```

我可以使用一次执行相同的程序`StreamRreader`吗？有没有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T13:58:14.677

[`File.ReadAllText`](http://msdn.microsoft.com/en-us/library/ms143368.aspx)您可以在一行代码中同时使用 LINQ 和方法：

```
var textToArray = paths.Select(p => File.ReadAllText(p)).ToArray(); 
```

# iphone - 自定义 UITableView 中的删除按钮

> ID：13669920
> 
> 赞同：7
> 
> 时间：2012-12-02T13:54:57.567
> 
> 标签：iphone, xcode, uibutton, customization

我有“滑动删除”的功能`TableViewCell`。我想自定义**删除**按钮。![在此处输入图像描述](../Images/d589b12e95ebac61ed5df5939196aac4.png)

这可能吗，以及如何访问“**删除**”按钮？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-18T12:03:21.283

如果只需要更改按钮的标题，则只需要添加 titleForDeleteConfirmationButtonForRowAtIndexPath 方法即可。

```
- (NSString *)tableView:(UITableView *)tableView titleForDeleteConfirmationButtonForRowAtIndexPath:(NSIndexPath *)indexPath {
    return @"NewButtonName";
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-22T07:07:06.337

**当用户执行滑动操作时将调用此方法**

**只需将其放在您的 CustomCell 中**

```
- (void)willTransitionToState:(UITableViewCellStateMask)state
    {
        [super willTransitionToState:state];
        if ((state & UITableViewCellStateShowingDeleteConfirmationMask) == UITableViewCellStateShowingDeleteConfirmationMask)
        {
            for (UIView *subview in self.subviews)
            {
                if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellDeleteConfirmationControl"])
                {
                    UIImageView *deleteBtn = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 64, 33)];
                    [deleteBtn setImage:[UIImage imageNamed:@"arrow_left_s11.png"]];
                    [[subview.subviews objectAtIndex:0] addSubview:deleteBtn];
                }
            }
        }
    } 
```

**你不应该这样尝试，你不应该改变 Apple 的默认视图。**

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-04T12:13:04.277

试试这个：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
  if (editingStyle == UITableViewCellEditingStyleDelete)
   {
    //   Your Code
    }
} 
```

# markdown - doxygen markdown 防护代码块与缩进列表冲突

> ID：13669926
> 
> 赞同：3
> 
> 时间：2012-12-02T13:56:12.787
> 
> 标签：markdown, doxygen

我观察到，使用 doxygen 1.8.2，[防护代码块](http://www.doxygen.nl/manual/markdown.html#md_fenced)不能放在缩进级别超过 2的[缩进列表中（在降价文件中）。](http://www.doxygen.nl/manual/markdown.html#md_lists)在下面的片段中：

```
- Level 1

~~~
printf("Hello world Level 1");
~~~

  - Level 2

  ~~~
  printf("Hello world Level 2");
  ~~~

    - Level 3

    ~~~
    printf("Hello world Level 3");
    ~~~ 
```

和作为代码片段出现在输出中，但（和它周围的`Hello world Level 1`s ）显示为纯文本输出。`Hello world Level 2``Hello world Level 3``~`

我犯了什么错误，或者这是一个已知的限制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T19:26:36.173

这是一个限制（如果您愿意，也可以是错误）。

通常缩进 4 个或更多空格的所有内容都将逐字显示（代码块），但对于列出的相对缩进算作缩进（因此在您的示例中为 2 个空格）。由于在解析列表之前处理了围栏块，因此您会发现围栏块不会被视为这样（在此传递期间缩进太多），但也不会在稍后变成逐字部分（由于该传递期间的相对缩进） .

# jsf - 动态变化 点击链接后的内容 JSF 2

> ID：13669928
> 
> 赞同：1
> 
> 时间：2012-12-02T13:56:20.660
> 
> 标签：jsf

我的网站有几个模块。页眉、顶部导航、内容、页脚。我从其他 xhtml 文件中包含这些模块 ()。现在我想点击顶部导航中的一些链接，内容中包含的文件将会改变。

我怎样才能做到这一点？我在 ui:include src=#{bean.method} 中尝试过，它返回我想要的文件的路径，但它不起作用。

# ios - 确定用户是在室内还是室外？

> ID：13669930
> 
> 赞同：6
> 
> 时间：2012-12-02T13:56:33.617
> 
> 标签：ios, iphone, core-location

有什么方法可以确定用户是在室内还是室外？我对室内映射不感兴趣，只要用户在室内或不在室内而不询问用户。

如果用户正在使用 Wifi，那么可能用户在室内，或者如果用户站在路上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T14:28:47.073

你不可能100%确定。一般来说，GPS 信号在室内会较弱，但并非总是如此。此外，用户坐标在道路上这一事实并不能说明什么，他可能在室内，信号强度可能是一周，坐标有缺陷。但是，根据您希望算法的准确程度，您可以依靠信号强度（可能还有位置）来为您提供一些信息。

如果你想把它提升到一个新的水平，虽然这可能会被证明是浪费时间，但考虑到用户通常有运动模式（回家上班、上班购物、周日在公园等），你可以试试上面的方法，加上其他几个参数，比如计步器（移动、步行、跑步）、速度（高速，计步器没有移动，意味着他在车里）、噪音、亮度等，然后运行逻辑回归算法可能会问用于用户反馈作为训练集。但是，正如您所看到的，这会变得非常大，如果您的应用程序很小，绝对不值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:15:31.217

不，没有 API 可以检查。查看 Wifi 之类的东西也对您没有帮助，因为用户可能使用移动热点并且当前正站在场地上。恐怕您必须询问用户他们是在室内还是室外，但是，您确定您在这里解决了正确的问题吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T14:20:59.370

您将无法明确说明用户是在室内还是室外（WIFI 与蜂窝网络无济于事……您可以在室外使用 WIFI，在室内使用蜂窝网络）。我认为你能得到的最接近的（即使这有太多的差异是值得信赖的）是注意 GPS 信号强度的变化（horizo​​ntalAccuracy、verticalAccuracy 等）。

底线是没有一种程序化的方式来检查这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-11T02:32:08.413

似乎任何基于单一传感器的方法都不能解决问题。一项研究工作通过结合此线程中提到的所有技术来解决您的问题。

周鹏飞等人[ [1](http://www.ntu.edu.sg/home/limo/papers/SenSys12_IODetector.pdf) ]，提出了IODetector('Indoor/Outdoor Detector')，一种检测室内/室外环境的传感服务。它使用各种传感器，包括加速度计、接近传感器、光传感器、磁力计。它还观察信号塔信号。根据他们的实验，系统的检测性能（精度/召回率）约为 85%。

[1](http://www.ntu.edu.sg/home/limo/papers/SenSys12_IODetector.pdf) [周鹏飞，郑元庆，李振江，李莫，沉国斌。2012\. IODetector：室内室外检测的通用服务。在第 10 届 ACM 嵌入式网络传感器系统会议 (SenSys '12) 会议记录中，113-126.8](http://www.ntu.edu.sg/home/limo/papers/SenSys12_IODetector.pdf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T14:19:03.437

您是否使用 Reachablitiy 类来确定用户是使用 WiFi 还是互联网连接方式？[请在此处](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)查看样品。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-02T15:37:19.280

使用可见 GPS 卫星的数量是一个指标，在 ios 上您无法获得该属性。
以 dB 为单位测量的 Gps 信号强度是另一个指标，但在 ios Api 中不可用。
接下来是 hdop 值，在 ios 上也不可用。
剩下的是水平精度，我以某种方式结合了上述内容。

其他简单的解决方案：
户外人们通常在移动：检查 GPS 的速度
如果您的范围很复杂复杂的解决方案：为导航和其他应用程序构建的数字路线图存储了市中心房屋的坐标（不是所有城市），您可以检查是否 pos在这样的多边形内，并结合精度值。

我估计可以使用 rhevsimple 解决方案来完成您的任务，这样您就可以获得 90 - 95% 的正确检测率

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-01T09:10:18.827

据我所知，有一个有用的 API（也可以在后台运行）：[`CMMotionActivityManager`](https://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMMotionActivityManager_class/)来自[`CoreMotion`](https://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CoreMotion_Reference/index.html#//apple_ref/doc/uid/TP40009686)框架。它为 a 提供了[`CMMotionActivity`](https://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMMotionActivity_class/index.html#//apple_ref/swift/cl/c:objc(cs)CMMotionActivity)一些运动活动，例如`automotive`或`cycling`。根据您的观点，您可以将汽车定义为室外（或室内）。

您也不太可能在室内骑自行车。但请记住，尽管它是 API 的一部分，但它并`cycling` [没有真正起作用。](https://stackoverflow.com/questions/23230596/cmmotionactivitymanager-ignores-cycling)

# jquery - 清除文本框后如何检测“第二个退格键”？

> ID：13669935
> 
> 赞同：1
> 
> 时间：2012-12-02T13:56:59.403
> 
> 标签：jquery, event-handling

我正在尝试进行类似 facebook 的搜索（自动完成），如 facebook/gmail 的撰写消息。我的整个脚本位于[http://jsfiddle.net/6YbrP/13/](http://jsfiddle.net/6YbrP/13/)。

```
 if(e.keyCode == 8 && $(this).val() == ''){
            $('#itemcontainer div.detailwrapper:last').remove();
        } 
```

使用上面的脚本，当我想添加更多项目时，我输入一些字符并使用退格再次擦除这些字符，当文本框清除它时，它也会立即删除最后一个元素。

这不是我想要的。文本框清除时不应删除最后一个元素，除非用户在文本框清除后再次按下退格键。逻辑与 facebook/gmail 的撰写消息中的一样。所以我该怎么做？对此有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T14:04:21.190

只需使用`keydown`而不是`keyup`.

```
$('#searchnama').keydown(function(e){
    if(e.keyCode == 8 && $(this).val() == ''){
        $('#itemcontainer div.detailwrapper:last').remove();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:04:15.453

```
preKeycode = '';
$('#searchnama').keyup(function(e){
    if(e.keyCode == 8 && $(this).val() == ''){
        $('#itemcontainer div.detailwrapper:last').remove();
    }

    // check previous key code and current key code
    if(preKeycode == 8 && e.keyCode==8){

    }

    preKeycode = e.keyCode;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T14:04:54.260

跟踪 KeyDown 上的输入是否为空：

```
$('#searchnama').keydown(function(e){
    $(this).data('empty', !$(this).val());
});

$('#searchnama').keyup(function(e){
    if(e.keyCode == 8 && $(this).data('empty') ){
        $('#itemcontainer div.detailwrapper:last').remove();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T14:26:27.127

这是[jsfiddle](http://jsfiddle.net/UeNHr/)的另一种方法！这个想法是添加一个标志并存储它是否是最后一个删除的字符！希望这可以帮助！

```
var IsLast = false;   
$('#searchnama').keyup(function(e){
    if(e.keyCode == 8 && !this.value && !IsLast){
        $('#itemcontainer div.detailwrapper:last').remove();
    }
    IsLast= this.value;
    }); 
```

# c# - C#/LINQ 自动过滤所有表

> ID：13669938
> 
> 赞同：1
> 
> 时间：2012-12-02T13:57:14.437
> 
> 标签：c#, linq

我正在使用 C# 和 LINQ to SQL。

对于我的家庭作业，我必须创建一个应用程序，它允许用户按某些列过滤数据库中的任何表。这个想法是我使用带有表格列表、3 个文本框 + 标签、DataGridView 和按钮的 DropdownList。当用户选择表时，标签文本更改为匹配所选表中的前 3 列，然后当用户按下按钮时，程序执行查询，该查询将按文本框中的值过滤行。

例如，如果用户选择表“客户”，则分配给文本框的标签将更改为“客户 ID”、“名称”、“地址”。如果用户输入文本框“10”、“Smith”、“11 Golden St.”。并按下按钮，DataGridView 将仅显示带有`ID=10`或`Name=Smith`或的用户`Address=11 Golden St.`

这一切都很简单，但是数据库有 20 多个表，所以仅仅做一个家庭作业就需要做很多工作。我想知道，是否有办法自动化这个过程，所以我不必编写单独的代码来过滤每个表并返回结果。

我已经想到，我可以使用`myDataContext.GetType().GetProperties()`并遍历它，将其添加`property.Name`到我的 DropdownList 项目中以创建我的表格列表。问题是做剩下的事情。例如`Customers`，映射表没有任何有用的属性（`Customers`属于类型`System.Data.Linq.Table<Customer>`，所需的属性在类中`Customer`）。我不知道如何从`Linq.Table<>`（例如`Customer`from `Linq.Table<Customer>`）中提取引用的类，即使可以在不明确知道表名的情况下构建查询（仅使用`GetType().GetProperties()`和类似）。

我的目标是做（或找出是否不可能做）这样的事情：

```
myDropdown_SelectedIndexChanged()
{
    string tableName = myDropdown.SelectedItem.ToString();
    <some universal type> table = dataContext.GetType.GetProperty(tableName)
    .SomeFunctionIDontKnowAbout(); //something to get class "Customer" if selected table was "Customers"
    label1.Text = table.GetType().GetProperties()[0].Name; // set first column name as label's text
} 
```

然后点击按钮：

```
string tableName = myDropdown.SelectedItem.ToString();
var query = dataContext.GetProperty(tableName)
.Select(table => table.GetProperties()[0] == textBox1.Text); 
//select from dynamically chosen table where value in first column matches text in textBox1 
```

这甚至可能吗？我希望我的老师没有给我们这个作业，所以我们会一次又一次地为 20 个不同的表编写相同的代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:05:43.180

[您可以使用Type.GetGenericArguments()](http://msdn.microsoft.com/en-us/library/system.type.getgenericarguments.aspx)获取对象的泛型类型，如下所示：

```
Type tableType = linqTable.GetGenericArguments()[0];
label1.Text = tableType.GetProperties()[0].Name; 
```

您也许可以通过构建[Expression Tree](http://msdn.microsoft.com/en-us/library/bb397951.aspx "表达式树")创建动态 LINQ 查询，但我不确定您将如何做到这一点。

# r - 转置数据帧

> ID：13669940
> 
> 赞同：3
> 
> 时间：2012-12-02T13:57:30.247
> 
> 标签：r, transpose

我正在使用 R 从 excel 文件（mydata.xls）中转置数据框。原始数据框如下所示：

```
ID         AB_1  AB_2  AB_3  AB_4  AB_5
Variable1  1     2     3     4     5
Variable2  1.5   2.8   4.5   5.6   7.8 
```

这就是我想要实现的目标：

```
ID    Variable1   Variable2
AB_1  1           1.5
AB_2  2           2.8
AB_3  3           4.5
AB_4  4           5.6
AB_5  5           7.8 
```

[根据过去类似帖子](https://stackoverflow.com/questions/7970179/transposing-a-dataframe-maintaining-the-first-column-as-heading)的回复，这就是我所做的。

```
Library(XLConnect)
x=loadWorkbook("mydata.xls")
y=readWorksheet(x,"Summary")
z=setNames(data.frame(t(y[,-1])),y[,1]) 
```

但是，这是我得到的：

```
z    
      Variable1   Variable2
AB_1  1           1.5
AB_2  2           2.8
AB_3  3           4.5
AB_4  4           5.6
AB_5  5           7.8 
```

注意到两个问题： 1.“ID”丢失。2.当我检查新数据框的第一列时，返回了第二列（见下文）

```
z[,1]
[1] 1 2 3 4 5 
```

我想知道 1）“ID”和整列发生了什么？2）如何解决这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:05:21.063

如果您想克服`t.data.frame`使用 col.names 形成 row.names 的默认行为，而是创建一个名为“ID”的列，请使用 cbind.data.frame 函数：

```
cbind( ID=row.names(z), z)
#--------------
       ID Variable1 Variable2
AB_1 AB_1         1       1.5
AB_2 AB_2         2       2.8
AB_3 AB_3         3       4.5
AB_4 AB_4         4       5.6
AB_5 AB_5         5       7.8 
```

控制台上打印的内容（或 data.frame 结构中）没有 row.names 列的名称，因此您对“Excel 世界”的期望不会完全满足。或者，您可以学习像真正的用户一样思考，然后使用`row.names(z)`.

# html - 一种在表格中声明固定行或列的 HTML5 方式？

> ID：13669945
> 
> 赞同：1
> 
> 时间：2012-12-02T13:57:54.367
> 
> 标签：html, html-table

是否有 HTML5 方法来声明表格中的固定行或列？

我不是在谈论一个 JS 插件或一个 hacky CSS 方式来做到这一点......我的意思是将来会起作用的东西，比如：

```
<table style="overflow-y: scroll">
  <tr fixed="fixed"><td>Something</td><td>Something</td>
  <tr><td>Something</td><td>Something</td>
  <tr><td>Something</td><td>Something</td>
  <tr><td>Something</td><td>Something</td>
  <tr><td>Something</td><td>Something</td>
</table> 
```

我不在乎它在几年内无法使用，因为它不向后兼容......它只是让我相信有一天，人们将能够轻松地制作固定的行和固定的列。

TL/DR：有没有办法在未来的任何 HTML 规范中声明用属性固定的行和列，如果没有，我该去哪里正式提出建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:17:52.747

修复行或列是一个表现问题，因此属于 CSS 而不是 HTML。

然而，即使在 HTML 4 中，HTML 也有可能被浏览器用来区分表头部分和表体部分的*元素*，并可能将后者实现为可滚动，同时保持表头部分静态：“表行可能`thead`是分别使用 THEAD、TFOOT 和 TBODY 元素分组为一个表头、表脚和一个或多个表体部分。这种划分使用户代理能够支持独立于表头和表脚滚动表体。打印长表时，表头和表脚信息可能会在包含表数据的每一页上重复。” （[行组上的 HTML 4.01](http://www.w3.org/TR/html4/struct/tables.html#edef-THEAD)）

 *可能没有浏览器自动实现这种滚动。似乎也不可能以任何直接的方式在 CSS 中建议它，因为表格中的高度分配有其自己的规则；您将需要使用额外的标记和定位。*

# c# - 显示表单当前背景颜色的名称

> ID：13669948
> 
> 赞同：0
> 
> 时间：2012-12-02T13:58:10.667
> 
> 标签：c#, background-color

我使用以下方法更改表单的颜色：

```
private void menuItem3_Click(object sender, EventArgs e)
{
    this.BackColor = Color.Green;
} 
```

现在，我想显示为我的表单选择的背景颜色`label1`。

```
private void button1_Click(object sender, EventArgs e)
{
    label1.Text = /*????????????*/;
} 
```

我应该在底部写什么来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:00:44.110

如果您想将颜色作为字符串，请使用：

```
label1.Text = this.BackColor.ToString(); // Green 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:00:57.223

```
label1.Text = this.BackColor.ToString(); 
```

# php - Uncaught SyntaxError: Unexpected token ILLEGAL

> ID：13669954
> 
> 赞同：2
> 
> 时间：2012-12-02T13:59:11.010
> 
> 标签：php, javascript, jquery, cakephp-2.1

我遇到了类似的问题： [Uncaught SyntaxError: Unexpected Token - jQuery - Help！](https://stackoverflow.com/questions/5249316/uncaught-syntaxerror-unexpected-token-jquery-help)

我正在使用 CakePHP 2.x 生成一个 jquery AJAX 请求。它在我的本地设置上运行良好，但在生产服务器上失败，给我一个未捕获的 SyntaxError：

Uncaught SyntaxError: Unexpected token ILLEGAL

这是PHP：

```
// Get the select element by its generated id attribute.
echo $this->Js->get('#'.$equipment_code)->event(
    // Change in the dropdown selection
    'change',
    // Request an array of compatible brands (match model type)
    $this->Js->request(
        array('controller'=>'builds','action'=>'ajax_brands'),
        // Update the associated brand dropdown
        array('update' => $hashed_brand_code, 'dataExpression' => true, 'data' => '$("#'.$equipment_code.'").serialize()')
    )
); 
```

生成此脚本：

```
<script type="text/javascript">
//<![CDATA[
$(document).ready(function () {
    $("#equipment-14-0").bind("change", function (event) {
        $.ajax({
            data:$("#equipment-14-0").serialize(), 
            dataType:"html", 
            success:function (data, textStatus) {
                $("#brand-14-0").html(data);}, 
                url:"\/proj\/eztek-dev\/builds\/ajax_brands"
            });
            return false;
        });
    $("#brand-14-0").bind("change", function (event) {
        $.ajax({
            data:$("#brand-14-0,#equipment-14-0").serialize(),
            dataType:"html", 
            success:function (data, textStatus) {
                $("#model-14-0").html(data);
            }, 
            url:"\/proj\/eztek-dev\/builds\/ajax_models"
        });
        return false;
    });
    $("#equipment-14-2").bind("change", function (event) {
        $.ajax({
            data:$("#equipment-14-2").serialize(), 
            dataType:"html", 
            success:function (data, textStatus) {
                $("#brand-14-2").html(data);
            }, 
            url:"\/proj\/eztek-dev\/builds\/ajax_brands"
        });
        return false;
    });
    $("#brand-14-2").bind("change", function (event) {
        $.ajax({
            data:$("#brand-14-2,#equipment-14-2").serialize(), 
            dataType:"html", 
            success:function (data, textStatus) {
                $("#model-14-2").html(data);
            }, 
            url:"\/proj\/eztek-dev\/builds\/ajax_models"
        });
        return false;});
    });
//]]>
</script> 
```

这是![堆栈跟踪](../Images/2d13b29e4f0df4f223ffc01161219a8c.png)

非常感谢您提供的任何帮助，如果有任何其他有用的信息，请告诉我，我会尽快把它放在这里。

谢谢！

编辑：

谢谢大家的帮助。我已通过删除 js 文件中未接受的字符来修复未捕获的语法错误，但 AJAX 仍然无法在生产服务器上运行。我在控制台中收到以下错误：

```
Failed to load resource: the server responded with a status of 500 (Internal Server Error) 
{Domain name} /proj/eztek-dev/builds/ajax_brands?data%5BEzcomponent%5D%5B2%5D%5Bezmodel_type_id%5D=5 
```

[![网络请求](../Images/3b473c2858ba05754523cb33da1f8290.png)](https://i.stack.imgur.com/mbQTY.png)
[（来源：[resaraos.com](http://resaraos.com/proj/screenshot2.png)）]

serialize() 可能有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:07:07.703

我只想指出，您生成 php 代码的方式非常不切实际。

```
$arr1 = array(
    'controller'=>'builds',
    'action'=>'ajax_brands'
);

$arr2 = array(
    'update' => $hashed_brand_code, 
    'dataExpression' => true, 
    'data' => '$("#'.$equipment_code.'").serialize()'
);

$jsRequest = $this->Js->request($arr1, $arr2);
$jsGet = $this->Js->get('#'.$equipment_code)->event('change', $jsRequest); // Change in the dropdown selection & update the associated brand dropdown

$echo $jsGet; 
```

类似的东西是有道理的。

很抱歉回答了一篇旧帖子（没有真正回答这个问题），这真的刺穿了我的眼睛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T11:08:31.053

任何偶然发现这个问题的人的迟到提示：

Chrome 未指定此特定错误。使用 Firefox（Firebug 控制台）获取有关错误的更多信息。

# ruby-on-rails - 当我向 will_paginate 添加“订单”参数时，Rspec 会抛出疯狂的错误？

> ID：13669957
> 
> 赞同：1
> 
> 时间：2012-12-02T13:59:33.730
> 
> 标签：ruby-on-rails

我有一个**用户**和一个**帖子**模型。我在用户显示视图中显示用户的帖子：

**users_controller.rb：**

```
 def show
    @user = User.find(params[:id])

    default_order = "created_at DESC"
    params[:order_by] ||= default_order 
    @posts = @user.posts.paginate(page: params[:page],
                                  per_page: 10,
                                  order: params[:order_by]) if signed_in?
    @posts = @user.posts.paginate(page: params[:page])
  end 
```

**用户/show.html.erb：**

```
<% if @user.posts.any? %>
  <h3>Posts (<%= @user.posts.count %>)</h3>

  <ul class="posts unstyled">
    <%= render @posts %>
  </ul>
  <%= will_paginate @posts %>
<% end %> 
```

这些帖子在实时站点中显示良好。但是当我运行这个规范时：

**user_pages_spec.rb：**

```
 describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }
    let!(:p1) { FactoryGirl.create(:post, user: user, title: "Fo",
                                   content: "Foo") }
    let!(:p2) { FactoryGirl.create(:post, user: user, title: "Ba",
                                   content: "Bar") }

    before { visit user_path(user) }

    it { should have_selector('h1',    text: user.name) }
    it { should have_selector('title', text: user.name) }

    describe "posts" do
      it { should have_content(p1.title) }
      it { should have_content(p1.content) }
      it { should have_content(p2.title) }
      it { should have_content(p2.content) }
      it { should have_content(user.posts.count) }
    end
  end 
```

我得到这个疯狂的错误：

```
 6) User pages profile page posts 
      Failure/Error: it { should have_content(p1.title) }
        expected there to be content "Fo" in "Action Controller: Exception caught 
          body { background-color: #fff; color: #333; }
          body, p, ol, ul, td {
            font-family: helvetica, verdana, arial, sans-serif;
            font-size:   13px;      
            line-height: 18px;
          }
          pre {
            background-color: #eee;     
            padding: 10px;
            font-size: 11px;
            white-space: pre-wrap;
          }    
          a { color: #000; }
          a:visited { color: #666; }   
          a:hover { color: #fff; background-color:#000; } 

          ArgumentError in
            Users#show

          Showing /home/alex/rails/inkleak/app/views/users/show.html.erb where line #20 raised:
          'nil' is not an ActiveModel-compatible object that returns a valid partial path.

           Extracted source (around line #20):
           17: <h3>Posts (<%= @user.posts.count %>) 
```

去去去去......就像千行。

这很奇怪，因为如果我评论这些行，测试就可以正常工作：

```
 #default_order = "created_at DESC"
    #params[:order_by] ||= default_order 

    #order: params[:order_by]) 
```

可能是什么问题呢？

**编辑：**

这是我的工厂：

**工厂.rb：**

```
 factory :user do
    sequence(:name)  { |n| "Person #{n}" }
    sequence(:email) { |n| "person_#{n}@example.com"}   
    password "foobar"
    password_confirmation "foobar"

    factory :admin do
      admin true
    end
  end

  factory :post do
    title "lorem"
    content "lorem ipsum"
    #tagging
    category
    user
    after(:build) do |post|
      post.tags << FactoryGirl.build(:tag)
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:32:28.567

您`order`对 will_paginate 的使用不正确。

这就是你的做法：

```
@user.posts.paginate(page: params[:page], per_page: 10).order(params[:order_by]) 
```

[来源](https://github.com/mislav/will_paginate/wiki)

# c++ - c++数组问题

> ID：13669959
> 
> 赞同：0
> 
> 时间：2012-12-02T13:59:49.657
> 
> 标签：c++, arrays

我正试图让我的代码的一小段工作，但似乎我的数组分配工作不正常。我不想问你的专业知识来查明问题所在。我已经制作了一个单独的头文件和 cpp 文件和一个主 cpp 用输入错误填充数组。

头文件是 postaH.h：

```
#ifndef POST_H
#define POST_H
#include <string>
#include <iostream>
#include "senderH.h"
using namespace std;
class postH : virtual public senderH{
      private:
              int* nvalue;
              string* texts;
      public:
             postH();
             virtual ~postH();
             postH(postH&);
             void Nvalue(int,int,int, int, int,int, int);
             void Texts(string,string,string,string,string,string,string);
};
#endif 
```

cpp 文件是 postaS.cpp：

```
#include <string>
#include <iostream>
#include <fstream>
#include "postH.h"

using namespace std;

postH::postH(){
}

postH::postH(postH& pos){
   nvalue = new int[8];
   texts = new string[8];
}

postH::~postH(){
                  delete [] nvalue;
                  delete [] texts;
}

void postH::Nvalue(int ir,int hsz,int szulev, int cir, int chsz,int surg, int suly){
     nvalue[0] = ir;
     nvalue[1] = hsz;
     nvalue[2] = szulev;
     nvalue[3] = cir;
     nvalue[4] = chsz;
     nvalue[5] = surg;
     nvalue[6] = suly;
     nvalue[7] = 0;
}

void postH::Texts(string nev,string varos,string utca,string cnev,string     cvaros,string cutca,string cstipus){
     texts[0] = nev;
     texts[1] = varos;
     texts[2] = utca;
     texts[3] = cnev;
     texts[4] = cvaros;
     texts[5] = cutca;
     texts[6] = cstipus;
     texts[7] = ";";
} 
```

所以主要的cpp是：

```
#include<iostream>
#include<string.h>
#include<stdio.h>
#include "senderH.h"
#include "postH.h"
using namespace std;

int main() {
    postH post1;
    senderH send1;
    int b;
    string input,a,quit = "q",inp1="package",inp2="alrsent";
    while(input < quit){
    cout<<"\nwelcome to the automated post office!!\n"<<endl;
    cout<<"For starting a send procedure please type |package|! For a list of sent     mails/packages type |alrsent|:"; cin >> feladat;
    if(input == inp1)    {
         cout<<"Nev: "; cin >> a;
         send1.setNev(a);
         cout<<"Varos: "; cin >> a;
         send1.setVaros(a);
         cout<<"Utca: "; cin >> a;
         send1.setUtca(a);
         cout<<"IR_szam: "; cin >> b;
         send1.setIR_szam(b);
         cout<<"Hazszam: "; cin >> b;
         send1.setHazszam(b);
         cout<<"Szul_ev: "; cin >> b;
         send1.setSzul_ev(b);
         cout<<"Cimzett Nev: "; cin >> a;
         send1.setC_Nev(a);
         cout<<"Cimzett IR_szam: "; cin >> b;
         send1.setC_IR(b);
         cout<<"Cimzett Varos: "; cin >> a;
         send1.setC_Varos(a);
         cout<<"Cimzett Utca: "; cin >> a;
         send1.setC_Utca(a);
         cout<<"Cimzett Hazszam: "; cin >> b;
         send1.setC_Hazszam(b);
         cout<<"Csomag tipus: "; cin >> a;
         send1.setCS_Tipus(a);
         cout<<"Csomag Surgosseg: "; cin >> b;
         send1.setSurgosseg(b);
         cout<<"Csomag Suly: "; cin >> b;
         send1.setCS_Suly(b);

             post1.Nvalue(send1.getIR_szam(),send1.getHazszam(),send1.getSzul_ev(),send1.getC_IR(),send1    .getC_Hazszam(),send1.getSurgosseg(),send1.getCS_Suly());
               }
    system( "PAUSE" );
    return 0;
}} 
```

主要要求 void Nvalue/Texts 应该用来自其他文件的输入填充数组，但它会因 win 错误而死。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:02:44.410

你没有遵循**[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**。
您需要提供一个**复制赋值运算符**和**复制构造函数**，它们可以对动态分配的成员进行深层复制。

On a honest note probably, You are much better of using `std::vector` as member than dynamic memory allocated members.

Also, make sure you are allocating dynamic memory in every constructor which can construct an object. In the code shown the constructor which takes no arguments simply doesnt allocate any memory to pointer members.

# openstreetmap - 计算 OpenStreetMap 的边界框

> ID：13669960
> 
> 赞同：2
> 
> 时间：2012-12-02T14:00:10.000
> 
> 标签：openstreetmap

是否可以从坐标（纬度、经度）、缩放级别和大小（屏幕）中获取边界框？我发现只能[从 tile 计算边界框](http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#Tile_bounding_box)。我需要它，因为 OpenStreetMap 在导出模式下只接受 bbox。我没有这方面的经验，所以我很乐意提供任何建议。谢谢。

**编辑：**

对不起，我描述错了。我写这样的东西：

（伪代码）`

```
x = getX(longitude, zoom); //X Tile - return 41870
y = getY(latitude, zoom); //Y Tile - return 22226
north = getXToLongitude(x, zoom); //return 49.998779 
south = getXToLongitude(x + 1, zoom); //return 50.004272
west = getYToLatitude(y, zoom); //return 49.997078 
east = getYToLatitude(y + 1, zoom); //return 50.000609 
```

`

但这是非常不准确的，并且会移动 100 m 的中心。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-23T13:10:39.017

是的。我也遇到过类似的问题，所以写了。像这样：

```
use Math::Trig;

sub getTileNumber {
    my ($lat,$lon,$zoom) = @_;
    my $xtile = int( ($lon+180)/360 * 2**$zoom ) ;
    my $ytile = int( (1 - log(tan(deg2rad($lat)) + sec(deg2rad($lat)))/pi)/2 * 2**$zoom ) ;
    return ($xtile, $ytile);
}

sub getLonLat {
    my ($xtile, $ytile, $zoom) = @_;
    my $n = 2 ** $zoom;
    my $lon_deg = $xtile / $n * 360.0 - 180.0;
    my $lat_deg = rad2deg(atan(sinh(pi * (1 - 2 * $ytile / $n))));
    return ($lon_deg, $lat_deg);
}

# convert from permalink OSM format like:
# http://www.openstreetmap.org/?lat=43.731049999999996&lon=15.79375&zoom=13&layers=M
# to OSM "Export" iframe embedded bbox format like:
# http://www.openstreetmap.org/export/embed.html?bbox=15.7444,43.708,15.8431,43.7541&layer=mapnik

sub LonLat_to_bbox {
    my ($lat, $lon, $zoom) = @_;

    my $width = 425; my $height = 350;  # note: must modify this to match your embed map width/height in pixels
    my $tile_size = 256;

    my ($xtile, $ytile) = getTileNumber ($lat, $lon, $zoom);

    my $xtile_s = ($xtile * $tile_size - $width/2) / $tile_size;
    my $ytile_s = ($ytile * $tile_size - $height/2) / $tile_size;
    my $xtile_e = ($xtile * $tile_size + $width/2) / $tile_size;
    my $ytile_e = ($ytile * $tile_size + $height/2) / $tile_size;

    my ($lon_s, $lat_s) = getLonLat($xtile_s, $ytile_s, $zoom);
    my ($lon_e, $lat_e) = getLonLat($xtile_e, $ytile_e, $zoom);

    my $bbox = "$lon_s,$lat_s,$lon_e,$lat_e";
    return $bbox;
} 
```

我还将此信息添加到[OSM wiki](http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#Lon..2Flat._to_bbox)，因此将来会更容易找到...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-30T16:02:22.313

我尝试根据来自[OSM](https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames)的代码示例实现用于 OSM 嵌入的 Angular 组件。事实证明这很难。:(

这是我到目前为止的代码：

```
import { Component, Input, OnInit } from '@angular/core';
import { DomSanitizer } from '@angular/platform-browser';

@Component({
  selector: 'app-osm',
  templateUrl: './osm.component.html',
  styleUrls: ['./osm.component.scss']
})
export class OsmComponent implements OnInit {
  @Input() latitude: number;
  @Input() longitude: number;
  @Input() zoom: number;

  public iframeSrc;
  public extMapSrc;

  constructor(
    private sanitizer: DomSanitizer
  ) { }

  ngOnInit(): void {
    const bbox = this.boundaryBox(this.latitude, this.longitude, 1100, 400, 16);
    this.iframeSrc = this.sanitizer.bypassSecurityTrustResourceUrl(
      `https://www.openstreetmap.org/export/embed.html` +
      `?bbox=${bbox.join(',')}` +
      `&layer=mapnik` +
      `&marker=${this.latitude},${this.longitude}`
    );
    this.extMapSrc = this.sanitizer.bypassSecurityTrustUrl(
      `https://www.openstreetmap.org/` +
      `?mlat=${this.latitude}&mlon=${this.longitude}` +
      `#map=17/${this.latitude}/${this.longitude}`
    );
  }

  lonToTile(lon: number, zoom: number): number {
    return (Math.floor((lon + 180) / 360 * Math.pow(2, zoom)));
  }

  latToTile(lat: number, zoom: number): number {
    return Math.floor(
      (1 - Math.log(
        Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180)
      ) / Math.PI) / 2 * Math.pow(2, zoom)
    );
  }

  tileToLon(x: number, zoom: number): number {
    return (x / Math.pow(2, zoom) * 360 - 180);
  }

  tileToLat(y: number, zoom: number): number {
    const n = Math.PI - 2 * Math.PI * y / Math.pow(2, zoom);
    return (180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n))));
  }

  boundaryBox(
    lat: number,
    lon: number,
    width: number = 1110,
    height: number = 400,
    zoom: number = 17,
  ) {
    const tileSize = 256;

    const lonTile = this.lonToTile(lon, zoom);
    const latTile = this.latToTile(lat, zoom);

    const minLonTile = (lonTile * tileSize - width / 2) / tileSize;
    const minLatTile = (latTile * tileSize - height / 2) / tileSize;
    const maxLonTile = (lonTile * tileSize + width / 2) / tileSize;
    const maxLatTile = (latTile * tileSize + height / 2) / tileSize;

    const minLon = this.tileToLon(minLonTile, zoom);
    const minLat = this.tileToLat(minLatTile, zoom);
    const maxLon = this.tileToLon(maxLonTile, zoom);
    const maxLat = this.tileToLat(maxLatTile, zoom);

    return [minLon, minLat, maxLon, maxLat];
  }

} 
```

它（有点）有效，尽管由于某种原因地图定位并不完全正确。

# cython - 将python对象转换为cython指针

> ID：13669961
> 
> 赞同：8
> 
> 时间：2012-12-02T14:00:21.763
> 
> 标签：cython

我正在尝试使用 cython 将 c++ 类公开给 python。我在 *.pxd 文件中编写了它们的定义，并在 *.pyx 文件中实现了一个包装器。但是我试图将函数指针传递给扩展类型时遇到了困难。这是简化的示例。

**foo.pyx**

```
from c_foo cimport cFoo
cdef class Foo:
    cdef cFoo* _impl 
```

**c_foo_holder.pxd**

```
cdef extern from "FooHolder.h":
    cdef cppclass cFooHolder:
        cFooHolder(cFoo* foo) 
```

**foo_holder.pyx**

```
from c_foo_holder cimport cFooHolder
from c_foo cimport cFoo

cdef class FooHolder:
    cdef cFooHolder* _impl
    def __init__(self, foo):
        self._impl = new cFooHolder(<cFoo*>(foo._impl)) # error here 
```

但在最后一行我得到错误“ **Python 对象不能转换为原始类型的指针**”。我还尝试了其他几种方法，但没有任何效果：

```
# error: 'Foo' is not a type identifier 
from foo import Foo
def __init__(self, Foo foo):
    self._impl = new cFooHolder(foo._impl)

# error: 'Foo' is not a type identifier 
def __init__(self, foo):
   self._impl = new cFooHolder(<Foo>(foo)._impl) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:49:37.810

我找到了解决方案。您必须告诉 cython foo._impl 确实是 cFoo* 实例。这可以通过提供 Foo 定义来实现（例如在 foo.pxd 中）。之后，您可以将 python 对象转换为 Foo 并且 cython 将知道其 _impl 字段的类型为 cFoo*。

**foo.pxd**

```
from c_foo cimport cFoo
cdef class Foo:
    cdef cFoo* _impl 
```

**foo.pyx**

```
from c_foo cimport cFoo
cdef class Foo:
    # methods implementation 
```

**c_foo_holder.pxd**

```
cdef extern from "FooHolder.h":
    cdef cppclass cFooHolder:
        cFooHolder(cFoo* foo) 
```

**foo_holder.pyx**

```
from c_foo_holder cimport cFooHolder
from c_foo cimport cFoo
from foo cimport Foo

cdef class FooHolder:
    cdef cFooHolder* _impl
    def __init__(self, foo):
        self._impl = new cFooHolder((<Foo?>foo)._impl) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:43:01.840

`__init__`构造函数只能接受纯 Python 对象，也有`__cinit__`但只能接受 C 原始类型。

当您将 Foo 传递给`__init__`它时，它看不到`_impl`成员，只能看到 python 类型的成员。

解决方案是`cFoo*`显式传递给`Init()`模拟构造函数的方法：

```
cdef class FooHolder:
    cdef cFooHolder* _impl
    cdef void Init(self, cFoo* foo_impl):
        self._impl = new cFooHolder(foo_impl) 
```

这样称呼它：

```
fooHolder = new FooHolder()
fooHolder.Init(foo._impl) 
```

# mongodb - 在 MongoDB 中缓存部分文档

> ID：13669967
> 
> 赞同：3
> 
> 时间：2012-12-02T14:01:02.740
> 
> 标签：mongodb

我非常熟悉 MongoDB 中的缓存是如何与操作系统的内存映射文件相关的。但是，我对它的细节更感兴趣...

假设，我在一个集合中有这种格式的文档：

```
{
  _id: ObjectId("..."),
  first_name: "x",
  last_name: "y",
  email: "z"
} 
```

1.  如果`findOne({_id: ObjectId("...")})`执行命令，则整个文档将被放入缓存中。在此之后，如果我运行`findOne({_id: ObjectId("...")}, {email: 1})`，是否会使用缓存（请注意，在最后一个命令中，我只对电子邮件字段感兴趣）？

2.  如果我发出`findOne({_id: ObjectId("...")}, {first_name: 1, last_name: 1})`，是整个文档都放入缓存，还是只是投影字段？也就是说，如果我`findOne({_id: ObjectId("...")})`在前面的命令之后运行，会不会用到缓存呢？

谢谢，
兹拉特科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:21:26.403

除非您的查询仅由索引满足（即使用[覆盖索引](http://docs.mongodb.org/manual/applications/indexes/#create-indexes-that-support-covered-queries)），否则任何加载部分文档的操作都会将整个内容分页到内存中。因此，当您重新运行并更改返回的字段时，文档将在缓存中。

使用投影来限制某些字段只是意味着它不会返回您未指定的字段（因此它在返回的数据方面更有效，特别是如果您有未使用的大字段）。

注意：您的问题让我想到了跨越多个页面的文档，以及是否会有所作为——我需要研究/测试的东西，这可能很有趣。

但是，严格来说，放入缓存的内容不仅仅取决于文档或正在使用的索引。 [预读](http://www.mongodb.org/display/DOCS/Production+Notes#ProductionNotes-Readahead)也将发挥作用（至少对于 Linux 而言），无论您的文档大小如何，您都将阅读完整的 4k 页，因此那里可能存在效率低下的因素。具体多少取决于您的文档大小和碎片程度。更多关于该主题的讨论可以在这里找到：

[https://serverfault.com/questions/408100/mongodb-and-datasets-that-dont-fit-in-ram-no-matter-how-hard-you-shove/408182#408182](https://serverfault.com/questions/408100/mongodb-and-datasets-that-dont-fit-in-ram-no-matter-how-hard-you-shove/408182#408182)

# c++ - 有没有 C++ 轻量级跨平台文件系统库？

> ID：13669969
> 
> 赞同：7
> 
> 时间：2012-12-02T14:01:18.997
> 
> 标签：c++, api, dll, filesystems

我需要一个用于游戏开发的轻量级跨平台文件系统库。我想在 Windows、Linux 和 Mac 上发布我的游戏。

据我所知，使用[dirent.h](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/dirent.h.html)可以在所有三个平台上使用。但是，我想知道是否存在一个更易于使用的库 - 直接使用 dirent 让我感到困惑，我没有得到任何结果。

我也尝试过 Boost，但我不喜欢它不是轻量级的，而且它在我的游戏的 Unix 端口上给我带来了麻烦。

我需要的功能是：

*   递归读取目录树
*   获取目录下的所有文件
*   获取一个目录下的所有子目录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T14:19:01.533

我创建了自己的文件系统库（在 Windows 和 Linux 上测试，都使用 GCC 和 Clang）。

您可以在 SSVUtils 库中找到它： [https ://github.com/SuperV1234/SSVUtils](https://github.com/SuperV1234/SSVUtils)

SSVUtils 没有外部依赖项。

示例用法：

```
log("Getting all page.json files", "loadPages");

string pagesPath("Json/Pages/");
vector<string> pageJsonPaths{getScan<Mode::Recurse, Type::File, Pick::ByName>(pagesPath, "page.json")}; 
```

# scala - Scala 宏的静态返回类型

> ID：13669974
> 
> 赞同：42
> 
> 时间：2012-12-02T14:01:44.063
> 
> 标签：scala, types, macros, scala-2.10, scala-macros

所以我有这个宏：

```
import language.experimental.macros
import scala.reflect.macros.Context

class Foo
class Bar extends Foo { def launchMissiles = "launching" }

object FooExample {
  def foo: Foo = macro foo_impl
  def foo_impl(c: Context): c.Expr[Foo] =
    c.Expr[Foo](c.universe.reify(new Bar).tree)
} 
```

我已经说过三遍我想`foo`返回 a `Foo`，但我可以执行以下操作（在 2.10.0-RC3 中）：

```
scala> FooExample.foo
res0: Bar = Bar@4118f8dd

scala> res0.launchMissiles
res1: String = launching 
```

如果我删除任何一个上的类型参数，也会发生同样的事情`c.Expr`。如果我真的想确保打电话的人`foo`看不到他们得到了 a `Bar`，我必须在树本身中添加一个类型归属。

这实际上非常棒——例如，这意味着我可以将宏指向某种模式，并`Vocabulary`使用表示词汇表中术语的成员方法创建某个类的匿名子类，这些将在返回的对象上可用。

不过，我想确切地了解我在做什么，所以我有几个问题。首先，该`foo`方法的返回类型实际上是什么？它仅可用于（可选）文档吗？它清楚地限制了返回类型（例如，在这种情况下我无法将其更改为`Int`），如果我完全删除它，我会收到如下错误：

```
scala> FooExample.foo
<console>:8: error: type mismatch;
 found   : Bar
 required: Nothing
              FooExample.foo
                         ^ 
```

但是我*可以*将其更改为`Any`并`Bar`在调用`foo`.

其次，这种行为是否在某处指定？这似乎是一组相当基本的问题，但我无法找到明确的解释或讨论。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-02T21:18:44.277

This behavior is underspecified but intended, though it might appear confusing. We plan to elaborate on the role of return type in macro signatures, but at the moment I feel like the flexibility is a good thing to have.

Also at times the behavior is inconsistent, e.g. when the macro is caught in the middle of type inference, its static signature will be used (i.e. `Foo` in your example), not the type of the actual expansion. That's because macro expansion is intentionally delayed until type inference is done (so that macro implementations get to see inferred types, not type vars). This is a trade-off and not necessarily the best one, so we're planning to revisit it soon: [https://issues.scala-lang.org/browse/SI-6755](https://issues.scala-lang.org/browse/SI-6755).

Another problem in this department is with implicit macros. When the return type of an implicit macro is generic and needs to be inferred from the requested type of an implicit value, bad things happen. This makes it currently impossible to use macros to generate type tags: [https://issues.scala-lang.org/browse/SI-5923](https://issues.scala-lang.org/browse/SI-5923).

# c++ - 如何重新制作这个循环

> ID：13669975
> 
> 赞同：0
> 
> 时间：2012-12-02T14:01:44.030
> 
> 标签：c++

这是我的代码，需要通过学生的教职号来检查学生，如果没有信息可以说明...

```
cout<<"Enter faculty number of the student(8 digits): "<<endl;
cin>>ch;
cout<<"Information about student with number:"<<ch<<endl;
    for(i=0;i<n;i++)
    {
        if(m[i][0]==ch)
        {
            for(j=0;j<4;j++)
                cout<<setprecision(8)<<m[i][j]<<"\t";
        }
        else if(m[i][0]!=ch)
        {
            cout<<"No information about this student"<<endl;
        }
    } 
```

它工作得很好，问题是如果我的“n”（从此代码中输入的学生人数）是 3 ......我们将有 3 个学生，并且循环“for”将进行 3 次......然后我们输入1 名学生（实际上我们正在输入 1 个教职员工编号）当我启动程序时，它会显示有关该学生的全部信息，并在两个新行中显示“没有关于该学生的信息”。我不能用 N 将 IF 检查从 FOR 中取出，因为我需要滚动 m[i]...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:12:53.790

我对此代码有一些建议。

1)`m[i][0] == ch`仅当学生预期有多个条目时，在找到条目后进行检查才有意义。我怀疑不是，在这种情况下，您应该尽快使循环中断`m[i][0] == ch`。

2）`cout<<"No information about this student"<<endl;`不应该在循环中，因为它会打印`n - 1`时间（如果`ch`确实是一个有效的 ID，`n`否则时间）。之后进行相关检查。

# wxpython - 在 wx.lib.plot 中绘制散点图

> ID：13669978
> 
> 赞同：0
> 
> 时间：2012-12-02T14:02:17.057
> 
> 标签：wxpython

到目前为止，我想在 wxpython 中绘制散点图，我已经设法绘制了折线图。我现在不知道如何使用 wx.lib.plot 绘制散点图任何帮助将不胜感激

```
import wx
import logging
import wx.lib.plot as plot

class PlotCanvasExample(plot.PlotCanvas):
def __init__(self, parent, id, size):
    ''' Initialization routine for the this panel.'''
    plot.PlotCanvas.__init__(self, parent, id, style=wx.BORDER_NONE, size=desiredSize)
    self.data = [(1,2), (2,3), (3,5), (4,6), (5,8), (6,8), (10,10)]
    line = plot.PolyLine(self.data, legend='', colour='pink', width=2)
    gc = plot.PlotGraphics([line], 'Line Graph', 'X Axis', 'Y Axis')
    self.Draw(gc, xAxis=(0,15), yAxis=(0,15))

class MyFrame(wx.Frame):
def __init__(self, parent, id ,size):
    wx.Frame.__init__(self, parent, id, size=desiredSize)
    sizer = wx.BoxSizer(wx.VERTICAL)
    self.canvas = PlotCanvasExample(self, 0, size)
    sizer.Add(self.canvas, 1, wx.EXPAND, 0)
    self.SetSizer(sizer)
    self.Layout()

if __name__ == '__main__':
''' Simple main program to display this panel. '''
# Create a simple wxFrame to insert the panel into
desiredSize = wx.Size(300,200)
app = wx.PySimpleApp()
frame = MyFrame(None, -1,  size=desiredSize)    
frame.Show()
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T22:58:19.887

代替

```
plot.PolyLine(self.data, legend='', colour='pink', width=2) 
```

和

```
plot.PolyMarker(self.data, legend='', marker='circle', colour='pink', width=2) 
```

参考 [http://www.wxpython.org/docs/api/wx.lib.plot.PolyMarker-class.html](http://www.wxpython.org/docs/api/wx.lib.plot.PolyMarker-class.html)

# drop-down-menu - 剑道下拉列表在剑道窗口中消失

> ID：13669979
> 
> 赞同：3
> 
> 时间：2012-12-02T14:02:20.730
> 
> 标签：drop-down-menu, kendo-ui

我在一个页面中有两个剑道窗口（添加和编辑），它们都有同名的下拉列表。

```
@(Html.Kendo().DropDownList()
.Name("TypeId") 
    .DataTextField("TypeName") 
    .DataValueField("Id") 
    .datasource(source => 
    {
      source.Read(read =>
           {
                read.Action("Action", "Controller"); 
           })
     })) 
```

访问添加窗口时，下拉菜单看起来不错，然后打开和关闭添加窗口三遍，然后访问编辑窗口。

第二次访问编辑窗口时，下拉列表消失，然后出现一个文本框代替下拉列表。

当我使用 MVC4 下拉列表控件时没有问题，只有剑道下拉列表有问题。

任何人都可以建议我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T15:05:29.720

您不能有多个具有相同名称的小部件 - 您需要确保每个小部件具有唯一的名称。

在幕后，您通过**Name**方法为小部件分配名称 - 它为 html 包装元素分配一个 ID，用于查找小部件并对其进行初始化。您可能知道，如果您有两个具有相同 id 的 html 元素 - jQuery 将始终返回第一个，因此第二个小部件将不会被初始化，并将保持为常规文本框输入。

# java - 使用 ArrayList 访问特定对象 Java

> ID：13669982
> 
> 赞同：1
> 
> 时间：2012-12-02T14:02:35.523
> 
> 标签：java, arrays, list, arraylist

我如何能够使用和数组列表访问特定的字符串？

```
List<String> myList = new ArrayList<String>();
myList.Add("Hi");
myList.Add("Pizza");
myList.Add("Can"); 
```

因此，如果我这样做了，然后我会这样做：

```
for (String s : myList)
    if (s == "Hi")
        system.out.println("Hello"): 
```

它不会打印“你好”。

我需要改变大小并查看字符串是否存在，但我似乎无法让它工作，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:09:00.610

您应该使用 .equals() 方法，它会检查字符串的值，而 == checke 对象引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:15:07.237

方法名称`add(object)`不是`Add()。这是另一个答案

```
 List<String> myList = new ArrayList<String>();
        myList.add("Hi");
        myList.add("Pizza");
        myList.add("Can");
        // method 1
        if( myList.contains("Hi")) {
            System.out.println("Found");
        }
        // method 2
        for( String word : myList ) {
            if( word.equals("Hi")) {
                System.out.println("found");
                // break the loop to avoid continues iteration
                break;
            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T14:03:39.263

**-** `Objects`在 Java 中使用`equals()`, 进行比较，并且在 Java 中`String`是**一个 Object**，所以它遵循相同的规则。

**-** `==`将用于比较**原语**或检查**两个或多个对象引用变量是否指向堆上的同一个对象。**

**-**所以你应该使用`equals()`或`equalsIgnoreCase()`（如果大小写无关紧要）来比较字符串对象。

```
for (String s : myList){
    if (s.equals("Hi"))
        system.out.println("Hello");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T14:03:40.060

```
 if (s == "Hi") 
```

将其更改为

```
 if (s.equals("Hi")) 
```

`equals()`在比较对象时使用总是比使用更好`==`（字符串文字除外）

`==`比较引用相等性。`equals()`比较对象内容的相等性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-02T14:04:31.337

你应该写下面的代码

```
for (String s : myList)
    if (s.equals("Hi"))
        system.out.println("Hello"): 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-02T14:05:46.583

`s.equalsIgnoreCase("Hi")`如果您不关心大写/小写，则可以使用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-02T14:16:45.557

为什么不使用**List.contains()**？

```
if (myList.contains("Hi"))
    system.out.println("Hello"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-02T15:39:09.257

为什么不使用 HashMap？您可以通过 HashMap 的 get 方法访问该值。您将避免在 ArrayList 上进行循环

# java - 我无法解密发送消息 AES

> ID：13669985
> 
> 赞同：0
> 
> 时间：2012-12-02T14:02:51.207
> 
> 标签：java, android, string, encryption, udp

我在从 UDP 接收解密消息时遇到问题。

我的代码：

```
byte[] receiveData= new byte[1024];

DatagramPacket pakiet = new DatagramPacket(receiveData, receiveData.length);
udp.receive(pakiet);

String wiadomosc = new String(pakiet.getData());
publishProgress(wiadomosc);
String szyfr = main.preferences.getString("SZYFR_TCP", "");
if(!szyfr.equals("1"))
{
    enc = new Encryptor(kluczByte, getCode());
    Log.e("myApp", "jestem 2");
    Log.e("message = ","" + wiadomosc);

    wiadomosc = enc.decrypt(wiadomosc);
    publishProgress(wiadomosc);
} 
```

在日志中，我看到该变量`wiadomosc`有数据和许多这样的坏字符：

![](../Images/74d655b58326a4bc4105f2c6b92f6640.png)

字节数组`reciveData`有 1024 个元素。我认为我的接收消息较短，因此必须将元素添加到 1024。如何从字符串中删除这些字符？因为我无法解密这个字符串，因为我得到一个“损坏的垫块”异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:35:08.897

我认为您只是在调用`pakiet.getData()`. 因此，您可以调用`pakiet.getLength()`以获取缓冲区中的确切数据量。如果您使用正确的偏移量和长度调用解密函数，您应该会获得更大的成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:41:43.903

UDP 头包含 UDP 数据的长度。所以java中必须有一些API来提取那个长度。长度以字节为单位。`receivedData`所以用那个长度初始化你。

# javascript - 具有两个功能的按钮中的 Javascript onclick 操作

> ID：13669987
> 
> 赞同：0
> 
> 时间：2012-12-02T14:02:59.363
> 
> 标签：javascript, actionscript-3, onclick

为什么此脚本无法使用 onclick 操作简单的 javascript 在按钮中发送值

```
<input type="submit" onclick="(document.getElementById('act').value='delete_user')&&(document.getElementById('uid').value='1')" > 
```

但是这个脚本有效

```
<input type="submit" onclick="(document.getElementById('act').value='delete_user')> 
```

如何让这两个价值观发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:23:14.137

这应该有效：

```
<input type="submit" onclick="document.getElementById('act').value='delete_user';document.getElementById('uid').value='1'; " > 
```

如果没有，请检查是否有带有 id（不是名称）的输入，`uid`并且以下内容也有效。

```
<input type="submit" onclick="document.getElementById('uid').value='1'; " > 
```

在这里查看：

[http://jsfiddle.net/r7tuT/3/](http://jsfiddle.net/r7tuT/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:09:40.677

您正在使用 &&，它用于验证目的。

正确的代码是：

```
<input type="submit" onclick="document.getElementById('act').value='delete_user';document.getElementById('uid').value='1'" > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T14:24:08.893

在**html中使用它** `<input type="submit" onclick="my_function();">`

并添加**javascript**部分：

```
function my_function(){
    document.getElementById('act').value='delete_user';
    document.getElementById('uid').value='1';
} 
```

# datagridview - 调整 cloumn 大小时，DataGridView 不允许鼠标移出它

> ID：13669988
> 
> 赞同：0
> 
> 时间：2012-12-02T14:03:00.723
> 
> 标签：datagridview, resize

我有一个 DataGridView 并且它有一些列，我希望可以调整列宽的大小，但是当鼠标到达它的边缘时，DataGridView 不允许最后一列更大。我该如何解决这个问题？我在其他软件中看到了DataGridView，我可以拖动最后一列的边缘并将其移到控件之外，这样我就可以使它更大，但不知何故，.net 的这个控件有这个肮脏的限制！请分享您的解决方案谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:19:55.097

是的，你不能这样做，但也有一些肮脏的解决方案:)

在表单中添加一个按钮并将此代码放在按钮单击功能中

```
dataGridView1.Columns[1].Width += 100; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T15:50:28.450

创建一个水平方向的拆分容器控件并将其停靠在您的表单上。将数据网格添加到 splitcontainer 的左侧面板并将其停靠或锚定，以便右侧难以抵靠拆分器位置。然后，当拆分容器的拆分器移动时，您的网格将调整大小，您可以处理调整大小事件以更改列大小。

# iframe - 使用 iframe 在 https 中显示文件

> ID：13669992
> 
> 赞同：0
> 
> 时间：2012-12-02T14:03:31.570
> 
> 标签：iframe, https

我正在使用 apache-tomcat-7 并测试我的 web 应用程序的 https 。

evrythig 工作正常，除了 iframe 组件。

我正在使用 iframe 显示文件，如下所示：

iframe src="#{myBean.aFilePathForPriview}"...

myBean.aFilePathForPriview 是保存文件路径的字符串。（例如：C:\somefolder\somefile.txt）这个 iframe 在 http 应用程序上工作正常，但似乎试图将文件安全 https 页面不起作用。

只有当我允许在浏览器上打开不安全的数据时，才会打开 I 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:42:15.250

我发现如果您尝试打开的文件位于您的 WebContent 内（在您的项目内）的文件夹中，则 iframe 将在您的服务器使用 ssl 时安全地传递文件。

# c++ - 错误：数组下标的类型“int [int]”无效

> ID：13669993
> 
> 赞同：2
> 
> 时间：2012-12-02T14:03:34.963
> 
> 标签：c++, arrays, function, dynamic, syntax

我想将动态大小的二维数组作为参数传递给函数。我知道这个问题已经在很多地方多次讨论过，但即使在应用了 [] 和 * 的所有排列和组合之后，我也无法让它发挥作用。

```
#include<iostream>
#include<algorithm>
using namespace std;

int bestpath(int *A, int N, int x, int y)
{   if(x>= N || y>=N)
        return 0;
    if(x == y == N-1)
        return 0;
    int value= A[x][y]; // Error: Invalid type 'int[int]' for array subscript.
    value+= max(bestpath(A, x+1, y, N), bestpath(A, x, y+1, N));
    return value;
}

int main()
{   int T, N, i, j, k;
    cin>>T;
    for(i=0; i<T; i++)
    {   cin>>N;
        int A[N][N];
        for(j=0; j<N; j++)
        {   for(k=0; k<N; k++)
            {   cin>>A[j][k];
            }
        }

        int ans= bestpath(&A[N][N], N, 0, 0);
        cout<<ans<<endl;
    }
    return 0;
} 
```

错误出现在指示的行中。

如果我将函数定义更改为-

```
int bestpath(int *A[], int N, int x, int y) 
```

错误出现在函数调用中：无法将 int* 转换为 int**。我想让我的基本知识清楚地使用 *A、*A[]、**A 以及我们传递矩阵的任何其他方式。还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:20:53.013

只需将函数调用为：

```
int ans= bestpath(A, N, 0, 0); 
```

并将您的函数声明更改为：

```
int bestpath(int A[N][N], int x, int x, int y); 
```

您确实需要移动代码以使其进一步编译，这里是[在线示例](http://codepad.org/dTurvHk6)。