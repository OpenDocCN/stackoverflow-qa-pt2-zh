# StackOverflow 问答 15586000-15586999

# android - 无论如何要录制声音（使用 SoundPool 播放）？

> ID：15586005
> 
> 赞同：2
> 
> 时间：2013-03-23T11:06:31.800
> 
> 标签：android, audio-recording, soundpool

我正在开发一个带有一些按钮的应用程序。当按下按钮时，应用程序会使用 SoundPool 方法播放声音。有没有办法记录用户播放的声音序列并将其保存到文件中？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T11:32:33.837

`OnClickHandlers`当然，正如您在按钮上已经拥有的那样，并且您`SoundPool`从那里调用，只需添加一行代码，将事件存储在一些`List`...

# twitter-bootstrap-rails - bootstrap 2 侧边栏，每行有两个链接

> ID：15586006
> 
> 赞同：1
> 
> 时间：2013-03-23T11:06:39.357
> 
> 标签：twitter-bootstrap-rails

我想要做的是创建一个侧边栏，不仅每行一个链接，而且每行两个链接。我几乎尝试了所有东西，但是我缺少一些东西，我不知道是什么。链接也可以是图像。顺便说一句，我在 Rails 3 工作。

非常感谢！！

# c# - LINQ 查询到日期范围内的总和值

> ID：15586009
> 
> 赞同：4
> 
> 时间：2013-03-23T11:06:44.750
> 
> 标签：c#, linq

我正在尝试创建一个 linq 查询，该查询将产生一个日期范围的集合，其中包含容量值的总和，同时考虑到范围可以重叠，我想要一个总和和一个重叠期间的不同日期范围。谢谢。

```
public ActionResult Index()
        {
            List<Capacities> _list = new List<Capacities>{
               new Capacities {StartDate = DateTime.Parse("01/01/2013"), StopDate = DateTime.Parse("01/01/2013 06:00"), Capacity = 100},
               new Capacities {StartDate = DateTime.Parse("01/01/2013 04:00"), StopDate = DateTime.Parse("01/02/2013 00:00"), Capacity = 120},
               new Capacities {StartDate = DateTime.Parse("01/04/2013"), StopDate = DateTime.Parse("01/04/2013 15:00"), Capacity = 100},
               new Capacities {StartDate = DateTime.Parse("01/04/2013 15:00"), StopDate = DateTime.Parse("01/04/2013 18:00"), Capacity = 150}
            };
            //results expected
            //01/01/2013 00:00 - 01/01/2013 04:00   100
            //01/01/2013 04:00 - 01/01/2013 06:00   220
            //01/01/2013 06:00 - 01/02/2013 00:00   120
            //01/04/2013 00:00 - 01/04/2013 15:00   100
            //01/04/2013 15:00 - 01/04/2013 18:00   150
            return View();
        }

        public class Capacities
        {
            public DateTime StartDate { get; set; }
            public DateTime StopDate { get; set; }
            public int  Capacity {get;set;}
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T12:48:25.007

我做了一些编程，但我扩展了你的代码。但我最终能够使用 LINQ :-)

我的代码：

```
SortedSet<DateTime> splitdates = new SortedSet<DateTime>();
foreach (var item in _list)
{
    splitdates.Add(item.Period.Start);
    splitdates.Add(item.Period.End);
}

var list = splitdates.ToList();
var ranges = new List<DateRange>();
for (int i = 0; i < list.Count - 1; i++)
    ranges.Add(new DateRange() { Start = list[i], End = list[i + 1] });

var result = from range in ranges
             from c in _list
             where c.Period.Intersect(range) != null
             group c by range into r
             select new Capacities(r.Key.Start, r.Key.End, r.Sum(a => a.Capacity)); 
```

完整代码在这里：[http](http://pastebin.com/wazbb1r3) ://pastebin.com/wazbb1r3 请注意，输出因语言环境而异。此外，某些位不是必需的，例如 DateRange.Contains()。

在上面的两个循环中，我不知道如何以可读的方式将它们转换为 LINQ。

# flash - 使用响应式设计调整网站窗口大小时，Flash 横幅会发生什么情况？

> ID：15586017
> 
> 赞同：0
> 
> 时间：2013-03-23T11:07:27.650
> 
> 标签：flash, responsive-design, autoresize, banner, banner-ads

我找不到一个网站来看看它是如何工作的……目前我有一个固定宽度的网站，侧边栏是 300 像素宽，并且 Flash 横幅/广告以固定大小去那里。通常这些横幅的尺寸为 300 像素或 250 像素。

如果我将设计更改为响应式会发生什么？我正计划这样做。他们也会调整大小吗？他们是如何处理的？如果 Flash 内容是 300 像素宽，它在响应式侧边栏上的外观会根据分辨率从 350 像素到 250 像素变化……它们也可以通过媒体查询或其他方式动态调整大小吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:17:09.920

**SWFObject**使用 HTML5 中的对象元素。对象元素允许您在其中嵌套可供选择的 Flash 内容，无需 Flash Player 或 JavaScript 支持即可访问。您当然可以像这里一样做出**响应**；例子：-

```
.swfObject
{
    width:100%;
    height:100%;
}

<object>
<param name="movie" value="http://www.youtube.com/v/NmRTreaCJXs?version=3"/>
<param name="allowFullScreen" value="true"/>
<param name="allowscriptaccess" value="always"/>
<param name="wmode" value="transparent"/>
<embed wmode="transparent" src="http://www.youtube.com/v/NmRTreaCJXs?version=3" type="application/x-shockwave-flash" class="swfObject" allowscriptaccess="always" allowfullscreen="true"/>
</object> 
```

希望它可以帮助你。

# php - 找不到 php.ini 文件

> ID：15586023
> 
> 赞同：0
> 
> 时间：2013-03-23T11:07:46.157
> 
> 标签：php, cpanel

我有一个带有 cPanel 的托管网站。我想修改`php.ini`，但我不知道该文件在服务器上的位置。我试图找到文件的位置`phpinfo()`，我得到了位置，`/usr/local/lib/php.ini`但是当我在文件管理器中搜索时，我无法找到这个位置。

我查看了[https://stackoverflow.com/a/3401536/1989696](https://stackoverflow.com/a/3401536/1989696)并遵循相同的步骤，但我不确定如何判断网络服务器是否支持 SSH 或 SFTP 访问。

另外，我怎样才能找到该`php.ini`文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T12:39:25.090

除非您有专用或虚拟服务器，否则不允许编辑系统范围的 PHP 设置。

如果 PHP 作为 CGI 运行，您可能会有一个`.ini`可以调整的自定义文件：

![电脑动画](../Images/f22b6ad36585dcf9d3055c05e3c164f4.png)

... 或者，如果您的 PHP 版本是 5.3 或更高版本，您可以创建自己的[.user.ini](http://www.php.net/manual/en/configuration.file.per-user.php)文件。

如果 PHP 作为 Apache 模块运行：

![在此处输入图像描述](../Images/ace4dd4f6e41db856a04b07a78c5f50c.png)

...您可以使用旧的[.htaccess](http://php.net/manual/en/configuration.changes.php)。

当然，95% 的 PHP 设置都可以在 PHP 代码中进行更改：

*   [ini_set()](http://php.net/ini_set)

# eclipse - 通过方法调用进行赋值的 Eclipse 格式

> ID：15586028
> 
> 赞同：1
> 
> 时间：2013-03-23T11:08:20.650
> 
> 标签：eclipse, formatter

我想要的（在 Eclipse 中格式化时）：

```
 Path file = write(FILE_SYSTEM.getPath(fileName), transactionStrings, 
            CHARSET, CREATE, TRUNCATE_EXISTING, WRITE); 
```

它在做什么：

```
 Path file =
            write(FILE_SYSTEM.getPath(fileName), transactionStrings, CHARSET,
                  CREATE, TRUNCATE_EXISTING, WRITE); 
```

行长为 80，标签宽度设置为 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:31:21.567

好的，找到了解决方案。

*   Windows > 首选项 > Java 代码样式 > 格式化程序 > 编辑
*   换行 > 表达式 > 分配 > 换行策略：如果不需要，则换行所有元素，第一个元素除外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:11:50.880

将 Eclipse 格式化程序（Window->Preferences->Java->Code style->Formatter）中的行长设置为更高的值。

# sql - MS Access 2007 插入查询无法执行

> ID：15586032
> 
> 赞同：0
> 
> 时间：2013-03-23T11:08:55.953
> 
> 标签：sql, ms-access-2007

我有一个简单的查询来将记录插入表（P_Case 表）。我从表单（Case_Form）的文本框中获取值。我在单击 Case_Form 中的命令按钮时执行查询。但是，执行失败，我收到错误“查询输入必须至少包含一个表或查询”！！！

```
INSERT INTO P_Case (Case_Date, Case_Desc, Aff_Person) 
VALUES (Forms!Case_Form![Case Date], Forms!Case_Form![Case Desc], (SELECT Person.ID FROM Person WHERE Person.National_ID=Forms!Case_Form![National ID])); 
```

我感谢您的帮助..

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:19:58.543

我使用 Access 已经有一段时间了，但我怀疑您是否可以在`VALUES`语句中使用子查询。

所以尝试类似：

```
INSERT INTO P_Case (Case_Date, Case_Desc, Aff_Person)
SELECT Forms!Case_Form![Case Date]
     , Forms!Case_Form![Case Desc]
     , Person.ID 
FROM Person 
WHERE Person.National_ID=Forms!Case_Form![National ID]
); 
```

如果这不起作用，您需要先从子查询中获取值并将其存储到表单变量中。

# html - 隐藏粘性标题栏

> ID：15586034
> 
> 赞同：0
> 
> 时间：2013-03-23T11:09:10.543
> 
> 标签：html, css, header

我在页面顶部固定了一个粘性标题。我希望它正常地粘在顶部，但向下滚动时隐藏，就像 StackOverflow 中的顶部栏一样。我在其他类似的 SO 线程上找不到解决方案。如果可能，我需要一个仅 css/html 的解决方案。这是我的那个 div 的代码。

```
 #topbar
 { 
  background-color: #E6E6E6 ;
  width: 100% ;
  padding-left: 850px ;
  padding-top: 3px ;
  color: brown ;
  top: 0px ;
  left: 0px ;
  position: fixed ;
  height: 33px ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:20:11.767

从改变

```
position:fixed; 
```

到

```
position:absolute; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:37:37.420

你可以在这里试试这个代码，它工作正常：

```
window.onscroll=function(){

    $(window).scrollTop()>0?$("#topbar").fadeOut():$("#topbar").fadeIn();

} 
```

示例：http: [//jsfiddle.net/Kpwaw/](http://jsfiddle.net/Kpwaw/)

# perl - 如何从 p、q 和 d 解密 RSA 文本（“数据大于 mod len”错误）

> ID：15586036
> 
> 赞同：1
> 
> 时间：2013-03-23T11:09:24.493
> 
> 标签：perl, rsa

我正在尝试使用 p、q 和 d RSA 参数解密一些文本。这是我的代码：

```
use Crypt::OpenSSL::RSA;

my $cipher_text = '21822641296030233094227313655848509440605583067924377543599838215888039562622129112129822895080408267928468534668157995224253484645729278749085139763130764635317451011719149549123004731102607506049461610797920861018820451965633121194245016524243388070479379308761222809258576639629711274935572812821629596774863705897518352434753834386314245125246066390859225185066330366811073476496684635339997048026729834327425483254569562337608819782060439696539771993138092386150797070320410153423661265108318321693803297014167486821806691214248145774922909225478697375135263295662839076540338821496045675607198591575588621659609';
my ($p, $q, $d) = ( 
  Crypt::OpenSSL::Bignum->new_from_decimal('165531801682935357262784768224825567629908164720968584885888440012850606062817307481747891600670103793664550471500745014914678541225436018211939431390053926336912952441897829541865006123774689488999658248640982182224222754377835611000656130261325362538051966725284846900143448968656908810497538272078057741753'),
  Crypt::OpenSSL::Bignum->new_from_decimal('161793529444258956657578160951133315733795687396943555542529109270426552912409876020630999202216058708771830991232800413521618941159308875874915491167328976063871230426911602170436153334762815254160844789590951618176633523800724364347786188020741173210831867848084340389279221308498668063580976312456313708227'),
  Crypt::OpenSSL::Bignum->new_from_decimal('4726230781685159301129128926091597612191418774972180765730674153946543720175721375641429858288249804644693058129864174539693448753576337835228363947222471089804797108134073771268482070990981157234925023770851307423738245681533737104667110764794379344770670194385194083716134044195705274587539907463141446593440244816853972305589231700346121402158165643863387848676660192091263041614047764528653983145902131144938355047165291147495652786645127063867131916536922764685613090037417336307735248968661966233168304037079723873034096551522712515691482108402916631034263410195810822874808411813091006049133015592459279891521'),
);

my $n    = $p->mul($q, Crypt::OpenSSL::Bignum::CTX->new());

# I use d as e because e is mandatory and I don't have it. Later I'll use public_decrypt instead of decrypt.
my $rsa  = Crypt::OpenSSL::RSA->new_key_from_parameters($n, $d, undef, $p, $q);
my $text = $rsa->public_decrypt($cipher_text); 
```

但这给了我：

```
RSA.xs:202: OpenSSL error: data greater than mod len at test.pl line 14 
```

我真的不知道是什么意思，数据不大于 d 或 n。

:-?

**已编辑**

以下 python 代码有效，所以据我所知，键和数据都很好。

```
from Crypto.PublicKey import RSA

p = 165531801682935357262784768224825567629908164720968584885888440012850606062817307481747891600670103793664550471500745014914678541225436018211939431390053926336912952441897829541865006123774689488999658248640982182224222754377835611000656130261325362538051966725284846900143448968656908810497538272078057741753
q = 161793529444258956657578160951133315733795687396943555542529109270426552912409876020630999202216058708771830991232800413521618941159308875874915491167328976063871230426911602170436153334762815254160844789590951618176633523800724364347786188020741173210831867848084340389279221308498668063580976312456313708227
d = 4726230781685159301129128926091597612191418774972180765730674153946543720175721375641429858288249804644693058129864174539693448753576337835228363947222471089804797108134073771268482070990981157234925023770851307423738245681533737104667110764794379344770670194385194083716134044195705274587539907463141446593440244816853972305589231700346121402158165643863387848676660192091263041614047764528653983145902131144938355047165291147495652786645127063867131916536922764685613090037417336307735248968661966233168304037079723873034096551522712515691482108402916631034263410195810822874808411813091006049133015592459279891521
n = p * q
cypher_text = 21822641296030233094227313655848509440605583067924377543599838215888039562622129112129822895080408267928468534668157995224253484645729278749085139763130764635317451011719149549123004731102607506049461610797920861018820451965633121194245016524243388070479379308761222809258576639629711274935572812821629596774863705897518352434753834386314245125246066390859225185066330366811073476496684635339997048026729834327425483254569562337608819782060439696539771993138092386150797070320410153423661265108318321693803297014167486821806691214248145774922909225478697375135263295662839076540338821496045675607198591575588621659609

decrypter = RSA.construct((n, 0L, d, p, q))
text = decrypter.key._decrypt(cypher_text)
print(text) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:33:34.513

该错误表示密钥大小和数据之间存在不匹配。我不是 python 专家，但 IIRC 它处理核心中的大数字，并且您将 cipher_text 作为文本字符串。

密文看起来像我们想要的二进制字符串的十进制，所以我认为你想要：

```
my $cipher_text = Crypt::OpenSSL::Bignum->new_from_decimal( '21822....' )->to_bin; 
```

结果是 256 个字节，听起来很对。

现在错误是：RSA.xs:202: OpenSSL error: unknown padding type at rsa.pl line 20

我不确定这一点，但无论如何我现在必须带孩子出去:)

# jquery - 如何使easyui数据网格响应？

> ID：15586037
> 
> 赞同：1
> 
> 时间：2013-03-23T11:09:36.780
> 
> 标签：jquery, user-interface, responsive-design, jquery-easyui

是否可以让 easyui 数据网格响应式？我们如何创建响应式数据网格或流体布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-16T08:12:01.493

下面给出的解决方案会根据加载数据网格的 div 进行调整。

```
$(function(){
    /**
     * Extend the datagrid functionality
     */
    $.extend($.fn.datagrid.defaults, {
          width: getMainWidth()
    });
});
/**
 * Returns the width of <div id="Main">
 * This can be used by the datagrids during initialization 
 * on the attribute: width
 * @returns
 */
 function getMainWidth(){
    return $("#Main").width();  
 } 
```

在这一点上，数据网格被扩展到整个宽度。`<div id="Main">` 现在，下一件好事是可调整的列宽。所以为了实现这一点，你可以像这样定义你的数据网格

```
<table id="datagridID" style="display:none;">
<thead>
    <tr>
        <th data-options="field:'column1', width:adjustColumnWidth(0.18)">Column 1</th>
        <th data-options="field:'column2', width:adjustColumnWidth(0.16)">Column 2</th>
        <th data-options="field:'column3', width:adjustColumnWidth(0.32)">Column 3</th>
        <th data-options="field:'column4', width:adjustColumnWidth(0.05)">Column 4</th>
        <th data-options="field:'column5', width:adjustColumnWidth(0.08)">Column 5</th>
        <th data-options="field:'column6', width:adjustColumnWidth(0.05)">Column 6</th>
        <th data-options="field:'column7', width:adjustColumnWidth(0.05)">Column 7</th>
        <th data-options="field:'column8', width:adjustColumnWidth(0.11)">Column 8</th>
    </tr>
</thead> 
```

adjustColumnWidth 函数的参数是百分比，它们应该都加到 100%

```
/**
 * This specifies a percentage width according to the #Main div
 * This is used during column initialization in order to set a percentage 
 * width.
 * eg:
 *   data-options="field:'docNumber', width:adjustColumnWidth(0.18)"
 *   sets a 18% width
 *    
 * @param percent
 * @returns {Number}
 */
function adjustColumnWidth(percent){  
    return getMainWidth() * percent;  
} 
```

数据网格初始化和往常一样：

```
var datagrid = $("#datagridID");
datagrid.show();
datagrid.datagrid({
    url: gridDataURL
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:57:30.560

[这是响应式数据表](http://css-tricks.com/responsive-data-table-roundup/)的一些不错的实现

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T04:37:28.863

我还没有看到easyui数据网格响应。但 Easyui 有数据网格和其他移动组件。 [http://www.jeasyui.com/demo-mobile/main/index.php?plugin=DataGrid&theme=metro-gray&dir=ltr&pitem=](http://www.jeasyui.com/demo-mobile/main/index.php?plugin=DataGrid&theme=metro-gray&dir=ltr&pitem=)

# c# - 如何在 Visual Studio 中使用 physionet wfdb 命令？

> ID：15586041
> 
> 赞同：0
> 
> 时间：2013-03-23T11:10:02.830
> 
> 标签：c#, visual-studio, command, signals

我有一个 C# 项目，我必须从 physionet 网站上的 ecg 信号数据库下载的 dat 文件中读取 ecg 信号文件。我的问题是：如何在 Visual Studio (v. 10) 中使用 wfdb 命令。我已经阅读了有关包装器的信息，它们提供了 wfdb 库来代替我完成这项工作，但这不是我所需要的。我想找到一种方法来以某种方式使用 XServer xterm 终端中的命令。更具体地说，我只需要 rsdamp 和 rdann 命令，因为我想读取信号和注释文件。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T21:57:38.807

```
 http://wfdbcsharpwrapper.codeplex.com/ 
```

To answer my own question, this is a wfdb c# wrapper library.

# jquery - jQuery 模态对话框问题

> ID：15586044
> 
> 赞同：0
> 
> 时间：2013-03-23T11:10:15.203
> 
> 标签：jquery, html, css, iframe, user-interface

我有一个按钮，可以在 jQuery 模型对话框中打开另一个页面。我在这里用了一个框架

```
function OpenUserDetail(userId) {

var url = 'popup.html';

var userFrame = $('<iframe class="dialogIFrame" frameborder="0" 
                marginheight="0" marginwidth="0" src="' + url + '"></iframe>');
var userDialog = userFrame.dialog(
                {
                    autoOpen: false,
                    height: 350,
                    width: 700,
                    modal: true,
                    title: 'New User',
                    open: function () {
                        userFrame.width(690);
                    },
                    close: function () {

                    }
                });
userDialog.dialog('open');

} 
```

**但它显示滚动条。即使我降低高度，它也会显示出来。问题是什么？**

![在此处输入图像描述](../Images/2eb9801ba0d1271ec49cfab5851c40dd.png)

检查此实时链接[http://sharanvijay.com/demo/issue/](http://sharanvijay.com/demo/issue/)

**更新：**为框架添加了 scrolling='no' 并降低了高度。现在它可以在 Chrome 中运行，但不能在 Firefox 中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:12:35.467

尝试将`overflow: hidden`/`overflow: visible`用于 iframe 和对话框控件

类似的答案在这里：

[隐藏 iframe 上的水平滚动条？](https://stackoverflow.com/questions/4856746/hide-vertical-scrollbar-on-an-iframe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:12:21.257

你试过溢出吗？

```
overflow: hidden; 
```

# c - 给定一个编码的消息，计算它可以被解码的方式的数量

> ID：15586047
> 
> 赞同：16
> 
> 时间：2013-03-23T11:10:39.517
> 
> 标签：c, string, algorithm

您会收到一条仅包含数字的编码消息。还为您提供以下映射

```
 A : 1
 B : 2
 C : 3
 ..
 Z : 26 
```

给定一条编码的消息，计算它可以被解码的方式的数量。

eg：`12`可以用2种方式解码：（A，B）和（L）

我想出了接受数字作为字符串字符然后检查每个数字的算法：

```
1.If the first digit of the string array is zero , return zero.

2.for each of its digit(i) from 1 to n perform:

   if str[i-1]>2 || (str[i-1]=='2' && str[i]>'6')
      return 0;

   if(str[i]==0)
      return 0; 
```

每次我尝试将消息中的第一个数字编码为一个字母，或者如果可能的话，我可以将前两个数字编码为一个字母。当遇到单个 '0' 或遇到 '32' 等无法编码时，只需返回即可。

这个问题可以更有效地解决吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-23T13:54:05.943

您当前对该问题的近似值是正确的。虽然，您需要非常小心地处理所有不清楚的情况，这将使我的回答比需要的时间长一点。

看待这个问题的正确方法是从[动态规划](http://xlinux.nist.gov/dads/HTML/dynamicprog.html)的角度。让我们将您的输入字符串视为`message`，并将其长度视为`n`。

要解码一个`message`字符`n`，您需要知道可以使用多少种方式解码`message`使用`n - 1`字符和`message`使用`n - 2`字符。那是，

`n`字符的消息。

```
 1
          1   2   3   4   5   6   7   8   9   0   1
        +---+---+---+---+---+---+---+---+---+---+---+
message | 1 | 2 | 3 | 4 | 1 | 2 | 3 | 1 | 4 | 1 | 2 |
        +---+---+---+---+---+---+---+---+---+---+---+ 
```

使用 1 个数字和一个`message`字符`n - 1`长。

```
 1
          1   2   3   4   5   6   7   8   9   0       1
        +---+---+---+---+---+---+---+---+---+---+   +---+
message | 1 | 2 | 3 | 4 | 1 | 2 | 3 | 1 | 4 | 1 | + | 2 |
        +---+---+---+---+---+---+---+---+---+---+   +---+ 
```

使用 2 位数字和一个`message`字符`n - 2`长。

```
 1
          1   2   3   4   5   6   7   8   9       0   1
        +---+---+---+---+---+---+---+---+---+   +---+---+
message | 1 | 2 | 3 | 4 | 1 | 2 | 3 | 1 | 4 | + | 1 | 2 |
        +---+---+---+---+---+---+---+---+---+   +---+---+ 
```

现在，你可能会问自己：

> 我如何计算可以解码字符和字符`message`的方式有多少？`n - 1``n - 2`

实际上是一样的。最终，您会将其简化为基本情况。

假设`ways[n]`它可以解码字符`message`的方式数量。`n`然后，你可以`ways[n]`这样放，

```
ways[n] = ways[n - 1] + ways[n - 2] 
```

（由于不知道如何定义空字符串的方式数，我将其视为`1`。）

在适当的约束和基本情况下，

*   `n = 0`,

    ```
     ways[n] =  1 
    ```

*   `n > 1`并且`message[n]`是有效的并且`message[n - 1:n]`是有效的，

    ```
     ways[n] = ways[n - 1] + ways[n - 2] 
    ```

*   `n > 1`并且`message[n]`有效`message[n - 1:n]`和**无效**，

    ```
     ways[n] = ways[n - 1] 
    ```

*   `n > 1`并且`message[n]`是**无效**的并且`message[n - 1:n]`是有效的，

    ```
     ways[n] = ways[n - 2] 
    ```

*   否则，

    ```
     ways[n] = 0 
    ```

C 中的迭代`decode`函数可能如下所示，

```
int decode(char* message, size_t len) {
    int i, w, ways[] = { 1, 0 };
    for(i = 0, w; i < len; ++i) {
        w = 0;
        if((i > 0) && ((message[i - 1] == '1') || (message[i - 1] == '2' && message[i] < '7'))) {
            w += ways[1];
        }
        if(message[i] > '0') {
            w += ways[0];
        }
        ways[1] = ways[0];
        ways[0] = w;
    }
    return ways[0];
} 
```

[你可以在ideone看到它。](http://ideone.com/h751xP)我正在使用恒定的额外内存进行计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-25T01:04:43.660

我想我会用我评论的 python 代码来补充@Alexander 的帖子，因为我花了一些时间来弄清楚动态编程解决方案是如何工作的。我发现意识到这与编写斐波那契函数有多么相似是很有用的。我还在[我的 github 上上传了完整的代码、测试和运行时比较以及天真的递归](https://github.com/jamesbaye/dailyCodingProblems/blob/master/2020-06-24_numberOfDecodings.ipynb)。

```
def number_of_decodings_fast(code):
    """ Dynamic programming implementation which runs in 
    O(n) time and O(1) space. 
    The implementation is very similar to the dynamic programming
    solution for the Fibonacci series. """
    length = len(code)
    if (length <= 1):
        # assume all such codes are unambiguously decodable
        return 1
    else:
        n_prev = 1 # len 0
        n_current = 1 # len 1
        for i in range(1,length):
            if (
                # a '1' is ambiguous if followed by
                # a digit X=[1-9] since it could be
                # decoded as '1X' or '1'+'X'
                code[i-1]=='1' and 
                code[1] in [str(k) for k in (range(1,10))]
            ) or (
                # a '2' is ambiguous if followed by 
                # a digit X=[1-6] since it could be
                # decoded as '2X' or '2'+'X'
                code[i-1]=='2' and 
                code[i] in [str(k) for k in range(1,7)]
            ):
                # New number of decodings is the sum of
                # decodings obtainable from the code two digits back
                # (code[0:(i-2)] + '[1-2]X' interpretation)
                # and decodings obtainable from the code one digit back
                # (code[0:(i-1)] + 'X' interpretation).
                n_new = n_prev + n_current
            else:
                # New number of decodings is the same as
                # that obtainable from the code one digit back
                # (code[0:(i-1)] + 'X' interpretation).
                n_new = n_current
            # update n_prev and n_current
            n_prev = n_current
            n_current = n_new
        return n_current 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T11:32:48.160

递归解决方案

```
int countdecodes(char * s)
{
    int r = 0;
    switch(*s)
    {
        case 0:
            return 1;
        case '0':
            return 0;
        case '1':
            r = countdecodes(s+1);
            if(*(s+1))
                r = r + countdecodes(s+2);
            return r;
        case '2':
            r = countdecodes(s+1);
            switch(*(s+1))
            {
                case '0': case '1': case '2':
                case '3': case '4': case '5':
                case '6':
                    r = r + countdecodes(s+2);
                default:
                    return r;
            }
        case '3': case '4': case '5': case '6':
        case '7':case '8': case '9':
            return countdecodes(s+1);
        default:
            return 0;
    }
} 
```

样品退货

1.  计数解码（“123”）；// 返回 3
2.  计数解码（“1230”）；// 返回 0
3.  计数解码（“1220”）；// 返回 2
4.  countdecodes("12321"); // 返回 6

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-02T07:02:32.273

对于这个具有 O(N) 时间复杂度和 O(1) 空间复杂度的问题，我有一个简单的基于模式的解决方案。

解释示例：-

12312

```
 1 
                     /                 \
                  1,2                   12
                /     \                   \
            1,2,3      1,23                12,3 
            |             |                    \
        1,2,3,1           1,23,1                12,3,1
        /    \           /       \             /       \
1,2,3,1,2   1,2,3,12   1,23,1,2   1,23,12   12,3,1,2   12,3,12

P1 P2 N  T
1  0  1  1
1  1  2  2
2  1  2  3
3  0  1  3
3  3  2  6 
```

P1 表示新元素不形成 2 位数字的案例数

P2 表示新元素形成 2 位数字的案例数

N=1 代表与 p1 相关的案例，N=2 代表与 p2 相关的案例

所以关于案例1和2的新树就像

```
 1
       /       \
      1         2
   /     \       \
  1       2       1
  |       |       |
  1       1       1
 / \     / \     / \
1   2   1   2   1   2 
```

```
#include <iostream>
#include <string>
using namespace std;

int decode(string s)
{
    int l=s.length();
    int p1=1;
    int p2=0;
    int n;
    int temp;
    for(int i=0;i<l-1;i++)
    {
        if(((int(s[i]-'0')*10)+int(s[i+1]-'0'))<=26)
        {
            n=2;
        }
        else
        {
            n=1;
        }
        temp=p2;
        p2=(n==2)?p1:0;
        p1=p1+t;
    }
    return p1+p2;
}

int main() {
    string s;
    getline(cin,s);
    cout<<decode(s);
    return 0;
} 
```

它仅对从 1 到 9 的字符有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-06T01:31:02.960

递归解决方案

```
list = []
def findCombiation(s,ls):
    if len(s) == 0:
        list.append(ls)
    ls = ls + "0"
    if s[0:1] == "0":
        findCombiation(s[1:],ls)
    else:
        st = s[:2]
        if st == "":
            return 
        if int(st) > 25 :
            findCombiation(s[1:],ls)
            ls = ls + s[:1]
        else:
            findCombiation(s[1:],ls+s[:1])
            findCombiation(s[2:],ls+s[:2])

findCombiation("99","") 
print(set(list)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-06T14:21:32.140

这是该问题的一个小而简单的**O(n)**解决方案，使用动态编程：

```
int ways(string s){
    int n = s.size();
    vector<int> v(n + 1, 1);
    v[n - 1] = s[n - 1] != '0';
    for(int i = n - 2; i >= 0; i--){
        if(s[i] == '0') {v[i] = v[i + 1]; continue;}
        if(s[i] <= '2' && s[i + 1] <= '6') 
            if(s[i + 1] != '0') v[i] = v[i + 1] + v[i + 2];
            else v[i] = v[i + 2];
        else v[i] = v[i + 1];
    }
    return v[0];
} 
```

这个想法是逐个索引遍历。如果该索引（附加到下一个）包含小于或等于 26 且没有零的数字，则将其分为 2 种可能性，否则只有 1 种可能性。

```
ways("123");    //output: 3
ways("1230");   //output: 0
ways("1220");   //output: 2
ways("12321");  //output: 6 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-23T10:16:16.517

```
def nombre_codage(message):
    map=[]
    for i in range(1,27,1):
        map.append(i)
    nbr=1
    n=len(message)
    pair_couple=0
    for j in range (0,n,2):
        if int(message[j:j+2]) in map and len(message[j:j+2])==2:
            pair_couple+=1
    nbr+=2**pair_couple-1 
    impair_couple=0
    for k in range (1,n,2):
        if int(message[k:k+2]) in map and len(message[k:k+2])==2:
            impair_couple+=1
    nbr+=2**impair_couple-1    
    return nbr 
```

这是 Python 中的一个解决方案，它将消息作为字符串，然后计算可以编码的两个数字的位数，并使用二项式系数——我使用了它的另一种形式`(C(n-p)=2^n)`——它计算可以对消息进行多少编码。

# visual-studio-2010 - 从外部更改的 TFS 和资源？

> ID：15586049
> 
> 赞同：0
> 
> 时间：2013-03-23T11:11:03.490
> 
> 标签：visual-studio-2010, tfs, visual-studio-2012, resources

**你好，**

在解决方案中包含图像并不罕见。问题是这些图像通常在另一个程序中的站点 Visual Studio 中被编辑掉，而 TFS 不会接受这些更改。那么你如何处理呢？您需要在更改图像之前检查图像吗？如果我忘了这样做怎么办？如何使用我的解决方案设置更新 TSF？

**此致**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:39:34.960

TFS中有两种不同的类型`workspaces`。

1.  `Server Workspaces`
2.  `Local Workspaces`- TFS 2012 中的新功能

**服务器工作区**

在`Server Workspaces`源代码管理下的所有文件中都标记为`read only`. 这意味着如果您希望在 之外编辑这些文件`Visual Studio`，工作流程将是：

1.  查看图片
2.  编辑图像
3.  签入图像

如果您在签出文件之前尝试编辑文件，外部程序将尝试保存编辑后的文件，看到它是只读的，然后要么不让您保存，要么询问您是否要覆盖。无论哪种方式，**TFS 都不知道您已更改文件**。

**本地工作区**

在`Local Workspaces`中，文件未标记为只读。您可以在任何您想要的程序中编辑它们。 `Visual Studio`将看到您已自动更改文件并将其标记为`Pending Change`. 然后，您可以签入此文件。工作流程将是：

1.  在您喜欢的任何程序中编辑图像
2.  签到`TFS`

这种工作方式更类似于 Subversion，我认为这正是您正在寻找的。

# django - Django 查询在模型字段之间进行简单的算术运算并与来自另一个模型的字段进行比较

> ID：15586052
> 
> 赞同：5
> 
> 时间：2013-03-23T11:11:34.890
> 
> 标签：django, django-models, django-queryset

（下面的所有代码都是实际代码的简化表示）。

如果我有以下 Django 模型：-

```
class Material(models.Model):
    name = models.CharField(max_length=110)

class OrderDetail(models.Model):
    material = models.ForeignKey(Material)
    order_quantity = models.IntegerField()
    quantity_delivered = models.IntegerField(null=True, blank=True)
    is_open = models.BooleanField()
    is_active = models.BooleanField()

class MaterialRequirement(models.Model):
    material = models.ForeignKey(Material)
    quantity = models.IntegerField() 
```

我有一个`MaterialRequirement`模型实例，我们称之为`material_requirement`。我正在尝试检索`OrderDetail`满足以下条件的对象：-

```
1\. material = material_requirement.material

2\. is_open = True

3\. is_active = True

4\. order_quantity > quantity_delivered

5\. material_requirement.quantity <= order_quantity - quantity_delivered 
```

我的问题是如何在下面的 ORM 查询中合并第 5 个选择标准。

```
order_details = OrderDetail.objects.select_related('material').filter(material=material_requirement.material,
                                                                    is_open=True,
                                                                    is_active=True,
                                                                    order_quantity__gt=F('quantity_delivered')) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:13:27.450

```
order_details = (OrderDetail.objects.select_related('material')
                 .filter(material=material_requirement.material,
                         is_open=True,
                         is_active=True,
                         order_quantity__gt=F('quantity_delivered'),
                         quantity_delivered__gte=F('order_quantity') - material_requirement.quantity,
                         )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:46:02.603

```
order_details = order_detail.extra(where=["order_quantity - quantity_delivered <= %d" % material_requirement.quantity])) 
```

# indexing - 如何使用 RavenDB 中具有日期范围的子集合查询索引？

> ID：15586057
> 
> 赞同：3
> 
> 时间：2013-03-23T11:11:55.247
> 
> 标签：indexing, ravendb

我在这里准备了完整的测试用例：[https ://gist.github.com/pkrakowiak/cc8addf5725193a01f2d](https://gist.github.com/pkrakowiak/cc8addf5725193a01f2d)

有`Location`文件。在某些时间段内，每个位置可以有零个或多个赞助商（由`IList<Sponsorship> Sponsors`财产代表）。我只需要返回那些在特定日期赞助的地点（比如我的例子中的 3 月 15 日）。因此，此类位置必须至少有一个`Sponsorship`与以下查询匹配的实例：`.Where(x => x.Sponsors.Any(s => s.From <= today && s.To >= today))`

我准备了两个测试，一个没有明确使用索引：`CanGetCurrentlySponsoredLocations`，另一个使用我创建的静态索引：`CanGetCurrentlySponsoredLocationsUsingStaticIndex`。第一个会通过，第二个会失败。问题是 - 我如何通过第二次测试？我需要对我的`Locations_ByCoordinates`索引进行哪些修改？

如果您想知道索引名称来自哪里或评论是什么 - 请忽略它们。:) 它们是我正在测试的其他东西的剩余物。

**更新**

我首先把这个问题带到了官方的 RavenDB Google 组：[https](https://groups.google.com/forum/?fromgroups=#!topic/ravendb/ySUPXqkpTA8) ://groups.google.com/forum/?fromgroups=#!topic/ravendb/ySUPXqkpTA8遗憾的是，它没有给我带来解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:55:00.687

通过单元测试的最简单的索引是：

```
private class Locations_ByCoordinates : AbstractIndexCreationTask<Location>
{
    public Locations_ByCoordinates()
    {
        Map = locations => from l in locations
                           from s in l.Sponsors
                           select new
                           {
                               Sponsors_From = s.From,
                               Sponsors_To = s.To
                           };
    }
} 
```

您可能想选择一个更好的名称，因为坐标没有被索引。

我不确定你的其他测试`CanSortOnSponsorshipStatus`是关于什么的。

**更新**

要包括没有赞助商的位置，请使用`DefaultIfEmpty`linq 扩展方法。这将确保所有位置都至少有一个索引条目。

```
private class Locations_ByCoordinates : AbstractIndexCreationTask<Location>
{
    public Locations_ByCoordinates()
    {
        Map = locations => from l in locations
                           from s in l.Sponsors
                                      .DefaultIfEmpty(new Sponsorship
                                      {
                                        From = DateTime.MinValue,
                                        To = DateTime.MaxValue
                                      })
                           select new
                           {
                               Sponsors_From = s.From,
                               Sponsors_To = s.To
                           };
    }
} 
```

# c# - 插入语句奇怪的错误

> ID：15586064
> 
> 赞同：1
> 
> 时间：2013-03-23T11:12:37.430
> 
> 标签：c#, sql-server, tsql

我在 azure 中调用 Web 服务并使用以下方法填充数据库。不知道怎么回事。。

```
using (SqlConnection conn = new SqlConnection(cs))
{
   using (SqlCommand command = conn.CreateCommand())
   {
      conn.Open();
      string cmdText = String.Format("INSERT INTO UserFiles VALUES('" + obj.userRef.ToString() + "','name','name','name','name','name','name'");
      command.CommandText = cmdText;
      command.ExecuteNonQuery();
      conn.Close();
   }
} 
```

这是错误消息：

> *System.Data.SqlClient.SqlException (0x80131904)：“名称”附近的语法不正确。*
> 
> 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning (TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)在 System.Data.SqlClient.TdsParser. 在 System.Data.SqlClient.SqlConnection.OnError(SqlException异常，布尔 breakConnection，操作1 wrapCloseInAction) 在 System.Data.SqlClient.TdsParser。 TryRun（RunBehavior runBehavior，SqlCommand cmdHandler，SqlDataReader dataStream，BulkCopySimpleResultSet bulkCopyHandler，TdsParserStateObject stateObj，Boolean& dataReady） 在 System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds（字符串方法名，布尔异步，Int32 超时） 在 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery （TaskCompletionSource`1 完成，String methodName，Boolean sendToPipe，Int32 timeout，Boolean asyncWrite）`1 wrapCloseInAction)
> at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`
> 
> 在 System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
> at _4900ProjectDesktopInterface.Form1.uploadbutton_Click(Object sender, EventArgs e) 在 C:\Users\Ken\Documents\GitHub\MegaFileUploadConversionService\TestingTool\4900ProjectDesktopInterface\Form1.cs:line 152\ r\nClientConnectionId:fb95122f-415b-484d-9438-903f0bf2aad0"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T11:19:25.753

最后你`cmdText`还需要一个`)`；

```
using (SqlConnection conn = new SqlConnection(cs))
{
   using (SqlCommand command = conn.CreateCommand())
   {
      conn.Open();
      string cmdText = String.Format("INSERT INTO UserFiles VALUES(@userRef, @name1, @name2, @name3, @name4, @name5, @name6)");
      command.Parameters.AddVithValue("@userRef", obj.userRef.ToString()); 
      command.Parameters.AddVithValue("@name1", name); 
      command.Parameters.AddVithValue("@name2", name); 
      command.Parameters.AddVithValue("@name3", name); 
      command.Parameters.AddVithValue("@name4", name); 
      command.Parameters.AddVithValue("@name5", name); 
      command.Parameters.AddVithValue("@name6", name); 
      command.CommandText = cmdText;
      command.ExecuteNonQuery();
      conn.Close();
   }
} 
```

正如我在[评论](https://stackoverflow.com/questions/15586064/insert-statement-weird-error/15586138?noredirect=1#comment22098279_15586064)中所说，您应该始终使用*[参数化查询](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)*。您的代码对[*SQL 注入*](http://en.wikipedia.org/wiki/SQL_injection)攻击开放

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T11:18:36.383

```
using (SqlConnection conn = new SqlConnection(cs))
{
   using (SqlCommand command = conn.CreateCommand())
   {
      conn.Open();
      string cmdText = String.Format("INSERT INTO UserFiles VALUES('" + obj.userRef.ToString() + "','name','name','name','name','name','name')");
      command.CommandText = cmdText;
      command.ExecuteNonQuery();
      conn.Close();
   }
} 
```

你忘记了右括号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T11:18:53.107

看起来您没有终止值的左括号？你为什么使用**String.Format**？并且您可以摆脱**conn.close**，因为**using**语句将隐式执行此操作。

```
using (SqlConnection conn = new SqlConnection(cs))
{
   using (SqlCommand command = conn.CreateCommand())
   {
      conn.Open();
      string cmdText = "INSERT INTO UserFiles VALUES('" + obj.userRef.ToString() + "','name','name','name','name','name','name')";
      command.CommandText = cmdText;
      command.ExecuteNonQuery();
   }
} 
```

# matlab - 如何将矩阵元素设置为周围元素的平均值？

> ID：15586068
> 
> 赞同：5
> 
> 时间：2013-03-23T11:12:57.603
> 
> 标签：matlab, matrix, octave

我有一个`X`表示受噪声影响的图像的矩阵。我还有一个布尔矩阵`M`，表示哪些像素受噪声影响。我想要做的是将每个“损坏的”像素设置为其八个相邻像素的平均值。

损坏的像素保证总是被未损坏的像素包围，并且图像边界上的任何像素都没有损坏。我可以用什么函数来编写它的矢量化版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T00:12:56.513

对于您的情况，这应该执行得相当快

```
fixed = conv2 (image, [1 1 1; 1 0 1; 1 1 1]/8, "same")
# mask is a logical matrix for the corrupted pixels
image(mask) = fixed(mask) 
```

**说明：**用`conv2`函数完成了均值滤波。为了计算一个像素及其邻居的平均值，所使用的内核是`ones (3) / 9`指每个像素值的 1/9 用于计算新值。由于您不想计算平均值中的中心像素，因此将其值设为 0（在内核中），将其他值设为 1/8。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T12:02:24.950

这可能不是最有效的解决方案，但它应该可以工作。

```
N = size(M, 1);
target_ind = find(M);
offset = [-N-1, -N, -N+1, -1, 0, 1, N-1, N, N+1];

area_ind = bsxfun(@plus, offset, target_ind);
X(target_ind) = median(X(area_ind), 2); 
```

由于保证所有损坏的像素都被像素包围，我们可以很容易地计算每个损坏像素的邻居的线性索引。在这里，我假设这`X`是一个灰度图像。

如果`I`有多个通道，那么我们可以遍历每个通道并每次添加一个偏移 `target_ind`量`area_ind`：

```
for i = 1:size(X, 3)
    chan_offset = (i - 1)*size(X, 1)*size(X, 2) % Add the number of elements in previous channels to get indices in the current channel
    X(target_ind + chan_offset) = median(X(area_ind + chan_offset), 2);
end 
```

# php - 确定选中哪些动态生成的复选框

> ID：15586071
> 
> 赞同：0
> 
> 时间：2013-03-23T11:13:19.350
> 
> 标签：php, checkbox

我正在尝试制作一个带有复选框的表单，该表单最终应该让用户订阅数据库中的论坛。

我使用此代码为当前用户动态创建订阅/取消订阅的论坛列表：

```
//$checkboxes = array();
echo' <form  action="" method="post">';

while($unsubscrlist = mysql_fetch_assoc($sublist))
{
   //$checkboxes[] = $unsubscrlist['Name'];
    echo '<input type="checkbox" checked="checked"  name="subscrform[]" 
    value="' .$unsubscrlist['Name']. '  "/>' .$unsubscrlist['Name']. '   <br />';
}

while($subscrlist = mysql_fetch_assoc($notsublist))
{
   // $checkboxes[] = $subscrlist['Name'];
    echo '<input type="checkbox"  name"subscrform[]" 
    value="' .$subscrlist['Name']. '"/>' .$subscrlist['Name']. '<br />';
}

echo '<br />
<input type="submit" value="Submit" />
</form>'; 
```

然后，要确定选中哪些复选框，我使用以下代码：

```
if($_SERVER['REQUEST_METHOD'] == 'POST')
{
  if(isset($_POST['subscrform'])) 
{
 //echo 'getshereeee';
    foreach($_POST['subscrform'] as $value)
    {
    //echo 'getshereeee';
            echo $value;

     }

} 
```

现在，第一个复选框 - 用户已经订阅 - 被此代码作为值输出，而选中的复选框的第二个列表永远不会以某种方式输出为值。

我认为这可能与两次使用相同的名称有关。所以我将第一个列表更改为 unsubscrform 并为两者进行了检查循环，但仍然只将第一个列表作为输出值。

我觉得我错过了一些简单的东西，但无法真正找出什么。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:49:24.473

我刚刚找到了解决问题的方法！

通过改变

```
echo' <form  action="" method="post">'; 
```

至

```
echo' <form name="subscrform" action="" method="post">'; 
```

# java - 使用 getAssets() 会出现错误“方法 getAssets() 对于 ClassName 类型未定义”？

> ID：15586072
> 
> 赞同：3
> 
> 时间：2013-03-23T11:13:24.063
> 
> 标签：java, android

我正在尝试打开资产文件夹中的文件。但是使用 getAssets() 会给出上面给出的错误。我知道我必须从另一个活动中传递上下文，但是我也不能这样做，因为接下来会出现另一个错误——“ClassName 类型的 onCreate(SQLiteDatabase, Context) 方法必须覆盖或实现超类型方法”。所以我被困住了。有没有更好的方法打开该文件？这是行：

```
InputStream is = getAssets().open("file1.txt"); 
```

*注意：ClassName 不是一个活动，它只是一个类，所以 getAssets() 不能在没有从另一个活动传递上下文的情况下工作。

编辑：这是类和 onCreate 声明：

```
public class DatabaseHandler extends SQLiteOpenHelper {
@Override
public void onCreate(SQLiteDatabase db) {//some stuff
InputStream is = getAssets().open("file1.txt");
//more stuff
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T11:51:23.687

> 我正在尝试打开资产文件夹中的文件。但是使用 getAssets() 会给出上面给出的错误。

`getAssets()`是一种方法`Context`。

> 我知道我必须从另一个活动中传递上下文，但是我也不能这样做，因为接下来会出现另一个错误-“ClassName 类型的 onCreate(SQLiteDatabase, Context) 方法必须覆盖或实现超类型方法”。

由于您拒绝粘贴发生这种情况的源代码，因此很难为您提供帮助。

> ClassName 不是一个活动，它只是一个类

更具体地说，它是 的子类`SQLiteOpenHelper`。

> 所以 getAssets() 如果不从另一个活动传递上下文就无法工作。

A`SQLiteOpenHelper`被传递`Context`给它的构造函数，你需要重写它。

除此之外，如果您的目标是在您的应用程序中打包数据库，[请使用`SQLiteAssetHelper`](https://github.com/jgilfelt/android-sqlite-asset-helper)，因为它已经解决了这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-23T11:49:14.383

怎么样：

```
InputStream is = getActivity().getAssets().open("file1.txt"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-27T09:27:38.063

使用`getContext()`方法。设置`getContext().getAssets()`。我希望它会起作用。实际上**getAssets()**是 Context 上的一种方法。有关更多详细信息，您可以访问[这里](http://developer.android.com/reference/android/app/Dialog.html#getContext)

# c# - 使用参数从代码后面调用 JavaScript 函数

> ID：15586073
> 
> 赞同：1
> 
> 时间：2013-03-23T11:13:33.753
> 
> 标签：c#, javascript

```
<script type="text/javascript">
    function test(a)
    {

        window.opener.document.forms[0].elements['src'].value = a;
    }
  </script>

protected void btnUpload_Click(object sender, EventArgs e)
{
    try
    {
        string filename = Path.GetFileName(this.fileuploadimages.PostedFile.FileName);
        fileuploadimages.SaveAs(Server.MapPath("~/Images/" + filename));
        ImageUrl = "~/Images/" + filename;
        btnUpload.OnClientClick = string.Format("test(\'{0}\');",ImageUrl);
        Response.Write("<script language="'javascript'"> {top.close() }</script>");
    }
    catch (Exception ex)
    {
        Response.Write(ex.Message);
    }
} 
```

我需要使用参数调用名为 test 的 javascript 函数

我正在尝试像上面那样，但它不起作用请提前帮助我thanx

# c++ - 新矩阵[N][N] 失败

> ID：15586075
> 
> 赞同：0
> 
> 时间：2013-03-23T11:13:38.223
> 
> 标签：c++, multidimensional-array, stack-overflow

我有一个堆栈溢出，在堆栈上分配了一个巨大的矩阵（我同意这一点：在那里分配它很愚蠢），我正在编写以下代码，因为我想使用下标索引访问矩阵的元素 mat[ x][y]

```
double (*mul1)[N][N];
mul1 = new double[N][N]; 
```

我收到一个错误：

```
error C2440: '=' : cannot convert from 'double (*)[1000]' to 'double(*)[1000][1000]' 
```

为什么我不能用 new 分配二维数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:23:00.027

你可以这样做：

```
int N = 10 ;
double** mul1 = new double*[N];
for(int i = 0; i < N; ++i)
   mul1[i] = new double[N]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T11:22:24.570

```
double *mul1[N];
for (int i=0;i<N;++i)
    mul1[i] = new double[N]; 
```

[将二维数组表示为一维数组](https://stackoverflow.com/questions/1449713/representing-a-2d-array-as-a-1d-array)

[二维数组与一维数组的性能](https://stackoverflow.com/questions/1242705/performance-of-2-dimensional-array-vs-1-dimensional-array)

# java - 在Java中拆分数学字符串

> ID：15586081
> 
> 赞同：0
> 
> 时间：2013-03-23T11:14:17.537
> 
> 标签：java

我有这个字符串：“23+43*435/675-23”。我该如何拆分它？我想要的最后一个结果是：

```
String 1st=23
String 2nd=435
String 3rd=675
String 4th=23 
```

我已经用过这个方法：

```
String s = "hello+pLus-minuss*multi/divide";
String[] split = s.split("\\+");
String[] split1 = s.split("\\-");
String[] split2 = s.split("\\*");
String[] split3 = s.split("\\/");
String plus = split[1];
String minus = split1[1];
String multi = split2[1];
String div = split3[1];
System.out.println(plus+"\n"+minus+"\n"+multi+"\n"+div+"\n"); 
```

但它给了我这个结果：

```
pLus-minuss*multi/divide
minuss*multi/divide
multi/divide
divide 
```

但我需要这种形式的结果

```
pLus
minuss
multi
divide 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:17:56.233

尝试这个：

```
public static void main(String[] args) {
    String s ="23+43*435/675-23";
    String[] ss = s.split("[-+*/]");
    for(String str: ss)
        System.out.println(str);

} 
```

输出：

```
23
43
435
675
23 
```

我不知道你为什么要存储在变量中然后打印。无论如何尝试下面的代码：

```
public static void main(String[] args) {
    String s = "hello+pLus-minuss*multi/divide";
    String[] ss = s.split("[-+*/]");
    String first =ss[1];
    String second =ss[2];
    String third =ss[3];
    String forth =ss[4];

    System.out.println(first+"\n"+second+"\n"+third+"\n"+forth+"\n");

    } 
```

输出：

```
pLus
minuss
multi
divide 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T11:19:56.707

试试这个：

```
 String data = "23+43*435/675-23";
    Pattern pattern = Pattern.compile("[^\\+\\*\\/\\-]+");

    Matcher matcher = pattern.matcher(data);

    List<String> list = new ArrayList<String>();
    while (matcher.find()) {
        list.add(matcher.group());
    }

    for (int index = 0; index < list.size(); index++) {
        System.out.println(index + " : " + list.get(index));
    } 
```

输出 ：

0 : 23

1 : 43

2：435

3 : 675

4 : 23

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T11:57:55.820

如果运算符的顺序很重要，请将您的代码更改为：

```
 String s = "hello+pLus-minuss*multi/divide";
    String[] split = s.split("\\+");
    String[] split1 = split[1].split("\\-");
    String[] split2 = split1[1].split("\\*");
    String[] split3 = split2[1].split("\\/");
    String plus = split1[0];
    String minus = split2[0];
    String multi = split3[0];
    String div = split3[1];
    System.out.println(plus + "\n" + minus + "\n" + multi + "\n" + div + "\n"); 
```

否则，要吐在任何运算符上，并存储到变量中，请执行以下操作：

```
public static void main(String[] args) {
    String s = "hello+pLus-minuss*multi/divide";

    String[] ss = s.split("[-+*/]");
    String plus = ss[1];
    String minus = ss[2];
    String multi = ss[3];
    String div = ss[4];
    System.out.println(plus + "\n" + minus + "\n" + multi + "\n" + div + "\n");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T11:39:27.317

我认为这只是索引的问题。您应该使用索引 0 来获得拆分结果。

```
String[] split = s.split("\\+");
String[] split1 = split .split("\\-");
String[] split2 = split1 .split("\\*");
String[] split3 = split2 .split("\\/");

String hello= split[0];//split[0]=hello,split[1]=pLus-minuss*multi/divide

String plus= split1[0];//split1[0]=plus,split1[1]=minuss*multi/divide
String minus= split2[0];//split2[0]=minuss,split2[1]=multi/divide
String multi= split3[0];//split3[0]=multi,split3[1]=divide

String div= split3[1]; 
```

# php - 使用jquery ajax php以json形式获取数据

> ID：15586083
> 
> 赞同：0
> 
> 时间：2013-03-23T11:14:18.437
> 
> 标签：php, json, jquery

嗨，我试图使用 ajax，jquery 从 php 获取二维数组，但我无法得到响应，这是我的代码

html代码

```
$.ajax({
            type: "POST",
            url: "get_data.php",
            data: "",
            dataType: "json",
            success: function (json) {
                var data = json.msg;

                initChart(data);
            }
        }); 
```

php代码

```
header('Content-Type: application/json');

$responce=array();

for($i=0;$i<10;$i++)
{
  $responce[]=array($i,$j);
}

echo json_encode(array("msg"=>$responce)); 
```

但是在 Bugzilla 中调试时我收到消息“json is empty”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:19:19.113

也许这就是你的意思？

```
for($i=0;$i<10;$i++) {
    for($j=0;$j<10;$j++) {
        $responce[]=array($i,$j);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:11:44.600

尝试这个 ：

```
$response = array();

for($i=0; $i<10; $i++) {
    $response[$i] = array();
    for($j=0; $j<10; $j++) {
        $response[$i][$j] = 10 * $i + $j;//Value is just an example. The important part is the left hand side of the assignment.
    }
} 
```

# c# - C# 泛型函数

> ID：15586085
> 
> 赞同：5
> 
> 时间：2013-03-23T11:14:29.407
> 
> 标签：c#, generics, math, unity3d

寻求有关 C# 泛型的帮助。我在 Unity3D 中工作并且正在滚动 BiLerp 函数，因为 Unity3D 没有。

```
public Vector3 BiLerp(Vector2 _uv, Vector3 _00, Vector3 _01, Vector3 _10, Vector3 _11)
{
    return _00 * (1 - _uv.x) * (1 - _uv.y) +
           _10 * _uv.x * (1 - _uv.y) +
           _01 * _uv.y * (1 - _uv.x) +
           _11 * _uv.x * _uv.y;
} 
```

但是，我想让这个函数更健壮一点。

1.  我想让它成为通用的，以便它接受任何可以乘以浮点数的类型
2.  我不确定是否应该将其设为静态。我假设因为它不使用任何成员变量，所以是的。如果存储它的类也是静态的，那么该类将仅用于统一（Matrix2x2）等省略的数学助手。
3.  C# const 在这种情况下如何工作？
4.  在 C++ 中，我将通过引用传递参数。II 正确假设 C# 已经在这样做了吗？并且 ref 关键字是其他一些黑暗魔法工具？

如果有任何其他建议，请随时提出。我现在只在 C# 中工作了 6 周，可以使用任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T11:25:27.727

1.  虽然可以通过传入一个执行乘法的委托来完成这项工作，但它会慢很多。我实际上认为您最好改为编写多个重载。

2.  是的，你应该，你也应该把它放到一个静态类中。（恕我直言！）我打算建议您将其设为[扩展方法](http://msdn.microsoft.com/en-gb/library/vstudio/bb383977.aspx)，但经过反思，它的参数太多，无法使其有用。

3.  C# const 类似于 C++ const，但普遍的共识是它们只能是私有的（或者可能是内部的）。

4.  实际上，Vector2 和 Vector3 是结构体，因此它们是按值传递的。如果要通过引用传递它们，请使用`ref`关键字：

    ```
    public Vector3 BiLerp(
        ref Vector2 _uv, ref Vector3 _00, ref Vector3 _01,
        ref Vector3 _10, ref Vector3 _11)` 
    ```

但是，这样做只有两个原因（对于结构）：

1.  因为你想改变传入的原始值。

2.  通过仅传递一个引用（即 C++ 术语中的指针）来加速它。

第一个不适用于您的代码，第二个对于如此小的结构似乎毫无意义（事实上，*所有*结构都应该很小，因此它几乎从不适用于设计良好的结构）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T16:51:11.267

> 我想让它成为通用的，以便它接受任何可以乘以浮点数的类型

不幸的是，C# 的泛型类型系统不支持这种约束。这是 C# 团队考虑的一个相当频繁请求的功能，但它需要在底层 CLR 类型系统中进行大量工作。将来有可能会实施，但如果我是你，我不会屏住呼吸等待那一天。

> 我不确定是否应该将其设为静态。我假设因为它不使用任何成员变量，所以是的。

是的，让它成为静态的。

> 如果存储它的类也是静态的，那么该类将仅用于数学助手。

是的。

> C# const 在这种情况下如何工作？

C# const 不同于 C++ const；它要简单得多。在 C# 中，const 字段或 local 只是编译时常量数字或字符串的名称，故事结束。（好吧，你也可以有一个引用类型的 const，但它必须为 null，所以这不是那么有趣。）没有你看到的“这是一个引用，但你不能调用任何改变它的方法”规则C＃。

最佳实践是首先使所有值类型不可变，因此 C++ 风格的 const 并不是真正必要的。

将字段标记为“只读”使其只能在构造函数中更改。

> 在 C++ 中，我将通过引用传递参数。我是否正确假设 C# 已经这样做了？

不，值类型是按值传递的。

> ref 关键字是其他一些黑魔法工具吗？

ref 关键字就像 C++ 引用一样：*它使一个变量成为另一个变量的别名*。您通常只会在 C# 中用于您想要*改变*调用者提供的变量的情况。正如我之前所说，C# 没有“const 引用”的 C++ 概念，但是由于 C# 中的值类型应该很小，因此可以有效地按值传递，因此您通常不需要“const 引用”的概念参考”说“我想通过参考传递它以提高性能，但实际上并没有改变变量”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T11:25:17.820

**1）我想对它进行模板化，以便它接受任何可以乘以浮点数的类型**

不确定当前 C# 中泛型的实现是否可行。您**无法**定义`T where T : float`. 编译器会告诉你`only class or interface could be specified as constraint`。

**2）我不确定是否应该将其设为静态。...存储它的类是否也应该是静态的**

我不会将类设为静态，因为其中有 1 个静态方法。我认为您定义的方法没有问题。因为它不使用成员所以使它成为静态是有意义的（看起来像一个辅助方法）。您也可以按照 Matthews 回答中的建议将其设为扩展方法。就像是：

```
public static class Vector2Ext
{
    public static Vector3 BiLerp(
        this Vector2 _uv,
        Vector3 _00,
        Vector3 _01,
        Vector3 _10,
        Vector3 _11)
    {
        // your implementation
    }
} 
```

这样，您可以将该方法`BiLerp`作为 Vector2 上的方法调用。

```
Vector2 vector2 = ...;
vector2.BiLerp(_00, _01, _10, _11); 
```

如果以这种方式设计它是有意义的，那么您可能可以在这种情况下做出最好的判断。

**3) C# const 在这种情况下如何工作？**

有点模糊，不知道你的意思。[MSDN](http://msdn.microsoft.com/nl-nl/library/deszhz3d%28v=vs.71%29.aspx)在这里有帮助吗？

**4) 在 C++ 中，我将通过引用传递参数。II 正确假设 C# 已经在这样做了吗？并且 ref 关键字是其他一些黑暗魔法工具？**

这本身就是一个话题。如果使用`ref`关键字，则将类型作为引用传递。`VectorXD`如果是不可变类型，这是有道理的。如果您需要在调用方返回 valuetype 的值，您希望通过 ref 传递它们。查看您的代码，我在您传递一些值时对其进行解释，使用它们来计算 a`Vector3D`并返回它。我不认为`ref`这里有必要。但也许我再次误解了你的问题。也许[MSDN](http://www.google.nl/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDAQFjAA&url=http://msdn.microsoft.com/en-us/library/14akc2c7.aspx&ei=DZFNUd2IO4ic0AXS4YG4Dg&usg=AFQjCNEk8ZsJg8qgyTD1UCItB_8NR7yhsg&sig2=_5wnrC0kIct2q8r86L6B-g&bvm=bv.44158598,d.d2k)有助于理解`ref`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T11:26:11.533

C# 没有模板，因为它们在 C++ 中是众所周知的。术语是`generics`，它们比 C++ 代码中的模板更受限制。对于您的要求，不可能从`float`类型继承，也不可能对数字类型施加泛型约束，`float`因为`ValueType`. C#（和一般的 .NET）中的值类型不能通过类型继承来扩展。

作为建议，您可以使用`float`或`double`直接使用。C# 对所有其他数字类型（可能除外）执行`float`自动`double`转换`decimal`。

# ios - 在 NSFetchRequest 的 propertiesToFetch 中包含一对一关系的属性

> ID：15586086
> 
> 赞同：1
> 
> 时间：2013-03-23T11:14:30.850
> 
> 标签：ios, objective-c, nsfetchrequest

问题：为简单起见，我有两个 NSManagedObject（A 和 B），其中 B 与 A 是一对一的关系。在我的 propertiesToFetch 中，使用 B 作为实体类型，我有许多 B 属性。这可行，但是我想要的是从一对一的关系中也包括 A 的属性（例如“名称”）。

建议？

编辑：

```
NSFetchRequest *fetchR = [NSFetchRequest fetchRequestWithEntityName:ClassName(B)];
fetchR.predicate = [NSPredicate predicateWithFormat:@"active = %u",1];
fetchR.resultType = NSDictionaryResultType;
fetchR.propertiesToFetch = [NSArray arrayWithObjects:
                            [self propertyDescriptionFor:@"name" inEntity:ClassName(B)],
                            [self propertyDescriptionFor:@"age" inEntity:ClassName(B)], 
```

`// Here is where I want to add something like "a.name"`

```
 nil]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T11:44:18.610

我不知道`propertyDescriptionFor:inEntity:`方法（它在哪里定义？），但你可以只提供一个字符串数组`propertiesToFetch`：

```
fetchR.propertiesToFetch = [NSArray arrayWithObjects:@"name", @"age", @"a.name", nil]; 
```

一对一的关系应该“正常工作”。

# android - 使用 Achartengine 的水平条形图

> ID：15586096
> 
> 赞同：1
> 
> 时间：2013-03-23T11:15:34.520
> 
> 标签：android, achartengine

我已经成功创建了水平条形图，但是

其中我有 20 个项目，但我想在 y 轴上显示 5 个项目，其他项目在向下滚动时显示..

有什么功能或方法可以解决这个问题。

我在这个 url 上用图像问过问题：[如何使用 achartengine 用条形图椭圆化 y 轴标签](https://stackoverflow.com/questions/15492702/how-to-ellipsize-label-of-y-axis-with-bar-chart-using-achartengine)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:14:29.627

您可以通过限制可见区域来控制项目的可见性：

```
renderer.setXAxisMin(minX);
renderer.setXAxisMax(maxX); 
```

Y 轴有类似的 API。

# java - NumberFormat.parse() 对某些货币字符串失败

> ID：15586099
> 
> 赞同：6
> 
> 时间：2013-03-23T11:15:52.913
> 
> 标签：java, android, currency, numberformatexception

我有一个简单的`EditText`，它允许用户输入一个数字，例如`45.60`（例如美元）。然后我使用以下方法格式化这个数字：

```
public String format() {
    NumberFormat formatter = NumberFormat.getCurrencyInstance(Locale.getDefault());
    return formatter.format(amount.doubleValue());
} 
```

在我的 Android 手机上，语言设置为英语（美国） - 因此`Locale.getDefault()`应该返回美国语言环境（确实如此）。

现在编辑文本已正确更新为：（`$45.60`因此格式化输入的数字有效）。

但是，如果我尝试`"$45.60"`使用以下方法解析上述字符串：

```
NumberFormat numberFormat = NumberFormat.getInstance(Locale.getDefault());
Number result = numberFormat.parse("$45.60"); 
```

它失败了：

```
java.lang.IllegalArgumentException: Failed to parse amount $45.60 using locale en_US. 
```

如果我将手机设置为英语/英国，则将其格式化`"45.60"`为`"£45.60"`正常工作（如美国），但解析`"£45.60"`失败，就像上面的美国示例一样。

但是，如果我将手机设置为德语（德国），则格式化`"45,60"`可以`"45,60€"`正常工作，并且解析`"45,60€"`也可以正常工作！

我看到这三种货币之间的唯一区别：欧元附加在金额上，而美元和英镑附加在金额前。

有谁知道，为什么相同的代码适用于欧元，但不适用于英镑和美元？我错过了什么吗？

我还创建了一个单元测试，以重现该问题：

```
public void testCreateStringBased() throws Exception {

    // For German locale
    CurrencyAmount amount = new CurrencyAmount("25,46€", Locale.GERMANY);
    assertEquals(25.46, amount.getAsDouble());

    // For French locale
    amount = new CurrencyAmount("25,46€", Locale.FRANCE);
    assertEquals(25.46, amount.getAsDouble());

    // For US locale
    amount = new CurrencyAmount("$25.46", Locale.US);
    assertEquals(25.46, amount.getAsDouble());

    // For UK locale
    amount = new CurrencyAmount("£25.46", Locale.UK);
    assertEquals(25.46, amount.getAsDouble());
} 
```

`CurrencyAmount`基本上包装了我发布的用于解析货币字符串的代码，除了它采用给定的语言环境而不是默认的语言环境。在上面的示例中，德国和法国语言环境的测试成功，但美国和英国语言环境的测试失败。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T13:48:42.697

由于迄今为止提出的答案并没有完全解决问题，我采取了一种非常业余的方法：

```
String value = "$24,76" 
value = value.replace(getCurrencySymbol(locale), StringUtils.EMPTY);

NumberFormat numberFormat = NumberFormat.getInstance(locale);
Number result = numberFormat.parse(value); 
```

所以现在我只需将字符串值从它的货币符号中剥离出来......这样我就可以处理我想要的一切，例如：45.78 或 45,78 或 $45.78 或 45,78€ ....

无论输入什么，货币符号都会被简单地剥离，最终得到纯数字。我的单元测试（参见 OP）现在成功完成。

如果有人想出更好的东西，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T12:55:59.503

尝试以下操作：

```
NumberFormat numberFormat = new DecimalFormat("¤#.00", new DecimalFormatSymbols(Locale.UK));
numberFormat.parse("£123.5678"); 
```

¤ - 货币符号，期望与 Locale 的货币符号匹配。

您可以通过以下链接查看其他模式符号[http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T11:46:54.877

尝试 NumberFormat.getCurrencyInstance().parse() 而不是 NumberFormat.getInstance().parse()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-07T21:05:49.683

您必须知道要解析的字符串的区域设置，才能拥有区域感知解析器。仅当 NumberFormat 的语言环境为 en_GB 时，GBP 字符串才会解析为数字；没有“通用”解析器之类的东西。

例如，字符串“12.000”如何解析？对于 en-us，答案是十二；对于德德，答案是一万二千。

始终使用 NumberFormat.getCurrencyInstance( java.util.Locale ) 来解析货币金额。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-29T20:17:58.803

我正在使用以下改编自[https://dzone.com/articles/currency-format-validation-and](https://dzone.com/articles/currency-format-validation-and)

```
import java.math.BigDecimal;
import org.apache.commons.validator.routines.*;

BigDecimalValidator currencyValidator = CurrencyValidator.getInstance();
BigDecimal parsedCurrency = currencyValidator.validate(currencyString);
if ( parsedCurrency == null ) {
        throw new Exception("Invalid currency format (please also ensure it is UTF-8)");
} 
```

如果您需要确保每个用户使用正确的区域 设置，请[查看登录时更改区域设置](https://stackoverflow.com/questions/8531649/change-locale-on-login)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-23T22:56:05.097

对不起，但提供的任何答案都具有误导性。这就是我所说的 Java 中的 BUG。像这样的例子更好地解释了它。如果我想在`EUR`using中打印一个值，`Locale.US`然后再次解析它，除非我在`DecimalFormat`货币 ( `EUR`) 上指定，否则它会失败。使用美元，它的工作原理：

```
 DecimalFormat df = new DecimalFormat("¤#,##0.00", new DecimalFormatSymbols(Locale.US));
        df.setCurrency(Currency.getInstance("EUR"));
        BigDecimal value = new BigDecimal("1.23");
        String text = df.format(value);
        System.out.println(text);

        DecimalFormat df2 = new DecimalFormat("¤#,##0.00", new DecimalFormatSymbols(Locale.US));
        df2.setParseBigDecimal(true);
        BigDecimal parsed = (BigDecimal) df2.parse(text);

        BigDecimalAsserts.assertBigDecimalEquals("parsed value is the same of the original", value, parsed); 
```

# javascript - $scope 不调用内部函数

> ID：15586100
> 
> 赞同：1
> 
> 时间：2013-03-23T11:15:54.677
> 
> 标签：javascript, angularjs, javascriptmvc

现在我们在调用 DataService (Parse) 的控制器中面临一个问题，问题是这段代码不起作用：

```
 function MainCtrl($scope, DataService, $location)
{

    $scope.actionList = function() {

            // Call the service and fetch the list of signatures that match the given action ID
            DataService.getActions(function (results) {
                $scope.$apply(function () {
                    // Apply the results to the signatureList model so it will refresh the table in the view
                    $scope.actionList = results;
                });
            });

    };
} 
```

我在 DataService 行中放置了一个断点，但它没有被命中，但是如果我以这种方式实现 Ctrl ，它确实会被调用并且它可以工作！！：

```
function MainCtrl($scope, DataService, $location)
{            

                // Call the service and fetch the list of signatures that match the given action ID
                DataService.getActions(function (results) {
                    $scope.$apply(function () {
                        // Apply the results to the signatureList model so it will refresh the table in the view
                        $scope.actionList = results;
                    });
                });          

    } 
```

知道为什么会这样吗？

除此之外，一旦工作（使用第二个实现）我想显示活动的属性，如果我尝试像这样获取属性它不起作用：

```
<div id="wrapper"><div id="scroller">
<div ng-controller="MainCtrl">
    <ul id="thelist">
        <li ng-repeat="action in actionList">{{action.get('Action')}}</li>  
    </ul>
</div> 
</div></div> 
```

但是，如果我尝试获取像 {{action}} 这样的整个对象，我实际上可以看到所有条目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T11:27:42.317

将控制器更改为

```
function MainCtrl($scope, DataService, $location) {

    $scope.getActionList = function() {
        DataService.getActions(function(results) {
                    $scope.$apply(function() {
                                $scope.actionList = results;
                            });
                });

    };

    $scope.getActionList();
} 
```

然后，如果您想重新加载`actionList`呼叫`getActionList()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:27:19.673

> 知道为什么会这样吗？

在您的第一个示例中，您只是定义了一个名为`actionList`object的函数`$scope`。定义一个函数不会执行它（参见@Arun 的答案）。

要在视图中显示数据，您可以使用普通的 JavaScript 点表示法。如果一个`action`对象看起来像这样：

```
{ prop1: 'property 1', prop2: [1, 2], prop3: { name: 'Javito'} } 
```

您可以按如下方式编写视图/HTML：

```
<ul id="thelist">
   <li ng-repeat="action in actionList">
      prop1: {{action.prop1}}<br>
      prop2: {{action.prop2[0]}} {{ action.prop2[1] }}<br>  <!-- or use another ng-repeat here -->
      prop3.name: {{action.prop3.name}}
   </li>  
</ul> 
```

# sql-server-2008 - 从 ASP 网页更新 2 个表并创建历史记录

> ID：15586101
> 
> 赞同：0
> 
> 时间：2013-03-23T11:15:59.853
> 
> 标签：sql-server-2008, asp-classic

我在该页面中有一个用于查询详细信息的网页，最终用户会更新他们关于查询的状态。

![网页](../Images/de17fb32b313da46804f3666e1b89753.png)

这是用户可以更新其状态的页面![状态更新](../Images/1452fc329b9e5b8814b4c82a40d54832.png)

我的`sql`查询是

```
update enquiries_dtls
  set dctname = '"& name_upd &"',
      region = '"& city_upd &"',
      enquiry = '"& enquiry_upd &"',
      stsupdate = '"& stus_upd &"',
      dtupdate = '"& dt_upd &"',
      closingdate = '"& clsngdt_upd &"',
      clsedby = '"& clsdby_upd &"',
      revenue = '"& estrev_upd &"',
      apprstatus = '"& apprsts_upd &"',
      [clsed] = '"& clsd_upd &"'
 where sno = '"& Request("sno_edt") &"' 
```

但是如果我使用 update 语句，它会覆盖以前的状态更新。 ![需要](../Images/83caaac36c058b53b42a06ae9dfa01a7.png)

我需要获取特定查询的历史记录..

感谢您的意见和帮助。

# android - android以编程方式添加矩形

> ID：15586110
> 
> 赞同：0
> 
> 时间：2013-03-23T11:17:07.637
> 
> 标签：android

您好，我在画布中添加了矩形，现在我想在该矩形中添加文本视图或其他视图。也建议我一些教程。提前致谢

```
public class DrawView extends View {

    public DrawView(Context context) {
        super(context);
    }
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        Rect rect = new Rect();
        rect.set(20 ,10 ,canvas.getWidth()/2, canvas.getHeight()/2);
        Paint paint = new Paint();
        paint.setColor(Color.GREEN);
        canvas.drawRect(rect, paint);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:24:00.873

在这里添加任何类型的视图都是不可能的，因为您只是在画布上绘图。但`Canvas.drawText(...)`可能正是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:59:37.343

您可以在画布上绘制文本。

```
 Paint mpaint= new Paint();
        mpaint.setColor(Color.RED);//set red color for rectangle
        mpaint.setStyle(Paint.Style.FILL);//mpaint will fill the rectangle
        Paint paint2 = new Paint();
        paint2.setColor(Color.GREEN);//green color for text
        paint2.setTextSize(30f);//set text size. you can change the stroke width also

@Override
protected void onDraw(Canvas canvas)
     {
   canvas.drawRect(30, 30, 600, 600, mpaint);
   canvas.drawText("hello", 150, 150, paint2);//change x and y according to your needs
     } 
```

在三星 Galaxy s3 上生成的快照 ![在此处输入图像描述](../Images/42d680e22f2e8b766d47a4647fbb5f6d.png)

# compression - CDH4.2.0 无法设置 HBase 压缩

> ID：15586111
> 
> 赞同：1
> 
> 时间：2013-03-23T11:17:11.220
> 
> 标签：compression, hbase, cloudera

由于我们已将 CDH4.1.2 的安装更新为 CDH4.2.0，我们不再能够创建启用压缩的新表。我们之前成功地使用了 SNAPPY Compression。现在，当我们尝试执行如下创建语句时：

```
create 'tableWithCompression', {NAME => 't1', COMPRESSION => 'SNAPPY'} 
```

发生错误：

```
ERROR: Compression SNAPPY is not supported. Use one of LZ4 SNAPPY LZO GZ NONE 
```

我们意识到也没有找到其他压缩算法：例如，与“GZ”相同的问题。

```
ERROR: Compression GZ is not supported. Use one of LZ4 SNAPPY LZO GZ NONE 
```

我们在 hbase-env.sh 中添加了“export HBASE_LIBRARY_PATH=/usr/lib/hadoop/lib/native/”。

不幸的是，这并没有解决我们的问题。

我们还能尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:39:48.973

我也一样。这似乎是 admin.rb 脚本中的一个错误。

有问题的代码是这样的：

```
 if arg.include?(org.apache.hadoop.hbase.HColumnDescriptor::COMPRESSION)
        compression = arg[org.apache.hadoop.hbase.HColumnDescriptor::COMPRESSION].upcase
        unless org.apache.hadoop.hbase.io.hfile.Compression::Algorithm.constants.include?(compression)      
          raise(ArgumentError, "Compression #{compression} is not supported. Use one of " + org.apache.hadoop.hbase.io.hfile.Compression::Algorithm.constants.join(" ")) 
        else 
          family.setCompressionType(org.apache.hadoop.hbase.io.hfile.Compression::Algorithm.valueOf(compression))
        end
      end 
```

稍后一些“p”语句，我知道。压缩是`"SNAPPY"`，并且`org.apache.hadoop.hbase.io.hfile.Compression::Algorithm.constants`是`[:LZ4, :SNAPPY, :LZO, :GZ, :NONE]`。

看到区别了吗？我们正在比较字符串和符号。快速解决方法是将设置压缩的行更改为以下内容：

```
 compression = arg[org.apache.hadoop.hbase.HColumnDescriptor::COMPRESSION].upcase.to_sym 
```

我想这与存在大量不同的 jruby 变体和配置有关。我想在某些情况下，常量是字符串，在其他情况下是符号。更永久的解决方法是`to_sym`在比较的两端使用。

# c# - C# WinForms - 以编程方式创建的表单的自定义边框仅显示左边框和上边框

> ID：15586112
> 
> 赞同：0
> 
> 时间：2013-03-23T11:17:28.983
> 
> 标签：c#, winforms, dynamic, border, customization

尝试学习编程并进行了一些实验。遇到了一个我无法找到解决方案的小问题。我有一个以编程方式创建的按钮和一个以编程方式创建新表单的单击事件。该表单有一些创建的标签，以及一个自定义边框。主窗体上使用相同的自定义边框，即使在自动调整大小和动态创建的内容会改变它的大小的情况下也能正常工作。但是在这个以编程方式创建的表单上，边框只显示在左侧和顶部，我无法找到答案或通过实验解决它。

不知道多少代码就足够了，但我做了一个简化的程序来显示问题。它是从我的程序代码中简化而来的，该代码使用数百个以编程方式创建的按钮和几个信息数组，这些信息填充了 myForm 表单上使用的标签，所以有些事情可能看起来很奇怪，因为我删除了数组和按钮创建过程。

```
using System;
using System.Drawing;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace StackoverflowSample
{
public partial class Form1 : Form
{
    private Button myButton;

    /// <summary>
    /// Borrowed code snippet for custom border: http://stackoverflow.com/q/5092216\. Would have preferred no to do dllimport yet, but will let it pass this time.
    /// </summary>
    /// <param name="nLeftRect"></param>
    /// <param name="nTopRect"></param>
    /// <param name="nRightRect"></param>
    /// <param name="nBottomRect"></param>
    /// <param name="nWidthEllipse"></param>
    /// <param name="nHeightEllipse"></param>
    /// <returns></returns>
    [DllImport("Gdi32.dll", EntryPoint = "CreateRoundRectRgn")]
    private static extern IntPtr CreateRoundRectRgn
    (
        int nLeftRect, // x-coordinate of upper-left corner
        int nTopRect, // y-coordinate of upper-left corner
        int nRightRect, // x-coordinate of lower-right corner
        int nBottomRect, // y-coordinate of lower-right corner
        int nWidthEllipse, // height of ellipse
        int nHeightEllipse // width of ellipse
     );

    public Form1()
    {
        InitializeComponent();

        this.BackColor = Color.White;
        this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;

        Region = System.Drawing.Region.FromHrgn(CreateRoundRectRgn(0, 0, 0, 0, 0, 0)); // Since our form is dynamically created and/or filled and auto sized, set starting values here to 0.
        Region.MakeInfinite(); // This one was my own, to solve size problems with my dynamically created forms auto size, further reading required for other ways to do it.
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        Font font = new System.Drawing.Font("Meiryo UI", 16.0f);

        myButton = new Button();
        myButton.Name = "tstButton";
        myButton.Size = new Size(50, 50);
        myButton.Location = new Point(10, 10);
        myButton.Font = font;
        myButton.Text = "Test Button";
        myButton.Click += (sender2, e2) => { ButtonClick(sender, e); };

        this.Controls.Add(myButton);
    }

    private void ButtonClick(object sender, EventArgs e)
    {
        Font font = new System.Drawing.Font("Meiryo UI", 16.0f);

        Button myButton = (sender as Button);

        Form myForm = new Form();
        Label row1Label = new Label();
        Label row2Label = new Label();
        Label row3Label = new Label();
        Label row4Label = new Label();
        Label row5Label = new Label();

        row2Label.AutoSize = true;
        row2Label.Text = "Row 1: ";
        row2Label.Font = font;
        row2Label.Location = new Point(5, 5);

        row1Label.AutoSize = true;
        row1Label.Text = "Row 2: ";
        row1Label.Font = font;
        row1Label.Location = new Point(5, 35);

        row3Label.AutoSize = true;
        row3Label.Text = "Row 3: ";
        row3Label.Font = font;
        row3Label.Location = new Point(5, 65);

        row4Label.AutoSize = true;
        row4Label.Text = "Row 4: ";
        row4Label.Font = font;
        row4Label.Location = new Point(5, 95);

        row5Label.AutoSize = true;
        row5Label.Text = "Row 5: ";
        row5Label.Font = font;
        row5Label.Location = new Point(5, 125);

        myForm.AutoSizeMode = System.Windows.Forms.AutoSizeMode.GrowAndShrink;
        myForm.AutoSize = true;
        myForm.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;

        myForm.Controls.Add(row1Label);
        myForm.Controls.Add(row2Label);
        myForm.Controls.Add(row3Label);
        myForm.Controls.Add(row4Label);
        myForm.Controls.Add(row5Label);

        myForm.Font = font;
        myForm.BackColor = Color.White;
        myForm.Padding = new System.Windows.Forms.Padding(10, 10, 10, 10);
        myForm.Show();
        myForm.Paint += (sender4, e4) => { Form1_Paint(sender4, e4); }; // Hijacking the borrowed code for custom borders again for the info boxes.
        myForm.Location = new Point(Cursor.Position.X + 25, Cursor.Position.Y - 100); // Create info box a little to the right and up from the cursors position.
        myForm.LostFocus += (sender3, e3) => { CloseForm(sender3, e3, myForm); }; // If the info box loses focus, for example by clicking another button, close that box (form)
        myForm.MouseEnter += (sender3, e3) => { CloseForm(sender3, e3, myForm); }; // Also, if the mouse enters the box, also close, so we can show the buttons under it.
    }

    /// <summary>
    /// Event for closing my "custom" info boxes. Runs at LostFocus or MouseEnter events. So, clicking another button or entering the info box will close it.
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    /// <param name="myForm">Gets the relevant form that the event will run on. Solved my problem of targeting dynamically created forms from outside its scope.</param>
    private void CloseForm(object sender, EventArgs e, Form myForm)
    {
        myForm.Close();
    }

    /// <summary>
    /// Paint event. Holds some borrowed code for getting custom border. Works so far, but further reading required.
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private void Form1_Paint(object sender, PaintEventArgs e)
    {
        // Borrowed code snippet for custom border: http://stackoverflow.com/q/5092216
        ControlPaint.DrawBorder(e.Graphics, this.ClientRectangle,
            Color.LightBlue, 5, ButtonBorderStyle.Solid,
            Color.LightBlue, 5, ButtonBorderStyle.Solid,
            Color.LightBlue, 5, ButtonBorderStyle.Solid,
            Color.LightBlue, 5, ButtonBorderStyle.Solid);
    }
}
} 
```

我是编程的初学者，所以要宽容一些，展示正确的方法，而不是谴责任何糟糕的编码。

亲切的问候，

马蒂亚斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T11:29:17.777

问题是您对两种表单使用相同的事件处理程序。如果您想继续这种方式，您应该`ClientRectangle`根据调用 Pain 事件处理程序的表单更改大小（现在您总是使用`ClientSize`主表单的）。`Form1_Paint`将事件处理程序的代码更改为：

```
private void Form1_Paint(object sender, PaintEventArgs e)
{
        Form frm = (Form)sender;
        ControlPaint.DrawBorder(e.Graphics, frm.ClientRectangle,
        Color.LightBlue, 5, ButtonBorderStyle.Solid,
        Color.LightBlue, 5, ButtonBorderStyle.Solid,
        Color.LightBlue, 5, ButtonBorderStyle.Solid,
        Color.LightBlue, 5, ButtonBorderStyle.Solid);
} 
```

在您之前的代码中，您`ClientRectangle`在子表单重绘的情况下传递了主表单。更改代码后，该方法将获得调用它的表单`DrawBorder`的正确性。`ClientRectangle`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-17T04:50:07.203

davidovic 的解决方案会有一个副作用，当左/右/上/下有控件停靠时，您无法在该区域进行绘画，因为您使用的是被控件覆盖的“ClientRectangle”。

重绘边框有两种正常的解决方案：

1.  在表格下放另一个表格，但会有表格处理问题，可能导致内存不足

2.  捕获非客户区窗口消息，重新绘制边框。但它非常棘手，可能会导致很多问题，例如，当窗体最小化时，当窗体调整大小时，某些窗体区域被隐藏，你应该处理这个事件。

如果你想使用方法2，我建议你参考Lizard.dll，它仍然有bug，但比其他类型的库稳定得多。

# python - 如何根据元素名称的一部分对一维列表进行排序？

> ID：15586116
> 
> 赞同：2
> 
> 时间：2013-03-23T11:17:34.640
> 
> 标签：python, group-by

我有一个文件夹名称列表作为一维数组：即：

```
folderList=['A1_001', 'A1_002', 'A1_003', 'A1_004', 
            'A2_001', 'A2_002', 'A2_003', 'A2_004',
            'A3_001', 'A3_002', 'A3_003', 'A3_004'] 
```

并希望按前两个字符对列表进行分组，如“A1”、“A2”和“A3”。我认为这应该通过 groupby 完成，但我的代码不起作用

```
sectionName=[] #to get the first two characters of each element into a new list

for file in folderList:
    sectionName.append(file.split('_')[0])

for key, group in groupby(folderList,sectionName): 
    print key
    for record in group:
        print record 
```

我得到了一个错误：

```
for key, group in groupby(folderList,sectionName):
TypeError: 'list' object is not callable 
```

我想要得到的是这样的结果：

```
A1
['A1_001', 'A1_002', 'A1_003', 'A1_004']

A2
['A2_001', 'A2_002', 'A2_003', 'A2_004']

A3
['A3_001', 'A3_002', 'A3_003', 'A3_004'] 
```

我认为该`groupby`功能需要第二个输入才能成为 keyfunction，但到目前为止未能实现`sectionName`into keyfunction。如果您能提供帮助，请提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:27:41.257

```
In [40]: folderList=['A1_001', 'A1_002', 'A1_003', 'A1_004','A2_001', 'A2_002', 'A2_003', 'A2_004','A3_001', 'A3_002', 'A3_003', 'A3_004','B1_001','B1_002','B1_003','B2_001','B2_002','B2_003']

In [41]: for k, v in groupby(folderList, lambda x:x[:2]):
    ...:     print k, [x for x in v]
    ...:     
A1 ['A1_001', 'A1_002', 'A1_003', 'A1_004']
A2 ['A2_001', 'A2_002', 'A2_003', 'A2_004']
A3 ['A3_001', 'A3_002', 'A3_003', 'A3_004']
B1 ['B1_001', 'B1_002', 'B1_003']
B2 ['B2_001', 'B2_002', 'B2_003'] 
```

或以简单的方式：

```
In [42]: result={}

In [43]: for v in folderList:
    ...:     result.setdefault(v[:2],[]).append(v)
    ...:     

In [44]: result
Out[44]: 
{'A1': ['A1_001', 'A1_002', 'A1_003', 'A1_004'],
 'A2': ['A2_001', 'A2_002', 'A2_003', 'A2_004'],
 'A3': ['A3_001', 'A3_002', 'A3_003', 'A3_004'],
 'B1': ['B1_001', 'B1_002', 'B1_003'],
 'B2': ['B2_001', 'B2_002', 'B2_003']} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:28:08.880

例如：

```
grouped = {prefix: list(folders) for 
    prefix, folders in itertools.groupby(folderList, lambda x: x[:2])} 
```

不需要`folderList`排序的替代方法：

```
from collections import defaultdict
grouped = defaultdict(list)
for folder in folderList:
    grouped[folder[:2]].append(folder) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T11:40:39.213

一个简单的循环和一个`defaultdict`会做：

```
from collections import defaultdict

folderList=['A1_001', 'A1_002', 'A1_003', 'A1_004', 
            'A2_001', 'A2_002', 'A2_003', 'A2_004',
            'A3_001', 'A3_002', 'A3_003', 'A3_004']

sections = defaultdict(lambda: [])
for folder in folderList:
    sections[folder[:2]].append(folder)
print sections.values() 
```

印刷：

```
[['A1_001', 'A1_002', 'A1_003', 'A1_004'], ['A3_001', 'A3_002', 'A3_003', 'A3_004'], ['A2_001', 'A2_002', 'A2_003', 'A2_004']] 
```

的缺点`groupby`是必须对输入进行排序，并输出迭代器。在您的情况下，听起来您想要列表，因此您需要采取额外的步骤来确定`list`它们。上面的循环是实现您想要的简单方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T11:45:13.207

```
folderList.sort()
def sectionName(sec):
    return sec.split('_', 1)[0]
for key, lst in groupby(folderList, sectionName):
     print key
     for record in lst:
         print record 
```

# java - 如何使jtable中的一行不可选择？

> ID：15586118
> 
> 赞同：1
> 
> 时间：2013-03-23T11:17:41.927
> 
> 标签：java, swing, jtable

我是第一次使用 jtable。如何在执行操作后无法再次选择 jtable 中的特定行。我尝试`setRowSelectionAllowed(boolean)`了方法，但它适用于所有行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:34:30.237

将表选择模型设置为不允许选择禁止行的列表选择模型：

```
class RestrictedSelector extends DefaultListSelectionModel {

  HashSet<Integer> forbiddenRows = new HashSet<Integer>();

  @Override
  public void addSelectionInterval(int index0, int index1) {
    for (int row = index0; row <= index1; row++) {
       if (forbiddenRows.contains(row)) {
         // You can also have more complex code to select still
         // valid rows here.
         return;
       }
    }
  }

 // Implement these in the same spirit:

 public void insertIndexInterval(int index0, int index1) 
 ...
 public void setSelectionInterval(int index0, int index1) 
 ...
 public void setLeadSelectionIndex(int leadIndex)      
 ...

 // and others, see below.
} 
```

[在此处](http://docs.oracle.com/javase/6/docs/api/javax/swing/DefaultListSelectionModel.html)检查所有必须重写的方法。

现在：

```
RestrictedSelector selector = new RestrictedSelector();

selector.forbiddenRows.add(NOT_THIS_ROW_1);
selector.forbiddenRows.add(NOT_THIS_ROW_2);

myTable.setSelectionModel(selector); 
```

如果您的表格行是可排序的，您可能还需要使用`convertRowIndexToModel`并且`convertRowIndexToView`可能是模型中的行号，而不是表格中的行号，必须禁止选择。

# c# - 循环遍历对象并获取属性

> ID：15586123
> 
> 赞同：10
> 
> 时间：2013-03-23T11:18:12.423
> 
> 标签：c#, object

我有一个返回操作系统属性列表的方法。我想遍历属性并对每个属性进行一些处理。所有属性都是字符串

我如何循环遍历对象

**C＃**

```
// test1 and test2 so you can see a simple example of the properties - although these are not part of the question
String test1 = OS_Result.OSResultStruct.OSBuild;
String test2 = OS_Result.OSResultStruct.OSMajor;

// here is what i would like to be able to do
foreach (string s in OS_Result.OSResultStruct)
{
    // get the string and do some work....
    string test = s;
    //......

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-23T11:23:13.827

你可以用*反射*来做到这一点：

```
// Obtain a list of properties of string type
var stringProps = OS_Result
    .OSResultStruct
    .GetType()
    .GetProperties()
    .Where(p => p.PropertyType == typeof(string));
foreach (var prop in stringProps) {
    // Use the PropertyInfo object to extract the corresponding value
    // from the OS_Result.OSResultStruct object
    string val = (string)prop.GetValue(OS_Result.OSResultStruct);
    ...
} 
```

[由[Matthew Watson 编辑]](https://stackoverflow.com/users/106159/matthew-watson) 我冒昧地根据上面的代码添加了进一步的代码示例。

您可以通过编写一个返回`IEnumerable<string>`任何对象类型的方法来概括解决方案：

```
public static IEnumerable<KeyValuePair<string,string>> StringProperties(object obj)
{
    return from p in obj.GetType().GetProperties()
            where p.PropertyType == typeof(string)
            select new KeyValuePair<string,string>(p.Name, (string)p.GetValue(obj));
} 
```

您可以使用泛型进一步概括它：

```
public static IEnumerable<KeyValuePair<string,T>> PropertiesOfType<T>(object obj)
{
    return from p in obj.GetType().GetProperties()
            where p.PropertyType == typeof(T)
            select new KeyValuePair<string,T>(p.Name, (T)p.GetValue(obj));
} 
```

使用第二种形式，遍历对象的所有字符串属性，您可以执行以下操作：

```
foreach (var property in PropertiesOfType<string>(myObject)) {
    var name = property.Key;
    var val = property.Value;
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T11:21:34.590

您可以使用反射循环`GetProperties`结果：

```
OS_Result.OSResultStruct.GetType().GetProperties() 
```

# php - PHP会话不更新

> ID：15586134
> 
> 赞同：0
> 
> 时间：2013-03-23T11:19:04.420
> 
> 标签：php, mysql, sessionid

我的网络应用程序有一个注销脚本，如下所示：

```
<?php
session_start();
require_once("config.php");
$logout_connect = mysql_connect($db_host, $db_user, $db_pass);
    if (!$logout_connect){
        die('Impossibile connettersi: ' . mysql_error());
    }else{
        mysql_select_db($db_name, $logout_connect);
        mysql_query("DELETE FROM valutazioni_recenti WHERE idutente = '".$_SESSION['userid']."' ");
        if(mysql_query("DELETE FROM sessions WHERE ssnid = '".$_SESSION['ssnid']."' AND userid = '".$_SESSION['userid']."'")){
            $_SESSION = array();
            $session_id = session_id();
            session_destroy();
            mysql_close($logout_connect);
            header("location: login.php?logout");
            exit();
        }

    }

?> 
```

它使我可以正确注销用户，但是，当我在登录时将会话数据保存在数据库中并在注销时将其删除时，我可以看到，如果我在注销并再次登录时使用“096c02aefbb34jd175bfa89d4ec1235”之类的会话 ID 登录，它会给我与该特定用户相同的 sessionid。正常吗？有没有办法改变它？我只需要将它（或 m5d ）与登录时间混合吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:25:25.440

这是完全正常的，不用担心。其他一些人在 StackOverflow 中问过同样的事情。

这是由于 cookie 存储在您的浏览器中，因此要“修复它”，您必须删除 cookie 或使用 PHP 重新生成 ID。

您在另一篇文章中有更好的解释：

[为什么php每次在测试环境（WAMP）中生成相同的会话ID？](https://stackoverflow.com/questions/6076214/why-is-php-generating-the-same-session-ids-everytime-in-test-environment-wamp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T11:36:05.357

您在注销代码中遗漏了一些内容，即存储在用户浏览器中的 cookie 值。PHP 函数 session_destroy(); 不会删除用户 cookie，您必须通过将到期时间设置为回溯日期或时间来手动取消设置它们。

```
setcookie ("TestCookie", "", time() - 3600);  //will set expiry time one hour back 
```

因此，如果您不取消设置用户浏览器的 cookie，则每次进行新登录时都会使用相同的会话 ID。

# shell - Bash/Shell 脚本

> ID：15586139
> 
> 赞同：0
> 
> 时间：2013-03-23T11:19:41.607
> 
> 标签：shell

命令`cp $1/. $2`有什么作用？我知道 cp 用于从源（存储在变量中`$1`）复制到目标（存储在变量中`$2`）。我只是对`/.`使用的变量和变量感到困惑。有人可以帮我理解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:26:58.063

命令：

```
$ cp -R $1/. $2 
```

将 directory 指向的内容复制`$1`到 directory `$2`。

如果没有开关，此命令在文件或目录`-R`时都会失败。`$1`

一般来说，`.`指向当前目录。您可以通过比较以下所示的 inode 来看到这一点`ls`：

```
$ mkdir test
$ ls -ali
9525121 drwxr-xr-x   3 IU    wheel  102 23 mar 12:31 .
 771046 drwxrwxrwt  21 root  wheel  714 23 mar 12:30 ..
9525312 drwxr-xr-x   2 IU    wheel   68 23 mar 12:31 test

$ cd test
$ ls -ali
9525312 drwxr-xr-x  2 IU  wheel   68 23 mar 12:31 .
9525121 drwxr-xr-x  3 IU  wheel  102 23 mar 12:31 .. 
```

请注意，从父目录查看时，inode`9525312`指向，从目录内部查看时，inode 指向。`test``.``test`

# python - 单选按钮不运行定义

> ID：15586140
> 
> 赞同：0
> 
> 时间：2013-03-23T11:19:53.657
> 
> 标签：python, user-interface, radio-button, tkinter

我正在为我的程序使用 GUI。代码如下所示：

```
lijst=[]
def setValueTrue():
    del lijst[0:len(lijst)]
    e2="True"
    lijst.append(e2)
    print lijst[0]

def setValueFalse():
    del lijst[0:len(lijst)]
    e2="False"
    lijst.append(e2)
    print lijst[0]

lijst1=[]
def setValueTrue1():
    del lijst1[0:len(lijst1)]
    e2="True"
    lijst1.append(e2)

def setValueFalse1():
    del lijst1[0:len(lijst1)]
    e2="False"
    lijst1.append(e2)

root = Tk()
var = IntVar()
R1 = Radiobutton(root, text="Option 1", variable=var, value=1,
                  command=setValueTrue())
R1.pack(anchor = W)
R2 = Radiobutton(root, text="Option 2", variable=var, value=2,
                  command=setValueFalse())
R2.pack(anchor = W)
R3 = Radiobutton(root, text="Option 3", variable=var, value=3,
                  command=setValueTrue1())
R3.pack(anchor = W)

R4 = Radiobutton(root, text="Option 4", variable=var, value=4,
                  command=setValueFalse1())
R4.pack(anchor = W)

b=Button(root, text='Quit', command=root.quit)
b.pack()
b=Button(root, text='Oke', command=lambda:tekenGraaf("OutputB1.txt",25,0.8,dimensies=3,kleur=str(lijst[0]),groepen=str(lijst1[0])))
b.pack()
mainloop() 
```

我有 4 个单选按钮。这些使用定义创建值 true 或 false。我想在我的“大”定义中使用这个值。但是当我单击单选按钮时，不会执行 defs（setValueTrue 等）。只有当我运行程序时，单选按钮才会运行 def。由于这个原因，list 和 list1 的值会自动变为 false 和 false。有谁知道为什么单选按钮不运行代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:32:29.670

该`command`选项*引用*一个函数。当你这样做时，`command=setValueTrue()`你正在*调用*函数，并将函数的结果提供给`command`属性。结果是`None`，因此没有与该按钮关联的命令。

解决方法是删除括号：

```
R1 = Radiobutton(..., command=setValueTrue, ...) 
```

# java - 从 URL 显示视频缩略图

> ID：15586143
> 
> 赞同：1
> 
> 时间：2013-03-23T11:19:58.527
> 
> 标签：java, android, video-streaming

好的，这可能是一个愚蠢的，但请原谅我，因为我是 Android 新手。我正在开发一个应用程序，我想在其中使用远程 URL 显示视频缩略图，例如：

视频网址： `http://173.193.24.66/~kanz/video/flv/9.flv`

.JPG 网址： `http://173.193.24.66/~kanz/video/Images/9.jpg`

我已经获得了要在存储在 SQL 数据库中的缩略图上显示的视频 URL 和图像文件 URL。唯一的事情是我不知道如何将它们放在 ScrollView 内的列表视图中。我尝试在互联网上搜索，但他们似乎都提供了有关如何从 sd 卡路径显示视频缩略图的教程。我想使用这些 URL 中的任何一个来显示视频缩略图。我听说过 API，但我不能使用 Youtube API，因为 Youtube 在我的国家被禁止。如果有人知道任何有用的 API 或任何其他 hack，请告诉我。将不胜感激。我正在使用姜饼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-12-13T11:06:52.470

将这些行添加到您的`Module:app gradle`：

```
dependencies {
  implementation 'com.github.bumptech.glide:glide:4.9.0'
  annotationProcessor 'com.github.bumptech.glide:compiler:4.9.0'
}
// pass video url into .load() method
  Glide.with(context)
                .asBitmap()
                .load(/*Video Url*/)
                .into(/*Name of Imageview*/); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T11:26:09.153

这些教程是正确的，但你错过了一个步骤。您需要先使用 URL 将这些图像下载到设备。然后您可以将它们设置为在列表视图中查看。

在这些线程中查看如何执行此操作：

*   [如何在 Android 中通过 URL 加载 ImageView？](https://stackoverflow.com/questions/2471935/how-to-load-an-imageview-by-url-in-android)

*   [Android，在与 ImageView 的图像相同的 URL 处制作图像](https://stackoverflow.com/questions/3118691/android-make-an-image-at-a-url-equal-to-imageviews-image)

有一个流行的开源库可以自动处理图像的下载和缓存。看看这个：

[https://github.com/koush/UrlImageViewHelper](https://github.com/koush/UrlImageViewHelper)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T11:27:22.210

Listview 有自己的滚动条。所以不要将 listview 放在滚动视图中。

使用自定义列表视图显示缩略图。

从数据库中获取您的网址。

[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

[http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)。演讲是关于列表视图和性能的。

使用查看器。[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)。

如果您在列表视图中显示大量图像，请考虑使用以下库之一。

1.通用图像加载器。[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。

2.懒惰列表。[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)。

两者都使用缓存。

对于通用图像加载器

在您的适配器构造函数中

```
 File cacheDir = StorageUtils.getOwnCacheDirectory(a, "UniversalImageLoader/Cache");
  imageLoader = ImageLoader.getInstance();

   ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
          // You can pass your own memory cache implementation
         .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
         .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
         .enableLogging()
         .build();
 // Initialize ImageLoader with created configuration. Do it once.
 imageLoader.init(config);
 options = new DisplayImageOptions.Builder()
.showStubImage(R.drawable.stub_id)//dummy image
.cacheInMemory()
.cacheOnDisc()
.displayer(new RoundedBitmapDisplayer(20))
.build(); 
```

在你的 getview()

```
 ImageView image=(ImageView)vi.findViewById(R.id.imageview); 
  imageLoader.displayImage(imageurl, image,options); 
```

# sqlite - Sqllite 查询不同或特定值

> ID：15586144
> 
> 赞同：0
> 
> 时间：2013-03-23T11:20:01.923
> 
> 标签：sqlite, distinct

我有一个 android sqllite 数据库。它有一个名为chainid 的文本列。

我想从具有 DISTINCT 链 ID 的行中返回所有列 || 或其中chainid 等于：“无”。

所以例如：

| 身份证| 姓名 | 链ID |
| 1 | 小部件名称1 | 12345 |
| 2 | 小部件名称2 | 12345 |
| 3 | 小部件名称3 | “无” |
| 4 | 小部件名称4 | 49390 |
| 5 | 小部件名称5 | 49390 |

鉴于上表，我希望我的查询返回 3 行，其中包含第 2 行、第 3 行和第 5 行的所有列。-- 所以 DISTINCT on chainid OR where chainid = "none" 最大 id 被选为不同的行

我可以在一个查询中实现这一点吗？

我可以全部返回，然后在 java 中处理，但这效率低下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:39:48.053

关于什么

```
select *
from table where id in
( select max(id)
  from table
  group by chainid
  where chainid != 'none'
  union
  select id
  from table
  where chainid = 'none'
) 
```

# jquery - 进行选择时，带有下拉列表的 KendoUI Grid 逐渐变慢

> ID：15586147
> 
> 赞同：1
> 
> 时间：2013-03-23T11:20:08.660
> 
> 标签：jquery, kendo-ui, kendo-grid

我有一个 KendoUI Grid，对于某些列，您可以单击并从下拉列表菜单中选择一个值。

问题是，如果我在网格中添加一些新行并开始从下拉列表中为任何给定列选择选项，那么选择速度似乎会呈指数级下降。

例如，如果我添加四行并为第一行中的一列选择某些内容，则速度很好。如果我然后从第二行的下拉列表中选择一些东西，它会慢一点。然后，如果我为第三或第四行选择一些东西，它会非常慢。

我已经检查了检查器中的所有内容，内存使用情况很好，并且没有巨大的 ajax 请求。我在任务管理器中看到的唯一一件事是 CPU 使用率达到 100%，直到选择解冻。

这是我的下拉列表之一（它们几乎完全相同）：

```
function conditionDropdown(container, options)
{
  $('<input required data-text-field="conditionName" data-value-field="conditionId" data-bind="value:' + options.field + '"/>')
  .appendTo(container)
  .kendoDropDownList({
    autoBind: false,
    dataSource: [{
      conditionName: "Used", 
      conditionId: 2
    }, {
      conditionName: "New", 
      conditionId: 1
    }]
  })
} 
```

还有我的 KendoUI 网格：

```
$('#partsGrid').kendoGrid({
      dataSource: {
        data: partData,
        pageSize: 10,
        autoSync: true,
        schema: {
          model: {
            fields: {
              id: {
                type: "number",
                editable: false
              },
              quantity: {
                type: "number",
              },
              partNumber: {
                type: "string",
              },
              manufacturer: {
                type: "string",
              },
              partTypes: {
                defaultValue: {
                  partTypeId: 1, 
                  partType: "Unknown"
                }
              },
              jobTypes: {
                defaultValue: {
                  jobTypeId: 2, 
                  jobType: "Supply"
                }
              },
              conditions: {
                defaultValue: {
                  conditionId: 1, 
                  conditionName: "New"
                }
              },
              urgency: {
                defaultValue: {
                  urgencyId: 3, 
                  urgencyName: "Standard"
                }
              },
              leadtimes: {
                defaultValue: {
                  leadtimeId: 3, 
                  leadtimeName: "Standard"
                }
              }
            }
          }
        }
      },
      columns: [
      {
        field: 'quantity',
        width: 40,
        title: 'Qty',
      },
      {
        field: 'partNumber',
        width: 120,
        title: 'Part number',
        editor: partNumberScanner
      },
      {
        field: 'manufacturer',
        width: 120,
        title: 'Manufacturer',
      },
      {
        field: 'partTypes',
        width: 80,
        title: 'Part type',
        editor: partTypeDropdown,
        template: "#=partTypes.partType#"
      },
      {
        field: 'jobTypes',
        width: 80,
        title: 'Job type',
        editor: jobTypeDropdown,
        template: "#=jobTypes.jobType#"
      },
      {
        field: 'conditions',
        width: 70,
        title: 'Condition',
        editor: conditionDropdown,
        template: "#=conditions.conditionName#"
      },
      {
        field: 'urgency',
        width: 100,
        title: 'Urgency',
        editor: urgencyDropdown,
        template: "#=urgency.urgencyName#"
      },
      {
        field: 'leadtimes',
        width: 100,
        title: 'Lead time',
        editor: leadtimeDropdown,
        template: "#=leadtimes.leadtimeName#"
      }
      ],
      editable: {
        update: true,
        destroy: true,
        confirmation: false
      },
      toolbar: [
      {
        name: "create", 
        text: "Add part",
        className:"k-grid-insert-expense"
      }
      ]
    })
    $(".k-grid-insert-expense").bind("click", function (ev) {
      grid.addRow();
    });
    grid = $('#partsGrid').data("kendoGrid");

    grid.dataSource.bind("sync", function(e) {
      parts = grid.dataSource.data();
      partData = parts;
      grid.dataSource.success(parts);
    }); 
```

* * *

如果我`autoSync`在网格中更改为 false，`dataSource`所有速度问题都会解决，但这会破坏我想要的一些行为。

* * *

经过更多测试后，似乎是这条线导致速度变慢：

```
grid.dataSource.success(parts); 
```

有谁知道为什么？

# makefile - makefile 分配命令到

> ID：15586150
> 
> 赞同：3
> 
> 时间：2013-03-23T11:20:23.013
> 
> 标签：makefile, freebsd

我可能很愚蠢，但我无法在我的 Makefile 中进行最基本的变量赋值。

```
TEST = $(pwd);

all:
    echo $(TEST) 
```

当我在 FreeBSD（v9.1）中从 Bash（v4.2.42）运行“make all”时，我得到：

```
echo 
```

不知道我在搞砸什么。我还尝试使用 $(shell ...) 分配具有相同结果的变量。

如果我使用反勾号（`），那么基本分配有效，但它不存储结果，它存储命令。这在以下示例 Makefile 中中断：

```
SERVERIP = `ifconfig em0 | grep -E 'inet.[0-9]' | awk '{ print $$2}'`

all:
    echo $(SERVERIP)
    sed -e 's/%LISTENIP%/${SERVERIP}/g' test.conf > work/test.conf.tmp 
```

结果是：

```
[pete@pete] ~/make
echo `ifconfig em0 | grep -E 'inet.[0-9]' | awk '{ print $2}'`
10.128.28.151
sed -e 's/%LISTENIP%/`ifconfig em0 | grep -E 'inet.[0-9]' | awk '{ print $2}'`/g' test.conf > work/test.conf.tmp
sed: 1: "s/%LISTENIP%/`ifconfig  ...": unescaped newline inside substitute pattern
*** [all] Error code 1 
```

您可以看到基本的变量赋值似乎有效，但是当您将结果插入 sed 时，它会插入整个命令而不是结果，这会中断！

有任何想法吗？

皮特。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-12-30T11:02:51.807

也许答案为时已晚，但我希望我能帮助（其他人）。

如果您不想安装 GNU `make`，可以使用`!=`：

```
TEST!=pwd
all:
    echo ${TEST} 
```

将工作。解释很简单，请仔细阅读[FreeBSD 的 man make](https://www.freebsd.org/cgi/man.cgi?make(1))，尤其是***“VARIABLE ASSIGNMENTS”***部分中的***“Variable assignment modifiers” ：***

 *> 变量赋值修饰符
> 
> 可用于为变量赋值的五个运算符如下： ...
> 
> != 展开值并将其传递给 shell 执行并将结果分配给变量。结果中的任何换行符都将替换为空格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T11:52:34.913

生成文件包含：

```
TEST = $(pwd);

all:
    echo $(TEST) 
```

第一行将`make`变量中的值`pwd`加上分号分配给`make`变量`TEST`。然后，该规则呼应了这一点。我认为你忘记了这对和`$(...)`都很重要。假设您要回显命令的输出，然后使用双美元，因此将其扩展为一美元：`make``shell``pwd``make`

```
TEST = $$(pwd)

all:
    echo $(TEST) 
```

* * *

要将 shell 命令的输出转换为`make`变量，您必须使用 GNU`make`扩展。有两个扩展在使用：`:=`立即赋值，`SERVERIP`在定义点而不是在使用点求值；`$(shell ...cmd...)`用于运行 shell 命令并捕获其输出。

```
SERVERIP := $(shell ifconfig em0 | grep -E 'inet.[0-9]' | awk '{ print $$2}')

all:
    echo ${SERVERIP}
    sed -e 's/%LISTENIP%/${SERVERIP}/g' test.conf > work/test.conf.tmp 
```

这应该有效。`sed`关于正则表达式中的换行符的原始错误很奇怪；反引号应该已经从`ifconfig`管道的输出中删除了尾随换行符。但是，如果实际上返回了多行，那么你仍然会有一个换行符，证明来自`sed`.

这会产生投诉：

```
SERVERIP = `printf "%s\n" a b c`

all:
    echo $(SERVERIP)
    sed -e "s/%LISTENIP%/${SERVERIP}/g" test.conf > work/test.conf.tmp 
```

这有效：

```
SERVERIP = `printf "%s\n" c`

all:
    echo $(SERVERIP)
    sed -e "s/%LISTENIP%/${SERVERIP}/g" test.conf > work/test.conf.tmp 
```

* * *

由于您使用的是 FreeBSD，因此您很可能没有 GNU `make`。在这种情况下，您将需要：

1.  确保`ifconfig`命令管道只产生一行输出。
2.  使用`make`如下命令：

    ```
    SERVERIP = `ifconfig em0 | grep -E 'inet.[0-9]' | awk '{ print $$2}'`

    all:
        echo ${SERVERIP}
        sed -e "s/%LISTENIP%/${SERVERIP}/g" test.conf > work/test.conf.tmp 
    ```

    这应该适用于`make`满足条件 1 的任何版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T11:45:40.027

这是一个测试makefile，类似于你的。该`ifconfig`命令已放置在 $(shell ...) 命令中，结果存储在`SERVERIP`.

```
TOP:= $(shell pwd)
SERVERIP:= $(shell ifconfig en1 | grep -E 'inet.[0-9]' | awk '{ print $$2}')
LISTENIP:=240.12.4.63

all:
     echo $(SERVERIP)
     sed -e 's/$(LISTENIP)/$(SERVERIP)/g' test.conf > work/test.conf.tmp 
```*

# apache-flex - 我需要做什么才能让“EXPORT RELEASE BUILD”以 RUN 命令在 FlashBuilder 4.6 中的方式生成 android 应用程序图标？

> ID：15586151
> 
> 赞同：0
> 
> 时间：2013-03-23T11:20:45.057
> 
> 标签：apache-flex, flash-builder, flex4.5, flexbuilder

我已经在一个应用程序上工作了一段时间，今天注意到当我导出版本时，最终的应用程序图标（在 android 设备上）没有生成——它只是默认为标准的 android 图标......

但是使用 RUN 命令（调试旁边的图标）它会生成图标。当我为 iOS 导出正确的图标时，我正在测试的 iphone 上也会生成正确的图标。

当我“导出发布版本”时，我需要做什么才能生成图标？我使用 FB 4.6、Flex 4.6.0 SDK 和我的 -app.xml 文件中的应用程序图标信息：

```
<icon>
    <image32x32>views/images/32.png</image32x32>
    <image36x36>views/images/36.png</image36x36>
    <image48x48>views/images/48.png</image48x48>
    <image57x57>views/images/57.png</image57x57>
    <image72x72>views/images/72.png</image72x72>
    <image114x114>views/images/114.png</image114x114>
    <image128x128>views/images/128.png</image128x128>
</icon> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T09:53:36.773

您使用的是哪个操作系统 .... 如果 MAC 或 Window 那么您必须将所有 android 所需的图标图像放入您的项目中，然后尝试...同时您可以在这里联系我或向我发送消息 stackoverflow

```
 <icon>

    <image29x29>assets/x_29.png</image29x29>
    <image57x57>assets/icon.png</image57x57>
    <image72x72>assets/x_72.png</image72x72>
    <image76x76>assets/x_76.png</image76x76>
    <image100x100>assets/x_100.png</image100x100>
    <image114x114>assets/icon@2x.png</image114x114>
    <image120x120>assets/x_120.png</image120x120>
    <image128x128>assets/x_128.png</image128x128>
    <image144x144>assets/x_144.png</image144x144>
    <image152x152>assets/x_152.png</image152x152>
    <image512x512>assets/x_512</image512x512>

</icon> 
```

谢谢

# clojure - 无法对包含日期时间的地图进行排序

> ID：15586156
> 
> 赞同：3
> 
> 时间：2013-03-23T11:21:03.497
> 
> 标签：clojure

我正在尝试根据日期时间值对地图进行排序。下面的代码使用来自 clj-time 的函数 -

```
(def items {:a {:time (date-time 2013 12)} :b {:time (date-time 2013 11)}})

(sort-by #(-> % items :month) before? items) 
```

> IllegalArgumentException 没有实现方法: :before? 协议：#'clj-time.core/DateTimeProtocol 为类找到：nil clojure.core/-cache-protocol-fn (core_deftype.clj:527)

但是我得到了上述异常。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T11:49:41.557

你需要这样做：

```
(sort-by (fn [[k v]] (-> v :time)) before? items) 
```

如果您想要一个排序映射，那么您需要将日期时间映射作为键并将 :a :b 作为值导致排序映射对键值进行排序：

```
(->>  (into [] items)
      (map (fn [[k v]] [v k]))
      (flatten)
      (apply sorted-map-by #(before? (%1 :time) (%2 :time)))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T15:08:31.330

```
#(-> % items :month) 
```

相当于

```
#(let [res1 (items %)
       res2 (:month res1)]
   res2) 
```

`res1`总是`nil`因为你给`items`它的地图条目，所以 res2`nil`也是。并在参数`before?`上抛出此异常。`nil`

试试这个

```
(def items {:a {:time (date-time 2013 10)}
            :c {:time (date-time 2013 12)}
            :b {:time (date-time 2013 11)}})

(sort-by (comp :time second) before? items)

=> ([:a {:time #<DateTime 2013-10-01T00:00:00.000Z>}]
    [:b {:time #<DateTime 2013-11-01T00:00:00.000Z>}]
    [:c {:time #<DateTime 2013-12-01T00:00:00.000Z>}]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-14T16:38:15.613

你甚至不需要使用之前的？功能。sort-by 将负责按升序排序：

```
(def items {:a {:time (clj-time.core/date-time 2013 10)}
            :c {:time (clj-time.core/date-time 2013 11)}
            :b {:time (clj-time.core/date-time 2012 11)}})

(sort-by (comp :time second) items)

=> ([:b {:time #clj-time/date-time "2012-11-01T00:00:00.000Z"}]
    [:a {:time #clj-time/date-time "2013-10-01T00:00:00.000Z"}]
    [:c {:time #clj-time/date-time "2013-11-01T00:00:00.000Z"}]) 
```

# mysql - 对多于 1 列的 oracle 查询执行 JOIN

> ID：15586162
> 
> 赞同：2
> 
> 时间：2013-03-23T11:21:39.097
> 
> 标签：mysql, oracle, oracle10g, oracle11g, oracle9i

我有 2 个表，第一个是**MASTER_TABLE** ，其中包含字段**ID、STATUS_CODE、STATUS_SUBCODE、SUBJECT_CODE、SUBJECT_SUBCODE**，第二个表是**CODE_TABLE**，它对代码和子代码的每个组合都有唯一的描述。它具有以下字段**CODE**、**SUBCODE**和**DESCRIPTION**

如何编写查询以检索**ID、STATUS**和**SUBJECT**，例如对于 MASTER_TABLE 中 STATUS_CODE 和 STATUS_SUBCODE 的每个组合我必须在 CODE_TABLE 中获取 STATUS 值，同样我必须为 SUBJECT 做同样的事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:50:38.637

对于每种类型的查找，您必须加入*两次*`CODE_TABLE`- 一次，因此为了将行彼此区分开，您必须至少为一个行加上别名（但通常一个会对两个都起别名，如下所示）：

```
select 
  mt.ID,
  ct1.DESCRIPTION as STATUS
  ct2.DESCRIPTION as SUBJECT
from MASTER_TABLE mt
left join CODE_TABLE ct1 
    on ct1.CODE = mt.STATUS_CODE and ct1.SUBCODE = mt.STATUS_SUBCODE
left join CODE_TABLE ct2
    on ct2.CODE = mt.SUBJECT_CODE and ct2.SUBCODE = mt.SUBJECT_SUBCODE 
```

我已经在`left`缺少数据的情况下进行了连接`CODE_TABLE`，在这种情况下，此查询将为`null`相应的描述生成一个。

# c++ - 区分枚举类和常规枚举的 C++11 类型特征

> ID：15586163
> 
> 赞同：28
> 
> 时间：2013-03-23T11:21:43.210
> 
> 标签：c++, templates, c++11, variadic, variadic-functions

我正在编写类似于 boost::promote 的促销模板别名，但适用于 C++11。这样做的目的是避免在从可变函数检索参数时出现警告。例如

```
template <typename T>
std::vector<T> MakeArgVectorV(int aArgCount, va_list aArgList)
{
    std::vector<T> args;
    while (aArgCount > 0)
    {
        args.push_back(static_cast<T>(va_arg(aArgList, Promote<T>)));
        --aArgCount;
    }
    return args;
} 
```

提升模板别名提升可变参数的默认参数提升之后的类型：1) 小于 int 的整数提升为 int 2) 浮点提升为 double

我的问题是可以提升标准 C++ 枚举，但不能提升 C++11 枚举类（编译器不会生成警告）。我希望提升使用常规枚举但忽略 C++11 枚举类。

如何区分我的提升模板别名中的枚举类和枚举？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-23T11:40:37.353

这是一个可能的解决方案：

```
#include <type_traits>

template<typename E>
using is_scoped_enum = std::integral_constant<
    bool,
    std::is_enum<E>::value && !std::is_convertible<E, int>::value>; 
```

该解决方案利用了 C++11 标准第 7.2/9 段中指定的作用域和非作用域枚举之间的行为差​​异：

> 枚举数或无作用域枚举类型的对象的值通过整数提升 (4.5) 转换为整数。[...] 请注意，没有为作用域枚举提供此隐式枚举到 int 的转换。[...]

下面是如何使用它的演示：

```
enum class E1 { };
enum E2 { };
struct X { };

int main()
{
    // Will not fire
    static_assert(is_scoped_enum<E1>::value, "Ouch!");

    // Will fire
    static_assert(is_scoped_enum<E2>::value, "Ouch!");

    // Will fire
    static_assert(is_scoped_enum<X>::value, "Ouch!");
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/41HfPq$11)。

**致谢：**

感谢[Daniel Frey](https://stackoverflow.com/users/2073257/daniel-frey)指出我之前的方法只有在没有用户定义的`operator +`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-09T20:26:31.677

[从 C++23 开始， type_traits](https://en.cppreference.com/w/cpp/types/is_scoped_enum)提供了与@AndyProwl 提供的解决方案类似的解决方案

```
#include <type_traits>

enum E { a, b };
enum class Es { x, y, z };

std::is_scoped_enum_v<E>;  // False
std::is_scoped_enum_v<Es>; // True 
```

# scripting - 使用 VB 脚本发送邮件？

> ID：15586167
> 
> 赞同：1
> 
> 时间：2013-03-23T11:22:19.740
> 
> 标签：scripting, vbscript, wmi, wmi-query

我有以下代码来监视驱动器。现在我为每个文件创建或删除事件获取 Echo。

有没有办法修改 WScript.Echo 以发送邮件通知？

```
strDrive = "c"
arrFolders(0) = strDrive & "\\\\"
 strComputer = "." 
 Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\CIMV2") 
 'Loop throught the array of folders setting up the monitor for Each 
 i = 0 
 For Each strFolder In arrFolders 
     'Create the event sink 
     strCommand = "Set EventSink" & i & " = WScript.CreateObject" & "(""WbemScripting.SWbemSink"", ""SINK" & i & "_"")" 
     ExecuteGlobal strCommand 
     'Setup Notification 
     strQuery = "SELECT * FROM __InstanceOperationEvent WITHIN 1 " & "WHERE Targetinstance ISA 'CIM_DirectoryContainsFile'" & " and TargetInstance.GroupComponent = " & "'Win32_Directory.Name=""" & strFolder & """'"
     strCommand = "objWMIservice.ExecNotificationQueryAsync EventSink" & i & ", strQuery"
     ExecuteGlobal strCommand 
     'Create the OnObjectReady Sub 
     strCommand = "Sub SINK" & i & "_OnObjectReady(objObject, " &  "objAsyncContext)" & VbCrLf & vbTab & "Wscript.Echo objObject.TargetInstance.PartComponent" & VbCrLf & "End Sub"
     WScript.Echo strCommand 
     ExecuteGlobal strCommand 
     i = i + 1 
 Next 
 WScript.Echo "Waiting for events..." 

 i = 0 
 While (True) 
     Wscript.Sleep(1000) 
 Wend 
```

而不是像下面的回声：

```
strCommand = "Sub SINK" & i & "_OnObjectReady(objObject, " &  "objAsyncContext)" & VbCrLf & vbTab & "Wscript.Echo objObject.TargetInstance.PartComponent" & VbCrLf & "End Sub" 
```

我想发送这样的邮件：

```
strCommand = "Sub SINK" & i & "_OnObjectReady(objObject, " &  "objAsyncContext)" & VbCrLf & vbTab & "

Set outobj = CreateObject("Outlook.Application")
    Set mailobj = outobj.CreateItem(0)
    With mailobj
        .To = toAddress
        .Subject = Subject
        .HTMLBody = strHTML
        .Send
    End With

" & VbCrLf & "End Sub" 
```

有可能还是有其他方法可以做到这一点..？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T11:34:12.647

我不知道您使用什么服务器，但在 Windows 2003 和 2008 上，您可以使用 CDO 对象创建电子邮件。您可以使用智能主机将您的电子邮件发送到。

检查此链接： http: [//www.paulsadowski.com/wsh/cdo.htm](http://www.paulsadowski.com/wsh/cdo.htm)

您也可以选择任何免费的电子邮件组件来创建电子邮件并使用 smtp 服务器发送您的电子邮件。或者检查这一面，您可以在其中使用包含许多示例的组件：http: [//www.chilkatsoft.com/email-activex.asp](http://www.chilkatsoft.com/email-activex.asp)。

** 更新 **

此脚本会根据您的要求检查并发送电子邮件：

```
strDrive = "d:"
Dim arrFolders(0) : arrFolders(0) = strDrive & "\\\\"
strComputer = "." 
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\CIMV2") 
'Loop throught the array of folders setting up the monitor for Each 
i = 0 
For Each strFolder In arrFolders 
  'Create the event sink 
  WScript.Echo "setup for folder: " & strFolder & vbLf
  strCommand = "Set EventSink" & i & " = WScript.CreateObject" & "(""WbemScripting.SWbemSink"", ""SINK" & i & "_"")" 
  ExecuteGlobal strCommand
  'Setup Notification 
  strQuery = "SELECT * " _
          & "FROM __InstanceOperationEvent " _
          & "WITHIN 1 " _
          & "WHERE Targetinstance ISA 'CIM_DirectoryContainsFile'" _
          & "  AND TargetInstance.GroupComponent = " & "'Win32_Directory.Name=""" & strFolder & """'"
  strCommand = "objWMIservice.ExecNotificationQueryAsync EventSink" & i & ", strQuery"
  ExecuteGlobal strCommand 
  'Create the OnObjectReady Sub 
  strCommand = "Sub SINK" & i & "_OnObjectReady(objObject, " &  "objAsyncContext)" & vbLf _
            & "  Wscript.Echo objObject.TargetInstance.PartComponent" & vbLf _
            & "  SendMail(objObject.TargetInstance.PartComponent)" & vbLf _
            & "End Sub"
  'WScript.Echo strCommand 
  ExecuteGlobal strCommand 
  i = i + 1 
Next 

WScript.Echo "Waiting for events..." 
i = 0 
While (True) 
  Wscript.Sleep(1000) 
Wend

Function SendMail(vBody)

  Dim oMail : Set oMail = CreateObject("CDO.Message")

  'Name or IP of Remote SMTP Server
  oMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2 
  oMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "your.smtp.server"
  oMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25 
  oMail.Configuration.Fields.Update

  oMail.Subject = "Email Watch Info Message"
  oMail.From = "alert@yourdomain.net"
  oMail.To = "target@yourdomain.net"
  oMail.TextBody = vBody
  oMail.Send

End Function 
```

更正发送邮件功能中的设置，您就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:50:55.887

理论上，VBSendMail DLL 应该可以做你想做的事。

# php - 数组中的多个数组 - php

> ID：15586179
> 
> 赞同：0
> 
> 时间：2013-03-23T11:23:44.890
> 
> 标签：php, arrays

我不是 php 的专业人士，但这太离谱了......我已经为这件事苦苦挣扎了好几天，我真的认为它必须很简单......

我在 Joomla 中的一个组件的功能中有这个：

```
function gTickets()
{
$user    =& JFactory::getUser();
$user_id = (int) $user->get('id');

$db = JFactory::getDBO();
$db->setQuery($db->getQuery(true)
   ->select('*')
   ->from("#__usergroups"));

$groupss=$db->loadRowList();
$userGroups = $user->groups;
$return=array();

foreach ($groupss as $key=>$g){
if (array_key_exists($g[0],$userGroups)) 
        array_push($return,$g[0]); }
$groupss=$return[0];

$db1 = JFactory::getDBO();
$db1->setQuery($db1->getQuery(true)
    ->select('*')
    ->from("#__user_usergroup_map")
    ->where("group_id = '$groupss'")
    );

$groupss1=$db1->loadRowList();      
$return1=array();

foreach ($groupss1 as $keya)
{       
    $user_id = $keya[0]; // the id of users

    $where = "";
    if ($this->is_staff)
        $where .= " AND t.`staff_id`='".$user_id."'";
    else
        $where .= " AND t.`customer_id`='".$user_id."'";

    $tickets = $this->_getList(
"SELECT t.id, t.subject, t.last_reply_customer, s.name AS status_name FROM
#__rsticketspro_tickets t LEFT JOIN #__rsticketspro_statuses s ON 
(t.status_id=s.id) WHERE 1 $where ORDER BY `last_reply` DESC", 0, 
$this->params->get('tickets_limit', 3));

    print_r($tickets);      
    return $tickets;
} 
```

我认为它会将所有结果元素放入 $tickets 数组中......但它没有......当我打印数组时，我得到多个数组，而我只想要**一个**数组：

```
Array ( 
  [0] => stdClass Object ( 
    [id] => 1 
    [subject] => use1 
    [last_reply_customer] => 1 
    [status_name] => open 
  ) 
) 
Array ( 
  [0] => stdClass Object ( 
    [id] => 3 
    [subject] => use2 
    [last_reply_customer] => 1 
    [status_name] => open 
    )
  [1] => stdClass Object ( 
    [id] => 2 
    [subject] => use2 
    [last_reply_customer] => 1 
    [status_name] => open 
    ) 
) 
```

我尝试创建一个存储这些值的全局数组，但什么都没有......同样的事情发生......我认为这应该不难，但我不知道如何再寻找解决方案......

我希望数组看起来像这样：

```
Array ( 
  [0] => stdClass Object ( 
    [id] => 1 
    [subject] => use1 
    [last_reply_customer] => 1 
    [status_name] => open 
    )
  [1] => stdClass Object ( 
    [id] => 3 
    [subject] => use2 
    [last_reply_customer] => 1 
    [status_name] => open 
    )
  [2] => stdClass Object ( 
    [id] => 2 
    [subject] => use2 
    [last_reply_customer] => 1 
    [status_name] => open 
    ) 
) 
```

谢谢！

# algorithm - BST：-给定每个节点的中序后继，在O(h)中找到每个节点的父节点

> ID：15586184
> 
> 赞同：1
> 
> 时间：2013-03-23T11:24:02.670
> 
> 标签：algorithm, binary-search-tree

标题总结了它，我有一个包含节点的数组，它的顺序继承者我需要实现一个子程序来在 O(h) 中找到任何给定节点的父节点

不给左右指针

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:44:16.323

我不确定我是否正确理解了您的问题，BST 中的有序继任者仅仅意味着下一个更高的元素。现在提供此信息，可以创建多个 BST。例如 [{1,4},{2,1},{3,2},{5,3}] 这里 {a,b} 表示 a 是节点，b 是有序后继。所以树的一种可能实现是 4 IPO（读取是父级）1 和 NULL，1 IPO 2 和 NULL，2 IPO 3 和 NULL，最后是 3 IPO 5 和 NULL。由于您只需要遍历数组一次，因此可以在 O(n) 复杂度中找到此信息。

# html - 样式表在发布后不起作用

> ID：15586187
> 
> 赞同：0
> 
> 时间：2013-03-23T11:24:23.830
> 
> 标签：html, css, asp.net-mvc

```
<link type ="text/css" href="../../Content/jquery.treeview.css" rel="Stylesheet" />
<link type ="text/css" href="../../Content/screen.css" rel="Stylesheet" />

<script src="/../../js/jquery.js" type="text/javascript"></script>
<script src="/../../js/jquery.cookie.js" type="text/javascript"></script>
<script src="/../../js/jquery.treeview.js" type="text/javascript"></script> 
```

我正在使用 mvc。在我看来，我有这些 css 和 js 链接。当我在本地主机上工作时，它工作得很好。但是发布后，这些 css 或 js 文件似乎不起作用。我检查了这些文件的授权设置，没有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:33:33.830

尝试使用

```
<link type="text/css" href="@Url.Content("~/content/jquery.treeview.css")" rel="Stylesheet"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:32:24.550

而不是像这样给出路径。我认为你应该提供`full path`. 给出完整路径后，它将在任何地方工作。

```
<link type ="text/css" href="http://www.domain.com/Content/jquery.treeview.css" rel="Stylesheet" />
<link type ="text/css" href="http://www.domain.com/Content/screen.css" rel="Stylesheet" />

<script src="http://www.domain.com/js/jquery.js" type="text/javascript"></script>
<script src="http://www.domain.com/js/jquery.cookie.js" type="text/javascript"></script>
<script src="http://www.domain.com/js/jquery.treeview.js" type="text/javascript"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T11:34:33.863

您可以发布您遇到问题的网址吗？这听起来像是您的相对路径的问题。

这是您可以执行的操作：

1.  在 Chrome 中打开网站
2.  查看页面源代码
3.  在标题中，右键单击指向 CSS 文件的链接，然后选择在新窗口中打开链接

我的猜测是你会得到一个 Not Found 错误。查看不存在的 CSS 文件的 URL，
看看它是否与您*认为*的位置匹配。

最好的，

辛西娅

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T12:01:07.413

在 MVC Web 应用程序中插入内容 URL 的推荐方法是使用 Url 助手。

*例如*

CSS：

```
<link type="text/css" href="@Url.Content("~/Content/jquery.treeview.css")" rel="Stylesheet" /> 
```

脚本：

```
<script src="@Url.Content("~/js/jquery.js")" type="text/javascript"></script> 
```

# jquery - JSON选择数据

> ID：15586189
> 
> 赞同：2
> 
> 时间：2013-03-23T11:24:57.470
> 
> 标签：jquery, json

我正在尝试做一些非常简单的事情：按其键选择 JSON 数据，但不知何故它不起作用。

这是我的 jQuery 函数：

```
$.ajax({
    url: "/_add_question",
    data: {
        title: function() {
            return title.val();
        },
        text: function() {
            return text.val();
        },
        slide_id: function() {
            return aside.attr('id');
        },
    },
    success: function(data) {
        aside.append("<h3>" + data.title + "</h3>");
        aside.append("<p>" + data.text + "</p>");
    }
}); 
```

这是我的服务器返回的内容：

```
{"text": "b", "title": "a"} 
```

chrome调试器中的数据如下所示：

```
data: "{"text": "b", "title": "a"}" 
```

但它一直说 data.title/data.text 未定义。（我也试过 data['title'] 和 data[title]）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:28:08.603

很有可能，您的响应不会被解析，请使用[`$.getJSON`](http://api.jquery.com/jQuery.getJSON/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T11:30:58.520

使用 dataType: 'json'，在 ajax 调用中这可能会解决你的问题

# c# - C# 创建具有已提升权限的进程

> ID：15586190
> 
> 赞同：1
> 
> 时间：2013-03-23T11:25:03.667
> 
> 标签：c#, process

我正在创建一个需要在运行时以管理员身份运行的软件，大多数客户已经意识到它并且运行它没有问题。但是，此软件需要使用 Process.Start 运行另一个软件，将其称为 SoftwareB。运行 SoftwareB 时，softwareB 也需要提升的权限。如何在不再次向客户端询问 UAC 的情况下运行软件 B，因为软件 B 应该在后台运行，并且当用户不使用 PC 时，软件可能正在运行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T11:27:18.477

如果您从提升的进程调用 Process.Start，那么新进程也将被提升。

# sql-server - 创建一个不允许更新主键列的触发器

> ID：15586192
> 
> 赞同：3
> 
> 时间：2013-03-23T11:25:19.750
> 
> 标签：sql-server, triggers, sql-update, composite-primary-key

我有一个表，它有一个由 3 列组成的复合主键，比如说 A、B、C。我想创建一个触发器，它`UPDATE`会检查这三列是否不会更改。这是我到目前为止所拥有的，但它似乎不起作用：

```
CREATE TRIGGER TableTrigger
ON Table
AFTER INSERT, UPDATE AS
BEGIN
    IF (EXISTS (SELECT * FROM inserted) AND EXISTS (SELECT * FROM deleted))
    BEGIN
    -- Update Operation
    IF (SELECT COUNT(*) FROM inserted WHERE A IS NOT NULL OR B IS NOT NULL OR C IS NOT NULL) > 0
    BEGIN
        RAISERROR('Error, you cannot change Primary Key columns', 16, 1)
        ROLLBACK
        RETURN
    END
END 
```

我期待如果我更新表中`inserted`的某些值，我不会更新为 NULL 的列的值，但事实并非如此。我在某个地方读到了我需要查看`inserted`并`deleted`查看这些值是否更改的地方。所以我的问题是，我可以在不使用光标的情况下检查吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T11:30:49.550

你可以做

```
CREATE TRIGGER TableTrigger
ON Table
AFTER UPDATE AS
BEGIN
IF UPDATE(A) OR UPDATE(B) OR UPDATE(C) 
    BEGIN
        RAISERROR('Error, you cannot change Primary Key columns', 16, 1)
        ROLLBACK
        RETURN
    END
END 
```

或者拒绝这些列的更新权限。

无论值是否实际更改，这两种方法都会拒绝任何更新 PK 列的尝试。SQL Server 没有行级触发器，除非`IDENTITY`表中有列（保证不可变），否则没有可靠的方法可以在触发器中判断 PK 是否实际更新。

例如`INSERTED`，下`DELETED`表的`UPDATE`触发器中的和表对于这两个`UPDATE`语句都是相同的。

```
CREATE TABLE T(C INT PRIMARY KEY);

INSERT INTO T VALUES (1),(-1)

/*Both values swapped*/
UPDATE T SET C = -C

/*Both values left the same*/
UPDATE T SET C = C 
```

# c# - CameraCaptureDialog 之后的 OutOfMemoryException - 紧凑型框架

> ID：15586193
> 
> 赞同：1
> 
> 时间：2013-03-23T11:25:23.043
> 
> 标签：c#, bitmap, camera, compact-framework, out-of-memory

我正在使用 Compact Framework (Windows Mobile 6.1)为[PDA开发应用程序。](http://en.wikipedia.org/wiki/Personal_digital_assistant)我需要制作照片并显示图像。因此，要制作照片，我正在使用该`CameraCaptureDialog`课程：

```
using (var dialog = new CameraCaptureDialog())
{
    if (dialog.ShowDialog() == DialogResult.OK)
    {
    }
}

GC.Collect();
GC.WaitForPendingFinalizers(); 
```

并使用 a 显示图像`Form`：

```
public partial class FormImageViewer : Form
{
    public FormImageViewer(string filename)
    {
        if (!File.Exists(filename))
            throw new FileNotFoundException();

        InitializeComponent();

        // Here I have an OutOfMemoryException!
        image = new Bitmap(fileName);
    }

    private Bitmap image;

    private void menuItemOk_Click(object sender, EventArgs e)
    {
        if(image != null)
            image.Dispose();

        GC.Collect();
        Close();
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);

        double ratio = Math.Max((double)image.Width / Width, (double)image.Height / Height);
        int x = (Width - (int)(image.Width / ratio)) / 2;
        int y = (Height - (int)(image.Height / ratio)) / 2;

        Rectangle destRect = new Rectangle(x, y, (int)(image.Width / ratio), (int)(image.Height / ratio));
        Rectangle srcRect = new Rectangle(0, 0, image.Width, image.Height);

        e.Graphics.DrawImage(image, destRect, srcRect, GraphicsUnit.Pixel);
    }
} 
```

问题是只有在我首先使用该类`OutOfMemoryException`时才会抛出。`CameraCaptureDialog`如果我不拍照片，也不例外。

为什么？我该如何解决这个问题？

# java - Gradle 中的脚手架

> ID：15586197
> 
> 赞同：13
> 
> 时间：2013-03-23T11:25:56.753
> 
> 标签：java, gradle

每当我开始一个新的 Java+Gradle 项目时，我都会手动创建以下目录结构：

```
project-name
  |
  |--- build.gradle
  |
  |--- .gitignore
  |
  |--- src
        |--- main
        |      |---java
        |
        |--- test
               |---java 
```

由于这是一个相当标准的结构，我想 Gradle 必须有一个插件/命令/任务可以为我做这个脚手架。是否有这样的插件/命令/任务可用？如果没有，我可以为此写一个任务吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-09-26T08:44:47.740

以下是诀窍：

```
gradle init --type java-library 
```

该任务由[init 插件提供](http://www.gradle.org/docs/current/userguide/build_init_plugin.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T14:14:56.590

我使用初始化脚本实现了这种脚手架。看看[我关于它的博客文章](http://blog.proxerd.pl/article/my-gradle-init-script)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T11:55:44.023

github上有一个可用的[模板插件](https://github.com/townsfolk/gradle-templates)

# java - Java排序列表

> ID：15586200
> 
> 赞同：11
> 
> 时间：2013-03-23T11:26:14.890
> 
> 标签：java, list

我在java中有一个列表。我从 SQL 查询中获取值。

```
public void ReloadPages() throws Exception {        
    try (Connection conn = Framework.GetDatabaseManager().GetBone().getConnection()) {
        try (ResultSet set = conn.createStatement().executeQuery("SELECT * FROM habbo_shop_pages")) {
            while (set.next()) {
                int Id = set.getInt(1);

                Pages.put(Id, new CatalogPage(set));
            }
        }
    }

    System.out.println("Loaded " + Pages.size() + " Catalog Page(s).");
} 
```

然后我把它全部存储起来。在另一个函数中，我想从 parentid 中检索某些页面。

```
public LinkedList<CatalogPage> getSubPages(int parentId) {
    LinkedList<CatalogPage> pages = new LinkedList<>();

    for (CatalogPage page : this.Pages.values()) {
        if (page.getParentId() != parentId) {
            continue;
        }

        pages.add(page);
    }

    return pages;
} 
```

我如何订购清单？现在 id 4 在商店的上方，1 在底部，但我希望它按 id 排序。查询中的 ORDER BY 不起作用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-23T11:28:44.060

让您的类[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)在方法中实现并提供所述排序顺序[`compareTo`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html#compareTo%28T%29)。要进行排序，只需使用[`Collections#sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)，尽管请注意它是内联排序。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-23T11:28:46.637

您想以相反的顺序对列表进行排序，然后尝试以下操作：

```
Collections.sort(list,Collections.reverseOrder()); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-31T13:41:07.310

像[mre](https://stackoverflow.com/a/15586227/235635) writes一样，可以让列表中的元素实现[Comparable](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)接口。或者，可以使用[Collections#sort(List, Comparator)](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort(java.util.List,%20java.util.Comparator)])方法，该方法允许您对不同的键进行排序。例如，这可以用于处理列表中元素的多个字段的排序，例如实现一个比较器来对日期进行排序，并实现一个不同的比较器来对id进行排序。

有关更多信息，请查看[Comparator](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)接口的 javadoc。

## 例子

**代码：**

```
package com.stackoverflow.questions;

import java.util.Collections;
import java.util.Comparator;
import java.util.LinkedList;

public class Question15586200 {

    public static void main(String[] args) {
        // Add test data
        LinkedList<CatalogPage> catalogs = new LinkedList<CatalogPage>();
        catalogs.add(new CatalogPage("foo 4", 4));
        catalogs.add(new CatalogPage("bar 1", 1));
        catalogs.add(new CatalogPage("foobar 2", 2));
        catalogs.add(new CatalogPage("barfoo 3", 3));

        // Sort by id
        Collections.sort(catalogs, new Comparator<CatalogPage>() {

            @Override
            public int compare(CatalogPage o1, CatalogPage o2) {
                return Integer.compare(o1.getId(), o2.getId());
            }
        });

        // Print result
        for (CatalogPage page : catalogs) {
            System.err.println(page);
        }
    }

    public static class CatalogPage {
        private String name;
        private int id;

        public CatalogPage(String name, int id) {
            this.name = name;
            this.id = id;
        }

        public int getId() {
            return id;
        }

        public String getName() {
            return name;
        }

        @Override
        public String toString() {
            return "CatalogPage [name=" + name + ", id=" + id + "]";
        }
    }
} 
```

**输出：**

```
CatalogPage [name=bar 1, id=1]
CatalogPage [name=foobar 2, id=2]
CatalogPage [name=barfoo 3, id=3]
CatalogPage [name=foo 4, id=4] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-08-30T21:37:44.473

您可以使用Java 版本 8 中添加的**Lambda 表达式来执行此操作。**

```
Comparator<ProductColor> byProductColorName = (color1, color2) -> Integer.compare(
    color1.getId(), color2.getId());

myProductColorList.stream().sorted(byProductColorName)
    .forEach(e -> System.out.println(e)); 
```

我也发现[这篇文章](http://www.leveluplunch.com/java/tutorials/007-sort-arraylist-stream-of-objects-in-java8/)非常有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-23T11:29:39.640

List 维护插入顺序。如果要按 ID 排序，则使用 TreeSet 并编写一个外部 Comparator，通过实现 Comparator 接口的 compare() 方法并将其传递给 TreeSet 构造函数。值将按 ID 排序。

# c# - 内部类访问修饰符不起作用？

> ID：15586203
> 
> 赞同：1
> 
> 时间：2013-03-23T11:26:37.207
> 
> 标签：c#, class, internal

我真的不明白为什么，但内部访问修饰符似乎不起作用：S

我看过本教程： http: [//msdn.microsoft.com/en-us/library/7c5ka91b (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/7c5ka91b(v=vs.110).aspx)

但对我来说，它编译。另外，我买了一本书 Illustrated C# 2012。作者解释了内部类等……但是，它仍然没有做任何事情。

这是我的完整代码，即使在内部访问下也能正常工作。

```
//Program.cs
namespace ConsoleApplication1
{
    class Program
    {
       static void Main(string[] args)
       {
           Class1 myclass = new Class1(); //works
           myclass.display(); //works
           myclass.display2(); //works even though its not public :S
           Console.Read();
       }
    }
} 
```

-

```
//Class1.cs
namespace ConsoleApplication1
{
    internal class Class1
    {
       public void display()
       {
           Console.WriteLine("display()");
       }

       internal void display2()
       {
           Console.WriteLine("display2()");
       }
    }
} 
```

我什至可以访问函数 internal void display2() :S

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T11:29:01.887

`internal`意思是“同一程序集中的任何东西都可以访问”。

因为你的 Class1 类和 Program 类在同一个程序集中，所以 Program 类可以访问 display2()。

我认为您不小心将它们放在同一个程序集中；如果您仔细查看 Microsoft 的示例代码，您会看到它显示“Assembly1.cs”和“Assembly2.cs”

如果您使用的是 Visual Studio，使用不同程序集进行测试的最简单方法是在同一解决方案中创建一个新的类库项目。这将被视为一个单独的程序集。您必须向主项目添加对新项目的引用（通过添加引用，然后是解决方案选项卡）。

有[一个关于“什么是程序集？”的 Stack Overflow 问题。](https://stackoverflow.com/questions/2972732/what-is-net-assembly)如果您需要更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T11:29:26.937

如果两个类都在同一个程序集中，则按`internal`预期工作。

`internal`修饰符用于确保类型和成员仅可用于同一程序集中的文件。

参考：http: [//msdn.microsoft.com/en-gb/library/7c5ka91b%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-gb/library/7c5ka91b%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T11:30:51.863

从*[`MSDN`](http://msdn.microsoft.com/en-us/library/vstudio/7c5ka91b.aspx)*;

> 内部类型或成员**只能在同一程序集中的文件中访问**

因为`Program`和`Class1`在同一个程序集中，应该没有问题..

> 内部修饰符究竟做了什么？它指出*“内部的直观含义是'访问仅限于此程序'。”*
> 
> 换句话说，没有外部程序能够访问内部类型。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-23T21:12:47.797

`internal`访问修饰符意味着可以从同一程序集中的任何位置访问该成员。在您的情况下，“Program”和“Class1”类在同一个程序集中，因此，Program 可以访问 display2（它也在`internal`同一个程序集中）。

如果您不希望从 Program 类访问 display2，您可以简单地创建它`private`，因此只能从 Class1 访问它。

# ruby - 如何修复：Liquid 异常：标记“{%”未使用正则表达式正确终止：/\%\}/？

> ID：15586204
> 
> 赞同：6
> 
> 时间：2013-03-23T11:26:38.403
> 
> 标签：ruby, jekyll, liquid

我从我的 Jekyll 网站生成器中得到这个输出

> Liquid 异常：标记“{%”未使用正则表达式正确终止：/\%}/

这是怎么回事？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T11:26:38.403

事实证明，您可能在模板中犯了格式错误。例如：

```
{% if site.ALERT 
or site.ALERT_en %} 
```

会破裂，但

```
{% if site.ALERT or site.ALERT_en %} 
```

很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-16T20:46:19.573

我遇到了 Octopress 的问题，解决方案是遵循[prigazzi](https://github.com/davidfstr/rdiscount/issues/75#issuecomment-22607869)的建议：

> 在 octopress 中导致此问题的文件`category_feed.xml`位于`_includes/custom`. 你需要替换`markdownify`它`markdownize`并且它可以工作。

它确实对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-20T01:45:25.547

Jekyll 可能无法正确地告诉您实际的语法错误属于哪个包含文件。例如，我得到了同样的错误，告诉我我`_layout/base.html`在第 5 行有这个错误；但语法很好：`{% include head.html %}`. 的语法`head.html`也很好；但它包含另一个文件 ( )，其中包含我正在编写但未完成的行`header.html`的不完整 { 。`%`

基本上......您可能必须遵循面包屑路径，直到遇到错误。

# jquery - 如何使用 jquery 和 html5 检测音频文件的结尾

> ID：15586209
> 
> 赞同：7
> 
> 时间：2013-03-23T11:27:13.673
> 
> 标签：jquery, html, audio

我有这个 jquery 代码和 html 可以在英语培训网站上正常工作。

```
$(document).ready(function() {
  $("p").hover(
    function() {
      $(this).css({"color": "purple", "font-weight" : "bolder"});
    },
    function() {
      $(this).css({"color": "black", "font-weight" : ""});
    }
  ); 
  $("p").click(function (event) {
    var element = $(this);
    var elementID = event.target.id;
    var oggVar = (elementID +".ogg");   
    var audioElement = document.createElement('audio');
    audioElement.setAttribute('src', oggVar); 
    audioElement.load();
    audioElement.addEventListener("load", function() { 
        audioElement.play(); 
    }, true);
    audioElement.play();    
  }); 
});

<div>
  <p id="one"> this is the first paragraph</p>
....   
  <p id="four"> this is the fourth paragraph</p> 
....   
</div> 
```

问题是，如果在播放（或双击）音频文件时单击文本，则第二个文件（或同一文件）开始播放。所以我最终会同时播放两个文件。我需要防止这种情况。我认为“结束”事件是相关的，但是，尽管看了一些例子，我看不出如何检测文件是否正在播放并等到它完成后再允许第二个文件开始（甚至阻止它播放完全）。任何帮助将非常感激 ：）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-23T13:13:30.847

[您可以为已结束和正在播放](http://www.w3.org/TR/html5/embedded-content-0.html#mediaevents)的事件添加事件侦听器。另外，为什么要通过 javascript 创建音频标签？我只会创建一个空的隐藏音频标签：

```
<audio id='myAudio' autoplay='autoplay'></audio> 
```

你有两个选择：

*   播放/停止音频时禁用/启用按钮/链接（首选恕我直言）
*   已经播放时忽略点击

然后添加两个事件监听器：

```
var playing = false;

$('#myAudio').on('playing', function() {
   playing = true;
   // disable button/link
});
$('#myAudio').on('ended', function() {
   playing = false;
   // enable button/link
});

$("p").click(function (event) {
   if(!playing) {
      var element = $(this);
      var elementID = event.target.id;
      var oggVar = (elementID +".ogg");   
      var audioElement = $('#myAudio')[0];
      audioElement.setAttribute('src', oggVar); 
      audioElement.play();
   }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-19T15:30:31.603

```
var myAudio = new Audio('someSound.ogg'); 
myAudio.addEventListener('ended', function() {
    this.currentTime = 0;
    this.play();
}, false);
myAudio.play(); 
```

这适用于 jquery 音频。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T12:41:54.250

```
 ***var audioElement = null;***     

 $("p").click(function (event) {

    ***if (audioElement) {
        audioElement.pause();
     }***

var element = $(this);
var elementID = event.target.id;
var oggVar = (elementID +".ogg");   
audioElement = document.createElement('audio');
audioElement.setAttribute('src', oggVar); 
audioElement.load();
audioElement.addEventListener("load", function() { 
    audioElement.play(); 
}, true);
audioElement.play();    

 }); 
```

# jquery - ASP.Net 中的错误，在 Css 和 JQuery 之间使用 ID 选择器用于淡出属性

> ID：15586212
> 
> 赞同：0
> 
> 时间：2013-03-23T11:27:35.050
> 
> 标签：jquery, asp.net

在测试 Asp.Net Web 应用程序期间，我意识到 html 层（布局）支持 JQuery“淡入/出/切换/到”属性，但不支持像面板一样的 asp:层（布局）。

有关详细信息，您必须遵循我的以下代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs"    Inherits="Animated1._Default" %>

 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

 <html xmlns="http://www.w3.org/1999/xhtml" >
 <head runat="server">
 <title>Untitled Page</title>
 <style type="text/css">
 #pnl1
 {
  width:100px;
  height:150px;
  background-color:red;
  border-style:solid;
  border-color:black;
  border-width:3px; 
 }
 </style>
<script src="jquery-1.9.1.js"   type="text/jscript" ></script>
    <script  type="text/jscript">
    $(document).ready(function(){
    $("#<%=Btn.ClientID%>").click(function(){
    $("#<%=pnl1.ClientID %>").fadeOut(3000);});
    });
    </script>

 </head>
 <body>
    <form id="form1" runat="server">
    <div>
        <asp:Panel ID="pnl1" runat="server">
        </asp:Panel>
        <asp:Button  ID="Btn" runat="server" Text="Mytext" />
    </div>
    </form>
 </body>
 </html> 
```

现在按照上面的代码，像面板这样的 asp 控件不支持淡出属性。为什么？。

现在看一下带有 html 代码的相同示例，如下所示：只需使用上面的代码更改 Css ID 选择器和 Jquery。

这是 Css/Text 代码的样子：

```
#div1
{
  width:100px;
  height:150px;
  background-color:red;
  border-style:solid;
  border-color:black;
  border-width:3px; 
 }
     //And Jquery Function:
 <script src="jquery-1.9.1.js"   type="text/jscript" ></script>
 <script  type="text/jscript">
 $(document).ready(function(){
 $("#Btn").click(function(){
 $("#div1").fadeOut(3000);});
 });
 </script>

 //Rest Of Body Code is here.
  <body>
   <form id="form1" runat="server">
    <div>
     <div id="div1"></div>    
       <input type="button" value="fade the div" id="Btn"/>
     </div>
   </form>
  </body> 
```

现在 div 支持淡出属性并且运行良好。

1.我的问题是为什么淡出在 html 上工作而不是在 asp:controls 上工作？

2.Jquery不支持asp:controls吗？

3.或者Css/JQuery和Asp:Controls之间有ID选择器的结论？

最后解决上述问题。如何在 Css 和 Jquery 之间处理 Asp Controls ID 的选择器，因为它可以完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:55:29.813

更改您的脚本，它应该是这样的：

```
<script type="text/javascript"> 
```

另外，也添加此文件/链接：

```
<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script> 
```

或者简单地说：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
<script  type="text/javascript">
$(document).ready(function(){
$("#<%=Btn.ClientID%>").click(function(){
$("#<%=pnl1.ClientID %>").fadeOut(3000);});
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:28:47.683

它应该是这样的：

```
$(document).ready(function(){
$("#"+"<%=Btn.ClientID%>").click(function(){
$("#"+"<%=pnl1.ClientID %>").fadeOut(3000);});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T12:51:05.603

它正在工作，代码没有任何问题。

```
<div>
    <div ID="pnl1"></div>
    <input type="Button" value="click" id="Btn"></input>
</div> 
```

我创建了一个小提琴[http://jsfiddle.net/gqBWv/](http://jsfiddle.net/gqBWv/)
问题可能是您创建的类（css）。

由于您已经为 ID (#pnl1) 创建了 css 类，并且如果 id 在运行时更改，它将不适用于您的面板。
所以你可以使用`ClientIdMode="static"`它不会改变控件的id。

# ruby - bundler vs RVM vs gems vs RubyGems vs gemsets vs system ruby

> ID：15586216
> 
> 赞同：112
> 
> 时间：2013-03-23T11:27:58.117
> 
> 标签：ruby, rubygems, gem, rvm, bundler

我是 Ruby 新手，并试图围绕以下概念进行思考：bundler vs RVM vs gems vs RubyGems vs gemsets vs system rub，我很困惑。

有人可以描述我应该如何在全新安装的最新版本 Ubuntu 上管理所有这些的“最佳实践”吗？我应该安装什么，我应该如何使用它？

我猜`sudo apt-get install ruby`不建议这样做，但我不确定。除了“所有其他 Ruby 的东西”之外，我还在我的系统上尝试了它。这只会增加我的困惑。我不是在谈论 Rails，而只是在谈论常规的 Ruby gem（例如 Vagrant、Chef、scripts）。

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2013-03-23T12:16:40.787

根据之前的答案，这涉及到很多内容，因此请考虑这是一个简短的介绍。

**[gems](http://rubygems.org/pages/download)**是 Ruby 库的打包方式。它们之于 Ruby 就像 jar 之于 Java。在 gem 文件中，您可以找到 Ruby 代码（.rb 文件），还有测试，以及一个提供 gem 本身信息的特殊文件，例如它的名称、依赖项和版本（ [gemspec](http://docs.rubygems.org/read/chapter/20)）。任何 Ruby 项目都可以通过[Gemfile](http://gembundler.com/v1.2/gemfile.html)定义它需要的 gem ，只需要声明依赖项。**Rubygems**是包管理器的名称 - 用于安装包的工具（而 gems 是包本身）。Rubygems 现在是 Ruby 的一部分。

**[Bundler](http://gembundler.com/)**使管理 gems 变得可以忍受。根据您的 Gemfile，使用[bundle install](http://gembundler.com/v1.3/man/bundle-install.1.html)对 bundler 的简单调用将下载并安装所有必需的 gem。使用标准 gem 命令，您必须手动安装它们中的每一个，使用`gem install <gem_name>`. Bundler 不是 Ruby 的一部分（它本身被[打包为 gem](http://gembundler.com/#getting-started)），但它是大多数应用程序的“事实上的标准”（你不会发现很多人不使用它，实际上也没有充分的理由不使用它）。

**[RVM](https://rvm.io/)**是一种工具，允许您在一台机器上安装多个版本的 Ruby，并在需要时在它们之间切换。这可用于安装 Ruby 1.8 和 1.9，甚至是“MRI”（Matz 的 Ruby，默认实现）和替代品（例如 JRuby 或 Rubinius）。请注意，RVM 在该领域并不孤单，请参见例如[rbenv](https://github.com/sstephenson/rbenv/)。

RVM 中的**[gemset](https://rvm.io/gemsets/)**是一组特定于给定上下文（通常是项目）的 gem。例如，如果您正在开发不同的应用程序，每个应用程序都有自己的一组 gem，并且希望将它们分开，这将非常有用。

**[系统 Ruby](https://rvm.io/rubies/default)**是在使用 RVM 时安装在机器上的 Ruby 版本（即，不是通过 RVM）。

如果您刚刚开始，那么您会对 gems 和 bundler 感兴趣。您现在可以将 RVM 和 gemsets 放在一边。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T11:56:25.827

您在一个问题中询问的信息超出了 Stack Overflow 的范围。要涵盖这一切需要一本书。

在 Ubuntu 上，很容易在 Ruby 的“系统”版本中安装和删除 gem，所以习惯于通过`sudo`. （在 Mac OS 上，我会给出不同的建议，因为 Apple 捆绑 Ruby 供他们自己使用，而且混用它并不是一个好主意。）您系统上的 Ruby 版本，尝试“ [rbenv](https://github.com/sstephenson/rbenv/) ”或“ [RVM](https://rvm.io) ”并在您的沙箱中安装一个或两个版本。

Linux 使得通过发行版添加/删除 Ruby 变得很容易，但我们仅限于发行版维护者打包的版本，所以我通常从源代码安装。但是，当管理用于开发、测试和生产系统的多个版本的 Ruby 时，这是一种痛苦，这就是发明[rbenv](https://github.com/sstephenson/rbenv/)和[RVM](https://rvm.io)的原因——它们处理肮脏的细节，使我们能够专注于编程。

我已经使用了[rbenv](https://github.com/sstephenson/rbenv/)和[RVM](https://rvm.io)，并且在过去六个月左右一直在使用 rbenv ，效果很好。它比我喜欢的 RVM 简单。在任何一种情况下，它们都可以轻松安装不同的版本，并使用单独的 Gem 集。如果需要，您可以在不同的终端窗口中打开不同的 Ruby 版本，从而轻松测试兼容性。

调试时的规则一是一次更改一项，这对于学习编程或学习一门新语言是正确的。不要分心，保持简单。

# c# - 保存网站内容并访问它

> ID：15586217
> 
> 赞同：1
> 
> 时间：2013-03-23T11:28:01.510
> 
> 标签：c#, web, content-management-system, offline

3 年后我再次开始使用 C#（具有面向对象语言的平均经验；这里我主要缺少函数名称）。我不太确定这在 c# 中是否可行，所以如果你能推荐另一种语言，我会尝试去那里看看。

我的问题：

1.  在程序启动（或按钮）上，我想提取网站的一部分并保存（文件的临时性无关紧要）。这样我就不需要再次缓冲/加载（加载时间）任何内容，并且如果我之后下线就可以访问内容。
2.  我想从内容中提取一些数字并用它们做简单的数学运算。

很高兴知道它是否可能以及如何。如果你能告诉我我应该研究的主要功能，我很高兴。如果要求不高，一些基本代码也会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:35:28.073

可能你正在寻找这个：

```
var contents = new System.Net.WebClient().DownloadString(url); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T11:44:16.760

如果即使您的程序关闭/重新启动，您也想访问这些信息，那么您需要将源代码导出到一个文件，如下所示：

```
using (WebClient wb = new WebClient())
{
    string source = wb.DownloadString("http://example.com");

    File.WriteAllText("c:\\exampleFile.txt", source);
} 
```

否则，您可以删除`File.WriteAllText("c:\\exampleFile.txt", source);`并简单地从源中解析您想要的部分并进行计算。

请记住，这将按“原样”下载 url 的源代码，这意味着您需要对文本进行一些解析才能从中获取所需的信息。

# sql-server - SQL Server 2008 中的表值类型

> ID：15586218
> 
> 赞同：-1
> 
> 时间：2013-03-23T11:28:02.463
> 
> 标签：sql-server, sql-server-2008-r2

有没有办法检查 SQL Server 2008 数据库中已经声明的所有表值类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:31:34.930

可能是你想要这个[sys.table_types](http://msdn.microsoft.com/en-us/library/bb510623%28v=sql.105%29.aspx)，

```
select * from  sys.table_types 
```

# windows - WSAGetLastError() 只是 GetLastError() 的别名吗？

> ID：15586224
> 
> 赞同：11
> 
> 时间：2013-03-23T11:28:30.307
> 
> 标签：windows, winapi, networking, network-programming

在我的代码中，我有带 I/O 完成端口的异步 I/O，对于读/写完成回调，我得到一个`HANDLE`（当然可以是套接字、文件句柄、命名管道等）。

因此，如果在这样的例程中出现问题，我想检查错误，但是如何知道它是“网络” `HANDLE`（a `SOCKET`，所以我应该调用`WSAGetLastError()`）还是“非网络” `HANDLE`（命名管道、文件等，所以我应该打电话`GetLastError()`）？我为此使用了一个简单的标志，但它丑陋且不方便。

如果有人可以确认这`WSAGetLastError()`只是 的别名`GetLastError()`，我将只使用后者。

似乎是这样：

[http://www.tech-archive.net/Archive/Development/microsoft.public.win32.programmer.networks/2007-08/msg00034.html](http://www.tech-archive.net/Archive/Development/microsoft.public.win32.programmer.networks/2007-08/msg00034.html)

[http://us.generation-nt.com/wsagetlasterror-just-an-alias-getlasterror-help-28256642.html](http://us.generation-nt.com/wsagetlasterror-just-an-alias-getlasterror-help-28256642.html)

但有人可以证实吗？MSDN 对这个话题不是很清楚。

使用`GetLastError()`而不是安全`WSAGetLastError()`吗？我的意思是，如果有人声称`WSAGetLastError()`它甚至是自 Windows95 以来的别名`GetLastError()`，我可以假设它对于下一版本的 Windows 来说是正确的——但我们不能在假设的情况下编写好的代码 :)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-23T11:46:45.543

如果您对 ws2_32.dll 进行逆向工程，它只是 GetLastError 的包装器，您会找到它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-20T10:42:29.167

拥有两个类似功能的原因：http: [//blogs.msdn.com/b/oldnewthing/archive/2005/09/08/462402.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2005/09/08/462402.aspx)

> 既然已经有了完美的函数SetLastError，为什么还存在函数WSASetLastError？
> 
> 其实，你也知道答案，如果你坐下来想一想。
> 
> Winsock 最初是为在 16 位 Windows 和 32 位 Windows 上运行而开发的。请注意经典的 Winsock 函数如何基于异步通知的窗口消息。在 16 位世界中，没有 SetLastError 函数。因此，Winsock 必须为 16 位实现提供自己的版本。由于源代码兼容性很重要，因此也有 32 位版本。当然，如果您不知道 16 位版本，回想起来 32 位版本看起来有点愚蠢。

# java - Java中异常的FTP退出连接

> ID：15586228
> 
> 赞同：0
> 
> 时间：2013-03-23T11:28:45.293
> 
> 标签：java, ftp, ftp-client

在 Java 中的 FTP 客户端上引发异常时要遵循的正确程序是什么，即 FTP 会话是保持活动状态还是在引发异常时自动“退出”？

所以我有这个：

```
public boolean testHost(Host host, String path) {
    boolean success = false;
    try {
        FTPClient ftp = new FTPClient();
        ftp.setRemoteHost(host.getIpaddress());
        ftp.connect();
        ftp.login(host.getUsername(), host.getPassword());
        success = ftp.connected();

        if (success && path != null){
            ftp.chdir(path);
        }           
        ftp.quit();
    } catch (UnknownHostException e) {
        LOG.info("Host IPAddress cannot be reached on " + host.getIpaddress());
        success = false;
    } catch (IOException e) {
        e.printStackTrace();
        success = false;
    } catch (FTPException e) {
        success = false;
    }
    return success;  
} 
```

当调用任何异常时，quit 命令不会被命中 - 这是一个问题吗？如果此方法不断受到攻击，是否可能有 100 个活动连接打开到 FTP 客户端？还是我什么都不担心？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T20:07:10.983

移动您的 ftp.quit() 语句，使其位于 return 语句的正上方

像这样：

```
public boolean testHost(Host host, String path) {
    boolean success = false;
    try {
        FTPClient ftp = new FTPClient();
        ftp.setRemoteHost(host.getIpaddress());
        ftp.connect();
        ftp.login(host.getUsername(), host.getPassword());
        success = ftp.connected();

        if (success && path != null){
            ftp.chdir(path);
        }           
    } catch (UnknownHostException e) {
        LOG.info("Host IPAddress cannot be reached on " + host.getIpaddress());
        success = false;
    } catch (IOException e) {
        e.printStackTrace();
        success = false;
    } catch (FTPException e) {
        success = false;
    }
    ftp.quit();
    return success;  
} 
```

由于您的任何捕获都不会终止该方法，因此将继续执行 ftp.quit() 语句并最终返回成功结果。

或者，您可以在 try 结束时使用 finally 子句并将 ftp.quit() 语句放入其中。

AFAIK 的选择是优惠的。

# asp.net-mvc-4 - 什么是 webresource.xsd 和 scriptresource.xsd 文件

> ID：15586230
> 
> 赞同：0
> 
> 时间：2013-03-23T11:28:47.323
> 
> 标签：asp.net-mvc-4

什么是 webresource.xsd 和 scriptresource.xsd 文件，它们在哪里找到？

我问的是关于 asp.net mvc 的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:38:33.290

它们就像数据源，特别是当您需要为您的应用程序生成一些报告时。

# python - python弹性搜索不起作用pyes包问题

> ID：15586233
> 
> 赞同：0
> 
> 时间：2013-03-23T11:29:11.920
> 
> 标签：python, elasticsearch, pyes

最近安装了pyes，但是当我在python shell中厌倦了它时，它给出了错误，任何人都可以在这方面帮助我：

```
Traceback (most recent call last):

File "<stdin>", line 1, in <module>
File "/usr/local/lib/python2.7/dist-packages/pyes-0.19.1-py2.7.egg/pyes/__init__.py", line 41, in <module>
    from .djangoutils import *
File "/usr/local/lib/python2.7/dist-packages/pyes-0.19.1-py2.7.egg/pyes/djangoutils.py", line 6, in <module>
    from django.db import models
  File "/usr/local/lib/python2.7/dist-packages/django/db/__init__.py", line 11, in <module>
    if settings.DATABASES and DEFAULT_DB_ALIAS not in settings.DATABASES:
  File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 52, in __getattr__
    self._setup(name)
  File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 45, in _setup
    % (desc, ENVIRONMENT_VARIABLE))
django.core.exceptions.ImproperlyConfigured: Requested setting DATABASES, but settings are not configured. You must either define the environment variable DJANGO_SETTINGS_MODULE or call settings.configure() before accessing settings. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:44:52.120

我发现这个问题可以通过在终端中运行脚本之前简单地执行以下操作来“解决”

```
export DJANGO_SETTINGS_MODULE=default.settings 
```

运行该代码后，脚本完全按照预期的方式工作！

# php - PHP - 如何解析 STRING 字段（删除一些 XML 元素和所有命名空间）？

> ID：15586236
> 
> 赞同：1
> 
> 时间：2013-03-23T11:29:24.633
> 
> 标签：php, xml, string

我真的需要关于字段中包含无效 XML 值的字符串解析的帮助。我将显示当前值和目标值以放入字符串字段。

我有一个具有此值的字段 $xmlString （元素不在单独的行中，而是在同一行中；它是 Web 服务响应，因此我仅在以后的解析中对响应没有影响）：

```
<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope xmlns:soapenv=" http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
        <p:queryBillingAccountResponse xmlns:p="http://www.ibm.com">
            <ns0:customerAccount xmlns:ns0=" http://www.ibm.com/2009">
                <ComponentCustomerAccount>
                    <Name>ADSL 4</Name>
                    <CharacteristicValue>
                        <Characteristic>
                            <Name>Balance</Name>
                        </Characteristic>
                        <Value>0.0</Value>
                    </CharacteristicValue>
                    <AccountStatus>Paid</AccountStatus>
                </ComponentCustomerAccount>
            </ns0:customerAccount>
        </p:queryBillingAccountResponse>
    </soapenv:Body>
</soapenv:Envelope> 
```

如果可能的话，我想要这个输出：

```
<queryBillingAccountResponse>
    <customerAccount>
        <ComponentCustomerAccount>
            <Name>ADSL 4</Name>
            <CharacteristicValue>
                <Characteristic>
                    <Name>Balance</Name>
                </Characteristic>
                    <Value>0.0</Value>
                </CharacteristicValue>
            <CharacteristicValue>
            <AccountStatus>Paid</AccountStatus>
        </ComponentCustomerAccount>
    </customerAccount>
</queryBillingAccountResponse> 
```

所以你会注意到我没有前三行（尽管它们不是真正单独的行）和最后两行，而且我没有为`queryBilling AccountResponse`and定义命名空间`customer Account`。我希望这些没有命名空间的元素位于字符串字段中。对于开始和结束标签。我真的需要这个输出。如何解析这个？我尝试使用 SimpleXMLElement 但无法解析它。谢谢您的帮助

**更新了 $xml = simplexml_load_string($text); 无法解析的输出**

```
<<<XML
<?xml version="1.0" encoding="utf-8"?>
<Envelope>
<Body>
<queryBillingAccountResponse>
<customerAccount>
<ComponentCustomerAccount>
<Name>ADSL 4</Name>
<CharacteristicValue>
<Characteristic>
<Name>Balance</Name>
</Characteristic>
<Value>0.0</Value>
</CharacteristicValue>
<AccountStatus>Paid</AccountStatus>
</ComponentCustomerAccount>
</customerAccount>
</queryBillingAccountResponse>
</Body>
</Envelope>
XML> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:02:36.707

为了有一个 SimpleXML 可以理解的 xml 代码，并且由于您不需要命名空间声明，以下代码在将其应用到之前清理了代码`simplexml_load_string`

```
<?php
    // if the XML comes from a file (or just assign the $text string)
    $text = file_get_contents('myfile.xml');
    $text = preg_replace('/(<\s*)\w+:/','$1',$text);   // removes <xxx:
    $text = preg_replace('/(<\/\s*)\w+:/','$1',$text); // removes </xxx:
    $text = preg_replace('/\s+xmlns:[^>]+/','',$text); // removes xmlns:...

    // the code should be clean enough for SimpleXML to parse it
    $xml = simplexml_load_string($text);

    // view the XML (and process it afterwards...)
    print_r($xml); 
```

将示例 XML 放入字符串（而不是文件）中

```
 <?php
       $text = <<<XML
<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope xmlns:soapenv=" http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
        <p:queryBillingAccountResponse xmlns:p="http://www.ibm.com">
            <ns0:customerAccount xmlns:ns0=" http://www.ibm.com/2009">
                <ComponentCustomerAccount>
                    <Name>ADSL 4</Name>
                    <CharacteristicValue>
                        <Characteristic>
                            <Name>Balance</Name>
                        </Characteristic>
                        <Value>0.0</Value>
                    </CharacteristicValue>
                    <AccountStatus>Paid</AccountStatus>
                </ComponentCustomerAccount>
            </ns0:customerAccount>
        </p:queryBillingAccountResponse>
    </soapenv:Body>
</soapenv:Envelope>
XML;

    $text = preg_replace('/(<\s*)\w+:/','$1',$text);   // removes <xxx:
    $text = preg_replace('/(<\/\s*)\w+:/','$1',$text); // removes </xxx:
    $text = preg_replace('/\s+xmlns:[^>]+/','',$text); // removes xmlns:...

    // the code should be clean enough for SimpleXML to parse it
    $xml = simplexml_load_string($text);

    // view the XML (and process it afterwards...)
    print_r($xml); 
```

要访问元素，请使用`->`（和`[xx]`用于数组），例如

```
 echo echo $xml->Body->queryBillingAccountResponse->customerAccount->ComponentCustomerAccount->Name . "\n"; 
```

将显示

```
ADSL 4 
```

[SimpleXML 文档](http://php.net/manual/en/book.simplexml.php)

# php - 将检索到的值存储在变量 php mysql 中

> ID：15586244
> 
> 赞同：-4
> 
> 时间：2013-03-23T11:29:40.140
> 
> 标签：php, mysql, timestamp

```
$check="SELECT timestamp 
        FROM med_buy
        WHERE patient_id='$pid' AND med_id='$mid'
        ORDER BY timestamp DESC"; 
```

我正在使用此代码，我想存储从数据库返回的最高值并且我想检查当前日期的时间戳，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:32:42.373

添加一个限制 1 以仅获取第一行然后使用

```
$data = mysql_query($check);
$data = mysql_fetch_assoc($data);
$timestamp = $data['timestamp']; 
```

然后检查当天，使用

```
if(date('Ymd') == date('Ymd', strtotime($timestamp))
{
   echo "today!";
} 
```

希望这可以帮助

# html - 继承相对行高时，它与元素的字体大小无关。为什么？我如何使它相对？

> ID：15586245
> 
> 赞同：11
> 
> 时间：2013-03-23T11:29:44.937
> 
> 标签：html, font-size, css, em

我有一个全局重置，为每个元素设置和设置 `font-size`：`line-height``inherit`

```
* {
  font-size:   inherit;
  line-height: iherit; } 
```

对于`html`，我明确定义它们：

```
html {
  font-size:   16px;
  line-height: 1.25em; } /* 16×1.25 = 20 */ 
```

请注意，这`line-height`是以**相对**单位设置的。

对于`h1`，我定义了不同的字体大小：

```
h1 {
  font-size: 4em; } 
```

我希望`h1`继承`line-height`. `1.25em`生成的 line-height 应该等于 80px (16×4×1.25)。

但实际上`h1`'`line-height`仍然等于`20px`（与`html`'s 相同：16×1.25=20）。

说，我有以下 HTML：

```
<p>foo<br>bar</p>
<h1>foo<br>bar</h1> 
```

结果截图：

![相对行高被错误地继承](../Images/791a2b1e2f5025d0dd5a04744855162d.png) [http://jsfiddle.net/M3t5y/5/](http://jsfiddle.net/M3t5y/5/)

要解决这个问题，我必须明确定义`h1`'s`line-height`等于它继承的相同值：

```
h1 {
  font-size:   4em;
  line-height: 1.25em; } 
```

然后`line-height`变得正确：

![通过显式提供行高而不是继承它来解决问题](../Images/5dbeabf79d93d3e0d30fdca6a251ccd0.png) [http://jsfiddle.net/M3t5y/6/](http://jsfiddle.net/M3t5y/6/)

看起来是先将相对值计算成绝对值，然后再继承绝对值。或者，它可能是相对于父级的`font-size`，而不是元素的`font-size`。

## 问题

1.  为什么亲属`line-height`继承不正确？
2.  如何使相对`line-height`值被继承为相对于元素`font-size`而不是其父元素的值？

PS 标题中有一个[问题](https://stackoverflow.com/questions/14483372/wrong-rendering-of-inherited-line-height)类似的问题，但细节上有所不同。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-23T12:01:14.873

当您使用`em`行高的值时，会计算行高的值，并且子元素也使用该计算值。

如果您使用裸数字，则它是用于计算子元素行高的比率。

所以使用`line-height:1.25;`而不是`line-height:1.25em;`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T12:03:24.243

`line-height`在元素上计算，然后在使用时继承该元素`em`。如果您检查第一个示例，您会注意到 line-height 的计算值为`20px`(16x1.25)，而不是`1.25em`.

![计算样式](../Images/a210e10844d54ff016ccb8aded13f5de.png)

您可以使用`line-height:1.25`，它将在正确的元素上计算。

# django - 如何在Django中创建包含用户模型字段子集的模型

> ID：15586246
> 
> 赞同：1
> 
> 时间：2013-03-23T11:29:54.580
> 
> 标签：django, inheritance, django-models

如何创建`OrderUser`包含`User`所需模型子字段的模型：

*   名
*   姓
*   电子邮件

**我想避免从 django.contrib.auth.models AbstractUser 中手动复制字段结构，**例如

```
class OrderUser(models.Model):
    first_name = models.CharField(_('first name'), max_length=30, blank=True)
    last_name = models.CharField(_('last name'), max_length=30, blank=True)
    email = models.EmailField(_('email address'), blank=True) 
```

我想知道是否有任何方法可以写出这样的东西：

```
class OrderUser(models.Model):
    first_name = User.fields.first_name
    last_name = User.fields.last_name
    email = User.fields.email 
```

通常，如果我希望两个模型具有相同的字段，我会使用抽象模型继承。但是从 AbstractUser 继承会导致许多不必要的字段，例如 username、is_staff、is_active 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:33:20.257

好的，我的错，我终于找到了自己问题的答案，也许对其他人有帮助。

该`_meta`物业为我工作：

```
class OrderUser(models.Model):
    first_name = User._meta.get_field_by_name('first_name')[0]
    last_name = User._meta.get_field_by_name('last_name')[0]
    email = User._meta.get_field_by_name('email')[0] 
```

更多讨论`_meta`：

*   [在 Django 中获取模型的字段](https://stackoverflow.com/questions/3647805/get-models-fields-in-django)
*   [如何自省 django 模型字段？](https://stackoverflow.com/questions/2384436/how-to-introspect-django-model-fields)

# cakephp-2.0 - 多数据库连接问题 CakePHP v2.x

> ID：15586247
> 
> 赞同：0
> 
> 时间：2013-03-23T11:30:10.610
> 
> 标签：cakephp-2.0

我正在使用 CakePHP v2.x。我当前的数据库是 MySQL。我需要在控制器下编写的方法/函数中连接到其他数据库。所以到目前为止我所做的是在 Config/database.php 中添加另一个数据库连接数组 $test。

```
class DATABASE_CONFIG {

public $default = array(
    'datasource' => 'Database/Mysql',
    'persistent' => false,
    'host'       => 'localhost',
    'login'      => 'test',
    'password'   => 'test1',
    'database'   => 'test_portal',
    'prefix'     => ''
    //'encoding' => 'utf8',
);

public $test = array(
    'datasource'    => 'Database/Mysql',
    'persistent'    => false,
    'host'      => 'localhost',
    'login'     => 'dfffd_23',
    'password'  => 'dsfsd324',
    'database'  => 'testdbuser',
    'prefix'    => ''
    //'encoding'    => 'utf8',
);
} 
```

我需要连接一个名为“aezips”的表。所以我创建了一个新模型；

```
class Aezips extends AppModel { 

  public $name      = 'Aezip'; 
  public $useDbConfig   = 'test';
  //public $useTable        = 'aezips';

} 
```

在我的控制器中添加；

```
public $uses = array('Aezip'); 
```

具有名为 add 的函数/方法的控制器，

```
public function add() {

        $this->layout = NULL;
        $this->autoRender = false; //will prevent render of view

        if($this->RequestHandler->isAjax()){
             Configure::write('debug', 0); //it will avoid any extra output
          }

        //$this->Aezip->useDbConfig('test'); 

        $t = $this->Aezip->find('all');     //To fetch data from aezips table
        print_r($t);    

        print_r($this->data);

} 
```

但我无法连接到 Aezip 表，也没有显示任何错误。两个数据库都驻留在同一台服务器上，但 cpanel 帐户不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:42:40.297

您似乎为您的模型使用了错误的名称（复数而不是单数）；

```
class Aezips extends AppModel {} 
```

应该：

```
class Aezip extends AppModel {} 
```

正确的文件名应该是`app/Model/Aezip.php`

此外，请务必在内部启用“调试”，`app/Config/core.php`以便您可以看到执行的查询。此外，这将更频繁地刷新 CakePHP 缓存，从而降低使用“缓存”模型定义的风险。

您可以使用`debug($variable);`而不是调试变量`print_r($variable);`

# functional-programming - 编译时 XQuery 验证

> ID：15586248
> 
> 赞同：0
> 
> 时间：2013-03-23T11:30:25.017
> 
> 标签：functional-programming, xquery, static-analysis

有哪些工具可用于 XQuery 函数的静态分析？

示例任务：给定两个 XSD 模式*A*和*B*以及一些 XQuery *f*，检查对于任何类型*A的文档**d* ，其转换*f(d)*对*B*有效。

 ***或者对于给定的查询生成它的逆，当存在时。

不幸的是，这个话题很难用谷歌搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:51:30.483

是的，我认为[`OxygenXML`](http://www.oxygenxml.com/)XQuery 分析非常棒，它内置了自己的手动[静态分析](http://www.oxygenxml.com/forum/topic6720.html)工具。

> 您可以改用手动验证：在配置将 xDB 连接指定为引擎的转换或验证方案后，文档 > 验证 > 验证。

我发现的其他资源在此主题上很有趣[使用 XML 编辑器创建或验证 OLAC 静态存储库](http://olac.googlecode.com/svn/web/NOTE/oxygen.html)以及[在哪里可以找到 XSLT 的静态/动态代码分析工具？](https://stackoverflow.com/questions/1469475/where-can-i-find-static-dynamic-code-analysis-tools-for-xslt)（氧气可以与`X-Query`, `X-Path`,`XLink`一起使用）。***

# eclipse - Eclipse 中的 GWT Maven Archetype - 未知的输出目录

> ID：15586249
> 
> 赞同：0
> 
> 时间：2013-03-23T11:30:31.450
> 
> 标签：eclipse, gwt, maven, m2eclipse, gwt-maven-plugin

我在 Eclipse Juno 中使用 gwt-maven-plugin 原型创建了一个新的 Maven 项目。创建项目后，出现构建错误：

> 未知的 Google Web App 问题：项目的输出目录应设置为 /myproject/src/main/webapp/WEB-INF/classes

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-25T18:24:50.417

转到项目|属性|Google|Web 应用程序。取消选中复选框（从此目录启动和部署...）。

请参阅[http://googlewebtoolkit.blogspot.com/2010/08/how-to-use-google-plugin-for-eclipse.html](http://googlewebtoolkit.blogspot.com/2010/08/how-to-use-google-plugin-for-eclipse.html)

# php - 如何清除我在wordpress中获得的文本框值

> ID：15586250
> 
> 赞同：1
> 
> 时间：2013-03-23T11:30:38.143
> 
> 标签：php, wordpress

```
<?php

$site     = site_url();
$tec      = $site;
$tecget   = $site . '/';
$tecgetwo = substr($site, 7);
$gett     = get_option('FPMobileget');

if (strpos($gett, "http://www.") === 0) {
    $gettt  = substr($gett, 11);
    $getttc = 'http://' . $gettt;
}
elseif (strpos($gett, "www.") === 0) {
    $getwww  = substr($gett, 4);
    $getwwwc = 'http://' . $getwww;
}
elseif (strpos($gett, "http://") === 0) {
    $gethttp = substr($gtt, 7);
}

if (($gett == $tec) || ($gett == $tecget) || ($getwwwc == $tec) || ($getttc == $tec) || ($gett == $tecgetwo)) {
    echo "you entered the same url";
    echo '<div class="error"><p style="color:#F00">Warning -error</p></div>';
    delete_option('FPMobileget');
}
else {
    echo "success";   
}

?> 
```

我想用当前站点 url 检查用户 url 输入是否相同，如果相同，我想同时在管理菜单中向用户抛出错误消息我想清除文本字段。我使用 get_option(' FPMobileget') 从文本框中获取用户输入。所以我在条件满足时使用 delete_option 清除文本字段（如果 url 相同）。这里用户可以以不同的方式输入 url，所以我经历了一些字符串函数来处理它。这里一切正常，但错误消息显示在顶部，但不在文本框旁边。在这里一切正常，但我想在文本框旁边显示错误消息。这是我在stackoverflow中的第一个问题，因为我是stackoverflow的新手。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:33:06.450

使整个事情成为一个函数，将您的错误消息转换为字符串（不使用回显）并使用`return $errorstring;`将字符串发送回表单。

然后，您可以将 $errorstring 放在您想要的任何地方。

# php - 谷歌图表更改日期格式

> ID：15586255
> 
> 赞同：1
> 
> 时间：2013-03-23T11:31:09.397
> 
> 标签：php, javascript, drupal-7

我希望谷歌图表 x 轴中的日期格式为（1 2 3，...仅日期），但我使用 php 从 fornat 中的 drupal 视图传递日期值（2013 年 3 月 1 日）。我想要 2013 年 3 月 1 日图表下方的表格，图表 x 轴中只有日期（1,2,3,...）。可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:40:42.290

是的，你可能使用`Date API`模块...试试这个代码

```
 <?php
    $form['payment_expirationDate'] = array(
    '#type' => 'date_select',
    '#title' => t('Expiration Date:'),
    '#date_format' => 'm-Y',
    '#default_value' => $expirationDate,
    '#date_year_range' => '-1:+10',
    '#required' => TRUE,
    '#date_label_position' => 'within'
     ); 
    ?> 
```

# ios - 强制 ViewController 动画到横向

> ID：15586261
> 
> 赞同：0
> 
> 时间：2013-03-23T11:31:49.120
> 
> 标签：ios, landscape, viewcontroller

我有一个应用程序（仅限 iOS 6），其中导航控制器作为根，多视图控制器推送。我要推送的一个 viewController 应该始终以横向模式查看。我想推送到 viewController 并自动设置为横向动画。

我怎样才能做到这一点？

谢谢，拉斐尔

# php - 使用 GSM 调制解调器发送短信

> ID：15586262
> 
> 赞同：2
> 
> 时间：2013-03-23T11:31:57.740
> 
> 标签：php, gsm, modem

我想创建一个可以向多个收件人发送短信的表单，我创建了一个使用 javascript 动态添加或删除文本框的表单，当我填写一个收件人号码时，此代码成功发送短信，但无法发送多个收件人，我想知道如何让这个表单向多个用户发送短信

当我尝试通过使其循环向多个用户发送短信时，我收到此错误，有人可以帮忙吗？

**警告：为 foreach() 提供的参数无效**

```
<SCRIPT language="javascript">
        function addRow(tableID) {

            var table = document.getElementById(tableID);

            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var cell1 = row.insertCell(0);
            var element1 = document.createElement("input");
            element1.type = "checkbox";
            element1.name="chkbox[]";
            cell1.appendChild(element1);

            var cell2 = row.insertCell(1);
            cell2.innerHTML = rowCount + 1;

            var cell3 = row.insertCell(2);
            var element2 = document.createElement("input");
            element2.type = "text";
            element2.name = "CTL_TEL";

            cell3.appendChild(element2);

        }

        function deleteRow(tableID) {
            try {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;

            for(var i=0; i<rowCount; i++) {
                var row = table.rows[i];
                var chkbox = row.cells[0].childNodes[0];
                if(null != chkbox && true == chkbox.checked) {
                    table.deleteRow(i);
                    rowCount--;
                    i--;
                }

            }
            }catch(e) {
                alert(e);
            }
        }

    </SCRIPT>

<?php

error_reporting(E_ALL ^ E_NOTICE);

//Example

$gsm_send_sms = new gsm_send_sms();
$gsm_send_sms->debug = false;
$gsm_send_sms->port = 'COM6';
$gsm_send_sms->baud = 115200;
$gsm_send_sms->init();
$name="CTL_TEL[]";

foreach ($tel as $_POST['CTL_TEL']) {

$status = $gsm_send_sms->send($_POST["CTL_TEL"] , $_POST["CTL_MSG"]);
$status = $gsm_send_sms->send($tel , $_POST["CTL_MSG"]); 

if ($status) {
    echo "Message sent\n";
} else {
    echo "Message not sent\n";
}
}

$gsm_send_sms->close();

//Send SMS via serial SMS modem
class gsm_send_sms {

    public $port = 'COM6';
    public $baud = 115200;

    public $debug = false;

    private $fp;
    private $buffer;

    //Setup COM port
    public function init() {

        $this->debugmsg("Setting up port: \"{$this->port} @ \"{$this->baud}\" baud");

        exec("MODE {$this->port}: BAUD={$this->baud} PARITY=N DATA=8 STOP=1", $output, $retval);

        if ($retval != 0) {
            throw new Exception('Unable to setup COM port, check it is correct');
        }

        $this->debugmsg(implode("\n", $output));

        $this->debugmsg("Opening port");

        //Open COM port
        $this->fp = fopen($this->port . ':', 'r+');

        //Check port opened
        if (!$this->fp) {
            throw new Exception("Unable to open port \"{$this->port}\"");
        }

        $this->debugmsg("Port opened");
        $this->debugmsg("Checking for responce from modem");

        //Check modem connected
        fputs($this->fp, "AT\r");

        //Wait for ok
        $status = $this->wait_reply("OK\r\n", 5);

        if (!$status) {
            throw new Exception('Did not receive responce from modem');
        }

        $this->debugmsg('Modem connected');

        //Set modem to SMS text mode
        $this->debugmsg('Setting text mode');
        fputs($this->fp, "AT+CMGF=1\r");

        $status = $this->wait_reply("OK\r\n", 5);

        if (!$status) {
            throw new Exception('Unable to set text mode');
        }

        $this->debugmsg('Text mode set');

    }

    //Wait for reply from modem
    private function wait_reply($expected_result, $timeout) {

        $this->debugmsg("Waiting {$timeout} seconds for expected result");

        //Clear buffer
        $this->buffer = '';

        //Set timeout
        $timeoutat = time() + $timeout;

        //Loop until timeout reached (or expected result found)
        do {

            $this->debugmsg('Now: ' . time() . ", Timeout at: {$timeoutat}");

            $buffer = fread($this->fp, 1024);
            $this->buffer .= $buffer;

            usleep(200000);//0.2 sec

            $this->debugmsg("Received: {$buffer}");

            //Check if received expected responce
            if (preg_match('/'.preg_quote($expected_result, '/').'$/', $this->buffer)) {
                $this->debugmsg('Found match');
                return true;
                //break;
            } else if (preg_match('/\+CMS ERROR\:\ \d{1,3}\r\n$/', $this->buffer)) {
                return false;
            }

        } while ($timeoutat > time());

        $this->debugmsg('Timed out');

        return false;

    }

    //Print debug messages
    private function debugmsg($message) {

        if ($this->debug == true) {
            $message = preg_replace("%[^\040-\176\n\t]%", '', $message);
            echo $message . "\n";
        }

    }

    //Close port
    public function close() {

        $this->debugmsg('Closing port');

        fclose($this->fp);

    }

    //Send message
    public function send($tel, $message) {

        //Filter tel
        $tel = preg_replace("%[^0-9\+]%", '', $tel);

        //Filter message text
        $message = preg_replace("%[^\040-\176\r\n\t]%", '', $message);

        $this->debugmsg("Sending message \"{$message}\" to \"{$tel}\"");

        //Start sending of message
        fputs($this->fp, "AT+CMGS=\"{$tel}\"\r");

        //Wait for confirmation
        $status = $this->wait_reply("\r\n> ", 5);

        if (!$status) {
            //throw new Exception('Did not receive confirmation from modem');
            $this->debugmsg('Did not receive confirmation from modem');
            return false;
        }

        //Send message text
        fputs($this->fp, $message);

        //Send message finished indicator
        fputs($this->fp, chr(26));

        //Wait for confirmation
        $status = $this->wait_reply("OK\r\n", 180);

        if (!$status) {
            //throw new Exception('Did not receive confirmation of messgage sent');
            $this->debugmsg('Did not receive confirmation of messgage sent');
            return false;
        }

        $this->debugmsg("Message sent");

        return true;

    }

}

?> 

<html>
<head>
<title>SMS via GSM</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<style>
   .clbody {
   font-family:Verdana, Arial, Helvetica, sans-serif;
   font-size:9pt;
   font-weight:normal;
}
.clfooter {
   font-family:Verdana;
   font-size:7pt;
   font-weight:normal;
}
h1, .h1 {
   width:100%;
   font-family:Verdana, Arial, Helvetica, sans-serif;
   font-size:18px;
   font-weight:bold;
}
hr, .hr {
   color:#b0b0b0;
}
</style>
</head>

<body class="clbody">
<h1>SMS via GSM</h1>
<div style="WIDTH:700px">

</div>
<hr size="1">

<?php
error_reporting(E_ALL ^ E_NOTICE);
?>
<form action="" method="post" name="myForm">
<table class ="clbody" width="700" border="1">

   <tr>
      <td valign="top">Recipient:</td>
      <td valign="top">

      <INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />

    <INPUT type="button" value="Delete Row" onclick="deleteRow('dataTable')" />

    <TABLE id="dataTable" width="350px" border="1">
        <TR>
            <TD><INPUT type="checkbox" name="chk"/></TD>
            <TD> 1 </TD>
            <TD> <input type="text" name="CTL_TEL" value="<?php  echo $_GET['CTL_TEL']; ?>"> </TD>
        </TR>
    </TABLE>

     </td>
   </tr>
   <tr>
      <td valign="top">Message:</td>
      <td valign="top">

      <input style="width: 250px" type="text" name="CTL_MSG" value="<?php echo $_GET['CTL_MSG']; ?>"></td>

   </tr>

      <tr>
      <td valign="top">Result code:<font color=green></td>
      <td valign="top"></td>
   </tr>   
   <tr>
      <td valign="top">&nbsp;</td>
      <td valign="top"><input size="25" type="submit" value="Send" name="CTL_SEND" style="height: 23px; width: 250px"></td>
   </tr>
</table>
<br>
<br>
</form>

</body>
</html> 
```

# javascript - fullCalendar - 未捕获的类型错误：无法调用未定义的方法“拆分”

> ID：15586266
> 
> 赞同：1
> 
> 时间：2013-03-23T11:32:23.907
> 
> 标签：javascript, jquery, jquery-plugins, fullcalendar

我在页面上填充所有月份，例如：

```
<?php foreach(range(0,11) as $month): ?>
      <div style='float:left; width:303px;' id='calenderSalesMonth_<?php echo $month ?>' class='calenderSales'></div>
<?php endforeach; ?> 
```

`fullCalendar`应该通过设置特定月份`id='calenderSalesMonth_*'`并且它不起作用，我收到一个错误：

`Uncaught TypeError: Cannot call method 'split' of undefined`

代码：

```
$('.calenderSales').fullCalendar({
       editable: false,
       events:  { url: 'calender-events.php' },
       firstDay:1,
       month: $(this).attr("id").split("_")[1],
       year: 2013
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:42:14.367

用户`month`全局变量，然后设置它。

```
var month = $('.calenderSales').attr("id").split("_")[1];

$('.calenderSales').fullCalendar({
       editable: false,
       events:  { url: 'calender-events.php' },
       firstDay:1,
       month: month,
       year: 2013
}); 
```

**或者**

使用`.prop()`它的`.attr()`替代品。

**或者**

尝试将代码包装在里面`$(window).load(function());`

# c++ - Maya MFnRotateManip 视图旋转手柄

> ID：15586274
> 
> 赞同：0
> 
> 时间：2013-03-23T11:32:48.040
> 
> 标签：c++, plugins, maya

MFnRotateManip 的视图旋转环（外部）似乎无法正常工作。即使在[rotateManip 示例](http://download.autodesk.com/us/maya/2011help/API/rotate_manip_8cpp-example.html)中，如果对象的初始旋转为 0,0,0，它也只会产生正确的旋转。否则旋转轴不与视图轴对齐。我错过了什么？

使用玛雅 2011。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:52:21.327

这是一个错误，它在 Maya 2013 中仍然不起作用。MFnRotateManip 仅适用于 setRotateMode(MFnRotateManip::kWorldSpace) 和 setInitialRotation(MEulerRotation())。

如果 Autodesk 的任何人读到：修复将非常简单，只需将增量旋转从外旋转环转换到对象坐标系，然后再将其应用于输出值和内环。

# java - Shiro中的不同表单登录

> ID：15586276
> 
> 赞同：1
> 
> 时间：2013-03-23T11:33:01.017
> 
> 标签：java, security, shiro

在“Shiro 中的多个登录 url”下提出了同样的问题，但没有得到回答。

我正在尝试为 apache shiro 提供两个不同的登录页面 1）对于移动设备（小屏幕，有限的 javascript 不同主题）2）对于标准设备

我能怎么做？

现在一次只有一个 url 有效。

shiro.loginUrl = ...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:11:34.027

您需要扩展`FormAuthenticationFilter`以了解多个登录 url。它看起来像这样：

```
public class CustomAuthenticationFilter extends FormAuthenticationFilter {
    private Map<String, String> loginUrlByUserAgent = new HashMap<String, String>();

    public void setLoginUrls(final Map<String, String> loginUrlByUserAgent) {
        this.loginUrlByUserAgent = loginUrlByUserAgent;
    }

    protected void redirectToLogin(final ServletRequest request, final ServletResponse response) throws IOException {
        final String loginUrl = getLoginUrl(request);
        WebUtils.issueRedirect(request, response, loginUrl);
    }

    private String getLoginUrl(final ServletRequest request) {
        // check user agent
        final String userAgent = getUserAgent(request);
        // and return appropriate login url
        return userAgent != null && loginUrlByUserAgent.containsKey(userAgent) ?
                loginUrlByUserAgent.get(userAgent) :
                getLoginUrl();
    }

    private String getUserAgent(final ServletRequest request) {
        // get "User-Agent" header
    }
} 
```

然后你只需要用你新创建的替换 authc 过滤器。

# c# - 如何将我的子节点分组到相应的父节点？

> ID：15586277
> 
> 赞同：3
> 
> 时间：2013-03-23T11:33:00.910
> 
> 标签：c#, asp.net

我是 C#/ASP.Net 的新手。我现在有一个项目，涉及从两个 SQL 表绑定一棵树。我做了一些家庭作业..我能够绑定我的树。首先是我的桌子。我的目标是将我的孩子分组到其相应的父母。但是发生的事情是孩子进入了所有的父母。我知道我快到了，但我被卡住了。:(

```
tblCategory(parentnodes)
categoryID(varchar(20))
Category(varchar(50))
active(char(1))

tblDocuments(childnodes)
id(int)
description(varchar(100))
title(varchar(20))
categoryid(varchar(20))

tblcategory.categoryid = tbldocuments.categoryid 
```

这是我的代码。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            //bindtree
            DataTable dtCategoryNodes = new DataTable();
            dtCategoryNodes = content.dtCategoryNodes();
            dtCategoryNodes.AcceptChanges();

            DataTable dtNodes = new DataTable();
            dtNodes = content.GetNodes();
            dtNodes.AcceptChanges();

            TreeNode CategoryNode = null;
            for (int i = 0; i < dtCategoryNodes.Rows.Count; i++)

            {
                string categoryid = dtCategoryNodes.Rows[i]["CategoryID"].ToString();

                CategoryNode = new TreeNode(dtCategoryNodes.Rows[i]
                "CATEGORY"].ToString());

                CategoryNode.Collapse();
                for (int j = 0; j < dtNodes.Rows.Count; j++)
                {   string parentid = dtNodes.Rows[j]["parentid"].ToString();

                    TreeNode childNode = new TreeNode(dtNodes.Rows[j]["TITLE"].ToString());
                    CategoryNode.ChildNodes.Add(childNode);

                }        

                tvContents.Nodes.Add(CategoryNode);
                tvContents.DataBind();
              }
            }
          } 
```

但我在这里遇到了问题。这就是我的树发生的事情。

```
a. Crift Items 
 a.1Configuring DCOM 

b.Internal Refresher Trainings 
 b.1Configuring DCOM 

c. Product/Process Update 
 c.1 Configuring DCOM 

d.Promotions/Discounts 
 d.1 Configuring DCOM 

e.QA Update 
 e.1 Configuring DCOM 
```

下面是我的数据 tbldocument id Title File CategoryID 1 配置 DCOM DCOM.doc PRODUPDT

```
tblCategory
CategoryID  Category                    active
CRIFT   Crift Items                 Y
IRTRAIN Internal Refresher Trainings    Y
PRODUPDT    Product/Process Update          Y
PROMODISCS  Promotions/Discounts            Y
QAUPDT  QA Update                   Y 
```

感谢所有的意见和建议！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:24:13.143

代替

```
for (int j = 0; j < dtNodes.Rows.Count; j++)
{   string parentid = dtNodes.Rows[j]["parentid"].ToString();
    TreeNode childNode = new TreeNode(dtNodes.Rows[j]["TITLE"].ToString());
    CategoryNode.ChildNodes.Add(childNode);
} 
```

和

```
foreach(DataRow drChild in dtNodes.Select("CategoryID=" + categoryid))
{   
    TreeNode childNode = new TreeNode(drChild["TITLE"].ToString());
    CategoryNode.ChildNodes.Add(childNode);
} 
```

# java - 远程控制运行Java SE程序

> ID：15586278
> 
> 赞同：3
> 
> 时间：2013-03-23T11:33:29.970
> 
> 标签：java, remote-access

我编写了 Java SE 程序，它处理了非常庞大的矩阵数据集（10^12 个矩阵）。我通过迭代器生成它们并将特殊的（满足某些标准）保存到 Java 堆或数据库中。所以，我知道这需要很长时间（可能需要几天）。为了使用所有这些东西，我决定在不在我公寓的计算机上运行该程序，并且可以访问互联网。我想控制程序的运行过程（对我来说很重要的是要知道程序一切正常吗？程序还在运行吗？）

我的问题是如何控制我的程序仍在运行（为此我想在我的公寓和互联网上使用计算机）？

也许我的程序应该定期（通过 Java IO API）向网站（Google Docs 等）发布消息。提前感谢您的所有回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:39:09.613

`JPDA`在启用的情况下运行您的应用程序。通过这种方式，您可以远程连接它、检查线程等。

`JPDA`还有许多其他优点，例如热代码替换。

[JPDA 的规范在](http://docs.oracle.com/javase/7/docs/technotes/guides/jpda/index.html)这里，最重要的是您必须在启动时传递一些 JVM 选项，它将打开一个端口，您可以使用 Eclipse 或 NetBeans 从网络上的任何地方附加它。您必须确保打开的端口可以通过防火墙（本地和网络）访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T11:36:19.277

首先，您应该尝试远程桌面连接。[这是 Windows 7 远程桌面的 MS 文档的链接](http://windows.microsoft.com/en-us/windows7/connect-to-another-computer-using-remote-desktop-connection)。

如果远程计算机是 Linux/Unix，而您的程序是控制台应用程序，那么[ssh+screen](https://www.google.com/search?q=ssh%20screen%20howto)是旧的、真实且经过测试的解决方案，可以让交互式控制台程序运行并从任何地方访问，同时您在现实世界中嬉戏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T11:55:51.673

我会选择 VisualVM 和远程 JMX。设置服务器框以允许远程 jmx 连接。使用 VisualVM，您将能够连接到 JVM 并检查活动。

您还可以设置 MBean 以保留正在运行的进程的统计信息。您还可以使用 VisualVM 进行检查。

# python - 通过 Kannel 发送 SMS 时如何消除“消息”中的空格

> ID：15586290
> 
> 赞同：0
> 
> 时间：2013-03-23T11:35:06.353
> 
> 标签：python, urllib, kannel

我已经使用 USB 调制解调器在 Ubuntu 中设置了 Kannel，我可以使用如下所示的 URL 通过浏览器发送 SMS

```
localhost:13013/cgi-bin/sendsms?username=kannel&password=kannel&to=+254781923855&text='Kid got swag' 
```

在 python 中，我有以下脚本，仅当要发送的消息没有空格时才有效。

```
import urllib.request
def send_sms(mobile_no, message):
    url="http://%s:%d/cgi-bin/sendsms?username=%s&password=%s&to=%s&text=%s" \
    % ('localhost', 13013, 'kannel', 'kannel', str(mobile_no), message)
    f = urllib.request.urlopen(url)
    print("sms sent") 
```

如果我在消息中调用没有空格的函数**，**它会起作用并发送消息。

```
sms.send_sms('+254781923855', 'kid_got_swag') 
```

如果我在消息中有空格，则会失败并显示以下错误

```
sms.send_sms('+254781923855', 'kid got swag')

Traceback (most recent call last):
File "/home/lukik/workspace/projx/src/short_message.py", line 24, in <module>
sms.send_sms('+254781923855', 'kid got swag')
File "/home/lukik/workspace/projx/src/short_message.py", line 18, in send_sms
f = urllib.request.urlopen(url)
File "/usr/lib/python3.2/urllib/request.py", line 139, in urlopen
return opener.open(url, data, timeout)
File "/usr/lib/python3.2/urllib/request.py", line 376, in open
response = meth(req, response)
File "/usr/lib/python3.2/urllib/request.py", line 488, in http_response
'http', request, response, code, msg, hdrs)
File "/usr/lib/python3.2/urllib/request.py", line 414, in error
return self._call_chain(*args)
File "/usr/lib/python3.2/urllib/request.py", line 348, in _call_chain
result = func(*args)
File "/usr/lib/python3.2/urllib/request.py", line 496, in http_error_default
raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 400: Bad Request 
```

我尝试过调用 urllib 的其他变体，但它们都失败了，因为消息中的空格......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:51:42.700

在您通过浏览器发送的请求中，消息在引号内 -

```
&text='Kid got swag' 
```

在您的要求中尝试 -

```
url="http://%s:%d/cgi-bin/sendsms?username=%s&password=%s&to=%s&text='%s'" \
    % ('localhost', 13013, 'kannel', 'kannel', str(mobile_no), message) 
```

注意 . 处的单引号`&text='%s'`。

PS：我建议对这样的请求使用[请求](http://docs.python-requests.org/en/latest/user/quickstart/#make-a-request)。你可以这样更好地构建你的网址，就像这样 -

```
>>> payload = {'key1': 'value1', 'key2': 'value2'}
>>> r = requests.get("http://httpbin.org/get", params=payload) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T12:40:53.557

URL 不允许包含空格。当您在浏览器中尝试时，浏览器会在发出请求之前对 URL 进行正确编码。在您的程序中，您需要对 URL 进行编码。幸运的是`urllib`，它内置了处理细节的功能。

[http://docs.python.org/3.3/library/urllib.parse.html#url-quoting](http://docs.python.org/3.3/library/urllib.parse.html#url-quoting)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:44:34.853

您需要对作为参数传递的值进行[URL 编码](http://en.wikipedia.org/wiki/Percent-encoding)，否则会构造损坏的 URL，这就是请求失败的原因。我相信[urllib.parse.urlencode 可以满足](http://docs.python.org/3.3/library/urllib.parse.html#urllib.parse.urlencode)您的需求。

# java - 在RelativeLayout android中使用java动态更改TextView的位置

> ID：15586293
> 
> 赞同：3
> 
> 时间：2013-03-23T11:35:45.540
> 
> 标签：java, android, layout, android-relativelayout

我有RelativeLayout，并且在RelativeLayout中有一个textview，我正在从像ALIGN_PARENT_LEFT，ALIGN_PARENT_TOP这样的服务器获取位置，基于该值我想改变textview的位置......

我的 xml 文件是....

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/white"
android:id="@+id/relativelayout"
android:orientation="vertical" >

<TextView
    android:id="@+id/share_text"
    android:layout_width="100dp"
    android:layout_height="60dp"
    android:gravity="center"
    android:background="@drawable/share_text" />

</RelativeLayout> 
```

我从[Set position of an EditText and TextView in a RelativeLayout 以编程](https://stackoverflow.com/questions/9094421/set-position-of-an-edittext-and-textview-in-a-relativelayout-programatically)方式获得了知识来改变位置，但无法帮助我

任何机构都可以帮助我如何动态更改 textview 的位置...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T11:42:34.960

试试这样

```
RelativeLayout.LayoutParams params1 = new 
   RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT); 

params1.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
yourTextview.setLayoutParams(params1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T11:40:02.500

关于什么

```
((RelativeLayout.LayoutParams)yourView.getLayoutParams()).alignParentTop =
     serverResponse.equals("ALIGN_PARENT_TOP"); 
```

?

当然，您必须对服务器响应等进行一些解析...

# heroku - 如何使用 Scala 2.10 在 heroku 上运行喷雾服务器？

> ID：15586296
> 
> 赞同：3
> 
> 时间：2013-03-23T11:36:08.607
> 
> 标签：heroku, sbt, scala-2.10, spray

我创建了一个带有简单 REST 服务的 Spray 应用程序。我遵循了[heroku 提供的说明](https://devcenter.heroku.com/articles/scala)的变体。变化：

*   用过的`sbt.version=0.12.0`
*   用于`Build.scala`代替 build.sbt
*   用喷雾代替finagle

长话短说，我已经让它在本地运行，没有什么问题，也使用工头。然后我尝试推送到 heroku，但由于 503 引起的各种未解决的依赖关系，构建失败了，例如：

```
 http://s3pository.heroku.com/maven-central/net/java/dev/jna/jna/3.2.3/jna-3.2.3.jar

            ::::::::::::::::::::::::::::::::::::::::::::::

            ::              FAILED DOWNLOADS            ::

            :: ^ see resolution messages for details  ^ ::

            ::::::::::::::::::::::::::::::::::::::::::::::

            :: net.java.dev.jna#jna;3.2.3!jna.jar

            ::::::::::::::::::::::::::::::::::::::::::::::

   :::: ERRORS
    SERVER ERROR: Service Unavailable url=http://s3pository.heroku.com/maven-central/net/java/dev/jna/jna/3.2.3/jna-3.2.3.pom.sha1 
```

这是什么原因，我该怎么做才能让它运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:11:37.940

这是 Heroku 的问题。知道这不是你的错的症状：

*   像 jna 这样的琐碎依赖项无法间歇性下载
*   依赖解决非常慢

出去做一些有趣的事情，或者尝试不同的 PaaS 云，然后在几个小时后重试。到那时，事情很可能会恢复正常运行。

# oop - 封装：允许访问除当前接收者对象之外的任何字段

> ID：15586303
> 
> 赞同：2
> 
> 时间：2013-03-23T11:36:41.640
> 
> 标签：oop, coding-style, smalltalk

一些面向对象的语言（例如 Smalltalk）不允许访问除当前接收器对象之外的任何字段。例如：像 this.good 或 this.like:=false 这样的表达式是合法的，但像 x.like 或 this.like.good 这样的表达式是非法的。

我不明白的是：为什么？

这种限制的理由是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T12:12:09.713

这是OOP的核心思想之一，称为封装。除了对象本身之外，没有人知道它的内部状态。

这提供了更好的隔离，因为内部状态可以随着时间的推移而改变，如果你直接访问它——你就完蛋了。此外，如果有人可以直接弄乱您的对象的状态，您永远不知道在运行时是否会发生某些您不期望的变化。

一般来说，定义访问器并不难，最终你会得到: `x like`, `x like: false`smalltalk 和`x.like()`,`x.setLike(false)`类 C 语言。Ruby 和 Scala 允许您使用空格定义方法并在不带括号的情况下调用它们，因此它们看起来就像字段访问：`x.like`, `x.like = false`。如果您被迫编写访问器，您不会有很大的开销，但是如果您允许程序员对对象状态做任何他们想做的事情，那么您的代码就会变得混乱，这实际上是一个大问题。

要了解如果您不使用它可能会发生的所有坏事需要一些时间。当您开始开发时，您不明白如果将字段公开会发生什么。这就是为什么 C++ 是一门糟糕的语言，因为对于初学者来说，处理直接字段访问更容易。

此外，如果您考虑直接访问字段，那么 OOP 的整个想法就会被打破。因为您可以像在过程语言中一样使用您拥有的任何数据，而类则只扮演定义数据结构的分组功能的角色。

[您可以在wikipedia](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)上阅读有关封装的更多信息。还有一篇关于[什么是面向对象编程：一种关键方法的非常有趣的帖子](https://www.udemy.com/blog/object-oriented-programming-a-critical-approach/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-22T05:24:35.247

阿黛尔·戈德堡（Adele Goldberg）用“问，不要碰”的格言形象地表达了这一点。

# c# - Asp.Net MVC 4 API：在 IE8 中下载 docx 失败

> ID：15586309
> 
> 赞同：6
> 
> 时间：2013-03-23T11:37:38.257
> 
> 标签：c#, asp.net-mvc-4

我将文档存储在数据库中，并有一个用于下载文档的 api。

docx 和 xlsx 的下载在 IE9、Chrome 和 FF 中工作正常，但在真正的 IE8 中失败。（IE8 模式下的 IE 9 也可以）

我收到的错误消息如下：

> 无法从idler2 下载393。
> 
> 无法打开此 Internet 站点。请求的站点不可用或找不到。请稍后再试。

使用以下响应头：HTTP/1.1 200 OK Cache-Control: no-cache Pragma: no-cache

```
Content-Length: 10255
Content-Type: application/octet-stream
Expires: -1
Server: Microsoft-IIS/7.5
Content-Disposition: attachment; filename=document.docx
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Sat, 23 Mar 2013 11:30:41 GMT 
```

这是我的api方法：

```
public HttpResponseMessage GetDocumentContent(int id)
{
    Document document = Repository.StorageFor<Client>().GetDocument(id);
    HttpResponseMessage response = Request.CreateResponse(System.Net.HttpStatusCode.OK);
    response.Content = new ByteArrayContent(document.GetBuffer());
    response.Content.Headers.ContentLength = document.GetBuffer().Length;
    response.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment")
    {
        //FileName = document.GetFileName(),
        FileName = "document.docx",
        DispositionType = "attachment"
    };
    response.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");            
    return response;
} 
```

我在内容配置和内容标题上尝试了很多变体，但没有运气..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T16:42:33.150

我假设您在 SSL 下会遇到这种情况。如果是这样，那么这是一个[已知问题](http://support.microsoft.com/kb/316431)。本文讨论 Office 文档，但此问题适用于所有文件类型。

那篇文章的解决方案是删除**no-cache**标头，但还有更多内容。当 IE8 通过 SSL 与网站通信时，IE8 会强制执行任何无缓存请求。如果存在一个或多个标头，IE8 不会缓存该文件。因此它无法打开文件。所有这些都是特定于 IE5 到 IE8 的。

在 MVC Web API 中，它实际上又迈出了一步。由于您正在创建一个新的 HttpResponseMessage，因此您还必须在消息的标题上创建一个 CacheControlHeaderValue。您不必设置任何标头属性，只需实例化一个新的。标题将默认为所需的，因此您不必更改属性。

```
public HttpResponseMessage GetDocumentContent(int id)
{
    Document document = Repository.StorageFor<Client>().GetDocument(id);
    HttpResponseMessage response = Request.CreateResponse(System.Net.HttpStatusCode.OK);
    response.Headers.CacheControl = new CacheControlHeaderValue(); // REQUIRED     
    response.Content = new ByteArrayContent(document.GetBuffer());
    response.Content.Headers.ContentLength = document.GetBuffer().Length;
    response.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment")
    {
        FileName = "document.docx"
    };
    response.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
    return response;
} 
```

我有确切的问题，但这解决了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:27:40.670

到目前为止，我发现的唯一解决方法是将文件存储在临时文件夹中并返回下载 url。然后（javascript）客户端可以打开一个新窗口。

不是很好，但似乎 MVC 4 API 带来了一些限制。

# iphone - IOS无法播放视频

> ID：15586311
> 
> 赞同：0
> 
> 时间：2013-03-23T11:37:46.060
> 
> 标签：iphone, ios, objective-c

我正在下载这样的视频..

```
-(IBAction)buttonPress:(id)sender{

  movieURL = [NSURL URLWithString:@"https://www.dropbox.com/s/Screen%20Capture2013-01-31%2014_21_22.mov"];

    NSURLRequest *theRequest = [NSURLRequest requestWithURL:movieURL cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60];

    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self startImmediately:YES];

    if( connection )
    {
         receivedData = [[NSMutableData alloc] initWithLength:0];
    }
    else
    {
        //[delegate ConnectionFailed];
    }
}

- (void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    [receivedData setLength:0];
}

- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [receivedData appendData:data];
    NSLog(@"dee- %@",receivedData);
}

- (void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
  //  [connection release];
}

- (NSCachedURLResponse *) connection:(NSURLConnection *)connection willCacheResponse:(NSCachedURLResponse *)cachedResponse {
    return nil;
}

- (void) connectionDidFinishLoading:(NSURLConnection *)connection {
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
   // [connection release];
    [self movieReceived];
} 
```

但我无法播放此视频。请帮我保存和播放这个视频。

我已经尝试过了，但没有用。\

```
-(void)movieReceived{
MPMoviePlayerViewController* tmpMoviePlayViewController=[[MPMoviePlayerViewController alloc] initWithContentURL:movieURL];

    if (tmpMoviePlayViewController) {

        tmpMoviePlayViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;

        [self presentViewController:tmpMoviePlayViewController animated:YES completion:nil];

        tmpMoviePlayViewController.moviePlayer.movieSourceType = MPMovieSourceTypeFile;

        [[NSNotificationCenter defaultCenter] addObserver:self

                                                 selector:@selector(myMovieViewFinishedCallback:)

                                                     name:MPMoviePlayerPlaybackDidFinishNotification

                                                   object:tmpMoviePlayViewController];

        [tmpMoviePlayViewController.moviePlayer play];

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:55:14.993

使用下面的代码

```
-(void)movieReceived{
{
       NSString *strVideoUrl = @"abc.com/xyz" // your VideoUrl in String
       strVideoUrl = [strVideoUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
       NSURL *url = [NSURL URLWithString:strVideoUrl];
       moviePlayer=[[MPMoviePlayerController alloc] initWithContentURL:url];

       [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackDidFinish:) name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayer];
       [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackDonePressed:) name:MPMoviePlayerDidExitFullscreenNotification object:moviePlayer];

       moviePlayer.controlStyle=MPMovieControlStyleDefault;
       //moviePlayer.shouldAutoplay=NO;
       [moviePlayer play];
       [self.view addSubview:moviePlayer.view];
       [moviePlayer setFullscreen:YES animated:YES];
}

- (void) moviePlayBackDonePressed:(NSNotification*)notification
{
       [moviePlayer stop];
       [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerDidExitFullscreenNotification object:moviePlayer];

       if ([moviePlayer respondsToSelector:@selector(setFullscreen:animated:)])
       {
              [moviePlayer.view removeFromSuperview];
       }
       moviePlayer=nil;
}

- (void) moviePlayBackDidFinish:(NSNotification*)notification
{
      [moviePlayer stop];
      [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayer];

     if ([moviePlayer respondsToSelector:@selector(setFullscreen:animated:)])
     {
          [moviePlayer.view removeFromSuperview];
     }
} 
```

像这样使用你的问题会解决的~~~~~~祝你好运~~~~~~

# php - 安装 PECL Oauth MAMP OSX 10.8

> ID：15586312
> 
> 赞同：0
> 
> 时间：2013-03-23T11:37:50.877
> 
> 标签：php, oauth, mamp

我正在尝试使用 MAMP 2.1.3 版在 OSX 10.8 上安装 PECL Oauth 扩展。这个版本的 MAMP 有 PHP 5.4.10 和 5.2.17，我已经将这些东西添加到 5.2.17 的包含文件夹并运行 ./configure。虽然当我去跑步

```
cd /Applications/MAMP/bin/php/php5.2.17/bin; ./pecl install oauth 
```

我明白了

```
downloading oauth-1.2.3.tgz ...
Could not download from "http://pecl.php.net/get/oauth-1.2.3.tgz", cannot download "pecl/oauth" (could not open /tmp/pear/install/oauth-1.2.3.tgz for writing)
Error: cannot download "pecl/oauth"
Download failed
install failed 
```

现在我不能 100% 确定 MAMP 使用的是 5.2.17 版本的 PHP，我已经在 apache httpd.conf 文件中对其进行了更改，当我查看 MAMP 中的 phpinfo 页面时，它显示为使用版本 5.2.17 所以我不认为这是问题所在。

# python - 执行二进制搜索以猜测一个随机数，但猜测的数量不匹配

> ID：15586314
> 
> 赞同：1
> 
> 时间：2013-03-23T11:38:08.440
> 
> 标签：python, search, binary

我写了一个简单的猜谜游戏和猜猜它的方法......

```
 from gasp import *

    number = random_between(1, 1000)
    guesses = 0

    while True:
        guess = input("Guess the number between 1 and 1000: ")
        guesses += 1
        if guess > number:
            print "Too high!"
        elif guess < number:
            print "Too low!"
        else:
            print "\n\nCongratulations, you got it in %d guesses!\n\n" % guesses
            break 
```

现在根据问题，如果使用正确的策略，最大猜测数应该等于 11。我使用二进制搜索来获得正确的数字，但猜测的数量永远不会超过 10。为了检查我做了以下它产生了一个非终止循环。

```
 from gasp import *

    guesses = 0
    big = 1000
    small = 1
    while guesses != 11
        number = random_between(1, 1000)
        while True:
            guess = (big + small) / 2
            guesses += 1
            if guess > number:
                print "Too high!"
                big = guess
            elif guess < number:
                print "Too low!"
                small = guess
            else:
                print "\n\nCongratulations, you got it in %d guesses!\n\n" % guesses
                break 
```

那么谁是对的，我犯了一些错误，或者所需的猜测次数不能超过 10 次，并且问题是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:44:39.957

```
>>> from math import log, ceil
>>> ceil(log(1000, 2))
10.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T11:43:51.890

让我们来看看：

```
A number between 1 and  1 requires 1 guess
A number between 1 and  3 requires 2 guesses at most
A number between 1 and  7 requires 3 guesses at most
A number between 1 and 15 requires 4 guesses at most
A number between 1 and 31 requires 5 guesses at most
... 
```

换句话说，`n`猜测足以涵盖从`1`到的范围`(2**n)-1`。

因为`n=10`，这个范围是从`1`到`1023`。因为`1023 >= 1000`，你关于十个猜测的结论是正确的。

也就是说，你用来验证这个结论的代码是错误的，因为它无法重新初始化`big`，`small`并且`guesses`每当你移动到下一个数字时。此外，您可以只测试 1 到 1000 之间的每个数字，并使用有限运行时间的确定性算法，而不是随机生成数字。

# unix - 将参数传递给 execl

> ID：15586316
> 
> 赞同：0
> 
> 时间：2013-03-23T11:38:09.823
> 
> 标签：unix, posix

我想像在 Unix 终端中一样创建自己的管道（只是为了练习）。它应该使应用程序在这样的引号中执行：

> 管道 "ls -l" "grep" ....

我知道我应该使用 fork()、execl() (exec*) 和 api 来重定向标准输入和标准输出。但是 execl 是否有任何替代方法可以仅使用一个包含应用程序路径和参数的参数来执行带有参数的应用程序？有没有办法不手动解析“ls -l”，而是将它作为一个参数传递给 execl？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T12:00:19.423

如果您只有一个命令行而不是参数向量，请让 shell 为您进行解析：

```
execl("/bin/sh", "sh", "-c", the_command_line, NULL); 
```

当然，不要让不受信任的远程用户输入此命令行。但是，如果您开始处理不受信任的远程用户输入，您应该尝试按照正常用法而`exec[vl]`不是命令行来安排将实际隔离参数列表传递给目标应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T11:58:08.223

`execl()`实际上，只有在编译时知道命令的参数数量时才能真正使用。在 shell 中，您通常会使用`execv()`or`execvp()`代替；这些可以处理要执行的命令的任意数量的参数。理论上，您`execv()`在给出命令的路径名时使用，而在没有给出命令的路径名时使用`execvp()`（它对命令进行基于 PATH 的搜索）。但是，`execvp()`处理“给定路径”的情况，所以只需使用`execvp()`.

所以，对于你的`pipeline`命令，你最终会得到一个孩子，使用相当于：

```
char *args_1[] = { "ls", "-l", 0 };
execvp(args_1[0], args_1); 
```

另一个孩子最终将使用相当于：

```
char *args_2[] = { "grep", "pattern", 0 };
execvp(args_2[0], args_2); 
```

当然，除了您将从命令行参数创建这些字符串，而不是通过初始化创建，如图所示。请注意，这`grep`需要一个模式来搜索。

你还有管道问题需要解决。确保您关闭了足够多的管道文件描述符。当您`dup()`或`dup2()`管道连接到标准输入或标准输出时，您将关闭函数中的两个文件描述符`pipe()`。

# ajax - Javascript：如何在 ajax“成功”函数中创建变量？

> ID：15586321
> 
> 赞同：2
> 
> 时间：2013-03-23T11:38:28.073
> 
> 标签：ajax, json, variables

```
$(document).ready(function() {
          $.ajax({
              url: 'objects.php',
              type:'GET',
              dataType: 'json',
              success: function(response)
               var variable = [some_array];

      //how to create an variable containing json array and access this variable outside?
                }
           });
      }); alert(variable); 
```

为什么这不起作用？我闻到一些范围问题...

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:45:55.697

首先，让我说在回调中更改全局变量**不是要走的路**。相反，您应该从回调中触发所有副作用。如果您避免回调通过全局状态相互影响，您会发现您的代码**更**容易推理和调试。

也就是说，如果您希望两个函数“共享”一个变量，只需在两者都可以看到的地方声明它。

```
var x = 0; // Declaring this in an outer scope makes f1 and f2 share it.

function f1() {
    x = 1
}

function f2() {
    console.log(x)
}

f1();
f2(); // Prints '1' 
```

造成这种行为的特性是[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)。

# php - 连接到客户端桌面应用程序的网站

> ID：15586322
> 
> 赞同：2
> 
> 时间：2013-03-23T11:38:28.257
> 
> 标签：php, javascript, vb.net, tcp, web

我有一个用**VB.net**编写的应用程序，它在客户端 pc 上运行。我也有一个主要用 javascript、http 和 php 编写的网站。 **我想做的事情是将网站连接到应用程序**，这样当按下某个按钮时，它会连接到客户端应用程序并引发一个事件。

我通过在客户端应用程序的后台运行 TCP 套接字服务器尝试了诸如**TCP 套接字通信之类的方法。**我可以通过来自另一个 vb.net 应用程序的客户端连接来连接到服务器，但是每当我尝试通过 PHP 连接时，它都会失败。（我只尝试过 PHP，因为在这种情况下服务器端脚本似乎更有意义）

我尝试过的另一种方法是在我的桌面应用程序的后台运行一个**HTTP 服务器**，然后让一个 PHP 脚本连接到它，这也失败了。

作为最后的手段，我一直在考虑的一件事是简单地在网络服务器上放置一个文本文件，并在给定参数后写入一个 PHP 脚本，然后让客户端应用程序每隔几秒钟读取一次文件。但这对于大量数据来说不是很有效，不是吗？

这样做的正确方法是什么？如果您对我一直在使用的代码有任何疑问，请随时提问。

如果你没有得到我模糊的解释，试试这张图片：http: [//i.imgur.com/8njxVFj.png](http://i.imgur.com/8njxVFj.png)

**提前致谢。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:53:53.830

为了让您的数据更有条理，我建议您将数据存储在数据库服务器上，例如 mysql（免费）。

# c# - System.Web.HttpContext.Current 在请求之间是静态的

> ID：15586327
> 
> 赞同：7
> 
> 时间：2013-03-23T11:38:52.430
> 
> 标签：c#, asp.net, request, static-members

在我正在使用的 Web 应用程序中`System.Web.HttpContext.Current`，它代表当前的命中上下文，我想知道它是如何从任何地方访问的，直到我注意到它是一个`static`成员！虽然它是一个静态成员，但如果几乎同时收到两个请求，它如何保持其值。像下面这样：

```
#Req1----> | set the value of the static field to req1
#Req2----> | set the value of the static field to req2
#Req1      | use that static its supposed to be req2 while its req1 
```

我是否错过了某些东西，或者其中有什么技巧或什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T12:59:55.447

这是一个非常聪明的问题！

`HttpContext.Current`被实现为线程局部变量。实际上，它是使用实现的，`LogicalCallContext`但它的行为类似于线程本地。

可以这样想：

```
[ThreadLocal]
public static HttpContext Current; 
```

是的，这意味着只有主请求线程可以访问它。在您启动的其他线程上它将为空。

# javascript - 如何在javascript中解压缩gzip xhr响应

> ID：15586328
> 
> 赞同：0
> 
> 时间：2013-03-23T11:38:58.117
> 
> 标签：javascript, ajax, gzip, compression

我有一个来自 web 请求的 gzip 响应，我需要在 JavaScript 中解压缩（实际上，在 AJAX 调用的成功函数中 - 我的代码在无头浏览器中运行，并且没有提供内置的 gzip 处理支持通过完整的浏览器）。我一直在寻找答案，但我有点难过。

理想情况下，我想要的代码是：

```
var my_decompressed_string = someGzipDecompressor(xhr.responseText); 
```

我发现，我认为是[Gzip 的 JavaScript 实现](https://stackoverflow.com/questions/294297/javascript-implementation-of-gzip)的答案，但这可能不是我希望的答案。尝试通过以下代码片段使用提到的 jsxcompressor 库时

```
var my_decompressed_string = JXG.decompress(xhr.responseText); 
```

……我明白了……

```
TypeError: 'undefined' is not an object (evaluating '(new JXG.Util.Unzip(JXG.Util.Base64.decodeAsArray(str))).unzip()[0][0]') 
```

更详细地查看该函数，如果我分解 decompress() 函数正在执行的代码，我会得到我认为内部部分返回的好东西......

```
JXG.Util.Base64.decodeAsArray(xhr.responseText) 
```

...但`undefined`返回外部...

```
JXG.Util.Unzip( ... ) 
```

所以，这当然可能是一个死胡同，但如果有人知道我原来的问题应该是可能的，或者对 jsxcompressor.js 有更好的运气，我会很感激。

当然，我可以强制我的 AJAX 请求返回一个“放气”响应，但是页面的大小（我无法控制）非常大，请求 gzip 是为了加快我的页面加载时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-04T19:56:01.290

jsxcompressor.js 需要base64编码的字符串来解压，你应该使用：

```
 var my_decompressed_string = JXG.decompress(btoa(xhr.responseText)); 
```

如果您的无头浏览器不支持 btoa，那么您应该使用 base64 编码库，如果您的节点或 iojs 有很多 base64 npm 包。

# css - 将 -webkit- 或 -moz- 转换为 -o- 和 -ms-

> ID：15586330
> 
> 赞同：0
> 
> 时间：2013-03-23T11:39:12.540
> 
> 标签：css, webkit, background-image, gradient, linear-gradients

是否有任何网站可以将供应商特定的形式 -webkit- 或 -moz- 转换为 -o- 和 -ms- ？这是代码：

```
background-image: -webkit-gradient(linear,0% 0%,0% 70%,from(#6a6a6a),to(#222));
background-image: -moz-linear-gradient(0% 22px 90deg,#222,#6a6a6a); 
```

我应该修改什么来为opera和internet explorer制作这个代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:49:31.917

列出的在线工具有助于学习制作 css 渐变的不同格式：第一个站点为您提供了完整的 css 注释，详细说明了该行所针对的每个浏览器的版本。您复制并粘贴代码，然后根据需要对其进行编辑。

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

[http://gradients.glrzad.com/](http://gradients.glrzad.com/)

# mysql - 并发数据库连接 - 如何计算

> ID：15586332
> 
> 赞同：0
> 
> 时间：2013-03-23T11:39:42.260
> 
> 标签：mysql, concurrency, database-connection, connection-pooling, xml-rpc

我们的 mysql 主机有并发数据库连接的限制。由于扩展该限制相当昂贵，因此出现了以下问题：

信息：我有一个网络应用程序（由外部编码人员开发 - 以防您可能想知道这个问题）。

Web 应用程序分布并安装在许多服务器上（每个用户都将其安装在他们的 PC 上）。这些卫星正在将数据发送到 mysql 数据库中。现在卫星直接发布到数据库中。为了提高安全性和错误处理，我希望卫星发布到 XML-rpc（wordpress api），然后进一步发布到数据库中。

问题：这样的 api 会减少并发连接数吗？（现在每个卫星都直接连接。就像 1 个用户 = 1 个连接）

如果 10 颗卫星发布到一个文件，该文件然后处理数据并将它们发布到数据库中 -> 这是一个连接吗？（或处理了与不同数据集一样多的连接。）

如果 api 有点节流怎么办，因为一次只有发布。这会导致只有一个连接吗？

任何指针都非常感谢！先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:52:39.817

如果您想改进与数据库的并发连接（因为事实上，创建与数据库的连接是“昂贵的”）。您应该考虑使用`ConnectionPool`（ Java[示例](https://www.snaq.net/java/DBPool/)）。

**并发数据库连接数如何计算？**

[![并发](../Images/ae7b89f886857abb0fd25dab023eab24.png)](https://i.stack.imgur.com/eD0Ux.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/nsullipd.twc.png)）]

*一`connectionless`台服务器*

*   使用无连接的 IPC API（例如，无连接的数据报套接字）
*   与并发客户端的会话可以交错。

*一`connection-oriented`台服务器*

*   使用面向连接的 IPC API（例如流模式套接字）
*   除非服务器是线程化的，否则与并发客户端的会话只能是顺序的。

> （[客户端-服务器分布式计算范式](https://cs.gmu.edu/~yhwang1/SWE622/Slides/ClientServer2.ppt)，不适用）

**设计和性能问题**

*   数据库连接可能成为瓶颈。这可以通过使用连接池来解决。

*   编译后的 SQL 语句可以通过使用 PreparedStatements 而不是语句来重复使用。这些语句可以参数化。

*   连接通常不是由 servlet 直接创建，而是使用工厂 (DataSource) 创建或从命名服务 (JNDI) 获得。

*   释放连接（关闭它们或将它们返回到连接池）很重要。这应该在[finally](https://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)子句中完成（以便在任何情况下都完成）。请注意，close() 也会引发异常！

    ```
     try
        {
            Console.WriteLine("Executing the try statement.");
            throw new NullReferenceException();
        }

        catch (NullReferenceException e)
        {
            Console.WriteLine("{0} Caught exception #1.", e);
        }

        catch
        {
            Console.WriteLine("Caught exception #2.");
        }

        finally
        {
            Console.WriteLine("Executing finally block.");
        } 
    ```

*   在开发 OO 和 RDBMS 之间的接口时存在各种问题。这被称为“范式不匹配”​​。主要问题是数据库使用按值引用，而 OO 语言使用按地址引用。所谓的中间件/对象持久性框架软件试图缓解这种情况。

> 迪特里希 (Dietrich, R.) (2012)。Web 应用程序架构，服务器端脚本 Servlet。北帕默斯顿：梅西大学。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T11:59:33.470

这取决于您实施集中式服务的方式。

如果服务收到请求后立即将数据发布到mysql，如果有同时请求，您可能会有很多连接。但是使用连接池，您可以精确控制您将拥有多少打开的连接。在限制中，您只能打开一个连接。如果有许多并发请求，这可能会导致争用，因为每个请求都必须等待连接被释放。

如果服务接收到请求，将它们存储在某个地方（除了数据库之外），并以块的形式处理它们，您也可以只有一个连接。但是这种情况实现起来更复杂，因为您必须控制对临时数据缓冲区的访问（读取和写入）。

# android - 我应该使用哪种布局？

> ID：15586336
> 
> 赞同：-4
> 
> 时间：2013-03-23T11:39:51.193
> 
> 标签：android, layout, grid, frame

我正在构建一个计算器应用程序，并且我拥有所有按钮的图像。我还有一张我想用作计算器背景的图像。

这是我所拥有的一个简单示例：

按钮（所有单个图像）： ![在此处输入图像描述](../Images/a051db568127ceee98b73339c197e408.png)

背景（单张图片）： ![在此处输入图像描述](../Images/196814f5d9ee04e3bc5719e270b6e7b0.png)

所需外观： ![在此处输入图像描述](../Images/00608d02cb441bdb1ca0a7ce2226d514.png)

我将使用什么布局将图像网格（按钮）放置在单个图像之上。GridLayout优于FrameLayout？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:46:50.867

我会去

```
<LinearLayout android:background="..." android:orientation="vertical">
    <LinearLayout android:orientation="horizontal">
        <Button ... />
        <Button ... />
        <Button ... />
    </LinearLayout><LinearLayout android:orientation="horizontal">
        <Button ... />
        <Button ... />
        <Button ... />
    </LinearLayout><LinearLayout android:orientation="horizontal">
        <Button ... />
        <Button ... />
        <Button ... />
    </LinearLayout><LinearLayout android:orientation="horizontal">
        <Button ... />
        <Button ... />
    </LinearLayout>
</LinearLayout> 
```

添加适当`android:layout_weight`的值，你就完成了。

我不会使用`GridLayout`什么的，因为你根本没有动态布局。这一切都是静态的，永远不会改变......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T11:42:34.710

```
<FrameLayout android:background="...."> 
```

...

# android - 同时启动两项活动

> ID：15586337
> 
> 赞同：3
> 
> 时间：2013-03-23T11:39:55.077
> 
> 标签：android, android-activity, background

是否可以在后台启动活动？也就是说，我不想在前面显示它，而是希望它在后台启动并希望它在另一个 Activity“下”运行。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:42:51.533

您在寻找[服务](http://developer.android.com/reference/android/app/Service.html)吗？

Activity 应该在前台运行，而 Service 应该在后台运行

只能有一个顶级活动！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:43:53.373

您不能同时启动两个活动，但是您可以做的是在第一个后台启动您想要的活动，然后在该活动的 onCreate 方法中调用前台活动，这样您就可以在顶部拥有所需的活动，在顶部拥有另一个活动背景准备好在需要时被带到前台。

您的mainActivity---->打开Activity1（应该在后台）-> Activity2（Activity2来自FG，而Activity1进入BG）。

# android - 如何将微调器添加到操作栏的标题栏？

> ID：15586340
> 
> 赞同：3
> 
> 时间：2013-03-23T11:40:14.593
> 
> 标签：android

```
private void setTabNavigation(ActionBar bar){
    String[] actions = new String[] {
            "Bookmark",
            "Subscribe",
            "Share"
    };
    bar.removeAllTabs();
    bar.setDisplayHomeAsUpEnabled(true);
    bar.setBackgroundDrawable(new ColorDrawable(Color.parseColor("#a5a5a5")));
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(
       getBaseContext(),  
          android.R.layout.simple_spinner_dropdown_item, actions);
} 
```

如何将微调器添加到我`title bar`的操作栏？我在标题栏旁边看到了一个小箭头，但是我将如何向它添加微调器和事件侦听器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T11:47:20.213

您缺少设置

```
bar.setListNavigationCallbacks(adapter, mNavigationCallback); 
```

[您在 developer.android.com http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)中有一个很好的例子

# cryptography - 图的定义

> ID：15586343
> 
> 赞同：0
> 
> 时间：2013-03-23T11:40:41.823
> 
> 标签：cryptography, graph-theory

我有两个问题；

> 1.  沿着现有节点的外部顶点的图（或电路）的名称是什么。
>     
>     
> 2.  该图的正式定义是什么。

为简单起见，我添加了一个示例图，红色突出显示的图是我想要的。

![在此处输入图像描述](../Images/29d522816b8f084ec7ab00f1b0947624.png)

如果我展示我是如何得到这个外部顶点的；

![在此处输入图像描述](../Images/44d17f0a9c5d767620c99e2d0ccd3584.png)

我有一组子图。所以我得到了 UNION 和 INTERSECTION，然后得到了 DIFFERENCE。一个接一个地执行此操作，最后我以类似于 MY RED EDGE GRAPH 的图表结束。

所以如果我从 1 开始，我得到的最终图表是 {1,2,6,7,9,8,10,11,10,7,6,5,3,4,3,1}。

当我即将结束工作时，请告诉我是否使用了正确的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T11:59:23.230

您可能正在尝试定义某种几何外壳，但肯定不是图形属性。就图论而言，这两个图是等价且无法区分的：

![数学图形](../Images/06d337a58e4379578624df4300231609.png)

**编辑** 也许我的[这个旧答案](https://stackoverflow.com/a/5043927/353410)可以帮助你

# c# - Controls.Clear() 清理的深度有多深？

> ID：15586347
> 
> 赞同：10
> 
> 时间：2013-03-23T11:41:12.317
> 
> 标签：c#, winforms, tablelayoutpanel

我正在使用一个`TableLayoutPanel`动态填充 other 的`TablelayoutPanels`.

现在我想知道当我调用`TableLayoutPanel.Controls.Clear`动态填充时会发生什么`TableLayoutPanel`。显然，所有的子布局都被删除了，但是他们的孩子呢？它们是否也被妥善处理，还是我需要担心内存泄漏？

我应该在调用之前递归删除孩子的孩子`Clear()`吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-23T12:11:59.833

[Clear](http://msdn.microsoft.com/en-US/library/system.windows.forms.control.controlcollection.clear%28v=vs.80%29.aspx)不会释放控件，从而导致内存泄漏。从链接：

> 调用 Clear 方法不会从内存中删除控制句柄。您必须显式调用 Dispose 方法以避免内存泄漏。

由于在循环中处理会弄乱索引，因此您可以将控件集合复制到另一个列表并对其执行`ForEach`循环或使用向后`For`循环。

```
 for (int i = myTableLayoutPanelControls.Count - 1; i >= 0; --i) 
    myTableLayoutPanelControls[i].Dispose(); 
```

调用`Dispose`将从内存中删除控件（当 GC 拾取它时）。这也将处理子控件`Dispose`方法的调用。

一个问题是，如果您有一个实现的自定义控件，`IDisposable`或者您在`Dispose`不调用该方法的情况下覆盖该`base`方法。在您的对象的`Dispose`方法中，您需要确保您已取消订阅您范围之外的任何事件。如果您不这样做，该引用将使您的对象保持活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:09:55.133

你的问题有点混乱。`Clear()`将删除引用和对象将被垃圾收集器收集。

但是，你也在使用这个词`dispose`。清除的对象*不会*被释放，因为它们的`Dispose`方法将被调用。

因此，如果您不再使用这些对象，并且想`Dispose`被调用它们，则必须自己做。

# c++ - C++/g++ 重载增量运算符

> ID：15586348
> 
> 赞同：2
> 
> 时间：2013-03-23T11:41:18.510
> 
> 标签：c++, g++, overloading, increment

我正在尝试实现一个双链表并想要创建一个迭代器。结构是：

```
template<class type>
class List {
    size_t listElementCnt;
    ...
public:
    ...
    class iterator {
        ...
    public:
        ...
        iterator& operator ++();
        iterator operator ++(int);
        ...
    };
    ...
 }; 
```

现在我想实现两个运算符的重载：

```
template<class type>
typename iterator& List<type>::iterator::operator ++() {
    ...
}
template<class type>
typename iterator List<type>::iterator::operator ++(int) {
    ...
} 
```

现在有两个错误：

*   未找到成员声明
*   类型“迭代器”无法解析

当我重载其他运算符时，例如取消引用或 (in-)equals 运算符，没有错误。错误只出现在 g++ 编译器中。visual c++ 的编译器没有显示任何错误，并且在那里工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T11:43:57.200

在成员函数的外联定义中，函数的返回类型不在类范围内，因为尚未看到类名。因此，将您的定义更改为如下所示：

```
template<class type>
typename List<type>::iterator& List<type>::iterator::operator ++() {
    ...
}
template<class type>
typename List<type>::iterator List<type>::iterator::operator ++(int) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T11:43:24.450

您需要符合`iterator`返回类型：

```
template<class type>
typename List<type>::iterator& List<type>::iterator::operator ++() {
    ...
}
template<class type>
typename List<type>::iterator List<type>::iterator::operator ++(int) {
    ...
} 
```

# javascript - 选择歌曲时的 Javascript -HTML5 音频控制

> ID：15586349
> 
> 赞同：0
> 
> 时间：2013-03-23T11:41:18.660
> 
> 标签：javascript, html

嗨，这是我目前根据选择的图像播放歌曲的代码：

Javascript

```
function Start (audioFile)
{
    var audie = document.getElementById("myAudio");
    audie.src = audioFile;
    audie.play();
}

function Stop ()
{
    var audie = document.getElementById("myAudio");
    audie.pause();
} 
```

HTML5

```
<img src="images/play.png" alt="Play Button width="37" height="30" onclick="Start('EL.mp3')"> 
```

选择按钮后，我怎么能显示带有所有控件的 HTML 5 音频播放器？我希望只有一个控制栏，每次单击播放按钮时都会出现该栏，并且可能会显示当前正在播放的歌曲。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:06:57.407

首先，我建议使用 jquery 来编写 JavaScript。

**HTML**

```
<audio controls id="myAudio" style="display:none"> 
```

**JavaScript**

```
function Start (audioFile) 
{
    $("#myAudio").show();
    ...
}

function Stop ()
{
    $("#myAudio").hide();
    ...
} 
```

# c - glib gtk - 无效的类指针

> ID：15586354
> 
> 赞同：2
> 
> 时间：2013-03-23T11:41:35.497
> 
> 标签：c, class, gtk, glib

运行我的应用程序时出现此错误

```
GLib-GObject-WARNING **: gtype.c:3119: invalid class pointer `0xdfbb60' 
```

它通常发生在将`GooCanvasGroup`对象的子类传递给函数期望 a `GooCanvasItem`（这是一个接口类）时，但它不会在该特定点失败，而是在库中失败。

```
<cut> 
classes : 0xc73cb0 0xc73cb0 
<cut>
classes : 0xff3250 0xff3250 

(oregano:8482): GLib-GObject-WARNING **: gtype.c:3119: invalid class pointer `0x100a330'

Program received signal SIGTRAP, Trace/breakpoint trap.
0x00007ffff701ba27 in g_logv () from /usr/lib/libglib-2.0.so.0
(gdb) 
(gdb) bt
#0  0x00007ffff701ba27 in g_logv () from /usr/lib/libglib-2.0.so.0
#1  0x00007ffff701bbf2 in g_log () from /usr/lib/libglib-2.0.so.0
#2  0x00007ffff72f1dbd in g_type_interface_peek ()
   from /usr/lib/libgobject-2.0.so.0
#3  0x00007ffff7baf3dc in goo_canvas_item_update (item=0xb6c490, 
    entire_tree=entire_tree@entry=0, cr=cr@entry=0x7583d0, bounds=bounds@entry=
    0x7fffffffd3b0) at goocanvasitem.c:1698
#4  0x00007ffff7babbaf in goo_canvas_group_update (item=0xb6c370, entire_tree=
    0, cr=0x7583d0, bounds=0x7fffffffd440) at goocanvasgroup.c:615
#5  0x00007ffff7baf3ed in goo_canvas_item_update (item=0xb6c370, 
    entire_tree=entire_tree@entry=0, cr=cr@entry=0x7583d0, bounds=bounds@entry=
    0x7fffffffd440) at goocanvasitem.c:1700
#6  0x00007ffff7babbaf in goo_canvas_group_update (item=0xb6c130, entire_tree=
    0, cr=0x7583d0, bounds=0x7fffffffd4f0) at goocanvasgroup.c:615
#7  0x00007ffff7baf3ed in goo_canvas_item_update (item=0xb6c130, 
    entire_tree=entire_tree@entry=0, cr=cr@entry=0x7583d0, bounds=bounds@entry=
    0x7fffffffd4f0) at goocanvasitem.c:1700
#8  0x00007ffff7bc9425 in goo_canvas_update_internal (canvas=canvas@entry=
    0xc6e0d0, cr=cr@entry=0x7583d0) at goocanvas.c:2560
#9  0x00007ffff7bc9492 in goo_canvas_update (canvas=0xc6e0d0)
    at goocanvas.c:2592
#10 0x00007ffff7baf3a4 in goo_canvas_item_ensure_updated (item=item@entry=
    0xf0e670) at goocanvasitem.c:1676
#11 0x00007ffff7bb46e9 in goo_canvas_item_simple_get_bounds (item=0xf0e670, 
    bounds=0x7fffffffd640) at goocanvasitemsimple.c:1013
#12 0x00007ffff7baf21d in goo_canvas_item_get_bounds (item=0xf0e670, bounds=
    0x7fffffffd640) at goocanvasitem.c:1546
#13 0x000000000043ee77 in create_canvas_items (group=0xde4250, library_part=
    0x8be100) at ../../src/sheet/part-item.c:1176
#14 0x000000000043e841 in part_item_new (sheet=0xc6e0d0, part=0x10095c0)
    at ../../src/sheet/part-item.c:1083
#15 0x0000000000440bff in sheet_item_factory_create_sheet_item (sheet=
    0xc6e0d0, data=0x10095c0) at ../../src/sheet/sheet-item-factory.c:58
#16 0x000000000044730b in sheet_add_ghost_item (sheet=0xc6e0d0, data=0x10095c0)
    at ../../src/sheet/sheet.c:1139
#17 0x000000000042f610 in place_cmd (widget=0xcf9030, br=0xc8bb00)
    at ../../src/part-browser.c:191
#18 0x00007ffff72d3467 in ?? () from /usr/lib/libgobject-2.0.so.0
#19 0x00007ffff72ebe66 in g_signal_emit_valist ()
   from /usr/lib/libgobject-2.0.so.0
#20 0x00007ffff72ec6b2 in g_signal_emit () from /usr/lib/libgobject-2.0.so.0
#21 0x00007ffff69db198 in ?? () from /usr/lib/libgtk-3.so.0
#22 0x00007ffff72d3467 in ?? () from /usr/lib/libgobject-2.0.so.0
#23 0x00007ffff72ebe66 in g_signal_emit_valist ()
   from /usr/lib/libgobject-2.0.so.0
#24 0x00007ffff72ec6b2 in g_signal_emit () from /usr/lib/libgobject-2.0.so.0
#25 0x00007ffff69d9f03 in ?? () from /usr/lib/libgtk-3.so.0
#26 0x00007ffff6aa8f3f in ?? () from /usr/lib/libgtk-3.so.0
#27 0x00007ffff72d3467 in ?? () from /usr/lib/libgobject-2.0.so.0
#28 0x00007ffff72ebe66 in g_signal_emit_valist () 
```

我手动验证了类指针是错误的（阅读：没有 goocanvas、sheet-item、part-item 类）

使该问题浮出水面的最后一个电话是

```
 // the group is a "part-item" a subclass of "sheet-item" which is 
            // subclassed from "GooCanvasGroup"
    item = goo_canvas_polyline_new (GOO_CANVAS_ITEM (group), ... );

    g_assert (item!=NULL);
    g_assert (GOO_IS_CANVAS_ITEM (item));

    g_assert (group!=NULL);
    g_assert (GOO_IS_CANVAS_GROUP (group));
    g_assert (GOO_CANVAS_GROUP_GET_CLASS (group)!=NULL);
    g_printf ("classes : %p %p \n", GOO_CANVAS_GROUP_GET_CLASS(group), PART_ITEM_GET_CLASS (group));

    goo_canvas_item_get_bounds (item, &bounds); 
```

但是，一旦我删除`goo_canvas_item_...`-call ，下一次调用 a`goo_canvas_..`就会失败。

所以我怀疑类声明/类型定义中有问题：

工作表项目.c

```
G_DEFINE_TYPE (SheetItem, sheet_item, GOO_TYPE_CANVAS_GROUP) 
```

部分项目.c

```
G_DEFINE_TYPE (PartItem, part_item, TYPE_SHEET_ITEM) 
```

完整文件在这里：

[https://github.com/drahnr/oregano/blob/master/src/sheet/sheet-item.c](https://github.com/drahnr/oregano/blob/master/src/sheet/sheet-item.c) [https://github.com/drahnr/oregano/blob/master/src/sheet/sheet-item.h](https://github.com/drahnr/oregano/blob/master/src/sheet/sheet-item.h) [https://github.com/drahnr/oregano/blob/master/src/sheet/part-item.c](https://github.com/drahnr/oregano/blob/master/src/sheet/part-item.c) [https://github.com/drahnr/oregano/blob/master/src/sheet/part-item.h](https://github.com/drahnr/oregano/blob/master/src/sheet/part-item.h)

我很困惑是什么导致了这个问题，所以任何形式的提示都值得赞赏。

编辑：如果有人想自己尝试：

```
git clone git://github.com/drahnr/oregano.git
cd oregano
waf configure --prefix=/tmp debug install
gdb ./build/debug/oregano
(gdb) r
## click to time on the "place item"-button on the right side (bottom)
(gdb) bt 
```

# php - PHP没有插入MySQL数据库

> ID：15586356
> 
> 赞同：-3
> 
> 时间：2013-03-23T11:41:49.317
> 
> 标签：php, mysql

我目前很难理解为什么以下脚本将成功返回给浏览器，但实际上并未将数据插入数据库。我知道我正在使用旧的 MySQL 指令，但我怀疑这应该会造成这个问题。在此先感谢阿利斯泰尔

```
<?php

ob_start();
$host="localhost"; // Host name 
$username="XXXXXX"; // Mysql username 
$password="XXXXXXXXXXXXXXXXXXX"; // Mysql password 
$db_name="XXXXXXXX"; // Database name 
$tbl_name="XXXXXXXXXX"; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// Define Variables
$myusername=$_POST['username']; 
$password1=$_POST['password1']; 
$password2=$_POST['password2']; 
$emailadd=$_POST['emailadd']; 

if($password1==$password2){
    //Ecnrypt Password Using SHA512
    $password1 = hash("sha512", $password1);
}

else {
    //Passwords don't match return user to form with parameter
    header("location:adduser.php?pwnomatch");
}

//Check user doesn't already exist
$sqlcheckuser="SELECT * FROM $tbl_name WHERE username='$username'";
$result1=mysql_query($sqlcheckuser);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result1);

//If user exists redirect back to login form
if($count==1){
    header("location:adduser.php?userexist");
}

// To protect MySQL injection (more detail about MySQL injection)
$username = stripslashes($myusername);
$password1 = stripslashes($mypassword);
$emailadd = stripslashes($emailladd);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$emailadd = mysql_real_escape_string($emailladd);
$sqlinsertuser="INSERT INTO $tbl_name ('username', 'password', 'emailaddress' VALUES ($username, $password1, $emailadd)";
mysql_query($sqlinsertuser);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result2);

// Register user then redirect to "viewuser.php" with success parameter
header("location:viewuser.php?success");

ob_end_flush();
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T11:44:16.967

```
INSERT INTO $tbl_name ('username', 'password', 'emailaddress' VALUES ($username, $password1, $emailadd) 
```

您没有在列名上关闭括号。因此，您的查询应如下所示：

```
INSERT INTO $tbl_name (`username`, `password`, `emailaddress`) VALUES ($username, $password1, $emailadd) 
```

我在原来的帖子中没有注意到的东西；您使用了引号而不是反引号。

查询中的引号通常代表一个字符串，这里解释了反引号：

[在字段名称周围使用反引号](https://stackoverflow.com/questions/261455/using-backticks-around-field-names)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T11:47:39.797

您的查询字符串中有很多错误。它应该是

```
$sqlinsertuser="INSERT INTO $tbl_name (`username`, `password`, `emailaddress` )
        VALUES( '$myusername', '$mypassword', '$emailadd' )"; 
```

* * *

请注意使用反引号而不是撇号来传递字段名称。而引号的用法是在**`VALUES`**.

* * *

您在查询中使用了错误的变量。

# spotify - 如何使用 Spotify App API 播放双专辑？

> ID：15586365
> 
> 赞同：0
> 
> 时间：2013-03-23T11:43:12.187
> 
> 标签：spotify

我想使用 Spotify 应用 API 播放双专辑。

例如：spotify:album:7MwNG0PSmP2Ggsdx9MHnPR 在第一张专辑中有 26 首曲目，另外还有 27 首曲目。

我尝试了以下方法：

```
> album = spotify.models.Album.fromURI('spotify:album:7MwNG0PSmP2Ggsdx9MHnPR')
> album.tracks.length
  26
> album.data.numTracks
  26 
```

在返回的对象（专辑）中，没有任何指示附加曲目的内容。但是，我使用的是 API 提供的原生 Spotify 播放器视图。所以我假设我实际上不需要处理这个问题。它应该由玩家来完成。

```
spotify.models.Album.fromURI('spotify:album:7MwNG0PSmP2Ggsdx9MHnPR', function(album) {
  var player = new spotify.views.Player()

  player.track = album.get(0)
  player.context = album

  $('body').append(player.node)
} 
```

这就是我将专辑添加到播放器的方式。播放器将只播放 26 首曲目。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:02:50.080

这里有点误解。有人可能会认为“附加曲目”实际上是属于同一专辑和光盘的“隐藏曲目”或“附加曲目”，但事实并非如此。附加曲目只是属于被认为与请求的专辑非常相似的专辑的曲目。

您的示例 Live At The Hollywood Palladium 于 2009 年发行 (spotify:album:7MwNG0PSmP2Ggsdx9MHnPR)，正确包含 26 首曲目。如果您在 Spotify 搜索字段中输入 URI，或单击曲目列表中的专辑标题，专辑应用程序将向您显示 26 个附加曲目。这些来自 2004 年发行的 Live At The Hollywood Palladium (spotify:album:1SdlTPJQ3QMh1eTyJ7oUeM)。

希望这可以帮助！

# php - MySQL，PHP：从表中隐藏特定值

> ID：15586374
> 
> 赞同：2
> 
> 时间：2013-03-23T11:44:23.063
> 
> 标签：php, html, mysql

我正在编写一个“显示在线用户”脚本，该脚本会显示在线的每个人。现在我想删除与会话用户名匹配的条目，即“如果（在线用户 = 会话用户名）然后不显示它，就像在 facebook.com 聊天中显示你的朋友 ID 而不是你自己的 ID 我的代码如下：

```
 <?php
    mysql_connect("localhost","root","12345");
    mysql_select_db("accounts");
    $user = $_SESSION['user_name'];
    $result = mysql_query("SELECT * FROM online * WHERE ($chat<>$user)");

    while($row=mysql_fetch_array($result)) {
      $chat=$row["emp_name"];
      $chlk = ("<a href=javascript:void(0) onclick=javascript:chatWith('$chat')>$chat</a>");
      $chs = ("<a>$chat</a>");
      if ($chat <> $user) {
      echo $chlk;
      }
      else {
      echo $chs;
      }
   echo $chlk;
}
?> 
```

我收到以下错误：

`Notice: Undefined variable: chat in localhost/accounts/removeuser.php on line 7`

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given localhost/accounts/removeuser.php on line 9 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:49:26.180

更正查询。

```
"SELECT * FROM online WHERE ($chat<>$user)" 
```

**或者**

**`$chat`用您的表`field`名**替换查询。****

 **在 WHERE 之前有额外的 * 是无效的。

并且`$chat`未在 中定义`query`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:49:39.527

`<>`据我所知不是PHP。你需要使用`!==`.

*（并且可能阅读了一些 PHP 基础知识......）***

# concatenation - 与变量串联相关的 VHDL 错误

> ID：15586375
> 
> 赞同：2
> 
> 时间：2013-03-23T11:44:28.097
> 
> 标签：concatenation, vhdl

我正在编写 VHDL 代码，我在其中使用`tempx`和`tempz`作为变量并尝试将它们连接起来，但我在下面注释的行上有一些错误。请问怎么做的建议？

错误是：

```
Error (10500): VHDL syntax error at ArrayDivider.vhd(53) near text ":=";  expecting "(", or "'", or ".",
Error (10500): VHDL syntax error at ArrayDivider.vhd(53) near text "&";  expecting "(", or "'", or "." 
```

代码：

```
------- Array Divider --------

library ieee;
use ieee.std_logic_1164.all;

----- Entity -----

entity ArrayDivider is
    generic
    (
        ---- For x/y
        Nx : integer := 8; --- Number of bits in x
        Ny : integer := 4  --- Number of bits in y
    );
    port
    (
        ipx : in std_logic_vector(Nx-1 downto 0); -- Input x --- (Nx-1 downto 0)
        ipy : in std_logic_vector(Ny-1 downto 0); -- Input y --- (Ny-1 downto 0)
        opd : out std_logic_vector(Nx-Ny downto 0); -- Quotient --- (Nx-Ny downto 0)
        opr : out std_logic_vector(Ny-1 downto 0) -- Remainder --- (Ny-1 downto 0)
    );
end ArrayDivider;

----- Architecture -----

Architecture Div of ArrayDivider is
--- This component will compare ipy with parts of ipx of given bits and ---
--- generate bits of divident as well as partial subtraction results ---
--- x = parts of ipx (tempx), y = ipy, op = opd(x) and final z = opr ---    

    component Cmp is
        generic
        (
            N : integer := 4
        );
        port
        (
            x : in std_logic_vector(N-1 downto 0); --- N-1 downto 0
            y : in std_logic_vector(N-1 downto 0); --- N-1 downto 0
            z : out std_logic_vector(N-1 downto 0); --- N-1 downto 0
            op : out std_logic
        );
    end Component;
    variable tempx : std_logic_vector(Ny-1 downto 0) := ipx(Nx-1 downto Nx-Ny); --- (Ny-1 downto 0) (Nx-1 downto Nx-Ny)
    variable tempz : std_logic_vector(Ny-1 downto 0); --- (Ny-1 downto 0)
begin
    lup:
        for a in Nx-Ny downto 0 generate --- Nx-Ny downto 0
        begin           
    Cmpa:   Cmp generic map(Ny) port map(tempx, ipy, tempz, opd(a)); --- (Ny)
    grea:   
            if(a > 0) generate
                tempx := tempz(Ny-2 downto 0) & ipx(a-1); --- (Ny-2 downto 0)
            end generate grea;  
    zero:   
            if(a = 0) generate
                opr <= tempz;
            end generate zero;
        end generate lup;
end Div; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:03:45.740

由于您没有使用进程，因此您应该使用**信号而不是***tempx*和*tempz*的变量。您的第 53 行必须如下所示：

```
tempx <= tempz(Ny-2 downto 0) & ipx(a-1); 
```

但是，可能使用过程更有意义。那么你必须将你的 cmp 组件实现为一个过程（在下面的示例中未完成）。该过程可能如下所示：

```
 ...
end Component;
begin

div_proc: process(ipy, ipx)
    variable tempx : std_logic_vector(Ny-1 downto 0) ; 
    variable tempz : std_logic_vector(Ny-1 downto 0); 
begin
    lup:
        for a in 1 downto 0 loop         
    -- Cmpa:   Cmp generic map(Ny) port map(tempx, ipy, tempz, opd(a)); 
        grea:   
            if(a > 0) then
                tempx := tempz(Ny-2 downto 0) & ipx(a-1);
            end if;  
        zero:   
            if(a = 0) then
            opr <= tempz;
            end if;
    end loop;
end process div_proc;
... 
```

# python - 如何强制 Filepicker.io 将 Cache-Control 标头发送到 Amazon S3？

> ID：15586377
> 
> 赞同：2
> 
> 时间：2013-03-23T11:44:29.963
> 
> 标签：python, django, caching, amazon-s3, filepicker.io

我在[官方库](https://github.com/Filepicker/django-filepicker)中使用 Filepicker.io 和 Django，我注意到两件事：

*   它提供给 Django 的 URL 直接指向我的 S3 存储桶，而不是 Filepicker URL。
*   它不会对它发送的文件设置任何缓存。

由于我主要将其用于将经常重新加载的图像，因此我想知道如何使 Filepicker 设置 Cache-Control 标头。

或者，是否可以强制 Amazon S3 在自动进入存储桶的每个对象上设置 Cache-Control 标头？

# jquery - jQuery 和重复动画

> ID：15586379
> 
> 赞同：0
> 
> 时间：2013-03-23T11:45:12.843
> 
> 标签：jquery, jquery-animate

我为将元素移动到 div 中创建动画，div 动画正常，当我尝试使用 setInterval 重复此动画时出现问题

**我把我的代码放在这里：**

```
$("#header").fadeIn(100, function() {
    $(this).animate({
        'left': '-1600'
    }, 8000);
});

var interval = setInterval(function() {
    $("#header").fadeIn(100, function() {
        $(this).animate({
            'left': '-1600'
        }, 8000);
    });
}, 10000); 
```

第一个工作正常，但第二个不行，如果我改变位置 - 动画功能 - 显示但没有重复，我想在其他时间使用 setInterval 重复但对我不起作用，但是我需要使用其他功能并且没有 setInterval .....

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:03:59.677

我相信这是因为它永远不会回到起点。这是一个重复动画的例子。我没有你的html或css，所以我自己做了。在演示中它达到 500，因此它不会超出屏幕。

[**工作演示**](http://jsfiddle.net/haEJb/)

**Javascript：**

```
$(function() {
    $("#header").fadeIn(100, function() {
        console.log('go!');
        $(this).animate({
            'left': '-1600'
        }, 8000);
    });

    setInterval(function() {
        $("#header").css('left','0').fadeIn(100, function() {
            $(this).animate({
                'left': '-1600'
            }, 8000);
        });
    }, 10000);
}); 
```

# javascript - 输入 indexedDB 后无法立即提取用户信息

> ID：15586381
> 
> 赞同：0
> 
> 时间：2013-03-23T11:45:16.333
> 
> 标签：javascript, html, local-storage, indexeddb

我有一个带有 indexedDB 的注册表单。我已经注册/登录工作。我一直在尝试不同的方法来让新的注册器在注册后立即登录，但我不确定发生了什么。它行不通。localStorage 像它应该设置的那样设置，但它不会显示用户的数据。

JS：

```
function addObject(){
    if(confirm('Are you sure you want to resgister?')){
     fName = document.getElementById('fName').value;
     lName = document.getElementById('lName').value;
     userName = document.getElementById('uName').value;
     pass = document.getElementById('password').value;
     email = document.getElementById('email').value;
     dob = document.getElementById('dob').value;
     tel = document.getElementById('tel').value;
     bio = document.getElementById('bio').value;
     terms = document.getElementById('terms').value;
     school = document.getElementById('school').value;

     //Need loop to find radio button values
     radios = document.getElementsByName('gender');
     for (var i = 0, length = radios.length; i < length; i++) {
        if (radios[i].checked) {
            gender=radios[i].value;
        }
     }

        //set up transaction
        var mytransaction = db.transaction(['users'], "readwrite"); 

        //get object store
        var myusers = mytransaction.objectStore('users'); 

        //Add item
        var request = myusers.put(new getUser(userName,fName,lName,pass,email,dob,tel,bio,terms,school,gender));
    }

    // Show all results.
    if(document.URL.indexOf('admin.html') > -1){
        mytransaction.addEventListener('complete', showUsers);  
    } 

    //Log in new users
    loginCheck(userName,pass);
    /*newLocal('user',user); */
    //Reset Form Fields
    resetForm(); 

} 
```

这是我在有人登录时使用的功能。

```
function loginCheck(user,pass){    
db.transaction("users").objectStore("users").get(user).onsuccess = function(e) {
    var loggedUser = e.target.result;
        if(!loggedUser){
            alert('Sorry, Username does not exist. Please try again.');
        }else if(pass !== loggedUser.pw ){
            alert('Incorrect log in combination. Please try again.');
            }else{
                loggedIn(loggedUser);
                populateFields(loggedUser);
                loginStyle(loggedUser)
                }        
    }    
}
function loggedIn(loggedUser){
    var u=loggedUser;
    alert('Welcome '+u.fn+' '+u.ln+' to Macroplay');       

    //Set localStorage     
    var signedin = 'user';
    var username = u.userName;
    newLocal(signedin,username);
}
function getValues(){ 
db.transaction("users").objectStore("users").get(localStorage.user).onsuccess = function(e) { 
    populateFields(e.target.result); 
    loginStyle(e.target.result)
    }; 
    ;
} 
```

从我所看到的第一部分将用户添加到数据库中，第二部分的行为应该与我刚刚正常登录时一样。但它不会从数据库中提取信息。

我尝试将新用户设置为 localStorage，这是我识别当前登录用户的方式，但这也没有效果。

这是我的网站：[http ://www3.carleton.ca/clubs/sissa/html5](http://www3.carleton.ca/clubs/sissa/html5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:16:12.633

看起来您在方法中使用了`onsuccess`处理程序`loginCheck`，但在调用`put`数据库时却没有。我的猜测是，您正在检查用户是否存在，然后才真正有机会被添加。尝试这个：

```
//Add item
var request = myusers.put(new getUser(userName,fName,lName,pass,email,dob,tel,bio,terms,school,gender));
request.onsuccess = function () {

    // Show all results.
    if(document.URL.indexOf('admin.html') > -1){
        mytransaction.addEventListener('complete', showUsers);  
    } 

    //Log in new users
    loginCheck(userName,pass);
    /*newLocal('user',user); */
    //Reset Form Fields
    resetForm(); 
} 
```

# jquery - AJAX GET请求递归加载文件

> ID：15586382
> 
> 赞同：0
> 
> 时间：2013-03-23T11:45:16.863
> 
> 标签：jquery

我有以下情况。我想从服务器加载文件A，然后（取决于A的内容）将尝试加载文件A1，A2，A3，...... An，每个文件`A[1-n]`将依次加载其他文件，这可以继续进行。是的，它已经结束了。

不幸的是，我开始意识到我需要使用 synchronized `$.ajax requests`，否则第一个 $.ajax 调用（当完成加载文件 A 时）只会返回而不会遍历其余文件。我的功能如下：

```
loadFile = function (path, file, scope)
{
    $.ajax ({
        url: url,
        type: 'GET',
        dataType: 'text',
        success: function (responseData)
        {
            var lines = responseData.split("\n");
            for (var j = 0; j < lines.length; j++)
            {
                if (lines[j].charAt(0) === 'F')
                    loadFile (arguments);
            }
        }
    });
} 
```

我的第一个问题是为什么我不能在上述选项中添加“async：false”，而是必须使用`$.ajaxSetup({async: false});`，否则它不起作用。

我的第二个问题是这是用于递归完成这项工作的正确模式。

我的第三个问题是我如何知道整个过程何时完成。我想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:08:45.140

`async: false`是万恶之源。它会阻止您的整个选项卡，并且在某些情况下（例如旧版 IE）会阻止整个浏览器。不要使用它。

现在解决您的问题。你可以这样做：

```
// note new argument "callback"
var loadFiles = function(path, file, scope, callback) {
    var req = $.ajax({
        // some settings
        success: function(res) {
            // some processing
            for (var j = 0; j < lines.length; j++) {
                loadFiles.requests.push(
                    // the same callback
                    loadFiles(path2, file2, scope2, callback)
                );
            }

            // set this request to complete
            req.completed = true;

            // check if all requests are done
            for (var i = 0; i < loadFiles.requests.length; i++) {
                if (!loadFiles.requests[i].completed) {
                    return;
                }
            }
            // TODO: you could remove completed requests from that array
            // to increase performance

            // if all are done then reset the array and run the callback
            delete loadFiles.requests;
            if (callback) {
                callback();
            }
        }
    });
    if (!loadFiles.requests || !loadFiles.requests.length) {
        loadFiles.requests = [req];
    }
    return req;
};

loadFiles(path, file, scope, function() {
    // this happens after all is done
}); 
```

请注意，连续两次调用此函数会破坏它（因为`loadFiles.requests`是全局函数的属性）。为了支持这一点，您必须将所有内容包装在外部函数中并使用该函数。

# pointers - 将指针传递给 SDL 函数

> ID：15586390
> 
> 赞同：1
> 
> 时间：2013-03-23T11:46:06.477
> 
> 标签：pointers, sdl

当我将“偏移”传递给 SDL_BlitSurface 函数时，我试图理解为什么方法 1 有效，而方法 2 无效。

用法：

```
int SDL_BlitSurface(SDL_Surface *src,  SDL_Rect *srcrect,  SDL_Surface *dst, SDL_Rect *dstrect); 
```

在我看来，两者都应该工作，因为 SDL_BlitSurface 函数要求 SDL_Rect* 作为第四个输入参数。在这两种情况下，我都将 SDL_Rect* 传递给函数。但是方法 2 产生“未处理的异常访问冲突写入位置错误”。请帮忙！

方法1：

```
SDL_Rect offset;
offset.x = 1;
SDL_BlitSurface( source, NULL, destination, &offset ); 
```

方法2：

```
SDL_Rect* offset = NULL;
offset->x = 1;
SDL_BlitSurface( source, NULL, destination, offset ); 
```

（来自 Lazy Foo 的教程第 2 课的代码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:56:06.520

指针变量（如`offset`）保存地址，就像房屋地址一样。该结构告诉计算机谁住在每个房间的房子里（房间有名字，例如`x`）。

问题是你首先说：“`offset`是一个假地址（称之为NULL）。” 然后你说“房间里`x`住着1”。所以这没有意义——`x`只有地址是真实的，数字 1 才能住在房间里。没有人可以住在假地址。

不幸的是，您可以在代码中编写任何您想要的内容。只有当您运行它并尝试将 1 放入房间`x`时，计算机才会喊叫。“访问冲突”基本上意味着：“您试图将一些数据放在您无权访问的地址中”。在这种情况下，假地址 NULL 不是您可以存储任何内容的地址。

如果您遵循 Armin 的建议，then`offset`将指向一个有效地址，这将允许您将 1 存储在 room 中`x`。方法 1 通过传递预分配结构的地址`offset`（它由编译器在堆栈上自动分配）来解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T11:49:04.887

在*第二种情况下*，您没有保留任何内存，`offset`因为`SDL_Rect* offset`它只是一个指针，您必须为其分配内存以指向某些东西：

示例`c`：

```
SDL_Rect* offset = malloc( sizeof( SDL_Rect ) ); 
```

然后你的第二种方法将起作用。

# php - 使用 jQuery 进行 Google 安全浏览

> ID：15586391
> 
> 赞同：-1
> 
> 时间：2013-03-23T11:46:40.370
> 
> 标签：php, jquery

我试图用谷歌安全浏览查找 API 做一些测试。

```
$(document).ready(function(){
  $("button").click(function(){
    $.get("https://sb-ssl.google.com/safebrowsing/api/lookup",  { client: "api", appver: "1.5.2", apikey: "MYAPI123", pver: "3.0", url:"www.ianfette.org"  } )

   .done(function(data) {
  alert("Data Loaded: " + data);
    });
  });
}); 
```

但我无法得到服务器的响应。我已经尝试在 php 中使用 fopen 并且它可以工作，但我需要它与 jQuery 一起使用，并且还需要从服务器获取响应代码，例如 200（如果该站点已列出）。

也许您可以建议任何 PHP 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T13:59:08.953

$.get 执行 ajax 请求，这意味着它受同源策略的限制，因此您无法从您的域访问 google.com。

为了解决这个问题，您可能需要在您的域上的 php 中实现一个代理 url，并使用 jquery 请求它。

# php - Laravel 4 从 URL 中删除公共

> ID：15586397
> 
> 赞同：16
> 
> 时间：2013-03-23T11:46:59.543
> 
> 标签：php, frameworks, laravel

所以，我在 Windows 上运行 xampp。我目前正在尝试熟悉 laravel 框架。现在，当那被指出时。我如何能够直接在根目录中访问我的 laravel 应用程序/网站？

例子，

*   我现在正在做的是：localhost/laravel/public/about（查看 about 页面）
*   我想做的是：localhost/laravel/about

有什么好的解决方案吗？我需要在 laravel 的根文件夹中添加一个 .htacess 文件吗？（不是公共的）。

有什么建议么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-08T16:05:58.887

最简单的方法是`.htaccess`在您的 Laravel 根目录中创建具有以下内容的文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^(.*)$ public/$1 [L]
</IfModule> 
```

它应该很容易重定向。

**参考：** [https ://coderwall.com/p/erbaig/laravel-s-htaccess-to-remove-public-from-url](https://coderwall.com/p/erbaig/laravel-s-htaccess-to-remove-public-from-url)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-26T21:58:15.790

这就是我的做法。

1.  编辑您的 Windows 主机文件 - C:\Windows\System32\drivers\etc\hosts
2.  编辑 Apache vhosts 文件 - Drive-Letter:\xampp\apache\conf\extra\httpd-vhosts.conf
3.  将 htaccess 文件添加到 laravel/public 文件夹（如果它不存在）
4.  重启 Xampp apache 服务器

由于用户帐户控制，Windows 在尝试编辑 Hosts 文件时可能是一个真正的 PITA。由于我从事各种小型爱好项目，我必须一直编辑这个文件，所以这就是我所做的。

*   安装 PSPad。它加载速度非常快，您可以为文件添加书签以便于加载/编辑。如果您加载我上面提到的两个文件并将工作区保存为新项目，Sublime Text 也可以很好地工作。
*   右键单击 PSPad（或其他编辑器）程序快捷方式并选择“以管理员身份运行”。除非您这样做，否则您无法保存对 Hosts 文件的更改。
*   在编辑器中打开 Windows 主机文件。该文件没有文件扩展名，因此您必须在“文件打开”对话框中选择“所有文件”才能看到该文件。
*   在文件的底部，添加以下内容：

    ```
    127.0.0.1  laravel.dev 
    ```

    每当您在浏览器的地址栏中输入 laravel.dev 时，这会告诉 Windows 将 Web 浏览器指向 localhost。

*   保存文件。
*   打开 xampp Apache httpd-vhosts.conf 文件。
*   在文件的底部，添加：（我假设 xampp 安装在 D: 驱动器的根目录）

    ```
    <VirtualHost *:80>
      ServerName laravel.dev
      DocumentRoot "D:/xampp/htdocs/laravel/public"
      <Directory "D:/xampp/htdocs/laravel/public">
      </Directory>
    </VirtualHost> 
    ```

*   将 htaccess 文件添加到您的 laravel/public 文件夹（如果它不存在）。我认为 L4 附带的默认 htaccess 文件如下所示：

    ```
    Options -MultiViews
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L] 
    ```

*   重新启动您的 xampp apache 服务器。
*   打开网络浏览器并在地址栏中输入 -`http://laravel.dev`
*   这将带您进入“public”文件夹中的 index.php 文件。
*   要进入关于页面，我认为地址是`http://laravel.dev/about`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-03-21T04:54:38.120

**最佳方法**：我不建议删除公共，而是在本地计算机上创建一个指向公共目录的虚拟主机，并在远程主机上将公共更改为 public_html 并将您的域指向该目录。原因，你的整个 laravel 代码将是安全的，因为它的一级到你的公共目录:)

**方法 1：** 我只是将 server.php 重命名为 index.php 并且它可以工作

**方法二：**

这是我的目录结构，

```
/laravel/
... app
... bootstrap
... public
... etc 
```

按照这些简单的步骤

1.  将所有**文件从公共目录移动到根目录 /laravel/**
2.  现在，不需要公共目录，因此您可以选择现在将其删除
3.  现在打开 index.php 并进行以下替换

> 需要**DIR** .'/../bootstrap/autoload.php';

至

> 需要**DIR** .'/bootstrap/autoload.php';

和

> $app = require_once **DIR** .'/../bootstrap/start.php';

至

> $app = require_once **DIR** .'/bootstrap/start.php';

4.  现在打开 bootstrap/paths.php 并更改公共目录路径：

> 'public' => **DIR** .'/../public',

至

> '公共' => **DIR** .'/..',

就是这样，现在试试 http://localhost/laravel/

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-05-15T15:25:06.167

将**/public**文件夹的内容下移一级。

您需要更新 index.php 中的包含行以指向正确的位置。（如果它下降了一个级别，请删除“../”）。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-12-31T04:09:39.277

将您的 apache 文档根目录设置为公用文件夹，而不是 laravel 文件夹。这是最简单的技术，推荐用于生产环境。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-11-16T07:13:57.643

**我正在使用 L5，这对我来说很好：**

1.  将 Laravel 根文件夹中的 server.php 重命名为 index.php
2.  将 .htaccess 文件从 /public 目录复制到你的 Laravel 根文件夹。

——就是这样！！！

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-09-12T23:03:18.290

我也一直在努力解决这个问题，但我找到了一个简单的解决方案，只需要您在应用程序的根目录创建另一个 .htaccess。

.htaccess 本身应包含以下内容：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^{yoursite}.{extension} [NC]
RewriteRule (.*) http://www.{yoursite}.{extension}/$1 [R=301,L]

RewriteCond %{REQUEST_URI} !public/
RewriteRule (.*) /public/$1 [L] 
```

整个系统继续工作，但它重定向到 /public 文件夹。

这就是我为自己解决问题的方法。

希望能帮助到你！

干杯。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-02-13T07:04:49.847

在您的 .htaccess 中添加以下代码（如果不存在，请在 laravel 根目录上创建一个 .htaccess）

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^(.*)$ public/$1 [L]
</IfModule> 
```

来源：[http ://tutsnare.com/remove-public-from-url-laravel/](http://tutsnare.com/remove-public-from-url-laravel/)

在 Source，您还可以获得另一种方法来做同样的事情。

**更新：首选方法是更改​​在源 URL 中解释的目录结构。**

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-04-09T10:47:12.723

将以下代码添加到 htaccess 文件中。它可能会帮助你。

```
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteRule ^(.*)$ public/$1 [L]
</IfModule> 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-06-23T07:42:41.423

只是在简单的步骤中，我在 laravel 5 中做 .htaccess 像这样在 laravel 文件夹中

```
<IfModule mod_rewrite.c>
    <IfModule mod_negotiation.c>
        Options -MultiViews
    </IfModule>

    RewriteEngine On
    # Redirect Trailing Slashes...
    RewriteRule ^(.*)/$ /$1 [L,R=301]

    # Handle Front Controller...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ ./index.php [L]
</IfModule> 
```

然后将您的重命名`server.php`为`index.php`

它会起作用

或者如果你只是做本地开发

运行这个命令`php artisan serve`

它将在 `localhost:8000`（端口可能会有所不同）启动本地服务器

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-03-23T11:54:21.463

您可以使用符号链接或编辑`httpd.conf`文件。

检查我对另一个类似问题的[回答。](https://stackoverflow.com/questions/15468608/how-to-get-rid-of-the-public-path-in-laravel-on-wamp/15469480#15469480)我希望它有所帮助。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-06-23T09:00:54.103

如果您不想承受配置**.htaccess**文件的压力，您可以通过以下方式使用 PHP 内置服务器：

1.  从您的命令实用程序， cd 进入`laravel\public`
2.  运行：`php -S localhost:8000`

在您可以访问您的网站后，请访问：

`http:://localhost:8000`

无需附加即可工作`public`

查看官方手册了解更多信息：http: [//php.net/manual/en/features.commandline.webserver.php](http://php.net/manual/en/features.commandline.webserver.php)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-11-25T14:40:55.040

使用 cmd 转到项目文件夹并输入“php artisan serve”。现在导航到：localhost:8000

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-11-27T09:12:22.740

我发现 geart flow 可以在本地使用 laravel。

你可以做的是稍微配置一下xampp。在您的 xamp 的 httpd.conf 文件中，您必须找到文档 `DocumentRoot`和`<Directory>`. 将根目录更改为您的 laravel 公共文件夹并重新启动 apache。从什么时候开始，您只需键入 localhost 即可访问您的项目。现在，如果您愿意，您可以更改主机文件并重写本地 dns，例如：127.0.0.1 `example.laravel.com`，现在您可以使用真实 url 访问您的项目。它可能看起来有点复杂，但事实并非如此。

替代方案是`php artisan serve`. 您可以在不同的端口和重写主机文件时启动服务器。

您可以添加一些功能来进一步改进您的工作流程，例如`vagrant`或`ngrok`. 您可以分享您的项目以进行现场演示（此处可能存在速度问题）。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-08-18T16:44:15.767

你需要做以下事情：

1.  首先将公共目录的所有内容复制到您的根目录中，即把公共文件夹的内容 1 上一步。

2.  修改index.php的内容

来自 =>

```
require __DIR__ . "/../bootstrap/autoload";
$app = require_once __DIR__ . "/../boostrap/start.php" 
```

至 =>

```
 "require __DIR__.'/bootstrap/autoload.php';"
"$app = require_once __DIR__.'/bootstrap/start.php'; 
```

以及 bootstrap/paths.php 的内容

来自 =>`'public' => __DIR__.'/../../',`

至 =>`'public' => __DIR__.'/..',`

3.然后最后在你的根目录中创建**.htaccess文件并写下这个。**

```
<IfModule mod_rewrite.c>
    <IfModule mod_negotiation.c>
        Options -MultiViews
    </IfModule>
    RewriteEngine On
    RewriteRule ^(.*)/$ /$1 [L,R=301]
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
</IfModule> 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-12-14T11:32:43.517

需要在 larvel4 应用程序中删除公共段

Laravel 4 要求您将应用程序代码放在比 Web 根目录高一级的位置，这会给一些停留在共享主机上并且不允许这样设置的开发人员带来问题。实际上很容易绕过它。我读到一些 L4 特定的包在这样的设置上可能会出现问题，但我还没有遇到任何包这样的问题。

所以首先在你喜欢的地方安装 L4。我喜欢 Niall 写的关于保持基本 L4 应用程序最新的文章，所以去看看：安装和更新 Laravel 4

我发现这个例子只需克隆 repo 就足够了（假设你已经全局安装了 composer，如果没有，请访问[http://getcomposer.org/](http://getcomposer.org/)）：

```
git clone -b develop git://github.com/laravel/laravel.git app_name 
```

php作曲家安装

请注意，我们正在克隆开发分支，因为此时 L4 仍处于测试阶段。

因此，要从您的 URL 中删除“公共”部分，只需将所有文件和文件夹从公共移动到您的应用程序根目录，您最终会得到如下文件夹结构：

```
/app
/bootstrap
/packages (copied from /public)
/vendor
.htaccess (copied from /public)
artisan
composer.json
favicon.ico (copied from /public)
index.php (copied from /public)
robots.txt (copied from /public)
server.php 
```

现在我们需要在 index.php 中编辑我们的路径：

```
require __DIR__.'/bootstrap/autoload.php';

$app = require_once __DIR__.'/bootstrap/start.php'; 
```

然后只需在 /bootstrap/paths.php 文件中设置公共目录：

```
'public' => __DIR__.'/..', 
```

这是我的建议

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-01-08T14:17:06.133

要遵循的简单步骤：

1.  重命名`server.php`（在根目录中）为`index.php`
2.  将`.htaccess`文件从公共目录复制到根目录

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-01-26T05:58:11.003

重命名`server.php`to`index.php`和 copy `.htaccess`from`/public`是正确的方法。如果您在线发送您的应用程序，只需将 DocumentRoot 更改为 public 路径。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-02-24T13:02:47.073

这已经被问过很多次了。我有同样的问题。我通过使用 vhosts 和 .htaccess 文件解决了这个问题。我想写关于 Windows 上的 XAMPP 和 Ubuntu 上的 LAMP 安装的解决方案。我在 Windows 上的配置：我的目标是通过输入下面的 uri 来访问我的应用程序

```
http://localhost/subdir

c:\xampp\htdocs\subdir\ # this was laravel root directory
c:\xampp\apache\conf\extra\httpd-vhosts.conf # this virtual hosts file 
```

我使用了 Laravel 网站上的原始 .htaccess 文件（记住 .htaccess 文件必须在公共目录中），但我只添加了一行

```
RewriteBase /subdir (just below RewriteEngine On) 
```

此外，在 httpd-vhosts 文件中，您应该像这样添加子目录别名：

```
Alias /subdir
"C:/xampp/htdocs/subdir/public"
<Directory "C:/xampp/htdocs/subdir/public">
  Order allow,deny
  Allow from all
  Options All
  AllowOverride All
  Require all granted
</Directory> 
```

希望我的解释一切都清楚。这个答案可以很容易地应用于基于 unix 的系统。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-06-30T06:53:30.570

如果您从 url 中删除 public 首先将 index.php 和 .htaccess 文件从 public 文件夹移动到 laravel 的根目录并更改 index.php 文件

需要 DIR.'/../bootstrap/autoload.php'; $app = require_once DIR.'/../bootstrap/start.php';

至

需要 DIR.'/bootstrap/autoload.php'; $app = require_once DIR.'/bootstrap/start.php';

并运行程序

# php - 分解字符串数组

> ID：15586408
> 
> 赞同：0
> 
> 时间：2013-03-23T11:48:22.820
> 
> 标签：php, arrays, string, multidimensional-array, explode

我有一个来自后期操作的数组

```
$country = $_POST['country']; //The number of countries differ according to the user selection
$c = count($country); 
```

输出：`

```
Array ( [0] => England,69,93 [1] => Australia,79,84 [2] => Greece,89,73 [3] => Germany,59,73 )` 
```

我将不得不将其分解为一个多维数组，例如：

```
> Array ( [0] => Array ( [0] => England [1] => 69 [2] => 93)
>         [1] => Array ( [0] => Australia [1] => 79 [2] => 84)                      
>         [2] => Array ( [0] => Greece [1] => 89 [2] => 73)
>         [3] => Array ( [0] => Germany [1] => 59 [2] => 73)) 
```

我如何在 PHP 中执行此操作

我试过

```
$r = array();

foreach($country as &$r){
  $r = explode(",", $r);
  //for($i = 0; $i < count($country); $i++){
    //for($j = 0; $j < count($r); $j++){
        //$array[$i][$j] = $r;
    //}
  //}
}
echo '<br>';
print_r($r); 
```

for 循环也不起作用，因此将其注释掉，但如果需要，将其作为一个选项。

print 函数现在只打印数组中的 1 个。不完全确定我做错了什么。任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:51:28.173

你快到了：

```
$r = array();

foreach($country as $country_item){
  $r[] = explode(",", $country_item);
}
echo '<br>';
print_r($r); 
```

以上应该工作。

什么可能对您更好（如果您的国家/地区在每个阵列中都是独一无二的）：

```
$r = array();

foreach($country as $country_item){
  $temp_array = explode(",", $country_item);
  $r[$temp_array[0]] = array($temp_array[1], $temp_array[2]); 
}
echo '<br>';
print_r($r); 
```

这将为您提供如下输出：

```
> Array ( [England] => Array ( [0] => 69 [1] => 93)
>         [Australia] => Array ( [0] => 79 [1] => 84)                      
>         [Greece] => Array ( [0] => 89 [1] => 73)
>         [Germany] => Array ( [0] => 59 [1] => 73)) 
```

因此，这意味着您可以访问以下国家/地区的数据：

```
$r[$country_name]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:53:24.413

试试这个

```
for($i=0;$i<count($country);$i++)
 {
      $country1[$i] = explode(",", $country[$i]);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T11:53:43.460

您正在使用循环中的 $r 覆盖您的 $r 主数组 - 这是解决方案 - 始终划分您的变量：

```
$output = array();
foreach($country as $c){
  $parts = explode(',',$c);
  $output[] = $parts; 
}

print_r($output); 
```

# php - 替换 XML 中的子项

> ID：15586410
> 
> 赞同：2
> 
> 时间：2013-03-23T11:48:33.507
> 
> 标签：php, html, xml

```
<?php
$files = glob('users/*.xml');
foreach($files as $file) {
    $xml = new SimpleXMLElement($file, 0, true);
    echo '
        <tr>
            <td><input type="radio" name="browser" onclick="check(this.value)" value="'. basename($file) .'"></td>
            <td class="alternate-row1">'. basename($file, '.xml') .'</td>
            <td><span id="itm1" onclick="exchange(this.id)">'. $xml->name .'</span><input id="itm1b" class="replace" type="text" name="newname"></td>
            <td class="alternate-row1">'. $xml->lastname .'</td>
            <td>'. $xml->email .'</td>
            <td class="alternate-row1">'. $xml->level .'</td>
            <td>'. $xml->birthday .'</td>
            <td class="alternate-row1">'. $xml->gender .'</td>
            <td>'. $xml->age .'</td>
            <td class="alternate-row1">'. $xml->country .'</td>
        </tr>';
}
session_start();
if (isset($_POST['save'])){
    $member = $_POST['newname'];
    $dom = new DOMDocument();
    $dom->load('users/' . basename($file) . '.xml');
    $editname = $dom->getElementsByTagName('name');
    $newname = $dom->createTextNode($member);
    foreach ($editname as $edit) {
       $edit->parentNode->replaceChild($newname, $edit);
    }
    $dom->save('users/' . basename($file) . '.xml');
}
?> 
```

所以我编写了这段代码，你可以看到它有 DOM 和 Simple XML 元素。我尝试使用`$_POST`throw input 命令替换 child，输入框在上面的 echo 部分中，我使用 js 替换代码，它通过 onclick 命令替换文本以输入文本（对我的问题并不重要，它只是为了解释）。无论如何，由于代码无法正常工作，因此我几乎没有卡住，我设置了`$_POST`，我尝试使用在 Stack Overflow 中找到的一些指南，但由于它与我的代码不匹配，因此无法正常工作。

你有什么答案吗？

谢谢你的帮助，YD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:03:46.670

使用示例`simplexml`---> 查看现场演示：[http ://codepad.viper-7.com/2oR5Wk](http://codepad.viper-7.com/2oR5Wk)

```
$xmlstr = <<<XML
<root>
    <head>
        <name id="1">test</name>
        <name id="2">file</name>
        <name id="3">name</name>
    </head>
</root>
XML;

$xml = simplexml_load_string($xmlstr);

echo "<pre>";
var_dump($xml);
echo "</pre>";

$x = count($xml->head->name)-1;

for ($x; $x>=0; $x--) {

    $xml->head->name[$x] = "newname";

} 

echo "<pre>";
var_dump($xml);
echo "</pre>"; 
```

# solr - SOLR4/lucene 和 JVM 内存管理

> ID：15586411
> 
> 赞同：0
> 
> 时间：2013-03-23T11:48:39.370
> 
> 标签：solr, lucene, jvm, solr4

有谁知道 solr4/lucene 和 JVM 是如何管理内存的？

我们有以下案例。

我们有一个 15GB 的服务器，只运行 SOLR4/Lucene 和 JVM（没有自定义代码）

我们分配了 2GB 的内存，而 JVM 使用了 1.9MB。在某些时候发生了一些事情，我们的内存不足。

然后我们将 JVM 内存增加到 4GB，我们看到逐渐地，JVM 开始尽可能多地使用它。它现在使用分配的 4GB 中的 3GB。

那是正常的JVM内存使用吗？即 JVM 是否总是从分配的空间中尽可能多地使用它？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:47:37.950

构面正在使用字段缓存。如果您有很多用于分面的字段（甚至很小），那么很可能最终您会达到内存限制。

如果您有很多查询方面或定义了很多 FQ - 在您的情况下，每个过滤器缓存条目分配 1Mb。您已将 16384 定义为上限，因此您最终也可能会在此处遇到较大的数字。

希望这可以帮助。

# html - 新的 HTML5 输入标签有多安全

> ID：15586416
> 
> 赞同：4
> 
> 时间：2013-03-23T11:49:22.747
> 
> 标签：html, html-input

我正在考虑在我的网络应用程序中使用输入类型标签，例如

```
<input type="email">  
<input type="number" required="required"> 
```

我只是好奇使用它们有多安全，是否有任何选项可以让用户从浏览器中禁用它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T05:06:49.050

他们不安全。

你永远不能指望他们被处决。

您不能跳过服务器端输入检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T11:59:26.097

HTML 表单只是用户输入数据的*界面*。您的服务器收到的是一个 HTTP 请求，浏览器使用表单中输入的数据构建该请求。但是任何人都可以随时向您的服务器发送任何类型的 HTTP 请求，完全独立于任何 HTML 表单或网站。

**没有什么客户端是“安全的”。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T10:40:06.870

它们可以安全使用，但请避免使用正则表达式。

一些浏览器不支持标签。例如 Safari 不支持`<input type="email">`. 相反，即使它是无效的电子邮件地址，它也会将其视为`type="text"`并接受。`abc@xyz`有关详细信息，请参阅此 Stack Overflow[问题](https://stackoverflow.com/questions/14373433/how-does-html5-input-type-email-works-without-top-level-domain-name)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T06:51:12.537

对于输入法，HTML5 与 HTML4 一样安全，您的元素应由 JavaScript 或 PHP 控制。

**服务器端验证**是确保它们安全的最佳方式。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-18T11:10:58.453

`HTML5`与输入法的 HTML4 一样安全，您的元素应该由用户控制`JavaScript or PHP`并让它们验证用户输入的数据。

如果您担心与新的 HTML5 标签的兼容性，那么您应该使用包含两全其美的 HTML5Shiv。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-23T11:52:55.927

它们可以安全使用。用户不能禁用它们，如果浏览器不支持它们，它们的行为将类似于常规输入 type=text 元素

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-23T11:53:38.700

如果浏览器不理解某个类型，它将被视为`text`. 不可能说用户是否能够禁用它们，因为这里的人可能不知道的人在某处使用了一个不起眼的浏览器。防御性代码（如果它被禁用，请做好准备），但使用现有的功能。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-23T11:53:54.080

任何不知道这些新输入标签的旧浏览器都会至少将它们视为`text inputs`服务器端检查必不可少。

**编辑**：如果我的原始答案不清楚，但我**并不是**说只应在服务器端检查新标签。我只是想澄清一下，你不能仅仅因为前端有相应的输入就相信输入是有效的。

# java - 如何知道我的代码的哪一部分占用更多 CPU

> ID：15586423
> 
> 赞同：5
> 
> 时间：2013-03-23T11:50:06.623
> 
> 标签：java, recursion, time, complexity-theory

我想知道我的代码的哪些行在执行的大部分时间都在使用。我正在做一个规划器算法，要解决我提出的特定问题，计算机需要 5 分钟才能找到解决方案。

我正在使用很多递归方法，我想知道最浪费时间的地方，所以我可以查看这些行并尝试修复或重构代码以查看它是否有帮助。

我知道有圈复杂度方法。但我不知道如何在 Eclipse 上使用它。我正在使用 Helios。试图安装metrics2，它只是在我的Eclipse 上弹出错误。

已编辑：较小的新问题：

[http://s7.postimg.org/frd8yjql5/diag.png](http://s7.postimg.org/frd8yjql5/diag.png) 这是什么意思？看看堆大小..总是向上和向下..这会影响 CPU 速度吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T12:00:09.403

> 我想知道我的代码的哪些行在执行的大部分时间都在使用。

使用分析器运行您的代码。Eclipse 具有分析支持，但我建议使用作为 JDK 的一部分提供的分析器 - VisualVM。

（我不会从分析“大 O”复杂性开始。首先进行概要分析，这将告诉您从哪里开始寻找。然后您可能想要正式或非正式地查看热点的算法复杂性。）

> 我知道有圈复杂度方法。

圈复杂度不是性能的预测指标。它（据说）是代码可维护性的衡量标准，而不是计算复杂性的衡量标准。“metrics2”的东西可能也是如此，尽管我不熟悉它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T11:55:07.320

首先从抽象分析开始，然后才进入细节和测量。

### 摘要分析

对于分析，我会以[大 O 表示法](http://en.wikipedia.org/wiki/O-notation)查看您的算法的复杂性。那是对运行时的抽象分析（而像 Cyclomatic Complexity 这样的指标着眼于代码质量）。

对于算法分析，我觉得 Cormen 的[《算法简介》](https://rads.stackoverflow.com/amzn/click/com/0262033844)一书非常好。

当您了解算法的复杂性时，您可以检查替代算法是否更好或在哪里进行算法改进。

### 测量

避免[过早优化](http://c2.com/cgi/wiki?PrematureOptimization)：只有当你确定你有一个好的算法时，你才应该深入细节和衡量。

要检查您的理论分析是否正确并查看技术实现（主要是搜索热点并优化它们），您可以使用[宏基准测试工具](http://c2.com/cgi/wiki?PrematureOptimization)和[JVisualVM 之](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html)类的分析器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T11:57:38.930

在大多数情况下，分析器是最好的，但有时最好使用简单的秒表：[http ://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Stopwatch.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Stopwatch.html)

```
Basic usage:

Stopwatch stopwatch = new Stopwatch().start();
doSomething();
stopwatch.stop(); // optional

long millis = stopwatch.elapsed(MILLISECONDS);

log.info("that took: " + stopwatch); // formatted string like "12.3 ms" 
```

# c# - bash 管道 - 我正在尝试从 c# 调用脚本

> ID：15586424
> 
> 赞同：1
> 
> 时间：2013-03-23T11:50:21.760
> 
> 标签：c#, cygwin, pipe

我有一个有效的 cygwin bash 脚本：

```
#!/bin/sh
cd myc
cp Stats.txt Stats.txt.cpy;
cat Stats.txt.cpy | sort -n -k1 | gawk '{sum+=$2; print $0,sum}' > Stats.txt 
```

我想从 C# 中“调用”它：

```
string cmd="myscript.sh";
System.Diagnostics.Process proc = new System.Diagnostics.Process();

System.Diagnostics.ProcessStartInfo psi =
    new System.Diagnostics.ProcessStartInfo(@"C:\Cygwin\bin\bash.exe");
psi.Arguments = cmd;
psi.WorkingDirectory = "C:\\cygwin\\home\\Moon";
psi.RedirectStandardOutput = true;
psi.RedirectStandardError = true;
psi.UseShellExecute = false;
psi.CreateNoWindow = true;
proc.StartInfo = psi;

proc.Start();
string error = proc.StandardError.ReadToEnd();
string output = proc.StandardOutput.ReadToEnd();
this.textBox1.AppendText(error);
this.textBox1.AppendText(output); 
```

它在 cygwin 终端上运行良好，**但从**C# 我得到：

> 输入文件指定了两次。

我怀疑这是管道问题 - 任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:10:27.127

这是一个路径问题。

您需要在脚本中设置路径 - 否则它使用不同的“非 cygwin”路径并获取错误命令。

# c# - Windows Phone 7.XC# Visual Studio 广告错误

> ID：15586426
> 
> 赞同：0
> 
> 时间：2013-03-23T11:50:29.437
> 
> 标签：c#, visual-studio, windows-phone-7, ads

我正在尝试在我的应用程序中使用广告，但我尝试添加横幅视觉工作室的地方给了我这个错误：[http ://s9.postimg.org/mq0gxx2wt/screen.jpg](http://s9.postimg.org/mq0gxx2wt/screen.jpg)

这里是完整的错误：

> 抛出异常。
> 
> ArgumentException：字符串的长度不能为零。
> 
> System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark & stackMark, IntPtr pPrivHostBinder, Boolean for Introspection) 在 System.Reflection.RuntimeAssembly. Microsoft.Advertising.AdManager.SetExceptionMessagesCulture() 上 System.Reflection.Assembly.Load(String assemblyString) 上 Microsoft.Advertising.AdManager..cctor() 上的 InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection)
> 
> 内部异常：无

我什么都没碰，只是把ADControl从工具箱带到设计部分

有谁知道那是什么？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T22:03:48.837

我相信您正在使用带有广告 SDK 的 Visual Studio 2012。尝试将 Visual Studio 2010 Express 与 Windows Phone 一起使用，因为 AdControl 6.1 存在一个问题，它会导致 VS2012 设计器崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T19:45:50.427

将任何属性添加到 AdControl，保存它，删除添加的属性并再次保存，它应该可以解决设计器崩溃问题。

# mysql - LAST_INSERT_ID 函数会失败吗？

> ID：15586429
> 
> 赞同：-2
> 
> 时间：2013-03-23T11:50:46.433
> 
> 标签：mysql

我在 mysql 数据库上有一个注册程序，它的工作原理是这样的：

```
INSERT INTO `tblusers` (`uname`, `upwd`, `umail`) VALUES (RU_UNAME, RU_UPWD, RU_UMAIL);
select LAST_INSERT_ID() into @newuserid;

-- then use the @newuserid to make some work on other tables. 
```

现在我想知道它是否会得到错误的 id，特别是数据库将在其他表中插入很多，然后它可能会得到另一个表的 id，该表在插入用户和获取最后插入的 id 之间插入？

有失败的可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:54:47.377

一句话，没有。不同的数据库连接维护各自独立的`LAST_INSERT_ID`. 因此，其他一些插入记录的客户端`tblusers`不会影响您的`LAST_INSERT_ID`.

从[文档](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)中：

> 生成的 ID 在每个连接的基础上维护在服务器中。这意味着函数返回给给定客户端的值是为影响该客户端的 AUTO_INCREMENT 列的最新语句生成的第一个 AUTO_INCREMENT 值。此值不受其他客户端的影响，即使它们生成自己的 AUTO_INCREMENT 值。这种行为确保每个客户端都可以检索自己的 ID，而不用担心其他客户端的活动，也不需要锁或事务。

该[文档](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)值得一读。它非常详细地说明了事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:56:20.410

MySQL 使用锁系统，它不允许 2 个进程（2 次调用脚本）修改同一行。所以表不会crash*，但是有可能MySQL无法在合理的时间内处理请求的数量，请求会等待。您应该始终尽可能快地优化您的查询。

所以，最后插入的 id 不会失败。

# android - 在我的 Android 应用程序中实现搜索历史记录功能

> ID：15586430
> 
> 赞同：0
> 
> 时间：2013-03-23T11:51:05.127
> 
> 标签：android

我希望每次用户按下搜索按钮时，都必须保存结果，因为我正在向我的应用程序添加 10 个最新的搜索历史记录。

为了使这样的功能发挥作用，应保存检索到的数据。我在文档中搜索并发现： http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

应该使用哪个类来完成我的工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:53:09.883

要存储此类数据（最多 10 个项目），我只需将它们作为 JSON 存储在您的`SharedPreferences`. 请参阅Android文档的“存储选项”页面的这一章：[https ://developer.android.com/guide/topics/data/data-storage.html#pref](https://developer.android.com/guide/topics/data/data-storage.html#pref)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:57:26.773

使用共享首选项[http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)比较其他选项的更好方法.. 将其存储到 JSON 字符串 ..

[JSON 示例](http://www.vogella.com/articles/AndroidJSON/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T12:00:29.193

您希望在历史记录中存储多少数据？它会保存多久？如果您只想存储一些历史记录，比如说 5-10，您可以使用 SharedPreferences 并将数据编码为 JSON，如果您想获取它，您可以解析数据。例如历史将是这样的

```
{
    "history": [
        {
            "text": "aaa",
            "date": "23-03-2013"
        },
        {
            "text": "bbb",
            "date": "22-03-2013"
        },
        {
            "text": "bcccc",
            "date": "22-03-2013"
        }
    ]
} 
```

数据将一直保留，直到您的应用程序被卸载，或者如果您想清理它，您可以使用 SharedPreferences.Editor.clear()

但是，如果您想存储许多历史数据，比如说超过 100 个数据，您可以使用 sqlite 数据库，那么您可以在每次用户进入搜索功能所在的屏幕时查询数据我想它会足够快，因为您只获取文本不是 Blob，如果您想清除它，只需使用查询将其删除

# ios - NSAttributedString 错误。它附加了属性字典的描述

> ID：15586435
> 
> 赞同：0
> 
> 时间：2013-03-23T11:51:47.100
> 
> 标签：ios, objective-c, nsattributedstring

我正在创建一个属性字符串并有条件地应用删除线。这是代码：

```
 NSMutableDictionary *attributes = [[NSMutableDictionary alloc] init];
    if (needsStrikeThrough) {
        [attributes setValue:[NSNumber numberWithInt:NSUnderlineStyleSingle] forKey:NSStrikethroughStyleAttributeName];
    } else {
        [attributes setValue:[NSNumber numberWithInt:NSUnderlineStyleNone] forKey:NSStrikethroughStyleAttributeName];
    }
    NSAttributedString *attString = [[NSAttributedString alloc] initWithString:participant.firstName attributes:attributes];
    NSLog(@"attString= %@", attString);
    NSLog(@"[attributes description]= %@", [attributes description]); 
```

控制台中的输出是这样的：

```
attributedParticipantName= Belinda{
    NSStrikethrough = 0;
 }
[attributes description]= {
    NSStrikethrough = 0;
} 
```

所以字典的描述被附加到属性字符串中。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T11:58:27.853

这就是`description`方法的`NSAttributedString`实现方式。它旨在帮助您进行调试，以便您可以在（纯文本）控制台中检查字符串的属性。实际的字符串只是花括号（“Belinda”）之前的部分。要仅打印字符串，不带任何属性，您可以记录`attString.string`.

# php - mysql_select_db（不选择数据库

> ID：15586436
> 
> 赞同：-5
> 
> 时间：2013-03-23T11:51:47.957
> 
> 标签：php, mysql

我遇到了`mysql_select_db()`函数未选择正确数据库的问题。我的代码如下：

```
 global $file_count;

    $conlivedata = mysql_pconnect("localhost","*****","*****");
        if (!$conlivedata) {
      echo "Failed to connect to MySQL: " . mysqli_connect_error();
    }
    $con = mysql_pconnect("***************","*****","*****");
    if (!$con) {
      echo "Failed to connect to MySQL: " . mysqli_connect_error();
    }
    mysql_select_db("csv_db", $con)or die("A MySQL error has occurred.Your Query: Error: (" . mysql_errno() . ") " . mysql_error());

    $result = mysql_query("SELECT * FROM `tbl_name` WHERE EmailAddr <> ' ' ORDER BY `EmailAddr`") or die("<br/>A MySQL Query error has occurred.Your Query: Error: (" . mysql_errno() . ") " . mysql_error());

    while($row = mysql_fetch_array($result))
    {
        echo $row['first_name'] . " " . $row['last_name'];
        $Email = $row['EmailAddr'];
        if ($Email != NULL ){
            mysql_select_db("foswood_db", $conlivedata) or die("<br/>A MySQL error has occurred Slecting Database.<br />Your Query: <br/> Error: (" . mysql_errno() . ") " . mysql_error());
            $liveresult = mysql_query("SELECT COUNT(*) FROM pledges WHERE EmailAddr = '$Email'") or die("<br/>A MySQL error has occurred.<br />Your Query: <br /> Error: (" . mysql_errno() . ") " . mysql_error());
            if(mysql_result($liveresult, 0) ) echo ': **Voted**';;
            mysql_select_db("csv_db", $con) or die("<br/>A MySQL error has occurred Slecting Database.<br />Your Query: <br /> Error: (" . mysql_errno() . ") " . mysql_error());
        }
        echo "<br />";
    }

    mysql_close($con);
    mysql_close($conlivedata); 
```

我收到错误消息：

```
A MySQL error has occurred.
Your Query:
Error: (1146) Table 'csv_db.pledges' doesn't exist 
```

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:03:51.650

您应该指定用于查询的数据库。

```
$result = mysql_query("SELECT * FROM `tbl_name` WHERE EmailAddr <> ' ' ORDER BY `EmailAddr`", **$con**) ... 
```

# reporting-services - 要子报告的多个值

> ID：15586437
> 
> 赞同：0
> 
> 时间：2013-03-23T11:51:48.847
> 
> 标签：reporting-services, ssrs-2008

我是一个矩阵，它显示发票数量 (InvoiceID)，行上显示国家，标题上显示年份

```
Country  2001  2002  
US       100   300
UK       200   400
IR       500    90 
```

我需要创建一个显示发票详细信息的子报表。当我在主报告上单击 100(US-2001) 时，我必须显示所有 100 张发票。我尝试过这种方式：因为我正在计算矩阵中的 InoviceID，所以我尝试`Join(Fields!InvoiceID,", ")`在数据文本框操作上使用表达式（转到报告）。另一方面，我创建了一个带有多值参数的子报表。但是这种方法行得通。后来我发现 Join 不会工作行，因为它只需要数组。

后来我使用`Join(LookupSet(1,1,Fields!InvoiceID.Value, "DatasetName")," / ")`了我可以加入发票 ID，但问题是，这个表达式加入了完整数据集中的所有发票 ID。我只需要将 US-2001 发票带到我的子报告中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:24:53.790

您的子报表应该有两个参数：

*   `@Year`
*   `@Country`

使用这两个参数，子报表可以找到点击的发票。例如，如果传递了以下值：

*   `@Year`=“2001”
*   `@Country`=“英国”

然后它应该能够找到那些“200”发票并显示它们的详细信息。

如果您将主报告（显示`COUNT(InvoiceID)`和子报告`Invoice.*`）都建立在同一个视图上，那么在两个报告中获得一致的结果是非常安全的。

使用“转到子报表”操作，您应该能够填写这些参数。

# php - PHP脚本内存限制和内存优化

> ID：15586438
> 
> 赞同：3
> 
> 时间：2013-03-23T11:51:49.847
> 
> 标签：php

我有一个用于废弃网站的 php 脚本（仅限文本文件）。运行几个小时后，我注意到脚本因达到内存限制而停止。我知道我可以增加限制，但是由于脚本加载的文件只是 HTML 文件，因此我仅在每次循环后脚本无法清空内存时才解释达到限制。我可以通过定期刷新（）内存来优化脚本的内存管理吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T13:26:33.847

通常，您不需要在 PHP 中手动管理内存，因为它在 Zend 引擎中内置了一个高级内存管理器，它会为您处理这些。但是，了解一下它的工作原理是很有用的，以便更好地理解为什么您的代码内存不足。

作为**一个非常基本的概述**，PHP 根据引用特定数据的变量数量的“引用计数”来释放内存。因此，如果您说`$a = 'hello'; $b = $a;`，包含字符串的单个内存`'hello'`的引用计数为 2。如果您调用`unset()`任一变量，或者它们超出范围（例如，在定义它们的函数的末尾），引用计数将减少。一旦 refcount 达到零，数据将被删除并释放内存。请注意，在这种情况下，“已释放”表示已释放以供该 PHP 脚本的其他部分使用，不一定要释放回操作系统以供其他进程使用。

PHP 版本之间有一些**差异**值得了解：

*   *如果您有循环引用*（例如），上述引用计数机制将不起作用，`$obj1->foo = $obj2; $obj2->bar = $obj1;`因为引用计数永远不会达到零。在 PHP 5.2 和更早的版本中，这意味着这种循环引用会导致内存泄漏，并且必须由程序员手动处理。在 PHP 5.3 中，专门添加了一个[“垃圾收集器”](http://www.php.net/manual/en/features.gc.php)*来处理这种情况*。它不会取代正常的引用计数机制，但如果循环引用在您的代码中很常见，那么可能值得一读。
*   PHP 5.4 对 PHP 分配和使用内存的方式进行了大量优化。AFAIK，这些都没有改变如何编写高效代码的基本建议，如果可以的话，它们只是升级 PHP 版本的好理由。

除此之外，还有一些用于编写充分利用内存的 PHP 代码的常见技巧：

*   确保在不再需要时丢弃未使用的变量。在结构良好的程序中，这通常不是问题，因为大多数变量将是特定函数的局部变量；当函数退出时，它们将超出范围并被释放。但是如果你正在创建大型中间变量，或者动态创建大量变量，手动调用`unset()`可能是个好主意。如果你的代码是非常线性的，或者使用了大量的全局和静态变量，仅仅将它重构为一个更加模块化的结构就可以提高它的内存性能以及它的可读性、可维护性等。
*   通过引用 ( ) 分配或传递变量`$foo = &$bar`可能会导致 PHP 使用比直接赋值 ( )*更多*的内存`$foo = $bar`。这是因为 PHP 使用“Copy On Write”机制将具有相同内容的变量存储在内存的一个位置，但引用赋值与此机制冲突，因此 PHP 必须提前复制变量。
*   对象比标量值（int、boolean、string）或数组更占用内存。这是在 PHP 5.4 中得到很大改进的事情之一，但仍然值得思考——尽管显然不排除编写结构良好的代码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T12:11:07.270

您可以[取消设置](http://php.net/manual/en/function.unset.php)不再需要的变量（例如`unset($var)`或`$var = null`）。如果您使用的是 PHP 5.3 或更高版本，您还可以显式调用垃圾收集器：参见[gc_collect_cycles](http://php.net/manual/en/function.gc-collect-cycles.php) () 和[gc_enable](http://www.php.net/manual/en/function.gc-enable.php) ()。

有些功能似乎比其他功能更差。我最近发现这`array_merge_recursive()`对我的代码的内存占用做了可怕的事情。

如果您希望能够分析内存的去向，您可以使用 Xdebug 或 XHProf/XHGui 等工具来提供帮助。例如[Xdebug 和跟踪内存使用情况](http://derickrethans.nl/xdebug-and-tracing-memory-usage.html)以及[使用 XHProf 进行分析](http://techportal.inviqa.com/2009/12/01/profiling-with-xhprof/)

也可以看看：

[在 PHP 中强制释放内存](https://stackoverflow.com/questions/2461762/force-freeing-memory-in-php)

[脚本运行时的php垃圾收集](https://stackoverflow.com/questions/3110235/php-garbage-collection-while-script-running)

# apache-flex - 在flex中播放RTP流

> ID：15586439
> 
> 赞同：0
> 
> 时间：2013-03-23T11:51:49.970
> 
> 标签：apache-flex, audio-streaming, rtp, codec

**我正在尝试在 flex 中播放 RTP 播放负载，但没有成功。有人可以告诉我如何在不使用 RTMP Server 作为中间件的情况下实现这一点。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:24:32.720

您可以使用多种开源媒体服务器：

*   [红5](http://www.red5.org/)
*   [沃扎](http://www.wowza.com/)
*   [RTMPD](http://www.rtmpd.com/)

这些中的任何一个都适合您的目的。Flex 也让客户端变得非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:46:31.047

如果不使用 RTMP 服务器，您将无法做到这一点。您在 Flex 中找到的 NetConnection 类可以发送和接收 RTMP 流，并且这些流可以具有您在 RTP 数据包中找到的相同有效负载。不过，要解压 RTP 数据包并创建 RTMP 数据包，您需要一个 RTMP 服务器，如 Wowza Media Server 或类似的东西。

# vba - 无法在访问中选择未绑定组合框中的项目

> ID：15586440
> 
> 赞同：1
> 
> 时间：2013-03-23T11:51:56.843
> 
> 标签：vba, ms-access, combobox

我有一个不基于任何表的表单，并且我有一个组合框，可以从查询中获取数据（其中 hs id 和文本）。当我在 formview 中查看表单时，我可以打开组合框的下拉部分，它具有来自查询的值，但我无法选择它。我尝试通过以下任何一种方式选择它：

1- 单击一个项目。2- DBClicking 一个项目 3- 按下 ener 在一个项目上。

问题是什么，我该如何解决？

我在 Windows XP 上使用 Accesss 2003

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:04:25.823

您是否不小心将*Locked*属性设置为*Yes*？您仍然可以下拉锁定的组合框，但不能选择任何项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-05T20:11:22.687

查看您的表单是否将“允许编辑”属性设置为“真”。

# c# - 在 C# 中使用 microsoft access 和 OleDb 在数据库中添加数据

> ID：15586441
> 
> 赞同：2
> 
> 时间：2013-03-23T11:52:10.963
> 
> 标签：c#, ms-access, visual-studio-2012, oledb

我是 OleDb 库的新手，我想使用该库将文本表单文本框添加到数据库中。我的代码：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }
    private OleDbConnection conn = new OleDbConnection();
    private void button1_Click(object sender, EventArgs e)
    {
        conn.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\Project\Learning\Visual C#\Form\WindowsFormsApplication1\WindowsFormsApplication1\Test.mdb";
        string NAME = textBox1.Text;
        conn.Open();
        OleDbCommand cmmd = new OleDbCommand("INSERT into student(NAME)" + "VALUES(@NAME)", conn);  
        if (conn.State == ConnectionState.Open)
        {
            cmmd.Parameters.Add("@NAME", OleDbType.Char, 20);
            cmmd.Parameters["@NAME"].Value = NAME;
            try
            {
                cmmd.ExecuteNonQuery();
                MessageBox.Show("DATA ADDED");
                conn.Close();
            }
            catch (OleDbException expe)
            {
                MessageBox.Show(expe.Source);
            }
        }
        else
        {
            MessageBox.Show("CON FAILED");
        }
    }
} 
```

但它不起作用。我在 C# 中找不到*OleDbCommand的良好参考。*
如何在我的代码中使用*OleDbCommand ？*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T14:53:24.523

解决了

```
public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        OleDbConnection conn = new OleDbConnection();
        conn.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\Project\Learning\Visual C#\Form\WindowsFormsApplication2\WindowsFormsApplication2\Test.mdb";
        conn.Open();
        string Name = textBox1.Text;
        OleDbCommand cmmd = new OleDbCommand("INSERT INTO table1 (student) Values(@Name)", conn);
        if (conn.State == ConnectionState.Open)
        {
            cmmd.Parameters.Add("@Name", OleDbType.VarWChar, 20).Value = Name;
            try
            {
                cmmd.ExecuteNonQuery();
                MessageBox.Show("DATA ADDED");
                conn.Close();
            }
            catch (OleDbException expe)
            {
                MessageBox.Show(expe.Message);
                conn.Close();
            }
        }
        else
        {
            MessageBox.Show("CON FAILED");
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T12:00:24.910

可能是这段代码可以帮助你

```
 OleDbConnection dbConnection = new OleDbConnection(CONNECTION_STRING);

        string commandString = 
        "INSERT INTO MeetingEntries (Subject, Location, Start Date, End Date, Enable   Alarm, Repeat Alarm, Reminder, Repetition Type)" + " VALUES (?, ?, ?, ?, ?, ?, ?, ?)";

        OleDbCommand commandStatement = new OleDbCommand(commandString, dbConnection);

        commandStatement.Parameters.Add("@Subject", OleDbType.VarWChar, 30).Value = currentEntry.Subject;
        commandStatement.Parameters.Add("@Location", OleDbType.VarWChar, 50).Value = currentEntry.Location;
        commandStatement.Parameters.Add("@Start Date", OleDbType.Date, 40).Value = currentEntry.StartDateTime.Date;
        commandStatement.Parameters.Add("@End Date", OleDbType.Date, 40).Value = currentEntry.EndDateTime.Date;
        commandStatement.Parameters.Add("@Enable Alarm", OleDbType.Boolean, 1).Value = currentEntry.IsAlarmEnabled;
        commandStatement.Parameters.Add("@Repeat Alarm", OleDbType.Boolean, 1).Value = currentEntry.IsAlarmRepeated;
        commandStatement.Parameters.Add("@Reminder", OleDbType.Integer, 2).Value = currentEntry.Reminder;
        commandStatement.Parameters.Add("@Repetition Type", OleDbType.VarWChar, 10).Value = currentEntry.Repetition;

        dbConnection.Open();
        commandStatement.ExecuteNonQuery(); 
```

# r - 在漏斗图上绘制两组数据点（R 的 metafor）

> ID：15586463
> 
> 赞同：5
> 
> 时间：2013-03-23T03:11:37.767
> 
> 标签：r

我正在对流行病学数据进行荟萃分析，其中研究可以分为两组（例如通过方法学）。有没有办法改变漏斗图上绘制的点以识别组（例如点和十字）？
（就像使用 trimfill 时 pch.fill 所做的一样）谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T14:51:08.277

对于每项研究，都应该有一个指标显示它是方法 A 还是方法 B，对吗？假设变量名为 StudyType（= 16 如果方法 A，= 17 如果方法 B），然后您可以通过指定“pch=StudyType”用不同的符号绘制它们。该图将对 TypeA 使用 pch=16，对 TypeB 使用 pch=17。

```
### load BCG vaccine data
data(dat.bcg)

### Attach study type (I just randomly made up some here):
StudyType = sample(c(16,17),13,replace=T)

### meta-analysis of the log relative risks using a random-effects model
res <- rma(ai=tpos, bi=tneg, ci=cpos, di=cneg,
           data=dat.bcg, measure="RR", method="REML")

### standard funnel plot (Notice the pcd command)
funnel(res, pch=StudyType) 
```

![在此处输入图像描述](../Images/2111afa436241293d0def5fabe13a343.png)

# c# - DateTimePicker 跳回当前日期

> ID：15586470
> 
> 赞同：1
> 
> 时间：2013-03-23T11:55:30.590
> 
> 标签：c#, winforms, datetimepicker

我正在使用一个包含 2 Datetimepicker(dtp1, dtp2) 的winform，两者都与以下代码绑定

```
dtp1.DataBindings.Add("Text", bindingSource1, "<database-field1>");
dtp2.DataBindings.Add("Text", bindingSource1, "<database-field2>"); 
```

所以用例是用户选择一个日期并点击保存按钮，数据应该通过在按钮单击事件上调用的存储过程（sp）保存在数据库中。

在调用 sp 之前，我设置了 2 个 DateTime 变量并使用以下代码填充变量

```
var1 = dtp1.Value;
var2 = dtp2.Value; 
```

我遇到的问题是，如果用户点击保存按钮 dtp1 会保留所选值，但 dtp2 一旦焦点不再位于 dtp2 上，该值就会设置回当前日期。两个控件都使用相同的代码，并且两个控件都具有相同的设置，我很完整，完全一无所知，现在遇到了这个问题。

@Shaharyar 点击方法

```
DateTime var1, var2;

private void btn_WV_Anlegen_Click(object sender, EventArgs e)
{
  var2 = dtp2.Value;
  var1 = dtp1.Value;

  using (var context = new project_entities())
  {
    context.sp_update_WV(var1, var2);
  } 
```

# php - 如何使用 webdav 从 inotify 获取实名

> ID：15586471
> 
> 赞同：1
> 
> 时间：2013-03-23T11:55:49.217
> 
> 标签：php, webdav, inotify

我有一个 php 脚本，女巫监视 webdav 目录中的新/更改文件。但是当目录中有任何操作时，inotify 只返回一个临时名称（.davfs.tmp251671）。不是实际的文件名。

我可以从 inotify 和 webdav 获取真实文件名有什么改变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:16:51.850

找到了解决方案。
我使用 IN_CREATE（并用于测试 IN_CLOSE）作为触发器
，但这给了我上述结果。一个临时名称..
所以我使用 IN_ALL_EVENTS 进行测试。
发现掩码 128 给出了文件的实名。
但是...
根据[http://www.php.net/manual/en/inotify.constants.php](http://www.php.net/manual/en/inotify.constants.php)
IN_MOVED_FROM = 64
但是在测试 IN_CREATE 时给出了 256
所以在 php 手册站点上显示的顺序是不正确的。
我现在将数值 128 用于 add_watch。它有效！

# java - java数据库连接错误与mysql

> ID：15586477
> 
> 赞同：0
> 
> 时间：2013-03-23T11:56:20.723
> 
> 标签：java, mysql

我正在尝试使用 eclipse 在 eclipse juno 中进行 java 数据库连接，但出现以下错误

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
java.lang.NullPointerException 
```

建议我一些解决方案............这是我的代码：

```
package example;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
public class Connect {

public static Connection getConnection()
{
    String url="jdbc:mysql://localhost:3306/demo";
    String drive="com.mysql.jdbc.Driver";
    //String databse="demo";
    String user="root";
    String password="abc";
    Connection conn=null;
    try
    {
        Class.forName(drive);
        conn=DriverManager.getConnection(url, user, password);
    }
    catch (Exception e)
    {
        System.out.println(""+e);
    }
    return conn;
}
public static void main(String[] args)
{
    Connection conn=null;
    PreparedStatement pstmt=null;
    try
    {
        conn=getConnection();
        conn.setAutoCommit(false);
        pstmt=conn.prepareStatement("insert into testlongtele(address,name)values(?,?)");
        pstmt.setString(0, "NIRAV");
        pstmt.setString(1, "KAMANI");
        pstmt.executeUpdate();
        pstmt.close();
        conn.commit();
        conn.close();
    }
    catch(Exception e)
    {
        System.out.println(""+e);
    }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T11:59:53.783

从[这个链接：](http://javarevisited.blogspot.com/2012/03/jdbc-javalangclassnotfoundexception.html)

此错误的可能原因是：

1) 你的 Classpath 中没有 mysql-connector.jar。如前所述，此 jar 文件包含“com.mysql.jdbc.Driver”类，它必须存在于类路径中才能成功连接到 mysql 数据库。您可以从 mysql.com 下载 mysql-connector.jar。

2) mysql-connector.jar 在你的类路径中，但不知何故你的类路径被覆盖了。Java 中的类路径很棘手，jar 中指定的类路径可能会覆盖 CLASSPATH 路径变量。查看类路径在 Java 中的工作原理以详细了解此问题。

3) mysql-connector.jar 在类路径中，但当前用户没有读取权限。这个问题经常发生在具有基于用户、组和所有者级别的复杂文件和目录权限的 Unix 或 Linux 操作系统中。只需获得正确的许可并再次运行您的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:05:44.507

你可以加：

```
class.forName(driver).newInstance(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-19T04:05:24.230

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import com.mindtree.kalinga.exception.ConnectionfailedException;
public class JdbcConnection {
    private static JdbcConnection jdbcConnection;
    private static Connection dbConnection;
    private JdbcConnection() {
    }
    public static JdbcConnection getInstance() {
        if (jdbcConnection == null)
            jdbcConnection = new JdbcConnection();
        return jdbcConnection;
    }
    public static void createConnection() throws ConnectionfailedException {
        try {
            dbConnection = DriverManager.getConnection("jdbc:mysql://localhost:3306/mindtree", "root", "Welcome123");
        } catch (SQLException e) {
            throw new ConnectionfailedException("Error creating the connection to database", e);
        }
        System.out.println("Connection to db Established!");
    }
    public static Connection getConnection() {
        return dbConnection;
    }
    public static void closeConnection() throws ConnectionfailedException {
        try {
            dbConnection.close();
        } catch (SQLException e) {
            throw new ConnectionfailedException("connection  not closed properly", e);
        }
    }
}
--------------------------------------
Main
--------------------------------------
package com.mindtree.kalinga.controller;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;
import com.mindtree.kalinga.entity.Mindtree;
import com.mindtree.kalinga.exception.ConnectionfailedException;
import com.mindtree.kalinga.service.Mindtreeservice;
import com.mindtree.kalinga.serviceimp.Mindtreeserviceimp;
import com.mindtree.kalinga.utility.JdbcConnection;
public class MindtreeMain {
    static Scanner in = new Scanner(System.in);
    static Mindtreeservice ms = new Mindtreeserviceimp();
    public static void main(String[] args) {
        try {
            JdbcConnection.createConnection();
        } catch (ConnectionfailedException e) {
            System.out.println("Not able to connect to database! Terminating application!");
            e.printStackTrace();
        }
        MindtreeMain mm = new MindtreeMain();
        int i = 1;
        while (i == 1) {
            System.out.println("1\. to enter the detail\n" + "2\. fetch the detail\n" + "3\. to exit");
            int key = in.nextInt();
            switch (key) {
            case 1:
                Mindtree m = mm.createminds();
                break;
            case 2:
                List<Mindtree> ml = new ArrayList<>();
                mm.display(ml);
                break;
            case 3:
                i = 0;
                break;
            default:
                break;
            }
        }
    }
    private Mindtree createminds() {
        // TODO Auto-generated method stub
        System.out.println("enter the id of mind");
        int id = in.nextInt();
        in.nextLine();
        System.out.println("enter the name of mind");
        String name = in.nextLine();
        System.out.println("ente the address of minds");
        String address = in.nextLine();
        Mindtree m = new Mindtree(id, name, address);
        return m;
    }
    private void display(List<Mindtree> mind) {
        for (Mindtree i : mind) {
            System.out.println(i.getMid());
            System.out.println(i.getName());
            System.out.println(i.getAddress());
        }
    }
}
-------------------------------------------------
service
-------------------------------------------------
import java.util.List;
import com.mindtree.kalinga.entity.Mindtree;
public interface Mindtreeservice {
    public void insertmind(Mindtree m);
    public List<Mindtree> getAllminds();
}
---------------------------------------------
serviceimp
---------------------------------------------
package com.mindtree.kalinga.serviceimp;
import java.util.List;
import com.mindtree.kalinga.dao.Mindtreedao;
import com.mindtree.kalinga.daoimp.Mindtreedaoimp;
import com.mindtree.kalinga.entity.Mindtree;
import com.mindtree.kalinga.service.Mindtreeservice;
public class Mindtreeserviceimp implements Mindtreeservice {
    Mindtreedao md = new Mindtreedaoimp();
    @Override
    public void insertmind(Mindtree m) {
        // TODO Auto-generated method stub
        md.insertMindToDb(m);
    }
    @Override
    public List<Mindtree> getAllminds() {
        // TODO Auto-generated method stub
        return md.getAllMindFromDb();
    }
}
--------------------------------------------
dao
--------------------------------------------
import java.util.List;
import com.mindtree.kalinga.entity.Mindtree;
public interface Mindtreedao {
    public void insertMindToDb(Mindtree m);
    public List<Mindtree> getAllMindFromDb();
}
-------------------------------------------
daoimp
-------------------------------------------
package com.mindtree.kalinga.daoimp;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;
import com.mindtree.kalinga.dao.Mindtreedao;
import com.mindtree.kalinga.entity.Mindtree;
import com.mindtree.kalinga.utility.JdbcConnection;
import com.mysql.jdbc.Statement;
public class Mindtreedaoimp implements Mindtreedao {
    @Override
    public void insertMindToDb(Mindtree m) {
        Connection con = JdbcConnection.getConnection();
        String query = "insert into mindtree values(?,?,?);";
        PreparedStatement ps = null;
        try {
            ps = con.prepareStatement(query);
            ps.setInt(1, m.getMid());
            ps.setString(2, m.getName());
            ps.setString(3, m.getAddress());
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            System.out.println(e.getMessage());
        }
    }
    @Override
    public List<Mindtree> getAllMindFromDb() {
        // TODO Auto-generated method stub
        List<Mindtree> mtl = new ArrayList<Mindtree>();
        Connection con = JdbcConnection.getConnection();
        String query = "select * from mindtree;";
        Statement st = null;
        ResultSet rs = null;
        try {
            st = (Statement) con.createStatement();
            rs = st.executeQuery(query);
            while (rs.next()) {
                Mindtree m = new Mindtree(rs.getInt(1), rs.getString(2), rs.getString(3));
                mtl.add(m);
            }
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return mtl;
    }
}
-----------------------------------------------
exception
package com.mindtree.kalinga.exception;
public class ConnectionfailedException extends Exception {
    public ConnectionfailedException() {
        super();
        // TODO Auto-generated constructor stub
    }
    public ConnectionfailedException(String arg0, Throwable arg1, boolean arg2, boolean arg3) {
        super(arg0, arg1, arg2, arg3);
        // TODO Auto-generated constructor stub
    }
    public ConnectionfailedException(String arg0, Throwable arg1) {
        super(arg0, arg1);
        // TODO Auto-generated constructor stub
    }
    public ConnectionfailedException(String arg0) {
        super(arg0);
        // TODO Auto-generated constructor stub
    }
    public ConnectionfailedException(Throwable arg0) {
        super(arg0);
        // TODO Auto-generated constructor stub
    }
}
-----------------------------
entity
-----------------------------
package com.mindtree.kalinga.entity;
public class Mindtree {
    int Mid;
    String name;
    String address;
    public Mindtree(int mid, String name, String address) 
{

        Mid = mid;
        this.name = name;
        this.address = address;
    }
    public int getMid() {
        return Mid;
    }
    public void setMid(int mid) {
        Mid = mid;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getAddress() {
        return address;
    }
    public void setAddress(String address) {
        this.address = address;
    }

} 
```

# jsf - JSF 文件夹部署到 Tomcat

> ID：15586480
> 
> 赞同：1
> 
> 时间：2013-03-23T11:56:34.423
> 
> 标签：jsf, tomcat, deployment, jsf-2, tomcat7

*RackSpace 云服务器 Ubuntu-12.04、JSF-2.0、Mojarra-2.1.17、Intellij Idea-11.1.2、Windows-8、Tomcat 7.0.26、JDK-6。*

[从这里](https://stackoverflow.com/questions/14085371/tomcat-intellij-idea-remote-deploy)可以看出，我正在尝试将我的项目部署到远程 Tomcat 服务器。由于 Intellij Idea 的远程服务器部署功能无法正常工作，我正在尝试手动进行。

我已将`exploded war archive`文件夹（工件）`/var/lib/tomcat7/webapps`放在服务器上并将文件夹重命名为 ROOT。这好像是;`/var/lib/tomcat7/webapps/ROOT`

从服务器上的命令行重新启动 Tomcat 后，可以通过 *IPAddress:8080*正确访问站点。启动页面看起来不错，即使它正确加载了它的 CSS。但是在尝试登录后，它不像在本地那样工作。问题不在于实施，因为它在本地机器上完美运行。

尝试登录后的堆栈跟踪：

```
javax.faces.FacesException
helpers.JSFHelper.getManagedBean(JSFHelper.java:27)
servlet.facebook.FacebookCallBackServlet.doPost(FacebookCallBackServlet.java:202)
servlet.facebook.FacebookCallBackServlet.doGet(FacebookCallBackServlet.java:48)
javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:145) 
```

这是 JSFHelper 的 getManagedBean：

```
public static Object getManagedBean(final String beanName) {
        FacesContext fc = FacesContext.getCurrentInstance();
        Object bean;

        try {
            ELContext elContext = fc.getELContext();
            bean = elContext.getELResolver().getValue(elContext, null, beanName);
        } catch (RuntimeException e) {
            throw new FacesException(e.getMessage(), e);
        }

        if (bean == null) {
            throw new FacesException("Managed bean with name '" + beanName
                    + "' was not found. Check your faces-config.xml or @ManagedBean annotation.");
        }

        return bean;
    } 
```

# java - 即使页面在包中也找不到页面

> ID：15586484
> 
> 赞同：0
> 
> 时间：2013-03-23T11:56:54.960
> 
> 标签：java, gwt, errai

我的`Errai GWT`应用程序出现问题，当页面尝试访问`TransitionTo`页面时出现此错误，例如`FormsPage`：

```
No page with a widget type of com.mycompany.myproject.client.local.FormsPage exists 
```

即使 FormsPage 在包中并且没有编译时错误（因此它能够找到页面）：

```
TransitionTo<FormsPage> formsPage; 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:40:41.997

我忘记了`@Page`“页面”类中的包含注释。

所以添加它解决了这个问题。

# sql - SimpleMemberShip MVC 4，进行 2 个重复的 SQL 查询？

> ID：15586489
> 
> 赞同：1
> 
> 时间：2013-03-23T11:57:51.427
> 
> 标签：sql, asp.net-mvc-4, simplemembership

我不知道这是否会发生，但在通过 MiniProfiler 查看我的一些应用程序后，我注意到 SimpleMembership 和 Roles 对服务器进行重复的 SQL 查询。

这是 miniprofiler 的结果：

```
http://localhost:49422/ActionMatrix/ActionMatrix?Length=0&D=23%2F03%2F2013&ProTyp=&ActTyp=&X-Requested-With=XMLHttpRequest
T+3.7 ms
Scalar
0.3 ms
QueryValue QueryValue GetUserId GetRolesForUser
SELECT [UID] FROM [Usernames] WHERE (UPPER([User]) = @0)   
http://localhost:49422/ActionMatrix/ActionMatrix?Length=0&D=23%2F03%2F2013&ProTyp=&ActTyp=&X-Requested-With=XMLHttpRequest
T+4.4 ms
Reader
0.2 ms
MoveNext Query Query GetRolesForUser
SELECT r.RoleName FROM webpages_UsersInRoles u, webpages_Roles r Where (u.UserId = @0 and u.RoleId = r.RoleId) GROUP BY RoleName   
http://localhost:49422/ActionMatrix/ActionMatrix?Length=0&D=23%2F03%2F2013&ProTyp=&ActTyp=&X-Requested-With=XMLHttpRequest
T+5.1 ms
DUPLICATE Scalar
0.2 ms
QueryValue QueryValue GetUserId GetRolesForUser MoveNext HasClaim IsInRole
SELECT [UID] FROM [Usernames] WHERE (UPPER([User]) = @0)   
http://localhost:49422/ActionMatrix/ActionMatrix?Length=0&D=23%2F03%2F2013&ProTyp=&ActTyp=&X-Requested-With=XMLHttpRequest
T+5.7 ms
DUPLICATE Reader
0.1 ms
MoveNext Query Query GetRolesForUser MoveNext HasClaim IsInRole
SELECT r.RoleName FROM webpages_UsersInRoles u, webpages_Roles r Where (u.UserId = @0 and u.RoleId = r.RoleId) GROUP BY RoleName 
```

也许它会检查两次？它肯定会减慢页面加载速度。没有全局过滤器，它只通过一个“授权”。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T18:21:54.893

代替 ：

```
User.IsRole("roleName") or Roles.IsUserInRole("roleName") 
```

我用了 ：

```
Roles.FindUsersInRole("roleName", User.Identity.Name).Any() 
```

它不是最好的查询....

我认为这是一个错误...

# php - 编写易于替换的php数据库类

> ID：15586491
> 
> 赞同：2
> 
> 时间：2013-03-23T11:57:57.643
> 
> 标签：php, database, class

我正在开发一个需要一些数据库交互的小型 PHP 应用程序。在我达到多功能性和集成性之前一切都很好，因为我希望应用程序易于在其他网站中实现。

我担心的是，让两个数据库类并排运行是否是一种好习惯，因为我的应用程序将集成到的网站可能有它自己的一个。这是一个大问题，如何（甚至我应该？）以这样一种方式制作数据库类，以便很容易用另一个替换它。

到目前为止，我的想法是

*   只需使用我自己的类，这样用户就可以定义他的数据库连接

或者

*   使用一些通用的函数命名规则创建类，`$this->db->Query(); $this->db->fetchAll()`这样它很容易扩展，并且这些函数可以被网站本地的函数替换。

我将班级保持在很小的规模，功能很少，但我仍然对如何创建它以使其尽可能地对开发人员友好感到困惑。

谢谢，
M。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:21:01.083

以下是最流行的 php 数据对象接口：

1.  [MySQLi - 内置 PHP 数据库接口](http://www.php.net/manual/en/ref.pdo-mysql.php)
2.  [PDO - 内置 PHP 数据对象](http://php.net/manual/en/book.pdo.php)
3.  [推进](http://propelorm.org/)
4.  [教义](http://www.doctrine-project.org/)
5.  [PHP 活动记录](http://www.phpactiverecord.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:43:03.137

*“让两个数据库类并排运行是一种好习惯吗？”* 不，这没有意义……？

我将使用可以轻松转移到另一个站点的特定 DB 类。我会使用 PDO 对象来实现这一点。settings.ini 应该存储在 webroot 之外，因为登录凭据等存储在那里。

```
<?php
class DB_Instance
{
    private static $db;

    public static function getDBO()
    {
        global $dbSettings;
        global $dsn;
        global $user;
        global $password;

        if (!self::$db)

            //Get connection parameters from ini-file
            $dbSettings = parse_ini_file('settings.ini', true);
            $dsn = 'mysql:dbname=' . $dbSettings['database']['name'] . ';host=' . $dbSettings['database']['host'];
            $user = $dbSettings['database']['user'];
            $password = $dbSettings['database']['password'];

            try {   
                $dbh = new PDO($dsn, $user, $password, array(PDO::ATTR_PERSISTENT => TRUE));
            } catch (PDOException $e) {
                echo 'Connection failed: ' . $e->getMessage();
            }
            $dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
            $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            $dbh->exec("set names utf8");
            self::$db = $dbh;

        return self::$db;
    }
}
?> 
```

然后由这样的类访问：

```
<?php
class Language {
    private $languageId;                //Language identifier
    private $language;                  //Which language
    private $dbInstance;                //DBInstance

    public function __construct($languageId = null) {
        $this->dbInstance = DB_Instance::getDBO();
.... 
```

然后执行如下函数：

```
$statement = $dbInstance->{PDO function} 
```

有关 PDO 类的更多信息，请查看：[http ://www.php.net/manual/en/class.pdo.php](http://www.php.net/manual/en/class.pdo.php)

# c - 使用 ELF 文件

> ID：15586492
> 
> 赞同：3
> 
> 时间：2013-03-23T11:58:03.173
> 
> 标签：c, linux, elf

我需要在我的 C 程序中使用简单的 ELF 文件。我不能使用任何外部库，但我可以使用`elf.h`.

让我们以 hello.o 文件为源：

```
int Hello() { return 3; } 
```

我如何才能`Hello`在只有`hello.o`文件的其他 C 程序中访问？

我可能应该使用这样的方法将它加载到内存中`mmap`。最后我需要处理很多复杂的 ELF 文件，但我现在不知道如何开始。

更新：我需要按照我描述的方式执行此操作，因为它是出于学习目的。整个问题比我描述的更复杂。

对于这个问题，假设我需要编写方法：

```
int HelloFromElfO(const char* helloFile); 
```

这将执行`Hello`中实现的功能`helloFile`。

我不想要完整的答案。我不需要任何代码。我需要一些东西来开始。

我对 ELF 文件结构有基本的了解，但我不知道如何在没有任何解析器或类似这样的东西的情况下使用二进制文件在 C 中工作。

UPDATE2：好的，像 readelf 这样的应用程序**非常**复杂。所以也许我尝试这种方式：让我们再说一遍我已经`hello.o`映射到内存`ptr`。如何获得指向`Hello`函数的指针？

如何从中获取任何结构化数据`hello.o`？我的意思是，不是纯字节，而是我可以使用的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T12:15:41.917

这比你想象的要容易得多。ELF 与您的问题无关（`mmap()`甚至更远......）。`hello.o`不是 ELF 文件，而是**目标**文件。

您只需将目标文件链接到您的可执行文件，然后您就可以访问`Hello()`. 假设您已将程序编译为目标文件 as `yourCode.o`，则将其`yourCode.o`与`hello.o`

```
cc yourCode.o hello.o -o yourExecutable 
```

见[这里](http://www.network-theory.co.uk/docs/gccintro/gccintro_14.html)。

**编辑**：

如果您不想链接文件但动态加载它，那么

1.  [`mmap()`](http://linux.die.net/man/2/mmap)目标文件
2.  获取`Hello()`内存中的地址。您可以对此进行静态分析`hello.o`（例如使用[`objdump`](http://linux.die.net/man/1/objdump)）并获取`Hello()`文件中的入口点偏移量。
3.  将此偏移量添加到由返回的地址`mmap()`以获取`Hello()`地址。
4.  将地址映射`Hello()`到[函数指针](https://stackoverflow.com/questions/840501/how-do-function-pointers-in-c-work)
5.  调用函数。
6.  ？？？
7.  利润

# php - 学说多对一关系持久化操作

> ID：15586495
> 
> 赞同：19
> 
> 时间：2013-03-23T11:58:15.013
> 
> 标签：php, mysql, doctrine-orm

我有一个故事表和用户表。故事表中的 userid 列是一个外键，它引用了用户表中的 id。

我设置的关系是用户可能有许多存储在故事表中的故事。我已经创建了两个表的实体。

但是，如果尝试仅将操作持久化到故事表，则它会询问新用户条目的详细信息。

我的目标是在现有的`userId`.

我在这里发布错误：

> 通过未配置为实体级联持久操作的关系“Story#_userId”找到一个新实体：User@0000000038960c50000000008ea93852。要解决这个问题：要么在这个未知实体上显式调用 EntityManager#persist()，要么配置级联在映射中保持此关联，例如 @ManyToOne(..,cascade={\"persist\"})。

我在实体中设置了 ManyToOne 关系`Story`：

```
/**
 * @ManyToOne(targetEntity="User", inversedBy = "_story" )
 * @JoinColumns({
 *     @JoinColumn(name="user_id", referencedColumnName="id")
 * })
 */

private $_userId; 
```

我检查了数据库架构，它显示关系设置正确。所以我已经完成了故事插入过程。

```
$user = new User();
$user->setUserId($id);
$story = new Story();
$story->setContent("....");
$story->setUserid($user);
$this->em->persist($story);
$this->em->flush(); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-24T00:34:32.097

您可能正在持久化故事实体，而不是用户。如果你有这样的事情：

```
$story = new Story();
$user = new User();
$story->setUser($user);
$em->persist($story);
$em->flush(); 
```

这将导致致命错误，因为您正在持久化一个实体，但通过它的关系，Doctrine 找到了另一个新实体。你有两个选择：

在两个实体上保持调用：

```
$story = new Story();
$user = new User();
$story->setUser($user);
$em->persist($story);
$em->persist($user);
$em->flush(); 
```

或者，为 Story 实体设置级联持久化。例如。如果您正在使用注释映射，您会执行类似的操作

```
/**
 * @ManyToOne(targetEntity="User", inversedBy="stories", cascade={"persist"})
 */
private $author; 
```

第[8 章使用关联](http://docs.doctrine-project.org/en/latest/reference/working-with-associations.html#transitive-persistence-cascade-operations)对此进行了详细说明。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-07T06:56:53.667

K. Norbert 的回答恰到好处，但有些事情可能不清楚。至少对于从 SQL 开始学说的我来说还不清楚。

问题是教义似乎记住了哪些对象已经被持久化。每当它找到与您想要持久化的实体相关的**新（尚未持久化）对象时 - 它就会大喊“通过关系找到新实体......”错误。**当您想保存新对象（只有一个实体，没有持久化相关实体）时，您只需要确保相关实体已经持久化。所以：

```
$story = new Story();
$entityManager->find('User', $id);
$story->setUser($user);
$em->persist($story);
$em->flush(); 
```

成功了。因为教义知道用户已经被持久化并且不需要再这样做了。Doctrine 知道是因为我们从数据库中获取了用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-16T09:54:20.217

你不认为你应该设置而`User`不是`Userid``story`

```
$user = new User();
$user->setUserId($id);
$story = new Story();
$story->setContent("....");
$story->setUser($user);   //change here
$this->em->persist($story);
$this->em->flush(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T12:09:22.727

我很难理解你需要什么，所以我不确定这是否会回答你的问题。

由于 story.user_id 是 user.id 的外键（主键），因此不能为空/null。因此，假设您有一个 php 会话，您可能应该将您的用户 ID（或用户名）存储在会话变量中，并且当您在故事表中创建新记录时，使用会话中的用户 ID 来填充story.user_id 属性。

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T17:43:38.950

如果你附上你的实体，我会很有帮助。

但我想这对我来说是类似的问题。您不能在一个字段中同时定义@Id 和@ManyToOne。您必须为@Id 和关系@ManyToOne 使用单独的字段。

如果你有一个新的（尚未持久化的）用户实体，你必须持久化用户在字段中的 cascade={"persist"} 或 cascade={"all"} 对应于 Story 实体。只有当 User 已经存在并且附加到 Doctrine 时，您才能存储 Story 实体。

希望它有所帮助。

# mysql - 在 MySql 中对列进行排序并将结果设置为另一列

> ID：15586498
> 
> 赞同：0
> 
> 时间：2013-03-23T11:58:19.170
> 
> 标签：mysql

我对查询有疑问。假设我有一个这样的表结构。

```
TABLE_A
Id - Standing - Point
1      null       8
2      null       9
3      null       12
4      null       11
5      null       4 
```

当我按点列（SELECT * FROM TABLE_A ORDER BY Point DESC）对该表进行排序时，我想根据排序结果更新要更新的站立列。在对这些值进行排序并将其设置为 Standing 列之后，我想要的结果是：

```
TABLE_A
Id - Standing - Point
1      4        8
2      3        9
3      1        12
4      2        11
5      5        4 
```

是否有可能做到这一点？如果是，如何？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:58:26.660

您可以使用相当晦涩的语法来做到这一点：

```
update table_A
    set standing = (select cnt
                    from (select count(*) as cnt
                          from table_a a2
                          where a2.point >= table_A.point
                         )
                   ) 
```

嵌套选择的使用只是 MySQL 所需的语法约定。

# objective-c - 使用 enumerateObjectsAtIndexes 或 for 循环在给定索引之前遍历 NSArray 的所有索引

> ID：15586508
> 
> 赞同：3
> 
> 时间：2013-03-23T11:59:39.003
> 
> 标签：objective-c, nsarray, iteration, nsrange, nsindexset

遍历给定索引之前出现的 NSArray 索引的最简洁方法是什么？例如：

```
NSArray *myArray = @[ @"animal" , @"vegetable" , @"mineral" , @"piano" ];

[myArray enumerateObjectsAtIndexes:@"all before index 2" options:nil 
    usingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
           // this block will be peformed on @"animal" and @"vegetable"
    }]; 
```

此外，如果给定索引为 0，则根本不应该循环。

最简洁、最优雅的方法是什么？到目前为止，我只拼凑了使用烦人的 NSRange 和索引集的笨拙的多行答案。有没有更好的方法可以忽略？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T12:05:50.903

```
NSArray *myArray = @[ @"animal" , @"vegetable" , @"mineral" , @"piano" ];
NSUInteger stopIndex = 2;

[myArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    if (idx == stopIndex) {
        *stop = YES; // stop enumeration
    } else {
        // Do something ...
        NSLog(@"%@", obj);
    }
}]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T12:19:09.197

```
[myArray enumerateObjectsAtIndexes:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, idx)]     
                           options:0
                        usingBlock:^(id obj, NSUInteger idx, BOOL *stop) {

}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T12:03:30.193

关于什么 ：

```
index = 2;
for (int i = 0; i < [myArray count] && i < index; ++i) {
   id currObj = [myArray objectAtIndex:i];
   // Do your stuff on currObj;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-09T17:28:26.523

[就我个人而言，我会使用Martin R](https://stackoverflow.com/a/15586571/106435)或[yourfriendzak](https://stackoverflow.com/a/15586686/106435)所示的基于块的枚举，[giorashc](https://stackoverflow.com/a/15586544/106435)接受的答案可能是最糟糕的，因为它不提供突变防护。

我想添加一个（正确的）快速枚举示例

```
NSUInteger stopIndex = 2;
NSUInteger currentIndex = 0;
for (MyClass *obj in objArray) {
    if (currentIndex < stopIndex) {
        // do sth...
    } else {
        break;
    }
    ++currentIndex;      
} 
```

# c# - system.invalidoperationexception

> ID：15586510
> 
> 赞同：-1
> 
> 时间：2013-03-23T11:59:44.270
> 
> 标签：c#, transactions, invalidoperationexception, sqlcedatareader

我正在尝试运行此代码

```
public Exception SetData(string Data , long NoOfColumnsAllowed)
    {
        try
        {
            con = new SqlCeConnection(conectionstring);
            con.Open();
            transaction = con.BeginTransaction();
            com = new SqlCeCommand();
            com.Transaction = transaction;
            com.CommandText = "Select  count(*) from [Copy]";
            com.Connection = con;
            sdr = com.ExecuteReader();
            while (sdr.Read())
            {
                noOfColumns = sdr.GetInt32(0);
            }

            if (noOfColumns > NoOfColumnsAllowed)
            {
                long NoOfColumsToBeDeleted = noOfColumns - NoOfColumnsAllowed;
                com.CommandText = "delete from [Copy] where Sno<=@sno";
                com.Parameters.AddWithValue("@sno", NoOfColumsToBeDeleted);
                com.ExecuteNonQuery();
            }

            com.CommandText = "Insert into [Copy] (Data) values (@data)";
            com.Parameters.AddWithValue("@data", Data);
            com.ExecuteNonQuery();
            transaction.Commit();
            con.Close();

            return null;
        }
        catch (Exception ex)
        {
            try
            {
                transaction.Rollback();
            }
            catch (Exception)
            {

            }
            con.Close();
            return ex;
        }

    } 
```

发生异常 -

> *system.invalidoperationexception：如果在此事务的范围内有任何打开的游标，则无法提交该事务。确保在提交更改之前明确关闭所有数据读取器/结果集。*

我是事务新手，无法找到有关打开游标的任何有价值的解决方案。代码有问题吗，或者我必须明确关闭数据阅读器，如果是，请告诉我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:03:18.190

只需调用 sdr.Close(); 在while循环之后，因为这就是错误所抱怨的。

# php - 从超类的构造函数调用子类方法

> ID：15586512
> 
> 赞同：0
> 
> 时间：2013-03-23T11:59:51.917
> 
> 标签：php

如何从超类构造函数调用子类方法？

示例子类：

```
<?php
include('../classes/A.php');

class B extends A {
     public function __construct()
    {
        parent::__construct($this->view);
    }
    public function view() {
        //something
    }
}

$b = new B;

?> 
```

示例超类：

```
<?php
abstract class A
{
    private $callback;

    public function __construct($callback)
    {
        $this->callback = $callback;

        call_user_func($this->callback);
    }   
}
?> 
```

我该怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:04:31.367

传递一个包含您的对象实例的数组`$this`，以及要调用的方法

（参见调用类方法[`call_user_func`手册页](http://php.net/manual/en/function.call-user-func.php)的示例 #4 ）

```
class B extends A {
    public function __construct()
    {
        parent::__construct(array($this, 'view'));
    }
    public function view() {
        //something
    }
} 
```

# php - 如果这部分变量以斜杠开头，则删除部分变量

> ID：15586515
> 
> 赞同：1
> 
> 时间：2013-03-23T12:00:18.037
> 
> 标签：php, string, variables

```
 $string ="string
    string
    //deleteme
    string
    //deleteme
    // deleteme
    string"; 
```

如何删除所有以双斜杠开头的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:09:20.260

我想你应该使用 preg_replace 用空字符串替换单词/行。就像是：

```
$regex = '/ \/\/ [^\n]* \n /';
preg_replace($regex, '', $string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T12:11:53.477

删除整行：

```
$string = preg_replace('/\/\/\S*[^\n]+\n?/','',$string); 
```

# jquery - jquery函数一直运行mousemove事件？

> ID：15586518
> 
> 赞同：0
> 
> 时间：2013-03-23T12:00:24.857
> 
> 标签：jquery, html, button

我编写了这个脚本来在网页中制作一个可转动的按钮。它工作得很好，但它不想退出该功能。它继续运行括号内的代码。知道我该如何解决吗？这是我现在拥有的代码。

如果您按下鼠标并拖动，则该值将发生变化。但现在它无处不在，只有当你点击按钮而不是拖动时才会发生这种情况。

```
function pressed(){
var PosibleVal = new Array(8,41,74,107,140,174);
$(window).on("mousemove", function(e) {
    if (e.which == 1) { // if left mouse button is pressed
      var posY=(e.pageY - 158)*(-1); // read the mouse Y-position 

        if(posY<0)
        {
            posY=0;
        }
        if(posY>180)
        {
            posY=180;
        }
        var ar = Math.round(posY/33); //Round number 

        var cssPosY = "-webkit-transform:rotate("+PosibleVal[ar]+"deg)";
        $("#innerheater").attr("style", cssPosY); // change rotation
    } 
});

} 
```

[这里](http://www.kobey.be/buttonExample.html)是示例的链接。（它仅适用于 chrome 和 safari）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:15:29.100

我会这样做

```
<script type="text/javascript">
$(document).ready(function()
{
    var PosibleVal = new Array(8,41,74,107,140,174);
    $('#heater').on("mousemove", function(e)
    {
         if (e.which == 1) {
         var posY=(e.pageY - 158)*(-1);

         if(posY<0)
            posY=0;
         if(posY>180)
            posY=180;
         var ar = Math.round(posY/33); //geen komma getal
         var cssPosY = "-webkit-transform:rotate("+PosibleVal[ar]+"deg)";
         $("#innerheater").attr("style", cssPosY);
    } 
});
</script> 
```

在#heater div 上设置onMouseMove 事件对我来说更合乎逻辑。然后，您可以将其替换`<div id="heater" onclick="pressed()">`为`<div id="heater">`.

# android - 使用 API 17 进行渲染时，Android Button 文本未居中

> ID：15586521
> 
> 赞同：11
> 
> 时间：2013-03-23T12:00:58.533
> 
> 标签：android, eclipse, android-layout

在布局的图形视图中，当我从下图中显示的按钮中选择 API 15 或更低版本时，环绕按钮中的文本看起来很好。

![在此处输入图像描述](../Images/47afc1af0faa91c8248d488ebc097be3.png)

当我选择 API 17 时，即使 xml 代码相同，文本也会被替换。更改按钮填充没有帮助。

![在此处输入图像描述](../Images/3b42f17e4c7b59c44e2a242261bf68c8.png)

这只是 Eclipse 的一个问题，还是新版本的 android 可能会看到这个移位的文本？

解决此问题的解决方法是什么？

XML 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".HomeActivity" >

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_margin="3dp" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="100dp"
        android:src="@drawable/label" />
</LinearLayout>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/linearLayout1"
    android:layout_below="@+id/linearLayout1"
    android:layout_marginTop="20dp"
    android:text="@string/about_title"
    android:textSize="20sp" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView1"
    android:layout_alignRight="@+id/linearLayout1"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="5dp"
    android:text="@string/temp" />

<LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView2"
    android:layout_alignRight="@+id/textView2"
    android:layout_below="@+id/textView2"
    android:layout_marginTop="20dp"
    android:baselineAligned="false" >

    <Button
        android:id="@+id/button1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/news" />

    <Button
        android:id="@+id/button2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/tournaments" />

    <Button
        android:id="@+id/button3"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/results" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T12:17:46.637

`android:gravity="center"`没有帮助

我重新启动了两次eclipse。奇怪的是，它在第​​一次重新启动时没有帮助，但在第二次重新启动后看起来很好。此外，它在设备上运行良好。为这个问题道歉，我必须在发布问题之前等待。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T12:04:37.203

不确定 API17 中按钮的默认样式是否更改......可能......

无论如何，添加`android:gravity="center"`应该为您解决这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T12:14:19.397

我不知道我遇到了这个问题检查重新启动 Eclipse.. 并检查..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T12:08:44.213

添加`android:gravity="center"`应该为您解决此问题

# c++ - 为什么下面的重载解析会调用非模板函数？

> ID：15586526
> 
> 赞同：8
> 
> 时间：2013-03-23T12:01:19.923
> 
> 标签：c++, templates, overloading

`max(x, y)`为什么下面表达式中调用的重载解析`return max(max(x, y), z);`会导致调用非模板函数`char const* max(char const*, char const*)`？

据我所知，该函数`max<const char*>(x, y)`比前者更适合，`x`a`const char* const&`和`y`a 也是如此`const char* const&`！

```
#include <iostream>

template <typename T>
T const& max (T const& x, T const& y)
{
    return x < y ? y : x;
}

char const* max (char const* x, char const* y)
{
    return std::strcmp(x, y) < 0 ? y : x;
}

template <typename T>
T const& max (T const& x, T const& y, T const& z)
{
    return max (max(x, y), z);
}

int main ()
{
    const char* sx = "String_x";
    const char* sy = "String_y";
    const char* sz = "String_z";
    max(sx, sy, sz);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T12:05:37.737

> `max(x, y)`为什么下面表达式中调用的重载解析`return max(max(x, y), z);`会导致调用非模板函数`char const* max(char const*, char const*)`？

调用此函数时：

```
template <typename T>
T const& max (T const& x, T const& y, T const& z)
{
    return max (max(x, y), z);
} 
```

`T`被推断为`const char*`。因此，此签名被实例化：

```
const char* const& max (
    const char* const& x, 
    const char* const& y, 
    const char* const& z
    ) 
```

该函数在内部调用`max()`带有类型参数的二进制版本`const char*`。对于 type 的参数，模板和非模板重载都是可行的`const char*`。

但是，当两个函数都可以解决调用*并且*其中一个不是模板时，**非模板版本被认为是最合适的**。

根据 C++11 标准的第 13.3.3/1 段：

> 鉴于这些定义，** 一个可行函数 F1 被定义为比另一个可行函数 F2 更好的函数，如果** 对于所有参数 i，ICSi(F1) 不是比 ICSi(F2) 更差的转换序列，然后
> 
> — 对于某些参数 j，ICSj(F1) 是比 ICSj(F2) 更好的转换序列，或者，如果不是，
> 
> — 上下文是通过用户定义的转换（见 8.5、13.3.1.5 和 13.3.1.6）和从 F1 的返回类型到目标类型（即被初始化的实体的类型）的标准转换序列进行的初始化是比从 F2 的返回类型到目标类型的标准转换序列更好的转换序列。[ ... ] 或者，如果不是这样，
> 
> — **F1 是非模板函数，F2 是函数模板特化**，或者，如果不是，
> 
> — F1 和 F2 是函数模板特化，根据 14.5.6.2 中描述的偏序规则，F1 的函数模板比​​ F2 的模板更特化。

这解释了为什么选择非模板重载。

# heroku - 应用程序在heroku上运行时更新文件

> ID：15586529
> 
> 赞同：0
> 
> 时间：2013-03-23T12:01:50.413
> 
> 标签：heroku, python-3.x

假设如果我打开我的 heroku 网页，它会更新一个文件，比如数据库。

现在我想找回它。

我尝试了 git pull，完成后，我检查了一下，这是我上次推送的旧文件。我尝试了 heroku run bash 和“cat”-ed 文件，它给出了旧的输出。：/

但我可以保证，文件正在更新，因为如果我通过服务器输出文件内容，例如如果我请求地址上的特定路径，它将在浏览器上显示该文件的内容，然后显示更新的数据。

我不知道为什么会这样。有什么线索吗？

我正在使用带有 wsgiref 模块的 python3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:20:43.623

您不应该将 dyno 文件系统用于持久文件存储（如数据库）。dyno 文件系统是短暂的，更改不会反映在与您的应用程序关联的 git 存储库中。请改用其中一种数据存储插件：[https ://addons.heroku.com](https://addons.heroku.com)

# html - CSS Web字体如何使用@font-face它不起作用

> ID：15586537
> 
> 赞同：0
> 
> 时间：2013-03-23T12:02:55.103
> 
> 标签：html, css

这是我的网络字体样式表

```
@font-face {
font-family: 'bebas_neueregular';
src: url('bebasneue-webfont.eot');
src: url('bebasneue-webfont.eot?#iefix') format('embedded-opentype'),
     url('bebasneue-webfont.woff') format('woff'),
     url('bebasneue-webfont.ttf') format('truetype'),
     url('bebasneue-webfont.svg#bebas_neueregular') format('svg');
font-weight: normal;
font-style: normal;

} 
```

我用这样的字体

```
.men_tp{
        color: #d1d3d5; 
        float: left; 
        font-family:"bebas_neueregular",Arial; 
        font-size:22px;
         } 
```

它在我的机器上工作正常，因为我有这些字体，但即使我将那些字体 src 放在同一个区域，我也放置了那个 CSS 文件。帮帮我，伙计们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:15:13.750

尝试将您的 CSS 行更改为以下内容：

```
.men_tp {
    color: #d1d3d5;
    float: left;
    font-family: bebas_neueregular, Arial;
    font-size:22px;
} 
```

（插入换行符只是为了便于在此页面上阅读。）

您已在 @font-face 块中将新字体声明为具有名称“bebas-neueregular”，因此您需要在样式的 CSS 声明中使用它`.men_tp`。

# reporting-services - 将子报表链接到矩阵

> ID：15586540
> 
> 赞同：0
> 
> 时间：2013-03-23T12:03:13.363
> 
> 标签：reporting-services, ssrs-2008

我有一个如下所示的矩阵。列上的年份和行上的国家/地区。

```
Countries  2001    2002
US         100     400
UK         200     290
IR         300      89 
```

我需要创建一个显示发票详细信息的子报表。当我在主报告上单击 100 (US-1002) 时，我必须显示所有 100 张发票。我试过这样：

由于我正在对矩阵中的 InvoiceID 进行计数，因此我尝试`Join(Fields!InvoiceID,", ")`在数据测试框操作上使用表达式（转到报告）。另一方面，我创建了一个带有多值参数的子报表。但是这种方法行不通。我发现 Join 不适用于数据行，因为它期望数组。

后来我使用`Join(LookupSet(1,1,Fields!Name.Value, "DatasetName")," / ").`了我可以加入发票 ID，但问题是，这个表达式加入了完整数据集中的所有发票 ID。我只需要 US-2001 单元格 (100) 发票 ID 即可用于我的子报表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:07:20.493

根据您的描述，听起来最简单的方法是将子报表设置为采用两个参数*Country*和*Year*，而不是尝试传递发票列表。

然后子报表可以报告特定*国家*和*年份*组合的所有发票。

如上所述，将钻取设置为接受其参数的两个字段会更简单，而不是尝试为特定单元格范围内的所有发票制定表达式。

# android - 为自定义视图设置 onClickListener

> ID：15586549
> 
> 赞同：2
> 
> 时间：2013-03-23T12:04:05.397
> 
> 标签：android

我创建了一个名为 Cell 的自定义视图，它绘制了一个正方形。在我的活动中，我创建了一个二维单元格数组，因此给出了一个网格结构。现在这样做的原因是，我希望单个单元格根据它们具有的某些值来响应我的点击。例如，每个单元格都有一个布尔值，基于真或假，我将为单元格着色。我尝试先用一个单元格进行此操作。但奇怪的是，即使我在单元格外部单击，也会触发单击事件。更多信息：我在活动的 onCreate 方法中创建所有视图。如果您需要更多信息，请与我们联系。

在此先感谢您的帮助 ！以为我会编辑我的原始问题以供其他参考:)。

```
Activity  

onCreate() {
super.onCreate(savedInstanceState);
LinearLayout masterLayout = new LinearLayout(this);
LinearLayout.LayoutParams params;
params =  new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT,     
LinearLayout.LayoutParams.MATCH_PARENT);
masterLayout.setLayoutParams(params);
addCells();
setContentView(masterLayout);
}

function addCells() {
for(int i =0; i<2;i++) {
Cell cell = new Cell(this,i);
LinearLayout.LayoutParams viewParams = new LinearLayout.LayoutParams(
LinearLayout.LayoutParams.WRAP_CONTENT,
LinearLayout.LayoutParams.WRAP_CONTENT);
cell.setLayoutParams(viewParams);
masterLayout.addView(cell);

cell.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {
//Do Something here

}
});}}

Custom View :

Cell extends View {
boolean flag=false;
int cellNumber;
float xCoordinate=50;
float yCoordinate=50;

Cell(Context context, AttributeSet attrs) {
super(context, attrs);
}
Cell (Context context, int i) {
super(context);
cellNumber = i;
}

onDraw(Canvas c) {
paint.setColor(Color.RED);
paint.setStrokeWidth(3);
paint.setStyle(Paint.Style.STROKE);
xCoordinate = xCoordinate + 40*cellNumber;
c.drawRect(xCoordinate,yCoordinate,xCoordinate+40,yCoordinate+40, paint);

}} 
```

这是我正在尝试的一个更简单的版本。现在奇怪的是，虽然我添加了自定义视图的两个不同实例，但 onDraw() 只被调用一次（在退出活动的 onCreate() 时）。根据我的阅读，每个新视图渲染都会调用 onDraw() 。请在这方面启发我！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:22:30.873

我想您没有将 onClickListener 设置为正确的布局。它有些如何设置为您想要的元素的父级。请为我们分享您的代码，以解决确切的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:22:49.560

> 即使我在单元格外部单击，也会触发单击事件。

可能您以某种方式将触摸事件转发到您的单元格，至少它正在接收它们。在您的视图的 onTouchEvent() 方法中决定它是单击（并触发单击侦听器）还是长按或拖动等。

但是，如果这不能帮助您识别问题，请发布一些代码。

# ruby-on-rails - 如何在rails上隐藏ruby中的字符串

> ID：15586557
> 
> 赞同：1
> 
> 时间：2013-03-23T12:04:47.743
> 
> 标签：ruby-on-rails, view

在视图中有一个字符串，它从带有网站地址的数据库字符串中显示。如何使数据库中没有该网站地址，字符串不会显示视图？

**网站：**
<%= link_to @restaurant.site, url_with_protocol(@restaurant.site) >

在没有网站地址的情况下，它仍然是第一个字符串，我希望它只在有地址时出现

附言

可以做到这一点，就像编写这段代码一样：

<% if session[:user_id] %> <% end >

仅当用户注册时才显示信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:06:31.380

就用同样的方法。

```
<% if @restaurant.site %>
  <%= link_to @restaurant.site, url_with_protocol(@restaurant.site) %>
<% end %> 
```

# matlab - 测量不同维度的矩阵之间的距离

> ID：15586558
> 
> 赞同：-1
> 
> 时间：2013-03-23T12:04:51.307
> 
> 标签：matlab, distance, dimensions

我有两个矩阵，一个矩阵的值范围为`0-1`，另一个矩阵的值仅为`0`和`1`。我有兴趣仅计算与等于 的像素的距离`1`。在这种情况下，我想创建一个新矩阵，该矩阵仅包含具有`1`来自第二个对象的值的像素，然后获取到这些对象的距离。但是，在这种情况下，尺寸会有所不同。

注意：这两个矩阵原本是相同维度的。但是，有许多不感兴趣的细胞（即；那些有价值的细胞`0`）

如何对不同尺寸的物体进行这种距离计算？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:38:27.607

如果像素的位置对计算不重要，那么您可以像这样使用逻辑索引：

```
A = [0 1 0 0 1 1 0 0 1 1 1]; 
B = rand(size(A));
nonZeroInd = A == 1;
Anz = A(nonZeroInd);
Bnz = B(nonZeroInd);
dist = Bnz - Anz; 
```

如果您需要矩阵中的结果与原始位置相同，那么您可以这样做

```
C = zeros(size(A));
C(nonZeroInd) = dist; 
```

# authentication - 使用 Windows Live 提供程序的低代码、简单的 Azure 网站安全？

> ID：15586562
> 
> 赞同：1
> 
> 时间：2013-03-23T12:05:10.367
> 
> 标签：authentication, azure, acs, saml-2.0, federated-identity

我有这个需要在 Azure 上保护的网页。我想成为唯一可以访问它的人。我不需要花哨的登录或错误页面流程。该页面/站点以前在我的家庭 Web 服务器上运行，因此通过 web.config 身份验证标签进行的 Windows 身份验证“非常容易”实现。

我正在研究具有 STS、ACS、SAML、Federated 的 Azure 身份验证模型......并且说实话我对我需要做什么感到有些困惑。另外，我想知道为什么 MS 没有提供简单的控制面板界面来保护和维护对网站的访问，因此我们不必创建服务和自定义网站代码来管理所有这些。

概括地说，我需要执行哪些最少步骤才能完成此任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T17:13:36.447

如果您是唯一一个使用该网站的人，那么我不确定您是否需要经历所有这些麻烦。

但是，另一方面，做你想做的并不那么复杂：

1.  获取 ACS 命名空间
2.  在你的机器上安装 WIF
3.  在您的 Web 项目中运行“添加 STS 引用”并指向您的 ACS 命名空间（查找联合元数据端点）
4.  在 ACS（或任何其他预配置的 IdP）中配置 LiveID 信任
5.  配置 ACS 以为您的应用程序颁发令牌

由于您的需求非常简单，因此默认规则可能适合您。

这[是一篇](http://www.windowsazure.com/en-us/develop/net/how-to-guides/access-control/)逐步解释所有内容的文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T21:31:30.783

您可以使用很容易实现的表单身份验证。

将您的应用程序设置为在 web.config 中使用表单身份验证。

```
<authentication mode="Forms">
  <forms name=".ASPXAUTH" loginUrl="/myadminlogin.aspx" protection="All" path="/" timeout="120" />
</authentication> 
```

在 web.config 中定义受保护的文件夹。

```
 <location path="secure">
    <system.web>
      <authorization>
        <deny users="?" />
      </authorization>
    </system.web>
  </location> 
```

在您的登录区域中检查条件并设置身份验证 cookie：

```
 'SET AUTH COOKIE
    FormsAuthentication.SetAuthCookie(sessionID, False) 
```

检查受保护页面上的会话：

```
If User.Identity.Name.ToString = "sessionID" then
'Permit access
End if 
```

# jquery - 自动完成多个值，保留换行符

> ID：15586563
> 
> 赞同：0
> 
> 时间：2013-03-23T12:05:11.057
> 
> 标签：jquery, jquery-ui, jquery-autocomplete, multiple-value

我将 jQuery UI 示例中的代码用于多个值。当我尝试插入换行符时，它会让我，但是当我尝试添加新项目时，它会删除换行符。如何保留换行符？

参考。 [http://jqueryui.com/autocomplete/#multiple](http://jqueryui.com/autocomplete/#multiple)

```
 function split(val) {
        return val.split(/\s\s*/);
    }
    function extractLast(term) {
        return split(term).pop();
    }
    function formatItem(item) {
        return item.substr(item.indexOf(" ") + 1);
    }

    $("#propertyInfo, #legalDesc, #taxes, #additionalTaxes, #mortgagesLiensCourt, #additionalMatters")
     .addClass('shiftTabClass')
     .bind("keydown", function (event) {
         if (event.keyCode === $.ui.keyCode.TAB &&
         $(this).data("ui-autocomplete").menu.active) {
             event.preventDefault();
         }
     })
     .autocomplete({
         source: function (request, response) {
             // delegate back to autocomplete, but extract the last term
             var term = extractLast(request.term);
             var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex(term), "i");
             //response($.grep(availableTags, function (item) {
             response($.grep(textCodes[this.element.attr('id')], function (item) {
                 return matcher.test(item);
             }));
         },
         focus: function () {
             // prevent value inserted on focus
             return false;
         },
         minLength: 1,
         select: function (event, ui) {
             var terms = split(this.value);
             // remove the current input
             terms.pop();
             // add the selected item
             terms.push(formatItem(ui.item.value));
             // add placeholder to get the comma-and-space at the end
             terms.push("");
             this.value = terms.join("  ");
             return false;
         }
     }); 
```

**编辑：**

这样做会得到我想要的，但它会添加搜索文本，即如果我键入“ja”并单击“Java”，它不仅会添加“Java”，还会添加“jaJava”。如果我可以从 $(this).val() 中删除搜索词，我可能会得到我想要的……有人知道该怎么做吗？

```
select: function (event, ui) {
     $(this).val($(this).val() + ui.item.value);
     return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:36:51.417

我能够用这段代码得到我想要的东西，但可能还有改进的余地......

```
 function removeLastInstance(badtext, str) {
        var charpos = str.lastIndexOf(badtext);
        if (charpos < 0) return str;
        ptone = str.substring(0, charpos);
        pttwo = str.substring(charpos + (badtext.length));
        return (ptone + pttwo);
    }

    var sTerm;

    $("#propertyInfo, #legalDesc, #taxes, #additionalTaxes, #mortgagesLiensCourt, #additionalMatters, #abstractorComments")
     .addClass('shiftTabClass')
     .bind("keydown", function (event) {
         if (event.keyCode === $.ui.keyCode.TAB &&
         $(this).data("ui-autocomplete").menu.active) {
             event.preventDefault();
         }
     })
     .autocomplete({
         source: function (request, response) {
             // delegate back to autocomplete, but extract the last term
             var term = extractLast(request.term);
             sTerm = term;
             var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex(term), "i");
             //response($.grep(availableTags, function (item) {
             response($.grep(textCodes[this.element.attr('id')], function (item) {
                 return matcher.test(item);
             }));
         },
         focus: function () {
             // prevent value inserted on focus
             return false;
         },
         minLength: 1,
         select: function (event, ui) {
             /*
             var terms = split(this.value);
             // remove the current input
             terms.pop();
             // add the selected item
             terms.push(formatItem(ui.item.value));
             // add placeholder to get the comma-and-space at the end
             terms.push("");
             this.value = terms.join("  ");
             return false;
             */
             console.log(sTerm);
             $(this).val(removeLastInstance(sTerm, $(this).val()) + ui.item.value);
             return false;
         }
     }); 
```

# r - R中的if语句只能有一行？

> ID：15586566
> 
> 赞同：25
> 
> 时间：2013-03-23T12:05:28.140
> 
> 标签：r, if-statement, grammar

我正在尝试一个带有 if 语句的小代码，虽然它很简单，但是我真正感到困惑的是代码

```
n<-857
while(n!=1){
if(n<=0)
 print("please input a positive integer")
else if(n%%2==0)
 n<-n/2
 print(n)
else
 n<-3*n+1
 print(n)
  } 
```

正如我们在上面看到的，在 R 中运行这段代码时，会出现错误，但是如果我像这样更改 if 语句

```
if(n<=0)
     print("please input a positive integer")
    else if(n%%2==0)
     n<-n/2
    else
     n<-3*n+1 
```

没关系，我的问题是我们可以在每个判断下只写一行吗？如果我想在每次判断后多做一些事情，我该怎么办，就像这个案例一样，我想改变n的值，但也想显示它，我该怎么办？非常感谢你

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-23T13:38:08.450

准确地说，这不是关于行，而是关于*语句*。您可以将整个`if else`语句放在一行中：

```
> if (TRUE) 1 else 3
[1] 1 
```

语句将在行尾结束（如果完整），如果您逐行输入代码，您可以在交互模式下很好地看到：

```
> if (TRUE) 
+ 1
[1] 1
> else
Fehler: Unerwartete(s) 'else' in "else" # error: unexpected 'else' in "else"
> 3
[1] 3 
```

`if`如果语句在第 2 行之后完成`if (condition) statement`，`if (condition) statement else other.statement`则解释器假定第一个版本是指第一个版本 - 在交互模式下，它不能明智地等待`else`下一个是否出现。这在`source`d 代码中是不同的 - 下一行很清楚它是哪种形式。

分号也结束语句：

```
> if (TRUE) 1; else 3
[1] 1
Fehler: Unerwartete(s) 'else' in " else"  # error: unexpected 'else' in "else" 
```

但是条件的每个分支中只能有一个*语句*。

```
> if (TRUE) 1; 2 else 3
[1] 1
Fehler: Unerwartete(s) 'else' in " 2 else" # error: unexpected 'else' in "2 else" 
```

花括号将语句分组，因此它们显示为一个语句。

```
> if (TRUE) {1; 2} else 3
[1] 2 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-23T12:08:32.737

您必须使用`{}`for 允许`if`语句多于一行。试试这个：

```
n<-857
while(n!=1){
  if(n<=0){
    print("please input a positive integer")
  }

  else if(n%%2==0){
    n<-n/2
    print(n)
  }
    else {
      n<-3*n+1
      print(n)
    }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-23T12:08:28.910

要对语句进行分组，请用花括号将它们括起来，就像您对`while`循环所做的那样：

```
if(n<=0) {
     print("please input a positive integer")
} else if(n%%2==0) {
     n<-n/2
     print(n)
} else {
     n<-3*n+1
     print(n)
} 
```

`if`这将允许您在、 the`else if`和 final中放置多个语句`else`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T13:37:41.500

如前所述，直接的答案是使用花括号；
值得补充的是，您可以将`<-`赋值运算符集成到许多函数中。

在您的具体情况下：

```
 print(n <- 3*n+1)

   ## instead of 
   #  n <- 3*n+1
   #  print(n) 
```

* * *

请注意，`=`在这里使用将*不起作用*。一定是`<-`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-25T19:55:02.517

*是的，您可以使用花括号为每个条件语句包含多个语句：*

```
if (condition){
    statement 1
    print()
}
else{
    statement 2 
    print()
} 
```

*另外：*如果你只想在一行中使用 if 和 else 语句，你可以使用这个：

```
ifelse(condition, statement1, statement2) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-23T12:09:23.903

听说过卷曲的barces吗？

```
n<-857
while(n!=1){
    if(n<=0) {
        print("please input a positive integer")
    } else if(n%%2==0) {
        n<-n/2
        print(n)
    } else {
        n<-3*n+1
        print(n)
    }
} 
```

# javascript - 使用 querySelectorAll 获取选定的选项

> ID：15586577
> 
> 赞同：28
> 
> 时间：2013-03-23T12:06:09.813
> 
> 标签：javascript, html-select, selectors-api

我想知道是否有可能在 Javascript 中`<select multiple>`使用 Selctors API 获取字段中当前选定的选项，而不是对所有选项进行“愚蠢”迭代。

`select.querySelectorAll('option[selected="selected"]')`仅返回在原始 HTML 中标记为预选的选项，这不是我想要的。有任何想法吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-23T14:26:40.013

`document.querySelectorAll('option:checked')`

甚至可以在 IE9 上工作；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:10:29.953

我也遇到过你的问题，我觉得这与 JavaScript 无法识别 DOM 中的变化有关。

这是一个解决方案：

[jsFiddle](http://jsfiddle.net/Tyriar/HQqBN/1/)

```
document.getElementById('test').onclick = function () {
    var select = document.getElementById('select');
    var options = getSelectedOptions(select);
    console.log(options);
};

function getSelectedOptions(select) {
    var result = [];
    var options = select.getElementsByTagName('option');
    for (var i = 0; i < options.length; i++) {
        if (options[i].selected)
            result.push(options[i]);
    };
    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-07T12:34:00.010

如中所述

[https://www.w3schools.com/jsref/prop_select_selectedindex.asp](https://www.w3schools.com/jsref/prop_select_selectedindex.asp)

您可以使用 selectObject.selectedIndex 获取当前选定的索引

它还在`change`eventListener 中发生变化。

例如：

```
id_selected = document.querySelector('#sel').selectedIndex;
console.log(document.querySelector('#sel')[id_selected]); 
```

# php - 仅输出特定节点 PHP XML

> ID：15586579
> 
> 赞同：0
> 
> 时间：2013-03-23T12:06:31.780
> 
> 标签：php, xml

我试图保存特定节点而不是完整的 xml 文件，但出现错误。

*可捕获的致命错误：传递给 DOMDocument::saveXML() 的参数 1 必须是 DOMNode 的实例，DOMNodeList 的实例在第 31 行的 php\corrdination.php 中给出*

我正在关注厄运文档，但由于我不创建新元素并且只从已创建的 xml 文件中读取，因此它不适用于创建新元素。

我的第 31 行是

```
$resultX = $xpath->query('/stickers/sticker[id="200"]/position/x'); 
```

当我试图只保存我写的更改的节点时。

```
echo $xml->saveXML($resultX); 
```

关于如何做的任何建议？这是我的整个 php 文件。

```
 $xml = new DOMDocument();
    $xml->formatOutput = TRUE;
    $xml->preserveWhiteSpace = FALSE; 
    $xml->load('../stickers.xml');

    $xpath = new DOMXPath($xml);
    $resultX = $xpath->query('/stickers/sticker[id="200"]/position/x'); 
    $resultX->item(0)->nodeValue = "150"; 
echo $xml->saveXML($resultX); 
```

如果我只`echo $xml->saveXML();` 查询有效，但正如我所说，它会保存整个节点结构。

XML 文件：

```
<stickers>
  <sticker>
    <position>
      <x>0</x>
    </position>
    <text>Hello world </text>
    <id>200</id>
  </sticker>
 </stickers> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:22:33.247

错误说你必须传递`DOMNode`给`DOMDocument::saveXML()`. 所以你需要改变这一行：

```
echo $xml->saveXML($resultX); 
```

对此：

```
echo $xml->saveXML($resultX->item(0)); 
```

# php - 如何将变量传递给 Laravel 中的另一个控制器

> ID：15586580
> 
> 赞同：2
> 
> 时间：2013-03-23T12:06:35.193
> 
> 标签：php, laravel, hmvc, laravel-3

我有一个产品控制器和一个标头控制器。加载产品控制器时，我使用 Route::forward() 加载我的标头控制器。

```
return View::make('frontend.catalogue.product.view')
            ->with('head', Route::forward("GET", "frontend/page/head")); 
```

然后，我可以通过执行以下操作来回显页面上的标题：

```
<?php echo $head; ?> 
```

简单的。但是，我想将信息传递给将在产品控制器中定义的标题控制器，例如页面标题或元描述。

理想情况下，我要么能够将数组传递给标头，要么在某处有一个两个路由请求都可以访问的实例化类。

我已经尝试在我的基本控制器构造函数中实例化一个库，但是这会在每个 Route::forward() 请求上重新实例化，因此我设置的任何属性都无法在下一次转发中读取。

我能想到的唯一方法是使用会话数据，但这似乎不是最好的方法。

标头确实需要是一个控制器，而不仅仅是一个视图编辑器，因为它处理它自己的模型等。

我知道 Laravel 不做 HMVC，这将是理想的解决方案，而且我知道 HMVC 有捆绑包，但我很好奇你会如何以 Laravel 的方式处理这个问题。

（使用 Laravel 3.2 顺便说一句）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:08:54.240

设法让它按我想要的方式工作。对于其他感兴趣的人：

而不是使用

```
return View::make('frontend.catalogue.product.view')
             ->with('head', Route::forward("GET", "frontend/page/head")); 
```

我现在在主请求控制器中执行以下操作：

```
 $document = array(
        'meta_title' => 'My Title',
        'meta_description' => 'My Description',
    );

    // Output the view
    return View::make('frontend.catalogue.category.view')
                    ->with('head', Controller::call('frontend.page.head@index', array($document))); 
```

在我的`frontend/page/head`控制器中，我有以下内容：

```
public function action_index($document = array()) {

       $meta_title = isset($document['meta_title']) ? $document['meta_title'] : 'Default Title';

       return View::make('frontend.page.head')
                ->with('meta_title', $meta_title);

} 
```

[向Laravel IRC](http://laravel.com/irc)上的友好人士提供帮助以帮助解决此问题

# batch-file - 不带 /WAIT 的批处理文件 START 命令

> ID：15586582
> 
> 赞同：1
> 
> 时间：2013-03-23T12:07:03.900
> 
> 标签：batch-file

我需要从一个批处理文件启动一个 exe，在它运行之后，我希望 CMD 提示退出，而不是等待应用程序退出。

只输入EXE的位置是不行的，好像要等它退出。

有没有办法不使用 START 命令执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:09:44.880

使用 CALL 而不是 START

```
call notepad.exe
echo byby
exit 
```

# c++ - c++中char[]的子串

> ID：15586586
> 
> 赞同：9
> 
> 时间：2013-03-23T12:08:22.397
> 
> 标签：c++, char, substring

我有

```
 char t[200];
  cin.get(s, 200);
  int i = 5; 
  int j = 10; 
```

`substriing(i,j)`除了`t`将每个元素分别复制到另一个数组之外，还有什么简单的方法吗？没有`strings`等只是`char t[200]`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T12:11:43.940

如果允许修改`t`，则可以设置`t[j]`为`0`，然后用于`t + i`获取子字符串。

如果没有，您将不得不制作副本。

就是说，为什么您不能使用`std::string`并省去自己的头痛？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-04T16:10:59.863

```
char* substr(char* arr, int begin, int len)
{
    char* res = new char[len + 1];
    for (int i = 0; i < len; i++)
        res[i] = *(arr + begin + i);
    res[len] = 0;
    return res;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-23T12:13:47.950

如果您只需要读取数据，那么 t+i 就是您想要的，唉，您必须管理子字符串的长度......

```
char *sub = t+i;
int len = j-i;
printf("%.*s\n",len,sub); 
```

如果您需要子字符串的不同副本，则必须复制。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-23T12:24:07.650

这应该可以正常工作：

```
#include <string.h>
#include <stdlib.h>
#include <iostream>

using namespace std;

int main()
{
 char t[200];
 cin.get(t, 200);
 int i = 5; 
 int j = 10;
 char *to = (char*) malloc(j-i+1);
 strncpy(to, t+i, j-i);
 to[j-i]='\0';
 cout << to;
} 
```

您可以使用`new`而不是`malloc`这样：

```
char* to = new char[j-i+1]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-23T12:12:31.853

这不会进行任何边界检查以确保目标数组足够大

```
char newt[200];   
// copy j-i chars from position t+i to newt array
strncpy(newt, t + i, j-i);
// now null terminate
newt[j-i] = 0; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-23T13:07:30.297

使用两个指针来表示字符串中的范围。

```
char const * beg = t+i;
char const * end = t+j+1;    
std::cout.write(beg, end-beg); 
```

或者你可以使用一个封装这个想法的类。为标准库提出[了类似的建议。](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3609.html)同时，您可以自己编写，也可以使用库中的一个。例如，[`llvm::StringRef`](http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html)。

```
llvm::StringRef sref(t+i, j+1-i);
std:cout << sref; 
```

# android - 当相机打开时，Android 中的 OnBackPressed()

> ID：15586589
> 
> 赞同：0
> 
> 时间：2013-03-23T12:08:35.830
> 
> 标签：android, android-camera

我正在我的应用程序中访问移动相机以捕获图像。在这里我想当我点击相机（按钮）时，它会打开移动设备的相机来捕捉。在捕获图像之前，这意味着我想调用 Onbackpressed() 方法，这应该返回到我的应用程序的主页。我应该如何实现这一点。

谢谢，拉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:13:33.980

Goddchen 是对的，你为什么要打开它来关闭.. 反正打开相机后不需要调用 onbackpressed() 设置主页的意图。

# release - 文件包已被拒绝。所有 .bar Blackberry 都需要包 ID

> ID：15586590
> 
> 赞同：1
> 
> 时间：2013-03-23T12:08:37.067
> 
> 标签：release, blackberry-webworks, blackberry-10, appworld

我正在加载一个带有两个 .bar 文件的 realease .zip 文件：App_2.2.0.5.bar for Playbook 和 App_1.0.4.11.bar BB10 OS。当我上传文件时，它拒绝了我打包的最后一个文件（我尝试了很多次）

> “文件包已被拒绝。所有 .bar 文件都需要包 ID。如果这是升级，包 ID 必须与原始文件包中的包 ID 匹配。”

要自动分配的 Playbook 的设备名称是什么？

我将 Webworks SDK 2.2.0.5 用于 Playbook，将 1.0.4.11 用于 BB10 OS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:25:03.557

我找到了解决方案：

首先，我使用 Webworks SDK 2.2.0.5 为 Playbook 编译我的应用程序，其 ID 为 Name，并从该编译中获得一个散列 ID。其次，我使用我从第一次编译中获得的 ID（在包的 MANIFEST.MF 文件中）为 BB10 使用 SDK 1.0.4.11 编译我的应用程序

=>结果是我有两个用于不同平台的包具有相同的包 ID

# php - 如何使用 .htaccess 将 .php 之后的所有扩展名重定向到带有 .php 的文件

> ID：15586597
> 
> 赞同：0
> 
> 时间：2013-03-23T12:09:22.310
> 
> 标签：php, .htaccess, url, redirect

根据 Google 网站管理员工具，我有许多与添加到现有页面的奇怪 URL 扩展相关的抓取错误。

比如这个页面正常显示： [http ://www.normalbreathing.com/causes/cold-feet-hands-causes.php](http://www.normalbreathing.com/causes/cold-feet-hands-causes.php)

但是，不知何故，这些奇怪的 URL 以某种方式从以前的 URL 生成： [http](http://www.normalbreathing.com/causes/cold-feet-hands-causes.php/CO2.php) ://www.normalbreathing.com/causes/cold-feet-hands-causes.php/CO2.php 和类似的其他 URL。

这些奇怪的 URL 在主要浏览器中显示，但有很多错误（没有图像和所有链接错误）。结果，这些奇怪的页面会为机器人生成大量的抓取错误。

如何使用 .htaccess 将“.php”之后的所有扩展名（请注意，这些奇怪的扩展名通常有额外的“.php”或类似“/%20”等）重定向到只有一个“.php”的正确文件？

我发现了一个类似的查询： [.htaccess redirect all extension to php](https://stackoverflow.com/questions/15158940/htaccess-redirect-all-extension-to-php/15160043#15160043)

但它并不完全相同，因为它说“要使用它，请确保您没有带有点和字母数字字符串的 URL。” 我确实有那些点，有时在“.php”之后有带数字的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:23:00.283

您的网站确实存在重大问题。

只需将所有 css、js、图像指向绝对路径，如下所示：

```
<link rel="stylesheet" href="http://www.normalbreathing.com/text2.css" type="text/css" /> 
```

只要你有`/`它，它就会认为它是一个目录。所以去`../`不会指向正确的地方。

与hrefs相同的故事。这里没有一个链接[http://www.normalbreathing.com/d/cold-feet.php/CO2.php](http://www.normalbreathing.com/d/cold-feet.php/CO2.php)有效。因为它开始于`../`

我强烈建议在进入之前修复 HTML`.htaccess`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:14:16.223

谷歌指的`.php/.php`是你的网址上的。我发现有用的网站是：

[http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html](http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html)

# probability - 概率 n 选择 k

> ID：15586616
> 
> 赞同：2
> 
> 时间：2013-03-23T12:11:07.470
> 
> 标签：probability, combinatorics

我试图解决这个 TopCoder 问题： http: [//community.topcoder.com/stat ?c=problem_statement&pm=10863&rd=14150](http://community.topcoder.com/stat?c=problem_statement&pm=10863&rd=14150)

但是，我的解决方案不好，我不明白为什么。

我了解那里给出的解决方案（下页：寻找 LotteryPyaterochka）：[http ://apps.topcoder.com/wiki/display/tc/SRM+466](http://apps.topcoder.com/wiki/display/tc/SRM+466)

所以，总结一下我的问题：

我们正在玩一种特殊的彩票：

该彩票中的每张彩票都是一个 N 行 5 列的矩形网格，其中每个单元格包含一个介于 1 和 5*N 之间的整数，包括 1 和 5*N。一张票中的所有整数都是不同的。

彩票组织者随机选择 5 个不同的整数，每个整数介于 1 和 5*N 之间，包括 1 和 5*N。5 个整数的每个可能子集都具有相同的被选中概率。这些整数被称为中奖号码。当且仅当彩票有一行包含至少 3 个中奖号码时，该彩票才被视为中奖。

我们想知道中奖号码（因此，在同一行中至少有 3 个中奖号码）

所以，我坚持以下步骤：

选择出现在“中奖行”中的 5 个数字的方法数。

topCoder 解决方案说：

> （#选择“中奖行”中出现的 5 个数字的方法）=
> 
> (#选择出现在“中奖行”中的x个中奖号码的方法) * (#选择5-x个“未中奖号码”的方法) =
> 
> (5 选择 x) * ((5N-5) 选择 (5-x))
> 
> 由于该行中的中奖号码至少为 3，x 可以是 3 或 4 或 5。所以，我们有 (#ways of selection 出现在“中奖行”中的 5 个数字) =
> 
> (5选3)*((5N-5)选2)+(5选4)*((5N-5)选1)+(5选5)*((5N-5)选0))

我说的是：

> （#选择“中奖行”中出现的 5 个数字的方法）=
> 
> （5个中奖号码中的3个号码）*（5N-5个未中奖号码中的2个完成行选择+之前未选择的2个中奖号码）=
> 
> (5N 选择 3) * ((5N-3)选择 2)

对于 N = 10，我的方法给出：（5 选择 3）*（47 选择 2）= 10810

而topcoder方法给出：((5选3) *(45选2)+(5选4)* (45选1)+(5选5)*(45选0))=10126

为什么我的方法不对？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:23:11.040

假设中奖号码是 1、2、3、4 和 5。现在让我们看看包含中奖行中所有五个号码的彩票。

您的方法多次计算该票，因为它包含在以下计数中：

```
1 2 3 + two other numbers
1 2 4 + two other numbers
1 2 5 + two other numbers
1 3 4 + two other numbers
... 
```

同样的事情也发生在有四个中奖号码的彩票上。

这就是为什么这些案件需要分开计算的原因。

# oracle - 由于 sequencel.nextval，PL/SQL（INSERT/UPDATE）触发器中的唯一约束违反错误

> ID：15586619
> 
> 赞同：0
> 
> 时间：2013-03-23T12:11:27.457
> 
> 标签：oracle, plsql, triggers, sequence, ora-00001

我想使用触发器（pl/sql oracle 10g）将记录插入/更新到另一个表（MICL_SUPERVISORS）。

当触发器触发时，它给出一个错误

> ORA-00001: 违反了唯一约束。

我知道它发生是因为我想`SUPID`从序列中添加

```
Select micl_sup_id_seq.nextval into nSUPID from dual 
```

这发生在一个循环中。

SUPID 列是我表中的主键（MICL_SUPERVISOR）。所以我不能放弃那个约束。

一旦我尝试自动递增，但它需要很长时间，而且效果不佳而且速度很慢。我在这张表中有数千条记录。我这样做了

```
SELECT MAX((SUP_ID)+1 from micl_sup_id_seq 
```

由于这个错误，我做了一个小的研究，发现我们不能在触发器中使用 seq.nextval。所以我的问题是有没有简单、准确的方法来实现这一目标？

这是代码（这一切都发生在**if 子句**else 部分工作正常。请注意我使用了游标，在打开游标内这一切都发生了）

```
CREATE OR REPLACE  TRIGGER "c"."INSERT_MICL_SUP_DETAILS"
AFTER INSERT OR UPDATE OF "ID","SUP_EMP_NO","EMP_NO" ON "MIMAX"."EMP"
REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW
DECLARE
  miclaim_supervisor_count NUMBER;
  employee_company_code VARCHAR2(10);
  employee_businessunit NUMBER;
  projmgr NUMBER;
  nsupid NUMBER;
CURSOR  projmgrscursor IS
SELECT b.bu_member_id 
  FROM bu_member b, emp_sub_div s
 WHERE s.emp_no = :NEW.emp_no
   AND s.sub_division_code = '0345' AND s.div_code = '1010'
   AND b.bu_id IN (SELECT bu_id FROM bu_member WHERE bu_member_id = :NEW.emp_no);

BEGIN
  DELETE
    FROM micl_supervisors
   WHERE emp_no = :NEW.emp_no
     AND is_ovverridden = 0;

  SELECT count(*)
    INTO miclaim_supervisor_count
    FROM micl_supervisors
   WHERE emp_no = :NEW.emp_no
     AND is_ovverridden = 1;

  SELECT company_code
    INTO employee_company_code
    FROM employee_master
   WHERE emp_no = :NEW.emp_no;

  projmgr := 0;
  IF (employee_company_code ='SOFT')THEN 
    OPEN  projmgrscursor;
    LOOP
      FETCH projmgrscursor INTO projmgr;  
      EXIT WHEN projmgrscursor%notfound;

      SELECT micl_sup_id_seq.nextval INTO nsupid FROM dual;

      INSERT INTO  micl_supervisors  (sup_id,assigned_date
                                     , assigned_by_emp_no
                                     , amount_limit
                                     , is_ovverridden
                                     , sup_emp_no
                                     , rtd_emp
                                     , emp_no)
                              VALUES ( nsupid
                                     , SYSDATE
                                     , :NEW.entryaddedby_emp_no
                                     , 3000
                                     , 0
                                     , projmgr
                                     , NULL
                                     , :NEW.emp_no);

    END LOOP;
    CLOSE projmgrscursor;
  ELSE
    IF(miclaim_supervisor_count IS NULL OR miclaim_supervisor_count<1) THEN
      INSERT INTO micl_supervisors VALUES (:NEW.ID
                                          , SYSDATE
                                          , :NEW.entryaddedby_emp_no
                                          , 3000
                                          , 0
                                          , :NEW.sup_emp_no
                                          , NULL
                                          , :NEW.emp_no);
    END IF;
  END IF;
END;
/ 
```

如果有什么不清楚的地方问我，我会进一步解释这个场景，我希望有人能帮助解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:12:46.453

表上还有哪些其他约束？您更有可能遇到您所关注的序列以外的约束错误。

> 由于这个错误，我做了一个小的研究，发现我们不能在触发器中使用 seq.nextval。

我不知道你在哪里读到的，但这绝对是错误的。我已经为我的许多审计触发器/表使用了 seq.nextval，它工作正常。

使用表名查询`all_constraints`（或） - 像这样`user_constraints``micl_supervisors`

```
SELECT *
FROM   user_constraints
WHERE  table_name = 'MICL_SUPERVISORS' 
```

并更新问题或检查您要插入的数据。

# recursive-datastructures - 关于递归关系的 EF 6 Alpha 3 迁移中可能存在的错误？

> ID：15586624
> 
> 赞同：0
> 
> 时间：2013-03-23T12:12:04.490
> 
> 标签：recursive-datastructures, entity-framework-6

我必须在复合键上定义递归关系。经过多次尝试，我最终得到了这个：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Entity<Category>()
            .Property(t => t.WhichAmazon).HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);

        modelBuilder.Entity<Category>()
            .Property(t => t.IdCategory).HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);

        modelBuilder.Entity<Category>()
           .HasKey(c => new {c.WhichAmazon, c.IdCategory})
           .HasOptional(p => p.Children)
           .WithMany()
           .HasForeignKey(c => new { c.WhichChildrenAmazon, c.ChildrenId });                                                                          
    } 
```

对于这张桌子

```
public class Category
{
    // Keys and relationships defined in BooksDataLayer
    [MaxLength(2)]
    public string WhichAmazon { get; set; }
    public int IdCategory { get; set; }        
    public string Name { get; set; }
    [Timestamp]
    public Byte[] TimeStamp { get; set; }        
    public DateTime LastCheck { get; set; }
    public virtual List<Book> Books { get; set; }
    public string WhichChildrenAmazon { get; set; }
    public int? ChildrenId { get; set; }        
    public virtual List<Category> Children { get; set; }
} 
```

在尝试添加迁移时，我经常遇到同样的错误：“序列不包含任何元素”。因为我“几乎”确定这个定义是正确的，所以我继续重新创建了一个新的数据库，没有迁移。完全没问题，数据库完全没有问题。所以那里有 EF 6 不喜欢的“东西”。我得到了确认，因为如果我尝试获取模式“调用的目标已抛出异常”，EF 电动工具就会爆炸。

如果我从那里重新开始，我会看看迁移现在会发生什么，但我担心不能再使用这个 Db。我非常喜欢这个工具，所以我希望可以解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T17:29:01.333

问题是关系的无效配置。

Fluent API 调用包括：

```
.HasOptional(p => p.Children)
.WithMany() 
```

这是无效的，因为 Children 是一个集合导航。正确的配置是：

```
.HasMany(p => p.Children)
.WithOptional() 
```

我们计划进行修复以在 EF6 之后提供更好的异常消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:12:34.660

在 EF codeplex 网站上为此打开了一个错误：http: [//entityframework.codeplex.com/workitem/1015](http://entityframework.codeplex.com/workitem/1015)

# android - 如何旋转surfaceview 90？

> ID：15586644
> 
> 赞同：0
> 
> 时间：2013-03-23T12:14:24.413
> 
> 标签：android, service, rotation, surfaceview, egl

我正在android 4.2上开发一个movieplayer，现在面临一个问题，如何将surfaceview旋转90度，surfaceview用于渲染解码视频，与常用的不同之处在于，我通过“windowManager”将surfaceview添加为系统视图.addView(mysurfacetview)" 在服务中，所以surfaceview 有能力浮动在桌面上。

每当用户想要横向全屏视图时，我的临时解决方案是启动一个在 xml 中预定义 LANDSCAPE 的活动，这将触发服务的 onConfigurationChanged，然后我使用“windowManager.updateViewLayout”触发surfacechanged，最后将surfaceview 调整为全屏大小。

有没有更好的解决方案来旋转surfaceview？我使用了附加到surfaceview的egl，是否可以从egl旋转？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:30:21.633

```
Try this

setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

For fullscreen try

 requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

# android - 为什么在新线程中调用SuggestDesiredDimensions方法而不是直接调用它

> ID：15586648
> 
> 赞同：0
> 
> 时间：2013-03-23T12:14:43.140
> 
> 标签：android

```
new Thread("setWallpaperDimension") {
    public void run() {
        mWallpaperManager.suggestDesiredDimensions(mWallpaperWidth, mWallpaperHeight);
    }
}.start(); 
```

我在launcher2的源代码中看到了上面的代码，我想知道为什么#suggestDesiredDimensions方法在新线程中被调用，我可以直接调用它而不启动新线程吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:17:14.030

当然可以，只有反过来可能会导致麻烦（从非 ui 线程调用 ui-thread-only 函数）。

但是，当然，在新线程中调用它可能有性能原因。它可能会触发一些重新计算和可能影响您的 UI 响应能力的东西......

# matlab - Matlab绘制阈值线

> ID：15586653
> 
> 赞同：1
> 
> 时间：2013-03-23T12:15:07.470
> 
> 标签：matlab, plot

我想在我的 0.7 图表中添加一条水平阈值线。但我似乎无法让它工作。

**代码**

```
figure(1)
plot(Variance);
hold on;
plot([1 frames], threshold, 'red') 
```

方差是要绘制的数组，帧是绘制的方差数。我试过移动`hold`和移动，`plots`但它似乎也不起作用。

我知道这是一个简单的问题，但是关于将它们添加到同一个`plot()`.

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T12:47:48.520

您应该将第二条绘图线更改为

```
plot([1 frames], [threshold threshold], 'red'); 
```

# ios - 本地通知触发导致错误

> ID：15586658
> 
> 赞同：1
> 
> 时间：2013-03-23T12:15:28.327
> 
> 标签：ios, objective-c, uilocalnotification

我目前正在处理本地通知。

```
- (void)viewDidAppear:(BOOL)animated {

NSCalendar *calendar = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
NSDateComponents *components = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:[NSDate date]];
[components setHour:uhrzeit];
_date_today = [calendar dateFromComponents:components];

if (akt_tag != proj_tag) {
    _date_final = [NSDate dateWithTimeInterval:(86400*(proj_tag - akt_tag)) sinceDate:_date_today];
    }
else {
    _date_final = [NSDate dateWithTimeInterval:0 sinceDate:_date_today];
    }

    NSLog(@"%@", _date_final); 
```

}

```
- (IBAction)erinnerung:(id)sender {

UILocalNotification *notification = [[UILocalNotification alloc] init];
notification.alertBody = @"It's Notific Time!";
notification.soundName = @"benachrichtigung.mp3";
notification.timeZone = [NSTimeZone defaultTimeZone];
notification.fireDate = [NSDate dateWithTimeIntervalSinceNow:[_date_final timeIntervalSinceDate:[NSDate date]]];
[[UIApplication sharedApplication] scheduleLocalNotification:notification];
[notification release]; 
```

}

但是我收到了这个错误（更准确地说：在notfication.fireDate）：

2013-03-23 12:50:21.303 通知[4593:907]-[NSISRestrictedToNonNegativeMarkerVariableToBeMinimized timeIntervalSinceDate:]：无法识别的选择器发送到实例 0x1dd514b0 2013-03-23 12:50:21.305 通知 [4593:907] *** 终止未捕获的异常'NSInvalidArgumentException'，原因是： ' - [NSISRestrictedToNonNegativeMarkerVariableToBeMinimized timeIntervalSinceDate：]：无法识别的选择发送到实例0x1dd514b0' ***第一掷调用堆栈：（0x337723e7 0x3b463963 0x33775f31 0x3377464d 0x336cc208 0x56b33 0x3566c087 0x3566c03b 0x3566c015 0x3566b8cb 0x3566bdb9 0x355945f9 0x355818e1 0x355811ef 0x372985f7 0x37298227 0x337473e7 0x3374738b 0x3374620f 0x336b923d 0x336b90c9 0x3729733b 0x355d52b9 0x4ae5f 0x3b890b20) libc++abi.dylib：终止调用抛出异常

你能告诉我这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:21:28.947

你没有挽留`_date_final`。所以当你试图在函数中访问它时`erinnerung`，对象`_date_final`是无效的。

通过以下方式更改您的代码：

```
if (akt_tag != proj_tag) {
    _date_final = [NSDate dateWithTimeInterval:(86400*(proj_tag - akt_tag)) sinceDate:_date_today];
    }
else {
    _date_final = [NSDate dateWithTimeInterval:0 sinceDate:_date_today];
    }

[_date_final retain]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:55:54.990

```
UILocalNotification *notif = [[UILocalNotification alloc] init];

NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *dateComp = [[NSDateComponents alloc] init];

if (akt_tag != proj_tag) {
    // after One Day
    [dateComp setDay:1];
}

NSLog(@"Year: %i, Month: %i, Day: %i, Time:%i:%i\n",[dateComp year], [dateComp month],
      [dateComp day], [dateComp hour], [dateComp minute]);

NSDate *fireDate = [gregorian dateByAddingComponents:dateComp toDate:[NSDate date]  options:0];

notif.fireDate = fireDate;
notif.timeZone = [NSTimeZone defaultTimeZone];

notif.alertBody = @"Your NOtification Message";

[[UIApplication sharedApplication] scheduleLocalNotification:notif]; 
```

# php - jQuery 脚本函数似乎没有加载

> ID：15586660
> 
> 赞同：0
> 
> 时间：2013-03-23T12:15:33.533
> 
> 标签：php, javascript, jquery, wordpress, jquery-plugins

我即将在我的 wordpress 安装中使用 jQuery。因此，我使用了适当的 wp_`enqueue_script`函数来加载它以及 jQZoom 脚本。

结果，以下行可以按此顺序在我的标题中找到

```
<link rel='stylesheet' id='jQZoom_style-css'  href='http://mysite.de/wordpress/wp-content/themes/twentytwelve-child/jqzoom_ev-2.3/css/jquery.jqzoom.css?ver=2.3' type='text/css' media='all' />
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js?ver=1.9.1'></script>
<script type='text/javascript' src='http://mysite.de/wordpress/wp-content/themes/twentytwelve-child/jqzoom_ev-2.3/js/jquery.jqzoom-core.js?ver=2.3'></script> 
```

相应的文件都存在。但是，我在页脚上方（即正文中）的小测试脚本不起作用（所需的功能也不起作用）：

```
<script type='text/javascript'>
if (jQuery()) { 
  alert('3ja');
} else {
  alert('3nein');
}

if ($()) { 
  alert('2ja');
} else {
  alert('2nein');
}

if (jqzoom()) { 
  alert('1ja');
} else {
  alert('1nein');
}
</script> 
```

我得到`3ja`和`2ja`，但既不是 a`1ja`也不是 a`1nein`

我的身体里还有以下内容，应该显示缩放功能：

```
<script type='text/javascript'>
$(document).ready(function(){  
    $('.zoomTarget').jqzoom();  
});
</script>
<a href="http://mysite.de/wordpress/wp-content/uploads/triumph_big3.jpg" title="triumph_big3" class="zoomTarget">
  <img src="http://mysite.de/wordpress/wp-content/uploads/triumph_small3.jpg" title="triumph_small3" />
</a> 
```

Chrome js 控制台显示以下错误：

```
Uncaught ReferenceError: jqzoom is not defined mysite.de:131
(anonymous function) mysite.de:131
Uncaught TypeError: Object [object Object] has no method 'jqzoom' mysite.de:111
(anonymous function) helga-matzke.de:111
c jquery.min.js:3
p.fireWith jquery.min.js:3
b.extend.ready jquery.min.js:3
H jquery.min.js:3 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:27:21.707

尝试为 1.9.1 添加 migrate js

```
<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script> 
```

# javascript - 跟踪递归期间javascript对象升级的时间

> ID：15586663
> 
> 赞同：-1
> 
> 时间：2013-03-23T12:16:24.570
> 
> 标签：javascript, jquery, recursion

我有一个 3 级深度对象，具有相同的结构化子对象：

```
var data = {
0:{"level":1,
   "data": {
    0:{"level":2,
     "data": {
        0:{"level":3,
        "data": null},
        1:{"level":3,
        "data": null}
      }
    },
    1:{"level":2,
     "data":{ 
        0:{"level":3,
         "data": null},
        1:{"level":3,
         "data": null}
      }
    } 
   }
}} 
```

和递归函数：

```
$.each(data, function(k,v){
    rfunc(k,v)
});
function rfunc(key, val) { 
    console.log(val.level)
    if ( val.data ) {
        $.each(val.data, function(key, val) {
            rfunc(key, val) 
        });
    }
} 
```

哪个控制台，正如预期的那样：
1 2 3 3 2 3 3 请帮助我，当程序回到“2”时我可以跟踪的方式

感谢关注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:44:44.973

使用一个的解决方案（递归）：http: [//jsfiddle.net/px3KT/](http://jsfiddle.net/px3KT/)

```
var data = {
0:{"level":1,
   "data": {
    0:{"level":2,
     "data": {
        0:{"level":3,
        "data": null},
        1:{"level":3,
        "data": null}
      }
    },
    1:{"level":2,
     "data":{ 
        0:{"level":3,
         "data": null},
        1:{"level":3,
         "data": null}
      }
    } 
   }
}}

function recurseData(obj,level){
    console.log(level);
    if(obj){
         $.each(obj, function(key, val) {
            var level = val.level;
            var data_obj = val.data;
            recurseData(data_obj,level); 
        });   
    }
}

recurseData(data); 
```

# php - Wordpress：如何按自定义字段排序类别？

> ID：15586665
> 
> 赞同：3
> 
> 时间：2013-03-23T12:16:31.097
> 
> 标签：php, wordpress, sorting

`order`我必须使用一个名为（我用序列号填充）的自定义字段来显示具有自定义顺序的类别。

我用来显示类别的代码：

```
$args=array(
    'include' => array(22,4,21,23), //category IDs to display
    'orderby' => 'meta_value', // => doesn't work
    'meta_key' => 'order', // => doesn't work
    'order' => 'ASC'
    );                      

foreach (get_categories($args) as $cat) : 
...
... 
```

一些解决方案？谢谢

# javascript - n级菜单Jquery的隐藏和显示问题？

> ID：15586669
> 
> 赞同：1
> 
> 时间：2013-03-23T12:16:52.943
> 
> 标签：javascript, jquery

我有一个 N 级菜单结构，首先我必须隐藏所有级别的子菜单，并在父菜单悬停时显示它们。我一直在尝试这个，我必须隐藏所有子菜单并在单击时显示它们，但是问题是当我单击其他父级时，必须关闭先前打开的菜单，并且如果我再次单击该菜单，则其子级应处于隐藏状态，并且在打开和关闭菜单时我想要一些缓动和动画效果它应该可以工作作为切换。

这就是我一直在尝试做的事情：

```
$(document).ready(function(){
$("li").children('ul').hide();
$("li a").click(function(){
$(this).next('ul').toggle();            
$(this).parent().siblings('li').children('ul').hide(); 
```

这是我想要做[的js小提琴](http://jsfiddle.net/kKsXz/)

# javascript - 如何检查以确保表单字段不是空字符串？

> ID：15586674
> 
> 赞同：0
> 
> 时间：2013-03-23T12:17:59.133
> 
> 标签：javascript

我正在尝试获取我的 validateForm() 方法以确保电子邮件有效（我已经这样做了），并确保“名称”和“评论”字段不为空。出于某种原因，我无法完成第二部分，需要一些帮助。这是我拥有的当前代码。

```
<script type="text/javascript">
<!--
function validateForm() {
    var x = document.forms["myForm"]["email"].value;
    var x = document.forms["myForm"]["name"].value;
    var atpos = x.indexOf("@");
    var dotpos = x.lastIndexOf(".");
    if (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= x.length) {
        alert("Not a valid e-mail address");
        return false;
    }
}
}
if (x == null || x == "") {
    alert("Empty Fields");
    return false;
}
}
// -->
</script> 
```

和形式：

```
<form name="myForm" action="http://webdevfoundations.net/scripts/formdemo.asp" onsubmit="return      validateForm()"  method="POST">
Your name: <br>
<input type="text" name="name" ><br>
<br>
Your email: <br>
<input type="text" name="email"><br>
<br>
Your comments: <br>
<textarea name="comments" rows="15" cols="50"></textarea><br><br>
<input type="submit" value="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:21:26.303

您将两个表单字段都分配给变量`x`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:21:44.467

为什么你对 field`name`和`email`. 这没有意义。

您的代码中还有一个语法错误，即您`}`在检查第二个条件之前添加了一个额外的错误。因此，它使该条件超出了该功能

```
function validateForm() {
    var x = document.forms["myForm"]["email"].value;
    var y = document.forms["myForm"]["name"].value;
    var atpos = x.indexOf("@");
    var dotpos = x.lastIndexOf(".");
    if (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= x.length) {
        alert("Not a valid e-mail address");
        return false;
    }
    if (x == "" || y == "") {
          alert("Empty Fields");
          return false;
       }
} 
```

所以这里是[JS Fiddle 示例](http://jsfiddle.net/XzzuD/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T12:32:12.627

你应该这样尝试：

```
 function validateForm(){
        var x=document.forms["myForm"].getElementsByName('email').value;
        var y=document.forms["myForm"].getElementsByName('name').value;
        var atpos=x.indexOf("@");
        var dotpos=x.lastIndexOf(".");
        if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length){
            alert("Not a valid e-mail address");
            return false;
        }
        if (y==null || y==""){
           alert("Empty Fields");
           return false;
        }
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T12:37:50.160

您应该选择以下几点以记住上述代码

(1) 应首先验证空字段，然后是电子邮件检查。(2) 根据代码，您的 Empty 字段逻辑不是 validateForm() 的一部分（可能是拼写错误），因此当调用 validationForm() 方法时，该逻辑不会执行（3）您应该编写 return true在方法 validateForm() 结束时 (4) 使用不同的变量名进行字段检查

通过以上几点，将有助于解决您的问题。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T12:43:27.203

首先，您的代码中存在语法错误。似乎有两个多余的花括号。然后你将这两个字段都分配给 x，只有 name 字段得到它的值。另外，您最好先检查电子邮件字段是否为空，然后对其进行操作。最后，我认为您的电子邮件检查不正确。例如：xxx@a.info。所以你可以试试：

```
function checkEmail(aEmail){
    var pattern=//w+([-+.']/w+)*@/w+([-.]/w+)*/./w+([-.]/w+)*/; 
    var objExp=new RegExp(pattern);
    if(objExp.test(str)==true){
        return true;
    }else{
        return false;
    }
}

function validateForm() {
    var x = document.forms["myForm"]["email"].value;
    var y = document.forms["myForm"]["name"].value;
    if (x == "" || y == "") {
        alert("Empty Fields");
        return false;
    }
    if (!checkEmail(y)) {
        alert("Not a valid email");
        return false;
    }
} 
```

# c# - C# XMLSerialization 错误，System.InvalidOperationException

> ID：15586676
> 
> 赞同：1
> 
> 时间：2013-03-23T12:18:03.023
> 
> 标签：c#, xml-serialization, invalidoperationexception

我是 XMLSerialization 的新手，附近没有人可以帮助我，所以这是我想要 XMLSerialize/Deserialize 的一部分代码，以及一个错误本身。

我有一个三类：

```
public class Contacts
{
    public string country;
    public string city;
    public string street;
    public int houseNumber;
    public int flatNumber;
    public int phoneNumber;

    public Contacts(){...};

    public Contacts(string cntry, string city, string str, int houseNum, int flatNum, int phoneNum){...};
    public override string ToString(){...};
}

public class SimpleHuman
{
    public string firstName;
    public string lastName;
    public int age;
    public string sex;
    public Contacts contacts;

    public SimpleHuman(){...};

    public SimpleHuman(string fn, string ln, int a, string s, Contacts c){...};

    public override string ToString(){...};
}

public class doctor : SimpleHuman
{
    public DateTime contractExpirationDate;
    public int idNumber;
    public List<int> doctorPatients;

    public doctor(){...};

    public doctor(string name, string surname, int age, string sex, int doctorID, Contacts c):base(name, surname, age, sex, c){...};

    public override string ToString(){...};
} 
```

问题是，当我尝试将类“医生”序列化为 XML 文件时：

```
XmlSerializer SerializerDoc = new XmlSerializer(typeof(doctor));

foreach(doctor d in doctorList)
{
    TextWriter WriteFileStream = new StreamWriter("doctors/" + d.firstName + d.lastName + ".xml");
    SerializerDoc.Serialize(WriteFileStream, d);

    WriteFileStream.Close();
} 
```

我在创建 TextWriter 时遇到此错误（来自以下俄罗斯的翻译）：

> Clinic.launchMenu() в d:\Dropbox\CSharpHomeWork\ExamTask\Clinic\Prog ram.cs:строка 463 в Clinic.Program.Main(String[] args) в d:\Dropbox\CSharpHomeWork\ExamTask\Cli nic\Program .cs:строка 870 按任意键继续。. 。”

我有一个俄语版本的 WIN7，所以俄语上的消息是这样的：“未处理的异常：.......：Clinic.doctor 不可用，因为它的保护级别。只能处理泛型类型。” 翻译几乎是字面意思，所以请记住。

希望有人能帮助我，因为我可以用简单的“XML Writer”编写“医生”类，但仍然没有意义（我认为），只要我可以用一行而不是 20 行保存它。

多谢你们。

**Upadte：**刚刚上完所有的课——公开课。现在我在字符串上遇到错误： TextWriter WriteFileStream = new StreamWriter("doctors/" + d.firstName + d.lastName + ".xml");

```
It sais like: 
```

未处理的异常：System.IO.DirectoryNotFoundException：未能找到路径“D:\Dropbox\CSharpHomeWork\ExamTask\Clinic\bin\Debug\doctors\Anders onNeo.xml”的一部分。

路径是 100% 正确的。我只是觉得不是创建一个文件，而是试图在已经存在的文件中写一些东西。

顺便说一句，对不起，我不能以声望感谢你，因为我现在不能这样做。但是现在有我的“口头感谢”:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T12:24:10.873

`XmlSerializer`只能序列化公共类和成员。要么制作 the`Doctor`及其所有基类`public class`，要么使用不同的序列化程序（例如`DataContractSerializer`）。

# c# - Ways2sms SMS 服务显示错误连接到服务器

> ID：15586678
> 
> 赞同：0
> 
> 时间：2013-03-23T12:18:17.127
> 
> 标签：c#, asp.net, sms, sms-gateway

最近我正在尝试学习如何使用ways2sms 网关发送短信。

在我成功输入我的用户名（即我的手机号码）和密码后，通过我的手机号码发送短信的身份验证。提示以下错误：连接服务器时出错。可能是什么问题：

我在以下位置面临错误：行

```
{ this.response = (HttpWebResponse)this.req.GetResponse(); }

try
        {
            this.req = (HttpWebRequest)WebRequest.Create("http://wwwd.way2sms.com/auth.cl");

        this.req.CookieContainer = new CookieContainer();
        this.req.AllowAutoRedirect = false;
        this.req.Method = "POST";
        this.req.ContentType = "application/x-www-form-urlencoded";
        this.strNewValue = "username=" + ckuser + "&password=" + ckpass;
        this.req.ContentLength = this.strNewValue.Length;
        StreamWriter writer = new StreamWriter(this.req.GetRequestStream(), Encoding.ASCII);
        writer.Write(this.strNewValue);
        writer.Close();
        this.response = (HttpWebResponse)this.req.GetResponse();
        this.cookieCntr = this.req.CookieContainer;
        this.response.Close();
        this.req = (HttpWebRequest)WebRequest.Create("http://wwwd.way2sms.com//jsp/InstantSMS.jsp?val=0");
        this.req.CookieContainer = this.cookieCntr;
        this.req.Method = "GET";
        this.response = (HttpWebResponse)this.req.GetResponse();
        responseee = new StreamReader(this.response.GetResponseStream()).ReadToEnd();
        int index = Regex.Match(responseee, "custf").Index;
        responseee = responseee.Substring(index, 0x12);
        responseee = responseee.Replace("\"", "").Replace(">", "").Trim();
        this.response.Close();

        pnlsend.Visible = true;
        lblErrormsg.Text = "connected";
    }
    catch (Exception)
    {
        lblErrormsg.Text = "Error connecting to the server...";
        Session["error"] = "Error connecting to the server...";
        Server.Transfer("login.aspx");

    } 
```

# ios - CLLocation - 应用恢复时用户位置丢失（零纬度和经度）

> ID：15586681
> 
> 赞同：2
> 
> 时间：2013-03-23T12:18:41.383
> 
> 标签：ios, objective-c, mkmapview, cllocation, showuserlocation

App从长时间挂起模式恢复时GPS信号丢失。
和/或**在**用户进入 GPS 信号较弱的建筑物**然后**恢复应用程序之后。

蓝点消失，地图以 lat:0 long:0 为中心（位于尼日利亚-非洲附近的海洋中）如果您在该时间点启动另一个 GPS 应用程序，例如 Apple Maps，您会看到蓝色点，即使不是那么准确。

用户可以修复它的唯一方法是完全杀死我的应用程序并重新启动它。

它发生在 iOS 5.x 和 iOS 6.x 上。

在详细介绍之前，我真的很想问：
**有人遇到过这个问题吗？**
这很烦人，但是我在网络上的任何地方都找不到任何人抱怨这个 - 很奇怪。

我正在使用带有 showUserLocation=YES 的普通 CLLocation，
没有什么神奇的，没有特殊的精度调整或其他什么，只是简单的默认实现。

当应用程序恢复时，我已经尝试重新启动所有可能的组件；

```
showUserLocation=NO;
showUserLocation=YES; 
```

或者

```
[locationManager stopUpdatingLocation];
[locationManager startUpdatingLocation]; 
```

甚至释放 locationManager 并再次初始化它也无济于事！
（还尝试使用 dispatch_after 延迟重新启动它）

是否有任何编程方式强制在 ios 中重置 GPS 信号或 CLLocation ？
将不胜感激任何相关的讨论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:28:37.693

我认为您的默认位置设置为**“无”**，因此创建了此类问题。

```
Go to 

Edite Scheme..
    |
    |
  "Run YourProjectName"  / Left Hand Side
       |
       |
  Select "Option" Tab
         |
         |
     Default Location
          |
          |
     Choose any Location such like , "London England" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:50:46.747

当您说您尝试停止/启动`CLLocationManager`对象时，您是说您在委托中获得的回调为您提供了 0,0 坐标，还是您尝试使用 in 中的`location`属性直接访问该位置`CLLocationManager`？

我在一个基于位置的应用程序上工作，我可以告诉你的一件事是，你不能指望直接获取`CLLocationManager`对象的位置。获取位置信息的唯一可靠方法是`CLLocationManager`通过实现依赖于类的回调

```
-(void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
```

我在我的应用程序中处理的方式`CLLocationManager`（现在我并不是说这对于您的用例来说是最佳或理想的，但它确实允许我们在应用程序启动/恢复时为用户提供可靠的基于位置的体验）

1.  包装`CLLocationManager`成一个位置管理类（通常使用单例） - 我认为这可以是一个子类，`CLLocationManager`但在我的情况下，它只是一个`NSObject`以`CLLocationManager`对象为属性的子类
2.  将最后一个已知的有效位置存储在这个单例中，然后将其写入磁盘（NSUserDefaults 或其他位置 - 需要重新检查您是否被允许存储用户位置，`NSUserDefaults`但我们已经在我们的应用程序中完成了它并且没有似乎影响审批过程）
3.  重新实现一种在您的自定义类中获取当前位置的方法 - 基本上检查是否`CLLocationManager`返回 0,0，如果是，则返回您的缓存位置
4.  不是绝对必要的，但如果您有多个需要使用该位置的视图/页面，则实现观察者模型效果很好（因为您的单例现在`CLLocationManager`是委托，您需要有一种方法将此信息传递给您的视图控制器） .

有了以上内容，在我的地图页面上（或在我显示用户位置的任何地方） - 我基本上用缓存的位置更新地图一次（在 中`viewDidLoad`），然后我允许通过委托回调对地图进行一次更新。一旦收到回调，我就会设置`showsUserLocation`为`YES`（如果没有调用回调，那么您还没有有效的位置，因此`showsUserLocation`此时设置不会做任何事情）。

我希望这会有所帮助，如果您有任何其他问题，请随时告诉我！

# c - 标准 C 中的秒表程序

> ID：15586682
> 
> 赞同：3
> 
> 时间：2013-03-23T12:18:41.493
> 
> 标签：c

我正在尝试使用这个 Standard C-Free 5.0 创建一个秒表程序。这是我到目前为止所得到的：

```
#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#include <windows.h>

char button;
int minutes=0, seconds=0, millisec=0;

int main(void)
{
    while(1)
    {
        reset:
        button = '\0';
        int minutes=0, seconds=0, millisec=0;
        printf("  %d :  %d :  %d ", minutes, seconds, millisec);
        system("cls");
        if(button == 'a')
        {
            while(1)
            {
                cont:
                button = '\0';
                Sleep(10);
                millisec++;
                if(millisec == 100)
                {
                    millisec = 0;
                    seconds++;
                    if(seconds == 60)
                    {
                        seconds = 0;
                        minutes++;
                    }
                }
                printf("  %d :  %d :  %d ", minutes, seconds, millisec);
                system("cls");
                if(button == 's')
                {
                    while(1)
                    {
                        button = '\0';
                        printf("  %d :  %d :  %d ", minutes, seconds, millisec);
                        system("cls");
                        if(button == 'a')
                        {
                            goto cont;
                        }
                        if(button == 'd')
                        {
                            goto reset;
                        }
                    }
                }
            }
        }
    }
} 
```

我正在尝试按下按钮“a”来启动秒表，但它不起作用。使用 scanf() 将暂停整个程序。有没有办法检测按钮被按下并继续秒表程序？我的意思是不暂停程序，尤其是按“s”停止并再次按“a”继续，同时始终显示计时器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T12:26:41.300

这应该会有所帮助[`_kbhit`](http://msdn.microsoft.com/en-us/library/58w7c94c%28v=vs.80%29.aspx)，并且`_getch()`在它之后使用很重要。

```
#include <conio.h>

//...

int key;
while (1)
{
    if (_kbhit())
    {
        key = _getch();

        if (key == 'a')
            printf("You pressed 'a'\n");
        else if (key == 'd')
            printf("You pressed 'd'\n");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T12:25:54.870

由于您使用`system("cls");`，这可能是在 dos / Windows 命令提示符下。您可以尝试查看您的编译器是否支持[conio.h 。](http://en.wikipedia.org/wiki/Conio.h)

如果是，[`kbhit()`或者`_kbhit()`](http://msdn.microsoft.com/en-us/library/58w7c94c%28v=vs.71%29.aspx)（链接到 MSDN，您应该检查编译器库的文档以获得最准确的参考）似乎是您需要使用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T12:24:47.223

这是一个系统问题，而不是 C。通常，您的托管系统为输入提供缓冲，因此当您按下一个键时，它不会在那个时候传递给您的程序，它会被缓冲直到发生某种情况（基本上，一个 end-离线被按下）。

在 Windows 下，您应该拨打不同的电话来获得按键。

在 Unix 下，您应该将您的 tty 置于非规范模式（有一组对`tcgetattr`and的魔术调用`tcsetattr`）。

[例如](https://stackoverflow.com/questions/9222231/how-can-i-read-the-terminal-input-on-a-tty-device-before-a-newline-arrives/9222520#9222520)看那个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-14T13:27:13.737

```
#include<stdio.h>
#include<conio.h>
#include<dos.h>
#include<time.h>
#include<windows.h>
main()
{
int choice, h,m,s; h=0; m=0; s=0; //--variable declaration--//
char p= 'p';
printf("Press 1 to start the timer\nPress 2 to exit\n");
printf("\nEnter your choice\n");
scanf("%d",&choice);
switch(choice) //--switch case --//
{
case 1:
{
while(1) //--while condition is true//
{
if(s>59) //--if seconds(s) is > 59--//
{
m=m+1; //--increment minute by 1--//
s=0;
}
if(m>59) //--if minutes(s) is > 59--//
{
h=h+1; //--increment hour by 1--//
m=0;
}
if(h>11) //--if hour(h) is > 11--//
{
h=0; //-Hour to 0--//
m=0;
s=0;
}
Sleep(1000); //--inbuilt function for 1sec delay--//
s=s+1;
system("cls"); //--Clear screen--//
printf("DIGITAL CLOCK");
printf("\n\nHOUR:MINUTE:SECOND");
printf("\n\n%d:%d:%d",h,m,s); //--Print time--//
printf("\n\nTo pause : press P\n");
if(kbhit()) //--Check if any button is pressed on keyboard--//
{
if(p==getch()) //--Check if P is pressed--//
{
system("pause"); //--Inbuilt function for pause and resume--//
}
}
}
break;
}
case 2:
exit(0); //--Exit --//
default:
{
printf("Wrong Choice");
}
}
getch(); //--Holding the screen--//
return 0;
} 
```

# c# - 跨线程操作无效：控件'richTextBox2'

> ID：15586689
> 
> 赞同：0
> 
> 时间：2013-03-23T12:19:41.773
> 
> 标签：c#, multithreading, winforms, exception

我编写多线程应用程序并遇到异常`Cross-thread operation not valid: Control 'richTextBox2' accessed from a thread other than the thread it was created on.` 这是我的代码：

```
 Thread[] thr;
    static object locker = new object();
    string titles_path, routes_path, mamas_path, descriptions_path, site_urls_path;
    private void button1_Click(object sender, EventArgs e)
    {
        decimal value = numericUpDown1.Value;
        int i = 0;
        int j = (int)(value);
        thr = new Thread[j];
        for (; i < j; i++)
        {
            thr[i] = new Thread(new ThreadStart(go));
            thr[i].IsBackground = true;
            thr[i].Start();
        }
    }

    public void go()
    {
        while (true)
        {
            string mama = "";
            string ua = HttpHelper.ChromeUserAgent();
            string[] site_url = new string[20];
            lock (locker)
            {
                if (mamas.Count == 0)
                {
                    break;
                }
                else
                    mama = mamas.Dequeue();
            }

            Sed sed = new Sed(mama, ua);
            string auth = sed.Auth(textBox1.Text.Split(':')[0], textBox1.Text.Split(':')[1].Trim());
            if (auth == "Login")
            {
                lock (locker)
                {
                    for (int runs = 0; runs < 20; runs++)
                    {
                        if (site_urls.Count == 0)
                        {
                            break;
                        }
                        else
                            site_url[runs] = site_urls.Dequeue().Replace("http://", "");
                    }
                }
                string add_domains = sed.add_domains(site_url);
                if (add_domains == "Added")
                {
                    for (int runs = 0; runs < 20; runs++)
                    {
                        string dorway = site_url[runs];
                        if (string.IsNullOrEmpty(dorway))
                            break;
                        string title = rand_title();
                        string description = rand_description();
                        string route = rand_route();
                        string[] rtfLines = new string[richTextBox2.Lines.Length];
                        var num = xNet.Rand.Next(0, richTextBox2.Lines.Length);
                        string template = rtfLines[num];

                        string set_config = sed.set_config(dorway, title, description, route, template);
                        if (set_config == "Saved") 
```

请帮助使其工作/

# java - 使用空字符作为循环条件，程序在应该循环时结束

> ID：15586693
> 
> 赞同：1
> 
> 时间：2013-03-23T12:20:25.613
> 
> 标签：java

> 如果没有写入任何内容，该程序应该循环输入 char，但是程序将不会编译，它不接受 char tegn='';。我如何创建一个循环，其中条件 si 没有为 char 写入任何内容？

```
import static javax.swing.JOptionPane.*;
       char tegn = '';
        do {
        tegn = showInputDialog("Input a char.").charAt(0);
        } while (tegn == ''); 
```

更新：我用 Vishal K 的代码中的一个想法解决了我的代码，使用 String 来确定用户是否没有写任何东西：

```
 String tegn = ""; 
do { tegn = showInputDialog("Input a char."); 
} while (tegn.equals("")); 

char chartegn = tegn.charAt(0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:05:09.743

您可以尝试以下操作：

```
import static javax.swing.JOptionPane.*;
    String str = "";
    char tegn=' ';
    do {
     str = showInputDialog("Input a char.");
     if (str != null && !"".equalsIgnoreCase(str.trim()))
     {
       tegn = str.charAt(0);
     }
    }while(str!=null && !"".equalsIgnoreCase(str.trim()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:33:03.480

问题是，如果您只是在提示输入时按回车键，您发送的是字符返回而不是空格（''）。

我建议检查输入是否小于中心 ascii 值（空格和每个符号，字符从 DEC 32 开始）

IE。您可以将您的 char 值转换为整数值。(int ascii = (int) 字符)

并使用它来验证您的输入。

[http://www.asciitable.com/](http://www.asciitable.com/)

# algorithm - 将整数转换为十进制的高效算法

> ID：15586694
> 
> 赞同：4
> 
> 时间：2013-03-23T12:20:37.837
> 
> 标签：algorithm

CLRS 算法书的问题 31.1-12 提出以下问题：

> 给出一个有效的算法将给定的`β`位（二进制）整数转换为十进制表示。论证如果最大长度为 的整数的乘法或除法`β`需要时间`M(β)`，则可以及时进行二进制到十进制的转换`Θ( M(β) lg β)`。（*提示：*使用分而治之的方法，通过单独的递归获得结果的上半部分和下半部分。

它要求时间`Θ( M(β) lg β)`。`lg β`考虑到递归树的高度，分而治之的算法怎么可能呢？有谁知道预期的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:40:37.083

为了使提示起作用，M(β) 必须是线性函数；特别是，M(β) ≈ 2·M(β/2)。

如果给定了，那么有一个明显的解决方案：递归地将数据拆分为多个部分，分别处理这些部分，然后组合结果。在递归的第 k 层，将有 2ᵏ 个部分，每个部分的长度大约为 β/(2ᵏ) 位，或总共约为 β。第 k 层的处理花费 2ᵏ·M(β/(2ᵏ)) ≈ M(β)，因此总时间为 O(M(β)·lg β)。

用 β 位分割一个值 u 并处理它的两个部分 (v,w)，令 2·d 或 2·d+1 = ⌊β·ln(2)/ln(10)⌋；令 v = ⌊u/10ᵈ⌋ 和 w = uv·10ᵈ。

# ruby-on-rails - 使用acts_as_follower 显示您关注的人的帖子

> ID：15586696
> 
> 赞同：0
> 
> 时间：2013-03-23T12:21:08.820
> 
> 标签：ruby-on-rails, hyperlink, devise, twitter-follow

在我的 Rails 应用程序中，我使用的是 gem 'acts_as_follower'。我有一个帖子/显示页面，我目前在其中显示所有已创建的帖子，尽管我想更改它以显示您关注的人的帖子！？

我的帖子控制器：

```
class PostsController < ApplicationController
  # GET /posts
  # GET /posts.json
  def index
    @posts = Post.all(:order => "created_at DESC")
    @post = Post.new
    @users = User.all(:order => "created_at DESC")

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end

  # GET /posts/1
  # GET /posts/1.json
  def show
    redirect_to posts_path
  end

  # GET /posts/new
  # GET /posts/new.json
  def new
    @post = Post.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/1/edit
  def edit
    @post = Post.find(params[:id])
  end

  # POST /posts
  # POST /posts.json
  def create
    @post = current_user.posts.build(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /posts/1
  # PUT /posts/1.json
  def update
    @post = Post.find(params[:id])

    respond_to do |format|
      if @post.update_attributes(params[:post])
        format.html { redirect_to @post, notice: 'Post was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /posts/1
  # DELETE /posts/1.json
  def destroy
    @post = Post.find(params[:id])
    @post.destroy

    respond_to do |format|
      format.html { redirect_to posts_url }
      format.json { head :no_content }
    end
  end
end 
```

我的用户控制器：

```
class UsersController < ApplicationController
  def index
@users = User.all

respond_to do |format|
  format.html # index.html.erb
  format.xml  { render :xml => @users }
end

end
  def show
    @user = User.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @user }
    end
  end

  def follow
      @user = User.find(params[:id])
      current_user.follow(@user)
      redirect_to root_path
  end

  def unfollow
    @user = User.find(params[:id])
    current_user.stop_following(@user)
    redirect_to root_path
  end

end 
```

我的观点：

```
<div class="dash-well">
    <div class="gravatar-dashboard">
        <%= image_tag avatar_url(@user), :class => 'gravatar-pos-fix gr-dash-mar-top' %>
        <h1 class="nuvo wtxt"><%= @user.username.capitalize %></h1>
        <h3 class="nuvo wtxt"><%= @user.motto %></h3>
        <div class="follower-count nuvo"><%= @user.followers_count %> Followers</div>
        <%= link_to "Follow", follow_user_path(@user) %>
    </div>
</div>

<div class="dash-well-status">
<% @post.each do |post| %>
    <div class="dash-post">
      <div class="dash-tstamp">
        <strong>Posted <%= time_ago_in_words(post.created_at) %> ago</strong>
      </div>
      <div class="dash-status"><%= post.status %></div>
    </div>
<% end %>
</div> 
```

有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:26:46.193

大概你有一个 current_user 方法或其他东西来代表登录的用户。

然后在您的帖子控制器中

```
@posts = current_user.follows_by_type('Post').order("created_at DESC") 
```

因此，您只能获得当前用户关注的帖子。

# cakephp - 在cake php中从ctp文件调用函数时未设置值

> ID：15586699
> 
> 赞同：4
> 
> 时间：2013-03-23T12:21:26.633
> 
> 标签：cakephp

我的作者控制器文件

```
class AuthorController extends AppController {
public function author_quotes_list($author,$page="null")
    {
        $perpage=30;
        $this->commen();
        $author_data=$this->Author->query("select author.*,professions.professions_name from author,professions where author.professions_id=professions.id and author.author_name='$author' and author.status=1  ");
        $this->set('author_data',$author_data);

        //paging
        $count=$quotes_data=$this->Author->query("select count(id) from quotes where author_id=".$author_data[0]['author']['id']." and status=1");
        $limit=$this->paging($page,$count,$perpage);
        $quotes_data=$this->Author->query("select id,quotes from quotes where author_id=".$author_data[0]['author']['id']." and status=1 limit $limit,$perpage");
        //print_r($quotes_data);
        $this->set('quotes_data',$quotes_data);

    }
public function ratings($q_id)
    {
        //echo $quotes_id;
        $tuser=$this->Author->query("select count(id) from user where status=1");
        //print_r($tuser);
        if($tuser==NULL)
        {
            $this->set('tuser',0);
        }
        else
        {
            $this->set('tuser',$tuser[0][0]['count(id)']);
        }
        $vusers=$this->Author->query("select * from totalrate where quoteid=$q_id");
        print_r($vusers);

        if($vusers==NULL)   
        {
            $this->set('vuser',0);
            $this->set('trate',0);
        }
        else
        {

            $this->set('vuser',$vusers[0]['totalrate']['totaluser']);
            $this->set('trate',$vusers[0]['totalrate']['totalrate']);
        }
} 
```

我的 author_quotes_list.ctp 文件

```
 <?php  $this->requestAction(array('controller' => 'Author', 'action' => 'ratings/'.$quotes['quotes']['id']));?>
                    <div class="star_txt">(<?php echo $trate; ?>/5,  <?php echo $vuser; ?> votes) from <?php echo $tuser; ?> Users</div> 
```

当我调用作者控制器的评级函数时，调用此函数但未设置 $trate 、 $vuser 和 $tuser 值的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:01:00.747

我建议在你写 if else 之后的控制器中：debug($tuser); 并在新行中写入： debug($vusers);

我认为这句话： $this->set('tuser',$tuser[0][0]['count(id)']); 没有设置 hte 变量 $tuser 因为我认为 $tuser[0][0][count(id)] 不是有效索引。所以调试函数会显示你调试的数组的内容和索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T12:57:44.997

我认为您可以使用一些更好的“CakePHP 实践”。首先采取更多的OOP方法并做

```
if (!empty($vusers)) { 
```

其次，如果您正确设置了模型，则最好使用 find();

```
$this->Author->Rate->find('first', array('conditions' => ....))); 
```

最后如上所述而不是 print_r 使用 cakephp 命令

```
debug(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-04T10:03:41.720

首先要注意更好的CakePHP 实践。但也看看这个页面：[http ://book.cakephp.org/2.0/en/views.html](http://book.cakephp.org/2.0/en/views.html)

在此页面中间的某处它说：“您可以通过使用 requestAction() 来充分利用元素。requestAction() 函数从控制器操作中获取视图变量**并将它们作为数组返回**。”

因此您的变量由 requestAction 返回，它们不会像您视图中的标准变量一样设置。您必须从 requestAction 取回它们并从那里使用它们，例如：

```
<?php $vars =  $this->requestAction(array('controller' => 'Author', 'action' => 'ratings/'.$quotes['quotes']['id']));?>
<?php echo $vars[...] ?> 
```

# validation - 意见表 - 我为什么要索取电子邮件？

> ID：15586700
> 
> 赞同：0
> 
> 时间：2013-03-23T12:21:28.460
> 
> 标签：validation, email, comments, spam

我正在为我的个人博客开发一个 CMS。目前，我有兴趣制作自己的评论表单，并且在查看了互联网上的几个示例实践后，我发现几乎每个评论部分都要求一个人提供他们的电子邮件地址（这是一个必填字段）。

我的第一个假设是评论验证需要它 - 有效的电子邮件地址似乎不像属于垃圾邮件发送者的东西，但为什么不在提交按钮附近使用用户验证码以避免垃圾邮件？

谁能解释为什么我希望我的用户和匿名评论者都提供他们的电子邮件地址以便能够发表评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:24:33.400

在许多情况下，除了验证（如果没有回复身份验证，这是毫无意义的）之外，贡献者可以在假设他们对正在进行的“对话”感兴趣的情况下接收到同一线程的帖子通知

# linux - 使用信号捕获 fork 时程序无限运行

> ID：15586703
> 
> 赞同：2
> 
> 时间：2013-03-23T12:21:36.103
> 
> 标签：linux, unix, operating-system, signals, fork

大家好，在使用 fork 和 signal 进行一些实验时，我遇到了一个表现出非常有趣的行为的程序，但经过几个小时的努力，我无法弄清楚发生了什么。

我想做的是我在主体内创建一个子进程，然后打印“hello world”，然后调用exit。在此之后，它的信号处理程序将被调用，并且被等待系统调用阻塞的父进程也将被调用。现在我在信号处理程序中创建另一个进程，但从那里开始，输出变为无限。

输出如下： Hello world Come to Linux Come to UNIX Come to Linux Come to UNIX Come to Linux Come to UNIX ...

又何必来Linux一再印。

另外请告诉我什么时候调用 fork，我知道重复的地址空间是由父级组成的，但是信号处理程序呢。他们是否也会重复。在我的情况下，当孩子调用退出时。然后被调用的信号处理程序是子级或父级的。

请帮忙。谢谢。

```
void sig_handler(int signo)
{
if(fork() == 0){

}
else{
    int pid = 0;
    wait(&pid);
    printf("Come to unix");
    fflush(stdout);
}
 }

int main()
{
if (signal(SIGCHLD, sig_handler) == SIG_ERR){
}

int child_pid;
int i;

child_pid = fork();
switch (child_pid) {
    case -1:         
        perror("fork");
        exit(1);
    case 0:          
        printf("hello world\n");fflush(stdout);        
        exit(0);
    default:
        wait(&i);
        printf("Come to linux");
        exit(0);
        //break;
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:21:24.643

它会进入无限循环不是很明显吗？您已经创建了一个 SIGCHLD 处理程序，然后在该处理程序中再次分叉并等待子进程退出。基本上，当该处理程序中的子级退出时，父级再次进入处理程序。下面的代码应该避免它。在信号处理程序开始时，通过将其设置为默认值来避免该信号。

```
void sig_handler(int signo) {
     signal (SIGCHLD, SIG_IGN);
    if(fork() == 0){ 

    }   
    else{
        int pid = 0;
        wait(&pid);
        printf("Come to unix");
        fflush(stdout);
    }    
} 
```

此外，您只能在信号处理程序中调用异步信号安全例程以避免未定义的行为。我不确定 printf 和 fflush 是否同步安全。即使进行上述更改避免了循环，程序仍然可能具有未定义的行为。我猜 fork 是异步安全的

请参阅下面可能有帮助的讨论：http: [//sourceware.org/bugzilla/show_bug.cgi ?id=4737](http://sourceware.org/bugzilla/show_bug.cgi?id=4737)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:33:49.150

根据 POSIX 标准，调用`fork(2)`信号处理程序具有未定义的行为，所以不要这样做:)

请参阅： http: [//pubs.opengroup.org/onlinepubs/009695399/functions/fork.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/fork.html)。

# c# - 初始 FormData 发布失败

> ID：15586705
> 
> 赞同：0
> 
> 时间：2013-03-23T12:21:45.347
> 
> 标签：c#, javascript, jquery, asp.net-mvc, forms

我正在尝试使用 javascript 中的 FormData 异步发布包含图像的表单。我使用[MDN 文档](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)作为参考；特别是以下部分：[**处理文件的上传过程，异步**](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications#Handling_the_upload_process_for_a_file.2C_asynchronously)。

我尝试使用像普通表单提交一样的按钮，而不是拖放。我看到的问题是，在第一次提交时，我没有访问服务器；并且萤火虫中没有显示任何有意义的消息。如果我尝试使用相同的图片，或者只是立即重新提交，我就会成功访问服务器。我再次更改图片的那一刻，它无法访问服务器。

这是我的 html / javascript。

```
<form action="#">
    <input id="image-one-upload" type="file" name="Image" />
    <img id="img-one-prev" class="preview" src="#" />
    <label for="image-one-caption">Caption</label>
    <input id="image-one-caption" type="text" name="Caption" />

    <button id="upload-btn">Save</button>
</form>

@Scripts.Render("~/bundles/jquery")

<script type="text/javascript">
    $(document).ready(function () {
        function sendFile(file) {
            var uri = "SaveImage";
            var xhr = new XMLHttpRequest();
            var fd = new FormData();

            xhr.open("POST", uri, true);
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    // Handle response.
                    alert(xhr.responseText); // handle response.
                }
            };
            fd.append('Image', file);
            fd.append('Caption', "caption"); // testing post of additional form data
            // Initiate a multipart/form-data upload
            xhr.send(fd);
        };

        $(document).on('change', "#image-one-upload", function () {
            if (this.files && this.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $("#img-one-prev").attr('src', e.target.result);
                };

                reader.readAsDataURL(this.files[0]);
            }
        });

        $(document).on('click', "#upload-btn", function () {
            sendFile($("#image-one-upload")[0].files[0]);
        });
    });
</script> 
```

**更多信息**

下面是第一个失败的帖子的一些截图，然后是第二个成功的帖子。看起来它与标题有关，我只是不知道它发生了什么或为什么发生。

坏帖子 ![坏帖子](../Images/bedca117088da29429b4290de6df9ad9.png)

好帖子 ![在此处输入图像描述](../Images/f0f329970dbab04c0302f885f5535519.png)

想法？

# ios - viewController 更改时如何处理异步 NSURLConnections？

> ID：15586708
> 
> 赞同：0
> 
> 时间：2013-03-23T12:22:04.497
> 
> 标签：ios, nsurlconnection

假设我有一个 iOS 应用程序，它在视图控制器上有一个开关。我想使用此开关为用户更改服务器端的设置。因此，当用户拨动开关时，我会启动一个异步 NSURLConnection 来更改设置，服务器会响应以指示更改成功，以便应用程序的 UI 反映更改。视图控制器将具有处理响应的代码，但是如果用户在翻转开关之后但在响应返回之前更改了视图控制器，会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:11:15.300

NSURLConnection 保留它的委托。如果委托是视图控制器并且用户导航离开视图控制器，您可能希望取消请求并在视图控制器的 dealloc 中释放它。如果你不这样做，视图控制器将不会被释放，直到连接成功或失败并调用视图控制器上的相关委托方法，因为 NSURLConnection 仍然对它有一个强引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:42:13.980

有两种方法：

1.  通过显示进度控制器来阻止用户。
2.  如果您不想阻止用户，请在解除分配视图控制器时取消通信。如果您不想关闭通信，请将委托对象更改为某个全局对象。一旦通信完成，此对象将传递通知。

# vb.net - 通过不使用 VB.Net 更新 sql server 中的列来插入多个值

> ID：15586709
> 
> 赞同：0
> 
> 时间：2013-03-23T12:22:10.140
> 
> 标签：vb.net, sql-server-2008, insert

我想知道有没有办法在不更新相同值的情况下将值插入同一列。

这是我的表结构

```
Column Name Data Type Allow Nulls
----------- --------- ------------
Expiry Date Date       No 
```

现在我想在到期日期中插入多个日期值。那么我该怎么做呢？

所以我的输出应该如下：

```
Expiry Date

23/3/2014,23/4/2014,23/5/2015 
```

这是我的插入语句

```
cmd.CommandText = "INSERT INTO Customers (UserID, Validity, Amount, RegisteredDate, 
ExpiryDate, FirstName, LastName, Address, State, City, Phone, Mobile, Email) 
VALUES(@UserID,@Validity,@Amount,@RegisteredDate,@ExpiryDate,@FirstName,@LastName,
@Address,@State,@City,@Phone,@Mobile,@Email)" 
```

这是我的更新声明：

```
cmd.CommandText = "UPDATE Customers SET  UserID = @UserID, Validity = @Validity, 
Amount = @Amount, RegisteredDate = @RegisteredDate, ExpiryDate = @ExpiryDate,
FirstName   = @FirstName, LastName = @LastName , Address = @Address, State = @State, 
City = @City, Phone = @Phone, Mobile= @Mobile, Email = @Email WHERE UserID = @UserID" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:26:46.177

如果您的 ExpiryDate 在数据库中定义为日期字段，那么答案是您不能这样做。但是，如果它定义为一个字符串（它永远不应该是），那么您可以将多个到期日期连接起来并像存储任何其他字符串一样存储它。但我不明白多个到期日有什么意义。但是，如果由于某种不明显的原因，多个日期是有效的**，并且**您希望它们存储为日期，那么您可以定义一个单独的到期日期表，并将 ExpiryDateID 存储在第一个表中，并具有一对多的关系现有表和新表。

# python - python中的wordnet词形还原和pos标记

> ID：15586721
> 
> 赞同：75
> 
> 时间：2013-03-23T12:23:54.323
> 
> 标签：python, nltk, wordnet, lemmatization

我想在 python 中使用 wordnet lemmatizer，并且我了解到默认的 pos 标记是 NOUN，并且它不会为动词输出正确的 lemma，除非 pos 标记明确指定为 VERB。

我的问题是，为了准确地执行上述词形还原，最好的方法是什么？

我使用了 pos 标记，`nltk.pos_tag`并且在将树库 pos 标签集成到 wordnet 兼容的 pos 标签时迷失了方向。请帮忙

```
from nltk.stem.wordnet import WordNetLemmatizer
lmtzr = WordNetLemmatizer()
tagged = nltk.pos_tag(tokens) 
```

我得到了 NN、JJ、VB、RB 中的输出标签。如何将这些更改为与 wordnet 兼容的标签？

我还必须`nltk.pos_tag()`使用标记的语料库进行训练，还是可以直接在我的数据上使用它来评估？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-03-23T18:15:42.243

首先，您`nltk.pos_tag()`无需培训即可直接使用。该函数将从文件中加载预训练的标记器。您可以使用以下命令查看文件名`nltk.tag._POS_TAGGER`：

```
nltk.tag._POS_TAGGER
>>> 'taggers/maxent_treebank_pos_tagger/english.pickle' 
```

由于它是使用 Treebank 语料库训练的，因此它也使用[Treebank 标签集](https://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html)。

以下函数将树库标签映射到 WordNet 词性名称：

```
from nltk.corpus import wordnet

def get_wordnet_pos(treebank_tag):

    if treebank_tag.startswith('J'):
        return wordnet.ADJ
    elif treebank_tag.startswith('V'):
        return wordnet.VERB
    elif treebank_tag.startswith('N'):
        return wordnet.NOUN
    elif treebank_tag.startswith('R'):
        return wordnet.ADV
    else:
        return '' 
```

然后，您可以将返回值与 lemmatizer 一起使用：

```
from nltk.stem.wordnet import WordNetLemmatizer
lemmatizer = WordNetLemmatizer()
lemmatizer.lemmatize('going', wordnet.VERB)
>>> 'go' 
```

在将返回值传递给 Lemmatizer 之前检查返回值，因为空字符串会给出`KeyError`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-07-25T05:44:07.033

如 nltk.corpus.reader.wordnet 的源代码（[http://www.nltk.org/_modules/nltk/corpus/reader/wordnet.html](http://www.nltk.org/_modules/nltk/corpus/reader/wordnet.html)）

```
#{ Part-of-speech constants
 ADJ, ADJ_SAT, ADV, NOUN, VERB = 'a', 's', 'r', 'n', 'v'
#}
POS_LIST = [NOUN, VERB, ADJ, ADV] 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-10-04T11:55:41.700

> 转换步骤：**Document->Sentences->Tokens->POS->Lemmas**

```
import nltk
from nltk.stem import WordNetLemmatizer
from nltk.corpus import wordnet

#example text text = 'What can I say about this place. The staff of these restaurants is nice and the eggplant is not bad'

class Splitter(object):
    """
    split the document into sentences and tokenize each sentence
    """
    def __init__(self):
        self.splitter = nltk.data.load('tokenizers/punkt/english.pickle')
        self.tokenizer = nltk.tokenize.TreebankWordTokenizer()

    def split(self,text):
        """
        out : ['What', 'can', 'I', 'say', 'about', 'this', 'place', '.']
        """
        # split into single sentence
        sentences = self.splitter.tokenize(text)
        # tokenization in each sentences
        tokens = [self.tokenizer.tokenize(sent) for sent in sentences]
        return tokens

class LemmatizationWithPOSTagger(object):
    def __init__(self):
        pass
    def get_wordnet_pos(self,treebank_tag):
        """
        return WORDNET POS compliance to WORDENT lemmatization (a,n,r,v) 
        """
        if treebank_tag.startswith('J'):
            return wordnet.ADJ
        elif treebank_tag.startswith('V'):
            return wordnet.VERB
        elif treebank_tag.startswith('N'):
            return wordnet.NOUN
        elif treebank_tag.startswith('R'):
            return wordnet.ADV
        else:
            # As default pos in lemmatization is Noun
            return wordnet.NOUN

    def pos_tag(self,tokens):
        # find the pos tagginf for each tokens [('What', 'WP'), ('can', 'MD'), ('I', 'PRP') ....
        pos_tokens = [nltk.pos_tag(token) for token in tokens]

        # lemmatization using pos tagg   
        # convert into feature set of [('What', 'What', ['WP']), ('can', 'can', ['MD']), ... ie [original WORD, Lemmatized word, POS tag]
        pos_tokens = [ [(word, lemmatizer.lemmatize(word,self.get_wordnet_pos(pos_tag)), [pos_tag]) for (word,pos_tag) in pos] for pos in pos_tokens]
        return pos_tokens

lemmatizer = WordNetLemmatizer()
splitter = Splitter()
lemmatization_using_pos_tagger = LemmatizationWithPOSTagger()

#step 1 split document into sentence followed by tokenization
tokens = splitter.split(text)

#step 2 lemmatization using pos tagger 
lemma_pos_token = lemmatization_using_pos_tagger.pos_tag(tokens)
print(lemma_pos_token) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-03-17T11:09:29.883

您可以使用 python 默认字典创建地图，并利用以下事实：对于词形还原器，默认标签是名词。

```
from nltk.corpus import wordnet as wn
from nltk.stem.wordnet import WordNetLemmatizer
from nltk import word_tokenize, pos_tag
from collections import defaultdict

tag_map = defaultdict(lambda : wn.NOUN)
tag_map['J'] = wn.ADJ
tag_map['V'] = wn.VERB
tag_map['R'] = wn.ADV

text = "Another way of achieving this task"
tokens = word_tokenize(text)
lmtzr = WordNetLemmatizer()

for token, tag in pos_tag(tokens):
    lemma = lmtzr.lemmatize(token, tag_map[tag[0]])
    print(token, "=>", lemma) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-09-15T04:08:08.443

@Suzana_K 正在工作。但是我有一些情况导致 KeyError 作为@Clock Slave 提到的。

将树库标签转换为 Wordnet 标签

```
from nltk.corpus import wordnet

def get_wordnet_pos(treebank_tag):

    if treebank_tag.startswith('J'):
        return wordnet.ADJ
    elif treebank_tag.startswith('V'):
        return wordnet.VERB
    elif treebank_tag.startswith('N'):
        return wordnet.NOUN
    elif treebank_tag.startswith('R'):
        return wordnet.ADV
    else:
        return None # for easy if-statement 
```

现在，只有当我们有 wordnet 标签时，我们才将 pos 输入到 lemmatize 函数中

```
from nltk.stem.wordnet import WordNetLemmatizer
lemmatizer = WordNetLemmatizer()
tagged = nltk.pos_tag(tokens)
for word, tag in tagged:
    wntag = get_wordnet_pos(tag)
    if wntag is None:# not supply tag in case of None
        lemma = lemmatizer.lemmatize(word) 
    else:
        lemma = lemmatizer.lemmatize(word, pos=wntag) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-12-25T21:09:24.953

您可以执行以下操作：

```
import nltk
from nltk.corpus import wordnet

wordnet_map = {
    "N": wordnet.NOUN,
    "V": wordnet.VERB,
    "J": wordnet.ADJ,
    "R": wordnet.ADV
}

def pos_tag_wordnet(text):
    """
        Create pos_tag with wordnet format
    """
    pos_tagged_text = nltk.pos_tag(text)

    # map the pos tagging output with wordnet output
    pos_tagged_text = [
        (word, wordnet_map.get(pos_tag[0])) if pos_tag[0] in wordnet_map.keys()
        else (word, wordnet.NOUN)
        for (word, pos_tag) in pos_tagged_text
    ]

    return pos_tagged_text 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-10T00:15:09.583

您可以在一行中执行此操作：

```
wnpos = lambda e: ('a' if e[0].lower() == 'j' else e[0].lower()) if e[0].lower() in ['n', 'r', 'v'] else 'n' 
```

然后用于`wnpos(nltk_pos)`获取 POS 给 .lemmatize()。在你的情况下，`lmtzr.lemmatize(word=tagged[0][0], pos=wnpos(tagged[0][1]))`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-20T10:01:13.793

在网上搜索后，我找到了这个解决方案：从句子到“词袋”经过拆分、pos_tagging、词形还原和清理（从标点符号和“停止词”）操作得出。这是我的代码：

```
from nltk.corpus import wordnet as wn
from nltk.wsd import lesk
from nltk.stem import WordNetLemmatizer 
from nltk.corpus import stopwords 
from nltk.tokenize import word_tokenize

punctuation = u",.?!()-_\"\'\\\n\r\t;:+*<>@#§^$%&|/"
stop_words_eng = set(stopwords.words('english'))
lemmatizer = WordNetLemmatizer()
tag_dict = {"J": wn.ADJ,
            "N": wn.NOUN,
            "V": wn.VERB,
            "R": wn.ADV}

def extract_wnpostag_from_postag(tag):
    #take the first letter of the tag
    #the second parameter is an "optional" in case of missing key in the dictionary 
    return tag_dict.get(tag[0].upper(), None)

def lemmatize_tupla_word_postag(tupla):
    """
    giving a tupla of the form (wordString, posTagString) like ('guitar', 'NN'), return the lemmatized word
    """
    tag = extract_wnpostag_from_postag(tupla[1])    
    return lemmatizer.lemmatize(tupla[0], tag) if tag is not None else tupla[0]

def bag_of_words(sentence, stop_words=None):
    if stop_words is None:
        stop_words = stop_words_eng
    original_words = word_tokenize(sentence)
    tagged_words = nltk.pos_tag(original_words) #returns a list of tuples: (word, tagString) like ('And', 'CC')
    original_words = None
    lemmatized_words = [ lemmatize_tupla_word_postag(ow) for ow in tagged_words ]
    tagged_words = None
    cleaned_words = [ w for w in lemmatized_words if (w not in punctuation) and (w not in stop_words) ]
    lemmatized_words = None
    return cleaned_words

sentence = "Two electric guitar rocks players, and also a better bass player, are standing off to two sides reading corpora while walking"
print(sentence, "\n\n bag of words:\n", bag_of_words(sentence) ) 
```

# python - Python 和 C 中的相同函数，结果不同

> ID：15586724
> 
> 赞同：2
> 
> 时间：2013-03-23T12:24:02.857
> 
> 标签：python, c

作为更大模拟的一部分，我用 Python 编写了以下函数：

```
#!/usr/bin/python
counter = 1
while (counter < 10000):
    oldpa = .5
    t = 1
    while (t < counter):
        newpa = ((oldpa * t) + 1) / (t + 1)
        t = t + 1
        oldpa = newpa
    counter = counter + 1
    print str(counter) + "\t" + str(oldpa) 
```

然后，我开始用 C 重写模拟，以便它运行得更快（同时也给自己一个花时间学习 C 的借口）。这是我的上述函数的 C 版本。

```
#include <stdio.h>
main()
{
  int counter, t;
  float oldpa, newpa;
  counter = 1;
  while ( counter < 10000 )
    {
      oldpa = .5;
      t = 1;
      while ( t < counter )
        {
          newpa = ((oldpa * t) + 1) / (t + 1);
          t = t + 1;
          oldpa = newpa;
        }
      counter = counter + 1;
      printf("%d\t%f\n", counter, oldpa);
   }
} 
```

现在，有趣的事情来了。当我运行 Python 函数时，结果收敛到 0.999950，但是当我运行 C 函数时，它收敛到 0.999883。就我的模拟而言，这种差异实际上可以忽略不计，但我仍然想知道为什么我得到不同的结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T12:54:52.343

Python 中的浮点值几乎总是 IEEE-754[双精度](http://docs.python.org/2/tutorial/floatingpoint.html)，对应于 C 或 C++ `double`。如果您想要更高的精度，请查看[小数模块](http://docs.python.org/2/library/decimal.html)。

# c# - 代表的封装问题？

> ID：15586728
> 
> 赞同：4
> 
> 时间：2013-03-23T12:24:13.277
> 
> 标签：c#, oop, encapsulation

我想知道为什么这有效？

例如，我有一些看起来像这样的**执行器类：**

```
public class Executor
{
    public void Execute(Action action)
    {
        action();
    }
} 
```

现在我有一些**需要执行的类**，如下所示：

```
public class NeedToBeExecuted
{
    public void Invoke()
    {
        Executor executor = new Executor();
        executor.Execute(DoSomething);
    }

    private void DoSomething()
    {
        // do stuff private
    }
} 
```

我的问题是为什么这是我将**私有方法**传递给**其他类**的工作？

这不是封装问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T14:27:23.733

不，这不违反封装。

首先：类本身决定将委托分发给它的一个私有方法！该类可以访问它的私有方法，并且如果它选择将一个引用交给该方法的可访问域之外的代码，那完全在它的权利范围内。

第二：方法的可访问域不限制可以*调用*方法的位置。 **它限制了可以按名称查找方法的位置**。类`Executor`从不使用*名称* `DoSomething`来调用私有方法。它正在使用名称`action`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T12:41:42.683

那我试一试吧。

不，我们没有封装问题。您正在定义一个对某事负责的类`Execute`。对实际执行的**内容一无所知**`Executer`。它只知道它应该执行。在负责执行某些操作的类中指定了什么。**`DoSomething``DoSomething`**

 **正如我评论的那样，它与您对`Thread`. 您定义了一个需要在不同线程上执行的方法。这就是为什么该类有一个线程，并定义应该在该线程上运行哪个方法。Thread 仍然对它所扮演角色的类一无所知。

关系是类 => 线程。不是反过来。

在您的示例中，关系是`NeedToBeExecuted`=> `Executer`。不是反过来。

这个概念对你来说可能很棘手，但你没有做错任何事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T12:42:46.480

它只是与使用反射一样多的封装问题。使用反射可以很容易地从外部类访问私有方法和变量。你不应该认为这是一件坏事，因为它只会让语言变得更加强大。

无论如何，该类是放弃委托方法的类，因此该类在某种程度上启用了该行为，因此它根本不应该是封装问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T12:51:09.227

考虑一下：`NeedToBeExecuted`没有以`DoSomething()`可以任意调用的方式公开方法 - 而是将其作为委托传递给另一个函数。它也可以很容易地通过`() => DoSomething()`——结果是一样的。最终访问修饰符是为了防止使用您的方法的**不同**类，您仍然可以随意使用它。如果您选择将它传递给另一个类，这是一个有效的用途。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-23T12:55:04.247

您传入`DoSomething`method `Invoke()`，它可以在上下文中访问。不存在封装问题。

但是，正如您在代码中看到的注释，`DoSomething`在`EitherNeedToBeExecuted`.

```
public class Executor {
    public void Execute(Action action) {
        action();
    }
}

public class NeedToBeExecuted {
    public virtual void Invoke() {
        Executor executor=new Executor();
        executor.Execute(this.DoSomething);
    }

    private void DoSomething() {
        Console.WriteLine("I'M DOING IT MYSELF!!");
    }

    protected Executor m_Executor=new Executor();
}

public class EitherNeedToBeExecuted: NeedToBeExecuted {
    public override void Invoke() {
        // 'NeedToBeExecuted.DoSomething()' is inaccessible due to its protection level
        m_Executor.Execute(base.DoSomething);
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-23T12:55:31.853

封装意味着能够在不更改外部代码的情况下更改某些模块的内部结构。这里仍然是这种情况。所以没有发生封装破坏。**

# css - 在 MVC 4 中找不到 editor-label 和 editor-field 的定义，MS 是否将其删除？为什么？

> ID：15586733
> 
> 赞同：2
> 
> 时间：2013-03-23T12:24:50.057
> 
> 标签：css, asp.net-mvc, asp.net-mvc-4

当我曾经使用 MVC 3 时，我将我之前项目的一些部分嵌入到新的 MVC 4 模板中。显然，两个最常用的 CSS 类定义`editor-label`和`editor-field`div 已经从 MVC 4 的 Site.css 中消失了。

问题是我应该在 CSS 文件中定义它们还是使用其他东西还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:12:06.393

好吧，您可以采取以下几种选择：

## 将元素包装在一个类中

将所有输入包装在 a 中`div`并更改样式以针对它`div`而不是`.editor-label`and `.editor-field`。

所以HTML

```
<label class="editor-label">blah</label>
<input class="editor-field" /> 
```

变成

```
<div class="editor">
    <label class="editor-label">blah</label>
    <input class="editor-field" />
</div> 
```

还有你的 CSS

```
.editor-label { /**/ }
.editor-field { /**/ } 
```

变成

```
.editor label { /**/ }
.editor input,
.editor select { /**/ } 
```

## 用 JavaScript 重新添加它们

您也许可以使用一些 JavaScript 重新添加类。

[jsFiddle 上的演示](http://jsfiddle.net/Tyriar/MDaZm/)

```
var content = document.getElementById('content');
var labels = content.getElementsByTagName('label');

for (var i = 0; i < labels.length; i++) {
    labels[i].classList.add('editor-label');
    var id = labels[i].getAttribute('for');
    var input = document.getElementById(id);
    input.classList.add('editor-field');
} 
```

## 修改编辑器模板

几个月前，我写了[一篇](http://www.growingwiththeweb.com/2012/12/aspnet-mvc-display-and-editor-templates.html)关于如何修改显示和编辑器模板的博客文章，允许`HtmlHelper.EditorFor()`从`HtmlHelper.DisplayFor()`. 这将允许您将课程放回原来的位置。但是，这种方法可能比您的情况更麻烦。

基本上，您可以将自定义视图放置在`Views/Shared/EditorTemplates/`根据要覆盖的类型命名的位置，`string.cshtml`例如`string`. 一个示例视图`string`可能是：

**字符串.cshtml**

```
@model string

@{
    var id = ViewData.TemplateInfo.GetFullHtmlFieldId(Model);
}

<label class="editor-label" for="@id"></label>
<input type="text" class="editor-field" id="@id" /> 
```

## 传入`htmlAttributes`

您不能将类传递给 htmlAttributes 参数 on `EditorFor()`，但可以 for`LabelFor()`和`TextBoxFor()`等。您可以将 的所有实例更改`EditorFor()`为它们各自的类型并在调用中提供类。

```
@Html.LabelFor(e => e.UserName, new { @class="editor-field" })
@Html.TextBoxFor(m => m.UserName, new { @class="editor-field" }) 
```

## 进一步阅读

*   [我的博文 - ASP.NET MVC 显示和编辑器模板](http://www.growingwiththeweb.com/2012/12/aspnet-mvc-display-and-editor-templates.html)

# c# - DoubleAnimation 不更新 DependencyProperty

> ID：15586734
> 
> 赞同：0
> 
> 时间：2013-03-23T12:25:07.113
> 
> 标签：c#, storyboard, windows-store-apps, dependency-properties

我有以下课程：

```
public class BindableClock : DependencyObject, INotifyPropertyChanged
{
    private DoubleAnimation animation = new DoubleAnimation
    {
        From = 0.0d,
        To = 10.0d,
        Duration = new Duration(TimeSpan.FromDays(1d)),
        BeginTime = TimeSpan.Zero
    };
    private Storyboard storyboard = new Storyboard { Duration = Duration.Automatic };

    public double BogusDouble
    {
        get { return (double)GetValue(BogusDoubleProperty); }
        set { SetValue(BogusDoubleProperty, value); }
    }

    // Using a DependencyProperty as the backing store for BogusDouble.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty BogusDoubleProperty =
        DependencyProperty.Register("BogusDouble", typeof(double), typeof(BindableClock), new PropertyMetadata(0.0d, BogusDoubleChangedCallback));

    public static void BogusDoubleChangedCallback(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var clock = d as BindableClock;
        clock.TimeSpan = clock.storyboard.GetCurrentTime();
    }

    public TimeSpan TimeSpan {get; set;}

    public BindableClock(bool start)
    {
        Storyboard.SetTarget(animation, this);
        Storyboard.SetTargetProperty(animation, "BogusDouble");
        storyboard.Children.Add(animation);
        Value = TimeSpan.ToString(Format);
        if (start)
            storyboard.Begin();
    }

    public void Begin()
    {
        storyboard.Begin();
    }

    public void Stop()
    {
        storyboard.Stop();
    }
} 
```

我期待，在我运行`Begin()`方法之后，`BogusDouble`属性会更新几次，并且`BogusDoubleChangedCallback`每次都会上升。但事实并非如此。

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:08:20.423

你的故事板的持续时间应该是一天？我认为这需要一些时间才能发生第一个变化。或者我在这里想念什么……？

# javascript - 使用 onSubmit 提交表单

> ID：15586736
> 
> 赞同：1
> 
> 时间：2013-03-23T12:25:13.243
> 
> 标签：javascript, jquery, onsubmit

我的表格`onSubmit`正在调用：

```
onsubmit="validate(this); return false;" 
```

`validate();`如下：

```
function validate(obj) {
    $.ajax({
        url : "ajax/validate_check.php",
        type : "POST",
        data : $("#" + obj.id).serialize(),
        success : function(data) {
            $('#' + obj.id + ' :input.form_errors').removeClass('form_errors')
            data = $.parseJSON(data);
            if(data['error_count'] >= 1) {
                $.each(data, function(i, item) {
                    $('#' + i).addClass('form_errors');
                });
            } else {
                $('#' + obj.id).submit();
            }
        }
    });
} 
```

当我`0`遇到错误时，它会尝试提交表单，但我遇到了无限循环。我意识到它正在发生，因为我`onSubmit`再次调用了该函数。准备好后如何实际提交表格？

编辑：

我只是在寻找解决这个问题的最佳方法。我想验证`onSubmit`对用户的快速响应，然后我想以我知道数据去向的方式实际提交表单（例如 register.php 将注册用户）。

这就是为什么我不执行组合操作/验证脚本的原因，因为我不知道我要提交哪个表单。我可能需要重新安排我这样做的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:54:08.800

消除`onsubmit="validate(this); return false;"`

并使用以下功能：

```
$('form').submit(function(e){
    e.preventDefault();
    var $form = $(this),
        $formId = $form.attr('id'),
        $formName = $form.attr('name');

    $.ajax({
        url : "ajax/validate_check.php",
        type : "POST",
        data : $("#" + $formId).serialize(),
        success : function(data) {
            $('#' + $formId + ' :input.form_errors').removeClass('form_errors')
            data = $.parseJSON(data);
            if(data['error_count'] >= 1) {
                $.each(data, function(i, item) {
                    $('#' + i).addClass('form_errors');
                });
            } else {
                document.forms[$formName].submit();
            }
        }
    });
}); 
```

小提琴，您可以使用表单`id`或进行测试：http `name`: [//jsfiddle.net/67rvg/3/](http://jsfiddle.net/67rvg/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:41:12.390

在你的街区

```
 } else {
        $('#' + obj.id).submit();
   } 
```

与其进行实际的表单提交，不如使用另一个 ajax 调用将您的数据发送到您的表单操作端点：

```
} else {

    $.ajax({
        url : obj.action
        ,type : obj.method
        ,data : $(obj).serialize()
        ,success : function() {
            // show success message/close window/ etc
        }
        , error: function() {
            // show error saving form message
        }
    });
} 
```

这样，如果表单提交出现问题，您将能够更好地捕获结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:59:50.157

这应该有效：在重新提交之前取消绑定事件。

代替

```
function validate(obj) {
    $.ajax({
        url : "ajax/validate_check.php",
        type : "POST",
        data : $("#" + obj.id).serialize(),
        success : function(data) {
            $('#' + obj.id + ' :input.form_errors').removeClass('form_errors')
            data = $.parseJSON(data);
            if(data['error_count'] >= 1) {
                $.each(data, function(i, item) {
                    $('#' + i).addClass('form_errors');
                });
            } else {
                $('#' + obj.id).submit();
            }
        }
    });
} 
```

尝试

```
function validate(obj) {
    $.ajax({
        url : "ajax/validate_check.php",
        type : "POST",
        data : $("#" + obj.id).serialize(),
        success : function(data) {
            $('#' + obj.id + ' :input.form_errors').removeClass('form_errors')
            data = $.parseJSON(data);
            if(data['error_count'] >= 1) {
                $.each(data, function(i, item) {
                    $('#' + i).addClass('form_errors');
                });
            } else {
                $('#' + obj.id).unbind('submit').submit();
            }
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T12:28:57.363

我不会在您的 else 分支中再次提交，而是返回一个真值。

在你的 onsubmit 我会做 onsubmit="return validate(this);"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T12:39:54.390

不要`submit`再次使用提交调用，正如您所说，您将处于循环中......只需像提交一样发布所有内容：

更改您的`$('#' + obj.id).submit();`行`submitForm()`并添加

```
function submitForm() {
    var form = $("#my_form"),
        url = form.attr("action"),
        dt = form.serialize();

    $.post(url, dt, function(data) {
       // your form was post'd successfully
    });
} 
```

* * *

既然你知道如何工作，为什么要发明井？

你为什么不使用[**jQuery Validate**](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)和[**远程验证**](http://docs.jquery.com/Plugins/Validation/Methods/remote)来为你完成这项工作？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T18:20:00.757

1.  不要使用 onsubmit 属性，它将 JavaScript 混合到 html 标记中，并且违背了最佳实践。
2.  为什么不将验证部分作为注册功能（服务器端）。这样一来，您的往返次数就不会是您需要的两倍。遵循最佳实践，您应该尽可能少地发出 http 请求。您可以根据功能将 php 脚本组织到文件夹中。更容易分辨正在提交什么表单。这样，为每个表单提交创建一个唯一的验证脚本也会容易得多。您还可以使用 REQUEST_URI 服务器变量来判断您正在提交哪个表单。

[有关在 php 脚本中访问请求的 REQUEST URI 的说明，请参见此处。](http://php.net/manual/en/reserved.variables.server.php)

如果您对提交的每个表单都进行了共同验证，则可以将其移动到单独的 php 文件中，并将其导入将使用该函数的所有文件中。然后，该函数将在您将其导入的脚本中可用。

[有关在 php.ini 中包含文件的说明，请参见此处。](http://php.net/manual/en/function.include.php)

然后，您可以为每个单独的脚本添加自定义验证。有一天，您很可能需要对某些表单进行自定义验证。

*   实用程序/validation_util.php
*   ajax/用户/register.php
*   ajax/用户/login.php
*   ajax/用户/logout.php
*   ajax/product/search.php
*   ajax/product/detail.php
*   ajax/product/addToCart.php
*   ETC...

    ```
    $('#formId').on('submit', function (event) {

    event.preventDefault();

    $.ajax({
        url : "ajax/user/register.php",
        type : "POST",
        data : $(this).serialize(),
        success : function(data) {
            $('#' + obj.id + ' :input.form_errors').removeClass('form_errors')
            data = $.parseJSON(data);
            if(data['error_count'] >= 1) {
                $.each(data, function(i, item) {
                    $('#' + i).addClass('form_errors');
                });
            }
        }
    });
    }); 
    ```

# jquery - 对象没有方法“ajaxLoader”

> ID：15586743
> 
> 赞同：0
> 
> 时间：2013-03-23T12:26:17.353
> 
> 标签：jquery, ajax

我有一个 asp.net mvc razor 项目。我想在其中使用[AjaxLoader](https://code.google.com/p/jquery-ajaxloader/)。

以下是我包含在 _Layout.cshtml 文件中的文件：

```
@Styles.Render("~/Content/css")
@Scripts.Render("~/bundles/modernizr")
@Scripts.Render("~/Scripts/jquery-1.7.1.js")
@Scripts.Render("~/Scripts/jquery-1.7.1.min.js")
@Scripts.Render("~/Scripts/jquery.ajaxloader.js") 
```

并且所有路径都是正确的。这是我的使用方法：

```
$('<div id="myLoadingMask" style="width:300px; height:200px;"></div>').appendTo($('#myDiv'));
var $loadingMask = $("#myLoadingMask");
$loadingMask.ajaxLoader(); 
```

我收到错误 Uncaught TypeError: Object [object Object] has no method 'ajaxLoader'。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:31:59.953

该`ajaxLoader`方法实际上被称为[`ajaxloader`](https://code.google.com/p/jquery-ajaxloader/)：

```
$loadingMask.ajaxloader(); 
```

# objective-c - 在沙盒应用程序中使用 NSFileManager 访问 NSApplicationScriptsDirectory

> ID：15586745
> 
> 赞同：2
> 
> 时间：2013-03-23T12:26:20.203
> 
> 标签：objective-c, cocoa, appstore-sandbox

我在使用此代码访问应用程序脚本的默认文件夹时遇到了一些麻烦（我认为这是正确的做法）：

```
NSError* error;
NSURL* scriptsFolderURL = [[NSFileManager defaultManager] URLForDirectory: NSApplicationScriptsDirectory inDomain: NSUserDomainMask appropriateForURL: nil create: YES error: &error];

NSLog(@"%@", scriptsFolderURL);
NSLog(@"%@", [error description]); 
```

问题是两个 NSLog 都调用 print `(null)`，这意味着我什么也没得到。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-25T06:05:05.237

*NSApplicationScriptsDirectory*的注释如下：

> // 调用应用程序的用户脚本文件夹的位置 (~/Library/Application Scripts/code-signing-id)

code-signing-id 提示您必须启用代码签名。启用代码签名后，您将收到正确的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:46:37.487

只要您有一个`Info.plist`包含有效应用程序包 ID 的有效应用程序包 ID 并且在 OS X 10.8 下运行，这应该可以正常工作。

但是，我可以确认 API 返回 nil 并返回 nil 错误的情况并不少见，这有点超出 API 合同的范围。

# c# - 使用 MonoTouch.Dialog 设置视图背景色

> ID：15586751
> 
> 赞同：1
> 
> 时间：2013-03-23T12:26:47.990
> 
> 标签：c#, ios, uitableview, xamarin.ios, monotouch.dialog

几天以来，我试图将 MonoTouch.Dialog 的背景设置为蓝色......我在像这样搜索时收集了很多信息[How to set background to transparent on a DialogViewController](https://stackoverflow.com/questions/9977427/how-to-set-the-background-to-transparent-on-a-dialogviewcontroller) and this [UITableView backgroundColor always gray在 iPad 上，](https://stackoverflow.com/questions/2688007/uitableview-backgroundcolor-always-gray-on-ipad)但我无法让它适合我的使用...

我喜欢做的是为我的根元素创建一个带有蓝色背景的 DialogViewController，这就是我正在做的事情：

```
 _rootVC = new DialogViewController (_rootElement);
        _rootVC.View.BackgroundColor = UIColor.Blue;
        _rootVC.View.Opaque=false;
        _rootVC.TableView.BackgroundColor=UIColor.Blue;
        _rootVC.TableView.Opaque=false;
        _nav = new UINavigationController (_rootVC);
        _window.RootViewController = _nav; 
```

根元素很好，整个代码都可以工作 - 只是不知道为什么我不能改变背景颜色......你能帮忙吗？

谢谢

安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:36:46.893

试试这个：

```
_rootVC.TableView.BackgroundView = null; 
```

默认情况下`UITableView`，分组使用带有白线的蓝色背景。它使用`BackgroundView`财产。

# jquery - .click 附加元素上的错误，即使使用 .on

> ID：15586752
> 
> 赞同：0
> 
> 时间：2013-03-23T12:26:57.730
> 
> 标签：jquery

尝试在附加的 div 元素上使用 .click 时出现错误，因此我尝试使用 .on 代替，但没有解决。这段代码的最后几行有什么问题？

元素 .table 是令人沮丧的：

```
 $('#mapH').focusout(function(){
    var i = 0;
    while (i < $('#mapH').val()) {
        $('#mapCreator').append("<div class='row'></div>");

        var j = 0;
        while(j < $('#mapW').val()) {
            $('.row').last().append("<div class='table empty "+i+"-"+j+"'></div>");
            j++;
        }
        i++;
    }
    $('.table').css("width", 100/$('#mapW').val()+"%");
    $('.row').css("height", $('.table').width());
})

$('.table').on("click", function(){
    //$('body').append("<div class='popup'></div>");
    alert('hej');
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:29:01.613

清空后，您可能在表类中有额外的空间。更改并将事件委托`class='table empty "`给`class='table empty"`.table.empty 或文档的父级。

```
$(document).on("click",'[class^=table]', function(){
    //$('body').append("<div class='popup'></div>");
    alert('hej');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:49:05.860

你可以试试：

```
$("div .table").click(function(){

// code here 

alert("call");

}); 
```

# coremidi - CoreMIDI refCon 传递给 MIDIReadProc

> ID：15586755
> 
> 赞同：2
> 
> 时间：2013-03-23T12:27:10.760
> 
> 标签：coremidi

我需要了解在使用多个 MIDI 设备时如何返回 MIDI 数据包的来源。

我使用以下循环连接了所有源：

```
ItemCount sourceCount = MIDIGetNumberOfSources();
for (ItemCount i = 0 ; i < sourceCount ; ++i) {

MIDIEndpointRef source = MIDIGetSource(i);
MIDISourceConnectPort( inPort, source, &i);

} 
```

我知道 MIDISourceConnectPort() 中的最后一个参数是一个上下文，用于识别发送到 MIDIReadProc 回调的源。所以我试图将源的索引发送到 MIDIReadProc。

```
void MIDIReadProc (const MIDIPacketList   *pktlist,
                 void                   *readProcRefCon,
                 void                   *srcConnRefCon)
{

\\ How do I access the source index passed in the conRef by using *srcConnRefSource?

} 
```

我需要知道这一点的原因是我正在尝试向设备发送 LED 反馈，并且我需要知道哪个设备发送了数据包，以便我可以将反馈发送到正确的设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:21:15.530

下面的代码假设您已经为输入和输出设置了 MIDIClient 和 MIDIPortRef：

```
-(void)connectMidiSources{

MIDIEndpointRef src;

ItemCount sourceCount = MIDIGetNumberOfSources();

for (int i = 0; i < sourceCount; ++i) {

    src = MIDIGetSource(i);
    CFStringRef endpointName = NULL;
    MIDIUniqueID sourceUniqueID = NULL;

    CheckError(MIDIObjectGetStringProperty(src, kMIDIPropertyName, &endpointName), "Unable to get property Name");
    CheckError(MIDIObjectGetIntegerProperty(src, kMIDIPropertyUniqueID, &sourceUniqueID), "Unable to get property UniqueID");

    NSLog(@"Source: %u; Name: %@; UniqueID: %u", i, endpointName, sourceUniqueID);

    // *** The last paramenter in this function is a pointer to srcConnRefCon ***
    CheckError(MIDIPortConnectSource(clientInputPort, src, (void*)sourceUniqueID), "Couldn't connect MIDI port");

    }

} 
```

并在 MIDIReadProc 中访问源 refCon 上下文：

```
void midiReadProc (const MIDIPacketList *pktlist, void *readProcRefCon, void *srcConnRefCon){

//make a reference to the class you have the MIDIReadProc implemented within
MidiManager *midiListener = (MidiManager*)readProcRefCon;

//print the UniqueID for the source MIDIEndpointRef
int sourceUniqueID = (int*)srcConnRefCon;
NSLog(@"Note On sourceIdx: %u", sourceUniqueID);

// the rest of your code here...

} 
```

# android - 以编程方式在堆栈小部件中显示下一个/上一个图像

> ID：15586756
> 
> 赞同：1
> 
> 时间：2013-03-23T12:27:16.570
> 
> 标签：android, android-widget, android-appwidget, google-tv, stackview

我想为 Google TV 启用堆栈应用程序小部件。我遇到的问题是我需要以编程方式显示下一个和上一个视图。

我目前正在使用带有 a`StackView`和 2 按钮的布局。我可以成功接收到接收器中按钮的点击，但它应该工作的方法没有做任何事情

```
Toast.makeText(context, "next", Toast.LENGTH_SHORT).show();
remoteViews.showNext(R.id.stackWidgetView); 
```

调试时，接缝实例`remoteViews`正确并触发吐司。

据我从官方文档中了解到，该方法`showNext(int)`应该触发[http://developer.android.com/reference/android/widget/RemoteViews.html#showNext(int)](http://developer.android.com/reference/android/widget/RemoteViews.html#showNext(int))`RemoteViews`的 showNext`StackView`

问题是如何从`AppWidgetProvider`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:47:54.280

您是否调用了`partiallyUpdateAppWidget`（API11+，但更好，因为您不必重新创建适配器，并且使用 StackWidget，您无论如何都不应该担心较低版本）还是`updateAppWidget`使用`AppWidgetManager`您的`remoteView`?

作为参考，AppWidgetManager 的文档：http: [//developer.android.com/reference/android/appwidget/AppWidgetManager.html](http://developer.android.com/reference/android/appwidget/AppWidgetManager.html)

# asp.net - 另一个modalpopup回发关闭问题中的ModalPopup

> ID：15586757
> 
> 赞同：1
> 
> 时间：2013-03-23T12:27:24.667
> 
> 标签：asp.net, updatepanel, postback, ajaxcontroltoolkit, modalpopup

我有一个模态弹出窗口。当我单击此弹出窗口中的按钮时，会出现另一个弹出窗口。但是在第二个弹出窗口中，每次单击按钮时，弹出窗口都会消失，我必须单击第一个模式弹出窗口的按钮才能再次显示它。我已经在弹出控件的面板中放置了一个 UpdatePanel，但它似乎不起作用。更多详情。我创建了 2 个用户控件，1 个用于查找，另一个用于编辑数据。我正在创建另一个 2 用户控件，里面有模式弹出窗口。第一个模式弹出窗口：具有查找控件和编辑控件的多视图。

```
<asp:Panel ID="panelMain">
    <asp:UpdatePanel>
        <asp:MultiView>
            <asp:View>
                <Lookup Control>
            </asp:View>
            <asp:View>
                <Edit Control>
                // this edit control contains second modal popup
            </asp:View>
        </asp:MultiView>
    </asp:UpdatePanel>
</asp:Panel>
<ajax:ModalPopupExtender PopupControlID="panelMain" /> 
```

第二个模态弹出窗口：只有查找控件。

```
<asp:Panel ID="panelMain">
    <asp:UpdatePanel>
        <Lookup Control>
    </asp:UpdatePanel>
</asp:Panel>
<ajax:ModalPopupExtender PopupControlID="panelMain" /> 
```

查找控件具有搜索按钮等，并可能触发回发事件。无论如何，我可以防止第二个弹出窗口在每次点击后关闭？对不起我的英语不好，因为它不是我的母语。任何想法和建议表示赞赏！谢谢！

# mysql - 具有最大 id 的不同值

> ID：15586766
> 
> 赞同：0
> 
> 时间：2013-03-23T12:28:44.957
> 
> 标签：mysql, sql, distinct, max

我在 mysql 查询中遇到问题，我有 2 个表。

1.  `category_info`

    ```
    cid cname
    1   Latest News
    2   Notice Board
    3   Headline 
    ```

2.  `news_info`

    ```
    pid cid title               date
    1   1   mobile              2013-03-04
    2   1   fish                2013-03-04
    3   2   Airtel india        2013-03-04
    4   2   Marco Simoncelli    2013-03-05
    5   3   title1              2013-03-22
    6   1   title               2013-03-22
    7   3   International Opportunity   2013-03-22 
    ```

我想从`news_info`具有最大值的表不同值中访问标题`pid`

我正在使用以下查询

```
SELECT a.*, b.*  FROM category_info AS a RIGHT JOIN news_info AS b ON (a.cid = b.cid)  GROUP BY a.cid 
```

它给了我独特的价值，但不是最大的 ID。它给出最小 id 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:16:03.237

这将为您提供您提出的问题的答案。我不确定这是否是您真正想要的。

```
select distinct title
from news_info
where pid = 
(select max(pid) from news_info) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:32:07.617

这是另一种方法：

```
select ni.*
from news_info ni
order by pid desc
limit 1 
```

在您的示例中，没有重复的 pid，因此只有一个具有最大值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:33:39.347

这是另一种方法：

```
SELECT *
FROM news_info n
LEFT JOIN category_info c ON a.cid = b.cid
--
-- the maximum pid := there should not exist a higher pid value (for the same cid)
--
WHERE NOT EXISTS (
   SELECT * FROM news_info x
   WHERE x.cid = n.cid
   AND x.pid > n.pid
    ); 
```

# c++ - 错误：命名空间“boost”没有成员“lexical_cast”？

> ID：15586768
> 
> 赞同：1
> 
> 时间：2013-03-23T12:28:57.407
> 
> 标签：c++, boost, include

即使我有这包括：

```
#include "boost\lexical_cast.hpp" 
```

此行不会编译：

```
int versionInt = boost::lexical_cast<int>(version); 
```

当我将光标放在 lexical_cast 上时，它显示“错误：命名空间“boost”没有成员“lexical_cast”。问题是什么？

顺便说一句，这两行都在同一个 .cpp 文件中。

编辑：当我编译时，它写道： 1>c:\users\mickaël\documents\visual studio 2010\projects\Spirit Arena\Spirit Arena\boost\lexical_cast.hpp(24)：致命错误 C1083：无法打开包含文件： 'boost/config.hpp'：没有这样的文件或目录

编辑：出于某种原因，包含 < fstream > 也不起作用......我在 lexical_cast 起作用之前排除的所有附加标题。

编辑：当目录被复制到我的项目文件夹中时，我写了“#include”boots\lexical_cast.hpp“”行。也许与此有关？

# c++ - 在 C++ 函数中定义的对象超出范围后会被销毁吗？

> ID：15586770
> 
> 赞同：3
> 
> 时间：2013-03-23T12:29:04.190
> 
> 标签：c++, visual-c++, pointers, syntax, garbage-collection

我在函数中定义了一个对象：

```
SoundFXSystem* Engine::GetSystem(){
   SoundFXSystem system; // var defined inside a function
   sEngine->GetSystem(&system);
   return &system; // can I return the address of the var?
} 
```

返回 var 的地址并稍后在程序中使用它是否合法？当函数退出并且调用者无法使用它时，它会立即超出范围吗？

**编辑：**如果我按如下方式定义对象，它会被动态分配吗？

```
SoundFXSystem* Engine::GetSystem(){
   SoundFXSystem* system = new SoundFXSystem(); // var defined inside a function
   sEngine->GetSystem(&system);
   return system; 
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T12:30:25.443

是的，对象是在函数的范围内定义的，所以当函数的范围结束时它会超出范围。您需要：

1.  而是按值返回它，或者

2.  动态分配它，即使用`new`或`std::make_shared`

如果您使用 分配它`new`，请确保`delete`稍后有人会知道它。这就是为什么首选返回`std::unique_ptr`而不是分配函数的原始指针的原因——它避免了可能的内存泄漏。

要改为按值返回，您可以按如下方式更改函数：

```
SoundFXSystem Engine::GetSystem(){
   SoundFXSystem system; // var defined inside a function
   sEngine->GetSystem(&system);
   return system;  //return var by value
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T12:33:49.953

关于第二个问题：是的，它将在堆上动态分配，`delete`一旦完成就需要 d 。

中间有一个愚蠢的问题：这段代码的目的是什么？您正在传递对指针的引用...确保不要更改它，除非您想要内存泄漏。您可能只想传递指针（没有`&`, 来更改对象，而不是指向对象的指针）。

关于“价值回报”：

```
SoundFXSystem Engine::GetSystem(){
   SoundFXSystem system;           //Declares the local object
   sEngine->GetSystem(&system);    //Passes the pointer to the object
   return system;                  //Returns a 'Value Copy' of the object.
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T12:43:51.267

这有效，但很危险：

```
SoundFXSystem* Engine::GetSystem(){
    SoundFXSystem* system = new SoundFXSystem(); // var defined inside a function
    // ...
    return system; 
} 
```

您正在使用原始指针 ( `SoundFXSystem*`)，然后编译器不会自动销毁该对象。你必须自己打电话

```
delete p; 
```

其中`p`a与 中设置`SoundFXSystem*`的值相同。这并不简单，因为看起来可能会引发异常。最好使用智能指针（例如or ）：`system``Engine::GetSystem()``unique_ptr``shared_ptr`

```
std::shared_ptr<SoundFXSystem> Engine::GetSystem(){
    auto system = std::make_shared<SoundFXSystem>(); // var defined inside a function
    // ...
    return system; 
} 
```

# iphone - 如何在 iPhone 中创建带有 2 个滚动条的 UI 视图

> ID：15586773
> 
> 赞同：0
> 
> 时间：2013-03-23T12:29:17.520
> 
> 标签：iphone, ios, objective-c, xcode, tableview

我是一名 Java 开发人员，并且是这个 iPhone 编程的新手，所以我的问题对专家来说可能看起来有点傻。但这就是我现在所拥有的。

我想在 iPhone 中创建一个简单的应用程序，它在同一个窗口中有 2 个滚动视图（即相同的 UI 视图）。作为参考，您可以在其中查看实际视图[的 url ，在我的情况下，我不希望这个人需要同步的东西，我只需要一个具有 2 个表视图的单个视图。](https://stackoverflow.com/questions/8334340/scrolling-two-uitableviews-together)

谁能解释一下在 Xcode 中跟进的一些方法和步骤，我应该在 XCode 中选择什么样的模板 - 我正在使用带有 Xcode 4.6 的 iOS6（我知道我问了很多细节，但请考虑我是 Java 家伙和新人到这个世界）我需要如何遵循我的意思是创建 1 个 ui 视图然后添加 2 个表视图等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:33:39.447

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    UIScrollView  *scrollView1 = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 200)]; // set as per your requirement 
    [scrollView1 setContentSize:CGSizeMake( 320, 205 )];// set as per your requirement 
    [self.view addSubview:scrollView1];

UIScrollView  *scrollView2 = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 210, 320, 200)]; // set as per your requirement 
    [scrollView2 setContentSize:CGSizeMake( 320, 205 )];// set as per your requirement 
    [self.view addSubview:scrollView2];
} 
```

# ruby-on-rails - 如何找到关联计数等于 0 的模型的所有记录？

> ID：15586775
> 
> 赞同：1
> 
> 时间：2013-03-23T12:30:07.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有两个模型 -`Question`和`Answer`.

我想找出有 0 个答案的问题的数量。

所以我尝试了这样的东西，但没有奏效：

```
Question.where("answers.count = 0").count

Question.where("answers.count", 0).count

Question.joins(:answers).where("answers.count == 0").count 
```

和其他一些排列。

我怎样才能得到我想要的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T13:27:17.857

虽然 Edward 的回答有效，但您可以并且应该使用纯 sql 执行此操作：

```
Question.joins('LEFT OUTER JOIN answers.id ON answers.question_id = questions.id').group("questions.id").having("count('answers.id') = 0") 
```

但是，如果您只想要没有答案的问题总数，我认为您不能使用 ActiveRecord 方法做到这一点。您需要自己构建 sql 语句。

```
Question.find_by_sql(
   "select count(id) as total from (
       select questions.*, count(answers.id) from questions 
       left outer join answers on answers.question_id = questions.id 
       group by questions.id having count(answers.id) = 0) 
    as noanswers").first.total 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T13:20:38.380

```
Question.select('questions.*, COUNT(questions.id) AS question_count').joins('LEFT OUTER JOIN questions ON questions.answer_id = answers.id').group('answers.id').select { |a| a.question_count == 0}.count 
```

会得到你想要的。但这有点像噩梦——我想知道我是否遗漏了什么？

如果你想做很多复杂的查询，那么 squeel 值得一看 - [https://github.com/ernie/squeel](https://github.com/ernie/squeel)

或者，如果您只想计算答案的数量，那么您可以使用 counter_cache [http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

这是一篇关于如何添加计数器缓存的博客文章[http://blog.obiefernandez.com/content/2011/08/adding-a-counter-cache-to-existing-records.html](http://blog.obiefernandez.com/content/2011/08/adding-a-counter-cache-to-existing-records.html)

编辑感谢@boulder 指向纯sql 答案

```
Question.joins('LEFT OUTER JOIN answers ON answers.question_id = questions.id').group('questions.id').having("count('answers.id') = 0").count 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T18:44:36.430

如果您只是在命令行上执行此操作并且不关心性能，那么我只需执行 Question.all.map(&:id) - Answer.all.map(&:question_id).uniq 即可所有问题的 ID。基本上，您要选择所有问题，找到它们的问题 ID，然后从所有问题 ID 的集合中减去该集合。剩下的就是没有答案的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T02:57:27.460

```
Question.find_by_sql('select * from questions where (select count(*) from answers where question_id = question.id) = 0').count 
```

# perl - 无法编译我的 perl 脚本。让一切正常工作的最简单方法是什么？

> ID：15586781
> 
> 赞同：1
> 
> 时间：2013-03-23T12:31:03.867
> 
> 标签：perl, compilation, compiler-errors, activeperl, pp-perl-par-packager

我在编译我的 perl 脚本时遇到了很多麻烦。我在脚本中使用了各种模块：

```
use fetchinfo; #which I wrote so it's in the same directory as my script
use threads;
use threads::shared;
use Tk;
use Fcntl ':flock'; 
```

并且 fetchinfo.pm 也使用这个模块：

```
use WWW::Mechanize;
use URI::Escape;
use Date::Calc qw(Delta_Days);
use LWP::Simple;
use HTML::Parser; 
```

我的机器上安装了 ActivePerl（64 位 Win 7）。

我正在尝试编译我的代码并使其成为一个独立的 .exe 文件（尽管能够为其他系统编译也很棒（因为我认为我的代码不使用任何系统特定的功能）。

我不介意安装虚拟机（如果需要 32 位 win 或 linux），我不介意安装 Strawberry perl 而不是 ActivePerl ...我只想能够编译代码 :-)

尝试使用 perl2EXE 它说它找不到一些模块（尽管每个模块都是由 ppm 安装的）。我尝试在 Linux 上使用 Perl Packager (PAR::Packer) 进行编译（因为它没有显示在 ppm 上，而且我无法以任何其他方式安装它）但是创建的文件不起作用。

... 帮助？:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:47:14.610

您是否知道`perl2exe`所做的只是创建包含所有源文件的 perl 解释器可执行文件的副本（可能处于编译状态，我不确定）？

我建议您改用[`PAR package`](https://metacpan.org/module/PAR)它，它将构建一个包含可以从命令行运行的所有必要源的单个存档文件`perl`。

如果您绝对*必须*拥有一个可执行映像，请[`PAR::Packer`](https://metacpan.org/module/PAR::Packer)改为查看。

* * *

**更新**

> 我实际上希望这个程序在没有安装 perl 的计算机上运行。我知道我必须编译我的代码才能工作。PAR包不这样做，对吧？

不，您不必编译 Perl 源代码即可将其放入包中。这样做会适得其反，因为由于[`ByteLoader`](https://metacpan.org/module/ByteLoader)解释生成的解析树所需的额外模块，加载时间往往会增加。

> 我实际上需要安装和使用 PAR::Packer 的帮助，因为我无法在 Windows 上的 ActivePerl 上安装它，而且它在 linux 上为我制作的可执行文件在 Windows 64 位上无法运行。所以我做错了什么

我没有 ActivePerl 的实例，但`Par::Packer`可以在 Strawberry Perl 5 16.2 版上正常安装并通过所有测试。请理解，您*无法*在一个系统上构建将在不同平台上运行的可执行文件。这适用于*每种*语言，而不仅仅是 Perl。您需要在与您的目标兼容的系统上使用 Perl 的工作版本，以便能够构建可以在其他地方工作的可执行文件。

# java - 在eclipse中自动设置方法范围

> ID：15586782
> 
> 赞同：2
> 
> 时间：2013-03-23T12:31:16.417
> 
> 标签：java, eclipse, automation

有没有一种方法可以让 Eclipse 自动检查所有方法的范围，然后根据它的使用进行更正？

因此，如果我有一个仅在当前类中使用的公共方法，它将自动更改为私有方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T15:04:05.780

您想为 Eclipse 使用[Unnecessary Code Detector](http://www.ucdetector.org/)插件。它可以找到所有具有比所需更广泛可见性的类、方法和字段，并且您可以使用提供的快速修复来半自动地更改它。

但是，这样做时请小心，因为插件只能分析*您的代码*，但它对隐式模式、对当前不可用源的依赖、代码中未使用的 API 方法、反射等一无所知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:36:42.683

也许，我不太确定，但它不会特定于`Eclipse`IDE（例如扩展、插件等）。

你可以看看一些扩展[`Apache Ant`](http://ant.apache.org/)

> Apache Ant 是一种用于自动化软件构建过程的软件工具。它与 Make 类似，但使用 Java 语言实现，需要 Java 平台，最适合构建 Java 项目。

例如[Java 的 Extensible application-specific 访问修饰符](http://kohsuke.org/access-modifier/dependency-info.html)，这需要您进行研究。在方法和/或类之间和之间有诸如[`PMD`](http://pmd.sourceforge.net/pmd-5.0.2/ant-task.html)和之类[`Emma Code Coverage Reports`](http://emma.sourceforge.net)的非常深入的代码分析（然后您可以使用提供的信息来清理您的代码）。`concrete``dependences`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T12:38:05.120

我认为 Eclipse 是不可能的（如果是的话，它会有一些极端情况，例如，你如何区分未使用但有效的公共方法和应该转换为私有的公共方法？）。

如果您对一些方法感兴趣，您可以在 Eclipse 中使用[find 方法引用](https://stackoverflow.com/questions/5268998/find-methods-calls-in-eclipse-project)，如果没有找到引用，请更正范围。

如果您对修复大型源库感兴趣，我选择的此类工具是[Recoder](http://sourceforge.net/apps/mediawiki/recoder/index.php?title=Main_Page)，但您必须自己编写分析。

# c# - 正则表达式获得以下模式

> ID：15586790
> 
> 赞同：0
> 
> 时间：2013-03-23T12:31:56.093
> 
> 标签：c#, regex

嗨，我有以下代码行

```
{
.....(here i can have anything, numbers, string special characters
...."hello"
} 
```

我需要知道为我找到上述模式的正则表达式模式，其中字符串从 { 开始，然后是一些文本，然后是像“hello”这样的关键字，然后是 }。

请帮忙

所以我有

```
function test(a,b,c){
}

function test2(c,a,d){
if(a > 0){
    alert('test');
} 
```

我得到了这个表达`function\s+(\S+)\s*\((.|\n)*?\)\s*{`

这给了我`function test(a,b,c)`和

```
function test2(c,a,d) 
```

我想要一个正则表达式，当它在该函数中找到像“test”这样的关键字时，它会给我函数。

说得通？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:46:11.073

我不知道 c# 但正则表达式喜欢（带有`.`匹配的换行符）：

```
.*\bfunction\b.+?\bhello\b.+?\} 
```

应该做的工作。

**解释：**

```
The regular expression:
(?s-imx:.*\bfunction\b.+?\bhello\b.+?\})
matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?s-imx:                 group, but do not capture (with . matching
                         \n) (case-sensitive) (with ^ and $ matching
                         normally) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  .*                       any character (0 or more times (matching
                           the most amount possible))
----------------------------------------------------------------------
  \b                       the boundary between a word char (\w) and
                           something that is not a word char
----------------------------------------------------------------------
  function                 'function'
----------------------------------------------------------------------
  \b                       the boundary between a word char (\w) and
                           something that is not a word char
----------------------------------------------------------------------
  .+?                      any character (1 or more times (matching
                           the least amount possible))
----------------------------------------------------------------------
  \b                       the boundary between a word char (\w) and
                           something that is not a word char
----------------------------------------------------------------------
  hello                    'hello'
----------------------------------------------------------------------
  \b                       the boundary between a word char (\w) and
                           something that is not a word char
----------------------------------------------------------------------
  .+?                      any character (1 or more times (matching
                           the least amount possible))
----------------------------------------------------------------------
  \}                       '}'
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:02:05.890

这个怎么样：

```
MatchCollection matches = Regex.Matches(YourText, @"\{[^}]*""hello"".\}", RegexOptions.Multiline);
foreach (Match match in matches)
{
    foreach (Capture capture in match.Captures)
    {
    Console.WriteLine(capture.Value);
} 
```

# emacs - 当 initial-buffer-choice 具有自动保存数据时，如何防止 emacs 挂起？

> ID：15586792
> 
> 赞同：5
> 
> 时间：2013-03-23T12:32:11.647
> 
> 标签：emacs, advising-functions

我在守护程序模式下使用 emacs，并且我还`initial-buffer-choice` 设置了一个变量。有时，当我编辑用于`initial-buffer-choice`. 在这种情况下，当我使用 --daemon 启动 emacs 时，它会挂起以下消息：

```
"todo.org has auto save data; consider M-x recover-this-file" 
```

由于我主要从初始化脚本启动守护程序，我无法确认或拒绝此对话框，因此守护程序永远挂起。在这种情况下如何绕过自动保存数据的通知？如有必要，我不介意丢失自动保存数据。

这是我的尝试：

```
(defadvice command-line
  (around my-command-line-advice)
  "Be non-interactive while starting a daemon."
  (if (and (daemonp)
           (not server-process))
      (let ((noninteractive t))
        ad-do-it)
    ad-do-it))
 (ad-activate 'command-line) 
```

但是，这不起作用。我仍然得到相同的悬挂行为。事实上，在通知中放置一个“消息”调用表明该通知根本没有被调用。

类似的问题：[emacs-daemon startup freezes if file has auto-save data](https://stackoverflow.com/questions/4933134/)。但是，此解决方案不适用于`initial-buffer-choice`. 接受的答案似乎是从以前的版本编辑的，该版本可能已经成功地定义了`command-line`我试图做的建议，但不幸的是，这个版本现在已经消失，取而代之的是特定于 desktop.el 的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:03:56.930

一种可能性是将其放入您的 .emacs 中：

```
(setq auto-save-default nil) 
```

另一个（可能更好的解决方案）是通过使用它来查找文件来抑制警告消息：

```
(find-file-noselect FILENAME &optional NOWARN RAWFILE WILDCARDS) 
```

正如您在此处看到的，您可以使用可选的 NOWARN 参数抑制警告消息（因为这是导致问题的原因）。

来源：[这个 EmacsWiki 页面](http://emacswiki.org/emacs/AutoSave#toc6)

如果我要自己解决这个问题，您可以进行以下更改。在 .emacs 设置中定义：

```
(defun find-file (filename &optional wildcards)
  (interactive
   (find-file-read-args "Find file: "
                        (confirm-nonexistent-file-or-buffer)))

  ; the "t" here is normally set to "nil", this should solve the problem
  (let ((value (find-file-noselect filename t nil wildcards)))  
    (if (listp value)
    (mapcar 'switch-to-buffer (nreverse value))
      (switch-to-buffer value)))) 
```

编辑：到目前为止，这对任何人都没有帮助，但为了完整起见，它可能会有所帮助。

提问者确认的当前方式是使用and 与and`emacs-startup-hook`结合。`(kill-buffer "*scratch*")``(find-file "~/.../todo.org")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T22:47:02.660

根据原始发布者在问题中报告的行为描述，似乎当 Emacs 被激活时`--daemon`，`initial-buffer-choice`（即，到`find-file-noselect "~/.../todo.org"`[see ]）在默认值*之前*`... lisp/startup.el`的启动顺序中被激活可以使用 禁用自动保存设置。如果更改顺序没有效果[即，在初始化文件*中将优先级*放在更高的位置，使其在] 之前，那么下一步是采取肯定的措施以确保在打开文件之前禁用自动保存（例如, )。这可以通过在或中放置和来实现*`(setq auto-save-default nil)``(setq auto-save-default nil)`*`initial-buffer-choice``todo.org``(setq initial-buffer-choice t)``(setq auto-save-default nil)``init.el``.emacs`文件（不带钩子）——然后，为了确保所有其他设置都已首先加载，使用`emacs-startup-hook`to`(kill-buffer "*scratch*")`和`(find-file "~/.../todo.org")`——这确保在调用*之前* `find-file`禁用自动保存（使用`find-file-noselect`[see `... lisp/files.el`]）。**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T07:03:01.533

由于“ *...具有自动保存数据；考虑 Mx recover-this-file* ”只是一条消息，我不确定问题是否真的与自动保存文件有关。但是，如果是这种情况，您可以`directory-files`在您的服务器初始化文件中构建一个测试 emacs 的自动保存目录是否为空 ( )。如果自动保存目录不为空，请将所有文件移动到另一个位置并继续（`rename-file`）。

我真的很好奇这是否能解决问题。

**真正的问题是：如何在 emacs 中调试服务器问题。Debug 和 edebug 在服务器模式下非常无意义。最好将所有内容都跟踪到文件（例如日志记录）。****

# java - 将文本附加到文本文件中的现有行

> ID：15586795
> 
> 赞同：0
> 
> 时间：2013-03-23T12:32:33.393
> 
> 标签：java, file-io

我严重陷入了这项任务，试图弄清楚如何在现有行的最后一个字符之后附加文本。

基本上我希望能够定义 a`lineNumber`并且`text`我想附加。我尝试过不同类型的编写器和输出流，但似乎没有一个支持这一点？

我真的需要临时重新创建文件并用附加的文本重新重写它，这看起来很麻烦吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T21:26:44.290

您应该可以使用`java.io.RandomAccessFile`- 它会将您的文件视为一个大字节数组。这使您可以以随机访问方式写入文件。但是，不幸的是没有删除和插入。这表示：

*   没有简单的方法可以将自己定位在给定的线上。
*   当您将文本附加到一行时，您将覆盖下一行的开头。

您没有说明您的动机，但是关于 SO 的其他答案表明有类似问题的人确实需要一个数据库。

或者，也许您可​​以将文本文件读入一个数据结构，以便于您需要执行的操作，并在完成后将文件写回磁盘。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T12:52:01.467

请使用java.io 包中的[LineNumberReader](http://docs.oracle.com/javase/6/docs/api/java/io/LineNumberReader.html)类它将帮助您的课程。它具有跟踪从文本文件中读取的行号的方法，您可以轻松地将其组合在文本的末尾。试试这个示例代码：

```
 LineNumberReader reader = new LineNumberReader(new FileReader("e:/abc.txt"));
    String line = null;
    while ((line = reader.readLine()) != null) {
        int lineNumber = reader.getLineNumber();
        System.out.println(lineNumber + " - " + line);
    } 
```

# c# - 如何运行字符串方法？

> ID：15586798
> 
> 赞同：1
> 
> 时间：2013-03-23T12:32:49.593
> 
> 标签：c#, string, methods

这就是我想要的：

```
static void A(string s)
{
    //Code Here...
}
static void B(string s)
{
    //Code Here...
}
static void C(string s)
{
    //Code Here...
}
static void Main(string[] args)
{
      string temp = Console.ReadLine();
      string[] s = temp.Split(' ');
      if (s[0] == "A")
          A(s[1]);
      if (s[0] == "B")
          B(s[1]);
      if (s[0] == "C")
          C(s[1]);
} 
```

但是当我有很多方法时，它并不能很好地工作......

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:07:28.503

有时您可以使用`Dictionary`of`Actions`将字符串映射到方法：

```
using System;
using System.Collections.Generic;

namespace Demo
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            _actions = new Dictionary<string, Action<string>>();

            _actions["A"] = A;
            _actions["B"] = B;
            _actions["C"] = C;

            string[] s = Console.ReadLine().Split(' ');

            if (!processArg(s[0], s[1]))
            {
                // Argument wasn't in the list. Do error handling.
            }
        }

        static bool processArg(string name, string value)
        {
            Action<string> action;

            if (_actions.TryGetValue(name, out action))
            {
                action(value);
                return true;
            }

            return false;
        }

        static void A(string s)
        {
            Console.WriteLine("A: " + s);
        }

        static void B(string s)
        {
            Console.WriteLine("B: " + s);
        }

        static void C(string s)
        {
            Console.WriteLine("C: " + s);
        }

        private static Dictionary<string, Action<string>> _actions;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T13:08:58.340

你可以写这样的东西。

```
private static void Main(string[] args)
    {
        InitializeFunctions();

        string temp = Console.ReadLine();
        string[] s = temp.Split(' ');

        _functions[s[0]].Invoke(s[1]);
    }

    private static void InitializeFunctions()
    {
        _functions.Add("A",A);
        _functions.Add("B",B);
        _functions.Add("C",C);
    }

    private static Dictionary<string, Func> _functions = new Dictionary<string, Func>();

    public delegate void Func(string process);

    static void A(string s)
    {
        //Code Here...
    }
    static void B(string s)
    {
        //Code Here...
    }
    static void C(string s)
    {
        //Code Here...
    } 
```

如果您将拥有具有相同签名的新方法，只需将其添加到 InitializeFunctions 方法中的 _functions 字典中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T12:52:41.190

此代码适用于所有方法，可能是您的输入不正确或您想要执行多个方法。

例如：

如果您正在从控制台读取以下行，那么

```
A Abcdefg 
```

拆分后 s[0] 将是“A”，s[1] 将是“Abcdefg”，

如果您正在从控制台读取以下行，那么

```
A abcdef B bhfhhhfh C chgghh 
```

分手后`s[0]= "A", s[1]="abcdef " s[2]= "B", s[3]="bhfhhhfh " s[4]= "C", s[5]="chgghh"`

在这种情况下，只有 A(String) 会调用，因为您只检查 s[0] 和 s[1]

如果要调用所有方法，请循环执行

```
for(int i=0;i<s.length;i=i+2){
  if (s[i] == "A")
          A(s[i+1]);
      if (s[i] == "B")
          B(s[i+1]);
      if (s[i] == "C")
          C(s[i+1]);
} 
```

**编辑** 如果你不想写 if 那么你可以使用 switch

switch (s[0]) { case "A": A(s(1)); 休息; 案例“B”：B（s（1））；休息; 案例“C”：C（s（1））；休息; . . . . . .

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T12:40:31.590

你想要使用的是这样的东西。

```
typedef void (*FuncType)();

std::map<char, FuncType> Fonctions;

Fonctions['A'] = &FonctionA;
...
Fonctions['Z'] = &FonctionZ;

Fonctions[s[0]](s[1]); 
```

您还必须检查是否`Function[s[0]]`已定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T12:42:21.433

如果没有更多关于您尝试做什么的详细信息，一个基本的替代方法可能是使用一种方法并使用 switch 语句。

```
static void PerformAction(string method, string cInput)
{
    switch(method)
    {
       case "A":                   
              //code
              //something with cInput
              break;
       case "B":
              //code
              break;
       //..
       default:
              //default action code                  
    }    

} 
```

并这样称呼它

```
string temp = Console.ReadLine();
string[] s = temp.Split(' ');
PerformAction(s[0],s[1]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-23T12:45:00.413

有两种方法可以处理这个特定问题：

1.  使用 switch 语句
2.  使用反射

**切换语句**

在这种情况下，您将像这样组织代码：

```
switch (s[0])
{
    case "A":
        A(s(1));
        break;

    case "B":
        B(s(1));
        break;

    // and so on
} 
```

** 使用反射 **

如果要按名称调用方法，从字符串中获取名称，则必须使用反射：

```
MethodInfo method = typeof(Program).GetMethod(s(0)); // guessing "Program" here
if (method != null)
    method.Invoke(null, new object[] { s(1) }); 
```

但是，我**不会**使用来自用户的输入来执行此操作，这就像 SQL 注入攻击，只会更糟。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-23T12:52:34.173

尝试这个：

```
 static void A(string s)
    {
        //Code Here...
    }
    static void B(string s)
    {
        //Code Here...
    }
    static void C(string s)
    {
        //Code Here...
    }
    public struct ActionStruct {
      public string String;
      public Action<string> Action;
      public ActionStruct(string s, Action<string> a) : this() {
        String = s; Action = a;
      }
    }
    void Main(string[] args) {
      var actions = new List<ActionStruct>() {
        new ActionStruct("A", s => A(s)),
        new ActionStruct("B", s => B(s)),
        new ActionStruct("C", s => C(s))
      };
      var action = actions.Where(a=>a.String == args[0]).FirstOrDefault();
      if (action.String!= "") action.Action(args[1]);
    } 
```

# javascript - jquery没有从中获取值

> ID：15586804
> 
> 赞同：0
> 
> 时间：2013-03-23T12:33:36.790
> 
> 标签：javascript, jquery

我有一个 jQuery 函数，它将从列表中添加和删除产品。

```
$("#basketItemsWrap li img").live("click", function (event) {
    $("#notificationsLoader").html('<img src="http://images/loader.gif">');

    var oid = $("#thelist li").attr('id').split('_')[1];

    $.ajax({
        type: "POST",
        url: "http://index.php/action/delete",
        data: {
            officeID: oid,
            action: "delete"
        },
        success: function (theResponse) {

            $("#officeID_" + oid).hide("slow", function () {
                $(this).remove();
            });
            $("#notificationsLoader").empty();
        }
    });
}); 
```

我的 HTML 代码

```
<div id="basketItemsWrap">
<ul id="thelist">
<li></li>
<?php echo getBasket(); ?>
</ul>
</div> 
```

html输出是

```
<li id="officeID_15669">Office 1</li>
<li id="officeID_14903">Office</l 2i> 
```

我想从`<li>`拆分中获取 id 并获取数字，以便可以将值传递给数据库。

```
 var oid = $("#thelist li").attr('id').split('_')[1]; 
```

当我单击时，`oid`始终未定义。我的代码有什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:39:02.583

`$("#thelist li")`选择#thelist 中的所有列表元素，第一个是`<li></li>`. `attr('id')`应用于第一个，因此未定义。

在点击处理程序中使用它：

```
var oid = $(this).parent("li").attr('id').split('_')[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T12:55:17.643

我希望这对你有帮助：

```
$("#basketItemsWrap li img").on("click", function(event) { 

$("#notificationsLoader").html('<img src="http://images/loader.gif">');

     var attrid =  $(this).parent().attr('id'); 
    var oid = attrid.split('_')[1]);

    $.ajax({  
    type: "POST",  
    url: "http://index.php/action/delete",   
    data: {officeID: oid, action: "delete"},  
    success: function(theResponse) {

        $("#officeID_" + oid).hide("slow",  function() {$(this).remove();});
        $("#notificationsLoader").empty();

    }  
    });  

}); 
```

我为你创建了一个活生生的例子（但没有 ajax 功能）：http:
[//jsbin.com/ozepoh/2/](http://jsbin.com/ozepoh/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T12:57:01.647

当你使用`var oid = $("#thelist li").attr('id').split('_')[1];`它时，总是得到列表中`id`的第一个而不是被点击的。`li``id``li`

您可以`li`使用`$(this).parent()`.

```
$("#basketItemsWrap").live("click", 'li img', function (event) {
    $("#notificationsLoader").html('<img src="http://images/loader.gif">');

    var oid = $(this).parent().attr('id').split('_')[1];

    $.ajax({
        type: "POST",
        url: "http://index.php/action/delete",
        data: {
            officeID: oid,
            action: "delete"
        },
        success: function (theResponse) {

            $("#officeID_" + oid).hide("slow", function () {
                $(this).remove();
            });
            $("#notificationsLoader").empty();
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T12:52:09.047

它未定义，因为 li 以粗体显示

```
<div id="basketItemsWrap">
<ul id="thelist">
**<li></li>**
<?php echo getBasket(); ?>
</ul>
</div> 
```

可见它没有 id 属性所以 $("#thelist li") 选择这个然后 $("#thelist li").attr('id') 导致未定义

# ios - ios中输出纹理yuv422中的错误

> ID：15586806
> 
> 赞同：0
> 
> 时间：2013-03-23T12:33:48.253
> 
> 标签：ios, opengl-es-2.0, yuv

这是 ipad 的屏幕截图 [http://joxi.ru/7J9NUdg5CbCJWOM8-i0](http://joxi.ru/7J9NUdg5CbCJWOM8-i0) sein [http://joxi.ru/SspPUdg5CbBrLdFutis](http://joxi.ru/SspPUdg5CbBrLdFutis)

错误：

1) 图片 ( [http://joxi.ru/CYRRUdg5CbDiKIByZLo](http://joxi.ru/CYRRUdg5CbDiKIByZLo) )

2）大小，不是全屏

我的着色器：

```
NSString *const yuvFragmentShaderString = SHADER_STRING
(
 varying highp vec2 texCoordVarying;
 uniform sampler2D s_texture_y;
 uniform sampler2D s_texture_u;
 uniform sampler2D s_texture_v;

void main()
{
 highp float y = texture2D(s_texture_y, texCoordVarying).r;
 highp float u = texture2D(s_texture_u, texCoordVarying).r - 0.5;
 highp float v = texture2D(s_texture_v, texCoordVarying).r - 0.5;

 highp float r = y +             1.402 * v;
 highp float g = y - 0.344 * u - 0.714 * v;
 highp float b = y + 1.772 * u;

 gl_FragColor = vec4(r,g,b,1.0);
}
); 
```

我无法理解着色器或其他地方的问题是什么？我可以添加代码

更新

创建纹理

```
const NSUInteger widths[3]  = { width, width / 2, width / 2 };
const NSUInteger heights[3] = { height, height, height};
for (int i = 0; i < 3; ++i) {

    glBindTexture(GL_TEXTURE_2D, texture[i]);

    glTexImage2D(GL_TEXTURE_2D,
                 0,
                 GL_LUMINANCE,
                 widths[i],
                 heights[i],
                 0,
                 GL_LUMINANCE,
                 GL_UNSIGNED_BYTE,
                 //pixels[i]);
                 bytes->data[i]);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
} 
```

活性纹理

```
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, texture[0]);
glUniform1i(uniforms[UNIFORM_TEXTURE], 0);

glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, texture[1]);
glUniform1i(uniforms[UNIFORM_TEXTURE1], 1);

glActiveTexture(GL_TEXTURE2);
glBindTexture(GL_TEXTURE_2D, texture[2]);
glUniform1i(uniforms[UNIFORM_TEXTURE2], 2); 
```

绘制纹理

```
GLfloat mvpMatrix[16];
[self prepareRender];
[EDMatrixTools applyIdentity:mvpMatrix];
glUniformMatrix4fv(uniforms[UNIFORM_MVP_MATRIX], 1, GL_FALSE, mvpMatrix);

glVertexAttribPointer(ATTRIB_VERTEX, 2, GL_FLOAT, 0, 0, squareVertices);
glEnableVertexAttribArray(ATTRIB_VERTEX);
glVertexAttribPointer(ATTRIB_TEXTURE_COORD, 2, GL_FLOAT, 0, 0, squareTexCoords);
glEnableVertexAttribArray(ATTRIB_TEXTURE_COORD);

[self drawArraysFirst:0 Count:4];
[self presentFramebuffer]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:45:44.557

2）大小，不是全屏

```
CGRect screenRect = [[UIScreen mainScreen] bounds];
CAEAGLLayer eaglLayer = (CAEAGLLayer) self.layer;
[eaglLayer setBounds:screenRect]; 
```

# javascript - Javascript 通过单击同一图像来播放和暂停歌曲

> ID：15586810
> 
> 赞同：0
> 
> 时间：2013-03-23T12:33:57.927
> 
> 标签：javascript, html, css, dom

嗨，当我单击时我试图播放一首歌，当我再次单击它时暂停，但它似乎只是在播放，这是下面的代码：

Javascript

```
 function StartOrStop(audioFile)
  {
    var audie = document.getElementById("myAudio");
    if(!audie.src) 
       audie.src = audioFile;
    if(audie.paused == false)
     {
        audie.pause();
     }
     else
     {
       audie.play();
     }
  } 
```

HTML5

```
<img src="images/play.png" alt="Play Button width="57" height="50" onclick="StartOrStop('RWY.mp3')" > 
```

关于如何修复它的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:37:39.577

当您单击 时`image`，它会调用该`StartOrStop`函数，这将导致`src`再次设置视频，从而导致您`paused`无法`true`暂停视频而只能再次播放。

这个版本应该可以工作：

### HTML：

```
<img src="images/play.png" alt="Play Button" width="57" height="50" onclick="StartOrStop('RWY.mp3')">

<audio id="myAudio"></audio> 
```

### Javascript：

```
function StartOrStop(audioFile) {
    var audie = document.getElementById("myAudio");
    if (!audie.src || audie.src !== audioFile) audie.src = audioFile; // check if there's a src already and if the current src is not the same with the new one, change it. Or don't do anything.
    if (audie.paused == false)
        audie.pause();
    else
        audie.play();
} 
```

小提琴：http: [//jsfiddle.net/QCGYP/4/](http://jsfiddle.net/QCGYP/4/)

# schema - Datomic - db/isComponent 相当于强制执行外键依赖？

> ID：15586814
> 
> 赞同：7
> 
> 时间：2013-03-23T12:34:18.897
> 
> 标签：schema, foreign-key-relationship, datomic, enforcement

在[Datomic Sc​​hema doco](http://docs.datomic.com/schema.html)中，他们提到了一个名为`db/isComponent`. 这似乎是指由 定义的关系`:db.type/ref`。

西雅图`db/isComponent`示例中未使用 。公平地说，`:db.type/ref`Datomic 中的关系不是“强制”的（使用关系数据库外键依赖概念）-除非您将它们设置为`db/isComponent`?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-16T20:05:49.633

## 遏制关系 ( `:db.type/ref`+ `:db/isComponent`)

`:db/isComponent`用于指定**包含**关系，即来自 UML 的组合关系。您可以将其视为“ *A**有**B* ”的关系。一个简单博客的建模部分就是一个明显的例子：

![文章评论](../Images/5f05cbcb46ec93030bc29bd6546092b4.png)

在 Datomic 中，如果您将`:db/isComponent`属性用作上述文章-评论关系的一部分，撤消文章也会撤消其所有评论。有关完整的代码示例，请查看[Datomic：包含关系，即 db/isComponent](https://gist.github.com/a2ndrade/5655005)要点。

**请注意**，Datomic 中没有任何内容可以阻止您将错误类型的实体添加到`:db.type/ref`属性中。在上面的示例中，Datomic 允许您添加对“作者”实体的引用（而不是评论），而无需真正关心。这就是外键约束发挥作用的地方。

## 外键约束（`:db.type/ref`+数据库函数）

Datomic 使用`:db.type/ref`属性定义关系，但并没有真正强制执行任何关于它们的事情。要使用任意外键约束，您需要使用[数据库函数](http://docs.datomic.com/database-functions.html)。

在您提到的西雅图数据库中，`:community/orgtype`属性应该只引用一些允许的枚举值（`:community.orgtype/*`），但实际上在运行时没有强制执行：

![在此处输入图像描述](../Images/bae8acb0d4dc693910ca419777ba30af.png)

为了展示如何在 Datomic 中实现任意外键约束，我编写了一个数据库函数（称为`add-fk`），以防止错误的枚举值与`:community/orgtype`属性相关联。

有关完整的代码示例，请查看[Datomic：数据库函数和外键约束](https://gist.github.com/a2ndrade/5654999)要点。例如，`add-fk`数据库函数行为如下所示：

```
 ;; will succeed
 [[:db/add #db/id [:db.part/user] :community/name "15th Ave Community"]
  [:add-fk #db/id [:db.part/user] :community/orgtype :community.orgtype/personal]])

 ;; will fail
 [[:db/add #db/id [:db.part/user] :community/name "15th Ave Community"]
  [:add-fk #db/id [:db.part/user] :community/orgtype :community.type/email-list]])
 ;; java.lang.Exception: :community.type/email-list is not one of 
 ;; [[:community.orgtype/community], [:community.orgtype/commercial], 
 ;; [:community.orgtype/personal], [:community.orgtype/nonprofit]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T15:51:52.227

不，在 Datomic 中， db/isComposite 指的是 OOP/UML 意义上的[组合](http://en.wikipedia.org/wiki/Object_composition)（与[聚合](http://en.wikipedia.org/wiki/Object_composition#Aggregation)相反）。

将 db/isComposite 设置为 true，当您收回实体时，所有子组件也会被收回。当您触摸一个实体时，它的所有子组件实体都会被递归地触摸。

考虑来自电子商务世界的 2 个不同的关系示例：

1）**客户----用户偏好**

通常这是组合。首选项实体生命周期取决于客户实体生命周期。在 Datomic 中，Customer 上的 userPreferences ref 应该将 db/isComposite 属性设置为 true。

2)**客户----OrderItem**

通常这是聚合。即使删除了 Customer，OrderItem 也可以存在。这是 Datomic 中的默认引用类型。

关系模型将这两个依赖项都实现为外键，因此就表示而言，答案是：是的，db/isComponent 可以在 RDBMS 中表示为具有 CASCADE 操作的引用约束（FOREIGN KEY），但从概念上讲，它并不等效。

# jquery - jquery 1.3.2 中的 index() 替代方案

> ID：15586815
> 
> 赞同：2
> 
> 时间：2013-03-23T12:34:21.747
> 
> 标签：jquery, html

我有一个非常简单的表结构

```
<table width='50%' align='center' id='tabs'>
  <tr>
    <td>1.00</td>
    <td>5.23</td>
    <td>6.12</td>
  </tr>
  <tr>
    <td>2</td>
    <td>2.45</td>
    <td>2.45</td>
  </tr>
  <tr>
    <td>3.12</td>
    <td>2.98</td>
    <td>2.09</td>
  </tr>
</table> 
```

在 jquery 1.3.2 中不起作用的 index() 函数的问题你能告诉我 jquery 1.3.2 中 index() 的任何替代方法吗，这是`if($(this).parent('td').index() % 2 === 0){`我遇到问题的代码，它总是返回 -1

```
$("table td").click( function(e){   
    if($(this).find('input').length){
         return ;   
    }        
    var input = $("<input type='text' size='5' />").val( $(this).text() );
    $(this).empty().append(input);
    $(this).find('input')
    .focus(function(e){
        if($(this).val()=='0.00' || $(this).val()=='0'){$(this).val('');}
    }).keydown(function(event){
        if($(this).parent('td').index() % 2 === 0){
         if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 190  || event.keyCode == 13 || 
              // Allow: Ctrl+A
             (event.keyCode == 65 && event.ctrlKey === true) || 
             // Allow: home, end, left, right
             (event.keyCode >= 35 && event.keyCode <= 39)) {
             // let it happen, don't do anything
             return;
        }
        else {
            // Ensure that it is a number and stop the keypress
            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
                event.preventDefault(); 
            }   } }
    }).blur( function( e ){
                if($(this).val()!=""){
                    if (!isNaN(parseFloat($(this).val()))) {
                        var val1=parseFloat($(this).val()).toFixed(2);
                        $(this).val(val1);
                        $(this).parent('td').text( 
                              $(this).val()
                        );
                      }
                    }
                    else{
                            $(this).parent('td').text("0.00");
                    }
            });    
});

 $(function() {
        $('table tr td').hover(function() {
            $(this).css('background-color', '#FFFFB0');
        },
        function() {
            $(this).css('background-color', '#F4F4F4');
        });
    }); 
```

[**请在此处查看 JS FIDDLE**](http://jsfiddle.net/v7znh/21/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T13:17:29.317

jQuery 1.3.2 支持[prevAll()](http://api.jquery.com/prevAll/)，因此您使用的[index()](http://api.jquery.com/index/)的形式可以模拟为：

```
if ($(this).parent("td").prevAll().length % 2 === 0) {
    // ...
} 
```

（正如其他人所说，如果可能，请考虑升级。版本 1.3.2 现在已有四年多了。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T13:20:45.330

如果您必须坚持使用 v1.3.2，那么您很幸运，`:even`选择器可以完成这项工作，并且可以从 v1.0 获得。

您还可以使代码更具可读性，如下所示：

```
...keydown(function(event) {
        var okKeys = [8,9,13,27,35,36,37,38,39,46,190],
            k = event.keyCode;
        if($(this).closest('td').is(":even")) {
            if ( $.inArray(k, okKeys) > -1 || (event.ctrlKey && k == 65) ) {
                return;// let it happen, don't do anything
            }
            else {
                // Ensure that it is a number and stop the keypress
                if (event.shiftKey || (k < 48 || k > 57) && (k < 96 || k > 105 )) {
                    event.preventDefault(); 
                }
            }
        }
    })... 
```

$.inArray 从 v1.2 开始可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T13:10:47.407

**我认为它对你有帮助**

```
$("table tr").find('td').each(function(index){
      // click td 
      $(this).click(function(){
        alert("index : " + index);
      });

}); 
```

# php - 添加 SKU 列 Magento 管理员销售 > 订单

> ID：15586816
> 
> 赞同：1
> 
> 时间：2013-03-23T12:34:31.717
> 
> 标签：php, magento

我已经设法获得了我想要显示的字段，但我无法提取数据，例如 SKU 数据应该来自目录 > 管理产品。

使用的 Magento 版本是 1.5.1.0

![在此处输入图像描述](../Images/0a11d2f46335e481e53b66d3c4e54cce.png) ![在此处输入图像描述](../Images/832b6d1a84ea5efc11ef89162bdf31c4.png)

基本上我需要从同一类中的'customer/customer_collection'和'sales/order_grid_collection'中提取数据，这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T16:55:46.617

要获取订单中的所有 Sku，您可以使用`frame_callback`在单独的函数中查找订单的 Sku。

在`_prepareColumns()`Sku 列的函数中：

...

```
$this->addColumn('increment_id', array(
                 'header' => Mage::helper('sales')->__('SKU'),
                 'index' => 'increment_id',
                 'frame_callback' => array($this, 'callback_skus')
)); 
```

...

然后在你的`Grid.php`.

```
public function callback_skus($value, $row, $column, $isExport) {
    $increment_id = $value;
    $_order = Mage::getModel('sales/order')->loadByIncrementId($increment_id);
    $_items = $_order->getAllItems();
    $skus="";
    foreach ($_items as $item) {
            $skus .= $item->getSku()."<br/>";
    }
    return $skus;
} 
```

这将返回订单的所有 Sku，而无需进行大量复杂的连接。

* * *

**编辑 - 答案的第二部分**

要在上面启用搜索/过滤，您需要将其更新`_prepareCollection()`为以下内容：

```
protected function _prepareCollection()
{

    $collection = Mage::getResourceModel($this->_getCollectionClass())
    ->join(
           'sales/order_item',
           '`sales/order_item`.order_id=`main_table`.entity_id',
               array(
                     'skus'  => new Zend_Db_Expr('group_concat(`sales/order_item`.sku SEPARATOR ",")'),
               )
    );
    $collection->getSelect()->group('entity_id');
    $this->setCollection($collection);
    return parent::_prepareCollection();
} 
```

添加一个名为的新函数`filter_skus()`：

```
public function filter_skus($collection, $column) {
   if (!$value = $column->getFilter()->getValue()) {
        return $this;
    }

    $this->getCollection()->getSelect()->where(
        "sku like ?"
    , "%$value%");

    return $this;

} 
```

并像这样更新`addColumn`for `sku`：

...

```
$this->addColumn('sku', array(
                 'header' => Mage::helper('sales')->__('SKU'),
                 'index' => 'increment_id',
                 'frame_callback' => array($this, 'callback_skus'),
                 'filter_condition_callback' => array($this, 'filter_skus'),
)); 
```

...

请注意新的调用`filter_condition_callback`添加了`where`创建搜索功能所需的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-03T07:57:20.867

```
Step 1:  Create the Renderer directory under /app/code/core/Mage/Adminhtml/Block/Sales/Order

Step 2:
Create a Block File in /app/code/core/Mage/Adminhtml/Block/Sales/Order/Renderer/Red.php (You can use any name)
<?php

class
Mage_Adminhtml_Block_Sales_Order_Renderer_Red extends
Mage_Adminhtml_Block_Widget_Grid_Column_Renderer_Abstract

    {
      public function render(Varien_Object $row)

       {

         //$value = $row->getData($this->getColumn()->getIndex());

        $order_id=$row->getData('increment_id');

        $order = Mage::getModel('sales/order')->loadByIncrementID($order_id);

        $items = $order->getAllItems();

        // print_r($items);exit();

            foreach ($items as $itemId => $item)

                {

                if($item->getSku())

                    {

                    $sku[] = $item->getSku();

                    }

                }

                if(count($sku))

                    {

                    $skutext = implode(',',$sku);

                    }

            $conbinetext=$skutext;

            return $conbinetext;

        }

    }

?>
Step 3: Add the Below Code in
/app/code/core/Mage/Adminhtml/Block/Sales/Order/Grid.php

$this->addColumn('Shopby',

  array(

  'header'=>Mage::helper('catalog')->__('Sku'),

  'index' => 'shopby',

  'filter'=> false,

  'sortable'=>false,

  'renderer'=> 'Mage_Adminhtml_Block_Sales_Order_Renderer_Red',// THIS IS WHAT THIS POST IS ALL ABOUT

  )); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T13:47:57.877

我已经按照上面“seanbreeden”帖子 [https://stackoverflow.com/posts/15589455/revisions中提到的完成步骤](https://stackoverflow.com/posts/15589455/revisions)

但是对于 SKU 搜索功能，我在此功能中添加了一行

```
public function filter_skus($collection, $column) {
   if (!$value = $column->getFilter()->getValue()) {
        return $this;
    }
$this->getCollection()->getSelect()->join( array('table_alias'=>'sales_flat_order_item'), 'main_table.entity_id = table_alias.order_id',array('table_alias.sku'));
$this->getCollection()->getSelect()->where("sku like ?", "%$value%");

    return $this;
} 
```

添加此行搜索后对我来说工作正常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-12T09:36:32.627

注意：为了不覆盖 magento 核心功能，您可以创建自己的模块并在 Grid.php 中使用以下代码

打开 app\code\core\Mage\Adminhtml\Block\Sales\Order\Grid.php

替换下面的函数

```
protected function _prepareCollection()
{
    $collection = Mage::getResourceModel($this->_getCollectionClass());
    $collection->getSelect()->joinLeft(
            'sales_flat_order_item',
            '`sales_flat_order_item`.order_id=`main_table`.entity_id',
            array('skus'  => new Zend_Db_Expr('group_concat(`sales_flat_order_item`.sku SEPARATOR ",")'))
    );
    $collection->getSelect()->group('entity_id');

    $this->setCollection($collection);
    return parent::_prepareCollection();
} 
```

现在将以下代码放入 _prepareColumns() 函数中

```
$this->addColumn('sku', array(
    'header' => Mage::helper('sales')->__('SKU'),
    'index' => 'skus',
    'type' => 'text',
    'width' => '100px',
    'filter'    => false,
)); 
```

来源：[http ://chandreshrana.blogspot.in/2016/12/how-to-add-sku-column-in-sales-order.html](http://chandreshrana.blogspot.in/2016/12/how-to-add-sku-column-in-sales-order.html)

# android - 我想在发送图像时显示进度条

> ID：15586819
> 
> 赞同：1
> 
> 时间：2013-03-23T12:34:38.560
> 
> 标签：android, android-progressbar

我想通过套接字发送图像，并且必须显示进度条上的发送过程，并且在发送图像时它应该更新但是当我尝试此代码时，进度条没有显示并且图像正在发送. 我试过了，但是进度条直接显示100，这个过程还在继续，进度条显示100%

```
 int count;         
            try {
            //image send
            client = new Socket(ServerIP,4444);

            File file = new File(path);
            byte[] mybytearray = new byte[(int) file.length()];
            FileInputStream fis = new FileInputStream(file);
            BufferedInputStream bis = new BufferedInputStream(fis);
            //bis.read(mybytearray, 0, mybytearray.length);
            OutputStream os = client.getOutputStream();
            DataOutputStream dos = new DataOutputStream(os);     
            dos.writeUTF(file.getName()); 
            long total = 0;

            while ((count = bis.read(mybytearray)) != -1) {
                total += count;
                publishProgress(""+(int)((total*100)/file.length()));
                 os.write(mybytearray, 0, mybytearray.length);
                 //os.write(mybytearray, 0, mybytearray.length);

            }
           // os.write(mybytearray, 0, mybytearray.length);
           // os.write(mybytearray, 0, mybytearray.length);
            os.flush();
            bis.close();
            fis.close();
            client.close();

        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:38:54.260

好吧，请显示您的其余代码，尤其是`publishProgress`方法。但很可能您只是忘记了调用`setMax(...)`，当您收到前 100 个字节时，它已经是 100%。

# algorithm - 二叉树复杂度

> ID：15586820
> 
> 赞同：4
> 
> 时间：2013-03-23T12:34:49.577
> 
> 标签：algorithm, search

我想知道二叉搜索树的一些复杂性。

我找不到完整的信息。我想知道二叉搜索树上以下操作的复杂性

1.  添加/插入元素
2.  移除一个元素
3.  找到一个元素（我知道这个是`O(log(n))`）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T12:39:54.297

二叉搜索树中的插入、删除和搜索是：

*   `O(N)`在最坏的情况下；
*   `O(log(N))`在平均情况下。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-23T13:00:06.253

如果你有平衡二叉树，所有三个复杂度都将是`O(log(N))`. 如果你没有平衡树，它可能是`O(N)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T13:18:40.510

搜索是有效的。但是不平衡的结构（通常是这种情况）可能导致搜索/插入/删除操作的 O(N)。这就是为什么使用 O(log n) 时首选二叉堆或其他类型的平衡树的原因。.

# android - android标题栏中没有图标

> ID：15586821
> 
> 赞同：0
> 
> 时间：2013-03-23T12:35:08.240
> 
> 标签：android, xml, styles, icons

我尝试将启动器图像添加到我的 android 应用程序的自定义标题栏中，但在我运行应用程序时它没有出现。

这是我的自定义样式代码：

**customized_style.xml**

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
 <style name="CustomWindowTitleText" parent="android:TextAppearance.WindowTitle">
      <item name="android:textSize">20dip</item>
      <item name="android:textColor">#e7f4fb</item>
      <item name="android:textStyle">bold</item>
 </style>

 <style name="CustomWindowTitleBackground">
       <item name="android:background">#b5b1b4</item>
       <item name="android:icon">@drawable/ic_launcher</item>

 </style>

 <style name="CustomWindowTitle">
      <item name="android:textAppearance">@style/CustomWindowTitleText</item>
      <item name="android:shadowDx">2</item>
      <item name="android:shadowDy">2</item>
      <item name="android:shadowRadius">7</item>
      <item name="android:shadowColor">#e32020</item>

  </style> 

  <style name="CustomTheme" parent="android:Theme">
       <item name="android:windowTitleSize">40dip</item>
       <item name="android:windowTitleStyle">@style/CustomWindowTitle</item>
       <item name="android:windowTitleBackgroundStyle">@style/CustomWindowTitleBackground</item>
  </style> 
```

这是在 android 清单文件中定义的自定义应用程序。

**AndroidManifest.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.javapapers.android.sqlitestorageoption"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

        <application 
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/CustomTheme" >
            <activity
                android:name="com.javapapers.android.sqlitestorageoption.MainActivity"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
            <activity
                android:name="com.javapapers.android.sqlitestorageoption.NewAnimal"
                android:label="" >
            </activity>
            <activity
                android:name="com.javapapers.android.sqlitestorageoption.EditAnimal"
                android:label="" >
            </activity>
        </application> 
```

任何人都可以弄清楚我缺少什么，以便我可以更正错误并使用图标运行应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T10:34:43.250

答案有点晚了，但将此行添加到主题中

`<item name="android:actionBarStyle">@style/CustomWindowTitleBackground</item>`

这可能是您的代码无法正常工作的原因。在运行 HC 和 ICS 的新设备中，操作栏就在那里。

# jquery - .find() 和 .closest() 没有得到我的元素

> ID：15586822
> 
> 赞同：0
> 
> 时间：2013-03-23T12:35:17.713
> 
> 标签：jquery

我想填写一个`div`动态起诉的jQuery。现在问题如下：

使用并`.closest()`不能填充我`div#articleDetail`的`divs`类 `.date`和. 因为我相信爬上DOM 而**不是****下来**。`.views``.count``.closest()`

 ****只有`h4`标签中的名称被填充到底部`div`( `#articledetail`)

HTML：

```
<div id="make" class="span12">
    <article class="make"> <a href=""><img src="../img/175x175.jpg" alt="" /></a>

        <div class="content">
             <h4><a class="merc" href="#latestClick">Mercedes-Benz</a></h4>

            <div class="date">12 March 2013</div>
            <div class="count"><span></span> photos</div>
            <div class="views">Views: <span>32</span>
            </div>
        </div>
    </article>
    <article class="make latest"> <a href=""><img src="../img/175x175.jpg" alt="" /></a>

        <div class="content">
             <h4><a class="bmw" href="#latestClick">BMW</a></h4>

            <div class="date">12 March 2013</div>
            <div class="count"><span></span> photos</div>
            <div class="views">Views: <span>89</span>
            </div>
        </div>
    </article>
</div>
<div id="articleDetail"></div> 
```

JS：

```
$('#make article h4 a').click(function (e) {
    e.preventDefault();
    $('#latestInner, #make, #models').hide(200);
    $('#article').show(500);
    //fill articleDetail (name, date, views, count)
    $('#articleDetail').empty();
    $(this).closest('.date').clone().appendTo('#articleDetail'); //date
    $(this).closest('.count').clone().appendTo('#articleDetail'); //count
    $(this).closest('.views').clone().appendTo('#articleDetail'); //views
    $(this).parent().clone().appendTo('#articleDetail'); //name
..... 
```

有什么建议可以实现吗？

**注意：**我**不想**添加 ID，也不想更改 HTML 的结构。必须有一种方法可以调用并将适当的类附加到`#articledetail`.

```
.views .count and .date 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:41:04.410

你是对`.closest`的，上树，而不是下树。您要查找的元素都是链接祖父母的所有子元素。所以你会怎么做？您首先找到祖父母，然后搜索它的孩子：

```
var $content = $(this).closest('.content');
$content.find('.date').clone().appendTo('#articleDetail');
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T12:40:06.723

`closest`找到与给定选择器匹配的最接近的升序。但是，在您的标记`<div class="date">`中不是`a`元素的祖先，因此什么也找不到。但是应该起作用的是：

```
$(this).closest('.content').find('.date') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T12:40:12.753

爬上包装纸，在里面找到东西：

```
$(this).closest('.content').find('.date.') 
```****

# android - 在android中getchildView（...）的视图层次结构中获取唯一ID

> ID：15586826
> 
> 赞同：0
> 
> 时间：2013-03-23T12:35:28.513
> 
> 标签：android, expandablelistview, expandablelistadapter

如何获取/识别视图层次结构中的唯一 ID。下面是我的代码片段 fot getChildView(...)

```
 public View getChildView(int groupPosition, final int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
    final ExpandListChild child = (ExpandListChild) getChild(groupPosition, childPosition);

if (convertView == null) 
    {
LayoutInflater infalInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
convertView = infalInflater.inflate(R.layout.manage_insurance, null);
    }

    company = (EditText) convertView.findViewById(R.id.et_CompanyName);
    interest = (EditText) convertView.findViewById(R.id.et_Interest);
    duration = (EditText) convertView.findViewById(R.id.et_Duration);
    btnSave = (Button) convertView.findViewById(R.id.btnSave);
    btnDelete = (Button) convertView.findViewById(R.id.btnDelete);

    company.setTag(R.id.string_key1, childPosition);
    //interest.setTag(childPosition, childPosition);
    //duration.setTag(childPosition, childPosition);        
    btnSave.setTag(R.id.string_key2, childPosition);
    //btnDelete.setTag(childPosition, childPosition);

    company.setText(child.getCompanyName().toString());
    interest.setText(child.getInterest()+"");
    duration.setText(child.getDuration()+"");

    btnSave.setOnClickListener( new OnClickListener() {
        public void onClick(View v) {
            int viewtag = (Integer) v.getTag(R.id.string_key2);
            if (childPosition == viewtag){
                durationValue = (duration.getText().toString().equals("") ? 0.0f : Float.parseFloat(duration.getText().toString()));
                interestValue = (interest.getText().toString().equals("") ? 0.0f : Float.parseFloat(interest.getText().toString()));

                Log.v("durationValue", "durationValue ======" + durationValue +"========"+ interestValue);

                if (checkingForEmptyFields()){
                    int updatedRows = dbManager.updateInsurance(companyValue, durationValue, 15);
                    if (updatedRows > 0){
                        Toast.makeText(mContext, "Successfully updated", Toast.LENGTH_SHORT).show();    
                        mContext.startActivity(new Intent(mContext, InsurancePanelInflator.class));
                    }
                    else
                    {
                        Toast.makeText(mContext, "Problem occured while updating", Toast.LENGTH_SHORT).show();
                    }

                 }
                else
                {
                     Toast.makeText(mContext, "Fill Mandatory Fields First", Toast.LENGTH_SHORT).show();
                }   
            }

        }
    }); 
```

现在单击下图中的“保存”按钮，当我获取文本时，它始终会获取底行值，因为所有视图都具有相同的 ID。请帮我。

![在此处输入图像描述](../Images/691ab41bb291d07b8df5a4b3687125f1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:50:00.200

哦，您将`EditText`'s 保留在类变量中，切勿对`ListView`项目这样做。这样做会在每次`getView()`或被`getChildView()`调用时更改它们的引用，最终您将得到 dandling 引用。这样做，你很高兴：

```
final ExpandListChild child = (ExpandListChild) getChild(groupPosition, childPosition);

if (convertView == null) {
    LayoutInflater infalInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    convertView = infalInflater.inflate(R.layout.manage_insurance, null);
}

final EditText company = (EditText) convertView.findViewById(R.id.et_CompanyName);
final EditText interest = (EditText) convertView.findViewById(R.id.et_Interest);
final EditText duration = (EditText) convertView.findViewById(R.id.et_Duration);
final Button btnSave = (Button) convertView.findViewById(R.id.btnSave);
final Button btnDelete = (Button) convertView.findViewById(R.id.btnDelete);
// no need for tags
company.setText(child.getCompanyName().toString());
interest.setText(child.getInterest()+"");
duration.setText(child.getDuration()+"");

btnSave.setOnClickListener( new OnClickListener() {
    public void onClick(View v) {
        // no need to test position
            durationValue = (duration.getText().toString().equals("") ? 0.0f : Float.parseFloat(duration.getText().toString()));
            interestValue = (interest.getText().toString().equals("") ? 0.0f : Float.parseFloat(interest.getText().toString()));

            Log.v("durationValue", "durationValue ======" + durationValue +"========"+ interestValue);

            if (checkingForEmptyFields()){
                int updatedRows = dbManager.updateInsurance(companyValue, durationValue, 15);
                if (updatedRows > 0){
                    Toast.makeText(mContext, "Successfully updated", Toast.LENGTH_SHORT).show();    
                    mContext.startActivity(new Intent(mContext, InsurancePanelInflator.class));
                } else {
                    Toast.makeText(mContext, "Problem occured while updating", Toast.LENGTH_SHORT).show();
                } 
            } else {
                 Toast.makeText(mContext, "Fill Mandatory Fields First", Toast.LENGTH_SHORT).show();
            }
    }
}); 
```

# java - 为什么 Integer 到 int 到 Integer 比 int 到 Integer 快 10 倍？

> ID：15586829
> 
> 赞同：3
> 
> 时间：2013-03-23T12:36:01.347
> 
> 标签：java, boxing

我有两个相同大小的数组和两种方法。

```
public class Client {
    private static int[] ints;
    private static final int COUNT = 10000000;
    private static Integer[] integers;

    public static void main(String[] args) {
        Random rand = new Random();
        integers = new Integer[COUNT];
        for (int i = 0; i < integers.length; i++) {
            integers[i] = rand.nextInt();
        }

        ints = new int[COUNT];
        for (int i = 0; i < ints.length; i++) {
            ints[i] = rand.nextInt();
        }

        primitiveToObject();
        objectsToPrimitiveToObject();
    }

    public static  void primitiveToObject() {
        long start = new Date().getTime();
        List<Integer> objects = new ArrayList<>(ints.length);
        for (int i = 0; i < ints.length; i++) {
            int value = ints[i] + 1;
            objects.add(value);          //Boxing
        }
        System.out.println("prim -> object = " + (new Date().getTime() - start));
    }

    public static void objectsToPrimitiveToObject() {
        long start = new Date().getTime();
        List<Integer> result= new ArrayList<>(integers.length);
        for (int i = 0; i < integers.length; i++) {
            int value = integers[i] + 1; //Unboxing
            result.add(value);           //Boxing
        }
        System.out.println("obj -> prim -> object = " + (new Date().getTime() - start));
    }
} 
```

为什么`objectsToPrimitiveToObject()`装箱和拆箱比不拆箱快 10 倍`primitiveToObject()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T12:54:26.497

我认为这是您如何对代码进行基准测试的人工制品。

我使用 JVM 运行了以下基准`1.7.0_09`测试`-XX:+AggressiveOpts -XX:CompileThreshold=1`：

```
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

public class Main {
    static final int COUNT = 1000000;
    static int[] ints = new int[COUNT];
    static Integer[] integers = new Integer[COUNT];

    static void primitiveToObject() {
        List<Integer> objects = new ArrayList<Integer>(ints.length);
        for (int i = 0; i < ints.length; i++) {
            int value = ints[i] + 1;
            objects.add(value);                    //boxing
        }
    }

    static void objectsToPrimitiveToObject() {
        List<Integer> result= new ArrayList<Integer>(integers.length);
        for (int i = 0; i < integers.length; i++) {
            int value = integers[i] + 1;           //unboxing
            result.add(value);                     //boxing
        }
    }

    public static void main(String[] args) {
        Random rand = new Random();
        for (int i = 0; i < COUNT; ++i) {
            int val = rand.nextInt();
            ints[i] = val;
            integers[i] = val;
        }
        for (int i = 0; i < 10; ++i) {
            long start_p = System.currentTimeMillis();
            for (int j = 0; j < 100; ++j) {
                primitiveToObject();
            }
            long end_p = System.currentTimeMillis();
            long start_o = System.currentTimeMillis();
            for (int j = 0; j < 100; ++j) {
                objectsToPrimitiveToObject();
            }
            long end_o = System.currentTimeMillis();
            System.out.printf("p2o:%d o2p2o:%d\n", end_p - start_p, end_o - start_o);
        }
    }
} 
```

结果如下：

```
p2o:2043 o2p2o:818
p2o:709 o2p2o:748
p2o:670 o2p2o:756
p2o:675 o2p2o:742
p2o:679 o2p2o:750
p2o:700 o2p2o:757
p2o:738 o2p2o:733
p2o:706 o2p2o:786
p2o:684 o2p2o:752
p2o:676 o2p2o:799 
```

正如您所看到的，在最初的热身之后，`primitiveToObject()`速度会更快，正如人们所期望的那样，这是一种工作量较少的方法。

为了完整起见，我还使用 JDK 6 对此进行了测试，并观察到了类似的结果。

# vhdl - Vhdl 类型不匹配错误

> ID：15586830
> 
> 赞同：1
> 
> 时间：2013-03-23T12:36:02.253
> 
> 标签：vhdl

我遇到类型不匹配错误，但所有值都是相同类型的 std_logic。这是代码

Nx, Ny - 泛型

ipx - 输入端口向量

tempx, tempz - 信号

> ipx : 在 std_logic_vector(Nx-1 downto 0);
> .......
> 信号 tempx : std_logic_vector(Ny-1 downto 0) := ipx(Nx-1 downto Nx-Ny); (信号初始化)
> 信号 tempz : std_logic_vector(Ny-1 downto 0);
> ......
> tempx <= (Ny-1 downto 1 => tempz(Ny-2 downto 0), 0 => ipx(a-1));

错误：错误（10381）：ArrayDivider.vhd（53）处的VHDL类型不匹配错误：索引名称返回一个值，其类型与目标表达式的类型“std_ulogic”不匹配（tempx的最后一行代码错误）

但是 ipx 和 tempz 都是 std_logic 向量所以，这里的类型不匹配在哪里？？？？请给我一些解决方案

我也尝试过使用连接运算符 & 但它给了我另一个与顶级层次结构相关的错误，并且“无法解析 tempx [0] 的多个常量驱动程序”！！！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T13:17:11.300

错误消息告诉您确切的问题是什么：

`error : Error (10381): VHDL Type Mismatch error at ArrayDivider.vhd(53): indexed name returns a value whose type does not match "std_ulogic", the type of the target expression`

实际上，`tempz(Ny-2 downto 0)`不是 std_ulogic 而是向量。

问题是命名关联不能识别向量的切片，而是识别单个元素。您不能使用它将一个向量的一个切片分配给另一个向量的切片。

相反，使用连接运算符`&`,

```
tempx <= tempz(Ny-2 downto 0) & ipx(a-1); 
```

您的帖子暗示连接会产生其他错误；随时将这些添加到问题中。

编辑 ：

```
>Error (10028): Can't resolve multiple constant drivers for net 
>"tempx[0]" at ArrayDivider.vhd(44) (on the line of initialing >tempx) 
```

这再次告诉您出了什么问题。这个错误几乎肯定在两个版本的设计中都存在，但最初的错误只是隐藏了它。找到 tempx(0) 的两个驱动程序并消除错误的驱动程序。您还没有发布足够多的代码来说明发生了什么，所以这取决于您。如果您使用的是 Modelsim，“驱动程序”命令将识别信号上的所有驱动程序。

如果您需要将 tempx 初始化为输入信号，然后用另一个信号驱动它，则必须在两个信号之间进行选择 - 例如：

```
tempx <= ipx(Nx-1 downto Nx-Ny) when <some condition>
         else tempz(Ny-2 downto 0) & ipx(a-1); 
```

最有可能的是，修复此错误也将消除“层次结构”错误；这基本上是“早些时候出了点问题，因此无法完成编译”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T19:37:39.627

这是一个页面，它很好地解释了命名关联与位置关联的概念。请注意，该示例显示了使用 bit_vector 类型的两种关联方法的使用。

[http://www.ics.uci.edu/~jmoorkan/vhdlref/aggregat.html](http://www.ics.uci.edu/~jmoorkan/vhdlref/aggregat.html)

正如您所注意到的，当您对 std_logic 向量执行命名关联时，VHDL 返回一个 bit_vector。如果您尝试将结果分配给 std_logic_vector，这会导致类型不匹配。

一种选择是使用 TO_BITVECTOR 和 TO_STDLOGICVECTOR 在 bit_vector 和 std_logic_vector 之间进行转换。这些在 ieee.std_logic_1164 库中定义，语法在此处描述：

[http://www.seas.upenn.edu/~ese171/vhdl/PackageSTD_1164.html](http://www.seas.upenn.edu/~ese171/vhdl/PackageSTD_1164.html)

这样做感觉就像跳过不必要的障碍，但它应该有效。祝你好运！

# php - 将 HTML 添加到双引号内的字符串

> ID：15586833
> 
> 赞同：0
> 
> 时间：2013-03-23T12:36:23.900
> 
> 标签：php, regex

我已经设法得到这个正则表达式来匹配双引号内的任何内容：

```
"([^"]|\\")*" 
```

哪个匹配

“**就我而言，我一无所知，但看到星星让我梦想成真**。” - 文森特 - 梵高

我需要做的是，使用 PHP 将 HTML 应用于匹配，所以上面的字符串会变成......

```
<i class="quote">"For my part I know nothing with any certainty, but the sight of the stars makes me dream."</i> - Vincent Van Gogh 
```

我已经尝试过 preg_replace 但无法让它按我的需要工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:40:38.567

怎么样：

```
 $str = preg_replace('/("([^"]|\\")*")/', "<i class='quote'>$1</i>", $str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:45:21.853

干得好。

```
echo preg_replace('#"([^"]++)*"#', '<i class="quote">"\1"</i>', 'foo bar "fuz" "buz"') 
```

我认为您正在寻找的缺失部分是反向引用，\1。它代表模式中第一个括号中的任何内容。如果您有多个括号，\2、\3 等代表这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T12:49:59.650

看看 preg_match，用你的正则表达式返回一个匹配并放置它或使用连接。

[http://www.php.net/manual/en/function.preg-match.php](http://www.php.net/manual/en/function.preg-match.php)

您可以使用 preg_replace 但它似乎对您的意图更加复杂。

# java - 在 java 项目中为 ARM 使用 .so 文件

> ID：15586834
> 
> 赞同：0
> 
> 时间：2013-03-23T12:36:28.390
> 
> 标签：java, unix, arm, shared-libraries

我有一个`.so`文件，其中包含我想在我的 java 程序中使用的方法。我试图通过加载它`System.load("/usr/lib/file.so");`

但后来我得到这个错误：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: /usr/lib/file.so: /usr/lib/file.so: cannot open shared object file: No such file or directory (Possible cause: can't load ARM-bit .so on a IA 32-bit platform)
        at java.lang.ClassLoader$NativeLibrary.load(Native Method)
        at java.lang.ClassLoader.loadLibrary1(ClassLoader.java:1935)
        at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1860)
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1821)
        at java.lang.Runtime.load0(Runtime.java:792)
        at java.lang.System.load(System.java:1059)
        at t1.<clinit>(t1.java:7) 
```

我怎样才能让它工作或者我需要什么系统让它工作？

# jsf - 使用 PrettyFaces 的 JSF 资源（CSS、JS、图像）的漂亮 URL

> ID：15586837
> 
> 赞同：3
> 
> 时间：2013-03-23T12:36:44.070
> 
> 标签：jsf, url-rewriting, prettyfaces

我有一个在 Glassfish 3.1.2.2 上运行的 web 应用程序，它使用 JSF 2.1 (Mojarra) 和 PrettyFaces 3.3.3 来促进将“漂亮”REST 样式 URL 与我的应用程序集成的任务。

但是，查看生成的 html 代码，我发现我的应用程序资源的路径相当“丑陋”。像这样：

```
<script type="text/javascript" src="/HelloWorld/faces/javax.faces.resource/js/jquery-1.9.1.min.js"> 
```

特别是这`faces/javax.faces.resource/`部分伤害了我的眼睛。按照 PrettyFaces 的主要思想，我想删除这部分。

是否可以拦截这些 URL 的生成，PrettyFaces 可以帮助我吗？

我正在使用`<h:outputScript name="js/jquery-1.9.1.min.js" />`,`<h:outputStylesheet name="css/app.css" />`并`<h:graphicImage name="img/logo.png" />`在我的 JSF-Servlet 中包含资源引用。

**编辑：**我想我必须做两件事？

*   一：将请求映射`/img/*`到他们的实际位置`/faces/javax.faces.resource/img/*`。
*   二：挂钩到`<h:graphicImage />`元素（和其他）的 URL 生成。

如果你能给我一些关于从哪里开始的指示，我会很高兴。我对 JSF 很陌生。

非常感谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T09:50:05.067

不幸的是，使用 PrettyFaces 实现这样的要求非常困难。[这就是我们决定启动Rewrite](http://ocpsoft.org/rewrite/)的原因之一，它是 PrettyFaces 的继任者。

使用 Rewrite 很容易做这样的事情。您只需添加一个连接规则，将您希望看到的路径转换为您的应用程序当前使用的路径。

您的要求可以通过以下方式实现：

```
.addRule(Join.path("/js/{file}").to("/faces/javax.faces.resource/js/{file}")) 
```

容易，不是吗？如果您想了解有关 Rewrite 的更多信息，请查看[示例配置](http://ocpsoft.org/rewrite/examples/)。如果您有任何问题，请查看[论坛](http://ocpsoft.org/support/rewrite/)。

即将发布的 Rewrite 2.0.0.Final 带来了一些不错的改进。特别是 PrettyFaces 的向后兼容模块，如果您想用 Rewrite 替换 PrettyFaces，它允许您重用当前的 PrettyFaces 配置。

# asp.net-mvc - @Model 和 @ViewData.Model 有什么区别？

> ID：15586840
> 
> 赞同：10
> 
> 时间：2013-03-23T12:36:46.900
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

在我的视图页面中，两者似乎都有效。但是对于`@Model`，Visual Studio 告诉我它是`WebViewPage<T>.Model`，对于`@ViewData.Model`，它是`ViewDataDictionary<T>.Model`。那么那里的真正区别是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-23T12:40:13.883

不，没有区别。其实`WebViewPage<T>.Model`只是调用`ViewData.Model`。

您可以检查[codeplex 上的实现](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/1fa5fe9ce17f#src/System.Web.Mvc/WebViewPageOfTModel.cs)：

```
public abstract class WebViewPage<TModel> : WebViewPage
{
    //...

    public new TModel Model
    {
        get { return ViewData.Model; }
    }

    //...
} 
```

# variables - windows命令行给出计算错误

> ID：15586841
> 
> 赞同：0
> 
> 时间：2013-03-23T12:37:08.213
> 
> 标签：variables, command-line, cmd

我在这里找到了这个不错的小代码：[https ://stackoverflow.com/a/5262637/2128987](https://stackoverflow.com/a/5262637/2128987)

```
@echo off

set starttime=%TIME%
set startcsec=%STARTTIME:~9,2%
set startsecs=%STARTTIME:~6,2%
set startmins=%STARTTIME:~3,2%
set starthour=%STARTTIME:~0,2%
set /a starttime=(%starthour%*60*60*100)+(%startmins%*60*100)+(%startsecs%*100)+(%startcsec%)

:TimeThis
robocopy /e /NFL /NDL /NJH /NJS /nc /ns /np folder%rndfolder% %drvltr%:\f%dirnew%\

set endtime=%time%
set endcsec=%endTIME:~9,2%
set endsecs=%endTIME:~6,2%
set endmins=%endTIME:~3,2%
set endhour=%endTIME:~0,2%
if %endhour% LSS %starthour% set /a endhour+=24
set /a endtime=(%endhour%*60*60*100)+(%endmins%*60*100)+(%endsecs%*100)+(%endcsec%)

set /a timetaken= ( %endtime% - %starttime% )
set /a timetakens= %timetaken% / 100
set timetaken=%timetakens%.%timetaken:~-2%

echo.
echo Took: %timetaken% sec. 
```

作为一个独立的程序，它工作得很好。我基本上将它与 robocopy 命令一起使用来确定写入文件需要多长时间。

我在其中添加了一个额外的变量，因为我想保留原始秒数以用于计算目的。所以我添加了额外的行 set timeraw=%timetaken%：

```
set /a timetaken= ( %endtime% - %starttime% )
***set timeraw=%timetaken%***
set /a timetakens= %timetaken% / 100
set timetaken=%timetakens%.%timetaken:~-2% 
```

我的批处理文件也使用 setlocal enabledelayedexpansion

好吧，有时它不能正确计算“开始时间”或“结束时间”。它将其保留为 08:30:22.35 类型格式的原始时间并导致错误：

```
Invalid number. Numeric constants are either decimal (17),hexadecima (0x11), or octal (021) 
```

很明显，因为它包含非数字字符，例如 : 字符。

我的批处理文件永远处于连续循环中，因为我使用它来读取、写入、删除特定酷刑测试条件的文件和文件夹。

知道为什么它会间歇性地不计算 starttime 或 endtime 变量吗？

***编辑：***

*我对我的整体脚本进行了一些更改。我不再需要 enableelayedexpansion，清理了一些 if then 语句，并稍微简化了代码。但我仍然偶尔会在 starttime 或 endtime 变量保持为 HH:MM:SS.CS 的原始时间格式并导致计算错误的地方得到它。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T08:43:58.770

哎呀 - 一个将近一年的问题，没有答案。

我假设问题现在已经解决了，所以作为记录，我会得出结论，“有时它不能正确计算”是因为小时/分钟/秒/百分之几将包含“08”或“ 09" 不是**八进制**数。

解决方案是

```
set /a startcsec=1%STARTTIME:~9,2% - 100 
```

`start`并与其他 3 个时间段中的每一个重复；然后再次重复这些`end`部分。

此外，可能是在显示小时时抑制了 0。在这种情况下，我建议

```
set starttime=0%TIME: =%
set starttime=%startTIME:~-11%
set /a startcsec=1%STARTTIME:~9,2% - 100 
```

其中第一行以“0”作为时间前缀，并`Space`用 [nothing]替换
第二行仅选择结果的最后 11 个字符，
最后一个是熟悉的形式，使用结果`hh:mm:ss.cc`格式。

（显然，substring-and-calculate 方法的其余部分也需要实现）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T08:03:48.883

老问题，但可能有括号块，当您更改括号内的变量时，您需要使用延迟扩展。

运行它并检查差异。

```
@echo off
set a=nothing
   if z==z (
      set a=b
      echo %a%
   )
pause
setlocal enabledelayedexpansion
set a=nothing
   if z==z (
      set a=b
      echo !a!
   )
pause 
```

# sql-server - 将值插入动态表的存储过程

> ID：15586842
> 
> 赞同：4
> 
> 时间：2013-03-23T12:37:10.573
> 
> 标签：sql-server, tsql

我想知道是否可以创建一个将值插入动态表的存储过程。

我试过

```
create procedure asd
(@table varchar(10), @id int)
as
begin
    insert into @table values (@id)
end 
```

也定义`@table`为表变量

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:45:00.867

这可能对你有用。

```
CREATE PROCEDURE asd
(@table nvarchar(10), @id int)
AS
BEGIN
    DECLARE @sql nvarchar(max)
    SET @sql = 'INSERT INTO ' + @table + ' (id) VALUES (' + CAST(@id AS nvarchar(max)) + ')'
    EXEC sp_executesql @sql
END 
```

在此处查看更多信息：http: [//msdn.microsoft.com/de-de/library/ms188001.aspx](http://msdn.microsoft.com/de-de/library/ms188001.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T13:35:41.503

您需要使用动态 SQL。

要创建动态 SQL，您需要将查询构建为字符串。使用`IF`语句和其他逻辑来添加变量等。

声明一个文本变量并使用它来连接你想要的 SQL。

然后，您可以使用`EXEC`命令执行此代码

例子：

```
DECLARE @SQL VARCHAR(100)
DECLARE @TableOne VARCHAR(20) = 'TableOne'
DECLARE @TableTwo VARCHAR(20) = 'TableTwo'
DECLARE @SomeInt INT

SET @SQL = 'INSERT INTO '

IF (@SomeInt = 1)
    SET @SQL = @SQL + @TableOne

IF (@SomeInt = 2)
    SET @SQL = @SQL + @TableTwo

SET @SQL = @SQL + ' VALUES....etc'

EXEC (@SQL) 
```

但是，使用此方法时您真正应该注意的是一个称为**SQL 注入**的安全问题。

你可以在[这里](http://msdn.microsoft.com/en-gb/library/ms161953(v=sql.105).aspx)阅读。

防止 SQL 注入的一种方法是在将变量传递给 SQL-Server 之前在代码中对其进行验证。

另一种方法（或者可能在推测中最好使用）不是使用`EXEC`命令，而是使用名为`sp_executesql`.

详细信息可以在[这里](http://msdn.microsoft.com/en-gb/library/ms188001.aspx)找到，使用说明在[这里](http://msdn.microsoft.com/en-gb/library/ms175170(v=sql.105).aspx)。

您必须稍微不同地构建您的 SQL，并将您的参数作为参数以及@SQL 传递给存储过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T15:52:23.807

是的，要直接实现这一点，您需要动态 SQL，正如其他人所建议的那样。但是，我也同意[@Tomalak 的评论，](https://stackoverflow.com/questions/15586842/tsql-create-insert-values-into-dynamic-table#comment22099711_15586842)即尝试这种普遍性可能会导致代码安全性降低或效率降低（或两者兼而有之）。

如果你觉得你*必须*有这种级别的动态性，你可以尝试下面的方法，虽然比普通的动态 SQL 需要更多的努力，但与后者几乎相同，但没有刚才提到的缺点。

这个想法是首先创建所有必要的插入过程，一个用于您要在其中插入这么多此类值的每个表（即，根据您的示例，恰好是一个`int`值）。统一命名这些过程至关重要，例如使用此模板：目标表的名称`*Tablename*Insert`在哪里。*`Tablename`*

接下来，创建您的通用插入程序，如下所示：

```
CREATE PROCEDURE InsertIntValue (
  @TableName sysname,
  @Value int
) 
AS
BEGIN
  DECLARE @SPName sysname;
  SET @SPName = @TableName + 'Insert';
  EXECUTE @SPName @Value;
END; 
```

[从手册](http://msdn.microsoft.com/en-us/library/ms188332.aspx "执行（事务处理 SQL）")中可以看出，使用命令调用模块时`EXECUTE`，可以指定一个变量而不是实际的模块名。在这种情况下，变量应该是字符串类型，并且应该包含要执行的模块的名称。这*不是*动态 SQL，因为语法不一样。（对于动态 SQL，变量需要用括号括起来。）相反，这本质上是模块名称的参数化，可能是 (Transact-)SQL 中唯一一种本机支持的名称参数化。

就像我说的，这比动态 SQL 需要更多的努力，因为您仍然必须创建这个通用 SP 应该能够调用的所有许多存储过程。然而，结果是，您获得的代码既安全（`@SPName`服务器仅将变量视为名称，*而不是*任意 SQL 片段）又高效（调用的实际存储过程已经存在，即它已经存在）编译并有一个查询计划）。

# c# - TreeView BringIntoView 与 MVVM

> ID：15586844
> 
> 赞同：9
> 
> 时间：2013-03-23T12:37:20.897
> 
> 标签：c#, wpf, mvvm, treeview

我希望用户能够在 TreeView 中搜索项目。输入搜索文本后，应将 TreeViewItem 滚动到视图中。

现在，我将 MVVM 模式用于 TreeView、TreeViewItems 和 MainView。

我必须做什么才能使用 MVVM 获得 BringIntoView 的功能？我可以绑定一些属性吗？（在 MFC 中有类似 FirstVisibileItem 的东西）

已经看到了带有行为的“解决方案”。真的有必要吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-03-04T10:27:12.980

根据提到的代码项目文章，这里是显示如何设置行为以及如何将行为集成到 XAML 中的代码示例。

设置行为：

```
/// <summary>
/// Exposes attached behaviors that can be
/// applied to TreeViewItem objects.
/// </summary>
public static class TreeViewItemBehavior
{
    #region IsBroughtIntoViewWhenSelected
    public static bool GetIsBroughtIntoViewWhenSelected(TreeViewItem treeViewItem)
    {
        return (bool)treeViewItem.GetValue(IsBroughtIntoViewWhenSelectedProperty);
    }

    public static void SetIsBroughtIntoViewWhenSelected(      TreeViewItem treeViewItem, bool value)
   {
       treeViewItem.SetValue(IsBroughtIntoViewWhenSelectedProperty, value);
   }

   public static readonly DependencyProperty IsBroughtIntoViewWhenSelectedProperty =
    DependencyProperty.RegisterAttached(
    "IsBroughtIntoViewWhenSelected",
    typeof(bool),
    typeof(TreeViewItemBehavior),
    new UIPropertyMetadata(false, OnIsBroughtIntoViewWhenSelectedChanged));

    static void OnIsBroughtIntoViewWhenSelectedChanged(DependencyObject depObj, DependencyPropertyChangedEventArgs e)
    {
        TreeViewItem item = depObj as TreeViewItem;
        if (item == null)
           return;

        if (e.NewValue is bool == false)
           return;

        if ((bool)e.NewValue)
           item.Selected += OnTreeViewItemSelected;
        else
           item.Selected -= OnTreeViewItemSelected;
    }

    static void OnTreeViewItemSelected(object sender, RoutedEventArgs e)
    {
       // Only react to the Selected event raised by the TreeViewItem
       // whose IsSelected property was modified. Ignore all ancestors
       // who are merely reporting that a descendant's Selected fired.
       if (!Object.ReferenceEquals(sender, e.OriginalSource))
         return;

       TreeViewItem item = e.OriginalSource as TreeViewItem;
       if (item != null)
          item.BringIntoView();
    }

    #endregion // IsBroughtIntoViewWhenSelected
} 
```

然后在 XAML 中集成 TreeViewItemBehavior：

```
<TreeView.ItemContainerStyle>
  <Style TargetType="{x:Type TreeViewItem}">
    <Setter Property="local:TreeViewItemBehavior.IsBroughtIntoViewWhenSelected" Value="True"/>
  </Style>
</TreeView.ItemContainerStyle> 
```

玩得开心 ：-）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T19:05:13.590

问题可以通过行为来解决。

这篇[CodeProject 文章](http://www.codeproject.com/Articles/28959/Introduction-to-Attached-Behaviors-in-WPF)对其进行了很好的描述，并且开箱即用。

# java - 如何在 DesignGridLayout 库中动态创建 JButton 值？

> ID：15586845
> 
> 赞同：0
> 
> 时间：2013-03-23T12:37:38.377
> 
> 标签：java, swing, jbutton, grid-layout

我使用 DesignGridLayout java 库[（这里）](http://designgridlayout.java.net/usage.html)创建网格布局。如果创建 3 列布局，则在示例中。
使用此代码：

```
layout.row().add(new JButton("Button 1")).add(new JButton("Button 2")).add(new JButton("Button 3")); 
```

或使用返回对象的方法：

```
layout.row().add(button()).add(button()).add(button());
...
...
public JButton button() {
    return new JButton("Button");
} 
```

*问题是，如何动态创建 JButton 值？可能是名称、图标或任何东西？*
我已经尝试过我自己的代码：

```
for (int i=0; i<4; i++) {
        JButton button = new JButton();
    layout.row().add(button).add(button).add(button);   
} 
```

它返回： **线程“AWT-EventQueue-0”中的异常 java.lang.IllegalArgumentException：不要两次添加相同的组件**

我在面板中添加的每个组件中使用不同值的目的是，我想创建填充不同图像的画廊，并使用循环加载这些图像，如下所示：

```
for(int i=0; i<files.length; i++) {
    ...
    ImageIcon imgSource = new ImageIcon(new File(myPath));
    JLabel labelGallery = new JLabel(imgSource);
    ...
} 
```

有什么解决办法吗？谢谢之前:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T15:06:49.353

在你的例子中，

```
layout.row().add(button).add(button).add(button); 
```

具有尝试重复将*相同实例添加到行的效果。* `JButton`

在[引用的示例中](http://designgridlayout.java.net/usage.html)，

```
layout.row().grid().add(button()).add(button()); 
```

`button()`每次出现时调用一个辅助方法 ,来创建一个新实例：

```
public static JButton button() {
    return new JButton("Button");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T06:23:19.027

正如@trashgod 所提到的，Swing 不允许向面板添加两次相同的组件。如果要将在循环中创建的多个组件添加到同一行，可以按如下方式进行：

```
IRow row = layout.row().grid();
for (int i = 0; i < n; i++) {
    JButton button = createButton(i);
    row.add(button);
} 
```

这将只创建一行带有`n`按钮的行。

# macos - curl 一个图像头返回两个 HTTP 请求

> ID：15586846
> 
> 赞同：0
> 
> 时间：2013-03-23T12:37:38.933
> 
> 标签：macos, curl

我只是对 cURL 稍微熟悉了一点，我不知道为什么（在 Mac 上）做一个 curl 来返回图像的 HTTP 标头，终端返回两个块，第一个是当前图像信息，第二个是域根？

重点是什么？有没有办法避免这种情况？

谢谢安德里亚

# c# - ByteArray.readUTFBytes 问题的解码结果

> ID：15586852
> 
> 赞同：0
> 
> 时间：2013-03-23T12:38:12.390
> 
> 标签：c#, asp.net, actionscript-3

我创建在线 Flash 游戏，并使用 RC4 加密将游戏结果传输到游戏服务器。

```
var resultBytes:ByteArray = new ByteArray();
resultBytes.writeUTFBytes(rawData);
rc4.encrypt(resultBytes);
resultBytes.position = 0;
var toServer:String = resultBytes.readUTFBytes(resultBytes.length); 
```

在服务器端使用相同的代码工作 C# ASP.Net 服务

```
byte[] resultBytes = Encoding.UTF8.GetBytes(requestData); 
```

和 AS3 toServer 字符串等效 С# requestData，但 AS3 resultBytes 不等效 C# resultBytes。而且我无法解密请求数据。

我认为 Flash 和 C# 的不同编码规则存在问题，但如何使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:55:31.353

你如何将请求数据传递给服务器，调用 GetBytes 只会给你一个传入字符串的字节数组，不清楚 requestData 包含什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T09:23:50.717

尽管付出了所有努力，但我还是不明白 AS3 ByteArray.readUTFBytes 和 C# Encoding.UTF8.GetBytes(requestData) 的区别，以及如何解决这个问题。

结果我写在客户端

```
var toServer:String = "";
for (var a:int = 0; a < resultBytes.length; a++) {
  toServer+= resultBytes[a].toString() + ",";           
} 
```

并在服务器上

```
string[] splited = requestData.Split(',');
byte[] resultBytes = new byte[splited.Length];

for (int a = 0; a < splited.Length; a++)
{
  if (splited[a] == String.Empty)
        continue;
  resultBytes[a] = byte.Parse(splited[a], System.Globalization.NumberStyles.Integer);
} 
```

此方法允许在服务器上获取相同的字节数组以进行解密。

# mysql - mysql中2列的唯一索引

> ID：15586853
> 
> 赞同：0
> 
> 时间：2013-03-23T12:38:20.203
> 
> 标签：mysql

我在 mysql 中有一张名为“UserFriends”的表，我正在更新我的网站用户的朋友详细信息。

这是表的架构（UserFriends）

```
id  int,
Userid int,
friendid int,
createdate timespan 
```

现在，我想在用户 ID 和朋友 ID 上创建唯一索引。我已经很好地创建了唯一索引。所以，现在我无法插入相同的用户 ID 和朋友 ID 作为重复。但是如果我在相反的字段中插入相同的值，它会接受而不会产生错误。

例子 ：

```
insert into userfriends ( userid, friendid )
select 1, 2  --- insert perfect
insert into userfriends ( userid, friendid )
select 1, 2  --- show error because unique index comes in a picture 
```

现在我正在插入

```
insert into userfriends ( userid, friendid )
select 2, 1  --- records insert here (i don't want this) 
```

我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:42:28.413

首先要做的是：对于您的插入，不要使用“选择”来生成值，因为它很容易变得混乱。而是这样做：

```
INSERT INTO userfriends (userid, friendid) VALUES (1, 2) 
```

也就是说，拥有一个向后工作的唯一限定符的唯一方法是以编程方式进行。如果您想阻止 x,y 被接受，请运行`SELECT * FROM userfriends WHERE userid = y AND friendid = x`，如果您得到结果，请在插入发生之前拒绝插入。如果你不这样做，那么像往常一样插入到表中，你的唯一键将从那里拒绝它。

# sql - sql server中的dense_Rank()函数应该从1开始，而不是从0开始

> ID：15586855
> 
> 赞同：-3
> 
> 时间：2013-03-23T12:38:25.307
> 
> 标签：sql, sql-server, sql-server-2008

我需要根据学生在 sql server 中的分数给他们排名。如果学生得 0 分，那么排名应该是 0 或 -。但是当我使用dense_rank（）函数时，排名的顺序从0开始而不是从1开始。任何人都可以帮助我进行示例查询。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:45:49.350

这不是真的。

从[DENSE_RANK (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms173825%28v=sql.105%29.aspx)

> 行的排名是相关行之前的不同排名数的加一。

这意味着第一行将是 0+1=>1，而不是您所说的 0。

这也可以从

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/11464)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T12:49:02.740

你是这个意思吗？

```
select 
    (case when marks=0 then 0 else DENSE_RANK() over (order by marks desc) end) RNK, 
    marks,
    student
from(
    select 5 as marks, 'a' student union
    select 5 as marks, 'b' student union
    select 0 as marks, 'c' student union
    select 1 as marks, 'd' student union
    select 1 as marks, 'e' student union
    select 3 as marks, 'f' student 
)x
--order by RNK --Add order by clause if 0th rank to come first. 
```

# jquery - JQuery从URL平滑滚动到id

> ID：15586862
> 
> 赞同：3
> 
> 时间：2013-03-23T12:39:07.647
> 
> 标签：jquery, scroll

假设您有以下 URL (www.domain.com/page.php#_number)。

我想从 url**(_1)** 中提取 id 并在页面加载时滚动到它。

您的帮助将不胜感激。

谢谢大家的帮助。

答案：-

```
$(document).ready(function() { 
    var $root = $('html, body');
    var ancloc = window.location.hash;
    event.preventDefault();
        $root.animate({
            scrollTop: $(ancloc).offset().top
        }, 500, function () {
            window.location.hash = href;
        });
        return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:43:18.420

为什么不直接使用锚`<a href="http://www.domain.com/page.php#number">`并为其设置动画。检查此链接： [单击锚链接时平滑滚动](https://stackoverflow.com/questions/7717527/jquery-smooth-scrolling-when-clicking-an-anchor-link)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T12:52:31.503

1-您可以通过`location.hash`.

2-可以使用[jQuery Scrollbar Slider之类的jQuery插件](https://github.com/posabsolute/jquery-scrollbar-slider)

您不需要创建点击事件，它会处理它。

# 编辑：

如果您希望它在不点击的情况下工作，在页面加载时，您必须阻止默认浏览器行为。因为浏览器会自动滚动。

[这是另一个适用于页面加载演示的](http://www.position-relative.net/creation/anchor/#myAnchor) [演示](http://www.position-relative.net/creation/anchor/)

# c# - C# XmlSerializer 在反映类型时出错

> ID：15586867
> 
> 赞同：1
> 
> 时间：2013-03-23T12:39:24.763
> 
> 标签：c#, serialization, reflection, xml-serialization

为了传输数据，我使用 XmlSerializer。但我在以下行收到运行时错误：

```
XmlSerializer serializer = new XmlSerializer(typeof(Packets.Wrapper)); 
```

错误是“附加信息：反映类型'Packets.Wrapper'的错误。”。MSDN 说我必须使用一个空的构造函数，但它不能修复错误。

该类如下所示：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Net;
using System.Net.Sockets;

namespace Packets
{
    [Serializable]
    public class Wrapper
    {
        int _sID = 0;
        int _sSession = 0;
        PacketType _sType = PacketType.None;
        AuthRequest _sAuthRequest = null;
        AuthResponse _sAuthResponse = null;
        ProxyRequest _sProxyRequest = null;
        ProxyResponse _sProxyResponse = null;

        public Wrapper()
        {

        }

        public int ID
        {
            get { return _sID; }
            set { _sID = value; }
        }

        public int Session
        {
            get { return _sSession; }
            set { _sSession = value; }
        }

        public PacketType Type
        {
            get { return _sType; }
            set { _sType = value; }
        }

        public AuthRequest AuthRequest
        {
            get { return _sAuthRequest; }
            set { _sAuthRequest = value; }
        }

        public AuthResponse AuthResponse
        {
            get { return _sAuthResponse; }
            set { _sAuthResponse = value; }
        }

        public ProxyRequest ProxyRequest
        {
            get { return _sProxyRequest; }
            set { _sProxyRequest = value; }
        }

        public ProxyResponse ProxyResponse
        {
            get { return _sProxyResponse; }
            set { _sProxyResponse = value; }
        }
    }

    [Serializable]
    public enum PacketType
    {
        AuthRequest,
        AuthResponse,
        ProxyRequest,
        ProxyResponse,
        None
    }

    [Serializable]
    public enum AuthResult
    {
        Accepted,
        Denied,
        Error
    }

    [Serializable]
    public enum ProxyAction
    {
        Send,
        Response,
        Connect,
        Close
    }

    [Serializable]
    public enum ProxyResult
    {
        Connected,
        Sent,
        Revieved,
        Error
    }

    [Serializable]
    public class AuthRequest
    {
        string username = null;
        string password = null;

        public AuthRequest()
        {

        }

        public string Username
        {
            get { return username; }
            set { username = value; }
        }

        public string Password
        {
            get { return password; }
            set { password = value; }
        }
    }

    [Serializable]
    public class AuthResponse
    {
        AuthResult authResult = AuthResult.Denied;

        public AuthResponse()
        {

        }

        public AuthResult AuthResult
        {
            get { return authResult; }
            set { authResult = value; }
        }
    }

    [Serializable]
    public class ProxyRequest
    {
        ProxyAction _sAction;
        string _sIP = null;
        int _sPort = 0;
        TcpClient _sClient = null;

        public ProxyRequest()
        {

        }

        public ProxyAction Action
        {
            get { return _sAction; }
            set { _sAction = value; }
        }

        public string IP
        {
            get { return _sIP; }
            set { _sIP = value; }
        }

        public int Port
        {
            get { return _sPort; }
            set { _sPort = value; }
        }

        public TcpClient Client
        {
            get { return _sClient; }
            set { _sClient = value; }
        }
    }

    [Serializable]
    public class ProxyResponse
    {
        public ProxyResult _sResult = ProxyResult.Error;
        public StringBuilder _sError = new StringBuilder();
        public StringBuilder _sRecieved = new StringBuilder();
        public TcpClient _sClient = null;

        public ProxyResponse()
        {

        }

        public ProxyResult Result
        {
            get { return _sResult; }
            set { _sResult = value; }
        }

        public StringBuilder Error
        {
            get { return _sError; }
            set { _sError = value; }
        }

        public StringBuilder Recieved
        {
            get { return _sRecieved; }
            set { _sRecieved = value; }
        }

        public TcpClient Client
        {
            get { return _sClient; }
            set { _sClient = value; }
        }
    }
} 
```

我希望你能帮助我，并感谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:33:02.603

我得到了它。TcpClient 不可序列化。

# c++ - 如何在用户定义的命名空间的成员函数中引用指针**environ？

> ID：15586869
> 
> 赞同：3
> 
> 时间：2013-03-23T12:39:31.113
> 
> 标签：c++, compiler-construction, namespaces, g++

```
#include <iostream>

namespace A {
    void func();
}

void  A::func()
{
    extern char **environ;
    std::cout << environ[0] << std::endl;
}

int main()
{
     A::func();
     return 0;
} 
```

和上面的代码一样，我只想在 中使用系统定义的指针`**environ`，`A::func()`但是 g++ 总是说：

```
undefined reference to `A::environ' 
```

如何`environ`正确使用系统定义的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:46:22.183

您只需要`environ`在全局范围内声明，这当然是定义它的地方，而不是在您的函数内。

如果你想更清楚一点并避免不必要地使用全局变量，你可以这样声明 main ：

```
int main(int argc, char* argv[], char* envp[]) 
```

然后简单地传递`envp`给你的函数。它将与全局一样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T12:47:27.063

添加

```
 #include <unistd.h> 
```

并且环境必须在全局范围内。

所以代码看起来像这样：

```
#include <iostream>
#include <unistd.h>
extern char **environ;
namespace A {
void func();
}

void  A::func()
{

    std::cout << environ[0] << std::endl;
}

int main()
{
     A::func();
     return 0;
} 
```

# average - AVG 没有给出正确的值 - Postgresql

> ID：15586876
> 
> 赞同：0
> 
> 时间：2013-03-23T12:40:14.813
> 
> 标签：average

我有一个表，其中有许多冗余点，我想使用 (distinct) 选择不同的点并选择某些行的平均值（例如 rscp）。这里我们有一个例子：

```
| id |  point                   |   rscp    |   ci
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
| 1  |  POINT(10.1192 36.8018)  |   10      |   701
| 2  |  POINT(10.1192 36.8018)  |   11      |   701
| 3  |  POINT(10.1192 36.8018)  |   12      |   701
| 4  |  POINT(10.4195 36.0017)  |   30      |   701
| 5  |  POINT(10.4195 36.0017)  |   44      |   701
| 6  |  POINT(10.4195 36.0017)  |   55      |   701
| 7  |  POINT(10.9197 36.3014)  |   20      |   701
| 8  |  POINT(10.9197 36.3014)  |   22      |   701
| 9  |  POINT(10.9197 36.3014)  |   25      |   701 
```

我想要得到的是下表：（rscp_avg 是冗余点的 rscp 的平均值）

```
| id |  point                   |   rscp_avg    |   ci
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
| *  |  POINT(10.1192 36.8018)  |   11          |   *
| *  |  POINT(10.4195 36.0017)  |   43          |   *
| *  |  POINT(10.9197 36.3014)  |   22.33       |   * 
```

* * *

我试过这个，但它给了我一个错误的平均值！！！！

```
select distinct on(point)
id,st_astext(point),avg(rscp) as rscp_avg,ci
from mesures
group by id,point,ci; 
```

谢谢你的帮助(^_^)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:22:23.297

哈姆杜拉！感谢上帝 ！

我现在找到了解决方案：

```
select on distinct(point)
id,st_astext(point),rscp_avg,ci
from
(select id,point,avg(rscp) over w as rscp_avg,ci
from mesures
window w as (partition by point order by id desc)
) ss
order by point,id asc; 
```

对我有帮助的网站是：

[http://www.postgresql.org/docs/9.1/static/tutorial-window.html](http://www.postgresql.org/docs/9.1/static/tutorial-window.html)

[http://www.w3resource.com/PostgreSQL/postgresql-avg-function.php](http://www.w3resource.com/PostgreSQL/postgresql-avg-function.php)

# javascript - 当单击关闭按钮并单击带有 select2 的建议文本时

> ID：15586879
> 
> 赞同：0
> 
> 时间：2013-03-23T12:40:34.257
> 
> 标签：javascript, jquery, coffeescript, jquery-select2

我想检查用户是否单击了 select2 关闭按钮或仅触发了更改事件。这是我的 select2 输入：

```
<%= hidden_field_tag :query, params[:query], :id => "query_txt" %> 
```

在我的咖啡脚本文件中：

```
$('#query_txt').select2(
   #select2 options here, ajax, initSelection...etc
   #
   #
   #
   $("#query_txt").on "change", (e) ->
     if ($(".select2-search-choice-close").click ->)
       console.log "click on close"
 ) 
```

问题是，如果我单击**建议文本**，我可以在控制台上看到文本**“单击关闭” 。**

换句话说，如果您单击**x/remove 按钮**，如下图所示：

![在此处输入图像描述](../Images/7006c377faa66a6d191bdfc340f5d9bb.png)

如果您单击此图像中的**建议文本，则会发生相同的行为：**

![在此处输入图像描述](../Images/2c674a15166bd066f31bbbe1b1e7ebc6.png)

[您可以在http://jsfiddle.net/nqWNJ/9/](http://jsfiddle.net/nqWNJ/9/)中查看示例代码

**我的问题是我如何知道用户何时点击建议文本或点击关闭按钮。**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:00:26.230

您需要添加另一个将在点击时触发的事件。

```
$queryTxt = $('#query_txt') #cache object
$queryTxt.select2(
  #select2 options here, ajax, initSelection...etc
  #
  #
  #
)
$queryTxt.on 'change', (obj) ->
  console.log 'clicked on close' if obj.removed
  console.log 'change was triggered' 
```

# jquery - 该网站如何从顶部滑动其时事通讯+？

> ID：15586884
> 
> 赞同：0
> 
> 时间：2013-03-23T12:40:58.013
> 
> 标签：jquery, css, newsletter, superfish

试图弄清楚这个网站如何使他们的时事通讯+按钮使页面向下滑动：

[http://thestoryoftelling.com/](http://thestoryoftelling.com/)（点击“newsletter+”）

看起来#wrap 元素的页面偏移量为 57px，并且它的背景 url 在“滑入”后有效地成为注册链接的背景。单击“newsletter+”会调用“_gaq”函数，但这似乎更适合追踪。

我认为它是通过超级鱼激活的，但我不明白它是如何或从哪里调用的：

```
jQuery(document).ready(function($) { 
    $('#header .menu, .superfish').superfish({
        delay:       100,                               // 0.1 second delay on mouseout 
        animation:   {opacity:'show',height:'show'},    // fade-in and slide-down animation 
        dropShadows: false                              // disable drop shadows 
    });
}); 
```

有什么想法吗？可能是一个jQuery的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:50:49.227

好吧，我个人会通过将彩色条作为页面上的第一个元素来做类似的事情，并给它一个负数`margin-top`，以便只显示底部边缘。然后我可以设置`style.marginTop='0'`，如果我`transition`设置了合适的属性，那么它会像你展示的网站一样滑动。

[JSFiddle 上的演示](http://jsfiddle.net/VuGEG/)

# c# - c# 从计划任务中打开 IE

> ID：15586898
> 
> 赞同：1
> 
> 时间：2013-03-23T12:42:34.327
> 
> 标签：c#, internet-explorer, task

我有 ac# 控制台应用程序，我想从具有 2 个主要功能的任务调度程序运行：1) 关闭所有 Internet Explorer 进程；2) 重新启动 Internet Explorer 并加载相应的网站。

如果从命令行运行，控制台应用程序将完全按照它应该执行的操作，但如果从任务计划程序执行，则会失败。

该应用程序旨在在客户端计算机上运行，​​其唯一功能是加载单个网站并将该网站广播到我们的内部电视频道 195。我们的 ISP 存在连接问题，虽然连接问题通常是暂时的，但 Internet Explorer需要重新启动才能重新显示网站。

我想将其设置为每天运行多次，以消除 Web 服务器和客户端之间任何可能的连接问题。

```
private static void StartExplorer()
{
    Process _process;
    ProcessStartInfo psi = new ProcessStartInfo
    {
        FileName = "iexplore.exe",
        Arguments = "-noframemerging -private -k \"http://tv.TheelmAtClark.Com\""
    };
    try{
        _process = Process.Start(psi);
    }
    catch(Exception Ex)
    {
        Console.WriteLine(Ex.ToString());
    }
} 
```

是否可以使用任务调度程序运行应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:45:07.167

如果可能的话，我建议你看看替代方法。

像[Reload Every](https://addons.mozilla.org/en-us/firefox/addon/reloadevery/)这样的 Firefox 插件就是为此而设计的。我在我们的项目中使用它来投影到大屏幕电视。

但是，如果您热衷于通过 Internet Explorer 执行此操作，还有两种方法

1) 类似于我上面提到的 Firefox 插件 - [Autorefresher for IE](http://download.cnet.com/AutoRefresher-for-IE/3000-12512_4-10062693.html)

2）如果您坚持使用任务计划程序，如上所述，我认为您可以这样做-

要终止所有 Internet Explorer 实例，请使用[PSKill](http://technet.microsoft.com/en-us/sysinternals/bb896683.aspx)。通过参数调用它`Process.Start`来杀死 Internet Explorer。

要启动新实例，请尝试`Process.Start`使用`UseShellExecute=true`.

# c++ - For循环中的数组？

> ID：15586903
> 
> 赞同：-1
> 
> 时间：2013-03-23T12:43:10.300
> 
> 标签：c++, arrays, for-loop

让我们以这段代码为例：我想使用字符串“name”作为我在 for 循环中使用的数组的名称，但我收到了字符串“array”。如何将此字符串用作我的数组的名称？

```
#include <iostream>
#include <string>
using namespace std;

int main() {
  int array[3];
  array[0] = 1;
  array[1] = 2;
  array[2] = 3;
  string name = "array";
  int i;
  for (i = 0; i < 3; i++) {
    cout << name[i] << endl;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T12:59:48.600

将我的评论扩展到答案。

C++ 没有反射：没有通用的方法来使用包含其标识符的字符串来引用变量（或其他任何东西）。

但是，有一些数据结构可用于基于键（例如字符串）检索数据。在您的情况下，您可以执行以下操作：

```
#include <iostream>
#include <map>
#include <string>
#include <vector>

int main() {
  std::map<std::string, std::vector<int> > allArrays;  // mapping strings to vectors of ints
  allArrays["array"].push_back(1);  // fill vector stored under key "array"
  allArrays["array"].push_back(2);
  allArrays["array"].push_back(3);

  // another way:
  std::vector<int> &vec = allArrays["another_array"];
  vec.push_back(-1);
  vec.push_back(-2);
  vec.push_back(-3);

  std::string name = "array";

  for (size_t i = 0; i < allArrays[name].size(); ++i) {
    std::cout << allArrays[name][i] << '\n';  //not using endl - no need to flush after every line
  }
} 
```

# php - 在 PHP 和 MySQL 中使用循环创建嵌套数组

> ID：15586907
> 
> 赞同：1
> 
> 时间：2013-03-23T12:43:19.437
> 
> 标签：php, mysql, loops, multidimensional-array

我有 2 个 MySQL 表，在其中使用以下 SQL 语句提取数据：

分类：`SELECT cat_id, cat_name FROM categories`

产品：`SELECT pro_id, pro_name, pro_category FROM products`

当然`pro_category`是外键`cat_id`

我想获得以下 JSON 数据：

```
"categories":[
    {
        "id": 1,
        "name": "Guitars",
        "products":[
            {
                "id": 1,
                "name": "Fender Statocaster"
            },
            {
                "id": 2,
                "name": "Gibson Les Paul"
            }
        ]
    },
    {
        "id": 2,
        "name": "Basses",
        "products":[
            {
                "id": 3,
                "name": "Fender Jazz Bass"
            },
            {
                "id": 4,
                "name": "MusicMan StingRay"
            }
        ]
    }   
] 
```

所以我必须做一个类别数组，并且对于每个元素，一个产品子数组（然后我会去`json_encode()`）。

遍历类别并创建第一个数组非常容易，但我完全坚持如何创建产品子数组......这是我的代码，问号是我停下来的地方，因为我不知道该怎么办：

```
$categories = array();
while ($row_rsCategories = mysql_fetch_assoc($rsCategories)) { 
    $categories[] = array(
        'id' => $row_rsCategories['cat_id'],
        'name' => $row_rsCategories['cat_name'],
        'products' => array(
            ???????
        ),
    );
} 
```

请问，你能帮忙吗？
谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T12:59:24.050

```
$categories = array();
while ($row_rsCategories = mysql_fetch_assoc($rsCategories)) { 

    $product_array = array();
    $product_array_query = mysql_query("SELECT pro_id, pro_name, pro_category FROM products WHERE pro_category = '".$row_rsCategories['cat_id']."'");

    while($product_array_fetch = mysql_fetch_array($product_array_query)) {

       $product_array[] = array("id"=>$product_array_fetch['pro_id'],"name"=>$product_array_fetch['pro_name']);

    }                

    $categories[] = array(
        'id' => $row_rsCategories['cat_id'],
        'name' => $row_rsCategories['cat_name'],
        'products' => $product_array,
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:03:55.367

```
$categories = array();
while ($row_rsCategories = mysql_fetch_assoc($rsCategories)) { 
    $categories[$row_rsCategories['cat_id']] = array(
        'id' => $row_rsCategories['cat_id'],
        'name' => $row_rsCategories['cat_name'],
        'products' => array(),
    );
}

while ($row_rsProducts = mysql_fetch_assoc($rsProducts)) {
    $categories[$row_rsProducts['pro_category']]['products'][] = array(
         'id' => $row_rsProducts['pro_id'],
         'name' => $row_rsProducts['pro_name'],
    );
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-23T13:06:48.833

我使用`JOIN`查询按其类别 id 订购产品，这样属于某个类别的产品就会聚集在一起。`cat_id`如果您看到更改，则遍历结果数组并创建新类别。

```
$db = new PDO($connectionString);

$sql = "SELECT * FROM products t1 LEFT JOIN categories t2 ON t1.pro_category = t2.cat_id ORDER BY t2.cat_id";
$stmt = $db->prepare($sql);
if($stmt->execute())
{
    $rows = $stmt->fetchAll();
    $currentCategory = NULL;
    $categories = array();
    foreach($rows as $r)
    {
        if ($currentCategory == NULL || $r['cat_id' != $currentCategory['id'])
        {
            $currentCategory = array(
                'id' => $r['cat_id'],
                'name' => $r['cat_name'],
                'products' => array();
            );
            $categories[] = $currentCategory;
        }
        $currentCategory['products'][] = array(
            'id' => 'pro_id',
            'name' => 'pro_name',
        )
    }
}
else
{
    var_dump($stmt->errorInfo());
} 
```

# django - Django 1.5 feed RSS 没有验证？

> ID：15586912
> 
> 赞同：1
> 
> 时间：2013-03-23T12:43:37.983
> 
> 标签：django, rss

我正在使用默认的 django 1.5 提要应用程序来生成 RSS 提要。该代码类似于 django 文档中的示例。但是，如果我尝试验证 w3c 验证器中的代码，则会出现此[错误](http://validator.w3.org/feed/docs/warning/SelfDoesntMatchLocation.html)。为什么？这是django中的错误吗？

# javascript - 我的 sisyphus.js/jquery html 有什么问题？在重新打开页面时丢失用户表单输入

> ID：15586916
> 
> 赞同：0
> 
> 时间：2013-03-23T12:43:53.593
> 
> 标签：javascript, forms, client-side

我正在尝试构建一个非常简单的文字编程网络应用程序[Tome](http://streamerforipad.webs.com/Tome/Tome.html)，其功能是使用[sisyphus.js](http://simsalabim.github.com/sisyphus/)在本地保存表单输入。我以正确的顺序调用 jquery，遵循 Alexander Kaupanin 提供的所有语法，它仍然恢复为默认文本

*更新*

重新打开页面（重新加载就像在 Firefox 上一样，但在 Safari 上却不行）。大约有一公吨的 html，所以我不会在这里粘贴整个源代码，但是`<head>`如下所示：

```
 <head>
    <meta http-equiv="Content-Type" content=
    "text/html; charset=utf-8" />
    <title>
      Tome | A simple text editor
    </title>
    <link href="dark.css" rel="stylesheet" type="text/css" title=
    "default" />
    <link href="light.css" rel="alternate stylesheet" type=
    "text/css" title="alternate" />
    <link type="text/css" rel="stylesheet" media="print" href=
    "print.css" />
<script type="text/javascript" 
src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
    <script type="text/javascript" src=
    "http://streamerforipad.webs.com/Tome/sisyphus.js">
</script>
<script type="text/javascript"> $(window).load(function() { $('form').sisyphus(); }); </script>
  </head> 
```

任何建议都会很棒，我对整个事情都比较陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:34:22.723

`<script type="text/javascript"> $( &#039;#form&#039; ).sisyphus({timeout: 5}); </script>`

是不正确的！

这是正确的代码：

**`<script type="text/javascript"> $(window).load(function() { $('form').sisyphus(); }); </script>`**

' ='

祝你好运！我在存储数据方面遇到了很大的问题...... :(

# python - matplotlib 中的“输入 x 和 y 必须是 1D 或 2D”错误

> ID：15586919
> 
> 赞同：2
> 
> 时间：2013-03-23T12:44:01.213
> 
> 标签：python, matplotlib

我正在尝试从一个大文件中绘制一些数据。数据具有以下形式：

```
0.025876 139 0
0.030881 140 0
0.030982 141 0
0.035602 142 0
0.035521 143 0
0.038479 144 0
0.040668 145 0
0.040121 146 0
0.037953 147 0
0.039027 148 0
0.038338 149 0
0.047557 139 1
0.045105 140 1
0.044943 141 1
0.042370 142 1
0.042025 143 1
0.038946 144 1
0.037953 145 1
0.033373 146 1
0.030070 147 1
0.029118 148 1
0.025552 149 1 
```

原则上，每条线对应一个三维点，我会“简单地”绘制从这些点生成的 3d 表面，类似于我可以使用 gnuplot 中的 splot 函数为那些了解它的人做的事情。

在网上寻找我的问题的答案，我用 matplolib 轮廓函数尝试了以下事情：

```
#!/usr/bin/python

from numpy import *
import pylab as p
import sys
import mpl_toolkits.mplot3d.axes3d as p3

 s = str(sys.argv[1])
 f = open(s)
 z,y,x = loadtxt(f, unpack = True)
 f.close
 #x = [1,2,3]
 #y = [1,2,3]
 #z = [1,8,16]
 data = zip(x,y,z)

 #map data on the plane
 X, Y = meshgrid(arange(0, 89, 1), arange(0, 300, 1))
 Z = zeros((len(X),len(Y)),'Float32')
 for x_,y_,z_ in data:
   Z[x_, y_] = z_ #this should work, but only because x and y are integers
             #and arange was done with a step of 1, starting from 0

 fig=p.figure()
 ax = p3.Axes3D(fig)
 ax.contourf(X,Y,Z)
 ax.set_xlabel('X')
 ax.set_ylabel('Y')
 ax.set_zlabel('Z')
 p.show() 
```

这段代码实际上可以很好地处理上面代码中带有标签的向量 x、y 和 z。

但是知道我正在尝试使用上面给出的数据，我在 matplotlib 中得到“输入 x 和 y 必须是 1D 或 2D”错误。

我已经读到这可能与 Z 的形状与 X 或 Y 不同的事实有关……但我不确定如何处理这个问题。

顺便说一句，您可能已经意识到，我是 Python 的超级新手，如果代码对你们中的某些人来说非常难看，我深表歉意。

无论如何，任何帮助都将受到欢迎。

谢谢 ！

法比安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:40:29.880

使用[scipy.interpolate.griddata](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html#scipy.interpolate.griddata)：

```
import io
import sys
import numpy as np
import matplotlib.pyplot as plt
import mpl_toolkits.mplot3d.axes3d as axes3d
import scipy.interpolate as interpolate

content = '''0.025876 139 0
0.030881 140 0
0.030982 141 0
0.035602 142 0
0.035521 143 0
0.038479 144 0
0.040668 145 0
0.040121 146 0
0.037953 147 0
0.039027 148 0
0.038338 149 0
0.047557 139 1
0.045105 140 1
0.044943 141 1
0.042370 142 1
0.042025 143 1
0.038946 144 1
0.037953 145 1
0.033373 146 1
0.030070 147 1
0.029118 148 1
0.025552 149 1'''

data = np.genfromtxt(io.BytesIO(content), dtype=None, names='x, y, z')

# Or, to read from a file:
# data = np.genfromtxt(filename, dtype=None, names='x, y, z')

x, y, z = data['x'], data['y'], data['z']
N = 20
xi = np.linspace(x.min(), x.max(), N)
yi = np.linspace(y.min(), y.max(), N)

X, Y = np.meshgrid(xi, yi)
Z = interpolate.griddata((x, y), z, (X, Y), method='nearest')

fig = plt.figure()
ax = fig.add_subplot(1, 1, 1, projection='3d')
ax.scatter(data['x'], data['y'], data['z'])
ax.plot_wireframe(X, Y, Z, rstride=1, cstride=1)
# ax.plot_surface(X, Y, Z)
plt.show() 
```

产量

![在此处输入图像描述](../Images/a0dcad1094cbe9b06c1738b46d112d26.png)

* * *

相关链接：

*   [scipy.interpolate.griddata](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html#scipy.interpolate.griddata)
*   [np.genfromtxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html#numpy-genfromtxt)
*   [Axes3D.plot_wireframe](http://matplotlib.org/mpl_toolkits/mplot3d/tutorial.html#mpl_toolkits.mplot3d.Axes3D.plot_wireframe)
*   [Axes3D.plot_surface](http://matplotlib.org/mpl_toolkits/mplot3d/tutorial.html#mpl_toolkits.mplot3d.Axes3D.plot_surface)

# android - 在首选项中找不到 Android 选项

> ID：15586920
> 
> 赞同：0
> 
> 时间：2013-03-23T12:44:07.787
> 
> 标签：android

通常我通过将这些文件夹复制到 pc 并将 android 首选项更改为我复制的文件夹来安装 eclipse 和 android-sdk。在某些笔记本电脑中，我在首选项中找不到 android 选项卡 为什么？...安装了 adt 插件

提前致谢

# phpmyadmin - phpMyadmin 错误 sql 语法

> ID：15586921
> 
> 赞同：1
> 
> 时间：2013-03-23T12:44:10.140
> 
> 标签：phpmyadmin

SQL查询：

```
CREATE TABLE  summertraining.student(

studentID VARCHAR( 9 ) NOT NULL ,
Name VARCHAR( 20 ) NOT NULL ,
KSUEmail VARCHAR( 20 ) NOT NULL ,
PhoneNo VARCHAR( 14 ) NOT NULL ,
coordinatorName VARCHAR( 20 ) NULL ,
supervisorName VARCHAR( 20 ) NULL ,
GPA DOUBLE( 4 ) NOT NULL ,
password VARCHAR( 10 ) NOT NULL ,
registerFlag VARCHAR( 7 ) NOT NULL ,
PRIMARY KEY (  studentID )
) ENGINE = INNODB; 
```

MySQL 说：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行强文本中的 ') NOT NULL, `password`VARCHAR(10) NOT NULL, VARCHAR(7) NOT NULL,' 附近使用正确的语法`registerFlag`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:57:47.873

错误在行：

```
GPA DOUBLE( 4 ) NOT NULL , 
```

需要使用：

```
GPA DOUBLE NOT NULL , 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:17:59.317

问题确实是`DOUBLE(4)`@Serg 指出的部分。如果要为双精度值指定精度，则需要至少有两个数字来指定精度，而不仅仅是一个。来自 MySQL 手册：

> MySQL 允许使用非标准语法：FLOAT(M,D) 或 REAL(M,D) 或 DOUBLE PRECISION(M,D)。这里，“(M,D)”是指总共最多可以存储M位的值，其中D位可以在小数点之后。例如，定义为 FLOAT(7,4) 的列在显示时看起来像 -999.9999。MySQL 在存储值时执行舍入，因此如果将 999.00009 插入 FLOAT(7,4) 列，则近似结果为 999.0001。

但是，您可能只想坚持使用，`DOUBLE`因为这种语法是 MySQL 特有的：

> 为了获得最大的可移植性，需要存储近似数值数据值的代码应使用 FLOAT 或 DOUBLE PRECISION，而无需指定精度或位数。

这是手册中相关页面的链接：http: [//dev.mysql.com/doc/refman/5.6/en/floating-point-types.html](http://dev.mysql.com/doc/refman/5.6/en/floating-point-types.html)

# java - 从 jsf 中的简单 html 对话框调用操作

> ID：15586923
> 
> 赞同：0
> 
> 时间：2013-03-23T12:44:36.847
> 
> 标签：java, jquery, jsf-2

我正在尝试从对话框中调用 bean 操作。这是html对话框。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      template = "/pages/templates/template.xhtml">

    <ui:define name="extrascripts">
        <h:outputStylesheet library="css" name="colorbox.css"  />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <h:outputScript library="js" name="jquery.colorbox.js" />
        <script>
            $(document).ready(function()
            {   
                $(".ajax").colorbox({inline:true}); 
                                $("#click").click(function(){ 
                    $('#click').css({"background-color":"#f00", "color":"#fff", "cursor":"inherit"}).text("Open this window again and this message will still be here.");
                    return false;
                });
            });
        </script>
    </ui:define>

    <ui:define name="content">
    <h:body>
    <h3>User ISheets</h3>

    <h:form>   
       <p><a class='ajax' href="#createsheet">Create New Sheet</a></p>
       <div style='display:none'>
            <div id='createsheet' style='padding:10px; background:#fff;'>
                <p><strong>Create New Sheet</strong></p>
                <h:panelGrid columns="3">
                    <h:outputText value="Name " />
                    <h:inputText value="#{usersSheetsBean.sheetname}" required="true" ></h:inputText>
                    <h:commandButton action="#{usersSheetsBean.createSheet}" value="Submit" update="msgs"/>
               </h:panelGrid>
            </div>
        </div>
    </h:form>

    <table>
        <ui:repeat var="s" value="#{usersSheetsBean.sheets}">
            <tr>
                <td>
                    <h:link value="#{s.name}" outcome="exploresheet">
                        <f:param name="s_id" value="#{s.id}"/>
                    </h:link>
                </td>
            </tr>
        </ui:repeat>
    </table>

    </h:body>
    </ui:define>

</ui:composition> 
```

盒子被打开。但是当我点击提交时没有任何反应。

# java - 仅当第一个字符遇到直到 JtextArea 中的 LineEndOffset 时才将荧光笔应用于线条

> ID：15586926
> 
> 赞同：1
> 
> 时间：2013-03-23T12:44:52.723
> 
> 标签：java, swing, jtextarea, swing-highlighter

我的问题很简单。

我有一个 JtextArea。我的目标是从该行中第一个字符的开头突出显示该文本区域中的一行。通过使用 Java 行开始和结束偏移，我能够突出显示整行，但它看起来很难看。

我试图从该行获取所有文本。通常它将包含空格。我尝试了什么：

```
String text = textArea_1.getText(); //My TextArea
int startIndex = textArea_1.getLineStartOffset(i11); //i11 is the Line Number
int endIndex = textArea_1.getLineEndOffset(i11);
String myString = text.substring(startIndex, endIndex);
//I get all text from that line

for(int i1 = 0; i1 < myString.length(); i1++){ 
//This is trying to increment startindex until it gets a non empty space, 
//the counter should stop.
       while(Character.isWhitespace(myString.charAt(i1))){
              startIndex++;
              break;
       }
}

String myString2 = text.substring(startIndex, endIndex);
//I now pass the new startIndex
String [] javaWords = {myString2};//Function highlight takes an array.
System.out.println("String to Highlight: " + myString2);
highLight(textArea_1, javaWords);//Function to Highlight 
```

荧光笔方法：

```
public void highLight(JTextComponent textComp, String[] pattern) {

  try {
     Highlighter hilite = textComp.getHighlighter();
     javax.swing.text.Document doc = textComp.getDocument(); 
     String text = doc.getText(0, doc.getLength());
     for (int i = 0; i < pattern.length; i++) {
        int pos = 0;
         // Search for pattern
         while ((pos = text.indexOf(pattern[i], pos)) >= 0) {
            hilite.addHighlight(pos, pos + pattern[i].length(),painter);
            pos += pattern[i].length();
         }
     }
     } catch (BadLocationException e) {}
} 
```

上面代码的结果： ![在此处输入图像描述](../Images/3937707741450a021c7b1905bf442376.png)

```
in x;
string y;
chr z; 
```

上面应该突出显示。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:47:44.820

问题出在循环上..解决了：

```
String text = textArea_1.getText();
                        int startIndex = textArea_1.getLineStartOffset(i11);
                        int endIndex = textArea_1.getLineEndOffset(i11);
                        String myString = text.substring(startIndex, endIndex);
                        for(int i1 = 0; i1 < myString.length(); i1++){
                            if(Character.isWhitespace(myString.charAt(i1))){
                                startIndex++;

                            }
                         if(!Character.isWhitespace(myString.charAt(i1))){
                                startIndex = startIndex+0;;
                                break;
                            }

                        }

                        String myString2 = text.substring(startIndex, endIndex);
                        String [] javaWords = {myString2};
                        System.out.println("String to Highlight: " + myString2);
                        highLight(textArea_1, javaWords); 
```

结果：

![在此处输入图像描述](../Images/06b4c89c165f0a6e3556bdaf9e0debc6.png)

# android - 为android从java中的url读取文本文件

> ID：15586932
> 
> 赞同：0
> 
> 时间：2013-03-23T12:45:06.510
> 
> 标签：android, arrays, url, text

我想将一个简单的文本文件逐行读入一个数组。我无法将此文件读入数组。无论我做什么，它都对我不起作用。

```
String myUrlTextFile = "www.puzzlers.org/pub/wordlists/pocket.txt";

try 
{
    URL myText= new URL(myUrlTextFile);
    Scanner s = new Scanner(myText.openStream());

    while (s.next() != null) 
    {
         mylistArray.add(s.next());
    }

    mainListView.setAdapter(listAdapter);
}
catch(IOException ex) 
    {
        ex.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:36:36.640

您需要协议说明符，即 URL 开头的“http://”

**更新**

从蜂窝开始，主线程上的网络操作是阻塞的。

这里的线索在 logcat 输出中：

```
Caused by: android.os.NetworkOnMainThreadException 
```

使用 AsynchTask 或其他线程方法来保持从属线程上的网络活动。

# unit-testing - 如何使用 tfsbuild 同时在不同项目中运行单元测试？

> ID：15586935
> 
> 赞同：0
> 
> 时间：2013-03-23T12:45:28.800
> 
> 标签：unit-testing, tfsbuild

我希望能够设置一个环境，在该环境中，我可以同时从不相互依赖的不同项目运行单元测试，以减少实际运行所有单元测试所需的总时间。有没有人成功做到这一点，是否有任何陷阱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:24:08.393

您可以做两件简单的事情来加快构建速度。

1.  使用`/m`MSBuild 参数
2.  使用`BuildInParallel`MSBuild 变量

取自 Scott Hansleman，[这里](http://www.hanselman.com/blog/FasterBuildsWithMSBuildUsingParallelBuildsAndMulticoreCPUs.aspx)：

> 总之，BuildInParallel 允许 MSBuild 任务以并行方式处理传递给它的项目列表，而 /m 告诉 MSBuild 它允许启动多少进程。

**更高级（我认为你正在寻找更多的东西）**

更进一步，您可以创建自定义构建模板以将某些项目移植到不同的构建控制器。[此处](http://blogs.msdn.com/b/jimlamb/archive/2010/09/14/parallelized-builds-with-tfs2010.aspx)描述了此过程。

# java - 为什么即使我已经注册了警报，我也没有收到邻近变化？

> ID：15586937
> 
> 赞同：1
> 
> 时间：2013-03-23T12:45:39.433
> 
> 标签：java, android, android-location

我试图稍后为一个区域简单地设置一个接近度以进行测试，我只是将它添加到`onCreate`我的主要活动的方法中。

```
public void onCreate(Bundle bndBundle) {

    IntentFilter filter = new IntentFilter(WidgetService.ACTION_STOP_PROXIMITY); 
    registerReceiver(new ProximityIntentReceiver(), filter);

    LocationManager locManager = (LocationManager) this.getSystemService(LOCATION_SERVICE);
    Intent ittIntent = new Intent(this, ProximityIntentReceiver.class);
    ittIntent.putExtra(WidgetService.KEY_STOP_IDENTIFIER, 1000);
    PendingIntent pitIntent = PendingIntent.getBroadcast(this, 0, ittIntent, 0);
    locManager.addProximityAlert(60.15769, 24.94150, 150, -1, pitIntent);

    super.onCreate(bndBundle);
    getActionBar().setDisplayHomeAsUpEnabled(false);

} 
```

..这是我正在使用的简单接收器类

```
public class ProximityIntentReceiver extends BroadcastReceiver {

    private static final int NOTIFICATION_ID = 1000;

    @Override
    public void onReceive(Context context, Intent intent) {

        String key = LocationManager.KEY_PROXIMITY_ENTERING;
        Boolean entering = intent.getBooleanExtra(key, false);

        if (entering) {
            Log.d(getClass().getSimpleName(), "entering");
        }
        else {
            Log.d(getClass().getSimpleName(), "exiting");
        }

    }

} 
```

我正在我的模拟器上对此进行测试，当我使用 DDMS 控制台手动设置手机的坐标时，我仍然看不到日志消息。

我的清单文件没有任何特殊代码。我已经添加了正确的权限并拥有一个简单活动的代码——没有服务或任何东西。

我通读了一堆关于 StacKOverflow 的帖子，但我无法解决这个问题。我的片段中是否缺少某些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:35:19.187

您正在通过 动态注册此接收器`registerReceiver()`，以使其响应动作字符串为 的广播`WidgetService.ACTION_STOP_PROXIMITY`。

但是，您发送的实际广播正在尝试使用显式`Intent`标识您的接收器类。这与`IntentFilter`您使用的`registerReceiver()`.

任何一个：

*   在清单中注册您的接收器并摆脱`registerReceiver()`，在这种情况下您的显式`Intent`将起作用，或者

*   使用`new Intent(WidgetService.ACTION_STOP_PROXIMITY)`代替`new Intent(this, ProximityIntentReceiver.class)`，所以你的`Intent`行与你的`IntentFilter`

您不能使用显式`Intent`对象向通过 注册的接收者发送广播`registerReceiver()`。显式`Intent`只适用于清单注册的接收器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T19:21:06.530

确保输入正确的坐标。在 DDMS 中，它们是颠倒的，首先是经度，然后是纬度

# ios - Xcode AVAudioPlayer 没有播放

> ID：15586952
> 
> 赞同：0
> 
> 时间：2013-03-23T12:47:32.277
> 
> 标签：ios, xcode

我有一个 ViewController ： GLKViewController 与此代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"background-music-aac" ofType:@"caf"];
    NSURL *url = [NSURL URLWithString:path];
    NSData *data = [NSData dataWithContentsOfURL:url];

    AVAudioPlayer *audio = [[AVAudioPlayer alloc] initWithData:data error:nil];
    audio.delegate = self;
    audio.volume = 1.0;
    audio.numberOfLoops = -1;

    [audio prepareToPlay];
    [audio play];

    [self setupContext];
    [self setupDisplay];
} 
```

但是...我的图形工作正常，但 iOS 模拟器不播放音乐。我有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:55:39.367

假设您正在使用 ARC，一旦您的方法返回给它的调用者，播放器就会被释放。引用[这个答案](https://stackoverflow.com/questions/8016765/avaudioplayer-not-playing-any-sound)：

> ARC 向音频播放器插入一个释放调用，因此它在离开创建它的方法后立即被释放。

尝试将 实现`AVAudioPlayer`为属性。

如果您的`data`值为 nil，则该文件未正确添加到项目中。要将文件添加到项目中，只需将其拖放到目标中即可。

此外，`AVAudioPlayer`还有一个`initWithContentsOfURL:`您可能想要使用的方法。

# visual-studio-2010 - 如何自定义 Fortify Visual Studio 插件

> ID：15586953
> 
> 赞同：1
> 
> 时间：2013-03-23T12:47:33.853
> 
> 标签：visual-studio-2010, fortify

我对 HP Fortify SCA 工具非常陌生。我安装了 Visual Studio 2010 的 Fortify 插件。现在，如果我开始分析代码，它将包含该解决方案中的所有项目。但是我有很多我想从分析中排除的测试项目。如果有人知道如何自定义需要包含在分析中的项目列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:48:10.053

您可以通过将项目设置为不从解决方案配置构建来从扫描中排除项目。

例如，实现此目的的一种方法是：

1.  *构建*->*清洁解决方案*
2.  突出显示解决方案，右键单击并选择*属性*
3.  选择*配置属性*（确保配置设置为调试）
4.  取消选中您不想扫描的每个项目的*构建列*

现在，当您在调试模式下扫描时，您将不会翻译/扫描未设置为在该配置中构建的项目。

希望这可以帮助。

# python - 如何在python字典中执行递归

> ID：15586954
> 
> 赞同：3
> 
> 时间：2013-03-23T12:47:42.137
> 
> 标签：python, loops, data-structures, recursion

我有一本字典，我想用它来创建一棵树。这个想法是获取指定索引的**值**，将其附加到列表中。将此值用作字典下一项中的索引，然后重复该过程，直到我们得到 None

我的字典

```
dict = {
         'A' : 'AF',
         'BF': 'B',
         'AF': 'Z',
         'Z' : None,
         'B' : 'B'
       } 
```

我可以循环遍历字典并获得第一个值，但我无法更好地递归循环遍历字典。

注意 x 是我要指定的索引参数。即 A、BF、AF、Z 或 B

```
def tree(x,dict):
   result = []
   for value in dict:
      result.append(value)
    #stuck somewhere here. 
    #I would like to use this value as an index again and pick next value. 
    #Do this until I have no further relation

   #print final results in a list
   print result 
```

当调用 tree(x,dict) 时，取 x = 'A' 预期的结果应该是：

```
['A','AF','Z'] 
```

感谢您的帮助和贡献。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T12:54:49.533

非递归版本要快得多，但有一个看起来不错

```
>>> def tree(D, x):
        if x is None: 
            return []
        else: 
            return [x] + tree(D, D[x])

>>> tree(D, 'A')
['A', 'AF', 'Z'] 
```

或作为单行：

```
def tree(D, x):
    return [] if x is None else [x] + tree(D, D[x]) 
```

这将具有二次运行时间，因为它每次都会添加两个列表，尽管如果您想要性能，您只需使用`.append`，然后无论如何只使用循环会更实用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:50:59.577

```
def tree(x,dict):
    old_value = x
    while True:
        value = dict.get(old_value)
        if not value:
            break
        result.append(value)
    print result 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T13:40:59.470

您还可以尝试递归生成器：

```
# This will loop "forever"
data = {                                                                        
  'A' : 'AF',                                                          
  'BF': 'B',                                                           
  'AF': 'Z',                                                           
  'Z' : None,                                                          
  'B' : 'B'                                                            
}                                                                      

def tree(key):                                                                  
  value = data.get(key)                                                         
  yield key                                                                     
  if value is not None:                                                         
    for value in tree(value):                                                   
      yield value                                                               

for value in tree("A"):                                                         
  # Do something with the value 
```

**编辑**：上面建议的方法无法检测循环并将循环直到达到最大递归深度。

下面的递归方法跟踪访问的节点以检测循环并在存在时退出。关于如何找到循环的最易理解的描述来自这个[答案](https://stackoverflow.com/a/770690/2003420)：

```
data = {
  'A' : 'AF',
  'BF': 'B',
  'AF': 'Z',
  'Z' : None,
  'B' : 'B'
}

def visit_graph(graph, node, visited_nodes):
    print "\tcurrent node: ", node, "\tvisited nodes: ", visited_nodes
    # None means we have reached a node that doesn't have any children
    if node is None:
        return visited_nodes
    # The current node has already been seen, the graph has a cycle we must exit
    if node in visited_nodes:
        raise Exception("graph contains a cycle")
    # Add the current node to the list of visited node to avoid cycles
    visited_nodes.append(node)
    # Recursively call the method with the child node of the current node
    return visit_graph(graph, graph.get(node), visited_nodes)

# "A" does not generate any cycle
print visit_graph(data, "A", [])

# Starting at "B" or "BF" will generate cycles
try:
    print visit_graph(data, "B", [])
except Exception, e:
    print e

try:
    print visit_graph(data, "BF", [])
except Exception, e:
    print e 
```

# thor - 与雷神互斥的选项

> ID：15586955
> 
> 赞同：2
> 
> 时间：2013-03-23T12:47:48.167
> 
> 标签：thor

有没有办法让 Thor 有两个互斥的选项？例如，我需要提供某物列表的选项。我可能有一个选项`-l ent1 ent2 ent3 ent67`，并且我可能有一个选项`-f`，我传递一个包含内容的文件`ent1 ent2 ent3 ent67`。这两个选项能否与 Thor 互斥而无需在方法中编写额外的处理代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-05T21:37:14.157

我还没有找到执行此操作的内置方法，但您可以通过自己的简单检查来完成它。这是一个执行您想要的操作的示例 Thor 命令。

```
desc "command", "A command that does something."
option :list, aliases: 'l', type: :array
option :file, aliases: 'f'
def list
  if options[:list] && options[:file]
    puts "Use only one, --list(-l) or --file(-f)"
    exit(0)
  end
  # Place the functions of the command here
end 
```

希望这可以帮助！

# mips - MIPS - 加载字行为

> ID：15586959
> 
> 赞同：0
> 
> 时间：2013-03-23T12:48:13.597
> 
> 标签：mips, spim

SO用户

我希望有人可以解释我在使用 SPIM 运行我的 MIPS 代码时遇到的行为。我正在实现一种加密算法，其中一个步骤是加载 64 位宽的加密密钥。例如，如果加密密钥是`0x123456789ABCDEF0`，我将通过以下方式声明它；

```
.data
    enc_key_lo: 0x78563412
    enc_key_hi: 0xF0DEBC9A 
```

现在，每当我`enc_key_lo`首先加载时，我都会检查是否遇到 a`0`以便我可以加载`enc_key_hi`. 以下是我的代码；

```
.text
la $a1, enc_key_lo
la $a2, enc_key_hi

load_lo:
    lbu $s0, 0($a1) 
    addi $a1, $a1, 1      
    beq $s0, $zero, load_hi  #If 0, then we need to load enc_key_hi
    j load_lo

load_hi:
    lbu $s1, 0($a2)
    addi $s2, $s2, 1
    /* DO SOME OPERATIONS ETC ETC */ 
```

当我运行代码时，我观察到寄存器`$s0`在循环的连续迭代中加载以下内容`load_lo`；

```
12, 34, 56, 78, 9A, BC, DE, F0 
```

我期待寄存器`$s0`在加载后加载为 0，`78`但它一直加载到`F0`. 因此，这违背了`load_hi`在代码中包含段的目的。我注意到，如果我注释掉了声明`enc_key_hi`，则`$s0`在加载`0`后加载 with `78`。

有人可以解释这种行为吗？亲切的问候。

# android - 如何在 Google TV 中实现 toast 覆盖

> ID：15586960
> 
> 赞同：1
> 
> 时间：2013-03-23T12:48:14.543
> 
> 标签：android, overlay, toast, google-tv

我正在为 Google TV 创建一个应用程序。我正在尝试在广播顶部创建自定义吐司覆盖。

我创建了自定义吐司，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/custom_toast_layout_id"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#FFF"
android:orientation="horizontal"
android:padding="5dp" >

<TextView
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:textColor="#000" />

</LinearLayout> 
```

并在 googleTV 应用程序的视图中实现它：

```
 LayoutInflater inflater = getLayoutInflater();

            View layout = inflater.inflate(R.layout.main,
            (ViewGroup) findViewById(R.id.custom_toast_layout_id));

            // Toast...
            Toast toast = new Toast(getApplicationContext());
            toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
            toast.setDuration(Toast.LENGTH_LONG);
            toast.setView(layout);
            toast.show(); 
```

我的问题是如何让这个应用程序在应用程序中显示正常的广播信息，以便我可以在观看时触发这个覆盖？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:14:22.540

以下是一些执行此操作的方法：

1.  您可以创建一个应用程序，用户每次想要在他们的直播中看到这种吐司之前都必须明确启动。该应用程序将有一个透明的活动，然后显示吐司或只是一个包含信息的视图。您的活动将阻止与广播的所有其他交互，例如更改频道。

2.  从服务中调用 toast 或透明活动。看看这个开源应用程序：[https ://github.com/entertailion/Overlay-for-GTV](https://github.com/entertailion/Overlay-for-GTV)

3.  除了 toast 或透明视图，您还可以使用 Android 支持的系统警报窗口将视图覆盖在任何其他活动之上。您需要在清单中添加“android.permission.SYSTEM_ALERT_WINDOW”，并且需要将窗口类型设置为“WindowManager.LayoutParams.TYPE_SYSTEM_ALERT”。

# seo - 锚点内的 H3 和 P 标签，对 SEO 有影响吗？

> ID：15586970
> 
> 赞同：0
> 
> 时间：2013-03-23T12:49:06.660
> 
> 标签：seo, anchor, article

我目前正在我们的工作网站上工作，只是一个简单的问题。

我正在列出文章，为了使每一篇文章都可点击，我将它们包含在一个锚点中。这是不好的做法吗？这会对SEO有什么影响吗？我google了一下，发现了不同的意见，没有明确的答案......

基本上这是我的结构：

```
<article id="article1">
  <a href="#linkToArticle" title="My Article Title">
    <h2>My Article Title</h2>
    <p>My article summary goes here</p>
  </a>
  <a class="button" href="#linkToArticle" title="My Article Title">
</article>

<article id="article2...... etc 
```

我们欢迎任何建议，如果有人可以解释一下为什么这会好/坏，我会很感激，所以我下次知道。

小号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:40:13.630

在 HTML5 中，它是[允许](http://www.w3.org/TR/html5/text-level-semantics.html#the-a-element)的。

因为您使用了分段元素（`article`在本例中），所以它不会对您的大纲造成问题。如果您省略 sectioning 元素，则链接的开头仍将在前一部分的范围内，这不是您想要在语义上表达的内容。

所以你的例子很好。（除了`a`带有 class 的元素`button`，因为它没有关闭，但我认为这是您的示例中的错误）。

一般来说，你不能说这是否会给搜索引擎带来问题，因为有无数的搜索引擎，它们的工作方式都不同。由于这在一段时间内是有效的标记，我们可以假设所有积极开发的搜索引擎都可以很好地处理这个问题。

可访问性也是如此。较旧的工具*可能*会遇到这个问题，但我敢打赌，大多数积极开发的工具都可以处理这个问题。在这里您可以找到一个较旧的屏幕阅读器测试：[HTML5 块链接测试](http://www.html5accessibility.com/tests/blocklink.html)。这篇博文可能也很有趣：[块级链接和可访问性](http://www.456bereastreet.com/archive/201109/block_level_links_and_accessibility/)

AFAIK 各种用户代理甚至在它有效之前就处理了这个标记，因为一些网络作者无论如何都使用这种模式。

# mysql - MySQL 数据未从表 VB.NET 中删除

> ID：15586972
> 
> 赞同：0
> 
> 时间：2013-03-23T12:49:13.190
> 
> 标签：mysql, vb.net

为什么这不会删除我的 MySQL 数据库中的数据！？

```
Private Sub Button4_Click(sender As System.Object, e As System.EventArgs) Handles Button4.Click

 Dim dbCon As MySqlConnection      
 Dim strQuery As String = ""           
 Dim SQLCmd As MySqlCommand            
 Dim DR As MySqlDataReader            
 Try               
 dbCon = New MySqlConnection("Server=Localhost;Database=myusers;Uid=root;Pwd=Mypassword")

        strQuery = "DELETE settings FROM settings WHERE user=" & Me.loginuser.Text
        '* FROM settings WHERE user = "Testuser"'
        SQLCmd = New MySqlCommand(strQuery, dbCon)

        ' OPEN THE DB AND KICKOFF THE QUERY 
        dbCon.Open()

        DR = SQLCmd.ExecuteReader

        While DR.Read
            req1.Text = "" And exlink.Text = ""
        End While

        ' DONE! Close DB
        DR.Close()
        dbCon.Close()
    Catch ex As Exception
        TextBox8.Text = ("Fail" & vbCrLf & vbCrLf & ex.Message)
    End Try 
```

这是我的数据库的图片：

![在此处输入图像描述](../Images/14be97250a0aa709b15effdfc3abf9f8.png)

**或者，我可以以某种方式使其替换数据库中已有的内容，在这种情况下，请帮助我。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:20:46.613

我将尝试以这种方式更改您的代码

```
Using con = New MySqlConnection("Server=.....")
     con.Open()
     Dim sqlText = "DELETE * FROM settings WHERE user = @ulogin"
     Using cmd = new MySqlCommand(sqlText, con)
        cmd.Parameters.AddWithValue("@ulogin",  Me.loginuser.Text)
        cmd.ExecuteNonQuery()
     End Using
End Using 
```

首先，不要使用字符串连接来创建命令文本以传递给数据库引擎。这样一来，您会冒[Sql Injections](https://stackoverflow.com/questions/332365/how-does-this-sql-injection-work)的风险，如果用户名包含单引号（即 O'Hara），您的代码将因语法错误而失败（日期格式、解析数字小数和其他全球化问题也会出现同样的问题）。相反，像上面代码中的参数化查询将避免所有这些问题。

在参数化查询中，查询文本不包含搜索条件或更新或插入数据的实际值。相反，它包含占位符（在我们的例子中，它称为@ulogin）。要在占位符位置插入的正确值是使用`MySqlParameter`添加到`MySqlCommand`. 在这种情况下，我使用了直接从值的数据类型派生正确数据类型的 AddWithValue 方法。因为`Me.loginuser.Text`是字符串值，所以该参数将被视为字符串值，替换不正确的单引号并删除通常用于挂载 Sql 注入攻击的无关字符。引擎将在执行时在占位符处插入正确的值来完成其余的工作

**编辑：**看到您对使用的 MySql 连接器的评论，我将尝试更新我的答案以显示 NET 1 的半等效版本。

```
Try
     Dim con As MySqlConnection = New MySqlConnection("Server=.....")
     con.Open()
     Dim sqlText as String = "DELETE * FROM settings WHERE user = @ulogin"
     Dim cmd As MySqlCommand = new MySqlCommand(sqlText, con)
     Dim par As MySqlParameter = New MySqlParameter("@ulogin", MySqlDbType.VarChar)
     par.Value = Me.loginuser.Text
     cmd.Parameters.Add(par)
     cmd.ExecuteNonQuery()
Finally
     con.Close()
End Try 
```

我不确定连接器 1.0.10 是否支持带`@`前缀的参数名称或仅支持`:`前缀

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:15:33.387

尝试

```
strQuery = "DELETE FROM settings " _
         & " WHERE user = '" & Me.loginuser.Text & "'" 
```

但如前所述，您应该使用参数化查询。如果您有一个名为 O'Brien 的用户，那么您的查询（如上所示）将因为嵌入的单引号而失败。当您使用 DELETE 时，您将删除整个记录，并且您已经在 FROM 子句中指定了表名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T12:52:32.267

我不认为你可以在 mysql 中使用双引号，我认为它只能使用单引号。尝试

```
Query = "DELETE * FROM settings WHERE user = '" & Me.loginuser.Text & "'" 
```

# android - 显示图像时ListView滚动滞后？

> ID：15586977
> 
> 赞同：1
> 
> 时间：2013-03-23T12:50:00.620
> 
> 标签：android, listview, scroll, lag

滚动时我的列表视图滞后。似乎延迟加载有效，但每次显示图像时都会发生延迟。

我正在使用在这里找到的 imageLoader [http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)这是我的适配器：

```
public class EventAdapter extends ArrayAdapter<Event>{
    public ListImageLoader imageLoader; 
    public DisplayImageOptions imgDispOpts;
    private ArrayList<Event> objects;

    public EventAdapter(Context context, int textViewResourceId, ArrayList<Event> objects,ListImageLoader imageLoader) {
        super(context, textViewResourceId, objects);
        this.objects = objects;
        this.imageLoader = imageLoader;
    }
    /*
     * we are overriding the getView method here - this is what defines how each
     * list item will look.
     */
        @SuppressLint("DefaultLocale")
        @Override
        public View getView(int position, View convertView, ViewGroup parent){
            Event event = objects.get(position);
            // assign the view we are converting to a local variable
            View v = convertView;
            ViewHolder holder;

            // first check to see if the view is null. if so, we have to inflate it.
            // to inflate it basically means to render, or show, the view.
            if (v == null) {
                LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = inflater.inflate(R.layout.list_row, null);
                System.out.println("new Viewholder");
                holder = new ViewHolder();
                holder.listTimeString = (TextView) v.findViewById(R.id.listTimeString);
                holder.date =(TextView) v.findViewById(R.id.Date);
                holder.title = (TextView) v.findViewById(R.id.title);
                holder.shortInfo = (TextView) v.findViewById(R.id.shortinfo);
                holder.ageIcon = (ImageView) v.findViewById(R.id.listAgeIcon);
                holder.thumb = (ImageView) v.findViewById(R.id.wideListImage);
                holder.header = (RelativeLayout) v.findViewById(R.id.headerLayout);
                holder.rowLayout = (RelativeLayout) v.findViewById(R.id.rowlayout);
                holder.listVenueIcon = (ImageView) v.findViewById(R.id.listVenueIcon);
                holder.eventRowLayout = (RelativeLayout) v.findViewById(R.id.eventrowlayout);
                v.setTag(holder);
            }
            else{
                holder = (ViewHolder) v.getTag();
            }
            /*
             * Recall that the variable position is sent in as an argument to this method.
             * The variable simply refers to the position of the current object in the list. (The ArrayAdapter
             * iterates through the list we sent it)
             * 
             * Therefore, i refers to the current Item object.
             */

            if (event != null) {

                // This is how you obtain a reference to the TextViews.
                // These TextViews are created in the XML files we defined.

                //SET FONTS
                Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "fonts/myriad.otf");
                holder.title.setTypeface(tf);
                holder.shortInfo.setTypeface(tf);
                Typeface tf2 = Typeface.createFromAsset(getContext().getAssets(),"fonts/agencyr.ttf");
                holder.date.setTypeface(tf2);
                // check to see if each individual textview is null
                // if not, assign some text!
                if(event.isBig()){
                    //holder.rowLayout.getLayoutParams().height=230;
                    holder.shortInfo.setHeight(80);
                    holder.shortInfo.setMaxLines(5);
                    holder.shortInfo.setText(event.getInfo());
                }
                else{
                    //holder.rowLayout.getLayoutParams().height=125;
                    //holder.listVenueIcon.setImageResource(R.drawable.ikon_bar);
                    holder.shortInfo.setHeight(16);
                    holder.shortInfo.setMaxLines(1);
                    holder.shortInfo.setText(event.getInfo());
                }
                if(event.isClub()){
                    holder.listVenueIcon.setImageResource(R.drawable.ikon_klubb);
                }
                else{
                    holder.listVenueIcon.setImageResource(R.drawable.ikon_bar);

                }
                if (event.isNewDay()){
                    holder.date.setText(event.getDay().toUpperCase());
                    holder.header.setVisibility(View.VISIBLE);
                } else{
                    holder.header.setVisibility(View.GONE);
                }
                if (holder.title != null){
                    holder.title.setText(event.getHost().toUpperCase());
                }
                if(holder.ageIcon!= null){
                    switch(Integer.parseInt(event.getAge())){
                    case(19):
                        holder.ageIcon.setImageResource(R.drawable.event_info_19);
                        break;

                    ...
                    more cases
                    ...

                    case(30):
                        holder.ageIcon.setImageResource(R.drawable.event_info_30);
                        break;
                    default:
                        holder.ageIcon.setImageResource(R.drawable.event_info_18);
                        break;
                    }
                }
                if(holder.thumb != null){
                    imageLoader.DisplayImage(event.getThumbURL(), holder.thumb);
                }
                if(holder.listTimeString != null){
                    String tempTimeString = event.getStartTime() + " - " + event.getEndTime(); 
                    holder.listTimeString.setText(tempTimeString);
                }
            }

            // the view must be returned to our activity
            return v;

        }
        static class ViewHolder{
            RelativeLayout eventRowLayout;
            TextView listTimeString;
            TextView date;
            TextView title;
            TextView shortInfo;
            ImageView ageIcon;
            ImageView thumb;
            RelativeLayout header;
            RelativeLayout rowLayout;
            ImageView listVenueIcon;
        }
} 
```

有任何想法吗？

编辑：我在 onCreate 异步加载 imageURL，这将是缓存图像的理想场所，你能看到如何使用链接中的 ImageLoader 来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T04:40:09.487

是的，通过使用内存缓存解决滞后。[您可以从这里](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)阅读原始帖子。

我已经实现了我的 EntryArrayAdapter，它使用内存缓存来防止滚动列表视图时缓慢和滞后。

```
public class EntryArrayAdapter extends ArrayAdapter<JSONObject> {
private final Context context;
private final ArrayList<JSONObject> values; 
private final LruCache<String, Bitmap> cache;

static class ViewHolder {
        public TextView title;
        public TextView city;
        public TextView outlet;
        public TextView service;
        public ImageView photo;
}

public EntryArrayAdapter(Context context, ArrayList<JSONObject> values) {
    super(context, R.layout.layout_list_item);
    this.context = context;
    this.values = values;

     final int maxMemory = (int) (Runtime.getRuntime().maxMemory() / 1024);

        // Use 1/8th of the available memory for this memory cache.
        final int cacheSize = maxMemory / 8;

        cache = new LruCache<String, Bitmap>(cacheSize) {
            @Override
            protected int sizeOf(String key, Bitmap bitmap) {
                // The cache size will be measured in kilobytes rather than
                // number of items.
                return bitmap.getRowBytes() / 1024;
            }
        };
}

/* (non-Javadoc)
 * @see android.widget.ArrayAdapter#getCount()
 */
@Override
public int getCount() {     
    return values != null ? values.size() : 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View rowView = convertView;
    ViewHolder holder;

    if (rowView == null) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        rowView = inflater.inflate(R.layout.layout_list_item, parent, false);
        // set references
        holder = new ViewHolder();

        holder.title = (TextView) rowView.findViewById(R.id.titleText);
        holder.city = (TextView) rowView.findViewById(R.id.cityText);
        holder.outlet = (TextView) rowView.findViewById(R.id.outletText);
        holder.service = (TextView) rowView.findViewById(R.id.visaMasterText);      
        holder.photo = (ImageView) rowView.findViewById(R.id.itemImage);
        rowView.setTag(holder);
    }
    else {
        holder = (ViewHolder) rowView.getTag();
    }

    try {
        JSONObject obj = values.get(position);

        Bitmap bmp = getBitmapFromMemCache(obj.getString("id"));
        if (bmp == null) {
            bmp = BitmapHelper.decodeSampledBitmapFromResource(obj.getString("photo"), 96, 96);        
            addBitmapToMemoryCache(obj.getString("id"), bmp);
        }

        holder.title.setText(obj.getString("title"));
        holder.city.setText(obj.getString("city"));
        holder.outlet.setText(obj.getString("outlet"));
        holder.service.setText(obj.getString("service"));           
        holder.photo.setImageBitmap(bmp);

    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return rowView;
}

public void addBitmapToMemoryCache(String key, Bitmap bitmap) {
    if (getBitmapFromMemCache(key) == null) {
        cache.put(key, bitmap);
    }
}

public Bitmap getBitmapFromMemCache(String key) {
    return cache.get(key);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T13:32:03.173

我通过在 ImageLoader.java 中创建和使用以下函数在后台缓存图像来解决它

```
public void cacheImage(String url){
    Bitmap bmp = getBitmap(url);
    memoryCache.put(url, bmp);
} 
```

我创建了一个 ImageLoader 实例，对其进行了静态引用，然后调用

AsyncClass.imageLoader.cacheImage(url);

其中 AsyncClass 是我对 ImageLoader 进行静态引用并将其称为“imageLoader”的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T13:48:32.503

我建议您使用[Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader) 进行异步图像加载、缓存和显示。

# html - 隐藏在 div 后面的 Wordpress 菜单下拉菜单

> ID：15586978
> 
> 赞同：1
> 
> 时间：2013-03-23T12:50:00.897
> 
> 标签：html, css, wordpress

我为 Wordpress 网站[http://www.bassetandbeagle.org/adoptionapplication/](http://www.bassetandbeagle.org/adoptionapplication/)创建了一个表单，并在 CSS 代码中放置了 div position: absolute，以便该表单可以在移动设备上缩放。

```
#formContainer {
min-width: 950px;
max-width: 950px;
padding: 10px;
position: absolute;
z-index: -1; } 
```

现在，表单上方的下拉菜单隐藏在其后面。

我尝试为菜单设置更高的 z-index：

```
.nav-menu{
position: relative;
z-index: 1; } 
```

但这并没有明显的效果。我尝试了 1, 100, 1000 ...... nada

通过将 .nav-menu 更改为 position: absolute，我能够让下拉菜单再次出现。不幸的是，这搞砸了页面上菜单的定位。

根据我读过的其他帖子，我很确定我在 z-index 属性的正确轨道上。那么，我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T13:47:29.943

这是您的问题的解决方案-

**CSS：**

**style.css 行：1431**

```
.site {
    margin: 0 auto;
    max-width: 68.5714rem;
    /*overflow: hidden;*/  /* remove this css rule and you will see the dropdown menu*/
} 
```

**注意：**检查您的站点，您的`.site`课程在哪里应用，并根据需要在 css 中进行更改。

**截屏：**

![在此处输入图像描述](../Images/c10db9f0afc16df813f9457b16385831.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:34:49.860

`position: absolute`从中删除`#formContainer`。

# actionscript-3 - 1180：调用可能未定义的方法 gotoAndPlay

> ID：15586981
> 
> 赞同：1
> 
> 时间：2013-03-23T12:50:07.253
> 
> 标签：actionscript-3, air

我有这个到目前为止工作的 AS3 脚本......

```
stop();

b1.addEventListener(MouseEvent.CLICK, Info001);
function Info001(event:MouseEvent):void {
gotoAndPlay(2);
}

X.addEventListener(MouseEvent.CLICK, Exit001);
function Exit001(e:MouseEvent) {
NativeApplication.nativeApplication.exit();
} 
```

然后，我在 .fla 文件中添加了一个类...

```
package
{
    import flash.system.System;
    import flash.system.Capabilities;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.desktop.NativeApplication;
    import flash.utils.setTimeout;
    import com.hdi.nativeExtensions.NativeAds;
    import com.hdi.nativeExtensions.NativeAdsEvent; 

    public class Main extends Sprite
    {       
        public var na : NativeApplication;
        private var admobId:String = 'a1514b5ef85e336';

        public function Main()      
        {
            na = NativeApplication.nativeApplication;
            na.addEventListener('exiting',exit,false,0,true);
            na.addEventListener('deactivate',exit,false,0,true);

            if ( stage ){
                stage.scaleMode = 'noScale';
                stage.align = 'TL';
            }           

            if ( loaderInfo ){
                loaderInfo.addEventListener( Event.INIT, init, false, 0, true );
            } else {
                init(null);
            }
        } 
```

（这里的课程不完整......）

按钮停止工作......：-/

我尝试添加

```
import flash.events.MouseEvent; 
```

但这还不够……你怎样才能让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:46:06.307

如果您尝试在 中运行`gotoAndPlay`，`Main`它会抛出该错误，因为`Sprite`s 没有时间线。如果是这样，请尝试扩展`MovieClip`。

# mysql - 每个项目的 MySQL 计数

> ID：15586988
> 
> 赞同：0
> 
> 时间：2013-03-23T12:51:15.480
> 
> 标签：mysql, sql

我目前正在尝试进行 mysql 查询，该查询将按以下方式计算每个项目的零和一的数量：表：

```
 ID    |    PollID    |    Value
------------------------------------
    1     |      1       |     1
    2     |      1       |     1
    3     |      2       |     0
    4     |      2       |     1
    5     |      1       |     0 
```

我想要的结果是：

```
 Poll    |    one    |    zero
----------------------------------
      1     |     2     |     1
      2     |     1     |     1 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:13:33.413

这是可能的最短答案，`MySQL`因为它支持布尔算术。

```
SELECT  PollID,
        SUM(value = 1) AS `One`,
        SUM(value = 0) AS `Zero`
FROM    tableName
GROUP   BY PollID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/36771/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:10:56.030

尝试这个

```
 select table.pollid,
      Switch(table.value Like 1, 1)AS one,
      Switch(table.value Like 0, 1)AS zero       
      from table
      group by pollid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T13:13:29.677

```
select z.pollid,z.ones,s.zeros 
  from (select a.pollid,count(a.value) as ones from test a
    where a.value=1
group by a.pollid) z   
left join   
    (select b.pollid,count(b.value) as zeros from test b  
     where b.value=0 group by b.pollid) s    
on z.pollid=s.pollid; 
```

# c# - 从外部更改表单的内容？

> ID：15586990
> 
> 赞同：0
> 
> 时间：2013-03-23T12:51:42.860
> 
> 标签：c#, winforms

我有一个名为 的表单`MyForm`，我想在程序执行过程中从类本身的外部编辑它的属性。

这是我得到的：

```
static void Main()
{
    MyForm main = new MyForm();
    main.ShowDialog();
    main.Text = "Hello";
} 
```

但是，它似乎`ShowDialog()`只是在我关闭表单之前冻结程序，所以`main.Text = "Hello";`在我关闭表单之前不会执行。

我也尝试过使用`main.Show()`，但它只是在我执行完`Main()`函数中的所有代码后关闭表单，所以文本`"Hello"`只会快速闪烁。

我需要它，以便我可以始终打开表单并在程序执行过程中从类本身外部更改它的控件。

我怎样才能做到这一点？我应该在不同的线程中运行表单还是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T12:57:17.397

这里有多个问题，您应该尝试一次专注于一个，所以让我突出显示这些问题。

1.  为什么我的程序在 Main 退出时关闭？
2.  显示表单时如何避免“冻结”程序？
3.  如何从其他地方访问表单的内容？

答案：

1.  这就是程序生命周期的设计。当主线程（运行 Main 方法）终止时，程序关闭。在此过程中，任何打开的表格都会关闭。解决方案是不允许 Main 退出，通常`Application.Run(main);`在您的情况下使用，显示表单并等待它关闭。
2.  您使用`Show`and not `ShowDialog`，但由于您没有其他形式保持程序打开，因此您的程序将关闭。Show 显示表单后返回，返回到程序正在执行的任何操作。在您的情况下，程序无事可做，因此终止。
3.  您需要将对表单的引用存储在程序的其余部分可以访问它的地方，您可以在某处使用静态字段/属性，或者您可以将表单传递给需要它的各个部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T13:10:44.693

首先，我不知道你的具体情况是什么。也许我的解决方案对您有好处，但如果不是，请尝试告诉我们您到底想要实现什么。

```
static void Main()
{
    var main = new MyForm();
    //Initialize a new thread with the `DoSomething()` method
    //and pass the form as a parameter
    var thread = new Thread(() => DoSomething(main)) {IsBackground = true};
    thread.Start();
    main.ShowDialog();
}

static void DoSomething(MyForm main) {
    //Update the form title
    main.Text = "Hello";
    //Wait one second
    Thread.Sleep(1000);
    //Update the form title again
    main.Text = "World";
} 
```

# java - 自定义组件和 ViewPager 的问题：“无法实例化活动 ComponentInfo”

> ID：15586991
> 
> 赞同：0
> 
> 时间：2013-03-23T12:51:47.983
> 
> 标签：java, android, android-viewpager

我正在尝试制作一个`SwipeMenu`. 我在一个小型测试项目中工作，但是当我尝试实现它时，出现以下错误：

```
03-23 13:47:04.210: D/AndroidRuntime(28825): Shutting down VM
03-23 13:47:04.210: W/dalvikvm(28825): threadid=1: thread exiting with uncaught exception (group=0x41ef02a0)
03-23 13:47:04.210: E/AndroidRuntime(28825): FATAL EXCEPTION: main
03-23 13:47:04.210: E/AndroidRuntime(28825): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.SverkerSbrg.Spendo/com.SverkerSbrg.Spendo.SwipeMenu}: java.lang.ClassNotFoundException: com.SverkerSbrg.Spendo.SwipeMenu
03-23 13:47:04.210: E/AndroidRuntime(28825):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2034)
03-23 13:47:04.210: E/AndroidRuntime(28825):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2135)
03-23 13:47:04.210: E/AndroidRuntime(28825):    at android.app.ActivityThread.access$700(ActivityThread.java:140)
03-23 13:47:04.210: E/AndroidRuntime(28825):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1237)
03-23 13:47:04.210: E/AndroidRuntime(28825):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-23 13:47:04.210: E/AndroidRuntime(28825):    at android.os.Looper.loop(Looper.java:137)
03-23 13:47:04.210: E/AndroidRuntime(28825):    at android.app.ActivityThread.main(ActivityThread.java:4921)
03-23 13:47:04.210: E/AndroidRuntime(28825):    at java.lang.reflect.Method.invokeNative(Native Method)
03-23 13:47:04.210: E/AndroidRuntime(28825):    at java.lang.reflect.Method.invoke(Method.java:511)
03-23 13:47:04.210: E/AndroidRuntime(28825):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)
03-23 13:47:04.210: E/AndroidRuntime(28825):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)
03-23 13:47:04.210: E/AndroidRuntime(28825):    at dalvik.system.NativeStart.main(Native Method)
03-23 13:47:04.210: E/AndroidRuntime(28825): Caused by: java.lang.ClassNotFoundException:     com.SverkerSbrg.Spendo.SwipeMenu
03-23 13:47:04.210: E/AndroidRuntime(28825):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
03-23 13:47:04.210: E/AndroidRuntime(28825):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
03-23 13:47:04.210: E/AndroidRuntime(28825):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
03-23 13:47:04.210: E/AndroidRuntime(28825):    at android.app.Instrumentation.newActivity(Instrumentation.java:1068)
03-23 13:47:04.210: E/AndroidRuntime(28825):    at         android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2025)
03-23 13:47:04.210: E/AndroidRuntime(28825):    ... 11 more 
```

这是我的课：

```
package com.SverkerSbrg.Spendo.Graphics;

import com.SverkerSbrg.Spendo.R;
import com.SverkerSbrg.Spendo.Graphics.TransactionList.*;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentStatePagerAdapter;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;

public class SwipeMenu extends FragmentActivity {

    private ViewPager mPager;
    private PagerAdapter mPagerAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.swipe_menu_layout);

        mPager = (ViewPager) findViewById(R.id.pager);
        mPagerAdapter = new ScreenSlidePagerAdapter(getSupportFragmentManager());
        mPager.setAdapter(mPagerAdapter);
    }

    @Override
    public void onBackPressed() {
        if (mPager.getCurrentItem() == 0) {
            // If the user is currently looking at the first step, allow the
            // system to handle the
            // Back button. This calls finish() on this activity and pops the
            // back stack.
            super.onBackPressed();
        } else {
            // Otherwise, select the previous step.
            mPager.setCurrentItem(mPager.getCurrentItem() - 1);
        }
    }

    private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {

        public ScreenSlidePagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            return new TransactionList();
        }

        @Override
        public int getCount() {
            return 2;
        }
    }
} 
```

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.SverkerSbrg.Spendo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.SverkerSbrg.Spendo.MainActivity"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name="com.SverkerSbrg.Spendo.Menu"
            android:label="@string/title_activity_menu" >
        </activity>
        <activity
            android:name="com.SverkerSbrg.Spendo.SwipeMenu"
            android:label="@string/title_activity_swipe_menu" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

非常感谢所有帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:55:36.723

**在你的清单上**

```
package="com.SverkerSbrg.Spendo" 
```

在你的活动课上

```
package com.SverkerSbrg.Spendo.Graphics; 
```

所以你必须保持相同的包名。

# dart - 我应该如何使用 Dart Isolate unhandledExceptionCallback？

> ID：15586992
> 
> 赞同：0
> 
> 时间：2013-03-23T12:51:51.727
> 
> 标签：dart, dart-isolates

我正在尝试在我的 Dart webapp 中使用 Isolates，但我似乎无法使错误回调参数起作用。我有一个在 Dartium 中运行的非常基本的代码。

```
import "dart:isolate";

void main() {
  print("Main.");
  spawnFunction(test, (IsolateUnhandledException e) {
    print(e);
  });
}

void test() {
  throw "Ooops.";
} 
```

除了“主要”之外，我从未见过任何东西。打印在控制台上。我做错了什么还是现在坏了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:58:17.517

错误回调将在新的隔离中执行。因此它不能是动态闭包，而需要是静态函数。

我还没有测试过，但这应该可以工作：

```
import "dart:isolate";

bool errorHandler(IsolateUnhandledException e) {
  print(e);
  return true;
}

void test() {
  throw "Ooops.";
}

void main() {
  // Make sure the program doesn't terminate immediately by keeping a
  // ReceivePort open. It will never stop now, but at least you should
  // see the error in the other isolate now.
  var port = new ReceivePort();
  print("Main.");
  spawnFunction(test, errorHandler);
} 
```

注意：在 dart2js 中这个特性还没有实现。旧版本只是忽略了这个论点。较新的版本将抛出 UnimplementedError。

# java - 为什么 String.equals() 比它自己快？

> ID：15586997
> 
> 赞同：17
> 
> 时间：2013-03-23T12:52:29.733
> 
> 标签：java, optimization

我试图创建一个更快版本的[String.equals()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)方法，并从简单地复制它开始。我发现的结果很混乱。当我运行复制粘贴版本、计时并将其与 JVM 比较时，JVM 版本更快。差异从 6 倍到 34 倍不等！简单地说，字符串越长，差异越大。

```
boolean equals(final char a[], final char b[]) {
    int n = a.length;
    int i = 0;

    while (n-- != 0) {
        if (a[i] != b[i]) return false;
        i++;
    }
    return true;
}

public static void main() throws Exception {
    String a = "blah balh balh";
    String b = "blah balh balb";

    long me = 0, jvm = 0;

    Field value = String.class.getDeclaredField("value");
    value.setAccessible(true);

    final char lhs[] = (char[]) value.get(a);
    final char rhs[] = (char[]) value.get(b);
    for (int i = 0; i < 100; i++) {
        long t = System.nanoTime();
        equals(lhs, rhs);
        t = System.nanoTime() - t;
        me += t;
    }

    for (int i = 0; i < 100; i++) {
        long t = System.nanoTime();
        a.equals(b);
        t = System.nanoTime() - t;
        jvm += t;
    }

    System.out.println("me  = " + me);
    System.out.println("jvm = " + jvm);
} 
```

输出：

```
me  = 258931
jvm = 14991 
```

我写的 equals() 方法是[String.equals()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)方法的复制粘贴版本。为什么 JVM 版本比它的复制粘贴版本快？效果不一样吗？

有人可以解释为什么我会看到如此明显的差异吗？

PS：如果您希望看到较大的差异，您可以创建长（真的，真的很长）字符串，最后只有一个字符不同。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-23T13:19:06.843

> 为什么 JVM 版本比复制粘贴的版本快。效果不一样吗？

令人惊讶的是，事实并非如此。

字符串比较是一种无处不在的操作，几乎可以肯定您的[JIT 编译器](http://en.wikipedia.org/wiki/Just-in-time_compilation)具有内在的 for `String.equals()`. 这意味着编译器知道如何生成特制的机器代码来比较字符串。当您使用`String.equals()`.

这可以解释为什么`String.equals()`比您的方法快得多，即使表面上它们看起来相同。

快速搜索会发现几个在 HotSpot 中提到这种内在特性的错误报告。例如，[7041100 ： String.equals 中的负载在 null check 之前执行](http://bugs.sun.com/view_bug.do?bug_id=7041100)。

可以在[此处](http://hg.openjdk.java.net/jdk7/hotspot-comp/hotspot/file/e6d7eed3330c/src/share/vm/opto/library_call.cpp)找到相关的 HotSpot 源。有问题的功能是：

```
 848 Node* LibraryCallKit::make_string_method_node(int opcode, Node* str1, Node* cnt1, Node* str2, Node* cnt2) { 
```

和

```
 943 bool LibraryCallKit::inline_string_equals() { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T13:40:15.707

Hotspot 允许开发人员在 Java 实现之外提供方法的本机实现。Java 代码在运行时被换出并替换为优化版本。它被称为内在。数百种来自基类的方法通过内在函数进行了优化。

通过查看 OpenJDK 源代码，您可以[看到 String.equals 的 x86_64 实现](https://github.com/openjdk-mirror/jdk7u-hotspot/blob/master/src/cpu/x86/vm/x86_64.ad#L10609)。您还可以查看[vmSymbols](https://github.com/openjdk-mirror/jdk7u-hotspot/blob/master/src/share/vm/classfile/vmSymbols.hpp)以获取所有内在函数的列表（搜索`do_intrinsic`）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-07-29T18:02:24.393

如您所知，**JAVA 确实既不是基于编译器也不是基于解释器的语言。我的意思是java同时使用编译器将源代码转换为中间形式，然后在运行时进行解释。**

它标记了执行的 LoC（代码行），以了解代码的哪一部分运行得更频繁。一旦 JAVA 找出运行超过给定阈值的代码部分，它就会将其标记为热并将这段代码发送给运行中的编译器，以便在下次请求时运行更好的优化版本。这被称为**JIT（即时）**

，因为这两个代码完全相似，JAVA HotSpot 应该优化这两个方法完全相同，因此执行时间相同。可悲的是，事实并非如此。

一旦 JIT 发现**equals()**方法很热并且被过于频繁地调用，它就会在硬件级别进行特殊优化。
是的，英特尔创建了一套全新的指令来加速文本处理代码。这意味着，有一个单独的指令可以使**Strings.equals()**方法比复制粘贴的 equals 方法更快。

现在的问题是这是如何发生的。好吧，这很简单，只要**String.equals()**是**温暖**的（即更频繁但不频繁地使用），编译器就会进行与复制粘贴方法相同的优化。但是随着**equal()**方法变**热**，JIT 直接使用**新的指令**集进行字符串比较，从而快速执行。