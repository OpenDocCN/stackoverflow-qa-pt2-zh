# StackOverflow 问答 12773000-12773999

# android - 如何找到左，右，顶，底视图

> ID：12773003
> 
> 赞同：0
> 
> 时间：2012-10-07T21:26:35.103
> 
> 标签：android, view, imageview, tablelayout, tablerow

我需要知道 TableLayout 场景中添加的每个视图的左、右、上、下（LRTB）视图，如下所示

TableLayout 有 3 个 TableRows
每个 TableRow 有 3 个 ImageViews
就像一个 3x3 的 ImageViews 矩阵

> XXXXXXXXX
> _
> _

我知道 TableLayout 和 TableRow 有一个名为 getChildAt(int index) 的方法，但是如何使用该方法或任何其他方法来查找每个视图的 LRTB 视图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T22:00:26.007

我猜你正在开发tick tac toe kinda 应用程序。所以基本上你需要一个包含 3 个 TableRow 的 TableLayout。每行将有 3 个子视图。所以如果你想获得 LRTB 视图，你可以调用这些方法——

```
View getLeft(View view){
    TableRow row = (TableRow) view.getParent();
    int pos = 0;
    for(int i = 0;i<3;i++){
       if(view == row.getChildAt(i)){
          pos = i;
          break;
       }
    }
    if(pos==0)
        return null;
    return row.getChildAt(pos-1);
}

View getRight(View view){
    TableRow row = (TableRow) view.getParent();
    int pos = 0;
    for(int i = 0;i<3;i++){
       if(view == row.getChildAt(i)){
          pos = i;
          break;
       }
    }
    if(pos==2)
        return null;
    return row.getChildAt(pos+1);
}

View getTop(View view){
    TableRow row = (TableRow) view.getParent();
    int rowPos = 0;
    for(int i = 0;i<3;i++){
        if(tableLayout.getChildAt(i)==row){
            rowPos=i;
        }
    }
    int pos = 0;
    for(int i = 0;i<3;i++){
       if(view == row.getChildAt(i)){
          pos = i;
          break;
       }
    }
    if(pos==0 || rowPos==0)
        return null;
    return tableLayout.getChildAt(rowPos-1).getChildAt(pos-1);
}

View getBottom(View view){
    TableRow row = (TableRow) view.getParent();
    int rowPos = 0;
    for(int i = 0;i<3;i++){
        if(tableLayout.getChildAt(i)==row){
            rowPos=i;
        }
    }
    int pos = 0;
    for(int i = 0;i<3;i++){
       if(view == row.getChildAt(i)){
          pos = i;
          break;
       }
    }
    if(pos==2 || rowPos==2)
        return null;
    return tableLayout.getChildAt(rowPos+1).getChildAt(pos+1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T21:55:02.903

您可以使用该`getChildAt()`方法来确定您的任何行的位置。这将涵盖获取左/右视图。您可以尝试使用 TableLayout 的 getChildAt 方法来查找行，但这可能比它的价值更麻烦。但是，为了让它更简单一点，您可以为每个 imageView 设置函数，例如

```
getTopLeft(){ 
    myTableLayout.getChildAt(0).getChildAt(0); 
}
getTopMiddle(){ 
    myTableLayout.getChildAt(0).getChildAt(1); 
}
getTopRight(){ 
    myTableLayout.getChildAt(0).getChildAt(2); 
} 
```

， ETC。

`getChildAt()`但是，使用正确的行命名（例如 row_top、row_middle、row_bottom）并使用另一行的方法来跟踪当前行上方/下方的行可能更简单。

但是，我应该注意，所有这些方法都要求您至少知道您正在查看的视图的位置。除非您知道给定视图在哪里，否则没有一个好方法可以知道哪个视图在给定视图之上。但老实说，不是从行中添加/删除 ImageViews，您可能会考虑只更改它们的可绘制对象，这样您就可以构建接收视图 ID 并返回上方、下方等视图的方法。

# c++ - 为什么我的“自制”openGL 3D 对象没有正确着色？

> ID：12773005
> 
> 赞同：-1
> 
> 时间：2012-10-07T21:26:40.030
> 
> 标签：c++, opengl, graphics, glut, glu

我正在尝试通过绘制顶点来制作一个 3D 方形平截头体：

```
int xPts[] = { 1.0,  1.0, -1.0, -1.0,  2.0,  2.0, -2.0, -2.0 };
int yPts[] = { 1.0,  1.0,  1.0,  1.0, -1.0, -1.0, -1.0, -1.0 };
int zPts[] = { 1.0, -1.0, -1.0,  1.0,  2.0, -2.0, -2.0,  2.0 };

int sideA[] = { 0, 3, 7, 4 };
int sideB[] = { 0, 1, 5, 4 };
int sideC[] = { 2, 3, 7, 6 };
int sideD[] = { 1, 2, 6, 5 };

glPolygonMode(GL_FRONT, GL_FILL);

glPushMatrix();
    glTranslatef(xLoc, yLoc, zLoc);

    glRotatef(xRotation, 1, 0, 0);
    glRotatef(yRotation, 0, 1, 0);
    glRotatef(zRotation, 0, 0, 1);

    glScalef(xSize, ySize, zSize);

    glBegin(GL_POLYGON);
        for (int i = 0; i < 4; i++) {
            glVertex3f(xPts[i], yPts[i], zPts[i]);
        }

        for (int i = 4; i < 8; i++) {
            glVertex3f(xPts[i], yPts[i], zPts[i]);
        }

        for (int i = 0; i < 4; i++) {
            glVertex3f(xPts[sideA[i]], yPts[sideA[i]], zPts[sideA[i]]);
        }

        for (int i = 0; i < 4; i++) {
            glVertex3f(xPts[sideB[i]], yPts[sideB[i]], zPts[sideB[i]]);
        }

        for (int i = 0; i < 4; i++) {
            glVertex3f(xPts[sideC[i]], yPts[sideC[i]], zPts[sideC[i]]);
        }

        for (int i = 0; i < 4; i++) {
            glVertex3f(xPts[sideD[i]], yPts[sideD[i]], zPts[sideD[i]]);
        }
    glEnd();
glPopMatrix(); 
```

这成功地绘制了一个方形平截头体，我可以毫无问题地旋转、缩放和平移它。但是，阴影已关闭。它应该是亮黄色，但所有侧面看起来都被均匀着色。你可以看到我的阴影一般适用于我所有其他可爱的形状。

我要建造我的方形平截头体是完全错误的吗？如何让阴影正确应用到它？

![在此处输入图像描述](../Images/1ab824cb18f4e82e6358f237c4b30099.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T21:51:01.180

您还需要使用 glNormal3f 设置法线，否则无法计算光照/阴影。在您的情况下计算这些的最简单方法是简单地计算六个平面中每个平面的两个相邻边的叉积。因此，如果您手头有一些向量数学库，则第一个法线的代码将如下所示：

```
Vector3f v1(xPts[0], yPts[0], zPts[0]);
Vector3f v2(xPts[1], yPts[1], zPts[1]);
Vector3f v3(xPts[2], yPts[2], zPts[2]);
Vector3f edge1 = v1 - v2;
Vector3f edge2 = v3 - v2;
Vector3f normal = edge2.cross(edge1).normalize();
glNormal3f(normal.x, normal.y, normal.z);
for (int i = 0; i < 4; i++)
  glVertex3f(xPts[i], yPts[i], zPts[i]);

// ... 
```

（当然你确实想把它放到一个函数中，而不是为所有六个多边形复制它......）

# java - 从 PHP 执行 Java Jar 文件

> ID：12773007
> 
> 赞同：2
> 
> 时间：2012-10-07T21:27:10.433
> 
> 标签：java, php, exec

不要责骂我，因为我在搜索答案时当然发现了关于这个主题的多个主题。尽管如此，我的问题似乎有所不同，因为我在 exec() 调用中根本没有得到任何响应。以下是一些信息：

*   我在 Apache 2.2.22 上运行 PHP 5.4.7 的 MacOS 上，并尝试从 Java 1.6.0_35 运行 jar 文件。
*   我可以执行简单的命令，如“ls -l”、“which java”或“pwd”，但是任何尝试调用 java - 甚至“/usr/bin/java -version”都会失败而没有任何响应；PHP 脚本在 exec() 调用后停止丢弃任何其他命令
*   我没有得到任何输出，既不是来自脚本本身，也不是任何错误日志。
*   我以任何可能的方式尝试了 exec、shell_exec、system，但没有成功。
*   我确保 Java 调用的每一部分，包括二进制文件、jar 文件等都存在，可以通过绝对路径访问；而且，当然，该命令在命令行上运行没有任何问题
*   调用本身看起来像这样 '/usr/bin/java -Djava.awt.headless=true -jar /Users/twolff/Projects//bin/java/net.adternity.utils.xml2xls/dist/net.adternity.utils .xml2xls.jar --input="/private/tmp/report_rUEsDe.xml" --output="/private/tmp/report_7o1lFb.xls"'。
*   我检查了 PHP 配置，但看不到任何错误（例如 disable_functions、safe_mode 等）
*   我没有使用 DYLIB 环境变量问题运行 MAMP

我现在迷路了，在哪里继续我的调查，如果有人能帮助我，我会很高兴。这是我在测试脚本中运行的代码：

```
try {
  $output = "";
  $return_val = 0;
  echo exec('/usr/bin/java -Djava.awt.headless=true -jar /Users/twolff/Projects/<project_name>/bin/java/net.adternity.utils.xml2xls/dist/net.adternity.utils.xml2xls.jar --input="/private/tmp/report_rUEsDe.xml" --output="/private/tmp/report_7o1lFb.xls"', $output, $return_val);
  echo "<br/>";
  echo serialize($output);
  echo "<br/>";
  echo $return_val;
  echo "<br/>";
} catch(Exception $e) {
  echo $e->getMessage();
  echo "<br/>";
}
echo "DONE"; 
```

同样，如果我只使用“which java”（或除 Java 本身之外的任何其他内容），我会得到如下输出：

```
/usr/bin/java
a:1:{i:0;s:13:"/usr/bin/java";}
0
DONE 
```

尝试运行 Java 应用程序不会返回任何内容，浏览器什么也不做。没有输出，没有错误日志。

感谢您查看这个。

托拜厄斯。

# java - 玩！2.0 覆盖“无效值”消息

> ID：12773009
> 
> 赞同：2
> 
> 时间：2012-10-07T21:27:21.240
> 
> 标签：java, validation, playframework-2.0, messages, ebean

> **可能重复：**
> [字段信息和错误的 i18n 消息 ID 是什么？](https://stackoverflow.com/questions/12582812/what-are-the-i18n-message-ids-for-field-infos-and-errors)

`@Required`使用类上的注释`@Entity`，可以轻松设置消息属性。但是如何设置/覆盖当 Double 类型的成员在表单上用字符串填充时显示的“无效值”消息？

-map 包含键“字段名称”和值“error.invalid”的`form.errors()`错误，但我无法确定要在消息文件中使用的正确键来覆盖默认消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T07:42:56.363

您必须在自己的文件中覆盖[源消息文件](https://github.com/playframework/playframework/blob/master/framework/src/play/src/main/resources/messages.default)`messages.xy`中的标签。

如果默认语言的文件没有 lang 扩展名，也请看一下[其他答案。](https://stackoverflow.com/questions/11263712/overriding-default-i18n-messages-for-play-2-0/11265036#11265036)AFAIK 它在那个答案之后得到了修复，但是如果你检查它并在评论中确认当前状态会很酷。

# opengl - 是否需要 glDisableClientState？

> ID：12773010
> 
> 赞同：4
> 
> 时间：2012-10-07T21:27:30.430
> 
> 标签：opengl

我遇到的用于渲染数组数据的每个示例都类似于以下代码，其中在您的绘图循环中，您首先调用 glEnableClientState 来获取您将使用的内容，然后在完成后调用 glDisableClientState：

```
void drawScene(void) {
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);

    glBindTexture(GL_TEXTURE_2D, texturePointerA);
    glTexCoordPointer(2, GL_FLOAT, 0,textureCoordA);
    glVertexPointer(3, GL_FLOAT, 0, verticesA);
    glDrawElements(GL_QUADS, numPointsDrawnA, GL_UNSIGNED_BYTE, drawIndicesA);

    glBindTexture(GL_TEXTURE_2D, texturePointerB);
    glTexCoordPointer(2, GL_FLOAT, 0,textureCoordB);
    glVertexPointer(3, GL_FLOAT, 0, verticesB);
    glDrawElements(GL_QUADS, numPointsDrawnB, GL_UNSIGNED_BYTE, drawIndicesB);

    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
    glDisableClientState(GL_VERTEX_ARRAY);
} 
```

在我的程序中，我总是使用纹理坐标和顶点数组，所以我认为每帧都启用和禁用它们是没有意义的。我将 glEnableClientState 移到循环之外，如下所示：

```
bool initGL(void) {
    //...
    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
}
void drawScene(void) {
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

    glBindTexture(GL_TEXTURE_2D, texturePointerA);
    glTexCoordPointer(2, GL_FLOAT, 0,textureCoordA);
    glVertexPointer(3, GL_FLOAT, 0, verticesA);
    glDrawElements(GL_QUADS, numPointsDrawnA, GL_UNSIGNED_BYTE, drawIndicesA);

    glBindTexture(GL_TEXTURE_2D, texturePointerB);
    glTexCoordPointer(2, GL_FLOAT, 0,textureCoordB);
    glVertexPointer(3, GL_FLOAT, 0, verticesB);
    glDrawElements(GL_QUADS, numPointsDrawnB, GL_UNSIGNED_BYTE, drawIndicesB);
} 
```

它似乎工作正常。我的问题是：

我需要在某处调用 glDisableClientState 吗？也许当程序关闭时？

另外，这样可以吗？由于其他人都启用和禁用每一帧，我是否缺少一些东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T21:34:35.177

一旦你设置了一些 OpenGL 状态，它就会保持设置状态。您无需在每次绘制时都设置它。

尽可能少地手动设置状态可能容易出错——这可能是很多人不这样做的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-07T21:39:46.857

好的性能和好的*例子*不一定是一回事。存在示例代码来向您展示如何做某事，以清楚地解释事情是如何工作的。好的示例向您展示了如何最大限度地减少代码中出现错误的机会。等等。

性能通常来自于做“有风险”的事情，但既然你做的一切都是正确的，它就会奏效。

最好设置当时需要的任何状态（在合理范围内），并在完成后取消设置该状态。这将把事情搞砸的可能性降到最低。但这可能是以牺牲一些性能为代价的。

再说一次，对于简单的启用/禁用，它可能不会。虽然坦率地说，您从客户端内存而不是缓冲区对象中提取顶点，并且您在`glDrawRangeElements`这样做时没有使用，这可能比一些额外的启用/禁用对性能的拖累更大。

简而言之：不用担心。

# javascript - 从父 div 获取 div 的 href

> ID：12773016
> 
> 赞同：-3
> 
> 时间：2012-10-07T21:28:14.000
> 
> 标签：javascript, jquery

我有一段代码基本上看起来像这样：

```
<div class="parent">
  <a href="#" class="link"></a>
    <div class="text"> Some plain text </div>
</div> 
```

现在我将一个 href 附加到`div.text`这样的位置：

```
$('div.text').each(function(){
    $(this).append('<a class="append" href="' + $(this).attr('href') + '"></a>');
});​ 
```

问题是我需要从`a.link`. 我如何上一层到那个href？显然 `'this'`行不通。我也不能用类名来调用它，因为有很多`a.link`而且它们也是动态创建的。我也不能使用“父母”或“父母”，由于某种原因，它在我的脚本中不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T21:29:55.183

`.parent()`将不起作用，因为该`a`元素是*兄弟*，而不是父元素。您可以[`.prev()`](http://api.jquery.com/prev/)改用：

```
$(this).append('<a class="append" href="' + $(this).prev().attr('href') + '"></a>'); 
```

该`.prev()`方法将返回前一个元素。如果要更改标记，还可以使用[`.prevAll(".link")`](http://api.jquery.com/prevAll/), 或[`.siblings(".link")`](http://api.jquery.com/siblings/).

# mysql - 无需访问 localhost/phpmyadmin 即可获取数据库

> ID：12773019
> 
> 赞同：1
> 
> 时间：2012-10-07T21:28:26.367
> 
> 标签：mysql, phpmyadmin, wamp

我有一个安装了 WAMP5 的硬盘。我的电脑死了，所以现在我将硬盘作为奴隶。我可以获取文件，但是 MySQL 数据库呢？我可以去某个地方`c:\wamp\`找到数据库 SQL 吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T06:22:56.503

你可以在这里找到你的数据库：`C:\wamp\bin\mysql\mysql(version)\data`

例如`...\mysql5.1.36\data`

# hibernate - Grails GORM 很少在域类中工作

> ID：12773020
> 
> 赞同：0
> 
> 时间：2012-10-07T21:28:38.483
> 
> 标签：hibernate, grails

我在用户和组织之间有多对多的关系。当用户被删除时，我想从他的所有组织中删除用户，所以这基本上是我想出的：

```
class User {
    ...

    def beforeDelete() {
        def user = User.get(id)
        Organization.all.each {
            it.removeFromMembers(user)
            it.save()
        }
    }
} 
```

这令人惊讶地不起作用，因为`User.get(id)`即使具有给定 id 的用户在数据库中也会返回 null，当我查看日志时，甚至没有执行任何 sql 语句。所以我尝试使用`load()`方法 insted。ObjectNotFoundException 就是结果。所以我尝试了这个，因为我非常绝望：

`def user = User.find("from User as u where u.id = ?", [1L])`

出于某种原因，这很有效。但是现在，带有`it.removeFromMembers(user)`throws NullPointerException 的行。

我试图把这个逻辑放在我的 UserController 中并且它有效！

为什么是这样？为什么我不能在域类中这样做？这使得`beforeDelete`钩子（以及所有其他的）非常无用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T23:56:51.633

好吧，首先一定要阅读有关删除事件的[文档。](http://grails.org/doc/latest/guide/GORM.html#eventsAutoTimestamping)您可以看到，要使任何更改实际反映在数据库中，您需要一个新会话，并且由于在事件内部您已经在处理要删除的当前对象，因此您不需要调用该`get()`方法：

```
def beforeDelete() {
  User.withNewSession {
     organizations.each{ org -> 
        org.removeFromMembers(this)
     }
     this.save()
  }
} 
```

（以上代码未经测试）

您在方法中有 null 的原因`get()`是因为`id`在触发事件时不存在。如果要访问 id，则必须从当前对象中检索它：`this.id`

# c - 实现一个简单的 linux shell 的问题

> ID：12773027
> 
> 赞同：1
> 
> 时间：2012-10-07T21:29:13.177
> 
> 标签：c, shell, operating-system

几个小时以来，我一直在为这个简单的 linux shell 苦苦挣扎，但由于某种原因，我无法让最基本的东西正常工作。我处理输入或其他东西的方式严重搞砸了，因为这个 shell 不能工作的一个例子是 mkdir 命令。它不会随机创建一个我从未尝试创建的随机目录，并且每次我创建一个目录时，它都会设法创建一些其他具有随机名称的目录，我显然没有创建。有些事情搞砸了，我只是不知道，因为我一直在输出我的最终参数数组，从那里看起来很好。有人可以帮我看看这个。

```
#include<stdlib.h>
#include<stdio.h>
#include<sys/types.h>
#include<string.h>
#include<unistd.h>
#include<sys/wait.h>

int main(int argc, char *argv[]){
while(1){
    char line[100], *temp, *split[15];
    int child_id;
    printf("$ ");
    fgets(line, sizeof(line), stdin);
    line[strlen(line)-1] = '\0';

    temp = strtok(line, " ");
    int i = 0;
    while(temp != NULL){
        split[i] = temp;
        temp = strtok(NULL, " ");
        i++;
    }

    char *args[i];
    int j;
    for(j = 0; j < i; j++){
        args[j] = split[j];
        printf("%s\n", args[j]);
    }
    child_id = fork();
    if(child_id == 0){
        execvp(args[0], args);
        exit(0);
    }else{
        wait(&child_id);
    }

  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T21:33:24.280

使用时`execvp()`，数组的最后一个元素`args`必须是`NULL`（这告诉内核命令行参数列表的结束位置）。

您应该可以通过`split[i] = NULL;`在`strtok()`循环之后添加来做到这一点（哦，不需要`args`像上面评论中提到的那样将数组复制到，只需使用`split`）。

# android - ProGuard：找不到引用的类（到 R.java）

> ID：12773031
> 
> 赞同：2
> 
> 时间：2012-10-07T21:29:28.613
> 
> 标签：android, proguard, android-library

我有一个引用库 Android 项目的 Android 应用程序。该设置基本上可以正常工作（作为 Eclipse 中的调试版本）。但是，当我尝试导出主应用程序的签名发布 apk 并在 project.properties 中启用 ProGuard 时，导出失败。

问题似乎是 ProGuard 找不到引用库项目的资源类 R.java，因为所有警告都抱怨该库项目的 R$string、R$layout 等。

我正在使用 Android 的默认 proguard.cfg 文件。
在这种情况下我需要做任何改变吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:35:23.303

我确实必须在 proguard.cfg 文件中使用 -libraryjars 开关包含库项目源文件夹的路径。

# java - 如何让 Eclipse 识别 Java 编译器 (1.6) 和项目方面 (1\. 6) 实际上在 GAE 项目中匹配？

> ID：12773035
> 
> 赞同：0
> 
> 时间：2012-10-07T21:30:29.047
> 
> 标签：java, eclipse, google-app-engine, gwt

我使用的是 Eclipse 4.2 版，我安装了 GWT 插件，并创建了一个新的 Web 应用程序项目并启用了 GAE 和 GWT。我收到一条错误消息，指出“Java 编译器级别与安装的 Java 项目方面的版本不匹配”。我将编译器级别设置为 1.6。我的 eclipse 版本似乎没有在 UI 中更改构面版本的选项（即选择项目属性，构面左侧没有选项...），所以经过一番搜索，我发现 org.eclipse.wst。 common.project.facet.core.xml 文件可以编辑（在我的 project/.settings/ 文件夹下），所以我进去并将“版本”更改为“1.6” 重建项目，关闭并重新打开 eclipse 十亿次，并且尝试更改每个设置并搜索“1.7”的每个实例 在项目中，我可以确保 Java 1.6 被用于一切，但我仍然收到一个错误，指出编译器级别和安装的 Java 项目方面不匹配。我搜了又搜，大部分帖子都倾向于推荐去项目、属性和选择左侧的项目方面。这不会出现，并且我已更改 .settings 中的文件以指示 1.6（我已关闭并重新打开几次以确认已保存，并重建项目以确保它知道已更改）。请帮忙！哦，我使用的是 Windows 7。并且我已更改 .settings 中的文件以指示 1.6（我已关闭并重新打开几次以确认已保存，并重建项目以确保它知道已更改）。请帮忙！哦，我使用的是 Windows 7。并且我已更改 .settings 中的文件以指示 1.6（我已关闭并重新打开几次以确认已保存，并重建项目以确保它知道已更改）。请帮忙！哦，我使用的是 Windows 7。

我的系统上安装了 Java 6 (JDK 1.6)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T00:23:11.770

也许您的系统上只安装了 java JDK 1.7，需要安装 JDK 1.6

**Appengine 仅与 java SDK 1.6 兼容**。你可以[在这里下载。](http://www.oracle.com/technetwork/java/javase/downloads/jdk6u35-downloads-1836443.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T00:46:33.370

首先为 eclipse 安装 webtools 将[J2EE 安装到现有的 eclipse IDE中](https://stackoverflow.com/questions/7170694/installing-j2ee-into-existing-eclipse-ide)

现在，您的项目属性中将拥有项目方面

检查您是否拥有正确的 java 版本，它将构建

# c - 使用 libevent 在 C 中的 TCP 端口事件回调

> ID：12773036
> 
> 赞同：2
> 
> 时间：2012-10-07T21:30:33.930
> 
> 标签：c, tcp, libevent

长话短说，我在 C 中实现了一个混合网络。为此，我创建了几个单独的守护进程，它们侦听一段 TCP 端口（比如 31001-31008），在这些端口上接收数据并将其放入到一个缓冲区（比如 TCP 端口 31002 --> char *data[2]），然后最终将数据写到另一组端口（比如 51001-51008）到列表中的下一个守护进程。

有了这个，这就是我的困惑！我在这里和其他地方做了很多阅读，并决定最简单的方法是使用 libevent2。我基本上是从这个开始的（在页面底部）：[http](http://www.wangafu.net/~nickm/libevent-book/Ref8_listener.html) ://www.wangafu.net/~nickm/libevent-book/Ref8_listener.html ...除了我打开 8 个端口而不是 1 个。

问题：我已经阅读了手册，但我对如何确定数据来自哪个端口有点困惑。例如，如果我在端口 31004 上接收数据，我想知道将其写入数据 [4]。

我想过为我打开的每个端口创建一个不同的回调，但这变得很难看。有没有更简单的方法？

这是我想要完成的一些伪代码，请随时提出建议！我也考虑过用 python 之类的东西来做这件事，但似乎 python 在事件方面也有同样的问题。

```
define baseport 31000
define numports 8

public char *data[numports];

callback:
    /* a connection was made */
    received_data = recv(blah)

    databin = port_received_on % baseport
    ////// How do i know what port it was received on? /////
    strncpy(data[databin], received_data, sizeof(data[databin]));

main:
    for (i = 1; i <= numports; i++)
            data[i] = malloc 

    struct event_base *base;
    //setup base event, etc.

    for (int i = 1; i <= numports; i++) {
            //setup localhost connection, open 8 ports
            sin.sin_port = htons(baseport + i);

    //configure listener with callback to "callback"
    }

    dispatch 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T05:49:22.063

您可以为每个端口使用一个回调，但该回调仅充当代理调用具有正确数组索引的*真实回调。*

它甚至可以通过宏实现自动化：

```
#define DEF_CALLBACK(idx)      \
    void callback_ ## idx()    \
    {                          \
        real_callback(idx);    \
    }

void real_callback(int idx)
{
    /* ... */
}

DEF_CALLBACK(1)
DEF_CALLBACK(2)
/* etc. */ 
```

现在您有了*真正的*回调函数`real_callback`以及一组名为 , 等的`callback_1`函数`callback_2`。

# asp.net-mvc - ViewBag 访问性能

> ID：12773041
> 
> 赞同：3
> 
> 时间：2012-10-07T21:31:24.267
> 
> 标签：asp.net-mvc, razor, viewbag

在从 ViewBag 多次访问相同值的 View 中，将此值存储在局部变量中而不是频繁访问 ViewBag 对象更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T17:03:58.470

`ViewBag`只是一个动态包装器`ViewData`。因此，当您编写时，`ViewBag.Foo`您基本上是在查询`ViewData["Foo"]`. 但由于这是在运行时完成的动态解析，因此显然需要付出代价。这个成本是你不应该担心的，因为它很小，不会显着影响应用程序的性能，而且我不会费心将结果缓存到局部变量中。

我会烦恼的是 ViewBag 的使用，如果使用视图模型，我肯定会摆脱它。因此，您将拥有一个 Foo 属性的视图模型，而不是编写`@ViewBag.Foo`，而在您的视图中，您只需使用它 - `@Model.Foo`. 如您所知，调用属性获取器将非常快。它不仅会很快，而且您将受益于强大的打字和智能感知。

# css - CSS 打印样式表 - 示例

> ID：12773044
> 
> 赞同：5
> 
> 时间：2012-10-07T21:31:52.013
> 
> 标签：css

尝试了解如何有效地使用 print.css，以便图形和导航元素不会显示在打印预览/打印中。阅读一些文章，以及 html5 样板的 print css 的一部分。两个站点，它们在打印过程中改变外观的方式令人印象深刻，它们是

[http://css-tricks.com/](http://css-tricks.com/)

[http://bottlerocketcreative.com/](http://bottlerocketcreative.com/)

但我看不到与打印相关的 css。您能否指出他们用来学习如何进行类似转换的 css。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T22:01:37.583

我查看了您链接到的网站，它们似乎没有任何与之相关的打印样式。我相信他们正在使用浏览器的默认打印设置。因此，最大的变化之一是默认隐藏背景图像。对于 CSS-Tricks，它看起来如此不同的原因是因为它使用了媒体查询。因此，如果您将浏览器缩小到 800 像素或更小，您将看到帖子列表扩展到浏览器的整个宽度，就像在打印文档时一样。

但是一般来说，打印样式要么使用现有样式表中的媒体标签进行设置：

```
@media print{
    /*styles here*/
} 
```

或链接到专门用于打印目的的样式表：

```
<!--These styles styles are only for screens as set by the media value-->
<link rel="stylesheet" href="css/main.css" media="screen">

<!--These styles styles are only for print as set by the media value-->
<link rel="stylesheet" href="css/print.css" media="print"> 
```

# java - 如何在 Eclipse 项目中添加 .dylib 文件？

> ID：12773048
> 
> 赞同：2
> 
> 时间：2012-10-07T21:32:37.710
> 
> 标签：java, eclipse, macos

它与添加 .jar 文件的过程相同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-26T08:29:38.303

不，您需要在您的方法中加载此 .dylib。System.load(System.getProperty("user.dir")+"/opencvlibs/libopencv_java310.dylib"); 假设 libopencv_java310.dylib 已经添加了项目目录。

或者你可以保留一些路径，即/opt。将以下代码放入您的方法 System.load("/opt/opencvlibs/libopencv_java310.dylib");

# ios - ios - 编译错误：重新定义标签 openURL

> ID：12773050
> 
> 赞同：0
> 
> 时间：2012-10-07T21:32:45.663
> 
> 标签：ios, ios5

我有这样的方法：

```
- (BOOL)webView:(UIWebView *)aWebView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{        
    if ([request.URL.scheme isEqualToString:@"aaa"]) 
        openURL:[NSURL URLWithString:@"www.firstwebsite.com"];

    if ([request.URL.scheme isEqualToString:@"abc"]) 
        openURL:[NSURL URLWithString:@"http://www.someurl.com"];

    if ([request.URL.scheme isEqualToString:@"xyz"]) 
        openURL:[NSURL URLWithString:@"http://www.anothersite.com"];

    return YES;
} 
```

在 openURL 的第二次和第三次使用时，我得到一个编译错误：`redefinition of label openURL`

知道为什么会发生这种情况以及如何解决吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T21:35:27.593

这是因为您应该使用 " `UIApplication`" 方法[`openURL:`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/openURL%3a)。

换句话说，而不是这样做：

```
openURL:[NSURL URLWithString:@"http://www.anothersite.com"]; 
```

做

```
[[UIApplication sharedApplication] openURL: [NSURL URLWithString:@"http://www.anothersite.com"]]; 
```

# java - 如何在Java中设置数组对象的值

> ID：12773054
> 
> 赞同：-2
> 
> 时间：2012-10-07T21:33:13.790
> 
> 标签：java, arrays, matrix

例如我有一个矩阵：

```
c1  c2  c3
1       2 
```

matrix[0][1] 的值为空，我得到了输出`null`，我想设置 matrix[0][1] 的值（字符串），`n/a`我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T21:51:52.170

可能你需要这个：

```
if (matrix[0][1] == null)
{
    matrix[0][1] = 'n/a';
} 
```

此条件仅适用于一个索引。将上述条件放在一个循环中并针对矩阵的所有索引运行它。在一天结束时，您的矩阵的空值将被替换为“n/a”

# php - wordpress 在特定类别中显示帖子

> ID：12773055
> 
> 赞同：0
> 
> 时间：2012-10-07T21:33:16.457
> 
> 标签：php, html, wordpress

我在下面有这个 php 代码，用于显示特定类别的帖子。

```
<ul id="sliderx">
<?php query_posts('category_name=slideshow&showposts=10');
while (have_posts()) : the_post();
echo "<li>".the_content()."</li>";
endwhile;?>
</ul> 
```

如您所见，它在类别幻灯片中显示这些帖子，其结构应该是这样的。

```
<ul id="sliderx">
<li>the post 1</li>
<li>the post 2</li>
<li>the post 3</li>
</ul> 
```

但生成的输出是这样的。

```
<ul id="sliderx">
<p>three</p>
<li></li><p>two</p>
<li></li><p>one</p>
<li></li>
</ul> 
```

并且生成的结构不应该看起来像那样，而且看起来很讨厌，所以我在如何正确显示它时遇到了问题，就像显示在这个结构中一样。

```
<ul id="sliderx">
<li>the post 1</li>
<li>the post 2</li>
<li>the post 3</li>
</ul> 
```

所以我想知道是否有人可以告诉我如何解决这个问题。

我愿意接受任何建议、建议和建议。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T21:41:39.430

发生这种情况是因为 the_content() 已经包含一个回声。PHP 尝试在将字符串发送到 echo 命令之前创建字符串。在评估字符串时，内容将被打印出来。然后 echo 获取尚未打印的内容： li 标签。

所以简单的解决方法是：

```
echo '<li>';
the_content();
echo '</li>'; 
```

它有效并符合我的愿望。

:)

# mysql - MySQL 在 WHERE 子句中聚合？

> ID：12773059
> 
> 赞同：2
> 
> 时间：2012-10-07T21:33:31.130
> 
> 标签：mysql

我有以下数据库架构：

```
Customer(ssn, name, gender, city)
Vehicle(vin, make, model, year)
BuyVehicle(bvssn, bvvin, price, year) 
```

`BuyVehicle.bvvin`外键从哪里来，`Vehicle.vin`是`BuyVehicle.bvssn`外键从哪里来`Customer.ssn`。我正在尝试选择以高于该特定车辆平均价格的价格购买车辆的人的姓名。

到目前为止，我已经确定了如何计算车辆的平均值：

```
SELECT AVG(price) as avg_price, v.maker, v.model, v.year FROM BuyVehicle bv, Vehicle v, Customer c WHERE v.vin = bv.BVVIN AND c.ssn = bv.bvssn GROUP BY maker, model, year; 
```

我试图在子句中输入一个`price > avg_price`条件：`WHERE`

```
SELECT AVG(price) as avg_price, v.maker, v.model, v.year FROM BuyVehicle bv, Vehicle v, Customer c WHERE v.vin = bv.BVVIN AND c.ssn = bv.bvssn AND bv.price > avg_price GROUP BY maker, model, year; 
```

但 MySQL 告诉我该`avg_price`列不存在。我对这个问题采取了错误的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T21:36:54.393

您需要使用：

```
SELECT AVG(price) as avg_price, v.maker, v.model, v.year, bv.price 
FROM BuyVehicle bv, Vehicle v, Customer c WHERE v.vin = bv.BVVIN AND c.ssn = bv.bvssn
GROUP BY maker, model, year
having bv.price > avg_price 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T21:39:54.117

使用聚合时，您需要使用一个名为“HAVING”的单独子句，该子句在 group by 之后，但看起来您尝试编写的查询实际上比这更复杂。

你想在结果中看到什么？

我怀疑你需要用平均值对子查询做一个 where 来得到我猜你想要的东西

# c++ - C++11：thread_local 还是 OpenCL 1.2 cl_kernel 对象数组？

> ID：12773067
> 
> 赞同：2
> 
> 时间：2012-10-07T21:35:22.907
> 
> 标签：c++, c++11, opencl, gcc4.7

我需要在主机中并行运行几个 C++11 线程（GCC 4.7.1）。他们每个人都需要使用一个设备，比如 GPU。根据 OpenCL 1.2 规范（第 357 页）：

```
All OpenCL API calls are thread-safe75 except clSetKernelArg. 
clSetKernelArg is safe to call from any host thread, and is safe
to call re-entrantly so long as concurrent calls operate on different
cl_kernel objects. However, the behavior of the cl_kernel object is
undefined if clSetKernelArg is called from multiple host threads on
the same cl_kernel object at the same time. 
```

一种优雅的方法是使用 thread_local cl_kernel 对象，而我能想到的另一种方法是使用这些对象的数组，以便第 i 个线程使用第 i 个对象。由于我之前没有实现这些，我想知道这两者中的任何一个是否很好，或者是否有更好的方法来完成任务。

第三种方法可能是对单个 cl_object 使用互斥体并将其与事件处理程序相关联。然后线程可以等到事件完成。不确定这是否适用于多线程情况......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T00:15:49.410

主要问题是所有这些线程是否需要使用相同的内核，或者是否每个线程都有自己不同的内核。您使用 thread_local cl_kernel 对象或 n 个内核对象数组的想法都会导致创建 n 个内核对象，并且从 OpenCL 的角度来看同样好。但是，如果它们都包含相同的代码，那么您将不必要地浪费空间/导致上下文切换/混乱缓存/......并且可以与将应用程序二进制文件多次加载到内存中而不共享恒定的二进制代码段相媲美。

如果您确实想在多个线程中使用相同的内核，那么我建议您对单个 cl_kernel 对象执行手动同步。如果您不希望您的线程阻塞等待直到其他线程完成它们的工作，您可以使用异步命令队列和事件在特定线程的工作完成后得到通知（以防止线程比 GPU 更快地排队工作可以处理它或读回结果当然）。

如果您的线程要执行不同的内核程序，那么我建议为每个线程创建一个单独的命令队列以简化执行。如果您选择将这些对象句柄存储在线程本地存储、全局数组或其他地方，这完全取决于您吗？

# python - 如何防止 ImageChops.offset 包装数据？

> ID：12773073
> 
> 赞同：3
> 
> 时间：2012-10-07T21:35:55.760
> 
> 标签：python, image, python-imaging-library

我正在尝试使用 imagechops.offset 对前景图像进行基本滚动。唯一的问题是，我的教授不希望滚动的数据被换行（屏幕外“推送”的数据不应该在另一边返回）。

有没有办法用 imagechops 做到这一点，或者我应该继续使用数组操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:38:46.273

不能单独使用 ImageChops 完成，但您也不需要数组操作（不在您的代码中）。您可以结合`ImageChops.offset`如下`paste`：

```
from PIL import Image, ImageChops

x = Image.open('input.png')
width, height = x.size
c = ImageChops.offset(x, 10, 20)
c.paste((255, 255, 255), (0, 0, 10, height))
c.paste((255, 255, 255), (0, 0, width, 20))
c.save('output.png') 
```

此示例假设您想用某种颜色填充包裹区域。

# iphone - 在 setimage 上收到内存警告

> ID：12773074
> 
> 赞同：3
> 
> 时间：2012-10-07T21:35:59.690
> 
> 标签：iphone, ios, xcode, ipad, ios5

这个问题彻底难倒了我。这适用于带有 Xcode 4.2 的 iOS 5.0

发生的事情是，在我的应用程序中，我让用户从他们的相册中选择图像并将这些图像保存到应用程序文档目录中。很直接。

然后我要做的是在其中一个 viewController.m 文件中创建多个 UIImageViews，然后从用户从应用程序目录中选择的图片之一设置图像视图的图像。问题是，经过一定数量的 UIImage 集后，我收到“收到内存警告”。它通常发生在有 10 张图片时。如果假设用户选择了 11 张图片，则应用程序会因错误 (GBC) 而崩溃。注意：这些图像中的每一个至少为 2.5 MB。

经过数小时的测试，我终于将问题缩小到这行代码

```
[button1AImgVw setImage:image]; 
```

如果我注释掉该代码。所有编译都很好，没有发生内存错误。但是，如果我不注释掉该代码，我会收到内存错误并最终崩溃。另请注意，它确实处理了整个 CreateViews IBAction，但最终仍会崩溃。因为我在 iOS 5.0 和 Xcode 4.2 上运行它，所以我不能做 release 或 dealloc

这是我使用的代码。谁能告诉我我做错了什么？

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self CreateViews];
}

-(IBAction) CreateViews
{
    paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask ,YES);
    documentsPath = [paths objectAtIndex:0]; 

    //here 15 is for testing purposes    
    for (int i = 0; i < 15; i++) 
    {    
        //Lets not get bogged down here. The problem is not here
        UIImageView *button1AImgVw = [[UIImageView alloc] initWithFrame:CGRectMake(10*i, 10, 10, 10)];
        [self.view addSubview:button1AImgVw];

        NSMutableString *picStr1a = [[NSMutableString alloc] init];
        NSString *dataFile1a = [[NSString alloc] init];

        picStr1a = [NSMutableString stringWithFormat:@"%d.jpg", i];
        dataFile1a = [documentsPath stringByAppendingPathComponent:picStr1a];
        NSData *potraitImgData1a =[[NSData alloc] initWithContentsOfFile:dataFile1a];
        UIImage *image = [[UIImage alloc] initWithData:potraitImgData1a];

        // This is causing my app to crash if I load more than 10 images!
    //  [button1AImgVw setImage:image];

//If I change this code to a static image. That works too without any memory problem.
button1AImgVw.image = [UIImage imageNamed:@"mark-yes.png"]; // this image is less than 100KB
        }

        NSLog(@"It went to END!");

    } 
```

这是我在选择 10 张图像时得到的错误。应用程序确实启动并工作

```
2012-10-07 17:12:51.483 ABC-APP[7548:707] It went to END!
2012-10-07 17:12:51.483 ABC-APP [7531:707] Received memory warning. 
```

当有 11 张图片时，应用程序崩溃并出现此错误

```
2012-10-07 17:30:26.339 ABC-APP[7548:707] It went to END!
(gbc) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T21:45:18.203

在我的 iOS 编程生涯中，这种情况（尝试将多个全分辨率 UIImage 加载到视图中时出现内存警告和应用程序退出）曾多次让我感到痛苦。

在执行“ ”调用之前，您需要制作原始图像的*缩小*副本。`setImage`

对于我自己的代码，我使用“ `UIImage+Resize`”类别，[可以在此处找到详细信息](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)。

在插入视图之前将图像调整为更小的尺寸，然后确保释放全分辨率图像（或者如果在 ARC 上设置为 nil），您应该有更快乐的时间。

以下是我在自己的代码中的操作方式：

```
CGSize buttonSize = CGSizeMake(width, height);
// it'd be nice if UIImage took a file URL, huh?
UIImage * newImage = [[UIImage alloc] initWithContentsOfFile: pathToImage];
if(newImage)
{
    // this "resizedimage" image is what you want to pass to setImage
    UIImage * resizedImage = [newImage resizedImage: buttonSize interpolationQuality: kCGInterpolationLow];
} 
```

# ruby - 处理 Spree 示例图像时出错 - 回形针geometry.rb:29 中的识别命令无法识别文件

> ID：12773075
> 
> 赞同：0
> 
> 时间：2012-10-07T21:36:02.603
> 
> 标签：ruby, imagemagick, paperclip, ruby-on-rails-3.2, spree

运行 Spree 示例数据时出现错误。当 Spree 尝试加载产品数据，特别是产品图像时，就会发生这种情况。这是我得到的错误：

```
* Execute db:load_file
loading ruby <GEM DIR>/sample/lib/tasks/../../db/sample/spree/products.rb
-- Processing image: ror_tote.jpeg
rake aborted!
/var/folders/91/63kgbtds2czgp0skw3f8190r0000gn/T/ror_tote.jpeg20121007-21549-2rktq1 is not recognized by the 'identify' command.
<GEM DIR>/paperclip-2.7.1/lib/paperclip/geometry.rb:31:in `from_file'
<GEM DIR>/spree/core/app/models/spree/image.rb:35:in `find_dimensions' 
```

我已经确保 ImageMagick 安装正确，就像以前我遇到的问题一样。这是直接运行 identify 命令时得到的输出。

```
$ identify
Version: ImageMagick 6.7.7-6 2012-10-06 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2012 ImageMagick Studio LLC
Features:  OpenCL 
... other usage info omitted ... 
```

我还将 pry 与 pry-debugger 一起使用，并在 Paperclip 内的 geometry.rb 中放置了一个断点。这是geometry.rb的那个部分的样子：

```
# Uses ImageMagick to determing the dimensions of a file, passed in as either a
# File or path.
# NOTE: (race cond) Do not reassign the 'file' variable inside this method as it is likely to be
# a Tempfile object, which would be eligible for file deletion when no longer referenced.
def self.from_file file
  file_path = file.respond_to?(:path) ? file.path : file
  raise(Errors::NotIdentifiedByImageMagickError.new("Cannot find the geometry of a file with a blank name")) if file_path.blank?
  geometry = begin
               silence_stream(STDERR) do
                 binding.pry
                 Paperclip.run("identify", "-format %wx%h :file", :file => "#{file_path}[0]")
               end
             rescue Cocaine::ExitStatusError
               ""
             rescue Cocaine::CommandNotFoundError => e
               raise Errors::CommandNotFoundError.new("Could not run the `identify` command. Please install ImageMagick.")
             end
  parse(geometry) ||
    raise(Errors::NotIdentifiedByImageMagickError.new("#{file_path} is not recognized by the 'identify' command."))
end 
```

在我的 binding.pry 语句中，file_path 变量设置为以下内容：

```
file_path => "/var/folders/91/63kgbtds2czgp0skw3f8190r0000gn/T/ror_tote.jpeg20121007-22732-1ctl1g1" 
```

我还通过在此目录中打开我的查找器并使用预览应用程序打开它来仔细检查它是否存在；并且该程序可以通过`%x{identify}`在 pry 中运行来运行识别，并且我收到与`Version: ImageMagick 6.7.7-6 2012-10-06 Q16`以前相同的版本。

在文件扩展名之后删除额外的数字（这是时间戳吗？）并在 Pry 中手动运行 Paperclip.run 命令会给我一个不同的错误：

```
Cocaine::ExitStatusError: Command 'identify -format %wx%h :file' returned 1\. Expected 0 
```

我还尝试将 Spree 中的 Paperclip gem 手动更新到 3.0.2，但仍然出现相同的错误。所以，我真的不确定还有什么可以尝试的。我的 ImageMagick 设置仍然有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T07:00:03.133

[如此处](https://github.com/thoughtbot/paperclip/issues/1038)所述，新的 Cocaine gem 改变了使用的 API，打破了旧的 Paperclip gem。我通过在我的 Gemfile 中明确要求 0.3.2 版可卡因解决了这个问题，但我也刚刚注意到，自从我发布这个问题以来，Spree master 分支也添加了这个要求，所以不再需要这个。

```
gem 'cocaine', '0.3.2' 
```

# java - 在java中从数据库中检索值

> ID：12773076
> 
> 赞同：0
> 
> 时间：2012-10-07T21:36:02.913
> 
> 标签：java, mysql, debugging, jtextfield

> **可能重复：**
> [从 java 中的数据库中检索值](https://stackoverflow.com/questions/12762835/retrieving-values-from-database-in-java)

我正在制作另一个程序，该程序从我创建的数据库中检索输入的字段数据/值。但是这一次，我输入的值将来自我创建的 JtextField。我想知道这里有什么问题，因为当我运行它时，输出总是为空。

在这个程序中，我会将 JTextField 的输入值转换为 int。这里是：

```
public class ButtonHandler implements ActionListener
{
public void actionPerformed(ActionEvent e)
{
if(e.getSource() == extendB)
{
    ExtensionForm extend = new ExtensionForm();
    extend.setVisible(true);
    }
else if(e.getSource()== searchB)            
{
//get text from the textField 
String guest = guestIDTF.getText();
//parse the string to integer for retrieving of data
int id = Integer.parseInt(guest);
GuestsInfo guestInfo = new GuestsInfo(id);
Room roomInfo = new Room(id);
String labels[] = {guestInfo.getFirstName()+" "+guestInfo.getLastName(),""+roomInfo.getRoomNo(),roomInfo.getRoomType(),guestInfo.getTime(),"11:00"}; for(int z = 0; z<labels.length; z++) { labelDisplay[z].setText(labels[z]); } 
```

在我的第二堂课中，它从我创建的数据库中检索输入的字段值，代码如下： import java.sql.*;

公共课室{

```
private String roomType;
private int  guestID, roomNo;

private Connection con;
private PreparedStatement statement;

public Room(){
    try {
         Class.forName("com.mysql.jdbc.Driver");
         con = DriverManager.getConnection(
                      "jdbc:mysql://localhost:3306/3moronsdb","root","");           
    } 
    catch (Exception e) {
         e.printStackTrace();
    }
}
public Room(int guestsID)
{
    this();
    try{
        statement = con.prepareStatement("SELECT * FROM guest WHERE guestID=?");
        statement.setInt(1, guestID);
        ResultSet rs = statement.executeQuery();
        while(rs.next()){
            this.guestID = rs.getInt(1);
            this.roomType = rs.getString(2);
            this.roomNo = rs.getInt(3);
        }
    }catch(Exception e){
        System.out.print(e);
    }
}
//Constructor for setting rate
public Room(String roomType, int roomNo)
{
    this();
    try
    {   
        statement = con.prepareStatement("Insert into room(roomType, roomNo) values(?,?)");
            statement.setString(1, roomType);
            statement.setInt(2, roomNo);
            statement.executeUpdate();
    }
    catch(Exception e)
    {
        e.printStackTrace();        
        return;
    }
}
//getting roomType
public String getRoomType(){
    return roomType;
}
//getting roomNo
public int getRoomNo(){
    return roomNo; 
}
//getting guestID
public int getGuestId(){
    return guestID;
} 
```

}

我已经在我的 3moronsdb 中插入了一些值，它们是（1，Classic，103）。这是我的 TEST 主课：

```
public class TestMain {
    public static void main(String [] a){

        GuestsInfo guest = new GuestsInfo(1); //note that this instantiation is the other class which i just
 ask the other day.. (https://stackoverflow.com/questions/12762835/retrieving-values-from-database-in-java)   
        Room rum = new Room(1);
    System.out.print(rum.getRoomType()+"  "+ guest.getFirstName());
}
} 
```

当我运行它时，它只给了 Room 类的空输出，但我得到了 GuestInfo 类的输出，即“Ericka”。你们能帮帮我吗？我知道我昨天问了这种问题，但我现在真的不知道这里出了什么问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T22:29:57.220

此方法中的 select 语句看起来是错误的。它不应该从`Room`表格中选择信息吗？

```
public Room(int guestsID)
{
    this();
    try{
        // This line looks wrong, shouldn't this be selecting from the
        // room table??
        // statement = con.prepareStatement("SELECT * FROM room WHERE guestID=?");
        // instead???
        statement = con.prepareStatement("SELECT * FROM guest WHERE guestID=?");
        statement.setInt(1, guestID);
        ResultSet rs = statement.executeQuery();
        while(rs.next()){
            this.guestID = rs.getInt(1);
            this.roomType = rs.getString(2);
            this.roomNo = rs.getInt(3);
        }
    }catch(Exception e){
        System.out.print(e);
    }
} 
```

您应该尝试使用列名，而不是使用列索引来检索值。虽然可能非常罕见，但数据库可能会以与您在代码中所期望的顺序不同的顺序返回列。

（这可能由于多种原因而发生，数据库已更新，数据库已重新创建，数据库引擎正在改变它的想法......：P）

```
while(rs.next()){
    this.guestID = rs.getInt("guestID");
    this.roomType = rs.getString("roomType");
    this.roomNo = rs.getInt("roomNumber");
} 
```

现在，显然，我对您的数据库结构一无所知，因此您需要适当地更新列名。当您犯错并从错误的表格中选择时，这将突出显示...

还。您应该在不再需要数据库资源时释放它们

```
PreparedStatement statement = null;
try{
    statement = con.prepareStatement("SELECT * FROM guest WHERE guestID=?");
    statement.setInt(1, guestID);
    ResultSet rs = statement.executeQuery();
    while(rs.next()){
        this.guestID = rs.getInt(1);
        this.roomType = rs.getString(2);
        this.roomNo = rs.getInt(3);
    }
}catch(Exception e){
    System.out.print(e);
} finally {
    try {
        statement.close();
    }catch(Exception e){
    }
} 
```

否则，您将面临数据库资源不足的风险：P

我也不会为`Connection`每个班级创建一个。我要么为应用程序创建一个连接，要么使用某种连接池

# jsf-2 - 仅使用 @RequestScoped 编辑 JPA 实体的最佳 JSF 编码模式

> ID：12773078
> 
> 赞同：2
> 
> 时间：2012-10-07T21:36:16.127
> 
> 标签：jsf-2, cdi

我在一个项目中，我会写很多这样的页面，所以我想使用最有效的（编写）编码模式。

背景：过去我使用 CODI 的 @ViewAccessScoped 来保存请求之间的状态，最近我开始使用 Flash 范围对象来保存状态。我不能使用 JSF @ViewScoped，因为我使用 CDI，而且它们不能很好地配合使用。所以我想看看我是否可以只用@RequestScoped 支持bean 来做到这一点。

页面是这样设计的（p 命名空间是 Primefaces）：

```
 <f:metadata>
                <f:viewParam name="ID" value="#{backing.id}" />
            </f:metadata>

                ....

            <h1>Edit Object Page</h1>

            <h:form id="formObj" rendered="#{backing.accessOK}">

                <p:panelGrid columns="2">

                    <h:outputLabel value="Field #1:"/>
                    <p:inputText value="#{backing.record.field1}" />

                          (more input fields)

                    <h:outputLabel value="Action:" />
                    <h:panelGroup>
                        <p:commandButton value="Save"
                                         action="#{backing.save}"
                                         />
                        <p:commandButton value="Cancel" action="backing.cancel" />
                    </h:panelGroup>

                </p:panelGrid>
                <p:messages showDetail="true" showSummary="true" />

            </h:form> 
```

如果页面被请求，方法**accessOK()**有能力阻止**h:form**被呈现。相反，**p:messages会与****accessOK()**方法需要设置的任何**FacesMessage** (s)一起显示。

 **bean **backing**的模式如下所示：

```
@Named
@RequestScoped
public class Backing {

    private long id;
    private SomeJPAEntity record;
    private Boolean accessOK;

    public long getId() { return id; }

    public void setId(long value) { id = value; }

    public boolean accessOK() {
        if (accessOK != null) return accessOK;

        if (getRecord() == null) {
             // add a FacesMessage that explains the record
             // does not exist
             return accessOK = false;  // note single =
        }

        // do any other access checks, such as write permissions

        return accessOK = true;
    }

    public SomeJPAEntity getRecord() {
        if (record != null) return record;

        if (getId() > 0) record = // get the record from DB
        else record = new SomeJPAEntity();

        return record;
    }

    public String execute() {

         if (!accessOK()) return null;   // bad edit

         // do other integrity checks here.  If fail, set FacesMessages
         // and return null;

         if (getId() > 0) // merge the record back into the data base
         else  // persist the record

    }

} 
```

这是这个模型的问题所在。单击 Save 按钮时，会构建一个新的**Backing**实例，然后在调用**setID()** setter*之前*，会多次调用**getRecord()** getter 。**因此getRecord()**中的逻辑中断，因为它不能依赖**id**属性在调用时有效。

 *******当这是一个**@ViewAccessScoped**（或**ViewScoped**）支持 bean 时，当使用**commandButton处理表单时，** **id**和**record**属性都已设置。或者，您可以将这些属性保存在闪存中，但这有其自身的问题，我想避免。

 **那么有没有办法让这个编程模型在规范中工作呢？

***更新：***

我有一个变通方法，凭经验允许它在不诉诸闪存或视图范围变体的情况下工作。如上所述，在处理表单时，在第一次调用**setId( )***之前，会多次调用***getRecord(** ) 。然后最后调用**save()**方法。

 *****我所做的是修改**setId()**如下：

```
public void setId(long value) {
  id = value;
  record = null;
} 
```

这迫使**getRecord()**重新计算（即获取/构建）属性**记录**，然后后续调用工作。具体来说，使用正确初始化的对象（包括**记录**实体的内容）进入**save()方法。**我不知道之前对**getRecord()**的所有调用是为了什么。

 ****在这一点上，我也不知道我可以依赖的是，在设置**getId()***之后，写入***记录**实体的所有值是否都会从**UIinput**组件传输。如果是这样，那么我可以使用这种模式。这是由规范控制还是只是靠运气？

 ***有什么意见或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:35:34.387

我认为你可以对 CODI（或者更确切地说是即将到来的 DeltaSpike）感到安全，我在 Tomcat 中都使用得很好。他们将支持几乎所有。

Deltaspike 现在正在开发 JSF 模块，并且有很多活动，当该 brew 完成时，我相信您会对此感到满意。deltaspike 的每个模块都可以单独生产，尽管该项目仍在孵化中。

现在对于您的实际问题，我无法提出您尚未提出的任何建议。

但我想知道，这是其中一个可能需要绑定的案例`f:viewParam`吗？我不确定，因为我几乎从未使用过绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:17:29.147

CODI 和 DeltaSpike 为 CDI 启用 @ViewScoped。JSF < 2.2 中的 Flash-Scope 完全被多个窗口破坏。我认为摆脱 CODI 的唯一原因是迁移到 DeltaSpike，在它准备好之前，您可以同时使用两者。***********************

# laravel - Laravel 雄辩/流利

> ID：12773087
> 
> 赞同：9
> 
> 时间：2012-10-07T21:37:22.737
> 
> 标签：laravel

从 Eloquent Model 获取所有行时：

```
$pin = Pin::all(); 
```

我得到一个看起来像这样的数组：

```
array(2) {
  [0]=>
  object(Pin)#36 (5) {
    ["attributes"]=>
    array(9) {
      ["id"]=>
      string(1) "2"
      ["creator"]=>
      string(1) "1"
    ["original"]=>
    array(9) {
      ["id"]=>
      string(1) "2"
      ["creator"]=>
      string(1) "1"
    }
    ["relationships"]=>
    array(0) {
    }
    ["exists"]=>
    bool(true)
    ["includes"]=>
    array(0) {
    }
  }
} 
```

就像我使用 Fluent 时一样：

```
$pin = DB::table('pins')->get(); 
```

我得到一个没有**“Attribute”、“Orginial”、“realtionships”** ……索引的普通数组。

我怎样才能使用 Eloquent 让它像 Fluent 一样返回一个普通数组？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T21:43:09.003

它非常简单。

```
$pins = Pin::get();
foreach($pins as $p){
 $pin[] = $p->to_array();
} 
```

或者如果您想发送 JSON 对象，请尝试使用

```
$pins = Pin::all();
return Response::eloquent($pins); 
```

或者如果您有一个要转换为 json 输出的数组而不是使用

```
return Response::json(array('name' => 'Batman')); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T18:21:41.207

使用 Laravel 4，您可以：

```
//get all pins from db
public function index(){
  return Pin::all();
}

//get specific pin from db
public function show($id){
  return Pin::find($id);
} 
```

这将以 Json 格式返回您的数据

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T10:32:08.810

Laravel 有一个内置`to_array()`函数，所以你可以做这样的事情。

```
$pins = Pin::all();
foreach($pins as $pin) {
    $pin_array = $pin->to_array();
    /* Do something with pin array here */
} 
```

希望有帮助：D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:54:33.133

或者

```
$model->original;
// but still do a foreach loop.
// Like so

$pins = Pin::all();
foreach($pins as $pin) {
    $pin_array = $pin->original;
    /* Do something with pin array here */
} 
```

# c# - C# - 如果列表框中项目的名称等于

> ID：12773089
> 
> 赞同：-4
> 
> 时间：2012-10-07T21:37:52.810
> 
> 标签：c#

在我的程序中，我无法编写一个 IF 语句来查看列表框中的某个项目是否等于某个值，例如：如果列表框中的任何项目等于“hi there”，那么它将写为“Success ！” 到 .txt 文件。

关于我将如何写这个的任何想法？

编辑：我自己想出来的，一开始因为我累了所以想不出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T21:55:47.380

这对于您的示例应该足够了

```
 string query = "hi there";
        for (int i = 0; i < listBox1.Items.Count; i++)
        {
            if (listBox1.Items[i].ToString() == query)
            {
                TextWriter tw = new StreamWriter("file.txt");
                tw.WriteLine("Success!");
                tw.Close();
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T21:44:50.220

如果这是一个位于 System.Windows.Form 的 ListBox，它有一个 Items 属性，其中包含所述列表框中的所有项目。你遍历它，直到你找到你需要的东西：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.items.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.items.aspx)

# c++ - 从字符串中获取文本（解析）

> ID：12773091
> 
> 赞同：0
> 
> 时间：2012-10-07T21:38:11.640
> 
> 标签：c++, parsing, formatting, equation

我正在尝试制作一个读取 .txt 文件并注册给定方程的系数的 c++ 程序。

例子

```
2x+4y+5z = 10 
```

我想从 .txt 文件中读取该行并将这些系数（2、4、5、10）存储在某个数组中。有什么建议么？

我的方程总是3个变量方程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:22:01.310

我认为您应该创建自己的解析器，因为它可能非常简单。

*   逐行读取文件。
*   每次该行遇到变量（x，y，z）时，都会获取变量之前的数字。
*   所有方程都有 char *=*，所以每次只解析直到*=*并得到其余的。
*   一个问题是，如果一个数字是正数还是负数，您还需要添加。

# pyqt4 - 如何使用 QSortFilterProxyModel 在 QTableView 中显示富文本？

> ID：12773092
> 
> 赞同：3
> 
> 时间：2012-10-07T21:38:21.563
> 
> 标签：pyqt4, qtableview, richtext, qsortfilterproxymodel

# 介绍：

我有一个有 5 列的表和一个 QLineEdit，它的作用类似于第二列的过滤器。另外，我计划实现一个按钮来隐藏/显示与第一列中的文本匹配的行，另一个按钮来突出显示第二列中的文本。

五列是：

1.  只是图标，每个图标对应一个名称。
2.  必须表现得像链接的超链接文本（就像 QLabel 中的 HTML 锚）。
3.  文件大小以：KB、MB、GB、TB 等表示。必须是超链接，如第二列。
4.  整数
5.  整数

所有列都必须是可排序的。

在实现 QSortFilterProxyModel 之前，我几乎可以解决所有问题。
这就是我所拥有的：

ResultsStandardItem.py（用于自定义排序的 QStandardItem 的子类）：

```
from PyQt4 import QtGui
import re

class ResultsStandardItem(QtGui.QStandardItem):
    def __init__(self, sortKey, sortType='string'):
        super(ResultsStandardItem, self).__init__()

        if sortType == 'size':
            suf = re.search('(KB|B|GB|MB|TB)$', sortKey).group(1)
            num = float(re.search('^[0-9]+(?:\.[0-9]+)?', sortKey).group())
            if suf == 'B':
                self.sortKey = num
            elif suf == 'KB':
                self.sortKey = num * 1024
            elif suf == 'MB':
                self.sortKey = num * 1024 * 1024
            elif suf == 'GB':
                self.sortKey = num * 1024 * 1024 * 1024
            elif suf == 'TB':
                self.sortKey = num * 1024 * 1024 * 1024 * 1024
        else:
            self.sortKey = sortKey

    def __lt__(self, other):
        return self.sortKey < other.sortKey 
```

主要代码：

```
resultsMdl = QtGui.QStandardItemModel(self)
resultsTbl = QtGui.QTableView(self)
resultsTbl.setModel(resultsMdl)
...
for i in range(len(site)):
    row = resultsMdl.rowCount()
    resultsMdl.insertRow(row)

    columnOneItem = ResultsStandardItem(str.lower(site[i]))
    columnOneItem.setIcon(QtGui.QIcon('img/' + str.lower(site[i]) + '.png'))

    columnTwoItem = QtGui.QStandardItem()
    columnTwoItemLa = QtGui.QLabel('<a href="' + details[i] + '">' + file[i] + '</a>')
    columnTwoItemLa.setOpenExternalLinks(True)

    columnThreeItem = ResultsStandardItem(size[i], 'size')
    columnThreeItem.setData(size[i])
    columnThreeItemLa = QtGui.QLabel('<a href="' + download[i] + '">' + size[i] + '</a>')
    columnThreeItemLa.setOpenExternalLinks(True)

    columnFourItem = QtGui.QStandardItem()
    columnFourItem.setData(seeders[i], Qt.DisplayRole)

    columnFiveItem = QtGui.QStandardItem()
    columnFiveItem.setData(leechers[i], Qt.DisplayRole)

    resultsMdl.setItem(row, 0, columnOneItem)
    resultsMdl.setItem(row, 1, columnTwoItem)
    resultsTbl.setIndexWidget(columnTwoItem.index(), columnTwoItemLa)
    resultsMdl.setItem(row, 2, columnThreeItem)
    resultsTbl.setIndexWidget(columnThreeItem.index(), columnThreeItemLa)
    resultsMdl.setItem(row, 3, columnFourItem)
    resultsMdl.setItem(row, 4, columnFiveItem)

resultsTbl.setSortingEnabled(True) 
```

一切都很好。第一列仅显示图标并且是可排序的，第二列和第三列显示富文本，并且自定义排序按预期工作。唯一应该解决的问题是 QLabel 没有 Qt.TextElideMode，因此，当文本不适合列时，它就会被剪切。

# 问题：

当我启用 QSortFilterProxyModel 时，QLabels 消失了。所以我必须以正常方式显示文本，并且自定义排序停止工作。
我被困在这里，不知道去哪里。此外，我必须实现突出显示，我不知道如何。所以我需要解决第一个问题，记住下一步是实现突出显示。

我是 Python 和 Qt 的新手，需要有人向我解释正确的方法。最近几天我一直在做这个。我不想选择第一个替代方案然后返回，因为这种方法不允许我实现我需要的其他东西。

提前致谢。

**编辑：**
我能够使用自定义搜索设置“setSortRole(Qt.UserRole)”。对于每个项目，我将数据设置为将用于排序的相应值。另外，我将“ResultsStandardItem”更改为设置数据而不是 sortKey。

结果标准项目.py：

```
...
else:
    self.sortKey = sortKey

self.setData(self.sortKey, Qt.UserRole) 
```

主要的：

```
 columnThreeItem = ResultsStandardItem(size[i], 'size')
    columnThreeItem.setData(size[i], Qt.DisplayRole) 
```

所以，富文本是唯一缺少的东西。

# keyboard-shortcuts - 按顺序从 Python 解释器历史中交互式执行命令的键绑定？

> ID：12773095
> 
> 赞同：2
> 
> 时间：2012-09-21T16:34:41.483
> 
> 标签：keyboard-shortcuts, python, readline

我有时会在开发 Python 模块时通过在终端中运行 Python 交互式提示、导入我的新模块并测试其功能来测试它们。当然，由于我的代码正在开发中，因此存在错误，并且需要经常重新启动解释器。当我在重新启动之前只执行了几行解释器时，这并不太痛苦：当解释器重新启动时我的键序列看起来像`Up Up Enter Up Up Enter`......但是将其推断为要重复的 5 个或更多语句，它会变得非常痛苦！

当然，我可以将我的测试代码放入我执行的脚本中`python -i`，但这是一个临时活动，以至于打开文本编辑器似乎不太“超过阈值”:) 我真正渴望的是`Ctrl-r`来自 bash shell 的行为：在 bash 中按顺序执行 10 个命令的序列涉及在历史记录中查找命令（重复`Up`或`Ctrl-r`搜索——两者都在 Python 解释器 shell 中工作），然后只需按`Ctrl-o`十次。我最喜欢的 bash shell 功能之一。

问题是，虽然许多其他 readline 绑定功能（如`Ctrl-a`、`Ctrl-e`、`Ctrl-r`和`Ctrl-s`在 Python 解释器中工作）`Ctrl-o`却没有。我无法在网上找到对此的任何引用，尽管*也许*该[`readline`](http://docs.python.org/library/readline.html)模块可用于将此功能添加到`python`提示中。有什么建议么？

**编辑：**是的，我知道使用交互式解释器不是一种超出几行的开发方法！但是对于小测试来说很方便，IMO 的交互性可以帮助判断一个开发的 API 是自然方便还是过于繁重。因此，请限制对 readline 历史步进是否可以在 python 中工作的技术问题的答案，而不是关于是否应该或不应该选择（有时）以这种方式工作的侧面意见！

**编辑：**自从发布以来，我意识到我已经在使用该`readline`模块来使一些 Python 解释器历史功能工作。`operate-and-get-next`但是似乎不支持Ctrl-o 绑定到readline 命令，即使我放入`readline.parse_and_bind("Control-o: operate-and-get-next")`了我的`PYTHONSTARTUP`文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T12:14:37.673

> 在开发 Python 模块时，我经常通过在终端中运行 Python 交互式提示、导入我的新模块并测试功能来测试它们。

停止使用这种模式并开始在文件中编写测试代码，您的生活会轻松很多。

*   无论如何，运行该文件会少一些麻烦。

*   如果您使检查自动进行而不是读取结果，那么检查您的代码会更快，更不容易出错。

*   您可以在完成后保存该文件，并在更改代码或环境时运行它。

*   您可以对测试执行指标，例如确保您没有未测试的代码部分。

你熟悉[unittest 模块](http://docs.python.org/library/unittest.html)吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:15:30.037

在对 python-ideas 列表进行一些讨论之后回答我自己的问题：尽管一些 readline 文档中的信息相互矛盾，但似乎该`operate-and-get-next`函数实际上被定义为 readline 的 bash 扩展，而不是核心 readline。

所以这就是为什么在 Python 解释器会话中`Ctrl-o`导入模块时默认情况下都没有表现出预期的行为`readline`，也没有尝试手动强制此绑定：该函数在要绑定的 readline 库中不存在。

谷歌搜索显示[https://bugs.launchpad.net/ipython/+bug/382638](https://bugs.launchpad.net/ipython/+bug/382638)，GNU readline 维护者在其上给出了*不*将此功能添加到核心 readline 的原因，并说它应该由调用应用程序实现。他还说“它的实现并不复杂”，尽管对我来说如何（甚至是否可能）将其作为`readline`模块行为的纯 Python 扩展并不明显。

所以不，目前这是不可能的，除非`operate-and-get-next`来自 bash 的函数在 Python`readline`模块或解释器本身中显式实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T21:42:22.657

这不完全是您问题的答案，但如果这是您的开发风格，您可能想看看[DreamPie](http://dreampie.sourceforge.net/)。它是 Python 终端的 GUI 包装器，提供各种方便的快捷方式。其中之一是能够在解释器显示中拖动选择并仅复制代码（而不是输出）。然后，您可以粘贴此代码并再次运行它。我发现这对于您描述的工作流程类型很方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T22:07:31.030

你最好的选择是检查那个项目：http: [//ipython.org](http://ipython.org)

这是一个使用`Ctrl`+进行历史搜索的示例`R`：

![在此处输入图像描述](../Images/ba7efeec16c79262cdd9758f71bac078.png)

**编辑** 如果您正在运行`debian`或派生：

```
sudo apt-get install ipython 
```

# jquery - 如何删除鼠标移出/鼠标离开延迟的 div？

> ID：12773099
> 
> 赞同：0
> 
> 时间：2012-10-07T21:38:51.320
> 
> 标签：jquery, hide, delay, mouseleave

我正在尝试延迟功能。当我单击某个段落时，*菜单*会添加到该段落的前面。但我需要隐藏*菜单*时`mouseleave`或`mouseout`延迟。

这是一个例子：http: [//jsfiddle.net/ynternet/bZLAv/](http://jsfiddle.net/ynternet/bZLAv/)

**HTML**

```
<p class="add_to_this1">Click here 1</p>
<p class="add_to_this2">Click here 2</p>
<p class="add_to_this3">Click here 3</p>

<div id="menu"> I'm here</div> 
```

**jQuery**

```
jQuery.fn.handler = function () {
    $(this).on({
        click: function(e) {
            if ($(this).find("#menu").length) {
                return;
            }
            $('#menu').prependTo($(this));
            $("#menu").css({
                position: "absolute",
                left: "100px"
            }).show();
        }
    });
}
$(".add_to_this1").handler();
$(".add_to_this2").handler();
$(".add_to_this3").handler(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T21:49:31.340

这是一个[jsFiddle](http://jsfiddle.net/84nVQ/1/)示例

```
jQuery.fn.handler = function () {
    $(this).on({
        click: function(e) {
            if ($(this).find("#menu").length) {
                return;
            }

            $('#menu').prependTo($(this));

            $("#menu").css({
                position: "absolute",
                left: "100px"
            }).show();
        }
    });
}
$(".add_to_this1").handler();
$(".add_to_this2").handler();
$(".add_to_this3").handler();

$('p[class^=add_to_this]').on('mouseleave', function(e) {
    setTimeout(function() {
        $('#menu').hide();
    }, 2000);        
}); 
```

​</p>

# python - Django 中的“母版页”管理

> ID：12773100
> 
> 赞同：5
> 
> 时间：2012-10-07T21:38:54.053
> 
> 标签：python, django

我正在使用 Django 创建一个简单的网站，其中我使用模板继承。“母版页”模型包含显示在所有页面上的信息，例如页眉或页脚。我无法对其进行硬编码，因为我需要它可以从管理页面进行编辑。

目前（一些）我的模型看起来有点像这样：

```
class MasterContent(models.Model):
    title_header = models.CharField(max_length=200)
    name_header = models.CharField(max_length=200)

class ProfileContent(models.Model):
    description = models.TextField()
    profile_picture = models.ImageField(upload_to='profile') 
```

然后我渲染到这样的视图：

```
def profile(request):
    return content_shortcut(ProfileContent, 'pages/profile.html')

def content_shortcut(content_class, template):
    return render_to_response(template, {'master_content':MasterContent.objects.get(id=1), 'content':content_class.objects.get(id=1)}) 
```

现在，我需要从不同的应用程序呈现视图，但我仍然希望传递母版页内容。`master_page`如果我每次渲染视图时都必须手动包含内容（即使使用快捷方式，它似乎是错误的），这对我来说会变得太混乱。我尝试将 MasterContent 抽象化，但这迫使我在从它继承的每个其他模型中重新输入数据，这是一个更糟糕的情况。

**简而言之：我怎样才能轻松地在*所有*视图中获得数据，跨应用程序，可以从管理页面中的一个位置进行编辑，同时保持干燥！**

*注意*：我还认为必须有一种更流畅的方式（比如平面页面）来管理个人资料页面的内容，而不是拥有一个我只会使用一个实例/行的模型，但我现在选择忽略这一点。 ..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T22:10:18.047

听起来像一个[`inclusion tag`](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)甚至一个[`simple tag`](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#simple-tags)应该做的工作就好了。您可以查询标签中的内容并将标签嵌入到您的基本模板中。

如果您在每个页面上都需要此信息，则[`context processors`](http://www.b-list.org/weblog/2006/jun/14/django-tips-template-context-processors/)可能是另一种选择，尽管模板标签可能更适合您的用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T21:54:10.113

抱歉，如果我不完全理解您的问题，但您不能只导入主内容吗？

例如

```
from mainapp.models import MasterContent
from mainapp.views import content_shortcut 
```

然后开始你的新观点

```
def differentprofile(request):
    return content_shortcut(DifferentProfileContent, 'pages/differentprofile.html') 
```

# c - GDB：汇编指令计算

> ID：12773101
> 
> 赞同：7
> 
> 时间：2012-10-07T21:38:55.000
> 
> 标签：c, assembly, gdb

我是组装新手。除了正在调试的实际代码之外，有没有办法在 GDB 中执行计算？例如，我正在使用 Linux IA-32 程序集（AT&T 语法）逐步执行以下操作：

```
 ;$esi is 0xbffff0a8 which refers to 1 after this command. $eax is 2
   0x08048cd5 <+42>:    lea    -0x20(%ebp),%esi

   ;$eax=ebx=2 after this instruction
   0x08048cd8 <+45>:    mov    %ebx,%eax 

   ;$eax equals 2 after this instruction               
   0x08048cda <+47>:    add    -0x4(%esi,%ebx,4),%eax 
```

我只是没有看到 $eax 如何以 2 结束。我可以在 gdb 中发出如下指令：-0x4(%esi,%ebx,4) 并分析结果吗？

据我了解，$ebx 乘以 4 得到 8。将其添加到 $esi 得到 9。然后减去 -4 得到 5。然后将 5 添加到 $eax 中，即 2 得到 7。而不是 $ eax 为 2。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T01:29:40.800

如果您要求的话，您可以使用寄存器评估表达式。

*gdb*的`print`命令是你的朋友。

基本上你可以通过在前面加上一个美元符号来查询寄存器，例如

```
print $ecx 
```

或在表达式中使用它们：

```
print $esi + $ebx + 4 
```

您可以使用运算符取消引用内存`*`（如在 C 中）：

```
print *$ecx 
```

将打印指向的内存位置的内容`ecx`。

虽然您不能直接输入汇编代码，但您可以将表达式转换为更高级的内容，如下所示：

```
print $eax - ($esi * $ebx) 
```

此外，您可以使用强制转换为 C 数据类型转换为各种类型，例如

```
print (char)$ecx 
```

会将 的内容打印`ecx`为字符。

```
print *(char**)$ecx 
```

这将解释`ecx`为指向 的指针`char*`，然后您将其取消引用。因此，您会在`ecx`.

不过，这只是冰山一角。*gdb*是非常强大的工具。您可能还会发现该`display`命令很有用。它与 基本相同，只是它会在代码停止时`print`重复该命令（对断点有用）。您可以使用，或者如果您是自虐狂`print`来检查大多数寄存器。`info registers``info all-registers`

您还可以使用以下方法更改寄存器的内容`set`：

```
set $eax = 20 
```

并`stepi`通过指令，或`continue`运行程序。

PS 如果您不知道，您可能想学习如何设置断点等。

# java - Java多线程与Shell脚本

> ID：12773108
> 
> 赞同：3
> 
> 时间：2012-10-07T21:40:08.857
> 
> 标签：java, linux, multithreading, shell, jakarta-ee

如果我有 3 个任务要同时运行所有这些任务，那么我现在正在考虑两种方法。

由于我在 linux 中运行程序，我可以在 shell 脚本中执行它。

> ```
>  java Task1 &
>   java Task2 &
>   java Task3 & 
> ```

或者，我可以使用一个 java 程序来生成三个子线程来完成任务。

我想知道哪种方式更有效。我怀疑shell方式会创建多个JVM实例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T21:43:38.997

在 Java 中执行此操作会更有效，使您的程序多线程并使用三个线程。是的，shell 方式会创建三个 JVM 实例。

但问题是，你为什么要考虑一种选择而不是另一种呢？如果这只是一个小任务，我个人会像你一样在 shell 中启动三个实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T22:10:01.793

如果任务运行时间长，三个JVM的开销可以忽略不计：

*   由于文件系统缓存，加载时间/磁盘访问没有问题。
*   共享库内存在 Linux 内核中是单例的。我假设 Java 使用每个线程的垃圾收集器，与三个 JVM 相比，分配给三个线程的默认内存量相同（最小的 JVM 元数据内存除外）。
*   众所周知，Linux 在进程调度方面非常高效，使守护进程的独立分支至少与多线程一样高效。在 Windows 下，我们有不同的情况，其中进程实例化是一项昂贵的操作。

很长一段时间，我指的是每个任务 30 秒。那么短期任务呢？在这里，只有经常重复任务时，时间效率才重要。重复运行（重新）加载 JVM 的开销要小得多，但总有一些会留下来。

**结论：**使用 shell 脚本更容易实现，编写和维护的代码更少，可配置性更高，无需编写更多代码。在运行时，在一个常见的场景中，您将观察到两种方法之间没有太大的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T21:45:17.177

您现在的做法是启动三个单独的 JVM 实例，每个实例专用于一项任务。如果要在一个 JVM 上同时运行所有三个任务，则需要为它们创建 Thread 对象。

所以我会创建一个非常简单的 Java 程序，它会在自己的线程中启动这些任务。然后我会将该程序转换为 .jar 文件并安排它执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T21:46:09.673

JVM越多，cpu时间越多。由于一个JVM上的三个线程会更好。但值得进行简单的基准测试。如果你这样做，请与我们分享。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T00:26:04.840

> 我想知道哪种方式更有效。

如果您只是限制您决定处理器效率的标准，那么 Java 线程方法*最有可能*更高效。在 JVM 启动和内存利用率方面运行额外的 JVM 的开销将是可观的。

多线程版本可能较慢的唯一情况涉及任务之间对某些资源的竞争或 JVM 调优选项的错误选择；例如，如果你让堆太小。

但是，我认为纯粹根据处理器效率做出决定并不明智：

*   如果任务长时间运行并且您有足够的内存用于 3 个 JVM，则性能差异（以百分比表示）可能微不足道。（如果整个运行需要 10 个小时，谁会在乎你是否需要多花 10 秒来启动 JVM！）

*   您还需要考虑开发时间、测试和维护。您的想法需要考虑编写强大的多线程应用程序的潜在复杂性。（如果没有更多关于系统功能和非功能要求的详细信息，我无法预测。）

总之，如果没有您的问题的更多细节等，就没有好的明确答案

* * *

> 我怀疑shell方式会创建多个JVM实例吗？

错误的。它将创建多个**JVM**实例。

# sql - 使用 Perl？在单引号内绑定

> ID：12773109
> 
> 赞同：0
> 
> 时间：2012-10-07T21:40:12.660
> 
> 标签：sql, perl, dbi

此脚本适用于所有不需要 % 通配符的命令。当我尝试包装 ? 在 %?% 中产生绑定错误。我还尝试在运行脚本时将 %value% 添加到参数中，它也会产生相同的错误。有没有办法将参数替换为 perl 中的 SQL DBI 命令？

提前致谢。

```
#!/usr/bin/perl

use DBI;
use Text::Diff;
use File::stat;
use Fcntl ':flock';

open (LOCK_FH, $0) || die "$0 for lock: $!\n";
flock (LOCK_FH, LOCK_EX|LOCK_NB) || die "$0 already running\n";

$BINDVAR = $ARGV[0];
$dbname = "COnnectionDetailsHere";
$un = "username";
$pw = "password";

my $dbh = DBI->connect ( $dbname, $un, $pw, { PrintError=>1, RaiseError=>1, AutoCommit=>0, LongReadLen=>5056}) or die "Couldn't connect to DB: " . DBI->errstr;

$sql = <<SQL

select * from foo where bar like '%?%' '?'

SQL
;

$stm = $dbh->prepare($sql) or die "SQL failed to prepare $DBI::errstr\n";

$stm->bind_param(1,($BINDVAR));

$stm->execute() or die "Couldn't execute the statement: " . $stm->errstr; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T23:04:55.817

不是添加`%`导致问题的，而是添加引号。`?`是占位符。`'?'`是一个字符串文字，计算结果为问号。

先前的答案有效地建议您将串联移动到 Perl 端。

```
my $sth = $dbh->prepare('SELECT * FROM foo WHERE bar LIKE ?');
$sth->execute('%' . $something . '%'); 
```

您可以使用正确的语法在服务器中继续执行此操作。

```
my $sth = $dbh->prepare(q{SELECT * FROM foo WHERE bar LIKE '%' || ? || '%'});
$sth->execute($something); 
```

但这没有任何好处，并且有使用[不兼容](http://dev.mysql.com/doc/refman/5.5/en/non-typed-operators.html) [语法](http://msdn.microsoft.com/en-us/library/ms190301.aspx)的风险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T21:54:51.280

将`%`放入变量中，*不要在 . 周围加上引号* `?`。这就是把你搞砸的原因——引号把它变成了一个字面的问号。

```
#!/usr/bin/env perl    

use strict;
use warnings;

use DBI;

my $dbh = DBI->connect('dbi:SQLite:dbname=:memory:');
$dbh->do('CREATE TABLE foo ( bar text )');
$dbh->do(q(INSERT INTO foo VALUES ('xyzzy')));

my $sth = $dbh->prepare('SELECT * FROM foo WHERE bar LIKE ?');
$sth->execute('%');

print $sth->fetchrow_array . "\n"; 
```

输出：

```
$ ~/src/tmp/like_qry 
xyzzy 
```

# mysql - 卡在 MySQL 查询中

> ID：12773116
> 
> 赞同：5
> 
> 时间：2012-10-07T21:41:44.070
> 
> 标签：mysql, sql

我有一个表模式

```
create table Location(
id int primary key,
city varchar(255),
state varchar(100),
country varchar(255)
);
create table Person( 
id int primary key,
name varchar(100)
);
create table Photographer(
id int primary key references Person(id) on update cascade on delete cascade,
livesIn int not null references Location(id) on update cascade on delete no action
);
create table Specialty(
photographer int references Photographer(id) on update cascade on delete cascade,
type enum('portrait','landscape','sport'),
primary key(photographer, type)
);
create table Photo(
id int primary key,
takenAt timestamp not null,
takenBy int references Photographer(id) on update cascade on delete no action,
photographedAt int references Location(id) on update cascade on delete no action
);
create table Appearance(
  shows int references Person(id) on update cascade on delete cascade,
isShownIn int references Photo(id) on update cascade on delete cascade,
primary key(shows, isShownIn)
); 
```

我被两个问题困住了：

1) 照片仅显示居住在同一地点的摄影师。列出每张照片一次。也就是说，照片必须有摄影师的人，他们都需要住在同一个地方。

2) 哪些地点具有该地点的每张照片均由一位未出现在马萨诸塞州任何照片中的摄影师拍摄的属性？每个位置只显示城市，每个位置只显示一次。

我的尝试：1）

```
SELECT ph.id, ph.takenAt, ph.takenBy, ph.photographedAt FROM 
(SELECT * FROM Photo p, Appearance ap WHERE p.id = ap.isShownIn 
HAVING ap.shows IN (SELECT person.id FROM Person,Photographer WHERE person.id
photographer.id)) ph
WHERE ph.photographedAt = (SELECT location.id FROM location WHERE location.id = 
(SELECT livesIn FROM Photographer WHERE id = ph.takenBy)) 
```

2)

```
select distinct city from location where location.id in (
select photographedAt from photo, (select * from appearance where appearance.shows in
(select photographer.id from photographer)) ph
where photo.id = ph.isShownIn )
and location.state <> 'Massachusetts' 
```

任何人都可以帮助创建这些查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:27:02.377

您的查询都是*“列出具有 X 和 Y 属性的单个项目，其中 X 和 Y 在不同的表中”的*种类。

这些类型的问题通常使用带有`EXISTS`和的相关子查询来解决`NOT EXISTS`。

使用`EXISTS`负责*“仅显示每个项目一次”*部分。否则，您将需要将分组与复杂的联接结合使用，这很快就会变得混乱。

问题 1 要求：

> [...] 照片必须有摄影师，而且他们都需要住在同一个地方。

请注意，此定义并没有说“如果照片也包含其他人，则不要显示照片”。如果这就是您的真正意思，那么您可以从下面的 SQL 中得出结论，并在下次编写更好的定义。;)

```
SELECT
  *
FROM
  Photo p
WHERE
  EXISTS (
    -- ...that has at least one appearance of a photographer
    SELECT 
      1 
    FROM
      Appearance              a 
      INNER JOIN Photographer r ON r.id = a.shows
      INNER JOIN Location     l ON l.id = r.livesIn
    WHERE
      a.isShownIn = p.id
      -- AND l.id = <optional location filter would go here>
      AND NOT EXISTS (
        -- ...that does not have an appearance of a photographer from 
        --    some place else
        SELECT 
          1 
        FROM
          Appearance              a1 
          INNER JOIN Photographer r1 ON r1.id = a1.shows
          INNER JOIN Location     l1 ON l1.id = r1.livesIn
        WHERE
          a1.isShownIn = p.Id
          AND l1.id <> l.id
      )
  ) 
```

第二个问题是

> [...] 地点是否拥有该地点的每张照片均由一位未出现在马萨诸塞州任何照片中的摄影师拍摄的财产？每个位置只显示城市，每个位置只显示一次。

相应的 SQL 如下所示：

```
SELECT
  city
FROM
  Location l
WHERE
  NOT EXISTS (
    -- ...a photo at this location taken by a photographer who makes 
    --    an apperance on another photo which which was taken in Massachusetts
    SELECT
      1
    FROM
      Photo                    p
      INNER JOIN Photographer  r ON r.id = p.takenBy
      INNER JOIN Appearance    a ON a.shows = r.id
      INNER JOIN Photo        p1 ON p1.id = a.isShownIn
    WHERE
      p.photographedAt = l.Id
      AND p1.photographedAt = <the location id of Massachusetts>
  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T22:26:12.103

我对 Query1 的尝试。显示居住在同一城市的摄影师的照片。

```
select ph.id, ph.takenAt, ph.takenBy, ph.photographedAt from Photo as ph 
   join Appearance as a on ph.id = a.isShownIn 
   join Photographer as p on a.shows = p.id where p.livesIn in 
      (select p1.id from Photographer as p1, Photographer as p2 
         where p1.id != p2.id and p1.livesIn = p2.livesIn); 
```

我对 Query2 的尝试。参考在马萨诸塞州拍摄的照片中的人物，然后列出所有不是该人拍摄的照片。

```
select * from Photo where takenBy not in 
   (select a.shows from Photo as ph 
      join Location as l on ph.photographedAt = l.id 
      join Appearance as a on a.isShownIn = ph.id 
      where city = 'Massachusets'); 
```

希望有帮助。

# arguments - zsh 中的索引参数

> ID：12773118
> 
> 赞同：1
> 
> 时间：2012-10-07T21:42:07.897
> 
> 标签：arguments, zsh

使用 zsh 我可以简单地使用`$5`. 但是如果`5`是一个变量呢？我想出了这种方法来通过索引打印出前五个参数（而不是 just `echo $1 $2 $3 $4 $5`）：

```
for i in {1..5}
do
  echo $(eval echo "\$$i")
done 
```

但肯定有更好的方法吗？

* * *

我知道有更简单的方法可以遍历所有参数。在我的特殊情况下，我想向后循环遍历参数列表。对此的帮助也将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T12:52:47.200

要遍历位置参数，只需使用 for 循环：

```
for x; do echo $x; done 
```

反向遍历它们：

```
for x in "${(Oa)@}"; do echo $x ; done 
```

要反转参数：

```
set "${(Oa)@}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T21:42:07.897

在 zsh 中（[显然](https://unix.stackexchange.com/a/12087)只有 zsh ）`@`是一个数组。实际上，您可以像这样使用它：

```
for i in {1..5}
do
  echo $@[i]
done 
```

* * *

至于向后循环，我想您可以结合`for i in {$#..1}`使用，`$@[i]`但可能有更好的方法。

# visual-studio-2010 - glext 视觉工作室 cuda

> ID：12773121
> 
> 赞同：1
> 
> 时间：2012-10-07T21:42:22.850
> 
> 标签：visual-studio-2010, parallel-processing, cuda

我目前正在使用一本名为 Cuda by Example 的书参加并行计算课程。在本书的第 4 章中，我使用了一些包含“GL/glut.h”和“GL/gext.h”的 .h 文件，我有在线安装 GLUT 的步骤，并遵循了这些步骤。我认为这行得通，但我不确定。然后我试图找到 glext 的方向，但我似乎找不到那么多。我确实找到了一个 .h 文件，并尝试通过将其包含在 GL 文件夹中来使用它。这似乎不起作用，因为我在编译类似的东西时收到错误：

> **错误 1 ​​错误：不允许从设备**调用主机函数（“cuComplex::cuComplex”）/_*全局*_ 函数（“julia”） C:\Users\Laptop\Documents\Visual Studio 2010\Projects\Lab1\Lab1 \lab1.cu 29 1 实验室1

我认为这是因为我需要更多的 glext.h，比如 .dll 和类似于 glut 的东西，但我不确定。对此的任何帮助将不胜感激。谢谢你。

**编辑：** - 这是我正在使用的代码，除了前两个包含语句和 .h 文件来自[谷歌代码](http://code.google.com/p/cuda-examples/source/browse/#svn/trunk/common%253Fstate%253Dclosed)之外，我没有改变我在书中看到的内容：谢谢你的帮助

```
#include "cuda_runtime.h"
#include "device_launch_parameters.h"
#include "book.h"
#include "cpu_bitmap.h"

#define DIM 1000

struct cuComplex {
    float r;
    float i;
    cuComplex( float a, float b) : r(a), i(b) {}
    __device__ float magnitude2(void) {
        return r*r + i*i;
    }
    __device__ cuComplex operator* (const cuComplex& a) {
        return cuComplex(r*a.r - i*a.i, i*a.r + r*a.i);
    }
    __device__ cuComplex operator+ (const cuComplex& a) {
        return cuComplex(r+a.r, i+a.i);
    }
};

__device__ int julia( int x, int y) {
    const float scale = 1.5;
    float jx = scale * (float)(DIM/2 -x)/(DIM/2);
    float jy = scale * (float)(DIM/2 - y)/(DIM/2);

    cuComplex c(-0.8, .156);
    cuComplex a(jx, jy);

    int i = 0;
    for(i=0;i<200;i++) {
        a = a * a + c;
        if(a.magnitude2() > 1000)
            return 0;
    }

    return 1;
}

__global__ void kernel(unsigned char *ptr ) {
    //map from threadIdx/BlockIdx to pixel position
    int x = blockIdx.x;
    int y = blockIdx.y;
    int offset = x + y * gridDim.x;
    //now claculate the value at that position
    int juliaValue = julia(x,y);
    ptr[offset*4 + 0] = 255 * juliaValue;
    ptr[offset*4 + 1] = 0;
    ptr[offset*4 + 2] = 0;
    ptr[offset*4 + 3] = 255;
}

int main( void ) {
    CPUBitmap bitmap(DIM, DIM);
    unsigned char *dev_bitmap;
    HANDLE_ERROR(cudaMalloc((void**)&dev_bitmap, bitmap.image_size()));
    dim3    grid(DIM,DIM);
    kernel<<<grid,1>>>( dev_bitmap );
    HANDLE_ERROR( cudaMemcpy( bitmap.get_ptr(), dev_bitmap, bitmap.image_size(), cudaMemcpyDeviceToHost));
    bitmap.display_and_exit();
    HANDLE_ERROR( cudaFree( dev_bitmap ));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T23:00:37.117

尝试添加以下内容。

原始代码：

```
cuComplex( float a, float b) : r(a), i(b) {} 
```

修改的：

```
__host__ __device__ cuComplex( float a, float b ) : r(a), i(b)  {} 
```

它为我解决了这个问题。我也不需要您添加的两个包含文件，但您可能取决于您的构建过程。

CUDA 程序由两种类型的代码组成：主机代码和设备代码。主机代码运行在主机 CPU 上，不能运行在 GPU 上，设备代码运行在 GPU 上，不能运行在 CPU 上。如果您不以任何方式装饰您的程序，那么它将是所有主机代码。但是，一旦您开始添加由 __ global__ 或 __ device__ 等关键字描述的 CUDA 部分，那么您的程序将包含一些设备代码。

您收到的编译器错误表明设备上运行的函数正试图使用​​为 CPU 编译的代码。这是一个禁忌，编译器不允许这样做。这个例子是不寻常的，因为在某个时间点（当本书编写时）它可能没有产生这个错误，而且 cuComplex 结构中的代码似乎用 __ device__ 关键字修饰。但是，在我修改的代码行的结构的最外层，没有标识 __ device__ 的关键字。当我添加 __ device__ __ host__ 关键字时，这会告诉编译器“对于这个逻辑部分，创建代码的设备编译版本和主机编译版本”。这明确告诉编译器您希望能够在设备中使用这部分代码。加上这个，

显然，在这种情况下，编译器生成设备代码所需的装饰级别发生了一些变化。据推测，对于较旧的编译器，结构中的 __device__ 关键字足以让编译器知道它必须生成可由 cuComplex 类型调用的运算符的设备版本。

# c# - 网络流二进制序列化

> ID：12773129
> 
> 赞同：2
> 
> 时间：2012-10-07T21:44:05.307
> 
> 标签：c#, serialization, tcp

嘿，伙计们，我正在制作一个聊天程序，我有一个父“MessagePacket”类，其中包含一堆用于发送不同类型数据包的子类，或者包含主聊天窗口的消息，当前聊天的人员列表，私人聊天消息等

在客户端，我做的第一件事是创建一个“AddClientPacket”并将其序列化/发送到服务器，然后服务器将其反序列化为其父“MessagePacket”类，该类包含一个类型属性，用于确定要转换/做什么使用它得到的通用 MessagePacket。

当服务器尝试反序列化它会导致崩溃，我不知道为什么。继承人一些代码：

- 服务器 -

```
 private void HandleClientComm(Object client)
    {
        Client addClient = new Client(clientIds++, ((TcpClient)client).GetStream());

        IFormatter formatter = new BinaryFormatter();

        while (true)
        {
            MessagePacket packet = new MessagePacket();

            try
            {
                packet = (MessagePacket)formatter.Deserialize(addClient.ClientStream);
            }
            catch (Exception e)
            {
                MessageBox.Show(e.Message);
            }

            switch (packet.Type)
            {
                case MessageType.ALLCHAT:
                    {
                        messages.Enqueue(((AllChatPacket)packet).Message);
                    }
                break;
                case MessageType.ADDCLIENT:
                    {

                        addClient.ClientName = ((AddClientPacket)packet).ClientName;
                        clientNames.Add(addClient.ClientName);
                        clientList.Add(addClient);
                    }
                break;
                case MessageType.REMOVECLIENT:
                   {
                       clientNames.Remove(addClient.ClientName);
                       clientList.Remove(addClient);
                   }
                   break;
                case MessageType.PRIVATECHAT:
                   {

                   }
                   break;
            }
        }
    } 
```

- 客户 -

```
 public void ListenToServer()
    {
        AddClientPacket addClient = new AddClientPacket();
        addClient.Type = MessageType.ADDCLIENT;

        name = addClient.ClientName = Interaction.InputBox("Whats your name", "Name?", "", 100, 100);

        try
        {
            formatter.Serialize(clientStream, addClient);
        }
        catch (Exception e)
        {
            MessageBox.Show(e.Message);
            this.Close();
            return;
        }

        while (true)
        {
            if (quit)
            {
                break;
            }

            MessagePacket packet = new MessagePacket();

            try
            {
                packet = (MessagePacket)formatter.Deserialize(clientStream);
            }
            catch (Exception)
            {
                return;
            }

            switch (packet.Type)
            {
                case MessageType.ALLCHAT:
                    {
                        textBox1.Text = textBox1.Text + Environment.NewLine + ((AllChatPacket)packet).Message;
                        textBox1.Refresh();
                    }
                    break;
                case MessageType.NAMELIST:
                    {
                        clientNameList.DataSource = ((NameListPacket)packet).ClientNames;
                    }
                    break;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:23:30.237

那将是问题所在。即使它们对您“看起来”相同，具有相同的属性，但如果它们在两个不同的程序集中定义，.NET 会将它们视为完全不同的类型，因此不会让您序列化 TypeA 并将其反序列化为 TypeB。您将不得不使用两个共享的类定义创建一个 .dll。

# sql-server-2008 - Glassfish“连接已关闭”错误与连接池、JDBC 和 SQL Server 2008

> ID：12773137
> 
> 赞同：0
> 
> 时间：2012-10-07T21:45:02.857
> 
> 标签：sql-server-2008, jdbc, glassfish, connection-pooling

当我尝试在 JSF 页面中执行多个事务时，我收到以下错误：

```
A potential connection leak detected for connection pool MSSQL. The stack trace of the thread is provided below : 
com.sun.enterprise.resource.pool.ConnectionPool.setResourceStateToBusy(ConnectionPool.java:324)
com.sun.enterprise.resource.pool.ConnectionPool.getResourceFromPool(ConnectionPool.java:758)
com.sun.enterprise.resource.pool.ConnectionPool.getUnenlistedResource(ConnectionPool.java:632)
com.sun.enterprise.resource.pool.AssocWithThreadResourcePool.getUnenlistedResource(AssocWithThreadResourcePool.java:196)
com.sun.enterprise.resource.pool.ConnectionPool.internalGetResource(ConnectionPool.java:526)
com.sun.enterprise.resource.pool.ConnectionPool.getResource(ConnectionPool.java:381)
com.sun.enterprise.resource.pool.PoolManagerImpl.getResourceFromPool(PoolManagerImpl.java:245)
com.sun.enterprise.resource.pool.PoolManagerImpl.getResource(PoolManagerImpl.java:170)
com.sun.enterprise.connectors.ConnectionManagerImpl.getResource(ConnectionManagerImpl.java:338)
com.sun.enterprise.connectors.ConnectionManagerImpl.internalGetConnection(ConnectionManagerImpl.java:301)
com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:190)
com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:165)
com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:160)
com.sun.gjc.spi.base.DataSource.getConnection(DataSource.java:113)
cl.codesin.colegios.util.persistencia.DAOManejador.abrir(DAOManejador.java:126) 
```

请注意我粘贴的最后一行：

```
cl.codesin.colegios.util.persistencia.DAOManejador.abrir(DAOManejador.java:126) 
```

`abrir`执行以下操作：

```
public void abrir() throws SQLException {
    try
    {
        if(this.con==null || this.con.isClosed())
            this.con = fuenteDatos.getConnection();
    }
    catch(SQLException e)
    {
        throw e;
    }
} 
```

它以这种方式在单例 DAO 管理器中工作：DAO 管理器具有每个 DAO 的一个实例，并管理每个 DAO 共享的单个连接。当请求 DAO 时，它会执行以下操作：

```
public DAORegion getDAOregion() throws SQLException {
        try
        {
            if(con == null) //con is the connection the DAO manager uses
            {
                this.abrir();
            }
        }
        catch(SQLException e)
        {
            throw e;
        }
        if(this.DAOregion==null)
        {
            this.DAOregion = new DAORegion(this.con);
        }
        return DAOregion;
    } 
```

关闭连接时，管理器只需调用即可`con.close()`。

顺便说一句，我没有persistence.xml，因为我正在使用JDBC。

我究竟做错了什么？事先谢谢你。

编辑：通过停用 Glassfish 服务器的泄漏检测，我可以避免异常，但是我仍然收到“连接关闭”错误。最糟糕的是，现在我不知道错误究竟是在哪里引发的。

编辑 2：我再次更换了我的 DAO 经理。这是实现。

```
public class DAOManejador {

    public static DAOManejador getInstancia() {
        return DAOManejadorSingleton.INSTANCIA;
    }

    //This is just a sample, every getDAOXXX works the same.
    public DAOUsuario getDAOusuario() throws SQLException {
        try
        {
            if(con == null)
            {
                this.abrir();
            }
        }
        catch(SQLException e)
        {
            throw e;
        }
        if(this.DAOusuario==null)
        {
            this.DAOusuario = new DAOUsuario(this.con, this.stmt, this.res);
        }
        return DAOusuario;
    }

    public void abrir() throws SQLException {
        try
        {
            if(this.con==null || this.con.isClosed())
                this.con = fuenteDatos.getConnection();
        }
        catch(SQLException e)
        {
            throw e;
        }
    }

    public void iniciaTransaccion() throws SQLException {
        try
        {
            con.setAutoCommit(false);
        }
        catch(SQLException e)
        {
            throw e;
        }
    }

    public void cierraTransaccion()  throws SQLException {
        try
        {
            con.setAutoCommit(true);
        }
        catch(SQLException e)
        {
            throw e;
        }
    }

    public void comprometer() throws SQLException {
        try
        {
            con.commit();
        }
        catch(SQLException e)
        {
            throw e;
        }
    }

    public void deshacer() throws SQLException {
        try
        {
            con.rollback();
        }
        catch(SQLException e)
        {
            throw e;
        }
    }

    public void cerrar() throws SQLException {
        try
        {
            if(this.stmt!=null && !this.stmt.isClosed())
                stmt.close();

            if(this.res!=null && !this.res.isClosed())
                this.res.close();

            if(this.con!=null && !this.con.isClosed())
                con.close();
        }
        catch(SQLException e)
        {
            throw e;
        }
    }

    public void comprometerYTerminarTransaccion() throws SQLException {
        try
        {
            this.comprometer();
            this.cierraTransaccion();
        }
        catch(SQLException e)
        {
            throw e;
        }
    }

    public void comprometerYCerrarConexion() throws SQLException {
        try
        {
            this.comprometer();
            this.cierraTransaccion();
            this.cerrar();
        }
        catch(SQLException e)
        {
            throw e;
        }
    }

    //Protegidos
    @Override
    protected void finalize() throws SQLException, Throwable
    {
        try
        {
            this.cerrar();
        }
        finally
        {
            super.finalize();
        }
    }

    //Private
    private DataSource fuenteDatos;
    private Connection con = null;
    private PreparedStatement stmt = null;
    private ResultSet res = null;

    private DAOUsuario DAOusuario = null;
    private DAORegion DAOregion = null;
    private DAOProvincia DAOprovincia = null;
    private DAOComuna DAOcomuna = null;
    private DAOColegio DAOcolegio = null;

    private DAOManejador() throws Exception {
        try
        {
            InitialContext ctx = new InitialContext();
            this.fuenteDatos = (DataSource)ctx.lookup("jndi/MSSQL");
        }
        catch(Exception e){ throw e; }
    }

    private static class DAOManejadorSingleton {
        public static final DAOManejador INSTANCIA;
        static
        {
            DAOManejador dm;
            try
            {
                dm = new DAOManejador();
            }
            catch(Exception e)
            { dm=null; }
            INSTANCIA = dm;
        }
    }

} 
```

我现在所做的是为每个 DAO 提供一个访问点。当一个 DAO 想要使用一个语句或资源时，它们都会使用同一个。当他们需要再次打开一个时，系统会执行以下操作：

```
public abstract class DAOGenerico<T> {

    //Protected
    protected final String nombreTabla;
    protected Connection con;
    protected PreparedStatement stmt;
    protected ResultSet res;

    protected DAOGenerico(Connection con, PreparedStatement stmt, ResultSet res, String nombreTabla) {
        this.nombreTabla = nombreTabla;
        this.con = con;
        this.stmt = stmt;
        this.res = res;
    }

    //Prepares a query
    protected final void prepararConsulta(String query) throws SQLException 
    {            
        try
        {
            if(this.stmt!=null && !this.stmt.isClosed())
                this.stmt.close();
            this.stmt = this.con.prepareStatement(query);
        }
        catch(SQLException e){ throw e; }
    }

    //Gets a ResultSet
    protected final void obtenerResultados() throws SQLException {
        try
        {
            if(this.res!=null && !this.res.isClosed())
                this.res.close();
            this.res = this.stmt.executeQuery();
        }
        catch(SQLException e){ throw e; }
    }

} 
```

它*仍然*不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:20:14.603

~~关闭连接时我尝试不做任何事情。我在方法中注释了代码`cerrar`，出于某种原因，它有效！即使这是一个不好的做法！可以保持这样，还是我应该找到关闭连接的方法？~~

忽略这一点，我发现了问题所在。我希望将来有人可以很好地利用它。

# 问题

```
if(this.con==null || this.con.isClosed())
    this.con = fuenteDatos.getConnection(); 
```

每次我尝试打开一个连接时，我都会得到一个**全新的**连接。这有什么问题？

```
public DAOUsuario getDAOusuario() throws SQLException {
    try
    {
        if(con == null)
        {
            this.abrir();
        }
    }
    catch(SQLException e)
    {
        throw e;
    }
    if(this.DAOusuario==null)
    {
        this.DAOusuario = new DAOUsuario(this.con, this.stmt, this.res);
    }
    return DAOusuario;
} 
```

只有当我创建一个新的 DAO 实例时，我才会为它分配一个新的连接。那么在下面的情况下会发生什么？

```
DAOManejador daoManager = DAOManejador.getInstancia(); //Get an instance of the DAO manager
daoManager.abrir(); //Open the connection
DAOUsuario daoUser = daoManager.getDAOusuario(); //Get a DAOUsuario, a type of DAO. It'll have the same connection as the DAOManager, and it'll be stored in the instance of the DAO manager
... //Do database stuff
daoManager.cerrar(); //Close the connection
daoManager.abrir(); //Open the connection again. Note that this will be a new instance of the conection rather than the old one 
```

如果从这里开始，您尝试执行数据库操作，您将收到*连接关闭*错误，因为`daoUser`仍会保留旧连接。

# 我做了什么

我修改了 DAO 管理器类。它不再有`getDAOXXX()`每个 DAO，而是以下内容：

```
public DAOGenerico getDAO(Tabla t) throws SQLException {
    try
    {
        if(con == null || this.con.isClosed())
        {
            this.abrir();
        }
    }
    catch(SQLException e)
    {
        throw e;
    }
    switch(t)
    {
        case REGION:
            return new DAORegion(this.con, this.stmt, this.res);
        case PROVINCIA:
            return new DAOProvincia(this.con, this.stmt, this.res);
        case COMUNA:
            return new DAOComuna(this.con, this.stmt, this.res);
        case USUARIO:
            return new DAOUsuario(this.con, this.stmt, this.res);
        case COLEGIO:
            return new DAOColegio(this.con, this.stmt, this.res);
        default:
            throw new SQLException("Se intentó vincular a una tabla que no existe.");
    }
} 
```

每次用户请求 DAO 时，它都会要求管理器返回正确类型的 DAO。但是管理器不会存储每个实例，而是根据当前连接创建新实例（`con`是连接，`stmt`是 PreparedStatement 并且`res`是 ResultSet - 它们将被使用，因此当管理器关闭连接时可以关闭它们，因此不会泄漏） . `Tabla`是`enum`在数据库中保存当前表名，因此它可以返回正确的 DAO。这没有任何问题。**该类的其余部分是相同的，所以如果您想使用它，只需将`DAOUsuario`方法替换为上面的方法，它应该可以正常工作**。

# asp.net - 需要与普通路由配置类似的区域路由配置

> ID：12773142
> 
> 赞同：-1
> 
> 时间：2012-10-07T21:46:19.683
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, asp.net-mvc-routing

我正在使用`ASP.NET MVC3`. 我正在尝试配置我的路线，但似乎有冲突的路线。不知道如何解决它，希望有人能指出我正确的方向。

我的网站中有 2 个部分可以查看应用程序。网站的普通用户只能查看他/她的应用程序。并且管理员可以使用管理区域查看所有捕获的应用程序。

可以将注释添加到已经存在的应用程序中。备注只是在申请过程中可以随时获取的附加信息。我希望显示已为这样的应用程序捕获的所有注释：

```
/Application/1001/Notes
/Administration/Application/1001/Notes 
```

这就是我配置路线的方式：

```
Routes.MapRoute(
     "ApplicationNote",
     "{controller}/{applicationId}/Notes",
     new { controller = "Application", action = "Notes" },
     new { applicationId = @"\d+" },
     new[] { "MyProject.Web.Controllers" });

Routes.MapRoute(
     "AdminApplicationNote",
     "{area}/{controller}/{applicationId}/Notes",
     new { area = "Administration", controller = "Application", action = "Notes" },
     new { applicationId = @"\d+" },
     new[] { "MyProject.Web.Areas.Administration.Controllers" }); 
```

为了显示第一个链接（在数据表中的每个应用程序旁边），我的控制器中有以下内容，它将为每条记录生成操作链接：

```
string actionLinks = string.Empty;
actionLinks += "<a href=\"" + Url.Action("Notes", "Application", new { area = string.Empty, applicationId = application.Id }) + "\">" + "Notes</a>"; 
```

我这样显示的第二个链接（来自我的控制器操作，与上面相同）：

```
string actionLinks = string.Empty;
actionLinks = "<a href=\"" + Url.Action("Notes", new { applicationId = application.Id, area = "Administration", controller = "Application" }) + "\">" + "Notes</a>"; 
```

第一个配置效果很好：

```
/Application/1001/Notes 
```

...但第二个不太好。当我将鼠标悬停在第二个配置的链接上时，状态显示：

```
/Administration/Application/Notes?applicationId=1001 
```

我在管理区域的路由配置中做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T23:02:00.310

添加约束区域 = string.Empty

```
 routes.MapRoute(
        "ApplicationNote",
        "{controller}/{applicationId}/Notes",
        new { controller = "Application", action = "Notes" }, 
        new { applicationId = @"\d+", area = string.Empty }, //<----
        new[] { "MyProject.Web.Controllers" }
   ); 
```

# java - 用于描述 UI 的 Java DSL？

> ID：12773151
> 
> 赞同：4
> 
> 时间：2012-10-07T21:48:59.283
> 
> 标签：java, eclipse, netbeans, user-interface, dsl

我想知道在我们的一个项目中用基于 DSL 的文件替换基于 XML 的表单文件。XML 文件描述了一个窗口，其中的组件放置在不同的容器中，并且事件侦听器附加到它们。UI 的类型表示它可以接受哪种数据以及如何将其保存回数据库。我知道这不是一个好的设计，但它是一个遗留系统，我们无法将整个架构从一天更改为另一天:)

我喜欢使用 DSL 来：

*   提高可读性
*   在 IDE 中提供代码完成（当前 XML 没有任何模式定义）
*   可选地在 UI 定义中包含事件监听器代码

目前它看起来像：

```
<Form type="BIBLIOGRAPHY" name="BOOK" maximizable="false" minimizable="true">
  <Size width="320" height="240" />
  <Tab name="FIRST_PAGE">
    <Control type="INPUT.FIELD" name="SOME_FIELD" value="database_column" />
  </Tab>
</Form> 
```

我喜欢用类似的东西代替它：

```
form(type=FormType.BIBLIOGRAPHY, name=FormName.BOOK, maximizable=false, minimizable=true) {
  size = { width = 320, height = 240 }
  tab(name="FIRST_PAGE") {
    input(name="SOME_FIELD", value="database_column")
  }
} 
```

我考虑过[将 Groovy 用作 DSL](http://groovy.dzone.com/news/groovy-dsl-scratch-2-hours)，它通过闭包和元类为此提供了良好的基础。但是我注意到代码完成需要 DSLD，并且仅在 Eclipse 和 IntelliJ 中支持使用这些。团队成员大多使用 NetBeans。因为具有正确编写的 XML Schema 的 XML 可以更好地支持这一点。

我还阅读了有关 Java DSL 的信息，在我的情况下，可以通过结合[fluent API 接口](http://blog.jooq.org/2012/01/05/the-java-fluent-api-designer-crash-course/)和[构建器模式](http://en.wikipedia.org/wiki/Builder_pattern)来实现。最大的优势是这会生成 Java 代码，因此代码完成、Javadocs 等一切都可以在 IDE 中开箱即用。我可以使用完全理解 Java 的 Groovy 来使用动态编译。然而，这引入了非标准 Java bean 和 Spring 之外的 setter（我们刚刚用 Spring 替换了项目的主干，所以它对我们很重要）。我不知道我们是否会直接在 Spring 中使用这些 UI 类，但我喜欢保留这个选项。此外，Java DSL 看起来有点难看，它可能需要大量的手写代码才能工作。

做这样的事情是一个好习惯吗？有没有其他解决方案可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:23:15.620

我个人对内部 DSL 持怀疑态度，因为底层语言语法迟早会出现在您的表达式中，使它们看起来很难看，并最终迫使您真正理解在输入它们时发生的事情。因此，在您的情况下，我要么坚持使用基于 XML 的定义，要么使用普通的 Java fluent API/builder 模式。

# jakarta-ee - 关于 Java SE 和 Java EE 的困惑

> ID：12773152
> 
> 赞同：2
> 
> 时间：2012-10-07T21:49:01.010
> 
> 标签：jakarta-ee, sdk, java

我正在愉快地使用带有 Eclipse 的 Java SE，但现在我要编写一个需要`javax.mail`包的“发送邮件”程序。我在 Java EE 中发现了它，所以我下载了一个（180MB），我知道 Java EE 安装需要 SE JDK/JRE。`c:\java\jdk1.7`因为我在（不是默认路径）中安装了 Java SE，所以我`-j c:\java\jdk1.7`用来安装 Java EE。我有几个问题。

1.  如何让 Eclipse 加载 Java EE 包？我应该更改 Java EE 中的 JRE 吗？现在 Eclipse 仍然只知道 SE lib。

2.  我们是否有包含来自 Java EE 的 API 的 JDK 版本？因为我真的不想在我的电脑上安装两个 JRE，而且我不需要 Glassfish。谁能告诉我应该下载哪一个？

3.  有`src.zip`Java EE api 吗？我找不到它了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T21:57:01.943

**获取 Java 邮件**

`Java Mail API`从[Oracle 网站](http://www.oracle.com/technetwork/java/javamail/index-138643.html)下载。提取 JAR（`mailapi.jar`具有所需的`java.mail`包）并通过以下方式放入您的 CLASSPATH：

```
RightClick(project) -> properties -> Java Build Path -> Libraries 
-> add Jars/Add External Jars (depends where you put your JARS) 
```

**更新 JRE** 在 Eclipse 中，使用如下菜单选项：

```
 window -> preferences->  Java -> Installed JREs -> Add 
```

给出路径`c:\java\jdk1.7`并按照步骤完成。完成后，`JDK 1.7`将出现在列表`checkbox`的前面。选择`checkbox`并按`OK`。

如果您还没有完成任何项目特定设置，那么您应该已准备就绪。

要验证项目特定设置，请执行以下步骤：

```
 RightClick(project) -> properties -> Java Build Path -> Libraries. 
```

您`JDK 1.7`应该出现在右窗格中。

# jquery - 当用户滚动时在主导航下创建一个滑动指示器

> ID：12773154
> 
> 赞同：1
> 
> 时间：2012-10-07T21:49:07.750
> 
> 标签：jquery, css, navigation

我想知道是否可以创建一个在用户向下滚动页面时在主导航底部移动的指示器。[这](http://imgur.com/6CQfa.jpg)是我希望使我的主导航看起来像的图像。

目标是让标签部分随着用户滚动到页面的不同部分而移动。

这可能吗？如果是这样，你能指出我的教程或 jquery 插件的方向吗？谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T22:53:25.587

一些插件做得很好：

[http://imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)

[http://curtain.victorcoulon.fr/](http://curtain.victorcoulon.fr/)

[http://johnpolacek.github.com/scrolldeck.js/](http://johnpolacek.github.com/scrolldeck.js/)

[http://pagescroller.com/](http://pagescroller.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T09:49:50.570

Twitter Bootstrap 中的 Scrollspy 直接开箱即用。

[http://getbootstrap.com/javascript/#scrollspy](http://getbootstrap.com/javascript/#scrollspy) - 告诉你怎么做。

向下滚动页面并密切关注左侧菜单，您也会看到效果。

# sql - ALTER SCHEMA sql 查询中的连字符

> ID：12773159
> 
> 赞同：1
> 
> 时间：2012-10-07T21:49:54.867
> 
> 标签：sql, sql-server

我不断收到以下查询的错误

```
ALTER SCHEMA dbo TRANSFER domain-USERS\user.tablename; 
```

我尝试使用不同名称的同一数据库的其他表，它工作正常。（如用户名.tablename）

所以我认为问题在于用户名中的连字符。

我也尝试了以下查询，但没有帮助。

```
ALTER SCHEMA dbo TRANSFER 'domain-USERS\user'.tablename;

ALTER SCHEMA dbo TRANSFER 'domain-USERS\user.tablename'; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:21:12.433

这是将表 [A] 从模式 [B] 转移到模式 [C] 的正确语法。

```
ALTER SCHEMA C TRANSFER [B].[A] 
```

在 的右侧`TRANSFER`，不应有 WINDOWS 登录名。

# java - 如何使用递归计算树中的最高级别？

> ID：12773160
> 
> 赞同：2
> 
> 时间：2012-10-07T21:49:58.360
> 
> 标签：java, recursion, tree, parent-child

于是就有了使命。我们有一个类，叫 NODE，实例是“node”。这个节点有很多孩子，这些孩子也有很多孩子，等等等等。我怎么能算出这棵树的最高层呢？ETC：

*   节点 -> child1 -> child1.1 -> child1.1.1，child 1.1.2 -> child1.1.2.1
*   节点-> child2
*   节点 -> child3 -> child3.1，child3.2 -> child3.2.1

这棵树中的最高级别是4（child1.1.2.1的级别，节点的级别是0）请帮帮我！我知道，我应该使用递归方法，但我不知道如何，如果有人可以解决这个问题，并编写代码......请......谢谢！该方法应从以下开始：

```
public int maxLevel(NODE node){... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T21:57:20.103

此方法返回基本情况的级别 1（有 0 个孩子）：

```
public int maxLevel() {
    int maxChildLevel = 0;
    for (Node child : children) {
        maxChildLevel = Math.max(maxChildLevel, child.maxLevel());
    }
    return maxChildLevel + 1;
} 
```

此示例旨在声明`maxLevel`为 的实例方法`Node`，因此无需将 a`Node`作为参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T22:02:02.053

你可以尝试这样的事情：

```
public static int maxLevel(Node node) {
    if (node.children.length == 0) return 1;

    int max = maxLevel(node.children[0]);
    for (int i = 1 ; i < node.children.length ; i++) {
        int n = maxLevel(node.children[i]);
        if (n > max) max = n;
    }

    return max + 1;
} 
```

其中`node.children`是由 的子节点组成的数组`node`。

# ruby-on-rails - Rails：允许用户使用选择在不同视图之间切换

> ID：12773161
> 
> 赞同：2
> 
> 时间：2012-10-07T21:50:15.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如何允许用户使用选择菜单在相同内容的不同视图之间切换。[例如查看http://railscasts.com/](http://railscasts.com/)的右侧。您可以在列表视图、表格视图和网格缩略图视图之间切换。什么是实现这一目标的好方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T22:24:31.960

您可以为每个视图设置一个部分，并使用`session`来存储首选项或简单地使用`params`.

```
def index
  # ... code here
  @partial = params[:view] || "default" # "grid", "list", etc.
end 
```

在`index.html.erb`：

```
<%= render @partial %> 
```

然后将每个视图部分保存在控制器的视图文件夹中，例如`_grid.html.erb`,`_list.html.erb`和`_default.html.erb`

**编辑**

针对对此（现在已有五年历史）答案的评论，我正在撤销/修改我原来的建议。将未经验证的参数传递给 绝不是一个好主意`render`，因为它有可能从您的文件系统中公开任意数据。而是推荐一种白名单方法：

```
def index
  @partial = whitelisted_partial || 'default'
end

def whitelisted_partial
  %w(grid list).detect { |str| str == params[:view] }
end 
```

并更直接地回应评论：

```
render partial: @partial, locals: { ... } 
```

# android - Google Play：“服务器无法处理您的 apk。再试一次。”

> ID：12773163
> 
> 赞同：1
> 
> 时间：2012-10-07T21:50:23.667
> 
> 标签：android, apache-flex, flash-builder, google-play

我无法将特定应用程序上传到 Play 商店。我正在使用 Flash Builder 4.6 对其进行打包。

上传完成后，我收到消息“服务器无法处理您的 apk。再试一次。” 在 3 天的时间里，我用不同的配置尝试了大约 20 次。没运气。

问题一定出在apk上，因为我成功上传了另一个test.apk文件来检查服务器。

我尝试了以下方法：

1）删除标签（没有，所以没关系）

2) 运行 aapt dump badging 并修复错误（没有）

3) 从另一个上传的 apk 复制清单并替换相关数据（包、名称等）

app.xml 文件的 android 清单部分。

```
 <android>
    <colorDepth>16bit</colorDepth>
    <manifestAdditions><![CDATA[
        <manifest android:installLocation="preferExternal">
            <!--See the Adobe AIR documentation for more information about setting Google Android permissions-->
            <!--Removing the permission android.permission.INTERNET will have the side effect
    of preventing you from debugging your application on your device-->
            <uses-permission android:name="android.permission.INTERNET"/>
            <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
            <!--<uses-permission android:name="android.permission.READ_PHONE_STATE"/>-->
            <!--<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>-->
            <!--The DISABLE_KEYGUARD and WAKE_LOCK permissions should be toggled together
    in order to access AIR's SystemIdleMode APIs-->
            <!--<uses-permission android:name="android.permission.DISABLE_KEYGUARD"/>-->
            <!--<uses-permission android:name="android.permission.WAKE_LOCK"/>-->
            <!--<uses-permission android:name="android.permission.CAMERA"/>-->
            <!--<uses-permission android:name="android.permission.RECORD_AUDIO"/>-->
            <!--The ACCESS_NETWORK_STATE and ACCESS_WIFI_STATE permissions should be toggled
    together in order to use AIR's NetworkInfo APIs-->
            <!--<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>-->
            <!--<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>-->
        </manifest>

    ]]></manifestAdditions>
</android> 
```

有人有任何理论吗？在这个阶段完全没有想法......

干杯!

编辑： aapt d 徽章的输出：

```
package: name='air.com.tspoon.BF3Loadouts' versionCode='1000000' versionName='1.0.0'
application-label:'BF3 Tactics'
application-label-ja:'BF3 Tactics'
application-label-de:'BF3 Tactics'
application-label-nl:'BF3 Tactics'
application-label-pl:'BF3 Tactics'
application-label-ko:'BF3 Tactics'
application-label-fr:'BF3 Tactics'
application-label-tr:'BF3 Tactics'
application-label-cs:'BF3 Tactics'
application-label-es:'BF3 Tactics'
application-label-it:'BF3 Tactics'
application-label-pt:'BF3 Tactics'
application-label-ru:'BF3 Tactics'
application-label-sv:'BF3 Tactics'
application-label-zh_CN:'BF3 Tactics'
application-label-zh_TW:'BF3 Tactics'
application-icon-120:'res/drawable-ldpi/icon.png'
application-icon-160:'res/drawable-mdpi/icon.png'
application-icon-240:'res/drawable-hdpi/icon.png'
application: label='BF3 Tactics' icon='res/drawable-mdpi/icon.png'
launchable-activity: name='air.com.tspoon.BF3Loadouts.AppEntry'  label='BF3 Tactics' icon=''
sdkVersion:'8'
targetSdkVersion:'14'
uses-permission:'android.permission.INTERNET'
uses-permission:'android.permission.WRITE_EXTERNAL_STORAGE'
uses-permission:'android.permission.READ_EXTERNAL_STORAGE'
uses-implied-permission:'android.permission.READ_EXTERNAL_STORAGE','requested  WRITE_EXTERNAL_STORAGE'
uses-feature:'android.hardware.touchscreen'
uses-implied-feature:'android.hardware.touchscreen','assumed you require a touch screen unless explicitly made optional'
main
supports-screens: 'small' 'normal' 'large' 'xlarge'
supports-any-density: 'true'
locales: '--_--' 'ja' 'de' 'nl' 'pl' 'ko' 'fr' 'tr' 'cs' 'es' 'it' 'pt' 'ru' 'sv' 'zh_CN' 'zh_TW'
densities: '120' '160' '240'
native-code: 'armeabi-v7a' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:10:18.357

If you use drawable file for the icon from android standard icons like @android:drawable/ic_dialog_alert. the parser failed to find the ic_dialog_alert file in the res/drawable directory and raise an error.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:50:04.800

很可能，您的清单 xml 文件中有错误。

在您的 SDK 平台工具中，您可以找到 aapt

运行此 aapt 转储标记

从这个[链接得到答案](http://www.androidpit.com/en/android/forum/thread/496760/Google-play-The-server-could-not-process-your-apk-Try-again#p1292500)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T22:44:00.697

更新：在联系 Google Play 开发者支持后，我发现了这个问题......

```
My icon files were too big! 
```

我的图标每个大约 140k，当我将它们减少到 10k 时，它就完美了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-04T15:17:08.633

我也在使用 Flash Builder 4.6

我已经成功上传了 0.9.45 版本。然后我升级到 0.9.5，但不断收到“您必须上传高于 0945 的版本”错误。我尝试了各种方法，包括建议让图标尺寸更小。没有任何效果。

最后我决定只更改为 1.0.0，然后它被 Google Play 接受（！）

# c# - MVC3 的编辑操作中的 SaveChanges

> ID：12773169
> 
> 赞同：0
> 
> 时间：2012-10-07T21:51:16.797
> 
> 标签：c#, asp.net-mvc-3, entity-framework-4.1

我是 MVC 的新手，在保存操作的编辑信息时遇到了麻烦。每次我尝试保存更改时，我都会得到： **存储更新、插入或删除语句影响了意外的行数 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目。**

这是我的代码：

```
 [Authorize]
    [HttpPost]
    public ActionResult Profile(designer thisDesigner)
    {
        if (ModelState.IsValid)
        {
            db.Entry(thisDesigner).State = System.Data.EntityState.Modified;

            try
            {
                db.SaveChanges();
            }
            catch (Exception)
            {
                return View(thisDesigner);
            }
        }

        return RedirectToAction("Profile");
    } 
```

还尝试查询新对象，然后设置并保存新值，在这种情况下不会出现异常，但不会保存数据。这是代码：

```
 [Authorize]
    [HttpPost]
    public ActionResult Profile(designer thisDesigner)
    {
        designer updateDesigner = db.designers.Find(thisDesigner.designer_id);

        if (ModelState.IsValid && updateDesigner != null)
        {
            db.Entry(updateDesigner).OriginalValues.SetValues(thisDesigner);

            db.Entry(updateDesigner).State = System.Data.EntityState.Modified;

            try
            {
                db.SaveChanges();
            }
            catch (Exception)
            {
                return View(thisDesigner);
            }
        }

        return RedirectToAction("Profile");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:27:20.390

得到它的工作:) 只需将我的模型的所有属性添加到页面，如下所示：

```
@Html.HiddenFor(model => model.designer_id)
@Html.HiddenFor(model => model.designer_login_status)
@Html.HiddenFor(model => model.designer_register_date)
@Html.HiddenFor(model => model.designer_small_logo)
@Html.HiddenFor(model => model.designer_status)
@Html.HiddenFor(model => model.designer_vip_date) 
```

并使用第一个示例中的相同代码：

```
[Authorize]
[HttpPost]
public ActionResult Profile(designer thisDesigner)
{
    if (ModelState.IsValid)
    {
        db.Entry(thisDesigner).State = System.Data.EntityState.Modified;

        try
        {
            db.SaveChanges();
        }
        catch (Exception)
        {
            return View(thisDesigner);
        }
    }

    return RedirectToAction("Profile");
} 
```

# java - Spring RestTemplate，GsonHttpMessageConverter

> ID：12773170
> 
> 赞同：2
> 
> 时间：2012-10-07T21:51:19.500
> 
> 标签：java, spring, gson

给定 JSON

```
{"news" : [ {...}, {...}, {...} ] } 
```

该数组包含自定义对象，我已经将其声明为 POJO。想要我只想通过键路径“新闻”映射我的自定义对象。

```
restTemplate.exchange(URI + "/news/{limit}/", HttpMethod.GET, CustomObject[].class, 10) 
```

抛出异常，因为这个 JSON 是预期的

```
[ {...}, {...}, {...}] 
```

有没有办法配置 RestTemplate 以满足我的需求？

问候

**更新：**

```
restTemplate.exchange(URI + "/news/{limit}/", HttpMethod.GET, requestEntity, JsonElement.class,10).getBody().getAsJsonObject().get("news");
CustomObject[] result = gson.fromJson(body, CustomObject[].class); 
```

这个片段有效，但有更清洁的方法吗？令我惊讶的映射到`JSONObject`甚至不起作用，JSONElement 最终完成了这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:24:09.533

好吧，我将在此处添加我的更新以结束此问题。如果有人可以提供更清洁的解决方案，我很乐意接受：

```
restTemplate.exchange(URI + "/news/{limit}/", HttpMethod.GET, requestEntity, JsonElement.class,10).getBody().getAsJsonObject().get("news");
CustomObject[] result = gson.fromJson(body, CustomObject[].class); 
```

这个片段有效，但有更清洁的方法吗？对于我对 JSONObject 的意外映射甚至不起作用，JSONElement 最终完成了这项工作。

# css - 使导航栏下滚动的内容不可见但导航栏具有透明度的方法

> ID：12773171
> 
> 赞同：0
> 
> 时间：2012-10-07T21:51:25.603
> 
> 标签：css

我不知道该怎么做：

我有一个全屏背景图像，一个固定在顶部的 50% 透明度的导航栏，以及它下面的内容。如何让导航栏保持背景图像的透明度，并且仍然具有滚动内容？

现在的问题是，当我向下滚动时，内容会在导航栏下方，并通过透明度显示，这显然看起来很糟糕。

基本上，我希望页面的内容滚动并消失在导航栏的底部。我知道我可以使导航栏不透明并为此使用背景图像，但我宁愿只拥有一个全屏背景图像。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T21:57:05.393

将内容放在具有固定大小的块（div）中，例如将其拉伸到除导航栏大小之外的整个页面。然后使用 css 属性使该 div 可滚动`overflow:scroll`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-28T19:15:01.630

我知道这已经很老了，但我花了很多时间寻找答案并找到了一个好的解决方案，所以我会将它发布给其他正在寻找它的人。

将导航栏放置在包含背景图像的元素中，并将导航栏的背景设置为继承。这可以防止内容在您向下滚动时出现在导航栏后面。

# jquery - 如何设置一个的id和类名 ?

> ID：12773176
> 
> 赞同：0
> 
> 时间：2012-10-07T21:52:10.673
> 
> 标签：jquery, html

我的问题很简单，但我尝试了不同的解决方法。我有以下代码。我正在创建新的`<div>`并试图给它一个类名**测试**。所以当我`<div>`用类测试点击这个时，我试图提高警惕......请帮助我，我迷路了......

```
$('.item').click(function(){
        if(!isFullscreen){ // MAXIMIZATION
            $boxes = $(this).css('width','100%');
            $boxes.addClass("test");
            //$boxes.id = "test"; 
            $('#content').prepend( $boxes ).masonry( 'reload' );
        }
});

$(".test").click(function(){
    alert("Test");

}); 
```

我什至尝试了下面的代码：但它们没有用

```
 //$boxes.className="test";
        //jQuery($boxes).attr("id","test"); 
```

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T21:54:37.817

您应该委托该事件：

```
$("#content").on('click', '.test', function() {
    alert("Test");
}); 
```

要向单击的元素添加 ID，您可以编写代码：

```
this.id = 'test'; 
```

请注意，如果您将相同的 ID 添加到多个元素，您的文档将变为无效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T21:54:34.400

`test`当`item`单击类的元素时，您的第一个函数将创建一个作为该类成员的元素。

您的 section 函数将在运行时向该类的所有成员添加一个单击处理程序`test`……这是**在**`item`单击任何元素之前。

使用[`on`method](http://api.jquery.com/on/)，而不是`click`method 并创建*Delegated 事件*事件（有关说明，请参阅文档）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T21:54:34.270

您需要将 div 添加到正文中...您应该这样做：

```
$(body).append('<div id="test" class="test">');
$boxes = $('#test'); 
```

而且您需要使用委托您的点击功能`on()`

更改`$(".test").click(function(){`为`$('body').on('click', '.test', function(){`

# php - Codeigniter $_GET 在模型中？

> ID：12773178
> 
> 赞同：1
> 
> 时间：2012-10-07T21:52:20.547
> 
> 标签：php, codeigniter

我有一个需要传递给 PHP MySQL 变量的 URL 参数。例如，我的网址是：

```
www.facebook.com/?ref=logo 
```

通常它会 $_GET 来获取 ref 的值。我将如何在 CodeIgniter 模型中执行此操作？据我了解，$_GET 不适用于 CI？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T21:55:11.843

它在输入类中。

```
 $ref = $this->input->get('ref'); 
```

来源：[http ://ellislab.com/codeigniter/user_guide/libraries/input.html](http://ellislab.com/codeigniter/user_guide/libraries/input.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T21:54:49.330

Get 在 CodeIgniter 中工作得很好。您将以与 POST 值类似的方式访问它：

```
$ref = $this->input->get('ref', true); 
```

# php - 如何从 PHP heredoc 表达式中扩展静态类变量？

> ID：12773181
> 
> 赞同：2
> 
> 时间：2012-10-07T21:53:07.597
> 
> 标签：php, static-members, heredoc

我试图让一个静态类变量在类构造函数中的[HEREDOC](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)表达式内展开/解析，但我找不到让它工作的方法。请看下面我非常简化的例子：

```
class foo {

  private static $staticVar = '{staticValue}';

  public $heredocVar;

  public function __construct() {
    $this->heredocVar = <<<DELIM
    The value of the static variable should be expanded here: {self::$staticVar}
DELIM;
  }
}

// Now I try to see if it works...
$fooInstance = new foo;
echo $fooInstance->heredocVar; 
```

这导致以下输出：

```
The value of the static variable should be expanded here: {self::} 
```

此外，我尝试了各种方法来引用静态变量，但没有运气。我正在运行 PHP 5.3.6 版。

* * *

**编辑**

正如 Thomas 所指出的，可以使用实例变量来存储对静态变量的引用，然后在 HEREDOC 中使用*该变量。*以下代码很难看，但确实有效：

```
class foo {

  private static $staticVar = '{staticValue}';

  // used to store a reference to $staticVar
  private $refStaticVar;

  public $heredocVar;

  public function __construct() {
    //get the reference into our helper instance variable
    $this->refStaticVar = self::$staticVar;

    //replace {self::$staticVar} with our new instance variable
    $this->heredocVar = <<<DELIM
    The value of the static variable should be expanded here: $this->refStaticVar
DELIM;
  }
}

// Now we'll see the value '{staticValue}'
$fooInstance = new foo;
echo $fooInstance->heredocVar; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T22:02:02.013

[这个答案](https://stackoverflow.com/a/6288470/1264367)呢？

我会设置`$myVar = self::$staticVar;`然后`$myVar`在 HEREDOC 代码中使用。

# ios - 状态栏框架在没有任何通知的情况下更改

> ID：12773184
> 
> 赞同：10
> 
> 时间：2012-10-07T21:53:25.587
> 
> 标签：ios, nsnotificationcenter, uistatusbar

我已注册接收有关状态栏框架更改的通知，但从未收到。

以下是我注册通知的方式：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(appWillChangeStatusBarFrameNotification:)
                                             name:UIApplicationWillChangeStatusBarFrameNotification
                                           object:nil]; 
```

在我们应用程序的某些地方，我们显示/隐藏状态栏：

```
[[UIApplication sharedApplication] setStatusBarHidden:maximize
                                        withAnimation:UIStatusBarAnimationSlide]; 
```

但它也可以在启用个人热点或打电话时改变大小。有什么方法可以在更改时获取实际的状态栏框架？

[这个问题](https://stackoverflow.com/q/2406175/1693173)意味着由于 SDK 错误，通知不起作用，至少对于方向更改。是这个原因吗？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-27T18:06:40.517

我知道这个问题是不久前发布的，但是这个问题很烦人！`UIApplicationWillChangeStatusBarFrameNotification`和通知仅在`UIApplicationDidChangeStatusBarFrameNotification`方向更改和通话状态栏高度更改时触发。

我通过编写自己的 setStatusBarHidden 类别函数来解决这个问题，我使用该函数而不是普通`UIApplication`函数。不幸的是（正如@progrmr 指出的那样），因为状态栏的高度可能是 20 像素或 40 像素（我们不知道隐藏状态栏的框架在它被取消隐藏之前会变成什么），我们只能可靠地触发带有正确 userInfo ( `UIApplicationDidChangeStatusBarFrameNotification`) 的单个通知。这是我所做的：

```
@implementation UIApplication (statusBar)

- (void)setStatusBarHiddenWithNotification:(BOOL)hidden withAnimation:(UIStatusBarAnimation)animation
{
    if (self.statusBarHidden == hidden) return;

    [self setStatusBarHidden:hidden withAnimation:animation];
    [NSNotificationCenter.defaultCenter postNotificationName:UIApplicationDidChangeStatusBarFrameNotification
                                                      object:nil
                                                    userInfo:@{UIApplicationStatusBarFrameUserInfoKey: [NSValue valueWithCGRect:self.statusBarFrame]}];
}

@end 
```

它有点 hacky，但我喜欢它，因为我可以使用相同的通知观察者来监听通话状态栏框架的变化和我的手动 setStatusBarHidden 框架的变化。

希望这对某人有帮助！

# php - cakephp HABTM 同款

> ID：12773185
> 
> 赞同：2
> 
> 时间：2012-10-07T21:53:54.780
> 
> 标签：php, cakephp, cakephp-2.0, has-and-belongs-to-many, cakephp-model

我有一个在 cakephp 2.0 中开发的网站我想与同一模型建立一个 HABTM 关系：一个产品可以有更多的产品。

我想在我的模型中以这种模式做：

```
class Product extends AppModel {
    public $name = 'Product';
    public $useTable = 'products';
    public $belongsTo = 'User';
    public $actsAs = array('Containable');

        public $hasAndBelongsToMany = array(
        'Ingredient' => array(
            'className' => 'Product',
            'joinTable' => 'ingredients_products',
            'foreignKey' => 'product_id',
            'associationForeignKey' => 'ingredient_id', 
            'unique' => true
        )
    );

} 
```

我的关系正确吗？但是我必须在我的表 products 中插入字段 product_id 和 ingredients_id 吗？我怎样才能用表格保存我的数据？我知道如何使用 HABTM 保存数据，但我从未对同一张表进行过 HABTM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:27:05.257

你的关系很好。您所写的内容将创建一个产品模型，该模型可以包含任意数量的成分，并允许成分属于任意数量的产品。

保存时，您必须简单地将成分视为另一个模型。保存 HABTM 的 CakePHP 示例同样适用于将同一模型与 2 个不同模型相关联：http: [//book.cakephp.org/2.0/en/models/saving-your-data.html](http://book.cakephp.org/2.0/en/models/saving-your-data.html)。

因此，如果您将多个成分保存到产品中，您的数组结构将如下所示：

> 数组（
>     [0] => 数组（
>         产品 => 数组（
>             id => 1
>         ），
>         成分 => 数组（
>             id => 18
>         ）
>         ），
>     [1](http://book.cakephp.org/2.0/en/models/saving-your-data.html) => 数组（
>         产品 => 数组（
>             id => 1
>         ），
>         成分 = > 数组(
>             id => 23
>         )
>     )
>     // ...
>     )

如何在表单中捕获它取决于您，但上面提供的链接中使用的表单示例应该正确管理它。

# db2 - 需要复制所有具有 C_PROV_TYPE ='014' 和 C_SPECILTY = '300' 的行并插入 3 行具有相同数据 + 最大序列号 + 1 即 =4,5,6

> ID：12773186
> 
> 赞同：0
> 
> 时间：2012-10-07T21:53:59.497
> 
> 标签：db2

![需要复制并插入 C_PROV_TYPE ='014' 和 C_SPECILTY ='300' 的所有行](../Images/0fc202d7116b20ff2ed349bd4384d7f0.png)

> 输出下方显示的两个有效行中的每一行都需要 3 行，如下所示：
> 
> 主键是 C_PROCEDURE + C_PROV_TYPE + SPEC_SEQ_NO！输出应如下所示![在此处输入图像描述](../Images/2f4fce83d88556f4300531c61ccada84.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T05:44:41.723

你可以尝试这样的事情：

```
INSERT INTO YourTable (
  C_PROCEDURE,
  C_PROV_TYPE,
  I_PT_SPEC_SEQ_NO,
  C_SPECIALTY
)
SELECT
  s.C_PROCEDURE,
  s.C_PROV_TYPE,
  s.MaxSeq + ROW_NUMBER() OVER (
    PARTITION BY s.C_PROCEDURE, s.C_PROV_TYPE
    ORDER BY v.rn, s.I_PT_SPEC_SEQ_NO),
  s.C_SPECIALTY + v.rn
FROM (
  SELECT
    *,
    MAX(I_PT_SPEC_SEQ_NO) OVER (
      PARTITION BY C_PROCEDURE, C_PROV_TYPE
    ) AS MaxSeq
  FROM YourTable
) s
CROSS JOIN (
  VALUES (1), (2), (3)
) v (rn)
WHERE s.C_PROV_TYPE = '014'
  AND s.C_SPECIALTY = '300'
; 
```

基本上，子查询返回为使用窗口函数 ( )的每个分区`YourTable`提供最大值的所有行。`I_PT_SPEC_SEQ_NO``(C_PROCEDURE, C_PROV_TYPE)``MAX()``MAX(...) OVER (...)`

然后将该子查询的结果集交叉连接到一个内联的 3 行表（生成返回的每一行的三个副本），并按 和 的指定值进行`C_PROV_TYPE`过滤`C_SPECIALTY`。

新数据行`C_PROCEDURE`直接`C_PROV_TYPE`从子查询中提取。新`C_SPECIALTY`值是使用来自子查询的`rn`值和内联表的值生成的。`ROW_NUMBER()`新的序列号是在函数和子查询返回的最大序列号的帮助下生成的。

由于我无法访问 DB2 的有效安装，因此我在 SQL Server 2008 中测试我的脚本，试图坚持我理解的 DB2 支持的特性以及 SQL Server。[此 SQL Fiddle 演示](http://sqlfiddle.com/#!3/54681/1)还使用 SQL Server 2008 实例来演示查询的工作方式。

# html - 包装 表格单元格内

> ID：12773188
> 
> 赞同：3
> 
> 时间：2012-10-07T21:54:20.683
> 
> 标签：html, css, css-tables, word-wrap, pre

我在一组 pre 标签中有一些数据，我想包装这些数据。我正在使用以下 CSS 实现此目的：

```
word-wrap: break-word; 
```

但是，如果我将 pre 标签放入表格单元格中，这将不再有效；数据都保留在一行上。

我知道有 white-space: pre-wrap 选项，但是我在 C# 的 WebBrowser 控件中使用这个 CSS，它总是像 IE7 那样呈现，并且 pre-wrap 属性似乎永远不会工作。

有谁知道如何让我的 CSS 用于 pre 标签在表格单元格中工作？或者这是否可能？

我愿意接受有关使用表格的替代方案的建议，但是我需要复制一个表格，因为它具有包含多个单元格的行，每个单元格的高度都会增长以匹配最大的一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:29:44.017

我的一个朋友想出了一个解决方法，它不是最干净的解决方案，但足以解决我的问题。

解决方案是使用空格替换它们，因为 IE 支持 wbr 标签，它模拟了在 pre 标签中的文本换行。

希望这可以帮助遇到问题的其他人！

# c# - 十进制（平方米）值的正则表达式

> ID：12773192
> 
> 赞同：1
> 
> 时间：2012-10-07T21:54:34.917
> 
> 标签：c#, regex, decimal

我得到了一个无法验证我的输入的正则表达式。

我的正则表达式：`\d{1,5}([\.,]\d{0,2})?`

`.`它应该使用或分隔符来验证平方米（十进制值），`,`并且应该在分隔符之前最多允许五个数字（并且至少一个），在分隔符之后最多允许两个数字。

所以它应该接受：
1
1,0
1.0
12345
12345,10
12345.10

但不是
.1
12345 **6**
12345,12 **3**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T22:08:27.253

在您正在捕获的组中`([\.,]\d{0,2})?`，您允许数字出现在`0`和之间`2`，*但是*，整个组在结尾处被标记为可选`?`。因此，应将范围设置为`{1,2}`：

```
\d{1,5}([\.,]\d{1,2})? 
```

如果您的输入特别是一个数字（而不是一个完整的句子），我还建议添加一个前导`^`和一个结尾`$`。这将强制正则表达式从字符串的开头检查到结尾（分别）。最终的正则表达式应该是：

```
^\d{1,5}([\.,]\d{1,2})?$ 
```

如果您将此正则表达式用于验证之外，并且还想查看匹配的值，则应将当前匹配的组（小数部分）更改为不匹配的组（更改`(`为`(?:`），然后在完整的周围添加括号正则表达式：

```
^(\d{1,5}(?:[\.,]\d{1,2})?)$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T22:11:20.817

你很亲密。该行为的正确正则表达式是：

```
^\d{1,5}(?:[\.,]\d{0,2})?$ 
```

修补 .Net 的 Regex 的好工具：Expresso。[http://www.ultrapico.com/Expresso.htm](http://www.ultrapico.com/Expresso.htm)

# c# - 实体框架：DbIsNullExpression 的参数必须引用原始类型或引用类型

> ID：12773206
> 
> 赞同：0
> 
> 时间：2012-10-07T21:56:32.997
> 
> 标签：c#, sql-server, entity-framework

我正在尝试使用实体来执行此操作：

```
 SELECT *
    FROM aspnet_Users u LEFT JOIN (SELECT u.UserId, p.Permission, p.MediaId, p.Valid
                         FROM aspnet_Users u LEFT JOIN Permission p ON u.UserId = p.UserId
                         WHERE p.MediaId = 57 AND p.Valid = 1
                         ) B 
                         ON u.UserId = B.UserId 
```

这是 C# 代码：

```
 var up = from u in en.aspnet_Users
        join p in en.Permissions
         on u.UserId equals p.UserId into pu
        from p2 in pu.DefaultIfEmpty()
        where p2.MediaId == this.MediaId && p2.Valid == true
        select new
        {
         u.UserId,
         p2.PermissionId,
         p2.Permission1,
         p2.MediaId,
         p2.Valid
        };

    var ul = from us in en.aspnet_Users
       join pm in up
            on us.UserId equals pm.UserId into pm1
       from pm2 in pm1.DefaultIfEmpty()
       orderby us.LoweredUserName
       select new PermissionInfo { 
           Permission = (pm2 == null ? -1 : pm2.Permission1), 
           UserName = us.UserName, 
           UserId = us.UserId, 
           PermissionId = (pm2 == null ? -1 : pm2.PermissionId) };
    ret = ul.ToList(); 
```

但是，在最后一行得到了他的错误

DbIsNullExpression 的参数必须引用原始类型或引用类型。

任何人都知道如何解决这个问题？谢谢。

编辑以回答 1 个建议：

```
 var up = from u in en.aspnet_Users
                     join p in en.Permissions
                         on u.UserId equals p.UserId into pu
                     from p2 in pu.DefaultIfEmpty()
                     where p2.MediaId == this.MediaId && p2.Valid == true
                     select new {u, p2};

            var ul = from us in en.aspnet_Users
                     join pm in up
                          on us.UserId equals pm.u.UserId into pm1
                     from pm2 in pm1.DefaultIfEmpty()
                     orderby us.LoweredUserName
                     select new PermissionInfo
                     {
                         Permission = (pm2 == null ? -1 : pm2.p2.Permission1),
                         UserName = us.UserName,
                         UserId = us.UserId,
                         PermissionId = (pm2 == null ? -1 : pm2.p2.PermissionId)
                     };

            ret = ul.ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-17T14:52:31.573

有一个类似的问题，我设法通过将空检查移到sql之外来解决它。在您的情况下，您可以`ToList()`在检查之前致电`Null`：

```
var intermediateUl = from us in en.aspnet_Users
    join pm in up
      on us.UserId equals pm.UserId into pmOuter
    from pm2 in pmOuter.DefaultIfEmpty()
    select new { us.UserName, us.UserId, pm2};

var ul = intermediateUl
    .ToList()
    .Select(o => new PermissionInfo { 
        Permission = (o.pm2 == null ? -1 : pm2.Permission1), 
        PermissionId = (o.pm2 == null ? -1 : pm2.PermissionId) 
        UserName = o.UserName, 
        UserId = o.UserId, 
     }); 
```

这个问题也让我感到惊讶，因为上面的几行我有一个类似的外连接查询，它通过了。似乎只有实体框架已知的实体才能使用 linq 外部构造检查 null。任何其他类，无论是否匿名，都会混淆 EF/linq。

我知道这个问题很老，但也许它会帮助某人:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:03:37.937

我意识到，由于在第二个查询中，它仍然有与 aspnet_Users 表的左连接，所以在第一个查询中不需要 u，所以我将其更改为下面，它现在可以工作了。但是，很高兴知道为什么原始代码和建议的代码会失败。

```
 var up = from u in en.aspnet_Users
                     join p in en.Permissions
                         on u.UserId equals p.UserId into pu
                     from p2 in pu.DefaultIfEmpty()
                     where p2.MediaId == this.MediaId && p2.Valid == true
                     select p2;

            var ul = from us in en.aspnet_Users
                     join pm in up
                          on us.UserId equals pm.UserId into pm1
                     from pm2 in pm1.DefaultIfEmpty()
                     orderby us.LoweredUserName
                     select new PermissionInfo
                     {
                         Permission = (pm2 == null ? -1 : pm2.Permission1),
                         UserName = us.UserName,
                         UserId = us.UserId,
                         PermissionId = (pm2 == null ? -1 : pm2.PermissionId)
                     };

            ret = ul.ToList(); 
```

# javascript - jQuery提交表单用ajax调用一个函数

> ID：12773209
> 
> 赞同：0
> 
> 时间：2012-10-07T21:56:44.333
> 
> 标签：javascript, jquery

```
jQuery(document).ready(function(jQuery) {
    function checkEmail(email){
         jQuery.post('someroute.php',
              {email:eamil},
                  function(data){
                                         if(data==error){
                                                return false;
                                         }
              );
      return true;
}

jQuery('#myform').submit(function(){
// como code and at the momment this
var result true;
//then I check email
var email = ('#myemail').val();
result =  checkEmail(email);
return result;
}); 
```

问题是这样的，一个`checkEmail`函数，先返回true，再返回值`jQuery.post`函数。为什么？

我检查并提交，首先返回true，如果你停止提交，那么你释放那个帖子返回值。Post 工作正常，但我不明白为什么函数`checkEmail`不等到 post 返回值并一直持续到结束才返回 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T22:00:12.103

因为`jQuery.post()`函数是一个AJAX请求，而AJAX中的第一个A代表*异步*。这正是异步的含义，它在等待响应时不会停止代码执行。它触发请求，然后立即转到发出请求的行之后的任何代码，在这种情况下是您的`return true`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T22:51:49.627

正如安东尼·格里斯特所说。.post 是一个异步调用，这意味着它不会等待完成。
我查看了 .post 方法（http://api.jquery.com/jQuery.post/）。
它基本上是 .ajax 的快捷方式。你在这里错过了失败方法，所以我会说使用 .ajax 调用。

```
var value = 1;
var handlerUrl = "someroute.php";

//Do the Ajax Call
jQuery.ajax(
{
   url: handlerUrl,
   data: { email:eamil },
   type: 'POST',
   success: function (data)
   {
   return true;
   },
   error: function (jxhr, msg, err)
   {
      return false;
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T22:58:54.253

@user1727336：嗨！您可能想要编辑您的代码并添加缺少的`}`和`});`. 这是一个修复：

```
// enter code here
jQuery(document).ready(function(jQuery) {
    function checkEmail(email){
        jQuery.post('someroute.php', {email:eamil},
        function(data){
            if(data==error){
                return false;
            }
        });
        return true;
    }
}); 
```

# javascript - Javascript：仅使用带有函数和事件的外部文件

> ID：12773214
> 
> 赞同：-3
> 
> 时间：2012-10-07T21:57:21.730
> 
> 标签：javascript, html, onclick, onmouseover, onmouseout

我有一个任务必须严格遵守。请阅读 javascript 代码顶部的注释，以了解我对此作业的限制。大多数功能的布局和注释都非常好，但是在加载页面时它不起作用。我已经包含了我的 HTML、CSS 和 JavaScript。请在给出答案之前阅读 javascript 顶部的评论，以免您的建议超出我的限制。对不起，如果我在这件事上是个混蛋，我不是故意的。感谢大家的帮助。谢谢，杰森

ps 这是返回的唯一错误：

```
Warning: TypeError: function showTip does not always return a value
Source File: file:///G:/WEB%20215/Moodle%20Assignments/Assignment%206/Jason_McCoy_6/js.js
Line: 40 
```

HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Tool Tips</title>
  <link href="css.css" rel="stylesheet" type="text/css" />
  <script src="js.js" type="text/javascript"></script>
</head>

<body>

  <h1>Tool Tips</h1>
  <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
  <a href="http://en.wikipedia.org/wiki/Randy_Rhoads" class="tip">Randy Rhoads
  <span> Randy Rhoads blah blah blah</span></a>Sed tincidunt pulvinar elit, ac porta dolor feugiat. 
  <a href="http://en.wikipedia.org/wiki/Ty_Tabor" class="tip">Ty Tabor
  <span> Ty Tabor blah blah blah</span></a>Nunc quis eros ac ante convallis pharetra. 
  <a href="http://en.wikipedia.org/wiki/Andy_Timmons" class="tip">Andy Timmons
  <span> Andy Timmons blah blah blah</span></a>In nec justo libero, a convallis quam.</p>

</body>
</html> 
```

CSS

```
/* styles the anchors that have tooltips*/
.tip {
    font-weight: bold;
    border-bottom: 1px dotted #333;
    cursor: help;
    position: relative;
    color: #600;
}

/* hides all tooltips by default on page load */
.tip span {
    display: none;
/* none of these matter now because the tooltips are hidden */
/* when JS unhides the tooltips, these will already be in place */
    position: absolute;
    top: 1.5em;
    left: 0;
    background: #fff;
    border: 1px solid #333;
    width: 100px;
    padding: 5px;
    color: #333;
}

/* applied by JS to show tips */
.tip span.showTip {
    display: block;
}

/* applied by JS to hide tips */
.tip span.hideTip {
    display: none;
} 
```

Javascript

```
// *** USE JAVASCRIPT BEST PRACTICES (ALL FUNCTIONALITY COMES FROM THE EXTERNAL JAVASCRIPT FILE) ***
// *** THIS MEANS THAT THE HTML AND THE CSS ARE NOT TO BE EDITED AT ALL ***
// *** NO <SCRIPT> TAGS ARE TO BE ADDED TO THE HTML ***
// *** NO INLINE JAVASCRIPT IS TO BE ADDED TO THE HTML ***
// *** THE CSS IS TO BE LEFT ALONE, NO CHANGES ARE ALLOWED ***
// *** CANNOT USE ANY JQUERY ***
// *** CANNOT USE INNERHTML ***

// Step 1: Create the ONLOAD event so that the function prepareTips() runs once the page has finished loading
window.onload = prepareTips;

// Step 2: Declare the prepareTips() function
function prepareTips() {

    // Step 3: Scan the document looking for all anchor tags
    var arrPrepareTipsAnchors = document.getElementsByTagName('a');

    // Step 4: Loop thru all the anchor tags
    for (var i=0; i<arrPrepareTipsAnchors.length; i++) {

        // Step 5: Bind the showTip() function to the anchor tags' MOUSEOVER and ONCLICK events
        arrPrepareTipsAnchors[i].onmouseover = arrPrepareTipsAnchors[i].onclick = function() {
            showTip(this);
            return false;
        }

        // Step 6: Bind the hideTip() function to the anchor tags' MOUSEOUT event
        arrPrepareTipsAnchors[i].onmouseout = function() {
            hideTip(this);
            return false;
        }
    }               
}

// Step 7: Create a separate function called showTip()
function showTip(anchor) {
    // Step 8: Scan the document looking for all anchor tags
    var arrShowTipAnchors = document.getElementsByTagName('a');

    // Step 9: If a anchor is clicked, the default behavior is canceled (i.e. the link does nothing)
    // Step 10: When a mouseover event occurs to an anchor: 
    //    1) The anchor's classname is changed from the default 'tip' class to the 'showTip' class as described in the CSS File
    //    2) The anchor's 'title' attribute is changed to the text that is in between the <span> childNode of each anchor
    for (j=0; j<arrShowTipAnchors.length; j++) {
        if (arrShowTipAnchors[j].onclick) {
            anchor.getAttribute('href');
            return false;
        }
        if (arrShowTipAnchors[j].onmouseover) {
            anchor.lastChild.setAttribute('class', 'showTip');
            var showTooltip = anchor.lastChild.nodeValue;
            anchor.setAttribute('title', showTooltip);  
        }       
    }
}

// Step 11: Create a separate function called hideTip()
function hideTip(anchor) {

    // Step 12: Scan the document looking for all anchor tags
    var arrHideTipAnchors = document.getElementsByTagName('a');

    // Step 13: Loop thru all the anchor tags
    for(var k=0; k<arrHideTipAnchors.length; k++) {
        //Step 14: When a MOUSEOUT event occurs to an anchor: 
        //    1) The anchor's classname is changed from the default 'tip' class to the 'hideTip' class as described in the CSS File
        //    2) The anchor's 'title' attribute is set to null (i.e. the tooltip that appears on the MOUSEOVER disappears on the MOUSEOUT)
        if (arrHideTipAnchors[k].onmouseout) {
            anchor.lastChild.setAttribute('class', 'hideTip');
            var hideTooltip = "";
            anchor.setAttribute('title', hideTooltip);
        }
    }
} 
```

***** 更新了 Javascript（只是添加的代码，没有评论）*******

 **```
window.onload = prepareTips;

var anchors = document.getElementsByTagName('a');

function prepareTips() {

    if(!document.getElementsByTagName('a')) return false;

    for(var i=0; i<anchors.length; i++){
            anchors[i].onclick = showTip;
            anchors[i].onmouseover = showTip;
            anchors[i].onmouseout = hideTip;
    }
}

function showTip(variable) {
    this.setAttribute('href', '#');
    this.classname = 'showTip';
    this.getAttribute('title') ? this.lastChild.nodeValue : this.lastChild.nodeValue;
}

function hideTip(variable) {
    this.classname = 'hideTip';
    this.getAttribute('title') ? "" : "";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:42:43.410

让我们来看看`Step 5`：

```
// Step 5: Bind the showTip() function to the anchor tags' MOUSEOVER and ONCLICK events
if (arrPrepareTipsAnchors[i].onmouseover || arrPrepareTipsAnchors[i].onclick) {
    arrPrepareTipsAnchors[i] = function() {
        showTip(this);
        return false;
    }
} 
```

现在让我们将其分解为各个部分。

首先`arrPrepareTipsAnchors[i]`是一个数组元素 - 在这种情况下，它指向`<a>`页面上的一个元素，在此代码执行时当前没有绑定到它的事件处理程序（由于没有内联事件处理程序，没有`<script>`标签HTML 页面等）。事件处理程序存储为元素的属性，例如`onclick`,`onmouseover`等。如果我们在名为 的变量中引用了一个元素`element`，`element.onclick`则将引用`onclick`事件处理程序函数（在该元素上触发 click 事件时运行的函数）。

我们还有一个`if`语句，所以我们期望条件返回`true`or `false`。在这种情况下，我们的条件是：

```
arrPrepareTipsAnchors[i].onmouseover || arrPrepareTipsAnchors[i].onclick 
```

如上所述，这些属性指的是相应的事件处理函数——在这种情况下，为单击和鼠标悬停事件执行的函数。但是，我们还说它还没有绑定到元素的任何事件处理程序，因此这两个属性都是`undefined`. 有了这个，我们的条件基本上变成了：

```
undefined || undefined 
```

在 JavaScript 中，`undefined`被认为是“错误的”，因此条件永远不会计算为`true`（`false`OR`false`永远是`false`）并且主体永远不会被执行。

不过，为了完整起见，让我们看一下`if`语句内部的代码：

```
arrPrepareTipsAnchors[i] = function() {
    showTip(this);
    return false;
} 
```

如上所述，`arrPrepareTipsAnchors[i]`是一个数组元素——它包含（指向）一个值。但是，我们使用的是`=`(assignment) 运算符，因此我们为该数组元素分配了一个新值。具体来说，我们正在分配一个匿名函数。

如果我们将所有这些结合在一起，我们可以说整段代码可以这样描述：

> 如果 所引用的 DOM 元素设置`arrPrepareTipsAnchors[i]`了一个`onclick`或`onmouseover`事件处理程序，则将数组中的此元素替换为匿名函数。

我怀疑你想要的是更接近以下内容：

```
arrPrepareTipsAnchors[i].onmouseover = arrPrepareTipsAnchors[i].onclick = function() {
    showTip(this);
    return false;
} 
```**

# javascript - MVC javascript文件隔离/性能

> ID：12773217
> 
> 赞同：0
> 
> 时间：2012-10-07T21:57:56.250
> 
> 标签：javascript, jquery, asp.net-mvc

假设一个 MVC3 项目有许多 JavaScript 文件和库。这些由本页底部的共享布局视图引用。由于库包含在页面主要内容之后，因此页面加载速度更快。视图中也没有内嵌 JavaScript。

该项目有多个区域，每个区域都有多个控制器。然而，只有 1 个 JavaScript 文件包含整个站点的所有自定义脚本和事件。因此，所有页面加载都将包含特定控制器独有的代码。

有没有更好的方法来构建文件或分离代码以便只执行相关的脚本？

编辑：因此，一种拆分 1 个大脚本文件的策略，或者只执行与当前上下文相关的脚本。不使用为页面上不存在的元素初始化大量事件处理程序。即使预先手动检查每个元素是否存在也是站点范围文件的开销。

# ios - iOS源构建设置“搜索路径”

> ID：12773218
> 
> 赞同：0
> 
> 时间：2012-10-07T21:58:04.947
> 
> 标签：ios, xcode, build, build-settings, search-path

我正在尝试在我的 iOS 应用程序中使用[这个项目。](https://github.com/myang-git/QR-Code-Encoder-for-Objective-C)在说明中，它说：

*   切换到构建设置页面，进入搜索路径部分。（如果您找不到它，请在搜索字段中键入“header search”）将源代码目录的绝对路径添加到路径列表中。

这是什么意思。我应该在搜索路径部分添加什么值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T05:59:31.027

您将下载该库的源代码并将其保存在您机器上的某个位置。然后，您必须在头文件搜索路径中添加此源文件的路径（xcode 将搜索您将尝试在您的应用程序中使用的头文件）。它可以是这样的：

> “/Users/yourUser/yourProject/yourLibrarySource”

# facebook-graph-api - Graph API：在创建墙帖之前检查应用程序是否在过去 x 天内已发布？

> ID：12773219
> 
> 赞同：0
> 
> 时间：2012-10-07T21:58:05.820
> 
> 标签：facebook-graph-api, post, stream, feed, facebook-wall

我想在用户墙上发帖，但我想将我的应用发布的帖子限制为每天或每周最多 1 个。

我可以查看我的应用在过去一天/一周内到目前为止发布了多少帖子，还是我需要将其存储在我身边？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:54:43.737

您可以按过滤[FQL`stream`表](https://developers.facebook.com/docs/reference/fql/stream/)`app_id`。

将其与`source_id`（墙所属的用户 ID）和`created_time`过去 1 天/1 周以上的时间相结合，并且`LIMIT 1`.

如果您得到结果，则说明在指定时间范围内通过您的应用发布了帖子。

# ruby-on-rails - 在关联/连接模型上使用 update_attributes

> ID：12773220
> 
> 赞同：0
> 
> 时间：2012-10-07T21:58:11.770
> 
> 标签：ruby-on-rails, activerecord

```
membership = Membership.where(user_id: 1, group_id: 1).first
# some other code
membership.update_attributes(admin: true) 
```

生成查询

```
UPDATE 'memberships' SET 'admin' = 1 WHERE 'memberships'.'' IS NULL 
```

这会导致错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:23:22.883

`'memberships'.'' IS NULL`不得不`'memberships'.'id'=`

我想模型中没有id。

那么更新属性的正确方法就是这样

```
membership = User.find(1).memberships.first
# some other code
membership.update_attributes(admin: true) 
```

**更新**

似乎将 id 添加到此模型将是最佳选择。

# php - 在页面刷新时保留基于选择框的值

> ID：12773222
> 
> 赞同：1
> 
> 时间：2012-10-07T21:58:29.153
> 
> 标签：php, javascript

我在 mysql 和数据库的下拉选择菜单中有问题

每当我从下拉选择值页面重新加载和页面刷新然后返回到选项选择选项？

```
function getComboB(sel) { 

var roomtype=document.getElementById("roomtype");
var value = sel.options[sel.selectedIndex].value;
checkin.action = "checkin.php?item_combo="+value+"";
checkin.submit();

}

<select name="roomtype" id="roomtype" style="width:150px;"  onchange="getComboB(this)">

  <option><--Select--> </option>

       $query=mysql_query("SELECT * FROM roomtype order by id");
      while($row=mysql_fetch_assoc($query))
      {

    $val2=$row['id'];

    ?>
     <option  value="<?=$val2;?>"  <? if ($roomtype  == $val2) { echo "selected='selected'"; }?> > <?=$row['roomtype'];?> </option>

      <?php }?>

    </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T22:31:46.330

简而言之，我同意这个问题的格式相当痛苦。

刷新实际上并不保留任何值，因为您从未提交过。通过 cookie 或回调将值存储到服务器以将其存储在会话中。至于在这里显示是另一种选择。

* * *

传递选定的选项并使用 javascript 选择它。

```
$(document).ready(function() {
var theValue= "<?php echo "YourSelected Value"?> " // Or fetch from cookie.
$("#roomtype").find("select:eq(2)").find("option[value="+theValue+']').attr('selected','selected');
}); 
```

# ruby - 这样做有什么更红的方式？

> ID：12773224
> 
> 赞同：1
> 
> 时间：2012-10-07T21:58:34.353
> 
> 标签：ruby, oauth, idioms

我正在检查一些 oAuth 值的会话哈希，如果它们不存在则设置它们。这是我现有的代码：

```
unless session[:oauth][:request_token].nil? && session[:oauth][:request_token_secret].nil?
    @request_token = OAuth::RequestToken.new(@client, session[:oauth][:request_token], session[:oauth][:request_token_secret])
end 
```

...但它很讨厌，而且看起来并不特别红宝石。有没有更惯用的方式来写这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T22:08:21.497

也许只是使用一些变量？

```
oauth = session[:oauth]
token, secret = oauth.values_at :request_token, :request_token_secret

if token && secret
  @request_token = OAuth::RequestToken.new(@client, token, secret)
end 
```

请注意，我已将您替换`unless obj.nil?`为`if obj`因为`nil`无论如何都是虚假的。除非您希望将其`false`作为有效值，否则这是典型的 Ruby 习惯用法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T22:07:19.593

我会写：

```
oauth = session[:oauth]
if (token = oauth[:request_oken]) && (secret = oauth[:request_token_secret)
  @request_token = OAuth::RequestToken.new(@client, token, secret)
end 
```

或者：

```
token, secret = session[:oauth].values_at(:request_token, :request_token_secret)
@request_token = OAuth::RequestToken.new(@client, token, secret) if token && secret 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T01:40:48.757

还有一种方式：

```
session[:oauth].tap do |h|
  [h[:request_token], h[:request_token_secret]].tap do |t1, t2|
    @request_token = OAuth::RequestToken.new(@client, t1, t2) if t1 and t2
  end
end 
```

实际上，我将使用我定义并通常用于自己的以下方法。

```
class Object
  def chain &pr; pr.call(self) end
end 
```

然后，可以避免嵌套，代码会好一点：

```
session[:oauth]
.chain{|h| [h[:request_token], h[:request_token_secret]]}
.tap{|t1, t2| @request_token = OAuth::RequestToken.new(@client, t1, t2) if t1 and t2} 
```

# c - 枚举类型的位操作

> ID：12773225
> 
> 赞同：0
> 
> 时间：2012-10-07T21:58:44.907
> 
> 标签：c, bit-manipulation, enumerated-types

我在开始使用我的实验室时遇到了一些麻烦。实验室有以下说明：

> 给定一个值`int input = 0b10010110`确定个人喜欢什么运动。假设此输入中没有错误。从左到右，每个位置代表以下：足球、棒球、排球、游泳、垒球、足球、曲棍球、曲棍球。
> 
> 如果在那个位置上有一个 1，那么这个人喜欢这项运动。根据给定的“二进制”输入，将用户喜欢的所有运动输出到屏幕上。对于给定的二进制数，用户喜欢足球、游泳、足球和曲棍球。
> 
> *   不要创建一个字符数组。
>     
>     
> *   请务必使用枚举数据类型。

我不确定如何比较字符串的每个位置以判断它是 1 还是 0。我的一个想法是使用枚举类型，在其中我将每项运动设置为十位数字，其中只有它的适当位置是1

```
enum sport{
    Football = 0010000000,
    Baseball = 0001000000,
    Volleyball = 0000100000, 
    ... , 
    Lacrosse = 0000000001
}; 
```

然后，我将在给定值“输入”上向左/向右移动适当的次数，以仅保留指定位置的原始值并将所有其他值设置为 0。对于足球：

```
input << 2; input >> 9; input << 7; 
```

所以新的设定值为`0010000000`。然后我就可以将这个数字作为一个整体进行比较。对于每种情况，我都必须这样做，但我想不出另一种方法来做到这一点。

我完全没有了？有没有更实用的方法来使用位操作检查每个位置的值？感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:06:54.047

使用按位与运算符`&`：

```
if (input & Football) {
    // Football bit is set
} else {
    // Football bit is not set
} 
```

另请注意，`0b`前缀是编译器扩展，但不是标准 C。在您的`enum`值中，以前缀开头的数字`0`是八进制格式（您必须解决此问题）。我建议您使用十六进制格式进行位操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T22:10:15.947

如果您通过将 1 向左移动适当数量的位置来定义您的运动价值观，您可以使事情更具可读性；实际上，您可以对运动值使用简单的枚举，并使用它来指定要移位多少位。

# php - 在 PHP 中清除和定义数组

> ID：12773226
> 
> 赞同：-2
> 
> 时间：2012-10-07T21:58:44.663
> 
> 标签：php

我在 for 循环中定义了一个数组。类似于

```
for($i=0;$i<5;$i++){
    $an_array = array();
} 
```

请告知数组定义是否也会在第一次迭代后清除数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T22:11:27.753

是的，每次都会清除数组。如果您需要的话，您可以每次都创建唯一的数组。

```
 for($i=0;$i<5;$i++){
    $an_array[$i] = array();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T22:12:09.063

我不确定这里要问什么或您要完成什么，但循环中定义的任何变量将不再在每次迭代开始时定义。

尝试：

```
for($i=0;$i<5;$i++){
    var_dump($an_array);
    $an_array = array();
    array_push($an_array, $i);
    var_dump($an_array);
}
var_dump($an_array); 
```

如果您尝试使用循环填充此数组，则需要在进入循环之前定义数组，如下所示：

```
 $an_array = array();
for($i=0;$i<5;$i++){
    array_push($an_array, $i);
}
var_dump($an_array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T22:08:35.100

是的，它确实。$arr = 数组（）；这使变量成为一个空数组。如果要添加定义了键的元素，最简单的方法是 $arr[]='my data'; 在 for 循环中使用上述代码并设置 $arr = array(); 上面的 for 循环。这不是必需的，但推荐。

你也可以像这样添加数据： for ($i = 0; $i < 5; ++$i){ $arr[$i] = 'my data'; }

$arr 在 for 循环后不会被清除。

# ios - AVAudioPlayer 只播放自定义音频文件一秒

> ID：12773228
> 
> 赞同：1
> 
> 时间：2012-10-07T21:59:22.537
> 
> 标签：ios, ios6, avaudioplayer

在我的应用程序中，我使用 AVAudioRecorder 对象来允许用户录制声音文件，当用户完成录制后，他们可以通过 AVAudioPlayer 播放声音。我遇到的问题是当用户尝试播放它只播放一秒钟的音频文件时。更奇怪的是，这段代码在 iOS 5 上运行完美，但自从升级到 iOS 6 后，这个问题就开始发生了。

我检查了通过 iTunes 文件共享创建的文件，并且能够在我的桌面上播放整个声音文件。

下面我粘贴了加载音频播放器的操作文件中的代码。据我所知

```
- (void)playRecordingBtnClk:(id)sender
{
    NSLog(@"Play btn clk");

    if (!isRecording) {

        // disable all buttons
        [_recordButton disableButton];
        [_stopButton disableButton];
        [_playButton disableButton];
        [_saveButton disableButton];

        // create the player and play the file from the beginning
        if (audioPlayer) {
            [audioPlayer release];
            audioPlayer = nil;
        }

        audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:audioRecorder.url error:&error];
        audioPlayer.delegate = self;
        audioPlayer.currentTime = 0.0;
        [audioPlayer prepareToPlay];

        if (error) {
            NSLog(@"Error Playing Audio File: %@", [error debugDescription]);
            return;
        }

        [audioPlayer play];
        [self startTicker];
    }
} 
```

看来，

```
-(void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag 
```

一秒钟后调用方法，这就是音频播放器停止的原因。有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T03:13:35.637

对于 iOS 6.0，再添加两行：

```
soundPlayer.currentTime = soundPlayer.duration + soundPlayer.duration;
soundPlayer.numberOfLoops = 1; 
```

不是一个完美的解决方案。我们可能需要等待 iOS 6.0.1/6.1 更新。

更多内容，请[访问这里](http://dev.zhourenjian.com/blog/2012/09/21/fixed-avaudioplayer-only-play-1-2s-in-ios-6.html)，有人评论说这可能是 CDAudioManager 的问题。

# xna - XNA 3D 地形碰撞检测

> ID：12773230
> 
> 赞同：2
> 
> 时间：2012-10-07T21:59:50.927
> 
> 标签：xna, collision-detection, terrain

我一直在开发一个基本的 3D XNA 游戏。到目前为止，我已经设法将各种角色模型加载到更大的关卡/世界模型上。我加入了一些基本控件，允许用户/玩家在世界各地移动其中一个角色——甚至使用 BoundingSphere/BoundingBox 和其他角色模型实现了一些碰撞检测。

然而，角色模型（目前）被卡在 Y 轴上的固定位置，所以我的世界实际上只是一个平面供他们滑过。

我现在要做的是实现一种类似重力的力，它可以让角色随着地形的流动而上升和下降。我花了几个小时在谷歌搜索（徒劳无功）以某种方式检查我的角色的边界范围与世界的实际网格之间的详细碰撞。我发现的文章似乎都在解释如何使用 sphere 和 box 方法，或者实现一些外部物理引擎（对于我想要实现的目标，所有这些似乎都非常精细）。

所以我的问题是双重的 -

*   首先，我是否以最好的方式处理这个问题？我的世界只有一个大型模型？
*   其次，是否有一种相对简单的方法来检查我需要的碰撞类型，使用 XNA 库本身，或者不需要我引入全新物理层的其他库。

注意。我要检查冲突的模型是：Microsoft.Xna.Framework.Graphics.Model

编辑：

我还应该提到，我不是在创建一个单一的关卡，而是一个游戏引擎，它可以与从数据库加载的各种关卡一起工作。出于这个原因，我不想单独/手动定义关卡的约束。理想情况下，我希望从数据库中加载我的单个网格并能够按原样检测与它的碰撞，或者自动从网格数据中计算出约束/边界区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:59:14.720

第一个答案为您提供了详细碰撞检测的首次通过测试。您可以改进第一次通过并使用 AABB 测试。然后第二遍需要进行射线-三角形相交测试。请小心，因为当光线击中三角形边缘或顶点时，其中一些会失败 - 因此请确保您选择的测试器代码/算法考虑了这些。使用四叉树或其他空间划分方案进行了进一步的修改，以提高碰撞检测的速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T23:01:36.197

3d 碰撞检测比乍看之下要复杂得多，因此请使用规定的方法之一（即 BoundingSphere 对象可以提供帮助）。检查[http://msdn.microsoft.com/en-us/library/bb203906(v=xnagamestudio.10).aspx](http://msdn.microsoft.com/en-us/library/bb203906(v=xnagamestudio.10).aspx)

具体来说，这个代码块给出了一个想法：

```
static void CheckForCollisions( ref WorldObject c1, ref WorldObject c2 )
{
    for (int i = 0; i < c1.model.Meshes.Count; i++)
    {
        // Check whether the bounding boxes of the two cubes intersect.
        BoundingSphere c1BoundingSphere = c1.model.Meshes[i].BoundingSphere;
        c1BoundingSphere.Center += c1.position;

        for (int j = 0; j < c2.model.Meshes.Count; j++)
        {
            BoundingSphere c2BoundingSphere = c2.model.Meshes[j].BoundingSphere;
            c2BoundingSphere.Center += c2.position;

            if (c1BoundingSphere.Intersects( c2BoundingSphere ))
            {
                c2.ReverseVelocity();
                c1.Backup();
                c1.ReverseVelocity();
                return;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-28T19:06:58.550

你可以伪造它。换句话说，我假设，在每次更新调用中，您可以将玩家的高度设置为玩家碰巧所在的地形高度。我想这不是最专业的处理方式，但可能会奏效。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-11T23:14:13.827

以下是我曾经适用于 2D 碰撞检测的球体/三角形技术的详细描述：

[http://www.peroxide.dk/papers/collision/collision.pdf](http://www.peroxide.dk/papers/collision/collision.pdf)

我不能肯定地说它会对你有所帮助，但它可能对与地形网格和重力的碰撞很有用。将其与与其他“角色”的碰撞结合起来可能具有挑战性，具体取决于您想要做什么。但是，它确实具体描述了如何实现重力，总体而言，它是您在 3D 中可能采用的碰撞检测和角色物理的更简单方法之一。

至于与整个地形网格碰撞是否是“正确”的方法的问题......如果它是一个简单的网格并且您不受资源限制，那么可以确定。但是，碰撞检测的计算成本很高，并且将其应用于网格中的所有三角形可能很快变得不可能。通常，您可能希望将三角形存储在一些有效的可搜索结构中，例如[八叉树](http://en.wikipedia.org/wiki/Octree)或[kd 树](http://en.wikipedia.org/wiki/K-d_tree)，然后粗略搜索您角色附近的三角形，然后可以在更短的时间内更精确地测试碰撞测试网格中的*每个*三角形。

# java - 如何在java中获取totalTime？

> ID：12773231
> 
> 赞同：0
> 
> 时间：2012-10-07T21:59:59.040
> 
> 标签：java, time

我在这里阅读了很多关于获取总时间的答案。我试图将我发现的这段代码应用到我的代码中：

```
long secs = (dateFormatter.format(now2) - dateFormatter.format(now1)) / 1000;
int hours = secs / 3600;
secs = secs % 3600;
int mins = secs / 60;
secs = secs % 60; 
```

我的代码：

```
 public void actionPerformed(ActionEvent e)
 {
 LogicalChecker lc = new LogicalChecker();
 Date now1 = new Date();
 Date now2 = new Date();
 cobadatabase cb = new cobadatabase(studNumTF.getText());
 String output;

  if(e.getActionCommand() == "Log In")
    {
        if(station == 0)
        {
            lc.StationCheck(0);
        }
        else if(seatOccupied[station-1] == true)
        {
            lc.StationCheck(2);
        }
        else if(!studNumTF.getText().equals(cb.getStudentNumber()))
        {
             studNumTF.setText("");
             lc.StationCheck(3); 
        }
        else
        {
            seatOccupied[station-1] = true;

                Aid[station-1].setText(cb.getStudentNumber());
                Afirstname[station-1].setText(cb.getFirstName());
                Alastname[station-1].setText(cb.getLastName());  
                seat[station-1].setBackground(Color.red);
                Atime[station-1].setText(dateFormatter.format(now1));
                occupiedSeatCounter++;

        }
    }

  if(e.getActionCommand() == "Log Out")
    {
        if(station == 0)
        {
            lc.StationCheck(0);
        }
        else if(Aid[station-1].getText() == "Vacant Station")
        {
            lc.StationCheck(1);
        }
        else
        {

            Aid[station-1].setText("Vacant Station");
            Afirstname[station-1].setText("---------");
            Alastname[station-1].setText("---------");
            seat[station-1].setBackground(Color.green);
            Atime[station-1].setText("00:00:00");
            seatOccupied[station-1] = false;
            studNumTF.setText("");
            output = "Time Check-Out "+dateFormatter.format(now2)+"\n Total Time: ";
            JOptionPane.showMessageDialog(null,output, "Check-Out.",JOptionPane.INFORMATION_MESSAGE);

        }
}

} 
```

但它给出了一个错误，说运算符不能应用于 java.lang.String。我不知道如何获取其总时间并将其显示到我创建的 JOptionPane 中。我真的需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T22:03:32.153

您的问题在这里：`dateFormatter.format(now2) - dateFormatter.format(now1)`因为就像@Luiggi 所说的格式返回一个字符串。您应该执行以下操作：`now2.getTime() - now1.getTime()`以毫秒为单位获得差异。

# java - 更宽/更高的图像会失真

> ID：12773237
> 
> 赞同：0
> 
> 时间：2012-10-07T22:00:26.570
> 
> 标签：java

我正在使用 C++ 加载图像并通过 ByteBuffer 将像素提供给 JNI。我知道像素输入得很好，因为如果图像是正方形的，它们渲染得非常好。如果它们是矩形的，它们就会变形。我还成功地将图像保存在 DLL 中，并且可以正常工作。Java 不幸地放弃了我（除非它是方形的）。我不知道为什么！我究竟做错了什么？

```
package library;
import java.awt.image.BufferedImage;
import javax.swing.*;

public class Frame extends JFrame {

    public Frame(int Width, int Height, String FrameName, BufferedImage Buffer) {
        setName(FrameName);
        setSize(Width, Height);
        getContentPane().add(new JLabel(new ImageIcon(Buffer)));
        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        setVisible(true);
    }
} 
```

所有加载：

```
package library;

import java.awt.image.BufferedImage;
import java.awt.image.WritableRaster;
import java.io.IOException;
import java.nio.ByteBuffer;

class SharedLibrary {

    static{System.loadLibrary("TestDLL");} 
    private static native void GetGLBuffer(ByteBuffer Buffer);

    private ByteBuffer Buffer = null;    
    private int ByteSize = 0, Width = 0, Height = 0, BitsPerPixel = 32;

    public SharedLibrary(int ImageWidth, int ImageHeight) throws IOException {

        Width = ImageWidth;
        Height = ImageHeight;

        ByteSize = ((Width * BitsPerPixel + 31) / 32) * 4 * Height;     //Compute Image Size in Bytes.
    Buffer = ByteBuffer.allocateDirect(ByteSize);                   //Allocate Space for the image data.

        GetGLBuffer(Buffer);                                            //Fill the buffer with Image data from the DLL.

        byte[] Bytes = new byte[ByteSize];
        Buffer.get(Bytes);

        BufferedImage Image = new BufferedImage(Width, Height, BufferedImage.TYPE_3BYTE_BGR);
        WritableRaster raster = (WritableRaster) Image.getData();
        raster.setPixels(0, 0, Width, Height, ByteBufferToIntBuffer(Bytes));
        Image.setData(raster);

        Frame F = new Frame(Width, Height, "", Image);
    }

    private int[] ByteBufferToIntBuffer(byte[] Data) {
        int IntBuffer[] = new int[Data.length];
        for (int I = 0; I < Data.length; I++) {
            IntBuffer[I] = (int)Data[I] & 0xFF;
        }
        return IntBuffer;
    }
} 
```

![在此处输入图像描述](../Images/1a54abb0900d6f37c5f8aa5fd9854388.png) 上面的图像被完美地绘制，因为它几乎是正方形的。如果我将其调整为矩形，它会变形。例子：

![在此处输入图像描述](../Images/5b535e4454b7e963d6bc981f7abf2f95.png)

变得扭曲，看起来像： ![在此处输入图像描述](../Images/adcc9628c2e23fc6a948ef3a7679f660.png)

# ftp - 使用 Virtualmin / Webmin 添加具有所有目录访问权限（如 root）的 FTP 用户

> ID：12773242
> 
> 赞同：2
> 
> 时间：2012-10-07T22:02:15.003
> 
> 标签：ftp, webmin

我尝试允许 FTP 用户授予对所有目录的访问权限已经 2 小时。我已经用 Webmin 添加了一个 FTP 用户。我能够与 FTP 客户端连接，但是当我尝试将目录更改为虚拟站点（在 /home/ ***中）时，我有

```
 550 ****: No such file or directory 
```

我只是希望这个新用户拥有与 root 用户相同的权限。（用于 ftp 目录访问）。有人可以帮助我吗？

提前谢谢你！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-29T06:06:09.280

webmin 对创建具有 root 权限的 ftp 用户有限制，但我认为有一个设置可以禁用此功能，如果您仍然感兴趣，请回复。

# c++ - 寻求有关如何将 tesseract 集成到 VC2010 C 程序中的说明

> ID：12773243
> 
> 赞同：1
> 
> 时间：2012-10-07T22:02:18.443
> 
> 标签：c++, c, visual-studio-2010, build, tesseract

这个问题与此有关：（抱歉，我不知道如何将其发布为后续 qn）： [如何在小型 c++ 项目中使用 tesseract ocr（或任何其他免费 ocr）？](https://stackoverflow.com/questions/5079635/how-can-i-use-tesseract-ocror-any-other-free-ocr-in-small-c-project)

用户 sventech 的最新回复说：这已经过时了。现在只需要 libtesseract。标准代码包括对 VS2008 和 2010 的支持，说明很简单。– 斯文泰克 9 月 19 日 14:42

我想知道您是否说不必执行这些步骤，因为有一种更简单的方法可以使用该库而无需构建它？由于我在构建开源库方面不是很有经验，我想尽可能避免它。将 tesseract 函数调用集成到 C 程序（VS2010）中的最简单方法是什么？非常感谢，JV Iyer。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T16:45:34.290

1 - 通常你只需要[Win32-libs](http://code.google.com/p/tesseract-ocr/downloads/detail?name=tesseract-3.02.02-win32-lib-include-dirs.zip)

解压，你会得到这两个文件夹：D:\tesseract-3.02.02\lib D:\tesseract-3.02.02\include

2 - 但您还需要（用于调试）liblept168.dll、liblept168.lib，您可以通过安装[Tesseract 设置找到它们](http://code.google.com/p/tesseract-ocr/downloads/detail?name=tesseract-ocr-setup-3.02.02.exe)

将这些文件复制到 D:\tesseract-3.02.02\lib

将此文件夹也添加到您的路径中。

3- 在您的 vc2010 项目中，添加项目属性：

*   C/C++ -> 其他包含文件夹：D:\tesseract-3.02.02\include
*   链接器 -> 常规：D:\tesseract-3.02.02\lib
*   链接器 -> 依赖项 -> 输入：libtesseract302.lib（调试和发布）

注意：libtesseract302d.lib 是为 vc2008 构建的，这就是为什么你在使用它时会出现 c0150002 错误的原因。好的方法应该是在vc2010上从源代码构建...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:51:13.907

我认为[这个](http://ayoungprogrammer.blogspot.com/2012/11/tutorial-installing-tesseract-ocr-30202.html?showComment=1352898224531#c2791256718078577473)链接会很有用。如果您使用 VS2010，您必须通过右键单击/属性在项目属性中查找目录。

# c++ - C ++流位掩码作为布尔值？

> ID：12773246
> 
> 赞同：3
> 
> 时间：2012-10-07T22:02:40.990
> 
> 标签：c++, boolean, standards-compliance, bitmask

在 C++ 标准中`std::ios::openmode`，`std::ios::fmtflags`和`std::ios::iostate`是实现定义的。但是`std::ios::goodbit`被标准化为零。我的问题是：这些位掩码是否可以根据标准转换为布尔值。换句话说，要测试是否设置了错误标志，我们可以输入：

```
inline void myFunction(std::ios::iostate x = std::ios::goodbit) 
{
    if (x) { // <- is it ok or do I have to type "if (x != std::ios::goodbit)" ?
        /* SOMETHING */    
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T22:23:28.453

不，这不是可移植的代码。[std::ios::iostate](http://en.cppreference.com/w/cpp/io/ios_base/iostate)是一种[位掩码类型](http://en.cppreference.com/w/cpp/concept/BitmaskType)，根据 C++ 标准 (17.5.2.1.3)：

> 每个位掩码类型都可以实现为重载某些运算符的枚举类型、整数类型或位集

如果 iostate 是根据后一种情况实现的，那么您的代码将无法编译，因为[std::bitset](http://en.cppreference.com/w/cpp/utility/bitset)既没有运算符 bool 也不能隐式转换为整数类型（如您的情况）。

注意：以下编译失败：

```
 std::bitset<8> b;
  return (b) ? 1 : 0; 
```

虽然这有效：

```
 std::bitset<8> b;
  return (b != 0) ? 1 : 0; 
```

# c - 错误：预期的说明符限定符列表之前

> ID：12773249
> 
> 赞同：0
> 
> 时间：2012-10-07T22:03:17.160
> 
> 标签：c

我正在尝试编译一个项目，并且头文件中出现了一个错误（唯一的错误）。

```
error: expected specifier-qualifier-list before ‘draw’ 
```

可以在这里找到有问题的代码行：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>

#define LNAME 129 
#define DNUM 17 

typedef struct {
  char name[LNAME]; 
  double x[DNUM];        
  double y[DNUM];        
  double x_point[DNUM];  
  double y_point[DNUM];
  int draw;                 
  draw = 1;                         //<< the line GCC references in the error for reference
  memset(name, 0, sizeof(name));
  memset(x, 0, sizeof(x));
  memset(y, 0, sizeof(y));
} Figure; 
```

我对C相当陌生，所以如果有人能提供一点见解，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:05:07.543

你不能给结构成员一个初始值。您必须编写一个构造函数来初始化结构的特定实例中的所有成员。

# mysql - phpmyadmin / 创建表 / 语法错误 / 枚举

> ID：12773252
> 
> 赞同：0
> 
> 时间：2012-10-07T22:03:39.680
> 
> 标签：mysql, sql, enums, phpmyadmin

> 我已经搜索过，但令人沮丧的是，我无法弄清楚为什么我在以下 SQL 语句中收到此错误。

错误：#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的 ''kidney_renal_dialysis' enum('Yes','UnderTreat','No','Ref') not NULL, 'liver_c' 附近使用正确的语法

SQL 语句：>

```
CREATE TABLE `client_health_info` (
  `client_id` int(11) NOT NULL PRIMARY KEY,
  `ER_visits_3_months` int(2) NOT NULL,
  `hospitilizations_last_year` int(2) NOT NULL,
  'kidney_renal_dialysis' enum('Yes','UnderTreat','No','Ref') not NULL,
  'liver_cirr_ES_liver' enum('Yes','UnderTreat','No','Ref') not NULL,   
  'HCAH' enum('Yes','UnderTreat','No','Ref') not NULL,
  'hiv_aids' enum('Yes','UnderTreat','No','Ref') not NULL,
  PRIMARY KEY (`client_id`)
  ) ENGINE=InnoDB not CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:03:36.767

您使用了错误的引号！;-)

```
CREATE TABLE `client_health_info` (
  `client_id` int(11) NOT NULL PRIMARY KEY,
  `ER_visits_3_months` int(2) NOT NULL,
  `hospitilizations_last_year` int(2) NOT NULL,
  `kidney_renal_dialysis` enum('Yes','UnderTreat','No','Ref') not NULL,
  `liver_cirr_ES_liver` enum('Yes','UnderTreat','No','Ref') not NULL,   
  `HCAH` enum('Yes','UnderTreat','No','Ref') not NULL,
  `hiv_aids` enum('Yes','UnderTreat','No','Ref') not NULL
) ENGINE=InnoDB, CHARSET=latin1; 
```

**编辑：**修复了另外两个错误：重复`PRIMARY KEY`语句和`NOT`之前的`CHARSET`.

# jquery - jQuery 函数 .load() 不起作用

> ID：12773255
> 
> 赞同：0
> 
> 时间：2012-10-07T22:03:57.160
> 
> 标签：jquery, load, firebug

我有个问题。这不是我第一次以这种方式使用这个 jQuery 函数（ .load() ），但现在，我真的不明白为什么在这个新网站中，它不起作用。在 Firebug 控制台中，当我单击链接“connexion”时，GET 显示为红色，并且根本没有加载“form.login.php”。为什么？

啊顺便说一句，在文件准备好时，“form.accueil.php”的加载正在工作。但不是另一个 .load 调用。

这是我的一段代码。提前致谢。

```
<!-- SCRIPT -->
<script type="text/javascript" src="js/jquery-1.8.2.js" ></script>
<script type="text/javascript">

    function menuClick(tab)
    {

        switch (tab)
        {
            case -1: // accueil
                // alert(tab+':accueil');
                // $('#main_center').empty();
                $('#main_center').load('form.accueil.php');
                break;

            case 0: // connexion
                // alert(tab+':connexion');
                // $('#main_center').empty();
                $('#main_center').load('form.login.php');
                break;
        }   
    }

    $(document).ready(function() 
    {
        $('#main_center').load('form.accueil.php');
    });

</script>

</head>
<body>

<div id="wrap">
    <!-- HEADER -->
    <div id="header">
        <div id="menu">
            <ul class="menu">
                <?php
                    // Affichage du menu
                    echo '<li onClick="menuClick(-1);"><a class="" id="tab1" href="">Accueil</a></li>';

                    if (!$oLogin->get_connected())
                    {
                        // si pas connecté on affiche le module de connexion
                        echo '<li onClick="menuClick(0);"><a class="" id="tab2" href="">Connexion</a></li>';
                        // echo '<li onClick="menuClick(0);"><a class="" id="tab2" href="">Connexion</a></li>';
                        echo '<li onClick="menuClick(666);"><a class="" id="tab2" href="">Test</a></li>';
                    } 
```

这是'form.login.php'

```
<form name="Identification" method="post" action="index.php">
    <table class="side-menu">
        <tr>
            <th colspan="2" id="th_conn">CONNEXION</th>
        </tr>
        <tr>
            <td></td>
        </tr>
        <tr>
            <td align="left">Nom d'utilisateur</td>
            <td><center><input class="text" type="text" name="usager"></center></td>
        </tr>
        <tr>
            <td align="left">Mot de passe</td>
            <td><center><input class="text" type="password" name="passwd"></center></td>
        </tr>
        <tr id="submit" valign="top">
            <td></td>
            <td><center><input class="submit" type="submit" value="Soumettre"></center></td>
        </tr>
    </table>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:09:26.300

错误在...它缺少#。所以即使是 jQuery 脚本也无法加载页面。

# c++ - c++11中指针的'auto'类型分配是否需要'*'？

> ID：12773257
> 
> 赞同：80
> 
> 时间：2012-10-07T22:04:17.370
> 
> 标签：c++, pointers, c++11, auto

鉴于我的变量是一个指针，如果我将它分配给“自动”类型的变量，我是否指定“*”？

```
std::vector<MyClass> *getVector(); //returns populated vector
//...

std::vector<MyClass> *myvector = getVector();  //assume has n items in it
auto newvar1 = myvector;

// vs:
auto *newvar2 = myvector;

//goal is to behave like this assignment:
std::vector<MyClass> *newvar3 = getVector(); 
```

我对它`auto`在 c++11 中的工作方式有点困惑（这是 c++11 的一个新特性，对吧？）

**更新：**我修改了上面的内容以更好地阐明我的向量是如何真正填充到函数中的，我只是试图将返回的指针分配给一个变量。对困惑感到抱歉

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-07T22:13:33.930

```
auto newvar1 = myvector;

// vs:
auto *newvar2 = myvector; 
```

这两个是相同的，并且将声明一个指向`std::vector<MyClass>` ~~（指向随机位置，因为`myvector`在您的示例中未初始化并且可能包含垃圾）~~. 所以基本上你可以使用其中任何一个。我更喜欢`auto var = getVector()`，但`auto* var = getVector()`如果您认为它更好地强调意图（即`var`指针），您可能会选择。

[我必须说我从未梦想过使用`auto`. 我认为人们只会使用`auto`而不考虑它，这在 99% 的情况下都是正确的 -`auto`用某些东西来装饰的需要仅来自引用和 cv 限定符。]

但是，稍微修改一下，两者还是有细微差别的*：*

```
auto newvar1 = myvector, newvar2 = something; 
```

在这种情况下，`newvar2`将是一个指针（而且某些东西也必须是）。

```
auto *newvar1 = myvector, newvar2 = something; 
```

这里，`newvar2`是指针类型，例如。`std::vector<MyClass>`，并且初始化程序必须足够。

一般来说，如果初始化器不是花括号初始化器列表，编译器会`auto`这样处理：

1.  它生成一个人工函数模板声明，其中一个参数与声明器的确切形式相同，`auto`并被模板参数替换。所以对于`auto* x = ...`，它使用

    ```
    template <class T> void foo(T*); 
    ```

2.  它试图解决呼叫`foo(initializer)`，并查看推断的内容`T`。这被替换回来代替`auto`.

3.  如果单个声明中有更多声明符，则对所有声明符都这样做。推导的`T`必须对所有这些都相同...

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2019-10-08T08:57:55.027

当涉及到 constness 时`auto`，可能存在微妙的差异。`auto*`

```
int i;
const auto* p = &i; 
```

相当于

```
int i;
const int* p = &i; 
```

然而

```
int i;
const auto p = &i; 
```

相当于

```
int i;
int* const p = &i; 
```

这具有以下效果：

```
void test(int a) {
    const auto* p1 = &a;

    *p1 = 7;               // Error
    p1 = nullptr;          // OK

    const auto p2 = &a;

    *p2 = 7;               // OK
    p2 = nullptr;          // Error
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T23:31:17.110

```
auto newvar1 = *myvector; 
```

这可能是您想要的，它创建了实际向量的副本。如果您想要引用而不是写入`auto& newvar1 = *myvector;`或创建另一个指向同一向量的指针，请使用`auto newvar1 = myvector;`. 与您的其他尝试不同的`auto *newvar1 = myvector;`是，后者曾经强制 myvector 为指针类型，因此以下代码失败：

```
std::vector<int> v1;
auto* v2 = v1; // error: unable to deduce ‘auto*’ from ‘v1’ 
```

# objective-c - SSH 键盘交互认证

> ID：12773258
> 
> 赞同：3
> 
> 时间：2012-10-07T22:04:19.250
> 
> 标签：objective-c, ios, authentication, libssh2

我目前尝试在 Objective-C 中扩展 libssh2 Wrapper。

我正在尝试实现该`libssh2_userauth_keyboard_interactive`方法。我的问题是响应回调。

我在网上找到了这个实现，它绕过了“真正的”交互性并使用实际密码来使身份验证成为可能：

```
int error = libssh2_userauth_keyboard_interactive(session, [username UTF8String], &kbdCallback);

static void kbdCallback (const char *name, int name_len, const char *instruction, int instruction_len, int num_prompts, const LIBSSH2_USERAUTH_KBDINT_PROMPT *prompts, LIBSSH2_USERAUTH_KBDINT_RESPONSE *responses, void **abstract)
{
    responses[0].text = (char *)[password UTF8String];   // resp. (char *)[@"test" UTF8String]
    responses[0].length = strlen([password UTF8String]); // resp. (char *)[@"test" UTF8String]
} 
```

`password`我的一个问题是在调用中访问实例变量`static void`，我的另一个问题是当我尝试调用该方法时得到 SIGABRT（我使用固定字符串来测试它是否有效）。

有没有可能让它工作？

朱利安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T06:11:00.980

`kbdCallback`实际上不是一个方法，它是一个函数 - 你可以告诉几种方法 - 它前面没有`-`or `+`，返回类型周围没有括号，而且方法也不能是`static`. 因此，由于它是一个函数而不是方法，因此没有与之关联的对象，也没有`self`指针；因此您无法直接访问任何实例变量。我想有几种方法可以解决这个问题；您可以拥有对象的静态实例，该函数可以从中获取密码，或者如果有某种方法可以传递要在回调中使用的上下文指针，则您可以以这种方式传递对象。

关于你的`SIGABRT`，你能说出具体发生在哪一行，以及你使用的参数的值是什么？从你的问题看不清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T18:13:03.270

[http://comments.gmane.org/gmane.network.ssh.libssh2.devel/4163](http://comments.gmane.org/gmane.network.ssh.libssh2.devel/4163)

**原因：** Win32下malloc-in-EXE-free-in-DLL。
**修复：**使用自定义的 free/malloc/realloc 函数。在下面添加

```
static void *my_alloc(size_t count, void **abstract)            {   return malloc(count);}
static void my_free(void *ptr, void **abstract)                 {   free(ptr);}
static void *my_realloc(void *ptr, size_t count, void **abstract){  return realloc(ptr, count);} 
```

并更换

```
libssh2_session_init(); 
```

和

```
libssh2_session_init_ex(my_alloc, my_free, my_realloc, NULL); 
```

# php - JSON、jQuery、PHP 逻辑问题循环并在每次迭代时显示正确的值

> ID：12773260
> 
> 赞同：0
> 
> 时间：2012-10-07T22:05:07.997
> 
> 标签：php, javascript, jquery, json

**TL；帖子底部的 DR**

我正在为移动操作系统构建一个应用程序。这是相关代码：

```
var pageId;
        $(document).ready(function(){
            var output = $('#output');

            $.ajax({
                url: 'http://dev.123456789.co.uk/db.php',
                dataType: 'jsonp',
                jsonp: 'jsoncallback',
                timeout: 5000,
                success: function(data, status){
                    $.each(data, function(i,item){ 
                        var linkedPage = '<h2><a href="displaySinglePost.html">'+item.eventName+'</a></h2>'
                            + '<p>Description: '+item.description+'</p><p>Type: '
                            + item.type+'</p><p id="pageid">'+item.id+'</p>';

                        output.append(linkedPage);
                        pageId = $('#pageid').html();
                        localStorage.setItem("pageId", pageId);
                    });
                },
                error: function(){
                    output.text('There was an error loading the data.');
                }
            });
        }); 
```

基本上，代码会转到存储在我们的开发服务器上的 PHP 文件并从数据库返回数据，在本例中是它的事件名称、描述、类型和 id，id 是数据库中行的 id（主键）。

在每次迭代中，它会在以下位置输出正确的 item.id：'+item.id+'

'。

但是，当您点击每个链接时，您将转到新页面 localStorage.setItem -> pageId 始终相同，因此它始终等于 1，即数据库中的第一个 id。但是我需要它，以便当您单击链接时，它会将您带到每次迭代的正确 ID。

据我所知，我无法进行获取/发布，因为应用程序无法读取 PHP，因为它是用于智能手机的，因此设备上的数据处理是通过从 JSON 发送的 javascript/数据（以及 HTML 结构）；有任何想法吗？

编辑：displaySinglePost.html：

```
var pageId;

        $(document).ready(function(){
            pageId = localStorage.getItem("pageId");
            document.write("pageid: " +pageId);
            var output = $('#output');
            localStorage.clear();
            $.ajax({
                url: 'http://dev.xxxxxxx.co.uk/single.php',
                dataType: 'jsonp',
                jsonp: 'jsoncallback',
                timeout: 5000,
                success: function(data, status){
                    $.each(data, function(i,item){ 
                        var dataOut = '<h2><a href="displaySinglePost.html">'+item.eventName+'</a></h2>'
                            + '<p>Description: '+item.description+'</p><p>Type: '
                        + item.type+'</p>';

                        output.append(dataOut);
                    });
                },
                error: function(){
                    output.text('There was an error loading the data.');
                }
            });
        }); 
```

太懒; 没读过：

**但是，当您点击每个链接时，您将转到新页面 localStorage.setItem -> pageId 始终相同，因此它始终等于 1，即数据库中的第一个 id。但是我需要它，以便当您单击链接时，它会将您带到每次迭代的正确 ID。**

**据我所知，我无法进行获取/发布，因为应用程序无法读取 PHP，因为它是用于智能手机的，因此设备上的数据处理是通过从 JSON 发送的 javascript/数据（以及 HTML 结构）；有任何想法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T22:25:25.410

您的意思是在每次迭代中设置本地存储项“pageID”，就像在您的第一个示例中一样？您可能会在每次迭代时覆盖它的值（最后一次迭代的 item.id 为 1）。

但是，如果您想为每个 id 创建一个链接，您应该尝试：

```
var dataOut = '<h2><a href="page.php?id='+item.id+'">'+item.eventName+'</a></h2>'
                    + '<p>Description: '+item.description+'</p><p>Type: '
                    + item.type+'</p>'; 
```

并让 php 通过 page.php 上的 $_GET 处理 id

# javascript - 一个函数没有与 jQuery 无限轮播构建一起运行

> ID：12773261
> 
> 赞同：1
> 
> 时间：2012-10-07T22:05:13.980
> 
> 标签：javascript, jquery, html, css

所以我尝试使用 html、css 和 jQuery 让自己成为一个无限轮播，除了后退按钮之外的所有工作都不会循环，我现在已经花了很长时间这样做，我想知道是否有人有任何见解？[http://jsfiddle.net/e2SKk/](http://jsfiddle.net/e2SKk/)是你可以看到代码的地方！我之所以这样做，是因为我认为这会给我一个学习更多知识的机会，但是对代码布局或技术的任何批评都会有所帮助！

特别是它的这段代码似乎不起作用

```
else if(loopPrev==true){
            sliderActive=true
            $('.item-holder').css({
                'left':clonePos
            });
            $('.item-holder').animate({
                'left':holderPos+$('.slider').width()+'px'
            },function(){
                sliderActive=false;
            });
        }; 
```

顺便说一句，这只是一个片段，没有其余部分就没有多大意义！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:39:15.417

很酷的小滑块，你要去这里！你说你是初学者？我想说你已经很好地掌握了 jQuery！同样在我忘记之前，请解决您的评论：如果您在 stackoverflow 上发布一些内容......它将被很多人查看：)。很少有人来到这里却得不到任何帮助（尽管您可能并不总能得到答案）。

幸运的是，我发现了你的问题！就在这里：

```
else if(loopPrev==true){
    sliderActive=true
    $('.item-holder').css({
        'left':clonePos
    });
    $('.item-holder').animate({
        'left':holderPos+$('.slider').width()+'px'
    },function(){
        sliderActive=false;
    });
}; 
```

您正在检查是否循环播放，将滑块设置为活动状态，将下一张幻灯片设置为索引中的最后一张幻灯片（然后同时将其推到该位置），然后像往常一样制作动画。这导致了两个运动：首先到索引的后面，然后到 holderPos+$('.slider').width()+'px' 的值......因此你的行为很奇怪。这应该有助于：

```
 else if(loopPrev==true){
     sliderActive=true;
     $('.item-holder').animate({
         'left':"-1800px"
     }, function(){ 
         sliderActive=false; 
     })
 }; 
```

值“-1800px”只是我预先计算的缓冲区中的最后一张幻灯片……您应该能够毫无问题地将其替换为您的 clonePos 变量。

*编辑：您还应该将变量 clonePos 更改为如下所示：

```
var clonePos = '-'+($('.item').index()-1)*($('.slider').width()); 
```

当您在索引中的最后一张幻灯片和第一张幻灯片之间交换时，它将消除一个错误（如果您愿意的话，一个“平滑过渡”）。

**

## 第二部分

**

为了实现无限滚动的错觉，您需要在“左按下”动画调用中嵌入回调“后推”函数。这里已经很晚了，所以我还没有测试我要编写的代码，但我相当有信心它会为你工作。

```
else if(loopPrev==true){
 sliderActive=true;
 $('.item-holder').animate({
     'left':clonePos
 }, function(){
     $(this).css('left':holderPos+$('.slider').width()+'px');
     sliderActive=false; 
 })
}; 
```

如果您看一下，这与我提供的原始答案没有太大区别。我们所做的只是获取 animate 的回调函数，并添加一个调用以将位置滑动到原始索引位置。同样，未经测试，但想法是 .animate() 将滑动到克隆，一旦完成，您的回调会将克隆与原始交换，然后停用滑块。

你离得不是很远！这是 animate 函数的语义规则（试图帮助您理解回调的工作方式）：

```
animate( params, [duration], [easing], [callback] ) 
```

*   params 是我们的左调用（在这种情况下是克隆的幻灯片）
*   此处忽略持续时间
*   此处忽略缓动
*   回调是我们的 function() 调用，它执行我们的小大卫科波菲尔交换

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:25:38.523

jQuery 很适合编写简短的脚本。简而言之，您的滑块代码：

```
var width = $('.slider').width();
$('.item').css({width:width});
var $holder = $('.item-holder').css({left:-width}).prepend($('.item:last'));

$('.prev').click(function(){
    $holder.not(':animated').css({left:-2*width}).prepend($('.item:last')).animate({left:-width});
});
$('.next').click(function(){
    $holder.not(':animated').css({left:0}).append($('.item:first')).animate({left:-width});
}); 
```

​ 这是**完整**的代码。

[在http://jsfiddle.net/creativecouple/YPU2d/](http://jsfiddle.net/creativecouple/YPU2d/)上查看此操作

# mysql - REGEXP 中的通配符？

> ID：12773263
> 
> 赞同：1
> 
> 时间：2012-10-07T22:05:21.937
> 
> 标签：mysql, regex, wildcard

我在长文本列中有这样的数据：

```
Name: Adam Smith
Name: Bob Johnson
Name: John Hansen 
```

是否可以在正则表达式中使用通配符？假设用户搜索`Smith`，用伪代码：

```
SELECT * FROM mytable
WHERE `file` REGEXP 'Name: %Smith%\n' 
```

我很确定`%`通配符不是正则表达式中的函数。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T22:14:45.570

-using的`REGEXP`答案是：

```
SELECT * FROM mytable WHERE `file` REGEXP 'Name: .*Smith.*\n' 
```

但是`LIKE`更适合：

```
SELECT * FROM mytable WHERE `file` LIKE 'Name: %Smith%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T22:08:25.757

你的语法是：`SELECT * FROM mytable WHERE (columnName) LIKE 'Name: %Smith%';`

酌情更换`(columnName)`。不清楚您的意思`longtext`是否是列的名称，但如果是，那您将用它替换它。

# sublimetext2 - 如何在 Sublime 中关闭 COMMAND 模式或 VISUAL 模式？

> ID：12773266
> 
> 赞同：20
> 
> 时间：2012-10-07T22:05:57.837
> 
> 标签：sublimetext2

在 Sublime Text 2 中，如果我按转义键，页面将进入命令模式，这似乎将文本输入作为命令，而不是实际输入文本。

另一个奇怪的是视觉模式，除了似乎突出显示文本之外，我不知道它做了什么。

我认为他们安装了我得到的主题，“苏打水”，也许。无论如何，我搜索并发现您可以通过按“i”关闭命令模式。

无论如何，这两种模式都非常烦人，我该如何摆脱它们？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-17T02:11:18.267

默认情况下，sublime 应该忽略 vintage 模式包。在默认设置文件更改的底部

```
"ignored_packages": [] 
```

至

```
"ignored_packages": ["Vintage"] 
```

见：[http ://www.sublimetext.com/docs/2/vintage.html](http://www.sublimetext.com/docs/2/vintage.html)

注意：在这种情况下，您应该能够编辑 sublime 默认值，但通常您将编辑您的用户首选项文件。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-07T22:08:53.487

我知道答案，但我一直在寻找它几天，所以我想我会发布它。

您必须禁用“Vintage”包。

进入首选项>包控制>包控制：禁用包>选择'Vintage'

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-07T23:13:39.050

这发生在我身上。在默认首选项中，它设置为：

```
"ignored_packages": ["Vintage"] 
```

但在我的用户偏好中，它被设置为：

```
"ignored_packages": [] 
```

确保该值未被覆盖。

# c++ - 继承问题

> ID：12773270
> 
> 赞同：0
> 
> 时间：2012-10-07T22:06:14.167
> 
> 标签：c++, eclipse-cdt

这可能是一个业余问题，但在这里。我有三个课程：

可绘制对象：

```
class DrawableObject
{
private:

    int x;
    //...
public:
    int getX();
        //...
} 
```

继承自 DrawableObject 的 FormElement：

```
class FormElement : public DrawableObject 
```

FormElement 有一个名为 wasPushed 的方法：

```
bool FormElement::wasPushed(SDL_Event event)
{
bool wasPushed =
        (
            ( event.motion.x >= getX()) //Inherited getX()
            && // Blah blah...
        ) ? true : false;

return wasPushed;
} 
```

最后，继承自 FormElement 的 TextField：

```
class TextField : public DrawableObject 
```

我还有一个名为 Form 的类：

```
class Form {

public:

    list<FormElement*> getFormElements();
    void generateForm();

private:

    list<FormElement*> formElements;
} 
```

Form 在其 generateForm() 方法中将一些 TextFields 添加到其列表中：

```
void Form::generateForm() {

TextField *aTextField = new TextField(10, 10, 120);
    this->formElements.push_back(aTextField);
} 
```

后来，它尝试迭代它：

```
for(list<FormElement*>::iterator it = getFormElements().begin()
    ; it != getFormElements().end()
    ; ++it)
        {
          if ( (*it)->wasPushed(theEvent) )
            { //Etc. 
```

好吧，当程序尝试从 wasPushed 方法访问 getX() 时，程序退出了。

谁能告诉我为什么？我定义错了什么？

我非常感谢你。马丁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T22:09:07.893

您正在按值返回列表：

```
list<FormElement*> getFormElements(); 
```

它应该是参考：

```
list<FormElement*> &getFormElements(); 
```

当您按值返回时，您将获得列表的临时副本。

所以在这段代码中：

```
for(list<FormElement*>::iterator it = getFormElements().begin()
    ; it != getFormElements().end() 
```

您的开始和结束迭代器指向列表的两个不同副本。此外，这些临时副本将在您有机会迭代它们之前被销毁。

您也可以直接使用 formElements 成员：

```
for(list<FormElement*>::iterator it = formElements.begin()
    ; it != formElements.end()
    ; ++it) 
```

# php - 正则表达式嵌套论坛报价（BBCode）

> ID：12773271
> 
> 赞同：1
> 
> 时间：2012-10-07T22:06:30.597
> 
> 标签：php, html, regex, bbcode

> **可能重复：**
> [php regex [b] 到 <b>](https://stackoverflow.com/questions/7545920/php-regex-b-to-b)

我在使用正则表达式时遇到问题，我是一个绝对的正则表达式菜鸟。我看不出尝试将 HTML 转换回“BBCode”时出了什么问题。

有人可以看看“取消引用”功能并告诉我我正在犯的明显错误吗？（我知道这很明显，因为我总是发现不明显的错误）

注意：我没有使用递归正则表达式，因为我无法理解它并且已经开始以这种方式整理引号，以便它们嵌套。

```
<?php
function quote($str){
    $str = preg_replace('@\[(?i)quote=(.*?)\](.*?)@si', '<div class="quote"><div class="quote-title">\\1 wrote:</div><div class="quote-inner">\\2', $str);
    $str = preg_replace('@\[/(?i)quote\]@si', '</div></div>', $str);
    return $str;
}

function unquote($str){
    $str = preg_replace('@\<(?i)div class="quote"\>\<(?i)div class="quote_title"\>(.*?)wrote:\</(?i)div\><(?i)div class="quote-inner"\>(.*?)@si', '[quote=\\1]\\2',  $str);
    $str = preg_replace('@\</(?i)div\></(?i)div\>@si', '[/quote]', $str);
}
?> 
```

这只是一些帮助测试它的代码：

```
<html>
<head>
    <style>
    body {
        font-family: sans-serif;
    }
    .quote {
        background: rgba(51,153,204,0.4)  url(../img/diag_1px.png);
        border: 1px solid rgba(116,116,116,0.36);
        padding: 5px;
    }

    .quote-title, .quote_title {
        font-size: 18px;
        margin: 5px;
    }

    .quote-inner {
        margin: 10px;
    }
    </style>
</head>
<body>
    <?php
    $quote_text = '[quote=VCMG][quote=2xAA]DO RECURSIVE QUOTES WORK?[/quote]I have no idea.[/quote]';
    $quoted = quote($quote_text);
    echo $quoted.'<br><br>'.unquote($quoted); ?>
</body> 
```

在此先感谢，山姆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T22:23:47.850

好吧，您可以首先将您的 php 类设置为`quote-title`或者`quote_title`但保持一致。

然后，将 a 添加`return $str;`到您的第二个函数中，您应该就快到了。

你可以简化你的正则表达式：

```
function quote($str){
    $str = preg_replace('@\[quote=(.*)\]@siU', '<div class="quote"><div class="quote-title">\\1 wrote:</div><div class="quote-inner">', $str);
    $str = preg_replace('@\[/quote\]@si', '</div></div>', $str);
    return $str;
}

function unquote($str){
    $str = preg_replace('@<div class="quote"><div class="quote-title">(.*) wrote:</div><div class="quote-inner">@siU', '[quote=\\1]',  $str);
    $str = preg_replace('@</div></div>@si', '[/quote]', $str);
    return $str;
} 
```

但请注意不要用不同的调用替换引号的开始和结束标记。如果您碰巧有其他 bbcode 创建`</div></div>`代码，我认为取消引用会产生一些奇怪的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T22:31:27.630

就个人而言，我利用了这样一个事实，即生成的 HTML 基本上是：

```
<div class="quote">Blah <div class="quote">INCEPTION!</div> More blah</div> 
```

重复运行正则表达式，直到没有更多匹配项：

```
do {
    $str = preg_replace( REGEX , REPLACE , $str , -1 , $c);
} while($c > 0); 
```

此外，将其作为一个正则表达式来使这更容易：

```
'(\[quote=(.*?)\](.*?)\[/quote\])is'
'<div class="quote"><div class="quote-title">$1 wrote:</div><div class="quote-inner">$1</div></div>' 
```

# java - 是否可以在 Android 设备上接收超过 315 MHz 的信号？

> ID：12773274
> 
> 赞同：3
> 
> 时间：2012-10-07T22:06:40.723
> 
> 标签：java, android, hardware, arduino, telecommunication

我想制作一个 android 应用程序，它将接收从 RF 链路发射器（[https://www.sparkfun.com/products/10535](https://www.sparkfun.com/products/10535)？）传输的基本数据。我想首先知道是否有可能以某种方式控制可以接收信号的频率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T23:37:50.220

> 我想首先知道是否有可能以某种方式控制可以接收信号的频率。

一般来说，没有。Android是一个操作系统。它不是硬件。具体来说，它不是软件定义无线电 (SDR) 接收器。原则上，Android 可以为具有 SDR 功能的设备供电，但 Android 本身与 SDR 没有任何关系，当然在 SDK 级别。或者，Android 可以为恰好具有合适的 315MHz 接收器的设备供电，但您的一般现成 Android 设备可能没有这样的接收器，并且操作系统没有针对这种接收器的任何特定内容。

# sql-server-2008 - 删除列中所有行的引号

> ID：12773275
> 
> 赞同：0
> 
> 时间：2012-10-07T22:06:42.607
> 
> 标签：sql-server-2008, tsql

我在表中有一个列，其中包含用引号括起来的值（即“USA”、“Mexico”、“Russia”、“China”等）。我想删除引号并保留字符串的其余部分完好无损（美国、墨西哥等）。有一个简单的说法吗？还是我需要结合使用 LEFT、RIGHT 和 SUBSTRING 函数？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T22:37:24.330

这将删除所有`"`标记，即使是值中间的标记。

```
UPDATE YourTable
SET CountryName = REPLACE(CountryName, '"', ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T22:38:14.187

好吧，如果你想摆脱所有双引号，怎么样：

```
SELECT REPLACE(countryColumn, '"', '') AS countryColumn
FROM   theTable 
```

或者如果您确实想修改数据，则进行类似的更新。

# php - 脚本捕捉图像

> ID：12773277
> 
> 赞同：0
> 
> 时间：2012-10-07T22:07:12.620
> 
> 标签：php, javascript, html, ajax, forms

我有这个脚本，所以它转到 ../AdsCreate/CreateCar.php 读取表单并插入数据库并将页面加载到某个 div 中，一切正常。

我有一个问题，表单的一部分是上传图像，现在它不这样做我被告知这是因为下面的脚本序列化数据并且不基于文件执行此操作。

这是脚本。

```
<script type="text/javascript">
jQuery(document).ready(function($) {

$("#Submit").click(function() {

var url = "../AdsCreate/CreateCar.php"; // the script where you handle the form input.

$.ajax({
   type: "POST",
   url: url,
   data: $("#myForm").serialize(), // serializes the form's elements.
   success: function(html){ $("#right").html(html); }
 });

return false; // avoid to execute the actual submit of the form.
});
});
</script> 
```

这是我的表格

```
<form method="post" enctype="multipart/form-data" id="myForm">
 <table class="default1" style="width: 100%" align="center">
      <tr>
        <td class="content1" colspan="3"><h3><b>Car Ads</b></h3></td>
      </tr>
      <tr>
      <td class="content1" width="70%">Make: <input type="text" name="name"></td>
      <td class="content1" width="15%">Model: <input type="text" name = "email"></td>
      <td class="content1" width="15%">Year: <input type="text" name = "phone"></td>
     </tr>
      <tr>
      <td class="content1" colspan="3">Main Photo: <input type="file" name="photo"></td>
     </tr>
      <tr>
      <td class="content1" colspan="3"><input type="submit" value="Upload" id="Submit"></td>
     </tr>
</table>
</form> 
```

如何更改脚本，以便我可以上传一个也有文件上传的表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:22:24.260

您可以使用此插件单独上传文件：

> [http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

您还可以使用 jQuery Forms 上传文件：

> [http://www.malsup.com/jquery/form/#file-upload](http://www.malsup.com/jquery/form/#file-upload)

确保在选择文件后禁用提交按钮，以便在用户提交表单之前先上传图像。

# objective-c - NSUnicodeStringEncoding 为每个字符串添加 FFFE

> ID：12773281
> 
> 赞同：0
> 
> 时间：2012-10-07T22:07:47.993
> 
> 标签：objective-c, cocoa

我正在尝试通过将字符串编码为`NSUnicodeStringEncoding`第一个来将字符串附加到文件中。我正在这样做：

```
NSData *data = [@"data" dataUsingEncoding: NSUnicodeStringEncoding];
NSFileHandle *output = [NSFileHandle fileHandleForUpdatingAtPath:@"file"];
[output seekToEndOfFile];
[output writeData:data]; 
```

如果我多次执行此操作，然后查看文件，我注意到添加的每个字符串都有 FFFE 前缀。但是当我切换`NSUnicodeStringEncoding`到`NSUTF8StringEncoding`这个前缀时，它就消失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T22:18:57.557

这称为字节顺序标记，之所以放在那里，是因为`NSUnicodeStringEncoding`没有指定字符是以大端还是小端顺序存储的。

要防止`0xFFFE`或`0xFEFF`不出现在字符串的开头，请根据您的具体需要使用 、 、 或 中`NSUTF16BigEndianStringEncoding`的`NSUTF16LittleEndianStringEncoding`一个`NSUTF32BigEndianStringEncoding`。`NSUTF32LittleEndianStringEncoding`（供参考：Apple 使用的 Intel 和 ARM 处理器是 little endian。）

# coffeescript - 如何从 couchdb 请求 htm 附件，然后在浏览器上用作 html？

> ID：12773284
> 
> 赞同：1
> 
> 时间：2012-10-07T22:08:24.243
> 
> 标签：coffeescript, express, couchdb

将 express 与咖啡脚本一起使用。我想要发生的是，请求将从 couchdb 获取 test.htm，然后在浏览器上呈现该 htm 文件（这是正确的术语吗？）。

我的 app.coffee 上有这个

```
app.get "/testreq", (req, res) ->
  gets = require("request")
  myurl = gets 'http://jims.iriscouch.com:5984/album/attachment_id/test.htm'
  res.send myurl 
```

在我的浏览器上，当我转到“/testreq”时，我得到了这些......

`{ "readable": true, "writable": true, "__isRequestRequest": true, "_redirectsFollowed": 0, "maxRedirects": 10, "followRedirect": true, "followAllRedirects": false, "setHost": true, "port": "5984", "host": "jims.iriscouch.com", "path": "/album/1d22186ee496b5ada564a9888d003203/test.htm", "uri": { "protocol": "http:", "slashes": true, "host": "jims.iriscouch.com:5984", "port": "5984", "hostname": "jims.iriscouch.com", "href": "http://jims.iriscouch.com:5984/album/1d22186ee496b5ada564a9888d003203/test.htm", "pathname": "/album/1d22186ee496b5ada564a9888d003203/test.htm", "path": "/album/1d22186ee496b5ada564a9888d003203/test.htm" }, ....`

将 res.send myurl 更改为`res.render myurl`给我一个错误（500 错误：无法查找视图“[object Object]”）。

我应该怎么做才能让 test.htm（来自 couchdb）在浏览器上呈现为 html？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T22:23:15.363

我知道了！

```
 myurl.pipe res 
```

感谢您的光临！

# c# - 如何在没有开关的情况下或在 C# 中比较 3 个条件？

> ID：12773296
> 
> 赞同：-3
> 
> 时间：2012-10-07T22:09:15.670
> 
> 标签：c#

我要比较一个值，如果值小于等于3，则做某事，如果值介于4和27之间，则做其他事情，但如果值大于28，则做其他事情，有没有优雅不消耗大量资源的方式，我可以避免使用 switch of if?? 我必须比较大约 60k+ 的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T22:15:51.327

我不认为有什么更快。如果您知道您的数据是如何分布的，您也许可以加快速度。例如，如果大多数值都高于 27，则首先检查该条件，等等。如果您的数据已排序，您还可以找到一种方法来利用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T22:18:52.683

使用快速排序对值进行排序。此实现将减少 if 比较的数量，但可能不会更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T22:27:03.803

我计时了这样的检查：

```
if (i <= 3) {
  DoSomething();
} else if (i <= 27) {
  DoSomethingElse();
} else {
  DoSomethingElse();
} 
```

在我的计算机上执行 60000 次大约需要 35 微秒。如果这对你正在做的事情来说太长了，你必须重新考虑你在做什么，而不是尝试一种不同的方式来做这件事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T22:48:20.823

您可以使用[条件](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)运算符 ( `?:`) 并执行以下操作：

```
i = (i <= 3) ? DoSomething() : (i <= 27) ? DoSomething(): DoSomething(); 
```

那只是更简洁，在我的计算机（6gb ram）上需要 571400 纳秒，而`if..else`语句需要 407400 纳秒，所以`if..else`语句更快，但条件运算符更简洁。

# wpf - 并非所有内容都可以在从按钮派生的自定义控件上单击

> ID：12773303
> 
> 赞同：1
> 
> 时间：2012-10-07T22:10:16.193
> 
> 标签：wpf, xaml, controltemplate

iv'e 有一个派生自 Button 的“Cube”（骰子）控件

立方体：

```
public class Cube : Button
{        
    public Cube()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(Cube), new FrameworkPropertyMetadata(typeof(Cube)));                                
    }
    ...... // Stuff
} 
```

模板（一般）：

```
<ControlTemplate TargetType="{x:Type local:Cube}" x:Key="CubeControlTemplate">
         <Border>                
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="40"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border>
                        <Grid>
                            .......
                        </Grid>                          
                    </Border>

                    <Border Grid.Column="2">
                        <Grid>
                            .......
                        </Grid>                          
                    </Border>    
              <Grid> 
        </Border> 
</ControlTemplate> 
```

它看起来像什么：

![在此处输入图像描述](../Images/6f7e0dbb684c97ead73d2a0c3cf33612.png)

黄色标记表明它只能在 Content 后面点击，只有当您真正将点击目标定位在 Button 为“隐藏”的位置时..

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T22:37:29.073

没有`Background`鼠标事件将不会被捕获。给你的外层`Border`透明`Color`：

```
<ControlTemplate TargetType="{x:Type local:Cube}" x:Key="CubeControlTemplate">
    <Border Background="Transparent">                
        .......
    </Border> 
</ControlTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T22:37:55.740

请检查您是否尝试单击具有 Null 背景的元素。命中测试需要`Brush`设置 a。

如果您`Border`或您`Grid`的背景为空，请尝试将其设置为透明。

如果您仍然遇到问题，请尝试使用 Snoop 进行调试。

[http://snoopwpf.codeplex.com/](http://snoopwpf.codeplex.com/)

# wix - WIX UI 属性更改未发布

> ID：12773305
> 
> 赞同：0
> 
> 时间：2012-10-07T22:10:32.003
> 
> 标签：wix, windows-installer, wix3.5

我在 WIXUI 中有一个绑定到属性的编辑控件

```
<Property Id="WIXUI_FILESHAREDIR">FILESHAREDIR</Property> 
```

和用户界面

```
 <Control Id="FileSharePathGroup" Type="GroupBox" Height="89" Width="352" X="8" Y="96" Text="File Share"/>
    <Control Id="FileSharePathLabel" Type="Text" X="20" Y="114" Width="69" Height="13" Text="File Share Path"/>
    <Control Id="FileSharePathEdit" Type="PathEdit" X="20" Y="126" Width="250" Height="16" Property="WIXUI_FILESHAREDIR" Indirect="yes" />
    <Control Id="FileSharePathBrowse" Type="PushButton" X="280" Y="125" Width="56" Height="17" Text="Browse"/> 
```

以及以下发布声明：

```
 <Publish Dialog="ConfigurationDlg" Control="Back" Event="NewDialog" Value="InstallDirDlg">1</Publish>
      <Publish Dialog="ConfigurationDlg" Control="Next" Event="NewDialog" Value="VerifyReadyDlg">1</Publish>
      <Publish Dialog="ConfigurationDlg" Control="FileSharePathBrowse" Property="_BrowseProperty" Value="[WIXUI_FILESHAREDIR]" Order="1">1</Publish>
      <Publish Dialog="ConfigurationDlg" Control="FileSharePathBrowse" Event="SpawnDialog" Value="BrowseDlg" Order="2">1</Publish> 
```

当我使用浏览按钮时，FILESHAREDIR 属性最终会正确更新。当我手动输入文本编辑器并点击下一步时，它没有，并且 FILESHAREDIR 在安装时保留了不正确的默认值。

我错过了发布声明吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T00:12:26.403

您需要使用 Property@Secure 属性来列出[SecureCustomProperties 属性中的公共属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371571%28v=vs.85%29.aspx)。

# javascript - 整数验证未按预期工作

> ID：12773308
> 
> 赞同：1
> 
> 时间：2012-10-07T22:11:03.353
> 
> 标签：javascript, validation, integer

感谢本网站上的一些答案，我构建了一个函数来验证 javascript 提示中的整数。为了满足我的需要，我发现了如何使用`isNaN`和结果`%`，但肯定有问题，因为仍然无法正常工作：这个验证函数只需要接受整数，作为额外奖励，它还会接受一个稍后在程序中用于不同目的的特殊关键字。

所以，之前我已经定义：

```
var value = prompt("Type an integer"); 
```

因此，在那之后，我调用了验证函数，其中包括三个条件： 如果出现以下情况，验证警告会跳转：

1）字符串不是数字

2）字符串 %1 不是 0（表示不是整数）

3）字符串不是特殊关键字（“extra”），也可作为输入有效。

该函数需要循环并不断显示提示，直到写入有效数据。

```
while (isNaN(value) == true && value % 1 != 0 && value != "extra") {
    alert("Please, type an integer");
    var value = prompt("Type an integer");
} 
```

我究竟做错了什么？非常感谢您的任何想法。我知道整数验证在这里被问了很多次，在这里我得到了一些想法，但我可能会遗漏一些东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T22:14:54.337

你可能把事情复杂化了……一个快速的[正则表达式](http://www.regular-expressions.info/)就可以了。

```
while (!/^(\d+|extra)$/i.test(value)) {
  ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T22:20:33.623

你只输入了一个等于

```
isNaN(value) = true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T22:20:22.530

[jsFiddle](http://jsfiddle.net/vu4ws/6/)示例

```
 var int = 10;
var str = "10";

var isInt = function(value) {
    return (str === 'extra' || !isNaN(parseInt(value, 16)) || /^\d+$/.test(value));
};

var isIntStrict = function(value) {
    return (isInt(value) && typeof value !== 'string');
}

console.log('false', isInt('kirk'));
console.log('true', isInt(int));
console.log('true', isInt(str));
console.log('true', 'strict - int', isIntStrict(int));
console.log('false','strict - string', isIntStrict(str));
console.log('false','strict - string', isIntStrict('0x04'));
console.log('true','strict - string', isIntStrict(0x04)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T04:24:21.123

我假设出于您的目的，@elclanrs 的答案就是您所需要的，并且是最简单和最直接的，但只是为了完整性和可疑的笑声，我很确定以下内容也可以满足您的需求：

```
function isAnIntOrExtra(v) {
  if (parseInt(+v) === +v && v !== '') {
    return parseInt(+v);
  }
  else if (v === 'extra') {
    return v;
  }
  else {
    return false;
  }
} 
```

[在这里提琴](http://jsfiddle.net/ultranaut/Uk5yc/)

这些都应该以十进制表示法传递并返回一个整数：

*   '387' 返回`387`
*   '-4' 返回`-4`
*   '0' 返回`0`
*   '2.4e3' 返回`2400`
*   '0xf4' 返回`244`

虽然这些都应该失败：

*   '4.5' 返回`false`
*   '2.4e-3' 返回`false`
*   '0xgc' 返回`false`
*   '' 返回`false`
*   “七”回报`false`

神奇的词“额外”又回来了`'extra'`

当然，它会以“1,345”之类的值“失败”，并且可能会直接翻转八进制表示法，将其视为十进制表示法（取决于 JavaScript 引擎？），但*可以*对其进行调整以处理这些情况也是如此，但实际上，您最好使用正则表达式。

# asp.net - asp.net 菜单控件未突出显示所选项目

> ID：12773309
> 
> 赞同：0
> 
> 时间：2012-10-07T22:11:08.943
> 
> 标签：asp.net, menu

我正在尝试在 asp.net 菜单的选定项目上设置背景色，但它没有效果。

```
 <div id="navepanel" style="float:left;">
<asp:Menu ID="Menu1" runat="server">
<StaticSelectedStyle BackColor="#D5D9F7" />
<DynamicSelectedStyle BackColor="#D5D9F7" />

    <Items>
        <asp:MenuItem Text="New Chapter" Value="New Chapter" NavigateUrl="~/ChapterManagement/CreateNewChapter.aspx"></asp:MenuItem>
        <asp:MenuItem Text="Edit Chapter" Value="Edit Chapter" NavigateUrl ="~/ChapterManagement/EditChapter.aspx"></asp:MenuItem>
        <asp:MenuItem Text="Select Chapter" Value="Select Chapter" NavigateUrl ="~/ChapterManagement/SelectChapter.aspx"></asp:MenuItem>
        <asp:MenuItem Text="Add Topics" Value="Add Topics" NavigateUrl ="~/ChapterManagement/AddTopics.aspx"></asp:MenuItem>

    </Items>

</asp:Menu> 
```

我目前正在使用 Chrome 进行测试。此菜单控件位于母版页上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T00:03:04.173

尝试这个：

```
<asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" StaticDisplayLevels="1"
                Orientation="Horizontal"  DataSourceID="SiteMapDataSource1" >
                    <staticselectedstyle backcolor="LightBlue" />       
                </asp:Menu>
                <asp:SiteMapDataSource ID="SiteMapDataSource1" runat="server" ShowStartingNode="false"  /> 
```

# android - 从 sd 卡加载 .swf 文件并播放

> ID：12773312
> 
> 赞同：1
> 
> 时间：2012-10-07T22:11:32.387
> 
> 标签：android, flash, webview

我是android开发新手。我正在开发一个应用程序，可以从sd卡加载.swf文件的文件路径，然后想在webView中播放。我不想使用 android_asset 文件夹中的 html 文件。这是我的代码。此代码显示空白页。在这种情况下，我该怎么办？

`公共类 FlashFile 扩展 Activity{

```
String sdCardFilePath;
private WebView mWebView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_flash_view);

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    Bundle gotBusket = getIntent().getExtras();
    sdCardFilePath = gotBusket.getString("key");

    mWebView = new WebView(this);
     mWebView = (WebView)findViewById(R.id.webView1);
     mWebView.getSettings().setPluginState(PluginState.ON);

     mWebView.getSettings().setJavaScriptEnabled(true);
     mWebView.getSettings().setPluginsEnabled(true);
     mWebView.getSettings().setAllowFileAccess(true);

     mWebView.loadUrl("file://"+sdCardFilePath);

}` 
```

# search - Solr-通过所有分析器后如何获得最终查询

> ID：12773322
> 
> 赞同：0
> 
> 时间：2012-10-07T22:12:16.770
> 
> 标签：search, solr, lucene

我是一个新的 solr 用户，只是想知道如何在 q 通过所有分析器后获得最终值。Ex 原始查询 q=ABC;"de

Analyzers = 小写，Patternreplacefactory 替换分号和其他特殊字符

输出 = abcde

基于这个 abcde，我正在我的代码中做进一步的处理。@Override public void prepare(ResponseBuilder rb) throws IOException { // TODO 自动生成的方法存根 SolrQueryRequest req = rb.req;

```
 SolrParams params = req.getParams();
    String q = params.get("q"); 
```

这个 q 值是 ABC;"de 如何检索分析器的输出？还是我找错了方法？我想检索 abcde

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:14:20.480

您转到[分析](http://your.server:8983/solr/core0/admin/analysis.jsp?highlight=on)页面，您可以在字段值（查询）端输入您的查询以查看它是如何分析的。还将 debugQuery=true 添加到您的请求并研究调试输出

# xml - 如何使用 JAXB 和 Spring 编组非字符串对象

> ID：12773323
> 
> 赞同：3
> 
> 时间：2012-10-07T22:12:17.843
> 
> 标签：xml, spring, object, jaxb

我试图按照[本](http://eggsylife.co.uk/2010/01/03/spring-3-restful-web-services/)教程使用 Spring 框架创建我自己的宁静 Web 服务。客户端做一个 GET 请求，比方说

> [http://api.myapp/app/students](http://api.myapp/app/students)

服务器返回对象教室的 xml 版本：

```
@XmlRootElement(name = "class")
    public class Classroom {

    private String classId = null;
    private ArrayList<Student> students = null;

    public Classroom() {
    }
    public String getClassId() {
        return classId;
    }
    public void setClassId(String classId) {
        this.classId = classId;
    }
    @XmlElement(name="student")
    public ArrayList<Student> getStudents() {
        return students;
    }
    public void setStudents(ArrayList<Student> students) {
        this.students = students;
    }
    } 
```

对象 Student 是另一个只包含字符串的 bean。

在我的 app-servlet.xml 中，我复制了以下几行：

```
<bean id="studentsView" class="org.springframework.web.servlet.view.xml.MarshallingView">
    <constructor-arg ref="jaxbMarshaller" />
</bean>

<!-- JAXB2 marshaller. Automagically turns beans into xml -->
<bean id="jaxbMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="classesToBeBound">
        <list>
            <value>com.spring.datasource.Classroom</value>
            <value>com.spring.datasource.Student</value>
        </list>
    </property>
</bean> 
```

现在我的问题是：如果我想插入一些非字符串对象作为类变量怎么办？假设我想要一个包含 InetAddress 的字符串版本的标签，例如

```
<inetAddress>192.168.1.1</inetAddress> 
```

如何强制 JAXB 调用 inetAddress.toString() 方法，使其在 xml 中显示为字符串？在返回的 xml 中，非字符串对象被忽略！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:17:43.917

您可以使用 an`XmlAdapter`来控制如何将对象从 XML 转换为。在您`XmlAdapter`中，您将编写将对象转换为/从`String`.

**例子**

*   [http://blog.bdoughan.com/2011/05/jaxb-and-joda-time-dates-and-times.html](http://blog.bdoughan.com/2011/05/jaxb-and-joda-time-dates-and-times.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:35:07.390

感谢布莱斯和[这个](https://stackoverflow.com/questions/7720031/how-to-set-jaxb2marshaller-list-of-xmladapters-in-spring-bean-through-xml)答案，我设法设置了一切。只是把它们放在一起，这是我的情况：

目标设备是：

```
@XmlRootElement(name="device")
public class Device {
    private String id;
    private String name;
    private String location;

    private InetSocketAddress address;
    private InetSocketAddress gatewayAddress;

    (omitted setters and getters...)        
} 
```

InetSockeAddressAdapter：

```
public class InetSocketAddressAdapter extends XmlAdapter<String, InetSocketAddress>{
    @Override
    public String marshal(InetSocketAddress v) throws Exception {
        return v.toString();
    }
    @Override
    public InetSocketAddress unmarshal(String v) throws Exception {
        String[] comp = v.split(":");
        return new InetSocketAddress(comp[0], new Integer(comp[1]));
    }

} 
```

将 package-info.java 放入对象和适配器的包中（使用 eclipse 作为简单文件创建，因为 IDE 不允许我创建名为 package-info 的类）：

```
@XmlJavaTypeAdapters({
            @XmlJavaTypeAdapter(type=InetSocketAddress.class, 
                value=InetSocketAddressAdapter.class)})
package com.enrico.apiserver.domain;

import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter; 
```

我们必须在其中声明 bean 的 *-servlet.xml 行：

```
<bean id="jaxbMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
        <property name="classesToBeBound">
            <list>
                <value>com.enrico.apiserver.domain.Device</value>
            </list>
        </property>
        <property name="adapters">
            <list>
                <bean class="com.enrico.apiserver.domain.InetSocketAddressAdapter" />
            </list>
        </property>
    </bean> 
```

# opengl - GLSL 中多通道、多 RT 渲染的奇怪问题

> ID：12773324
> 
> 赞同：4
> 
> 时间：2012-10-07T22:12:28.990
> 
> 标签：opengl, glsl, shader, fbo

我看到一个多通道、多 RT 乒乓渲染的奇怪问题

我正在使用 3 个着色器和一个 FBO，在任何阶段都没有错误。我使用的是opengl 4，所以我没有使用glBegin/glEnd，我使用我自己的矩阵进行转换，我使用顶点缓冲区进行渲染

该测试的总体思路是为三个单独的 fbo 附件渲染 3 种不同的颜色（我意识到在第一遍中两次渲染 vbo 效率不高，但这只是为了帮助我理解其他来源中的问题）然后将一组单独的纹理绑定到 fbo 并使用第一组作为采样器。最后一步是将结果混合到后台缓冲区中

奇怪的是，当第一个应该是红色而第二个应该是绿色（因为这些值来自第二个着色器）时，两个四边形的输出都显示为红色。

如果我将第二个着色器中的 SamplePix 函数更改为始终从第二个采样器中获取，则两者都显示为绿色，如果从第三个采样器中查找，则全部显示为黄色，但它似乎只能从一个采样器中读取。

现在我似乎无法解释为什么我可以从每个采样器中读取，但循环似乎没有正确查找（在着色器 2 中）

此外，如果我切换到渲染在着色器 2 中采样的纹理，我会在第二遍中看到黑色四边形（图 2）

希望有人可以对这个问题有所了解。（我也尝试在第一次通过后添加一个同步围栏对象，但这并没有什么不同）

[![红色的](../Images/9153953da9fbbd0cda55f311cdf70930.png)](https://i.stack.imgur.com/L0hin.png)

纹理样本：

[![特克斯](../Images/4c8c66cdf21ab5adea52041593bc115f.png)](https://i.stack.imgur.com/NWAA0.png)

```
// initial setup of shaders and vertex buffers ommitted for now (in separate source files)

// fbo setup like so
const int DepthLayers = 3;

bool InitFBO()
{
// width and height 768pixels
    for (int j=0; j<DepthLayers; j++)
    {
        const int idx = j + (DepthLayers*i);

        glGenTextures(1, &g_FBOManager.m_fboTex[ idx ]);
        glBindTexture(GL_TEXTURE_2D, g_FBOManager.m_fboTex[ idx ]);
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

        //no mipmaps
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, g_XMLSettings->WWidth(), g_XMLSettings->WHeight(), 0, GL_RGBA, GL_UNSIGNED_BYTE, 0);

        //depth
        glGenTextures(1, &g_FBOManager.m_fboDepthTex[ idx ]);
        glBindTexture(GL_TEXTURE_2D, g_FBOManager.m_fboDepthTex[ idx ]);
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
        //no mipmaps
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

        glTexParameteri(GL_TEXTURE_2D, GL_DEPTH_TEXTURE_MODE, GL_INTENSITY);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_MODE, GL_NONE/* GL_COMPARE_R_TO_TEXTURE*/);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_FUNC, GL_LEQUAL);

        glTexImage2D( GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT32, g_XMLSettings->WWidth(), g_XMLSettings->WHeight(), 0, GL_DEPTH_COMPONENT, GL_FLOAT, 0);

        glBindTexture(GL_TEXTURE_2D, g_FBOManager.m_fboDepthTex[idx]);
        pglFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT,GL_TEXTURE_2D, g_FBOManager.m_fboDepthTex[idx], 0);

        glBindTexture(GL_TEXTURE_2D, g_FBOManager.m_fboTex[idx]);
        // attach a texture to FBO color attachment point
        pglFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D, g_FBOManager.m_fboTex[idx], 0);

        // check FBO status
        pglBindFramebufferEXT( GL_FRAMEBUFFER_EXT, g_FBOManager.FboId(i) );
        if(!CheckFramebufferStatus())
        {
            return false;
        }
    }

    BindFrameBuffer(-1);    // unbind fbo

    if (GLGETERROR("1", fileBuf, lineBuf)) ;    // check for glErrors

    return true;    // all ok
}

// code to init second set of textures before the render loop

    const int w = g_XMLSettings->WWidth();  //res: 768 square
    const int h = g_XMLSettings->WHeight();
    glGenTextures(bufCount, &ttex[0]);  
    for (int i=0; i<bufCount; ++i)
    {
        glBindTexture(GL_TEXTURE_2D, ttex[i]);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);

        glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);

        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB8, w, h, 0, GL_RGBA, GL_UNSIGNED_BYTE, 0);
    }

const int bufCount = 3;

void EnableTexture1()
{
    glActiveTextureARB(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, g_BackTexture);
    glUniform1iARB(g_pPassAShader->m_clr_idx, 0);
}

void RenderLoop()
{

    GLenum buffers[] = { GL_COLOR_ATTACHMENT0_EXT, GL_COLOR_ATTACHMENT1_EXT, GL_COLOR_ATTACHMENT2_EXT };

    glColor4f(0.0f, 0.0f, 0.0f, 0.0f);
    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);       
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA);

    glUseProgramObjectARB(g_pPassAShader->m_glContext);

    EnableTexture1();

    //... code omitted to set transform matrix and supply to shader

    if (!BindFrameBuffer(0))
        assert(0);

    const GLuint DTex = g_FBOManager.GetDepthTexture(0);

    glBindTexture(GL_TEXTURE_2D, DTex);
    pglFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT,GL_TEXTURE_2D, DTex, 0);
    for (UINT i=0; i<bufCount; ++i)
    {
        glBindTexture(GL_TEXTURE_2D, g_FBOManager.GetTexture(i));
        pglFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT + i, GL_TEXTURE_2D, g_FBOManager.GetTexture(i), 0);
        if (!CheckFramebufferStatus())
            assert(0);
    }
    glDrawBuffers(bufCount,buffers); 
    // this is very important! if we don't clear it won't get written to
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glDisable(GL_BLEND);

    EnableTexture1();

    RenderVertexCache(0);

    //... code omitted to set transform matrix and supply to shader

    // render the second quad to other FBO tex
    RenderVertexCache(0);

    DisableShader(0);
    BindFrameBuffer(-1);    // unbinds fbo

//pass 2
    if (!BindFrameBuffer(0))
        assert(0);

    // bind other set of textures to the fbo
    for (UINT i=0; i<bufCount; ++i)
    {
        glBindTexture(GL_TEXTURE_2D,ttex[i]);
        pglFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT + i, GL_TEXTURE_2D, ttex[i], 0);
        if (!CheckFramebufferStatus())
            assert(0);
    }
    glDrawBuffers(bufCount,buffers); 
    // this is very important! if we don't clear it won't get written to
    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT  );
    // bind our set from prev pass to the samplers as input
    glUseProgramObjectARB(g_pPassBShader->m_glContext);

    for (UINT i=0; i<bufCount; ++i)
    {
        glActiveTextureARB(GL_TEXTURE0+i);
        glBindTexture(GL_TEXTURE_2D,g_FBOManager.GetTexture(i));
        glUniform1iARB(g_pPassBShader->m_intex_idx[i], i);
    }

    VertexBufferManager2::RenderUsingOrthoEx(g_pPassBShader);   // renders a full screen quad

    DisableShader(0);
    BindFrameBuffer(-1);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

// pass 3
    glUseProgramObjectARB(g_pPassCShader->m_glContext);
    for (UINT i=0; i<bufCount; ++i)
    {
        glActiveTextureARB(GL_TEXTURE0+i);
        glBindTexture(GL_TEXTURE_2D, ttex[i]);
        glUniform1iARB(g_pPassCShader->m_intex_idx[i], i);
    }

    VertexBufferManager2::RenderUsingOrthoEx(g_pPassCShader);

    if (GLGETERROR("at1", fileBuf, lineBuf)) ;  // reports any glErrors

}

// the three shaders (fragment shaders only)
// vertex shaders transfer uv's and transform vertices (version set to 410 in all)

// shader for pass1
//--------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------
#version 410

uniform sampler2D   g_ClrMap;
in vec2         g_InterpUV;     // supplied by vshader
out vec4        g_FBOLayers[ 3 ];

void main(void)
{   
    vec4 tex = texture(g_ClrMap, g_InterpUV);   // if we set fbo from texture only first texture renders
    g_FBOLayers[0] = vec4(1,0,0,.5);
    g_FBOLayers[1] = vec4(0,1,0,1);
    g_FBOLayers[2] = vec4(1,1,0,1);
}

// shader pass 2
//--------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------
#version 410

uniform sampler2D   g_inLayers0;
uniform sampler2D   g_inLayers1;
uniform sampler2D   g_inLayers2;
in vec2         g_InterpUV ;
out vec4        g_FBOLayers[ 3 ];
vec2            fTextureSize;

vec4 SamplePix(in int buf, in vec2 tCoords, in float lod)
{
    if (buf==1)
        return textureLod(g_inLayers1, tCoords, lod);
    else if (buf==2)
        return textureLod(g_inLayers2, tCoords, lod);
    return textureLod(g_inLayers0, tCoords, lod);
}

void main(void)
{   
    ivec2 iCoords = ivec2(int(gl_FragCoord.x),int(gl_FragCoord.y));
    ivec2 iTextureSize = textureSize(g_inLayers0,0);
    fTextureSize = vec2(float(iTextureSize.x), float(iTextureSize.y));
    vec2 coords = vec2(gl_FragCoord.x/iTextureSize.x,gl_FragCoord.y/iTextureSize.y);

    for(int i=0; i<3; ++i)
    {
        g_FBOLayers[i] = vec4(0.,0.,0.,0.); 
    }
    int j = 0;
    for(; j < 2; ++j)
    {
        g_FBOLayers[j] = SamplePix(j,coords,0); 

    }

}

// shader pass 3    
//--------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------
#version 410

uniform sampler2D   g_inLayers0;
uniform sampler2D   g_inLayers1;
uniform sampler2D   g_inLayers2;
in vec2         g_InterpUV ;
out vec4        g_PixColour;

vec4 tFetch(in int buf, in ivec2 tCoords, in int lod)
{
    if (buf==1)
        return texelFetch(g_inLayers1, tCoords, lod);
    if (buf==2)
        return texelFetch(g_inLayers2, tCoords, lod);

    return texelFetch(g_inLayers0, tCoords, lod);
}

void main(void)
{   
    ivec2 iCoords = ivec2(int(gl_FragCoord.x),int(gl_FragCoord.y));
    ivec2 iTextureSize = textureSize(g_inLayers0,0);
    vec2 coords = vec2(gl_FragCoord.x/iTextureSize.x,gl_FragCoord.y/iTextureSize.y);

    vec4 colour =  vec4(0.,0.,0.,0.);
    int i = 0;
    for(; i <2; ++i) // 3rd texture omitted for now
    {
        vec4 texel = tFetch(i,iCoords,0);
        if(texel.a + colour.a <= 1.0)
        {
            colour.rgb += (texel.rgb*texel.a);
            colour.a += texel.a;

        }
        else
        {
            texel.a -= (texel.a + colour.a) - 1.0;
            colour.rgb += (texel.rgb*texel.a);
            colour.a += texel.a;    
            break;      
        }

    }

    g_PixColour = colour;

} 
```

# xslt - HTML 使用 xslt 转义一些 xml 标记

> ID：12773334
> 
> 赞同：1
> 
> 时间：2012-10-07T22:14:26.697
> 
> 标签：xslt

我有一些类似的 XML

```
<ITEM><TITLE>Video: High Stakes for <KW>Obama</KW> &amp; Romney</TITLE></ITEM> 
```

我想使用 XSLT 将其转换为以下 XML。

```
<ITEM><TITLE>Video: High Stakes for &lt;KW&gt;Obama&lt;/KW&gt; &amp; Romney</TITLE></ITEM> 
```

我试过`<xls:copy-of select="./TITLE"/>`了，但这并没有转义 XML 标签。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T00:14:14.330

这类问题总是会吸引很多相互竞争的答案，因为最佳答案取决于您需要它的概括程度，而这在您的问题中并不清楚。

如果您想要一个超级通用的解决方案，我将把它留给常规的 XSLT SO 明星。或者您可以只搜索 SO 以查找有关如何序列化/或字符串化 XML 的问题。有很多。

我将为您提供一个非常简单但具体的解决方案，以对您的问题进行非常狭隘的解释。为此，我将假设：

1.  您只对序列化`TITLE`元素的内容感兴趣。
2.  KW`)的子元素`TITLE' (such as`是受限制的，因为它们没有子元素和属性，并且不在命名空间中。

有了这种解释，这个输入文件......

```
<ITEM>
 <TITLE>Video: High Stakes for <KW>Obama</KW> &amp; Romney</TITLE>
</ITEM> 
```

...由此 XSLT 1.0 样式表转换（在 2.0 中工作方式相同）...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
<xsl:strip-space elements="*" />  

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="TITLE/*">
  <xsl:value-of select="concat('&lt;',name(),'&gt;',.,'&lt;/',name(),'&gt;')" />
</xsl:template>

</xsl:stylesheet> 
```

...产量...

```
<ITEM>
  <TITLE>Video: High Stakes for &lt;KW&gt;Obama&lt;/KW&gt; &amp; Romney</TITLE>
</ITEM> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T00:34:38.633

XSLT 没有特定的直接功能来破坏文本标记（如果这对您的情况真的有用，您必须好好考虑）。

**这就是说，这是一个使用小型 C# 扩展函数的简短解决方案**（可以为大多数其他 PL 和平台轻松编写类似的扩展函数）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:msxsl="urn:schemas-microsoft-com:xslt"
 xmlns:my="my:my" exclude-result-prefixes="msxsl my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/*/TITLE/*">
  <xsl:value-of select="my:stringize(.)"/>
  <xsl:apply-templates/>
 </xsl:template>

 <msxsl:script language="c#" implements-prefix="my">
  public string stringize(XPathNavigator doc)
  {
   return doc.OuterXml;
  }
 </msxsl:script>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<ITEM><TITLE>Video: High Stakes for <KW>Obama</KW> &amp; Romney</TITLE></ITEM> 
```

**产生了想要的正确结果**：

```
<ITEM>
  <TITLE>Video: High Stakes for &lt;KW&gt;Obama&lt;/KW&gt; &amp; Romney</TITLE>
</ITEM> 
```

**请注意**：

1.  该解决方案将整个子树展平为文本，该子树植根于一个`TITLE`元素，该元素是 XML 文档顶部元素的子元素 - 无论深度如何 - 另一个发布的答案没有。

2.  该解决方案正确地展平了具有属性或空元素的元素 - 另一个发布的答案 - 没有。

# c++ - 在 Win7 x64 上编译 Qt 应用程序的最简单方法

> ID：12773336
> 
> 赞同：0
> 
> 时间：2012-10-07T22:14:31.157
> 
> 标签：c++, windows, qt, compilation

我使用安装在我的 Win7 上的 Netbeans 和 Qt SDK 编写了一个 C++ Qt 应用程序所以，我的 windows 是 amd64，我编译了应用程序，它在 windows xp 32 位上崩溃。要编译，我使用的是 Qt SDK 附带的 MSYS 和 mingw。我使用“Dependecy Walker”查看正在链接哪些 dll，看起来应用程序有很多 64 位 dll

看起来netbeans没有使用任何Makefile，这是我单击“清理并构建”时的输出

```
 "/usr/bin/make" -f nbproject/Makefile-Release.mk QMAKE=/C/QtSDK/Desktop/Qt/4.8.0/mingw/bin/qmake.exe SUBPROJECTS= .build-conf
    make[1]: Entering directory `/c/Users/Fred/Documents/NetBeansProjects/RadioMovie4'
    /C/QtSDK/Desktop/Qt/4.8.0/mingw/bin/qmake.exe VPATH=. -spec win32-g++ -o qttmp-Release.mk nbproject/qt-Release.pro
    mv -f qttmp-Release.mk nbproject/qt-Release.mk
    "/usr/bin/make" -f nbproject/qt-Release.mk dist/Release/MinGW-Windows/RadioMovie4.exe
    make[2]: Entering directory `/c/Users/Fred/Documents/NetBeansProjects/RadioMovie4'
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/LogicaPasta.o LogicaPasta.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/main.o main.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/MyThread.o MyThread.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -

...same thing here

Windows/TelaConfigurarTelas.o TelaConfigurarTelas.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -

...same thing here

Windows/LogicaMusica.o LogicaMusica.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/MyVideoWidget.o MyVideoWidget.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' 

...same thing here

Windows/Configuracao.o Configuracao.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/PastaBase.o PastaBase.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/TelaVideoController.o TelaVideoController.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/RssLabel.o RssLabel.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/ProgComercialWrapper.o ProgComercialWrapper.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/TelaVideo.o TelaVideo.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/TelaConfiguracao.o TelaConfiguracao.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/BaseWrapper.o BaseWrapper.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/TelaPrincipal.o TelaPrincipal.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/ItemDeProgramada.o ItemDeProgramada.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/LogicaHorarioSeqProg.o LogicaHorarioSeqProg.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/LogicaCampanha.o LogicaCampanha.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/LeitorRss.o LeitorRss.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/LogicaSequenciaProgramada.o LogicaSequenciaProgramada.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/LogicaSequenciaPadrao.o LogicaSequenciaPadrao.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/ProgMusicalWrapper.o ProgMusicalWrapper.cpp
    C:/QtSDK/Desktop/Qt/4.8.0/mingw/bin/moc.exe -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -D__GNUC__ -DWIN32 MyVideoWidget.h -o moc_MyVideoWidget.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/moc_MyVideoWidget.o moc_MyVideoWidget.cpp
    C:/QtSDK/Desktop/Qt/4.8.0/mingw/bin/moc.exe -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -D__GNUC__ -DWIN32 RssLabel.h -o moc_RssLabel.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/moc_RssLabel.o moc_RssLabel.cpp
    C:/QtSDK/Desktop/Qt/4.8.0/mingw/bin/moc.exe -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -D__GNUC__ -DWIN32 LeitorRss.h -o moc_LeitorRss.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/moc_LeitorRss.o moc_LeitorRss.cpp
    C:/QtSDK/Desktop/Qt/4.8.0/mingw/bin/moc.exe -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -D__GNUC__ -DWIN32 TelaVideoController.h -o moc_TelaVideoController.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/moc_TelaVideoController.o moc_TelaVideoController.cpp
    C:/QtSDK/Desktop/Qt/4.8.0/mingw/bin/moc.exe -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -D__GNUC__ -DWIN32 TelaPrincipal.h -o moc_TelaPrincipal.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/moc_TelaPrincipal.o moc_TelaPrincipal.cpp
    C:/QtSDK/Desktop/Qt/4.8.0/mingw/bin/moc.exe -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -D__GNUC__ -DWIN32 TelaVideo.h -o moc_TelaVideo.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/moc_TelaVideo.o moc_TelaVideo.cpp
    C:/QtSDK/Desktop/Qt/4.8.0/mingw/bin/moc.exe -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -D__GNUC__ -DWIN32 TelaConfiguracao.h -o moc_TelaConfiguracao.cpp
    g++.exe -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtCore' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtNetwork' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/QtGui' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/ActiveQt' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/include/phonon_compat' -I'.' -I'nbproject' -I'.' -I'c:/QtSDK/Desktop/Qt/4.8.0/mingw/mkspecs/win32-g++' -o build/Release/MinGW-Windows/moc_TelaConfiguracao.o moc_TelaConfiguracao.cpp
    windres -i RadioMovie4_resource.rc -o build/Release/MinGW-Windows/RadioMovie4_resource_res.o --include-dir=. -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_PHONON_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN
    g++ -Wl,-s -mthreads -Wl,-subsystem,windows -o dist/Release/MinGW-Windows/RadioMovie4.exe object_script.RadioMovie4  -L'c:/QtSDK/Desktop/Qt/4.8.0/mingw/lib' -lmingw32 -lqtmain build/Release/MinGW-Windows/RadioMovie4_resource_res.o -lphonon4 -lQtGui4 -lQtNetwork4 -lQtCore4 
    make[2]: Leaving directory `/c/Users/Fred/Documents/NetBeansProjects/RadioMovie4'
    make[1]: Leaving directory `/c/Users/Fred/Documents/NetBeansProjects/RadioMovie4'

    BUILD SUCCESSFUL (time:  30s) 
```

我想让我的应用程序 32 位并让它在 Windows XP 上运行并赢得 7 32 和 64 位。我需要重新编译 Qt 吗？如果是这样，我该怎么做？或者我可以使用 QtSDK 附带的那些 dll

PS：我可以同时使用静态和动态链接

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T02:06:31.210

想知道为什么不使用[Qt Creator](http://qt-project.org/downloads)，可能有你不知道的机会？Qt 使用自己的名为 QMake 的构建系统，并且 QtCreator 可以很好地与它配合使用，所以对我来说，您的问题的最佳答案是：“使用 QT Creator”

# http - IIS 中缺少 HTTP 绑定

> ID：12773339
> 
> 赞同：17
> 
> 时间：2012-10-07T22:15:49.690
> 
> 标签：http, iis, iis-7, iis-7.5

使用 IIS 7.5

在绑定类型下，这些是我看到的选项......但没有可用的 http 选项。绑定类型：-net.tcp-net.pipe-net.msmq-msmq.formatname

我怎样才能在那里获得HTTP？我试过卸载IIS并重新安装它，没有帮助..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T23:35:49.217

如果其他人有这个问题，我的最终解决方案是：

1.  删除 WAS（Windows 激活服务）
2.  删除 IIS
3.  重启
4.  安装 WAS
5.  安装 IIS
6.  重启

在那第二次重新启动之后，我所有的绑定都回来了……耶 :)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-28T02:39:33.490

转到控制面板 --> 程序和功能
1) 打开或关闭 Windows 功能
2) 取消选中“Internet 信息服务”(IIS) 和“Windows 进程激活服务”(WAS)
3) 确定 ....
4) 您必须重新启动计算机
当 Windows 启动时
转到控制面板 --> 程序和功能
1) 打开或关闭 Windows 功能
2) 选中“Internet 信息服务”(IIS) 和“Windows 进程激活服务”(WAS)
3)

好的运气！！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-11-23T08:02:53.850

很久以前有人问过这个问题，但我想我应该发布我的解决方案，因为它占用了相当多的时间，而且这里的建议解决方案都没有为我解决这个问题。

如果您导航到 applicationHost.config，我的位于 C:\Windows\System32\inetsrv\Config 下。打开它并确保在 listenerAdapters 下看到 http。示例显示 https，但您可以对 http 执行相同操作。

```
<listenerAdapters>
   <add name = "https"/>
</listenerAdapters> 
```

从[https://forums.iis.net/t/1177049.aspx?Problems+creating+a+new+site找到解决方案](https://forums.iis.net/t/1177049.aspx?Problems+creating+a+new+site)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-30T16:14:13.547

我发现下面的大多数答案都是矫枉过正的。缺少的是 C:\WINDOWS\System32\Inetsrv\Config\applicationhost.config 中 http listenerAdapter 的定义

在编辑器中打开文件（以管理员身份），查找`<listenerAdapters>`标签。我敢打赌，它没有列出“http”适配器。

添加这一行：`<add name="http" />`紧随其后`<listenerAdapters>`，保存并退出。

`iisreset`以管理员身份发出命令；重新启动 IIS 管理器 - 选择器现在就位

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-23T10:50:12.163

我将为将来会遇到此问题的其他开发人员添加此内容。上面的答案是正确的，但有时您还需要禁用

`Hosted Web Core Applications`IIS 功能以使您的发现可见。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-21T09:59:42.783

我一直有一些类似的问题，尽管设置略有不同。我的是 IIS 10。尝试添加新站点时，绑定类型字段为空，没有 IP 地址或端口条目字段。许多卸载/重新安装也不起作用。最后的解决方案是替换位于 C:\Windows\System32\Inetsrv\Config 中的配置文件。即applicationHost.config、administration.config &redirection.config。我从全新安装中提取了这些。与往常一样，您应该在执行此操作之前进行备份，还请注意，替换这些会导致您丢失任何现有站点和设置，因此请谨慎行事。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-13T11:42:57.100

我在 Windows 10 上遇到了同样的问题，通过 ljsg 的建议解决了这个问题。在具有提升权限的控制台中（以管理员身份运行）：

`cd %SYSTEMROOT%\System32\Inetsrv\Config copy *.clean.install *. ren *.config *.back ren *.config.clean *. @powershell -Command "Disable-WindowsOptionalFeature -Online –All -FeatureName @('IIS-ApplicationDevelopment','IIS-ApplicationInit','IIS-ASP','IIS-ASPNET','IIS-ASPNET45','IIS-BasicAuthentication','IIS-CertProvider','IIS-CGI','IIS-ClientCertificateMappingAuthentication','IIS-CommonHttpFeatures','IIS-DefaultDocument','IIS-DigestAuthentication','IIS-DirectoryBrowsing','IIS-FTPServer','IIS-FTPSvc','IIS-HealthAndDiagnostics','IIS-HostableWebCore','IIS-HttpCompressionDynamic','IIS-HttpCompressionStatic','IIS-HttpErrors','IIS-HttpLogging','IIS-HttpRedirect','IIS-HttpTracing','IIS-IIS6ManagementCompatibility','IIS-IISCertificateMappingAuthentication','IIS-IPSecurity','IIS-ISAPIExtensions','IIS-ISAPIFilter','IIS-LegacyScripts','IIS-LegacySnapIn','IIS-LoggingLibraries','IIS-ManagementConsole','IIS-ManagementScriptingTools','IIS-ManagementService','IIS-Metabase','IIS-NetFxExtensibility','IIS-NetFxExtensibility45','IIS-Performance','IIS-RequestFiltering','IIS-RequestMonitor','IIS-Security','IIS-ServerSideIncludes','IIS-StaticContent','IIS-URLAuthorization','IIS-WebDAV','IIS-WebServer','IIS-WebServerManagementTools','IIS-WebServerRole','IIS-WebSockets','IIS-WindowsAuthentication','IIS-WMICompatibility','WCF-HTTP-Activation','WCF-HTTP-Activation45','WCF-NonHTTP-Activation','WCF-Pipe-Activation45','WCF-Services45','WCF-TCP-Activation45','WCF-TCP-PortSharing45','WAS-ConfigurationAPI','WAS-NetFxEnvironment','WAS-ProcessModel','WAS-WindowsActivationService')"`

然后重新启动，然后执行：

`@powershell -Command "Enable-WindowsOptionalFeature -Online –All -FeatureName @('IIS-ApplicationDevelopment','IIS-ApplicationInit','IIS-ASP','IIS-ASPNET','IIS-ASPNET45','IIS-BasicAuthentication','IIS-CertProvider','IIS-CGI','IIS-ClientCertificateMappingAuthentication','IIS-CommonHttpFeatures','IIS-DefaultDocument','IIS-DigestAuthentication','IIS-DirectoryBrowsing','IIS-FTPServer','IIS-FTPSvc','IIS-HealthAndDiagnostics','IIS-HostableWebCore','IIS-HttpCompressionDynamic','IIS-HttpCompressionStatic','IIS-HttpErrors','IIS-HttpLogging','IIS-HttpRedirect','IIS-HttpTracing','IIS-IIS6ManagementCompatibility','IIS-IISCertificateMappingAuthentication','IIS-IPSecurity','IIS-ISAPIExtensions','IIS-ISAPIFilter','IIS-LegacyScripts','IIS-LegacySnapIn','IIS-LoggingLibraries','IIS-ManagementConsole','IIS-ManagementScriptingTools','IIS-ManagementService','IIS-Metabase','IIS-NetFxExtensibility','IIS-NetFxExtensibility45','IIS-Performance','IIS-RequestFiltering','IIS-RequestMonitor','IIS-Security','IIS-ServerSideIncludes','IIS-StaticContent','IIS-URLAuthorization','IIS-WebDAV','IIS-WebServer','IIS-WebServerManagementTools','IIS-WebServerRole','IIS-WebSockets','IIS-WindowsAuthentication','IIS-WMICompatibility','WCF-HTTP-Activation','WCF-HTTP-Activation45','WCF-NonHTTP-Activation','WCF-Pipe-Activation45','WCF-Services45','WCF-TCP-Activation45','WCF-TCP-PortSharing45','WAS-ConfigurationAPI','WAS-NetFxEnvironment','WAS-ProcessModel','WAS-WindowsActivationService')"`

..当然要安装的功能应根据需要进行调整。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-31T11:17:42.037

我得到了错误并通过像上述解决方案一样**工作来解决但也可以使用第三个**解决方案。

1.  “互联网信息服务”（IIS）
2.  “Windows 进程激活服务”（WAS）
3.  **“Internet 信息服务托管 WebCore”**

第三个 Windows 功能 - 需要卸载/安装： ![](../Images/ccac4fd9cbfc7cb78c8d3bd923a115a5.png)

# android - Android 首选项默认值

> ID：12773343
> 
> 赞同：0
> 
> 时间：2012-10-07T22:16:17.093
> 
> 标签：android, default-value, android-preferences, preferenceactivity, listpreference

我有一个偏好活动，其中包含一个复选框和一个列表偏好。此应用程序的主要活动获取列表首选项的当前值并将其用作获取数据的 url。我的问题是，在全新安装时未设置默认值，因此该值为 null 并且应用程序在能够进入首选项屏幕之前立即崩溃。有什么修复吗？？

代码：

```
public class Preferences extends PreferenceActivity implements OnSlideMenuItemClickListener {
private SlideMenu slidemenu;
private final static int News = 1;
private final static int Library = 2;
private final static int Photos = 3;
private final static int Videos = 4;
private final static int Maps = 5;
private final static int Prefs = 6;
private final static int About = 7;
GoogleAnalyticsTracker tracker;
@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.preferences);
    setContentView(R.layout.show_settings_layout);
    tracker = GoogleAnalyticsTracker.getInstance();
    tracker.startNewSession("UA-35087731-1", 10, this);
    Typeface blockFonts = Typeface.createFromAsset(getAssets(),"FUTURAM.TTF");
    TextView lblTitle = (TextView) findViewById(R.id.actionbar); 
    lblTitle.setText("Preferences");
    lblTitle.setTypeface(blockFonts);

          ListPreference listPreference = (ListPreference) findPreference("news_feed");
            if(listPreference.getValue()==null) {

                    listPreference.setValueIndex(1);
                final CheckBoxPreference checkboxPref = (CheckBoxPreference) getPreferenceManager().findPreference("french");

                checkboxPref.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {            
                    public boolean onPreferenceChange(Preference preference, Object newValue) {
                        if(newValue.toString().equals("true")) {
                            ListPreference newsPref = (ListPreference) findPreference("news_feed");

                            String[] values = getResources().getStringArray(R.array.newsfeedfr);
                                    newsPref.setEntryValues(values);
                                    newsPref.setDefaultValue(values[1]);

                        }
                        else {
                            ListPreference news2Pref = (ListPreference) findPreference("news_feed");                                
                            String[] values2 = getResources().getStringArray(R.array.newsfeed);                                     news2Pref.setEntryValues(values2);                                  news2Pref.setDefaultValue(values2[1]);

                        }      
                        return true;
                    }
            }); }
}
    } 
```

* * *

```
 SharedPreferences sharedPrefs = 
                PreferenceManager.getDefaultSharedPreferences(getBaseContext());
     URL= sharedPrefs.getString("news_feed", "N/A");
        if(URL==null) {
            URL = "http://scout.org/rss/feed/all";
        } 
```

这就是我在新闻类中检索值的方式

* * *

**LOGCAT 输出**

```
10-08 00:52:06.569: E/WindowManager(305): Activity org.scouts.android.news.News has  leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44eb8558 that was originally added here
10-08 00:52:06.569: E/WindowManager(305): android.view.WindowLeaked: Activity org.scouts.android.news.News has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44eb8558 that was originally added here
10-08 00:52:06.569: E/WindowManager(305):   at android.view.ViewRoot.<init>(ViewRoot.java:247)
10-08 00:52:06.569: E/WindowManager(305):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
10-08 00:52:06.569: E/WindowManager(305):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
10-08 00:52:06.569: E/WindowManager(305):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
10-08 00:52:06.569: E/WindowManager(305):   at android.app.Dialog.show(Dialog.java:241)
10-08 00:52:06.569: E/WindowManager(305):   at org.scouts.android.news.News$MyAsyncgTask.onPreExecute(News.java:171)
10-08 00:52:06.569: E/WindowManager(305):   at android.os.AsyncTask.execute(AsyncTask.java:391)
10-08 00:52:06.569: E/WindowManager(305):   at org.scouts.android.news.News.onCreate(News.java:100)
10-08 00:52:06.569: E/WindowManager(305):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-08 00:52:06.569: E/WindowManager(305):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
10-08 00:52:06.569: E/WindowManager(305):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
10-08 00:52:06.569: E/WindowManager(305):   at android.app.ActivityThread.access$2300(ActivityThread.java:125)
10-08 00:52:06.569: E/WindowManager(305):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
10-08 00:52:06.569: E/WindowManager(305):   at android.os.Handler.dispatchMessage(Handler.java:99)
10-08 00:52:06.569: E/WindowManager(305):   at android.os.Looper.loop(Looper.java:123)
10-08 00:52:06.569: E/WindowManager(305):   at android.app.ActivityThread.main(ActivityThread.java:4627)
10-08 00:52:06.569: E/WindowManager(305):   at java.lang.reflect.Method.invokeNative(Native Method)
10-08 00:52:06.569: E/WindowManager(305):   at java.lang.reflect.Method.invoke(Method.java:521)
10-08 00:52:06.569: E/WindowManager(305):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-08 00:52:06.569: E/WindowManager(305):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-08 00:52:06.569: E/WindowManager(305):   at dalvik.system.NativeStart.main(Native Method)
10-08 00:52:35.980: I/Process(305): Sending signal. PID: 305 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T02:35:58.813

问题有点傻，但在行

> URL= sharedPrefs.getString("news_feed", "N/A");

它返回 N/A 的值，当没有用户选择一个，而不是 null 因此修复是

> URL= sharePrefs.getString("news_feed", null);

# javascript - tinyMCE 图像显示正确，但不更新 src

> ID：12773345
> 
> 赞同：2
> 
> 时间：2012-10-07T22:16:17.473
> 
> 标签：javascript, tinymce, image

我在 tinyMCE 和图像上遇到了一个奇怪的问题。我正在尝试更新已添加到 tinyMCE 的图像。例如，假设我有以下图像

```
<img src="image1.png" title="title1" alt="alt1" class="class1" /> 
```

我运行以下脚本：

```
imageNode.setAttribute('src', 'image2.png');
imageNode.setAttribute('title', 'title2');
imageNode.setAttribute('alt', 'alt2');
imageNode.setAttribute('class', 'class2'); 
```

结果是：

```
<img src="image1.png" title="title2" alt="alt2" class="class2" /> 
```

请注意，我仍在获取 image1，而不是 image2，但其他所有内容都在正常更新。此外，新图像 (image2) 显示在 tinyMCE 中，而不是旧图像。不过，当我单击 tinyMCE 上的 HTML 按钮时，它显示`src`尚未正确更新。

当我查看源代码时，我看到：

```
<img src="image2.png" data-mce-src="image1.png" title="title2" alt="alt2" class="class2" /> 
```

注意这里`src`实际上是正确的，但是还有一个附加属性`data-mce-src`。当我尝试更新我的内容时。 `That data-mce-src`似乎被用作`src`我的形象。

除了我应该设置`src`我的图像的另一种方式`setAttribute`吗？

**更新：**

我认为这与此[http://www.tinymce.com/wiki.php/Configuration:convert_urls有关](http://www.tinymce.com/wiki.php/Configuration:convert_urls)

但是，我喜欢它使用相对 URL，如果可能的话，我想保留它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T22:53:48.150

我补充说`imageNode.setAttribute('data-mce-src', 'image2.png');`，这就是诀窍。希望这将有助于将来的其他人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-09T22:49:39.410

您可以在 tinymce.init 中添加解决它：

```
relative_urls : false,
content_css : ""
convert_urls : false, 
```

# uploadify - Uploadify 3.1 设置不起作用

> ID：12773346
> 
> 赞同：0
> 
> 时间：2012-10-07T22:16:25.300
> 
> 标签：uploadify

我将连同文件一起发送额外的表单数据。这是表单数据：

```
 register_object['first_name']=$("#first_name").val();
         register_object['last_name']=$("#last_name").val();
         register_object['input_email']=$("#input_email").val();
         register_object['input_password']=$("#input_password").val();
         register_object['repeat_password']=$("#repeat_password").val(); 
```

而且，以下是我使用的上传代码：

```
 $(document).ready(function(){          
         $("#image_file").uploadify({
            'method'   : 'post',
            'queueSizeLimit' : 1,
            'formData' : JSON.stringify(register_object),
            'buttonText' : 'Profile Pic',
            'auto' : false,
            'multi' : false,
            'swf' : 'js/plugins/others/uploadify.swf',
            'uploader' : 'upload.ashx',
            'fileTypeDesc': 'Image Files',
            'fileTypeExts': '*.jpg;*.png;*.gif;*.bmp;*.jpeg',
            'onUploadStart' : function(file) {
                $('#file_upload').uploadify('settings', 'formData', JSON.stringify(register_object));
                alert(JSON.stringify(register_object));
            },
            'onUploadSuccess' : function(file,data) {
                alert('The file finished processing. ' + data);
            },
            'onUploadError' : function(file, errorCode, errorMsg, errorString) {
                alert('The file ' + file.name + ' could not be uploaded: ' + errorString + ' ' + errorMsg);
            }
         });            
         $("#register").submit(function(){
            $('#input_password').val(CryptoJS.MD5($('#input_password').val()));
            $('#repeat_password').val(CryptoJS.MD5($('#repeat_password').val()));
         register_object['first_name']=$("#first_name").val();
         register_object['last_name']=$("#last_name").val();
         register_object['input_email']=$("#input_email").val();
         register_object['input_password']=$("#input_password").val();
         register_object['repeat_password']=$("#repeat_password").val();
            $("#image_file").uploadify('upload');
            return false;
        });
    }); 
```

当我访问服务器上的帖子数据时，我什么也得不到。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T23:30:52.897

我终于能够将数据发送到服务器。`$("#image_file")`首先，我不得不`$("#file_upload")`在`onUploadStart`. 其次，我必须在其中编写完整的 JSON 字符串`onUploadStart`：

```
$('#image_file').uploadify("settings", "formData", {"first_name":register_object['first_name'],"last_name":register_object['last_name'],"input_email":register_object["input_email"],"input_password":register_object["input_password"],"repeat_password":register_object["repeat_password"]}); 
```

代码如下：

```
 $(document).ready(function(){          
         $("#image_file").uploadify({
            'method'   : 'post',
            'queueSizeLimit' : 1,
            'formData' : JSON.stringify(register_object),
            'buttonText' : 'Profile Pic',
            'auto' : false,
            'multi' : false,
            'swf' : 'js/plugins/others/uploadify.swf',
            'uploader' : 'upload.ashx',
            'fileTypeDesc': 'Image Files',
            'fileTypeExts': '*.jpg;*.png;*.gif;*.bmp;*.jpeg',
            'onUploadStart' : function(file) {              
                **$('#image_file').uploadify("settings", "formData", {"first_name":register_object['first_name'],"last_name":register_object['last_name'],"input_email":register_object["input_email"],"input_password":register_object["input_password"],"repeat_password":register_object["repeat_password"]});**
                alert(JSON.stringify(register_object));
            },
            'onUploadSuccess' : function(file,data) {
                alert('The file finished processing. ' + data);
            },
            'onUploadError' : function(file, errorCode, errorMsg, errorString) {
                alert('The file ' + file.name + ' could not be uploaded: ' + errorString + ' ' + errorMsg);
            }
         });            
         ....
    }); 
```

# c++ - 带有模板类的未定义参考 C++

> ID：12773350
> 
> 赞同：1
> 
> 时间：2012-10-07T22:17:58.220
> 
> 标签：c++

> **可能重复：**
> [模板方法的未定义引用错误将模板化的](https://stackoverflow.com/questions/1111440/undefined-reference-error-for-template-method)
> [C++ 类拆分为 .hpp/.cpp 文件——这可能吗？](https://stackoverflow.com/questions/1724036/splitting-templated-c-classes-into-hpp-cpp-files-is-it-possible)

我有这堂课：

矩阵.h

```
#ifndef MATRIX_H
#define MATRIX_H
#include <vector>
#include <iostream>

using namespace std;
template <class T> class matrix;
template <typename T> ostream& operator<< (ostream& o, const matrix<T>& m);

template <class T>
class matrix
{
    public:
        matrix(const int&);
        void push(const T&);
        void setRows(const int&);
        int size();
        T& operator ()(const int&, const int&);
        friend ostream& operator<< <>(ostream&, const matrix<T>&);
        virtual ~matrix();
    private:
        vector<T> elements_;
        int dimension_;
};

#endif // MATRIX_H

#include "matrix.h"
#include <vector> 
```

矩阵.cpp

```
template <class T>
matrix<T>::matrix(const int& n)
{
    dimension_ = n;
}

template <class T>
void matrix<T>::push(const T& element)
{
    elements_.resize( elements_.size() + 1, element);
}

template <class T>
int matrix<T>::size()
{
    return elements_.size()/dimension_;
}

template <class T>
T& matrix<T>::operator ()(const int &n, const int &m)
{
    if ((n < 0) || (n > dimension_))
    {
        cerr << "Row index out of range"
             << endl << endl;
    }
    if ((m < 0) || (m > dimension_))
    {
        cerr << "Column index out of range"
             << endl << endl;
    }

    return elements_[n*dimension_+m];
}

template <class T>
ostream& operator << (ostream& o, const matrix<T>& m)
{
    for (int i = 0; i < m.size(); i++)
    {
        for (int j = 0; j < m.size(); i++)
        {
            o << m(i,j) << " ";
        }
        o << endl;
    }
    return o;
}

template <class T>
matrix<T>::~matrix()
{
    //dtor
}

And this program:

#include "matrix.h"
#include <iostream>

using namespace std;

int main()
{
    matrix<int> m(3);
    m.push(10);
    m.push(10);
    m.push(11);
    m.push(11);
    m.push(12);
    m.push(12);
    m.push(13);
    m.push(13);
    m.push(10);
    cout << m;
    cout << "Hello world!" << endl;
    return 0;
} 
```

对于每个人。单身的。一。在我调用的方法中，我得到一个像这样的编译器错误：

> C:\Users...\main.cpp|8|未定义对`matrix::matrix(int const&)'的引用|

我已经构建了 matrix.cpp 文件。我正在使用 Code::Blocks，所以我在 obj 文件夹中有一个 matrix.o 文件。那不是问题。

它是什么？

# javascript - 变量值更改（根据警报（））但被插件代码忽略？

> ID：12773352
> 
> 赞同：1
> 
> 时间：2012-10-07T22:18:43.947
> 
> 标签：javascript, jquery, variables, onchange

我正在使用以下代码更改插件中的变量。变量是幻灯片中的延迟：

```
$('input[name=changeDelay]').change(function() {
    settings.delay = $(this).val();
}); 
```

当我提醒修改后的值时，我得到了更改，但问题是幻灯片中的延迟实际上并没有改变。如果我手动更改延迟，它工作正常。

它正在改变。这样可行。幻灯片似乎没有采用这个新值，有没有办法制作它？

**这是问题的演示：http: [//jsfiddle.net/wdqPN/](http://jsfiddle.net/wdqPN/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T22:45:00.023

滑块插件不知道如何处理该值，因为它是一个字符串。您必须将其解析为 int 。

改变：

```
settings.delay = $(this).val(); 
```

到

```
settings.delay = parseInt(this.value, 10); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-07T22:43:02.260

更好的方法是第一次在插件中将您的设置保存在单独的变量中。

```
var  slideDelay=settings.delay;
$('input[name=changeDelay]').change(function() {
    slideDelay = $(this).val();
}); 
```

也许这个小提琴可以和你说话：

[http://jsfiddle.net/wdqPN/2/](http://jsfiddle.net/wdqPN/2/)

# c - 堆栈的字符串

> ID：12773355
> 
> 赞同：0
> 
> 时间：2012-10-07T22:19:02.357
> 
> 标签：c, string, stack

嗨，我这里有接受 int 作为值的程序。我想把它翻译成接受数组中的字符串。我已经阅读了有关使用结构的信息，但我无法进入它。我希望有人可以帮助我在不使用 struct 的情况下进入它我不知道从哪里开始我想保留这行代码。

```
#include <stdio.h>
#include <ctype.h>
#include <conio.h>
#include <string.h>
#include <stdlib.h>

int top = 0;
int *stack = NULL;
int size = 0;

main()
{
    int opt, num;
    char cont[] = { 'y' };
    clrscr();

    /* <start Declaring Stack Size { */
               printf("Stacking Program");
               printf("\n\nData Size: ");
               scanf("%d", &size);
               printf("\n");
    /* } end> */

               /* <start Allocates size of stack { */
               if(size > 0)
               {
                stack = malloc(size * sizeof(int));
                if(stack == NULL)
                {
                    printf("ERROR: malloc() failed\n");
                    exit(2);
                }
               }
               else
               {
                    printf("ERROR: size should be positive integer\n");
                    exit(1);
               }
                /* } end> */

    while((cont[0] == 'y') || (cont[0] == 'Y'))
    {
        clrscr();

        /* <start Main Menu { */
            printf("Stacking Program");
            printf("\n\nData Size: %d\n\n", size);
            printf("MAIN MENU\n1\. Pop\n2\. Push\n3\. Pick\n4\. View\nChoose: ");
            scanf("%d", &opt);
            printf("\n");

        switch(opt) {
            case 1:
                pop();
                break;
            case 2:
                if(top==size)
                {
                    printf("You can't push more data");
                }
                else
                {
                    printf("Enter data for Stack[%d]: ", top+1);
                    scanf("%d", &num);
                    push(num);
                }
                break;
            case 3:
                pick();
                break;
            case 4:
                view();
                break;
            default:
                printf("Your choice is not on the list.");
                break;
        }
        /* } end> */

        printf("\n\nDo you want continue\(Y\/N\)?");
        scanf("%s", &cont[0]);
    }
    free(stack);
}

pop()
{
    int a;
    loading();
    if(top <= 0)
    {
        printf("Stack empty.");
        return 0;
    }
    else
    {
        top--;
        a=stack[top];
        printf("\(Stack[%d] = %d\) removed.", top+1, a);
    }
}
push(int a)
{
        stack[top]=a;
        top++;
        loading();
}
pick()
{
    loading();
    if(top <= 0)
    {
        printf("Nothing to display.");
        return 0;
    }
    else
    {
        printf("\(Stack[%d] = %d\) is the last data.", top, stack[top-1]);
    }
}
view()
{
    int i;
    loading();
    if(top <= 0)
    {
        printf("Nothing to display.");
        return 0;
    }
    else
    {
        for(i=0;i<top;i++)
        {
            printf("Stack[%d] = %d\n", i+1, stack[i]);
        }
    }
}

loading()
{
    float i, x;
    float load;
    int loadarea[] = { 5000, 10000, 15000, 20000, 25000, 30000 };
    int percentLoad;
    x=0;
    load=0;
    percentLoad = loadarea[random(5)];
    gotoxy(26,11);
    printf("[");
    for(i=0;i<25;i++)
    {
        x = i+27;
        gotoxy(x, 11);
        printf("=");
        delay(percentLoad);
        gotoxy(51,11);
        printf("]");
        gotoxy(53,11);
        load=(i/25)*104.5;
        if(load>100)
            load = 100.00;
        printf("%.2f\%",load);
    }
    delay(60000);
    for(i=0;i<60;i++) {
        printf("\b \b");
    }
    printf("\n");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T22:39:05.573

最简单的方法是将堆栈转换为 store`char*`而不是`int`.

```
char **stack;
stack = malloc( size * sizeof(char*) ); 
```

现在，您的`push`操作将接受`char*`来自某个缓冲区的 a ，该缓冲区存储刚刚输入的字符串，用 复制它`strdup`，并将该新指针存储在堆栈中。

```
typedef enum {
    STACK_MEM_ERROR = -1,
    STACK_FULL = 0,
    STACK_OK = 1
} StackStatus;

StackStatus push(const char *str)
{
    char *newstr;
    if( top >= size ) return STACK_FULL;
    newstr = strdup(str);
    if( newstr == NULL ) return STACK_MEM_ERROR;
    stack[top++] = newstr;
    return STACK_OK;
} 
```

当你`pop`是一个字符串时，你只会得到一个指针。

```
char *pop()
{
    if( top == 0 ) return NULL;
    return stack[--top];
} 
```

`free`当您使用完指针（通过调用）时，您有责任释放该内存。

```
char * val;
while( NULL != (val = pop()) )
{
    printf( "I popped: %s\n", val );
    free(val);
} 
```

# python - 如何使用 pywinauto 控制 IE 资源管理器

> ID：12773356
> 
> 赞同：1
> 
> 时间：2012-10-07T22:19:09.253
> 
> 标签：python, internet-explorer, pywinauto

好的，所以我想用 pywinauto 控制一个 IE Explorer。我想选择页面上的文本字段并进行编辑。有没有办法用 pywinauto 做到这一点，而无需单击文本字段的位置？页面每次都相同，但输入的数据不同。窗口可能每次都不在同一个地方，所以我不能做**WrapperObject.Click(coords=fixed_pos)**。示例代码是首选。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T19:59:29.670

抱歉不行。你可以控制IE的窗口，所有的工具栏和按钮，地址栏和搜索栏等，但不能控制里面的页面内容。

对于此任务，您需要其他工具，例如 Selenium [http://seleniumhq.org/](http://seleniumhq.org/)

至于 pywinauto，我强烈建议使用实用程序 SWAPY [http://code.google.com/p/swapy/](http://code.google.com/p/swapy/)。我是 SWAPY 的作者。有了它，您可以轻松确定是否可以使用 pywinauto 管理控件。

# php - 将 MySQL 结果存储在单独的 PHP 变量中

> ID：12773358
> 
> 赞同：0
> 
> 时间：2012-10-07T22:19:26.973
> 
> 标签：php, html, mysql

我有一个 MySQL 查询，它在运行时返回 3 个随机行。我想将每一行存储在一个数组中，该行的每一列都是数组的不同部分。希望我很清楚。这是我到目前为止的位置。

```
$result = mysql_query("SELECT NAME,AUTHOR,CITY FROM TESTIMONIALS ORDER BY RAND() LIMIT 3");
$row = mysql_fetch_array($result); 
```

问题在于它将所有内容都存储在 $result 中，而且我不知道如何引用不同的列。我这样做是为了最终可以将我想要的指定随机条目打印到 9 个不同的 DIV 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T22:21:18.460

尝试：

```
$array = Array();

$result = mysql_query("SELECT NAME,AUTHOR,CITY FROM TESTIMONIALS ORDER BY RAND() LIMIT 3");
while ($row = mysql_fetch_array($result)) {
    $array[] = $row;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T22:25:09.907

您可以使用`$row['COLUMNAME']`来获取列值。
请注意，COLUMNAME 将区分大小写。

例如：

```
$result = mysql_query("SELECT NAME,AUTHOR,CITY FROM TESTIMONIALS ORDER BY RAND() LIMIT 3");
while($row = mysql_fetch_array($result)) {
    echo 'Name: ' . $row['NAME'] . '<br/>';
    echo 'Author: ' . $row['AUTHOR'] . '<br/>';
} 
```

[另外，请阅读php.net 手册页](http://php.net/manual/en/function.mysql-fetch-array.php)上的大红色通知：
**不鼓励使用此扩展。**
相反，应该使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://www.php.net/manual/en/ref.pdo-mysql.php)另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T22:40:32.197

考虑使用准备好的语句，因为 mysql_ 已被弃用。如果您粗心或缺乏经验并且没有正确转义查询字符串，它也容易受到 SQL 注入的影响。

这是使用mysqli_的解决方案：

```
$link = mysqli_connect("localhost", "user", "password", "database") or die(mysqli_error($link));
$stmt = mysqli_stmt_init($link);
$query = 'SELECT NAME,AUTHOR,CITY FROM TESTIMONIALS ORDER BY RAND() LIMIT 3';
$arrTestimonials = array();   

if (mysqli_stmt_prepare($stmt, $query)) {
    mysqli_stmt_bind_result($stmt, $out_name, $out_author, $out_city);
    mysqli_stmt_execute($stmt);

    while (mysqli_stmt_fetch($stmt)) {
        $arrTestimonials[]['name'] = $out_name;
        $arrTestimonials[]['author'] = $out_author;
        $arrTestimonials[]['city'] = $out_city;
    }
} // error preparing statement 
```

数组的结构如下：

```
Array
(
    [0] => Array
        (
            [name] => Name 1
            [author] => Author 1
            [city] => City 1
        )

    [1] => Array
        (
            [name] => Name 2
            [author] => Author 2
            [city] => City 2
        )

    [2] => Array
        (
            [name] => Name 3
            [author] => Author 3
            [city] => City 3
        )

) 
```

# javascript - 从 eval() 赋值

> ID：12773359
> 
> 赞同：1
> 
> 时间：2012-10-07T22:19:29.240
> 
> 标签：javascript, xmlhttprequest, eval

这是我目前的代码（显然删除了不必要的元素）：

```
var foo = new Array();
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function()
{
    if (xhr.readyState == 4 && xhr.status == 200)
    {
        foo[0] = eval("(" + xhr.responseText + ")");
        // After this point, I want to be able to reference 
        // foo[0].bar1
        // and 
        // foo[0].bar2()
    }
}
xhr.open("GET", "myfunc.js", true);
xhr.send(); 
```

这是 的内容`myfunc.js`，但它不起作用。

```
function() {
    this.bar1 = "Hello World";
    this.bar2 = function()
    {
        console.log("this is bar2");
    };
} 
```

这行得通，但它分配的是`bar`and`bar2`而`foo`不是`foo[0]`. 我怎样才能确保它分配给他们`foo[0]`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:09:57.333

`myfunc.js`包含尚未实例化的匿名 JavaScript 类（=匿名函数）。因此，在您的主脚本中，`eval()`仅返回该类。`foo[0]`现在可用于从该类实例化对象；它类似于类名。

我的意思是你试图从一个类（而不是一个对象）中获取属性，这当然是行不通的。所以你基本上有两种选择来解决这个问题：

1.  创建由返回的匿名类的实例`eval()`：

    ```
    foo[0] = new (eval("(" + xhr.responseText + ")"));
    console.log(foo[0].bar1); 
    ```

2.  从以下位置返回一个（单例）对象而不是一个类`myfunc.js`：

    ```
    new function() {
        this.bar1 = "Hello World";
    } 
    ```

顺便说一句，在我看来，昆汀说你应该重新考虑你的程序的结构是有道理的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:24:10.853

我最终使用 JSON（正如 Quentin 建议的那样）而不是定义一个自我修改函数。我生成的`myfunc.json`文件如下所示：

```
{
    "bar1": "Hello World",
    "bar2": function()
    {
        console.log("this is bar2");
    }
} 
```

至于结构，我并不太在意。它仅在 LAN 上运行，旨在展示我对 WebGL 的想法，而不是作为一款实用的、完全完成的游戏。

# javascript - 无论如何，是否可以在不删除和重新附加包含它的脚本标记的情况下将 javascript 代码注入 iframe 以执行？

> ID：12773361
> 
> 赞同：4
> 
> 时间：2012-10-07T22:19:40.907
> 
> 标签：javascript, iframe, dom-manipulation

*语境：*

我正在构建一个实时 HTML、CSS 和 Javascript 编辑器。它可以在[这里](http://experiments.muditameta.com/qckmeddler/)访问。

可以在[此处](https://github.com/zeusdeux/qckMeddler)访问源代码。

*问题：*

是否可以运行注入 iframe 的 javascript 代码，而无需重复删除和添加包含代码的 <script> 标记从和到 DOM 树？由于 DOM 操作是一项代价高昂的事情，我想尝试消除多个 DOM 操作。相反，我希望能够只更改 <script> 标记的*textContent*并让它运行我插入的新代码。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T23:01:33.027

如果您不介意使用*evil* [**`eval`**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)，您可以重新评估 iframe 窗口中的大多数 JavaScript，例如

```
function someFunction(){                                // any function
    console.log(document.body.children);
}

someFunction();                                         // see normal output

var ifrm  = document.getElementsByTagName('iframe')[0], // your iframe
    iwind = ifrm.contentWindow;                         // the iframe's window

iwind.eval( someFunction.toString() );                  // re-evaluate function with eval from iframe
iwind.someFunction();                                   // see new output - output is in iframe's context 
```

比较

```
iwind.someFunction = someFunction;                      // set variable
iwind.someFunction();                                   // same as calling someFunction() from parent 
```

它应该适用于大多数有效的 JavaScript（考虑范围），但请注意[using`eval`可能是 bad](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)。

# ffmpeg - 如何将选项从 SoX 传递给 ffmpeg？

> ID：12773363
> 
> 赞同：3
> 
> 时间：2012-10-07T22:20:24.040
> 
> 标签：ffmpeg, aac, sox

我正在尝试将一些文件从 wav 组合并编码为 m4a。我从源代码安装了 ffmpeg 和 sox 以确保没有被禁用。当我使用 ffmpeg 进行转换时

```
ffmpeg -i input.wav -acodec aac -strict experimental output.m4a 
```

它工作正常。当我使用 SoX

```
sox input.wav output.m4a 
```

我得到错误

```
[NULL @ 0x251b4e0] Codec is experimental but experimental codecs are not enabled, see -strict -2
sox FAIL ffmpeg: ffmpeg could not open CODEC
sox FAIL formats: can't open output file `output.m4a': 
```

我需要让 SoX 告诉 ffmpeg 可以使用实验性编解码器。

此外，我已经尝试使用本指南[http://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide](http://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide)来安装 fdk-acc 编码器，但它没有用。实验性的工作正常，所以我宁愿使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-17T01:05:08.663

我不认为 sox 支持 m4a 格式。你可以做 sox --help 查看支持的音频文件格式。

# android - 如何只实时播放麦克风声音输出？

> ID：12773364
> 
> 赞同：1
> 
> 时间：2012-10-07T22:20:24.900
> 
> 标签：android, audio, audio-recording

我使用 AudioRecord 和 AudioTrack 播放从麦克风输出到扬声器的声音。但是**实时播放会产生声音回声**。我只需要播放 MIC 声音而不是 android 系统播放的声音（在这种情况下是 MIC AudioTrack这是第二次播放）。

```
 recorder = new AudioRecord(AudioSource.MIC, 44100,
                AudioFormat.CHANNEL_IN_MONO,
                AudioFormat.ENCODING_PCM_16BIT, N * 2);
        track = new AudioTrack(AudioManager.STREAM_MUSIC, 44100,
                AudioFormat.CHANNEL_OUT_MONO,
                AudioFormat.ENCODING_PCM_16BIT, N * 2,
                AudioTrack.MODE_STREAM); 
```

如何在 android 中隔离麦克风声音输出并在不播放整个 android 声音的情况下播放它（在 android 设备中播放的其他声音，例如音乐播放器播放的音乐、通知声音等）

[PS：在对hotpaw2 的这个 stackoverflow qs 的评论](https://stackoverflow.com/questions/10486291/how-to-amplify-audio-from-app-in-android)进行一些研究后发现了这个评论：

```
The latency on most Android devices between record and play is reported to be fairly  high, such that the user would hear a delayed echo unless isolated from any sound going  into the mic. 
```

# javascript - 以下javascript的解释

> ID：12773365
> 
> 赞同：0
> 
> 时间：2012-10-07T22:20:27.717
> 
> 标签：javascript

目前卡在一段代码上，因为我不确定下面的代码是做什么的，有人可以向我解释一下

```
var limits = settings.show != null && settings.show < length ? settings.show : length; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T22:23:02.340

这是一个[三元运算符](http://en.wikipedia.org/wiki/%3F%3a)，与：

```
var limits;
if (settings.show != null && settings.show < length) {
  limits = settings.show;
} else {
  limits = length;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T22:22:48.550

`limits`如果 show 不为 null 且小于 length，则设置为 settings.show 的结果，否则设置为 length。

我假设您坚持的部分是 x ？y：z。[在此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)查看有关条件运算符的 Mozilla 文档。

# php - 如何通过 PHP 与 SMS 网关通信

> ID：12773366
> 
> 赞同：1
> 
> 时间：2012-10-07T22:20:30.477
> 
> 标签：php

我有一个链接，我需要用户点击才能收到短信。URL 指向一个外部链接，所以我无法屏蔽它。目前，当用户单击链接时，我会将他们重定向到外部站点以发送消息，但我不希望这样做，因为我不希望用户看到外部 URL。

我曾尝试使用`file_get_contents()`和 cURL，但我无法让任何一种机制发挥作用。当我在浏览器中加载页面时，我收到文本响应“OK”，当我使用 PHP 发出请求时，我从服务器收到“OK”响应，但我的手机没有收到短信。

这是我尝试过的 cURL 代码：

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$output = curl_exec($ch);
curl_close($ch);

return $output; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T22:57:12.820

使用 twilio 可能会为您节省一些时间。

注意：仅在此处写此内容是因为我出于某种原因无法发表评论。

# wpf - ResourceDictionary 合并行为

> ID：12773373
> 
> 赞同：0
> 
> 时间：2012-10-07T22:21:34.443
> 
> 标签：wpf, xaml, custom-controls, resourcedictionary

在我的项目中，我试图嵌入来自 Avalon Wizard 的源代码，但发生了一些奇怪的事情，我无法成功集成它。

我的自定义控件库中有以下结构

*   向导
    *   主题
        *   Aero.NormalColor.xaml
        *   Aero2.NormalColor.xaml
        *   AeroWizardHeader.xaml
        *   通用的.xaml
        *   Wizard97.xaml
        *   WizardAero.xaml
        *   通用的.xaml
*   主题
    *   通用的.xaml

在我的 Generic.xaml 中，我有以下声明

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="CuratioCMS.Client.UI;Component/Wizard/Themes/Generic.xaml" />
</ResourceDictionary.MergedDictionaries> 
```

在 Wizard/Themes/Generic.xaml 里面是我如何定义我的 MergedDictionaries

```
 <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="CuratioCMS.Client.UI;Component/Wizard/Themes/Wizard97.xaml" />
    <ResourceDictionary Source="CuratioCMS.Client.UI;Component/Wizard/Themes/WizardAero.xaml" />
    <ResourceDictionary Source="CuratioCMS.Client.UI;Component/Wizard/Themes/AeroWizardHeader.xaml" />
</ResourceDictionary.MergedDictionaries> 
```

根据 Avalon 实现，在 Aero.NormalColor.xaml 中还提供了一个 MergedDictionary，如下所示

```
 <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="CuratioCMS.Client.UI;Component/Wizard/Themes/AeroWizardHeader.xaml" />
</ResourceDictionary.MergedDictionaries> 
```

我的问题是我无法在我的项目中使用我自己的类库，因为设计器抛出异常，即：**找不到资源'wizard/themes/curatiocms.client.ui;component/wizard/themes/wizard97.xaml'。**

如果我更改 Wizard/Theme/Generic.xaml 中的路径，则错误消失，但向导无法提供 Aero 功能，甚至设计器也无法按预期工作。

我还要说，我决定采用这种架构是因为根据扩展的 WPF 工具包，这是一种非常干净的方式。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:36:47.967

您是否尝试过使用完整的[包 URI 语法](http://msdn.microsoft.com/en-us/library/aa970069%28VS.85%29.aspx)？

您是否尝试将“组件”更改为“组件”？还要确保字典的构建操作设置为 Resource 并且您正确引用了 CuratioCMS.Client.UI 程序集。

# javascript - 删除一个克隆的 div 时重新编号克隆的 div

> ID：12773378
> 
> 赞同：0
> 
> 时间：2012-10-07T22:21:48.003
> 
> 标签：javascript, jquery, clone

我正在开发这个表单（测试）创建器，其中使用 jQuery 克隆包含表单元素的 div 以创建更多问题。原来的 div 是隐藏的。每个 div 也有一个已`onClick="javascript:$(this).parent().empty().remove();"`附加的按钮。我的问题是 div 编号为 question1、question 2 等，方法是检查该类存在多少个 div，`question`然后将该编号附加到“question”并将 question1（或 question2、question3 等）设置为克隆 div 的 id-因为原始 div 是隐藏的，不需要对该类的 div 数量 +1。但是，如果 div 被删除，编号就会变得混乱。示例：
1\. 添加了div。
2\. div 叫做 Question 1(id​​=question1)
3\. 又增加了一个div。
4\. div 称为 Question 2(id=question2)
5.First Div 被移除。
6.添加了另一个div。
7.New div 被称为 Question 2(id=question2)
8.Question 2(id=question2) 已经存在，因为第二个 div 没有被删除。当其中一个被删除时，我需要重新编号。下面是克隆 div 的代码：

```
function copyAppendQ() {
  question = document.getElementById("question");
  clone=question.cloneNode(true);
  numberOfQuestions = $('.question').length;
  id = "questioncon"+(numberOfQuestions);
  clone.id=id;
  question.parentNode.appendChild(clone);
  inid= "question"+(numberOfQuestions);
  optionid= "optionsdiv"+(numberOfQuestions);
  $('#'+id+' '+'.'+'questionin').attr('id', inid);
  $('#'+id+' '+'.'+'options').attr('id', optionid);
 $('#' + id + ' h2').html( 'Question ' + numberOfQuestions );
} 
```

`display:none`和 div（当调用上述函数时，此 div 被隐藏但使用不同的 id 克隆，删除了原始 div 上设置的属性）

```
<div id="question" class="question">
                <h2></h2>
                <input id="questionin" class="questionin" style="width:341px;" ><input type="button" id="remq" onClick="javascript:$(this).parent().empty().remove();" style="background-color:#E12E1E;border:0;width:120px;color:#fff;" value="Remove Question">
                <h3>Options</h3>
                <div class="options">
                <label>a.</label><input class="option optiona"><input onClick="setAnswer(this.parentNode.id, this.className)" type="radio" class="a" name="answer">&nbsp;
                <label>b.</label><input class="option optionb"><input onClick="setAnswer(this.parentNode.id, this.className)" type="radio" class="b" name="answer">
                <div class="clear"></div>
                <label>c.</label><input class="option optionc"><input onClick="setAnswer(this.parentNode.id, this.className)" type="radio" class="c" name="answer">&nbsp;
                <label>d.</label><input class="option optiond"><input onClick="setAnswer(this.parentNode.id, this.className)" type="radio" class="d" name="answer">
                </div>  
                </div> 
```

这可以在这里看到：http: [//bit.ly/R8hB2m](http://bit.ly/R8hB2m)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T22:25:11.327

开始你的`copyAppendQ`功能：

```
copyAppendQ.id = (copyAppendQ.id || 0)+1; 
```

然后在分配ID时：

```
id = "questioncon"+copyAppendQ.id; 
```

这将确保您不会两次获得相同的 ID，即使问题已被删除。

# c# - 将全局变量添加到 C# 程序时必须删除 [STAThread]？

> ID：12773379
> 
> 赞同：1
> 
> 时间：2012-10-07T22:21:56.253
> 
> 标签：c#, compiler-errors

我的代码有问题。我想这很简单，但我缺乏 OOP 和 C# 方面的经验，所以我不得不问你。

我的代码如下所示：

```
namespace RR
{
    static class Program
    {
        [STAThread]

        private static string token;

        static void Main()
        {
            [...]
        }
    }
} 
```

问题是变量`token`不工作/不会编译。我想这个错误很容易发现，但我尝试了任何版本的`static`,`public static`并使用函数（setter 和 getter）来完成这项工作，但没有任何效果。我发现了这个：[Global variable in a static method](https://stackoverflow.com/questions/2278153/global-variable-in-a-static-method)，但后来我不得不删除`[STAThread]`它，我什至不知道它做了什么，所以我宁愿用另一种方式解决这个问题。

当我在 C# 2012 中创建一个新项目时，源是自动设置的。

澄清：如何在这样的静态类中使用公共变量而不必删除 STAThread？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T22:24:27.490

[stathread] 是一个属性，与它下面的代码直接相关 - 将它放回原来所在的 main 函数上方，然后将变量放在它上面，你会没事的

你是正确的，你需要按照你的建议用 static 关键字声明你的变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T22:28:23.463

`[STAThread]`是方法的属性。它需要保留在之前`static void Main()` 通常最好的做法是不要在入口点内包含业务逻辑，而是从 Main() 内创建工作类的新实例。

如果要编译，请移至`[STAThread]`上方`static void Main()`并更改`private static string token;`

# facebook - 为 Facebook 时间线提要使用应用程序访问令牌

> ID：12773381
> 
> 赞同：1
> 
> 时间：2012-10-07T22:22:20.780
> 
> 标签：facebook, facebook-graph-api, facebook-access-token

我已经开始开发需要与 facebook 集成的服务器端应用程序。我的需求是一个不会过期的访问令牌，但不幸的是，facebook 已经删除了 offline_access 功能，取而代之的是一个只能持续 60 天的长寿命用户访问令牌。

我意识到有一个不会过期的应用程序访问令牌。当我使用它而不是用户访问令牌来获取提要时，我得到的信息肯定更少。

我从其他来源读到，只要授予相关权限，例如给出 read_stream，使用应用程序访问令牌应该允许服务器端应用程序访问接受 facebook 应用程序的用户信息。

我弄错了吗？谁能帮忙澄清一下？谢谢

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T02:52:06.137

摘自：[https ://developers.facebook.com/docs/opengraph/using-app-tokens/](https://developers.facebook.com/docs/opengraph/using-app-tokens/)

虽然应用访问令牌主要用于代表用户将信息发布回 Facebook，但使用应用访问令牌可以从 Facebook 检索的信息集有限。

*   用户的基本个人资料信息（ID、姓名、用户名、性别）
*   用户的朋友和他们的 ID
*   用户授予您的应用程序的权限

因此，您可以使用应用访问令牌获得一组有限的信息。所以你可能不想用它来获取用户的提要。

# mysql - 声明临时变量中的 MySQL 语法错误

> ID：12773384
> 
> 赞同：0
> 
> 时间：2012-10-07T22:22:52.437
> 
> 标签：mysql, syntax-error, declaration

我正在做一个项目，我需要通过 MySQL 中的存储过程将一些值传递给表。所以我做了这样的程序。

```
create procedure KullanıcıKayıt(
IN kullaniciAd nvarchar(50),
IN kullaniciSoyad nvarchar(50),
IN kullaniciSifre int(10),
IN kullaniciMail nvarchar(50),
IN kullaniciTelNo int(10),
IN kullaniciAdres nvarchar(100),
IN kullaniciSehirAd nvarchar(50),
IN kullaniciSehirIlceAd nvarchar(50)
) 
```

这些是我剩下的程序

```
BEGIN

DECLARE sehirId INT DEFAULT 0;
DECLARE ilceId INT DEFAULT 0;

Select @sehirId=sehirId from sehir 
where kullaniciSehirAd=sehirAd;

Select @ilceId=sehirIlceId from sehirIlce 
where kullaniciSehirIlceAd=sehirIlceAd;

Insert Into kullanici(kullaniciAd, kullaniciSoyad, kullaniciSifre, kullaniciMail, 
kullaniciTelNo, kullaniciAdres, kullaniciSehir, kullaniciSehirIlce) values         (kullaniciAd,
kullaniciSoyad, kullaniciSifre, kullaniciMail, kullaniciTelNo, kullaniciAdres, 
kullaniciSehir, kullaniciSehirIlce)

END 
```

然后我得到了三个语法错误。其中一个在 DECLARE vefore ilceId 上的第二个 sehirId 之后的“0”上，最后一个在 END 上。

我的语法有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:54:11.417

后面缺少分隔符`END`，添加 ; 那里以及您的插入语句之后：

```
...
kullaniciSehir, kullaniciSehirIlce);

END; 
```

如果您在某种客户端中执行它，您可能需要在 create proc 语句的上方和下方添加 DELIMITER 语句：

```
DELIMITER |

create procedure KullanıcıKayıt(
...
END;
|
DELIMITER ; 
```

# ruby-on-rails - 加载许多记录时 PRY Gem 问题

> ID：12773385
> 
> 赞同：1
> 
> 时间：2012-10-07T22:22:54.727
> 
> 标签：ruby-on-rails, ruby, gem, pry

我在为 Ruby 使用 PRY 控制台时遇到问题。当我获取许多记录（例如 Account.all）时，输出会填满页面，并迫使我滚动到找到 (END) 的末尾。但是我不能输入任何东西，也不能返回到撬提示。

如果我键入一个类似的命令，它没有返回足够的记录来填充终端窗口，一切都会正常运行（即 Pry 打印出返回的记录并将我返回到提示符）。

有任何想法吗？我在 Ruby 1.9.3 上使用 Pry 版本 0.9.10。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T23:21:23.207

键入`q`以便您可以键入其他命令

* * *

### 为什么？

state pry 唯一具有此功能的地方是[https://github.com/pry/pry#code-browsing](https://github.com/pry/pry#code-browsing)

> 比页面长的代码是通过寻呼机发送的（比如less），

如果您是 Mac 或 Linux 用户，您可能熟悉诸如 Less 或 More 之类的工具，这些工具可以帮助您通过在终端中分页查看文档并撬动实现此功能，因为有时当终端打印出很多东西时它非常有用.

要了解在 pry 中处于分页模式时可以做什么，您应该查看[http://www.thegeekstuff.com/2010/02/unix-less-command-10-tips-for-effective-navigation/](http://www.thegeekstuff.com/2010/02/unix-less-command-10-tips-for-effective-navigation/)

# javascript - 自定义着色器 - Three.js

> ID：12773388
> 
> 赞同：1
> 
> 时间：2012-10-07T22:23:08.970
> 
> 标签：javascript, webgl, three.js

我正在尝试将自定义着色器与 Three.js 一起使用。我试着像许多例子一样做，但它不起作用。我的代码是：

```
var vertex = "void main(){vec4 mvPosition = modelViewMatrix * vec4( position, 1.0    );gl_Position = projectionMatrix * mvPosition;}";
var fragment = "precision highp float;void main(void){gl_FragColor = vec4(0.0,1.0,0.0,1.0);}";
material = new THREE.ShaderMaterial({
                vertexShader: vertex,
                fragmentShader: fragment
        });
var mesh = new THREE.Mesh(geometry,material); 
```

……一切都是空白的。但如果我使用这种材料：

```
material = new THREE.MeshBasicMaterial({ color: 0xff0000, wireframe: true }); 
```

……一切都很完美。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:17:59.653

I found the problem: I had to use:

```
 renderer = new THREE.WebGLRenderer(); 
```

instead of :

```
 renderer = new THREE.CanvasRenderer(); 
```

# jquery - jQuery图像叠加画廊参数问题

> ID：12773391
> 
> 赞同：0
> 
> 时间：2012-10-07T22:23:15.400
> 
> 标签：jquery, css, slide

我正在使用[马赛克滑动框和字幕插件](http://buildinternet.com/project/mosaic/1.0/)。它非常顺利，但我很想解决两个问题，在这个 jfiddle 上可见。这里的一些 CSS/jQuery 向导会知道：

[http://jsfiddle.net/9ZPrf/2](http://jsfiddle.net/9ZPrf/2)

1）覆盖框不覆盖图像的底部。我已经摆弄了 CSS 和 jQuery 中的许多明显参数。因为我在我的内联脚本中添加了 hover_y 参数，所以出现了这个问题。这旨在提高覆盖层，以便更多文本变得可见。

2) 不透明度仅在您将鼠标悬停在叠加层上时发生变化，但如果您在图像上的任何位置都发生变化，那就太好了，这就是幻灯片的响应。

我已经尝试了许多明显的参数，我希望这里有人可以提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:46:32.087

在这里，我已经为你修好了[http://jsfiddle.net/9ZPrf/4/](http://jsfiddle.net/9ZPrf/4/)

我想给你一些解释，但这是一般的HTML/CSS，所以很难简单地做。祝学习顺利！

# ios - UIPicker 没有出现

> ID：12773392
> 
> 赞同：0
> 
> 时间：2012-10-07T22:23:16.633
> 
> 标签：ios, uiimage, uipickerview

我有一个以编程方式制作的 UIPickerView，但是我在界面生成器中制作的所有内容和选择器在我运行应用程序后都不会显示。在我在 IB（这是一个 UIImage）中制作背景之前，它就起作用了。其他一切都出现了。

```
- (void)viewDidLayoutSubviews(viewDidLoad)
{
    [self.view bringSubviewToFront:picker1];
    [self.view sendSubviewToBack:backgroundImage];
    [backgroundImage addSubview:picker1];
} 
```

我已经尝试了所有这些。我的大脑已经死了，我真的需要帮助。为什么我的 UIPickerView 不显示。在我为其添加背景之前，所有需要的数据都在那里工作。有什么可以做的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T22:09:30.107

确保您的数据委托已连接到视图。您可以通过转到情节提要并单击文件所有者并将引用出口连接到视图来执行此操作。

# c# - DataReader 错误 - “行/列不存在数据” - 数据何时存在？

> ID：12773396
> 
> 赞同：1
> 
> 时间：2012-10-07T22:23:35.677
> 
> 标签：c#, sql-server-ce

我需要一些帮助来理解我的错误。我想从表中读取数据，但是我收到诸如“行/列不存在数据”之类的错误。我不明白，因为我实际上在那里有行和列。赢表格。谢谢！

```
 //this is how i insert data into table, works fine 
    public void b1_Click(object sender, EventArgs e)
    {
        SqlCeCommand command = new SqlCeCommand("INSERT INTO tbl1(Name, LastName) VALUES (@Name, @LastName)", conn);
        command.Parameters.AddWithValue("@Name", l1.Text);
        command.ExecuteNonQuery();
    }

    //this is how i try to read data from the same table
    public void b2_Click(object sender, EventArgs e)
    { 
       SqlCeConnection conn = new SqlCeConnection(@"Data Source=C:test.sdf");
       conn.Open();
       SqlCeCommand command = new SqlCeCommand("SELECT * FROM  tbl1", conn);
       SqlCeDataReader reader = command.ExecuteReader();

       //error here
       string Name = reader.GetString(0);
       label.Text = Name;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T22:28:22.027

问题在于您的结果加载。

```
SqlCeDataReader reader = command.ExecuteReader();

while (reader.Read())
{
   string Name = reader.GetString(0);
} 
```

因此，您使用[Read](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.read.aspx)方法遍历结果。或者，如果您只有一个结果，那么您也可以使用[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

```
string Name = reader.ExecuteScalar().ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T22:30:37.907

在这个序列中

```
 SqlCeCommand command = new SqlCeCommand("INSERT INTO tbl1(Name, LastName) VALUES (@Name, @LastName)", conn);
    command.Parameters.AddWithValue("@Name", l1.Text);
    command.ExecuteNonQuery(); 
```

您没有设置第二个参数`@LastName`，因此它应该失败。如果您以前在表中没有记录，那么您将没有任何选择。

那，以及你没有打电话的事实`reader.Read()`

# oracle - 防止全表扫描

> ID：12773398
> 
> 赞同：0
> 
> 时间：2012-10-07T22:23:42.370
> 
> 标签：oracle, optimization

我有以下查询：

```
select id,
       c1,
       c2,
       c3 
from tbl t1
join 
(select id 
   from tbl t2
   where upper(replace(c5, ' ', '')) like upper(?)
) j 
on j.id = t1.id 
```

`?`是一些通配符参数字符串，例如`%test%`.

`c5`列具有用于访问它的函数的索引：

```
create index tbl_c5_idx on tbl(upper(replace(c5, ' ', ''))) 
```

当我只运行内部查询时，它使用`tbl_c5_idx`，但是当我运行整个查询时，它变成了全表扫描，这要慢得多。

有什么办法可以避免全表扫描？提示或重写连接条件。我无法重写整个查询，因为内部查询是根据输入条件动态构建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:20:36.833

一个非常基本的例子来测试你的功能

```
create table test(id number,value varchar2(200));

insert into test values(1,'gaurav is bad guy');
insert into test values(2,'gaurav is good guy');

SELECT *
FROM test
WHERE UPPER (REPLACE (VALUE, ' ', '')) LIKE UPPER ('%gauravisbad%'); 
```

在创建索引之前，这是`full table scan`出于明显的原因，因为没有创建索引。

```
create index tbl_c5_idx on test(upper(replace(value, ' ', ''))); 
```

![后](../Images/7c0a89c0c14cca56fb7906549f4b9f0b.png)

我要求您避免在同一个表上进行内部联接的原因是因为您使用该表两次以从使用索引的过滤条件中获取记录，然后在此基础上加入以`id`防止使用索引，因为你在 id 列上没有索引，这可以通过一个简单的过滤条件来完成。如果您再次发现全表扫描的相同问题，或者您没有从该查询中得到相同的结果，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T23:44:09.947

*   如果您只运行子查询，它不会像父查询那样使用过滤器中的 id 列，因此可以使用索引。在父查询中，您也使用了 id，这会阻止使用索引。也许添加索引`(id, upper(replace(c5, ' ', '')))`可以解决问题。

*   Gaurav Soni 是对的：您不需要子查询来实现您的目标。

*   总是检查性能而不是解释计划。有你的提示可能比没有提示时表现更差。甲骨文**并不**愚蠢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T22:49:42.367

似乎我找到了解决方案，或者至少找到了有帮助的东西。

我使用`index`了提示，所以访问是通过`tbl_c5_idx`.

这就是最终查询现在的样子：

```
select /*+ index(t1) */ id,
       c1,
       c2,
       c3 
from tbl t1
join 
(select id 
   from tbl t2
   where upper(replace(c5, ' ', '')) like upper(?)
) j 
on j.id = t1.id 
```

# ios6 - iOS 6 中的分段控制 tintColor

> ID：12773400
> 
> 赞同：0
> 
> 时间：2012-10-07T22:24:17.987
> 
> 标签：ios6, uisegmentedcontrol, tintcolor

我有一个 8 段的分段控件。我可以更改整个控件的默认色调，但是我可以为控件中的每个段设置不同的颜色吗？我找到了一个在 5.1 中使用的教程，其中包含一个调用此方法的新类，

```
-(void)setTintColor:(UIColor*)color forTag:(NSInteger)aTag{} 
```

但它在 iOS 6 中不起作用。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:37:09.917

此问题已在此处修复。由于格式问题，我无法粘贴源代码。 [示例代码在这里。](http://kmdarshan.wordpress.com/2012/11/06/answering-a-stackoverflow-question-regarding-uisegmentedcontrol/)

**编辑：**从链接和固定格式添加注释和代码。〜奥利

它是一个hacky修复。这将起作用。将您的代码放在 ViewDidAppear 中。那会成功的。

```
- (void)viewDidAppear:(BOOL)animated 
{
    [super viewDidAppear: animated];
    dispatch_async(dispatch_get_main_queue(), ^{
        for (int i = 0 ; i < [segmentControl.subviews count] ; i++)
        {
            if ([[segmentControl.subviews objectAtIndex: i] isSelected] )
            {
                [[segmentControl.subviews objectAtIndex: i] setTintColor: [UIColor blackColor]];
                break;
            }
        }
    }); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T06:03:21.363

您可以为每个段设置不同的段图像和颜色。对于颜色，您可以使用：

```
//get the subviews of the segmentedcontrol

NSArray *arri = [segmentedControl subviews];

//change the color of every subview(segment) you have

[[arri objectAtIndex:0] setTintColor:[UIColor redColor]];

[[arri objectAtIndex:1] setTintColor:[UIColor greenColor]]; 
```

希望能解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T20:27:08.373

你是对的……iOS 6 不支持分段控制的子视图……

我有一个替代方案给你：

```
CGRect rect = CGRectMake(0, 0, 80, 44);
UIGraphicsBeginImageContext(rect.size);
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetFillColorWithColor(context,
                               [[UIColor redColor] CGColor]);
CGContextFillRect(context, rect);
UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
[segment setImage:img forSegmentAtIndex:0]; 
```

您需要将核心图形框架添加到项目中。

我们可以在索引处为段绘制图像...。但是如果您使用它，您将无法使用段标题添加文本。您还需要在上面使用的图像“img”上绘制文本。如果您有其他方法，请分享。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-18T10:00:34.700

这是一个设置红色并与 iOS 6 兼容的简单解决方案。

```
for ( UIView *segmentView in [segmentedControl subviews] ) {
    if ( [segmentView respondsToSelector:@selector(setTintColor:)] ) {
        [segmentView performSelector:@selector(setTintColor:)
                          withObject:[UIColor redColor]];
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-23T11:46:14.313

UiSegmentedControl 有一个属性 'segmentedControlStyle'（在 iOS7 中已弃用），它会影响 'tintColor' 的行为

可能的样式是：

```
UISegmentedControlStylePlain,   
UISegmentedControlStyleBordered,
UISegmentedControlStyleBar,     
UISegmentedControlStyleBezeled, 
```

但实际上在 iOS6 中“Bezeled”（已弃用）等于“Bar”

对于前两种样式，无法更改已应用“tintColor”，要对其进行自定义，您需要使用以下方法更改每个段的图像：

```
- (void)setImage:(UIImage *)image forSegmentAtIndex:(NSUInteger)segment; 
```

这样你将获得一个完全自定义的分段控件

但如果默认值足以满足您的设计，您可以使用样式

```
UISegmentedControlStyleBar 
```

并且“tintColor”属性将生效，您将获得一个彩色分段控件，该控件根据所选段应用色调以及让系统使用它进行拨号的所有其他好处。

# java - Java try/catch - either "return isn't found" or "variable isn't initialized"?

> ID：12773401
> 
> 赞同：5
> 
> 时间：2012-10-07T22:24:20.093
> 
> 标签：java, compiler-errors

I've been staring at this for hours and unable to think of a solution; I usually handle validation of this type with regex but am trying to use a built-in solution for a change (obviously, I don't do this frequently):

```
private static double promptUserDecimal(){
    Scanner scan = new Scanner(System.in);
    System.out.println("Enter a decimal");
    try{
        double input2 = Double.parseDouble(scan.nextLine());
        return input2;
    } catch(NumberFormatException e){
        System.out.println("Sorry, you provided an invalid option, please try again.");
    }
} 
```

The error with this is that the "return" isn't found by the compiler so I get a compile error. If I put the "return" outside of the try/catch I need to declare/initialize "input2" which defeats the purpose of the operation. Any assistance is appreciated...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T22:27:41.900

Throw an exception in the `catch` section. Wherever you call the `promptUserDecimal` method, catch any exception and print the message there:

```
public static void main(String[] args) {

    double d = 0.0;
    while (double == 0) {
        try {
            d = promptUserDecimal();
        } catch (NumberFormatException e) {
            //log the message...
            d = 0.0;
        }
    }
}

private static double promptUserDecimal() throws NumberFormatException {
    Scanner scan = new Scanner(System.in);
    System.out.println("Enter a decimal");
    return Double.parseDouble(scan.nextLine());
} 
```

This would be a better approach because you let the `promptUserDecimal` cares only about handling reading a double value. You must try to tend to separate each class and method for the specific purpose it was designed for.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T22:27:42.260

You need something like:

```
double input2;
try{
  //read input2
}catch( ... ){
  //... log AND assign a value to input2 in case of invalid input
}
return input2; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-07T22:31:59.587

If you want the user to "please try again", it sounds like you need a loop:

```
private static double promptUserDecimal(){
    final Scanner scan = new Scanner(System.in);

    // Ask for input until we get something valid
    while (true) {  // Terminated by return within
        System.out.println("Enter a decimal");
        try {
            return Double.parseDouble(scan.nextLine());
        } catch(NumberFormatException e){
            System.out.println("Sorry, you provided an invalid option, please try again.");
            // No return, so the loop will run again
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T22:27:40.290

Let your method throw an exception or return nan.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T22:29:46.110

You can throw an exception within your catch block. i.e.,

```
private static double promptUserDecimal() throws OopsException {
    Scanner scan = new Scanner(System.in);
    System.out.println("Enter a decimal");
    try{
        double input2 = Double.parseDouble(scan.nextLine());
        return input2;
    } catch(NumberFormatException e){
        System.out.println("Sorry, you provided an invalid option, please try again.");
        throw new OopsException();
    }
} 
```

Then, every time they give an invalid input, you can catch it and handle it where you call the method from.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-07T22:30:29.857

```
private static double promptUserDecimal(){
    Scanner scan = new Scanner(System.in);
    System.out.println("Enter a decimal");
    double input2 = 0.0; // <-- explicit initialization
    try{
        double input2 = Double.parseDouble(scan.nextLine());
    } catch(NumberFormatException e){
        System.out.println("Sorry, you provided an invalid option, please try again.");
    }
    return input2;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-07T22:48:43.243

You need to return or throw something from (or after the catch). Judging by your output to the user, it looks like you just want to do the same thing again. Just call the method again and return the result.

```
private static double promptUserDecimal(){
    Scanner scan = new Scanner(System.in);
    System.out.println("Enter a decimal");
    try{
        double input2 = Double.parseDouble(scan.nextLine());
        return input2;
    } catch(NumberFormatException e){
        System.out.println("Sorry, you provided an invalid option, please try again.");
        return promptUserDecimal();
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-08T00:01:08.353

A few of the solutions listed will solve the compiler issue, but the first step is to take a step back and ask "what do I want to do in the event that a NumberFormatException occurs?"

One option is to propagate the exception by rethrowing the NumberFormatException or wrapping it in a RuntimeException so that it goes unchecked. This means that calling code will have to handle it, or the user will be presented with a stacktrace. If you go this route you don't even need a try catch in your method. You can just declare "throws NumberFormatException" on the method signature and let it get handled up stream.

Another option is to return null, either by using "return null" as the last statement in your catch block, or returning null as the last statement within the method. This is a terrible option because calling code and/or end user won't get the information they need, that "a non-number was entered as input."

I would go with option one, and handle the exception by telling the user that scan.nextline + " is not recognized as a valid double."

# python - 在 GAE 和 python 中查询具有特定父属性的实体？

> ID：12773405
> 
> 赞同：2
> 
> 时间：2012-10-07T22:24:32.140
> 
> 标签：python, google-app-engine

是否有可能以任何方式使用其在 GAE 中的父属性之一来查询实体，就像这样（这不起作用）？

```
class Car(db.Model):
    title = db.StringProperty()
    type = db.StringProperty()

class Part(db.Model):
    title = db.StringProperty()

car = Car()
car.title = 'BMW X5'
car.type = 'SUV'
car.put()

part = Part(parent = car)
part.title = 'Left door'
part.put()

parts = Part.all()
parts.filter('parent.type ==', 'SUV') # this in particular 
```

我已经阅读了*ReferenceProperty*和*Indexes* ，但我不确定我需要什么。

GAE 允许我为*Part*实体设置一个父级，但我是否需要一个实际（一种重复）：

```
parent = db.ReferenceProperty(Car, required=True) 
```

这感觉就像复制系统已经做的事情，因为它有一个父母。还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:05:54.560

这不是您问题的答案，但 NDB 提供结构化属性。

[https://developers.google.com/appengine/docs/python/ndb/properties#structured](https://developers.google.com/appengine/docs/python/ndb/properties#structured)

> 您可以构建模型的属性。例如，您可以定义一个模型类 Contact，其中包含地址列表，每个地址都有内部结构。

尽管结构化属性实例是使用与模型类相同的语法定义的，但它们并不是成熟的实体。他们在 Datastore 中没有自己的密钥。它们不能独立于它们所属的实体来检索。但是，应用程序可以查询其各个字段的值。

所以这里的汽车将包含作为结构化属性的零件。这在您的用例中是否可行取决于您如何构建数据。如果您想知道特定汽车的组成部分，那似乎是可行的。如果您想归档全局零件，而不管它们属于哪辆车，那么您仍然可以这样做，但您必须使每辆车内的“零件”也指代不同的型号。如果你明白我的意思（我不确定我是否明白），因为每辆车都包含它自己的零件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T23:50:39.910

将父级添加为显式属性不会有帮助。

你可以把它分成两部分：

```
for suv in Car.all().filter('type', 'SUV'):
  for part in Part.all(ancestor=suv):
    ...do something with part... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T04:36:11.167

如果要查询另一个（父）对象的属性，则必须先获取该对象。

对于您的问题，我可以想到两种解决方案：

Guido 的方式是先查询父节点，然后再查询部分。这种方式发出更多的查询。

第二种方法是在 Part 中存储 parent.type 的副本。缺点是您要存储重复数据（更多存储空间），并且您必须注意 Part 中的数据和 Car 中的数据匹配。但是，您只需要发出一个查询。

你必须弄清楚哪一个更适合你。

# c# - OpenFileDialog.ShowDialog() 冻结应用程序 c#

> ID：12773411
> 
> 赞同：1
> 
> 时间：2012-10-07T22:25:16.923
> 
> 标签：c#

> **可能重复：**
> [C#、WPF - OpenFileDialog 不出现](https://stackoverflow.com/questions/2201227/c-wpf-openfiledialog-does-not-appear)

我正在尝试制作 John Hunt 的 C# 和面向对象指南中的“JDEdit”应用程序。但是，我像他一样输入了所有代码，每当我尝试使用 ShowDialog() 时，我的应用程序就会冻结。我没有收到任何编译器投诉，所以我不确定发生了什么。

这是我正在尝试实施的方法。检查条件时它会冻结。我认为程序的其余部分不需要发布。

```
private void Open() {

    // still working

    if (ofd.ShowDialog() == DialogResult.OK) {

        // never makes it here

        string filename = ofd.FileName;
        Console.WriteLine("Open: {0}", filename);
        textArea.TextChanged -= new EventHandler
            (this.TextArea_TextChanged);
        textArea.LoadFile(filename);
        textArea.TextChanged += new EventHandler
            (this.TextArea_TextChanged);
        saveRequired = false;
        this.Text = title + ": " + filename;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T22:38:22.463

在 Main 上方添加 [STAThread] 可解决此问题。

# java - objectInputStream 总是从可序列化的类中读取第一个实例

> ID：12773415
> 
> 赞同：0
> 
> 时间：2012-10-07T22:25:44.477
> 
> 标签：java, serialization, client-server, objectinputstream

我制作了一个实现可序列化的类。当我通过我的服务器-客户端应用程序接收它的对象时，我只得到它的第一个实例，那么无论对象被修改多少次，objectInputStream 只接收第一次发送的那个。为什么？

这实际上是一个摇摆应用程序在我的应用程序上同时运行一个聊天部分和一个游戏部分。

面板将我的游戏对象发送到服务器/客户端对象

```
this.getServer1().sendGame(panel1.getMyGame());

 public void sendGame(Game g1) throws IOException{
       output.writeObject(g1);
       output.flush();
   } 
```

服务器或客户端部分在线程上运行

它从游戏部分或聊天部分读取数据，聊天部分工作正常

```
Object next = input.readObject();
if (next instanceof Game) {
    game1 = (Game)next;
    panel1.setHisGame(game1);
}
else if (next instanceof String) {
    message = (String)next;
    ...
} 
```

gameclass 只是一个简单的类，具有一些 String 属性和实现 Serializable

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:39:04.450

我已经解决了。在面板将 mygameobject 发送到服务器之前，我必须创建整个新对象并用 mygameobject 的数据填充它。这就是它可以工作的方式。

# makefile - GNU Make 中 ifeq 指令和 if 函数的区别

> ID：12773416
> 
> 赞同：1
> 
> 时间：2012-10-07T22:26:06.503
> 
> 标签：makefile, gnu-make, flow-control

`ifeq`GNU Make 中的指令和`if`函数有什么区别？我应该什么时候使用每个？它们是否不同，因为它们`ifeq`是由 GNU Make 中的“预处理器”解析的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T12:18:24.090

该`if`函数用于[条件扩展](http://www.gnu.org/software/make/manual/html_node/Conditional-Functions.html)。`ifeq`函数和其他常规[条件](http://www.gnu.org/software/make/manual/html_node/Conditional-Syntax.html)不能保证如果它们不为真，则不会扩展部分。查看链接（特别是第一个链接）以进行详细说明。

# java - Java Swing 重绘缓慢或不工作

> ID：12773418
> 
> 赞同：1
> 
> 时间：2012-10-07T22:26:49.000
> 
> 标签：java, swing, graphics, jpanel, paintcomponent

我正在尝试使用布尔标志基于按钮单击来绘制图形。之前，我在 ShapeGUI 类中将布尔值设置为公共静态布尔类型，并在 ShapeListener 中使用 Shape.draw 调用它，虽然它需要大约 10 秒才能生成绘图。

现在我在 ShapeListener 类本身中设置布尔标志。现在它要么不重绘，要么很慢。当我单击按钮时，如何使绘图立即出现？

```
public class ShapeGUI extends JFrame
{
    public static final int WIDTH = 500;
    public static final int HEIGHT = 500;

    public ShapeGUI()
    {
        setSize(WIDTH, HEIGHT);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //setLayout(new FlowLayout());
        setLocationRelativeTo(null);
        JMenuBar menu = new JMenuBar();
        JMenu file = new JMenu("File");
        menu.add(file);
        JMenuItem save = new JMenuItem("Save Information");
        JMenuItem exit = new JMenuItem("Exit");
        file.add(save);
        file.add(exit);               
        setJMenuBar(menu);

        ShapeListener test = new ShapeListener();        
        JButton button = new JButton("Hello"); 
        test.setBackground(Color.CYAN);
        button.addActionListener(new ShapeListener());
        test.add(button); 
        add(test);

//followed this person's advice        
//First off, your drawing should be done in a paintComponent method override that is held in a class that extends JPanel. Next, this class could have a boolean variable that the paintComponent uses to decide if it will draw a rectangle or not. The button press simply sets the boolean variable and calls repaint on the drawing JPanel.
    }
}

    public class ShapeListener extends JPanel implements ActionListener

    {

    boolean draw = false;
    Shape s = new Circle();
    Shape a = new Rectangle();

    @Override
    public void actionPerformed(ActionEvent e) 
    {
        draw = true;
        repaint();
    }
    @Override
    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);

        if(draw)
        {
        s.draw(g);
        }
        else
        {
            a.draw(g);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T22:36:36.393

你的逻辑有点不对...

```
ShapeListener test = new ShapeListener(); // First instance
JButton button = new JButton("Hello");
test.setBackground(Color.CYAN);
button.addActionListener(new ShapeListener()); // Second instance...
test.add(button);
add(test); 
```

您创建`ShapeListener`该类的两个实例，将一个添加到容器中并将另一个用作操作侦听器。两者都不会互相了解，也就是说你可以按一下奶牛回家，第一个实例`ShapeListener`永远不会改变。

此外，除非您打算覆盖窗格的`preferredSize`方法，否则我会在框架上使用类似 a 的东西，以确保面板布局正确，否则看起来面板没有被绘制.. .`ShapeListener``BorderLayout`

尝试类似...

```
public class ShapeGUI extends JFrame {

    public static final int WIDTH = 500;
    public static final int HEIGHT = 500;

    public ShapeGUI() {
        setSize(WIDTH, HEIGHT);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        JMenuBar menu = new JMenuBar();
        JMenu file = new JMenu("File");
        menu.add(file);
        JMenuItem save = new JMenuItem("Save Information");
        JMenuItem exit = new JMenuItem("Exit");
        file.add(save);
        file.add(exit);
        setJMenuBar(menu);

        setLayout(new BorderLayout());

        ShapeListener test = new ShapeListener();
        JButton button = new JButton("Hello");
        test.setBackground(Color.CYAN);
        button.addActionListener(test);
        test.add(button);
        add(test);

        setVisible(true);

    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                new ShapeGUI();

            }
        });
    }

    public class ShapeListener extends JPanel implements ActionListener {

        Shape s = new Ellipse2D.Float(0, 0, 20, 20);
        Shape a = new Rectangle2D.Float(0, 0, 20, 20);

        private Shape paintMe = a;

        @Override
        public void actionPerformed(ActionEvent e) {
            paintMe = s;
            repaint();
        }

        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);

            int x = (getWidth() - paintMe.getBounds().width) / 2;
            int y = (getHeight() - paintMe.getBounds().height) / 2;

            Graphics2D g2d = (Graphics2D) g.create();
            g2d.translate(x, y);
            g2d.draw(paintMe);
            g2d.dispose();

        }
    }
} 
```

反而...

# algorithm - 对具有重复元素的数组进行排序的最佳数据结构是什么？

> ID：12773429
> 
> 赞同：0
> 
> 时间：2012-10-07T22:28:33.583
> 
> 标签：algorithm, sorting, data-structures, language-agnostic

如果数组包含重复元素，那么哪种数据结构更适合排序？

B树可以工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T22:30:50.840

对于*固定且小范围的元素值*，您可以使用计数排序算法，如此[处](http://en.wikipedia.org/wiki/Counting_sort)所述。它的复杂性是，数组的大小`O(n + k)`在哪里，基本上是不同可能元素的数量。`n``k`

重点是计算相同元素的数量，然后以正确的顺序插入它们。

# vba - 使用 vba 修改 Excel 文件并另存为 CSV

> ID：12773432
> 
> 赞同：0
> 
> 时间：2012-10-07T22:29:52.433
> 
> 标签：vba, csv, excel

我正在填充一个充满居民数据的新应用程序。我必须为每处房产导出一份居民名单。不幸的是，新应用程序必须让居民一次进口 1 处房产。这意味着我通过导出 excel 文件、稍微修改数据然后导入新应用程序来加载 200 多个属性。

对于导出的每个属性，我必须从第一列中删除一个“-”，并且必须删除整个文档中的所有“，”。然后我将日期列的格式更改为“mm/dd/yyyy”。然后将文档保存为 CSV 文件并可以导入。

我想编写一个脚本来执行对 excel 文件的更新并将其保存到 csv 中。请告知这是否值得我花时间。这是一次性负载，因此最好仅通电。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:23:04.230

可能有点过早，因为我不确定这是你想要实现的目标，但你可以试试这个（先保存）：

```
Sub replaceStuff()

    ActiveSheet.Range("A:A").Replace "-", ""
    ActiveSheet.Cells.Replace ",", ""
    ThisWorkbook.SaveAs "doc", xlCSVWindows

End Sub 
```

# c# - 使用 DirectShow 捕获相机

> ID：12773441
> 
> 赞同：2
> 
> 时间：2012-10-07T22:31:21.307
> 
> 标签：c#, c++, camera, windows-mobile, directshow

我正在`C#`为装有 Windows Mobile 6.1 的设备开发 SmartDevice 应用程序（Pocket PC 2003 模板）。我需要使用此设备的相机（照片、视频）；为了完成这项工作，我尝试使用`CameraCaptureDialog`该类，但它不适用于 Pocket PC 应用程序。因此，我在互联网上记录并发现我可能指的是[DirectShow API](http://msdn.microsoft.com/en-us/library/ee493997.aspx)，但问题是我不知道从哪里开始，因为我找不到工作/正确的示例。

*我的问题：*
这是正确的方法吗？有替代品吗？
我在哪里可以找到一个**很好的**例子来展示如何做这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T12:06:25.577

如果您真的想使用 DirectShow 和 NetCF，您可以尝试使用 directshowbetcf：[http ://alexmogurenko.com/blog/directshownetcf/。](http://alexmogurenko.com/blog/directshownetcf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T06:25:55.830

DirectShow 是Windows Mobile 6 中的[视频捕获 API 。那里有一个](http://msdn.microsoft.com/en-us/library/aa924811.aspx)[视频捕获过滤器](http://msdn.microsoft.com/en-us/library/ff599636.aspx)，所有东西的设计方式与 Windows 中的几乎相同。

但问题是这是一个原生 API，而不仅仅是在 Windows Mobile 中。要在 C# 中开发，您需要一些绑定，但它们缺少。在桌面上有 DirectShow.NET，这是一个缺失的部分，但它似乎不太适合 CE。然而，您仍然需要在 Windows Mobile 中填补这一空白。

要解决它，您有几种方法，第一种是通过 DirectShow.NET 并适当更新它以开始在您的设备上工作，剥离移动操作系统中缺少的部分等。这将为您提供 DS.NET 的双胞胎，但用于移动操作系统。

另一种选择是进行一些 C++ 开发并在该域中实现最小的足够功能集，通过 COM 公开组件。然后，您将从托管代码中引用它，并且事情将连接在一起。另一个明显的选择是使用已经完成上述之一的第三方解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T01:13:25.597

网上有很多directshow的例子。有一个专门用于将 API 转换为 C# 的站点，这使得它更容易，也许这就是[http://directshownet.sourceforge.net/about.html](http://directshownet.sourceforge.net/about.html)。在我阅读了微软出版社的“programming directshow”一书之前，我一直在努力使用 DirectShow。通过那本书大约三分之一的方式，这一切似乎都非常容易，我能够完成我想要的。最后，它很像引用任何库并使用该库中的类。增加的困难是您需要添加包装器，因为它们都是 COM 对象，但已经为您完成了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T12:24:47.397

这可能有助于您了解 DirectShow 技术。基本上介绍了 DirctShow 并解释了一些要点。但它的 C++ 不是 C#。希望这有帮助

[基本视频捕捉](http://www.codeproject.com/Articles/34213/Basic-Video-Capture-and-VMR9)

# ruby-on-rails - Rails3 phonegap jsonp 方法覆盖 PUT、POST

> ID：12773443
> 
> 赞同：1
> 
> 时间：2012-10-07T22:31:28.177
> 
> 标签：ruby-on-rails, cordova, cross-domain, jsonp, rack

我正在尝试使用 rails 3 rest api 创建一个电话间隙应用程序。由于跨域，我必须使用只允许 GET 的 JSONP。但是rails你可以把_method=POST放在表单动作中来覆盖方法

我还需要用我自己的自定义中间件覆盖机架中间件 MehtodOVerride 以允许它。

所以我用以下代码创建了一个 lib/restful_jsonp_middleware.rb

```
module Rack

class RestfulJsonpMiddleware

  HTTP_METHODS = %w(GET HEAD PUT POST DELETE OPTIONS)
  METHOD_OVERRIDE_PARAM_KEY = "_method".freeze
  HTTP_METHOD_OVERRIDE_HEADER = "HTTP_X_HTTP_METHOD_OVERRIDE".freeze

  attr_accessor :method_parameter_name

  def initialize(app)
    @app = app
    @method_parameter_name = METHOD_OVERRIDE_PARAM_KEY
  end

  # We check if the method parameter is in the request
  # and set up the request to allow the execution of the
  # overwritten HTTP method
  def call(env)
    req = Request.new(env)
    method = req.params[@method_parameter_name]
    method = method.to_s.upcase
    if HTTP_METHODS.include?(method)
      env["rack.methodoverride.original_method"] = env["REQUEST_METHOD"]
      env["REQUEST_METHOD"] = method
      env[HTTP_METHOD_OVERRIDE_HEADER] = method
    end
    @app.call(env)
  end
end
end 
```

我还将这些行添加到我的 application.rb 文件中

```
require 'lib/restful_jsonp_middleware.rb'
config.middleware.swap Rack::MethodOverride,Rack::RestfulJsonpMiddleware 
```

现在，如果我使用机架中间件，我会收到此错误

```
rake aborted! 
```

无法加载此类文件 -- lib/restful_jsonp_middleware.rb /home/sunny/workspace/ruby_projects/jquery_bootstrap/config/application.rb:4:in `require' /home/sunny/workspace/ruby_projects/jquery_bootstrap/config/application.rb:4:in`' /home/sunny/workspace/ruby_projects/jquery_bootstrap/Rakefile:5:in `require' /home/sunny/workspace/ruby_projects/jquery_bootstrap/Rakefile:5:in`' / home/sunny/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load' /home/sunny/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in`load_rakefile' /home/sunny/.rvm/gems/ ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:501:in `raw_load_rakefile' /home/sunny/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:82:in`block in load_rakefile' /home/sunny/.rvm/gems/ruby-1.9.3-p194 @global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling' /home/sunny/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:81:in`load_rakefile' /home/sunny/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9。 2.2/lib/rake/application.rb:65:in `block in run' /home/sunny/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in`standard_exception_handling' /home/sunny/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb :63:在`run' /home/sunny/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in`' /home/sunny/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load' /home/sunny/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in`' /home/sunny/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper ：14：在`eval' /home/sunny/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in`'

我究竟做错了什么。

谁能帮帮我吗

# visual-c++ - 如何找到依赖的 dll 来运行由 VC++ 项目创建的 EXE 文件

> ID：12773446
> 
> 赞同：0
> 
> 时间：2012-10-07T22:32:26.577
> 
> 标签：visual-c++, boost, opencv, exe

在我的 vc++ 项目中，我使用 boost、OpenCv 和 JRTPLIB 库，我创建了一个 exe 文件，当我尝试在另一台 PC 上运行它时（PC 没有 vc++ 或提到的库）我收到错误消息...

“应用程序无法启动，因为它的并排配置不正确。请查看应用程序事件日志或使用命令行 sxstrace.exe 工具了解详细信息”

我是创建 exe 文件的新手，请您帮助我理解错误。会有我需要用 exe 文件复制的依赖项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T05:22:31.063

要运行 sxstrace.exe，请转到 Visual Studio 命令提示符并键入 sxstrace.exe。

用法如下：

1.  在运行应用程序之前，在跟踪模式下运行 sxstrace：

    ```
    sxstrace.exe Trace -logfile:C:\MySxSTrace.log 
    ```

2.  通过启动您的应用程序重现错误

3.  现在使用以下命令停止跟踪

    ```
     sxstrace.exe Parse -logfile:C:\MySxSTrace.log -outfile:C:\MySxSTrace.txt 
    ```

4.  从 C:\MySxSTrace.txt 打开输出文件

**什么是并行配置？**

并行程序集包含一组资源——一组 DLL、Windows 类、COM 服务器、类型库或接口——总是一起提供给应用程序。这些在程序集清单中进行了描述。

**它为什么如此重要？**

在许多情况下，可以更新现有应用程序以使用并行程序集，而无需更改应用程序代码。鼓励开发人员使用并行程序集来创建独立的应用程序，并将现有应用程序更新为独立的应用程序，原因如下：

**并行**程序集降低了 DLL 版本冲突的可能性。

**并行**程序集共享使多个版本的 COM 或 Windows 程序集能够同时运行。

**应用程序**和管理员可以在部署后基于全局或​​每个应用程序配置更新程序集配置。例如，可以更新应用程序以使用包含更新的并行程序集，而无需重新安装应用程序。

对于[并排配置不正确](http://www.codeproject.com/Articles/43681/Side-by-Side-Configuration-Incorrect)，请阅读本文............

# javascript - 将 onload 附加到图像会导致在 Android 设备上多次触发 onload 事件

> ID：12773449
> 
> 赞同：1
> 
> 时间：2012-10-07T22:33:12.913
> 
> 标签：javascript, android, jquery, jquery-events

我试图计算页面上加载的图像数量，因为我需要等到所有图像都加载完毕才能计算父元素的正确高度。我最终找到了一种更好的方法，但我在 android 设备上遇到了奇怪的行为。

当您使用 jQuery 附加带有 onload 函数的图像时，该事件会在 Android 上多次触发：

```
$('#element').append('<img src="/interesting/path" onload="doSomethingWeird()" />' ); 
```

我使用的所有其他浏览器都没有做这种奇怪的行为。我在 Android 的 4.0.4 浏览器上有这个。

有人为什么会这样吗？

# php - 多个str_replace？

> ID：12773450
> 
> 赞同：1
> 
> 时间：2012-10-07T22:33:16.893
> 
> 标签：php

我正在尝试替换 CodeIgniter 中具有某些参数的 URL。在这一点上，CI 并不重要，因为我有它最好的部分工作。

可以说我的网址是：

```
?device=field1-field2_field3+field4 
```

通过回显应该显示的 $devicelink2 ：

```
field1 field2.field3*field4 
```

目前它适用于除了替换 + 之外的所有内容。出于某种原因，它将 + 替换为空格。

但是我无法使用下面的代码来实现它。有任何想法吗？

```
 $device = $this->input->get('device');
    $devicelink = str_replace("-"," ",$device);
    $devicelink1 = str_replace("_",".",$devicelink);
    $devicelink2 = str_replace("+","*",$devicelink1); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T22:42:12.290

`+`在查询字符串中实际上表示一个空格字符，因此使用这个（非常奇怪的）查询字符串：

```
?device=field1-field2_field3+field4 
```

`$this->input->get('device')`等于`field1-field2_field3 field4`

要回答您关于如何使用此确切查询字符串获得所需输出的字面问题：

```
$device = $this->input->get('device');
$devicelink = str_replace(" ", "*", $device);
$devicelink1 = str_replace("_", ".", $devicelink);
$devicelink2 = str_replace("-", " ", $devicelink1); 
```

或者：

```
$devicelink2 = str_replace(array(' ', '_', '-'), array('*', '.', ' '), $device); 
```

如果您在将这些字符放入原始查询字符串时遇到问题，请确保对其进行正确编码：

```
?device=field1+field2.field3%2Afield4 
```

请参阅 PHP 的本机`urlencode`函数以获得帮助：http: [//php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T22:41:50.873

试试这个：

```
$search  = array('-', '_', '+');
$replace = array(' ', '.', '*');
$subject = $this->input->get('device');

$deviceLink = str_replace($search, $replace, $subject); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T22:46:50.530

str_replace 可以很好地接受数组。str_replace(array('she', 'loves', 'me'), array('he' , 'hates', 'you'), '她爱我不是你');

str_replace 将返回“他讨厌你而不是你”。（可怕的例子吧？）。

如果您输入一个要搜索的数组并输入一个字符串作为替换，它将用干草堆中的给定字符串替换所有数组值。

或者，如果您输入 2 个具有相同数量元素的数组，则“搜索”数组中的元素将被替换为它们各自的替换值。

$devicelink = str_replace(array('-', '_', '+'), array(' ', '.', '*'), $device);

# html - 域名之前的 URL 部分是什么？

> ID：12773454
> 
> 赞同：7
> 
> 时间：2012-10-07T22:35:57.333
> 
> 标签：html, web

所以我有两个问题：

1.  这部分叫什么？**en** .wikipedia.org，域名前的部分。
2.  我想为我的网站制作类似的东西，比如`firstName.lastName.web` 我的家庭网站上的个人页面。

    我怎么做？我知道如果我只是将一个文件夹放在根文件夹中，它会被视为 /。像这样：`lastName.web/firstName.HTML`。这很好，但不是我想要的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T22:40:50.073

它被称为子域。创建子域取决于您将域名注册给谁。一个快速的谷歌搜索应该能够为你解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:33:19.893

在 DNS 中，它可能被认为是一个子域 - 通常这个位置是主机名。

在您的示例中，这甚至不是主机名 - 它只是预先添加的语言。

像这样多语言网站的翻译被分开（'en' 是完全默认的）。

通常这都是相同的虚拟主机——只是具有不同的语言资源。

只需创建一个名为 *.yourdomain.com 的子域即可启用通配符 DNS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-12T02:53:22.510

我在任何地方都没有看到用外行的话来说明这一点，所以就这样吧。我拥有一堆域名，现在有一个停在那里：violetweedconsulting.com。域名是violetweedconsulting.com，这也是“根域”，它包括TLD 扩展名。

“.com”是该示例域名的 TLD 扩展名。其他一些潜在的 TLD 扩展是“.edu”、“.org”、“.net”、“.ca”（用于加拿大域），当然今天还有更多的 TLD 扩展，但主要是，对于大多数用途，那些基本的就是您在美国使用的所有内容。（英国有 co.uk，澳大利亚有 co.au 等） 子域：位于 domainname.com 之前的“www”是“子域”的示例'，或'第三级（'句点' . 是分隔符）。如果您是新手，请将“www”视为文件夹名称。如果您有一个网站，您可以（但不总是）在您的托管商网站上担任该网站的“管理员”。然后，您将登录到例如 www.godaddy。com，这样您就可以登录到 Godaddy 的网站托管区域。在该托管站点上，您可以添加不同的“文件夹”，例如“搜索”或“博客”。搜索文件夹可能有一个搜索引擎页面（我不会打扰那个文件夹，但有些网站会这样做，例如，如果他们有很多数据）。'blog' 文件夹将是您的博客文章所在的位置，您还可以将 wordpress.com（或 .org）或 blogger.com 重定向到子域 blog.domainname.com，以便您可以使用子域' www.domainname.com' 用于您想要的任何内容，而博客子域仅用于您的日记。有更多可用信息，但这就是它的要点。www 是一个文件夹，博客也是如此，等等。每个子域都可以“限制”给具有登录名等的特定用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-20T15:40:37.663

那部分称为**子域**。

* * *

更一般地说，这里是 URL 的不同部分，根据[`window.location`](https://developer.mozilla.org/en-US/docs/Web/API/Window.location). （所以至少根据 Javascript 的调用方式）

```
protocol://username:password@hostname:port/pathname?search#hash
-----------------------------href------------------------------
                             -----host----
-----------      origin      ------------- 
```

*   `protocol`- URL 的协议方案，包括最后的 ':'
*   `hostname`- 域名
*   `port`- 端口号
*   `pathname`-*`/pathname`*
*   `search`-*`?parameters`*
*   `hash`-*`#fragment_identifier`*
*   `username`- 在域名之前指定的用户名
*   `password`- 在域名前指定密码
*   `href`- 整个网址
*   `origin`-`protocol://hostname:port`
*   `host`-`hostname:port`

# ios - iOS比较两个对象以查看它们是否在时间事件中重叠

> ID：12773455
> 
> 赞同：1
> 
> 时间：2012-10-07T22:36:03.323
> 
> 标签：ios

假设对象 MEvent ，它有两个字段

```
 NSDate *start_time;
     NSDate *end_time; 
```

event1, event2 是 MEvent 对象的实例，如何找出两个实例在时间上重叠？

最简单的实现是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T22:51:11.633

比较不同实例的 startTime 和 endTime。如果 startTime 晚于其他实例的 endTime，则表示没有重叠。您必须以两种方式进行比较。

如果通过上述检查，则表示存在重叠。

# mysql - CommandText 属性未正确初始化

> ID：12773456
> 
> 赞同：0
> 
> 时间：2012-10-07T22:36:08.737
> 
> 标签：mysql, vb.net

VB.NET，带有 MySQL 的 Winforms 应用程序。在我的应用程序中，由于资金和连接可靠性的限制，我添加了通过使用邮件附件来更新它的功能。一切正常。在应用程序表单加载中，即使我让它检查文件是否存在。如果存在，则需要对数据库进行更改。因此，调用下面的 Sub 并将该文件的内容读入 arrayList ...当应用程序从 VS 外部启动时，我收到“CommandText 属性未正确初始化”错误。

```
 Private Sub sqlUpdate(ByVal sqlScriptName As String)
    Dim D As Boolean = BackupDatabase("C:\xxxxxxxx\temp.sql")

    Dim objReader As New StreamReader(sqlScriptName)
    Dim sLine As String = ""
    Dim arrText As New ArrayList()
    Do
        sLine = objReader.ReadLine()
        If Not sLine Is Nothing Then
            arrText.Add(sLine)
        End If
    Loop Until sLine Is Nothing
    objReader.Close()

    For Each sLine In arrText
        Dim conn As New MySqlConnection
        Dim myCommand As New MySqlCommand
        Dim connString As String = My.Settings.storageConnectionString
        conn.ConnectionString = connString
        myCommand.Connection = conn
        myCommand.CommandText = String.Empty
        Try
            myCommand.CommandText = sLine
            conn.Open()
            myCommand.ExecuteNonQuery()
        Catch myerror As MySqlException
            'MsgBox("There was an error updating the database: " & myerror.Message + vbNewLine + "PLEASE CONTACT THE DEVELOPER IMMEDIATELY")
        End Try

    Next

    Return

End Sub 
```

不确定问题出在哪里，并且一直跟踪执行... sList 包含如下所示的有效 MYSQL 命令：

```
 ALTER TABLE `storage`.`property_info` ADD COLUMN `pfam_pName` CHAR(200) NULL  AFTER `pfam_Phone` ; 
```

有什么想法可以让我朝着正确的方向前进？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:56:06.423

我发现您的代码没有错误，但我怀疑您的脚本中有空行，因此允许它传递`empty string`您的命令文本。请务必将文件的读取修改为此，

```
Do
    sLine = objReader.ReadLine()
    If (Not sLine Is Nothing) Then
        If sLine.Trim().Length <> 0 Then      ' this will not add empty line '
           arrText.Add(sLine)
        End If
    End If
Loop Until sLine Is Nothing 
```

或者

```
For Each sLine In arrText 
    If sLine.Trim().Length = 0 Then Continue For   ' skips for empty line '

    Try 
        myCommand.CommandText = sLine 
        myCommand.ExecuteNonQuery() 
    Catch myerror As MySqlException 
        MsgBox("There was an error updating the database: " & _
                myerror.Message & vbNewLine & _
                "PLEASE CONTACT THE DEVELOPER IMMEDIATELY") 
    End Try 
Next 
```

# algorithm - 为 2d 凸包选择点

> ID：12773458
> 
> 赞同：1
> 
> 时间：2012-10-07T22:36:17.003
> 
> 标签：algorithm, points, convex

我每天做一个算法，最近没有完成这个。

我有一组要绘制的点，现在我想选择成对在它们之间画线，以便完成后它们将形成一个凸包。

我的想法是从 y 坐标最低的那个开始，然后按 CCW 顺序进行，但我不确定如何编写一个好的算法来选择对。

这个问题其实很简单，只是我是初学者：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:37:48.360

您是否尝试过使用[格雷厄姆扫描算法](http://en.wikipedia.org/wiki/Graham_scan)？它实际上使用坐标排序和CW顺序。

# php - bootstrap typeahead 仅显示结果的第一个字符

> ID：12773463
> 
> 赞同：1
> 
> 时间：2012-10-07T22:36:47.097
> 
> 标签：php, javascript, html, twitter-bootstrap

目前，当我在 php 中创建它时，我的预输入看起来像这样

```
 echo '<input type="text" style="margin: 0 auto;" data-provide="typeahead" data-items="4" data-source="[,';
while ( $rowresult = mysql_fetch_assoc($titlequery) ) {
      echo '{value:&quot;'.htmlspecialchars($rowresult['title']).'&quot;'."},";
}
      echo ']">'; 
```

它输出如下：

```
 <input type="text" style="margin: 0 auto;" data-provide="typeahead" data-items="4" data-source="[,{value:&quot;2010-11 Graf Intern&quot;},{value:&quot;2nd Year Finance Explorer, Mizani &amp; L'Oreal Technique&quot;},{value:&quot;A&amp;R Intern&quot;},{value:&quot;Account Executive&quot;},{value:&quot;Account Manager&quot;},{value:&quot;Account Service Representative&quot;},{value:&quot;Account Strategist&quot;},{value:&quot;Accountant&quot;},{value:&quot;Accounting Intern&quot;},{value:&quot;Accounting Intern/Analyst&quot;},{value:&quot;Accounts payable&quot;},{value:&quot;Acquisition Marketing Intern&quot;},{value:&quot;Acquisitions Associate&quot;},{value:&quot;Acting Manager&quot;},{value:&quot;Acting Software Manager&quot;},{value:&quot;Administrator&quot;},{value:&quot;Admissions Ambassador&quot;},]"> 
```

不幸的是，它只显示了它能够找到的每个值的第一个字符（值是引导程序的默认值。）

编辑：

问题围绕格式化结果展开，实际上，发生的事情是 Javascript 试图引用一个不存在的数组，因此它采用了元素 [0]，它是它的第一个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:43:24.620

尝试使用此解决方案：

```
<?
$chars = array(":", "'", "?", '"', "/");
while ( $rowresult = mysql_fetch_assoc($titlequery) ) {
      $Str = $rowresult['title'];
      $Data[] = str_replace($vowels, "", $Str);
}
if(isset($Data)): ?>    
<input type="text" style="margin: 0 auto;" data-provide="typeahead" data-items="4" data-source="[<?= implode(',', $Data) ?>]">
<?php endif; ?> 
```

# eclipse - 在多台计算机上使用相同的 Pydev/Eclipse 环境

> ID：12773470
> 
> 赞同：3
> 
> 时间：2012-10-07T22:37:55.247
> 
> 标签：eclipse, pydev

我的笔记本电脑和台式机上安装了 Eclipse + PyDev，它们都是双引导 Windows Vista 64 和 Ubuntu 12.04。现在，我在笔记本电脑上的 Windows 中几乎完全按照我想要的方式充实了唯一的“版本”。在两台计算机和两个操作系统之间复制（并希望同步）它的最佳方法是什么？在这种情况下，唯一使用该帐户的人将是我自己。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T02:32:44.247

几点建议：

1.  如果您只想使用一些通用配置来优化您的 Eclipse 安装，然后允许它们偏离该点，您可以将工作区文件夹复制到您想要的所有位置，然后从 Eclipse 中切换到这些工作区。您还可以使用 Eclipse 从 Eclipse 中导出您的首选项`File > Export > General > Preferences`，这可能也可以，或者更好。

2.  如果你想在 Ubuntu 和 Windows 之间共享 Eclipse 配置，你可以在 Ubuntu 中安装 NTFS-3G，然后让 Eclipse 工作区指向你的 Windows 分区。我不确定 Eclipse 是否可以很好地处理这个问题（例如 JDK 路径）。

3.  如果您想对所有设备和操作系统使用相同的配置，并且考虑到您不会同时使用多个 Eclipse 实例：

    1.  如果您有 wi-fi，您可以在 Windows 中共享您的 Eclipse 工作区，然后在其他 Windows 中映射一个网络驱动器号，并在您的 Ubuntu 中安装一个远程网络位置。您仍然可以对同一设备使用上面的第二个建议。

    2.  或者，您可以在启动和关闭 Eclipse 时使用 rsync 或类似方法来同步不同的工作区。这样，您可以将上述选项的可能性能问题从使用 Eclipse 转移到启动或关闭它时。

        您在开始时同步以获取来自其他设备的最新更改，并在关闭时同步，因为您也希望将所做的更改推送到其他工作区。在 Ubuntu 中，您可以将 Eclipse 调用周围的同步命令包装在 shell 脚本中，而在 Windows 中，您可以使用[Hidden Start](http://www.ntwind.com/software/hstart.html)执行相同的操作，只是它可以为您隐藏 shell 窗口。

    3.  您可以使用 Dropbox、Skydrive 或 Ubuntu One 等服务来存储您的 Eclipse 工作区，并让他们的客户端软件为您完成同步工作。

这就是我想到的。也许 Eclipse 有内置的东西来处理这个而不是导出向导，不确定。

**究竟要分享什么**

请记住，工作区是您所有个人配置所在的位置，包括您在使用 Eclipse 时看到的项目列表。如果其中一些项目位于工作区目录之外，您可能会遇到路径冲突，例如`C:\MyProject`存在于您的 PC 中但在笔记本电脑中丢失。您可以将所有项目保留在工作区目录中以避免这种情况。此外，如果您选择第一个建议，则上述导出向导可能会更好。

我不认为只共享工作空间的一部分是一个好主意，除非你知道自己在做什么，而且我认为共享整个 Eclipse 目录本身并没有什么好处（无论如何这在 Linux 和 Windows 之间是不可能的）。您可以找到您的工作区的确切位置`File > Switch Workspace`。

# javascript - jsp页面上的“Handleonclose”功能问题

> ID：12773476
> 
> 赞同：0
> 
> 时间：2012-10-07T22:38:49.670
> 
> 标签：javascript, jsp

我有一个 jsp 文件，它调用另一个 jsp 文件，将其作为显示模式对话框窗口打开。

假设file1.jsp 通过file1.js 调用file2.jsp。

File1.jsp-->File1.js（各js文件） File2.jsp-->File2.js（各js文件）

现在要在 File2.jsp 中处理 onclose，我在 File2.js 中添加了一个函数。

当我点击关闭窗口但选择选项作为取消时，而不是只显示旧窗口。它在现有模态窗口的顶部显示一个模态窗口。为什么会这样。我是否遗漏了一些明显的东西。

我期望发生的事情：当我选择关闭但单击取消时，什么都不会发生。

File2.js 函数：

```
function handleOnClose() {

    var resultsDoc = document.frames('searchBuffer').document;

    if (event.clientY < 0) {
        var bool = confirm('Are you sure you want to close the window ?');
        if (!bool) { //Issue occurs here
            window.showModalDialog("File2.jsp", "", "dialogWidth:1000px;dialogHeight:650px");
        }
        else {
            resultsDoc.all('searchResults').innerText = '';

            document.someSearch.submit();
        }
    }

    window.returnValue = 'Discard';

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T00:42:26.943

修改 File2.js 函数：

```
function handleOnClose() {

    var resultsDoc = document.frames('searchBuffer').document;

    if (event.clientY < 0) {
        var bool = confirm('Are you sure you want to close the window ?');
        if (!bool) { //Issue occurs here
            //*******removed the showmodal dialog window call
              window.returnValue = 'Sorry';
        }
        else {
            resultsDoc.all('searchResults').innerText = '';

            document.someSearch.submit();
    window.returnValue = 'Discard';
        }
    }

} 
```

在调用 js (file1.js) 上，我检查返回值是否为“丢弃”，如果是，我刷新页面。否则我再次调用显示模式窗口。我的结果存储在缓冲区中，因此检索不是问题。奇迹般有效

# html - 沿路径平移标记

> ID：12773480
> 
> 赞同：1
> 
> 时间：2012-10-07T22:39:11.940
> 
> 标签：html, xml, graphics, svg

在 SVG 中，是否可以将`marker_start`/`marker_end`沿 a翻译`Path`？

`<path id="e:3" fill="black" fill-opacity="1.0" stroke="black" stroke-opacity="1.0" stroke-width="1" d=" M2 12 L18 17 z" marker-start="url(#markerStart)">`

我想`marker-start`沿路径翻译一些 X 单位。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:28:48.400

您可以设置标记`refX`和`refY`属性，它们定义标记应附加到路径的位置。有关详细信息，请参阅[规范](http://www.w3.org/TR/SVG11/painting.html#MarkerElementRefXAttribute)。

可能您还需要调整`viewBox`<marker> 元素上的 。如果需要，您可以在 viewBox 之外绘制，前提是您`overflow:visible`在 <marker> 元素上进行了设置（或者在`markerWidth`,`markerHeight`属性中指定足够大的值）。

# jquery - Jquery 在 Rails 3.2.8 中不起作用

> ID：12773481
> 
> 赞同：0
> 
> 时间：2012-10-07T22:39:22.383
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我的名字是Pamela，我是这个版本的rails的新手，我正在尝试将一些验证和日期选择器放在一个表单中，但由于某种原因jquery无法正常工作，我搜索了很多并尝试了几件事但是他们没有工作。这是我的 application.js 文件：

```
//= require jquery
//= require jquery_ujs
//= require jquery-ui-1.8.24.custom.min
//= require jquery.ui.datepicker-es
//= require jquery.validate
//= require messages_es 
```

这是我的 application.html.erb：

```
<%= javascript_include_tag "application" %> 
```

我跑了： rails generate jquery:install 结果如下：

已弃用 您正在使用启用了资产管道的 Rails 3.1，因此不需要此生成器。必要的文件已经在您的资产管道中。只需将`//= require jquery`and添加`//= require jquery_ujs`到您的 app/assets/javascripts/application.js 如果您从 Rails 3.0 升级了您的应用程序，并且您的 javascripts 中仍然有 jquery.js、rails.js 或 jquery_ujs.js，请务必删除它们。如果您不想启用资产管道，您可以在 application.rb 中将其关闭并重新运行此生成器。

任何人都可以帮忙吗？

谢谢你。

更新：

这是我的表格：

```
<%= form_for(@contrato) do |f| %>
  <% if @contrato.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@contrato.errors.count, "error") %> no han permitido que el contrato sea guardado:</h2>
      <ul>
      <% @contrato.errors.full_messages.each do |msg| %>
        <li><font color="red"><%= msg %></font></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label 'Obra' %><br />
    <%= f.text_field :contrato_nombre_obra %>
  </div>
 <div class="field">
   <%= f.label 'Nombre Contratista/Empresa' %><br />
   <%= f.select :contratista_id, Contratista.find(:all, :order => "empresa").collect{|c| [c.empresa, c.id] } %>
  </div> 
  <div class="field">
    <%= f.label 'Municipio' %><br />
    <%#= f.number_field :tipo_norma_legal_id %>
    <%= f.select :municipio_id, Municipio.find(:all, :order => "nombre").collect{|c| [c.nombre, c.id] } %>
  </div>
    <div class="field">
    <%= f.label 'Localidad' %><br />
    <%#= f.number_field :tipo_norma_legal_id %>
    <%= f.select :localidad_id, Localidad.find(:all, :order => "nombre").collect{|c| [c.nombre, c.id] } %>
  </div>
  <div class="field">
    <%= f.label 'Tipo de Norma Legal' %><br />
    <%#= f.number_field :tipo_norma_legal_id %>
    <%= f.select :tipo_norma_legal_id, TipoNormaLegal.find(:all, :order => "tipo_norma_legal_descripcion").collect{|c| [c.tipo_norma_legal_descripcion, c.id] } %>
  </div>
  <div class="field">
    <%= f.label 'Nº Norma Legal '%><br />
    <%= f.text_field :contrato_nro_norma_legal %>
  </div>
  <div class="field">
    <%= f.label 'Año Norma Legal' %><br />
    <%= f.text_field :contrato_anio_norma_legal %>
  </div>
  <div class="field">
    <%= f.label 'Nº de Expediente (solo numeros)' %><br />
    <%= f.text_field :contrato_expte %>
  </div>
  <div class="field">
    <%= f.label 'Fecha del Contrato' %><br />
    <%= f.text_field :contrato_fecha %>
  </div>
  <div class="field">
    <%= f.label 'Monto de Contrato ($)' %><br />
    <%= f.text_field :contrato_monto %>
  </div>
  <div class="field">
    <%= f.label 'Plazo de Obra (dias)' %><br />
    <%= f.text_field :contrato_plazo_obra %>
  </div>
  <div class="field">
    <%= f.label 'Contrato Finalizado' %>
    <%= f.check_box :finalizado %>
  </div>
  <div class="actions">
    <br class="clearfix" />
    <%= f.submit 'Guardar', :class=>'button' %>
  </div>

<% end %>

<%= render(:partial => "javascripts") %> 
```

这是部分：

```
<script type="text/javascript">
 $(document).ready(function () {
     $("#new_contrato").validate({

        rules: {
        "contrato[contrato_nombre_obra]": {required: true, minlength: 3 , maxlength: 60 },
        "contrato[contrato_monto]": {digits: true},
        "contrato[contrato_plazo_obra]": {required: true, digits: true}
        "contrato[contrato_contrato_expte]": {digits: true}
        }
      });
    // Datepicker
        $('#contrato_contrato_fecha').datepicker({
          changeMonth: true,
          changeYear: true,
        });

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:47:30.480

如果您已经生成了应用程序并且没有更改 gemfile，那么您应该已经可以访问 jQuery 和 Unobtrusive jQuery。检查它是否包含 jquery-rails。如果是这样，那么您已经准备好使用 jquery。你不需要`run rails generate jquery:install`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:06:47.540

嗯，首先，非常感谢你帮助我......我已经尝试了最后一件事......我从头开始，我意识到也许我删除了一些东西以使 JavaScript 工作，所以我决定再次创建一个项目（这不是理想的做法，对吗？），所以我只是在新项目中复制了我的视图，进行了迁移等......现在至少验证正在工作，我没有'不要尝试日期选择器或其他东西（希望它们也能工作）。如果知道发生了什么，我会让你知道它可能对其他人有帮助。

# c# - Solr 返回 400

> ID：12773483
> 
> 赞同：0
> 
> 时间：2012-10-07T22:40:11.017
> 
> 标签：c#, solr, solrnet

这是对象模型。当我尝试将产品提交给 Solr 时，返回`unknown field loca`

```
public class Product
{
    [SolrUniqueKey("id")]
    public string Id { get; set; }

    [SolrField("manu")]
    public string Manufacturer { get; set; }

    [SolrField("cat")] // cat is a multiValued field
    public ICollection<string> Categories { get; set; }

    [SolrField("price")]
    public decimal Price { get; set; }

    [SolrField("inStock")]
    public bool InStock { get; set; }

    [SolrField("loca")]
    public Location Location { set; get; }
}

public class Location
{
    [SolrField("zipcode")]
    public int Zip { set; get; }
    [SolrField("country")]
    public string Country { set; get; }
} 
```

solr 的嵌套类合法吗？

为什么无法存储？当我删除`[SolrField("loca")]`它工作正常。

你如何存储这些类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:47:11.210

你不能在 Solr 中做嵌套类。因此，您需要将位置信息展平到 Product 类中。但是，您可以通过根据需要将数据映射到/从 Solr 中将其表示为应用程序中的嵌套类。

例如，更新 Solr 模式以存储 loca_zipcode 和 loca_country 字段，然后将它们映射到新的 SolrProduct 类中，定义如下：

```
public class SolrProduct
{
    [SolrUniqueKey("id")]
    public string Id { get; set; }

    [SolrField("manu")]
    public string Manufacturer { get; set; }

    [SolrField("cat")] // cat is a multiValued field
    public ICollection<string> Categories { get; set; }

    [SolrField("price")]
    public decimal Price { get; set; }

    [SolrField("inStock")]
    public bool InStock { get; set; }

    [SolrField("loca_zip")]
    public int Zip { set; get; }

    [SolrField("loca_country")]
    public string Country { get; set; }
} 
```

[然后，您可以使用AutoMapper](http://automapper.codeplex.com/)之类的东西将`SolrProduct`扁平类映射到`Product`具有嵌套类的`Location`类。

另一种选择是使用Solr 中的[动态字段](http://wiki.apache.org/solr/SchemaXml#Dynamic_fields)和 SolrNet 中使用 Dictionary 的动态映射支持。有关更多详细信息和示例，请参阅 SolrNet wiki 的[SolrNet - 映射](http://code.google.com/p/solrnet/wiki/Mapping)部分。

# python - Python 的实时程序声音？

> ID：12773487
> 
> 赞同：4
> 
> 时间：2012-10-07T22:41:19.727
> 
> 标签：python, audio

我想在 Python 中制作程序声音，并立即播放它们而不是将它们保存到文件中。我应该为此使用什么？我可以只使用内置模块，还是需要额外的东西？

我可能会想改变音高、音量之类的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:55:20.240

与 numpy 一起使用[`scikits.audiolab`](http://cournape.github.com/audiolab/)应该可以解决问题。 `audiolab`具有[`play`](http://cournape.github.com/audiolab/fullapi.html#scikits.audiolab.play)支持 ALSA 和 Core Audio 后端的功能。

这是一个如何使用 numpy 生成简单正弦波的示例：

```
from __future__ import division
import numpy as np

def testsignal(hz,amplitude = .5,seconds=5.,sr=44100.):
    '''
    Create a sine wave at hz for n seconds
    '''
    # cycles per sample
    cps = hz / sr
    # total samples
    ts = seconds * sr
    return amplitude * np.sin(np.arange(0,ts*cps,cps) * (2*np.pi)) 
```

要创建 5 秒 440 赫兹的正弦波并收听，您可以：

```
>>> from scikits.audiolab import play
>>> samples = testsignal(440)
>>> play(samples) 
```

请注意，这`play`是一个阻塞调用。在声音完成播放之前，控制权不会返回给您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:50:43.730

查看[这个 Python wiki 页面](http://wiki.python.org/moin/PythonInMusic)。特别是“Python 中的音乐编程”部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-12T15:34:22.747

Pyglet 可能是一个不错的选择，因为它嵌入了音频程序功能： [Pyglet/media_procedural](https://pyglet.readthedocs.io/en/pyglet-1.3-maintenance/modules/media_procedural.html)

# git - Git 致命：参考的格式无效：'refs/heads/master

> ID：12773488
> 
> 赞同：101
> 
> 时间：2012-10-07T22:41:45.913
> 
> 标签：git, dropbox

我正在使用`Dropbox`同步`git`存储库，但现在当我尝试并`push`收到错误消息时：

```
fatal: Reference has invalid format: 'refs/heads/master (MacBook-Pro's conflicted copy 2012-10-07)' 
```

因此，Dropbox 似乎检测到了冲突并创建了一个副本。好的，没问题，所以我删除了冲突的文件。尽管如此，还是得到了上面的 git 错误。

```
$ git checkout master
    M   index.html
    Already on 'master'
$ git add .
$ git commit -a -m "Cleanup repo"
    [master ff6f817] Cleanup repo
    1 file changed, 5 insertions(+), 5 deletions(-)
$ git push
    fatal: Reference has invalid format: 'refs/heads/master (MacBook-Pro's conflicted copy 2012-10-07)'
    The remote end hung up unexpectedly` 
```

我怎样才能解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2013-05-06T17:24:51.640

如果您不确定这个，请备份您的 repo，因为这些命令是不可逆的。

首先，转到您的 repo 目录。

```
cd myrepo 
```

然后递归搜索冲突文件并删除它们

```
find . -type f -name "* conflicted copy*" -exec rm -f {} \; 
```

最后，从 git 的 packed-refs 文件中删除所有“冲突”的引用

```
awk '!/conflicted/' .git/packed-refs > temp && mv temp .git/packed-refs 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-10-07T23:03:42.903

冲突的文件可能在多个地方，我会调查：

```
.git/logs/refs/remotes/origin/
.git/logs/refs/heads/
.git/refs/remotes/origin/
.git/refs/heads/ 
```

或者您可能会在`.git`子目录中到处查看：`find . -name '*conflicted*'`

或者，否则，列出活动分支`git branch -a`并删除 ( `git branch -d`) 任何可疑内容。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-29T07:36:06.233

当我的同事在 Dropbox 更新之前推送他的更改并关闭 PC 时，我们的团队也会发生这种情况。

我就这么简单地解决了。

刚刚删除了冲突的副本。（XXXX 的冲突副本 yyyy-mm-dd）

并正常拉动。

请注意，我的同事在搞砸之前进行了更改。他再次推动他的改变。这次没有关机。:)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-01T22:33:10.500

我能够从我的 .git 文件夹中删除所有冲突的文件，但我继续收到有关不再存在的文件的错误。

对我来说，解决方法是打开`.git/refs/packed_refs`并删除包含“冲突”文本的行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-30T10:46:46.240

对我来说，它给出了错误： **`fatal: Reference has invalid format: 'refs/tags/r0.2:3'`**

您可以转到**/.git/packed_refs**文件并删除该行`refs/tags/r0.2:3`

然后它开始工作。但为什么它首先发生我不知道。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-16T17:18:19.037

我遇到了同样的错误

> 致命：参考的格式无效：'refs/heads/somebranch (1)'

对于以下命令

```
git branch 
```

然后，我使用命令搜索了错误的名称（分支名称后跟 (1) ）

```
find . -name 'somebranch (1)' 
```

它显示了以下结果

> ./.git/refs/heads/somebranch (1)

这是*somebranch* IMO 的一些重复版本。所以，我通过执行删除后的查找命令来删除它

```
find . -name 'somebranch (1)' -print -exec rm -rf {} \; 
```

然后分支命令运行成功

```
git branch 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-07T22:50:49.410

尝试`git checkout master`第一次进入健康，有名的分支。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-08T05:21:56.287

我遇到了类似的错误，例如

```
fatal: Reference has invalid format: 'refs/heads/user-search-api (Sithu's conflicted copy 2016-01-08)' 
```

只需删除`.git/refs/heads/user-search-api (Sithu's conflicted copy 2016-01-08)`远程 Dropbox 存储库中的文件即可解决问题。

# android - trim() 检查不起作用并且应用程序崩溃 - Android

> ID：12773492
> 
> 赞同：0
> 
> 时间：2012-10-07T22:42:46.987
> 
> 标签：android, methods, crash, trim

我试过这段代码（相关部分..）：

```
 private EditText weightEditText,heightEditText;

    weightEditText = (EditText)findViewById(R.id.weightEditText); 
    heightEditText = (EditText)findViewById(R.id.heightEditText);

    public void onClick(View v) {
        switch (v.getId()){
        case R.id.clear: clearFields();toastClearingMessage(); break;
        case R.id.goButton: runGoButton(); break;
        }//switch
    }

    private void runGoButton() {
        if (heightWeightFieldsValuesGood() && heightWeightFieldsNotEmpty() )
            runCalculations();
        else
            toastMessageReEnterValues();
    }

    private boolean heightWeightFieldsValuesGood() {
        if (getWeight()>0 && getHeight()>0)
            return true;
        return false;
    }

    private boolean heightWeightFieldsNotEmpty(){
        if ( (weightEditText.getText().toString().trim().equals("")) || (heightEditText.getText().toString().trim().equals("")) )
            return false;
        return true;
    }
    private float getHeight() {
        return Float.parseFloat(heightEditText.getText().toString());
    }

    private float getWeight() {
        return Float.parseFloat(weightEditText.getText().toString());
    } 
```

崩溃日志：

```
10-08 01:21:54.260: W/dalvikvm(8172): threadid=1: thread exiting with uncaught exception (group=0x40020ac0)
10-08 01:21:54.260: E/AndroidRuntime(8172): FATAL EXCEPTION: main
10-08 01:21:54.260: E/AndroidRuntime(8172): java.lang.NumberFormatException: 
10-08 01:21:54.260: E/AndroidRuntime(8172):     at org.apache.harmony.luni.util.FloatingPointParser.parseFloat(FloatingPointParser.java:305)
10-08 01:21:54.260: E/AndroidRuntime(8172):     at java.lang.Float.parseFloat(Float.java:291)
10-08 01:21:54.260: E/AndroidRuntime(8172):     at com.example.bmi.calculator.MainPage.getWeight(MainPage.java:122)
10-08 01:21:54.260: E/AndroidRuntime(8172):     at com.example.bmi.calculator.MainPage.heightWeightFieldsValuesGood(MainPage.java:75)
10-08 01:21:54.260: E/AndroidRuntime(8172):     at com.example.bmi.calculator.MainPage.runGoButton(MainPage.java:63)
10-08 01:21:54.260: E/AndroidRuntime(8172):     at com.example.bmi.calculator.MainPage.onClick(MainPage.java:58)
10-08 01:21:54.260: E/AndroidRuntime(8172):     at android.view.View.performClick(View.java:2420)
10-08 01:21:54.260: E/AndroidRuntime(8172):     at android.view.View$PerformClick.run(View.java:8941)
10-08 01:21:54.260: E/AndroidRuntime(8172):     at android.os.Handler.handleCallback(Handler.java:587)
10-08 01:21:54.260: E/AndroidRuntime(8172):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-08 01:21:54.260: E/AndroidRuntime(8172):     at android.os.Looper.loop(Looper.java:123)
10-08 01:21:54.260: E/AndroidRuntime(8172):     at android.app.ActivityThread.main(ActivityThread.java:4627)
10-08 01:21:54.260: E/AndroidRuntime(8172):     at java.lang.reflect.Method.invokeNative(Native Method)
10-08 01:21:54.260: E/AndroidRuntime(8172):     at java.lang.reflect.Method.invoke(Method.java:521)
10-08 01:21:54.260: E/AndroidRuntime(8172):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
10-08 01:21:54.260: E/AndroidRuntime(8172):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
10-08 01:21:54.260: E/AndroidRuntime(8172):     at dalvik.system.NativeStart.main(Native Method) 
```

一切都运行得很好，但是如果我单击 GO 按钮而不插入任何字段值，程序就会崩溃并关闭......虽然我使用的是 trim() 方法......

顺便说一句，如果我在两个字段中输入零值，它工作正常（适当的 Toast 消息）有什么想法吗？...谢谢！:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T22:49:08.670

您使用 toString() 错误，您应该在 editText 的 getText() 方法上调用它，而不是在编辑文本本身上调用它

另外，您应该与“”进行比较，而不是与“”

在这种情况下， trim() 是 uneccesary

应该是这样的：

weightEditText.getText().toString().equals("") ...

<<<<<< 编辑>>>>>>>>

```
 private boolean heightWeightFieldsNotEmpty(){
    if ( (weightEditText.getText().toString().equals("")) || (heightEditText.getText().toString().equals("")) )
        return false;
    return true;
} 
```

<<<<<<< 编辑 2 >>>>>>>>>

```
 if (heightWeightFieldsNotEmpty() && heightWeightFieldsValuesGood())

  private float getHeight(){
        Float from_value;
        try{
            from_value = Float.parseFloat(heightEditText.getText().toString());
        } catch (NumberFormatException ex){
            from_value = 0.0f;
        }

        return from_value;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T23:39:31.180

您可能可以使用[TextUtils](http://developer.android.com/reference/android/text/TextUtils.html "文本工具")简化一些代码。

```
private boolean heightWeightFieldsNotEmpty(){
        if (TextUtils.isEmpty(weightEditText.getText()) || TextUtils.isEmpty(heightEditText.getText() )) {
            return false;
        }
        return true;
 } 
```

然后在你的`runGoButton()`方法中：

```
private void runGoButton() {
        // Reverse these since you need to check for empty first.
        if (heightWeightFieldsNotEmpty() && heightWeightFieldsValuesGood())
            runCalculations();
        else
            toastMessageReEnterValues();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T22:46:40.870

一个空字符串，如果修剪，将不等于包含空格字符的字符串 - 从两个*相等*检查中删除空格

此外，在尝试将值转换为数字之前，您应该检查字段是否为空。即你的支票应该是：

```
if (heightWeightFieldsNotEmpty() && heightWeightFieldsValuesGood()) 
```

注意：我还去掉了多余的*==true*，因为它们不是正确性所必需的，并且它们没有增加代码的易读性。通过将“notEmpty”测试放在首位，如果失败，代码将不会尝试运行“valuesGood”测试，从而避免对空字符串进行数字测试

# c++ - 澄清要重新。C++ 类型特征

> ID：12773494
> 
> 赞同：1
> 
> 时间：2012-10-07T22:43:15.333
> 
> 标签：c++, templates, c++11, typetraits

似乎要测试 const-ness，必须测试模板参数，但要测试 rvalue-ness，必须测试实际参数。（这是使用 VC++ 2012。）这段代码说明了我的意思：

```
#include <type_traits>
#include <string>
#include <iostream>

using namespace std;

template<class T>
void f(T& x) {
    cout << "f() is_const<T> and is_const<decltype<x)>" << endl;
    cout << is_const<T>::value << endl; // Prints 1 when arg is const
    cout << is_const<decltype(x)>::value << endl; // Prints 0 when arg is const
}

template<class T>
void g(T&& x) {
    cout << "g() is_const<T> and is_const<decltype<x)>" << endl;
    cout << is_const<T>::value << endl; // Prints 0 when arg is const
    cout << is_const<decltype(x)>::value << endl; // Prints 0 when arg is cons
    cout << "g() is_rvalue_reference<T> and is_rvalue_reverence<decltype(x)>" <<endl;
    cout << is_rvalue_reference<T>::value << endl; // Prints 0 when arg is rvlaue
    cout << is_rvalue_reference<decltype(x)>::value << endl; // Prints 1 when arg is rvalue
}

int main()
{
    const std::string str;
    f(str); // const argument
    cout << endl;
    g(std::string("")); // rvalue argument
    return 0;
} 
```

我很难理解为什么会这样。有人可以解释一下，或者给我指出一篇解释它的文章吗？如果需要，我将深入研究 C++11 标准。有谁知道相关的部分吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T22:53:49.107

原因是你误解了一些事情。`x`永远不会出现`const`在任何这些示例中，仅仅是因为没有`const`引用类型（无论如何您都无法更改引用所指的内容）。在`is_const<T>`您基本上忽略了您声明`x`为`T&`.

rvalue ref 测试也存在类似的误解。`T`in （`T&&`称为通用引用，顺便说一句）将`U&`在您传递左值和`U`传递右值时推导出来。测试时`is_rvalue_reference<T>`，您再次忽略了您声明`x`为`T&&`. 在测试时`is_const<T>`，您没有考虑`T`将成为参考的事实，如上所述，它永远不会是`const`。

正确的测试`g`是

*   `std::is_const<typename std::remove_reference<T>::type>::value`和
*   `std::is_rvalue_reference<T&&>::value`

# git - 在 git 中签出远程分支

> ID：12773495
> 
> 赞同：1
> 
> 时间：2012-10-07T22:43:16.650
> 
> 标签：git, branch, commit

我已经设置`/var/www/website`为（非裸）回购，并有我的裸回购的更新后挂钩：

```
#!/bin/sh

echo
echo "**** Pulling changes into Live [Hub's post-update hook]"
echo

cd /var/www/website || exit
unset GIT_DIR
git pull hub master

exec git-update-server-info 
```

因为我想在推送后立即看到网站上的变化。

但是，如果我创建远程分支，在我的本地仓库中使用它，然后在其中提交和推送更改，我无法在网站上看到它们（我总是看到 master）。

有没有办法在远程（非裸）回购中进行结帐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:38:19.663

post-update 挂钩获取所有已更新的引用的名称。这些将是位置参数（`$1`、`$2`等）。你必须决定如何处理每一个。

例如，这个有点傻的更新后脚本：

```
#! /bin/sh

for ref do
    case $ref in
    refs/heads/*) echo "a branch ($ref) was updated";;
    refs/tags/*) echo "a tag ($ref) was updated";;
    *) echo "something I don't understand ($ref) was updated";;
    esac
done 
```

只需打印出所有更新的全名。

让它不那么愚蠢，假设我们想要捕捉分支更新并用它们做一些有用的事情。用更复杂的东西替换第一个回声：

```
 refs/heads/*) branch_update $ref;; 
```

当然，我们必须定义一个 branch_update 函数。这是新脚本（它仍然没有做任何事情，但有明显的地方可以做某事）：

```
#! /bin/sh

branch_update() {
    local shortname=${1#refs/heads/}
    echo "branch $shortname is being updated"
    case $shortname in
    master) echo "master is updated, do something";;
    work) echo "work branch is updated, do something else";;
    *) echo "it's not a magic branch, do nothing";;
    esac
}

for ref do
    case $ref in
    refs/heads/*) branch_update $ref;;
    refs/tags/*) echo "a tag ($ref) was updated";;
    *) echo "something I don't understand ($ref) was updated";;
    esac
done 
```

另外：您的问题的措辞方式表明您并没有像以前那样“在 git 中思考”。:-) 当您进行推送时（从您自己的某个 repo 副本到某个 repo 的其他副本，无论是否裸露），如果您改变观点，您可能会发现结果更容易理解。您可以从“我在推动”开始，然后您可以将远程仓库想象为其他演员，让我们给他一个名字并称他为“鲍勃”，然后想想鲍勃看到了什么。从 Bob 的角度来看，而不是“Yekver 正在推动东西”，Bob 认为：“我，Bob，正在从那边的 Yekver 人那里得到一些东西并将其放入我的 repo。我正在添加标签 refs/tags/v1。 1，我正在接受一些提交并将它们放在我的 refs/heads/master 中，我'

这里的关键概念是，就 git 所做的而言，*一切都是本地的*。从 Bob 的角度来看，Bob 的 repo 是本地的。一些名叫 Yekver 的人可能有一个基于此的 repo，但 Bob 的副本是 Bob 的。Bob 使用 Bob 的本地 repo 做本地事情，当你在这些钩子脚本中工作时，你就是“成为 Bob”。

# html - 获取背景图像以在某个点停止平铺

> ID：12773496
> 
> 赞同：0
> 
> 时间：2012-10-07T22:43:29.530
> 
> 标签：html, css

我正在尝试将我的 PSD 文件转换为代码，但我遇到了这些标题的问题。标题将包含标题的名称，以及从名称末尾的右侧延伸到 div 末尾的水平紫色条。我正在使用[Foundation](http://foundation.zurb.com/)（响应式框架），因此我给标题设置了三列的宽度。我已经编写了一些代码，但我不确定如何让紫色线不出现在标题名称下。

目前，我已将紫色线保存为可平铺图像并将其设置为 h3 标签的背景。我曾尝试使用背景位置，但我无法从没有出现在标题名称下的行中获得。

这是部分 PSD 文件的屏幕截图。`Hours`澄清一下，`Phone`、 和旁边的紫色条`Location`不是供用户输入任何信息的；它是用来分隔不同区域信息的装饰件。

![在此处输入图像描述](../Images/e8d825d02385d80e2d61a1744648d0e0.png)

我的代码：

```
<div class="row">
    <div class="three columns offset-by-one contact">
        <h3>Hours</h3>
    </div>
</div>

.contact h3 {
    color: #444;
    background: url(../img/purpleLine.jpg) bottom right repeat-x;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:47:57.100

只需制作一个底部边框为您想要的紫色和厚度的 div。然后将它向左浮动，这会给你想要的效果。如果需要，您还可以在该 div 内放置一个文本框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T02:31:30.350

这将是使用 HTML 元素的最佳时机，`<span>`因为这几乎就是它的本意。在元素之后，添加`<span></span>`，为其指定所需的宽度，并为 span 元素设置背景图像。不确定您的框架类将如何用于定义宽度，因此我只是在该部分中输入了“whatever”。您甚至可以为 span 元素分配一个类来定义其宽度。

HTML：

```
<div class="row">
    <div class="three columns offset-by-one contact">
        <h3>Hours</h3><span></span>
    </div>
</div> 
```

CSS：

```
.contact h3 {
    color: #444;
}
.contact span {
width:whatever;
background: url(../img/purpleLine.jpg) bottom right repeat-x;
} 
```

# c - 在 C 中读取汇编文件

> ID：12773497
> 
> 赞同：-5
> 
> 时间：2012-10-07T22:43:49.187
> 
> 标签：c, parsing, assembly, mips

我有一个项目，我必须用 C（第一个里程碑）制作一个解析器，它读取一个程序集文件，例如

```
goto:

goto: 

L.D F0,0(R1) #### comments 

ADD.D F4,F0,F2 #### more comments

S.D 0(R1),F4  ###

DSUBUI R1,R1,8 ####

BNEZ R1,goto 
L.D F0 0X00A0100 
```

可能有 10000 条指令（之后......）

我正在考虑通过使用数组来做到这一点......有没有更好的方法来做到这一点？我还必须使用从文件中读取的命令来模拟[Tomasulo 的算法。](http://en.wikipedia.org/wiki/Tomasulo_algorithm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T01:59:43.460

对于这样一个一般性问题，您不太可能在这里得到太多帮助。

现有的 MIPS 汇编器可以进行解析，这可能会为您提供一些想法，或者至少提供一些更好的问题：

[http://code.google.com/p/mips-assembler-unb/source/browse/trunk/src/MIPS+Assembler/](http://code.google.com/p/mips-assembler-unb/source/browse/trunk/src/MIPS+Assembler/)

...但很明显，如果您尝试将类似的东西直接用于课堂项目，您将为自己设置一个痛苦的世界！

如果你要被评分，最好的指导来源将来自最终给出评分的人。承认你的困惑并直接寻求帮助。但是，请使用非常清晰的地图，说明您*确实*理解了什么，以及您的理解停止的点。

*（这个问题并没有表现出那种清晰性，如果你以同样的方式向他们提出问题，你的老师可能会不热情——就像这里的社区一样。）*

# joomla2.5 - joomla：通过控制器扩展发布方法

> ID：12773499
> 
> 赞同：1
> 
> 时间：2012-10-07T22:44:39.703
> 
> 标签：joomla2.5

我认为我的方法可能会偏离，但这似乎是一种普遍的需求，所以我希望我不会离得太远。任何输入表示赞赏。单击“发布/取消发布”按钮时，我想在核心的“发布”方法完成后阅读“getTask（）”并采取自己的行动。这是我开始的地方：

在控制器中，在我自己的“发布”方法中，我调用 parent::publish。到目前为止没有问题。然后我想读取 getTask 并将其传递给模型函数。

CONTROLLER_CLASS 扩展 jCONTROLLER_ADMIN

```
public function publish()
{
    parent::publish();

    $model = $this->getModel();

    $myPublish = $this->getTask();
    $model->modelVariable = $myPublish;
    //or
    $model->doCustomPublishWork();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:25:50.807

这似乎效果很好。

```
public function publish()
{
    $publishAffliate = $this->getTask();

    $cid = JRequest::getVar('cid');//affiliates DB record ID.

    $fileName = "C:\wamp\bin\apache\apache2.4.2\conf\affilatesTest.txt";
    $fHandle = fopen($fileName, 'a');

    switch($publishAffliate)
    {
        case 'publish':
            fwrite($fHandle, "\npublished site ID = ". $cid[0]);
            break;
        case 'unpublish':
            fwrite($fHandle, "\nunpublished site ID = ". $cid[0]);
            break;
    }

    parent::publish();

} 
```

# android - 行中的 SQLite 计数

> ID：12773500
> 
> 赞同：-1
> 
> 时间：2012-10-07T22:44:42.600
> 
> 标签：android, sql, sqlite, android-sqlite

想象一下，我有一列这样的表格：

```
b
-
1
1
1
2
3 
```

我想获得

```
a | b
-----
1 | 3
2 | 1
3 | 1 
```

表示该行的货币。我读过这可以完成这项工作：

```
select b, count(b) from table group by b 
```

然而，我得到的结果就是这样：

```
3 | 5 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:16:34.173

如前所述，SQL 看起来不错。我在这里使用以下内容进行了快速测试：

```
create table #temp
(num int)

insert #temp
select 1 union all
select 1 union all
select 1 union all
select 2 union all
select 3 

select Num, COUNT(num) as Occurances from #temp group by num

drop table #temp 
```

这给出了以下结果集：

```
Num Occurances
1       3
2       1
3       1 
```

将上述内容与您的整个代码进行比较，包括表创建等。

# php - 通常将 WordPress 与网站集成

> ID：12773503
> 
> 赞同：1
> 
> 时间：2012-10-07T22:45:00.170
> 
> 标签：php, wordpress, integration

所以，我读过[The Loop](http://codex.wordpress.org/The_Loop)并且掌握了窍门。（我创建了一个列出 3 个最新帖子的页面、一个显示页面（而不是帖子）的页面，等等。）

但是，为了将 WordPress 博客集成到现有网站中，我必须复制所有不同类型的页面（帖子列表、帖子本身、页面等），这似乎很愚蠢。

**有这样做的通用方法吗？**

* * *

完整的想法是这样的。

*   博客本身（带有丑陋的默认模板）安装在[http://blog.example.com](http://blog.example.com)。
*   我想将博客集成到现有站点中，网址为[http://example.com/blog](http://example.com/blog)。
*   我正在做一个`mod_rewrite`转发整个查询字符串的操作，例如[http://blog.example.com/?p=7](http://blog.example.com/?p=7)被重写为[http://example.com/blog?p=7](http://example.com/blog?p=7)。

现在，在我位于[http://example.com/blog](http://example.com/blog)的 PHP 代码中，我想做这样的事情：

```
query_posts($_GET);

// display results

wp_reset_query(); 
```

这就是我卡住的地方。基本上，我想根据查询字符串的指示，在我的网站上准确显示默认 WordPress 模板的“内容”区域中的内容。几乎就像我只是在使用一个`iframe`. 我宁愿不必解析查询字符串来确定我是否必须遍历这个或那个或关闭`$more`全局等等。

我错过了什么？

相反，我应该在[http://example.com/blog](http://example.com/blog)上安装博客并创建一个模仿该网站的模板吗？这看起来很复杂，所以我没有走这条路，但也许有人应该改变主意。

感谢任何帮助，包括有关替代设计的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T22:53:27.483

您是否考虑过将博客输出为完整的 rss/ 将博客输出为 json，然后以这种方式拉取它？

# iphone - 使用子视图创建新视图，获取图形上下文会破坏原始视图？

> ID：12773504
> 
> 赞同：0
> 
> 时间：2012-10-07T22:45:46.963
> 
> 标签：iphone, xcode, image, uiview

我希望这个标题有点意思。

我有 UIView（在 IB 中创建），我在其中添加东西（图像）。然后，我有一个带有一些文字的 UILabel。现在，我想用它制作一个 UIImage，我喜欢这样：

```
UIView *comp = [[UIView alloc] initWithFrame:self.previewView.frame];
    [comp addSubview:self.previewView];
    [comp addSubview:self.lblCaption];

    UIGraphicsBeginImageContextWithOptions(comp.bounds.size, NO, 1.0);
    [comp.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

self.previewView 和 self.lblCaption 都是在 IB 中创建的。previewView 只是一个屏幕填充视图。

代码块在点击按钮后在 IBAction 中执行。

效果很好，我得到了预期的图像并且可以进一步处理它。

但是在那之后，«self.previewView»的内容就没有了？当我做一个 NSLog 时，一切似乎都在那里，但它不再在屏幕上可见。

有谁知道这里发生了什么？

[编辑]

正如下面的答案所述，该视图之前已添加到 self.view 中，因此当我将其添加到 comp 时将其删除。解决方案非常简单，实际上，我将代码更改为以下内容：（创建了一个返回 UIImage 的函数。这比在代码中执行要干净一些......

```
-(UIImage *)imageFromView:(UIView *)theView andLabel:(UILabel *)theLabel{

    UIGraphicsBeginImageContextWithOptions(comp.bounds.size, NO, 1.0);
    [theView.layer renderInContext:UIGraphicsGetCurrentContext()];
    [theLabel.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return viewImage;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:05:08.403

我只是在猜测可能的情况......

假设您`self.previewView`在其他视图上显示，例如`self.view`。

当您添加`self.previewView`到 时`comp`，它可能已从 中删除`self.view`。（考虑到 UIView.superview 只是单个实例，我认为这很有可能）。

如果是这种情况，在获取图像后重新添加`self.previewView`将`self.view`解决问题。

# asp.net-mvc - ASP.NET MVC 3 视图，超类对子类不起作用？

> ID：12773505
> 
> 赞同：1
> 
> 时间：2012-10-07T22:45:47.277
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-membership, covariance

我有以下课程 -

```
public abstract class BusinessObject { }
public abstract class Form: BusinessObject { }
public abstract class BillableForm: Form { }
public class MembershipForm: BillableForm { }

public abstract class Dto<T>: where T: BusinessObject { }
public abstract class InboxDto<T>: Dto<T> where T: Form { }
public class MembershipFormDto: InboxDto<MembershipForm> { } 
```

我有以下看法——

```
membershipform.cshtml:
@model AdminSite.Models.MembershipFormDto
@{
    Layout = "~/Views/Inbox/Shared/_LayoutForm.cshtml"
}

_LayoutForm.cshtml:
@model InboxDto<Form> 
```

当我登陆 membersform.cshtml 页面时，我收到以下异常说明：

传入字典的模型项的类型为“AdminSite.Models.MembershipFormDto”，但该字典需要类型为“AdminSite.Infrastructure.Models.InboxDto`1[BusinessLogic.Inbox.Form]”的模型项。

从我所知道的一切来看，`MembershipFormDto`IS-A`InboxDto`类型`MembershipForm`，其中`MembershipForm`IS-A `Form`。是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T23:14:10.920

结果证明这是一个协方差问题。

我添加了以下界面 -

```
public interface IInboxDto<out T> 
```

并修改了 InboxDto 类以实现该接口 -

```
public abstract class InboxDto<T>: Dto<T>, IInboxDto<T> where T: Form { } 
```

简而言之，协方差正在从定义较多的类型变为定义较少的类型。专门用定义较少的引用引用定义较多的对象。编译器抱怨的原因是它阻止了这样的场景：

```
List<String> instanciatedList = new List<String>;
List<Object> referenceList = instanciatedList;
referenceList.add(DateTime); 
```

最后一行是有道理的，一个`DateTime`IS-A `Object`。我们已经说过是`referenceList`一个`List`。`Object`但是它被实例化为`List`of `String`。A `List`of`Object`比 a `List`of更宽松`String`。突然间，我们的保证`new List<String>`被忽略了。

然而，定义的 out 和 in 关键字`Interface`告诉编译器放松，我们知道我们在做什么并理解我们正在做什么。

[更多信息。](http://www.codeproject.com/Articles/253417/Understanding-Covariance-and-Contravariance-in-Net)

# css - 从电子邮件中删除 Yahoo 的蓝色虚线链接

> ID：12773506
> 
> 赞同：0
> 
> 时间：2012-10-07T22:45:51.123
> 
> 标签：css, html-email

`<p>`雅虎一直在我们的 HTML 电子邮件中以纯文本在标签内插入蓝色虚线链接。它似乎主要是在地点这样做。

我尝试使用内联样式来覆盖它，例如：

```
 style="font-family: arial, helvetica, sans-serif; color: #808080; font-size: 8pt; text-decoration:none; outline: none; -moz-outline-style: none;" 
```

我对此进行了一些研究，似乎可能无法删除它们，但我只是想确认一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:00:07.703

您之前是否尝试过将以下内容添加到 CSS 中`</head>`：

```
.yshortcuts {border-bottom: none !important; color: #000000 !important} 
```

[在Exact Target 的博客](http://blog.exacttarget.com/blog/email-design-9/design-tip-of-the-week-why-does-yahoo-put-additional-links-in-my-email)上有更多关于此的信息。

# c - read() 在套接字编程中没有阻塞

> ID：12773509
> 
> 赞同：9
> 
> 时间：2012-10-07T22:46:23.460
> 
> 标签：c, linux, sockets, network-programming

我有一个服务器每 5 秒向客户端发送一次数据。我希望客户端阻止 read() 直到服务器发送一些数据然后打印它。我知道 read () 默认是阻塞的。我的问题是我的客户没有阻止 read()。这很奇怪，这似乎不是一个正常的问题。

我的代码在无限循环中打印“什么都没有回来”。我在一台linux机器上，用c编程。我的代码片段如下。请指教。

```
while(1)
{
    n = read(sockfd, recvline, MAXLINE);
    if ( n > 0) 
    {
        recvline[n] = 0;    
        if (fputs(recvline, stdout) == EOF)
            printf("fputs error");
    }
    else if(n == 0)
        printf("Nothing came back");
    else if (n < 0)
        printf("read error");
}
return; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T04:45:45.583

可能有几个原因，并且在不同的地方可能有几个例外：

1.  检查您创建的套接字：

    > ```
    > sockfd=socket(AF_INET,SOCK_STREAM,0);  
    > if (sockfd==-1) {
    >     perror("Create socket");
    > } 
    > ```

2.  您还可以在使用之前显式启用阻塞模式：

    > ```
    > // Set the socket I/O mode: In this case FIONBIO  
    > // enables or disables the blocking mode for the   
    > // socket based on the numerical value of iMode.  
    > // If iMode = 0, blocking is enabled;   
    > // If iMode != 0, non-blocking mode is enabled.
    > ioctl(sockfd, FIONBIO, &iMode); 
    > ```

    或者你可以使用[`setsockopt`](http://linux.die.net/man/2/setsockopt)如下：

    ```
     struct timeval t;    
     t.tv_sec = 0;
     tv_usec = 0;
     setsockopt(
          sockfd,     // Socket descriptor
          SOL_SOCKET, // To manipulate options at the sockets API level
          SO_RCVTIMEO,// Specify the receiving or sending timeouts 
          const void *(&t), // option values
          sizeof(t) 
      ); 
    ```

3.  检查读取函数调用（错误原因）

    > ```
    > n = read(sockfd, recvline, MAXLINE);
    > if(n < 0){  
    >     perror("Read Error:");
    > } 
    > ```

4.  还要**检查服务器代码**！：

    > 1.  愿您的服务器发送一些空白（不可打印，空，输入）章程。而你对此一无所知。错误你的服务器代码。
    >     
    >     
    > 2.  或者您的**服务器在您的客户端可以读取之前终止**。

5.  **一件更有趣的事**，试着去理解：

    > 当您`write()`在服务器上调用 N 时，不需要`read()`在另一端调用N。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T05:12:35.633

Greg Hewgill 已经写过评论：EOF（即明确停止写入，无论是 via`close()`还是 via `shutdown()`）将通过`recv()`return 0 与接收方通信。所以如果你得到 0，你就知道赢了'不是任何数据，您可以终止读取循环。

如果您启用了非阻塞并且没有数据，您将获得`-1`并`errno`设置为`EAGAIN`or `EWOULDBLOCK`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T05:02:01.940

MAXLINE 的价值是多少？

如果值为 0，那么它也将返回 0。否则，正如 Grijesh Chauhan 提到的，将其明确设置为阻塞。

或者，您也可以考虑在可以指定阻塞和非阻塞的情况下使用 recv()。它有一个选项，MSG_WAITALL，它将阻塞直到所有字节到达。

```
n = recv(sockfd, recvline, MAXLINE, MSG_WAITALL); 
```

# html - 使用 SVG 动画元素有什么好处？

> ID：12773518
> 
> 赞同：1
> 
> 时间：2012-10-07T22:47:58.300
> 
> 标签：html, svg, css-animations

有许多方法可以为 SVG 元素设置动画。最直接的方法是使用 JavaScript 定期更新 SVG 元素的属性。或者，您可以使用带有关键帧样式属性动画的 CSS3 动画。还有第三种选择是使用 SVG 中内置的动画属性。

SVG 中的动画元素是否提供了优于其他方法的任何优势，如果是这样，这是否有理由支持这种动画风格？我不确定这些元素的唯一目的是提供动画的独立 SVG 文档，或者以这种方式描述动画是否会比其他方法产生性能优势。

# python - Python将排序字典转换为列表？

> ID：12773519
> 
> 赞同：1
> 
> 时间：2012-10-07T22:48:04.790
> 
> 标签：python, list, dictionary

我有两个清单

```
L1 = ['tom', 'jerry', 'spike', 'fido', 'donald', 'mickey']
L2 = [3,5,7,6,9,3]
dictionary = dict(zip(L1, L2))
print dictionary

sorted_friends = sorted(dictionary.iteritems(), key = operator.itemgetter(1), reverse= True)
print sorted_friends 
```

基本上，我正在从 L1 和 L2 创建一个字典。 `{'mickey': 3, 'tom': 3, 'jerry': 5, 'donald': 9, 'fido': 6, 'spike': 7}` 按值排序（反向）排序，这给了我：`[('donald', 9), ('spike', 7), ('fido', 6), ('jerry', 5), ('mickey', 3), ('tom', 3)]`

我想要一个前 3 个键的列表：like`[donald,spike,fido]` 但问题是，如果我使用任何我知道的方法，比如转换为 dict() 等，它会破坏排序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T22:51:35.507

无需使用字典；只需创建元组列表并按适当的字段对其进行排序。

```
sorted(zip(L1, L2), key=lambda x: x[1], reverse=True)[:3] 
```

您当然可以随意使用`operator.itemgetter(1)`代替 lambda。

如果你只是想要事后的名字，你可以修改这个：

```
[a for a,_ in sorted(zip(L1, L2), key=lambda x: x[1], reverse=True)][:3] 
```

* * *

请注意，您还可以通过简单地颠倒顺序来方便地避免必须指定自定义排序函数：

```
[b for _,b in sorted(zip(L2, L1), reverse=True)][:3] 
```

这是有效的，因为元组的默认排序顺序根据它们的第一个元素对它们进行排序，然后是它们的第二个元素，依此类推——因此它将首先按值排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T00:39:32.067

如果您只想要最大的 3 个，为什么不直接使用[`heapq`](http://docs.python.org/library/heapq.html#heapq.nlargest)？

```
>>> L1 = ['tom', 'jerry', 'spike', 'fido', 'donald', 'mickey']
>>> L2 = [3,5,7,6,9,3]
>>> dictionary = dict(zip(L1, L2))
>>> import heapq
>>> heapq.nlargest(3, dictionary, key=dictionary.get)
['donald', 'spike', 'fido'] 
```

也可以，但是跳过创建字典有点棘手

```
>>> heapq.nlargest(3, L1, key=lambda x, i2=iter(L2): next(i2))
['donald', 'spike', 'fido'] 
```

# javascript - 选项更改时文本输入不会更改

> ID：12773521
> 
> 赞同：0
> 
> 时间：2012-10-07T22:48:36.197
> 
> 标签：javascript, jquery

我在这里有一个小提琴：http: [//jsfiddle.net/ybZvv/43/](http://jsfiddle.net/ybZvv/43/)

我遇到的问题是文本输入没有改变。请按照下面小提琴中的步骤操作，以便您了解发生了什么：

1.  当您打开小提琴时，单击“添加问题”按钮，这将添加一个表格行，将控件从顶部复制到表格行中。

2.  在表格行中单击“Open Grid”并选择按钮 5。您将看到 AE 下方出现 5 个字母按钮。

3.  通过单击打开所有字母按钮（它们应该变为绿色，表示按钮已打开）

4.  您将在小提琴的底部看到它显示了打开的按钮的每个值的所有文本输入。这可以。

5.  问题就在这里。如果您返回表格行并再次单击“Open Grid”链接，但这次选择“3”，您将看到字母按钮变为 AC。现在字母 D 和 E 没有显示，所以它们被关闭了。但问题是，如果你走到小提琴的底部，仍然显示文本输入表单 D 和 E，它们应该被删除。

所以我的问题是：**在小提琴中需要改变什么，以便当用户改变他们的选项类型时，它只显示那些在选项改变后仍然打开的按钮的文本输入？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T23:03:01.463

当您选择一个选项时，您的代码会清除数字框并且字母会更改好。

您应用于具有“answerBtns 答案”类的字母的逻辑也需要应用于底部的字母。当您获得另一个选择时，您必须应用一个类并在 javascript 中进行处理。

# javascript - 加拿大邮政编码的javascript正则表达式

> ID：12773523
> 
> 赞同：8
> 
> 时间：2012-10-07T22:48:47.740
> 
> 标签：javascript, regex

> **可能重复：**
> [加拿大邮政编码验证](https://stackoverflow.com/questions/1146202/canada-postal-code-validation)

我需要 javascript 正则表达式来验证加拿大邮政编码。加拿大的邮政编码格式为 ' `A1A 1X1' or 'a1a1x1'`. 但是它不包括字母 D、F、I、O、Q 或 UI，但这些字母在 C# 中很少见。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-07T23:12:45.047

```
function checkPostal(postal) {
    var regex = new RegExp(/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]( )?\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i);
    if (regex.test(postal.value))
        return true;
    else return false;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-07T22:54:31.847

由于例外词没有共同之处，因此应将有效词一一写出来。

```
[ABCEGHJKLMNPRSTVWXYZ] 
```

后跟一个数字

```
\d 
```

而这三遍

```
{3} 
```

最后我们添加“i”表示不区分大小写

```
var regex = /([ABCEGHJKLMNPRSTVWXYZ]\d){3}/i; 
```

# java - k-最短（替代）路径算法，java 实现

> ID：12773525
> 
> 赞同：9
> 
> 时间：2012-10-07T22:49:40.640
> 
> 标签：java, algorithm, graph, mathematical-optimization, shortest-path

您能否推荐任何实现 k-shortest 算法的 java 库 -> 寻找替代方法，而不是有向多重图中唯一最短的方法？

我只发现了 JGraphT 但实际上存在错误（我提交了）但我想修复它需要很多时间，还有其他可用的实现吗？除了 JGraphT，我只发现了小型单人项目：/

或者很难修改 Disjktra 最短路径算法以显示替代路径？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T03:40:48.180

2个可能的选项：

选项 1。`class KshortestPath`来自[MascOpt 包](http://www-sop.inria.fr/mascotte/mascopt/release/docs-1.2/mascoptLib-1.2/mascoptLib/algos/abstractalgos/KShortestPath.html)的 Java 实现 k 最短路径是一个不错的选择。

选项 2。您也可以从[code.google.com](http://code.google.com/p/k-shortest-paths/downloads/detail?name=KShortestPaths_Java_v2.3.zip)尝试这个 这似乎是一个人的努力，但好在算法是共享的：日元排名 - 详细信息在这里。（[http://www.ohloh .net/p/k-最短路径](http://www.ohloh.net/p/k-shortest-paths)）

**注意**：在给定图中找到所有节点对之间的最短路径是一个不同的问题。[请参阅有关Dijkstra 与 Floyd-Warshall 的](https://stackoverflow.com/questions/1846836/the-best-shortest-path-algorithm)这个 SO 问题。

另请注意，`k-shortest paths`对于丰富的图，往往是（Dijkstra）最短路径的轻微变化 - 最短路径上的顶点之间的替代路径，成本略高。

我知道 OP 要求 Java 实现，但如果人们可以选择并且 R 是一个选项，那么来自 CRAN 的`kBestShortestPaths` [包](http://cran.r-project.org/web/packages/kBestShortestPaths/kBestShortestPaths.pdf)也是一个非常好的选择。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T20:23:42.167

找到 k 最短路径是相关的，但与替代路径的问题并不完全相同。好的替代路径更复杂。[阅读](http://algo2.iti.kit.edu/1806.php)其他类似方法的概述：

*   k-最短路径
*   帕累托最优
*   高原法
*   处罚方式

[高原方法在这里](http://www.camvit.com/camvit-technical-english/Camvit-Choice-Routing-Explanation-english.pdf)有点说明。

如果您可以阅读德语，那么[这个讲座很好](http://i11www.iti.uni-karlsruhe.de/_media/teaching/sommer2012/routenplanung/vorlesung12.pdf)：

*   例如关于时间或距离的优化 => 问题：缺少有趣的替代方案
*   不同的路径=>同样的问题
*   k-最短路径 => 问题：真正的替代方案可能不在前 1000 条路径下

第 5 页

所以直觉告诉我们：另一种选择应该有几乎相同的距离或时间。但应该有很大不同。所以第一个想法：找到一条最小化长度和相似性的路径。问题：可能存在局部弯路。

第 6 页

我们引入第三个标准：*局部最优性*：每个短子路径都需要是最短路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T23:44:58.400

之前也有过类似的请求，不过是在 StackOverflow 上寻找所有的路径。 [使用 DFS 查找图中的所有路径](https://stackoverflow.com/questions/9803143/find-all-paths-in-a-graph-with-dfs)

希望这会有所帮助，它得到了回答，但不是确切的解决方案，而是更多的指南

# javascript - 在不首先创建实例的情况下引用方法/使用 jQuery 或任何 javascript 映射函数映射方法

> ID：12773527
> 
> 赞同：3
> 
> 时间：2012-10-07T22:50:05.147
> 
> 标签：javascript, jquery, methods, map, prototype

我有这个：

```
var Coords = function(x, y){
        this.x = x;
        this.y = y;
    }

Coords.prototype.toArray = function(){
    return [this.x, this.y];
} 
```

现在我有一个 Coords 对象数组。我想使用 toArray 方法将每个 Coords 实例转换为数组。我可以编写一个循环，但我宁愿使用 $.map，因为它更短且更具可读性。不幸的是，这：

```
return $.map(coords_array, Coords.prototype.toArray); 
```

根本不起作用。它只是停止执行。问题可能是关于如何独立于任何对象引用方法。在不首先创建实例的情况下指向方法的任何方式？或者将 $.map 与方法一起使用？

感谢您的见解。

编辑：好吧，事实上，它并没有停止执行（这来自另一个问题）而是`$.map(coords_array, Coords.prototype.toArray);`返回[null，null，null，null，null ...]。我觉得这种行为很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T22:52:51.400

尝试类似：

```
return $.map(coords_array, function(val, i) { val.toArray(); }); 
```

有关 jQuery 的 map 函数的更多参考，请参阅[此处](http://api.jquery.com/jQuery.map/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T23:04:05.270

显然，`$.map`不会将上下文（this）设置为当前正在处理的元素（例如`$.each`）。

您可以使用包装器：

```
$.map(coords_array, function(coord) { return coord.toArray(); }); 
```

或扩展该`toArray()`方法以也使用第一个参数：

```
Coords.prototype.toArray = function() {
    var self = this instanceof Coords ? this : arguments[0];
    return [self.x, self.y];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T23:25:25.093

原因是：

```
> $.map(coords_array, Coords.prototype.toArray); 
```

不能按预期工作是您将函数的引用传递给`map`，因此当它被调用时，其`this`关键字未设置为实例并且默认为全局对象（或在 ES5 严格模式下未定义）。你应该能够做到：

```
$.map(coords_array, function(item, index) {
    Coords.prototype.toArray.call(item);
}); 
```

以便将函数`this`设置为实例。

### 编辑

见乔丹的回答。

# jquery - jQuery 背景图像“淡入”动画

> ID：12773529
> 
> 赞同：1
> 
> 时间：2012-10-07T22:50:35.780
> 
> 标签：jquery, image, animation, background

有人可以帮我吗？我有一个网站，其图像设置为“body”元素的背景。我需要创建像“淡入”这样的效果。

这是网站[http://www.ladycup.eu/](http://www.ladycup.eu/)。

如果缩小，您可以看到主内容框侧面的叶子。那就是图像，如果您知道我的意思，我需要它从内容框下方“生长”。我已经阅读了很多关于这个主题的建议——比如在背景中创建一个带有这个图像的 div 等等，但在这种情况下我不能这样做。如果有任何帮助，我将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:12:10.563

我已经检查了该网站，但我看不到正文的背景，无论如何，如果我有你的问题，你希望正文的背景图像淡出并在内容之上增长，如果是这样，

使用 CSS3，定义一个类并随心所欲地调用它，让我们称它为 ani

```
.ani {
    -moz-transition: all 0.5s ease;
    -webkit-transition: all 0.5s ease;
    -ms-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    transition: all 0.5s ease;
} 
```

并在您的 HTML 代码中将此类添加到正文中`<body class="ani">`

最后一件事，将背景添加到主体，并在加载时更改不透明度

```
<script>
$(document).ready(function(){
   $('#Body').css('opacity', 0.1);
});
</script> 
```

# java - 忽略空格，空格

> ID：12773530
> 
> 赞同：2
> 
> 时间：2012-10-07T22:50:39.263
> 
> 标签：java, java.util.scanner

有谁知道我怎样才能让扫描仪忽略空间？我想输入名字和第二个名字，但扫描仪不让我输入，我想保存全名

```
String name;

System.out.print("Enter name: ");
name = scan.next(); //Ex: John Smith

System.out.println(name); 
```

编辑：新问题.. 在我的扩展程序中使用 nextLine 时，nextLine 只是忽略了整个问题并继续前进，没有机会扫描名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T22:56:08.013

`Scanner#next()`在空格周围分割线。 `Scanner.nextLine()`没有，因此留下空格。

```
name = scan.nextLine(); //Ex: John Smith 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T22:53:06.350

使用`scanner.nextLine()`which 读取整行，而不是`scan.next();`

例子：

```
name = scan.nextLine(); 
```

阅读[Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextLine%28%29)类的 oracle 文档以获取可用方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T22:54:03.537

`Scanner.next`使用空格分隔，以读取整行，您可以使用：

```
name = scan.nextLine(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-07T22:57:37.383

好吧，首先是您的 System.out.print(); 通话有缺陷。里面的一切都必须在引号内 `System.out.print("Enter name: ");`

`scan.next()`获取流中的下一个字符，而`scan.nextLine()`获取下一行（由 EOL 字符终止），这可能对您更有帮助。

之后，您可以创建一个单词数组，就像 `String[] broken = name.split(" ");` 它将您输入的所有单词放入以空格分隔的单词一样。

然后你可以去像

```
for(int i = 0; i < broken.size; i++)
{
    System.out.print(broken[i] + " ");
}
System.out.println(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-07T22:52:30.417

听起来您想阅读整行（减去行尾）。如果有人输入“helen r. smith”，您可以读取该行：

```
name = scan.nextLine(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-07T23:46:31.043

你可以这样做

```
import java.util.*;
class scanner2
{
public static void main(String args[])
    {
    Scanner in= new Scanner(System.in);
    System.out.println("enter the name");
    String name= in.nextLine();//for name with spaces with more than one word or for    one word.

    System.out.println("enter single word");
    String rl= in.next();//single word name

    System.out.println("name is "+name+"  rl is "+rl);

    }

} 
```

执行它你会得到你的答案。

# javascript - 结合谷歌地图地理编码器和传单地图接收错误：无效的 LatLng 对象

> ID：12773542
> 
> 赞同：2
> 
> 时间：2012-10-07T22:51:41.397
> 
> 标签：javascript, google-maps, google-maps-api-3, leaflet, cloudmade

我正在使用 Google Maps Geocoder 来获取地址的纬度和经度。然后，我使用该地址并使用 Leaflet 并将地图平移到纬度 + 经度坐标。但是，我收到来自 Firebug 的错误说`Error: Invalid LatLng object: (-33.8674869, 151.20699020000006, undefined)`. 我知道我的变量`geolocation`返回`-33.8674869, 151.20699020000006`但不是未定义的。是什么导致了问题？

```
 <body onload="initialize()">
  <div id="result"></div>
 <div>
  <input id="address" type="textbox" value="Sydney, NSW">
  <input type="button" value="Geocode" onclick="codeAddress()">
 </div>

 <div id="map"></div>

 <script type="text/javascript">

 var map = L.map('map').setView([33.7489954, -84.3879824], 13);

  var geocoder;

  function initialize() {
    geocoder = new google.maps.Geocoder();     
  }

  function codeAddress() {
    var address = document.getElementById('address').value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {

        var geolocation = String(results[0].geometry.location);

        var geolocation = geolocation.replace('(','');

        var geolocation = geolocation.replace(')','');      

        map.panTo([geolocation]);

      } else {
        $('#result').html('Geocode was not successful for the following reason: ' + status);
      }
    });
  };

L.tileLayer('http://{s}.tile.cloudmade.com/apikeyputhere/997/256/{z}/{x}/{y}.png', {
maxZoom: 18
}).addTo(map);

</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T23:30:35.503

替换这个：

```
 var geolocation = String(results[0].geometry.location);

    var geolocation = geolocation.replace('(','');

    var geolocation = geolocation.replace(')','');      

    map.panTo([geolocation]); 
```

接着就，随即：

```
map.panTo([results[0].geometry.location.lat(),results[0].geometry.location.lng()]); 
```

**说明：**
您将一个字符串分配给第一个数组值，它与以下内容相同：

```
geolocation=new Array('-33.8674869, 151.20699020000006')//contains 1 string 
```

该字符串不会被评估，它将保持 1 个字符串，但您需要一个具有 2 个浮点数的数组：

```
geolocation=new Array(-33.8674869, 151.20699020000006)//contains 2 floats 
```

是提供给的 `undefined` 数组中缺少的第二项`panTo()`

# javascript - 带有增量测试的 Javascript 正则表达式库

> ID：12773543
> 
> 赞同：0
> 
> 时间：2012-10-07T22:51:42.620
> 
> 标签：javascript, regex, node.js

我正在寻找一个 JavaScript 库（最好是 node.js 包），它可以检查字符串是否与正则表达式增量匹配（即一次一个字符），并返回不确定的结果。例如，假设我有以下正则表达式：

```
j.*s.* 
```

我想测试字符串“javascript”。我想要一个类似于以下的 API：

```
var iregex = new IncrementalRegex('j.*s.*');
var matcher = iregex.createMatcher();
matcher.append('j');
matcher.test(); //returns "possible match"
matcher.append('a');
matcher.test(); //returns "possible match"
matcher.append('v'); matcher.append('a'); matcher.append('s');
matcher.test(); //returns "match found"
matcher.append('ript');
matcher.test(); //returns "match found" 
```

而如果我测试字符串“foo”，我会期待这样的结果：

```
var matcher2 = iregex.createMatcher();
matcher.append('f');
matcher.test(); //returns "no match possible"
//At this point I wouldn't bother appending "oo" because I know that no match is possible. 
```

编辑：要清楚，追加正在构建正在测试的字符串。一个新的匹配器开始对空字符串进行测试，并在 matcher.append('foo') 之后与 foo 匹配。appendToString 或 buildUpString 可能是更好的名称。

另外，我对如何做到这一点有一个想法，但我还没有完全考虑清楚。也许可以从原始正则表达式构建一个“潜在匹配”正则表达式，当且仅当它们是原始正则表达式匹配的字符串的开头时才会匹配字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T04:01:55.617

如果您的解析器规则仅使用正确的正式语言正则表达式（即没有反向引用、前瞻或后视），您可以将它们转换为 NFA（使用 Thompson 构造等），然后通过标准的两栈 NFA 模拟算法推送每个字符：如果角色没有过渡，你就得到了“不”；如果有一个并且您在当前状态集中获得了最终状态，则您得到“是”；否则你有“也许”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T00:55:19.137

您的“IncrementalRegex”可以通过使用封装`RegExp`对象来实现。

```
function Matcher(pattern, flags) {
    this.setExpression(pattern, flags);
}

Matcher.prototype.setExpression = function(pattern, flags) {
    this.pattern = pattern;
    this.flags = flags;
    this.re = new RegExp(this.pattern, this.flags);
};

Matcher.prototype.append = function(pattern) {
    this.setExpression(this.pattern + pattern, this.flags);
};

Matcher.prototype.test = function(str) {
    return this.re.test(str);
};

var matcher = new Matcher('j.*s.*', 'i'),
    str = 'JavaScript';

function test() {
    console.log(matcher.re.source, ':', matcher.test(str));
}

test(); // true
matcher.append('ri');
test(); // true
matcher.append('.t');
test(); // true
matcher.append('whatever');
test(); // false​ 
```

[http://jsfiddle.net/f0t0n/Nkyyd/](http://jsfiddle.net/f0t0n/Nkyyd/)

你能描述一下具体的业务需求吗？也许我们会为您的任务实现找到一些更优雅的方式。

# facebook - Facebook SDK - iOS6 登录弹出窗口无法关闭

> ID：12773545
> 
> 赞同：6
> 
> 时间：2012-10-07T22:51:53.027
> 
> 标签：facebook, ios5, ios6, facebook-ios-sdk

在我的 iPhone 应用程序中，我希望用户能够在 Facebook 上分享链接。

当他们单击“共享”时，我使用以下代码使用新的 SDK 3.1 登录 Facebook，然后`FBRequestConnection`在完成处理程序中使用（一个简单的`publish_action`）。

```
[FBSession openActiveSessionWithPublishPermissions:@[@"publish_actions"] defaultAudience:FBSessionDefaultAudienceFriends allowLoginUI:true completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {

    // Now call FBRequestConnection to post in the stream

}]; 
```

当用户安装了 Facebook 应用程序时，它只是将登录委托给该应用程序。但是，当他们不这样做时，它会在 WebView 中打开登录页面。

在 iOS 5 中，它会打开 Mobile Safari：

![在此处输入图像描述](../Images/cb9e0917913e207a581da3136ec34138.png)

我的问题是在 iOS 6 上，我得到了相同的流程，但在一个模式弹出窗口中（在我的应用程序顶部）。

![在此处输入图像描述](../Images/c5986be1a19df477cd23ffadb432222e.png)

弹出窗口有两个问题：

**1\. 关闭它**

它不能被取消或驳回。相比之下，SDK 中的**HelloFacebookSample**应用程序具有相同的弹出窗口，但带有一个十字按钮来关闭它。

![在此处输入图像描述](../Images/68b99834b9d5740cd3e5d2bdc8974fad.png)

*注意：*现在由于*ravi*解决了，我错过了包含“关闭”图像的 Facebook 资源包。

**2\. 接受权限**

在弹出窗口的第二步（参见上面的屏幕），按*Okay*不会执行任何操作。按下“X”会调用带有错误的完成处理程序，这很好，但是*Okay*没有任何反应。这是使用 SDK 3.1 登录 Facebook 的正确方法吗？我是否错过了专门对弹出窗口做出反应的回调？

更多说明：

> 仅当**未安装**Facebook 应用且未在 iOS 设置中**配置**Facebook 帐户时，才会在**iOS6中发生这种情况。**

 ****谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T22:03:29.530

*我无法发表评论，因为我的声誉低于 50，因此试图指出我的观察结果作为答案。*

**在ios6 上使用 Facebook sdk3.1**时，我也注意到了这个问题。在我的情况下，我使用旧式 facebook 对象创建并调用`[facebook authorize:permissions]`它，但我修改了源代码以始终使用“ `FBSessionLoginBehaviorForcingWebView`”，以便我的登录始终通过应用内 Web 登录。

就我而言，我缺少 FBUserSettingsViewResources.bundle 和 FacebookSDKResources.bundle，所以我看不到十字按钮（但我能够点击那个位置并获得回调`- (void)fbDidNotLogin:(BOOL)cancelled`{) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:20:12.970

我也遇到了这个问题，它似乎是一个已知的错误：

[https://developers.facebook.com/bugs/539702426044893?browse=search_507daefc9af416244781488](https://developers.facebook.com/bugs/539702426044893?browse=search_507daefc9af416244781488)

我还没有解决这个问题，但对我来说，它似乎只发生在模拟器中。安装在设备上时，我的应用似乎总是通过 safari 登录

编辑：所以经过多一点挖掘后，我遇到了这个堆栈溢出线程： [FBConnect login, share with a webview?](https://stackoverflow.com/questions/9819876/fbconnect-login-share-with-a-webview)

我意识到我们看到的对话框是一个 uiWebView，如果应用程序无法在 safari 中打开对话框，它实际上是后备。我能够解决我重置模拟器的问题，这基本上会清除 cookie。从您的屏幕截图中，我相信您也在模拟器中工作。我想知道如果你会得到相同的结果，你是否重置了模拟器？

从菜单 iOS 模拟器 -> 重置内容和设置...****

# asp.net-mvc - ASP.NET MVC 4 路由查询 - 将查询字符串传递给索引操作

> ID：12773547
> 
> 赞同：2
> 
> 时间：2012-10-07T22:52:08.343
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我有一个带有索引操作的控制器。

```
public ActionResult Index(int id = 0)
{

    return view();
} 
```

我希望将 id 传递给 index 操作，但它的工作方式似乎与 details 操作不同。

例如，如果我想将 id 4 传递给索引操作，我必须访问 url：

```
http://localhost:8765/ControllerName/?id=4 
```

有了细节行动......我可以做到这一点。

```
http://localhost:8765/ControllerName/Details/4 
```

我想用 Index 做的是......

```
http://localhost:8765/ControllerName/4 
```

当我访问这个网址时，我收到一个错误：

```
Server Error in '/' Application.

The resource cannot be found.

Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. 

Requested URL: /fix/1

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.17929 
```

这可能吗？如何让 MVC 以与详细信息相同的方式自动处理索引操作？

谢谢

更新 - 我当前的路线配置

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

当我访问 localhost:1234/Fix/3 时，更新新的 RouteConfig 类仍然不起作用

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );

            routes.MapRoute(
            name: "FixIndexWithParam",
            url: "Fix/{id}",
            defaults: new { controller = "Fix", action = "Index", id = UrlParameter.Optional });
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T22:57:06.830

**更新**值得指出的是，/ControllerName/Index/4 应该使用默认路由。

使用那里的默认路由，它期望第二个参数是控制器名称。

因此，默认路由 /ControllerName/4 被解释为`ControllerNameController`Action `4`，这当然不存在。

如果你添加

```
routes.MapRoute(
name: "IndexWithParam",
url: "{controller}/{id}",
defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }); 
```

在它允许的默认值之前

/Home/4被路由到`HomeController`行动`Index``id=4`

我没有测试过，它可能与默认值冲突。您可能需要在路由中明确指定控制器，即：

```
routes.MapRoute(
name: "HomeIndexWithParam",
url: "Home/{id}",
defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }); 
```

（显然，替换`Home`为您实际想要路由到的任何控制器）

# couchdb - CouchDB：限制用户只能复制他们自己的文档

> ID：12773554
> 
> 赞同：9
> 
> 时间：2012-10-07T22:52:54.677
> 
> 标签：couchdb

我无法找到有关复制过滤器中使用的请求对象参数的文档（以下示例中的“req”）：

```
function(doc, req) {
  // what is inside req???
  return false;
} 
```

这篇[旧的 CouchBase 博客文章](http://blog.couchbase.com/what%E2%80%99s-new-apache-couchdb-011-%E2%80%94-part-three-new-features-replication)有一个小代码片段，显示 userCtx 变量是请求对象的一部分：

> 这个 userCtx 是什么？当您使用 HTTP 基本身份验证、安全 cookie 身份验证或 OAuth 向 CouchDB 发出经过身份验证的请求时，CouchDB 将验证用户的凭据。如果它们与 CouchDB 用户匹配，它会使用有关用户的信息填充 req.userCtx 对象。

此 userCtx 对象对于将文档复制限制为文档所有者非常有用。看看这个例子：

```
function(doc, req) {
  // require a valid request user that owns the current doc
  if (!req.userCtx.name) {
    throw("Unauthorized!");
  }
  if(req.userCtx.name == doc.owner) {
    return true;
  }
  return false;
} 
```

但现在的问题是，CouchDB 要求复制的发起者明确选择过滤方法（在这种情况下，发起者是我的 Web 应用程序的移动用户）：

```
curl -X POST http://127.0.0.1:5984/_replicate \
-d '{"source":"database", \
     "target":"http://example.com:5984/database", \
     "filter":"example/filtername"
     }' 
```

**问题**

有没有办法在默认情况下强制执行特定的过滤器，以便用户只能复制自己的数据？我认为最好的方法是使用 CouchDB 的前端，如 Nginx，并将所有复制请求限制为包含该过滤器的请求。想法？希望有一种方法可以在 CouchDB 前面没有另一层的情况下做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T23:40:17.530

数据复制与用户读取数据的能力相得益彰。因为如果您的用户在单个数据库中共享数据，他们都有权将所有数据复制到他们的本地沙发上。因此，除非您将单个共享数据库拆分为多个个人数据库，否则您无法应用任何文档读取限制——这是此类情况的常见用例。

没有任何方法可以强制应用更改提要过滤器或视图等其他参数。但是，您可以使用[重写](http://wiki.apache.org/couchdb/Rewriting_urls)来包装对具有预定义查询参数甚至动态参数的某些资源的请求。这不是您所期望的解决方案，但仍然比 nginx 和他身边的一些逻辑更好：可能，您可能允许用户使用自定义查询参数指定自定义过滤器，并且只有在没有指定的情况下才强制您拥有， 对？

PS Inside`req`对象对当前请求非常有用。部分在[wiki](http://wiki.apache.org/couchdb/ExternalProcesses#JSON_Requests)上进行了描述，但它有点过时了。但是，使用简单的显示功能很容易查看它：

```
function(doc, req){
    return {json: req}
} 
```

# php - 构建查询动态函数变量时的转义问题

> ID：12773564
> 
> 赞同：1
> 
> 时间：2012-10-07T22:54:26.363
> 
> 标签：php, sql, codeigniter, function, activerecord

我正在开发一个 CMS，它以不同的方法在模板页面系统上工作。

我有这个对象：

```
$structure = new stdClass;

$structure->homepage->news->method            = 'get_articles_by_page_name';
$structure->homepage->news->lang_key          = translate('home_news');
$structure->homepage->news->lang              = $lang;
$structure->homepage->news->add_media         = true;
$structure->homepage->news->media_type        = 'ibs';
$structure->homepage->news->limit             = '5';
$structure->homepage->news->order_by          = 'a.logical_date';
$structure->homepage->news->asc_des           = 'desc';
$structure->homepage->news->result_type       = 'result'; 
```

这有助于获取如下内容：

```
foreach ($structure as $page_template => $page_contents)
{
  // Call Customized Content for Homepage
  if($this->data['page_data']->page_view == $page_template) // homepage comes ok.
  {
    foreach ($page_contents as $view_var_name => $page_cdata)
    {
      $method = $page_cdata->method; // method names comes
      $page_cdata = substr(implode(",",(array) $page_cdata),(strlen($method)+1)) . '\'';
      //Returns as expected:
      //**'Haberler','tr','1','ibs','5','a.logical_date','desc','result'**

      $this->data[$view_var_name] = $this->publish->$method($page_cdata);
      vdebug($page_cdata);
    }
  }
} 
```

它假设称它们为模型函数：

```
function get_articles_by_page_name( $lang_key='',$lang='en',$add_media=true,
 media_type='ibs',$limit='0',$order_by='a.logical_date',$asc_desc='desc',$result_type='result') 
```

但是，有一个问题。当我返回上次工作的查询时，它说：

```
SELECT * FROM (`page`) JOIN `page_lang` ON `page`.`id_page` = `page_lang`.`id_page` WHERE `page_lang`.`title` = '\'News\',\'tr\',\'1\',\'ibs\',\'5\',\'a.logical_date\',\'desc\',\'result\'' 
```

不应该是这样的。逗号之间的每一件事都是方法函数的参数。这是什么原因，有什么想法吗？

get_articles_by_page_name 的内容：

```
function get_articles_by_page_name ($lang_key='',$lang='tr',$add_media=true,$media_type='ibs',$limit='0',$order_by='a.logical_date',$asc_desc='desc',$result_type='result')
{
  // Define variables
  $id_page    = ''; 
  $result     = '';

  // Get Page Data
  $page_name    = $lang_key;
  $get_page     = $this->vayes->getJoined('page','page_lang','id_page','','',array('page_lang.title'=>$page_name),'row');
  if($get_page)
  {
    $id_page  = $get_page->id_page;
    $result   = $this->publish->get_articles($lang,$id_page,null,false,'',$order_by,$asc_desc,$limit,'result');
  }
  else
  {
    $result = array('No id_page specified');
  }

  return $result;
} 
```

get_articles 的内容：

```
function get_articles($lang='tr',$id_page,$id_article=null,$incl_media=true,$media_type='',$order_by='a.logical_date',$asc_desc='desc',$limit='0',$result_type='result')
{
  $this->db->select('*');
  $this->db->from('article a');
  $this->db->join('article_lang b','b.id_article=a.id_article','left outer');

  if($incl_media) {
    $this->db->join('article_media c','c.id_article=b.id_article','left outer');
    $this->db->join('media d','d.id_media=c.id_media','left outer'); 
  }

  if($id_article == null) { $this->db->where('a.id_page',$id_page); }
  else /*------------->*/ { $this->db->where('a.id_article',$id_article); }

  $this->db->where('b.lang',$lang);
  $this->db->where('b.online',1);

  if(($incl_media == true) AND $media_type != '' ) $this->db->where('c.usage',$media_type);

  // Order Results
  $this->db->order_by($order_by,$asc_desc);

  // Limit Results
  if ($limit) $this->db->limit($limit);

  $query = $this->db->get();

  if($query->num_rows() > 0)
  {
    $result = $query->$result_type();
    $query->free_result();
    return $result;
  }
  return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:05:29.163

试试[stripslashes()](http://php.net/manual/en/function.stripslashes.php)

在 5.2.17 中尝试在数组上使用 stripslashes 返回字符串“Array”，但在 5.3.6 中返回 NULL。因此，在数组上使用 stripslashes() 您将需要递归地执行它；

```
 function stripslashes_deep($value)
{
    $value = is_array($value) ?
                array_map('stripslashes_deep', $value) :
                stripslashes($value);

    return $value;
}

// Example
$array = array("f\\'oo", "b\\'ar", array("fo\\'o", "b\\'ar"));
$array = stripslashes_deep($array);

// Output
print_r($array); 
```

# web-services - 如何使用 YQL 获得股票期权链？

> ID：12773569
> 
> 赞同：5
> 
> 时间：2012-10-07T22:55:32.783
> 
> 标签：web-services, option, yql

我正在尝试使用 YQL 从雅虎获取股票期权链。我在 YQL 控制台中试过这个命令：

```
select * from yahoo.finance.options 
```

但是，我收到此错误 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<error xmlns:yahoo="http://www.yahooapis.com/v1/base.rng" yahoo:lang="en-US">
    <diagnostics>
        <publiclyCallable>true</publiclyCallable>
    </diagnostics> 
    <description>No definition found for Table yahoo.finance.options</description>
</error> 
```

看起来这个表已经不存在了。有谁知道正确的表是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:14:44.947

您必须至少提供一个`where clause`才能使此查询正常工作。像这样：

```
select * from yahoo.finance.options where  symbol='MMM' 
```

或者，

```
select * from yahoo.finance.options where  symbol='A' 
```

或者，

```
select * from yahoo.finance.options where  symbol='YHOO' 
```

All the above queries work fine. If you want more specific data then you have to provide more conditions to filter out your desired data out of the whole data.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:26:40.510

yahoo.finance.options 是一个社区表。要阅读有关社区表的信息，请查看[此处](http://www.datatables.org/)。从我刚刚发布的链接中：

> 为了将 YQL 与社区表一起使用，您必须传入 datatables env 文件。您可以在 YQL 控制台上作为 YQL 语句的一部分执行此操作，或者通过传入查询参数来执行此操作。

可以在[这里找到用于测试的 YQL 控制台](http://developer.yahoo.com/yql/console/?q=select%20%2a%20from%20yahoo.finance.options&env=store://datatables.org/alltableswithkeys#h=select%20%2a%20from%20yahoo.finance.options%20where%20symbol=%27GOOG%27)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-05T06:54:37.080

Something I just figured out today is that you can just use this to get the option data from yahoo

```
https://query2.finance.yahoo.com/v7/finance/options/SPXS?straddle=true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-09T21:35:03.050

Since the middle of 2014 YQL has the problem, so the option chain from yahoo.finance with scraping could be get by the following codes with: [Python](https://github.com/boyank/yahoo_options) and [Matlab](https://www.mathworks.com/matlabcentral/fileexchange/50455-get-yahoo-option-chain)

# ruby-on-rails - 提交后如何重新填充rails form_for的表单字段？

> ID：12773571
> 
> 赞同：1
> 
> 时间：2012-10-07T22:55:51.863
> 
> 标签：ruby-on-rails, ruby-on-rails-3, form-for, repopulation

**我有这个表单并尝试了很多方法，但都无济于事，无法在提交后重新填充 rails form_for 的表单字段。**正确的方法是什么？也许只是忽略了文档，但没有很好的参考如何做到这一点:(

唯一不起作用的解决方案是使用 params 标记并将集合默认值设置为该值，但如果未提交表单，这也会失败。参数[:age_from]

= form_for :people, :url => request.fullpath, :method => :get, :html => { :class => 'form-search' } do |f|

```
 #container_search
    .clear
      = select_tag(:age_from, options_for_select(18..60)
      = select_tag(:age_to, options_for_select(18..60)
      = select_tag(:gender, options_for_select(gender)
    .clear
    .center
      = f.submit "Search »", :class => "span-4" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T23:22:46.860

看起来您缺少关闭`)`您的 select_tag 行，您可以通过向您添加另一个参数来添加选定的值`options_for_select`：

```
select_tag(:age_from, options_for_select(18..60, params[:age_from])) 
```

# asp.net-mvc-4 - 如何在 Asp.net MVC 上实现自定义会员提供程序？

> ID：12773573
> 
> 赞同：2
> 
> 时间：2012-10-07T22:56:25.793
> 
> 标签：asp.net-mvc-4, repository-pattern

我想在我的项目中实现自定义成员资格提供程序，并且我在我的应用程序中使用存储库模式。

**这是我的项目结构：（3个项目）**

*   我的项目（Asp.Net MVC）
*   MyProject.Model（实体模型类。我正在使用实体框架）
*   MyProject.Repository（我的存储库类）

我在哪里实现自定义成员资格类？因为它继承自 System.Web.Security；我应该在 MyProject 中创建吗？

使用存储库模式创建自定义成员资格类的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:37:52.630

我建议您再创建一个项目`MyProject.Infrastructure`，该项目将包含您的自定义成员资格类和与您的应用程序基础架构相关的其他核心组件。

您必须通过 web.config 注册自定义成员资格类，因此您很难将数据库存储库等依赖项注入到该类中，因此在自定义成员资格提供程序类中实现存储库模式并没有太大收获。无论如何，您必须在成员资格类中实例化一个具体的存储库实现。

# javascript - 在相同条件下运行程序两次会产生不同的输出？

> ID：12773574
> 
> 赞同：0
> 
> 时间：2012-10-07T22:56:27.437
> 
> 标签：javascript, html

我做了一个小程序来模拟地球绕太阳运行的轨道。是这里：

[http://jsfiddle.net/NBvPp/](http://jsfiddle.net/NBvPp/)

使用 dx=0 和 dy=4 运行它会在不同的运行中产生非常不同的轨道，即使行星没有靠近太阳中心。

任何想法为什么？计算机每次处理舍入误差的方式是否不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T23:32:44.653

这是因为您在重新启动执行后没有重置“r”变量，我添加了

```
r = Math.pow(Math.pow(x-WIDTH/2,2)+Math.pow(y-HEIGHT/2,2),.5) 
```

到 startdraw() 函数：

[http://jsfiddle.net/NBvPp/1/](http://jsfiddle.net/NBvPp/1/)

# c# - 每隔几秒对我的类属性进行采样

> ID：12773576
> 
> 赞同：0
> 
> 时间：2012-10-07T22:56:59.390
> 
> 标签：c#, winforms

我的类启动新进程（Tshark）并开始捕获，从主窗体我检查类属性以更新我的 GUI，有时接收到的数据包率太高以至于我的 GUI 卡住了，所以我想要检查谁的属性的选项每 1-2 秒。这是我的进度更改功能，它一直在检查我的课程，此时我正在更新我的 GUI，我如何每 2 秒检查一次这些属性？

```
Tshark tshark = new Tshark();

private void bgWSniffer_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    tshark = e.UserState as Tshark;
    lblNumberOfReceivedPackets.Text = tshark._receivesPackets.ToString("#,##0");
    lblTrafficRate.Text = (tshark._bitsPerSecond * 0.000001).ToString("0.##") + " Mbit/sec" + " (" + tshark._bitsPerSecond.ToString("#,##0") + " Bits/sec" + ")";
    lblPacketsRate.Text = tshark._packetsPerSecond.ToString("#,##0") + " Packets/sec";
    lblStatus.Text = tshark._status;
    lblFileSize.Text = formatBytes(tshark._myFile.Length);
    tshark._myFile.Refresh();            
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T23:03:34.130

检查自上次检查后是否已过去 2 秒。在这里，我正在使用一个班级成员来记录那个时间。

```
 private DateTime _LastCheck = DateTime.MinValue;

    private private void bgWSniffer_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        if (_LastCheck.AddSeconds(2) <= DateTime.Now)
        {
            _LastCheck = DateTime.Now;
            // do the UI update.
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T23:03:42.787

`BackgroundWorker`您可以创建一个 Timer 来完成这项工作，而不是在其中更新 UI

```
private void bgWSniffer_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    tshark = e.UserState as Tshark;
} 
```

在ctor中创建计时器：

```
_timer = new Timer()
_timer.Intrerval = 2000;
_timer.Tick += UpdateUI;
_timer.Start(); 
```

您可以添加一些检查以防值发生更改，以免不必要地更新 UI：

```
private void UpdateUI()
{
   var local = _tshark;
   if(local != null)
   {
    lblNumberOfReceivedPackets.Text = local._receivesPackets.ToString("#,##0");
    lblTrafficRate.Text = (local._bitsPerSecond * 0.000001).ToString("0.##") + " Mbit/sec" + " (" + local._bitsPerSecond.ToString("#,##0") + " Bits/sec" + ")";
    lblPacketsRate.Text = local._packetsPerSecond.ToString("#,##0") + " Packets/sec";
    lblStatus.Text = local._status;
    lblFileSize.Text = formatBytes(local._myFile.Length);
    local._myFile.Refresh();      
   }  
} 
```

# javascript - 谷歌地图嵌入代码在 JQuery Toggle 中不起作用

> ID：12773580
> 
> 赞同：-1
> 
> 时间：2012-10-07T22:57:48.983
> 
> 标签：javascript, google-maps, iframe, embed

运行一个简单的切换——在 div 中，我有一个 Googe 地图嵌入代码 (IFRAME) 片段。当切换被激活时，所有样式和文本都可以工作，但是地图的图像不显示......想法？

```
$(document).ready(function(){ 
  $("#classes").click(function(e){ 
    $("#class_breakdown").slideToggle("slow"); 
    e.preventDefault(); 
  }); 
}); 

<a href="#" id="classes">Click</a>

<div class="class_breakdown">The IFRAME Here</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:37:59.243

你指的是 ID 为 *class_breakdown* 的东西： `$("#class_breakdown").slideToggle("slow");`

但是，您的 HTML 中没有该类的任何内容。相反，它有一个*class_breakdown***类**，应该这样称呼： `$(".class_breakdown").slideToggle("slow");`

# python - Python - 从第二个到最后一个元素获取子集

> ID：12773582
> 
> 赞同：1
> 
> 时间：2012-10-07T22:58:11.180
> 
> 标签：python, map, set

我有一堆字符串，都在一行上，由一个空格分隔。我想将这些值存储在一个映射中，第一个字符串作为键，以及一组剩余的值。我在尝试

```
map = {}
input =  raw_input().split()
map[input[0]] = input[1:-1] 
```

除了省略最后一个元素之外，它有效。我已经找到

```
map[input[0]] = input[1:len(input)] 
```

有效，但我更愿意使用更像前者的东西

（例如，输入类似于“key value1 value2 value3”我想要一个像
{'key' : ['value1', 'value2', 'value3']}
但我当前的方法给了我
{'key' : [ '值1'，'值2']}）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T22:59:37.927

那是因为您指定`-1`要转到的索引 - 只需将索引放在外面即可转到列表的末尾。例如：

```
input[1:] 
```

有关列表切片语法的更多信息，请参见[此处](https://stackoverflow.com/a/509295/722121)。

请注意，如果您使用的是 Python 3.x，另一种选择（我觉得它更好，更易读）是使用[扩展的可迭代解包](http://www.python.org/dev/peps/pep-3132/)：

```
key, *values = input().split()
map[key] = values 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T22:59:46.207

```
myDict = {}

for line in lines:
    tokens = line.split()
    map[tokens[0]] = tokens[1:] 
```

或者：

```
def lineToPair(line):
    tokens = line.split()
    return tokens[0],tokens[1:]

myDict = dict(lineToPair(x) for x in lines) 
```

# windows-phone-7 - WP7 + Live SDK - 文件覆盖不起作用

> ID：12773584
> 
> 赞同：1
> 
> 时间：2012-10-07T22:58:21.377
> 
> 标签：windows-phone-7, onedrive, live-connect-sdk

我正在尝试使用 Live SDK 将文件上传到 SkyDrive。除了覆盖现有文件外，它运行良好。每当我尝试覆盖现有文件时，我都会收到错误消息“资源文件名已存在。”，尽管我使用了覆盖选项：

```
_liveClient.UploadAsync(
                   FolderId,
                   Filename,
                   MemoryStream,
                   OverwriteOption.Overwrite); 
```

我还有什么需要设置的吗？我可以尝试通过删除文件并再次上传来处理错误，但这显然不是最干净的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:21:43.287

微软[在这里](http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/thread/6e763f8f-d2ce-4133-b4fc-b3a8626d7dff/)承认这是他们知道的一个错误。它将在下一个版本中修复。此外，根据该链接中的答案，重载方法工作正常：

```
_liveClient.UploadAsync(
               FolderId,
               Filename,
               MemoryStream,
               OverwriteOption.Overwrite,
               null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:41:44.590

当您上传一个文件，并且同名文件已经存在于 SkyDrive 中的相同位置时，SkyDrive 的默认行为是覆盖现有文件。您不需要指定 OverwriteOption。

从我的角度来看，其他地方存在问题。尝试使用另一个文件夹并显示更多代码。

# html - 带有 Trebuchet 字体的西班牙字符？

> ID：12773588
> 
> 赞同：0
> 
> 时间：2012-10-07T22:59:04.597
> 
> 标签：html, css, fonts

使用 font-family 时："Trebuchet MS"、Arial、Helvetica、sans-serif；在 Photoshop 中，西班牙语字符显示得很好。在网站上，它们显示为�。

我已经对更改进行了一些研究，但似乎并没有奏效。

这是字体或一般 HTML 的问题，我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:59:01.863

这是一个常见的问题，我已经发生过好几次了。

这可能不是解决它的最简单方法。
例如，“！” 颠倒是

```
&iexcl; 
```

或者

```
&#161; 
```

和

查看[此页面](http://www.tiger.se/dok/koder.html) 或[此页面](http://www.w3.org/TR/REC-html40/sgml/entities.html)以获取更多信息

# android - 类方法：在 Eclipse 中覆盖我的方法

> ID：12773589
> 
> 赞同：0
> 
> 时间：2012-10-07T22:59:30.970
> 
> 标签：android, eclipse, class, overriding

如果我有课：

```
public class myclass{

    public int calc(int var1,int var2){
        return var1*var2;
    } 

    public int calc(int var1 ,int var2 , int var3){
        return var1*var2/var3;
    }
 } 
```

问题是：如果我想覆盖我班级的任何方法，有什么办法吗

示例：我刚刚制作`myclass extends Async`并使用 @Override 注释生成 doInBackground ...

更多解释：

```
class  ares extends AsyncTask<Params, Progress, Result> {
    @Override
    protected Result doInBackground(Params... params) {
        // TODO Auto-generated method stub
        return null;
    }   
} 
```

我想在我制作时`Sub Class extends myclass`->该`calc`方法像doInBackground一样生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:29:26.430

注释`@Override`不是强制性的，而是可选的，可以由 Eclipse 的格式化程序自动添加。

如果您使用 JavaSDK 1.5 添加此注解，也可能会出现错误，因为此注解是为使用 JavaSDK 1.6 的非接口方法添加的。

要在 Eclipse 中强制生成或至少生成该方法丢失的错误，您需要在父类中使该方法抽象。如果您已经这样做了，您的 IDE 应该会帮助您生成方法，并且还应该添加注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T23:33:16.143

我对你问的问题并不完全清楚。

您可以覆盖您的方法，这意味着不更改返回类型而是更改方法实现，尽管返回类型可以更具体。

# regex - 我需要一个正则表达式来匹配以两个特定单词之一结尾的句子

> ID：12773591
> 
> 赞同：2
> 
> 时间：2012-10-07T22:59:37.563
> 
> 标签：regex

我需要一个正则表达式来匹配以三个单词之一结尾的句子。

例如假设三个词是：英里和码。

My_String = 一次 2012 年 10 月 5 日在华盛顿特区举行了一场比赛，共有 400 名参赛者参加了比赛。比赛的距离是十英里。

给定我想要匹配的字符串 = 比赛的距离是 10 英里。

我尝试了以下方法：正则表达式 =`/.\s.*[miles.|yards.]/`

和`match = match.regex(My_String)` `

但这是匹配我感兴趣的句子之前的所有句子以及我感兴趣的句子。

更新：

Kirill Polishchuk 提出了一个似乎让我非常接近的解决方案（见下文）。不幸的是，当我将它放入 Rubular 表达式测试器时，它只是突出显示目标句子，但不会将其作为匹配项返回。

我开始认为 Kirill 的表达式确实有效，但我用来测试它的 Rubular 引擎可能不支持它。

最终更新：

以下表达式成功匹配目标句子：

```
([^.]*(?:miles|yards)\.) 
```

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T23:26:22.700

试试这个：

```
[^.]*(?:miles|yards)\. 
```

在这个正则表达式中，我假设句子以`.`符号结尾。使用正则表达式确定句子的范围确实很复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T23:32:49.373

好的，第一个问题是您在应该使用括号时使用方括号。**[abc]**匹配与方括号内的任何字符匹配的单个字符。因此，您正在匹配包含**m**或**i**或**l**（等等）的任何行。

另一个问题是**。**如果您真的想匹配该字符，则必须进行转义；如果没有转义，它是一个匹配任何单个字符的特殊正则表达式字符。所以你应该a）将它移到括号外（你只是在浪费空间输入两次）和b）用 * ***转义它。

正则表达式的前半部分令人费解；它匹配任何单个字符 ( **.** )，后跟单个空格项 ( **\s** )，后跟任意数量的未指定字符 ( **.*** )。你想达到什么目的？

# image-processing - 如何匹配两个图像并找出错误

> ID：12773593
> 
> 赞同：0
> 
> 时间：2012-10-07T22:59:47.907
> 
> 标签：image-processing, opencv

我有一个字母模板和我从数字笔获得的许多变体（见下文）：

**模板**

![模板](../Images/dcda5d1302878f15121e742ea074375e.png)

**测试 1**

![测试](../Images/5ce5e25b90367983a539fc64346143d1.png)

**测试 2**

![在此处输入图像描述](../Images/113117090a443efdcc0f2a53e281de50.png)

这些字母被缩放到相同的边界框内。

我想检测字母中的错误，例如测试 1 中的错误是多行，测试 2 中的错误是缺少段。类似地，可能会出现错误，即使用曲线而不是线段。我想找到需要纠正的部分。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T07:11:24.890

一个模棱两可的是，您是否只想知道模板和测试图像之间的区别，或者您想通过使用您的模板来检测字母 A。

正如您所提到的，您的模板和测试图像之间的差异在于那条额外的线，但我认为还有更多差异，例如模板 A 不是由直线组成，而是包括一些曲线，但测试 1 图像大约由直线。这两个是图像处理中的不同问题，必须以不同的方式对待。首先你得想想你想做什么？

但是，一种解决方案是，您可以将模板和测试图像划分为子块并尝试找出它们之间的相关性，如果这样可以匹配到预定义的阈值（您应该智能地定义它），那么没有区别，否则标记该块作为模板和测试图像之间的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:07:33.370

您可以在 MATLAB 中使用 xcorr2 函数，MATLAB 帮助足以了解该函数的工作原理。

# ios - 分组 UITableView - 复制设置应用表视图

> ID：12773597
> 
> 赞同：0
> 
> 时间：2012-10-07T23:00:10.280
> 
> 标签：ios, objective-c, iphone, xcode, uitableview

我想在我的 iPhone 应用程序中创建这样的视图：

![在此处输入图像描述](../Images/128b0c2f54fdf06b13b27791047a63ad.png)

我不知道iOS中的这个控件到底是什么，也许我可以在左侧设置一个图标和文本，在右侧设置一个小标志。

我已经实现了一个 TableView，在那里我可以设置这些东西，如下所示：

```
 [[cell textLabel] setText:customer.name];
    [[cell textLabel] setTextColor:[UIColor blackColor]];
    [[cell imageView] setImage:[UIImage imageNamed:@"icon.png"]];
    //[[cell detailTextLabel] setText:@"Awsome weather idag"];
    cell.accessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure]; 
```

但是我怎样才能让它像图片中的那个视图一样工作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T05:47:49.203

为了快速输出，您可以使用一些库，如 [https://github.com/escoz/QuickDialog](https://github.com/escoz/QuickDialog)

# protip，根据我的经验，当更改出现时，这样的解决方案会让您更加纠结。

有时您只想在特定视图上更改一个特定标签，这在任何现成的解决方案中都不容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T01:35:28.637

这很简单，请按照以下步骤操作，如有疑问，请查看`UITableView` [文档](https://developer.apple.com/reference/uikit/uitableview)：

**1.创建分组表视图：**

以编程方式：

```
CGRect tableFrame = CGRectMake(0, 0, 200, 200);

UITableView *tableView = [[UITableView alloc] initWithFrame:tableFrame style:UITableViewGroupedStyle];
tableView.delegate = self;
tableView.dataSource = self;

[self.view addSubview:tableView]; 
```

分配一个 UITableViewController 子类（常见情况）：

```
MyTableViewController *controller [[MyTableViewController alloc] initWithStyle: UITableViewGroupedStyle];

[self.navigationController pushViewController:controller animated:NO]; 
```

通过界面构建​​：

1.  展开实用程序菜单（右上角图标）；
2.  选择您的表格视图（单击它）；
3.  点击属性检查器（右上角第四个图标）；
4.  在表格视图下，单击样式下拉菜单并选择分组。

**2\. 实现 UITableViewDataSource 协议：**

基本上将这三个功能添加到您的控制器中。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

    // Return the number of sections.

    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    // Return the number of rows in a given section.

    return 5;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    // Configure the cells.

    return cell;
} 
```

**3\. 配置细胞：**

UITableViewCell 的默认样式有一个图像视图（UIImageView）、一个标题标签（UILabel）和一个附件视图（UIView）。在您提供的图像中复制表视图所需的一切。

所以，你正在寻找这样的东西`tableView:cellForRowAtIndexPath:`：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString * const cellIdentifierDefault = @"default";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifierAccount];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifierAccount];
    }

    if (indexPath.section == 0) {

        cell.imageView.image = [UIImage imageName:@"bluetooth_icon"];
        cell.textLabel.text = @"Bluetooth";

        // Additional setup explained later.

    }else{

        if (indexPath.row == 0) {

            cell.imageView.image = [UIImage imageName:@"general_icon"];
            cell.textLabel.text = @"General";
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

        }else{

            cell.imageView.image = [UIImage imageName:@"privacy_icon"];
            cell.textLabel.text = @"Privacy";
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

        }

    }

    return cell;
} 
```

属性 accessoryType 定义了将出现在单元格右侧的内容，可以在[此处](https://developer.apple.com/reference/uikit/uitableviewcellaccessorytype?language=objc)找到附件类型的列表。

在第一个单元格（蓝牙）中，您需要创建一个自定义附件视图并将其分配给单元格的附件视图属性。下面给出了一个非常简单的例子来说明如何实现这一点：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString * const cellIdentifierDefault = @"default";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifierAccount];

    if (cell == nil) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifierAccount];

        label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 100, 44)];
        label.textAlignment = NSTextAlignmentRight;

        cell.accessoryView = label;

    }else{

        label = (UILabel *) cell.accessoryView;

    }

    cell.imageView.image = [UIImage imageName:@"bluetooth_icon"];
    cell.textLabel.text = @"Bluetooth";
    label.text = @"Off";

    return cell;
} 
```

希望这会有所帮助，马特乌斯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T23:08:26.607

查看 UITableView 部分。这就是将这些组分开的原因。

# html - Tumblr 照片集百分比宽度

> ID：12773598
> 
> 赞同：1
> 
> 时间：2012-10-07T23:00:12.170
> 
> 标签：html, css, tumblr, percentage

我正在创建一个 4 列的 Tumblr 主题。每列宽度为 25%，使用 {PhotoURL-500} 图像可以缩小或扩大，无论窗口大小如何，照片集都会出现问题，它们是静态的，会使列折叠。由于我不是使用像素而是使用百分比，所以有一种方法可以使照片集适合 % 列？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:50:07.453

将主题 HTML 中的当前 photoset 块替换为：

```
{block:Photoset}
<div class="photoset content">
    {block:Photos}
    {block:Photo1}{/block:Photo1} 
        <div class="photoset_div">
            <img src="{PhotoURL-500}" class="photo_img" />
        </div>                      
    {/block:Photos}
    {block:Caption}
    <div class="caption">{Caption}</div>
    {/block:Caption}
</div>
{/block:Photoset} 
```

在您的样式表中，只需将您的 .photoset_div img { width: 100% }

# html - 以下用于 twitter 的 html 锚标记

> ID：12773599
> 
> 赞同：0
> 
> 时间：2012-10-07T23:00:21.983
> 
> 标签：html

以下锚标记

```
 <a href="http://twitter.com/share" class="twitter-share-button external" data-text="check out ___ on MySite!" data-count="none" data-via="MySite">tweet</a> 
```

我想知道是否需要特殊的 .js 文件？我的意思是，浏览器如何知道日期文本、数据计数字段？这些不是标准的，浏览器可能不会知道它们的意思。

但是我搜索了整个文件，找不到任何与 twitter 共享相关的 .js 文件的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:13:49.700

查看[推文按钮文档](https://dev.twitter.com/docs/tweet-button)。您需要在页面中的某处添加以下行以使该特殊锚点起作用：

```
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

# jquery - Jquery：在ajax load（）之后运行脚本

> ID：12773600
> 
> 赞同：2
> 
> 时间：2012-10-07T23:00:35.230
> 
> 标签：jquery, ajax

我正在使用 load() 函数通过单击菜单中的按钮从不同页面动态获取详细信息。其中一个按钮指向一个使用自己的 jquery 效果的图像库。但是这些脚本没有运行。我尝试使用 getscript() 显式加载它们，但这也不起作用。这是代码：

```
$(document).ready(function() {

var hash = window.location.hash.substr(1);
var href = $('#nav li a').each(function(){
    var href = $(this).attr('href');
    if((hash==href.substr(0,href.length-4))&&(hash!='')){
        var toLoad = hash+'.php #content';
        $('#content').load(toLoad);
    }                                           
});

$('#nav li a').click(function(){

    var toLoad = $(this).attr('href')+' #content';
    $('#content').hide();   
    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-4);
    $('#content').load(toLoad,showNewContent());
    function showNewContent() {
        $('#content').fadeIn(1000);
        $.getScript("gallery.js");
    }

    return false;

});

}); 
```

这是我的 gallery.js 文件的内容。确切的效果可能无关紧要，我粘贴了下面的代码来显示我的警报框的位置：

```
$(document).ready(function(){
//perform actions when DOM is ready
  var z = 0; //for setting the initial z-index's
  var inAnimation = false; //flag for testing if we are in a animation
  alert("1");
  $('#pictures img').each(function() { //set the initial z-index's    
    z++; //at the end we have the highest z-index value stored in the z variable
    $(this).css('z-index', z); //apply increased z-index to <img>
    alert("2");
  });

  function swapFirstLast(isFirst) {
    if(inAnimation) return false; //if already swapping pictures just return
    else inAnimation = true; //set the flag that we process a image
    var processZindex, direction, newZindex, inDeCrease; //change for previous or next image
    alert("3");
    if(isFirst) { processZindex = z; direction = '-'; newZindex = 1; inDeCrease = 1; } //set variables for "next" action
    else { processZindex = 1; direction = ''; newZindex = z; inDeCrease = -1; } //set variables for "previous" action

    $('#pictures img').each(function() { //process each image
    alert("4");
          if($(this).css('z-index') == processZindex) { //if its the image we need to process
        $(this).animate({ 'top' : direction + $(this).height() + 'px' }, 'slow', function() { //animate the img above/under the gallery (assuming all pictures are equal height)
          $(this).css('z-index', newZindex) //set new z-index
            .animate({ 'top' : '0' }, 'slow', function() { //animate the image back to its original position
              inAnimation = false; //reset the flag
            });
        });
      } else { //not the image we need to process, only in/de-crease z-index
        $(this).animate({ 'top' : '0' }, 'slow', function() { //make sure to wait swapping the z-index when image is above/under the gallery
          $(this).css('z-index', parseInt($(this).css('z-index')) + inDeCrease); //in/de-crease the z-index by one
        });
      }
    });

    return false; //don't follow the clicked link
  }

  $('#next1 a').click(function() {
      alert("5");
    return swapFirstLast(true); //swap first image to last position
  });

  $('#prev1 a').click(function() {
      alert("6");
    return swapFirstLast(false); //swap last image to first position
  });

});
//Function for z-index based gallery ends here 
```

这是我发现的：

我执行 ctrl+F5 并从开始加载页面，然后单击图库按钮。我收到警报“1”。图像加载，但动画不起作用。

我再次单击图库按钮，没有刷新，我得到了从 1 到 6 的所有适当警报，效果就像一个魅力。

当效果不起作用时，我只是将gallery.js的内容放在chrome-console中并单击Enter，效果再次完美。

此外，有时即使完全重复上述步骤，效果也不起作用。这里可能是什么问题？我听说 getscript 方法是异步的，我什至尝试将 ajax 同步设置为关闭，但我仍然得到不可预测的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T10:04:59.890

我发现尽管调用**getScript()**作为对**load()**的回调，脚本加载*“之前”*的内容可能会打乱流程。而不是调用**showNewContent()**作为回调，我需要调用**showNewContent**即指向函数的指针（不带圆括号），以便它等待加载完成。以下代码解决了它：

```
$('#content').load(toLoad,showNewContent);
    function showNewContent() {
        $('#content').fadeIn(1000);
        $.getScript("gallery.js");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T23:21:52.527

在你的画廊 js 替换

```
$(document).ready(function(){ 
```

和

```
MyGallery=function(){ 
```

在主脚本中：

```
var MyGallery=function();
$(document).ready(function() { 
```

……

……

```
 function showNewContent() {
        $('#content').fadeIn(1000);
        $.getScript("gallery.js",{success: MyGallery});
    } 
```

……

……

我不确定是什么导致你做这样的事情，最好回顾一下你的代码流的想法......

# java - 为什么我的 @override for contains 不起作用？

> ID：12773604
> 
> 赞同：1
> 
> 时间：2012-10-07T23:01:50.247
> 
> 标签：java

```
@Override
    public boolean contains(Object o) {
        if ((this.name).equals((String) o)) {
            return true;
        }
        else {
            return false;
        }
    } 
```

`ontains(Object)`我收到错误：类型的方法 c`Team`必须覆盖或实现超类型方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T23:04:07.780

该错误意味着“没有方法可以覆盖”。您的超类或接口没有`boolean contains(Object o)`指定方法可以覆盖的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T23:04:58.717

方法

```
public boolean contains(Object o) 
```

`Team`如果使用`@Override`注解，也必须出现在超类或接口中。编译器显示找不到此*方法*。

要修复，您可以删除`@Override`标记或扩展已包含此方法的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:23:52.583

根据其他答案，一个例子是：

```
public interface Team {
    public contains(Object o);
}

public class MyTeam implements Team {     
    @Override
    public boolean contains(Object o) {
        if ((this.name).equals((String) o)) {
            return true;
        }
        else {
            return false;
        }
    }
} 
```

抽象和非抽象超类型的想法是相同的。

根据您的错误，[`@Override`](http://docs.oracle.com/javase/6/docs/api/)注释告诉 Java 编译器以下方法覆盖超类型/接口中定义的方法。

# php - 从 Slim 获取 REST 资源列表

> ID：12773605
> 
> 赞同：1
> 
> 时间：2012-10-07T23:01:53.913
> 
> 标签：php, slim

我正在为我的 RESTful 项目使用 PHP Slim 框架。

我想知道是否有可能以某种方式获取向 Slim 注册的所有回调的列表，以便获得应用程序可用的所有 REST 资源的列表？

我认为这将涉及某种预编译，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:52:10.260

我还没有使用过 Slim 框架（看起来很令人兴奋，感谢您的指点），但我最好的猜测是使用 PHPDocumentor 生成有关您的休息端点的文档。

您可以在[phpdocumentor 网站上找到它](http://www.phpdoc.org/)

# android - Android用java更改按钮背景图像？

> ID：12773606
> 
> 赞同：1
> 
> 时间：2012-10-07T23:01:57.207
> 
> 标签：android

我正在尝试在应用程序中设置一个可以静音的按钮，该按钮现在可以使用。我的新问题是我希望图像在我的 IF 语句中发生变化。

布局中的按钮代码：

```
<Button
            android:id="@+id/mute"
            android:background="@drawable/sound"
            android:layout_width="52dp"
            android:layout_height="52dp"
            android:layout_gravity="right"

     /> 
```

这是我的中频/静音代码代码：

```
 if (cmute == false){

                    Editor editor = getPrefs.edit();
                    editor.putBoolean("mute", true);
                    editor.commit();
                    Editor editor2 = getPrefs.edit();
                    editor.putBoolean("notice", true);
                    editor.commit();                  
                }
                if (cmute == true){
                    Editor editor = getPrefs.edit();
                    editor.putBoolean("mute", false);
                    editor.commit();
                    Editor editor2 = getPrefs.edit();
                    editor.putBoolean("notice", false);
                    editor.commit();
                                    } 
```

我需要向每个 IF 添加代码，一个用于在 (soundon.png) 按钮背景上显示声音，一个用于显示声音关闭 (soundoff.png) 背景按钮图像。（按钮 ID id'mute'）

非常感谢。=]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T23:31:58.920

您可以使用*setBackgroundResource*更改背景。

* * *

```
Button btn = findViewById(R.id.mute);
btn.setBackgroundResource(R.drawable.soundoff); 
```

# c++ - 如果弹出空队列，C++ 抛出异常

> ID：12773608
> 
> 赞同：3
> 
> 时间：2012-10-07T23:02:40.853
> 
> 标签：c++, exception, exception-handling, queue, try-catch

我正在使用 C++ 中的链表节点编写优先级队列的实现。

我是该语言的新手，如果有人能帮助我弄清楚在空队列上调用 pop() 函数时如何抛出异常，我将不胜感激。

我尝试使用 try and catch 异常处理，但我的代码不断收到“分段错误错误”

我的优先级队列实现正确.. push()、isEmpty()、size()、clear() 工作。pop() 也起作用，但如果用户进行非法调用，我想抛出异常。

```
try {
    if(isEmpty()) {
        throw -1;
    }
}
catch(int n) {
    cout << "ERROR" << n << ": LIST IS EMPTY" << endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:39:31.980

将整数作为异常抛出确实不是 c++ 中的完成的事情。您确实应该为该作业创建一个新异常，或者选择一个可能适合情况的现有异常 std 库。

[http://www.java2s.com/Tutorial/Cpp/0120__Exceptions/Throwyourownexceptionclassbasedonruntimeerror.htm](http://www.java2s.com/Tutorial/Cpp/0120__Exceptions/Throwyourownexceptionclassbasedonruntimeerror.htm)

是的，该域说 java，但它是一个 c++ 教程，并且有一个如何创建从 std::runtime_error 派生的自定义异常的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T01:52:48.773

您使用 throw 语句抛出异常。没有`try`或`catch`涉及。捕获异常是调用者的责任。

```
if (isEmpty())
    throw -1; 
```

# matlab - TSCS（Matlab）中滞后因变量的矩阵

> ID：12773613
> 
> 赞同：1
> 
> 时间：2012-10-07T23:03:32.277
> 
> 标签：matlab, matrix

是否有人对创建矩阵以识别用于面板大小变化的 tscs/面板分析的一个周期滞后因变量的方法有任何想法？当样本量恒定时，我可以做到这一点，但是（对我来说）随着样本量的不同而变得更加棘手。例如，如果我有一个 3 演员 (A, B, C) 3 时期 (1, 2, 3) 模型，但 C 只出现在我想要的最后 2 个时期：

```
 A1 B1 A2 B2 C2 A3 B3 C3  
A1 0  0  0  0  0  0  0  0  
B1 0  0  0  0  0  0  0  0  
A2 1  0  0  0  0  0  0  0  
B2 0  1  0  0  0  0  0  0  
C2 0  0  0  0  0  0  0  0  
A3 0  0  1  0  0  0  0  0  
B3 0  0  0  1  0  0  0  0  
C3 0  0  0  0  1  0  0  0 
```

我想这只是一个循环，它为每个面板年构造一个单位矩阵，但我只是不确定这个符号的外观。（为了清楚起见，矩阵不需要保存滞后 dv 的值，只需确定相关观察值）感谢您的帮助！

# autohotkey - 使用 autohotkey 组合两个击键序列

> ID：12773622
> 
> 赞同：1
> 
> 时间：2012-10-07T23:04:15.473
> 
> 标签：autohotkey

我想使用一个键发送一系列击键，以使用 autohotkey 完成 sublime text 2 中的某些任务。要在 sublime text 2 中设置标记，按键顺序是 Ctrl+K，然后是 Ctrl+Space。我试过了

```
#IfWinActive, ahk_class PX_WINDOW_CLASS
Numpad0::Send ^k sleep 5, Send ^+Space
#IfWinActive 
```

这将激活序列的第一部分，但也有输入 send sleep 5, Send 并尝试保存我不想做的文件的副作用。

如果我删除 (sleep 5, Send ^+Space) 我必须按下 Ctrl+Space 来完成序列以设置标记。我需要在 Ctrl+K 之后添加什么来完成使用 autohotkey 在 sublime 文本中设置标记的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T00:50:58.587

当使用 Send 时，它将尝试发送该行的其余部分。这就是为什么要输入其余部分的原因。但是，我尝试将它们分开，但它仍然无法正常工作。

以下对我有用，试一试：

```
#IfWinActive, ahk_class PX_WINDOW_CLASS
    Numpad0::Send, {CTRLDOWN}k{CTRLUP}{CTRLDOWN}{SPACE}{CTRLUP}
#IfWinActive 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T03:43:18.980

在#IfWinActive 中，您可以通过这种方式使用多行。

```
#IfWinActive, ahk_class PX_WINDOW_CLASS
Numpad0::
    Send, ^k ; Send Ctrl k
    Sleep, 5 ; Wait 5 ms (probably too short, I would use 400 ms)
    Send, ^+{Space} ; Send Ctrl Shift Space
Return
#IfWinActive 
```

在 Enter 周围添加了大括号！

# html - Firefox 15 中的 HTML5 音频

> ID：12773630
> 
> 赞同：1
> 
> 时间：2012-10-07T23:05:32.133
> 
> 标签：html, audio

我正在关注这个快速教程：

[http://code.coneybeare.net/getting-html5-audio-tag-and-flash-fallback-to](http://code.coneybeare.net/getting-html5-audio-tag-and-flash-fallback-to)

在 Firefox 15 中，OGG 和 MP3 文件都可以播放，我做错了什么？

```
<!DOCTYPE html>
    <html>
        <head>
            <script src="audio-player.js"></script>
            <script>  
                AudioPlayer.setup("player.swf", {  
                    width: 500,  
                    initialvolume: 100,  
                    transparentpagebg: "yes",  
                    left: "000000",  
                    lefticon: "FFFFFF",
                    animation: "no",
                    autostart: "yes",
                    noinfo: "yes"
                });  
            </script>  
      </head>
      <body>
      <audio id="audioplayer" preload controls autoplay="autoplay" loop style="width:424px;">
          <source src="emo.mp3">
          <source src="emo.ogg">
      </audio>
      <script type="text/javascript">
          var audioTag = document.createElement('audio');
          if (!(!!(audioTag.canPlayType) && ("no" != audioTag.canPlayType("audio/mpeg")) && ("" != audioTag.canPlayType("audio/mpeg")))) {
              AudioPlayer.embed("audioplayer", {soundFile: "emo.mp3"});
          }
      </script>
  </body>
</html> 
```

# backup - 带有 plesk 的镜像服务器的 rsync

> ID：12773631
> 
> 赞同：0
> 
> 时间：2012-10-07T23:05:40.900
> 
> 标签：backup, centos, rsync, plesk, mirror

我有 2 个带有 Plesk 10 的 linux 服务器 (centOS) 和两个许可证。我想使用 RSYNC 使第一台服务器成为主机，第二台成为镜像从机。

我知道如何转移一些文件夹（域和数据库）.. 但我有一个问题：

*如果我在主服务器上创建一个新域，我如何“更新”从服务器？*

如果我使用 rsync **vhosts**文件夹和**mysql**文件夹.. 从属 plesk 不知道我添加了一个新域..

我也必须同步**psa**文件夹？

有人可以帮我找到从主服务器到从服务器的所有“to rsync”文件夹吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:26:47.043

除了 vhosts 和 mysql，您还需要复制

*   Plesk 管理数据库（“psa”）
*   DNS 配置
*   /etc/psa、/etc/httpd 和 /etc/proftpd*

可能还有其他一些文件夹 - 您可能需要观察一段时间的更改

# google-app-engine - 使用 Objectify 进行查询：UmbrellaException

> ID：12773632
> 
> 赞同：0
> 
> 时间：2012-10-07T23:05:44.897
> 
> 标签：google-app-engine, gwt, google-cloud-datastore, objectify

我正在使用 Objectify 为我的 GWT 应用程序管理 GAE 数据存储。问题是我没有正确使用查询，我得到了 UmbrellaExceptions，如下所示：

```
Caused by: java.lang.RuntimeException: Server Error: java.lang.String cannot be cast to java.lang.Number
    at com.google.web.bindery.requestfactory.shared.Receiver.onFailure(Receiver.java:44) 
```

假设我有一个`Box`具有唯一字段的类`String id`。我想得到 Box 对象`id == "cHVQP6zZiUjM"`

这就是我现在的做法：

```
public Box getBox(String boxId)
{
    Objectify ofy = ObjectifyService.begin();
    Query<Box> q=ofy.query(Box.class).filter("id",boxId);
    Box targetBox = q.get();

    return targetBox;
}

@Entity
public class Box extends DatastoreObject{
    private String id;
    private String title;
} 
```

我尝试使用 ofy.load() 执行此操作，但该方法未在我的类 Objectify 中定义（我不知道为什么）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T23:10:38.577

您的密钥已编码。尝试使用：

```
 Box targetBox = ofy.get(Box.class, KeyFactory.stringToKey(boxId)); 
```

解码您的密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:57:17.867

简短的回答：您的实体中缺少 @Id 注释。

长答案：ID 字段在数据存储中是特殊的。id 不是真实属性，而是标识实体的 Key 的一部分。您不能真正过滤 id 字段，但可以过滤名为`__key__`. Objectify 在让您通过 id 字段进行过滤并将其转换为幕后过滤器方面有些聪明`__key__`，但是如果您没有正确注释实体，它就无法做到！

实际上我有点困惑，因为 Objectify 不应该让你在没有 @Id 字段的情况下注册实体。

顺便说一句，文档有两个部分：Objectify4（即将发布）和 Objectify3。由于您使用的是 Ofy3，因此没有 load() 方法。

另一件事：当操作等效时（如您的示例中所示），按键操作比查询更受青睐。

# javascript - 没有 CoffeeScript 的 TowerJS？

> ID：12773634
> 
> 赞同：1
> 
> 时间：2012-10-07T23:05:53.113
> 
> 标签：javascript, node.js, coffeescript, towerjs, coffeekup

我只是在研究 Node.js Web 开发中的可能性。我习惯用 ASP.NET MVC 3 编码，所以 TowerJS 和 Geddy 对我来说看起来很友好和熟悉（因为 MVC 模式）

但是我不太喜欢 CoffeeScript（因为它奇怪的语​​法和调试问题），所以如果我可以在不使用 CoffeeScript 的情况下使用 Tower，我会很高兴 - 如果我可以使用简单的 JavaScript 代替。是否可以？如果我去他们的网站，我到处都能看到 CoffeeScripts……

（如果我也可以使用另一个模板引擎（因为 CoffeeKup 也使用 CoffeeScript），我会很高兴，并且我将其更改为更像[Razor 的引擎](https://github.com/cstivers78/bliss/wiki)。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T01:15:45.390

目前 Tower 开发是使用 coffeescript 完成的。未来计划有一个 javascript api，虽然我不知道还有多远。在这成为可能之前，有一些复杂的问题需要解决。

编辑：向 Tower 添加 Javascript API 已成为框架的优先事项，因此我希望这会比我最初回答时的预期更快实现。应该很快吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:05:27.220

也许你应该试试 Geddy。[http://geddyjs.org](http://geddyjs.org)

# css - CSS 边框间距属性简写

> ID：12773635
> 
> 赞同：0
> 
> 时间：2012-10-07T23:05:59.460
> 
> 标签：css, border-spacing

在我看来，大多数 CSS 属性的两项标准是“上/下、左/右”。至少，除了边框间距之外，我所知道的一切都是这种情况。

边框间距的“左/右，上/下”简写是故意的吗？它每次都让我感到困惑，也许 w3 没有注意到它是不一致的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T23:10:56.830

这有点不同，因为与`border-width`or之类的不同`margin`，只接受两个值：

```
border-width: 10px 50px 10px 50px; /* valid */
border-spacing: 10px 50px 10px 50px; /* invalid */ 
```

您可能可以将其归结为这种差异。

每当您看到其他接受（最多）4 个值的属性的简写时：

```
border-width: 10px 50px; 
```

它只是意味着底部和左侧的值是从另一侧复制的：

```
border-width: 10px 50px 10px 50px;
/*            top  right btm left    */ 
```

或具有三个值：

```
border-width: 10px 50px 20px; 
```

这等于：

```
border-width: 10px 50px 20px 50px; 
```

# google-apps-script - 动态 html onClick

> ID：12773636
> 
> 赞同：0
> 
> 时间：2012-10-07T23:06:23.000
> 
> 标签：google-apps-script

所以我在玩 GAS 的 HTML 服务。它一直运行良好（或多或少）。但我现在碰壁了。我希望脚本（在 html 文件中）在调用时创建一些 html。特别是一些标签。但是，我希望这些标签具有 onClick 处理程序（它将编辑 div 元素）。现在的问题是 onClick 应该依赖于某些属性并且我不能预先创建这些对象，它们必须务实地制作，并且由于某种原因，当我在新代码之后添加 onClick="someFunction(elementID)" 时添加到旧的点击处理程序消失。（如果处理函数没有参数，它仍然有效）

```
eg.
var div="<div id=\"box"+count+"\" class=\"square\" insert></div>";

if(something)

div=div.replace("insert", "onclick=\"myFunction(box"+count+"\""); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:38:52.827

这是有意的并记录在案：请参阅[HtmlService 用户指南中名为“动态添加脚本或外部 CSS”的部分](https://developers.google.com/apps-script/html_service#Caja)。

# linux - sched_rt_entity 中数据成员的含义

> ID：12773637
> 
> 赞同：0
> 
> 时间：2012-10-07T23:06:46.953
> 
> 标签：linux, linux-kernel, kernel

下面是linux调度中RT策略实体类的代码。

```
struct sched_rt_entity {
     struct list_head run_list;
     unsigned long timeout;
     unsigned int time_slice;

     struct sched_rt_entity *back;
     #ifdef CONFIG_RT_GROUP_SCHED
     struct sched_rt_entity  *parent;
     /* rq on which this entity is (to be) queued: */
     struct rt_rq            *rt_rq;
     /* rq "owned" by this entity/group: */
     struct rt_rq            *my_q;
     #endif
}; 
```

`back`当列表已经实现时需要什么数据成员。

我也不明白组调度策略是如何实现的，特别是为什么需要`my_rq`以及`rt_rq`谁会`parent`指出。

`timeout`还有数据成员的含义是什么。

**PS：** 我有很多很多这样的问题，任何人都可以建议一个好的阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T21:52:30.930

使用组调度时，不是单个队列，而是组树及其队列。例如，当两个用户各有一个调度组时，整个组/队列可能会为每个用户组分配 50% 的 CPU，而所有用户的程序都在他们组的队列中并竞争这 50%。有关多个队列如何工作的更详细说明，请参阅[CFS 组调度](http://lwn.net/Articles/240474/)。

`parent`指向树中上一层的实体；`rt_rq`是该实体运行`my_q`的队列，而 是该实体的子实体运行的队列。

该`back`字段在函数中用作临时存储`dequeue_rt_stack()`以实现堆栈，其中我们有一个指向最低实体的指针，但希望从顶层实体开始删除它们。

`timeout`由看门狗定时器增加，用于检查任务是否占用 CPU 时间不超过`RLIMIT_RTTIME`.

* * *

没有关于最近内核更改的书籍。 *使用来源，卢克。*

# .net - 果园如何处理模块

> ID：12773638
> 
> 赞同：3
> 
> 时间：2012-10-07T23:06:50.447
> 
> 标签：.net, asp.net-mvc, module, orchardcms

我正在考虑构建自己的模块化 MVC4 应用程序，我喜欢 orchard 处理模块的方式，我想从中获取设计队列，甚至可能完全复制它（为什么要重新发明轮子？）。

我已经阅读[了这篇](http://docs.orchardproject.net/Documentation/How-Orchard-works)文章，并且查看了源代码，我对此有一点了解。

但是，如果熟悉该系统的人可以解释果园如何加载、卸载和跟踪模块，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T03:46:38.583

Bertrand 的评论让我看到了这个[http://docs.orchardproject.net/Documentation/Orchard-module-loader-and-dynamic-compilation](http://docs.orchardproject.net/Documentation/Orchard-module-loader-and-dynamic-compilation)

它对如何处理模块加载有一个公平的解释。

# php - Codeigniter 图片上传图片（有些图片倒置）

> ID：12773639
> 
> 赞同：1
> 
> 时间：2012-10-07T23:06:56.923
> 
> 标签：php, codeigniter, codeigniter-2

通过“上传”库上传图片时遇到了一个奇怪的问题。

当我有巨大的照片时，比如 1.8mb 大，它总是把它们倒过来上传。

否则正常上传。

我的上传模型看起来像这样

```
function do_upload() {

    $this->gallery_path = realpath(APPPATH . '../public/images');

    $config = array(
        'upload_path' => $this->gallery_path,
        'allowed_types' => 'jpg|jpeg|gif|png',
        'max_size' => 2000
    );

    $this->load->library('upload',$config);
    $this->upload->do_upload();
    $image_data = $this->upload->data();

    //to db
    $filename=$image_data['file_name'];

    $this->db->set('name', $filename);
    $this->db->insert('images');

} 
```

谁能解释一下为什么会这样？我试图增加最大尺寸以查看它是否有帮助，但它没有。

非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:42:06.817

尝试设置上传配置：

```
$config['max_size'] = 0; 
```

# c++ - 非平凡可复制类型的值表示

> ID：12773640
> 
> 赞同：5
> 
> 时间：2012-10-07T23:07:43.817
> 
> 标签：c++, object, memory-model

我对标准中的以下段落（*ISO/IEC 14882:2011(E)*的§3.9/4）很感兴趣：

> 类型对象的*对象表示*是类型对象占用的*N*`T`个对象的序列，其中*N*等于。对象的*值表示*是保存 type 值的一组位。对于普通可复制类型，值表示是对象表示中确定*值*的一组位，该值是实现定义的一组值的一个离散元素。^(42) *`unsigned char``T`*`sizeof(T)`*`T`***

 ***我了解*对象表示*和*值表示*是不同的，以允许某些对象表示不参与对象的值（例如，填充）。不过，我不太明白可复制的类型。非平凡可复制类型没有值吗？非平凡可复制类型的部分值表示是否可以存在于其对象表示之外？

注释 42 解释：

> 目的是 C++ 的内存模型与 ISO/IEC 9899 编程语言 C 的内存模型兼容。

我仍然不明白为什么前面的语句只专门用于可复制的类型。这有什么意义？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T23:18:08.520

标准示例是管理资源的类：

```
struct Foo
{
    Bar * p;

    Foo() : p(new Bar) { }
    ~Foo() { delete p; }

    // copy, assign
}; 
```

类型的对象`Foo`有一个值，但该值不能通过复制对象表示来复制（`p`在这种情况下，这只是 的值）。复制类型的对象`Foo`需要复制类的语义*，**即*“对象拥有指针”。因此，一个合适的副本需要一个合适的、用户定义的副本构造函数：

```
Foo::Foo(Foo const & rhs) : p(new Bar(*rhs.p)) { } 
```

现在，类型对象的`Foo`对象表示不同于此类对象的副本的对象表示，尽管它们具有相同的值。

相反，只要对象表示重合，an 的值`int`就与另一个的值相同。`int`（由于填充，这是一个充分但不是必要的条件。）***

# mysql - 如何创建用于设置理发店约会的日历？

> ID：12773645
> 
> 赞同：0
> 
> 时间：2012-10-07T23:08:28.220
> 
> 标签：mysql

我有一个理发师表（barberId、名字、姓氏） 我有一个客户表（clientId、名字、姓氏）

理发店只接受预约。我需要哪些表格才能创建一个系统，客户可以在其中查看日历、查看哪些理发师可用，并与理发师预约？

理发师没有固定的时间表：理发师可能在这里和那里有几个小时。因此，客户必须查看日历以查看可用性。

我正在使用 MySQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T23:36:54.113

有太多方法可以做到这一点，这取决于您的业务需求。首先，我将重命名`clientele`为`clients`它会更容易使用，设置变量时更容易复数等等。

如果理发师有 3 小时的空闲时间，是否意味着 1 小时的 3 次预约？如果某个客户需要 2 小时怎么办？在这种情况下会发生什么？

假设每个需要 1 小时。您可以创建一个名为`appointments`,的表`appointment_id, barber_id, client_id, start_time, end_time`。预约可以由理发师或经理创建，client_id 在预约时设置。如果您想查看可用的空位，您将查询 DB 以获取满足`start_time, end_time`要求且没有`client_id`. 您可以按特定时间过滤`barber_id`或显示所有可用时间及其各自的理发师。

# c - ANSI C - 数组上的更高元素

> ID：12773650
> 
> 赞同：-3
> 
> 时间：2012-10-07T23:09:30.990
> 
> 标签：c, arrays, numbers, ansi

我的代码有一些问题，以获得 5 个元素的数组中的最高数字，这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

float timerunner1[4];
int x;

int main() {

for(x=1;x<6;x++) {
    printf("Give me the time of runner 1: ");
    scanf("%f",timerunner1[x]);
}
return 0;
} 
```

这完美地工作，输出是：

```
Give me the time of runner 1:  14
Give me the time of runner 1:  3
Give me the time of runner 1:  10
Give me the time of runner 1:  5
Give me the time of runner 1:  2 
```

如何获得数组的最高和最低数量？也许使用 for 或 if .. 如何？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:19:07.067

它实际上不起作用，您需要使用运算符'&'的地址将值存储在数组中。

scanf("%f", &timerunner1[x]);

此外，您的数组不够大，无法存储循环所需的 6 个整数，并且数组的下标从零开始，到 5 结束（对于 6 个元素）。

然后，您可以在读取所有值后进行另一个循环以计算最大值，也可以按如下方式即时计算：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

float timerunner1[6];
int x;
float maximum = 0.0f;

int main() {

for (x = 0; x < 6; x++) {
    printf("Give me the time of runner 1: ");
    scanf("%f", &timerunner1[x]);
    maximum = maximum > timerunner1[x] ? maximum : timerunner1[x];
}

printf("%f\n", maximum);

return 0;
} 
```

此外，此代码仅适用于正值，因为最大值被初始化为零并且始终大于任何负值，如果您需要负值，您应该能够进行实验并弄清楚这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T23:31:35.583

好的，在这个程序中，您必须手动加载每个玩家的时间。

```
/* StackFlow

Find the highest of an array of 5 numbers */

#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main(void) {

    float timerunner1[ 5 ] ={ 0 };
    float highest;
    int highestindex, i;

    /* Data input*/
    for( i = 0; i < 5; i++ ){
            printf( "\nEnter the %d element of the array: ", i );
            scanf( %f, timerunner1[ i ] );
    }

    /* Considering that the first generated number is the highest*/
    highest = timerunner1[ 0 ];
    highestindex = 0;

    /* The first element of an array is [0] not [1]*/
    for( i = 1; i < 5; i++ ) {

        /* if the next element in the array is higher than the previous*/
        if ( highest < timerunner1[ i ]){
            highest = timerunner1[ i ];
            highestindex = i;
        }

    }

    printf("\nThe highest time of the runner %d is: %f \n", highestindex, highest);
    return 1;
} 
```

# ios - 将工具栏添加到情节提要中的 ViewController

> ID：12773653
> 
> 赞同：1
> 
> 时间：2012-10-07T23:10:02.087
> 
> 标签：ios, ipad, storyboard, uitoolbar, segue

我正在使用故事板创建一个 iPad 应用程序。在主视图上，我有一个工具栏和一个栏按钮项，我们称之为“显示”。然后我将一个表格视图控制器拖到情节提要中。我还在文件中添加了 UITableViewController 的子类，并将拖动的表视图控制器的类设为该子类。我做了一个从“显示”按钮到表格视图控制器的弹出框。它工作正常，这意味着当按下“显示”时，我会看到弹出窗口显示我在表格视图中设置的正确数据。我似乎无法弄清楚如何在弹出窗口中的表格视图顶部放置一个工具栏。我退后一步，使用 UIViewController 而不是 UITableViewController，但仍然无法通过将工具栏拖动到视图来添加工具栏。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T03:08:01.517

我最终将 TableViewController 放在 NavigationController 中，将后者放在 PopoverController 中，所有这些都在代码中，而不使用 IB。我发现这是一个比其他任何可能有效的方法更容易获得工具栏的解决方案。

# windows-8 - 我可以使用 LIVE ID 在 Windows 8 日历中插入提醒吗？

> ID：12773654
> 
> 赞同：1
> 
> 时间：2012-10-07T23:10:08.827
> 
> 标签：windows-8, windows-runtime, windows-live-id

我正在使用 c# & XAML 开发一个 Windows 8 应用商店应用程序。

我想使用 Live ID SDK 连接到日历以便在那里安排提醒。

这条路线是否可行，从 Windows 8 应用商店应用程序是否正确？如果是这样，这将是一个很好的样本？

谢谢 EitanB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T02:15:14.943

您可以使用 Live SDK 在用户日历中创建事件，前提是他们使用他们的实时 ID 登录并批准它。[您可以在http://msdn.microsoft.com/en-us/library/live/hh826523.aspx](http://msdn.microsoft.com/en-us/library/live/hh826523.aspx)找到更多详细信息和示例

# tabs - 在另一个片段/视图中的单击按钮上重置微调器

> ID：12773656
> 
> 赞同：1
> 
> 时间：2012-10-07T23:10:40.667
> 
> 标签：tabs, fragment

我开始从事 Java/Android 开发。我正在制作一个带有多个选项卡和滑动导航的调查类型应用程序。（基于 SDK/eclipse 示例）。

我有一个片段（选项卡）用一些微调器为视图充气，我需要在另一个片段中创建一个重置按钮，将所有微调器重置到位置 0。

带有微调器的片段。

```
public class Viagem extends Fragment
{

 public Spinner spinLinhaO;

    public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    }

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{
    View view2 = inflater.inflate(R.layout.activity_viagem, container, false);

     final Spinner spinLinhaO = (Spinner) view2.findViewById(R.id.spinnerO1);

        // with the adapter to populate it 

 } 
```

带有按钮的片段。

```
 public class Inicio extends Fragment
{ 

    @Override
        public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState)
    { 

        View view3 = inflater.inflate(R.layout.activity_menu, container, false);

        final Button button = (Button) view3.findViewById(R.id.buttonInq);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view3) { 
         Viagem.spinLinhaO.setSelection(0); //this does not work
 } 
```

你能帮我解决这个问题吗？

# google-cloud-messaging - 谷歌云消息不返回规范 ID

> ID：12773660
> 
> 赞同：3
> 
> 时间：2012-10-07T23:11:29.530
> 
> 标签：google-cloud-messaging

我故意将我的应用程序多次注册到 GCM 以测试规范 id 概念，但云没有将其返回给我。请参阅下面的服务器日志，它是同一台设备，我可以在 Android 日志中看到它收到了四次消息。但是我从来没有从谷歌那里得到一个规范的 id，我误解了什么？

```
[INFO  com.bipper.filters.PushUpdatesFilter] method: POST  childId: 13  has pending updates: true  url: /mybipperapi/do/parents/1/children/13/usagelimits

[INFO  com.bipper.services.gcm.GcmSenderService] registrationId: APA91bHQIWguRXvpVrg7Xh1nOsUqqbephClS9KkuuFf0eg3fkfgjkmvi1o-0WaSwWWdWwqXw9e3X80OsZwdINr1ufBjEXQJ5om48lL6q8bH3Vrlaf5U11FbyzQdVvzGy-3QBqahc_nMh9FeiL2sBzU0KPGG3y9xtYg

[INFO  com.bipper.services.gcm.GcmSenderService] Sent message to one device: [ messageId=0:1349650679774901%d3cfcce76e2555b5 ]

[INFO  com.bipper.services.gcm.GcmSenderService] registrationId: APA91bE9Vl_qijVdpFTqlJXA2OHyaF2cjKaCi8ZvNrD5r2woNs_TSuJgVuxn7RIF3pef6vdtd2MMV1TrWnusbGPXy4uWT4KJBhuAoAYgCjbXJduv-oz13_xICIKYOZTAFH2OpuC8E1Hw65KN6N4QukxG0W4Zor8jSg

[INFO  com.bipper.services.gcm.GcmSenderService] Sent message to one device: [ messageId=0:1349650679857971%d3cfcce76e2555b5 ]

[INFO  com.bipper.services.gcm.GcmSenderService] registrationId: APA91bEzQag9HBPbrR0wtaSuR3HA5NV795ZuDzxwQJVnQfc2r1lDv0gUXxc6GikUJDWMiUSge-b0BS1Tz2yIr8flpBqmAdpgQnatvP19PVm9zd8PopE51T-NJkfqqX65oPfKkx93Os7qS8_-IokjbyNIOK5FDCsrAQ

[INFO  com.bipper.services.gcm.GcmSenderService] Sent message to one device: [ messageId=0:1349650679940798%d3cfcce76e2555b5 ]

[INFO  com.bipper.services.gcm.GcmSenderService] registrationId: APA91bG_nVU-8VM9JSbTlxjAuseJ4LZG75BOoP5kd85garpcW698w4uwGWCy3dkUt3pXiXWhAV-KLPuEr-vw4_yARwjma2U46KXjmEoBwkTaVNi9t5M4sKRtqaKGZTcsaoa_Ng4EenVw41QFTi2At75946WR3Qu7jQ

[INFO  com.bipper.services.gcm.GcmSenderService] Sent message to one device: [ messageId=0:1349650680044947%d3cfcce76e2555b5 ]

[WARN  com.bipper.filters.PushUpdatesFilter] results has size 4, this is fishy

[INFO  com.bipper.filters.PushUpdatesFilter] [ messageId=0:1349650679774901%d3cfcce76e2555b5 ]
[INFO  com.bipper.filters.PushUpdatesFilter] [ messageId=0:1349650679857971%d3cfcce76e2555b5 ]
[INFO  com.bipper.filters.PushUpdatesFilter] [ messageId=0:1349650679940798%d3cfcce76e2555b5 ]
[INFO  com.bipper.filters.PushUpdatesFilter] [ messageId=0:1349650680044947%d3cfcce76e2555b5 ] 
```

文档（[链接](http://developer.android.com/guide/google/gcm/adv.html#canonical)）说：

> 规范 ID
> 
> 在服务器端，只要应用程序运行良好，一切都应该正常工作。但是，如果应用程序中的错误触发同一设备的多个注册，则可能很难协调状态，并且您最终可能会收到重复的消息。
> 
> GCM 提供了一种称为“规范注册 ID”的工具，可以轻松地从这些情况中恢复。规范注册 ID 定义为您的应用程序请求的最后一次注册的 ID。这是服务器在向设备发送消息时应使用的 ID。
> 
> 如果稍后您尝试使用不同的注册 ID 发送消息，GCM 将照常处理请求，但它将在响应的 registration_id 字段中包含规范注册 ID。确保使用此规范 ID 替换存储在您服务器中的注册 ID，因为最终您使用的 ID 将停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:53:33.863

当您从 GCM 解析结果时，您必须手动检查它是否返回一个 canonicalId。

```
String canonicalRegId = result.getCanonicalRegistrationId(); 
```

然后，您必须确保使用此新 ID 推送到设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T09:45:50.877

根据[谷歌文档](https://developers.google.com/cloud-messaging/http#response)，

> 当纯文本请求成功（HTTP 状态码 200）时，响应正文包含 1 或 2 行键/值对形式。第一行始终可用，其内容是 id=已发送消息的 ID 或 Error=GCM 错误代码。第二行（如果可用）的格式为 registration_id=canonical ID。**第二行（包含规范 id）是可选的，只有在第一行没有错误时才能发送。**

*   如果存在规范 id，pgratton 是正确的，您将必须解析结果并使用**result.getCanonicalRegistrationId();**

*   即使在推送后收到成功响应后，规范 id 也可以为空。在大多数情况下，它将为 null，这意味着您推送的令牌是可以的，无需替换它。当令牌发生变化时（例如，在谷歌刷新令牌的情况下）并且如果我们仍然使用旧令牌推送，我猜您会在您的响应中收到规范 id，您必须用它替换旧令牌.

*   如果您的推送也返回失败响应，则响应中不会出现规范 ID。

# javascript - Knockout.Mapping 为简单的 JSON 数组创建映射钩子

> ID：12773661
> 
> 赞同：1
> 
> 时间：2012-10-07T23:11:29.363
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

当为 knockout.js 使用 knockout.mapping 插件时，我可以自定义集合中项目的创建方式，如下所示：-

```
var ItemModel = function (data) {
    ko.mapping.fromJS(data, {}, this);
    this.FooProperty = ...;
};

var mapping = {
    'Items': {
        create: function (options) {
            return new ItemModel(options.data);
        }
    }
} 
```

this.Items = ko.mapping.fromJS（数据，映射）；

这假定数据包含一个包含集合的属性“Items”。但是如果 data 只是一个 JSON 数组呢？如何将我的创建函数挂钩到传入数据的顶级根中的项目？

从查看文档来看，映射对象中的键似乎可以是要作用的数据的属性名称，也可以是包含、忽略、复制之一。由此，我看不出如何实现我想要的，除非我将传入的 JSON 包装到一个具有属性的对象中，映射它，然后解包结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T23:43:09.447

您可以`create`在映射对象的顶层放置一个函数来处理根对象：

像：

```
var mapping = {
    create: function(options) {

    }
}; 
```

或者，您可以像这样传递它：

```
ko.mapping.fromJS({ Items: data }); 
```

但听起来你可能试图避免这样做。

# javascript - 如果下拉菜单有 2 个或更多选项可供选择，如何使用 javascript 检查？

> ID：12773666
> 
> 赞同：0
> 
> 时间：2012-10-07T23:13:18.710
> 
> 标签：javascript

我有一个已经显示的文本框，但我还有一个选择框，用户可以在其中选择一座建筑物，它会显示另一个选择框，其中包含更多选项，具体取决于用户选择的建筑物。第二个选择框总是有选项`new`

我的问题是，如果用户从选择框中选择了某个建筑物，程序必须检查该建筑物是否除了选项之外还有更多选项`new`，如果有，那么文本框应该消失，但如果建筑物只有选项，那么`new`文本框必须留在那里，第二个选择框需要消失。

我尝试使用类似的东西：

```
if (secondbox.length==1){
secondbox.style.display='none'} 
```

但它在我换到另一座建筑物后才起作用，而不是立即工作。

Javascript: if (comm.length == 1){ comm.style.display='none'; comm.disabled=真；comm.value=''; comm.style.visibility='隐藏';

```
 textNumber.style.visibility='visible';
    textNumber.disabled=false;
    textNumber.focus();

    textic.style.visibility='hidden';
    textic.disabled=true;
    textic.value='';

    document.getElementById('btnComm').value='Add';}
else {
    comm.style.display='';
    comm.disabled=false;
    comm.style.visibility='visible';

    textNumber.style.visibility='hidden';
    textNumber.disabled=true;
    textNumber.value='';

    textic.style.visibility='hidden';
    textic.disabled=true;
    textic.value='';

    document.getElementById('btnComm').value='Update';} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T23:33:00.693

只需这样做：

```
if(document.getElementById("selectBoxId").childNodes.length >= 2) {
   //The select box has 2 or more options...
} 
```

# php - 单引号导致我的错误控制台出错

> ID：12773667
> 
> 赞同：0
> 
> 时间：2012-10-07T23:13:46.443
> 
> 标签：php, javascript

我有一个带引号的情况。如果我输入一段带有单引号的文本（一个问题），例如：

> 格林先生的狗叫什么名字？

然后我突然收到一条错误消息：

> 语法错误：参数列表后缺少 )

然后它在控制台中显示：

> parent.addwindow('格林先生的狗叫什么？, '5', '1', 'AD', 'Single', 'A');

我的问题是我可以更改下面代码中的任何内容以允许问题单引号吗？另外，我上面的一些列实际上是 int 数据类型，那么如何删除它们周围的单引号？最后，还有其他可能在未来引起问题的角色吗？（双引号、句号、逗号等）

我不太清楚问题出在哪里，所以我发布了主要代码，以便您找到问题所在。（如果您知道问题出在哪里，请告诉我问题出在哪里，以便我可以删除除相关代码之外的所有代码，以便我可以减少代码供将来用户查看）：

```
<script type="text/javascript">

function trim (el) {
    el.value = el.value.
       replace (/(^\s*)|(\s*$)/gi, ""). // removes leading and trailing spaces
       replace (/[ ]{2,}/gi," ").       // replaces multiple spaces with one space 
       replace (/\n +/,"\n");           // Removes spaces after newlines
    return;
}

</script>

<?php

  function make_values_referenced (&$arr) { 
    // The fact the you even need to do this is exactly why I recommend PDO_mysql
    // over MySQLi
    $refs = array(); 
    foreach ($arr as $key => $value) {
      $refs[$key] = &$arr[$key];
    }
    return $refs;
  }

  // Determine whether to do database query
  // Using preg_split() prevents empty search terms
  if (!empty($_GET['searchQuestion']) && ($terms = preg_split('/\s+/', $_GET['questioncontent'], -1, PREG_SPLIT_NO_EMPTY))) {

    // A temp array to hold the terms after they have been constructed
    $termArray = array();

    // We'll need to use this a few times so we'll cache it
    $numTerms = count($terms);

    // Loop $terms and create an array of strings that can be used with LIKE clauses
    foreach ($terms as $term) {
      // The str_replace() allows users to include literal % and _ in the search terms
      $termArray[] = '%'.str_replace(array('%', '_'), array('\%', '\_'), $term).'%';
    }

    // Build the query
    $questionquery = "
SELECT DISTINCT q.QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT(an.Answer ORDER BY an.Answer SEPARATOR ' ') AS Answer, r.ReplyType, 
       q.QuestionMarks 
  FROM Answer an 
  INNER JOIN Question q ON q.AnswerId = an.AnswerId
  JOIN Reply r ON q.ReplyId = r.ReplyId 
  JOIN Option_Table o ON q.OptionId = o.OptionId 
      WHERE ".implode(" AND ", array_fill(0, $numTerms, "q.QuestionContent LIKE ?"))."
      GROUP BY q.QuestionId, q.SessionId
      ORDER BY ".implode(", ", array_fill(0, $numTerms, "IF(q.QuestionContent LIKE ?, 1, 0) DESC"))."
    ";

    // Make the referenced array
    $referencedArray = make_values_referenced(array_merge(
      array(str_repeat("ss", $numTerms)), // types
      $termArray,                         // where
      $termArray                          // order by
    ));

    // ...or die() is evil in production but I shall assume we are debuggin so I won't complain
    if (!$stmt = $mysqli->prepare($questionquery)) {
      die("Error preparing statement: $mysqli->error"); 
    }

    // Bind parameters
    if (!call_user_func_array(array($stmt, 'bind_param'), make_values_referenced($referencedArray))) {
      die("Error binding parameters: $stmt->error"); 
    }

    // Execute
    if (!$stmt->execute()) {
      die("Error executing statement: $stmt->error"); 
    }

    // This will hold the search results
    $searchResults = array();
    $searchOption = array();
    $searchNoofAnswers = array();
    $searchAnswer = array();
    $searchReply = array();
    $searchMarks = array();

    // Fetch the results into an array
    if (!$stmt->num_rows()) {
      $stmt->bind_result($dbQuestionContent,$dbOptionType,$dbNoofAnswers,$dbAnswer,$dbReplyType,$dbQuestionMarks); 
      while ($stmt->fetch()) {
        $searchResults[] = $dbQuestionContent;
        $searchOption[] = $dbOptionType;
        $searchNoofAnswers[] = $dbNoofAnswers;
        $searchAnswer[] = $dbAnswer;
        $searchReply[] = $dbReplyType;
        $searchMarks[] = $dbQuestionMarks;
      }
    }

  }

  $inputValue = !empty($terms) ? htmlspecialchars(implode(' ', $terms)) : '';

if (isset($_GET['searchQuestion'])) {

  // If $terms is not empty we did a query
  if (!empty($terms)) {

      $questionnum = sizeof($searchResults);

    // If $searchResults is not empty we got results
    if (!empty($searchResults)) {
      echo "<p>Your Search: '$inputValue'</p>";  
      echo"<p>Number of Questions Shown from the Search: <strong>$questionnum</strong></p>";
      echo "<table border='1' id='resulttbl'>
      <tr>
      <th class='questionth'>Question</th>
      <th class='optiontypeth'>Option Type</th>
      <th class='noofanswersth'>Number of <br/> Answers</th>
      <th class='answerth'>Answer</th>
      <th class='noofrepliesth'>Number of <br/> Replies</th>
      <th class='noofmarksth'>Number of <br/> Marks</th>
      </tr>";
      foreach ($searchResults as $key=>$question) {
        echo '<tr class="questiontd"><td>'.htmlspecialchars($question).'</td>';
        echo '<td class="optiontypetd">'.htmlspecialchars($searchOption[$key]).'</td>';
        echo '<td class="noofanswerstd">'.htmlspecialchars($searchNoofAnswers[$key]).'</td>';
        echo '<td class="answertd">'.htmlspecialchars($searchAnswer[$key]).'</td>';
        echo '<td class="noofrepliestd">'.htmlspecialchars($searchReply[$key]).'</td>';
        echo '<td class="noofmarkstd">'.htmlspecialchars($searchMarks[$key]).'</td>';
        echo "<td class='addtd'><button type='button' class='add' onclick=\"parent.addwindow('$question','$searchMarks[$key]','$searchNoofAnswers[$key]','$searchOption[$key]','$searchReply[$key]','$searchAnswer[$key]');\">Add</button></td></tr>";
}
      echo "</table>";
    } 

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:18:20.347

如果您尝试使用 PHP 将数据写入 JavaScript 变量，最好的办法是[`json_encode()`](http://us3.php.net/manual/en/function.json-encode.php)在写入之前将其转换为正确的 JS 格式。

# java - tic tac toe 将运行时间减少到 O(N)

> ID：12773671
> 
> 赞同：3
> 
> 时间：2012-10-07T23:14:57.983
> 
> 标签：java, algorithm, time-complexity

在这本[很棒的书中](https://rads.stackoverflow.com/amzn/click/com/098478280X)，我们被要求设计一种算法来判断某人是否在井字游戏中获胜。给出了以下解决方案，之后作者说：

> 请注意，通过添加行数和列数数组（以及对角线的两个总和），运行时间可以减少到 O(N)

我很努力，但我无法弄清楚那句话的意思。这些数组和总和是如何相加的？谢谢 ！

```
enum Piece { Empty, Red, Blue };
enum Check { Row, Column, Diagonal, ReverseDiagonal }

Piece getIthColor(Piece[][] board, int index, int var, Check check) {
  if (check == Check.Row) return board[index][var];
  else if (check == Check.Column) return board[var][index];
  else if (check == Check.Diagonal) return board[var][var];
  else if (check == Check.ReverseDiagonal)      
    return board[board.length - 1 - var][var];      

  return Piece.Empty;
}

Piece getWinner(Piece[][] board, int fixed_index, Check check) {    
  Piece color = getIthColor(board, fixed_index, 0, check);
  if (color == Piece.Empty) return Piece.Empty;
  for (int var = 1; var < board.length; var++) {
    if (color != getIthColor(board, fixed_index, var, check)) {
      return Piece.Empty;
    }
  } 
  return color;
}

Piece hasWon(Piece[][] board) {
  int N = board.length;
  Piece winner = Piece.Empty;

  // Check rows and columns
  for (int i = 0; i < N; i++) {

    winner = getWinner(board, i, Check.Row);
    if (winner != Piece.Empty) {
      return winner;
    }       

    winner = getWinner(board, i, Check.Column);     
    if (winner != Piece.Empty) {
      return winner;
    }

  }     

  winner = getWinner(board, -1, Check.Diagonal);
  if (winner != Piece.Empty) {
    return winner;
  }     

  // Check diagonal     
  winner = getWinner(board, -1, Check.ReverseDiagonal);
  if (winner != Piece.Empty) {
    return winner;
  } 

  return Piece.Empty;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T23:21:25.250

每次在棋盘中放置新棋子时，您将相应的行、列和（可能）对角线计数器增加 1。您可以为玩家提供单独的计数器，或者使用 +1/-1。

现在当你检查棋盘时，你只需要检查这个计数器是否等于 N，这可以在`O(N)`(2N+2 个计数器) 中完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T23:23:24.020

他们可能的意思是，当您放置片段时，您会更新片段贡献的每个数组的总和。即对应的行和列。如果它在对角线上，那么你也更新它。

在更新方面，如果是红色则加 1，如果是蓝色则减 1。如果您的计数从 0 开始，那么如果该值达到 -3 或 3，您就有赢家。

# meteor - 如何最好地解决显示流星集合之前的延迟？

> ID：12773672
> 
> 赞同：3
> 
> 时间：2012-10-07T23:15:03.697
> 
> 标签：meteor, loading, user-experience, webpage-rendering

在显示集合中的项目之前，meteor 似乎做了一些处理，使客户端窗口没有更新。如果您在一台合理的机器上浏览[http://madewith.meteor.com](http://madewith.meteor.com) ，您可以现场观看。我的 2.6GHz 4GB RAM 笔记本电脑需要大约 5 秒来呈现列表中的项目，在此期间没有任何进度指示，并且匆忙的新用户可以合理地相信页面已完成加载。

有没有办法以增量方式显示集合中的项目，以便服务器将网络上的第一个数据项推送给客户端，浏览器呈现它们，同时接收新项目？类似于 HTTP 的[分块传输](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)。

或者是在加载集合时显示微调器图形的唯一解决方案，类似于[https://atmosphere.meteor.com/](https://atmosphere.meteor.com/)所做的（“做一些聪明的事情”消息）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T01:40:37.170

如果您检查 makewith 应用程序的 xhr，您会看到所有（目前为 87 个）应用程序都加载在同一个请求中。所以我认为在这种情况下“增量”显示数据不会有帮助。

问题只是流星应用程序需要一段时间来初始化。我不确定将来是否可以改进，但就目前而言，是的，我认为显示微调器是最好的解决方案。

关于如何知道数据何时准备好，您可以`onReady`在集合上使用回调，或查看此[PR](https://github.com/meteor/meteor/pull/273)以获得更好的解决方案。

# command-line - 无法在 Windows 命令行上解压缩 Chef 食谱 - 无法识别“tar”

> ID：12773674
> 
> 赞同：1
> 
> 时间：2012-10-07T23:15:51.450
> 
> 标签：command-line, tar, chef-infra

不幸的是，坚持使用 Windows 命令行而不是 Linux bash ......

从命令行安装厨师食谱时使用

```
knife cookbook site install COOKBOOK 
```

COOKBOOK.tar.gz 文件将下载但不会解压缩。如何在 Windows 命令行中实现这一点？

收到的错误信息

`ERROR: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '1'
...
STDERR: 'tar' is not recognized as an internal or external command, operable program or batch file`

我需要做什么才能让食谱按正常方式自动安装？

**编辑**：附加信息：cygwin & ruby​​ 也已安装。
tar 包已安装并且可以使用解压缩文件

```
tar xvzf apt.tar.gz 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-05T14:19:31.287

如果你安装了 git windows 然后使用 git bash shell

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T15:43:58.780

问题在于 Windows 中的 PATH 变量。

确保 PATH 环境变量不包含任何空格。

如果有空格，请将其删除或
将适用于您的 chef 安装的路径移动到 PATH 变量的开头

```
D:\Programs\Git\cmd;D:\Programs\cygwin\bin;D:\Programs\chef\bin;RESTOFPATH 
```

# java - 如何将图像添加到图像阵列？

> ID：12773676
> 
> 赞同：1
> 
> 时间：2012-10-07T23:16:40.400
> 
> 标签：java, arrays, image, applet

我正在制作一个小程序，它根据 10 个随机整数显示 10 张卡片的随机集合。

我的想法是制作一个包含 52 张可显示卡片（不包括小丑）的数组，并根据这样的随机整数显示数组中的每张卡片（对不起，我不知道如何使用代码块）：

```
for (int i = 0; i<cards.length; i++) { //cards being my image array
     //code that displays each image
} 
```

但是我在尝试将图像添加到数组中时遇到了麻烦，我也不知道如何显示数组中的图像。

我应该像这样添加它们：

```
Image[] cards = new Image[52];
cards[0] = c1;   //name of the Ace of Clubs, I had used getImage() to already get it 
```

前面的语句抛出错误，说这是一个非法的开始。

合并图像后，我还需要帮助来显示图像，因为我不认为：

```
System.out.println(cards[x]); 
```

将使用图像。

在此先感谢并抱歉看起来如此复杂，我已尝试尽可能地淡化它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:44:10.963

所以，这是我的愚蠢看法......

![在此处输入图像描述](../Images/ca931b71a519a70f4190ad222ea446c7.png)

```
public class RandomCards {
    public static void main(String[] args) {
        new RandomCards();
    }

    public RandomCards() {

        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {

                try {
                    JFrame frame = new JFrame();
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    frame.setLayout(new BorderLayout());
                    frame.add(new RandomCardsPane());
                    frame.pack();
                    frame.setLocationRelativeTo(null);
                    frame.setVisible(true);
                } catch (Exception exp) {
                    exp.printStackTrace();
                }

            }

        });

    }

    public class RandomCardsPane extends JPanel {

        // A list is a collection of Image objects...
        private List<Image> cardList;
        private Image card = null;

        public RandomCardsPane() throws IOException {

            // My cards are stored in the default execution location of the program
            // and are named "Card_1.png" through "Card_51.png"...
            // You image loading process will be different, replace it here..

            // ArrayList is a dynamic list (meaning it can grow and shrink
            // over the life time of the list) and is backed by an array
            // which shouldn't concern you, the only thing you really need to
            // know is that it has excellent random access...
            cardList = new ArrayList<Image>(51);
            for (int index = 0; index < 51; index++) {
                cardList.add(ImageIO.read(new File("Card_" + index + ".png")));
            }

            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    card = cardList.get(Math.min((int)Math.round(Math.random() * cardList.size()), 51));
                    repaint();
                }
            });
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            if (card != null) {
                int x = (getWidth() - card.getWidth(this)) / 2;
                int y = (getHeight() - card.getHeight(this)) / 2;
                g.drawImage(card, x, y, this);
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(225, 315);
        }
    }
} 
```

我也更喜欢`ImageIO`甚至`Toolkit.getImage`，`ImageIcon`除了它保证在方法返回之前加载图像数据这一事实之外，它还支持更多的图像格式并且可以通过插件扩展......

# sql-server - 存储过程插入两行？

> ID：12773679
> 
> 赞同：0
> 
> 时间：2012-10-07T23:17:07.500
> 
> 标签：sql-server, stored-procedures

我使用 T-SQL 创建了一个存储过程。

我使用这个查询运行它

```
EXEC insertfbusers email, name 
```

但是在 SQL Server Management Studio 中对其进行测试时，它会两次插入同一行，这会导致主键冲突。

主键位于电子邮件列上。

为什么要插入两行？

这是我的程序

```
SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
GO

-- ================================
-- Created 
--    by: dbo
--    on: Monday, October 08, 2012 1:10 AM
-- Description: <Description>
-- ================================
ALTER PROCEDURE dbo.insertfbusers
 -- Add the parameters for the procedure here
 @email varchar(100),
 @firstname varchar(50)
AS
BEGIN
SET NOCOUNT ON;

-- Insert statements for procedure here
INSERT INTO t_user VALUES (@email, @firstname)

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:43:26.147

我修好了！我昨天使用的基于在线的管理员一定很奇怪。我今天从 SQL MANAGEMENT STUDIO 运行代码，它就像一个魅力。

无论如何感谢您的帮助！

# wordpress - Wordpress CPT 和自定义分类档案

> ID：12773691
> 
> 赞同：0
> 
> 时间：2012-10-07T23:19:37.727
> 
> 标签：wordpress

我设置了 4 种自定义帖子类型。文章、媒体帖子、研讨会和锻炼。我希望每个人都有自己的一组可以分类的类别。我需要他们的每个类别都可以通过 URL 访问，并列出该类别中该类型的帖子。

这可能吗？我在 3.1 上，修改了二十个主题。我不会问，但我们要在这里尝试 2 天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:18:14.500

您可以使用自定义分类法对自定义帖子类型进行分类：[http ://codex.wordpress.org/Taxonomies](http://codex.wordpress.org/Taxonomies)

自定义分类法可以在不同的帖子类型之间共享（或不共享）......

# java - 如何使用 SSLv2 启动 ssl 连接

> ID：12773692
> 
> 赞同：2
> 
> 时间：2012-10-07T23:19:45.937
> 
> 标签：java, ssl, network-programming, jsse

我想使用 SSLv2 启动与远程服务器的 SSL 连接。我正在使用 Java。我尝试使用以下方法在我的套接字中获取支持的协议：

```
String[] suppProtocols=socket.getSupportedProtocols();
System.out.println("The protocols supported for this socket are: 
"+Arrays.toString(suppProtocols)); 
```

我在输出中得到了这个：

```
[SSLv2Hello, SSLv3, TLSv1, TLSv1.1, TLSv1.2] 
```

现在，我读到 Java 不支持 SSLv2，而 SSLv2Hello 只使用 SSLv2 发送 hello 消息。我无法理解这是什么意思？和客户端支持 SSLv2 不一样吗？如何使用 SSLv2 建立 SSL 连接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T23:48:40.293

SSLv3 和 TLSv1.x 提供了一种将其 Client Hello 消息包装在 SSLv2 Client Hello 中的方法，如[TLS 规范中所述：*与 SSL 的向后兼容性*](https://www.rfc-editor.org/rfc/rfc4346#appendix-E)。SSLv3 和 TLS 1 及更高版本具有更一致的版本协商机制。正如 TLS 规范所说：

> 发送版本 2.0 客户端问候消息的功能将被淘汰，并且会尽快进行。实施者应该尽一切努力尽快向前推进。3.0 版为迁移到新版本提供了更好的机制。

Sun/Oracle JRE 或 OpenJDK 不支持 SSLv2。将 SSLv3+ 消息包装成 SSLv2 消息只是为了向后兼容。Java 7 中的客户端现在[默认禁用](http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html)它。从服务器的角度来看，它至少可以接受以这种方式将其 Client Hello 消息包装在 SSLv2 消息中的其他 SSLv3+ 客户端，无论它们是否支持 SSLv2。

[您将在此问题](https://stackoverflow.com/a/4686924/372643)中找到有关 Java 支持（包括其他实现）的更多详细信息。

一般来说，SSLv2 被认为是不安全的：您根本不应该使用它。总体趋势是从 SSLv3 转向 TLS 1.0 或更高版本，而不是倒退。

# java - PlayFramework 多个 SLF4J 绑定

> ID：12773694
> 
> 赞同：4
> 
> 时间：2012-10-07T23:20:17.553
> 
> 标签：java, playframework, playframework-2.0, sbt, slf4j

我正在尝试完成一些模型的一些基本单元测试。但是我收到以下错误。现在看来我有两个 SLF4J 绑定。这是因为我使用的是 Mahout，它有一个版本的 SLF4J，而 Play 有自己的版本。

谁能告诉我如何解决这个问题？

SLF4J：有关说明，请参见[http://www.slf4j.org/codes.html#multiple_bindings](http://www.slf4j.org/codes.html#multiple_bindings)。SLF4J：在类路径上检测到 jcl-over-slf4j.jar 和 slf4j-jcl.jar，抢占 StackOverflowError。SLF4J：有关更多详细信息，另请参阅[http://www.slf4j.org/codes.html#jclDelegationLoop](http://www.slf4j.org/codes.html#jclDelegationLoop)。

```
java.lang.ExceptionInInitializerError
at org.slf4j.impl.StaticLoggerBinder.<init>(StaticLoggerBinder.java:82)
at org.slf4j.impl.StaticLoggerBinder.<clinit>(StaticLoggerBinder.java:51)
at org.slf4j.LoggerFactory.bind(LoggerFactory.java:121)
at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:111)
at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:268)
at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:241)
at play.api.Logger$.<init>(Logger.scala:178)
at play.api.Logger$.<clinit>(Logger.scala)
at play.api.Application.<init>(Application.scala:106)
at play.api.test.FakeApplication.<init>(Fakes.scala:141)
at play.test.FakeApplication.<init>(FakeApplication.java:24)
at play.test.Helpers.fakeApplication(Helpers.java:86)
at databaseTest.startApp(databaseTest.java:31)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:71)
at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:199)
at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:62)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)

Caused by: java.lang.IllegalStateException: Detected both jcl-over-slf4j.jar AND slf4j-jcl.jar on the class path, preempting StackOverflowError. See also http://www.slf4j.org/codes.html#jclDelegationLoop for more details.
at org.slf4j.impl.JCLLoggerFactory.<clinit>(JCLLoggerFactory.java:64)
... 32 more 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T05:17:23.767

尝试

```
"org.apache.mahout" % "mahout-core" % "0.7" excludeAll(ExclusionRule(organization = "org.slf4j")) 
```

获取您的 mahout 依赖项。

Play 中有更多关于图书馆管理的信息（它使用 SBT）：[https ://github.com/harrah/xsbt/wiki/Library-Management](https://github.com/harrah/xsbt/wiki/Library-Management)

# assembly - 使用 Lodsb 或 mov 打印 .ascii 声明

> ID：12773695
> 
> 赞同：0
> 
> 时间：2012-10-07T23:20:36.083
> 
> 标签：assembly, x86, gnu-assembler

我正在编写这个引导加载程序，它只是在屏幕上打印出一些东西。这就是我迄今为止在组装中所拥有的：

```
 .globl _start

    .code16

_start:

    movw $0x0003, %ax
    int $0x10

    movb $0x0e, %ah
    movb $0x69, %al
    int $0x10

    movw $_header, %bx
    movb %bl, %al
    int $0x10

_header: .ascii "W\0"

    .org 0x1FE

    .byte 0x55
    .byte 0xAA 
```

所以现在它打印 ASCII 69（“i”），但我希望它也打印`.ascii`声明。现在我只设置了它，`"W"`所以我可以很容易地找到它`Objdump`。我似乎无法访问该值（57）。我可以`leal $_header, %edx`等等，但是我似乎无法访问`%edx`.

我尝试使用`lodsb`，但我似乎无法弄清楚。我设置`%di`为 0x00，并设置`%si`为 with 的地址，`_header`但`leal %si, _header`随后我的`lodsb`后面`int 0x10`似乎没有打印任何内容。任何想法我都会很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T02:01:35.917

这里：

```
movw $_header, %bx
movb %bl, %al 
```

首先，`movb %bl, %al`不是从内存中读取一个字节到 中`al`，而是从 中读取一个字节`bl`。您想将其更改为：

```
movb (%bx), %al 
```

要只取出一个字符，`_header`可以`al`直接从内存中加载该字符：

```
movb _header, %al 
```

其次，也是最重要的，您似乎做了几个假设：

1.  您的代码以`cs`=0x7c0, `ip`=0 开始运行。它可以是`cs`=0, `ip`=0x7c00 ，但是您的代码期望`ip`=0 （我从代码中推断出汇编程序开始使用隐式汇编它`.org 0`）。您应该使您的代码对第二个选项具有弹性。您可以使用跳转指令重新加载`cs`和`ip`更合适的值，如下所示：`jmp $0x7c0,$_next`以及下一行的相应标签：`_next:`。
2.  您的代码以`ds`=0x7c0 开始运行。`ds`不保证设置为您可能想要或需要的任何值。你必须自己初始化它。

最后，最后一个之后会发生什么`int $0x10`？

通过更正，您的代码应如下所示：

```
 .globl _start

    .code16

_start:
    /* .org 0 is implied here! But the code may start with ip != 0\. */

    jmp $0x7c0,$_next
_next:
    /* We have just ensured that cs=0x7c0,ip=$_next */

    /* Let's now load data segment registers with proper values */
    movw %cs, %ax
    movw %ax, %ds
    movw %ax, %es

    movw $0x0003, %ax
    int $0x10

    movb $0x0e, %ah
    movb $0x69, %al
    int $0x10

    movw $_header, %bx
    movb (%bx), %al /* read into al a byte from memory at address from bx */
    int $0x10

    /* Halt execution, don't just execute whatever garbage is in memory */
    /*after the end of the code. */
_halt:
    hlt
    jmp _halt

_header: .ascii "W\0"

    .org 0x1FE

    .byte 0x55
    .byte 0xAA 
```

# java - 从 Android 相机测量光强度

> ID：12773697
> 
> 赞同：12
> 
> 时间：2012-10-07T23:20:36.883
> 
> 标签：java, android, eclipse, camera, light

所以我想知道当手指在安卓设备的相机上按下闪光灯时，你将如何测量不同的光强度。我已经在整个互联网上阅读了有关曝光、光传感器等的信息，但我不知道从哪里开始 :(。到目前为止，我已经制作了一个程序，可以使用表面支架和表面视图打开相机，同时打开闪光灯。我把拇指放在相机上，我可以看到我的拇指变成了粉红色，整个拇指区域的颜色变化很小。我怎样才能从相机中获取这些信息并将它们用于其他事情，比如测量心率？ 太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-10T09:27:43.377

你想做什么？我假设您正在尝试通过手指中的血量来测量心率。所以基本上你有两种状态，一种血多，一种血少。

我会像 Totoo 提到的那样测量图片的平均亮度。在你知道如何做到这一点之后，制作一个程序，从图片中识别手指处于什么状态 - 比如说，如果平均亮度小于 50，你的心脏就会跳动，进入状态 2。否则，它没有't，它将处于状态 1。

在你知道如何做到这一点之后，你就可以知道它何时从状态 1 切换到状态 2，反之亦然。通过将状态开关的数量除以（经过的时间 * 2），您将获得心率。

希望我有所帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-12T07:48:38.020

您可能想要调查查看红光和蓝光之间的比率，而不是绝对亮度。您可能会发现这种测量有助于消除绝对亮度测量中可能存在的一些共模噪声。

当你的血液没有被氧化时，它实际上并不会变成蓝色，但它会变成不同的红色。您也许可以使用该相机进行原始的 O2 饱和度测量。如果您想与一些真实数据相关联，您可以在当地药房以不到 50 美元的价格购买一个用于 O2 饱和度/脉搏计的实际家用仪表。我相信“真正的”传感器将红外测量与红光相关联。

您可能还想查看是否需要禁用图像传感器的某种自动白平衡（这将是您使用的任何设备的特定型号）。

# python - 附加嵌套列表 - 它应该以这种方式工作吗？

> ID：12773702
> 
> 赞同：0
> 
> 时间：2012-10-07T23:22:01.167
> 
> 标签：python

> **可能重复：**
> [Python 列表中的意外功能](https://stackoverflow.com/questions/240178/unexpected-feature-in-a-python-list-of-lists)
> [如何在 Python 中初始化二维数组？](https://stackoverflow.com/questions/2397141/how-to-initialize-a-two-dimensional-array-in-python)

我想创建一个 nsize 的嵌套列表，然后根据标准将项目一个一个附加到其中。

为此，我写了如下（nsize = 4）

```
a = [[]] * 4  # which creates on display a = [ [] , [] , [] , [] ] 
```

现在我做了这样的事情`a[1].append(3)`，这给了我输出`[[3], [3], [3], [3]]`

我在这里做错了什么？不应该只用值 3 更新第二个列表（ a[1] ）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T23:23:31.593

您正在做什么创建一个列表，其中包含对同一子列表的 4 个引用。

你需要做类似的事情`a = [[] for _ in xrange(4)]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T23:26:55.953

是的，它应该以这种方式工作，尽管它经常令人惊讶。相当于这个

```
b=[]
a=[b]*4 
```

那么当你说`a[1].append(3)`的时候，就像说一样`b.append(3)`。并且由于`a`包含对同一列表的四个引用，因此您在 print 时会看到它出现了四次`a`。

# mod-rewrite - 为什么这个 RewriteRule 不适用于这个 URL？

> ID：12773706
> 
> 赞同：0
> 
> 时间：2012-10-07T23:23:12.577
> 
> 标签：mod-rewrite, url-rewriting, apache2

我正在使用这个`RewriteRule`：

```
RewriteEngine On
RewriteRule ^video/(.*)\.php$ /?video=$1 [L] 
```

要重写此 URL：

```
http://someSite.com/?video=bla-bla 
```

如下：

```
http://someSite.com/video/bla-bla.php 
```

但实际上什么也没发生。有人知道为什么吗？我使用在线工具和我自己的服务器对其进行了测试。

**编辑：标题字符串可以包含所有内容。所以它必须匹配一切。** 编辑 2：它应该是 bla-bla.php 而不是 bla-bla。

# asp.net - 下拉值未保存在表中

> ID：12773708
> 
> 赞同：0
> 
> 时间：2012-10-07T23:23:26.250
> 
> 标签：asp.net

我希望今天能在这里得到一些帮助，因为我正在努力找出为什么会发生这种情况。我在编辑模式的详细视图中有下拉列表，因此当从下拉列表中选择类别并点击更新按钮时；它不会保存在我的表中选择的类别。它显示一个 NULL 值。这是我的代码：ASPX 代码：

```
<asp:DetailsView ID="DetailsView2" runat="server" OnDataBound="DV_DataBound"  AutoGenerateRows="False" 
    BackColor="#CCCCCC" BorderColor="#999999" BorderStyle="Solid" BorderWidth="3px" 
    CellPadding="4" CellSpacing="2" DataKeyNames="Post_ID" 
    DataSourceID="DetailsEntryView_DS" ForeColor="Black" Height="50px" 
    Width="800px" DefaultMode="Edit">
    <EditRowStyle BackColor="#FFFFCC" Font-Bold="True" ForeColor="#003366" BorderStyle="Groove" />
    <Fields>
        <asp:BoundField DataField="Post_ID" HeaderText="RCA ID" ReadOnly="True" SortExpression="Post_ID" />
        <asp:TemplateField HeaderText="Root Cause Category" SortExpression="Root_Cause_Category">           
            <EditItemTemplate>
                <asp:DropDownList ID="ddlCountry" runat="server" AppendDataBoundItems="True" 
                    AutoPostBack="True" DataSourceID="DD_DS" 
                    DataTextField="Root_Cause_Category" DataValueField="Root_Cause_Category" > 
                </asp:DropDownList> 

                <asp:SqlDataSource ID="DD_DS" runat="server" 
                    ConnectionString="<%$ ConnectionStrings:DSRConnectionString %>" 
                    SelectCommand="SELECT DISTINCT [Root_Cause_Category] FROM [RCA_Category_List]">
                </asp:SqlDataSource>

            </EditItemTemplate> 
```

//这是后面的代码：

```
 protected void DV_DataBound(object sender, EventArgs e)
    {
        if (DetailsView2.CurrentMode == DetailsViewMode.Edit)
        {
            //Find Drop down list from aspx page
            DropDownList ddlCountry = DetailsView2.FindControl("ddlCountry") as DropDownList;
            //check ddlCountry is not null || country drop down list is found
            if (ddlCountry != null)
            {
                //Bind countries data to ddlCountry 
                ddlCountry.DataTextField = "Root_Cause_Category";
                ddlCountry.DataValueField = "Root_Cause_Category";
                ddlCountry.DataSource = DD_DS;
                //custom method that gets all countries 
                ddlCountry.DataBind();
            }
        }
    } 
```

那么我在这里缺少什么？

# c++ - fork() 到底在做什么？在我的 C++ 程序中

> ID：12773711
> 
> 赞同：0
> 
> 时间：2012-10-07T23:24:39.560
> 
> 标签：c++, fork, process

> **可能的重复：**
> [用 c 语言处理 fork](https://stackoverflow.com/questions/6210638/working-of-fork-in-c-language)

我有一个非常简单的程序，我正在尝试理解 fork() 现在，在我的程序中，fork() 每次遇到 fork() 或上面的行（作为父级）时都会复制整个程序？

我得到了奇怪的结果，这使得它更难理解。

```
#include <iostream>
#include <unistd.h>
using namespace std;

int main()                  
{                       
cout << "Ha! " << endl;         
fork();                     
cout << "Ho! " << endl;         
fork();                 
cout << "He! " << endl;         

} 
```

输出：

```
apple.seed@wint:~$ ./program1
Ha! 
Ho! 
He! 
Ho! 
He! 
apple.seed@wint:~$ He! 
He! 
```

在 fork() 点，操作系统将创建一个与父进程完全相同的新进程（无论它是什么？）。这意味着前面谈到的所有状态都被复制了，包括打开的文件、寄存器状态和所有内存分配，其中包括程序代码。（所以当程序到达 fork() 时，整个程序都被复制了？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T23:32:23.553

```
 He!     <-- original
             /
        Ho! <
       /     \
      /       He!     <-- forked from original's second fork call
     /
Ha! <          
     \
      \       He!     <-- forked from origin's first fork call
       \     /
        He! <
             \    
              He!     <-- forked from the first fork 

              ^
              |
              +----------- after second forks 
```

`<`= 分叉调用。

# python - 如何修改 Python 代码以便将多个相邻的“位置”标记打印到单行输出

> ID：12773712
> 
> 赞同：1
> 
> 时间：2012-10-07T23:24:41.423
> 
> 标签：python, beautifulsoup

我是 python 新手，我正在尝试使用以下代码将 .xml 文件中标识为位置的所有标记打印到 .txt 文件中：

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(open('exercise-ner.xml', 'r'))

tokenlist = soup.find_all('token')

output = ''

for x in tokenlist:

   readeachtoken = x.ner.encode_contents()

   checktoseeifthetokenisalocation = x.ner.encode_contents().find("LOCATION")

   if checktoseeifthetokenisalocation != -1:

   output += "\n%s" % x.word.encode_contents()

z = open('exercise-places.txt','w')

z.write(output)

z.close() 
```

该程序运行，并吐出所有作为位置的标记的列表，每个标记都打印在输出文件中自己的行上。然而，我想做的是修改我的程序，以便当美丽的汤发现两个或多个被标识为位置的相邻标记时，它可以将这些标记打印到输出文件中的同一行。有谁知道我可以如何修改我的代码来完成这个？如果您能提供任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-25T22:58:12.483

这个问题很老了，但我刚收到@Amanda 的注释，我想我会发布我的任务方法，以防它可能对其他人有所帮助：

```
import glob, codecs
from bs4 import BeautifulSoup

inside_location = 0
location_string = ''

with codecs.open("washington_locations.txt","w","utf-8") as out:
    for i in glob.glob("/afs/crc.nd.edu/user/d/dduhaime/java/stanford-corenlp-full-2015-01-29/processed_washington_correspondence/*.xml"):
        locations = []

        with codecs.open(i,'r','utf-8') as f:
            soup   = BeautifulSoup(f.read())
            tokens = soup.findAll('token')
            for token in tokens:
                if token.ner.string     == "LOCATION":
                    inside_location = 1
                    location_string += token.word.string + u" "
                else:
                    if location_string:
                        locations.append( location_string )
                        location_string = ''

        out.write( i + "\t" + "\t".join(l for l in locations) + "\n" ) 
```

# ios - 停止背景层菜单吸收触动 Cocos2D

> ID：12773716
> 
> 赞同：2
> 
> 时间：2012-10-07T23:25:48.283
> 
> 标签：ios, xcode, cocos2d-iphone

我已经使用 Cocos2D 为我的 iPhone 应用程序创建了一个滑出设置菜单，通过将一个带有设置菜单的图层移到另一个有游戏菜单的图层上，一切正常......但是你仍然可以点击通过设置菜单在游戏菜单上的菜单项，坦率地说，我不想这样做；）有没有简单的方法来设置菜单项，使它们不响应用户输入？或者我应该在设置菜单中创建一个可以吸收任何触摸的透明覆盖菜单项？

这是我的代码：

```
- (void)addButtons: (int) screenSize {

    CCMenuItemImage *goPlay = [CCMenuItemImage  itemWithNormalImage:@"playButtonUnpressed.png"
                                                  selectedImage:@"playButtonPressed.png"
                                                         target:self
                                                       selector:@selector(onPlay:)];
CCMenuItemImage *goSettings = [CCMenuItemImage itemWithNormalImage:@"settingsButtonUnpressed.png"
                                                     selectedImage:@"settingsButtonPressed.png"
                                                            target: self
                                                          selector:@selector(onSettings:)];
CCMenuItemImage *goFacebook = [CCMenuItemImage itemWithNormalImage:@"facebook.png"
                                                     selectedImage:@"facebook.png"
                                                            target: self
                                                          selector:@selector(onFacebook:)];
CCMenuItemImage *goTwitter = [CCMenuItemImage itemWithNormalImage:@"twitter.png"
                                                    selectedImage:@"twitter.png"
                                                           target: self
                                                         selector:@selector(onTwitter:)];
CCMenuItemImage *goWebsite = [CCMenuItemImage itemWithNormalImage:@"website.png"
                                                    selectedImage:@"website.png"
                                                           target: self
                                                         selector:@selector(onWebsite:)];
 CCMenu *play = [CCMenu menuWithItems: goPlay,goSettings,goFacebook,goTwitter,goWebsite,nil];

[self addChild: play];
// Add menu image to menu
play.position = ccp(0,0);

if (self.iPad) {

    goPlay.position = ccp(64, 64);
    goSettings.position = ccp(128,128);

    // Add menu to this scene
}
else if (screenSize < 490){

    goPlay.position = ccp(85, 85);
    goSettings.position = ccp(235,85);
    goFacebook.position = ccp(275,445);
    goTwitter.position = ccp(275,402);
    goWebsite.position = ccp(275,359);

    // Add menu to this scene
}
}

- (void) onSettings: (id) sender{
CGPoint onScreenPoint = ccp(0, 0);
id actionMove = [CCMoveTo actionWithDuration:0.3
                                    position:onScreenPoint];
[_settings runAction:[CCSequence actions:actionMove, nil]];
} 
```

如果您需要查看其他内容，请告诉我......但我很确定可以使用上面的代码给出解决方案:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T01:13:53.583

您可以在游戏层菜单的检查中创建一个布尔检查以查看它们是否被触摸。例如，由于您使用 CCMenus，只需将其添加到选择器中：

```
if(!settingsMenuOut)//checks to see if settingsMenuOut (a bool) is false,
                    //if its true it won't do whatever it normally would.
{ 
   //do the menu stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T10:34:41.627

我通过更改菜单本身的 isTouchEnabled 解决了这个问题：

```
e.g.

//ENABLE when settings displayed
settingsChoiceMenu.isTouchEnabled = TRUE; 

//DISABLE when going back to main scene
settingsChoiceMenu.isTouchEnabled = FALSE; 
```

# list - 在列表中查找对

> ID：12773721
> 
> 赞同：0
> 
> 时间：2012-10-07T23:27:00.757
> 
> 标签：list, haskell

我试图在列表中查找元素对，假设它们是列表中唯一的对，并且不超过 3 个相同的连续元素。

我有一个函数，它接收一个列表，并返回该对的第一个元素的索引（如果有的话）。如果不是，则返回 -1

```
searchForPairs xs = searchHelp xs ((genericLength xs) - 1)
    where searchHelp xs n
        | searchHelp xs 0 = -1              -- no pairs found
        | (xs !! n) == (xs !! (n - 1)) = n
        | otherwise = searchHelp xs n-1 
```

由于某种原因，它返回错误：

```
Couldn't match expected type `Bool' with actual type `Int'
In the expression: n
In an equation for `searchHelp':
    searchHelp xs n
      | searchHelp xs 0 = - 1
      | (xs !! n) == (xs !! (n - 1)) = n
      | otherwise = searchHelp xs n - 1
In an equation for `searchForPairs':
    searchForPairs xs
      = searchHelp xs ((genericLength xs) - 1)
      where
          searchHelp xs n
            | searchHelp xs 0 = - 1
            | (xs !! n) == (xs !! (n - 1)) = n
            | otherwise = searchHelp xs n - 1 
```

似乎它应该工作。任何想法为什么不是？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T04:49:22.083

我无法完全理解您想要做什么，但从代码来看，您似乎正在尝试在列表中找到两个相等的连续元素。`!!`您可以使用模式匹配来提取列表的前两个元素，检查它们是否相等，如果不相等，则继续搜索其余部分（包括第二个元素），而不是使用来索引列表。如果列表没有至少两个元素，则返回`Nothing`

```
searchForPairs xs = go 0 xs where
  go i (x1:xs@(x2:_)) | x1 == x2 = Just i
                      | otherwise = go (i+1) xs
  go _ _ = Nothing 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T03:51:49.380

@gereeter 已经解释了您的错误，我只想指出，如果找不到答案，您不*应该*返回`-1`。`Nothing`相反，如果没有答案并且`Just pos`答案是，您应该返回`pos`。这可以保护您免受多种错误的影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T23:34:06.747

你有两个问题。第一个是在这一行：

```
 | otherwise = searchHelp xs n-1 
```

编译器将其解释为`(searchHelp xs n) - 1`，而不是`searchHelp xs (n-1)`，如您所愿。第二个问题是你使用警卫：

```
 | searchHelp xs 0 = -1              -- no pairs found 
```

由于`searchHelp xs 0`不是布尔表达式（您想将其用作模式），因此编译器拒绝了它。我可以看到两个简单的解决方案：

```
searchForPairs xs = searchHelp xs ((genericLength xs) - 1)
    where searchHelp xs n
        | n == 0 = -1              -- no pairs found
        | (xs !! n) == (xs !! (n - 1)) = n
        | otherwise = searchHelp xs (n-1) 
```

和

```
searchForPairs xs = searchHelp xs ((genericLength xs) - 1)
    where
      searchHelp xs 0 = -1         -- no pairs found
      searchHelp xs n
        | (xs !! n) == (xs !! (n - 1)) = n
        | otherwise = searchHelp xs (n-1) 
```

现在，不幸的是，虽然这可行，但效率非常低。这是因为您使用`!!`. 在 Haskell 中，列表是链表，因此`xs !! n`需要 n 步，而不是 1 步。这意味着您的函数所花费的时间是列表长度的二次方。为了纠正这个问题，你想沿着列表向前循环，使用模式匹配：

```
searchForPairs xs = searchHelp xs 0 where
    searchHelp (x1 : x2 : xs) pos
        | x1 == x2 = pos
        | otherwise = searchHelp (x2 : xs) (pos + 1)
    searchHelp _ _ = -1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-22T10:13:59.203

对于它的价值，这里有一个你正在尝试做的有点惯用（和无点）的实现：

```
searchPairs :: Eq a => [a] -> Maybe Int
searchPairs = interpret . span (uncurry (/=)) . (zip <*> tail)
    where
    interpret (flag, res) = if null flag then Nothing else Just $ length res 
```

说明：`zip <*> tail`创建连续元素对的列表（使用阅读器应用类型类）。`uncurry (/=)`测试这样的一对是否由相同的元素组成。最后，`interpret`将结果转换为`Maybe Int`类型值。

# python - 使用 Python 列出 Linux 中的所有传入连接

> ID：12773722
> 
> 赞同：1
> 
> 时间：2012-10-07T23:27:24.097
> 
> 标签：python, linux

我试图让 Python 监听我的网络并列出所有传入的连接，只要它运行。但我撞到了一堵砖墙，似乎找不到怎么做。有什么建议么？使用 Python 2.7.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T02:15:38.337

@millimoose：我不认为他需要/想要使用 python 监听所有套接字。他们更有可能的是 [Python 绑定到 libpcap](http://pylibpcap.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T02:19:30.027

您可以使用`netstat`列出所有传入的网络连接。甚至有人写了一个 Python 实现：http `netstat`: [//voorloopnul.com/blog/a-python-netstat-in-less-than-100-lines-of-code/](http://voorloopnul.com/blog/a-python-netstat-in-less-than-100-lines-of-code/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:35:34.073

您的问题在细节上非常含糊，但如果您只想查看与您的机器的入站连接，您只需几行 python 就可以做到这一点。

```
from socket import *

rawSocket = socket(AF_INET, SOCK_RAW, IPPROTO_TCP)
rawSocket.bind(('IP_ON_IFACE_TO_LISTEN_ON', 0))

while True:

    data = rawSocket.recv(2048)

    # http://en.wikipedia.org/wiki/IPv4#Packet_structure

    # Internet Header Length; Have to determine where the IP header ends
    ihl = ord(data[0]) & 15
    ip_payload = data[ihl*4:]

    # http://en.wikipedia.org/wiki/Transmission_Control_Protocol#TCP_segment_structure

    # Match SYN but not SYN/ACK
    if (ord(ip_payload[13]) & 18) == 2:
        src_addr = inet_ntoa(data[12:16])
        dst_addr = inet_ntoa(data[16:20])

        # Could use struct.unpack, might be clearer
        src_port = (ord(ip_payload[0]) << 8) + ord(ip_payload[1])
        dst_port = (ord(ip_payload[2]) << 8) + ord(ip_payload[3])

        src_str = (src_addr+':'+str(src_port)).ljust(22)
        dst_str = (dst_addr+':'+str(dst_port))

        print "%s=> %s" % (src_str, dst_str) 
```

这将打印所有设置了 SYN 标志的入站 TCP 数据包，无论 RST 或 ICMP 响应如何。您的问题是“列出所有传入连接”，因为 UDP 是无连接的，我*认为*这就是您要问的。

FWIW

# c - 带有数据结构指针参数的 C 函数

> ID：12773723
> 
> 赞同：0
> 
> 时间：2012-10-07T23:27:25.110
> 
> 标签：c, pointers, data-structures

我有一个程序可以创建一个排序的链接列表，经过测试它可以创建列表。尝试删除列表中的元素时出现了我的问题。这些类型是隐藏的，您将在代码中看到参数`void* newObj`，并且结构具有用于进行实际比较的函数指针。

我的代码段错误，我相信这是因为列表的头部没有更新，所以是按值传递的问题，但我不知道如何解决它。

功能：

```
int SLRemove(SortedListPtr list, void *newObj)
{
    SortedListPtr temp;
    SortedListPtr temp2;

    if(list->CompareFcn(newObj, list->value) == 0)
    {
        if(list->flag == 1)
        {
            return 0;
        }
        temp = list;
        list = list->next;
        printf("(if)Address of object: %p with value %d, freed.\n", temp, *(int*)temp->value);
        free(temp);
        printf("New head of list is, address: %p, value: %d.\n", list, *(int*)list->value);
        return 1;
    }
    for (temp = list; temp != NULL; temp = temp->next)
    {
        printf("Address of TEMP: %p\n", temp);
        temp2 = temp->next;
        if(temp2->CompareFcn(newObj, temp2->value) == 0)/*value == *newObj*/
        {
            temp->next = temp2->next;
            printf("(loop)Address of object: %p, freed.\n", temp2);
            free(temp2);
            return 1;
        }
    }

    return 0;
} 
```

呼叫者：

```
for (icount = 1; icount <= 3; icount += 1)
    {
        *ptr[icount-1] = icount;
        printf("Removing...\n");
        printf("Current head of list to be removed, address: %p, value: %d.\n", integerList, *(int*)integerList->value);
        if (SLRemove(integerList, ptr[icount-1]) == 1)
        {
            printf("SLRemove number %d, success!\n\n", icount);
            free(ptr[icount-1]);
        }
        else
        {
            printf("SLRemove number %d failed!\n\n", icount);
        }
    } 
```

瓦尔格林：

```
Removing...
Current head of list to be removed, address: 0x51f1040, value: 1.
Comparing newObj: 1 and item: 1\. Returning 0.
(if)Address of object: 0x51f1040 with value 1, freed.
New head of list is, address: 0x51f1140, value: 2.
SLRemove number 1, success!

==23304== Invalid read of size 8
==23304==    at 0x400826: main (main.c:63)
==23304==  Address 0x51f1040 is 0 bytes inside a block of size 32 free'd
==23304==    at 0x4C2A82E: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==23304==    by 0x400B8D: SLRemove (sorted-list.c:176)
==23304==    by 0x400805: main (main.c:60)
==23304== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:32:24.533

您正在`list`SLRemove() 内部进行修改，但由于它是按值传递的，因此该更改永远不会返回给调用者。尝试

```
int SLRemove(SortedListPtr *list_ptr, void *newObj)
{
  SortedListPtr list = *list_ptr;
  .
  .
  .
    *list_ptr = list;
    return 1;
  .
  .
  .
} 
```

当你调用它时，使用：

```
 if (SLRemove(&integerList, ptr[icount-1]) == 1) 
```

# css - 使用 CSS 的不规则网格

> ID：12773724
> 
> 赞同：-1
> 
> 时间：2012-10-07T23:28:56.440
> 
> 标签：css, layout, grid

我正在尝试使用以下网格显示图像：

![在此处输入图像描述](../Images/cfef66c2e5722851f281fa1f84486bd0.png)

当它们在左侧时，我无法将 2 个较小的缩略图堆叠在一起，就像在第一行一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T02:09:03.917

这是实现这种网格的一种方法。（小提琴：http: [//jsfiddle.net/joplomacedo/ygtYx/](http://jsfiddle.net/joplomacedo/ygtYx/)）

的HTML...

```
<div class="row">
    <div class="col narrow stack">
        <div>img goes here...</div>
        <div>img goes here...</div>
    </div>
    <div class="col large">img goes here...</div>
    <div class="col narrow">img goes here...</div>
</div>

<div class="row">
    <div class="col narrow">img goes here...</div>
    <div class="col large">img goes here...</div>
    <div class="col narrow stack">
        <div>img goes here...</div>
        <div>img goes here...</div>
    </div>
</div>
​
​ 
```

CSS...

```
.row,
.col,
.stack > div {
    /* 
      I usually just apply 
      this to all elements using 
      the * selector. You might not
      want to, so I put it here 
     */
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

.row:after {
    content:"";
    display: table;
    clear: both;
}

.col {
    float: left
}

.col.narrow {
    width: 25%;
}

.col.large {
    width: 50%;
}

.stack > div {
    height: 50%;
} 
```

我希望它是不言自明的，并且易于定制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T01:37:41.170

有一些方法可以存档，最简单的方法是在另一个 div 中添加两个较小的缩略图，这些缩略图与另一个 div 具有相同的高度，然后将两者都添加到其中。请务必计算边距、内边距和边框以适应高度。

请添加您的代码，以便我可以看到有什么问题。

# c# - 获取我的进程输出时如何解析高速数据

> ID：12773726
> 
> 赞同：1
> 
> 时间：2012-10-07T23:28:58.767
> 
> 标签：c#, winforms

我的类启动新进程（Tshark）并开始捕获，从主窗体我检查类属性以更新我的 UI，我唯一指示接收到多少数据包是我的进程输出：

```
Frame 13: 62 bytes on wire (496 bits), 62 bytes captured (496 bits)
    Arrival Time: Oct  8, 2012 01:16:42.143822000 Jerusalem Standard Time
    Epoch Time: 1349651802.143822000 seconds
    [Time delta from previous captured frame: 0.002140000 seconds]
    [Time delta from previous displayed frame: 0.002140000 seconds]
    [Time since reference or first frame: 0.038739000 seconds]
    Frame Number: 13
    Frame Length: 62 bytes (496 bits)
    Capture Length: 62 bytes (496 bits)
    [Frame is marked: False]
    [Frame is ignored: False]
    [Protocols in frame: eth:ip:udp:data]
Ethernet II, Src: CameoCom_fd:ae:5c (00:18:e7:fd:ae:5c), Dst: AsustekC_82:c2:2b (48:5b:39:82:c2:2b)
    Destination: AsustekC_82:c2:2b (48:5b:39:82:c2:2b)
        Address: AsustekC_82:c2:2b (48:5b:39:82:c2:2b)
        .... ...0 .... .... .... .... = IG bit: Individual address (unicast)
        .... ..0\. .... .... .... .... = LG bit: Globally unique address (factory default)
    Source: CameoCom_fd:ae:5c (00:18:e7:fd:ae:5c)
        Address: CameoCom_fd:ae:5c (00:18:e7:fd:ae:5c)
        .... ...0 .... .... .... .... = IG bit: Individual address (unicast)
        .... ..0\. .... .... .... .... = LG bit: Globally unique address (factory default)
    Type: IP (0x0800)
Internet Protocol Version 4, Src: 84.229.2.201 (84.229.2.201), Dst: 192.168.0.100 (192.168.0.100)
    Version: 4
    Header length: 20 bytes
    Differentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00: Not-ECT (Not ECN-Capable Transport))
        0000 00.. = Differentiated Services Codepoint: Default (0x00)
        .... ..00 = Explicit Congestion Notification: Not-ECT (Not ECN-Capable Transport) (0x00)
    Total Length: 48
    Identification: 0x64e7 (25831)
    Flags: 0x00
        0... .... = Reserved bit: Not set
        .0.. .... = Don't fragment: Not set
        ..0\. .... = More fragments: Not set
    Fragment offset: 0
    Time to live: 120
    Protocol: UDP (17)
    Header checksum: 0xc51b [correct]
        [Good: True]
        [Bad: False]
    Source: 84.229.2.201 (84.229.2.201)
    Destination: 192.168.0.100 (192.168.0.100)
User Datagram Protocol, Src Port: 26120 (26120), Dst Port: 62587 (62587)
    Source port: 26120 (26120)
    Destination port: 62587 (62587)
    Length: 28
    Checksum: 0xcfeb [validation disabled]
        [Good Checksum: False]
        [Bad Checksum: False]
Data (20 bytes)
    Data: 2100b45be8e8038b9e370ec70000f0005da90013
    [Length: 20]

0000  48 5b 39 82 c2 2b 00 18 e7 fd ae 5c 08 00 45 00   H[9..+.....\..E.
0010  00 30 64 e7 00 00 78 11 c5 1b 54 e5 02 c9 c0 a8   .0d...x...T.....
0020  00 64 66 08 f4 7b 00 1c cf eb 21 00 b4 5b e8 e8   .df..{....!..[..
0030  03 8b 9e 37 0e c7 00 00 f0 00 5d a9 00 13         ...7......]... 
```

在此示例中，“第 13 帧”表示这是第 13 号数据包，收到的每个数据包都类似于此示例。

这是我课程中如何启动 Tshark 进程并开始捕获的相关部分：

```
 Process tshark = new Process();
            tshark.StartInfo.FileName = _tshark;
            tshark.StartInfo.Arguments = string.Format(" -i " + _interfaceNumber + " -V -x -s " + _packetLimitSize + " -w " + _pcapPath);
            tshark.StartInfo.RedirectStandardOutput = true;
            tshark.StartInfo.UseShellExecute = false;
            tshark.StartInfo.CreateNoWindow = true;
            tshark.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
            tshark.Start();
            while (!myStreamReader.EndOfStream)
            {
                _packet = myStreamReader.ReadLine();

                if (_packet.StartsWith("    Frame Number:"))
                {
                    string[] arr = _packet.Split(default(char[]), StringSplitOptions.RemoveEmptyEntries);
                    _receivesPackets = int.Parse(arr[2]);
                    _packetsCount++;
                }

                if ((DateTime.Now - lastUpdate).TotalMilliseconds > 1000)
                {
                    lastUpdate = DateTime.Now;
                    OnPacketProgress(_packetsCount++);
                }
            }

            tshark.WaitForExit(); 
```

StreamReader while 循环中的代码**if (_packet.StartsWith(" Frame Number:"))**从数据包中解析数据包编号，放入相关属性 (_packetsCount) 并从主表单中每 1 秒检查一次该属性，并且更新我的 UI，我的问题是在速度非常快的情况下，UI 没有更新所有数据包，例如在 2 分钟捕获 UI 显示 ~50,000 并且创建的文件超过 1,000,000 之后。有没有更有效的方法来解析/接收这些数据并变得更准确？

# web-services - JAX-WS 和 java 泛型

> ID：12773728
> 
> 赞同：1
> 
> 时间：2012-10-07T23:29:23.907
> 
> 标签：web-services, jakarta-ee, generics, wsdl, jax-ws

我想以自下而上的方法生成 Web 服务，但它不能与泛型一起正常工作。

我有一些看起来像这样的类，几乎不能修改（可能是一些注释）：

```
public class MySuperSet<K,V> {
 private Map<K,V> map;
 ...
 // getter and setter for map
}

public class PearSet extends MySuperSet<String, Pear> {
}
public class AppleSet extends MySuperSet<String, Apple> {
} 
```

生成的 xsd 如下所示：

```
<xs:complexType name="mySuperSet">
  <xs:sequence>
    <xs:element name="map">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="entry" minOccurs="0" maxOccurs="unbounded">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="key" minOccurs="0" type="xs:anyType"/>
                <xs:element name="value" minOccurs="0" type="xs:anyType"/>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
  </xs:sequence>
</xs:complexType>

<xs:complexType name="pearSet">
  <xs:complexContent>
    <xs:extension base="tns:mySuperSet">
      <xs:sequence/>
    </xs:extension>
  </xs:complexContent>
</xs:complexType>

<xs:complexType name="appleSet">
  <xs:complexContent>
    <xs:extension base="tns:mySuperSet">
      <xs:sequence/>
    </xs:extension>
  </xs:complexContent>
</xs:complexType> 
```

而且苹果和梨的定义也没有生成！

我想我期待的 xsd 会更像这样：

```
<xs:complexType name="pearSet">
  <xs:sequence>
    <xs:element name="map">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="entry" minOccurs="0" maxOccurs="unbounded">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="key" minOccurs="0" type="xs:string"/>
                <xs:element name="value" minOccurs="0" type="tns:pear"/>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
  </xs:sequence>
</xs:complexType>

<xs:complexType name="appleSet">
  <xs:sequence>
    <xs:element name="map">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="entry" minOccurs="0" maxOccurs="unbounded">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="key" minOccurs="0" type="xs:string"/>
                <xs:element name="value" minOccurs="0" type="tns:apple"/>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
  </xs:sequence>
</xs:complexType> 
```

我认为如果我手动修改它可能会奏效。就像我猜想当它需要设置 appleSet 的 map 元素时，它只会调用存在的 setMap() 。但是，生成的服务没有考虑到我对 xsd 的修改（似乎它是从代码中动态重新生成的）。

我正在使用 IBM eclipse 插件来生成 web 服务项目，看起来它正在使用 sun 的 jax-ws 实现来构建应用程序。

我还想稍后从 xsd 中删除一些未使用的属性。

-

你会推荐什么方法来解决这个问题？

以下是我想到的可能性：

*   XmlAdapter（MySuperSet 的每个子类一个）

*   手动装订（我不知道它是如何工作的）

*   一个更灵活的库，它尝试使用给定的 xsd 和给定的代码并使它们匹配

谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:49:31.027

我最终选择了务实的解决方案：

删除泛型。

# eclipse - 在 Eclipse 中创建应用程序时更改 Heroku 文件夹

> ID：12773729
> 
> 赞同：0
> 
> 时间：2012-10-07T23:29:38.733
> 
> 标签：eclipse, git, web-applications, heroku, wampserver

所以我是 Heroku 的新手，我有一个小问题。我使用 WAMPP 在我的本地机器上测试我的 web 应用程序，如您所知，该项目必须位于 www 文件夹中。当我在 Eclipse 中创建 Heroku 应用程序时，它会立即在 c:\users\myname\git\heroku\appname 中创建，我不希望这样！

很简单，我希望在 WAMPP www 文件夹中的一个文件夹中创建我的所有 Heroku 应用程序，如果可能的话，将 GIT 文件夹更改为该 www 文件夹内，以便我也可以在本地机器上测试我的项目。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:25:43.673

您可以只移动目录，然后在 Eclipse 中导入现有项目。确保告诉 Eclipse 不要将内容复制到工作区中。

# mysql - 多重连接的 on 子句中的未知列

> ID：12773731
> 
> 赞同：0
> 
> 时间：2012-10-07T23:30:20.383
> 
> 标签：mysql, sql, join

我正在尝试通过将表 Customer 与已加入的 BuyVehicle & Vehicle 表连接起来来获得成对的匹配列，该表我已给出别名“t”。如果我在第一行分配了别名，p1.SSN 和我假设 p2.SSN 将如何跟随未知列？

```
SELECT p1.SSN, p2.SSN FROM Customer AS p1, Customer AS p2 
INNER JOIN (SELECT BVSSN, BVVin, Vin FROM CarPurchase INNER JOIN Car ON BVVin = Vin) 
AS t ON p1.SSN = BVSSN & p2.SSN = BVSSN
WHERE p1.SSN < p2.SSN AND //matching columns comparisons yet to be added; 
```

> 错误 1054 (42S22)：“on 子句”中的未知列“p1.SSN”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T01:12:31.273

问题在于不同类型的连接的混合。MySQL 无法识别 p1 表，因为它不是“连接”的一部分。以下应解决此问题：

```
SELECT p1.SSN, p2.SSN
FROM Customer AS p1 cross join
     Customer AS p2 INNER JOIN
     (SELECT BVSSN, BVVin, Vin
      FROM CarPurchase INNER JOIN
           Car
           ON BVVin = Vin
    ) AS t
    ON p1.SSN = BVSSN and p2.SSN = BVSSN
WHERE p1.SSN < p2.SSN AND //matching columns comparisons yet to be added; 
```

实际上，您应该将`WHERE`子句移入`ON`子句：

```
SELECT p1.SSN, p2.SSN
FROM Customer AS p1 join
     Customer AS p2 
     on  p1.SSN < p2.SS INNER JOIN
     (SELECT BVSSN, BVVin, Vin
      FROM CarPurchase INNER JOIN
           Car
           ON BVVin = Vin
    ) AS t
    ON p1.SSN = BVSSN and p2.SSN = BVSSN 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T23:45:10.350

1.  什么是 & - 没有这样的 SQL.. 更改为 AND
2.  这是不正确的 SELECT BVSSN, BVVin, Vin FROM CarPurchase INNER JOIN Car ON BVVin = Vin

    SELECT CarPurchase.BVSSN, Car.BVVin, Car.Vin FROM CarPurchase INNER JOIN Car ON CarPurchase.BVVin = Car.Vin

否则使用别名

# xna - XNAvs Unity 用于开发 Kinect 游戏

> ID：12773735
> 
> 赞同：0
> 
> 时间：2012-10-07T23:30:59.293
> 
> 标签：xna, unity3d, kinect

我想使用 Kinect for windows 构建一个简单的 3D 游戏，但我对使用什么游戏引擎感到困惑。我打算构建的游戏具有简单的图形和静态背景，但可接受的用户动作需要准确。我的问题是 Unity3D 或 XNA 哪个更好？还有你推荐的其他游戏引擎吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:45:36.547

Unity3D 不支持 Kinect for Windows SDK（反之亦然）。Unity3D 使用具有 .NET 3.5 子集的 mono 版本 - KfW SDK 是为 .NET 4 及更高版本开发的。您可以使用 C++ 互操作让两者一起工作，但这是一个漫长的过程，并且在任何地方都没有真正记录。OpenNI/NITE 对 Kinect 有 Unity 支持，但它不是“官方”SDK，我不能 100% 确定重新分发的工作原理。

KfW 完全支持 XNA，并且现在包含示例。

然而，巨大的差异是开发环境。XNA 全部基于代码，并提供游戏循环和基于 C# 的框架来编辑 3D 对象。这意味着您从头开始编写所有代码，并且需要计算所有数学和物理。这是一个很棒的平台，但学习曲线陡峭。相比之下，Unity3D 是一个视觉工具，允许您在屏幕上拖放资产、相机、照明，以确保您获得正确的视觉外观。然后，您编写脚本并将它们附加到资产上，而不是从头开始编写整个游戏。

根据我的经验，我更喜欢 Unity 来开发 3D 游戏，但是现在拥有完整的 KfW 支持对我来说一直是个问题。然而，这是个人选择，对于许多场景，OpenNI 工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T08:42:00.730

您可能还想考虑使用[Motion Toolkit](http://u3d.as/content/omek/omek-motion-toolkit/3CP) for Unity。像 OpenNI 一样，它不是“官方”SDK，并且使用了一些名为 Omek 的公司的中间件（至少根据包描述），但它很好地集成到了 Unity 中，并且对我来说很好用。

# android - 拉伸 EditText 以调整图像

> ID：12773736
> 
> 赞同：1
> 
> 时间：2012-10-07T23:31:07.720
> 
> 标签：android, android-layout

如何创建一个始终存在`EditText`且遵守以下三个规则的布局：

`EditText`观点：

1.  如果不存在图像，则填充整个父级（在运行时，在这种情况下，可见性将设置为`View.GONE`。）
2.  如果图像的高度大于宽度，则填充父高度的 50%。
3.  如果图像宽于高，则填充父级的其余部分。

当然，图像会被拉伸以适应父矩形最底部的 50%，同时保持纵横比。

![在此处输入图像描述](../Images/3a13b93eaafba330824e66cfe5af24e7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T01:01:23.533

我不相信这可以通过单个 xml 布局来完成，但简单的方法是简单地拥有多个 xml 布局文件，您可以根据图像的存在和纵横比来扩充这些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T00:21:22.347

尝试这个：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:ems="10" >
</EditText>

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="0"
    android:src="@drawable/ic_launcher"/>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:29:45.803

这就是我的做法。生成的布局如下所示：

![在此处输入图像描述](../Images/3390ca08babfafa9b39162ddf3d51c00.png) ![在此处输入图像描述](../Images/cd56eee51fe28efba9892d86a13dfb58.png)

![在此处输入图像描述](../Images/bd0487f1055bc7b44f73176da3eae292.png)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:text="blah" />

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:visibility="gone"
        android:src="@drawable/photo1" />

</LinearLayout> 
```

# ruby-on-rails - 调整 Facebook 个人资料图片的大小

> ID：12773739
> 
> 赞同：1
> 
> 时间：2012-10-07T23:31:47.113
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, ruby-on-rails-3.2, omniauth

我正在尝试将 facebook 个人资料图片调整为大。我知道为了使个人资料图片变大，我必须输入 [http://graph.facebook.com/id/picture?type=large](http://graph.facebook.com/id/picture?type=large)

从我目前在下面的代码中得到 [http://graph.facebook.com/id/picture?type=square](http://graph.facebook.com/id/picture?type=square)

如何更改 USER INFO 以使个人资料图片的图像变大，并对每个用户的个人资料图片进行处理。（注意：我不希望它在其他任何地方调整大小）。

用户信息

```
<h1 class="twshadow">
  <%= current_user.name %>
  **<%= image_tag current_user.image %>**
</h1>
<span>
  <%= link_to "View my Profile", current_user %>
</span> 
```

用户.RB

```
class User < ActiveRecord::Base
  attr_accessible :name, :oauth_expires_at, :oauth_token, :provider, :uid, :email, :image

  def self.from_omniauth(auth)
    where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
      user.provider = auth.provider
      user.uid = auth.uid
      user.name = auth.info.name
      user.email = auth.info.email
      user.image = auth.info.image
      user.oauth_token = auth.credentials.token
      user.oauth_expires_at = Time.at(auth.credentials.expires_at)
      user.save!
    end
  end
end 
```

数据库

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :provider
      t.string :uid
      t.string :name
      t.string :email
      t.string :image
      t.string :oauth_token
      t.datetime :oauth_expires_at

      t.timestamps
    end
  end
end

class ApplicationController < ActionController::Base
  protect_from_forgery

private

  def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
  end
  helper_method :current_user
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:02:20.940

```
 <%= image_tag "http://graph.facebook.com/#{current_user.uid}/picture?type=large" %> 
```

这是我使用的解决方案

# apache-flex - Flex Spark Textinput不同的组件宽度和内部文本宽度

> ID：12773744
> 
> 赞同：0
> 
> 时间：2012-10-07T23:32:30.340
> 
> 标签：apache-flex, size, textinput, flex-spark

我正在尝试更改在 spark Textinput 组件内显示的文本的像素长度。在 mx Textinput 上，我会覆盖 updateDisplayList 并修改 textField 宽度，但在这里我无法提出类似的解决方案。

有什么想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T04:55:43.043

您可以为 Spark TextInput 创建自定义外观。

它可能看起来像这样（默认 TextInputSkin 的副本）：

```
<s:SparkSkin xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:fb="http://ns.adobe.com/flashbuilder/2009" 
    alpha.disabledStates="0.5" blendMode="normal">

    <fx:Metadata>
    <![CDATA[ 

        [HostComponent("spark.components.TextInput")]
    ]]>
    </fx:Metadata> 

    <fx:Script>
        <![CDATA[
            ...
        ]]>
    </fx:Script>

    <s:states>
        <s:State name="normal"/>
        <s:State name="disabled" stateGroups="disabledStates"/>
        <s:State name="normalWithPrompt"/>
        <s:State name="disabledWithPrompt" stateGroups="disabledStates"/>
    </s:states>

    <s:Rect left="0" right="0" top="0" bottom="0" id="border">
        <s:stroke>     
            <s:SolidColorStroke id="borderStroke" weight="1" />
        </s:stroke>
    </s:Rect>

    <s:Rect id="background" left="1" right="1" top="1" bottom="1">
        <s:fill>
            <s:SolidColor id="bgFill" color="0xFFFFFF" />
        </s:fill>
    </s:Rect>

    <s:Rect left="1" top="1" right="1" height="1" id="shadow">
        <s:fill>
            <s:SolidColor color="0x000000" alpha="0.12" />
        </s:fill>
    </s:Rect>

    <s:RichEditableText id="textDisplay"
              verticalAlign="middle"
              widthInChars="10"
              left="1" right="1" top="1" bottom="1" />

    <s:Label id="promptDisplay" maxDisplayedLines="1"
                verticalAlign="middle"
                mouseEnabled="false" mouseChildren="false"
                includeIn="normalWithPrompt,disabledWithPrompt" 
                includeInLayout="false"
                /> 
```

在那里您可以看到名为*textDisplay*的 RichEditableText - 这是 TextInput 中的实际文本输入字段。你可以按照你想要的方式定位它。

# java - 为什么 repaint() 不会总是调用 paintComponent 以及为什么它在被调用时并不总是正常运行

> ID：12773749
> 
> 赞同：3
> 
> 时间：2012-10-07T23:33:11.163
> 
> 标签：java, repaint, paintcomponent, repaintmanager

我正在用 Java 编写俄罗斯方块克隆，一切似乎都可以正常工作，直到我想要清除一整行并删除上面的所有内容。尽管我的所有数据都正确地表示了转换，但我的 paintComponent 方法似乎只清除了该行，但上面显示的所有内容都与 repaint() 调用之前一样。新碎片将穿过幻影块并落在底行的隐形块上，上面的碎片会掉下来。

这是我的油漆组件方法：

```
public void paintComponent(Graphics page)
{
    super.paintComponent(page);
    Graphics2D page2D = (Graphics2D) page;
    for (int c = 0; c < 10; c++) 
    {
        for (int r = 0; r < 18; r++)
        {
            if (well[c][r] != null) //Well is a 2D array of Block objects that have Rectangle object, coordinates and color
            {
                page2D.setColor(well[c][r].getColor());
                page2D.fill(well[c][r].getSquare());
                page2D.setColor(Color.gray);
                page2D.draw(well[c][r].getSquare());
            }       

        }
    }
    for (int i = 0; i < 4; i++) //tetro = the player's tetris piece
    {
        page2D.setColor(tetro.getColor());
        page2D.fill(tetro.getBlock(i).getSquare());
        page2D.setColor(Color.GRAY);
        page2D.draw(tetro.getBlock(i).getSquare());
    }

} 
```

这是我的 Timer 侦听器中的 actionPerformed 方法的一部分，它检测/清除块并调用重绘方法。

```
 int count = 0;  //Number of occupied cells in well
        int clears = 0; //number of rows to be clear
        int lowestClear = -1; //Lowest row that was cleared, -1 if none
        for (int row = 0; row < 18; row++)
        {
            for (int col = 0; col < 10; col++)
            {
                if (well[col][row] != null)
                {
                    count++;
                }
            }
            if (count == 10)
            {
                clears++;
                if (lowestClear < 0)
                {
                    lowestClear = row;
                }
                for (int col = 0; col < 10; col++)
                {
                    well[col][row] = null;
                }
            }
            count = 0;
        }
        if (clears > 0)
        {
            repaint(); //Doesn't call paintComponent()
            for (int i = 1; i <= clears; i++)
            {
                for (int r = 16; r >= 0; r--)
                {
                    if (r > lowestClear)
                    {
                        break;
                    }
                    for (int c = 0; c < 10; c++)
                    {
                        if (well[c][r] != null)
                        {
                            well[c][r+1] = well[c][r];
                            well[c][r] = null;
                        }           
                    }
                }
            }
            repaint(); //Does not call paintComponent()
        }       
        tetro.fall();
        repaint(); //DOES call paint component 
```

在调用第一个 repaint() 方法时，井数组正确显示整行现在完全为空。我希望 repaint() 方法更新面板以显示此空行，但似乎没有调用 paintComponent()。这也是第二个 repaint() 方法的情况，我希望它更新框架以在清除一行并将它们放下后将块显示在新位置。同样，paintComponent() 没有被调用。然而，对于最后一次 repaint() 调用，我只想更新下落块的位置，而不管它之前可能需要或不需要进行的任何更新，repaint() 确实调用了 paintComponent()。所以：第一个问题是，为什么 paintComponent() 只在 repaint() 调用的这个实例中被调用。

但是，当调用paintComponent() 并到达该方法的末尾时，我会在调试模式下跟踪它以查看面板在哪一行反映了更改。一旦到达 :"Repaintmanager.paintDirtyRegions(Map< Component,Rectangle >)" line:856，它已经清除了行并显示了新的落块，但是有不可见的块和幻像块。

所以，我的第二个问题是，为什么 paintComponent() 会以这种方式表现。显然，我需要对 Repaintmanager 和 Java 绘画进行大量阅读，但如果有人可以向我解释这一点，我将不胜感激。

如果重要，这是主要方法：

```
import javax.swing.JFrame;

public class TetrisDriver 
{

public static void main(String[] args) 
{
    JFrame frame = new JFrame("Tetris");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    frame.getContentPane().add(new Matrix()); //Matrix = jPanel class
    frame.pack();
    frame.setVisible(true);
} 
```

}

如果这太长了，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:51:40.183

首先，如果您还没有这样做，我会阅读[AWT 和 Swing](http://www.oracle.com/technetwork/java/painting-140037.html)中的绘画，其中解释了 Swing（和 AWT）使用的绘画方案。

其次，您不控制重绘，重绘管理器和操作系统可以控制，您只需提供建议。

第三，您可以查看[JComponent.paintImmediately](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintImmediately%28int,%20int,%20int,%20int%29)方法，它需要知道您要更新的区域，但可能会有所帮助

来自 Java 文档

> 立即绘制此组件中的指定区域及其与该区域重叠的所有后代。
> 
> **很少需要调用此方法**。在大多数情况下，调用 repaint 会更有效，这会延迟实际的绘制，并且可以将多余的请求合并到单个绘制调用中。如果在调度当前事件时需要更新显示，则此方法很有用。

我也可能更谨慎地将游戏状态渲染到屏幕外缓冲区并在`paintComponent`方法中使用它。您可以将它们放在一个队列中并在绘制过程中将它们弹出，允许或多或少地按需创建（保持几个池并不断增长，根据需要缩小池）......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-14T12:57:10.317

`repaint()`不要打电话`paintComponent()`，这是`repaint()`方法的正确工作场景。

它只标记了组件应该被重新绘制的状态，并且由 Swing 本身进一步调用 paintComponent()。

许多`repaint()`调用只能导致单个`paintComponent()`调用，这是有效的行为。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-08T02:26:32.393

`repaint()`您可以尝试直接调用`paint()`自己，而不是使用。

```
Graphics g;
g = getGraphics();
paint(g); 
```

这样，只要您想进行更改，它就会立即绘制。将其分配给另一个函数，并在您想立即查看更改时调用它。

# ruby-on-rails - 控制器内的 Destroy 操作中的不同 Redirect_To 取决于 Origin

> ID：12773755
> 
> 赞同：0
> 
> 时间：2012-10-07T23:34:19.160
> 
> 标签：ruby-on-rails

我目前在控制器中有一个运行良好的销毁功能，但问题是我需要在删除后根据单击该按钮的位置将用户重定向到不同的 url。

例如，如果**用户**访问从**index中查看****他的**记录列表，然后单击删除，他将通过 redirect_to index_path 重定向回 index（我不能使用 :back 操作，因为它会导致 ActiveRecord::RecordNotFound），如果用户单击“查看所有记录”页面中的删除按钮 我需要将用户重定向到 see_all_records_path。

 **我需要创建不同的控制器、动作等吗？让我知道。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T23:42:59.277

您可以签`request.referer`入您的控制器并根据该值重定向，它将具有单击删除按钮时它们所在页面的完整 URL。您可以使用正则表达式或其他方式来确定您应该重定向该用户的位置。

```
if request.referer.include?('see_all_records')
  ..redirect to see_all_records
else
  ..redirect to index
end 
```**

# python - gunicorn 在源更改时自动重新加载

> ID：12773763
> 
> 赞同：141
> 
> 时间：2012-10-07T23:36:01.377
> 
> 标签：python, django, reload, gunicorn

最后，我将我的开发环境从 runserver 迁移到 gunicorn/nginx。

将 runserver 的 autoreload 功能复制到 gunicorn 会很方便，因此当源更改时服务器会自动重新启动。否则我必须手动重启服务器`kill -HUP`。

有什么办法可以避免手动重启？

* * *

## 回答 #1

> 赞同：287
> 
> 时间：2014-07-22T16:40:00.683

虽然这是一个老问题，但您需要知道，自从 19.0 版`gunicorn`以来，就有了这个[`--reload`](http://docs.gunicorn.org/en/19.0/settings.html#reload)选项。所以现在不需要第三方工具。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-06-13T04:30:54.350

一种选择是使用[--max-requests](http://docs.gunicorn.org/en/latest/configure.html#max-requests)`--max-requests 1`通过添加到启动选项来限制每个生成的进程仅服务一个请求。每个新生成的进程都应该看到您的代码更改，并且在开发环境中，每个请求的额外启动时间应该可以忽略不计。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-10-21T19:24:55.497

[Bryan Helmig](http://bryanhelmig.com/auto-reload-gunicorn-on-file-change-event/)想出了这个，我修改它以使用`run_gunicorn`而不是直接启动`gunicorn`，以便可以将这 3 个命令剪切并粘贴到您的 django 项目根文件夹中的 shell 中（激活您的 virtualenv）：

```
pip install watchdog -U
watchmedo shell-command --patterns="*.py;*.html;*.css;*.js" --recursive --command='echo "${watch_src_path}" && kill -HUP `cat gunicorn.pid`' . &
python manage.py run_gunicorn 127.0.0.1:80 --pid=gunicorn.pid 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-08-15T14:17:09.073

我使用 git push 部署到生产环境并设置 git 挂钩来运行脚本。这种方法的优点是您还可以同时进行迁移和包安装。 [https://mikeeverhart.net/2013/01/using-git-to-deploy-code/](https://mikeeverhart.net/2013/01/using-git-to-deploy-code/)

```
mkdir -p /home/git/project_name.git
cd /home/git/project_name.git
git init --bare 
```

然后创建一个脚本`/home/git/project_name.git/hooks/post-receive`。

```
#!/bin/bash
GIT_WORK_TREE=/path/to/project git checkout -f
source /path/to/virtualenv/activate
pip install -r /path/to/project/requirements.txt
python /path/to/project/manage.py migrate
sudo supervisorctl restart project_name 
```

确保`chmod u+x post-receive`将用户添加到 sudoers。允许它在`sudo supervisorctl`没有密码的情况下运行。 [https://www.cyberciti.biz/faq/linux-unix-running-sudo-command-without-a-password/](https://www.cyberciti.biz/faq/linux-unix-running-sudo-command-without-a-password/)

从我的本地/开发服务器，我设置了`git remote`允许我推送到生产服务器

```
git remote add production ssh://user_name@production-server/home/git/project_name.git

# initial push
git push production +master:refs/heads/master

# subsequent push
git push production master 
```

作为奖励，您将在脚本运行时看到所有提示。所以你会看到迁移/包安装/主管重启是否有任何问题。

# python - 在 Twisted 透视代理中调用客户端的远程方法

> ID：12773768
> 
> 赞同：2
> 
> 时间：2012-10-07T23:37:03.083
> 
> 标签：python, twisted, perspective-broker

我正在使用twisted 的透视代理在客户端和服务器之间进行通信。客户端从服务器请求远程方法“remote_ftp_listen”。这会导致 PB 服务器启动 FTP 连接并等待直到在目录中找到与某种模式匹配的文件，然后 PB 服务器必须通知客户端该事件（在所需的 ftp 目录中找到文件）。

如何实现这种反向调用（PB Server > PB client）？比如告诉服务器它必须在客户端回调一个方法......如果通过 PB 不可能，那么你会建议做什么来实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T00:44:24.710

当客户这样做时：

```
clientDeferred = server.callRemote("ftp_listen", arguments) 
```

服务器这样做：

```
def remote_ftp_listen(self, arguments):
   # ... some stuff with FTP ...
   serverDeferred = ftpConnection.findSomeFile(arguments)
   return serverDeferred 
```

where`findSomeFile`返回 的实例，然后 PB 服务器将在触发后向客户`Deferred`端发送回响应，并在客户端从服务器接收到该响应后触发。`serverDeferred``clientDeferred`

您也可以通过这种方式返回多个结果，如果您很高兴一次返回所有结果（这将在找到最后一个结果时发生）。只需调整服务器：

```
from twisted.internet.defer import gatherResults

def remote_ftp_listen(self, arguments):
   # ... some stuff with FTP ...
   serverDeferred = gatherResults([ftpConnection.findSomeFile(a) for a in arguments])
   return serverDeferred 
```

`Deferred`返回的 by将`gatherResults`触发一个列表，其中`Deferred`包含传递给它的列表中所有对象的结果。

如果您需要在发现结果后立即将结果发送给客户端，而不是将它们全部捆绑到一个结果列表中，那么您需要做一些不同的事情。让客户端将 a 传递`Referenceable`给服务器并让服务器调用该对象上的远程方法。您可以在 PB 文档中的 Twisted 网站上阅读有关此方法的更多信息。 [http://twistedmatrix.com/documents/current/core/howto/pb-usage.html](http://twistedmatrix.com/documents/current/core/howto/pb-usage.html)特别谈到了这个话题。该文档侧重于将`Referenceable`对象从服务器传递到客户端，但反向的工作方式完全相同。因此，如果您`Referenceable`在客户端上有一个传递给服务器上的`ftp_listen`远程方法的方法，那么服务器将能够转身并使用它`callRemote`来调用客户端对象上的方法。

# c++ - gcc 4.6的奇怪模板错误消息

> ID：12773770
> 
> 赞同：2
> 
> 时间：2012-10-07T23:37:21.167
> 
> 标签：c++, templates, gcc4

我从 gcc 4.6 收到关于模板成员函数的真正奇怪的错误消息。这是一个最小的例子：

```
template<typename T>
class Pimpl
{
public:
    Pimpl(const Pimpl&) {}

private:
    T* clone_(const T*);
};

template<typename T>
template<typename P>
T*
Pimpl<T>::clone_(const T*)
{
    return new P(static_cast<const P&>(*p));
} 
```

这是错误：

```
$ c++ -c y.cpp
y.cpp:14:1: error: prototype for ‘T* Pimpl<T>::clone_(const T*)’ does not match any in  class ‘Pimpl<T>’
y.cpp:8:8: error: candidate is: T* Pimpl<T>::clone_(const T*) 
```

请注意，不匹配的原型与候选原型完全相同。

是什么赋予了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T23:40:55.313

它们之所以不同，是因为`template <typename P>`. Comeau 错误消息（在[http://www.comeaucomputing.com/tryitout](http://www.comeaucomputing.com/tryitout)生成）突出显示了您遇到的问题：

```
error: template nesting depth does not match the previous declaration of function "Pimpl<T>::clone_" 
```

值得一提的是：

(a) Comeau 编译器以产生特别好的错误消息而闻名。

(b) 使用多个编译器进行编译通常会给您提供其他情况下可能没有的见解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T23:41:16.860

如果你想要一个成员模板，你必须这样声明它：

```
template <typename T>
class Pimpl
{
    // ...

    template <typename P>
    static P * clone(T const * p)
    {
        return new P(static_cast<P const &>(*p));
    }
}; 
```

我还制作了成员模板`static`，因为它似乎不依赖于对象实例，并且我内联定义了它，因为无论如何您都必须在标题中提供模板定义，并且我修复了返回类型。（但我看不出模板化`clone`函数有什么意义......）

# c++ - 如何在 C++ 中的 if...then... 语句中使用变量？

> ID：12773772
> 
> 赞同：-2
> 
> 时间：2012-10-07T23:37:57.717
> 
> 标签：c++, variables, if-statement

在 C++ 中，如何在 if...then... 或 if...else 或 if... 语句中使用变量？

这就是我的意思。

当我输入这样的东西来制作计算器或其他东西时：

```
int main()
{
  signed int a, b, c, d, e result;
  cin >> a;
  cin >> b;
  cin >> c;
  cin >> d;
  cin >> e;

  if(d=="+")
    if(e=="-")
      result = a + b - c
  cout <<result;
} 
```

它不起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:54:43.847

```
if(d > 0) {

}

if(e < 0) {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T00:44:18.767

```
int main()
{
int a, b, c,result; // you don't need write signed because it's by default signed
char d,e;
  cin >> a;
  cin >> b;
  cin >> c;
  cin >> d;
  cin >> e;

if(d=='+'){ // good practice to put {}. if you'll put another line of code in the future 
  if(e=='-'){
    result = a + b - c; //you forgot statement ";" 
   }
}
cout <<result; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T23:39:51.103

正如克里斯所说，您无法将字符串文字与整数进行比较。

如果您想与单个字符进行比较（我猜这就是您要去的地方），您想使用单引号，例如 so `if(d == '+')`。字符的单引号，双引号在字符串上添加隐式零终止。所以 "+" 实际上是 {'+', 0x0}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T23:40:32.710

```
int main()
{
signed int a, b, c,result;
char d,e;
  cin >> a;
  cin >> b;
  cin >> c;
  cin >> d;
  cin >> e;

if(d=='+')
  if(e=='-')
    result = a + b - c
cout <<result;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T17:51:32.320

在将字符与变量进行比较时，您必须在字符周围使用单引号。例如

char mychar='a';

如果 (mychar=='a')

cout<<"它是一个";

# php - SQL 查询：根据列值隐藏项目？

> ID：12773777
> 
> 赞同：1
> 
> 时间：2012-10-07T23:39:29.917
> 
> 标签：php, sql, hidden

我正在从 MySQL 数据库中的表中提取一些数据。在这个表里面有一个叫做“hidden”的列，默认情况下它被设置为0，但是当一个项目需要隐藏时，它会被设置为1。所以我需要一个我可以使用的代码来隐藏所有行，如果“隐藏”列设置为 1。

可以说我的代码很简单，如下所示：

```
<?php
$result = mysql_query("SELECT * FROM clients ORDER BY name") 
or die(mysql_error());  
while($row = mysql_fetch_array( $result )) {
echo $row['name'];
} 
?> 
```

我可以添加一个简单的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T23:42:12.867

在上面添加`WHERE`子句

```
SELECT * 
FROM clients 
WHERE hidden = 0
ORDER BY name 
```

上面的查询只会显示未隐藏的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T23:42:45.577

```
$result = mysql_query("SELECT * FROM clients WHERE hidden = 0 ORDER BY name"); 
```

这可能是最简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T23:42:35.547

有2个选项：

1）如果您总是希望隐藏这些行，那么您甚至不必通过更改查询来加载它们。

```
SELECT * FROM clients WHERE hidden=0 ORDER BY name; 
```

2）您可以在while循环中检查该值。

```
while($row = mysql_fetch_array( $result )) {
   if($row['hidden']==0) echo $row['name'];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T23:43:03.133

您当前的查询

```
SELECT * FROM clients ORDER BY name 
```

检索表中的每一行。如果要隐藏（不检索）列值所在的行，`hidden`则`1`只需添加一个 WHERE 子句来检查`hidden`不等于`1`.

```
SELECT * FROM clients WHERE hidden = 0 ORDER BY name 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T23:43:50.853

```
 <?php
$result = mysql_query("SELECT * FROM clients WHERE hidden=0 ORDER BY name") 
or die(mysql_error());  
while($row = mysql_fetch_array( $result )) {
echo $row['name'];
} 
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-07T23:52:19.583

```
$result = mysql_query("SELECT * FROM clients WHERE hidden=0 ORDER BY name"); 
```

将仅返回未隐藏的行。

此外，如果这是您要编写的新程序，请使用 MySqli 或 PDO 而不是 mysql_* 函数，因为它们已被弃用。见 - [http://us.php.net/mysqli](http://us.php.net/mysqli)和[http://us.php.net/pdo](http://us.php.net/pdo)

# android - imageView.setImageBitmap 在 android 中不起作用

> ID：12773788
> 
> 赞同：2
> 
> 时间：2012-10-07T23:41:20.180
> 
> 标签：android, android-layout

由 Emil thx 解决，我主要关注

```
package com.example.surfacetest;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.BitmapFactory;
import android.view.Window;
import android.view.WindowManager;
import android.widget.ImageView;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //requestWindowFeature(Window.FEATURE_NO_TITLE);
        //this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,     WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.activity_main);
        ImageView img = (ImageView) findViewById(R.drawable.hero_frame);
        img.setImageBitmap(BitmapFactory.decodeResource(this.getResources(),R.drawable.chen_gong));

    }

}
` 
```

在我有的 xml 文件中

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />
<ImageView
    android:id="@+id/hero1"
    android:maxWidth="100dp"
    android:maxHeight="100dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:scaleType="centerInside"
    android:layout_marginLeft="5.33dp"
    />
<ImageView
    android:id="@+id/hero2"
    android:maxWidth="100dp"
    android:maxHeight="100dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:scaleType="centerInside"
    android:layout_marginLeft="5.33dp"
    android:layout_toRightOf="@id/hero1"
    /> 
```

有什么我错过的吗，过去两天我一直在研究这个问题，但在互联网上找不到任何解决方案，或者我错过了。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T01:06:22.577

问题出在这一行：

```
 ImageView img = (ImageView) findViewById(R.drawable.hero_frame); 
```

您需要传递要查找的 ImageView 的 ID，您目前可能正在获取一个`NullPointerException`，因为`img`找不到，请尝试以下操作：

```
 ImageView img = (ImageView) findViewById(R.id.hero1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T23:58:15.487

试试这个 ;

```
image.setImageResource(R.drawable.chen_gong); 
```

或直接从 xml 布局通过将行添加到您的`ImageView`标签：

```
android:src="@drawable/chen_gong" 
```

# jsf-2 - 无法使用 primefaces 显示动态图像

> ID：12773789
> 
> 赞同：0
> 
> 时间：2012-10-07T23:41:39.617
> 
> 标签：jsf-2, primefaces, graphicimage

我想显示一张动态照片，我将图像的内容作为 blob 存储在数据库中，照片实体中的内容类型是字节数组 (byte[])。我尝试了两种不同的方法，但都没有用。

1)

```
 public StreamedContent getImage() throws IOException {
  byte[] img=photo.getContent();
 InputStream in = new ByteArrayInputStream(img);
 StreamedContent  image = new DefaultStreamedContent(in,"image/jpeg");
  return image;
} 
```

2)

```
public StreamedContent getImage() throws IOException {
  byte[] img=photo.getContent();
 InputStream in = new ByteArrayInputStream(img);
 BufferedImage bufferedImg = ImageIO.read(in);
 ByteArrayOutputStream os = new ByteArrayOutputStream();
 ImageIO.write(bufferedImg, "jpeg", os);

 StreamedContent   image = new DefaultStreamedContent(new ByteArrayInputStream(os.toByteArray()),"image/jpeg");

  return image;
} 
```

并在查看页面中：

```
 <p:graphicImage value="#{controller.image}"/> 
```

所以有人可以帮我让它工作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T00:06:27.090

您首先必须从数据库中检索 blob。

```
public StreamedContent getImage() throws SQLException {
    Blob imgBlob;
    try
    {
     //Select the blob from your database here. Use a PreparedStatement (I'll call it stmt here) for this.
     ...
     ResultSet res = stmt.executeQuery();
     res.next();
     imgBlob = res.getBlob("columnName");
    }
    catch(SQLException e){ throw e; }
    byte[] img=imgBlob.getBytes(1, imgBlob.length()); //Get the blob as a byte array
    InputStream in = new ByteArrayInputStream(img);
    StreamedContent  image = new DefaultStreamedContent(in,"image/jpeg");
    return image;
} 
```

[有关 Blob 类的更多信息。](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Blob.html)

# java - 如何从 SurfaceView 正确更新 Android UI

> ID：12773790
> 
> 赞同：0
> 
> 时间：2012-10-07T23:41:41.183
> 
> 标签：java, android, multithreading

所以我有一个带有 TextView 的活动来保存分数，如下所示：

```
public class PlayGameActivity extends Activity {
    private GameThread mGameThread;
    private GameView mGameView;

    private Handler mHandler = new Handler();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_play_game);

        final TextView scoreView = (TextView) findViewById(R.id.textView2);

        mGameView = (GameView) findViewById(R.id.gameView1);
        mGameThread = mGameView.getThread();

        mHandler.post(new Runnable() {
            @Override
            public void run() {
                if (mGameView != null) {
                    scoreView.setText(mGameThread.getScore());
                }
            }
        });
    }
} 
```

然后在我的 GameView 我有这样声明的函数：

```
class GameView extends SurfaceView implements SurfaceHolder.Callback {
    class GameThread extends Thread {
        int score = 0;

        public String getScore(){
            return Integer.toString(score);
        }

        @Override
        public void run() {
            synchronized (mSurfaceHolder) {
                if (something){
                    score++
                }
            }
        }
    }
} 
```

问题是 mGameThread.getScore() 总是返回 0，就好像分数没有更新一样。

如果有人有任何煽动，将不胜感激。此外，我从上面的片段中删除了许多不必要的代码。如果您想查看全文，您可以在这里查看：

*   [PlayGameActivity.java](http://snipt.org/vXfg2)
*   [游戏视图.java](http://snipt.org/vXfh3)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T23:58:02.480

你的处理程序只运行一次`getScore()`，所以你总是会得到初始值。你应该尝试使用`postDelayed()`.

```
mHandler.postDelayed(new Runnable() {
    @Override
    public void run() {
        if (mGameView != null) {
            scoreView.setText(mGameThread.getScore());
        }
        mHandler.postDelayed(this, 1000); // run again in 1sec
    }
}, 1000); 
```

正如 Thomas 提到的，不应以这种方式使用 Handler，这是来自[doc](http://developer.android.com/reference/android/os/Handler.html)的引用：

> 处理程序有两个主要用途：（1）安排消息和可运行文件在未来某个时间点执行；(2) 将要在与您自己的线程不同的线程上执行的操作排入队列。

它完全适合（1）！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T00:45:28.137

有更好的方法来更新 UI 数据，使用事件/监听器机制。

坐在循环线程中不是 OOP 风格的编程。如果分数的变化发生在你的应用程序中，那么你肯定有一个检测变化的句柄。一旦检测到，用一个简单的 setText 调用你的 textview 来更新 UI。

不要像调用 post(....) 那样（可能在不知不觉中）过度拥挤 UI 事件队列堆栈，这将使您的 UI 对实际用户交互的响应性降低，特别是如果您在定时循环中执行此操作。请记住，UI 事件队列堆栈对于整个系统是 ONE，它旨在处理用户与设备的交互。

如果您需要从非 UI 线程使用更改 UI 组件

```
 activity.runOnUiThread(Runnable); 
```

方法而不是 post(Runnable)。这样，您可能会在 Runnable 中定义更长的执行代码（尽管不推荐）。否则，请确保 post(Runnable) 中的代码可以非常快速地执行和完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T23:59:37.077

你从哪里打电话`mHandler.post(Runnable)`？您发布的代码将一条消息（来自您的 onCreate）添加到主线程的消息队列中，这没有多大意义。这条消息被处理了，会打印0，然后就是这样。因此，如果您不定期从某个地方调用它，它不会在初始 0 之后打印任何内容。

如果您也`Handler.post(Runnable)`从其他地方拨打电话，请确保您从正确的位置拨打电话。`GameThread`每次要更新 UI 时都必须调用它。因此，您将需要`mHandler`在 GameThread 中引用。例如，构造函数`GameThread`是执行此操作的好地方（我不会将其实现`GameThread`为内部类，而是针对每个人自己的）。一旦`GameThread`有了对 的引用`mHandler`，您就可以使用它`mHandler.post(Runnable)`来更新您的 UI。例如：

```
 @Override
    public void run() {
        synchronized (mSurfaceHolder) {
            if (something){
                // IMPORTANT: see "important note" at the end of this Answer                          

                mHandler.post(mRunnable); // mRunnable is preinstantiated somewhere
                score++
            }
        }
    } 
```

**重要提示**：您`GameThread`可能使用了一种测量实时的方法（即它不会在没有任何 Thread.sleep(...) 的情况下无限循环调用所有内容。因此，`Handler`不会过度发送“更新分数”消息。如果你的游戏是回合制的（而不是实时的），那么这个问题甚至根本不会出现。

**注2：：**我检查了你的完整代码，你的游戏tick似乎没有任何FPS规定，即你不使用eg`Thread.sleep(33)`或类似的东西。因此，如果您的海盗发生碰撞，我上面写的解决方案将向您的 UI 发送很多消息（并且您的分数将在很短的时间内达到非常高的值——**我怀疑这就是您想要的**）。事实上，你的`score`值可能很快就会溢出，除非碰撞很快结束。所以我建议你像所有游戏一样在你的代码中添加 FPS 平衡。

# html - Dublin Core 和 Metaname 在 HTML5 页面中导致 W3C 验证问题

> ID：12773804
> 
> 赞同：4
> 
> 时间：2012-10-07T23:43:44.967
> 
> 标签：html, w3c-validation

我在 HTML5 页面的头部使用了这些标签，但这些标签会导致 W3C Validation *Keyword is not registered*出现问题。

```
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<meta name="description" content="Sitename - My Website" />
<meta name="keywords" content="graphic, security," />
<meta name="author" content="My Name" />
<meta name="identifier-url" content="" />
<meta name="revisit-after" content="14 days" />
<meta name="robots" content="all" />
<meta http-equiv="content-language" content="en" />
<meta name="Language" content="en" /> 
```

都柏林核心也有同样的问题

```
<!-- Dublin Core -->
<meta name="DC.Title" content="My Site"/>
<meta name="DC.Subject" content="WebDesign; Analysis"/>
<meta name="DC.Description" content="This is my site bla bla bla"/>
<meta name="DC.Publisher" content="My Name"/>
<meta name="DC.Rights" content="Allrights reserved."/>
<!-- Fine Dublin Core --> 
```

我该如何解决这个问题？如果我明显删除这些部分，网站就会运行，但我丢失了有用的关键字，这些关键字有助于更好地索引我的页面。

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:34:46.840

这些是`meta`HTML5 规范中定义的标准名称：http:
[//www.w3.org/TR/2014/REC-html5-20141028/document-metadata.html#standard-metadata-names](http://www.w3.org/TR/2014/REC-html5-20141028/document-metadata.html#standard-metadata-names)

其他名称[需要在以下网址注册](http://www.w3.org/TR/2014/REC-html5-20141028/document-metadata.html#other-metadata-names)：
[http ://wiki.whatwg.org/wiki/MetaExtensions](http://wiki.whatwg.org/wiki/MetaExtensions)

因此[对于 HTML5](https://stackoverflow.com/a/16207631/1591669)，您可以自由使用`name`这两个链接上列出的值，但未列出的值无效。

如果您使用已注册的关键字并且验证器将其报告为错误，则验证器可能不是最新的（可以随时在 wiki 中注册新关键字）。

* * *

编辑：根据评论中的要求，使用 name 的有效示例`dc.language`：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Test</title>
  <meta name="dc.language" content="en">
</head>
<body>
</body>
</html> 
```

您可以使用[http://validator.w3.org/](http://validator.w3.org/)验证它（使用“直接输入”）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-05T12:49:26.787

你最初的方法是正确的。HTML 验证器已同时更新并批准它。

HTML 元元素中的`name`属性有一些定义的值 - 请参阅[HTML5 规范](https://www.w3.org/TR/html5/document-metadata.html#standard-metadata-names)- 但任何其他值也是合法的。所以下面的代码将通过 W3C 的验证器：

```
<meta name="dc.whatever" content="dunno"> 
```

据我所知，这是包含 DC 元数据的唯一符合 HTML5 的方法。Dublin [Core 文档](http://dublincore.org/documents/dc-html/)和[WHATWG](https://wiki.whatwg.org/wiki/MetaExtensions)（由 W3C 规范引用！）在使用`dc`值之前建议以下内容`<meta>`：

```
<link rel="schema.dc" href="http://purl.org/dc/elements/1.1/"> 
```

但是，这是无效的。有一组有限的可接受值`<link rel="...">`，并且`schema`不在其中：[HTML5 规范](https://www.w3.org/TR/html5/links.html#linkTypes)

出于同样的原因，[上面的答案](https://stackoverflow.com/a/23251383/2733244)会产生无效的 HTML - 没有链接类型`meta`。据我所知，没有办法将 XML 包含到 HTML`<script>`中（这对我来说更像是一种 hack）。

如果您想使用 Dublin Core，切换到 XHTML 可能是您最好的选择。

# javascript - 初始化 JavaScript 对象数组及其属性的好方法？

> ID：12773812
> 
> 赞同：17
> 
> 时间：2012-10-07T23:44:44.190
> 
> 标签：javascript

我知道我可以像这样初始化一个 JS 对象数组：

```
var things = [
  {
    prop1: 'foo',
    prop2: 'bar'
  },
  {
    prop1: 'foo',
    prop2: 'bar'
  }
]; 
```

我想我会称这些“匿名”类型（对不起，我使用的是 C#/.NET 语言）。

如果我希望它们具有相同的原型怎么办？所以我定义了一个构造函数：

```
var Thing = function Thing() {
};

Thing.prototype.prop1 = 'default value';
Thing.prototype.prop2 = 'default value'; 
```

现在我希望上面原始代码中的两个项目都是`Thing`s。有没有好的方法来做到这一点？

如果我猜的话，我会说可能是这样的：

```
var things = [
  new Thing() {
    prop1: 'foo',
    prop2: 'bar'
  },
  new Thing() {
    prop1: 'foo',
    prop2: 'bar'
  }
]; 
```

这基本上是 C# 对象初始化器语法。我要避免的是：

```
var thing1 = new Thing();
thing1.prop1 = 'foo';
thing1.prop2 = 'bar';
var thing2 = new Thing();
thing2.prop1 = 'foo';
thing2.prop2 = 'bar';
var things = [thing1, thing2]; 
```

* * *

编辑：

我还应该注意，我的原型还包含一些共享的功能。实际上，我也有嵌套 3 层的数组，所以它更像：

```
{
   [
    { 
      [
        {},
        {}
      ]
    },
    {
      [
        {},
        {}
      ]
    }
  ]
} 
```

这就是为什么我希望像这样内联初始化所有内容，而不是逐行设置每个属性。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-07T23:52:11.173

```
var Thing = function(params) {
  this.prop1 = params.prop1;
  this.prop2 = params.prop2;
};

var things = [
  new Thing({
    prop1: 'foo',
    prop2: 'bar'
  }),
  new Thing({
    prop1: 'foo',
    prop2: 'bar'
  }),
]; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-07T23:49:33.923

你没有使用你的“构造函数”。它首选在您的构造函数中初始化值：

```
var Thing = function Thing(prop1, prop2) {
    this.prop1 = prop1;
    this.prop2 = prop2;
}; 
```

然后做：

```
var thing1 = new Thing("foo", "bar");
var thing2 = new Thing("foo", "bar"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T00:15:35.770

在这种情况下，我向对象添加了一个“config”方法：

```
function Thing() {
}
Thing.prototype.prop1 = 'foo';
Thing.prototype.prop2 = 'bar';
Thing.prototype.config = function(data) {
    for (var i in data)
        if (data.hasOwnProperty(i))
            this[i] = data[i];
}

var array = [
    new Thing().config({
        prop1: 'foobar',
        prop2: 'barfoo'
    })
]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T23:47:55.497

以下可能有效，这也是您想要避免的吗？

```
var thing1 = new Thing();
var thing2 = new Thing();

thing1.prototype = {
    prop1: "foo",
    prop2: "bar"
};

thing2.prototype = {
    prop1: "foo",
    prop2: "bar"
}; 
```

我能想到的另一件事是自己制作构造函数，因此它允许以下内容：

```
var things = [
    new Thing({
        prop1: "foo",
        prop2: "bar"
    }),
    new Thing({
        prop1: "foo",
        prop2: "bar"
    })
]; 
```

# flash - as2：在影片剪辑中停止影片剪辑

> ID：12773815
> 
> 赞同：0
> 
> 时间：2012-10-07T23:45:03.003
> 
> 标签：flash, actionscript, actionscript-2

我有一个名为“main”的影片剪辑，在其中我有我所有的图层和补间，在这些图层中的另一个影片剪辑中，我还有另一个影片剪辑，我希望在第二个影片剪辑播放 3 次时停止播放。

电影剪辑：主 > 蹦床 > boyBounce

我必须编写代码来停止第二个“主要”MC，而不是“boyBounce”一个。

当“主”MC 播放了 3 次它调用 gotoAndStop 命令时，我需要一个可以调用的命令来停止/或转到“boyBounce”的第一帧。

我试过了：

```
_root.boyBounce.gotoAndStop("bounce_stop");
boyBounce.stop();
_level0.boyBounce.gotoAndStop("bounce_stop"); 
```

“bounce_stop”是“boyBounce”中第一帧的名称。

干杯

编辑：我会接受一个停止所有movieClips 播放的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T04:59:38.157

如果您想`boyBounce`在第一帧停止电影。这段代码可以帮助你

```
_root.main.trampoline.boyBounce.gotoAndStop("bounce_stop"); 
```

或者，如果您想`trampoline`在任何所需的帧处停止电影，那么这个可以帮助您

```
 _root.main.trampoline.gotoAndStop(FRAME_NUMBER); 
```

或者，如果你想简单地停止`trampoline`then的动画

```
_root.main.trampoline.stop(); 
```

或者`boyBounce`

```
_root.main.trampoline.boyBounce.stop(); 
```

顺便说一句，您可以追踪在正确方向上不起作用的东西。例如，在您的代码中，如果您尝试`trace` `_root.boyBounce`或`boyBounce`或`_level0.boyBounce`它记录`null`. `boyBounce`因为舞台上没有带名字的电影。注意对象范围。

仅供参考，如果您想从应该通过其父级访问的舞台访问任何影片剪辑，则除非您从同一级别访问，否则您无法直接访问子级。

永远记得访问 like `PARENT_NAME.PARENT_NAME.CHILD_NAME`。也不要忘记，如果你没有`_root`在前面添加，那么它是从你有你的代码的级别开始的，它会搜索该`PARENT_NAME`级别中具有名称的电影，如果该名称中没有电影，则返回 null。

# r - 为什么 data.tables 的 X[Y] 连接不允许完全外连接或左连接？

> ID：12773822
> 
> 赞同：139
> 
> 时间：2012-10-07T23:46:03.867
> 
> 标签：r, join, data.table

这是一个关于 data.table 连接语法的哲学问题。我发现 data.tables 的用途越来越多，但仍在学习...

data.tables的连接格式`X[Y]`非常简洁、方便和高效，但据我所知，它只支持内连接和右外连接。要获得左或完全外连接，我需要使用`merge`：

*   `X[Y, nomatch = NA]`-- Y 中的所有行 -- 右外连接（默认）
*   `X[Y, nomatch = 0]`-- 只有在 X 和 Y 中都匹配的行 -- 内连接
*   `merge(X, Y, all = TRUE)`-- X 和 Y 中的所有行 -- 全外连接
*   `merge(X, Y, all.x = TRUE)`-- X 中的所有行 -- 左外连接

在我看来，如果`X[Y]`连接格式支持所有 4 种连接类型会很方便。是否有理由只支持两种类型的连接？

对我来说，`nomatch = 0`和`nomatch = NA`参数值对于正在执行的操作不是很直观。我更容易理解和记住`merge`语法：`all = TRUE`,`all.x = TRUE`和`all.y = TRUE`. 既然`X[Y]`操作类似于，为什么不使用连接的语法而不是`merge`函数的参数呢？`match``merge``match``nomatch`

以下是 4 种连接类型的代码示例：

```
# sample X and Y data.tables
library(data.table)
X <- data.table(t = 1:4, a = (1:4)^2)
setkey(X, t)
X
#    t  a
# 1: 1  1
# 2: 2  4
# 3: 3  9
# 4: 4 16

Y <- data.table(t = 3:6, b = (3:6)^2)
setkey(Y, t)
Y
#    t  b
# 1: 3  9
# 2: 4 16
# 3: 5 25
# 4: 6 36

# all rows from Y - right outer join
X[Y]  # default
#  t  a  b
# 1: 3  9  9
# 2: 4 16 16
# 3: 5 NA 25
# 4: 6 NA 36

X[Y, nomatch = NA]  # same as above
#    t  a  b
# 1: 3  9  9
# 2: 4 16 16
# 3: 5 NA 25
# 4: 6 NA 36

merge(X, Y, by = "t", all.y = TRUE)  # same as above
#    t  a  b
# 1: 3  9  9
# 2: 4 16 16
# 3: 5 NA 25
# 4: 6 NA 36

identical(X[Y], merge(X, Y, by = "t", all.y = TRUE))
# [1] TRUE

# only rows in both X and Y - inner join
X[Y, nomatch = 0]  
#    t  a  b
# 1: 3  9  9
# 2: 4 16 16

merge(X, Y, by = "t")  # same as above
#    t  a  b
# 1: 3  9  9
# 2: 4 16 16

merge(X, Y, by = "t", all = FALSE)  # same as above
#    t  a  b
# 1: 3  9  9
# 2: 4 16 16

identical( X[Y, nomatch = 0], merge(X, Y, by = "t", all = FALSE) )
# [1] TRUE

# all rows from X - left outer join
merge(X, Y, by = "t", all.x = TRUE)
#    t  a  b
# 1: 1  1 NA
# 2: 2  4 NA
# 3: 3  9  9
# 4: 4 16 16

# all rows from both X and Y - full outer join
merge(X, Y, by = "t", all = TRUE)
#    t  a  b
# 1: 1  1 NA
# 2: 2  4 NA
# 3: 3  9  9
# 4: 4 16 16
# 5: 5 NA 25
# 6: 6 NA 36 
```

更新：data.table v1.9.6 引入了`on=`语法，它允许在主键以外的字段上进行临时连接。[jangorecki](https://stackoverflow.com/a/34219998/1694807)对[如何加入（合并）数据帧（内部、外部、左侧、右侧）的问题的回答？](https://stackoverflow.com/q/1299871/1694807)提供了一些 data.table 可以处理的附加连接类型的示例。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-10-08T00:18:23.577

引用FAQ 1.11[和 和有什么](https://cran.r-project.org/web/packages/data.table/vignettes/datatable-faq.html#MergeDiff)`data.table` [区别？`X[Y]``merge(X, Y)`](https://cran.r-project.org/web/packages/data.table/vignettes/datatable-faq.html#MergeDiff)

> `X[Y]`是一个连接，使用 Y（或 Y 的键，如果有的话）作为索引来查找 X 的行。
> 
> `Y[X]`是一个连接，使用 X 查找 Y 的行（或 X 的键，如果有的话）
> 
> `merge(X,Y)`同时做这两种方式。`X[Y]`和的行数`Y[X]`通常不同，而和返回的行数`merge(X,Y)`是`merge(Y,X)`相同的。
> 
> 但是这忽略了要点。大多数任务都需要在连接或合并后对数据执行某些操作。为什么要合并所有数据列，然后只使用其中的一小部分？您可能会建议 `merge(X[,ColsNeeded1],Y[,ColsNeeded2])`，但这需要程序员确定需要哪些列。`X[Y,j`] 在 data.table 中为您一步完成所有这些。当您编写时`X[Y,sum(foo*bar)]`， data.table 会自动检查`j`表达式以查看它使用了哪些列。它只会对这些列进行子集化；其他的被忽略。内存只为`j`使用的列创建，列`Y`在每个组的上下文中享受标准的 R 回收规则。假设`foo`是 in `X`，而 bar 是 in `Y`（以及 20 个其他列`Y`）。不是吗`X[Y,sum(foo*bar)]`比将所有内容合并后跟一个子集更快速地编程和运行？

* * *

如果你想要一个左外连接`X[Y]`

```
le <- Y[X]
mallx <- merge(X, Y, all.x = T)
# the column order is different so change to be the same as `merge`
setcolorder(le, names(mallx))
identical(le, mallx)
# [1] TRUE 
```

如果你想要一个完整的外部连接

```
# the unique values for the keys over both data sets
unique_keys <- unique(c(X[,t], Y[,t]))
Y[X[J(unique_keys)]]
##   t  b  a
## 1: 1 NA  1
## 2: 2 NA  4
## 3: 3  9  9
## 4: 4 16 16
## 5: 5 25 NA
## 6: 6 36 NA

# The following will give the same with the column order X,Y
X[Y[J(unique_keys)]] 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-08T09:30:46.093

@mnel 的答案是正确的，所以请接受这个答案。这只是跟进，评论太长了。

正如 mnel 所说，左/右外连接是通过交换`Y`和获得的`X`：`Y[X]`-vs- `X[Y]`。因此，该语法支持 4 种连接类型中的 3 种，而不是 2 种，iiuc。

添加第 4 个似乎是个好主意。假设我们添加`full=TRUE`或`both=TRUE`或`merge=TRUE`（不确定最好的参数名称？）那么在我之前没有想到`X[Y,j,merge=TRUE]`这对于FAQ 1.12 中的BUT 之后的原因是有用的。现在添加新功能请求并链接回此处，谢谢：

[FR#2301：像 merge() 一样为 X[Y] 和 Y[X] 连接添加 merge=TRUE 参数。](https://github.com/Rdatatable/data.table/issues/614)

最近的版本加快了速度`merge.data.table`（例如，通过在内部获取浅拷贝以更有效地设置键）。因此，我们正在努力拉近，`merge()`并`X[Y]`为用户提供所有选项以实现充分的灵活性。两者都有优点和缺点。另一个突出的功能要求是：

[FR#2033：将 by.x 和 by.y 添加到 merge.data.table](https://github.com/Rdatatable/data.table/issues/637)

如果还有其他人，请让他们来。

通过问题中的这一部分：

> 为什么不使用合并语法而不是 match 函数的 nomatch 参数？

如果您更喜欢`merge()`语法及其 3 个参数`all`，`all.x`则`all.y`只需使用它而不是`X[Y]`. 认为它应该涵盖所有情况。或者你的意思是为什么这个论点是单一`nomatch`的`[.data.table`？如果是这样，这只是在常见问题解答 2.14 中看起来很自然的方式：“您能否进一步解释为什么 data.table 受到基础中的 A[B] 语法的启发？”。而且，`nomatch`目前只取两个值`0`和`NA`。这可以扩展为负值意味着某些东西，或者 12 意味着使用第 12 行的值来填充 NA，例如，或者`nomatch`将来可能是一个向量，甚至它本身就是 a `data.table`。

嗯。*by-without-by*如何与 merge=TRUE 交互？也许我们应该把它交给[datatable-help](http://r.789695.n4.nabble.com/datatable-help-f2315188.html)。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-10-31T13:50:08.237

这个“答案”是一个供讨论的提议：正如我的评论中所指出的，我建议`join`在 [.data.table() 中添加一个参数以启用其他类型的连接，即：`X[Y,j,join=string]`。除了4种普通join之外，我还建议支持3种*exclusive* join，以及*cross* join。

各种连接类型的`join`字符串值（和别名）建议为：

1.  `"all.y"`和`"right"`-- 右连接，当前 data.table 默认值 (nomatch=NA) - 所有 Y 行的 NA 没有 X 匹配；
2.  `"both"`和`"inner"` -- 内连接 (nomatch=0) - 只有 X 和 Y 匹配的行；

3.  `"all.x"`和`"left"` -- 左连接 - 来自 X、NA 的所有行，其中没有 Y 匹配：

4.  `"outer"`和`"full"` -- 完全外连接 - 来自 X 和 Y 的所有行，不匹配的 NA

5.  `"only.x"`和`"not.y"`-- 非连接或反连接返回没有 Y 匹配的 X 行

6.  `"only.y"` 和`"not.x"`-- 非连接或反连接返回没有 X 匹配的 Y 行
7.  `"not.both"`-- 排他连接返回与另一个表不匹配的 X 和 Y 行，即异或 (XOR)
8.  `"cross"`-- 交叉连接或*笛卡尔积*，X 的每一行与 Y 的每一行匹配

默认值`join="all.y"`对应于当前默认值。

“all”、“all.x”和“all.y”字符串值对应于`merge()`参数。“right”、“left”、“inner”和“outer”字符串可能更适合 SQL 用户。

“both”和“not.both”字符串是我目前最好的建议——但对于内部连接和独占连接，可能有人有更好的字符串建议。（我不确定“独占”是否是正确的术语，如果“XOR”连接有合适的术语，请纠正我。）

使用 of`join="not.y"`是替代 `X[-Y,j]`或非`X[!Y,j]`连接语法，可能更清楚（对我而言），尽管我不确定它们是否相同（data.table 版本 1.8.3 中的新功能）。

交叉连接有时很方便，但它可能不适合 data.table 范式。

# java - Tomcat 6 - connectTimeout 仍在执行默认值

> ID：12773823
> 
> 赞同：3
> 
> 时间：2012-10-07T23:46:19.553
> 
> 标签：java, tomcat, configuration

我有一个通过 JQuery Ajax 请求的 Servlet。激活的过程需要很长时间才能执行（最多 3-5 分钟）。我已将 server.xml 中的 connectTimeout 设置为“600000”（10 分钟），但 Tomcat 似乎忽略了它。始终在一分钟标记处返回 504 Bad Gateway。我需要调整其他设置以使 connectTimeout 工作吗？我的 server.xml 的片段如下。

```
<Connector port="8080" 
    executor="tomcatThreadPool" protocol="HTTP/1.1"
    connectionTimeout="600000"
    redirectPort="8443" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:37:52.403

我的猜测是 Tomcat 不是您遇到超时的原因。“504 网关超时”错误通常是由您和 Tomcat 之间的网关/代理/防火墙引起的。

# iframe - 调整其中包含调整大小的 iframe 的 iframe

> ID：12773828
> 
> 赞同：1
> 
> 时间：2012-10-07T23:47:20.367
> 
> 标签：iframe

好吧。我想尽我所能解释这一点。

我正在一个网站上工作，该网站上有一个带有 iframe 的网页。iframe 显示另一个网页，其中包含它自己的 iframe。

iframe 中的 iframe 会改变大小，尤其是高度。

如何让 iframe 中的 iframe 和显示 iframe 的 iframe...（Oye，令人困惑）一起改变高度？

基本上我所拥有的是一个网页，该网页在 iframe 中有一个 iframe，而 iframe 中的 iframe 是一个论坛页面。这意味着当人们向它发布内容时，内部 iframe 会改变高度，因此需要扩展它所包含的 iframe。

只是问这个问题的人真的让我感到困惑。

我已经对谷歌和各种网站进行了评分，但我似乎无法获得可以满足我想要或为此工作的代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-02T20:40:21.223

尝试使用这个库来执行此操作，您需要将中间页面设置为同时运行主机和 iframe 脚本，并且大小应该上升到您的顶层。

[https://github.com/davidjbradshaw/iframe-resizer](https://github.com/davidjbradshaw/iframe-resizer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T18:32:53.437

我知道这是一个旧线程，但我想我会分享我的经验。我在工作中的一个项目上遇到了几乎相同的问题。我到处搜索并尝试了很多不同的东西，但最后发现它工作得很好（在这里的一些帖子的帮助下！）。到目前为止，我使用 FF 30、IE11 和 chrome 进行了测试。简而言之，我有一个可以放置 iframe 的父 HTML 页面。该 iframe 加载包含另一个 iframe 的 aspx 页面。最里面的 iframe(child_page_2.aspx) 有动态内容，我希望两个 iframe 都相应地调整大小。另外，为了清楚起见，这些都在同一个域/主机名上。

我在最里面的 iframe（child_page_2.aspx）上使用数据列表进行分页。每次点击页码都会生成不同高度的动态内容，即浏览分页数据。我发现执行 OnClick() 事件服务器端并使用 ScriptManager 触发客户端 javascript 会在加载内容后返回正确的高度。我没有显示所有 DataList 代码，只是嵌套在 ItemTemplate 中的一个链接按钮。

我知道这是一种非常糟糕的设置网页的方式，这正是我们被迫做的，因为我们只能访问 HTML 父页面。嵌套 iframe 的原因是为我们提供了一种“菜单”页面，其内容位于其下方的 iframe 中（child_page_1.aspx --> child_page_2.aspx）。

希望这对某人有帮助！

父页面.HTML：

```
<iframe src=child_page_1.aspx id="mainFrame" /> 
```

child_page_1.aspx：

```
<head>
<script type="text/javascript">

    function adjustMyFrameHeight() {
          var frame = getElement("mainFrame");    
           frame.height = document.body.offsetHeight + 60 + "px";
    }
    function getElement(aID) {
        return (document.getElementById) ?
        parent.document.getElementById(aID) : parent.document.all[aID];
    }

    function updateframeheight(newheight) {
        var frame = document.getElementById("subFrame");
        frame.height = newheight + "px";
        adjustMyFrameHeight();

    }
</head>

<body onload="adjustMyFrameHeight();">

<iframe id="subFrame" src="child_page_2.aspx" >

</body> 
```

child_page_2.aspx：

```
<head>
<script type="text/javascript">

    function adjustMyFrameHeight() {
           var frame = getElement("subFrame");
           frame.height = document.body.offsetHeight + 60 + "px";

    }
    function getElement(aID) {
        return (document.getElementById) ?
        parent.document.getElementById(aID) : parent.document.all[aID];

    }
    function updatesize() {
        parent.updateframeheight(document.body.offsetHeight + 60);

    }
</script>
</head>

<body  onload="adjustMyFrameHeight();">
<form>
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>

<asp:UpdatePanel ID="UpdatePanel1" runat="server" >
<ContentTemplate>

<asp:LinkButton ID="lnkbtnPrevious" runat="server" OnClick="lnkbtnPrevious_Click">Previous</asp:LinkButton>

</ContentTemplate>
</asp:UpdatePanel>

</form> 
```

child_page_2.aspx.cs：

```
protected void lnkbtnPrevious_Click(object sender, EventArgs e)
    {

        ScriptManager.RegisterStartupScript(Page, typeof(Page), "updatesize", "updatesize();", true);
    } 
```

# jsf-2 - 在使用复合材料完成自定义组件的实现方面需要帮助

> ID：12773836
> 
> 赞同：2
> 
> 时间：2012-10-07T23:48:49.070
> 
> 标签：jsf-2, custom-component, composite-component

我正在使用复合材料实现自定义组件。我的复合组件的源代码如下：

```
<cc:interface componentType="selectOneRadio"
              xmlns="http://www.w3.org/1999/xhtml"   
              xmlns:cc="http://java.sun.com/jsf/composite">
    <cc:attribute name="direction" default="next" />
</cc:interface> 
```

如您所见，我不使用该`implementation`部分，但是如果我必须使用它对我来说没问题。

然后，我用 Java 渲染它的内容，如下所示：

```
public void encodeChildren(FacesContext context) throws IOException {
   ...
} 
```

此控件将根据名称为“direction”的属性的值生成一个整数值。如果它的值为“next”，则生成的值为当月的当天加 1，如果它的值为“back”，则生成的值为当月的当天减 1。

我想知道当用户单击`<h:commandButton />`我在自定义组件之后添加的 a 时，如何将生成的值传递给支持 bean？

我需要使用`<f:ajax />`或类似的东西吗？

顺便问一下，我可以用 Java 渲染我的复合组件并`<cc:implementation />`同时（混合）吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:24:33.123

您需要在`decode()`方法中执行表单提交处理作业。

```
@Override
public void decode(FacesContext context) {
    // ...
} 
```

`ValueExpression`您可以通过继承的`getValueExpression()`方法获取属性。您可以使用 执行“设置”操作`ValueExpression#setValue()`。例如

```
<my:composite ... value="#{bean.foo}" /> 
```

和

```
ValueExpression value = getValueExpression("value");
value.setValue(context.getElContext(), newValue); 
```

将在 .`newValue`表示的属性上进行相应设置`#{bean.foo}`。

# css - 如何使链接在特定的 div 中打开

> ID：12773837
> 
> 赞同：1
> 
> 时间：2012-10-07T23:49:03.920
> 
> 标签：css, layout

嗨，伙计们，我知道我在另一个问题上问过它，但我不知道如何解释我自己

所以我使用 flexi css 为我的网站制作了一个模板，它有 DIV 类 ....

因此，如果您查看我提供的图片，我的意思是我希望链接仅在主列中打开。因为现在当我单击链接时，整个页面都会发生变化，但我只是要更改的主页。我希望链接在 class='row_6 cssLI PageLayout28_row_6_design' 中打开请帮助

链接到我的图片 [点击](http://i.stack.imgur.com/bHvLV.png)

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="includes/CSSLayouts/CSSLayouts.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="includes/CSSLayouts/debug_plus.js"></script>
<link href="includes/CSSLayouts/PageLayout28.css" rel="stylesheet" type="text/css" />
<link href="includes/CSSLayouts/PageLayout28_user.css" rel="stylesheet" type="text/css" />
</head>

<body class="PageLayout28_body_design">
<div class="PageLayout28">
<!-- (CSSLayouts Begin)  #PageLayout28 #build_version=1.1.284;pack=User;category=My Page Layouts;layout=;layoutType=page;scheme=;cssSource=file;assets=;halign=center;minwidth=1028px;maxwidth=1028px;width=1028px;bc=My Page Layouts;bl=final10062012-->

<div class='cssLO PageLayout28_wrapper_layout'>
<div class='wrapper cssLI PageLayout28_wrapper_design'>
<div class='cssLO PageLayout28_row_1_layout'>
<div class='row_1 cssLI PageLayout28_row_1_design'>
<div class='cssLO PageLayout28_column_3_layout'>
<div class='column_3 cssLI PageLayout28_column_3_design'><!-- column_3 Content Starts Here -->&nbsp;<!-- column_3 Content Ends Here -->
</div>
</div>
<div class='cssLO PageLayout28_column_4_layout'>
<div class='column_4 cssLI PageLayout28_column_4_design'><!-- column_4 Content Starts Here -->&nbsp;<!-- column_4 Content Ends Here -->
</div>
</div>
<div class='cssLClearC'></div>
</div>
</div>
<div class='cssLO PageLayout28_row_2_layout'>
<div class='row_2 cssLI PageLayout28_row_2_design'><!-- row_2 Content Starts Here -->&nbsp;<!-- row_2 Content Ends Here -->
</div>
</div>
<div class='cssLO PageLayout28_row_3_layout'>
<div class='row_3 cssLI PageLayout28_row_3_design'>
<div class='cssLO PageLayout28_column_1_layout'>
<div class='column_1 cssLI PageLayout28_column_1_design'><!-- column_1 Content Starts Here -->&nbsp;<!-- column_1 Content Ends Here -->
</div>
</div>
<div class='cssLO PageLayout28_column_2_layout'>
<div class='column_2 cssLI PageLayout28_column_2_design'>
<div class='cssLO PageLayout28_row_6_layout'>
<div class='row_6 cssLI PageLayout28_row_6_design'><!-- row_6 Content Starts Here -->

              MAIN

            <!-- row_6 Content Ends Here -->
</div>
</div>
<div class='cssLO PageLayout28_row_7_layout'>
<div class='row_7 cssLI PageLayout28_row_7_design'>
<div class='cssLO PageLayout28_row_7_xtdalignwrapper_layout'>
<div class='row_7_xtdalignwrapper cssLI PageLayout28_row_7_xtdalignwrapper_design'>
<div class='cssLO PageLayout28_column_5_layout'>
                                               <div class='column_5 cssLI PageLayout28_column_5_design'><!-- column_5 Content Starts Here -->&nbsp;<!-- column_5 Content Ends Here -->
                                               </div>
</div>
<div class='cssLO PageLayout28_column_6_layout'>
                                               <div class='column_6 cssLI PageLayout28_column_6_design'><!-- column_6 Content Starts Here -->&nbsp;<!-- column_6 Content Ends Here -->
                                               </div>
</div>
<div class='cssLO PageLayout28_column_7_layout'>
                                               <div class='column_7 cssLI PageLayout28_column_7_design'><!-- column_7 Content Starts Here -->&nbsp;<!-- column_7 Content Ends Here -->
                                               </div>
</div>
<div class='cssLO PageLayout28_column_8_layout'>
                                               <div class='column_8 cssLI PageLayout28_column_8_design'><!-- column_8 Content Starts Here -->&nbsp;<!-- column_8 Content Ends Here -->
                                               </div>
</div>
<div class='cssLClearC'>
</div>
</div>
</div>
<div class='cssLClearR'>  
</div>
</div>
</div>
<div class='cssLClearR'></div>
</div>
</div>
<div class='cssLClearC'></div>
</div>
</div>
<div class='cssLO PageLayout28_row_4_layout'>
<div class='row_4 cssLI PageLayout28_row_4_design'><!-- row_4 Content Starts Here -->&nbsp;<!-- row_4 Content Ends Here -->
</div>
</div>
<div class='cssLO PageLayout28_row_5_layout'>
<div class='row_5 cssLI PageLayout28_row_5_design'>
<div class='cssLO PageLayout28_column_9_layout'>
<div class='column_9 cssLI PageLayout28_column_9_design'><!-- column_9 Content Starts Here -->

<!-- column_9 Content Ends Here -->
</div>
</div>
<div class='cssLO PageLayout28_column_10_layout'>
<div class='column_10 cssLI PageLayout28_column_10_design'><!-- column_10 Content Starts Here -->

          test | test | test | test |test

<!-- column_10 Content Ends Here -->
</div>
</div>
<div class='cssLClearC'>
</div>
</div>
</div>
<div class='cssLO PageLayout28_row_8_layout'>
<div class='row_8 cssLI PageLayout28_row_8_design'><!-- row_8 Content Starts Here -->

      CopyRight © 2012   All rights reserved

<!-- row_8 Content Ends Here -->
</div>
</div>
<div class='cssLClearR'></div>
</div>
</div>
<div class="cssLClearL"></div>
<!-- #PageLayout28 (CSSLayouts End) -->
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T00:20:59.107

操作 DOM（文档对象模型）。例如：将[HTML 内容加载到 DIV](https://stackoverflow.com/questions/5076349/loading-html-content-into-div)或[使用 jQuery.load 从外部加载 div 内容到自己的 div](https://stackoverflow.com/questions/1560986/loading-div-content-from-external-with-jquery-load-into-own-div?rq=1)

希望这对您有所帮助。

# php - 如何使用 PHP 从 HTML 文本区域保存 TXT 文件？

> ID：12773838
> 
> 赞同：2
> 
> 时间：2012-10-07T23:49:19.333
> 
> 标签：php, html, post, textarea

我正在尝试为我的网站制作一个文本文件存储系统。

这是我到目前为止所拥有的。

我已经完成了一些工作，但是在进行了一些我认为会有所帮助的更改后，我遇到了更多错误。

我正在尝试在不更改页面或 url 的情况下完成此任务。

```
<!DOCTYPE HTML>
<html>
    <body>
        <?php
    if (isset($_POST)){
        //Save File
        $file = fopen($_POST['filename'] & ".txt","r+");
        $text = $_POST["textdata"];
        file_put_contents($file, $text);
        fclose($file);
        //Open File
        $file = fopen($_POST['filename'] & ".txt", "r") or exit("Unable to open file.");
        while(!feof($file)){
            echo fgets($file). "<br />";
        }
        fclose($file);
    }

    echo '
    <form name="savefile" method="post" action="' . $_SERVER['PHP_SELF'] . '">
        File Name: <input type="text" name="filename" value=""><br/>
        <textarea rows="20" cols="100" name="textdata"></textarea><br/>
        <input type="submit" name="submit" value="Save Text to Server">
</form>
    <br/><hr style="width: 100%; height: 4px;"><br/>
    <form name="openfile" method="post" action="' . $_SERVER['PHP_SELF'] . '">
        Open File: <input type="text" name="filename" value="">
        <input type="submit" name="submit" value="Submit File Request">
</form>';
    ?>
    </body>
<html> 
```

如果唯一的方法是将其重定向到 php 页面，然后将其发送回去，那很好，但我不知道该怎么做，（即使它可能更简单）

感谢您为我提供的任何帮助或建议！

-杰克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T04:21:30.080

首先，非常感谢您的帮助！

我真的很感激那些更有经验的人偶尔能帮助一个新手。

在花了一些时间根据您的一些建议修改我的代码之后，我终于让它工作了！:D

我将在此处留下最终代码，以防其他人偶然发现此主题并遇到类似问题。

* * *

```
<!DOCTYPE HTML>
<html>
<body style="background-color: rgb(225,225,225)">
    <form name="savefile" method="post" action="">
        File Name: <input type="text" name="filename" value=""><br/>
        <textarea rows="16" cols="100" name="textdata"></textarea><br/>
        <input type="submit" name="submitsave" value="Save Text to Server">
</form>
    <br/><hr style="background-color: rgb(150,150,150); color: rgb(150,150,150); width: 100%; height: 4px;"><br/>
    <form name="openfile" method="post" action="">
        Open File: <input type="text" name="filename" value="">
        <input type="submit" name="submitopen" value="Submit File Request">
</form>
    <br/><hr style="background-color: rgb(150,150,150); color: rgb(150,150,150); width: 100%; height: 4px;"><br/>
    File Contents:<br/>
    <?php
    if (isset($_POST)){
        if ($_POST['submitsave'] == "Save Text to Server"  && !empty($_POST['filename'])) {
            if(!file_exists($_POST['filename'] . ".txt")){
                $file = tmpfile();
            }
            $file = fopen($_POST['filename'] . ".txt","a+");
            while(!feof($file)){
                $old = $old . fgets($file). "<br />";
            }
            $text = $_POST["textdata"];
            file_put_contents($_POST['filename'] . ".txt", $old . $text);
            fclose($file);
        }

        if ($_POST['submitopen'] == "Submit File Request") {
            if(!file_exists($_POST['filename'] . ".txt")){
                exit("Error: File does not exist.");
            }
            $file = fopen($_POST['filename'] . ".txt", "r");
            while(!feof($file)){
                echo fgets($file). "<br />";
            }
            fclose($file);
        }
    }
    ?>
</body>
</html> 
```

* * *

希望这可以帮助！

-杰克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T23:59:52.520

就像 Geek Num 88 所说，使用 AJAX（甚至 Websockets）会阻止重新加载页面。但是您已经几乎可以使用此代码了。file_put_contents 第一个参数应该是一个指向文件路径的字符串。你现在给它的是一个打开文件的资源。

所以只需删除 fopen 命令并将文件名分配给 $file。

[小提示：读取文件与使用等效的file_get_contents](http://www.php.net/file_get_contents)一样简单。不过，我确实看到了这种实现的一些安全隐患。所以总是过滤输入和转义输出。但那完全是另一回事了。

快乐编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T00:00:48.190

仅当提交来自第一个表单时，写入部分才需要执行。如果从第一个表单提交，下面的代码将写入文件，如果从第二个表单提交，将读取文件。

```
if (isset($_POST)){

   if ($_POST['submit'] == "Save Text to Server"  && !empty($_POST['filename'])) {
        //Save File
        $file = fopen($_POST['filename'] & ".txt","r+");
        $text = $_POST["textdata"];
        file_put_contents($file, $text);
        fclose($file);
    }

    if ($_POST['submit'] == "Submit File Request") {
         //Open File
         $file = fopen($_POST['filename'] & ".txt", "r") or exit("Unable to open file.");
         while(!feof($file)){
            echo fgets($file). "<br />";
          }
         fclose($file);
     }
} 
```

如果您需要在不重新加载页面的情况下执行此操作，则需要从表单使用 Ajax 发布到上述代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T00:10:07.903

`$file = fopen($_POST['filename'] & ".txt","r+");`

PHP 中的连接字符是 . （点）而不是 &。文件名由用户定义，因此您应该使用模式 'w' 调用 fopen，这将尝试创建文件以防文件不存在。

测试`isset($_POST)`总是返回 true，而不是 test `isset($_POST['filename'])`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-04T02:28:40.660

Olijake 的 PHP 有很多错误，改为制作简单的自我保存页面，可能存在安全问题，并且 PHP 部分也在单独的文件中，因为默认情况下它不会在客户端中可见，但它可以工作（在移动 Chrome 中创建和测试） ..

```
<!DOCTYPE HTML>
<html>
<body onload="document.forms[0].textdata.value=document.body.parentElement.outerHTML">
    <form name="savefile" method="post" action="">
        <textarea rows="16" cols="100" name="textdata"></textarea><br/>
        <input type="submit" name="submitsave" value="Save Text to Server">
    </form>
</body>
</html>
<?php
    if (!empty($_POST["textdata"])) {
        $old="";
        $file = fopen("saver.php" ,"a+");
            while(!feof($file)){
                $old = $old . fgets($file);
        }
        if ($_POST['submitsave'] == "Save Text to Server") {
            $file = fopen("index.php" ,"a+");
            $text = $_POST["textdata"];
            file_put_contents("index.php", $text . $old);
            fclose($file);
        }
    }
?> 
```

# openlayers - 如何将鼠标悬停在线串以在 Openlayer 中创建标记？

> ID：12773839
> 
> 赞同：0
> 
> 时间：2012-10-07T23:49:20.333
> 
> 标签：openlayers

如果你在 openlayers 中创建一个线串，你是如何做到的，当你沿着线串的段悬停时，会在用户悬停的地方弹出一个标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T06:56:31.303

看这个例子： [http ://dev.openlayers.org/examples/highlight-feature.html](http://dev.openlayers.org/examples/highlight-feature.html)

最重要的是： hover : true

对于弹出窗口看这里： [http ://dev.openlayers.org/examples/select-feature-openpopup.html](http://dev.openlayers.org/examples/select-feature-openpopup.html)

# perl - 使用 Module::Package 为 dist 设置“inc”目录

> ID：12773842
> 
> 赞同：0
> 
> 时间：2012-10-07T23:49:35.020
> 
> 标签：perl, cpan, perl-module

例如，CPAN 发行版在其中`Scalar-Does-0.006`使用，并且 的代码驻留在子目录中，文件如下：`Module::Package``Makefile.PL``Module::Package``inc`

```
inc/Module/AutoInstall.pm
inc/Module/Install/AutoInstall.pm
inc/Module/Install/AutoManifest.pm
inc/Module/Install/Base.pm
... 
```

问题：如果我想`Module::Package`用于我自己的发行版，有没有一种方便的方法可以`inc`用我的发行版需要的文件填充目录？我已`Module::Package`在 perl 的 site_perl 目录中本地安装。

我似乎无法在`Module::Package`文档中找到答案。

答：只需创建您的`Makefile.PL`，然后运行它（即`perl Makefile.PL`）将填充`inc`目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T00:53:26.230

[Module::Package](https://metacpan.org/module/Module%3a%3aPackage)是[Module::Install](https://metacpan.org/module/Module%3a%3aInstall)的扩展。它不会重复 Module::Install 文档，只是它添加的部分。阅读[模块::安装文档](https://metacpan.org/module/Module%3a%3aInstall)。

除非您需要 Module::Package 提供的扩展，否则我建议您从 Module::Install 开始。Module::Install 做了所有的捆绑工作，拥有大量的插件，已经存在多年，并且拥有大量用户。如果需要，稍后切换到 Module::Package，它应该是替代品。

# linux - 将时间戳附加到 Ubuntu 中的文件名

> ID：12773853
> 
> 赞同：12
> 
> 时间：2012-10-07T23:52:53.170
> 
> 标签：linux, bash, timestamp

我有一个 bash 脚本，用于每天备份 SSD 的内容，但是我在脚本中使用以下命令来命名文件

```
zip -r ssd-$(date "+%b_%d_%Y").zip ../ssd 
```

它已经将月、日和年附加到文件名中，但是如何修改它以将服务器的时间戳也附加到文件名上？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-07T23:59:47.530

也添加`_%H_%M_%S`到日期格式字符串中。例如，`date +%b_%d_%Y_%H_%M_%S`生成一个字符串，如 `Oct_07_2012_17_57_36`. 对于较短的字符串，请考虑格式 %s; 例如，`date +%s`生成一个类似 1349654346 的字符串，即自 1970-01-01 00:00:00 UTC 以来的秒数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T23:58:41.677

以下内容是否满足您的需求？

```
date "+%b_%d_%Y_%H.%M.%S" 
```

# algorithm - 证明 log_2(n) 在 Ω(log_2(log_2(n))

> ID：12773855
> 
> 赞同：1
> 
> 时间：2012-10-07T23:53:21.110
> 
> 标签：algorithm, big-o

我正在为算法考试而学习，其中一个练习题让我有点困惑。我应该证明 logn 在 Ω(log(logn)) 中。我知道解决这个问题的两种方法：要么使用 Ω 的定义（找到一些常数 C，使得所有 c>=C 的 logn >= c * log(logn)），或者使用极限比较（将 lim 作为 n ->inf of logn/log(logn) 并显示它等于无穷大）。我的问题是我真的不知道如何为第一种方法找到一个常数，而对于第二种方法，我不知道如何评估该限制。有小费吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T00:02:32.773

如果您想找到商 f(x)/g(x) 的极限为 x->infinity，其中 f(x) 和 g(x) 也趋于无穷大，通常的方法是尝试应用[L'Hôpital's](http://en.wikipedia.org/wiki/L%27H%C3%B4pital%27s_rule) 通过取 f(x) 和 g(x) 的导数并找到 f'(x)/g'(x) 的极限作为 x->infinity 来进行[规则。](http://en.wikipedia.org/wiki/L%27H%C3%B4pital%27s_rule)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T23:04:16.673

只需选择 c = 1。

`log n >= log (log n)`

使用`x >= log x`which 又由`2^y >= y`.

# python - 将值从队列移动到堆栈

> ID：12773856
> 
> 赞同：0
> 
> 时间：2012-10-07T23:53:29.260
> 
> 标签：python, abstract-data-type

如果我想将一个值从队列移动到堆栈（值不应再在队列中，只是在堆栈中），我是否需要在将其推入堆栈之前将其出列，或者将其自动推入堆栈出队吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:55:36.417

如果您的实现是标准队列和堆栈，那么您需要将其出列以将其从队列中删除。单独推入另一个堆栈的操作不会将其从队列中删除。但是，首先要获得价值，您可能已经将其出列。

例如，如果您使用的是[`Queue`](http://docs.python.org/library/queue.html)python 模块，那么将从队列`Queue.get()`中删除*并返回一个项目。*但是这个动作独立于将值压入堆栈。

* * *

使用来自的双端队列的`deque`示例`collections`：

```
>>> stack = [1,2,3]
>>> stack
[1, 2, 3]

>>> from collections import deque
>>> queue = deque(['foo', 'bar', 'baz'])
>>> queue.append('one')
>>> queue.append('two')

>>> stack.append('foo')
>>> stack
[1, 2, 3, 'foo']
>>> queue
deque(['foo', 'bar', 'baz', 'one', 'two']) 
```

请注意，仅将相同的值添加到堆栈不会对还包含`'foo`. （尽管`id('foo')`可能是一样的！）

但是，从队列中显式弹出`foo`会将其从队列中删除：

```
>>> stack.append(queue.popleft())
>>> queue
deque(['bar', 'baz', 'one', 'two'])
>>> stack
[1, 2, 3, 'foo'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T00:05:48.907

您描述的第二种设计基本上意味着一件物品只能同时出现在一个收藏中。这将是相当尴尬的使用。一般来说，集合（堆栈和队列就是）应该能够存储任何类型的对象而不影响对象的状态。

所以，是的，对于队列和/或堆栈的任何合理实现，向其中添加一个项目不会将其从后者中删除。

# java - 方法过滤数组中的偶数值并在新数组中返回它们

> ID：12773858
> 
> 赞同：0
> 
> 时间：2012-10-07T23:53:59.070
> 
> 标签：java, arrays, bluej

谁能告诉我如何更正以下代码以正常工作？

编写一个方法 filterEvens ，它接受一个整数数组并返回一个只包含偶数值的新数组。

仅包含偶数值的新数组。例如：

```
int[] data = {1, 3, 4, 2, 0, 5, -2};
int[] evens = filterEvens(data);

public static int[] filterEvent(int[] data) {
    int countLength = 0;

    for (int i = 0; i < data.length; i++) {
        if (data[i] % 2 == 0) {
            countLength++; 
        }
    }

    int[] filArray = new int[countLength]; 
    for (int i = 0; i < data.length; i++) {
        if (data[i] % 2 == 0) {
            filArray[i] = data[i]; 
        }
    }

    return filArray;  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T23:59:12.707

你填写了错误的索引。

你有

```
if(data[i]%2==0)
{
  filArray[i]= data[i] ; 
} 
```

这对于数据单元格是正确的，但 filArray 的单元格是错误的，将其更改为

```
 int j = 0; 
 for (int i =0; i< data.length;i++)
  {
    if(data[i]%2==0)
    {
      filArray[j]= data[i] ;
      j++; 
    }
  } 
```

其余的看起来还可以。尽管您应该看一下，`ArrayList`因为它可以使这更有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T00:00:38.607

这里的问题是：

```
for (int i =0; i< data.length;i++)
  {
    if(data[i]%2==0)
    {
      filArray[i]= data[i] ; 
    }
} 
```

您正在从值 0-> data.length 循环。这是一个问题，因为数组 filArray[i] 的长度较小。

想象一下，你正在寻找某人的房子。在他们给你的街道上，假设 Emerald Dr. 门牌号可以从 2000 到 3000。然后你被告知他们住在 4000 Emerald Dr. 这里同样的情况，除了计算机正在试图找到房子。

# c# - 我如何调试这个 .NET BCL 代码？

> ID：12773860
> 
> 赞同：0
> 
> 时间：2012-10-07T23:54:36.560
> 
> 标签：c#, asp.net, .net, debugging, debug-symbols

dll中存在以下方法`System.Web.Security`

```
Dll: System.Web.Security 
File:  CookielessHelper.cs
Method: 

    // This function is called for all requests -- it must be performant.
    //    In the common case (i.e. value not present in the URI, it must not
    //    look at the headers collection
    internal void RemoveCookielessValuesFromPath() 
    { ... } 
```

我需要哪些步骤才能在此方法中设置断点以便找出一些东西？

我还安装了 ReSharper 7。

我已经尝试了一些事情，但无法弄清楚如何做到这一点。我最接近的是逐步完成一些 ASP.NET MVC 代码，但不是一些更核心的东西，比如这个。

[注意：此问题与此先前提出的 SO question](https://stackoverflow.com/questions/9089745/possible-bug-with-asp-net-mvc-3-routing)相关/启发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T23:58:23.873

Visual Studio 包含一个用于调试框架的工具。本文介绍了如何。

[https://web.archive.org/web/20160219220557/http://blogs.msdn.com/b/sburke/archive/2008/01/16/configuring-visual-studio-to-debug-net-framework-源代码.aspx](https://web.archive.org/web/20160219220557/http://blogs.msdn.com/b/sburke/archive/2008/01/16/configuring-visual-studio-to-debug-net-framework-source-code.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-01T15:30:52.240

说明已移至 Microsoft Docs：

[https://docs.microsoft.com/en-us/visualstudio/debugger/how-to-debug-dotnet-framework-source?view=vs-2017](https://docs.microsoft.com/en-us/visualstudio/debugger/how-to-debug-dotnet-framework-source?view=vs-2017)

# android - Andengine (gles2) - ButtonSprite 不响应点击

> ID：12773861
> 
> 赞同：1
> 
> 时间：2012-10-07T23:54:41.810
> 
> 标签：android, andengine, game-engine

我有这样的代码：

```
mButton = new ButtonSprite(400  , 400, myTiledTextureRegion.getTextureRegion(0), myTiledTextureRegion.getTextureRegion(1), 
            activity.getVertexBufferObjectManager(), new OnClickListener() {

                @Override
                public void onClick(ButtonSprite pButtonSprite, float pTouchAreaLocalX,
                        float pTouchAreaLocalY) {

                                 Toast.makeText(MenuScene.this.activity, "Clicked", Toast.LENGTH_LONG).show();

                }
            });

    this.attachChild(mButton); 
```

**我的问题是，当我单击按钮时，我没有收到 toast 消息（记录相同），而且 myTiledTextureRegion.getTextureRegion(1) 的精灵也没有改变。**我不知道为什么？

我可以点击按钮，但没有任何反应。我尝试使用 AnimatedSprite 来测试资源并正确显示动画。为什么我的 ButtonSprite OnClickListener 和精灵更改在那里不起作用？

我加载资源的方式：

```
BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");
    mBitmapTextureAtlas = new BuildableBitmapTextureAtlas(activity.getTextureManager(), 512, 256, TextureOptions.NEAREST);
    myTiledTextureRegion =  BitmapTextureAtlasTextureRegionFactory.createTiledFromAsset(mBitmapTextureAtlas, activity, "btn.png", 1, 3);

    try {
        mBitmapTextureAtlas.build(new BlackPawnTextureAtlasBuilder<IBitmapTextureAtlasSource, BitmapTextureAtlas>(0, 0, 1));
        mBitmapTextureAtlas.load();
    } catch (TextureAtlasBuilderException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我在我的场景课上做所有事情，因为我只有一个活动（和许多场景）。感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T00:21:53.670

看看这是否是问题......在您附加按钮之前，请`this.attachChild(mButton);`确保并注册触摸区域`this.registerTouchArea(mButton);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:03:53.890

尝试将精灵添加到场景中后，使用：scene.setTouchAreaBindingOnActionDownEnabled(true);

# php - 我使用 Imagmagick 制作了一个自定义验证码，但它停止工作

> ID：12773862
> 
> 赞同：2
> 
> 时间：2012-10-07T23:54:56.017
> 
> 标签：php, imagemagick, captcha

我不确定问题是什么，在我将文件移动到新目录之前它工作正常，现在它似乎不想加载/创建图像。

```
<?php
session_start();
header('Content-type: image/png');

$text = $_SESSION['secure'];
$image = new Imagick();
$draw = new ImagickDraw();
$color = new ImagickPixel('#444444');

$image->newImage(320, 40, new ImagickPixel('#0d0d0d'));
$image->setImageFormat('png');
$draw->setFont("fonts/UbuntuMono-B.ttf");
$draw->setFontSize(30);
$draw->setFillColor($color);
$image->annotateImage($draw, 100, 30, 0, $text);

$image->sketchImage (1, 10, 0);

echo $image;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:03:21.773

不完全确定 Imagick 是如何工作的，但您确定您在将其移至的目录中具有适当的文件权限吗？

你确定你没有改变什么？

最后，如果你把它放回去，它还能正常工作吗？

（我会回答你的问题，但我没有必要的声誉）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T00:15:34.597

您可以通过在文件顶部添加以下内容来检查错误：

```
ini_set('display_errors',1); 
error_reporting(E_ALL); 
```

或从命令行：

```
php -l filepath.php 
```

将文件夹的所有者设置为 apache（如果您使用的是 apache）可能会解决您的问题（如果它是权限）。

```
chown apache:apache filepath.php 
```

[谷歌有一个关于这个主题的详尽教程。](http://code.google.com/edu/tools101/linux/ownership_permissions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-11T20:11:41.947

我们需要生成一个随机字符串（文本），将其存储在会话中以检查 $_POST，使用该字符串创建图像，在表单上显示图像，然后在提交时检查它。

步骤 1\. 创建一个随机字符串并将其保存在 $_SESSION 这一步非常简单，因为 PHP 具有我们需要的所有功能。生成随机字符串的一种快速有效的方法是使用 rand 函数，对其进行 md5 加密，然后提取您喜欢的字符数量。

代码：

```
<?php
session_start(); // Very important.
$captcha = md5(uniqid(rand(), true)); // Generate our random string.
$captcha = substr($captcha,0,6);
$_SESSION['captchaCode'] = $captcha; // Save the captch code to a session.
echo $captcha; // echo a generated code for testing purposes
?> 
```

将上面的内容保存到“captcha.php”，然后看看它生成了什么。资源：http [:](http://www.php.net/md5) //www.php.net/md5、http : //www.php.net/rand、http: [//www.php.net/substr、http](http://www.php.net/rand) [:](http://www.php.net/substr) [//www.php.net/uniqid](http://www.php.net/uniqid)

步骤 2\. 从生成的字符串创建图像 有许多不同的方法可以做到这一点，例如使用 GD 库 (gd libs)，但我更喜欢使用 ImageMagick 进行图像处理 - 个人选择。

请注意：ImageMagick 和 GD Libs 默认不附带 PHP，请检查它们是否安装在您的服务器上。

首先我们需要背景图片（附在这个帖子上 - 请将它们存储在 images/ 文件夹中） - “bg1.png”、“bg2.png”和“bg3.png” 每次生成图片时它会随机选择一个背景图片. 我们将文件名存储在一个易于访问的数组中。使用 ImageMagick 时，您应该上传要使用的所需字体，这意味着在不同的服务器上它将始终能够使用您的字体。

所以我们现在有以下代码。代码：

```
<?php
session_start(); // Very important.
$captcha = md5(uniqid(rand(), true)); // Generate our random string.
$captcha = substr($captcha,0,6);
$_SESSION['captchaCode'] = $captcha; // Save the captch code to a session.
//echo $captcha; // echo a generated code for testing purposes

$imageDirectory = 'images/';  // The relative or absolute path to where images are stored.

$bgImages = array('bg1.png', 'bg2.png', 'bg3.png');

$backgroundImage = $imageDirectory.$bgImages[rand(0, count($bgImages)-1)]; // This chooses an image.

?> 
```

现在是复杂的部分，实际上将它们放在一起 - 但别担心，我会尽可能多地评论所有内容。

代码：

```
<?php
session_start(); // Very important.
$captcha = md5(uniqid(rand(), true)); // Generate our random string.
$captcha = substr($captcha,0,6);
$_SESSION['captchaCode'] = $captcha; // Save the captch code to a session.
//echo $captcha; // echo a generated code for testing purposes

$imageDirectory = 'images/';  // The relative or absolute path to where images are stored.

$bgImages = array('bg1.png', 'bg2.png', 'bg3.png');

$backgroundImage = $imageDirectory.$bgImages[rand(0, count($bgImages)-1)]; // This chooses an image.

$tmpFilename = $captcha . '.png'; // Use the captcha code to create a random filename - Please note this filename is not shown in the user's web browser.
$imageTmpDirectory = 'images/tmp/'; //Directory to store all tmp generated images.

$font = 'arial.ttf'; // The chosen font - this font sits in the same folder as this script.
$FontSize = rand(24, 36); // Random select a font size between 24 and 36.
$hexValues = array('0','1','2','3','4'); // Hex values, we always want dark colours hence 0 to 5.
$numHex = count($hexValues); // Count how many hex values.
$GeneratedHex = ''; // Set the variable.

for ($i = 0; $i < 6; $i++) {
$GeneratedHex .= $hexValues[rand(0, $numHex-1)]; // Generate the end hex colour.
}

$gravities = array('West', 'Center', 'East'); // ImageMagicks gravity function.
$gravity = $gravities[rand(0, count($gravities)-1)]; // Choose a gravity.

$angle = rand(-5, 5); // Generate an angle for the text.

$cmd  = '/usr/bin/convert'; // Path to ImageMagick on the server.
$cmd .= ' -font '.$font; // The generated colour.
$cmd .= ' -fill "#'.$GeneratedHex.'"'; // The generated colour.
$cmd .= ' -pointsize '.$FontSize ; // The size.
$cmd .= ' -gravity "'.$gravity.'"'; // Select generated gravity.
$cmd .= ' -draw \'text 0,0 "'.$captcha.'"\''; // Draw the captcha.
$cmd .= ' -rotate '.$angle; // Rotate the text to the generated angle.
$cmd .= ' ./'.$backgroundImage.' ./'.$imageTmpDirectory.$tmpFilename; // Assign background image and then save output.

exec($cmd); // Run the command!

header('Content-Type: image/png');
print fread(fopen($imageTmpDirectory.$tmpFilename, 'r'), filesize($imageTmpDirectory.$tmpFilename));

unlink($imageTmpDirectory.$tmpFilename); // Delete the tmp image.

?> 
```

当您运行上述代码时，您应该会看到如下内容： Image

步骤 3\. 在表单中使用验证码。好吧，最困难的部分现在结束了！从这里开始变得更容易！

我们需要做的就是在 img 标签中加载验证码脚本，例如

这是表单页面。代码：

```
<?php
session_start(); // Very important to be the first statement. ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<form action="capturePost.php" method="post">
<?php
if(!empty($_SESSION['ERROR'])) { // We have an error from capturePost.php
   echo '<p>' . $_SESSION['ERROR'] . '</p>'; // Display error.
   unset($_SESSION['ERROR']); // Clear error.
}?>

<img src="captcha.php" alt="Captcha Code"><br />

Please enter the security code <input type="text" name="captcha">
<br /><input type="submit">
</form>
</body>
</html> 
```

这是提交页面（capturePost.php）的代码：

```
<?php
session_start();

if(!empty($_POST['captcha'])) {
   if($_POST['captcha'] != $_SESSION['captchaCode']) { // see if the code is incorrect.

      $_SESSION['ERROR'] = '<strong>Code did not match, please try again.</stong>'; // Our error message.
      header('Location: ' . $_SERVER['HTTP_REFERER']); // Take them back to form page.
   } else {
      echo 'Well done, you entered the correct code';    // Its correct!

      // DO FORM PROCESSING HERE
   }

}
?> 
```

我真的希望这会有所帮助。

# php - php jquery - 如果在第一个下拉列表中选择了一个值，如何显示另一个下拉选项

> ID：12773865
> 
> 赞同：1
> 
> 时间：2012-10-07T23:55:24.943
> 
> 标签：php, jquery, drop-down-menu, echo

我有一个上传表单，对于第一个下拉列表，类别下拉列表，如果选择了选项值“book”，我想回显另一个下拉列表（图书类别）

```
<form action="uploadproc1.php" method="post" enctype="multipart/form-data">

                     <p> <label for="category"><b>Category</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                 <select name="category" id="category">
                    <option value=""> -- select -- </option>
                    <option value="Accessories">Accessories</option>
                    <option value="Accommodation">Accommodation</option>
                    <option value="Books">Books</option>
                    <option value="Business">Business</option>
                    <option value="Clothing">Clothing</option>
                    <option value="Electronics">Electronics</option>
                    <option value="Furniture">Furniture</option>
                    <option value="Imagery">Imagery</option>
                    <option value="Multi">Multimedia</option>
                    <option value="Tickets">Tickets</option>

                   </select>
        </p>

        <?php IF (category selected==book?){
           echo '<p> <label for="bookcat"><b>Book Category</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>';
                echo '<select name="category" id="category">';
                echo '<option value=""> -- select -- </option>';
                   echo '<option value="Law">Law</option>';
                   echo '<option value="Business">Business</option>';
                    echo '<option value="Optom">Optom</option>';
                    echo '<option value="Engineering">Engineering</option>';
                    echo '<option value="Pharmacy">Pharmacy</option>';
                    echo '<option value="Sciences">Sciences</option>';
                    echo '<option value="Languages">Languages</option>';
                    echo '<option value="English">English</option>';
                    echo '<option value="Maths">Maths</option>';
                    echo '<option value="Other">Other</option>';

                   echo '</select>';
        echo '</p>';

        }

        ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T00:21:33.643

添加第二个下拉列表，但在开头隐藏它：

```
<p id="p_bookcat" style="display: none;">
  <label for="bookcat"><b>Book Category</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
  <select name="bookcat" id="bookcat>
    <option value=""> -- select -- </option>
    <option value="Law">Law</option>
    <option value="Business">Business</option>
    <option value="Optom">Optom</option>
    <option value="Engineering">Engineering</option>
    <option value="Pharmacy">Pharmacy</option>
    <option value="Sciences">Sciences</option>
    <option value="Languages">Languages</option>
    <option value="English">English</option>
    <option value="Maths">Maths</option>
    <option value="Other">Other</option>
  </select>
</p> 
```

然后添加以下 jQuery 代码：

```
<script type="text/javascript">
  $(document).ready(function () {
    $('#category').change(function() {
      if ($(this).val() == 'Books') {
        $('#p_bookcat').show();
      } else {
        $('#p_bookcat').hide();
      }
    });
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T00:41:59.217

```
$("#category").change(function() {

        $(this).parent().append('<div><select name="category1" id="category1">'
                        + '<option value="Law">Law</option> '
                        + '<option value="Business">Business</option>'
                        + '<option value=""> -- select -- </option></select></div>');

       }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-17T02:44:13.643

您可以使用 onchange()

```
 <form action="uploadproc1.php" method="post" enctype="multipart/form-data">

                             <p> <label for="category"><b>Category</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                         <select name="category" id="category" onchange="thefunction(this.value)">
                            <option value=""> -- select -- </option>
                            <option value="Accessories">Accessories</option>
                            <option value="Accommodation">Accommodation</option>
                            <option value="Books">Books</option>
                            <option value="Business">Business</option>
                            <option value="Clothing">Clothing</option>
                            <option value="Electronics">Electronics</option>
                            <option value="Furniture">Furniture</option>
                            <option value="Imagery">Imagery</option>
                            <option value="Multi">Multimedia</option>
                            <option value="Tickets">Tickets</option>

                           </select>
        //<div id='catorsomething'></div> {the new dropdown will display in this div} 
```

然后在你的 php 脚本/控制器/什么

```
 <?php
                  public function thefunction(){
            $w=$this->input->post('bookcat');  

             if ($w='Books'){
            echo ' <div id='catorsomething'>
            <p> <label for="bookcat"><b>Book Category</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>';
                            <select name="category" id="category">
                            <option value=""> -- select -- </option>';
                               <option value="Law">Law</option>
                               <option value="Business">Business</option>
                                <option value="Optom">Optom</option>
                                <option value="Engineering">Engineering</option>
                                <option value="Pharmacy">Pharmacy</option>
                                <option value="Sciences">Sciences</option>
                                <option value="Languages">Languages</option>
                                <option value="English">English</option>
                                <option value="Maths">Maths</option>
                                <option value="Other">Other</option>

                               </select>
                    </p></div>
            ';}
                } 
            ?> 
```

然后在您的表单操作下方

```
<div id='catorsomething'></div> 
```

我已经在 CodeIgnitel 中编写了这样的代码并且它可以工作（我不知道正确的方法，但我希望我能帮助你）

# ruby-on-rails - Rails 3 使用临时参数创建模型

> ID：12773868
> 
> 赞同：0
> 
> 时间：2012-10-07T23:56:09.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个模型需要在创建时重命名文件。为了让我的控制器保持苗条，这是在`after_validation`我的模型的方法中完成的。我不希望这个参数存储在数据库中，我只需要在`after_validation`模型中访问它。

问题是当我从我的控制器打电话时，`Model.create(:my_temp_arg => "blahh")`我得到了`Can't mass-assign protected attributes`错误。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:03:08.323

您需要将其添加到`attr_accessible`列表和 attr_accessor：

```
attr_accessor :my_temp_arg
attr_accessible :other fields, :my_temp_arg 
```

# android - Android操作栏标签滑动onResume未被调用

> ID：12773870
> 
> 赞同：2
> 
> 时间：2012-10-07T23:57:09.167
> 
> 标签：android, android-actionbar, swipe

我一直在使用以下... [https://bitbucket.org/owentech/testswipeab/src/eb30782019b2/src/com/owentech/testswipeab/](https://bitbucket.org/owentech/testswipeab/src/eb30782019b2/src/com/owentech/testswipeab/)

作为实现具有可滑动标签和片段的 android 应用程序的示例（用我自己的替换虚拟片段）这对我来说很好，除了一个问题。当您在选项卡之间滑动时，不会调用片段的 onresume 方法。事实上，onresume 方法只会在应用程序第一次启动时被调用。我希望每次选项卡切换到该片段时调用适当的 onresume 方法。

任何有关如何修改此示例代码以实现此目的的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T00:09:41.743

Fragment 生命周期与常见的 Activity 生命周期几乎相同——一个实例被创建一次，但可以多次停用或重新激活。因此，如果您有代码需要在每次重新激活或停用相同的片段实例时执行，则将该代码分别移动到 onResume 或 onPause 中。

onCreateView 在调用 onCreate 和 onActivityCreated 之间被调用 - 因此每个片段生命周期只有一次。

请参阅文档链接 [http://developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html)

# javascript - CSS 和 JavaScript 显示

> ID：12773874
> 
> 赞同：0
> 
> 时间：2012-10-07T23:58:15.067
> 
> 标签：javascript, css

我似乎在我的文件中找不到错误，`.css`因此我的 JavaScript 显示在页面的中心（现在显示在最左侧）。我想在照片下方居中显示地址和联系人。我正在学习 javascript 课程，所以此时只能使用它而不是其他程序。

错误来自`.css`or `.js`？

HTML：

```
<!doctype html>    
<html lang="en">    
    <head> 

        <meta charset="utf-8"> 

        <link href="css/armchair.css" rel="stylesheet"> 

    </head>

    <body>
        <!-- wrapper  section starts -->
        <div id="wrapper">            

            <!-- header  section starts -->
            <div id="header">
                <img src="images/header.jpg" alt="Armchair Logo" width="975" height="230" class="floatcenter">
            </div>
            <!-- header  section ends -->

            <!-- menu  section starts -->       
            <div id="menu">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="newrelease.html">New Releases</a></li>
                    <li><a href="placeholder.html" >Special Selection</a></li>
                    <li><a href="contact.html" id="current" class="first">Contact</a></li>
                    <li><a href="placeholder.html">On Sale</a></li>
                </ul>
            </div>
            <!-- menu  section ends -->

            <!-- text section starts -->
            <div id="content"></div>
            &nbsp;<img src="images/viewcart.jpg" alt="" width="130" height="59" class="floatright" /> 

            <br><br>

            <img src="images/store.jpg" alt="Armchair Store" width="520" height="347" class="floatcenterb">

            <br><br>

            <div id="contact_details"></div>

            <script type="text/javascript" src="js/contact.js"></script>

            <br/>
        </div>

        <!-- footer section starts -->
        <div id="footer">
            <p class="bottom">Copyright &copy; 2012 JC Design | All Rights Reserved | <a href="#">Terms and Conditions</a></p>
        </div>
        <!-- foot section ends -->  

    <!-- wrapper section starts -->

    </body>
</html> 
```

我的`.css`文件：

```
/*--------------Body-----------------*/

html {background-color: #e2e2e2}

body {
   color: #000; background: #fff;
   font-family: "Helvetica Neue",helvetica,arial, sans-serif; 
   font-size: 90%;
   text-align: left;
   width: 975px;
   margin-left: auto;
   margin-right: auto;
}

p {
   margin-left: 25px;
   margin-right: 5px;
   text-align: left;
   font-size: 110%;
}

/*--------------Links formatting------------------*/

a:link { 
   background: #fff; color: #7d890d;
}

a:visited { 
   color: #034769;
}

a:hover {
   color: #034769;  
   text-decoration: none; 
}

a:active{
    background: #63add0; color: #fff;
}

/*Bottom link formatting*/

p.bottom a:link { 
   background: #2d1d06; color: #f9b41f;
}

p.bottom a:visited { 
   color: #fff;
}

p.bottom a:hover {
   color: #7d890d;  
   text-decoration: none; 
}
p.bottom a:active{
    background: #8742d6; color: #fff;
}

/*--------------------Page wrapper----------------*/
#wrapper {
   margin: 0 auto; 
   width: 975px; 
   text-align: left;
}

/*Banner styles*/

#header {

   width: 975px;
   padding-left: 0px;
   padding-bottom: 10px;
   padding-top: 0px;
}

#footer {
   clear: both;
   background: #2d1d06; color: #fff;
   font-family: "Helvetica Neue",helvetica, arial, sans-serif;
   font-size: 90%;
   font-weight: normal;
   width: 975px;
   padding-bottom: 3px;
   padding-top: 3px;
}

#footer p {
   text-align: center;
}

#content
{
   margin-left: 15px;
}

/*---------------Navigation  styles-------------------*/

#menu {
  float: left; 
  margin:0;
  padding-top: 0px;
  width: 100%;
  background: #7d890d; color: #fff;
}  

#menu ul {
  margin: 0px;
  position: relative 
}

#menu ul li {
  display: inline; 
}

#menu ul li a {
  float: left;
  padding: 5px 16px;
  margin-right: 0px;
  background: #7d890d; color: #fff;
  text-decoration: none;
  border-right: 1px solid #e2e2e2;
}

#menu ul li a:hover {
  color: #fff; background: #f9b41f;
  text-decoration: underline;

}

#menu li a#current {
  background: #ba1212; color: #fff;
}

/*-------------Image area--------------*/

img 
{ 
   border: 0px 0px ; 
   padding-top: 30px;
   padding-bottom: 25px;
   border-radius: 0px;
}

.floatcenter {
   float: left;
   margin: 0px;
   padding: 0px; 
   border: none;  
}

.floatcenterb {
   margin: 0px 228px;
   padding: 1px; 
   border: none;  
}

.floatright 
{ 
   display: block;
   float: right; 
   margin: 20px;
   padding: 1px; 
   border: none;
}
.floatright2 
{ 
   float: right; 
   margin: 20px;
   padding: 1px; 
   border: none;
}

/*---------------Headings----------------*/
hr{
  position: relative;
   width: 90%;
   margin-left: 25px;
   margin-right: 25px;
   color: #3ca0d0;
   border: 1px;
   border-style: dotted;
}

h1{
   color: #2d1d06;
   font-size: 140%;
   font-weight: normal;
   margin-left: 25px;

}

h2{
   color: #2d1d06;
   font-weight: normal;
   font-size: 130% ;
   text-align: center;
   text-decoration: underline;
   margin-left: 0px;
}

h3{
   font-size: 120%;
   color: #2d1d06;
   font-weight: bold;
   text-align: left;

}

h4{
   font-size: 120%;
   color: #2d1d06;
   font-weight: normal;
   text-align: center;

}

h5{
   font-size: 110%;
   color: #7d890d; 
   width: 70px;
   margin-bottom: 0px;
   margin-top: 0px;
   font-weight: bold;
   text-align: left;

}

/* Table styling */

table {
    border: 1px;
    border-collapse:collapse;
    width: 90%;
    margin-left: 25px;
    margin-right: 25px;
    font-size: 90%;

}

th {
    background-color: #000;
    color: #FFF;
}

td {
    padding: 2px 4px;
    padding-top: 25px;

    text-align: left;
    border-bottom: 0px;
}

/*contact page*/

fieldset
{
  margin: 10px 25px;
  padding: 5px 10px;
  border: 1px solid #3697B5;
  background:#fff;
  text-align: center;
}

legend
{
  font-size: 80%;
  color: #000; background: #fff;
  font-weight:bold;
  margin-left: 25px;
} 

label
{
  float: left;  /* labels and input fields line up horizontally */
  width: 200px; 
  margin-left: 25px;    
  text-align: center; 
}

textarea
{

  margin-left: 25px;
} 
```

我的`.js`文件：

```
//contact.js - this will dipaly all contact detials on the home page and contact us page//

var Addre = new Array("7945", "Town Plaza", "Vancouver", "E5T 4J9","Canada");
var phoneNo = new Array("1-604-568-4938", "Toll free: 1-888-987-4738");
var eMail = new Array("info@armchairbook.com");

// get the HTML div element
var elem = document.getElementById("contact_details");

// display Address
elem.innerHTML ="Address: <br />";
for (var i = 0; i < Addre.length; i++)
{
   if ( i > 0)
      elem.innerHTML += ", ";
   elem.innerHTML +=  Addre[i];
}

// display Phone no

elem.innerHTML += "<br /><br />Contact No:<br /> ";
for (var i = 0; i < phoneNo.length; i++)
{
   if ( i > 0)
      elem.innerHTML += " or ";
   elem.innerHTML +=  phoneNo[i];
}

// display Email

elem.innerHTML +=  "<br /><br />Email:<br /> ";
for (var i = 0; i < eMail.length; i++)
{
   if ( i > 0)
      elem.innerHTML += ", ";
   elem.innerHTML +=  eMail[i];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:25:27.450

只需`text-align: center;`在您的 CSS 中设置 ，`#contact_details`您要将联系信息附加到的元素：

```
#contact_details {
  text-align: center;
} 
```

有关使用您的代码的工作演示，请参阅[此 JS Bin](http://jsbin.com/ecatug/1/)。

[在 'text-align' CSS 属性上](https://developer.mozilla.org/en-US/docs/CSS/text-align)引用Mozilla 的开发者网络页面：

> text-align CSS 属性描述了像文本这样的内联内容如何在其父块元素中对齐。text-align 不控制块元素本身的对齐方式，只控制它们的内联内容。
> 
> **初始值**：开始，或者一个无名值，**如果方向是 ltr，则作为左，如果方向是 rtl**，如果浏览器不支持，则作为右。

# jakarta-ee - 重定向时存储拦截器和松散值堆栈

> ID：12773877
> 
> 赞同：0
> 
> 时间：2012-10-07T23:58:35.350
> 
> 标签：jakarta-ee, struts2

我有 2 个动作。第一个显示表格，另一个处理表格。如果`processAdd`未验证操作，则将重定向操作返回到`Add`操作。`Store`拦截器在“添加”操作上显示正确的错误，但表单上填写的值在重定向操作期间丢失。

我`loose Value Stack`在重定向，我明白这一点。

**有什么解决办法吗？**

不想使用结果参数，工作量太大。

```
 <action name="add" class="com.myapp.actions.StudentAction" method="input">
            <interceptor-ref name="store">
                <param name="operationMode">RETRIEVE</param>
            </interceptor-ref>
            <result name="input" type="tiles">/student.edit.tiles</result>
        </action>

        <action name="processAdd" class="com.myapp.actions.StudentAction">
            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />
            <result name="success" type="redirectAction">list</result>
            <result name="input" type="redirectAction">add</result>
            <result name="failure" type="redirectAction">add</result>
        </action> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T01:39:58.150

[消息存储拦截器](http://struts.apache.org/2.3.4/docs/message-store-interceptor.html)

> 一个拦截器，用于将 ValidationAware 操作的消息/错误和字段错误存储到 HTTP 会话中，以便在稍后阶段可以检索它。这允许操作的消息/错误和字段错误比特定 HTTP 请求可用的时间更长。

您无法使用消息存储拦截器获取值堆栈数据，它关心操作消息/错误和字段错误。

或者，您可以使用*链拦截器*或在会话中存储值，即使消息存储拦截器使用会话对象来存储消息/错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T06:19:21.650

您正在寻找的是[Scope Interceptor](http://struts.apache.org/2.3.4/docs/scope-interceptor.html)，而不是 Store Interceptor。

# jquery - 带有 django url 的 Jquery mobile

> ID：12773886
> 
> 赞同：0
> 
> 时间：2012-10-08T00:00:08.603
> 
> 标签：jquery, django, mobile

使用 django 和 jquery mobile 时，我陷入了多页面视图。然后做了一些实验。一个典型的 django url 就是这样。

```
/sale/detail/02_O1_00000036 
```

如果我尝试用 id 链接几个页面。

```
/sale/detail/02_O1_00000036#popupItem10
/sale/detail/02_O1_00000036#popupItem20 ... 
```

适当的链接使`href="#popupItem10"`

它不起作用。

但是，如果我复制填充的 html 并将其放入 html 文件中。网址变成

```
/sale/detail/02_O1_00000036.html 
```

和

```
/sale/detail/02_O1_00000036.html#popupItem10 ... 
```

它有效，它可能是 url 之后的 html 标记。这是唯一的区别。

你能告诉我区别以及如何克服吗？

# iphone - Facebook 3.x SDK 通知未触发？

> ID：12773889
> 
> 赞同：1
> 
> 时间：2012-10-08T00:00:48.447
> 
> 标签：iphone, ios, facebook

我想知道是否有人知道为什么当我打开一个新的 FBSession 会话时 FBSessionDidSetActiveSessionNotification、FBSessionDidUnsetActiveSessionNotification、FBSessionDidBecomeOpenActiveSessionNotification 或 FBSessionDidBecomeClosedActiveSessionNotification 永远不会被触发？

我检测到 FBSessionDidBecomeOpenActiveSessionNotification 和 FBSessionDidSetActiveSessionNotification 的唯一方法是当我调用 [FBSession setActiveSession:]; 明确地。

基本上，我得到了类似的东西：

```
_session = [[FBSession alloc] initWithAppID: FACEBOOK_AppId
                                permissions: _facebookPermissions
                            defaultAudience: FBSessionDefaultAudienceOnlyMe
                            urlSchemeSuffix: nil
                         tokenCacheStrategy: nil];

    [_session openWithCompletionHandler:^(FBSession *session,
                                          FBSessionState status,
                                          NSError *error) {

        [FBSession setActiveSession: _session];
        // ...
    }]; 
```

我必须调用 [FBSession setActiveSession:]; 是否正常？?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:04:39.693

利用

```
+ (BOOL)openActiveSessionWithReadPermissions:(NSArray*)readPermissions
                            allowLoginUI:(BOOL)allowLoginUI
                       completionHandler:(FBSessionStateHandler)handler; 
```

不过，这实际上只是一个帮助函数，用于执行类似于您已经在做的事情。如果你从 git repo 中获取源代码，你可以看到 FBSession.m 中发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T06:25:23.270

尝试这个：

```
+ (BOOL)openActiveSessionWithPermissions:(NSArray*)permissions
                        allowLoginUI:(BOOL)allowLoginUI
                   completionHandler:(FBSessionStateHandler)handler; 
```

# reporting-services - 如何在饼图 + Report Builder 3.0 + SSRS 上爆炸单点

> ID：12773891
> 
> 赞同：1
> 
> 时间：2012-10-08T00:00:54.093
> 
> 标签：reporting-services, reportbuilder3.0, ssrs-2012

在 SSD 和 Report Builder 3.0 中，当您单击 DataPoint 下的 CustomAttributes 时，没有展开任何内容。它只是灰色，无法设置分解属性或指定表达式来执行此操作。

![在此处输入图像描述](../Images/422abcd78fcfa6d7f955dbbf5552836f.png)

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T13:10:55.247

我猜你正在寻找这样的东西？

![带有图表外数据点的饼图](../Images/27733f107aca911a6349a6d19631df9d.png)

如果是这样，请转到“General”，然后转到“CustomAttributes”，然后将属性“PieLabelStyle”更改为“Outside”，您可以将标注线设置为您想要的任何颜色。在下面的屏幕截图中，我选择了“黑色”

![在此处输入图像描述](../Images/9563c8af41335a62e962d2d1680df8e6.png)

这是使用 Report Builder v3.0 完成的，稍后我将尝试使用 SQL Server Data Tools 并查看是否相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T18:58:13.097

[除非您安装Report](https://social.msdn.microsoft.com/forums/sqlserver/en-US/6b530d1c-1cbe-48e7-84ef-a2468c72bbdb/how-to-explode-a-single-point-on-a-pie-chart) Builder 2.0，否则似乎不可能

# google-chrome-extension - Chrome 扩展程序中 contextMenu 子菜单上的图标

> ID：12773895
> 
> 赞同：0
> 
> 时间：2012-10-08T00:01:33.053
> 
> 标签：google-chrome-extension

我有一个可用的 Chrome 扩展程序，当右键单击可编辑字段时，它会在上下文菜单中添加一个项目。我可以将图标添加到新的顶级菜单项，但我找不到将图标添加到每个子菜单项的方法。

您可以在此处查看菜单截图：[https ://lh5.googleusercontent.com/5mRSIYNceNWZyUhUUZLdvMQC2ns9LDFMWwZFEmsx37Hop4YCe9dzmS2zQCdSoUOcAmaZqvup=s640-h400-e365](https://lh5.googleusercontent.com/5mRSIYNceNWZyUhUUZLdvMQC2ns9LDFMWwZFEmsx37Hop4YCe9dzmS2zQCdSoUOcAmaZqvup=s640-h400-e365)

如您所见，顶级项目“GTZCode”有一个图标，但该菜单中的所有项目都没有图标。是否可以向它们添加图标？

# automation - 自动刷新和更改 URL？

> ID：12773896
> 
> 赞同：1
> 
> 时间：2012-10-08T00:01:40.783
> 
> 标签：automation, webpage, page-refresh

我想做的是；

刷新网站，同时更改包含数字的 URL 的一部分。假设你在一个网站上一张一张地查看图片；

图片/31 图片/32 图片/33

并且网站上没有幻灯片，因此您必须手动更改 URL 中的图像编号。我在这里要做的是以某种方式自动化这个过程。该数字将每 5 秒增加 1 个。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T00:30:58.583

USE HTML5

just think of a way how you will automate passing the variable to this function

```
 setInterval(function(){
  window.history.replaceState(“object or string”, “Title”, “/another-new-url)
    }, 5000); 
```

check this: [http://spoiledmilk.com/blog/html5-changing-the-browser-url-without-refreshing-page](http://spoiledmilk.com/blog/html5-changing-the-browser-url-without-refreshing-page)

# ruby-on-rails - 如何通过关联更新 Has_Many 的记录？

> ID：12773900
> 
> 赞同：0
> 
> 时间：2012-10-08T00:02:20.350
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有三个模型 - `User`, `Client`, `Topic`。

**用户**

```
has_many :clients
has_many :topics, :through => :clients, :uniq => true 
```

**客户**

```
has_and_belongs_to_many :topics 
```

**话题**

```
has_and_belongs_to_many :clients 
```

我想做的是站在`edit`我的客户的角度，改变这个客户的主题。

这是我的客户端控制器的更新操作：

```
 def update
        if params[:topic_ids]
             @client = current_user.clients.find(params[:id])
             @client.topic_ids = params[:client][:topic_ids]
             @client.save
        else
             @client = current_user.clients.find(params[:id])
        end

    respond_to do |format|
      if @client.update_attributes(params[:client])
        format.html { redirect_to @client, notice: 'Client was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @client.errors, status: :unprocessable_entity }
      end
    end
  end 
```

这是日志的样子：

```
Started PUT "/clients/6" for 127.0.0.1 at 2012-10-07 18:56:14 -0500
Processing by ClientsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"J172mxxCX0OdxcGm4GSPv8=", "client"=>{"name"=>"Testeeee Johnson", "email"=>"testeee@johnson.com", "phone"=>"4320981234", "firm_id"=>"1", "personal_priority"=>"1", "last_contact"=>"2012-06-08", "vote"=>"1", "vote_for_user"=>"0", "next_vote"=>"2012-10-10", "vote_ii"=>"0", "vote_ii_for_us"=>"0"}, "topic_ids"=>["2"], "commit"=>"Update Client", "id"=>"6"}
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Client Load (0.1ms)  SELECT "clients".* FROM "clients" WHERE "clients"."user_id" = 1 AND "clients"."id" = ? LIMIT 1  [["id", "6"]]
  Topic Load (0.2ms)  SELECT "topics".* FROM "topics" INNER JOIN "clients_topics" ON "topics"."id" = "clients_topics"."topic_id" WHERE "clients_topics"."client_id" = 6
   (0.1ms)  begin transaction
   (0.0ms)  commit transaction
   (0.0ms)  begin transaction
   (0.0ms)  commit transaction
   (0.0ms)  begin transaction
   (0.0ms)  commit transaction
Redirected to http://localhost:3000/clients/6
Completed 302 Found in 8ms (ActiveRecord: 0.8ms) 
```

不用说，它不会更新`client.topics`.

如何更新`topics`客户记录的属性？

**编辑 1**

这是`_form`部分的外观：

```
<%= form_for(@client) do |f| %>
  <% if @client.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@client.errors.count, "error") %> prohibited this client from being saved:</h2>

      <ul>
      <% @client.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>

  <div class="field">
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </div>
  <div class="field">
    <%= f.label :firm %><br />
    <%= f.select :firm_id, Firm.all.collect { |firm| [firm.name, firm.id] }, {:include_blank => 'None'} %>
  </div>
  <div class="field">
  <h4>Topics</h4>  
    <% Topic.all.each do |topic| %>
      <% checked = @client.topics.include?(topic) %>
        <%= f.label(:name, topic.name) %> <%= check_box_tag "topic_ids[]", topic.id, checked %>
    <% end %>
  </div>
.
. - reduced for brevity
.

  <br /><br />
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:14:08.930

无论出于何种原因，`form`助手都不能与`check_box`.

所以，这是有效的代码：

```
<%= check_box_tag "client[topic_ids][]", topic.id, checked %> 
```

根据类似问题的[其他答案](https://stackoverflow.com/questions/4721058/undefined-method-merge-for-2fixnum)，助手`f.check_box`是模型绑定的，并且提供给复选框的值是表单上模型的隐含值。问题是，我不知道如何获得 form_helper 的隐含值来生成正确的标签 - 即`client[topic_ids][]`，所以我不得不求助于`check_box_tag`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T00:44:51.853

您在下面的评论中提到您还想为每个主题添加权重。has_and_belongs_to_many 关联不再支持此功能，因此您应该使用 has_many :through 关联：

```
class User < ActiveRecord::Base
  has_many :clients
end

class Clients < ActiveRecord::Base
  belongs_to :user
  has_many :client_topics
  has_many :topics, :through => :clients_topics
end

# Create this table like any other, with a "weight" field
class ClientsTopics < ActiveRecord::Base
  belongs_to :client
  belongs_to :topic
end

class Topics < ActiveRecord::Base
  has_many :clients_topics
  has_many :clients, :through => :clients_topics
end 
```

现在您的更新将需要删除所有现有的 clients_topics，然后遍历传递的 topic_ids 和 weights 并将它们添加到客户端，如下所示：

```
def update
  if params[:topic_ids]
     @client = current_user.clients.find(params[:id])

     @client.clients_topics.delete_all

     params[:client][:topic_ids].each_with_index do |topic_id, index|
       weight = params[:client][:weights][index]
       @client.clients_topics.create!(:topic_id => topic_id, :weight => weight)
     end

  else
     @client = current_user.clients.find(params[:id])
  end

  (etc...)
end 
```

# python - Python： Range() 作为字典值

> ID：12773905
> 
> 赞同：0
> 
> 时间：2012-10-08T00:03:04.720
> 
> 标签：python, dictionary, range

假设我有一个像下面这样的字典，其中的值是每个键出现在文本中的概率。

```
 dict = {'a':0.66,'b':0.07,'c':0.04 and so on so the values of the dict sum up to one} 
```

说我想构建另一个具有这些值范围的字典具有价值。由于我们不能将 range() 与浮点数一起使用，我尝试首先将所有值乘以 100，因此它们变成了 int。假设我们想用它们的范围替换这些值。所以例如'a'会得到一个范围（0,66），'b'范围（66,73），'c'（73,77）等。我试图用下面的循环来做到这一点，但它没有工作：

```
start = 0
end = 0
for k,v in dict.items():
   end+=int(v*100)
   range_dict[k]=range(start,end)
   start+=end 
```

有人能帮帮我吗？我要疯了，想知道该怎么做！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T00:14:37.950

如果你改变

```
start += end 
```

到

```
start = end 
```

它应该可以工作（`xrange`在此处使用以使其更明显）：

```
>>> d = {'a':0.66,'b':0.07,'c':0.04}
>>> start = 0
>>> end = 0
>>> range_dict = {}
>>> for k,v in d.items():
...    end+=int(v*100)
...    range_dict[k]=xrange(start,end)
...    start=end
... 
>>> range_dict
{'a': xrange(66), 'c': xrange(66, 70), 'b': xrange(70, 77)} 
```

但是，如果@Satoru.Logic 猜测您想要一个加权随机数，那么还有更好的方法。[Eli Bendersky 在此处](http://eli.thegreenplace.net/2010/01/22/weighted-random-generation-in-python/)对 Python 中的方法进行了很好的概述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T02:32:51.703

自豪地从 Python 3.3.0 文档中窃取：

[随机 - 9.6.2。示例和食谱](http://docs.python.org/py3k/library/random.html?highlight=random#examples-and-recipes)- 包含加权分布算法。
[itertools.accumulate](http://docs.python.org/py3k/library/itertools.html?highlight=itertools#itertools.accumulate) - 包含累积算法。

下面的代码是为 2.X 编写的：

```
import random
import bisect

D = {'a':0.66,'b':0.07,'c':0.04,'d':0.20,'e':0.03}

# This function is in Python 3.2+ itertools module.
def accumulate(iterable):
    'Return running totals'
    # accumulate([1,2,3,4,5]) --> 1 3 6 10 15
    it = iter(iterable)
    total = next(it)
    yield total
    for element in it:
        total = total + element
        yield total

# Extract the weights and build a cumulative distribution.
choices, weights = zip(*D.items())
cumdist = list(accumulate(weights))

# Make 1000 random selections
L = [choices[bisect.bisect(cumdist, random.random() * cumdist[-1])]
     for _ in xrange(1000)]

# Display the results
for c in sorted(D.keys()):
    print '{} {:3d}'.format(c,L.count(c)) 
```

输出：

```
a 652
b  72
c  43
d 200
e  33 
```

# java - HTML 4在 JSF 2.1 中

> ID：12773907
> 
> 赞同：9
> 
> 时间：2012-10-08T00:03:09.350
> 
> 标签：java, html, jsf, jsf-2, html4

我想使用以下命令：

JSF`<h:commandButton>`生成一个，`<input...>`但我希望生成一个 HTML 4 标准而不是生成`<input>`我希望这生成一个 HTML 4 标准`<button>`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T01:52:51.837

与标准 JSF 组件集最接近的`<input type="button">`是由[`<h:button>`](http://download.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/button.html).

```
<h:button value="Button" /> 
```

这会产生

```
<input id="j_id_1" name="j_id_1" type="button" value="Button" onclick="window.location.href = '/context/currentpage.xhtml'" /> 
```

如果你真的`<button>`因为一些不清楚的原因坚持使用，那么你有以下选择：

*   只需使用纯 HTML。
*   创建自定义组件和/或渲染器。
*   获取第 3 方组件库。例如[PrimeFaces'`<p:button>`](http://www.primefaces.org/showcase/ui/button.jsf)生成一个`<button>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T11:21:31.010

你应该看看 Primefaces `p:commandButton`。这将呈现到`<button>`客户端上的标签。

[http://www.primefaces.org/showcase/ui/commandButton.jsf](http://www.primefaces.org/showcase/ui/commandButton.jsf)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-30T21:30:16.263

如果您使用的是 JSF 2.2，则可以将`<button>`标签与 jsf 命名空间混合使用。这里的秘密是`process`来自`jsf`命名空间的属性，用于发布表单数据和`action`属性。

```
<button type="submit" class="btn btn-primary" 
    jsf:action="#{profileController.updateProfile}"
    jsf:process="@form">
        <i class="fa fa-floppy-o" aria-hidden="true"></i>
            #{bundle['button.store']}
</button> 
```

在 JSF 2.2 中，您可以将任何 HTML 标记与 JSF 标记混合使用。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-03-21T21:12:58.473

它通过替换为 对我有用`<button>`，`<h:commandLink>`例如：替换

```
<button class="RUIFW-btn-primary pull-right" 
        type="submit" 
        name="action" 
        value="Find" 
        onClick="return submitPage(this);">
     <span class="icon-search"></span>Find
</button> 
```

和

```
<h:commandLink styleClass="RUIFW-btn-primary pull-right" 
title="#{msg['view.button.Find']}"
action="#{anotherAccountController.doFind}"
onclick="return submitPage(this.form)">
<span class="icon-search"></span>#{msg['view.button.Find']}
</h:commandLink> 
```

# android - 强制停止后，我的 AlaramManager 不起作用

> ID：12773910
> 
> 赞同：0
> 
> 时间：2012-10-08T00:03:35.077
> 
> 标签：android, broadcastreceiver

我正在尝试实现一个简单的服务，它每小时将用户的当前位置发送到服务器。我的应用程序只有登录`Activity`和设置活动，通常在后台工作。我用`AlarmManager`它来实现我的目的，它运行良好，但是`receiver`当我被迫停止我的应用程序时我的不起作用。这是我的代码。

**我的应用程序.java**

```
 @Override
    public void onCreate() {
      super.onCreate();
      startService();
    }

    private void startService(){
        Intent receiver = new Intent(this, LocationAlaramReceiver.class);
        PendingIntent intent = PendingIntent.getBroadcast(this, 0, receiver,  PendingIntent.FLAG_UPDATE_CURRENT);

       AlarmManager mgr = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
       mgr.setRepeating(AlarmManager.RTC, System.currentTimeMillis(), AlarmManager.INTERVAL_HOUR, intent);
    } 
```

**AndroidManifest.xml**

```
 <receiver
         android:name=".receiver.LocationAlarmReceiver">
    </receiver> 
```

**LocationAlarmReceiver.java**

```
 public class LocationAlarmReceiver extends BroadcastReceiver 
     {
    private final static String TAG = "LocationAlarmReceiver";

        @Override
        public void onReceive(Context context, Intent intent) 
             {
          Log.d(TAG, "=========== onReceive ==============");
              //Do something later

             }
    } 
```

只是看到我的情况，它看起来并不保证`AlarmManager`总是会被调用。我想继续`LocationAlramReceiver`工作每个小时。我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:01:53.983

当用户强制停止您的应用程序时，Android（自 3.1 版起）将其置于 STOPPED STATE（更多信息请参见[http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html](http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html)）。您的应用程序没有收到任何处于已停止状态的广播。为了摆脱这种状态，您的应用程序必须由用户或其他应用程序显式启动。

# wordpress - jQuery validationEngine 没有正确验证匹配的字段

> ID：12773912
> 
> 赞同：1
> 
> 时间：2012-10-08T00:03:52.357
> 
> 标签：wordpress, forms, validation, jquery-validation-engine

我有一个在两个不同站点上使用的自定义注册表单。有两个字段，user_pass 和 pass2。user_pass 字段具有以下验证类：

```
class="validate[required,custom[password],minLength[7]]" 
```

语言文件中的自定义正则表达式如下所示：

```
 "password":{
     "regex": /^(.*\\d.{2,})|(.*[@#?$%^&+=\\*].*)(.?[a-z].*)$/,
     "alertText": "* Must contain letters, numbers and symbols."
  }, 
```

那么 pass2 字段有如下验证类：

```
class="validate[required,equals[user_pass]]" 
```

如果您访问[mosleyfamilies.net/user-registration](http://mosleyfamilies.net/user-registration)，您可以看到正在运行的表单。当您按照说明输入密码然后在下一个字段中完全重复时，您将收到一个字段不匹配错误 - 即使它们确实如此。

如果您随后访问[uniquelyyours.blogdns.com/simple-registration](http://uniquelyyours.blogdns.com/simple-registration)并执行完全相同的操作，则密码将正确验证。Firebug 没有显示任何错误，我尝试禁用一些我认为可能会干扰的插件，但什么也没做。

对于我的一生，当两个站点上的一切都完全相同时，我无法弄清楚为什么这些字段没有在 mosleyfamilies.net 上验证。任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:04:13.420

我不知道这是否可以解决所有问题，但是，如果您想限制最小字符数，则在您的第一段代码中，您应该使用 minSize 而不是 minLenght。

```
class="validate[required,custom[password],minSize[7]]" 
```

[验证示例](http://www.position-relative.net/creation/formValidator/demos/demoValidators.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T07:58:37.520

虽然不清楚我的类似问题是否与原始海报的示例匹配，但由于未提供元素 ID，我遇到了类似的问题。jquery.validation.js 引擎中的 equals 函数似乎依赖于要匹配的元素的 id。例如：

```
 <input name="email" type="email" class="validate[required,custom[email]]">
    <input name="confirm_eml" type="email" class="validate[required,custom[email],equals[email]"> 
```

不起作用，因为“等于”函数需要一个元素 id 才能锁定。只需添加 id，如下所示：

```
 <input name="email" type="email" id="email" class="validate[required,custom[email]]">
    <input name="confirm_eml" type="email" class="validate[required,custom[email],equals[email]]"> 
```

# javascript - Javascript在字符串中查找单词的索引（不是单词的一部分）

> ID：12773913
> 
> 赞同：16
> 
> 时间：2012-10-08T00:04:01.717
> 
> 标签：javascript, regex, search, indexof, text-search

我目前正在使用`str.indexOf("word")`在字符串中查找单词。但问题是它也返回了其他单词的一部分。

示例：“我去了 foobar 并点了 foo。” 我想要单个单词“foo”的第一个索引，而不是 foobar 中的 foo。

我无法搜索“foo”，因为有时它后面可能会跟一个句号或逗号（任何非字母数字字符）。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-08T00:09:07.087

您必须为此使用正则表达式：

```
> 'I went to the foobar and ordered foo.'.indexOf('foo')
14
> 'I went to the foobar and ordered foo.'.search(/\bfoo\b/)
33 
```

`/\bfoo\b/``foo`被单词边界包围的匹配项。

要匹配任意单词，请构造一个`RegExp`对象：

```
> var word = 'foo';
> var regex = new RegExp('\\b' + word + '\\b');
> 'I went to the foobar and ordered foo.'.search(regex);
33 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T00:23:55.090

对于一般情况，使用 RegExp 构造函数创建以单词边界为界的正则表达式：

```
function matchWord(s, word) {
  var re = new RegExp( '\\b' + word + '\\b');
  return s.match(re);
} 
```

请注意，连字符被视为单词边界，因此 sun-dried 是两个单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-19T21:48:35.763

正如前面的答案所建议的，我已经尝试过使用“.search”和“.match”，但只有这个解决方案对我有用。

```
var str = 'Lorem Ipsum Docet';
var kw  = 'IPSUM';
var res = new RegExp('\\b('+kw+')\\b','i').test(str);

console.log(res); // true (...or false) 
```

使用 'i' 进行不区分大小写的搜索。

[ComFreek](https://stackoverflow.com/users/603003/comfreek)[在这里](https://stackoverflow.com/a/18740746/2903561)写了一个详细的答案

# ruby-on-rails - 在显示页面上呈现新表单

> ID：12773914
> 
> 赞同：0
> 
> 时间：2012-10-08T00:04:13.163
> 
> 标签：ruby-on-rails

模型：**条目，评论**

我想在我的论坛中的条目和所有所属评论列出的同一页面上添加评论。

1.  这样做的轨道是什么？

2.  如何在“条目”的“显示”页面上呈现“评论”的“新”模板？

    我试过：

    ```
    <% render :template => {:controller => 'comments', :action => 'new'} %> 
    ```

    也

    ```
    form_for 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T00:38:23.443

对于#2，尝试将新的评论表单拉出到一个部分中，然后在评论/新视图和条目/显示视图中呈现它。所以这两个都会有这样的一行：

```
<%= render :partial => "comments/form" %> # or whatever you named the partial 
```

在过去的几个 Rails 版本中（我不记得确切的添加时间），您可以这样做：

```
<%= render "comments/form" %> 
```

我还会问自己，是否有任何理由首先要有一个单独的评论/新页面：添加不在某些条目上下文中的评论是否有意义？

# asp.net - 如何从备注字段的 asp.net 表格格式中删除 DIV

> ID：12773915
> 
> 赞同：0
> 
> 时间：2012-10-08T00:04:34.420
> 
> 标签：asp.net

我将 msaccess db 绑定到 asp.net 表。对于备注字段，文本在 html 表格单元格中围绕它们有 div 标签，最终用户会按字面意思显示。

有没有办法避免这些 div ？

aspx的源代码：

```
 <asp:GridView ID="GridView1" runat="server">
    </asp:GridView> 
```

.cs 的来源：

```
 myDB = "MyDB";
        myConString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|" + myDB + ".accdb;Persist Security Info=False;Jet OLEDB:Database Password=;";
        OleDbConnection myDataCon = new OleDbConnection(myConString);

        myDataCon.Open();

        OleDbCommand dbCom = new OleDbCommand("Select * FROM Test", myDataCon);
        OleDbDataReader dataReader = dbCommand.ExecuteReader();

        GridView1.DataSource = dataReader;
        GridView1.DataBind();

        dataReader.Close();
        myDataCon.Close(); 
```

# android - android，如何从菜单栏中仅禁用活动名称

> ID：12773919
> 
> 赞同：0
> 
> 时间：2012-10-08T00:06:04.530
> 
> 标签：android, android-activity, menu

我知道这已经回答[过](https://stackoverflow.com/questions/4388068/how-disable-remove-android-activity-label-and-label-bar)

但我只想停止显示活动名称，但仍继续显示菜单项，如下图所示，我不想在活动栏中看到“计划”。

![在此处输入图像描述](../Images/820bf3143f5b78affa4fd806955ba769.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T00:18:32.643

您可以`getActionBar().setDisplayShowTitleEnabled(false)`在`onCreate`.`Activity`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T00:18:59.273

您可以简单地[禁用标题](http://developer.android.com/reference/android/app/ActionBar.html#setDisplayShowTitleEnabled%28boolean%29)：

```
getActionBar().setDisplayShowTitleEnabled(false); 
```

使用 ActionbarSherlock：

```
getSupportActionBar().setDisplayShowTitleEnabled(false); 
```

# python - 使用 python 在 HTML 代码中查找特定注释

> ID：12773921
> 
> 赞同：2
> 
> 时间：2012-10-08T00:06:48.170
> 
> 标签：python

我在 python 中找不到特定的注释，例如`<!-- why -->`. 我的主要原因是在 2 个特定评论中找到所有链接。类似于解析器的东西。我试过这个`Beautifulsoup`：

```
import urllib
over=urlopen("www.gamespot.com").read()
soup = BeautifulSoup(over)
print soup.find("<!--why-->") 
```

但它不起作用。我想我可能不得不使用`regex`而不是`Beautifulsoup`.

请帮忙。

示例：我们有这样的 HTML 代码

```
<!--why-->
www.godaddy.com
<p> nice one</p>
www.wwf.com
<!-- why not--> 
```

**编辑：在 2 条评论之间，可能存在其他东西，如标签。**

我需要存储所有链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T00:35:30.387

如果你想要所有的评论，你可以使用`findAll`一个可调用的：

```
>>> from bs4 import BeautifulSoup, Comment
>>> 
>>> s = """
... <p>header</p>
... <!-- why -->
... www.test1.com
... www.test2.org
... <!-- why not -->
... <p>tail</p>
... """
>>> 
>>> soup = BeautifulSoup(s)
>>> comments = soup.findAll(text = lambda text: isinstance(text, Comment))
>>> 
>>> comments
[u' why ', u' why not '] 
```

一旦你得到它们，你可以使用通常的技巧来移动：

```
>>> comments[0].next
u'\nwww.test1.com\nwww.test2.org\n'
>>> comments[0].next.split()
[u'www.test1.com', u'www.test2.org'] 
```

根据页面的实际外观，您可能需要对其进行一些调整，并且您必须选择所需的评论，但这应该可以帮助您入门。

编辑：

如果您真的只想要看起来像某些特定文本的那些，您可以执行类似的操作

```
>>> comments = soup.findAll(text = lambda text: isinstance(text, Comment) and text.strip() == 'why')
>>> comments
[u' why '] 
```

或者您可以在事后使用列表理解过滤它们：

```
>>> [c for c in comments if c.strip().startswith("why")]
[u' why ', u' why not '] 
```

# objective-c - -[NSCalendar components:fromDate:] 在 MonoTouch 中可用吗？

> ID：12773922
> 
> 赞同：1
> 
> 时间：2012-10-08T00:06:58.103
> 
> 标签：objective-c, xamarin.ios

我正在尝试将以下 Objective-c 代码转换为 MonoTouch/C#，但我找不到该`NSCalendar.componentsFromDate()`方法。看起来它没有在 MonoTouch 中实现。这是代码：

```
NSDate *today = [NSDate date];
NSCalendar *gregorian = [[NSCalendar alloc]
                         initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *weekdayComponents =
                    [gregorian components:(NSDayCalendarUnit | NSWeekdayCalendarUnit) 
                                 fromDate:today]; 
```

我从[Apple 文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendars.html)中得到的；它考虑了夏令时。关于如何将上述代码转换为 C# 的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:10:40.070

答案实际上取决于您要对结果做什么，但是如果您想要当前用户的语言环境中当前日期的星期几和星期几，这是一种方法：

```
var now = DateTime.Now;
var day = now.Day;
var weekday = now.DayOfWeek; 
```

*更新：*

如果你有 NSDate，你可以这样做：

```
var dt = ((DateTime) theNSDate).ToLocalTime ();
var day = now.Day;
var weekday = now.DayOfWeek; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T02:52:50.270

使用[DateTime.SpecifyKind](http://msdn.microsoft.com/en-us/library/system.datetime.specifykind.aspx)创建使用 UTC 的 DateTime 对象，或使用接受 DateTimeKind 作为参数的 DateTime 构造函数之一

# java - 在 Java 中比较 2 个图像的 RGB

> ID：12773925
> 
> 赞同：2
> 
> 时间：2012-10-08T00:07:28.530
> 
> 标签：java, mosaic

我正在用 Java 编写照片马赛克。为此，我必须计算和比较 2 个图像的 RGB，并用最合适的平铺图像替换目标图像。最恰当的意思是，如果我们没有找到精确的 RGB 匹配，`d`则允许出现 say 错误。

我正在使用以下代码来计算 RGB：

```
protected static int calcRGBForEachFile(String filePath) throws IOException {

        int RGBTotal = 0;

        try{
            BufferedImage tile = ImageIO.read(new File(filePath));
            tileWidth = tile.getWidth();
            tileHeight = tile.getHeight();

            for(int i=0; i<tileWidth; i++){
                for(int j=0; j<tileHeight; j++){
                    RGBTotal = getPixelData(tile.getRGB(i,j));
                }
            }
            }
        catch(IOException e){
            System.out.println(e);
        }
        return RGBTotal;
    }

    protected static void getPixelData(int rgb) {
        int red = (rgb >> 16) & 0xff;   
        int green = (rgb >> 8) & 0xff;  
        int blue = (rgb) & 0xff;

    } 
```

它的作用是从给定的路径中获取图像，计算其 RGB 并将其存储在`HashMap`.

有没有更好的方法来计算 RGB 并比较它们以获得更好的结果？

编辑：我根据一些评论编辑了我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T00:34:32.783

One of the best ways to compare images in terms of how they differ according to human perception (roughly) is [SSIM](http://en.wikipedia.org/wiki/Structural_similarity).

You may also try comparing the R, G, and B values for each pixel, and with a little more effort, weight each color based on human eye sensitivity (e.g. see [Von Kries's method](http://en.wikipedia.org/wiki/Color_balance#Von_Kries.27s_method)). If the images are not very, very close, and the same size, this won't work as well as you might hope.

I wrote a save format recommendation program (PNG vs JPG), [ImageGuide](http://code.google.com/p/imageguide/), whose (open) source contains a simple image comparison algorithm which works for its purpose. It may help get you started.

# c++ - 如何将单个字符串与字符串数组进行比较

> ID：12773930
> 
> 赞同：-1
> 
> 时间：2012-10-08T00:08:39.887
> 
> 标签：c++, string-comparison

```
string name;
strarray[] = ["Jack", "Tom" , "Jill"]

if(name == strarray)
{
    //implementation here
} 
```

我如何使这种比较工作

我在这里收到一个错误，因为一个是字符串，一个是数组字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T00:42:00.757

标准库有一个名为的函数`find`正是这样做的：（包括`<algorithm>`头文件）

```
std::string strarray[] = {"Jack", "Tom" , "Jill"};

if (std::find(strarray, strarray + 3, name) != strarray + 3) {
    // implementation here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T00:42:33.910

您可以使用`std::find()`：

```
if (std::end(strarray) != std::find(std::begin(strarray), std::end(strarray), name)) {
    // implementation goes here
} 
```

`std::begin()`并且`std::end()`在 C++ 2011 中是新的，但它们实现起来很简单：

```
template <typename T, int Size> T* begin(T (&array)[Size]) { return array; }
template <typename T, int Size> T* end(T (&array)[Size]) { return array + Size; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T00:12:03.183

```
bool flag=false;
string name;
strarray[] = ["Jack", "Tom" , "Jill"]

//How do I make this comparison work
//I am getting an error here bc one is a string and one is an array string
for(int i=0;i<3;i++)
{
    if(name == strarray[i])
    {
        flag=true;
        break;
    }
}

if(flag)
//implementation here :) 
```

# java - Java switch 语句和枚举的有趣结果

> ID：12773931
> 
> 赞同：1
> 
> 时间：2012-10-08T00:08:46.043
> 
> 标签：java, enums, switch-statement, case

在调试我的代码时，我遇到了这个有趣的场景，我在枚举中使用了 switch 语句。

对我来说，它看起来不应该编译并阻止我犯下愚蠢的错误，在可以使用这种语法的地方我是否遗漏了什么？

我的 java 版本是 1.6.0_10

```
private enum E_TEST
{
    A, B, C, D, E
}

public static void main( String[] args )
{
    for( E_TEST e : E_TEST.values() )
    {
        switch( e )
        {
            case A: B: C: D: E:
            {
                System.out.println( e );
                break;
            }
        }
    }
} 
```

为了完整起见，此代码的输出如下。

```
A 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T00:29:04.213

The code compiles because in the line

```
 case A: B: C: D: E: 
```

the B:, C:, D: and E: are labels.

It doesn't do what you expect because that line should be

```
case A: case B: case C: case D: case E: 
```

as dasblinkenlight noted in his post.

# r - 双向 key<->val 查找表的正确数据结构

> ID：12773933
> 
> 赞同：7
> 
> 时间：2012-10-08T00:09:02.737
> 
> 标签：r, data-structures

我在 R 中有一组键（字符）<-> 哈希（整数）关联。我想将这些关联存储在一个结构中，允许我通过键和哈希来引用键/哈希对。

所以像

```
"hello" <-> 1234 
```

在变量中`db`。

并使用（ish；不必是这种确切的访问语法）访问它：

```
db["hello"] -> 1234
db[1234] -> "hello" 
```

我尝试使用数据框，并将行名命名为键。但是我不能通过哈希整数引用一行。如果我使用哈希整数作为行名，那么我不能通过键名等引用。

我目前的解决方案是将两个数据库保留为两个数据框。一个将哈希作为行名，另一个将键作为行名。这可行，但保留两个相同的数据帧（除了它们的行名）似乎有点尴尬和重复。

我希望它在两个方向上都超级快:)。我认为这意味着字符方向为 O(log(n))，整数方向为 O(1)，但我不是数据结构/算法专家。整数方向上的 O(log(n)) 可能没问题，但我认为任一方向上的 O(n) （需要遍历整个数据库解决方案）都会使事情变得过于沉重。

db 也是双射的。也就是说，每个键都映射到一个值，每个值都映射到一个键。

编辑：感谢到目前为止的帖子：

运行一些测试，匹配技术肯定比 keyed data.table 慢。正如 Martin 所指出的，这完全是由于匹配创建键控表所需的时间。也就是说，match 和 keyed data.table 都执行二进制搜索来查找值。但无论如何，在返回单个值时，匹配对我的需求来说太慢了。所以我将编写一个 data.table 解决方案并发布。

```
> system.time(match(1,x))
   user  system elapsed 
  0.742   0.054   0.792 
> system.time(match(1,x))
   user  system elapsed 
  0.748   0.064   0.806 
> system.time(match(1e7,x))
   user  system elapsed 
  0.747   0.067   0.808 
> system.time(x.table[1])
   user  system elapsed 
      0       0       0 
> system.time(x.table[1e7])
   user  system elapsed 
  0.001   0.001   0.000 
> system.time(x.table[1e7])
   user  system elapsed 
  0.005   0.000   0.005 
> system.time(x.table[1])
   user  system elapsed 
  0.001   0.000   0.000 
> system.time(x.table[1])
   user  system elapsed 
  0.020   0.001   0.038 
```

编辑2：

我选择了 fmatch 解决方案和一个命名向量。我喜欢 match 方法的简单性，但是我在 db 上重复查找，所以在每次调用 match 时重新创建哈希表对性能的影响太大了。

fmatch 与 match 具有相同的接口，适用于相同的命名向量数据类型等。它只是缓存/记忆创建的哈希表，因此对命名向量的后续调用只需执行哈希查找。所有这些都是从调用者中抽象出来的，所以 fmatch 只是 match 的一个 dropin。

双向查找的简单包装代码：

```
getChunkHashes = function(chunks, db) {
        return(db[fmatch(chunks, names(db))])
}

getChunks = function(chunkHashes, db) {
        return(names(db[fmatch(chunkHashes, db)]))
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T00:19:33.457

一种基本方法是使用命名向量：

```
db <- c(hello = 1234, hi = 123, hey = 321) 
```

要从键到值，请使用`[`：

```
db[c("hello", "hey")]
# hello   hey 
#  1234   321 
```

从值到键有点棘手：

```
names(db)[match(c(321, 123), db)]
# [1] "hey" "hi" 
```

（请注意，它`match(x, y)`返回 in 的第一个匹配项的索引，*因此*这种方法仅在您的地图是单射的情况下才有效，您在问题中没有明确说明。）`x``y`

如果你觉得最后一个用法有点“重”，你绝对可以编写自己的函数。

**注意**：正如所指出的，这种方法在 value-to-key 方向上可能很慢，因此它可能不适合重复双向访问大地图。对于它的防御来说，它很容易实现，不需要除`base`. 如果没有，它可以在这里用作更快替代方案的基准。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T08:35:15.913

给定：

> db 也是双射的。也就是说，每个键都映射到一个值，每个值都映射到一个键。

然后我会建议散列解决方案（例如[散列包](http://cran.ma.imperial.ac.uk/web/packages/hash/index.html)）、[快速匹配包](http://cran.ma.imperial.ac.uk/web/packages/fastmatch/index.html)或`data.table::chmatch`. 键控联接`data.table`更适用于*有序*的多列键和/或分组数据，这并不是您真正遇到的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T03:17:07.207

更多关于@claytonstanley 对@flodel 回应的关注的详细说明。`match`对其中一个参数进行哈希处理，然后搜索另一个。成本在于创建哈希而不是查找

```
> n = 1e7; x = seq_len(n)
> system.time(match(1, x))
   user  system elapsed 
  1.156   0.064   1.222 
> system.time(match(n, x))
   user  system elapsed 
  1.152   0.068   1.221 
```

它按执行的查找次数摊销

```
> y = sample(x)
> system.time(match(y, x))
   user  system elapsed 
  2.112   0.052   2.167 
```

所以你肯定希望查找被“矢量化”。

# delphi - COM API 调用后，出现 EOSError 异常（访问被拒绝），但仅在切换用户或在 Windows 7 上锁定工作站时

> ID：12773935
> 
> 赞同：2
> 
> 时间：2012-10-08T00:09:08.693
> 
> 标签：delphi, com, access-denied, switch-user

我有一个 Delphi 6 应用程序，它出现*EOSError 异常，代码 5，访问被拒绝，*但只有当我切换到另一个 Windows 7 用户帐户，或者我锁定站时。我正在打印一个堆栈跟踪，但错误似乎直接来自 Application.Run() 语句，Application.ProcessMessages() 紧挨在堆栈上。堆栈的其余部分是我的异常处理代码。

在操作期间，代码确实会调用 ShellExecuteEx() 并访问 COM/ActiveX 对象，但仅当用户明确单击按钮时。这只发生在 Windows 7 上，不会发生在 Windows XP 上。我更改了我的应用程序，使其完全安装到用户应用程序数据目录，因此不需要访问任何管理员权限目录。我知道这不重要，但我指出以防万一。

当这种情况发生时，异常来得又快又猛。我捕获它们并将它们转储到错误日志中，以避免用大量对话框困扰用户。谁能告诉我仅仅通过切换或锁定当前登录的用户会引发这些错误的泛滥吗？当当前用户帐户未激活时，为什么我的应用程序会遇到问题？

一念。如果用户当前没有登录，一些位图操作会导致麻烦吗？我确实有一个旋转标签云，它不断执行 Windows API 位图操作以更新标签云图像。这可能与它有关吗？

如果是这样，我可以尝试在当前用户被关闭或锁定时停用标签云，但我相信我需要 Delphi 的代码来响应此 Stack Overflow 帖子中提到的事件：

[如何从 WPF 应用程序中检测到 Lock This Computer 命令？](https://stackoverflow.com/questions/652550/how-do-i-detect-a-lock-this-computer-command-from-a-wpf-application)

**更新**：我做了一些额外的测试。在我访问 Evernote 的 COM/ActiveX 接口（我正在与之交互的软件）之前，这些错误不会发生。一旦我通过 COM API 首次调用 Evernote，当我锁定工作站时，错误立即发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:09:51.093

我发现了问题。这是因为我在计时器上调用**Controls.TMouse.GetCursorPos()**来更新我在原始帖子中提到的标签云视图。如果当前桌面不可用，该功能将引发异常，例如当您切换到另一个用户帐户或锁定工作站时。这篇 Stack Overflow 帖子涵盖了 GetCursorPos() 函数的一般 WinAPI 上下文中的问题。

[调用 TMouse.GetCursorPos 有时会失败，并显示“调用 OS 函数失败”](https://stackoverflow.com/questions/983738/call-to-tmouse-getcursorpos-sometimes-fails-with-a-call-to-an-os-function-faile)

与上述帖子的作者相反，它只发生在 Windows 7 上，*而不*发生在 Windows XP 上。我需要更改我的代码以检测活动桌面何时不再可用，并使用TLama 向我建议的下面链接的帖子中介绍的*会话锁定/解锁/登录/注销检测技术抑制该调用。*见大卫赫弗南的回答：

[应用程序必须做什么才能“支持”远程桌面服务？](https://stackoverflow.com/questions/4854534/what-does-an-application-have-to-do-in-order-support-remote-desktop-services/4854908#4854908)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:37:33.833

如果可能的话，您的用户可以将您的程序更改为兼容模式 XP SP3，这可能会消除这些错误。这显然是一种解决方法。

您可以使用`processmonitor`with`filemon`来查看 Windows 上发生了什么： [http ://technet.microsoft.com/en-us/sysinternals/bb896645.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)

完整套件： [http ://technet.microsoft.com/en-us/sysinternals/bb842062](http://technet.microsoft.com/en-us/sysinternals/bb842062)

# ajax - 选择和订购值

> ID：12773939
> 
> 赞同：0
> 
> 时间：2012-10-08T00:09:50.837
> 
> 标签：ajax, ruby-on-rails-3

我有一个值，任务表，我需要从数据库中提取，然后按如下顺序排列：

```
 <section class="entry-content">
                <header>    
                    <h4>Daily</h4>          
                </header>       

                <ul class="task-list" id="daily-tasks">
                    <% @daily.each do |task| %>
                        <% if task.status == "incomplete" %>                    
                            <li><% = task.title %></li>     
                        <% end %>
                    <% end %>

                    <% @daily.each do |task| %>
                        <% if task.status == "complete" %>                  
                            <li><% = task.title %></li>
                        <% end %>
                    <% end %>
                </ul>                           
            </section><!--.entry-content--> 
```

我还有一次、每周、每月和可能每年的任务。

我是 Ruby 新手，所以我正在寻找*最好*的方法，因为我当前的代码并不理想

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T03:33:36.887

我希望这可以帮助你......我建议使用应用程序助手，因为你试图多次执行相同的任务。我没有测试它，但它是完整的想法。

**控制器**

```
@daily = Task.where("type = 'daily'")
@weekly =  Task.where("type = 'weekly'") 
```

**看法**

```
<ul>
 <%= print_task (@daily,'completed') %> 
</ul>

<ul>
 <%= print_task (@daily,'incomplete') %> 
</ul>

<ul>
 <%= print_task (@weekly,'completed') %>           
</ul>

<ul>
 <%= print_task (@weekly,'incomplete') %> 
</ul>   
... 
```

**application_helper**

```
def print_task(tasks, status)
 html =''
 tasks.each do |task|
   html += '<li>'
     if task.status == status
       html += "#{task.title}"
      end
   html += '</li>'
 end
 html.html_safe
end 
```

# c - ANSI C - 获取每个数组的随机字

> ID：12773944
> 
> 赞同：0
> 
> 时间：2012-10-08T00:10:55.063
> 
> 标签：c, arrays, random, ansi

我的代码在生成 6 个随机人类字符和 6 个随机数时遇到了一些问题，这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

char name[5] = {'Daniel','Bill','Ben','Steve','Drew'};
char animals[5] = {'Dog','Cat','Mouse','Chicken','Bird'};
int age[5] = {25,17,18,50,10};
char city[5] = {'Palo Alto','Escondido','Chicago','Mumbai','Zapopan'};

int main() {
srand(time(NULL));
int a = rand(),b = rand(),c = rand(),d = rand(),e = rand(),f = rand();
printf("Name: %c\nAnimal: %c\nAge: %d\nCity: %c",name[a],animals[a],age[a],city[a]);
printf("Name: %c\nAnimal: %c\nAge: %d\nCity: %c",name[b],animals[b],age[b],city[b]);
printf("Name: %c\nAnimal: %c\nAge: %d\nCity: %c",name[c],animals[c],age[c],city[c]);
printf("Name: %c\nAnimal: %c\nAge: %d\nCity: %c",name[d],animals[d],age[d],city[d]);
printf("Name: %c\nAnimal: %c\nAge: %d\nCity: %c",name[e],animals[e],age[e],city[e]);
printf("Name: %c\nAnimal: %c\nAge: %d\nCity: %c",name[f],animals[f],age[f],city[f]);
return 0;
} 
```

它似乎不起作用 S：我是一个初学者，有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:32:46.083

as you have array of 5 elements so you need random number from 0-4 so you should use:

`int number = rand() % 5; // range 0-4`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T00:13:14.623

您需要确保随机值小于数组中的元素数。

就像是，

```
int a = rand() % 5; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T00:15:23.490

*   使用`%s`，而不是`%c`；s 打印一个字符串，ca 字符。
*   `rand() % 5`否则你几乎总是会出界。
*   为每一行使用一个单独的索引，除非您希望对于任何给定的 n 在每个数组中只包含第 n 个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T01:05:23.387

`rand()%5`，因为你只想要 0 到 4 之间的索引

而且由于您的`printf`函数始终是相同的，唯一改变的是您正在使用的索引，因此您可以将其放入循环中并仅使用一个变量而不是 6 个。

# core-data - awakeFromFetch 中的核心数据 NSNotification 导致崩溃

> ID：12773945
> 
> 赞同：0
> 
> 时间：2012-10-08T00:10:56.860
> 
> 标签：core-data, nsnotification

我敢肯定有人以前看过这个，我可能遗漏了一些明显的东西......这是简要说明：我有一个核心数据应用程序，它有 Car 和 CarMileage，更准确地认为是汽车旅行（汽车 < -->>汽车里程）。CarMileage 包含一些属性，包括里程（浮动、行程长度）和 forWork (BOOL)。我制作了一个包含 mileageForWork 的自定义 CarMileage 类（浮点数，如果 forWork = YES 则返回里程，如果 forWork = NO 则返回 0）。我还让 +keyPathsForValuesAffectingMileageForWork 返回一组里程和 forWork。现在我需要计算该年特定汽车的总百分比里程数。

目前我在 CarMileage：

```
- (float) mileageForWork {
    float mileageForWork;
    if ([self.forWork boolValue] == YES) {
        mileageForWork = [self.mileage floatValue];
    } else {
        mileageForWork = 0;
    }
    [[NSNotificationCenter defaultCenter] postNotificationName: @"mileageForWorkChanged" object:self];
    NSLog(@"send notification");
    return mileageForWork;
} 
```

然后汽车有：

```
- (void) awakeFromFetch {
    [super awakeFromFetch];
    [self updatePercentMileageForWork];
    [[NSNotificationCenter defaultCenter] addObserver: self
                                             selector: @selector(updatePercentMileageForWork)
                                                 name: @"mileageForWorkChanged"
                                               object: nil];
    NSLog(@"awakeFromFetch");
}

- (void) awakeFromInsert {
    [super awakeFromInsert];
    [[NSNotificationCenter defaultCenter] addObserver: self
                                             selector: @selector(updatePercentMileageForWork)
                                                 name: @"mileageForWorkChanged"
                                               object: nil];
    NSLog(@"awakeFromInsert");
} 
```

加载自动保存的文件后，我转到包含用于 Car 和 CarMileage 的 NSArrayController 的 Vehicles 部分。日志显示“send notification”、percentMileageForWork 的值和“awakeFromFetch”，然后程序暂停，XCode 中的线程选项卡弹出 szone_malloc_should_clear, EXC_BAD_ACCESS code = 2。

我完全不知道为什么会这样。在我经验不足的情况下，问题在于应该在哪里观察通知。毕竟，帖子会产生日志。任何想法为什么它会崩溃？

编辑（10 月 14 日） - 我试图将事物更改为键值观察模型，以便在CarMileage`-awakeFromInsert`和`-awakeFromFetch`CarMileage 中，对象将 Car 添加为自身的观察者。这可以按预期进行提取，但是当插入对象时，我的`-updatePercentMileageForWork`方法不会触发；看起来这是因为添加观察者时尚未设置 Car 与 CarMileage 的关系（所以它实际上根本没有设置观察者）。我猜有一种方法可以移动`-addObserver:forKeyPath:options:context`在将新的 CarMileage 对象添加到关系集的方法中调用 Car，所以我没有遇到这个问题。我不知道我是否应该弄乱 Core Data 自己的代码，这可能是高度优化的，此外，我不知道该代码应该如何正常阅读，所以我担心完全搞乱我的关系. 我听说过一些关于“mogenerator”的东西，但我找不到文档，而且当我已经很困惑时，我在使用另一个我不太了解的程序时感到有点不舒服......

有谁知道我应该`-addObserver:forKeyPath:options:context`从哪里打电话，如果是从哪里建立关系，我会怎么做？或者我将如何按照我原本打算的方式通过通知来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:59:04.900

傻，傻我。我的 -updatePercentMileageForWork 方法正在调用 carMileage.@sum.mileageForWork，它会发布一个它已重新计算的新通知，从而设置一个无限循环。所以我将 CarMilage -mileageForWork 方法更改为：

```
- (float) mileageForWork {
    float newMileageForWork;
    if ([self.forWork boolValue] == YES) {
        newMileageForWork = [self.mileage floatValue];
    } else {
        newMileageForWork = 0;
    }

    if (newMileageForWork == mileageForWork) {
        return mileageForWork;
    } else {
        mileageForWork = newMileageForWork;
        [[NSNotificationCenter defaultCenter] postNotificationName: @"mileageForWorkChanged" object:self];
        NSLog(@"send notification");
        return mileageForWork;
    }

} 
```

这样，它只会在它实际上是一个新值时发送通知，而不是每次都发送。这留下了另一个问题，即当为该汽车添加新的 CarMileage 对象（即新的行程）时，mileageForWork 和 newMileageForWork 都将默认为 0，因此不会发送任何通知。我只是用 mileageForWork = 1 覆盖 CarMileage 上的 -awakeFromInsert 并且一切正常，尽管这意味着通知循环在插入新对象时运行两次。不过，在我看来，让特定循环运行两次仍然比每次任何对象更改时发送通知更有效，就像使用 NSManagedObjectContextObjectsDidChangeNotification 一样。

# php - #！在 url 中使网页行为奇怪

> ID：12773951
> 
> 赞同：3
> 
> 时间：2012-10-08T00:12:02.507
> 
> 标签：php, html, wordpress, url

我正在通过 wordpress 在一个网站上工作，我有一张图片，其中有一个指向子网站的链接。如果我只是直接进入子站点，该站点会按照我的意愿呈现（它使用图库插件），但是一旦通过链接进入子站点，该插件的行为就非常有趣。我认为这可能与我链接的网站包含 #! 在 url 中，它被传递到下一个站点。所以它会从这样的 www.hello.com/#!/test/ 转到这个站点 www.hello.com/#!/test/link/，但我的站点位于 www.hello.com/测试/链接。有谁知道#！在一个网址中以及如何删除它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T00:14:19.053

`#!`是一个shebang，并且（在URL的上下文中）它基本上用于告诉搜索引擎他们可以通过访问shebang之后显示的路径来访问与URL显示的文件相同的文件。

由于它仅用于基于 AJAX 的站点，即使这样，也只有在您告诉它的情况下，您才应该能够删除使用它的代码......

# c# - 我可以在 ASP.NET 托管的 IHttpHandler 和现有的 ASP.NET 页面中使用 ServiceStack 的 ISession 吗？

> ID：12773954
> 
> 赞同：1
> 
> 时间：2012-10-08T00:12:21.597
> 
> 标签：c#, asp.net-mvc, session, servicestack, ihttphandler

我正在将我的应用程序迁移到 ServiceStack，并已使用 ServiceStackController 注册了现有的 MVC3 控制器，如[如何在 ServiceStack 服务实现中使用标准 ASP.NET 会话对象所述](https://stackoverflow.com/questions/8339584/how-can-i-use-a-standard-asp-net-session-object-within-servicestack-service-impl)

在测试项目之外，我看不到在哪里可以找到文章中引用的 PageBase 类。这是我需要复制/粘贴到我的解决方案中的东西吗？

我也有一些自定义的 IHttpHandler (.ashx) 页面，我正在尝试使用相同的 ISession，但我没有看到在引用的帖子中调用的基类。这可能吗，还是我需要将这些 IHttpHandler 移动到 ServiceStack 服务才能利用 ISession？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T02:07:25.183

ASP.NET [PageBase 类是在安装](https://github.com/ServiceStack/ServiceStack/blob/master/NuGet/ServiceStack.Host.AspNet/content/App_Start/PageBase.cs.pp)[ServiceStack.Host.AspNet](https://nuget.org/packages/ServiceStack.Host.AspNet) NuGet 包时添加的 T4 模板。

ServiceStack 的所有缓存和会话支持完全独立于 MVC 控制器，而 ASP.NET 基页仅来自于 ServiceStack 的 IOC 的解析`ICacheClient`和处理。`ISessionFactory`

如果您的 MVC 控制器和 ASP.NET 基本页面是自动连接的，您可以将它们声明为公共属性，它们将由[ServiceStack 的 IOC](https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container)注入，否则您可以直接使用单例访问 ServiceStack 的 IOC：

```
var cache = Endpoint.AppHost.TryResolve<ICacheClient>();
var typedSession = cache.SessionAs<CustomUserSession>(  //Uses Ext methods
    HttpContext.Current.Request.ToRequest(),  //ASP.NET HttpRequest singleton
    HttpContext.Current.Request.ToResponse()  //ASP.NET HttpResponse singleton
); 
```

访问会话都以相同的方式完成，这是来自 ServiceStack 的[Service.cs](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Service.cs)基类的示例代码：

```
 private ICacheClient cache;
    public virtual ICacheClient Cache
    {
        get { return cache ?? (cache = TryResolve<ICacheClient>()); }
    }

    private ISessionFactory sessionFactory;
    public virtual ISessionFactory SessionFactory
    {
        get { return sessionFactory ?? (sessionFactory = TryResolve<ISessionFactory>()) ?? new SessionFactory(Cache); }
    }

    /// <summary>
    /// Dynamic Session Bag
    /// </summary>
    private ISession session;
    public virtual ISession Session
    {
        get
        {
            return session ?? (session = SessionFactory.GetOrCreateSession(Request, Response));
        }
    }

    /// <summary>
    /// Typed UserSession
    /// </summary>
    private object userSession;
    protected virtual TUserSession SessionAs<TUserSession>()
    {
        return (TUserSession)(userSession ?? (userSession = Cache.SessionAs<TUserSession>(Request, Response)));
    } 
```

# jquery - mouseleave 时停止 mouseenter 动画

> ID：12773956
> 
> 赞同：1
> 
> 时间：2012-10-08T00:13:05.440
> 
> 标签：jquery, jquery-plugins, flip, mouseenter, mouseleave

嗨，我正在使用 Jquery Flip 插件 - [http://lab.smashup.it/flip/](http://lab.smashup.it/flip/)

我有这段代码在悬停时执行翻转。当鼠标进入时，'.container' 位于背面。当鼠标离开时，“.container”在前面。

当鼠标在 mouseenter 翻转动画完成之前离开“.container”时，“.container”不会从正面翻转回来。发生这种情况时，我需要停止翻转。我将如何实现这一目标？我会在某个时间使用'stop(true, false)' 还是写一个'if ($(this).is(":animated")) {}...' 或'var hovering = 0; $(".container").hover(function() {hovering = 1; },function() { hovering = 0;});..etc'

请帮忙。谢谢。

```
$('.container').bind("mouseenter", function() {
    var elem = $(this);
    if (elem.data('flipped')) {} else {
        elem.flip({
            direction: 'lr',
            speed: 500,
            onBefore: function() {
                elem.html(elem.siblings('.content').html());
            },
            onAnimation: function() {
                elem.data('flipped', true);
            },
            onEnd: function() {}
        });
    }
});
$('.container').bind("mouseleave", function() {
    var elem = $(this);
    if (elem.data('flipped')) {
        elem.flip({
            direction: 'rl',
            speed: 500,
            onBefore: function() {
                elem.html(elem.siblings('.initContent ').html());
            },
            onAnimation: function() {
                elem.data('flipped', false);
            },
            onEnd: function() {}
        });
    }
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:09:21.860

大家好，没关系，我想出了一个稍微不同的解决方案，即隐藏其他未悬停的 div。感谢那些阅读我的问题的人。

```
 $(".container").each(function(i){
        $(".container").not($(this)).mouseenter(function() {
        $(".container").eq(i).trigger("mouseleave",[true]);
        });
  }); 
```

# eclipse - Eclipse IDE 执行记录

> ID：12773960
> 
> 赞同：0
> 
> 时间：2012-10-08T00:13:43.463
> 
> 标签：eclipse

有没有人知道是否可以从 Eclipse 终端获取程序执行输出的记录？

# php - 修改 javascript 以输出表单名称而不是表单 ID

> ID：12773965
> 
> 赞同：0
> 
> 时间：2012-10-08T00:15:13.093
> 
> 标签：php, javascript, forms, dynamic

我使用以下代码制作了几个输入字段框：

```
<script type='text/javascript'>//<![CDATA[ 
    $(window).load(function(){
        $('.add').click(function(){
            par_id=$(this).parent().attr('id');
            count=$("#"+par_id+"> input").length;
            id=par_id.toString();
            $(this).parent().append("<br/><input type='text' id='"+id+"'>");
        });
    });//]]>  
</script> 
```

我正在使用上述代码来创建可以动态添加新字段的输入字段。

此代码创建多个相同的表单 ID，但我希望它创建多个相同的表单名称，以便我可以使用 foreach 命令将其完全输出。

现在我想使用这个将输入数据输出到 PHP

```
<?php
    foreach($_POST['formid'] as $value) {
        echo "$value <br />";
    }
?> 
```

我想问的是 foreach 命令只会从**表单名称**输出数据，但我使用的 javascript 代码通过**表单 id**创建更多输入表单，而不是表单名称。

所以我需要一个代码来创建更多带有**表单名称**而不是表单id的输入框！

我不确定如何修改原始代码，因为我是从另一个网站获得的。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:49:12.977

@Chung - 我试图理解您的问题并提出以下建议，但您必须了解您的问题非常模糊、令人困惑并且可能具有误导性。

**对代码进行最小的更改：**

```
$(document).ready(function() {
    $('.add').click(function() {
        par_id = $(this).parent().attr('id');
        par_name = $(this).parent().attr('name');
        count = $("#" + par_id + "> input").length;
        id = par_id.toString();
        $(this).parent().append("<br/><input type='text' name='" + par_name + "' id='" + id + "'>");
    });
});​ 
```

**如这里演示：http:**
[//jsfiddle.net/pratik136/2nV3m/](http://jsfiddle.net/pratik136/2nV3m/)

**一些疑问/建议：**

*   为什么`count`不使用时会出现？`par_id`始终是一个字符串，但您将其转换为`string`，这表明您可能期望`count`在某个地方出现？
*   在我建议的状态下，`form`包含多个`input`具有相同 s 的 s `name`，因此，您将无法使用 迭代它`foreach`，而是将`value`所有这些元素的 s 作为`comma-delimited`列表接收。
*   然后，您是否可能希望使用 the 来不同地命名每个元素`count`，然后在服务器端使用`for`而不是循环`foreach`？在这里演示：http: [//jsfiddle.net/pratik136/7pK29/](http://jsfiddle.net/pratik136/7pK29/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T02:03:54.567

您只需要在 javascript 函数插入的代码中添加一个名称属性。

原来的：

```
$(this).parent().append("<br/><input type='text' id='"+id+"'>"); 
```

修正：

```
$(this).parent().append("<br/><input type='text' name='yourinputname' id='"+id+"'>"); 
```

编辑：事后才想到......

如果 ID 没有任何用途，只需要 name 属性，则此代码的大部分是不必要的，可以简化为以下代码。

```
<script type='text/javascript'>//<![CDATA[ 
    $(window).load(function(){
        $('.add').click(function(){
            $(this).parent().append("<br/><input type='text' name='yourinputname');
        });
    });//]]>  
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T04:12:15.910

只是一个评论：

```
> par_id = $(this).parent().attr('id'); 
```

该变量`par_id`应保持在本地，因此请声明它。表达式更简单、更高效且更少键入：

```
var par_id = this.parentNode.id; 
```

关于：

```
> count=$("#"+par_id+"> input").length; 
```

正如在其他答案中指出的那样，不使用 count 变量（并且应该声明它以使其保持本地状态）。由于您想`par_id`多次使用具有 id 的元素，请考虑：

```
var par_el = this.parentNode;
var par_id = par_el.id;
var count = $(par_el).find('input').length; 
```

在可用的地方使用属性访问比调用函数来做同样的事情更简单、更有效。

# javascript - jqplot内部甜甜圈重叠和图例仅显示外部甜甜圈图

> ID：12773970
> 
> 赞同：3
> 
> 时间：2012-10-08T00:16:12.083
> 
> 标签：javascript, jquery, charts, jqplot

我正在使用 jqplot 设置一个具有两个级别的圆环图，但是有两个问题，我偷偷怀疑它们是相关的。

1.  当我将设置保留为默认设置时，它会正确显示，但一旦我开始设置直径、内径等。尺寸适用于内部和外部图表，并且它们重叠。有人可以帮我吗？（放轻松，我是新手，非常感谢您的帮助）。我在[http://jsfiddle.net/oniiru/GFJrw/1/上设置了一个示例](http://jsfiddle.net/oniiru/GFJrw/1/)

2.  我有图例显示，但它只会显示外部甜甜圈，无论我做什么，内部都不会显示。

我真的很感激你们能给我的任何帮助。正如我所说，我对此很陌生，并且可以真正使用它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:43:08.623

关于。第 1 点。我认为不可能使用这些参数以您想要的方式自定义圆环图。但是您可以做的是使用显示图表的 div 的大小、图表上的填充和两个甜甜圈之间的 ringMargin，这可能有助于您想要实现的目标。

关于。第 2 点。似乎在这样的圆环图上显示多个系列时，假设这两个系列将描述相同的数据集。在您的特定情况下，如果您向每个系列添加具有零值的附加字段，它将显示图例中的所有值。

这两点都在这个 jsfiddle 中说明：http: [//jsfiddle.net/EjcyY/](http://jsfiddle.net/EjcyY/)

# javascript - jQuery mobile - 可以只使用导航栏所需的代码吗？

> ID：12773971
> 
> 赞同：1
> 
> 时间：2012-10-08T00:16:23.107
> 
> 标签：javascript, cordova, jquery-mobile

我有一个现有的移动网站，我正在使用 Phonegap 将其转变为原生应用程序。我现有的 html 工具栏使用 css position:fixed 在 iOS 或 Android 中不兼容。因此，我想使用 jQuery mobile 之外的固定导航/工具栏。我已经安装了它，它看起来很棒:-) 唯一的问题是当我使用站点中已经内置的搜索功能时，jQuery 脚本的其余部分（未使用）正在影响传递参数。我知道有办法把它关掉，我已经做到了，但它仍然不是 100%，而且我有点过头了！

我想知道是否有一种方法可以仅将 CSS 和 JS 用于导航栏而将其余部分排除在外？因为这是我正在使用的唯一功能。这意味着网站恢复正常，我可以使用 jQuery 移动导航栏，我现在真的想保留它，因为我已经安装了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T01:14:13.167

在[此页面上](http://jquerymobile.com/demos/1.2.0/docs/toolbars/bars-fixed.html)，您可以查看他们的固定定位演示。我使用 FireBug 检查与页脚相关的元素并想出了[这个小提琴](http://jsfiddle.net/FcEgk/1/)。我没有在任何地方测试它，但它可以在 iPhone 上运行。通过查看[此页面](http://fiddle.jshell.net/FcEgk/1/show/)，您可以仅查看带有页脚的框架。

我的解决方案仅引用他们的 CSS 页面进行样式设置。您不需要`jquery.mobile-1.2.0.js`包含它们。如果你要在生产中使用它，你应该浏览他们的 CSS 页面并只选择使用的类，而不是包括整个 CSS 页面。

由于此解决方案仅使用 CSS，因此仅适用于大多数较新的移动设备。有关支持它的设备列表，请查看[此站点](http://bradfrostweb.com/blog/mobile/fixed-position/)。向下滚动到“移动 CSS 固定定位支持”部分。较旧的设备将出现故障。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:51:32.067

它仍处于 Alpha 阶段，但正在创建一个下载生成器，让您获得所需的部分：http: [//jquerymobile.com/download-builder/](http://jquerymobile.com/download-builder/)

# java - 强制加载移动 Youtube 页面？

> ID：12773972
> 
> 赞同：1
> 
> 时间：2012-10-08T00:16:49.670
> 
> 标签：java, android, youtube, simulator

如何在移动版本中加载 youtube 链接？例如，如果您在浏览器中加载此链接 (http://m.youtube.com/watch?v=06f67ru5tCI)，它会加载移动版本，因为“m”。附加到 url 的 biginning 中。当您在普通桌面浏览器上加载链接时，这可以正常工作。每当我尝试在 Android 模拟器上以这种方式加载移动链接以从页面中提取一些数据时，它会自动重定向到链接的完整“桌面”版本，即使是“m.”。被附加到网址的开头。如何强制加载移动 Youtube 链接？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T00:34:41.850

One way is by changing the user agent. For example:

```
URLConnection con = ...
con.setRequestProperty("User-Agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1"); 
```

# java - 在 Windows 中从命令行执行 java 程序失败

> ID：12773979
> 
> 赞同：1
> 
> 时间：2012-10-08T00:18:34.867
> 
> 标签：java, exception, cmd, javac, noclassdeffounderror

我正在尝试从 Windows 的命令行运行一个非常简单的一类“Hello World”程序。

该`.java`文件位于“C:\Users\UserName\Desktop\direcName”。包是`deem`，类名是`test`.

我可以 cd 到该目录并从那里使用它进行编译，`javac test.java`并且效果很好。但是，当我尝试使用以下命令运行它时：

`java test`或`java -classpath directory test`或`java -cp . test` 它抛出“线程中的异常`main` `java.lang.NoClassDefFoundError: test (wrong name: deem/test)`。

如果我使用java `deem.test`，它会说：`Error, could not find or load main class deem.main`

如何修复异常并让我的程序运行？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T01:54:07.903

这是从命令行运行 Java 程序时出现的“初学者常见错误”的变体。

> java test 或 java -classpath 目录 test 或 java -cp 。测试它抛出“线程主java.lang.NoClassDefFoundError中的异常：测试（错误名称：deem/test）。

JVM 实际上是在告诉您在搜索路径上找到了“test.class”，但是当它读取类文件时，它得出的结论是该文件*应该*位于“./deem/test.class”或“directory/deem/” test.class" ...取决于您*实际*使用的“-cp”/“-classpath”参数

> 如果我使用 java deem.test 它说：错误，找不到或加载主类 deem.main

这现在告诉您它找不到“deem/main.class”。

请注意，您*现在已经*告诉它查找名为“deem.main”的类，而不是“test”或“deem.test”。（或者也许你只是在那里抄错了一些东西。）

规则非常简单：

1.  您必须将**完全限定**的类名`java`作为选项后的第一个参数。（*不是*简单的类名。 *不是*“.class”文件名。*不是*入口点方法的名称。）
2.  您必须指定类路径，以便`java`命令可以
    *   将类名映射到类文件的相对路径名（例如`foo.bar.baz.MyClass`映射到`foo/bar/baz/MyClass.class`）...
    *   然后根据类路径条目之一解析该相对路径；例如，如果`.`是类路径，则`./foo/bar/baz/MyClass.class`.
3.  该类必须具有所需的`public static void main(String[])`入口点方法。

所以**如果**...

1.  您的班级的完全限定班级名称是`deem.test`；即`test`类在包`deem`中，**并且**
2.  对应的类文件在`./deem/test.class`, **AND**
3.  它具有所需的入口点方法，**并且**
4.  测试应用程序不依赖于您的其他类或 3rd 方库...

**然后** `java -cp . deem.test`应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T00:20:48.153

如果该类位于“deem”包中，那么您需要像这样包含包名。

```
java deem.test 
```

那应该行得通。

# spring - Spring Tool Suite - 未找到 ApplicationContext

> ID：12773980
> 
> 赞同：0
> 
> 时间：2012-10-08T00:18:42.017
> 
> 标签：spring

我只是开始尝试了解 Spring。我安装了 Spring Tool Suite，因为 springsource.org 说这是要走的路。我创建了一个“Spring 项目”并输入了我正在看的书中的第一个示例 - 但是当我尝试导入 ApplicationContext 时，找不到它。那正确吗？我是否需要找到其中的 jar 并将其添加到项目的构建路径中，然后才能导入它？我会认为 Spring Tool Suite 至少可以解决这个问题？

谢谢，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:43:36.260

Spring 工具套件只是一个带有许多 Eclipse 插件的 IDE。请先在此处下载spring库：[http](http://www.springsource.org/download/community) ://www.springsource.org/download/community ，然后将所有对应的jar文件添加到您的构建路径（这里需要org.springframework.context.jar）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:53:18.423

> 那正确吗？我是否需要找到其中的 jar 并将其添加到项目的构建路径中，然后才能导入它？

我不知道 STS 是否会添加这些库。但是您可以从 springsource[下载页面](http://www.springsource.org/download/community)下载这些库。将它们添加到项目的类路径中。我使用 STS 创建了一个应用程序，但它没有添加库，我已经添加了这些库。

# jquery - JQuery Mobile 中的脚本冲突

> ID：12773986
> 
> 赞同：1
> 
> 时间：2012-10-08T00:19:37.570
> 
> 标签：jquery, jquery-mobile, preventdefault

我正在尝试构建一个 webapp。当我的网站在 iPhone 上作为应用程序运行时，我单击的每个链接都会关闭应用程序并在 Safari 中打开页面。这个论坛上有人建议我使用以下内容。

```
$("a").click(function (event){
    event.preventDefault();
    window.location = $(this).attr('href');
}); 
```

这很好用，现在所有链接都在应用程序中打开。但是，对于我的一些链接，我现在想包含一个 event.preventDefault();。由于上面的代码，preventDefault 被覆盖并且页面仍然加载。例如：

```
$("a.myClass").live("click", function(event) {
    event.preventDefault();
    alert("testing");
});

<a href="http://google.com" class="myClass">Click me</a> 
```

当上述两个脚本都在页面上时，警告框会清楚地出现，但在您有时间阅读之前，页面会加载链接。

有没有解决的办法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:58:57.940

关于什么

```
$("a:not(.myClass)").click(function (event){
    event.preventDefault();
    window.location = $(this).attr('href');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T01:53:51.083

我不确定。但试试它是否有效：

```
 $("a.myClass").live("click", function(event) {
        event.preventDefault();
        alert("testing");
        return false;
    }); 
```

# grails - 包括本机代码的 grails

> ID：12773988
> 
> 赞同：0
> 
> 时间：2012-10-08T00:20:00.317
> 
> 标签：grails, build, native-code, custom-build-step

我有一个依赖于一些本机代码的 grails 项目，这些代码会因平台而异。我想将它们存储在我的依赖库（例如nexus）中，而不是直接存储在项目中，因为它们是可以跨多个项目共享的文件（它是第3 方本机代码）。

我开始使用我的应用程序`grails -Djava.library.path=/path/to/native run-app`

但我需要一种方法将适当的本机代码（基于平台）复制到`/path/to/native`

我已经在使用 maven 的桌面应用程序中完成了此操作，其中包含了一个自定义构建步骤，该步骤将平台特定的本机代码复制到`/path/to/native`，但我不确定如何在 grails 中执行此操作。创建自定义 _Events.groovy 是正确的方法还是有其他方法可以添加此自定义构建步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T03:19:57.430

`dependencies {}`Grails 可以通过在块中声明它们来使用常规的 Maven 依赖项`BuildConfig.groovy`，并且这些将在构建期间被复制到 WAR 中。无需在 Grails 应用程序源中包含库二进制文件。

`_Events.groovy`是添加脚本以挂钩到构建过程的合适位置。

# linq - Entity.Attach 上的“ObjectStateManager 中已存在具有相同键的对象”

> ID：12773989
> 
> 赞同：0
> 
> 时间：2012-10-08T00:20:00.940
> 
> 标签：linq, entity-framework, c#-4.0

我首先使用实体​​框架代码，我的类是

```
[Serializable]
    public class Emp
    {
        public int EmpId { get; set; }
        public byte TitleId { get; set; }
        [MaxLength(50)]
        public string FirstName { get; set; }
        [MaxLength(50)]
        public string Surname { get; set; }
        public byte Type { get; set; }

        public List<PracticeEmp> PracticeEmps { get; set; }
    }

[Serializable]
    public class PracticeEmp
    {
        public int PracticeStaffId { get; set; }
        public int PracticeId { get; set; }
        public int EmpId { get; set; }
        public DateTime? StartDate { get; set; }
        public DateTime? EndDate { get; set; }

        public Emp Emp { get; set; }
    } 
```

当我尝试将数据插入到已经存在的员工的 PracticeEmps 表中时，我使用以下代码

```
Db.Current.Emps.Attach(practiceEmp.Emp);
Db.Current.PracticeEmps.Add(practiceEmp); 
```

此代码段在附加方法上返回错误“ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。”

有任何想法吗...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T02:49:24.787

如果您附加的 Emp 实例具有对它的引用并且它已经不是上下文的一部分，则 practiceEmp 实例将自动附加到您的上下文中。请注意，两个实体都将处于未更改状态，这是附加实体的默认状态。

# c# - 具有值类型键和引用类型值的通用字典

> ID：12773990
> 
> 赞同：3
> 
> 时间：2012-10-08T00:20:02.957
> 
> 标签：c#, .net, c#-4.0, .net-framework-version

您编写什么代码来约束名为`MyDictionary`具有引用类型值的值类型键的通用字典？

我想这是我的答案：

```
public class MyDictionary<Tkey,TValue>:Dictionary<Tkey,TValue>
where Tkey:struct
where TValue:class
{

} 
```

但我不确定这是否是正确的答案..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T00:31:40.610

Looks fine to me. One small caveat, you won't be able to use `Nullable` types (e.g. `int?`) as either keys or values in such a dictionary.

From [Constraints on Type Parameters](http://msdn.microsoft.com/en-us/library/d5x73970.aspx):

> `where T: struct` The type argument must be a value type. Any value type except `Nullable` can be specified.
> 
> `where T: class` The type argument must be a reference type; this applies also to any class, interface, delegate, or array type.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-12T07:15:52.590

没问题。如果会很好。

```
var c = new Dictionary<MyStruct?, MyClass>();
MyStruct? key = new MyStruct(){ X =5};
var value = new MyClass();
c.Add(key, value);
Console.WriteLine(c[key].Prop); 
```

# java - 为什么我不能在我的 java 类中隐藏我的 JFrame

> ID：12773994
> 
> 赞同：-2
> 
> 时间：2012-10-08T00:20:45.860
> 
> 标签：java, swing, netbeans, ide, jframe

我是java新手，我正在开发一个基本的国际象棋游戏，目前我正在处理玩家姓名屏幕，我不知道如何隐藏我的jPanel。我收到一条错误消息，说它在这里找不到符号是代码：

```
package chess;

import java.awt.Color;

public class ChessUI extends javax.swing.JFrame {

    public String pOneName;
    public String pTwoName;

    public ChessUI() {
        initComponents();
        getContentPane().setBackground(Color.white); 
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        playerOneNameText = new javax.swing.JTextField();
        playerTwoNameText = new javax.swing.JTextField();
        playButton = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        errorText = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jLabel2.setText("Player One Name:");

        jLabel3.setText("Player Two Name:");

        playerOneNameText.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                playerOneNameTextActionPerformed(evt);
            }
        });

        playerTwoNameText.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                playerTwoNameTextActionPerformed(evt);
            }
        });

        playButton.setText("Play");
        playButton.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                playButtonMouseClicked(evt);
            }
        });

        pack();
    }// </editor-fold>

    private void playerOneNameTextActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
    }

    private void playerTwoNameTextActionPerformed(java.awt.event.ActionEvent evt) {

    }

    private void playButtonMouseClicked(java.awt.event.MouseEvent evt) {
        if (playerOneNameText.getText().equals(""))
        {
            errorText.setText("One or More Player Names Missing !");
        }

        if (playerTwoNameText.getText().equals(""))
        {
            errorText.setText("One or More Player Names Missing !");
        }

        pOneName = playerOneNameText.getText();
        pTwoName = playerTwoNameText.getText();

        ChessUI.setVisibile(false); //Error Here

    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(ChessUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(ChessUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(ChessUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(ChessUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new ChessUI().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JLabel errorText;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JButton playButton;
    private javax.swing.JTextField playerOneNameText;
    private javax.swing.JTextField playerTwoNameText;
    // End of variables declaration
} 
```

我得到的错误是：无法从静态上下文中引用非静态方法 setVisible(boolean)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T00:30:24.563

`ChessUI.setVisibile(false)`是参考`Class`不是`Object`。

描述`Class`了一个`Object`.

为了在 上调用（非静态）方法`Class`，您必须引用该实例`Class`（即`Object`）。

在您的情况下，只需调用即可`setVisible(false)`。

While this probably sounds confusing, think of it this way. What would happen if you had two instances of `ChessUI`? How would you distinguish between them?

# map - 多个机器人的地图探索/路径规划（无障碍物）

> ID：12773998
> 
> 赞同：0
> 
> 时间：2012-10-08T00:21:22.847
> 
> 标签：map, graph-algorithm, robot, motion-planning, slam-algorithm

谁能带我到地图探索/路径规划论文/算法/网站来解决我的问题：

我们有 3 个机器人，它们将探索 2D 地图，例如，它们在地面上行驶并拍照。该地图上唯一的障碍是其他 2 个机器人。起始位置和地图未知；我们使用 TORO 算法通过闭环优化位置，并合并 3 个局部地图。

因此，我们需要一种算法来控制 3 个机器人，以便每个点至少访问一次，同时为每个机器人创建最佳路径。;) 它还必须能够处理坐标系中的跳跃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:03:04.673

如果您的地图是已知的，那么您可以使用一些旅行推销员算法（有多个信使），但这不适用于未知的图表。由于地图是未知的，因此几乎不可能获得始终产生最佳路径的算法。[你应该看看一些像这样](http://robots.stanford.edu/papers/Simmons00a.pdf)、[这样](http://www.cs.washington.edu/robotics/postscripts/multi-exploration-ieee-06.pdf)和[这样](http://www.cs.cmu.edu/afs/.cs.cmu.edu/Web/People/motionplanning/papers/sbp_papers/integrated1/yamauchi_frontier_localization.pdf)的地图探索论文。