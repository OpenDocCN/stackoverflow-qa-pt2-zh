# StackOverflow 问答 13906000-13906999

# php - PHP警告：pack（）：类型H：非法十六进制数字r错误

> ID：13906005
> 
> 赞同：7
> 
> 时间：2012-12-16T22:14:36.713
> 
> 标签：php, binary, runtime-error, apple-push-notifications, devicetoken

> **可能重复：**
> [php 中的 pack()。非法十六进制数字警告](https://stackoverflow.com/questions/4732681/pack-in-php-illegal-hex-digit-warning)

我正在使用苹果的推送通知服务，为了发送通知，您必须以二进制形式构建消息。我收到以下行的以下错误：

> 警告：pack()：Type H：非法的十六进制数字 r
> 
> 警告：pack()：类型 H：非法十六进制数字 y
> 
> 注意：第 130 行 C:\xampp\htdocs\firecom\FireComAPNS.php 中的数组到字符串转换

这是引发错误的代码行：

```
$msg = chr(0).pack('n', 32).pack('H*', $devicetoken).pack('n',strlen($payload)) . $payload; 
```

和

```
$devicetoken=773f5436825a7115417d3d1e036da20e806efeef547b7c3fe4da724d97c01b30 
```

我在互联网上搜索了很多，但我不知道如何弄乱二进制，任何关于正在发生的事情的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T00:16:49.817

为 php < 5.4.0 尝试此功能

```
function hex2bin($hexdata) {
   $bindata="";
   for ($i=0;$i<strlen($hexdata);$i+=2) {
      $bindata.=chr(hexdec(substr($hexdata,$i,2)));
   }

   return $bindata;
} 
```

# javascript - 我可以根据字母数更改字体大小吗？

> ID：13906007
> 
> 赞同：3
> 
> 时间：2012-12-16T22:15:04.490
> 
> 标签：javascript, html, css, frontend

> **可能重复：**
> [自动调整大小的动态文本以填充固定大小的容器](https://stackoverflow.com/questions/687998/auto-size-dynamic-text-to-fill-fixed-size-container)

我有一个显示用户名的框。但是我发现它只能容纳 10 个字母 - 我使用标准`h1`字体大小。

有没有办法`font-size`根据字母的数量来改变？我的用户名范围从 3 到 10 个字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T00:53:46.640

请尝试以下代码。

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script language="javascript">

    $(function() {
        var len_fit = 10; // According to your question, 10 letters can fit in.
        var un = $('#user_name');

        // Get the lenght of user name.
        var len_user_name = un.html().length;
        if(len_fit < len_user_name ){

            // Calculate the new font size.
            var size_now = parseInt(un.css("font-size"));
            var size_new = size_now * len_fit/len_user_name;

            // Set the new font size to the user name.
            un.css("font-size",size_new); 
        }
    });
</script>
</head>
<body>
    <h1 id="user_name">Your Long Name</h1>
</body>

</html> 
```

我希望这可以帮助你。

# javascript - 使用构造函数来帮助填充 Raphael 和 joint.js 功能

> ID：13906019
> 
> 赞同：1
> 
> 时间：2012-12-16T22:17:27.327
> 
> 标签：javascript, constructor, raphael, jointjs

我正在使用扩展 raphael.js 的[joint.js构建活动图。](http://www.jointjs.com/)这很简单，这里有一个例子。在此示例中， var r 创建 raphael 纸并将其附加到已识别的 div ID。c1、c2、c3 创建图表框。x.joint(y) 函数在创建的对象之间绘制连接器。

```
var r = Raphael("activity1", 500, 500),
c1 = r.rect(40, 40, 50, 50, 10),
c2 = r.rect(140, 140, 50, 50, 10);
c3 = r.rect(240,40,50,50,10);
c1.joint(c2);
c2.joint(c3);
c1.joint(c3); 
```

现在 - 我想做的事情对我来说仍然有点困惑，因为我仍然在学习使用 javascript。我可以很容易地继续做我上面做的事情。但是，我想做的是为图表创建一个构造函数，然后使用构造函数更容易地填充图表。

我将如何创建函数 diagNode(params){properties and methods}; 这在这里有意义吗？我开始走这条路，但后来我觉得我不确定下一步该怎么做......

```
//create a new constructor for diagram nodes
function diagNode(xStart,yStart,Width,Height,Corner){
    this.xStart = xStart;
    this.yStart = yStart;
    this.wide = Width;
    this.tall = Height;
    this.corner = Corner;
};
diag1 = new diagNode(300,100,100,50,10); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:03:13.137

[我在这里](http://jsfiddle.net/joeyramone76/ZCUw6/8/)创建了一个 jsfiddle 工作演示 我创建了两个简单的对象节点和图表：

*   节点定义图的状态；构造函数接受规范文字对象（spec.uid、spec.x、spec、y 等）查看代码中的注释
*   Diagram 构造函数接受一个 html id 选择器和一个可选的规范对象文字（spec.width 和 spec.height）
*   Diagram 对象公开了一个公共 API，该 API 允许

    *   通过 addState 方法向图中添加新节点（见代码中的注释）
    *   通过 addStates 方法向图中添加节点数组（见代码中的注释）
    *   通过jointState方法连接两个节点（见代码中的注释）
    *   通过 searchState 方法在 Diagram 中搜索一个节点

代码：

```
/*
** Node constructor
** crate a new Node (or state diagram)
** 
** @params {object} spec  the specification object (spec.x,spec.y,spec.width,spec.height, spec.radius
**
** @return NodeObject
*/
var Node = function(spec) {
    spec = spec || {};
    //uid usefull for search this node in a diagram
    this.uid = spec.uid || 0;
    this.x = spec.x || 0;
    this.y = spec.y || 0;
    this.width = spec.width || 0;
    this.height = spec.height || 0;
    this.radius = spec.radius || 0;
};

/*
** Diagram constructor
** 
** @params {object} selector  the paper selector 
**
** @return Diagram Object
*/
var Diagram = function(selector, spec) {
    //relay on default value if spec is undefined
    var defaultSpec = {
        width: 500,
        height: 500
    },
        dWidth = spec.width || defaultSpec.width,
        dHeight = spec.height || defaultSpec.height;

    //define the paper property
    this.paper = Raphael(selector, dWidth, dHeight);

    //define the state array; usefull for search node in diagram
    this.states = [];

};

Diagram.prototype = {
    //inefficent method to search a state by UID in array
    //TODO:optimize! 
    searchState: function(stateId) {
        var instance = this,
            i = 0,
            max = this.states.length,
            currentState, find = false,
            selectedState;

        //search the stateId params in diagram states array
        for (; i < max; i++) {
            currentState = instance.states[i];
            if (currentState.node.uid === stateId) {
                find = true;
                selectedState = currentState;
            }
        }

        //return the response object
        return selectedState;

    },

    //add single state (Node) to diagram    
    addState: function(node) {
        //create a rect shape with state param spec
        var state,
            stateShape = this.paper.rect(node.x, node.y, node.width, node.height, node.radius);

        state = {
            node : node,
            shape: stateShape
        };
        //add state to array  
        this.states.push(state);

        return this;
    },

    //add an array of states (Node) to diagram    
    addStates: function(stateArray) {
        var instance = this,
            i = 0,
            max = stateArray.length,
            currentState;
        for (; i < max; i++) {
            currentState = stateArray[i];
            instance.addState(currentState);
        }
        return this;
    },

    //join two states
    jointState: function(sourceState, destinationState) {
        var source = this.searchState(sourceState.uid),
            dest = this.searchState(destinationState.uid);

        //joint only if all the states passed to the function, already exist in the diagram    
        if (source && dest) {
            source.shape.joint(dest.shape);
        }
        return this;
    }
};

//code
// define nodes (or states)
var c1 = new Node({
    uid: 1,
    x: 50,
    y: 40,
    width: 50,
    height: 50,
    radius: 10
}),
    c2 = new Node({
        uid: 2,
        x: 150,
        y: 140,
        width: 50,
        height: 50,
        radius: 10
    }),
    c3 = new Node({
        uid: 3,
        x: 250,
        y: 50,
        width: 50,
        height: 50,
        radius: 10
    }),
    c4,
    // define an array of state to optionally pass to addStates Diagram function
    allStates = [c1, c2, c3],
    myDiag;
//create the diagram passing allStates array and settings node (state) joins
myDiag = new Diagram("activity1", 500, 500).addStates(allStates).jointState(c1, c2).jointState(c2, c3).jointState(c1, c3);

//later create anothe node
c4 = new Node({
    uid: 4,
    x: 350,
    y: 150,
    width: 50,
    height: 50,
    radius: 10
});

//add node to diagram
myDiag.addState(c4);
//join c3 to c4
myDiag.jointState(c3, c4); 
```

# javascript - 茉莉花测试用例

> ID：13906021
> 
> 赞同：0
> 
> 时间：2012-12-16T22:17:43.350
> 
> 标签：javascript, testing, jasmine, jsunit

我编写了一个 javascript 方法，可以在单击图像时更改建议框的值。

```
function startDestinationF(a) {
var startDestination = document.getElementById('startDestination');
startDestination.selectedIndex = (a);} 
```

现在我必须编写一个茉莉花测试用例来检查这种方法是否真的有效，但我真的不明白。

我试过了：

```
describe("Change onclick the value of the drop down menu", function() {

var startDestination;

beforeEach(function() {
    startDestination = document.getElementById('startDestination'); 
  });

it("should change the value", function() {
    expect(startDestinationF(3)).toBe(startDestination.selectedIndex==3);
});}); 
```

但它说：“无法读取 null 的属性‘selectedIndex’”。我是那个领域的新手，我真的需要一些帮助......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:45:37.677

您的 DOM 中必须有 id 为 startDestination 的元素。

实现此目的的两种方法：

*   将元素硬编码到 SpecRunner.html 的主体元素中
*   在运行该测试之前，使用 JavaScript 创建元素并将其附加到 DOM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-03T15:04:14.427

老问题，但万一有人会找到它

```
it("should work", myTestFunction.bind(this, 'param1','param4'));
it("should work", myTestFunction.bind(this, 'param2','param3'));

function myTestFunction(param1, expected){
   expect(param1).toBe(expected);
} 
```

我使用 bind 用必要的参数复制我的函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T19:21:10.913

与 Jasmine 一样，您需要在 DOM 中创建具有 ID 的元素。有很多方法可以做到这一点，我的方法是使用[jasmine-fixture](https://github.com/searls/jasmine-fixture)

```
affix('#startDestination')  --> This will create this in DOM <div id="startDestination"> 
```

如果您需要特定类型的输入，您也可以这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-31T21:13:47.223

这是您可以做到的一种方式，这通常是我这样做的方式。我冒昧地为此使用了 jQuery :)

这是一个有效的 plunkr：[http ://plnkr.co/edit/93dyzvxa82sFWWFZ6NTi?p=preview](http://plnkr.co/edit/93dyzvxa82sFWWFZ6NTi?p=preview)

```
describe('test suite', function(){
   // this here represents your global function
   // I've added this here for the purpose of this demo
   function setValue(a) {
       $('#name').val(a);
    }       

   beforeEach(function(){
      this.element = $('<input id="name" type="text" />');
      this.element.appendTo('body');
   });

   // clean up
   afterEach(function(){
      this.element.remove(); 
   });

   it('should change the value', function(){
      //when
      setValue('Alex Baur');

     // then
     expect(this.element.val()).to.Equal('Alex Baur');
   });
}); 
```

# jquery - 动态生成的 SVG 中的模糊字体、线条到画布中

> ID：13906028
> 
> 赞同：0
> 
> 时间：2012-12-16T22:18:22.343
> 
> 标签：jquery, html, css, canvas, svg

我有一个可以从表中生成`SVG`图像的代码。[JSFiddle 链接。](http://jsfiddle.net/netdjw/D5kgu/)`HTML`

生成的有一个问题`image`：每个元素都是模糊的，就像你放大图像一样。

我试图更改字体大小，使用`pt`,`em`或`px`...尝试更改表格的宽度和高度...相同的结果。

我想`HTML` `table`在`SVG`. 这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:06:13.650

这段代码有两个问题。

首先是您根据需要动态缩放画布。当您缩放画布时，您也在缩放画布的 2dcontext 区域中的像素，它们不会像 html 或 svg 那样缩放；它们像由像素组成的图像一样缩放。这就是模糊的原因。

第二个问题被第一个问题掩盖了；您正在创建的 svg 文档不知道如何自动调整大小，因此将 svg 元素的宽度和高度设置为 100% 没有任何作用。所以，我的建议：

1.  在 jQuery 中动态创建画布标签，并将宽度和高度属性设置为表格边框框的宽度。在您之前调整画布元素大小的代码中执行此操作。最简单的方法是用 div 替换 canvas 元素：

    ```
    <div id="canvasy"></div> 
    ```

    然后，像这样动态地将画布元素附加到它：

    ```
    $('#canvasy').append('<canvas id="canvas" width="'+($(id).width()+5)+'" height="'+($(id).height()+5)+'"></canvas>'); 
    ```

2.  构建 svg 时，在 svg 元素中使用相同的宽度/高度值。

这是[你的小提琴的工作版本](http://jsfiddle.net/D5kgu/4/)

# c# - 连接 3 个单词列表

> ID：13906032
> 
> 赞同：1
> 
> 时间：2012-12-16T22:18:48.780
> 
> 标签：c#, list, concatenation, nested-loops

我试图弄清楚如何使用 C# 创建一个来自 3 个单独列表的串联列表。例如：

```
 List 1: Ugly, Pretty
 List 2: Dogs, Carts, Pigs
 List 3: Rock, Suck 
```

输出：

```
 Ugly Dogs Rock
 Ugly Dogs Suck
 Ugly Cats Rock
 Ugly Cats Suck
 Ugly Pigs Rock
 Ugly Pigs Suck
 Pretty Dogs Rock
 Pretty Dogs Suck
 Pretty Cats Rock
 Pretty Cats Suck
 Pretty Pigs Rock
 Pretty Pigs Suck 
```

我知道这只是嵌套循环，但我不知道的部分是如何为每个列表使用列表字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T22:20:38.830

不是笛卡尔积吗？

```
var r = from i1 in list1
        from i2 in list2
        from i3 in list3
        select new { i1, i2, i3 };
        // or String.Format("{0} {1} {2}", i1, i2, i3); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T22:21:02.993

```
var list = from s1 in list1
           from s2 in list2
           from s3 in list3
           select s1 + " " + s2 + " " + s3; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-16T22:24:24.323

```
List<string> list1 = new List<string>(){ "Ugly", "Pretty"};
List<string> list2 = new List<string>(){ "Dogs", "Carts", "Pigs"};
List<string> list3 = new List<string>(){ "Rock", "Suck"};

var result = from s1 in list1
             from s2 in list2
             from s3 in list3
             select new[] { s1, s2, s3 };

foreach (var item in result)
{
    Console.WriteLine(String.Join(",", item));
} 
```

如果您正在寻找更通用的解决方案，不仅是 3 个列表，您可以尝试 Eric Lippert 的解决方案

```
foreach (var item in new[] { list1, list2, list3 }.CartesianProduct())
{
    Console.WriteLine(String.Join(",", item));
} 
```

* * *

```
public static partial class MyExtensions
{
    // Eric Lippert’s Blog
    // Computing a Cartesian Product with LINQ
    // http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx
    public static IEnumerable<IEnumerable<T>> CartesianProduct<T>(this IEnumerable<IEnumerable<T>> sequences)
    {
        // base case: 
        IEnumerable<IEnumerable<T>> result = new[] { Enumerable.Empty<T>() };
        foreach (var sequence in sequences)
        {
            var s = sequence; // don't close over the loop variable 
            // recursive case: use SelectMany to build the new product out of the old one 
            result =
                from seq in result
                from item in s
                select seq.Concat(new[] { item });
        }
        return result;
    }
} 
```

# java - 完美圆角矩形

> ID：13906033
> 
> 赞同：0
> 
> 时间：2012-12-16T22:18:54.803
> 
> 标签：java, graphics2d

当我制作 RoundRectangle2D 时，我得到一个圆角矩形，但角看起来并不光滑，因为我制作了非常小的圆角。

您实际上可以看到像素，所以我如何使圆角矩形平滑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T22:20:55.457

我假设您的意思是您可以看到角落看起来像像素阶梯的东西？使用抗锯齿，[本文](http://www.leepoint.net/notes-java/GUI-lowlevel/graphics/graphics2D/65aliasing.html)将向您展示如何：

如果你好奇，[这个维基百科页面](http://en.wikipedia.org/wiki/Antialias)解释了它是如何工作的以及它到底是什么：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T22:21:05.790

平滑是通过“抗锯齿”完成的。
尝试启用它。有关技术背景信息，请参阅[http://en.wikipedia.org/wiki/Anti-aliasing](http://en.wikipedia.org/wiki/Anti-aliasing)

# python - 图片上传后有错误

> ID：13906034
> 
> 赞同：1
> 
> 时间：2012-12-16T22:18:56.010
> 
> 标签：python, image, upload, cgi

我正在尝试使用以下 Python CGI 函数上传图像：

```
def save(image):
    path = '%s/%s' % ('dir/images', image.filename)
    nfile = open(path, 'wb')
    while 1:
        chunk = image.file.read(2<<16)
        if not chunk:
            break
        nfile.write(chunk)
    nfile.close() 
```

它适用于 SVG 和文本文件，但是当我尝试上传图像（经过 jpeg、png 和 gif 测试）时，无法显示生成的文件，因为它“包含错误”。而且看起来图像确实没有完全上传。我真的不明白为什么它适用于 SVG 和 TXT，但不适用于图像。

提前非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T22:21:42.483

嗯，所以任何低于 131072 字节的东西都可能有效。但是任何更大的东西，都会将第一个块写入文件，然后关闭文件。因此在下一次迭代中，输出文件句柄已关闭，因此无法写入。

正如@Lattyware 所指出的，这是使用的理想时机`with`：（以及其他一些位）

```
path = os.path.join('dir', 'images', image.filename)
with open(path, 'wb') as fout:
    in_chunks = iter(lambda: image.file.read(2 << 16), '')
    fout.writelines(in_chunks) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:05:52.773

在 Debian 上尝试了我的脚本后，我发现我的问题肯定是由于 python for Windows，因为它在 Debian 上运行得很好。

为避免在 Windows 上上传二进制文件时截断文件，您必须使用 -u 标志：

```
#! c:\python27\python.exe -u 
```

它应该解决被截断的文件问题。

[http://mail.python.org/pipermail/python-list/2007-December/439231.html](http://mail.python.org/pipermail/python-list/2007-December/439231.html)

# sql - 将 CSV 文件加载到 SQL Server 2008 的最佳方法？

> ID：13906035
> 
> 赞同：0
> 
> 时间：2012-12-16T22:19:06.550
> 
> 标签：sql, sql-server-2008, bulkinsert, bcp, bulk

我有一个抓取 CSV 文件的脚本。每天我会收到 36 个单独的 CSV 文件，每个文件包含大约 100 行数据。

我想每天将这些加载到 SQL Server 2008 中。我试过使用批量插入，但它不太喜欢我的 CSV 文件，引号不一致。

我刚刚发现`BCP.exe`，这是一个好的解决方案吗？

CSV 文件如下所示（忽略顶行）

```
24544,"1970-01-01 10:00:00","8056060 kWh"
24544,"2012-12-04 00:15:00",0.176
24544,"2012-12-04 00:30:00",0.163
24544,"2012-12-04 00:45:00",0.016 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T22:21:19.580

先建表再执行查询

```
BULK
INSERT CSVTest           -- the tableName
FROM 'c:\csvtest.txt'    -- file location
WITH  
(
    FIELDTERMINATOR = ',',
    ROWTERMINATOR = '\n'
)
GO 
```

*   [使用批量插入将 CSV 文件导入 SQL Server – 将逗号分隔文件加载到 SQL Server](http://blog.sqlauthority.com/2008/02/06/sql-server-import-csv-file-into-sql-server-using-bulk-insert-load-comma-delimited-file-into-sql-server/)

# ruby-on-rails - 在“lib/”目录中实现自定义验证器是否正确？

> ID：13906040
> 
> 赞同：4
> 
> 时间：2012-12-16T22:19:47.193
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 Ruby on Rails 3.2.9。解决与[自定义验证器](http://guides.rubyonrails.org/active_record_validations_callbacks.html#custom-validators)相关的“[在 'lib' 目录的子目录中扩展 Rails 时遇到](https://stackoverflow.com/questions/13893659)问题”的方法是声明以下代码（注意文件所在的目录）

```
# lib/extension/rails/custom_validator.rb
class CustomValidator < ActiveModel::EachValidator
  # ...
end 
```

*并将*`config.autoload_paths += %W(#{config.root}/lib/extension/rails)`语句放入文件`config/application.rb`中。这样，`CustomValidator`在启动服务器时可以正确加载，并且我的`lib/`目录按照我的预期进行组织。

但是，我想知道这是否是在 RoR 中制作这些东西的“正确”/“正确”方式。换句话说，是否有更好的方法来完成同样的任务？

* * *

*注意*：为了组织文件中的代码，我正在考虑将命名空间类命名为如下所示：

```
# lib/extension/rails/custom_validator.rb
module Extension
  module Rails
    class CustomValidator < ActiveModel::EachValidator
      # ...
    end
  end
end 
```

`CustomValidator`但是，通过使用上面的代码，即使我`config.autoload_paths += %W(#{config.root}/lib)`在`config/application.rb`文件中声明，似乎也没有一种简单的方法可以使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T22:34:12.517

在许多情况下，自定义验证器属于应用程序域。所以最好的地方是`app/validators`。这里有一篇很棒的文章[http://blog.codeclimate.com/blog/2012/02/07/what-c​​ode-goes-in-the-lib-directory/](http://blog.codeclimate.com/blog/2012/02/07/what-code-goes-in-the-lib-directory/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T17:53:48.440

`lib/`您可以在需要 Rails 扩展的目录下创建一个文件：

```
# lib/extension.rb
require 'extension/rails/custom_validator' 
```

# joomla - Joomla 2.5 使用 LEFT JOIN 删除查询

> ID：13906041
> 
> 赞同：2
> 
> 时间：2012-12-16T22:19:59.453
> 
> 标签：joomla, joomla2.5

我试图在 Joomla 2.5 中使用 LEFT JOIN 实现删除代码：

```
$cid = JRequest::getVar('cid', array(), 'post', 'array');

$query = $db->getQuery(true);

$query->delete($db->quoteName('table1').' AS t1');

$query->leftJoin($db->quoteName('table2').
' AS t2 ON t2.table_1_id = t1.id ');

$query->where(array('t1.id IN ('.  implode(',', $cid).')'));

$db->setQuery($query);

try {
  $db->query(); 
} catch (Exception $e) {
  echo $e->getMessage();
} 
```

我得到的是：

```
DELETE FROM `table1` AS t1
LEFT JOIN `table2` AS t2 ON t2.table_1_id = t1.id 
WHERE t1.id IN (48) 
```

此 SQL 查询不正确。我需要的是：

```
DELETE t1.*,t2.* FROM `table1` AS t1
LEFT JOIN `table2` AS t2 ON t2.table_1_id = t1.id 
WHERE t1.id IN (48) 
```

那么我应该如何更改 Joomla 查询以获得正确的 SQL 查询呢？有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T05:11:26.650

我已经与 Joomla 合作了很长时间。根据我的 Joomla 知识，您无法完成您想要做的事情`$query->delete()`。由于您的查询有点棘手，因此可以使用以下方法执行。

```
$db = JFactory::getDBO();
$query = "DELETE t1.*,t2.* FROM `table1` AS t1
LEFT JOIN `table2` AS t2 ON t2.table_1_id = t1.id 
WHERE t1.id IN (48)"; // you can replace the line with array('t1.id IN ('.  implode(',', $cid).')')
$db->setQuery($query);
$db->query(); 
```

# android - 解析双打时的 java.lang.NumberFormatException 和 Uncaught 处理程序

> ID：13906043
> 
> 赞同：-1
> 
> 时间：2012-12-16T22:20:21.437
> 
> 标签：android, math

我试图为我的一个朋友制作一个简单的计数器应用程序，其中一个按钮的 onClick 总数逐渐增加 1。单击按钮时我会强制关闭并且应该运行数学逻辑。LogCat 中错误的原因对我来说并不明显。这是我第一次在 Java/Android 中尝试数学（是的，我是新手）我不完全确定我是否正确处理或声明了这些值，或者是否可以这样做。看过很多例子，但它们似乎都比我真正想要的更复杂，又好又简单。作为次要问题（来自我的研究）和我自己的验证，double 是可以有小数的值，而 int 是整数？只要它们都是整数（即双精度不包含小数），它们是否可以相互替换（使用双精度而不是整数，反之亦然）？

编码

```
 public class CounterActivity extends Activity
{
TextView tt;
Button calculate;
double x=1;  //Known value to be increased by
double z=0;  //The total to increase incrementally
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  tt=(TextView)findViewById(R.id.tt);
  calculate=(Button)findViewById(R.id.calculate);
  calculate.setOnClickListener(OnClickListener);

}

Button.OnClickListener OnClickListener = new Button.OnClickListener() {
  public void onClick (View calculate) {

  x=Double.parseDouble("x");  //Dont believe these are set properly
  z=Double.parseDouble("z");
  z=x+z;  //The basic loop to run onClick
  tt.setText(Double.toString(z));
}
};
} 
```

日志猫

```
 12-16 15:58:52.194: W/dalvikvm(382): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
    12-16 15:58:52.194: E/AndroidRuntime(382): Uncaught handler: thread main exiting due to uncaught exception
    12-16 15:58:52.214: E/AndroidRuntime(382): java.lang.NumberFormatException: 
    12-16 15:58:52.214: E/AndroidRuntime(382):  at org.apache.harmony.luni.util.FloatingPointParser.parseDblImpl(Native Method)
    12-16 15:58:52.214: E/AndroidRuntime(382):  at org.apache.harmony.luni.util.FloatingPointParser.parseDouble(FloatingPointParser.java:283)
    12-16 15:58:52.214: E/AndroidRuntime(382):  at java.lang.Double.parseDouble(Double.java:285)
    12-16 15:58:52.214: E/AndroidRuntime(382):  at jtek.industries.com.CounterActivity.calculate(CounterActivity.java:37)
    12-16 15:58:52.214: E/AndroidRuntime(382):  at jtek.industries.com.CounterActivity.access$0(CounterActivity.java:35)
    12-16 15:58:52.214: E/AndroidRuntime(382):  at jtek.industries.com.CounterActivity$1.onClick(CounterActivity.java:33)
    12-16 15:58:52.214: E/AndroidRuntime(382):  at android.view.View.performClick(View.java:2364)
    12-16 15:58:52.214: E/AndroidRuntime(382):  at android.view.View.onTouchEvent(View.java:4179)
    12-16 15:58:52.214: E/AndroidRuntime(382):  at android.widget.TextView.onTouchEvent(TextView.java:6541)
    12-16 15:58:52.214: E/AndroidRuntime(382):  at android.view.View.dispatchTouchEvent(View.java:3709) 
```

一点方向将不胜感激，在我深入了解更复杂的内容之前，必须先了解基础知识:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T22:24:40.737

这是错误的：

```
 x=Double.parseDouble("x");  //Dont believe these are set properly
  z=Double.parseDouble("z"); 
```

什么`parseDouble()`方法是将`String`作为参数给定的值转换为`Double`值，因此您不能将 "x" 转换为`Double`. 例如，您可以输入“2.5”，这将给您 2.5 作为双倍值。

有关此方法的更多信息，您可以在 Android 的[文档中找到](http://developer.android.com/reference/java/lang/Double.html#parseDouble%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T22:23:17.227

`Double.parseDouble(someNumber)`期望这`someNumber`是一个表示数字的字符串，例如`"1.02"`.

在您的情况下，`"x"`不是表示数字的字符串，因此它失败并引发异常。

# php - 使用 PHP 在线访问的唯一身份访问者

> ID：13906053
> 
> 赞同：1
> 
> 时间：2012-12-16T22:21:18.717
> 
> 标签：php, mysql

好的，所以我使用 PHP 脚本和 MySQL 来显示在线访问者的数量。我在每个页面上都调用该函数，并且需要一种方法来避免在同一会话期间来自同一个人的重复条目。

它工作正常，但每次页面加载都会增加访问者。我认为在会话变量上有一个“require_once”语句会起作用，但不行。下面是PHP代码，请帮忙！

```
//users online
function update_user_time()

{

    session_start();
    $session=session_id();
    $time=time();
    $time_check=$time-600; //SET TIME 10 minutes

    $host="localhost"; // Host name
    $username="______"; // Mysql username
    $password="______"; // Mysql password
    $db_name="______"; // Database name
    $tbl_name="______"; // Table name

    // Connect to server and select databse
    mysql_connect("$host", "$username", "$password")or die("cannot connect to server");
    mysql_select_db("$db_name")or die("cannot select DB");
    $sql="SELECT * FROM $tbl_name WHERE session='$session'";
    $result=mysql_query($sql);

    $count=mysql_num_rows($result);
    if($count=="0"){

    $sql1="INSERT INTO $tbl_name(session, time)VALUES('$session', '$time')";
    $result1=mysql_query($sql1);
    }

    else {
    "$sql2=UPDATE $tbl_name SET time='$time' WHERE session = '$session'";
    $result2=mysql_query($sql2);
    }

    $sql3="SELECT * FROM $tbl_name";
    $result3=mysql_query($sql3);
    $count_user_online=mysql_num_rows($result3);
    echo "[ $count_user_online users online ]";

    // if over 10 minute, delete session 
    $sql4="DELETE FROM $tbl_name WHERE time<$time_check";
    $result4=mysql_query($sql4);

    // Open multiple browser page for result

    // Close connection
    mysql_close();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T22:24:54.247

我会设置一个会话变量，并且仅在未设置该会话变量时增加访问者计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T22:41:28.400

像这样的东西：

```
session_start();
if (!isset($_SESSION['counted']))
{
    $_SESSION['counted'] = TRUE;
    /* ADD TO COUNTER */
} 
```

这样，只有网站的第一个条目才会被计算在内。由于各种相当神秘的原因，这并不是 100% 万无一失的，但对于大多数网站来说，它是一个足够好的解决方案。HTH，~雷

# c# - 修改 Slider 的 ToolTip

> ID：13906057
> 
> 赞同：0
> 
> 时间：2012-12-16T22:21:27.803
> 
> 标签：c#, .net, windows-store-apps

`ToolTip`当您将鼠标悬停在 Windows 应用商店应用程序中的滑块上时，我想制作我自己的样式和内容。我怎样才能做到这一点？

例如，我正在创建一个电影播放器​​，我想将 Slider 的值格式化为 HH:MM:SS 而不是“SSSSS”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T00:28:39.873

您必须为 Slider 的 ThumbToolTipValueConverter 编写转换器

# angularjs - AngularJs完整的Jquery选择不起作用

> ID：13906058
> 
> 赞同：4
> 
> 时间：2012-12-16T22:21:30.393
> 
> 标签：angularjs

我正在尝试使用 Jquery 插件在 AngularJS 指令中操作 DOM。

我不确定 AngularJs 是否使用完整版的 Jquery，尽管完整版脚本在头上，而 AngularJs 脚本在正文上，所以理论上 AngularJS 应该使用完整版。但是，指令内部的日志条目没有显示任何被选中的内容。虽然 Chrome 控制台中完全相同的语法会返回 ul 中的所有 lis。

这是HTML

```
<ul id="myUl"  class="gallery unstyled">
    <li class="galleryitem" ng-repeat="i in images">
        <a href="{{i.LargeImage.URL}}"><img ng-src="{{i.MediumImage.URL}}" /></a>
    </li>
</ul> 
```

指示

```
.directive('gallery',function() {
    return {
        restrict : 'C',
        link : function postLink(scope, iElement, iAttrs) {
        console.log($(".gallery li"));
      }
    }
   } 
```

PS：我才意识到

```
console.log($(".gallery")); 
```

确实返回带有 li 的 ul 但不是

```
console.log($(".gallery li")); 
```

这让我觉得完整版没有加载。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T00:28:25.677

jQuery is loaded, but when you call `$('.gallery')` in the linking function the `ng-repeater` expression has not been evaluated yet, so at that moment all those `li` elements are not in the DOM. Just to experiment, you can add a delay before calling the selector

```
setTimeout(function(){
  console.log($(".gallery li"));
}, 1000); 
```

Then, you'll get all the `li` elements because you are querying the DOM after `ng-repeater` was evaluated. This is why running selecting the `li` nodes from the console works.

Before continuing, when it's said that angular uses jQuery when the library is loaded means that `angular.element` implements selectors and that references to elements inside directives have jQuery methods available. The recommendation is to manipulate the DOM in the **context of the directive's element**

```
iElement.find('li')    // instead of $('.gallery li') 
```

Now, you might be wondering, then how do I modify the DOM? Well, it depends of what exactly are you trying to achieve. Since you want to manipulate the DOM after all the `li` have been rendered in the **ngRepeater** you might want to use a special directive `checkLast` that checks when the last item in the repeater is rendered by checking if `$last` is `true`

Here's a [jsfiddle](http://jsfiddle.net/roychoo/XVzUW/3/) from someone in this [google groups discussion](https://groups.google.com/forum/?fromgroups=#!topic/angular/qTVQYMrAzeM).

Or you could `$watch` for some scope property to change.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T20:58:44.963

对于那些像我一样寻找答案的人，试试这个

```
 .directive('gallery',function() {
        return {
            restrict : 'C',
            link : function postLink(scope, iElement, iAttrs) {
                iElement.ready(function(){
                    console.log($(".gallery li"));
                });        
            }
        }
    } 
```

通过这种方式，您可以确保您的 iElement 已准备好进行 dom 操作

# wordpress - 我如何做一个例如图像链接来将网站内容从一种语言更改为另一种语言？

> ID：13906059
> 
> 赞同：-2
> 
> 时间：2012-12-16T22:21:35.167
> 
> 标签：wordpress

我已经在 html/css 中创建了一个网站，然后我在 wordpress 中的空白主题中使用了该网站，因为我正在做 ti 的人想要一种稍后编辑内容的简单方法。在 html/css 中，我可以只使用图像链接将用户发送到另一个 .html-doc 并解决问题，我可以在 wordpress 中这样做吗？如果我添加更多页面，我现在得到的菜单项就越多，这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:08:26.090

您可以尝试简单的方法并为双语网站安装插件，例如 qtranslate。这将为您做所有事情，您需要用您希望使用的语言填写您的帖子。

# perl - 解析 HTML 以获取两个集合元素之间的元素

> ID：13906068
> 
> 赞同：2
> 
> 时间：2012-12-16T22:22:50.403
> 
> 标签：perl, css-selectors, html-parsing

我正在尝试解析像[这样](http://en.wikipedia.org/wiki/Wayne_Rooney)的页面，我只是想获取标题之后的段落，我猜是介绍。

`<table class="infobox vcard">`我想要和之间的所有内容（包括段落标签）`<table id="toc">`。使用简单的 CSS 选择器来获取第一段：

`div#bodyContent div#mw-content-text.mw-content-ltr p`

并不总是有效，因为有时信息框表中的某些内容有一个段落。此外，介绍性段落的数量也会有所不同。如果有人有比我在这里想要的更好的方法，我也会接受。

--

请求的附加代码，尽可能缩短：

```
require HTTP::Request;
require LWP::UserAgent;

use LWP::Simple;
use HTML::Query 'Query';

my $pageurl = "http://en.wikipedia.org/wiki/Wayne_Rooney";
my $wikiurl = URI->new($pageurl);
my $wikirequest = HTTP::Request->new(GET => $wikiurl);
my $wikiua = LWP::UserAgent->new;
my $wikiresponse = $wikiua->request($wikirequest);
my $pagetoparse = $wikiresponse->content;

my $q2 = Query(text => $pagetoparse);
my @wikiintro = $q2->query('div#bodyContent div#mw-content-text.mw-content-ltr p')->get_elements();
my $pageintro;
if(@wikiintro) {
    if(index($wikiintro[0]->as_text(), "Appearances (Goals)") != -1){
        $pageintro = $wikiintro[1]->as_text();
    } else {
        $pageintro = $wikiintro[0]->as_text();
    }
} else {
    $pageintro = "unavailable";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T23:03:11.810

使用非标准模块的一种方法`HTML::TreeBuilder`。

内容`script.pl`：

```
#!/usr/bin/env perl

use warnings;
use strict;
use HTML::TreeBuilder;

my (@p);

## Read the web page.
my $root = HTML::TreeBuilder->new_from_url( shift ) or die qq|ERROR: Malformed URL\n|;

## Get the table tag with id = 'toc'.
my $table_toc = $root->look_down(
    id => 'toc'
);

## Get inmediate previous siblings <p> tags.
for my $node ( reverse $table_toc->left ) { 
    if ( $node->tag eq 'p' ) { 
        unshift @p, $node;
    }   
    else {
        last;
    }   
}

## Print the content without the HTML tags.
for my $p ( @p ) { 
    printf qq|%s\n|, $p->as_text;
} 
```

运行它，提供 url 作为唯一参数：

```
perl-5.14.2 script.pl http://en.wikipedia.org/wiki/Wayne_Rooney 
```

使用以下输出（我希望它接近您的期望）：

```
Wayne Mark Rooney (born 24 October 1985) is an English footballer who plays as a forward for Premier League club Manchester United and the England national team.
Rooney made his senior international debut in 2003 becoming the youngest player to represent England, until he got beaten by Theo Walcott. He is England's youngest ever goalscorer.[4] He played at UEFA Euro 2004 and scored four goals, briefly becoming the competition's youngest goalscorer. Rooney featured at the 2006 and 2010 World Cups and is widely regarded as his country's best player.[5][6][7][8][9][10] He has won the England Player of the Year award twice, in 2008 and 2009\. As of October 2012, he has won 78 international caps and scored 32 goals, making him England's fifth highest goalscorer in history.[11] Along with David Beckham, Rooney is the most red carded player for England, having been sent off twice.[12]
Wide character in printf at script.pl line 25.
Aged nine, Rooney joined the youth team of Everton, for whom he made his professional debut in 2002\. He spent two seasons at the Merseyside club, before moving to Manchester United for £25.6 million in the 2004 summer transfer window. The same year, Rooney acquired the nickname "Wazza".[13] Since then, with Rooney in the team, United have won the Premier League four times, the 2007–08 UEFA Champions League and two League Cups. He also holds two runner-up medals from the Champions League and has twice finished second in the Premier League. In April 2012, Rooney scored his 180th goal, making him United's fourth-highest goal-scorer of all time.[14]
Wide character in printf at script.pl line 25.
In 2009–10, Rooney was awarded the PFA Players' Player of the Year and the FWA Footballer of the Year. He has won the Premier League Player of the Month award five times, a record he shares with Steven Gerrard. He came fifth in the vote for the 2011 FIFA Ballon d'Or and was named in the FIFPro World 11 for 2011\. Rooney has won the 'Goal of the Season' award by the BBC's Match of the Day poll on three occasions, with his bicycle kick against rivals Manchester City winning the 'Premier League Goal of the 20 Seasons' award.[15] Rooney is the third highest-paid footballer in the world after Lionel Messi and Cristiano Ronaldo, with an annual income of €20.7m (£18m) including sponsorship deals.[16] 
```

* * *

**编辑**：为了得到结果，标签也使用`printf qq|%s\n|, $p->as_HTML;`而不是`$p->as_text`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T02:51:43.867

[`HTML::TreeBuilder`](https://metacpan.org/module/HTML%3a%3aTreeBuilder)可能是最好的工具。诀窍是在它提供的用于导航 HTML 树的许多方法之间学习和选择。

该程序似乎可以满足您的需求。它调用`look_down`查找具有给定类的表，该表紧接在您需要的输出之前。从这里调用返回HTML 层次结构中同一级别的该表*之后*`right`的所有元素。循环简单地打印这些元素中的每一个，直到遇到带有除.*`p`*

 *我`LWP::UserAgent`已经用.`HTML::TreeBuilder``new_from_url`

```
use strict;
use warnings;

use LWP;
use HTML::TreeBuilder;

binmode STDOUT, ':utf8';

my $url = 'http://en.wikipedia.org/wiki/Wayne_Rooney';
my $ua = LWP::UserAgent->new;
my $resp = $ua->get($url);
die $resp->status_line unless $resp->is_success;

my $tree = HTML::TreeBuilder->new_from_content($resp->decoded_content);

my $start = $tree->look_down(_tag => 'table', class => 'infobox vcard');

for ($start->right) {
  last if $_->tag ne 'p';
  print $_->as_trimmed_text. "\n\n";
} 
```

**输出**

```
Wayne Mark Rooney (born 24 October 1985) is an English footballer who plays as a forward for Premier League club Manchester United and the England national team.

Rooney made his senior international debut in 2003 becoming the youngest player to represent England, until he got beaten by Theo Walcott. He is England's youngest ever goalscorer.[4] He played at UEFA Euro 2004 and scored four goals, briefly becoming the competition's youngest goalscorer. Rooney featured at the 2006 and 2010 World Cups and is widely regarded as his country's best player.[5][6][7][8][9][10] He has won the England Player of the Year award twice, in 2008 and 2009\. As of October 2012, he has won 78 international caps and scored 32 goals, making him England's fifth highest goalscorer in history.[11] Along with David Beckham, Rooney is the most red carded player for England, having been sent off twice.[12]

Aged nine, Rooney joined the youth team of Everton, for whom he made his professional debut in 2002\. He spent two seasons at the Merseyside club, before moving to Manchester United for £25.6 million in the 2004 summer transfer window. The same year, Rooney acquired the nickname "Wazza".[13] Since then, with Rooney in the team, United have won the Premier League four times, the 2007–08 UEFA Champions League and two League Cups. He also holds two runner-up medals from the Champions League and has twice finished second in the Premier League. In April 2012, Rooney scored his 180th goal, making him United's fourth-highest goal-scorer of all time.[14]

In 2009–10, Rooney was awarded the PFA Players' Player of the Year and the FWA Footballer of the Year. He has won the Premier League Player of the Month award five times, a record he shares with Steven Gerrard. He came fifth in the vote for the 2011 FIFA Ballon d'Or and was named in the FIFPro World 11 for 2011\. Rooney has won the 'Goal of the Season' award by the BBC's Match of the Day poll on three occasions, with his bicycle kick against rivals Manchester City winning the 'Premier League Goal of the 20 Seasons' award.[15] Rooney is the third highest-paid footballer in the world after Lionel Messi and Cristiano Ronaldo, with an annual income of €20.7m (£18m) including sponsorship deals.[16] 
```*

# php - PDO 选择一个 id 或全部

> ID：13906071
> 
> 赞同：0
> 
> 时间：2012-12-16T22:23:16.317
> 
> 标签：php, sql, pdo

我正在尝试使用 php 和 pdo 构建一个排序器，我可以在其中为用户显示任务。我有几个选择，我可以从中选择一个值或全部。

```
<select id="select_user">
    <option data-id="all">All</option>
    <option data-id="1">User 1</option>
    <option data-id="2">User 2</option>
    <option data-id="3">User 3</option>
    <option data-id="4">User 4</option>
</select> 
```

根据任务是否完成来显示任务。

```
<select id="task_done">
    <option data-id="all">All</option>
    <option data-id="1">Done</option>
    <option data-id="0">Not Done</option>
</select> 
```

根据截止日期是否已过显示任务。

```
<select id="task_deadline">
    <option data-id="all">All</option>
    <option data-id="1">Passed</option>
    <option data-id="0">Not passed</option>
</select> 
```

通过一些 Ajax，我调用了如下所示的 php 函数：

```
function getTasksSorter($userid, $done, $passed) {
    $stmt = $this->conn->prepare('SELECT * FROM tasks WHERE user_id = :userid AND done = :done AND deadline_date = :passed');
    $stmt->execute(array('userid' => $userid,'done' => $done, 'passed' => $passed));
    $row = $stmt->fetchAll();

       foreach.. $row... build $html;

    }
    return $html;
} 
```

如果我选择全部，显然这不起作用。我试图解决这个问题，但我无法弄清楚。如何修改代码以使所有选择起作用？

编辑：好的，我添加了很多更多信息，因为我第一次问的时候还不够清楚。我不想用一堆 if 语句来解决这个问题，必须有更好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T22:30:04.903

那么你的逻辑可能取决于提供这样的价值`$userid`。

```
function getTasksSorter($userid = null) {
    if(is_null($userid)){
        $stmt = $this->conn->query('SELECT * FROM tasks');
    } else {
        $stmt = $this->conn->prepare('SELECT * FROM tasks WHERE user_id = :userid');
        $stmt->execute(array('userid' => $userid));
    }

    $row = $stmt->fetchAll();

       foreach.. $row... build $html;

    }
    return $html;
} 
```

# ruby-on-rails - 动态属性列表 rabl

> ID：13906076
> 
> 赞同：3
> 
> 时间：2012-12-16T22:24:01.817
> 
> 标签：ruby-on-rails, ruby, rabl

我正在尝试获取一个 json 视图，该视图使用 rabl 来让请求发送自定义属性，例如，如果模型有

```
:id, :first_name, :last_name 
```

我希望能够只调用我想要的值，比如只说 id 和 first_name，所以我不知道如何将字符串之类的东西转换为 rabble 必须返回的属性。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:01:51.410

首先根据请求在控制器中创建变量。例如

```
@attributes_choose_by_user = params[:attrs] 
```

他们只是将该变量作为参数传递给查看器中的属性

```
# app/views/posts/index.rabl
collection @posts
attributes @attributes_choose_by_user 
```

请求应该是这样的

```
GET /posts?attrs[]=id&attrs[]=first_name&attrs[]=last_name 
```

# python - 将 csv 文件中的日期字段读取到数据框中

> ID：13906077
> 
> 赞同：2
> 
> 时间：2012-12-16T22:24:04.370
> 
> 标签：python, date, dataframe, pandas

我有一个 CSV 文件，其中包含格式的日期`2011,1,10,`

我正在将该日期加载到的数据框中的格式应该是`2011-01-10`.

我正在使用以下代码从文件中加载日期：

```
read_csv("test.csv", parse_date=[[0,2]]) 
```

如何将其转换为 2011-01-10 读入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T22:52:27.547

你几乎拥有它！( )的正确语法[`read_csv`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.parsers.read_csv.html)是`parse_dates`：

```
In [1]: import pandas as pd

In [2]: pd.read_csv("test.csv", parse_dates=[[0,1,2]])
Out[2]: 
        year_month_day
0  2011-01-10 00:00:00 
```

*其中**test.csv**是：*

```
year,month,day
2011,1,10 
```

# javascript - 如何使用来自 HTML 文本区域的信息设置 JavaScript 变量？

> ID：13906078
> 
> 赞同：-1
> 
> 时间：2012-12-16T22:24:08.223
> 
> 标签：javascript, html

如何使用从 HTML 文本表单获得的字符串值设置 JavaScript 变量？

我对 HTML 和 JavaScript 完全陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T22:26:52.147

```
var textvalue = document.getElementById("insertidoftextarea").value; 
```

应该做的伎俩！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T22:28:30.870

HTML：

```
<textarea id="foo">Hello</textarea> 
```

JS：

```
var foo = document.getElementById("foo");
alert(foo.value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T22:33:54.497

以下是您询问的示例：

```
<HTML>
<HEAD>
<TITLE>Test Input</TITLE>
<SCRIPT LANGUAGE="JavaScript">
function testResults (form) {
    var TestVar = form.inputbox.value;
    alert ("You typed: " + TestVar);
}
</SCRIPT>
</HEAD>
<BODY>
<FORM NAME="myform" ACTION="" METHOD="GET">Enter something in the box: <BR>
<INPUT TYPE="text" NAME="inputbox" VALUE=""><P>
<INPUT TYPE="button" NAME="button" Value="Click" onClick="testResults(this.form)">
</FORM>
</BODY>
</HTML> 
```

# php - PHP & MySQL 获取选择值

> ID：13906082
> 
> 赞同：0
> 
> 时间：2012-12-16T22:24:28.307
> 
> 标签：php, mysql

我正在运行以下命令以从我的 MySQL 数据库中获取类型 ID 和名称。应显示两个结果。选择列表中显示了两个选项，但不存在 id 或 name，它们仅在页面上显示为空白。

```
function get_category_selector($form_name) {
if (isset($_SESSION['loggedin']['cur_category'])) {
    $curr = $_SESSION['loggedin']['cur_category'];
} else {
    $curr = -1;
}
$rtn = "";
$rtn .= '<select id="category" name="category">';
$rtn .= '<option value="-1"';
if ($curr == -1) {
    $rtn .= ' selected';
}
$rtn .= '>Select a Category</option>';
$DB = new mysql_db();
$DB->sql_connect();
$q = "SELECT DISTINCT (categories.categories_id), categories.categories_name FROM categories LEFT JOIN prod2cat ON prod2cat.prod2cat_cat = categories.categories_id LEFT JOIN products ON prod2cat.prod2cat_product = products.products_id LEFT JOIN prod2type ON products_id = prod2_product LEFT JOIN type ON prod2_type = type_id WHERE type.type_id =2 order by categories.categories_name asc";
$DB->query($q);
if ($DB->get_num_rows()) {
    $results = $DB->fetch_all_rows(MYSQL_ASSOC, NULL);
    foreach ($results as $key => $row) {
        $rtn .= '<option value="' . $row['Categories_ID'] . '"';
        if ($curr == $row['Categories_ID']) {
            $rtn .= ' selected';
        }
        $rtn .= '>' . trim($row['Categories_Name']) . '</option>';
    }
}
$rtn .= '</select>';

return $rtn; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T22:32:32.750

访问结果数组时，您必须对列名使用相同的大小写：

```
$rtn .= '<option value="' . $row['categories_id'] . '"';
if ($curr == $row['categories_id']) {
   $rtn .= ' selected';
}
$rtn .= '>' . trim($row['categories_name']) . '</option>'; 
```

或者您可以更改您的选择查询：

```
$q = "SELECT DISTINCT (categories.categories_id) Categories_ID,
      categories.categories_name Categories_Name; 
```

# java - 在JAVA中用线条绘制形状

> ID：13906086
> 
> 赞同：1
> 
> 时间：2012-12-16T22:24:51.907
> 
> 标签：java, lines, shapes, trigonometry

所以我在仅使用线条绘制形状时遇到了一个大问题。假设我开始从屏幕中间的一个点画一条线，并以 100 像素距离向前绘制，角度为 0，然后我使用 72 度角绘制另一条相同长度的线，依此类推，直到 360 度。它应该给我完美的五边形，其中一条线结束，另一条线从该点开始，但线在末端不相遇形状均匀的圆圈。我正在使用这个东西进行计算：

```
_endingPointX = (_currentPostisionX + distance * _cosinuses[_angle]);

_endingPointY = (_currentPostisionY + distance * _sinuses[_angle]); 
```

其中 _cosinuses 和 _sinuses 是双精度数组，其中包含 360 度中每一个的正弦值和余弦值。在画线时，我需要将这些值转换为整数。

drawLine(_currentPostisionX, _currentPostisionY, (int) _endingPointX, (int) _endingPointY);

我不知道如何解决这个问题并使线条在绘制形状的末端相遇。几天来一直试图弄清楚这一点，但我什么也没想到。

这是一个屏幕截图： ![在此处输入图像描述](../Images/358f25a7a80155b1abbbf7671d80d9a7.png)

问题已解决，感谢您的建议，这是我使用整数转换的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T22:48:06.750

在绘图前立即计算双精度和舍入的所有值。
不要用四舍五入的进一步计算。

要绘制五边形或正边形，请使用类似于：

```
 // number of corners of pentagon
    double numVertex = 5;
    // how much to change the angle for the next corner( of the turtle )
    double angleStep = 360.0 / numVertex;
    gc.moveTo(cx, cy - rad);
    for (int i= 1; i < numVertex; i++) {
         // total angle from 0 degrees
         double angle = i* angleStep;
         // px point of turtle is corner of pentagon
         double px = cx + rad * sin(angle * DEG_TO_RADIANS);
         // move turtle to
         gc.lineto((int)Math.round(px),
         (int)Math.round(py));
    }
     gc.lineTo(cx, cy - rad); 
```

如果您`lineTo`改为使用线，则点相遇的机会更高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T22:40:41.380

由于 sin 和 cos 函数的精度导致的舍入误差，它没有完美对齐。要解决此问题，您可以将起点存储为单独的变量，并将其用作最后一行的终点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T22:50:23.220

如果你只依赖`int`价值观，你会遇到准确性问题，因为这`sin(72°)`是不合理的，而`sin(90°)`当然不是。

但是您可以同时绘制[`Line2D`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/geom/Line2D.html)或`double`精确`float`绘制，或使用[`GeneralPath`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/geom/GeneralPath.html)[which uses `float`]。

# java-me - 在 J2ME 中播放声音时如何防止延迟？

> ID：13906088
> 
> 赞同：0
> 
> 时间：2012-12-16T22:25:24.373
> 
> 标签：java-me, audio

我需要立即播放声音，有什么可以做到的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:57:10.983

您必须先调用 Player 的 prefetch() 函数。之后，当您调用 start() 时，它将立即开始播放。可能您必须在启动画面期间（可能在不同的线程中）或在您想使用播放器之前的某个地方调用 prefetch()。

# android - Android 对话框关闭可防止填充列表视图活动

> ID：13906090
> 
> 赞同：0
> 
> 时间：2012-12-16T22:25:52.813
> 
> 标签：android, sqlite

我在主要活动上有一个带有 3 个按钮的应用程序。其中一个按钮是重置按钮，它下载、解析和填充 sql 数据库，并从本质上删除用户所做的所有更改。单击重置按钮时，会弹出一个警告对话框以确认操作。如果用户说“不”（即不想重置应用程序），则对话框关闭并且主菜单再次可见。然后，当用户单击 a 按钮以查看填充了数据库项目的列表视图时，除非我重新启动应用程序，否则不会发生这种情况。我不明白为什么会发生这种情况，并且 LogCat 中没有任何错误。

```
public void resetApp(View view) {
    //TODO progress dialog
    AlertDialog.Builder alertBuilder = new AlertDialog.Builder(this);
    alertBuilder.setTitle("Confirm reset");
    alertBuilder.setMessage("Are you sure you want reset the app and lose all changes?");
    alertBuilder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            // execute download task again
            new DownloadTask().execute(getApplicationContext());
        }
    });
    alertBuilder.setNegativeButton("No", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();
        }
    });
    AlertDialog alert = alertBuilder.create();
    alert.show();

    CandidatesDatabaseHelper dbHelper = new CandidatesDatabaseHelper(getApplicationContext());
    dbHelper.onReset(dbHelper.getWritableDatabase());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:25:13.143

当用户选择“是”时，需要执行这些行：

```
CandidatesDatabaseHelper dbHelper = new CandidatesDatabaseHelper(getApplicationContext());
dbHelper.onReset(dbHelper.getWritableDatabase());

```

# epub - 如何强制使用细空间的非断线

> ID：13906094
> 
> 赞同：1
> 
> 时间：2012-12-16T22:26:25.637
> 
> 标签：epub

我希望在字符之间留一个空格，不换行...

这是我正在谈论的内容的演示：

[http://jsfiddle.net/hGdXE/1/](http://jsfiddle.net/hGdXE/1/)

我也试过这个：

```
<span style="white-space:nowrap">&thinsp;</span> 
```

问题是此代码在 Kobo 电子书阅读器中不起作用。

有没有其他方法可以使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:44:11.817

对于non-break thin space的问题，基本上有[四种方法](http://www.cs.tut.fi/~jkorpela/html/french.html)： 1) 使用U+202F NARROW NO-BREAK SPACE，这将是一个纯字符级的解决方案，但是浏览器和字体支持是个问题。2) 使用 U+2009 THIN SPACE 并尝试使其不中断，正如您所尝试的那样。这主要是有效的，但它很笨拙，你需要包括来自薄空间每一侧的字符，就像在你的小提琴中一样。3) 使用正常的空格，U+0020 SPACE，并尝试使用 CSS 使其既不中断又适当变窄。4) 使用 U+00A0 NO-BREAK SPACE 并尝试使用 CSS 使其变窄。

总的来说，最后一种方法似乎是最好的方法。您需要将不间断空格包装在内联元素中并将其`display`属性设置为`inline-block`，这样`width`设置就会产生效果：

```
<span class=fine>&nbsp;</span> 
```

使用 CSS 代码

```
.fine {
  display: inline-block;
  width: 0.125em;
} 
```

我希望这适用于 Kobo 电子书阅读器。它应该，因为浏览器通常很好地支持不间断空格，只有 IE 中的一些例外，并且 CSS 样式很简单。

# javascript - mouseenter 和页面刷新上的 jQuery 动画

> ID：13906095
> 
> 赞同：1
> 
> 时间：2012-12-16T22:26:33.347
> 
> 标签：javascript, jquery, mouseevent

我有一个带有[jquery.color](http://code.jquery.com/color/jquery.color-2.1.0.js)的简单彩色动画。这是我的代码：

```
$(document).ready(function(){
    $('.fx_link').bind({
        mouseenter: function(e) {
            $(this).attr('originalColor', $(this).css('color'));
            $(this).animate({ color: "#999999" }, 'fast');
        },
        mouseleave: function(e) {
            $(this).animate({ color: $(this).attr('originalColor') }, 'fast');
            $(this).removeAttr('originalColor');
        }
    });
}); 
```

它非常好。但是，动画是针对菜单项的。如果鼠标在某个项目上，则动画开始。然后鼠标点击，页面刷新。鼠标在链接上，但它没有移动。只要鼠标移动一个像素，就会触发 mouseenter 事件（即使鼠标已经在链接上）并且有一个我认为是错误的动画。

我需要一些想法，例如：

```
$(this).bind({ mouseenter: function(e) {

    if( __ mouse is not already over $(this) __ ) 

        $(this).animate(...); } }); 
```

我已经尝试在 mouseenter、mouseover 上设置一些状态，但是......没办法

## 编辑：

完整的例子。将此另存为`h.html`

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="http://code.jquery.com/color/jquery.color-2.1.0.js"></script>
<script type="text/javascript">

$(document).ready(function(){

    $('.fx_link').bind({
        mouseenter: function(e) {
            console.log("enter");
            $(this).attr('originalColor', $(this).css('color'));
            $(this).animate({ color: "#999999" }, 'fast');
        },
        mouseleave: function(e) {

            console.log("leave");
            $(this).animate({ color: $(this).attr('originalColor') }, 'fast');
            $(this).removeAttr('originalColor');

        }
    });
});

</script>
<body>

<a class="fx_link" href="h.html">this is a link</a>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:02:26.020

对不起，我在手机上，所以代码可能是错误的（未经测试）。

**编辑**（现在测试）

```
// fix: bind mousemove to document, not links, sorry!
$(document).bind('mousemove', function(event) {
    $('.fx_link').bind('mouseenter', function(event) {
         //....
    }
    $(this).unbind(event);
}); 
```

**已编辑**

*   处理 2 种不同鼠标的完整示例如果 [at page refresh] 鼠标已经在链接内（只需设置颜色），则输入一个，当来自外部（动画颜色）时输入一个。

*   通过在开始时为所有链接设置 originalColors 来修复 originalColors 错误。

*   使用命名函数而不是匿名函数，因此很容易解除绑定（并且看起来也更清晰）。

这是代码：

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="http://code.jquery.com/color/jquery.color-2.1.0.js"></script>
<script type="text/javascript">

$(document).ready(function(){

    var $links=$('.fx_link');

    // save ALL originalColors so they are fixed forever
    $links.each(function() {$(this).attr('originalColor', $(this).css('color'));});

    $(document).bind('mousemove', handleMove);
    $links.bind('mouseenter', firstMouseEnter);
    $links.bind('mouseleave', anyMouseLeave);

    function handleMove(event) { // When mouse moves in document
        console.log("first move - setting up things..");
        $(document).unbind('mousemove',handleMove); // remove myself (no need anymore)
        $links.bind('mouseenter', otherMouseEnter); // istall second mouseenter
        $links.unbind('mouseenter',firstMouseEnter); // remove first mouseenter
    }

    function firstMouseEnter(event) { // Called before mouse is moved in document
        console.log("first enter");
        $(this).css('color','#999');
    }

    function otherMouseEnter(event) { // Called after mouse is moved in document
        console.log("other enter");
        $(this).animate({ color: "#999" }, 'fast');
    }

    function anyMouseLeave(event) {
        console.log("leave");
        $(this).animate({ color: $(this).attr('originalColor') }, 'fast');
    }

});

</script>
<body>

<a class="fx_link" href="h.html">this is a link</a>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T22:49:49.577

将带有“fx_link”类的菜单项悬停在其他颜色上时，这样做的目的是使其淡化为另一种颜色吗？在这种情况下，您很可能只使用带有 .fx_link:hover 的 css3 转换。然后，您可以根据需要自定义过渡。

```
a.fx_link{
color:red;
-webkit-transition-property: color;
  -webkit-transition-duration: 2.5s;
  -webkit-transition-timing-function: linear;
  -moz-transition-property: background color;
  -moz-transition-duration: 2.5s;
  -moz-transition-timing-function: linear;
  -o-transition-property: color;
  -o-transition-duration: 2.5s;
  -o-transition-timing-function: linear;
  -ms-transition-property: background color;
  -ms-transition-duration: 2.5s;
  -ms-transition-timing-function: linear;
  transition-property: color;
  transition-duration: 2.5s;
  transition-timing-function: linear;    
}

a.fx_link:hover{
    color:blue;
-webkit-transition-property: color;
  -webkit-transition-duration: 2.5s;
  -webkit-transition-timing-function: linear;
  -moz-transition-property: background color;
  -moz-transition-duration: 2.5s;
  -moz-transition-timing-function: linear;
  -o-transition-property: color;
  -o-transition-duration: 2.5s;
  -o-transition-timing-function: linear;
  -ms-transition-property: background color;
  -ms-transition-duration: 2.5s;
  -ms-transition-timing-function: linear;
  transition-property: color;
  transition-duration: 2.5s;
  transition-timing-function: linear;
} 
```

​</p>

# filemaker - 如何在一页上组织 3 层父/子关系？

> ID：13906100
> 
> 赞同：1
> 
> 时间：2012-12-16T22:27:24.733
> 
> 标签：filemaker

我的布局理论有问题，希望有人能提出解决方案。我有 3 层表，我试图将它们放在一页上（它们是具有很少字段的表）。一个表层代表商店，下一层代表从该商店收到的收据，最后一层代表该收据上的项目。每个关系都是下一个关系的父子关系。所以我现在的布局方式是主页上有商店信息，在这个页面内是一个收据门户。我发现门户无法嵌套，因此我尝试在收据上的项目列表的主页上放置另一个门户，这种工作确实允许列出项目，但是，它只列出项目第一张收据。我可以'

请注意，这是一个数据输入布局，因此所有门户都设置为允许从此页面添加。如果它只是显示，我知道我可以让项目门户显示所有项目并按收据外键过滤，但我想要的是从这个页面创建默认创建任何我想要的收据......

谁能解释我这样做的方法？我对 filemaker 还很陌生，并且大部分时间都在学习教程，所以任何清晰且愚蠢的证明解释都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-02T20:22:44.457

如果您在收据门户上有一个获取收据 ID 的脚本触发器，您可以将其放在系统表的全局字段中。您可以将行项目表中收款外键的默认值设置为该全局字段。然后，只要您在全局字段中具有正确的 id，它就会在您创建新帖子时自动获取该 id。

# java - Mac 上的 GLSL 着色器错误，但 Windows 上没有：无法从 'const int' 转换为 '4-component vector of float'

> ID：13906101
> 
> 赞同：6
> 
> 时间：2012-12-16T22:27:29.543
> 
> 标签：java, opengl, glsl, libgdx, glsles

我是着色器的新手，我昨天开始玩其中的一些。它们在我的 Windows PC 上编译得很好，但是当它们在 Mac 上运行时，两者都有一个错误：

> 错误：0:14：“=”：无法从“const int”转换为“float 的 4 分量向量”

在 Android 上，只有第二个着色器给了我一个错误。它有上面的错误，提到没有匹配的函数点被重载。

他们使用相同的顶点着色器：

```
attribute vec4 a_position;
attribute vec4 a_color;
attribute vec2 a_texCoord0;

uniform mat4 u_projTrans;

varying vec4 vColor;
varying vec2 vTexCoord;

void main() {
    vColor = a_color;
    vTexCoord = a_texCoord0;
    gl_Position =  u_projTrans * a_position;
} 
```

一个片段着色器（Mac 上的错误）：

```
#ifdef GL_ES
#define LOWP lowp
precision mediump float;
#else
#define LOWP
#endif

varying LOWP vec4 vColor;
varying vec2 vTexCoord; 
uniform sampler2D u_texture;
void main() {
    vec4 texColor = texture2D(u_texture, vTexCoord); 
    texColor.rgb = 1.0 - texColor.rgb;
    gl_FragColor = texColor * vColor;
} 
```

另一个片段着色器（mac和android上的错误）：

```
#ifdef GL_ES
#define LOWP lowp
precision mediump float;
#else
#define LOWP
#endif

varying LOWP vec4 vColor;
varying vec2 vTexCoord; 
uniform sampler2D u_texture;            
void main() {
    vec4 texColor = texture2D(u_texture, vTexCoord); 
    vec3 gray = vec3(0.2125, 0.7154, 0.0721);
    vec4 color = dot(gray, texColor);
    color.a = texColor.a;
    gl_FragColor = color * vColor;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T00:47:44.873

在第一个着色器中，您在这一行有错误 -`texColor.rgb = 1.0 - texColor.rgb;`您需要编写：

```
texColor.rgb = vec3(1.0) - texColor.rgb; 
```

在第二个着色器中，这一行有错误 -`vec4 color = dot(gray, texColor);`灰色是 vec3，texcolor 是 vec4。vec3 和 vec4 之间的点积是什么？没有这样的`dot`功能可以做到这一点。您可以调用`float dot(vec3, vec3)`或`float dot(vec4, vec4)`。所以将该行更改为：

```
vec4 color = vec4(dot(gray, texColor.rgb)); 
```

或者

```
vec4 color = vec4(dot(vec4(gray, ???), texColor)); // put in ??? float number you want 
```

（下次请告诉我们究竟发生在哪一行错误）

# magento - Magento getIdentifier(); 总是回到“家”

> ID：13906103
> 
> 赞同：1
> 
> 时间：2012-12-16T22:27:43.553
> 
> 标签：magento

在每个站点上，magento 函数 getIdentifier(); 返回“家”。

有谁知道为什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T09:57:55.343

停用页脚缓存为我解决了它

# c# - 在 .NET 中分析 GIS/地图数据

> ID：13906106
> 
> 赞同：1
> 
> 时间：2012-12-16T22:28:04.223
> 
> 标签：c#, .net, api, geolocation, gis

我最近继承了一个项目，该项目使用 GIS 地图数据根据纬度/经度坐标定义“区域”。我得到的关于我正在使用的东西的背景信息几乎为零。基本上，我得到了一个文件夹，其中包含以下几种文件类型：

*   .sbn
*   .sbx
*   .shp
*   .shx
*   .mxd

我被告知要看看我能用它们做什么。所以我假设我可以通过 .NET 与他们进行交互，但我不知道任何可用的 API 可以做我需要做的事情。

这是我所拥有的，以及我需要能够做的：

*   我有 GIS 文件，其中包含地图数据，大概由定义“区域”的线条以及线条的纬度和经度坐标组成。
*   我需要能够按纬度/经度查询数据

任何人都可以建议一个可以做到这一点的API吗？我知道这个问题可能很适合这个网站，但我认为它可能足够通用。

* * *

## TL;博士：

任何人都可以为 GIS 数据查询建议一个 .NET api 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:08:40.783

这是我用来处理 SHP 文件的一个非常棒的 AP​​I。

查看[http://shapefile.codeplex.com/](http://shapefile.codeplex.com/)

还可以查看 MapWindow，它是一个用 .Net 编写的 GIS 工具，非常方便。

[http://www.mapwindow.org/](http://www.mapwindow.org/)

如果您正在寻找付费 API，请查看 ThinkGeo，他们有一些很好的 .Net API 用于处理 GIS 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T22:36:37.147

这些文件是 Esri Shp 文件。.mxn 我不知道。通常所有 4 或 5 个文件一起代表地理矢量数据。
搜索关键词“形状文件阅读器”
（我只知道 java 的库）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-14T09:10:44.203

首先，这些文件是 ESRI Shapefile。mxd 是 arcmap 项目/地图文件，其中包含这些 gis 数据的路径。

其次，需要逐`lat/lon`点查询这些数据。我推荐 [nettopologysuit](https://github.com/NetTopologySuite/NetTopologySuite)库来处理空间分析问题。

这是一些伪代码：

```
var shapefile=new shapefile("XXX");
//pointToEnv offset depends on your data
double offset=0.0001;
var queryZoom= new envolope(point.x-offset,point.y- 
offset,point.x+offset,point.y+offset);
//spatial query
var queryFeatures= shapefile.queryByEnvolope(queryZoom);
//tranverse your result and get what you need. 
```

# python - JSON web service correct encoding using django

> ID：13906115
> 
> 赞同：2
> 
> 时间：2012-12-16T22:30:00.590
> 
> 标签：python, django, json, character-encoding

I'm building a json web service which contains strings with characters like é,ñ,Á,etc.

Using python I found this snippet of code that works perfectly when I run it in console:

```
import json
string = "NIÑO, ÁRBOL, HÉROE"
print json_dumps({'string': string}, ensure_ascii=False, encoding='utf-8') 
```

The thing is that I'm using Django, and it doesn't look like it is as straightforward as the code above. Here's a peek of what I'm doing at my views.py file

```
import json
from models import *
from django.http import HttpResponse
from django.db.models import Q

def jsonService(request):
    # The following line performs a query at the db
    myObjects = MyObjects.objects().filter( Q(...) ) 

    result = {"string": myObject[0].field } # let's say myObject[0].field contains "NIÑO, ÁRBOL, HÉROE"

    # Prepares a response
    response = HttpResponse(json.dumps(result, ensure_ascii=False, encoding="utf-8"))
    # Sets the heades of content type and its charset
    response['Content-type'] = 'application/json; charset=utf-8'

    # Returns the response we prepared
    return response 
```

The output of this code is:

```
{ 
    string : "NIÃ´O, ÃRBOL, HÃ%ROE"
} 
```

if I apply python's function repr() to the string myObject[0].field when I assemble the result object, to my surprise the result is:

```
{ 
    string : "NI\xc3\u2018O, \xc3\x81RBOL, H\xc3\u2030ROE"
} 
```

What I can infere from here is that maybe the strings that the db delivers (which are unicode strings acording to python's type()) are encoded in a format other that utf-8, but it thows me the following error:

```
'ascii' codec can't decode byte 0xc3 in position 14: ordinal not in range 
```

Those escaped characters seems very strange to me, not to mention that I don't want unicode strings but the accented characters (something like {string: "NIÑO, ÁRBOL, HÉROE"}), I know it's possible because I've seen some google services work with accents.

Some advise? maybe I'm doing something incredibly wrong that I haven't realized, that's why I described the full process.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T04:41:28.970

Try this in your views.py works fine for me

```
from django.utils import simplejson
from django.core.serializers.json import DjangoJSONEncoder

def jsonService(request):

    myObjects = MyObjects.objects().filter( Q(...) )
    fields = [x.field for x in myObjects] # creates a list of all fileds 

    # it will create JSON object
    result=simplejson.dumps({
        'fileds':fileds,
     })

    return HttpResponse(result, mimetype='application/json') 
```

# php - 代理上的 setcookie 不起作用

> ID：13906118
> 
> 赞同：1
> 
> 时间：2012-12-16T22:30:26.457
> 
> 标签：php, apache, cookies, proxy, setcookie

由于同源政策，我想通过代理将我的表单发送到另一个网站。因此，将其添加到虚拟主机配置中：

```
ProxyPass /submit http://another.website.com/
ProxyPassReverse /submit http://another.website.com/ 
```

这样可行。我的表格成功发布，没有错误。但是，有两个问题：

1.  cookie 不符合请求。我想包含`another.website.com`与我的`AJAX`请求相关的 cookie。

2.  我在目标页面中设置了一个 cookie（我通过代理将我的表单发布到它），使用以下代码：

    ```
    setcookie("TestCookie", "blah blah", time() + 3600, '/', '.another.website.com'); 
    ```

    但是，当尝试在[http://another.website.com/search](http://another.website.com/search)上获取该 cookie 时，我找不到这个。并且`$_COOKIE['TestCookie']`为 NULL。（萤火虫也没有显示那个cookie）

**编辑：**第二个问题解决了。（[我不能为另一个域设置 cookie](https://stackoverflow.com/questions/6761415/how-to-set-a-cookie-for-another-domain)，我做了什么）。

**编辑：**表单位于“localhost”，我想将其提交到“another.website.com”。

# c# - 如何检查对象的 ArrayList 是否包含我的对象？

> ID：13906119
> 
> 赞同：0
> 
> 时间：2012-12-16T22:30:34.093
> 
> 标签：c#, .net, arraylist, contains

我有一个`ArrayList`对象。其中一些对象属于此类：

```
public class NewCompactSimilar
{
    public List<int> offsets;
    public List<String> words;
    public int pageID;

    public NewCompactSimilar()
    {
        offsets = new List<int>();
        words = new List<string>();          
    }
} 
```

但是列表也可以包含其他类的对象。

我需要检查 my 是否`ArrayList`包含与我的对象相同的对象。

那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:36:59.103

```
if (words.Contains(myObject)) 
```

ArrayList 有一个名为 Contains 的方法，该方法检查 Object 是否具有与您所拥有的相同的 Reference。如果要检查值是否相同，但引用不同，则必须编码：

```
private bool GetEqual(String myString)
{
    foreach (String word in words)
    {
         if (word.Equals(myString))
            return true;
    }
    return false;
} 
```

我希望就是这样:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T22:40:06.553

列表是您的`ArrayList`，项目是`NewCompactSimilar`您要搜索的：

```
list.OfType<NewCompactSimilar>().
                FirstOrDefault(o => o.offsets == item.offsets &&
                o.words == item.words &&
                o.pageID == item.pageID); 
```

要运行深度相等比较，请实现以下方法：

```
public bool DeepEquals(NewCompactSimilar other)
{
    return offsets.SequenceEqual(other.offsets) &&
            words.SequenceEqual(other.words) &&
            pageID == other.pageID;
} 
```

然后使用以下 LINQ 链：

```
list.OfType<NewCompactSimilar>().
                FirstOrDefault(o => o.DeepEquals(item)); 
```

# bison - 使用 Bison 的后缀计算器

> ID：13906121
> 
> 赞同：-1
> 
> 时间：2012-12-16T22:30:39.380
> 
> 标签：bison, lex, flex-lexer

您好我一直在尝试创建一个简单的后缀计算器。

以下是片段：

```
 %token NUM
    %left '-' '+'
    %left '*' '/'
    %left NEG     /* negation--unary minus */
    %right '^'    /* exponentiation        */

         %% /* Grammar rules and actions follow.  */

    input:
           /* empty */
         | input line
         ;

         line:
           '\n'
         | exp '\n'      { printf ("%.10g\n", $1); }
         ;

         exp:
           NUM           { $$ = $1;           }

         | '-' exp  %prec NEG { $$ = -$2;     }
         | exp exp '+'   { $$ = $1 + $2;      }
         | exp exp '-'   { $$ = $1 - $2;      }
         | exp exp '*'   { $$ = $1 * $2;      }
         | exp exp '/'   { $$ = $1 / $2;      }
         | exp exp '^'   { $$ = pow ($1, $2); }  /* Exponentiation */
         | exp 'n'       { $$ = -$1;          }  /* Unary minus    */
         ;
         %%

   1 2 + 3 -      =>                   0 \n
        1 -2 -      =>                 3 \n
        2 3e+2 + 3 -      =>          299 \n
        1 2 3 + -           =>         -4 \n 
```

只有，1 +2 - =>：语法错误！！为什么会这样？我应该怎么办 ？我什至尝试创建一个一元 + 运算符，但它没有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:39:54.593

您应该升级您的词法分析器以将带符号的数字直接识别为数字。那么你不需要特殊规则`'-' exp`，或者`%left NEG`优先行。

# c++ - std::accumulate 可能溢出

> ID：13906122
> 
> 赞同：14
> 
> 时间：2012-12-16T22:30:48.337
> 
> 标签：c++

我有一个函数可以生成一些大数，将它们放入一个向量中，对它们求和，然后返回总和。我一直在用`std::accumulate`它来计算总和，但是，经过一些测试，我意识到它没有返回预期的总和。

```
typedef unsigned long long ull;
ull sum(ull kLimit)
{
    ull testSum = 0;
    vector<ull> numbers;
    for (ull n = 0; n < kLimit; ++n) {
        if (/* number I want */) {
            numbers.push_back(n);
            // directly sum for testing
            testSum += n;
        }
    }
    ull sum = accumulate(begin(numbers), end(numbers), 0);
    return sum;
} 
```

我希望`sum`和的值`testSum`相等。但是，总和等于`470064632`，测试总和等于`82074443256`，这是期望值。

我尝试将限制减少到一个更小的数字（500），并且 和 的值`sum`相等`testSum`。这让我认为错误是溢出的`accumulate`，但我不确定问题可能是什么。我正在为 x64 平台使用 VS2012 进行编译。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-16T22:39:16.257

它看起来确实像一个溢出错误：数字是 0x131C049DF8 和 0x1C049DF8。

尝试将您的最终参数`0`转换为 type `ull`，因为累积返回的类型是该最终参数的类型：

```
T accumulate(InputIt first, InputIt last, T value) { ... } 
```

# python - Heroku 教程错误运行 python manage.py syncdb 更新本地数据库

> ID：13906127
> 
> 赞同：1
> 
> 时间：2012-12-16T22:31:45.280
> 
> 标签：python, django, postgresql, heroku, python-2.7

这个问题之前已经被问过并[在这里](https://stackoverflow.com/questions/11618800/error-when-running-python-manage-py-syncdb-locally-but-no-error-when-running)得到了回答，我理解我为什么会收到错误的原因，但是我仍然不清楚给出的答案中的解决方案。我应该添加哪些代码或更改才能使其正常工作？我是否需要更改

```
 DATABASES['default'] =  dj_database_url.config() 
```

在我的设置里？本教程对此不是很清楚。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:10:20.920

设置并使用`virtualenv`DATABASE_URL 配置变量，或者使用`DATABASE_URL=postgres:///databasename <how you'd normally run your program>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:18:51.363

最终起作用的是添加：

```
import dj_database_url
DATABASES['default'] =  dj_database_url.config(default='postgres://<user>:<password>@localhost:5432/<name>') 
```

而不仅仅是

```
import dj_database_url
DATABASES['default'] =  dj_database_url.config() 
```

就像教程所说的那样。然后在尝试运行时

```
python manage.py runserver 
```

我仍然得到错误

```
ImportError: DLL load failed: %1 is not a valid Win32 application. 
```

然后我能够弄清楚我需要使用的stickpeople构建是64位而不是教程让我使用的32位，并且64位构建是：

```
easy_install http://www.stickpeople.com/projects/python/win-psycopg/psycopg2-2.4.5.win-amd64-py2.7-pg9.1.3-release.exe 
```

我不知道这是否是最好的方法，但为了使用 64 位版本，我从头开始。现在它终于起作用了。希望这也可以用来帮助其他也被卡住的人。heroku 教程有很多漏洞。

# magento - CMS 页面上的 Magento 分层产品集合

> ID：13906130
> 
> 赞同：2
> 
> 时间：2012-12-16T22:31:52.403
> 
> 标签：magento, magento-1.4, layered-navigation

我需要代码来获取产品集合，因为它被层过滤器过滤。所以我们需要收集并对其应用一些过滤器。

例如，我有 CMS 页面，并在其上按代码显示一些块，例如 {{block type=.... template=....}}。如何显示 30 个不带工具栏的产品，但它们在页面 http://somedomain/category?manufacturer=3&size=5 上列出（所以我们有一些类别名称和几个过滤器值，过滤器和类别可以不同于 1 个块给另一个）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:26:43.717

Yoast 创建了一个模块，用于将产品过滤到 CMS 登录页面中。您可以在这里查看：http: [//yoast.com/landing-pages-module-magento/](http://yoast.com/landing-pages-module-magento/)

该模块允许您过滤规格和类别。

# java - JavaFX：如果 ObservableList 的元素发生更改，则更新 ListView

> ID：13906139
> 
> 赞同：33
> 
> 时间：2012-12-16T22:33:00.887
> 
> 标签：java, listview, javafx-2

我想使用 JavaFX ListView 控件显示人员列表（用 POJOS 编码，并包含姓名和姓氏属性）。我创建了 ListView 并将人员列表添加为 ObservableList。如果我在 ObservableList 中删除或添加新人，一切正常，但 POJO 中的更改不会触发 ListView 的更新。我必须从 ObservableList 中删除并添加修改后的 POJO 才能触发 ListView 的更新。如果没有上述解决方法，是否有可能在 POJOS 中显示更改？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-01-29T15:11:22.873

您的问题有几个方面（我不完全确定哪个方面是问题:-) 我假设您的 POJO 以某种方式通知听众有关更改，可能是通过成为一个成熟的 JavaBean。也就是说，它通过根据需要或通过其他方式触发 propertyChange 事件来遵守其通知合同 - 否则，无论如何您都需要手动推送更改。

使 FX-ObservableList 通知其自己的侦听器有关包含元素的突变的基本方法是使用自定义 Callback 对其进行配置，该回调提供一组 Observables。如果元素具有 fx-properties，您将执行以下操作：

```
Callback<Person, Observable[]> extractor = new Callback<Person, Observable[]>() {

    @Override
    public Observable[] call(Person p) {
        return new Observable[] {p.lastNameProperty(), p.firstNameProperty()};
    }
};
ObservableList<Person> teamMembers = FXCollections.observableArrayList(extractor);
// fill list 
```

如果 pojo 是一个成熟的核心 javaBean，它的属性必须通过使用 JavaBeanProperty 来适应 fx-properties，fi：

```
Callback<PersonBean, Observable[]> extractor = new Callback<PersonBean, Observable[]>() {
    List<Property> properties = new ArrayList<Property>();
    @Override
    public Observable[] call(PersonBean arg0) {
        JavaBeanObjectProperty lastName = null;
        JavaBeanObjectProperty age = null;
        try {
            lastName = JavaBeanObjectPropertyBuilder.create()
                    .bean(arg0).name("lastName").build();
            age = JavaBeanObjectPropertyBuilder.create()
                    .bean(arg0).name("age").build();
            // hack around losing weak references ... 
            properties.add(age);
            properties.add(lastName);
        } catch (NoSuchMethodException e) {
            e.printStackTrace();
        }
        return new Observable[] {lastName, age};
    }

};
ObservableList<Person> teamMembers = FXCollections.observableArrayList(extractor);
// fill list 
```

注意一个警告：如果没有在某处保留对改编属性的强引用，它们将很快被垃圾收集 - 然后似乎根本没有任何效果（一次又一次陷入陷阱，不确定是否有避免的好策略它）。

对于任何其他（可能是粗粒度的）通知方式，您可以实现自定义适配器：下面的适配器侦听 bean 的所有 propertyChanges。监听其他类型的事件将是非常类似的。

```
/**
 * Adapt a Pojo to an Observable.
 * Note: extending ObservableValue is too much, but there is no ObservableBase ...
 *
 * @author Jeanette Winzenburg, Berlin
 */
public class PojoAdapter<T> extends ObservableValueBase<T> {

    private T bean;
    private PropertyChangeListener pojoListener;
    public PojoAdapter(T pojo) {
        this.bean = pojo;
        installPojoListener(pojo);
    }

    /**
     * Reflectively install a propertyChangeListener for the pojo, if available.
     * Silently does nothing if it cant.
     * @param item
     */
    private void installPojoListener(T item) {
        try {
            Method method = item.getClass().getMethod("addPropertyChangeListener", 
                  PropertyChangeListener.class);
            method.invoke(item, getPojoListener());
        } catch (NoSuchMethodException | SecurityException | IllegalAccessException | 
                  IllegalArgumentException | InvocationTargetException e) {
            e.printStackTrace();
        }
    }
    /**
     * Returns the propertyChangeListener to install on each item.
     * Implemented to call notifyList.
     * 
     * @return
     */
    private PropertyChangeListener getPojoListener() {
        if (pojoListener == null) {
            pojoListener = new PropertyChangeListener() {

                @Override
                public void propertyChange(PropertyChangeEvent evt) {
                    fireValueChangedEvent();
                }
            };
        }
        return pojoListener;
    }

    @Override
    public T getValue() {
        return bean;
    }

} 
```

它的用法和上面一样（越来越无聊，不是吗:-)

```
Callback<PersonBean, Observable[]> extractor = new Callback<PersonBean, Observable[]>() {

    @Override
    public Observable[] call(PersonBean arg0) {
        return new Observable[] {new PojoAdapter<PersonBean>(arg0)};
    }

};
ObservableList<Person> teamMembers = FXCollections.observableArrayList(extractor);
// fill list 
```

[不幸的是，由于仅在 jdk8 中修复](https://javafx-jira.kenai.com/browse/RT-28397)的错误，具有如此酷列表的 ListView 的自动更新将无法可靠地工作。在早期版本中，您回到了第 1 格 - 以某种方式监听更改，然后手动更新列表：

```
protected void notifyList(Object changedItem) {
    int index = list.indexOf(changedItem);
    if (index >= 0) {
        // hack around RT-28397
        //https://javafx-jira.kenai.com/browse/RT-28397
        list.set(index, null);
        // good enough since jdk7u40 and jdk8
        list.set(index, changedItem);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-17T18:51:11.077

您可以通过`ListView.EditEvent`调用从. 例如，`ListView``ListView::fireEvent``javafx.scene.Node`

```
/**
 * Informs the ListView that one of its items has been modified.
 *
 * @param listView The ListView to trigger.
 * @param newValue The new value of the list item that changed.
 * @param i The index of the list item that changed.
 */
public static <T> void triggerUpdate(ListView<T> listView, T newValue, int i) {
    EventType<? extends ListView.EditEvent<T>> type = ListView.editCommitEvent();
    Event event = new ListView.EditEvent<>(listView, type, newValue, i);
    listView.fireEvent(event);
} 
```

或者作为一个班轮，

```
listView.fireEvent(new ListView.EditEvent<>(listView, ListView.editCommitEvent(), newValue, i)); 
```

这是一个示例应用程序来演示它的使用。

```
/**
 * An example of triggering a JavaFX ListView when an item is modified.
 * 
 * Displays a list of strings.  It iterates through the strings adding
 * exclamation marks with 2 second pauses in between.  Each modification is
 * accompanied by firing an event to indicate to the ListView that the value
 * has been modified.
 * 
 * @author Mark Fashing
 */
public class ListViewTest extends Application {

    /**
     * Informs the ListView that one of its items has been modified.
     *
     * @param listView The ListView to trigger.
     * @param newValue The new value of the list item that changed.
     * @param i The index of the list item that changed.
     */    
    public static <T> void triggerUpdate(ListView<T> listView, T newValue, int i) {
        EventType<? extends ListView.EditEvent<T>> type = ListView.editCommitEvent();
        Event event = new ListView.EditEvent<>(listView, type, newValue, i);
        listView.fireEvent(event);
    }

    @Override
    public void start(Stage primaryStage) {
        // Create a list of mutable data.  StringBuffer works nicely.
        final List<StringBuffer> listData = Stream.of("Fee", "Fi", "Fo", "Fum")
                .map(StringBuffer::new)
                .collect(Collectors.toList());
        final ListView<StringBuffer> listView = new ListView<>();
        listView.getItems().addAll(listData);
        final StackPane root = new StackPane();
        root.getChildren().add(listView);
        primaryStage.setScene(new Scene(root));
        primaryStage.show();
        // Modify an item in the list every 2 seconds.
        new Thread(() -> {
            IntStream.range(0, listData.size()).forEach(i -> {
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println(listData.get(i));
                Platform.runLater(() -> {
                    // Where the magic happens.
                    listData.get(i).append("!");
                    triggerUpdate(listView, listData.get(i), i);
                });            
            });
        }).start();
    }

    public static void main(String[] args) {
        launch(args);
    }

} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-27T01:13:00.313

使用弗朗西斯的想法我做了：

```
 list.set(list.indexOf(POJO), POJO); 
```

可能不是最好的解决方案，但有效。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-10T17:59:21.397

由于 Java 8u60 ListView 官方支持`refresh()`手动更新视图的方法。Java文档：

> 这在基础数据源以 ListView 本身未观察到的方式发生更改的情况下很有用。

我在此问题上成功使用此方法更新了 ListView 中项目的内容。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-11T20:53:22.340

您应该获取可观察列表并使用 list.set(selectedIndex, object); 更新对象 我的示例显示带有句柄方法的按钮。在此我在 fx 视图中编辑了列表用户

```
Button commit = new Button("Commit");
    commit.setOnAction(new EventHandler<ActionEvent>() {
        public void handle(ActionEvent evt) {
            int selectedIndex = tableView.getSelectionModel().getSelectedIndex();
            User user = tableView.getSelectionModel().getSelectedItem();
            user.setId(Integer.parseInt(idTF.getText()));
            user.setName(nameCB.getValue());
            user.setSurname(srnameTF.getText());
            user.setAddress(addressTF.getText());
            service.getUsers().set(selectedIndex, user);
            tableView.toFront();
        }
    }); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-23T04:35:26.907

```
ObservableList<String> items = FXCollections.observableArrayList();
ListView lv;
lv.setItems(items);
items.add();
items.remove; 
```

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2014-01-19T07:03:47.150

尝试这个

```
 list.remove(POJO);
  list.add(index,POJO); 
```

# ios - 使用 UIActivityViewController 创建和使用 .csv 文件

> ID：13906140
> 
> 赞同：11
> 
> 时间：2012-12-16T22:33:07.260
> 
> 标签：ios, uiactivityviewcontroller

所以我正在创建一个 .csv 文件，然后允许用户使用 UIActivityViewController 共享它。

我创建 csv 文件的代码将返回文件的 NSURL：

```
- (NSURL *)exportToCSV
{
    NSString *docPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0];
    NSString *filePath = [docPath stringByAppendingPathComponent:@"results.csv"];

    if (![[NSFileManager defaultManager] fileExistsAtPath:docPath]) {
        [[NSFileManager defaultManager] createFileAtPath:filePath
                                                contents:nil
                                              attributes:nil];
    }

    NSMutableString *contents = [NSMutableString stringWithCapacity:0];

    //fill contents with data in csv format
    // ...

    NSFileHandle *fileHandle = [NSFileHandle fileHandleForUpdatingAtPath:filePath];
    [fileHandle writeData:[contents dataUsingEncoding:NSUTF8StringEncoding]];
    [fileHandle closeFile];

    return [NSURL fileURLWithPath:filePath];
} 
```

然后我的活动使用该 NSURL 来启动 UIActivityViewController：

```
- (IBAction)shareButtonPressed:(id)sender {

    NSArray *activityItems = @[@"results.csv", [self.object exportToCSV]];
    UIActivityViewController *shareScreen = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];

    [self presentViewController:shareScreen animated:YES completion:nil];
} 
```

当我选择邮件选项时，未附加 csv 文件。它只有文本“results.csv”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T23:25:28.657

问题似乎在你的`fileExistsAtPath`行中。您似乎在说“如果文档目录不存在，则创建文件”。这当然不对。

就个人而言，我会失去那些东西并将其更改为

```
- (NSURL *)exportToCSV
{
    NSString *docPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0];
    NSString *filePath = [docPath stringByAppendingPathComponent:@"results.csv"];

    NSMutableString *contents = [NSMutableString stringWithCapacity:0];

    //fill contents with data in csv format
    // ...

    NSError *error;

    [contents writeToFile:filePath
               atomically:YES
                 encoding:NSUTF8StringEncoding
                    error:&error];

    // check for the error

    return [NSURL fileURLWithPath:filePath];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-03T21:51:30.733

我想分享我的 UIActivityViewController 解决方案并将文本分享为 CSV 文件。此解决方案适用于通过邮件共享，甚至保存到 Dropbox。

```
@IBAction func shareCsv(sender: AnyObject) {
    //Your CSV text
    let str = self.descriptionText.text!
    filename = getDocumentsDirectory().stringByAppendingPathComponent("file.csv")

    do {
        try str.writeToFile(filename!, atomically: true, encoding: NSUTF8StringEncoding)

        let fileData = NSURL(fileURLWithPath: filename!)

        let objectsToShare = [fileData]
        let activityVC = UIActivityViewController(activityItems: objectsToShare, applicationActivities: nil)

        self.presentViewController(activityVC, animated: true, completion: nil)

    } catch {
        print("cannot write file")
        // failed to write file – bad permissions, bad filename, missing permissions, or more likely it can't be converted to the encoding
    }

}

func getDocumentsDirectory() -> NSString {
    let paths = NSSearchPathForDirectoriesInDomains(.DocumentDirectory, .UserDomainMask, true)
    let documentsDirectory = paths[0]
    return documentsDirectory
} 
```

希望能帮助到你！:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-14T12:43:40.487

这对我来说是 Swift 3 版本，在 Mail 中作为附件工作并保存在 Dropbox 中。

```
var csvDetailsString = ""

for myObject in myObjectsArray {
    csvDetailsString = csvDetailsString.appending(myObject.someText)
    csvDetailsString = csvDetailsString.appending(",")
    csvDetailsString = csvDetailsString.appending("More Stuff")
    csvDetailsString = csvDetailsString.appending("\n")

}

let fileName = "Output"
let docDirectory = try? FileManager.default.url(for: .documentDirectory, in: .userDomainMask, appropriateFor: nil, create: true)
if let fileURL = docDirectory?.appendingPathComponent(fileName).appendingPathExtension("csv") {
    do {
        try csvDetailsString.write(to: fileURL, atomically: true, encoding: .utf8)

        let objectsToShare = [fileURL]
        let activityVC = UIActivityViewController(activityItems: objectsToShare, applicationActivities: nil)

        activityVC.excludedActivityTypes = [UIActivityType.addToReadingList]
        self.present(activityVC, animated: true, completion: nil)

    } catch let error as NSError {
        print("Failed writing to URL: \(fileURL), Error: " + error.localizedDescription)
    }
} 
```

# ruby - 返回 Ruby 中二维整数数组中最大数的索引

> ID：13906141
> 
> 赞同：-2
> 
> 时间：2012-12-16T22:33:12.423
> 
> 标签：ruby, multidimensional-array

我正在尝试在 ruby​​ 中返回数组数组的最大值

对于一维数组，这有效

```
arr = [99, 3, 14, 11, 1, 12]
position = arr.each_index.max 
```

如何在 ruby​​ 中为多维数组实现相同的功能

```
arr = [[99, 3, 14], [11, 1, 12], [1.....] 
```

我尝试使用 flatten 然后找到最大值的索引并尝试计算列和行但没有得到正确的结果并且感觉不对，有没有一种干净的方法可以用 ruby​​ 实现这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:53:37.033

这应该工作

```
arr.map(&:max).max 
```

要查找索引，请尝试：

```
1.9.3p125 :018 > arr = [[99, 3, 14], [11, 1, 12], [1,10]]
 => [[99, 3, 14], [11, 1, 12], [1, 10]] 
1.9.3p125 :019 > arr.map{|sub| sub.each_with_index.max}.each_with_index.max_by{|sub_max| sub_max[0]}
 => [[99, 0], 0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T01:03:21.353

首先你得到最大值：

```
m = arr.flatten.max
#=> 99 
```

那么听起来你要么想要包含 m 的数组的索引：

```
arr.index{|x| x.include? m}
#=> 0 
```

或者那个索引加上 m 在那个数组中的索引

```
[i = arr.index{|x| x.include? m}, arr[i].index(m)]
#=> [0, 0] 
```

# html - 添加带有图像和文本的锚的最佳方法是什么？

> ID：13906145
> 
> 赞同：0
> 
> 时间：2012-12-16T22:33:37.960
> 
> 标签：html, css

我正在尝试制作一个 HTML 锚点，其中包含一个顶部带有可见文本图例的图像。我的代码是：

```
<li class="grelha lin2 col4">
    <a href="#">
    <img src="img/imagem.gif" alt="Proj">
    <p class="leg normal">Proj</p>
    </a>
</li> 
```

CSS是：

```
.leg {
    width: 112px;
    height: 12px;
    position: relative;
    bottom: 23px;
    vertical-align: bottom;
    text-align: center;
    padding: 4px;
    font-size: 12px;
    font-size: 1.2em;
    font-weight: bold;
    user-select: none;
    display: block;
    z-index: 1000;
}

.nav {
    color: #ccc;
}

.normal {
    background-color: rgba(255,255,255,0.5);
    color: black;
} 
```

`li`视觉上一切都很好，但在120x120 像素的框下方继续检测到链接。但视觉上什么都没有。

问题是：如何实现在 SEO 中运行良好的相同结果，并允许我让这个框靠近另一个使用正确链接的框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:14:49.120

在这里使用`<span>`更有意义，因为它是内联元素而不是`<p>`块元素

```
<li class="grelha lin4 col1"> 
     <a href="#"> 
         <img src="img/imagem.gif" alt="Proj"> 
         <span>Proj</span>
     </a> 
</li>​ 
```

而不是使用 css 以您想要的方式对其进行样式设置

# c++ - 从 C 代码库对 C++ 中 unsigned char * 的 strchr 进行微创更改？

> ID：13906150
> 
> 赞同：2
> 
> 时间：2012-12-16T22:34:10.657
> 
> 标签：c++, c, unsigned-char, strchr

我正在尝试将 C 代码库编译为 C++，调整一些包含。它用于`strchr()`无符号字符指针，例如：

```
#include <string.h>
#include <stdio.h>

// Cannot modify this file with any non-C-isms, but let's say an include can
// be changed (although all things being equal I'd rather not)
#include <SomethingICanChange.h>

int main(int argc, char* argv[]) {
    unsigned char b = 'B';
    unsigned char const * str = "ABC";
    unsigned char const * pos = strchr(str, b);
    if (pos) {
        printf("position is %d\n", pos - str);
    }
    return 0;
} 
```

这会导致 C++ 中的错误（原因在别处解释）......即使使用`-fpermissive`.

```
test.c: In function ‘int main(int, char**)’:
test.c:6:33: warning: invalid conversion from ‘const char*’ to ‘const unsigned char*’ [-fpermissive]
test.c:7:46: error: call of overloaded ‘strchr(const unsigned char*&, unsigned char&)’ is ambiguous
test.c:7:46: note: candidates are:
In file included from test.c:1:0:
/usr/include/string.h:215:14: note: char* strchr(char*, int) <near match>
/usr/include/string.h:215:14: note:   no known conversion for argument 1 from ‘const unsigned char*’ to ‘char*’
/usr/include/string.h:217:22: note: const char* strchr(const char*, int) <near match>
/usr/include/string.h:217:22: note:   no known conversion for argument 1 from ‘const unsigned char*’ to ‘const char*’ 
```

通常当面对这种事情时，我会说*“strchr, yuck, just get rid of it fully”*。但我不想自己修改这些文件，这是 C 代码，它被保持在相当旧的平台上的可移植性。他们不会乐于在调用站点进行强制转换以安抚 C++……尽管如果“结构”存在并且是标准的，他们可能会使用它。

我也可以以一种或另一种方式破解它，就像`SomethingICanChange.h`我可以添加：

```
unsigned char const * strchr(unsigned char const * s, int c) {
    return (unsigned char const *)strchr((char const *)s, c);
} 
```

这适用于`-fpermissive`. 但是我无法将这种重载检查到 C 代码库中（好吧，没有#ifdef）。`struchr`只是想知道是否有人有更好的想法，如果这就是这种情况下的人们最终会做的事情（或者如果有一个共同的名字，那么任何常见的名字），我会补充。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:04:18.020

*初始说明*：我知道这也是一件很丑陋的事情，但它可能会帮助你（希望）更好的想法！

如何使用宏：

```
#define strchr(s, c) ((unsigned char const *)strchr((char const *)s, c)) 
```

您可以将其作为 Makefile/build 脚本中的编译标志 (-D) 包含在内。我想您的 C++ 项目有一个自定义 Makefile/build 脚本，因此您不需要将此宏添加到 C 代码库。

为了使它*稍微*好一点，您可以使用一个附加文件，该文件包含在您的 Makefile/build 脚本中，该文件以（更）结构化的方式添加这些宏`CPPFLAGS`

# ios - zlib 数据不解压

> ID：13906152
> 
> 赞同：0
> 
> 时间：2012-12-16T22:34:16.353
> 
> 标签：ios, nsdata, zlib

我正在向我的服务器发出一个请求，该请求传回了一堆包含未压缩的标头信息的数据，然后是已请求的应使用 zlib 压缩的数据。

所以整个数据负载看起来像

> （标题（未压缩）/数据（压缩）/结束）

在此之前，数据从未被压缩，所以这就是我访问那里信息的方式

```
cstring = (char *) malloc(sizeWithLocalOrdering + 1);
            strncpy(cstring, bytes, sizeWithLocalOrdering);
            cstring[sizeWithLocalOrdering] = '\0';
            NSString *resultString = [NSString stringWithCString:cstring encoding:NSUTF8StringEncoding];
            methodResponseData =[resultString dataUsingEncoding:NSUTF8StringEncoding]; 
```

sizeWithLocalOrdering 是数据部分的大小，因此我可以从我从服务器接收的所有数据中正确读取它。

但是现在我正在接收 Zlib 数据.. 我想知道如何在不破坏 zlib 压缩的情况下从我发送的内容中获取数据部分......因为目前当我将 MethodResponseData 输入我的解压缩方法时，如下所示

```
- (NSData*) dataByDecompressingData:(NSData*)data{
    NSLog(@"%@", data);
    Byte* bytes = (Byte*)[data bytes];
    NSInteger len = [data length];
    NSMutableData *decompressedData = [[NSMutableData alloc] initWithCapacity:COMPRESSION_BLOCK];
    Byte* decompressedBytes = (Byte*) malloc(COMPRESSION_BLOCK);

    z_stream stream;
    int err;
    stream.zalloc = (alloc_func)0;
    stream.zfree = (free_func)0;
    stream.opaque = (voidpf)0;

    stream.next_in = bytes;
//  err = inflateInit(&stream);
    err = inflateInit2(&stream, -MAX_WBITS);
    CHECK_ERR(err, @"inflateInit");

    while (true) {
        stream.avail_in = len - stream.total_in;
        stream.next_out = decompressedBytes;
        stream.avail_out = COMPRESSION_BLOCK;
        err = inflate(&stream, Z_NO_FLUSH);
        [decompressedData appendBytes:decompressedBytes length:(stream.total_out-[decompressedData length])];
        if(err == Z_STREAM_END)
            break;
        CHECK_ERR(err, @"inflate");
    }

    err = inflateEnd(&stream);
    CHECK_ERR(err, @"inflateEnd");

    free(decompressedBytes);
    return decompressedData;
} 
```

它说数据是..而我正在挑衅地发送methodReasponse，那是挑衅的NSData ......所以我可以把它归结为这样的唯一原因是因为我的接收器方法像我一样从响应中提取数据。

所以两件事，你认为这是原因吗？其次，您认为我如何修复数据，使其实际上是 NSData 并且压缩仍然存在，因此我可以使用我的方法解压缩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T03:31:06.807

所以我设法改变了从我收到的数据中获取字节的方式

```
myCompressedData = [NSData dataWithBytes:bytes length:sizeWithLocalOrdering]; 
```

这意味着不像以前那样压缩格式没有填充，然后我发现这行代码的另一个问题

```
err = inflateInit2(&stream, -MAX_WBITS); 
```

所以我把它改回原来的

```
err = inflateInit(&stream); 
```

一切正常。

# mysql - 一张表上的多个 SQL 查询

> ID：13906154
> 
> 赞同：0
> 
> 时间：2012-12-16T22:34:44.107
> 
> 标签：mysql, sql, join

我正在使用灯。在 MySql 中，我有一个包含 X、Y 和 Z 列的表。我需要从多个集合和子集中选择不同的记录。如果我的初始标准是 WHERE Y = A; 那么我需要能够：

*   通过选择 Y = A 的记录来获取集合 B，
*   通过选择 X 在集合 B 中且 Z = 123 的记录来获取集合 C
*   通过选择 Y 在集合 B 中且 Z = 456 的记录来获取集合 D
*   通过选择 X 在集合 D 和 Z = 789 中的记录来获取集合 E

桌子可能会变得很大，我不确定从哪里开始。一些可能的方法是：

1.  有多个单独的查询。在这种情况下，我将如何缓存一个查询的结果集以用作另一个查询的输入？内存缓存？
2.  使用嵌套子查询。但是内部查询的结果纯粹是为了限制外部查询，不是吗？我如何让它们出现在结果中？
3.  使用联合。但是我将如何存储一个查询的结果以用作另一个查询的输入？
4.  多次将表加入到自身中。这将产生一个笛卡尔结果，其中外部行重复多次。这将映射到应该是可管理的多维 PHP 数组。但是性能呢？

我倾向于选项 4，但不是 100% 肯定。我在重新发明轮子吗？

非常感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:29:38.903

我不明白您的目标，因为您没有定义对 X 的限制，但是根据您的描述，我相信集合 E 将是空的。我这样说是因为集合 D 已经包含 Z 为 456 的行。因此，当您对该结果集运行另一个查询以针对 Z 为 789 的条件生成 E 时，您将不会得到任何行，因为 D 中的所有行都是 456。

现在发表个人意见：

1.  尽可能避免笛卡尔积 - 连接很好，但要小心，尽可能避免交叉积
2.  如果需要，对表进行非规范化以提高查询效率
3.  生成能够产生最小结果集的查询以满足您的要求
4.  如果可能的话，使用子查询来减少结果集的大小
5.  信任查询优化器，尽可能避免子查询
6.  尽可能让 SQL 完成工作，因为它有能力和资源以最佳方式计算数据

为了突出上面的第 4 项，我想提一下，在您的 D 示例中，您可以编写以下查询而无需子查询或任何其他临时存储：

```
SELECT * FROM MyTable WHERE Y = A AND Z = 456 
```

现在，也许我可以通过猜测你想要什么来尝试解决你的困境：

```
SELECT * FROM MyTable WHERE Y = A AND Z IN (123, 456, 789) 
```

或者：

```
SELECT * FROM MyTable WHERE Y = A AND (Z = 123 OR Z = 456 OR Z = 789) 
```

希望这可以帮助

# c++ - 使用 RStudio 的 R 和 C++

> ID：13906156
> 
> 赞同：4
> 
> 时间：2012-12-16T22:35:05.123
> 
> 标签：c++, c, macos, r, rstudio

2012 年 11 月 29 日，发布了一个新版本的 RStudio，它可以“[编写 C++ 函数并将它们简单地导入 R，就像你获取 R 脚本一样](http://blog.rstudio.org/2012/11/29/rstudio-and-rcpp/)”。我变得超级感兴趣，认为类似于将 knitr 和 Latex 集成到 RStudio 中，这使我能够将 RStudio 用于我的 R 程序和 Latex 代码，新版本使我能够对我的 C++ 代码做同样的事情。我是 C++ 的初学者，我认为现在 Rstudio 已经使 C++ 编程和 R 中的源代码变得容易，现在是开始学习 C++ 的好时机，我的项目需要大量计算。下载新版本并创建新的 .cpp 文件并编写简单的 C++ 代码后，我无法编译它。请您指导我：

1）新的 RStudio 是否可以用作编写和运行我的 C++ 代码的编辑器，而不是 Visual Studio 或其他编辑器/IDE？（类似于我对我的 Latex 代码所做的事情）

2）如果是这样，我假设我需要单独设置 C++ 编译器，你能指导我如何在 mac 中做到这一点吗？

3) 就像加载 knitr 包一​​样，我是否需要在 R 中加载任何包才能在 Rstudio 中获取/或运行我的 C++ 代码？

3) 最后，我是否需要设置 RStudio 首选项才能直接从 RStudio 编译我的 C++ 代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T22:53:30.170

关于您的问题的快速解答：

1.  不，RStudio 不太可能成为您*独立*C++ 程序的 IDE，尽管它确实提供了一个编辑器并且您可以定制 Makefile...
2.  这在网络上的许多教程中都有很好的记录，当然还有 R 文档（请参阅[编写 R 扩展](http://cran.r-project.org/doc/manuals/r-release/R-exts.html)。期望我们在这里为您重新输入所有内容有点粗鲁。另请参阅[RStudio](http://www.rstudio.com/ide/docs/)网站上的文档。
3.  是的，您需要[Rcpp](http://dirk.eddelbuettel.com/code/rcpp.html)包。
4.  （你的计数是关闭的。）这个问题对我来说没有意义。如果你把 1) 到 3) 整理出来，事情可能会变得更清楚。

试试 Google、RSeek.org 和 SO 搜索功能。这些问题以前都被问过并回答过。

# jquery - 在悬停状态之间循环

> ID：13906159
> 
> 赞同：1
> 
> 时间：2012-12-16T22:36:01.927
> 
> 标签：jquery, html, css

我有一种愚蠢的网站请求-他们希望悬停状态具有动画效果，因为他们认为没有人会知道那里有链接...

无论如何......我创建了一个幻灯片来展示我正在尝试创建的效果 - 但现在我无法让它与 jQuery 代码一起使用。我在这里找到了我认为的答案：[尝试在 CSS 类/悬停状态之间循环 - Jquery](https://stackoverflow.com/questions/10964257/trying-to-loop-between-css-classes-hover-states-jquery)

但即使合并了这个新代码，动画/切换也不起作用。

我想我遗漏了一些明显的东西 - 任何人都可以帮忙吗？

这是显示我想要的效果的幻灯片版本：http: [//test.fatcat-studios.com/gtm/index.html](http://test.fatcat-studios.com/gtm/index.html) 但我想用 jQuery 来做这个，所以当你与之交互时，正确的悬停状态显示在实际鼠标悬停时。

这是我的 jQuery 代码：

```
 $(function() {
    var doToggle = true;                            
    $('a.res').removeClass('hover');
    $('a.com').addClass('hover');                           
    var tid = setInterval( function() {
    if (doToggle) $('a.res, a.com').toggleClass('hover');
    }, 2000);

    setTimeout(function() {

    if (tid) clearInterval(tid);

    $('a.res,a.com').removeClass('hover');
    }, 30000); // stop toggling after 30 seconds

    $('a.res,a.com').hover( function() {
    doToggle = false;
    }, function() {
    doToggle = true;
    });
    }); 
```

任何帮助深表感谢！让我知道是否需要更多信息。俳句猫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:03:24.633

AFAIK 没有办法用 JS 模拟 CSS 悬停状态。但是，如果您想要一个简单的 jQuery 解决方案，这应该可以满足您的需求（[小提琴](http://jsfiddle.net/lexy0202/eSAmj/)）。

CSS（使用 :hover 伪类）

```
#clicky {
    color:#000;
}

#clicky:hover {
    color:#FFBF00;
} 
```

​JS

```
yep = true; // just a global var to stop it flashing when the user hovers
// you may want to persist this differently

$(function() {
    setInterval(function() {
        if (yep) {
            var $c = $('#clicky');
            $c.css({color: $c.hasClass('active') ? '#000' : '#FFBF00'}).toggleClass('active');
        }
    }, 1 * 1000);

    $('#clicky').hover(function() {
        yep = false;
    }, function() {
        yep = true;
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T23:31:47.860

试试这个 ：

```
$(function() {
    var autoToggle = true;
    var $togglers = $('a.res, a.com');

    var tid_1,
        tid_2 = setTimeout(function() {
        clearInterval(tid_1);
        $togglers.removeClass('hover');
        autoToggle = false;
    }, 30000); // stop toggling after 30 seconds

    $togglers.hover(function() {
        clearInterval(tid_1);
        $togglers.removeClass('hover');
        $(this).addClass('hover');
    }, function() {
        if(autoToggle) {
            $('a.res').removeClass('hover');
            $('a.com').addClass('hover');
            tid_1 = setInterval(function() {
                $togglers.toggleClass('hover');
            }, 2000);
        }
        else {
            $togglers.removeClass('hover');
        }
    }).triggerHandler('mouseout');
}); 
```

# jquery - 可能与 jquery 库冲突

> ID：13906160
> 
> 赞同：0
> 
> 时间：2012-12-16T22:36:05.777
> 
> 标签：jquery, wordpress, jquery-ui

我制作了一个 wp 插件，可以在线预订租车，但我在本地使用不同的 wp 主题对其进行了测试，效果很好！但是当我出于某种原因在这个网站上安装它时，jquery 功能不起作用！当我按下 fortsetzen 按钮时，它不会打开另一个步骤（它是一个有 4 个步骤的表格）。我认为这是因为主题使用的其他 jquery 函数或库，我很沮丧，我不知道是什么原因造成的！有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T22:43:06.290

我不知道您使用什么来避免冲突，但您始终可以使用此代码段来避免这种情况：

```
(function($){

//Your code goes here

}(jQuery)); 
```

此外，请务必使用[wp_enqueue_script()](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)函数加载脚本。并且不要忘记 WP 通常默认加载 jQuery。不要不必要地再做一次。

另一个编辑：你[不](http://codex.wordpress.org/Plugin_API/Action_Reference/wp_print_styles)应该使用 wp_print_styles 钩子来加载你的脚本。法典在上面的链接上说：“wp_print_styles 不应用于将样式或脚本排入首页。请改用 wp_enqueue_scripts。” 如果是这样的话，你应该听话=P

最后一件事：请注意 wp_enqueue_script() 接受最后一个参数 ($in_footer)，一个布尔值，true 或 false，告诉 WP 你想在哪里加载脚本（页眉或页脚）。页脚上的真实负载。默认情况下，它设置为 false，而您可能需要在页脚上加载自定义脚本和插件，因此您应该将其设置为 TRUE。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T22:45:04.573

不要在插件文件夹中包含 jQuery。

相反，通过 WordPress 内置函数 wp_enqueue_script 加载 WP 附带的 jQuery。

这将加载 WordPress 附带的 jQuery，并防止加载同一脚本（您拥有的）的多个实例。

检查文档[wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)以了解如何使用它，以及您可以加载的“内置”脚本的长列表。

您可以使用以下命令加载 jQuery，**而无需**将其包含在插件文件中：

```
wp_enqueue_script('jquery'); 
```

您还可以加载 jQuery ui，以及可拖动、可放置等。查看文档以了解这样做：

```
wp_enqueue_script('jquery-ui'); 
```

将加载 jQuery ui 核心。

**编辑： ** 另外，使用 Firefox，并安装和使用 Firebug。使用 Firebug，我可以在您的网站上快速看到此错误：

*TypeError: $(...).inputfocus 不是函数*

16号线

这告诉我，在您的插件 jQuery 中，您正在尝试通过访问该`$`函数来使用 jQuery。在 WP 中，您必须以不依赖`$`函数的方式使用 jQuery。要么调用 jQuery `jQuery(...)`，要么以某种形式的[兼容模式](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)使用它：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T23:11:09.180

我通过使用这个解决了这个问题： add_action('wp_print_styles', 'scripts'); 现在它可以工作了，因为它加载了脚本和结尾，但我必须解决其他插件和主题的问题。谢谢你们。

# javascript - javascript传递eval变量

> ID：13906161
> 
> 赞同：9
> 
> 时间：2012-12-16T22:36:19.697
> 
> 标签：javascript, jquery, eval, execution

我有 eval 函数，它需要从 php 执行 javascript。但我需要传递元素，所以我可以将鼠标放在用户点击的链接上的提示上。

```
var globalEval = function globalEval(src, element) {
        if (window.execScript) {
            window.execScript(src);
            return;
        }
        var fn = function(element) {
            window.eval.call(window,src);
        };
        fn(element);
    }; 
```

我使用以下方式传递`$(this)`元素

```
globalEval(js_code, $(this));
// js_code is = alert(element); 
```

我得到未定义元素的错误，该错误在`globalEval();`我如何解决这个问题中定义？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-16T22:53:57.050

这是一个范围问题，因为全局 eval 没有在与变量相同的范围内调用代码`element`。如果你必须使用`eval`即使[eval 是 evil](https://stackoverflow.com/a/198031/1615483)，你必须以一种允许你在你想要的环境中调用你的代码的方式来做。一种方法是将其包装为匿名函数，您可以为选择的环境变量提供参数。

例如

```
window.eval.call(window,'(function (element) {'+src+'})')(element); 
```

这意味着`src`字符串被解析但不被调用，`eval`因为它返回一个匿名函数。然后你调用它，传递你的数据，在这种情况下`element`。

测试它，`var element = document.body, src = 'console.log(element.tagName)';`你会看到它 log `"BODY"`。请注意，如果您想以这种方式设置全局变量（或函数），则必须将它们显式声明为全局（`window.foobar = ...`），否则它们将在匿名函数完成后被 GCd。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-16T23:07:46.310

如果您只想在评估某些代码时进行设置，请尝试*：*`this`

```
// Code you want to evaluate
var code = 'return this.whatever'

// What you want "this" bound to:
var that = { whatever: 69 }

// Now do this:
var result = new Function(code).call(that) 
```

使用 Function 构造函数意味着你会得到你所期望的；全球评估带来了很多包袱，其中一些可能会让您感到惊讶。如果您不需要它，最好避免它。

现在，如果您真的想调用它`element`，[Function 构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function)也可以这样做：

```
code = 'alert(element)'
var use_element = 69
result = new Function("element", code).call(this, use_element) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-31T02:22:32.090

如果回调函数在同一个 dom 中，则在 eval 之前将全局变量设置为 repo，这将保留该变量。然后在你要调用的函数中使用全局变量。

```
var response_repo;
function someFunc($callback){
 ....
 success: function(result) {
            response_repo = result;
            eval($callback+'();');
        },
 ....
 }

 callBackFunc(){
  $data=response_repo;
 } 
```

# php - 带有评论的新闻数据库，如何使用 mysql 和 PHP 去除重复项？

> ID：13906166
> 
> 赞同：0
> 
> 时间：2012-12-16T22:37:18.587
> 
> 标签：php, mysql, database

我想创建一个新闻更新系统，使用 MySQL 和 PHP。但我不能让它工作，所以我可以显示新闻更新和所有附加的评论（然后一个有效的用户登录，这个人可以单独删除每条评论）。

我有这四个表和数据库架构

```
news_tbl (news_id, date, user (fk to users_tbl.username), headline, bodytext and picture)
users_tbl (username, email, password, usertype)
comments_tbl (comments_id, name, comment)
news_comments_tbl (news_comments_id, news_id_fk, comments_id_dk) 
```

当用户写一条新闻更新时，`news_comments_tbl`它的设置`news_id`和`comments_id`为NULL，然后用户写一条评论，`news_comments_tbl`设置`comments_id`一个id。

但是当评论超过一条时，新闻更新就会重复，所以它就像：

**新闻 1**
- 无评论

**新闻 2**
-1 评论
评论：
汤姆斯评论

**新闻 3**
-2 评论
评论：
约翰斯评论

**新闻 3**
-2 评论
评论：
艾伦评论

而且我要：

**新闻 1**
-0 评论

**新闻 2**
-1 评论
评论：
汤姆斯评论

**新闻 3**
-2 评论
评论：
Johns 评论
Allans 评论

我如何显示每个新闻更新和所有附加的评论？
我已经尝试过`GROUP_CONCAT`- 但是我无法获取每条评论的 ID，所以用户可以单独删除评论吗？
我也试过了`GROUP BY news_tbl.news_id`，但我只得到第一条评论？
我如何计算评论？我试过这个：

```
COUNT(comments_tbl.comments_id) AS count 
```

但是我只得到第一个书面消息？！我花了很多时间试图让它工作，但似乎无法弄清楚:(希望有人能帮助我

这是我的查询：

```
$sqlquery ="SELECT news_tbl.*, news_comments_tbl.*, users_tbl.*, comments_tbl.* 
    FROM news_tbl
    LEFT JOIN news_comments_tbl ON news_comments_tbl.news_id_fk = news_tbl.news_id
    LEFT JOIN comments_tbl ON news_comments_tbl.comments_id_fk = comments_tbl.comments_id
    LEFT JOIN users_tbl ON users_tbl.username = news_tbl.user
    ORDER BY news_tbl.news_id DESC LIMIT 5"; 
```

这是我的 PHP 代码：

```
 $result = $conn->query($sqlquery);

        foreach($result as $row)
        {
            $commentsidfk = $row['comments_id_fk'];
            $newsidfk = $row['news_id_fk'];

          if($row['comments_id_fk'] == NULL)
          {
              echo $row['headline'];
              echo '<br>';
              echo $row['bodytext'];
              echo '<br>';
          }
          if($row['comments_id_fk'] != NULL)
          {
              echo $row['headline'];
              echo '<br>';
              echo $row['bodytext'];

              echo '<br>';
              echo $row['comment'];
              echo '<br>';
              echo '<a href=delete.php?news_id='.$commentsidfk.' >Delete comment</a>';
              echo '<br>';

          }
              echo '<br>';
              echo '<a href=delete.php?news_id='.$newsidfk.' >Delete news</a>';
              echo '<br>';
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T22:54:04.380

因为您要将新闻加入评论，所以每一行都将包含新闻和其中一条评论。

您可能会发现在一个查询中选择新闻并在第二个查询中获取评论更有效，因为您发送的数据比您需要的更多，因为连接。您需要测量它以查看它是否更快。

或者，您可以通过仅在检测到新 id 时编写一次新闻来在循环中处理此问题（您的查询已经具有按 id 排序的内容，因此您知道它们将按顺序处理）

```
 $currentNewsId = 0;

    foreach($result as $row)
    {
        $commentsidfk = $row['comments_id_fk'];
        $newsidfk = $row['news_id_fk'];

        if ($newsidfk != $currentNewsId) {
             // write the news out
             $currentNewsId = $newsidfk;
        }
        // ... 
```

# java - CDI 对话 id 始终为 1 并且在尝试恢复对话时捕获到 NonexistentConversationException

> ID：13906167
> 
> 赞同：1
> 
> 时间：2012-12-16T22:37:39.207
> 
> 标签：java, cdi, weld

我有两个 JSF 控制器和三个共享 CDI 对话的支持 bean。调用第一个控制器后，调用非 JSF Web 应用程序以使用户登录 (OpenAM/OpenSSO)，然后调用第二个控制器。通过将 '?cid=1234' 附加到第二个控制器的页面请求来保留对话 ID。

我的控制器注释如下：

> @Named (javax.inject.Named)
> 
> @ConversationScoped (javax.enterprise.context.ConversationScoped)

并将控制器注入如下：

> @Inject (javax.inject.Inject)
> 
> 私人短暂的对话对话；(javax.enterprise.context.Conversation)

支持 bean 注释如下：

> @Named (javax.inject.Named)

这是在 JBoss 7.1 上运行的，它使用 Weld 进行 CDI。

这工作正常，但是在进行了一些不相关的更改后，它不再工作了。

现在的问题是，当第一个控制器被调用时，我调用了 conversation.begin()，我返回的会话 ID*始终*为1。此外，当我回到第二个控制器时，我收到以下错误：

> org.jboss.weld.context.NonexistentConversationException: WELD-000321 找不到要恢复 id 1 的对话

我尝试使用新会话多次访问 Web 应用程序，并且尝试从不同的选项卡和不同的浏览器访问它。始终返回对话 ID“1”。此外，据我所知，我不会在两个控制器调用之间的任何时候终止会话或对话。

# runtime - 什么时候插入排序比合并排序快？

> ID：13906169
> 
> 赞同：4
> 
> 时间：2012-12-16T22:37:46.437
> 
> 标签：runtime, mergesort, insertion-sort

对于作业问题，有人告诉我插入排序在 8n^2 处运行，而合并排序在 64(n(lg n)) 处运行。作为给我的解决方案的一部分，它说只要 n <= 43，插入排序就比合并排序快，但是老师的回答并没有真正解释他为什么或如何到达 43。有人可以解释一下吗？我不太擅长计算运行时间，所以我试图更好地理解。是的，我试过问老师，但我还是一头雾水。任何帮助都会很棒！谢谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T22:41:39.517

它来自这个（代数）推理线

```
steps_in_insertion_sort <= steps_in_merge_sort
8n^2 <= 64n lg n
n^2 <= 8n lg n
n <= 8 lg n 
```

然后 43 通过反复试验或通过求解方程 n - 8 lg n = 0 的零来工作。

对于通过反复试验进行的黑客攻击，请注意：

```
$ python
>>> 8 * log(43)/log(2)
43.41011803761678 
```

因为“lg”表示以对数为底的二。

（除此之外：这样的计算并不能真正转化为任何一种算法会击败另一种算法的现实迹象。说真的，正好是 43？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-23T19:13:27.690

这是 Cormen 第 3 版算法导论中的第二个练习题。对于算法的新手来说，这个方程的解并不是那么简单：

当 8n^2 < 64n lg n 、 n < 8 lg n 、 2^ n/8 < n 时，插入排序优于合并排序。这适用于 2 <= n <= 43（通过使用计算器找到）。因此，我们可以将归并排序重写为对 43 或更小的输入使用插入排序，以提高运行时间。

# xaml - XAML 中的中心弹出窗口

> ID：13906170
> 
> 赞同：5
> 
> 时间：2012-12-16T22:38:11.520
> 
> 标签：xaml, windows-8, microsoft-metro, windows-runtime, winrt-xaml

我使用以下代码创建了一个弹出窗口，但我不知道如何将其居中
我试图在运行时自动更改边距，但我不知道如何做到这一点，但有人知道居中弹出？
它没有标准尺寸，因为我需要全球化我的程序

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}" Name="MainGrid">
   <Popup x:Uid="LoginPopup" IsOpen="True" Name="LoginPopup">
      <Grid>
         <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto" />
         </Grid.RowDefinitions>
         <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
         </Grid.ColumnDefinitions>
         <TextBlock Margin="10" Grid.Column="0" Grid.Row="0" Text="App Name" Grid.ColumnSpan="2" Style="{StaticResource HeaderTextStyle}" />
         <TextBlock Margin="10" Grid.Column="0" Grid.Row="1" Text="Username" Style="{StaticResource ResourceKey=SubheaderTextStyle}" />
         <TextBox Margin="10" Grid.Column="1" Grid.Row="1" Name="InputUsername" />
         <TextBlock Margin="10" Grid.Column="0" Grid.Row="2" Text="Password" Style="{StaticResource ResourceKey=SubheaderTextStyle}" />
         <PasswordBox Margin="10" Grid.Column="1" Grid.Row="2" Name="InputPassword" />
         <StackPanel  Margin="10" Grid.Column="1" Grid.Row="3" HorizontalAlignment="Left" Orientation="Horizontal">
            <Button Name="Login"  x:Uid="LoginPopupLogin"  />
            <Button Name="Cancel" x:Uid="LoginPopupCancel" />
         </StackPanel>
      </Grid>
   </Popup>
</Grid> 
```

**更新**

我在下面尝试了 user1603313 的答案，但它没有成功，因为它说弹出窗口内的网格大小是 NaN。
我也尝试将方法移动到网格中，但它也没有成功
我正在谈论的方法是网格正确更新

```
private void LoginPopup_Loaded_1(object sender, RoutedEventArgs e)
{
   LoginPopup.HorizontalOffset = (Window.Current.Bounds.Width - gdChild.ActualWidth) / 2;
   LoginPopup.VerticalOffset = (Window.Current.Bounds.Height - gdChild.ActualHeight) / 2;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T06:15:43.513

这是解决您问题的方法。我正在重写 xaml 代码并进行修改，您可以在代码后找到解释。

```
 <Popup x:Uid="LoginPopup" IsOpen="True" Name="LoginPopup" Loaded="LoginPopup_Loaded_1">
        <Grid Background="Red" x:Name="gdChild" Height="Auto" Width="Auto">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <TextBlock Margin="10" Grid.Column="0" Grid.Row="0" Text="App Name" Grid.ColumnSpan="2" Style="{StaticResource HeaderTextStyle}" />
            <TextBlock Margin="10" Grid.Column="0" Grid.Row="1" Text="Username" Style="{StaticResource ResourceKey=SubheaderTextStyle}" />
            <TextBox Margin="10" Grid.Column="1" Grid.Row="1" Name="InputUsername" />
            <TextBlock Margin="10" Grid.Column="0" Grid.Row="2" Text="Password" Style="{StaticResource ResourceKey=SubheaderTextStyle}" />
            <PasswordBox Margin="10" Grid.Column="1" Grid.Row="2" Name="InputPassword" />
            <StackPanel  Margin="10" Grid.Column="1" Grid.Row="3" HorizontalAlignment="Left" Orientation="Horizontal">
                <Button Name="Login"  x:Uid="LoginPopupLogin"  />
                <Button Name="Cancel" x:Uid="LoginPopupCancel" />
            </StackPanel>
        </Grid>
    </Popup> 
```

在这里，我`Loaded="LoginPopup_Loaded_1"`在弹出窗口的 xaml 中添加了一个事件

这是C#中的事件代码

```
 private void LoginPopup_Loaded_1(object sender, RoutedEventArgs e)
    {
        LoginPopup.HorizontalOffset = (Window.Current.Bounds.Width - gdChild.ActualWidth) / 2;
        LoginPopup.VerticalOffset = (Window.Current.Bounds.Height - gdChild.ActualHeight) / 2;
    } 
```

解释 ：

Horizo​​ntalOffset 获取应用程序窗口左侧和弹出窗口左侧之间的距离。

类似地，垂直偏移量获取窗口顶部和弹出窗口顶部之间的距离

因为我们必须将其居中对齐，所以我们必须从应用程序窗口的宽度和高度中减去弹出窗口的宽度和高度的一半（弹出窗口的中心是弹出窗口与其顶部和左侧边界距离的一半)

代码写在`Loaded="LoginPopup_Loaded_1"`event 中，因为在应用程序窗口中呈现元素时会调用此事件，并采用 Grid 因为它是所有子元素的容器 Grid。

我希望我清楚:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:01:15.437

Re: 屏幕旋转时是否可以运行Loaded？– The87Boy 24 分钟前

答案是肯定的，您可以通过创建一个方法并调用该方法来执行相同的代码集`Window.Current.SizeChanged += Current_SizeChanged;`

```
 void Current_SizeChanged(object sender, Windows.UI.Core.WindowSizeChangedEventArgs e)
    {
        //call custom method from loaded event as well as size changed event
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:57:54.643

关于 x:name 和 name 属性，你问我要解释的内容与下面链接中写的相同

[x：名称和名称区别 Silverlight](https://stackoverflow.com/questions/3379230/is-there-any-difference-in-xname-and-name-for-controls-in-xaml-file)

并通过此链接查看 WPF

[在 WPF 中，x:Name 和 Name 属性有什么区别？](https://stackoverflow.com/questions/589874/in-wpf-what-are-the-differences-between-the-xname-and-name-attributes/593151#593151)

根据我的一般理解，名称是类的属性（例如：Grid 或 TextBlock 等等），但没有名称属性的类需要以某种方式访问​​（例如：StoryBoard 等），因此为此目的 x：提供名称。在 initializecomponent 方法调用期间，x:name 和 name 被映射到使用`FindName(string)`方法的类，以便它们变得可访问。

现在内部发生的事情是长话短说

MainPage.xaml -> MainPage.gics -> MainPage.xaml.cs

# python - 分配新值

> ID：13906172
> 
> 赞同：-2
> 
> 时间：2012-12-16T22:38:45.867
> 
> 标签：python, function

我有一个简单的程序，但我不太明白为什么输出仍然是 0。

```
x=0
def main():     
    getX(1,2,x)
    print(x)

def getX(v1,v2,x):
    if (v1>v2):
        v1=x
    else:
        v2=x
main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T22:44:09.847

这里的主要问题是`getX`它完全没有任何作用。`v1`您所做的就是为or分配一个值`v2`，这两个值都是本地值，一旦函数结束就会被丢弃。

你可能想要的是这样的：

```
def getX(v1, v2):
    if v1 > v2:
        return v1
    else:
        return v2

x = getX(1, 2)
print(x) 
```

`return`给出一个值作为函数的结果，然后您可以在其他地方使用它。您不需要`x`初始设置或将其传递给函数，因为函数根本不使用它。

另请注意，这可以通过更改函数内部的分配并`global x`用于访问`x`您最初定义的模块级别来解决。这是不好的做法，因为通常很难遵循修改全局变量的代码。

# python - 正则表达式和有限深度非转义括号匹配

> ID：13906180
> 
> 赞同：3
> 
> 时间：2012-12-16T22:39:36.223
> 
> 标签：python, regex

我想匹配不超过给定深度的嵌套匹配括号的各种组合。

如果深度为二，则以下应匹配

```
H<>
H<a>
H<<a><b>>
H<a<b>c<d>> 
```

这些不应该：

```
H<<<>>>
H<<<>><<><>><>> 
```

我想我会做一个生成正则表达式的函数

```
INNER = r"[^<>]"
OPEN  = r"<"
CLOSE = r">"

def parenthesis(depth=2):
    if depth == 0:
        return INNER
    inner = "("
    for i in range(depth):
        inner += parenthesis(i) + "|"
    inner = inner[:-1]+")*?"
    return "("+OPEN + inner + CLOSE+")" 
```

如果我这样做，这似乎可行（尽管我并不完全有信心），例如：

```
re.match("H"+parentthesis(2), "H<<>>") 
```

但我真的想匹配没有转义的花括号。所以：

```
OPEN = r"(?<!\\)[\{]"
CLOSE = r"(?<!\\)[\}]" 
```

而且，我不确定：

```
INNER = r"[^(?<!\\)[\}\{]]" 
```

这似乎不起作用。有任何想法吗。这让我很头疼！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:45:42.997

试试这个：

```
INNER = r"(?:\\{|\\}|[^{}])" 
```

它表示转义的大括号或不是大括号的字符。

# c++ - 我正在尝试使用 C++ 开发 XML 解析器。但是在返回时声明的枚举值遇到错误

> ID：13906185
> 
> 赞同：0
> 
> 时间：2012-12-16T22:40:30.610
> 
> 标签：c++, xml

```
**** Build of configuration Debug for project XMLParser ****

**** Internal Builder is used for build               ****
g++ -O0 -g3 -Wall -c -fmessage-length=0 -o src\XMLParser.o ..\src\XMLParser.cpp
..\src\XMLParser.cpp: In member function 'XMLParseResult_t CXMLString::parse(std::string&, std::string&)':
..\src\XMLParser.cpp:155:1: warning: control reaches end of non-void function
g++ -static-libgcc -static-libstdc++ -o XMLParser.exe src\main.o src\XMLParser.o
Build complete for project XMLParser
Time consumed: 1656  ms. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T22:44:42.083

你的方法`parse()`应该返回一个类型的变量，`XMLParseResult_t`而不是返回任何东西。

例如，您要么忘记了`return`某事，要么是在 if 语句中有条件地这样做。编译器无法知道 if 语句是否总是评估为真，因此会抱怨。

# android - 执行 API 方法时触发.io 错误：forge.contact.selectById

> ID：13906191
> 
> 赞同：0
> 
> 时间：2012-12-16T22:41:30.807
> 
> 标签：android, trigger.io

我正在将 Trigger.io 用于 iOS / Android 应用程序，并尝试获取电话簿中所有电子邮件的列表。

我打电话

```
forge.contact.selectAll(selectAllSuccessCb, selectAllErrorCb); 
```

然后迭代每个返回的联系人以获取完整的联系人详细信息，并提取电子邮件地址：

```
forge.contact.selectById(contactRef.id, function (contact) {
    // do stuff with contact email address(es) here
} 
```

我正在测试的两台设备上有大约 1400 个联系人（应该是相同的 - 都登录到同一个 Google 帐户）。三星 Galaxy S Android 2.3.6 运行良好。

三星 Galaxy Nexus Android 4.1 在 8 个联系人上失败，并出现以下错误：

```
[WARNING] Error while executing API method: contact.selectById
[DEBUG] Returning: {"content":{"type":"UNEXPECTED_FAILURE","message":
"Forge Java error: NumberFormatException: Invalid int: \"null\"",
"full_error":"java.lang.NumberFormatException: Invalid int: \"null\"\n\tat 
java.lang.Integer.invalidInt(Integer.java:138)\n\tat java.lang.Integer.parseInt(Integer.java:355)\n\tat 
java.lang.Integer.parseInt(Integer.java:332)\n\tat 
io.trigger.forge.android.modules.contact.Util.contactToJSON(Util.java:340)\n\tat 
io.trigger.forge.android.modules.contact.API.contactIdToJSONObject(API.java:70)\n\tat 
io.trigger.forge.android.modules.contact.API.selectById(API.java:80)\n\tat 
java.lang.reflect.Method.invokeNative(Native Method)\n\tat java.lang.reflect.Method.invoke(Method.java:511)\n\tat 
io.trigger.forge.android.core.ForgeApp.callJavaFromJavaScript(ForgeApp.java:194)\n\tat 
io.trigger.forge.android.core.ForgeJSBridge.callJavaFromJavaScript(ForgeJSBridge.java:8)\n\tat 
android.webkit.BrowserFrame.stringByEvaluatingJavaScriptFromString(Native Method)\n\tat 
android.webkit.BrowserFrame.stringByEvaluatingJavaScriptFromString(Native Method)\n\tat 
android.webkit.BrowserFrame.loadUrl(BrowserFrame.java:271)\n\tat 
android.webkit.WebViewCore.loadUrl(WebViewCore.java:2029)\n\tat 
android.webkit.WebViewCore.access$1900(WebViewCore.java:57)\n\tat 
android.webkit.WebViewCore$EventHub$1.handleMessage(WebViewCore.java:1321)
android.os.Handler.dispatchMessage(Handler.java:99)\n\tat android.os.Looper.loop(Looper.java:137)
android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:827)
java.lang.Thread.run(Thread.java:856)\n"},"status":"error","callid":"B40384E4-62A1-4460-866D-924855F3930F"} 
```

这里有什么问题，我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:49:16.297

这是由联系人数据库中的电子邮件或电话条目造成的，它们的类型为空……不太清楚这是怎么发生的！但它已在平台的 v1.4.25 中修复。

[http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-25](http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-25)

# java - 从 @RequestParam 获取没有指定名称的值

> ID：13906194
> 
> 赞同：12
> 
> 时间：2012-12-16T22:41:41.973
> 
> 标签：java, spring, annotations

我知道如果参数看起来像这样：

```
@RequestParam("userId") String userId 
```

我可以通过调用这个来获得价值：

```
requestParam.value() 
```

但是如果我不指定名称，Spring 会自动使用变量名称。像这样：

```
@RequestParam String userId 
```

如果未指定参数名称，我该如何访问它？我知道它是可能的，因为 Spring 以某种方式做到了，但 requestParam.value() 在这种情况下是空白的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-16T23:11:52.300

Spring 不会根据 @RequestParam 填充请求。相反，它填充使用@RequestParam 注释的方法参数（在使用@RequestMapping 注释的方法中）。给 @RequestParam 注释的参数告诉 Spring 您希望它用作该参数的请求参数的名称。如果您不提供，Spring 默认使用参数的名称（因此您在问题中给出的 2 个示例是等效的）。

如果您尝试访问请求参数，则需要知道它的名称，而不管您使用的是什么框架。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T02:36:55.680

建议你不要这样做。Spring使用[asm](http://asm.ow2.org/) 分析java字节码文件，并提取方法的参数名称。但有时这不起作用，因为某些.class文件不包含参数名称，只是参数类型，这取决于编译器选项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-01T12:14:22.477

对于 Java 8，Spring 使用[StandardReflectionParameterNameDiscoverer](https://github.com/spring-projects/spring-framework/blob/master/spring-core/src/main/java/org/springframework/core/StandardReflectionParameterNameDiscoverer.java)，它依赖于[Java 8 参数 API](http://docs.oracle.com/javase/tutorial/reflect/member/methodparameterreflection.html)。

有关如何设置参数选项并通过反射使用它的详细信息，请参阅[此答案](https://stackoverflow.com/a/20594685/607767)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T23:08:41.217

只需调用`userId`，如`doSomething(userId)`. Spring为你绑定了一切。

# c - C 错误 C2371 重新定义

> ID：13906195
> 
> 赞同：0
> 
> 时间：2012-12-16T22:41:56.887
> 
> 标签：c

```
Error 2 error C2371: 'QixC': redefinition; different basic types line 5
Error 5 error C2371: 'QixC': redefinition; different basic types line 5
Error 13 error C2371: 'QixC': redefinition; different basic types line 5 
```

这是文件 Game.h 的一部分：

```
#include "Graphics_Console.h"
#include <stdio.h>
#include <conio.h>

typedef struct
{
int X;
int Y;
}QixC;
typedef struct
{
int X;
int Y;
}CCursor; 
```

我在 Game.c 中使用它们：

```
#include "Game.h"
#include <stdio.h>
#include <conio.h>
#include <time.h>
int QIX(int nivell)
{
QixC Qix;
CCursor Cursor;
HANDLE hScreen;
int DirQixX,DirQixY;
int IniciX,IniciY;
int FiX, FiY;
int DirStix=0;
int Area=0,AreaTotal=0,AreaObjectiu=(FI_X-INICI_X)*(FI_Y-INICI_Y)*0.75;
int Pantalla=1;
int Puntuacio=0;
int tecla=0;
int viu=1;
int NCops=0, Velocitat=1000/(nivell*0.70);
int XocStix=0;
char continuar[1];

hScreen = GetStdHandle(STD_OUTPUT_HANDLE);
InitScreen(hScreen);
do
{
    system("CLS");
    IniciX=INICI_X,IniciY=INICI_Y;
    FiX=FI_X, FiY=FI_Y;
    Cursor.X=INICI_X+(FiX-INICI_Y)/2,Cursor.Y=FI_Y;

    DibuixarRectangle(IniciX,IniciY,FI_X,FI_Y,hScreen);
    InfoPuntsPartida(hScreen, Puntuacio);
    InfoPantallaPartida(hScreen, Pantalla);

    Qix.X=Aleatori(IniciX+1,FiX-1),Qix.Y=Aleatori(IniciY+1,FiY-1);
    InicialitzarDirQix(&DirQixX,&DirQixY);
    PintarQix(Qix,hScreen);
    PintarCursor(Cursor.X,Cursor.Y,hScreen);

    do{
        if(_kbhit())
        {   
            tecla=LlegirEvent();
            TractarEvent(tecla,Cursor,&IniciX,&IniciY,&FiX,&FiY,Qix,&DirStix,&Area,hScreen);
            if(Area)
            {
                Puntuacio=Puntuacio+Area;
                AreaTotal+=Area;
                Area=0;
                InfoPuntsPartida(hScreen,Puntuacio);
            }
        }
        NCops++;
        if(NCops==Velocitat)
        { 
            if(DirStix!=0)
                XocStix=QiXXocStiX(Qix,Cursor,DirStix);
            if(!XocStix)
                MoureQix(Qix,&DirQixX,&DirQixY,IniciX,IniciY,FiX,FiY,hScreen);
            else
                viu=0;
            NCops=0;
        }
    }while((tecla!=TECLA_q)&&(tecla!=TECLA_Q)&&viu &&(AreaTotal<AreaObjectiu));
    GameOver(hScreen);
    TextColor(LIGHTGREY,BLACK,hScreen);
    GotoXY(0,FI_Y+1,hScreen);
    return Puntuacio;
    system ("PAUSE");
    printf("Continuar?(s/n)");
    scanf("%c",&continuar);
}while(continuar!="s");
} 
```

对不起，外来词和名字，英语不是我的第一语言。我看不到在哪里重新定义。它们不会出现在其他任何地方，而是作为参数传递给某些函数。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T22:48:32.657

尝试保护您的标题不被多次包含。

```
#ifndef GAME_H
#define GAME_H

#include "Graphics_Console.h"
#include <stdio.h>
#include <conio.h>

typedef struct
{
    int X;
    int Y;
}QixC;

typedef struct
{
    int X;
    int Y;
}CCursor;

#endif /* GAME_H */ 
```

默认情况下，如果您包含多个直接或间接包含您的标题的标题，您将获得其结构和功能的多个竞争（如果相同）版本。您可以通过启动标题来避免这种情况

```
#ifndef SOMETHING_UNIQUE_TO_YOUR_HEADER
#define SOMETHING_UNIQUE_TO_YOUR_HEADER 
```

并结束它

```
#endif /* SOMETHING_UNIQUE_TO_YOUR_HEADER */ 
```

这保证了任何源文件将最多包含您的结构的单个副本。

# iphone - iPhone 应用程序的启动图像

> ID：13906206
> 
> 赞同：-4
> 
> 时间：2012-12-16T22:43:38.520
> 
> 标签：iphone, objective-c, ios, resolution

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

我对 iPhone 应用程序的启动图像有疑问。到目前为止，在我的应用程序中，我包含了两个启动应用程序图像：Default.png (320 x 480) 和 Default@2.png(640 x 960)，第一个用于正常分辨率，第二个用于高分辨率。

问题是，对于新的 iPhone 5，高分辨率图像的尺寸应该是 640 x 1136 吗？如果是，该图像将如何在 iPhone4 中显示？在 iPhone4 中，640 x 1136 大小的图像居中显示？或不？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T22:48:14.770

现在包括 3 张图片

```
320x480 - Default.png
640x960 - Default@2x.png
640x1136 - Default-568h@2x.png 
```

-- 使用的是基于屏幕尺寸的

# android - 资产文件夹中的 Android SQLCipher 和 DB

> ID：13906213
> 
> 赞同：5
> 
> 时间：2012-12-16T22:44:43.383
> 
> 标签：android, sqlcipher

目前，我的 sqlite db 文件未**加密**，它已从`assets`文件夹复制到应用程序`data/data/mypackage/databases`文件夹。

现在我想将[SQLCipher](https://guardianproject.info/code/sqlcipher/)库添加到我的项目中并开始使用它们。我可以加密 db 文件并将其复制到应用程序中`assets`并在应用程序中使用相同的密钥吗？是否可以在 Windows 上加密数据库？我需要做什么？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-28T10:50:40.377

我认为我们应该这样做

```
SQLiteDatabase normalDB = null;
SQLiteDatabase cryptedDB = null;
normalDB = SQLiteDatabase.openDatabase(dbPath, "", null,
    SQLiteDatabase.OPEN_READONLY
    | SQLiteDatabase.NO_LOCALIZED_COLLATORS);

cryptedDB = SQLiteDatabase.openOrCreateDatabase(
    encrypteddbPath, Constants.CRYPT_KEY, null);

Cursor cursor;

cursor = normalDB.query(TABLE_CITY,
new String[] { FIELD_CITY_CODE, FIELD_NAME1,
    FIELD_NAME2, FIELD_NAME3 }, null, null, null,
    null, null);
int i = cursor.getCount();
while (i > 0) {
    ContentValues newLabelValues = new ContentValues();

newLabelValues.put(FIELD_CITY_CODE, cursor.getString(0));
        newLabelValues.put(FIELD_NAME1, cursor.getString(1));
        newLabelValues.put(FIELD_NAME2, cursor.getString(2));
        newLabelValues.put(FIELD_NAME3, cursor.getString(3));
        cryptedDB.insert(TABLE_CITY, null, newLabelValues);

cursor.moveToNext();
} 
```

# mysql - 重命名外键以适应表的上下文

> ID：13906216
> 
> 赞同：0
> 
> 时间：2012-12-16T22:45:16.867
> 
> 标签：mysql, foreign-keys

在表中使用外键时，更改该表的键的名称是否是好的形式，以明确该键在表中执行的功能，还是保留原始名称的好形式，使其清楚它是一个外键吗？

**示例：** 一个表跟踪用户，主键是`user_id`

第二个表存储网站上的文章并使用外键跟踪作者`user_id`。

在第二个表的上下文中，调用外键会更有意义`author`。在整个数据库的上下文中，调用外键会更有意义`user_id`

是否有处理这种情况的一般惯例，或者这就是评论的目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:51:03.533

了解数据库模式的建模和设计是常规的。任何对数据库管理员有意义的东西。业务逻辑不关心数据库是如何命名的，只关心结果。对于数据库管理员来说，如果将外键 author_id 重命名为引用另一个表的 user_id 更有意义，那么这样做并在某些文档中注明 T2.author_id 必须存在于 T1.user_id 中。当从建模过渡到设计数据库时（这就是您现在所处的位置），保持简单是有意义的，但是您可以更改外键名称，只要您能记住它们（并记录它们）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T22:51:10.767

好吧，如果你有一个电影表，你不会想要名为 person_id 和 person_id 的列，而是需要 producer 和 director，或者可能是 producer_id 和 director_id，或者可能是 producer_person_id 和 director_person_id。

我知道电影可以有多个导演和多个制片人；这只是一个例子。任何情况下，如果一个表有两个指向同一个表的外键，你就会知道原则​​上你不能完全遵守在列名中*只使用表名的约定。*您可以同时使用两者（如 producer_person_id 示例中所示），但这会导致列名长。

不要使用评论。没有人阅读它们。好吧，这也许只是刻板印象，但总的来说，评论的描述性名称更受欢迎！

除了两个外键问题之外，我真的不知道有任何普遍接受的约定。

# javascript - 寻求有关采用何种方法进行多个图像交换的建议

> ID：13906220
> 
> 赞同：1
> 
> 时间：2012-12-16T22:45:41.063
> 
> 标签：javascript, jquery

我正在设计一个交互式大学校园地图，需要一些关于我想做的事情的指导。

页面链接：[http ://www.torontoclassfind.com/startpage.html](http://www.torontoclassfind.com/startpage.html)

我希望能够单击顶部菜单中的链接（到目前为止只有一个链接处于活动状态，它会在左下角的 div 中加载和 Ajax 页面）并让它用不同的图像交换建筑物图像以显示它已被选中.

我可以通过以下方式做到这一点：

```
$("#buildinglink1").click(function () {
   $("#buildingimg1").attr("src","highlightedimage.gif")
}) 
```

问题是一旦单击另一个菜单链接并选择了新建筑物，我需要将图像更改回默认图像。

建筑物图像位于 www.torontoclassdfind.com/building/，突出显示的图像位于 www.torontoclassdfind.com/buildingc/，两个位置的建筑物名称相同。

我正在考虑使用 JQuery 的 .replace 元素来执行此操作（例如：[jquery remove part of url](https://stackoverflow.com/questions/6955933/jquery-remove-part-of-url)）这将删除或添加 'c' 到 url，但我有点从这里迷路了。

有小费吗？我想我需要创建一个函数来指示一个链接被选中，并以某种方式将它与 .replace 元素合并。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:17:18.120

请注意：`.replace`是 JavaScript 字符串（和其他）方法，而不是 jQuery 方法。

我想你要求做这样的事情：

```
$(".any-building").click(function () {
   //replace all building sources with the unhighlighted version
   $(".any-building").attr('src', function () {
      return $(this).attr('src').replace('buildingc', 'building');
   });

   //replace clicked image with highlighted one
   $(this).attr('src', $(this).attr('src').replace('building', 'buildingc'));
}); 
```

一个可能的缺点是，对于大量图像，此交换可能需要很长时间或导致一些闪烁。如果是这种情况，那么您可能希望将一个类添加`.active`到突出显示的图像或类似的东西，并且只为该图像和新单击的图像进行交换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:21:35.653

jQuery 中一个常见的学习错误是专注于所有类型选择器的 ID。它们适用于非常少量的元素，但对于可以通过更简单的代码方法轻松管理的大量元素，它们变得非常笨拙。

您希望能够编写更通用的代码，其中一个处理程序将覆盖页面中共享相同功能的所有链接。

例子：

```
var $mainImage=$('#mainImage')

var $buildingLinks=$('.buildingliststyle a').click(function(){
      /* "this" is the link clicked*/
       /* get index of this link in the whole collection of links*/
       var index=$buildingLinks.index(this);
      /* perhaps all the image urls are stored in an array*/
      var imgUrl= imagesArray( index);
      /* perhaps the image urls are stored in data attribute of link( easy to manage when link created server side)*/
       var imgUrl=$(this).data('image');
      /* store the current image on display (not clear how page is supposed to work)*/
      var currImage=$mainImage.attr('src');

       $mainImage.data('lastImage', currImage);/* can use this to reset in other parts of code*/
       /* nw update main image*/
       $mainImage.attr('src', imgUrl);

       /* load ajax content for this link*/
       $('#ajaxContainer').load( $(this).attr('href') );

      /* avoid browser following link*/
       return false;                
});

 /* button to reset main image from data we already stored*/  
$('#imageResetButton').click(function(){
   $mainImage.attr('src',  $mainImage.data('lastImage') );
}) 
```

可以看到，通过在一个处理程序中处理一组元素可以用很少的代码做很多事情，而无需专注于 ID

上面的代码提到了可能将图像 url 存储在 data 属性中，例如：

```
<a href="ajaxUrl?id=345" data-buildingID="345" data-image="imageUrl-345">Building name</a> 
```

# sql - 完全受保护的 SQL Server 2005 数据库

> ID：13906222
> 
> 赞同：1
> 
> 时间：2012-12-16T22:46:22.507
> 
> 标签：sql, sql-server, sql-server-2008

我在我的机器上安装了一个应用程序，它安装了一个 SQL Server 2005 Express 实例。我可以使用 Windows 身份验证模式从 SSMS 连接到此实例，并发现该安装程序安装了一些数据库。但在这种情况下，我无权做任何事情。

所以有两个登录`Instance --> Security --> Logins`：

1.  `sa`
2.  `BUILTIN\Users`

`sa`尽管 sysadmin 受密码保护。
`BUILTIN\Users`有服务器角色 = 公共，只是公共的。所以这个用户不能做任何事情。

这意味着此实例仅对该应用程序有效，没有人可以将此实例用于任何其他数据库。

我需要知道，是否有某种方法可以制作`BUILTIN\Users`系统管理员。或者做一些技巧来使用这个实例。

无论如何，它正在使用内存和硬盘空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:18:21.850

Aaron Bertrand 不久前写了一篇很棒的文章，演示了一种使用 SysInternals 的“PsExec”获取访问权限的方法，前提是您对本地计算机具有本地管理员访问权限。

您可以参考 MSSQLTIPS 中的此提示，该提示将逐步了解这是否能解决您的问题。 [http://www.mssqltips.com/sqlservertip/2682/recover-access-to-a-sql-server-instance/](http://www.mssqltips.com/sqlservertip/2682/recover-access-to-a-sql-server-instance/)

获得访问权限后，您可以为自己分配对 SQL Server 的 SysAdmin 访问权限。

# android - Android 混合原始声音。源是 java 数组而不是文件或资源

> ID：13906223
> 
> 赞同：0
> 
> 时间：2012-12-16T22:46:25.207
> 
> 标签：android, audio, soundpool, audiotrack

我有未压缩的原始格式的音频数据作为 java 数组。short[] 或 byte[] 我希望在 Android 中播放它们。

SoundPool 看起来像我需要的，但我找不到从内存中加载数据的方法。它仅从文件加载，我不确定如何指定它是原始数据的格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:21:09.803

AudioTrack类具有接受或作为源参数的[方法。](http://developer.android.com/reference/android/media/AudioTrack.html)这是我所知道的唯一一个 Android 声音类。`write(...)``byte[]``short[]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T00:19:16.977

一个名为[libpd](https://github.com/libpd/pd-for-android)的库可以为您提供 Android 中缺乏的许多音频功能。学习曲线有点陡峭，但它是强大的东西。

# php - 当它们位于单独的文档中时，将值从 php 传递给 javascript

> ID：13906227
> 
> 赞同：0
> 
> 时间：2012-12-16T22:46:44.847
> 
> 标签：php, javascript, variables

当变量的值在同一文档中的 php 中声明然后传递给 php 时，此 javascript 函数被正确触发，但是当从单独的 php 文档传递值时，我无法执行此操作。

```
var session = '<?php echo $t; ?>';
if (session == "login_failed") {
    loginFailed();
} 
```

当我像这样在同一个文档中声明值时，它会起作用：

```
<?php 
 $t="login_failed"; 
?> 
```

但是当我像这样在第二个文档（login-exec.php）中声明值时它不起作用：

```
<?php 
 $t="login_failed"; 
 echo $t;
?> 
```

* * *

编辑 - 这是用于登录表单，使用 login-exec.php *(action="login-exec.php" method="post") 发布*。如果该页面上的查询成功，那么他们将被重定向到他们的帐户页面，但如果查询失败，我想触发此功能（而不是我目前正在做的事情，即将他们重定向到带有错误消息的另一个页面)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:57:55.423

我通常在我的主文档中放这样的东西

```
<script>

   function get_your_data() {

     var yourvalue = "<?php echo $your variable ?>";

     return your_data
   }

</script> 
```

然后通过调用，在另一个文档中调用该函数`get_your_data()`，它将在您的外部js文档中可用。

您还可以使用类和常量。

# sql - SQL数据库自交互实体

> ID：13906228
> 
> 赞同：0
> 
> 时间：2012-12-16T22:46:50.370
> 
> 标签：sql, entity-relationship

我一直在研究一个数据库，它指的是机场管理。我遇到了一个让我感到害怕的问题。我想做的是，假设客户想知道两个位置之间的距离，以英里或公里为单位。例如，如果用户想知道伦敦和阿姆斯特丹之间的距离，该距离应该通过公式计算还是应该已经存储在数据库中？

```
 (1,N) ____________  
 ____________|__          |
|              |          |
| City/Airport |<---------|
|______________| 
```

我如何向用户显示他的 2 个选择之间的距离？

里卡多科斯塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:59:25.690

你的问题不清楚。我猜这是学生/家庭作业问题，您的数据库表如下所示：

```
Airport1 Airport2 Distance 
```

如果有直达路线，则有一条记录，其 airport1 值为 London，其 airport2 值为 Amsterdam：如果该记录存​​在，则距离就是该记录中的值。

如果没有直接路线，则需要找到间接路线：例如，有 1 个中途停留或 2 个中途停留的路线等。

# jsf - 禁用用户的物理键盘

> ID：13906229
> 
> 赞同：1
> 
> 时间：2012-12-16T22:46:53.520
> 
> 标签：jsf, primefaces, keyboard

有没有一种方法可以使输入`<p:keyboard>`无法与用户的物理键盘一起使用？为了安全起见，我只希望通过使用 UI 键盘来引入输入，而不是真正的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-17T14:59:17.170

您可以`keypadonly="true"`像这样使用属性：

```
<p:keyboard keypadOnly="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T14:32:33.527

我已经尝试`readonly="true"`并工作过，尝试使用这种方式。

# apache - apache allowencodedslashes NoDecode 选项在 apache 2.2.3 中无效？

> ID：13906233
> 
> 赞同：1
> 
> 时间：2012-12-16T22:47:49.990
> 
> 标签：apache

apache 文档说，从 2.2 开始，NoDecode 选项已添加到 AllowEncodedSlashes 指令中。在服务器上，apache 报告：

/usr/sbin/httpd -v 服务器版本：Apache/2.2.3 服务器构建：2012 年 2 月 8 日 08:19:50

然而，当我在我的虚拟主机中包含该指令时，该文件不再通过语法检查，并出现关于仅支持 On 和 Off 的错误。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:30:26.593

实际上，似乎文档说 2.2.18，在这种情况下高于“3”。

[http://httpd.apache.org/docs/2.2/mod/core.html#allowencodedslashes](http://httpd.apache.org/docs/2.2/mod/core.html#allowencodedslashes)

# excel - 如何在两个不同的工作表中延迟一组击键和鼠标事件

> ID：13906234
> 
> 赞同：0
> 
> 时间：2012-12-16T22:48:02.620
> 
> 标签：excel, winapi, vba

在Excel中延迟两次鼠标事件和击键的方法是什么？假设我在两个不同的工作表中执行两个会话：

表 1：

```
right click -> key stroke R -> write 100 chars -> press enter 
```

之后：

切换到表 2：

```
right click -> key stroke R -> write 100 chars -> press enter 
```

我使用了这个延迟，但似乎只发生了第二组命令

```
Application.Wait DateAdd("s", 10, Now) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:42:13.817

也许您可以尝试“准时”？而且我无法重现您的问题。您介意发布更多代码吗？

```
Sub testing()
macroA
Application.OnTime DateAdd("s", 2, Now), "macroB"
End Sub

Sub macroA()
MsgBox "A"
End Sub
Public Sub macroB()
MsgBox "B"
End Sub 
```

# encryption - RC4 从纯文本和加密数据中查找密钥

> ID：13906239
> 
> 赞同：0
> 
> 时间：2012-12-16T22:48:42.180
> 
> 标签：encryption

假设有一些纯文本和相应的加密数据，是否有可能比暴力破解更快地找到密钥？如果是这样，我该怎么做？

澄清一下：我有明文 p 和加密数据 d。它们可以是字符串或字节数组，或者任何你喜欢的。我只想知道是否可以从这些数据中获取密钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:59:16.887

请参阅[对 RC4 流密码的攻击](http://webcache.googleusercontent.com/search?q=cache%3aUP7hH0C5x9UJ%3acage.ugent.be/~klein/RC4/RC4-en.ps+&cd=2&hl=en&ct=clnk&gl=us)。RC4 在谨慎和正确使用时提供了有效的安全性，但也不难出错。

# asp.net - asp.net 4.0 缓存问题

> ID：13906240
> 
> 赞同：2
> 
> 时间：2012-12-16T22:48:59.283
> 
> 标签：asp.net, caching, webchartcontrol

需要帮助解决与 ASP.NET 应用程序数据缓存和图表控制相关的问题。我有一个包含图表控件的简单测试页。由于图表使用数据库中的数据，我创建了一个名为 chartData 的自定义对象，其中包含图表所需的所有数据。当我从头开始创建 chartData（因为它不在缓存中）时，图表会正确呈现。当我从缓存中检索 chartData 时，出现以下异常。我在调试器中检查了从缓存返回的对象，它看起来是正确的。关于这里发生的事情有什么建议吗？

这发生在我的开发系统（Win 7、VS 2010、C#）上。

因为它似乎与图表数据源有关，所以这是影响数据源属性的代码行：

```
myChart.DataSource = myChartData.DataSource; 
```

myChartData.DataSource 是 myChartDataPoint 的列表，其中 myChartDataPoint 是

```
 public class myChartDataPoint
{
    public int X { get; set; }
    public int Y1 { get; set; }
    public int Y2 { get; set; }
    public int Y3 { get; set; }
} 
```

## “/”应用程序中的服务器错误。

你调用的对象是空的。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

[NullReferenceException：对象引用未设置为对象的实例。] System.Web.UI.DataVisualization.Charting.ChartImage.DataBind(IEnumerable dataSource, ArrayList seriesList) +451 System.Web.UI.DataVisualization.Charting.Chart.PerformDataBinding （IEnumerable 数据）+14 System.Web.UI.WebControls.DataBoundControl.OnDataSourceViewSelectCallback（IEnumerable 数据）+128 System.Web.UI.DataSourceView.Select（DataSourceSelectArguments 参数，DataSourceViewSelectCallback 回调）+33 System.Web.UI.WebControls.DataBoundControl .PerformSelect() +143 System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +74 System.Web.UI.DataVisualization.Charting.ChartPicture.Paint(Graphics graph, Boolean paintTopLevelElementOnly) +400 System.Web.UI.DataVisualization .Charting.ChartImage.GetImage(单分辨率) +1035 System.Web.UI.DataVisualization.Charting.Chart.SaveImage(Stream imageStream) +124 System.Web.UI.DataVisualization.Charting.Chart.Render(HtmlTextWriter writer) +375 System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter 适配器) +27 System.Web.UI.Control.RenderControl（HtmlTextWriter writer，ControlAdapter 适配器）+100 System.Web.UI.Control.RenderControl（HtmlTextWriter writer）+25 System.Web.UI.Control.RenderChildrenInternal（HtmlTextWriter writer，ICollection children ) +208 System.Web.UI.HtmlControls.HtmlForm.RenderChildren(HtmlTextWriter writer) +173 System.Web.UI.HtmlControls.HtmlContainerControl.Render(HtmlTextWriter writer) +31 System.Web.UI.HtmlControls.HtmlForm.Render(HtmlTextWriter输出）+53 System.Web.UI.Control.RenderControlInternal（HtmlTextWriter writer，ControlAdapter 适配器）+27 System.Web.UI.Control.RenderControl（HtmlTextWriter writer，ControlAdapter 适配器）+100 System.Web.UI.HtmlControls.HtmlForm.RenderControl（HtmlTextWriter writer）+40 System.Web.UI.Control.RenderChildrenInternal（HtmlTextWriter writer，ICollection children）+ 208 System.Web.UI.Control.RenderChildren(HtmlTextWriter writer) +8 System.Web.UI.Page.Render(HtmlTextWriter writer) +29 System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27 System .Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +100 System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3060HtmlControls.HtmlForm.RenderControl（HtmlTextWriter writer）+40 System.Web.UI.Control.RenderChildrenInternal（HtmlTextWriter writer，ICollection children）+208 System.Web.UI.Control.RenderChildren（HtmlTextWriter writer）+8 System.Web.UI。 Page.Render(HtmlTextWriter writer) +29 System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27 System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +100 System.Web.UI .Control.RenderControl（HtmlTextWriter writer）+25 System.Web.UI.Page.ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+3060HtmlControls.HtmlForm.RenderControl（HtmlTextWriter writer）+40 System.Web.UI.Control.RenderChildrenInternal（HtmlTextWriter writer，ICollection children）+208 System.Web.UI.Control.RenderChildren（HtmlTextWriter writer）+8 System.Web.UI。 Page.Render(HtmlTextWriter writer) +29 System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27 System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +100 System.Web.UI .Control.RenderControl（HtmlTextWriter writer）+25 System.Web.UI.Page.ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+3060RenderChildren(HtmlTextWriter writer) +8 System.Web.UI.Page.Render(HtmlTextWriter writer) +29 System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27 System.Web.UI.Control.RenderControl( HtmlTextWriter writer，ControlAdapter 适配器）+100 System.Web.UI.Control.RenderControl（HtmlTextWriter writer）+25 System.Web.UI.Page.ProcessRequestMain（Boolean includeStagesBeforeAsyncPoint，Boolean includeStagesAfterAsyncPoint）+3060RenderChildren(HtmlTextWriter writer) +8 System.Web.UI.Page.Render(HtmlTextWriter writer) +29 System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27 System.Web.UI.Control.RenderControl( HtmlTextWriter writer，ControlAdapter 适配器）+100 System.Web.UI.Control.RenderControl（HtmlTextWriter writer）+25 System.Web.UI.Page.ProcessRequestMain（Boolean includeStagesBeforeAsyncPoint，Boolean includeStagesAfterAsyncPoint）+3060ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3060ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3060

* * *

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.272

```
 /// <summary>
/// Spline Chart Data
/// </summary>
public class ChartData
{
    private SeriesList _seriesList = new SeriesList();
    private ChartDataPoint3YList _dataSource = new ChartDataPoint3YList();
    private StringList _legendTextList = new StringList();
    private StringList _axisXLabelList = new StringList();

    /// <summary>
    /// Chart Title
    /// </summary>
    public string ChartTitle { get; set; }
    /// <summary>
    /// X axis title
    /// </summary>
    public string AxisXTitle { get; set; }
    /// <summary>
    /// Y axis title
    /// </summary>
    public string AxisYTitle { get; set; }

    /// <summary>
    /// X Axis point label strings.
    /// </summary>
    public StringList AxisXLabelList
    {
        get { return _axisXLabelList; }
        set { _axisXLabelList = value; }
    }
    /// <summary>
    /// Legend strings.
    /// </summary>
    public StringList LegendTextList
    {
        get { return _legendTextList; }
        set { _legendTextList = value; }
    }

    /// <summary>
    /// Datasource to be used by the chart, contains data for all chart data points
    /// </summary>
    public ChartDataPoint3YList DataSource
    {
        get { return _dataSource; }
        set { _dataSource = value; }
    }

    /// <summary>
    /// Chart series collection
    /// </summary>
    public SeriesList SeriesList
    {
        get { return _seriesList; }
        set { _seriesList = value; }
    }

    /// <summary>
    /// Chart data specific to one chart series
    /// </summary>
    public class ChartSeriesData
    {
        /// <summary>
        /// Legend text for the series
        /// </summary>
        public string Legend { get; set; }

        /// <summary>
        /// Data Points of the series
        /// </summary>
        public ChartDataPoint3YList DataPoints { get; set; }
    }
}

    public class ChartDataPoint3YList : List<ChartDataPoint3Y> { }

    public class ChartDataPoint3Y
{
    public int X { get; set; }
    public int Y1 { get; set; }
    public int Y2 { get; set; }
    public int Y3 { get; set; }
} 
```

* * *

我得到了这个工作。也许有人可以告诉我为什么这会解决它，因为我不知道。我更换后异常消失了

```
foreach (Series series in chartData.SeriesList) myChart.Series.Add(series); 
```

和

```
foreach (Series series in chartData.SeriesList)   
{
   SeriesItem newItem = new Series();
        newItem … set the item properties using the relevant values from series
    …
    myChart.Series.Add(newItem);
 } 
```

明显的区别是图表对象不再引用缓存的chartData.SeriesList。不知道为什么会有所作为。

# java - 扩展 Activiti 流程引擎功能的首选方式是什么？

> ID：13906243
> 
> 赞同：2
> 
> 时间：2012-12-16T22:49:14.920
> 
> 标签：java, business-process-management, extending, activiti

Activiti 是一个很有前途的业务流程引擎，许多组织已经开始使用 activiti 开发业务流程管理系统。

就我而言，我想使用 activiti 开发一个 BPM 系统来满足特定的业务需求，但是 activiti 引擎的功能只涵盖了我大约 70% 的业务需求。

我要添加的大多数业务需求都与 bpmn 无关。我决定通过解决变通办法来添加我的特定业务需求。

问题是，扩展 Activiti 流程引擎功能的首选方式是什么？

目前我有两个一般选择：

1.  直接更改activiti源代码。我应该直接编辑源代码实现类吗？那会更快，但这不会使升级到新版本变得更加困难吗？或者我应该扩展和包装一些实现类？这种选择不会导致意想不到的行为吗？

2.  使用 activiti 引擎作为依赖，然后通过扩展和包装它的一些实现类来添加新功能。另一种选择是在 activiti 引擎之外添加完全独立的数据模型的扩展。我不知道什么是首选的适应方式。

你有什么意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:57:14.987

快速的选择是找到一个解决方法并等到它在 activiti 上。

另一种选择是寻找在 Activiti (http://activiti.org/userguide/#bpmnBusinessRuleTask) 中实现的 businessTask。这将使您“了解”activiti 和 BPMN，它具有成为标准的优势。

如果您仍然想扩展它，我认为不要弄乱代码更有意义。如果直接修改代码，升级到更新的Activiti版本会很复杂。此外，您不会在已经被其他人测试过的代码中引入错误。

您没有说您需要哪种要求，但我认为大多数想法应该可以使用 BPMN。您也可以在 activiti 论坛中寻求/寻求更具体的帮助。

# asp.net-mvc - Twitter 引导模型和 MVC/jquery 客户端验证

> ID：13906245
> 
> 赞同：1
> 
> 时间：2012-12-16T22:49:28.693
> 
> 标签：asp.net-mvc, twitter-bootstrap, jquery-validate, modal-dialog

我正在使用带有 remoteurl 的 twitter 引导模式在部分视图中加载；在这种情况下，用于重置密码表格。

我正在使用 MVC 模型绑定，并在模型上设置了数据注释，以使客户端验证能够在局部视图中进行。

但是，这不会触发客户端验证。我得到了服务器端验证，这很好，但是由于某种原因，当这个表单在模态中时，它不会调用客户端验证。

jquery 验证和引导脚本在包含模式的主页中被引用。

但是，我已将 jquery 和 jquery 验证脚本引用添加到部分视图的末尾，这样做确实可以确保调用客户端验证。

为什么这些脚本必须包含在加载到模式中的部分视图中？

由于它以这种方式工作，我很乐意离开它，但是当我需要动态加载不同的 remoteUrls 时，这样做会给我的 twitter 引导模式带来另一个问题。

当在局部视图中也引用了 jquery 脚本时，模态将第一次触发，但随后出现错误。我知道这是 jquery 引用引起的问题，就好像我删除它们一样，虽然我没有得到客户端验证，但我可以多次打开模式而没有任何问题。

我用来调用模态的代码是从互联网搜索中找到的，以尝试让模态刷新传递给它的不同远程 URL 的模态主体。

```
$('#mymodal').removeData('modal');
$('#mymodal').modal({ remote: self.remoteUrl, keyboard: true }); 
```

然后我得到的错误是第二次触发这个 $('#mymodal').modal 为空。但它总是第一次起作用。如上所述，我认为这是因为局部视图中的 jquery 脚本引用。

有没有人对这两个问题中的任何一个有想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:01:42.857

我似乎最终能够让它工作的唯一方法是加载部分视图以调用以下内容：

```
$('#frmName').removeData("validator");
$('#frmName').removeData("unobtrusiveValidation");
$.validator.unobtrusive.parse('#frmName'); 
```

这似乎为我调用了客户端验证。

# wpf - WinRT：图像 - 如果不包含在资源中，图像不会显示

> ID：13906248
> 
> 赞同：0
> 
> 时间：2012-12-16T22:49:48.377
> 
> 标签：wpf, xaml, data-binding, windows-runtime, winrt-xaml

我的 Windows Store 应用程序/Metro/Win RT 应用程序将图像从服务器下载到某个本地文件夹。我需要在运行时将图像控件绑定到下载的图像。

**问题是图像不会显示，除非我将它作为二进制资源添加到项目中。**

我下载的图像存储在 ProjectFolder/Data/Media 中。现在，这是我如何将图像源绑定到图像控件。

```
<Image x:Name="WriterImage"  Stretch="None" Source="{Binding Path=PersonData.Photo.MediaImageSource"></Image>

public ImageSource MediaImageSource
{
    // Here _MediaUrl gets a value: ms-appx:///Data/Media/Writer1.jpg   
    BitmapImage source = new BitmapImage(new Uri(_MediaUrl));

} 
```

这仅在我将 Writer1.jpg 作为资源添加到项目时才有效。如果我从项目中删除它，它就不会出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:21:42.027

请注意，您的应用程序可以访问不同的 URL 方案：

`ms-appx:///`是一个只读位置，指的是应用程序中包含（编译）的文件，例如资源。

`ms-appdata:///local/`指您的应用程序的本地读写存储。如果你正在下载文件，我猜你应该使用这个 URL 方案。

对于上面的示例，我将尝试使用以下 URL：

`ms-appdata:///local/Data/Media/Writer1.jpg`

有关 URL (URI) 方案的详细信息，请参阅以下内容：http: [//msdn.microsoft.com/en-us/library/windows/apps/jj655406.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj655406.aspx)

# php - 检查数据是否存在于多个表中

> ID：13906251
> 
> 赞同：0
> 
> 时间：2012-12-16T22:49:58.260
> 
> 标签：php, mysql, count

我目前正在 MySQL 中运行此查询，以检查与它们关联的表中是否存在指定的值。

```
SELECT COUNT(artist.artist_id), COUNT(album.album_id), COUNT(tracks.track_id) 
FROM artist, album, tracks WHERE artist.artist_id = 320295 OR album.album_id = 1234 OR tracks.track_id = 809 
```

我运行这个查询得到的结果都是 1，这意味着 WHERE 子句之后的所有语句都是真的。为了进一步检查查询的可靠性，我将 track.track_ = 809 更改为 802，我知道这不匹配。但是显示的结果仍然都是 1，这意味着即使我故意插入了一个不匹配的值，它们也都成功匹配。

如何让它在同一查询中显示 1 表示匹配和 0 表示没有匹配？

编辑：我插入了正在运行的查询的图像

![在此处输入图像描述](../Images/08cf6da4e6939701e13756ea57d6e4e4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:00:30.500

“或”子句可能是您的问题。如果这些 WHERE 子句中的任何一个有效，您将获得一个不为空的结果集。也许像 SELECT COUNT(*)... WHERE... AND... AND...

但是查看整个 PHP 代码集会更有帮助。而且我建议运行三个不同的查询 - 不是因为它在技术上很复杂，而是因为它更容易在第一次就正常工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:11:39.163

您在这里所做的是连接三个表。当您查看此[SQL Fiddle](http://www.sqlfiddle.com/#!2/7e913/7/0)时，您会看到发生了什么。

在第一个选择中，我省略了`count`, 以显示连接的工作原理。`or`当您按照`and`@RayPaseur 的建议修改 where 子句时，您还可以看到结果集如何变化。

我想，你想要的，实际上是三个独立的查询

```
select 'artist' as type, count(artist_id) as count
from artist
where artist_id = 320295
union
select 'album', count(album_id)
from album
where album_id = 1234
union
select 'track', count(track_id)
from tracks
where track_id = 809 
```

变成

```
TYPE    COUNT
artist  1
album   1
track   1 
```

现在，当您更改`track_id = 809`为时`track_id = 802`，您将得到

```
TYPE    COUNT
artist  1
album   1
track   0 
```

因此。

用于播放的[SQL Fiddle 。](http://www.sqlfiddle.com/#!2/7e913/16/0)

# javascript - 如何使用html中的按钮标签重定向到页面？

> ID：13906257
> 
> 赞同：1
> 
> 时间：2012-12-16T22:50:35.730
> 
> 标签：javascript, html

当我单击一个按钮时，我想重定向到一个页面。问题是...如果我使用普通的 sintax，按钮可以正常工作，但是如果我通过使用 # 和 .(classes) 将一些 css 应用于 id，则按钮不再工作了？！我怎样才能同时保持我的css和功能？！这是我的代码：

```
<body>

    <input id="buttonrain" class="classname" type="button" onClick="window.location.href='rain.html'" value="Rain" />

    <!--or <a href="rain.html" id="buttonrain" class="classname">Rain</a> still not working-->

</body>

CSS FILE

html {
min-width: 100%;
min-height: 100%;
}
body{
width: 1024px;
height:600px;
background:white;
margin:0px;
padding:0px 0px;
display:block;
overflow:hidden;
}

.classname {
-moz-box-shadow:inset 0px 1px 0px 0px #ffffff;
-webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;
box-shadow:inset 0px 1px 0px 0px #ffffff;
background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05,  #f0ea3c), color-stop(1, #dfdfdf) );
background:-moz-linear-gradient( center top, #f0ea3c 5%, #dfdfdf 100% );
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f0ea3c', endColorstr='#dfdfdf');
background-color:#f0ea3c;
-moz-border-radius:6px;
-webkit-border-radius:6px;
border-radius:6px;
border:1px solid #dcdcdc;
display:inline-block;
color:#0f000f;
font-family:Verdana;
font-size:15px;
font-weight:bold;
padding:18px 9px;
text-decoration:none;
text-shadow:1px 1px 0px #ffffff;
position:relative;
bottom:250px;

}.classname:active {
position:relative;
top:1px;
}

#buttonrain{
left:80px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:17:06.120

您可以尝试使用这样的表格：

```
<form action='http://www.page.com/index.html' method='post'>
<input type='submit' name='button' value='Go!'>
</form> 
```

我是这个网站的新手，所以请原谅我缺乏发帖技巧:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T02:12:16.797

观察：

```
.classname {
position:relative;
bottom:250px;

}

.classname:active {
position:relative;
top:1px;
} 
```

我从您提供的代码中提取了这个。当我对此进行测试时，我注意到当我单击鼠标按钮时按钮移开了。这就好像我没有点击按钮一样。当我释放鼠标时，HTML 按钮返回，但它不会收到 onClick 事件。当我移除那个疯狂的定位变化时，它工作得很好。试试看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:01:57.507

我已经删除了下面的代码（.active 问题属性），它工作正常（感谢 musicin3d）

```
.classname:active {
   position:relative;
   top:1px;
} 
```

# ruby-on-rails-3 - Rails：控制器方法读取错误的模型

> ID：13906258
> 
> 赞同：1
> 
> 时间：2012-12-16T22:50:43.893
> 
> 标签：ruby-on-rails-3, model-view-controller

我有两个模型（`Articles`和`Documents`），我正在从第三个控制器（称为`Share`）使用它们。我在那个控制器中编写了这个方法来跟踪文章等的点击：

```
def read_more(a)
  @article = Article.find(a)
  impressionist(@article)
end 
```

由于某些奇怪的原因，我的应用程序试图找到`Document`ID 为 17 的 a 而不是`Article`. 我完全被难住了。

有任何想法吗？干杯!

**编辑：**

日志读数为：

```
Started GET "/share/read_more/17" for 127.0.0.1 at 2012-12-17 09:37:49 +1100
Processing by ShareController#show as JS
Parameters: {"ftp"=>"read_more", "id"=>"17"}
Document Load (0.1ms)  SELECT "documents".* FROM "documents" WHERE "documents"."id" = ? LIMIT 1  [["id", "17"]]
Completed 500 Internal Server Error in 1ms

ActiveRecord::RecordNotFound (Couldn't find Document with id=17): 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:55:42.320

我想出了答案，如果其他人遇到类似的问题。

```
def read_more
  @article = Article.find(params[:id])
  impressionist(@article)
  render :json => "Read."
end 
```

显然你不能在控制器方法中有参数。

# java - 会话过滤器重定向问题

> ID：13906259
> 
> 赞同：0
> 
> 时间：2012-12-16T22:50:57.777
> 
> 标签：java, session, jakarta-ee, servlet-filters

我在 java web 中遇到 AccessFilter 的问题。当我调用 /main.jspx 时，它会重定向到 login.jsp。但是当我尝试登录时出现了一些错误

```
public class AccessFilter implements Filter {

    private FilterConfig filterConfig;

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        this.filterConfig = filterConfig;
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        HttpSession session = ((HttpServletRequest) request).getSession();
        HttpServletResponse res = (HttpServletResponse) response;
        Client client = (Client) session.getAttribute("client");        
        if (client != null) {
            chain.doFilter(request, response);
        } else {
            RequestDispatcher dispatcher = request.getRequestDispatcher(
                    ConfigurationManager.getInstance().getProperty(ConfigurationManager.LOGIN_PAGE_PATH));
            dispatcher.forward(request, response);
        }
    }

    @Override
    public void destroy() {
        this.filterConfig = null;
    }

} 
```

网页.xml：

```
<filter>
    <filter-name>AccessFilter</filter-name>
    <filter-class>ua.kpi.shop.filter.AccessFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>AccessFilter</filter-name>
    <url-pattern>/jsp/main.jspx</url-pattern>
    <url-pattern>/jsp/pokemons.jspx</url-pattern>
</filter-mapping> 
```

错误：HTTP 状态 404 - /PokemonsShop/login.jspx

类型状态报告

消息 /PokemonsShop/login.jspx

描述 请求的资源不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:12:46.773

看到您的消息时，我想到了两件事：1）您是否检查了客户端对象是否为空？可能是在执行登录操作（方法）时，您没有将客户端正确设置为会话？2）在服务器错误中，它显示“未找到/PokemonsShop/login.jspx”，但在您的过滤器映射中您提到了/jsp/xxx。会不会是因为您的登录页面位于 jsp 文件夹下，并且您正在（在过滤器中）重定向到 /PokemonsShop/login.jspx，它应该位于 webapp 根文件夹下才能访问。希望其中一位能有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:08:58.790

`filterConfig.getServletContext().getRequestDispatcher`采用绝对路径而不是`request-getRequestDispatcher`. 虽然这是否是我不能说的解决方案。

# backbone.js - 如何使用 RequireJS 设置 Jasmine？

> ID：13906266
> 
> 赞同：1
> 
> 时间：2012-12-16T22:52:07.050
> 
> 标签：backbone.js, requirejs, jasmine

我在弄清楚如何使用 RequireJS 的模块设置 Jasmine 时遇到问题。

基本上，我想测试第一个视图：

```
it("can load sandbox", function() {
  var view = new ItemView();
  node = view.render().el;
  expect(node).toContain("<li>Test</li>");
}); 
```

我没有看到 ItemView 可以定义为 Backbone 视图，或者如何使用 requirejs 将 Backbone 注入到我的测试中。现在，我一方面看到一些关于使用 testr.js 的讨论，另一方面，我发现了一个 git repo，它设置了 SpecRunner.js：http: [//github.com/uzikilon/Todos.git](http://github.com/uzikilon/Todos.git)

理想情况下，我会跑步

耙茉莉花

来自我的项目目录，但 Jasmine 和 Require.js 应该如何相互交谈？

非常感谢有人有反馈，最终，在这个实验性回购中提出拉取请求：[https ://github.com/mulderp/backbone-require-test](https://github.com/mulderp/backbone-require-test)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:37:45.293

Uzi Kilon 是您链接到的 github 存储库的作者，他在这里写了一篇关于如何将两者设置在一起的[文章](http://kilon.org/blog/2012/08/testing-backbone-requirejs-applications-with-jasmine/)。

您问题的另一部分似乎建议您要自动运行测试，一种方法是使用 PhantomJS 无头 webkit 实现。[你会在这里](http://blog.jphpsf.com/2012/10/31/running-Jasmine-tests-with-Phantom-js-or-Webdriver/)找到一篇关于它的文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:30:43.197

Backbone.js 是如何加载到您的 ItemView 中的？如果您定义了可以在生产代码和 Jasmine 测试之间共享的 require.js 配置。同样，开发人员有不同的方法来实现这一点。

# mysql - 跨两列的唯一约束

> ID：13906267
> 
> 赞同：1
> 
> 时间：2012-12-16T22:52:16.720
> 
> 标签：mysql, sql

我有一个名为 friends 的表，其结构如下：

```
id
user_id
friend_id 
```

我希望行是唯一的，例如：

```
1, 6, 12
2, 6, 12 
```

会打破！我通过以下方式实现了这一目标：`ALTER TABLE friends ADD UNIQUE INDEX user_id_friend_id (user_id, friend_id);`

但我也希望以下是不可能**的**

```
1, 6, 12
2, 12, 6 
```

我怎么做？我尝试做同样的声明，但字段颠倒了，但它没有用......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:17:59.527

您可以使用触发器来确保`user_id <= friend_id`具有唯一约束的 this 将实现您想要的。您将需要这样的插入和更新触发器：

```
Create Trigger
  Friends_ins_check 
Before Insert On
  Friends
For Each Row
Begin
  If new.user_id > new.friend_id Then
    Set @temp = new.user_id;
    Set new.user_id = new.friend_id;
    Set new.friend_id = @temp;
  End If;
End 
```

[例子](http://sqlfiddle.com/#!2/0c1d0)

# java - 如何在 Eclipse 中附加 Java EE 的源代码？

> ID：13906268
> 
> 赞同：2
> 
> 时间：2012-12-16T22:52:25.237
> 
> 标签：java, eclipse, jakarta-ee, glassfish

> **可能重复：**
> [我在哪里可以找到 JavaEE 包的源代码？](https://stackoverflow.com/questions/7569658/where-can-i-find-javaee-packages-sources)

我从 Oracle 的网站下载了带有 Glassfish 服务器的 Java EE 6。然后我在 Eclipse 中创建了一个 Java EE 项目。但是当我在 Eclipse 中的 Java EE 类上单击“打开声明”时，我无法找到源代码附件。

它在类文件查看器中显示 Java EE 类的“未找到源”。但是，我可以从 glassfish3/jdk/src.zip 中安装的 JDK 目录中找到 Java SE 类的源代码。但是对于 Java EE API，我无法从下载的 Glassfish JDK 目录中找到源代码 zip 文件。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:41:53.033

glassfish 的源代码位于 glassfish 主下载页面，例如[http://download.java.net/glassfish/3.1.2.2/release/glassfish-3.1.2.2.zip](http://download.java.net/glassfish/3.1.2.2/release/glassfish-3.1.2.2.zip)

一旦你导航到一个类并且 Eclipse 告诉你它没有源，你可以单击定位源按钮并将它导航到 zip 文件。

**更新**我的错误，上面的链接是二进制文件，看起来源必须通过从 subversion 结帐直接获得，你可以在这里找到正确的分支来结帐[http://java.net/projects/glassfish/sources/svn/show /tags](http://java.net/projects/glassfish/sources/svn/show/tags)您需要查看您的启动日志或使用 asadmin 版本来计算内部版本号，以便您可以检查正确的源代码树。一旦您检查了正确的源代码树，您就可以将 eclipse 指向它。

有关更多详细信息，请参阅此博客[http://amitstechblog.wordpress.com/2011/04/29/glassfish-source-code/](http://amitstechblog.wordpress.com/2011/04/29/glassfish-source-code/)

# c - c for 循环首先跳转

> ID：13906276
> 
> 赞同：-3
> 
> 时间：2012-12-16T22:53:46.440
> 
> 标签：c

这是代码。问题是当程序通过循环运行时，它会自动填充第一个单词。如果我写 2\. 和 3\. word aaaa 和 bbbb - 输出如下：

> 1个字：
> 
> 2字：aaaa
> 
> 三字：bbbb

```
 int main(){
      int i,n,g,d,count;
            char Vir[50][20] char temp[50];

printf("Juris Kondrats ||| 111RDB271 ||| 3.grupa ||| 3.variants\n");
printf("enter amount of words: \n");
scanf("%d", &g);
printf("you need insert 10 words max 10 words long\n",g);
printf("press enter");
getche();

system("cls");

for(i=0;i<g;i++)
{
     printf("\ninsertt %d-o word\n",i+1);
     gets(Vir[i]);

}      
.... 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:11:49.973

我预计问题可能是由于在“按 Enter”提示后输入流中剩余的额外字符。即，换行。

我认为您使用的是 Windows 平台，因为您正在发出`cls`系统命令。

因此，“回车”键将被转换为回车符和换行符。你在这里有两个潜在的问题。

第一个是你`scanf`用来读取整数的。之后用户必须按 ENTER，但这些字符不会从输入中删除。我希望它会直接跳过“按 Enter”提示，因为流中有字符（其中两个）。

第一个将被 删除`getche()`，第二个将直接进入第一个`gets`调用并告诉它您刚刚到达行尾，因此用户输入了一个空字符串。

反正是这样的。

解决这个问题的一个蹩脚的方法是使用`gets`而不是`getche`在“按回车”提示符下使用，只需给它任何旧的字符串区域来写入（无论如何你都会忽略结果）。这不是一个好的解决方案，但此时任何更复杂的事情都可能会让您感到困惑。

# jquery - jQuery slideUp 和 slideDwon 问题

> ID：13906284
> 
> 赞同：0
> 
> 时间：2012-12-16T22:55:28.270
> 
> 标签：jquery, slidedown

我需要在页面加载后立即隐藏“二和三”类，并且能够再次单击菜单以将其向下滑动，我遇到了以下代码的问题：

```
$(document).ready(function() 
{

$('.two, .three').slideUp('slow');

$('.active_wrapper').click(function(){
    $('.two, .three').slideDown('slow');
});

}); 
```

HTML

```
<div class="nav_wrapper">

    <div class="active_wrapper one"><a class="active" href="">home</a></div>

    <div class="two"><a href="about.html">about</a></div>

    <div class="three"><a href="project.html">project</a></div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:58:59.400

像这样试试 - [**DEMO**](http://jsfiddle.net/GsF5E/)

```
$(document).ready(function() 
{

$('.two, .three').slideUp('slow');

$('.active_wrapper').click(function(e){
    e.preventDefault();
    $('.two, .three').slideToggle('slow');
});

});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T23:00:59.293

这是jsfiddle [http://jsfiddle.net/L6PkX/](http://jsfiddle.net/L6PkX/)

与 css 在 .two、.three 上显示 none 并删除上滑

```
<div class="nav_wrapper">

    <div class="active_wrapper one"><a class="active" href="#">home</a></div>

    <div class="two"><a href="about.html">about</a></div>

    <div class="three"><a href="project.html">project</a></div>

</div>

$(document).ready(function() 
{

$('.active_wrapper').click(function(){
    $('.two, .three').slideDown('slow');
});

});

.two, .three{
    display: none;
}} 
```

# php - PHP + CSS：输出选项框架内容

> ID：13906286
> 
> 赞同：1
> 
> 时间：2012-12-16T22:55:41.587
> 
> 标签：php, css, wordpress

来自编码 ub3r n00b 的两个问题...

首先，我使用的*是 Devin Price 的选项框架主题*，只是想知道如何在`<head>`我的文件部分中输出背景属性，**只有当**用户上传图像或选择颜色时，才能`header.php`从*主题选项*页面输出这？

 **我的`options.php`：

```
$options[] = array(
    'name' =>  __('Background', 'options_framework_theme'),
    'desc' => __('Add a background.', 'options_framework_theme'),
    'id' => 'background-one',
    'std' => $background_defaults,
    'type' => 'background' ); 
```

我的`Theme Options`页面：

![在此处输入图像描述](../Images/2bdf5d839fa85a6886405c50cd6134e7.png)

我的`header.php`：

```
<style type="text/css">
<?php $background = of_get_option('background-one');
    echo 'body {';
        if ($background['color']) {   
        echo '
        background: ' .$background['color']. ';';
        }

        if ($background['image']) {
        echo '
        background: url('.$background['image']. ') ';
            echo ''.$background['repeat']. ' ';
            echo ''.$background['position']. ' ';
            echo ''.$background['attachment']. ';';
        } 
    echo '
    }';
?>
</style> 
```

在我的网站前端工作得非常好，将 CSS 显示为：

```
body {
    background: #8224e3;
    background: url(images/bg03.gif) repeat top left fixed;
} 
```

但是如果用户没有通过*Theme Options*页面选择颜色或图像作为背景，源代码将输出：

```
body {
} 
```

如果用户没有选择背景，我怎么能删除上面的 CSS？

根据我收集的信息，`if`需要创建一个语句，但我不知道如何正确编写它，因为我对 php 还很陌生。

* * *

其次，我如何能够在框架中设置默认背景图像？

我的`options.php`：

```
// Background Defaults
    $background_defaults = array(
        'color' => '',
        'image' => '',
        'repeat' => 'no-repeat',
        'position' => 'top left',
        'attachment' => 'fixed' ); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:10:18.883

只需将一些东西移动到 if 语句中，如下所示：

```
<?php 
    $background = of_get_option('background-one');
    if ($background['color'] || $background['image']) {
        echo '<style type="text/css" >';
        echo 'body {';
        if ($background['color']) {   
            echo '
            background: ' .$background['color']. ';';
        }

        if ($background['image']) {
            echo '
            background: url('.$background['image']. ') ';
            echo ''.$background['repeat']. ' ';
            echo ''.$background['position']. ' ';
            echo ''.$background['attachment']. ';';
        } 
        echo '
        }';
        echo '</style>';
    }
?> 
```

而且，对于您的第二个问题，只需进行以下更改：

```
// Set up a default image
// NOTE: This is designed for the image to be located in your theme folder, inside an images folder
$default = get_bloginfo("template_url") . 'images/default.jpg';
// Background Defaults
$background_defaults = array(
    'color' => '',
    'image' => $default,
    'repeat' => 'no-repeat',
    'position' => 'top left',
    'attachment' => 'fixed' ); 
```**

# c# - Signalr - 加入多个组

> ID：13906289
> 
> 赞同：5
> 
> 时间：2012-12-16T22:56:23.450
> 
> 标签：c#, asp.net-mvc-3, signalr, signalr-hub

编辑：David Fowler 要求提供完整代码以尝试复制问题。这是完整的代码

除了这里转载的代码，我还上传了完整的Visual Studio 2010解决方案到以下网址

[http://www.sendspace.com/file/lfeurf](http://www.sendspace.com/file/lfeurf)（网址现已过期，不再有效）

请随时下载并测试它。

这是我的发现

1.  在 Hub 代码中仅添加一个组将使应用程序正常工作，没有问题
2.  添加 2 个组将阻止信号器工作或仅在一个方向工作。即：消息将从浏览器1传输到浏览器2，但不会从浏览器2传输到浏览器1

原始问题：我在 MVC3 网站中使用 Signalr 1.0.0-rc1。我的客户有时需要属于多个组。这是我的集线器和客户端javascript中的代码

客户端 javascript 和 HTML

```
<script type="text/javascript">
    //start signalr
    var message = $.connection.messageHub;

    // Declare a function on the message hub so the server can invoke it          
    message.client.send = function (message) {
        alert(message);
    }

    // Start the connection and join groups
    $.connection.hub.start();

    //bind click event of button to invoke send function on server
    $(document).ready(function () {
        $("#target").click(function () {
            message.server.send("Hello from signalr");
        });
    });
</script>

<button id="target">Click to send message to other clients</button> 
```

服务器端集线器

```
public class MessageHub: Hub
    {
        public Task AddGroups()
        {
            //add 1st group
            Groups.Add(Context.ConnectionId, "foo");
            //add 2nd group
            return Groups.Add(Context.ConnectionId, "foobar");
        }

        //this method will be called from the client
        public void Send(string message)
        {
            Clients.OthersInGroup("foobar").send(message);
        }

        //automatically join groups when client first connects
        public override Task OnConnected()
        {
            return AddGroups();
        }

        //rejoin groups if client disconnects and then reconnects
        public override Task OnReconnected()
        {
            return AddGroups();
        }

    } 
```

上面的代码应该在每个客户端第一次连接时添加两个组，但它不起作用。我使用调试器单步执行了 C# 代码，没有抛出任何错误。我也没有看到使用 Chrome 控制台的任何 javascript 错误，但客户端上没有调用 Send 函数。然后我更改了 AddGroups() 方法以仅添加一个组，如下所示

```
public Task AddGroups()
   {
        //dont add first group
        //Groups.Add(Context.ConnectionId, "foo");
        //add only second group
        return Groups.Add(Context.ConnectionId, "foobar");
   } 
```

现在我的应用程序完美运行。如何添加第二组？看来我误解了加入多个组。谁能告诉我正确的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T23:03:18.547

您的问题似乎`return Groups.Add(Context.ConnectionId, "foobar");`是`AddToGroups`5 秒后超时。在SignalR 验证具有指定的客户端已收到添加到组命令之前，`Task`返回的 from`Groups.Add`不会完成。`connectionId`如果这在 5 秒内没有发生，`Task`则取消。似乎目前存在一个错误，阻止在and`Groups.Add`内部等待。`OnConnected``OnReconnected`

由于您`Task`要从`OnConnected`and返回取消的`OnReconnected`内容，因此服务器正在阻止客户端建立连接。

一种解决方法是像这样忽略`Task`返回的`Groups.Add`：

```
public class MessageHub: Hub
{
    public Task AddGroups()
    {
        //add 1st group
        Groups.Add(Context.ConnectionId, "foo");
        //add 2nd group
        return Groups.Add(Context.ConnectionId, "foobar");
    }

    //this method will be called from the client
    public void Send(string message)
    {
        Clients.OthersInGroup("foobar").send(message);
    }

    //automatically join groups when client first connects
    public override Task OnConnected()
    {
        AddGroups();
        return base.OnConnected();
    }

    //rejoin groups if client disconnects and then reconnects
    public override Task OnReconnected()
    {
        AddGroups();
        return base.OnReconnected();
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-23T20:20:20.733

MyHub.cs

```
public async Task Subscribe(IEnumerable<string> groups)
    {
        foreach(var group in groups)
        {
            await Groups.Add(Context.ConnectionId, group);
        }
    } 
```

Javascript：

```
$.connection.hub.start().done(function () {
                var groups = ["foo","bar"];

                tileHub.server.subscribe(groups)
}); 
```

# c - 这个结构是做什么的？

> ID：13906295
> 
> 赞同：0
> 
> 时间：2012-12-16T22:57:38.350
> 
> 标签：c, linux

我在“linux/list.h”中遇到了一个结构，如下所示。我不完全了解它或如何使用它？它似乎是某种标记结构，因为它声明任何变量以包含任何信息，而不是自身为空。你会如何使用它？

```
struct list_head {
  struct list_head *next, *prev;
  }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T22:59:55.560

是的，没有数据元素的链表看起来很奇怪。但是，您是否尝试在其他标头中搜索该结构的用法？

我猜他们会在其他需要链表的结构中使用这个结构，比如缓冲区空闲列表等。你会在那里找到数据元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T22:59:24.237

它被称为链表。[在维基百科](http://en.wikipedia.org/wiki/Linked_list)上查看这个（尤其是双链表）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T22:59:33.813

这是典型的链表结构。它是一个保存指向相邻节点的指针的节点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T01:31:02.763

它可能是一个光标，它指向一个链表并告诉你的位置。这对单链表很有用。

# ios - reloadData 不适用于另一个 UITableView 静态单元中的 UITableView

> ID：13906300
> 
> 赞同：1
> 
> 时间：2012-12-16T22:58:20.233
> 
> 标签：ios, uitableview, afnetworking, reloaddata

我有一个带有静态单元格的 UITableView，其中包含另一个 UITableView，当我调用`reloadData`. 使用ios5。

当我运行下面的代码时，`subViewTable`会显示在`viewDidLoad`AFNetwork 请求之后定义的值并且不会更新。

根据 NSLog 输出，在我调用`reloadData`AFNetwork 请求的成功块后，未调用 cellForRowAtIndexPath。

我的代码如下

**主视图控制器.h**

```
#import <UIKit/UIKit.h>
#import "SubViewTableViewController.h"

@interface MainController : UITableViewController{
  SubviewTableViewController *subViewTVC;
  IBOutlet UITableView *subViewTable;
} 
```

**主视图控制器.m**

```
@import "SubViewTableViewController.h"

@implementation MainController

- (void)viewDidLoad
{
  [super viewDidLoad];
  if (subViewTableViewController == nil)
  {
    subViewTVC = [[SubViewTableViewController alloc] init];
  }
  [subViewTable setDataSource: subViewTVC];
  [subViewTable setDelegate: subViewTVC];
  subViewTableViewController.view = subViewTableViewController.tableView;
 }

@end 
```

**子视图表控制器.h**

```
#import <UIKit/UIKit.h>

@interface SubViewTableController : UITableViewController <UITableViewDataSource, UITableViewDelegate>{
  NSMutableArray *data;
}

@end 
```

**子视图表控制器.m**

```
#import "SubViewTableController.h"
#import "AFNetworking.h"

@implementation SubViewTableController

- (void)fetchCustomData
{
  request = // Set NSM mutable request;
  AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest: request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

    // Omitted code that adds JSON objects to data array 

    [self.tableView performSelectorOnMainThread:@selector(reloadData)                                withObject:nil waitUntilDone:NO];
  }
failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {};
  [operation start];
} 

- (void)viewDidLoad
{
  [super viewDidLoad];
  if (data == nil)
  {
    data = [NSMutuableArray arrayWithObjects:@"1",@"2", nil];
  }
  [self fetchCustomData];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
  // Return the number of sections.
  return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
  // Return the number of rows in the section.
  NSLog(@"Data Count: %i", data.count);
  return [data count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  static NSString *CellIdentifier = @"DataCell";
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  // Configure the cell...
  if (cell == nil){
      cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
  }
  cell.textLabel.text = [data objectAtIndex:indexPath.row];
  NSLog(@"Cell item: %@", [data objectAtIndex:indexPath.row]);
  return cell;
}

@end 
```

**NSLog 输出**

```
2012-12-16 13:59:31.538 testing[37592:f803] Data Count: 2
2012-12-16 13:59:31.539 testing[37592:f803] Cell item: 1
2012-12-16 13:59:31.541 testing[37592:f803] Cell item: 2
2012-12-16 13:59:31.575 testing[37592:f803] Data Count: 6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T02:22:51.397

我最终从触发的回调`SubView`向我发送了一个通知。`MainView``success``AFJSONRequestOperation``[subViewTable reloadData]`

**SubViewTableController.m AFJSONRequestOperation 成功回调：**

```
{
[[NSNotificationCenter defaultCenter] postNotificationName:@"SubViewUpdated" object:nil];
} 
```

**主视图控制器.m**

```
- (void)viewDidLoad
{
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(subViewUpdated) name:@"SubViewUpdated" object:nil];
}

- (void)subViewUpdated
{
   [subViewTable reloadData];
}

- (void)viewDidUnload
{
  //Unregister notifications
  [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:31:01.960

尝试在后台线程中获取...

```
-(void)updateDataInBackground {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND,0), ^(void) {
        // Background Thread:
        // hard work/updating/fetching here:

        // when finished ...
        dispatch_async(dispatch_get_main_queue(), ^(void) {
            // Main Thread:
            [myTableView reloadData];
        }); 
    });
} 
```

# algorithm - 给定几个字符串，通过修改字母表可以按字典顺序最少有多少个字符串？

> ID：13906304
> 
> 赞同：2
> 
> 时间：2012-12-16T22:58:44.197
> 
> 标签：algorithm, alphabetical

字符串的数量可以很大，如 30000。给定 N 个字符串，在修改英文字母后输出哪些字符串在字典上最少。例如acdbe......

例如，如果字符串是：

```
omm
moo
mom
ommnom 
```

“妈妈”在最初的英文字母中已经是字典顺序最少的了。我们可以通过在字母表中切换“m”和“o”（“abcdefghijklonmpqrstuvwxyz”）来最小化“omm”这个词。其他那些你不能按字典顺序排列的**首先**，不管你做什么。

有什么快速的方法吗？我没有办法解决这个问题，除非尝试每一个可能的字母表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T00:25:44.367

You want to be able to say weather one of the strings (say s) can be made smaller. You can turn this into a problem for detection of cycles in a graph. Here is how:

Consider the graph consisting of 26 vertices: V = { 'a', 'b', ..., 'z' } Suppose that s is the smallest and consider the letters of s in order, first then second ect.

When you are considering the first letter you know that s[0] should be smaller than x[0] for all other strings x. Now add an edge in the graph from s[0] to x[0] for all x for which they are not the same letter. The edge means "smaller than". Now consider the second letter but only look at those string that had the same first letter as s. Do the same thing - add an edge from s[1](https://stackoverflow.com/questions/261573/best-algorithm-for-detecting-cycles-in-a-directed-graph) to y[1](https://stackoverflow.com/questions/261573/best-algorithm-for-detecting-cycles-in-a-directed-graph) for all y in this reduces set. Then move to the third letter and consider only the strings that had the same first and second letter.. And so on (you can use a Set data structure which first contains all the strings but s and you would remove from it as you go).

Now after you have the graph built you want to know if there is a cycle or not. Indeed, if there is a cycle this means that this s cannot be the smallest, because following the cycle you will have to make the first letter in the cycle smaller than itself, which is impossible. On the other hand if you don't have a cycle, then the graph is a DAG (directed acyclic graph) and any DAG can be topologically sorted, which means its vertices (i.e. the letters of the alphabet) can be ordered in such a way so that any edge goes from smaller to larger. With this order you'll have s be the smallest because of how the graph was constructed.

You can look about [detecting cycles in directed graphs](https://stackoverflow.com/questions/261573/best-algorithm-for-detecting-cycles-in-a-directed-graph) - it's very common problem, whose complexity is `O(|V|+|E|)`. In this case |V| = 26 and |E| <= n (because every time when you add an edge in the graph you reduce the set of the strings to check by one).

Thus the complexity is `O(n)`.

If you want to check each of the strings you'll get an overall complexity of `O(n^2)`.

# mediawiki - 无法获取本地托管的英语维基词典副本以包含翻译部分

> ID：13906310
> 
> 赞同：-1
> 
> 时间：2012-12-16T22:59:24.747
> 
> 标签：mediawiki, mediawiki-api

我使用 MWDumper - [http://www.mediawiki.org/wiki/Mwdumper](http://www.mediawiki.org/wiki/Mwdumper) - 将英语维基词典的 xml 转储（特别是名为 enwiktionary-20120930-pages-meta-current.xml 的文件）导入本地服务器.

我发现在翻译部分（在每个英语单词的每一页上）下，在我应该能够看到外语定义的每种语言名称旁边，我看到的是*Template:Tø*，*Template:T+*，或*模板：T-*我不知道为什么会这样。

作为一个实验，我还使用了 WikiTaxi - [http://www.yunqa.de/delphi/doku.php/products/wikitaxi/index](http://www.yunqa.de/delphi/doku.php/products/wikitaxi/index) - 具有完全相同的 XML 转储，并且在 WikiTaxi.exe 下查看时没有这个问题。

我一直在通过[mediawiki.org](http://www.mediawiki.org/wiki/MediaWiki)寻找答案，但到目前为止还没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:40:29.963

好的，我发现 MWDumper 在导入 xml 转储时做了正确的事情。所有的翻译都在那里。我只需要单击*Template:T+*、*Template:T-*和*Template:Tø*链接并根据[http://www.mediawiki.org/wiki/Templates](http://www.mediawiki.org/wiki/Templates)上的说明添加模板。

# android - android 4.2 模拟器中的软件按钮未显示（平板电脑）

> ID：13906314
> 
> 赞同：1
> 
> 时间：2012-12-16T22:59:44.340
> 
> 标签：android, android-emulator, back-button, android-homebutton

[我刚刚从开发者网站](http://developer.android.com/sdk/index.html)安装了最新的 Android ADT 包。它的版本是 v21.0.0。

现在我想在模拟器中测试我的平板电脑应用程序（专为 10.1" xlarge mdpi 设计），但我无法获得任何用于主页/返回/...的软件按钮

这是我的设备配置。此配置随后分配给 avd。 ![http://i.stack.imgur.com/Q7xvP.png](../Images/dfe26f11efd288f5ad645e3072b3f43f.png)

硬件按钮也不能正常工作（您不能在类似平板电脑的模拟器中设置硬件按钮）。

目标 api 是 15 级 (android 4.0.3)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:10:16.357

打开 AVD Manager，然后检查您的设备，单击`edit`，然后在`Hardware` 您可以看到的`Add`按钮中，单击它，然后检查您想要的所有内容。但是可能会有一个问题，比如你选择了一些没有home键之类的设备，我的意思是这些按钮在屏幕上，而不是在这个之外，比如像[这样](http://www.blogcdn.com/www.engadget.com/media/2011/08/galaxy-tab-7.7-product-image-lead-1314834951.jpg)

# jquery - Jquery $.ajax 返回内部服务器错误

> ID：13906316
> 
> 赞同：1
> 
> 时间：2012-12-16T22:59:59.470
> 
> 标签：jquery, asp.net, ajax

我确定我在这里做的不好，但我不知道是什么。

```
 <script type="text/javascript">
        $(function () {
            $("li").bind("click", function () {
                var sel = $(this).attr('id').toString();
                $.ajax({

                    type: "POST",
                    contentType: "application/json",
                    data: sel,
                    url: "Default.aspx/SaveValue",
                    dataType: "text",
                    success: function (data) {
                        alert(data.d);
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        debugger;
                    }
                });
            });
        });
    </script> 
```

请问有什么建议吗？这是收集的调试信息![在此处输入图像描述](../Images/c8ee989a80f12efa4e91aebd13aa2460.png)

**更新：**通过更改为`data: "{var1:'test'}",`，`dataType: "json",`一切都按预期工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T23:39:21.447

通过更改为`data: "{var1:'test'}",`，`dataType: "json",`一切都按预期工作。特别感谢 Sparky 和当然所有的评论者

# css - 选择标签在 Firefox 中比在 Chrome 中低 1 个像素

> ID：13906317
> 
> 赞同：0
> 
> 时间：2012-12-16T23:00:05.077
> 
> 标签：css, html

```
#allday {
    width: 180px;
    height: 20px;
    margin-top: 2px !important;
    margin-right: 0px;
    padding: 0px;
    -webkit-appearance: menulist;
    box-sizing: border-box;
    -webkit-box-align: center;
    border: 1px solid;
    border-image: initial;
    white-space: pre;
    -webkit-rtl-ordering: logical;
    color: black;
    background-color: white;
    cursor: default;
} 
```

我检查了两个浏览器中的元素，但我并没有真正看到差异在哪里。有没有人用 select 标签经历过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:10:54.140

由于无法看到小提琴或示例，这是一个疯狂的猜测，但我之前遇到过一些问题，不同的浏览器显示不同的高度/填充/边距，并且添加`display:block`有时会有所帮助......但并非总是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:59:41.023

```
 #allday {
            width: 180px;
            height: 20px;

            margin-right: 0px;
            padding: 0px;
            -webkit-appearance: menulist;
            box-sizing: border-box;
            -webkit-box-align: center;
            border-image: initial;
            white-space: pre;
            -webkit-rtl-ordering: logical;
            color: black;
            background-color: white;
            cursor: default;
            display: block;
        } 
```

我还必须在选择上方的标签上添加 0px 下边距，但是 br 没有被修改。感谢你的帮助！

# css - 在 li-class 中使用 sprite png 并在 div 中显示

> ID：13906318
> 
> 赞同：0
> 
> 时间：2012-12-16T23:00:20.743
> 
> 标签：css, html, styles, html-lists

我在`li`类中的 div 中显示精灵时遇到了一些问题。

所以结构是：

```
<li id="aa">
    <div><a href="#">one</a></div>
</li> 
```

和CSS：

```
li{
        width: 120px;
    height: 18px;
    margin-top: 5px;
}
li div{
        width: 20px;
    height: 10px;
    background-image:url(../images/sprite.png);
    background-repeat: no-repeat;
    margin-left: 0px;
    font-weight:bolder;
    border: 1px solid #fff;
} 
```

当我使用它时，我什至可以在 div 之外看到精灵。所以我尝试将其添加到`li`：

> 背景图像：无；

这使得 div 中的图像也不可见。

因此，如果有人知道这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:04:29.090

看来您缺少`;`后背景图像，请参见下文

`background-image:url(../images/sprite.png);`

# ios - iOS：自定义对象上的 FilterUsingPredicate

> ID：13906322
> 
> 赞同：1
> 
> 时间：2012-12-16T23:01:05.440
> 
> 标签：ios, nsmutablearray, nspredicate

我有一个自定义类扩展`NSObject`. 我正在维护`NSMutableArray`此类对象。情况如下，

```
customObject-class {
   NSString *name;
   int ID;
   .....and many other properties;
}

customObjectsArray [
   customObject1,
   customObject2,
   ...etc
] 
```

现在我正在尝试使用 filterUsingPredicate 删除名称为 nil 的对象，如下所示，但它返回的对象很少或没有，而我知道有数百个名称不是 nil 或空的对象。有人可以告诉我这里可能出了什么问题。

```
[customObjectsArray filterUsingPredicate:[NSPredicate predicateWithFormat:@"name != nil"]]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T23:21:55.290

你为什么不试试这样：

```
NSMutableArray *array=...;
[array filterUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {
    CustomObject *customObject=(CustomObject *) evaluatedObject;
    return (customObject.name!=nil);
}]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:39:38.560

当我回复@rdelmar 时，我发现了一个问题。在 customObject1 的数据实际初始化之前调用了该谓词。我应该检查数据标志的状态，表明数据已为此特定对象初始化，然后应用过滤器。有效。如果数据未初始化，则所有对象的名称都为 nil！

# c++ - 在 C++ 中为对象定义“+”符号

> ID：13906323
> 
> 赞同：-1
> 
> 时间：2012-12-16T23:01:10.133
> 
> 标签：c++

> **可能重复：**
> [运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading)

您是否可以在 C++ 中为对象定义诸如“+、-、*、/”之类的符号？我在上面找不到任何文档，这样做会很有用/令人兴奋！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:14:15.293

编程时必须学习的一件事是细微的区别很重要。通常它们很重要。您应该熟悉技术术语及其确切含义。

你称那些'符号'。在 C++ 中，符号是几种不同的可能事物之一：

*   您指的是链接器用来连接程序部分的东西。函数和全局变量的名称成为“符号”。
*   或者您指的是一类通常称为“符号”的单个字符。这是一个非常模糊的集合，但通常包括通过按住 shift 键并在美式英语键盘上键入所有数字所获得的大部分内容。但作为一个符号，这些对 C++ 来说毫无意义。

从您的问题的上下文来看，很明显，您在提到“符号”一词时并不是指这两件事中的任何一个。你认为你指的是我上面列出的第二种情况。但是，虽然表面上看起来是这样，但事实并非如此。您所指的称为“操作员”。运算符是告诉编译器您正在尝试对一个值进行操作的东西。它们作为表达式的一部分出现。与大多数语言相比，C++ 的数量非常多。

编译器可以将符号解释为运算符。但是符号不是运算符，运算符也不是符号。例如`&&`是操作员。但它也是两个`&`符号。再举一个例子，是一个符号，但标准 C++`@`中没有运算符。`@`

如果您搜索“运算符重载”，您将获得所需的信息。

# python - 如何使用 NppExec 正确关闭进程？

> ID：13906324
> 
> 赞同：2
> 
> 时间：2012-12-16T23:01:19.827
> 
> 标签：python, notepad++, pywin32, nppexec

我不确定这里发生了什么，但即使我在 NppExec 控制台中使用 Ctrl-C 结束进程（在执行 while 循环期间），以下代码仍会继续运行。我重新启动计算机以停止 Ctrl 键发送。但是，如果我在 Window 的 cmd 提示符下运行脚本，Ctrl-C 会很好地结束脚本。

```
import time
import win32com.client

shell = win32com.client.Dispatch("WScript.Shell")

time.sleep(2)
while True:
  shell.SendKeys('^') # Ctrl key
  time.sleep(0.5) 
```

我使用的 NppExec 运行命令是：`cmd /C python -u "$(FULL_CURRENT_PATH)"`

让我知道我是否可以提供更多信息。谢谢。

# codenameone - 我如何让 codenameone 使用 java.io.bufferedreader

> ID：13906326
> 
> 赞同：4
> 
> 时间：2012-12-16T23:01:50.827
> 
> 标签：codenameone

我正在尝试`java.io.BufferedReader`在 Codenameone 中使用。但是，当我编译时出现此错误

```
/Users/jamesagada/NetBeansProjects/reportYa/src/com/apiomat/frontend/Datastore.java:27: cannot find symbol
symbol  : class BufferedReader
location: package java.io
import java.io.BufferedReader; 
```

相同的东西`ObjectOutputStream`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:18:53.830

Codename One 目前不支持这些类中的任何一个。Codename One 中的所有流都默认缓冲，因此您不需要缓冲阅读器的缓冲功能。要使用阅读器，您可以使用`InputStreamReader`非常接近的阅读器。

不支持对象序列化，也不支持反射，因为这些功能会防止混淆并强制打包整个 VM，从而完全破坏应用程序性能。所以没有`ObjectOutputStream`。`Storage`您可以通过 IO 类中和 IO类中可用的对象外部化 API 获得等效的功能`Util`，请参阅开发人员指南关于外部化的部分。

# magento - 如何检查具有给定增量 id 的订单是否已存在于 magento 中？

> ID：13906327
> 
> 赞同：4
> 
> 时间：2012-12-16T23:02:09.187
> 
> 标签：magento

我是 Magento 的新手。

检查具有给定增量 id 的订单是否已经存在的正确方法是什么？

显而易见的方式：

```
 $order = Mage::getModel('sales/order')->loadByIncrementId($reservedOrderId);
    if ($order) {
        Mage::log('already have order with id ' . $reservedOrderId);
        return $order;
    } 
```

不起作用，因为我得到了一个新的空模型实例。

magento 中查看我是否没有该 id 的此类模型的正确方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T01:41:02.170

我在核心代码中看到的最常见的方法只是`load()`sa 模型并检查是否分配了主键。在您的情况下，这将如下所示 - 请注意对逻辑条件（`$object->getId()`vs. `$object`）的非常轻微的调整：

```
$order = Mage::getModel('sales/order')->loadByIncrementId($reservedOrderId);
if ($order->getId()) {
    Mage::log('already have order with id ' . $reservedOrderId);
    return $order;
} 
```

这是一个简单的错误，但请记住，*在 Magento 数据模型上加载数据的调用将始终返回对象实例*。只有**当存储后端有结果时**，对象才会被数据修饰，因此是主键。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T01:05:31.477

根据我的经验，有两种方法可以做到这一点：

```
if ($order->hasData()) {
    // order already exists
} 
```

或者，通过使用集合；

```
$collection = Mage::getModel('sales/order')->getCollection()->addFieldToFilter('increment_id', $reservedOrderId);

if ($collection->count()) {
    // order already exists
} 
```

在您的情况下，可能最好使用第一个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T01:09:54.750

有多种方法可以解决这个问题。首先，由于您知道预期的增量 ID，因此您可以在取回模型后检查它

```
$increment_id   = '100000002';
$order          = Mage::getModel('sales/order')->loadByIncrementId($increment_id);

if($order->getIncrementId() == $increment_id)
{
    var_dump("Increment IDs match, that means there's an order");
}
else
{
    var_dump("Increment IDs don't match, that means there's no order");
} 
```

同样，尽管即使没有匹配也会返回一个模型，但您可以检查该模型的数据——空数组意味着没有加载任何内容

```
$increment_id   = '100000002';
$order          = Mage::getModel('sales/order')->loadByIncrementId($increment_id);

if($order->getData())
{
    var_dump("Data array means there's an order");
}
else
{
    var_dump("Empty data array means there's no order");
} 
```

最后，您可以使用增量 id 过滤器加载集合，并检查它包含多少项

```
$increment_id   =   '100000002';
$c              =   Mage::getModel('sales/order')->getCollection()
                    ->addFieldToFilter('increment_id',$increment_id);        
if(count($c) > 0)
{
    var_dump("A collection with more than zero items means the order exists");
}
else
{
    var_dump("An empty collection means it does not");
} 
```

我更喜欢最后一种方法来进行简单的“做/不做”存在检查，因为集合不会触发模型的加载后方法，这意味着它理论上性能更高。也就是说，没有一种方法比另一种更有效——只要尝试在任何地方使用相同的技术来获得更易读的代码。

# android - VideoView 错误仅在真实设备上

> ID：13906331
> 
> 赞同：0
> 
> 时间：2012-12-16T23:02:43.840
> 
> 标签：android, android-videoview

在片段中，我有 videoview 并播放录制的 whit 模拟器相机 .mp4 视频。一切都很好，在模拟器中视频正在播放，但是在真实设备上，当我尝试播放另一个视频时，再次以 .mp4 格式用我的相机录制，屏幕变黑并黯然失色“BitmapFactory 类。找不到源”。我正在 4.0.4 设备上进行测试，目标是 8 到 17 api。图像在模拟器和真实设备上都可以正常打开。没有LOGcat错误，一切都是绿色的......

片段代码

```
public class PreviewFragment extends Fragment {
View view;
//variable
File file;
boolean image;
//views
VideoView videView;
ImageView imageView;
ImageButton imageButton;

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    if(container == null) {
        return null;
    }
    view = inflater.inflate(R.layout.fragment_preview, container, false);
    //elements
    imageView = (ImageView) view.findViewById(R.id.imageView1);
    videView = (VideoView) view.findViewById(R.id.videoView1);
    //variables from activity
    file = ((PreviewActivity)getActivity()).file;
    image = ((PreviewActivity)getActivity()).image;

    //main run
    if(image == true) {
        imageView.setImageURI(Uri.parse(file.getAbsolutePath()));
    }
    else {
        videView.setVideoURI(Uri.parse(file.getAbsolutePath()));
        videView.setMediaController(new MediaController(getActivity()));
        videView.requestFocus();
        videView.start();
    }

    return view;
}
} 
```

和xml代码

```
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/black" >

<VideoView
    android:id="@+id/videoView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_centerInParent="true" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_centerInParent="true"
    android:contentDescription="@string/text_fullscreen" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T19:44:36.620

奇怪的是，在 4.1 的模拟器中，如果我在片段中播放视频，但在真正的 4.0 设备上，视频必须托管在活动中才能播放，这样视频在模拟器和真实设备中播放。不知道为什么，但它是这样工作的。

# php - 使用 REGEX 解析带有布尔运算符的搜索字符串

> ID：13906332
> 
> 赞同：1
> 
> 时间：2012-12-16T23:02:58.490
> 
> 标签：php, regex, string, parsing, search

我找到了这个答案 - [https://stackoverflow.com/a/7943464/1901367](https://stackoverflow.com/a/7943464/1901367) - 它给了我这个非常有用的代码，允许我解析包含引号和空格的搜索字符串。

```
preg_match_all('/(?<!")\b\w+\b|(?<=")\b[^"]+/', $subject, $result, PREG_PATTERN_ORDER); 
```

我想知道是否有人可以告诉我如何更改此代码，以使 + 和 - 等布尔运算符保持不变，因为当前代码将它们剥离。

我想使用这些运算符对我的数据库进行全文布尔搜索，但我对这个我不理解的 REGEX 感到困惑。

示例输入和输出。

输入：'"this is some" text here is -more -"exlude me"' 输出：[this is some] [text] [here] [is] [-more] [-exclude me] 这些将在 $结果数组

因此，由空格分隔的所有内容都是单独的项目，除非它是用“”括起来的短语。这已经有效，但是在我有 -more 和 -"exlude me" 的地方，当前的结果将是 [more] 和 [exclude me] 丢失我想要保留的减号。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:48:29.703

您可以使用一个简单的正则表达式来提取标记，包括引号和其中的所有内容，然后在使用它们之前将它们美化。像这样的东西：

```
function query_tokens($query)
{
    $regex = '/-?"[\pL\s]+"|-?\pL+/';

    preg_match_all($regex, $query, $tokens, PREG_SET_ORDER);

    foreach ($tokens as & $token)
    {
        $token = array_shift($token);

        $modifier = NULL;

        if ($token[0] === '-' || $token[0] === '+')
        {
            $modifier = $token[0];

            $token = substr($token, 1);
        }
        if ($token[0] === '"')
        {
            $token = trim($token, '"');
        }
        $token = $modifier.$token;
    }

    return $tokens;
} 
```

使用的字符串和函数的结果：

```
var_dump(query_tokens('"this is some" text here is -more -"exlude me"'));
array (size=6)
  0 => string 'this is some' (length=12)
  1 => string 'text' (length=4)
  2 => string 'here' (length=4)
  3 => string 'is' (length=2)
  4 => string '-more' (length=5)
  5 => string '-exlude me' (length=10) 
```

正则表达式很棒，但有时它们会使事情变得比需要的更复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T01:09:45.220

您无法使用正则表达式捕获“-exclude me”，因为匹配项始终是连续的。充其量，您可以修改正则表达式以匹配“-more”标记，如下所示：

`(?<!")-?\b\w+\b|(?<=")\b[^"]+`

# android - 区分 android 应用程序的管理员和用户

> ID：13906334
> 
> 赞同：0
> 
> 时间：2012-12-16T23:03:04.320
> 
> 标签：android

我无法理解它。如果应用程序不提供登录功能，如何区分 android 应用程序的管理员和用户？管理员如何管理应用程序的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:22:35.060

好的，如果您想对其进行更改，您需要将数据库存储在服务器上的某个位置，然后您需要使用此数据库连接您的应用程序。如果您只有 db - 说应用程序/设备，则只有用户可以进行更改，如果您愿意，您必须授予他这样做的特权。

# mysql - 如何在 vb.net 中备份我的 sql 数据库

> ID：13906336
> 
> 赞同：2
> 
> 时间：2012-12-16T23:03:10.813
> 
> 标签：mysql, sql, vb.net

我希望我的 vb 应用程序的用户能够将数据库（MySQL）备份和恢复到存储介质上。我的问题是我不想在代码中指定'c:\，因为我希望应用程序能够找到哑文件，无论它是否在驱动器 c 上创建。下面是我使用的代码，但是当我将它安装在另一台机器上时，它的 Windows 和程序文件位于 D:。事实证明，我必须检查每台机器的驱动器号，在我发布应用程序之前在代码中更改它以允许我不想这样做的备份。我希望它是通用的。因此转储文件是否位于驱动程序 C、G 或其他任何位置。任何帮助。下面是我使用的代码。将 cmd 调暗为字符串

```
Private Sub cmdBackup_Click()
    Screen.MousePointer = vbHourglass
    DoEvents

    cmd = Chr(34) & "C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqldump" & Chr(34) & " -uroot -psecretpswd --routines --comments db_name > c:\MyBackup.sql"
    Call execCommand(cmd)

    Screen.MousePointer = vbDefault
    MsgBox "done"
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:07:52.520

有一个名为[MySqlBackup.NET](http://www.codeproject.com/Articles/256466/MySqlBackup-NET-MySQL-Backup-Solution-for-Csharp-V)的编译 DLL 。实际上它是`MySqlDump`.

特征

*   导出/导入表的结构和行
*   导出/导入存储过程、函数、触发器、事件、视图
*   自定义表和行导出。
*   能够对进程应用加密。
*   导出 BLOB 并另存为文件。
*   在导入过程中收集 SQL 语法错误。
*   导出/导入将报告进度。启用进度条的使用。
*   能够在同步或异步模式下执行。
*   导出/导入到/从 Zip 文件。

有关更多信息，请参阅下面的链接，

*   [MySqlBackup.NET - C#、VB.NET、ASP.NET 的 MySQL 备份解决方案](http://www.codeproject.com/Articles/256466/MySqlBackup-NET-MySQL-Backup-Solution-for-Csharp-V)

**已编辑：添加了代码示例**

**备份 MySql 数据库**

```
Dim con As String = "server=localhost;user=root;pwd=1234;database=test;"
Dim file As String = "C:\backup.sql"
Dim mb As New MySqlBackup(con)
mb.ExportInfo.FileName = file
mb.Export() 
```

**恢复 MySql 数据库**

```
Dim con As String = "server=localhost;user=root;pwd=1234;database=test;"
Dim file As String = "C:\backup.sql"
Dim mb As New MySqlBackup(con)
mb.ImportInfo.FileName = file
mb.Import() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:39:26.140

通常，此命令是使用应用程序外部的参数构建的，而不是 MySqlDump 的硬编码路径、数据库名称和目标文件夹的路径。

你的代码应该改成这样

```
Private Sub cmdBackup_Click()
    Screen.MousePointer = vbHourglass
    DoEvents
    Dim mySqlDumpCmd = ConfigurationManager.AppSettings("PathToMySqlDump")
    Dim dbName = ConfigurationManager.AppSettings("DatabaseToBackup")
    Dim destPath = ConfigurationManager.AppSettings("DestinationPath")
    cmd = Chr(34) & mySqlDumpCmd & Chr(34) & " -uroot -psecretpswd --routines --comments " +
          dbName & " > " & destPath
    Call execCommand(cmd)
    Screen.MousePointer = vbDefault
    MsgBox "done"
End Sub 
```

并且您的 application.config 文件包含这些值

```
<?xml version="1.0"?>
<configuration>
    <configSections>
    .......

    <appSettings>
    <add key="PathToMySqlDump" value="C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqldump.exe"/>
    <add key="DatabaseToBackup" value="db_name"/>
    <add key="DestinationPath" value="C:\MyBackup.sql"/>
    </appSettings>
    ....... 
```

通过这种方式，您可以从应用程序的配置文件中读取关键信息。如果需要，您可以轻松更改命令使用的信息，而无需触及应用程序中的任何内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T17:02:50.307

使用此代码。这个对我有用。

我遇到了这样的问题，然后找到了这篇文章

“ [http://www.experts-exchange.com/Programming/Languages/.NET/Q_27155602.html](http://www.experts-exchange.com/Programming/Languages/.NET/Q_27155602.html) ”

示例在 C# 中。我手动将其转换为 vb.net 并添加转换为“utf8”。

```
 Imports System.Text
   Public Class Form1
       Dim OutputStream As System.IO.StreamWriter
        Sub OnDataReceived1(ByVal Sender As Object, ByVal e As    System.Diagnostics.DataReceivedEventArgs)
          If e.Data IsNot Nothing Then
          Dim text As String = e.Data
          Dim bytes As Byte() = Encoding.Default.GetBytes(text)
          text = Encoding.UTF8.GetString(bytes)
          OutputStream.WriteLine(text)
         End If
    End Sub

    Sub CreateBackup()
        Dim mysqldumpPath As String = "d:\mysqldump.exe"
        Dim host As String = "localhost"
        Dim user As String = "root"
        Dim pswd As String = "Yourpwd"
        Dim dbnm As String = "BaseName"
        Dim cmd As String = String.Format("-h{0} -u{1} -p{2} {3}", host, user, pswd, dbnm)
        Dim filePath As String = "d:\backup\fieName.sql"
        OutputStream = New System.IO.StreamWriter(filePath, False, System.Text.Encoding.UTF8)

        Dim startInfo As System.Diagnostics.ProcessStartInfo = New System.Diagnostics.ProcessStartInfo()
        startInfo.FileName = mysqldumpPath
        startInfo.Arguments = cmd

        startInfo.RedirectStandardError = True
        startInfo.RedirectStandardInput = False
        startInfo.RedirectStandardOutput = True 
        startInfo.UseShellExecute = False
        startInfo.CreateNoWindow = True
        startInfo.ErrorDialog = False

        Dim proc As System.Diagnostics.Process = New    System.Diagnostics.Process()
        proc.StartInfo = startInfo
        AddHandler proc.OutputDataReceived, AddressOf OnDataReceived1
        proc.Start()
        proc.BeginOutputReadLine()
        proc.WaitForExit()

        OutputStream.Flush()
        OutputStream.Close()
        proc.Close()
     End Sub

     Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As      System.EventArgs) Handles MyBase.Load
       CreateBackup()
       End Sub
      End Class 
```

# smalltalk - 编译文本流中的局部变量 (smalltalk)

> ID：13906337
> 
> 赞同：1
> 
> 时间：2012-12-16T23:03:12.600
> 
> 标签：smalltalk, squeak

我正在尝试`#new`覆盖`MyObject`. 问题是当文本被编译时，局部变量`disp`和`oldNew`分别更改为`t1`和`t2`（我使用的是 Squeak 4.3），然后它不能发送`oldNew`到`self`.
我可以更改他们的名字，但我不确定这是个好主意。这是我所拥有的基本概述：

```
MyObject class methodDict at: #new put:
    (Object compilerClass new
    compile: 'new
        | disp oldNew |
        oldNew := MyObject class methodDict at: #new.
        disp := Dispatcher new.
        ^disp xxxViewedObject: self oldNew'
    in: MyObject
    notifying: nil
    ifFail: []) generate 
```

我不是 100% 确定我正在做的事情是否是正确的方法，所以欢迎其他想法。

编辑：好的，所以我现在意识到它正在寻找中`oldNew`的消息`MyObject`，但是我该如何运行编译的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:53:33.677

显然我的问题是它`MyObject`是一个子类，`ProtoObject`现在是一个子类`Object`。
这是此更改后似乎可以工作的代码：

```
MyObject class methodDict at: #new put:
    (Object compilerClass new
    compile: 'new
        | disp |
        disp := Dispatcher new.
        ^disp xxxViewedObject: self basicNew initialize'
    in: MyObject
    notifying: nil
    ifFail: []) generate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:28:41.383

要评估新生成的编译方法，您可以使用：

```
aCompiledMethod valueWithReceiver: nil arguments: #() 
```

这是一个很好的方法，但是如果你正在试验问题，我编写了一个“[代码生成器](http://www.smalltalkhub.com/#!/~hernan/CodeGenerator)”，它基于一个名为 Grease 的跨 Smalltalk 库，它对你很有用。它管理自动注释、RBParser 和 Parser、创作和基本模板。当然，任何人都可以扩展所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-28T11:10:54.543

生成的方法与其他方法没有什么不同。所以你只需发送方法的选择器来调用它：

```
var := MyObject new. 
```

# c# - 组合框风格的 Windows Metro 应用程序

> ID：13906341
> 
> 赞同：0
> 
> 时间：2012-12-16T23:03:36.227
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我正在 Windows 8 中开发 xaml/c# Metro 风格应用程序。我想模拟 Microsoft 日历应用程序组合框风格（在事件详细信息页面中）。我的意思是，在选择后具有彩色框和边框的行为。如何使用视觉状态来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:20:28.450

There is no standard control for this, you have to create your own / extend the standard combobox

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T09:53:44.013

像这样的东西应该工作：

```
<Combobox.Template>
    <ControlTemplate>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="FocusStates">
                <VisualState x:Name="Unfocused"/> <!--leave the unfocused state empty if the control already looks "unfocused" -->
                <VisualState x:Name="Focused">
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetName="background" Storyboard.TargetProperty="Opacity" To="0.2" Duration="0"/>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>

        <Border x:Name="background" Background="Red" Opacity="0" />
        <!--other stuff-->
    </ControlTemplate>
</Combobox.Template> 
```

Combobox 控件根据鼠标/键盘输入（如聚焦、按下、鼠标悬停等）自动切换其内置状态。通过切换状态，为当前状态定义的情节提要将反转，您为将应用新的状态。您可以在此处查看可用状态：http: [//msdn.microsoft.com/en-us/library/ms752094.aspx](http://msdn.microsoft.com/en-us/library/ms752094.aspx)

（使用代码隐藏，您还可以根据事件等实现自己的状态，但这应该很少需要。）

# python - 为什么安装 cx_freeze 后出现“没有名为 cx_Freeze 的模块”错误？

> ID：13906343
> 
> 赞同：11
> 
> 时间：2012-12-16T23:03:45.493
> 
> 标签：python, windows, cx-freeze

我正在尝试编译一个 python 程序，我正在使用 python 3.2。所以我下载**了 cx_freeze**并安装了它。当我尝试在 cmd 中运行**setup.py**时，它说：

```
"importerror: no module named cx_freeze" 
```

我已经删除**了 cx_freeze**并尝试重新安装它，但是这次，在安装的**“选择应安装 cx_freeze 的位置”**部分中，我从注册表中选择了 python（这是我之前所做的全部）并还选择了**“python从另一个位置”**（并选择我的 C:\python32\ 目录）。然后我得到了这个错误：

```
"There is a problum with this windows installation package. a program required for this install to complete could not be run." 
```

注意：在我的**setup.py**文件中如下：

```
from cx_freeze import *

Setup(
    name = "",
    version ="0.1",
    description ="",
    executables = [Executable("")] ,
) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-26T12:20:00.240

终于找到解决这个问题的方法了！尝试了两天，一位程序员朋友帮助了我（我自己不是程序员）。

因此，当您在 cmd 中键入“python setup.py build”时，它会尝试在您所在的文件夹中查找 python.exe，如果没有找到它，则查找系统路径（其中您可以使用命令“echo %PATH%”访问）。

所以它看起来在那里，它找到了python并运行它——但python没有cx_Freeze。为什么？因为系统路径中的python是你的旧版本！！对我来说，它是 2.6.5，尽管我使用的是 3.3。而这个老版本自然是没有cx_Freeze的，因为我是安装到3.3的。这也解释了为什么在 IDLE 中尝试“import cx_Freeze”没有问题。

要查看哪个版本的 python cmd 正在调用，只需在 cmd 中键入“python”，它就会显示给你。

好的，所以快速的解决方案是简单地添加通向所需 python.exe 的完整绝对路径。对于 python 3.3，它是：

```
c:\python33\python setup.py build 
```

长期的解决方案是将 python 3.3 添加到您的系统路径中。我自己没有做过，但这应该是关于如何做的信息[http://geekswithblogs.net/renso/archive/2009/10/21/how-to-set-the-windows-path-in -windows-7.aspx](http://geekswithblogs.net/renso/archive/2009/10/21/how-to-set-the-windows-path-in-windows-7.aspx)

这是一个迟到的答案，但我希望这至少可以帮助其他人。享受你的 cx_Freeze

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-28T17:38:39.380

我在使用 python 3.8 版时遇到了同样的问题。

我发现在使用编译器更新时，它转换为 pip 安装，并以某种方式从我正在运行的 anaconda 环境`cx_freeze`的环境变量中删除了站点包路径。`%PATH%`

[来自github](https://github.com/marcelotduarte/cx_Freeze/issues/682#issuecomment-662906376)的marcelotduarte ，

> 如果你有 C 编译器，你可以测试开发版本： `pip install -U git+https://github.com/marcelotduarte/cx_Freeze.git@develop`

我使用 卸载了模块`pip uninstall cx_freeze`，然后使用 anaconda 重新安装`conda install cx_freeze`。这更正了问题并正确对齐了路径变量。

# sql-server - 在 SQL Server 中检索没有子元素的元素

> ID：13906351
> 
> 赞同：6
> 
> 时间：2012-12-16T23:04:41.063
> 
> 标签：sql-server, xml, sql-server-2008, xpath, xquery

我正在使用 SQL Server 2008，我想检索 XML 元素并返回元素本身及其属性，不带任何子元素且不带 text()。例如，以下 XML 有 4 个节点（doc、apple、b、banana）：

```
<doc>
<apple type="bramley"> tasty <b>yum!</b> </apple>
<banana color="yellow" shape="bendy"> nice in smoothies </banana>
</doc> 
```

我想返回：

```
<doc/>
<apple type="bramley"/>
<b/>
<banana color="yellow" shape="bendy"/> 
```

例如**doc**应该返回没有任何子节点，而**apple**应该返回没有**b**子节点。但问题是，如果我使用 SQL Server 节点和查询方法，我无法删除子节点。使用 SQL Server 2008，我最接近的是：

```
declare @x xml = '<doc>
  <apple type="bramley"> tasty <b>yum!</b> </apple>
  <banana color="yellow" shape="bendy"> nice in smoothies </banana>
</doc>';

select 
  c.query('local-name(.)') as Node,
  c.query('for $e in . return <xx> {$e/@*} </xx>') as Attr
from @x.nodes('//*') as T(c); 
```

这将获取每个节点的名称（使用本地名称）和节点的属性并返回：

```
Node    Attr
----    ----
doc     <xx />
apple   <xx type="bramley" />
b       <xx />
banana  <xx color="yellow" shape="bendy" /> 
```

我意识到我可以处理这个结果，将 Attr 转换为 varchar，用 Node 列替换 xx 并转换回 XML。但是没有字符串操作有没有更简单的方法？

PS：如果有帮助，我不介意该解决方案是使用 SQL Server 2008 还是 SQL Server 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:40:50.943

通常您会使用带有动态标记名称的元素构造，但 SQL Server 不支持这一点：

```
declare @x xml = '<doc>
  <apple type="bramley"> tasty <b>yum!</b> </apple>
  <banana color="yellow" shape="bendy"> nice in smoothies </banana>
</doc>';

select 
  c.query('local-name(.)') as Node,
  c.query('for $e in . return element { local-name($e) } { $e/@* } </xx>') as Attr
from @x.nodes('//*') as T(c); 
```

* * *

作为**XQuery 更新替代方案**（使用 SQL Server 2012 测试），我们可以获取所有节点（包含所有内容）并删除它们的子注释。

```
DECLARE @x xml = '<doc>test
  <apple type="bramley"> tasty <b>yum!</b> </apple>
  <banana color="yellow" shape="bendy"> nice in smoothies </banana>
</doc>';

-- Fetch all nodes
SET @x = @x.query('//*')
-- Delete all subnodes
SET @x.modify('delete /*/node()')

select 
  c.query('.') as NewNode
from @x.nodes('/*') as T(c); 
```

# java - JAVA绘制正多边形

> ID：13906352
> 
> 赞同：1
> 
> 时间：2012-12-16T23:04:44.353
> 
> 标签：java, polygon

我正在寻找一种算法来绘制正多边形，如三角形、四边形、五边形、六边形等。

我想这基本上是处理所有多边形点都位于圆线上的事实。

为 Polygon 对象计算这些 N 点的算法是什么？绘制一个正多边形后，我需要根据第一个正多边形绘制另一个正多边形，但旋转 K 度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T23:08:10.473

使用 sin 和 cos：

```
double theta = 2 * Math.PI / sides;
for (int i = 0; i < sides; ++i) {
    double x = Math.cos(theta * i);
    double y = Math.sin(theta * i);
    // etc...
} 
```

要旋转只需在角度上添加一个恒定的偏移量，即`theta * i + offset`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T23:09:58.427

-vertex 多边形的顶点`N`位于角度

```
(2*Math.PI*K)/N 
```

哪里`K`从 0 到`N-1`，包括在内。垂直坐标可以计算为角度乘以外接圆半径的正弦值；水平坐标的计算方法相同，只是您需要将半径乘以角度的余弦。

为了将多边形按`X`度数转换，转换`X`为弧度，并将结果添加到公式中的角度，如下所示：

```
(2*Math.PI*K)/N + Xrad 
```

最后，由于屏幕的原点位于其中一个角落，因此只有一部分多边形可见。为避免这种情况，请将等于外接圆中心位置的偏移量添加到您计算的每个坐标中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T23:07:01.907

sin、cos、半径、2*PI / 边数和循环

# php - 如何在php中不换行回显？

> ID：13906355
> 
> 赞同：4
> 
> 时间：2012-12-16T23:05:32.823
> 
> 标签：php, html, newline, echo

如何通过数组在每次迭代时在一行中回显所有数组元素而没有换行符？这是我能够想出的代码，但它将每个元素都打印在新行上。

```
while($row = mysql_fetch_assoc($result))
{
    echo '<h3> Some text'. $row['user_name'] . '</h3>';
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T23:07:10.300

`h3`是块元素。`h3`您可以通过不使用（`span`可能使用）或将其设置为内联来使其显示在行中：

CSS：

```
h3 {
    display: inline;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T23:08:09.287

那是因为`<h3>`像其他`<hx>`标签一样是块级元素，因此将在自己的行上呈现。您可以使用内联元素，例如，`<span>`或者将`<h3>`标签的 display 属性设置为*display: inline*在 CSS 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T23:09:37.820

也许是这样的：

```
echo '<h3>';
while($row = mysql_fetch_assoc($result))
{
    echo $row['user_name'];
}
echo '</h3>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T23:13:03.920

使用 CSS 你可以浮动这些元素。

```
h3 {
    float: left;
} 
```

使用 PHP 您可以输出一个包含所有这些行的元素：

```
echo '<h3>';
while($row = mysql_fetch_assoc($result)) {
    echo $row['user_name'];
}
echo '</h3>'; 
```

# java - 在 Java Se 中实现 HttpSession

> ID：13906356
> 
> 赞同：1
> 
> 时间：2012-12-16T23:05:39.673
> 
> 标签：java, http, session, java-server

我使用 com.sun.net.httpserver.HttpServer 作为带有 JAVA SE 的 HTTP 服务器。规范可以在这里找到：http: [//docs.oracle.com/javase/6/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/package-summary.html](http://docs.oracle.com/javase/6/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/package-summary.html)

我需要在我的会话中保留一些基本数据，并且由于这里没有 HttpSession 对象，我需要创建自己的。但我需要尽可能简单（一如既往）。

任何提示将不胜感激，即使是简短的提示。我的源代码位于：[https ://github.com/fidelio-coder/HttpServer](https://github.com/fidelio-coder/HttpServer)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T23:22:45.793

如果您对 JSF 做过一些事情，您会看到变量可以在不同的范围内：应用程序、会话、请求和自定义（您自己的映射）。因此，对于简洁的设计，会话变量属于更通用的类，而不仅仅是 HttpSession。

如前所述，使用 sun 类可能会导致一些陷阱，尤其是从 Windows 下的本地开发切换到 Linux 下的部署（通常使用**OpenJDK**）时。

除了 API 之外，关于 HttpSession 不能多说。

尽管您想自己做所有事情，但我不得不想到[Apache Shiro](http://shiro.apache.org/)，它提供了安全性、会话等。本地 Java SE 应用程序和 Java EE 服务器之间的会话！可能值得研究他们的想法/API。

# javascript - 发出多个请求并将它们传递给模板（Express + Node.js + FB 打开图）

> ID：13906357
> 
> 赞同：0
> 
> 时间：2012-12-16T23:05:40.603
> 
> 标签：javascript, node.js, express, request

我正在使用[这个 Facebook SDK](https://github.com/amachang/facebook-node-sdk)构建一个 Express Node.js 应用程序，这是我当前的 root 路径：

```
app.get('/', Facebook.loginRequired(), function (req, res) {

    req.facebook.api('/me', function(err, user) {

        res.render('index', {title: 'title', user: user});

    });

}); 
```

我正在调用 FB 开放图 URL [http://graph.facebook.com/me](http://graph.facebook.com/me)，但我想进行多个开放图调用以传递给我的模板。例如：

```
var APIcalls = ['/me', '/me/music', '/me/music.listens'];

req.facebook.api(APIcalls, function(err, res1, res2, res3){

    res.render('index', {res1: res1, res2: res2, res3: res3});

}); 
```

对 Facebook 进行多个 API 调用然后将响应相应地传递给我的模板的最简单方法是什么？您可以[在此处查看我的完整 app.js 文件](https://github.com/mager/soundfeed/blob/master/app.js)。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T23:40:44.360

这种情况对于 async.map 来说似乎很完美，请参见此处：[https ://github.com/caolan/async#map](https://github.com/caolan/async#map)

async.map 方法接受一个项目数组，并对数组中的每个项目并行执行相同的异步调用。如果没有遇到错误，它将调用带有新结果数组的回调。

所以你的例子看起来像这样：

```
var async = require('async'),
    APIcalls = ['/me', '/me/music', '/me/music.listens'];

async.map(APIcalls, 
  function(item, callback){
    req.facebook.api(item, function(err, user) {
      if(err){
        return callback(err); 
      };
      callback(null, user);
  });},
  function(err, results){
    if(err){
      throw new Error(err);
    }
    res.render('index', results);
  }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T00:02:47.777

为此，您应该使用[批处理](https://developers.facebook.com/blog/post/2011/03/17/batch-requests-in-graph-api/)，以便您只需向 Graph API 发出*一个*请求即可。

```
FB.api('/', 'POST', {
    batch: [{
      relative_url: '/me'
    },{
      relative_url: '/me/music'
    },{
      relative_url: '/me/music.listens'
    }]
  }, function(o) {
    console.log(o);
  }); 
```

或者，您可以使用 multi-fql

```
FB.api('/fql', {
    q1: 'select ....',
    q2: 'select ...'
  }, function(o) {
    console.log(o);
  }); 
```

完成后，您只需将数据组合成一个模型，然后传递给渲染器。

# data-structures - 质量阈值聚类算法的高效数据结构

> ID：13906360
> 
> 赞同：0
> 
> 时间：2012-12-16T23:06:25.443
> 
> 标签：data-structures, language-agnostic, cluster-analysis, threshold

我正在尝试实现质量阈值聚类算法。下面列出了它的大纲（取自[此处](https://sites.google.com/site/dataclusteringalgorithms/quality-threshold-clustering-algorithm-1)）：

1.  初始化集群允许的阈值距离和最小集群大小
2.  为每个数据点构建一个候选聚类，包括最近点、次最近点等，直到聚类的距离超过阈值
3.  将点数最多的候选聚类保存为第一个真正的聚类，并将聚类中的所有点从进一步考虑中删除
4.  用减少的点集重复，直到不能再形成具有最小集群大小的集群

我一直在阅读一些最近邻搜索算法和空间分区数据结构，因为它们似乎是我需要的那种东西，但我无法确定使用哪一个，或者我是否应该查看其他东西.

我想自己实现数据结构以用于教育目的，并且我需要一个可以连续返回某个点的最近点的数据结构。但是，由于我不知道需要查询的次数（即直到超过阈值），所以我不能使用 k-最近邻算法。我一直在研究四叉树和 kd 树。

此外，由于该算法不断构建新的候选集群，因此使用修改后的数据结构会很有趣，该数据结构使用缓存信息来加速后续查询（但也考虑到点删除）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:37:59.940

该算法听起来像是[DBSCAN (Wikipedia)的前身，众所周知，它与](https://en.wikipedia.org/wiki/DBSCAN)[R*-Tree 索引 (Wikipedia)](https://en.wikipedia.org/wiki/R%2a-tree)配合得很好。但当然，kd-trees 也是一种选择。这两者之间的主要区别在于 R*-trees 用于数据库 - 它们非常支持在线插入和删除，并且是面向块的 - 而 kd-trees 更多的是基于二进制拆分的内存数据结构。R*-trees 执行重新平衡，而 kd-trees 会慢慢变得不平衡，需要重建。我发现 R*-trees 中的最近邻搜索比 kd-trees 更容易理解，因为边界矩形非常直观。

DBSCAN 还从进一步考虑中“删除”点，但只需将它们标记为已分配。这样你就不需要更新索引了；并且在开始时批量加载一次就足够了。您也应该能够为 QT 执行此操作。因此，除非我弄错了，否则您可以通过运行 DBSCAN 并`epsilon`设置为 QT集群来有效地获得 QT 集群`minPts=2`（尽管人们更喜欢在适当的 DBSCAN 中使用更高的值）。

周围有许多 DBSCAN 实现。Weka中的那个特别糟糕，所以远离它。R 中的`fpc`实现还可以，但仍然可以快得多。[ELKI](http://elki.dbs.ifi.lmu.de/)好像是唯一一个全索引支持的，速度差别很大。他们的[基准](http://elki.dbs.ifi.lmu.de/wiki/Benchmarking)通过在该数据集上使用索引显示了 12 倍的速度增益，允许它们在 50 秒内而不是 603 秒（没有索引）内聚集。Weka 花了令人难以置信的 37917 秒，R fpc 4339 在那里。这与我的经验一致，Weka 以非常慢着称，而 R 只在矢量化操作方面表现出色，一旦 R 解释器必须工作，它比任何原生的都要慢得多。但这是一个很好的例子，说明当不同的人实现相同的算法时，它的表现会有多么不同。我原以为这是 2x-5x，但显然，从一个实现相同算法的程序员到另一个程序员，差异很容易达到 50 倍。

# python - 如何在 cv2.VideoWriter 中使用 FPS 参数？

> ID：13906361
> 
> 赞同：6
> 
> 时间：2012-12-16T23:06:25.643
> 
> 标签：python, video, opencv, windows-xp, python-2.5

好的，所以我正在制作视频。我想确切地知道如何使用 FPS 参数。它是一个浮点数，所以我认为这是我想要的每帧之间的间隔。能给我举个例子吗？我只是想知道视频会如何随着不同的 FPS 参数值而变化。因为我制作的视频现在太快了。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T08:47:10.047

真的就是这样—— `frames per second`。换句话说，您希望每秒显示多少帧？

这是一个例子：

```
writer = cv2.VideoWriter(filename="my_video.avi",  #Provide a file to write the video to
fourcc=cv2.cv.CV_FOURCC('i','Y', 'U', 'V'),            #Use whichever codec works for you...
fps=15,                                        #How many frames do you want to display per second in your video?
frameSize=(width, height))                     #The size of the frames you are writing 
```

示例用法：

```
while True:
    flag, frame = capture.read()
    cv2.imshow("Camera", frame)
    key_pressed = cv2.waitKey(10)
    if key_pressed == 27:                           #Escape key
        break
    writer.write(frame)
cv2.destroyAllWindows() 
```

因此，您将拥有一个视频文件，其中包含您的相机捕获的所有静止帧拼接在一起作为一个视频。每秒显示的帧数将与您使用`fps`参数设置的一样。（如果你的视频太快，我建议设置一个较低的`fps`）

我在脑海中写下了这段代码，所以我没有测试它，但它应该可以工作。如果您有任何疑问或问题，请告诉我。我希望这可以帮助你！

# .net - Windows 8 RT Metro 中的语法高亮显示

> ID：13906362
> 
> 赞同：3
> 
> 时间：2012-12-16T23:06:31.543
> 
> 标签：.net, microsoft-metro, richtextbox

所以我想知道是否有人知道在 Windows 8 Windows 应用商店应用程序中进行语法突出显示的好方法，比如使用 RichTextBox，我有点困惑如何在新 API 中访问 Itextranges。

编辑：我想使用 C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:46:21.290

如果您使用 HTML5 开发应用程序，则可以使用 JavaScript 库来完成此操作。比如说，[Prettify](http://code.google.com/p/google-code-prettify/)或[SyntaxHighlighter](http://alexgorbatchev.com/SyntaxHighlighter/)。

# .net - 我可以修改 mstest 控制台输出吗？

> ID：13906366
> 
> 赞同：4
> 
> 时间：2012-12-16T23:07:06.870
> 
> 标签：.net, console, mstest, verbosity

我有一些像这样运行的单元测试：

```
mstest /testcontainer:"Tests.dll" 
```

我有什么办法可以修改或添加到此命令的输出？我已经尝试过 Console.Writeline 和[这个答案](https://stackoverflow.com/questions/4884043/how-to-write-to-console-out-during-execution-of-an-mstest-test)，但似乎都不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:37:07.200

照常使用`Console.Writeline`，并`MSTest`使用[/detail](http://msdn.microsoft.com/en-us/library/ms182489%28v=vs.110%29.aspx#detail)开关运行：

```
MSTest /testcontainer:"Tests.dll" /detail:stdout 
```

**代码**

```
[TestMethod]
public void TestMethod1()
{
    Console.WriteLine("Output to console...");
} 
```

**输出**

![在此处输入图像描述](../Images/ad1b4b8fa28f8e3975042f65b6f17b49.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:33:57.177

我没有从控制台尝试过，但通常我在 Visual Studio 中使用 TestContext。您也可以像 String.Format 一样使用它。然后，您可以在 Visual Studio 中查看测试结果并查看输出。

```
 public TestContext TestContext { get; set; }

   [TestMethod]
   public void MyTestMethod()
   {
       int value = 5;
       TestContext.WriteLine("This is my output for the test: {0}", value);
   } 
```

# php - 数组中的数组错误

> ID：13906370
> 
> 赞同：0
> 
> 时间：2012-12-16T23:07:45.383
> 
> 标签：php, arrays, foreach, runtime-error

我有一段抛出错误的 PHP 代码；

> 注意：数组到字符串的转换。

这是因为由于某种原因`$deviceToken`它应该是一个字符串时是一个数组。

我不明白为什么 PHP 认为它是一个数组。当我打印 mysqli 查询的结果数组时，它会在数组中显示一个数组，因此，它认为`$deviceToken`是一个数组。我只想要一个数组，`$rows`并`$deviceToken`成为数组的值变量。因此，稍后在`$deviceToken`二进制文件中读取的代码中，它会抛出另一个错误，因为它显然是一个数组，而不是一个字符串。请参阅下面的代码：

```
// Create an array of units assigned to call
$unitsarray = explode(",", $units);

for ($i = 0; $i < count($unitsarray); $i++){

    echo "Units row $i = $unitsarray[$i] <br />";

    $result = $mysqli->query("SELECT devicetoken FROM `department devices` WHERE unit LIKE $unitsarray[$i]");

    while($row = $result->fetch_assoc()) {
        $rows[] = $row;
    }

    echo "ResultsArray = ";
    print_r($rows);

    // Loop APNS for each device token in $devicetoken array
    foreach ($rows as $deviceToken)
    {    
    // Build the binary notification
    $msg = chr(0) . pack('n', 32) . pack("H*", $deviceToken) . pack('n', strlen($payload)) . $payload;

    // Send it to the server
    $result2 = fwrite($fp, $msg, strlen($msg));

    // Create APNS operation output
    if (!$result2)
        echo 'Failed message'.PHP_EOL;
    else
        echo "<b>Successful message sent:</b>&nbsp;&nbsp; $call - $location - $station - $units to device(s):&nbsp;&nbsp;'$deviceToken </br>".PHP_EOL;
    }
} 
```

结果数组输出如下所示：

```
ResultsArray = Array (
    [0] => Array (
        [devicetoken] => 773f5436825a7115417d3d1e036da20e806efeef547b7c3fe4da724d97c01b30
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:11:54.467

`$deviceToken`是一个数组，您需要该`devicetoken`数组中的键，而不是数组本身。

```
foreach ($rows as $key => $row)
{    
    $deviceToken = $row['devicetoken'];  
    // Build the binary notification
    $msg = chr(0) . pack('n', 32) . pack("H*", $deviceToken) . pack('n', strlen($payload)) . $payload;

    // Send it to the server
    $result2 = fwrite($fp, $msg, strlen($msg));

    // Create APNS operation output
    if (!$result2)
        echo 'Failed message'.PHP_EOL;
    else
        echo "<b>Successful message sent:</b>&nbsp;&nbsp; $call - $location - $station - $units to device(s):&nbsp;&nbsp;'$deviceToken </br>".PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T23:16:50.060

```
while($row = $result->fetch_assoc()) {
    $rows[] = $row;
} 
```

`$row`是一维数组
`$rows`是数组的数组，因为当您 print_r由其他数组组成的数组时，每个数组`$row`都被分配为数组中的一个新项`$rows``$rows`

`$rows as $deviceToken`数组中的每个值`$rows`（即每个数组`$row`）都被取出并分配给`$deviceToken`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T23:12:17.163

`$deviceToken`确实是一个数组，可能是 resultArray 中的第一行和唯一一行

你需要

```
$deviceToken['deviceToken'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T23:13:14.750

它是一个数组，因为您使用 fetch_assoc，结果返回一个数组（键是数据库列名，值是字段的值）。它从数据库中返回键和值并将其存储在数组对象中。fetch_rows 只返回行。研究使用不同的查询函数方法。我也同意另外两个。您必须将行分隔为 $key => $value。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T23:13:55.327

当您遍历由返回的结果集时，您正在创建一个数组数组`->fetch_assoc()`。这在`print_r()`. 这是因为`->fetch_assoc()`返回一个数据数组，即使只有一列。

# android - android.location.geocoder 的问题

> ID：13906380
> 
> 赞同：6
> 
> 时间：2012-12-16T23:08:45.623
> 
> 标签：android, location, reverse-geocoding

我知道网站上有很多关于`IOExeption`：服务不可用的问题.....我已经检查了我能找到的关于这个主题的所有答案......我正在运行它，`async task`它似乎工作正常但仍然得到同样的例外。

我`isPresent()`在以前的尝试中使用过，尽管它不在以下代码中，而且我使用的是同一部手机。我有互联网许可。我试图改变目标，`google api`看看这是否是问题所在，但没有任何区别。

这是第四年项目的重要组成部分，因此任何帮助都是认真的。ps 之前从未使用过 java 或 android，所以请原谅任何看起来像编码的菜鸟。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    view1 = (TextView) findViewById(R.id.textView1);
    view2 = (TextView)findViewById(R.id.textView2);
    view3 = (TextView)findViewById(R.id.textView4);
    b1 = (Button) findViewById(R.id.button1);

    locationManager =
            (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

    //provider =
      //      locationManager.getProvider(LocationManager.GPS_PROVIDER);

    final LocationListener listener = new LocationListener() {

        @Override
        public void onLocationChanged(Location location) {
            view2.setText(Double.toString(location.getLatitude()));
            view3.setText(Double.toString(location.getLongitude()));
            Double lat = Double.valueOf(location.getLatitude());
            Double longTemp = Double.valueOf(location.getLatitude());
            new geo().execute(lat,longTemp);
            }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status,
                Bundle extras) {
            // TODO Auto-generated method stub

        }

    };
    b1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            locReqest();
        }

        private void locReqest() {
            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10000, 0, listener);
        }
    });

}

class geo extends AsyncTask<Double, Void, String>{
    Geocoder geocoder = new Geocoder(getApplicationContext(), Locale.getDefault());
    @Override
    protected String doInBackground(Double... params) {
           Address address = null;
           List<Address> addresses = null;
            try {
                // Call the synchronous getFromLocation() method by passing in the lat/long values.
                addresses = geocoder.getFromLocation(params[0].doubleValue(),params[1].doubleValue(), 1);
                address = addresses.get(0);
                if (address != null){
                    return "Got your address : " + address.getCountryName().toString();
                }
            } catch (IOException e) {
                e.printStackTrace();
                return "failed";
            }
            return"fail";
    }
    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        //view1.setText(result);
        Toast.makeText(getApplicationContext(), "The address is: " + result, Toast.LENGTH_LONG).show();
    }

} 
```

这是日志猫

```
12-16 23:06:53.855: W/System.err(23578): java.io.IOException: Service not Available
12-16 23:06:53.865: W/System.err(23578):    at android.location.Geocoder.getFromLocation(Geocoder.java:136)
12-16 23:06:53.865: W/System.err(23578):    at com.boggerTech.local.Main$geo.doInBackground(Main.java:102)
12-16 23:06:53.880: W/System.err(23578):    at com.boggerTech.local.Main$geo.doInBackground(Main.java:1)
12-16 23:06:53.900: W/System.err(23578):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
12-16 23:06:53.900: W/System.err(23578):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
12-16 23:06:53.905: W/System.err(23578):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-16 23:06:53.915: W/System.err(23578):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
12-16 23:06:53.915: W/System.err(23578):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-16 23:06:53.915: W/System.err(23578):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-16 23:06:53.920: W/System.err(23578):    at java.lang.Thread.run(Thread.java:856)
12-16 23:07:10.440: W/System.err(23578): java.io.IOException: Service not Available 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T16:23:38.463

`Geocoder.isPresent()`可以在某些设备上返回 false。

[如果它返回 true 并且您仍然有问题，您可以使用Google 地理编码 API](https://developers.google.com/maps/documentation/geocoding/)创建自己的地理编码器

我制作了一个独立于平台的`Geocoder`库，可在[github](https://github.com/Doctoror/Geocoder)和 Maven Central获得

```
dependencies {
    compile 'com.github.doctoror.geocoder:library:[version]'
} 
```

**编辑**：上一个答案包含一个实现地理编码器的简短示例实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-15T16:39:06.353

通过在模拟器中登录我的谷歌帐户来解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-19T12:31:18.953

解决此问题的最佳方法是在您选择运行的移动设备时打开列表下方的 AVD 管理器，然后清除其中的所有数据，让它重新启动，然后再次运行您的程序……这行得通为了我

# c# - 计算运行时更新表格

> ID：13906407
> 
> 赞同：0
> 
> 时间：2012-12-16T23:12:17.710
> 
> 标签：c#

开始学习编码。

有一个控制台写一个 10 x 10 的数字网格，数值随机增加。试图在表单（DataGridView）中做同样的事情。它工作正常，但在计算完成之前没有窗口（我必须限制 - 而不是无限循环）。

我来到这里阅读有关 refresh 和 doevent 的信息 - 但它们大大减慢了一切。但至少我可以看到发生的计算。

我试图了解背景工作者，但恐怕我做不到。如果我在一个循环中进行计算 - 我如何将这些计算与屏幕更新分开。

编辑：遵循 Nico 的帮助（谢谢！！）并得到了这个。好多了，但仍然滞后于大数字。但是火箭数量很少。有什么帮助可以加快速度吗？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace stackoverflowTest
{
public partial class Form1 : Form
{
    Random rnd = new Random((Int32)DateTime.Now.Ticks);
    private static int numSides = 8;
    int numDice=2;
    private int numRolls = 100000000;
    private int max = 1;
    private int min = 0;
    private int diff = 0;
    private double pdiff = 0d;
    int[] array = new int[numSides *numSides];

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1Load(object sender, EventArgs e)
    {
        SetupDataForm1();
        SetupDataForm2();
        var bw = new BackgroundWorker();
        bw.DoWork += BwDoWork;
        bw.RunWorkerAsync(); //Start the worker   
    }

    private void BwDoWork(object sender, DoWorkEventArgs e)
    {
        for (int rolls = 1; rolls < numRolls+1; rolls++)
        {
            // Roll two dice and increase that slot in the table
            int y = Dice.Roll(numSides, rnd);
            int x = Dice.Roll(numSides, rnd);
            int k = Convert.ToInt32(dataGridView1.Rows[x].Cells[y].Value);
            dataGridView1.Rows[x].Cells[y].Value = k + 1;

            //Enter table into an array to work out max/min etc later
            for (int i = 0; i < (numSides * numSides); i++)
            {
                int row = i / numSides;
                int col = i % numSides;
                array[i] = Convert.ToInt32(dataGridView1.Rows[row].Cells[col].Value);
            }

            max = array.Max();
            min = array.Min();
            diff = max - min;
            if (max > 0) pdiff = (((double)diff / (max)) * 100);

            dataGridView2.Rows[0].Cells[0].Value = rolls;
            dataGridView2.Rows[1].Cells[0].Value = max;
            dataGridView2.Rows[2].Cells[0].Value = min;
            dataGridView2.Rows[3].Cells[0].Value = diff;
            dataGridView2.Rows[4].Cells[0].Value = pdiff.ToString("0.000");
            dataGridView2.Rows[5].Cells[0].Value = (array.Average()).ToString("0");
            dataGridView2.Rows[6].Cells[0].Value = ((array.Average()/rolls)*100).ToString(("0.0000000"));
        }
    }

    private void SetupDataForm1()
    {
        dataGridView1.Font = new Font("Microsoft Sans Serif", 6F);
        dataGridView1.RowTemplate.Height = 11;

        //Add Columns
        for (int i = 0; i < numSides; i++)
        {
            dataGridView1.Columns.Add(i.ToString(), (i+1).ToString());
            dataGridView1.Columns[i].Width = 35;
        }

        // Add Rows
        for (int i = 0; i < numSides; i++)
        {
            dataGridView1.Rows.Add();
            if (i % 2 != 0)
            {
                dataGridView1.Rows[i].DefaultCellStyle.BackColor = Color.LightGray;
            }
            dataGridView1.Rows[i].HeaderCell.Value = ((i+1)*10).ToString();
        }
    }

    private void SetupDataForm2()
    {
        dataGridView2.Font = new Font("Microsoft Sans Serif", 8F);
        dataGridView2.RowTemplate.Height = 16;

        //Add Columns
        for (int i = 0; i < 1; i++)
        {
            dataGridView2.Columns.Add(i.ToString(), "");
            dataGridView2.Columns[i].Width = 65;
        }

        // Add Rows
        for (int i = 0; i < numSides; i++)
        {
            dataGridView2.Rows.Add();
            if (i % 2 != 0)
            {
                dataGridView2.Rows[i].DefaultCellStyle.BackColor = Color.LightGray;
            }               
        }
        dataGridView2.Rows[0].HeaderCell.Value = "Rolls";
        dataGridView2.Rows[1].HeaderCell.Value = "Max";
        dataGridView2.Rows[2].HeaderCell.Value = "Min";
        dataGridView2.Rows[3].HeaderCell.Value = "Diff";
        dataGridView2.Rows[4].HeaderCell.Value = "%";
        dataGridView2.Rows[5].HeaderCell.Value = "Avg";
        dataGridView2.Rows[6].HeaderCell.Value = "Av%";

    }

    public class Dice
    {
        public static int Roll(int numberOfSides, Random rnd)
        {
            return rnd.Next(0, numberOfSides);
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:51:01.413

如果没有窗口，则在表单的构造函数中执行计算。要在开始计算之前使表单可见，请将代码放在表单的 Load 事件中。因此，双击表单属性窗口中的事件，将创建一个方法。将您的代码放入此方法中。

如果要使用后台工作程序，过程类似。但是，您需要创建`Backgroundworker`. 例如在代码中：

```
private void Form1_Load(object sender, EventArgs e)
{
    var bw = new BackgroundWorker();
    bw.DoWork += 
```

如果您开始输入，Visual Studio 建议为该事件创建一个方法。按两次 Tab 生成它，你基本上会得到以下代码：

```
private void Form1_Load(object sender, EventArgs e)
{
    var bw = new BackgroundWorker();
    bw.DoWork += bw_DoWork;
    bw.RunWorkerAsync(); //Start the worker
}

void bw_DoWork(object sender, DoWorkEventArgs e)
{
    throw new NotImplementedException(); //remove this
} 
```

将您的计算代码放在 bw_DoWork 方法中，它将在后台执行，而不会影响用户界面。

# c# - 最佳 .NET 数组/列表

> ID：13906408
> 
> 赞同：6
> 
> 时间：2012-12-16T23:12:30.693
> 
> 标签：c#

所以，我需要一系列项目。我想知道哪个是最快/最好使用的（在 c# 中），我将做以下事情：

1.  最后添加元素
2.  在开始时删除元素
3.  查看第一个和最后一个元素（每一帧）
4.  偶尔清理一下
5.  将其转换为普通数组（不是列表。我使用的是 iTween，它会询问普通数组。）我几乎每一帧都会这样做。

那么，考虑到这些事情，最好使用什么？尤其是最后一个，因为我每帧都这样做。我应该只使用一个数组，还是有其他东西可以非常快速地转换为数组并且在开始和结束时也可以轻松添加/删除元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T23:14:51.393

你可以看看[`LinkedList<T>`](http://msdn.microsoft.com/en-us/library/he2s3bh7.aspx)。

它具有 O(1) 支持在开头或结尾检查、添加和删除项目。它需要 O(n) 才能复制到数组，但这似乎是不可避免的。`ICollection<T>`如果您使用的 API 接受了or ，则可以避免复制`IEnumerable<T>`，但如果无法更改，那么您可能会被使用`ToArray`.

如果您的列表每帧更改少于一次，那么您可以缓存该数组，并且仅`ToArray`当列表自上一帧以来发生更改时才再次调用。下面是一些方法的实现，让您了解这种潜在的优化是如何工作的：

```
private LinkedList<T> list = new LinkedList<T>();

private bool isDirty = true;

private T[] array;

public void Enqueue(T t)
{
    list.AddLast(t);
    isDirty = true;
}

public T[] ToArray()
{
    if (isDirty) 
    {
        array = list.ToArray();
        isDirty = false;
    }

    return array;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T23:17:50.757

要求 1) 和 2) 指向 a `Queue<T>`，它是唯一针对这两个操作优化的标准集合。

3）你需要一些技巧来获得最后一个元素，首先是`Peek()`。
4) 很简单 ( `.Clear()`)
5) 标准`.ToArray()`方法会做到这一点。

您不会逃避复制`O(n)`第 5 项的所有元素 ())

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T23:36:11.633

我假设您使用的是类（而不是结构）？（如果您使用的是结构（值类型），那么这会改变一些事情。）

该[`System.Collections.Generic.List`](http://msdn.microsoft.com/en-us/library/6sh2ey19%28v=vs.85%29.aspx)课程可让您快速完成所有这些工作。使用 LinkedList 可以做得更好的唯一部分是从一开始就删除，但是单个块​​内存副本并没有太大的痛苦，它可以轻松创建数组。

我不建议使用链接列表，特别是如果您只是从开头或结尾删除。每次添加（使用标准 LinkedList 集合）都需要分配内存（它必须构建一个对象来引用您实际想要添加的内容）。

列表还有很多方便的功能，如果性能有问题，使用时需要小心。列表本质上是数组，当你添加东西时会变得更大（每次你把它们填满，它们就会变得更大，这样可以节省过多的内存操作）。清除它们不需要任何努力，并将分配的内存留作另一天使用。

根据个人经验，.NET 不适合通用链接列表，您需要专门编写代码才能在整个过程中使用它们。列表：

*   易于使用

*   做你想做的一切

*   不会让你的记忆看起来像瑞士奶酪（好吧，当你每帧分配一个新数组时，你可以做的最好 - 我建议你让垃圾收集器有机会在创建一个新数组之前摆脱任何旧数组，如果通过重新使用任何数组引用并将不需要的任何数组归零，这些数组将变得很大）。

正确的选择很大程度上取决于应用程序的具体情况，但如果您问我，List 始终是一个安全的选择，而且您不必编写任何特定于结构的代码来使其工作。

如果您确实喜欢使用列表，则需要研究这些[方法](http://msdn.microsoft.com/en-us/library/s6hkc2c4%28v=vs.85%29.aspx)和[属性](http://msdn.microsoft.com/en-us/library/a7f69ad7%28v=vs.85%29.aspx)：

*   ToArray() // 生成你想要的数组

*   Clear() // 清除数组

*   Add(item) // 在末尾添加一个项目

*   RemoveAt(index) // 第一项的索引为 0，最后一项为 .Count - 1

*   Count // 检索列表中的项目数 - 这不是免费查找，因此请尽量避免不必要的请求

对不起，如果这整个帖子是矫枉过正。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T23:20:22.393

圆形数组怎么样？如果您保留最后一个元素和第一个元素的索引，则您给出的每个标准都可以有 O(1)。

编辑：您可以采用 C++ 向量方法来获取容量：容量满时将大小加倍。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T23:33:08.413

常规列表将完成这项工作，它比链接列表插入更快。

*   在末尾添加元素 -> myList.Insert(myList.Count - 1)
*   在开始时删除元素 -> myList.RemoveAt(0)
*   查看第一个和最后一个元素（每帧）-> myList[0] 或 myList[myList.Count - 1]
*   偶尔清除它-> myList.Clear()
*   将其转换为普通数组（不是列表。我使用的是 iTween，它会询问普通数组。）我几乎每一帧都会这样做。-> myList.ToArray()

# php - 我可以使用 while 在 php 中什么都不做吗？如果可能的话，这是一个好习惯吗？

> ID：13906412
> 
> 赞同：2
> 
> 时间：2012-12-16T23:13:09.010
> 
> 标签：php, loops, while-loop

我正在考虑在 PHP 中做这样的事情

```
function doSomething() { /* ... */ }

while(my_array[] = doSomething()) { } 
```

而不是使用额外的变量：`while(myValue = doSomething()) { myArray[] = myValue; }`

是否使用 while 块什么都不做？如果不是 - 为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T23:24:44.407

从技术上讲，大括号用于对`while`正文中的多个语句进行分组。你甚至不需要它们。例如，以下是完全有效的 PHP 代码：

```
while ($my_array[] = doSomething());
                                   ^ 
```

如您所见，这使用分号来终止`while`主体的语句（空语句）。[演示](http://eval.in/4787)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-16T23:18:35.030

是的你可以。

```
$x = [];
while ($x[] = rand(0, 3)) { }
var_dump($x);

// array(4) {
//   [0]=>
//   int(4)
//   [1]=>
//   int(2)
//   [2]=>
//   int(2)
//   [3]=>
//   int(0)
// } 
```

但是，如果您重新评估您要解决的问题，您可能会发现不同的方法或构造可能会证明更好，并且不需要将`while`构造简化为这个目的。

# objective-c - 检查对象是否为零时有什么问题

> ID：13906423
> 
> 赞同：3
> 
> 时间：2012-12-16T23:14:45.933
> 
> 标签：objective-c, object, init, null

我已经阅读了来自苹果[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithObjects/WorkingwithObjects.html的文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithObjects/WorkingwithObjects.html)

它说我们可以检查对象是否为空...

```
 XYZPerson *somePerson;
    // somePerson is automatically set to nil
 if (somePerson != nil) {
        // somePerson points to an object
    } 
```

很可能我做错了什么，但需要你的帮助才能找到它。我有一个 C2 类，我创建了 C2 对象但没有初始化，当检查下面的代码时，应用程序将 NOT NİL 写入输出。我做错了什么。

谢谢你的帮助。

```
C2 * o3;

    if (o3 != nil) {
        NSLog(@"NOT NİLLLL");
    }else{
        NSLog(@"NOT");
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T23:18:26.163

与在初始化时清零的类成员不同，局部变量不会由 pre-ARC 编译器自动初始化。如果你希望你的 local`o3`是`nil`，你需要自己初始化它：

```
C2 * o3 = nil; 
```

除非程序明确指示，否则不初始化局部变量的行为来自 C：在那里，默认情况下也不初始化局部变量。

# eclipse - 如何在 Eclipse 的不同监视器中显示控制台选项卡？

> ID：13906425
> 
> 赞同：1
> 
> 时间：2012-12-16T23:14:51.440
> 
> 标签：eclipse

我正在使用 Eclipse 和两个显示器。我的 Laptos 的屏幕不够大，无法显示控制台点击。有没有办法在不同的显示器屏幕上显示控制台选项卡？

主意？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T23:21:38.320

是的你可以。您可以将控制台点击拖出 Eclipse 工作台窗口。然后视图与工作台窗口分离。视图分离后，您可以将其移动到另一个监视器屏幕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T06:21:34.847

要在当前透视图中更改视图的位置：

1.  通过标题栏拖动视图。不要松开鼠标左键。
2.  当您在 Workbench 中移动视图时，鼠标指针将变为下表所示的放置光标之一。如果释放鼠标左键，放置光标指示视图将停靠的位置。要查看放置光标的变化，请将视图拖到另一个视图或编辑器的左侧、右侧、顶部或底部边框上。您也可以将视图拖到工作台区域之外，以将其变为“分离”视图。
3.  当视图位于您想要的位置时，相对于放置光标下方的视图或编辑器区域，释放鼠标左键。

您还可以使用视图的弹出菜单移动视图。（左键单击视图标题栏左端的图标，或右键单击视图标题栏中的任何其他位置）。除了移动视图之外，此菜单还将提供用于将视图转换为“快速”或“分离”视图的分类选项

![在此处输入图像描述](../Images/26832c5058675b9ba4b80467e2fb771d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-03T14:08:35.533

在将弹出的控制台窗口拖到辅助监视器后，还有其他人将其移回主监视器吗？当eclipse出于某种原因弹出对话框时似乎会发生。

这有点烦人。我喜欢在纵向模式下的监视器上有一个控制台窗口，这对于观看单元测试的执行非常方便。

# jquery - jquery - 单击 div 下的图像

> ID：13906426
> 
> 赞同：2
> 
> 时间：2012-12-16T23:15:01.357
> 
> 标签：jquery, javascript-events

我有一个插件可以在图像上创建一个镜头。但在镜头下方无法使图像可点击

我在 jsfiddle 上创建了这个来帮助说明问题 [http://jsfiddle.net/F9GT5/2/](http://jsfiddle.net/F9GT5/2/)

我需要能够使图像可点击，然后执行一组操作。

我已经在一些网站上看到过它，比如这里[http://www.starplugins.com/cloudzoom](http://www.starplugins.com/cloudzoom)

```
 $('#myCloudZoom').bind('click',function(){       // Bind a click event to a Cloud Zoom instance.
        var cloudZoom = $(this).data('CloudZoom');   // On click, get the Cloud Zoom object,
        cloudZoom.closeZoom();                       // Close the zoom window (from 2.1 rev 1211291557)
        $.fancybox.open(cloudZoom.getGalleryList()); // and pass Cloud Zoom's image list to Fancy Box.
        return false;
    }); 
```

这个问题已经让我发疯了几天，使用 cloudzoom 插件，似乎他们正在通过镜头点击下图。但是如上面的代码所示，点击甚至绑定到图像，但是当你检查元素时，你会得到镜头在图像的顶部

有人对如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:21:41.597

使用您的插件，以某种方式将图像的选择器存储在 div 中：

```
//Inside the plugin, creating the lens; add attribute for image
$("<div>").data('image', this)
//Then bind a click event to the div to trigger a click on the image:
   .click(function () {
      $(this).data('image').trigger('click');
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:23:46.337

我不确定我是否理解您的问题，但我认为您想要将“click”事件添加到您的“lens”div：

```
$(".lens").click(function(){
alert("click lens");    
}); 
```

# c# - 我应该如何在 C# 中存储 256 位数字并对其执行数学运算？

> ID：13906429
> 
> 赞同：3
> 
> 时间：2012-12-16T23:15:50.710
> 
> 标签：c#, arrays, bit-manipulation, largenumber, uint64

我需要在内存中存储一​​个 256 位数字并对其执行基本的数学运算。

我该如何在 C# 中执行此操作？有我应该使用的图书馆吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T23:18:13.843

[BigInteger](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)类型是否适合您的需求？它

> 表示任意大的有符号整数。

并提供预期的算术运算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T23:18:42.203

[BigInteger](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger%28VS.100%29.aspx)也许是一种选择。

如果您只需要 256 位并对上溢/下溢进行特殊处理 - 您可能必须自己做（或找到一些不属于 .Net Framework 的现有库）。

# iphone - iOS 应用中的音标

> ID：13906430
> 
> 赞同：1
> 
> 时间：2012-12-16T23:15:59.613
> 
> 标签：iphone, ios, fonts

有没有办法在 iOS 应用程序中根据 API（参见[http://en.wikipedia.org/wiki/International_Phonetic_Alphabet ）显示音标？](http://en.wikipedia.org/wiki/International_Phonetic_Alphabet)

我们想过用图形添加符号，但我希望有一个替代方案（例如 unicode、一些库或字体......）。

有没有人做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:36:33.660

[此](http://www.phon.ucl.ac.uk/home/wells/ipa-unicode.htm#display)页面以 Unicode、十进制和十六进制显示音标代码，并向您展示如何插入它们。祝你好运。

# iphone - 如何截断 UILabel 中字符串中的字符串？

> ID：13906431
> 
> 赞同：4
> 
> 时间：2012-12-16T23:16:00.043
> 
> 标签：iphone, objective-c, ios, uikit, views

假设我有`The Dark Knight Rises at 7:45pm`，我需要将其放入固定宽度的 UILabel（用于 iPhone）。我如何将其截断为“The Dark Knight Ris ... at 7:45pm”而不是“The Dark Knight Riss at 7:4 ...”？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T23:20:21.240

UILabel 有这个属性：

```
@property(nonatomic) NSLineBreakMode lineBreakMode; 
```

您可以通过将其设置为 NSLineBreakByTruncatingMiddle 来启用该行为。

**编辑**

我不明白您只想截断字符串的一部分。然后阅读以下内容：

> 如果您只想将换行模式应用于文本的一部分，请使用所需的样式信息创建一个新的属性字符串并将其与标签相关联。如果您不使用样式文本，则此属性适用于 text 属性中的整个文本字符串。

**例子**

所以甚至还有一个设置段落样式的类： NSParagraphStyle 并且它也有它的可变版本。
因此，假设您有一个要应用该属性的范围：

```
NSRange range=NSMakeRange(i,j); 
```

您必须创建一个 NSMutableParagraphStyle 对象并将其 lineBreakMode 设置为 NSLineBreakByTruncatingMiddle。注意您还可以设置很多其他参数。所以让我们这样做：

```
NSMutableParagraphStyle* style= [NSMutableParagraphStyle new];
style.lineBreakMode= NSLineBreakByTruncatingMiddle; 
```

然后为该范围内标签的属性文本添加该属性。属性文本属性是 NSAttributedString，而不是 NSMutableAttributedString，因此您必须创建一个 NSMutableAttributedString 并将其分配给该属性：

```
NSMutableAttributedString* str=[[NSMutableAttributedString alloc]initWithString: self.label.text];
[str addAttribute: NSParagraphStyleAttributeName value: style range: range];
self.label.attributedText= str; 
```

请注意，NSAttributedString 还有很多其他属性，请查看[此处](http://cocoadev.com/wiki/NSAttributedString)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T23:19:25.250

您必须设置`lineBreakMode`. 您可以从 Interface Builder 或以编程方式执行以下操作

```
label.lineBreakMode = NSLineBreakByTruncatingMiddle; 
```

请注意，自 iOS 5 起，此类属性的类型从 更改`UILineBreakMode`为`NSLineBreakMode`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T01:07:32.830

我的第一个想法是两个标签并排固定宽度，但我假设你已经排除了一些未说明的原因。或者，手动计算截断，像这样......

```
- (NSString *)truncatedStringFrom:(NSString *)string toFit:(UILabel *)label
                          atPixel:(CGFloat)pixel atPhrase:(NSString *)substring {

    // truncate the part of string before substring until it fits pixel
    // width in label

    NSArray *components = [string componentsSeparatedByString:substring];
    NSString *firstComponent = [components objectAtIndex:0];
    CGSize size = [firstComponent sizeWithFont:label.font];

    NSString *truncatedFirstComponent = firstComponent;

    while (size.width > pixel) {
        firstComponent = [firstComponent substringToIndex:[firstComponent length] - 1];
        truncatedFirstComponent = [firstComponent stringByAppendingString:@"..."];
        size = [truncatedFirstComponent sizeWithFont:label.font];
    }

    NSArray *newComponents = [NSArray arrayWithObjects:truncatedFirstComponent, [components lastObject], nil];
    return [newComponents componentsJoinedByString:substring];
} 
```

像这样称呼它：

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 160, 21)];
NSString *string = @"The Dark Knight Rises at 7:45pm";
NSString *substring = @"at";
CGFloat pix = 120.0;
NSString *result = [self truncatedStringFrom:string toFit:label atPixel:120.0 atPhrase:@"at"];

label.text = result; 
```

这会生成：@"The Dark Kni...at 7:45pm"

# ruby-on-rails - 为什么我的 password_digest 返回“无效哈希”错误？

> ID：13906432
> 
> 赞同：3
> 
> 时间：2012-12-16T23:16:05.240
> 
> 标签：ruby-on-rails, integration-testing, bcrypt

我对运行集成测试以供用户登录时遇到的错误有点困惑。以下是跟踪的前几行：

```
invalid hash
    @ /home/benjamin/.rvm/gems/ruby-1.9.3-p194/gems/bcrypt-ruby-3.0.1/lib/bcrypt.rb:171:in `initialize'
      /home/benjamin/.rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.6/lib/active_model/secure_password.rb:58:in `new'
      /home/benjamin/.rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.6/lib/active_model/secure_password.rb:58:in `authenticate'
      /home/benjamin/projects/LTClone/app/controllers/sessions_controller.rb:9:in `create' 
```

所以错误来自动作中的这一行`create`：

```
if user && user.authenticate(params[:session][:password]) 
```

它调用中`authenticate`定义的方法`secure_password.rb`：

```
def authenticate(unencrypted_password)
  if BCrypt::Password.new(password_digest) == unencrypted_password
    ... 
```

它调用该`BCrypt::Password.new`方法，该方法定义在`bcrypt.rb`：

```
def initialize(raw_hash)
  if valid_hash?(raw_hash)
    ...
  else
    raise Errors::InvalidHash.new("invalid hash")        # line 171
  end
end 
```

因此，由于某种原因，`raw_hash`与 指定的正则表达式不匹配`valid_hash?`，这意味着该`password_digest`变量不是有效的哈希。根据[这个答案](https://stackoverflow.com/a/11038412/1543283)，我试图验证的用户似乎是空白或无效的`password_digest`，但在我调用`create`测试中的操作之前，我可以`puts @user.password_digest`，并且打印了哈希（并且 Rubular 说`valid_hash?`正则表达式匹配它） . 我还将创建方法更改为

```
if user && user.password_digest && user.authenticate(params[:session][:password]) 
```

只是为了确保它真的存在。

所以现在我完全被难住了。似乎我有一个有效的`password_digest`，但`BCrypt::Password.new`拒绝承认它。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T11:40:12.843

检查您的用户“password_digest”列。如果它是“nil”，那么你会得到这个错误。建议是简单地删除所有用户并确保正确创建用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-15T01:51:28.120

我不确定这是否对您来说是相同的解决方案，但我的问题（非常相同的错误）已通过更改存储在`test/fixtures/users.yml`文件中的夹具中的密码得到解决。一旦我保存并`rails test`再次运行，测试就通过了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-02T16:28:27.570

您可以执行 if/else 来查看 password 或 password_digest 是否为 nil

```
if user.password.nil?
  #redirect back to login with message
else

if user && user.authenticate(params[:session][:password])
  #do your stuff!
end 
```

# python - PHP PCRE 正则表达式与 Python 兼容

> ID：13906433
> 
> 赞同：1
> 
> 时间：2012-12-16T23:16:23.047
> 
> 标签：python, regex

> **可能重复：**
> [匹配 Unicode 属性的 Python 正则表达式](https://stackoverflow.com/questions/1832893/python-regex-matching-unicode-properties)

我正在尝试将 PHP 中的这行代码移植到 Python：

```
preg_match_all('/\p{L}[\p{L}\p{Mn}\p{Pd}\'\x{2019}]*/u', $text, $tmp); 
```

我得到了什么：

```
tmp = re.split('\p{L}[\p{L}\p{Mn}\p{Pd}\'\u2019]*', text, flags=re.U) 
```

但是... Python 的正则表达式语法不支持`\p`- Unicode 字符属性！

有什么选择吗？

# php - Zend Url View Helper 不使用正则表达式路由

> ID：13906434
> 
> 赞同：0
> 
> 时间：2012-12-16T23:16:45.363
> 
> 标签：php, zend-framework, zend-route

我正在使用 Zend Framework 1.12 并有这条路线：

```
$router->addRoute('item_start',
    new Zend_Controller_Router_Route_Regex(
            '(foo|bar|baz)',
            array(
                'module'        => 'default',
                'controller'    => 'item',
                'action'        => 'start'
            ),
            array(
                1 => 'area'
            ),
            '%s'
        )
); 
```

问题是，当我调用 '/foo' 并在视图中使用 Url Helper 时，它没有给我任何参数：

```
$this->url(array("page"=>1));
// returns '/foo' (expected '/foo/page/1')

$this->url(array("page"=>1), "item_start", true);
// also returns '/foo' 
```

知道如何将页面参数放入 URL 中吗？我不能像在标准路线中那样使用通配符，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:06:56.777

您的 Regex 路由没有`page`参数，因此当 url view-helper 最终`Route::assemble()`使用您提供的参数调用时，它会忽略您的`page`值。

想到的两个选择是：

1.  修改您的正则表达式以包含一个（可能是默认值可选的）`page`参数
2.  `page`在查询字符串中管理路由之外的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:01:30.403

除了大卫的建议，您可以更改此路由以使用标准路由类，然后保留通配符选项：

```
$router->addRoute('item_start',
    new Zend_Controller_Router_Route(
            ':area/*',
            array(
                'module'        => 'default',
                'controller'    => 'item',
                'action'        => 'start'
            ),
            array(
                'area' => '(foo|bar|baz)' 
            )
        )
);

// in your view:
echo $this->url(array('area' => 'foo', 'page' => 1), 'item_start'); 
```

# python - Python ID3 标记、元组和字符串格式问题

> ID：13906438
> 
> 赞同：1
> 
> 时间：2012-12-16T23:17:47.063
> 
> 标签：python, arrays, list

我正在尝试获取目录中每个音乐文件的“标题”和“艺术家”，以便我可以使用它。我是新手，所以我正在使用这些家伙代码：[http ://www.diveintopython.net/object_orient_framework/index.html](http://www.diveintopython.net/object_oriented_framework/index.html)

对，所以我得到了以下输出。使用我的精英图像处理技能，我指出了我想要保留的数据：

![输出](../Images/42b6eaeabecbc6c22867e49b5126c806.png)

使用以下代码：

```
 if __name__ == "__main__":
  for info in listDirectory("/home/alpha/htdocs/music/", [".mp3"]):
      for song in info.items():
              print song[1] 
```

完整代码：

```
import os
import sys
from UserDict import UserDict

def stripnulls(data):
    "strip whitespace and nulls"
    return data.replace("\00", "").strip()

class FileInfo(UserDict):
    "store file metadata"
    def __init__(self, filename=None):
        UserDict.__init__(self)
        self["name"] = filename

class MP3FileInfo(FileInfo):
    "store ID3v1.0 MP3 tags"
    tagDataMap = {"title"   : (  3,  33, stripnulls),
                  "artist"  : ( 33,  63, stripnulls),
                  "album"   : ( 63,  93, stripnulls),
                  "year"    : ( 93,  97, stripnulls),
                  "comment" : ( 97, 126, stripnulls),
                  "genre"   : (127, 128, ord)}

    def __parse(self, filename):
        "parse ID3v1.0 tags from MP3 file"
        self.clear()
        try:                               
            fsock = open(filename, "rb", 0)
            try:                           
                fsock.seek(-128, 2)        
                tagdata = fsock.read(128)  
            finally:                       
                fsock.close()              
            if tagdata[:3] == "TAG":
                for tag, (start, end, parseFunc) in self.tagDataMap.items():
                    self[tag] = parseFunc(tagdata[start:end])               
        except IOError:                    
            pass                           

    def __setitem__(self, key, item):
        if key == "name" and item:
            self.__parse(item)
        FileInfo.__setitem__(self, key, item)

def listDirectory(directory, fileExtList):                                        
    "get list of file info objects for files of particular extensions"
    fileList = [os.path.normcase(f)
                for f in os.listdir(directory)]           
    fileList = [os.path.join(directory, f) 
               for f in fileList
                if os.path.splitext(f)[1] in fileExtList] 
    def getFileInfoClass(filename, module=sys.modules[FileInfo.__module__]):      
        "get file info class from filename extension"                             
        subclass = "%sFileInfo" % os.path.splitext(filename)[1].upper()[1:]       
        return hasattr(module, subclass) and getattr(module, subclass) or FileInfo
    return [getFileInfoClass(f)(f) for f in fileList]                             

if __name__ == "__main__":
    for info in listDirectory("/music/_singles/", [".mp3"]): 
        print "\n".join(["%s=%s" % (k, v) for k, v in info.items()])
        print 
```

但在那之后我被困住了，因为我不知道下一步该做什么。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T23:25:28.190

你可能最好使用像[Mutagen](http://code.google.com/p/mutagen/)这样的库。

```
import mutagen, mutagen.mp3, mutagen.easyid3

mp3 = mutagen.mp3.MP3(file, ID3=mutagen.easyid3.EasyID3)
print mp3['artist'], mp3['album'], mp3['title'] 
```

Mutagen 相对于 MP3FileInfo 的一个好处是支持 ID3v2。您只是在阅读旧的、简单的 ID3v1 标签。Mutagen 解析所有标准 ID3v2.4 帧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T23:28:22.037

如果您在 info 中获得了该数据，那么只需通过以下方式访问您想要的内容：

```
info['artist']
info['album'] 
```

等等......你的映射中的任何东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T23:29:16.877

在你的主循环中，`info`是一个字典，你可以看到在类中定义的`tagDataMap`键`MP3FileInfo`。所以修改你的原始代码：

```
if __name__ == "__main__":
    for info in listDirectory("/music/_singles/", [".mp3"]): 
        print "\n".join(["%s=%s" % (k, info[k]) for k in ("title", "artist")])
        print 
```

# c++ - 使用地图统计大数据

> ID：13906442
> 
> 赞同：0
> 
> 时间：2012-12-16T23:18:10.427
> 
> 标签：c++, map

我不能让它处理一个大文件。我从使用数组改为使用地图，因为这可能会有所帮助。任何建议表示赞赏。

```
map<char,int> freq;
size_t size = 0;
for (char c; cin.get(c); size++){
   if (isalpha(c))
      freq[tolower(c)]++;
      }
cout << "char" << freq['a'] << endl; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:25:48.283

由于`char`按照标准只有八位，因此使用整个地图是相当浪费的。`int`声明一个 256 s的数组，将你的`char`变成`unsigned`，并以可以想象的最快方式计算频率：

```
int freq[256];
size_t size = 0;
// Count without any checks or conditions
for (char c ; cin.get(c) ; size++) {
    freq[(unsigned char)c]++;
}
// Go through the lowercase letters, and add upper frequencies to them
for (int i = 'a' ; i <= 'z' ; i++) {
    freq[i] += freq[toupper(i)];
    cout << (char)i << " --> " << freq[i] << endl;
} 
```

# linux - 数字取证：我可以从我的 .raw 文件中得到什么？

> ID：13906450
> 
> 赞同：1
> 
> 时间：2012-12-16T23:19:06.623
> 
> 标签：linux, file, format

我有一个扩展名为 .raw 的文件（原始图像格式），但我无法打开它。我尝试使用命令*文件 filename.raw*、*exiv2 print*、*exiftool*、*ufraw*、*dcraw*对其进行分析。因为它似乎是一个二进制文件，所以我尝试使用*字符串 filename.raw*、*hexdump*和*xxd*提取信息。令人惊讶的是，该文件似乎没有任何元数据。我怀疑文件扩展名是错误的，并且文件被操纵。

我还能如何确定类型？我怎样才能提取任何信息？

非常感谢您的任何建议。

编辑：可以在 [此处](http://dl.dropbox.com/u/108560666/sample.raw)下载示例文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:09:45.567

嗯……嗯，

//从文件的字节数判断：

// 1447600

//这个数字是准确的。

// 3 x 499 x 967

//这很奇怪，但这意味着如果这是一个图像，那么它必须是每像素 3 个字节，并且是 499 x 967 或 967 x 499

编辑：分辨率是错误的。可能也是每个通道的位数，这是我`bc`在半夜而不是 WA 使用的结果。

实际因子是 2^4*5^2*7*11*47，这意味着它不可能是每像素 3 字节。可能正在进行一些流压缩？但可能不是，这个数字太好了。

查看一些数据，其中大部分都是相当嘈杂的，这适合带有嘈杂数字传感器的相机：

```
00000000  0e 08 06 02 04 06 00 02  00 04 01 04 0e 03 05 01  |................|
00000010  03 01 06 04 00 03 01 05  01 00 02 00 06 02 04 01  |................|
00000020  00 07 0c 0d 05 01 0a 0d  03 08 11 08 0c 03 06 06  |................|
00000030  08 02 07 04 01 01 07 02  05 06 10 04 07 01 04 02  |................|
00000040  02 01 0c 09 07 02 05 01  0d 04 00 05 0e 01 00 07  |................|
00000050  00 02 04 0a 11 04 07 04  01 00 0d 07 0f 06 03 02  |................|
00000060  06 04 0a 0b 03 08 02 0c  00 08 00 04 06 09 03 03  |................|
00000070  04 00 0a 04 01 06 00 00  02 08 0a 07 04 09 01 0b  |................|
00000080  01 0c 0d 04 03 03 05 00  02 11 09 00 07 08 08 05  |................|
00000090  04 07 02 0c 00 13 01 06  07 02 08 0a 07 05 02 01  |................| 
```

这个区域，在文件的开头，很可能接近全黑。

因此，在常见的每像素 3 字节格式中，您有 BGR24、RGB24 或 YUV24。

因为处理 RGB 或 BGR 格式更简单，让我们使用 libpng 编写一些短代码将其转储到 png。

第一次尝试：

```
#include <png.h>
#include <exception>
#include <memory>

int main() {
  FILE * fpout;
  FILE * fpin;
  png_structp png_ptr = nullptr;
  png_infop info_ptr = nullptr;
  const unsigned width = 499;
  const unsigned height = 967;
  const unsigned channels = 3;

  fpin = fopen("sample.raw", "rb");
  if (!fpin)
    throw std::exception();

  std::unique_ptr<char[]> data(new char[width*height*channels]);
  fread(data.get(), width*height*channels, 1, fpin);
  fclose(fpin);

  fpout = fopen("output.png", "wb");
  if (!fpout)
    throw std::exception();

  png_ptr = png_create_write_struct(PNG_LIBPNG_VER_STRING, nullptr, nullptr, nullptr);
  if (!png_ptr) {
    fclose (fpout);
    throw std::exception();
  }

  info_ptr = png_create_info_struct(png_ptr);
  if (!info_ptr) {
    png_destroy_write_struct(&png_ptr, nullptr);
    fclose (fpout);
    throw std::exception();
  }

  if (setjmp(png_jmpbuf (png_ptr))) {
    png_destroy_write_struct(&png_ptr, &info_ptr);
    fclose (fpout);
    throw std::exception();
  }

  png_set_IHDR(png_ptr,
      info_ptr,
      width,
      height,
      8,
      PNG_COLOR_TYPE_RGB,
      PNG_INTERLACE_NONE,
      PNG_COMPRESSION_TYPE_DEFAULT,
      PNG_FILTER_TYPE_DEFAULT);

  /* Initialize rows of PNG. */

  std::unique_ptr<png_bytep[]> row_ptrs(new png_bytep[height]);
  size_t stride = width * 8 * channels / 8;
  for (size_t i = 0; i < height; ++i) {
    size_t q = i * stride;
    row_ptrs[i] = (png_bytep)data.get() + q;
  }

  /* Write the image data to "fp". */

  png_init_io(png_ptr, fpout);
  png_set_rows(png_ptr, info_ptr, row_ptrs.get());
  png_write_png(png_ptr, info_ptr, PNG_TRANSFORM_IDENTITY, nullptr);

  png_destroy_write_struct(&png_ptr, &info_ptr);
  fclose (fpout);
} 
```

给我们：

[http://i.imgur.com/Iwi3M.jpg](http://i.imgur.com/Iwi3M.jpg)

这是令人振奋的，因为似乎我们只是解决了错误。所以检查图像，它看起来像每 467 个像素或大约 467 像素重复一次。但是，看起来数据中没有任何有趣的东西。所以它可能不是简单的 RBG 或 BGR 或 YUV 编码，否则它会看起来更好。

Raw Therapee 不认识它。所以，我现在问你。你用什么相机做这个的？

# asp.net - 授权属性不适用于 mvc 4

> ID：13906452
> 
> 赞同：2
> 
> 时间：2012-12-16T23:19:15.810
> 
> 标签：asp.net, authorization, simplemembership

我有使用 Visual Studio 2012 为 MVC 4 编写的代码......我正在尝试实现基于角色的授权，但似乎 [Authorize] 由于某种原因无法正常工作......而且我仍然可以通过 url 获取页面，甚至它的控制器动作是用 [Authorize] 属性初始化的......第二个我什至可以尝试通过将以下代码放入全局中来查看整个应用程序

```
 public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new System.Web.Mvc.AuthorizeAttribute());
        filters.Add(new HandleErrorAttribute());
    } 
```

我的路由默认设置为登录页面，因为没有未经授权的人可以访问应用程序

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Account", action = "Login", id = UrlParameter.Optional }
        );
    } 
```

我试图通过直接从 url 获取 aa() 视图来进行测试

```
[Authorize]
public class HomeController : Controller
{

    public ActionResult Index()
    {
        return View();
    }

    [Authorize]
    public ActionResult aa()
    {
        return View();
    } 
```

登录代码

```
[Authorize]
[InitializeSimpleMembership]
public class AccountController : Controller
{

    public ActionResult Login(string returnUrl)
    {
        ViewBag.ReturnUrl = returnUrl;

        return View();
    }

    [HttpPost]

    public ActionResult Login(LoginModel model, string returnUrl)
    {

        if (ModelState.IsValid && WebSecurity.Login(model._UserName, model._Password, persistCookie: false))
        {
            return RedirectToAction("Index", "Home");                
        }

        ModelState.AddModelError("", "The user name or password provided is incorrect.");

        return View(model);
    } 
```

和 web.config

```
 <authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T15:41:22.390

`InitializeSimpleMembership`需要装饰你的 HomeController，而不是 AccountsController。由于您的 HomeController/Index 方法是整个网站的入口点，`[Authorize`因此要使 ] 工作，您需要先初始化 SimpleMembership，然后再进行其他任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-10T21:22:37.863

我创建了新的 MVC4 网站并面临同样的问题：如何强制授权（如果未授权，则重定向到登录页面）。

我是 ASP.NET 的初学者，找不到简单的答案（这方面有很多，尤其是在 stackoverflow，但这些答案都没有帮助我）。几个小时后我终于完成了，所以也许我会帮助某人。

1.  将过滤器添加到全局过滤器，这将需要在任何地方进行授权（除非您将设置 AllowAnonymous，但稍后再说）。**打开 App_Start/FilterConfig.cs**并：

    ```
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            filters.Add(new HandleErrorAttribute());
            // Add this line
            filters.Add(new AuthorizeAttribute());
        } 
    ```

2.  现在我们需要在配置文件中设置授权。在项目的根目录中**打开 Web.config并：**

    ```
    <system.web>

        // start of modification

        // remove this line
        <authentication mode="None" />

        // add this lines
        <authentication mode="Forms">
            <forms loginUrl="~/Account/Login" timeout="30" protection="All"></forms>
        </authentication>
        <authorization>
            <deny users="?" />
        </authorization>

        // end of modification

        <compilation debug="true" targetFramework="4.5" />
        <httpRuntime targetFramework="4.5" />
    </system.web> 
    ```

就这样。默认登录操作默认具有 [AllowAnonymous] 标签，因此它应该可以正常工作。如果您不需要在 Controllers/ 中手动添加它们，就像这样：

```
 [AllowAnonymous]
    public ActionResult Login(string returnUrl)
        {
            ViewBag.ReturnUrl = returnUrl;
            return View();
        } 
```

希望帮助了某人。

# java - PreferenceScreen Android 中的 NullPointerException

> ID：13906458
> 
> 赞同：0
> 
> 时间：2012-12-16T23:19:38.353
> 
> 标签：java, android, android-preferences

我有一个 PreferenceScreen 然后动态创建一个 PreferenceCategory，并在这个类别上设置 layout `newCategory.setLayoutResource(<PackageName>.R.Layout.myLayout);`。布局是几个 TextView 和一个按钮。当我尝试更改这些 TextViews 的文本时，`TextView tvTextView = (TextView) findViewById(<PackageName>.R.id.tvTextView);` `tvTextView.setText("Test");`我得到`java.lang.NullPointerException`. 我不知道到底发生了什么，我正在拔头发，这一定是我没有得到的非常简单的东西。

原木猫：希望这是我要复制的正确内容 =S

```
12-16 23:25:23.450: E/AndroidRuntime(5412): FATAL EXCEPTION: main
12-16 23:25:23.450: E/AndroidRuntime(5412): java.lang.NullPointerException
12-16 23:25:23.450: E/AndroidRuntime(5412):     at <PackageName>.GpsLocation$2.onClick(GpsLocation.java:190)
12-16 23:25:23.450: E/AndroidRuntime(5412):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:158)
12-16 23:25:23.450: E/AndroidRuntime(5412):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-16 23:25:23.450: E/AndroidRuntime(5412):     at android.os.Looper.loop(Looper.java:144)
12-16 23:25:23.450: E/AndroidRuntime(5412):     at android.app.ActivityThread.main(ActivityThread.java:4937)
12-16 23:25:23.450: E/AndroidRuntime(5412):     at java.lang.reflect.Method.invokeNative(Native Method)
12-16 23:25:23.450: E/AndroidRuntime(5412):     at java.lang.reflect.Method.invoke(Method.java:521)
12-16 23:25:23.450: E/AndroidRuntime(5412):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
12-16 23:25:23.450: E/AndroidRuntime(5412):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
12-16 23:25:23.450: E/AndroidRuntime(5412):     at dalvik.system.NativeStart.main(Native Method) 
```

第 190 行有`tvTextView.setText("Test");`，这显然是错误发生的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T00:44:57.320

感谢大家帮助快速回复，但我想出了一个不同的方法。谢谢你的时间。

# objective-c - Objective-c 静态库 intellij appcode

> ID：13906460
> 
> 赞同：1
> 
> 时间：2012-12-16T23:19:48.943
> 
> 标签：objective-c, static-libraries

新的objective-c。终于找到了一个 [教程](http://blog.carbonfive.com/2011/04/04/using-open-source-static-libraries-in-xcode-4/)，描述了如何在 x-code 中创建和使用静态库。我很惊讶构建和使用库是一个如此艰巨的过程。有没有更有效的方法来创建和使用静态库？

我安装了 JetBrain 应用程序代码。但我无法遵循相同的步骤，因为我不知道如何在应用程序代码中创建工作区。

有人可以列出在应用程序代码中创建和使用静态库的步骤吗？

另外，如何更改应用代码中的构建路径？我试图更改项目属性中的路径...有一个文本框，但它的值不断恢复为默认值？

我想我遗漏了一些东西，因为我使用过的喷气式大脑产品（用于 C# 的 resharper 和用于 Java 的 intell-j）质量非常高。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:08:27.060

目前，AppCode 没有完整的项目配置工具：您不能在其中创建目标。此功能将在[未来的版本](http://youtrack.jetbrains.com/issue/OC-561)中添加。

同时，您可以使用 Xcode 设置您的项目，然后切换回 AppCode。

至于恢复默认的构建路径，您能否在[跟踪器](http://youtrack.jetbrains.com/issues/OC)中提交错误报告？

# android - 是否有类似 Holo 主题的快速操作？

> ID：13906461
> 
> 赞同：1
> 
> 时间：2012-12-16T23:20:01.067
> 
> 标签：android, drop-down-menu, spinner, android-actionbar, quickaction

对于我的应用程序，我需要类似[Quick Action](https://stackoverflow.com/questions/3059155/android-quick-actions-ui-pattern)的东西。github 上有很多有用的库，因为这似乎不是通过 Android SDK 正式提供的功能。

但我只是在官方 gmail 应用程序中偶然发现了一些东西：

![在此处输入图像描述](../Images/4c62c5a0b7868769b237a0265a9ad633.png)

这（下拉菜单）正是我的应用程序所需要的。但我想知道实现此功能的最佳方法是什么。自己的快速操作实现？一些奇怪的 Button+Spinner 见面？是否有任何库或设计指南可以帮助我创建这样的小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:44:14.473

正确的方法是使用上下文操作项（操作模式）。当您长按某个项目时，这将在操作栏中显示操作项目。如果您在操作栏上有超过合适的内容，它们将像常规操作项一样显示在溢出中。

[http://developer.android.com/design/patterns/selection.html](http://developer.android.com/design/patterns/selection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T00:28:43.527

这就是 ActionBar 溢出菜单。如果没有足够的空间来显示它们，则其中的操作将正常 MenuItem 配置为在溢出菜单上进行组织

这是[操作栏文档](http://developer.android.com/guide/topics/ui/actionbar.html)，您可以在其中找到如何显示/隐藏 MenuItem。基本上，在定义操作栏时，您需要使用 android:showAsAction xml 属性。

```
 android:showAsAction=["ifRoom" | "never" | "withText" | "always" | "collapseActionView"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:15:12.313

所示 gmail 应用程序中使用的小部件是[PopupMenu](http://developer.android.com/reference/android/widget/PopupMenu.html)（在 API 11 中引入）。它的行为在[此处](http://developer.android.com/guide/topics/ui/menus.html#PopupMenu)详细记录和解释。

# sum - 值总数 - 总和

> ID：13906464
> 
> 赞同：0
> 
> 时间：2012-12-16T23:20:10.820
> 
> 标签：sum, factorial

我需要编写一个程序“long int sum(int n)”，它汇总如下值的总数：

`1! − 2! + 3! − ... ± n!`

我成功地为以下内容写了总和：

```
1-3 + 5 - ... ± (2n + 1)

float sum (int n) {
int max = 2*n +1, i = 1, sum = 0, ch = 2;

for (i = 1; i <= max; i+2; ){
    if ((ch%2) == 0){
        sum += i;
    }
    else{
        sum = sum - i;
    }
    ch++;
    return sum;
} 
```

但我不知道/不知道如何将其作为阶乘总和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:36:04.997

将其拆分为两个功能。代替

```
sum += i; 
```

和

```
sum = sum - i; 
```

尝试：

```
sum += factorial(i); 
```

和

```
sum = sum - factorial(i) 
```

其中阶乘是一些计算阶乘的方法：

```
long int factorial(int n) {
    long int fact = n;
    while ( n > 1) {
        n--;
        fact *= n;
    }

    return fact;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T23:40:40.587

制作另一个执行阶乘的函数和一个执行交替系列之和的函数很有用。. .

```
 int factorial(int n)
    {
        int sum = 1;
        if (n > 0)
            for (int i = n; i > 1; --i)
                sum *= i;
        else if (n <= 0)
            return 0;

        return sum;
    }

    int alernatingSeriesSum(int nStart)
    {
        if(nStart < 1) return 0;
        int sum = 0;
        for(int i=1; i<nStart; ++i)
            sum += (factorial(i) * ((i%2)==0 ? -1 : 1));  //multiply -1 if its an even #s
        return sum;
    } 
```

阶乘非常简单，乘以值，减一并迭代直到达到 1。

交替序列总和是相似的，它调用阶乘以进行到达迭代（这次索引增加除外），并通过每次索引为偶数时乘以 -1 来创建交替符号。这就是我们生产 1 的方式！- 2！+ 3！- 4！+ . . . + (n+1)！- (n+2)！

我希望这会有所帮助。. .

如果您无法将其拆分为函数，请尝试将其全部写入一个 main 函数中。. . 我在 C 中测试了这段代码，它可以工作。随意使用代码并尝试阅读每一行的作用。祝你好运。

# r - 在 R 中重新排列/识别日期变量

> ID：13906469
> 
> 赞同：-1
> 
> 时间：2012-12-16T23:20:49.333
> 
> 标签：r

```
data=read.csv("filelocation",header=T)

obs timedate   weight
504 2010-10-04 52495    
505 2010-10-01 53000    
506 2010-09-30 52916    
507 2010-09-29 52785    
508 2010-09-28 53348    
509 2010-09-27 52885    
510 2010-09-24 52174    
511 2010-09-23 51461    
512 2010-09-22 51286    
513 2010-09-21 50968    
514 2010-09-20 49250 
```

我在 R 中加载了一些数据，但是 CSV 文件中的数据是从最新的->最旧的，我想重新排列到最新的->最旧的。我怎么做？我还尝试格式化“日期”变量，以便 R 可以将我正在加载的数据识别为时间序列，以便区分/滞后“权重”变量，但我没有运气。我究竟做错了什么？我正在使用

```
timedate=as.Date(data$timedate,"%Y-%m-%d") 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:26:37.217

干得好：

```
R> dat <- read.table(file=textConnection("obs     timedate   Weight
504 2010-10-04  52495   
505 2010-10-01  53000   
506 2010-09-30  52916   
507 2010-09-29  52785   
508 2010-09-28  53348   
509 2010-09-27  52885   
510 2010-09-24  52174   
511 2010-09-23  51461   
512 2010-09-22  51286   
513 2010-09-21  50968   
514 2010-09-20  49250"), header=TRUE)
+ + + + + + + + + + + 
R> 
```

现在将日期解析为`Date`并重新显示以进行检查：

```
R> dat$timedate <- as.Date(as.character(dat$timedate))
dat
   obs   timedate  Weight
1  504 2010-10-04  52495
2  505 2010-10-01  53000
3  506 2010-09-30  52916
4  507 2010-09-29  52785
5  508 2010-09-28  53348
6  509 2010-09-27  52885
7  510 2010-09-24  52174
8  511 2010-09-23  51461
9  512 2010-09-22  51286
10 513 2010-09-21  50968
11 514 2010-09-20  49250
R> 
```

只需按日期重新排序：

```
R> dat[order(dat$timedate),]
   obs   timedate  Weight
11 514 2010-09-20  49250
10 513 2010-09-21  50968
9  512 2010-09-22  51286
8  511 2010-09-23  51461
7  510 2010-09-24  52174
6  509 2010-09-27  52885
5  508 2010-09-28  53348
4  507 2010-09-29  52785
3  506 2010-09-30  52916
2  505 2010-10-01  53000
1  504 2010-10-04  52495
R> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T23:33:26.257

您还可以在使用参数导入时将`timedate`列设置为 a 。`Date``colClasses`

```
dat <- read.csv(
                "filelocation",
                header=TRUE,
                colClasses=c("numeric","Date","numeric")
               ) 
```

...然后按照@Dirk 的建议重新排序：

```
dat <- dat[order(dat$timedate),] 
```

# c# - LinkLabel 打不开

> ID：13906471
> 
> 赞同：2
> 
> 时间：2012-12-16T23:21:08.323
> 
> 标签：c#, winforms, .net-4.0, linklabel

我正在使用相同的代码在 Form2 和 Form3 中创建 LinkLabel。Form2 和 Form3 是单独的类，因此名称不会干扰。它们都已创建，但在 Form 3 链接打开时，在 Form2 中没有任何反应。

这是Form2的代码

```
public partial class Form2 : Form
{
  public void createFormEntry(List<string> videoId)
  {
    LinkLabel link = new LinkLabel();
    link.Name = "link";
    link.AutoSize = true;
    link.Location = new Point(76, 8);
    link.Text = "www.example.com";
    link.LinkClicked += new LinkLabelLinkClickedEventHandler(link_LinkClicked);
    this.Controls.Add(link);
  }   

    private void link_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
    {
        System.Diagnostics.Process.Start("http://www.example.com");
    }
} 
```

这是针对 Form3

```
public partial class Form3 : Form
{
  private void createFormEntry(Feed<Video> videoFeed)
  {
    LinkLabel link = new LinkLabel();
    link.Name = "link";
    link.AutoSize = true;
    link.Location = new Point(76, 8);
    link.Text = "www.example.com";
    link.LinkClicked += new LinkLabelLinkClickedEventHandler(link_LinkClicked);
    this.Controls.Add(link);
  }

    private void link_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
    {
        System.Diagnostics.Process.Start("http://www.example.com");
    }
} 
```

他们在不同的班级。Form2 在 Form3 之前打开。有什么问题？

编辑：现在当我添加更多代码时，我在 Form2 中看到 createFormEntry 是公共的，而在 Form3 中它被设置为私有。这可能是一个原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:44:03.590

您试图打开一个链接而不告诉程序如何或以什么方式打开该链接。您应该告诉它在程序或其他东西中搜索它！

# php - PHP - 显示目录中的 4 个最新图像

> ID：13906477
> 
> 赞同：2
> 
> 时间：2012-12-16T23:21:53.767
> 
> 标签：php

PHP 非常新。我已经成功地让这段代码显示一个目录中的 4 个图像，但是它按名称显示**前**4 个图像（001.png、002.png、003.png 和 004.png），它们是最低的数字并且发生是最近最少上传的：

```
<?php
$pictures = glob("directory/*.png"); 
for( $i=0; $i<=3; $i++ ){ 
echo "<img src=\"".$pictures[$i]."\" />"; 
}  
?> 
```

我希望更改它以按名称将最近上传的 4 个文件放入目录中。换句话说，我想显示数字最高的**最后4 张图像。**我在下面尝试过这个但是我收到 Parse error: syntax error, unexpected T_VARIABLE on line 4

```
<?php
$pictures = glob("directory/*.png"); 
$no_pictures = count($pictures)-1 
$limit = $no_pictures-3 
for( $i = $no_pictures; $i >= $limit; $i--; ){ 
echo "<img src=\"".$pictures[$i]."\" />\n"; 
}  
?> 
```

任何帮助表示赞赏。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:32:24.667

您缺少第`;`3 行和第 4 行的结尾分号 [编辑] 并且您的`for`循环中有一个额外的分号`$i--`-

```
<?php
$pictures = glob("directory/*.png"); 
$no_pictures = count($pictures)-1;  // was missing ;
$limit = $no_pictures-3;            // was missing ;
for( $i = $no_pictures; $i >= $limit; $i--){  // removed ; after $i--
echo "<img src=\"".$pictures[$i]."\" />\n"; 
}  
?> 
```

# jquery - 使用 jquery 和 regex 更改元素 ID

> ID：13906479
> 
> 赞同：0
> 
> 时间：2012-12-16T23:21:58.713
> 
> 标签：jquery, regex

使用以下代码

```
<div id="family">
  <input type="text" id="test_0_0"/>
 <input type="text" id="hello_0_0"/>

</div>
 <div id="family1">

  </div> 
```

使用 Jquery 和正则表达式，我想从家庭 div 复制家庭 1 中的相同 html，但 id 为

```
<input type="text" id="test_1_0"/>
<input type="text" id="hello_1_0"/> 
```

我试过这个但不起作用

```
function renumber(){
    var content=$('#family').html();
    var pattern = new RegExp("_0","g");
    var final=content.replace(pattern,"_1");
    $('#family1').html(final);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:30:35.663

尝试

```
function renumber(){
    var content=$('#family').html();
    var pattern = new RegExp("(\\w)_0", "g");
    var final=content.replace(pattern,"$1_1");
    $('#family1').html(final);
} 
```

[http://jsfiddle.net/5njU2/](http://jsfiddle.net/5njU2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:52:02.903

您可以通过向每个元素添加一个`data-`属性来确保将其简化为根本不需要正则表达式。`family`您没有使用任何可能是错误的类，因为您可以执行以下操作来管理所有增量：

```
<div class="family" data-familyID="0">
  <input type="text" class="test"/>
   <input type="text" class="hello"/>
</div> 
```

JS 从现有元素创建一个新的“家庭”元素

```
var lastFamily= $('.family').last()
var newFamily =lastFamily.clone();
var newFamilyID=newFamily.data('familyID')+1;
 /* update familyID and reset inputs*/
 newFamily.data('familyID', newFamilyID).find('input').val('').insertafter(lastFamily); 
```

JS处理输入的变化并获取输入的当前家庭ID`family`

```
/* delegate to body to account for dynamicly added elements*/
$('body').on('change', '.family input', function(){
    var val=$(this).val(), className=$(this).attr('class'), familyID=$(this).closest('.family').data('familyID');
    alert( className +' #'+familyID+' value='+val);
}) 
```

# c - 如果输入错误，则双重要求输入

> ID：13906485
> 
> 赞同：0
> 
> 时间：2012-12-16T23:22:35.553
> 
> 标签：c, list, case-sensitive

我的职能：

```
//Check Character Case(Upper/Lower Case). If Upper Convert to Lower Case.
char checkLetterCase(char letter){
    if(letter >= 65 && letter <= 90){
        letter = tolower(letter);
        return letter;
    }
    else if(letter >= 97 && letter <= 122){
        return letter;
    }
    else{
        return 0;
    }
}

//Add the Specified Letter by Creating a New Node in the Letter List defined
void addLetter(letterListT *letListHead, char letter){
    letterListT *newNode;
    newNode = (letterListT *)malloc(sizeof(letterListT));

    //Check Case(lowe/upper)
    letter = checkLetterCase(letter);  

    //This may only occur on user input
    while(letter == 0){
        printf("Guess a letter: ");
        scanf("%c", &letter);
        letter = checkLetterCase(letter);
    }

     newNode->letter = letter;

    newNode->nxt = letListHead->nxt;
    letListHead->nxt = newNode;
} 
```

我的主要电话：

```
addLetter(unusedLetList, i=0); 
```

这是我在跑步时的表现：

```
Guess a letter: 6
Guess a letter: Guess a letter: t 
```

我的问题是：为什么当我输入一个非字符时，我会收到两次“猜信”消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:27:08.987

因为在按下 之后`<enter>`，有一个额外的换行符（还没有）被`scanf()`. 拨打电话以`getchar()`摆脱这种情况：

```
letter = checkLetterCase(letter);
if (letter == 0) getchar(); 
```

顺便说一句，您的`checkLetterCase()`功能在非 ASCII 系统上被破坏了。改用这个：

```
#include <ctype.h>

char checkLetterCase(char letter)
{
    return isalpha(letter) ? letter : 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T23:35:00.313

一个关于避免使用缓冲区的讨厌事情的小建议，只是不要使用 scanf。你可以使用它并清理缓冲区，你可以使用 fgets。
我想你可以通过阅读手册来学习如何使用它，但我会给你举个例子：

```
while(letter == 0)
{
    char buffer[10];
    printf("Guess a letter: ");
    fgets(buffer,10,stdin);
    if(strlen(buffer)==2)
        letter = checkLetterCase(buffer[0]);
} 
```

# c# - XmlSerializer - 文件访问异常

> ID：13906486
> 
> 赞同：2
> 
> 时间：2012-12-16T23:22:41.910
> 
> 标签：c#, asp.net, xml-serialization, file-access

我有一个简单的页面，它从文件系统加载 XML，填充文本框，这些可以更新和保存。对于序列化和反序列化，我使用这些方法：

```
private static readonly object FormDataLock = new object();

public static FormData getFormData(string filename)
{
    FormData fd;
    lock (FormDataLock)
    {
        XmlSerializer x = new XmlSerializer(typeof(FormData));
        using (Stream s = new FileStream(filename, FileMode.Open, FileAccess.Read))
        {
            return (FormData)x.Deserialize(s);
        }
    }
}

public void saveFormData(string filename)
{
    lock (FormDataLock)
    {
        XmlSerializer x = new XmlSerializer(typeof(FormData));
        using (Stream s = new FileStream(filename, FileMode.Create, FileAccess.Write))
        {
            x.Serialize(s, this);
        }
    }
} 
```

但问题是，我有时会遇到问题（当我在 PageLoad 之后单击“保存”按钮太快时我注意到了）IOException：

```
IOException: The process cannot access the file ".." because it is being used by another process. 
```

我试图用互斥锁锁定块，但它仍然无法正常工作。页面表单非常简单，但我在上面使用了 UpdatePanel（重要吗？）。

当页面加载完成并且第一次保存请求完成后，我可以尽可能快地单击按钮，一切正常（没有例外）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T00:04:09.573

XmlSerialization 动态创建新的 dll，这些 dll 特定于您尝试在 temp 目录中序列化的类。创建这些是为了提高性能。请参阅[http://msdn.microsoft.com/en-us/library/swxzdhc0.aspx](http://msdn.microsoft.com/en-us/library/swxzdhc0.aspx)

而不是调用 GC.Collect 等...尝试将序列化程序创建为类上的静态字段。这应该会提高性能并可能会解决您的问题，因为它只会被创建一次。

此代码将以线程安全的方式创建单个 xmlserializer。不要为此添加 [ThreadStatic] 属性，因为这将确保每个线程执行一次代码并使其再次成为线程不安全的！

```
private static readonly XmlSerializer xmlSerializer = 
    new XmlSerializer(typeof(FormData)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:47:41.130

我有类似的问题，我希望这对你也有帮助。问题是垃圾收集器在您第二次单击之前没有清理，因此您应该尝试手动调用它。活着之前尝试调用GC`using`

```
GC.Collect();
GC.WaitForPendingFinalizers(); 
```

# javascript - Knockout js观察div值变化

> ID：13906489
> 
> 赞同：1
> 
> 时间：2012-12-16T23:23:01.803
> 
> 标签：javascript, jquery, html, knockout.js

[我的问题从这里](https://stackoverflow.com/questions/13897411/knockout-js-observable-array-data-group-total-age-count-per-section)的早期问题开始

在这个年龄是一个从 1 到 20 的滑块（请考虑这个例子）。现在我将滑块的值存储在另一个 div 中（这个包含实际年龄）。我正在为 div 或 input(hidden) 编写一个更改事件（因为这些没有更改事件）所以我想在 div 中的文本更改时构建一个自定义事件，我希望事件触发。

一些代码：

```
<div class="readonly" data-bind="text: Points, event:{customevent :$.root.value_changed}"></div>
<input class="points" type="hidden" data-bind="text: Points, event:{customevent :$.root.value_changed}" /> 
```

JavaScript

```
customViewModel : function() {

  var self = this;
  self.value_changed = function (data) {
  };

}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:41:51.980

您可以在元素上触发此事件：

```
$("div").trigger("customevent");​ 
```

工作示例在这里：http: [//jsfiddle.net/qU7c8/1/](http://jsfiddle.net/qU7c8/1/)

# python - Flask-Security 中基于令牌的密码重置功能说明

> ID：13906490
> 
> 赞同：6
> 
> 时间：2012-12-16T23:23:13.347
> 
> 标签：python, flask, token, password-recovery, flask-extensions

有人可以告诉我烧瓶安全的密码重置令牌中发生了什么吗？代码在github上：

[https://github.com/mattupstate/flask-security/blob/develop/flask_security/recoverable.py](https://github.com/mattupstate/flask-security/blob/develop/flask_security/recoverable.py)

（目录中可能还有其他部分。）

我对正在发生的事情的理解：

1.  在 forgot_password() 定义的路由中，用户提交表单以重置密码
2.  生成“reset_password_token”。这由用户的 ID + 用户当前（存储加密）密码的 md5() 组成？
3.  生成指向包含令牌的重置密码地址的链接。
4.  此链接通过电子邮件发送到 user.email 提供的地址
5.  当用户单击该链接时，他们会转到一条路线（在视图中定义），即 reset_password(token)。令牌值是此路由的参数。
6.  该路由评估令牌是否有效且未过期。
7.  如果是这样，则此路由会呈现一个要求输入新密码的表单，即 ResetPasswordForm()。

那是对的吗？

还：

1.  如果上面是正确的，让令牌包含当前密码的新 md5() 是否安全？我知道它应该是独一无二的，而且逆转成本很高，但仍然如此吗？
2.  有效期存储在哪里？

我对 generate_password_reset 函数特别感到困惑

`data = [str(user.id), md5(user.password)] return _security.reset_serializer.dumps(data)`

和

`get_token_status(token, 'reset', 'RESET_PASSWORD')`内部函数`reset_password_token_status(token)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:16:30.670

它正在使用`itsdangerous`模块序列化令牌。如果您在下面阅读更多相关信息，您将获得有关如何使用过期时间戳等的答案。

[http://packages.python.org/itsdangerous/](http://packages.python.org/itsdangerous/)

该函数`serializer.dumps()`创建一个唯一的序列化字符串，除非将确切的序列化值作为参数提供给它，否则`serializer.loads()`调用它会返回异常。`get_token_status`

因此，您`dumps()`然后使用其中的返回值，调用`loads()`. 如果不匹配，则您有异常，在这种情况下意味着错误的令牌。

# c# - 使 WinForms UserControl 出现在 WPF Visual C# 项目的工具箱中？

> ID：13906491
> 
> 赞同：2
> 
> 时间：2012-12-16T23:23:26.523
> 
> 标签：c#, wpf, winforms, visual-studio, xaml

我有一个 Visual Studio 2012 C# 应用程序，它使用嵌套在 WPF WindowsFormsHost 容器中的 WinForms UserControl。该应用程序运行良好。要将 WinForms UserControl 添加到项目中，我必须直接编辑主窗体的 XAML 文件。这并不难，但如果可能的话，我希望能够从工具箱中工作。

我在 Stack Overflow 上发现了几个不同的线程，它们处理了让控件出现在 Visual Studio 工具箱中的问题，但没有一个讨论过让 WinForms 控件出现在 WPF 项目（混合项目）的工具箱中。*请注意，当我在 WinForms 项目中使用*WinForms UserControl 时，它确实出现在工具箱中。但如果宿主项目是 WPF 项目，我只能在工具箱中看到 WPF 控件。我尝试通过执行以下操作添加 WinForms 控件：

*   在工具箱中单击鼠标右键
*   选择*选择项目*
*   选择 .NET Framework 组件选项卡
*   浏览到包含 WinForms UserControl 的 DLL
*   选择 DLL 并单击 OK

包含的控件被导入到 .NET Framework 组件列表中，但在我退出“选择项”对话框后不显示在工具箱中。奇怪的是，我尝试卸载 DLL 的控件并重复此操作几次，但结果不一致。我从来没有显示控件，但有一次我得到一个对话框，说“控件已导入但在设计器中未激活”，我应该确保它们兼容。还有一次我得到一个错误框，说 DLL 不包含任何可用的控件。大多数情况下，它会在 .NET Framework 组件列表中显示导入的控件并带有*复选标记*列表中它们旁边，并且行以蓝色突出显示。但是同样，尽管没有看到任何错误或警告消息，但它们并未显示在工具箱中。请注意，作为 WinForms 控件 DLL 源的 .NET 项目是解决方案中的一个项目。

那么，是否有可能让 Winforms UserControl 显示在 WPF 项目的工具箱中？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:33:11.260

不是最直接的解决方案，但您可以创建一个包含`WindowsFormsHost`对象的包装器。我无法记录它，但我想由于[空域问题](http://msdn.microsoft.com/en-us/library/aa970688%28v=vs.85%29.aspx)，您不能原生地组合这两种控制类型。

编辑：我创建了一个 WPF 应用程序解决方案，然后将一个 WPF 用户控件库项目添加到该解决方案中。之后，我`WindowsFormsIntegration`在后一个项目中引用，添加了一个 `WindowsFormsHost`容器，将 a 设置`System.Windows.Forms.TextBox`为其子项。编译后，在 ToolBox 中有一个新元素，包含新创建的控件。我可以将它从那里拖到“所有 WPF 控件”或从“选择项目”对话框中选择已编译的程序集。

# php - Facebook PHP API 登录问题

> ID：13906492
> 
> 赞同：0
> 
> 时间：2012-12-16T23:23:29.243
> 
> 标签：php, facebook

我在这个问题上遇到过类似的线程，但还没有找到解决方案。我已将我的代码分解为最简单的形式，但仍在努力让用户登录。登录/接受权限后，redirect_uri 未正确重定向（在 url 栏中返回“状态”消息）。

```
<?php 
session_start();
require_once('sdk/src/facebook.php');
require_once('AppInfo.php');

$config = array(
    'appId' => '#####',
    'secret' => '########',
    'cookie' => false
);
$fb = new Facebook($config);

$user = $fb->getUser();
?>
<html> 
 <head> 
  <title>Hello Facebook</title> 
 </head> 
 <body>
<?php
if (!$user) { 
    $params = array(
        'scope' => 'read_stream',
        'redirect_uri' => 'http://localhost:8000/'
        );

        echo '<a href="'. $fb->getLoginUrl($params).'">Login</a>'; 
}
else { 
?>

<p> Hello World! </p>
<?php echo 'hello world!';
        echo 'value of user: '. $user;
        $params = array( 'next' => 'http://localhost:8000'
                        );
        echo '<a href="'.$fb->getLogoutUrl().'">Logout</a>'; 
?>
 </body> 
</html> 
```

开发人员中站点 url 的设置是相同的 (http://localhost:8000/)。沙盒模式被禁用。AppId 和 AppSecret 绝对正确。已经在 chrome、firefox、IE 和几个 FB accs 中尝试过。$user 似乎永远不会成为真的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:36:46.267

您使用的是最新版本的[Facebook PHP SDK](https://github.com/facebook/facebook-php-sdk)吗？有几个版本可供使用，其中许多是 v2。确保您的项目中有 v3 下载。

为确保您的应用在 Facebook 上正确配置，请使用Facebook gitHub 中的[example.php对其进行测试。](https://github.com/facebook/facebook-php-sdk/blob/master/examples/example.php)

# sql - Rails/SQL 如何让不同的工作人员处理不同的记录？

> ID：13906499
> 
> 赞同：1
> 
> 时间：2012-12-16T23:25:18.780
> 
> 标签：sql, ruby-on-rails, multithreading, postgresql

我（为了争论）有 1000 条记录和 10 名 Heroku 工作人员在运行。我想让每个工人处理不同的记录集..

我现在拥有的东西很好，但还不够完整。

```
sql = 'update products set status = 2 where id in 
         (select id from products where status = 1 limit (100) ) return *'
records = connection.execute(sql) 
```

这工作得很好..我得到 100 条记录，同时，我确保我的其他工作人员没有得到相同的 100..如果我把它扔到一个 while 循环中，那么即使我有 20000 条记录和 2 个工作人员，最终它们都会得到处理。

我的问题是，如果发生崩溃或异常，那么这 100 条记录看起来像是由另一个工作人员处理的，但事实并非如此。
我不能使用事务，因为其他选择会选择相同的记录。

**我的问题** 其他人使用什么策略让许多工作人员在同一数据集上工作，但记录不同。

我知道这是一个对话问题……我会把它当作社区 wiki，但我再也看不到这种能力了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T00:17:49.333

在 RDBMS 中构建任务队列非常困难。我建议使用专为这项工作设计的排队系统。

查看[PGQ](http://wiki.postgresql.org/wiki/PGQ_Tutorial)、 Celery 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T04:13:21.177

我使用Heroku 的[queue_classic](https://github.com/ryandotsmith/queue_classic)来安排存储在 Postgres 数据库中的作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T15:21:57.180

如果我要这样做，那将不是数据库端队列。这听起来像是标准的客户端处理，但您真正想要的是结果集的并行处理。

最简单的解决方案可能是做你正在做的事情，但将它们锁定在客户端，并将它们分配给那里的工作人员（自旋锁等）。然后，您可以提交事务并在完成处理后重新运行。

困难在于，如果您有记录正在处理应该在服务器之外发生的事情，并且发生了崩溃，那么您永远不会真正知道处理了哪些记录。回滚可能更安全，但请记住这一点。

# php - Magento：PHP 到 PDF 发票 - 创建新行/自动换行内容

> ID：13906502
> 
> 赞同：1
> 
> 时间：2012-12-16T23:25:34.113
> 
> 标签：php, magento, pdf, pdf-generation, magento-1.5

我正在编辑我的发票文件

```
/Mage/Sales/Model/Order/Pdf/Items/Invoice/Default.php 
```

如果它们的内容很长，我会遇到一个问题，即列会出现在其他列中并与其他列重叠。例如，在下一列上运行的产品描述。我试图弄清楚如何限制宽度/自动换行/为内容创建一个新行。

代码是：

```
// draw Product name
$lines[0] = array(array(
    'text' => Mage::helper('core/string')->str_split($item->getName(), 60, true, true),
    'feed' => 35,
));

// draw SKU
//  $lines[0][] = array(
//    'text'  => Mage::helper('core/string')->str_split($this->getSku($item), 25),
//  'feed'  => 255
//  );

// draw Brand (Added by James)
$product = Mage::getModel('catalog/product')->loadByAttribute('sku', $this->getSku($item), array('manufacturer'));

if ($product) {
    $lines[0][] = array(
        'text'  => Mage::helper('core/string')->str_split($product->getAttributeText('manufacturer'), 15),
        'feed'  => 220
    );
}
// draw Colour (Added by James)
$product = Mage::getModel('catalog/product')->loadByAttribute('sku', $this->getSku($item), array('pos_short_colour'));

if ($product) {
    $lines[0][] = array(
        'text'  => Mage::helper('core/string')->str_split($product->getAttributeText('pos_short_colour'), 15),
        'feed'  => 320
    );
} 
```

我知道'feed'是设置数组从左侧开始的距离（如果所有项目在css术语中都是'绝对'，则几乎=到margin-left）。

但我不确定如何限制它们的宽度和自动换行，这样如果我的制造商很长，它就不会碰到颜色。发票上没有足够的空间来简单地为每个属性提供更多空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T01:48:04.110

答案就在那里：

```
 $lines[0] = array(array(
        'text' => Mage::helper('core/string')->str_split($item->getName(), 60, true, true),
        'feed' => 35,
    )); 
```

这里的60是每行显示多少个字符`->getName(), 60, true,`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T14:43:05.873

我遇到过同样的问题。当我添加一个新列时，产品描述列消失了。我通过减少 $productDescr 的 str_split 函数中的数字（长度）来解决这个问题。

# ide - IntelliJ 12 代码覆盖在 GWT 项目的编辑器中不起作用

> ID：13906503
> 
> 赞同：7
> 
> 时间：2012-12-16T23:25:44.810
> 
> 标签：ide, intellij-idea, code-coverage, emma

我正在尝试 IntelliJ 12，但在运行覆盖范围的测试后，我无法在编辑器中将线条着色（红色、绿色、黄色）。有没有人注意到这个问题，或者只是我无法让它工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T02:56:21.377

默认情况下，代码覆盖率结果仅显示在左侧装订线中，可能很难注意到：

![显示在排水沟中的覆盖率](../Images/9c62989683638c84098aa36345ef8423.png)

您可以更改装订线颜色或配置 IntelliJ IDEA 以根据其覆盖状态更改整行的**背景（而不是前景）：**

![覆盖背景设置](../Images/047b6b9f18edf0ff84d02b35ecfef816.png)

现在更容易查看覆盖状态：

![覆盖显示为背景](../Images/a3f44aa74d83eebb1a1de9c0153a939f.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T15:05:03.103

最后，我发现了导致 IntelliJ IDEA 12.0.0（以及 12.0.1）出现代码覆盖故障的原因。

我的项目是一个 GWT 项目，所以有一些额外的配置来运行 gwt 客户端测试：将源目录添加到类路径中，以便可以无头运行 gwt devmode 进行测试：

```
 <build>
        <plugins>
            <plugin>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.5</version>
                <configuration>
                    <additionalClasspathElements>
                        <!-- the following two lines, causes intellij coverage to stop working -->
                        <additionalClasspathElement>${project.build.sourceDirectory}</additionalClasspathElement>
                        <additionalClasspathElement>${project.build.testSourceDirectory}</additionalClasspathElement>
                    </additionalClasspathElements>
                </configuration>
            </plugin>
        </plugins>
    </build> 
```

将源文件夹添加到 surefire 的类路径会导致 IntelliJ IDEA 12.x 错误配置项目（`.iml`文件）并且覆盖范围停止工作。

请注意，此 maven 配置在 IntelliJ IDEA 11.x 中没有任何影响，可以完美运行。

要重现该错误，只需`<additionalClasspathElement>`将 你会看到编辑器遗漏了所有关于行覆盖的信息。

我设法重现了这个问题，我将提交错误报告。

解决方法是注释掉这两行`<additionalClasspathElement>`并执行“Maven-> Reimport”，然后在需要时取消注释。

错误报告[IDEA-97920](http://youtrack.jetbrains.com/issue/IDEA-97920)，它将在 12.0.2 中修复

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-22T10:23:44.900

我在带有 Darcula 主题的 Mac 上使用 IntelliJ 13。

起初我没有注意到绿色/红色，因为它们非常暗淡，不会从黑色背景中脱颖而出。

但是，如果您非常仔细地查看行号左侧的左侧（如果您配置了它们），您会隐约看到它们。

您可以轻松配置颜色以使其更加引人注目。

默认值应该由 IntelliJ 在未来的版本中更改。

# artificial-intelligence - 我们可以通过爬取网站内容以编程方式确定网站的组成部分吗？

> ID：13906507
> 
> 赞同：-1
> 
> 时间：2012-12-16T23:25:54.063
> 
> 标签：artificial-intelligence, web-crawler, analysis

我们可以通过爬取网站内容以编程方式确定网站的组成部分吗？

我知道这似乎有点不可能，但我认为代码中的任何事情都是可能的。我正在尝试集思广益，如果我已经爬取了网站的所有数据，我可以根据这些想法确定网站的各个组件！

我有兴趣确定组件，例如，在电子商务网站的情况下，我想确定或识别：1.登录网址 2.注册网址 3.仪表板网址 4.添加订单网址 5.购物车网址 6 . 注销网址等

我们可能拥有的信息可以是：1\. 会话、Cookie、元数据，2\. 反向链接（内部和外部）3\. 页面中的表单、页面中的字段等

任何想法或指示都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:45:32.980

您可以通过爬取域来获取原始 HTML 结果。对你的 URL 获取问题：是的，你可以通过系统根据 URL 和 HTML 元素确定登录、注册等 URL，可以通过一些实验来设计。

从网上商店爬取礼物的图片，价格等，这是可行的。我们给出了相对点；例如对于价格，如果文本包含“价格”，则获得 2 分，如果包含“$”或“€”，则获得 3 分等。我试着说您需要对数据进行实验。据我所知，您可以获得表单、Javascript 行等，并且也可以对它们进行试验。

如果您将使用 java，我建议使用**Crawler4j 。****Apache Nutch**也很好，您可以从我的个人资料中的问题中获得有关“使用 Nutch 保存原始 html”的信息，但这是一个非常大的项目，我认为对于您的情况而言，处理所有这些东西不值得。

# c - C 预处理器和枚举——我的代码中的错误？

> ID：13906508
> 
> 赞同：2
> 
> 时间：2012-12-16T23:26:12.900
> 
> 标签：c, enums, c-preprocessor

我在全局标头中有以下代码，因此我可以在编译时做出决定：

```
enum {
    MyStyleA,
    MyStyleB,
    MyStyleC
};

#define STYLE MyStyleB 
```

在各种源文件中，我包含此标头并执行以下操作：

```
#if STYLE == MyStyleC
    doSomething();
#endif 
```

问题是，`doSomething()`即使我在标题中定义`STYLE`，也肯定会执行！`MyStyleB`

知道这里出了什么问题吗？

（我承认我不是**C**预处理器专家。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:31:17.063

我的床头柜上没有 C 标准的副本，所以我可能是错的，但是：

预处理器不知道是什么`MyStyleC`——直到它到达编译器才得到一个值。

编译器通常有一个选项（以前是 -e ？）来输出预处理器阶段的结果（作为文本） - 我会看看它，看看`#if`预处理器完成它后你的样子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T23:29:26.917

预处理器不了解代码的语义，它只进行文字宏替换，因此它只能使用常量表达式。怎么写

```
if (STYLE == MyStyleC) {
    doSomething();
} 
```

反而？

# ruby - 将 Perl 转换为 Ruby 正则表达式

> ID：13906510
> 
> 赞同：1
> 
> 时间：2012-12-16T23:26:39.343
> 
> 标签：ruby, regex, perl

节日快乐！我想要一个电子邮件验证正则表达式，并找到了这个 perl 怪物：

```
(?^:[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:(?:[^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff]+(?![^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff])|"[^\\\x80-\xff\n\015"]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015"]*)*")[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:\.[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:[^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff]+(?![^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff])|"[^\\\x80-\xff\n\015"]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015"]*)*")[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*)*@[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:[^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff]+(?![^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff])|\[(?:[^\\\x80-\xff\n\015\[\]]|\\[^\x80-\xff])*\])[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:\.[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:[^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff]+(?![^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff])|\[(?:[^\\\x80-\xff\n\015\[\]]|\\[^\x80-\xff])*\])[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*)*|(?:[^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff]+(?![^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff])|"[^\\\x80-\xff\n\015"]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015"]*)*")[^()<>@,;:".\\\[\]\x80-\xff\000-\010\012-\037]*(?:(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)|"[^\\\x80-\xff\n\015"]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015"]*)*")[^()<>@,;:".\\\[\]\x80-\xff\000-\010\012-\037]*)*<[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:@[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:[^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff]+(?![^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff])|\[(?:[^\\\x80-\xff\n\015\[\]]|\\[^\x80-\xff])*\])[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:\.[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:[^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff]+(?![^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff])|\[(?:[^\\\x80-\xff\n\015\[\]]|\\[^\x80-\xff])*\])[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*)*(?:,[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*@[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:[^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff]+(?![^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff])|\[(?:[^\\\x80-\xff\n\015\[\]]|\\[^\x80-\xff])*\])[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:\.[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:[^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff]+(?![^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff])|\[(?:[^\\\x80-\xff\n\015\[\]]|\\[^\x80-\xff])*\])[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*)*)*:[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*)?(?:[^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff]+(?![^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff])|"[^\\\x80-\xff\n\015"]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015"]*)*")[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:\.[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:[^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff]+(?![^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff])|"[^\\\x80-\xff\n\015"]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015"]*)*")[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*)*@[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:[^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff]+(?![^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff])|\[(?:[^\\\x80-\xff\n\015\[\]]|\\[^\x80-\xff])*\])[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:\.[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*(?:[^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff]+(?![^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff])|\[(?:[^\\\x80-\xff\n\015\[\]]|\\[^\x80-\xff])*\])[\040\t]*(?:\([^\\\x80-\xff\n\015()]*(?:(?:\\[^\x80-\xff]|\([^\\\x80-\xff\n\015()]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\015()]*)*\))[^\\\x80-\xff\n\015()]*)*\)[\040\t]*)*)*>)) 
```

正在寻找是否有一种快速的方法可以将其转换为 ruby​​ 风格的正则表达式：我在[互联网](http://inside.oib.com/converting-perl-regular-expressions-for-use-in-ruby/)上找到了这个，但上面的字符串没有被转义，所以它不能很好地发挥作用：

```
POSSIBLE_OPTIONS = "[misxp]"
  def rubify_regexp(l)
    re = l.gsub(/\(\?(#{POSSIBLE_OPTIONS}*)(?:-(#{POSSIBLE_OPTIONS}*))?:/) do |_|
      enabled = $1
      disabled = $2

      # Perl's `s` option is `m` in Ruby
      if enabled.include?('s') && !enabled.include?('m')
        enabled.sub!('s', 'm')
      else
        enabled.sub!('s', '')
      end

      # If Perl wanted to disable `s` then we need to disable `m`
      if disabled && disabled.include?('s')
        enabled.sub!('m', '')
      end

      "(?#{enabled}:"
    end
    Regexp.new(re)
  end 
```

:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T00:18:21.713

我的回答并没有完全解决你的问题，但它解决了你的问题。

不要使用正则表达式来验证电子邮件。在大多数情况下，这种怪物实际上可能会起作用（我不知道），但在其他一些情况下可能会失败（RFC 相当复杂）。

绝对无法测试或维护正则表达式。

每种语言都至少有几个库可以让您处理电子邮件，即根据 RFC 或其中的一个合理子集来验证它们。

使用电子邮件验证库。那个正则表达式最多是可爱的，不是为了实际使用。

请参阅：[Rails 电子邮件验证的最新技术是什么？](https://stackoverflow.com/questions/1156601/whats-the-state-of-the-art-in-email-validation-for-rails)

答案中提到的宝石可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T00:22:55.760

那个正则表达式并不是你真正会使用的东西。毫无疑问，它来自 Jeffrey Friedl 的优秀著作《Mastering Regular Expressions》，是机器生成的，不适合使用。

验证电子邮件的问题不是您只需使用正则表达式即可解决的问题。请检查关于电子邮件地址验证的数十个其他问题中的任何一个。这是最古老的问题之一，并且已经得到了很好的讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T00:38:17.267

回答正则表达式转换部分：

1.  该正则表达式实际上描述了一个扁平化（即半编译）的语法。写一个实际的语法可能会更好。
2.  该正则表达式是[here-doc 的一部分（参见第 389 - 487 行）](https://metacpan.org/source/RJBS/Email-Valid-0.190/lib/Email/Valid.pm)，并且所有换行符都将被删除。
    在删除换行符之前，这些字符甚至不会形成有效的 Perl 正则表达式。镜像链接的 Perl 代码（使用 here-doc 避免转义，然后删除换行符）应该可以解决问题；这个正则表达式非常简单，它不依赖于 Perl 特定的技巧。这也消除了解析`/m`and`/s`选项的需要。

# ruby-on-rails - 为什么DelayedJob 忽略了delayed_job_config.rb？

> ID：13906512
> 
> 赞同：1
> 
> 时间：2012-12-16T23:26:49.713
> 
> 标签：ruby-on-rails, ruby-on-rails-3, delayed-job

我有以下内容：

/config/delayed_job_config.rb

```
# Enable DelayedJob Logging
Delayed::Worker.logger = Rails.logger
Delayed::Worker.logger.auto_flushing = 1

# Do not delete failed jobs (default is true)
Delayed::Worker.destroy_failed_jobs = false

# Dont wait so long between jobs
Delayed::Worker.read_ahead = 100 # default was 5
Delayed::Worker.sleep_delay = 1 #default was 5 
```

这里的问题是没有使用设置：

```
$ rails c
Loading development environment (Rails 3.2.5)
1.9.3-p125 :001 > Delayed::Worker.read_ahead
 => 5 
1.9.3-p125 :002 > Delayed::Worker.sleep_delay
 => 5 
```

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:42:23.907

配置进入：

`config/initializers/delayed_job_config.rb`

文档在[这里](https://github.com/collectiveidea/delayed_job#gory-details)。

# java - 以编程方式取消隐藏 PPT 文件中的幻灯片

> ID：13906513
> 
> 赞同：2
> 
> 时间：2012-12-16T23:26:51.253
> 
> 标签：java, apache-poi, powerpoint, hslf

我正在编写一个将 PPT 文件中的幻灯片转换为 png 的小工具，我遇到的问题是隐藏幻灯片。如何将幻灯片更改为在 java 中可见？我目前使用 Apache POI 转换为 PNG，尽管这不适用于剪贴画，所以我很想先使用 unoconv 将其导出为 PDF，然后再对其进行微调。但是这样做并没有考虑到所有隐藏的幻灯片。那么如何以编程方式将隐藏的幻灯片更改为可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T13:32:21.730

这是一种 hack，仅使用 Libre Office 的 POI 3.9 / POI-Scratchpad 3.8 的 PPT 进行了测试。

[规范](http://msdn.microsoft.com/en-us/library/cc313106.aspx)（[MS-PPT].pdf / version 3.0 / page 201）说，Byte 18 的 Bit 3 (fHidden)指定*相应的幻灯片是否隐藏，在幻灯片放映期间不显示*

```
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.lang.reflect.Field;

import org.apache.poi.hslf.model.Slide;
import org.apache.poi.hslf.record.Record;
import org.apache.poi.hslf.record.RecordTypes;
import org.apache.poi.hslf.record.UnknownRecordPlaceholder;
import org.apache.poi.hslf.usermodel.SlideShow;

public class UnhidePpt {
    public static void main(String[] args) throws Exception {
        FileInputStream fis = new FileInputStream("hiddenslide.ppt");
        SlideShow ppt = new SlideShow(fis);
        fis.close();

        Field f = UnknownRecordPlaceholder.class.getDeclaredField("_contents");
        f.setAccessible(true);

        for (Slide slide : ppt.getSlides()) {
            for (Record record : slide.getSlideRecord().getChildRecords()) {
                if (record instanceof UnknownRecordPlaceholder
                    && record.getRecordType() == RecordTypes.SSSlideInfoAtom.typeID) {
                    UnknownRecordPlaceholder urp = (UnknownRecordPlaceholder)record;

                    byte contents[] = (byte[])f.get(urp);
                    contents[18] &= (255-4);
                    f.set(urp, contents);
                }
            }
        }

        FileOutputStream fos = new FileOutputStream("unhidden.ppt");
        ppt.write(fos);
        fos.close();
    }
} 
```

# javascript - 使用 Javascript 更改按钮文本

> ID：13906514
> 
> 赞同：2
> 
> 时间：2012-12-16T23:26:57.113
> 
> 标签：javascript, asp.net

我有以下代码：

```
<asp:Content ID="HeadContent" runat="server" ContentPlaceHolderID="HeadContent">
    <script type="text/javascript">
        function SetText(id) {
            if (Button2.value == "Disable automatic page refresh")
                Button2.value = "Automatic Refresh Disabled";
            return false;
        }
    </script>
</asp:Content>

<asp:Button ID="Button2" runat="server" Text="Disable automatic page refresh" OnClick="Button2_Click" OnClientClick="return SetText(this)" /> 
```

当我单击按钮时，按钮名称不会改变，但 C# 背后的代码仍然可以正常工作。谁能指出我正确的方向？我以为它可能是 OnClick 事件，但是删除它后，它仍然不起作用。我还尝试将 OnClick 更改为 OnServerClick 以防万一，但无济于事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T23:39:17.823

您使用的是按钮的名称，而不是对发送到该方法的按钮的引用。使用参考：

```
function SetText(id) {
  if (id.value == "Disable automatic page refresh") {
    id.value = "Automatic Refresh Disabled";
  }
  return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T17:39:13.670

```
 function SetText(id) {
        if (id.value == "text one") {
            id.value = "text two";
        }
        else
            id.value = "text one"; //return to the previous value.
        return false;
    } 
```

# php - PHP 无法修改标头信息 - 标头已由

> ID：13906520
> 
> 赞同：1
> 
> 时间：2012-12-16T23:27:38.280
> 
> 标签：php, javascript, html

> **可能重复：**
> [PHP 错误：无法修改标头信息 - 标头已发送 标头](https://stackoverflow.com/questions/1793482/php-error-cannot-modify-header-information-headers-already-sent)
> [已由 PHP 发送](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

这是我的代码：

```
<html>
<body>
    <?php

    if($country_code == 'US')
    {
        header('Location: http://www.test.com');
    }

    else 
    {
        header('Location: http://www.test.com/');
    }

    ?>

<script language="JavaScript" type="text/javascript"></script>

</body>
</html> 
```

`<?php`前后没有空格`?>`

我曾尝试将 HTML 代码和 Javascript 完全放在 PHP 之下，但这会使其无法跟踪对页面的点击。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T23:30:55.330

在您的标题之前不应输出任何内容。标头总是在内容之前发送。在调用 之前，您不能输出任何内容`header()`，并期望它能够正常工作。（一些服务器可以启用输出缓冲来解决这个问题，但它不能解决任何问题，也不是很好依赖。）

您关于跟踪页面点击的注释是无稽之谈。大多数浏览器在给定带有标题`301`的`302`状态码时不会费心渲染 HTML 。`Location:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T23:52:05.940

如果您主要担心的是 javascript 跟踪代码，那么我建议您使用 javascript 重定向：

```
<?php
// pre-html PHP code
?><!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="trackingScript.js"></script>
<script type="text/javascript">
<?php
if($country_code == 'US'){
  echo "document.location.href = 'http://www.test.com/1';";
}else{
  echo "document.location.href = 'http://www.test.com/2';";
}
?>
</script>
</head>
<body></body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T23:59:58.330

您可以将 PHP 代码放在文件的开头。

```
<?php
if($country_code == 'US')
{
    header('Location: http://www.test.com');
}
else 
{
    header('Location: http://www.test.com/');
}

?>
<html>
<body>

<script language="JavaScript" type="text/javascript"></script>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T23:41:21.160

是的，在输出开始后无法发送标头，这样的事情可以解决它

```
function redirect_to($url){
    // If the headers have been sent, then we cannot send an additional location header
    // so output a javascript redirect statement.
    if (headers_sent()){
       echo "<script>document.location.href='" . htmlspecialchars($url) . "';</script>\n";
    }else{
       header('HTTP/1.1 303 See other');
       header('Location: ' . $url);
    }
 }

 redirect_to('http://www.test.com/'); 
```

# java - 异步点击时的Android错误

> ID：13906525
> 
> 赞同：0
> 
> 时间：2012-12-16T23:28:23.633
> 
> 标签：java, android, sqlite

这是我的方法

```
private TextView monthTotal;
    private TextView yearTotal;
    private ExpenseDal expenseDal;

    private EditText amountText;
    private EditText descText;
    private EditText categoryText;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        expenseDal = new ExpenseDal(this);
        amountText = (EditText) findViewById(R.id.amountText);
        descText = (EditText) findViewById(R.id.descText);
        categoryText = (EditText) findViewById(R.id.categoryText);

        setContentView(R.layout.activity_expense_list);
        monthTotal = (TextView) findViewById(R.id.monthTotal);
        yearTotal = (TextView) findViewById(R.id.yearTotal);
        monthTotal.setText(expenseDal.getCurrentMonthTotal());
        yearTotal.setText(expenseDal.getCurrentYearTotal());

        //Event For Save Button
        Button saveButton = (Button) findViewById(R.id.saveBtn);
        saveButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                if (amountText.getText().length() != 0) {
                    AsyncTask<Object, Object, Object> saveExpenseTask = new AsyncTask<Object, Object, Object>() {
                        @Override
                        protected Object doInBackground(Object... params) {
                            saveExpense();
                            return null;
                        }
                        @Override
                        protected void onPostExecute(Object result) {
                            finish();
                        }
                    };

                    saveExpenseTask.execute((Object[]) null);
                }

                else {
                    AlertDialog.Builder alert = new AlertDialog.Builder(
                            ExpenseList.this);
                    alert.setTitle(R.string.errorTitle);
                    alert.setMessage(R.string.errorMessage);
                    alert.setPositiveButton(R.string.errorButton, null);
                    alert.show();
                }
            }
        });

    }

    private void saveExpense() { } 
```

我的踪迹在下面

```
12-17 04:53:53.003: D/AndroidRuntime(2484): Shutting down VM
12-17 04:53:53.003: W/dalvikvm(2484): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
12-17 04:53:53.003: E/AndroidRuntime(2484): FATAL EXCEPTION: main
12-17 04:53:53.003: E/AndroidRuntime(2484): java.lang.NullPointerException
12-17 04:53:53.003: E/AndroidRuntime(2484):     at com.technowizsol.easyexpensemanager.ExpenseList$1.onClick(ExpenseList.java:45)
12-17 04:53:53.003: E/AndroidRuntime(2484):     at android.view.View.performClick(View.java:4084)
12-17 04:53:53.003: E/AndroidRuntime(2484):     at android.view.View$PerformClick.run(View.java:16966)
12-17 04:53:53.003: E/AndroidRuntime(2484):     at android.os.Handler.handleCallback(Handler.java:615)
12-17 04:53:53.003: E/AndroidRuntime(2484):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-17 04:53:53.003: E/AndroidRuntime(2484):     at android.os.Looper.loop(Looper.java:137)
12-17 04:53:53.003: E/AndroidRuntime(2484):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-17 04:53:53.003: E/AndroidRuntime(2484):     at java.lang.reflect.Method.invokeNative(Native Method)
12-17 04:53:53.003: E/AndroidRuntime(2484):     at java.lang.reflect.Method.invoke(Method.java:511)
12-17 04:53:53.003: E/AndroidRuntime(2484):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-17 04:53:53.003: E/AndroidRuntime(2484):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-17 04:53:53.003: E/AndroidRuntime(2484):     at dalvik.system.NativeStart.main(Native Method) 
```

错误出现在我检查金额是否为空的行上。任何想法为什么我得到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:32:28.410

走线

```
setContentView(R.layout.activity_expense_list); 
```

移动它，使其在正下方

```
super.onCreate(savedInstanceState); 
```

您现在设置它的方式是在实际设置布局之前尝试在布局中找到一些视图。因此，`findViewById()`没有为这些视图找到任何东西（尚不存在），因此它返回**null**。

此外，您不是在检查是否`amountText`为空，而是在检查其文本长度是否为 0 - 两个不同的东西。由于`amountText`实际上没有引用任何内容，因此您将获得 NPE。

# c# - WCF 反序列化中的 XmlException：“名称不能以 '<' 开头”-在自动属性支持字段中

> ID：13906527
> 
> 赞同：12
> 
> 时间：2012-12-16T23:28:27.513
> 
> 标签：c#, wcf, serialization, .net-4.0, xmlexception

我今天开始在 WCF 反序列化中遇到错误 - 代码一直没有改变并且工作了几个月。

问题是我得到运行时`XmlException`说'名称不能以'<'字符'开头。我已经调试到 .NET 源代码，似乎错误在于反序列化来自 WCF 服务调用的返回对象。这些对象是使用自动属性定义的，似乎支持字段的名称类似于`<MyProperty>k_BackingField`，这就是 XmlException 的来源。

我在网上看到了其他一些参考资料，人们接受的解决方案是“我将代码更改为不使用自动属性”，这对我来说真的不能接受，因为我要更改 100 个对象（有 1000 个其中的属性）。此外，当我上周运行它时，同样的代码运行良好，并且似乎不会影响所有序列化的 DTO，只会影响一些。

更令人沮丧的是，它似乎有点断断续续。有时今天早上，没有抛出异常......！

问题;

1.  为什么在未更改的代码和未更改的框架源中突然出现此问题？
2.  如何在不修改所有 DTO 以使用完全实现的属性的情况下解决此问题？

* * *

**更新：**经过一天左右的正常工作后，这个问题再次出现 - 我没有理由找到它为什么会工作/不工作/再次工作，但我们到了。

我已经进一步追踪问题与我在 ServiceContracts 上使用`ServiceKnownType`属性的一些代码相关，该属性用于定义序列化的已知类型。似乎虽然报告错误的类型甚至不是我当时正在进行的服务调用的一部分，但此错误发生在作为此已知类型“发布”行为的一部分的类型上。

当我使用一些代理创建代码来应用一些服务行为时，就会出现问题；

```
IOperationBehavior innerBehavior = new PreserveReferencesOperationBehavior(
    description, this.preserveReferences, this.maxItemsInObjectGraph);
innerBehavior.ApplyClientBehavior(description, proxy); 
```

我无法调试`ApplyClientBehavior`代码，因为它是`System.ServiceModel`（或者我可以吗？）的一部分，但该方法中的某些内容试图验证我使用我的`ServiceKnownType`属性发布的所有类型，并使用 this 打破其中一些`XmlException`。我不知道为什么某些类型会失败 - 并且仅针对它们的*某些*属性。

这是针对它们报告错误的类型的示例；

```
[Serializable]
public class MyDataObject
{
    public ActivitySession(string id)
    {
        this.Id = id;
        this.IsOpen = true;
    }

    public string Id { get; set; }

    public bool IsValid { get; set; }
} 
```

异常报告了一个错误`Id`->`<Id>k_BackingField cannot start with '<'`

因此，在该类中没有任何争议，也无需考虑继承。它甚至不是服务合同的一部分，只是它以前作为序列化的已知类型发布。

现在这变得非常深奥，所以我不期待答案，而只是更新问题所在。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T02:13:24.557

我想我找到了更多信息来帮助解释这个问题，（至少就为什么错误只出现在某些类型上而言）。

收到异常报告的 DTO 是：

*   作为我的`[ServiceKnownType]`属性的一部分发布
*   标有`[Serializable]`
*   **未**标记`[DataContract]`

将`[DataContract]`属性添加到类型可解决此问题。我不知道为什么，仍然不知道为什么这个错误在它发生*时*是间歇性的，但它的影响*是一致的。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-06T14:24:44.020

我还查看了这个问题：[WCF 服务参考 - 在客户端获取“XmlException：名称不能以 '<' 字符开头，十六进制值 0x3C”](https://stackoverflow.com/questions/6962567/wcf-service-reference-getting-xmlexception-name-cannot-begin-with-the-ch)

关于这个例外：

> System.Xml.XmlException: '名称不能以 '<' 字符开头，十六进制值 0x3C。

1.  检查您是否加载了任何有效的 xml 文件（例如，不包含诸如 < 或 > 之类的错字
2.  如果您使用的是服务 + WCF，请查看您的服务接口（与 ServiceContract 的接口）。这将是一个很好的起点。现在检查接口的方法中是否有任何 DTO 参数。转到这些 DTO 并查看这些 DTO 类是否具有 [Serializable] 或 [DataContract] 或类似属性。如果这些类还包含自动属性，请将它们的属性更改为使用您自己的支持字段的符号，例如：

    私人 Foo _Bar; 公共 Foo Bar { 获取 { 返回 _Bar; } 设置 { _Bar = 值；} }

如果幸运的话，您会看到错误消失！自动属性似乎存在问题，其中自动生成的支持字段的名称类似于*<>something*、*<>d_whatever*或类似的名称。这些名称以“<”字符开头，导致该错误。

对于服务和 WCF，您的服务接口和回调（使用 datacontract）是开始替换自动属性的好地方。至少它让您知道从哪里开始，而不是替换数千个自动属性。

此外，尝试通过在应用程序的开头添加此代码来捕获 FirstChanceExceptions，并将消息写入控制台。这将有助于查看“名称不能以'<'字符开头”消息的数量是否减少。

AppDomain.CurrentDomain.FirstChanceException += (object source, System.Runtime.ExceptionServices.FirstChanceExceptionEventArgs e) => { Console.WriteLine("在 {0} 中引发的 FirstChanceException 事件：{1}", AppDomain.CurrentDomain.FriendlyName, e.Exception 。信息）; };

[https://docs.microsoft.com/en-us/dotnet/framework/app-domains/how-to-receive-first-chance-exception-notifications](https://docs.microsoft.com/en-us/dotnet/framework/app-domains/how-to-receive-first-chance-exception-notifications)

这是我到目前为止发现的。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T00:53:18.693

我现在有一个解决方法，但这不是我可以依赖的 -> 导致问题的 DTO 已从`[ServiceKnownType]`发布者中删除，这使得错误消失。

我想知道问题是否与我遇到异常的成员名称有关。到目前为止，我已经看到它抱怨；

*   `Id`
*   `Address`
*   `UserName`

我猜，期望那些特定的属性名称在序列化或服务模型的其他地方被使用是合理的，导致它们的编译方式不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-23T15:03:25.273

我今天遇到了这个问题（第一次机会例外，否则没有明显的问题）。就我而言，NetDataContractSerializer (NDCS) 正在序列化`IFieldData[]`（来自[CSLA.NET library](https://cslanet.com/)）。NDCS 可以序列化数组，也可以序列化没有`[DataContract]`应用属性的对象。在这种情况下，序列化程序会推断合同——所有公共读/写属性和类型的字段都被序列化。它记录在这里：[https ://docs.microsoft.com/en-us/dotnet/framework/wcf/feature-details/using-data-contracts](https://docs.microsoft.com/en-us/dotnet/framework/wcf/feature-details/using-data-contracts)

所以在我的例子中，数组中的一个对象有一个对`Fraction`（我自己的类）的引用，定义如下：

```
public sealed class Fraction
{
    public int Numerator { get; private set; }
    public int Denominator { get; private set; }
    public double Value { get; private set; }
} 
```

它导致 WCF 抛出“名称无法开始...”异常，这是由于自动属性使用生成的名为 like 的私有字段这一事实引起的`<Numerator>k__BackingField`。如果`[DataContract]`向类添加属性，则必须显式标记需要按`[DataMember]`属性序列化的内容。这使得异常消失。序列化程序不再接触私有字段。

在我看来，这是 WCF 中的一个错误。推断的契约应该只使用类的公共表面，没有任何命名问题。它不应该窥探私有字段（编译器生成与否）。

我的回答支持/补充了[RJ Lohan](https://stackoverflow.com/a/13944591/617543)和[juFo](https://stackoverflow.com/a/51212527/617543)之前所说的内容，我赞成他们的回答。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-25T09:54:03.630

找出哪个字段给您带来问题的最佳方法是在出现错误时检查 StackTrace：

[![在此处输入图像描述](../Images/c3158fdd3ca1d63e4ac51593e9074ce5.png)](https://i.stack.imgur.com/XFwDH.png)

就我而言，答案是将 auto 属性更改为显式声明支持字段以避免这种命名的可能性。所以

```
public string ScreenName { get; set; } 
```

变成：

```
private string _screenName;
public string ScreenName { get { return _screenName; } set { _screenName = value; } } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-02T12:17:11.747

对于遇到此问题的其他任何人：如果您在 Visual Studio 的异常设置中检查了 XmlException，即使异常将在 System.Runtime.Serialization 中处理，它也会抛出。我花了大约 20 个小时试图弄清楚为什么当我打开所有异常时我的代码突然停止工作 - 这实际上并不是一个致命的异常，它只是大约 1200 个捕获的 XmlExceptions。

# sql - 带有十进制类型的 ASP.NET 原始 SQL 转义逗号

> ID：13906528
> 
> 赞同：0
> 
> 时间：2012-12-16T23:28:54.410
> 
> 标签：sql, asp.net-mvc-3, escaping

问题在标题中，如何转义给定小数的逗号？我真的需要解决方法：获取值，将其转换为字符串，用点替换逗号吗？

有没有更简单的解决方案？或者我可以使用一个好的库或函数吗？

**编辑**：我知道我可以通过用点替换逗号来输入值。我要求用于转义 SQL 查询的内部函数或外部库，如 Java 中的 StringEscapeUtils。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:55:38.140

重新阅读您的帖子后，在我看来，确定的最佳方法是在运行 SQL 语句之前将文化更改为 en-US。这会将所有逗号更改为数字中的点。所以像

> Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("en-US");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:49:12.590

这取决于当前的文化。您的文化使用点作为分隔符。

考虑以下代码，您提供了一种使用逗号作为分隔符的区域性：

```
var dec = "123,45";

decimal parsed;
decimal.TryParse(dec, NumberStyles.Any, new CultureInfo("es-ES"), out parsed); 
```

# mysql - MySQL，如果不存在则插入行

> ID：13906530
> 
> 赞同：0
> 
> 时间：2012-12-16T23:29:02.720
> 
> 标签：mysql, transactions, insert

> **可能重复：**
> [插入行mysql时如果不存在如何使用](https://stackoverflow.com/questions/7930615/how-to-use-if-not-exists-while-inserting-a-row-mysql)

我有问题：

我有一个名为“table”的表，有 4 列：id(int, PK, AI, Unique), col1(varchar), col2(varchar), col3(datetime)

许多用户可以连接到 mysql 服务器并将行插入“表”。问题是 col2 和 col3 不能存在于“表”的其他行中。

我会这样写： IF NOT EXISTS (select * from table where col2='2' and col3='2012-12-12 12:12:12') INSERT INTO table(col1, col2, col3) values(1 ,2,'2012-12-12 12:12:12')

我假设你知道我想要做什么。

我试图在一个语句中执行此操作（以避免 2 个用户同时插入同一行的情况）或在事务中执行此操作。如果我应该在事务中这样做，那么应该是什么类型的隔离？可序列化的隔离会导致锁定表，因此它可以进一步减慢插入过程。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:59:16.927

如果您不希望 col2 和 col3 对重复（即 col 2 可以有重复，但任何 col2 和 col3 对只出现一次），您可以指定：

```
UNIQUE(col2,col3) 
```

现在尝试插入 col2,col3 对的任何查询都将失败。您可以使用以下方法处理此问题：

```
INSERT IGNORE INTO table(col1, col2, col3) values(1,2,'2012-12-12 12:12:12'); 
```

或者如果插入应该更改您可以使用的值：

```
INSERT INTO table(col1, col2, col3) values(1,2,'2012-12-12 12:12:12') 
      ON DUPLICATE KEY UPDATE someCol=someVal 
```

# javascript - Trigger.io 中长时间运行的 JS 操作的后台处理？- forge.tabs 模块？

> ID：13906532
> 
> 赞同：0
> 
> 时间：2012-12-16T23:29:18.667
> 
> 标签：javascript, trigger.io

在我的 Trigger.IO 应用程序中，我正在扫描设备电话簿中的所有联系人。这需要很长时间（+30 秒），我希望通过允许他们在扫描期间继续使用应用程序的其他功能来为我的用户提供最佳体验。理想情况下，扫描不会对用户造成任何干扰。

有没有办法在 Trigger.IO 中做到这一点？我想知道是否可以以某种方式使用 forge.tabs 模块 - 在选项卡中运行的脚本是否与主 webview 共享相同的线程？如果我关闭选项卡，我可以继续在其中运行脚本还是将其销毁？

我将不胜感激如何解决此问题的建议，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:21:15.500

这些调用不会阻止 JS 执行 - 您可以开始扫描并仍然响应用户输入：如果他们此时无法继续进行，可能会在某处显示微调器。

就您而言，我*认为*您是在谈论许多小请求，而不是长请求。如果您担心它们会影响 UI 的响应能力，您可以尝试在 setTimeout 中运行下一个 API 交互并稍稍延迟，这将让任何其他待处理的 JS 任务开始运行。

# objective-c - UIRefreshControl 拉取长度

> ID：13906537
> 
> 赞同：11
> 
> 时间：2012-12-16T23:30:21.320
> 
> 标签：objective-c, ios, uirefreshcontrol

环顾stackoverflow，但找不到这个问题的答案：有没有办法改变必须拉下多少表格视图才能使UIRefreshControl开始刷新？因为拉动 45% 的屏幕似乎有点矫枉过正。

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-16T23:51:36.240

使用 Apple 提供的组件无法更改它`UIRefreshControl`，因为它的行为是由`UITableViewController`.

如果你真的想要这种定制，你可以考虑开源组件[ODRefreshControl](https://github.com/jyhnihao/ODRefreshControl)并尝试调整它的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-07T08:58:02.853

如果你**真的**需要改变这种行为，你可以这样做：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    @try {
        [self.refreshControl setValue:@(60) forKey:@"_snappingHeight"];
    }
    @catch (NSException *exception) {
    }
} 
```

更多细节：[https ://stackoverflow.com/a/40461168/945906](https://stackoverflow.com/a/40461168/945906)

# automation - 如何确定这些语言属于哪个类？

> ID：13906540
> 
> 赞同：1
> 
> 时间：2012-12-16T23:30:36.377
> 
> 标签：automation, context-free-grammar, regular-language, turing-machines, pushdown-automaton

{WW} - 可判定但不是上下文无关
{WW^R} - 上下文无关，但不是正则
Σ* - 正则语言
你如何确定它们属于哪个类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:28:01.170

可能我的回答对你有帮助：

> **L [1]** = {ww | w ∈ {a, b} ^* }

不是上下文无关语言，因为（下推自动机）PDA 是不可能的（甚至是 Non-Deterministic-PDA ）。为什么？假设您首先推入`w`堆栈。要将第二个`w`与第一个匹配，`w`您必须以相反的顺序推送第一个`w`（或者您需要以`w`相反的顺序将第二个与堆栈内容匹配），而堆栈是不可能的（我们无法以相反的顺序读取输入）。虽然它是可判定的，因为它可以在有限步数之后 `Turing Machine`为 L [1绘制一个总是一半的。]

> **L [3]** = {ww ^R | w ∈ {a, b} ^* }

语言 L [3]是一种非确定性上下文无关语言，因为它是可能的，但有限自动对于 L [3]`n-PDA`是不可能的。您还可以使用 Pumping Lemma for Regular Languages 来证明这一点。

> `Σ*`- 常规语言（RL）

`Σ*`是正则表达式 (RE)，例如，如果`Σ = {a, b} then RE is (a + b)*` RE 仅适用于 RL。

[我的问题](https://stackoverflow.com/questions/13143186/example-of-non-linear-unambiguous-and-non-deterministic-cfl)中的示例可能对您更有帮助。

# vb.net - 更准确的秒表 (VB.NET)

> ID：13906558
> 
> 赞同：1
> 
> 时间：2012-12-16T23:33:29.163
> 
> 标签：vb.net, timer, stopwatch

有没有比秒表更准确的“睡眠”方法？或者，有没有办法让秒表类更准确？它不必在 .NET 中，它可以在 c++ 中，但无论使用哪种语言，都必须具有 1 毫秒的准确度；我不需要更多。假设我想让我的程序“休眠”300 毫秒，我希望它至少在大多数时间休眠 300 毫秒。

目前我使用：

```
Dim StopWatch As New StopWatch
StopWatch.Start
Do
Loop Until StopWatch.ELapsed.Milliseconds >= 300
StopWatch.Stop 
```

我运行 5 次的结果是：306、305、315、327、304。

如果我运行更多，它会保持这种状态。

我将我的线程和进程优先级设置为“实时”/“高”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T08:01:16.977

Stopwatch 类有一个属性`IsHighResolution`。如果它返回“真”，则表示您正在使用**高性能事件计时器**(HPET) - 可用性取决于硬件和操作系统。使用它，您可以非常准确地测量时间。但！Windows（和通常的 Linux 一样）不是实时操作系统，而是使用抢先式多任务处理。每当操作系统认为它需要时，它就会让你当前的线程`on hold`去做其他工作，一段时间后，它会`return`进入你的线程并让它继续。如果这`switch`发生在循环中的某个地方，您仍然可以测量正确的时间，但它包含一定的`inactivty`时间。

由于`time slice`Windows 下的时间介于 15 到 30 毫秒之间，因此您（r 线程）可能会在 299 毫秒后暂停，15-30 毫秒后您会回来。这就是你看到的效果。秒表是准确的。它只是测量你没想到的东西。

如何克服：你不能。如前所述：Windoes 不是实时操作系统！即使您将优先级“实时”分配给您的流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T23:41:07.403

你所看到的完全正常。延迟永远不会正好是 300 毫秒，它总是会超过 300 毫秒。睡眠本身是准确的，但实际延迟取决于您的操作系统以及与您并行运行的其他进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-26T22:44:02.443

如果您想要更准确的计时器，则需要使用当前日期和时间作为参考。这是一个简单的等式，您可以每毫秒运行一次：

`currentTime - startTime = elapsedTime`

...其中`currentTime`是`System.DateTime.Now`,`startTime`是计时器启动的时间，并且`elapsedTime`是`System.DateTime.TimeSpan`.

有关如何执行此操作的更多详细信息，请查看我在 VB.Net 中制作的程序的源代码，E-Tech Timer：[http ://etechtimer.codeplex.com](http://etechtimer.codeplex.com)

# javascript - 将变量放在动态选项字段中

> ID：13906561
> 
> 赞同：0
> 
> 时间：2012-12-16T23:34:21.430
> 
> 标签：javascript, jquery, html

我想放置

```
var temp = results[i].get("place"); 
```

进入

```
$("<option>****HERE***</option>").appendTo($department); 
```

我已经尝试替换引号/等，但我无法让它工作。我感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:37:07.820

你试过串联吗？

```
$("<option>" + temp + "</option>") 
```

您还可以使用 jQuery 自己的方法来添加文本：

```
$("<option>").text(temp); 
```

# php - Show 我可以将这些中的每一个都拉出一个数组吗？

> ID：13906563
> 
> 赞同：0
> 
> 时间：2012-12-16T23:34:36.570
> 
> 标签：php, arrays, pdo

我无法从这个多维数组中拉出元素？

下面是我的代码：

```
$ShowTables = $Con->prepare("SHOW TABLES");
$ShowTables->execute();
$ShowTResults = $ShowTables->fetchAll(); 
```

如果我`print_r($ShowTResults);`得到这个多维数组：

```
Array (
    [0] => Array ( [Tables_in_alltables] => userinformation [0] => userinformation )
    [1] => Array ( [Tables_in_alltables] => users           [0] => users ) 
) 
```

Foreach 新表被加载，它添加了数组的另一个维度。我想将每个表名从多维数组中提取到一个新数组中，我可以将其用于未来的计划。

有人有什么想法吗？

我试过 1 个`foreach`循环；但这不公平。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:39:38.497

我尝试过的解决方案：也许不会像其他人那样做，这是完全尊重的。但这是我的：

```
$DatabaseTables = array();
foreach($ShowTResults AS $ShowTResult)
{
   foreach ($ShowTResult AS $ShowT)
 {
   $DatabaseTables[] = $ShowT;
 }
}
$DatabaseTables = array_unique($DatabaseTables); //Deletes Duplicates in Array
unset($ShowTResult);
unset($ShowT); // Free up these variables
print_r($DatabaseTables); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:41:08.037

您想以数组的形式获取第一列的所有结果：

```
$ShowTResults = $Con->query("SHOW TABLES")->fetchAll(PDO::FETCH_COLUMN, 0);
print_r($ShowTResults); 
```

这给了你：

```
Array (
    [0] => userinformation
    [1] => users
) 
```

我认为这是您正在寻找的。

另一个变体（有点复杂，但适合类似但略有不同的情况）是将结果作为函数 ( `PDO::FETCH_FUNC`) 获取并直接映射结果：

```
$ShowTResults = $ShowTables->fetchAll(PDO::FETCH_FUNC, function($table) {
    return $table;
}); 
```

# java - 如何创建我的代码摘要

> ID：13906565
> 
> 赞同：0
> 
> 时间：2012-12-16T23:34:54.537
> 
> 标签：java

我想自动创建某种我的代码（java）的报告。示例：我有类似的东西：

```
public classe qwerty{
//CODE
/*
* Converts ...
* @param s
*        -string...
*/
public static int mult(string s)
   {
   //CODE
   } 
} 
```

我想创建一个看起来像这样的东西：

```
...............................
public static int mult(string s)
Converts ...

Paramters:
   s (String): string...
Returns (int)
.................................
ETC 
```

有什么工具吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:39:06.660

也许您正在搜索[javadoc](http://en.wikipedia.org/wiki/Javadoc)

Javadoc 将代码的 html 文件创建为文档。看看一些[教程](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T00:20:51.980

如果你看过 javadoc，但它不适合你，那么看看这个解决方案

[如何通过反射读取 Javadoc 注释？](https://stackoverflow.com/questions/8504013/how-to-read-javadoc-comments-by-reflection)

看答案“doclet”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-01T15:07:10.730

如果您使用的是**IntelliJ**，那么在您想要评论的方法之前，您必须输入**/** ** 并按 Enter。它会根据您的功能自动创建带参数或不带参数的注释。

# excel - 从 IF 语句求平均值时 Excel 平均值不起作用

> ID：13906567
> 
> 赞同：-1
> 
> 时间：2012-12-16T23:34:59.783
> 
> 标签：excel, excel-2010

我有一列 =IF(E2="W ",H2,IF(I2<>"",I2,"")) 。它显示值，但是当我取列的平均值时，它会出现除以零的错误。我需要为此使用特殊类型的平均函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:48:34.433

我假设 H2 和/或 I2 是数字？也许这些数字是文本格式的（在这种情况下，平均，找不到任何真实数字将返回 #DIV/0! 错误）。尝试像这样转换：

`=IF(E2="W ",H2+0,IF(I2<>"",I2+0,""))`

+0 会将文本格式的数字转换为实际数字，然后您的 AVERAGE 函数应该可以工作

# php - 数据库中的自动过期信息

> ID：13906568
> 
> 赞同：2
> 
> 时间：2012-12-16T23:35:18.480
> 
> 标签：php, datetime, mysqli

我有一个临时 mysql 表，它保存信息，直到在 ecomm 网站上结帐。我希望能够在 72 小时后删除过期的表数据，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T23:38:00.107

`datetime`在创建时存储 a 。定期（*例如通过作业流程*）运行查询以删除所有`datetime`少于`now - 3 days`之前的记录。

```
DELETE FROM `Table`
WHERE `CreatedOn` < DATE_SUB(NOW(), INTERVAL 3 DAY); 
```

我认为值得一提的是，除非存储量是一个问题，否则保留这些数据可能对营销分析很有价值。

# reporting-services - 页码中罗马数字的表达

> ID：13906569
> 
> 赞同：0
> 
> 时间：2012-12-16T23:35:38.777
> 
> 标签：reporting-services

> **可能重复：**
> [页脚中的 SSRS 页码](https://stackoverflow.com/questions/13899447/ssrs-page-numbers-in-page-footer)

这是我的表达方式。

```
=Iif(Globals!PageNumber = "1", "i " ,nothing 
     & Iif(Globals!PageNumber = "2", "ii " ,nothing 
     & Iif(Globals!PageNumber = "3", "iii " ,nothing 
     & Iif(Globals!PageNumber = "4", "iv " ,nothing 
     & Iif(Globals!PageNumber = "5", "v " ,nothing 
     & Iif(Globals!PageNumber = "6", "vi " ,nothing 
     & Iif(Globals!PageNumber = "7", "vii " ,nothing 
     & Iif(Globals!PageNumber = "8", "ix " ,nothing 
     & Iif(Globals!PageNumber = "9", "ix " ,nothing 
     & Iif(Globals!PageNumber = "10", "x " ,Globals!PageNumber 
     OrElse Iif(Globals!PageNumber >=11, Globals!PageNumber,Globals!PageNumber))))))))))) 
```

*但是*，在第 10 页之后，我想将所有页面显示为正常的全局页码，即 1、2、3、4、5、6、7、8、9、10。这可能吗？上面的表达式似乎是循环的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:42:10.973

我认为[switch 语句](http://msdn.microsoft.com/en-US/library/aa337127%28v=SQL.90%29.aspx)应该使这更容易：

```
switch(Globals!PageNumber = 1, "i",
       Globals!PageNumber = 2, "ii",
       ...
       Globals!PageNumber > 10, Globals!PageNumber) 
```

# c++ - 如何使用 typeid 来存储 type_info 对象

> ID：13906570
> 
> 赞同：3
> 
> 时间：2012-12-16T23:35:37.967
> 
> 标签：c++

我正在尝试创建和存储 type_info 对象：

```
#include <typeinfo>
int i;
type_info x = typeid(i); 
```

并生成错误消息。有没有办法存储 type_info 对象？

这背后的历史是我试图为各种 C++ 整数类型生成测试用例；对它们进行算术运算并确定中间结果是提升为下一个最大的整数类型还是被截断。那是：

```
unsigned char x = 257;
unsigned char y = 257;
// is (x + y) == 514 or 256? 
```

并决定对静态数据结构进行类型检查，例如：

```
int x = <value>;
int y = <value>;
static type_info def = { typeid(bool)
                       , typeid(char),  typeid(unsigned char)
                       , typeid(short), typeid(unsigned short)
                       , typeid(long),  typeid(unsigned long)
                       };
type_info obj = typeid(x + y);
for(int i = 0; i < sizeof(def)/sizeof(def[0]); i++) if (obj == def[i]); break; 
```

无论如何，如果不能存储 type_info 结构就无法完成，我仍然想了解有关整数促销的信息。

你能创建一个 type_info 对象吗？gcc 4.5.3 实现的赋值是私有的。

是否有资源告诉何时执行整数促销？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T01:12:34.270

`typeid()`返回 a`const type_info &`并`type_info`具有私有复制构造函数，因此您无法构建您描述的数组。我找不到任何东西可以说他们是否坚持，但你可以试试`type_info *a[] = { &typeid(int), ... }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T00:51:48.157

在 C++11 中，（gcc 4.5.1 有效）这种事情可能有效：

```
#include <type_traits>

template<typename... Types>
struct Seq {};

template<typename T, typename Seq, typename=void>
struct IndexOf;

template<typename T, typename First, typename... Types>
struct IndexOf<T, Seq<First, Types...>, typename std::enable_if< std::is_same<T, First>::value >::type > {
  enum { value = 0 };
};
template<typename T, typename First, typename... Types>
struct IndexOf<T, Seq<First, Types...>, typename std::enable_if< !std::is_same<T, First>::value >::type > {
  enum { value = 1+IndexOf<T,Seq<Types...>>::value };
};

typedef Seq< bool, char, unsigned char, short, unsigned short, int, unsigned int, long, unsigned long > IntegerTypes;

#include <iostream>

int main() {
  int x = 7;
  int y = 10;
  std::cout << IndexOf< decltype(x+y), IntegerTypes >::value << "\n";
  // this next line will not compile, because void is not in the IntegerTypes sequence:
  // std::cout << IndexOf< void, IntegerTypes >::value << "\n";
} 
```

但你会注意到它不依赖于 x 或 y 的值，只依赖于它们的类型。

请注意，所有逻辑都是在编译时完成的，而不是在运行时完成的。而且，如果您传递了不在列表中的类型，则会收到大量错误消息（其正确解释是“未找到”）。我本可以缩短错误消息，但我很懒。:)

# javascript - 从用户输入显示来自 twitter API 的推文

> ID：13906574
> 
> 赞同：4
> 
> 时间：2012-12-16T23:36:07.920
> 
> 标签：javascript, html, api

我是 javascript/jquery 的初学者，对 API 完全陌生，我想知道是否有人可以帮助我

我想要实现的是让用户在文本框中输入关键字/短语，他们单击搜索，页面返回在推文中包含该词的人员列表。

到目前为止，我已经能够显示硬编码关键字（我从网站获得）的结果，但是当我试图改变它时，我什么也没得到。

这是使用硬代码的工作

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $.getJSON('http://search.twitter.com/search.json?q=earthquake&lang=en&callback=?', function (data) {
            var data = data.results;
            var html = "<ul>";
            for (var i = 0; i < data.length; i++) {
                html += "<li><a href='http://twitter.com/" + data[i].from_user + "'>@"
                          + data[i].from_user + "</a>: " + data[i].text + "</li>";
            }
            html += "</ul>"
            $('.content').html(html);
        });
    });
</script>

<h2>Twitter</h2>
<div class="content">
</div> 
```

这是我现在正在处理的代码

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>

    <script>

        var button= document.getElementById('searchTwitter');
        button.onclick= function(){
            var text = document.getElementById('search').value;
        }
        var baseUrl = "http://search.twitter.com/search";

        var query = document.getElementById('<%=searchTwitter.ClientID%>').value;

        $(document).ready(function () {

            $.ajax({

                url: baseUrl + '&text' + '&lang=en&callback=?',

                dataType: "jsonp",

                success: showResults
            });
        });
            function showResults(data) {

                var data = data.results;
                var html = "<ul>";
                for (var i = 0; i < data.length; i++) {
                    html += "<li><a href='http://twitter.com/" + data[i].from_user + "'>@"
                              + data[i].from_user + "</a>: " + data[i].text + "</li>";
                }
                html += "</ul>"
                $('.content').html(html);

        }

    </script>

    <asp:TextBox ID="search" runat="server"></asp:TextBox>
    <asp:Button ID="searchTwitter" runat="server" Text="Button" /> 
```

任何帮助将不胜感激，因为我几天来一直试图找到一种方法来做到这一点。

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:45:04.570

这是您所描述的工作示例：http: [//jsfiddle.net/ZEjey/](http://jsfiddle.net/ZEjey/)。您应该能够使其适应您的 ASP 代码。

相关代码如下。

**jQuery**

```
$("#SearchButton").click(function() {
    $.getJSON('http://search.twitter.com/search.json?q=' + $('#TextSearch').val() + '&lang=en&callback=?', function (data) {
            var data = data.results;
            var html = "<ul>";
            for (var i = 0; i < data.length; i++) {
                html += "<li><a href='http://twitter.com/" + data[i].from_user + "'>@"
                          + data[i].from_user + "</a>: " + data[i].text + "</li>";
            }
            html += "</ul>"
            $('.content').html(html);
        });
}); 
```

**HTML**

```
<h2>Twitter</h2>
Search for: <input id="TextSearch" type="text" /> <input type="button" id="SearchButton" value="Go" />
<div class="content"></div>​ 
```

​---

**编辑 0**

好的，下面的代码有效。自动导致回发，`<asp:Button`因此您看不到任何内容被加载。您要么需要使用，要么像我在下面所做的那样使用`<input type="button" ...`来阻止正常事件的发生。`event.preventDefault();`

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <h2>Twitter</h2>
    <asp:TextBox id="TextSearch" runat ="server"/> 
    <asp:Button id="SearchButton" runat="server"  Text="Search"/>
    <div class="content"></div>​
    </div>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" ></script>
    <script>
        $(document).ready(function () {
            $("#SearchButton").click(function () {

                event.preventDefault(); // ADD THIS LINE TO YOUR CODE

                $('.content').html("<em>loading...<em>");
                $.getJSON('http://search.twitter.com/search.json?q=' + $('#TextSearch').val() + '&lang=en&callback=?', function (data) {
                    var data = data.results;
                    var html = "<ul>";
                    for (var i = 0; i < data.length; i++) {
                        html += "<li><a href='http://twitter.com/" + data[i].from_user + "'>@" + data[i].from_user + "</a>: " + data[i].text + "</li>";
                    }
                    html += "</ul>";
                    $('.content').html(html);
                })
                .success(function() { alert("second success"); })
                .error(function() { alert("error"); })
                .complete(function() { alert("complete"); });
            });
        });
    </script>
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T00:55:54.997

看起来您是在准备好文档时发出 ajax 请求，而不是在单击按钮时发出请求。我也看不到您将文本框中的值添加到查询的位置。以下是更改代码的方法：

```
//this code will run when the page loads and set up the button so the 
//onclick event executes your function
$(document).ready(function () {
    var button = document.getElementById('<%=searchTwitter.ClientID%>');
    //you need to make the ajax request in this function, because this 
    //is fired when the search button is clicked 
    button.onclick = function() {
        var text = document.getElementById('search').value;
        var baseUrl = "http://search.twitter.com/search.json";
        var query = document.getElementById('<%=search.ClientID%>').value;
        $.ajax({
            //you're building the request url here, with the text from the 
            //box as the q parameter
            url: baseUrl + '?q=' + query + '&lang=en&callback=?',
            dataType: "jsonp",
            success: showResults
        });
    };
});

//this function can be defined outside ready()
function showResults(data) {
    var data = data.results;
    var html = "<ul>";
    for (var i = 0; i < data.length; i++) {
        html += "<li><a href='http://twitter.com/" + data[i].from_user + "'>@"
            + data[i].from_user + "</a>: " + data[i].text + "</li>";
    }
    html += "</ul>";
    //I'm assuming you have a div with a content class on your page
    $('.content').html(html);
} 
```

您可能还想试用 Chrome 开发人员工具（或 Firefox 中的 Firebug）。您可以设置断点并查看每一步发生的情况。您还可以查看已发送的请求和返回的数据。这将帮助您更好地处理正在发生的事情。

# c++ - 通过现有设备驱动程序访问设备

> ID：13906576
> 
> 赞同：2
> 
> 时间：2012-12-16T23:36:17.123
> 
> 标签：c++, c, windows, winapi, device-driver

我正在寻找一个应用程序，允许我用遥控器控制音乐等。我的红外接收器内置在运行 Windows 的 MacBook Pro 中。

我想知道的是我该怎么做？我可以在网上找到的大多数信息都特定于编写 Windows 设备驱动程序，而我在找出如何使用设备已经存在的驱动程序时遇到了麻烦。

我绝对有必要编写自己的驱动程序还是有办法使用Apple提供的驱动程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T22:54:39.643

在 Windows 上，您首先使用[CreateFile打开驱动程序，然后使用](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858.aspx "创建文件")[DeviceIoControl](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363216.aspx "设备IoControl")向它发送命令来与驱动程序通信。您需要驱动程序 API 的文档，以了解通过哪些控制代码可以使用哪些功能以及它们期望哪些参数。挖掘这些信息可能是最困难的部分。

# functional-programming - 方案——做迭代——返回值

> ID：13906577
> 
> 赞同：1
> 
> 时间：2012-12-16T23:36:19.170
> 
> 标签：functional-programming, scheme, iteration

我试图编写一个函数，它获取一个整数，由字符串表示，并检查他的所有字符是否都是数字并相应地返回`#t`\ `#f`。那是代码 -

```
(define (splitString str) (list->vector (string->list str)))

(define myVector 0)
(define flag #t)

(define (checkIfStringLegal str) (
(set! myVector (splitString str))
(do (  (i 0 (+ i 1))  )  ; init
  ((= i (vector-length myVector)) flag) ; stop condition
  (cond ((>= 48 (char->integer (vector-ref myVector i)) ) (set! flag #f))
        ((<= 57 (char->integer (vector-ref myVector i)) )(set! flag #f))

  )    
)
) 
) 
```

几个解释——

`(list->vector (string->list str))`- 将字符列表转换为字符串。

`(vector-ref myVector i)``myVector`- 来自at 位置的字符`i`。

它运行正常，但是当我尝试使用这个函数时，就像`(checkIfStringLegal "444")`我得到 -

```
application: not a procedure;
 expected a procedure that can be applied to arguments
  given: #<void>
  arguments...:
   #t 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:39:43.533

尝试这个：

```
(define (checkIfStringLegal str)
  (andmap char-numeric?
          (string->list str))) 
```

这是该程序的工作方式：

1.  它将字符串转换为字符列表，使用`string->list`
2.  它验证列表中的每个字符以查看它是否是数字，并将谓词`char-numeric?`应用于每个字符
3.  如果返回所有验证`#t`，`andmap`将返回`#t`。如果单个验证失败，`andmap`将`#f`立即返回

这是一个函数式编程解决方案（毕竟，这个问题是这样标记的），请注意，您的预期方法看起来更像是类 C 编程语言中的解决方案 - 使用向量、显式循环构造 ( `do`)、变异操作 ( `set!`) ，全局可变定义......这很好，经过一些调整后它最终可能会工作，但这不是在 Scheme 中做事的惯用方式，它甚至不是一个远程函数式编程解决方案。

**编辑：**

哎呀，我放弃了。如果您想以自己的方式编写解决方案，这将起作用 - 您遇到了括号问题，请注意在 Scheme 中缩进和关闭括号的正确方法，这将使您的代码对您和其他人更具可读性：

```
(define (splitString str) (list->vector (string->list str)))
(define myVector 0)
(define flag #t)

(define (checkIfStringLegal str)
  (set! myVector (splitString str))
  (do ((i 0 (+ i 1)))
    ((= i (vector-length myVector)) flag)
    (cond ((>= 48 (char->integer (vector-ref myVector i)))
           (set! flag #f))
          ((<= 57 (char->integer (vector-ref myVector i)))
           (set! flag #f))))) 
```

即便如此，代码还可以进一步改进，我将把它作为练习留给读者：

*   这两个条件都可以折叠成一个条件，使用`or`
*   *退出条件应该是：到达向量末尾或*标志为假时结束循环

# objective-c - 为什么我的 NSDate 模拟导致对 [NSProxy methodSignatureForSelector:] 的调用失败？

> ID：13906578
> 
> 赞同：0
> 
> 时间：2012-12-16T23:36:22.380
> 
> 标签：objective-c, mocking

我正在尝试建立一种模式，通过创建类的“假”版本来模拟我不拥有的对象的类方法，然后调动原始版本以调用“假”版本的类方法并拥有假类在本身被模拟的共享对象上调用实例方法。

例如：

```
@interface FakeNSURLConnection : NSURLConnection
+ (void)enableMock:(id)mock;
+ (void)disableMock;
- (NSURLConnection *)connectionWithRequest:(NSURLRequest *)request delegate:(id<NSURLConnectionDelegate>)delegate;
- (BOOL)canHandleRequest:(NSURLRequest *)request;
@end
@implementation FakeNSURLConnection
...
+ (NSURLConnection *)connectionWithRequest:(NSURLRequest *)request delegate:(id<NSURLConnectionDelegate>)delegate {
     return [FakeNSURLConnection.sharedInstance connectionWithRequest:request delegate:delegate];
}
- (NSURLConnection *)connectionWithRequest:(NSURLRequest *)request delegate:(id<NSURLConnectionDelegate>)delegate { return nil; }

+ (BOOL)canHandleRequest:(NSURLRequest *)request { return [FakeNSURLConnection.sharedInstance canHandleRequest:request]; }
- (BOOL)canHandleRequest:(NSURLRequest *)request { return NO; }
@end 
```

发生的情况是我的启用模拟交换了 NSURLConnection 和 FakeNSURLConnection 的类方法，并使“sharedInstance”成为 FakeNSURLConnection 的模拟。这样，当我的模拟启用时，类似的调用`[NSURLConnection canHandleRequest:request]`将被定向到我的模拟方法。

这对 NSDate 来说有点棘手，我认为因为它是一个“抽象”类，可以进行免费桥接，但我不确定。如果我想部分地模拟一个对象，我想我可以通过让我的 Fake 类返回真实值来从这个模型中获得最大的好处。所以我们有这样的事情：

```
@interface FakeNSDate : NSDate
...
- (id)date;
- (id)dateWithTimeInterval:(NSTimeInterval)seconds sinceDate:(NSDate *)date;
- (id)dateWithTimeIntervalSince1970:(NSTimeInterval)seconds;
- (id)dateWithTimeIntervalSinceNow:(NSTimeInterval)seconds;
- (id)dateWithTimeIntervalSinceReferenceDate:(NSTimeInterval)seconds;
- (id)distantFuture;
- (id)distantPast;
- (NSTimeInterval)timeIntervalSinceReferenceDate;
@end
@implementation FakeNSDate
...
+ (id)date { return [FakeNSDate.sharedInstance date]; }
- (id)date { return [[NSDate alloc] init]; }
...
@end 
```

并不是说我没有调配 alloc，实际上我只是调配了 NSDate 的 API 中列出的公开可用的类方法。

我正在使用这段代码：

```
_baseDate = [NSDate dateWithTimeIntervalSinceNow:-1.0 * 90.0 * 60.0];
_nsDateMock = [OCMockObject partialMockForObject:[FakeNSDate sharedInstance]];
NSLog(@"_nsDateMock %@", [_nsDateMock class]);
[FakeNSDate enableMock:_nsDateMock];
[[[_nsDateMock stub] andReturn:_baseDate] date];
NSLog(@"DATE: %@", [NSDate date]); 
```

此代码正确执行（日期报告为 1.5 小时前），但我收到一个错误消息：`[NSProxy methodSignatureForSelector:] called!`

问题是我正在做的事情还是 partialMockForObject 做的事情？我使用的这种模式似乎很有帮助——我不想认为这是一个死胡同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:18:49.207

我做了两件事来解决我的问题：

```
_nsDateMock = [OCMockObject partialMockForObject:[FakeNSDate sharedInstance]]; 
```

我一定没有正确地取消设置，我认为，重新部分模拟和已经部分模拟的对象。我将其更改为仅分配一个新对象：

```
_nsDateMock = [OCMockObject partialMockForObject:[[FakeNSDate alloc] init]]; 
```

我也改用[github 上的最新代码](https://github.com/erikdoe/ocmock)。

# wordpress - 本地主机上的 wordpress 链接到实时站点

> ID：13906585
> 
> 赞同：2
> 
> 时间：2012-12-16T23:37:41.323
> 
> 标签：wordpress

几个月前，我为朋友建立了一个使用 Wordpress 的网站，我在 localhost 上开发它并将其导出到他的实时网站 paulscreen.com

我最近被要求为其他人做同样的事情，我以同样的方式开始，我的问题是在某个时候我访问了 paulscreen.com（我不知道如何或何时）并且这样做我已经设置了他的网站到 viciousnature.co.uk，我假设通过更改管理区域选项面板中的主页 url。

现在，当我尝试访问第一个站点的管理区域时，我被重定向到第二个站点。我一直在浏览 wordpress 代码，但编码知识有限，无法找到解决问题的方法。

在不使用管理区域的情况下，我在哪里可以找到编辑主页 url 的选项？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T23:49:54.487

请参阅[更改站点 URL « WordPress Codex](http://codex.wordpress.org/Changing_The_Site_URL)了解不同的恢复方法。您不一定必须能够进入 WordPress 管理后端。

最简单的快速修复是`define`在 wp-config.php 中添加这些 URL 指令：

```
define('WP_HOME','http://example.com');
define('WP_SITEURL','http://example.com'); 
```

使用新域的 URL，这些将覆盖数据库和旧域中的 URL 设置。您正在对 URL 进行硬编码，并且在使用此方法后，您将无法再在“常规设置”页面上对其进行编辑，但这将使您回到该站点。

如果您在将站点和数据库移动到新域时需要更改域，则需要使用 phpmyadmin 中的查询来更改数据库中的所有 URL，即那些站点 URL，以及主题选项中、帖子内容等中的 URL。

```
UPDATE wp_options SET option_value = replace(option_value, 'http://www.olddomain.com/', 'http://www.newdomain.com/') WHERE option_name = 'home' OR option_name = 'siteurl';

UPDATE wp_posts SET guid = replace(guid, 'http://www.olddomain.com/','http://www.newdomain.com/');

UPDATE wp_posts SET post_content = replace(post_content, 'http://www.olddomain.com/', 'http://www.newdomain.com/');

UPDATE wp_postmeta SET meta_value = replace(meta_value, 'http://www.olddomain.com/', 'http://www.newdomain.com/'); 
```

**2017 年 2 月 20 日重要更新：**

将站点和数据库移动到新的 URL 或域时，现在最好使用它[——interconnectit.com WordPress 序列化 PHP 搜索替换工具](https://interconnectit.com/products/search-and-replace-for-wordpress-databases/)——而不是直接在我上面发布的 PHPMyAdmin 中查询。Interconnectit 工具将正确处理数据库中的序列化数据，例如 Wordpress 主题和插件使用的数据；在 PHPMyAdmin 中使用这些查询会破坏此类数据，例如用于主题选项、小部件设置等的数据，之后您将不得不重置所有这些选项，这可能会造成混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:52:07.813

哎呀。直接通过 phpmyadmin 对数据库进行更改。登录到服务器面板并查看数据库表`wp_options`（假设您从未更改过默认前缀，如果您更改了，它将是 yourprefix_options）。

这是`siteurl`选项，如果您浏览表格，它就在顶部。如果由于某种原因您不再具有面板访问权限，并且只有 FTP，那么您可以上传[adminer.php](http://www.adminer.org/)并使用它来更改浏览器中的 siteurl 选项。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-09-27T22:15:28.953

我更喜欢使用 wordpress 规则:)

因为你永远不知道 wordpress 在幕后做了什么，所以我不会破解 wordpress 数据库。

只需更新您的虚拟主机并将实时域指向您的本地 IP 地址。之后，wordpress 仍会将您重定向到实时 url，但这次您会看到本地项目。

登录到管理面板。转到设置并使用您的本地 URL更改**WordPress 地址 (URL)**和**站点地址 (URL) 。**保存更改。编辑 vhosts 文件并删除活动域。

现在您可以访问放置本地 url 的本地项目。

**注意：**当您要将本地数据库导入实时服务器时，请不要忘记反之亦然。

# javascript - 从 html 表单到 javascript

> ID：13906588
> 
> 赞同：0
> 
> 时间：2012-12-16T23:38:12.987
> 
> 标签：javascript, html, forms

我有一个需要三个输入的表单，如下所示：

```
 <form>
    <input name="mn" 
           type="number"
           min="1"
           value="1">
    <input name="mx" 
           type="number"
           min="2"
           value="10">
    <input name="step" 
           type="number"
           min="1"
           value="1">
    <input onclick="myfunc()"
           type="submit"
           value="calculate">
  </form> 
```

我所需要的只是能够直接在 javascript 中访问这三个字段。我不需要将信息传递到其他任何地方。

谁能指出我正确的方向？我已经阅读了只有一个输入但没有多个输入的示例。

```
 <script type="text/javascript">
    function myfunc() {
    var mn = document.getElementsByName("mn")
    var mx = document.getElementsByName("mx")
    var step = document.getElementsByName("step")
    alert((mn + mx) / step)
    }
  </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:51:46.313

给你的表格一个像这样的ID

```
<form id="myForm"> 
```

需要注意的另一件事是该`value`属性是一个字符串，因此添加两个值会将它们连接起来而不是相加。

试试吧

```
var frm = document.forms["myForm"];

var _mn = parseInt( frm["mn"].value );
var _mx = parseInt( frm["mx"].value );
var _step = parseInt( frm["step"].value );

var result = ( _mn + _mx ) / _step; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:45:17.810

我会先给每个输入一个 id 然后我可以使用：

```
var min = document.getElementById('mn') 
```

等等。要访问您只需调用的值

```
min.value 
```

同样，从 min 中删除 i 和从 max 中删除 a 也是没有意义的。这不是优化的，只是难以阅读和理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T23:45:21.700

如果您需要访问输入的值，请将您的代码更改为：

```
function myfunc() {
  var mn = document.getElementsByName("mn")[0];
  var mx = document.getElementsByName("mx")[0];
  var step = document.getElementsByName("step")[0];
  // you may need to validate your values here, like step.value != 0
  alert((mn.value + mx.value) / step.value)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T23:47:28.913

尝试这个：

```
 <script type="text/javascript">
    function myfunc() {
    var mn = document.getElementsByName("mn")[0].value;
    var mx = document.getElementsByName("mx")[0].value;
    var step = document.getElementsByName("step")[0].value;
    var top = mn / mx;
    alert(top / step);
    }
  </script> 
```

# cakephp - CakePHP 用 $this 引用这个控制器

> ID：13906589
> 
> 赞同：0
> 
> 时间：2012-12-16T23:38:18.273
> 
> 标签：cakephp

使用 CakePHP 如何在不指定名称的情况下获得对该控制器的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:29:38.173

为什么要按名称引用控制器？Cake 只加载了一个控制器，你不应该在一个请求中加载其他控制器。1 个请求 == 1 个控制器。

如果要引用没有名称的模型，则默认模型名称在`$this->modelClass`

$this->{$this->modelClass}->method();

接受的答案（如果它是您想要的**模型）是****错误**的。

```
class UsersController extends AppController {
    public $uses = array('People');

    public function method() {
        $this->{$this->modelClass}->method(); // works

        $controller = Inflector::singularize($this->name);
        $this->$controller->someMethod(); // fatal error
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T23:50:15.173

我想我需要引用这个控制器来创建以下公共函数。但是 dogmatic69 方式要好得多。

```
// Controller/AppController.php

public function dumpData() {
    if(!Configure::read('debug') > 2)
        throw new Exception(".dumpData() can only be accessed in debug mode.");

    // $controller = Inflector::singularize($this->name);
    // $data = $this->$controller->find('first');
    $this->{$this->modelClass}->find('first');
    die(debug($data));
} 
```

# html - div 外边框

> ID：13906591
> 
> 赞同：1
> 
> 时间：2012-12-16T23:38:43.407
> 
> 标签：html, css

我正在尝试创建一个扩展页面整个长度的 div 标头，但我一直在所有 div 上获得一个小的白色外边框，以便整个页面在外部周围有一个薄的白色边框。我想让 div 延伸到最边缘。

我尝试了一些不同的 css 选项，但似乎都没有奏效。EG（不是一次全部）

```
div
{
padding:0;
margin:0;
border:0;
margin: 0px auto 0px auto;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T23:43:19.367

这听起来像是主体上的默认边距/填充。一些浏览器使用边距，一些（Opera）使用填充，所以设置两者：

```
body { margin: 0; padding: 0; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T00:11:34.840

通常，您应该使用某种形式的 css 重置或规范化。我会看看[这个](https://github.com/necolas/normalize.css/)，因为它是由 css 的天才大师 Paul Irish 重置的。

# java - 具有泛型类的构造函数未定义

> ID：13906592
> 
> 赞同：3
> 
> 时间：2012-12-16T23:38:58.883
> 
> 标签：java, generics, reflection, type-erasure

我被一个我不明白的愚蠢问题困住了。

```
class Foo<T extends Collection<E>, E> {
  private Class<T> collectionClass;
  private Class<E> elementClass;

  public Foo(Class<T> collectionClass, Class<E> elementClass) {
       this.collectionClass = collectionClass;
       this.elementClass = elementClass;
  }
} 
```

当我尝试运行它时

```
Foo<Collection<String>, String> foo = 
    new Foo<Collection<String>, String>(
        Collection.class,
        String.class); 
```

我收到编译器错误

```
java.lang.Error: Unresolved compilation problem: 
The constructor Foo<Collection<String>,String>(Class<Collection>, Class<String>) is undefined 
```

为什么 ？如果我删除泛型，没关系

```
Foo foo = 
    new Foo(
        Collection.class,
        String.class); 
```

如果有人有一个想法，那就太好了，阻止我把头撞到墙上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T23:59:16.220

没有`Collection<String>.class`, 是问题所在。您的选择包括

*   不要使用反射；你为什么要使用反射？
*   接受不安全演员表的需要
*   使用各种工具之一在运行时引用泛型类型，例如 Guava 的[`TypeToken`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/reflect/TypeToken.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T02:05:27.640

您对此无能为力。只是围绕它

```
new Foo<Collection<String>, String>(
    (Class<Collection<String>>)(Class<?>)Collection.class,
    String.class); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T00:06:35.953

没有运气，因为类型擦除，看到[这个问题](https://stackoverflow.com/questions/12050626/java-generics-pass-class-reference)。

然而，原始集合类和元素类可用于生成类型安全`Collection<String>`对象。所以去掉Collection中E的冗余，作为Collection。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T00:06:47.023

对于您的用例，您可能可以放宽构造函数参数类型

```
public Foo(Class<?> collectionClass, Class<E> elementClass) 
{
    this.collectionClass = (Class<T>)collectionClass;
    this.elementClass = elementClass;
}

Foo<Collection<String>, String> foo = new Foo<>(Collection.class, String.class); 
```

类型检查较少，因此用户必须确保没有传入错误的类，例如

```
Foo<Set<String>, String> foo = new Foo<>(List.class, String.class);
    ^^^                                  ^^^^ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T00:19:13.047

好的，

我看过其他人的答案，但不是最好的......

在 Oreilly Tiger 的书（第 5 版）（p167）中，他们做了一个非常明确的声明，即构造函数的签名中**不能**有通配符......

# php - 将评论推送到 Facebook 粉丝专页

> ID：13906595
> 
> 赞同：2
> 
> 时间：2012-12-16T23:39:09.680
> 
> 标签：php, facebook

有没有关于如何将 Facebook 评论框的评论推送到我的 Facebook 粉丝页面的教程？

我在我的网页上实现了评论框插件，但评论没有出现在我的粉丝专页上。

提前致谢。

# php - 我的 KML 有什么问题，用 PHP 生成

> ID：13906602
> 
> 赞同：1
> 
> 时间：2012-12-16T23:39:49.033
> 
> 标签：php, google-maps, kml, google-earth

我用 PHP 生成了一个 KML 文件。它不会显示在 Google 地图和 Google 地球版本 6 中。

我找不到它有什么问题。谷歌地图和谷歌地球没有给出错误信息。

这是PHP文件的链接：

编辑：（有 google-maps 链接而不是我的 php 文件的链接）

[http://test.happymonster.nl/kml/hierzijnwijgeweest.php](http://test.happymonster.nl/kml/hierzijnwijgeweest.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:47:13.003

通过 PHP 生成的 KML 无效，Google 地球/地图将忽略未知元素。

KML 区分大小写，并且您的 KML 使用“*文档*”而不是“*文档*”，因此您的所有文件夹和地标都将被忽略。

这是一种情况，如果您在 Google 地球中启用错误检查，它会捕获它。在工具/选项/常规下，在 KML 错误处理部分中选择“显示所有错误的提示”。现在，当您加载 KML 时，它会提示“*文档*”是未知元素的错误。

除了 Google 地球中的基本错误处理之外，您还可以使用[Galados KML Validator](http://kmlvalidator.com/)来验证您的 KML 。

# haskell - Haskell 缩进样式

> ID：13906604
> 
> 赞同：6
> 
> 时间：2012-12-16T23:39:53.083
> 
> 标签：haskell, coding-style, indentation

我发现我经常在缩进多少、在哪里换行等方面不一致。是否有官方或广泛遵循的指导方针来说明应该如何在 Haskell 中布局空白？请注意，我不是在问什么是合法的。我在问什么是好的做法，沿着[if/else 控制块的 Good Haskell 编码风格？](https://stackoverflow.com/questions/127190/good-haskell-coding-style-of-if-else-control-block)，但更普遍。我特别想知道人们如何使用 do-blocks、let-blocks、where-blocks 和 case 语句，尤其是当这些东西相互嵌套或嵌套在多个函数定义中时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:25:08.120

如果可以的话，一个小小的挑剔。

我最喜欢 hammar 的链接指南。但是，我真的不喜欢这种风格：

```
send :: Socket
     -> ByteString
     -> IO Int 
```

我更喜欢

```
send ::
  Socket ->
  ByteString ->
  IO Int 
```

在后一种风格中，参数和结果看起来不同（参数`->`后面有 s）。

我更喜欢这个。人们可能不同意，这主要只是个人品味的问题。可悲的是，afaik 黑线鳕似乎只支持前一种风格:(

# iphone - 如何在单点触控中循环播放 mp3 而没有间隙？

> ID：13906606
> 
> 赞同：2
> 
> 时间：2012-12-16T23:40:04.633
> 
> 标签：iphone, xamarin.ios, avaudioplayer

我希望使用 AVAudioPlayer 为 MonoTouch 编写的应用程序无缝循环 mp3，但找不到任何有关如何实现此目的的示例。我在[http://gamua.com/blog/2012/05/gapless-mp3-audio-on-ios/](http://gamua.com/blog/2012/05/gapless-mp3-audio-on-ios/)找到了一个很棒的库，但是它是为目标 c 编写的。

我希望即使设备被锁定并且已经使用 AudioSession 初始化程序播放但也无法正常工作，音频也能继续播放。

我无法找到示例或库来帮助实现结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:07:22.047

要在没有任何空格的情况下排队歌曲，请确保使用`AVQueuePlayer`，它允许您预加载歌曲。如果您只想循环播放同一首歌曲，只需设置`NumberOfLoops`为 0 on `AVAudioPlayer`，它将永远循环播放。

要在后台播放音频，您还需要`UIBackgroundModes`在`Info.plist`. [在此处](http://www.sagorin.org/2011/11/29/ios-playing-audio-in-background-audio/)查看此人的文章。他正在使用 Obj-C，但您应该能够将他的代码移植到 MonoTouch。

# entity-framework - 实体框架 - 在不更改类的情况下为类指定 Id

> ID：13906607
> 
> 赞同：0
> 
> 时间：2012-12-16T23:40:07.193
> 
> 标签：entity-framework

我正在尝试将电子邮件格式存储在我`DbContext`的原样中：

```
public class Context : DbContext
{
    public DbSet<MailMessage> MessageFormats { get; set; }
} 
```

尝试使用它时，我得到一个异常，因为`MailMessage`没有 ID。我可以为 MailMessage 指定一个 Id 还是必须创建它的子类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T00:24:33.470

Are you trying to store `System.Net.Mail.MailMessage` objects in your database using EntityFramework? I've only ever seen people store their own classes. Your best option would be to create your own class that takes a MailMessage in its constructor and exposes the properties you want to save.

# android - HTML Meta 标签让 Android 在表单中使用 input type="tel"

> ID：13906609
> 
> 赞同：1
> 
> 时间：2012-12-16T23:40:28.283
> 
> 标签：android, html, mobile, meta, keypad

> **可能重复：**
> [如何在 Android 的移动网站中强制使用数字键盘？](https://stackoverflow.com/questions/3372380/how-to-force-keyboard-with-numbers-in-mobile-website-in-android)

我有这个工作，但忘记了确切的元标记。我正在使用： `<input type="tel">` 当用户在指定字段中输入他们的帐号时显示数字键盘，但由于某种原因它失败了。我知道有一个元标记之类的`<meta "telephone=no">`东西可以让 android 正常运行，并允许 tel 键盘用于 web 表单上的输入条目，但不记得了。有人知道答案吗？

# java - 我需要帮助将摩尔斯电码转换为英语 (JAVA)

> ID：13906617
> 
> 赞同：-8
> 
> 时间：2012-12-16T23:41:09.207
> 
> 标签：java, translate, morse-code

我有一项任务要做，将莫尔斯电码转换成英语，反之亦然。我需要帮助将莫尔斯语转换成英语，但我不能使用我还没有学过的太复杂的东西，因为那很可疑。

```
 public class Project11
  {
          public static void main ( String [] args)
      {
                  int a = Input.getInt ("1 for English or 2 for Morse Code");
          String s1 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ 1234567890";
          String[] Morse = {".- ","-... ","-.-. ","-.. ",". ","..-. ","--. ",".... ",".. ",".--- ","-.- ",".-.. ","-- ","-. ","--- ",".--. ","--.- ",".-. ",
    "... ","- ","..- ","...- ",".-- ","-..-","-.-- ","--.. ","|",".--- ","..--- ","...-- ","....- ","..... ","-.... ","--... ","---.. ","----. ","----- "}; 
          switch(a)
          {
          case 1:
          English(s1, Morse);
          break;
          case 2:
          Morse(s1, Morse);
          break; 
          default:
          System.out.println("You have typed an incorrect key, please run the program again."); 
          } 
      }
      public static void English (String s1, String[] Morse)
      {
                  String Phrase = Input.getString ("Type in the sentence to convert");
          String convertphrase = Phrase.toUpperCase();
          char[] a = convertphrase.toCharArray();
          char[] s = s1.toCharArray();
          int length = a.length;
          for(int j = 0; j < length; j++)
          {
                           for(int i = 0; i < 35; i++)
               {                                                                 
                                  if(s[i] == a[j])
                  {
                  System.out.print(Morse[i]);   
                  }

               }
          }
      }
      public static void Morse (String s1, String[] Morse)
      {  
          String Phrase = Input.getString ("Type in the sentence to convert");
          char[] a = Phrase.toCharArray();
          int length = a.length;

      }
    } 
```

这就是我所拥有的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T23:52:07.397

与其要求别人做你的功课，你实际上应该在尝试解决问题时表现出一些努力。

我可以提供以下内容：

*   在 Java 中，这是一种风格的东西，但我们通常不会以大写字母开头命名我们的变量或方法，请查看[CamelCase](http://en.wikipedia.org/wiki/CamelCase)
*   你应该看看英语到摩尔斯电码是如何完成的，它遵循类似的逻辑
*   最后，这是供您参考的[Java String API](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)

祝你好运。

# python - 使用 pickle.dump - TypeError: must be str, not bytes

> ID：13906623
> 
> 赞同：308
> 
> 时间：2012-12-16T23:42:03.713
> 
> 标签：python, python-3.x, pickle

我正在使用 python3.3 并且在尝试腌制一个简单的字典时遇到了一个神秘的错误。

这是代码：

```
import os
import pickle
from pickle import *
os.chdir('c:/Python26/progfiles/')

def storvars(vdict):      
    f = open('varstor.txt','w')
    pickle.dump(vdict,f,)
    f.close()
    return

mydict = {'name':'john','gender':'male','age':'45'}
storvars(mydict) 
```

我得到：

```
Traceback (most recent call last):
  File "C:/Python26/test18.py", line 31, in <module>
    storvars(mydict)
  File "C:/Python26/test18.py", line 14, in storvars
    pickle.dump(vdict,f,)
TypeError: must be str, not bytes 
```

* * *

## 回答 #1

> 赞同：502
> 
> 时间：2012-12-16T23:56:24.917

输出文件需要以二进制模式打开：

```
f = open('varstor.txt','w') 
```

需要是：

```
f = open('varstor.txt','wb') 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2018-06-09T16:47:54.630

只是有同样的问题。在 Python 3 中，必须指定二进制模式“wb”、“rb”，而在 Python 2x 中，不需要它们。当您学习基于 Python 2x 的教程时，这就是您在这里的原因。

```
import pickle

class MyUser(object):
    def __init__(self,name):
        self.name = name

user = MyUser('Peter')

print("Before serialization: ")
print(user.name)
print("------------")
serialized = pickle.dumps(user)
filename = 'serialized.native'

with open(filename,'wb') as file_object:
    file_object.write(serialized)

with open(filename,'rb') as file_object:
    raw_data = file_object.read()

deserialized = pickle.loads(raw_data)

print("Loading from serialized file: ")
user2 = deserialized
print(user2.name)
print("------------") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-16T01:32:53.560

pickle 使用二进制协议，因此只接受二进制文件。正如[文档](https://docs.python.org/3/library/pickle.html)在第一句话中所说，“pickle 模块实现了用于序列化和反序列化的二进制协议”。

# loops - ARM Loop 停止执行指令

> ID：13906634
> 
> 赞同：1
> 
> 时间：2012-12-16T23:43:28.503
> 
> 标签：loops, assembly, arm

我正在开发一个计算二进制字符串的 1 和 0 数量的程序。我的 CountOnes 子程序按预期工作：

```
countOnes   MOV r1, r0      ;mov random number into r1
            TEQ r1, #0      ;test if all 0
            MOVEQ   pc, r14     ;if all 0's, brake
onesloop    SUB r2, r1, #1  ;subtract 1
            AND r1, r2, r1  ;and on r1 and r2
            ADD r9, r9, #1  ;increment loop counter
            TEQ r1, #0      ;test if all 0
            BNE onesloop    ;if not all 0's, loop
            MOV     pc, r14     ;return

countZeros  MOV r1, r0      ;mov random number in r1
            MVN r8, #0      ;fill r8 with 1's
            TEQ r1, r8      ;test if number is all 1's
            MOVEQ   pc, r14     ;if all 1's, break
zerosloop   ADD r2, r1, #1  ;add 1 to r2
            AND r1, r2, r1  ;and r1 and r2
            ADD r9, r9, #1  ;increment loop count
            TEQ r1, r8      ;test if all ones
            BNE zerosloop   ;if not all 1's, loop
            MOV pc, r14     ;return 
```

然而，我的countZeros子程序无限循环，用调试器查看后发现**ADD**和**AND**指令只在第一次循环中执行（这就是无限循环的原因），然而，整个循环没有中断，寄存器 9 每次迭代都会继续递增。我想不出任何理由让这些指令停止执行。任何人都遇到过这种行为或知道会导致它的原因吗？如果您需要有关任何事情的更多信息，请询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T00:16:22.220

在你的`zerosloop`你需要`OR r1, r2, r1`代替`AND`.

你也应该用它`CMN r1, #1`来找出是否`r1`都是`1`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:27:54.683

这篇关于 ARM 人口统计的文章可能值得一看：

[http://www.sciencezero.org/index.php?title=ARM:_Count_ones_(bit_count](http://www.sciencezero.org/index.php?title=ARM:_Count_ones_(bit_count) )

# ruby-on-rails - ActiveModel 方法属性“_was”是做什么用的？

> ID：13906635
> 
> 赞同：15
> 
> 时间：2012-12-16T23:43:29.227
> 
> 标签：ruby-on-rails, ruby, activerecord, activemodel

在控制台中使用自动完成功能时，我经常会看到“ `_was`”被附加到我的属性中。但我找不到任何文档或最佳使用实践。它有什么作用以及应该如何使用？

例子：`user.fname`有方法`user.fname_was`

使用 source_location，我将其追踪到：active_model/attribute_methods.rb"，第 296 行，但没有任何具体内容。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-16T23:50:09.863

这是 ActiveModel::Dirty 的一部分你可以在这里看到它[https://github.com/rails/rails/blob/af64ac4e5ce8406137d5520fa88e8f652ab703e9/activemodel/lib/active_model/dirty.rb#L146](https://github.com/rails/rails/blob/af64ac4e5ce8406137d5520fa88e8f652ab703e9/activemodel/lib/active_model/dirty.rb#L146) 示例

```
person = Person.find_by_name('Uncle Bob')
person.changed?       # => false 
```

更改名称：

```
person.name = 'Bob'
person.changed?       # => true
person.name_changed?  # => true

#method _was return prev attribute value
person.name_was  # => 'Uncle Bob'  
person.name_change    # => ['Uncle Bob', 'Bob']
person.name = 'Bill'
person.name_change    # => ['Uncle Bob', 'Bill'] 
```

# javascript - AngularJS 服务根范围

> ID：13906636
> 
> 赞同：2
> 
> 时间：2012-12-16T23:43:37.287
> 
> 标签：javascript, angularjs

我在 AngularJS 中定义了一个服务，`app.factory("serviceName", function($rootScope) { .. })` 如果我这样做`$rootScope.$apply()`了，那会重新评估应用程序中所有控制器的范围，还是只重新评估使用此服务的控制器的范围？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T16:57:41.697

[$digest()](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24digest)仅“刷新”当前范围及其所有子范围。

[$apply(exp)](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24apply)计算 exp，然后在根作用域上调用 $digest()。因此调用 $apply() （在任何范围内）会影响所有范围。

如果您调用 $digest() 并且您的操作更改了某些父范围，则不会观察到更改。所以通常你想调用 $apply()。（如果你想尝试通过调用 $digest() 来提高效率，它可能会在以后咬你！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T00:59:57.887

每个应用程序只有一个根范围。调用`$rootScope.$apply()`将触发一个摘要循环，该循环将对**整个范围树**进行脏检查。

为避免这种情况，`$apply`如果您想对多个同级作用域进行脏检查，请从控制器的作用域或其父作用域调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T10:56:51.747

下面的代码将每两秒记录一次`MyCtrl`并记录到控制台，表明**任何 $apply 到任何 $scope**都会消化**所有 scopes**。问题是应用函数将在哪个范围内运行。如果它只检查应用范围，则不应记录。[在这里](http://jsfiddle.net/CaioToOn/hDZVx/)拉小提琴。`MyCtrl2`****`MyCtrl`****

 ****```
var mod = angular.module('MyApp', []);

mod.controller('MyCtrl', function($scope) {
    $scope.value = function() {
        console.log('MyCtrl');
        return 'value';
    };

    setInterval(function() {
        $scope.$apply()
    }, 2000);
});

mod.controller('MyCtrl2', function($scope) {
    $scope.value2 = function() {
        console.log('MyCtrl2');
        return 'value 2';
    };
});​ 
```

```
<div ng-app="MyApp">
  <div ng-controller="MyCtrl">{{value()}}</div>
  <div ng-controller="MyCtrl2">{{value2()}}</div>
</div>​ 
```****

# javascript - 使用javascript将隐藏框架中的元素解析为可见框架

> ID：13906642
> 
> 赞同：1
> 
> 时间：2012-12-16T23:44:31.430
> 
> 标签：javascript, jquery, ajax

有谁知道使用 JavaScript 将 html 框架中的 DIV 解析为可见框架的方法？

例如，如果我制作了 Google 搜索结果的隐藏框架并在可见框架上仅显示搜索结果元素，而没有搜索框、菜单选项卡等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:13:40.920

如果您将谷歌的网站放在框架或 iframe 中，您将收到带有文本的 javascript 异常：“拒绝显示文档，因为 X-Frame-Options 禁止显示。”

Google 不允许将网站放在 iframe 中。

要在 iframe 中禁止您的网站，您可以使用如下代码：

```
var inIframe = function() {
    return (top != self);
};

jQuery(document).ready(function() {
    if (inIframe()) { throw new Error("Refused to display document because display forbidden by X-Frame-Options."); }

    // load site
}); 
```

# jquery - jquery选项卡在顶部添加空间

> ID：13906644
> 
> 赞同：4
> 
> 时间：2012-12-16T23:44:48.643
> 
> 标签：jquery, jquery-ui, jquery-plugins

好的，这是交易。[我从http://jqueryui.com/tabs/#mouseover](http://jqueryui.com/tabs/#mouseover)安装了 jQuery 选项卡

但是，它看起来只在前两个选项卡上工作正常，当我激活选项卡 3、4、...时，它会在每个 div 之前添加一些空白空间，因此每个 div 会向下移动大约 10px。

我的脚本没什么大不了的：

**jQuery：**

```
$(document).ready(function() {
    $( "#tabs" ).tabs({
        event: "mouseover"
        });
}); 
```

**HTML：**

```
 <div id="tabs">

    <ul class="tabs">
      <li><a href="#tab-1">1</a></li>
      <li><a href="#tab-2">2</a></li>
      <li><a href="#tab-3">3</a></li>
      <li><a href="#tab-4">4</a></li>
      <li><a href="#tab-5">5</a></li>
      <li><a href="#tab-6">6</a></li>    
    </ul>

    <div id="1"></div>
    <div id="2"></div>    
    <div id="3"></div>
    <div id="4"></div>
    <div id="5"></div>
    <div id="6"></div>

  </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T00:06:56.107

问题是关闭每个div，有多余的**br**

```
</div> <br /> 
         ^
         ^
         ^ 
       (remove this br) 

       <div id="tab-n".....>
          // something
       </div> 
```

# python - 仅将列表写入文件10次，python

> ID：13906645
> 
> 赞同：0
> 
> 时间：2012-12-16T23:44:57.337
> 
> 标签：python, file, list

我有一个名为的列表列表`sorted_lists`

我正在使用它来将它们写入 txt 文件。现在的问题是，下面的这一行打印了所有列表。我试图弄清楚如何只打印前 n 个（n = 任意数字），例如前 10 个列表。

```
f.write ("\n".join("\t".join (row) for row in sorted_lists)+"\n") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:50:02.140

尝试以下操作：

`f.write ("\n".join("\t".join (row) for row in sorted_lists[0:N])+"\n")`

其中`N`是`N`您要打印的第一个列表的数量。

`sorted_lists[0:N]`将捕获第一个`N`列表（从 0 到 N-1 计数，有 N 个列表；`list[N]`不包括在内）。你也可以写`sorted_lists[:N]`which 隐含地意味着它将从列表的第一项（项目 0）开始。它们是相同的，后者可能被认为更优雅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T23:49:02.107

`f.write ('\n'.join('\t'.join(row) for row in sorted_lists[:n+1])+'\n')`

其中`n`是列表的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T23:53:15.087

为什么不简化此代码并使用正确的工具：

```
from itertools import islice
import csv

first10 = islice(sorted_lists, 10)
with open('output.tab', 'wb') as fout:
    tabout = csv.writer(fout, delimiter='\t')
    tabout.writerows(first10) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T23:51:44.697

您应该阅读[python 切片功能](https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation)。

如果您只想查看前 10 个整体`sorted_lists`，您可以这样做`sorted_lists[0:10]`。

# tfs - 从 TFS 将解决方案下载到新 PC？

> ID：13906652
> 
> 赞同：3
> 
> 时间：2012-12-16T23:46:18.953
> 
> 标签：tfs

[我正在http://tfs.visualstudio.com](http://tfs.visualstudio.com)上的云中玩 TFS 。我有一台新电脑，想下载我的解决方案。我看到了如何从 VS 连接到 TFS，并且我可以在 VS 中看到我的工作项，但是我看不到我的源代码。

我将使用 Git 或 Mercurial 术语来表述这一点；如何将 repo 克隆到我的新 PC？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T23:53:53.170

这是通过进入源代码管理资源管理器来完成的。在这里，您必须设置一个工作区以将文件夹结构映射到您的本地硬盘驱动器。然后你只需要“获取最新”。

[更详细的指南](http://msdn.microsoft.com/en-us/library/ms181384%28v=vs.110%29.aspx)

# xml - 使用多个条件从 XML 中删除

> ID：13906654
> 
> 赞同：0
> 
> 时间：2012-12-16T23:46:22.080
> 
> 标签：xml, replace, notepad++

我正在寻找一种基本上在 XML 文档上执行搜索/替换以删除包含某些值的行的方法。想想一个带有 IN 运算符的 DELETE SQL 查询 - 遗憾的是，我无法将此文件系统转换为数据库。

例如

```
<?xml version="1.0" encoding="UTF-8">
<colu id="1">   
    <product id="995462066"/>
    <product id="995462067"/>
    <product id="995462068"/>
    <product id="995462069"/>
</colu> 

<colu id="2">   
    <product id="995462050"/>
    <product id="995462091"/>
    <product id="995462096"/>
    <product id="995462099"/>
</colu> 
```

在上面我想查找并替换任何包含 995462099、995462091 和 995462066 的行。

在这个规模上，我可以简单地执行三个查找/替换，但我正在处理的文件超过 30,000 个条目，并且我有 600 个不同的搜索词需要删除。我已经有一个要删除的条目列表（使用 [product id="#"/] 格式化）我只需要一个方法来运行该列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:09:57.143

除非您编写自己的插件，否则在 Notepad++ 中无法做到这一点。

我认为最简单的解决方案是选择您最喜欢的脚本/编程语言并自己做。

否则，您可以使用命令行方式并使用 sed 和 awk 之类的工具（您可以通过搜索 stackoverflow 或 google 找到很多关于这些的信息）。

# requirejs - 从 requirejs 映射调用文本插件

> ID：13906656
> 
> 赞同：10
> 
> 时间：2012-12-16T23:46:51.690
> 
> 标签：requirejs, typescript, requirejs-text

我正在使用 TypeScript、Backbone 和 Mustache 编写一个 Web 应用程序。我想使用 Requirejs 进行依赖加载。

我还在使用用于 TypeScript 的 Web Essentials Visual Studio 插件，并打开了 AMD 编译选项。对于那些不熟悉这一点的人，如果您导入外部模块，它会将您的类型脚本文件包装在 AMD 模块中。例如：

在类型脚本中，我在类型定义文件中导入以下模块。

```
export import Backbone = module("Backbone"); 
import mainTemplate = module("MainTemplate"); 
```

输出类似于：

```
define(["require", "exports", "Backbone", "MainTemplate"], function(require, exports, __Backbone__, __mainTemplate__) {
//...code goes here ...
}); 
```

对于模板，我在类型定义文件中声明了以下内容：

```
declare module "MainTemplate" { } 
```

为了支持 requirejs 插件，您需要将您的模块声明为：

```
declare module "text!MainTemplate.html" { } 
```

我想保持模块名称没有插件和文件扩展名。这将使我在未来有一些灵活性。

我在require中有以下映射。

```
require.config({
    map: {
        "MyModule": {
            "MainTemplate": "text!MainTemplate.html"
        }
    }
} 
```

这成功地调用了文本插件，但是插件加载了错误的 url。筛选文本插件的源代码，我发现下面的代码是罪魁祸首。

```
load: function (name, req, onLoad, config) {
  ...
  url = req.toUrl(nonStripName),
  //returns "scripts/**text!**MainTemplate.html**.html**"
  ...
} 
```

如果我将模块命名为“MainTemplate.html”，它可以正常工作，但我想将扩展名保留在模块名称之外。

我用一个简单的正则表达式替换修改了文本插件，以去除插件引用和重复的扩展名。

有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T21:06:15.317

遇到类似的问题。终于解决了。请参阅[TypeScript：编译删除未引用的导入](https://stackoverflow.com/questions/15267705/typescript-compiling-removes-unreferenced-imports)

```
/// <amd-dependency path="text!templates/application.htm" />

var applicationTemplate = require('text!templates/application.htm'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-29T09:46:54.107

对于 Typescript 1.0，这对我有用。首先，我创建了一个 .d.ts 文件，其中存储了每个文本模板的所有模块声明。

```
//workaround for typescript's lack of support for requirejs text template notation
//remember that a reference to the import variable has to be found in the class, otherwise typescript ignores the import
declare module "text!views/details/details.html" {
    var text: string;
    export = text;
} 
declare module "text!views/layout/layout.html" {
    var text: string;
    export = text;
} 
declare module "text!views/home/home.html" {
    var text: string;
    export = text;
} 
```

然后引用文本模板，我将这些行添加到类/模块的顶部。

```
/// <reference path="../texttemplate.d.ts"/>
import detailsTemplate = require('text!views/details/details.html'); 
```

The reference line is not actually needed, since the .d.ts file is picked up globally. But I added it as a reminder of the workaround. It also makes it easy to ctrl+click to go the d.ts. file.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-23T20:06:14.620

There is a slightly nicer way to do this (I'm using typescript 2.0) Referenced here: [https://www.typescriptlang.org/docs/handbook/triple-slash-directives.html](https://www.typescriptlang.org/docs/handbook/triple-slash-directives.html)

This code expects that your requirejs configuration and plugins are set up correctly:

```
/// <amd-dependency path="text!./about.html" name="template"/>
declare let template: string; 
```

This helped me a lot to migrate lagacy code to typescript.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-09T21:20:28.587

从 TypeScript 0.9.0 开始，我认为您需要执行以下操作：

```
/// <amd-dependency path="text!templates/application.htm" />
declare var require:(moduleId:string) => any;
var applicationTemplate:string = require("text!templates/application.htm"); 
```

[在http://www.codebelt.com/typescript/typescript-amd-with-requirejs-tutorial/](http://www.codebelt.com/typescript/typescript-amd-with-requirejs-tutorial/)上查看更多信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T01:22:22.757

我们在 TypeScript 应用程序中使用 Backbone 和 require.js。
我们不使用

```
import backbone = module("Backbone") 
```

语法，而是使用

```
/// <reference path="../../modules/Backbone.d.ts" /> 
```

参考，然后是 BootStrapper。
这样，'text!htmlfile.html' 语法与 require.js 完美配合。

我整理了一篇关于将 require.js 与 TypeScript 和 AMD 结合使用的博客：http: [//blorkfish.wordpress.com/2012/10/23/typescript-organizing-your-code-with-amd-modules-and-require -js/](http://blorkfish.wordpress.com/2012/10/23/typescript-organizing-your-code-with-amd-modules-and-require-js/)

# c++ - 仅输出重载 c++

> ID：13906657
> 
> 赞同：2
> 
> 时间：2012-12-16T23:46:52.947
> 
> 标签：c++, function, overloading

> **可能重复：**
> [按返回类型重载](https://stackoverflow.com/questions/9568852/overloading-by-return-type)

是否可以仅重载函数的输出。例如，我有一个可以以两种不同方式返回姿势的函数。一个 6DOF 位姿或同质变换矩阵。所以我有两个功能：

```
Eigen::Vector6f pose(); 
```

和

```
Eigen::Matrix4d pose(); 
```

可以超载唯一的输出吗？

如果我这样做，那么编译器将如何知道要使用哪个函数？

它可以告诉我什么时候这样做：

```
Eigen::Matrix4d poseHolder = pose(); 
```

要使用第二个功能？如果没有，有没有办法在不单独命名函数的情况下实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T23:51:03.223

不，你通常不能这样做。如果你真的坚持对两个不同的函数使用相同的名称，你可以通过返回一个带有重载转换运算符的代理对象来伪装它：

```
struct Proxy {
    operator Eigen::Vector6f() const {
        // ...
    }

    operator Eigen::Matrix4d() const {
        // ...
    }
};

Proxy pose() { return Proxy(); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T23:49:13.653

重载函数的签名**必须**不同。对于普通函数，返回类型不是签名的一部分，所以你不能做你想要的。对于函数模板，尽管返回类型是签名的一部分，因此您可以重载仅因返回类型不同而不同的函数模板。

规则是合乎逻辑的。实际上，对于普通函数，编译器（在一般情况下）不知道要调用哪个函数。在函数模板的情况下，调用者可以自由地明确指定返回类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T23:56:28.163

函数重载的关键是函数的参数列表，也称为***函数签名***。

如果两个函数以相同的顺序使用相同数量和类型的参数，则它们具有相同的签名；变量名无关紧要。C++ 允许您使用相同的名称定义两个函数，前提是这些函数具有不同的签名。

签名可以在参数数量或参数类型上有所不同，或两者兼而有之。

以您的样本为例，如果您不想存储返回值，`pose();`那么应该调用哪一个？

```
pose(); 
```

# bison - Bison c 代码赋值

> ID：13906658
> 
> 赞同：0
> 
> 时间：2012-12-16T23:47:23.217
> 
> 标签：bison

如果循环结构在 *.y 文件中定义为：

```
WHILE '(' expr ')' stmt ENDWHILE { //to be written here loop structure handling
- put WHILE into structure stack } 
```

然后 - 但是我被迫使用 ENDWHILE - 如何将 c 代码绑定到 ENDWHILE 以检查结构之间没有重叠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:45:56.700

示例中大括号中的代码仅在所有先前的标记和规则都已被识别（以及任何代码执行）时才会执行。

如果您嵌套了 WHILE / ENDWHILE 循环，则内部循环将在外部循环之前完成。

# .htaccess - 如何使用 htacces 重写静态 URL

> ID：13906665
> 
> 赞同：0
> 
> 时间：2012-12-16T23:48:48.463
> 
> 标签：.htaccess

我确信我的问题对于知道它的人来说非常简单，但是我无法在互联网上找到任何方法来重写 STATIC URL 以使其更清洁，例如，我想要这个：

第一个（我想更改我的链接）

www.mycoolsite.com/contact.php

变成这样：

www.mycoolsite.com/contact

非常感谢！干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:58:03.400

假设您使用的是 Apache，您可以启用 MultiViews

要启用它，您需要添加到您的 Apache 配置中

```
Options +MultiViews 
```

如果已经配置了 allowoverride，您可以将多视图添加到您的 .htaccess 文件中。 [http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T00:49:07.100

可以通过以下规则解决。请注意，当您输入带后缀的地址时，它还会重定向您。

```
RewriteEngine On
RewriteBase /

# exists file with extension?
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^.*$ $0.php [L]

# redirect, but only once
RewriteCond %{ENV:REDIRECT_STATUS} ^$
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.+)\.php$ $1 [L,R=301,NE] 
```

来源： http: [//phpfashion.com/hadanka-znate-mod_rewrite#comment-7359](http://phpfashion.com/hadanka-znate-mod_rewrite#comment-7359)（非英文）

# box-api - 用户单击拒绝时的 Oauth2 重定向

> ID：13906669
> 
> 赞同：3
> 
> 时间：2012-12-16T23:49:24.743
> 
> 标签：box-api

新的 Oauth2 授权过程似乎运行良好。更改我的类方法来处理它以及对 API 的其他更改需要一些时间，但我现在一切正常。我还没有弄清楚的一个小问题是当用户在登录过程的第二部分单击“拒绝”时如何获取重定向请求。单击“允许”时，我的重定向很好，但“拒绝”我什么也没有。`ht-btz://com.cloud`根据文档，我的回调 URL 是这样的，我应该得到这样的东西：

`ht-btz://com.cloud??error=access_denied&error_description=The+user+denied+access+to+your+application`

我已经使用自定义的 Python 包装的 IE 浏览器进行了尝试，该浏览器可以监视重定向，并使用自定义的本地 URL 协议处理程序，并且都没有收到任何对回调 uri 的请求。但两者都准确地了解了文档在批准点击时所说的内容。

这并不是一个真正的阻止者，因为“拒绝”点击无论如何都会停止一切。但最好用回调请求优雅地处理事情。那么这是错误，还是我错过了什么？

谢谢

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:11:38.853

这是 Box 端使用非 HTTPS 协议确认的错误。我们正在努力修复，应该会在本周的某个时候发布。

# javascript - JQuery Carousel - 移动 UL 而不是 LI

> ID：13906670
> 
> 赞同：0
> 
> 时间：2012-12-16T23:49:36.730
> 
> 标签：javascript, jquery, carousel

我在这里使用 JQuery Carousel 插件：[http ://www.thomaslanciaux.pro/jquery/jquery_carousel.htm](http://www.thomaslanciaux.pro/jquery/jquery_carousel.htm)

我已经这样设置了：

```
<script type="text/javascript">
    $(function(){
        $(".carousel").carousel();
    });
</script>

<div id="carouselholder">
<div class="carousel">
    <ul>
        <li><img src="images/1.jpg" alt=""></li>
        <li><img src="images/2.jpg" alt=""></li>
        <li><img src="images/3.jpg" alt=""></li>
    </ul>
</div>
</div><!--CAROUSELHOLDER--> 
```

但是当我点击 Next 按钮时，它似乎转移了整个`ul`而不是`li`.

有谁知道如何解决这一问题？（或者也许有更好的插件？）

下图：Element Inspector 的屏幕截图：

![在此处输入图像描述](../Images/0d4e76d28ec07c9973efdd5ffdcb1918.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:20:18.123

这个插件的文档似乎有点薄。似乎需要一些额外的样式才能使其工作，但没有一个示例说明这一点。

您的设置是正确的，实际上它会移动整个 UL 分组，只显示当前选择的 li。使用上面的简单代码，我所做的只是添加以下 CSS 以使其工作：

```
li {
  float: left;
} 
```

只需为您的容器添加更多样式以约束视图，您应该一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T00:11:25.283

我认为这就是它的工作方式

如果你在 carousel-wrap 上设置一个宽度，所以它只显示一个图像，ul 移动位置以显示下一个

li 标签不动

如果你想尝试另一个插件，我推荐这个 [http://caroufredsel.dev7studios.com/index.php](http://caroufredsel.dev7studios.com/index.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T00:39:10.497

感谢大家的帮助，但我发现 Cycle 插件的修改版本效果更好：

[http://jquery.malsup.com/cycle/nowrap.html](http://jquery.malsup.com/cycle/nowrap.html)

# matlab - 编写实现欧拉方法的matlab函数？

> ID：13906672
> 
> 赞同：0
> 
> 时间：2012-12-16T23:49:52.023
> 
> 标签：matlab, ode

我应该编写一个 MATLAB 函数，它采用 y'(t) = a*y(t) +b 形式的一阶常微分方程，初始点 y(t0)=y0 作为输入，并计算解的前 15 个点. 还绘制前 15 个点的解曲线。我们要求解的方程是 ;y'(t) = 4*y(t)+1，初始点 y(0)=0。

对于这个函数，我写了下面的代码，但这给了我一个关于 y 的错误。我应该如何正确实现欧拉函数？而且我无法确定如何绘制解曲线..

```
function E=euler(f,y)
%Input - f is the function entered as a string 'f'
% - a and b are the left and right endpoints
% - ya is the initial condition y(a)
% - M is the number of steps
%Output - E=[T' Y'] where T is the vector of abscissas and
% Y is the vector of ordinates
h=0.1;
y(0)=0;
for j=0:15
Y(j+1)=Y(j)+h*feval(4*(y(t)+1));
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:53:26.750

修补：

```
h = 0.1;
y(1) = 0;
for j = 1:16
    Y(j + 1) = Y(j) + h * feval(4 * (y(t - 1) + 1));
end 
```

好吧，我不确定数学部分，但是 - 索引需要从“1”开始。其他然后例如在 C 中，您不能使用“0”作为索引。

# android - SlidingMenu 片段切换监听器空指针异常

> ID：13906678
> 
> 赞同：0
> 
> 时间：2012-12-16T23:50:38.743
> 
> 标签：android, fragment, onclicklistener, android-sliding

[我呼吁这个活动作为我的主要任务，这个活动从这个库https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)扩展了 SlidingActivity 。当它为我与片段一起使用的滑动菜单创建背后内容视图时。在这个主要活动中，我为日历创建了一个自定义视图，在这个自定义视图中绘制了一些图标。我想切换这些图标，所以我在滑动菜单片段视图中使用开关，但我得到一个空指针异常，当我在开关所在的片段中切换时，日志 cat 说它在侦听器中发生。因此，我的代码清除了使用主活动中的自定义视图制作的日历上的图标，并且确实可以与我在主活动中使用代码，但不在切换列表器 OnCheckedChangeListener 中使用。

这是调用幻灯片菜单和片段以填充幻灯片菜单的 Mainactivity

```
 setBehindContentView(R.layout.menu_frame);
    FragmentTransaction t = this.getSupportFragmentManager().beginTransaction();
    mFrag = new ColorFragment();
    t.replace(R.id.menu_frame, mFrag);
    t.commit();

    // customize the SlidingMenu
    SlidingMenu sm = getSlidingMenu();
    sm.setShadowWidthRes(R.dimen.shadow_width);
    sm.setShadowDrawable(R.drawable.shadow);
    sm.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    sm.setFadeDegree(0.35f);
    sm.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
    //sm.attachToActivity(this, SlidingMenu.SLIDING_WINDOW);

    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    //redrawtest();
   // setListener(); 
```

这是我用于此主要活动的 xml。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<com.projects.shiftcalendar.CalendarView
    android:id="@+id/view_month_calendar"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
</com.projects.shiftcalendar.CalendarView>

</LinearLayout> 
```

这是我的片段

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle
savedInstanceState) {
    return inflater.inflate(R.layout.slide_menu_toggle, null );

}

public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    Switch d = (Switch) getView().findViewById(R.id.monitored_switch1);
    d.setOnCheckedChangeListener(this);

}

public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

    if(isChecked){

        cv.redrawCalendarClearSymbol();

    }
    else {

        cv.redrawCalendarClearSymbol();

      }

  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T00:26:29.427

You wrote:

> I'm getting a null pointer exception which log cat saids its happens in the listner when i toggle in the fragment where the switch is (...) [doesn't work within the toggle listner OnCheckedChangeListener.

Based on your description, the NullPointerException happens when you call:

```
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked){
     //...        
    cv.redrawCalendarClearSymbol(); 
```

It seems like `cv` is null. One possible reason for the NPE is that `cv` hasn't been instantiated when the Fragment was created. Assuming `cv` is part of your fragment's layout, you can assign a reference to 'cv' in `onCreateView()`:

```
YourCustomType cv;//field

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    ViewGroup vg = (ViewGroup) inflater.inflate(R.layout.slide_menu_toggle, null);
    cv = (YourCustomType)vg.findViewById(R.id.yourIdForCVInTheFragmentLayout);
    return vg;
} 
```

# c++ - 将大型 python 对象存储在 RAM 中以备后用

> ID：13906679
> 
> 赞同：2
> 
> 时间：2012-12-16T23:50:46.180
> 
> 标签：c++, python, memory, ram

是否可以将 python（或 C++）数据存储在 RAM 中以供以后使用，如何实现？

**背景：** 我编写了一个程序来查找输入表中的哪些行与给定的正则表达式匹配。我可以在大约一秒或更短的时间内找到所有的行。然而问题是我每次启动这个程序时都会将输入表处理成一个 python 对象。这个过程大约需要 30 分钟。

该程序最终将在 RAM 超过 128GB 的​​机器上运行。python 对象需要大约 2GB 的 RAM。输入表很少更改，因此 python 对象（我目前每次都在重新计算）实际上很少更改。有没有一种方法可以让我创建一次这个 python 对象，将它存储在 RAM 24/7 中（如果输入表更改或服务器重新启动，则重新创建），然后每次需要时都使用它？

注意：python 对象在创建后不会被修改。但是，如果需要，我需要能够重新创建此对象。

**编辑：**我能想到的唯一解决方案就是让程序 24/7 运行（作为守护进程？？），然后根据需要向它发出命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T00:10:01.323

您可以尝试腌制您的对象并将其保存到文件中，这样每次程序运行时它只需反序列化对象而不是重新计算它。希望服务器的磁盘缓存在必要时保持文件热。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T08:21:39.307

要将任何内容存储在 RAM 中，您需要一个正在运行的进程。因此，最简单的解决方案是实现您在编辑中编写的内容。您还可以创建一个始终运行的新进程，并让旧进程连接到新进程以获取数据。如何连接取决于您。您可以使用共享内存或 TCP/IP 套接字。TCP/IP 具有允许数据可通过网络访问的优势，但请确保其安全。

- 编辑 -

大多数操作系统还允许您安装一定速度的 RAM 作为驱动器。一个[RAM 驱动器](http://en.wikipedia.org/wiki/RAM_drive)。你可以写（像尼尔建议的那样）对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T00:29:49.553

我们定期加载和存储比 2 Gb 大得多的内存块（秒）。我们可以从使用 3 年的 SAN 获得 350 Mb/s。

瓶颈/开销似乎主要涉及 python 对象管理。我发现使用 marshal 比 cPickle 快得多。结合使用涉及最少 python 对象句柄的数据结构，这已经足够快了。

对于数据结构，您可以使用`array.array`或`numpy`。`array.array`更便携（不涉及额外的库），但`numpy`在许多方面更方便。例如，您将创建一个`array.array('i')`包含 1000 万个元素的单个整数，而不是 1000 万个整数（python 对象）。

使用 marshal 最好的部分是它是一种非常简单的格式，您可以使用 c/c++ 代码轻松地写入和读取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T07:30:03.023

您的问题描述有点模糊，可以通过几种不同的方式阅读。

我阅读本文的一种方式是，您在磁盘上有某种数据结构的 ASCII 表示。你将这个表示读入内存，然后用 grep 一次或多次查找与给定正则表达式匹配的内容。

加快速度很大程度上取决于所讨论的数据结构。

如果您只是简单地进行行拆分，那么也许您应该使用单个读取指令将整个内容读入一个字节数组。然后，您可以更改 grep 的方式以使用不跨越多行的字节数组 grep。`^.*?`如果您通过在开头和`.*?$`结尾放置表达式来始终匹配整行（`?`强制最小而不是最大咀嚼），那么您可以检查匹配表达式的大小以找出要向前移动的字节数。

或者，您可以尝试使用该`mmap`模块来实现类似的功能，而无需阅读任何内容并产生复制开销。

如果要进行大量处理来创建数据结构，并且您想不出一种方法以非常原始的方式将文件中的数据用作简单的字节数组，那么您将获得各种其他解决方案取决于，尽管这些听起来像创建一个守护进程是最好的选择。

由于您的基本操作似乎是“告诉我哪些表条目与正则表达式匹配”，因此您可以使用`xmlrpc.server`和`xmlrpc.client`库来简单地包装一个调用，该调用将正则表达式作为字符串并以任何自然形式返回结果。该库将负责将看起来像函数调用的东西通过套接字或其他任何东西包装成消息的所有工作。

现在，您将其实际保存在内存中的想法有点牵强附会。我认为这些天从磁盘读取 2G 的信息不需要 30 分钟。它可能最多需要 5 个，并且可能少于 1 个。因此，您可能想看看如何构建数据结构，看看是否可以优化它。

pickle 和/或 marshal 将为您购买的是高度优化的代码，用于从序列化形式构建数据结构。这将导致数据结构的创建可能会受到磁盘读取速度的限制。这意味着您要解决的真正问题不是每次都从磁盘读取它，而是在您自己的地址空间中构建数据结构。

将它保存在内存中并使用守护进程并不能保证它会保留在内存中。它只是保证它在 Python 进程的地址空间中保持为您想要的数据结构。操作系统可能随时决定将该内存交换到磁盘。

同样，这意味着关注从磁盘读取它的时间可能不是正确的焦点。相反，专注于如何在 Python 进程的地址空间中有效地重新创建（或保留）数据结构。

无论如何，这是我对这个话题的啰嗦。鉴于你的问题含糊不清，没有明确的答案，所以我只是给出了一些可能的技术和一些指导思想的大杂烩。

# java-me - j2me：如何在 TextField 上使用 setCommandListener？

> ID：13906682
> 
> 赞同：1
> 
> 时间：2012-12-16T23:51:04.940
> 
> 标签：java-me, command, textfield, midp, lcdui

我想这样当我在 a 中选择一个特定`TextField`的时`Form`，我会得到一个特定的`Command`s 列表，

例如
TextField：确定、取消
TextField2：确定、返回、帮助

我成功地使用`addCommand()`了每个`TextField`s**但我无法告诉它当我激活这些命令之一时会发生什么，**因为它们没有`setCommandListener`方法。

`NullPointerException`当我点击它时它会抛出一个。

我也尝试从他们那里获取命令，`Form`但它只接收它包含的命令，而不是`TextField`s 拥有的命令。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:02:00.590

TextField 是一个`Item`对象，要对它使用命令，您需要 **[ItemCommandListener](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/ItemCommandListener.html "API 文档")**：

> 一种侦听器类型，用于接收已在[Item](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Item.html)对象上调用的命令的通知。一个项目可以`Commands`与之关联。当调用此类命令时，应用程序会通过调用[setItemCommandListener()](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Item.html#setItemCommandListener%28javax.microedition.lcdui.ItemCommandListener%29)调用已在 Item 上设置的[commandAction()](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/ItemCommandListener.html#commandAction%28javax.microedition.lcdui.Command,%20javax.microedition.lcdui.Item%29)方法来通知应用程序...`ItemCommandListener`

您提到的最可能的原因`NullPointerException`是您没有设置适当的项目命令侦听器（默认为空，因此当 MIDP 尝试调用命令操作时，存在 NPE）。

为了得到你想要的，除了创建和添加命令，你需要创建项目命令侦听器，实现代码来处理其中的命令，然后将你的文本字段与这个侦听器相关联：

```
myTextField.setItemCommandListener(myItemCommandListener); 
```

# javascript - 动态添加视频标签时Firefox内存泄漏

> ID：13906683
> 
> 赞同：2
> 
> 时间：2012-12-16T23:51:05.367
> 
> 标签：javascript, html, firefox, memory-leaks, html5-video

似乎当我在 Firefox 中播放我的解决方案时，“未分配的堆”随着我动态替换对象/视频标签而不断增长。

```
$( buffer ).empty();
$( buffer ).html( '<object id="' + id + '" name="' + id + '" width="1366" height="768" data="displayQueue[ position ].filename + '" ></object>' ); 
```

所以基本上我正在创建一个轮播来替换缓冲区中的内容，以便在循环中一个接一个地播放不同的视频/闪存内容。

但是我发现每次替换标签时，firefox 都会增长 20Mb，直到 firefox 耗尽内存来分配并崩溃（进程使用 2gb 或更多）。

Firefox 是否正在缓存内容并且没有识别出我正在重新加载相同的内容（我已经在私人模式下运行了 Firefox，但仍然做同样的事情？

另外我认为这可能是一个糟糕的解决方案，如果您能提出一个更优雅的解决方案，我将不胜感激。

编辑：

在进一步调试后，我发现这似乎只发生在我加载视频标签时，即使在我删除它并运行 jquery .empty 方法后，firefox 也会将其保留在内存中。

```
$( buffer ).html( '<video id="' + id + '" width="1366" height="768" src="displayQueue[ position ].filename + '"></video>' ); 
```

# scala - scala slick 方法我目前无法理解

> ID：13906684
> 
> 赞同：89
> 
> 时间：2012-12-16T23:51:14.330
> 
> 标签：scala, playframework-2.0, magic-methods, scalaquery, slick

我试图了解一些 Slick 作品及其要求。

这是一个例子：

```
package models

case class Bar(id: Option[Int] = None, name: String)

object Bars extends Table[Bar]("bar") {
  def id = column[Int]("id", O.PrimaryKey, O.AutoInc)

  // This is the primary key column
  def name = column[String]("name")

  // Every table needs a * projection with the same type as the table's type parameter
  def * = id.? ~ name <>(Bar, Bar.unapply _)
} 
```

有人可以解释一下`*`这里方法的目的是什么，是什么`<>`，为什么`unapply`？什么是 Projection-method `~`' 返回的实例`Projection2`？

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-12-17T06:28:02.990

**[更新]** -*添加（又一个）关于`for`理解的解释*

1.  `*`方法：

    这将返回*默认投影*- 这就是您描述的方式：

    > '我*通常*感兴趣的所有列（或计算值）'。

    你的表可以有几个字段；您只需要一个默认投影的子集。默认投影必须与表的类型参数匹配。

    让我们一次一个。没有这些`<>`东西，只有`*`：

    ```
    // First take: Only the Table Defintion, no case class:

    object Bars extends Table[(Int, String)]("bar") {
      def id = column[Int]("id", O.PrimaryKey, O.AutoInc)
      def name = column[String]("name")

      def * = id ~ name // Note: Just a simple projection, not using .? etc
    }

    // Note that the case class 'Bar' is not to be found. This is 
    // an example without it (with only the table definition) 
    ```

    像这样的表定义将让您进行如下查询：

    ```
    implicit val session: Session = // ... a db session obtained from somewhere

    // A simple select-all:
    val result = Query(Bars).list   // result is a List[(Int, String)] 
    ```

    的默认投影`(Int, String)`导致`List[(Int, String)]` 诸如此类的简单查询。

    ```
    // SELECT b.name, 1 FROM bars b WHERE b.id = 42;
    val q = 
       for (b <- Bars if b.id === 42) 
         yield (b.name ~ 1)
         // yield (b.name, 1) // this is also allowed: 
                              // tuples are lifted to the equivalent projection. 
    ```

    是什么类型的`q`？它是一个`Query`与投影`(String, Int)`。调用时，它根据投影返回一个`List`元`(String, Int)`组。

    ```
     val result: List[(String, Int)] = q.list 
    ```

    在这种情况下，您已经在理解`yield`子句中定义了您想要的投影。`for`

2.  现在关于`<>`和`Bar.unapply`。

    这提供了所谓的*映射投影*。

    到目前为止，我们已经看到 slick 如何让您在 Scala 中表达返回*列投影*（或计算值）的查询；因此，在执行这些查询时*，您必须将查询的结果行*视为**Scala 元组**。元组的类型将与定义的 Projection 匹配（根据您 `for`在前面示例中的理解，或默认`*`投影）。这就是为什么返回where 的类型和类型`field1 ~ field2`的投影的原因。`Projection2[A, B]``A``field1``B``field2`

    ```
    q.list.map {
      case (name, n) =>  // do something with name:String and n:Int
    }

    Queury(Bars).list.map {
      case (id, name) =>  // do something with id:Int and name:String 
    } 
    ```

    我们正在处理元组，如果我们有太多列，这可能会很麻烦。我们不想将结果视为`TupleN`具有命名字段的对象。

    ```
    (id ~ name)  // A projection

    // Assuming you have a Bar case class:
    case class Bar(id: Int, name: String) // For now, using a plain Int instead
                                          // of Option[Int] - for simplicity

    (id ~ name <> (Bar, Bar.unapply _)) // A MAPPED projection

    // Which lets you do:
    Query(Bars).list.map ( b.name ) 
    // instead of
    // Query(Bars).list.map { case (_, name) => name }

    // Note that I use list.map instead of mapResult just for explanation's sake. 
    ```

    这是如何运作的？`<>`接受投影`Projection2[Int, String]`并返回类型上的映射投影`Bar`。这两个参数巧妙地`Bar, Bar.unapply _` 告诉了这个`(Int, String)`投影必须如何映射到一个案例类。

    这是一个双向映射；`Bar`是案例类构造函数，所以这是从`(id: Int, name: String)`到 a所需的信息`Bar`。如果`unapply` 你猜到了，那就是相反的。

    从哪里来`unapply`？这是可用于任何普通案例类的标准 Scala 方法 - 只需定义即可`Bar`为您提供`Bar.unapply`一个**提取器**，可用于取回`id`和`name`构建 `Bar`的：

    ```
    val bar1 = Bar(1, "one")
    // later
    val Bar(id, name) = bar1  // id will be an Int bound to 1,
                              // name a String bound to "one"
    // Or in pattern matching
    val bars: List[Bar] = // gotten from somewhere
    val barNames = bars.map {
      case Bar(_, name) => name
    }

    val x = Bar.unapply(bar1)  // x is an Option[(String, Int)] 
    ```

    因此，您的默认投影可以映射到您最希望使用的案例类：

    ```
    object Bars extends Table[Bar]("bar") {
      def id = column[Int]("id", O.PrimaryKey, O.AutoInc)
      def name = column[String]("name")
      def * = id ~ name <>(Bar, Bar.unapply _)
    } 
    ```

    或者您甚至可以按查询拥有它：

    ```
    case class Baz(name: String, num: Int)

    // SELECT b.name, 1 FROM bars b WHERE b.id = 42;
    val q1 = 
       for (b <- Bars if b.id === 42) 
         yield (b.name ~ 1 <> (Baz, Baz.unapply _)) 
    ```

    这里的类型`q1` 是`Query`a*映射*到 的投影`Baz`。调用时，它返回一个`List`对象`Baz`：

    ```
     val result: List[Baz] = q1.list 
    ```

3.  最后，顺便说一句，`.?`提供**选项提升**- Scala 处理可能不是的值的方式。

    ```
     (id ~ name)   // Projection2[Int, String] // this is just for illustration
     (id.? ~ name) // Projection2[Option[Int], String] 
    ```

    总而言之，它将与您的原始定义很好地配合使用`Bar`：

    ```
    case class Bar(id: Option[Int] = None, name: String)

    // SELECT b.id, b.name FROM bars b WHERE b.id = 42;
    val q0 = 
       for (b <- Bars if b.id === 42) 
         yield (b.id.? ~ b.name <> (Bar, Bar.unapply _))

    q0.list // returns a List[Bar] 
    ```

4.  回应关于 Slick 如何使用`for`理解的评论：

    不知何故，单子总是设法出现并要求成为解释的一部分......

    因为理解不仅仅特定于集合。它们可以用于任何类型的*Monad*，并且集合只是 Scala 中可用的多种 monad 类型之一。

    但由于集合很熟悉，它们为解释提供了一个很好的起点：

    ```
    val ns = 1 to 100 toList; // Lists for familiarity
    val result = 
      for { i <- ns if i*i % 2 == 0 } 
        yield (i*i)
    // result is a List[Int], List(4, 16, 36, ...) 
    ```

    在 Scala 中，for 理解是方法（可能是嵌套的）方法调用的语法糖：上面的代码（或多或少）等价于：

    ```
    ns.filter(i => i*i % 2 == 0).map(i => i*i) 
    ```

    基本上，任何带有`filter`, `map`,`flatMap` 方法（换句话说，一个*Monad*）的东西都可以用在 推导`for`式中来代替`ns`. 一个很好的例子是[Option monad](http://www.scala-lang.org/api/current/scala/Option.html)。这是前面的示例，其中相同的`for`语句同时适用于 monad`List`和`Option`monad：

    ```
    // (1)
    val result = 
      for { 
        i <- ns          // ns is a List monad
        i2 <- Some(i*i)  // Some(i*i) is Option
          if i2 % 2 == 0 // filter
      } yield i2

    // Slightly more contrived example:
    def evenSqr(n: Int) = { // return the square of a number 
      val sqr = n*n         // only when the square is even
      if (sqr % 2 == 0) Some (sqr)
      else None
    }

    // (2)
    result = 
      for { 
        i <- ns  
        i2 <- evenSqr(i) // i2 may/maynot be defined for i!
      } yield i2 
    ```

    在最后一个示例中，转换可能如下所示：

    ```
    // 1st example
    val result = 
      ns.flatMap(i => Some(i*i)).filter(i2 => i2 %2 ==0)

    // Or for the 2nd example
    result = 
      ns.flatMap(i => evenSqr(i)) 
    ```

    在 Slick 中，查询是一元的——它们只是带有`map`,`flatMap`和`filter`方法的对象。所以`for`理解（显示在`*`方法的解释中）只是转化为：

    ```
    val q = 
      Query(Bars).filter(b => b.id === 42).map(b => b.name ~ 1)
    // Type of q is Query[(String, Int)]

    val r: List[(String, Int)] = q.list // Actually run the query 
    ```

    如您所见，`flatMap`和`map`用于`filter`通过 每次调用and`Query`的重复转换来生成 a 。在集合的情况下，这些方法实际上迭代和过滤集合，但在 Slick 中它们用于生成 SQL。更多详细信息： [Scala Slick 如何将 Scala 代码转换为 JDBC？](https://stackoverflow.com/questions/13758445/how-does-scala-slick-translate-scala-code-into-jdbc/13758728#13758728)`Query(Bars)``filter``map`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T01:13:11.900

由于没有其他人回答，这可能有助于您入门。我不太了解 Slick。

从[Slick 文档](http://slick.typesafe.com/doc/0.11.2/lifted-embedding.html)中：

> **提升嵌入：**
> 
> 每个表都需要一个包含默认投影的 * 方法。这描述了从查询返回行（以表对象的形式）时返回的内容。Slick 的 * 投影不必与数据库中的投影相匹配。您可以根据需要添加新列（例如，计算值）或省略某些列。* 投影对应的非提升类型作为类型参数提供给 Table。对于简单的非映射表，这将是单列类型或列类型的元组。

换句话说，slick 需要知道如何处理从数据库返回的一行。您定义的方法使用它们的解析器组合器函数将您的列定义组合成可以在行上使用的东西。

# java - 如何平滑我的 JFrame 形状

> ID：13906687
> 
> 赞同：4
> 
> 时间：2012-12-16T23:51:44.003
> 
> 标签：java, shape

我给了我的 JFrame 窗口一个带有圆角的自定义形状，但我怎样才能平滑它（抗锯齿）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T23:56:13.203

很大程度上取决于您如何渲染内容，但基本概念是为`Graphics`您正在绘制的上下文提供渲染提示......

例如，如果我正在绘制一个组件，我可能会使用类似...

```
// Create a "copy" of the graphics context so we don't modify any of it's existing
// settings.  This makes it easier to manage the graphics context as we 
// may not want to effect anything else that might be using this graphics context
// into the future
Graphics2D g2d = (Graphics2D)g.create();
RenderingHints hints = new RenderingHints(
    RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON
);
g2d.setRenderingHints(hints);
//... continue drawing.
// Dispose of our "copy" of the graphics context
g2d.dispose(); 
```

查看[控制渲染质量](http://docs.oracle.com/javase/tutorial/2d/advanced/quality.html)了解更多详情

**更新了示例**

![在此处输入图像描述](../Images/cfe4cb34497753c23149c507bbd55612.png)

```
public class AATest {

    public static void main(String[] args) {
        new AATest();
    }

    public AATest() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new PaintPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class PaintPane extends JPanel {

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(215, 110);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            RenderingHints hints = new RenderingHints(
                    RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            g2d.setRenderingHints(hints);
            g2d.setColor(Color.RED);
            drawShape(g2d, 5, 5);
            g2d.dispose();
            g2d = (Graphics2D) g.create();
            g2d.setColor(Color.BLUE);
            drawShape(g2d, 110, 5);
            g2d.dispose();
        }

        protected void drawShape(Graphics2D g2d, int x, int y) {
            g2d.draw(new Ellipse2D.Float(x, y, 100, 100));
        }
    }
} 
```

**更新了新示例**

我使用的技巧之一是，我不使用“setShape”，而是简单地制作一个透明窗口并使用自定义面板为我提供我想要使用的形状。

![在此处输入图像描述](../Images/402c8edca9e905f07f4a548b5152a4af.png)

与此相关的主要问题是，您现在要负责确保将内容绘制在形状内...

```
public class ShapedWindow {

    public static void main(String[] args) {
        new ShapedWindow();
    }

    public ShapedWindow() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JWindow frame = new JWindow();
                frame.setBackground(new Color(0, 0, 0, 0));
                frame.setContentPane(new ShapedPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
                frame.setAlwaysOnTop(true);
            }
        });
    }

    public class ShapedPane extends JPanel {

        public ShapedPane() {

            setOpaque(false);
            setLayout(new GridBagLayout());

            JButton button = new JButton("Close");
            button.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    System.exit(0);
                }
            });

            add(button);

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g); //To change body of generated methods, choose Tools | Templates.
            Graphics2D g2d = (Graphics2D) g.create();
            RenderingHints hints = new RenderingHints(
                    RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            g2d.setRenderingHints(hints);
            g2d.setColor(getBackground());
            g2d.fill(new Ellipse2D.Float(0, 0, getWidth(), getHeight()));
            g2d.dispose();
        }
    }

} 
```

# django - 为什么我的 Django 自定义验证器失败了？

> ID：13906694
> 
> 赞同：0
> 
> 时间：2012-12-16T23:52:08.290
> 
> 标签：django, validation, django-admin, many-to-many

我正在尝试设计一个模型，该模型允许我安排活动（垒球比赛）并从更大的团队名册中创建比赛名册：

```
class Game(models.Model):
DateTime = models.DateTimeField()
opponent = models.CharField(max_length = 50, default="TBD")
players = models.ManyToManyField(Player, limit_choices_to={'id__in': Player.objects.filter(active='True')},blank=True) 
```

到现在为止还挺好。但我还想为玩家的 ManyToMany 字段添加一些自定义验证，以便游戏名册符合联盟关于最小和最大名册规模等的规则。

当我调用以下 clean() 方法时，我得到一个 ValueError 返回（'Game' 实例需要有一个主键值才能使用多对多关系。）：

```
def clean(self, *args, **kwargs):
    from django.core.exceptions import ValidationError
    #self.save()
    players_count = self.players.count()
    # Don't allow rosters with fewer than 9 players
    if players_count < 9:
        raise ValidationError('Rosters must have at least 9 players') 
```

如果我插入注释掉的 self.save，验证器会工作，但我最终会得到多个游戏条目。

我是新手——这是我的第一个非教程 Django 项目——所以我猜有一个相当简单的答案。我在这里和 Django 文档中四处寻找，并尝试了一些看起来很有希望的东西，但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T00:02:43.850

在 clean 方法中，您只想进行验证检查。因此，首先保存它是一个坏主意。因此，您可以从表单对象中获取 player 字段的值并对其运行验证。当您覆盖 form clean 方法时，请记住返回cleaned_data。

```
def clean(self, *args, **kwargs):
    from django.core.exceptions import ValidationError
    players = self.cleaned_data.get('players', [])
    players_count = len(players):
    # Don't allow rosters with fewer than 9 players
    if players_count < 9:
        raise ValidationError('Rosters must have at least 9 players')
    return self.cleaned_data 
```

# mysql - 在 MySQL CSV 导入中转义引号

> ID：13906699
> 
> 赞同：0
> 
> 时间：2012-12-16T23:53:31.077
> 
> 标签：mysql, phpmyadmin

我正在尝试使用以下命令将 CSV 加载到 MySQL 表中：

```
LOAD DATA LOCAL INFILE '/home/myfolder/tmp/data.csv' REPLACE INTO TABLE `markers` FIELDS TERMINATED BY ';' ENCLOSED BY '"' ESCAPED BY '\\' LINES TERMINATED BY '\r\n'# 2 rows affected. 
```

但是，当脚本到达第 44 行时，它会停止运行（CSV 文件中有超过 300 条记录）。第 44 行包含一个带有代理备注的字段，并且恰好包含带有引号的文本。我怎样才能逃避这些引用？

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-16T23:56:39.393

字段值中出现的`ENCLOSED BY`字符通过在字符前面加上前缀来进行转义`ESCAPED BY`。

或者，`ENCLOSED BY`字段值中字符的出现次数可以加倍，并被解释为字符的单个实例。

例子：

```
"The \"quoted\" string"
"The ""quoted"" string" 
```

# xamarin.ios - 设置最小/最大 Monotouch.Dialog.TimeElement

> ID：13906705
> 
> 赞同：1
> 
> 时间：2012-12-16T23:54:29.190
> 
> 标签：xamarin.ios, monotouch.dialog

时间元素是否可以强制最小值和最大值？例如，只能向后滚动 5 分钟并向前滚动 10 分钟？

我想设置这些值，但在文档和 api 方面找不到任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:34:21.560

您可以继承 TimeElement 类并覆盖 CreatePicker 函数，例如

```
class MyClass : TimeElement
{
    public MyClass(string caption, DateTime date) : base(caption, date)
    {
    }

    public override UIDatePicker CreatePicker()
    {
        var uiDatePicker = base.CreatePicker();
        uiDatePicker.MaximumDate = DateTime.UtcNow;
        uiDatePicker.MinimumDate = DateTime.UtcNow.AddDays(-1);
        return uiDatePicker;
    }
} 
```

# php - Authorize.Net CIM 尝试创建配置文件并一个接一个地进行交易

> ID：13906707
> 
> 赞同：1
> 
> 时间：2012-12-16T23:54:58.857
> 
> 标签：php, xml, authorize.net, authorize.net-cim

我正在使用 John Conde 为 Authorize.Net 制作的[AuthnetXML](https://github.com/stymiee/Authorize.Net-XML)类。我正在尝试为使用的用户创建一个`profileID`和一个，然后如果创建，我将新创建的和应用到并尝试完成交易。`paymentprofileid``createCustomerProfileRequest``customerprofileid``customerpaymentprofileid``createCustomerProfileTransactionRequest`

当它第一次通过时 帐户已创建，但页面像坏了一样变白，然后我单击`f5`以通过它并正常通过。它的构建方式是如果用户已经拥有 ID，我会绕过第一部分。（创建配置文件）我觉得它不会让我一个接一个地对 api 进行两次调用，或者该帐户可能需要一分钟才能在服务器上传播？

有没有人遇到过这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T01:43:52.920

我见过这样的事情。我举了一个例子，或多或少地做了你想做的事情并且没有遇到任何问题，所以我在这里发布了你的代码来比较你的代码。希望对您有所帮助：

```
<?php

    require('../../config.inc.php');
    require('../../AuthnetXML.class.php');

    $xml = new AuthnetXML(AUTHNET_LOGIN, AUTHNET_TRANSKEY, AuthnetXML::USE_DEVELOPMENT_SERVER);
    $xml->createCustomerProfileRequest(array(
        'profile' => array(
            'merchantCustomerId' => '87658',
            'email' => 'user@example.com',
            'paymentProfiles' => array(
                'billTo' => array(
                    'firstName' => 'John',
                    'lastName' => 'Smith',
                    'address' => '123 Main Street',
                    'city' => 'Townsville',
                    'state' => 'NJ',
                    'zip' => '12345',
                    'phoneNumber' => '800-555-1234'
                ),
                'payment' => array(
                    'creditCard' => array(
                    'cardNumber' => '4111111111111111',
                    'expirationDate' => '2016-08',
                    ),
                ),
            ),
            'shipToList' => array(
                'firstName' => 'John',
                'lastName' => 'Smith',
                'address' => '123 Main Street',
                'city' => 'Townsville',
                'state' => 'NJ',
                'zip' => '12345',
                'phoneNumber' => '800-555-1234'
            ),
        ),
        'validationMode' => 'liveMode'
    ));

    $profile_id          = $xml->customerProfileId;
    $payment_profile_id  = $xml->customerPaymentProfileIdList->numericString;
    $shipping_profile_id = $xml->customerShippingAddressIdList->numericString;

    $xml = new AuthnetXML(AUTHNET_LOGIN, AUTHNET_TRANSKEY, AuthnetXML::USE_DEVELOPMENT_SERVER);
    $xml->createCustomerProfileTransactionRequest(array(
        'transaction' => array(
            'profileTransAuthCapture' => array(
                'amount' => '10.95',
                'customerProfileId' => $profile_id,
                'customerPaymentProfileId' => $payment_profile_id,
                'customerShippingAddressId' => $shipping_profile_id,
                'order' => array(
                    'invoiceNumber' => 'INV000001',
                    'description' => 'description of transaction',
                    'purchaseOrderNumber' => 'PONUM000001'
                ),
                'taxExempt' => 'false',
                'recurringBilling' => 'false',
                'cardCode' => '000'
            )
        ),
        'extraOptions' => '<![CDATA[x_customer_ip=100.0.0.1]]>'
    ));

    echo $xml;
?> 
```

这是来回发送的 XML：

**createCustomerProfileRequest**

```
<?xml version="1.0"?>
<createCustomerProfileRequest>
  <merchantAuthentication>
    <name>cnpdev4289</name>
    <transactionKey>SR2P8g4jdEn7vFLQ</transactionKey>
  </merchantAuthentication>
  <profile>
    <merchantCustomerId>87658</merchantCustomerId>
    <email>user@example.com</email>
    <paymentProfiles>
      <billTo>
        <firstName>John</firstName>
        <lastName>Smith</lastName>
        <address>123 Main Street</address>
        <city>Townsville</city>
        <state>NJ</state>
        <zip>12345</zip>
        <phoneNumber>800-555-1234</phoneNumber>
      </billTo>
      <payment>
        <creditCard>
          <cardNumber>4111111111111111</cardNumber>
          <expirationDate>2016-08</expirationDate>
        </creditCard>
      </payment>
    </paymentProfiles>
    <shipToList>
      <firstName>John</firstName>
      <lastName>Smith</lastName>
      <address>123 Main Street</address>
      <city>Townsville</city>
      <state>NJ</state>
      <zip>12345</zip>
      <phoneNumber>800-555-1234</phoneNumber>
    </shipToList>
  </profile>
  <validationMode>liveMode</validationMode>
</createCustomerProfileRequest>

<?xml version="1.0" encoding="utf-8"?>
<createCustomerProfileResponse>
  <messages>
    <resultCode>Ok</resultCode>
    <message>
      <code>I00001</code>
      <text>Successful.</text>
    </message>
  </messages>
  <customerProfileId>11234435</customerProfileId>
  <customerPaymentProfileIdList>
    <numericString>10232106</numericString>
  </customerPaymentProfileIdList>
  <customerShippingAddressIdList>
    <numericString>10454653</numericString>
  </customerShippingAddressIdList>
  <validationDirectResponseList>
    <string>1,1,1,This transaction has been approved.,0ZSYP6,Y,2180917446,none,Test transaction for ValidateCustomerPaymentProfile.,0.00,CC,auth_only,87658,John,Smith,,123 Main Street,Townsville,NJ,12345,,800-555-1234,,user@example.com,,,,,,,,,0.00,0.00,0.00,FALSE,none,CE4F0E75B0703C40FE109A7B0B2E0575,,2,,,,,,,,,,,XXXX1111,Visa,,,,,,,,,,,,,,,,</string>
  </validationDirectResponseList>
</createCustomerProfileResponse> 
```

**createCustomerProfileTransactionRequest**

```
<?xml version="1.0"?>
<createCustomerProfileTransactionRequest>
  <merchantAuthentication>
    <name>cnpdev4289</name>
    <transactionKey>SR2P8g4jdEn7vFLQ</transactionKey>
  </merchantAuthentication>
  <transaction>
    <profileTransAuthCapture>
      <amount>10.95</amount>
      <customerProfileId>11234435</customerProfileId>
      <customerPaymentProfileId>10232106</customerPaymentProfileId>
      <customerShippingAddressId>10454653</customerShippingAddressId>
      <order>
        <invoiceNumber>INV000001</invoiceNumber>
        <description>description of transaction</description>
        <purchaseOrderNumber>PONUM000001</purchaseOrderNumber>
      </order>
      <taxExempt>false</taxExempt>
      <recurringBilling>false</recurringBilling>
      <cardCode>000</cardCode>
    </profileTransAuthCapture>
  </transaction>
  <extraOptions>&lt;![CDATA[x_customer_ip=100.0.0.1]]&gt;</extraOptions>
</createCustomerProfileTransactionRequest>  

<?xml version="1.0" encoding="utf-8"?>
<createCustomerProfileTransactionResponse>
  <messages>
    <resultCode>Ok</resultCode>
    <message>
      <code>I00001</code>
      <text>Successful.</text>
    </message>
  </messages>
  <directResponse>1,1,1,This transaction has been approved.,S6HDI6,Y,2180917449,INV000001,description of transaction,10.95,CC,auth_capture,87658,John,Smith,,123 Main Street,Townsville,NJ,12345,,800-555-1234,,user@example.com,John,Smith,,123 Main Street,Townsville,NJ,12345,,,,,FALSE,PONUM000001,F0FA82F73AA206A4D7D956E98AF97725,P,2,,,,,,,,,,,XXXX1111,Visa,,,,,,,,,,,,,,,,,10454653,100.0.0.1]]&gt;</directResponse>
</createCustomerProfileTransactionResponse> 
```

# jquery - jQuery模糊除了某些元素

> ID：13906709
> 
> 赞同：3
> 
> 时间：2012-12-16T23:55:44.177
> 
> 标签：jquery, blur

我在[这里](http://jsfiddle.net/trevanhetzel/GzmrS/2/)设置了一个 jsFiddle ，代码如下。

我只有一个文本区域，它在焦点上添加了一个类，在模糊时它被删除了。该类通过设置高度 css 属性使 textarea 扩展，因此当您单击按钮提交表单时，我不希望它删除该类，因为它看起来很尴尬。

**HTML**

```
<div class="comment_display">
    <form>
        <textarea class="addcomment"></textarea>
        <input class="tagbtn" type="submit" value="Comment" />
    </form>            
</div>​ 
```

**CSS**

```
.addcommentOn {
    height: 100px;
}​ 
```

**Javascript**

```
// Lengthen the Discussion input on click
  $(function lengthenInput() {
    $(".addcomment").focus(function() {
        $(this).addClass("addcommentOn");
    });

    $(".addcomment").blur(function() {
        if ($("input.comment").data('clicked') != true) {
            $(this).removeClass("addcommentOn");
        }
    });
  });​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T00:32:24.307

尝试与模糊作斗争并不容易，因为它发生在另一个元素上的任何鼠标事件之前

如果您希望文本区域在用户离开表单时缩小，这里有一个需要额外修改的概念。将`blur`处理程序替换为以下内容：

```
$('form').on('click', function(evt) {
    var $tgt = $(evt.target);
     if ($tgt.is('input[type="submit"]') || $tgt.is('.addcommentOn')  ) {
          return;
      }else{
           $('.addcommentOn').not($tgt).removeClass("addcommentOn");
      }
}) 
```

编辑：还需要再次修改`focus`处理程序，将更多元素添加到表单中：

```
 $(".addcomment").focus(function() {
    $('.addcommentOn').removeClass('addcommentOn');
    $(this).addClass("addcommentOn");

}); 
```

演示（更新）：http: [//jsfiddle.net/GzmrS/38/](http://jsfiddle.net/GzmrS/38/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T22:27:45.377

Charlietfl 的回答很好，但是还有另外两种方式可以调用模糊事件：如果您转到浏览器中的另一个选项卡，或者如果您点击`tab`转到下一个输入。你可以在这里看到我的解决方案和代码片段：

[https://stackoverflow.com/a/32596535/1895428](https://stackoverflow.com/a/32596535/1895428)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-11-01T12:26:51.930

[https://i.stack.imgur.com/2qfhd.jpg](https://i.stack.imgur.com/2qfhd.jpg)

由于孩子引起的事件传播，该错误正在引发。只是阻止它。由于孩子引起的事件传播，该错误正在引发。只是阻止它。由于孩子引起的事件传播，该错误正在引发。只是阻止它。

# c# - 根据 ASP MVC 表中的选定项动态创建链接

> ID：13906710
> 
> 赞同：0
> 
> 时间：2012-12-16T23:55:52.797
> 
> 标签：c#, javascript, asp.net-mvc, asp.net-mvc-4

> **可能重复：**
> [如何在表格 ASP.NET MVC4 中执行简单的多选](https://stackoverflow.com/questions/13869533/how-to-perform-a-simple-multiple-selection-in-a-table-asp-net-mvc4)

我有一个项目表。每一行都可以通过行中的复选框进行选择。我有一个“复制”按钮，允许用户复制选定的行并从中创建新实体。

为了处理这种情况，我在我的控制器上有一个动作，它接受一个实体 ID 列表。如何使用包含所选项目 ID 的参数列表动态创建指向控制器的链接？

我尝试使用 Javascript 来识别选定的行，但我不确定如何构造链接的参数列表。

# javascript - VLC 流“更改 src onclick”javascript 代码可以听到声音/看不到视频

> ID：13906719
> 
> 赞同：5
> 
> 时间：2012-12-16T23:56:44.077
> 
> 标签：javascript, stream, innerhtml, vlc

我正在尝试将 vlc 播放器（版本 1.1.8、直播、Internet Explorer）添加到我的网页，并让用户能够通过单击其中一个按钮来更改频道。

```
<object type="application/x-vlc-plugin" 
id="vlcplayer" 
width="720px"
height="540px" 
classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921"> 
<param name="Src" value= "udp://@239.0.10.115:1234">  
<param name="volume" value="100" />
<param name="autoplay" value="true" />
<param name="loop" value="false" />
<param name="fullscreen" value="true" />
</object> 
```

上面的代码工作正常，我可以听到和看到视频，但我不知道如何在单击时更改 Src 值（udp/通道）。我尝试使用以下代码：

```
document.getElementById('vlcplayer').src = 'udp://@239.0.10.105:1234' 
```

但这不起作用，因为 .src 似乎未定义。

Q1。有没有办法改变对象的src？请问我可以举个例子吗？

我找不到方法，所以每当单击频道按钮时，我都会使用 src 作为变量在 javascript 中创建对象：

```
uri = 'udp://@239.0.10.115:1234';
VLCPlayerObject = '<object type="application/x-vlc-plugin" id="vlcplayer" width="720px"height="540px" classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921"> <param name="Src" value= '+uri+'> <param name="volume" value="100" /><param name="autoplay" value="true" /><param name="loop" value="false" /><param name="fullscreen" value="true" /></object>'; 
document.getElementById('videoDisplayDivID').innerHTML=VLCPlayerObject; 
```

然而，这段代码的问题是我看不到视频，但我能听到它，而且我能听到频道的变化。

Q2。这是一些软件问题还是我的编码错误？我如何解决它？

**更新**

我尝试在新的测试版本中进行以下更改

在对象中我添加了一个 id：

```
<param name="Src" value= "udp://@239.0.10.112:1234"> 
```

改为

```
<param name="Src" value= "udp://@239.0.10.112:1234" id ="videoSrc"> 
```

然后在javascript代码中：

```
var temp = document.getElementById("videoSrc").getAttribute("value");
alert("old udp: " + temp);

var sourceParameter= document.getElementById("videoSrc");
sourceParameter.setAttribute("value", "udp://@239.0.10.115:1234");

var temp2 = document.getElementById("videoSrc").getAttribute("value");
alert("new udp: " + temp2); 
```

此代码确实显示了 udp，并且它表明 udp 在函数运行后确实发生了变化。但是，尽管 udp 更改了视频，但由于某种原因实际上并没有切换到该频道。（我已经检查过频道是否不同）

Q3。如何让视频也更新？

**已回答**

向播放列表添加了一个项目（原始 src 值设置为播放列表项目 0 btw）

```
var vlc = document.getElementById("vlcplayer");
vlc.playlist.add("udp://@239.0.10.115:1234");
vlc.playlist.playItem(1); 
```

现在我只需要正确编码它以适用于每个频道。

# c# - 如何在 tr 中使用 visible=<%# ShowOrHide %>？

> ID：13906720
> 
> 赞同：0
> 
> 时间：2012-12-16T23:56:45.053
> 
> 标签：c#, asp.net, .net, vb.net, asp.net-3.5

在 aspx 页面中，我将表格作为容器，并且 tds 中有不同的中继器。

我知道 table 不是数据绑定控件，但想知道可能有一种方法可以使用 dt 中的数据来控制 tr 或任何其他 html 控件的可见性？

我刚刚尝试了 Page.Databind() 但它没有成功并且出现错误“表不是数据绑定控件”

请指导。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:05:09.060

您应该使用 DISPLAY 属性来确保隐藏的行不会留下空白，而不是 VISIBLE 属性。

在不知道或看到您的代码块的情况下，很难再猜测，但是如果您使用“显示”或“隐藏”作为决定是否显示或隐藏一行......

也许您的代码应如下所示.....

```
<tr <%=GetDisplayStatus('switch') %>> 
```

其中 switch 是“显示”或“隐藏”，并且您获取显示状态的 SERVERSIDE 函数应如下所示。

```
Function GetDisplayStatus(SwitchState as String) as String
  If SwitchState = "show" then
    return " style=" & chr(34) & "display: block;" & chr(34)
  ElseIf SwitchState = "hide" Then
    return " style=" & chr(34) & "display: none;" & chr(34)
  Else
    ' no action otherwise
    return ""
  End If
End Function 
```

请让我知道这是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:21:20.017

使用 ASP.Net 时，重要的是要知道哪些属性由服务器处理，哪些是 html。使用`<%#`标签时，表达式中的值会直接写入 Web 服务器的响应流。此时分配给服务器属性为时已晚。可见是一个服务器属性。

# css - 使用 ul li 标签引导 css 水平滚动

> ID：13906721
> 
> 赞同：5
> 
> 时间：2012-12-16T23:56:47.987
> 
> 标签：css, twitter-bootstrap, scrollbar, horizontal-scrolling

我正在尝试使用引导程序进行水平滚动，但我无法让它水平滚动。我的`li`标签只是没有按应有的方式包装（它正常包装）。

HTML：

```
<div class="container suggest">
  <ul class="thumbnails bsuggest" >
    <li class="span2">
     text goes here
    </li>
  </ul>
</div> 
```

CSS：

```
.bsuggest
{
    overflow-x:scroll;
    overflow-y:hidden;
    height:250px;
    white-space:nowrap; !important
    width:100%;
}
.bsuggest li
{
    float:left;
    display:inline-block;
    *dsplay:inline;/* For IE7*/
    *zoom:1;/* For IE7*/
    white-space:normal;
}
.suggest
{
    width:100%;
    position:relative;
    margin-top:95px;
} 
```

我想我已经做了它应该做的事？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-08T13:26:26.170

在 Bootstrap **2**中，您必须覆盖一些`span*`样式。

`ul`元素必须得到这个 css ：

```
ul.your-horizontal-list {
    white-space: nowrap;
    overflow-x: auto;
}

ul.your-horizontal-list li[class*="span"] {
    display: inline-block;
    float: none;
} 
```

这是一个[工作演示](http://jsfiddle.net/harianus/Bn4BE/)。

确保在引导 CSS 之后加载您的 CSS。

编辑：将其命名为 Bootstrap 2，在 Bootstrap 3 中您可能需要替换`span`为`col-...`或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T00:03:52.290

`white-space:nowrap; !important`需要在`.bsuggest`上线`!important`前`;`

像这样`white-space:nowrap !important;`

# php - PHP字符串比较单引号和双引号有区别吗？

> ID：13906723
> 
> 赞同：0
> 
> 时间：2012-12-16T23:56:52.423
> 
> 标签：php

这是一个简单但棘手的

问题是以下两个 IF 语句比较是否有不同（注意引号）

```
if ($retry_type == 'new') 
```

和

```
if ($retry_type == "new") 
```

我知道两者之间有区别

```
printf("something $var") 
```

和

```
printf('something $var') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:59:12.563

考虑以下示例：

```
var_dump('new' === "new"); 
```

运行。检查它。回答你自己的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T23:58:39.313

没有。字符串是字符串。

唯一的例外是，如果你使用双引号，你也可以抛出 $variables。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T00:10:08.780

在您的示例中，没有区别。

但是，除了插入变量的能力之外，还有另一个区别：在单引号字符串中，唯一表示任何含义的转义序列是`\'`and `\\`。所有其他都被忽略；例如，`'\n'`实际上由反斜杠和“n”组成，而`"\n"`被解释为换行符。

# c++ - 使用虚函数声明从基类派生的对象时出现错误 c2143 & c4430

> ID：13906724
> 
> 赞同：1
> 
> 时间：2012-12-16T23:56:54.013
> 
> 标签：c++, sdl

这是我第一次在 stackoverflow 上发帖，所以希望这是遵守所有礼仪！

我正在尝试使用 SDL 1.x 扩展库在 C++ 中创建和实现一个按钮类，以便与使用有限状态机的个人项目一起使用。我有一个带有虚函数的基类，“Button”，一个从 Button 派生的类，“MenuButton”，以及一个试图创建 MenuButtons 的“Title”状态。

我正在使用 Microsoft Visual Studio 2012，Intellisense 说我的代码是正确的。但是，当我尝试编译时，我收到以下两个错误：

> title.h(35)：错误 C2143：语法错误：缺少 ';' 前 '*'
> 
> title.h(35)：错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数

我花了几个小时试图自己找出问题所在。我搜索了谷歌，也一直在搜索 stackoverflow，但是虽然我已经看到并阅读了许多其他类似问题的帖子，但似乎没有一个与我有同样的问题。

根据其他人发布的其他类似问题以及他们接受的答案，我已经搜索过：#include 循环问题，确保类声明有一个 final ;，并确保包含所有#includes（我知道） .

代码片段如下，如果有人能告诉我如何解决这个问题，我将不胜感激。

谢谢你

Button.h（基类）

```
#ifndef BUTTON_H
#define BUTTON_H

#include "SDL.h"
#include "SDL_image.h"
#include "SDL_ttf.h"
#include "Functions.h"
#include "Globals.h"
#include "Constants.h"
#include <string>

using namespace std;

class Button
{
public:
    virtual void handleEvents() = 0;

    virtual void render() = 0;

    //virtual ~Button(void){};
protected:
    //Our enumerated type
    const enum mouseStates {CLIP_MOUSEOUT, CLIP_MOUSEOVER, CLIP_MOUSEDOWN, CLIP_MOUSEUP};

    //Our rect to hold the offsets and size of the button
    SDL_Rect button;

    //Array of rects to hold the dimensions of each clip from the sprit sheet
    SDL_Rect clips[4];

    //Holds the location and size of the clip to show from sprite sheet
    SDL_Rect *clip;

    //The sprite sheet surface from which we clip the button images
    SDL_Surface *buttonSpriteSheet;

    //The surface for our button text
    SDL_Surface *buttonSurfaceText;

    //The text for our button
    string buttonText;

    //The state the button will lead to when clicked
    GameStates targetState;

    //Whether we are moused over the button
    bool mouseOver;
};

#endif 
```

MenuButton.h（派生类）

```
#ifndef MENUBUTTON_H
#define MENUBUTTON_H

#include "button.h"

using namespace std;

class MenuButton :
    public Button
{
public:
    MenuButton(void);

    MenuButton(int x, int y, int w, int h, string text, GameStates state);

    void handleEvents();

    void render();

    ~MenuButton(void);
};

#endif 
```

Title.h（创建按钮并抛出错误的状态）

```
#ifndef TITLE_H
#define TITLE_H

#include "GameState.h"
#include "SDL.h"
#include "SDL_image.h"
//#include "SDL_Mixer.h"
#include "Functions.h"
#include "Globals.h"
#include "Constants.h"
#include "MenuButton.h"
#include <iostream>
#include <string>

using namespace std;

class Title :
    public GameState
{
public:
    Title(void);

    //Handles intro events
    void handleEvents();

    //Handles intro logic
    void logic();

    //Handles intro rendering
    void render();

    ~Title(void);
private:
    SDL_Surface *background;
    MenuButton *testButton; //NOTE: This is the line throwing the errors
    //Mix_Music *music;
};

#endif 
```

感谢您的帮助！~<3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:24:48.860

It seems the compiler doesn't know what `MenuButton` is. One reason this may be the case is that `MENUBUTTON_H` is also defined by another header. More likely, something like `Globals.h` also included `"title.h"`, i.e., you have a dependency loop in your system. If you know about classes being cyclically dependent, you are best off removing the cycles. There are many ways to do that. Even if you currently think you need the cyclic dependency, it is not good and probably not required (the book "Large Scale C++ Design" by John Lakos contains a lot of information on how to break dependency cycles).

If you don't know where the cycle is coming from, I recommend using the `-E` (or `/E`) flag with your compiler: This option normally yields the translation unit after it got preprocessed. It will contain indications on which file was entered in some form. How the preprocessed output looks like depends on the compiler but you'll be able to see what the compiler gets to see and you can probably track down why `MenuButton` isn't declared.

As an easy way out you can also make sure that `MenuButton` is declared: To form a pointer, you don't need its definition. It is sufficient that you have seen a definition by the time you actually access the pointer. A declaration would look something like this:

```
class MenuButton; 
```

.. and can be repeated in each translation unit using `MenuButton` to declare pointer or reference members for `MenuButton`. You can even declare functions returning or passing `MenuButton` by value with just a declaration. Of course, when you want to actually use the type, you'd need to see its definition.

# macos - 如何检测 ASyncSocket 中的远程断开连接

> ID：13906725
> 
> 赞同：1
> 
> 时间：2012-12-16T23:57:02.353
> 
> 标签：macos, cocoa, sockets, networking, asyncsocket

我在 Cocoa 上使用 ASyncSocket，但是当远程主机断开连接时，我没有收到 onSocketDidDisconnect 事件（可能每 5 次测试一次）。-isConnected 方法返回 TRUE。
如何检测远程主机断开连接？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-17T12:03:06.167

如果没有读入队列，AsyncSocket 将不会报告远程对等方的断开连接。我认为这是 CFStream 本身的一个错误（不要引用我的话）。通过阅读总是排队，我们似乎相处得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T17:44:22.840

我是如何实现这一点的，所有客户每 x 秒或每分钟注册一次。如果客户端断开连接，则不再注册，因此我认为它未连接。

# c# - 无法写入数据库 - 怎么了？

> ID：13906726
> 
> 赞同：-2
> 
> 时间：2012-12-16T23:57:20.450
> 
> 标签：c#, sql, database, ms-access

嘿伙计们，我正在尝试写入数据库，但它不起作用。我的数据库有 4 个字段，ID、A、B 和 C。它们都是 TEXT 类型，数据库表是 Table1。

这是我的代码，你能找出我的错吗？

```
 //TEMP

            int ax = 10;
            int bx = 20;
            int cx = 30;

            // WRITE TO DATABASE

            // Create the database connections
            string testConnString = (@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\kronix\Documents\users.accdb");
            OleDbConnection testDBConn = new OleDbConnection(testConnString);

            //  Populate users database into user / pass lists and compare login credentials
            try
            {
                OleDbCommand cmd = new OleDbCommand();

                cmd.CommandType = CommandType.Text;
                cmd.CommandText = "INSERT INTO Table1 (A, B, C) VALUES (@test1, @test2, @test3)";

                // add named paramaters
                cmd.Parameters.AddRange(new OleDbParameter[]
                {
                    new OleDbParameter("@test1", ax),
                    new OleDbParameter("@test2", bx),
                    new OleDbParameter("@test3", cx),

                });

                cmd.Connection = testDBConn;
                testDBConn.Open();
                cmd.ExecuteNonQuery();
                MessageBox.Show("DONE!");
                testDBConn.Close();

            }
            catch (Exception ex)
            {
                Console.Write("ERROR 101: Unable to complete database entry\n");
            }
        } 
```

在过去的 2 个小时里，这已经让我爬墙了....任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T00:00:23.023

Arrrrgghhhh，好的，所以发现我的问题是我访问了错误的数据库。真是个傻小子。无论如何，希望这能以某种方式帮助某人......即使你只是得到一个“呃！另一个新手！” 笑出声来。

多谢你们！

# node.js - 需要帮助使用 nodejs 设置 reddit oauth

> ID：13906730
> 
> 赞同：2
> 
> 时间：2012-12-16T23:58:19.350
> 
> 标签：node.js, oauth, reddit

我已经为此苦苦挣扎了几天，Reddit API 文档并没有为我提供使用 node.js 获得 oauth 访问所需的洞察力。我在 Reddit 上注册了我的应用程序并输入了 'http://localhost:3000/authorize' 作为我的 redirect_ URL，因为这是用于测试的。Reddit 然后为我提供了一个消费者密钥和秘密。我不知道从这里去哪里。据我所知，我必须以某种方式将浏览器重定向到“https://ssl.reddit.com/api/v1/authorize”并提供我的 consumer_key 和 secret。然后用户可以登录，并被重定向回我的演示站点。我需要的是一个小指南或演示，我可以学习以了解如何使用 node.js 设置整个过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T00:07:07.337

[这是 npm 模块， passport-reddit](https://npmjs.org/package/passport-reddit)。

# mongodb - MongoEngine GenericReferenceField 高级查询

> ID：13906734
> 
> 赞同：0
> 
> 时间：2012-12-16T23:58:41.557
> 
> 标签：mongodb, mongoengine

概述：

我的用户文档引用了带有 FileFields 的图像文档。您不能使用 FileField 对对象进行深度复制（为什么不呢？）。深度复制用户文档会取消引用关联的图像（使用 FileField），因此会失败。

* * *

我正在尝试使用 MongoEngine (0.7.8) 查询一个集合，如果我这样查询：

```
 >>> cls.objects(Q(author=devin_user))
    [<FollowUserEvent: [<User: Devin> => <User: Strike>]>]
    # Querying author works fine

    >>> cls.objects(Q(parent=strike_user))
    [<FollowUserEvent: [<User: Devin> => <User: Strike>]>]
    # Querying parent works fine

    >>> cls.objects(Q(parent=strike_user) & Q(author=devin_user))
    *** TypeError: 'Collection' object is not callable. If you meant to call the '__deepcopy__' method on a 'Collection' object it is failing because no such method exists.
    # Definitely fails here, but why?

    # Even stranger, if I combine a query on parent and hidden_at it succeeds, but if I combine a query on author and hidden_at it gloriously fails
    >>> cls.objects(Q(parent=strike_user) & Q(hidden_at=None))
    [<FollowUserEvent: [<User: Devin> => <User: Strike>]>]
    # Querying parent works fine

    >>> cls.objects(Q(author=devin_user) & Q(hidden_at=None))
    *** TypeError: 'Collection' object is not callable. If you meant to call the '__deepcopy__' method on a 'Collection' object it is failing because no such method exists.
    # Boom! 
```

stroke_user 和 devin_user 是两个用户文档。这是 Event 的样子（顺便说一下，它确实允许继承）。

```
 class Event(Document):                                             
       """                                                            
       :param anti: tells if an event is related to an inverse event  
           e.g. follow/unfollow, favorite/unfavorite                  
       :param partner: relates an anti-event to an event.             
           only set on the undoing event                              
       """                                                            
       author = GenericReferenceField(required=True)                  
       parent = GenericReferenceField(required=True)                  
       created_at = DateTimeField(required=True, default=datetime.now)
       hidden_at = DateTimeField()                                    

       anti = BooleanField(default=False)                             
       partner = ReferenceField('Event', dbref=False)                 
       meta = {                                                       
           'cascade': False,                                          
           'allow_inheritance': True }

       def __repr__(self):
           action = "=/>" if self.anti else "=>"
           return "<%s: [%s %s %s]>" % (self.__class__.__name__,
               self.author.__repr__(), action, self.parent.__repr__()) 
```

对我来说似乎是一个错误，但我很想听到反馈:)

* * *

更新：

似乎 mongoengine/queryset.py:98 调用了 copy.deepcopy。这遵循一个 ReferenceField，并尝试复制它的 FileField 数据。不幸的是，这不起作用。

```
 Class Image(Document):
        file = FileField(required=True)

    Class User(Document):
        name = StringField()
        image = ReferenceField('Image')

    >>> copy.deepcopy(user)
    *** TypeError: 'Collection' object is not callable. If ...

    >>> user.image = None
    >>> copy.deepcopy(user)
    <User: Devin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:34:27.303

事实证明，这是一个错误！我在概述中所说的是正确的。[错误状态

有用的网址：

[错误状态](https://github.com/MongoEngine/mongoengine/issues/198)

[邮件列表讨论](https://groups.google.com/forum/?fromgroups=#!topic/mongoengine-users/4S3ITUE7K5s)

# c# - 静态与非静态方法和成员交互

> ID：13906735
> 
> 赞同：1
> 
> 时间：2012-12-16T23:58:56.110
> 
> 标签：c#, asp.net, session-variables, static-methods, webmethod

我有一个`WebMethod` 服务于 Ajax 自动完成扩展器的数据源。

`FontnmsList_AutCpltDataSrc()`

所以它必须是`static`......除非我将通过另一种方法来实现它......例如`Web Service`，因为我不想使用，实际上，这不是这里的问题。

所以......作为一个**静态方法**，它需要与当前应用程序的其余数据协同工作......这**不是静态**的......这里有一个小问题......

现在，正如我被建议一般**不要使用静态**（指的是`asp.net`），并且在尝试遵循该建议时，

我可以看到，为了允许与之交互...... web 方法有点引导我将所有其他应用程序元素/数据类型和方法转换为使用`static`修饰符，例如，

这是我在当前项目中遇到的一个例子。

```
// non static 
public SeSn.CurrentSesionVariablsTmplt ExtractSesnVar()
{
    SeSn.CurrentSesionVariablsTmplt RetrndAppGlobals = SeSn.GetValueAS.ACloneOfGlobalsObj("_CurrentSesionGlobals");
    return (SeSn.CurrentSesionVariablsTmplt)RetrndAppGlobals ;

} 
```

现在这是负责自动完成扩展器的 Web 方法

```
public static List<string> FntsList = new List<string>();

[System.Web.Script.Services.ScriptMethod()]
[System.Web.Services.WebMethod(EnableSession = true)]

public static List<string> FontnmsList_AutCpltDataSrc(string prefixText)
{ 

    if (ExtrctSesnVar().Fntlist != null)
    { 
        //here too , non of these are , except for the List of course
        FntsList = RflectMeths.ClassFldsAsList<fntNams>();
        CurrSesnDatabag.Fntlist = FntsList;
        SeSn.Modify(Act.Add, App.VarNms._CurrentSesionGlobals, CurrSesnDatabag);
    }
    else
        FntsList = ExtractSesnVar().Fntlist;

    return AutoComplete.FromListStr(prefixText, FntsList);
} 
```

`ExtractSesnVar()`所以在里面工作需要一个非静态的

一个`static`网络方法`FontnmsList_AutCpltDataSrc()`范围。

所以这让我想知道......我在这里缺乏什么基本知识（我的意思是，当你开始学习 .net 时，你有没有进入这个路口？

至于所谓的 SO A Real Question ：

作为这种情况的解决方案的解决方法是什么，（它只是一个例子。因为应该有许多其他像这样的“路口”，你可以想出）

我应该认为应该有某种方式，`bridge`在这两个实体之间，在写作时我可以考虑传入非静态数据作为参数，

**所以我在这里想念什么。对于上面的 subjetced 代码，正确的解决方案是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:14:12.987

我假设您在问：如何从静态方法调用实例方法？

只有3个选项：

1.  您可以创建具有所需方法的对象的单个静态实例。这仅在此实例可以重置或不保持任何状态时才有效。
2.  您在每次调用时创建一个新实例并使用它。
3.  让一切静止。（不建议）

有时，实例方法只需要来自实例的 1 条或 2 条状态信息，在这些情况下，将它们转换为静态并让实例方法使用额外的状态信息调用静态方法会更容易。检查是否是这种情况。

例如，假设您有一个非常简单的类，如下所示：

```
public class something
{
  public int One { get;set; }
  public int Two { get;set; }

  public int Add()
  {
    return One + Two;
  }
} 
```

并且您有一个需要调用 Add 的静态方法，您可以将上面的代码重构为下面的代码，这样您就不必再在静态方法中创建实例，但仍将 Add 逻辑放在一个地方：

```
public class something
{
  public int One { get;set; }
  public int Two { get;set; }

  public int Add()
  {
    return Add(One, Two);
  }

  internal static int Add(int one, int two) 
  {
    return one + two;
  }
} 
```

我选择将静态 Add 方法设置为内部方法，因此只有您的程序集和朋友程序集中的其他类可以调用它。如果在您的场景中有意义，请随时将其公开。

这些都不是理想的，但在你的情况下可能是值得的。YMMV。

# java - 使用 apache 库创建 sshd 服务器需要我更改命令服务器端，但如果我连接到另一个 ssh 服务器，它就可以工作

> ID：13906736
> 
> 赞同：0
> 
> 时间：2012-12-16T23:58:57.130
> 
> 标签：java, git, ssh, sshd, copssh

要求：编写我自己的 ssh 服务器，允许使用 ssh 协议和我的 ssh 服务器`msysgit`进行通信。我在 Windows 7 上运行。`pull``push`

使用`git remote`以下定义：

```
git remote set-url origin "ssh://test@localhost:22/C/gittestserver" 
```

不能通过我的 ssh 服务器工作，但如果我通过另一个 ssh 服务器（例如`copssh`.

使用以下遥控器并在我的 ssh 服务器上手动操作命令可以工作：

```
git remote set-url origin "ssh://test@localhost:22/C:\gittestserver" 
```

`git-receive-pack '/C/gittestserver'`我使用不起作用的原始远程 url 在我的 ssh 服务器中获得以下命令。
为了使上述工作，我必须从第二个参数的开头和结尾手动删除单引号，并且我还必须`/`从第二个参数的开头删除单引号。完成此手动命令操作后，我可以让 git 成功运行。

有没有办法避免进行这种手动操作或以正确的方式进行操作，这样我就不会破坏未来潜在的用例？windows上的其他ssh服务器不知何故没有这个问题（`copssh`）。

请参阅[此问题](https://stackoverflow.com/questions/13904887/using-git-with-apache-sshd)（“将 Git 与 Apache sshd 一起使用”）以获取更多信息。

# visual-studio - 开发 Windows Mobile 6.1 应用程序需要什么版本的 Visual Studio？

> ID：13906745
> 
> 赞同：12
> 
> 时间：2012-12-16T23:59:58.823
> 
> 标签：visual-studio, windows-mobile-6.1

开发 Windows Mobile 6.1 应用程序需要什么版本的 Visual Studio？

我希望使用 Visual Studio 为运行 Windows Mobile 6.1 的设备编写应用程序。我听说 Visual Studio 的 Express 版本不支持这一点，但我读过的一些网站说标准版支持，有些说只有专业版支持。

也有人说可以用Visual Studio 2010，也有人说只能用2008。

我目前正在运行 Visual Studio 2012 Express，我认为它不支持 Mobile，更不用说 6.1。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T02:38:47.067

为了支持@HansPassant 的回答，这里是来自微软的 Visual Studio 2008 版本比较文档的链接，

[http://www.microsoft.com/en-us/download/details.aspx?id=7940](http://www.microsoft.com/en-us/download/details.aspx?id=7940)

如第 19 页（PDF 版本）所示，您必须使用 Visual Studio 2008 专业版及更高版本才能使用“智能设备”。

从 Visual Studio 2010 开始，微软停止了对移动平台的支持，

[http://msdn.microsoft.com/en-us/library/sa69he4t(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/sa69he4t(v=vs.100).aspx)

# java - Java：从块中的数组列表创建数组的有效方法

> ID：13906746
> 
> 赞同：0
> 
> 时间：2012-12-17T00:00:19.053
> 
> 标签：java, arrays, performance, arraylist

我不是本地 JAVA 程序员。我正在为 Web 服务 API 创建客户端。API 基本上需要一个数组参数。

我正在解析一个 XML 文件，创建记录，然后使用此 API 进行批量插入。

问题是这个 API 一次只能插入 200 条记录，这意味着我的数组在调用时只能有 200 条或更少的记录。

由于我事先不知道有多少记录，所以我将记录存储在 ArrayList 中，然后使用 .ToArray() 将其转换为 Array

```
APIObject[] invoiceArray = invoiceObjectlist.toArray(new APIObject[invoiceDetailObjectlist.size()]); 
```

现在由于 API 提出的 200 限制问题，我需要以 200 个块创建这些数组，直到 ArrayList 中的所有记录都已插入。

现在我想我可以遍历数组列表并维护一个计数器。当计数器 = 200 时，我可以创建一个新数组并通过维护索引指针将所有元素插入到该点，或者我可以将元素推送到每 200 条记录的新数组列表中，并将其转换为数组并执行插入。

在 JAVA 中执行此操作的更好的优雅/高效方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T00:05:29.453

```
List<APIObject[]> chunks = new ArrayList<APIObject[]>();
for (int i = 0; i < bigList.size(); i += 200) {
  APIObject[] chunk = bigList.subList(i, Math.min(bigList.size(), i + 200))
    .toArray(new APIObject[200]);
  chunks.add(chunk);
} 
```

# html - 如何将 MVC 2.0 Html 代码（如“<%: x > y ? a : b %>”）替换为 MVC 3.0 cshtml Razor 代码？

> ID：13906750
> 
> 赞同：3
> 
> 时间：2012-12-17T00:01:00.663
> 
> 标签：html, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, razor

我有一段 MVC 2.0 html 代码如下所示，我想用 MVC 3.0 Razor 代码替换它，但我无法使用 MVC 2.0 之类的一行代码使其工作。

```
<legend>&nbsp;Please add review for product :<%: Model.Product.ProductName.Length > 25 ? (string)Model.Product.ProductName.Substring(0, 25) + "..." : (string)Model.Product.ProductName %>&nbsp;<i style="color:Red">(&nbsp;<%: (string)Model.Product.Category.CategoryName %>&nbsp;)</i></legend> 
```

我可以使它工作的唯一方法如下所示，但它看起来并不整洁。我不喜欢它，任何人都可以给我一个在 MVC 3.0 Razor 中工作的代码，将不胜感激！！！

```
<legend>&nbsp;Please add review for product :
    <b>
        @{
            if(Model.Review.Product.ProductName.Length > 25)
            {
                @Model.Review.Product.ProductName.Substring(0, 25); @:...
            }
            else
            {
                @Model.Review.Product.ProductName;
            }
         }
    </b>
    &nbsp;<i style="color:Red">(&nbsp;@Model.Review.Product.Category.CategoryName&nbsp;)</i>&nbsp;</legend> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T00:18:06.603

这应该工作

```
<p>
   @(Model.Review.Product.ProductName.Length>25 ? 
            @Html.Raw(Model.Review.Product.ProductName.Substring(0,6)+" ..")
                                  :@Html.Raw(Model.Review.Product.ProductName))
</p> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T03:55:57.310

更好的是，您可以使用这个 Telerik 扩展将 ASPX 转换为 Razor。它每次都对我有用！

[ASPX 到剃刀](http://visualstudiogallery.msdn.microsoft.com/d2bfd1ca-9808-417c-b963-eb1ea4896790)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T01:24:09.043

三元运算符 ( `x > y ? x : y`) 在 Razor 中可用。你只需要把它放在括号中，这样你就可以通过这样做来清理它（为了清楚起见，我为产品名称创建了一个变量）：

```
@{ var productName = Model.Review.Product.ProductName; }
@(productName.Length > 25 ? productName.Substring(0, 25) + "..." : productName) 
```

但是，由于您所做的是一项相当常见的任务，您可能需要考虑为修剪创建一个 HTML 帮助器方法：

```
public static class HtmlHelpers
{
    public IHtmlString Truncate(this HtmlHelper htmlHelper, string value, int maxLength)
    {
        if (htmlHelper == null)
            throw new ArgumentNullException("htmlHelper");

        return value != null && value.Length > maxLength
            ? new HtmlString(htmlHelper.Encode(value.Substring(0, maxLength)) + "&hellip;")
            : new HtmlString(htmlHelper.Encode(value));        
    }
} 
```

然后你可以使用：`@Html.Truncate(Model.Review.Product.ProductName, 25)`在你看来，这更干净。

您还可以在以下位置定义扩展方法`string`：

```
public static class StringExtensions
{
    public void Truncate(this string value, int maxLength)
    {       
        return value != null && value.Length > maxLength
            ? value.Substring(0, maxLength) + "..."
            : value;
    }
} 
```

这将允许您这样做：`@Model.Review.Product.ProductName.Truncate(25)`.

# android - 无法在三星和 HTC UI 上接收 ACTION_NEW_PICTURE

> ID：13906752
> 
> 赞同：0
> 
> 时间：2012-12-17T00:01:33.817
> 
> 标签：android, broadcastreceiver, action, intentfilter

我有一个应用程序，它有一个接收动作 ACTION_NEW_PICTURE 的广播接收器。该接收器在大多数设备上都可以正常工作，除了带有 htc 和三星相机 UI 的设备。

这是我的接收器：

```
BroadcastReceiver receiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            // Log.e(TAG, "Intent Received");
            // Toast.makeText(Helper.this, "Intent Received",
            // Toast.LENGTH_SHORT).show();
            if (intent.getAction() == android.hardware.Camera.ACTION_NEW_PICTURE) {
                NameEditor.mediaType = "image";
            } else {
                if (intent.getAction() == android.hardware.Camera.ACTION_NEW_VIDEO) {
                    NameEditor.mediaType = "video";
                }
            }
 NameEditor.pictureUri = intent.getData();
            startActivity(dIntent);
        }
    };

    filter = new IntentFilter(android.hardware.Camera.ACTION_NEW_PICTURE);
    filter.addAction(android.hardware.Camera.ACTION_NEW_VIDEO);
    try {
        filter.addDataType("image/*");
        filter.addDataType("video/*");
    } catch (MalformedMimeTypeException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    filter.setPriority(IntentFilter.SYSTEM_HIGH_PRIORITY);
    registerReceiver(receiver, filter); 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T00:42:42.423

首先，该广播是 API 级别 14 的新内容，因此除非相关设备运行 Android 4.0，否则该广播不是预期的。

其次，AFAIK，没有要求相机应用程序必须发送该广播，无论该相机应用程序是由设备制造商还是第三方在 Play 商店之外提供。当然，我可以编写一个不会发送该广播的相机应用程序。因此，我认为`ACTION_NEW_PICTURE`您的应用程序应该投机取巧地使用它，而不是依赖它。

# c - 将结构写入管道的正确方法是什么

> ID：13906753
> 
> 赞同：0
> 
> 时间：2012-12-17T00:01:57.357
> 
> 标签：c, linux

在 linux 2.6.x 上，给定以下结构

```
struct A
{
  int a;
  int b;
} ss; 
```

我想到的将上述结构写入管道的两个选项是

1.  memcpy 从 &ss 到 sizeof(ss)
2.  复制 ss->a，然后复制 ss->b

这个比那个好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T00:24:08.090

There is no "correct" way but some methods are definitely better than others.

For starters, the size of an int is dependent on the machine, compiler and options. You probably don't want your network/ipc protocol to vary with those. Secondly, the order of the bytes in an integer can vary with the same things. So, first define the size of your integers and the order (endianess). Let's say you go with 32 bits, big endian. Then extract these bytes using numeric/logical operations - not byte copying or overlays. Finally, you might want to actually encode your size assumption in the stream.

Some sample code. Each function encodes the parameter into the buffer supplied and returns the number of characters used in the buffer.

```
int encode_int(int v, unsigned char *s) {
   s[0] = (v>>24) & 0xff;
   s[1] = (v>>16) & 0xff;
   s[2] = (v>>8) & 0xff;
   s[3] = v & 0xff;
   return 4;
}
int encode_A(struct A *a, unsigned char *s) {
   int offset = 0;
   s[offset++] = 4; // Size of ints - really belongs in a global header or in encode_int
   offset += encode_int(a->a, s+offset);
   offset += encode_int(a->b, s+offset);
   return offset;
} 
```

Decoding has to take the supplied bytes and reassemble the integers using logical/arithmetic operations. Another possibility is to make encode_int use a variable number of bytes (and encode how many it used) if you expect mostly small integers and/or would like to also handle 64bit platforms. There are many other options - the main thing is don't allow the arbitrariness of the in-memory representation to define your protocol.

Also take a look at ntohl, htonl, ntohs, htons standard functions.

Ps. One final edit - if the size of an integer in the reader is not the same as that in the writer, care has to be taken to correctly handle negative integers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T01:55:06.153

我完全同意 DrC。

您的简单结构表明您只是在暗示您手头的问题。您需要考虑的是结构的内存布局，这可能因 CPU、编译器及其 sizeof(int) 而异。考虑：

```
struct B {
    int a;
    char b;
    int c;
} 
```

编译器将在 sizeof(int) 边界上对齐“c”。也就是说'b'和'c'之间会有一些填充。如果 sizeof(int) 是 2，那么只需要一个额外的字节就可以让 'c' 从 int 边界开始。如果 sizeof(int) 为 4，就像在大多数 32 位处理器上一样，则需要三个填充字节。问题确实来自 64 位处理器。sizeof(int) 可以是四或八。

因此，对您的问题的简单回答是分别传输结构的每个元素，因为这样可以避免传输任何填充字节。但是，如果管道的两端都同意 sizeof(<data-type>) 等于什么，以及 int、longs、long longs、float、doubles 等的字节顺序，你就可以逃脱惩罚。

但是考虑到这些天的网络带宽，我认为最好使用基于 ASCII 的传输协议（例如 XML），除非有很好的理由不这样做。

# php - php有没有语义匹配之类的东西

> ID：13906754
> 
> 赞同：1
> 
> 时间：2012-12-17T00:02:07.577
> 
> 标签：php, semantics

> **可能重复：**
> [LSA - 潜在语义分析 - 如何在 PHP 中编码？](https://stackoverflow.com/questions/1014927/lsa-latent-semantic-analysis-how-to-code-it-in-php)

我有一个应用程序，它以无特定顺序随机输入属性、对象类型和对象颜色（均以文本形式）。

输入必须经过验证和确认。PHP 中是否有任何用于语义匹配的算法或脚本可以完成此任务？

# php - 来自 PHP 的 SQL Server 查询

> ID：13906755
> 
> 赞同：0
> 
> 时间：2012-12-17T00:02:40.490
> 
> 标签：php, sql

```
WHERE Date >= '. $_GET['start_date']. ' AND Date <= ' . $_GET['end_date']. ' AND ForteID = ' . $_GET['ForteID']; 
```

我需要在 $_GET['start_date'] 和 $_GET['end_date'] 周围有 ' 这样我的 SQL 查询才能工作，但不完全确定如何将它们放在那里！？我不需要 ForteID，因为我的输入页面中的值已经在那里了。另一方面，日期字段来自日历日期选择器。如果我需要提供任何其他信息，请告诉我。提前致谢！

这就是我执行 echo $query 时的样子；在我的 PHP 中，让实际的 SQL 查询工作：

```
WHERE Date >= '12/01/2012' AND Date <= '12/17/2012' AND ForteID = 'as7326' 
```

但现在我明白了：

```
WHERE Date >= 12/01/2012 AND Date <= 12/17/2012 AND ForteID = 'as7326' 
```

编辑：

这就是我所拥有的，但仍然没有围绕日期的撇号：

```
$Start_Date = $_GET['start_date'];
$End_Date = $_GET['end_date'];
$Forte_ID = $_GET['ForteID'];

$query = '  SELECT ForteID, Disposition, Cancel_Disposition, Date, appNumber, Phone_Num, Con_Number, Finance_Num, Num_Payments, ACH_CC, Post_Date, Total_Cost, Total_MP, New_MP_Amt, New_DP_Amt, Notes 
        FROM CSLogs.dbo.Logs 
        WHERE Date BETWEEN '.$Start_Date.' AND '.$End_Date.' AND ForteID = '.$Forte_ID; 
```

# javascript - 将表达式传递给 javascript 函数

> ID：13906758
> 
> 赞同：1
> 
> 时间：2012-12-17T00:03:00.333
> 
> 标签：javascript

我有以下来自 javascript 书籍的代码，回调似乎是作为参数传递的表达式。是这样还是我看错了？我不知道，即使它有效，那是可能的。

```
function multiplybytwo(a,b,c,callback)  {
  var i, ar =[];
  for(i=0;i<3;i++)  
  {
    ar[i] = callback(arguments[i]*2);  
  }
  return ar;  
}  

function addone(a)  {
  return a+1;  
} 

myarr =multiplybytwo(1,2,3,addone); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:08:32.400

```
callback(arguments[i]*2); 
```

相当于

```
var a = arguments[i]*2;
callback(a); 
```

与`callback(1+2);`_`callback(3);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T00:05:53.527

回调传递了该表达式的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T00:15:14.660

参数在传递给函数之前进行评估。

```
function foo( a ) {
    alert( a );
}

function bar( ) {
    return 1;
}

foo( bar( ) ); 
```

上面的（[**演示**](http://jsfiddle.net/bruno/AT9JK/)）将显示 1。

# .net - 是否有用于管理应用程序设置的 Winforms 控件？

> ID：13906759
> 
> 赞同：0
> 
> 时间：2012-12-17T00:03:08.633
> 
> 标签：.net, winforms, configuration

有没有办法在运行时显示对话框以编辑最终用户的应用程序设置？在 Visual Studio 中设计时显示的相同对话会很好地工作......例如，连接字符串属性对话很有帮助。

还是我需要构建自定义表单来编辑设置？我本来希望有更方便的方法或一些帮手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T02:03:16.383

默认工具箱中已经有一个控件。它称为 PropertyGrid。我相信这正是您正在寻找的。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.propertygrid.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.propertygrid.aspx)

# c++ - 结构一字节对齐与架构的对齐要求冲突？

> ID：13906761
> 
> 赞同：3
> 
> 时间：2012-12-17T00:03:14.457
> 
> 标签：c++, c, alignment

我之前在[这里](https://stackoverflow.com/questions/13881487/should-i-worry-about-the-alignment-during-pointer-casting#comment19155923_13881487)发布了一个关于指针转换期间对齐访问的问题。总而言之，最好不要使用非对齐访问来实现完全可移植，因为某些架构可能会抛出异常，或者与对齐访问相比，性能可能会变得非常慢。

但是，[在某些情况下](https://stackoverflow.com/questions/4507735/pragma-pack-in-c)，我想使用单字节对齐，例如，在传输网络数据期间，我不想在结构内添加额外的填充。所以通常这里做的是：

```
#pragma pack (push, 1)
struct tTelegram
{
   u8 cmd;
   u8 index;
   u16 addr1_16;
   u16 addr2_16;
   u8  length_low;
   u8 data[1];
};
#pragma pack (pop) 
```

那么你可能已经知道我的问题了：如果我对我的结构强制执行单字节对齐，这是否意味着它不能完全可移植，因为结构成员没有对齐？如果我既想要没有填充又想要可移植性怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T00:51:04.247

首先，未对齐的内存访问是指跨越内存中多个字的单个数据。例如：在 32 位系统上，地址 0、4、8 等处的 32 位`int`对齐，但地址 1、2、3、5、6、7、9 等处的 32 位将不对齐。

其次，未对齐的数据不会在 C++ 意义上“引发异常”，但可能会在 CPU 级别引发中断/陷阱/异常 - 例如 UNIX 上的 SIGBUS，您通常会设置一个信号处理程序来对此做出反应，但是，如果您需要以可移植的方式解析未对齐的数据，则不会通过捕获信号来执行此操作 - 您需要手动编写步骤来打包和解包跨越字边界的数据。

在您的`tTelegram`结构中，数据不是“未对齐”的，但是在从寄存器打包/解包数据时移位和屏蔽数据的过程仍然可能比使用占据独立字的数据更慢 - 需要更多机器代码指令。

关于可移植性-所有非玩具编译器都可以选择按照您描述的方式打包，但确切的编译指示会有所不同，多字节值中的字节布局可能仍然是大端或小端（或一些很奇怪的东西），而一些 CPU 允许一些未对齐的数据访问（例如 x86），而另一些则不允许（例如 Ultrasparc）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T00:12:03.580

在不同计算机之间传输数据时，您总是希望格式化数据。请注意，数据格式不一定是可读的，但它很可能是二进制的。二进制格式将包括每个数据项的确切位置、它的类型、对于多字节数据、字节出现的顺序、大小或确定大小的方法等。不使用定义的格式会咬人，可能早于之后。

换句话说，尽管我已经看到了您所描述的使用方法，但我认为它们不正常，而且在不同实体之间定义的格式（当然是公司，也可能在不同部门和/或组之间）时它们肯定不正常）。在我工作的地方接收和发送数据，确切的格式肯定是定义的。如果定义的格式可以与 a 中的数据布局匹配，`struct`它当然也用于解码数据，但众所周知它不可移植，并且旨在可移植的代码不会尝试使用这样的工具。相反，它使用读/写相关记录并适当地解码/编码不同的东西。通常，解码/编码代码是从某种描述确切数据布局的元格式生成的。

# c# - 如何将 .NET4 的 BigInteger 与 GPU 或 FPGA 一起使用？我处理大端数学吗？

> ID：13906762
> 
> 赞同：2
> 
> 时间：2012-12-17T00:03:20.757
> 
> 标签：c#, opencl, gpu, biginteger, endianness

**第1部分**

我有兴趣将[BigInteger](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)计算卸载到 GPU 或 FPGA。是否可以在这种类型的 CPU 以外的东西上进行数学运算（指数等）？（或使用此数据类型的对象？

**第2部分**

由于 .NET 上的 BigInteger 是小端，我不确定这是否意味着它是 CPU 独有的，因为我见过的所有基于 GPU 的代码都是 Bigendian。

*   如果可以在 GPU/FPGA 上使用，我必须管理事物的字节序吗？

# objective-c - 在 NSArray 或 NSMutableArray 中存储浮点值（成员变量）的方法

> ID：13906768
> 
> 赞同：-3
> 
> 时间：2012-12-17T00:04:12.780
> 
> 标签：objective-c, ios, cocoa-touch

我想在 NSArray 或 NSMutableArray 中存储浮点值（成员变量：更改继续），所以，想查看 NSLog 形式。我一次又一次地尝试，但失败了。

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:06:22.200

这就是为什么`NSNumber`类在那里：

```
NSNumber *num = [NSNumber numberWithFloat:3.14f];
// or:
NSNumber *num = @(3.14f);
[mutableArray addObject:num];

NSLog(@"%f", [(NSNumber *)[mutableArray objectAtIndex:0] floatValue]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T00:09:03.627

您不能将原始类型存储在 中`NSArray`，您必须首先将它们装箱（包装）在 NSObject 实例中，例如`NSNumber`.

```
float myVal = 5.5f;
NSArray *arr = [NSArray arrayWithObjects:[NSNumber numberWithFloat:myVal], nil];
NSLog("some array: %@", arr); 
```

当然，您可以直接使用`NSLog(@"my value: %f", myVal)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T00:27:59.690

Forgive me for another answer but I couldn't see that old and too long syntax:

```
NSArray* arr= @[ @1.0 ];
NSLog(@"%@",arr[0] ); 
```

Notice that you haven't to call [arr[0] floatValue], the description method will do it's job.

# uiscrollview - 为什么从我的滚动视图中选择的图像没有传递给另一个视图控制器？

> ID：13906769
> 
> 赞同：0
> 
> 时间：2012-12-17T00:04:19.747
> 
> 标签：uiscrollview

为什么从滚动视图中选择的图像不传递给另一个视图控制器？

```
- (void)tap:(UITapGestureRecognizer *)gesture{

    CGPoint touchPoint = [gesture locationInView:_scroller];

    int tapOnView = (touchPoint.x / 1024) + 1;

    NSString *imageName = [NSString stringWithFormat:@"S%d.png", tapOnView];

    UIImage *photo = [UIImage imageNamed:imageName];

    NSLog (@"the image selected is %@",imageName);

    PaintViewController *paintVC = [self.storyboard instantiateViewControllerWithIdentifier:@"paintViewController"];
    [paintVC.tempDrawImage setImage: photo];
    [self.navigationController pushViewController:paintVC animated:YES];    
} 
```

[链接到我的项目](https://www.dropbox.com/s/c99bpzw16oih9ex/pruebaScroll.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T03:16:19.960

`tap`您可以通过以下方法替换该方法

```
- (void)singleTapGestureCaptured:(UITapGestureRecognizer *)gesture{

    CGPoint touchPoint = [gesture locationInView:scrollView];

    NSUInteger touchedPage = floorf(touchPoint.x / scrollView.frame.size.width);
    if ([imageArray count] > 1) {

        touchedPage = touchedPage % ([imageArray count] - 1);
    }

    //Push the image to another view 
```

# python - 如何制作一个检测字符串中的字符并返回它在字符串中的位置的函数？蟒蛇 3.2

> ID：13906770
> 
> 赞同：1
> 
> 时间：2012-12-17T00:04:35.223
> 
> 标签：python, string, function, character, detect

我正在上编程课程，明天是期末考试。我正在参加练习决赛，我被困在这个问题上：

给定以下函数标题

def firstOccur(ch, s):

编写一个方法，返回字符串 s 中存储在 ch 中的字符的第一次出现。如果在字符串中找到该字符，您的函数应该返回它的位置。因此，如果 s = 'abcdefg' 并且 ch 的值为 'd'，您的程序将返回 3。如果在字符串中找不到该字符，您的程序应返回 -1。

我试了一下，但没有运气。这就是我所在的位置：

```
def firstOccur(ch, s):
    b = len(s)
    n = 0
    for c in range(b):
        d = ch[0]
        e = s[c]
        if d != e:
            return(-1)
        else:
            while d != e:
                n = n+1
            return(n)
def main():
    a = firstOccur('d', 'abcdefg')
    print(a)
main() 
```

主要功能只是测试 firstOccur 功能。我不知道从这里去哪里，或者我是否走在正确的道路上。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:12:39.117

好的，让我们分解一下。你会得到一个字符列表，也就是一个字符串。所以任务是在这个列表上迭代（=循环），直到你在列表中第一次出现你的搜索键。一旦你遇到了，返回它的位置，这也打破了循环。如果您在没有找到搜索键的情况下完成循环，请返回`-1`（顺便说一句；`None`在 Python 中更有意义）。

Python 为您提供了一个名为的内置函数`enumerate`，它接受一个列表并返回一个带有元素索引和元素本身的元组列表。IE

```
['a', 'b', 'c', 'd'] 
```

或“abcd”

变成

```
[(0, 'a'), (1, 'b'), (2, 'c'), (3, 'd')] 
```

这是无脑的。

```
def firstOccur(key, string):
    for i, c in enumerate(string):
        if key == c:
            return i
    return -1 
```

如果您不允许使用枚举，那么还有一条“漫长”的道路：

```
def firstOccur(key, string):
    for i in range(len(string)):
        if key == string[i]:
            return i
    return -1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T00:13:29.290

这与 string.find() 方法基本相同 :) 预计您不能使用 Python 基础知识来解决这个问题......

```
for x in range(len(s)):
    if ch == s[x]:
        return x
return -1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T00:11:42.537

你可以尝试这样的事情；它将返回索引为零的位置（即，第一个字符为 0，第二个字符为 1，依此类推）。Enumerate 能够为您跟踪当前位置。

```
def firstOccur(ch,s):
    for pos, char in enumerate(s):
        if char == ch:
            return pos

    return -1

a = firstOccur('d', 'abcdefg')
// a = 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T00:15:49.527

你不需要在 Python: 中循环这样的字符串`for c in range(b)`。您可以简单地从字符串中获取每个字符：`for character in s`循环遍历字符串，依次为您提供每个字符。

`if d != e: return(-1)`- 每次你击中一个不是你想要的角色时，你都会回来。此外，如果`ch`是一个字符，则不需要`ch[0]`.

Python 带有一个非常方便的函数，称为`enumerate`. 这将列出 an 中的值`iterable`以及它们的位置。以下是它的外观轮廓：

```
for index, character in enumerate(s):
    if #<test condition here on character>:
        return index
return -1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T00:37:26.103

一个更简单的方法是

```
def first_occur(my_string,my_char):
   try:
       return my_string.index(my_char)
   except ValueError:
       return -1 
```

如果您不允许使用任何类型的方法（我希望我说的正确）或像 range 这样的内置方法

```
def first_occur(my_string,my_char):
    count=0:
    for value in my_string:

        if value==my_char:
            return count
        count+=1

   return -1 
```

我认为如果你不能使用 enumerate 你应该不能使用 range

如果将 count+=1 移动到 for value 之后的行，则列表将索引为 1，否则索引为零

# c# - 无法使用 WebClient 登录 asp.net 网站

> ID：13906771
> 
> 赞同：0
> 
> 时间：2012-12-17T00:04:35.057
> 
> 标签：c#, asp.net, webclient

我尝试在此站点上提交表单：[freeclassifieds](http://www.freeclassifieds.com)，使用支持 cookie 的 WebClient。我升级的 WebClient：

```
public class CookieWebClient : WebClient
{
    private readonly CookieContainer container = new CookieContainer();

    public CookieWebClient(CookieContainer container)
    {
        this.container = container;
    }

    protected override WebRequest GetWebRequest(Uri address)
    {
        WebRequest res = base.GetWebRequest(address);
        var request = res as HttpWebRequest;
        if (request != null)
        {
            request.CookieContainer = container;
        }
        return res;
    }

    protected override WebResponse GetWebResponse(WebRequest request, IAsyncResult result)
    {
        WebResponse response = base.GetWebResponse(request, result);
        ReadCookies(response);
        return response;
    }

    protected override WebResponse GetWebResponse(WebRequest request)
    {
        WebResponse response = base.GetWebResponse(request);
        ReadCookies(response);
        return response;
    }

    private void ReadCookies(WebResponse r)
    {
        var response = r as HttpWebResponse;
        if (response != null)
        {
            CookieCollection cookies = response.Cookies;
            container.Add(cookies);
        }
    }
} 
```

但是当我尝试提交表单时，我只是被阻止并接收登录页面作为响应。我检查了登录页面中的 cookie 和字段，一切似乎都已调整好。为什么登录成功后收不到正确的页面？

```
static void Main(string[] args)
    {
        string link1 = "http://www.freeclassifieds.com/logon.aspx";

        string fileName= @"D:\Dropbox\myProjects\AutoPostMachine\myHtml.html";

        CookieWebClient wc = new CookieWebClient(new CookieContainer());

        NameValueCollection postDataCollection= new NameValueCollection();
        postDataCollection.Add("ctl00$phMain$txtEmail", "myEmail");
        postDataCollection.Add("ctl00$phMain$txtPassword","myPassword");
        postDataCollection.Add("ctl00$phMain$btnLogin","Login");

        wc.Encoding = Encoding.UTF8;
        wc.Credentials = CredentialCache.DefaultCredentials;
        wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
        wc.Headers[HttpRequestHeader.Cookie] = "ASP.NET_SessionId=mfqdx1505nnbw3bxws01so12; __utma=19755559.732186057.1355692154.1355692154.1355695835.2; __utmb=19755559.3.10.1355695835; __utmc=19755559; __utmz=19755559.1355692154.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)";

        byte[] byteArr= wc.UploadValues(link1, postDataCollection);
        FileStream fs = new FileStream(fileName, FileMode.Create);
        fs.Write(byteArr, 0, byteArr.Length);

        Process.Start(fileName);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T00:31:36.847

如果/如果配置正确，则不能“欺骗” ASP.Net Web 表单`Postback`- MSDN 参考：[`VIEWSTATE`和`EVENTVALIDATION`](http://msdn.microsoft.com/en-us/magazine/cc163512.aspx#S3)

# iphone - iOS6 CALayer释放/卸载滚动视图中滚动不可见的视图

> ID：13906772
> 
> 赞同：1
> 
> 时间：2012-12-17T00:04:53.423
> 
> 标签：iphone, objective-c, ios, uiview, calayer

我知道在 iOS6 下，UIView 的 CALayer 会在内存不足的情况下自动卸载和释放，而不是视图本身被卸载。我喜欢这个新功能，它更容易处理。

但是，我想澄清一个极端情况：如果我有一个带有很多子视图的 UIScrollView，在内存不足的情况下，滚动出可见区域的视图是否有资格卸载图层？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:51:29.467

我会这么认为，是的。

真正被清理的是 CALayer 的位图。看看这个[博客](http://thejoeconwayblog.wordpress.com/2012/10/04/view-controller-lifecycle-in-ios-6/)。

# java - 如何将 OutputStream 转换为字符串？

> ID：13906776
> 
> 赞同：2
> 
> 时间：2012-12-17T00:05:33.130
> 
> 标签：java, java-me, outputstream

这是我的客户端代码（J2ME）：

```
SocketConnection sc = (SocketConnection) Connector.open("socket://localhost:4444");
sc.openOutputStream().write("test".getBytes());
sc.close(); 
```

这是我的服务器代码（J2SE）：

```
ServerSocket serverSocket = new ServerSocket(4444);
Socket clientSocket = serverSocket.accept();
OutputStream os = clientSocket.getOutputStream(); 
```

我将如何创建一个字符串表示`os`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T00:08:36.263

`InputStream`并且`OutputStream`用于字节序列。`Reader`并且`Writer`用于字符序列，例如`String`s。

要将 an`OutputStream`转换为 a `Writer`、 do`new OutputStreamWriter(outputStream)`或*更好*，请使用`new OutputStreamWriter(outputStream, Charset)`指定 a `Charset`，它描述了一种在字符和字节之间进行转换的方式。

（另一个方向，`InputStreamReader`，类似。）

# multithreading - OpenMP：在线程之间共享数组

> ID：13906783
> 
> 赞同：7
> 
> 时间：2012-12-17T00:06:57.377
> 
> 标签：multithreading, parallel-processing, openmp

今天是个好日子！

我正在进行分子动力学模拟，最近我开始尝试并行实现它。乍一看，一切看起来都很简单：在最耗时的循环前面编写#pragma omp parallel for 指令。但是碰巧的是，这些循环中的函数在数组上运行，或者更准确地说，在属于我的类的对象的数组上运行，该对象包含有关粒子系统和在该系统上的函数的所有信息，所以当我添加时在最耗时的循环之一之前的 pragma 指令，尽管我的 2 核 4 线程处理器已满载，但计算时间实际上增加了数倍。

为了解决这个问题，我编写了另一个更简单的程序。该测试程序执行两个相同的循环，一个是并行的，另一个是串行的。测量执行这两个循环所需的时间。结果让我感到惊讶：每当并行计算第一个循环时，其计算时间与串行模式相比减少了（分别为 1500 和 6000 毫秒），但第二个循环的计算时间急剧增加（15 000 对 6000 串行）。

我尝试使用 private() 和 firstprivate() 子句，但结果是一样的。在并行区域之前定义和初始化的每个变量都不应该自动共享吗？如果在另一个向量 vec2 上执行第二个循环的计算时间会恢复正常，但是为每次迭代创建一个新向量显然不是一种选择。我还尝试将 vec1 的实际更新放入 #pragma omp 关键区域，但这也不是什么好事。两者都没有帮助添加 Shared(vec1) 子句。

如果您能指出我的错误并展示正确的方法，我将不胜感激。

是否有必要将该 private(i) 放入代码中？

这是这个测试程序：

```
#include "stdafx.h"
#include <omp.h>
#include <array>
#include <time.h>
#include <vector>
#include <iostream>
#include <Windows.h>
using namespace std;
#define N1  1000
#define N2  4000
#define dim 1000

int main(){
    vector<int>res1,res2;
    vector<double>vec1(dim),vec2(N1);
    clock_t t, tt;
    int k=0;
    for( k = 0; k<dim; k++){
        vec1[k]=1;
    }

    t = clock();

    #pragma omp parallel 
        {
        double temp; 
        int i,j,k;
        #pragma omp for private(i)
            for( i = 0; i<N1; i++){
                for(j = 0; j<N2; j++){  
                    for( k = 0; k<dim; k++){
                        temp+= j;
                    }
                }
                vec1[i]+=temp;
                temp = 0;
            }
        }
    tt = clock();
    cout<<tt-t<<endl;
    for(int k = 0; k<dim; k++){
        vec1[k]=1;
    }
    t = clock();
                for(int g = 0; g<N1; g++){
        for(int h = 0; h<N2; h++){
            for(int y = 0; y<dim; y++){
                vec1[g]+=h; 
            }
        }
    }
    tt = clock();
    cout<<tt-t<<endl;
    getchar();
} 
```

感谢您的时间！

PS我使用Visual Studio 2012，我的处理器是Intel Core i3-2370M。我的程序集文件分为两部分：

[http://pastebin.com/suXn35xj](http://pastebin.com/suXn35xj)

[http://pastebin.com/EJAVabhF](http://pastebin.com/EJAVabhF)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T15:11:29.090

恭喜！您已经暴露了另一个糟糕的 OpenMP 实现，这是由 Microsoft 提供的。我最初的理论是，问题来自 Sandy Bridge 和后来的 Intel CPU 中的分区 L3 缓存。但是仅在向量的前半部分运行第二个循环的结果并未证实该理论。然后它必须是启用 OpenMP 时触发的代码生成器中的某些内容。汇编输出证实了这一点。

基本上，在启用 OpenMP 的情况下编译时，编译器不会优化串行循环。这就是放缓的来源。通过使第二个循环与第一个循环不同，您自己也引入了部分问题。在第一个循环中，您将中间值累积到一个临时变量中，编译器将其优化为寄存器变量，而在第二种情况下，您`operator[]`在每次迭代时调用。当您在未启用 OpenMP 的情况下进行编译时，代码优化器会将第二个循环转换为与第一个循环非常相似的内容，因此两个循环的运行时间几乎相同。

当您启用 OpenMP 时，代码优化器不会优化第二个循环并且运行速度会变慢。您的代码在此之前执行并行块的事实与减速无关。我的猜测是代码优化器无法掌握`vec1`OpenMP 区域范围之外的事实，`parallel`因此不应再将其视为共享变量，并且可以优化循环。显然，这是 Visual Studio 2012 中引入的“功能”，因为即使启用了 OpenMP，Visual Studio 2010 中的代码生成器也能够优化第二个循环。

一种可能的解决方案是迁移到 Visual Studio 2010。另一种（假设的，因为我没有 VS2012）解决方案是将第二个循环提取到一个函数中并通过引用它来传递向量。希望编译器足够聪明，可以优化单独函数中的代码。

这是一个非常糟糕的趋势。微软实际上已经放弃了在 Visual C++ 中支持 OpenMP。它们的实现仍然（几乎）仅符合 OpenMP 2.0（因此没有明确的任务和其他 OpenMP 3.0+ 好东西），并且像这样的错误不会让事情变得更好。我建议您切换到另一个启用 OpenMP 的编译器（英特尔 C/C++ 编译器、GCC、任何非 Microsoft 的东西）或切换到其他一些独立于编译器的线程范例，例如英特尔线程构建块。微软显然正在推动他们的 .NET 并行库，而这正是所有开发的方向。

* * *

# 大胖警告

**请勿`clock()`用于测量经过的挂钟时间！**这只能在 Windows 上按预期工作。在大多数 Unix 系统（包括 Linux）上，`clock()`实际上返回**自创建以来进程中所有线程消耗的 CPU 时间总和**。这意味着`clock()`返回的值可能比挂钟时间大几倍（如果程序运行有许多繁忙的线程）或比挂钟时间短几倍（如果程序休眠或等待 IO 事件之间测量值）。相反，在 OpenMP 程序中，`omp_get_wtime()`应该使用可移植定时器功能。

# installation - WriteRegStr HKLM：跨 Windows 平台解决方案

> ID：13906784
> 
> 赞同：1
> 
> 时间：2012-12-17T00:06:57.840
> 
> 标签：installation, 64-bit, nsis

在 Windows 7/64 位计算机上，NSIS 功能`WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\" "blah" "blah"`不起作用。

据我了解，让它工作的唯一方法是这样做：`WriteRegStr HKLM "Software\WOW6432Node\Microsoft\Windows\CurrentVersion\Uninstall\" "blah" "blah"`

**我是否正确，这是在 Windows 7/64 位计算机上写入本地计算机注册表的唯一方法？**

*是否有可以写入本地机器注册表的跨平台方式/功能？*

我唯一的选择是这样的吗...

```
!macro WriteRegStrLocalMachine path regName regValue

    WriteRegStr HKLM "SOFTWARE\WOW6432Node\${path}" "${regName}" "${regValue}"
    WriteRegStr HKLM "SOFTWARE\${path}" "${regName}" "${regValue}"
!macroend

!macro ReadRegStrLocalMachine path regName regValue

    ReadRegStr $1 HKLM "SOFTWARE\WOW6432Node\${path}" "${regName}"
    ReadRegStr $2 HKLM "SOFTWARE\WOW6432Node\${path}" "${regName}"

    # TODO: Check if $1 or $2 contain data 
!macroend 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:35:40.753

> 我是否正确，这是在 Windows 7/64 位计算机上写入本地计算机注册表的唯一方法？

错误：使用 NSIS（在下一个版本之前是 32b 应用程序 - 当前是 2.46），您可以选择使用 64b 或 32b 访问[`SetRegView`](http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.7.6)

# mercurial - 让 Mecurial 丢弃未提交的更改

> ID：13906785
> 
> 赞同：0
> 
> 时间：2012-12-17T00:07:47.743
> 
> 标签：mercurial, eol

以下是正常的 Mercurial 行为吗？如果是这样，我如何丢弃未提交的更改？

```
D:\hgrepo\trunk>hg st
M Library\libFunc.h

D:\hgrepo\trunk>hg revert --all
reverting Library\libFunc.h

D:\hgrepo\trunk>hg st
M Library\libFunc.h

D:\hgrepo\trunk>hg update 1003 --clean               # Parent branch
1 files updated, 0 files merged, 0 files removed, 0 files unresolved

D:\hgrepo\trunk>hg st
M Library\libFunc.h

D:\hgrepo\trunk>hg revert --all
reverting Library\libFunc.h

D:\hgrepo\trunk>hg st
M Library\libFunc.h 
```

此外，差异似乎表明文件没有修改（kdiff3 报告二进制相等），但 Mercurial 仍将它们报告为已修改。（实际上我有大约 50 个修改过的文件 - 我将示例修剪为单个文件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:42:01.140

我本来希望`hg st`您的示例中的第二次调用仅列出一个新的未跟踪`libFunc.h.orig`文件。您是否`eol`在设置中启用了扩展程序？这里有[另一个线程](https://stackoverflow.com/questions/6464824/mercurial-marks-unmodified-files-as-modified-in-working-directory-and-fails-to-r)专门解决此扩展的一些问题。

# python - 在 Mac 上将 Pygame 安装到 Enthought 构建中

> ID：13906786
> 
> 赞同：1
> 
> 时间：2012-12-17T00:08:20.780
> 
> 标签：python, pygame, enthought

在 Mac 上安装 Pygame 有许多未解决的问题，但我将在这里提出我的具体问题并希望得到答案。

我在 Mac 上安装 Pygame 时遇到了难以置信的困难。我使用 Enthought 版本 EPD 7.3-2 32 位，它是我的默认框架，所以如果我`python`在终端提示符下键入，我会得到：

```
$ python
Enthought Python Distribution (EPD) free version -- www.enthought.com
Version: 7.3-2 (32-bit) 
```

我已经使用 Pip 1.2.1 成功地为这个版本安装了额外的模块，没有任何问题。我的机器上安装了 Xcode 4.5.2，但出现 gcc 错误。

有任何想法吗？

这是跟踪：

```
$ pip install Pygame

Downloading/unpacking Pygame

  Running setup.py egg_info for package Pygame

    warning: no files found matching 'readme.txt'
    no previously-included directories found matching '*/CVS'
    no previously-included directories found matching '*/*/CVS'
Installing collected packages: Pygame
  Running setup.py install for Pygame
    building 'pygame.font' extension
    gcc -fno-strict-aliasing -fno-common -dynamic -arch i386 -DNDEBUG -g -O3 -arch i386 -Ddarwin -I/Library/Frameworks/SDL.framework/Versions/Current/Headers -I/Library/Frameworks/SDL_ttf.framework/Versions/Current/Headers -I/Library/Frameworks/Python.framework/Versions/7.3/include/python2.7 -c src/font.c -o build/temp.macosx-10.5-i386-2.7/src/font.o
    unable to execute gcc: No such file or directory
    error: command 'gcc' failed with exit status 1
    Complete output from command /Library/Frameworks/Python.framework/Versions/7.3/Resources/Python.app/Contents/MacOS/Python -c "import setuptools;__file__='/var/folders/7p/wns1bszn1gq0zm3z2j_tdkdw0000gn/T/pip-build/Pygame/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/7p/wns1bszn1gq0zm3z2j_tdkdw0000gn/T/pip-478PM0-record/install-record.txt --single-version-externally-managed:
    running install

running build

running build_py

running build_ext

building 'pygame.font' extension

gcc -fno-strict-aliasing -fno-common -dynamic -arch i386 -DNDEBUG -g -O3 -arch i386 -Ddarwin -I/Library/Frameworks/SDL.framework/Versions/Current/Headers -I/Library/Frameworks/SDL_ttf.framework/Versions/Current/Headers -I/Library/Frameworks/Python.framework/Versions/7.3/include/python2.7 -c src/font.c -o build/temp.macosx-10.5-i386-2.7/src/font.o

    unable to execute gcc: No such file or directory

    error: command 'gcc' failed with exit status 1

----------------------------------------
Command /Library/Frameworks/Python.framework/Versions/7.3/Resources/Python.app/Contents/MacOS/Python -c "import setuptools;__file__='/var/folders/7p/wns1bszn1gq0zm3z2j_tdkdw0000gn/T/pip-build/Pygame/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/7p/wns1bszn1gq0zm3z2j_tdkdw0000gn/T/pip-478PM0-record/install-record.txt --single-version-externally-managed failed with error code 1 in /var/folders/7p/wns1bszn1gq0zm3z2j_tdkdw0000gn/T/pip-build/Pygame
Storing complete log in /Users/jchirico/.pip/pip.log 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:32:38.777

你安装了`Command Line Tools`Xcode 4.5 的组件了吗？启动`Xcode.app`，然后选择`Preferences`-> `Downloads`->`Components`并单击`Install`或`Update`。这将在传统位置（如`/usr/bin`.

# html - 如何创建“添加到收藏夹”超链接？

> ID：13906790
> 
> 赞同：2
> 
> 时间：2012-12-17T00:08:41.740
> 
> 标签：html, button, hyperlink

我正在尝试创建一个超链接，单击该超链接会提示用户将当前页面添加到浏览器的收藏夹中。

我一直找不到这个问题的明确答案，或者不到 7 年前发布到 Internet 上仍然有效的答案。

这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:37:09.187

> 我一直找不到这个问题的明确答案，或者不到 7 年前发布到 Internet 上仍然有效的答案。

这是如何明确的......你不能。

7 年前，各种浏览器支持各种方式（一些 hack，一些官方）使用 javascript 添加书签。然而，正如duskwuff 所提到的，对这个功能的支持即将结束——也许是因为它很少被使用，也许是因为它是一个安全问题。

# json - 最好的技术......（sax，xpath，transform？）

> ID：13906795
> 
> 赞同：1
> 
> 时间：2012-12-17T00:10:03.880
> 
> 标签：json

取以下json：

```
in = {
 a: "a",
 b: [ 
   { x: 1 }, 
   { x: 2 }
 ]
} 
```

我将如何将其转换为：

```
out = [ { x: 1, a: "a" },
        { x: 2, a: "a" } ] 
```

这是对具有重复数据的表的反规范化（应用程序是将 json 转换为 csv - 我可以通过[json2csv](https://npmjs.org/package/json2csv)运行上表）。

我看过[clarinet](https://github.com/dscape/clarinet)（sax 解析器，肯定会完成这项工作），还有[node-jpath](https://github.com/stsvilik/node-jpath)（xpath，应该能够做到，但我不确定是否只是一个副作用）。

json2json[可以](https://github.com/joelvh/json2json)工作吗？（归根结底，因为我可能会编写很多这样的代码，所以我追求的是最快的 bloilerplateless coffeescript 样式编码：）

[编辑] 另一种可能的解决方案，[jDoc](https://github.com/bjorg/jdoc)，也是[JPath](http://www.s-anand.net/blog/jpath-xpath-for-javascript/)，但是经过一番翻找之后，似乎确实有代码已经解决了...... [jsoncsv](https://github.com/gradus/jsoncsvj)。
[编辑] 虽然 json2csv 只呈现对象的顶层，但 jsoncsv 似乎只呈现前两层左右（我还没有真正让后面的代码工作）。

# node.js - 两个永远的新贵实例

> ID：13906798
> 
> 赞同：0
> 
> 时间：2012-12-17T00:10:16.763
> 
> 标签：node.js, ubuntu, upstart, forever

我正在尝试启动两个永久实例，但它不起作用

```
#Start node@4040 node@5050 con forever

description "node@4040 node@5050"

start on (local-filesystems and net-device-up IFACE=eth0)
stop on shutdown

script
    cd /var/node/
    exec forever start -l /var/node/logs/for5050.log -o /var/node/logs/out5050.log -e /var/node/logs/err5050.log app.js 5050
    exec forever start -l /var/node/logs/for4040.log -o /var/node/logs/out4040.log -e /var/node/logs/err4040.log app.js 4040
end script 
```

有什么问题？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:53:45.417

每个进程 exec 必须在其自己的 conf 文件中。因此，在您的情况下，您需要为每个 nodejs 程序创建 2 个 upstart conf 文件。同一个 conf 文件不能运行多个 exec 命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T00:15:15.790

尝试给它们起不同的名称，例如 app1.js 和 app2.js

# c++ - Visual C++ 和 .NET 框架？

> ID：13906803
> 
> 赞同：-1
> 
> 时间：2012-12-17T00:11:32.217
> 
> 标签：c++, .net, visual-studio

使用 Visual C++ 编译器编写程序时，代码是真正的 C++ 还是 C++ 的一些古怪的 .NET 仿制品？就像 VB.NET 与标准 Visual Basic 的不同之处一样。我想开始用 C++ 进行 GUI 开发，而且我已经了解 VB.NET，所以 Visual C++ IDE 对我来说使用起来很容易和舒适。我只是不想学习真正的 C++ 的 .NET 仿制品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:23:55.197

作为一名 Windows 开发人员，迟早您将不得不以某种形式处理 .NET。这是不可避免的。不要太害怕。

关于你的问题。VisualStudio 中的 C++ 是真正按照标准实现的 C++。要使用它，您无需了解任何有关 .NET 的知识。您仍然需要学习与 .NET 无关的 Win32。Win32 可从 C++ 直接访问。

有一种东西叫做 C++/CLI。它允许使用 .NET 类、习语等。它是一个独立的东西。如果您愿意，您可以使用它，否则它不会打扰您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T00:47:07.010

编译器具有两个选项的设置 - 一种称为 C++/CLI 的互操作语言和真正的 C++，它与您可能希望找到的任何其他实现一样多，并且与 .NET 绝对没有任何关系，尽管 IDE 仍然包含 C++/CLI 模式的各种快捷方式/语法突出显示/等。不要让他们混淆你。

# java - 纤维如何在 Java 中存在

> ID：13906808
> 
> 赞同：5
> 
> 时间：2012-12-17T00:12:15.983
> 
> 标签：java, concurrency, fibers

我知道我的问题比实际问题更具学术性。在大多数情况下，使用类似 Fiber 逻辑的线程实现是可以的。但是有什么方法可以实现JVM中[描述的 Fibers 吗？](http://en.wikipedia.org/wiki/Fiber_%28computer_science%29)

是否有任何框架缺少我来实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T00:49:43.547

有/有 Java EE 框架，它们可以像 Java SE 应用程序一样拥有一个具有正常控制流的类，从而维护状态。为了在特定点通过 HTTP 运行，类实例被序列化，向客户端做出响应，并且在下一次请求时，实例被反序列化并继续。*这不是一个通用的协程解决方案，我当然不会调用纤程。*

不幸的是，它的名字让我忘记了。但这是运行单个协程将控制权转移到框架协程的特定情况。

**AOP**提供了另一种切换控制的方法。可以用来实现纤维。

# xcode - Xcode - “提供的普遍存在名称已在使用中” - 我如何找到文件夹

> ID：13906812
> 
> 赞同：1
> 
> 时间：2012-12-17T00:12:39.557
> 
> 标签：xcode, icloud

我在 Xcode 中收到这条消息：

```
 The provided ubiquity name is already in use., 
NSURL=file://localhost/var/mobile/Applications/6C748748-9689-4F40-B8D7-
CDE8CA280FF8/Documents/SharedCoreDataStores/138F8194-DCC7-4D66-859B-
B2C35BDF2984/iCloudStore.sqlite 
```

如何找到此文件 (iCloudStore.sqlite) 的位置？我试过 ~/Library/Containers 和 ~/Library/Mobile Documents。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T15:44:07.437

你可以在

```
NSURL *DocumentsURL = [[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask].lastObject;

NSURL *tempURL = DocumentsURL;
tempURL = [tempURL URLByAppendingPathComponent:@"sharedCoreDataStores"];
tempURL = [tempURL URLByAppendingPathComponent:@"138F8194-DCC7-4D66-859B-B2C35BDF2984"];
tempURL = [tempURL URLByAppendingPathComponent:@"iCloudStore.sqlite"];
NSURL *iCloudStoreURL = tempURL; 
```

iCloudStoreURL 是您想要的。您可以使用 iCloud 演示代码从核心数据创建此商店。对？

`[coordinator addPersistentStore]`您已在函数中传递了此商店 URL 。

* * *

在将 iCloud 与 Core Data 一起使用时，您应该注意两个位置和一个名称：

## 1.**商店网址**

iCloud存储真实文件，它将所有数据存储在本地文件夹中。每个设备都有一个存储文件。它将自动从 iCloud 传输数据。

添加 iCloud 商店时，您将此商店 url 传递给`[coordinator addPersistentStore]`功能。

然后存储文件将位于该 URL。

它应该在本地文件夹中，例如documentsDirectory 中的子目录

```
for example: 
[[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask].lastObject URLByAppendingComponent:@"iCloudStore"]; 
```

或其他目录。我的选择是

```
[[[NSFileManager defaultManager] URLsForDirectory:NSLibraryDirectory inDomains:NSUserDomainMask].lastObject URLByAppendingComponent:@"iCloudStore"]; 
```

## 2\. **iCloud CoreData 内容 URL**

此 URL 位于 iCloud 容器（或代号为“ubiquity 容器”）中。它仅用于记录核心数据内容的变化。

在云中思考。`[NSFileManager URLForUbiquityContainer:nil]`是那朵云的位置。

`iCloud CoreData Content URL`用于此泛在容器上的所有 iCloud 核心数据数据库传输日志。（不同应用程序上的不同核心数据数据库可能在同一个泛在容器中，并将日志都存储在这个容器中`contentURL`。）

当您设置添加 iCloud Store 的选项时，您会传递此 URL：

```
 NSDictionary *cloudOptions =
 @{  NSMigratePersistentStoresAutomaticallyOption:@(YES),
 NSInferMappingModelAutomaticallyOption      :@(YES),
 NSPersistentStoreUbiquitousContentNameKey   :self.iCloudCoreDataContentName,
 NSPersistentStoreUbiquitousContentURLKey    :self.iCloudCoreDataContentURL} 
```

此 URL 应该是 iCloud 容器的子目录，例如`[[NSFileManager URLForUbiquityContainer:nil] URLByAppendingComponent:@"CoreDataLogs"]`.

此属性在选项中是可选的。如果您省略它，iCloud CoreData 内容 URL 将为`[NSFileManager URLForUbiquityContainer:nil]`.

## 3\. **iCloud CoreData 内容名称**

为核心数据数据库指定唯一名称。每个 iCloud 商店都需要它。不同的 iCloud 商店应该有不同的名称。

当您设置添加 iCloud Store 的选项时，您会传递此名称：

```
 NSDictionary *cloudOptions =
 @{  NSMigratePersistentStoresAutomaticallyOption:@(YES),
 NSInferMappingModelAutomaticallyOption      :@(YES),
 NSPersistentStoreUbiquitousContentNameKey   :self.iCloudCoreDataContentName,
 NSPersistentStoreUbiquitousContentURLKey    :self.iCloudCoreDataContentURL} 
```

# php - 跳过导入 csv 的第一行

> ID：13906813
> 
> 赞同：0
> 
> 时间：2012-12-17T00:13:18.557
> 
> 标签：php, mysql, csv, import

需要添加一个额外的行来跳过 csv 文件上带有标题的第一行。但我不知道从哪里开始。

```
<?php

if(isset($_POST["submit"]))
{
$host="localhost"; // Host name.
$db_user="root"; //mysql user
$db_password=""; //mysql pass
$db='local'; // Database name.
$conn=mysql_connect($host,$db_user,$db_password) or die (mysql_error());
mysql_select_db($db) or die (mysql_error());

echo $filename=$_FILES["file"]["name"];
$ext=substr($filename,strrpos($filename,"."),(strlen($filename)-strrpos($filename,".")));

  $file = fopen($filename, "r");
    $handle = fopen("$filename", "r");
    while (($data = fgetcsv($handle, 100000, ",")) !== FALSE)
    {
    $import="INSERT into customers(fname,lname,company,address,city,state,country,postal_code,phone,email) values('$data[0]','$data[1]','$data[2]','$data[3]','$data[4]','$data[5]','$data[6]','$data[7]','$data[8]','$data[9]')";
    mysql_query($import) or die(mysql_error());
    }
    fclose($handle);
    print "Import done";
    }
    else
    {
    print "<form enctype='multipart/form-data' method='post'>";
    print "Type file name to import:";
    print "<input type='file' name='file' id='file'>";
    print "<input type='submit' name='submit' value='submit'></form>";
    }
?> 
```

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T00:17:08.280

考虑使用[`SplFileObject`](http://php.net/SplFileObject)来[读取 CSV 文件](http://php.net/class.splfileobject#splfileobject.constants.read-csv)，它可以更好地支持迭代，例如与标准 SPL 结合，`LimitIterator`这是小菜一碟：

```
$file = new SplFileObject($filename);
$file->setFlags(SplFileObject::READ_CSV);
$it = new LimitIterator($file, 1);
foreach($it as $data) {
    $mask = "INSERT INTO customers (fname, lname, company, address, city, state, country, postal_code, phone, email) values('%s','%s','%s','%s','%s','%s','%s','%s','%s','%s')";
    $sql  = vsprintf($mask, $data);
    mysql_query($sql) or die(mysql_error());
} 
```

*另外请注意：*

> [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T00:15:28.553

`fgetcsv($handle, 100000, ",")`在while循环之前

```
$file = fopen($filename, "r");
    $handle = fopen("$filename", "r");

    $headers = fgetcsv($handle, 100000, ","); //gran headers, 

    // you can do additional check to see if headers are grabbed or is the exist or if it is first lien of data (depends if you are 100% sure that headers will exist)
    //and if they are not, reset the handle
    // rewind($handle);

    while (($data = fgetcsv($handle, 100000, ",")) !== FALSE)
    {
    $import="INSERT into customers(fname,lname,company,address,city,state,country,postal_code,phone,email) values('$data[0]','$data[1]','$data[2]','$data[3]','$data[4]','$data[5]','$data[6]','$data[7]','$data[8]','$data[9]')";
    mysql_query($import) or die(mysql_error());
    }
    fclose($handle);
    print "Import done";
    }
    else
    {
    print "<form enctype='multipart/form-data' method='post'>";
    print "Type file name to import:";
    print "<input type='file' name='file' id='file'>";
    print "<input type='submit' name='submit' value='submit'></form>";
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T00:19:23.290

简单的计数可以工作

```
$count = 0;
while (($data = fgetcsv($handle, 100000, ",")) !== FALSE)
{
    if($count)
    {
        $import="INSERT into customers(fname,lname,company,address,city,state,country,postal_code,phone,email) values('$data[0]','$data[1]','$data[2]','$data[3]','$data[4]','$data[5]','$data[6]','$data[7]','$data[8]','$data[9]')";
        mysql_query($import) or die(mysql_error());
    }
    $count++;
} 
```

# jquery - jquery手机iphone页面闪烁

> ID：13906817
> 
> 赞同：1
> 
> 时间：2012-12-17T00:14:01.787
> 
> 标签：jquery, iphone, jquery-mobile

我正在开发一个移动页面应用程序，其中一个页面很长，（这个页面太长了，如果我必须从头到尾查看它，我必须在 Iphone 上滚动 6 次。）

此页面加载后，它会跳转并稳定下来。或加载后闪烁，对用户来说非常烦人。

此页面上的数据正在运行时呈现。我有空的 div 元素，我在运行时使用 jquery pageshow 事件填充字段名称和值。

我发现如果我通过删除一些正在渲染的数据来缩短长度，这个闪烁就会消失，但是我不能这样做

业务不想更改设计，我尝试了各种技巧来防止这种闪烁，现在我已经没有想法了，我尝试延迟显示页面，直到页面完全加载，不起作用尽管

你能帮忙吗，有什么办法可以防止这个页面闪烁。

谢谢艾拉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T06:46:57.203

您所指的是所谓的“闪烁”，因为已经有据可查，并在这里问了几次：

[jQuery Mobile 在 iPad 上的页面转换时闪烁](https://stackoverflow.com/questions/7860478/jquery-mobile-blinking-at-page-transitions-on-pad)

[jQueryMobile 页面导航上的过渡闪烁](https://stackoverflow.com/questions/7671926/transitions-blink-on-jquerymobile-pages-navigation)

[https://github.com/jquery/jquery-mobile/issues/4024](https://github.com/jquery/jquery-mobile/issues/4024)

我自己在我的 Android 手机（v4.0.4）上使用基于 PhoneGap 构建的应用程序时遇到了同样的问题：与我的主页（包含一个 long `data-role="listview"`）之间的转换会导致屏幕在执行前闪烁。我的诀窍是添加`user-scalable=no`到视口元标记中：

```
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1" /> 
```

尽管其他人通过覆盖 jQuery mobiles css 和/或完全禁用页面转换而取得了成功：

CSS

```
.ui-page {
    -webkit-backface-visibility: hidden;
} 
```

JS

```
$(document).bind("mobileinit", function () {
    $.mobile.defaultPageTransition = "none";
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T02:56:24.513

对于 jQuery Mobile，使您的`footer` ***持久化***并防止该部分动画化。

```
<div data-role="footer" data-id="foot" data-position="fixed">
  <h4>Page 1 Footer</h4>
</div><!-- /footer --> 
```

[**jsFiddle 演示**](http://jsfiddle.net/zCvzB/1/)

* * *

**编辑：最新动态**

上面的 jsFiddle jQuery Mobile Demo 已经修改为使用 jQuery 1.7.2 和 jQuery Mobile 1.2.0。

我刚刚发现在使用 jsFiddle中的函数期间将 jsFiddle 与 jQuery 1.8.2 和 jQuery Mobile 1.2.0`overflow`一起使用时无法按预期工作。`hidden``scrollBars`

该功能是在jQuery动画期间隐藏浏览器滚动条，防止元素在页面更改的动画期间短暂跳转。

浏览器的滚动条实际上​​是隐藏的，但是该`body`部分中的元素继续***“跳跃”***，就好像滚动条仍然存在一样。

***当 jsFiddle jQuery 设置为 1.7.2 时，不会发生这种情况。***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T00:16:10.350

您可以实现一个小加载图标，直到所有数据都加载完毕。这将为用户提供无缝体验，但仍符合业务需求。

类似于有一个不显示的包装器 div。加载时，加载 div 将显示 loading.png 的背景图像。加载内容后，将包装 div 设置为显示和删除加载 div。

虽然以不同的方式加载数据会更好，但我知道这并不总是可能的。

# php - PHP：非法的字符串偏移量

> ID：13906822
> 
> 赞同：2
> 
> 时间：2012-12-17T00:15:27.727
> 
> 标签：php

我[的开源项目](http://www.github.com/audith/Persephone)工作得很好，直到我在休息 6 个月后开始工作。更新到最新的 XAMPP，开始出现大量奇怪的错误，其中之一是：

我有 Input 类，调用者方法为：

```
<?php
class Input
{
    public function __call ( $name , $arguments )
    {
        if ( !in_array( $name, array( "post", "get", "cookie", "request", "server", "env" ) ) )
        {
            throw new Exception( "Input::" . $name . "() not declared!" );
        }

        $_name_of_superglobal = "_" . strtoupper( $name );
        $_max_iteration_level_for_cleanup = in_array( $name, array( "server", "env" ) ) ? 1 : 10;

        # $arguments[0] is the index of the value, to be fetched from within the array.
        if ( !empty( $arguments[0] ) and array_key_exists( $arguments[0], $this->$name ) )
        {
            return $this->$name[ $arguments[0] ];
        }
        elseif ( !empty( $arguments[0] ) and array_key_exists( $arguments[0], $GLOBALS[ $_name_of_superglobal ] ) )
        {
            return $this->$name[ $this->clean__makesafe_key( $arguments[0] ) ] = $this->clean__makesafe_value( $GLOBALS[ $_name_of_superglobal ][ $arguments[0] ], array(), true );
        }
        elseif ( !empty( $arguments[0] ) and !array_key_exists( $arguments[0], $GLOBALS[ $_name_of_superglobal ] ) )
        {
            return null;
        }
        else
        {
            if ( $this->_is_cleanup_done_for[ $name ] === true )
            {
                return $this->$name;
            }
            $this->_is_cleanup_done_for[ $name ] = true;
            return $this->$name = $this->clean__makesafe_recursively( $GLOBALS[ $_name_of_superglobal ], $_max_iteration_level_for_cleanup );
        }
    }
?> 
```

这段代码的工作原理是这样的：你向它询问某些超全局值，它会按需返回它的干净版本：

```
<?php
$input = new Input();
$server_name = $input->server("SERVER_NAME");
?> 
```

容易吧？好吧，在我用 XAMPP 更新 PHP 之后，它就不起作用了[编辑：它起作用了，带有警告消息] - 错误是：

```
PHP Warning:  Illegal string offset 'SERVER_NAME' in S:\...\kernel\input.php on line 159 
```

行，对应于代码行：

```
return $this->$name[ $this->clean__makesafe_key( $arguments[0] ) ] = $this->clean__makesafe_value( $GLOBALS[ $_name_of_superglobal ][ $arguments[0] ], array(), true ); 
```

这是愚蠢的：`$_name_of_superglobal`= "_SERVER" 那里，和`$arguments[0]`= "SERVER_NAME" 和整体分配是被清理的字符串。

那里可能有什么问题？我完全迷失在这里！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-22T23:14:20.513

**介绍**

我知道这已经得到解答，但这`Illegal string offset ERROR`不是我在这里看到的唯一问题。我相信它们是引入您想要的灵活性的更好方法，并且仍然可以在没有所有这些`complexity`和使用`$GLOBALS`.

您可以从查看以下内容开始：

*   [PHP中的全局变量被认为是不好的做法吗？如果是这样，为什么？](https://stackoverflow.com/questions/1557787/are-global-variables-in-php-considered-bad-practice-if-so-why)
*   [PHP 全局函数](https://stackoverflow.com/questions/5166087/php-global-in-functions)
*   [为什么全局状态是魔鬼，以及如何避免使用它](http://tomnomnom.com/posts/why-global-state-is-the-devil-and-how-to-avoid-using-it)

**快速复审**

```
$input = new Input();                          <-- You add to initiate a class 
$server_name = $input->server("SERVER_NAME");
      ^                  ^           ^
      |                  |           |
    variable             |           |
                     Variable        |
                                  Variable 
```

***不知道是什么阻止你只是使用***

```
 $_SERVER['SERVER_NAME'] = makeSave($_SERVER['SERVER_NAME']);
                                  ^
                                  |- I guess this is what you want to introduce 
```

**假设 - 你想要灵活性**

以免假设您想要灵活性和递归，那么您的类调用可以像以下那样灵活：

```
print_r($input->SERVER_NAME);            |
print_r($input['SERVER_NAME']);          |----- Would Produce same result 
print_r($input->SERVER_NAME());          | 
```

如果这是您想要的那种灵活性，我会考虑将您结合起来`__get`，`__call`并且`ArrayAccess`完全...

**让我们想象一下**

```
$var = array();
$var["name"] = "<b>" . $_SERVER['SERVER_NAME'] . "</b>";
$var["example"]['xss'] = '<IMG SRC=javascript:alert("XSS")>';
$var["example"]['sql'] = "x' AND email IS NULL; --";
$var["example"]['filter'] = "Let's meet  4:30am Ât the \tcafé\n";

$_SERVER['SERVER_NAME'] = $var ; // Just for example 
```

**现在回到你的格式**

```
$makeSave = new MakeSafe(MakeSafe::SAVE_XSS | MakeSafe::SAVE_FILTER);
$input = new Input($_SERVER, $makeSafe);

//You can 
print_r($input->SERVER_NAME);

//Or
print_r($input['SERVER_NAME']);

//Or
print_r($input->SERVER_NAME()); 
```

[他们都会输出](http://eval.in/10975)

```
Array
(
    [0] => &lt;b&gt;localhost&lt;/b&gt;
    [1] => Array
        (
            [0] => &lt;IMG SRC=javascript:alert(&quot;XSS&quot;)&gt;
            [1] => x&#039; AND email IS NULL; --
            [2] => Let&#039;s meet  4:30am &#195;&#130;t the &#9;caf&#195;&#169;&#10;
        )

) 
```

[观看现场演示](http://eval.in/10975)

**您的 INPUT 类已修改**

```
class INPUT implements \ArrayAccess {
    private $request = array();
    private $makeSafe;

    public function __construct(array $array, MakeSafe $makeSafe) {
        $this->request = $array;
        $this->makeSave = $makeSafe;
    }

    function __get($offset) {
        return $this->offsetGet($offset);
    }

    function __call($offset, $value) {
        return $this->offsetGet($offset);
    }

    public function setRequest(array $array) {
        $this->request = $array;
    }

    public function offsetSet($offset, $value) {
        trigger_error("Error: SUPER GLOBAL data cannot be modified");
    }

    public function offsetExists($offset) {
        return isset($this->request[$offset]);
    }

    public function offsetUnset($offset) {
        unset($this->request[$offset]);
    }

    public function offsetGet($offset) {
        return isset($this->request[$offset]) ? $this->makeSave->parse($this->request[$offset]) : null;
    }
} 
```

**让你的 Save 方法成为一个类**

```
class MakeSafe {
    const SAVE_XSS = 1;
    const SAVE_SQL = 2;
    const SAVE_FILTER_HIGH = 4;
    const SAVE_FILTER_LOW = 8;
    const SAVE_FILTER = 16;

    private $options;

    function __construct($options) {
        $this->options = $options;
    }

    function escape($value) {
        if ($value = @mysql_real_escape_string($value))
            return $value;
        $return = '';
        for($i = 0; $i < strlen($value); ++ $i) {
            $char = $value[$i];
            $ord = ord($char);
            if ($char !== "'" && $char !== "\"" && $char !== '\\' && $ord >= 32 && $ord <= 126)
                $return .= $char;
            else
                $return .= '\\x' . dechex($ord);
        }
        return $return;
    }

    function parse($mixed) {
        if (is_string($mixed)) {
            $this->options & self::SAVE_XSS and $mixed = htmlspecialchars($mixed, ENT_QUOTES, 'UTF-8');
            $this->options & self::SAVE_SQL and $mixed = $this->escape($mixed);
            $this->options & self::SAVE_FILTER_HIGH and $mixed = filter_var($mixed, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_HIGH);
            $this->options & self::SAVE_FILTER_LOW and $mixed = filter_var($mixed, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_LOW);
            $this->options & self::SAVE_FILTER and $mixed = filter_var($mixed, FILTER_SANITIZE_STRING, FILTER_FLAG_ENCODE_HIGH | FILTER_FLAG_ENCODE_LOW);
            return $mixed;
        }

        if (is_array($mixed)) {
            $all = array();
            foreach ( $mixed as $data ) {
                $all[] = $this->parse($data);
            }
            return $all;
        }
        return $mixed;

        return $this->final;
    }
} 
```

**结论**

我是否说过我知道这已得到解答，但我希望这可以帮助其他人不要编写像您这样的代码...

**PS：这也修复了您的 PHP 警告：非法字符串偏移错误**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T10:03:11.003

我在[这里](https://stackoverflow.com/questions/12191528/warning-illegal-string-offset-parameter-in-php-file)找到了答案。显然，这条线

```
return $this->$name[ $this->clean__makesafe_key( $arguments[0] ) ] = $this->clean__makesafe_value( $GLOBALS[ $_name_of_superglobal ][ $arguments[0] ], array(), true ); 
```

应该是这样的：

```
return $this->{$name}[ $this->clean__makesafe_key( $arguments[0] ) ] = $this->clean__makesafe_value( $GLOBALS[ $_name_of_superglobal ][ $arguments[0] ], array(), true ); 
```

由于优先。

# c# - 在 DataGrid (WPF) 中编辑单元格

> ID：13906826
> 
> 赞同：1
> 
> 时间：2012-12-17T00:15:46.510
> 
> 标签：c#, wpf, datagrid, datagridview, wpfdatagrid

我是 WPF 的新手。我曾经在Winforms工作过。

在 Winforms 中，当我想要一个单元格值时，我有允许我更改的 DataGridView。

只需使用：

```
dataGridView[columnIndex, rowIndex].Value = "New Value"; 
```

有用。

如何使用 WPF 中的 DataGrid 完成此操作？我一直在寻找完整的堆栈，并且可以找到一种简单的方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:29:24.260

好的，最简单的处理方法`DataGrid`是绑定到`ItemSource`.

下面的示例显示了如何绑定您的列表以及如何更改更新 DataGrid。

```
public partial class MainWindow : Window
{
    private ObservableCollection<ConnectionItem> _connectionitems = new ObservableCollection<ConnectionItem>();

    public MainWindow()
    {
        InitializeComponent();
        ConnectionItems.Add(new ConnectionItem { Name = "Item1", Ping = "150ms" });
        ConnectionItems.Add(new ConnectionItem { Name = "Item2", Ping = "122ms" });
    }

    public ObservableCollection<ConnectionItem> ConnectionItems
    {
        get { return _connectionitems; }
        set { _connectionitems = value; }
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        // to change a value jus find the item you want in the list and change it
        // because your ConnectionItem class implements INotifyPropertyChanged
        // ite will automaticly update the dataGrid

        // Example
        ConnectionItems[0].Ping = "new ping :)";
    }
}

public class ConnectionItem : INotifyPropertyChanged
{
    private string _name;
    private string _ping;

    public string Name
    {
        get { return _name; }
        set { _name = value; NotifyPropertyChanged("Name"); }
    }

    public string Ping
    {
        get { return _ping; }
        set { _ping = value; NotifyPropertyChanged("Ping"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    /// <summary>
    /// Notifies the property changed.
    /// </summary>
    /// <param name="property">The info.</param>
    public void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

xml:

```
<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication4"
        xmlns:properties="clr-namespace:WpfApplication4.Properties"
        Title="MainWindow" Height="300" Width="400" Name="UI" >
    <Grid>
        <DataGrid Name="dataGridView" ItemsSource="{Binding ElementName=UI,Path=ConnectionItems}" Margin="0,0,0,40" />
        <Button Content="Change" Height="23" HorizontalAlignment="Left" Margin="5,0,0,12" Name="button1" VerticalAlignment="Bottom" Width="75" Click="button1_Click" />
    </Grid>
</Window> 
```

我添加了一个按钮来显示当您更改列表中的某些内容时数据如何更新，ConnectionItem 类是您存储数据网格所有信息的地方。

希望这可以帮助

# java - 确定 LWJGL 中的鼠标按钮释放

> ID：13906841
> 
> 赞同：1
> 
> 时间：2012-12-17T00:17:38.550
> 
> 标签：java, mouse, lwjgl

我在 LWJGL 中有一个程序，其中有一系列按钮。我正在尝试使用`Mouse.getEventButton()`and`Mouse.getEventButtonState()`来确定鼠标何时被*释放*，但似乎都没有工作。添加了几条打印语句进行调试后，似乎`getEventButton()`不管鼠标在做什么，总是返回0，并且`getEventButtonState()`总是返回false。到目前为止，我使用的所有其他鼠标方法都表现正常。知道会发生什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T16:50:38.573

可以通过[本教程中描述的](http://ninjacave.com/lwjglbasics2)键盘类比来完成。

```
while (Mouse.next()){
    if (Mouse.getEventButtonState()) {
        if (Mouse.getEventButton() == 0) {
            System.out.println("Left button pressed");
        }
    }else {
        if (Mouse.getEventButton() == 0) {
            System.out.println("Left button released");
        }
    }
} 
```

# queue - 分布式限速

> ID：13906844
> 
> 赞同：6
> 
> 时间：2012-12-17T00:17:50.877
> 
> 标签：queue, message-queue, celery, throttling, rate-limiting

我有多个服务器/工作人员通过任务队列执行 API 请求。（带有 Memcached 和 Celery 队列的 Django）API 请求被限制为每秒 10 个请求。如何对它进行速率限制，以使请求总数（所有服务器）不超过限制？

我已经查看了一些相关的速率限制问题，我猜它们专注于更线性、非并发的场景。我应该采取什么样的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:42:42.123

你看过[Guava](http://code.google.com/p/guava-libraries/)项目的[Rate Limiter吗？](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/RateLimiter.html)他们在最新版本之一中引入了此类，它似乎部分满足了您的需求。

当然它不会计算分布式环境中多个节点的速率限制，但你可以做的是根据正在运行的节点数动态配置速率限制（即对于 5 个节点，你将有 2 个 API 请求的速率限制一秒）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-19T14:39:50.280

I have been working on an opensource project to solve this exact problem called [Limitd](https://github.com/auth0/limitd). Although I don't have clients for other technologies than node yet, the protocol and the idea are simple.

Your feedback is very welcomed.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-04T06:44:07.000

不幸的是，我解决了这个问题不是因为你的技术：[带宽限制/令牌桶](https://github.com/bandwidth-throttle/token-bucket)

如果你想实现它，这里是实现的想法：

这是一种[令牌桶算法](https://en.wikipedia.org/wiki/Token_bucket)，它将包含的令牌转换为时间戳，因为它上次完全为空。每次消费都会更新这个时间戳（锁定），以便每个进程共享相同的状态。

# java - 将变量传递给 ActionListener

> ID：13906846
> 
> 赞同：0
> 
> 时间：2012-12-17T00:18:00.300
> 
> 标签：java, variables, for-loop, jbutton, actionlistener

好的，所以我在其他任何地方都找不到我需要的东西，所以就这样吧。

我将如何将变量传递给 ActionListener() 内的函数？这是我的代码。

```
for(int y = 0; y < 5; y ++) {
        for(int x = 0; x < 5; x ++) {
            currentRect = (y * 5) + x;
            mainButtons.get(currentRect).addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent event) {
                    answerField.setText(questions.get(currentRect).getAnswer());
                }
            });
        }
    } 
```

错误在第六行，它在“currentRect”下划线，然后抱怨这个，

> *不能在不同方法中定义的内部类中引用非最终变量 currentRect*

所做的是遍历一组 JButtons (javax.swing) ，然后根据它们在 ArrayList 中的位置分配适当的动作侦听器，但是，我似乎无法将存储其位置的变量传递给动作侦听器本身，所以我被困住了。我在写这篇文章时意识到我真的应该使用一个 foreach，所以以后会改变它。（请注意谁会指出这一点）我意识到我不能也使该变量成为最终变量，因为它在 for 循环期间发生了变化。我还尝试将 currentRect ((y * 5) + x) 的值传递给函数，但无济于事。

谢谢，

安德鲁吉斯17

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T00:34:09.000

解决方案很简单，只需在块内声明一个新的 final 变量：

```
for(int y = 0; y < 5; y ++) {
        for(int x = 0; x < 5; x ++) {
            final int currentRect = (y * 5) + x; 
```

或者如果您需要块外的 currentRect 的值：

```
for(int y = 0; y < 5; y ++) {
        for(int x = 0; x < 5; x ++) {
            currentRect = (y * 5) + x;
            final int currentRect2 = currentRect; 
```

并且您在匿名类中使用 currentRect2 而不是 currentRect 。这是违反直觉的，因为看起来*最终*变量每次都在重新初始化，但实际上，您必须将其视为一个新变量，对于块的每个循环仅初始化一次。

然而，这并不是解决这个问题的最聪明的方法；因为您正在为每个按钮创建一个全新的匿名类，只是为了存储它们之间不同的小值。这些可以在有限的设备上快速加起来。一个更好的主意是将 currentRect 的值存储为每个按钮的标签。这样，您可以在外部类中声明匿名类的单个实例并将其重用于所有按钮。

# hadoop - 将 csv 数据加载到 Hbase

> ID：13906847
> 
> 赞同：9
> 
> 时间：2012-12-17T00:18:05.177
> 
> 标签：hadoop, hbase

我对 hadoop 和 hbase 非常陌生，并且在我找到的每个教程中都有一些概念性问题让我感到困惑。

我在我的 win 7 系统上的 ubuntu VM 内的单个节点上运行 hadoop 和 hbase。我有一个 csv 文件，我想将它加载到单个 hbase 表中。

这些列是：loan_number、borrower_name、current_distribution_date、loan_amount

我知道我需要编写一个 MapReduce 作业来将这个 csv 文件加载到 hbase 中。以下教程描述了编写此 MapReduce 作业所需的 Java。 [http://salsahpc.indiana.edu/ScienceCloud/hbase_hands_on_1.htm](http://salsahpc.indiana.edu/ScienceCloud/hbase_hands_on_1.htm)

我缺少的是：

我在哪里保存这些文件以及在哪里编译它们？我应该在运行 Visual Studio 12 的 win 7 机器上编译它，然后将其移动到 ubuntu vm 吗？

我读了这个 SO 问题和答案，但我想我仍然缺少基础知识：[Loading CSV File into Hbase table using MapReduce](https://stackoverflow.com/questions/12383237/loading-csv-file-into-hbase-table-using-mapreduce)

我找不到任何涵盖这些基本 hadoop/hbase 物流的东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-18T14:48:29.697

无需编写 MapReduce 作业即可将数据批量加载到 HBase。有几种方法可以将数据批量加载到 HBase：

1) 使用 HBase 工具`importtsv`，例如`completebulkload` [http://hbase.apache.org/book/arch.bulk.load.html](http://hbase.apache.org/book/arch.bulk.load.html)

2）使用Pig批量加载数据。例子：

```
A = LOAD '/hbasetest.txt' USING PigStorage(',') as 
      (strdata:chararray, intdata:long);
STORE A INTO 'hbase://mydata'
        USING org.apache.pig.backend.hadoop.hbase.HBaseStorage(
              'mycf:intdata'); 
```

3) 使用 HBase API 以编程方式进行。我有一个名为[hbaseloader](https://github.com/dpino/hbase-loader)的小项目，它将文件加载到 HBase 表中（表中只有一个包含文件内容的*ColumnFamily*）。看看它，你只需要定义你的表的结构并修改代码来读取一个csv文件并解析它。

4) 使用您提到的示例中的 MapReduce 作业以编程方式执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T06:00:47.250

```
Where do I save these files and where do I compile them? Should I compile this on my win 7 machine running visual studio 12 and then move it to the ubuntu vm? 
```

您可以将 Map Reduce 类保存在任何地方（在 Win 7 或 Ubuntu VM 中）。你也可以在任何地方编译它。只需使用您创建的类创建一个 Jar 文件，然后使用该 jar 在 VM 中运行 map reduce。

然后在您的 Ubuntu VM 中启动 Hadoop 后，您可以使用以下命令运行您创建的 map reduce 类。

```
<Path To Hadoop Bin>/hadoop jar <Path to Jar>/<Jar Name>.jar <Map Reduce Class Name> <Class Arguments> ... 
```

当您运行上述命令时，您编写的 Map Reduce 类将与 Hbase 表一起被执行。

希望这可以帮助

# sql - 如何根据排名值从表中选择行

> ID：13906849
> 
> 赞同：3
> 
> 时间：2012-12-17T00:18:07.017
> 
> 标签：sql, select

我有一个具有以下（简化）结构的表：

```
Order, Status, Sequence
1000, New, 0
1000, Viewed, 1
1000, Shipped, 2
1001, New, 0
1002, New, 0
1002, Viewed, 1
1002, New, 2 
```

我想要一个 SELECT 语句，它将返回每个订单的最大序列号的行。所以，在上面的例子中，我希望得到的数据集是：

```
1000, Shipped, 2
1001, New, 0
1002, New, 2 
```

有没有一种简单的方法可以做到这一点？我似乎无法构建一个可以做到这一点的 WHERE 表达式。

回应一些评论：

*   出现这个问题的地方有几个正在使用的 DMBS：MS-SQL、MySQL、Oracle 和 Access。
*   涉及的 DMBS 如此之多，因为正在开发的系统正在整合来自组织中其他数据库的数据。出于这个原因，我无法控制保留字的列名，但我知道需要转义这些名称。
*   许多子查询组合、GROUP BY、DISTINCT、MAX 和 COUNT 都尝试过，但都没有成功。由于查询结果总是以 Excel 结尾，我一直在抓取所有行并在 Excel 中排序和删除重复项。我的偏好是通过让 SQL 查询完成工作来跳过这一步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T00:22:14.503

因为你没有提到你的 RDBMS，你可以试试下面这个查询，

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  Order, MAX(Sequence) maxValue
            FROM tableName
            GROUP BY Order
        ) b ON a.Order = b.Order AND
                a.Sequence = b.maxValue 
```

这适用于大多数 RDBMS。

如果您的 RDBMS 支持`Window Function`，您可以这样做，

```
SELECT  Order, Status, Sequence
FROM
    (
        SELECT  Order, Status, Sequence,
                ROW_NUMBER() OVER (PARTITION BY Order 
                                    ORDER BY Sequence DESC)
        FROM    TableName
    ) derivedTable 
```

请记住`ORDER`( *also `SEQUENCE`but not all* ) 是保留关键字，必须转义。转义字符应取决于您使用的 RDBMS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T00:48:35.513

SQL 模式：finding_the_max 总是可以用 NOT EXISTS*一个更大*的来表示：

```
SELECT *
FROM ztable zt
WHERE NOT EXISTS (
    SELECT *
    FROM ztable nx
    WHERE nx.zorder = zt.zorder
    AND nx.zsequence > zt.zsequence
    ); 
```

# android - ListView 中偶尔出现不需要的空项目

> ID：13906851
> 
> 赞同：0
> 
> 时间：2012-12-17T00:18:17.987
> 
> 标签：android, listview, empty-list

我有一个 ListView，其中每一行都是一个 TextView，并显示一行文本。我遇到了一个问题，有时会出现不需要的空行。一旦列表滚动经过该特定区域，空行就会消失。

在调试器中暂停应用程序后，我使用以下代码验证了我的列表行包含正确的信息。输出中没有任何内容显示为空或 null 等。

```
for (int i = 0; i<list.getChildCount(); i++) { 

     System.out.print((TextView) list.getChildAt(i)).getText());
} 
```

这显示了我预期的信息。

我还检查了支持我的适配器的数据是否有空条目、新行等。

我在 Adapter 中的 getView() 方法如下：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        TextView t;

        if (convertView == null) {
            convertView = mInflator.inflate(R.layout.single_message_row, null);
            t = (TextView) convertView;
            t.setMovementMethod(LinkMovementMethod.getInstance());
            t.setTextSize(mMsgSize);
        }

        else {
            t = (TextView) convertView;
        }

        CharSequence text = get(position);
        t.setText(text);

        return t;
    } 
```

下面是演示问题的图像（红色区域）：

![在此处输入图像描述](../Images/151847e5f93267426d0d55549516df16.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:31:48.037

更改 getView 方法后尝试：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
 if(row==null){
  LayoutInflater inflater=getLayoutInflater();
  row=inflater.inflate(R.layout.single_message_row, parent, false);

 }
  TextView t=(TextView)row.findViewById(R.id.yourtextview);
   t.setText("position "+position);
   t.setMovementMethod(LinkMovementMethod.getInstance());
   t.setTextSize(mMsgSize);

   CharSequence text = get(position);
   t.setText(text);

        return row;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:11:09.167

看来问题是由于`match_parent`在 ListView 中使用我的 TextView 宽度引起的。将其更改为`wrap_content`似乎已修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T11:40:18.753

对于 中出现的不需要的空列表项`ListView`，我尝试了以下操作：

```
 List<String> listofItems;
         String strlist=listofItems.get(position);

         if(strlist.isEmpty())
        {
            remove(strlist);
        } 
```

“位置”是我在 View getView 方法中作为参数得到的，因为我正在实现一个自定义适配器。它对我来说很好！

# blackberry - 如何从黑莓java中的bbm和电子邮件链接检测第三方应用程序的自定义url

> ID：13906853
> 
> 赞同：1
> 
> 时间：2012-12-17T00:18:39.613
> 
> 标签：blackberry, blackberry-jde

要求：当用户按下回车键时，例如`bbApp001://screen1?param1=1234567890?param2=12345678`

设备中的应用程序之一在哪里`bbApp001`；`screen1`是在应用程序中创建的屏幕之一；并且`param1`是与链接一起发送的第一个参数，与`param 2`.

在 BBM 消息或电子邮件中，将调用相应的应用程序，并将其作为上下文。

1.  如何`urls(bbApp001://screen1)`从黑莓中的电子邮件或 bbm 链接检测第三方应用程序的自定义

2.  如果可以完成上述操作，那么如何发送带有电子邮件和 bbm 链接的内容，以便当用户单击相应的应用程序时启动
    注意：首先 - 我尝试使用从另一个应用程序启动， `ApplicationManager.getApplicationManager().launch("bbApp001?screen1&param1")`但我的要求是触发/调用一旦用户单击电子邮件或 bbm 消息，该应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:43:35.383

这是解释here。请尝试让我们知道。

[http://supportforums.blackberry.com/t5/Java-Development/Launching-Blackberry-Application-via-a-Custom-URL-Scheme/td-p/1395479](http://supportforums.blackberry.com/t5/Java-Development/Launching-Blackberry-Application-via-a-Custom-URL-Scheme/td-p/1395479)

# c# - 将弹出表单中的信息传递回原始表单

> ID：13906856
> 
> 赞同：1
> 
> 时间：2012-12-17T00:19:04.053
> 
> 标签：c#, .net, forms, properties

这个问题与之前提出的问题类似。其他问题中的解决方案对我不起作用。

我有一个包含下拉列表的表单。其中一个选项会打开一个带有另外两个下拉列表的新表单。我需要将弹出的表单中的信息传递回原始表单，而不创建它的新实例。弹出窗口中的信息将进行计算并将新项目添加到原始表单中的下拉列表中。

我尝试过使用属性，但我只是在创建新实例后才检索默认值。以这种方式传递信息的正确方法是什么？

# azure - Azure Active Directory 单点登录

> ID：13906863
> 
> 赞同：1
> 
> 时间：2012-12-17T00:20:20.363
> 
> 标签：azure, active-directory, yaf, mojoportal, azure-active-directory

我有几个运行 mojoPortal 和 Yet Another Forum 的网站，以及几个带有 ASP.net 网络表单 (vb.net) 的自定义网站。我也计划添加其他 ASP.net 网站。我希望所有站点都可以单点登录，能够为每个站点设置组和角色，并存储用户的全名、电话、电子邮件和其他自定义字段。

每个网站目前都有自己的 ASP.net 会员数据库。总共有大约1000个用户。能够将当前成员导入 Azure AD 会很好，但如果每个用户都必须创建一个新的登录帐户，那就没问题了。我从未使用过活动目录，但听起来 Azure AD 会做我想做的事。我计划将所有网站移动到 Azure 虚拟机。

在开始测试之前，我想了解单点登录是否适用于各种 ASP.net 网站，以及设置和配置的复杂程度。我可以将用户导入 AD 吗？我猜如果网站支持 AD 或 LDAP，那么 AZure AD 会起作用吗？我希望它会像在 web.config 中添加 AD 连接字符串一样简单？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:50:56.903

它可能不像添加连接字符串那么容易。广告 SSO 服务需要在您的应用程序中使用 WIF（Windows 身份框架）实现。如果您已经在使用 WIF，那么它可能就这么简单。如果没有，那么您将需要实施 WIF。

请参阅此[博客文章](http://blogs.msdn.com/b/windowsazure/archive/2012/07/12/announcing-the-developer-preview-of-windows-azure-active-directory.aspx)，以帮助您更好地了解所涉及的内容。

[http://blogs.msdn.com/b/windowsazure/archive/2012/07/12/announcing-the-developer-preview-of-windows-azure-active-directory.aspx](http://blogs.msdn.com/b/windowsazure/archive/2012/07/12/announcing-the-developer-preview-of-windows-azure-active-directory.aspx)

# python - Django-nose 奇怪的输出

> ID：13906865
> 
> 赞同：1
> 
> 时间：2012-12-17T00:20:26.010
> 
> 标签：python, django, nose

我正在为我的 django 项目尝试不同的测试工具。我也是 django 和 python 的新手。我已经在我的 virtualenv 上安装了 django 和 django-nose。我按照 django-nose 文档中的要求编辑了 settings.py 文件。当我使用命令 python manage.py test app 运行测试时，我得到以下输出：

```
Creating test database for alias 'default'...

....

DEBUG 2012-12-17 01:04:20,647 generic (10716) generic.py:261 execute "SET FOREIG
N_KEY_CHECKS=0;" with params "[]"
DEBUG 2012-12-17 01:04:20,661 generic (10716) generic.py:261 execute "SET FOREIG
N_KEY_CHECKS=0;" with params "[]"

....

............F.F.............EEEEEE.EEEEEEE 
```

一开始有很多与 DEBUG 相似的线，我用这 4 个点来表示它们。毕竟这些行都遵循看起来正常的测试报告。

所以问题是，我的设置是否有具体问题？还是正常的鼻子输出？

```
app/
    tests/
        __init__.py
        test_one.py
        test_two.py 
```

存放我的测试的地方。**init**包含测试套件。

Py.test 运行我的测试没有任何问题。

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T06:16:49.837

我发现这是同时[向南](http://south.aeracode.org/)跑和[鼻子](https://github.com/django-nose/django-nose)跑的。

`south`如果这是一个选项，您可以注释掉。如果这不起作用，请查看这个简洁的解决方案：

[http://pypede.wordpress.com/2012/06/17/disable-south-debug-logging-when-testing-apps-with-nose-in-django/](http://pypede.wordpress.com/2012/06/17/disable-south-debug-logging-when-testing-apps-with-nose-in-django/)

我的输出类似，但略有不同：

```
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
...
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]"
execute "SET FOREIGN_KEY_CHECKS=0;" with params "[]" 
```

# wordpress - 在其他类中扩展 wpdb - 当使用 get_results 进行选择时给我 null

> ID：13906867
> 
> 赞同：6
> 
> 时间：2012-12-17T00:20:51.397
> 
> 标签：wordpress

我在 WP 中添加了自定义插件（由我创建），在该插件中我有名为 BaseModel 的类，它扩展了 wpdb。

这里的问题是每次我尝试运行查询时，我都会得到 false 或 null 或空数组作为结果。

```
class BaseModel extends wpdb{

public function __construct(){
    parent::__construct(DB_HOST, DB_USER, DB_PASS, DB_NAME);
}

function get_destinations($limit, $order){
    $query = "SELECT * FROM wp_relations";

    $result = $this->get_results($query, ARRAY_A);
    var_dump($result); 
}

function get_total_destinations(){
}} 
```

有人可以告诉我出了什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T11:39:17.260

实际上它不是一个完整的 OOP 解决方案，但我通过在我的函数中添加全局 $wpdb 来解决这个问题。

```
class BaseModel {

function get_destinations($limit, $order){
    global $wpdb;
    $query = "SELECT * FROM wp_relations";

    $result = $wpdb->get_results($query, ARRAY_A);
    var_dump($result); 
}

function get_total_destinations(){
}} 
```

我希望你会发现这很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-14T04:38:29.673

[更多信息 WordPress 使用 wpdb 进行测试](https://gist.github.com/rickard2/3135689)

```
<?php
class testWPDB extends wpdb {
function prepare( $query, $arguments ){
        return vsprintf( $query, $arguments );
    }
}

class UTCW_Test_Data extends WP_UnitTestCase {
protected $utcw;
function setUp(){
    $this->utcw = UTCW_Plugin::get_instance();
}

function getWPDBMock(){
    return $this->getMock( 'testWPDB', array( 'get_results' ), array(), '', false );
}

function test_author(){
    $instance[ 'authors' ] = array( 1, 2, 3 );
    $config = new UTCW_Config( $instance, $this->utcw );
    $db = $this->getWPDBMock( 'get_results' );

    $db->expects( $this->once() )
    ->method( 'get_results' )
    ->with( $this->stringContains( 'post_author IN (1,2,3)' ) );

    $data = new UTCW_Data( $config, $db );
    $data->get_terms();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-23T21:00:45.340

我不认为你想从它延伸？如果此类将始终加载到 Wordpress 文件中，那么您将可以访问全局 $wpdb。

```
class RandomClass {

    private $wpdb = false;

    public function __construct() {
        global $wpdb;

        if (is_object($wpdb)) {
            $this->wpdb = $wpdb;
        }
    }

    public function get_results($data) {
         return $this->wpdb->get_results($data);
    }
} 
```

# opencv - opencv图像拼接

> ID：13906871
> 
> 赞同：0
> 
> 时间：2012-12-17T00:22:05.213
> 
> 标签：opencv

我已经找了几个小时，但我找不到问题。

当我想将两个图像拼接在一起时出现以下错误：

```
OopenCV error: assertion failed (y==0 || data && dims >=1 && (unsigned)y < (unsigned > size.p[0])) in unkown function... 
```

这是代码（pano.jpg 已经在算法的先前运行中拼接在一起，相同的算法确实有效......）：

```
cv::Mat img1 = imread("input2.jpg");
cv::Mat img2 = imread("pano.jpg");

std::vector<cv::Mat> vectest;
vectest.push_back(img2);
vectest.push_back(img1);
cv::Mat result;
cv::Stitcher stitcher = cv::Stitcher::createDefault( false );
stitcher.setPanoConfidenceThresh(0.01);
detail::BestOf2NearestMatcher *matcher = new detail::BestOf2NearestMatcher(false, 0.001/*=match_conf*/);
detail::SurfFeaturesFinder *featureFinder = new detail::SurfFeaturesFinder(100);
stitcher.setFeaturesMatcher(matcher);
stitcher.setFeaturesFinder(featureFinder);
cv::Stitcher::Status status = stitcher.stitch( vectest, result ); 
```

你可以在这里找到图片：

*   pano.jpg：[https ://dl.dropbox.com/u/5276376/pano.jpg](https://dl.dropbox.com/u/5276376/pano.jpg)
*   input2.jpg：[https ://dl.dropbox.com/u/5276376/input2.jpg](https://dl.dropbox.com/u/5276376/input2.jpg)

**编辑**：我自己编译了opencv 2.4.2，但仍然是同样的问题......

系统在以下行的stitcher.cpp 文件中崩溃：

```
blender_->feed(img_warped_s, mask_warped, corners[img_idx]); 
```

在这个提要函数中，它在这一行崩溃了：

```
int y_ = y - y_tl;
            const Point3_<short>* src_row = src_pyr_laplace[i].ptr<Point3_<short> >(y_);
            Point3_<short>* dst_row = dst_pyr_laplace_[i].ptr<Point3_<short> >(y); 
```

最后是 mat.hpp 中的这个断言：

```
template<typename _Tp> inline _Tp* Mat::ptr(int y)
{
    CV_DbgAssert( y == 0 || (data && dims >= 1 && (unsigned)y < (unsigned)size.p[0]) );
    return (_Tp*)(data + step.p[0]*y);
} 
```

奇怪的是这里的某些人一切都很好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T08:00:57.927

我现在拼接图像，但不使用拼接高级功能，而是通过 opencv2.4.2 对每一步进行编码。据我所知，您可以尝试一下 first `SurfFeaturesFinder`， second `BestOf2NearestMatcher`。试一试，祝你好运！

# sql-server - 如何使用 EntityFramework 聚合日期数据但不跳过没有数据的条目？

> ID：13906872
> 
> 赞同：1
> 
> 时间：2012-12-17T00:22:05.940
> 
> 标签：sql-server, entity-framework, entity-framework-4

如何使用 EntityFramework 按周聚合数据，但又不会跳过没有数据的周？因此，基本上，如果给定一周没有数据 - 我希望获得 0 或 NULL 作为该周的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:53:27.403

同意 Luke 上面的评论，如果您知道搜索中包含的周数，您可以将结果推送到预填充的 week->result 某种类型的初始化为零的 Map 上吗？

一个快速的谷歌显示这个比我聪明的家伙也喜欢这个答案：

[http://thenullreference.com/blog/analytical-queries-using-entity-framework-over-date-ranges-using-linq/](http://thenullreference.com/blog/analytical-queries-using-entity-framework-over-date-ranges-using-linq/)

# c++ - 错误：在其自己的定义中隐式实例化“类”。c++11

> ID：13906874
> 
> 赞同：0
> 
> 时间：2012-12-17T00:22:20.163
> 
> 标签：c++, c++11, initializer-list

我正在尝试学习一些关于`initializer_list<>`. 我在 c++03 上学习过，所以对我来说，它是新的。

```
template <typename T>
union Matrix4
{
    struct
    {
        T m00, m01, m02, m03;
        T m10, m11, m12, m13;
        T m20, m21, m22, m23;
        T m30, m31, m32, m33;
    };

    T m[16];
    T mm[4][4];

    Matrix4(std::initializer_list<T> values)
    {
        if (values.size() != 16)
        {
            throw InvalidArgumentException;
        }

        std::copy(values.begin(), values.end(), m);
    }

    //error: Implicit instantiation of "Matrix4<float>" within its own definition.
    static Matrix4<float> Identityf = {
        1.f, 0, 0, 0,
        0, 1.f, 0, 0,
        0, 0, 1.f, 0,
        0, 0, 0, 1.f
    };
} 
```

我明白错误在说什么。我不明白它为什么这么说。这就是为什么编译器不能处理这个？

我想要完成的是这样的：

```
typedef Matrix4<float> Matrix4f;

Matrix4f mat = Matrix4f::Identity; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T01:20:45.947

初始化静态成员`IdentifyF`需要调用`Matrix4`构造函数，该构造函数隐式实例化特化`Matrix4<float>`，但在实例化时，类模板尚未（完全）定义。

> **§ 14.7.1 [temp.inst]**
> 
> **-7-**如果需要类模板特化的隐式实例化并且模板已声明但未定义，则程序格式错误。

类（或类模板）在其类主体的右大括号中定义。

您可以通过将`IdentityF`定义移出类主体来使代码工作，直到类模板完成：

```
template <typename T>
union Matrix4
{
    // ...

    static Matrix4<float> Identityf;
};

template<typename T>
Matrix<float> Matrix4<T>::Identityf = {
    1.f, 0, 0, 0,
    0, 1.f, 0, 0,
    0, 0, 1.f, 0,
    0, 0, 0, 1.f
}; 
```

该问题与初始值设定项列表无关，它适用于当时使用的任何构造函数（不仅仅是采用 的构造函数`initializer_list`）

# gnuplot - 在单独的文件中输出 gnuplot 图例

> ID：13906876
> 
> 赞同：1
> 
> 时间：2012-12-17T00:22:46.417
> 
> 标签：gnuplot

我有一个 gnuplot 脚本，它会生成几个图，我稍后会在乳胶文档中使用这些图。我不想在每个情节中重复传说，所以现在我有`set nokey`，所以传说根本不显示。但是，我想在单独的文件中输出图例。

如果我不能用脚本做到这一点，那么我可以生成一个图表，然后用一个图像编辑程序裁剪出图例。但我更愿意让脚本生成图例，以便在我对脚本进行其他会影响图例的更改时自动更新图例。

是否可以只输出没有相关绘图数据的图例？如果是这样，那该怎么做？

# git - IP地址更改后如何访问git远程仓库

> ID：13906878
> 
> 赞同：9
> 
> 时间：2012-12-17T00:23:04.187
> 
> 标签：git, cloud, ip-address, repository

> **可能重复：**
> [如何使用 Git 更改远程存储库 URI？](https://stackoverflow.com/questions/2432764/how-to-change-a-remote-repository-uri-using-git)

我有 2 个远程仓库

```
remotes/origin/develop
remotes/origin/master 
```

原来这些都是在`ip-address-1`。IP 地址已更改为`new-ip-address-2`.

如何更改我的本地引用，以便我可以在新的 IP 地址访问相同的存储库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T00:27:47.140

You can try to make changes in your hosts file and force DNS resolution (old DNS to new ip, I'm using 192.168.0.2 as example)

```
192.168.0.2 old.dns.entry 
```

This is not the best solution but works in some environments.

# php - 如何限制 apache2 的资源？

> ID：13906879
> 
> 赞同：0
> 
> 时间：2012-12-17T00:23:34.493
> 
> 标签：php, linux, apache2, raspberry-pi, raspbian

我有一个非常慢的家用服务器（树莓派），CPU 为 700 MHz。当我开发一些网站时，有时会发生我将一个大的 (5 MB) .jpg 文件输入到图像调整器 ( `imagecreatefromjpeg()`, `imagecreatetruecolor()`, `imagecopy()`) 中，这会导致服务器挂起。

我会说它正在处理文件，但即使我等待几分钟，它也永远不会结束。

问题是我什至无法访问 shell 来停止/重新启动 apache2；唯一的解决方案是完全关闭服务器。

我想知道是否有任何方法可以限制 apache2 的硬件资源；例如，如果我只能限制 80% 的 CPU 使用率，也许我仍然可以访问 shell 并停止它。

我尝试设置 timeout 和 max_execution_time 指令，但它们似乎并没有阻止 apache2 无限工作并冻结服务器。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:44:52.013

我不认为你可以从它自己的设置中限制 apache 的 cpu 使用。

您可以尝试使用单独的应用程序，例如 cpulimit（参见：[how-to](http://www.debianadmin.com/cpulimit-limit-the-cpu-usage-of-a-process.html)）：

```
$ sudo apt-get install cpulimit
$ man cpulimit 
```

您也可以尝试这些来优化服务器的整体性能。

*   编辑您的 /etc/apache2/apache2.conf 并使用以下值：

    ```
    <IfModule mpm_prefork_module>
        StartServers          2
        MinSpareServers       2
        MaxSpareServers       3
        MaxClients           50
        MaxRequestsPerChild   0
    </IfModule> 
    ```

*   在 /etc/dphys-swapfile 集中扩展您的交换：

    ```
    CONF_SWAPSIZE=512 
    ```

    然后运行：

    ```
    $ sudo dphys-swapfile setup
    $ sudo dphys-swapfile swapon 
    ```

*   在这里对你的树莓派进行超频（它比听起来更安全）：

    ```
    $ sudo raspi-config 
    ```

    我在 950MHz 下使用它。有一个更高的选项（1000MHz），但论坛上的一些人抱怨那个 SD 损坏。

*   如果不使用图形界面，也可以在 raspi-config **memory_split中将图形内存设置为 16。**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T10:38:51.723

您可以安装 apache-mod_ratelimit。此外，请参阅[使用 httpd.conf 控制 Apache](http://htaccess.wordpress.com/2010/03/13/control-apache-cpu-memory-and-processes-with-httpd-conf/)。

# openerp - OpenERP Version 7 Invoice Tasks Work?

> ID：13906882
> 
> 赞同：1
> 
> 时间：2012-12-17T00:23:46.873
> 
> 标签：openerp

Is there documentation on what is required to setup Invoice Tasks Work for OpenERP version 7 like there is [here](http://doc.openerp.com/v6.1/book/4/4_13_Projects/4_13_Projects_management.html) for version 6.1?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T10:59:06.017

项目现在有自己的“合同”，基本上是一个分析帐户。您可以从“会计”菜单为此分析帐户开具发票。

# java - 用随机数填充双精度数组，然后从该数组中打印偶数和奇数

> ID：13906892
> 
> 赞同：0
> 
> 时间：2012-12-17T00:25:14.663
> 
> 标签：java, arrays, random, numbers, double

所以这是我的问题。我必须编写一个用随机数填充数组的程序（没关系），然后只需要打印偶数索引数或奇数值数（`j`）。像这样尝试过，但是当我放入`if`语句时，它会显示每个偶数（索引和值-数组中的第二个），所以它是错误的。我应该怎么做？

```
import java.util.Random;

public class Array {

public static void main(String[] args)
{
    int rows = 5;
    int colu = 2;

    Random r = new Random();

    int [][] array = new int [rows][colu];

    for(int row = 0; row < array.length; row++)
    {
        for(int col = 0; col < array[row].length; col++)
        {
            array[row][col] = r.nextInt(10);
        }
    }

    for(int i = 0; i < array.length; i++)
    {       
        for(int j = 0; j < array[i].length; j++)
        {
            if(array[i][j]%2 == 0){
            System.out.print(array[i][j] + " ");
            }

            }
        }
        System.out.println();
    }
} 
```

[![它应该如何](../Images/9d27821a6332e0dcb10956b22854778f.png)](https://i.stack.imgur.com/9DP7c.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:02:08.097

我将对此进行尝试，但我不确定我是否完全理解。

```
int array[][] = new int[row][col];
// ... populate the array with random numbers, works fine...

// Let's traverse the first column.
for (int i = 0; i < row; i++) {
    int value = array[i][0]; // col 0 means first column
    if (value % 2 == 0) {
        // ...
    }
}

// Let's traverse the second column.
for (int i = 0; i < row; i++) {
    int value = array[i][1]; // col 1 means second column
    // ...
} 
```

你是这个意思吗？如果是，您是否看到了这种模式，以及如何概括这一点并使代码更小一些？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T22:05:20.350

只需在“if”语句中实现这个公式：

（数×2）/4 ==0。你总是会得到偶数。你可以处理其余的：D

# qt - Checking then Adding items to QCompleter model

> ID：13906894
> 
> 赞同：1
> 
> 时间：2012-12-17T00:25:57.997
> 
> 标签：qt, qt4, qtextedit, qcompleter

I am currently working on a code editor written in Qt,

I have managed to implement most of the features which I desire, i.e. auto completion and syntax highlighting but there is one problem which I can't figure out.

I have created a model for which the `QCompleter` uses, which is fine for things like html tags and c++ keywords such as `if else` etc.

But I would like to add variables to the completer as they are entered by the user.

So I created an event on the `QTextEdit` which will get the word (I know I need to check to make sure that it is a variable etc but I just want to get it working for now).

```
void TextEdit::checkWord()
{
    //going to get the previous word and try to do something with it
    QTextCursor tc = textCursor();
    tc.movePosition(QTextCursor::PreviousWord);
    tc.select(QTextCursor::WordUnderCursor);
    QString word = tc.selectedText();
    //check to see it is in the model
} 
```

But now I want to work out how to check to see if that word is already in the `QCompleter`s model and if it isn't how do I add it?

I have tried the following:

```
QAbstractItemModel *m = completer->model();
//dont know what to do with it now :( 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:07:19.140

您`word`可以`QCompleter`使用

```
QAbstractItemModel *m = completer->model(); 
```

如您所见，方法`model()`返回`const`指针。

这对检查程序有好处，你可以这样检查：

```
bool matched = false;
QString etalon("second");
QStringListModel *strModel = qobject_cast<QStringListModel*>(completer.model());
if (strModel!=NULL)
    foreach (QString str, strModel->stringList()) {
        if (str == etalon)
        {
            matched = true;
            break;
        }
    }
qDebug()<<matched; 
```

* * *

但是为了您的目的，我建议您声明`QStringListModel`，并将其连接到您的完成者，然后，根据 Qt 的 MVC 编程原则（http://doc.qt.digia），您必须通过模型执行的所有操作.com/qt/model-view-programming.html）。

你的代码可以是这样的：

```
// declaration
QCompleter completer;
QStringListModel completerModel;

// initialization
completer.setModel(&completerModel);
QStringList stringListForCompleter;
stringListForCompleter << "first" << "second" << "third";
completerModel.setStringList(stringListForCompleter);

// adding new word to your completer list
completerModel.setStringList(completerModel.stringList() << "New Word"); 
```

祝你好运！

# html - In which situations, the elements will be attached to Head element of DOM during HTML parsing?

> ID：13906895
> 
> 赞同：-1
> 
> 时间：2012-12-17T00:26:07.697
> 
> 标签：html, dom, html-parsing, html-parser

Obviously, the contents/tags within `<head></head>` pair will be attached to Head element.

Is there any situation in which during the parsing of `<body></body>`, some elements would be attached to Head element, instead of Body element?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:55:21.870

在 HTML5 解析算法中，没有，除非通过脚本注入。不过，一些较旧的浏览器可能会移动这些元素。例如，查看从[http://lists.w3.org/Archives/Public/public-html/2007May/1066.html](http://lists.w3.org/Archives/Public/public-html/2007May/1066.html)开始的线程，特别是[http://lists.w3.org/Archives/Public/public- html/2007May/1081.html](http://lists.w3.org/Archives/Public/public-html/2007May/1081.html)

但是，通常在 head 中的元素会发生什么情况，出现在`<head>`标签之前，或者在`</head>`标签之后但在创建 body 元素之前，例如[http://software.hixie.ch/...](http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%3Ctitle%3ETest%20Case%3C%2Ftitle%3E%0A%3C%2Fhead%3E%0A%3Cmeta%20name%3D%22ROBOTS%22%20content%3D%22ALL%22%3E%0A%3C%2Fhead%3E%0A%3Cbody%3E%0A%3Cp%3EMy%20text%3C%2Fp%3E%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E) . 在这种情况下，元素将被移动到头部元素内。

请注意，由于标记无效， `<head>`and`</head>`标签之间的元素很容易不在 head 元素内，例如，[http://software.hixie.ch/...](http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%3Ctitle%3ETest%20Case%3C%2Ftitle%3E%0A%20%3Chr%3E%0A%20%3Cmeta%20name%3D%22ROBOTS%22%20content%3D%22ALL%22%3E%0A%3C%2Fhead%3E%0A%3Cbody%3E%0A%3Cp%3EMy%20text%3C%2Fp%3E%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E)

# python - Need to remove duplicates for a list with in a function

> ID：13906897
> 
> 赞同：2
> 
> 时间：2012-12-17T00:26:11.743
> 
> 标签：python

this is what i have so far:

```
def unique_element(group):
  list=[]
  for element in group:
      piece=parse_formula(element)
      for x in piece:
          list.append(x[0])

  return list #list(set(list)) 
```

I have the other function below but this is the one I am trying to fix. Right now it returns a function with a list of letters but I do not want repeating letters. Example:

```
unique_element(['H2O2Y2','R3O2','Y2S3'])
['H', 'O', 'Y', 'R', 'O', 'Y', 'S'] 
```

I thought using `list(set(list))` would work but when i run the function i get:

```
unique_element(['H2O2Y2','R3O2','Y2S3']) 
```

Traceback (most recent call last):

```
File "<stdin>", line 1, in <module>
File "_sage_input_61.py", line 10, in <module>
  exec compile(u'print _support_.syseval(python, u"unique_element([\'H2O2Y2\',\'R3O2\',\'Y2S3\'])", __SAGE_TMP_DIR__)
File "", line 1, in <module>

File "/sagenb/sage_install/sage-5.4-sage.math.washington.edu-x86_64-Linux/devel/sagenb-git/sagenb/misc/support.py", line 479, in syseval
  return system.eval(cmd, sage_globals, locals = sage_globals)
File "/sagenb/sage_install/sage-5.4-sage.math.washington.edu-x86_64-Linux/local/lib/python2.7/site-packages/sage/misc/python.py", line 56, in eval
    eval(z, globals)
File "", line 1, in <module>

File "", line 10, in unique_element

TypeError: 'list' object is not callable 
```

other functions:

```
 from numpy import *
    from scipy import *
    from pylab import *
    import re
def parse_formula(formula):
'''Given a simple chemical formula, return a list of (element, multiplicity) tuples.

Example:
'H2SO4' --> [('H', 2.0), ('S', 1.0), ('O', 4.0)]

'''

return [ (elem, float(mul) if mul else 1.) for (elem, mul) in re.findall(r'([A-Z][a-z]*)(\d*)', formula) ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:33:07.730

您正在使用标准库函数作为变量名。这就是 set() 操作失败的原因。

将 list = [] 更改为 my_list = [] 或其他内容...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:51:18.753

`set(list)`将比较列表中的成员，在您的情况下

> 'H2O2Y2','R3O2','Y2S3'

没有一个是相同的。

首先 ''.join() 将列表项放入一个字符串 - 我相信是一个字符列表 - 然后使用 set() 查找唯一字符：

```
def unique_elements(group):

    return list(set(''.join(group))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T01:30:16.893

此函数消除列表中的重复项：

```
def f5(seq, idfun=None): 
    if idfun is None:
        def idfun(x): return x
    seen = {}
    result = []
    for item in seq:
        marker = idfun(item)
        if marker in seen: continue
        seen[marker] = 1
        result.append(item)
    return result 
```

那样有用吗？

来自这个[网站](http://www.peterbe.com/plog/uniqifiers-benchmark)。

# php - JQuery + Wordpress PHP variable

> ID：13906899
> 
> 赞同：1
> 
> 时间：2012-12-17T00:26:42.337
> 
> 标签：php, jquery, wordpress

I'm using the jquery cycle to create a slideshow in my Wordpress template. The "pager" is creating buttons that overlay the slideshow and rollover advances the slides. The trouble I'm running into is that I need the rollover to stay the same, but I also need to set an href so that clicking on the buttons takes the user to a specific page.

1.  I need to retrieve the variable $target from my slideshow for the href.
2.  I need the onclick to make the button clickable.

As I stated above, I'm new at this and it's quite possible that this is terrible code/can't be done/I'm a moron.

My jquery:

```
 <script src="<?php bloginfo('stylesheet_directory'); ?>/scripts/jquery.cycle.min.js" type="text/javascript"></script>
    <script type="text/javascript">
            jQuery(document).ready(function($) {
            if ( $('.slides > .slide').size() > 1 ) {
                $('.slides')
                    .cycle({
                        timeout: 6000,
                        speed: 1000,
                        pager: '#slides #mainNav',
                        pauseOnPagerHover: 200,
                        pagerEvent: 'mouseover',
                        pause: true,
                        pagerAnchorBuilder: function(idx, slide) {
                            var slideImage = $(slide).find('img');
                            var slideTitle = slideImage.attr('title');
                            var slideURL = "<?php echo $target; ?>";
                            return '<li><a href="/' + slideTitle + '">' + slideTitle + /* '<br /><span class="description">' + slideDescr + '</span>*/'</a></li>';
                        }
                    });

            }
        });
        </script> 
```

and my Wordpress slideshow:

```
 <?php if ( is_front_page() && $slides = get_posts(array('numberposts' => -1, 'orderby' => 'menu_order', 'order' => 'ASC', 'post_type' => 'slide')) ) : ?>
<div id="mainImg">
        <div id="slides">
            <div class="slides">
                <?php foreach ($slides as $slide) : ?>
                    <?php $title = $slide->post_title; ?>
                    <?php $content = wpautop($slide->post_content); ?>
                    <?php $description = get_post_meta($slide->ID, 'description', true); ?>
                    <?php $thumb = get_the_post_thumbnail($slide->ID, 'slide', array('title' => $title, 'alt' => $description)); ?>
                    <?php $url = get_post_meta($slide->ID, '_slide_url', true); ?>
                    <?php $target = (get_post_meta($slide->ID, '_slide_url_blank', true)) ? 'target="_blank"' : ''; ?>
                    <div class="slide">
                        <?php if ($url) : ?>
                            <a href="<?php echo $url; ?>" <?php echo $target; ?>><?php echo $thumb; ?></a>
                        <?php else: ?>
                            <?php echo $thumb; ?>
                        <?php endif; ?>
                    </div>
                <?php endforeach; ?>
            </div>
<div id="mainNav"></div>        
        </div>
</div><!--end mainImg-->
    <?php endif; ?> 
```

Thank you in advance for your help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T00:46:05.700

你在哪里：

```
var slideURL = "<?php echo $target; ?>" 
```

将其替换为：

```
var slideURL = $(slide).find('a').attr('target'); 
```

您在上面所做的是获取幻灯片对象，在幻灯片中找到“a”标签，然后获取“a”标签的“目标”属性。然后将此值分配给`slideURL`变量（将是`'_blank'`或`undefined`）。有关如何使用 jQuery 获取 HTML 元素和/或其属性的更多信息，您应该更加熟悉 jQuery 的[Traversing](http://api.jquery.com/category/traversing/)和[Attributes](http://api.jquery.com/category/attributes/)方法。

无论如何，您都不应该将 Javascript 代码与 PHP 甚至 HTML 代码混合使用。阅读更多关于“Unobtrusive JavaScript”的内容。

# php - WhatsApp: how to decode the *.db.crypt files?

> ID：13906900
> 
> 赞同：2
> 
> 时间：2012-12-17T00:26:49.933
> 
> 标签：php, python, mobile, encoding, whatsapp

I'd like to read *.db.crypt-files, preferably with PHP. The content is encoded.

Does anyone know how to decode the content or how to figure out what kind of encoding was used?

It's possible. The tool "WhatsApp Xtract" is able to do it, but it's written in python.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-12T13:43:49.540

```
$crypt = file_get_contents('msgstore.db.crypt');
$key = pack('H*', '346a23652a46392b4d73257c67317e352e3372482177652c');
$decrypt = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, $crypt, MCRYPT_MODE_ECB); 
```

# javascript - spatial index for lines

> ID：13906902
> 
> 赞同：2
> 
> 时间：2012-12-17T00:27:16.117
> 
> 标签：javascript

I have lots of line segments (that represent various surfaces such as walls, ceilings and floors). I want to efficiently determine which lines are within the player's bounding box.

(Right now I'm cycling through all lines, and whilst correct, it is proving much too slow).

There are several kd-tree and other spatial indices in Javascript but they all store points rather than lines.

I actually only need to query by the x axis; it would suffice with a 1D range tree of some sort.

How can you efficiently store and retrieve shapes such as lines?

Once built, the index would not be added to.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:35:13.953

在二维空间中，您可以很好地控制总空间扩展（即知道最小值和最大值，并且这些不会增加），**基于网格的**方法（例如普通网格或四叉树）工作得非常好。特别是，如果您知道您的查询半径（玩家框大小），那么恰好这个大小的网格应该可以*很好*地工作。

许多游戏还使用了所谓的 BSP 树，即二元空间划分树。但为了获得良好的性能，AFAIK 通常在构建关卡时预先计算这棵树，然后只加载地图。

# c - 将 ASCII 转换为 uint8

> ID：13906910
> 
> 赞同：-2
> 
> 时间：2012-12-17T00:28:51.467
> 
> 标签：c, ascii, printf, uint

我需要向微控制器发送一些数字序列。这是我的功能：

```
void DriveForward()
{       
      printf("137 0 0 128 0");          
} 
```

当我的函数作为 ASCII 发送时，微不接受 ASCII。我需要将该 ASCII 字符串作为`uint8`. 知道如何进行转换吗？

在这种情况下，`printf`不会在屏幕上打印，而是直接发送到串口。它是唯一发送到串口的命令，所以我需要事先进行一些转换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T00:33:56.013

我可能对你的问题感到困惑，但你可以尝试类似的事情（只是为了测试这种情况）：

```
 printf("%c%c%c%c%c", 137, 0, 0, 128, 0); 
```

这将发送以 ASCII 编码的四个字符以及您之后输入的数值。

此外，大多数告诉您应该使用的技术文档`uint8`是指您向电缆发送一个完整的 8 位值（这里说到字符或 ASCII 则不适用。它们只是可以表示的 8 位值使用`unit8`)。

这通常是通过使用一些低级函数来完成的，例如`write`, 可以发送 的缓冲区`uint8`，因此，如果您必须发送该值，您可以拥有这样的缓冲区：

```
uint8 send_buffer[] = {137, 0, 0, 128, 0}; 
```

进而：

```
write (send_buffer, 5, output_file_or_serial_conn); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T00:36:44.090

如果您无法更改函数，请尝试使用 接收`scanf`，它是 的倒数`printf`，因此如果您的代码如下所示：

```
printf("%i %i %i", value1, value2, value3); 
```

然后用这样的东西接收它：

```
char value1, value2, value3;
sscanf(received_string, "%i %i %i", &value1, &value2, &value3); 
```

**编辑**： 2 年后，我重新审视这个答案，我不太`scanf`确定`printf`. 出于历史原因，我不会删除此答案。

# valgrind - Valgrind vs. Linux perf correlation

> ID：13906911
> 
> 赞同：7
> 
> 时间：2012-12-17T00:29:03.727
> 
> 标签：valgrind, perf, cachegrind

Suppose that I choose `perf` events `instructions`, `LLC-load-misses`, `LLC-store-misses`. Suppose further that I test a program `prog` *varying* its input. Is `valgrind` supposed to give me the "same" functional results for the same input and the same counter? That is, if one value in `perf` goes up, the one in `valgrind` should always do the same? Is there any impact in `valgrind` being a simulation that I should be aware of during profiling my code?

**EDIT**: BTW, before people grill me for not experimenting myself, I have to say that I (kinda) have, the problem is that I have a Sandybridge processor, and `perf` has a "bug" that prevents me from measuring LLC-* events. There is a patch, but I don't feel like recompiling my kernel...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T18:46:52.970

好吧，Cachegrind 是一个缓存模拟器。即使它试图模仿您的某些硬件特性（缓存大小、关联性等），它也不会模拟您系统的每一个特性和行为。因此，在某些情况下，您可能会看到一些差异。

例如，Valgrind 的文档指出“Cachegrind 模拟分支预测器，旨在成为 2004 年左右主流桌面/服务器处理器的典型代表”。Sandy Bridge 处理器于 2011 年首次出现，您可以猜测分支预测器自 2004 年以来已经有了很大的改进。

话虽如此，Valgrind 仍然是您工具箱中的绝佳工具。

Sandy Bridge 处理器上 perf 的 LLC 事件有什么问题？我每天在我的 Sandy Bridge 笔记本电脑上使用这些事件，它按预期工作（archlinux 64bits，linux 3.6）。

# php - how to display an array content inside CKeditor?

> ID：13906913
> 
> 赞同：0
> 
> 时间：2012-12-17T00:29:11.467
> 
> 标签：php, ckeditor

I need to display the content of doc file inside CKeditor. I read the content of doc file & passing it into an array line by line :

```
$rs = fopen("text.doc", "r");

            while ($line = fgets($rs, 1024)) {
                $this->data[] = $line . "<BR>";
            } 
```

then I create an instance of CKeditor:

```
include_once("ckeditor/ckeditor.php");
    $CKeditor = new CKeditor();
    $CKeditor->basePath = '/ckeditor/';
    foreach ($this->data as $value) {
                 //what should I write here
    }
    $CKeditor->editor('editor1'); 
```

the CKeditor work right now & appear on my webpage .. but without any content ? what should I right inside the foreach to passing array content into the editor ? please help =(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:33:49.170

`.doc`文件被压缩，不能像这样按行读取。考虑使用[PHPWord](https://github.com/PHPOffice/PHPWord)来访问里面的内容。

编辑：经过进一步调查，看起来 PHPDoc 只能写不能读。

PHP 工具在这方面非常缺乏。最好的办法是使用[DocVert 之](http://holloway.co.nz/docvert/faq.html)类的东西在命令行上进行文件转换。然后你可以在 CKEditor 中加载该文档。

编辑：在OP的评论之后：

> 让我们考虑它是一个 txt 文件......我需要 Ckeditor 方法

将解码后的 HTML 内容加载到一个 Textarea 中，并给这个 textarea 一个 HTML ID 或类： `$textarea_content = htmlspecialchars_decode(file_get_contents('text.doc'));`

然后，在您的 HTML 中，调用 JavaScript 标记内的 CKEditor 以将 textarea 替换为编辑器：

```
<html>
<head>
<!-- include CKEditor in a <script> tag first -->
<script type="text/javascript">
    window.onload = function()
    {
        CKEDITOR.replace( 'editor1' );
    };
</script>
</head>
<body>
<textarea id="editor1" name="editor1"><?php echo $textarea_content ?></textarea>
</body> 
```

[文档页面](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Integration)有更多详细信息。

# database - process a list of post values

> ID：13906914
> 
> 赞同：0
> 
> 时间：2012-12-17T00:29:22.777
> 
> 标签：database, jsf, html-table, save

I am working on a grading program with jsf and hibernate. I have a list of students and a list of criteria for calculations. The criteria list is variable and can be modified by a teacher... I was wondering how I can manage to do the set all grades for all students in a request. Let's say there is Student A and B with criterias X and Y. It should show a table

```
+---------------------------------------------------+
| Student   | Criteria X        | Criteria Y        |
+-----------+-------------------+-------------------+
| A         | [input for grade] | [input for grade] |
+-----------+-------------------+-------------------+
| B         | [input for grade] | [input for grade] |
+---------------------------------------------------+ 
```

I can do that, so far, but the input for grade has not a target in the controller bean since it can't be only student A and B, but could have more/les, same with criteria. I'd love an idea to manage it.

In PHP, I'd work with the Post global variable and fetch this array to get student/criteria from input name and save that grade with the corresponding student/criteria.

JSF - 2.0

[Update 1]

```
<table border="1">
    <thead>
        <tr>
            <th>Nombres y apellidos</th>
                <ui:repeat value="#{cursoController.grupo.criterios.toArray()}" var="criterio">
                    <th>#{criterio.criterioNombre}</th>
                </ui:repeat>
        </tr>
    </thead>
    <tbody>
        <ui:repeat value="#{cursoController.grupo.matriculas.toArray()}" var="matricula">
            <h:form rendered="#{matricula.rol.perfil.idPerfil == 69}">
                <tr>
                    <td>
                        <h:inputHidden value="#{matricula.rol.idRol}"/>
                            #{matricula.rol.usuario.persona.personaNombre}
                    </td>
                    <ui:repeat value="#{cursoController.grupo.criterios.toArray()}" var="criterio">
                        <td>
                            <h:inputText style="width: 70px;"/>
                        </td>
                        </ui:repeat>
                            </tr>
            </h:form>
        </ui:repeat>
    </tbody>
</table> 
```

# objective-c - iOS Simulator in Xcode

> ID：13906915
> 
> 赞同：0
> 
> 时间：2012-12-17T00:29:33.357
> 
> 标签：objective-c, xcode, ios-simulator

I think that in my storyboard file in xcode that it has me using an iPhone 5 display, but when i load the simulator, i think it is an iPhone 4 display. So the view doesn't look the same. Does anyone know how to use an iPhone 5 display as my Simulator?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T00:30:54.290

从 iOS 模拟器菜单

硬件 -> 设备 -> iPhone（视网膜 4 英寸）

**编辑** 设备看起来像这样

![在此处输入图像描述](../Images/c53753e4e2c59c3379a78e49ba0ce6ed.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:23:23.917

我猜你是对的。出于某种原因，他们只是在模拟器中还没有 iPhone 5 的实际视觉演示。希望他们很快就会有！那会很酷！

# c# - Excel 互操作 Range.BorderAround2 给出 0x80020003

> ID：13906916
> 
> 赞同：0
> 
> 时间：2012-12-17T00:30:16.397
> 
> 标签：c#, office-interop

我意识到这意味着目标机器不支持这种方法，所以这很好，但是我还能如何获得相同的功能呢？

如果我使用`Range.Borders.LineStyle`然后`Range.Borders.Weight`它没有在范围*周围*放置边框，它将在范围内的每个单独的单元格周围放置边框（如网格），这不是我需要的。

目标机器使用 Office 2007。我项目中的所有其他 Office 互操作代码都可以正常工作，仅此而已。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-16T14:45:01.757

试试这个应该可以的。

```
sheet.Range["A1:D6", Type.Missing].BorderAround(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:41:16.567

你可以试试这段代码：

```
sheet.Range["A1:D6"].BorderAround(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-17T09:27:11.340

你可以试试这个：

```
Excel.Application nouveau_excel = new Excel.Application();
nouveau_excel.get_Range("A1:K3").BorderAround(Excel.XlLineStyle.xlContinuous, Excel.XlBorderWeight.xlThick, Excel.XlColorIndex.xlColorIndexAutomatic, Color.Red); 
```

# android - Overdraw 和 Romain Guy 的博文 Android 性能案例研究

> ID：13906917
> 
> 赞同：14
> 
> 时间：2012-12-17T00:30:22.037
> 
> 标签：android

根据 Romain Guy 的博客文章[Android 性能案例研究](http://www.curious-creature.org/2012/12/01/android-performance-case-study/)，在谈到 Overdraw 时，他说：

> 删除窗口背景：在您的主题中定义的背景被系统用于在启动您的应用程序时创建预览窗口。除非您的应用程序是透明的，否则切勿将其设置为 null。相反，将其设置为您想要的颜色/图像，或者通过调用 getWindow().setBackgroundDrawable(null) 从 onCreate() 中删除。***

但是 getWindow().setBackgroundDrawable(null) 似乎没有效果。这是带有代码的示例：

```
//MainActivity
@Override
protected void onCreate(Bundle savedInstanceState) {
    getWindow().setBackgroundDrawable(null);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

// main.xml
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_marginLeft="40dp"
android:layout_marginRight="40dp"
android:background="#FFE0FFE0"
tools:context=".MainActivity" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="40dp"
    android:layout_marginRight="40dp"
    android:background="#FFFFFFE0" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="40dp"
        android:text="@string/hello_world" />
</LinearLayout>

// styles.xml
<style name="AppTheme" parent="AppBaseTheme">
   <item name="android:windowBackground">@color/yellow</item>
</style> 
```

此示例在图像中生成结果。您可以看到外层有一个过度绘制，并且窗口背景颜色仍然可见。我希望窗口的背景消失，只有线性布局有透支。

![在此处输入图像描述](../Images/1f101ca17ea16e5282e1eda28861f353.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-17T01:20:47.147

向下移动`getWindow().setBackgroundDrawable(null)`，直到之后的任何地方`setContentView(R.layout.main)`；例如：

```
@Override public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    getWindow().setBackgroundDrawable(null);
} 
```

该`setContentView(...)`调用传播设置活动附加到的窗口上的内容，并可能覆盖您打算使用`setBackgroundDrawable(null)`.

结果：

![在此处输入图像描述](../Images/a102a9bb18cc2fed12b9ad636f43b4dc.png)

# android - 从不同的类文件启动 AsyncTask（通过 onReceive）

> ID：13906918
> 
> 赞同：0
> 
> 时间：2012-12-17T00:30:26.473
> 
> 标签：android, service, android-asynctask

无法克服它，无论我搜索多少。

我有 AlarmManager，我想在每 X 秒后启动 AsyncTask。

我确实有另一个文件，类 (Alarm.class) 我有 onReceive。无论我放入其中，都会完美激活。

现在我有问题。我的主线程/类（Onime）中有 AsyncTask。它执行许多任务，包括下载一些内容。

现在的问题是，我怎样才能从另一个类启动那个 AsyncTask。可悲的是静态不起作用，因为 asyc 包含一些不允许静态的东西。是否可以通过某种服务

```
public class Alarm extends BroadcastReceiver 
{    
     @Override
     public void onReceive(Context context, Intent intent) 
     {   
         // Put here YOUR code.
         Log.d("alarminfo", "Alarm works!"); 

     }

 public void SetAlarm(Context context)
 {
     AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
     Intent i = new Intent(context, Alarm.class);
     PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
     Calendar time = Calendar.getInstance();
     time.setTimeInMillis(System.currentTimeMillis());
     time.add(Calendar.SECOND, 30);
     am.setRepeating(AlarmManager.RTC_WAKEUP, time.getTimeInMillis(), 1000*60*1, pi); // Millisec * Second * Minute
     Log.d("alarminfo", "Set alarm!"); 
 }

 public void CancelAlarm(Context context)
 {
     Log.d("alarminfo", "End alarm!"); 
     Intent intent = new Intent(context, Alarm.class);
     PendingIntent sender = PendingIntent.getBroadcast(context, 0, intent, 0);
     AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
     alarmManager.cancel(sender);
 }
} 
```

那是警报类。

这是异步（它在 Onime.class 中（不同的文件）：

```
class animeUpdator extends AsyncTask<ArrayList<Anime>, Integer, String> {

        class Connection implements Runnable {

            public void run () {
                    try {
                        URL url = new URL("http://xxx.com");
                        URLConnection urlConnection = url.openConnection();
                        BufferedReader bufferedReader = 
                            new BufferedReader(new InputStreamReader(urlConnection.getInputStream()));
                        String line;
                        count = 1;
                        anime_list.clear();
                        while ((line = bufferedReader.readLine()) != null) {
                            parsingAnime(line);
                            count += 1;
                        }

                        bufferedReader.close();

                        MessageToMainThread(UPDATE_MAIN_GUI);

                    } catch(Exception e) {
                        Log.d("readInfo", e.toString()); 
                    }
                }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T00:44:59.960

如果你需要创建一个内部类的实例，你可以从它的外部类开始：

```
Onime.animeUpdator.class.getConstructors()[0].newInstance(new Onime()); 
```

注意，Java 类名应该以大写开头。前任。动漫更新器；

更多信息，请参阅这篇[文章](https://stackoverflow.com/questions/2097982/is-it-possible-to-create-an-instance-of-nested-class-using-java-reflection)和[这篇](https://stackoverflow.com/questions/9053864/no-enclosing-instance-of-type-error-while-calling-method-from-another-class-in)文章。
或者正如评论指出的那样：

```
public class animeUpdator extends AsyncTask<ArrayList<Anime>, Integer, String> {
   public animeUpdator(){
          ...
   } 
```

}

# java - 将数据写入单元格为一行

> ID：13906919
> 
> 赞同：2
> 
> 时间：2012-12-17T00:30:53.463
> 
> 标签：java, export-to-excel, jxl

我正在使用 jxl 导出 Excel 工作表。我只需要将数据写入一个单元格中的一行，而无需将数据转移到同一单元格中的新行中。

预计在细胞：

```
Hello I am just testing you. 
```

实际的：

```
Hello I am 
just testing you. 
```

我的代码：

```
 WritableCellFormat tableDataFormatDefault;

    tableDataFormatDefault = new WritableCellFormat(TABLE_DATA_FONT);
    tableDataFormatDefault.setBorder(Border.ALL, BorderLineStyle.THIN);
    tableDataFormatDefault.setWrap(true);
    tableDataFormatDefault.setAlignment(Alignment.CENTRE);
    tableDataFormatDefault.setWrap(true) 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T09:48:01.637

```
tableDataFormatDefault.setWrap(false); 
```

# php - 在php中的数据库中发布图片

> ID：13906921
> 
> 赞同：0
> 
> 时间：2012-12-17T00:31:20.157
> 
> 标签：php, post, image

我正在尝试测试如何在我的 wamp 数据库上上传图片，但出现“未定义索引：图片”错误。请你帮助我好吗？谢谢！

这是我的公式的代码：

```
 <form action="PicPost.php" method="post" enctype="multipart/form-data">
  <p>
   Formulaire d'envoi de fichier :<br />
   <input type="file" name="Pic" /><br />
   <input type="submit" value="Post the pic" />
    </p>
    </form> 
```

这是应该处理它的文件：

```
 <?php
    try
    {
    $bdd = new PDO('mysql:host=localhost;dbname=db', 'root', '');
    }
    catch (Exception $e)
    {
die('Erreur : ' . $e->getMessage());
    }
    $req = $bdd->prepare('INSERT INTO picdb (Picture)
    VALUES(?)');
    $req->execute(array($_POST['Pic']));
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:41:04.910

适应你的环境

**选择要上传的图片：**

```
<form enctype="multipart/form-data" action="insert.php" method="post" name="changer">
<input name="MAX_FILE_SIZE" value="102400" type="hidden">
<input name="image" accept="image/jpeg" type="file">
<input value="Submit" type="submit"> 
```

**插入.php**

```
 if (isset($_FILES['image']) && $_FILES['image']['size'] > 0) { 

              // Temporary file name stored on the server
              $tmpName  = $_FILES['image']['tmp_name'];  

              // Read the file 
              $fp     = fopen($tmpName, 'r');
              $data = fread($fp, filesize($tmpName));
              $data = addslashes($data);
              fclose($fp);

              // Create the query and insert
              // into our database.
             $Insert = $bdd->query("insert into picdb (ID, Pic) VALUES ('', $data)");

              // Print results
              print "Thank you, your file has been uploaded.";

    }
    else {
       print "No image selected/uploaded";
    } 
```

这里有一个文件上传器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T00:36:50.190

该文件的内容在文件 $_FILES['Pic']['tmp_name'] 中。有关如何处理文件上传的更多信息，请参阅此页面：http: [//php.net/manual/en/features.file-upload.post-method.php](http://php.net/manual/en/features.file-upload.post-method.php)

您还应该考虑仅将文件名存储在数据库中，并将实际图像保存在普通文件中。

# file - 使用 Qt 读取未指定的字符

> ID：13906923
> 
> 赞同：1
> 
> 时间：2012-12-17T00:31:47.000
> 
> 标签：file, qt, binary

嗨，堆栈溢出者，

我目前正在解析一个同时包含文本和二进制数据的文件。目前，我正在以下列方式读取文件：

```
QTextStream in(&file);

int index = 0;
while(!in.atEnd()) {
    if (index==0) {
        QString line = in.readLine(); // parse file here
    } else {
        QByteArray raw_data(in.readAll().toAscii());
        data = new QByteArray(raw_data);
    }
    index++;
} 
```

其中 data 是指我正在寻找的二进制数据。我不确定这是否是我想要的，因为 QString 被编码为 ascii，我不知道是否丢失了一些字节。

我检查了文档，它建议使用 QDataStream。如何在换行后结合这两种方法，即读取带有编码的行并读取二进制转储？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:50:43.050

这将做你想要的。

```
QTextStream t(&in);
QString line;
QByteArray raw_data;
if(!in.atEnd()) {line = t.readLine();}
in.reset();
int lineSize = line.toLocal8Bit().size() + 1;
in.seek(lineSize);
if(!in.atEnd())
{
    int len = in.size() - lineSize;
    QDataStream d(&in);
    char *raw = new char[len]();
    d.readRawData(raw, len);
    raw_data = QByteArray(raw, len);
    delete raw;
} 
```

PS：如果文件格式是你的，最好用 QDataStream 创建文件，用 写入数据`<<`，用 读取数据`>>`。这样您就可以在没有此类问题的情况下进行存储`QByteArray`和归档。`QString`

# javascript - 如何在 URL 中发送韩文字符？

> ID：13906926
> 
> 赞同：1
> 
> 时间：2012-12-17T00:32:03.370
> 
> 标签：javascript, html

我想将页面 sumbit 上的 page1.html 中的一些韩语值发送到 page2.html。但是韩文字体正在被编码。任何人都可以帮助我。我在两个屏幕中都有这个元标记。

window.location.href = "page2.html?value='풍경' 这些韩文字符正在少数移动设备中进行编码。

对于此页面，值被编码为

page2.html?value=%EC%82%EB%AC%BC

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T00:45:21.083

韩语字符（和任何其他非 URL 安全字符）为事务进行 % 编码。但是，当服务器接收并放入（例如）PHP 的`$_GET`数组时，它们会自动解码，因此您不必担心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T01:13:05.293

我仍然不完全清楚您的实际要求，但是如果您正确构建 Url，则应该更容易推断应该/不应该发生什么：

```
// to construct correctly encoded Url:
var encodedValue = encodeURIComponent("'풍경'");
window.location.href = "page2.html?value=" + encodedValue; 

// to decode back from query parameter (if needed)
var decoded = decodeURIComponent(encodedValue); 
```

签出[在 JavaScript 中编码 URL？](https://stackoverflow.com/questions/332872/how-to-encode-a-url-in-javascript)有关使用 JavaScript 编码 URL 的指导。

# c# - 在 SQL Server 上插入多行的最佳方法

> ID：13906927
> 
> 赞同：0
> 
> 时间：2012-12-17T00:32:04.700
> 
> 标签：c#, sql-server, mongodb

因为我使用的是共享的 Microsoft SQL Server 实例，所以我开始使用 MongoDB，因为它每秒插入大约 10 次会更快。

归根结底，我需要从 MongoDB ( [MongoHQ](https://www.mongohq.com/home) ) 中读取数据并将所有数据插入到共享 SQL Server 实例（托管提供程序）中。

目前我正在做这个流程：

1.  从 MongoDB 获取 1000 行
2.  打开与 SQL Server 的连接
3.  对于每一行
    1.  使用存储过程将数据插入 SQL Server（因为需要进行计算）
    2.  更新 MongoDb 行 * （所以我们以后不会拿起处理过的行）
4.  关闭与 SQL Server 的连接
5.  `GO TO 1`

有了这个，我**每行“浪费”了大约 3 秒**......

有没有办法**加快速度**？

目前使用 C# 来执行所有代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T01:17:08.420

你有 SQLbulkcopy 类来拯救你。

在此处阅读更多详细信息。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy(v=vs.100).aspx)

谢谢，海军

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T00:38:16.413

请考虑 BULK INSERT 功能

[http://msdn.microsoft.com/en-us/library/ms188365.aspx](http://msdn.microsoft.com/en-us/library/ms188365.aspx)

# symfony - Symfony2 功能测试选择复选框

> ID：13906928
> 
> 赞同：11
> 
> 时间：2012-12-17T00:32:17.833
> 
> 标签：symfony, functional-testing

我在编写 Symfony 2 功能测试来设置作为数组一部分的复选框时遇到问题（即多个扩展选择小部件）

在[文档](http://symfony.com/doc/current/components/dom_crawler.html)中，示例是

```
$form['registration[interests]']->select(array('symfony', 'cookies')); 
```

但它没有显示可以使用的html，也不适用于我的。这是我的表格的精简版

```
<form class="proxy" action="/proxy/13/update" method="post" >
    <input type="checkbox" id="niwa_pictbundle_proxytype_chronologyControls_1" name="niwa_pictbundle_proxytype[chronologyControls][]" value="1" />

    <input type="checkbox" id="niwa_pictbundle_proxytype_chronologyControls_2" name="niwa_pictbundle_proxytype[chronologyControls][]" value="2" />

    <input type="checkbox" id="niwa_pictbundle_proxytype_chronologyControls_3" name="niwa_pictbundle_proxytype[chronologyControls][]" value="3" />
</form> 
```

一旦它在那里工作，我将继续使用手动制作的表格

```
<input type="checkbox" id="13" name="proxyIDs[]" value="13">
<input type="checkbox" id="14" name="proxyIDs[]" value="14">
<input type="checkbox" id="15" name="proxyIDs[]" value="15"> 
```

我尝试过类似的东西

```
$form = $crawler->selectButton('Save')->form();
$form['niwa_pictbundle_proxytype[chronologyControls]']->select(array('3'));
$form['niwa_pictbundle_proxytype[chronologyControls][]']->select(array('3')); 
```

但第一个失败的说法`select`是在非对象上运行，第二个说 `Unreachable field ""`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-23T17:23:04.917

尝试

```
$form['niwa_pictbundle_proxytype[chronologyControls]'][0]->tick(); 
```

它从 0 开始索引它，即使是它说 [] 的形式

或者，如果它对您没有帮助，您可以尝试将数组直接发布到操作，而不是使用 symfony 的表单选择器。请参阅：[Symfony2：对 ArrayCollection 的测试给出“无法访问的字段”](https://stackoverflow.com/questions/15454760/symfony2-test-on-arraycollection-gives-unreachable-field/15545534#15545534)

希望其中之一对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-30T06:44:46.727

我认为 2017 年最有效的解决方案是扩展您的测试类：

```
/**
 * Find checkbox
 * 
 * @param \Symfony\Component\DomCrawler\Form $form
 * @param string $name Field name without trailing '[]'
 * @param string $value
 */
protected function findCheckbox($form, $name, $value)
{
    foreach ($form->offsetGet($name) as $field) {
        $available = $field->availableOptionValues();
        if (strval($value) == reset($available)) {
            return $field;
        }
    }
} 
```

在测试调用中：

```
$this->findCheckbox($form, 'niwa_pictbundle_proxytype[chronologyControls]', 3)->tick(); 
```

# java - 由于 FindViewById() 导致应用程序崩溃，componentInfo 问题

> ID：13906930
> 
> 赞同：3
> 
> 时间：2012-12-17T00:32:59.627
> 
> 标签：java, android, xml

因此，每当将这两行注释掉时，它都很好，但随着它们崩溃。

```
EditText convertValue = (EditText) findViewById(R.id.et_value_convert);
TextView convertResult = (TextView) findViewById(R.id.txt_result); 
```

这是我的完整课程代码，xml 在下面。

```
package com.doubleelite.maxtest;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

public class ConverterActivity extends Activity {

EditText convertValue = (EditText) findViewById(R.id.et_value_convert);
TextView convertResult = (TextView) findViewById(R.id.txt_result);

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_converter);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_converter, menu);
    return true;
}

// Custom method to handle button clicks.
public void onClick(View v) {
    switch(v.getId()) {

    case R.id.btn_to_cel:
        convertResult.setText(String.valueOf(convertFahrenheitToCelsius(Integer.valueOf(convertValue.getText().toString()))));
    }
}

private float convertFahrenheitToCelsius(float f) {
    return (f-32) * (5/9);
}

private float convertCelsiusToFahrenheit(float c) {
    return c * (9/5) + 32;
}

} 
```

这是xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".ConverterActivity" >

<EditText
    android:id="@+id/et_value_convert"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:hint="@string/text_value_convert"
    android:inputType="number"
    />

<Button
    android:id="@+id/btn_to_cel"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/button_celsius"
    android:onClick="onClick"
    />

<Button
    android:id="@+id/btn_to_fahr"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/button_fahr"
    android:onClick="onClick"
    />

<TextView
    android:id="@+id/txt_result"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium"
    tools:ignore="HardcodedText" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T00:34:06.757

目前，您正在尝试在为 Activity 设置布局之前找到视图。将您的代码更改为：

```
public class ConverterActivity extends Activity {

EditText convertValue ;
TextView convertResult;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_converter);

 convertValue = (EditText) findViewById(R.id.et_value_convert);
 convertResult = (TextView) findViewById(R.id.txt_result);
}

 ///YOUR CODE HERE 
```

# javascript - 如何避免节点需要加载相同的模块两次

> ID：13906933
> 
> 赞同：7
> 
> 时间：2012-12-17T00:33:17.333
> 
> 标签：javascript, node.js, module, require, npm

我正在开发一个节点模块`my-module`，它又依赖于另一个模块`other-module`。`other-module`因此是我模块的 package.json 中明确列出的依赖项。

由于我的模块`other-module`仅通过成为`require`d 来修改 的行为，因此`other-module`仅加载一次并且这个唯一的“实例”是在需要`my`和的任何应用程序中引用的唯一的“实例”是很重要的`other`。

根据节点的模块缓存策略，我希望这是正确的，但是我在编写一个简单的测试应用程序时遇到的是这样的：

如果*在之前*`my-module`被`npm install`ed ，则后者作为前者的依赖项被引入。之后再次将其带入 node_modules 层次结构。然后，当我的模块需要时，节点加载我的模块的“本地”副本，当应用程序第二次加载它时，节点*再次*加载它，（这次是由于第二次安装的版本）。这显然不是预期的结果。 *`other-module``npm install``other-module``other-module``require`*`npm install`**

 **如果`my-module`是`npm installe`d *，* `other-module`那么我最终*只得到一个*`other-module`in node_modules副本，并且我的测试应用程序按预期工作。

这种行为让我再次查看节点的相关策略，果然我遇到了“模块缓存警告”：

> 模块根据其解析的文件名进行缓存。由于模块可能会根据调用模块的位置（从 node_modules 文件夹加载）解析为不同的文件名，因此不能保证 require('foo') 将始终返回完全相同的对象，如果它会解析为不同的文件.

在这一点上，我的模块看起来可能会也可能不会像预期的那样运行，具体取决于`npm install`s 的顺序。

有没有我遗漏的最佳实践？有什么办法可以在不改变我的模块工作方式的情况下避免这种混乱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T21:10:03.667

简短的回答：你不能。

正如您所指出的，节点将从最本地的位置加载所需的模块。据我所知，这是包管理器独有的，它使您不必关心模块的确切依赖关系树。Node 和 npm 会为你解决这个问题。在我看来，这是一件非常好的事情。

通过让您的模块有机会要求他们需要的确切版本，可以简单地避免依赖地狱。

我认为除非我不完全理解您的问题，否则您正在尝试做的不是良好的节点实践。模块被加载并分配给一个局部变量。应该避免使用全局状态，因为这会导致相当笨拙和不可测试的代码。此外，如果您成功地将修改后的模块*注入*到其他人的代码中，则无法保证他们的代码仍然可以工作。这就像在旧的*Prototype.js* _ 日子里，可以使用 JavaScript 的内置全局变量（如*String*或*Array* ）来破解，这会导致一些灾难性的代码。

但是请记住，这篇文章只是一个人的意见。如果您在此处找不到更多答案，请将您的问题发布到节点的 IRC 频道等其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-13T02:28:25.290

我在用 jest 开发测试时遇到了类似的问题。

以下语句将允许您在不同的上下文中再次加载相同的模块：

```
jest.resetModules(); 
```**

# java - Lucene：使用默认运算符 = AND 搜索多个字段

> ID：13906934
> 
> 赞同：8
> 
> 时间：2012-12-17T00:33:20.800
> 
> 标签：java, lucene

为了允许用户使用 Lucene 3.5 搜索多个字段，我目前为要搜索的每个字段创建并添加一个[QueryParser到](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/queryParser/QueryParser.html)[DisjunctionMaxQuery](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/search/DisjunctionMaxQuery.html)。这在使用**OR**作为默认运算符时效果很好，但我现在想将默认运算符更改为**AND**以获得更准确（和更少）的结果。

问题是，`queryParser.setDefaultOperator(QueryParser.AND_OPERATOR)`由于所有术语必须在至少 1 个字段中，因此遗漏了许多文档。

例如，考虑文档的以下数据：title field = "Programming Languages"，body field = "Java, C++, PHP"。如果用户要搜索**Java Programming**，则此特定文档不会包含在结果中，因为标题和正文字段包含查询中的所有术语，尽管它们组合在一起。我希望为上述查询返回此文档，而不是为查询**HTML Programming**。

我考虑过一个包罗万象的领域，但我有一些问题。首先，用户经常在他们的查询中包含每个字段的术语（作者：bill），这对于一个包罗万象的字段是不可能的。此外，我使用 FastVectorHighlighter 突出显示某些字段，这需要对它们进行索引和存储。因此，通过添加一个包罗万象的字段，我将不得不对大多数相同的数据进行两次索引，这既费时又费空间。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T22:10:05.117

我想我应该做更多的研究。事实证明[MultiFieldQueryParser](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/queryParser/MultiFieldQueryParser.html)提供了我正在寻找的确切功能。无论出于何种原因，我都为我想搜索的每个字段创建了一个 QueryParser，如下所示：

```
String[] fields = {"title", "body", "subject", "author"};
QueryParser[] parsers = new QueryParser[fields.length];      
for(int i = 0; i < parsers.length; i++)
{
   parsers[i] = new QueryParser(Version.LUCENE_35, fields[i], analyzer);
   parsers[i].setDefaultOperator(QueryParser.AND_OPERATOR);
} 
```

这将导致这样的查询：

```
(+title:java +title:programming) | (+body:java +body:programming) 
```

...这不是我想要的。现在我像这样创建一个 MultiFieldQueryParser：

```
MultiFieldQueryParser parser = new MultiFieldQueryParser(Version.LUCENE_35, new String[]{"title", "body", "subject"}, analyzer);
parser.setDefaultOperator(QueryParser.AND_OPERATOR); 
```

这给了我正在寻找的查询：

```
+(title:java body:java) +(title:programming body:programming) 
```

感谢@seeta 和@femtoRgon 的帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T02:41:12.330

也许您需要的是布尔查询的组合，这些查询可以捕获字段和术语的不同组合。在您给定的示例中，查询可能是 -

（标题：Java 和正文：编程）或（标题：编程和正文：Java）。

我不知道是否有一个现有的 Query 类可以为您自动生成它，但我认为这应该是在索引上运行的最终查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:50:29.150

您希望能够使用相同的术语集搜索多个字段，然后是您评论中的问题：

```
((title:java title:programming) | (body:java body:programming))~0.2 
```

可能不是最好的实现。

您实际上是从标题中获得分数，或者从正文中获得组合术语的分数。在标题中点击 java 并在正文中编程的情况将给出大约。与对身体的 Java 的打击相等，对编程没有打击。

我认为更好的结构化查询是：

```
(title:java body:java)~0.2 (title:programming body:programming)~0.2 
```

这对我来说更有意义，因为您希望 dismax 查询限制同一术语（在不同字段中）的多个查询的分数增长，但我相信您确实希望不同术语的命中分数增长。

如果这种查询结构可以让您获得更好的分数结果，则将结果限制在某个最低分数（返回的最高分数的百分比，而不是简单的硬编码值）可能足以防止看到太弱的结果。

我仍然不会计算索引所有字段。这是我以前使用过的一种实现，同时索引特定字段和包罗万象的字段，从而允许通用查询和特定的单字段查询。对于未存储的术语，索引存储往往非常精简，如果您发现自己必须创建大而复杂的查询来弥补没有它的情况，它通常会提高性能。

如果您真的想确保它占用最少的存储空间，您甚至可以关闭该字段的 TermVectors：

```
new Field(name, value, Field.Store.NO, Field.Index.ANALYZED, Field.TermVector.NO); 
```

虽然我不知道这会带来多大的不同。

# iphone - 如何在运行时注册/注销协议？

> ID：13906935
> 
> 赞同：3
> 
> 时间：2012-12-17T00:33:24.020
> 
> 标签：iphone, objective-c

是否有适当的方法来取消注册视图控制器并将其注册到协议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T00:43:25.610

正式遵守协议：

```
class_addProtocol([MyViewController class], @protocol(SomeProtocol)); 
```

更加动态：

```
class_addProtocol(objc_getClass("MyViewController"), objc_getProtocol("SomeProtocol")); 
```

要将方法实现实际添加到类中：

```
// - (int)someMethod:(int)arg;
int someMethod(id self, SEL _cmd, int arg)
{
    return arg * 2;
}

class_addMethod([MyViewController class], @selector(someMethod:), (IMP)someMethod, "i@:i"); 
```

`class_addMethod()`在这种情况下，请注意方法签名（ 的第 4 个参数），请参阅[文档](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T00:40:44.670

您可以使用 Objective-C 运行时方法

```
BOOL class_addProtocol(Class cls, Protocol *protocol) 
```

为了在运行时向类添加协议，但据我所知，您无法删除它。

# common-lisp - 在程序中加载 quicklisp

> ID：13906943
> 
> 赞同：7
> 
> 时间：2012-12-17T00:34:28.357
> 
> 标签：common-lisp, quicklisp

在我的程序开始时加载 quicklisp 的正确方法是什么？我目前正在将 quicklisp 插入到我的 .eclrc 的块中复制/粘贴，例如

```
;;; quicklisp
(let ((quicklisp-init (merge-pathnames "quicklisp/setup.lisp"
                                       (user-homedir-pathname))))
  (when (probe-file quicklisp-init)
    (load quicklisp-init)))

(ql:quickload "iterate") 
```

但似乎必须有一种不那么混乱的做事方式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T14:35:58.180

真的没有什么好的方法可以做到这一点。它比部署环境更多地是开发环境的一部分。

我使用 buildapp 来部署 CL 程序，Quicklisp 有一种方法可以导出其系统索引并使用 buildapp 加载它。

肯定有改进的余地。

# filter - 在 SSRS 2005 中使用通配符的多值可选过滤器

> ID：13906944
> 
> 赞同：-3
> 
> 时间：2012-12-17T00:35:22.223
> 
> 标签：filter, reporting-services, reportingservices-2005

我以前问过这个问题，但没有解决方案。我使用以下数据集创建了一个多值过滤器。

```
SELECT PASS_M, ENTRY_DT, EXIT_DT, WORKED_HRS, ACCESS_LOCATION_X, IC_N, COMPANY_M,  CONSECUTIVE_D 
FROM TEMP_TARGET
WHERE (CONSECUTIVE_D >= @consecDays) AND (ENTRY_DT BETWEEN @startDate AND @endDate)               AND
(ACCESS_LOCATION_X LIKE @accessVar) AND
(IC_N LIKE @icVAr) 
```

如果 my 的值`accessVar`不使用通配符会相对容易，但我需要它。因此， 中可能有 5 个值`accessVar`：

```
%(means all), 'At%', 'Bet%', 'Co%' and 'Dea%' 
```

我无法将 In 运算符与通配符一起使用。其次，我可以将这种下拉过滤器设为可选吗？如果选择了第 n 个，则查询全部。

我还有什么其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:31:54.307

您想同时使用 LIKE 和多值参数，这是行不通的。但是，Reporting Services 使我们能够做几乎任何我们想做的事情。解决方案是使用自定义代码和表达式。首先，我们将您的 SQL 语句更改为表达式，如下所示：

```
="SELECT PASS_M, ENTRY_DT, EXIT_DT, WORKED_HRS, ACCESS_LOCATION_X, IC_N, "
&"COMPANY_M, CONSECUTIVE_D "
&"FROM TEMP_TARGET "
&"WHERE (CONSECUTIVE_D >= @consecDays) "
&"AND (ENTRY_DT BETWEEN @startDate AND @endDate) "
&"AND ((@accessvar IS NULL) OR (ACCESS_LOCATION_X LIKE @accessVar)) "
&"AND ((@icVar IS NULL) OR (IC_N LIKE @icVAr)) " 
```

所以现在 SQL 语句实际上是一个字符串表达式，它将计算为一个将执行的 SQL 表达式。

接下来我们需要将您的多值参数转换为一系列`LIKE`语句，我们可以使用自定义代码来完成。将以下自定义代码添加到您的报告中（右键单击报告，选择属性并单击代码选项卡）：

```
Function AccessLocations (ByVal parameter As Parameter) AS String
  Dim Result As String
  If parameter.IsMultiValue then
    Result = "AND ( " 
    For i as integer = 0 to parameter.Count-1 
      Result = Result + "(ACCESS_LOCATION LIKE '" + CStr(parameter.Value(i)) + "') OR "  
    Next 
    Result = Left(Result, Result.Length - 3) +") "
  Else 
    Result = "AND (ACCESS_LOCATION LIKE '" + CStr(parameter.Value) + "') "
  End If 

  Return Result
End Function 
```

然后我们将此函数称为 SQL 语句的一部分：

```
Code.AccessLocations(Parameters!accessvar) 
```

所以你的完整 SQL 是：

```
="SELECT PASS_M, ENTRY_DT, EXIT_DT, WORKED_HRS, ACCESS_LOCATION_X, IC_N, "
&"COMPANY_M, CONSECUTIVE_D "
&"FROM TEMP_TARGET "
&"WHERE (CONSECUTIVE_D >= @consecDays) "
&"AND (ENTRY_DT BETWEEN @startDate AND @endDate) "
& Code.AccessLocations(Parameters!accessvar)
&"AND ((@icVar IS NULL) OR (IC_N LIKE @icVAr)) " 
```

如果您的参数中有`%`通配符，那么这将起作用；否则将通配符添加到函数中。

# haskell - '((->) a)' 是什么意思？

> ID：13906950
> 
> 赞同：8
> 
> 时间：2012-12-17T00:37:25.387
> 
> 标签：haskell, types, type-constructor

我以前见过这种类型，但不知道它是什么意思。它是否意味着什么和/或它有名字吗？

```
Prelude> :m Data.Functor
Prelude Data.Functor> :t flip . (flip (<$>))
flip . (flip (<$>))
:: Functor ((->) b) => (b -> a) -> b -> (a -> c) -> c 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T00:44:17.200

实际上，`((->) a)`不是类型，而是部分应用的**类型构造函数**。

就像函数一样，类型构造函数可以部分应用在 Haskell 中。

您可以检查GHCi 中的内容**：**

```
ghci> :k (->)
(->) :: * -> * -> *

ghci> :k (->) Int
(->) Int :: * -> * 
```

所有值都有[kind 类型](http://www.haskell.org/haskellwiki/Kind) `*`；类型构造函数有`* -> *`,`* -> * -> *`等类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T00:44:12.690

在 Haskell 中，`(->) a`来自`a -> something`. 请记住，您可以使用 parans 将运算符转换为前缀函数。即`(+) 1 1 == 2`。所以在这种情况下，“操作员”是类型构造函数`->`。之所以这样使用，是因为仿函数需要一个类型构造函数，它有 1 个变量，但`->`有 2 个变量。所以我们部分应用它。

它可能会帮助您意识到`<$>`for`((->) a)`只是`(.)`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-18T23:34:14.333

为了添加到 Matt Fenwick 和 josefg 的更多技术性答案，`((->) a`可以将 阅读为类型构造函数，该构造函数形成依赖于`a`. 一个例子：假设您的团队成员随时间而变化。一种可能的表示方式是这样的：

```
-- | The type of a's that depend on a point in time, using t as the timeline type.
type Historical t a = t -> a

observe :: Historical t a -> t -> a
observe = ($)

-- | The membership of a team is a list of persons whose composition can change
-- from day to day.
membership :: Team -> Historical Day [Person]
membership = ... 
```

`((->) a)`是`Functor`,`Applicative`和`Monad`, 这意味着类型类操作是可用的, 当与 一起使用时它们有非常有用的解释`Historical t`。

第一个示例：`fmap`将函数应用于与时间相关的值。例如，

```
-- The number of persons in a Team, depending on the Day:
membershipCount :: Team -> Historical Day Int
membershipCount = fmap length . membership 
```

Applicative`<*>`操作为您提供*同时性*：

```
-- The joint membership of team1 and team2, depending on the Day:
(++) <$> membership team1 <*> membership team2 :: Historical Day [Person] 
```

虽然实际上，因为我们有`instance Monoid [a]`和`instance Monoid m => Monoid t -> m`，所以前面的例子可以写成这样：

```
import Data.Monoid

membership team1 ++ membership team2 
```

Monad 给你组合：

```
personToManager :: Person -> Historical Day Manager
personToManager = ...

managerToVP :: Manager -> Historical Day VP
managerToVP = ...

personToVP :: Person -> Historical Day VP
personToVP p = personToManager p >>= managerToVP 
```

另请注意，这与monad`((->) r`完全相同。`Reader r`如果你理解了上面的代码，你就很明白了`Reader`。

* * *

**编辑：**我应该澄清，与时间相关的值只是函数/Reader monad 的*一种用途*。还有其他用途；Reader monad 的经典示例用例是通过计算线程化配置值。如上例所示，它的用途远不止这些。

# ruby - 当我将一个方法设置为它自己的返回值时，到底发生了什么？

> ID：13906956
> 
> 赞同：0
> 
> 时间：2012-12-17T00:39:12.627
> 
> 标签：ruby

所以我有这个错误，我有一个方法：

```
def returnArr
  [2,3,4]
end 
```

我这样做了：

```
returnArr = returnArr.first 
```

返回一个错误，指出 nilClass 没有方法 'first'

此外，在完成那行代码之后，并跟进：

```
returnArr = returnArr().first 
```

工作得很好，returnArr 现在与 returnArr() 不同。这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T00:41:55.160

当你有这条线

```
 returnArr = returnArr.first 
```

Ruby 看到（并执行）这个：

```
 returnArr = nil
 returnArr = returnArr.first 
```

在给变量赋值之前，这个变量被初始化为`nil`。因此，在这种情况下，您的局部变量会影响您的方法。如果没有您的提示，ruby 无法确定您实际上想要调用该方法。当您提供括号时，ruby 知道局部变量不能有它们并调用该方法。

永远不要再这样做了。尤其是在真正的应用程序中。

# c# - 是否可以制作 3 组位置？堆栈<>()

> ID：13906958
> 
> 赞同：0
> 
> 时间：2012-12-17T00:40:05.973
> 
> 标签：c#, stack

有没有可能做这样的堆栈

```
 Stack<Location> labels = new Stack<Location>()
     labels.Push(label1, 400, 100)
     labels.Push(label2, 400, 200) 
```

我需要知道这是否可能。如果是请告诉。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T00:45:04.967

是的，虽然我不建议这样做。创建一个扩展方法并将其放入一个公共静态类中。下面的示例假定有一个构造函数接受一个字符串和两个整数作为类 Location。

```
public static class ExtensionMethods
{
    public static void Push(this Stack<Location> stack, string label, int x, int y)
    {
        stack.Push(new Location(label, x, y));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:48:06.570

就此而言，您还可以创建一个 LocationStack 类来包装您`Stack<Location>,`并公开您正在寻找的友好方法！

# c++ - 使用引用作为模板类型

> ID：13906959
> 
> 赞同：7
> 
> 时间：2012-12-17T00:40:19.990
> 
> 标签：c++

在下面的示例中，`Foo`没有做预期的事情，但我无法弄清楚为什么允许编译。

```
#include <string>
#include <iostream>

typedef std::string& T;

T Foo(int & i)
{
    return T(i);
}

int main()
{
    int a = 1;
    std::string & s = Foo(a);
} 
```

我在模板中发现了这一点，但`typedef`表明它与模板无关。不用说，`s`这里不是一个有效的字符串。我认为在返回中构造值`Foo`会产生编译错误。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T00:56:59.230

首先，这个问题实际上与模板无关，因为这段代码编译得很好：

```
typedef std::string& T;
T Foo(int& i) {
    return T(i);
} 
```

我*认为*这个编译的原因是该`return`语句相当于

```
return reinterpret_cast<T>(i); 
```

万一`T`碰巧是参考成员。......当然，这可以编译：您承诺您知道自己在做什么，并请编译器相信您。

好的，在 5.2.3 [expr.type.conv] 第 1 段找到它：

> ...如果表达式列表是单个表达式，则类型转换表达式等效于（在定义上，并且如果在含义上定义）对应的强制转换表达式（5.4）。...

...和 ​​5.4 [expr.cast] 第 4 段：

> [其他形式的强制转换] a reinterpret_cast (5.2.10) [...] 执行的转换可以使用显式类型转换的强制转换表示法执行。[...]

（省略涵盖涉及用户定义类型、内置类型转换、`const`转换等的情况）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T00:58:32.723

这与模板无关，如果`T`只是 typedef`std::string&`而不是推导的模板参数，则会得到相同的结果：

```
#include <string>

typedef std::string& T;

T Foo(int & i)
{
    return T(i);
}

int main()
{
    int a = 1;
    std::string & s = Foo(a);
} 
```

Dietmar 的回答让我意识到这可以进一步简化为：

```
#include <string>

typedef std::string& T;

int main()
{
    int a = 1;
    std::string & s = T(a);
} 
```

where`T(a)`与演员阵容相同，`(T)a`即`(std::string&)a`which（根据 5.4 [expr.cast] 的规则`const_cast`）`static_cast`将`static_cast`执行由 a `const_cast`if that's valid (which it is not) 或 a `reinterpret_cast`if that's valid (which it **is** ) 或 a`reinterpret_cast`后跟 a `const_cast`if that's valid，否则表达式格式错误。

所以正如 Dietmar 所说，这与做 a 是一样的`reinterpret_cast`，即

```
std::string & s = reinterpret_cast<std::string&>(a); 
```

我发现原始代码编译非常令人惊讶，但由于它与上面那行相同，因此允许编译。但是，使用强制转换的结果是未定义的行为。

为避免令人惊讶的 where`T(a)`等效于强制转换，请使用新的 C++11 统一初始化语法，`T{a}`它始终是初始化，而不是强制转换表达式。

很好的问题，调查和回答它向我展示了一个我以前不知道的新问题，感谢 JaredC 和 Dietmar 提供的新知识！

# iphone - 防止添加视图控制器时调用`willMoveToParentViewController`

> ID：13906960
> 
> 赞同：0
> 
> 时间：2012-12-17T00:40:31.737
> 
> 标签：iphone, ios, uiviewcontroller

在我的应用程序中，当用户按下导航栏上的后退按钮时，我希望程序触发一些动作。因此，我一直在使用`willMoveToParentViewController`. 但是，当添加或删除 viewController 时会调用该方法。添加viewController时有什么方法可以防止它被调用？如果有其他方法可以检测何时按下导航栏中的后退按钮，请提出建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T00:53:14.830

用于`viewDidDisappear`相同。您可以在此处查看苹果[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/viewDidDisappear)。这会在视图控制器的视图从视图层次结构中删除时通知视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T20:17:00.297

作为替代方案，您可以检查 parent 是否`nil`在`willMoveToParentViewController`. 这将`nil`是按下后退按钮时。

例如：

```
override func willMoveToParentViewController(parent: UIViewController?) {
    super.willMoveToParentViewController(parent)
    if parent == nil {
        // view controller being removed (back button)
        // could use this area for passing back some variables 
        //   or whatever else you needed to do when back is hit
    } else {
        // view controller being added, do nothing
    }
} 
```

# .net - Win server 2008 上的 SecuritySafeCriticalAttribute 性能缓慢

> ID：13906965
> 
> 赞同：0
> 
> 时间：2012-12-17T00:41:22.087
> 
> 标签：.net, security, c#-4.0, code-access-security

`Wait`我的应用程序在方法上花费了太多时间

环境：

*   .Net 4.0
*   应用平台 x86
*   控制台应用
*   赢服务器 2008 (x64)

我已经通过 dottrace 检查了性能![](../Images/95d07465fa4567365f3ea7dfb89d7fc7.png)

`Wait`标记为`SecuritySafeCriticalAttribute`

![](../Images/fa97b02d4a45043f270b9acc3551f430.png)

请注意在 Win7 (x64) 上一切正常。我什么也没找到，欢迎提出任何建议。

任务处理

```
private readonly BlockingCollection<TTask> _queue = new BlockingCollection<TTask>();
private Thread _workThread;

public void ProcessTask(TTask task)
{
    _queue.Add(task);
}

private void ProcessTask()
{
    while (_isRun)
    {
        try
        {
            TTask task = _queue.Take();
            if (task.IsNull())
            {
                continue;
            }
            _log.DebugFormat("Sending task: {0}", task);
            DoProcessMessage(task);
        }
        catch (Exception ex)
        {
            _log.Error(ex);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:19:44.143

我认为安全属性不会影响速度。在这里等待很长时间可能需要很多时间，可能是因为您同时从多个线程访问受保护的对象（某些集合）并保持对象锁定很长时间（例如，当您的代码处理集合中的每个项目时）。这不是使用集合的正确方法，而且绝对是代码中的瓶颈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:04:03.640

**解决了**

看起来像**dottrace**显示天气。我已经通过**ANTS Performance Profiler**检查了性能并解决了这个问题。问题出在通过 NHibernate 的 sql 请求中

# android - 更新警报对话框而不更新应用程序

> ID：13906968
> 
> 赞同：0
> 
> 时间：2012-12-17T00:41:45.860
> 
> 标签：android, client-server, push-notification

我已经大量寻找答案，但找不到如何做到这一点；我希望能够`AlertDialog`在应用程序启动时向用户发送新消息，但只有当我有新消息时（不是每次应用程序启动时），而不是每次都运行更新。现在我正在使用`SharedPreferences`并设置一个布尔值检查以查看用户是否在每次运行时查看了该消息，但这不是正确的方法，因为每次我想显示新消息时都需要更新。检查应用程序版本号将无济于事，因为新消息不会基于应用程序更新。如果有人可以引导我朝着正确的方向前进，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:50:33.003

没有什么神奇的方法可以判断用户是否应该看到一条消息——您需要一条信息来确定是否有一条消息要查看。我没有搞砸这些，但我已经看到足够多的 stackoverflow 帖子来确定您需要某种推送消息服务。我能想到的有几个：

*   [谷歌云消息](http://developer.android.com/google/gcm/index.html)
*   [城市飞艇](http://urbanairship.com/products/push-messaging)

[亚马逊](http://www.androidauthority.com/kindle-fire-push-messaging-139723/)也在做类似的事情，但还没有最终确定。所以我建议阅读每个实现，看看你需要付出什么代价，然后尝试一下。

我能想到的还有一种非常有限的快速和肮脏的方式。它涉及制作一个包含您希望应用程序显示的消息的网页，当应用程序启动时，它会抓取您的网页以获取数据，将当前拥有的内容与抓取的内容进行比较，然后根据该信息显示一个对话框。

显然，所有这些方法都需要互联网连接。

快乐编码！

# twitter-bootstrap - Twitter Bootstrap: Grid system floating

> ID：13906970
> 
> 赞同：0
> 
> 时间：2012-12-17T00:41:57.697
> 
> 标签：twitter-bootstrap, grid-layout

I have the following simple html page. It should display Col1 to Col4 horizontally next to each other, but Col4 is in a below the others. Why? And how can I solve it?

I'm using bootstrap 2.2.2

```
<html>
  <head>
    <!-- Bootstrap -->
    <link media="screen" rel="stylesheet" href="http://localhost:9000/assets/stylesheets/bootstrap.min.css">  
  </head>
  <body>    
    <div class="container">
      <div class="row">
        <div class="span6 row">
          <div class="span1">Col1</div>
          <div class="span1">Col2</div>
          <div class="span1">Col3</div>
          <div class="span3">Col4</div>
        </div>
        <div class="span6 row">

        </div>
      </div>
    </div>
    <script src="http://localhost:9000/assets/javascripts/bootstrap.min.js"></script>  
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:58:28.107

Since you're trying to nest grid elements you need to specify the `.row` container as a child of your grid element container, this way your grid elements can properly align. The way you have it now the `.row` class won't be able to remove the extra gutter space it eliminates with a negative margin to fit all the columns within your container. You can read more about it [here](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem) under the **Nesting columns** section.

Fixed markup:

```
<html>
  <head>
    <!-- Bootstrap -->
    <link media="screen" rel="stylesheet" href="http://localhost:9000/assets/stylesheets/bootstrap.min.css">  
  </head>
  <body>    
    <div class="container">
      <div class="row">
        <div class="span6">
            <div class="row">
              <div class="span1">Col1</div>
              <div class="span1">Col2</div>
              <div class="span1">Col3</div>
              <div class="span3">Col4</div>
            </div>
        </div>
        <div class="span6">
            <div class="row">
            </div>
        </div>
      </div>
    </div>
    <script src="http://localhost:9000/assets/javascripts/bootstrap.min.js"></script>  
  </body>
</html> 
```

# python - 我遇到了 pygtk 的问题

> ID：13906976
> 
> 赞同：1
> 
> 时间：2012-12-17T00:43:19.420
> 
> 标签：python, pygtk

大家好，我一直在学习 python 和 pygtk 我最近遇到了一个我试图制作的小程序的问题。

当您第一次单击托盘图标时，我的窗口正常显示，但在关闭我试图设置为“最小化到托盘”类型的窗口后，它不会再次打开，只显示一个空白窗口而不是一个它最初显示。

```
 import os
    import gtk
    import gobject
    import datepicker
    from dateutil import relativedelta
    import datetime
    import numberentry
    class ShutdownTimer:
        tray_tooltip = ''
        timer_visible = False
        timerui = gtk.Window()
        def set_tooltip(self, string):
            self.tray_tooltip = str(string)
        def set_visible(self, v, visible):
        self.timer_visible = visible
        if self.timer_visible is True:
            self.timerui.show_all()
        else:
            self.timerui.hide_all()
        def set_up(self):
            self.timerui.set_title("Shutdown Timer")
            self.timerui.connect("destroy", self.set_visible, False)
            self.row_one = gtk.HBox()
            self.combo = gtk.combo_box_new_text()
            self.combo.append_text("Shutdown")
            self.combo.append_text("Hibernate")
            self.combo.append_text("Suspend/Sleep")
            self.combo.append_text("Restart")
            self.combo.append_text("Cancel")
            self.combo.set_active(0)
            self.row_one.pack_start(self.combo, False, False)

            hlbl = gtk.Label()
            mlbl = gtk.Label()
            hlbl.set_text("H:")
            mlbl.set_text("M:")

            self.hentry = numberentry.NumberEntry()
            self.mentry = numberentry.NumberEntry()
            submit = gtk.Button("Submit")
            submit.connect("clicked", self.submit_action)

            self.row_one.pack_start(hlbl, False, False)
            self.row_one.pack_start(self.hentry, False, False)
            self.row_one.pack_start(mlbl, False, False)
            self.row_one.pack_start(self.mentry, False, False)
            self.row_one.pack_start(submit, False, False)

            self.row_one.show_all()

            self.timerui.add(self.row_one)

        def submit_action(self, action):
            task = self.combo.get_active_text()
            hours = int(self.hentry.get_text())
            minus = int(self.mentry.get_text())
            hourm = hours * 60
            tmins = minus + hourm
            tseconds = tmins * 60
            print tseconds

            date = datetime.datetime.now()
            print date

            future = datetime.timedelta(seconds=tseconds)
            total = date+future
            print total

            print "%s scheduled for %s" % (task, total)
            string = task + " scheduled for " + str(total)
            md = gtk.MessageDialog(self.timerui, gtk.DIALOG_DESTROY_WITH_PARENT, gtk.MESSAGE_INFO, gtk.BUTTONS_CLOSE, string)
            md.run()
            md.destroy()
        #print '%s - %s / %i:%i %s' % (action, date, hours, minutes, timePart)
        #date_split = date.split("/")
        #today = datetime.date.today(date_split[2],date_split[0], date_split[1])
        #rd = relativedelta(today, datetime.date())
        #print "Seconds to go: %(seconds)d" % rd.__dict__
        def on_right_click(self, shutdown, status, action):
            menu = gtk.Menu()

            menu_item = gtk.MenuItem("Quit")
            menu_item.connect("activate", lambda w: gtk.main_quit())
            menu.append(menu_item)
            menu_item.show()
            menu_item = gtk.MenuItem("Show Window")
            menu_item.connect("activate", self.set_visible, True)
            menu.append(menu_item)
            menu_item.show()
            menu.popup(None, None, None, action, action)
        def __init__(self):
            self.status = gtk.StatusIcon()
            home = os.getenv('HOME')
            icon_path = home + '/.config/shutdowntimer/icons/32x32/tray_icon.png'
            settings_path = home + '/.config/shutdowntimer/settings/'
            self.status.set_from_file(icon_path)
            self.status.set_visible(True)
            self.status.connect("popup_menu", self.on_right_click)
            self.status.connect("activate", self.set_visible, True)
            self.set_up()

    def main():
        gtk.main()
        return 0

    if __name__ == "__main__":
    ShutdownTimer()
    main() 
```

我确信我的代码在格式化、注释和可能的命名约定方面存在一些问题，但任何有助于阐明我的问题的帮助将不胜感激。谢谢:)！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:51:32.517

很抱歉浪费任何人的时间我设法通过在这个特定位置调用 self.set_up() 来解决我的问题

```
 def set_visible(self, v, visible):
    self.timer_visible = visible
    if self.timer_visible is True:
        self.set_up()
        self.timerui.show_all()
    else:
        self.timerui.hide_all() 
```

# jquery - jQuery自动完成：在选择时解析来自同一数组的其他键

> ID：13906978
> 
> 赞同：1
> 
> 时间：2012-12-17T00:43:35.040
> 
> 标签：jquery, json, jquery-ui, autocomplete

我有一个自动完成片段，它根据您的搜索词检索城市名称。

例如，搜索词`s`将打印：

![在此处输入图像描述](../Images/ebb35e4a278cd2941aadb39a6310939f.png)

所以如果我会使用：

```
var f = [];
$.each(a.RESULTS, function (a, b) {
    f.push(b.name /* + b.zmw */)
});
b(f) 
```

我会打印`name`每个城市的。

现场示例：http: [//jsfiddle.net/muWah/18/](http://jsfiddle.net/muWah/18/)

**每当我点击它时，我如何打印/console.log()`zmw`每个城市的价值。**

所以当我点击时`Serbia`，我应该被打印出来`000RB.1.99999`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T00:51:43.667

```
$.each(a.RESULTS, function (a, b) {
   f.push({label: b.name, value : b.zmw})
}); 
```

您可以推送一个带有标签和值的新对象。标签是为自动完成而拾取的内容，值是选择时出现在输入中的内容。

演示：http: [//jsfiddle.net/muWah/21/](http://jsfiddle.net/muWah/21/)

如果您只想`zmw`在控制台中有引用，而不是在输入中打印出来，您可以向传递的对象添加更多属性。例如：

```
$.each(a.RESULTS, function (a, b) {
    f.push({label: b.name, value : b.name, zmw : b.zmw})
}); 
```

然后`b.item.zmw`将是您在控制台中打印的内容，但名称/值仍然是`"Serbia"`（或您单击的任何内容）

演示：http: [//jsfiddle.net/muWah/24/](http://jsfiddle.net/muWah/24/)

# c++ - 从其基类列表中调用重写函数？

> ID：13906980
> 
> 赞同：1
> 
> 时间：2012-12-17T00:43:54.580
> 
> 标签：c++, inheritance, virtual, overriding

假设我有一个带有虚函数的空类：

```
class Base
{
public:
    virtual void Foo(){std::cout << "this is the base class";}
} 
```

然后我有一个继承`Base`并覆盖的类`Foo()`：

```
class Derived : public Base
{
public:
    void Foo(){std::cout << "this is the derived class";}
} 
```

然后还有其他一些包含以下列表的类`Base`：

```
class OtherClass
{
public:
    std::vector<Base> listOfBases; //note it's not std::list<Derived>
} 
```

我如何循环`listOfBases`并调用`Foo()`类`Derived`而不是`Base`类？现在，如果我说`listOfBases[i].Foo();`这*是*要打印的基类，但我希望类中被覆盖的基`Derived`类能够打印。

我可以把它变成一个列表`Derived`而不是，`Base`这样就可以解决它，但是我将把这些继承的类称为各种不同的东西，所以我需要一个`Base`.

那么如何从其基类列表中调用被覆盖的函数呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T00:47:14.547

您需要使用一个列表`Base*`（即指向基址的指针），或者最好`std::unique_ptr<Base>`使用`std::shared_ptr<Base>`.

其原因是因为 C++ 对象模型和复制。派生类必须至少与其基类一样大（它们可以是相同的大小，具体取决于派生类是否为空）。由于 C++ 在向 a 添加项目时利用复制（或可能在 C++11 中移动） ，因此它必须为 n 个对象`vector`分配足够的空间。`Base`由于 a`vector`几乎总是一个简单的包装器`array`，因此尝试将一个（可能不同大小的）`Derived`对象添加到一个对象`array`中`Base`是未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T00:53:27.107

获取指向每个基类的指针，然后将其向下转换为派生类。之所以称为向下转换，是因为在 UML 图中，通常将基类绘制在派生类之上。

```
for ( auto q = listOfBases.begin(); q != listOfBases.end(); ++q )
{
    Base* pBase = &(*q); // Get pointer to Base class. Can't downcast on object.
    Derived* pDerived = dynamic_cast<Derived*>(pBase); // Downcast
    pDerived->Foo();   // Call Foo() of Derived
} 
```

# parse-platform - parse.com clientKey 和 masterKey 之间的区别以及所有其他密钥？

> ID：13906986
> 
> 赞同：2
> 
> 时间：2012-12-17T00:45:08.307
> 
> 标签：parse-platform

我一直在阅读解析文档，但没有为它在概述页面上指定的每个键/ID 找到一个很好的定义。

任何人都可以给出一个很好的定义，以及我何时需要每个项目的现实例子吗？

编辑只是为了打败某人，我*知道*概述页面定义了每个键。但是这些定义是“可怕”的教科书示例......它们对我来说不够具体或清晰。例如，我*可以*使用 Windows 应用程序中的应用程序密钥吗？为什么不？我通过 json 请求与 parse 通信，它几乎不知道也不真正关心我从哪里通信！

我看到的一个教程让我使用万能钥匙进行所有通信 -如果构建移动应用程序，我想这是一个*糟糕的主意。*等等等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T01:46:24.743

这个[答案](https://parse.com/questions/what-is-the-purpose-of-the-different-types-of-parse-application-keys)不包括 Windows 密钥，但它确实涵盖了客户端、REST API 和主密钥之间的区别。

# python - 在 Google App Engine 的 remote_api_shell.py 中检索和写入实体时出错

> ID：13906987
> 
> 赞同：1
> 
> 时间：2012-12-17T00:45:08.347
> 
> 标签：python, google-app-engine, app-engine-ndb

这是我的困境：我必须遍历一个实体列表，检查某些重复的属性——我正在使用 NDB——是否为空。如果是，那么我给它赋值，然后`put()`. 否则我跳过实体。我正在尝试在谷歌应用引擎附带的远程登录 shell 中完成所有这些工作。

我已经尝试过迭代 Model.query()，执行条件，并写入值，但是当我开始编写时，进程被挂断了。当我最终 Ctrl-C 时，它会弹出一条错误消息，“assert response.set_status_size() == len(server_keys); AssertionError”。我假设这与它试图检索的实体的大小有关。有谁知道怎么回事？这是我当前的代码：

```
>>> for entity in Model.query():
...    if not len(entity.references):
...        entity.references = somevalue
...        continue
...    print 'skipped' 
```

我只会过滤查询而不是使用`if`语句，但我不确定如何按重复属性的长度过滤查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T07:37:04.457

你有多少实体？如果你有超过 100 个左右，从远程 api 查询确实效率低下（二次方）。所以这可以解释它挂起。

你是对的，你不能编写一个查询来检测你正在寻找的条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:46:15.523

我终于让它工作了！我曾经`query.fetch_page`分批获取查询，然后遍历每个批次并应用更改。

```
>>> more = True
>>> cursor = None
>>> while more:
...     batch, cursor, more = MyModel.query().fetch_page(50, start_cursor=cursor)
...     for entity in batch:
...          if not len(entity.references):
...               entity.references = somevalue
...               entity.put()
...     print "finished batch" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T01:08:54.550

代码示例在找到第一个没有引用的实体时返回（`skipped`如果没有引用则打印），但它可能会留下一些没有任何引用的实体。我不知道这是否是你的意图。

如果只有几个引用值是可能的，例如 ['python', 'ruby', 'php']，我认为您可以执行[重复属性](https://developers.google.com/appengine/docs/python/ndb/queries#repeated_properties)查询，例如`Model.query(Model.references.IN(['python', 'ruby', 'php'])))`，将该列表与所有实体列表的差异，以及迭代剩余的实体。（我不太了解 NDB，并且怀疑这通常是一个好方法，但希望它对某些数据集可以正常工作。）

# html - 如何链接联系表格？

> ID：13906990
> 
> 赞同：1
> 
> 时间：2012-12-17T00:46:23.640
> 
> 标签：html, css

我在这里有点便宜，并为我的业务窃取了一个网站模板，而不是从头开始制作一个。

但是我的问题是在联系表格上 - 我如何将其链接到我的电子邮件中？

```
<div id="contact_form">
            <h4>Send us a message now!</h4>
            <form method="post" name="contact" id="ok" action="#">

                <label for="author">Name:</label> <input type="text" id="author" name="author" class="required input_field" />
                <div class="cleaner_h10"></div>
                <label for="email">Email:</label> <input type="text" id="email" name="email" class="validate-email required input_field" />
                <div class="cleaner_h10"></div>

                <label for="phone">Phone:</label> <input type="text" name="phone" id="phone" class="input_field" />
                <div class="cleaner_h10"></div>

                <label for="text">Message:</label> <textarea id="text" name="text" rows="0" cols="0" class="required"></textarea>
                <div class="cleaner_h10"></div>

                <input type="submit" class="submit_btn float_l" name="submit" id="submit" value="Send" />
                <input type="reset" class="submit_btn float_r" name="reset" id="reset" value="Reset" />

            </form>
        </div>
    </div> 
```

那是我的表格-我还需要在实际表格的背景中添加白色（全黑），这样您就看不到框了-我该怎么做？

为帮助欢呼

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-17T00:50:48.997

最基本的方法是将 设置`action`为您的电子邮件地址：

```
<form action="mailto:someone@example.com" method="post" enctype="text/plain"> 
```

[http://webdesign.about.com/od/forms/a/aa072699mailto.htm](http://webdesign.about.com/od/forms/a/aa072699mailto.htm)

# capybara - Capybara：是否可以从 css 字符串中获取属性值？

> ID：13906994
> 
> 赞同：32
> 
> 时间：2012-12-17T00:47:01.253
> 
> 标签：capybara

如果我有一些 HTML，例如：

```
<div id='drawer'><ul><li><a href='www'>description</a>... 
```

我已经看到我可以通过以下方式获得 Capybara 中 href 的值：

```
page.find('div#drawer a')['href'] 
```

但是，如果它完全被描述为一个 css 字符串，有什么方法可以检索该值？即，尝试获取**'div#drawer a[href]' 的值**

我试过这样的表达：

```
page.find('div#drawer a[href]')        => can't convert Capybara::Node::Element into String (TypeError)
page.find('div#drawer a[href]').value  => can't convert nil into String (TypeError)
page.find('div#drawer a[href]').text   => returns the text value of 'description' 
```

我在外部配置文件中有那个 css 表达式，所以有没有可能直接使用它并检索相关属性的值？

谢谢...

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-04-19T04:05:04.977

恐怕为时已晚。但我也遇到了同样的问题并找到了解决方案。它可能会帮助别人。

```
page.find('div#drawer a')[:href] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T20:22:11.433

我能够做到这一点的唯一方法是使用 jQuery。

```
href = page.evaluate_script("$('a.link_class').attr('href');") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-13T13:24:32.423

如果您正在寻找具有给定属性的给定值的 HTML 元素，您可以执行以下操作：

```
expect(page).to have_css('a[href="www"]') 
```

# xml - XQuery 文件：意外的字符 (é)

> ID：13906997
> 
> 赞同：1
> 
> 时间：2012-12-17T00:47:21.053
> 
> 标签：xml, xquery

我正在对 XML 文件执行 XQuery 请求，但其中一些元素的名称包含特殊字符，例如`<espèce>`.

当我运行我的 .xqy 文件时，我收到以下错误：

> /project/myfile.xqy
> 
> 意外字符：'0xFFFD'

如何摆脱这个？

我的 .xqy 文件包含：

```
count(//espèce) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T01:02:06.610

FFFD 是 Unicode“替换字符”，它通常不作为文字字符出现在文本中，而是表示读者发现它无法解释为有效字符的字节序列的地方。

实际上，这可能意味着您的`.xqy`文件采用 ISO-8859-1 或 Windows-1252 之类的编码，但您的软件正试图将其读取为 UTF-8。

# smtp - 在定制的 SMTP 服务器上发送附件

> ID：13906998
> 
> 赞同：0
> 
> 时间：2012-12-17T00:47:23.907
> 
> 标签：smtp

我目前正在自己​​的 SMTP 服务器上工作，我可以成功地从各种程序和网页（如 Outlook、PHP 和 Pear Mail）发送电子邮件。

我需要做的下一个阶段是尝试通过我的 SMTP 服务器发送附件。我尝试在通过 PHP 将附件发送到另一个 SMTP 服务器时对我的服务器进行 LAN 跟踪，我可以看到我从客户端得到以下信息：

```
DATA fragment, 661 bytes 
```

我不确定这是否与附件有关。

如果是，这只是告诉 SMTP 服务器文件有多长，然后我应该将一个 base 64 编码的字符串写入网络流并将其写入用于发送电子邮件的文件。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:24:12.270

SMTP 没有邮件“附件”的概念。电子邮件附件是同一消息正文的一部分，在 SMTP 中全部在`DATA`命令和*End-of-DATA*指示符（`.`“命令”）之间传输。请参阅 RFC 5321。请注意，在 SMTP 中没有办法告诉服务器有多少数据将遵循`DATA`命令，尽管服务器有办法限制消息正文的大小（以及对End-of-DATA 命令可能是错误响应代码和指示已发送过多数据的消息。

您可以使用 MIME 来识别邮件正文的不同部分，但是邮件正文的创建和解释完全超出了 SMTP 服务器的范围。请参阅 RFC 2045 和 RFC 2046，以及许多其他细化 MIME 规范的相关 RFC（包括 RFC2184、RFC2231、RFC5335、RFC6532、RFC2646、RFC3798、RFC5147、RFC6657）。