# StackOverflow 问答 15860000-15860999

# qt - 调整pyqt tableview大小时如何剪切列单元格的左侧

> ID：15860001
> 
> 赞同：3
> 
> 时间：2013-04-07T07:33:41.777
> 
> 标签：qt, pyqt, tableview

在 pyqt（以及一般的 qt）的 tableview 或 tablewidget 中，如果您调整没有换行的列单元格的大小，则单元格值的右侧将被剪裁（并用省略号替换......），无论单元格是否值左对齐或右对齐。

效果如下：

```
The long and winding road.  => The long and windi... 
```

是否可以在裁剪单元格值的左侧时强制表格调整单元格的大小？

我想要的效果如下：

```
The long and winding road.  => ...ng and winding road. 
```

我想要这样，如果我右对齐一行文本，然后调整单元格的大小，我希望始终看到行尾的内容。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T08:25:05.827

您可以使用[setTextElideMode](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#textElideMode-prop)设置“...”的放置位置。在您的情况下（使用 C++）：

```
ui->tableWidget->setTextElideMode(Qt::ElideLeft); 
```

请注意，省略模式会影响所有列。

# sql-server - 尝试使用实际设备测试 Windows Phone 8 应用程序时出现问题

> ID：15860004
> 
> 赞同：0
> 
> 时间：2013-04-07T07:33:51.890
> 
> 标签：sql-server, visual-studio-2012, windows-phone-8, wcf-data-services

实际上，我在尝试直接在 Windows Phone 8 设备上测试我的应用程序时遇到了问题。

我有一个 SQL 数据库，我的 Windows Phone 8 应用程序在使用模拟器时通过 WCF 数据服务成功连接到它。

当我尝试在将电话插入计算机的情况下运行应用程序时，它不再运行，并且在托管限制之前我得到了那些未处理的异常：

```
`System.Net.WebException`
`System.Data.Services.Http.WebException`
`System.Data.Services.Client.DataServiceTransportException`
`System.Data.Services.Client.DataServiceClientException`
`System.Data.Services.Client.DataServiceQueryException` 
```

非常感谢。

# visual-studio-2012 - 如何在启动 Visual Studio 2012 时摆脱 VMware 错误，但不禁用 VMDebugger 加载项？

> ID：15860006
> 
> 赞同：21
> 
> 时间：2013-04-07T07:34:07.747
> 
> 标签：visual-studio-2012, add-in, vmware-workstation

以非特权用户身份启动 Visual Studio 2012 时出现以下错误：

> 尝试访问日志文件时发生错误。日志记录可能无法正常工作。

一次偶然的网络搜索显示，早在 2006 年，VMware 6 beta 就存在这个问题。我还发现了另一个用户在更新的 VS 版本 (2008) 中遇到了同样的问题，而且它直到最近才开始出现。

消息框的标题表明这来自 VMware。我安装了 VMware 9 Workstation。该问题可能与系统更新或更新 2012.2 CTP 相关，并且与最终的 2012.2 更新包无关。

### 问题：

如何在不实际禁用 VMDebugger 加载项的情况下摆脱错误？

### 临时解决方法：

有一种解决方法，`VMDebugger`在“加载项管理器”中禁用。但是，似乎非特权用户无法成功禁用它。我必须以管理员身份启动 VS（我为此目的使用[SuRun](http://sourceforge.net/projects/surun/)）才能禁用它，并且在下次启动 IDE 时错误不会再次出现。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-09-05T08:21:39.693

我有完全相同的问题，这就是我解决它的方法。

我使用 procmon 监视 devenv.exe 以查找日志路径，在我的计算机上它是：%TEMP%\vmware- *username*

我检查了日志目录的权限，发现我的用户没有访问权限——既不能读也不能写！我给了自己完全访问权限并删除了旧的日志文件。这为我解决了它。

我认为这是因为我在安装 VS 和 VMware 时禁用了 UAC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-13T01:16:44.040

在 Visual Studio 中，转到菜单栏 VMWARE / About VMWare Virtual Debugger；调试器日志文件将在此处列出，例如 C:\Users\Phil\AppData\Local\Temp\vmware-Phil\vmware-vsid-1.log 授予您的用户对该文件的完全访问权限。（此解决方案适用于 Visual Studio 2013、VMware Workstation 11.1.2、Windows 8.1。）

![在此处输入图像描述](https://i.stack.imgur.com/la7vb.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-17T15:55:57.430

最快最简单的解决方法是...
1\. 找到文件夹*%temp%\vmware-{username}*
2\. 删除此文件夹。该文件夹将通过打开 Visual Studio 来创建。

**注意：**您需要在没有管理员权限的情况下打开 Visual Studio 才能解决此问题！

**背景：**如果您第一次在管理员权限下使用 VMware 调试器插件，通常会发生这种情况（因为您的应用程序可能需要此权限才能正常运行）。这将在具有管理员权限的管理员权限下创建文件夹。每次使用管理员权限打开 Visual Studio 时，都没有问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-16T19:57:04.780

例子

视窗：`C:\Documents and Settings\<username>\Local Settings\Temp\vmware-<username>-<PID>.log`

Linux：`/tmp/vmware-<username>/ui-<PID>.log`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-06-17T18:10:05.230

这篇文章帮助了我

最快最简单的解决方法是... 1\. 找到文件夹 %temp%\vmware-{username}

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-10-15T14:54:18.763

进去`windows+R` `%temp%`，`delete all`准备好！

# arrays - 用剔除过滤数组属性。我应该使用嵌套对象还是存在其他方式？

> ID：15860007
> 
> 赞同：0
> 
> 时间：2013-04-07T07:34:10.840
> 
> 标签：arrays, multidimensional-array, knockout.js, nested, knockout-mapping-plugin

使用这个[http://jsfiddle.net/rniemeyer/NFbxc/](http://jsfiddle.net/rniemeyer/NFbxc/)我做了几乎相同的东西（[http://jsfiddle.net/uhtshka/HE94X/](http://jsfiddle.net/uhtshka/HE94X/)），它实现了我几乎所有的需求，但仍然存在一个问题。从以下链接可以看出，我们使用的数组非常简单。有点儿：

```
var simpleArray = [
                   {... som data ...},
                   {... som data ...},
                   {... som data ...}]; 
```

但我试图用更复杂的数组结构来实现相同的功能，比如：

```
var notsosimpleArray = [{
     dayname: 'Monday', rows:[
             col1: 'data1',
             col2: 'data2',
             col3: 'data3',
     ]},{dayname: 'Tuesday', rows:[
             col1: 'data1',
             col2: 'data2',
             col3: 'data3',
     ]}]; 
```

这可能与保存相同的功能有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:10:37.623

正如您所描述的，您当然可以对复杂对象使用淘汰赛。

您引用的 JSFiddle 存在一些问题（在窗口对象上设置和引用的 var1-5？），所以我没有尝试解决添加行函数，但我确实更新了小提琴中使用行数组的示例每天的数据。

这是链接：http: [//jsfiddle.net/HE94X/1/](http://jsfiddle.net/HE94X/1/)

请记住，在您的过滤器函数中，您想要返回一个数组，您可以通过查找日期来找到它。`ko.utils.arrayForEach`现在不需要该函数，因为该数组已嵌入到当天的对象数据中。

您应该能够将此逻辑扩展到添加行函数，以便它可以将条目推送到当天的行数组中。

# ios - 如何在 ios 的非续订订阅中提供测试期

> ID：15860015
> 
> 赞同：0
> 
> 时间：2013-04-07T07:35:33.257
> 
> 标签：ios, objective-c, in-app-purchase

再会，

我遇到了一个有趣的问题：

根据用户完成的任务，我为应用程序提供 1、3、5 和 7 天的免费测试期。例如，如果一个人首先通过 fb 帐户授权，他有测试周来尝试全部功能。

问题是我：

1.  没有应用内购买就无法做到（11.1、11.2）
2.  不能使用订阅少于一周（11.6：使用 IAP 的内容订阅必须至少持续 7 天，并且用户可以从他们的所有 iOS 设备上使用）
3.  没有钱不能使用非续订订阅

您能否建议，我应该使用哪种类型的应用内购买？

# ruby-on-rails - 对 apache 服务器虚拟主机感到困惑

> ID：15860017
> 
> 赞同：0
> 
> 时间：2013-04-07T07:35:51.007
> 
> 标签：ruby-on-rails, ruby, apache, directory, virtual

所以我在 httpd-vhosts.conf 目录中配置了一个 VirtualHost，但是每当我导航到 servername 时，它​​似乎总是给我 httpd.conf 中列出的页面。

我是 apache Web 服务器的新手，不知道我还需要做什么。

在我的 httpd-vhosts.conf 我有

```
NameVirtualHost *:80

#                                                                                                                                          
# VirtualHost example:                                                                                                                     
# Almost any Apache directive may go into a VirtualHost container.                                                                         
# The first VirtualHost section is used for all requests that do not                                                                       
# match a ServerName or ServerAlias in any <VirtualHost> block.                                                                            
#                                                                                                                                          
<VirtualHost *:80>
   ServerName helloworld.com
   DocumentRoot /Users/username/Desktop/RailsDemo/depot/public/
  <Directory /Users/username/Desktop/RailsDemo/depot/public/>
    AllowOverride all
    Options -MultiViews
    Order allow,deny
    Allow from all
  </Directory>
</VirtualHost> 
```

在我的 httpd.conf 中，我有默认设置，因此安装后我没有更改任何内容。

此外，我已将 helloworld.com 与正确的 IP 地址相匹配。在浏览器中键入 helloworld.com 会产生错误的视图...它会产生 httpd.conf 中指示的视图。

如果这有帮助，我正在尝试做 p。238 Pragmatic Agile Web Development with Ruby on Rails（第 4 版）——迭代 K1：使用 Phusion Passenger 和 MySQL 进行部署

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T07:41:27.510

您似乎正在运行 Mac OS X。在您的 httpd.conf 中，您将看到这些行；

```
# Virtual hosts
#Include /private/etc/apache2/extra/httpd-vhosts.conf 
```

删除评论，使其成为

```
# Virtual hosts
Include /private/etc/apache2/extra/httpd-vhosts.conf 
```

重新启动 apache，这应该会激活您命名的虚拟主机。

# java - 将代码转换为类

> ID：15860018
> 
> 赞同：0
> 
> 时间：2013-04-07T07:36:03.460
> 
> 标签：java, android, class

任何人都可以帮助我学习如何将代码转换为类，以便我可以在任何地方使用它吗？例如，我有这段代码如何将其转换为单独的类并在我的不同活动中使用它？

我是java新手，对此确实有问题..感谢您的帮助

```
public  String getInformationData(String mySQL){
    String information_text=null;
    try{
db = SQLiteDatabase.openDatabase(ClubCP.DbPath,null,SQLiteDatabase.CREATE_IF_NECESSARY);
        Cursor information = mDb.rawQuery(mySQL,null);
        int information1 = information.getColumnIndex("description");

        while (information.moveToNext()) {

        String columns = (String) information.getString(information1);

        information_text =  "<head><style>@font-face {font-family: 'verdana';src: url('file://"+ ClubCP.SDcardPath+ "Homa.ttf');}body {font-family: 'verdana';color:#ffffff;font-size:18px;padding:10px 10px 0 10px;}</style></head>"+"<html Content-Type: text/html charset=UTF-8;dir=\"rtl\"><body>"
                + "<p dir=\"rtl\"  align=\"justify\">"                
              + columns
               + "</p> "
              + "</body></html>";
    }
    } catch (Exception e) {
        Toast.makeText(callingActivity, e.getMessage(), 1).show();
        }

    return information_text;
    } 
```

最后我创建了我的类..我向它添加了另一个方法，但是当我调用它时，我得到了 FC ..我的错误在哪里？

```
package co.tosca.persianpoem;

import java.io.File;

import android.app.Activity;
import android.content.Context;
import android.content.res.Resources;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.Log;
import android.view.View;
import android.widget.ImageView;
import android.widget.Toast;

public class persian_poem_class {
     private Context c = null;
     private  SQLiteDatabase Db=null;
     private Activity callingActivity;
     //private Resources res =null ;

public persian_poem_class(Context c,Activity a)
        {
            // Constructor 
            this.c = c;
            Db = SQLiteDatabase.openDatabase(ClubCP.DbPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
            callingActivity=a;
        }

public String getInformationData(String mySQL)
        {
            String information_text = null;

            try
            {

                Cursor information = Db.rawQuery(mySQL,null);
                int information1 = information.getColumnIndex("description");
                while (information.moveToNext()) 
                {
                    String columns = (String) information.getString(information1);
                    information_text =  "<head><style>@font-face {font-family: 'verdana';src: url('file://"+ ClubCP.SDcardPath+ "Homa.ttf');}body {font-family: 'verdana';color:#ffffff;font-size:18px;padding:10px 10px 0 10px;}</style></head>"+"<html Content-Type: text/html charset=UTF-8;dir=\"rtl\"><body>"
                            + "<p dir=\"rtl\"  align=\"justify\">"                
                          + columns
                           + "</p> "
                          + "</body></html>";
                }
            } 
            catch (Exception e) 
            {
                Toast.makeText(c, e.getMessage(), Toast.LENGTH_SHORT).show();
            }

            return information_text;
        }

public void Change_header(View v,String id){
            String path = ClubCP.SDcardPath + "/temp/"+id+"-header.jpg"; 
             Log.i("view binder", path);
           File imgFile = new File(path);
           ImageView img=(ImageView)v;
            if(imgFile.exists()){
                Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());                         
                img.setImageBitmap(myBitmap);

                 }
                      else    {                
                 img.setImageDrawable(callingActivity.getDrawable(R.drawable.music_album_header_vinyl));

                 }
        }

public Cursor getData(String mySQL){

    Cursor c = Db.rawQuery(mySQL, null);

    return c;

}
public void closeMyDb()
{
    if (Db != null)
        Db.close();
    else
        throw new NullPointerException("No database selected!");
}
} 
```

我通过这段代码调用第二个方法

```
persian_poem_class main = new persian_poem_class(Book_list.this);
ImageView header=(ImageView)findViewById(R.id.img_header_book_list_activity);
main.Change_header(header, Peot_ID_for_db); 
```

再次感谢您的时间..我修复了我的课程，但现在我的方法有另一个问题..我`Change_header`收到`getDrawable(R.drawable.music_album_header_vinyl)`“getdrawable is undifined”的错误我搜索，我发现问题出在范围但无法修复它..我试过`c.getDrawable`但仍然有问题`enter code here`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T07:44:50.020

好的，我根据您的要求制作了一个简单的类，但是您的代码的某些部分对我来说不是很清楚，`ClubCP.DbPath`或者`ClubCP.SDcardPath`我认为这些是静态变量。

无论如何，要使用此类，您需要从以下位置创建新实例`myClass`：

```
myClass mMyClass = new myClass(youractivity.this);
mMyClass.getInformationData("your query");
mMyClass.closeMyDb() // To close your current database 
```

***根据评论编辑：***

```
import java.io.File;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.Log;
import android.view.View;
import android.widget.ImageView;
import android.widget.Toast;

public class myClass 
{
    private Context c = null;
    private SQLiteDatabase mDb;

    public myClass(Context c)
    {
        // Constructor 
        this.c = c;
        mDb = SQLiteDatabase.openDatabase(ClubCP.DbPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
    }

    public String getInformationData(String mySQL)
    {
        String information_text = null;

        try
        {
            Cursor information = mDb.rawQuery(mySQL,null);
            int information1 = information.getColumnIndex("description");
            while (information.moveToNext()) 
            {
                String columns = (String) information.getString(information1);
                information_text =  "<head><style>@font-face {font-family: 'verdana';src: url('file://"+ ClubCP.SDcardPath+ "Homa.ttf');}body {font-family: 'verdana';color:#ffffff;font-size:18px;padding:10px 10px 0 10px;}</style></head>"+"<html Content-Type: text/html charset=UTF-8;dir=\"rtl\"><body>"
                        + "<p dir=\"rtl\"  align=\"justify\">"                
                      + columns
                       + "</p> "
                      + "</body></html>";
            }
        } 
        catch (Exception e) 
        {
            Toast.makeText(c, e.getMessage(), Toast.LENGTH_SHORT).show();
        }

        return information_text;
    }

    public void Change_header(View v, String id)
    {
       String path = ClubCP.SDcardPath + "/temp/"+id+"-header.jpg"; 
       Log.i("view binder", path);
       File imgFile = new File(path);
       ImageView img = (ImageView) v;

       if(imgFile.exists())
       {
           Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());                         
           img.setImageBitmap(myBitmap);
       }
       else               
         img.setImageDrawable(c.getResources().getDrawable(R.drawable.music_album_header_vinyl));
    }

    public void closeMyDb()
    {
        if (mDb != null)
            mDb.close();
        else
            throw new NullPointerException("No database selected!");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T07:41:40.133

首先，创建一个新类，其名称可以描述它的作用（即用名称替换 myClass）。然后，通过调用`public myClass()`不带返回类型来为这个类创建一个构造函数（这是 Java 将其识别为构造函数的方式。构造函数是每次类运行时调用的，所以只需将代码粘贴到构造函数的主体中，每次创建类的新对象时都会调用它。

```
 Class myClass {
       ...
       public myClass(){
          public  String getInformationData(String mySQL){
          String information_text=null;
          try{
              db = SQLiteDatabase.openDatabase ...
          ... rest of code...

    return information_text;
}

}
} 
```

欢迎来到面向对象编程 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T08:31:36.643

通过右键单击您的`src`文件夹并单击 create来简单地创建一个新类`new class`。

完成命名类的过程后，将当前代码粘贴到该类中，这将是您的`public String getInformationData(String mySQL)`方法。

完成此操作后，创建对此类的引用，在您要从中调用的每个类/活动中创建此类的对象`String getInformationData(String mySQL)`。

```
YourClass foo =  new YourClass();
foo.getInformationData(string); 
```

我希望这有帮助。

# winjs - 想用我自己的数据填充 WinJS.UI.ListView

> ID：15860025
> 
> 赞同：0
> 
> 时间：2013-04-07T07:36:59.620
> 
> 标签：winjs

我已经使用

```
WinJS.xhr({ url: url, responseType: "json" }).then(
     function(result){},
     function(error){}
); 
```

我在按钮单击事件上制作了这些东西。我正确获取了数据，但无法将它们填充到我的 ListView 中。那么现在，如何在每次单击按钮时将我的 WinJS.UI.ListView 中的 JSON 数据与我的新数据绑定......？请通过一些简单的例子帮助我。因为我已经检查了很多链接。但我还是不明白在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:52:04.993

它应该是这样的：

```
WinJS.xhr({ .. }).then(function xhrcomplete(req)
{
    var data; // assuming you already have code that parsed json text to an object.
    var items = [];
    // fill code here to get items out of the data
    var list = new WinJS.Binding.List(items);
    // binding code will depend on whether listview has groupHeaderTemplate or not
    // if not - it should be like this
    listView.winControl.itemDataSource = list.dataSource; // listView is the id of the your list view control in html

}).then(null, function onerror(error)
{
    // handle error case
}); 
```

# android - ADT 工具链不为静态库生成输出

> ID：15860028
> 
> 赞同：1
> 
> 时间：2013-04-07T07:37:52.780
> 
> 标签：android, android-ndk, adt

尝试使用 Android 的 ADT Eclipse 工具链构建静态 NDK 库。但是，每当我使用 BUILD_STATIC_LIBRARY 构建时，都不会产生输出：我收到消息

```
make: Nothing to be done for `all'." 
```

有什么建议吗？

```
LOCAL_PATH          := $(call my-dir)
STL_PATH            := "C:/Android/ndk/sources/cxx-stl/gnu-libstdc++/4.6/include"
PLATFORM_INCLUDE    := "C:/Android/ndk/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi/include"
APP_STL             := gnustl_static

include $(CLEAR_VARS)

LOCAL_MODULE        := libCore
LOCAL_CPPFLAGS      += -std=c++11 -fexceptions -D_OS_ANDROID
LOCAL_LDLIBS        := -lGLESv2 -lEGL -lstdc++

LOCAL_C_INCLUDES    += $(LOCAL_PATH)/Headers
...

LOCAL_SRC_FILES     += Source/Engine/Game.cpp
...

include $(BUILD_STATIC_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:44:55.867

这是来自 Android NDK 的两个库示例项目的 Android.mk 文件的内容。

```
LOCAL_PATH:= $(call my-dir)

# first lib, which will be built statically
#
include $(CLEAR_VARS)

LOCAL_MODULE    := libtwolib-first
LOCAL_SRC_FILES := first.c

include $(BUILD_STATIC_LIBRARY)

# second lib, which will depend on and include the first one
#
include $(CLEAR_VARS)

LOCAL_MODULE    := libtwolib-second
LOCAL_SRC_FILES := second.c

LOCAL_STATIC_LIBRARIES := libtwolib-first

include $(BUILD_SHARED_LIBRARY) 
```

您可以尝试将静态库构建为另一个共享库的一部分，如示例中所示。

*我刚刚在两个库示例项目上做了一个 ndk-build，我可以在obj\local\armeabi*目录中看到 .a 文件和 .so 文件。

**编辑**：默认情况下，ndk-build 只会构建共享库和可执行文件，以及它们所依赖的模块。要强制构建，请在 APP_MODULES 中指定 libCore，如下所示。

```
APP_MODULES := libCore 
```

或在命令行中

```
ndk-build APP_MODULES=libCore 
```

# ruby-on-rails - 从仪表板调用 REST 索引操作

> ID：15860029
> 
> 赞同：0
> 
> 时间：2013-04-07T07:37:53.057
> 
> 标签：ruby-on-rails, rest

大家好，我的 rails 应用程序中有一个模型“项目”，它是一个 REST 资源。

我还有一个带有方法“仪表板”的非 REST 控制器“主页”。

我希望仪表板呈现所有项目。这意味着，我需要对 Project 调用 index 操作。我可以想到两种方法来做到这一点：

1.

> 在我的仪表板模板中有一个指向 Project#Index 的链接，然后由于仪表板和索引共享相同的布局，用户可以看到项目列表。但是，这需要额外的点击。

2.

> 由于仪表板的所有其他视图元素都位于布局文件中，我可以在仪表板操作中手动设置@projects 实例并呈现索引模板。

这看起来也是一种错误的处理方式。

我有两个模型“项目”并说“Cookie”，我想在我的仪表板中列出它们？如何以最简洁的方式实施它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:23:47.033

```
class HomeController < ApplicationController
  def dashboard
    @projects = Project.all
    @cookies = Cookie.all
  end
end 
```

在您的视图/主页/仪表板中，您可以根据需要表示这些集合。

如果您的 views/projects/ 目录中有一个部分，当前在项目索引操作中用于呈现项目集合，那么您可以通过调用以下内容在仪表板中使用该视图：

```
<%= render partial: 'projects/list', locals: { projects: @projects } %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:42:43.567

听起来像在您的 ProjectController 的仪表板方法中，您应该调用类似

```
projects = Project.find_all 
```

然后在您相应的视图中渲染项目。

# ruby-on-rails - 使用引导程序了解 Rails 中的一些嵌入式 erb

> ID：15860032
> 
> 赞同：2
> 
> 时间：2013-04-07T07:38:11.923
> 
> 标签：ruby-on-rails

下面是引导程序中模态的一段代码。我试图完全掌握正在发生的事情，但我`role-options-<%= user.id %>`在 href= 和 div id 标签中都遇到了问题。我只是不明白这里发生了什么。我觉得它正在以某种方式传递数据。我也不确定如何正确搜索这个。因此，如果有人对我有任何见解或他们可以指出的地方，那将解释这一行。

它是直接链接到 div 并传递 user.id 吗？

```
<a data-toggle="modal" href="#role-options-<%= user.id %>" class="btn btn-mini" type="button">Change role</a>
    <%= render user %>

<div id="role-options-<%= user.id %>" class="modal" style="display: none;">
<%= simple_form_for user, :url => user_path(user), :html => {:method => :put, :class => 'form-horizontal' } do |f| %>
<div class="modal-header">
  <a class="close" data-dismiss="modal">&#215;</a>
  <h3>Change Role</h3>
</div>
<div class="modal-body">
  <%= f.input :role_ids, :collection => Role.all, :as => :radio_buttons, :label_method => lambda {|t| t.name.titleize}, :label => false, :item_wrapper_class => 'inline', checked: user.role_ids.first %>
</div>
<div class="modal-footer">
  <%= f.submit "Change Role", :class => "btn" %>
  <a class="btn" data-dismiss="modal" href="#">Close</a>
</div>
<% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:43:46.783

任何你在 ERB 标记中看到`<%= ... %>`标签的地方，标签中的 Ruby 代码都在运行，结果在模板中以文本形式打印出来（从技术上讲，Ruby 代码的结果值具有`#to_s`调用它的方法，将其转换为细绳）。

所以在这个片段中：

```
<div id="role-options-<%= user.id %>" 
```

ERB 模板正在生成一个`<div>`元素，该元素的`id`属性值为“role-options-”，Ruby 代码`user.id.to_s`返回的内容将在哪里。

这段代码也很相似：它创建了一个属性为 form的 link ( `<a>`) 元素。唯一的区别是它以 开头，这意味着链接将是一个页面锚点，即它将链接到同一页面的不同部分，即前面提到的。`href``#role-options-<user ID>``#``<div>`

# asterisk - 为什么在这个星号拨号计划的上下文中不执行“拨号”应用程序？

> ID：15860036
> 
> 赞同：0
> 
> 时间：2013-04-07T07:38:40.953
> 
> 标签：asterisk

我在 Asterisk 配置文件中有这个拨号计划：

```
[voicemenu-custom-1]
exten = s,1,NoOp(VM_Main)
exten = s,n,Answer()
exten = s,n,Goto(ringgroup,s,1)
exten = s,n,Dial(DAHDI/g1/009396464991)
exten = s,n,Hangup() 
```

这是拨号计划中的一个非常简单的上下文，它要求 Asterisk `Answer`，然后执行另一个名为`ringgroup`的上下文（同时振铃所有电话），然后尝试振铃外部号码（`009396464991`）然后挂断。

`ringgroup`上下文的代码是：

```
[ringgroup]
exten = s,1,NoOp(RG1)
exten = s,n,Dial(SIP/1001&SIP/1002&SIP/1003&SIP/1004,30,${DIALOPTIONS})
exten = s,n,Hangup() 
```

但是我得到的是 Asterisk 接听了呼入电话，然后转到`ringgroup`上下文，但是当涉及到 line 的执行时`s,n,Dial(DAHDI/g1/009396464991)`，它遇到了拨号错误并且不会执行`Dial`application。

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:10:12.313

根据您描述的行为，我建议您将“Goto”更改为“GoSub”，并将 [ringgroup] 中的“HangUp”替换为“Return”。这将产生您正在寻找的效果。

“Goto”永远不会从您发送它的上下文中返回。这是一张单程票。只要呼叫保持活动状态（即，未挂断），GoSub 将在用完新上下文后立即自动返回其发送的上下文。

顺便说一句，GoSubs 被认为是比现在使用宏“更好的方法”，所以习惯它们是个好主意。

进一步阅读： [http ://www.voip-info.org/wiki/view/Asterisk+cmd+Gosub](http://www.voip-info.org/wiki/view/Asterisk+cmd+Gosub)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T06:43:45.103

您可以跳回`voicemenu-custom-1`上下文，因为您`HangUp` （正如 arheops 已经指出的那样）在 Groupdial 之后。你可以跳到一个标签，即。的“FwdOutbound” `voicemenu-custom-1`，其中`Goto(context,extension,label)`.

```
[voicemenu-custom-1]
exten = s,1,NoOp(VM_Main)
exten = s,n,Answer()
exten = s,n,Goto(ringgroup,s,1)
; Label
exten = s,n(FwdOutbound),Dial(DAHDI/g1/009396464991)
exten = s,n,Hangup() 
```

`Goto`在 Ringgroup 中，而不是`Hangup`：

```
[ringgroup]
exten = s,1,NoOp(RG1)
exten = s,n,Dial(SIP/1001&SIP/1002&SIP/1003&SIP/1004,30,${DIALOPTIONS})
exten = s,n,Goto(voicemenu-custom-1,s,FwdOutbound)
exten = s,n,Hangup() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T08:41:29.033

采用

```
asterisk -r 
core set verbose 10 
```

看看发生了什么。

在您的计划中，我可以看到您正在执行 Goto(ringgroups,s,1) 但上下文是 ringroup，而不是 ringroups。

# ruby - Ruby net/scp，从变量上传文件

> ID：15860039
> 
> 赞同：1
> 
> 时间：2013-04-07T07:38:48.220
> 
> 标签：ruby, ssh, binary-data, scp

似乎 Ruby 中的 net/scp（我使用的是 1.8.7）只接受路径而不是二进制数据作为“local_file”参数。

就我而言，我将本地文件存储在一个变量中。我是否需要保存->上传->删除本地文件，或者是否可以通过 SSH 将文件“直接”发送到远程服务器而无需在本地临时创建它？

我对 SCP 以外的其他解决方案持开放态度。到目前为止我尝试的是使用普通的 SSH 然后执行

`echo 'binary here' > remote_file_name`

但是我担心 Unix 中的命令长度限制，并且遇到了转义问题等等......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:57:27.780

虽然它将字符串解释为文件名，但它应该将 StringIO 对象识别为要上传的实际数据。

# javascript - 文件上传 - 多个实例

> ID：15860041
> 
> 赞同：0
> 
> 时间：2013-04-07T07:39:40.333
> 
> 标签：javascript, jquery, html

我一直在尝试以动态加载的格式实现一些文件上传器包（原始 php），页面上的数量可能未知。我几乎看过所有流行的，从基于闪存的到介于两者之间的所有东西，但有同样的问题。

我目前正在尝试使用[这个](http://nghiadh.info/blog/html5-drag-and-drop-and-xhr-upload-34.html)。

我已经尝试过我读过的技巧，比如使用`^=`in`getelementbyid`以及`"\\S*"`确保 javascript 使用相关的 div id，但我没有成功。我还尝试为每个 div 添加一个类名并使用 getelementbyclass 没有成功。我已经到处寻找解决方案，但我就是不明白。

要么我做错了，要么我完全迷失了......我实际上都是！

如果有人能让我摆脱痛苦或让我朝着正确的方向前进，我将非常感激，因为我一直在努力寻找解决方案。

HTML 部分如下所示：

```
<p id="upload" class="hidden"><label>Drag & drop not supported, but you can still upload via this input field:<br><input type="file"></label></p>
  <p id="filereader">File API & FileReader API not supported</p>
  <p id="formdata">XHR2's FormData is not supported</p>
  <p id="progress">XHR2's upload progress isn't supported</p>
  <p>Upload progress: <progress id="uploadprogress" min="0" max="100" value="0">0</progress></p>
  <p>Drag an image from your desktop on to the drop zone above to see the browser both render the preview, but also upload automatically to this server.</p> 
```

我打算通过 PHP 动态生成它，其中 $inc 是循环中的 php 变量，例如 id="filereader$inc

我相信这个问题是javascript只会处理上传者的预定义或一个实例，直到以其他方式修改

例如：文件阅读器：document.getElementById('filereader')

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:10:42.303

该Javascript代码不适用于多个实例，因为它使用`getElementById`仅返回一个元素（它找到的第一个匹配项）的方法。

还值得一提的是，JS 代码不适用于许多用户（我相信大约有一半），因为它依赖于 IE9 及以下不支持的 File API。

要使该代码适用于多个实例，必须对其进行重构以便不依赖元素 ID，或者您必须使用服务器端代码生成具有唯一元素 ID 的多个副本。在 PHP 中，这将涉及使用类似这样的`for`or循环：`foreach`

```
<?php

for (i=0; $i<$something; i++) {
  echo <<<EOB
  var holder = document.getElementById('holder$i'),
    tests = {
    filereader: typeof FileReader != 'undefined',   
    dnd: 'draggable' in document.createElement('span'),
    formdata: !!window.FormData,
    progress: "upload" in new XMLHttpRequest
    }, 
    support = {
    filereader: document.getElementById('filereader$i'),
    formdata: document.getElementById('formdata$i'),
    progress: document.getElementById('progress$i')
    },
// snipped for space
EOB;
} 
```

我不推荐任何一种做法，主要是因为它仍然无法与大量用户一起使用。相反，我建议使用不同的上传库。

我对 JS 文件上传库同样不满意，所以我写了一个支持 IE7+（理论上是 IE6，但未经测试）、进度条（带有处理 IE9 及以下版本的回退选项）并允许多个实例的库。

但是，它不支持拖放上传，所以如果这是一个要求，它将不适合您的需求。对于它的价值，这里是（链接到顶部的现场演示）：

[https://github.com/LPology/Simple-Ajax-Uploader](https://github.com/LPology/Simple-Ajax-Uploader)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:34:09.563

好的，如果我理解正确，您想在页面的不同部分使用拖放字段。

所以简短的回答是，您必须将事件添加到每个应该具有此功能的 div 中。**由于上传是自动进行的，您只需要一个文件输入字段**

*只有 dropzones 必须被复制（但只有在你想要的时候，更多的 dropzone）并且它们的偶数必须被调整*

**Ps.：html部分与博客中的相同（加上id为holder的div [和第二个dropzone的holder2]，似乎已被省略）**

例子：

```
// tested on Chrome 26+
....
if (tests.dnd) { 
  holder.ondragover = function () { this.className = 'hover'; return false; };
  holder.ondragend = function () { this.className = ''; return false; };
  holder.ondrop = function (e) {
  this.className = '';
  e.preventDefault();
  readfiles(e.dataTransfer.files);
  }
  //.... other drop spots example need the same events ....
  holder2.ondragover = function () { this.className = 'hover'; return false; };
  holder2.ondragend = function () { this.className = ''; return false; };
  holder2.ondrop = function (e) {
      this.className = '';
      e.preventDefault();
      readfiles(e.dataTransfer.files);
  }
} else {
 ...
}
... 
```

这行得通，但你可以使用 jQuery 左右让它变得更好。

我希望它有帮助

**编辑：** 如果您想将文件发送到不同的服务器端脚本，您必须在 te onDrop 事件中“修改”函数*readfiles*

示例（可能的解决方案，不是很干净）：

```
// tested on Chrome 26+
 ....
 holder.ondrop = function (e) {
  this.className = '';
  e.preventDefault();
  readfiles(e.dataTransfer.files, "script_1.php");
  }
 ...
 function readfiles(files, posturl) {
 ...
   // now post a new XHR request
  if (tests.formdata) {
    var xhr = new XMLHttpRequest();
    xhr.open('POST', posturl);
    ...
  }
  ... 
```

或者您可以发布到同一个文件，但使用一个标志来确定服务器上文件的来源。

Ps：你可能知道，但是，这个 Codesnipplets 和博客中的一个，需要清理以供生产使用。

一切顺利

# javascript - 如何滑动下（）输入框？

> ID：15860047
> 
> 赞同：1
> 
> 时间：2013-04-07T07:40:14.027
> 
> 标签：javascript, jquery, css, animation

我有一个按钮，可以在前一个输入框的正下方添加一个输入框。我想添加一个动画，试图让它更流畅，而不是仅仅弹出那里。到目前为止我已经尝试过了，但它不起作用。一个小提琴的例子会很棒。

```
var counter = 0;
$('#addinput').click(function(){
    $('#inputs').append('<input class="search" style="margin-bottom:4px;" type="search" name="word' + counter++ + '"/>');
    $('.search').slideDown();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:58:09.873

你可以这样做：

**HTML：**

```
<div>
<input type="text" />
<button id="addinput">Add Input</button>
</div>
<br />
<div id="inputs"></div> 
```

**jQuery：**

```
var counter = 0;
$('#addinput').click(function(){
    $('<input style="display:none" class="search" type="search" name="word' + counter++ + '"/><br /><br />').appendTo('#inputs').fadeIn('slow');
}); 
```

请注意，`slideDown`在您的情况下效果将不起作用，因为浏览器显示的内容会在添加 div 后立即更新。因此，基本上，您需要先隐藏该 div（您可以使用`display: none`或`hide()`），然后再实际附加它。

[**演示**](http://jsfiddle.net/Jcz2e/)

# c++ - 全局和“单一”的“事物”的全局变量？

> ID：15860050
> 
> 赞同：2
> 
> 时间：2013-04-07T07:40:44.010
> 
> 标签：c++, design-patterns, embedded, microcontroller

在处理微控制器时，有些东西本质上是全球性的——我正在考虑诸如串行端口或其他接口之类的外围设备。还有一些外设不仅是全局的，而且只有一个（而且永远不会更多）——比如控制核心时钟或中断控制器的外设。这些外设确实具有某种全局状态（例如 - 核心时钟设置为某个值）并且反向计算这些值效率低下。

需要设置 RTOS 使用的系统定时器，需要设置其他外设的时钟（UART 波特率，SPI 比特率，...），需要为外部存储器设置正确的时钟或配置存储器等待状态。这就是为什么我认为在 main() 中创建一个对象并将其传递到任何地方会有点麻烦......

我可以编写方法，以便所有“全局”信息都来自外围寄存器（例如，可以从当前 PLL 设置反向计算核心频率），但这似乎也是一个错误的想法，更不用说创建对象了对于时钟发生器外设，到处都会看起来很有趣......

当前时钟设置可以存储在该类的静态成员中，但是从这里开始，只有一小步迈向完全静态的类（因为“this”指针对于没有状态的类将毫无用处）......

通常在非面向对象程序中找到的解决方案最接近于完全静态的类——只有对全局变量进行操作的函数。

任何人都知道如何很好地处理这种情况，或者这个问题是否值得花时间？也许我应该只使用一个全局对象并完成它？(;

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T08:32:36.337

> 如果我希望我的程序很好地面向对象，我很难决定如何处理这些对象......全局变量不好，这很明显，但我只是不知道（还不够经验）我是否应该尝试“隐藏”这些事情是全球性的事实......

当我读到这篇文章时，我想知道您是否知道为什么要使用 OOP 以及为什么不使用全局变量。

首先，OOP 是一个工具，而不是一个目标。在您的情况下，中断控制器不需要派生和虚拟功能之类的东西。您所需要的只是一个对其进行编程的接口，封装在一个类中。你甚至可以使用一组简单的函数来做到这一点（C=风格模块化编程），而不会放弃可维护性。在您的情况下，使单个实例全局化更加清晰。想象一下替代方案，程序的不同部分可以实例化一个用于访问下面相同的 UART 的类。如果您使用全局变量，代码（或者更确切地说是作者）会意识到这一点，并会考虑如何协调访问。

现在，关于全局变量，这里有一个为什么不使用它们的例子：

```
int a, b, c;

void f1()
{
    c = a;
    f3();
}

void f2()
{
    c = b;
    f3();
}

void f3()
{
    // use c
}

int main()
{
    a = 4;
    f1();
    b = 5;
    f2();
} 
```

这里的要点是，参数存储在全局变量中，而不是作为实际参数传递，因此很难看到它们的使用地点和时间。此外，上述使用完全排除了任何递归调用。关于您的环境，有些东西本质上是全局的，因为它们是环境的独特部分，例如中断控制器（类似于 cin/cout/cerr/clog）。不要担心那些。在您需要考虑限制访问之前，必须在整个地方使用它们中的许多。

有两个准则可以使这更容易：

*   一个对象的范围越大，它就越需要一个会说话的名字（对比上面的 a、b、c）。在您的情况下，我会将所有特定于硬件的对象存储在一个公共命名空间中，因此很明显某些代码正在访问全局变量。这也允许单独测试和重用这个命名空间。许多硬件供应商甚至以库的形式提供类似的东西，以帮助应用程序开发。
*   在封装/建模硬件的代码中，执行请求，但不要做出特定于其之上的应用程序的决策。与标准库本身提供但从未使用过的标准流进行比较，除了可能用于在断言失败后中止之前转储致命错误信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T07:58:27.570

毫无疑问，单例模式是争论的焦点。有些人只是说它“不好”，但我不同意；它只是被广泛滥用和误解。它在某些情况下绝对有用。事实上，它完全适用于你所描述的情况。

如果您有一个需要全局可用的类，并且本质上不能有多个实例，那么单例是*最好*的选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T07:55:54.243

您已经大致概述了您的选择：

*   全局变量
*   类/单例的静态数据成员

最终取决于您在两者之间做出决定，并从美学或其他角度选择您更喜欢的。

归根结底，正如您所说，您仍将拥有一个时钟发生器、一个 UART 等。

要记住的一件事是，仅仅为了抽象目的而进行过多的抽象不会给你带来太多好处。然而，它可能做的是让不熟悉您的代码的人更难弄清楚事情是如何在类层后面真正工作的。因此，如果有的话，请考虑您的团队。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T09:46:53.303

单例、全局对象、静态类，它们都是一样的。用你想要的任何调味品来打扮邪恶的全局状态，它仍然是全局状态。问题在于沙拉，而不是调料，可以这么说。

一个很少探索的路径是一元代码，Haskell 风格（在 C++ 中是）。我自己从未尝试过，但从外观上看，这个选项应该很有趣。请参阅[此处](http://yapb-soc.blogspot.com/2012/10/monads-in-c.html)以获取 C++ 中 Monad 接口的示例实现。

# asp.net - 如何显示水晶报表？

> ID：15860057
> 
> 赞同：0
> 
> 时间：2013-04-07T07:41:57.093
> 
> 标签：asp.net, database, crystal-reports, connection-string

显示水晶报告时出现此错误。我需要做什么。

**建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）**

我使用的代码如下：

```
protected void Page_Load(object sender, EventArgs e)
{        
    SqlConnection con = new SqlConnection("Data Source=./SQLEXPRESS;AttachDbFilename=~/App_Data/Database.mdf;Integrated Security=True;User Instance=True");        
    DataSet1 ds = new DataSet1();
    SqlDataAdapter da = new SqlDataAdapter("SELECT        ID, Name, Dept, Salary FROM            dbo.Table2", con);
    da.Fill(ds.View2);
    ReportClass myReportObject = new ReportClass();
    myReportObject.ResourceName = "CrystalReport1.rpt";        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:51:15.860

我认为您尝试显示的 Crystal 报表是在另一个连接字符串下创建的，该连接字符串具有另一个服务器名称。将服务器名称和数据库名称分别传递给报告。该代码将有所帮助。

```
 ReportDocument cryRpt = new ReportDocument();
        TableLogOnInfos crtableLogoninfos = new TableLogOnInfos();
        TableLogOnInfo crtableLogoninfo = new TableLogOnInfo();
        ConnectionInfo crConnectionInfo = new ConnectionInfo();
        Tables CrTables ;

        cryRpt.Load("PUT CRYSTAL REPORT PATH HERE\CrystalReport1.rpt");

        crConnectionInfo.ServerName = "YOUR SERVER NAME";
        crConnectionInfo.DatabaseName = "YOUR DATABASE NAME";

       // if sql server authentication mood

        crConnectionInfo.UserID = "YOUR DATABASE USERNAME";
        crConnectionInfo.Password = "YOUR DATABASE PASSWORD";

        CrTables = cryRpt.Database.Tables ;
        foreach (CrystalDecisions.CrystalReports.Engine.Table CrTable in CrTables)
        {
            crtableLogoninfo = CrTable.LogOnInfo;
            crtableLogoninfo.ConnectionInfo = crConnectionInfo;
            CrTable.ApplyLogOnInfo(crtableLogoninfo);
        }

        crystalReportViewer1.ReportSource = cryRpt;
        crystalReportViewer1.Refresh(); 
```

# knockout.js - 将 2 个视图模型绑定到 2 个不同的 div 对 knockoutjs 中的一个 div 不起作用

> ID：15860058
> 
> 赞同：1
> 
> 时间：2013-04-07T07:42:15.160
> 
> 标签：knockout.js, knockout-2.0

当我评价 PersonViewModel 及其“数据”div 时，LinkViewModel 数据绑定有效。但是当两个 ViewModel 都被积极使用时，绑定到 LinkViewModel 的超链接不会显示为链接，这是为什么呢？

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>KnockoutJS samples</title>

    <script src="~/Scripts/knockout-2.2.1.debug.js"></script>
    <script src="~/Scripts/jquery-1.9.1.js"></script>
    <script src="~/Scripts/knockout.mapping-latest.js"></script>
    <script src="~/Scripts/knockout.validation.js"></script>
    <script type="text/javascript">

        $(function () {
            var PersonViewModel = function ()
            {
                var self = this;
                this.firstName = ko.observable('Lisa');
                this.lastName = ko.observable('T');
                this.isCustomer = ko.observable(true);
                this.employeeTypeA = ko.observable(true);
                this.employeeTypeB = ko.observable(false);
                this.employeeType = ko.computed(function ()
                {
                    if (self.employeeTypeA())
                        return 'TypeA';
                    else if (self.employeeTypeB())
                        return 'TypeB';
                    else
                        return '';
                }, this);
            };

            var LinkViewModel = function ()
            {
                this.title = ko.observable('Hello World');
                this.href = ko.observable('http://www.xxx.com');
            };

            var personViewModel = new PersonViewModel();
            ko.applyBindings(personViewModel, $('data')[0]);

            var linkViewModel = new LinkViewModel();
            ko.applyBindings(linkViewModel, $('data1')[0]);

        });
    </script>
</head>
<body>
    <div id="data">
        <span data-bind="text: firstName"></span>
        <span data-bind="text: lastName"></span>
        <input type="checkbox" data-bind="checked: isCustomer" title="Is a customer" />
        <input name="x" type="radio" value="TypeA" data-bind="checked: employeeType" title="Employee type A" />
        <input name="x" type="radio" value="TypeB" data-bind="checked: employeeType" title="Employee type B" />
    </div>
    <div id="data1">
        <a data-bind="attr: { href: href, title: title }">this is a link</a>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:49:55.073

您的 jquery 选择器是错误的。当您要[搜索 id](http://api.jquery.com/id-selector/)时，您需要使用`#`：

```
var personViewModel = new PersonViewModel();
ko.applyBindings(personViewModel, $('#data')[0]); 
```

和

```
var linkViewModel = new LinkViewModel();
ko.applyBindings(linkViewModel, $('#data1')[0]); 
```

# sql - 我应该使用多列索引还是两个 1 列？

> ID：15860059
> 
> 赞同：0
> 
> 时间：2013-04-07T07:42:34.550
> 
> 标签：sql, sqlite

我有一个表，我目前定义如下：

```
CREATE TABLE pairs (  
id INTEGER PRIMARY KEY,
p1 INTEGER,
p2 INTEGER,
r  INTEGER,
UNIQUE(p1, p2) ON CONFLICT IGNORE,
FOREIGN KEY (p1) REFERENCES points(id),
FOREIGN KEY (p2) REFERENCES points(id)
) 
```

之后，它充满了千兆字节的数据。现在我需要像这样做很多选择：

```
SELECT id, r FROM pairs WHERE p1 = 666 OR p2 = 666 
```

所以问题是：我应该创建哪些索引来加速这个选择？

```
CREATE INDEX p1_index ON pairs(p1)
CREATE INDEX p2_index ON pairs(p2) 
```

或者可能

```
CREATE UNIQUE INDEX p_index ON pairs(p1, p2) 
```

或者可能两者兼而有之？（并为他们购买新的硬盘）。SQLite3 不会为`UNIQUE`多列的约束自动创建索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T07:48:16.410

由于您使用的是 OR 条件，因此我将使用多个索引。如果它是 AND 条件，那么多列索引会更好。

对于 OR 条件：优化器将开始查看其中一个索引，找到匹配项并抓取该行。仅当与第一个索引不匹配时，才会查看另一个索引。**在多处理器系统上，两个索引也将（应该）并行扫描。**太棒了，对吧？

对于 AND 条件：如果有 2 个索引可用，优化器将必须查看它们，合并两个索引扫描的输出，然后从基表中获取结果。这可能会变得很昂贵。在这里，多列索引会很棒。

但是话又说回来，优化器可能会根据可用的表和索引统计信息选择不同的路径。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:57:53.327

使用[EXPLAIN QUERY PLAN](http://www.sqlite.org/eqp.html)检查是否使用了索引。

对于您的示例查询，将使用两个单列索引：

```
> EXPLAIN QUERY PLAN SELECT id, r FROM pairs WHERE p1 = 666 OR p2 = 666;
0|0|0|SEARCH TABLE pairs USING INDEX p1_index (p1=?) (~10 rows)
0|0|0|SEARCH TABLE pairs USING INDEX p2_index (p2=?) (~10 rows) 
```

如果单个记录的查找需要两列，则将使用多列索引（由于 UNIQUE 约束您已经拥有）：

```
> EXPLAIN QUERY PLAN SELECT id, r FROM pairs WHERE p1 = 666 AND p2 = 666;
0|0|0|SEARCH TABLE pairs USING INDEX sqlite_autoindex_pairs_1 (p1=? AND p2=?) (~1 rows) 
```

但是，多列索引也可用于在其第一列上进行查找：

```
> DROP INDEX p1_index;
> EXPLAIN QUERY PLAN SELECT id, r FROM pairs WHERE p1 = 666 OR p2 = 666;
0|0|0|SEARCH TABLE pairs USING INDEX sqlite_autoindex_pairs_1 (p1=?) (~10 rows)
0|0|0|SEARCH TABLE pairs USING INDEX p2_index (p2=?) (~10 rows) 
```

另请参阅文档：
[查询优化器概述](http://www.sqlite.org/optoverview.html)、
[查询计划](http://www.sqlite.org/queryplanner.html)。

# c# - EF 脚手架基类成员

> ID：15860061
> 
> 赞同：0
> 
> 时间：2013-04-07T07:42:50.847
> 
> 标签：c#, inheritance, entity-framework-4, scaffolding

我有一个代表对象A的类：

```
public class A
{
  [Key]
  private int _ID;
  private string _property;
  public ID {get {return _ID;} set {_ID = value;}}
  public ID {get {return _property;} set {_property = value;}}
} 
```

我使用 EF（添加迁移，更新数据库）将此类作为表 A 搭建到数据库中

我还有另外三个具有类似属性的对象 B、C、D，所以我为它们创建了一个基类。所有这些对象都必须包含 A 类型的对象列表，因此我创建了对 A 的引用：

```
public class Base_B_C_D
{
  [Key]
  protected int _ID;
  protected string _prop;
  protected List<A> A_List;
  public ID {get {return _ID;} set {_ID = value;}}
  public ID {get {return _prop;} set {_prop = value;}}
} 
```

并从中继承 B,C,D ：

```
public class B:Base_B_C_D {}
public class C:Base_B_C_D {}
public class D:Base_B_C_D {} 
```

当我使用 EF 将 B、C、D 脚手架到 DB 中时，我在任何表中都看不到任何 FK，并且 A 和 B、C、D 之间没有链接......

问题是：如何搭建此类链接的正确方法是什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:11:58.853

只有少数模型，您应该使用[table-per-type 继承](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx)。您还应该为您的 POCO 使用[自动实现的属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)。当属性访问器中不需要额外的逻辑时，应该使用它们。

如果`B`,`C`和`D`包含与它们相似的属性，`A`则应该从它继承。如果且必须包含 的对象列表`B`，则此关系表示为一对多关系。这在 EF 中使用 an 表示，它将充当 FK。`C``D``A``ICollection`

根据您的模型，您可以像这样实现 TPT 继承：

```
public class A
{
    [Key]
    public int ID { get; set; }
    public string Property { get; set; }
}

[Table("B")]
public class B : A
{
    // more properties...

    // 1:Many with A
    public ICollection<A> CollectionA { get; set; }
}

[Table("C")]
public class C : A
{
    // more properties...

    // 1:Many with A
    public ICollection<A> CollectionA { get; set; }
}

[Table("D")]
public class D : A
{
    // more properties...

    // 1:Many with A
    public ICollection<A> CollectionA { get; set; }
} 
```

在您的上下文类中，您只需创建一个类型为基类的 DbSet：

```
public class MyDbContext: DbContext
{
    public DbSet<A> Person { get; set; }
} 
```

在应用程序的某个地方创建派生类的实例：

```
using(var db = new MyDbContext())
{
    var b = db.A.Create<B>();
    // ... same for C and D
    db.A.Add(b);
    db.SaveChanges();
} 
```

# string - Delphi 7 函数 - 字符串还是短字符串？整数还是字？

> ID：15860063
> 
> 赞同：0
> 
> 时间：2013-04-07T07:43:06.163
> 
> 标签：string, performance, delphi, variables, integer

我是一个“性能”爱好者程序员，并且有一个基本的理论问题：Delphi 7 是否有一些“方法”来识别使用的字符串类型并自动定义正确的类型？

例如，当您知道函数的结果字符串长度总是小于 255 时，您会使用：

`function SomeFunction: String;`还是`function SomeFunction: ShortString;`？

同样的想法：

`function SomeFunction(Num: Integer): Integer;`还是`function SomeFunciont(Num: Byte): Word;`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T08:07:31.710

永远不要使用`shortstring`with 函数，即使在 Delphi 7 中也是如此。

当用作函数结果时，`shortstring`始终复制完整内容（即所有字符）。

所以它会比使用普通`string`变量慢，后者只会增加字符串的内部引用计数，而不复制字符。

由于大多数 Delphi RTL/VCL 库使用`string`.`shortstring`在您的代码中使用将为这些方法的每次调用添加大量转换，而使用普通`string`. 并且在调用Windows API时，delphi`string`类型已经是零端的，所以会避免任何分配和转换，这在使用`shortstring`.

因此，您必须知道，`shortstring`在所有版本的 Delphi 中它都比较慢，特别是如果您使用[FastMM4](http://sourceforge.net/projects/fastmm/)作为内存管理器：当使用`shortstring`任何 RTL/VCL/API 调用时，Delphi 编译器实际上会分配一些隐藏的临时`string`，因此分配一个堆中的缓冲区...远非高效：最好立即使用字符串！

如果您认为这`string`很慢（由于对多线程不友好的原子引用计数或内存分配），请不要使用`shortstring`其他结构 - 请参阅我的答案[https://stackoverflow.com/a/6076407/458259](https://stackoverflow.com/a/6076407/458259)和永远不要在不使用[http://delphitools.info/samplingprofiler/ 之](http://delphitools.info/samplingprofiler/)类的工具进行分析的情况下进行优化

对于使用`integer`值的函数，`byte/word/cardinal/integer`不会产生速度差异。我的习惯是尽可能使用`integer`，这将适合 CPU 寄存器大小。只有`Int64`一种值会更慢，在 32 位以下，因为它将使用 2 个寄存器或堆栈上的临时变量。

*更新*：使用较新版本的 Delphi，您将拥有 " `inline`" 关键字，这可能有助于提高返回此类类型的小函数的性能。自 Delphi 2009 以来，字符串是 Unicode 并且`shortstring`已被弃用，因为它已固定到系统非 Unicode 应用程序代码页。`shortstring`仅当您确切知道自己在做什么，并且能够使用 Alt-F2 并查看生成的 asm 代码、猜测调用了哪些隐藏的 RTL 函数时才使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:22:03.530

> Delphi 7 是否有某种方法来识别所使用的字符串类型并自动定义正确的类型？

即使它提高了性能，编译器也永远不会进行这样的转换。为此，它需要执行所谓的*数据流分析*。换句话说，它需要分析数据如何在程序中流动，并对变量中可能包含的内容进行推理。

但是编译器不执行这种分析，因此无法对您描述的类型进行优化。

# jquery - jQuery HTML Button 多次触发函数

> ID：15860066
> 
> 赞同：1
> 
> 时间：2013-04-07T07:43:30.610
> 
> 标签：jquery, html

我正在创建一个显示一列复选框的 HTML 表单，单击提交，该事件将被 jQuery 函数拾取。但是，在检查 Firebug 网络面板中的函数后，我注意到即使我只单击一次按钮，该函数也会触发多次！知道为什么吗？

HTML：

```
echo "<form id='massHoursSubtraction'>";
echo "How many hours to subtract? <input type='text' name='hours'><br />";
$entries = 1;
while($row = mysql_fetch_array($members)) {
    $studentID = $row['studentid'];
    echo "<input type='checkbox' name='studentID[]' id='' value='$studentID'>$studentID";
    echo "<br />";
    $entries++;
}
echo "<input type='button' id='submitValues' value='Submit' onclick='javascript:getHours($entries);' />";
echo "</form>"; 
```

Javascript：

```
function getHours(numberOfEntries) {
$(document).ready(function() {
    $("#submitValues").click(function(){
        var str = $("#massHoursSubtraction").serialize();
        alert("How many times?");           
        $.post("output.php", str);                                  
    });
});
} 
```

这是 Firebug 网络面板的屏幕截图：http: [//imgur.com/Z83s5fr](http://imgur.com/Z83s5fr) 这是`$_POST`字符串：`hours=1&studentID%5B%5D=5112244`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T07:47:22.300

您在按钮和 jQuery 中都有一个`onclick`属性，然后您*注册*了点击事件。因此，每次单击按钮时，都会为单击事件添加至少一个侦听器。第一次单击，添加一次，第二次，再添加 2 次，总共 4 次，但处理程序实际上会触发（它不是第一次，因为它正在注册）。

从按钮中删除`onclick`属性并完全删除功能，因此您只有：

```
$(document).ready(function() {
    $("#submitValues").click(function(){
        var str = $("#massHoursSubtraction").serialize();
        alert("How many times?");           
        $.post("output.php", str);                                  
    });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T07:47:22.743

那是因为每次您单击元素`submitValues`时，它都会在其中附加一个单击处理程序。这就是您的额外事件的来源。你应该这样做：

```
echo "<input type='button' id='submitValues' value='Submit' />" 
```

然后在此处发出 document.ready 时附加您的事件处理程序：

```
$(document).ready(function() {
 $("#submitValues").click(function(){
    var str = $("#massHoursSubtraction").serialize();
    alert("How many times?");           
    $.post("output.php", str);                                  
 });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-27T06:56:13.360

将以下行放入您正在调用的函数中

```
$("#IdofButton").removeAttr('onclick'); 
```

这将删除按钮的单击功能，因此它不能多次触发该功能。

# r - read.csv，第一行的标题，跳过第二行

> ID：15860071
> 
> 赞同：31
> 
> 时间：2013-04-07T07:44:49.663
> 
> 标签：r, header, skip, read.csv

我有一个包含两个标题行的 CSV 文件，第一行我想成为标题，但第二行我想丢弃。如果我执行以下命令：

```
data <- read.csv("HK Stocks bbg.csv", header = T, stringsAsFactors = FALSE) 
```

第一行成为标题，文件的第二行成为我的数据框的第一行：

```
 Xaaaaaaaaa       X X.1     Xbbbbbbbbbb     X.2 X.3
1         Date PX_LAST  NA         Date PX_LAST  NA
2   31/12/2002  38.855  NA   31/12/2002  19.547  NA
3   02/01/2003  38.664  NA   02/01/2003  19.547  NA
4   03/01/2003  40.386  NA   03/01/2003  19.547  NA
5   06/01/2003  40.386  NA   06/01/2003  19.609  NA
6   07/01/2003  40.195  NA   07/01/2003  19.609  NA 
```

我想跳过 CSV 文件的第二行，然后得到

```
 X1.HK.Equity       X X.1 X2.HK.Equity     X.2 X.3
2   31/12/2002  38.855  NA   31/12/2002  19.547  NA
3   02/01/2003  38.664  NA   02/01/2003  19.547  NA
4   03/01/2003  40.386  NA   03/01/2003  19.547  NA
5   06/01/2003  40.386  NA   06/01/2003  19.609  NA
6   07/01/2003  40.195  NA   07/01/2003  19.609  NA 
```

我试过`data <- read.csv("HK Stocks bbg.csv", header = T, stringsAsFactors = FALSE, skip = 1)`了，但返回：

```
 Date PX_LAST  X     Date.1 PX_LAST.1 X.1
1 31/12/2002  38.855 NA 31/12/2002    19.547  NA
2 02/01/2003  38.664 NA 02/01/2003    19.547  NA
3 03/01/2003  40.386 NA 03/01/2003    19.547  NA
4 06/01/2003  40.386 NA 06/01/2003    19.609  NA
5 07/01/2003  40.195 NA 07/01/2003    19.609  NA
6 08/01/2003  40.386 NA 08/01/2003    19.547  NA 
```

标题行来自我的 CSV 文件的第二行，而不是第一行。

谢谢你。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-07T08:12:24.857

这应该可以解决问题：

```
all_content = readLines("file.csv")
skip_second = all_content[-2]
dat = read.csv(textConnection(skip_second), header = TRUE, stringsAsFactors = FALSE) 
```

第一步 using`readLines`将整个文件读入一个列表，其中列表中的每个项目代表文件中的一行。接下来，您使用 R 中的负索引意味着 的事实丢弃第二行`select all but this index`。最后，我们将这些数据提供给以将`read.csv`其处理成`data.frame`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-09-29T09:16:37.213

您可以直接从数据帧中剥离标题后的第一行，以允许您在一行中执行此操作：

```
df<-read.csv("test.txt",header=T)[-1,] 
```

如果我的数据文件“test.txt”如下：

```
var1, var2
units1, units2
2.3,6.8
4.5,6.7 
```

这给了我

```
> read.csv("test.txt",header=T)[-1,]
var1 var2
2  2.3  6.8
3  4.5  6.7 
```

这完全回答了您的问题，但只是为了概括答案，您也可以通过这种方式跳过第**N**到第**M**行：

```
df<-read.csv("test.txt",header=T)[-N:-M,] 
```

其中 N 和 M 当然是整数。

* * *

**注意：**此方法会将所有列转换为因子。

```
str(read.csv("test.csv", header = TRUE)[-1,])
# 'data.frame': 2 obs. of  2 variables:
#   $ var1: Factor w/ 3 levels "2.3","4.5","units1": 1 2
#   $ var2: Factor w/ 3 levels " units2","6.7",..: 3 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-10T04:56:36.143

在 Linux（或 Mac）上，您可以利用能够在 中使用 linux 命令的优势`data.table::fread`，因此

```
data.table::fread("sed -e '2d' myfile.txt", data.table = F) 
```

将跳过第二行。

# python - PyCharm：如何运行behavior.exe？

> ID：15860074
> 
> 赞同：6
> 
> 时间：2013-04-07T07:45:07.597
> 
> 标签：python, behavior, pycharm

我想在我的程序中使用行为库。[我在行为教程](http://pythonhosted.org/behave/tutorial.html#features)中编写代码。但是，当我“运行”我的教程项目时，我在 PyCharm 控制台中看到：

```
C:\Python27\virtualenv\Scripts\python.exe "C:/Program Files (x86)/JetBrains/PyCharmProjects/tutorial/steps/tutorial.py"
Process finished with exit code 0 
```

我认为我必须使用 behavior.exe 来运行我的项目：

```
C:\Python27\virtualenv\Scripts\behave.exe 
```

如何得到它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-03T13:00:45.247

您可以根据您的目的配置您的运行，请在此处查看屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/EWT5W.png)

![在此处输入图像描述](https://i.stack.imgur.com/dxkof.png)

![在此处输入图像描述](https://i.stack.imgur.com/WeL02.png)

取自：[http ://automated-testing.info/t/bdd-framework-debug-testov-stepov/3392/3](http://automated-testing.info/t/bdd-framework-debug-testov-stepov/3392/3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-29T07:54:48.900

尽管现在`behave`支持[专业版](http://blog.jetbrains.com/pycharm/2014/09/feature-spotlight-behavior-driven-development-in-pycharm/)，但[目前不在社区版](https://www.jetbrains.com/pycharm/features/editions_comparison_matrix.html)中。

您仍然可以`behave`为给定的功能目录调用模块。

添加一个 Python 运行配置，没有脚本和这些选项：

> `Interpreter options: -m behave`
> `Working directory: path/to/feature/directory`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-24T00:47:14.160

**我修改了以前的答案，并让PyC** ​​harm CE 5.x 与 Behave 一起工作我在系统范围内安装了 python 2.7，并**通过***PyCharm*包管理安装了以下*是*
我的运行配置：*PyCharm 将配置识别为有效且不显示红色叉号]***工作目录**指向*.feature*文件所在的目录**解释器选项：** -m 行为

 ******** * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-03T13:48:01.320

对于 Mac 上的 PyCharm **Community** 2016.3，设置运行配置：

*   **脚本**：`/usr/local/bin/behave`
*   **脚本参数**：`path/to/feature/directory`
*   **工作目录**：`path/to/project/directory`

这样运行和调试都可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-07T07:15:17.757

我在功能目录中有 2 个功能文件（createX.feature 和 createY.feature），但我只想选择 1

我的配置是

*   脚本：createY.feature
*   脚本参数：--tags=@int --tags=@e2e
*   解释器选项：-m 行为
*   工作目录：$features_directory

“运行”窗口显示此执行命令

```
/Library/Frameworks/Python.framework/Versions/3.5/bin/python3.5 -m behave createY.feature --tags=@int --tags=@e2e 
```

但是 pycharm 选择**了另一个**功能文件:(

但是，如果我在终端窗口中运行该命令，则该命令有效！！

编辑：为了更好地理解，我更改了要执行的功能文件：我尝试按照字母顺序执行最后一个

编辑 2：已**解决**似乎*表现*不喜欢在步骤目录中有用于控制任务的“临时”文件......一旦我删除它们，那个漂亮的配置就起作用了！*******

# javascript - 什么是构造 (function () { ... } ) ()

> ID：15860083
> 
> 赞同：2
> 
> 时间：2013-04-07T07:47:20.057
> 
> 标签：javascript

JavaScript 中的这种构造是什么意思：

```
 (function (){
      alert("bla");
   })(); 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T07:55:03.077

The acronym for this pattern is an "IIFE" or an Immediately Invoked Function Expression.

It basically creates an anonymous function `function(){}`

```
function(){alert("bla");} 
```

then wraps it as an expression `()`

```
(function(){alert("bla");}) 
```

then executes it `()`

```
(function(){alert("bla");})() 
```

* * *

Note that at this point, you can pass arguments in as well like this:

```
(function(text){alert(text);})("bla") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T07:49:37.257

这是一个匿名块 - 声明一个匿名函数然后立即执行它，这意味着在块中声明的任何变量都看不到它之外。在这种情况下，使用 alert() 没有区别。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T07:49:47.837

您定义了一个匿名函数，您可以立即调用它。

另请参阅[javascript中自执行函数的目的是什么？](https://stackoverflow.com/questions/592396/what-is-the-purpose-of-a-self-executing-function-in-javascript?lq=1)用于解释构造的目的，简而言之，将名称保持为匿名函数中包装的代码的私有。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-07T07:49:48.790

这是一个匿名函数，加载后会自动执行一次

[JS函数定义：最后一个括号的含义](https://stackoverflow.com/questions/14103575/js-function-definition-meaning-of-the-last-parentheses)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-07T07:51:47.950

Here you define an anonymous function to be executed immediately.

The function declaration is expressed as a function expression, which may be anonymous and returns the value of the newly created function. It returns the value of the newly created function, so by adding parenthesis after it, you may immediately invoke it.

# php - 只允许创建条目的用户修改它

> ID：15860089
> 
> 赞同：1
> 
> 时间：2013-04-07T07:47:47.990
> 
> 标签：php, mysql

我一直在谷歌搜索一段时间没有成功，主要是因为我问的方式很可能是错误的方式。

**我想知道的**

我制作了一些 PHP 脚本，允许用户将数据添加到表中（在 MYSQL 数据库中）并将其显示在网站上，现在我正在研究编辑和删除条目的能力，但是我允许任何人做的脚本这是任何人的条目。

现在我不知道是否有 PHP 或 Mysql 函数可以帮助解决这个问题，就像我说我的护目镜是徒劳的。因此，如果我可以指向具有此信息的网页，或者更好的示例语法块，它将只允许创建条目的用户修改条目。

我假设有某种类型的 while 或 if 语句来实现这一点。

**示例场景**

一个用户来添加一个条目，该条目被赋予一个 id 用户可以链接到该 id 以便只有他可以编辑它吗？

**笔记**

我正在将 PHP 添加到 word press 站点，以便用户登录信息 word press 小部件正在控制，但是当我漫步扔数据库时，我可以看到条目仍然放在数据库字段中。

**我在问什么**

您是否知道网页/示例语法或教程将向我展示我需要知道的内容，或者您​​是否有足够的时间向我解释:)。

谢谢

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:07:01.140

使用当前用户的 id 更新新条目，其中 $entry_id 是新条目的 ID

```
$current_user_id = get_current_user_id(); // current user logged into WordPress

mysql_query("UPDATE `table` SET `user_id`='$current_user_id' WHERE `id`='$entry_id'") or die(mysql_error()); 
```

**更新：**您还可以将带有 user_id 的条目与其余数据同时插入。

```
mysql_query("INSERT INTO `table` ([other column names], `user_id`) VALUES ([other values], '$current_user_id')") or die(mysql_error()); 
```

检查当前用户 ID 是否等同于数据库中允许的编辑用户 ID。

```
$query = mysql_query("SELECT * FROM `table` WHERE `id`='$entry_id' LIMIT 1") or die(mysql_error());
$data = mysql_fetch_array($query);

$allowed_user_edit_id = $data['user_id']; // user id who is allowed to edit

$current_user_id = get_current_user_id(); // current user logged into WordPress

if ($current_user_id == $allowed_user_edit_id) {
    // Your code for editing the entry
} 
```

# php - 匹配文本文件中的数字？

> ID：15860094
> 
> 赞同：0
> 
> 时间：2013-04-07T07:49:20.900
> 
> 标签：php, preg-match

我想匹配文本文件中的数字并将其替换为添加到匹配数字中的新数字

似乎无法让它工作

```
<!---- update textfile on the server after a new order has taken place--->
<?php 

$filename = "order.txt";
$handle = fopen($filename, "r");

$Data = fread($handle, 512); 
echo $Data;
$pattern = "?P<digit>\d+";
preg_match($pattern,$Data,$matches);
print_r($matches);

fclose($handle);

$Handle = fopen($File, 'w');
fwrite($Handle, "The total Number of Apples: ".$Apples.PHP_EOL); 
fwrite($Handle, "The total Number of Bananas: ".$Bananas.PHP_EOL);
fwrite($Handle, "The total Number of Oranges: ".$Oranges.PHP_EOL);

fclose($Handle); 

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:17:42.883

正如 anubhava 在评论中所说，您必须用定界符包围您的正则表达式，`/`并添加括号以捕获名称组：

```
$pattern = "/(?P<digit>\d+)/";
preg_match($pattern, $Data, $matches); 
```

# javascript - 包含javascript的最有效方法？

> ID：15860095
> 
> 赞同：3
> 
> 时间：2013-04-07T07:49:21.897
> 
> 标签：javascript, html, pageload

嘿，我的概念问题多于技术问题。页面加载时间是否更好地为每个网页顶部包含的所有页面提供一个带有 javascript 的文档准备功能，或者在每个页面上使用仅该页面所需的脚本具有单独的功能？第二个更有意义，但是嘿，idk。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T07:51:37.310

不要为每个页面一次加载所有脚本。这将导致不必要的加载时间，因此用户会认为您的页面加载缓慢。

仅在每个页面的基础上加载每个页面所需的脚本。每当遇到脚本时，它都会被缓存，因此如果找到它们，它们都会慢慢地被处理，而不是一次只加载一个批处理。

# c# - 动态分配标签值并在值更改时显示消息

> ID：15860098
> 
> 赞同：1
> 
> 时间：2013-04-07T07:49:44.777
> 
> 标签：c#

我有一些 C# 代码，它从数据库中的表中获取第二高的数字：值或结果集显示在文本框中。每次将新记录插入数据库时​​，此数字都会更改。

我在表单上创建了另一个标签，并且希望在每次更改文本框中的值或文本时显示一条消息，这是动态的。

简而言之，每次插入记录时，此代码都会运行并在文本框中插入数字，我想在每次文本框值更改时在另一个标签上显示一条消息。

```
private void DataSets_Load(object sender, EventArgs e){

    //Connection Strings
    string ConnString = @" Server=example;Database=example;Integrated Security=true";

    string sql = @"SELECT MAX(ClientID) FROM Clients WHERE ClientID <> (SELECT MAX(ClientID) FROM Clients)";

    SqlConnection conn = new SqlConnection(ConnString);

    conn.Open();

    //CREATE DATA ADAPTER
    SqlDataAdapter da = new SqlDataAdapter(sql, conn);

    DataSet ds = new DataSet();

    //FILL DATASET
    da.Fill(ds, "ClientID");

    txtDisplayData.Text = ds.Tables[0].Rows[0].ItemArray[0].ToString();

    conn.Close();
    ds.Dispose();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T07:55:02.880

处理[TextChanged](http://msdn.microsoft.com/en-gb/library/system.windows.controls.textbox.textchanged%28v=vs.95%29.aspx)事件并从那里更新您的标签，例如

```
txtDisplayData.TextChanged += (sender, e) => {
    myLabel.Text = "Value changed to " + (sender as TextBox).Text;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T07:55:25.250

[TextChange](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged%28v=vs.71%29.aspx)事件将成为您的朋友

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T07:56:27.167

在此过程中使用[`TextBox.TextChanged`](http://msdn.microsoft.com/en-gb/library/system.windows.controls.textbox.textchanged%28v=vs.95%29.aspx)事件。

> **在文本框中的内容更改**时发生。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T07:57:11.290

您可以使用 TextChanged 事件来更改标签文本。

# android - 使用蓝色闪烁箭头的位置动画并在 Android 谷歌地图中显示方向

> ID：15860103
> 
> 赞同：1
> 
> 时间：2013-04-07T07:50:08.303
> 
> 标签：android, google-maps

如何使用蓝色闪烁箭头为位置显示动画并在 Android Google Map 中以动画方式显示方向？我搜索但找不到合适的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:52:38.323

For you location you could just use a flashing blue arrow `.png` as the icon element.

As for the animated direction, AFAIK this is not possible in the current version of Google Map API V2.

# google-chrome-extension - 将关键事件发送到带有扩展名的谷歌浏览器中的非焦点页面

> ID：15860109
> 
> 赞同：1
> 
> 时间：2013-04-07T07:51:16.937
> 
> 标签：google-chrome-extension

我正在尝试构建一个 Google chrome 扩展程序，该扩展程序将具有下一个和上一个按钮，单击时不会弹出。以及实际上具有下一个和上一个按钮的网页。我想要做的是，当用户点击扩展弹出的下一步按钮时；它实际上会触发点击当前未聚焦的原始网页的下一步按钮。我想这可以通过 tabs 模块来完成，但我无法弄清楚它是如何做到的。

谢谢。

# url - 为什么字符串标识符通常是固定长度？

> ID：15860117
> 
> 赞同：1
> 
> 时间：2013-04-07T07:51:38.767
> 
> 标签：url

例如：http: **[//youtu.be/naHkZpMkPA0](http://youtu.be/naHkZpMkPA0)**

您可以查看 imgur 和 youtube 等网站以及流行的链接缩短器。我的问题是：假设这是第一次提交，为什么 id 不遵循诸如此类的增量模式`a, b, c ... ab, ac ... bda, bdb`。我想不出安全风险，因为无论如何您都可以操纵 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T07:54:46.700

首先，在示例中，您提供的 id 不是用户独有的，而是全局的。因此，我看不出您如何期望您的提交具有顺序 ID。

其次，设计 id 方案的人很可能已经考虑到了安全性。为此，他们很可能认为让 id 难以猜测是有益的。

# c# - Keyboard hooking - internet explorer issues

> ID：15860123
> 
> 赞同：0
> 
> 时间：2013-04-07T07:52:32.150
> 
> 标签：c#, internet-explorer, keyboard, hook

I'm writing an application that performs *keyboard hook* for `Internet Explorer` and for other apps. Everything works great except one annoying problem.

In Internet explorer, I change the active language and write in text box of HTML document, say to Hebrew or Arabic, but I keep getting the **characters in English** in my hooking app.

In the Internet explorer HTML document characters are displayed in the correct language but in the app I keep getting only English.

for example:

When I press`"abcאבג"` in Internet Explorer, and I get `"abctcd"` in the hooking app.

When I tried to hook other programs like Word or Excel or Firefox or Chrome, everything worked as expected.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:58:36.653

我最近用一些代码回答了一个问题，例如：

*   [在 c# 中记录击键时键入特殊字符时显示双字符](https://stackoverflow.com/questions/15488682/double-characters-shown-when-typing-special-characters-while-logging-keystrokes/15720657#15720657)

但是，该答案与您的答案**并不**直接对应，仅适用于一些示例代码。

您需要注意的是，与 Work 或 Excel 不同，您的挂钩程序可能不知道当前的 IME。因此，您首先需要知道用户切换了 IME，并指定了相应的键盘布局。API [ActivateKeyboardLayout](http://msdn.microsoft.com/library/windows/desktop/ms646289.aspx)可以做到这一点。

在您知道键盘布局后，您可以通过调用[ToUnicodeEx](http://msdn.microsoft.com/library/windows/desktop/ms646322.aspx)或[ToAsciiEx](http://msdn.microsoft.com/library/windows/desktop/ms646318.aspx)来获取挂钩程序中的相应字符`HKL`，[ActivateKeyboardLayout](http://msdn.microsoft.com/library/windows/desktop/ms646289.aspx)返回您，它指示特定的键盘布局。

有关概述的详细信息，请参阅MSDN 上的[关于键盘输入。](http://msdn.microsoft.com/library/windows/desktop/ms646267.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:05:54.870

我怀疑问题更深。

我写了以下代码：

```
IntPtr handle = new IntPtr(-1);
handle = GetForegroundWindow();
uint tpid = GetWindowThreadProcessId(handle, IntPtr.Zero);
IntPtr hKL = GetKeyboardLayout(tpid);
hKL = (IntPtr)(hKL.ToInt32() & 0x0000FFFF);
lbl1.Content = hKL.ToString(); 
```

该问题仅出现在 IE 中（我检查了版本 7、8、9 和 10）并且仅出现在 HTML TextBox 控件中。

在 url 上，一切都按预期工作（就像在所有其他应用程序中一样，例如 word excel firefox、chrome 等），如果我用希伯来语写，会显示 1037 并用希伯来语显示正确的字符，如果我用英文写，会显示 1033 和显示正确的英文字符，如果我开始用希伯来语写，通过英文仍然继续显示正确​​的 hkl 值和正确的字符。

到目前为止还不错。

仅当我在 HTML 文本框中键入时才会出现此问题，然后它才无法识别正确的语言。

当我在 HTML 的文本框中输入时，他识别出正确的语言和正确的第一个字符的 hkl 值，当我更改语言时，他没有识别更改并继续向我发送输入第一个字符的语言字符。

# php - 400_Bad_Request when consuming REST API - randomly and lasts for a couple of hours?

> ID：15860125
> 
> 赞同：0
> 
> 时间：2013-04-07T07:52:44.537
> 
> 标签：php, web-services, api, rest

I have coded a REST API myself that consumes another REST API.

It often works, but it also often results in 400_Bad_Request.

The flow is this: it works, works, works for so long and then it doesn't work, doesn't work and doesn't work for so long. I then just take a break and after an hour or two, it works again. **It doesn't matter what browser I use - chrome or firefox (but I did try clearing the cache)**. If I enter the URL directly in my browser (that I am trying to consume in my web-service), then I get proper response, so it's not like they block my ip-address for a little while.

```
 public function apiFunction()
    {

        parse_str($_SERVER["QUERY_STRING"]);
        $host = "THE API ADDRESS"; //omitted due to privacy
        $tran = new apiCallClass( "username", "pwd" ); //omitted due to privacy  
        $tran->setSomeData( $var1, $var2, $var3 ); 
        $tran->setSomeRequest( $var4, $var5 ); 
        $tran->setSomeField("somevar", $var6); 
        $tran->setHost( $host ); 
        $tran->execute(); 
        parse_str($tran->ResponseRaw,$theArr);
        //... other code goes here, 
        //but I can already see ResponseRaw has 400_Bad_Request
    } 
```

**This is the function that could be the source of the problem: if I copy the value of $url and paste it in browser, it works, so it must be something that this function is doing that's wrong:**

```
function processRequest( $url ) 
{ 
     $temp = $url;
     $ch = curl_init($url); 
     curl_setopt($ch,CURLOPT_FRESH_CONNECT,TRUE); 
     curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,FALSE); 
     curl_setopt($ch,CURLOPT_SSL_VERIFYHOST,FALSE); 
     curl_setopt($ch,CURLOPT_HEADER, 0); 
     if ( !$this->isBlank($this->ProxyHost) ) 
     { 
     curl_setopt ($ch, CURLOPT_PROXYTYPE, CURLPROXY_HTTP); 
     curl_setopt ($ch, CURLOPT_PROXY,$this->ProxyHost); 
     } curl_setopt ($ch, CURLOPT_URL, $url); 
     curl_setopt ($ch, CURLOPT_TIMEOUT, 120); 
     curl_setopt($ch,CURLOPT_RETURNTRANSFER, TRUE); 
     $this->parseResponse( curl_exec($ch) ); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:08:46.633

如果您发出完全相同的请求并且响应没有返回除 400 状态代码之外的任何消息正文，您将需要联系 API 提供商。

如果您从同一个 IP 地址执行大量请求，我怀疑您正在达到某种速率限制（它们应该返回 429 Too Many Requests 但我已经看到许多 API 返回 400 的速率限制）。

# c++ - MAC OS X下如何配置TCP_KEEPALIVE

> ID：15860127
> 
> 赞同：6
> 
> 时间：2013-04-07T07:53:05.207
> 
> 标签：c++, c, macos

目前我遇到了这个问题：如何检测不可预知的连接中断。

我使用 SO_KEEPALIVE、TCP_KEEPIDLE、TCP_KEEPINTVL 和 TCP_KEEPCNT 在 linux 下解决它，现在看起来工作正常。

但是，我确实花了很长时间才弄清楚如何在 MAC OS X 下解决它。有人建议我转向 netinet/tcp_var.h，但仍然没有找到上述 MACRO。

所以，我的问题是，

MAC OS X下如何实现TCP KEEPALIVE？

PS：我的 MAC OS X 版本是 10.8.3，我的 gcc/g++ 版本是 4.2.1

任何答复将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-05-27T22:33:26.617

实际上，Darwin (BSD) 比 Linux 更简单。设置 TCP_KEEPALIVE (secs) 选项以及 SO_KEEPALIVE (bool) 选项：

```
int on = 1, secs = 10;
setsockopt(skt, SOL_SOCKET,  SO_KEEPALIVE, &on, sizeof on);
setsockopt(skt, IPPROTO_TCP, TCP_KEEPALIVE, &secs, sizeof secs); 
```

要查看默认间隔是多少（如果您刚刚执行了 SO_KEEPALIVE），请使用：

```
sysctl -A | grep net.inet.tcp.*keep 
```

你可能会看到：

```
net.inet.tcp.keepidle: 7200000
net.inet.tcp.keepintvl: 75000
net.inet.tcp.keepinit: 75000
net.inet.tcp.always_keepalive: 0 
```

即 keepalive 仅对设置了 SO_KEEPALIVE 的套接字打开，空闲超时为 72000.000 毫秒（2 小时）。HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T08:19:06.953

我认为您应该使用`setsockopt()`，请参阅它的手册页

它看起来像`TCP_KEEPIDLE`,`TCP_KEEPINTVL`并且`TCP_KEEPCNT`是特定于 Linux 的，你不会在 OSX 上找到它们的对应部分。

要设置`SO_KEEPALIVE`这样做

```
int optval = 1;
setsockopt(sock, SOL_SOCKET, &optval, sizeof(optval)); 
```

我很久以前使用的另一个技巧是尝试发送 0（零）个字节，这将检查套接字是否仍然存在。无论是作为重复的*看门狗*，还是在尝试发送消息之前。

# r - 将具有许多时间序列的数据框转换为单变量 xts 列表

> ID：15860132
> 
> 赞同：1
> 
> 时间：2013-04-07T07:54:02.477
> 
> 标签：r, plyr, xts

我有一个时间序列的数据框：

```
 X1.HK.Equity      X X2.HK.Equity    X.2 X3.HK.Equity   X.4
1   31/12/2002 38.855   31/12/2002 19.547   31/12/2002 5.011
2   02/01/2003 38.664   02/01/2003 19.547   02/01/2003 4.986
3   03/01/2003 40.386   03/01/2003 19.547   03/01/2003 4.962
4   06/01/2003 40.386   06/01/2003 19.609   06/01/2003 4.937
5   07/01/2003 40.195   07/01/2003 19.609   07/01/2003 4.937
6   08/01/2003 40.386   08/01/2003 19.547   08/01/2003 4.912 
```

我想采用这个时间序列并将其更改为 3 个项目的列表，每个项目都是从第 1-2、3-4 和 5-6 列创建的 XTS。请注意，时间序列不一定具有相同的日期。

`plyr`如果有人能告诉我如何使用库来做到这一点，我会非常高兴。

`dput`我的数据框：

```
structure(list(X1.HK.Equity = c("31/12/2002", "02/01/2003", "03/01/2003", 
"06/01/2003", "07/01/2003", "08/01/2003"), X = c(38.855, 38.664, 
40.386, 40.386, 40.195, 40.386), X2.HK.Equity = c("31/12/2002", 
"02/01/2003", "03/01/2003", "06/01/2003", "07/01/2003", "08/01/2003"
), X.2 = c(19.547, 19.547, 19.547, 19.609, 19.609, 19.547), X3.HK.Equity = c("31/12/2002", 
"02/01/2003", "03/01/2003", "06/01/2003", "07/01/2003", "08/01/2003"
), X.4 = c(5.011, 4.986, 4.962, 4.937, 4.937, 4.912)), .Names = c("X1.HK.Equity", 
"X", "X2.HK.Equity", "X.2", "X3.HK.Equity", "X.4"), row.names = c(NA, 
6L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:03:03.680

一个普通的`lapply`会在这里工作：

```
to.xts <- function(i) as.xts(read.zoo(DF[i+0:1], format = "%d/%m/%Y"))
lapply(seq(1, ncol(DF), 2), to.xts) 
```

如果这不仅仅是一个示例，实际上只有三个系列，那么将最后一行替换为：

```
list(to.xts(1), to.xts(3), to.xts(5)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T08:32:25.207

我不知道这是否是最有效的方法，但希望这是相当合乎逻辑的。

```
library(xts)
lapply(seq_along(mydf[c(FALSE, TRUE)]), function(x) {
  xts(mydf[c(FALSE, TRUE)][x], 
      order.by=as.Date(mydf[c(TRUE, FALSE)][, x], format = "%d/%m/%Y"))
})
# [[1]]
#                 X
# 2002-12-31 38.855
# 2003-01-02 38.664
# 2003-01-03 40.386
# 2003-01-06 40.386
# 2003-01-07 40.195
# 2003-01-08 40.386
# 
# [[2]]
#               X.2
# 2002-12-31 19.547
# 2003-01-02 19.547
# 2003-01-03 19.547
# 2003-01-06 19.609
# 2003-01-07 19.609
# 2003-01-08 19.547
# 
# [[3]]
#              X.4
# 2002-12-31 5.011
# 2003-01-02 4.986
# 2003-01-03 4.962
# 2003-01-06 4.937
# 2003-01-07 4.937
# 2003-01-08 4.912 
```

基本上，它使用回收`TRUE`和`FALSE`选择备用列。该`seq_along`部分告诉我们有多少对（在本例中为 3），并且在匿名函数中，我们使用 对值进行子集化，使用`c(FALSE, TRUE)`对日期进行子集化`c(TRUE, FALSE)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T10:40:40.483

使用 plyr，使用 llply

```
tss = llply(c(1,3,5),function(s){ts=mydf[,s:(s+1)];xts(ts[,2],order.by=as.Date(ts[,1],format="%d/%m/%Y"))} ) 
```

给你

```
> tss[[1]]
             [,1]
2002-12-31 38.855
2003-01-02 38.664
2003-01-03 40.386
2003-01-06 40.386
2003-01-07 40.195
2003-01-08 40.386
> class(tss[[1]])
[1] "xts" "zoo"
> 
```

那个 1,3,5 向量更普遍`seq(1,ncol(mydf),by=2)`

# offset - 可以在 Zurb Foundation 4 网格中的元素右侧添加偏移量吗？

> ID：15860134
> 
> 赞同：16
> 
> 时间：2013-04-07T07:54:20.980
> 
> 标签：offset, zurb-foundation, grid-layout

根据[Foundation's docs on the grid component](http://foundation.zurb.com/docs/components/grid.html)，我基本上可以使用它们的偏移类使 1 个或多个网格列成为空间：

```
<div class="row">
  <div class="large-1 columns">1st column</div>
  <div class="large-9 large-offset-2 columns">2 spaces to the left of this column</div>
</div> 
```

这将产生 1 列，然后是 2 列普通空间和 9 列。是否可以将这些偏移量设置在元素的右侧而不是左侧？例如，像这样的东西？

```
<div class="row">
  <div class="large-1 columns">1st column</div>
  <div class="large-9 large-offset-right-2 columns">2 spaces to the right</div>
</div> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-07T22:19:59.847

假设我正确理解您的请求，听起来您只需要使用`end`而不是`offset`. 例如，

```
<div class="row">
    <div class="large-1 columns a">1st column</div>
    <div class="large-9 columns end">2 spaces to the left of this column</div>
</div> 
```

# java - 从头开始创建 .txt 文件

> ID：15860135
> 
> 赞同：-1
> 
> 时间：2013-04-07T07:54:30.610
> 
> 标签：java, python, c, assembly, microcontroller

我正在研究微控制器，我正在尝试将一些传感器的一些数据写入 SD 卡上的 .txt 文件，然后将 sd 卡放入读卡器并读取 PC 上的数据。

有谁知道如何从头开始为 FAT32 文件系统编写 .txt 文件？我没有任何要调用的预定义代码/方法/函数，我需要从无到有创建代码。

这不是特定编程语言的问题，这就是为什么我标记了多个。稍后我可以将代码从 C 或 Java 转换为我选择的编程语言。但我似乎无法在任何类型的语言中找到如此低级的方法/功能:)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:42:49.220

[FatFs](http://elm-chan.org/fsw/ff/00index_e.html)非常好，并且高度便携。它支持 FAT12、FAT16 和 FAT32、长文件名、查找、读取和写入（大多数这些东西都可以打开和关闭以改变内存占用）。
如果你的内存真的很紧，还有 Petit FatFs，但默认情况下它没有写支持，添加它需要一些工作。

[安装](http://elm-chan.org/fsw/ff/en/mount.html)驱动器后，您只需[打开](http://elm-chan.org/fsw/ff/en/open.html)一个文件即可创建它。例如：

```
FATFS fatFs;
FIL newFile;

// The drive number may differ 
if (f_mount(0, &fatFs) != FR_OK) {
  // Something went wrong
}

if (f_open(&newFile, "/test.txt", FA_WRITE | FA_OPEN_ALWAYS) != FR_OK) {
  // Something went wrong
} 
```

* * *

如果您确实需要仅使用自己的代码创建文件，则必须遍历 FAT，寻找空白空间，然后创建新的 LFN 条目（存储文件名的位置）和 DIRENT（指定磁盘上的集群）将保存文件数据）。
除非这是某种家庭作业/实验室练习，否则我看不出这样做的任何理由。在任何情况下，您都应该先[阅读一些有关 FAT 结构的内容，](http://www.c-jump.com/CIS24/Slides/FileSysDataStructs/FileSysDataStructs.html)并在开始后返回一些更具体的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T08:02:27.190

在JAVA中你可以这样做

```
Writer output = null;
String text = "This is test message";
File file = new File("write.txt"); 
output = new BufferedWriter(new FileWriter(file));
output.write(text);
output.close();  
System.out.println("Your file has been written"); 
```

# ruby-on-rails - 如何将 RoR 视图转换为响应式 (html5)

> ID：15860136
> 
> 赞同：1
> 
> 时间：2013-04-07T07:54:33.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3, html, layout, responsive-design

我在 Rails 中有一个普通的 html 视图，包含图像和链接。如何将其变为响应式？（我希望它也适合移动浏览器大小，使其成为 html5）我知道我应该使用`fluid`，但是完整的命令是什么？还是直接从文本编辑器中获得另一种/更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T07:58:28.857

Rails 对进入浏览器的 HTML 的控制有限。

尝试查看像[Bootstrap](http://twitter.github.io/bootstrap/)或[Foundation](http://foundation.zurb.com/)这样的框架。

有一些宝石可以帮助你

*   [基础导轨](https://github.com/zurb/foundation-rails)
*   [twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails)

还有一个关于[Bootstrap 基础](http://railscasts.com/episodes/328-twitter-bootstrap-basics)的 railscast 插曲。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T07:59:14.467

这与 Rails 没有太大关系。Rails 是一种服务器端语言，响应式模板依赖于前端 (html/css)。

但是，如果您像许多初学者一样专门使用引导程序，您可以尝试：[https](https://github.com/seyhunak/twitter-bootstrap-rails) ://github.com/seyhunak/twitter-bootstrap-rails gem 以快速集成事物。

# c# - RichTextBox 粘贴限制为 32k 个字符？

> ID：15860137
> 
> 赞同：3
> 
> 时间：2013-04-07T07:54:35.157
> 
> 标签：c#, richtextbox

我有一个带有 RichTextBox 的 WinForms 应用程序。
如果我从 Notepad++ 文本中复制 100k 个字符并尝试`CTRL+V`在 RichTextBox 上使用，则只会粘贴 32.200 个字符。
请注意，我可以继续在 RichTextBox 中输入，所以问题不是`MaxLength`。
为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T08:18:34.370

没有复制，我只是将 140 万个字符从记事本粘贴到 RTB 中。您需要考虑问题的另一个来源，pebkac 或 Notepad++。检查粘贴到 RTB 时是否保留了语法着色。在这种情况下，限制是 Scintilla 愿意生成的 RTF 数量。这是一个公平的问题，程序员 Q+A 网站不允许在帖子中包含那么多文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T08:00:34.930

[来自 MSDN - RichTextBox.MaxLength 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.maxlength.aspx)

```
RichTextbox1.Length = Int32.MaxValue; 
```

这应该给你 2,147,483,647 个字符

# node.js - throw new Error('缺少 PFX 或证书 + 私钥')

> ID：15860140
> 
> 赞同：3
> 
> 时间：2013-04-07T07:54:53.973
> 
> 标签：node.js, https, express, connect, pfx

我之前在 node.js 中开发了一个模块，并在完成测试后将其放入 git hub。现在我从 githup 下载了相同模块的压缩版本并尝试运行该模块，安装了所有依赖项，但现在我收到以下错误

```
 Error:Missing PFX + certificate + private key 
```

完整的错误日志如下：

```
 Error: Missing PFX or certificate + private key.
              at HTTPSServer.Server (tls.js:1029:11)
              at HTTPSServer.Server (https.js:35:14)
              at HTTPSServer (C:/Social/node_modules/express/node_modules/connect/lib/https.js:34:16)
              at new HTTPSServer (C:/Social/node_modules/express/lib/https.js:38:23)
              at Object.exports.createServer (C:/Social/node_modules/express/lib/express.js:43:12)
              at Object.<anonymous> (C:/Social/app.js:46:36)
              at Module._compile (module.js:456:26)
              at Object.Module._extensions..js (module.js:474:10)
              at Module.load (module.js:356:32)
              at Function.Module._load (module.js:312:12) 
```

我试图找到解决方案，但找不到任何解决方案。任何人都可以帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:28:20.387

出于某种原因，Express 认为您想要启动一个 HTTPS 服务器。我的猜测是这是因为您的代码中的这一行：

```
var app = module.exports = express.createServer(form({ keepExtensions: true })); 
```

（[链接](https://github.com/pragtech/Social-Networking-Site-in-Node.js/blob/master/app.js#L44)）

但是，Express 使用此代码来查看它是否应该启动 HTTPS 服务器：

```
exports.createServer = function(options){
  if ('object' == typeof options) {
    return new HTTPSServer(options, Array.prototype.slice.call(arguments, 1));
  } else {
    return new HTTPServer(Array.prototype.slice.call(arguments));
  }
}; 
```

这有点奇怪，因为`form()`返回的是函数而不是对象。但可以肯定的是，尝试将您的代码重写为：

```
var app = module.exports = express.createServer();
app.use(form({ keepExtensions: true })); 
```

# r - Can't understand the S object in the taylor.diagram function (package plotrix)

> ID：15860145
> 
> 赞同：0
> 
> 时间：2013-04-07T07:55:17.080
> 
> 标签：r, plot

I am going through the taylor.diagram() function of the plotrix package, in order to modify it to meet my needs.

Oddly, I came upon a line of code that is intriguing me:

```
S <- (2 * (1 + R))/(sd.f + (1/sd.f))^2 
```

This appears at the end of the else part of the "pos.cor if".

I suspect this has to do with some shift to the position of the points to be drawn afterwards, given that if pos.cor is false then the whole range of correlations is to be plotted (from -1 to 1), and thus the plot region becomes modified.

However, the strange part is that **S** is found nowhere else in taylor.diagram !!!

Am I missing something (and S is being used in some cryptic way), or is this a bug?

Cheers

# java - 如何在 JavaEE 中实现一个持续运行的进程

> ID：15860146
> 
> 赞同：5
> 
> 时间：2013-04-07T07:55:24.287
> 
> 标签：java, jakarta-ee, ejb, jboss7.x

您如何建议在 JavaEE 中实现以下内容：

1.  我需要在应用程序服务器中有一个后台进程（我在想一个有状态的会话 bean），它不断监视“某事”，如果某些条件适用，它会对数据库进行操作。

2.  最重要的是，它必须由各种客户端远程操作。

所以，基本上，我需要一个持续运行的进程，保持其状态，并对许多远程客户端的方法调用开放。

由于我是 JavaEE 的新手，我有点困惑使用哪种方法/“技术”。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T08:46:04.550

您可以将无状态会话或单例 bean 与 EJB 计时器和计时器服务结合使用。bean 将成为远程客户端用来控制后台进程的接口。计时器服务会定期回调 bean 上的方法来验证条件。计时器由 EJB 容器自动持久化，因此当您的 bean 客户端断开连接时，它们将完成它们的工作。

这是一个草图：

```
@Singleton
...
public TimerMangerbean implements TimerManager {

   @Resource
   private TimerService timerService;

   public void startMonitoring() {
      //start in 5 sec and timeout every 10 minutes
      Timer timer = timerService.createTimer(5000, 60000, "MyTimer");
   }

   public void stopMonitoring() {
      Collection<Timer> timers = timerService.getTimers();
      for(Timer timer : timers) {
         //look for your timer
         if("MyTimer".equals(timer.getInfo())) {
            timer.cancel();break;
         }
      }
   }

   //called every 10 minutes
   @Timeout
   public void onTimeout() {
      //verify the condition and do your processing
   }
} 
```

另请参阅：[在 Oracle JavaEE 教程上使用计时器服务](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T08:20:15.397

Java EE 就是解决方案。您将需要遵循这些步骤：

1.  构建一个 Java EE 应用程序，一个包含 EJB 的 jar：

    1.1 你需要一个 IDE：Eclipse Juno 是我的最爱，1.2 网络上有很多 tuto。搜索 EJB3，你会发现，

2.  有一个应用程序服务器来运行您的 EJB。JBoss 是一个不错的选择，Glassfish 是另一个不错的选择。安装 JBoss 和 Eclipse 的 JBoss Tools 插件后，您将能够快速构建和运行基本应用程序。

编辑：一个完整​​的 Timer EJB 类（如果需要自动重新加载）

```
package clouderial.saas.commons.utils;

import java.util.Map;

import javax.annotation.PreDestroy;
import javax.annotation.Resource;
import javax.ejb.ScheduleExpression;
import javax.ejb.Timeout;
import javax.ejb.Timer;
import javax.ejb.TimerConfig;
import javax.ejb.TimerService;
import javax.inject.Inject;

import jmcnet.libcommun.exception.ExceptionTechnique;
import jmcnet.libcommun.utilit.mail.MailException;

import org.apache.commons.configuration.event.ConfigurationEvent;
import org.apache.commons.configuration.event.ConfigurationListener;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import clouderial.saas.commons.email.EmailSender;
import clouderial.saas.commons.jpamongo.JPAMongoBasePersistenceContextAccessor;

/**
 * A base class for a periodic process
 * @author jmc
 *
 */
public abstract class PeriodicProcessBase extends JPAMongoBasePersistenceContextAccessor implements ConfigurationListener {
    private static Logger log = LoggerFactory.getLogger(PeriodicProcessBase.class);

    @Resource
    private TimerService timerService;

    @Inject
    protected GlobalConfiguration _config;

    @Inject
    protected EmailSender _emailSender;

    private Timer _timer=null;

    private String _processName=null;
    private Logger _log = null;

    protected void initTimer(String processName, Logger log) {
        if (processName != null) _processName = processName;
        if (log != null) _log = log;

        String second    = _config.getString("timer."+_processName+".second","0");
        String minute    = _config.getString("timer."+_processName+".minute","0");
        String hour      = _config.getString("timer."+_processName+".hours","4");
        String dayOfWeek = _config.getString("timer."+_processName+".dayOfWeek","*");

        ScheduleExpression scheduleExp =
                new ScheduleExpression().second(second).minute(minute).hour(hour).dayOfWeek(dayOfWeek);

        cancelTimer();
        if (timerService != null) { 
            _timer = timerService.createCalendarTimer(scheduleExp, new TimerConfig(_processName, false));
            _log.info("{} : timer programmed for '{}'h, '{}'m, '{}'s for days '{}'.", _processName, hour, minute, second, dayOfWeek);
        }
        else _log.error("{} : no timer programmed because timerService is not initialized. (Normal during tests)", _processName);

        // Listen to change
        _config.addModificationListener(this); // on timer modification, configurationChanged is called
    }

    @PreDestroy
    private void cancelTimer() {
        if (_log != null) _log.info("Stopping timer for '{}'", _processName);
        if (_timer != null) _timer.cancel();
        _timer = null;
    }

    @Override
    public void configurationChanged(ConfigurationEvent event) {
        if (_log != null) _log.info("Configuration have change. Reloading config for ProcessBilling.");
        _config.removeModificationListener(this);
        initTimer(null, null);
    }

    @Timeout
    private void run(Timer timer) {
        runProcess(timer);
    }

    /**
     * The entry point for runner the process. Must be overriden by super class
     * @param timer
     */
    protected abstract void runProcess(Timer timer); // do the job here

} 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T10:26:20.897

石英呢？请参阅链接 [http://rwatsh.blogspot.com/2007/03/using-quartz-scheduler-in-java-ee-web.html](http://rwatsh.blogspot.com/2007/03/using-quartz-scheduler-in-java-ee-web.html) [http://lanbuithe.blogspot.com/2011/07/using-quartz- scheduler-in-java-ee-web.html](http://lanbuithe.blogspot.com/2011/07/using-quartz-scheduler-in-java-ee-web.html) [http://www.mkyong.com/tutorials/quartz-scheduler-tutorial/](http://www.mkyong.com/tutorials/quartz-scheduler-tutorial/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T11:28:18.453

正如您自己所说，您有两个要求：1）定期执行一些后台作业，以及 2）响应客户端请求。

对于 1)，您可以使用`TimerService`或使用`ServletContextListener`. 第二个不完全符合，但有效。如果您使用计时器，您可以创建一个定期计时器（如@dcernahoschi 指出的那样），或者一个重新安排自身的独特计时器：

```
@Timeout
public void onTimeout() {
     //do something
     // create a new timer
 } 
```

如果您的定期计时器每 10 秒触发一次，并且您处理最后一个表单的时间超过 10 秒，那么您可能会遇到问题。如果处理时间不固定，那么拥有一个重新安排自身的计时器会更好。

对于 2) 您可以使用无状态或 staefull EJB，这正是他们的目的。

# c# - 如何对具有相同成员的不同类型参数使用相同的函数？

> ID：15860152
> 
> 赞同：4
> 
> 时间：2013-04-07T07:55:44.833
> 
> 标签：c#

B这里是示例代码，我定义了两个类。如何使用该`Output`函数输出两个不同类中具有相同名称的成员？

```
class A
{
    public string Name { get; set; }
    public int Age { get; set; }
    public string Email { get; set; }

    public A(string name, int age, string email)
    {
        Name = name;
        Age = age;
        Email = email;
    }
}

class B
{
    public string Name { get; set; }
    public int Age { get; set; }
    public string Location { get; set; }

    public B(string name, int age, string location)
    {
        Name = name;
        Age = age;
        Location = location;
    }
}

void Output(object obj)
{
    // How can I convert the object 'obj' to class A or class B
    // in order to output its 'Name' and 'Age'
    Console.WriteLine((A)obj.Name); // If I pass a class B in pararmeter, output error.
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T07:57:56.747

您必须：

1.  使用反射获取属性（如果不存在则抛出）
2.  有一个公共接口，例如`INamed`有一个字符串`Name`属性，这两个类中的每一个都实现了
3.  声明一个局部变量 as`dynamic`并使用它来访问`Name`属性（但实际上这与 #1 相同，因为动态调度将仅使用反射来获取`Name`属性）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T07:58:53.403

您可以利用[`dynamic`](http://msdn.microsoft.com/en-us/library/vstudio/dd264741.aspx)绕过编译器，它会在运行时检查类型，因此您不需要强制转换：

```
void Output(dynamic obj)
{
    Console.WriteLine(obj.Name); 
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-07T07:59:57.367

你应该声明一个接口来描述两个类的共同部分：

```
interface I
{
    string Name { get; set; }
    int Age { get; set; }
} 
```

然后在`A`and中实现它`B`：

```
class A : I
{
    public string Name { get; set; }
    public int Age { get; set; }
    public string Email { get; set; }

    public A(string name, int age, string email)
    {
        Name = name;
        Age = age;
        Email = email;
    }
}

class B : I
{
    public string Name { get; set; }
    public int Age { get; set; }
    public string Location { get; set; }

    public B(string name, int age, string location)
    {
        Name = name;
        Age = age;
        Location = location;
    }
} 
```

并更改您的方法以获取`I`参数：

```
void Output(I obj)
{
    Console.WriteLine(obj.Name); 
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-07T08:00:53.743

您可以使用`dynamic`、反射或继承。或者您可以复制该方法并利用方法重载

```
void Output(A obj)
{
 // in order to output its 'Name' and 'Age'
 Console.WriteLine(obj.Age);
 Console.WriteLine(obj.Name);
}

void Output(B obj)
{
 // in order to output its 'Name' and 'Age'
 Console.WriteLine(obj.Age);
 Console.WriteLine(obj.Name);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-07T08:04:43.450

您需要为这两个类创建一个通用接口，以便编译器知道这两个类可以提供某些功能（在您的情况下为名称和年龄）：

```
 interface IHasNameAndAge
    {
        string Name { get; }
        int Age { get; }
    }

    class A : IHasNameAndAge
    {
        public string Name { get; set; }
        public int Age { get; set; }
        string Email { get; set; }

        public A(string name, int age, string email)
        {
            Name = name;
            Age = age;
            Email = email;
        }
    }

    class B : IHasNameAndAge
    {
        public string Name { get; set; }
        public int Age { get; set; }
        string Location { get; set; }

        public A(string name, int age, string location)
        {
            Name = name;
            Age = age;
            Location = location;
        }
    }

    void Output(IHasNameAndAge obj)
    {
        Console.WriteLine(obj.Name + " is " + obj.Age);
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-07T07:58:20.910

在您的情况下 - B 不会从 A 继承，因此您不能将 B 转换为 A。

将 B 更改为从 A 继承，例如

```
class B : A
{
...
} 
```

另外-考虑一下您要在 B 类的 A() 方法中完成什么。并且 - 如果您继承，您可能不需要两次声明相同的成员。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-07T07:58:59.257

你可以这样做：

```
if ( obj.GetType() == typeof( A ) )
{
    Console.WriteLine(((A)obj).Name);
}
else if ( obj.GetType() == typeof( B ) )
{
    Console.WriteLine(((B)obj).Name);
} 
```

# android - cocos2d android 动画

> ID：15860157
> 
> 赞同：0
> 
> 时间：2013-04-07T07:56:47.917
> 
> 标签：android, cocos2d-android

我用框架 cocos2d android 做动画。我有系列图像相同的打击图像，我想将图像中的 tvi 裁剪为 android 中的 cocos2d。请帮帮我？ [链接图片](http://www.mediafire.com/view/?63dmsxwj7cdlk3k)

公共类 MainActivity 扩展 Activity {

```
private static final boolean DEBUG = true;

private CCGLSurfaceView mGLSurfaceView;
static Context context;
static Resources resources;
static AssetManager assetManager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    mGLSurfaceView = new CCGLSurfaceView(this);
    setContentView(mGLSurfaceView);
    assetManager = getAssets();

}

@Override
protected void onStart() {
    super.onStart();
    // attach the OpenGL view to a Window
    Director.sharedDirector().attachInView(mGLSurfaceView);
    // set landscape mode
    // Director.sharedDirector().setLandscape(true);
    // show FPS
    Director.sharedDirector().setDisplayFPS(true);
    // frames per second
    Director.sharedDirector().setAnimationInterval(1.0f / 60);

    Scene scene = Scene.node();
    scene.addChild(nextAction());
    // Make the scene active
    Director.sharedDirector().runWithScene(scene);
}

static int sceneIdx = -1;
static Class transitions[] = { Animation1.class, };

static Layer nextAction() {
    sceneIdx++;
    sceneIdx = sceneIdx % transitions.length;
    return restartAction();
}

static Layer restartAction() {
    try {
        Class c = transitions[sceneIdx];
        return (Layer) c.newInstance();
    } catch (Exception e) {
        if (DEBUG)
            e.printStackTrace();
        return null;
    }
}

@Override
protected void onPause() {
    super.onPause();
    Director.sharedDirector().pause();
}

@Override
protected void onResume() {
    super.onResume();
    Director.sharedDirector().resume();
}

@Override
protected void onDestroy() {
    super.onDestroy();
    TextureManager.sharedTextureManager().removeAllTextures();
}

static class Anima extends Layer {

    Sprite tivi;
    Sprite bg2;
    InputStream is;
    Resources resources;
    AssetManager asset;
    Bitmap bf, bitmap, bitmap2;
    CCSize s = Director.sharedDirector().displaySize();

    public Anima() {

        Log.v("MP", "Width: " + s.width + " Height: " + s.height);
        bg2 = Sprite.sprite("Scene02.png");

        bg2.setScaleX(s.width / bg2.getTexture().getWidth());
        bg2.setScaleY(s.height / bg2.getTexture().getHeight());
        bg2.setPosition(s.width / 2, s.height / 2);
        addChild(bg2, 1);

        tivi = Sprite.sprite("TV0000.png");
        tivi.setScaleX(s.width / bg2.getTexture().getWidth());
        tivi.setScaleY(s.height / bg2.getTexture().getHeight());
        //tivi.setPosition(0, 0);
        tivi.setPosition(247 * s.width / bg2.getTexture().getWidth(), 480
                 * s.height / bg2.getTexture().getHeight());
        addChild(tivi, 1);

    }

    protected void centerSprites() {
        // tivi.setPosition(247 * s.width / bg2.getTexture().getWidth(), 480
        // * s.height / bg2.getTexture().getHeight());
    }

}

static class Animation1 extends Anima {

    Animation tvAnimation;
    IntervalAction tvAction;
    CCSize s = Director.sharedDirector().displaySize();
    boolean ck = true;

    public Animation1() {
        // centerSprites();
        isTouchEnabled_ = true;
        tvAnimation = initTVAnimation();
        tvAction = Animate.action(tvAnimation);
    }

    private Animation initTVAnimation() {

        Animation animation = new Animation("abc", 0.2f);
        for (int i = 1; i < 40; i++) {
            try {
                is = assetManager.open(new CCFormatter().format(
                        "TV00%02d.png", i));
                bf = BitmapFactory.decodeStream(is);
                bitmap = Bitmap.createBitmap(bf, 0, 0, bf.getWidth(),
                        bf.getHeight());
                bitmap2 = Bitmap
                        .createBitmap(bitmap, (int) (153 * (s.width / bg2
                                .getTexture().getWidth())),
                                (int) (261.5 * (s.height / bg2.getTexture()
                                        .getHeight())),
                                (int) (87 * (s.width / bg2.getTexture()
                                        .getWidth())),
                                (int) (97 * (s.height / bg2.getTexture()
                                        .getHeight())));
                animation.addFrame(bitmap2);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        return animation;
    }

    @Override
    public boolean ccTouchesBegan(MotionEvent event) {
        CCSize s = Director.sharedDirector().displaySize();
        CCPoint location = Director.sharedDirector().convertToGL(
                event.getX(), event.getY());
        if ((location.x >= 203.5 * s.width / bg2.getTexture().getWidth() && location.x <= 290
                * s.width / bg2.getTexture().getWidth())
                && (location.y >= 433.5 * s.height
                        / bg2.getTexture().getHeight() && location.y <= 526
                        * s.height / bg2.getTexture().getHeight())) {
            if (tvAction.isDone() == true || ck == true) {
                tivi.runAction(tvAction);
                ck = false;
            }
        }
        // addNew(location);

        return TouchDispatcher.kEventHandled;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:25:05.330

```
Animation animation = new Animation("abc", 0.2f);
    for (int i = 1; i < 40; i++) {
        try {
            is = assetManager.open(new CCFormatter().format(
                    "TV00%02d.png", i));
            bf = BitmapFactory.decodeStream(is);
            bitmap = Bitmap.createBitmap(bf, 0, 0, bf.getWidth(),
                    bf.getHeight());
            bitmap2 = Bitmap
                    .createBitmap(bitmap, (int) (153 * (s.width / bg2
                            .getTexture().getWidth())),
                            (int) (261.5 * (s.height / bg2.getTexture()
                                    .getHeight())),
                            (int) (87 * (s.width / bg2.getTexture()
                                    .getWidth())),
                            (int) (97 * (s.height / bg2.getTexture()
                                    .getHeight())));
            animation.addFrame(bitmap2);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    return animation;
} 
```

**尝试简化这段代码**..使用 cocs2d-android 1 中的最新示例系列 ..它具有处理动画的基本概念.....您将从示例系列中得到答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T21:55:57.057

*海，我希望这会对你有所帮助。我用过CCSprite。它可以扩展以支持所有带有动画的屏幕。以 480x800 缩放 CCSprite*

```
public class MainMenuScreen extends CCColorLayer {

private CCSprite newGame1;
private CGSize size; // this is where we hold the size of current display
private float scaleX, scaleY;// these are the ratios that we need to compute

public static CCScene sence() {
    CCScene ccScene = CCScene.node();
    CCLayer layer = new MainMenuScreen(ccColor4B.ccc4(69, 3, 3, 255));
    ccScene.addChild(layer);
    return ccScene;
}

protected MainMenuScreen(ccColor4B color) {
    super(color);

    size = CCDirector.sharedDirector().winSize();

    CCSprite backGround = CCSprite
            .sprite(CandygrabberImage.MENU_BACKGROUND);
    this.setIsTouchEnabled(true);
    // backGround.setContentSize(winSize);
    backGround.setTag(1);
    backGround.setScale(.5f);
    backGround.setPosition(CGPoint.ccp(size.width / 2.0f,
            size.height / 2.0f));
    backGround
            .setScaleX(size.width / backGround.getTexture().getWidth());
    backGround.setScaleY(size.height
            / backGround.getTexture().getHeight());

    addChild(backGround);

    scaleX = size.width / 480f;// assuming that all my assets are available
                                // for a 320X480(landscape) resolution;
    scaleY = size.height / 800f;

    newGame1 = CCSprite.sprite("newgame1.png");
    CCAnimation buttonAnimation = CCAnimation.animation("", 1f);
    buttonAnimation.addFrame("newgame1.png");
    buttonAnimation.addFrame("newgame2.png");
    buttonAnimation.addFrame("newgame3.png");
    buttonAnimation.addFrame("newgame4.png");
    buttonAnimation.addFrame("newgame5.png");
    buttonAnimation.addFrame("newgame6.png");
    buttonAnimation.addFrame("newgame7.png");
    buttonAnimation.addFrame("newgame8.png");

    CCIntervalAction buttonAction = CCAnimate.action(5, buttonAnimation,
            false);
    newGame1.runAction(CCRepeatForever.action(buttonAction));

    newGame1.setScaleX(scaleX);
    newGame1.setScaleY(scaleY);
    newGame1.setScale(aspect_Scale(newGame1, scaleX, scaleY));

    this.addChild(newGame1);

    this.setIsTouchEnabled(true);
}

public float aspect_Scale(CCSprite sprite, float scaleX, float scaleY) {
    float sourcewidth = sprite.getContentSize().width;
    float sourceheight = sprite.getContentSize().height;

    float targetwidth = sourcewidth * scaleX;
    float targetheight = sourceheight * scaleY;
    float scalex = (float) targetwidth / sourcewidth;
    float scaley = (float) targetheight / sourceheight;

    return Math.min(scalex, scaley);
} 
```

}

# javascript - “this”的javascript范围问题

> ID：15860158
> 
> 赞同：2
> 
> 时间：2013-04-07T07:56:54.193
> 
> 标签：javascript

这是我的代码：

```
var timer = 
{
    i: "Hello",

    start: function()
    {       
        var self = this;             
        window.setInterval(self.tick, 1000);     
    },

    tick: function()
    {
        console.log(this.i);
    }       
}

timer.start(); 
```

为什么显示 javascript 控制台`undefined`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T08:00:40.567

您传递了对 的引用`tick`，但不是范围。尝试：

```
start: function(){       
    var self = this;             
    window.setInterval(function(){self.tick();}, 1000);     
} 
```

或者使用[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)（先看浏览器兼容性）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T08:00:51.790

将 this.i 更改为 timer.i

或者使用像这样的对象声明

```
function timer() {
var self = this;
.. etc. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T08:02:04.480

建议更改`window.setInterval(self.tick, 1000);`为

```
window.setInterval(self.tick.bind(self), 1000); 
```

# php - 提交按钮后，html表单进入谷歌

> ID：15860159
> 
> 赞同：0
> 
> 时间：2013-04-07T07:56:54.617
> 
> 标签：php, html, mysql

我正在使用 PHP 和 html 表单在我目前在 wamp 服务器上运行的网站上发表评论......这是代码

```
 <form action='comment.php?cat=<?php  echo $cat."&page=".$pg; ?>' method='post'>
  <?php
  if(isset($_GET['page']))
  {

  echo "<textarea name='comment' cols='50' rows='3' id='comment'></textarea>";
  echo "</br>";
  echo "<input type='submit' value='Submit' />";
  }
  ?> 
  </form> 
```

comment.php 的代码是

```
<?php
require_once 'db_connect.php';
$cat=$_GET['cat'];
$pg=$_GET['page'];
$comment=$_POST['comment'];
$qry=mysql_query("INSERT INTO comments(pg_name,comment)VALUES('$pg','$comment')",     $con);
if(!$qry)
{
die("Query Failed: ". mysql_error());
}
else
{
header("Location:pages.php?cat=$cat&page=$pg");
}
?> 
```

现在的问题是，当我单击提交按钮时......它会转到这个网址[http://www.google.com/search?q=site:yoursitename.com](http://www.google.com/search?q=site:yoursitename.com)但我没有在我的代码中的任何地方使用它。 ..我不知道为什么会这样...任何指南？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:01:32.293

表单将始终提交给 action 参数的值。在您的情况下，这不会导致问题，因为它指向本地文件。（重定向也指向 e 本地文件）

原因必须是某些 javascript 劫持了表单的单击或提交事件。请查看源代码（*评论*页面和*页面*页面）并检查页面中包含的 javascript 并查看那里。

# javascript - 一步一步的遍历html表格

> ID：15860161
> 
> 赞同：2
> 
> 时间：2013-04-07T07:57:00.867
> 
> 标签：javascript, html

我需要动态地将一些值插入到 html 表中。例如，我有一些输入，然后我有一个表（大约 5 行），所以我有一个启用计时器的按钮。当计时器停止时，我需要将数据插入表中。

这是代码，如何将数据添加到一行？

```
document.getElementById('d1').innerHTML = document.getElementById('ctrl_ball_size_val').value;
document.getElementById('l1').innerHTML = document.getElementById('ctrl_cilindr_height_val').value;
document.getElementById('t1').innerHTML = document.getElementById('stopwatch').value; 
```

如何将数据（数据可以不同）逐行添加到表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:05:20.483

强烈建议避免在此任务中使用 innerHTML。我建议使用 DOM 来实现这一点。

下面是一个关于如何使用 JavaScript 动态创建 HTML 表格的快速示例：

```
var tbl = document.createElement("table");

for(var i=0;i<=10;i++){
    var tr = document.createElement("tr");

    for(var j=0;j<=10;j++){
        var td = document.createElement("td");
        td.innerHTML = i*j;
        tr.appendChild(td);
    }
    tbl.appendChild(tr);
}

document.body.appendChild(tbl); 
```

查看我的[Live 示例](http://jsfiddle.net/fpPmH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T08:09:33.110

如果您使用的是 JQuery 只需使用：

```
$('#tableID > tbody  > tr').each(function() { //Acess $(this) }); 
```

然后你永远不需要它？

根据[jQuery 表格行中的每个循环](https://stackoverflow.com/questions/10431987/jquery-each-loop-in-table-row)，只需一些代码：

```
var table = document.getElementById('tblOne');

var rowLength = table.rows.length;

for(var i=0; i<rowLength; i+=1){
  var row = table.rows[i];

  //your code goes here, looping over every row.
  //cells are accessed as easy

  var cellLength = row.cells.length;
  for(var y=0; y<cellLength; y+=1){
    var cell = row.cells[y];

    //do something with every cell here
  }
} 
```

# c# - 从另一个表单提交对 gridview 的更改

> ID：15860162
> 
> 赞同：0
> 
> 时间：2013-04-07T07:57:09.037
> 
> 标签：c#, visual-studio-2010, gridview

我有一个 form1，其中包含一个绑定到客户表的 gridview，当用户双击 gridview 行时，会显示一个新的 form2 并让用户修改数据。当用户修改数据并单击 form2 中的保存按钮时，它将更改保存到数据库，但更改不会出现在 form1 gridview 中，直到 form1 重新打开。为什么？

```
//FORM1 when user double click on rows to edit 
private void radGridView1_CommandCellClick(object sender, EventArgs e)
{
    GridCommandCellElement gCommand = (sender as GridCommandCellElement);     
    string v = gCommand.RowInfo.Cells["CustomerID"].Value.ToString();
    Form2 f2 = new Form2(v);
    f2.Show(this);
}

//FORM2 when user click on save button
private void button1_Click(object sender, EventArgs e)
{
    using (SqlConnection con = new SqlConnection(WindowsFormsApplication4TELERIK.Properties.Settings.Default.NorthwindConnectionString))
    {
       con.Open();
       using (SqlTransaction tran =con.BeginTransaction(IsolationLevel.Serializable))
       {
          SqlCommand cmd = con.CreateCommand();
          cmd.CommandText = "update customers set CompanyName='" + this.radTextBoxControl1.Text +"'";
          tran.Commit();
          cmd.ExecuteNonQuery();
       }
    }
    this.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:06:02.650

它并不像我们想象的那么简单。

下面的链接中提到了一种简单的方法。只需按照其中提到的步骤操作即可。

[`GridView`从表格 2刷新](https://stackoverflow.com/questions/2395624/how-to-refresh-datagridview-when-closing-child-form)

# html - 引导嵌套布局 - 列分解

> ID：15860170
> 
> 赞同：0
> 
> 时间：2013-04-07T07:57:59.703
> 
> 标签：html, twitter-bootstrap

因为我是 Bootstrap 的新手，并且在需要嵌套列布局的测试站点上工作。我的代码如下

```
 <html class="no-js" lang="en-US">
                <body>
                <div class="container">
                <div id="page" class="row">

            <header id="branding" role="banner" class="span12">
                <nav id="access" role="navigation">
                Menu 
                </nav>
                </header>

            <section id="primary" class="span9">
            <div id="content" role="main">
                <h1 class="entry-title">Some Title</h1> 
                <div class="entry-meta">
                Some Info
            </div><!-- .entry-meta -->

            <div class="row meta-info">

            <div class="post-image span3">
                <ul class="thumbnails">
                image
                </ul>
            </div><!-- .post-image -->

            <div class="post-intro span4">
                some intro text
            </div><!-- .post-intro -->

            <div class="post-desc span2">
                some more info
            </div><!-- .post-desc-->

            </div><!-- meta info-->

            </section>
            </div><!-- #content -->

            </div><!-- row -->
            </div><!-- container -->
            </body>
            </html> 
```

我看到每个人都认为在大显示器上没问题，但是在 1152x864 的屏幕上，span2 上的 post-desc 会崩溃并出现在 span4 的底部。

我需要的是它应该保持响应，并且应该随着浏览器的重新大小而调整。

我的代码正确吗？还是有其他方法可以实现这一目标？

请帮忙。

问候 SAQ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:14:33.693

```
 <div class="row meta-info"> 
```

应该是

```
 <div class="row-fluid meta-info"> 
```

假设您的容器上有一个 max-width 值，它应该可以工作。

# scala - 在这些情况下，Scala 值类将被“装箱”，对吗？

> ID：15860179
> 
> 赞同：9
> 
> 时间：2013-04-07T07:58:40.390
> 
> 标签：scala, memory-management

如果我有这个值类：

```
class ActionId(val value: Int) extends AnyVal 
```

那么，在下面的所有示例中，都会为值类分配一个对象吗？（它将被“装箱”——它*不会被*简单地解包为一个普通的 32 位整数，对吗？）

1.  一个返回值类的函数——值类逃脱了作用域并因此被“装箱”？

    ```
    def someFunction(): ActionId = {
      ...
      return ActionId(123)
    } 
    ```

2.  一个返回*具有值类成员的对象的*函数——值类逃脱了作用域并因此被“装箱”？

    ```
    case class Post(id: ActionId, ...) { ... }

    def someFunction(): Post = {
      ...
      val somePost = Post(ActionId(123), ...) // ActionId will be "boxed", right?
      return somePost
    } 
    ```

3.  即使*没有返回**具有值类成员的对象*（并没有真正脱离范围），值类仍然会被“装箱”，当它用作另一个类的成员时（作为类中的一个字段，在这个例子中）？*`Post`*

     *```
    def anotherFunction() {
      ...
      val somePost = Post(ActionId(123), ...) // "Boxed" here too, right?

      // ... do something with somePost

      // But don't:  return somePost

      // However some *other* similar functions *do* return `somePost` — so
      // class `Post` must be able to box the ActionId? Hence it's boxed (above)?
    } 
    ```* 

 *与此相关的是[这个答案](https://stackoverflow.com/a/11279421/694469)，它表示*当值类没有逃脱范围*时，它实际上是被内联的。有关详细信息，请参阅Scala 改进过程文档[SIP-15 。](http://docs.scala-lang.org/sips/pending/value-classes.html)然而，据我所知，SIP-15 实际上并没有提到超出范围的值类实例将被“装箱”。但我认为它必须被“装箱”似乎是合理的。（为什么 SIP 没有明确声明如果逃逸会被装箱？）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-07T20:36:28.873

您的所有示例都不会导致拳击。值类仅与泛型、数组以及作为超类/特征类型（例如 Any/AnyVal）一起装箱

它们与泛型一起装箱，因为否则您无法将它们与值区分开来（并且原语无论如何都需要一个盒子）。与 Any 相同，其他超类/特征需要一个框或类型关系错误。

它们用数组装箱，因为数组需要知道内容的类型，但 JVM 不理解“值类型”的概念。所以你最终会得到一个数组，它说它是被装箱的类型，但 Scala 假装是一个值类型的数组；做出了一个决定（基于 Array 之前的问题，当它不仅仅是一个普通的 Java/JVM 数组时）这将导致太多微妙的错误和极端情况。

以下是获得拳击的三种方法的示例：

```
trait Q extends Any {}
class X(val x: String) extends AnyVal with Q {}

// Array
val a = Array(new X("salmon"))   // boxed

// Generic
val b = Option(new X("minnow"))  // boxed

// Upcast
val c = (new X("perch"): Any)    // boxed
val d = (new X("cod"): AnyVal)   // boxed
val e = (new X("herring"): Q)    // boxed 
```

其他一切——通过各种功能传递，等等——不需要装箱，包括你所有的例子。

数组有点特殊，因为您可以存储原语并将它们作为值类再次提取出来，字节码开销为零，但语法开销很大：

```
class Y(val repr: String) extends AnyVal {}
val y1 = new Y("apple")    // unboxed
val y2 = new Y("orange")   // unboxed
val ys: Array[String] = Array(y1.repr, y2.repr)   // no overhead
val y3 = new Y(ys(0))      // no overhead 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-07T09:45:53.333

在这三种情况下，根本不会有拳击。

自己检查很容易：

```
class ActionId(val value: Int) extends AnyVal
object Foo {
  def someFunction(): ActionId = {
    new ActionId(123)
  }
} 
```

现在让我们运行 scalac，我们将有一堆类文件（带有字节码的文件）。我们需要的是 Foo\$。

```
» javap Foo\$ 
Compiled from "Boxing.scala"
public final class Foo$ extends java.lang.Object{
    public static final Foo$ MODULE$;
    public static {};
    public int someFunction();
} 
```

如您所见，即使值类从函数中泄漏，通常也不会被装箱。

```
case class Post(id: ActionId, notion: String)

object Foo2 {
  def someFunction(): Post = {
    Post(new ActionId(123), "So ActionID will be boxed?")
  } 
} 
```

scalac => javap：

```
» javap Post  
Compiled from "Boxing.scala"
public class Post extends java.lang.Object implements scala.Product,scala.Serializable{
    public static scala.Function1 tupled();
    public static scala.Function1 curried();
    public int id();
    public java.lang.String notion();
    public Post copy(int, java.lang.String);
    public int copy$default$1();
    public java.lang.String copy$default$2();
    public java.lang.String productPrefix();
    public int productArity();
    public java.lang.Object productElement(int);
    public scala.collection.Iterator productIterator();
    public boolean canEqual(java.lang.Object);
    public int hashCode();
    public java.lang.String toString();
    public boolean equals(java.lang.Object);
    public Post(int, java.lang.String);
} 
```

如您所见，此处的 id 表示为纯 int（例如第三种方法）。

最后，如果没有返回具有值类成员的对象（并没有真正脱离范围），值类是否会被装箱？

```
case class Post(id: ActionId, notion: String)

object Foo3 {
  def anotherFunction(): Unit {
    val post = Post(new ActionId(123), "Will be boxed?")
  } 
} 
```

如果我们仔细查看该方法的字节码，我们将看到以下内容：

```
Code:
   Stack=4, Locals=2, Args_size=1
   0:   new #15; //class Post
   3:   dup
   4:   bipush  123
   6:   ldc #17; //String Will be boxed?
   8:   invokespecial   #20; //Method Post."<init>":(ILjava/lang/String;)V
   11:  astore_1
   12:  return
  LocalVariableTable: 
   Start  Length  Slot  Name   Signature
   0      13      0    this       LFoo3$;
   12      0      1    post       LPost; 
```

ActionId 中没有 int 的装箱。如果它会装箱，您会看到类似这样的内容：

```
Code:
   Stack=5, Locals=2, Args_size=1
   0:   new #15; //class Post
   3:   dup
   4:   new #17; //class ActionId
   7:   dup
   8:   bipush  123
   10:  invokespecial   #20; //Method ActionId."<init>":(I)V
   13:  ldc #22; //String Will be boxed?
   15:  invokespecial   #25; //Method Post."<init>":(LActionId;Ljava/lang/String;)V
   18:  astore_1
   19:  return
  LocalVariableTable: 
   Start  Length  Slot  Name   Signature
   0      20      0    this       LFoo3$;
   19      0      1    post       LPost; 
```

你看，区别`bipush 123`在于

```
 4:   new #17; //class ActionId
   7:   dup
   8:   bipush  123
   10:  invokespecial   #20; //Method ActionId."<init>":(I)V 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-23T10:36:14.877

通过一些隐式转换，实际上可以绕过数组问题，而无需 rex-kerr 所需的语法。我将它与[如何减少在 Scala 中创建的对象的数量结合使用？](https://stackoverflow.com/questions/13646243/how-to-reduce-the-number-of-objects-created-in-scala#answer-13646537)

斯卡拉：

```
import scala.language.implicitConversions

class Y(val repr: String) extends AnyVal {}
object Y {
    implicit def stringToY (v:String) = new Y(v)
    implicit def yToString (v:Y) = v.repr
} 
```

主文件：

```
import Y._

val y1 = new Y("apple")    // unboxed
val y2 = new Y("orange")   // unboxed
val ys: Array[String] = Array(y1, y2)   // Implicit cast
val y3:Y = ys(0) 
```*

# php - 带有单词结果的array_fill

> ID：15860185
> 
> 赞同：1
> 
> 时间：2013-04-07T07:59:27.037
> 
> 标签：php, mysql

```
$sql23 = "SELECT * FROM map1pokemon ORDER BY RAND() LIMIT 1;";
$result23 = mysql_query($sql23) or die(mysql_error());
$battle_get23 = mysql_fetch_array($result23);

$sql2 = "SELECT * FROM pokemon WHERE name='".$battle_get23['pokemon']."'";
$result2 = mysql_query($sql2) or die(mysql_error());
$battle_get2 = mysql_fetch_array($result2);

$filler = "SELECT * FROM pokemon WHERE name='Charmander'";
$filler2 = mysql_query($filler) or die(mysql_error());
$filler3 = mysql_fetch_array($filler2);

$pokemon1 = array_fill(1,10,"".$filler3."");
$pokemon2 = array_fill(1,2,"".$battle_get2."");
$pokemon3 = array_merge($pokemon1, $pokemon2);
shuffle($pokemon3);
$pokemon4 = array_shift($pokemon3);

$pic2= mysql_real_escape_string($pokemon4['pic']);
$pic = strip_tags($pic2);

echo "<center>";
echo '<img src="pokemon/'.$pic.'" border=0><p></p>' ; 
```

顶部的查询获取有关每个口袋妖怪的信息，然后我想使用 array_fill 和 array_merge 使其中一个结果更难出现，但现在它不显示混合后口袋妖怪的结果的口袋妖怪，我相信我在混合口袋妖怪时做错了，但不知道为什么？

有人看到我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:17:39.757

这条线似乎没用：

> `$pic2= mysql_real_escape_string($pokemon4['pic']);`

那么，你不显示你想要的东西是合乎逻辑的，因为你不存储你想要的东西。让我们回顾一下您的代码：

> ```
>  $filler = "SELECT * FROM pokemon WHERE name='Charmander'";
>  $filler2 = mysql_query($filler) or die(mysql_error());
>  $filler3 = mysql_fetch_array($filler2); 
> ```

`$filter3`显然是一个包含所有表格列的数组。

> `$pokemon1 = array_fill(1,10,"".$filler3."");`

什么？你用一个字符串连接一个数组？不要使用这种串联技巧，它不会给你带来好的结果。`$pokemon1 = array_fill(1,10,$filler3);`没关系。有点贪心但没关系。

你可以做的一件事是使用随机生成器，它会更容易使用，不那么贪婪和更快。

```
$rand = rand(12);
if($rand <=10){
     $result = $filler3;
}else{
     $result = $battle;
}
echo $result['name']; 
```

# jquery - jQuery - 使用箭头键导航 div 网格

> ID：15860188
> 
> 赞同：3
> 
> 时间：2013-04-07T07:59:59.850
> 
> 标签：jquery, navigation, focus, keyboard-events

我对 HTML、CSS 和 jQuery 还很陌生——虽然我的 HTML 和 CSS 还可以，但我的 jQuery 不太好——我想我正在尝试实现一些相当复杂的东西。

正如您在代码中看到的那样，我构建了一个日历，我希望人们能够使用箭头键在它周围导航，然后按 Enter 键以突出显示一个正方形。我想要的最好的例子是这个[http://jsfiddle.net/BNrBX/](http://jsfiddle.net/BNrBX/)但它非常令人困惑！正如 html 所指出的那样，除了容器 div，我还不足以理解 jQuery 以真正得到所写的内容。

这是日历的 HTML 代码：

```
<div class="calander">

<div class="date"><div class="calandertext">&#60;</div></div>
<div class="month" id="month2"><div class="calandertext">April</div></div>
<div class="date"><div class="calandertext">&#62;</div></div>

<div class="day"><div class="calandertext">M</div></div>
<div class="day"><div class="calandertext">T</div></div>
<div class="day"><div class="calandertext">W</div></div>
<div class="day"><div class="calandertext">T</div></div>
<div class="day"><div class="calandertext">F</div></div>
<div class="day"><div class="calandertext">S</div></div>
<div class="day"><div class="calandertext">S</div></div>

<div class="date"><div class="calandertext"></div></div>
<div class="date"><div class="calandertext">1</div></div>
<div class="date"><div class="calandertext">2</div></div>
<div class="date"><div class="calandertext">3</div></div>
<div class="date"><div class="calandertext">4</div></div>
<div class="date"><div class="calandertext">5</div></div>
<div class="date"><div class="calandertext">6</div></div>

<div class="date"><div class="calandertext">7</div></div>
<div class="date"><div class="calandertext">8</div></div>
<div class="date"><div class="calandertext">9</div></div>
<div class="date"><div class="calandertext">10</div></div>
<div class="date"><div class="calandertext">11</div></div>
<div class="date"><div class="calandertext">12</div></div>
<div class="date"><div class="calandertext">13</div></div>

<div class="date"><div class="calandertext">14</div></div>
<div class="date"><div class="calandertext">15</div></div>
<div class="date"><div class="calandertext">16</div></div>
<div class="date"><div class="calandertext">17</div></div>
<div class="date"><div class="calandertext">18</div></div>
<div class="date"><div class="calandertext">19</div></div>
<div class="date"><div class="calandertext">20</div></div>

<div class="date"><div class="calandertext">21</div></div>
<div class="date"><div class="calandertext">22</div></div>
<div class="date"><div class="calandertext">23</div></div>
<div class="date"><div class="calandertext">24</div></div>
<div class="date"><div class="calandertext">25</div></div>
<div class="date"><div class="calandertext">26</div></div>
<div class="date"><div class="calandertext">27</div></div>

<div class="date"><div class="calandertext">28</div></div>
<div class="date"><div class="calandertext">29</div></div>
<div class="date"><div class="calandertext">30</div></div>
<div class="date"><div class="calandertext"></div></div>
<div class="date"><div class="calandertext"></div></div>
<div class="date"><div class="calandertext"></div></div>
<div class="date"><div class="calandertext"></div></div>

</div> 
```

这是CSS：

```
.calander {
font-size: 0;
    width: 70%
}

.month {
position: relative;
height: 80px;
background-color: #FFE06B;
width: 71.4265%;
display: inline-block;
}

.day {
position: relative;
height: 50px;
background-color: #4DC3F0;
display: inline-block;
width: 14.2853%;
}

.date {
position: relative;
height: 80px;
background-color: #FFE06B;
display: inline-block;
width: 14.2853%;
-webkit-box-sizing: border-box;
   -moz-box-sizing: border-box;
   box-sizing: border-box;
}

.calandertext {
position: absolute;
bottom: 0;
left: 0;
right: 0;
top: 50%;
text-align: center;
line-height: 0;
font-size: 40px;
} 
```

我把两者放在一个 jsfiddle 中：http: [//jsfiddle.net/9SVez/](http://jsfiddle.net/9SVez/)

任何帮助 - 或去哪里的指针 - 都会非常棒。

谢谢！乔什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:27:05.200

它不需要像您正在处理的示例那样困难。该示例非常冗长，并且设计得不是特别好。

在下面的示例中，我连接了箭头事件，使我的代码变得简单的主要部分是`calendarMap`变量。它是一个数组，将所有 div 保存在它们的 x,y 位置，这使我们可以像在 x,y 值上移动一样简单地在地图上移动。

[jsFiddle](http://jsfiddle.net/Tyriar/g9HMf/1/)

```
var position = { x: 0, y: 0 };
var calendarMap = [];

$(document).ready(function () {
    $('.row').each(function () {
        calendarMap.push([]);
        $('.day, .date', this).each(function () {
            calendarMap[calendarMap.length - 1].push($(this));
        });
    });
    highlightCell();
});

$(window).on('keydown', function (e) {
    if (e.keyCode === 37) // left
        moveLeft();
    else if (e.keyCode === 38) // up
        moveUp();
    else if (e.keyCode === 39) // right
        moveRight();
    else if (e.keyCode === 40) // down
        moveDown();
    highlightCell();
});

function moveLeft() {
    position.x--;
    if (position.x < 0)
        position.x = 0;
}

function moveUp() {
    position.y--;
    if (position.y < 0)
        position.y = 0;
}

function moveRight() {
    position.x++;
    if (position.x >= calendarMap[0].length)
        position.x = calendarMap[0].length - 1;
}

function moveDown() {
    position.y++;
    if (position.y >= calendarMap.length)
        position.y = calendarMap.length - 1;
}

function highlightCell() {
    $('.day, .date').removeClass('selected');
    calendarMap[position.y][position.x].addClass('selected');
} 
```

我已经让鼠标事件正常工作，第一行作为你的练习。对于您要处理的鼠标`mouseover`，找出`calendarMap`悬停、设置`position`和调用中的哪个项目`highlightCell()`。对于顶行，您可能想要添加一些自定义属性或其他内容，因为它是只有 3 个单元格的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T08:23:02.653

我编辑了左右箭头的代码：http: [//jsfiddle.net/9SVez/2/](http://jsfiddle.net/9SVez/2/) 它不是“最好的”js，但它应该给你一个提示：）

```
var currentDay=0;
function doSelect(){
    $('#firstDay').nextAll().css({backgroundColor: '#FFE06B'});
   $('#firstDay').nextAll().slice(currentDay,currentDay+1).css({backgroundColor: 'blue'});

}
$(function () {
    $(document).keydown(function(e){
        if (e.keyCode == 37) { 
           //alert( "left pressed" );
            currentDay--;
        }

        if (e.keyCode == 39) { 
           //alert( "right pressed" );
            currentDay++;
        }
        doSelect();
        return false;
    });
   doSelect();

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T08:48:26.137

```
var $date = $('.day.date').not(':has(:empty)'),
    o = {
       38: -7,
       40: 7,
       37: 'prev',
       39: 'next'
    };

$(document).on('keyup', function (e) {
    var dir = o[e.which],
        $active = $('.active').removeClass('active'),
        i = $date.index($active);

    // Enter Key
    if (e.which === 13) {
        $('.selected').removeClass('selected');
        $active.addClass('selected');
        return;
    }

    // Select the target element
    if (!$active.length) {
        $date.first().addClass('active');
        return;
    } else {
        if (dir === 'next' || dir === 'prev') {
            $active[dir]().addClass('active');
        } else {
            $date.eq(dir + i).addClass('active');
        }
    }
}); 
```

[http://jsfiddle.net/eqrNT/](http://jsfiddle.net/eqrNT/)

# linux - 无法创建目录 /home/hadoop/.ssh：权限被拒绝？

> ID：15860189
> 
> 赞同：1
> 
> 时间：2013-04-07T08:00:34.450
> 
> 标签：linux, hadoop, ubuntu-12.04

我在 Ubuntu 操作系统上配置 hadoop。我需要创建 RSA 密钥对以允许 hadoop 与其节点交互，所以我运行以下命令：

```
hadoop@ubuntu:~$ ssh-keygen -t rsa -P "" 
```

然后我得到这个：

```
Generating public/private rsa key pair.
Enter file in which to save the key (/home/hadoop/.ssh/id_rsa):
Could not create directory '/home/hadoop/.ssh': permission denied.
Enter passphrase (empty for no passphrase ):
Enter same passphrase again:
open /home/hadoop/.ssh/id_rsa failed: No such file or directory.
Saving the key failed: /home/hadoop/.ssh/id_rsa. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T08:03:13.967

忘记在家中创建`.ssh`目录？

试试看：

```
mkdir -p ~/.ssh 
```

然后重新运行 ssh-keygen。

也可能你从错误的用户那里创建了 ssh-keys。你使用 sudo 启动了那个 shell？

尝试手动设置 HOME 目录或在提示符中输入正确的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T09:14:57.070

检查您的主目录名称和权限

```
 echo $HOME
             cd ~ ; ls -l 
             ls -l .ssh
             ls -lR .ssh 
```

如果上面的输出没问题并且你有正确的权限，也许你的配额已满

尝试使用“sudo”，看看会发生什么......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-03T23:51:17.850

似乎当前用户不拥有主目录下的内容。

获得所有权如下图所示：

```
admin@mydb22-02:~$ sudo chown admin.admin /home/admin/
admin@mydb22-02:~$ ls -la
total 32
drwxr-xr-x 2 admin admin 4096 Nov  3 23:29 .
drwxr-xr-x 3 admin admin 4096 Dec 23  2012 ..
-rw------- 1 admin admin  191 Feb 13  2013 .bash_history
-rw-r--r-- 1 admin admin  220 Apr  3  2012 .bash_logout
-rw-r--r-- 1 admin admin 3486 Apr  3  2012 .bashrc
-rw-r--r-- 1 admin admin  675 Apr  3  2012 .profile
-rw-r--r-- 1 admin admin    0 Nov  3 23:29 .sudo_as_admin_successful
-rw------- 1 admin admin 4221 Nov  3 20:31 .viminfo 
```

生成密钥现在可以工作，因为在生成非对称密钥后，.ssh 目录现在将由当前用户创建和拥有

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-22T17:04:08.970

```
我在这上面花了大约 1 小时，终于得到了解决方案。这是由于权限问题。您必须为您的“hadoop 用户”使用 chown。

1.首先制作hadoop目录。
光盘 /home
mkdir hadoop
然后检查'ls -l'。它给出的结果如下：
drwxr-xr-x 2 hadoop hadoop 4096 八月 22 22:17 hadoop

2\. sudo chown hadoop.hadoop /home/hadoop/
3\. 然后为密钥生成器运行剩余命令。
```

# php - yii 无法访问 gii - clogrouter 错误

> ID：15860193
> 
> 赞同：0
> 
> 时间：2013-04-07T08:00:44.047
> 
> 标签：php, yii

我刚刚安装了 YII 没有任何问题，但我无法进入 GII。我已取消注释 mywebapp/protected/config/main.php 中的特定行以启用 GII。

```
When I try to go to: localhost/myapp/index.php?r=gii I am redirected to localhost/myapp/index.php?r=gii/default/login. 
```

我没有启用 URL 管理器，它是 Wamp 上的全新安装。

我得到的错误是这样的：

```
Fatal error: Cannot redeclare class CLogRouter in C:\wamp\www\yii\framework\logging\CLogRouter.php on line 53 
```

yii文件夹是安装文件夹（不知道app还在用）。什么可能导致问题以及如何让 GII 工作？感谢您的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:59:42.377

目前尚不清楚您的问题是什么。

重定向到**/gii/default/login**很好。这是您使用密码登录的地方。

您的错误“ *Cannot redeclare class CLogRouter* ”表示您要声明 CLogRouter 两次。这可能发生在您的**protected/config/main.php**中。

但是，我的印象是这个错误与 gii 无关。为什么不轮到您注销（暂时）？

# java - java spring async future 阻塞及时

> ID：15860197
> 
> 赞同：1
> 
> 时间：2013-04-07T08:01:11.820
> 
> 标签：java, spring, asynchronous, blocking

例如，我希望找到一种`@Async`不绝对异步执行方法的方法。例如`@Async`，如果任务仍未完成，我想调用将阻止我的进程最多定义时间的任务。

```
@Async
public Future<ModelObject> doSomething() {
   //here we will block for a max allowed time if task still haven't been completed
} 
```

所以这样的代码将是半异步的，但阻塞时间可以由开发人员控制。

PS：当然我可以通过在有限的时间内简单地阻塞调用线程来实现这一点。但我希望在弹簧层内实现这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:17:55.700

简而言之，不，没有办法配置 Spring 来做到这一点。

`@Async`注释由将工作`AsyncExecutionInterceptor`委托给`AsyncTaskExecutor`. 理论上，您可以编写自己的实现，`AsyncTaskExecutor`但即便如此，也无法使用`@Async`注释将所需的等待时间传递给您的执行程序。即使那样，我也不清楚调用者的界面会是什么样子，因为他们仍然会`Future`取回一个对象。您可能还需要对`Future`对象进行子类化。基本上，当您完成时，您将或多或少地从头开始重新编写整个功能。

您始终可以将返回的对象包装`Future`在您自己的`WaitingFuture`代理中，该代理提供备用 get 实现，尽管即使那样您也无法在被调用方指定等待值：

```
WaitingFuture<ModelObject> future = new WaitingFuture<ModelObject>(service.doSomething());
ModelObject result = future.get(3000); //Instead of throwing a timeout, this impl could just return null if 3 seconds pass with no answer
if(result == null) {
    //Path A
} else {
    //Path B
} 
```

或者，如果您不想编写自己的课程，那么只需抓住`TimeoutException`.

```
Future<ModelObject> future = doSomething();
try {
    ModelObject result = future.get(3000,TimeUnit.MILLISECONDS);
    //Path B
} catch (TimeoutException ex) {
    //Path A
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-20T18:10:42.047

您可以使用返回 Future 的 @Async 方法来做到这一点：

```
 Future<String> futureString = asyncTimeout(10000);
       futureString.get(5000, TimeUnit.MILLISECONDS);

       @Async
       public Future<String> asyncTimeout(long mills) throws InterruptedException {

               return new AsyncResult<String>(
                    sleepAndWake(mills)
               );
       }

        public String sleepAndWake(long mills) throws InterruptedException{
            Thread.sleep(mills);
            return "wake";
        } 
```

# emacs - Elisp：您如何将交互式“r”与交互式“p”结合起来？

> ID：15860200
> 
> 赞同：5
> 
> 时间：2013-04-07T08:01:39.097
> 
> 标签：emacs, elisp

我有一个现有命令 ( `increment-numbers-in-region`)，它被声明`interactive "r"`用于获取区域起点和终点作为参数。我现在想扩展这个命令以获取前缀参数。有没有办法结合`interactive "r"`或者`interactive "p"`我应该以其他方式去做？

我想我可以编写一个`interactive "p"`仅使用的命令，然后从命令体中读取点和标记，但感觉这可能不是最惯用的方式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T08:24:26.473

`C-h``f` `interactive` `RET`

“要获得多个参数，请连接各个字符串，用换行符分隔它们。”

```
(defun increment-numbers-in-region (start end arg)
  (interactive "r\np")
  ...) 
```

# java - 从子类对象访问超字段

> ID：15860206
> 
> 赞同：2
> 
> 时间：2013-04-07T08:02:31.770
> 
> 标签：java, inheritance

这可能是一个奇怪的问题，但我不明白我是如何设法让它工作的。我的意图是从覆盖该字段的对象访问超级字段。首先，什么工作（1）：

```
class Foo {
    protected int i = 0;

}

public class Bar extends Foo {
    int i = 1;
    Foo f() {
        return this;
    }
    public static void main (String[] args) {
        Bar b = new Bar();
        System.out.println(b.i);
        System.out.println(b.f().i);
    }
} 
```

我首先尝试使用类似（2）的东西：

```
System.out.println(b.super.i); 
```

这没有用。然后我尝试使用（3）：

```
Foo f() {
    return super;
} 
```

那也没有用。

所以，参考上面编号的部分：

1.  为什么`return this`强制转换为 Foo 返回对 b.super 对象的引用？
2.  在`main`中，我会认为`b.super`是对实例化对象 "b" 的超级引用的引用。有没有办法从包含对象访问对超级对象的引用？也许来自反射，但我不想访问 .class 对象（`b.getClass().getSuper()`），而是包含在 b 中的实例化 Foo。
3.  为什么不`return.super`返回对 b.super 对象的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:11:43.593

> 我的意图是从覆盖该字段的对象访问超级字段。

您没有“覆盖”该领域。您正在创建第二个不相关的同名字段。由此产生的名称冲突是您遇到困难的直接原因。

如果这两个字段不相关，请给它们不同的名称。

另一方面，如果您试图实现多态行为，请将它们转换为方法：

```
class Foo {
    protected int get_i() { return 0; }
}

public class Bar extends Foo {
    @Override
    protected int get_i() { return 1; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T08:05:17.410

您不需要反射，您需要在超类中定义 setter 和 getter 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T08:05:46.853

由于字段不能被覆盖，当您在子类中使用相同的名称时，它们将保持隐藏状态。这就是为什么如果您在子类中重新定义了字段，您将无法访问那些超类字段。

如果你想访问这些，你应该`getters/setters`在超类中提供。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T08:10:05.563

1.  因为字段不是以多态、动态的方式访问的。返回的对象的声明类型是Foo，因此Foo的字段被访问。字段不能被覆盖。在子类中定义`i`会创建另一个字段，该字段恰好与超类中的字段名称相同，因此将其隐藏。
2.  不可能。您几乎不应该直接访问对象的字段。改用方法。
3.  因为那是无效的 Java 代码。`return super`没有意义。`super`不是一个不同的对象。`super`并且`this`是同一个对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-07T08:20:23.847

您的问题已回答：

1.  为什么 return.this 强制转换为 Foo 返回对 b.super 对象的引用？

    *   它没有，确切地说。它返回对“this”的引用，它是 Bar 和 Foo 的一个实例，因为 Bar 扩展了 Foo。
2.  总的来说，我认为 b.super 将是对实例化对象 "b" 的超级引用的引用。有没有办法从包含对象访问对超级对象的引用？也许来自反射，但我不想访问 .class 对象（b.getClass().getSuper()），而是包含在 b 中的实例化 Foo。

    *   b 和 b.super 是一回事。您可以毫无问题地从条形码访问受 Foo 保护的字段
3.  为什么 return.super 不返回对 b.super 对象的引用？

    *   同样， b 和 b.super 是同一个实例。

# asp.net - 如何在 ASP.NET 中将下拉列表选择值作为回发参数发送

> ID：15860207
> 
> 赞同：1
> 
> 时间：2013-04-07T08:02:42.177
> 
> 标签：asp.net, drop-down-menu

我有一个与`IPostBackEventHandler`.

在那个控件里面，我有一个 DropDownList。

这个 DropDownList 应该用它的参数引发回发事件。

```
DropDownList _ddl = new DropDownList();
_ddl.Attributes.Add(HtmlTextWriterAttribute.Onchange.ToString()
    , this.Page.ClientScript.GetPostBackEventReference(this, "this.value")); 
```

我要做的是在回发时获取 DropDownList 的选定值。

```
public void RaisePostBackEvent(string eventArgument)
{
} 
```

当我从 RaisePostBackEvents 收到时，我只得到“this.value”。不是从下拉列表中选择的值。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:10:27.937

为了实现您的目标，分配`ID`给`_ddl`并将其作为参数传递给`GetPostBackEventReference`.

```
DropDownList _ddl = new DropDownList();
_ddl.ID = "MyDropDownList";
_ddl.Attributes.Add(HtmlTextWriterAttribute.Onchange.ToString()
    , this.Page.ClientScript.GetPostBackEventReference(this, _ddl.ID)); 
```

然后，`RaisePostBackEvent`您需要通过其`ID`提供的控件找到您的控件，`eventArgument`并以这种方式获取`SelectedValue`.

```
public void RaisePostBackEvent(string eventArgument)
{
    DropDownList _ddl = FindControl(eventArgument) as DropDownList;
    if (_ddl == null) return;

    string selectedValue = _ddl.SelectedValue;
    // do whatever you need with value
} 
```

为什么不能使用 JavaScript `this.value`？不支持 JavaScript 调用，如果您查看生成的 HTML，您将看到：

```
__doPostBack('ctl02','MyDropDownList'); 
```

其中`__doPostBack`函数如下：

```
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
} 
```

如您所见，参数`recipient`等于用户控件的参数。当你通过电话时，它就到了。将值分配给隐藏字段，然后与表单一起提交。这是调用的第二个参数。`ctl02``UniqueID``this``GetPostBackEventReference``eventArgument``__EVENTARGUMENT``GetPostBackEventReference`

所以第二个参数`GetPostBackEventReference`总是被内部类 `System.Web.UI.Util.QuoteJScriptString`方法编码为字符串。

# ios - 使用全局变量时出错

> ID：15860211
> 
> 赞同：0
> 
> 时间：2013-04-07T08:03:27.003
> 
> 标签：ios, objective-c, global-variables

我的程序中有 2 个类，第一类是 class1，第二类是 class2。我想在类 1 中创建和初始化全局变量并在类 2 中使用，但编译器给了我这个错误 XD：

```
Undefined symbols for architecture i386:
  "_saeid", referenced from:
      -[class2 viewDidLoad] in class2.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我在 class1 中创建全局变量并以这种方式在 class2 中运行它，但不起作用：

**类1.h**

```
extern int saeid;   // this is global variable

@interface class1 : UITableViewController<UITableViewDataSource,UITableViewDelegate>

@property (nonatomic,strong) IBOutlet UITableView *table;

@end 
```

**类1.m**

```
#import "class1.h"
#import "class2.h"

@implementation class1
{
    int saeid;
}
@synthesize table;

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{  
    int x = (indexPath.row)+1;
    saeid = x;                      //initialize global variable 
    NSLog(@"X & SAEID: %d & %d",x,saeid);
} 
```

**类2.h**

```
#import "class1.h"

@interface class2 : UIViewController<UIScrollViewDelegate>
{    
}

@end 
```

**类2.m**

```
#import "class2.h"

@implementation class2
{
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"Saeid in class2 : %d",saeid);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:18:07.743

这里似乎有些混乱。最重要的是，全局变量不能“在”类中——根据定义，全局变量在任何类之外。因此，如果您真的想要一个全局变量（稍后会详细介绍），那么您需要将`int saeid;`class1.m 中的定义放在类定义之外，并将其放在文件级别。

完成之后，事情仍然无法编译。该语句`extern int saeid;`粗略地对编译器说：“我在其他地方定义了一个名为 saeid 的整数，所以只要假装它存在，让链接器弄清楚如何连接它。” 没有理由在 class1.h 中有这个语句，因为这个全局变量在该文件的任何地方都没有使用。相反，您应该将此 extern 语句放在 class2.m 的顶部附近。它在该文件中使用，因此您需要确保编译器在编译该文件时在某处定义了该变量。

这些步骤应该可以编译您的代码。但是现在你应该停下来想想你是否真的想要一个全局变量。全局变量将您的类联系在一起，并且很难在不影响（并可能破坏）其他类的情况下进行更改。它们使测试代码变得更加困难，并且使阅读代码更加混乱。这里要考虑的另一个选项是创建 saeid 作为`class1`类的属性，并将`class1*`属性添加到`class2`. 然后，当您创建`class2`实例时，传递一个指向现有`class1`实例的指针。实例可以保留该`class2`指针并根据需要使用它来访问 saeid 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T08:07:43.833

在 Objectice-C 中你不能有类变量，只有实例变量。

如果你想拥有一个全局变量，你会写：

```
#import "class1.h"
#import "class2.h"

int saeid;

@implementation class1
{
}
@synthesize table;

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{  
    int x = (indexPath.row)+1;
    saeid = x;                      //initialize global variable 
    NSLog(@"X & SAEID: %d & %d",x,saeid);
} 
```

但这只是一个全局变量，与类无关！

# android - 无法让 GoogleMap OnMarkerClickListener 工作

> ID：15860212
> 
> 赞同：18
> 
> 时间：2013-04-07T08:03:27.183
> 
> 标签：android, google-maps, google-maps-markers

使用 V2 地图。

基本上一切正常，包括添加标记。

但是，我需要在点击标记时采取行动，所以我安装了一个处理程序：

```
thisMap.setOnMarkerClickListener(new GoogleMap.OnMarkerClickListener() {

    @Override public boolean onMarkerClick(Marker marker) {
        //  Take some action here
        return true;
    }

}
); 
```

唯一的问题是 -`onMarkerClick()`根本不会被调用。看不到原因 - 在最初创建地图时尝试创建侦听器，并且在放置标记后也尝试创建侦听器，没有区别。

?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T08:45:51.210

这对我来说很好：

```
GoogleMap mMap;
Marker marker_1; 
```

初始化地图后，添加一个监听器。

```
mMap.setOnMarkerClickListener((OnMarkerClickListener) this); 
```

并称之为

```
/**
 * handle marker click event
 */    
@Override
public boolean onMarkerClick(Marker marker) {
    // TODO Auto-generated method stub
    if(marker.equals(marker_1)){
        Log.w("Click", "test");
        return true;
    }
        return false;           
} 
```

如果它返回“true”，则单击事件正在正确处理。如果单击标记并返回 false，它将像往常一样弹出信息窗口。

根据 Android 文档，如果侦听器已消费事件，则单击的标记返回 true（即不应发生默认行为），否则返回 false（即应发生默认行为）。默认行为是相机移动到地图并显示信息窗口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-24T14:11:17.997

你可以使用这个简单的片段：

```
import com.google.android.gms.maps.GoogleMap.OnMarkerClickListener;

GoogleMap mGoogleMap;
Marker marker_1; 
```

在 onMapReady(GoogleMap googleMap) 添加：

```
mGoogleMap.setOnMarkerClickListener(new OnMarkerClickListener() {
        @Override
        public boolean onMarkerClick(Marker marker) {

            // TODO Auto-generated method stub
            if(marker.equals(marker_1)){
                Log.w("Click", "test");
                return true;
            }
            return false;

        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T08:39:48.510

设法通过使用 OnInfoWindowClickListener 来使其工作。不知道为什么它不会响应标记点击。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-05T04:20:46.503

谷歌地图mMap；

用这个：

mMap.setOnMarkerClickListener((OnMarkerClickListener) this);

而不是 mMap.setOnMarkerClickListener(OnMarkerClickListener);

# database - 功能依赖是 DBMS - 关键

> ID：15860223
> 
> 赞同：1
> 
> 时间：2013-04-07T08:05:36.660
> 
> 标签：database, relational-database, functional-dependencies

我正在阅读 Ramakrishnan 的《数据库管理系统》一书，在与模式细化和范式相关的章节中，我看到一句话说：

```
K is a candidate key for R means that K ----> R , where R is the relation. 
```

我们还有分解规则：

```
If X ---->YZ, then X----->Y and X----->Z 
```

然后，我的问题是，例如让 R=XABCDE 和 X 成为关键。然后，由于 X--->XABCDE，重复使用第二条规则，我们可以说 X-->A，X--->B，等等。那么这意味着 X 决定了所有的属性。但是我在这里很困惑：那么我们不能在表中存在一行，使得对于相同的 X 值，有不同的 A 值。例如，设 X 为人员属性的 id 号，A 为该人员所拥有汽车的型号。那么一个人不能有两辆车，但我们没有这样的限制，它必须能够拥有两辆或更多辆汽车。

我在这里做错了什么？任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:07:15.377

> 例如，设 X 为人员属性的 id 号，A 为该人员所拥有汽车的型号。那么一个人不能有两辆车，但我们没有这样的限制，它必须能够拥有两辆或更多辆汽车。
> 
> 我在这里做错了什么？任何人都可以帮忙吗？

你在开始规范化 R*之前*就出错了。

数据库设计者的部分工作是决定数据库应该存储什么。这与标准化无关。在教科书问题中，这部分是在问题呈现给您之前完成的。

如果从 R{XABCDE} 开始，其中“X”是一个人的 ID 号，“A”是一种汽车，R 的样本数据可能如下所示。

```
person_id   car_model      B  C  D  E
--
1           Buick Wildcat  ...
2           Toyota Corolla ...
3           Honda Accord   ... 
```

或者它可能看起来像这样。

```
person_id   car_model                     B  C  D  E
--
1           Buick Wildcat, Nissan Sentra  ...
2           Toyota Corolla                ...
3           Honda Accord                  ... 
```

或者它可能看起来像这样。

```
person_id   car_model      B  C  D  E
--
1           Buick Wildcat  ...
1           Nissan Sentra  ...
2           Toyota Corolla ...
3           Honda Accord   ... 
```

第一个示例表明您希望每人只存放一辆汽车。这是一个合理的设计决策（除非数据库需要知道每个人拥有多少辆汽车）。大学很少关心你有多少辆车。他们只想知道哪一个应该有停车贴纸。

决定存储什么与规范化无关。

其他示例表明您希望每人存储不止一辆汽车，在这种情况下，您至少需要进行一些规范化（在第二个示例中）或至少重新考虑您选择的主键（在第三个示例中）例子）。

一旦你决定了要存储什么，你就可以开始规范化了。真的，在决定存储什么*之前，*你怎么能开始规范化呢？那是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:11:37.343

在关系 R(XABCDE) 中，如果 X 是一个键，那么对于 X 的任何值，该关系在任何时间点只允许 A、B、C、D 和 E 有一个值。如果该约束与您打算建模的现实不匹配，那么 X 可能是错误的键选择。

# python - 在 Django 1.5 中执行操作和重定向

> ID：15860228
> 
> 赞同：0
> 
> 时间：2013-04-07T08:06:10.247
> 
> 标签：python, django, redirect, get

我的模型中有一个方法，其中我有我的逻辑。我想要一个调用此方法并重定向的视图。

我想它是这样的：

```
class EmailMakePrimary(RedirectView):
    url = reverse('settings')

    def get(self, *args, **kwargs):
        self.make_primary()
        return HttpResponseRedirect(self.url) 
```

我试过了

```
class ArticleCounterRedirectView(RedirectView): 
    def get_redirect_url(self, pk): 
        article = get_object_or_404(Article, pk=pk) 
        article.update_counter() 
        return reverse('product_detail', args=(pk,)) 
```

它工作了几次，但突然停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:04:27.587

如果您要更改服务器上的某些内容，最好使用 POST http 请求到服务器。例如，POST 请求永远不会被缓存。

例如：

```
class EmailMakePrimary(View):
    url = reverse('settings')

    def post(self, *args, **kwargs):
        self.make_primary()
        return HttpResponseRedirect(self.url) 
```

# ruby-on-rails - 如何从 Rails 的视图中调用表单控制器上的方法？

> ID：15860229
> 
> 赞同：2
> 
> 时间：2013-04-07T08:06:17.667
> 
> 标签：ruby-on-rails, ruby

RoR的新手。从我的角度来看，我无法掌握如何在表单控制器上调用简单方法的概念。我想从视图中收集两条信息，在表单控制器上调用一个方法，该方法将根据参数检索一条信息，然后在同一视图或另一个视图上显示该信息。现在，我正在尝试使用表单控制器实例变量来完成新信息的显示——不知道如何刷新视图以显示它，但这是未来的障碍。现在，我可以单击我的提交按钮而不会出现任何错误，但它显然没有击中我的表单控制器方法。这是我的 erb 视图文件：

```
<h1>Enter Required Information</h1>

<%= form_tag (get_hotel_recommendation_path) do %>
  <%= label_tag(:name, "Name:") %>
  <%= text_field_tag(:name) %>
  <%= label_tag(:date, "Date (yyyy-mm-dd):") %>
  <%= text_field_tag(:date) %>
  <%= submit_tag("Submit") %><br><br>
  <%= label_tag(:recommendation, "Recommendation:") %>
  <%= @recommended_hotel_name %>
<% end %> 
```

这是我的表单控制器代码：

```
class RecommendHotelController < ApplicationController

  @recommended_hotel_name = ''

  def collect_info

  end

  def get_hotel_recommendation
    @recommended_hotel_name = Member.recommended_hotel_name( params[:name], params[:date] )
  end

end 
```

我真的只是想要一种简单易行的方法来做到这一点——不一定是最好的。我只需要一个快速的 UI 来演示我的模型代码。我需要尽快完成它。

新表单控制器代码：

```
class RecommendHotelController < ApplicationController

  def collect_info
  end

  def get_hotel_recommendation
    redirect_to recommend_hotel_path
  end

  protected

    helper_method :recommended_hotel_name
    def recommended_hotel_name
      unless (params[:name].nil?)
        Member.recommended_hotel_name(params[:name], params[:date])
      end
    end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:25:11.687

一旦控制器移交给视图，就没有回头调用其他方法了。控制器的工作是提前准备好视图可能需要的一切。一旦进入`render`阶段，就无法调用控制器方法。

例外情况是*可以*调用的辅助方法。您需要明确声明要在视图中使用的任何方法。举个例子：

```
helper_method :get_hotel_recommendation
def get_hotel_recommendation
  # ...
end 
```

辅助方法也可以位于关联的辅助模块中，如果它们*仅*在视图中使用，最好将它们放在那里。

在您的情况下，如果您只使用一次，您可能应该跳过对实例变量的赋值并只返回有问题的对象。该视图将如下所示：

```
<%= recommended_hotel_name %> 
```

调整后的控制器方法：

```
class RecommendHotelController < ApplicationController
protected
  helper_method :recommended_hotel_name
  def recommended_hotel_name
    Member.recommended_hotel_name(params[:name], params[:date])
  end
end 
```

值得注意的是，`@recommended_hotel_name = ''`在类上下文中声明可能不是您想要的。这将创建一个类变量，而不是实例变量。控制器中的实例变量必须在主要操作方法或方法内定义`before_filter`。还要记住实例变量是`nil`默认的，所以不需要先初始化它们。一个空字符串，`nil`在视图中使用时是等效的，里面的所有内容`<%= ... %>`都会自动为您转换为字符串。

另一件需要注意的事情是在方法名称和它的参数之间留一个空格。它应该是`form_tag(...)`而不是`form_tag (...)`。通常这并没有什么不同，Ruby 可以非常宽松，但有时它会巧妙地改变参数的解释方式，从而在您尝试诊断问题时导致很多混乱。从风格上讲，只有关键字 like `if`,`while`和`case`在括号前有一个空格，因为这些不是方法调用。

至于为什么您的表格不起作用，目前尚不清楚。这些参数应该按照您的意愿提交，但也许您没有得到正确的路由。请记住，除非您正在做一些奇特的事情，否则最好坚持使用标准、、、`index`和名称。在这种情况下，您可能应该将其定义为显示多条记录或始终为一条记录。`new``show``edit``index``show`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T08:16:27.250

`params`您可以从数组中的表单提交中获取所有信息。但是，从您的示例中，我建议使用：form_for 而不是使用单独的 form_tags。

# android - 如何从本机代码中获得自然（默认）的 android 设备方向？

> ID：15860231
> 
> 赞同：0
> 
> 时间：2013-04-07T08:06:36.287
> 
> 标签：android, native-activity

我在我的应用程序中使用加速度计，但在几个设备上，传感器轴不同（取决于默认设备方向是纵向还是横向）。在 AndroidMaifest.xml 中：

```
<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="10" />
...
android:screenOrientation="portrait" 
```

如何从本机代码获取默认设备方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:12:29.673

检查 OnCreate() 中设备的当前方向（或进行初始化的函数），然后根据方向设置传感器的轴。

按照以下链接查看如何获取 android 设备的当前方向：

[在 Android 手机上检查方向](https://stackoverflow.com/questions/2795833/check-orientation-on-android-phone)

[如何检测android设备的方向？](https://stackoverflow.com/questions/5112118/how-to-detect-orientation-of-android-device)

希望这有帮助。如果没有，请发表评论以分享您问题的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-12T16:28:27.217

如果有人仍然对获得初始/默认屏幕方向的纯本机解决方案感兴趣，请使用下面的代码。

有关相关 JAVA 方法的更多信息：

[https://developer.android.com/reference/android/view/Display.html#getRotation()](https://developer.android.com/reference/android/view/Display.html#getRotation())

```
int get_inital_screen_orientation(struct android_app * app){

    JavaVM *lJavaVM = app->activity->vm;
    JNIEnv *lJNIEnv = app->activity->env;
    jobject n_instance = app->activity->clazz;

    lJavaVM->AttachCurrentThread(&lJNIEnv, 0);

    int rotation = -1;

    if (lJNIEnv) {
        jclass c_clazz = lJNIEnv->GetObjectClass(n_instance);
        jclass c_windowManager = lJNIEnv->FindClass("android/view/WindowManager");
        jclass c_display = lJNIEnv->FindClass("android/view/Display");
        jmethodID getWindowManager = lJNIEnv->GetMethodID(c_clazz, "getWindowManager", "()Landroid/view/WindowManager;");
        jmethodID getDefaultDisplay = lJNIEnv->GetMethodID(c_windowManager,"getDefaultDisplay","()Landroid/view/Display;");
        jmethodID getRotation = lJNIEnv->GetMethodID(c_display, "getRotation", "()I");
        jobject windowManager = lJNIEnv->CallObjectMethod(n_instance, getWindowManager);
        jobject display = lJNIEnv->CallObjectMethod(windowManager, getDefaultDisplay);
        rotation = lJNIEnv->CallIntMethod(display, getRotation);
        lJavaVM->DetachCurrentThread();
    }
    return rotation;

} 
```

# parsing - 有没有关于 MSKLC .klc 文件格式的文档？

> ID：15860233
> 
> 赞同：4
> 
> 时间：2013-04-07T08:06:47.523
> 
> 标签：parsing, keyboard

我需要从 msklc 解析 .klc 文件，但我找不到任何关于它的格式的文档。我知道这种格式很简单，但我有一些误解。那么我在哪里可以找到有关它的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:38:28.043

我在键盘布局工具中找到了一些代码，可能会对您有所帮助。我已经把它贴在[这里](http://pastebin.com/UXc1ub4V)了。我使用 il-spy 从 exe 中提取了它。

显然，代码会为您解析 klc 文件。

我还没有测试过，但它可以作为一个起点。

# java - 在 PHP 中执行 java 类

> ID：15860236
> 
> 赞同：1
> 
> 时间：2013-04-07T08:07:10.407
> 
> 标签：java, php

我想调用一个java程序并在stdout中获取它的输出。我遵循了 [stackoverflow](https://stackoverflow.com/questions/2128619/run-java-class-file-from-php-script-on-a-website)中的建议。但它不起作用。

我已将类文件添加到我的 CLASSPATH。我可以正确执行cmd中的命令如下：

![在此处输入图像描述](https://i.stack.imgur.com/D4vQR.png)

在我的 PHP 文件中，我调用这个程序

```
exec("java Hello", $output);
print_r($output); 
```

它只产生：

```
Array() 
```

问题是什么？我怎样才能解决这个问题？

ps：你好是一个演示程序，实际上我要调用的程序要复杂得多，在我的机器（i5 4G）上可能需要2秒或更长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:07:03.370

我建议使用这里的 Java/PHP 桥：http: [//php-java-bridge.sourceforge.net/pjb/](http://php-java-bridge.sourceforge.net/pjb/) 它很容易安装并且运行良好。

另外，我建议使用以下链接下载它。（与下载->文档中的链接相同）

[http://sourceforge.net/projects/php-java-bridge/files/Binary%20package/php-java-bridge_6.2.1/php-java-bridge_6.2.1_documentation.zip/download](http://sourceforge.net/projects/php-java-bridge/files/Binary%20package/php-java-bridge_6.2.1/php-java-bridge_6.2.1_documentation.zip/download)

该文件是 JavaBridge.war。您可能希望将 Tomcat 用于 Java EE 容器。设置 Tomcat 后，您只需将此文件放在 webapps 文件夹中即可安装。

如果你想经常在 PHP 中使用 java 类，这是我所知道的最好的方法，我已经尝试了很多。Resin 也可以使用，但它与我的邮件服务器不兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-28T19:11:37.197

试试这个：

```
exec('java -cp .:/path/to/folder/of/your/file Hello 2>&1', $output);
print_r($output); 
```

需要`2>&1`显示错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T08:18:40.443

好吧，它产生数组对吗？所以改为`print_r($output)`尝试`print($output[0])`在我的控制台上输出“Hello World”：D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T08:29:27.650

试管[_](http://www.php.net/manual/en/function.proc-open.php)

```
$command = 'java Hello';
$descriptorspec = array(
    1 => array(
        'pipe', 'w'
    )
);
$process = proc_open($command, $descriptorspec, $pipes);
if (!is_resource($process)) {
    exit("failed to create process");
}
$content = stream_get_contents($pipes[1]);
fclose($pipes[1]);
if (proc_close($process) === 0) {
    print_r($content);
}else{
    exit("failed to execute Hello");
} 
```

# oracle - 如何识别哪一列发生了变化

> ID：15860238
> 
> 赞同：0
> 
> 时间：2013-04-07T08:07:33.780
> 
> 标签：oracle, plsql, triggers

是否有一种有效的方法可以使用触发器来识别 Oracle 表中的哪一列发生了变化？如何检查是否只有一列（感兴趣的）或所有其他列也发生了变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:08:10.153

As the post Alex Pole pointed in your comments states, you could use the UPDATING function.

But you can also develop different triggers for updating specific columns with "[BEFORE UPDATE OF](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/create_trigger.htm#BABGDFBI)" clause, witch is the optimal option if there is no code to share among the actions for the involved columns.

# automated-tests - 在 TestNG Ant 任务中执行套件时，TestNG 测试套件中的并行“类”不起作用

> ID：15860241
> 
> 赞同：1
> 
> 时间：2013-04-07T08:07:54.377
> 
> 标签：automated-tests, testng, selenium-grid

我设置了 Selenium grid2，它适用于以下并行 TestNG 测试套件：

```
<!DOCTYPE suite SYSTEM "http://beust.com/testng/testng-1.0.dtd" >
    <suite name="Sample Test Suite" parallel="classes" thread-count="2">
    <test name="Test in Chrome" preserve-order="true">
        <parameter name="browser" value="chrome" />
        <classes>
            <class name="testCases.SampleCase1" />
            <class name="testCases.SampleCase2" />
        </classes>
    </test>
</suite> 
```

但是当我在 TestNG Ant 任务中执行测试时，并行不再起作用。

在我使用“测试”更改测试套件文件中的并行模式后，它再次起作用，如下所示：

```
<!DOCTYPE suite SYSTEM "http://beust.com/testng/testng-1.0.dtd" >

<suite name="Sample Test Suite" parallel="tests" thread-count="2">
    <test name="Test1 in Chrome" preserve-order="true">
        <parameter name="browser" value="chrome" />
        <classes>
            <class name="testCases.SampleCase1" />
        </classes>
    </test>
    <test name="Test2 in Chrome" preserve-order="true">
        <parameter name="browser" value="chrome" />
        <classes>
            <class name="testCases.SampleCase2" />
        </classes>
    </test>
</suite> 
```

那么这是否意味着 TestNG ant 任务不支持“类”并行测试套件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:13:06.003

将 tsetng.jar 从版本 6.2 替换为 6.8 后，此问题得到解决。

# regex - Jersey - @path 中的正则表达式

> ID：15860243
> 
> 赞同：0
> 
> 时间：2013-04-07T08:08:01.053
> 
> 标签：regex, jersey

我正在为其中一种资源使用以下注释：

```
@Path ("/{path: [a-zA-Z0-9_/.]+}/rename") 
```

它运行良好，只是我没有收到任何特殊字符，例如空格 (%20)。我应该在正则表达式中添加什么以允许所有 unicode 字符？

# susy-compass - Mixin“with-grid-settings”不接受内容块

> ID：15860248
> 
> 赞同：2
> 
> 时间：2013-04-07T08:09:12.907
> 
> 标签：susy-compass

Mixin“with-grid-settings”不接受内容块。

试图解决这个问题，搜索它，但找不到任何信息。

谢谢，伊利亚

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T02:36:55.023

听起来您可能正在尝试使用不兼容的 sass 版本。如果你使用的是 Ruby 2.0，你应该尝试将你的 sass gem 升级到 3.2.7。

# android - 硬件键盘崩溃应用程序

> ID：15860254
> 
> 赞同：0
> 
> 时间：2013-04-07T08:10:16.330
> 
> 标签：android

我注意到在我的应用程序中，当我添加硬件键盘时，应用程序会关闭。由于这在其他应用程序中不会发生，我假设有一个我不知道的解决方案。崩溃的错误日志如下。任何解决方案的想法？

```
04-07 02:55:07.885 I/Process (4121): Sending signal. PID: 4121 SIG: 9
04-07 02:55:07.915 W/InputDispatcher(498): channel '41c28930 com.prapps.inventory/com.prapps.inventory.InventoryActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x9
04-07 02:55:07.915 E/InputDispatcher(498): channel '41c28930 com.prapps.inventory/com.prapps.inventory.InventoryActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
04-07 02:55:07.925 W/InputDispatcher(498): Attempted to unregister already unregistered input channel '41c28930 com.prapps.inventory/com.prapps.inventory.InventoryActivity (server)'
04-07 02:55:07.925 I/ActivityManager(498): Process com.prapps.inventory (pid 4121) has died.
04-07 02:55:07.925 W/ActivityManager(498): Force removing ActivityRecord{416c8930 u0 com.prapps.inventory/.InventoryActivity}: app died, no saved state
04-07 02:55:07.925 I/WindowState(498): WIN DEATH: Window{41c28930 u0 com.prapps.inventory/com.prapps.inventory.InventoryActivity}
04-07 02:55:08.015 W/InputMethodManagerService(498): Got RemoteException sending setActive(false) notification to pid 4121 uid 10037 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:37:20.557

我相信您正在注销您的键盘两次，因此`"Attempted to unregister already unregistered input channel"`. 为了解决这个问题，我建议您检查您的代码并尝试查找对 unregister 方法的调用并将其删除（可能是第二次调用）。

我希望这有帮助。

# ios - iOS AES 数据/字符串转换

> ID：15860255
> 
> 赞同：1
> 
> 时间：2013-04-07T08:10:18.163
> 
> 标签：ios, nsstring, nsdata

我在 iphone 上使用了之前提到的关于 AES 加密的提示。

```
 NSString *mystr= [[self encryptString:[message valueForKey:@"message"] withKey:@"password"] hexadecimalString];
    NSData *mydata= [self encryptString:[message valueForKey:@"message"] withKey:@"password"];
    NSLog (@"Immediate decrypt data: %@",[self decryptData:mydata withKey:@"password"]);
    NSLog (@"Immediate decrypt string: %@",[self decryptData:[mystr dataUsingEncoding:NSUTF8StringEncoding] withKey:@"password"]); 
```

第一个 NSLog 正确解码字符串，第二个返回 null。此类中的方法：

```
+ (NSData*) encryptString:(NSString*)plaintext withKey:(NSString*)key {
return [[plaintext dataUsingEncoding:NSUTF8StringEncoding]   AES256EncryptWithKey:key];
}

+ (NSString*) decryptData:(NSData*)ciphertext withKey:(NSString*)key {
return [[NSString alloc] initWithData:[ciphertext AES256DecryptWithKey:key]
                              encoding:NSUTF8StringEncoding] ;
} 
```

和 NSData 的标头（加密）

```
- (NSData *)AES256EncryptWithKey:(NSString *)key;
- (NSData *)AES256DecryptWithKey:(NSString *)key; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:26:09.297

在你的第一步

```
NSString *mystr= [[self encryptString:[message valueForKey:@"message"] withKey:@"password"] hexadecimalString]; 
```

您使用该方法转换`NSData`为。例如，如果加密的数据是那么是。`NSString``hexadecimalString``01 02 03``mystr``@"010203"`

在你的最后一步

```
NSLog (@"Immediate decrypt string: %@",[self decryptData:[mystr dataUsingEncoding:NSUTF8StringEncoding] withKey:@"password"]); 
```

你转换`NSString`回`NSData`with `dataUsingEncoding:NSUTF8StringEncoding`。例如，`@"010203"`将转换为数据`30 31 30 32 30 33`。

这是两个不同的转换过程，因此您不能期望得到正确的结果。你可能应该做类似的事情

```
NSLog (@"Immediate decrypt string: %@",[self decryptData:[mystr dataFromHexadecimal] withKey:@"password"]); 
```

where`dataFromHexadecimal`是将十六进制字符串转换回`NSData`（与 的逆方法`hexadecimalString`）的方法。

# python - Karatsuba算法不正确的结果

> ID：15860257
> 
> 赞同：0
> 
> 时间：2013-04-07T08:10:37.240
> 
> 标签：python, algorithm, math, multiplication

我只是简单地按照维基[http://en.wikipedia.org/wiki/Karatsuba_algorithm](http://en.wikipedia.org/wiki/Karatsuba_algorithm)上的伪代码 但是这个实现的结果非常不稳定。它有时有效，但在 100*100 的情况下。它确实失败了。我在这里错过了什么？请看一下。

```
from math import *
f = lambda x: (int(x) & 1 and True) and 1
def fast_multiply( x = "100", y = "100"):
    print "input "+x+" | "+y
    int_buff = map( int, [x, y])
    if int_buff[0] < 10 or int_buff[1] < 10:
        #print "lol"
        return int_buff[0]*int_buff[1]

    degree = max( x.__len__(), y.__len__())

    higher_x, lower_x = x[ : int( ceil( len(x) / 2.0))], x[ len(x)/2 +f(len(x)):]
    higher_y, lower_y = y[ : int( ceil( len(y) / 2.0))], y[ len(y)/2 +f(len(y)):]
    #print lower_x+" & "+lower_y
    z0 = fast_multiply(lower_x, lower_y) #z0 = 0
    z1 = fast_multiply(str(int(lower_x)+int(higher_x)), str(int(lower_y)+int(higher_y)))
    z2 = fast_multiply(higher_x, higher_y)
    print "debug "+str(z0)+" "+str(z1)+" "+str(z2)
    return z2*(10**degree) + (z1-z2-z0)*(10**(degree/2))+z0

if __name__ == '__main__':
    print fast_multiply() 
```

我注意到在这种情况下 100*100 z2 将是 100 这是正确的。这给出了 z2*(10**3)=100000 这绝对是错误的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:20:30.153

您使用的伪代码是错误的。问题出在`z2*(10**degree)`. 您应该将基数提高到`2*m`您`m`要计算的位置`int( ceil(len(x) / 2.0))`（`len(x)`并且`len(y)`两者都应该是`degree`）。

我无法抗拒重构它......一点点。我使用了维基定义中的名称。用任意基数实现它很简单，但为了简单起见，我坚持使用 10。

```
def kmult(x, y):
    if min(x, y) < 10:
        return x * y

    m = half_ceil(degree(max(x, y)))

    x1, x0 = decompose(x, m)
    y1, y0 = decompose(y, m)

    z2 = kmult(x1, y1)
    z0 = kmult(x0, y0)
    z1 = kmult(x1 + x0, y1 + y0) - z2 - z0

    xy = z2 * 10**(2*m)  +  z1 * 10**m  +  z0
    return xy

def decompose(x, m):
    return x // 10 ** m, x % 10 ** m

def degree(x):
    return len(str(x))

def half_ceil(n):
    return n // 2 + (n & 1) 
```

测试：

```
print kmult(100, 100)

def test_kmult(r):
    for x, y in [(a, b) for b in range(r+1) for a in range(r+1)]:
        if kmult(x, y) != x * y:
            print('fail')
            break
    else:
        print('success')

test_kmult(100) 
```

结果：

```
10000
success 
```

# php - 如果我知道加密功能，请解密密码

> ID：15860263
> 
> 赞同：-1
> 
> 时间：2013-04-07T08:11:25.083
> 
> 标签：php, codeigniter, encryption

我正在使用 Codeigniter 开发一个系统！我只想知道，如果某人知道我用来生成加密哈希的功能和步骤，是否有可能找出密码是什么？现在我必须生成我的哈希字符串是：

```
$pass = str_split($password, 2);
$hashPass = '';
foreach($pass as $p){
    $hashPass .= md5($p);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:28:57.780

您的散列方法不是散列，这是非常糟糕的主意..您必须散列您的密码字符串！

这是2个非常简单的功能..

```
function hash_my_pass($password){
    return generate_hash($password);
}

function generate_hash($password){
    return hash('sha256', $password . substr($password, 1, 3));
    # In this case I put to hash $password  + some substr of the password.. 
    # Its good when you hash pass to add something secret..
}

function check_password($password, $hashed_pass){
    return generate_hash($password) == $hashed_pass;
}

$password = '123456789';
$hash = hash_my_pass($password);    
echo $hash;#this hash you must keep at your DB.   
#when user login just compare his pass with the hash from your DB
var_dump(check_password($password, $hash)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T14:43:12.033

老实说，如果您在 2013 年没有使用 Bcrypt，那么密码将很容易受到攻击。如果在“加密”方面有任何等级的话，你目前所做的就是相当低的等级。

[我在这个类](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)中使用 CodeIgniter 和 Bcrypt

然后你所要做的就是调用这个文件 bcrypt.php 然后类名是：

```
class Bcrypt extends CI_Controller {............} 
```

请记住，尽管 php 5.5 > 将支持新的密码哈希函数，它将自动使用 Bcrypt，直到出现更强大的方法。[信息在这里](https://wiki.php.net/rfc/password_hash)

祝你好运，最终停止尝试推出自己的“加密/散列”算法/方法/灾难。这样做可能会使您的客户容易受到攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T08:16:54.617

如果他们知道实际的加密方法，他们就更容易破解它。

例如，对于所有散列，都存在[彩虹表](https://de.wikipedia.org/wiki/Rainbow_Table)，它允许快速恢复密码。这就是为什么散列密码通常会被加盐的原因。

`str_split`另一方面，据我所知，它不是哈希函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T12:57:24.223

查看 Ion_auth [http://benedmunds.com/ion_auth/](http://benedmunds.com/ion_auth/)并使用 bcrypt 选项 - 密码散列不是尝试自己创建的东西。

# python - Django循环记录以匹配ID问题，其他选项？

> ID：15860273
> 
> 赞同：0
> 
> 时间：2013-04-07T08:12:43.120
> 
> 标签：python, django, django-models

我通过网关发送 SMS 消息并获得带有 SMS 参考 ID 的回复。

```
12345678-2 
```

我将其存储在我的数据库中。

网关然后调用我的服务器上的一个 URL 与一个交货收据和它所属的文本的 ID...

```
12345678 
```

注意区别！所以这是我需要将 ID 与数据库中的 ID 匹配的问题。出于某种原因，此特定网关仅发回 ID 的第一部分，省略了破折号后的所有内容`-`

我的第一个想法是在存储之前删除数据库中的 ID 而没有破折号，但这对我来说**不是**一个选项，因为需要存储整个内容。其他网关使用此代码我无法更改此功能。

我的第二个选择是通过循环所有记录来匹配下面的 ID。

```
class MessageManager(models.Manager):
    def get_matching_message(self, ref_ID):
        for gateway in Gateway.objects.all():
            try:
                return Message.objects.get(
                    gateway_message_id=ref_ID
                )
            except Message.DoesNotExist:
                pass 
```

但我不能让自己这样做，**它闻起来很糟糕**！

我对其他想法持开放态度？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:45:49.773

如果网关在您的数据库中存储重复项，则此代码可以帮助您：

```
class MessageManager(models.Manager):
    def get_matching_messages(self, ref_id):
        try:
            return Message.objects.filter(gateway_message_id__icontains=ref_id)
        except Message.DoesNotExist:
            pass 
```

这将产生一个查询集，而不是只返回 1 个对象。

否则切换`filter()`并`get()`使用`__iexact`which 将返回 1 个对象并`MultipleObjectsReturned`在有重复项时抛出异常。

```
class MessageManager(models.Manager):
    def get_matching_messages(self, ref_id):
        try:
            return Message.objects.get(gateway_message_id__iexact=ref_id)
        except (Message.DoesNotExist, Message.MultipleObjectsReturned):
            pass 
```

由于您没有使用`gateway`迭代中的任何内容，因此现在可以跳过它，除非`gateway_message_id=ref_ID`应该这样做`gateway.message_id=ref_ID`（注意 .）但是如果没有看到您的模型就很难判断。

我不相信这种气味，但我知道你来自哪里，你面临一个你无法“修复”的问题，因为其他网关依赖于相同的代码，这使得它，嗯，至少可以说是一个麻烦.

# android - 无法通过 TCP/IP 连接 Android ADB

> ID：15860274
> 
> 赞同：9
> 
> 时间：2013-04-07T08:13:14.260
> 
> 标签：android, tcp, adb

我正在尝试让 Android Debug Bridge 通过 wifi 从我的 64 位 Windows 7 台式计算机到我的 Nexus10 工作。我通过 USB 连接设备，然后我按照“[如何通过 TCP 使用 ADB 连接到 Android？”](https://stackoverflow.com/questions/2604727/how-can-i-connect-to-android-with-adb-over-tcp)，但最终出现无法连接的错误消息：

```
C:\adt-bundle\sdk\platform-tools>adb usb
restarting in USB mode

C:\adt-bundle\sdk\platform-tools>adb devices -l
List of devices attached
R32D300NXJV            device product:mantaray model:Nexus_10 device:manta

C:\adt-bundle\sdk\platform-tools>adb tcpip 5555
restarting in TCP mode port: 5555

C:\adt-bundle\sdk\platform-tools>adb connect 192.168.231.2
unable to connect to 192.168.231.2:5555 
```

为了开始调试，我尝试从我的台式计算机 ping Nexus10。两台设备都连接到同一个路由器，台式计算机通过电缆连接，Nexus10 无线连接。然而，我得到了

```
C:\adt-bundle\sdk\platform-tools>ping 192.168.231.2

Pinging 192.168.231.2 with 32 bytes of data:
Reply from 192.168.231.61: Destination host unreachable.
Reply from 192.168.231.61: Destination host unreachable.
Reply from 192.168.231.61: Destination host unreachable.
Reply from 192.168.231.61: Destination host unreachable.

Ping statistics for 192.168.231.2:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss), 
```

返回“Destination host unreachable”的 IP 地址 192.168.231.61 是我的台式计算机的 IP 地址。虽然 ping 不起作用，但我不知道我无法 ping 的事实是我的 ADB 问题的根源还是与问题无关。

我正在运行 Android Debug Bridge 版本 1.0.31。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T09:38:07.660

这一定是网络问题，因为当我通过不同子网上的无线网络连接时，（1）我能够从我的桌面 ping nexus10，并且（2）通过 TCPIP 连接的 ADB 正常。所以我的结论是，当我的桌面/路由器/nexus10 在同一个子网上时，我的桌面/路由器/nexus10 有一些奇怪的路由不兼容，当它们在不同的子网上时消失了。

不管怎么说，还是要谢谢你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-28T10:05:50.777

我的nexus 4 和nexus 10 在与笔记本电脑相同的wifi 上都有问题。我有更多时间尝试使用nexus 4，有帮助的是重新启动手机，或使用“DNS Hostname Changer”重新启动网络，然后我可以再次连接。

不过 Nexus 10 似乎比 Nexus 4 差一些......

# php - 获取不同尺寸的个人资料照片

> ID：15860280
> 
> 赞同：0
> 
> 时间：2013-04-07T08:14:26.733
> 
> 标签：php, facebook-graph-api

这就是我获取个人资料照片的方式。

```
$url = 'https://graph.facebook.com/'.$user_id.'/picture?width=150&height=150&redirect=false&access_token='.$access_token; 
$fb_photos = json_decode( file_get_contents($url) ); 
```

我想获得多个用户的照片。我可以循环并获取照片，我可以更改宽度和高度值。

我如何在不循环的情况下以最佳方式做到这一点？如果我每次都循环，我想它会打很多电话来带来照片的静态网址。

我可以在一个电话中获得那 5 到 10 张个人资料照片吗？我需要不同的尺寸！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:21:35.367

尝试这个...

```
fql?q=SELECT pid,src_big FROM photo WHERE object_id IN (123,456,789) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T08:26:00.117

You can make a Batch Request

[http://developers.facebook.com/blog/post/2011/03/17/batch-requests-in-graph-api/](http://developers.facebook.com/blog/post/2011/03/17/batch-requests-in-graph-api/)

Build up your query into a json array, and then submit it in one request.

# r - 在 cloudera 的 hadoop VM 中安装 R

> ID：15860281
> 
> 赞同：1
> 
> 时间：2013-04-07T08:14:30.667
> 
> 标签：r, hadoop, cloudera

使用 cloudera 的 hadoop 发行版 for virtualbox，我首先更新了 epel：

```
sudo rpm -Uvh http://dl.fedoraproject.org/pub/epel/5/x86/epel-release-5-4.noarch.rpm 
```

通过就好了。但是当我尝试

```
sudo yum install R 
```

我明白了：

```
Error: Package: R-core-2.15.2-1.e15.x86_64 (epel)
    requires: libtcl8.4.so()(64bit)
Error: Package: R-core-2.15.2-1.e15.x86_64 (epel)
    requires: libtk8.4.so() (64bit) 
```

安装就退出了。从这里有什么推荐的步骤吗？尝试从 cran 打开文件时，我也遇到了同样的错误。

* * *

编辑：我终于弄清楚了这个问题。由于我是这种东西的新手，我没有意识到 epel-release... 文件已经过时了。如果你像我一样盲目地遵循一些指南并且他们没有更新 epel 版本，你可以通过访问[http://dl.fedoraproject.org/pub/epel/6/x86_64/](http://dl.fedoraproject.org/pub/epel/6/x86_64/)并搜索 epel-release来检查. 最新版本应该在那里。

通过做：

```
sudo rpm -Uvh http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm

wget http://download2.rstudio.org/rstudio-server-0.97.336-x86_64.rpm
sudo yum install --nogpgcheck rstudio-server-0.97.336-x86_64.rpm 
```

这解决了这个问题。

# jquery - 如何在另一个下拉列表的更改事件中删除和附加下拉列表中的值

> ID：15860283
> 
> 赞同：0
> 
> 时间：2013-04-07T08:14:39.887
> 
> 标签：jquery, select

我想实现以下功能。

将有“n”个“选择”标签，并且在选择值（在更改事件时）时，所选值将从其他“选择”标签中删除。如果用户再次更改当前选定下拉列表中的值，我想在其原始位置的其他“选择”标签中添加先前选定的值。

我能够删除部分并部分附加部分。（需要在其原始位置附加先前的值。）

```
HTML:
<div class="container">
    <input id="preval" class="hidden" type="text" value="" name=""/>
    <select class="selectoption">
        <option value="1">1</option>
        <option value="ab">ab</option>
        <option value="xysd">xysd</option>
        <option value="4">4</option>                
    </select>
</div>
<div class="container">
    <select class="selectoption">
        <option value="1">1</option>
        <option value="ab">ab</option>
        <option value="xysd">xysd</option>
        <option value="4">4</option>                
    </select>
</div>
<div class="container">
    <select class="selectoption">
        <option value="1">1</option>
        <option value="ab">ab</option>
        <option value="xysd">xysd</option>
        <option value="4">4</option>                
    </select>
</div>

CSS:

.hidden{
    display:none;
}

JAVASCRIPT:
$(document).ready(function(){

    $(".selectoption").change(function(e){
                var currentvalue = $(e.currentTarget).val();    
    /*to remove selected option from other drop down list  */ $('.selectoption').not($(e.currentTarget)).children('option[value='+currentvalue+']').remove();
            var currindex = $(e.currentTarget).index();
            var prevval = $('#preval').val();       
            var previndex = $('#preval').attr("name");

        $('#preval').val(currentvalue);
        $('#preval').attr('name',previndex);
        /*apped previous value */
        if(previndex == currindex){
                    $('.selectoption').not($(e.currentTarget)).append('<option value='+prevval+'>'+prevval+'</option>');                    
                }
    });        
});

JSFiddle:
http://jsfiddle.net/GG3S5/1/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:37:54.353

Please simplify your question next time, do you want to hide the selected `<option>` in other `<select>`?

Hope this help, [http://jsfiddle.net/GG3S5/9/](http://jsfiddle.net/GG3S5/9/)

# jquery - setTimeout 不适用于延迟

> ID：15860288
> 
> 赞同：1
> 
> 时间：2013-04-07T08:15:30.360
> 
> 标签：jquery, fancybox, settimeout, delay

我有一个用户定义的函数，我想延迟它的执行。想延迟花式（），我正在使用 setTimeout。但它立即运行。我也设置了不同的时间延迟，但没有效果。还有其他方法还是我用错了？？请帮忙。

提前致谢。阿里

```
$('a.vid').click(function(){

        setTimeout(fancy(this) ,2000 );

});

function fancy(that){

            var videoFile = $(that).attr('videofile');
            var videoWidth = Number($(that).attr('videowidth'));
            var videoHeight =Number( $(that).attr('videoheight'));

            var videoCode = '<video width="'+videoWidth+'" height="'+videoHeight+'" controls autoplay autobuffer><source src="includes/video/'+videoFile+'.ogv" type="video/ogg" /><source src="includes/video/'+videoFile+'.mp4" type="video/mp4" /><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+videoWidth+'" height="'+(videoHeight+40)+'" id="lynda_video_player" align="middle"><param name="allowScriptAccess" value="sameDomain"><param name="allowFullScreen" value="true"><param name="movie" value="lynda_video_player.swf?videoFile=includes/video/'+videoFile+'.mp4&amp;skinFile=lynda_video_skin.swf&amp;videoFileWidth='+videoWidth+'&amp;videoFileHeight='+videoHeight+'"><param name="quality" value="high"><param name="wmode" value="transparent"><param name="scale" value="noscale"><param name="salign" value="lt"><embed src="lynda_video_player.swf?videoFile=includes/video/'+videoFile+'.mp4&amp;skinFile=lynda_video_skin.swf&amp;videoFileWidth='+videoWidth+'&amp;videoFileHeight='+videoHeight+'" quality="high" width="'+videoWidth+'" height="'+(videoHeight+40)+'" name="lynda_video_player" align="middle" allowscriptaccess="sameDomain" type="application/x-shockwave-flash" scale="noscale" salign="lt" wmode="transparent" allowfullscreen="true" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed></object></video>';

            $('#videoPlayer').html(videoCode);

            $.fancybox({

                'transitionIn' : 'fade',
                'transitionOut' : 'fade',
                'overlayColor' : '#000',
                'overlayOpacity' : '.6',
                'href' : '#videoPlayer'

                });

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T08:18:43.827

利用

```
setTimeout(function() {
fancy(this);
}, 2000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T08:19:21.263

您必须将匿名函数传递给 setTimeout，因此正确的形式是：

```
setTimeout(function() {fancy(this)}, delay); 
```

**一路走来**

如果你有一个函数**delayfunction()**（没有参数），下面是可以的

```
setTimeout(delayfunction, delay); //note  no `()` 
```

如果你想向函数发送参数，你必须调用一个匿名函数，然后它会调用你想要的函数。

```
setTimeout(function() {

    delayfunction('parms');

}, 2000); 
```

重复：[为什么我使用 setTimeout 时立即执行该方法？](https://stackoverflow.com/questions/7137401/why-is-the-method-executed-immediately-when-i-use-settimeout)

# c# - 有没有办法在 Visual Studio 中将参考 dll 转换为非参考 dll

> ID：15860289
> 
> 赞同：0
> 
> 时间：2013-04-07T08:15:37.717
> 
> 标签：c#, visual-studio, dll

我的项目中有一个 DLL 文件 (cf.dll)。它有一些加密和解密字符串 To/From 文件的方法。

**我的“cf.dll”有一些方法：**

> 写“mystring”---to-->>新的加密dll
> 
> 和
> 
> 读取加密的 dll ---to--->> "mystring"

现在我想发布我的项目，但如果最终用户在他/她的视觉工作室中使用我的 dll（通过引用 dll），他/她可以解密我的加密文件。

另一方面，我在我发布的项目中需要这个 dll，因为我的项目有时会使用他们的方法。

**现在我的问题是：** 如何将这个已发布的 dll（cf.dll）更改为非引用 dll，以防止它被任何黑客攻击。

* * *

**编辑（更多细节）：**

我想做的事：

我想将一些连接字符串（作为数据表）加密到一个文件中并再次读取这个文件。

我有一个 dll 文件来完成这项工作。它是**cf.dll**。它有一些加密和解密的方法。

**加密工作流程>**

> **DatatTable** *------to----->>* **Xml as String** *------通过cf.dll方法到-------->>* **enc.dll**

**解密工作流程**

> **enc.dll** *------通过cf.dll方法到------>>* **Xml as String** *------到----->>* **DataTable**

**一切正常**，并创建了加密文件 (enc.dll)。

**但是**，如果最终用户在 Visual Studio 的新项目中使用我的魔法 DLL (cf.dll)（通过引用它），他/她可以解密我的加密文件 (enc.dll) 并破解我的程序。

所以，我想通过将我的 DLL (cf.dll) 更改为非引用 DLL**或**使用其他安全解决方案来防止这种黑客攻击。

* * *

**编辑：**

用于保存连接字符串数据的我的表列：

```
Server    DbName    DbUser    DbPass    FileName 
```

**但是**我可以要求通过这种加密机制保存另一个 DataTable。所以请帮助我通过一个解决方案来保存任何字符串，而不仅仅是一个 ConnectionString。我想要一个来自任何数据的非常安全的加密文件。在我的解决方案中，我将每个对象转换为一个字符串，然后使用我的 dll 方法将其保存为加密文件（我可以做得很好，我的问题如上所述）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T08:33:25.760

您不能将您的 dll 设为“非引用 dll”，但您可以使用“ [internal](http://msdn.microsoft.com/en-us/library/7c5ka91b%28v=vs.110%29.aspx) ”关键字（而不是 public）隐藏所有类/方法。这意味着这些类/方法只能在当前 dll 内部或使用[InternalVisibleTo](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)属性指定的 DLL/EXE 中使用。因此没有人可以直接使用它们，但您应该知道这是托管代码，因此任何人都可以查看您的 DLL 内部并提取您的密钥进行解密，并编写与您在 dll 中相同的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T18:03:44.817

Surprisingly you can not archieve your goal by using a .NET Assembly.

You could even obfuscate your code and it would still be decompilable and reusable. There's nothing which can prevent that. You can rise the bar, but someone - if she want's - will be able to get the information you are trying to hide.

(Have you seen copy-protection mechanisms that really work besides doing something crucial online?)

Always think of the following: If you want to hide information from a user DO NOT DELIVER that information. Everything else is just protection through obfuscation, wich can be cracked with more or less effort.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-17T16:41:56.780

这是一个非常好的问题 RAM。您的问题的一些解决方案：

1）不要制作单独的程序集（DLL），而是将您的DLL代码放在您的EXE中，并使您的DLL的加密/解密功能“内部”（这样任何人都无法从EXE外部使用它） . 然后使用像 Eazfuscator 这样的免费工具来混淆您的 EXE（因为，如果您不这样做，您的代码将很容易反编译和阅读）。

2) 您可以将 DLL 放入您的 EXE 资源中（也可能加密）。然后也许您可以找到一种方法从那里获取它并将其加载到内存中供您的应用程序使用。但是，如果您是初学者，这是相当复杂的事情，而且我不能 100% 确定它在 .NET 中是否可行（我自己没有做过）。不过，我认为这是可行的。

3) 事实是，如果您的代码在客户端机器上执行，那么您无法阻止人们对其进行分析。你能做的最好的事情就是让他们做起来有点（或很多）困难。例如，您可以在 DLL 中添加锁定机制，要求调用者响应随机问题。如果他正确响应，则执行解密。如果不是，则抛出异常，返回 null，或者更好的是，返回错误的输出。随机问题可能是您的 DLL 将在初始化时生成的整数，EXE 应处理此整数以基于某些“秘密”算法生成新整数。然后，EXE 会以某种方式将其“输入”到 DLL 中，并且它的功能将被“解锁”。

4）也许您可以使用反射来分析调用程序程序集，以找到特征甚至作者签名（如果您在 EXE 中放置了一个）。这样，如果 EXE 由您的私钥签名并且签名有效，您就可以执行解密。但这也有点复杂。

5) 我认为有一些称为“EXE 打包程序”的工具可以将您的 EXE 和 DLL 打包到一个 EXE 文件中并在一定程度上保护它们。我还没有使用过其中之一。

6) 您可以在网站上移动加密/解密过程，该过程将以复杂的方式要求身份验证，类似于 (3) 中针对 DLL 描述的过程。这可以保证您的加密算法安全，但身份验证过程仍然可能被分析和黑客攻击。

我建议第三种解决方案，因为它最容易实现。第四种（使用签名代码）是最安全的一种，但实现它需要很多知识（即使我现在也没有知识）。

有一个很好的编码！:)

# windows-phone-8 - WP8 是否支持从媒体库读取视频？

> ID：15860293
> 
> 赞同：0
> 
> 时间：2013-04-07T08:16:49.233
> 
> 标签：windows-phone-8

有没有办法从 Windows Phone 8 上的媒体库中读取视频？如您所知，WP7 仅支持通过 MediaLibrary 类读取图片。:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:28:18.227

我认为在 Windows Phone 8 中也是如此，您可以查看此链接：

[我们可以在 Windows 8 Phone 中使用 MediaLibrary 做什么](http://social.msdn.microsoft.com/Forums/en-US/wptools/thread/acaa4a59-d300-4442-9c2d-3ca794968220/)

还有这个 ：

[MediaLibrary 需要/缺少什么（Windows Phone）](http://sviluppomobile.blogspot.com/2012/09/what-medialibrary-needsis-missing.html)

# mysql - 需要帮助来构建 sql 查询

> ID：15860295
> 
> 赞同：0
> 
> 时间：2013-04-07T08:16:52.177
> 
> 标签：mysql, sql

我有一个具有以下架构的表

**样品表**

```
email        |  name  |  address 
1@gmail.com  |  A     |  CA 
```

我想要具有五个不同静态电子邮件地址的同一组记录

**预期产出**

```
email              |   name   |   address
static1@gmail.com  |   A      |   CA
static2@gmail.com  |   A      |   CA
static3@gmail.com  |   A      |   CA
static4@gmail.com  |   A      |   CA
static5@gmail.com  |   A      |   CA 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:47:19.730

尝试

```
SELECT CONCAT('static', @n := @n + 1, '@', SUBSTRING_INDEX(email, '@', -1)) email,
       `name`,
       address
  FROM table1 CROSS JOIN  
       INFORMATION_SCHEMA.COLUMNS JOIN
       (SELECT @n := 0) n
 LIMIT 5 
```

输出：

```
|             EMAIL | NAME | ADDRESS |
--------------------------------------
| static1@gmail.com |    A |      CA |
| static2@gmail.com |    A |      CA |
| static3@gmail.com |    A |      CA |
| static4@gmail.com |    A |      CA |
| static5@gmail.com |    A |      CA | 
```

**[SQLFiddle](http://sqlfiddle.com/#!2/6fc7a/20)**

# homebrew - 在安装之前如何获取有关 brew 配方的更多信息？

> ID：15860297
> 
> 赞同：61
> 
> 时间：2013-04-07T04:09:50.680
> 
> 标签：homebrew

我知道我可以做类似的事情

```
## brew info FORMULA_NAME
brew info wgetpaste 
```

## 输出

```
wgetpaste: stable 2.20
http://wgetpaste.zlin.dk/
Not installed
https://github.com/mxcl/homebrew/commits/master/Library/Formula/wgetpaste.rb 
```

然后我可以在安装之前按照 url 获取有关公式的一些信息。我们有什么方法可以使用 brew 在命令行中获取此信息？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-25T07:56:35.573

没有。Homebrew 有意让网站充当软件包的文档，而不是维护它的单独副本。

您可以`brew home <formula>`从命令行启动浏览器，或`brew edit <formula>`在编辑器中检查公式的安装说明。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2018-05-30T07:38:22.047

您可以通过以下方式获得包的单行文字描述：

```
brew desc FORMULA-NAME 
```

例如，“brew desc terminator”返回：

终结者：一个窗口中的多个终端

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-30T07:39:39.937

试试这个：

```
brew cask info [package] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-05T16:04:26.793

我`brew [cask] cat [...]`用来查看确切的公式（不必像这里的其他答案所建议的那样对其进行编辑）。它显示了下载的内容、从哪里下载、使用什么校验和、它依赖的其他公式/桶等等。这是一个示例：

```
$ brew cask cat java
cask 'java' do
  version '12.0.2,10:e482c34c86bd4bf8b56c0b35558996b9'
  sha256 '675a739ab89b28a8db89510f87cb2ec3206ec6662fb4b4996264c16c72cdd2a1'

  url "https://download.java.net/java/GA/jdk#{version.before_comma}/#{version.after_colon}/#{version.after_comma.before_colon}/GPL/openjdk-#{version.before_comma}_osx-x64_bin.tar.gz"
  name 'OpenJDK Java Development Kit'
  homepage 'https://openjdk.java.net/'

  artifact "jdk-#{version.before_comma}.jdk", target: "/Library/Java/JavaVirtualMachines/openjdk-#{version.before_comma}.jdk"

  uninstall rmdir: '/Library/Java/JavaVirtualMachines'
end 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-23T18:07:24.460

在自制软件中，您有木桶和配方，它们具有不同的功能，因此：

**对于公式：**

要获取有关公式本身的信息，您可以使用您所做的 ( `brew info [formula name`)。要获取有关您正在安装的应用程序的信息，请使用：

```
brew desc [Formula name] 
```

您也可以通过以下方式访问自制软件的网站以获取公式`brew home [formula name`

**对于木桶：**

可悲的是，木桶（如 Firefox）没有`desc`命令，而您只有`brew cask info`（您使用的）和`brew cask home`

# java - 日期没有比较

> ID：15860301
> 
> 赞同：0
> 
> 时间：2013-04-07T08:17:52.373
> 
> 标签：java, android, date

我正在尝试比较我的 android 应用程序中的日期，但它没有。它始终为空。

这是我的代码。

```
 GregorianCalendar startdate = new GregorianCalendar(2012, 3, 3, 0, 00);
        GregorianCalendar enddate = new GregorianCalendar(2012, 3, 4, 0, 00);

        for (int i = 0; i < newdate.length; i++) {
            try {
                SimpleDateFormat formatter = new SimpleDateFormat(
                        "MM/dd/yyyy k:mm");
                d[i] = formatter.parse(newdate[i]);

                if (startdate.equals(d[i])) {

                    startPoint = i;

                }
                if (enddate.equals(d[i])) {

                    endPoint = i;

                }

                // val2[i]=
                // DateTimeFormat.getFormat("yyyy-MM-dd HH:mm:ss").parse
            } catch (Exception e) {
                // TODO: handle exception
            }

        } 
```

startPoint 和 endpont 始终为空。在这种情况下我不能使用 equal 方法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T08:21:04.880

您正在使用`GregorianCalendar#equals()`检查，并且由于`d[i]`(ie `Date`) 的类型不存在相等性（`GregorianCalendar`不能等于`Date`）。

快速修复（未测试）：

```
if (startdate.getTime().equals(d[i])){
    startPoint=i;
} 
```

# sql - SQL Server 线性和并行查询处理：n！与（2n-2）！/（n-1）！

> ID：15860308
> 
> 赞同：2
> 
> 时间：2013-04-07T08:18:09.367
> 
> 标签：sql, sql-server

我正在阅读 MS 考试书籍考试 70-461：

我注意到一个奇怪的公式来计算连接的线性和并行组合的数量。

```
select A.col5, cum(c.col6) as colsum
from TableA AS A
join B on A.col1 = B.col1
join C on B.col2 = C.col2
where a.col3 = const1 
and b.col4 = const2
group by a.col5 
```

现在

*   线性是`n!`- 很明显；
*   但并行是`(2n-2)!/(n-1)!`<-？！他们是怎么得到的？

# c# - 当属性具有使用c#中的反射的getter方法时如何设置值

> ID：15860309
> 
> 赞同：0
> 
> 时间：2013-04-07T08:18:25.920
> 
> 标签：c#, reflection

```
public class test
{
    public test()
    {
        ting=10;
    }
    private int ting{get;set;}

    public int tring
    {
        get
        {
            return ting;
        }
    }

}

void Main()
{
    var t= new test();

    //Below line giving error
    Console.Write(t.GetType().GetProperty("tring").SetValue(t,20));
} 
```

如何使用反射解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:21:46.430

是的 -*无法*设置该属性。它是只读的，大概是故意的。

如果类的设计者没有给你设置值的机会，你不应该尝试设置它。在许多情况下，这样做是不可能的，因为该值甚至可能不受字段支持（想想`DateTime.Now`），或者可能以某种不可逆的方式计算（根据 Marcin 的回答）。

在这种特殊情况下，如果您*真的很*狡猾，您可以掌握 IL 实现`tring.get`，确定它是从`ting`属性中获取的，然后通过反射调用*该*设置器 - 但此时您将走上一条非常黑暗的道路'几乎肯定会后悔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T08:22:01.603

除非您知道支持字段名称是什么，否则您不能这样做。当你这样做时，你可以只设置字段值，它会反映到属性值。

考虑可能的情况并且您的财产不会由字段支持（像那样）：

```
public string tring
{
    get
    {
        return string.format("foo {0} foo", ting);
    }
} 
```

`set`该属性的期望输出应该是什么？

# iphone - 为什么我不能从 HUD 层移动 iAd？

> ID：15860313
> 
> 赞同：0
> 
> 时间：2013-04-07T08:18:38.487
> 
> 标签：iphone, cocos2d-iphone, iad, adbannerview, ccscene

我有一个包含 iAd 的 HUD 层，该层具有将广告移出屏幕的功能。我使用此代码将 HUD 层添加到我拥有的场景之一：

```
CCScene *scene = [CCScene node];

hudLayer *hud = [hudLayer node];
[scene addChild:hud z:1 tag:5];

MainMenuView *layer = [[[MainMenuView alloc] initWithHud:hud] autorelease];
[scene addChild:layer];

return scene; 
```

hudLayer 是 iAd 类文件名。

现在，当我转到另一个场景时，即使我在另一个场景中添加了 HUD 图层，它仍然存在。我尝试通过使用以下代码移动 iAd 的位置来解决此问题：

```
-(void)hideBanner:(BOOL)sender {
   if (sender) {
      [bannerView setCenter:CGPointMake([CCDirector sharedDirector].winSize.width/2,
                                        320+bannerView.frame.size.height/2)];
   }
   else {
      [bannerView setCenter:CGPointMake([CCDirector sharedDirector].winSize.width/2, 
                                        320-bannerView.frame.size.height/2)];
   }
} 
```

在场景中，我添加了 HUD 层，我有一个按钮，该按钮调用一个将场景切换到另一个场景的函数，并使用以下代码调用上面的函数：

```
hudLayer *a = [[hudLayer alloc] init];
[a hideBanner:YES]; 
```

该函数被调用，但 iAd 没有移动。我尝试从 HUD 图层 init 函数调用相同的函数，并且 iAd 被移动，但在另一个场景调用它时没有移动。

# c# - 检查 radDateTimePicker 的值何时更改

> ID：15860319
> 
> 赞同：0
> 
> 时间：2013-04-07T08:19:15.860
> 
> 标签：c#, winforms, telerik, datetimepicker

我有一个 radDateTimePicker 在表单启动时应该有一个空值，我设置它是这样的：

```
 radDateTimePicker1.NullDate = new DateTime(1900, 1, 1);   
 this.radDateTimePicker1.DateTimePickerElement.SetToNullValue(); 
```

在按钮上单击我检查用户是否已将日期从 1900 年 1 月 1 日更改为 1900 年 1 月 1 日，我将放弃更改，但问题是当用户打开选择器时，它会打开到该日期 1/ 1/1900，让用户循环这些年来到达 2013 年并不方便，所以我将 nullDate 更改为 1/1/2013，所以选择器将在 2013 年 1 月 1 日打开，但如果这个日期是用户目标日期，我放弃了它。

简而言之，我需要一个不会使选择器在 1900 年打开的空值，并且会让我知道用户没有更改值，所以我可以丢弃这个值！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:20:41.883

如果我理解正确，您的要求是在应用程序启动时显示具有空值的日期时间选择器。如果是这样，只需调用 SetToNull 方法 OnLoad：

```
 protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);

        radDateTimePicker1.SetToNullValue();
    } 
```

调用上述方法会将**NullableValue**设置为 null 并且控件的可编辑部分不会显示任何内容（只是设置了此类的**NullText**并且控件失去焦点）。打开控件将默认为今天的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T08:32:54.723

考虑使用[`ShowCheckBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.showcheckbox.aspx)选择器的功能：

```
radDateTimePicker1.ShowCheckBox = true; 
```

读取值时，您可以说：

```
var readInput = radDateTimePicker1.Checked
    ? radDateTimePicker1.Value : (DateTime?)null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T08:25:52.387

I would use a simple class to encapsulate all the data that the user can change, and initialise it to the "starting" data for the form.

Then when the user clicks "OK" for the form, collect the current form data into another instance of that simple class.

Then compare the two classes to see if anything changed, and respond appropriately.

I think this is more flexible and extendible than messing around with individual controls. It means that you can populate all your data controls with either the current user-chosen settings, or with default values if the user hasn't yet selected anything, and it will work either way.

# qt - Qapplication - 移动到线程在 Windows 上不起作用

> ID：15860323
> 
> 赞同：0
> 
> 时间：2013-04-07T08:19:44.423
> 
> 标签：qt

在 main 中，我在我创建的线程中创建一个 QApplication，然后，根据来自用户（来自 cin）的命令，我想在我在线程中创建的 QApplication 实例上使用回调。QApllication 的创建发生在一个名为“StartQtThread”的工作线程上，我在其中获取命令的主函数是主线程。

我的问题是我来自主线程的命令不适用于 qapplication。例如：如果用户输入“z”，我无法在 QApplication 中的地图上放大。总线，因为我在主线程上没有任何反应。我尝试使用“StartQtThread”线程中的放大功能，它可以工作。

尝试使用主线程中的“moveToThread(qApp->thread())”函数，但当前线程没有被更改。

任何人都知道我该如何改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:32:23.637

`thread->moveToThread(obj)`将对象*obj*移动到线程*thread*。代码`moveToThread(qApp->thread())`将主线程的对象移动到另一个线程（这有点奇怪）。GUI 只能在主线程中工作。

# asp.net - asp.NET MVC4 在局部视图中使用局部视图

> ID：15860325
> 
> 赞同：0
> 
> 时间：2013-04-07T08:19:48.733
> 
> 标签：asp.net, asp.net-mvc, partial-views

假设我有 3 个自定义控制器：AController、BController 和 CControler 以及一个默认 HomeController。前三个控制器中的每一个都有一个非常独特的局部视图，让我们将它们命名为 APartial、BPartial、CPartial，它们通过 AFunction、BFunction 和 CFunction 调用，模板如下所示：

```
public ActionResult XFunction
{
    /*put some data into a ViewBag*/
    return PartialView("XPartial");
} 
```

APartial.cshtml、BPartial.cshtml、CPartial.cshtml 分别在`Shared`文件夹中。调用 HomeController 的索引（ActionResult 方法）时，在一个页面中返回所有三个视图的最佳方法是什么。我尝试渲染每个像：

```
using (StringWriter sw = new StringWriter())
{
    ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, "XFunction");
    ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
    viewResult.View.Render(viewContext, sw);

    return MvcHtmlString.Create(sw.GetStringBuilder().ToString());
} 
```

然后将每个放入 ViewBag 的动态变量中，但我觉得必须有一种更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:26:21.040

在您的视图中使用 RenderAction。很好的解释在这里：[http ://www.arrangeactassert.com/when-to-use-html-renderpartial-and-html-renderaction-in-asp-net-mvc-razor-views/](http://www.arrangeactassert.com/when-to-use-html-renderpartial-and-html-renderaction-in-asp-net-mvc-razor-views/)

# php - 进一步过滤我的搜索

> ID：15860329
> 
> 赞同：0
> 
> 时间：2013-04-07T08:20:32.240
> 
> 标签：php, sql, database

我想回显我想要的结果，如何进一步过滤它们？

**例如**, `search x100 y100`, 目前得到数百个结果。我需要进一步过滤这些结果，所以我只得到那些被标记为敌对、待定或友好的结果

我有以下html表单

```
<form action="xysearch.php" method="post">
     <label>X Coord
       <input type="text" name="x" />
      </label>
     <label>Y Coord
       <input type="text" name="y" />
      </label>
     <select name="term">
       <option value="Hostile">Hostile</option>
       <option value="Pending">Pending</option>
       <option value="Friendly">Friendly</option>
      </select>
     <input type="submit" value="Search" />
   </form> 
```

我需要添加到搜索查询中的是一种过滤这些结果的方法，因此只显示在外交下拉列表中选择的选项

到目前为止，我的查询不起作用-我可以获得所有结果，而不仅仅是过滤的结果。

```
<?php

$x = $_POST['x'];
$y = $_POST['y'];
$term = $_POST['term'];

mysql_connect ("localhost","host","pass")  or die (mysql_error());
mysql_select_db ("d_base");

 $res = mysql_query("SELECT * FROM my_table WHERE (x BETWEEN $x -75 AND $x +75) AND (y BETWEEN $y -75 AND $y +75) ");
 $res2 = mysql_query("SELECT dip FROM my_table WHERE dip IN '%$term%' ORDER BY '%$term%' DESC  ");

    echo "<table border='1' align='center' cellpadding='5'>";
    echo "<tr> <th>City Name</th> <th>X</th> <th>Y</th> <th>Diplomacy</th> </tr>";

// loop through results of database query, displaying them in the table

    while($row = mysql_fetch_array( $res, $res2 )) {

// echo out the contents of each row into a table

    echo '<td>' . $row['city'] . '</td>';
    echo '<td>' . $row['x'] . '</td>';
    echo '<td>' . $row['y'] . '</td>';
    echo '<td>' . $row['dip'] . '</td>';
    echo "</tr>";

// close table>

    echo "</table>";

    }

?> 
```

我不太确定我哪里出错了，因为我实际上可以得到结果来回显，只是过滤就是问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:25:36.887

采用：

`"SELECT dip FROM my_table WHERE dip IN '%".$term."%' ORDER BY '".$term."' DESC"`

或者，如果这不起作用：

`"SELECT dip FROM my_table WHERE dip='".$term."' ORDER BY '".$term."' DESC"`

是的，SQL 注入 :) 你很容易受到攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T08:29:19.253

我查看了[mysql_fetch_array 的 PHP 定义，](http://php.net/manual/en/function.mysql-fetch-array.php)它似乎只接受一个结果集，所以如果我是正确的，那么您只是在遍历第一个结果集，即未过滤的结果集。

`array mysql_fetch_array ( resource $result [, int $result_type = MYSQL_BOTH ] )`

为什么不在单个查询中过滤结果？看起来您正在从单个表 (my_table) 中获取项目，对吗？

这是一个有效的[sqlfiddle](http://sqlfiddle.com/#!2/caa62/1/0)：

```
$res = mysql_query("SELECT * FROM my_table WHERE (x BETWEEN $x -75 AND $x +75) AND (y BETWEEN $y -75 AND $y +75) AND dip REGEXP '$term' ORDER BY dip DESC");
while($row = mysql_fetch_array( $res )) {
...
} 
```

请注意，您将通过“|”连接不同的术语 （或）运算符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T09:11:00.790

第一眼看到你的代码：

```
while($row = mysql_fetch_array( $res, $res2 )) { 
```

不正确，因为 $res2 应该是结果类型，而不是查询的结果。

选项包括：

```
while($row = mysql_fetch_array( $res, MYSQL_ASSOC )) {
while($row = mysql_fetch_array( $res, MYSQL_NUM )) {
while($row = mysql_fetch_array( $res, MYSQL_BOTH )) { 
```

我猜你正在尝试实现这样的目标：

```
$res = mysql_query("SELECT * FROM my_table WHERE (x BETWEEN $x -75 AND $x +75) AND  (y BETWEEN $y -75 AND $y +75) AND dip LIKE '%$term%'"); 
```

这意味着这样的代码：

```
<?php

$x = $_POST['x'];
$y = $_POST['y'];
$term = $_POST['term'];

mysql_connect ("localhost","host","pass")  or die (mysql_error());
mysql_select_db ("d_base");

 $res = mysql_query("SELECT * FROM my_table WHERE (x BETWEEN $x -75 AND $x +75) AND  (y BETWEEN $y -75 AND $y +75) AND dip LIKE '%$term%'");

    echo "<table border='1' align='center' cellpadding='5'>";
    echo "<tr> <th>City Name</th> <th>X</th> <th>Y</th> <th>Diplomacy</th> </tr>";

// loop through results of database query, displaying them in the table

    while($row = mysql_fetch_array( $res, MYSQL_ASSOC )) {

// echo out the contents of each row into a table

    echo '<td>' . $row['city'] . '</td>';
    echo '<td>' . $row['x'] . '</td>';
    echo '<td>' . $row['y'] . '</td>';
    echo '<td>' . $row['dip'] . '</td>';
    echo "</tr>";

// close table>

    echo "</table>";

    }

?> 
```

为了获得更好的数据库，我认为您应该将术语存储在单独的表中并进行一些连接：

如果您决定这样做，请以类似于以下方式使用查询：

```
 $res = mysql_query("SELECT * FROM my_table mt LEFT JOIN terms t ON (mt.term_id = t.id) WHERE (x BETWEEN $x -75 AND $x +75) AND  (y BETWEEN $y -75 AND $y +75) AND dip LIKE '%$term%'"); 
```

另一个技巧是使用 PDO。使用 mysql_* - 函数确实并不难。在某种程度上，创建更好、更易读的代码更容易。

# c - 如何使用宏简化以下代码

> ID：15860336
> 
> 赞同：0
> 
> 时间：2013-04-07T08:21:18.610
> 
> 标签：c

```
strcpy(argv[0], arg0)
strcpy(argv[1], arg1)
strcpy(argv[2], arg2)
strcpy(argv[3], arg3)
strcpy(argv[4], arg4)
strcpy(argv[5], arg5)
strcpy(argv[6], arg6)
strcpy(argv[7], arg7)
strcpy(argv[8], arg8)
strcpy(argv[9], arg9) 
```

我知道以下是不正确的，但是使用宏的正确方法是什么？

```
#define ARG(i) arg##i
for (i = 0;i  < 10; i++)    
{    
strcpy(arg[i], ARG(i);    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:24:20.513

与其简化对您的调用序列，`strcpy`不如将您的变量`arg0`, `arg1`, ...转换`arg9`为数组。如果你这样做，你将能够在一个简单的循环中完成整个事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T08:46:07.237

在这种情况下，我建议您使用数组而不是宏。它更干净，并且在运行时没有评估很多条件；

```
char **args[10] = { &arg0, &arg1, &arg2, &arg3, &arg4, &arg5, &arg6, &arg7, &arg8, &arg9 };

for( i = 0; i < 10; i++ ) {
    strcpy( argv[i], *args[i] );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T08:31:08.700

确实不能这样使用`##`。

这可以工作，虽然非常尴尬：

```
#define ARG(i) ((i==0)?arg0:(i==1)?arg1:(i==2)?arg2:(i==3)?arg3:(i==4)?arg4:(i==5)?arg5:(i==6)?arg6:(i==7)?arg7:(i==8)?arg8:(i==9)?arg9:0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T08:49:58.877

使用 BOOST

```
#include <stdio.h>
#include <string.h>
#include <boost/preprocessor.hpp>

#define GEN_DEC(x, i, name) char* BOOST_PP_CAT(name, i);
#define GEN_FUNC(x, i, name) strcpy(argv[i], BOOST_PP_CAT(name, i));

int main(int argc, char* argv[]){
BOOST_PP_REPEAT(10,GEN_DEC,arg)
BOOST_PP_REPEAT(10,GEN_FUNC,arg)

   return 0;
} 
```

命令行 `>gcc -I c:\boost_1_48_0 test.c`

查看 `>gcc -I c:\boost_1_48_0 test.c -E`

输出样本

```
int main(int argc, char* argv[]){
char* arg0; char* arg1; char* arg2; char* arg3; char* arg4; char* arg5; char* ar
g6; char* arg7; char* arg8; char* arg9;
strcpy(argv[0], arg0); strcpy(argv[1], arg1); strcpy(argv[2], arg2); strcpy(argv
[3], arg3); strcpy(argv[4], arg4); strcpy(argv[5], arg5); strcpy(argv[6], arg6);
 strcpy(argv[7], arg7); strcpy(argv[8], arg8); strcpy(argv[9], arg9);

   return 0;
} 
```

# c# - C#：如果我的父级是窗口应用程序并且它正在重定向我的标准输出，则无法读取密钥

> ID：15860337
> 
> 赞同：3
> 
> 时间：2013-04-07T08:21:32.013
> 
> 标签：c#, .net, io-redirection

我正在尝试捕获子控制台应用程序的输出。

*   当父级是控制台应用程序时，一切正常。
*   当父级是 Windows 应用程序时，子级无法运行，并`Console.ReadKey()`在 stdInput 被重定向时表示无法读取密钥。但是，我没有重定向输入（仅重定向输出）。

我在这里想念什么？

子代码（将项目设置为控制台应用程序）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ChildProcess
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            char key = Console.ReadKey().KeyChar;
            Console.Out.WriteLine("stdout");
            Console.Error.WriteLine("stderr");
        }
    }
} 
```

父应用代码：（将项目设置为 windows 应用）

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace RedirectProcessOutput
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            string fileName = @"ChildPRocess.exe";
            string arg = "i";

            string processOutput = "?";

            Process p = new Process();

            p.StartInfo.UseShellExecute = false;
            p.StartInfo.CreateNoWindow = false;
            p.StartInfo.RedirectStandardOutput = true;
            p.StartInfo.RedirectStandardError = false;

            p.StartInfo.FileName = fileName;
            p.StartInfo.Arguments = arg;
            p.Start();

            processOutput = p.StandardOutput.ReadToEnd();

            p.WaitForExit();

            Console.WriteLine("The child process output is:" + processOutput);
        }
    }
} 
```

我期望应用程序即使在父应用程序是窗口应用程序时也能运行而不会崩溃，因为子应用程序应该有自己的控制台，而我没有为此重定向输入。顺便说一句 - 在以下情况下一切正常：

*   孩子没有做“ReadKey”或
*   父母根本没有重定向标准输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:55:52.320

既然当父进程是控制台应用程序时它可以正常工作，为什么不暂时把它变成一个呢？

```
[DllImport("kernel32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool AllocConsole();

[DllImport("kernel32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool FreeConsole();

private static void Main(string[] args)
{
    Process p = new Process();

    p.StartInfo.UseShellExecute = false;
    p.StartInfo.CreateNoWindow = false;
    p.StartInfo.RedirectStandardOutput = true;
    p.StartInfo.RedirectStandardError = false;

    p.StartInfo.FileName = "Child.exe";
    p.StartInfo.Arguments = "i";

    AllocConsole();
    p.Start();
    FreeConsole();

    string processOutput = p.StandardOutput.ReadToEnd();
    p.WaitForExit();

    Debug.WriteLine("The child process output is:" + processOutput);
} 
```

如果你使用`lock`around `AllocConsole`// `Start`，`FreeConsole`你甚至可以启动多个子进程，每个子进程都有自己的控制台窗口。

* * *

这是一个较旧的“解决方案”，无法正常工作。

看看[CreateProcess 标志](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684863.aspx)。不设置 CREATE_NO_WINDOW 不会给你一个新的控制台对象；你需要 CREATE_NEW_CONSOLE。[不，这是错误的；见下文]

不幸的是，这并没有在 .NET API 中公开。`Process.Start`如果你让它使用`ShellExecute`，它会做正确的事情，但是你不能重定向标准输出。我认为您尝试做的事情是不可能的`System.Diagnostics.Process`，您将不得不 P/Invoke `CreateProcess`。

就在昨天，我编写了自己的`System.Diagnostics.Process`替代方案，因为我需要 MS 实现未提供的另一个功能 - 将 stdout 和 stderr 重定向到同一个流。随意重用[我的代码](https://gist.github.com/dgrunwald/5331022)，但请记住它还没有得到太多测试。

我已经用 my 测试了您的示例，`ProcessRunner`如果父进程是控制台应用程序，它可以按预期工作 - 子进程获得自己的新控制台窗口（不重用来自父进程的控制台窗口`System.Diagnostics.Process`），它可以`ReadKey()`从它和 stdout被重定向到父级。

但是如果父进程是一个windows应用程序，这就会崩溃——`ReadKey()`失败；并且`stderr`输出也不可见。（这与 的行为完全相同`System.Diagnostics.Process`，我只是没有意识到这`stderr`也不起作用。原因是您不能只重定向其中一个流 - 一旦`STARTF_USESTDHANDLES`设置，所有流都会被重定向.

现在我不确定如果父应用程序是控制台，它为什么会起作用。也许重定向的 stdin/stderr 句柄指的是当前控制台，而不是`GetStdHandle`调用时当前的控制台。

但如果`GetStdHandle`在 Windows 应用程序中调用，则返回 INVALID_HANDLE。我不确定是否有办法获得创建控制台后有效的句柄。答：不要那样做，只需早点创建控制台（请参阅开头的新解决方案）。

# ubuntu - ubuntu12.10上的Hadoop安装

> ID：15860339
> 
> 赞同：0
> 
> 时间：2013-04-07T08:21:39.813
> 
> 标签：ubuntu, hadoop

我是 Hadoop 的初学者，想在 hadoop 上做最后一年的项目。但第一个问题是在安装上。我读过关于 cloudera 的文章，但它只是令人困惑。我想在 ubuntu 12.10 中为多节点安装 hadoop。请任何人都可以帮助我！另外，如果您可以将我链接到一些不错的 hadoop 教程，那将是最好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:14:52.630

我已经在我的 Ubuntu 12.10 上安装了 Hadoop 1 和 2，没有任何问题，这就是我的做法，希望对您有所帮助：

[http://tuliodomingos.blogspot.com.es/2013/04/installing-apache-hadoop-in-ubuntu-linux.html](http://tuliodomingos.blogspot.com.es/2013/04/installing-apache-hadoop-in-ubuntu-linux.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:12:32.043

以下是在单节点和多节点集群上设置 Hadoop的说明[（1、2](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/) [）](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)。请注意，这些说明适用于旧版本的 Ubuntu，但也适用于 Ubuntu 12.10。

对于 Hadoop 新手，可以下载安装和配置了 Hadoop的VM [（](http://www.mapr.com/products/download)[1、2、3](http://hortonworks.com/products/hortonworks-sandbox/) [）](https://ccp.cloudera.com/display/SUPPORT/Demo+VMs)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T10:08:59.430

我猜 Cloudera 将是最容易安装的。如果您想使用 Apache 站点提供的 Hadoop，那么 Micheal Noll 教程是最容易遵循的。

为了避免网络问题，我在笔记本电脑上安装了 3 个 VirtualBox 并将它们连接在一起，两个作为 Datanode，一个作为 NameNode。为我工作。

但如前所述，请先尝试，然后让我们知道您面临的错误。

# java - java.lang.NoSuchMethodError: org.jboss.logging.Logger.getMessageLogger

> ID：15860344
> 
> 赞同：0
> 
> 时间：2013-04-07T08:22:06.500
> 
> 标签：java, hibernate, jboss

我在我的应用程序中使用 javax 验证。我在项目 pom 文件中添加了以下依赖项。

```
 <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.3.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator-annotation-processor</artifactId>
        <version>4.3.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.logging</groupId>
        <artifactId>jboss-logging</artifactId>
        <version>3.1.3.GA</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.logmanager</groupId>
        <artifactId>jboss-logmanager</artifactId>
        <version>1.4.1.Final</version>
    </dependency>
    <dependency>
       <groupId>org.slf4j</groupId>
       <artifactId>slf4j-api</artifactId>
       <version>1.6.1</version>
    </dependency>
    <dependency>
       <groupId>org.slf4j</groupId>
       <artifactId>slf4j-log4j12</artifactId>
       <version>1.6.1</version>
    </dependency> 
```

当我运行应用程序时，出现以下异常。

```
java.lang.NoSuchMethodError: org.jboss.logging.Logger.getMessageLogger(Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Object;
        at org.hibernate.validator.internal.util.logging.LoggerFactory.make(LoggerFactory.java:28)
        at org.hibernate.validator.internal.util.Version.<clinit>(Version.java:27)
        at org.hibernate.validator.internal.engine.ConfigurationImpl.<clinit>(ConfigurationImpl.java:63)
        at org.hibernate.validator.HibernateValidator.createGenericConfiguration(HibernateValidator.java:41)
        at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:269)
        at javax.validation.Validation.buildDefaultValidatorFactory(Validation.java:111) 
```

我已经尝试过使用和不使用 jboss logging pkgs。

请让我知道我正在犯什么错误以及如何解决它。

# caching - 如何使用共享给用户的静态 URI 在 G-WAN 中禁用微缓存

> ID：15860349
> 
> 赞同：0
> 
> 时间：2013-04-07T08:22:53.333
> 
> 标签：caching, webserver, g-wan

我使用 G-WAN 开发一个网站，我想计算一个具有静态 URI 的页面被调用了多少以显示一些统计信息，但是使用 G-WAN 的自动缓存系统，我的计数器有时是错误的。有没有办法完全禁用这个缓存。我已经使用 G-WAN 提供的 KV 存储开发了一个缓存系统，通过这种方式我可以正确计算和提供缓存页面，所以我真的不需要 G-WAN 的自动缓存系统......如果有人有我感兴趣的问题的解决方案。

干杯热罗姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:56:34.220

这是您可以做什么的示例（假设您仅跟踪特定的 url）：

```
case HDL_AFTER_PARSE:{
    data_t * pp = *(data_t**)get_env(argv,US_SERVER_DATA);
    char *qs=get_env(argv,QUERY_STRING);
    if(qs&&!strncmp(qs,"i_count_those",sizeof("i_count_those")-1)){ 
        ++pp->count;
    }
} break;
//this is obviously code for handler 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:53:15.127

我了解您的要求，但是该主题的创建者的手册和先前的答案非常清楚。

简单地说，由于各种原因，不可能禁用微缓存，解决它的简单方法是为每个请求添加查询字符串或参数：

?req/1

?req/a

您可以忽略自动附加到“查询字符串”的任何内容，仍然使用相同的“页面”或 servlet 进行统计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T19:23:46.217

另一方面，所有呼叫都记录在主机/虚拟主机的日志文件夹中。或者通过使用代码作为谷歌分析。

这里的问题更多的是为什么需要这些统计数据？向用户展示？- 这通常不是用户需要的功能。我相信用户对从微缓存 GWAN 服务器获得快速回答比从另一台服务器获得统计信息的慢速回答更感兴趣。统计数据适合你吗？- 只需使用 GWAN 服务器主机/虚拟主机日志。

如果您确实需要向用户提供特殊反馈，为什么不使用彗星流发送该信息，如[http://gwan.ch/api#comet所述](http://gwan.ch/api#comet)

# javascript - 使用 Javascript 隐藏和显示下拉菜单和文本字段

> ID：15860350
> 
> 赞同：4
> 
> 时间：2013-04-07T08:23:02.020
> 
> 标签：javascript, html

在下面的下拉菜单中，当用户选择操作否时，我希望显示下一个下拉菜单

```
<select id="OperationType" onChange="check(this);">
 <option value="OpNo">Operation No</option>
 <option value="OpEmp">Employee No</option>
</select>

<select id=OperationNos>
 <option value="1001">1001</option>
 <option value="1002">1002</option>
</select> 
```

如果用户选择员工编号，我希望隐藏最后一个下拉菜单并显示以下文本字段：

```
<input type='text'> 
```

我所做的是我放置了以下脚本，但它并没有隐藏这两个元素：

```
function check(elem) {
    document.getElementById('OperationType').disabled = !elem.selectedIndex;
} 
```

它只是禁用了它。我希望它是隐形的。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T08:30:47.043

~~添加 style="display: none" 到您的 OperationNos 选择：~~

您不需要传递`this`给 check()。

如果选择了“OpNo”，则修改您的函数以切换此 css 属性：

```
function check() {
    var dropdown = document.getElementById("OperationType");
    var current_value = dropdown.options[dropdown.selectedIndex].value;

    if (current_value == "OpNo") {
        document.getElementById("OperationNos").style.display = "block";
    }
    else {
        document.getElementById("OperationNos").style.display = "none";
    }
} 
```

示例：http: [//jsfiddle.net/2pna2/](http://jsfiddle.net/2pna2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T08:32:59.583

用这个：-

```
function hideshow()
{
var s1= document.getElementById('OperationType');
var s2= document.getElementById('OperationNos');

if( s1.options[s1.selectedIndex].text=="Operation No")
{
s2.style.visibility = 'visible';
document.getElementById('t1').style.visibility = 'hidden';
}
if( s1.options[s1.selectedIndex].text=="Employee No")
{
s2.style.visibility = 'hidden';
document.getElementById('t1').style.visibility = 'visible';
}
}
function hide()

{

document.getElementById('t1').style.visibility = 'hidden';
} 
```

html代码：-

```
<body onload="hide()">

<select id="OperationType" onChange="hideshow()">
 <option value="OpNo">Operation No</option>
 <option value="OpEmp">Employee No</option>
</select>

<select id="OperationNos">
 <option value="1001">1001</option>
 <option value="1002">1002</option>
</select>

<input type="text" id="t1" />
</body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T08:29:10.187

看那个：

```
var ot = document.getElementById('OperationType');
ot.disabled = !elem.selectedIndex;
ot.style.display = 'none'; // not rendered
//ot.style.visisbility = 'hidden'; // rendered but just invisble it's there 
```

# php - SQL 注入演示失败 - 注释字符因换行而失败

> ID：15860352
> 
> 赞同：3
> 
> 时间：2013-04-07T08:23:09.363
> 
> 标签：php, mysql, sql, sql-injection

晚上好，我的一个朋友有一个由一些二流开发商开发的网站，现在我的任务是清理他们的工作。我试图向他展示他们制造的一些问题。在他的代码中，有这个确切的块：

```
$id = $_REQUEST['id'];
//echo time();
$query = "SELECT cat_id,id,category,title,description,pict_url,minimum_bid,ends,cat_name,quantity,flag
              FROM " . $DBPrefix . "categories INNER JOIN ". $DBPrefix . "auctions 
              ON vesp_categories.cat_id=vesp_auctions.category where id=".$id." 
                          AND starts <= ".time()." AND suspended = 0"; 
```

（我知道，对吧？）

多个查询是不可能的 - 正在使用 mysql_query 并且没有指示使用多个查询。我可以做一个工会：

```
?id=143 AND 1=0 union select null,null,null,nick,password,null,null,null,null,null,null from bidz_users limit 1,1-- - 
```

但是'AND开始<=“.time（）”的事实。AND suspend = 0"' 换行，破坏了注释字符的效果，只返回一个mysql错误“You have an error in your SQL syntax; 检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行“AND 开始 <= 1365321338 AND 暂停 = 0”附近使用正确的语法

如果我删除查询中的换行符，它会很好用，但是具有足够访问权限来编辑他的 PHP 的攻击者可能不会为 SQL 注入而烦恼

有没有办法解决我的约束的换行/注释问题？或者有人可以提出一个合适的替代方案吗？

PHP >= 5.2 / MySQL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T08:29:10.583

您需要确保您的注入仍然会创建有效的语句。因此，您可以使用另一个 UNION SELECT 来修复剩余的语句部分：

```
143 AND 1=0 union select null,null,null,nick,password,null,null,null,null,null,null from bidz_users limit 1,1 union select * from (select null start,null suspended,null,null,null,null,null,null,null,null,null) t where 1=0 
```

注意在子查询中指定匹配的列名，以便`WHERE`找到父子句中的列名。

如果您不需要该`LIMIT`子句，您可以在第一次注入时进行相同的修复`SELECT`。

# python - 请如何从目录加载 XML 文件

> ID：15860355
> 
> 赞同：3
> 
> 时间：2013-04-07T08:23:34.603
> 
> 标签：python, xml, elementtree, xml.etree

这段代码是我在互联网上的某个地方得到的，我对其进行了编辑。

如何从我的目录加载 XML 文件？有没有办法做到这一点？

```
from elementtree import ElementTree as et
# Load the xml content from a string
content = et.fromstring("C:\DATA\US_Patent_Data\2012\ipgb20120103_wk01\ipgb20120103.xml")

# Get the person or use the .findall method to get all
# people if there's more than person
applicant = content.find("applicant")
last_name = applicant.find("addressbook/last-name")
first_name = applicant.find("addressbook/first-name")

# Get the persons address
address = addressbook.find("address")
street = address.find("street")
city= address.find("city")
state =  address.find("state")
postcode = address.find("postcode")
country = address.find("country")

# Print output
print "sequence: " + applicant.attrib.get('sequence')
print "first name: " + first_name.text
print "last name: " + last_name.text
print "street: " + street.text
print "city: " + city.text
print "state: " + state.text
print "postcode: " + postcode.text
print "country: " + country.text 
```

我运行了这个程序，这就是我得到的。我复制了一部分...

```
 File "C:\Python27\lib\site-packages\elementtree\ElementTree.py", line 1292, in feed
self._parser.Parse(data, 0) 
```

ExpatError：格式不正确（无效标记）：第 1 行，第 2 列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:49:01.623

`fromstring`函数用于从字符串中读取 xml 数据。

要从文件中读取 xml 数据，您应该使用`parse`. 请参阅有关使用 elementtree 解析 xml 的[文档](http://docs.python.org/2/library/xml.etree.elementtree.html#parsing-xml)。

```
import xml.etree.ElementTree as ET
tree = ET.parse("C:\DATA\US_Patent_Data\2012\ipgb20120103_wk01\ipgb20120103.xml")
root = tree.getroot() 
```

UPD：似乎您的 xml 格式不正确，因为它有多个根。尝试添加单个根元素：

```
with open('ipgb20120103.xml', 'r') as f:
    xml_string = "<root>%s</root>" % f.read()

root = ET.fromstring(xml_string) 
```

# media-queries - 针对移动设备的优化无法正确显示

> ID：15860359
> 
> 赞同：1
> 
> 时间：2013-04-07T08:24:05.073
> 
> 标签：media-queries

我正在尝试（但失败）让我的网站在移动设备上看起来不错，但它看起来不对。图像显示正确，但带有文本的框只是一条细条。检查图像，框应环绕图像，文本与图像一样宽。

[http://cdn1.cdnme.se/886420/6-3/problem_51612adfddf2b3563ed16d2f.jpg](http://cdn1.cdnme.se/886420/6-3/problem_51612adfddf2b3563ed16d2f.jpg)

我是这方面的新手，我真的不知道我在做什么，但我尝试通过失败来学习，这一次虽然感觉不可能。有什么我做错了吗？有什么遗漏吗？这不是让它工作的唯一方法吗？我使用的媒体查询代码如下：

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
#wrapper {
 width: 100%;
 }
 #container {
 width:100%; 
 margin: auto; 
 }
  #content {
 width: 100%;
 float: right;
 }
 #post {
 width: 100%;
 }
 #post img {
    max-width: 100%;
    margin: 0px 5px 20px 0px;
 float: left;
border-radius: 5px 5px 0px 0px;
-webkit-box-shadow: 0px 3px 5px#000000;
 -moz-box-shadow: 0px 3px 5px#000000;
box-shadow: 0px 3px 5px#000000;
 }
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
#wrapper {
 width: 100%;
 }
 #container {
 width:100%; 
 margin: auto; 
 }
  #content {
 width: 100%;
 float: right;
 }
 #post {
 width: 100%;
 }
 #post img {
    max-width: 100%;
    margin: 0px 5px 20px 0px;
 float: left;
border-radius: 5px 5px 0px 0px;
-webkit-box-shadow: 0px 3px 5px#000000;
 -moz-box-shadow: 0px 3px 5px#000000;
box-shadow: 0px 3px 5px#000000;
 }
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
#wrapper {
 width: 100%;
 }
 #container {
 width:100%; 
 margin: auto; 
 }
  #content {
 width: 100%;
 float: right;
 }
 #post {
 width: 100%;
 }
 #post img {
    max-width: 100%;
    margin: 0px 5px 20px 0px;
 float: left;
border-radius: 5px 5px 0px 0px;
-webkit-box-shadow: 0px 3px 5px#000000;
 -moz-box-shadow: 0px 3px 5px#000000;
box-shadow: 0px 3px 5px#000000;
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:42:22.357

尝试使用`clear`元素浮动的属性，因为文本框假定与图像或内容一起浮动。

```
@media only screen 
and (max-width : 320px) {

#content {
 width: 100%;
 float: right;
clear:both;    /*Important*/
 }

#post img {
max-width: 100%;
margin: 0px 5px 20px 0px;
float: left;
clear:both;    /*Important*/
border-radius: 5px 5px 0px 0px;
-webkit-box-shadow: 0px 3px 5px#000000;
 -moz-box-shadow: 0px 3px 5px#000000;
box-shadow: 0px 3px 5px#000000;
 }
} 
```

# perl - 如何通过perl脚本向weblogc服务器发送http请求

> ID：15860363
> 
> 赞同：0
> 
> 时间：2013-04-07T08:24:23.567
> 
> 标签：perl, http

需要检查在 weblogic 上运行的 web 服务的状态。Web 服务在后台运行，并且没有 HTML 页面可以通过浏览器启动。但是，它响应 HTTP 查询以及请求类型。

我需要发送请求，它会以相应的状态代码进行响应。问题是没有框架或网页来输入请求。请求必须以编程方式发送。这可以使用perl完成吗？

我尝试使用 LWP 模块但无法获得所需的结果，

```
#!/usr/bin/perl
use HTTP::Request::Common qw(POST);
use LWP::UserAgent;
$ua = LWP::UserAgent->new;
$PARAM = "<HealthCheck>" ;

my $req = (POST '[http://host_name:8080/service]' ["xmlString" => $PARAM]);
$request = $ua->request($req); 
$content = $request->content; 

print $content; 
exit; 
```

请帮忙。

问候...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:40:46.030

当然，这是可能的，只需更改语法：

```
#!/usr/bin/perl
use strict;
use warnings;

use LWP::UserAgent;

my $ua = LWP::UserAgent->new;
my $PARAM = "<HealthCheck>" ;

my $response = $ua->post('http://host_name:8080/service', {'xmlString' => $PARAM}); 
if( $response->is_success ) {
   print $response->decoded_content;
}
else {
   print STDERR $response->status_line, "\n";
} 
```

# java - java休眠配置

> ID：15860366
> 
> 赞同：0
> 
> 时间：2013-04-07T08:24:38.260
> 
> 标签：java, hibernate, config

我有 2 个类：用户和家庭，但在运行时不能“加入”它们（如果我删除属性没有问题），我得到：

```
SEVERE: IllegalArgumentException in class: User, setter method of property: family
Apr 07, 2013 11:16:41 AM org.hibernate.property.BasicPropertyAccessor$BasicSetter set
SEVERE: expected type: org.hibernate.mapping.Set, actual value: org.hibernate.collection.PersistentSet 
```

班级：

```
public class User 
{
    //....//
    private Set family;
    //...//
    public void setFamily(Set fam)
    {
        this.family = fam;
    }
    public Set getFamily()
    {
        return this.family;
    }
}

public class Factory
{
       //...//
        tx = session.beginTransaction();
        List users = session.createQuery("FROM User").list(); //is it a query issue ?
        allUsers = new User[users.size()];
        for (Iterator iterator = users.iterator(); iterator.hasNext();)
        {
            User user = (User) iterator.next();
            allUsers[i] = user;
            System.out.print("\nFirst Name: " + user.getName());
            i++;
        }
        tx.commit();
       //....//
} 
```

配置：

```
<hibernate-mapping>
    <class name="User" table="users">
        <meta attribute="class-description"> This class contains the employee detail. </meta>
        <id name="id" type="int" column="user_id"> <generator class="native"/> </id>
        <set name="family" cascade="all">
            <key column="family_id"/>
            <one-to-many class="Family"/>
        </set>
        <property name="name" column="user_name" type="string"/>
        <property name="surname" column="user_surname" type="string"/>
        <property name="income" column="user_income" type="int"/>
        <property name="costs" column="user_costs" type="int"/>
    </class>

    <class name="Family" table="families">
        <meta attribute="class-description"> This class contains the certificate records. </meta>
        <id name="id" type="int" column="family_id"><generator class="native"/></id>
        <property name="name" column="family_name" type="string"/>
    </class>
</hibernate-mapping> 
```

我是休眠新手，无法解决这个问题...我尝试更改配置文件，更改查询但仍然没有运气 PS：我在用户和家庭表中只有 1 个条目；

# c# - C# winforms 中 Sql 查询通知中的无限循环疑难解答

> ID：15860367
> 
> 赞同：0
> 
> 时间：2013-04-07T08:24:53.157
> 
> 标签：c#, sql

我正在创建一个具有 Sql 查询通知的应用程序，但我遇到了一个问题.. 系统一直在循环，进入无限循环。我使用的查询在存储过程中，我使用了 7我的查询中的表。我的查询或我的应用程序似乎有什么问题？请帮我解决这个问题谢谢:)我会在这里发布我的代码这是我正在使用的存储过程

```
ALTER PROCEDURE [dbo].[INVENTORYLOG_VIEW]
AS
    BEGIN
    SELECT     
     ACCOUNT.Emp_Fname + ' ' + ACCOUNT.Emp_Lname AS [USERS],
     INVENTORYLOG.ACTIVITYDATE AS [ACTIVITY DATE], 
     INVENTORYLOGDETAILS.ACTIVITYTIME AS [ACTIVITY TIME],
     INVENTORYLOGDETAILS.LOG_ACTION AS [USER LOG], 
     CATEGORY.CATEGORY_NAME, 
     BRAND.Brand_Name AS BRAND, 
     PRODUCTDESCRIPTION.DESCRIPTION_TYPE, 
     COLOR.Color_Name AS [COLOR NAME], 
     SIZES.SIZE, 
     INVENTORY.QUANTITY_ON_HAND AS [CURRENT QTY], 
     INVENTORYLOGDETAILS.QUANTITY_LOG_ACTION AS [USER LOG QTY]
FROM         
dbo.ACCOUNT INNER JOIN
dbo.INVENTORYLOG ON dbo.ACCOUNT.ACCOUNT_ID = dbo.INVENTORYLOG.Account_Id INNER JOIN
dbo.INVENTORYLOGDETAILS ON dbo.INVENTORYLOG.INVENTORYLOGID = dbo.INVENTORYLOGDETAILS.INVENTORYLOGID INNER JOIN
dbo.INVENTORY ON dbo.INVENTORYLOGDETAILS.INVENTORY_ID = dbo.INVENTORY.INVENTORY_ID INNER JOIN
dbo.PRODUCT_DTL ON dbo.INVENTORY.PRODUCT_DTL_ID = dbo.PRODUCT_DTL.PRODUCT_DTL_ID INNER JOIN
dbo.COLOR ON dbo.PRODUCT_DTL.COLOR_ID = dbo.COLOR.Color_Id INNER JOIN
dbo.BRAND ON dbo.PRODUCT_DTL.BRAND_ID = dbo.BRAND.Brand_Id INNER JOIN
dbo.CATEGORY ON dbo.PRODUCT_DTL.CATEGORY_ID = dbo.CATEGORY.CATEGORY_ID INNER JOIN
dbo.PRODUCTDESCRIPTION ON dbo.PRODUCT_DTL.DESCRIPTION_ID = dbo.PRODUCTDESCRIPTION.DESCRIPTION_ID INNER JOIN
dbo.SIZES ON dbo.PRODUCT_DTL.SIZE_ID = dbo.SIZES.SIZE_ID
END 
```

这是我的应用程序中的代码

```
 string connect;
        String connection;
        private SqlConnection cons = null;
        private SqlCommand command = null;
        private DataSet myDataSet = null;
        public Inventory_InventoryLog()
        {
            InitializeComponent();
            this.gridView1.OptionsView.ColumnAutoWidth = false;
            this.gridView1.ScrollStyle = ScrollStyleFlags.LiveHorzScroll | ScrollStyleFlags.LiveVertScroll;
            ConnectionString access = new ConnectionString();
            connection = access.AccessConnection(connect).ToString();

            // Sql Notifications Automatic
            EnoughPermission();
        }

        public bool EnoughPermission()
        {
            SqlClientPermission perm = new SqlClientPermission(System.Security.Permissions.PermissionState.Unrestricted);
            try
            {
                perm.Demand();
                MessageBox.Show(""+perm);
                return true;
            }
            catch(System.Exception)
            {
                return false;
            }
        }
        private void GetActivateData()
        {
            try
            {
                //String query = "SELECT [USER], [ACTIVITY DATE], [ACTIVITY TIME], [USER LOG], CATEGORY_NAME, Brand_Name, DESCRIPTION_TYPE, Color_Name, SIZE, [ CURRENT QTY], [USER LOG QTY] FROM INVENTORY_INVENTORY_LOG_DETAILS";
                SqlDependency.Stop(connection);
                SqlDependency.Start(connection);
                if (cons == null)
                  cons = new SqlConnection(connection);
                if (command == null)
                {
                    command = new SqlCommand("dbo.INVENTORYLOG_VIEW", cons);
                    command.CommandType = CommandType.StoredProcedure;
                }
                if (myDataSet == null)
                    myDataSet = new DataSet();
                GetActualData();
            }
            catch (Exception p)
            {
                MessageBox.Show(""+p);
            }
            MessageBox.Show("Being called");
        }
        private void GetActualData()
        {
            myDataSet.Clear();
            command.Notification = null;
            SqlDependency dependecy = new SqlDependency(command);
            dependecy.OnChange +=new OnChangeEventHandler(dependecy_OnChange);
            using (SqlDataAdapter adapter = new SqlDataAdapter(command))
            {
                adapter.Fill(myDataSet, "dbo.ACCOUNT, dbo.INVENTORYLOG, dbo.INVENTORYLOGDETAILS, dbo.INVENTORY, dbo.PRODUCT_DTL,dbo.COLOR,dbo.BRAND,dbo.CATEGORY,dbo.PRODUCTDESCRIPTION, dbo.SIZES");
                gridControl1.DataSource = myDataSet.Tables["dbo.ACCOUNT, dbo.INVENTORYLOG, dbo.INVENTORYLOGDETAILS, dbo.INVENTORY, dbo.PRODUCT_DTL,dbo.COLOR,dbo.BRAND,dbo.CATEGORY,dbo.PRODUCTDESCRIPTION, dbo.SIZES"];
                gridView1.BestFitColumns();
                gridView1.BestFitMaxRowCount = 10;
            }

        }

        delegate void UIDelegate();
        public void dependecy_OnChange(object sender, SqlNotificationEventArgs e)
        {
            try
            {
                UIDelegate uidel = new UIDelegate(RefreshDatas);
                this.Invoke(uidel, null);
                SqlDependency dependency = (SqlDependency)sender;
                dependency.OnChange -= dependecy_OnChange;
            }
            catch (Exception es)
            {
             //   XtraMessageBox.Show(es.Message);
            }
        }
        public void RefreshDatas()
        { 
            ////////////////////////
            //---------------------------------------   NOTIFICATION INSERTS HERE ----------------------------------- //////
            label1.Text = "Changes Happened";
            GetActualData();
        }

        /// <summary>
        /// //////////////////////////////////////////////////////////////////////////////////////////////////
        /// //--------------------------------------------------------  SQL NOTIFICATION ------------------------------------
        /// </summary>
        /// <param name="args"></param>

        public SqlConnection ConnectionStringMethod()
        {
            SqlConnection con = new SqlConnection(connection);
            con.Open();
            return con;
        }
        private void Inventory_InventoryLog_Load(object sender, EventArgs e)
        {
            GetActivateData();           
        } 
```

我真的需要这些问题的答案，请帮帮我...谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:31:17.813

您在 RefreshDatas() 中调用 GetActualData()，而后者又由在 GetActiveData() 中触发的 onchange 委托调用。

GetActiveData() 再次调用 GetActualData()，因此循环。

要“修复”它，您应该从 GetActualData 中删除 onchange 委托并将其移至 GetActivateData。

像这样：

```
private void GetActivateData()
        {
            try
            {
                //String query = "SELECT [USER], [ACTIVITY DATE], [ACTIVITY TIME], [USER LOG], CATEGORY_NAME, Brand_Name, DESCRIPTION_TYPE, Color_Name, SIZE, [ CURRENT QTY], [USER LOG QTY] FROM INVENTORY_INVENTORY_LOG_DETAILS";
                SqlDependency.Stop(connection);
                SqlDependency.Start(connection);
                if (cons == null)
                  cons = new SqlConnection(connection);
                if (command == null)
                {
                    command = new SqlCommand("dbo.INVENTORYLOG_VIEW", cons);
                    command.CommandType = CommandType.StoredProcedure;
                }
                if (myDataSet == null)
                    myDataSet = new DataSet();

            SqlDependency dependecy = new SqlDependency(command);
            dependecy.OnChange +=new OnChangeEventHandler(dependecy_OnChange);

                GetActualData();
            }
            catch (Exception p)
            {
                MessageBox.Show(""+p);
            }
            MessageBox.Show("Being called");
        }
        private void GetActualData()
        {
            myDataSet.Clear();
            command.Notification = null;
            using (SqlDataAdapter adapter = new SqlDataAdapter(command))
            {
                adapter.Fill(myDataSet, "dbo.ACCOUNT, dbo.INVENTORYLOG, dbo.INVENTORYLOGDETAILS, dbo.INVENTORY, dbo.PRODUCT_DTL,dbo.COLOR,dbo.BRAND,dbo.CATEGORY,dbo.PRODUCTDESCRIPTION, dbo.SIZES");
                gridControl1.DataSource = myDataSet.Tables["dbo.ACCOUNT, dbo.INVENTORYLOG, dbo.INVENTORYLOGDETAILS, dbo.INVENTORY, dbo.PRODUCT_DTL,dbo.COLOR,dbo.BRAND,dbo.CATEGORY,dbo.PRODUCTDESCRIPTION, dbo.SIZES"];
                gridView1.BestFitColumns();
                gridView1.BestFitMaxRowCount = 10;
            }

        } 
```

# xslt - XSL 读取带有空格的处理指令

> ID：15860371
> 
> 赞同：0
> 
> 时间：2013-04-07T08:25:23.263
> 
> 标签：xslt, xpath, xslt-2.0

在源 xml 文档中，我有一个包含空格的处理指令 - `<?Tag To Delete?>`

如何使用 xslt 读取和处理此处理指令？

如果我尝试使用 processing-instruction('Tag To Delete') 我会收到一个错误 - 任何处理指令都不会被命名为 'Tag To Delete'。无效的 QName {标记要删除}

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T08:51:35.620

不完全清楚一旦你选择了这条处理指令你想做什么，但处理指令的名称是从`<?`第一个空格到第一个空格的部分（所以在这种情况下，名称是`Tag`）。第一个空格之后的部分是它的内容。因此，与该处理指令匹配的 XPath 是：

```
processing-instruction('Tag')[. = 'To Delete'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:24:22.503

**如果处理指令的字符串值中可能存在不确定数量的空格字符，例如**：

```
<?Tag To Delete?>

<?Tag   To    Delete    ?>

<?Tag To            Delete ?> 
```

**这些变体中的任何一个都可以通过以下方式选择：**

```
processing-instruction('Tag')[normalize-space() = 'To Delete'] 
```

**下面是一个简短的、基于 XSLT 的验证：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select=
  "/*/processing-instruction('Tag')[normalize-space() = 'To Delete']"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t>
    <?Tag To Delete?>
    <?Tag   Not To    Delete    ?>
    <?Tag   To    Delete    ?>
    <?Tag To            Delete ?>
</t> 
```

**对 XPath 表达式求值，并将该求值的结果（选定节点）复制到输出**：

```
<?Tag To Delete?><?Tag To    Delete    ?><?Tag To            Delete ?> 
```

# python - 在python中，我可以将打印函数的输出重定向到stderr吗？

> ID：15860372
> 
> 赞同：11
> 
> 时间：2013-04-07T08:25:31.413
> 
> 标签：python, python-2.7, stderr

我的程序中有很多`print`函数 ( `python 2.7`)。有什么办法可以添加几行然后所有输出都可以重定向到`stderr`？我想要的是 python 代码而不是 linux 管道。

例如，我的程序是这样的：

```
print 'hello world' 
```

我想添加一些代码，例如：

```
redirect_output_to_stderr()
print 'hello world' 
```

然后可以将所有输出重定向到`stderr`.

我知道`print >> sys.stderr, 'hello world'`可以实现我的目标，但是有什么方法可以防止修改现有代码吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-07T08:38:54.660

在 python 2.7 中，您可以执行以下操作：

```
import sys

print >> sys.stderr, "To stderr." 
```

或者您可以从 3.x 导入行为：

```
from __future__ import print_function
import sys

print('To stderr.', file=sys.stderr) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-07T08:31:39.680

在您的方法中执行此操作：

```
import sys
sys.stdout = sys.stderr 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T08:32:36.990

重新定义`print`是 Python 3+ 的特性。但是，您可以更改`sys.stdout`为`std.stderr`.

见：[另一个问题](https://stackoverflow.com/questions/6796492/python-temporarily-redirect-stdout-stderr)

# msmq - 为什么重新启动 MSMQ 服务会导致队列日志消息重播？

> ID：15860374
> 
> 赞同：1
> 
> 时间：2013-04-07T08:25:37.197
> 
> 标签：msmq

Win2k8 R2 sp1 - 我有一个通过 NetMsmqBinding 使用 AllowBufferedReceive 的 WF 服务。

消息在服务器上的 WF 服务队列中记录。如果我重新启动消息队列服务，所有日志消息都会移回活动队列。

为什么是这样？

# dart - 变量是不是继承的？

> ID：15860375
> 
> 赞同：1
> 
> 时间：2013-04-07T08:25:46.210
> 
> 标签：dart

请考虑以下代码：

```
abstract class ClassAbstract {
    static int _someValue = 10;

    ClassAbstract() {}   
  }

  class NormalClass extends ClassAbstract {
    NormalClass(): super() {}

    void RunMe() {
      print("Value from abstract super: $_someValue");  // Error here
    }
  }

  void main() {
    NormalClass normalClass = new NormalClass();
    normalClass.RunMe();
    print("Application close");
  } 
```

当我运行它时，我收到一个错误：

```
Class 'NormalClass' has no instance getter '_someValue@0x213da713'.

NoSuchMethodError : method not found: '_someValue@0x213da713'
Receiver: Instance of 'NormalClass'
Arguments: [] 
```

也许我在这里弄错了，但是全局静态变量必须被继承，但是从这个例子中可以看出它没有......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:47:01.560

*Dart 中确实没有*继承静态成员。如果你想在他们的声明类之外访问它们，你总是必须用类名来限定访问。

在你的情况下：

```
class NormalClass extends ClassAbstract {
  void runMe() {
    print("Value from abstract super: ${ClassAbstract._someValue}");
  }
} 
```

规范在第 7.7 章（非规范部分）中对此有几句话要说：

> 静态方法的继承在 Dart 中几乎没有用处。静态方法不能被覆盖。任何需要的静态函数都可以从其声明库中获取，无需通过继承将其引入作用域。经验表明，开发人员对继承方法不是实例方法的想法感到困惑。
> 
> 当然，静态方法的整个概念是值得商榷的，但在这里保留它是因为很多程序员都熟悉它。Dart 静态方法可以看作是封闭库的函数。

# google-app-engine - How to deal with big-appendable data in Google App Engine?

> ID：15860378
> 
> 赞同：1
> 
> 时间：2013-04-07T08:26:05.090
> 
> 标签：google-app-engine, google-cloud-datastore

I'm using Google App Engine, and I have to deal with large files.

I need to append data to these files frequently.

If I use blobstore, I can't modify the file after I finalize it. To append something to the file, I must create a new file, copy the old file's content, and write the appended content. I think it's a waste to copy the old file because I just want to append append something.

If I use datastore, I can put the file into an entity's property as a integer list. To append something to the file, I can get the entity, get the corresponding property, append to the list, and put the entity back to the datastore. However, this method waste a lot of my datastore quota.

Is there any way I can use to just append something to my file, without touching the rest of the file's content?

Thanks!

# ruby-on-rails-3 - 使用 minitest-spec-rails gem 进行 Rake 任务

> ID：15860383
> 
> 赞同：0
> 
> 时间：2013-04-07T08:26:21.933
> 
> 标签：ruby-on-rails-3, rake, rake-task, minitest

我一直在使用 minitest-rails gem，运行时一切正常：

```
 rake minitest:models 
```

但是，我最近切换到 minitest-spec-rails gem，当我运行相同的命令时，我得到了这个错误：

```
 "Don't know how to build task 'minitest:models'" 
```

任何人都知道这两种宝石之间的区别（在这方面）是什么？

这是我的 rake 文件（适用于 rake minitest:models）

```
require "rake/testtask"

Rake::TestTask.new(:test => "db:test:prepare") do |t| 
  t.libs << "test"
  t.pattern = "test/**/*_test.rb"
end

task :default => :test 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:29:33.057

minitest-spec-rails gem 仅在您的 rails 测试中启用 minitest spec DSL。因此，您将不得不使用标准测试 rake 任务。要仅测试 test/models 下的文件，您需要创建自己的 rake 任务。

minitest-rails gem 启用了规范 DSL，并提供了使用规范 DSL 的生成器，以及额外的 rake 任务。它可以帮助弥合 Rails 3 和 4 之间的差距。

# android - File name in persian ( Farsi ) in assete folder in android

> ID：15860385
> 
> 赞同：1
> 
> 时间：2013-04-07T08:26:37.917
> 
> 标签：android, string, compare, filenames, farsi

i want to compare file name in persian ( farsi or arabic ) in assete folder

```
if (filename.matches("*سلام*\\.jpg")) 
{
    copy(getAssets().open(filename), new File(path) );
    items.add(path);
} 
```

but i think the android doesn't support asian language !!! any budy can tell me something about this problem ???

or how i can compare persian( Farsi or arabic ) string in java ( eclips ) !!???

tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:43:52.390

对我来说，你的正则表达式是错误的。以下作品：

```
public static void main(String[] args) {
  String filename = "asdf" + "سلام" + "asdf.jpg";
  System.out.println(filename.matches(".*سلام.*\\.jpg")) ;
} 
```

你错过了`.`之前的`*`. 不过，不确定这是否是一个错字。

# c# - 从子表单启用父表单

> ID：15860386
> 
> 赞同：-1
> 
> 时间：2013-04-07T08:26:39.753
> 
> 标签：c#, winforms

场景是我有一个*父表单*，每次单击时`search button`，都会出现一个*搜索表单*，*父表单*只是**被禁用但可以看到**。

问题是每次我单击*搜索表单*`exit button`上的，*搜索表单*退出，但*父表单*或仍然**禁用**。***`MainForm`***

 *****我`exit button`在*搜索表单*上的代码：

```
MainForm mainForm = new MainForm();
mainForm.Enabled = true;
this.Hide(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:28:48.940

您的代码创建 MainForm 类的一个新实例。这个新实例不是启动搜索表单的原始实例。Obvioulsy第一个实例仍然被禁用，而新的实例被启用，但是你看不到它，因为没有显示

通常这个问题可以通过多种方式解决。

*   将打开搜索表单的表单（MainForm）实例传递给搜索表单
*   注册要在搜索表单关闭时通知的主实例
*   创建并引发您自己的事件，该事件向外部表单发出搜索结束的信号

**如何注册 MainForm 以在 SearchForm 关闭时收到通知**
启动 SearchForm 的 MainForm 的代码应更改为类似这样的 内容**EDIT**这种方法要求您有效地关闭 SearchForm。简单的 Hide 不会关闭表单，因此 SearchForm 不会引发关闭事件

```
SearchForm f = new SearchForm();
// Here the current (this) instance of the MainForm requires 
// to be notified of the closing of the search form
f.Closing += new System.ComponentModel.CancelEventHandler(OnSearchClosing);
this.Enabled = false;
f.Show();
.... 
```

并添加此代码以在搜索表单关闭时得到通知

```
// When the search form closes you get this event 
// Here `this` is the correct instance of the MainForm (the one disabled)
private void OnSearchClosing(object sender, System.ComponentModel.CancelEventArgs e)
{
    this.Enabled = true;
} 
```

**如何传递调用 SearchForm 实例的 MainForm 实例**
在我看来，第二种方法不太可取，因为您将强制搜索表单获取对主表单的引用，并且您将从 SearchForm 操作 MainForm。
通过这种方式，您将 MainForm 的引用传递给 SearchForm 并使用该引用重新启用 mainForm

```
// In the calling code of the search form pass the reference to the caller
SearchForm f = new SearchForm(this);
f.Show(); 
```

在 SearchForm 的表单构造函数中接收引用并存储在全局类变量中

```
public class SearchForm:Form
{
    private MainForm _callerForm;
    public void SearchForm(MainForm callingForm)
    {
         InitializeComponent();
         _callerForm = callingForm;
         _callerForm.Enabled = false;
    }

    // ...  somewhere in this class
    _callerForm.Enabled = true;
    this.Hide();
    // ....
} 
```

**如何创建和引发自定义事件**
第三种方法具有第一种方法的优点，并将通知的责任留给开发人员（这意味着您可以引发自己的事件，并且无论对哪个感兴趣）事件可以处理自己的事务）

在 SearchForm 中创建自定义事件

在 SearchForm.cs

```
// Build a delegate that returns nothing and receive nothing
// Define an event based on that delegate
public delegate void OnSearchEnded();
public event OnSearchEnded SearchEnded;

... somewhere in this class
// If some external entity choose to be notified when whe have finished search
// raise the event to which this external entity has subscribed (MainForm)
if(SearchEnded != null)
    SearchEnded();
    .... 
```

在 MainForm.cs

```
SearchForm f = new SearchForm();
// Here the current (this) instance of the MainForm infom the SearchForm 
// that it wants to be notified when the search end
f.SearchEnded += new SearchForm.OnSearchEnded(EnableThisForm);
this.Enabled = false;
f.Show();
....

// Here the main form receives the notification from the Search Form
public void EnableThisForm()
{
   this.Enabled = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T09:06:24.960

更优雅的解决方案是将搜索表单设置为*模态对话框*。每当打开模式对话框时，它的父窗体就会自动禁用。

您可以通过将创建搜索表单的父表单上的代码更改为：

```
searchform.ShowDialog(this); 
```

这将禁用父表单，直到搜索表单关闭，然后父表单将自动重新启用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T09:35:02.750

您应该只将 MainForm 传递给 SearchForm，这样在您关闭搜索表单之前，您将能够隐藏原始 MainForm 而无需创建新的 MainForm。见下面的代码：

```
public class MainForm:Form
{
    private SearchForm searchForm;//for keeping the search form
    public MainForm()//your main form constructor
    {

    }
    this.searchBtn.Click+=(s,e)=>
    {
        if(this.searchForm == null)
        {
            this.searchForm = new SearchForm(this);//creating new searchForm if it does no exist
            this.searchForm.Show();
            this.Enabled = false;
        }

    };

}

public class SearchForm:Form
{
    private MainForm mainForm;//this will keep the original mainform
    public SearchForm(MainForm mainForm)
    {
        this.mainForm = mainForm;
    }

    this.OnFormClosing+=(s,e)=>
    {
        this.mainForm.Enabled = true;   
    };
} 
```

这将每次关闭搜索表单并在您单击搜索按钮时创建它的新实例。如果你想隐藏它，你应该使用这个代码：

```
public class MainForm:Form
{
    private SearchForm searchForm;//for keeping the search form
    public MainForm()//your main form constructor
    {

    }
    this.searchBtn.Click+=(s,e)=>
    {
        if(this.searchForm == null)
        {
            this.searchForm = new SearchForm(this);//creating new searchForm if it does no exist
            this.searchForm.Show();
            this.Enabled = false;
        }
        else
        {
            this.Enabled = false;
            this.searchForm.Show();
        }

    };

}

public class SearchForm:Form
{
    private MainForm mainForm;//this will keep the original mainform
    public SearchForm(MainForm mainForm)
    {
        this.mainForm = mainForm;
    }

    this.OnFormClosing+=(s,e)=>
    {
        e.Cancel = true;
        this.mainForm.Enabled = true;   
        this.Hide();
    };
} 
```

基本上这是最简单的方法，不需要复杂的事件等等。如果不是我在这里提供帮助，我希望这能解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-24T11:53:47.913

```
UpgradeLicenseDialog dialogBox = new UpgradeLicenseDialog();
dialogBox.FormClosing+=dialogBox_FormClosing;
dialogBox.StartPosition = FormStartPosition.CenterScreen;
this.Enabled = false;
dialogBox.Show();` 
```

使用关闭事件来启用父...

> 私人无效 dialogBox_FormClosing（对象发送者，System.ComponentModel.CancelEventArgs e）{ this.Enabled = true; }*****

# visual-c++ - cannot display a string in visual c++

> ID：15860388
> 
> 赞同：0
> 
> 时间：2013-04-07T08:26:44.607
> 
> 标签：visual-c++

```
#include <iostream>
#include <cstdlib>
#include <cstring>
#include <vector>

using namespace std;

class TheNumberGameDivTwo{
private:
public:
        string find( int n ){
    string n1 = "John";
    string n2 = "Brus";
    //cout << "Mahesh"<< n2 << n1;
    int i,q;
    q = 0;
    int k = n;
    i = n-1;
    for ( i = 2 ; i < k ; ++i ){
        if ( !(k % i) ){
            q += k / i;
            k = k % i;
        }
    }
    if ( q % 2 )
        return "John";
    else
        return "Brus";
}
};

int main(){
TheNumberGameDivTwo T;
cout << endl << T.find(6);
cout << endl << "End of Program " << endl;

system("PAUSE");
} 
```

Error 1

```
error C2679: binary '<<' : no operator found which takes a right-hand operand of type 'std::string' (or there is no acceptable conversion)  
d:\my documents\visual studio 2012\c++\topcoder\topcoder\source1.cpp    34  1   TopCoder 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:55:20.427

你不见了`#include <string>`

# shell - How to assign "/" to a variable in shell scripting

> ID：15860389
> 
> 赞同：0
> 
> 时间：2013-04-07T08:26:48.217
> 
> 标签：shell

Hi guys I am trying to write a shell script which installs java and sets the paths for it.

For this I was trying to get the root folder where I have installed Java. I successfully did so by using grep command. My java home directory is like this `/usr/bin/java`. I obtained `usr` directory separately. Now I want to add `/usr` string literal to a variable. But it's just adding `usr` with a white space before it.. Can anyone help me out with this.

Here is the example I'm giving not the real one though...

```
directory="/usr/bin/java"
echo $directory
IFS=/
set $directory
echo /$2
t=$'/'$2
echo $t 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:37:10.367

Under [bash](/questions/tagged/bash "show questions tagged 'bash'"), you could simply:

```
directory="/usr/bin/java"
set -- ${directory//\// }
echo /$3 
```

will print:

```
/java 
```

# c++ - Program to check CUDA presence needs CUDA?

> ID：15860390
> 
> 赞同：2
> 
> 时间：2013-04-07T08:27:05.110
> 
> 标签：c++, windows, visual-c++, cuda

I wrote a simple application that checks if NVIDIA CUDA is available on the computer. It simply displays *true* if a CUDA-capable device is found.

I send the app to a second PC, and the application didn't run - a dialog box showed up that *cudart.dll* was not found. I want to check if CUDA is present and it requires CUDA to do that :)

I am using CUDA 5.0, VS2012, VC++11, Windows 7.

**Can I compile the application in a way, that all CUDA libraries are inside the executable?**

* * *

So the scenario is:

1.  My app is compiled & sent to a computer
2.  The computer can:
    1.  be running windows, linux (my app is compatible with the system)
    2.  have a gpu or not
    3.  have an nvidia gpu or not
    4.  have CUDA installed or not
3.  My app should return `true` only if 2.3 and 2.4 are positive (GPU with CUDA)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T09:04:13.610

作为开场白，我认为您编辑中的步骤顺序和数量不正确。它应该是：

1.  程序启动并尝试加载运行时 API 库
2.  如果存在运行时库，请尝试使用它来枚举设备。

如果第 1 步失败，则您没有必要的运行时支持，并且无法使用 CUDA。如果 2 失败，则系统中不存在兼容的驱动程序和 GPU，并且无法使用 CUDA。如果他们都通过了，你就可以走了。

在第 1 步中，您想[`dlopen`](http://linux.die.net/man/3/dlopen)在 Linux 上使用类似的东西并处理返回状态。在 Windows 上，您可能希望使用[DLL 延迟加载机制](http://msdn.microsoft.com/en-us/library/151kt790.aspx)（抱歉，不是 Windows 程序员，无法告诉您更多信息）。

在这两种情况下，如果库加载，则`cudaGetDeviceCount`通过适当的主机操作系统 API 获取地址并调用它。这告诉您是否有可以枚举的兼容 GPU。找到一个明显可用的 GPU 后，您要做什么取决于您自己。我会检查计算状态并尝试在其上建立上下文。这将确保存在功能齐全的运行时/驱动程序组合并且一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-22T07:03:52.247

链接到 stackoverflow 上的另一篇文章：[detecting-nvidia-gpus-without-cuda](https://stackoverflow.com/questions/12828468/detecting-nvidia-gpus-without-cuda) 这显示了检查 cuda api 是否可用和可访问的整个序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T08:36:42.067

我认为仅使用软件没有可靠的方法来确保 GPU 是否支持 Cuda，特别是如果我们认为 Cuda 是一种基于驱动程序的技术并且对于操作系统，如果驱动程序说 Cuda 不存在库达不存在。

我认为最好的方法是老式的方法，考虑检查这个[简单的网页](https://developer.nvidia.com/cuda-gpus)，你会得到一个更可靠的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T08:49:19.343

为您的应用程序创建一个插件，动态链接到相关的 CUDA 库并执行检查。

然后尝试加载插件并运行它的检查。

*   如果插件无法加载，那么您没有安装 CUDA 库，因此您可以假设`False`

*   如果插件成功加载，那么您已经安装了 CUDA-libs 并且可以执行检查，硬件是否也支持 CUDA。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-15T07:01:40.627

作为一个迟到的答案：

我正在努力解决同样的问题（检测cuda安装而不使用它），到目前为止我的解决方案是

*   确保`LoadLibraryA("nvcuda.dll") != nullptr`（不过，只有在安装了 nvidia 卡时才会告诉你）
*   检查环境变量 CUDA_PATH（或在我的情况下为 CUDA_PATH_V8_0），因为这似乎是由 cuda 安装设置的：（`const char * szCuda8Path = std::getenv("CUDA_PATH_V8_0");`必须是！= nullptr）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-07T08:39:10.917

Use [`cudaGetDeviceCount()`](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDART__DEVICE_g665468e8cb33be42434f11bee2684ec9.html) to know if the computer is CUDA-capable.

[According to this thread](https://devtalk.nvidia.com/default/topic/397413/linking-cuda-staticly/), you cannot statically link `cudart.dll`.

There are workarounds: embed the CUDA runtime as a resource in your executable, then extract it when your program runs, then dynamically link.

You can also use [`nvidia-smi`](https://developer.nvidia.com/nvidia-system-management-interface) to see if CUDA is installed on a machine.

# javascript - 单击时在 div 中显示图像不起作用

> ID：15860397
> 
> 赞同：2
> 
> 时间：2013-04-07T08:28:04.017
> 
> 标签：javascript, jquery, html, image

我是 jquery 和 javascript 的新手。我希望在单击另一张图片时更改 div 中的某些图片。我确实在这里环顾四周，发现了与我想要的类似的东西，但似乎无法使其工作。

这是我的代码：

```
<HTML>
<HEAD>
<TITLE></TITLE>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js">

<script type="text/javascript">
$(document).ready(function(){
    $('#changeImage').click(function(){
        var rel = $(this).attr('rel');
        $("#imageBox img").attr('src', 'image' + rel + '.jpg');
    })
});
</script>

</HEAD>
<BODY>
<div id="imageBox"><img src=placeholder.jpg></div>
<BR>
<a href="#" id="changeImage" rel="1"><img class="thumb" src="image1-thumb.jpg" /></a>
<a href="#" id="changeImage" rel="2"><img class="thumb" src="image2-thumb.jpg" /></a>
<a href="#" id="changeImage" rel="3"><img class="thumb" src="image3-thumb.jpg" /></a>
</BODY>
</HTML> 
```

你可以在这里看到它的生活：[http ://www.thebruises.be/TEST/test.html](http://www.thebruises.be/TEST/test.html)

但正如我上面所说，它不起作用；尝试在体内移动 ... 但没有任何改变。

任何帮助将不胜感激......正如我上面提到的，我的 javascript/jquery 技能为零。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:30:03.807

您对所有`<a>`标签使用相同的 id。ID 在页面中必须是唯一的，
您的 javascript 仅将 on click 函数应用于第一个图像
更改 id 到类，您的代码应该可以工作，

您的代码应该如下所示：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('.changeImage').click(function(){
        var rel = $(this).attr('rel');
        $("#imageBox img").attr('src', 'image' + rel + '.jpg');
    })
});
</script> 
```

...

```
<a href="#" class="changeImage" rel="1"><img class="thumb" src="image1-thumb.jpg" /></a>
<a href="#" class="changeImage" rel="2"><img class="thumb" src="image2-thumb.jpg" /></a>
<a href="#" class="changeImage" rel="3"><img class="thumb" src="image3-thumb.jpg" /></a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T08:36:22.440

将您的更改`id="changeImage"`为，`class="changeImage"`因为 id 是唯一的。

然后，您可以使用[each](http://api.jquery.com/jQuery.each/)来遍历所有带有 class 的锚点`changeImage`：

```
$('.changeImage').each(function() {
    $(this).click(function(){
        var rel = $(this).attr('rel');
        $("#imageBox img").attr('src', 'image' + rel + '.jpg');
    })
}); 
```

* * *

将其复制并粘贴到您的 jQuery 代码中：

```
$(document).ready(function(){
    $('.changeImage').each(function() {
        $(this).click(function(){
            var rel = $(this).attr('rel');
            $("#imageBox img").attr('src', 'image' + rel + '-thumb.jpg');
        })
    });
}); 
```

[**演示**](http://jsfiddle.net/7b66p/1/)

# excel - 如果重复，则基于第一个单元格的整行的条件格式

> ID：15860400
> 
> 赞同：0
> 
> 时间：2013-04-07T08:28:24.193
> 
> 标签：excel

Excel 允许很容易地对重复值进行条件格式化。但是，结果显示的是单元格而不是整个行或列。

我想要一个基于第一个单元格的条件适用于整行的条件格式。

例如，如果 A 列在 A2、A3、A4 上有 3 个重复的列，那么它会点亮第 2、3 和 4 行，而不仅仅是单元格 A2、A3、A4？

没有 Visual Basic 是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:16:59.037

是的，有可能。不是突出显示列，而是突出显示行，然后使用公式查找重复项。

![在此处输入图像描述](https://i.stack.imgur.com/IvFjx.png)

# jquery - 使用 jquery 监听复选框状态

> ID：15860403
> 
> 赞同：0
> 
> 时间：2013-04-07T08:28:54.053
> 
> 标签：jquery, plugins, checkbox, radio-button, listener

我创建了一个插件，在其中我将标准复选框替换为 iPhone 之类的滑动按钮。我可以将按钮与复选框绑定，即当我单击“是”按钮时，复选框被选中，当我单击“否”按钮时，复选框未被选中。同样，我也为单选按钮创建了一个插件。现在的问题是，如果有人使用 jquery 检查复选框或使用 jquery 选择单选按钮，我如何收听此事件并更改我使用插件创建的相应按钮，因为我无法控制选择的代码单选按钮。

示例代码（我希望在单击按钮时调用更改事件，因为我不控制单击按钮。基本上我想听事件）：

```
<input type="radio" name="radio" id="radio1"> Radio 1 </BR>
<input type="radio" name="radio" id="radio2"> Radio 2 </BR>
<input type="radio" name="radio" id="radio3"> Radio 3 </BR>
<button>click me</button>

$('input:radio').change(function(){
    alert($(this).attr('id') + ' is changed');
});

$('button').click(function(){
    $('#radio1').prop('checked', 'true');
}); 
```

[http://jsfiddle.net/s24101984/v3Zfn/](http://jsfiddle.net/s24101984/v3Zfn/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:36:52.540

According to [https://stackoverflow.com/a/4836831/280222](https://stackoverflow.com/a/4836831/280222) it's by design that JavaScript doesn't trigger the event when the check box is updated programatically.

If you have control over the code changing the attribute then you can use:

```
$('button').click(function(){
    $('#radio1').prop('checked', true).change();
}); 
```

In any case: If you're writing a plugin I suggest that you make it an implementation detail that use use a check box underneath the hood. Try to offer a suitable API for your users instead. That would also work this problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:27:13.567

好的，我得到了答案，这是已回答此问题的链接 [LINK](https://stackoverflow.com/questions/8392192/need-checkbox-change-event-to-respond-to-change-of-checked-state-done-programmat)

我们可以为此使用 Hooks，示例：

```
jQuery.attrHooks.checked = {
    set: function (el, value) {
        el.checked = value;
        $(el).trigger('change');
    }
}; 
```

同样，我们也有链接中共享的 propHooks、jsfiddle

[http://jsfiddle.net/2nKPY/](http://jsfiddle.net/2nKPY/)

# ruby - 从 vm 获取 sinatra 应用程序

> ID：15860408
> 
> 赞同：1
> 
> 时间：2013-04-07T08:29:25.023
> 
> 标签：ruby, macos, sinatra, vmware-fusion

我在 osx 10.8 上运行 vmware fusion 5，我的客户操作系统是 Arch Linux，目前我可以通过 ssh 完美地进入客户操作系统，`ssh 172.16.4.191`但是当我尝试一个简单的 sinatra 应用程序时

```
require 'sinatra'

get '/hi' do
  "Hello world!!!!!!!"
end 
```

`ruby hi.rb`

```
2013-04-06 19:45:18] INFO  WEBrick 1.3.1
[2013-04-06 19:45:18] INFO  ruby 2.0.0 (2013-02-24) [x86_64-linux]
== Sinatra/1.4.2 has taken the stage on 4567 for development with backup from WEBrick
[2013-04-06 19:45:18] INFO  WEBrick::HTTPServer#start: pid=426 port=4567 
```

它在我的主机操作系统中不可用

```
curl 172.16.4.191:4567
curl: (7) couldn't connect to host 
```

任何建议都会很棒，当然我会根据需要提供更多信息。

编辑：

与我的mac共享被选中，“虚拟机在外网共享mac的ip地址。mac为虚拟机的网络流量提供NAT”

编辑：

我已经切换到桥接模式，它现在位于我的局域网上，我仍然可以 ssh 进入它，但连接到我的 sinatra 应用程序仍然没有这样的运气。

并且 iptables 没有显示任何规则

```
Chain INPUT (policy ACCEPT)
target     prot opt source               destination

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-07T10:19:35.407

您的 hi.rb 中需要这一行：

```
set :bind, '0.0.0.0' 
```

[文档](http://www.sinatrarb.com/configuration.html#__server_hostname_or_ip_address)说“ 0.0.0.0”是默认值。这是错的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T01:24:39.803

以防万一有人试图在带有 NAT/sinatra 的 vmware 的 mac/windows 7 上执行此操作，请确保已安装并配置了 IIS 管理器（连接到服务器 -> localhost:4567）。

在我的 Windows 浏览器中，localhost:4567/promo_id/ 有效

从我在 mac 中的浏览器， http://172.16.178.xxx:4567/ [promo_id](http://172.16.178.xxx:4567/promo_id/) / 其中 172.16.178.xxx 是来自 ipconfig 的 IPv4 地址

# box2d - Box2d 黑洞吸引力

> ID：15860413
> 
> 赞同：0
> 
> 时间：2013-04-07T08:29:58.167
> 
> 标签：box2d, processing

我希望在我的游戏中添加一个黑洞功能，但我被困在吸引力的计算上。

我知道[在 Box2D 中制作一个漩涡](https://stackoverflow.com/questions/8565637/make-a-vortex-in-box2d)

但实际上我的物体并没有被黑洞吸引，它们正在一点一点地远离中心

这是我的代码：

```
 public void applyVortexForce(PhysicBody bodyCollider) {

    Vec2 speed = this._physicBody.getBody()
            .getLinearVelocityFromWorldPoint(
                    bodyCollider.getBody().getWorldCenter());

    speed.mul(1.8f);
    Vec2 currentSpeed = new Vec2(bodyCollider.getBody()
            .getLinearVelocity().x, bodyCollider.getBody()
            .getLinearVelocity().y);

    Vec2 diff = speed.sub(currentSpeed);

    currentSpeed = currentSpeed.add(diff);
    currentSpeed.mul(bodyCollider.getBody().getMass());

    bodyCollider.getBody().setLinearVelocity(
            new Vec2(currentSpeed.x, currentSpeed.y));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:00:17.180

我建议根据物体与“漩涡”之间的距离施加力，而不是手动改变线速度。

[本教程](http://www.emanueleferonato.com/2012/03/28/simulate-radial-gravity-also-know-as-planet-gravity-with-box2d-as-seen-on-angry-birds-space/)向您展示如何模拟径向重力，我认为这可能适合您的目的

# javascript - 在 Internet Explorer 中旋转时钟指针

> ID：15860415
> 
> 赞同：9
> 
> 时间：2013-04-07T08:30:08.290
> 
> 标签：javascript, jquery, internet-explorer, jquery-plugins, clock

我正在尝试使用 jQuery 创建一个时钟。我可以旋转所有的时针、分针和秒针，但是在 Internet Explorer 中像在其他浏览器中一样精确地旋转它时遇到了一些问题。

为什么会出现这种情况？如何在 Internet Explorer 中像在其他浏览器中一样旋转时钟指针？

这是我迄今为止创建的：

```
$(document).ready(function(){
    var every_second = 1000;
    var every_minute = 60000;
    var every_twelve_minute = 60000;

    setInterval(rotateSeconds,every_second);
    setInterval(rotateMinutes,every_minute);
    setInterval(rotateHours,every_twelve_minute);
});

var seconds_angle = 0;
function rotateSeconds() {
    var element = $(".seconds");
    if(seconds_angle < 360) {
        seconds_angle = seconds_angle+5;
    }
    else {
        seconds_angle = 0;
    }
    element.rotate(seconds_angle);
}

var minutes_angle = 0;
function rotateMinutes() {
    var element = $(".minutes");
    if(minutes_angle < 360) {
        minutes_angle = minutes_angle+5;
    }
    else {
        minutes_angle = 0;
    }
    element.rotate(minutes_angle);
}

var hours_angle = 0;
function rotateHours() {
    var element = $(".hours");
    if(hours_angle < 360) {
        hours_angle = hours_angle+1.25;
    }
    else {
        hours_angle = 0;
    }
    element.rotate(hours_angle);
} 
```

这是一个指向所有内容的[jsFiddle 链接](http://jsfiddle.net/LYzzX/1/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-07T08:49:17.897

你有两个选择：

*   你可以运行一个处理跨浏览器旋转的 jQuery 插件，你会很容易在 google 中找到一个。

*   或者，您可能对 microsoft 矩阵转换感兴趣：http: [//msdn.microsoft.com/en-us/library/ms533014](http://msdn.microsoft.com/en-us/library/ms533014(v=vs.85).aspx) (v=vs.85).aspx ，您必须了解什么是 2*2旋转矩阵以及如何计算其项。这并不复杂。与 css3 旋转的不同之处在于，旋转中心默认位于元素的左上角，您可能必须使用边距。

因此，如果您选择第二种解决方案：对于 IE 9 和 10，使用带有 css3 旋转功能的 -ms-transform 规则，对于其他 IE，使用带有 Microsoft 矩阵的过滤规则。您可以使用 Modernizr 来检测 csstransforms 功能，并使用 css 父条件和 css 类 .csstranforms 和 .no-csstransformsMdernizr 添加 onload。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-07T08:35:08.997

IE 8,7,... 不支持 CSS 旋转

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-02T16:21:56.590

你没有说你在 IE 中的时钟到底出了什么问题——以及在哪个版本的 IE 中。

如果我确实在网页上画了一个模拟时钟，我可能会选择 SVG。

IE6-8 不支持 SVG，所以如果你需要支持，我会使用[Raphaël JS](http://raphaeljs.com/)库。它在可用的地方创建 SVG，并回退到 IE6-8 上的专有 VML。看看他们的网站，他们有很酷的例子，包括一个有趣的极地时钟（同心圆）。

这是一篇文章，准确解释了您要实现的目标：在 Raphael 之上完成的[模拟时钟：没有图像](http://www.emanueleferonato.com/2010/12/11/javascript-analog-clock-with-no-images-and-no-css/)的模拟时钟，带有帧和小时刻度线。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-28T10:43:39.003

你可以尝试使用[jQuery Rotate 插件](http://code.google.com/p/jqueryrotate/)来为你处理跨浏览器，你只需要使用这个来旋转：

```
$('#myImage').rotate(30) //for a 30 degree rotation Where #myImage is the id of the element you want rotated. 
```

以下浏览器支持它：

*   互联网浏览器 6.0 >
*   火狐 2.0 >
*   野生动物园 3 >
*   歌剧 9 >
*   谷歌浏览器

[在这里检查。](http://code.google.com/p/jqueryrotate/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-05-28T14:00:14.907

您可以使用一个`canvas`元素来旋转时钟指针，如果您包含[excanvas](http://code.google.com/p/explorercanvas/)，它将在 IE7+8 中工作，这是一个在旧版本的 IE 中启用画布的插件。

IE 9 和 10 已经支持画布。

工作演示： http: [//jsfiddle.net/w1ll3m/qVqUb/4/](http://jsfiddle.net/w1ll3m/qVqUb/4/)（使用[coolclock](http://randomibis.com/coolclock/)插件）。只需确保仅在 IE<9 带有[条件注释](http://www.quirksmode.org/css/condcom.html)时才加载 excanvas ：

您可以使用coolclock 插件或编写自己的时钟。

jsfiddle 网站本身在 IE 7/8 中不起作用。将以下代码复制到 html 文件中并在 IE 中打开它，它可以工作：

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>demo</title>
  <script type='text/javascript' 
    src='http://code.jquery.com/jquery-1.6.4.js'></script> 
  <script type='text/javascript' 
    src="http://randomibis.com/coolclock/coolclock.js"></script>
  <script type='text/javascript'>
  $(window).load(function(){
    CoolClock.config.skins = {skin1:{
    outerBorder:
      {lineWidth:2, radius:95, color:"black", alpha:1 },
    smallIndicator:
      {lineWidth:2, startAt:88, endAt:92,color:"black", alpha:1 },
    largeIndicator:
      {lineWidth:4, startAt:79, endAt:92, color:"black", alpha:1 },
    hourHand:
      {lineWidth:8, startAt:-15,endAt:50, color:"black", alpha:1 },
    minuteHand:
      {lineWidth:7, startAt:-15, endAt:75, color:"black", alpha:1 },
    secondHand:
      {lineWidth:1, startAt:-20, endAt:85, color:"red", alpha:1 },
    secondDecoration:
      {lineWidth:1,startAt:70,radius:4,fillColor:"red",color:"red",alpha:1 }
}};
CoolClock.findAndCreateClocks();
});
</script>
<!--[if lt IE 9]>
  <script type="text/javascript" 
    src="http://randomibis.com/coolclock/excanvas.js"></script>
  <![endif]-->
</head>
  <body>
    <canvas id="clockid" class="CoolClock:skin1:200:false">
    </canvas>
  </body>
</html> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-06-04T01:22:45.690

您可以使用[jquery transit](http://ricostacruz.com/jquery.transit/)插件来制作任何类型的过渡效果，包括旋转。它是一个轻量级的插件，有很多选择。改变旋转中心。您可以使用 transformOrigin 如下所示。

```
$('.box')
  .css({ transformOrigin: '0px 0px' })
  .transition({ rotate: '45deg' }); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-06-03T10:18:04.413

实际上你的问题是关于在 IE 中绘制 css 线

这篇文章可能会有所帮助：

[http://www.ofdream.com/code/css/xline2.php](http://www.ofdream.com/code/css/xline2.php)

# c - 是否可以使用 clock_settime() 将时间写入 RTC 芯片

> ID：15860421
> 
> 赞同：2
> 
> 时间：2013-04-07T08:30:56.287
> 
> 标签：c, linux, time, clock

/dev/rtc 上的 ioctl [RTC_SET_TIME](http://linux.die.net/man/4/rtc) 可用于设置 RTC 芯片的时间和日期。但是 /dev/rtc 只允许一个进程打开它。

所以我计划继续使用不需要打开 /dev/rtc 设备的[clock_settime() 。](http://linux.die.net/man/3/clock_gettime)但我不清楚它是否将日期和时间设置为 RTC*芯片*。

根据手册页，`clock_settime()`API 支持以下时钟。哪一个写入 RTC*芯片*（如果它支持）？

```
CLOCK_REALTIME
    System-wide realtime clock. Setting this clock requires appropriate privileges. 
CLOCK_MONOTONIC
    Clock that cannot be set and represents monotonic time since some unspecified starting point. 
CLOCK_PROCESS_CPUTIME_ID
    High-resolution per-process timer from the CPU. 
CLOCK_THREAD_CPUTIME_ID
    Thread-specific CPU-time clock. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T21:03:36.200

不幸`clock_settime()`的是，不，不会更新实时时钟 (RTC)。

我见过人们`system("rtc -s hw");`在打电话`clock_settime()`强制 RTC 更新后使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-08T10:09:33.157

**简短的回答：**

是否`clock_settime()`写到 RTC 是未指定的，因此是特定于**实现的**。

* * *

**长答案：**

调用 clock_settime(CLOCK_REALTIME, ...) 保证设置操作系统的系统时钟，这是内核中的软件时钟。而已。

*   操作系统可能会在关机时将系统时钟写入 RTC。( [vxWorks](https://docs.windriver.com/bundle/Wind_River_Linux_Security_Profile_Evaluated_Configuration_Guide_6.0_1/page/1566404.html) )
*   操作系统可以周期性地将系统时钟写入RTC，例如每11分钟一次。（[可能的 Linux 配置](https://tldp.org/HOWTO/Clock-2.html)）
*   操作系统可以实现 RTC 漂移补偿。设置 RTC 可能会产生意想不到的结果。( [Linux 与 adtimex](https://tldp.org/HOWTO/Clock-2.html) )

底线：在设置 RTC 之前，了解事物是如何在您的平台上实现的。

# php - 空请求检测PHP

> ID：15860426
> 
> 赞同：1
> 
> 时间：2013-04-07T08:31:19.860
> 
> 标签：php, html, http-headers, request

我有一个问题，网络托管公司仅向服务器发送标头请求，然后服务器试图“友善”并采取行动......请求数据；

```
 10.252.237.56 - - [29/Mar/2013:15:25:48 +1100] "HEAD / HTTP/1.1" 200 942 
```

我如何在 PHP 中检测到这一点并停止将其传递给用户端。

拉里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:39:44.680

```
$_SERVER['REQUEST_METHOD'] 
```

显然，您可以将其与“HEAD”进行比较，并在它们相等时停止您的脚本。

但是，我认为您想要这样做的唯一原因是性能（尽管我认为这些请求根本不会产生任何负载）。从安全的角度来看，HEAD 请求不应该对您的应用程序造成任何损害。您应该使用身份验证、会话等来验证请求的真实性。禁止您的网络托管公司发送这些请求不会阻止其他人调用简单的`GET /`（或`PUT`其他未实现的方法）。

# ruby-on-rails - 红宝石冰块。如何将重复规则存储在数据库中？

> ID：15860435
> 
> 赞同：0
> 
> 时间：2013-04-07T08:32:15.520
> 
> 标签：ruby-on-rails, rubygems, ice-cube

我可能会在 db 中保存一个时间表，`repeats = schedule.to_hash`或者`repeats = schedule.to_yaml` 然后从 db 中使用它`schedule = repeats.from_hash`

但我需要知道什么是规则。例如，如果每周重复一次，我如何将规则存储在 db 中，或者我如何从计划中知道规则？是否有一些方法，例如 .to_hash 和 .from_hash 用于规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T08:56:53.617

A`Schedule`可以有许多*重复*规则和*异常*规则。你可以通过`schedule.recurrence_rules`或得到它们`schedule.exception_rules`。此外，还可能存在*重复时间*和*异常时间*。（有关这些规则的详细信息，请访问：[https](https://github.com/seejohnrun/ice_cube#quick-introductions) ://github.com/seejohnrun/ice_cube#quick-introductions ）

因此，最好只将序列化存储`Schedule`在数据库中，而不是特定规则。

如果您愿意，类似`to_hash`和的方法`to_yaml`也适用于规则：

```
irb(main)> schedule.recurrence_rules.first.to_yaml
=> "---\n:validations: {}\n:rule_type: IceCube::DailyRule\n:interval: 1\n"

irb(main)> schedule.recurrence_rules.first.to_hash
=> {:validations=>{}, :rule_type=>"IceCube::DailyRule", :interval=>1} 
```

# c++ - 如何使用 C++ 在 MAC OS 中捕获鼠标事件

> ID：15860442
> 
> 赞同：1
> 
> 时间：2013-04-07T08:32:44.087
> 
> 标签：c++, macos

我想在 Mac os 中捕获鼠标右键和左键单击并使用以下代码：

* * *

```
CGEventRef event = CGEventCreate(NULL);
CGEventType eventType = CGEventGetType(event); 
```

* * *

```
cout << "mouse event type is : " << eventType << endl; 
```

* * *

我使用此代码查看 eventType 例如必须是 kCGEventLeftMouseDown 或显示事件类型的整数值，但此代码不捕获鼠标事件并返回 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:03:29.707

这应该怎么做：D 你需要捕获现有事件......你只需调用一个助手并制作一个新事件......但这很简单。

看看`CGEventTap`你想要什么。

*鉴于操作系统启用了可访问性，事件水龙头在系统范围内工作！*

* * *

一些代码：

```
//called for each event
static CGEventRef myCGEventCallback(CGEventTapProxy proxy, 
                                        CGEventType t,
                                        CGEventRef event,
                                        void *refcon);

- (void)threaded_listenForDrags {
    if (!_eventTap)
    {
        int eventMask = CGEventMaskBit(kCGEventLeftMouseDown)
        | CGEventMaskBit(kCGEventLeftMouseUp) 
        | CGEventMaskBit(kCGEventLeftMouseDragged)
        | CGEventMaskBit(kCGEventRightMouseDragged)
        | CGEventMaskBit(kCGEventOtherMouseDragged);

        _eventTap = CGEventTapCreate(kCGHIDEventTap,
                                    kCGHeadInsertEventTap,
                                    kCGEventTapOptionListenOnly, 
                                    eventMask, 
                                    myCGEventCallback,
                                    (__bridge void*)self);
        if (!_eventTap)
        {
            DDLogError(@"%@ no tap; universal access?", NSStringFromSelector(_cmd));
            return;
        }
        CFRunLoopSourceRef runLoopSource = CFMachPortCreateRunLoopSource(NULL,
                                                                         _eventTap, 0);
        CFRunLoopAddSource(CFRunLoopGetCurrent(), runLoopSource, 
                           kCFRunLoopCommonModes);

        CFRelease(runLoopSource);       
    }
    CGEventTapEnable(_eventTap, true);

    CFRunLoopRun();
}

- (void)threaded_endListenForDrags {
    CFMachPortRef et = _eventTap;

    CGEventTapEnable(_eventTap, false);
    _eventTap = nil;

    dispatch_sync(dispatch_get_main_queue(), ^{
        if(_enabled) {
            _enabled = NO;
            [self setEnabled:YES];
        }
    }); 

    CFRunLoopStop(CFRunLoopGetCurrent());
    CFRelease(et);
} 
```

# haskell - 修改 Hakyll 示例站点

> ID：15860444
> 
> 赞同：6
> 
> 时间：2013-04-07T08:32:50.110
> 
> 标签：haskell, web, blogs, hakyll

我希望修改以下代码，以便与其生成指向网站上最新三篇文章的链接，而是像在传统博客中一样完整地复制文章的正文。我有点难以理解下面发生了什么，以及必要的改变是什么。

```
match "index.html" $ do
    route idRoute
    compile $ do
        let indexCtx = field "posts" $ \_ ->
                            postList $ fmap (take 3) . recentFirst

        getResourceBody
            >>= applyAsTemplate indexCtx
            >>= loadAndApplyTemplate "templates/default.html" postCtx
            >>= relativizeUrls 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-05T05:42:01.520

这并非完全无关紧要。第一步是引入[快照](http://jaspervdj.be/hakyll/tutorials/05-snapshots-feeds.html)。

如教程中所述，这可确保您可以在索引中包含博客文章，*而无需*先将模板应用于 HTML。所以你会得到类似的东西：

```
match "posts/*" $ do
    route $ setExtension "html"
    compile $ pandocCompiler
        >>= loadAndApplyTemplate "templates/post.html"    postCtx
        >>= saveSnapshot "content"
        >>= loadAndApplyTemplate "templates/default.html" postCtx
        >>= relativizeUrls 
```

现在，为了在索引页面上显示帖子，您将能够使用整个`$body$`帖子。为此，您只需要更新`templates/post-item.html`为：

```
<div>
    <a href="$url$"><h2>$title$</h2></a>
    $body$
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-07T22:21:00.213

我知道这篇文章有点老了，但由于它似乎没有在这里解决，所以我就是这样做的。

首先按照@jaspervdj 的描述保存快照：

```
match "posts/*" $ do
  route $ setExtension "html"
  compile $ pandocCompiler
    >>= loadAndApplyTemplate "templates/post.html"  postCtx
    >>= saveSnapshot "content"
    >>= loadAndApplyTemplate "templates/default.html" postCtx
    >>= relativizeUrls 
```

然后使用以下`index.html`命令加载所有帖子快照`loadAllSnapshots`：

```
match "index.html" $ do
  route idRoute
  compile $ do
    posts <- recentFirst =<< loadAllSnapshots "posts/*" "content"
    let indexCtx = listField "posts" postCtx (return posts) `mappend`
                   defaultContext 
```

由于快照是在应用`default`模板之前拍摄的，因此`$body$`within的值`$for(posts)$`将只是每个帖子模板的内容，而没有应用默认模板。

# c# - Azure 上的 MongoDB：replSet 无法获取 local.system.replset 配置

> ID：15860449
> 
> 赞同：1
> 
> 时间：2013-04-07T08:33:27.613
> 
> 标签：c#, mongodb, azure

我正在使用[MongoDB 工作者角色项目](http://docs.mongodb.org/ecosystem/tutorial/deploy-mongodb-worker-roles-in-azure/)在 Azure 上使用 MongoDB。我有两个独立的云服务，其中一个一切正常，但在另一个中，MongoDB 工作人员角色陷入了某种`Busy (Waiting for role to start... Calling OnRoleStart`状态。

我连接到其中一个 MongoDB 工作角色并访问 MongoDB 日志文件，发现以下错误：

```
[rsStart] replSet can't get local.system.replset config from self or any seed (EMPTYCONFIG) 
```

有关于如何正常解决此问题的线程，但 Windows Azure 没有。我没有为 MongoDB 工作角色配置任何东西（除了 Azure 存储连接字符串），它在另一个服务中工作，所以我不知道为什么它不适用于这个服务。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:05:11.113

Some time ago I was trying to host RavenDB in Azure as Worker Role and had lot's of issues with it as well.

Today, I believe it's better to run database the "suggested" way on target platform which is as Windows Service according to this ["Install MongoDB on Windows"](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-windows/) guide. This way you won't have to deal with Azure-specific issues. To achieve this you can:

1.  Use [Azure CmdLets](http://www.windowsazure.com/en-us/develop/php/how-to-guides/powershell-cmdlets/) along with CsPack.exe to create the package for MondoDB.
2.  A solution similiar to [RavenDB Master-Slave reads on Azure](https://github.com/cloudpowerups/cp-azure-samples/tree/master/CP.Azure.Samples.RavenDB) which I posted on GitHub.
3.  Sign up for Virtual Machine (beta) on Azure, kick off a machine and install MongoDB manually there.

But I guess the most important question when hosting DB is: where do you plan to store the actual DB?

*   Azure's CloudDrive, which is a VHD stored in Cloud Storage, has the worst IO performance possible. Not sufficient for normal DB usage I'd say.
*   Ephemeral storage, a Cloud Service local disk space, has perfect IO, but you lose all data once VM is deleted. This means you usually want to make continious or at least regular backups to Cloud Storage, maybe through CloudDrive.
*   [Azure VM attached disk](http://www.windowsazure.com/en-us/manage/windows/how-to-guides/attach-a-disk/) - has better IO than CloudDrive, but still not as good as Ephemeral storage.

As for the actual troubleshooting to your problem. I'd suggest wrapping OnRoleStart with try-catch, writting it to the log, enabling RDP to the box and then connecting and looking into the actual issue right in place. Another alternative is using IntelliTrace, but you need VS Ultimate for that. Also, don't forget that Azure requires usage of Local Resources if your app needs to make writes to the disk.

# c# - ConnectionString 属性尚未初始化，同时访问静态属性

> ID：15860452
> 
> 赞同：0
> 
> 时间：2013-04-07T08:33:50.840
> 
> 标签：c#, .net, asp.net-mvc

我在一个模型中有以下代码，用于处理所有与数据库相关的活动，所以每次我想使用数据库时我都不会编写冗余代码，这个模型类看起来像这样：

`Shared.cs`：

```
private static string ConStr
    {
        get
        {
            Shared shrObj = new Shared();
            return shrObj.DecryptString(ConfigurationManager.ConnectionStrings["constr"].ConnectionString);
        }

    }

    public static SqlConnection SqlCon = new SqlConnection(ConStr);

    public static SqlDataReader ORC(SqlCommand sqlCom)
    {
        SqlDataReader sqlReader=null;

        try
        {
            SqlCon.Open();//ERROR HERE 
            //The ConnectionString property has not been initialized.
            sqlReader = sqlCom.ExecuteReader();

        }
        catch (Exception ex)
        {
            WriteToFile(DateTime.Now.ToString("dd-MM-yyyy HH:mm:ss") + " | " + ex, 0);
            return sqlReader;
        }
        return sqlReader;
    }
            //Functions for closing connections…
            //Functions for reading scalar…
            //etc. 
```

现在，当我尝试像这样使用这些功能时，来自其他模型： `User.cs`

```
internal IEnumerable<User> GetUser()
    {
        var sqlCom = new SqlCommand("SELECT * FROM [user];", Shared.SqlCon);

        using (var blgs = Shared.ORC(sqlCom))
        {
            // ……. … …
            }
        }
    } 
```

让我感到困惑的另一件事是，当登录时第一次从这里调用这个数据读取函数时，它工作正常，它总是第二次调用会产生问题。

可能是我只是不玩写静态属性。但我必须保持它是静态的，因为它被`SqlConnection`本身是静态的对象使用，可以直接从类外部使用。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:40:48.067

在 Web 应用程序中，通常最好通过 using 语句打开和关闭连接，如下所示：

```
using (SqlConnection conn = new SqlConnection(connectionString))
    {
     conn.Open();
// do some stuff
} 
```

不要重用 sqlconnection，因为它会导致 webapp 出现意外超时。

# windows-7 - matplotlib 图形冻结

> ID：15860453
> 
> 赞同：1
> 
> 时间：2013-04-07T08:33:51.387
> 
> 标签：windows-7, matplotlib

我的问题是，在绘制图形后，图形窗口冻结，我无法缩放，也无法再使用该窗口。我必须关闭它。这是我的代码：

```
import matplotlib.pyplot as plt
import numpy as np
abra = plt.figure()
tengely = abra.add_subplot(1, 1, 1)
x = np.linspace(0, 20, 100)
y = np.sin(x)
y2 = np.cos(x)
tengely.plot(x, y)
tengely.plot(x, y2, 'g')
plt.legend(('szinusz', 'koszinusz'), 'upper right')
tengely.set_xlabel('$x$')
tengely.set_ylabel('$\sin(x)$ és $\cos(x)$')
tengely.set_title('$\sin(x)$ és $\cos(x)$')
abra.show() 
```

可能是什么问题？提前致谢！

# java - 在阵列上同步。它是在所有元素上同步还是在数组对象上同步？

> ID：15860462
> 
> 赞同：1
> 
> 时间：2013-04-07T08:35:21.763
> 
> 标签：java, synchronization

如果我在数组上同步，这是否意味着我正在同步其中的所有元素，或者我正在同步数组对象？如果后者是真的，那么我如何一次同步数组中的所有元素，以便确保在执行某个块时不会访问非？

例如，假设我们有一个银行账户数组，我们希望确保在执行某个代码块时没有线程可以访问任何账户。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T08:37:38.300

它在阵列本身的监视器上同步。

即使您*可以*对所有元素进行同步，也不能确保它们不被访问——因为同步只是建议性的。

这里的解决方案可能是封装：根本不允许其他代码看到数组本身。这样您就可以通过您自己的方法（例如，像这样做）来控制其他代码如何访问数组的成员`ArrayList`。

请注意，即使您执行了所有这些操作，它也不会阻止其他代码在您的独占代码开始运行*之前*获取数组元素，然后在您的独占代码运行时使用该引用（例如，改变它所引用的对象）。您并没有真正向我们提供有关您正在尝试做什么的太多信息，但您可能需要采取不同的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-15T15:38:19.557

Java 9 以不同的方式处理内存，并且有更多用于同步数组元素的选项。有关详细的技术说明，请参阅“使用 JDK 9 内存顺序模式” [http://gee.cs.oswego.edu/dl/html/j9mm.html](http://gee.cs.oswego.edu/dl/html/j9mm.html)

如果此链接将来消失，请谷歌“java varhandle”了解更多信息。

# java - Java 线程 - 同步代码

> ID：15860465
> 
> 赞同：1
> 
> 时间：2013-04-07T08:36:12.540
> 
> 标签：java, multithreading

为什么必须指定哪个对象锁定了同步代码块？

您不必指定哪个对象锁定了同步方法，因为它总是被“this”锁定（我相信）。

我有两个问题：

*   **为什么不能用 'this' 以外的对象阻止非静态方法？**
*   **为什么必须指定阻塞同步代码的对象？**

我已经阅读了 SCJP for Java 6 的第九章，但我仍然不清楚这一点。

我意识到这可能是一个基本问题，但我是线程新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:53:16.587

> 为什么不能用 'this' 以外的对象阻止非静态方法？

你可以：

```
public void foo() {
    synchronized (lock) {
        ...
    }
} 
```

> 为什么必须指定阻塞同步代码的对象？

因为这就是语言设计者选择设计语言的方式。`synchronized`，在实例方法上使用时，隐式`this`用作锁。`synchronized`在块上使用时必须明确指定锁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T08:53:34.910

你可以。编码

```
synchronized foo() {
    // some stuff
} 
```

逻辑上等于代码

```
foo() {
    synchronized(this) {
        // some stuff
    }
} 
```

我说“逻辑上”是因为这两个示例生成不同的字节码。

如果方法`foo()`是静态同步，则对类对象进行。

但是，您可能希望创建多个同步块，这些块在不同对象上同步到一个类甚至一个方法中。在这种情况下，您可以使用`synchronized (lock)`where `lock`is not `this`：

```
foo() {
    synchronized(one) {}
    ///..........
    synchronized(two) {}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T09:23:52.747

我认为你的两个问题实际上是相同的。假设你想在多个线程之间同步对象 a 的方法 m，你需要一个线程可以与之通信的公共基础系统或通道，这实际上是对象锁提供的，所以当你想在那里同步对象的方法时不需要另一个对象锁来执行此操作，因为您访问的对象本身就有这个锁，这就是语言设计的方式和原因。

虽然同步一个块不是一回事，线程可以有不同的谈话基础，而不是这个对象本身，例如，你可以为同步块设置一个相同的对象作为同步对象锁，这样这个类的所有对象都可以同步堵塞！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T08:52:36.027

1.  您可以锁定对象的任何实例，但程序员通常使用`this`或`locker`...
2.  因为它限制了其他线程（代码处理单元）对该部分代码的访问，所以您确保整个该部分以一致的方式运行，并且没有任何东西（即变量）会被另一个线程警告。

考虑：

```
a = 1;
a++; 
```

线程一个到达第二行，您期望`a = 2`但另一个线程执行第一行，而不是`a = 1`第一个线程和`a = 2`第二个线程的 2。现在：

```
synchronized (whatever)
{
   a = 1;
   a++;
} 
```

现在第二个线程将被阻止进入`code block`（`synchronized`主体），直到第一个离开它（释放锁）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T08:52:58.780

您可以指定任何需要锁定同步代码块的对象。实际上，您根本不应该使用`synchronize(this)`（或者可能要小心，请参阅[Java 中的避免同步（this）？](https://stackoverflow.com/questions/442564/avoid-synchronizedthis-in-java)）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-07T08:54:50.727

每个对象都有一个可以同步的锁：

final Object lock = new Object() synchronized ( lock ) { ... }

如果你想同步整个方法，你不能说在哪个对象上，所以它总是“this”对象。

同步 foo() {....}

顺便说一句，第一种锁定方式更好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-07T08:55:28.583

不建议锁定每个方法，`this`因为它在大多数情况下会降低并发性。因此建议使用***Lock Stripping***，其中*仅将需要保护的代码的特定部分保存在同步块*中。

这是一种实践，在[Java Concurrency in Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)中有很好的解释。但请注意，这本书只有在您对线程有一些基本经验时才有用。

要记住的一些掘金：

*   不要过度使用同步
*   仅在需要保护整个方法时才使用方法级同步
*   使用不同的锁来保护两个不相关的实体，这会增加并发的机会。否则读取或写入两个不相关的实体线程将阻塞在同一个锁上。

    ```
    public void incrementCounter1(){
         synchronized(lockForCounter1){
             counter1++;
         }
    }  

    public void incrementCounter2(){
         synchronized(lockForCounter2){
             counter2++;
         } 
    } 
    ```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-07T09:08:56.900

来自[并发](http://docs.oracle.com/javase/tutorial/essential/concurrency/index.html)教程，[同步方法](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)部分：

> 要使方法同步，只需将 synchronized 关键字添加到其声明中：

```
public class SynchronizedCounter {
private int c = 0;

public synchronized void increment() {
    c++;
}

public synchronized void decrement() {
    c--;
}

public synchronized int value() {
    return c;
}
} 
```

> 如果 count 是 SynchronizedCounter 的一个实例，那么使这些方法同步有两个效果：
> 
> *   **首先，同一对象上**的同步方法的两次调用不可能交错。当一个线程正在为一个对象执行同步方法时，所有其他为同一对象调用同步方法的线程都会**阻塞**（暂停执行），直到第一个线程处理完该对象。
>     
>     
> *   其次，当同步方法退出时，它会自动与任何后续**对同一对象**的同步方法调用建立起之前的关系。这保证了对象状态的更改对所有线程都是可见的。

简而言之，这就是 Java 中同步的工作原理。

> 您不必指定哪个对象锁定了同步方法，因为它总是被“this”锁定（我相信）。

对于实例方法是正确的，对于静态方法，它锁定在类对象上。

> 为什么不能用 'this' 以外的对象阻止非静态方法？

注意：

```
 public synchronized void increment() {
  c++;
 } 
```

在行为上等同于：

```
 public  void increment() {
  synchronized(this) {
     c++;
  }
 } 
```

在此代码段中，您可以替换`this`为您想要的任何对象。

> 为什么必须指定阻塞同步代码的对象？

有些，我们称之为关键，代码块只能按顺序运行，但在不受控制的并发环境中，它可能会并行运行。这就是存在同步机制的原因。

所以我们可以这样划分代码：

*   可以安全并行运行的代码（默认情况）
*   必须同步的代码（必须以某种方式标记）

该标记是通过`synchronized`关键字和相应的锁定对象进行的。

如果您有两个不能一起运行的不同关键代码块，它们都将具有 synchronized 关键字，假设它们具有相同的锁定对象。

在执行第一个块时，锁定对象变为“锁定”。如果在此期间需要执行第二个块，则该代码块的第一个命令是：

```
synchronized(lock) { 
```

但是该锁定对象处于锁定状态，因为第一个块正在执行。第二个块的执行在该语句上停止，直到第一个块完成执行，并解锁锁定对象的状态。然后第二个块可以继续执行（并再次锁定锁定对象）。

这种机制称为[互斥](http://en.wikipedia.org/wiki/Mutual_exclusion)，[锁](http://en.wikipedia.org/wiki/Lock_(computer_science))是一个通用概念，与 Java 编程语言无关。

“锁定对象锁定”过程的详细信息可以在[这里](https://stackoverflow.com/a/12786899/679982)找到。

# ruby-on-rails - 样式化 Rails date_select 的日期字段

> ID：15860467
> 
> 赞同：4
> 
> 时间：2013-04-07T08:36:37.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, activesupport, ruby-on-rails-4

在 Rails 的表单中，日期`select`下拉菜单很简单：

```
<%= f.label :my_date %>
<%= f.date_select :my_date %> 
```

然后我得到`select`了年、月和日的 3 个下拉菜单。有没有一种简单的方法可以在`select`不使用 JavaScript 的情况下在这些元素之间添加 HTML？我希望能够更好地设计和标记它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:15:49.157

将其转换为文本字段并添加 JQuery datepicker 或类似的。

这里有一个很好的指南，[http://railscasts.com/episodes/213-calendars](http://railscasts.com/episodes/213-calendars)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:02:33.493

您可以使用 CSS 轻松设置它们的样式，因为 date_select 的每个部分都以 '_1i'、'_2i' 等为后缀。对于 id 为“my_date”的 date_select，您可以使用

```
#my_date_1i  // the year
#my_date_2i  // the month
#my_date_3i  // the day 
```

希望这可以帮助

干杯

# delphi - 在 Windows XP 上的 Firemonkey 中播放视频

> ID：15860468
> 
> 赞同：0
> 
> 时间：2013-04-07T08:36:37.870
> 
> 标签：delphi, firemonkey, delphi-xe3

我用来`TMediaPlayerControl`在我的应用程序中显示视频。

这是我显示视频的代码：

```
TrailerMediaPlayer.FileName := GetcurrentDir + '\Trailer\Trailer.avi';
if (TrailerMediaPlayer.State = TMediaState.Stopped) and
  (TrailerMediaPlayer.CurrentTime < TrailerMediaPlayer.Duration) then
begin
  TrailerMediaPlayer.Play;
  PositionTrackBar.Max := TrailerMediaPlayer.Duration;
end
else
begin
  TrailerMediaPlayer.CurrentTime := 0;
end; 
```

它适用于 Windows 7/8，但在 Windows XP 中`unsupported media file`出现错误！

请注意，Windows Media Player 在 Windows XP 中播放我的 Trailer.avi。

如何在没有任何额外组件的情况下在每个 Windows 操作系统（自 XP 起）上播放此视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:05:50.923

获取[madexcept](http://madshi.net/madExceptDescription.htm)或任何其他类似工具并发布应用程序的堆栈。此外，这应该是机器上安装的编解码器和其他应用程序的问题，即使电影是在 XP 的 Windows Media Player 中播放的。

作为几个建议：使用 Windows Media Player ActiveX 或 VideoLan 的[ActiveX 插件](http://wiki.videolan.org/ActiveX/Delphi)。

还请务必遵循此[http://docwiki.embarcadero.com/Libraries/XE3/en/FMX.Media.TMediaPlayerControl](http://docwiki.embarcadero.com/Libraries/XE3/en/FMX.Media.TMediaPlayerControl)和[http://docwiki.embarcadero.com/RADStudio/XE3/en/Building_a_Basic_Media_Player](http://docwiki.embarcadero.com/RADStudio/XE3/en/Building_a_Basic_Media_Player)

PS：请注意 FireMonkey 不是 VCL - [http://docwiki.embarcadero.com/RADStudio/XE3/en/Converting_from_VCL_to_FireMonkey](http://docwiki.embarcadero.com/RADStudio/XE3/en/Converting_from_VCL_to_FireMonkey)并且不要混合这两个。（我只是怀疑你正在这样做，所以没有代码我无法确定......）

# jquery - 在弹出窗口中显示 MVC 验证

> ID：15860470
> 
> 赞同：-1
> 
> 时间：2013-04-07T08:36:49.633
> 
> 标签：jquery, asp.net-mvc-4, jquery-validate

我有一个使用内置客户端验证的 MVC 表单，通过将注释放在模型类上并根据默认 MVC 标准添加不显眼的验证 Javascript。但是我的要求是，我希望在弹出窗口中显示我的消息，而不是表单顶部的验证摘要。

在这种情况下，我使用的弹出窗口是引导模式，因为这个项目是基于引导设计的。

那么如何在提交表单时覆盖 onvalidate 方法以触发我的弹出窗口显示并获得正确的消息以在弹出窗口中？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-07T08:36:49.633

我能找到的最佳解决方案是破解 jquery 验证插件，因为无论如何 MVC 都在使用它。我说hack，因为插件没有公开添加事件处理程序的方法，并且重新实例化验证不是一种选择。所以我在找到事件名称后手动添加了绑定。这是示例：

```
$("#form1").bind('invalid-form.validate', 
            function(form, validator) {
                var errors = "";
                for(var i = 0; i < validator.errorList.length; i++){
                    errors += validator.errorList[i].message+" ";
                }
                if (errors != "")alert(errors);
            }
        ); 
```

在我的情况下，我没有调用 Javascript 警报，而是将代码放在那里调用我的弹出窗口。

# vb.net - 如何在字符串变量中插入“字符？

> ID：15860478
> 
> 赞同：1
> 
> 时间：2013-04-07T08:37:41.290
> 
> 标签：vb.net, string, variables, special-characters

这个怎么插入？

```
Dim SpCharacter As String = " " " 
```

或者

```
Dim XMLSitemap As String = "<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">" 
```

插入所有内容**“**和**>**等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:40:53.323

你需要通过加倍来逃避它：

```
Dim SpCharacter As String = " "" "

Dim XMLSitemap As String = "<urlset xmlns=""http://www.sitemaps.org/schemas/sitemap/0.9"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd"">" 
```

请参阅MSDN 上[Visual Basic 中的字符串基础知识](http://msdn.microsoft.com/en-us/library/ms234766.aspx)：

> Visual Basic 将字符串文字中的两个引号解释为字符串中的一个引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T08:41:00.870

在 VB.NET 中，您可以`"`通过连续传递两次来进行转义：

```
Dim SpCharacter As String = " "" " 
```

或者

```
Dim XMLSitemap As String = "<urlset xmlns=""http://www.sitemaps.org/schemas/sitemap/0.9"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd"">" 
```

# .net - how can I limit the memory size for .net / mono process

> ID：15860481
> 
> 赞同：7
> 
> 时间：2013-04-07T08:37:57.177
> 
> 标签：.net, memory, mono

imagine you have an application (single process) written in c#

By default the application is allocating huge virtual memory, far more than it needs (for example the resident memory is about 10mb, while virtual memory is about several GB).

In Java it's possible to use an option to limit this with `java -mx128m`

**How can I do the same for .net / mono application?** And the bonus question: is it possible to enforce / change the GC options to always keep as low memory usage as possible (collect as soon as possible, not when system is running out of memory)

basically my goal is to create a .net application with minimal memory footprint

EDIT: in order to make it more clear I insert this scenario, given that nearly every .net application seems to have similar problem:

I run a monodevelop, which is c# application under mono - it eats **1800** MB of virtual memory, while it only uses **291 MB** of resident memory. That means the application is using only less than 300mb of memory but it asked for 1800MB for unknown reason. This reason is what I would like to discover as well as the way how to prevent it doing so.

That probably isn't problem for most of users, but it may be problem for applications running on clusters like SGE when task is limited by virtual memory.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-17T16:59:11.983

Mono 有几个标志用于设置内存的上限，例如 java。例如，当我运行集群作业时，我设置了以下环境变量。

setenv MONO_GC_PARAMS 最大堆大小=8G

您可以在此处查看此问题的更多选项：

[Mono GC max-heap-size 没有记录。在生产中使用是否安全？](https://stackoverflow.com/questions/19362898/mono-gc-max-heap-size-isnt-documented-is-it-safe-to-use-in-production)

# java - 在当前运行的模拟器（Android）上运行应用程序

> ID：15860484
> 
> 赞同：1
> 
> 时间：2013-04-07T08:39:04.990
> 
> 标签：java, android, eclipse, sdk

我是Android的初学者。我目前正在运行一个模拟器。我创建了一个安卓应用程序。当我运行那个应用程序时，它开始启动一个新的模拟器并在那个新的模拟器中运行。但是，我想在正在运行的同一个模拟器中运行该应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:52:24.463

打开您创建的运行配置，选择“目标”选项卡。选择单选按钮“在所有兼容设备/AVD 上启动”。将该单选按钮下方的组合框切换为“Active AVD”。

这将在所有当前运行的模拟器上启动您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T09:02:26.540

如果您在“目标”部分下没有任何设备。您可以尝试重新启动 AVD 管理器。为此，请打开您的`command prompt`并输入以下命令：

```
adb kill-server 
```

这将停止 AVD Manager 服务。

然后输入：

```
adb start-server 
```

或者

```
adb logcat 
```

重新启动服务。然后检查您是否可以将您的添加`AVD`为`Target`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-07T08:42:37.260

尝试通过 Eclipse 中运行按钮上的箭头进入“运行配置”。

然后。在“目标”下，您可以选择“始终提示选择设备”。
这将允许您选择任何正在运行的模拟器或设备。

# c# - Response method which is provided by the page class?

> ID：15860485
> 
> 赞同：2
> 
> 时间：2013-04-07T08:39:07.877
> 
> 标签：c#, asp.net, redirect, response

I need to create a button that will be offered to generate a printable invoice. This will reformat the webpage specifically for printing the buying tickets information.

I am only allowed to use one webpage, and somehow everything else on the page must disappear so that only the Printable Invoice shows. How can I do this?

I was told that "The trick is to use the Response method, which is provided by the Page class (more precisely, it is provided by a parent class named System.Web). What you show on the screen is managed by the System.Web object and using the Response method you can put anything you want in there. "

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:48:42.887

无需弄乱`Response`对象。

诀窍是使用[CSS 媒体类型](http://www.w3.org/TR/CSS2/media.html)- 特别是[打印 CSS 文件](http://www.w3.org/TR/CSS2/page.html)。

将打印 CSS 文件添加到页面：

```
 <LINK REL="stylesheet" TYPE="text/css" MEDIA="print" HREF="foo.css" /> 
```

在此文件中，您可以设置`display`需要隐藏的所有内容的属性，`none`并且可以调整需要显示的 CSS 以优化打印效果。

当用户使用普通浏览器打印功能进行打印时，这将用于渲染打印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T08:48:24.550

“技巧”的意思是您可以发送任何您想要的响应。例如，如果您想发送 pdf，您可以更改响应以发送 pdf 的字节流，更改标头，客户端将收到一个 pdf 文件。

也就是说，这个问题非常模糊，并且有很多可能的答案。“只允许使用一个网页” - 这是否意味着您只能拥有一个 url 或一个 aspx 文件？因为您可以非常轻松地将 Server.Transfer 转移到第二页，这将使您看起来仍然在同一页上。

它还必须是包含此发票的网页吗？或者您可以使用工具（例如 SQL Reporting Services）生成它并将其作为 pdf 格式提供吗？

如果您被单个网页卡住，最简单的方法是拥有两个面板。其中一个包含“发票”，另一个包含页面通常包含的内容。如果用户想要发票，隐藏另一个面板并显示发票。发票本身可以/应该是自定义控件 (ascx)，因此您可以随时将其插入，并且仍然保持关注点分离。

# android - using Buttons to retrieve data from database

> ID：15860500
> 
> 赞同：0
> 
> 时间：2013-04-07T08:41:35.913
> 
> 标签：android

I have connected a database in my Android Application. Now I have created a button and when it is clicked, that should get the next data from the table of database. I have cursor and he moveToFirst() and moveToNext() methods in my code. also I have set onclick listener to my button. but in output when I click the button, its is not fetching the next data from database

heres the part of code where I have tried to set on click listener for button

```
 c=myDbHelper.query(myDbHelper.DB_PATH +"/MainTable",null, null, null, null,null, null);
        c.moveToFirst();

                 myques=(TextView)findViewById(R.id.question);
                 myrg=(RadioGroup)findViewById(R.id.rg1);
                 myc1=(RadioButton)findViewById(R.id.radio0);
                 myc2=(RadioButton)findViewById(R.id.radio1);
                 myc3=(RadioButton)findViewById(R.id.radio2);
                 myc4=(RadioButton)findViewById(R.id.radio3);
                 NxtQues=(Button)findViewById(R.id.button1); 

               myques.setText(c.getString(1));
               myc1.setText(c.getString(2));
               myc2.setText(c.getString(3));
               myc3.setText(c.getString(4));
               myc4.setText(c.getString(5));
               NxtQues.setOnClickListener(new OnClickListener()
            {
                @Override
                public void onClick(View V)
                {

                    c.moveToNext();
                }

            }); 
```

what changes should I make in this code to set on click listener in a proper way.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:52:33.510

所以在你的代码中有一些问题。首先在这里：

```
c = myDbHelper.query(myDbHelper.DB_PATH +"/MainTable", ...); 
```

由于 query() 方法的第一个参数是“原始”表名，因此您无法为其分配数据库的完整路径（如果它不是真正的表名......），这是错误的。只需像这样分配**MainTable**：

```
c = myDbHelper.query("MainTable", null, null, null, null, null, null); 
```

那么你关于从数据库中获取数据的逻辑一点都不好。您只为您的小部件分配了一次值，并且没有更多。它们永远不会被刷新，您需要调用尽可能多的 setText() 方法来更新小部件的内容。实际上，您不会更新它们。

您需要将逻辑更改为：

```
@Override
public void onClick(View V) {
  if (c.moveToNext()) {
     myques.setText(c.getString(1));
     myc1.setText(c.getString(2));
     myc2.setText(c.getString(3));
     myc3.setText(c.getString(4));
     myc4.setText(c.getString(5));
  }
} 
```

**建议：** 当您使用 Cursor 的“getters”方法时，我建议您使用列名来获取列索引：

```
myques.setText(c.getString(c.getColumnIndex("columnName"))); 
```

# c - 来自 recvfrom 的以太网标头与预期不符

> ID：15860501
> 
> 赞同：0
> 
> 时间：2013-04-07T08:41:39.303
> 
> 标签：c, network-programming, ethernet

我正在用 C 编写一些网络数据包嗅探代码（在以太网 LAN 上运行）。在尝试打印以太网标头时，我遇到了一些困惑。根据[维基百科](https://en.wikipedia.org/wiki/Ethernet_frame#Preamble_and_start_frame_delimiter)，前 8 个字节由前导码和分隔符组成，接下来的 6 个字节是 MAC 目标地址。

然而，当我实际运行我的代码时，我发现在我从 recvfrom 调用中获得的字节中，最初的 8 个字节（前导码和定界符）丢失了。换句话说，我可以从第一个字节本身开始读取目标地址。

这是代码的相关部分

```
char buffer[BUFFERSIZE];
struct addrinfo servinfo;

servinfo.ai_family = PF_PACKET;
servinfo.ai_socktype = SOCK_RAW;
servinfo.ai_protocol = htons(ETH_P_ALL);

int fd = socket(servinfo.ai_family, servinfo.ai_socktype, servinfo.ai_protocol);
int plen = recvfrom(fd, buffer, BUFFERSIZE, 0, &caddr, &clen);
int c = 0;
printf("Destination Address: %02x:%02x:%02x:%02x:%02x:%02x\n",buffer[c], buffer[c+1], buffer[c+2], buffer[c+3], buffer[c+4], buffer[c+5]);
printf("Source Address: %02x:%02x:%02x:%02x:%02x:%02x\n",buffer[c+6], buffer[c+7], buffer[c+8], buffer[c+9], buffer[c+10], buffer[c+11]); 
```

这将打印正确的目标地址，而我应该在跳过缓冲区中的前 8 个字节后通过打印得到正确的结果。

我在这里错过了什么，或者做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:43:43.663

> 这将打印正确的目标地址，而我应该在跳过缓冲区中的前 8 个字节后通过打印得到正确的结果

序言是一个非常底层的概念，**由 NIC 严格处理**。它甚至对操作系统都不可见，更不用说由`recvfrom`.

# android - 尝试运行具有多个图像的应用程序时模拟器崩溃

> ID：15860504
> 
> 赞同：1
> 
> 时间：2013-04-07T08:41:57.543
> 
> 标签：android

尝试运行具有大尺寸图像的应用程序时收到此错误消息

> 04-07 08:32:01.837: E/dalvikvm-heap(647): 20736000 字节的外部分配对于这个进程来说太大了。04-07 08:32:01.897: E/GraphicsJNI(647): VM 不允许我们分配 20736000 字节

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:00:28.533

尝试阅读[这篇](http://developer.android.com/training/displaying-bitmaps/index.html)文章，看看它是否有效。

# python - 如何在 Python 中定义操作多变量函数的运算符（例如积分器）？

> ID：15860509
> 
> 赞同：0
> 
> 时间：2013-04-07T08:42:15.503
> 
> 标签：python, function, functional-programming, integral

如何在 Python 中定义操作多变量函数的运算符（例如积分器）？我的问题是，当我定义一个积分函数 numint 以数值积分一个多变量函数沿它的一个变量时，应该首先引入该变量，而我需要在调用运算符时由用户引入它可以从一行代码更改为另一行。一种方法是不使用运算符并在需要时将积分公式植入应该计算积分的变量，但这样代码会变得非常麻烦，因此最好尽可能避免它。对我来说错误的代码如下。有什么让它正常工作的想法吗？

```
var('x,y,z,t,x1,y1,z1,t1')
U=function('U0',x,y,z,t,x1,y1,z1,t1)
U=sin(x*y*z*t - x1*y1*z1*t1)^5

num=2
def numint(f, u, h):
    integ = 0.5*h*(f(u=0) + f(u=1))
    for i in range(1,num):
        integ = integ + h * f(u=i*h)
    return integ

print numint(U,t1,1/num)+numint(U,t,1/num) 
```

现在进行积分的变量是“u”，在函数“U”中根本找不到，因此结果将是：

```
2*sin(t*x*y*z - t1*x1*y1*z1)^5 
```

虽然我期待它曾经集成一次 U WRT t 和一次 WRT t1 然后将它们加在一起。

据我所知，问题在于局部变量和全局变量。也许使用闭包和嵌套函数是定义运算符的合适方法，如在[此处](http://en.wikipedia.org/wiki/Python_syntax_and_semantics#Closures)提供的示例中所做的那样，但该示例对单变量函数很有用，我不能将它用于多变量函数。

* * *

更新。下面的代码做我想要*的（见最后一个**打印**命令，以前的打印是为了实验*）但我应该使用函数的自由参数（如`y`）并尝试使用虚拟变量（如`u`上面的示例代码）失败：

```
var('x,y,z,t,x1,y1,z1,t1')
R=[x,y,z,t]
R1=[x1,y1,z1,t1]
U=function('U0',*(R+R1))
U0(x,y,z,t,x1,y1,z1,t1)=sin(x-x1)*sin(y-y1)*sin(z-z1)*sin(t-t1)
         # if write U0=... instead of U0(...)=... the order of arguments of U0 is not
         # specified and e.g. sin(x-x1) might become sin(x-y) from the system's viewpoint

num=2
def numint(func, h):

    #integ = 0.5*h*(func(x=x,y=0,z=z,t=t,x1=x1,y1=y1,z1=z1,t1=t1) + func(x=x,y=1,z=z,t=t,x1=x1,y1=y1,z1=z1,t1=t1))
    #for i in range(1,num):
    #    integ = integ + h * func(x=x,y=i*h,z=z,t=t,x1=x1,y1=y1,z1=z1,t1=t1)

    #integ = 0.5*h*(func(x,0,z,t,x1,y1,z1,t1) + func(x,1,z,t,x1,y1,z1,t1))
    #for i in range(1,num):
    #    integ = integ + h * func(x,i*h,z,t,x1,y1,z1,t1)

    integ = 0.5*h*(func(y=0) + func(y=1))
    for i in range(1,num):
        integ = integ + h * func(y=i*h)

    return integ

print numint(U,h=1/num),'\n'
print numint(U0,h=1/num),'\n\n'

print U0(y=z,z=y),'\n'
print numint(U(y=z,z=y),h=1/num),'\n'
print numint(U0(y=z,z=y),h=1/num),'\n\n'

print numint(U0(y=t,t=y),h=1/num).substitute(t=y)+numint(U0(y=t1,t1=y),h=1/num).substitute(t1=y) 
```

结果是：

```
0.250000000000000*U0(x, 0, z, t, x1, y1, z1, t1) + 1/2*U0(x, 1/2, z, t,
x1, y1, z1, t1) + 0.250000000000000*U0(x, 1, z, t, x1, y1, z1, t1) 

1/2*sin(-y1 + 1/2)*sin(z - z1)*sin(x - x1)*sin(t - t1) +
0.250000000000000*sin(-y1 + 1)*sin(z - z1)*sin(x - x1)*sin(t - t1) +
0.250000000000000*sin(z - z1)*sin(x - x1)*sin(t - t1)*sin(-y1) 

sin(-y1 + z)*sin(y - z1)*sin(x - x1)*sin(t - t1) 

0.250000000000000*U0(x, z, 0, t, x1, y1, z1, t1) + 1/2*U0(x, z, 1/2, t,
x1, y1, z1, t1) + 0.250000000000000*U0(x, z, 1, t, x1, y1, z1, t1) 

1/2*sin(-z1 + 1/2)*sin(-y1 + z)*sin(x - x1)*sin(t - t1) +
0.250000000000000*sin(-z1 + 1)*sin(-y1 + z)*sin(x - x1)*sin(t - t1) +
0.250000000000000*sin(-y1 + z)*sin(x - x1)*sin(t - t1)*sin(-z1) 

1/2*sin(-t1 + 1/2)*sin(z - z1)*sin(y - y1)*sin(x - x1) +
0.250000000000000*sin(-t1 + 1)*sin(z - z1)*sin(y - y1)*sin(x - x1) +
0.250000000000000*sin(t - 1)*sin(z - z1)*sin(y - y1)*sin(x - x1) +
1/2*sin(t - 1/2)*sin(z - z1)*sin(y - y1)*sin(x - x1) +
0.250000000000000*sin(z - z1)*sin(y - y1)*sin(x - x1)*sin(t) +
0.250000000000000*sin(z - z1)*sin(y - y1)*sin(x - x1)*sin(-t1) 
```

请注意我是如何被迫使用`.substitute()`. 这里集成是单变量的，但是当集成的维度增加时，这种编码方式会变得混乱。有什么想法可以更清洁、更直接地进行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:48:15.057

您可以使用[`functools.partial()`](http://docs.python.org/2/library/functools.html#functools.partial)将具有多个变量的函数转换为具有一个自由变量的函数。

**编辑：**你的功能是

```
def numint(func, h):
    ... 
```

所以你应该使用例如

```
p = partial(numint, h=1/2.0) 
```

然后你可以调用新函数：

```
p(func) 
```

您*应该*使用关键字参数来指示您将哪些参数提供给部分！并且非关键字论点不能跟在关键字论点之后。

**Edit2：**请注意，Python 本身不*具备*对方程进行符号操作的能力，这似乎是您正在寻找的。您可能应该将其重新标记为 SageMath 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:17:34.080

```
var('x,y,z,t,x1,y1,z1,t1,var1')
U=function('U0',x,y,z,t,x1,y1,z1,t1)
U0(x,y,z,t,x1,y1,z1,t1)=sin(x-x1)*sin(y-y1)*sin(z-z1)*sin(t-t1)
    # if write U0=... instead of U0(...)=... the order of arguments of U0 is not
    # specified and e.g. sin(x-x1) might become sin(x-y) from the system's viewpoint

num=2.0
def numint(func, h):
    #global var1
    integ = 0.5*h*(func(var1=0) + func(var1=1))
    for i in range(1,num):
        integ = integ + h * func(var1=i*h)
    return integ

print numint(U0(x=var1),1/num)+numint(U0(y1=var1),1/num) 
```

# virtualbox - 关于调整虚拟磁盘大小的疑问

> ID：15860514
> 
> 赞同：0
> 
> 时间：2013-04-07T08:43:04.310
> 
> 标签：virtualbox

我有一个动态虚拟磁盘，第一次有 5GB 的虚拟空间，这是我转到驱动器属性时可以看到的空间（虚拟 SO 是 wnidows XP）。

我用 vboxmanage 将它的大小调整为 15GB，但是当我启动虚拟机时，在驱动器的属性中我可以看到相同的空间，总共 5GB。

新空间是分配的分区？如果是这样，如何将虚拟磁盘的所有分区合并到一个分区中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T15:56:03.827

在 Linux 上，我以这种方式调整我的（ Win-VM ）分区的大小。

**1）在命令行\ bash中调整vdi的大小**

```
VBoxManage modifyhd path/yourVMImage.vdi --resize 30000 
```

*（--resize，以兆字节为单位更改容量的命令）*
*（仅适用于 VDI 和 VHD 格式）*

**2）在此之后，你必须使用像 gparted-live 这样的分区管理器来扩展你的分区[在这里下载它](http://sourceforge.net/projects/gparted/files/gparted-live-stable/)**

**2.1）您必须使用这些实时工具启动您的虚拟机，然后您可以使用 gparted-live 扩展您的分区。**

2.1.1) 从 gparted-live 启动，你必须添加另一个虚拟硬盘，按照[这里描述的步骤](https://www.virtualbox.org/manual/ch03.html#settings-storage)

> 要添加另一个虚拟硬盘、CD/DVD 或软盘驱动器，请选择要添加的存储控制器（IDE、SATA、SCSI、SAS、软盘控制器），然后单击下方的“添加磁盘”按钮树。然后您可以选择“添加 CD/DVD 设备”或“添加硬盘”。（如果您单击软盘控制器，则可以添加软盘驱动器。）或者，右键单击存储控制器并在那里选择一个菜单项。
> 
> 在窗口的右侧，您可以设置以下内容：
> 
> ...您可以选择要使用的图像文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:07:11.560

是的，新大小是必须与现有分区合并的未分配分区。为此，可以使用任何分区管理器应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T15:35:35.800

如果您的文件系统使用 LVM。最后的步骤很简单：

1.  lvextend /dev/vg_nile/lv_root /dev/sda2;
    #假设 vg_nile 是虚拟组的名称，lv_root 是逻辑卷，/dev/sda2 是新添加的分区
2.  resize2fs /dev/vg_nile/lv_root

# ruby - 浓缩咖啡机

> ID：15860516
> 
> 赞同：0
> 
> 时间：2013-04-07T08:43:29.843
> 
> 标签：ruby, sinatra

我使用带有Enginery 生成器（Ruby gems）的framework Espresso。我创建了新项目，但不明白这个应用程序是如何工作的。我将与 Espresso 合作。请解释一下 struct Expresso Application。我可以运行这个应用程序：rackup config.ru 我可以编辑控制器，但我不明白这个项目中的 ruby​​ 脚本之间的依赖关系。

我运行项目，但为什么这样做呢？配置.ru

```
require File.expand_path('../base/boot', __FILE__)
puts App.urlmap
run App 
```

在项目而不是 /base/boot 目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:20:26.663

需要 '../base/boot' 实际上会加载依赖项、控制器、模型等并构建应用程序。

该应用程序存储在`App`常量下，因此您可以从不同的文件访问它： [https ://github.com/espresso/enginery/blob/master/app/base/base/boot.rb#L9](https://github.com/espresso/enginery/blob/master/app/base/base/boot.rb#L9)

`puts App.urlmap`将显示应用程序要服务的所有路线。

并将`run App`启动您的应用程序。

您也可以通过启动应用程序`ruby app.rb`，然后您不需要在启动时传递服务器/端口。相反，您将它们设置在 中`config/config.yml`，如下所示：

```
development:
  server: Thin
  port:   5252 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:23:11.787

对于启动文件，该`config.ru`文件看起来很正常。`rack`您将从项目文件夹启动应用程序，使用如下命令：

```
rackup -p 8080 
```

以下行：

```
require File.expand_path('../base/boot', __FILE__) 
```

将加载`../base/boot`文件（类似于require_relative，但也适用于较旧的Ruby，例如1.8.7），我猜这需要`App`定义的依赖项。类或模块`App`将实现一个`call`方法。要启动服务器，机架主机调用`App.new`（由于 调用`run App`），然后在每个请求上它都会调用`.call( env )`生成的对象（对象不必是`App`对象，但在更简单的框架中它将是）。

该变量`env`包含请求和机架环境的所有详细信息，可以检查这些详细信息以获取当前路径、cookie、查询参数等的详细信息。通常通过您将使用的 Sinatra 和 Espresso 辅助方法抽象访问这些数据。

Sinatra 和 Espresso 辅助方法看起来像是在做魔术声明，但它们只是普通方法。通常他们会进行一些计算，然后存储一个代码块/ lambda 供机架稍后调用。辛纳特拉的`get`就是这样。. . 它不是真正的声明性代码。相反，当解析控制器时，它只需要代码块并告诉应用程序对象（稍后）在路径匹配时调用它。

# c# - c# winrt 空字节数组

> ID：15860517
> 
> 赞同：0
> 
> 时间：2013-04-07T08:43:37.907
> 
> 标签：c#, windows-runtime

我有`WriteableBitmap`。我知道变量中`wp1`存在图像，因为我保存了这张图片，一切都很好。我需要将图像编码成一个`byte[]`数组。

```
WriteableBitmap wp1 = new WriteableBitmap(1, 1); ;
wp1.SetSourceAsync(memStream);

using (Stream stream = wp1.PixelBuffer.AsStream())
{
    if (stream.CanWrite)
    {
        byte[] pixelArray = new byte[stream.Length];
        await stream.ReadAsync(pixelArray, 0, pixelArray.Length);
    }
} 
```

毕竟`pixelArray`是空的。数组`pixelArray`的长度等于 的长度`stream`，但所有字节都为零。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T08:48:45.377

我认为你的问题是这行代码：

```
wp1.SetSourceAsync(memStream); 
```

这是一种异步方法，因此您必须等到它完成后再继续。尝试将其更改为：

```
await wp1.SetSourceAsync(memStream); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:20:58.107

如果您使用的是 WriteableBitmap Extensions，则有一种更简单的方法可以为您做到这一点，例如：`var pixelDataArray = wp1.ToByteArray();`

# javascript - 用另一个特定的短语替换某个短语

> ID：15860529
> 
> 赞同：0
> 
> 时间：2013-04-07T08:45:14.147
> 
> 标签：javascript, jquery, regex

我只是想用 javascript / jQuery 中的 unicode 字符替换某个短语/单词。

我已经尝试了以下和其他一些解决方案，但似乎没有任何效果。

```
$(document).ready(function(){
    $("nav li a").html(function(i, currentHtml) {
          switch(currentHtml){
            case "About":
            return "&#xe00f;";

            case "Work":
            return "&#xe010;";

                case "CV":
                    return "&#xe00c;";

            case "Resume":
            return "&#xe00e;";

                case "down":
                    return "&#xe00d;";

            case "Mail":
            return "&#xe011;";

            case "Dribbble":
            return "&#xe015;";

            case "GooglePlus":
             return "&#xe012;";

            case "Facebook":
             return "&#xe013;";

            case "Twitter":
             return "&#xe014;";

                default:
             return currentHtml;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:52:29.703

您的代码有效，但仅适用于第一次替换。

您需要使用：

```
$(document).ready(function(){
    var text = $(".nav li a").html();

    text = text.replace(/About/g,'&#xe00f;');
    text = text.replace(/Work/g,'&#xe010;');
    ....

    $(".nav li a").html(text);
}); 
```

**代码更新**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T09:13:26.220

你错过了一个}。

```
$(document).ready(function(){
    $("nav li a").html(function(i, currentHtml) {
          switch(currentHtml){
            ......
          default:
             return currentHtml;
         **}**
    });
}); 
```

# backbone.js - 如何知道用户在backbone.js中更改了集合

> ID：15860538
> 
> 赞同：1
> 
> 时间：2013-04-07T08:46:11.243
> 
> 标签：backbone.js, collections

我列出了一个带有一个复选框和描述的集合。现在，当用户单击提交按钮时，我想验证用户是否应该至少单击一个复选框。我知道集合中有一个事件“更改”，但不知道如何使用它。

我希望这个集合应该有一个布尔类型的属性来检查集合是否被改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:24:16.873

谢谢你的及时回复。我知道我可以使用集合的更改事件。我想知道我的解决方案是否正确。这是我的代码。请注意，在呈现我的视图后注册事件，因为默认情况下我更改了一些值。

```
complienceListView = Backbone.View.extend({
    el: $('#complienceList'),
    initialize: function () {
      complienceList.bind("reset", this.render, this);     
    },
    render: function () {
        complienceList.each(function (complience) {
        $(this.el).append(new complienceListItemView({ model: complience }).render().el);
        }, this);
        complienceList.on('change', function(){isDirty = true;})
        return this;
    }
});

var isDirty = false; 
```

# jquery - 触摸/单击 href 后 JQuery 移动自动完成功能不起作用

> ID：15860540
> 
> 赞同：0
> 
> 时间：2013-04-07T08:46:28.743
> 
> 标签：jquery, jquery-mobile

如上所述，jqm 自动完成功能最初运行良好，但是当触摸/单击建议的项目时，自动完成功能停止工作。但是，如果我刷新页面，它会再次起作用。有人可以告诉它是什么原因以及如何解决它？页面流：

1.  `http://localhost/m/index.php`: 自动完成效果很好

2.  输入一些键，显示建议列表。触摸建议项目时，页面变为`http://localhost/m/ABC`。（ABC 是项目名称）。这个URL实际上被改写成`http://localhost/m/index.php?q=ABC`目的是为了有友好的URL。

3.  现在，自动完成停止工作。
4.  刷新页面`http://localhost/m/ABC`，然后自动完成功能再次起作用。

下面是我的脚本：

```
$("#mainPage").on("pageinit", function(e) {
console.log("Ready to bring the awesome.");
var sugList = $("#suggestions");

$("#searchField").on("input", function(e) {
    var text = $(this).val();
    if(text.length < 1) {
        sugList.html("");
        sugList.listview("refresh");
    } else {
        $.get("/m/suggest01.php", {search:text}, function(res,code) {
            var str = "";
            for(var i=0, len=res.length; i<len; i++) {
                str += "<li><a href=/m/"+res[i]["value"]+">"+res[i]["value"]+"</li>";
            }
            sugList.html(str);
            sugList.listview("refresh");
            sugList.trigger( "updatelayout");
            console.dir(res);
        },"json");
    }
});
}); 
```

# php - Excel 中的日期格式不正确，而 CSV 中的日期格式正确

> ID：15860542
> 
> 赞同：-1
> 
> 时间：2013-04-07T08:46:34.340
> 
> 标签：php, csv

我正在将数据库表导出到 csv，然后当我在 Excel 中打开它时遇到了问题。包含日期和时间的列显示不同的格式。它一定与 AM 和 PM 符号有关，因为从随附的图像中可以看出，它切断了 AM，格式也发生了变化（2 而不是 02）

![在此处输入图像描述](https://i.stack.imgur.com/avMJF.png)

没有不必要列的丑陋 csv：

```
"2013/02/13 20:23 PM"
"2013/02/13 20:26 PM"
"2013/02/13 23:27 PM"
"2013/02/13 23:27 PM"
"2013/02/14 01:01 AM"
"2013/02/16 22:50 PM"
"2013/02/17 19:26 PM"
"2013/02/21 01:19 AM"
"2013/02/26 04:27 AM"
"2013/02/27 01:03 AM"
"2013/02/28 04:53 AM"
"2013/02/28 04:53 AM"
"2013/02/28 04:53 AM"
"2013/03/01 03:54 AM"
"2013/03/06 04:23 AM"
"2013/03/06 04:23 AM"
"2013/03/10 10:27 AM"
"2013/03/10 10:35 AM"
"2013/03/10 10:39 AM"
"2013/03/10 10:48 AM"
"2013/03/10 23:25 PM"
"2013/03/11 04:12 AM"
"2013/03/11 04:50 AM"
"2013/03/11 04:51 AM"
"2013/03/11 04:52 AM" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:39:07.080

日期格式没有意义，也许这就是 Excel 的问题。

应该是晚上 21:44 或晚上 9:44。尝试不使用 AM/PM 后缀，或将小时数从 13-23 转换为 1-11。

# python - dyld：库未加载：/usr/local/libodep/lib/libintl.8.dylib

> ID：15860543
> 
> 赞同：3
> 
> 时间：2013-04-07T08:46:41.640
> 
> 标签：python, macos, libreoffice

我想在 LibreOffice 4.2 中使用 unoconv，但似乎我无法启动 LibreOffice 的 python。

当我跑

```
/Applications/LibreOffice.app/Contents/MacOS/LibreOfficePython.framework/Versions/3.3/Resources/Python.app/Contents/MacOS/LibreOfficePython  -v 
```

错误是：

```
dyld: Library not loaded: /usr/local/libodep/lib/libintl.8.dylib
  Referenced from: /Applications/LibreOffice.app/Contents/MacOS/LibreOfficePython.framework/Versions/3.3/Resources/Python.app/Contents/MacOS/LibreOfficePython
  Reason: image not found
Trace/BPT trap: 5 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T02:09:49.430

我刚刚遇到了同样的问题。修复很丑陋，但基本上遵循迈克尔的方法。该库由 MacPorts 提供并安装在那里：

```
> find /opt/ -name 'libintl*'
/opt/local/include/libintl.h
/opt/local/lib/libintl.8.dylib
... 
```

一个简单的软链接`/usr/`就可以了，但是我不喜欢这样污染树木！

```
> sudo bash
> mkdir -p /usr/local/libodep/lib
> ln -s /opt/local/lib/libintl.8.dylib /usr/local/libodep/lib/libintl.8.dylib 
```

这样，来自 LibreOffice 的 Python 3.3 就可以运行了。我当然希望 LibreOffice 的某个人能够解决这个问题。有谁知道有bug提交了吗？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-12-19T18:54:55.210

不是原始问题的直接答案，但我在运行时搜索相同的错误消息后最终进入了此页面`gpg`。原来 gettext 在升级 ios 期间被破坏了。以下对其进行了排序：

```
brew install gettext
brew link gettext --force 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T09:09:02.600

它尝试加载的库不是 MacOS 上的标准 dylib。创建 LibreOffice 的人应该将 dylib 包含在他们的应用程序包中的某个地方，或者他们应该包含有关如何为 LibreOffice 正确设置内容的说明。

据我所知，您似乎需要[安装 MacPorts](http://mysolr.com/tips/setting-up-macports-on-lion/)才能获取 libintl.8.dylib。

MacPorts 很可能将该库安装到“ `/opt/local/lib/`”而不是“ `/usr/local/libodep/`”中。不确定 LibreOffice 是否足够聪明，知道在这种情况下该怎么做，但是如果您不顾一切，您可以在紧要关头做一个从一个目录中的文件到另一个目录中的符号链接的符号链接。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-03T10:51:44.173

我遇到了同样的问题：

```
dyld: Library not loaded: /usr/local/lib/libintl.8.dylib
  Referenced from:
/opt/local/bin/yasm
Reason: image not found
Trace/BPT trap: 5 
```

我必须安装`MacPorts`and `gettext`，它将`libintl.*`库安装在`/opt/local/lib` `MacPorts`定义 on 的依赖关系`yasm`中`gettext`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T12:15:29.283

您将在此处找到相同的主题以进行后续跟进： [https ://github.com/dagwieers/unoconv/issues/125](https://github.com/dagwieers/unoconv/issues/125)

虽然提供的答案对我不起作用，但安装 macports 对我不起作用，我在 /opt/local/lib/ 上找不到 libintl.8.dylib

我发现其他人有不兼容的问题。gettext 对我也不起作用。

# xcode - opengl 教程 xcode cmake

> ID：15860553
> 
> 赞同：2
> 
> 时间：2013-04-07T08:48:34.590
> 
> 标签：xcode, opengl, cmake

我遵循了 OpenGL-tutorial.org 上的每一条指令，下载了 2.1 代码，通过指定 xcode 的 cmake 运行它并使用它的默认编译器。我配置直到红线消失然后点击生成。但是，它生成的项目文件在 xcode 中打开时显示以下错误：

```
 /OpenGL-tutorial_v0010_21/external/AntTweakBar-1.15/src/LoadOGLCore.h:149:24: Conflicting types for 'glMultiDrawElements'

 /OpenGL-tutorial_v0010_21/external/AntTweakBar-1.15/src/LoadOGLCore.h:214:24: Conflicting types for 'glShaderSource'

 /external/AntTweakBar-ObjectiveC/LoadOGLCore.mm:116:1: Cannot initialize a variable of type 'PFNglMultiDrawElements' (aka 'void (*)(GLenum, const GLsizei *, GLenum, const GLvoid **, GLsizei)') with an lvalue of type 'void (GLenum, const GLsizei *, GLenum, const GLvoid *const *, GLsizei)': type mismatch at 4th parameter ('const GLvoid **' (aka 'const void **') vs 'const GLvoid *const *' (aka 'const void *const *'))

 /external/AntTweakBar-ObjectiveC/LoadOGLCore.mm:116:1: Cannot initialize a variable of type 'PFNglMultiDrawElements' (aka 'void (*)(GLenum, const GLsizei *, GLenum, const GLvoid **, GLsizei)') with an lvalue of type 'void (GLenum, const GLsizei *, GLenum, const GLvoid *const *, GLsizei)': type mismatch at 4th parameter ('const GLvoid **' (aka 'const void **') vs 'const GLvoid *const *' (aka 'const void *const *')) 
```

我正在使用 Xcode 4.6.1 和 cmake 2.8-10

这可能是cmake或教程代码有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-06T19:41:13.610

前两个错误很容易修复，也许它会修复其他两个。请注意 gl.h 中 glShaderSource 的签名。这是：

```
extern void glShaderSource (GLuint shader, GLsizei count, const GLchar* const *string, const GLint *length); 
```

第三个参数是“指向字符串的 const 指针的 const 指针”。

*但是*，请注意 LoadOGLCore.h 中的签名是（扩展宏）：

```
extern "C" { void APIENTRY glShaderSource (GLuint shader, GLsizei count, const GLchar * *string, const GLint *length); 
```

第三个参数是“指向字符串指针的常量指针”（缺少“常量”）。因此，打开 LoadOGLCore.h 并更改（第 214 行）：

```
const GLchar* *string 
```

至：

```
const GLchar* const *string 
```

对有关 glMultiDrawElements 的其他错误执行相同操作。这让我至少可以在 OSX 10.8.5 上构建 AntTweakBar。还没有尝试运行示例项目，但是当我这样做时我会更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:07:05.907

转到这些函数的定义并用正确的（更新）参数定义替换原型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T22:03:21.610

作者在这里，

欢迎使用 StackOverflow，感谢您阅读 opengl-tutorial.org！

这是一个已知问题（仅在 10.8 上，我没有）。但是，提供简单 GUI 的 AntTweakBar 仅用于最后一个教程。其他子项目应该构建得很好。以防万一，您可以删除 CMakeLists.txt 文件中的第 367 到 385 行，然后重新运行 CMake。

当它修复时，我会更新这篇文章。带来不便敬请谅解 ！

# jquery - Jquery中如何停止动画效果（stop方法）

> ID：15860561
> 
> 赞同：0
> 
> 时间：2013-04-07T08:49:26.480
> 
> 标签：jquery, html, css

我是 Jquery 的新手，我正在尝试制作动画，但我不知道如何停止动画。

我有 3 个图像在 3 个锚标记中的高度或宽度不相等，它们堆叠在一个 div 中。

我做了一个脚本，当你 mouseenter() 一个图像时，图像的宽度应该增加 20px，当你 mouseleave() 时，宽度应该达到预览宽度。

我设法做到了，但是当我用鼠标快速浏览图像时，开始增长和缩小，布局变得混乱。

我发现了一些插件可以满足我的需求，但它们都使用宽度和高度相同的图像。

如果有人可以提供帮助，我将不胜感激。

这是代码[http://jsfiddle.net/ClaudiuTicu/9kTft/2/的链接](http://jsfiddle.net/ClaudiuTicu/9kTft/2/)

```
 var original_w;
$('.getBigger').on('mouseenter', function () {
    original_w = $(this).find('img').width(); //add the width of thye image to the parent
    original_h = $(this).find('img').height(); //add the height to the parent

    if ($(this).find('img').is(':animated')) { }
    else {
        if ($(this).attr('style')) { } //has the style attribut
        else {
            $(this).css({
                'width': original_w,
                'height': original_h
            });
        } //dosen't have the style attribut
    }

    if ($(this).find('img').width() == original_w) {
        $(this).find('img').animate({
            'width': original_w + 20
        }).addClass('hovered');
    } //if the image width is equal with the parent's width
    else {

    }

}).on('mouseleave', function () {
    if ($(this).find('img').width() != original_w) {
        $(this).find('img').animate({
            'width': original_w
        }).removeClass('hovered');
    }
    console.log(original_w);
}); //end mouse leave 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:55:44.530

`.stop(true,true)`在所有实例之前使用`.animate()`- 它强制动画进入其最终状态，并删除所有排队的动画。

例子：

```
$(this).find('img').stop(true,true).animate(...); 
```

# android - Google Drive 文件插入错误 quotaExceeded

> ID：15860562
> 
> 赞同：2
> 
> 时间：2013-04-07T08:49:51.773
> 
> 标签：android, google-drive-api

有时当我尝试将文件插入文件夹时，我会收到此响应

```
{
"code": 403,
"errors": [
{
"domain": "usageLimits",
"message": "The user has exceeded their Drive storage quota",
"reason": "quotaExceeded"
}
],
"message": "The user has exceeded their Drive storage quota"
} 
```

什么是“超出配额”？我在哪里可以获得 Google Drive API 的所有错误及其含义的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:39:15.003

错误列表以及如何处理它们的建议：[https ://developers.google.com/drive/handle-errors](https://developers.google.com/drive/handle-errors)

如果您已超出配额，您可以在此处请求更多：[https ://docs.google.com/spreadsheet/viewform?formkey=dG0wOFJPeVRxSUxuMHUzdlZpTkU4Z0E6MQ](https://docs.google.com/spreadsheet/viewform?formkey=dG0wOFJPeVRxSUxuMHUzdlZpTkU4Z0E6MQ)

# asp.net - 将数据网格的值从用户控件访问到 aspx 页

> ID：15860564
> 
> 赞同：1
> 
> 时间：2013-04-07T08:50:00.320
> 
> 标签：asp.net, datagrid, user-controls

我有一个应用程序，在一个 aspx 表单上，我在运行时根据所选输入加载 Web 用户控件。此用户控件包含一个数据网格，该数据网格填充在 ascx 文件的 page_init 上。

现在的问题是在编辑时我无法保存数据，用户控件上的保存按钮不会触发，因此我试图访问我的 aspx 页面上的 gridview 以保存值。

我尝试使用该属性，会话一切可能，但没有运气。

谁能解释一下如何实现这一目标？请举例。

# memory - 8086 地址 b800h：使用 TASM 将符号直接写入显存

> ID：15860567
> 
> 赞同：0
> 
> 时间：2013-04-07T08:50:15.847
> 
> 标签：memory, video, assembly, x86-16, tasm

我想编写一个程序，通过直接写入视频内存来显示 ascii 符号。

```
.model tiny
.stack
.data
.code
main: 

mov ax, b800h
mov ds, ax

mov aL, 'x'
mov es, bx
mov es:[20], aL

end main 
```

当我尝试使用 TASM 编译时出现此错误

```
"Undefined symbol: B800H" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T08:55:33.320

在它前面放一个`0`，这样 TASM 就可以知道它是一个数值而不是一个符号：

```
mov ax, 0b800h 
```

您似乎还缺少从您的程序*返回的任何内容。*没有它，很难说.之后会运行*什么*`mov es:[20], al`代码，但我怀疑它不会很漂亮。

你需要像[int 21, function 4c](http://spike.scu.edu.au/~barry/interrupts.html#ah4c)这样的东西。我一直发现[Ralf Brown 的中断列表](http://www.ctyme.com/rbrown.htm)对于这类事情非常宝贵。

* * *

您*可能*还想考虑转移到过去十年中某个时候一直在积极维护的工具的可能性:-)

TASM 5 于 90 年代发布，并在 2002 年左右进行了修补，并且不支持从那时起完成的许多新内容（MMX、SSE 等）。我个人最喜欢的是 NASM，但还有许多其他选择。

# arrays - 链表和数组的数据存储类型不同吗？

> ID：15860568
> 
> 赞同：0
> 
> 时间：2013-04-07T08:50:19.483
> 
> 标签：arrays, linked-list

最近我在解决下一个问题时遇到了一个问题：

**链表和数组有什么区别？**

A. 两者都排序时的搜索复杂度
B. 动态添加/删除
C. 随机访问效率
D. 数据存储类型

我知道 A、B 和 C 是正确的，但我对 D 感到困惑。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:55:25.880

实际上，从数据存储类型的角度来看，它们之间没有区别。（也许从静态类型的编程语言的角度来看也应该说）你可以将任何结构或任何对象放入其中。关键是在大多数编程语言中，它们是一种类型，这意味着您可以只在它们上存储一种类型。但是，在链表中，您存储指向下一个元素的指针。因此，如果您用编程语言构建自己的链表，只要保持指向下一个元素的指针，就可以将任何类型放入其中。而在数组中，元素是通过指针算术到达的。因此，无论如何，它们都必须是一种类型。所以链表从数据存储类型的感知上来说更加灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T08:40:53.113

我认为作者的意思是数组在内存中是连续存储的，而链表不是。

# widget - Vala 中的自定义 GTK 小部件不起作用

> ID：15860571
> 
> 赞同：1
> 
> 时间：2013-04-07T08:50:49.303
> 
> 标签：widget, gtk, vala

我正在尝试在 Vala 中制作自定义 GTK 小部件，但我已经在第一次基本尝试时失败了，所以我想知道我哪里出错了。我觉得我一定遗漏了一些非常明显的东西，但我就是看不到它。

我有三个文件，内容如下：

**开始.vala**：

```
using Gtk;

namespace WTF
{
        MainWindow main_window;

        int main(string[] args)
        {
                Gtk.init(ref args);
                main_window = new MainWindow();
                Gtk.main();
                return 0;
        }
} 
```

**main_window.vala**：

```
using Gtk;

namespace WTF
{
        public class MainWindow : Window
        {
                public MainWindow()
                {
                        /* */
                        Entry entry = new Entry();
                        entry.set_text("Yo!");
                        this.add(entry);
                        /* */

                        /* 
                        CustomWidget cw = new CustomWidget();
                        this.add(cw);
                        /* */

                        this.window_position = WindowPosition.CENTER;
                        this.set_default_size(400, 200);
                        this.destroy.connect(Gtk.main_quit);

                        this.show_all();
                }
        }
} 
```

**custom_widget.vala**：

```
using Gtk;

namespace WTF
{
        public class CustomWidget : Bin
        {
                public CustomWidget()
                {
                        Entry entry = new Entry();
                        entry.set_text("Yo");
                        this.add(entry);
                        this.show_all();
                }
        }
} 
```

如您所见，在 main_window.vala 中，我有两组代码。一种是直接添加 Entry 小部件，另一种是添加我的自定义小部件。如果您运行直接添加 Entry 小部件的那个，您会得到以下结果：

![功能部件](https://i.imgur.com/hvJ2XU3.png)

但是，如果您使用自定义小部件运行该小部件，则会得到以下结果：

![故障小部件](https://i.imgur.com/l7PPI7N.png)

仅作记录，这是我使用的复杂命令：

```
valac --pkg gtk+-2.0 start.vala main_window.vala custom_widget.vala -o wtf 
```

**编辑：**

按照 user4815162342 的建议，我`size_allocate`在自定义 Bin 小部件上实现了该方法，如下所示：

```
public override void size_allocate(Gdk.Rectangle r)
{
        stdout.printf("Size_allocate: %d,%d ; %d,%d\n", r.x, r.y, r.width, r.height);
        Allocation a = Allocation() { x = r.x, y = r.y, width = r.width, height = r.height };
        this.set_allocation(a);

        stdout.printf("\tHas child: %s\n", this.child != null ? "true" : "false");
        if (this.child != null)
        {
                int border_width = (int)this.border_width;
                Gdk.Rectangle cr = Gdk.Rectangle()
                {
                        x = r.x + border_width,
                        y = r.y + border_width,
                        width = r.width - 2 * border_width,
                        height = r.height - 2 * border_width
                };
                stdout.printf("\tChild size allocate: %d,%d ; %d, %d\n", cr.x, cr.y, cr.width, cr.height);
                this.child.size_allocate(cr);
        }
} 
```

它在控制台中写入以下内容：

```
Size_allocate: 0,0 ; 400,200
        Has child: true
        Child size allocate: 0,0 ; 400, 200 
```

并且窗口因此呈现：

![部分功能的小部件](https://i.imgur.com/CLOXcan.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:18:56.473

`GtkBin`是一个抽象的单子容器，通常旨在以某种方式装饰子小部件，或更改其可见性或大小。如果没有一些附加值，单子容器将与它包含的小部件无法区分，因此不是很有用。

由于`GtkBin`不知道你会在孩子周围画什么样的装饰，它希望你实现自己的`size_allocate`. 中提供了一个简单的实现，在 中提供了`gtk_event_area_size_allocate`一个更复杂的实现`gtk_button_size_allocate`。

[这个答案](https://stackoverflow.com/a/14294486/1600898)显示了 PyGTK 中的一个最小`size_allocate`实现，应该可以直接移植到 Vala。如果你做的事情比这更复杂，你还需要实现`expose`，可能还有其他方法，但这会让你开始。

# ios - iOS：如何在代码中打开自己的文件格式（如 .own）

> ID：15860572
> 
> 赞同：2
> 
> 时间：2013-04-07T08:50:54.887
> 
> 标签：ios, objective-c, xcode

我将一个名为**“test.own”**的文件写入文档路径，并得到它的**URL**。

现在我有一个按钮，我想要的是打开一个选项**表对话框**，当我单击按钮时，其中有**电子邮件** 或其他人要***发送或打开我的文件。***

有没有办法做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:02:07.213

选择文件时执行此操作。

```
- (IBAction)showFileOptions:(id)sender
{
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"Select a option"
                                                         delegate:self
                                                cancelButtonTitle:@"Cancel"
                                           destructiveButtonTitle:nil
                                                otherButtonTitles:@"email file",@"open file"];

[actionSheet showInView:self.view];
} 
```

编写委托来处理 actionSheet：

```
- (void) actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex: (NSInteger)buttonIndex
{
if (buttonIndex == 0) {
    //email
    [self emailDocument];
}

else if (buttonIndex==1)
{
   //open file
} 
```

}

电子邮件文件：

```
-(void)emailDocument
{
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;
[picker setSubject:@"Your own subject"];

// Set up recipients
  NSArray *toRecipients = [NSArray arrayWithObject:@"first@example.com"]; 
  NSArray *ccRecipients = [NSArray arrayWithObjects:@"second@example.com", @"third@example.com", nil]; 
  NSArray *bccRecipients = [NSArray arrayWithObject:@"fourth@example.com"]; 

 [picker setToRecipients:toRecipients];
 [picker setCcRecipients:ccRecipients];   
 [picker setBccRecipients:bccRecipients];

// Attach your .own file to the email

//add conversion code here and set mime type properly

NSData *myData =[NSData dataWithContentsOfURL:[NSURL urlWithString:pathToOwnFile]];
[picker addAttachmentData:myData mimeType:@"SETMIMETYPEACCORDINGLY" fileName:@"example.own"];

// Fill out the email body text
NSString *emailBody = @"PFA";
[picker setMessageBody:emailBody isHTML:NO];
[self presentModalViewController:picker animated:YES]; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T08:59:14.023

对于电子邮件，您需要做的就是呈现 MFMailComposeViewController 视图，然后您可以`.own`通过该视图控制器的`addAttachmentData:mimeType:fileName:`方法添加您的“”自定义文档。

（我会链接到 Apple 的文档，但 Apple 的文档网站在我输入此内容时似乎已关闭）。

至于您问题的另一部分，其他应用程序通常使用 UIDocumentInteractionController 来显示“在...中打开”对话框，除了其他应用程序需要知道如何打开您的自定义文档（他们将无法做到这一点）如果您的应用程序不太大或不太出名，或者如果其他人（不是您）编写了它）。

# c - 取消引用三重指针

> ID：15860574
> 
> 赞同：1
> 
> 时间：2013-04-07T08:51:00.097
> 
> 标签：c, visual-studio-2010, dereference

```
struct integer3_1 {
    int value3;
};

typedef struct integer3_1* intPtr;

struct integer3{
    intPtr* vPtr;
};

typedef struct integer3* intpointer3;   

int main() {
    int value = 5;
    intpointer3 intPtr3 = (intpointer3)malloc(sizeof(struct integer3));
    //(*intPtr3->vPtr)->value3 = value;
    //(*(*intPtr3).vPtr)->value3 = value;
    //(*intPtr3->vPtr)->value3 = &value;
    //(*(*intPtr3).vPtr)->value3 = &value;

return;

} 
```

你好，我有一个问题

如何取消引用 intPtr3 以便能够将 5 的值存储到`intPtr3->vPtr->value3`

我尝试了几种方法，但我一直收到错误@@a

* * *

第二部分

```
//1st line
intpointer3 intPtr3 = (intpointer3)malloc(sizeof(struct integer3));
//2nd line
(*intPtr3).vPtr = (intPtr*)malloc(sizeof(intPtr));
//3rd line
*((*intPtr3).vPtr) = (intPtr)malloc(sizeof(struct integer3_1)); 
```

1) 在第一行，它为 intpointer3 分配存储空间？

2) 在第二行，您取消引用并为 intPtr 分配存储空间？

3）在第 3 行，你取消引用了什么？你分配了什么存储空间？

4）有什么区别

```
(intpointer3)malloc(sizeof(struct integer3)); 
```

和

```
malloc(sizeof(struct integer3)); 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T08:55:24.970

问题不在于取消引用。你还没有分配内存`integer3_1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:09:05.490

如果结构`integer3`定义为

```
struct integer3{
    intPtr* vPtr;
}; 
```

那么解决方案将如下所示

```
intpointer3 intPtr3 = (intpointer3)malloc(sizeof(struct integer3)); 
```

`intPtr3``intPointer3`是与 相同的类型`integer3 *`。因此，首先我们需要为 size 的对象分配空间`integer3`。

```
(*intPtr3).vPtr = (intPtr *)malloc(sizeof(intPtr)); 
```

`*intPtr3`将给出一个类型的对象`integer3`。`integer3`有一个`vPtr`类型的指针`intPtr*`。因此，我们需要为一个大小的对象分配空间`intPtr`并将其分配给`vPtr`这个语句。

```
*((*intPtr3).vPtr) = (intPtr)malloc(sizeof(struct integer3_1)); 
```

`(*intPtr3).vPtr`将给出一个`intPtr *`与 相同类型的对象`integer3_1 **`。因此，该语句`*((*intPtr3).vPtr)`将取消引用与`*(integer3_1 **)`相同的`integer3_1 *`。因此，我们需要为一个大小的对象分配空间`struct integer3_1`并将其分配给这个指针。

```
(*((*intPtr3).vPtr))->value3 = value; 
```

运算符的 LHS`->`是一个类型的指针，`integer3_1 *`因此要访问`value3`，因此需要`->`运算符。

```
printf("Value is %d\n", (*((*intPtr3).vPtr))->value3); 
```

最后一个问题：

```
(intpointer3)malloc(sizeof(struct integer3)); 
```

和

```
malloc(sizeof(struct integer3)); 
```

除了我们将分配的指针显式类型转换为`intpointer3`或者更确切地说`integer3 *`在第一种情况下，它们是相同的。这是在`C++`像`MSVC++`. 使用 进行开发时，这不是必需的`gcc`。

# git - GIT 合并/重新设置上游而不获取历史记录（Laravel 4）

> ID：15860575
> 
> 赞同：1
> 
> 时间：2013-04-07T08:51:10.600
> 
> 标签：git, laravel, laravel-4

我目前正在使用 Laravel 4 框架构建一个应用程序。我遇到的问题是 API 基本上每天都在变化，所以每次我升级框架（作曲家更新）时，我的应用程序都会中断。

我在网上看到的建议工作流程（[这里](http://niallobrien.me/2013/03/installing-and-updating-laravel-4/)，[那里](http://www.codycovey.com/laravel-4-installation-and-updates/)）是将 Laravel 4 存储库添加为远程，然后在升级时使用 GIT rebase/merge 与上游。更新代码的诀窍是什么，但副作用是我现在最终在我的 Git 树中拥有了整个框架历史记录，其中 3k+ 提交有点难看。

会有更好的方法吗？

是否可以只提取远程提交和我的本地头之间的差异并应用它们（可能作为补丁），以便远程历史不跟随？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:48:29.543

如果您想在从上游（laravel）合并时删除 git 历史记录，请查看`git merge --squash`. 之前已在[https://stackoverflow.com/a/5309051/1269513回答过](https://stackoverflow.com/a/5309051/1269513)

# c# - 使用 Linq to SQL 简化创建数组列

> ID：15860577
> 
> 赞同：2
> 
> 时间：2013-04-07T08:51:21.760
> 
> 标签：c#, sql, arrays, linq, linq-to-sql

我需要用未知大小的字符串、整数或其他数组创建 SQL 表。最好的方法是为它创建单独的表。像这样（伪代码如下，我不知道我是否正确使用了“主键”）：

```
public class DataBase : DataContext
{
    public Table<UserAccount> users { get { return GetTable<UserAccount>(); } }
    public Table<UserAccount_roles> userroles { get { return GetTable<UserAccount_roles>(); } }
}

[Table]
public class UserAccount
{
    [Column(IsPrimaryKey = true)]
    public string username;
    [Column]
    public string password;
}

[Table]
public class UserAccount_roles
{
    [Column(IsPrimaryKey = true)]
    public string userName;
    [Column(IsPrimaryKey = true, IsDbGenerated = true)]
    public int roleIdx;
    [Column]
    public int arrayValue;
} 
```

但是，这感觉很笨拙，因为如果我不应该担心 SQL 实现，那么 UserAccount_roles 可能只是 UserAccount 类中的简单“List<> 角色”。

我宁愿做这样的事情：

```
public class DataBase : DataContext
{
    public Table<UserAccount> users { get { return GetTable<UserAccount>(); } }
}

[Table]
public class UserAccount
{
    [Column(IsPrimaryKey = true)]
    public string username;
    [Column]
    public string password;
    [MyColumn]
    public MySQLList<DataBase, int> roles;
} 
```

我想过做“ `class MySQLList<B, T> : List<T>`”。在数据库类（“B”）中，我做了一些静态方法来授予对正确数据库的访问权限。然后在 MySQLList 中，我通过重载 List<> -方法来操作数据库。这应该会导致“在后台”构建和访问表 UserAccount_roles，因为程序员（主要是我）在自定义 List<> 上看到的只是简化的解决方案。

我的实际问题是：

1.  我敢打赌，有一些现成的实现。我在哪里可以找到一个？
2.  我认为我无法在 MySQLList<> 中执行任何“[table] class MyTable”-declarations。我是否必须在那里进行实际的 SQL 语言编码，或者有什么方法可以在编译/运行时创建 Linq to SQL 类和属性的东西？
3.  这种方法有什么一般性的警告吗？-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:42:41.763

如果您想避免显式声明联结表，[实体框架](http://msdn.microsoft.com/en-us/library/bb399567.aspx)可能更适合您。它将允许您直接创建多对多关系，而无需中间类型。

**延伸阅读**

*   [关系和导航属性](http://msdn.microsoft.com/en-us/data/jj713564.aspx)
*   [代码优先关系 Fluent API](http://msdn.microsoft.com/en-us/data/hh134698.aspx)

* * *

推荐的方法是在 Linq-To-SQL 中创建两个具有多对多关系的表：

```
[Table]
public class UserAccount
{
    [Column(IsPrimaryKey = true)]
    public string username;
    [Column]
    public string password;

    private EntitySet<UserRole> _userRole;

    [Association(Storage = "_userRole", OtherKey = "userName")]
    public EntitySet<UserRole> UserRoles
    {
        get { return this._userRole; }
        set { this._userRole.Assign(value); }
    }
}

[Table]
public class Role
{
    [Column(IsPrimaryKey = true)]
    public int roleId;
    [Column]
    public string roleName;

    private EntitySet<UserRole> _userRole;

    [Association(Storage = "_userRole", OtherKey = "roleId")]
    public EntitySet<UserRole> UserRoles
    {
        get { return this._userRole; }
        set { this._userRole.Assign(value); }
    }
}

[Table]
public class UserRole
{
    [Column(IsPrimaryKey = true)]
    public int roleId;
    [Column(IsPrimaryKey = true)]
    public string userName;

    private EntityRef<Role> _role;

    [Association(Storage = "_role", ThisKey = "userName")]
    public EntitySet<Role> Role
    {
        get { return this._role.Entity; }
        set { this._role.Assign(value); }
    }

    private EntityRef<UserAccount> _userAccount;

    [Association(Storage = "_userAccount", ThisKey = "userName")]
    public EntitySet<UserRole> UserAccount
    {
        get { return this._userAccount.Entity; }
        set { this._userAccount.Assign(value); }
    }
} 
```

这比必须在 C# 中解析和处理的序列化整数数组要好得多**。**您可以轻松地执行以下操作：

```
var userRoleIds = myUser.UserRoles.Select(ur => ur.roleId); 
```

但是您还可以做更多使用序列化数组无法做到的事情。

**延伸阅读**

*   [如何：映射数据库关系](http://msdn.microsoft.com/en-us/library/bb386950.aspx)

* * *

如果您真的想将数组存储在单个列中，恐怕在 Linq-to-SQL 中没有标准的方法来执行此操作（可能某些第三方提供商会支持它）。最好的办法是自己进行序列化，如下所示：

```
[Table]
public class UserAccount
{
    ...
    [Column]
    private string rawRoles;

    public IEnumerable<int> Roles
    {
        get 
        {
            return (this.rawRoles == null) 
                ? return new int[0] : 
                : this.rawRoles.Split(",").Select(s => int.Parse(s));
        }
        set 
        {
            this.rawRoles = (value == null)
                ? null
                : String.Join(",", value);
        }
    }
} 
```

当然，还有更好的方法来序列化你的数据，这只是一个例子。您不能在任何 Linq-to-SQL 查询中使用它，而且它的数据库设计非常糟糕 - 但是，至少它满足您的要求。

# iphone - 使用委托传递值不起作用

> ID：15860578
> 
> 赞同：0
> 
> 时间：2013-04-07T08:51:22.713
> 
> 标签：iphone, delegates, tableview, navigationcontroller

在`RootViewController`我有一个按钮，当它被点击时，它会`self.navigationController`推动到`CategoryViewController`.

然后，在 中`CategoryViewController`，单击一个单元格推送到 SubCatsViewController。当我选择了一个单元格时，它应该解散`CategoryViewController`并`SubCatsViewController`返回`RootViewController`.

但是怎么做呢？

如果我使用dismissViewControllerAnimated，它只会dismiss，而`SubCatsViewController`不是`CategoryViewController`。我已经写了一个委托，`SubCatsViewController`所以我可以从中获取选定的值`SubCatsViewController`，并且`RootViewController`我符合这个委托协议，以获得我想要的值。

但是，我无法使用我编写的委托获取值。

```
- (void)chooseCat:(BButton *)sender
{

    UIStoryboard *storyboard = [UIStoryboard 
    storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
    CategoryViewController *cat = 
    [storyboard instantiateViewControllerWithIdentifier:@"Cats"];
    SubCatsViewController *sub = 
    [storyboard instantiateViewControllerWithIdentifier:@"SubCats"];
    sub.delegate = self; //correct way?
    [self.navigationController pushViewController:cat animated:YES];
}

CategoryViewController.m

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:
(NSIndexPath *)indexPath
{
    UIStoryboard *storeboard = 
    [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
    SubCatsViewController *sub = 
    [storeboard instantiateViewControllerWithIdentifier:@"SubCats"];
    sub.subCats = 
    [[self.cats objectAtIndex:indexPath.row] objectForKey:@"subcat"];
    [self.navigationController pushViewController:sub animated:YES];
}
SubCatsViewController.h

@protocol SubCatsDelegate <NSObject>

- (void)didSelectSubCats:(SubCats *)cats;

SubCatsViewController.m

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:
(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
    self.cat.catId = 
    [[self.subCats objectAtIndex:indexPath.row] objectForKey:@"id"];
    self.cat.name = 
    [[self.subCats objectAtIndex:indexPath.row] objectForKey:@"name"];
    if ([self.delegate respondsToSelector:@selector(didSelectSubCats:)]) {
        [self.delegate didSelectSubCats:self.cat];
    }
    [self dismissViewControllerAnimated:YES completion:nil];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:02:39.827

DismissViewControllerAnimated:completion: in [UIViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/cl/UIViewController%20UIViewController)的文档（从 UINavigationController 继承）说：

> 呈现视图控制器负责关闭它呈现的视图控制器。如果您在呈现的视图控制器本身上调用此方法，它会自动将消息转发到呈现的视图控制器。

这就解释了为什么 SubCatsViewController（并且只有那个视图控制器）被解雇了。如果 RootViewController 确实是您的根视图控制器，您可以更改 tableView:didSelectRowAtIndexPath: 中的行

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

至

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

# security - JAAS“必需”标志

> ID：15860579
> 
> 赞同：0
> 
> 时间：2013-04-07T08:51:28.290
> 
> 标签：security, jaas

在[http://docs.oracle.com/javase/6/docs/api/javax/security/auth/login/Configuration.html](http://docs.oracle.com/javase/6/docs/api/javax/security/auth/login/Configuration.html)

它说

```
1) Required     - The LoginModule is required to succeed.
                  If it succeeds or fails, authentication still continues
                  to proceed down the LoginModule list. 
```

它还说

```
The overall authentication succeeds only if all Required and Requisite LoginModules succeed. 
If a Sufficient LoginModule is configured and succeeds, then only the Required and 
Requisite LoginModules prior to that Sufficient LoginModule need to have succeeded 
for the overall authentication to succeed. 
```

似乎如果Required loginModule 失败，结果将失败。我的问题是，为什么如果Required loginModule 失败，身份验证仍然继续**在**LoginModule 列表中进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:27:33.177

您绝对正确：如果所需的 loginModule 失败，则结果将失败。即使所有其他登录模块都会成功，也没有办法使成功。如果您希望执行其他模块，则要使用Required 的用例。例如，您有一个审核登录访问的可选模块。

JAAS 使您可以根据需要灵活地定义登录模块。如果您不需要立即停止并返回失败，请使用 Requisite。

# jquery - 如何在 Wordpress 中更改 NextGen Gallery 幻灯片上的光标

> ID：15860581
> 
> 赞同：0
> 
> 时间：2013-04-07T08:51:40.060
> 
> 标签：jquery, css, wordpress, cursor, nextgen-gallery

我整个早上都在努力解决这个问题。我知道如何改变它 -

```
$('selector').css( 'cursor', 'pointer' ); 
```

我的问题是在 NextGen 插件的所有 js / css 文件中应用它的位置。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:06:12.040

尝试在您的 css 文件上使用 !important 而不是使用 jQuery 来更改它。

```
.selector {cursor:pointer !important;} 
```

使用 !important 意味着它将忽略已声明的任何其他专有游标。我不知道 nextgen 插件，但您可以在 Google Chrome、Mozilla Firefox 甚至 IE 上查看该元素的类。

[https://developers.google.com/chrome-developer-tools/docs/elements](https://developers.google.com/chrome-developer-tools/docs/elements)

[http://css-tricks.com/when-using-important-is-the-right-choice/](http://css-tricks.com/when-using-important-is-the-right-choice/)

# php - php 的 file_get_contents 失败但 ping 有效

> ID：15860583
> 
> 赞同：0
> 
> 时间：2013-04-07T08:51:49.347
> 
> 标签：php, twitter, file-get-contents, ping

我正在尝试编写一个非常简单的 php 脚本来测试主机`api.twitter.com`是否已启动。但是当我这样做的时候

```
file_get_contents('https://api.twitter.com') 
```

然后我得到错误

```
Warning: file_get_contents(https://api.twitter.com):
failed to open stream: HTTP request failed! HTTP/1.0 404 Not Found 
```

`ping`命令行上的一个简单的工作正常，并且`file_get_contents`在其他 url 上工作正常，例如`http://google.com`.

在我`curl`尝试之前，我想我会看看我是否做错了`file_get_contents()`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:57:11.630

[https://api.twitter.com](https://api.twitter.com)本身确实返回 404 - 这是正常的。如果你想与 API 交互，你必须使用类似的东西：

```
https://api.twitter.com/1.1/statuses/mentions_timeline.json 
```

文档：[https ://dev.twitter.com/docs/api/1.1/get/statuses/mentions_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/mentions_timeline)

# ruby-on-rails - 'visit *_path' 在测试用户模型时不起作用

> ID：15860584
> 
> 赞同：0
> 
> 时间：2013-04-07T08:52:02.317
> 
> 标签：ruby-on-rails, rspec, ruby-on-rails-3.2, railstutorial.org, webrat

我四处搜索，这似乎是一个很常见的问题，但对我没有任何帮助。开始！

首先，我正在学习 Hartl RoR 教程。我即将结束[第 9 节](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#sec-updating_deleting_exercises)（视频 905），我正在尝试测试失败的用户登录。这是中的代码`user_spec.rb`：

```
 describe "failure" do  
     it "should not log the user in" do  
       visit login_path  
       puts response.body  
       fill_in 'session_email',    with: ""  
       fill_in 'session_password', with: ""   
       click_button  
       response.should have_selector('div.login_error', content: "Invalid")  
       response.should render_template('sessions/new')  
     end  
   end 
```

这是自动测试错误：

```
 1) User login failure should not log the user in
 Failure/Error: visit login_path
 NameError:
   undefined local variable or method `login_path' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_5::Nested_1:0x00000102c79248>
 # ./spec/models/user_spec.rb:176:in `block (4 levels) in <top (required)>' 
```

我尝试写`visit login_path`为`visit '/login'`，但仍然出现错误，尽管它更改为：

```
Failure/Error: visit '/login'
 NoMethodError:
   undefined method `visit' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_5::Nested_1:0x00000102c2d140> 
```

这让我觉得这可能是一个 webrat 问题，因为我在某处读到“访问”来自 webrat（而不是 rspec）。我也知道它没有超过第一行，因为`puts response.body`它没有出现在自动测试失败中。更令人困惑的是，在我的应用程序的另一部分，我有其他几乎相同的测试代码，并且运行良好。

`layout_links_spec.rb`：

```
before(:each) do  
  @user = Factory(:user)  
  visit login_path  
  # puts response.body  
  fill_in 'session_email',    with: @user.email  
  fill_in 'session_password', with: @user.password  
  click_button  
end 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:22:54.033

我必须进行大量更新才能使您的代码运行。我已经有一段时间没有在我的家用机器上完成 Rails 了，所以让它全部更新是件好事。

找到了一个让命名路由工作的解决方案，但这只是导致了另一个问题。最后灯亮了。你在错误的地方做测试。用户模型规范不是您测试登录的地方。正如您所提到的，另一个类似的测试有效。那是在请求规范中。访问命令和命名路由设计为在该目录中工作。

# vim - 如何在 VIM 中保存寄存器

> ID：15860586
> 
> 赞同：1
> 
> 时间：2013-04-07T08:52:18.257
> 
> 标签：vim, vim-registers

我是 VIM 新手，我使用命令

```
qa 
```

开始记录寄存器中的操作`a`和以下命令

```
q 
```

停止保存。以及使用以下操作的命令`a`：

```
@a 
```

但问题是，当我关闭 VIM 时，所有这些寄存器都被删除了。有什么方法可以保存这些操作并稍后在其他 VIM 会话中使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T09:48:39.937

如果你不在兼容模式下运行 Vim *（*只有受虐狂才会在兼容模式下运行 Vim），命名寄存器`"a`to`"z`会在会话中被记住。

你在没有 的情况下运行 Vim`~/.vimrc`吗？的输出是`:set viminfo`什么？`:set compatible?`（带问号）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:05:47.217

你可以`map`在你的`.vimrc`

```
map <F2> [your macro] 
```

如果宏已经在寄存器“a”中，您也可以使用它，也就是说，您可以在插入模式下`[your macro]`键入而不是重复。`<C-r>a`

你也可以试试[marvim](http://www.vim.org/scripts/script.php?script_id=2154)。

# android - 更新适配器的数据集而不更改正在显示的视图

> ID：15860597
> 
> 赞同：1
> 
> 时间：2013-04-07T08:54:02.617
> 
> 标签：android

我正在使用 a`ViewPager`在杂志电子阅读器应用程序中显示文章。当应用程序初始化时，它从 Web 服务中提取 10 篇文章并使用它们来扩充 10 个视图，这些视图被传递给`PagerAdapter`. 当用户到达第六个视图时（当文章数组的大小减去当前位置小于四个时），我想再加载10篇文章并将它们添加到PagerAdapter的视图末尾，这样当用户到达第 10 篇，下 10 篇已经加载完毕。使用以下代码似乎可以正常工作：

```
 @Override
    public Object instantiateItem(View arg0, int position) {

    final Article a = toShow.get(position);
    View v = makeView(a);
    ((ViewPager) arg0).addView(v);

    outer: if (toShow.size() - position < 4 && noMore == false){
        ArrayList<Article> toAdd = new ArrayList<Article>();
        int idx = toShow.size()-1;
        try {
            toAdd = new getPosts(idx).execute().get();
                } catch (InterruptedException e) {e.printStackTrace();
                } catch (ExecutionException e) {e.printStackTrace();}
        idx++;

        if (toAdd.isEmpty()){
            noMore = true;
            break outer;
        }
        else {
        for (int curr = 0; curr < toAdd.size(); curr++){
            toShow.add(idx, toAdd.get(curr));
        }
        this.notifyDataSetChanged();
        System.out.println("added more");           
    }
    }

    return v;
        } 
```

除此之外，当数据集改变时（即当新文章完成加载并添加到 中时`PagerAdapter`），`ViewPager`返回到显示第一个视图。我怎样才能在这里改变我的方法，以便可以在不改变当前显示的视图的情况下加载新文章？

# compare - 从屏幕上捕获 2 个文本并使用 AutoHotkey 进行比较

> ID：15860600
> 
> 赞同：-1
> 
> 时间：2013-04-07T08:54:10.943
> 
> 标签：compare, screen, capture, autohotkey

我正在使用 AutoHotkey，我需要从屏幕上捕获两个句子并进行比较。有谁知道该怎么做？非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:59:28.443

好的，这显示了一些努力。

当您使用 mouseClickDrag 时，您必须绝对确定文本将始终位于这些确切位置，这是非常不可能的，请考虑将网页向下移动的菜单栏，或者使用 F11，做相反的事情，更改字体样式/size，只是放大/缩小，或缩小窗口，使文本块的宽度变小但长度变长，添加另一个更小或更大的横幅，等等。如果您可以使用其他方法（例如，查找文本并从该位置向左跳 10 个单词（^{Left 10}）然后选择接下来的 5 个单词（+^{Right 5}），会更可靠.

```
#NoEnv
#SingleInstance Force
#installKeybdHook
#Persistent
Return ; Stop here on startup to prevent running the whole script on startup

+Insert::  ; Using the [Shift]+[Insert] Key as the hotkey here.
MouseClickDrag,left, 540, 295, 602, 295 ; HighLight area1
Send, ^c
ClipWait, 2
MyVar1:=ClipBoard ; OR MyVar1 = %ClipBoard%

MouseClickDrag,left, 540, 295, 602, 295 ; HighLight area2
Send, ^c
ClipWait, 2
MyVar2:=ClipBoard ; OR MyVar2 = %ClipBoard%

If (MyVar1 = MyVar2)
{
    MsgBox, The values %MyVar1% and %MyVar2% are equal
    Send, %MyVar1%
    ; ClipBoard:=MyVar1 ; OR ClipBoard = %MyVar1%  is alternative way (Faster)
    ; Send, ^v
}
Else
{
    MsgBox, The values %MyVar1% and %MyVar2% are NOT equal
    Send, %MyVar1% AND %MyVar2%
    ; ClipBoard = %MyVar1% AND %MyVar2% ; is alternative way (Faster)
    ; Send, ^v
}
Return 
```

您可以添加一些测试以仅在 Chrome、FireFox 或 IE 处于活动状态时执行此操作，但我忽略了这一点。首先咀嚼这段代码。

# ruby-on-rails - 将数据传递到 Rails 部分

> ID：15860602
> 
> 赞同：3
> 
> 时间：2013-04-07T08:54:39.750
> 
> 标签：ruby-on-rails

编辑：解决方案完美运行。 [dom_id](http://api.rubyonrails.org/classes/ActionController/RecordIdentifier.html)

我正在尝试将数据传递给部分并使用它来更改用户的角色。现在它只会改变一个用户的角色。当它被渲染时，它只显示并作用于`User.first`

渲染的地方。我通过当地人的用户。根据[这篇文章](https://stackoverflow.com/questions/4700617/pass-a-variable-into-a-partial-rails-3)，我使用了第二个答案，因为第一个答案不起作用并给了我错误。

```
<%= render :partial => 'roles', :locals =>  { :user => user } %> 
```

下面是部分 _role.html.erb

```
<div id="roleModal" class="reveal-modal">
   <%= semantic_form_for user, :url => user_path(user), :html => {:method => :put } do |f| %>
      <h3>Change Role</h3>
      <div class="reveal-modal-body">
         <%= f.input :roles, :as => :check_boxes, :input_html => { :selected => user.role_ids } %>
      </div>
      <a class="close-reveal-modal">&#215;</a> 
      <%= f.action :submit, :as => :button %>
   <% end %> 
```

```
<% @users.each do |user| %>
<tr>
  <td><%= link_to user.name, user %></td>
  <td><%= user.email %></td>
  <td><%= user.created_at.to_date %></td>
  <td><%= user.roles.first.name.titleize unless user.roles.first.nil? %></td>
  <td>

     <a href="roles#<%= user.id %>" data-reveal-id="roleModal" class="button" type="button">Change role</a>
    <%= render :partial => 'roles', :locals =>  { :user => user } %>

  </td>
</tr>
<% end %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T09:56:42.740

你有关于将当地人传递给部分正确的原始问题。问题是使用非唯一的 ID 对来显示隐藏的表单。所以显示链接总是显示具有该 ID 的 div 的第一次出现，因此总是改变第一个用户的角色。

尝试更新这两行以使用 Rails`dom_id()`助手创建唯一匹配的`data-reveal-id`to`id`根据 Foundation 显示模式文档：

```
<a href="roles#<%= user.id %>" data-reveal-id="<%= dom_id(user) %>" 
class="button" type="button">Change role</a>

<div id="<%= dom_id(user) %>" class="reveal-modal"> 
```

# python - 将文件从 s3 复制到冰川

> ID：15860605
> 
> 赞同：1
> 
> 时间：2013-04-07T08:55:04.167
> 
> 标签：python, amazon-s3, boto, amazon-glacier

以下代码按预期工作并显示存储桶名称、文件名。例如

```
<Key: vivafree,Master.csv.2012-04-10-17-52-39.gz>
<Key: vivafree,Master.csv.2012-07-12-23-00-49.gz> 
```

我需要下载所有这些文件并将它们传输到 Glacier 保险库。

```
from boto.s3.key import Key
from boto.s3.connection import S3Connection

AWS_ACCESS_KEY_ID="ABC"
AWS_SECRET_ACCESS_KEY="PQR+XYZ"

conn = S3Connection(AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)

bucket = conn.get_bucket('vivafree')

ls=bucket.get_all_keys()

for file in ls:
 print file 
```

以下代码将复制一个文件并将其放入名为“company_backup”的保管库中。

```
import boto.glacier.layer2

vaultName = "company_backup"
fileName = "email_usergroups_permissions.txt.gz"
l = boto.glacier.layer2.Layer2(aws_access_key_id=AWS_ACCESS_KEY_ID, aws_secret_access_key=AWS_SECRET_ACCESS_KEY)
v = l.get_vault(vaultName) 

archiveID = v.create_archive_from_file(fileName) 
```

我需要做的是遍历从第一个代码块返回的文件。下载然后使用第二个代码段将它们传输到冰川。我还需要保存 archiveID 以供记录。

# javascript - Javascript匹配并从字符串中提取$符号？

> ID：15860610
> 
> 赞同：1
> 
> 时间：2013-04-07T08:55:32.417
> 
> 标签：javascript, regex

目前我有：

```
var price = '$4000';
var currency = price.match([\$]);
alert(currency); 
```

但是，这似乎不起作用。我想提取 $ 符号并进行比较，如果为真，则获取一些货币比较并比较货币。通过正则表达式提取符号的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T08:57:36.897

这应该工作：`'$4000'.match(/^\$/)`.

`$`（它在字符串的开头寻找符号）

正则表达式文字的 javascript 语法在表达式`/`的开头和结尾使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T08:59:42.327

如果您想在任何位置找到美元符号，请使用：

```
var currency = price.match(/\$/); 
```

如果要在字符串开头找到美元符号，请使用：

```
var currency = price.match(/^\$/); 
```

这是关于[Javascript RegExp的文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-07T08:59:18.490

将您的正则表达式放在`//`或引号内：

```
var price = '$4000';
var currency = price.match(/[\$]/);
alert(currency); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-07T09:04:11.907

有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题。(c) 杰米·扎温斯基

我同意 RegEx 更简洁，但你可以只使用`'$4000'.indexOf('$')`. 像这样：

```
if (price.indexOf('$')>-1) { currency = '$' } 
```

# android - 如何在不从 Android 应用程序的数据库中获取数据的情况下创建光标数据？

> ID：15860619
> 
> 赞同：10
> 
> 时间：2013-04-07T08:56:52.797
> 
> 标签：android, android-contentprovider, android-cursoradapter, android-cursor

在我的 Android 应用程序中，我使用 Sqlite 数据库来存储来自服务器的数据。我正在使用 ContentProvider 和 ContentResolver 从数据库访问数据并使用 CursorAdapter 将数据绑定到 ListView。一旦数据插入DataBase，就会通知CursorAdapter 更新ListView。此外，每当我滚动 ListView 时，我都会从 DataBase 表中获取新数据，并且 ListView 将被更新。但是一旦我到达表行的末尾，我需要直接从服务器获取数据，而不是存储到数据库中并在 ListView 中更新它。现在，当我使用接受 Cursor 数据的 CursorAdapter 时，如何绑定一组不是来自数据库的新数据？是否可以在不从数据库获取数据的情况下创建游标数据并使用 ContentProvider 中的 ChangeCursor() 方法来更新 ListView？如果没有，是否有任何其他方法可以实现相同的效果？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T09:05:16.737

> Is is possible to create Cursor data without getting data from the DataBase and use ChangeCursor() method in the ContentAdapter to update the ListView?

Yes, you can create cursor using [MatrixCursor](http://developer.android.com/reference/android/database/MatrixCursor.html). If you will have to merge MatrixCursor with database Cursor use [MergeCursor](http://developer.android.com/reference/android/database/MergeCursor.html).

# html - 如何让 div 留在那里，直到再次单击链接？

> ID：15860624
> 
> 赞同：0
> 
> 时间：2013-04-07T08:57:28.767
> 
> 标签：html, css

我正在尝试制作一个仅在单击三角形时才出现的侧边栏，并且我已经到了单击三角形的地步，并且它使用以下命令出现：

```
sidebar {
display: none;
}

a:active + .sidebar {
    display: block;
} 
```

然而，一旦你放手，它就会消失。在您第二次单击三角形之前，如何使其保持可见？下面是完整代码的链接。

[http://jsfiddle.net/Vqmaw/](http://jsfiddle.net/Vqmaw/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:02:34.180

您将不得不使用 JS 来切换侧边栏的可见性 - CSS 解决方案是不可能的。

```
$('a').click(function () {
    $('.sidebar').toggle();
}); 
```

您还必须`display: none`为`.sidebar`元素设置。我已经更新了你的小提琴 - [http://jsfiddle.net/teddyrised/Vqmaw/3783/](http://jsfiddle.net/teddyrised/Vqmaw/3783/)

您修改后的小提琴有一些问题 - 您使用的是 MooTools 而不是 jQuery，并且您的类选择器格式不正确。

# python - 无法在同一循环中使用来自两个迭代器的值

> ID：15860625
> 
> 赞同：0
> 
> 时间：2013-04-07T08:57:30.660
> 
> 标签：python, iterator, itertools

我有以下 python 脚本，我想交替地从两个迭代器中获取值。

```
filename = "small"
with open(filename,'r') as plot_data:
    main_dict = dict()
    line_one = itertools.islice(plot_data, 0, None, 4)
    line_two = itertools.islice(plot_data, 2, None, 4)
    dictionary = defaultdict(list)
    #take values from iterators alternatively.
    for movie_name, movie_plot in itertools.izip(line_one, line_two):
        movie_plot = movie_plot.lower()
        words = re.findall(r'\w+', movie_plot, flags = re.UNICODE | re.LOCALE)
        elemStopW = filter(lambda x: x not in stopwords.words('english'), words)
        #list of words.
        print elemStopW
        for word in elemStopW:
            word = PorterStemmer().stem_word(word)
            dictionary[movie_name].append(word)
            main_dict[word] = len(main_dict)
    print main_dict 
```

该脚本不打印任何内容。我不明白为什么。我不想合并迭代器，因为我想在同一个循环中使用这两个值。

任何帮助表示赞赏。

编辑：为了避免一些许可（如评论）。以下脚本工作正常

```
filename = "small"
with open(filename,'r') as plot_data:                    
        main_dict = dict()
        line_one = itertools.islice(plot_data, 0, None, 4)
        dictionary = defaultdict(list)                                                                      
        for movie_name in line_one:                                                           
                print movie_name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:10:54.697

这可能不会达到您的预期：

```
line_one = itertools.islice(plot_data, 0, None, 4)
line_two = itertools.islice(plot_data, 2, None, 4) 
```

由于`plot_data`是一个文件对象，因此从任一迭代器读取都会推进文件 - 它仍将按顺序读取，而不是并行读取两次。

您可以使用`itertools.tee`复制文件迭代器，以便可以并行读取两次：

```
plot1, plot2 = itertools.tee(plot_data, 2)
line_one = itertools.islice(plot1, 0, None, 4)
line_two = itertools.islice(plot2, 2, None, 4) 
```

请注意，如果两个迭代器的位置可能会相差很远，这可能会占用大量内存，并且您最好打开文件两次。在这种情况下，这应该不是问题。

# c - 从文件读入 *argv[] 数组

> ID：15860628
> 
> 赞同：1
> 
> 时间：2013-04-07T08:57:55.127
> 
> 标签：c, main, argv

我尝试将 C 中的 Linux 程序转换为 DOS。由于 DOS 命令行只允许 128 个字节，我尝试从文件中读取参数。该文件的每个参数都有一行。

所以我将文件中的参数读入一个字符串数组，并想用我的字符串数组的地址覆盖 *argv[] 地址。

但是我对指向指针的指针感到困惑。我应该怎么做才能正确覆盖我的函数中的 *argv[] 地址？

该程序使用“argvtest.exe commands.dat”调用

这是我的测试代码：

```
#include <stdio.h>
#include <string.h>

void read_cmd_file(int *argc,char *argv[]){

    if (*argc != 2 ) return;

    char buf[256];
    char arguments[30][256];
    int line_nr=0,i;

    FILE *fp=(FILE *) NULL;

    /* open the file */
    fp=fopen(argv[1],"r");
    if (fp == (FILE *) NULL)
    {
        printf("Could not open command file: %s",argv[1]);
        return;
    }

    while (fgets(buf,sizeof(buf)-1,fp) && !feof(fp))
    {

        line_nr++;
        strcpy(arguments[line_nr],buf);
        //printf("Argument read: %s\n",buf);
    }

    if (fp != (FILE *) NULL)
        (void) fclose(fp);

    for (i=1;i<=line_nr;i++) printf("%d,%s\n",i,arguments[i]);

    *argv=&arguments[0][0];
    *argc=line_nr;

    return;

}

int main(int argc,char **argv)
{
    int i;
    read_cmd_file(&argc,argv);
    printf("argc=%d\n",argc);
    for (i=0;i<argc;i++) printf("%d,%s\n",i,argv[i]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:10:23.397

你应该做两件事。首先，您需要一个指向指针的指针：

```
void read_cmd_file(int *argc,char ***argv)
{
    ...
    fp=fopen((*argv)[1],"r");
    ...
    *argv = result;
}

...
read_cmd_file(&argc,&argv); 
```

然后，您永远不要尝试从函数返回对局部变量的引用：在您的代码中

```
*argv=&arguments[0][0]; 
```

是邪恶的标志，不得使用...

相反，您必须在函数中分配内存，然后在使用后释放它。就像是：

```
void read_cmd_file(int *argc,char ***argv)
{
    char **arguments;

    ...
    arguments = calloc(30, sizeof(*arguments)); // 30 args
    ...
    while (fgets(buf,sizeof(buf)-1,fp) && !feof(fp))
    {
        line_nr++;
        arguments[line_nr] = strdup(buf); // allocates memory on heap
    }
    ...
    *argv=arguments;
}

...
int main(int argc,char **argv)
{
    int i;
    read_cmd_file(&argc,&argv);
    for (i=0;i<argc;i++) printf("%d,%s\n",i,argv[i]);
    ...
    for (i = 0; i <argc; i++)
    {
        free(argv[i]);
    }
    free(argv);
} 
```

# c# - 将文本文件中的数据拆分为并行数组

> ID：15860633
> 
> 赞同：0
> 
> 时间：2013-04-07T08:58:18.923
> 
> 标签：c#, arrays, file, struct, split

我的教授给全班举了一个 C# 的例子，可以用来从文本文件中分割数据。我正在尝试将它用于涉及拆分 txt 内容的项目。文件分成 4 个数组或字段。这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

class Program
{
    static void Main()
    {
        int i = 0;
        foreach (string line in File.ReadAllLines("census.txt"))
        {
            string[] parts = line.Split(',');
            foreach (string part in parts)
            {
                Console.WriteLine("{0}",

                    part);
            }
            i++; 
        }
    }
} 
```

这是**census.txt**：

```
21,f, s, 14

41,f, m, 22

12, m, s, 12

11, f, s, 8

29, m, m, 4

6, m, s, 12

9, f, s, 2

30, f, s, 1 
```

它应该是按年龄、性别、婚姻状况和地区划分的假设人口普查数据。我不断得到的输出是单行中的每个数字或字符，如下所示：

```
21

f

s

14

41

f

m

22 
```

等等。

我认为这意味着它正在工作，但我想知道如何使用它进入 4 个并行数组。我还想了解更多关于将其拆分为 4 个字段、结构或类的信息。该项目的下一部分涉及每次出现某个年龄编号或地区编号时进行计数，这将涉及大量数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:13:21.087

我会扩展*irsog*的答案：

*   使用类而不是结构
*   使用属性而不是字段
*   使用`Gender`和`MaritalStatus`枚举而不是纯字符串

代码：

```
public class Person
{
    public int Age { get; set; }
    public MaritalStatus MaritalStatus { get; set; }
    public Gender Gender { get; set; }
    public int District { get; set; }
}

public enum MaritalStatus
{
    Single, Married
}

public enum Gender
{
    Male, Female
} 
```

和用法：

```
var people = new List<Person>();

foreach (string line in File.ReadAllLines("Input.txt"))
{
    string[] parts = line.Split(',');

    people.Add(new Person()  {
        Age = int.Parse(parts[0]),
        MaritalStatus = parts[1] == "s" ? MaritalStatus.Single : MaritalStatus.Married,
        Gender = parts[2] == "m" ? Gender.Male : Gender.Female,
        District = int.Parse(parts[3])
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-08T20:00:28.653

这是旧线程，但正如谷歌在前几页中显示的那样，我决定发送我的评论。我强烈建议不要使用给定的 txt 文件格式，因为它不能防错。如果 census.txt 不能保证是理想的，特别是如果它应该由某个第三方（用户、管理员、任何人）创建，那么我强烈建议记录以一些符号结尾，例如：21,f,s , 14;

41，f，m，22；然后我们要做的第一件事 - 我们得到记录数组，如下所示：

> 字符串[] 行 = text.split(';');

然后简单地再次拆分 - 这次是为了获取记录元素。

> foreach（行中的字符串记录）
> 
> {
> 
> 字符串[] 字段 = record.split(',');
> 
> }

这样不仅更容易读取记录/字段，而且您可以轻松检查文件的一致性，忽略错误（空记录），检查每条记录中的字段数等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T09:08:06.203

您可以为所需信息制作结构：

```
public struct Info
{
    public int Age;
    public string gender;
    public string status;
    public int district;
} 
```

并将数据插入到您的结构列表中：

```
 List<Info> info = new List<Info>();
    foreach (string line in File.ReadAllLines("census.txt"))
    {
        string[] parts = line.Split(',');

            info.Add(new Info() {Age=int.Parse(parts[0]), gender=parts[1], status=parts[2], district=int.Parse(parts[3]) });
    } 
```

现在你有一个人员信息列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T17:58:09.503

通用列表（如此处其他 2 个当前答案中使用的）是最好的方法。但是，如果您需要将数据保存在数组中（正如您之前的[问题](https://stackoverflow.com/questions/15859398/i-have-no-idea-what-i-am-doingmanaging-multiple-arrays-of-data-and-counting-eac#comment22573331_15859398)似乎表明的那样），那么您可以像这样修改教授的代码：

C＃

```
int[] districtDataD = new int[900];
string[] districtDataG = new string[900];
string[] districtDataM = new string[900];
int[] districtDataA = new int[900];

int i = 0;
foreach (string line in File.ReadAllLines("census.txt"))
{
    string[] parts = line.Split(',');

    districtDataD[i] = int.Parse(parts[0]);
    districtDataS[i] = parts[1];
    districtDataM[i] = parts[2];
    districtDataA[i] = int.Parse(parts[3]);
    i++;
} 
```

VB.NET（因为你原来的问题是用 VB.NET 标记的）：

```
Dim districtDataD() As New Integer(900)
Dim districtDataS() As New String(900)
Dim distrcitDataM() As New String(900)
Dim districtDataA() As New Integer(900)

Dim i As Integer = 0

For Each Dim line As String In File.ReadAllLines("census.txt")
    Dim string() As parts = line.Split(',')

    districtDataD(i) = Integer.Parse(parts(0))
    districtDataS(i) = parts(1)
    districtDataM(i) = parts(2)
    districtDataA(i) = Integer.Parse(parts(3))

    i++
Next 
```

您也可以使用`struct`or`class`并拥有一个包含该对象的数组，但看起来您是教授希望您使用 4 个单独的数组。如果可以使用一个，则可以像这样简单地声明数组，例如：

C＃

```
Person[] districtData = new Person[900]; 
```

VB.NET

```
Dim districtData() As New Person(900) 
```

然后您可以在拆分逻辑中执行此操作（请注意，如果说 Distric 和 Age 是您的对象中的整数，您将必须转换或解析它们，如下所示）：

C＃

```
districtData[i] = new Person() { District = int.Parse(parts[0]), Gender = parts[1], MaritalStatus = parts[2], Age = int.Parse(parts[3]) }; 
```

VB.NET

```
districtData[i] = new Person() With { .District = Integer.Parse(parts[0]), .Gender = parts[1], .MaritalStatus = parts[2], .Age = Integer.Parse(parts[3]) } 
```

这段代码有一个风险，如果你有超过 900 行数据，你会得到一个索引超出范围的异常。避免这种情况的一种方法是使用 while 循环修改我在上面放置的代码，该循环检查目标数组的边界或未超过的行数，如下所示：

C＃

```
string[] lines = File.ReadAllLines("census.txt");
int i = 0;

while (i < 900 && i < parts.Length)
{

    // split logic goes here
} 
```

VB.NET

```
Dim lines As String() = File.ReadAllLines("census.txt")
Dim i As Integer = 0

While (i < 900 AndAlso i < lines.Length)

    ' split logic goes here
End While 
```

**我还没有测试过代码，但如果你必须**使用数组，这希望能对你有所帮助。

# svg - SVG 路径命令“s”和“t”

> ID：15860635
> 
> 赞同：7
> 
> 时间：2013-04-07T08:58:56.650
> 
> 标签：svg

在执行`"s"`（相对三次贝塞尔弧）和`"t"`（相对二次贝塞尔弧）命令时，隐式定义的控制点的坐标是否用作下一个相对坐标的基础？

换句话说，考虑以下三次弧：

![三次圆弧示例](https://i.stack.imgur.com/0QmAt.png)

*   `cp`当前点
*   `ip`隐式控制点计算镜像来自前一个弧的最后一个控制点
*   `ep`显式控制点
*   `fp`弧的终点

应该是`ep`用作基础的相对坐标`ip`（隐式点）还是相对于`cp`（路径的当前点）？

在官方文档中，我发现这不清楚，并且在这些情况下没有使用相对坐标的示例。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T14:47:59.387

规则是

1.  使用相对模式时，坐标相对于**命令开头的当前点**

2.  在命令“链”的情况下，当给出多个坐标而不重复命令时，基点**在每次重复后更新**

例如简单路径

```
m 100,100 100,0 0,100 -100,0 0,-100 
```

描述从 (100,100) 到 (200,200) 的正方形

![简单的相对路径](https://i.stack.imgur.com/ckdFT.png)

（`l`如果为“m”命令提供了多个坐标对，则以红色显示的“line-to”命令是隐含的）

需要注意的重要一点是，坐标的相对“基础”在每个转折点都会更新。这在文档中有些欺骗性，因为`m`命令的语法被描述为接受`(x,y)+`参数，因此读者可能会被欺骗认为相对基数只会在整个点序列的末尾发生变化。

现在让我们考虑贝塞尔三次路径

```
m 100,100 c 25,25 75,25 100,0 s 25,125 0,100 -75,-25 -100,0 
```

![贝塞尔弧示例](https://i.stack.imgur.com/Ie9Rq.png)

通过镜像最后一个控制点自动计算两个红色控制点。红色`s`命令是隐含的，因为后面跟着四个点`s`。

对于三次贝塞尔圆弧命令，两个控制点和终点相对于同一起点（它们与顺序中的前一个点无关），但在每个圆弧处，更新相对坐标计算的基点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T09:10:02.693

此处的[文档](http://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands)指出，大写的**S**需要绝对坐标，而小写**的 s**需要相对坐标。**T**（绝对）和**t**（相对）类似。

**编辑**- 相对于*当前*点 - 抱歉，应该是明确的。与上面链接的同一文件包括以下内容：

> 对于命令的相对版本，所有坐标值都相对于命令开始处的当前点

# api - 我们是否应该始终在 HTTP PUT 请求中验证 url 和正文中的资源 ID？

> ID：15860642
> 
> 赞同：1
> 
> 时间：2013-04-07T08:59:41.267
> 
> 标签：api, http, put

假设我正在更新员工记录

网址 -`/api/employees/10`

身体 -

```
{ 
  id : 10,
  name : xyz
} 
```

我应该验证 url 中的员工 ID 与响应中的相同吗？因为一名员工可以自己点击 url，但通过在 PUT 正文中发送另一个值来更新另一名员工的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T11:08:20.597

是的，如果主体中的对象表示包含自己的键，您应该验证它是否与 URL 中的键匹配。客户端尝试将对象放置在`/api/employees/10`对员工 #10 的记录来说不是有效值的位置是错误的，因此您应该检查该对象并将其报告为错误，就像检查对象是否具有正确的语法一样。

我相信在这种情况下返回的最佳错误代码是[422 Unprocessable Entity](https://www.rfc-editor.org/rfc/rfc4918#section-11.2)，但我可能错了。

您可以做的另一件事是根本不将密钥包含在正文中。但是，我发现保留密钥对于与 API 的其他部分（可能嵌入在其他对象中）中表示相同类型对象的方式保持一致是有意义的。在使用 XML 时尤其如此（尽管看起来您在这里使用的是 JSON）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T10:22:56.800

如果您必须进行验证，您可能想要使用 POST。POST 不是幂等的，您应该管理更改。

PUT 是幂等的，它只是创建一个资源。这意味着您实际上并不关心 id 10 是什么以及它是新的 id 还是现有的 id。您只需将 id 10 替换为您提供的资源。只有在知道 uri 应该是什么时才使用 PUT。

# html - 在 HTML 中添加源标签作为文本

> ID：15860646
> 
> 赞同：0
> 
> 时间：2013-04-07T09:00:05.673
> 
> 标签：html

我需要在我的网站上显示一些 html/php 供用户查看，但实际上并没有运行，只是显示为文本。

**我只需要一些可以在下面这样工作的东西**

```
<table> <div> <p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T09:01:59.573

如果您想`<`显示为数据而不是表示*标记的开头*，请使用`&lt;`. 供`&`使用`&amp;`。文本节点中没有其他内容需要更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:05:48.930

```
‘&amp;’ (ampersand) becomes ‘&amp;amp;‘
‘"’ (double quote) becomes ‘&amp;quot;‘
”’ (single quote) becomes ‘&amp;#039;‘
‘&lt;’ (less than) becomes ‘&amp;lt;‘
‘&gt;’ (greater than) becomes ‘&amp;gt;‘ 
```

在你的情况下

```
&lt;table&gt; &lt;div&gt; &lt;p&gt; 
```

变成

<表格> <div> <p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T09:10:07.803

`<table>`用于打印`&lt;table&gt;`

[http://www.w3schools.com/html/html_entities.asp](http://www.w3schools.com/html/html_entities.asp)

# scala - 无法在 T 中访问类 Object 中的 Scala 方法克隆 不允许访问受保护的方法克隆，因为

> ID：15860647
> 
> 赞同：2
> 
> 时间：2013-04-07T09:00:22.160
> 
> 标签：scala, clone

我在 Scala 中克隆时遇到了麻烦。这是否可以克隆任意类型 T 的对象？像这样的东西：

```
import collection.immutable.Stack

object Tester extends App {
  trait Grand[T <: Cloneable] {
    val stack = Stack[T]()
    val h: T

    def snapshot() {
      stack push h.clone().asInstanceOf[T]
    }
  }
} 
```

但是它抛出：
**scala：无法在 T 中访问类 Object 中的
方法克隆 不允许访问受保护的方法克隆，因为前缀类型 T 不符合进行访问的对象 Tester 中的特征 Grand**

那里出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:55:01.453

我被告知了这个问题。在这种情况下，最好的方法是使用结构类型：

```
trait Grand[T <: {def cloneObject: T}] 
```

以便用户代码可能如下：

```
case class Person(name: String) {
  def cloneObject = copy()
}

object Roll extends App with Grand[Person] {
...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:04:12.350

clone() 来自 java.lang.Object 而不是来自 java.lang.Cloneable。Cloneable 只是一个标记接口。

您正在尝试的可能不起作用，因为实现 Cloneable 不会强制实现者用公共的 Object.clone() 覆盖受保护的 Object.clone() 。

请参阅 [http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#clone()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#clone()) 和 [http://docs.oracle.com/javase/7/docs/api/java /lang/Cloneable.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Cloneable.html)

结论：不，不可能克隆任意类型 T1 的对象。但是，您可以克隆任何 T2 类型的对象，其中 T2 由具有公共覆盖 clone() 的类型绑定。您的示例失败，因为 Object.clone() 受到保护，即只能从子类中调用。

# python - 检查字典中的列表是否与另一个列表相同？

> ID：15860655
> 
> 赞同：0
> 
> 时间：2013-04-07T09:01:23.117
> 
> 标签：python, list, sudoku

我正在尝试制作一个数独求解器，目前我正在制作检查它是否已解决的部分，但我有点卡住了。网格由 81 个数字 (9*9) 的列表组成，然后我有将它们分组为行、列和框的字典，例如：

```
self.rows = {'toptop':self.board[0:9],'topmid':self.board[9:18],'topbottom':self.board[18:27],  
'midtop':self.board[27:36],'midmid':self.board[36:45],'midbottom':self.board[45:54] 
```

, 我坚持的一点是检查每一行、每一列或每一框是否有数字 1-9。我已经尝试过并尝试过

```
self.winning = [1,2,3,4,5,6,7,8,9]
[x for x in self.rows.values() if (x == y for y in self.winning)] 
```

但这只是返回了分组为行的每个值。我也尝试了一些变化，有些会返回包含数字 1-9 的列表，但它们经常有重复；他们永远不会只显示 1-9 的列表。我怎么能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:19:03.350

很难从您发布的小代码中确切地看出您的问题所在，或者为了使其正常工作需要进行哪些更改，但根据您的问题标题和您提供的信息（您正在解决数独问题）我可以说以下将对您有所帮助。

为了比较列表中的项目是否在另一个列表中，我们必须确定范围。

假设我们有两个列表，A 和 B。

```
A == B
# lists are in the same order with the same items.
all(a in B for a in A)
# all items in A are in B. (order not checked)
all(b in A for b in B)
# all items in B are in A. (order not checked)
all(A[i] == B[i] for i in range(len(A)))
# all items in A are in B. (order checked) (len(A) <= len(B))
all(B[i] == A[i] for i in range(len(B)))
# all items in B are in A. (order checked) (len(B) <= len(A)) 
```

* * *

这是一个生成器，您可以在等长列表上使用它来检查它们是真/假的索引

```
def gen_diff(A, B):
    if len(A) != len(B):
        raise IndexError('lists not of same length')
    for i in range(len(A)):
        if A[i] == B[i]:
            yield (True, i)
        else:
            yield (False, i) 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-07T09:14:33.120

我认为您不能将列表与 进行比较`==`，但这样的事情应该可以工作：

```
len(x)==len(y) and all(x[i] == y[i] for i in range(len(x)-1)) 
```

# c++ - 对 istelf 的类引用

> ID：15860665
> 
> 赞同：-1
> 
> 时间：2013-04-07T09:03:09.197
> 
> 标签：c++, class, recursion, reference

我有一堂课变得太大，应该分开。但是，理想情况下要拆分的类需要访问主类的变量。我正在尝试制作一个引用主类的模板类，但我似乎遇到了包含递归的问题。我搜索过，有人说你可以使用前向声明，但我仍然得到类型不完整的错误。我知道这是一个常见问题，并且我[在 C++ 中看到过 Headers Include Each Other](https://stackoverflow.com/questions/396084/headers-including-each-other-in-c)的线程，但没有一个答案似乎有意义或有效。

任何帮助是极大的赞赏。

类main.h

```
class classref;
class classmain
{
public:
    classmain()
:B(*this)
{};

 classref B;
 int a;
}; 
```

类引用.h

```
#include "classmain.h"

class classref
{
public:
classref(classmain& ref)
    :A(ref)
{};

 classmain& A;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:06:20.663

这是因为您声明`classmain::B`为`classref`该类的实例。然后它需要*完整*的定义`classref`。

我建议您实际上`classmain`在`classref.h`文件中声明，并包含`classref.h`在`classmain.h`. 因此，与您现在在声明和包含方面所做的相反。

# asp.net - ASP 中继器项目命令不起作用

> ID：15860668
> 
> 赞同：0
> 
> 时间：2013-04-07T09:03:36.437
> 
> 标签：asp.net, repeater, itemcommand

我正在研究具有一个或多个链接按钮的asp中继器控件，问题是当我单击链接按钮时项目命令从未触发！

我花了最后 2 天寻找解决方案，但我什么也没得到！

```
 <asp:Repeater ID="rptTweets" runat="server" 
               onitemcommand="rptTweets_ItemCommand">
     <HeaderTemplate>
         <ul>
     </HeaderTemplate>
     <ItemTemplate>
         <li>
             <div class="imgb">
                 <img src="<%# Eval("userImg") %>" width="35" 
                      height="35" alt="Comment" />
             </div>
             <asp:TextBox ID="txtTweet" runat="server" 
                          TextMode="MultiLine" Rows="5" Columns="5" 
                          EnableViewState="true" Text='<%# Eval("tweet")%>' >
             </asp:TextBox>
             <div class="edit">
                 <asp:LinkButton ID="btnView" runat="server" 
                                 CommandName="View" 
                                 CommandArgument='<%# Eval("tweet")%>' 
                                 CssClass="comment-edit">View</asp:LinkButton>
             </div>
        </li>
    </ItemTemplate>
    <FooterTemplate>
        </ul>
    </FooterTemplate>
</asp:Repeater> 
```

这是绑定：

```
if (!IsPostBack)
{
    List<clsTweet> tw = getTweets();            

    rptTweets.DataSource = tw;
    rptTweets.DataBind();
} 
```

这是我的项目命令功能：

```
protected void rptTweets_ItemCommand(object source, RepeaterCommandEventArgs e)
{
    lblMsg.Text = "Working................................??";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T09:32:51.527

您必须删除

```
if (!IsPostBack) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:50:18.447

这是呈现的页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/jquery-latest.js"></script>
<script src="js/script.js" type="text/javascript"></script>
</head>

<body>
<form method="post" action="Drafts.aspx" id="Form1">
<div class="aspNetHidden">
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTk5Mzg3NTUxNw9kFgICAQ9kFggCAQ8WAh4Dc3JjBVlodHRwOi8vYTAudHdpbWcuY29tL3Byb2ZpbGVfaW1hZ2VzLzE4NjA4OTcxMDUvREIwNzQwREMtRDE5NC00NzI1LTk3OUEtRDBCRDAwNDcwMTE2X25vcm1hbGQCAw8PFgIeBFRleHQFH9i52KjYr9in2YTYsdit2YXZhiDYp9mE2YXZh9mI2LNkZAIFDw8WAh8BBTBEZXZlbG9wZXIsIEdlZWssIEZvdW5kZXIgT2Ygd3d3LkNvbm5jdGRUd2V0cy5jb21kZAIHD2QWAgIBDxYCHgtfIUl0ZW1Db3VudAICFgQCAQ9kFgRmDxUBWWh0dHA6Ly9hMC50d2ltZy5jb20vcHJvZmlsZV9pbWFnZXMvMTg2MDg5NzEwNS9EQjA3NDBEQy1EMTk0LTQ3MjUtOTc5QS1EMEJEMDA0NzAxMTZfbm9ybWFsZAIDDw8WAh4PQ29tbWFuZEFyZ3VtZW50BewFPz8/PyA/Pz8/Pz8gPz8/Pz8/PyA/PyA/Pz8/ID8/Pz8/ID8/Pz8/PyA/Pz8/PyA/Pz8/PyA/Pz8/Pz8gPz8gPz8/PyA/Pz8gPz8/Pz8/PyA/Pz8/Pz8/IDU0ID8/Pz8/ID8/PyA/Pz8/PyA/Pz8gPz8/Pz8gPz8/Pz8/Pz8uID8/Pz8/ID8/PyA/Pz8/ID8/Pz8gPz8/Pz8/ID8/Pz8gPz8/Pz8/PyA/Pz8/Pz8/ID8/Pz8/PyA/Pz8/Pz8gPz8/Pz8/PyA/Pz8/Pz8/ID8/Pz8/PyA/Pz8gPz8/Pz8/ID8/PyA/Pz8/ID8/Pz8/ID8/PyA/Pz8gPz8/ID8/Pz8/ID8/Pz8/ID8/PyA/Pz8/Pz8gPz8/PyA/Pz8/Pz8/ID8/Pz8/Pz8gPz8/PyA/Pz8/ID8/Pz8/PyAoPz8/PyA/Pz8/Pz8gPz8/PyA/PyA/Pz8pID8/Pz8/ID8/Pz8uID8/Pz8/ID8/Pz8gPz8/Pz8/ID8/Pz8/Pz8gPz8/PyA/Pz8/Pz8/ID8/Pz8/Pz8/ID8/Pz8/Pz8gPz8/Pz8/Pz8gPz8/Pz8/Pz8gPz8/Pz8gKDEzID8/Pz8/ID8/Pz8/PyA/Pz8/Pz8gPz8/Pz8/Pyk/ID8/Pz8/ID8/Pz8/Pz8gPz8/Pz8/Pz8gPz8/Pz8/PyA/Pz8/Pz8/ID8/Pz8/Pz8/ICg/Pz8gPz8/Pz8gPz8gPz8/PyA/Pz8/Pz8/ID8/Pz8/PykuID8/PyA/Pz8gPz8/PyA/Pz8/ID8/PyA/Pz8/PyA/Pz8/Pz8gPz8/Pz8/PyA/Pz8/Pz8/LiA/PyAxMCA/Pz8/Pz8gMjAwOSA/Pz8/ID8/Pz8gPz8/Pz8/PyA/Pz8/Pz8gPz8/Pz8/PyA/Pz8/Pz8/PyBJRkZIUyA/Pz8/ID8/Pz8gPz8/Pz8/ID8/Pz8/Pz8gPz8/ID8/PyA/Pz8/ID8/Pz8/ID8/ID8/Pz8gPz8/PyA/Pz8/ID8/Pz8gPz8/PyAoMTkwMS0yMDAwKWRkAgIPZBYEZg8VAVlodHRwOi8vYTAudHdpbWcuY29tL3Byb2ZpbGVfaW1hZ2VzLzE4NjA4OTcxMDUvREIwNzQwREMtRDE5NC00NzI1LTk3OUEtRDBCRDAwNDcwMTE2X25vcm1hbGQCAw8PFgIfAwW6CtmG2KfYr9mKINin2YTZh9mE2KfZhCDYp9mE2LPYudmI2K/ZiiDZh9mIINmG2KfYr9mKINiz2LnZiNiv2Yog2KLYs9mK2YjZitiMINmF2YLYsdmR2Ycg2YXYr9mK2YbYqSDYp9mE2LHZitin2LYg2KXYsCDYqtio2YTYuiDYudiv2K8g2KjYt9mI2YTYp9iq2Ycg2KfZhNix2LPZhdmK2KkgNTQg2KjYt9mI2YTYqSDYudmE2Ykg2YXYs9iq2YjZiSDZg9ix2Kkg2KfZhNmC2K/ZhSDYp9mE2LPYudmI2K/ZitipLiDYpdi22KfZgdipINil2YTZiSDYsNmE2YPYjCDZiti52K/ZkSDYp9mE2YfZhNin2YQg2KPZg9ir2LEg2KfZhNij2YbYr9mK2Kkg2KrYrdmC2YrZgtin2Ysg2YTYqNi32YjZhNipINin2YTYr9mI2LHZiiDYp9mE2LPYudmI2K/ZiiDYp9mE2YXZhdiq2KfYsiDYqNir2YTYp9ir2Kkg2LnYtNixINio2LfZiNmE2KnYjCDYpdmE2Ykg2KzYp9mG2Kgg2KrYsti52YXZhyDYudmE2Ykg2YPYo9izINmI2YTZiiDYp9mE2LnZh9ivINio2KXYq9mG2Ykg2LnYtNixINio2LfZiNmE2KnYjCDZiNmD2KPYsyDYp9mE2KfYqtit2KfYryDYp9mE2LPYudmI2K/ZiiDYp9mE2LDZiiDYs9mP2YXZiiDZhNin2K3Zgtin2YsgKNio2YPYo9izINin2YTYo9mF2YrYsSDZgdmK2LXZhCDYqNmGINmB2YfYrykg2KjYs9io2LnYqSDZhdix2KfYqi4g2YjZitmP2LnYryDZhtin2K/ZiiDYp9mE2YfZhNin2YQg2KfZhNiz2LnZiNiv2Yog2KPZg9ir2LEg2KfZhNij2YbYr9mK2Kkg2KfZhNiz2LnZiNiv2YrYqSDYqtit2YLZitmC2KfZiyDZhNmE2KjYt9mI2YTYp9iqINin2YTYrtin2LHYrNmK2Kkg2KjZiNin2YLYuSAoMTMg2KjYt9mI2YTYqSDYrtmE2YrYrNmK2Kkg2YjYudix2KjZitipINmI2KLYs9mK2YjZitipKdiMINmI2KPZg9ir2LEg2KfZhNij2YbYr9mK2Kkg2KfZhNii2LPZitmI2YrYqSDYqtit2YLZitmC2KfZiyDZhNmE2KPZhNmC2KfYqCDYp9mE2KLYs9mK2YjZitipICjYs9iq2Kkg2KPZhNmC2KfYqCDZgdmKINir2YTYp9irINmF2LPYp9io2YLYp9iqINmF2K7YqtmE2YHYqSkuINmI2YfZiCDYo9mI2YQg2YbYp9iv2Y0g2YrYrdi12YQg2LnZhNmJINio2LfZiNmE2Kkg2KfZhNiv2YjYsdmKINin2YTYs9i52YjYr9mKINin2YTZhdmF2KrYp9iyLiDZgdmKIDEwINiz2KjYqtmF2KjYsSAyMDA5INij2LnZhNmGINmF2YjZgti5INin2YTYp9iq2K3Yp9ivINin2YTYr9mI2YTZiiDZhNmE2KXYrdi12KfYoSDZiNin2YTYqtin2LHZitiuIElGRkhTINit2LXZiNmEINmG2KfYr9mKINin2YTZh9mE2KfZhCDYp9mE2LPYudmI2K/ZiiDYudmE2Ykg2YTZgtioINmG2KfYr9mKINin2YTZgtix2YYg2YHZiiDZgtin2LHYqSDYotiz2YrYpyDZiNiw2YTZgyDYrtmE2KfZhCDZgdiq2LHYqSAoMTkwMS0yMDAwKWRkZBYW/O6+a+pPOSR0BG0yXmCFSqoYFrXa5HjYvvuLlOsq" />
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['Form1'];
if (!theForm) {
    theForm = document.Form1;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>

<div class="aspNetHidden">

    <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWBQLPk4yNDgLTpKLUAwLTm+btDAKkiLKlCAK42v7pCPZE7CTv+APwWJhRfpfg6RxZx1JkCol595WLmQ5CgQ5q" />
</div>
<!-- start wrap -->
<div class="wrap">
    <!-- start header -->
    <div class="header">
        <!-- start box -->
        <div class="box">
            <!-- start logo -->
            <div class="logo">
                <a href="Default.aspx" title="Connctd Tweets"><img src="images/logo.png" width="202" height="55" alt="Connctd Tweets" /></a>
            </div>
            <!-- end logo -->
        </div>
        <!-- end box -->
    </div>
    <!-- end header -->
    <!-- start box -->
    <div class="box">
        <!-- start menu bar -->
        <div class="menu-bar">
            <!-- start menu-in -->
            <div class="menu-in">
                <!-- start navigation -->
                <div class="navigation">
                    <ul>                                 
                        <li><a href="Default.aspx" title="Home">Home</a></li>
                        <li><a href="About.aspx" title="About us">About us</a></li>
                        <li><a href="Contactus.aspx" title="Contuct us">Contuct us</a></li>
                    </ul>
                </div>
                <!-- end navigation -->
                <!-- start social -->
                <div class="social">
                    <ul>
                        <li class="facebook"><a href="#" title="Facebook">Facebook</a></li>
                        <li class="twitter"><a href="#" title="Twitter">Twitter</a></li>
                        <li class="linkedin"><a href="#" title="Linkedin">Linkedin</a></li>
                        <li class="google"><a href="#" title="Google">Google</a></li>
                    </ul>
                </div>
                <!-- end social -->
            </div>
            <!-- end menu-in -->
        </div>
        <!-- end menu bar -->
        <!-- start container -->
        <div class="container">
            <!-- start leftcol -->
            <div class="leftcol">
                <!-- start profile -->
                <div class="profile">
                    <div class="imgb"><img src="http://a0.twimg.com/profile_images/1860897105/DB0740DC-D194-4725-979A-D0BD00470116_normal" id="userImg" width="58" height="57" alt="Profile" /></div>
                    <p><span> <span id="lblFullName">عبدالرحمن المهوس</span> </span> <br />  
                        <span id="lblDescription" style="font-size:Small;">Developer, Geek, Founder Of www.ConnctdTwets.com</span> </p>
                </div>
                <!-- end profile -->
                <!-- start subnav -->
                <div class="subnav">
                    <ul>
                        <li class="logout"><a href="#" title="Logout"><span>Logout</span></a></li>
                        <li class="history"><a href="#" title="History"><span>History</span></a></li>
                        <li class="draft active"><a href="#" title="Draft"><span>Draft</span></a></li>
                        <li><input type="text" name="Search" value="Search ...." class="input" onfocus="if(this.value == 'Search ....') { this.value = ''; }" onblur="if(this.value == '') { this.value = 'Search ....'; }" /><input name="button" type="submit" value="" class="button" /></li>
                    </ul>
                </div>
                <!-- end subnav -->
            </div>
            <!-- end leftcol -->
            <!-- start rightcol -->
            <div class="rightcol">
                <!-- start tab -->
                <div class="tab">
                    <!-- start tab nav -->
                    <div class="tab-nav">
                        <ul>
                            <li><a href="#" title="Writing Tweet">Writing Tweet</a></li>
                            <li><a href="#" title="Writing Tweet" class="active">View Tweet</a></li>
                        </ul>
                    </div>
                    <!-- end tab nav -->
                    <!-- start gray box -->
                    <div class="gray-box">
                        <!-- start comment -->

                        <div id="divTweets" class="comment">

                            <ul>

                             <li>
                                    <div class="imgb"><img src="http://a0.twimg.com/profile_images/1860897105/DB0740DC-D194-4725-979A-D0BD00470116_normal" width="35" height="35" alt="Comment" /></div>
                                     <textarea name="rptTweets$ctl01$txtTweet" rows="5" cols="5" id="rptTweets_txtTweet_0">
???? ?????? ??????? ?? ???? ????? ?????? ????? ????? ?????? ?? ???? ??? ??????? ??????? 54 ????? ??? ????? ??? ????? ????????. ????? ??? ???? ???? ?????? ???? ??????? ??????? ?????? ?????? ??????? ??????? ?????? ??? ?????? ??? ???? ????? ??? ??? ??? ????? ????? ??? ?????? ???? ??????? ??????? ???? ???? ?????? (???? ?????? ???? ?? ???) ????? ????. ????? ???? ?????? ??????? ???? ??????? ???????? ??????? ???????? ???????? ????? (13 ????? ?????? ?????? ???????)? ????? ??????? ???????? ??????? ??????? ???????? (??? ????? ?? ???? ??????? ??????). ??? ??? ???? ???? ??? ????? ?????? ??????? ???????. ?? 10 ?????? 2009 ???? ???? ??????? ?????? ??????? ???????? IFFHS ???? ???? ?????? ??????? ??? ??? ???? ????? ?? ???? ???? ???? ???? ???? (1901-2000)</textarea>
                                    <div class="edit"><a id="rptTweets_btnView_0" class="comment-edit" href="javascript:__doPostBack(&#39;rptTweets$ctl01$btnView&#39;,&#39;&#39;)">View</a></div>
                                </li>

                             <li>
                                    <div class="imgb"><img src="http://a0.twimg.com/profile_images/1860897105/DB0740DC-D194-4725-979A-D0BD00470116_normal" width="35" height="35" alt="Comment" /></div>
                                     <textarea name="rptTweets$ctl02$txtTweet" rows="5" cols="5" id="rptTweets_txtTweet_1">
نادي الهلال السعودي هو نادي سعودي آسيوي، مقرّه مدينة الرياض إذ تبلغ عدد بطولاته الرسمية 54 بطولة على مستوى كرة القدم السعودية. إضافة إلى ذلك، يعدّ الهلال أكثر الأندية تحقيقاً لبطولة الدوري السعودي الممتاز بثلاثة عشر بطولة، إلى جانب تزعمه على كأس ولي العهد بإثنى عشر بطولة، وكأس الاتحاد السعودي الذي سُمي لاحقاً (بكأس الأمير فيصل بن فهد) بسبعة مرات. ويُعد نادي الهلال السعودي أكثر الأندية السعودية تحقيقاً للبطولات الخارجية بواقع (13 بطولة خليجية وعربية وآسيوية)، وأكثر الأندية الآسيوية تحقيقاً للألقاب الآسيوية (ستة ألقاب في ثلاث مسابقات مختلفة). وهو أول نادٍ يحصل على بطولة الدوري السعودي الممتاز. في 10 سبتمبر 2009 أعلن موقع الاتحاد الدولي للإحصاء والتاريخ IFFHS حصول نادي الهلال السعودي على لقب نادي القرن في قارة آسيا وذلك خلال فترة (1901-2000)</textarea>
                                    <div class="edit"><a id="rptTweets_btnView_1" class="comment-edit" href="javascript:__doPostBack(&#39;rptTweets$ctl02$btnView&#39;,&#39;&#39;)">View</a></div>
                                </li>

                            </ul>

                        </div>

                        <!-- end comment -->

                    </div>
                    <!-- end gray-box -->
                </div>
                <!-- end tab -->
            </div>
            <!-- end rightcol -->
            <div class="clear"></div>
        </div>
        <!-- end container -->
    </div>
    <!-- end box -->
</div>
<!-- end wrap -->
 </form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T09:12:18.863

你错过了这个 - `e.CommandName`：

```
protected void rptTweets_ItemCommand(object source, RepeaterCommandEventArgs e)
{
    if(e.CommandName == "View") // add this
    {
        lblMsg.Text = "Working................................??";
    }
} 
```

还要检查`ViewState`是否没有为您的页面禁用。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default3.aspx.cs" Inherits="Default3" EnableViewState="false" %> 
```

如果它设置为`false`，则将其设置为`true`或仅将其删除，默认情况下其设置为`true`

# perl - 在 perl cgi 中添加指向 head 的链接

> ID：15860670
> 
> 赞同：1
> 
> 时间：2013-04-07T09:03:55.530
> 
> 标签：perl, cgi

我是 Perl 的新手，我正在尝试在 perl 生成的 html 页面中包含一个 CSS 文件，我该如何使用 cgi 做到这一点？它应该类似于 print $cgi -> start_html( -link => { -href => '/styles/main.css', -rel => 'stylsheet', -type => 'text/css'});

这是完整的代码，

```
#!C:\Dwimperl\perl\bin\perl.exe
use CGI;
my $cgi = new CGI;

# ###----- GETTING THE SCRIPTS AND STYLES ------###
my $jquery = "//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js";

# ###----- PRINTING THE PAGE -----###
print   $cgi -> header;
print   $cgi -> start_html(
            -title => "TestTitle",
            -link => { -href => '/styles/main.css', -rel => 'stylsheet', -type => 'text/css'},
            -script=> [{-language => 'javascript',-src => $jquery},{-code => $jscript}],
        );
print   $cgi -> h1({-class=>"title",-align=>"center"},"Zero Testing");
print   $cgi -> start_div({-align=>"center"});
print   $cgi -> start_div({-align=>"center",-style=>"margin-bottom:35px;"});
print   $cgi -> a({-class=>"linkButton",-id=>"btn_Page",-href=>"Test.pl"},"Suites Page");
print   $cgi -> end_div;
print   $cgi -> start_form({-method=>"get",-id=>"dataForm"});
print   $cgi -> end_form;
print   $cgi -> end_div;
print   $cgi -> end_html(); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:17:46.017

你可以这样写：

```
use CGI qw/:standard/;

# ...     

print $cgi->start_html(
   -title =>"TestTitle",
   -script=> [ {-language => 'javascript',-src => $jquery}, {-code => $jscript} ],
   -head => [
      Link( { -href => '/styles/main.css', -rel => 'stylsheet', -type => 'text/css'}),
    ]
); 
```

# iphone - 是否可以在 iPhone 中以编程方式启用热点模式？

> ID：15860673
> 
> 赞同：8
> 
> 时间：2013-04-07T09:04:11.787
> 
> 标签：iphone, wifi

我想开发一个应用程序，以编程方式在 iPhone 上创建一个具有预定义名称的个人热点。

是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T09:16:35.310

您不能通过 API 或通过[配置文件在代码中创建热点](http://developer.apple.com/library/ios/#featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html)

您是否看过[GameKit](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GameKit_Collection/Introduction/Introduction.html)，它在通过蓝牙或 WiFi 透明地轻松连接设备方面做得很好？不要让“游戏”名称欺骗您 - 它是一个很棒且易于使用的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T09:12:48.133

如果您愿意花时间和精力来构建它，当然可以。

但是，您*只能*对越狱手机执行此操作，并且您需要连接私有 API:s。如果您仍然想这样做，则可以通过此处记录的私有 API：s 开始：[https ://github.com/nst/iOS-Runtime-Headers](https://github.com/nst/iOS-Runtime-Headers)

# python - 如何从 HTML 中获取变量名回到我的 python

> ID：15860676
> 
> 赞同：0
> 
> 时间：2013-04-07T09:04:38.290
> 
> 标签：python, html, django

嘿伙计们，我如何将 HTML 中的变量名返回到我的 python 中。所以我在我的 html 中有这个变量 {{file}} ，我需要将它传递回 python 文件才能使函数工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:38:47.683

您可以使用方法`POST`或`GET`. 如果您详细说明或向我们展示您的一些代码，也许您可​​以获得正确的答案。

# c# - 锁块内的异常

> ID：15860681
> 
> 赞同：13
> 
> 时间：2013-04-07T09:05:19.257
> 
> 标签：c#, .net, exception, locking

说，如果我在 C# 代码上有以下块：

```
public class SynchedClass
{
    public void addData(object v)
    {
        lock(lockObject)
        {
            //Shall I worry about catching an exception here?

            //Do the work
            //arr.Add(v);
        }
    }
    private List<object> arr = new List<object>();
    private object lockObject = new object();
} 
```

我应该尝试在`lock`块内捕获异常吗？（我主要担心的是锁内可能会引发异常，这将阻止锁被“解锁”。）

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-07T09:05:59.650

当异常从锁块中逃逸时，锁将被释放。

那是因为`lock(){...}`被编译器大致翻译成：

```
Monitor.Enter(obj);
try{

 // contents of the lock block

}finally{
    Monitor.Exit(obj);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T09:32:30.763

除了释放互斥体之外，还有更多需要考虑的事情。

a中发生异常`lock`会释放锁，但程序现在处于什么状态？等待锁的线程现在将被唤醒，并且现在可能正在处理无效状态。这是一个没有理想解决方案的难题。

最好的办法是尽量保持你的锁尽可能小，并调用不会抛出的方法。（那是忽略房间里的大象是邪恶的`ThreadAbortException`......）

有关这些问题的详细讨论，请参阅 Eric Lippert 的文章：[Locks and exceptions do not mix](https://ericlippert.com/2009/03/06/locks-and-exceptions-do-not-mix/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T09:07:17.600

“lock (x) ...”形式的 lock 语句，其中 x 是引用类型的表达式，完全等同于 (C# 4.0)：

```
 bool entered = false;
 try { 
    System.Threading.Monitor.Enter(x, ref entered);
  ... 
 }
 finally { if (entered) System.Threading.Monitor.Exit(x); } 
```

# javascript - For 循环中的 onClick 事件

> ID：15860683
> 
> 赞同：17
> 
> 时间：2013-04-07T09:05:42.257
> 
> 标签：javascript, for-loop

我尝试使用 for 创建一个循环，并通过 onclick 事件递增，但它不起作用。

js的一部分：

```
 var gameCase = ['', '', '', '', '', '', '', '', ''], // 9
    itemLists = $('game').getElementsByTagName('li'); // 9 items

    for( var i = 0; i < itemLists.length; i++ ) {
         // i already egal to 9
         itemLists[i].onclick = function() {
              // do something
         }
    } 
```

但在这种情况下，在我能够单击列表的元素之前，For 循环已经完成。

此外，我想获取我单击的项目列表并将其保存在数组中。我尝试了一个 gameCase[this] （在 onclick 函数中），但我不知道这是否是好方法。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-07T09:12:52.030

[John Resig 在“JavaScript Ninja 的秘密”（ http://ejohn.org/apps/learn/#59](http://ejohn.org/apps/learn/#59)）中很好地介绍了这个主题

您需要创建一个临时范围来保留 i 的价值

```
for ( var i = 0; i < itemLists.length; i++ ) (function(i){ 
  itemLists[i].onclick = function() {
      // do something
  }
})(i); 
```

编辑：

```
var gameCase = ['', '', '', '', '', '', '', '', ''], // 9
$listParent = $('game').find('ul'), // li's parent
itemLists = $('game').getElementsByTagName('li'); // 9 items

var listHandler = (function() {
  var i = 0;

  return function() {
    // $(this) will in here refer to the clicked li
    i++ // increment i

    if ( i === 9 ) {
      $listParent.off('click', 'li', listHandler); //remove eventhandler when i reaches 9
    }
  }
}());

$listParent.on('click', 'li', listHandler); // attach eventhandler to ul element 
```

这应该做你想要的，因为我在工作，所以现在不能测试它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-07T09:09:58.177

包装你的听众：

```
onclick = (function(i) {return function() {
    ...
};})(i); 
```

这解决了您的变量范围问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T09:13:03.317

抱歉，如果我没有正确理解您的问题，从代码中我了解到，您正在尝试将 onclick 处理程序添加到游戏标签中找到的所有列表元素（也许它应该是一个类/ID）。

当脚本标签/文件在没有任何用户交互的情况下加载时，将执行 for 循环。

如果您希望分配一个使用计数器当前值的函数。使用以下代码：

```
itemLists[i].onclick = (function() {
    return function() {
         // TODO ---
        // Your handler code here
}
})(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-19T23:32:21.263

另一种选择是使用 forEach 循环，这会为每次迭代创建一个新变量。

```
var gameCase = ['', '', '', '', '', '', '', '', ''], // 9
itemLists = $('game').getElementsByTagName('li'); // 9 items

itemLists.forEach(function(item,index){
    item.onclick = function() {
      // do something
 }
}); 
```

# c - lcc tmpnam crash

> ID：15860684
> 
> 赞同：0
> 
> 时间：2013-04-07T09:05:44.147
> 
> 标签：c

When I use the `lcc` compiler and call `tmpnam(buf)` then the program crashes.

```
Reason: L_tmpnam indicates that buf must be 14 bytes long, while the string returned 
is "D:\Documents and settings\Paul\Temporary\TmP9.tmp" which is much longer than 14\. 
```

What do I wrong, how can this behavior be explained.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:33:00.727

逐字逐句`man tmpnam`：

> 切勿使用此功能。请改用 mkstemp(3) 或 tmpfile(3)。

* * *

无论如何，正如你所要求的：

生成的`tmpnam()`名称由最大`L_tmpnam`长度的文件名组成，**前缀**为 name 的目录`P_tmpdir`。

`tmpnam()`因此，最好声明传递给的缓冲区（如果是 C99）：

```
char pathname[strlen(P_tmpdir) + 1 + L_tmpnam + 1] = ""; /* +1 for dir delimiting `/` and +1 for zero-termination */ 
```

如果不是 C99，你可能会这样做：

```
size_t sizeTmpName = strlen(P_tmpdir) + 1 + L_tmpnam + 1;
char * pathname = calloc(sizeTmpName, sizeof (*pathname));
if (NULL == pathname)
  perror("calloc() for 'pathname'"); 
```

然后`tmpnam()`像这样调用：

```
if (NULL == tmpnam(pathname))
  fprintf(stderr, "tmpnam(): a unique name cannot be generated.\n");
else
  printf("unique name: %s\n", pathname);

... /* do soemthing */

/* if on non C99 and calloc(() was called: */
free(pathname); 
```

# java - JNI 函数 Java_java_io_WinNTFileSystem_rename0 中的内存泄漏？

> ID：15860686
> 
> 赞同：1
> 
> 时间：2013-04-07T09:05:47.840
> 
> 标签：java, java-native-interface

[我认为http://download.java.net/openjdk/jdk6/promoted/b27/openjdk-6-src-b27-](http://download.java.net/openjdk/jdk6/promoted/b27/openjdk-6-src-b27-26_oct_2012.tar.gz)中的文件jdk/src/windows/native/java/io/WinNTFileSystem_md.c中的以下函数[26_oct_2012.tar.gz](http://download.java.net/openjdk/jdk6/promoted/b27/openjdk-6-src-b27-26_oct_2012.tar.gz)忽略释放所使用的内存，`frompath`或者`topath`如果发现其中之一`NULL`...

```
JNIEXPORT jboolean JNICALL
Java_java_io_WinNTFileSystem_rename0(JNIEnv *env, jobject this, jobject from,
                                 jobject to)
{

    jboolean rv = JNI_FALSE;
    WCHAR *frompath = fileToNTPath(env, from, ids.path);
    WCHAR *topath = fileToNTPath(env, to, ids.path);
    if (frompath == NULL || topath == NULL)
        return JNI_FALSE;
    if (_wrename(frompath, topath) == 0) {
        rv = JNI_TRUE;
    }
    free(frompath);
    free(topath);
    return rv;
} 
```

我错过了什么吗？这实际上是一个错误吗？

**已解决：**  进一步查看[io_util_md.c](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/tip/src/windows/native/java/io/io_util_md.c)`pathToNTPath`中函数的详细信息，我可以看到它只会在内存不足错误的情况下返回，所以我想我们不在乎是否忽略了释放我们编辑的东西当JVM即将崩溃时！在我看来，这仍然应该记录在函数中。`fileToNTPath``NULL``malloc``Java_java_io_WinNTFileSystem_rename0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:27:19.583

我认为原点是有效的。虽然对这段代码使用的其他函数的研究确实表明问题可能并不那么重要，但从本身来看，这段代码是缺乏的。

代码审查的一般规则是，如果有人有问题，通常应该在代码中回答，至少带有注释。

注释的一般规则是，如果它可以用代码表达，它可能应该是。

如果编写代码以消除问题，所有这些问题都会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:19:06.833

从我可以看到[`pathToNTPath()`](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/windows/native/java/io/io_util_md.c)，它被 调用`fileToNTPath()`，它仅在 的情况下返回 NULL `OutOfMemoryException`，所以我想可以安全地假设一个人不需要太在意释放几个字节的路径名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:53:21.613

**已解决：**  进一步查看[io_util_md.c](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/tip/src/windows/native/java/io/io_util_md.c)`pathToNTPath`中函数的详细信息，我可以看到它只会在内存不足错误的情况下返回，所以我想我们不在乎是否忽略了释放我们编辑的东西当JVM即将崩溃时！在我看来，这仍然应该记录在函数中。`fileToNTPath``NULL``malloc``Java_java_io_WinNTFileSystem_rename0`

# json - 无法找出 JDOMException SAXBuilder 的原因

> ID：15860687
> 
> 赞同：0
> 
> 时间：2013-04-07T09:05:48.133
> 
> 标签：json, servlets, saxparser, jdom

我无法弄清楚 JDOMException 被捕获的原因。我将 XML 格式字符串传递给 SAXBulider 的构建函数以获取文档，此处抛出异常。

存储在字符串结果中的 XML 字符串：

```
<?xml version='1.0' encoding='ISO-8859-1'?><results><result cover="http://cps-static.rovicorp.com/3/JPG_170/MI0002/213/MI0002213251.jpg?partner=allrovi.com" title="Hey-Ya" artist="A.D.D." year="N/A" genre="Pop/Rock" details="http://www.allmusic.com/album/hey-ya-mw0001029555"/><result cover="http://cps-static.rovicorp.com/3/JPG_170/MI0003/152/MI0003152820.jpg?partner=allrovi.com" title="Heyma" artist="Abir Nasraoui" year="N/A" genre="Latin, Pop/Rock" details="http://www.allmusic.com/album/heyma-mw0002115440"/><result cover="http://cs-server.usc.edu:14186/album.jpg" title="Heyla" artist="Candy" year="2003" genre="R&B" details="http://www.allmusic.com/album/heyla-mw0000698853"/><result cover="http://cps-static.rovicorp.com/3/JPG_170/MI0002/172/MI0002172691.jpg?partner=allrovi.com" title="Heya" artist="Jimmy Stallings" year="2003" genre="International" details="http://www.allmusic.com/album/heya-mw0000336392"/><result cover="http://cps-static.rovicorp.com/3/JPG_170/MI0003/361/MI0003361503.jpg?partner=allrovi.com" title="Heya" artist="David Jones" year="N/A" genre="Electronic" details="http://www.allmusic.com/album/heya-mw0002388044"/></results> 
```

导致异常的部分代码是：

```
SAXBuilder builder = new SAXBuilder();

    String temp="";

    out.println("Inside Servlet :::: ");

    try
    {
        out.println("1\. HERE");
        Document doc = builder.build(new StringReader(results));
        out.println("2\. HERE");
        Element root=doc.getRootElement();
        out.println(root);  
        List resultChildren=root.getChildren();
        out.println("3\. HERE");
        if(resultChildren.size()==0)
        {
            out.println("{\"results\":[]}");
            return;
        }           
        temp="{\"results\":{\"result\":[";
        for(int i=0;i<resultChildren.size();i++)
        {
            Element tempElem = (Element)(resultChildren.get(i));

            if(i>0)
            temp+=",";

            if((request.getParameter("type")).equals("Artists"))                    
                 temp+=parseArtists(tempElem);                   
            else if((request.getParameter("type")).equals("Albums"))
                temp+=parseAlbums(tempElem);
            else                    
                temp+=parseSongs(tempElem);                                                         
        }
        temp+="]}}";
    }
    catch(JDOMException ex)
    {
        errors+="1.Could not parse xml file";           
    }
    catch(IOException ex)
    {
        errors+="2.Could not parse xml file";           
    } 
```

使用 PrintWriter 生成的输出如下：

```
Inside Servlet :::: 
1\. HERE
{"errors": {"1.Could not parse xml file"}} 
```

因此，在 doc=builder.build(new StringReader(results)); 处抛出异常。

请指导我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:22:49.553

在打印堆栈跟踪（或至少是异常消息）之后，您会看到输入 XML 格式不正确：有一个包含字符串的属性`"R&B"`。& 符号恰好是少数几个必须转义的字符之一，在这种情况下它应该是：`"R&amp;B"`.

# twitter-bootstrap - DURANDAL - Passing parameters to composition and modal

> ID：15860688
> 
> 赞同：2
> 
> 时间：2013-04-07T09:05:48.647
> 
> 标签：twitter-bootstrap, durandal

My goal is to show a **detailed** view of an item using Bootstrap modal mechanism in Durandal. Assume i have a viewmodel: 'itemdetail' and another viewmodel: 'items'. The modal element of Bootstrap is located on items.html but it is called from itemdetail.js in the viewAttached function.

I was able to figure out how to navigate to a detailed view of an item using the router (by passing the id 'myroute/:id') but i couldn't figure out how to compose it without the routing. I would expect something like that:

```
<div data-bind="compose: {model: viewmodels/myvm, activate:true, id:itemID} 
```

I understand that i can use and observable and pass it some settings. But i don't know if the settings include my own parameters.

Eventualy i would like to inject this composition (the detailed description of the item) into a bootstrap modal and call it from itemdetails (attachedView).

Does it make any sense? is there a better way to do it?

thanks, David

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-09T10:14:05.483

我认为使用 twitter bootstrap modal call 传递数据更优雅、更容易：

```
app.showModal('viewmodels/???', yourdataobject).then(function (result) {
            if (result) {

           }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-12T20:03:37.600

顺便说一句，我认为这是一个优雅的解决方案。我正在使用 v2.0.1。

```
 <!-- ko compose: { model:'MyMODEL' , activationData:[YOUR_DATA] } -->
 <!-- /ko -->
....
function activate(YOUR_DATA){
    //Do something 

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:01:14.417

我认为没有办法将参数直接包含在构成视图/视图模型的一部分中。参数由路由器和导航处理，而不是直接由合成过程处理。

但是，如果您要组合的视图模型是单例（如 Durandal 的），您可以手动要求它，在其上设置任何属性（如 itemId），然后让组合正常发生。当调用激活函数时，视图模型将已经设置了它的 itemId 属性。
或者，根据您要执行的操作，您可以手动调用激活函数并传入您自己的“上下文”对象。在这种情况下，您可能希望在 compose 绑定中设置 activate: false 。

我知道，这与将其作为激活函数的参数并不完全相同，但它可能会提供一种方法来完成您想要做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T23:26:54.547

我能够解决这个问题，虽然我不确定我的解决方案是不是最优雅的，但它对我来说效果很好。

我做的第一件事是将 BOOTSTRAP 模态的 html 放在 items.html（呈现项目的视图模型的视图）上，如下所示：

```
<div id="itemDetails" class="modal hide fade" tabindex="-1" role="dialog" aria-abelledby="myModalLabel" aria-hidden="true">
   <div class="modal-header">
       <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
       <h3 id="myModalLabel">Modal header</h3>
     </div>
   <div class="modal-body" data-bind="compose: { model: 'viewmodels/itemdetail', activate: activateItemDetail }" >
    <!--  -->
</div>
<div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
</div> 
```

请注意，我将绑定线放在 modal-body

```
data-bind="compose: { model: 'viewmodels/itemdetail', activate: activateItemDetail }" 
```

请注意，我将属性 activateItemDetail 分配给“激活”。当用户单击调用 modal 的 dom 元素时，activateItemDetail 被分配为“true”。activateItemDetail 订阅了名为 itemId 的 Items 视图模型的另一个属性，如下所示：

```
vm.itemId.subscribe(function(){
      this.activateItemDetail(true);
  }, vm); 
```

所以现在我们知道只有在我们收到用户的 id 后才会激活详细视图模型。

接下来，在 itemdetail 视图模型激活中，我放置了以下代码

```
 function activate(){
     //get the item id from the items - you need to require the items model
     var id = items.requestedItemId;
     //now you need to get the data from your service 
     dataService.getItemDetail(item, itemId),
     //now you call the modal 
     $('#itemdetail').modal.show();

 } 
```

您需要做的最后一件事是在完成后停用 itemdetail 视图模型。您可以通过数据绑定停用功能到 Bootstrap 模式的“隐藏”事件来做到这一点，如下所示：

```
data-bind="event: {hidden: closeItemDetails}" 
```

然后您只需像这样停用：

```
this.activateItemDetail(false); 
```

而已。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-23T04:58:07.260

在 durandal 2.0 中，您应该使用 activationData 对象来传递参数：

`composition.compose(wrapper, {mode:..., view:..., activationData : {id:}}, context`

在你的情况下： `compose:{..., activationData:{itemId:X}}`

# python - replacing pronoun with its antecedent using python2.7 and nltk

> ID：15860695
> 
> 赞同：10
> 
> 时间：2013-04-07T09:06:08.157
> 
> 标签：python, python-2.7, nlp, nltk

As the title shows I am trying to look for pronouns in a string and replace it with it's antecedent like:

```
[in]: "the princess looked from the palace, she was happy".
[out]: "the princess looked from the palace, the princess was happy". 
```

I use pos tag to return pronouns and nouns. I need to know how to replace without knowing the sentence, meaning how to specify the subject in the sentence to replace the pronoun with it. Any suggestions?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T10:46:02.853

我不知道 nltk 包（从未使用过），但它似乎马上就给出了答案。如果您查看 nltk.org 上的解析树示例，它表明主题已成功标记为“NP-SBJ”标签。这不是你要找的吗？

*（早些时候，我忽略了标题中的“nltk”部分，我写了下面的部分。我认为作为如何解决此类问题的一般介绍可能会很有趣（特别是如果您没有可用的软件包），所以我把它留在这里:)*

这更像是一个“自然语言”（即英语）问题，而不是 Python 问题。您能否更具体地说明您期望什么样的句子？它应该适用于所有可能的英语句子吗？我认为那将是非常困难的。

如果句子足够“简单”，那么假设第一个动词之前的所有内容都是主语就足够了。这适用于您的示例，但不适用于以下句子：

```
yesterday the princess looked from the palace, she was happy.
the princes who drank tea looked from the palace, she was happy. 
```

（注意后一句的主语是“喝茶的公主”，“喝茶的人”部分是“形容词”）。

另外，指定如果代词不指向主语（例如，指向宾语）会发生什么：

```
the princess looked at the prince, he was happy. 
```

为了在最一般的情况下解决您的问题，您应该找到（或制定）英语（或任何其他）语言的正式规范，它可以准确地告诉您句子的哪个部分是主语、动词、宾语等. 示例：许多简单的英语句子的形式（括号[]之间的部分是可选的，括号（）之间的部分是选择，即，（the|a）表示您应该选择'the'或'a'）：

```
sentence := subject verb [object] 
```

规范右侧的每个部分都需要更详细地指定，例如：

```
subject, object := (noun_part_of_sentence|noun_part_of_sentence_plural)
noun_part_of_sentence := article [adjectivelist] [noun_modifier] noun # I guess there is a formal name for this...
noun_part_of_sentence_plural := [adjectivelist] [noun_modifier] noun_plural # note: no article
adjectivelist:= adjective [adjectivelist] # i.e., one or more adjectives 
```

对于更复杂的句子，例如上面带有形容词短语的句子，上面的规范是不够的，应该是这样的：

```
noun_part_of_sentence := (the|a) [adjectivelist] [noun_modifier] [noun] [adjective_phrase]
adjective_phrase := relative_pronoun verb [object]
relative_pronoun := (who|which|that) 
```

请注意，上面的规范已经非常强大：（如果您能够正确识别每个单词的类型，例如动词、名词、冠词等）它可以成功检测到以下句子：

```
The princess drank the tea.
The beautiful princess drank the tea.
The beautiful princess drank delicious the tea.
A beautiful princess drank delicious the lemon tea.
The beautiful princess who saw the handsome prince drank the refreshing tea.
The beautiful princess who saw the handsome prince who made the tea drank the refreshing tea. 
```

但是，它（还）不允许像“公主看着宫殿”、“公主喝茶”（注意：不是“茶”）和无数其他句子。诀窍是将您的正式规范扩展到足以满足您期望的句子类型的水平。

成功解析句子后，您（因此）知道主语，任何代词，并且可以进行替换。但是请注意，英语并不是明确的，例如：

```
The princess looked at her mother, she was happy. 
```

她指的是公主还是她的母亲？

祝你好运！

PS 英语不是我的母语，所以我希望我对所有事情都使用了正确的术语！

# node.js - Display sql query result in ejs file using node express

> ID：15860696
> 
> 赞同：0
> 
> 时间：2013-04-07T09:06:10.797
> 
> 标签：node.js, express, ejs

newbie here, I want to display my sql query result into my ejs file but I don't know how to.

any help will be appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-27T14:36:04.457

要使用*ejs*，必须设置 Express 渲染引擎。

```
app.engine('html', require('ejs').renderFile); 
```

然后你可以将变量传递给模板一个 SQL 查询：

```
connection.query('SELECT 1', function (err, rows) {
  res.render('file.html', {
    'sql': rows
  });
}); 
```

在您的模板中，您可以使用如下代码：

```
<%= sql.property %> 
```

甚至在标签中使用脚本：

```
<% sql.forEach(function(field){ %>
  <%= field.property %>
<% }) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T14:15:25.253

使用 EJS 模板 url 并使用以下方式发送 sql 结果：

**。使成为（）**

# java - 来自用户的特定输入

> ID：15860700
> 
> 赞同：-1
> 
> 时间：2013-04-07T09:06:26.180
> 
> 标签：java, applet, textfield

我开始制作我自己的带有按钮、标签和文本字段的小程序，但我想当你在文本字段中输入某个内容时它会做一些事情。我试过`if(fieldTextField.equals(mystringhere)) {`了，但它不起作用。你能贴一个我想要的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:09:38.763

查看事件侦听器 ( [http://docs.oracle.com/javase/tutorial/uiswing/events/intro.html](http://docs.oracle.com/javase/tutorial/uiswing/events/intro.html) )。此外，您不应该将 TextField 本身与字符串进行比较，而是使用 getText() 方法将其与文本进行比较。

编辑：比上面的链接更好：http: [//docs.oracle.com/javase/tutorial/uiswing/components/textfield.html](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:22:29.757

您必须使用 KeyListener，这样您就可以在每次用户在您的字段中键入内容时收听键盘并检查您的文本：

```
KeyListener kl = new KeyAdapter(){
    public void keyTyped(KeyEvent evt)){
        if(yourTextField.getText().equals(yourString){
            //do something here
        }
    }
};
yourTextField.addKeyListener(kl); 
```

请注意，`yourTextField`必须是实例变量或局部**最终**变量才能在 KeyListener 方法中使用

# php - 如何将 ZF2 单元/应用程序模块测试合并到单个调用中？

> ID：15860702
> 
> 赞同：6
> 
> 时间：2013-04-07T09:06:37.587
> 
> 标签：php, unit-testing, phpunit, zend-framework2

我遵循在模块中存储测试的 ZF2 约定，当从每个模块中运行测试时，一切正常。我想做的是有一个根级别的 phpunit.xml，它调用各个模块测试并将它们合并以生成代码覆盖率数据和其他指标。

问题是每个单独的测试套件都是在模块化 phpunit.xml 文件中引导的。我知道做事的唯一方法是在每个 phpunit.xml 文件中配置引导程序，当从根目录运行测试时显然不会被拾取，因为单个 xml 文件被忽略。

所以我的问题是：有没有办法让根级 phpunit.xml 文件从模块中读取单个 phpunit.xml 和引导文件，如果你愿意的话，是一种 phpunit 配置继承？我可以在 Phing 或 CI 脚本中编写此程序，但我希望它在开发过程中快速而肮脏地完成，并且此解决方案仍然不会生成合并的代码报告。

基本上，我想要这样的东西，但不是运行测试，而是希望它运行每个模块中的单个 phpunit.xml 文件。这可能吗？

```
<?xml version="1.0" encoding="UTF-8"?>

<phpunit>
    <testsuites>
        <testsuite name="Site Tests">
            <directory>./module/Application/test/ApplicationTest</directory>
            <directory>./module/User/test/UserTest</directory>
        </testsuite>
    </testsuites>
</phpunit> 
```

**更新**

目的是让 PHPUnit 生成的代码指标提供项目概述，而不是特定于模块化的概述。我很欣赏答案中的脚本将在每个模块的基础上运行单元测试，但这不是我想要的。我知道就 PHPUnit 而言，这可能是一个限制。在接下来的几天里，我将对此进行研究并尝试找到一个解决方案，因为它似乎在许多处理自定义模块的项目中很有用。

**更新 2**

Robert Basic 提出了一个脚本，该脚本创建了一个包含模块报告的目录结构，它工作得很好，但如果让它在 PHPUnit 中运行并具有适当的指标报告，那就太好了。

[https://gist.github.com/robertbasic/5329789](https://gist.github.com/robertbasic/5329789)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:11:43.333

之前在 irc 上与不同的人讨论过这个问题，我很确定你不能，你需要编写一个脚本来遍历模块并逐个模块地运行它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T11:57:48.660

如果您使用的是 Linux，您可以创建一个简单的脚本。不完全是您想要的解决方案，但仍然可以提供帮助：

```
#!/bin/sh

modDir=$(pwd)
for i in *; do

    if [[ -d $i/test ]]; then
        cd $i/test
        phpunit
        cd $modDir
    fi
done 
```

您可以将其放入模块目录中的 runtests.sh 文件中。

只是一个想法 ：）

# c++ - 超过“元组”的 C++11 范围

> ID：15860710
> 
> 赞同：4
> 
> 时间：2013-04-07T09:07:28.523
> 
> 标签：c++, c++11

我正在尝试使用 C++11 功能实现哈希类。我没有重复使用 stl 的哈希，因为它是学校作业。我正在尝试这样做：

```
for(auto &h : {H1[hash_func(n1, val)], H2[hash_func(n2, val)]}) {
    for(auto &x : h) {
        if(x == val) {
            swap(x, h.back());
            h.pop_back();
        }
    }
} 
```

`H1`并且`H2`是 类型`vector<T>*`。当我尝试编译它时，我得到了一个我什至无法理解的令人讨厌的语法错误。如果我尝试`for(auto &h : {H1, H2})`使用`h[hash_func(n1, val)]`而不是`h`，它会起作用（尽管它显然是错误的）。我怎样才能解决这个问题？（或者至少以比两次编写相同内容更优雅的方式实现它）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T10:14:41.610

从您发布的错误消息来看，该错误与此段落完全无关，并且是由您尝试 swap 引起的。原因是您在初始化列表中的访问是*复制*向量，因此您最终会得到一个隐式绑定到引用的临时对象。因此，向量的成员也是如此。*`const`* `int``H1[…]`*`const``const`*

 *更糟糕的是：即使你修复了这个错误，你的代码也不会工作，因为你访问的是错误的类型。您的成员初始化如下：

```
H1 = new vector<T>[n]; 
```

`H1`是指向*单个*向量的指针。从那时起，您几乎肯定不希望在您的代码中使用索引访问它：

```
H1[hash_func(n1, val)] 
```

如果`hash_func`产生除`0`您的代码以外的任何内容访问无效内存。

为什么是`H1`和`H2`指针呢？*不要使用手动内存管理*。只需使用普通向量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:17:07.433

我已经设法通过转向指针来解决这个问题：

```
for(auto h : {&H1[hash_func(n1, val)], &H2[hash_func(n2, val)]}) {
    for(auto &x : *h) {
        if(x == val) {
            swap(x, h->back());
            h->pop_back();
            break;
        }
    }
} 
```*

# javascript - 打字稿数组与任何 []

> ID：15860715
> 
> 赞同：38
> 
> 时间：2013-04-07T09:08:06.390
> 
> 标签：javascript, typescript, types

`Array`在 TypeScript 中，和有什么区别`any[]`？Array 是否引用动态大小的数组（当然是在编译时）并`any[]`引用作为参数传递并由编译器推断类型的静态大小的数组？因为目前当我有以下功能时：

```
mergeArrays(arr1 : Array, arr2 : Array); 
```

当您使用静态数据调用此函数时，TypeScript 使用类型化数组 ( `type[]`)。

```
mergeArrays([true, false],  [1, 2]);
//          bool[]          number[] 
```

那么两者之间是否存在编译时差异？我什么时候使用`any[]`，什么时候使用`Array`？有时用`Array`..定义变量

```
var info:Array; 
```

..显示错误，如“无法将任何 [] [] 转换为数组”，设置如下：

```
info = [[], []]; 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2019-07-04T01:29:39.987

这个问题的先前答案已经过时了一段时间。

首先`Array`需要一个泛型参数：

```
var arr: Array<any>; 
```

这相当于：

```
var arr: any[]; 
```

**类型`Array<any>`和`any[]`是相同的，都指具有可变/动态大小的数组。**

**Typescript 3.0 引入了元组，它们类似于具有固定/静态大小的数组，但实际上并非如此。**

让我解释。

它们的语法如下所示：

```
var arr: [any];
var arr: [any, any];
var arr: [any, any, any];
var arr: [string, number, string?, MyType]; 
```

Typescript 将强制您分配该长度的数组，并使用具有匹配类型的值。
当您索引数组打字稿时，它将识别该索引处的变量类型。

有趣的是，打字稿不会阻止您修改元组的大小，无论是通过使用类似的函数`.push()`还是通过为`length`. 所以你必须确保你不会意外地这样做。

您还可以为任何额外的元素指定“rest”类型：

```
var arr: [any, any, ...any[]];
var arr: [string, number, string?, MyType, ...YourType[]]; 
```

在这种情况下，您可以将更多项目分配给元组，并且数组的大小可能会发生变化。

注意：您不能将普通数组分配给元组。

如果您只指定一个休息类型，那么您会得到一个常规的旧数组。
以下 2 个表达式是等价的：

```
var arr: [...any[]];
var arr: any[]; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-07T19:27:06.617

规范第 3.5.4 节指定了它们的关系：

> 形式的数组类型`ElementType[]`等效于具有索引签名的对象类型`[index: number]: ElementType`加上一组等效于全局接口类型的成员，`Array`其中所有出现的魔术`_element`类型都替换为`ElementType`。

无法分配`[[], []]`或`[]`分配`Array`是一个错误。

TypeScript 中没有“静态大小”数组的概念。他们都在谈论相同的底层 JavaScript 数组（动态调整大小）：

```
var x = [1, 2];
x.push(3);
x[13] = 5; 
```

# go - Specify local IP address in net.DialTCP

> ID：15860718
> 
> 赞同：5
> 
> 时间：2013-04-07T09:08:16.663
> 
> 标签：go

```
package main

import (
    "fmt"
    "net"
)

func main() {

    var localaddr net.TCPAddr
    var remoteaddr net.TCPAddr
    localaddr.IP = net.ParseIP("192.168.1.104")
    localaddr.Port = 6000
    remoteaddr.IP = net.ParseIP("192.168.1.104")
    remoteaddr.Port = 5000

    if localaddr.IP == nil || remoteaddr.IP == nil {
        fmt.Println("error")
    }

    if _, err := net.DialTCP("tcp", &localaddr, &remoteaddr); err != nil {
        fmt.Println(err)
    }

    fmt.Println("End")

} 
```

If the function specify local IP address, it always reports a run time error "dial tcp 192.168.1.104:5000: An invalid argument was supplied." I'm confused, should it always be a nil for local IP address ?

go version : 1.1 Beta OS: Win7 64bit

Tried in go 1.0.3, it seemed OK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T17:29:48.740

Go 的`net`包，像大多数这样的实现一样，识别连接到 localhost 的仅端口语法：

```
:5000 
```

相当于

```
<my-ip-address>:5000 
```

因此，您可以这样做：

```
net.Dial("tcp", ":5000") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-08T11:26:14.077

不，可以`laddr`在 DialTCP 中指定参数。问题是指定的端口（6000）超出了[默认的 Win7 动态端口范围](https://support.microsoft.com/en-nz/help/929851/the-default-dynamic-port-range-for-tcp-ip-has-changed-in-windows-vista)，不能用于传出连接。实际上，它适用于 Linux 和 Mac（如果您没有忘记将 IP 地址更改为您自己的系统之一）。

# c# - Choosing image from windows phone media library and set as page background

> ID：15860721
> 
> 赞同：2
> 
> 时间：2013-04-07T09:08:45.593
> 
> 标签：c#, image, windows-phone-8, uri, media-library

I am trying to retrieve an image from the phone library and set it as the page background using the following code

```
 private void selectImageFromMediaLib()
    {
         selectphoto = new PhotoChooserTask();
         selectphoto.Completed += new EventHandler<PhotoResult>(selectphoto_Completed);
     selectphoto.Show();
    }

    private void selectphoto_Completed(object sender, PhotoResult e)
    {
        if (e.TaskResult == TaskResult.OK)
        {
            backgroundUri = new Uri(e.OriginalFileName, UriKind.Absolute);
            var bitmap = new BitmapImage(backgroundUri);
            ImageBrush imageBrush = new ImageBrush();
            imageBrush.ImageSource = bitmap;
            this.LayoutRoot.Background = imageBrush;     
     }
    } 
```

However, the page background turns black so the photo was not retrieved/created correctly. What is the correct path for the URI to the device library? Isn't using `UriKind.Absolute` enough?

![enter image description here](https://i.stack.imgur.com/nN52b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:02:02.123

您不能使用[PhotoResult.OriginalFileName](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.tasks.photoresult.originalfilename%28v=vs.105%29.aspx)属性来读取文件，而是使用 [PhotoResult.ChosenPhoto](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.tasks.photoresult.chosenphoto%28v=vs.105%29.aspx)流并将其分配给`bitmap.ImageSource`代码中的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-24T07:05:01.650

尝试这个。这个对我有用

```
PhotoChooserTask selectphoto;
private void selectImageFromMediaLib()
{
   selectphoto = new PhotoChooserTask();
   selectphoto.Completed += new EventHandler<PhotoResult>(selectphoto_Completed);
   selectphoto.Show();
}

private void selectphoto_Completed(object sender, PhotoResult e)
{
   if (e.TaskResult == TaskResult.OK)
   {
       var imageBytes = new byte[e.ChosenPhoto.Length];
       e.ChosenPhoto.Read(imageBytes, 0, imageBytes.Length);
       BitmapImage bitmapImage = new BitmapImage();
       MemoryStream ms = new MemoryStream(imageBytes);
       bitmapImage.SetSource(ms);
       ImageBrush imageBrush = new ImageBrush();
       imageBrush.ImageSource = bitmapImage;
       this.LayoutRoot.Background = imageBrush;
    }
} 
```

# php - 使用重力形式“gform_after_submission”过滤钩

> ID：15860722
> 
> 赞同：1
> 
> 时间：2013-04-07T09:08:50.137
> 
> 标签：php, wordpress

`gform_after_submission`在挂钩创建条目后，我想更新帖子并使用序列号编辑现有字段的值。

要求是更新同一帖子中的单个字段值，然后更新帖子。我发现[这个文档](http://www.gravityhelp.com/documentation/page/Gform_after_submission)但没有那么有用。

并尝试了以下方法，但它正在更新所有字段：

```
add_filter( "gform_save_field_value", "set_field_value", 10, 4 ); 

function set_field_value( $value, $lead, $field, $form ){ 
    if( $form['id'] != 1 || $field['id'] != 19 ) 
        return; 

    $value = "xxx"; 
    return $value; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T22:08:49.840

我认为你的逻辑有点偏离我会检查它是否是正确的字段而不是如果它不是并且做这样的事情：

```
 add_filter( "gform_save_field_value", "nifty_set_field_value", 10, 4 ); 

    function nifty_set_field_value( $value, $lead, $field, $form ){ 
    //make sure we are on form 1 AND field 19
    if( $form['id'] == 1 &&  $field['id'] == 19 ){
        //set value
        $value = "xxx";
        //return
        return $value; 
    } 
   //not our field, that's okay just return the normal value
   else {return $value;  } 
```

您可能可以在没有 and 的情况下执行此操作，`else`并且只需返回一次值，但如果我没记错（并且文档显示）两者都是需要的。

或者你可以用你当前的代码来做：

```
 add_filter( "gform_save_field_value", "nifty_set_field_value", 10, 4 ); 

function nifty_set_field_value( $value, $lead, $field, $form ){ 
    if( $form['id'] != 1 || $field['id'] != 19 ) {
        return $value; 
}
$value = "xxx"; 
return $value; 
```

}

只需确保您返回值而不仅仅是返回函数

这是指向[正确文档页面](http://www.gravityhelp.com/documentation/page/Gform_save_field_value)的链接此外，Gravity Forms为已购买该产品的用户提供了自己的[支持表单。](http://www.gravityhelp.com/forums/)最后，看看他们的[示例馅饼](http://pastie.org/1469933)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:13:14.263

我使用以下代码解决了这个问题：

```
add_filter("gform_get_input_value", "update_field", 10, 4);

    function update_field($value, $lead, $field, $input_id){
        if($lead["form_id"] == 1 && $field["id"] == 19)
            return 'xxx';
        else
            return $value;
    }

    add_filter("gform_save_field_value", "save_field_value", 10, 4);

    function save_field_value($value, $lead, $field, $form){
        if($lead["form_id"] == 1 && $field["id"] == 19)
            return 'xxx';
        else
            return $value;
    } 
```

# node.js - 我应该在节点 js 标准输入或标准输出中使用什么

> ID：15860726
> 
> 赞同：0
> 
> 时间：2013-04-07T09:09:23.973
> 
> 标签：node.js

我正在编写此代码以获取用户的输入：

```
label Name:
input(in);

label LastName:
input(in);

process.stdin.resume();
process.stdin.setEncoding('utf8');

process.stdin.on('data', function(chunk){
process.stdout.write('data: ' +chunk);
});

process.stdin.on('end', function(){
process.stdout.write('end');
}); 
```

我不断收到此错误“语法错误：意外的令牌）”。我不明白为什么。你能帮助我吗？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:51:21.863

我不确定您收到的语法错误，但对于来自命令行的用户输入，nodejitsu的[提示模块非常棒。](https://github.com/flatiron/prompt)

```
var prompt = require('prompt');

//
// Start the prompt
//
prompt.start();

//
// Get two properties from the user: username and email
//
prompt.get(['firstname', 'lastname'], function (err, result) {
  //
  // Log the results.
  //
  console.log('Command-line input received:');
  console.log('  firstname: ' + result.firstname);
  console.log('  lastname: ' + result.lastname);
}); 
```

提示 github 页面有许多涉及验证等更复杂情况的示例。

# ruby-on-rails - 自定义 Devise 的 authenticate 和 current_user 方法以使用软删除/充当偏执狂

> ID：15860727
> 
> 赞同：2
> 
> 时间：2013-04-07T09:09:29.420
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2, warden

我正在使用设计作为 rails 3.2 应用程序的身份验证。我的用户模型称为用户，我一直在尝试实现软删除。我正在尝试通过使用acts_as_paranoid 来做到这一点，它会自动为您完成工作。事情按预期工作（其他人无法再看到“已删除”用户），除了我希望停用的用户仍然能够登录并看到“停用”屏幕，并让他们有机会重新激活他们的帐户。

问题是 Devise（Warden？）不再能够找到已删除的用户。如果您使用范围“with_deleted”，Acts_as_paranoid 允许您访问软删除记录。因此，我可以通过以下方式获得其中的一部分：

```
def self.find_first_by_auth_conditions(warden_conditions)
  conditions = warden_conditions.dup
  where(conditions).with_deleted.first
end 
```

我把它放到我的用户模型中，所以现在当我输入登录信息时，我会得到我已经成功登录的闪存消息，它会触摸用户模型中的“updated_at”列并增加sign_in_count 等。但是，从经过身份验证的方法返回 false 并且 current_user 辅助方法返回 nil 的意义上，它并没有真正进行身份验证。那么让这些工作的最佳策略是什么？我可以以某种方式覆盖 current_user 方法，以便它使用 with_deleted 范围查询 User 模型吗？我是否必须对warden 做一些事情，例如像使用 find_first_by_auth_conditions 方法那样添加条件？我无法弄清楚如何做到这一点。任何帮助表示赞赏！

另外，在我让它工作之后，我想自动将所有软删除的用户发送到一个“停用”页面，他们唯一的选择是永久删除或重新激活。有没有办法通过“authenticated :user do {} end”路由来做到这一点，还是我必须在 application_controller 中放置一个 before_filter 并在每个请求时检查用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:39:02.827

我可以回答你的最后一个问题，关于路由到“停用页面”。您可以使用 lambda 来隔离不同类型的用户，如下所示：

```
authenticated :user, lambda {|u| u.deactivated? } do
  root :to => 'application#deactivated'
end
authenticated :user, lambda {|u| u.active? } do
  root :to => 'application#active'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:36:34.957

感谢 Devise 组的提示，事实证明我需要覆盖 serialize_from_session 方法，该方法位于可验证模块内，如下所示：

```
def serialize_from_session(key, salt)
  record = to_adapter.get(key)
  record if record && record.authenticatable_salt == salt
end 
```

我一直在尝试使用初始化程序覆盖模块但没有成功（我试图覆盖现有策略，并尝试为warden编写一个新策略）；但我不断收到奇怪的名称错误。我还没有弄清楚。但是，根据提示，我继续并覆盖了我的用户模型中的方法。由于我没有预见到使用其他资源，所以我不介意像这样编辑它。代码只是：

```
def self.serialize_from_session(key, salt)
  record = with_deleted.find(key).first
  record if record && record.authenticatable_salt == salt
end 
```

这完全跳过了 to_adapter.get 方法（对于任何感兴趣的人，它在 orm_adapter 中，而不是设计；这花了我一段时间才找到，因为我认为我需要覆盖它）。这可能不是最干净的方法，但对我来说效果很好。即使我确实有不同的资源，这也应该只覆盖用户资源，所以我认为否则一切都会正常工作。

如果出现问题，我会在此处添加。如果没有，希望这能以某种方式帮助某人。当然，我花了足够长的时间才能深入了解！

# actionscript-3 - 我可以在 AS3 中从一个对象创建 EventListener 并将其从另一个对象中删除吗？

> ID：15860731
> 
> 赞同：2
> 
> 时间：2013-04-07T09:09:41.123
> 
> 标签：actionscript-3, event-listener

我花了很多时间试图解决这个问题。所以，基本上我有一个类 (addadd)，其中包含可以创建 eventListener 和删除 eventListener 的函数。我还有另外两个对象（Symbol1、Symbol2）告诉函数要做什么——创建或删除。

* * *

```
 package {

import flash.display.*;
import flash.events.Event;
import fl.motion.MotionEvent;
import flash.events.MouseEvent;

public class addadd
{

    var stanishev:stanishev_line = new stanishev_line;

    public function addadd()
    {
        // constructor code
    }

    public function stanishevF(par1)
    {
        if (par1 == "create")
        {
        Main.display.addChild(stanishev);
        stanishev.name = "stanishev_child";
        stanishev.x = -200;
        stanishev.y = 500;
        stanishev.gotoAndPlay("start");
        stanishev.addEventListener(Event.ENTER_FRAME, frameDOstanishev);
        }
        else 
        {
            trace ("asasasas");
        stanishev.removeEventListener(Event.ENTER_FRAME, frameDOstanishev);
        }
    }

    public function frameDOstanishev(e:Event)
    {
        trace (stanishev.currentFrame);
    }
} }    

package {

import flash.display.SimpleButton;
import flash.events.MouseEvent;

public class Symbol1 extends SimpleButton
{

    var call_creator:addadd = new addadd;

    public function Symbol1()
    {
        // constructor code
        addEventListener(MouseEvent.MOUSE_OVER, eventResponse);
        addEventListener(MouseEvent.MOUSE_DOWN, eventResponse2);

    }

    function eventResponse(e:MouseEvent)
    {
        call_creator.stanishevF("create");
    }

    function eventResponse2(e:MouseEvent)
    {
        call_creator.stanishevF("destroy");
    }
} }    

package {

import flash.display.SimpleButton;
import flash.events.MouseEvent;

public class Symbol2 extends SimpleButton
{
    var call_creator:addadd = new addadd;

    public function Symbol2()
    {
        // constructor code
        addEventListener(MouseEvent.MOUSE_DOWN, eventResponse2);
    }

    function eventResponse2(e:MouseEvent)
    {
        call_creator.stanishevF("destroy");
    }
} } 
```

所以我可以让 addadd 类从 Symbol1 创建和删除这个 eventListener 但我不能让 addadd 类创建这个 eventListener 从 Symbol1 发送“create”参数并通过发送“destroy”参数从 Symbol2 中删除它！！！

如何从不同的对象创建和删除相同的 eventListener？我发现这种方法可以创建和杀死听众以便更有条理，但我不确定这是否是正确的方法。*当我在主时间轴的帧之间移动时，我遇到了听众问题（错误：1009），所以我想在跳转到另一个帧之前将它们全部杀死。*

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:08:55.920

你可以`public function`说，`removeListeners()`在`addListeners()`那个类中并从其他类中调用这些函数，就像这样，

```
 class A ()
 {

      //constructor code

      public function removeListeners():void
      {

            //remove listeners here
      }
  } 
```

然后从您创建此“A”类实例`removeListeners()` `public function`的类（例如）中调用它。`Main.as`

# php - 在 PHP 中将类似 JSON/CSS 的格式化字符串转换为 XML

> ID：15860732
> 
> 赞同：0
> 
> 时间：2013-04-07T09:09:55.167
> 
> 标签：php, xml, string

是否可以在 PHP 中将格式化字符串转换为 xml 格式或数组？我有这样的字符串格式：

```
$prop = "
    large {
       width: 10px;
       height: 10px;
    }
    small {
       width: 5px;
       height: 5px;
    }
"; 
```

我希望将此字符串转换为 xml 格式或数组，例如：

```
<large>
    <width>10px</width>
    <height>10px</height>
</large>
<small>
    <width>5px</width>
    <height>5px</height>
</small>

$array = array(
    "large" => array(
        "width" => "10px",
        "height" => "10px"
    ),
    "small" => array(
        "width" => "5px",
        "height" => "5px"
    )
); 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T12:09:36.200

因为您的输入数据格式很好，您可以创建一个非常简单的递归后代解析器 - 甚至不涉及那么多递归。或者只是一个简单的堆栈：

```
$props = array_filter(array_map('trim', explode("\n", $prop)));
$stack = [$node = $xml = new SimpleXMLElement('<root/>')];

foreach ($props as $str)
{
    if ($str === '}') {
        array_pop($stack);
        $node = end($stack);
        continue;
    }

    if (preg_match('~^(\w+) {$~', $str, $matches)) {
        $node = $stack[] = $node->addChild($matches[1]);
        continue;
    }

    if (preg_match('~^(\w+):\s*(.*)$~', $str, $matches)) {
        $node->addChild($matches[1], htmlspecialchars($matches[2]));
        continue;
    }

    throw new UnexpectedValueException(sprintf('Unable to parse: "%s"', $str));
}

$xml->asXML('php://output'); 
```

您的第二个示例（以前缺少）的输出是（美化的）：

```
<?xml version="1.0"?>
<root>
  <button>
    <large>
      <bond>
        <width>10px;</width>
        <height>10px;</height>
      </bond>
      <style>
        <background>
          <color>#ffffff;</color>
          <image>url(www.px.com/aui.png) -10px;</image>
          <another>
            <width>100px;</width>
            <height>100px;</height>
          </another>
        </background>
      </style>
    </large>
    <small>
      <bond>
        <width>10px;</width>
        <height>10px;</height>
      </bond>
      <style>
        <color>#fff;</color>
        <border>1px solid #000;</border>
      </style>
    </small>
  </button>
</root> 
```

我建议您在这里使用 XML，因为它可以比不能有重复键的数组更好地表示结构。

也可以使用递归函数调用而不是堆栈。但这需要将输入流包装在不倒带迭代器中以不中断（或使用`array_shift`但我不太喜欢）：

```
$parse = function($p, SimpleXMLElement $t) use (&$parse) {
    foreach($p as $s) {
        if ($s === '}') {
            break;
        }

        if (preg_match('~^([^ ]+) {$~', $s, $m)) {
            $p->next();
            $parse($p, $t->addChild($m[1]));
            continue;
        }

        if (preg_match('~^([^:]+):\s*(.*)$~', $s, $m)) {
            $n = $t->addChild($m[1], htmlspecialchars($m[2]));
            continue;
        }
    }
};

$props = array_filter(array_map('trim', explode("\n", $prop)));
$xml = new SimpleXMLElement('<root/>');
$parse(new NoRewindIterator(new ArrayIterator($props)), $xml);

$xml->asXML('php://output'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:02:46.197

有效的解决方案:-)

```
$prop = "
    large {
       width: 10px;
       height: 10px;
       color: red;
    }
    small {
       width: 5px;
       height: 5px;
    }
    medium {
       width: 5px;
       height: 5px;
    }
";

//remove carriage return
 $prop = str_replace(array('.', ' ', "\n", "\t", "\r"), '', $prop);

 //get into main names and values
 preg_match_all('/([^\{]+)\{([^\}]+)\}/i',$prop,$matches);

 $arr_names = $matches[1];
 $arr_values = $matches[2];

 $arr_result = array();
 foreach($arr_names as $i=>$name){
     $value = $arr_values[$i];

     //get into main sub names and values
     preg_match_all('/([^\:]+)\:([^\;]+)\;/i',$value,$m);
     $arr_n = $m[1];
     $arr_v = $m[2];

     $arr = array();
     foreach($arr_n as $j=>$n){
        $v = $arr_v[$j];   
        $arr[$n] = $v;
     }

     $arr_result[$name] = $arr;
 }

 print_r($arr_result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T09:33:17.077

这应该工作

```
$elements = explode('}', trim($prop));
for($i = 0 ; $i < sizeof($elements); $i++) {
    list($name, $styles) = explode('{', $elements[$i]);
    $name = trim($name);
    if(empty($name)) {
        continue;
    }
    $rules = explode(';', $styles);
    for($j=0; $j < sizeof($rules); $j++) {
        list($ruleName, $ruleVal) = explode(':', $rules[$j]);
        $ruleName = trim($ruleName);
        if(empty($ruleName)) {
            continue;
        }
        $result[$name][$ruleName] = trim($ruleVal);
    }
}   
echo '<pre>';
var_dump($result);
echo '</pre>'; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-07T12:54:10.873

**我的解决方案：**

我尝试使用`preg_replace()`并`eval()`使用多维格式。也许你可以改进我的`preg_replace`模式。

```
$string = "
    button {
        large {
            bond {
                width: 10px;
                height: 10px;
            }
            style {
                background {
                    color: #ffffff;
                    image: url(www.px.com/aui.png) -10px;
                    another {
                        width: 100px;
                        height: 100px;
                    }
                }
            }
        }
        small {
            bond {
                width: 10px;
                height: 10px;
            }
            style {
                color: #fff;
                border: 1px solid #000;
            }
        }
    }
";

$string = preg_replace("/(\s+\:)/", ':', $string);
$string = preg_replace("/(\:\s+)/", ':', $string);
$string = preg_replace("/(\s+\{)/", '{', $string);

$string = preg_replace("/([\w\d_]+)\:(.*?)\;/", '"$1" => "$2",', $string);
$string = preg_replace("/([\w\d_]+)\{/", '"$1" => array (', $string);
$string = preg_replace("/\}/", ')', $string);

$string = preg_replace("/\"\,(\s+)\)/", '"$1)', $string);
$string = preg_replace("/\)(\s+)\"/", '),$1"', $string);

$arr = eval('return array('.$string.');');
print_r($arr); 
```

谢谢。

# artificial-intelligence - 我应该为这个神经网络使用哪个激活函数？

> ID：15860739
> 
> 赞同：2
> 
> 时间：2013-04-07T09:10:22.263
> 
> 标签：artificial-intelligence, neural-network, backpropagation

我们正在为 Checkers 游戏开发神经网络。在我们的训练数据中，

0代表空白格，1代表白棋，-1代表白王，2代表黑棋，-2代表黑王

因此，我们需要一个范围为 [-2, 2] 的激活函数。我们应该使用哪个激活函数？请就此提出您的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T22:46:09.197

我看不出你不能使用 sigmoid 函数的原因 sigmoid 函数
![Sigmoid 函数](https://i.stack.imgur.com/pmm8A.png)
的范围是 [0, 1]
要修改 sigmoid 函数以满足您的需要，可以将它乘以 4，将函数乘以一个常数会影响它的幅度（ Range = [0, 4] ），
而不是减去 2，通过减法/加法，您可以在 Y 轴上移动函数（ Range = [-2, 2] ）
所以函数看起来像这样： S(t) = 4* ( 1 / (1 + e ^ (-t)) ) - 2

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T20:45:09.890

您的状态编码不是最佳的。通常，神经网络在类别[的 1-of-c 编码中效果更好。](http://www.faqs.org/faqs/ai-faq/neural-nets/part2/section-7.html)然后，很容易使用 sigmoid 单元。只需取 5 个输出的 argmax 即可确定状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T03:12:16.683

是的！sigmoid 函数运行良好，因为它完全符合您指定的范围。我还将它用于我正在开发的模式识别问题。线性往往效果很好。

# http - HTTP post 请求中的 Content-Type 是强制性的吗？

> ID：15860742
> 
> 赞同：27
> 
> 时间：2013-04-07T09:10:41.327
> 
> 标签：http, post

是领域：

> 内容类型

当我执行 HTTP 请求时强制执行？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-07T09:17:24.410

不，这不是强制性的。根据[HTTP 1.1 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec7.html#sec7.2.1)：

> 任何包含实体主体的 HTTP/1.1 消息都应该包含定义该主体的媒体类型的 Content-Type 头字段。当且仅当媒体类型不是由 Content-Type 字段给出时，接收者可以尝试通过检查其内容和/或用于识别资源的 URI 的名称扩展来猜测媒体类型。如果媒体类型仍然未知，接收者应该将其视为类型“application/octet-stream”。

也就是说，如果您省略 Content-Type 标头，服务器显然很难准确解释您发送的数据，因此不建议这样做。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-07T09:16:16.170

来自[RFC2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec7.html)

> 任何包含实体主体的 HTTP/1.1 消息都应该包含定义该主体的媒体类型的 Content-Type 头字段。当且仅当媒体类型不是由 Content-Type 字段给出时，接收者可以尝试通过检查其内容和/或用于识别资源的 URI 的名称扩展来猜测媒体类型。如果媒体类型仍然未知，接收者应该将其视为类型“application/octet-stream”。

所以建议这样做，不是强制性的。但是如果没有给出，接收者可能会猜测内容类型。

# perl - Perl Text::CSV::Slurp 处理固定宽度输入

> ID：15860746
> 
> 赞同：1
> 
> 时间：2013-04-07T09:10:59.303
> 
> 标签：perl, text

我想将一些文本解析成一个表格，如下所示：

```
Protocol  Address          Age (min)  Hardware Addr   Type   Interface
Internet  10.35.195.1             -   0024.978a.d2d0  ARPA   FastEthernet0/0
Internet  10.35.195.2            73   0002.16a3.9e40  ARPA   FastEthernet0/0
Internet  10.35.195.12          130   0007.0e5b.861a  ARPA   FastEthernet0/0
Internet  10.35.195.14            1   000b.cdc9.7d11  ARPA   FastEthernet0/0
Internet  10.35.195.15            3   0021.5a7b.f2af  ARPA   FastEthernet0/0
Internet  10.35.195.16            0   000c.2909.2298  ARPA   FastEthernet0/0
Internet  10.35.195.17          112   0001.e6a2.5a90  ARPA   FastEthernet0/0
Internet  10.35.195.24          168   0050.564b.ebd4  ARPA   FastEthernet0/0 
```

有固定宽度的文本输入。一些参数，例如“Hardware Addr”，里面有空格。起初，我使用 Text::CSV::Slurp，很难定义分隔符。所以我放弃了。

就想知道，有没有一些perl模块或者嵌入的perl命令（unpack, substr）可以顺利高效的处理这个输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T09:27:15.623

我会使用[Parse::FixedLength](http://search.cpan.org/~dougw/Parse-FixedLength-5.39/FixedLength.pm)模块，它可以正确处理这类问题。这是一个例子：

```
use strict;
use warnings;
use Parse::FixedLength;

#define your format in the constructor
my $pfl = Parse::FixedLength->new([qw(Protocol:10 Addr:34)], {trim=>1});

open my $file, '<', 'file_to_be_readed.txt' or die $!;
<$file> #if your file has a header, forget it

while( my $line = <$file> ) {
   my $data = $pfl->parse($line);
   my $protocol = $data->{Protocol};
   my $addr = $data->{Addr};
   #...
}

close $file; 
```

# platform - 无法启用 Hyper-V 平台

> ID：15860752
> 
> 赞同：2
> 
> 时间：2013-04-07T09:11:25.860
> 
> 标签：platform, hyper-v

我正在尝试在运行 Windows 8 Enterprise Ed 64 位的本地计算机中启用 Hyper-V。我检查了，我的硬件与 SLAT 兼容，BIOS 中的选项已打开。我做了几次冷启动，但 Hyper-V 平台选项仍然灰显。我希望有人可以帮助我，因为似乎解决这个问题的所有博客/论坛都没有为我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T17:08:17.710

如果您将鼠标悬停在可选功能列表中的 Hyper-V 项目上，它会告诉您为什么它被禁用。

否则，您可以运行 MSINFO32.EXE，系统摘要面板将列出 Hyper-V 所需的功能以及您的系统上是否检测到这些功能。

另外，您说您已经冷启动了几次系统。这听起来可能很愚蠢，但请关闭系统并拔下电源几分钟以确保它实际上已关闭，然后再插入并再次打开。我从来没有见过我必须这样做的系统，但我知道其他人有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T05:22:40.213

打开数据执行保护？控制面板-系统-系统属性-数据执行保护

# jquery - jQuery v1.9.1 的 .attr() 复选框问题

> ID：15860756
> 
> 赞同：2
> 
> 时间：2013-04-07T09:11:54.670
> 
> 标签：jquery, version

**HTML：**

```
<input type="checkbox" />
<span id="test">Click here</span> 
```

**JS：**

```
$("#test").click(function () {
    if ($(":checkbox").attr("checked") == undefined) {
        $(":checkbox").attr("checked", "checked")
    } else {
        $(":checkbox").removeAttr("checked")
    }
}); 
```

小提琴：[链接 - v1.8.3](http://jsfiddle.net/pYQJt/1/)

这工作得很好，但是，如果我将 jquery 版本更改为 1.9.1，复选框将不再被选中。问题是什么？

小提琴：[链接 - v.1.9.1](http://jsfiddle.net/pYQJt/2/)

虽然`inspect element`显示复选框正在切换属性，但如果我`$(":checkbox").is(":checked")`在控制台中执行操作，我会得到`false`输出

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T09:15:05.233

`checked`是一个属性，你应该使用`prop`方法，当一个布尔属性像`disabled`or`checked`被设置为一个元素时，该值被映射到元素的相关 DOM 属性（*浏览器这样做*）`attr`并且`removeAttr`方法不会改变元素的属性，从 jQuery 1.6 开始，用于修改属性，`prop`应该使用 method 而不是`attr`.

```
$("#test").click(function () {
    $('input[type=checkbox]').prop('checked', function(i, state){
        return !state;
    });
}); 
```

[http://jsfiddle.net/3rQvj/](http://jsfiddle.net/3rQvj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T06:20:55.490

我也遇到了同样的问题，你应该参考下面的链接以获得正确的想法 [http://jquery.com/upgrade-guide/1.9/#attr-versus-prop-](http://jquery.com/upgrade-guide/1.9/#attr-versus-prop-) 希望它能解决你的问题:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T09:19:24.550

为什么不直接使用标签？这样它就可以在没有 javascript 的情况下工作。

```
<input type="checkbox" id="test" /><label for="test">Click me</label> 
```

# c++ - C++ Boost Interval 和 cos

> ID：15860761
> 
> 赞同：4
> 
> 时间：2013-04-07T09:12:34.203
> 
> 标签：c++, boost, boost-interval

我在使用 Boost 的 Interval 库时遇到问题

```
#include <boost/numeric/interval.hpp>

void test()
{
    typedef boost::numeric::interval<double> Interval;

    Interval i1(1.0, 2.0);

    auto i2 = cos(i1);
} 
```

我收到以下编译错误：

```
transc.hpp(73): error C2039: 'cos_down' : is not a member of 'boost::numeric::interval_lib::rounded_math<double>'
transc.hpp(73): error C2039: 'cos_up' : is not a member of 'boost::numeric::interval_lib::rounded_math<double>'
transc.hpp(75): error C2039: 'cos_up' : is not a member of 'boost::numeric::interval_lib::rounded_math<double>' 
```

我尝试了几种组合，`interval_lib::policies`但无法编译示例。我不追求非常高的精度。我想要的基本上是添加两个间隔相当于添加两个`double`s。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T10:59:31.257

间隔类需要舍入和检查策略。将您的区间类型定义更改为以下内容，它应该可以编译。您需要通读文档以准确了解您需要哪些策略。

```
typedef interval<double, policies<save_state<rounded_transc_std<double> >,
                    checking_base<double> > > Interval; 
```

# refactoring - 将语句切换到while循环或while循环到case块？

> ID：15860766
> 
> 赞同：2
> 
> 时间：2013-04-07T09:13:04.797
> 
> 标签：refactoring, while-loop, switch-statement, code-readability

我正在重构我编写的一些代码，我必须决定是要将 switch 语句放入 while 循环还是将 while 循环重复到每个 case 块中。这两种不同的方式类似于以下伪代码：

选项1）

```
while (cnt > 0) {
    switch (value) {
    case A:
        doSomething();
        break;
    case B:
        doSomethingElse();
        break;
    ...
    default:
        default();
        break;
    }
    cnt--;
} 
```

选项 2)

```
switch (value) {
case A:
     while( cnt > 0){
        doSomething();
        cnt--;
      }
case B:
     while( cnt > 0){
        doSomethingElse();
        cnt--;
      }
...
default: 
     while( cnt > 0){
        default();
        cnt--;
      }
} 
```

我认为第一个选项更好地遵循 DRY 原则，因为我不会每次都重复 while 和 cnt--。虽然我更喜欢第二种选择，因为一旦它在 switch 语句中选择了一个 case，它就会开始在 while 中循环，并且不再需要评估 switch 条件。

那么，您会选择这两种解决方案中的哪一种，为什么？

注意：我们可以假设 switch 条件（即下面代码中的变量“值”）在整个 while 循环中不会改变，换句话说：操作 doSomething()、doSomethingElse() 等不会影响开关语句。

NB2：在我正在处理的实际代码中，while 循环可能非常庞大。“Cnt”，对于某些测试用例，可以是 10^9 的数量级

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T09:45:02.690

在大多数情况下，[Loop-switch 序列](http://en.wikipedia.org/wiki/Loop-switch_sequence)是一种反模式，为了清楚起见，您应该避免使用，并且因为您提到的内容`cnt`也可能会变得非常大，以提高性能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T20:50:03.087

如果`cnt`仅用于控制`doSomething()`调用次数等，则应考虑将其传递给方法并在方法内部循环。通常我会说不要担心性能，但如果你实际上是在谈论 10^9 次迭代，你应该避免重复切换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T09:16:35.643

选项 2 更直接，因为您将重点放在`switch`- 语句上，并且必须在每次迭代中完成 a`case`可能会消耗更多时间。

# php - base64_encode 转换成 php 字符串？数组中的图像需要动态显示

> ID：15860770
> 
> 赞同：-2
> 
> 时间：2013-04-07T09:13:17.283
> 
> 标签：php, base64, blob

图像与搜索结果一起放在 $_SESSION 中，然后在进行搜索查询时转到另一个页面。这里我希望图像与搜索的标题、链接和描述相呼应。

```
 if(isset($_SESSION['error'])){          
            echo $_SESSION['error'];

        } else      

        { 

            echo ($_SESSION['count']);
              foreach($_SESSION['search_output'] as $value){
                $value['id'];  
                $value['links'];
                $value['title'];
                $value['page_body'];
                $value['thumbs'];

                $id = $value['id'];
                $title = $value['title'];
                $link = $value['links'];
                $body = $value['page_body'];
                $thumbs = $value['thumbs'];

                echo '<img src="data:image/jpeg;base64,' . base64_encode( $thumbs ) . '" />';

                $search_output .= " <a href='".$link."'>".$title."</a> - $body<br>";}
} 
```

正如您在倒数第二行中看到的那样，图像很好，但它们彼此相邻。但是我希望图像一张一张地显示在搜索结果旁边。如果我将整个字符串放在 $search_output 中，例如：

```
$search_output .= "<img src=\"data:image/jpeg;base64,\' . base64_encode( $thumbs ) . \'\" /><a href='".$link."'>".$title."</a> - $body<br>";} 
```

它不起作用..我怎样才能使图像显示在搜索结果旁边*（让这个搜索引擎让我发疯！）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:31:03.053

根据评论：

```
$search_output .= '<img src="data:image/jpeg;base64,'. base64_encode( $thumbs ) .'" /><a href="'.$link.'">'.$title.'</a> - '.$body.'<br>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:32:24.660

我猜你正在尝试这样做：

```
$search_output .= "<img src=\"data:image/jpeg;base64," . base64_encode( $thumbs ) . "\" /><a href='".$link."'>".$title."</a> - $body<br>";} 
```

# mongodb - Yii RBAC 让用户自己更新个人资料

> ID：15860773
> 
> 赞同：1
> 
> 时间：2013-04-07T09:13:21.133
> 
> 标签：mongodb, yii, authorization, yii-extensions, rbac

我正在尝试使用[mongodbauthmanager](http://www.yiiframework.com/extension/mongodbauthmanager)来做到这一点。我在`Usage`部分中一步一步地进行操作，但最后我收到了**PHP 警告：非法偏移类型**。在克隆到 SO 之前，我已经在[Yii Extension](http://www.yiiframework.com/extension/mongodbauthmanager/#c12707)上发布了这个问题：

请告诉我有什么问题吗？

**1// 配置**

```
 'authManager'=>array(
    'class'         =>'CMongoDbAuthManager',
    'showErrors'    => true,
  ), 
```

**2// 在数据库中创建身份验证项**

```
$auth = new CMongoDbAuthManager();

$bizRule = 'return Yii::app()->user->id==$params["User"]->_id;';
$auth->createTask('updateSelf', 'update own information', $bizRule);
//I had tried with $auth->createOperation() but they has the same error
$role = $auth->createRole('user');
$role->addChild('updateSelf');

$auth->save(); 
```

这里是 db [结果在 db http://i.minus.com/iIpXoBlDxaEfo.png](http://i.minus.com/iIpXoBlDxaEfo.png)

**3// 检查控制器中的访问权限** -*更新代码和错误*

```
public function actionUpdate($id)
    {
        $model=$this->loadModel($id);
        $params = array('User'=>$model);
        if (!Yii::app()->user->checkAccess('updateSelf', Yii::app()->user->id,$params) )
        {
            throw new CHttpException(403, 'You are not authorized to perform this action');
        }
//another statement ...
} 
```

**4// 得到错误：**

**致命错误**：无法将 MongoId 类型的对象用作 F:\Data\03 中的数组。Lab\www\yii\framework\web\auth\CAuthManager.php(150) :第 1 行**的 eval()**代码

# 已解决的问题

基于 的答案`@Willem Renzema`，我解决了我的问题。现在，我在这里更新并希望它对遇到此错误的人有用。

**0// 首先，使用 defaultRoles 配置 authManager**

```
 'authManager'=>array(
        'class'=>'CMongoDbAuthManager',
        'showErrors' => true,
        'defaultRoles'=> array('user'),//important, this line help we don't need assign role for every user manually
    ), 
```

**1// 修复 UserIdentity 类中的保存 id**

```
class UserIdentity extends CUserIdentity
{
    private $_id;
    //...
    public function authenticate()
    {
         //...
         $this->_id = (string)$user->_id;//force $this save _id by string, not MongoId object
         //...
    }
    //...
} 
```

**2// 修复授权项目中的** $bizrule（$bizrule 将在`eval()`in 中运行`checkAccess`）

```
//use _id as string, not MongoId object
$bizRule = 'return Yii::app()->user->id==(string)$params["User"]->_id;'; 
```

**3//和用户检查访问权限**

```
public function actionUpdate($id){
        /**
         * @var User $model
         */
        $model=$this->loadModel($id);
        $params = array('User'=>$model);
        if (!Yii::app()->user->checkAccess('updateSelf', $params) )
        {
            throw new CHttpException(403, 'You are not authorized to perform this action');
        }
        //...
} 
```

4// 完成，现在我们可以使用 checkAccess :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:46:40.497

首先，您最初的使用`checkAccess`是正确的。使用`Yii::app()->user->checkAccess()`您正在使用以下定义：

[http://www.yiiframework.com/doc/api/1.1/CWebUser#checkAccess-detail](http://www.yiiframework.com/doc/api/1.1/CWebUser#checkAccess-detail)

现在，调用的`CWebUser`实现的实现，这是您遇到非法偏移类型问题的地方。`checkAccess``CPHPAuthManager`

[http://www.yiiframework.com/doc/api/1.1/CPhpAuthManager#checkAccess-detail](http://www.yiiframework.com/doc/api/1.1/CPhpAuthManager#checkAccess-detail)

An`Illegal offset type`表示您试图通过指定其键（也称为：偏移量）来访问数组元素，该值不能用作键。这可能是另一个数组、一个对象、null 或其他东西。

您在扩展页面上发布的堆栈跟踪显示以下行给出了问题：

```
if(isset($this->_assignments[$userId][$itemName])) 
```

所以我们有两种非法偏移的可能性：`$userId`和`$itemName`。

由于`$itemName`显然是一个字符串，因此问题必须与`$userId`.

（作为旁注，您的堆栈跟踪显示此错误的周围代码这一事实也表明，至少对于`CPHPAuthManager`，您使用的是 1.1.11 之前的 Yii 版本。请注意[https 的第 73 和 74 行： //github.com/yiisoft/yii/blob/1.1.11/framework/web/auth/CPhpAuthManager.php](https://github.com/yiisoft/yii/blob/1.1.11/framework/web/auth/CPhpAuthManager.php)在您的文件代码中不存在。）

此时我已经猜到问题是指定用户未登录，因此`Yii::app()->user->id`返回`null`. `Yii::app()->user->id`但是，您在放置为 的第二个参数时遇到的新错误`checkAccess`揭示了其他内容。

由于第二个参数实际上应该是`$params`出现在您的`bizRule`. 根据错误消息，这意味着`Yii::app()->user->id`正在返回一个`mondoId`类型对象。

我对这种类型的对象不熟悉，所以查了一下：

[http://php.net/manual/en/class.mongoid.php](http://php.net/manual/en/class.mongoid.php)

长话短说，您需要强制`Yii::app()->user->id`返回与此`mondoId`对象等效的字符串值。这可能是在您`UserIdentity`的`components`文件夹中设置的。要强制它为字符串，只需放置`(string)`强制类型转换。

例子：

```
$this->_id = (string)$User->_id; 
```

您的确切代码会有所不同，具体取决于您`UserIdentity`班级中的内容。

然后，将您`checkAccess`的签名恢复到以前的签名，它应该消除`Illegal offset error`您最初遇到的签名。

但是请注意，我没有使用此扩展，在执行以下操作时应该可以解决此问题，如果扩展依赖于对象而不是字符串这一事实，`Yii::app()->user->id`则可能会导致新问题。`mondoId`

# javascript - 如何获取在 html5 画布上绘制的任何图像元素（可调整大小/可拖动）的位置（坐标）？

> ID：15860777
> 
> 赞同：0
> 
> 时间：2013-04-07T09:13:29.807
> 
> 标签：javascript, jquery, html, html5-canvas

目前我在 html5 画布上绘制图像 onclicking 该图像。绘制该图像的代码如下：

这是给定的脚本函数：

```
<script>
  function update(activeAnchor) {
    var group = activeAnchor.getParent();

    var topLeft = group.get('.topLeft')[0];
    var topRight = group.get('.topRight')[0];
    var bottomRight = group.get('.bottomRight')[0];
    var bottomLeft = group.get('.bottomLeft')[0];
    var image = group.get('.image')[0];

    var anchorX = activeAnchor.getX();
    var anchorY = activeAnchor.getY();

    // update anchor positions
    switch (activeAnchor.getName()) {
      case 'topLeft':
        topRight.setY(anchorY);
        bottomLeft.setX(anchorX);
        break;
      case 'topRight':
        topLeft.setY(anchorY);
        bottomRight.setX(anchorX);
        break;
      case 'bottomRight':
        bottomLeft.setY(anchorY);
        topRight.setX(anchorX); 
        break;
      case 'bottomLeft':
        bottomRight.setY(anchorY);
        topLeft.setX(anchorX); 
        break;
    }

    image.setPosition(topLeft.getPosition());

    var width = topRight.getX() - topLeft.getX();
    var height = bottomLeft.getY() - topLeft.getY();
    if(width && height) {
      image.setSize(width, height);
    }
  }

  function addAnchor(group, x, y, name) {
    var stage = group.getStage();
    var layer = group.getLayer();

    var anchor = new Kinetic.Circle({
      x: x,
      y: y,
      stroke: '#666',
      fill: '#ddd',
      strokeWidth: 2,
      radius: 8,
      name: name,
      draggable: true,
      dragOnTop: false
    });

    anchor.on('dragmove', function() {
      update(this);
      layer.draw();
    });
    anchor.on('mousedown touchstart', function() {
      group.setDraggable(false);
      this.moveToTop();
    });
    anchor.on('dragend', function() {
      group.setDraggable(true);
      layer.draw();
    });
    // add hover styling
    anchor.on('mouseover', function() {
      var layer = this.getLayer();
      document.body.style.cursor = 'pointer';
      this.setStrokeWidth(4);
      layer.draw();
    });
    anchor.on('mouseout', function() {
      var layer = this.getLayer();
      document.body.style.cursor = 'default';
      this.setStrokeWidth(2);
      layer.draw();
    });

    group.add(anchor);
  }

  function loadImages(sources, callback) {
    var images = {};
    var loadedImages = 0;
    var numImages = 0;
    for(var src in sources) {
      numImages++;
    }
    for(var src in sources) {
      images[src] = new Image();
      images[src].onload = function() {
        if(++loadedImages >= numImages) {
          callback(images);
        }
      };
      images[src].src = sources[src];
    }
  }

  function initStage(images) {
    var stage = new Kinetic.Stage({
      container: 'container_canvas',
      width: 578,
      height: 400
    });
    var darthVaderGroup = new Kinetic.Group({
      x: 270,
      y: 100,
      draggable: true
    });

    var layer = new Kinetic.Layer();

    layer.add(darthVaderGroup);

    stage.add(layer);

    var darthVaderImg = new Kinetic.Image({
      x: 0,
      y: 0,
      image: images.darthVader,
      width: 200,
      height: 138,
      name: 'image'
    });

    darthVaderGroup.add(darthVaderImg);
    addAnchor(darthVaderGroup, 0, 0, 'topLeft');
    addAnchor(darthVaderGroup, 200, 0, 'topRight');
    addAnchor(darthVaderGroup, 200, 138, 'bottomRight');
    addAnchor(darthVaderGroup, 0, 138, 'bottomLeft');

    darthVaderGroup.on('dragstart', function() {
      this.moveToTop();
    });
    stage.draw();

  }
function putDesign(designSrc)
{
designSrc = designSrc.split("images/"); 
 var sources = {
    darthVader: 'images/'+designSrc[1],
  };
  loadImages(sources, initStage);
  }
</script> 
```

我为此使用 kinetic-v4.4.0.min.js ( **[http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.4.0.min.js](http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.4.0.min.js)** )，在 html 中我只是在打电话这个函数**putDesign**，所以这段代码将在这个 iv 中绘制一个画布。

```
 <div class="behind" id="behind"> 
        <div id="canvasProductImage" style="text-align:center; width:300px;    height:300px; background:url(images/a.png) 100px 100px  no-repeat;">

       <div id="container_canvas"></div>
        </div> 
```

现在这段代码将使我在 div 中绘制图像。这里是图像 1（tshirt（我们将在其中绘制画布的 div 的背景图像））和图像 2（绘制的元素），所以主要任务是我如何获得 drwan 图像的位置，意味着如何我知道画布上绘制图像的坐标位置吗？由于图像对象可调整大小和可拖动，所以我想要最后定位的坐标？在此先感谢我非常接近我的目标，请提供帮助。

图像第一：

![在此处输入图像描述](https://i.stack.imgur.com/oOAwn.png)

图二：

![在此处输入图像描述](https://i.stack.imgur.com/115wU.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T15:26:55.600

**如何获取可拖动/调整大小的图像信息（X/Y/Width/Height）**

当您拖动/调整图像大小时，此代码将报告您的图像信息：

```
 darthVaderGroup.on("dragend",function(){$("#info").text(getImageInfo());});

      function getImageInfo(){
          var image=darthVaderImg;
          return(
              "   X/Y:"+
              image.getAbsolutePosition().x+"/"+
              image.getAbsolutePosition().y+" -- Width/Height:"+
              image.getWidth()+"/"+
              image.getHeight()          
          );
      } 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/Hm9uN/](http://jsfiddle.net/m1erickson/Hm9uN/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.4.1.min.js"></script>

<style>
    body{ background-color: ivory; padding:15px; }
    canvas{border:1px solid red;}
    #wrapper{ position:relative; width:400px; height:400px; }
    #Tshirt,#container_canvas{ position:absolute; top:0; left:0; }
</style>

<script>
$(function(){

    function update(activeAnchor) {
      var group = activeAnchor.getParent();
      var topLeft = group.get('.topLeft')[0];
      var topRight = group.get('.topRight')[0];
      var bottomRight = group.get('.bottomRight')[0];
      var bottomLeft = group.get('.bottomLeft')[0];
      var image = group.get('.image')[0];

      var anchorX = activeAnchor.getX();
      var anchorY = activeAnchor.getY();

      // update anchor positions
      switch (activeAnchor.getName()) {
        case 'topLeft':
          topRight.setY(anchorY);
          bottomLeft.setX(anchorX);
          break;
        case 'topRight':
          topLeft.setY(anchorY);
          bottomRight.setX(anchorX);
          break;
        case 'bottomRight':
          bottomLeft.setY(anchorY);
          topRight.setX(anchorX); 
          break;
        case 'bottomLeft':
          bottomRight.setY(anchorY);
          topLeft.setX(anchorX); 
          break;
      }

      image.setPosition(topLeft.getPosition());

      var width = topRight.getX() - topLeft.getX();
      var height = bottomLeft.getY() - topLeft.getY();
      if(width && height) {
        image.setSize(width, height);
      }

      imgX=image.getAbsolutePosition().x;
      imgY=image.getAbsolutePosition().y;
      imgWidth=image.getWidth();
      imgHeight=image.getHeight();

    }

    function addAnchor(group, x, y, name) {
      var stage = group.getStage();
      var layer = group.getLayer();

      var anchor = new Kinetic.Circle({
        x: x,
        y: y,
        stroke: '#666',
        fill: '#ddd',
        strokeWidth: 2,
        radius: 8,
        name: name,
        draggable: true,
        dragOnTop: false
      });

      anchor.on('dragmove', function() {
        update(this);
        layer.draw();
      });
      anchor.on('mousedown touchstart', function() {
        group.setDraggable(false);
        this.moveToTop();
      });
      anchor.on('dragend', function() {
        group.setDraggable(true);
        layer.draw();
      });
      // add hover styling
      anchor.on('mouseover', function() {
        var layer = this.getLayer();
        document.body.style.cursor = 'pointer';
        this.setStrokeWidth(4);
        layer.draw();
      });
      anchor.on('mouseout', function() {
        var layer = this.getLayer();
        document.body.style.cursor = 'default';
        this.setStrokeWidth(2);
        layer.draw();
      });

      group.add(anchor);
    }

    function initStage(images) {
      var stage = new Kinetic.Stage({
        container: 'container_canvas',
        width: 578,
        height: 400
      });
      var darthVaderGroup = new Kinetic.Group({
        x: 270,
        y: 100,
        draggable: true
      });
      var layer = new Kinetic.Layer();
      layer.add(darthVaderGroup);
      stage.add(layer);

      var darthVaderImg = new Kinetic.Image({
        x: 0,
        y: 0,
        image: images.darthVader,
        width: 200,
        height: 138,
        name: 'image'
      });

      darthVaderGroup.add(darthVaderImg);
      addAnchor(darthVaderGroup, 0, 0, 'topLeft');
      addAnchor(darthVaderGroup, 200, 0, 'topRight');
      addAnchor(darthVaderGroup, 200, 138, 'bottomRight');
      addAnchor(darthVaderGroup, 0, 138, 'bottomLeft');

      darthVaderGroup.on('dragstart', function() {
        this.moveToTop();
      });
      stage.draw();

      darthVaderGroup.on("dragend",function(){$("#info").text(getImageInfo());});

      function getImageInfo(){
          var image=darthVaderImg;
          return(
              "   X/Y:"+
              image.getAbsolutePosition().x+"/"+
              image.getAbsolutePosition().y+" -- Width/Height:"+
              image.getWidth()+"/"+
              image.getHeight()          
          );
      }

    }

  function putDesign(designSrc){
      designSrc = designSrc.split("images/"); 
      var sources = {
          darthVader: 'http://dl.dropbox.com/u/139992952/stackoverflow/love.png'
      };
      loadImages(sources, initStage);
  }

  function loadImages(sources, callback) {
    var images = {};
    var loadedImages = 0;
    var numImages = 0;
    for(var src in sources) {
      numImages++;
    }
    for(var src in sources) {
      images[src] = new Image();
      images[src].onload = function() {
        if(++loadedImages >= numImages) {
          callback(images);
        }
      };
      images[src].src = sources[src];
    }
  }

  putDesign("yourAssets");

}); // end $(function(){});
</script>

</head>

<body>
    <p>Info:<span id="info"></span></p><br/>
    <div id="wrapper">
        <img id="Tshirt" src="http://dl.dropbox.com/u/139992952/stackoverflow/Tshirt.png" width=167px height=167px>
        <div id="container_canvas"></div>            
    </div><br/>
</body>
</html> 
```

# jquery - 较大的脚本文件失败，但较小的似乎没问题

> ID：15860778
> 
> 赞同：0
> 
> 时间：2013-04-07T09:13:30.100
> 
> 标签：jquery, css, html, jquery-hover

[这是 fiddlelink，我的结果页面还可以](http://jsfiddle.net/BQ9jw/)，[并且页面不好但更“高级”](http://jsfiddle.net/BQ9jw/1/)。

为什么我添加后页面没有正确响应：

```
$('#progressbar').progressbar({
  value: 37;
});
$('#acces a').click(function(){
  $('#mask').fadeIn('fast');
  $('#game').fadeIn('fast');
}); 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:16:35.437

您的代码中有一个错字：应该是

```
.progressbar({value:37}); 
```

代替

```
.progressbar({value:37;}); 
```

# backbone.js - 保存主干模型时出错：未捕获错误：必须指定“url”属性或函数

> ID：15860781
> 
> 赞同：2
> 
> 时间：2013-04-07T09:13:38.997
> 
> 标签：backbone.js

我是骨干新手，并试图弄清楚为什么在应用程序中简单地“保存”模型不起作用。我有一个要保存的登录窗口模型。模型初始化如下：

```
window.myapp.login = new window.myapp.Models.Login();
window.myapp.signinBox = new window.myapp.Views.Signin({model: window.myapp.login});
window.myapp.signinBox.render(); 
```

现在在 signinBox 我听各种事件，并调用 this.model.get 和 this.model.set - 一切正常。但是，当我尝试打电话时

```
this.model.save(); 
```

我得到：未捕获的错误：必须指定“url”属性或函数

模型类如下所示：

```
window.myapp.Models.Login = Backbone.Model.extend({
    defaults:{
        modelType:'login',
        urlRoot:'/rest/login',
        password: "",
        rememberMe: false,
        isAuthenticated: false
    }
}) 
```

知道我在这里有什么问题吗？

我注意到的一件事（正如我所说的我是新手，这可能是微不足道的）是我在 this.model 下看不到 urlRoot，而是在 this.model.attributes 下看到。这应该是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:49:35.400

默认哈希（或函数）用于指定模型属性的默认属性。但是[urlRoot](http://backbonejs.org/#Model-urlRoot)是一个单独的属性，`Backbone.Model`需要设置根级别：

```
window.myapp.Models.Login = Backbone.Model.extend({
    urlRoot: '/rest/login',
    defaults:{
        modelType:'login',       
        password: "",
        rememberMe: false,
        isAuthenticated: false
    }
}) 
```

# angularjs - Angularjs ng-animate + css 过渡实现滑动效果

> ID：15860783
> 
> 赞同：6
> 
> 时间：2013-04-07T09:13:43.533
> 
> 标签：angularjs, css-transitions, ng-animate

我正在尝试使用`ng-animate`Angular 的新功能来实现滑动效果。我从演示站点获取了一些代码并准备了一个[小提琴](http://jsfiddle.net/LFFav/)。

`DIV`问题是当从数组中交换项目时，滑动下方的元素会不断上下移动。我试过`line-height`但没有成功。

是否可以修复上述行为？或者任何更好的方法来实现它只使用角度和 CSS？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T13:48:22.670

您可以将输入和按钮包装在一个 div 中，并将其放在绝对位置。

**这是一个[演示](http://jsfiddle.net/LFFav/1/)**

## HTML

```
<div ng-app="">    
<div ng-controller='anim' >
    <div ng-repeat="item in lst"  ng-animate=" 'wave' ">
    {{item}}
    </div>
    <div class="wrapperInput">
        <input ng-model="cmt"> 
    <button ng-click="clk()"> Slide </button>
        </div>
    </div>  

</div> 
```

## CSS

```
 </style> <!-- Ugly Hack due to jsFiddle issue: http://goo.gl/BUfGZ --> 
<script src="http://code.angularjs.org/1.1.4/angular.min.js"></script>
<style>

/**/
.wrapperInput{position:absolute;top:30px;}
/**/

.wave-enter-setup, .wave-leave-setup {
  -webkit-transition:all cubic-bezier(0.250, 0.460, 0.450, 0.940) .5s;
  -moz-transition:all cubic-bezier(0.250, 0.460, 0.450, 0.940) 0.5s;
  -o-transition:all cubic-bezier(0.250, 0.460, 0.450, 0.940) 0.5s;
  transition:all cubic-bezier(0.250, 0.460, 0.450, 0.940) .5s;
    line-height:100%;
}

.wave-enter-setup {
  position:relative;
  left:100%;
 line-height:100%;
}

.wave-enter-start {
  left:0;
line-height:100%;
}

.wave-leave-setup {
  position:absolute;
  left:0;
line-height: 100%;
}

.wave-leave-start {
  left:-100%;
  line-height: 10%;
} 
```

## JS

```
function anim($scope,$timeout){
    $scope.lst = [];
    $scope.master = ['[1] John who is 25 years old.','[2] Jessie who is 30 years old.','[3] Johanna who is 28 years old.','[4] Joy who is 15 years old.','[5] Mary who is 28 years old.','[6] Peter who is 95 years old.','[7] Sebastian who is 50 years old.','[8] Erika who is 27 years old.','[9] Patrick who is 40 years old.','[10] Samantha who is 60 years old.'];

$scope.lst.unshift($scope.master[Math.floor((Math.random()*10)+1)]);

    $scope.clk = function() { clik();}

    function clik() {
    //alert('here');
         $scope.lst.unshift($scope.master[Math.floor((Math.random()*10)+1)]);         
         $scope.lst.pop();  
        $timeout(function(){ clik();},2000);
    }

    clik();

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:47:24.283

试试这个：

CSS：

```
.wave-enter-setup, .wave-leave-setup {
  -webkit-transition:all cubic-bezier(0.250, 0.460, 0.450, 0.940) .5s;
  -moz-transition:all cubic-bezier(0.250, 0.460, 0.450, 0.940) 0.5s;
  -o-transition:all cubic-bezier(0.250, 0.460, 0.450, 0.940) 0.5s;
  transition:all cubic-bezier(0.250, 0.460, 0.450, 0.940) .5s;
  position:relative;
  display:table;
  float:left;
}

.wave-enter-setup {
  left:100%;
}

.wave-enter-start {
  left:0;
}

.wave-leave-setup {  
  left:0%;
}

.wave-leave-setup.wave-leave-start {
  left:-100%;
}

.floatNone{ clear:both; position:relative;} 
```

HTML：

```
<div ng-app="">    
    <div ng-controller='anim' >
        <div ng-repeat="item in lst"  ng-animate=" 'wave' " >{{item}}</div>
        <div class="floatNone">
            <input ng-model="cmt" >     
            <button ng-click="clk()"> Slide </button>
        </div> 
     </div>    
</div> 
```

# html - Chrome 上的 Z 转换未执行动画

> ID：15860788
> 
> 赞同：0
> 
> 时间：2013-04-07T09:14:26.640
> 
> 标签：html, google-chrome, css, css-transitions

我正在尝试使用以下 CSS 代码在 Z 轴上为 HTML 元素创建一个简单的动画：

```
-webkit-transition: -webkit-transform 1000ms ease 500ms;
-webkit-transform: perspective(100px) translate3d(0px, 0px, -20px); 
```

问题是没有针对 Z 轴执行动画（只是在动画应该结束时突然跳转）。如果我切换轴，例如 X，那么动画就会正确执行。

**编辑**：如果我混合轴，则仅对 X 和 Y 轴执行动画，当动画结束时，元素将移动到 Z 轴上的正确位置（突然跳跃）。

在 FireFox 中使用相同的 CSS 代码（没有供应商前缀）可以正常工作，元素在每个轴上都有动画，包括 Z。

这是特定于 Chrome 的问题，还是我错误地使用了转换元素？

**Edit2**：使用示例代码创建了一个 JSFiddle [（链接）](http://jsfiddle.net/xpR2n/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:18:31.937

透视是一个单独的东西，不是变换的一部分。

```
-webkit-transform: perspective(100px) translate3d(0px, 0px, -20px); 
```

应该：

```
-webkit-perspective: 100px;
-webkit-transform: translate3d(0px, 0px, -20px); 
```

此外，您需要定义元素周围事物的透视图。

我已经用一个名为 的元素包围了你的元素`#stage`，而是设置了透视图。

[http://jsfiddle.net/xpR2n/2/](http://jsfiddle.net/xpR2n/2/)

显示要做什么。

# php - 录制 AS MP3 或 OGG 闪存

> ID：15860790
> 
> 赞同：0
> 
> 时间：2013-04-07T09:14:37.200
> 
> 标签：php, javascript, html, flash

我正在为我的网站寻找录音机，我找到了一些像 WAMI 和 jRecorder 这样的好录音机，但是它们都录制为 WAV 格式，不能录制为 MP3 格式，我听说我必须在服务器端将它们编码为 mp3，

所以当我得到 5 分钟的记录时，我得到 50 MB 的文件，其中 MP3 或 OGG 可能只有 3-4 MB。

在发送到服务器之前，您对编码或录制到 MP3 或 OGG 有任何想法或建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:18:31.357

您有 2 个相当简单的问题解决方案。

第一个是服务器转换器应用程序。您可以使用 FFmpeg，这将非常容易。如果你已经有一个媒体服务器（比如 Wowza 或 Red5）你可以用它来完成这个任务，只要阅读官方的服务器指南，我想这样一个常见的问题会在里面描述。

第二种是使用 Flash mp3 录音机应用程序。我不认为你会找到一个完整的准备好的，但你可以自己编写代码（它接近 300 行代码）。[这些信息](https://stackoverflow.com/questions/11341945/how-to-record-audio-and-save-it-in-mp3-format-in-as3-adobe-air2-5)可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T16:03:37.913

我使用 Audacity 之类的程序将 .wav 文件导出为 .mp3

不确定如何在服务器上转换 wav 文件。

# ios - CoreData 将 NSNumbers 转换为 BOOL

> ID：15860791
> 
> 赞同：3
> 
> 时间：2013-04-07T09:14:38.193
> 
> 标签：ios, core-data

我的 CoreData 模型中有一个实体，它有一个布尔字段。这以`NSNumber`. 我想要的是访问者使用`BOOL`而不是`NSNumber`，所以我可以使用

```
comment.isActive = YES; 
```

代替：

```
BOOL isCommentActive = [NSNumber numberWithBool:comment.isActive]; 
```

我打算更改自动生成的实体类文件中的代码，但我被告知不要这样做，因为每次提取模型时它都会覆盖。

我有一个实体类别，我尝试编写一个访问器，将其转换为`BOOL`同名的访问器，但这只会导致我陷入循环。

有些人提到了方法 twizzling，但对我来说这听起来很 hacky。我应该只创建一个返回不同名称的原语的访问器吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-07T09:23:20.747

在 Xcode 中创建托管对象子类时，只需选择“对原始数据类型使用标量属性”选项。这将创建属性

```
@interface MyEntity : NSManagedObject
@property (nonatomic) BOOL active;
@end 
```

并且所有转换都是在“幕后”自动完成的。它实际上更有效，因为没有`NSNumber`创建对象。

不幸的是，“核心数据编程指南”在这方面已经过时了，[它仍然声称](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdNSAttributes.html#//apple_ref/doc/uid/TP40001919-SW13)：

> 您可以将属性声明为标量值，但对于标量值，Core Data 不能动态生成访问器方法——您必须提供自己的实现。

我知道的唯一 Apple“文档”是 WWDC 2011 会议视频，比较[https://stackoverflow.com/a/14091193/1187415](https://stackoverflow.com/a/14091193/1187415)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:31:27.097

我同意 Martin 但您可以尝试在现有的 NSManagedObject 子类中添加此功能：

```
 -(void)setActiveRaw:(BOOL)active
 {
     [self setActive:[NSNumber numberWithBool:active]];
 } 
```

并像这样使用它：

```
 [comment setActiveRaw:YES]; 
```

代替

```
 comment.active = [NSNumber numberWithBool:comment.isActive]; 
```

你也可以为此编写一个吸气剂：

```
 -(BOOL)getActiveRaw
 { 
    return [self.active boolValue]
 } 
```

# android - Osmdroid 离线文件

> ID：15860792
> 
> 赞同：4
> 
> 时间：2013-04-07T09:14:45.920
> 
> 标签：android, zip, offline, osmdroid, tile

我有一个 osmdroid 地图，我想从 MOBAC 的 osmdroid zip 或 gemf 文件加载离线图块。我查看了它，无论我走到哪里，它都说把它放在 sdcard/osmdroid 中。但它不起作用，我需要更改代码中的某些内容吗？

```
 public class Map extends Activity {
  private IMapView mMapView;
  private static IMapController mMapController;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_map);

    mMapView = (MapView) findViewById(R.id.mapview);
    ((MapView) mMapView).setBuiltInZoomControls(true);

    mMapController = mMapView.getController();
    mMapController.setZoom(13);
    GeoPoint geoPecs = new GeoPoint(46.070833,18.233056);
    mMapController.setCenter(geoPecs);

mProvider = new MapTileProviderBasic(getApplicationContext());
    mCustomTileSource = new XYTileSource("Turaterkep", null, 13, 15, 256, ".png", "http://users.atw.hu/perzsa/map/Turaterkep/");
    mProvider.setTileSource(mCustomTileSource);
    mTilesOverlay = new TilesOverlay(mProvider,this.getBaseContext());

    mMapView.getOverlays().add(mTilesOverlay); 
```

更新：我设法使用包含到 osmdroid 的示例从在线加载磁贴，我也更新了代码，我想我必须从这个示例开始，也许我可以从 localhost 加载？生病回来看看

图片：http: [//i.stack.imgur.com/CoZT1.png](http://i.stack.imgur.com/CoZT1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-01T19:04:52.590

我遇到了同样的问题，我通过使用 Mapnik 的在线图块解决了这个问题。这样，我的应用程序在我的移动设备（phone/osmdroid/tiles/Mapnik）中创建了路径。

```
 mMapView.setTileSource(TileSourceFactory.Mapnik); 
```

您还可以通过将其添加到您的 xml 文件和地图视图中来添加tilesouce：

```
 tilesource="Mapnik" 
```

不要忘记通过添加以下内容来指定您不希望应用程序下载数据：

```
 mMapView.setUseDataConnection(false); 
```

完成后，您可以让应用程序使用离线磁贴，只需遵循本指南：[http ://www.haakseth.com/?p=30](http://www.haakseth.com/?p=30)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:31:23.873

您的代码是正确的 MapTileProviderBasic 使用 MapTileFileArchiveProvider：

[https://code.google.com/p/osmdroid/source/browse/trunk/osmdroid-android/src/org/osmdroid/tileprovider/MapTileProviderBasic.java?r=681](https://code.google.com/p/osmdroid/source/browse/trunk/osmdroid-android/src/org/osmdroid/tileprovider/MapTileProviderBasic.java?r=681)

您应该验证 zip 的路径和 zip 文件中的目录结构。

zip 文件应放入 OSMDROID_PATH (/mnt/sdcard/osmdroid)。这是搜索 zip 文件的地方：

```
private void findArchiveFiles() {

    mArchiveFiles.clear();

    if (!getSdCardAvailable()) {
            return;
    }

    // path should be optionally configurable
    final File[] z = OSMDROID_PATH.listFiles();
    for (final File file : z) {
            final IArchiveFile archiveFile = ArchiveFileFactory.getArchiveFile(file);
            if (archiveFile != null) {
                    mArchiveFiles.add(archiveFile);
            }
    }
} 
```

在您的 zip 中，不要忘记将 tile 源名称设置为基本目录：

/tilesourcename/zoomlevel/...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-11T11:05:08.660

我也遇到了问题。我的设置是使用 Mapnik 离线 Osmdroid。它现在正在工作。我正在使用的代码如下。

首先你需要在 build.gradle (Module:app) 中包含 OSMDroid

```
implementation 'org.osmdroid:osmdroid-android:6.1.5' 
```

添加此行后执行 Gradle 同步。

我的主要活动是这样的：

```
public class MainActivity extends AppCompatActivity {

    MapView map = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Intent intent = getIntent();
        map = findViewById(R.id.map);
        map.setTileSource(TileSourceFactory.MAPNIK);
        map.setUseDataConnection(false);
        map.setMinZoomLevel(7.0);
        map.setMaxZoomLevel(18.0);

        IMapController mapController = map.getController();
        mapController.setZoom(9.0);

        map.invalidate();

        GeoPoint goToLocation = new GeoPoint(41.80937753568571, -5.739056020777395);
        mapController.setCenter(goToLocation);
    }
} 
```

活动 .xml 包含视图：

```
<org.osmdroid.views.MapView android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tilesource="Mapnik" /> 
```

我的带有地图图块的 .zip 文件位于 /storage/emulated/0/osmdroid

（我无法从位置 /sdcard/osmdroid 让它工作）

您的 .zip 文件的内部结构应该是 /Mapnik/x/y/z.png 这是区分大小写的！

您的 .zip 文件叫什么似乎并不重要，您甚至可以拥有多个文件。

首次编译和安装后，您可能需要进入 Android 上的应用程序属性并授予应用程序访问“存储”的权限（不确定确切的翻译，我的手机是西班牙语的，它被称为“Almacenamiento”）。

祝你好运！

# memory - 在 8086 上使用 TASM 将 ASCII 符号写入视频内存

> ID：15860794
> 
> 赞同：1
> 
> 时间：2013-04-07T09:14:59.337
> 
> 标签：memory, video, assembly, x86-16, tasm

我需要编写一个程序来将 ASCII 符号写入视频内存。

```
.model tiny
.stack
.data
.code
main: 

mov ax, 0b800h
mov ds, ax

mov aL, 'x'
mov es, bx
mov es:[1], aL

mov ah, 4ch
int 21h

end main 
```

这段代码到目前为止是惰性的；它编译、运行然后退出而不打印任何内容。我想我错过了一条线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-08T17:52:50.423

为了能够写入视频内存，请将 ES 设置为 0b800h 在屏幕上指定要写入的位置（偏移）。将 DI 设置为 (row*(max. rows (80))+col)*2（ROW 和 COL 基于空值）。例如要写入第 10 行的第三个字符，请使用 "mov di, (2*80+9)*2" 指定 AH 中的颜色。将 AH 设置为 (backgroundcolor*16+foregroundcolor) 例如在黑色 (0) 背景上写浅灰色 (7) 字母使用 "mov ah, 7" 使用 STOSW 指令而不是 "mov es:[adress]", al . 这样您就可以动态地写入屏幕上的不同位置。

# linux - 本地浏览器无法访问ip地址

> ID：15860797
> 
> 赞同：0
> 
> 时间：2013-04-07T09:15:09.560
> 
> 标签：linux, centos, xampp, ip-address

我在centos上使用**xampp 。**当我浏览`http://localhost/phpmyadmin`它的工作。但是当我尝试时`http://10.102.1.10/phpmyadmin`它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:20:29.797

用这个：

`http://127.0.0.1/phpmyadmin`代替`http:// 10.102.1.10 /phpmyadmin`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:26:44.260

您可以将 127.0.0.1/phpmyadmin 用于 localhost/phpmyadmin

您是否通过尝试跟踪路由 10.102.1.10 来检查 IP 是否正确？

# css - 将img标签放在div的右上角

> ID：15860798
> 
> 赞同：0
> 
> 时间：2013-04-07T09:15:18.520
> 
> 标签：css, image, position

我想`<a href="..."><img /></a>`在现有 div 的右上角放置一个标签（链接图像）。

我找到了一种将图像作为背景而不重复的方法，但是，我无法链接图像。我应该使用什么 CSS？

这就是我现在所拥有的：

```
<div id="footer">
  some multi-line commercial text content
</div> 
```

和CSS：

```
#footer
    {
        line-height:18px;
        position:absolute;
        bottom:-230px;
        left:0;
        width:280px;
    }

#footer span
    {
        font-size:16px;
        display:block;
    } 
```

我想放在那里的图标和链接是 43x38 大小。页脚 div 的大小为 280x186（在 google chrome 网站管理员的资料中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T09:20:28.697

使容器位置：相对

使图像位置：绝对；右：0px；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T09:21:31.927

用这个：-

```
<div class="ImageDiv">
    <a href="#" class="hiddenlink"></a>
</div>

.ImageDiv {
    background-image: url(someurl);
    position: relative; //parent div has to be relative position for absolute position children to stay in it.
}
.hiddenlink {
    The way you want to do.
} 
```

# c++ - 当 CreateWaitableTimer 设置为不存在的日期/时间时会发生什么？

> ID：15860800
> 
> 赞同：6
> 
> 时间：2013-04-07T09:15:38.330
> 
> 标签：c++, winapi, timer, dst

2013 年的夏令时（美国）从 3 月 10 日星期日凌晨 2:00 开始。比如说，现在是 2013 年 3 月 9 日，我在已经创建的可等待计时器句柄上调用以下 API：

```
FILETIME ftWhen = //Points as absolute time to March 10th, 2013, at 2:10 AM
SetWaitableTimer(hTimer, ftWhen, 0, NULL, NULL, TRUE); 
```

`March 10th, 2013, 2:10 AM`是一个不存在的时间，因为时间会提前一小时调整，所以不是凌晨 2 点，而是凌晨 3 点。

所以我的问题是，我的计时器会发生什么？（我似乎找不到这个案例的文档。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T09:30:06.560

我怀疑您已经知道问题的答案，因为您的评论明确指出：

```
// Points _as absolute time_ to March 10th, 2013, at 2:10 AM 
```

所以你知道[SetWaitableTimer()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686289.aspx)的文档说：

> 请务必使用基于 UTC 的绝对时间，因为系统内部使用基于 UTC 的时间。

由于 UTC 根本不关心 DST，因此您的计时器将在您`March 10th, 2013, 3:10 AM`的*本地时间*触发。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T09:29:55.970

`SetWaitableTimer`期望`pDueTime`以 UTC 给出；所以没有办法用这样一个不存在的日期/时间来调用它。

# python-3.x - 哪个版本的 Python 更适合 Windows 7（32 位）？

> ID：15860801
> 
> 赞同：0
> 
> 时间：2013-04-07T09:15:48.503
> 
> 标签：python-3.x

我目前正在使用 Python 3.3.0 版。

但它向我显示了语法错误`else`，`elif`尽管我做的一切都是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:19:00.223

如果它给你一个语法错误，那么我建议你*没有*正确地完成所有事情。顺便说一句，这就是我的答案，下面的其余部分只是额外的帮助。

`if`当地球上数百万人每天进行数百万次测试时，您在 Python 的声明中发现错误的可能性极小。更有可能是*您在*使用它时存在问题，已经过测试了，好吧，只有您 :-)

发布您的代码，这是唯一确定的方法。您可能在 Python3 环境中依赖 Python2 代码，但我认为`if`结构没有改变，因此值得怀疑。

您的缩进可能不正确。您可能缺少一个`:`.

您可能做错了一百件事，但不幸的是，没有代码我们无法判断。

顺便说一句，最好使用的 Python 版本是您选择的操作系统的最新稳定版本，在 Python2 或 Python3 流中（取决于您是否需要旧版本）。那是（在这个答案的时候）`2.7.4`和`3.3.1`。

# c - Lua调用C函数的表现

> ID：15860816
> 
> 赞同：8
> 
> 时间：2013-04-07T09:17:28.613
> 
> 标签：c, performance, gcc, lua

我注意到根据 -fPIC 标志，我的 C 程序的性能存在很大差异。当我使用它时，我的程序比没有它时慢 30%。我将它与调用 C 函数的 Lua 程序进行比较（所有繁重的计算都完成了）。首先，我使用 C 函数创建了一个共享对象，因此必须使用 -fPIC 标志。性能与带有 -fPIC 标志的 C 代码非常相似。所以现在我尝试在没有 .so 的情况下做同样的事情：我从 C 调用 Lua：

```
int main()
{
    lua_State* L = luaL_newstate();
    luaL_openlibs(L);
    lua_register(L, "my_c_function", my_c_function);
    luaL_dofile(L, "my_lua_program.lua");
    lua_close(L);
    return 0;
} 
```

但是无论我是否使用 -fPIC 标志，这里的性能都是相同的（并且与使用 .so 的方法相同）。我期待在没有 -fPIC 标志的情况下有所改进......关于如何进一步调查它的任何建议？第二种方法是否仍然创建与位置无关的代码，这就是性能相似的原因？谢谢！

更多信息，如评论所建议：我使用 -O3 标志、gcc 4.7.2、Ubuntu 12.04.2、x86_64。是的，我对这么大的开销感到非常惊讶……我的程序正在计算 Mandelbrot 分形。所以有两个循环遍历 x 和 y，我在 C 中的函数是 isMandelbrot：它需要迭代次数并返回 bool：是否属于 Mandelbrot 集。我将共享对象与“require”一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-20T06:37:22.587

我认为您正在运行的代码是 x86。该平台在使用 -fPIC 时存在性能问题，其中任何导入函数的位置都需要找到本地 eip。执行此操作的代码为函数增加了一点开销。不幸的是lua充满了非常小的函数，它会增加相对开销。

在 x64 -fPIC 上没有这个开销。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-11-15T20:21:27.863

好的，首先，如果您使用 c 程序或使用 lua 调用 c 程序几乎没有区别，但是，每次创建 c 程序时，您都在创建独立程序，所有系统头文件都要弹出，然后，在完成正在做的事情后，它会报告价值。我的观点是，问题可能不是“调用”函数，而是有多少和多快，因为在调用程序之后还有很多事情要做。

o3 优化标志不是很健康，所以如果你这样做了一次，你可能还想尝试 -Ofast，只是不要使用 -Os 它可能只会让事情变得更糟......

提高性能的最简单方法就是优化 c 代码，您可能想在编译期间尝试优化标志。[这里](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)有一大堆标志和大量关于 GCC 编译器的文档。请注意，并非所有这些都是安全的，也并非所有这些都是真正需要的，因此请分析您的代码并仅选择您需要的那些。

第二种优化代码的方法被认为有点困难。您可能希望在启动 lua 脚本时启动 C 程序，然后在运行时（并行）交换信息，因此您无需在每次调用时调用整个程序来显示

第三，最难的方法，让你的 C 代码创建 n 个线程，其中 n<= 处理器逻辑核心，以便它们可以独立工作。

另外，如果您不介意，C/c++ 代码擅长数学，但有更好的语言可以让您获得更高的性能，例如 Fortran、APL、Matlab、Haskel、R，或者如果您足够疯狂并且您有很好的知识数学问题 - 使用 GPU 而不是 CPU -> 着色器语言，我也将它们用于一些奇怪的东西，甚至不接近图形，但它对我有用。

# visual-studio - Visual Studio 中对 Durandal 的工具支持

> ID：15860820
> 
> 赞同：0
> 
> 时间：2013-04-07T09:18:11.990
> 
> 标签：visual-studio, durandal

Visual Studio 是否有任何插件可以帮助重构和/或导航？我追求的是：

*   重命名视图/视图模型对。
*   查找视图模型的用法。

# automator - 在 Apple 的 automator 中，如何将文件传递给另一个应用程序？

> ID：15860831
> 
> 赞同：0
> 
> 时间：2013-04-07T09:19:20.113
> 
> 标签：automator

我正在尝试创建一个执行此操作的自动化应用程序：

1/ 对拖到此工作流的所有文件运行以下命令：xargs -I{} exiftool -IPTC:Keywords= -XMP:Subject= {} -overwrite_original

2/ 之后将所有文件发送到另一个应用程序（ImageOptim.app）。

第 1 步完美运行。一旦步骤 1 完成，我不知道如何将文件发送到另一个应用程序。甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T03:59:49.227

Automator 的“运行 Shell 脚本”操作的输出是文本。你可能想看看这样的[东西](http://sveinbjorn.org/platypus)

# ajax - 版本 2013.1.319 中针对数字列的 Ajax 绑定错误

> ID：15860833
> 
> 赞同：1
> 
> 时间：2013-04-07T09:19:28.117
> 
> 标签：ajax, kendo-ui, kendo-grid

我尝试在网格中测试 ajax 绑定数据。如果数据列是数字（int、double、float 等），我们会收到错误或字典和模型数据类型不兼容：传入字典的模型项的类型为“System.Int32”，但该字典需要模型项'System.String' 类型。

这发生在版本 1.319 中。在 1.315 的早期版本中，它运行良好。

控制器：

```
public ActionResult Ajax()
{
return View();
}

public ActionResult AjaxRead([DataSourceRequest] DataSourceRequest request)
{
var persons = new List<Person>()
{
new Person() {Id = 1, Name = "Jack", Age = 13},
new Person() {Id = 2, Name = "Riley", Age = 45},
new Person() {Id = 3, Name = "William", Age = 34},
new Person() {Id = 4, Name = "Oliver", Age = 66},
new Person() {Id = 5, Name = "Lachlan", Age = 35},
new Person() {Id = 6, Name = "Thomas", Age = 53},
new Person() {Id = 7, Name = "Lachlan", Age = 24},
new Person() {Id = 8, Name = "John", Age = 54},
new Person() {Id = 9, Name = "Alex", Age = 19},
new Person() {Id = 10, Name = "Victor", Age = 39},
new Person() {Id = 11, Name = "Joshua", Age = 33}
};
return Json(persons.ToDataSourceResult(request));
}
}

public class Person
{
[ScaffoldColumn(false)]
public int Id { get; set; }
public string Name { get; set; }
public int Age { get; set; }
} 
```

看法：

```
@(Html.Kendo().Grid<Kendo.Mvc.Examples.Controllers.Person>()    
    .Name("Grid")
    .Columns(columns => {
        columns.Bound(p => p.Id).Groupable(false);
        columns.Bound(p => p.Name);
        columns.Bound(p => p.Age);
    })
    .Pageable()
    .Sortable()
    .Filterable()
    .Groupable()
    .Editable(editable => editable.Mode(GridEditMode.PopUp))
    .DataSource(dataSource => dataSource
        .Ajax()
        .PageSize(8)
        .Model(model => model.Id(p => p.Id))
        .Read("AjaxRead", "Grid")
    )
) 
```

如果我将代码更改如下

```
public class Person
{
    [ScaffoldColumn(false)]
    public int Id { get; set; }
    public string Name { get; set; }
    [DataType("Integer")]
    public int Age { get; set; }
} 
```

不会发生错误。

我不想为我的应用程序的所有类的所有数字字段设置属性，尤其是在以前的版本中它运行良好。

但如果没有，请告诉我我做错了什么。

谢谢你，弗拉德

# android - creatScaled 位图质量低

> ID：15860835
> 
> 赞同：2
> 
> 时间：2013-04-07T09:19:47.250
> 
> 标签：android, bitmap, image-scaling

大家好，我在将图像缩放为正方形时遇到问题。612 * 612

首先，我从 imageview 获取图像作为缓存，然后将其转换为位图图像。

```
 view.setDrawingCacheEnabled(true);
    view.buildDrawingCache();
    save = view.getDrawingCache(); 
```

然后我使用`Bitmap.createScaledBitmap`如下

```
 Bitmap a = Bitmap.createScaledBitmap(save, 612, 612, true); 
```

它可以按我的意愿工作，但是当图像缩放时它会失去质量

这是我`compress`保存/分享图像的方式

```
 a.compress(Bitmap.CompressFormat.PNG, 100, out); 
```

我通过我的应用程序将它分享到 Instagram 以适应 instagram 裁剪工具，但图像总是质量低下。谁能告诉我如何在不损失质量的情况下缩放/调整图像尺寸或在不损失质量的情况下适合 instagram 裁剪工具。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:48:56.547

如果您缩放位图，您也会失去质量。我更喜欢你可以使用 BitmapFactory

```
BitmapFactory.Options option = new BitmapFactory.Options();
        option.inJustDecodeBounds = true;

        option.inSampleSize = 4;
Bitmap bm = BitmapFactory.decodeFile(root.getPath() + "/" + imageName, option); 
```

有关更多详细信息，请参阅以下链接

[这个](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html) [这个](http://androidactivity.wordpress.com/2011/09/24/solution-for-outofmemoryerror-bitmap-size-exceeds-vm-budget/) [这个](http://androidactivity.wordpress.com/2011/09/24/solution-for-outofmemoryerror-bitmap-size-exceeds-vm-budget/) [这个](https://stackoverflow.com/questions/3331527/android-resize-a-large-bitmap-file-to-scaled-output-file/8497703#8497703)

# c# - 如何将 ODP.NET 集成到存储库类中？

> ID：15860836
> 
> 赞同：5
> 
> 时间：2013-04-07T09:20:02.280
> 
> 标签：c#, oracle, odp.net

我的域模型提供例如以下对象`Report : IEntity<Report>`。我通常从存储过程中检索 Oracle 用户定义类型对象（或集合类型）。对于所有类型的 C# 类都由 ODP.NET Visual Studio 自定义类向导生成。所以我有以下课程，例如：

```
public class UDT_REPORT : INullable, IOracleCustomType, IXmlSerializable {
    private bool m_IsNull;
    private decimal m_REPORT_ID;
    private decimal m_VALUE;                
    // etc
} 
```

目前我正在尝试为 C# 应用程序创建一个新的数据访问层。我想在这种情况下应用存储库模式，以实现松散耦合和更好的可测试性。但是如何将这些生成的类集成到存储库中呢？如何设计`ReportRepository`课堂？

```
public interface IReportRepository
{         
    Report Find(ReportId id);
    IList<Report> FindAll();
    void Store(Report Report);
} 
```

我应该使用以下方法吗？一个静态 DB 代理类，例如公开`Read<T>()`具有给定委托的通用方法，用于数据检索和映射。还有一个用于创建数据库提供者的工厂。

```
public static T Read<T>(string sql, Func<IDataReader, T> fetch, object[] parms = null)
{
    using (var connection = factory.CreateConnection())
    {
        connection.ConnectionString = connectionString;

        using (var command = factory.CreateCommand())
        {
            // Add connection; sql command text; 
                     // add parameters via some extension method   
            // Open and close connection                                                                         
            T t = default(T);
            var reader = command.ExecuteReader();
            if (reader.Read()) {
                t = fetch(reader);
            }
            return t;
        }
    }
} 
```

下面的委托用于获取相关的 UDT 对象并将其映射到域对象，例如`Report`。

```
private static Func<IDataReader, Customer> Fetch = reader =>
{                                             
            UDT_REPORT report = reader.GetValue(reader.GetOrdinal("out_param_report"));
            Report report = Mapping.Map(reportEntity);          
            return report;
}; 
```

您如何看待这种方法？在存储库中集成 ODP.NET 类型是否有更好的方法？或者我应该避免生成 UDT 类并添加一些 ORM 框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:54:32.803

当我第一次采用 EF 时，我使用了接口和存储库，但我发现它们几乎没有增加任何价值。这是我们的堆栈现在看起来的示例。

**语境：**

```
Imports System.Configuration
Imports System.Data.Entity
Imports System.Collections.Specialized

Imports Oracle.DataAccess.Client
Imports System.Reflection

Public Class MyContext
    Inherits System.Data.Entity.DbContext

    Public Property MyTables As DbSet(Of MyTable)

    Public Sub New()
        MyBase.New(
            New OracleConnection(
                ConfigurationManager.ConnectionStrings(
                    "Entities").ConnectionString
                ),
            True
        )
    End Sub

End Class 
```

**样本实体：**

```
Imports System.ComponentModel.DataAnnotations
Imports System.ComponentModel.DataAnnotations.Schema

Public Class MyTable

    <Key()>
    <Required()>
    Public Property KeyColumn As Int64

    <StringLength(50)>
    <Column("LegacyColumnName")>
    Public Property Name As String

    <StringLength(1000)>
    Public Property Description As String

    <Required()>
    Public Property IsActive As Int64

    Public Property DateCreated As DateTime?

End Class 
```

**示例 LINQ：**

```
Public Function GetMyTables()
    Try
        Using MCTX As New MyContext()
            Return (
                From T In MCTX.MyTables
                Order By T.Name
                Select New With {
                    T.KeyColumn,
                    T.Name,
                    T.IsActive
                }).ToArray
        End Using
    Catch ex As Exception
        Return ReportException(
            "An error occurred trying to retrieve the table list", ex)
    End Try
End Function 
```

旁注，我不确定您为什么要编写过程来进行检索。那不是违背了使用EF的目的吗？它为你做到了。

# ruby-on-rails - 查找去年的月份名称

> ID：15860837
> 
> 赞同：3
> 
> 时间：2013-04-07T09:20:11.860
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我的 ruby​​ 代码中，我想显示过去 1 年的所有月份名称。例如当前日期是`"April 2013"`然后我想显示从`"May 2012"`到的所有月份名称，`"April 2013"`例如`["May", "June", .., "April"]`。最好的主意是什么？

我试过：

```
<%= (1.year.ago.to_date.strftime("%B")..Date.today.strftime("%B")).map %> { |a| a } %> 
```

但它给出了：`["April"]`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T09:29:30.313

在 Rails 中，您可以执行以下操作：

```
<% 11.downto(0) do |i| %>
  <%= i.months.ago.strftime("%­B %Y") %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T09:34:29.457

```
11.downto(0).map { |m| m.months.ago.strftime("%B %Y") }
#=> ["May 2012", "June 2012", ..., "March 2013", "April 2013"] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-07T09:29:34.480

```
(0..11).map do |month|
    (11.months.ago + month.months).strftime("%B %Y")
end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-07T09:37:37.237

只是出于好奇，在 上没有广为人知的漂亮[`shift`](http://ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/Date.html#method-i-3C-3C)运算符`Date`：

```
(-12..0).inject([]) { 
  |agg, v| agg << Date::MONTHNAMES[(Date.today << v).month] 
} 
```

或者，甚至更简单：

```
(-12..0).map { |v| Date::MONTHNAMES[(Date.today << v).month] } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-07T09:32:16.613

试试这个：

```
(0..11).each { |i|
  month = (Date.today.month + i) % 12 + 1;
  puts Date.new(Date.today.year - 1 + (month < Date.today.month ? 0 : 1), month).strftime("%B %Y")
} 
```

# jquery - 如何将 jquery 函数绑定到动态 DOM

> ID：15860839
> 
> 赞同：1
> 
> 时间：2013-04-07T09:20:17.710
> 
> 标签：jquery, dynamic-binding, jquery-file-upload

我在我的页面上使用 jquery 文件上传功能，如下所示：

```
$('.new-variant-image')
 .fileupload({ 
       dataType: 'script',
       add: function(e, data){ 
       }
}); 
```

但是 DOM 类“new-variant-image”是在页面加载后动态创建的，所以它不起作用。我搜索了使用“on”和“live”绑定动态事件的方法，但在这种情况下无法正常工作。

任何帮助将不胜感激。

**编辑**

之后使用 AJAX 创建 DOM 元素“new-variant-image”，如果我在创建元素之后放置代码，它就可以工作。但我想避免这种情况，因为当我多次使用 ajax 调用该函数时，它会导致浏览器挂起大约 2 到 3 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:24:25.057

使用函数的回调

```
$('.new-variant-image').fileupload({
      dataType: 'script',
     add: function(e, data),
     done: $('.new-variant-image').click(function(){
     })
{ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:27:43.003

您的代码`$('.new-variant-image').fileupload({ dataType: 'script', add: function(e, data){`应该在元素创建代码之后......

我不知道你是如何创建元素的（使用 ajax 或其他东西）......

georgi-it 所建议的应该有效......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-15T19:56:05.600

虽然回答这个问题很晚，但从**jQuery 1.7**开始，您可以使用[jQuery.fn.on](https://api.jquery.com/on/)。

```
$(document).on("click", ".new-variant-image", function () {
    $('.new-variant-image')
            .fileupload({
                dataType: 'script',
                add: function (e, data) {
                }
            });
}) 
```

**这为所有存在的元素或动态附加**的元素附加了事件处理函数class `new-variant-image`。

# asp.net - 当前上下文中不存在名称“资源”

> ID：15860842
> 
> 赞同：2
> 
> 时间：2013-04-07T09:20:34.220
> 
> 标签：asp.net, asp.net-mvc-4, internationalization

我试图`Internationalisation`在我的项目中基于[这篇文章](http://code52.org/aspnet-internationalization/tutorial.html)。但在方法中的`LanguageController.cs`文件中`Language`：

```
 public JavaScriptResult Language()
    {
        return GetResourceScript(Resources.Language.ResourceManager); //Error
    } 
```

我收到此错误：

```
The name 'Resources' does not exist in the current context 
```

怎么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T09:23:59.170

您应该将`Resources.resx`文件添加到您的应用程序。还要注意要添加到哪个文件夹。例如，这`App_GlobalResources`是一个特殊的 ASP.NET 文件夹，您应该尝试将 resx 文件放在其他位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-09T14:48:57.020

有时，当您的活动命名空间与 Resource.Designer.cs 文件不在同一个命名空间中时，或者命名空间与其他活动不同时，就会发生这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-24T16:04:25.100

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T18:52:48.457

如果您使用的是 ASP.Net MVC，请遵循这篇文章： http: [//odetocode.com/Blogs/scott/archive/2009/07/16/resource-files-and-asp-net-mvc-projects.aspx](http://odetocode.com/Blogs/scott/archive/2009/07/16/resource-files-and-asp-net-mvc-projects.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-12T07:00:56.230

我知道这已被列为已回答，但当前的答案实际上并没有帮助我（因为我已经遵循了该步骤）。以防万一其他人正在搜索并且像我一样没有完全的经验，我必须为我用来解决这个问题的每个资源添加一行代码。IE

```
var newName = NameSpace.Properties.Resources.resourceName; 
```

显然，为您自己的项目相应地替换 newName、Namespace 和 resourceName。使用它后，我可以引用新变量并将其用于我的项目。我可能晚了 5 年才回答这个问题，但以防另一个新手在成功添加新资源后遇到同样的问题。

# android - Android编程（未找到处理意图异常的类）错误

> ID：15860843
> 
> 赞同：2
> 
> 时间：2013-04-07T09:20:38.953
> 
> 标签：android

最近我一直在开发一个新应用程序，我正在尝试使用意图添加插件。

我创建了一个名为的小型插件应用程序`DLC`，我试图在单击按钮时`DLC`从我的主应用程序启动一个活动。`MinePedia`

为此，我创建了一个调用活动的意图，`DLC`但每当我单击按钮时，我都会收到`Class not found to handle intent`错误消息。

谁能帮我解决这个问题？

体现在`DLC`

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.dlc"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="10" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter android:label="@string/app_name" android:icon="@drawable/ic_launcher" android:logo="@drawable/ic_launcher">
               <action android:name="com.dlc.MainActivity" />

               <category android:name="android.intent.DEFAULT" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

MainActivity(MinePedia)

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     Button button2 = (Button) findViewById(R.id.button1);
        button2.setOnClickListener(new OnClickListener() {          
            public void onClick(View v) {
                startActivity(new Intent(getApplicationContext(), MainActivity2.class));

            }
        });

        Button button9 = (Button) findViewById(R.id.info);
        button9.setOnClickListener(new OnClickListener() {          
            public void onClick(View v) {
                startActivity(new Intent(getApplicationContext(), AppInf.class));

            }
        });

        Button button91 = (Button) findViewById(R.id.dlc);
        button91.setOnClickListener(new OnClickListener() {         
            public void onClick(View v) {

                Intent i=new Intent("com.dlc.MainActivity.class"); startActivity(i);
            }
        });

        Button button96 = (Button) findViewById(R.id.help);
        button96.setOnClickListener(new OnClickListener() {         
            public void onClick(View v) {
                startActivity(new Intent(getApplicationContext(), Instruction.class));

            }
        });

        // this
        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

        int icon = R.drawable.launcher;        
        CharSequence tickerText = "MinecraftPedia"; // ticker-text
        long when = System.currentTimeMillis();         
        Context context = getApplicationContext();     
        CharSequence contentTitle = "MinePedia";  
        CharSequence contentText = "This is the quick launch button for MinePedia";      
        Intent notificationIntent = new Intent(this, MainActivity.class);
        PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
        Notification notification = new Notification(icon, tickerText, when);
        notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

        // and this
        final int HELLO_ID = 1;
        mNotificationManager.notify(HELLO_ID, notification);

} 
```

LOGCAT

```
08-17 02:39:26.573: E/AndroidRuntime(912): FATAL EXCEPTION: main
08-17 02:39:26.573: E/AndroidRuntime(912): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.dlc.MainActivity.class }
08-17 02:39:26.573: E/AndroidRuntime(912):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1622)
08-17 02:39:26.573: E/AndroidRuntime(912):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)
08-17 02:39:26.573: E/AndroidRuntime(912):  at android.app.Activity.startActivityForResult(Activity.java:3370)
08-17 02:39:26.573: E/AndroidRuntime(912):  at android.app.Activity.startActivityForResult(Activity.java:3331)
08-17 02:39:26.573: E/AndroidRuntime(912):  at android.app.Activity.startActivity(Activity.java:3566)
08-17 02:39:26.573: E/AndroidRuntime(912):  at android.app.Activity.startActivity(Activity.java:3534)
08-17 02:39:26.573: E/AndroidRuntime(912):  at com.shadycorp.minecraftrecipebook.MainActivity$3.onClick(MainActivity.java:59)
08-17 02:39:26.573: E/AndroidRuntime(912):  at android.view.View.performClick(View.java:4202)
08-17 02:39:26.573: E/AndroidRuntime(912):  at android.view.View$PerformClick.run(View.java:17340) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:54:52.817

显然，您正在尝试打开不同包中的活动。请参阅以下链接上的答案，了解如何实际执行此操作： [从不同的包启动活动](https://stackoverflow.com/questions/2741857/launch-activities-from-different-package)

# ios - 在接收触摸的 UIView 下缩放 UIScrollView

> ID：15860845
> 
> 赞同：1
> 
> 时间：2013-04-07T09:21:01.297
> 
> 标签：ios, uiscrollview, zooming, uigesturerecognizer, uipinchgesturerecognizer

有两种看法。

第一个`UIScrollView`是放置要缩放的视图的位置。
第二个是`UIView`可以处理水龙头的。

两个视图都附有手势识别器。

问题是，即使所有手势识别器都已关闭，滚动视图也不会缩放，直到我完全删除上面的视图（或设置它`userInteractionEnabled = NO`）。那么我怎样才能将触摸传递给滚动视图而不丢失其他识别器呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:15:37.290

我只是将滚动的手势识别器添加到这个自定义视图中

```
@implementation CustomView

- (void)overridePinchForScroll:(UIScrollView *)scroll
{
    [self addGestureRecognizer:scroll.panGestureRecognizer];
    [self addGestureRecognizer:scroll.pinchGestureRecognizer];
}

@end 
```

`Note.`您应该同时添加平移和捏合手势识别器，因为如果您只添加捏合识别器，则会引发错误：

`Ignoring call to [UIPanGestureRecognizer setTranslation:inView:] since gesture recognizer is not active.`

而且，当然，因此您仍然可以拖动缩放的内容。

# gcc - GCC 为架构 X 预定义的宏

> ID：15860850
> 
> 赞同：2
> 
> 时间：2013-04-07T09:22:09.667
> 
> 标签：gcc, cross-compiling, predefined-macro

我已经用谷歌搜索了 gcc 使用的每个架构的预定义宏列表，但没有成功。是否有这样的列表或者我是否需要 -dM 用于交叉编译器。

# jquery - 通过 jQuery 添加

> ID：15860851
> 
> 赞同：3
> 
> 时间：2013-04-07T09:22:10.550
> 
> 标签：jquery, dom, html-table, row, tablerow

我有一个问题，我不知道如何解决它：

我有一张桌子：

* * *

## | 一个 | 乙|

## | D | C |

```
<table>
<tr>
<td>
A
</td>
<td>
B
</td>
</tr>
<tr>
<td>
C
</td>
<td>
D
</td>
</tr>
</table> 
```

现在我需要`</tr><tr>`在每个奇数 td 之后添加。结果应该是一个列表：

* * *

## | 一个 |

## | 乙|

## | C |

## | D |

我已经在尝试使用 jQuery 进行这项工作`$("#table tr > td:nth-child(odd)").after("</tr><tr>");`，但它不起作用。

任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:31:23.663

尝试

```
$('table td:odd').each(function(i, v){
    var $this = $(this);
    var parent = $this.parent();
    $this.detach().wrap('<tr></tr>').insertAfter(parent)
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/jDWmL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:25:01.737

试试这个：（[http://jsfiddle.net/b5S3U/4/](http://jsfiddle.net/b5S3U/4/)）

```
var cols = 1;
$('tr').each(function () {
    var after = $(this);
    while ($(this).children().length > cols) {
        after = $('<tr>').insertAfter(after).append($('>:gt(' + (cols - 1) + '):lt(' + (cols) + ')', this));
    }
}) 
```

# java - 实例化对象 Java

> ID：15860853
> 
> 赞同：0
> 
> 时间：2013-04-07T09:22:54.820
> 
> 标签：java, object, loops, properties

假设我有 10 个对象。现在，我创建它们，存储它们的唯一方法是在该对象中创建一个包含某个值的字符串数组。我不会将实际对象本身存储在任何地方。有什么方法可以访问基于该字符串数组的对象吗？

```
String[] someArray = new String[10];

 some loop (i = 1 to 10)

       Object newObject = new Object("hello" + i);

       someArray[i] = newObject.returnSomeStringInTheObject();

repeat 
```

现在，我有一个字符串数组。例如，我可以访问在 i=3 创建的对象吗？

每个字符串都不一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T09:34:23.607

因为您的每个字符串都不同，所以我会使用一个映射，例如：

```
final Map<String, Object> someMap = new HashMap<String, Object>();

// some loop (i = 1 to 10)

   Object newObject = new Object("hello" + i);
   someMap.put(newObject.returnSomeStringInTheObject(), newObject);

// repeat 
```

然后，您可以使用地图从其“someString”中取回对象

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T09:34:15.160

保存一个将字符串从数组映射到实际对象的 HashMap 怎么样？如果您不在代码中的某处保留对该对象的引用，则垃圾收集器可能会将其从内存中删除，并且您无法控制此过程。即使当您想要访问它时它还没有被删除，您也没有可以使用的实际参考。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T09:33:19.437

当您在循环中进行下一次迭代时，您的对象将无法再访问，因此您无法以任何方式访问它。不过，您可以创建某种从对象类到字符串的转换器，反之亦然。这样，您将能够*重建*对象：

```
public getObjectFromString(String string) {
    return YourClass.createFromString(string);
}

public getStringFromObject(YourClass obj) {
    Return obj.toString();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T09:30:02.340

所以基本上你想将实例的字符串表示形式转换为对象。

覆盖类中的 toString 方法：这将创建对象的字符串表示。

```
public String toString(){
   return "attr1 :"+ value1
          + "; attr2 :"+ value2;  
} 
```

取回价值；您需要解析对象的字符串表示并创建新对象。

```
String x = someArray[i]; //read toString value from array 
```

在上述情况下，每个属性都用分号分隔。并且属性名和值用冒号(:)分隔。因此，您可以使用您的 String 实用程序进行解析。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-07T09:37:15.410

你问的是不可能的。一旦退出创建对象的循环，对象就会消失，除非您将它们存储在某个地方，您说您不能这样做。

但是，您可以构造一个与前一个对象相同的新对象

```
 class myObject {
     public myObject(String str){
          someStringInThisObject = str
     }
} 
```

然后，在您的主要课程中：

```
 myObject m = new myObject(someArray[i]); 
```

# jquery - 我如何通过 jquery 计算 20 之间的数字

> ID：15860856
> 
> 赞同：0
> 
> 时间：2013-04-07T09:23:29.667
> 
> 标签：jquery

我如何计算 <=20 之间的数字我想成为结果：3

td // 3

我的意思是如何找出 20 之间的数字中有多少 (td)

但是如何

**我试过这个**

```
var h =(this).length; 
```

但错误的结果

**jQuery**

```
 <script>
$(function(){
  $("#a tr").each(function(){
       var b = $(this).text();
       if(b <= 20){
         $(this).css("color","red");

         var h =(this).length; // How many numbers between b <= 20

         $("#c").text(h);

       }
  });
  });
</script>
</head> 
```

**身体**

```
<body>
<span>How many numbers <= 20 :</span><span id='c'></span>
<table id='a' border='2'>
<tr>
<td>5</td>
</tr>
<tr>
<td>2</td>
</tr>
<tr>
<td>17</td>
</tr>
<tr>
<td>30</td>
</tr>
<tr>
<td>31</td>
</tr>
<tr>
<td>31</td>
</tr>
</table>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:27:46.733

尝试：

```
$(function() {
    var res = 0;
    $('#a td').each(function() {
        if (parseInt($(this).text()) <= 20) {
            res++;
            $(this).css("color","red");
        }
    });

    $("#c").text(res);
}); 
```

# ios - 如何实现像纸一样的书视图翻转 53

> ID：15860864
> 
> 赞同：1
> 
> 时间：2013-04-07T09:24:25.470
> 
> 标签：ios, objective-c, core-animation, opengl-es-2.0

我想实现与论文 53 中相同的书籍视图功能。它就像一本书可以打开和翻转等等。

![](https://i.stack.imgur.com/44zCt.png)

我应该使用 OpenGL ES 还是 Core Animation 来实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:42:49.267

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T23:38:02.277

I too am looking for something like this and there a few awesome things about the Paper implementation that the commenter and answerers of this question are overlooking.

1) Page flipping in paper is inertial. Got a 100 page book? Flip through dozens of pages at once with a strong swipe of the finger. Just like a real book. I haven't seen any free libraries that do that.
2) Watch the paper animation carefully. Looks to me like it was done in open gl. I don't think i've seen any core animation examples this fast and smooth. I could be wrong, and I'd love to be wrong.
3) Note how in Paper you can see beyond the edges of the current page so that you know how much of the book is on either side of the page you're currently on. Just like in a real book. This is subtle but critical.

If anyone has an idea of a library that takes on some of these things, do let me know.

# javascript - 使用 javascript 添加表单数组值

> ID：15860867
> 
> 赞同：0
> 
> 时间：2013-04-07T09:24:46.480
> 
> 标签：javascript, forms, variables

我想创建一个将用户输入值和变量值添加在一起的表单。

例如，像这样：

```
array 1
value 1 = form.value1
value 2 = form.value2
value 3 = form.value3

array 2
value 1 = 10
value 2 = 20
value 3 = 30

form.answer = array1[i].value * array2[i] 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:36:21.457

我不确定你在问什么，也许是这个？

```
<form>
<select id="choose_month">
 <option value="1">January</option>
 <option value="2">February</option>
 <option value="3">March</option>
</select>
<select id="choose_year">
 <option value="2010">2010</option>
 <option value="2011">2011</option>
</select> 
```

```
function get_answer(){
answer = document.getElementById("choose_month").value + document.getElementById("choose_year").value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:48:51.943

```
 <form name="form1" action="">
       <input name="input1" type="text" value="text1">
       <input name="input2" type="text" value="text2">
    </form>

    <script>
       var arr1 = document.forms['form1'];
       var arr2 = [34, 567];
       alert(arr1[0].value+arr2[1]);

//Edited
       var sum = 0;            
       for(i=0; i<arr1.length; i++){
          sum += parseInt(arr1[i])*parseInt(arr2[i].value);
       }
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T10:41:53.770

尝试使用此代码：

```
var array1 = [4,5,6,7,8,9], array2 = [1,2,3,4,5,6,7]; 
var processValues = function() { 
var answer = null; 
    for (var i = 0; i < array1.length; i++) { 
        //answer += array1[i] * array2[i]; 
        // if your inputs are not numbers or are unparsed form fields
        // cast them into number
        answer += Number(array1[i]) * Number(array2[i]);             
    }
} 
```

这会将 1 个数组中的值与另一个数组中的值相乘，并将它们相加在变量 answer 中。在 array1 中存储您从表单中读取的值，在 array2 中存储您需要与它们相乘的值。

编辑：根据您的代码更新答案

您在代码中遗漏了一些内容：

1]您用于计算总计的点击处理程序没有表单作为参数。

```
 <input name="Calculate Total" type="button" id="Calculate Total" value="Calculate Total" onclick="Calc_totals(form);" /> 
```

2]您的变量不在 calc_totals 函数的范围内，请改用以下脚本块/优化它

```
var drink = new Array();
var units = new Array();
function Calc(form) {

    drink [0] = form.drink0.value;
    drink [1] = form.drink1.value;
    drink [2] = form.drink2.value;

    units [0] = 25;
    units [1] = 50;
    units [2] = 75;

    var number_units = new Array()
    form.units0.value = form.drink0.value * units[0];
    form.units1.value = form.drink1.value * units[1];
    form.units2.value = form.drink2.value * units[2]; 
}    
function Calc_totals(form) {
    var answerValue = 0; 
    for(i=0; i < units.length; i++) { 
    answerValue += Number(drink[i]) * Number(units[i]);
    } 
    form.total_units.value = answerValue;
} 
```

如您所见，最后一行显示 form.total_units.value ，这是您要添加单位而不是 form.answer.value 的地方，因为没有以 id 作为答案的输入字段。

# css - 网站上缺少 CSS

> ID：15860868
> 
> 赞同：0
> 
> 时间：2013-04-07T09:24:52.807
> 
> 标签：css, twitter-bootstrap

所以我使用引导程序和 HTMl 样板来启动一个站点。我在从引导程序中编写品牌类时遇到问题。在 main.css 我添加了一个 .navbar .brand 类，我正在尝试将浮动更改为顶部。当我在浏览器中加载我的网页时，main.css 中的 .navbar .brand 是空白的（根据 firebug）。我可以在使用萤火虫时将引导浮动值编辑到顶部，但我似乎无法使用自己的样式表覆盖。

```
 <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="css/main.css">        
    .
    .
    .
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="brand" href="">Alex</a> 
```

在 bootstrap.css 中

```
.navbar .brand {
  display: block;
  float: left;
  padding: 17px 20px 17px;
  margin-left: -20px;
  font-size: 20px;
  font-weight: 200;
  color: #ffffff;
  text-shadow: 0 1px 0 #013435;
} 
```

在 main.css

```
.navbar .brand {
  float: top;
} 
```

然后当我查看元素时在萤火虫中

```
.navbar .brand {        main.css (line 27)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:28:31.627

问题是`float:top`不是一个有效的规则。所以浏览器会识别选择器，但不会识别您应用的规则。

这些是 的可能值`float`：

*   `float: left`
*   `float: right`
*   `float: none`
*   `float: inherit`

有用的文章：[https ://developer.mozilla.org/en-US/docs/CSS/float](https://developer.mozilla.org/en-US/docs/CSS/float)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T09:30:48.473

`float`不可能`top`。浮动仅用于水平对齐项目。

也许`position:relative`+`position:absolute`技术会为你做：[定位绝对但相对于父](https://stackoverflow.com/questions/10487292/position-absolute-but-relative-to-parent)

# android - 何时取消注册 LocalBroadcastManager 接收器？

> ID：15860871
> 
> 赞同：2
> 
> 时间：2013-04-07T09:25:18.580
> 
> 标签：android, android-activity, android-lifecycle

有人可以给我一个如何在课堂上正确注销**`LocalBroadcastManager`接收者的例子吗？**`Activity`

Android 开发者培训建议这样做：

```
 @Override
    public void onPause() {
    super.onPause();  // Always call the superclass method first

    // When I should to unregister LocalBroadcastManager Receiver before or after super.onPause()?
} 
```

和

```
 @Override
    public void onDestroy() {

        // If the DownloadStateReceiver still exists, unregister it and set it to null
        if (mDownloadStateReceiver != null) {
            LocalBroadcastManager.getInstance(this).unregisterReceiver(mDownloadStateReceiver);
            mDownloadStateReceiver = null;
        }

        ...

        // Must always call the super method at the end.
        super.onDestroy();
    } 
```

我看到了谷歌的例子，但我不明白什么时候应该在之前或之后取消注册**`LocalBroadcastManager`接收器**`super.onPause();`以及在之前或之后的方法`onDestroy`中`super.onDestroy();`？

提前致谢！

**更新：**我在方法中 注册**`LocalBroadcastManager`接收器**`onResume()`！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-22T11:55:31.080

正如官方文档所说（[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)）：

> 如果在 Activity.onResume() 实现中注册接收器，则应在 Activity.onPause() 中取消注册。（暂停时您不会收到意图，这将减少不必要的系统开销）。不要在 Activity.onSaveInstanceState() 中取消注册，因为如果用户移回历史堆栈，则不会调用它。

此外，如果您的接收器在您的清单中静态声明，您不必担心注册/注销

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:31:10.253

这取决于您何时注册。基本上，如果您在 ie 中注册，`onResume()`那么您在`onPause()`. 如果您注册`onCreate()`然后取消注册`onDestroy()`。我建议使用`onResume()/onPause()`，除非你知道你需要其他方式，

并用于调用 super 的方法。在“创建”方法中，您**首先**`onCreate`调用 super 的方法。在像您这样的“破坏”方法中，将超级称为最后一件事。**`onDestroy`**

# weblogic - 如何在多个服务器上设置 WebLogic JVM 参数

> ID：15860873
> 
> 赞同：1
> 
> 时间：2013-04-07T09:25:35.720
> 
> 标签：weblogic, weblogic11g, jvm-arguments

我想为一些 WebLogic 托管服务器设置一个 JVM 参数。此参数在所有服务器上都是相同的。(-Dconfserver=11.1.1.1:6666)

我知道如何在单个服务器上设置它（在控制台“服务器启动”选项卡中），但是有 10 多个托管服务器，它们位于不同的机器上。我不想重复控制台操作或编辑启动 shell 脚本 10+ 次。有没有更好的方法来为所有托管服务器设置这个？

WebLogic 版本为 10.3.6 (11gR1)

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:03:13.913

如果您不想单独访问每个服务器。

您可以关闭管理服务器。

**然后仅在管理服务器**中编辑`config.xml`文件。

 **并将其添加`argument`到该文件中的每个`<server-start>`。

然后启动管理服务器，并重新启动服务器，他们将获得新的配置。**

# boost - Boost Graph 库的 Barnes-Hut 强制定向布局？

> ID：15860875
> 
> 赞同：3
> 
> 时间：2013-04-07T09:25:50.317
> 
> 标签：boost, graph, graph-algorithm, force-layout

boost 图形库用于有向图的默认 Fruchterman-Reingold 算法需要 O(n^2) 时间，是否有任何 O(n log n) 布局算法的实现，例如 Barnes-Hut for Boost Graph library？

# eclipse - Eclipse：如果通过 Eclipse IDE 部署，为什么 web 项目不显示在 web 应用程序文件夹下？

> ID：15860881
> 
> 赞同：0
> 
> 时间：2013-04-07T09:27:26.230
> 
> 标签：eclipse

我正在使用 Eclipse IDE（JUno 版本）

在 Eclipse IDE 服务器选项卡中，我配置了 Tomcat 7，然后创建了一个新的动态 Web 项目，然后通过添加和删除选项将 Web 项目添加到服务器选项卡中的 TOmcat 服务器。

请看下面的屏幕截图

我的问题是为什么我无法在 Tomcat 服务器的 webapps 文件夹下看到我的 Web 项目？

![在此处输入图像描述](https://i.stack.imgur.com/R4cSF.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:32:57.943

因为 Eclipse 告诉 Tomcat 在 Eclipse 编译 webapp 的目录中查找 webapp，以避免不必要的文件复制，并且能够更改 JSP 的内容并立即获得结果，而无需重新部署所有内容。

它显着加快了速度。

# meteor - 为什么流星 0.6.0 将所有内容都包装到 (function(){ ... })

> ID：15860890
> 
> 赞同：7
> 
> 时间：2013-04-07T09:28:31.780
> 
> 标签：meteor

从 0.6.0 版本开始，meteor 将每个 javascript 文件包装到 (function() { ... }) 中。这对我自己的 javascript 文件非常有意义。但不适用于第三方库。例如，我正在使用来自 crypto-js 的 sha3.js。这。位于客户端/库。这在 0.5.9 之前是完美的。但是现在，sha3 中的功能不再可用。

这个包装可以关掉吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T12:20:53.603

函数闭包最初是在服务器端（并且仅在服务器端）引入的，主要原因有两个：

*   作用域变量是避免变量冲突同时保持简单变量名称的好方法
*   该`Npm.require`功能在技术上需要它

Node/Meteor 的关键特性之一是能够在客户端和服务器上运行相同的文件。这就是为什么变量作用域需要在客户端和服务器上具有相同的行为，以及为什么 Meteor 现在也包括客户端上的函数闭包。

无法关闭包装（不更改`Meteor/tools`代码）。

[随着链接器分支](https://github.com/meteor/meteor/branches)上的工作将很快改善这种行为，它将自动解决您的文件依赖关系（基于变量名称），然后 1\. 以正确的顺序包含 javascript 文件 2\. 在全局范围内导出需要的变量。

现在，您必须手动导出需要在全局范围内的对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-28T06:06:55.233

您可以使用未记录的[`bare`](https://github.com/meteor/meteor/blob/38bd2c98bfa9add29eebf0615b8c69a8c32cd5bd/tools/packages.js#L326)选项（以前[`raw`](https://github.com/meteor/meteor/blob/38bd2c98bfa9add29eebf0615b8c69a8c32cd5bd/tools/packages.js#L737)）来`add_files`：

```
api.add_files([
  'sha3.js'
], 'client', {bare: true}); 
```

它不会包装添加的文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T12:19:52.360

[Meteor 0.6.0 引入了 NPM 兼容性](http://www.meteor.com/blog/2013/04/04/meteor-060-brand-new-distribution-system-app-packages-npm-integration)，因此人们终于可以正式使用通过流星包添加的[NPM 模块。](https://npmjs.org/)问题是，对于全局范围，在变量声明方面存在冲突，因为包基本上被视为项目中的文件

这只会影响服务器端代码，但是如果服务器端代码被限定了范围，那么客户端代码将不再兼容，因此客户端代码也被限定为一致性。

`@`解决方案是按照您的建议在咖啡脚本中通过添加或删除`var`javascript来全球化变量。

虽然我也发现这对几个客户端库（如 x-editable 和 ace 编辑器）感到沮丧，但正在使用流星上的分支开发一个很好的解决方案，`linker`以允许自动扫描文件以查找依赖项，然后自动正确地确定它们的范围。

对此有更多讨论：[https ://groups.google.com/forum/?fromgroups=#!topic/meteor-talk/gYgYhv88nB4](https://groups.google.com/forum/?fromgroups=#!topic/meteor-talk/gYgYhv88nB4)

# dotnetnuke - DNN 重定向循环 - 仅在管理屏幕上

> ID：15860894
> 
> 赞同：13
> 
> 时间：2013-04-07T09:28:59.130
> 
> 标签：dotnetnuke

我不明白这个问题。

提到此重定向问题的其他问题与门户别名和完全/med 信任级别等有关。

我有一个指向最近升级的 DNN 安装的 .net 4 Classic 池。

之前的版本是5.xxxx，现在我升级到了7.0.5

所有当前的 cms 页面都可以正常工作。当我进入管理部分，并在那里选择页面管理或主机部分中的主机设置时，我遇到了这个问题。

我知道 dnn 正在慢慢地沿着 MVC 路径走下去，虽然我仍然看到 .apx 扩展名四处飘荡，这意味着他们还没有完全兑现 seo 的东西，但我猜他们已经有 80% 了。

我不明白问题出在哪里。

几乎有一半的网站仍然使用 tabid=x 的想法，但一些管理屏幕使用更友好的 url 概念“/host/HostSettings//tabid/16/portalid/0/Default.aspx”一种友好的 url / MVC 概念。

是否有一个条目我可以编辑以将所有内容都包含在友好的 url 中，或者使用 tabid 概念的所有内容然后从那里继续前进？

还是重定向问题与友好的网址无关？

在这里我有点迷失了，即使在 DNN 开发多年之后......

提前致谢！

根据 Chris 的建议，我浏览了表格中的所有选项卡，并确保没有将任何内容设置为 isSecure=True。

仍然得到：错误 310 (net::ERR_TOO_MANY_REDIRECTS)：重定向太多。有没有办法在表格中关闭重定向？

我浏览了整个 hostSettings 和 PosrtalSettings 表，并将其与另一个工作系统进行了比较，但找不到任何明显的...

**已编辑**

现在关闭一些东西并将调试模式设置为true，我得到以下信息：

```
Server Error in '/cms' Application. 
```

你调用的对象是空的。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

源错误：

[没有相关的源代码行]

源文件：c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\cms\3fbf2a3e\66b53196\App_Web_xepmxekk.1.cs 行：0

堆栈跟踪：

[NullReferenceException：对象引用未设置为对象的实例。] DotNetNuke.UI.Containers.ActionBase.get_ModuleContext() +7 DotNetNuke.UI.Containers.ActionBase.get_ActionRoot() +30 DotNetNuke.UI.Containers.ActionBase.OnLoad （事件参数 e）+35

[ModuleLoadException: 发生错误。] DotNetNuke.Services.Exceptions.Exceptions.ProcessModuleLoadException(String FriendlyMessage, Control ctrl, Exception exc, Boolean DisplayErrorMessage) +397

[PageLoadException: 发生错误。] DotNetNuke.Services.Exceptions.Exceptions.ProcessPageLoadException(Exception exc, String URL) +417 DotNetNuke.Services.Exceptions.Exceptions.ProcessPageLoadException(Exception exc) +96 DotNetNuke.Services.Exceptions.Exceptions。 ProcessModuleLoadException(String FriendlyMessage, Control ctrl, Exception exc, Boolean DisplayErrorMessage) +548 DotNetNuke.Services.Exceptions.Exceptions.ProcessModuleLoadException(Control ctrl, Exception exc, Boolean DisplayErrorMessage) +188 DotNetNuke.Services.Exceptions.Exceptions.ProcessModuleLoadException(Control ctrl,例外）+40 DotNetNuke.UI.Containers.ActionBase.OnLoad(EventArgs e) +71 DotNetNuke.UI.WebControls.SolPartActions.OnLoad(EventArgs e) +13 System.Web.UI.Control.LoadRecursive() +54 System. Web.UI.Control。LoadRecursive() +145 System.Web.UI.Control.LoadRecursive() +145 System.Web.UI.Control.LoadRecursive() +145 System.Web.UI.Control.LoadRecursive() +145 System.Web.UI. Control.LoadRecursive() +145 System.Web.UI.Control.LoadRecursive() +145 System.Web.UI.Control.LoadRecursive() +145 System.Web.UI.Control.LoadRecursive() +145 System.Web. UI.Page.ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+772ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+772ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+772

[PageLoadException: 发生错误。] DotNetNuke.Services.Exceptions.Exceptions.ProcessPageLoadException(Exception exc, String URL) +417 DotNetNuke.Framework.PageBase.OnError(EventArgs e) +629 System.Web.UI.Page.HandleError(异常 e) +79 System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）+6695 System.Web.UI.Page.ProcessRequest（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）+245 System.Web.UI.Page.ProcessRequest () +72 System.Web.UI.Page.ProcessRequestWithNoAssert(HttpContext context) +21 System.Web.UI.Page.ProcessRequest(HttpContext context) +58 ASP.default_aspx.ProcessRequest(HttpContext context) 在 c:\Windows\Microsoft .NET\Framework\v4.0.30319\Temporary ASP.NET Files\cms\3fbf2a3e\66b53196\App_Web_xepmxekk.1.cs：0 System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +341 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +69

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.17929

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T02:49:02.343

你在这里问了很多问题。我会谈谈你的主题。

1）如果您在管理页面上看到重定向，请检查数据库，通常在旧升级中，这些管理页面上会设置“issecure”标志，这将导致奇怪的重定向。如果您有权访问数据库，只需查看 TABS 表。

2013 年 4 月 16 日更新您可以尝试一起禁用 FriendlyURL，看看这是否有助于您至少进入管理/主机页面。在数据库上尝试更新 hostsettings 中的 UseFriendlyUrl 设置，如果您的 web.config 中没有 ObjectQualifier，您可以使用此 SQL

```
update hostsettings
set SettingValue = 'N'

where settingname like 'usefriendlyurls' 
```

**更新** 根据更新的问题，我认为您有两个问题之一。皮肤由于使用 SolPart 菜单而出现问题，或者更有可能是您的 MODULE 容器在页面上出现问题。

我相信您说过您现在可以访问 ADMIN 页面，但不能访问子页面。我会将 Skin the Admin 页面（通过页面设置）设置为 Gravity Skins 之一（无论你喜欢哪个）。然后，一旦您保存了这些设置，请尝试将皮肤应用到所有子页面，看看是否正确设置了所有管理子页面上的皮肤。如果设置皮肤不起作用，请在管理页面上对容器尝试相同的设置。

如果这有效，那么您可能必须对 HOST 菜单执行相同的操作。尽管您可能需要通过数据库执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-06T14:40:57.077

肖恩，这个问题目前在哪里。最后我们谈到了我询问了 Admin urls 和 TabIDs。我建议您在“管理员”下找到一个页面，例如“站点设置”，并找出该页面的 TabID 是什么。

然后尝试访问[http://somedomain.com.blah/default.aspx?tabid=##](http://somedomain.com.blah/default.aspx?tabid=##)将 ## 替换为相关页面的 TabID 编号。让我们从那里开始，看看会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T07:58:31.310

升级到最新的 dnn 7.0.6 后，我可以进入站点设置页面。

我不确定为什么它在上次升级后停止工作，并且开始在下一次升级时工作。

但是有些页面变得不可编辑..

您编辑内容，点击保存，然后旧内容又回来了。

这又是一个烦人的问题。

我决定从头开始重建 CMS，并从头开始，因为我认为旧的 CMS 经历了太多的升级。

# linux - 在 UNIX 中实现 RBAC 功能

> ID：15860897
> 
> 赞同：0
> 
> 时间：2013-04-07T09:29:18.897
> 
> 标签：linux, security, unix, access-control, rbac

嘿，请帮我解决这个问题。我是 UNIX 系统的新手，我想问一下 UNIX 系统中是否可以进行基于角色的访问控制。请查看以下详细信息：

您的经理想要实现 RBAC 功能。您的商店使用 UNIX 系统。您没有可用的具有 RBAC 实现的系统。您可以使用 UNIX/LINUX 的基本功能进行访问控制。您还可以使用访问控制列表功能和 sudo。讨论使用您可以使用的工具实现 RBAC 功能可以走多远？哪些 RBAC 功能难以实现或不实用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:01:25.523

你可以看看 BeyondTrust 的 Power Broker——如果你可以购买解决方案（我不为他们工作）。

鲁汶大学也对此主题进行了相当多的研究。这是他们的论文：www.cosic.esat.kuleuven.be/sesame/papers/wetice97.pdf

他们会知道如何最好地在 UNIX 系统中实现 RBAC。

# java - 泛型方法中的泛型类

> ID：15860898
> 
> 赞同：5
> 
> 时间：2013-04-07T09:29:20.923
> 
> 标签：java, generics

我正在使用 Mockito 模拟框架来模拟 Java 中的泛型类。框架的用法从文档中似乎很清楚，我没有找到模拟泛型类的示例。模拟框架包含以下方法：

```
public static <T> T mock(Class<T> classToMock) {
    ...
} 
```

我有一个泛型类型`IState<StateId, Event>`，我想使用上述方法实例化它。我尝试了以下方法：

```
IState<StateId, Event> mockState = Mockito.mock(IState.class); 
```

我收到此代码的以下警告：

```
Type safety: The expression of type IState needs unchecked conversion to conform to IState<StateId,Event> 
```

我想我知道问题是什么。该`mock`方法返回一个类型`IState`，但我分配给的变量是一个专门的类型`IState<StateId, Event>`，所以我需要告诉它我正在创建的类是专门的`IState<StateId, Event>`，但我不知道它的语法是什么。我尝试了以下几种，但它们都给出了语法错误。

```
IState<StateId, Event> mockState = Mockito.mock(IState<StateId, Event>.class);
IState<StateId, Event> mockState = Mockito.mock(IState.class<StateId, Event>); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:13:19.880

java中的泛型是通过类型擦除实现的。这意味着编译器会检查参数化的类，但在运行时所有类都是“原始的”（出于追溯兼容性的原因）。这样做的结果是只有一个 Class 对象表示`IState`，而不是与所有可能的参数对应的无限数量的类。

要禁用警告，`@SuppressWarning("unchecked")`请在该行之前添加。

# python - 使用 openPyxl 在 xslx 中写入完整的一行

> ID：15860899
> 
> 赞同：1
> 
> 时间：2013-04-07T09:29:25.447
> 
> 标签：python, openpyxl

我需要使用 openpyxl 将数据覆盖到现有的 xslx 文件（一个工作表）中。我能够从 get_sheet_names 函数获取工作表。任何人都可以为我提供输入以使用 openpylx 将完整的行写入 xslx。我有列表格式的数据。它将对我有所帮助，因为我有 1000 多行。我试图搜索但没有找到任何正确的答案（python 和 openpyxl 的新手）

```
['0.', '   failed', '   failed', '   failed', '   failed', '   failed', '   failed', ' 3.957e-07', ' -40.0000', '1', '0.', '   failed', '   failed', '   failed', '   failed', '   failed', '   failed', ' 2.758e-02', ' -40.0000', '2', '0.', '   failed', '   failed', '   failed', '   failed', '   failed', '   failed', ' 2.758e-02', ' -40.0000', '1', '0.', '   failed', '   failed', '   failed', '   failed', '   failed', '   failed', ' 3.957e-07', ' -40.0000', '2'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:13:45.863

我已使用迭代将数据插入列表并使用行和列分配值

# javascript - 如何访问类中的所有元素？

> ID：15860903
> 
> 赞同：-2
> 
> 时间：2013-04-07T09:29:45.857
> 
> 标签：javascript, jquery

如何访问类中的元素`imagecontainerbox`？我想访问`previewimage1`,`previewimage2`和每一个这种类型的元素。

我试过`nth-child`了，但它不工作。它给了我预览 div 中的元素列表，而不是我想要的：

```
$('.imagecontainerbox:nth-child(0) img').attr(src);
$('preview').children('.imagecontainerbox:nth-child(0) img').attr(src); 
```

**HTML：**

```
<div id="preview" style="">

  <span id="text0"></span>
  <div id="previewimage1" class="imagecontainerbox" style="position:relative;padding:5px;margin:5px;width:515px;">
    <img src="undefined" class="realimage" id="image1" height="undefined" width="undefined" style="position:relative ;z-index:2px; border:5px solid #f8f8f8;border-radius:5px;padding:2px;">
    <img src="image/list/cancel1.png" style="float:right;padding:5px;position:absolute;top:10px;left:NaNpx;z-index: 1;" onclick="removeimage(this)">
  </div>

  <span id="text1">   </span>
  <span id="text2">   </span>
  <span id="text3">   </span>

  <div id="previewimage4" class="imagecontainerbox" style="position:relative;padding:5px;margin:5px;width:515px;">
    <img src="tempimage/MosLake1365324410.jpg" class="realimage" id="image4" height="666.66666666667" width="500" style="position:relative ;z-index:2px; border:5px solid #f8f8f8;border-radius:5px;padding:2px;">
    <img src="image/list/cancel1.png" style="float:right;padding:5px;position:absolute;top:10px;left:490px;z-index: 1;" onclick="removeimage(this)">
  </div>
  <span id="text4">   </span>

  <div id="previewimage5" class="imagecontainerbox" style="position:relative;padding:5px;margin:5px;width:515px;">
    <img src="tempimage/MosLake1365324416.jpg" class="realimage" id="image5" height="375" width="500" style="position:relative ;z-index:2px; border:5px solid #f8f8f8;border-radius:5px;padding:2px;">
    <img src="image/list/cancel1.png" style="float:right;padding:5px;position:absolute;top:10px;left:490px;z-index: 1;" onclick="removeimage(this)">
  </div>
  <span id="text5">   </span>

  <div id="previewimage6" class="imagecontainerbox" style="position:relative;padding:5px;margin:5px;width:515px;">
    <img src="tempimage/MosLake1365324421.jpg" class="realimage" id="image6" height="666.66666666667" width="500" style="position:relative ;z-index:2px; border:5px solid #f8f8f8;border-radius:5px;padding:2px;">
    <img src="image/list/cancel1.png" style="float:right;padding:5px;position:absolute;top:10px;left:490px;z-index: 1;" onclick="removeimage(this)">
  </div>
  <span id="text6">   </span>

  <div id="previewimage7" class="imagecontainerbox" style="position:relative;padding:5px;margin:5px;width:515px;">
    <img src="tempimage/MosLake1365324426.jpg" class="realimage" id="image7" height="375" width="500" style="position:relative ;z-index:2px; border:5px solid #f8f8f8;border-radius:5px;padding:2px;">
    <img src="image/list/cancel1.png" style="float:right;padding:5px;position:absolute;top:10px;left:490px;z-index: 1;" onclick="removeimage(this)">
  </div>
  <span id="text7">   </span>

  <div id="previewimage8" class="imagecontainerbox" style="position:relative;padding:5px;margin:5px;width:515px;">
    <img src="tempimage/MosLake1365324431.jpg" class="realimage" id="image8" height="666.66666666667" width="500" style="position:relative ;z-index:2px; border:5px solid #f8f8f8;border-radius:5px;padding:2px;">
    <img src="image/list/cancel1.png" style="float:right;padding:5px;position:absolute;top:10px;left:490px;z-index: 1;" onclick="removeimage(this)">
  </div>
  <span id="text8">   </span>

  <div id="previewimage9" class="imagecontainerbox" style="position:relative;padding:5px;margin:5px;width:515px;">
    <img src="tempimage/MosLake1365324440.jpg" class="realimage" id="image9" height="666.66666666667" width="500" style="position:relative ;z-index:2px; border:5px solid #f8f8f8;border-radius:5px;padding:2px;">
    <img src="image/list/cancel1.png" style="float:right;padding:5px;position:absolute;top:10px;left:490px;z-index: 1;" onclick="removeimage(this)">
  </div>
  <span id="text9">  asd</span>
</div> 
```

我正在使用这个 jQuery：

```
var image = $('#preview').children('.imagecontainerbox').length;
var imagesrc = $('#preview  .imagecontainerbox:nth-child('+image+') img').attr('src');

for(var i = 1; i <= image; i++) {

  if($(it).siblings('.realimage').attr('src') == $('.imagecontainerbox:nth-child('+i+')   img').attr('src')) {
    num = i;
    var p = $('#preview').children('.imagecontainerbox:nth-child('+i+')').attr('id');
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:31:14.530

只需使用[带有](http://api.jquery.com/attribute-starts-with-selector/)选择器的字符串：

```
$("div[id^='previewimage']) 
```

此选择器将选择具有指定属性的元素，其值恰好以给定字符串开头，`previewimage`在您的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:37:35.050

尝试使用：

```
$('#preview > .imagecontainerbox').each(function(){
    var $container = $(this);
    var containerID = $container.attr('id');
}) 
```

这样你就可以获得该类的所有元素的 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T10:20:23.963

在您的方法中，您可以使用或`removeimage()`获取包装`imagecontainerbox`元素的 ID`parent()``closest()`

```
function removeimage( element){
   alert( $(element).parent().attr('id') );

       /* or */
    alert( $(element).closest('.imagecontainerbox').attr('id') );  

} 
```

显示的大部分代码都没有什么意义，所以仍然不完全清楚你要做什么

# c# - 图像处理识别物体数字

> ID：15860906
> 
> 赞同：0
> 
> 时间：2013-04-07T09:29:57.587
> 
> 标签：c#, .net, image, aforge

需要帮助实现从图像中识别字符。例如我有 ![在此处输入图像描述](https://i.stack.imgur.com/5cWrt.png)

如何识别 142 489

1\. 为每个数字制作图像，映射 0 -> [像 0 的图像]、1 -> 像 1... 等等。
2\. 只制作图像线条，我的意思是
![在此处输入图像描述](https://i.stack.imgur.com/RAb1S.png)

并与案例 1 中的图像或案例 2 中的“骨架”进行比较。如何实现其中一种方法？在 C# 中使用 Aforge；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:32:57.947

这不是一个微不足道的问题，因此您最好检查现有的实现，例如[Tesseract 的 .NET 包装器](http://code.google.com/p/tesseractdotnet/)。

# django - Django中的翻译是greenlet安全的吗？

> ID：15860909
> 
> 赞同：0
> 
> 时间：2013-04-07T09:30:25.393
> 
> 标签：django, internationalization, gevent, gunicorn

在查看了 Django 的源代码后，我看到 Django 将活动语言存储在当前线程中。

在`django.utils.translation.trans_real`：

```
_active = local()
...
def activate(language):
    """
    Fetches the translation object for a given tuple of application name and
    language and installs it as the current translation object for the current
    thread.
    """
    _active.value = translation(language) 
```

这一切都很好，但我不确定它是否是绿色安全的？我正在使用 gunicorn 运行 Django，配置为运行“绿色”gevent 工作人员。`local()`猴子补丁是gevent吗？或者是否存在竞争条件，在使用 gevent 时可能会使用另一个请求的活动语言来服务请求？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:44:45.053

好吧，没关系，我在[gevent 的文档](http://www.gevent.org/gevent.monkey.html)中找到了答案：**thread-local storage 被 gevent 打了猴子补丁，变成了 greenlet-local storage**。所以一切都应该是安全的。

这是详细信息：

*   gevent 的`patch_thread()`功能补丁`thread`和`threading`模块，包括补丁使线程本地存储成为greenlet本地存储。
*   gevent 的`patch_all()`函数调用`patch_thread()`。
*   `patch_all()`gunicorn在启动 gevent worker 时调用 gevent 的函数。

# php - printf函数将变量传递给javascript

> ID：15860911
> 
> 赞同：-3
> 
> 时间：2013-04-07T09:30:32.353
> 
> 标签：php, javascript

```
 <script language="JavaScript" type="text/javascript">
      function set(n) {

         alert(n);
        document.forms[0].submit();    
      }
    </script>

 $a='A0001';

 printf('<input type="button" value="Delete" onclick="set(%g);"/>', $a); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:33:56.843

`%g`是数字，你的数据包含一个数字，但也有字母，所以你需要一个字符串。改为使用`%s`。

然后PHP会输出：

```
<input type="button" value="Delete" onclick="set(A0001);"/> 
```

你没有调用变量`A0001`，所以你正在传递`undefined`。

大概你想把值作为一个字符串，所以它需要被引用。该`json_encode`函数会将数据结构转换为适合传递给 JavaScript 的数据结构。该`htmlspecialchars`函数将制作一些适合放置在 HTML 属性值中的文本。

```
printf('<input type="button" value="Delete" onclick="set(%s);"/>', htmlspecialchars(json_encode($a))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:40:35.140

您需要使用`%s`包含数字和字母数字字符的变量。

遵循以下代码：

```
<script language="JavaScript" type="text/javascript">
  function set(n) {
     alert(n);
    document.forms[0].submit();    
  }
</script>

<?php
$a='A0001';
printf('<input type="button" value="Delete" onclick="set(\'%s\');"/>', $a);
?> 
```

这是一个测试版本。

# svn - SVN diff 显示变化，SVN merge 没有

> ID：15860914
> 
> 赞同：1
> 
> 时间：2013-04-07T09:30:49.873
> 
> 标签：svn

多年后我回到了 SVN，我正在努力解决分支/合并问题。我在 linux 机器上有以下测试设置，我正在使用命令行：

项目

*   树干
*   分支
*   标签

我在 ~/workingcopy 和 ~/workingcopybranch 中有分支和主干的本地工作副本

出于测试目的，我导入了一个 SeamT​​est 项目。两个工作副本目前都处于修订版 14。所有内容都提交回存储库

这是我的差异的结果：

```
~/workingcopy/SeamTest $ svn diff http://localhost/svn/myproject/branches/heidisbranch/SeamTest http://localhost/svn/myproject/trunk/SeamTest
Index: WebContent/home.xhtml
===================================================================
--- WebContent/home.xhtml   (.../branches/heidisbranch/SeamTest)    (Revision 14)
+++ WebContent/home.xhtml   (.../trunk/SeamTest)    (Revision 14)
@@ -8,7 +8,6 @@
     xmlns:rich="http://richfaces.org/rich"
     template="layout/template.xhtml">
 <!-- testing -->
-<!-- adding info into branch code-->
     <ui:define name="body">

         <h1>Welcome to Seam!</h1>
Index: .
===================================================================
--- .   (.../branches/heidisbranch/SeamTest)    (Revision 14)
+++ .   (.../trunk/SeamTest)    (Revision 14)

Eigenschaftsänderungen: .
___________________________________________________________________
Added: svn:mergeinfo 
```

如您所见，注释“将信息添加到分支代码中”在分支中，注释“测试”在主干中

然后，当我从主干工作目录执行 SVN 合并时，它似乎没有发现存在差异：

```
~/workingcopy/SeamTest $ svn merge http://localhost/svn/myproject/branches/heidesbranch/SeamTest http://localhost/svn/myproject/trunk/SeamTest .
-- Zusammenführen der Unterschiede zwischen Projektarchiv-URLs in ».«:
 G   .
--- Eliding mergeinfo from '.':
 U   .
-- Aufzeichnung der Informationen für Zusammenführung zwischen Projektarchiv-URLs in ».«:
 G   . 
```

我的项目的工作副本没有任何更改。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:30:13.630

交换两个参数，即以下应该适用于您的情况：

```
$ svn merge http://localhost/svn/myproject/trunk/SeamTest \
     http://localhost/svn/myproject/branches/heidesbranch/SeamTest . 
```

但是：您没有提到您想要实现的目标。如果您是 SVN 初学者，那么您确实不太可能这样做。SVN 中有四种不同形式的合并操作：

*   同步合并
*   樱桃选择合并
*   重新融合
*   2-URL 合并

您正在使用最后一个，仅用于特殊情况。您通常应该使用其他更易于使用的表单。我强烈建议阅读一些关于在 SVN 中处理功能和发布分支的文档。

# java - 使用 jar 作为 maven 的资源

> ID：15860918
> 
> 赞同：0
> 
> 时间：2013-04-07T09:31:10.493
> 
> 标签：java, maven, jar

我有与问题相同的问题[Reference jars inside a jar](https://stackoverflow.com/questions/12357136/reference-jars-inside-a-jar)。我有一个 jar 包含我的应用程序的图标。该罐子位于`src/main/ressources`. 在构建 maven 上，将这个 jar 原样放入应用程序 jar 中（所以我在 jar 中有一个 jar）。因此我不能再引用 icons.jar 中的文件了。

处理这种情况的推荐方法或最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T09:40:51.807

我会在类路径上使用这个 jar（作为依赖项），你应该能够从那里引用你的图标。这或多或少是在带有 JS/Css/images的 webjars（参见[http://www.webjars.org/ ）中所做的](http://www.webjars.org/)

# php - move_uploaded_file()：无法将“/tmp/phpiS3dQA”移动到“/var/www/html/mysite/uploads/PNGWallpaper.png”

> ID：15860920
> 
> 赞同：4
> 
> 时间：2013-04-07T09:31:22.163
> 
> 标签：php, apache, file-upload, upload, fedora

我正在使用 Fedora 16、PHP5.x 和 Apache2.x

```
$target_path = "/var/www/html/mysite/uploads/";
$target_path = $target_path . basename( $_FILES['photo_video']['name']); 
if(move_uploaded_file($_FILES['photo_video']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['photo_video']['name']). 
    " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
} 
```

当我尝试上传时，我总是收到消息：

> 警告：move_uploaded_file(/var/www/html/mysite/uploads/PNGWallpaper.png)：无法打开流：/var/www/html/mysite/modules/content/cj_c.php 第 44 行调用堆栈中的权限被拒绝： 0.0002 132524 1\. {main}() /var/www/html/mysite/index.php:0 0.0016 153684 2\. include_once('/var/www/html/mysite/modules/content/cj_c.php') /var /www/html/mysite/index.php:36 0.0022 160500 3\. move_uploaded_file() /var/www/html/mysite/modules/content/cj_c.php:44 警告：move_uploaded_file()：无法移动'/tmp/ phpiS3dQA' 到 '/var/www/html/mysite/uploads/PNGWallpaper.png' 在 /var/www/html/mysite/modules/content/cj_c.php 第 44 行调用堆栈：0.0002 132524 1\. {main}( ) /var/www/html/mysite/index.php:0 0.0016 153684 2\. include_once('/var/www/html/mysite/modules/content/cj_c.php') /var/www/html/mysite/index .php:36 0.0022 160500 3。move_uploaded_file() /var/www/html/mysite/modules/content/cj_c.php:44 上传文件出错，请重试！

文件或文件夹权限：

```
drwxrwxrwx. 465 root root 36864 Apr  6 23:20 tmp
drwxrwxrwx. 2 knel knel 4096 Apr  6 22:47 uploads 
```

php.ini

```
file_uploads = On
max_file_uploads = 20 
```

检查什么用户 php 正在运行

```
php> echo exec('whoami');
knel 
```

谁能给我建议解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T09:44:18.807

权限被拒绝意味着运行 PHP 的用户对目标路径 (/var/www/html/mysite/uploads/) 中的目录之一没有写入权限

您可以使用[此](https://superuser.com/questions/385125/command-to-list-permission-of-file-and-all-folders-from-root-to-the-files-path)工具检查到目标目录的完整路径的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T13:37:17.723

我遇到过同样的问题。

我的解决方案：确保目标文件夹具有“x”权限（ 700 ），而不仅仅是写权限。

# webdriver - 需要使用硒单击图像之间的特定位置

> ID：15860922
> 
> 赞同：1
> 
> 时间：2013-04-07T09:31:32.757
> 
> 标签：webdriver, selenium-webdriver

我有一个场景，我需要单击图像之间的特定位置。在通过 Firebug 分析时，它显示为图像并将 id 指定为“Panel_”

```
Actions builder = new Actions(driver); 

// taking mouse to 00   
builder.moveByOffset(0,0).build().perform();

// then clicking on the x y cords of the image. This XY i have taken from one tool.    
builder.moveByOffset(1076,560).click().build().perform(); 
```

或者

```
WebElement target = driver.findElement(By.id("Panel_"));
Actions builder = new Actions(driver);    
int clickAtX = 1076;     
int clickAtY = 560;     
builder.moveToElement(target,clickAtX,clickAtY).click().build().perform(); 
```

但是两个代码片段都没有帮助我。有时它会说点击页面范围之外。我使用“Mofiki 的坐标查找器”工具来获取 xy 坐标。

**有没有其他方法可以做到这一点？**

# ruby-on-rails - Rails：覆盖 twitter-bootstrap-rails 的生成器？

> ID：15860925
> 
> 赞同：0
> 
> 时间：2013-04-07T09:31:36.660
> 
> 标签：ruby-on-rails, twitter-bootstrap

我如何覆盖/自定义`rails g bootstrap:themed [RESOURCE_NAME]`在 twitter-bootstrap-rails gem 中执行时使用的模板？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:51:13.337

如果您查看 gem（`bundle open twitter-bootstrap-rails`或者查看 GitHub 站点 - [https://github.com/seyhunak/twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails)），您会看到 /lib/generators/bootstrap/ 中有生成器模板主题/模板。

您可以通过在您的应用程序中使用不同的版本来覆盖这些内容。确保使用相同的目录结构。

更新

模板需要存在`lib/templates/bootstrap/themed`

# android - 在 Android 中完成异步任务后使用大量数据更新 Ui 的最佳实践

> ID：15860929
> 
> 赞同：1
> 
> 时间：2013-04-07T09:32:08.347
> 
> 标签：android, user-interface, android-asynctask

UI 更新发生在 asynctask 的 onPostExecute() 内。因此，当必须将大量数据更新到 UI 上时，似乎会出现轻微的 UI 挂起，或者在我的情况下是由没有异步任务更新的。

要重现此问题，请使用大量异步任务将数据添加到选项卡式活动中的多个片段。让每个选项卡具有相同的片段，其中包含更新数据的列表。

当异步任务正在执行并且您尝试切换选项卡时，效果很明显。（我的whats应用程序也有这个问题，而我一次就收到了1000多条消息）

处理大数据更新ui时的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:42:24.163

最佳做法是“不要”。

屏幕能放多少数据？如果是图像：几 MB，如果是文本：几 kB。

不要更新用户没有看到的任何内容。将您需要的所有数据保留在模型中，并仅在可见时更新。ListView 和 Adapter 就是一个很好的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T09:43:56.577

使用数据库来保存您的数据。填充数据库没有问题`onBackground()`，如果只说 6 或 10 条消息一次适合屏幕，那么用 1000 条消息填充 UI 也没有任何意义

# c++ - toUTF8String 和本地引用

> ID：15860930
> 
> 赞同：1
> 
> 时间：2013-04-07T09:32:14.853
> 
> 标签：c++, icu

[http://www.icu-project.org/apiref/icu4c/classicu_1_1UnicodeString.html#a05777d826515a20a0b2bb8f4108f9348](http://www.icu-project.org/apiref/icu4c/classicu_1_1UnicodeString.html#a05777d826515a20a0b2bb8f4108f9348)

StringClass & toUTF8String (StringClass &result) 常量

将 UnicodeString 转换为 UTF-8 并将结果附加到标准字符串。

参数： result 附加了 UTF-8 版本字符串的标准字符串（或兼容对象）。

返回： 字符串对象。

```
// My own function.
string toStdString(const UnicodeString& a_str)
{
    string str;
    a_str.toUTF8String(str);
    return (str);
}
int main (void)
{
    string a = toStdString("a");
    string b = toStdString("b");

    cout << "a:" << a << endl; // a
    cout << "b:" << b << endl; // b

    const char* a1 = toStdString("a").c_str();
    const char* b1 = toStdString("b").c_str();

    cout << "a1:" << a1 << endl; // b !!! Problem: Why not "a"?
    cout << "b1:" << b1 << endl; // b

    const char* a2 = a.c_str();
    const char* b2 = b.c_str();

    cout << "a2:" << a2 << endl; // a
    cout << "b2:" << b2 << endl; // b

    return (0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:48:43.773

该函数`toStdString`返回一个临时值，如果你不将它存储在某个地方，它就会消失。

在这份声明中

```
const char* a1 = toStdString("a").c_str(); 
```

您将指针存储到此临时对象中。在语句结束时，这个临时字符串再次被销毁，指针不指向任何地方。

稍后尝试使用指针会导致未定义的行为，并且任何事情都可能发生，包括显示其他字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:53:59.273

它与 ICU 无关，而是您正在存储指向临时对象的指针。你打电话时

```
const char* a1 = toStdString("a").c_str(); 
```

`toStdString`返回一个`string`对象，然后调用int `c_str`，它返回一个指向其内容的*临时指针。*对象销毁后`string`，指针无效，不应使用。在您的情况下，下一次调用`c_str`可能返回完全相同的指向临时对象的指针，覆盖前一个。

# actionscript-3 - 加载图像并在单击按钮时准备好

> ID：15860937
> 
> 赞同：0
> 
> 时间：2013-04-07T09:32:31.263
> 
> 标签：actionscript-3, flash

我正在尝试通过使用 XML 作为我的“数据库”来改进我的代码，从而可以轻松添加删除图像。

在我这样做之前是导入图像，然后将其添加到为动作脚本导出的影片剪辑中，然后当单击按钮时找到该影片剪辑并将其添加到要使用的舞台。

对于新的 XML 方式，我试图尽可能地保持这种相似性。

我可以导入我的 XML，然后找到图像并使用它准备好：

```
 function importXML(){
        var loadXML:URLLoader = new URLLoader();
        loadXML.load(new URLRequest("../xml/images.xml"));
        loadXML.addEventListener(Event.COMPLETE, processXML);
    }

    function processXML(e:Event):void{
        imageXML = new XML(e.target.data);
        var image   = imageXML.image.(@name=="image1").image;
        trace(image);
        importImage(image);
    }

   function importImage(imageName:String) {
        var loadIMG = new Loader();
        var url     = "../images/last_steps/"+imageName;
        var url_req:URLRequest = new URLRequest(url);
        loadIMG.load(url_req);
        loadIMG.name = "image1";

    } 
```

现在我尝试给它一个名字，以便在点击时运行的功能可以工作：

```
 function myButtonClick(ev:MouseEvent):void
    {
        addImage("image1");
    }

    function addImage(image:String)
    {
        var imageName = image;
        var imageClass:Class = getDefinitionByName(imageName) as Class;

         addChild(imageClass);
    } 
```

最后一个函数在我手动将它添加到movieClip时会起作用，但现在它不起作用我也试过了：

```
 function addImage(image:String)
    {
        var imageName = image;
        // var imageClass:Class = getDefinitionByName(imageName) as Class;

        addChild(imageName);
    } 
```

这也不起作用。

总结一下我的问题是如何在单击按钮时将通过 XML 导入的图像链接到名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:28:29.017

最好的方法是简单地 onComplete function() 将事件侦听器添加到按钮实例，然后您可以添加Child，在这种情况下，图片将始终准备好

# mysql - 我应该在每次插入/更新 mysql 时锁定表吗

> ID：15860938
> 
> 赞同：-1
> 
> 时间：2013-04-07T09:32:34.560
> 
> 标签：mysql, sql

在每次插入和/或更新时锁定表是常态吗？

如果是，为什么？为了避免重复的确切时间添加？还有其他原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:38:30.460

不，您绝对不应该在每次插入或更新时锁定表。

数据库本身会自动锁定保持数据完整性所需的表部分。为单个插入或更新锁定整个表只会使锁定大于必要。

锁定表可以用作事务的替代方法，并且当您需要对相互依赖的表执行多个操作时会使用它。

# javascript - 管理 CommonJS 模块的问题

> ID：15860939
> 
> 赞同：0
> 
> 时间：2013-04-07T09:32:48.497
> 
> 标签：javascript, memory, titanium, commonjs

我正在使用 Titanium Appcelerator 使用 JavaScript 开发应用程序。他们建议使用 CommonJS 方法。可以在[此处](http://docs.appcelerator.com/titanium/latest/#!/guide/CommonJS_Modules_in_Titanium)找到有关 CommonJS 的简短示例。

对于我的生活，我仍然无法弄清楚如何构建我的代码。

例子：

```
/* Homescreen.js */
exports.createHomescreen = function () {

    //load all required modules first
    var videoPlayer = require('ui/videoPlayerModule');

    var self = Ti.UI.createWindow({
        width:'100%',
        height:'100%'
    })

    var newPlayer = videoPlayer.createPlayer({
        width:100
        height:50
    });

    self.add(newPlayer);
    return self;
} 
```

视频播放器模块

```
/* videoPlayerModule.js */
exports.createPlayer = function (object) {

    //load all required modules first
    var self = Ti.UI.createWindow({
        width:object.width,
        height:object.height
    });

    var exitVideoButton = Ti.UI.createButton({
        width:100,
        height:50
    });

    exitVideoButton.addEventListener('click',function(e){
        self.close();    //When this window is closed, the memory isn't freed.
        self = null;     //Still the memory isn't cleared
    });

    self.add(exitVideoButton);

    return(self);
} 
```

我遇到内存分配问题，因为每当我加载 videoPlayer 并关闭它时，内存永远不会被清除。如果我再次打开 videoPlayer，内存将再次分配。因此，每次启动 videoPlayer 时，我的应用程序的内存使用量都会增加。

我知道我的思维方式不对。我在这里忽略了一些非常简单的事情。谁能让我知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:40:35.773

发生这种情况是因为您将一个`Ti.UI.Window`（从 videoPlayerModule.js 创建）添加到另一个`Ti.UI.Window`（在 Homescreen.js 中），您不应该这样做。`Ti.UI.Window`是一个基础容器对象，你永远不会将它添加到任何东西（通常），所以当你关闭窗口时，它仍然作为容器窗口的子对象之一被引用，所以它永远不会消失。你`self = null;`此时什么都不做。

您需要用视图替换视频播放器中的窗口，我会尝试这样的事情：

```
/* videoPlayerModule.js */
exports.createPlayer = function (object) {

    var self = Ti.UI.createView({
        width:object.width,
        height:object.height
    });

    var exitVideoButton = Ti.UI.createButton({
        width:100,
        height:50
    });

    exitVideoButton.addEventListener('click',function(e){
        self.hide();
    });

    self.add(exitVideoButton);

    return(self);
} 
```

这不是一个完整的解决方案，因为您仍然可以在内存中查看视图，但它的占用空间比完整的窗口要小得多，更好的方法是创建一次，然后`show()`或`hide()`在需要时创建它主屏幕的上下文，另一种方法是传递父级，然后在退出时从其父级中删除视图，但这可以解决您的内存问题。

# encryption - 实现 RSA_public_decrypt，或加密验证，内核模式

> ID：15860948
> 
> 赞同：0
> 
> 时间：2013-04-07T09:33:20.897
> 
> 标签：encryption, rsa, kernel-mode

我想检查一个字符串是否被 RSA 算法加密。这个加密检查器必须在内核模式下实现，而且比它必须在 Win XP 中编写更糟糕。我研究了 OpenSSL，尤其是它的 RSA_public_decrypt，但这个函数只在用户模式下工作，不幸的是我没有看到代码。我应该使用给定的公钥和签名验证文本。我不想从头开始实现它，因为我必须用乘以大的数字来操作。

任何一点建议都会很明显

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-30T01:03:48.617

> 我想检查一个字符串是否被 RSA 算法加密...

好吧，一旦加密，它应该与随机数据无法区分。这就是所谓的 PRP 安全概念。所以你应该无法判断它是随机的、在 AES 下加密、在 RSA 下加密等。

*如果*消息不是随机数据，我认为您唯一可以对数据说的是“未加密” 。

# c# - 用月份和数字填充组合框

> ID：15860954
> 
> 赞同：4
> 
> 时间：2013-04-07T09:34:08.347
> 
> 标签：c#, wpf, combobox

我正在开发一个 WPF 项目，我有一个月份组合框，它应该包含从一月到十二月的几个月。我通过以下代码片段设法做到了；

```
var americanCulture = new CultureInfo("en-US");
ddlMonth.Items.AddRange(americanCulture.DateTimeFormat.MonthNames); 
```

并得到列表；

```
January
February
March
.... 
```

但我希望它们填充为 ;

```
01 - January
02 - February
03 - March
..... 
```

任何想法如何进行 for 循环？我是 C# 的新手。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T09:40:11.070

```
 var americanCulture = new CultureInfo("en-US");
      var count = 1;
      //.Take(12) in the foreach below because apparantly MonthNames returns 13
      //elements of which the last one is empty
      foreach (var month in americanCulture.DateTimeFormat.MonthNames.Take(12))
      {    
      DropDownList1.Items.Add(new ListItem{Text = count.ToString("00") + "-" + month});
      count++;
      } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T18:03:04.143

诺。你为什么在后台做。利用 wpf 并使用 xaml。

让我试着解释一下如何做到这一点。

1.  首先为 Months 创建一个依赖属性。如果您没有使用依赖属性。您现在应该研究它们[http://wpftutorial.net/DependencyProperties.html](http://wpftutorial.net/DependencyProperties.html)。在下面的代码中，我通过 new PropertyMetadata(new CultureInfo("en-US").DateTimeFormat.MonthNames.Take(12).ToList())) 将属性的默认值设置为月份列表。所以现在我们可以从 xaml 中获取这个属性。

    ```
    public partial class MainWindow : Window
    {
    public static readonly DependencyProperty MonthsProperty = DependencyProperty.Register(
        "Months", 
        typeof(List<string>), 
        typeof(MainWindow), 
        new PropertyMetadata(new CultureInfo("en-US").DateTimeFormat.MonthNames.Take(12).ToList()));

    public List<string> Months
    {
        get
        {
            return (List<string>)this.GetValue(MonthsProperty);
        }

        set
        {
            this.SetValue(MonthsProperty, value);
        }
    }
    public MainWindow()
    {
        InitializeComponent();            
    } 
    ```

    }

2.  你需要一个转换器。 [http://wpftutorial.net/ValueConverters.html](http://wpftutorial.net/ValueConverters.html)如果不熟悉它们。转换器要做的是对于列表中的每个值，我们将修改字符串以获得所需的结果。因此，为值转换器创建一个新类。

    ```
    [ValueConversion(typeof(List<string>), typeof(List<string>))]
    public class MonthConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
        //get the list of months from the object sent in    
        List<string> months = (List<string>)value;

        //manipulate the data index starts at 0 so add 1 and set to 2 decimal places
        if (months != null && months.Count > 0)
        {
            for (int x = 0; x < months.Count; x++)
            {
                months[x] = (x + 1).ToString("D2") + " - " + months[x];
            }
        }

        return months;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion 
    ```

    }

3.  在 xaml 中设置它。为您的窗口创建一个名称，即 x:Name="testWindow"，这样可以在绑定时更好地访问它。设置您的命名空间，以便您可以获取转换器。xmlns:Main="clr-命名空间:WpfApplication4"。将转换器添加到资源中，. 在组合框中，将 itemssource 绑定到您的依赖属性 Months 并通过转换器发送。

    ```
    <Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Name="testwindow"
        xmlns:Main="clr-namespace:WpfApplication4"
        Title="MainWindow" Height="350" Width="525">

        <Window.Resources>
            <Main:MonthConverter x:Key="MonthConverter"/>
        </Window.Resources>

        <Grid>
            <ComboBox ItemsSource="{Binding ElementName=testwindow,Path=Months, Converter={StaticResource MonthConverter}}" HorizontalAlignment="Left" Margin="197,107,0,0" VerticalAlignment="Top" Width="120"/>

        </Grid>
    </Window> 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T09:40:28.030

尝试这个：

```
 List<string> names = new List<string>();
        int num = 1;
        foreach (var item in americanCulture.DateTimeFormat.MonthNames)
        {
            names.Add(string.Format("{0} - {1}", num++.ToString("D2"), item));
        }
        ddlMonth.Items.AddRange(names); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-07T09:40:35.200

最好的方法是为当天设置一个组合框，为当月设置一个组合框。

[填充月份和日期](https://stackoverflow.com/questions/1432243/populating-month-and-day)

用途

```
for (int i = 1; i <= DateTime.DaysInMonth(year, month); i++) {
    cmbDay.Items.Add(i.ToString());
} 
```

# javascript - 使用 javascript 和 jQuery 循环回答

> ID：15860959
> 
> 赞同：1
> 
> 时间：2013-04-07T09:34:49.420
> 
> 标签：javascript, jquery, object, loops

这是我的代码：

```
$(document).ready(function () {
    $("input").focus(function () {
        $(this).css('outline-color', '#559FFF');
        $(this).blur(function () {
            $(this).css("outline-color", "#FF0000");
        });
    });
    $("input").click(function () {
        var value = $(this).val(function () {
            $(this).html("");
        });
    });
    $(".awesome").click(function () {
        var toStore = $("input[name=name]").val();
        if (!/^[A-Za-z]+ [A-Za-z]+$/.test(toStore)) {
            alert("You Must Put a Valid Name");
        } else {
            $("#contain").children().fadeOut(1000);
            $("#contain").delay(1000).queue(function () {
                $("#contain").append("<h1>Welcome to My Quiz : " + toStore + "</br>" +
                    "Youll Get 10 Questions To Answer </br> " +
                    "Here Is the First One:Who is Prime Minister of the United Kingdom? </h1>");

                var allQuestions = {
                    outquestions:{
                        question1 : {    quest: "Who is Prime Minister of the United Kingdom?",
                            choices: ["David Cameron","Gordon Brown","Winston Churchill","Tony Blair"],
                            correctAnswer: "David Cameron"},
                        question2 : {    quest: "whats dad name?",
                            choices: ["David ","Gordon ","Winston ","Tony "],
                            correctAnswer: "David"}
                    },
                    correctAnswers: 0
                };

                var outquestions = allQuestions["outquestions"];
                for (var question in outquestions) {
                    $("#contain").append("<p>(outquestions[question][quest]</p>");
                    for (var choice in outquestions[question]["choices"]) {
                        $("h1").append("<form><input type='radio' name=question value=choice></form>");
                    }
                }
                $("#contain").append("<form><input type='submit' value='submit'></form>");
                $("#contain").on("click", "input[name=submit]", function () {
                });

            });
        }
    });
}); 
```

我希望本节循环遍历问题并在以下内容之间写：

```
var outquestions = allQuestions["outquestions"];
                    for (var question in outquestions) {
                        $("#contain").append("<p>(outquestions[question][quest]</p>");
                        for (var choice in outquestions[question]["choices"]) {
                            $("h1").append("<form><input type='radio' name=question value=choice></form>");
                        }
                    }
                    $("#contain").append("<form><input type='submit' value='submit'></form>"); 
```

之后，我想要所有已循环的问题的答案任何给定的时间来显示单选按钮和单选按钮按钮的值，我得到你在图片中看到的内容。这里有什么问题？![在此处输入图像描述](https://i.stack.imgur.com/KEqR2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:01:07.687

尝试这样的事情：

```
var outquestions = allQuestions["outquestions"];
    for (var question in outquestions) {
        $("#contain").append("<p>(outquestions[question][quest]</p>");
        for (var choice in outquestions[question]["choices"]) {
            $("#contain").append("<h1><input type='radio' name=question value=choice></h1>");
        }
    }
    $("#contain").append("<input type='submit' value='submit'>");
    $("#contain").on("click", "input[name=submit]", function () {}); 
```

我没有测试上面的代码，但它应该把你的选择放在你的问题之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:28:51.143

我为你们做了一些改变，我的一些想法是我的代码的结果：

```
var allQuestions = {
                    outquestions:{
                        question1 : {    quest: "Who is Prime Minister of the United Kingdom?",
                            choices: ["David Cameron","Gordon Brown","Winston Churchill","Tony Blair"],
                            correctAnswer: "David Cameron"}
                    },
                    correctAnswers: 0
                };

                var outquestions = allQuestions["outquestions"];
                for (var question in outquestions) {
                    $("#contain").append("<h1>" + outquestions[question]['quest'] + "</h1>");
                    for (var choice in outquestions[question]["choices"]) {
                        $("#contain").append("<p><input type='radio' name=question value=choice>" +outquestions[question]["choices"][choice] + "</p>");
                    }
                } 
```

感谢您的帮助。

# windows-phone-8 - WP8的后台代理可以访问图片库吗？

> ID：15860963
> 
> 赞同：-1
> 
> 时间：2013-04-07T09:35:05.023
> 
> 标签：windows-phone-8

正如标题所说，有没有办法从后台代理读取图片？谢谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:35:09.263

你不能从后台代理图片库。后台代理中不受支持的 API 的完整列表可在此处找到：[MSDN 链接](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202962%28v=vs.105%29.aspx)

希望这可以帮助。

# text - CORONA SDK 使用计时器显示文本以与音乐同步

> ID：15860964
> 
> 赞同：0
> 
> 时间：2013-04-07T09:35:08.463
> 
> 标签：text, sdk, timer, coronasdk

我对编程很陌生，我正在尝试了解如何在电晕 SDK 中的特定时间显示文本或更新它。

这是为了音乐应用，我希望文本与音乐同步，就像卡拉 OK 一样，但更简单。只是显示歌词的一个句子，然后在特定时间用下一个替换它。另外我希望如果用户重播声音，计时器会重新启动到 0，以便文本和音乐仍然同步

如果你该怎么做，请告诉我。我真的很难理解如何去做

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:53:18.680

一个带有数组的简单计时器可以用来实现你想要的。
这个想法是在前一个定时器被触发后的一个定时器周期之后启动一个定时器。
查看下面的代码：

```
i = 2
--change the text to next line
function changeText( event )
    if i > #lyrics then
        timer.cancel(curTimer);
        print("timer destroyed")
    else
        print("lyrics[".. i .."]: "..lyrics[i].line)
        lyricsDisp.text = lyrics[i].line
        curTimer = timer.performWithDelay (lyrics[i].time, changeText,1)
    end
    i = i + 1
end

--initialize lyrics in an array
lyrics = {}
lyrics[1]        = {}
lyrics[1].line = "First line of song"
lyrics[1].time = 0
lyrics[2]  = {}
lyrics[2].line = "Second line of song"
lyrics[2].time = 2000
lyrics[3]      = {}
lyrics[3].line = "Third line of song"
lyrics[3].time = 5000
lyrics[4]      = {}
lyrics[4].line = "Fourth line of song"
lyrics[4].time = 1000
lyrics[5]      = {}
lyrics[5].line = "Fifth line of song"
lyrics[5].time = 3000

--restart song event handler
restartSong = function( self, event )
    if event.phase == 'ended' then
        timer.cancel(curTimer)
        lyricsDisp.text = lyrics[1].line
        i = 2
        curTimer = timer.performWithDelay(lyrics[i].time, changeText,1)
    end
end

--Initialize the lyrics text
lyricsDisp = display.newText(lyrics[i-1].line, 0, 0, native.systemFont,30)
lyricsDisp.x , lyricsDisp.y = display.contentWidth/2 , display.contentHeight/2

--start the lyrics timer
curTimer = timer.performWithDelay(lyrics[i].time, changeText,1)

--display object to restart the lyrics
restartText = display.newText("Reset", 0, 0, native.systemFont,30)
restartText.x , restartText.y = display.contentWidth/2 , display.contentHeight/2 + 200
restartText.touch = restartSong
restartText:addEventListener('touch', restartText) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T06:43:45.720

例如：

```
local lyrics_label = display.newtext("This is my first line.... line 1",160,100,nil,15)

local lyrics_lines_array = {"This is my first line.... line 2",
                            "This is my second line.... line 3",
                            "This is my third line.... line 4",
                            "This is my fourth line.... line 5"}

local index = 0
local function textChange()
   index = index + 1
   lyrics_label.text = lyrics_lines_array[]
end
timer.performWithDelay(1000,textChange,#lyrics_lines_array)
             --[[ here 1000 ==> the time/delay to change the text ]]-- 
```

# ruby-on-rails - Rails：更新两个表关系之间的id

> ID：15860965
> 
> 赞同：0
> 
> 时间：2013-04-07T09:35:12.333
> 
> 标签：ruby-on-rails, rails-activerecord

我有 4 张桌子：

```
A has many B
B belong_to A

C has many D
D belong_to C

A has_one C
B has one D 
```

From：编辑，插入到B

```
row 1 
row 2 
```

模型

```
def self.build_width_invoice(hash1, hash2)
    doc = Doc.new(hash1) # hash hash B_attributes
    doc.build_C(hash2)  # hash hash D_attributes
    doc
end 
```

控制器

```
obj = A.build_width_invoice(hash1, hash2)
obj.save

save to A, B
        C, D   ok 
```

每个 id 关系都已填充但 id_D int table B 没有值

数据B和D相同

我怎样才能插入它？

# glassfish - 适用于 Java 7 的 JVM 线程转储分析工具

> ID：15860968
> 
> 赞同：1
> 
> 时间：2013-04-07T09:35:58.743
> 
> 标签：glassfish, jvm, threadpool, analysis, dump

我使用**jstack**或 asadmin为**Glassfish 3.1.2** JVM创建**线程转储。**我尝试将它们加载到**samurai** ( [http://yusuke.homeip.net/samurai/en/index.html](http://yusuke.homeip.net/samurai/en/index.html) ) 或**tda** ( [http://java.net/projects/tda](http://java.net/projects/tda) ) 或**IBM**工具 ( [https ://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=2245aa39-fa5c-4475-b891-14c205f7333c](https://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=2245aa39-fa5c-4475-b891-14c205f7333c)）但所有工具都将转储作为文本文件打开并且不执行任何分析。 我怀疑格式从 Java 6 更改为 7。有人知道可以处理当前线程转储格式的工具吗？

 ******谢谢
斯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-02T03:15:38.317

VisualVM 可以完成这项工作。
打开 hprof 和 tdump 文件。tdump 文件仍然只是文本，但使用 hprof 文件可以进行一些分析。******

# c++ - C++ - 多个文件中的全局变量

> ID：15860970
> 
> 赞同：1
> 
> 时间：2013-04-07T09:36:15.460
> 
> 标签：c++, global-variables

**我在header.h**中定义了变量 'a'并在**test1.cpp**，**test2.cpp**中使用它。当我构建它时，我收到了一个链接错误，例如

**致命错误 LNK1169：找到一个或多个多重定义的符号**

有什么问题？我想使用全局变量'a'可以在多个cpp中使用。

头文件.h

```
int a = 0; 
```

主文件

```
#include "header.h"
#include "test1.h"
#include "test2.h"

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    test1();    // expected output : 0
    test1();    // expected output : 1
    test2();    // expected output : 2
    test2();    // expected output : 3

    cout << "in main : " << a << endl;    // expected output : 3

    return 0;
} 
```

测试1.h

```
extern int a;

void test1(); 
```

测试1.cpp

```
#include "test1.h"
#include "header.h"

void test1() {
    cout << "test1 : " << a << endl;
    a++;
} 
```

测试2.h

```
extern int a;

void test2(); 
```

测试2.cpp

```
#include "test2.h"
#include "header.h"

void test2() {
    cout << "test2 : " << a << endl;
    a++;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T09:39:08.180

您应该只将`extern`声明放在*一个*头文件中。这个头文件应该包含在任何其他想要使用的文件中`a`。

然后你应该把定义`int a = 0;`放在*一个*实现文件（一个`.cpp`文件）中。

目前，您`extern`在多个头文件中有许多声明，这*没关系*，但只是令人困惑。您应该简单地在一个地方声明它。*但是，您遇到* 的主要问题是您`a`在`header.h`. 如果您在多个翻译单元中包含该标题，您将有多个定义。

# android-intent - 使用意图打开联系人？

> ID：15860971
> 
> 赞同：4
> 
> 时间：2013-04-07T09:36:18.243
> 
> 标签：android-intent

我正在尝试将我的一个按钮链接到将在我的设备上打开联系人应用程序的意图。关于如何使用意图或其他方法打开它的任何帮助？

```
public class MainActivity extends Activity implements View.OnClickListener {
View v;
Button contacts;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    getContacts();
    contacts.setOnClickListener(this);
}

private void getContacts() {
    // TODO Auto-generated method stub
    contacts = (Button) findViewById(R.id.bcontacts);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId()){
    case R.id.bcontacts:
        intent contacts = new Intent \\this is where i dont know what to do
        break;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:12:17.887

那应该为您解决问题：

```
Intent intent= new Intent(Intent.ACTION_PICK,  Contacts.CONTENT_URI);
startActivityForResult(intent, PICK_CONTACT); 
```

# linux - 如果缓冲区大小太小而无法容纳 read() 系统调用返回的读取数据会怎样？

> ID：15860974
> 
> 赞同：1
> 
> 时间：2013-04-07T09:36:29.213
> 
> 标签：linux, unix

考虑下面的程序，当程序执行时会发生什么？

```
 #include <fcntl.h>
 #include <stdio.h>
 #include <string.h>
 main()
 {
    int fd;
    char buf[256];
    fd=open("/etc/passwd",O_RDONLY);
    if(read(fd,buf,1024)<0)
       printf("read fail\n");
    printf("strlen%d:\n",strlen(buf));
} 
```

我认为读取系统调用会将 1024 字节从内核缓冲区复制到 buf，结果应该是“strlen:1024”

但是我在 gcc 4.1 中执行它，结果是：

```
strlen:1024
segment fault 
```

我想知道为什么会有段错误？

至少，如果应该有，为什么不在 read 系统调用中而是在 printf "stelen:1024" 之后立即抛出段错误？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T09:44:57.690

看起来您愿意将 1024 字节复制到堆栈分配的 256 字节缓冲区中。这会导致[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。*任何事情都有*可能发生。

在您的特定情况下，`read()`愉快地写入您的缓冲区并覆盖堆栈的一部分，包括当前执行函数的返回地址。直到`main()`尝试返回内存空间的未映射部分，然后您的程序出现段错误，才会发生太严重的事情。

另请注意，正如 wildplasser 在他的评论中正确指出的那样，看起来堆栈中被覆盖的部分仍然是零填充的，因此在索引处`strlen()`找到一个终止字符并且不会自行进入未映射的区域。`\0``1024`

当然，这种行为是完全不可靠的，如果你稍微修改你的程序，甚至在同一程序的运行之间，它可能会改变。

# .net - NHibernate 相当于 LINQ to SQL 和 EF 的 Translate ()

> ID：15860975
> 
> 赞同：0
> 
> 时间：2013-04-07T09:36:59.200
> 
> 标签：.net, nhibernate, sqldatareader, datareader

我有一个查询，由于性能原因，我需要使用原始 ADO.NET 制作实际命令（它涉及表值参数）。使用 LINQ to SQL 或 EF，我可以简单地将`DbDataReader`返回的`DbCommand.ExecuteReader()`传递给`DataContext.Translate<T>(DbDataReader)`or`ObjectContext.Translate<T>(DbDataReader)`方法，它将结果集转换为对象，返回一个`IEnumerable<T>`.

NHibernate 中是否有任何等效的 API，我可以通过`DbDataReader`/`IDataReader`甚至是`DbCommand`/`IDbCommand`并获取 NHibernate 实体？

或者也许有一种方法可以拦截由创建的命令的构造，`ISession.CreateQuery(string)`以便我可以修改底层`DbCommand`以按照我需要的方式工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:58:56.923

您可能可以创建一个自定义 UserType 来处理表值参数。

NHibernate 不会在任何公共方法中公开 DataReader -> 实体转换。

# c - 在C中的二叉树中插入节点

> ID：15860977
> 
> 赞同：2
> 
> 时间：2013-04-07T09:37:02.553
> 
> 标签：c, binary-tree

我正在学习 C 并在我的 C 书中找到了一个基本的树实现：

```
#include <stdio.h>
#include <stdlib.h>

struct tree_node {
  int data;
  struct tree_node *left_p, *right_p;
};

struct tree_node *t_search(struct tree_node *root, int v) {

  while (root) {
    printf("Looking for %d, looking at %d\n", v, root->data);
    if (root->data == v)
      return root;
    if (root->data > v)
      root = root->left_p;
    else
      root = root->right_p;
  }

  return 0;
}

int t_insert(struct tree_node **root, int v) {

  while (*root) {
    if ((*root)->data == v)
      return 1;
    if ((*root)->data > v)
      root = &((*root)->left_p);
    else
      root = &((*root)->right_p);
  }

  if ((*root = (struct tree_node *) malloc(sizeof(struct tree_node))) == 0)
    return 2;

  (*root)->data = v;
  (*root)->left_p = 0;
  (*root)->right_p = 0;

  return 0;
}

int main(void) {

  struct tree_node *tp, *root_p = 0;
  int i;

  t_insert(&root_p, 4);
  t_insert(&root_p, 2);
  t_insert(&root_p, 6);
  t_insert(&root_p, 1);
  t_insert(&root_p, 3);
  t_insert(&root_p, 4);
  t_insert(&root_p, 7);

  for (i = 0; i < 9; i++) {
    tp = t_search(root_p, i);
    if (tp)
      printf("%d found\n", i);
    else
      printf("%d not found\n", i);
  }

  return 0;
} 
```

虽然代码看起来很简单，但我很难理解这个`t_insert`功能。为什么它需要 a`struct tree_node **root`而不是`struct tree_node *root`？`t_serach`几乎是相同的代码，但只使用指针而不是指针指针。也许另一个例子可以更好地解释这个问题。

对于它的价值：我来自 Java 背景。

注意：是的，我知道插入时树没有重新平衡。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T10:44:22.597

我们需要的一些东西：

```
#include <stdio.h>
struct thing {
   struct thing *next;
   int value;
   };

struct thing otherthing ={ NULL, 42};
struct thing something ={ &otherthing, 13};
int forty_two = 42;

    void do_the_int(int i);
    void do_the_intp(int *ip);
    void do_the_intpp(int **ipp);
    void do_the_structp(struct thing *p);
    void do_the_structpp(struct thing **pp); 
```

函数可以更改其参数，但调用者不会看到结果，因此：

```
void do_the_int(int i) {
  i = 42;
} 
```

实际上是一个空操作。要实际更改某些内容，该函数需要一个指向它的指针，例如：

```
void do_the_intp(int *ip) {
  *ip = 42;
} 
```

现在，`ip` **指向**的值实际上是由函数改变的。接下来，如果要更改*指针*，该函数将需要一个指向它*的指针：指向指针的指针*：

```
int forty_two = 42; // global (or static)
void do_the_intpp(int **ipp) {
  *ipp = &forty_two;
} 
```

对于其他数据类型（除了 int），情况并没有什么不同：如果要更改结构，则函数将需要*指向 struct*的指针，如果函数需要更改指向 struct 的指针，则需要*指向指向的指针结构*。所以

```
void do_the_structp(struct thing *p) {
   p->value = 42;
} 
```

实际上会改变*struct 中的`*p`*某些内容，并且

```
void do_the_structpp(struct thing **pp) {
   *pp = (*pp)->next;
} 
```

实际上会更改位于*的指针*`*pp`。

现在，让我们称它们为：

```
int main(void) {
int zero=0
  , one=1
  , two=2;
int *the_p;
struct thing *tp, *cur;

  the_p = &two;
  tp = &something;

  printf("Before: zero=%d, one=%d, two=%d the_p=%p *the_p=%d\n"
        , zero, one, two, (void*) the_p,*the_p);
  for(cur=tp; cur; cur = cur->next) {
        printf("p=%p Next=%p Val=%d\n"
              , (void*) cur, (void*) cur->next, cur->value );
        }

  do_the_int(zero);
  do_the_intp(&one);
  do_the_intpp(&the_p);
  do_the_structp(tp);
  do_the_structpp( &tp);

  printf("After: zero=%d, one=%d, two=%d the_p=%p *the_p=%d\n"
        , zero, one, two, (void*) the_p,*the_p);
  for(cur=tp; cur; cur = cur->next) {
        printf("p=%p Next=%p Val=%d\n"
              , (void*) cur, (void*) cur->next, cur->value );
        }

  return 0;
} 
```

输出：

```
Before: zero=0, one=1, two=2 the_p=0x7fff97a7db28 *the_p=2
p=0x601030 Next=0x601020 Val=13
p=0x601020 Next=(nil) Val=42
After: zero=0, one=42, two=2 the_p=0x601040 *the_p=42
p=0x601020 Next=(nil) Val=42 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T09:45:09.143

它传入一个双指针，因为它需要在进程中更改指针。树的所有元素都可以被认为是在调用 insert 时需要更改的指针。如果您不传入双指针，那么您实际上所做的是将指针作为局部变量复制到函数中，并且在插入函数退出时更改无效。如果我错了，请忽略我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T09:57:12.820

如果您只想读取指针指向的内容，则您的参数类型为`foo*`. 如果要更改指针指向的内容，则参数类型为`foo *`. 但是在那里，您希望能够更改您指向的内容。所以，你需要一个指向你的指针的指针，才能改变它的值。

在java中，任何以a为参数的方法`TreeNode`都等价于以a为参数的C函数`tree_node*`；因此，如果您有具有该签名的方法：

```
// Java code
static void treeInsert (TreeNode t); 
```

在该方法中，您可以从 t 访问可以读取其当前状态的方法，您甚至可以修改 的状态`t`，即使您离开该方法，该状态也会更改。

但是，如果你正在做类似的事情

```
t = null; 
```

一旦您离开该方法，这将不会产生影响。这意味着

```
// Java code
static void treeNull (TreeNode t) {
    t = null;  // Warning, local change only !
}

static void treeChange (TreeNode t) {
    t.changeState();
}

static void foo () {
    t = new TreeNode();
    t.treeChange();   // Ok, t has now an update state
    t.treeNull();     // Warning, t is not null here
} 
```

你不能在java中拥有相当于双指针的东西，所以你不能让它工作。

在 C 中，您可以这样做：

```
// C code
void updateState(tree_node* t) {
    data = data + 1;  // This is nonsense, just to make the point
}

void localChangePointer(tree_node* t) {
    t = NULL;
}

void changePointer(tree_node** t) {
    free_and_clean(*t);
    *t = NULL;
}

void sillyStuff() {
    tree_node* t;
    // Initialize t
    ...

    updateState(t); // (*t).data changed
    localChangePointer(t);  // Warning : t is not null yet !
    changePointer(&t);      // This time, we gave the address of t, not t itself

    // Now t == NULL;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T13:04:24.597

也许你会喜欢这样的变体：

```
#include <stdio.h>
#include <stdlib.h>
#include <err.h>

typedef struct btree_node{
    int data;
    struct btree_node *left, *right;
} BTree;

// get tree leaf nearest to v
BTree *bt_get(BTree *root, int v){
    if(!root) return NULL;
    int D = root->data;
    if(D == v) return root;
    if(root->data > v) return root->left;
    else return root->right;
}

// find leaf with v or nearest to it (prev)
BTree *bt_search(BTree *root, int v, BTree **prev){
    if(!root){
        if(prev) *prev = NULL;
        return NULL;
    }
    BTree *p;
    do{
        p = root;
        root = bt_get(root, v);
    }while(root && root->data != v);
    if(prev) *prev = p;
    return root;
}

BTree *bt_create_leaf(int v){
    BTree *node = calloc(1, sizeof(BTree));
    if(!node) return NULL;
    node->data = v;
    return node;
}

// insert new leaf (or leave it as is, if exists)
// return root node
BTree *bt_insert(BTree *root, int v){
    BTree *closest, *node;
    node = bt_search(root, v, &closest);
    if(node) return node; // value exists
    if(!closest) // there's no values at all!
        return bt_create_leaf(v); // create root node
    // we have a closest node to our data, so create node and insert it:
    node = bt_create_leaf(v);
    if(!node) return NULL;
    int D = closest->data;
    if(D > v) // there's no left leaf of closest node, add our node there
        closest->left = node;
    else
        closest->right = node;
    return root;
}

int main(void){
    BTree *tp, *root_p = NULL;
    int i, ins[] = {4,2,6,1,3,4,7,14,0,12};
    for(i = 0; i < 10; i++)
        if(!(root_p = bt_insert(root_p, ins[i]))) err(1, "Malloc error"); // can't insert
    for(i = 0; i < 15; i++){
        tp = bt_search(root_p, i, NULL);
        printf("%d ", i);
        if(!tp) printf("not ");
        printf("found\n");
    }
    return 0;
} 
```

// 我之前的回答错了，正确

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T03:13:32.677

这里将在没有双指针的情况下进行。我看不出有什么不同。

```
int t_insert(struct tree_node *root, int v) {
  while (root) {
    if (root->data == v)
      return 1;
    if (root->data > v)
      root = &(root->left_p);
    else
      root = &(root->right_p);
  }

  if ((root = (struct tree_node *) malloc(sizeof(struct tree_node))) == 0)
    return 2;

  root->data = v;
  root->left_p = 0;
  root->right_p = 0;

  return 0;
} 
```

# vb.net - 将命令行参数传递给 WinForm 在调试模式下有效，但在发布后无效

> ID：15860980
> 
> 赞同：2
> 
> 时间：2013-04-07T09:37:23.550
> 
> 标签：vb.net, winforms, command-line-arguments, process.start

我有一个 WinForms 应用程序，它通过调用接受命令行参数`Environment.GetCommandLineArgs()`并对其进行处理。

它在调试模式下工作正常 - 我在项目属性的调试选项卡中输入参数，然后运行它（F5）并且应用程序正确获取参数。

但是在我发布应用程序并尝试使用以下代码行从另一个 Winform 应用程序调用它之后：

```
Process.Start("\\path\to\myApp\MyApp.application", "4") 
```

它不起作用。显然，由于某种原因，该参数没有传递给应用程序，我不知道为什么。我还尝试创建一个新进程并`ProcessStartInfo.Arguments`在启动它之前对其进行设置，但它仍然无法正常工作。

谁能帮我？

**更新**

在我看来，当`Process.Start("\\path\to\etc", "4")`被调用时，实际运行的是我机器上程序的本地副本，位于`C:\users\myUserName\AppData\Local\App\2.0\long-string-of-digits-and-letters\MyA‌​pp.exe`. 如果我`Process.Start("C:\users\etc", "4")`改为运行 -**它可以工作**。

现在我的问题是 - 为什么在运行时参数没有传递给程序的本地副本`Process.Start("\\path\to\etc", "4")`？我应该怎么做才能将参数传递给本地副本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:51:30.163

好的，正如我在问题更新中所写，问题出在链接中。大概该`.application`文件在我的机器上运行了本地`.exe`文件，但由于某种原因没有将参数传递给它。我不得不直接打开本地`.exe`文件。

为了解决这个问题，我添加了以下代码（为简洁起见，省略了验证/异常处理逻辑）：

```
Dim path As String = Environment.GetEnvironmentVariable("LOCALAPPDATA") & "\apps\2.0"
Dim files() As String = Directory.GetFiles(path, "MyApp.exe", IO.SearchOption.AllDirectories)
Process.Start(files(0), "4") 
```

不是最佳解决方案（因为它假设本地`.exe`文件位于 的某个子文件夹中`%LOCALAPPDATA%\apps\2.0`），但至少它解决了我的问题......

# wpf - 创建空心边框/正方形 wpf

> ID：15860984
> 
> 赞同：1
> 
> 时间：2013-04-07T09:37:46.457
> 
> 标签：wpf, silverlight, wpf-controls

我想在 WPF/Silverlight 中创建一个控件。这个控件是矩形/边框，从中心是空心的。我的意图是将除矩形/边框容器内的正方形区域之外的所有其他内容变灰。有可能这样做吗？

此外，它应该能够在鼠标移动时移动这个空心区域。

提前感谢大家的帮助。![这是我想要的示例输出](https://i.stack.imgur.com/36nnq.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T13:28:59.407

好吧，最简单的解决方案是：

```
<Grid Width="256" Height="256" MouseMove="UIElement_OnMouseMove">
    <Image Source="test1.jpg" Stretch="UniformToFill" />
    <Path Fill="#81808080" Stretch="Fill">
        <Path.Data>
            <CombinedGeometry GeometryCombineMode="Exclude">
                <CombinedGeometry.Geometry1>
                    <RectangleGeometry Rect="0,0,100,100" />
                </CombinedGeometry.Geometry1>
                <CombinedGeometry.Geometry2>
                    <RectangleGeometry
                        x:Name="Hole"
                        RadiusX="7"
                        RadiusY="7"
                        Rect="20,20,60,60" /> <!-- this is the hole -->
                </CombinedGeometry.Geometry2>
            </CombinedGeometry>
        </Path.Data>
    </Path> 
</Grid> 
```

事件处理程序：

```
private void UIElement_OnMouseMove(object sender, MouseEventArgs e) {
    var element = (FrameworkElement) sender;
    var position = e.GetPosition(element);

    var relativeX = position.X/element.ActualWidth*100.0;
    var relativeY = position.Y/element.ActualHeight*100.0;

    Hole.Rect = new Rect(relativeX - 20, relativeY - 20, 40, 40);    
} 
```

# android - 根据联系人电话号码获取联系人照片 Android - 工作示例

> ID：15860994
> 
> 赞同：8
> 
> 时间：2013-04-07T09:39:13.070
> 
> 标签：android, android-listview, contacts, android-contentprovider, android-custom-view

安卓 2.3.3

我查看了有关如何获取“联系人照片”的各种示例。但他们都没有为我工作。令人惊讶的是，我在 StackOVerFlow 上偶然发现了一个代码，我使用了它，并且可以获得“照片”并将其显示在我的 ListView 中的 ImageView 中。

我的应用场景:::

我必须从电话中获取数据（图像/照片、联系人姓名、电话号码）并将它们显示在 ListView 中（每个 Item 都使用 CustomView）

*带有 ListView 的 XML 文件 :::*

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
     android:id="@+id/txtViewContactsHeader"
     android:layout_width="wrap_content"
     android:layout_height="50dp"
     android:text="Your Contacts (Phone + SIM)"
     android:layout_gravity="center"
     android:gravity="center" />

 <ListView
     android:id="@+id/lv_addcontact"
     android:layout_width="match_parent"
     android:layout_height="0dip"
     android:layout_weight="1" >

</ListView>

 <LinearLayout
     android:layout_width="match_parent"
     android:layout_height="50dp"
     android:orientation="horizontal"
     android:layout_gravity="center"
     android:gravity="center" >

     <Button
         android:id="@+id/btn_addcontact_add"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="ADD CONTACTS" />

     <Button
         android:id="@+id/btn_addcontact_cancel"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="CANCEL" />

 </LinearLayout>

  <LinearLayout
     android:layout_width="match_parent"
     android:layout_height="100dp"
     android:orientation="vertical" >

     <TextView
     android:id="@+id/txtViewNavigation"
     android:layout_width="wrap_content"
     android:layout_height="match_parent"
     android:text="Navigation"
     android:layout_gravity="center"
     android:gravity="center" />

 </LinearLayout> 
```

*每个 ListView 项的 XML 文件 - CustomView :::*

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="100dp"
android:layout_margin="2dp"    
android:orientation="horizontal" >

<ImageView
    android:id="@+id/imgView_addcontact"
    android:layout_width="0dip"
    android:layout_height="100dp"
    android:layout_weight="0.20"
    android:padding="5dp"
    android:src="@drawable/addcontactsmall2" />

<LinearLayout
    android:layout_width="0dp"
    android:layout_height="100dp"
    android:layout_gravity="center"
    android:layout_weight="0.60"
    android:orientation="vertical"
    android:padding="5dp" >

    <TextView
        android:id="@+id/txtView_addcontact_contactname"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Contact Name"
        android:textSize="20sp" />

    <TextView
        android:id="@+id/txtview_addcontact_phonenumber"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Phone Number"
        android:textSize="16sp" />
</LinearLayout>

<CheckBox
    android:id="@+id/chbk_addcontact"
    android:layout_width="0dp"
    android:layout_height="100dp"
    android:layout_weight="0.10"
    android:layout_gravity="center"
    android:padding="5dp" /> 
```

Java 文件 - 代码 :::

```
import android.app.Activity;
import android.content.ContentResolver;
import android.content.ContentUris;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.provider.ContactsContract.CommonDataKinds.Photo;
import android.provider.ContactsContract.PhoneLookup;

import android.provider.ContactsContract.Data;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.CheckBox;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;

public class Class_Add_Contact extends Activity {

    ListView lv_addcontacts;
    Cursor cur;
    ContentResolver cr;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_add_contact);
        readContacts();

        if (!((cur.moveToFirst()) || cur.equals(null) || cur.getCount() == 0)) {

        } else if (cur.getCount() > 0) {
            cur.moveToFirst();
        }

        lv_addcontacts = (ListView) findViewById(R.id.lv_addcontact);

        CustomAdapterAddContacts myad = new CustomAdapterAddContacts();

        lv_addcontacts.setAdapter(myad);

    }

    class CustomAdapterAddContacts extends BaseAdapter {

        @Override
        public int getCount() {
            // TODO Auto-generated method stub

            System.out.println(cur.getCount());

            return cur.getCount(); // c.getCount();
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub

            // View MyView = convertView;

            ContactViewHolder contactViewHolder;

            if (convertView == null) {

                // Inflate the layout
                LayoutInflater li = getLayoutInflater();
                convertView = li.inflate(
                        R.layout.activity_listview_addcontact_item, null);

                contactViewHolder = new ContactViewHolder();

                contactViewHolder.imgContact = (ImageView) convertView
                        .findViewById(R.id.imgView_addcontact);
                contactViewHolder.txtViewContactName = (TextView) convertView
                        .findViewById(R.id.txtView_addcontact_contactname);
                contactViewHolder.txtViewPhoneNumber = (TextView) convertView
                        .findViewById(R.id.txtview_addcontact_phonenumber);
                contactViewHolder.chbkAddContact = (CheckBox) convertView.findViewById(R.id.chbk_addcontact);

                convertView.setTag(contactViewHolder);
            } else {
                contactViewHolder = (ContactViewHolder) convertView.getTag();
            }

                cur.moveToPosition(position);

                // Add Contact Name //

                String name = cur
                        .getString(cur
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));

                if (name != null)
                    contactViewHolder.txtViewContactName.setText(name);
                else
                    contactViewHolder.txtViewContactName.setText("Unknown");

                // Add Phone Number //

                String phoneNumber = cur
                        .getString(cur
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                if (phoneNumber != null)
                    contactViewHolder.txtViewPhoneNumber.setText(phoneNumber);
                else
                    contactViewHolder.txtViewPhoneNumber.setText("Unknown");

                Uri uri = getPhotoUri(Long.parseLong(fetchContactIdFromPhoneNumber(phoneNumber)));

                if (uri != null) {
                    contactViewHolder.imgContact.setImageURI(uri);
                } else {
                    contactViewHolder.imgContact
                            .setImageResource(R.drawable.addcontactsmall2);
                }

            return convertView;
        }

        private String fetchContactIdFromPhoneNumber(String phoneNumber) {
            // TODO Auto-generated method stub

            Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI,
                    Uri.encode(phoneNumber));
            Cursor cFetch = getContentResolver().query(uri,
                    new String[] { PhoneLookup.DISPLAY_NAME, PhoneLookup._ID },
                    null, null, null);

            String contactId = "";

            if (cFetch.moveToFirst()) {

                cFetch.moveToFirst();

                    contactId = cFetch.getString(cFetch
                            .getColumnIndex(PhoneLookup._ID));

            }

            System.out.println(contactId);

            return contactId;       

        }

        public Uri getPhotoUri(long contactId) {
            ContentResolver contentResolver = getContentResolver();

            try {
                Cursor cursor = contentResolver
                        .query(ContactsContract.Data.CONTENT_URI,
                                null,
                                ContactsContract.Data.CONTACT_ID
                                        + "="
                                        + contactId
                                        + " AND "

                                        + ContactsContract.Data.MIMETYPE
                                        + "='"
                                        + ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE
                                        + "'", null, null);

                if (cursor != null) {
                    if (!cursor.moveToFirst()) {
                        return null; // no photo
                    }
                } else {
                    return null; // error in cursor process
                }

            } catch (Exception e) {
                e.printStackTrace();
                return null;
            }

            Uri person = ContentUris.withAppendedId(
                    ContactsContract.Contacts.CONTENT_URI, contactId);
            return Uri.withAppendedPath(person,
                    ContactsContract.Contacts.Photo.CONTENT_DIRECTORY);
        }

        public class ContactViewHolder {
            ImageView imgContact;
            TextView txtViewContactName;
            TextView txtViewPhoneNumber;
            CheckBox chbkAddContact;
        }

    }

    private void readContacts() {
        // TODO Auto-generated method stub

        cr = getContentResolver();
        cur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                null, null, null, null);
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();

        if (cur != null) {
            cur.close();
        }
    }
} 
```

我的应用程序的屏幕截图 :::

![在此处输入图像描述](https://i.stack.imgur.com/oRy5P.png)

重要说明 ::: 它对我有用。我也可以为你工作。但是，我不熟悉使用内容提供程序，因此对于查询可能没有太大帮助。SO 的专家可以处理您的查询。

# vhdl - 我可以在视觉上分离位向量常量内的位吗？

> ID：15860996
> 
> 赞同：1
> 
> 时间：2013-04-07T09:39:22.027
> 
> 标签：vhdl

我可以在位向量声明中分隔位以更好地区分它们吗？例如，我有一个 32 位指令，例如：

000000000000000000000000000000000

如您所见，它不像仅使用 8 位那样容易查看。所以我想写一些类似的东西：

000000,00000,00000,00000,00000,000000

太棒了！更具可读性。有没有办法在 VHDL 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T10:08:32.530

在位串文字和十进制文字中，下划线字符“_”被删除并且不影响值。

因此允许写入 0000000_00000_000_0000_00_0 或 "0000000_00000_000_0000_00_0"。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:08:10.627

其他需要考虑的是`&`运算符，用于连接多个元素，甚至是不同数据类型的元素（当然需要适当的转换）：

```
sig <= some_top_bits & "00" & some_other_bits & to_unsigned(some_integer, 4); 
```

# vb6 - 难以理解枚举

> ID：15860998
> 
> 赞同：4
> 
> 时间：2013-04-07T09:39:36.480
> 
> 标签：vb6, enums

如果一个表单不能有一个公共常量声明，为什么它可以有一个公共枚举块？

此外，如果我在表单的声明部分有一个公共变量，我可以在整个应用程序中引用它，但我必须使用点表示法，例如 form1.var1

但是，如果我在表单的声明中放置一个枚举块，我可以在整个应用程序的其余部分中引用它，但前提是它没有以点符号为前缀。

枚举块是表单上唯一只能或必须只能从外部引用而不使用点符号的结构吗？

我失踪的逻辑是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T10:59:44.663

这里的逻辑是枚举定义了一个*类型*。

您已经了解类型，因为您在任何地方都使用它们。类是一种类型。an `Integer`、 a `Long`、 a`String`和所有其他内置数据类型也是如此。`Type`您可以使用关键字创建用户自定义类型；例如，

```
' Defines a new type User
Type User
    Name As String
    ID As Integer
    PhoneNumber As String
End Type 
```

如果你仔细想想，你会发现这是有道理的。你永远不会直接使用枚举。相反，您将其用作一种类型。您声明包含该枚举类型值的变量，就像您声明一个包含`Integer`or类型值的变量一样`String`。

相比之下，常量不是类型。它只是一个常规值，与声明常规变量没有什么不同，只是不能修改常量变量的值。

类型可以在类内部或外部的任何地方定义。*然而，变量*必须要么在类内部定义，要么在模块内部定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T09:20:07.703

这种行为的原因是由于 VB6 是 COM 的基础。大多数 VB 类型都基于 COM 类型库（包含在所有 VB 组件和最常见的“ActiveX”组件中）可用的那些。公共 VB Enum 语句等效于类型库中的“Enum”。但是，在类型库中，枚举是顶级对象（其他对象包括 Interface、CoClass、Module、Record、Union 和 Alias）。这意味着 VB 以 <ProjectName>.<Enum Name> 的形式访问它们，并且此约定适用于内部创建的枚举类型。VB 对象浏览器在显示 Form1.MyEnum 时具有误导性 - 这只是说明它的声明位置。

至于常量 - 不幸的是，这是 VB6 中的功能漏洞。COM 类型库*确实*支持将常量作为类型库模块的一部分，但这种能力从未添加到 VB6 中（可能是因为 VB 没有类型库模块的概念）。